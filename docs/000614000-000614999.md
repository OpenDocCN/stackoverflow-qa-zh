# StackOverflow 问答 000614000-000614999

# iphone - 如何在 Cocos2d 中实现“拖动”选项？

> ID：614003
> 
> 赞同：0
> 
> 时间：2009-03-05T08:45:16.287
> 
> 标签：iphone, objective-c, cocos2d-iphone

我尝试使用 Cocos2d 为 iPhone 开发游戏。我需要 Cocos2d 中的 'DRAG' 选项。是否可以在 Cocos2d 中实现拖动选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-13T10:48:24.147

它做得很好：

```
-(BOOL)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [touches anyObject];

    CGPoint location = [touch locationInView: [touch view]];
    CGPoint convertedLocation = [[Director sharedDirector] convertCoordinate:location];
        //start ur logical code

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-04-05T05:35:19.893

要拖动，您只需将精灵的中心设置为当前触摸坐标的位置。

[请参阅 Apple 开发示例：MoveMe](http://developer.apple.com/iphone/library/samplecode/MoveMe/Introduction/Intro.html)我认为这会有所帮助。

您是否正在尝试创建像 Flight Control 或 Harbour Master 这样的寻路游戏？请更详细地解释您要达到的目标。

# iphone - 如何使用 cocos2d 在 iphone 应用程序中使用选择器视图？

> ID：614004
> 
> 赞同：0
> 
> 时间：2009-03-05T08:46:10.357
> 
> 标签：iphone, cocos2d-iphone

我正在使用 cocos2d 开发一个项目（老虎机游戏）。我需要添加选择器视图来旋转卷轴（图像链）。但我不能做这个轮换。如果你有解决方案，请给我说明如何使用选取器视图或不使用选取器视图来执行此操作。请用帮助指令回答我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-01T21:05:22.463

Cocos2d 不是 .nib 文件。没有简单的“选择器视图”。如果你不能做出这种区分，cocos2d 将比它的价值更麻烦。

相反，您可能应该为旋转的轮子设置动画，然后为轮子上的每个符号制作静态图像。把这些变成一个类。将三个添加到它们所在的层，然后一旦拉动杠杆或任何东西告诉它们进入旋转模式，然后等待，然后进入由 random() 调用或其他东西定义的静态图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-01T21:10:52.687

如果我没看错……你想用 UIPicker 来模拟老虎机气缸吗？

如果是这样，相信我，这比它的价值要麻烦得多。这是 UIPicker 曾经打算支持的更多自定义。制作你自己的纺车，它会更容易，你会学到更多有用的课程（而不是用神秘的子类化技巧来愚弄 UIPicker，你可能再也不会这样做了）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-07T10:18:49.177

我也在做一个基于老虎机的项目。我试图操纵 UIPicker 但这无法得到老虎机的确切外观，所以我决定使用 UIScrollView 和 UIImageView。这很好，工作正常，我们只需要根据需要导航图像。

对于随机数，我创建了一个根据我的算法生成随机数的类。

谢谢， 阿布

# apache-flex - 在 Flex Builder 中将 AS 项目转换为 Flex 项目

> ID：614011
> 
> 赞同：0
> 
> 时间：2009-03-05T08:52:08.017
> 
> 标签：apache-flex, actionscript-3, actionscript, ide, flexbuilder

有没有一种简单的方法可以在 Flex Builder 中将 Actionscript 3 项目转换为 Flex 项目？当我右键单击项目并将鼠标悬停在“Flex Project Nature”上时，所有选项都显示为灰色

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-07T11:32:10.063

在不丢失项目设置的情况下到达那里的几个一般步骤：

*   更改您的导航器过滤器以显示它通常对您隐藏的所有文件。
*   在项目的根目录中查找 .project 文件。你会`<natures>`在那里看到一个标签。
*   创建一个新的 Flex 项目。在那里打开 .project 文件，然后比较`<natures>`节点。
*   将丢失的东西复制到您当前的 .project 文件中。
*   您可能需要关闭项目并重新打开它，以推动 Flex Builder 解析您修改的 .project 文件
*   您可能必须单击项目属性才能使事情变得正确。至少在 Flex 构建路径 -> 库路径下，单击“添加 Flex SDK”按钮，因为这可能是您首先要执行此操作的原因。

如果你错过了模板/东西（我自己不是一个大粉丝，但当你刚开始一个项目时它是一个很好的拐杖），在“Actionscript Compiler”下的“HTML wrapper”下弄乱一个表单字段您的项目属性并应用更改，IDE 将重新创建模板/文件夹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T09:06:18.327

我在FB3中没有看到类似的东西。

一个 AS3 项目将缺少相当多的 Flex 项目设置（例如模板 html）。最好的方法是创建一个空的 Flex 项目并将 AS3 源添加到其中 - 将文件夹拖放`src`到 Flex 项目的文件夹中。或者，如果它是 SWC，您可以使用项目设置添加它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-06T22:44:01.410

它有点脏，但它有效。

1.  在 Flex Builder 的导航器中删除项目。
2.  它会询问您是否也想从文件系统中删除文件。保留它们。
3.  在与 ActionScript 项目相同的目录中创建一个新的 Flex 项目。

旧文件将保持不变，但新项目将具有 Flex Project 的性质。如果已存在与项目向导要创建的文件同名的文件，则不会删除现有文件。

如果您有自定义命令行参数、源或库目录，或任何其他项目特定设置，您可能必须重置它们。

以防万一出现问题，请务必先备份您的项目目录。不过，当我重新创建 Flex Builder 项目时，我从未丢失过文件。

# c++ - 如何在 C++ 中重新启动循环（在随机运行中查找唯一序列）

> ID：614012
> 
> 赞同：1
> 
> 时间：2009-03-05T08:52:10.030
> 
> 标签：c++, loops, sequence

以下代码尝试在 K 次运行中生成随机字符串。但是我们希望新生成的字符串与其参考字符串完全不同。

为此，我尝试使用“继续”重新启动随机字符串生成过程。但是，它似乎不起作用。我下面的方法有什么问题？

```
#include <iostream>
#include <vector>
#include <fstream>
#include <sstream>
#include <time.h>
using namespace std;

// In this code we want to print new string that is entirely different with  
// with those in initVector 

template <typename T> void  prn_vec(std::vector < T >&arg, string sep="")
{   // simple function for printing vector
    for (int n = 0; n < arg.size(); n++) {
        cout << arg[n] << sep; 
    }
}

int main  ( int arg_count, char *arg_vec[] ) {

    // This is reference string
    vector <string> initVec;
    initVec.push_back("A");
    initVec.push_back("A");
    initVec.push_back("A");
    initVec.push_back("A");

    vector <string> DNA;
      DNA.push_back("A");
      DNA.push_back("C");
      DNA.push_back("G");
      DNA.push_back("T");

    for (unsigned i =0; i< 10000; i++) {

       vector <string> newString;
       for(unsigned j=0; j<initVec.size(); j++) {

         int dnaNo = rand() % 4;
         string newBase = DNA[dnaNo];
         string oldBase = initVec[j];

         int sameCount = 0;
         if (newBase == oldBase) {
            sameCount++;
         }

         if (sameCount == initVec.size()) {
              continue;
         }

         newString.push_back(newBase);

       } 
       cout << "Run " << i << " : ";
       prn_vec<string>(newString);
       cout << endl;

    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-05T08:59:59.497

乍一看，您的代码看起来不错，除非我遗漏了您的大部分要求。使用前请阅读[此](http://c-faq.com/lib/randrange.html)`rand()`内容。当然，这`continue`部分除外。您要做的是查看这是否与 the 相同`initVector`，对吗？在将其推入或打印到控制台之前，可以进行简单的比较。

```
int sameCount = 0;
if (newBase == oldBase) {
 sameCount++;
}
// sameCount can be 1 at most, 0 otherwise
// this check never return true
if (sameCount == initVec.size()) {
continue;
} 
```

`sameCount`每次创建新条目时都会初始化该变量，并在循环`newString`结束时超出范围。因此，它不会增加以作为对重复生成的适当检查。理想情况下，您应该使用 a并继续插入其中。不允许重复，您可以避免很多麻烦。`}``for``std::set`

更多关于使用`rand()` `srand()`和随机数生成：

从 comp.lang.c 常见问题解答：

> [...]许多随机数生成器的低位令人痛苦地是非随机​​的

如果您想将随机数保持在范围内

```
[0, 1, ... N - 1] 
```

与简单（如链接中所建议的）相比，更好的方法`rand() % N`是使用以下方法：

```
(int)((double)rand() / ((double)RAND_MAX + 1) * N) 
```

现在，如果你要运行你的程序，每次你都会得到相同的一组 10000 奇数个随机 DNA 链。原来这是因为：

> 大多数伪随机数生成器（以及 C 库 rand 的定义属性）的一个特征是它们总是以相同的数字开始并经过相同的序列。

来自comp.lang.c的另一个[常见问题解答。](http://c-faq.com/lib/srand.html)

要在运行中获得不同的股线，请尝试以下操作：

```
#include <iostream>
#include <vector>
#include <fstream>
#include <sstream>
#include <ctime>
#include <cstdlib>
using namespace std;
    int main  ( int arg_count, char *arg_vec[] ) {

    // most pseudo-random number generators 
    // always start with the same number and 
    // go through the same sequence. 
    // coax it to do something different!
    srand((unsigned int)time((time_t *)NULL));

    // This is reference string
    string initVec("AAAA");    
    // the family
    string DNA("ACGT");

    for (unsigned i =0; i< 5; i++) {
       string newString;
       for(unsigned j=0; j<initVec.size(); j++) {
         int dnaNo = (int)((double)rand() / ((double)RAND_MAX + 1) * 4);
         char newBase = DNA[dnaNo];         
         newString += newBase;
       }
               // ideally push in a std::set 
               // for now keep displaying everything
         if (newString != initVec) {
               cout << "Run " << i << " : " << newString << endl; 
            }
         }
     return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T09:40:01.600

你的算法是假的。无论你想做什么，你都没有做，因为那里没有一条评论，我真的不知道你哪里出错了。

你的内循环：

```
for each element of initVec (4)
    create a random element
    set sameCount to 0
    if random element == current element of initVec, set sameCount to 1
    if sameCount == 4, do something (pointless as this never happens)
    add random element to newString 
```

除此之外，您的“newString”根本不是字符串，而是字符串向量。

所以，你的问题甚至不是使用`continue`，而是你的算法是 FUBAR。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-05T08:59:51.663

`continue`不跳过`for`循环的递增部分。它所做的只是直接进入它，跳过循环体的其余部分。

```
for(int i = 0; i < 10; i++)
{
  if(i == 3)
    continue;
  printf("%d ", i);
} 
```

相当于：

```
int i = 0;
while(i < 10)
{
  if(i == 3)
    goto increment;
  printf("%d ", i);
increment:
  i++;
} 
```

没有反斜杠，`printf()`因为我不知道如何让文本编辑器让我输入一个。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-05T09:08:39.257

对于我现在要说的内容，dirkgentlys 的回答非常全面。

不过，我建议您不要使用 continue，大多数编码标准都建议不要使用 continue，因为它使流程控制更难遵循。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-05T09:42:24.510

您是否意识到 sameCount 永远不会超过 1？由于 initVec.size() 大于 1 执行永远不会继续。

```
int sameCount = 0;
    //sameCount is 0
    if (newBase == oldBase) { // if it is true sameCount is 1
        sameCount++;
    }
    // sameCount is 1 or 0
    if (sameCount == initVec.size()) { //this expression is always false if initVec longer than 1
        continue;
    } 
```

正如其他人已经说过的那样，很难找出你对这段代码的意图。您能否告诉我们，例如，“完全不同”是什么意思？

# asp.net-mvc - 你如何处理可变数量的 MVC 路由？

> ID：614013
> 
> 赞同：3
> 
> 时间：2009-03-05T08:52:29.747
> 
> 标签：asp.net-mvc, routing, url-routing

我注意到 ASP.NET MVC 中这个有趣的地方：

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}"); 
```

我想将 {*pathInfo} 映射到路线中。

就像是：

```
routes.MapRoute(
  "area/{*pathInfo}",
   "{controller}/{action}/{id}",parameters
   new { controller = "Area", action = "Index", id = ??? } 
); 
```

但是如何从 mydomain.com/area/foo/bar/rab/oof 传入变量“foo/bar/rab/oof”？将整个位作为字符串或作为集合传递对我来说都很好。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-05T09:01:28.323

您使用的是哪个 MVC 版本？我记得在 MCV Beta 中，路线名称应该是 MapRoute() 的第一个参数。无论如何，鉴于您捕获路径的目标，我会这样做：

```
routes.MapRoute("AreaRoute", "Area/{*values}", new {controller = "Area", action = "Index"}       ); 
```

在区域控制器中：

```
// "value" argument is the string after Area/, i.e. "foo/bar/rab/oof" in your example
public string Index(string values)  
{  
  ...
} 
```

# database - “系统数据”应该在数据库中吗？

> ID：614021
> 
> 赞同：3
> 
> 时间：2009-03-05T08:57:34.370
> 
> 标签：database, entity-framework, orm

我为包含用户设置的应用程序设计了一个数据库。该数据库将预装几个系统用户设置。这些可能会因版本而异。我应该如何处理更新这些设置？

我想出的解决方案：

1.  将布尔“系统”字段应用于设置表并在数据库版本号更改时替换所有系统设置。（这在设计这些设置时非常烦人，因为您必须在开发时不断擦除数据库）
2.  不要将系统设置放在数据库中，并在查询时以某种方式将系统数据与数据库中的数据合并。

目前我正在做第一个，但不知何故，第二个似乎更合适。使用 Microsoft Entity Framework 时，我应该怎么做以及如何将外部数据与数据库中的数据无缝结合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-05T09:40:40.070

由于存在大量操作，您最终可能希望对超出简单联合的数据执行（内部和外部联接以查看谁与系统设置匹配或不想起）我建议将系统数据放入与用户数据相同的结构。

这也允许在用户没有特定值时从系统数据中填充默认值等行为。

如果您有时间阅读相当长的内容，那么在[这篇博](http://steve-yegge.blogspot.com/2008/10/universal-design-pattern.html)文中有一些关于管理设置和覆盖的有趣点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T09:42:15.447

我会先为用户加载默认值，然后在顶部加载用户自定义值。这样您仍然可以更改默认设置，但如果用户更改了特定设置，他们不会丢失它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T09:42:36.100

我不确定你想用 1) 实现什么，但我可以回答 2)。

所有生成的实体类都是部分类，因此您可以使用自己的属性和方法扩展它们。因此，您可以向从外部源（例如配置文件）获取数据的实体添加额外的属性。

现在，这可能不是最好的解决方案，因为无法一次获取您需要的所有信息（例如，在检索大量实体时）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-19T03:13:11.823

我不确定这是否真的解决了您的问题，但我认为这是一个有趣的小型数据库练习。假设您有一个名为“设置”的表，正如您在 #1 中提出的那样：

```
+------------+--------------+-----------+---------------+
| setting_id | setting_name | is_system | setting_value |
+------------+--------------+-----------+---------------+
|          3 | foo          |         1 | Blue          |
|          4 | foo          |         0 | Red           |
|          5 | bar          |         1 | Green         |
|          6 | baz          |         1 | Yellow        |
|          7 | baz          |         0 | Orange        |
|          8 | quux         |         0 | Purple        |
+------------+--------------+-----------+---------------+ 
```

主键将打开`setting_id`，并且将唯一约束应用于列`setting_name`和`is_system`（这是布尔值）。

要查找当前活动的所有设置（假设用户设置覆盖系统设置），以下查询将完成这项工作：

```
SELECT  setting_name, setting_value
FROM    setting s
WHERE   is_system = (
                SELECT  MIN(is_system)
                FROM    setting si
                WHERE   s.setting_name = si.setting_name
        ); 
```

运行查询会产生以下结果：

```
+--------------+---------------+
| setting_name | setting_value |
+--------------+---------------+
| foo          | Red           |
| bar          | Green         |
| baz          | Orange        |
| quux         | Purple        |
+--------------+---------------+ 
```

因此，如果存在用户设置，则会获取它，否则将使用系统默认设置。

以这种方式使用`MIN()`函数是一种对布尔值进行操作的不正当方式，但它足够简单。

# java - 动态 HTML 表单生成

> ID：614022
> 
> 赞同：1
> 
> 时间：2009-03-05T08:57:40.267
> 
> 标签：java, html, forms

我需要用 Java 生成 HTML 表单。我事先不知道需要哪些字段，这些字段可能会以 XML 的形式提供（我对此有一些发言权）。我可以使用相同的输入文件来处理表单提交。

是否有处理这个问题的库和技术？我无法想象没有，但我找不到合适的解决方案。我查看了 XForms，但似乎没有足够的浏览器采用。

有任何想法吗？非常感谢。

（上下文：符合 JSR-286 的 portlet（使用 Liferay atm））

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T09:04:07.630

尝试使用 XSLT 将 XML 输入转换为 HTML 输出。
检查此[站点](http://www.xml.com/pub/a/2000/08/30/xsltandhtml/index.html)以获取 XSLT 部分的示例和[此](http://www.ling.helsinki.fi/kit/2004k/ctl257/JavaXSLT/Ch05.html)站点以获取 JAVA-XSLT 连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T09:16:00.953

如前所述，如果您有 XML 输入，则可以使用 XSLT 将您的输入转换为 html。

否则，可以使用模板引擎。我在 Velocity 上取得了成功（来自开源项目 Jakarta）。

问候，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-07T05:51:25.673

[XSLTForms](http://www.agencexml.com/xsltforms/)是一个用于浏览器的基于 XSLT 的 XForms 引擎。当然，它也可以用在服务器端。这是一个开源项目。

相应的“编译器”将很快与技术文档一起提供。它将允许您自定义它并添加您自己的特定行为。

# html - 如何在IE中的多个页面上打印网页中的大单张图片

> ID：614023
> 
> 赞同：1
> 
> 时间：2009-03-05T08:58:12.590
> 
> 标签：html, css, internet-explorer

我有一个网页，上面有一个像这样的大 jpeg 文件[https://www.donationcoder.com/Forums/bb/index.php?PHPSESSID=pee3l52288fspopb9i20dpeuv6&action=dlattach;topic=4066.0;attach=2451;image](https://www.donationcoder.com/Forums/bb/index.php?PHPSESSID=pee3l52288fspopb9i20dpeuv6&action=dlattach;topic=4066.0;attach=2451;image)，但是当我打印这来自 IE，我可以看到只有一页打印了四分之一的图像。

有什么办法可以在多页中打印整个图像？

塔拉吉什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-18T05:27:40.417

一个可能的解决方案是添加一个缩小大图像的打印样式表。由于此问题仅影响 IE，因此您可以将样式表仅针对那些带有条件注释的浏览器。该示例假设您事先知道过大的图像是什么。它可以很容易地动态处理其他情况。

在 html 中（这只会被 IE6 及更低版本看到）：

```
<!--[if lte IE 6]>
<link rel="stylesheet" type="text/css" media="print" href="print.css" />
<![endif]--> 
```

在 print.css 中：

```
img.tooLarge {
   width: 25%; 
   height: 25%;
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T11:39:04.323

我假设您正在谈论以**编程方式能够做到这一点**，否则这不是编程问题。话虽如此，我一直在环顾四周，似乎从 CSS 规范和浏览器实现中对这种情况（图像打印操作）的支持很少。仅供参考，您询问的这种特殊行为甚至被认为是旧 IE 版本中的错误。现在，如果您真的*想*摆脱这种情况，我可以想到两种方法：

1.  如果您无法控制图像（即用户将自己的图像上传到公共站点），您可以使用服务器端脚本根据预定义的页面大小对图像进行切片，然后将它们作为单个可打印的 HTML 文档提供（你甚至可以使用[CSS 分页符](http://www.w3.org/TR/CSS2/page.html#allowed-page-breaks)）。

2.  否则，如果您*可以*控制内容，则可以使用一些图形编辑软件进行切片。我知道有一些内置功能可以将图像导出为 HTML 文档，首先对其进行切片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-23T23:45:10.217

使用画笔、Windows 图片和传真查看器或其他程序保存图像并打印。据我所知，Photoshop 也遇到了同样的问题。

# c# - .Net 中的持久主题订阅

> ID：614033
> 
> 赞同：0
> 
> 时间：2009-03-05T09:03:12.903
> 
> 标签：c#

我正在寻找可以在 C# 中用于持久主题订阅的任何开源项目。如果有人知道，请引导我找到适当的资源。我无法找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-30T02:45:03.937

Buddy，据我所知，开源的并不多。您可能感兴趣的是 Neudesic 的产品。除此之外，您可能会对 Biztalk 2009 感兴趣。

就是这样。顺便说一句，一定要仔细阅读 JMS 规范，这真的很有帮助。

# c# - 在c#中如何实现继承？

> ID：614038
> 
> 赞同：1
> 
> 时间：2009-03-05T09:04:19.097
> 
> 标签：c#

这可能是一个愚蠢的问题，但我想要关于 c# 中继承的确切想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-05T09:27:21.427

继承的概念对于任何类型的语言都不是唯一的。然而，不同之处在于继承在 c# 中的工作方式。例如，您可以只继承一个基类，但实现多个接口。为了覆盖派生类中的方法或属性，您必须在基类中将成员声明为虚拟成员。有关更多信息，您可以在此处深入了解 c# 继承的文档[。](http://msdn.microsoft.com/en-us/library/ms173149.aspx#)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-05T09:07:32.193

[http://www.codeproject.com/KB/cs/charpintro01.aspx](http://www.codeproject.com/KB/cs/csharpintro01.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T09:14:59.070

C# 中的继承与任何其他语言中的继承相同，只是语法不同

[这里 ac# 示例](http://www.csharp-station.com/Tutorials/Lesson08.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-05T09:42:34.247

有关继承的完整信息，请访问以下链接：

这是一本涵盖 C# 基础知识的书。你可以通过它并使用它来获取其他东西的知识。

[http://books.google.co.in/books?id=8R451rZJ5o0C&pg=PA506&lpg=PA506&dq=Inheritance+across+Packages+C%23&source=bl&ots=dO-5ccGNoS&sig=cMq-guLDXaL2n7Tbmgsd6f68YzA&hl=en&ei=2puvScv&_Cc-oi=W_kAX book_result&resnum=3&ct=result#PPA464,M1](http://books.google.co.in/books?id=8R451rZJ5o0C&pg=PA506&lpg=PA506&dq=Inheritance+across+Packages+C%23&source=bl&ots=dO-5ccGNoS&sig=cMq-guLDXaL2n7Tbmgsd6f68YzA&hl=en&ei=2puvScv_Cc-_kAXW_Jm9BA&sa=X&oi=book_result&resnum=3&ct=result#PPA464,M1)

# c# - FindControl 实现

> ID：614063
> 
> 赞同：1
> 
> 时间：2009-03-05T09:16:01.657
> 
> 标签：c#, asp.net

在调试一个问题时，我在 DetailsView 上找到一个模板中的控件时遇到了一些奇怪的事情。我已经实现了一个递归 FindControl 扩展，它可以找到一个 id 与我搜索的完全不同的控件。该实现基本上是在父控件上调用 Findcontrol，然后如果找不到，则在子控件上调用递归函数。

我开始使用反射器深入研究 asp.net 代码，并找出了复选框 FindControl 方法的实现方式（System.Web.UI.WebControls.CheckBoxList 中的那个）

```
protected override Control FindControl(string id, int pathOffset)
{
    return this;
} 
```

现在这一切都说得通了，为什么我的 FindControl 找到了一个 CheckBoxList，但是我看不出这个实现背后的任何原因，谁能启发我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-05T13:02:49.223

FindControl 的这个实现覆盖了一个递归方法。

```
protected override Control FindControl(string id, int pathOffset)
{
    return this;
} 
```

是压倒一切的：

```
protected virtual Control FindControl(string id, int pathOffset)
{
     string str;
     this.EnsureChildControls();
if (!this.flags[0x80])
{
     Control namingContainer = this.NamingContainer;
if (namingContainer != null)
{
    return namingContainer.FindControl(id, pathOffset);
} 
```

我推测它会在不需要递归方法时使用 IE 已知当前控件是您要查找的控件。

额外阅读 [MSDN](http://msdn.microsoft.com/en-us/library/407hh602(VS.80).aspx)

> Control.FindControl 在当前命名容器中搜索具有指定 id 和整数的服务器控件，在 pathOffset 参数中指定，这有助于搜索。您不应覆盖此版本的 FindControl 方法。

**id**
要找到的控件的标识符。

**pathOffset**
到达命名容器所需的页面控件层次结构中的控件数。

[关联](http://www.sadev.co.za/node/67)

# javascript - 隐藏具有特定类和属性的链接

> ID：614064
> 
> 赞同：1
> 
> 时间：2009-03-05T09:16:21.127
> 
> 标签：javascript, html, getelementbyid

我有这个html。

```
<a class="link" href="www.website.com?id=233253">test1</a>
<a class="link" href="www.website.com?id=456456">test2</a> 
```

如何通过使用 href 属性和最后一个数字 (233253) 隐藏这些链接之一，以隐藏具有此 href 属性和类“链接”的链接？

这不是一个工作代码，只是我放在一起更好地解释它的东西。getElementsByTagName('a').class('link').href="*233253"

更新：不幸的是，它必须是纯 javascript，不使用库，并且必须在 IE6 上运行。

Update2：我无权访问 html

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-05T09:21:36.463

[**编辑**]：代码有点草率，现在应该可以工作了。包括 split 方法（见评论）。

循环遍历 a 元素，检查 href 并应用隐藏。像这样：

```
var refs = document.getElementsByTagName('a');
for (var i=0;i<refs.length;i++) {
       if (
             refs[i].href &&
             refs[i].href.replace(/(\d+$)/,'$1').match('[your value to match]')
          ) {
           refs[i].className = refs[i].className.replace(/link/i,'');
           refs[i].style.display = 'none';
       }
} 
```

或者

```
for (var i=0;i<refs.length;i++) {
   var hs = refs[i].href.split(/=/)[1];
   if (  hs.match([your value to match]) ) {
       refs[i].className = refs[i].className.replace(/link/i,'');
       refs[i].style.display = 'none';
   }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-05T09:25:41.960

使用 jQuery：

```
$("a.link[href$='233253']").hide(); 
```

$= 属性选择器匹配所选属性以给定值结尾的所有元素。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-05T09:27:37.557

```
<html>
<head>
<script type="text/javascript">

function hideLinks(className, ids) {
    var links = document.getElementsByTagName("a");
    var max   = links.length;

    for (var i=0; i<max; i++) {
        var link   = new RegExp("(\s*)"+ className +"(\s*)");
        var isLink = link.test(links[i].className);

        if (isLink) {
            for (var j=0; j<ids.length; j++) {
                var regexp = new RegExp(ids[j] + "$");
                var hasId  = regexp.test(links[i].href);

                if (hasId) {
                    links[i].style.display = "none";
                }
            }
        }
    }
}

window.onload = function() {
    hideLinks("link", [233253]);
}
</script>
</head>
<body>

<a class="link" href="www.website.com?id=233253">test1</a>
<a class="link" href="www.website.com?id=456456">test2</a>

</body>
</html> 
```

**编辑**：在阅读了您关于将功能封装在函数中的评论后，我发布了一个新版本。这个应该和以前的版本一样工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-06T06:51:12.433

没有冒犯，但创建循环对我来说似乎是一种解决方法。如果您可以将唯一 ID 添加到显然是首选方法的链接中。

之后，您可以使用“getElementById”设置不同的类来隐藏特定链接。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-03-06T06:53:20.213

一个链接与另一个链接的区别是什么？如果您在服务器端知道这一点，则添加适当的类名，这些类名将以静态方式从 CSS 中隐藏。

动态确定需要隐藏的内容将需要您动态生成 javascript 片段，除非您在 HTML 中呈现它。

**更新：**如果您无权访问生成的 HTML，那么我的帖子对您​​没有帮助。

# c# - 如何解析 XML 中的所有实体引用并在 C# 中创建新的 XML？

> ID：614067
> 
> 赞同：2
> 
> 时间：2009-03-05T09:19:13.100
> 
> 标签：c#, xml, entity

如何解析 XHTML 文档中的所有实体引用并将其转换为 IE 可以理解的纯 XHTML 文档？示例 XHTML：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html [
    <!ENTITY D "&#x2014;">
    <!ENTITY o "&#x2018;">
    <!ENTITY c "&#x2019;">
    <!ENTITY O "&#x201C;">
    <!ENTITY C "&#x201D;">
]>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    </head>
    <body>
        &O; &C;
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-05T16:01:52.633

原来这是 XmlTextReader（和 XmlValidatingReader）类中的简单选项 - “EntityHandling”。

所以一个简单的问题演示：

```
System.Xml.XmlTextReader textReader = new System.Xml.XmlTextReader("testin.xml");
textReader.EntityHandling = System.Xml.EntityHandling.ExpandEntities;
System.Xml.XmlDocument outputDoc = new System.Xml.XmlDocument();
outputDoc.Load(textReader);
System.Xml.XmlDocumentType docTypeIfPresent = outputDoc.DocumentType;
if (docTypeIfPresent != null)
    outputDoc.RemoveChild(docTypeIfPresent);
outputDoc.Save("testout.html");
textReader.Close(); 
```

如果您不想将文档加载到内存中，则可以使用流式等效项：

```
System.Xml.XmlTextReader textReader = new System.Xml.XmlTextReader("testin.xml");
textReader.EntityHandling = System.Xml.EntityHandling.ExpandEntities;
System.Xml.XmlTextWriter textWriter = new System.Xml.XmlTextWriter("testout.html", System.Text.Encoding.UTF8);
while (textReader.Read())
{
    if (textReader.NodeType != System.Xml.XmlNodeType.DocumentType)
        textWriter.WriteNode(textReader, false);
    else
        textReader.Skip();
}
textWriter.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T08:26:42.343

[xmllint](http://xmlsoft.org/)可以做到这一点，而且由于 xmllint 是用 C 语言编写的并且是免费软件，因此将它的工作方式调整到您的 C# 程序可能相对容易。这是一个例子：

```
% cat foo.xhtml 
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html [
    <!ENTITY D "&#x2014;">
    <!ENTITY o "&#x2018;">
    <!ENTITY c "&#x2019;">
    <!ENTITY O "&#x201C;">
    <!ENTITY C "&#x201D;">
]>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    </head>
    <body>
        &O; &C;
    </body>
</html>

% xmllint --noent --dropdtd foo.xhtml
<?xml version="1.0" encoding="utf-8"?>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    </head>
    <body>
        [Plain Unicode characters that I prefer to omit because I don't know how SO handles it]
    </body>
</html> 
```

# wpf - Prism v2：寻求澄清为什么模块需要“向 shell 注册视图类型”

> ID：614069
> 
> 赞同：0
> 
> 时间：2009-03-05T09:20:03.440
> 
> 标签：wpf, silverlight, prism

我正在阅读他们声明的[Prism v2 指南：](http://www.microsoft.com/downloads/details.aspx?FamilyID=fa07e1ce-ca3f-4b9b-a21b-e3fa10d013dd&DisplayLang=en)

> *在初始化期间，模块使用 RegionManager 来定位 shell 中的区域并向这些区域**添加一个或多个视图**，或者注册要在这些区域内创建的**一个或多个视图类型***

我知道视图是在引导程序中添加的，例如在 GetModuleCatalog() 方法中：

```
protected override IModuleCatalog GetModuleCatalog()
{
    ModuleCatalog catalog = new ModuleCatalog()
        .AddModule(typeof(HelloWorldModule.HelloWorldModule));
    return catalog;
} 
```

但是注册一个视图类型是什么意思呢？如果模块已经像上面的代码一样“添加视图”，为什么还需要向 shell “注册视图类型”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-05T14:28:43.807

在您的代码中，您不是将视图添加到引导程序，而是将模块添加到 ModuleCatalog。CAB/Prism/Composite UI 世界中的模块可以包含视图，但很多时候它提供了其他模块可以使用的某种附加服务。例如，假设我有一个 Shell 恰好使用一些停靠管理器来显示视图。我希望模块使用 API IDockingWindowService 来显示/隐藏窗口。我希望服务实现易于互换，因此我创建了一个包含名为 DockingWindowService 的服务并实现 IDockingWindowService 的模块。我在 ModuleCatalog 中注册了这个模块。

复合框架工作流将创建此服务，将其注册到引导程序，并且在此之后加载的任何模块都将能够使用 IDockingWindowService。这个服务不是视图，而是逻辑；只是想指出这种区别。话虽如此，一个模块可以包含 0 个或多个视图（或者，作为简化，用户控件）。UI的单位是View。模块更像是一个逻辑和/或 UI 捆绑概念。

回到您的特定问题：文档所说的是，如果您使用区域来显示您的视图，您可以使用区域注册视图类型。每当显示区域时，它将使用 Unity 容器自动构建视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T13:40:37.230

当您向区域注册类型时，只要显示该区域，该类型就会被实例化。

如果您找到一个区域，然后向其添加视图，则不需要向该视图注册类型，因为您正在做这项工作，而不是让区域经理来做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-26T08:01:33.350

在您的示例中，您正在将模块添加到应用程序模块中，我认为它是使用实现 IModule 接口的类（模块初始化程序类）加载库

每次调用该模块初始化程序类的 Intialize 方法时，模块都会注册它自己的 IoC 映射和模块工作所需的其他内容。

现在，模块可以在模块初始化期间**加载视图（添加菜单项或工具栏项等）。**这将涵盖您问题的“在模块初始化期间添加一个或多个视图”部分。

除了在初始化期间显示视图之外，模块通常包含更多视图，这些视图不会在模块加载时显示，而是通常用于响应某些事件（UserLoogingIn 事件可能需要显示登录视图）。为了让 Prism 显示该视图，视图和表示模型之间的所有映射必须已经在模块初始化程序中定义。

像这样的东西（基于 RI 代码风格）

this.container.Register(); this.container.Register();

因此，模块初始化程序将通过定义统一所需的映射来**注册视图**，以在加载视图的区域管理器操作期间解析视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-07T14:38:47.107

在上面的代码中，您正在填写一个模块目录。这是 Prism 中模块化工作原理的一部分。我有一个截屏视频[在这里](http://development-guides.silverbaylabs.org/Video/Modularity-in-Prism)解释它。本质上，您是在告诉 Prism 加载 .dll 或 .xap 文件。这些“模块”可以包含两件事：服务（考虑接口的实现）和视图。

加载模块（通常是 .dll 或 .xap 文件）时，会调用 Initialize 方法，您可以在其中注册服务和区域：

```
public class ModuleA : IModule
{
    IRegionManager _regionManager;
    IUnityContainer _container;

    public ModuleA(IRegionManager regionManager, IUnityContainer container)
    {
        _regionManager = regionManager;
        _container = container;
    }

    #region IModule Members

    public void Initialize()
    {
        _container.RegisterType<ICompanyService, CompanyService>();
        _regionManager.RegisterViewWithRegion("MainRegion", typeof(ModuleAView));

    }

    #endregion
} 
```

注意视图注册：

```
_regionManager.RegisterViewWithRegion("MainRegion", typeof(ModuleAView)); 
```

您可以在 Initialize 中注册任意数量的视图。并且在任何模块的任何初始化中（同样，通常是 .xap 或 .dll）。

# javascript - 如何将固定高度的标题与灵活的页面布局相结合

> ID：614087
> 
> 赞同：3
> 
> 时间：2009-03-05T09:28:28.570
> 
> 标签：javascript, css

## 问题：如何将固定高度与灵活的页面布局结合起来？

> *   “bodyDiv”高度需要为：（window.innerWidth**减去 ?px**）的 100%。
> *   “a”和“b”高度需要：（body.div.height**减去 ?px**）的 50%。

* * *

```
<HTML>
    <body>
        <div id="headerDiv" style="height:?px">fixed height</div>
        <div id="bodyDiv" style="height:100%">flexible height
            <div id="a" style="height:50%">flexible height</div>
            <div id="x" style="height:?px">fixed height</div>
            <div id="b" style="height:50%">flexible height</div>
            ...
        </div>
    </body>
<HTML> 
```

* * *

它已在 JavaScript 中完全解决，但在页面加载和调整大小事件时看起来很糟糕，因为它太慢了，即使我已尽我所能优化它以提高速度。

CSS 表达式也不是一个选项，因为据我所知，无论如何这将仅限于 IE 5-7。

因此，在花了 3 天时间试图通过使用负边距和正边距的任意组合来解决这个问题后，我最终不得不承认失败，最终寻求公共帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-05T10:54:19.207

冒着失去名誉的风险。

我建议做这样的事情：

```
<table style="height:100%;width:100%">
  <tr style="vertical-align:top;height:50px;background-color:#faa;">
    <td>Fixed</td></tr>
  <tr style="vertical-align:top;background-color:#afa;">
    <td>Flexible</td></tr>
  <tr style="vertical-align:top;height:100px;background-color:#faa;">
    <td>Fixed</td></tr>
  <tr style="vertical-align:top;background-color:#afa;">
    <td>Flexible</td></tr>
</table> 
```

这会冒犯布局 v 语义纯粹主义者，但它可以完成工作，并且可以节省你在 div 和 CSS 上乱七八糟的时间。

PS 这只是一个说明，样式应该真的在外部样式表中，并通过元素 id 链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-05T10:13:04.547

恐怕它不能用纯 CSS/HTML 来完成。如果我错了，我会是最快乐的。SO上有几个相关的问题（没有全部阅读，其中一些可能会涉及稍微不同的问题）：

1.  [使一个 div 填充剩余屏幕空间的高度](https://stackoverflow.com/questions/90178/make-a-div-fill-the-remaining-screen-space)
2.  [即使没有内容，如何强制 DIV 块扩展到页面底部？](https://stackoverflow.com/questions/147528/how-to-force-a-div-block-to-extend-to-the-bottom-of-a-page-even-if-it-has-no-con)
3.  [如何创建 div 以填充页眉和页脚 div 之间的所有空间](https://stackoverflow.com/questions/206652/how-to-create-div-to-fill-all-space-between-header-and-footer-div)
4.  [如何将 div 缩放到另一个元素内的 100% 高度和宽度](https://stackoverflow.com/questions/572783/how-can-i-scale-a-div-to-100-height-and-width-inside-of-another-element)

有各种“解决方案”，但都不是完美的。如果您找到解决此问题的更好方法，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-06T08:04:17.360

以下正是我想要的，即：

*   页面的宽度和高度正好是 100%
*   页眉和页脚的高度是固定的
*   所有其他元素的宽度和高度都是灵活的
*   灵活的尺寸以总计 100% 的金额表示
*   静态尺寸以像素为单位
*   页面加载/调整大小不需要 javascript
*   页面加载/调整大小不需要 css 表达式
*   页面加载事件没有丑陋的页面重绘延迟
*   调整大小事件没有丑陋的页面重绘延迟
*   由于 4) 和 5)，拆分器的脚本将很简单

* * *

```
<html>
  <style type="text/css" media="all">
    html,body,table,div{height:100%;width:100%;}
    html * {outline:0;border:0;margin:0;padding:0;border-collapse:collapse;border-spacing:0;}
    div{float:left}
  </style>
  <body>
    <table>
      <tr style="height:100px;background-color:red;"><td>Fixed</td></tr>
      <tr style="height:100%;"><td>
        <div style="width:25%;margin-right:-4px;background-color:green;">Flexible</div>
        <div style="width:8px;background-color:silver;cursor: e-resize;"></div>       
        <div style="width:50%;margin-right:-4px;margin-left:-4px;background-color:blue;">Flexible</div>
        <div style="width:8px;background-color:silver;cursor: e-resize;"></div>     
        <div style="width:25%;margin-left:-4px;">
          <div style="height:33.33%;margin-bottom:-4px;margin-top:-0px;background-color:green;">Flexible</div>
          <div style="height:8px;background-color:silver;cursor: n-resize;"></div>          
          <div style="height:33.33%;margin-bottom:-4px;margin-top:-4px;background-color:blue;">Flexible</div>
          <div style="height:8px;background-color:silver;cursor: n-resize;"></div>          
          <div style="height:33.33%;margin-bottom:-0px;margin-top:-4px;background-color:yellow;">Flexible</div>
        </div>
      </td></tr>
      <tr style="height:20px;background-color:red;"><td>Fixed</td></tr>
    </table>
  </body>
</html> 
```

* * *

这个解决方案是在 Noel Walters（表格方法）和我自己（负边距的 div）的帮助下实现的。谢谢诺尔。但是，由于我还没有收到我的用户 ID 的确认信息，所以无法投票支持您的答案！

* * *

我只想像 David 建议的那样通过 div 和 css 完成此操作，但正如我在原始帖子中所述，我只是“不能”。将阅读您建议的链接，并让您了解“完美”解决方案，以防我设法解决。感谢这些链接，戴夫。

* * *

新的小问题：拆分器需要**4px**宽/高，它们是。奇怪的是，我不得不使用**8px**作为分隔符，而使用**-4px * 2**作为周围元素的负边距。有什么建议么？

* * *

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-10T21:51:02.720

好吧，这是关于表格与 css 布局的永无止境的故事。CSS 纯粹主义者甚至会说 CSS 布局下载速度更快？浏览器渲染速度更快？代码少？？？在现实生活中，并且在适当的 CSS 表单中具有“视觉”样式，表格布局的字符比使用 CSS 的要少得多。不相信？只需尝试使用 CSS 和表格进行完整的浏览器高度、固定宽度、水平居中、页眉/2 列内容/页脚简单布局...获取代码，粘贴到 Word 中并进行字数统计。CSS代码不比表格代码短x2倍！告诉我，要在屏幕布局中间复制一个 100% 宽 100% 高的文本，你需要做多少 CSS 工作，简单如下：

```
<table width=100% height=100%><tr><td align="center" valign="middle">Some text</td></tr></table> 
```

或者

```
* {
margin:0px;
padding:0px;    
}

html, body {
height:100%;
min-height: 99%;
}

.test {
border: 1px solid #cccccc;
height:100%;
position:relative;
}

.test2{
display:inline;
height:24px;
width:24px;
left:50%;
top:50%;
}
<div class="test"><div class="test2">test</div></div> 
```

所以 CSS 更适合布局，因为什么？更容易维护？告诉我，当页面完全完成并正常工作时，有人会调整多少次页面布局？除非没有妻子/丈夫在手 :D 更少的代码？是的，对，“更多”就是“更少”，就像 1 是 0？更好的设计/代码分离？当然，您的设计不需要那些 DIV 或 SPAN 或 P 或任何您想要的标签。

我一直认为：使用混合代码在更短的时间内做任何你想做的事情，以呈现你想要的方式，无论是 css 还是表格或 css + 表格！对我来说，表格作为布局是最好的，css 用于优化和渲染视觉效果。最后，如果他们的网站是用 css 或桌子或木头和钉子制作的，客户不会关心黄瓜。:) 告诉我一个很好的理由，为什么我应该使用纯 CSS 方法来获得完全以宽度为中心的 3 列、固定的中间列、完整的浏览器高度，而无需进行 CSS 调整、修复、黑客攻击......每个人都真正进入网站在所有浏览器中，creation 都知道表格呈现比 CSS 更直观且所需的代码更少。

快速测试:)`<div width="100%" height="100%">test</div>`这个单独工作吗？

# windows - 通过网络有效使用 gvim

> ID：614088
> 
> 赞同：5
> 
> 时间：2009-03-05T09:28:43.763
> 
> 标签：windows, vim, ftp

我目前在 telnet 窗口中使用 vim 来编辑代码（非常老派！）。有很多源代码（主要是 C），所以我使用标签、cscope 等来解决。就目前而言，这是可以的，但是网络延迟会使每次击键都“滞后”，这不是很好！

我想在我的 Windows PC（或任何可以设置为执行此操作的编辑器）上使用 gvim 来：

1.  通过 FTP 远程编辑文件（gvim 已经可以做到这一点）
2.  使用存储在本地或服务器上的 TAGS 文件（在服务器上使用一个可能更有效，然后我不必通过 FTP 下载每个文件）。我想生成文件然后 FTP 到我本地机器上的正确位置就可以了。
3.  运行 shell 命令，就好像我在服务器上的文件目录中一样（make、各种脚本等）。我确实可以通过 ssh 访问机器，所以我认为这不会是一个问题。

我对vimscript有点熟悉，所以我不介意做点胶水。我认为我不可能是唯一一个想要这样做的人——因此在这里问。

就像我说的 - 如果有任何像样的编辑器具有这个“内置”，那么我不介意切换！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-05T10:08:35.150

您还可以使用 SSH 通过 vim 远程编辑您的文件。

```
:e scp://remote.host.com/project/file 
```

然后使用SSH远程调用make：

```
:!ssh remote.host.com '(cd project; make)' 
```

**ctags**

为了远程使用*ctags*，我将远程创建*标签*文件并将其复制到本地计算机，并将*scp://remote.host.com/project/*添加到标签文件中的每个文件名中。你可以用类似的东西来做到这一点

```
:%s#^\(\w\+\)\t#\1\tscp://remote.host.com/project/# 
```

在标签文件上。然后在处理远程文件时，您使用 ':set tags=local_ctags/tags' 来引用标签文件的本地（修改）版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T10:06:00.397

'tags' 选项告诉 Vim 在哪里寻找 TAGS 文件，虽然我不确定 Vim 在这个选项中是否允许 ftp:// 或 scp:// 路径。

您可以使用在服务器上运行命令`:!ssh ...`

但是您不认为使用其中一个源代码控制系统、在本地处理文件然后将更新的文件放在服务器上会更好吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-05T20:00:44.773

如何在本地挂载远程目录？您可以将其导出为 SMB 共享、NFS 挂载，或者有几个可用于 Windows 的 SSH 文件系统 (sshfs) 等效项。

# iphone - Cocos2d 中的图层 vs 场景用于 iPhone 游戏开发

> ID：614090
> 
> 赞同：5
> 
> 时间：2009-03-05T09:30:23.433
> 
> 标签：iphone, cocoa-touch, cocos2d-iphone

使用 cocos2d 进行 iPhone 游戏开发，我对 Layer 和 Scene 感到困惑。例如，我的简单游戏有几个“UI 页面”，如主菜单、高分、游戏板等。

那么我应该为每个“UI 页面”使用图层还是场景，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-11T18:08:46.887

查看SpritesDemo.m/.h，似乎他们正在使用图层，然后创建新场景，附加图层然后替换导演上的场景

```
@interface SpriteDemo : Layer
@interface SpriteManual : SpriteDemo 
```

然后代码执行以下操作：

```
-(void)nextCallback:(id)sender {
  Scene *s = [Scene node];
  [s add: [nextAction() node]];
  [[Director sharedDirector] replaceScene s];
} 
```

因此，简而言之，您的问题的答案将是“两者”，您使用图层来表示您的实际“UI 页面”，但您将图层附加到新场景并替换导演中的当前场景。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-06-10T12:47:06.483

这简单：

在这些示例中，他们有一个 CCLayer 和一个 +scene 方法，该方法可以创建一个新场景并将图层附加在其上。因为图层不是您命名的“UI 页面”。一个场景是一个“UI Page”。

在两者（场景和图层）上，您都可以添加更多图层作为子图层。因此，您可以根据需要堆叠任意数量的层。这实际上是启用多点触控的好方法 - 通过为每个对象创建一个图层并在这些图层上启用触控。最重要的是，他们这样做的方式是正确的，因此您也应该使用图层并使用 +scene 方法将主图层附加到场景。

希望这可以帮助。对不起我的英语不好。不是本地人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T03:55:51.250

你真的不需要使用层，除非你得到某种触摸输入（因为它是 Cocos2D 中唯一实现 TouchEventsDelegate 的类）。如果您将他们的代码直接放在没有图层的场景中，这些演示可以正常工作，所以据我所知，他们这样做只是为了演示其他 Cocos2D 功能（添加子项、设置位置等）。

# .net - .NET 程序集没有磁盘映像？

> ID：614091
> 
> 赞同：1
> 
> 时间：2009-03-05T09:30:36.537
> 
> 标签：.net, assemblies

这甚至可能吗？例如，我想将程序集作为来自网络或 zip 存档的字节流读取，并从 RAM 本身运行它，而无需在磁盘上创建映像。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-05T09:37:16.863

[`Assembly.Load(Byte[])`](http://msdn.microsoft.com/en-us/library/h538bck7.aspx)

# sql - 用户可能不知道所有信息的日期的 SQL 日期模式

> ID：614093
> 
> 赞同：3
> 
> 时间：2009-03-05T09:31:24.210
> 
> 标签：sql, design-patterns, date, null

您的系统允许新用户注册并输入他们的结婚日期。作为一个纯粹主义者，我想把它存储为一个日期。在用户采访之后，很明显现实与这种方法不同。用户通常不确定日期或月份，并希望存储部分日期，例如“2009 年 6 月”或“2012 年的某个时间”。

有谁知道一个好的设计模式，它允许存储部分日期，然后尝试为重要的日子创建一个时间线——即使输入了部分日期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T09:38:59.200

您可以将其存储为具有日期后和日期前列的范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T09:34:36.853

您始终可以将日期存储在单独的列中：

*   年
*   月
*   日期

保持它们都可以为空。您可以添加一列来存储计算的全时。对于该计算时间，您对所有为空的列使用一些默认值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-05T09:44:44.100

也许是一个“模糊”的约会。如果他们说“2009 年 6 月”，则可以存储为 2009 年 6 月 15 日，差异为 +/- 15 天。

“2010 年的某个时候”是 2010 年 7 月 1 日，相差 180 天。

所以存储一个日期和 # 天。

如果/如何在实践中起作用，我不知道。只是一个想法。日期范围可能更容易实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-05T09:48:53.840

您可以将日期存储为`YYYYMMDD`，将未知月份/天数设置为 0。例如，`20090200`将是“2009 年 2 月的某天”。这将使您相对容易地进行排序和比较，如果您需要将其转换为日期，您只需将月或日加 1 即可获得更高级日期比较的近似值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-05T09:54:23.220

我对日期也有类似的问题；加上一些人也想说“6 月 15 日”的附加问题，但没有指定年份。这也是你必须处理的案子吗？

我将日、月和年存储在数据库的三个单独的列中，每个列都可以为空，然后（在某种程度上）在我的应用程序中重新发明了轮子（以及不允许某些情况，例如人们说“1974 年 15 日” ）。

但是，当我将所有日期处理逻辑都放在我的应用程序中时，我从未单独访问过这三列。事后看来，我希望我把它们放在一个列中，将部分日期保存为字符串（比如“19740615”、“1974----”、“----0615”等），这样我就可以d 列的杂乱更少。

我想这取决于你想在数据库中做多少以及你想在你的应用程序中做多少。不管怎样，我认为你会发明一个形状略有不同的轮子。但是，当然，你已经足够好，可以制作一些整洁、封装、可重用的类——这会让它变得有趣！:-)

# c++ - 为什么这个简单的字符串赋值会出现段错误？

> ID：614094
> 
> 赞同：4
> 
> 时间：2009-03-05T09:31:33.693
> 
> 标签：c++, string, initialization

我有以下代码：

```
#include <iostream>
using namespace std;
int main()
{
    char* a = "foo";
    char* b = "bar";
    a = b;
    cout << a << ", " << b << endl;
    return 0;
} 
```

这编译和工作，即。打印`bar,` `bar`。现在我想证明这里发生的事情不是复制字符串。我想改变`b`并表明它`a`也会改变。我想出了这个简单的代码：

```
#include <iostream>
using namespace std;
int main()
{
    char* a = "foo";
    char* b = "bar";
    a = b;
    b[1] = 'u'; // ← just this line added
    cout << a << ", " << b << endl;
    return 0;
} 
```

…但它有段错误。为什么？有趣的是，下面的修改运行得很好：

```
#include <iostream>
using namespace std;
int main()
{
    char* a = "foo";
    char b[] = "bar"; // ← declaration changed here
    a = b;
    b[1] = 'u';
    cout << a << ", " << b << endl;
    return 0;
} 
```

为什么它不像前一个那样出现段错误？我想我错过了指针样式和数组样式字符串初始化之间的一些重要区别。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-05T09:33:37.060

您无法更改字符串常量，这是您在第一个代码示例中使用指向文字的语法时所得到的。

另请参阅此问题：[C++ 中的字符串文字是在静态内存中创建的吗？](https://stackoverflow.com/questions/349025/is-a-string-literal-in-c-created-in-static-memory).

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-05T09:34:41.050

当你写这个：

```
char *b = "bar"; 
```

编译器分配一个匿名（无名）内存区域来存储字符串文字“bar”。字符串文字可能不会被修改，因此编译器（在链接器和操作系统的帮助下）将字符串文字放在正在运行的程序的一部分写保护的内存空间中。当您尝试修改它时，操作系统会捕获它并导致您的程序出现分段错误。

（您的代码是 C++，而不是 C，但这与这个问题无关。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-05T09:35:07.757

当你写：

```
char *foo = "bar"; 
```

实际发生的是“条”存储在内存的只读段中。因此，它是不可变的。你得到一个段错误，因为你试图修改一个只读段。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-05T09:43:52.213

您还可以通过打印指针的值来显示“a”已更改。

```
#include <iostream>
using namespace std;
int main()
{
    char* a = "foo";
    char* b = "bar";
    a = b;

    cout << (void*)a << ", " << (void*)b << endl;
} 
```

这将打印 'a' 和 'b' 指向的地址。
您必须强制转换为 'void*' 因为运算符 << 为 'char*' 重载以打印出任何其他指针将打印地址的字符串。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-05T11:44:33.500

理论上，不应将字符串文字分配给 char*，而只能分配给 'const char*'。然后编译器会在你编写段错误代码之前阻止你。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-03-05T09:34:58.117

这种差异可能是特定于编译器的。为了证明您的观点，请使用 malloc 分配缓冲区，然后将字符串复制到此缓冲区中，并且当您不再需要该字符串时不要忘记使用 free 。

# debugging - 如何从 IIS 日志中读取调试信息

> ID：614095
> 
> 赞同：0
> 
> 时间：2009-03-05T09:31:39.607
> 
> 标签：debugging, iis, logging, asp-classic

我正在维护一个旧的 asp 经典应用程序。它使用 Response.AppendToLog 作为其唯一的调试日志系统。我只在我的本地主机上调试它，所以日志文件位于我的硬盘驱动器的 %SystemDrive%\inetpub\logs\LogFiles 文件夹中。

我正在寻找一个类似尾巴的程序，可以实时显示这些调试消息。也许有可能根据过滤器为消息着色。

**更新：我已经开始使用**[配方 157035](http://code.activestate.com/recipes/157035/)中的信息在 python 中编写我自己的尾部程序。记录大约滞后一分钟。有什么改进的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-05T13:24:32.403

为什么要重新发明轮子？您可以使用[Snare for IIS](http://www.intersectalliance.com/projects/SnareIIS/index.html)（免费）将信息记录到[Kiwi 的 Syslog Daemon](http://www.kiwisyslog.com/kiwi-syslog-server-overview/)（非免费）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T18:54:18.023

我完成了。现在我要做的就是`Response.AppendToLog("#message");`将消息中的每个空格或奇怪的字符替换为下划线。太糟糕了，它落后了一分钟左右，但总比没有好。

```
import time, os, re

def tail_f(file):
    interval = 1.0

    while True:
        where = file.tell()
        line = file.readline()
        if not line:
            time.sleep(interval)
            file.seek(where)
        else:
            yield line

def run():
    #Set the filename and open the file
    filename = r"C:\inetpub\logs\LogFiles\W3SVC1\u_ex{0}.log".format(time.strftime("%y%m%d"))
    file = open(filename,'r')

    #Find the size of the file and move to the end
    st_results = os.stat(filename)
    st_size = st_results[6]
    file.seek(st_size)

    for line in tail_f(file):
        #ignore comments
        if line[0] != "#":
            line = line.strip()
            parts = line.split(" ")

            status = parts[10]
            if status == "304":
                continue

            when = parts[1]
            method = parts[3]
            path = parts[4]
            query = parts[5].split("|")[0].split("#")[0]

            if query == "-":
                query = ""
            elif query != "":
                query = "?"+query

            print when, method[0], status, path + query

            if status == "500":
                if parts[5].find("|") != -1:
                    errorparts = parts[5].replace("_", " ").split("|")[1:]
                    linenr = errorparts[0]
                    errornr = errorparts[1]
                    errormessage = errorparts[2]
                    print "Error {0} on line {1}\n{2}".format(errornr, linenr, errormessage)
            if parts[5].find("#") != -1:
                print "* "+("\n* ".join(parts[5].replace("_", " ").split("#")[1:]))

run() 
```

# c# - 清理不需要的代码 C#

> ID：614096
> 
> 赞同：6
> 
> 时间：2009-03-05T09:31:47.267
> 
> 标签：c#, visual-studio-macros

我用 Visual Studio 2005 获得了一个 C# 应用程序。代码有大约 300 KLOC，已被滥用超过 3 年。

当我浏览代码时，发现了很多未使用的函数/方法/属性。手动清理代码是不可能的（需要检查每个成员，如果发现没有引用将其删除。）

我希望通过 VS 宏自动化这个过程，它将遍历代码中的每个成员，如果它没有任何引用，它应该删除它，如果找到任何引用，检查它的调用成员的引用，如果调用成员没有任何引用都应该删除，依此类推。

我敢肯定有人会更早地破解它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-05T09:36:51.637

[Resharper](http://www.jetbrains.com/resharper/)有一个 Clean Code 功能，可以很好地指示哪些方法/类没有被使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-05T09:48:23.280

[您可以使用NDepend](http://www.ndepend.com/)使用 CQL查询您的代码库，以找出哪些方法和类没有被使用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-01T17:55:21.567

注意通过反射调用的代码。许多重构工具会将此代码标记为未被访问，而实际上它们是。

最安全的是在重构之前和之后运行你的单元测试（你已经做对了吗？），以确保一切仍然有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-13T18:23:25.790

第一次使用 re-sharper 正如其他人建议的那样。

Resharper 假设外部程序集在某处使用公共方法，即使它们不是，所以搜索并用“私有”替换“公共”并重新编译。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-01T17:58:08.130

我使用[宪兵](http://www.mono-project.com/Gendarme)（如 FxCop）来确定哪些代码没有被调用。AFAIK 它不能自动化，但至少你不需要逐行进行。

# project-management - 你如何衡量一个小、大、非常大的项目？

> ID：614100
> 
> 赞同：6
> 
> 时间：2009-03-05T09:32:59.387
> 
> 标签：project-management, project-planning

我目前正在阅读 Code Complete 以及其他几本编程书籍。项目的大小会影响您在规划、编码、自动化测试等方面需要注意的许多其他参数。我想知道 SO 上的人们通常在现实世界中使用什么来按正确的“权重”对项目进行分类班级”？

是代码行吗？外部接口数量？必要的文档页面？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-05T09:42:35.913

我会说这是所需的开发工作量。由六名开发人员组成的团队：

*   小型项目 - 长达 6 个月
*   大项目 - 6-18 个月
*   非常大的项目 - 18 个月以上

不过每个人都会有不同的看法。

**编辑**

我正在考虑对于一个开发人员“团队”来说，这些价值观将如何改变。我认为他们将遵循以下原则：

*   小项目 - 长达 1 个月
*   大项目 - 1-3 个月
*   非常大的项目 - 3 个月以上

这似乎表明，对于少数开发人员来说，项目规模的经验法则可能是：

*   小型项目 - 每个开发人员最多 1 个月
*   大型项目 - 每个开发人员 1-3 个月
*   非常大的项目 - 每个开发人员 3 个月以上

我怀疑这是否会超过 6 个左右的开发人员，尽管沟通渠道的数量开始拖累每个人的潜在开发时间。团队中的人员越多，每个开发人员每月完成的工作就越少。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-05T09:39:43.957

我会说**时间**和**人力**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-05T09:40:17.200

我通常会根据完成所需的时间来衡量项目的规模，但其他人可能会有所不同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-05T10:43:12.883

学习曲线——新开发人员在能够为代码做一些有用的事情之前熟悉代码所花费的时间。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-05T13:46:21.663

它可能是多种事物的组合：

*   est.function points - 代码大小
*   集成点 - 与外部系统
*   应用程序的复杂性（网络应用程序通常不如嵌入式系统复杂 - 将网站与火箭飞船的程序进行比较）
*   涉及的业务组 - 需要 20 个业务部门批准的小改动可能是一项艰巨的工作

以上将决定项目规模 - 人数决定时间表并增加复杂性

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-05T09:40:27.760

我不会开始知道如何估计项目预期的代码行数。文档......那是什么；）所以对我来说，这些都不是。

我可能会计算主要功能区域，并大致了解屏幕/页面的数量以及数据库表的数量。数据库复杂性可能是我认为很多项目的一个很好的指标。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-05T11:17:40.320

这是一种左派的想法，但是当我在做一个项目时，我认为它是

1）房子=小项目

2）超市=中型项目

3）机场=大项目

你周围的人都知道你和他们在做什么，以及你成功的机会，你在这三个中的哪一个。

# mobile - “短信推送”和“WAP推送”有什么区别？

> ID：614107
> 
> 赞同：14
> 
> 时间：2009-03-05T09:35:09.613
> 
> 标签：mobile, sms, mobile-website, wap

在谈到将消息推送到移动应用程序以触发 WAP 内容的下载时，似乎都使用了*WAP 推送*和*SMS 推送*这两个术语。

这些术语是指相同的机制还是具有不同的含义？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-05T10:08:02.233

SMS Push 是告诉终端发起会话的消息。出现这种情况是因为您不知道移动终端的 IP 地址，因此无法发起 IP 会话。多用于向最终接收者发送几行数据，起到发送信息或提醒事件的作用。

WAP Push 是一种 SMS，其标头中包含一个指向 WAP 地址的链接。接收到 WAP 推送后，兼容的手机会自动为用户提供访问其手机上的 WAP 内容的选项。WAP Push 将最终用户引导至存储内容的 WAP 地址，以供查看或下载到手机上。这个 wap 地址可以是一个页面或一个 WAP 站点。

用户可以通过使用开发人员定义的软键来“采取行动”，立即激活应用程序以完成特定任务，例如下载图片、进行购买或响应营销报价。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-03-05T10:03:51.230

SMS Push 使用 SMS 作为载体，WAP 使用通过 WAP 下载。

# c# - 将类作为新线程运行

> ID：614111
> 
> 赞同：4
> 
> 时间：2009-03-05T09:36:47.910
> 
> 标签：c#, vb.net, backgroundworker

我想在一个新线程中开始工作或使用后台工作人员来做这件事，但之前没有做过，并问你我应该怎么做。

我的程序有一个带有文件列表的datagridview，每行一个文件。我希望用户能够选择一行，然后按“开始下载”开始下载的后台作业。我想获取有关下载进度的事件。

我有一个类 clsDownload 可以处理所有事情并引发事件，但是如何实现后台工作？

我应该在类内部使用 System.ComponentModel.BackgroundWorker 还是创建一些处理此问题的包装器或使用其他一些线程的东西？

谢谢。

**编辑：**我不明白如何在后台实现我的下载，任何小例子都会很好。msdn 上的示例并没有让我走得太远。

我有一个具有 StartDownload 功能的下载类。我应该在课堂上还是在调用者中使用后台工作人员？“感觉很愚蠢”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T09:50:58.453

我你只做下载，不需要其他异步处理，你可以使用[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)类的异步方法。虽然由于您已经拥有自己的课程，但这可能不是您的解决方案。

否则，您可以[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)按照您提到的那样使用。MSDN 页面有一个示例如何执行此操作。

**编辑：**短篇小说是：

*   您`BackgroundWorker`从调用者创建；
*   当你想开始后台工作时，你调用`BackgroundWorker.RunWorkerAsync`;
*   在`DoWork`事件处理程序中，您执行后台工作，在您的情况下，您开始下载类；
*   当你在做后台工作时，你必须每隔一段时间检查一次`CancelationPending`；
*   当您想报告一些进度时，您需要以百分比计算并调用`ReportProgress`.

如果您需要真正定制的东西，您可以随时创建自己的[`Thread`](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx).

我个人会坚持`BackgroundWorker`。它为工作的各个阶段提供了一组很好的通知。如果您使用`Thread`，则必须自己实现这些。

我还会确保代码不会创建太多实例。您想限制并发下载的数量并将超过该数量的任何内容排队。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-05T09:55:42.950

`BackgroundWorker`如果您需要在 UI 上向用户提供反馈，我强烈建议您。和事件在 UI 线程上运行`ProgressChanged`，`RunWorkerCompleted`因此无需进行编组，这会使您的代码更加复杂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-05T17:43:09.410

我创建了几个包含 BackgroundWorker 的不同类。我通常做的是在表单上有一个 BackgroundWorker 组件，该组件将在执行作业时打开，然后我将该实例传递给我的作业类的构造函数。

以下是您的工作类别可能的样子：

```
Private m_bwMain As BackgroundWorker

Public Sub New(ByVal bwMain As BackgroundWorker)
    m_bwMain = bwMain

    'additional setup code here
End Sub 
```

要开始工作，您可以在开始下载按钮的 Click 事件处理程序中执行以下操作：

```
lblStatus.Text = "Initializing ..."
bgwMain.RunWorkerAsync(someFileName) 
```

我将我的作业类声明为当前表单的私有成员，然后在 BackgroundWorker.DoWork 事件中实例化它。从那里您可以调用您的方法来下载文件：

```
Private Sub bgwMain_DoWork(ByVal sender As Object, ByVal e As System.ComponentModel.DoWorkEventArgs) Handles bgwMain.DoWork
    m_oJobEngine = New JobEngine(CType(sender, BackgroundWorker))
    m_oJobEngine.DownloadFile(CStr(e.Argument))
End Sub 
```

要向用户报告进度，您可以在主窗体中处理类引发的事件。您只需要确保作业类对象声明具有 WithEvents 关键字。从这些处理程序中，您可以调用 BackgroundWorker 的 ReportProgress 方法。在 ReportProgress 中，您可以对 UI 进行任何更改以指示进度。这是一个例子：

```
Private Sub m_oJobEngine.DownloadProgress(ByVal bgw as Backgroundworker, ByVal bytesTransferred as Long) Handles m_oJobEngine.DownloadProgress
    bgw.ReportProgress(0, bytesTransferred)
End Sub
Private Sub bgwMain_ProgressChanged(ByVal sender As Object, ByVal e As System.ComponentModel.ProgressChangedEventArgs) Handles bgwMain.ProgressChanged
    lblStatus.Text = CLng(e.UserState).ToString & " bytes transferred."
End Sub 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-05T09:50:08.500

backgroundworker 看起来应该可以工作... MSDN 上有一个示例。

[http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

或者您可以执行以下操作：

```
WaitCallBack workCallBack= new WaitCallBack(DownloadMethod);
if(!ThreadPool.QueueUserWorkItem(workCallBack, "ThreadPooled")
{
   // Unable to Pool
}

// Work has been added to pool and will execute when possible 
```

取决于线程需要哪些参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-05T17:52:11.680

使用 clsDownload 的类（可能是您的 Form 类）应该使用 BackgroundWorker 来运行下载方法。

# vb.net - 从 VB.Net 将 Unicode 文本保存到 MS Access

> ID：614124
> 
> 赞同：0
> 
> 时间：2009-03-05T09:40:50.270
> 
> 标签：vb.net, ms-access, unicode

嘿，我正在 VB.NET 上制作一个项目，其中我的文本框的 FONT 属性设置为“TERAFONT-VARUN, 12pt”，这是用于古吉拉特语的。
现在我想将文本框的数据保存到我的 MS ACCESS 数据库中。

我还想为其他目的检索该数据。

你能告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-05T09:59:27.607

.Net 使用 Unicode，您应该能够安全地将 Unicode 字符串保存到 Access 中而不会出现问题。
请注意，您使用的字体在这里并不重要，它只对向用户*显示*Unicode 很重要。它与数据库无关。

要将数据从 .Net 保存到 Access，您可以查看以下资源：

*   [如何通过 ASP.net 网站将新条目插入 Access db 表？](https://stackoverflow.com/questions/575821/how-do-you-insert-new-entries-into-an-access-db-table-through-an-asp-net-website)

*   CodeProject[上ADO.NET的一些基础类介绍。](http://www.codeproject.com/KB/aspnet/adodotnet.aspx)

这应该让您开始使用 .Net 程序中的 Access 数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-28T05:46:59.167

请注意，插入或从数据库插入的 unicode 文本既不是格式化 unicode 的问题。需要注意的问题是，在插入时，unicode 可能包含编码值 (")，它仅在该点间接终止字符串。而字符串的其余部分被视为代码，这被程序认为是堆栈溢出运行。

# javascript - 为什么 array.push 有时比 array[n] = value 快？

> ID：614126
> 
> 赞同：76
> 
> 时间：2009-03-05T09:41:59.020
> 
> 标签：javascript, arrays, performance, firefox, browser

作为测试一些代码的附带结果，我编写了一个小函数来比较使用该`array.push(value)`方法与直接寻址的速度`array[n] = value`。令我惊讶的是，推送方法通常会更快，尤其是在 Firefox 中，有时在 Chrome 中。只是出于好奇：有人对此有解释吗？[您可以在此页面](http://www.nicon.nl/testhtml/elwrap_.html)找到测试（单击“数组方法比较”）

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2009-03-05T10:28:39.640

各种因素都会起作用，大多数 JS 实现都使用平面数组，如果以后有必要，它会转换为稀疏存储。

基本上，变得稀疏的决定是基于正在设置的元素以及为了保持平坦而浪费了多少空间的启发式方法。

在您的情况下，您首先设置最后一个元素，这意味着 JS 引擎将看到一个需要长度`n`但只有一个元素的数组。如果`n`足够大，这将立即使数组成为稀疏数组——在大多数引擎中，这意味着所有后续插入都将采用慢速稀疏数组的情况。

您应该添加一个额外的测试，在其中将数组从索引 0 填充到索引 n-1 - 它应该快得多。

为了回应@Christoph 并出于拖延的愿望，这里描述了数组是如何（通常）在 JS 中实现的——具体情况因 JS 引擎而异，但一般原则是相同的。

所有 JS `Object`（不是字符串、数字、true、false`undefined`或`null`）都从基础对象类型继承——具体实现各不相同，可能是 C++ 继承，也可能是在 C 中手动继承（以任何一种方式进行都有好处) -- 基本 Object 类型定义了默认的属性访问方法，例如。

```
interface Object {
    put(propertyName, value)
    get(propertyName)
private:
    map properties; // a map (tree, hash table, whatever) from propertyName to value
} 
```

这个 Object 类型处理所有的标准属性访问逻辑、原型链等。那么 Array 实现就变成了

```
interface Array : Object {
    override put(propertyName, value)
    override get(propertyName)
private:
    map sparseStorage; // a map between integer indices and values
    value[] flatStorage; // basically a native array of values with a 1:1
                         // correspondance between JS index and storage index
    value length; // The `length` of the js array
} 
```

现在，当您在 JS 中创建一个数组时，引擎会创建类似于上述数据结构的东西。当您将对象插入 Array 实例时，Array 的 put 方法会检查属性名称是否为介于 0 和 2^32 之间的整数（或可以转换为整数，例如“121”、“2341”等） -1（或者可能是 2^31-1，我完全忘记了）。如果不是，则将 put 方法转发到基本 Object 实现，并完成标准的 [[Put]] 逻辑。否则将值放入 Array 自己的存储中，如果数据足够紧凑，则引擎将使用平面数组存储，在这种情况下插入（和检索）只是标准的数组索引操作，否则引擎将转换数组稀疏存储，并 put/get 使用映射从 propertyName 到 value 位置。

老实说，我不确定在转换发生后是否有任何 JS 引擎当前从稀疏存储转换为平面存储。

Anyhoo，这是对所发生的事情的一个相当高级的概述，并省略了一些更令人讨厌的细节，但这是一般的实现模式。附加存储的细节，以及 put/get 的调度方式因引擎而异——但这是我能真正描述设计/实现的最清楚的内容。

一个小的补充点，虽然 ES 规范将其`propertyName`称为字符串，但 JS 引擎也倾向于专注于整数查找，因此`someObject[someInteger]`如果您正在查看具有整数属性的对象，则不会将整数转换为字符串，例如。数组、字符串和 DOM 类型（`NodeList`s 等）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2010-03-02T19:35:39.190

这些是我通过**你的测试得到的结果**

在 Safari 上：

*   Array.push(n) 1,000,000 个值：0.124 秒
*   Array[n .. 0] = 值（降序）1,000,000 个值：3.697 秒
*   Array[0 .. n] = 值（升序）1,000,000 个值：0.073 秒

在火狐上：

*   Array.push(n) 1,000,000 个值：0.075 秒
*   Array[n .. 0] = 值（降序）1,000,000 个值：1.193 秒
*   Array[0 .. n] = 值（升序）1,000,000 个值：0.055 秒

在 IE7 上：

*   Array.push(n) 1,000,000 个值：2.828 秒
*   Array[n .. 0] = 值（降序）1,000,000 个值：1.141 秒
*   Array[0 .. n] = 值（升序）1,000,000 个值：7.984 秒

根据**您的测试**，*push*方法在 IE7 上似乎更好（巨大差异），并且由于在其他浏览器上差异很小，因此*push*方法似乎是向数组添加元素的最佳方法。

但是我创建了另一个[简单的测试脚本](http://vanylla.it/test-array-push-vs-length.html)来检查什么方法可以快速将值附加到数组，结果真的让我感到惊讶，**使用 Array.length 似乎比使用 Array.push 快得多**，所以我真的不知道是什么说或想了，我一无所知。

*顺便说一句：在我的 IE7 上，您的脚本停止并且浏览器询问我是否要让它继续运行（您知道典型的 IE 消息说：“停止运行此脚本？...”）我会建议减少一点循环.*

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-03-05T10:28:32.247

`push()`是更一般的 [[Put]] 的特例，因此可以进一步优化：

在数组对象上调用 [[Put]] 时，必须首先将参数转换为无符号整数，因为所有属性名称（包括数组索引）都是字符串。然后必须将其与数组的长度属性进行比较，以确定是否必须增加长度。推送时，不必进行此类转换或比较：只需使用当前长度作为数组索引并增加它。

当然还有其他会影响运行时的事情，例如调用`push()`应该比调用 [[Put]] via 慢，`[]`因为必须检查原型链是否存在前者。

* * *

正如 olliej 指出的那样：实际的 ECMAScript 实现将优化转换，即对于数字属性名称，不进行从字符串到 uint 的转换，而只是进行简单的类型检查。基本假设应该仍然成立，尽管它的影响会比我最初假设的要小。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-21T08:37:38.033

这是一个很好的测试平台，它确认直接分配比推送快得多：http: [//jsperf.com/array-direct-assignment-vs-push](http://jsperf.com/array-direct-assignment-vs-push)。

编辑：显示累积结果数据似乎存在一些问题，但希望它很快得到修复。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-24T14:50:57.257

**`array[n] = value`（升序时）总是比`array.push`前一种情况下的数组先用长度初始化时快。**

[通过检查页面](http://www.nicon.nl/testhtml/elwrap_.html)的 javascript 源代码，您的`Array[0 .. n] = value (ascending)`测试不会提前使用长度初始化数组。

所以`Array.push(n)`有时会在第一次运行时领先，但在随后的测试运行中，`Array[0 .. n] = value (ascending)`实际上始终表现最好（在 Safari 和 Chrome 中）。

如果修改了代码，那么它会提前初始化一个长度为`var array = new Array(n)`then的数组，`Array[0 .. n] = value (ascending)`它的**`array[n] = value`执行速度比`Array.push(n)`**我初步运行这个特定测试代码时快 4.5 到 9 倍。

这与@Timo Kähkönen 报道的其他测试一致。具体参见他提到的测试的这个版本：[https ://jsperf.com/push-method-vs-setting-via-key/10](https://jsperf.com/push-method-vs-setting-via-key/10)

修改后的代码，因此您可能会看到我如何编辑它并以公平的方式初始化数组（而不是不必要地用 array.push 测试用例的长度初始化它）：

```
function testArr(n, doPush){

  var now = new Date().getTime(),
                  duration,
                  report =  ['<b>.push(n)</b>',
                             '<b>.splice(0,0,n)</b>',
                             '<b>.splice(n-1,0,n)</b>',
                             '<b>[0 .. n] = value</b> (ascending)',
                             '<b>[n .. 0] = value</b> (descending)'];
  doPush = doPush || 5;

  if (doPush === 1) {
   var arr = [];
   while (--n) {
     arr.push(n);
   }
  } else if (doPush === 2) {
   var arr = [];
   while (--n) {
    arr.splice(0,0,n);
   }
  } else if (doPush === 3) {
   var arr = [];
   while (--n) {
    arr.splice(n-1,0,n);
   }
  } else if (doPush === 4) {
   var arr = new Array(n);
   for (var i = 0;i<n;i++) {
    arr[i] = i;
   }
  } else {
    while (--n) {
    var arr = [];
      arr[n] = n;
    }
  }
  /*console.log(report[doPush-1] + '...'+ arr.length || 'nopes');*/
  duration = ((new Date().getTime() - now)/1000);
  $('zebradinges').innerHTML +=  '<br>Array'+report[doPush-1]+' 1.000.000 values: '+duration+' sec' ;
  arr = null;
} 
```

* * *

## 回答 #6

> 赞同：-6
> 
> 时间：2009-03-05T09:47:51.987

Push 将其添加到末尾，而 array[n] 必须遍历数组才能找到正确的位置。可能取决于浏览器及其处理数组的方式。

# database - 适合匹配字符串到正则表达式模式的数据库或结构

> ID：614132
> 
> 赞同：6
> 
> 时间：2009-03-05T09:43:21.560
> 
> 标签：database, regex, search, data-structures

我有许多正则表达式模式。输入字符串时，我必须找到与该字符串匹配的所有模式。这通常是一个**O(n)**操作：

```
SELECT regex FROM regexes WHERE 'string' RLIKE regex 
```

最快的方法是什么？是否有针对执行此类操作进行优化的数据库结构或存储系统？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-05T09:56:56.613

最简洁的答案是不。' 目前在任何 DBMS 平台上都没有可用的索引结构来索引像这样的正则表达式的部分匹配。

长答案是通配符匹配（例如`'foo_'`）上的前导常量可以用作索引匹配的前缀。许多 DBMS 平台会对此进行优化并使用索引（如果可用）来解析前缀。然而，这并不像一个完整的正则表达式那么聪明，而且只有在你有一个常量前缀的情况下才能使用索引。

更长的答案是，有诸如[RETE](http://en.wikipedia.org/wiki/Rete_algorithm)之类的算法可以优化这样的部分匹配。如果您可以将匹配项表示为前向链接生产规则而不是正则表达式，这可能适用。

Rete 的工作原理是计算部分匹配并仅显示可以从该部分匹配中达到的规则，因此它比 O(n) 更有效（更像 O(log n) 但我不确定确切的时间复杂度）根据事实匹配 n 条规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T10:10:24.333

如果适用于您的情况，您可以实施的一种优化是对您的正则表达式进行分类并将它们组织在层次结构中，以便：

*   你只需要测试少数最通用的正则表达式。

*   对于任何匹配的常规正则表达式，然后继续针对同一类别的所有正则表达式测试字符串。

例如，如果您的输入字符串可以任意复杂，并且您有数千个正则表达式，您可以将它们组织成如下类别：

*   类别，`\d+`它将测试号码模式（SSN、电话号码等）

*   `<.*?>`类别，它将测试 HTML 标记的存在

*   `\w+@\w+`类别，可以测试电子邮件地址的存在

等等

如果任何根模式不匹配，那么您就不必测试无论如何都会失败的整个模式范围。

不知道这是否与您的确切域匹配，但这是一种可能的优化。

# code-metrics - 您如何定义“不需要的代码”？

> ID：614145
> 
> 赞同：2
> 
> 时间：2009-03-05T09:48:44.260
> 
> 标签：code-metrics, dead-code

您如何定义“不需要的代码”？

* * *

### 编辑：

恕我直言，任何具有 0 个活动调用成员（递归检查）的代码成员都是不需要的代码。（函数、方法、属性、变量都是成员）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-05T10:00:54.840

这是我对**不需要的代码**的定义：

*   不执行的代码是自重。（除非它是您实际代码的 [恶意] 有效负载，但那是另一回事 :-)）
*   重复多次的代码会增加产品的成本。
*   无法进行回归测试的代码也会增加产品的成本。

您可以删除此类代码或重构它，但您不想保留它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-05T09:53:02.193

就像您在另一个线程中所说的那样，根本不需要在任何地方使用的代码。至于如何找到它，例如，如果您使用的是 Java，我建议使用 FindBugs 或 CheckStyle，因为这些工具会检查函数是否在任何地方使用，如果没有，则将其标记为未使用。非常适合摆脱不必要的重量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-05T09:54:02.033

好吧，经过短暂的思考，我想出了这三点：

*   它可以是应该重构的代码
*   它可以是不再调用的代码（早期版本的剩余部分）
*   它可能是不适用于您的样式指南和编码方式的代码

我敢打赌还有很多，但这就是我定义不需要的代码的方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-05T09:54:16.447

在java中，我会用@Deprecated标记方法或类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-05T09:59:01.773

任何没有活动调用成员的**PRIVATE**代码成员（递归检查）。否则你不知道你的代码是否没有在你的范围分析之外使用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-05T10:49:50.213

0 次通话，在不久的将来不可能使用。由于我使用 SVN（源代码控制），因此我更喜欢从不注释任何内容，以防以后需要。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-05T09:59:57.557

通常我会告诉我的编译器尽可能地嘈杂，这会挑选出我需要检查的 60% 的东西。几个月前未使用的函数（在与 VCS 核对后）通常会被淘汰，除非它们的作者告诉我它们何时会真正被使用。缺少原型的东西也立即被怀疑。

我认为尝试实施自动房屋清洁就像尝试制作一个 USB 设备，以保证您“安全”玩[俄罗斯轮盘赌](http://en.wikipedia.org/wiki/Russian_roulette)。

最难检查的部分是添加到构建系统中的组件，很少有人注意到这些组件和未使用的组件会留下来收集苔藓。

除此之外，我通常想要代码，我只是希望它的作者对其进行一些重构并使其风格与项目的其余部分相同。

另一个有用的工具是[doxygen](http://www.doxygen.nl/)，它确实可以帮助您（直观地）查看源代码树中的关系。但是，如果它设置为不提取静态符号/对象，则它不会非常彻底。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-05T10:58:33.690

有些东西已经发布了，但这里有另一个：几乎做同样事情的函数。（只有很小的变量更改，因此整个函数被复制粘贴并且该变量被更改）

# linux - 将长输入拆分为多个文本文件

> ID：614154
> 
> 赞同：0
> 
> 时间：2009-03-05T09:53:15.950
> 
> 标签：linux

我有一些代码会在输出中生成无数行。因此，我无法将这些值存储在单个输出文件中。

相反，我将输出文件拆分为更多文件。我正在根据索引号拆分文件。现在我的疑问是我不知道我的文件会有多少个数字。那么是否可以在不给出索引的情况下将文件拆分为不同的输出？例如：

*   m.txt 中的前 100,000 行
*   n.txt 中从 100,001 到下一个 200,000

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-05T10:06:44.017

如果您不需要能够根据文件名找到特定行，则可以根据文件大小拆分输出。将行写入 m1.txt 直到下一行将使其 >1MB；然后移动到下一个文件 - m2.txt。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-05T10:34:13.683

**split(1)**似乎正是您工作的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T10:09:31.513

生成具有运行索引的文件。从打开例如 m_000001.txt 开始。将固定的行数写入该文件。关闭文件。打开下一个文件，例如 m_000002.txt，然后继续。

确保您不会溢出磁盘是一项需要单独完成的内务管理任务。这里可以想到备份、压缩、文件轮换等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-05T10:11:16.780

为此，您可能需要使用[logrotate 。](http://linuxcommand.org/man_pages/logrotate8.html)它有很多选择：查看手册页。

以下是手册页的介绍：

```
"logrotate  is  designed to ease administration of systems that generate
large numbers of log files.  It allows automatic rotation, compression,
removal, and mailing of log files.  Each log file may be handled daily,
weekly, monthly, or when it grows too large." 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-05T10:46:58.740

写作时拆分的4种方法：

A) 固定字符数（大小）

B) 固定线数

C) 写入前的固定时间间隔

D）在调用写入之前固定函数的计数器

根据这些拆分，您可以命名输出文件。

# git - 使用分布式版本控制系统，你最酷/最不寻常的 hack 是什么？

> ID：614155
> 
> 赞同：7
> 
> 时间：2009-03-05T09:53:21.177
> 
> 标签：git, mercurial, dvcs, bazaar

我已经使用 git 工作了几个月，我发现大多数让我的日常工作变得更好的事情可以归因于分布式 VCS 中的灵活性和缺乏强制执行的默认策略。

不少人似乎也有同样的感受，并建立在这种灵活性的基础上

*   我已经阅读了很多用户在不同机器上同步他们的主目录的报告。
*   [IkiWiki](http://ikiwiki.info/)建立在源代码控制之上，它可以用作分布式 wiki。
*   存在一些基于 git 的分布式错误/问题跟踪系统（不确定其他 DVCS）。

**您**使用自己喜欢的 DVCS 实现了哪些很酷的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-27T08:26:50.343

我使用 mercurial 对非 Mercurial 感知的在线文件存储进行增量备份。只需拥有一个包含已备份内容的存储库，并对其进行 hg 捆绑即可。然后推。将捆绑包复制到实时网格同步文件夹，然后自动备份和分发到我的所有机器。（注意：首先加密捆绑包 - 我相信没有人会尊重我的隐私）。当然，完全备份与`hg bundle -all`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-14T20:35:21.697

我在 mercurial 之上实现了一个简单的 wiki

我对任何 dvcs 上的 wiki 的主要抱怨正在合并，
因为在编辑 wiki 时根据页面工作确实很有意义，
但是所有 dvcs 都是基于文件树的

顺便说一句，bzr 的基于暴露目录的樱桃采摘并不正确
（它主要构成了以后合并冲突的基础）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-16T02:23:47.387

不是我自己的项目，只是遇到了几个使用 git 的分布式问题跟踪系统：

[git 问题](http://github.com/jwiegley/git-issues/tree/master)
[ticgit](http://wiki.github.com/schacon/ticgit)

而且总是有[化石](http://www.fossil-scm.org/)，它是一个内置错误跟踪和 wiki 的 DVCS。由 sqlite 的创建者制作，并使用 sqlite 数据库作为其存储库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-16T10:53:00.283

虽然我更喜欢 Mercurial 而不是 git，但我更喜欢github.com 的[Gist](http://gist.github.com)片段服务。这是一个使用类固醇的粘贴站点 - 允许版本片段、通过 SSL 访问私有片段等等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T04:24:01.900

DVCS 是分布式文件系统的基础。

# c# - c# 和日期文化问题

> ID：614164
> 
> 赞同：4
> 
> 时间：2009-03-05T09:56:34.990
> 
> 标签：c#, .net, asp.net, datetime, cultureinfo

我编写了一个 asp.net 应用程序，我的一个回发例程只是将用户提交的表单数据保存到 sql 2005 db。在我的开发机器上运行良好，但是当我部署到实时站点时，我的解析日期检查器中的日期无效。

基本上它期望在现场机器上使用美国日期格式，但这不是我想要的。用户需要能够以 dd/MM/yyyy 格式输入。因此，像 21/10/2009 这样的有效日期会在实时服务器上返回错误，但不会在我的开发机器上返回错误。下面是引发异常的代码。

```
DateTime dt;
dt = DateTime.Parse(sdate);  
//sdate in GB dd/MM/yyyy format 
```

是否可以强制解析例程期望日期为 dd/MM/yyyy 格式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-05T10:23:29.687

这样做：

```
 System.Globalization.CultureInfo cultureinfo = 
        new System.Globalization.CultureInfo("en-gb");
    DateTime dt = DateTime.Parse("13/12/2009", cultureinfo); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-05T09:59:22.643

您可以使用[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/system.datetime.parseexact.aspx)来指定预期的格式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-05T10:16:52.807

另一种选择是在 web.config 文件中指定您希望使用的文化：

```
<system.web>
    ...
    <globalization 
        culture="da-DK" 
        uiCulture="da-DK" requestEncoding="utf-8" responseEncoding="utf-8"
    />
</system.web> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-05T15:29:15.050

是的，ParseExact 会按照 Matt 所说的那样做。

代码将类似于：

```
dt  = DateTime.ParseExact(sdate, "dd/MM/yyyy", CultureInfo.InvariantCulture); 
```

# xslt - 使用 xslt 打印页面

> ID：614166
> 
> 赞同：0
> 
> 时间：2009-03-05T09:57:32.087
> 
> 标签：xslt

如何使用 xslt 打印页面。我需要一个链接或一个按钮，单击该按钮会调用打印页打印机对话框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-05T10:14:42.653

我怀疑您需要详细说明您要做什么。

XSLT 只是一种将一个文本块转换为另一个文本块的方法。输入通常是一个 xml 缓冲区，输出是该缓冲区的一些文本呈现。

您可能正在尝试使用 XSLT 生成脚本，并且您希望该脚本能够在由某些东西运行时打开打印对话框，例如您生成 javascript，然后在浏览器上运行。

你能更详细地描述你想要实现的目标吗？

html 页面中的以下内容为您提供了打印链接：

```
<a href="javascript:window.print();">Print</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-05T10:15:45.803

XSLT 是一种用于转换 XML 文档的语言。这意味着您可以添加/修改内容。假设您的输出是 HTML，您可以这样做：

```
<xsl:template match="top">
  <html>
     <head>
     </head>
     <body>
          <input name="print" type="button" value="Print" 
                 onclick="javascript:window.print()">
          <xsl:apply-templates />
     </body>
  </html>
</xsl:template> 
```

但是，当然，按钮的确切位置取决于您的需求。我还想在顶部添加一个 media=print 特定的 CSS，以便文档整洁！

# .net - ASMX Web 服务问题

> ID：614176
> 
> 赞同：0
> 
> 时间：2009-03-05T10:01:23.980
> 
> 标签：.net, web-services, soap

我们正在向 .Net 3.5 ASMX Web 服务发送以下请求。

```
<SOAP-ENV:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:xsd="http://www.w3.org/2001/XMLSchema"
xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/"
xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
    <SOAP-ENV:Body SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
        <Login xmlns="http://tempuri.org/" id="o0" SOAP-ENC:root="1">
          <password xsi:type="xsd:string">1234</password> 
          <userName xsi:type="xsd:string">Developer</userName> 
        </Login>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

在调试 web 服务时，我们发现 web 方法（登录和方法）可用的参数值为空。但是，如果我们从密码和用户名中删除 xsi:type="xsd:string" 属性，一切正常。
命名空间 xsd 指向[http://www.w3.org/2001/XMLSchema](http://www.w3.org/2001/XMLSchema)，这是有效的。
为什么.Net 不能反序列化响应？为什么它不抛出异常？顺便说一句：我们的服务定义将[http://www.w3.org/2001/XMLSchema](http://www.w3.org/2001/XMLSchema)别名为“s”。这可能是个问题吗？

亲切的问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-05T11:17:44.063

.NET 序列化程序依赖底层架构来反序列化内容。当您指定 xsi:type 属性时，您基本上会破坏模式协定。

顺便提一句。不要使用[http://tempuri.org/](http://tempuri.org/)，组成你自己的 URI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-16T21:05:57.437

您的 ASMX 服务是否使用 [SoapRpcService] 属性装饰？如果不是，那么它是一个文档/文字服务，并且不想要那种格式的 XML。

这个 XML 是如何发送的？是手工建造的吗？它是由基于“service.asmx?WSDL”派生的 WSDL 创建的 Java 客户端发送的吗？

# asp.net-mvc - ASP.Net MVC ActionLink 是如何工作的？

> ID：614177
> 
> 赞同：3
> 
> 时间：2009-03-05T10:02:00.407
> 
> 标签：asp.net-mvc

我正在尝试使用*NHaml*作为视图引擎为 .Net 2.0 编写我自己的 LightWeight MVC。

在 ASP.Net 3.5 MVC 中我们用来通过代码片段指定链接的 View 文件。

```
Html.ActionLink("Add Product","Add"); 
```

在 MVC 二进制文件中，没有与此调用匹配的函数。

**我只发现：**

*（在 System.Web.Mvc.Html.LinkExtensions 类中）*

```
public static string ActionLink(this System.Web.Mvc.HtmlHelper htmlHelper, 
   string linkText, string actionName) 
```

还有更多类似的静态类`FormExtensions`，例如`InputExtensions`等。

ASP.Net MVC 如何处理它？它会为 Html.ActionLink 生成动态代码吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-05T10:15:17.833

该`ActionLink`方法是扩展方法（因此在`this`第一个参数的类型之前）。这意味着您可以将此方法用作所有`HtmlHelper`实例的实例方法，即使它未定义在`HtmlHelper`.

`Html`是类型视图上的一个属性`HtmlHelper`。这意味着您可以`ActionLink`在其上使用扩展方法。

该`ActionLink`方法本身只是生成一个链接字符串（关于它的参数）并返回该字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T10:14:17.600

你检查过 Codeplex 上的[代码吗？](http://aspnet.codeplex.com/Wiki/View.aspx?title=MVC&referringTitle=Home)MVC 框架是开源的，因此您可以根据需要进行挖掘。

# sql - SQL Server：速成版中的同义词快照事务问题

> ID：614178
> 
> 赞同：3
> 
> 时间：2009-03-05T10:02:10.703
> 
> 标签：sql, sql-server-2005, transactions, exec, snapshot

我们有 2 个数据库，比如 DB1 和 DB2。
DB1 包含访问 DB2 中数据的所有存储过程。
DB1 使用同义词来访问 DB2 中的表。
（在我们的情况下，使用同义词是一项要求）

这在使用 SQL Server 2005 Developer Edition 的所有情况下都可以正常工作。

但是在 Express Edition 中，当我们执行以下操作时会出现异常：
1 重新启动 SQL Server
2 在 DB1 中执行以下代码：

> 设置事务隔离级别快照
> 开始事务
> 声明@sQuery varchar(max)
> 设置@sQuery = 'Select * from synToSomeTableInDB2'
> exec (@sQuery)
> 提交事务

这将导致以下错误：

> 数据库“...”中的快照隔离事务失败，因为在启动当前事务时未恢复数据库。数据库恢复后重试事务。

在不使用 EXEC 或在 Developer Edition 上运行时，相同的选择查询可以正常通过。
在步骤 1 中重新启动服务器很重要，因为一旦连接到 DB2，代码在 SQL Server Express Edition 上也可以正常运行。

有谁知道这是什么？我们需要能够使用 EXEC 进行一些动态查询。我们已经检查了 MSDN，搜索了 Google，......任何帮助都非常感谢。

--- 编辑：2009 年 3 月 10 日
正如下面 Ed Harper 所讨论的，我已经为此提交了一份错误报告。
请参阅[https://connect.microsoft.com/SQLServer/feedback/ViewFeedback.aspx?FeedbackID=422150](https://connect.microsoft.com/SQLServer/feedback/ViewFeedback.aspx?FeedbackID=422150)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-30T08:18:48.027

As found out via [Microsoft Connect](https://connect.microsoft.com/SQLServer/feedback/ViewFeedback.aspx?FeedbackID=422150), the problem is that by default on SQL Server Express Edition the **AUTO_CLOSE** option is set on **true**.
Changing this option to **false** fixes the problem.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-05T11:07:58.657

错误消息表明查询失败，因为当您执行查询时，服务重新启动后 SQL 服务器仍在恢复数据库。

错误是否总是在第一次尝试运行此代码时发生，而不管服务重新启动后经过的时间？

您能否从 SQL Server 日志中确认数据库在重新启动后正在正确恢复？

# php - PHP：将对象存储在 Symfony 插件模块的 lib/ 目录中

> ID：614179
> 
> 赞同：1
> 
> 时间：2009-03-05T10:02:17.053
> 
> 标签：php, plugins, symfony1

我正在构建一个 Symfony 项目，并创建了一个名为*sfUtilsPlugin*的新插件。我目前的目录结构如下所示：

```
sfUtils插件/
    模块/
        sfSearchLucene/
            行动/
            配置/
            库/
            模板/

```

现在，在 sfUtilsPlugin/modules/sfSearchLucene/lib 目录中，我有一个名为*sfLucene*的对象。这个想法是这个对象可以从 Symfony 的自动加载机制中访问，所以它可以在应用程序的任何地方被实例化。

但是，简单地将 sfLucene.class.php 文件添加到 sfUtilsPlugin/modules/sfSearchLucene/lib 目录似乎**不会**将其添加到自动加载器。

有谁知道为什么会发生这种情况？也许在 Symfony 中自动使用存储在这个位置的对象是不可能的。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T13:36:21.990

因为您是在模块的子目录中添加这个类**，**`lib`所以只有**当前模块**是时才会自动加载。 **`sfLucene`**`sfLucene`****

 ****你有两个选择：

1.  把这个类放到`sfUtilsPlugin/lib`目录的某个地方；
2.  `require`每次您需要它们时

# cmd - 如何在服务器上运行批处理文件并将结果返回给客户端？

> ID：614180
> 
> 赞同：0
> 
> 时间：2009-03-05T10:02:32.247
> 
> 标签：cmd

我在服务器上有一个返回结果的 bat 文件，那么我想知道我可以从我的客户端运行这个 bat 文件并将结果返回给我的客户端吗？

例如，Bat 文件返回字符串值“Hello”，我想从我的 PC 上运行这个 bat 文件并在我的显示器上显示字符串“Hello”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-05T10:12:23.080

你没有提到你是否想从代码中做到这一点？听起来 PSExec 可能会满足您的要求。

这是它的作用的简短描述：

> PsExec 最强大的用途包括在远程系统上启动交互式命令提示，以及 IpConfig 等远程启用工具，否则它们无法显示有关远程系统的信息。

它是免费的，可以在这里找到： [PsExec v1.94](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)

希望能帮助到你。

# java - 使用 pop3 在 Java 中获取草稿和发送的项目

> ID：614182
> 
> 赞同：1
> 
> 时间：2009-03-05T10:02:59.657
> 
> 标签：java, email, pop3

我遇到了一个关于在 Java 中以编程方式获取草稿和发送邮件文件夹的问题。虽然我能够使用 pop3 获取收件箱并能够通过 smtp 发送邮件，但我无法通过 pop3 完成它。提前感谢您的回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-05T10:25:41.740

POP3 协议根本不支持文件夹，所以你唯一能得到的就是收件箱。

所有其他文件夹都本地存储在每个 POP3 客户端中，因此如果您正在编写一个，您可以随意以任何您喜欢的方式进行操作。

可能有 POP3 服务器允许通过扩展使用文件夹，但在这种情况下，它们不遵循标准协议，您很可能会实现自己的东西或尝试找到特定于该邮件服务器的某些包。

如果您想以标准化方式使用服务器端文件夹，我建议您查看 IMAP。大多数邮件提供商都支持 POP3 和 IMAP，并且它支持在服务器上存储文件夹（包括草稿、已发送邮件和其他自定义文件夹）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T10:10:53.833

当我看到[这个](http://java.sun.com/products/javamail/javadocs/com/sun/mail/pop3/POP3Folder.html)时，我会说 JavaMail 提供的标准 POP3 协议实现不支持这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-06T12:32:54.593

POP3 不支持不同文件夹的概念。如果邮件服务器支持 IMAP，那么您就可以访问所有文件夹。JavaMail 中的 IMAP 支持不错且易于使用。

# windows - OS X 中的窗口移动和调整 API

> ID：614185
> 
> 赞同：28
> 
> 时间：2009-03-05T10:06:06.310
> 
> 标签：windows, macos, layout

我试图在 OS X 上找到记录（或未记录，如果这是我唯一的选择）的 API，以从窗口服务器查询窗口列表，然后使窗口移动和调整大小。谁能指出我正确的方向？我想我会从 Win32 下的 FindWindowEx 和 MoveWindow 之类的东西开始。

请注意，我想从外部进程执行此操作 - 我不是在问如何仅控制我自己的应用程序的窗口大小和位置。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2009-03-05T11:42:21.150

使用辅助功能 API。使用此 API，您可以连接到进程，获取窗口列表（实际上是一个数组），获取每个窗口的位置和大小，还可以根据需要更改窗口属性。

但是，如果用户在其首选项（系统偏好设置 -> 通用访问）中启用了对辅助设备的访问权限，则应用程序只能使用此 API，在这种情况下，所有应用程序都可以使用此 API，或者如果您的应用程序是受信任的辅助应用程序（当它被信任时，它可以使用 API，即使这个选项没有被选中）。Accessibility API 本身提供了使您的应用程序受信任的必要功能 - 基本上您必须成为 root（使用安全服务请求用户的 root 权限），然后将您的进程标记为受信任。一旦您的应用程序被标记为受信任，它必须重新启动，因为受信任状态仅在启动时检查，并且在应用程序运行时无法更改。信任状态是永久的，除非用户将应用程序移动到其他地方或应用程序二进制文件的哈希值发生变化（例如在更新之后）。如果用户在其首选项中启用了辅助设备，则所有应用程序都被视为受信任。通常，您的应用程序会检查此选项是否已启用，如果已启用，请继续执行您的操作。如果没有，它会检查它是否已经被信任，如果是，再次做你的事情。如果不尝试使自己受信任，然后重新启动应用程序，除非用户拒绝 root 授权。API 提供了所有必要的功能来检查所有这些。它会检查它是否已经被信任，如果是，再次做你的事情。如果不尝试使自己受信任，然后重新启动应用程序，除非用户拒绝 root 授权。API 提供了所有必要的功能来检查所有这些。它会检查它是否已经被信任，如果是，再次做你的事情。如果不尝试使自己受信任，然后重新启动应用程序，除非用户拒绝 root 授权。API 提供了所有必要的功能来检查所有这些。

存在使用 Mac OS 窗口管理器执行相同操作的私有功能，但唯一可以为您带来的好处是您不需要成为受信任的辅助功能应用程序（在大多数情况下，这是第一次启动时的一次性操作） . 缺点是此 API 可能随时更改（过去已经更改），所有这些都没有文档记录，功能只能通过逆向工程了解。然而，可访问性是公开的，它被记录在案并且自第一个引入它的 OS X 版本以来并没有太大变化（一些新功能在 10.4 中添加，在 10.5 中再次添加，但其他方面没有太大变化）。

这是一个代码示例。它将等待 5 秒，因此您可以在它执行任何其他操作之前切换到不同的窗口（否则它将始终与终端窗口一起工作，对于测试来说相当无聊）。然后它会得到最前面的进程，这个进程的最前面的窗口，打印它的位置和大小，最后向右移动25个像素。你像这样在命令行上编译它（假设它被命名为 test.c）

```
gcc -framework Carbon -o test test.c 
```

请注意，为了简单起见，我没有在代码中执行任何错误检查（如果出现问题，有很多地方可能会导致程序崩溃，并且某些事情可能/可能会出错）。这是代码：

```
/* Carbon includes everything necessary for Accessibilty API */
#include <Carbon/Carbon.h>

static bool amIAuthorized ()
{
    if (AXAPIEnabled() != 0) {
        /* Yehaa, all apps are authorized */
        return true;
    }
    /* Bummer, it's not activated, maybe we are trusted */
    if (AXIsProcessTrusted() != 0) {
        /* Good news, we are already trusted */
        return true;
    }
    /* Crap, we are not trusted...
     * correct behavior would now be to become a root process using
     * authorization services and then call AXMakeProcessTrusted() to make
     * ourselves trusted, then restart... I'll skip this here for
     * simplicity.
     */
    return false;
}

static AXUIElementRef getFrontMostApp ()
{
    pid_t pid;
    ProcessSerialNumber psn;

    GetFrontProcess(&psn);
    GetProcessPID(&psn, &pid);
    return AXUIElementCreateApplication(pid);
}

int main (
    int argc,
    char ** argv
) {
    int i;
    AXValueRef temp;
    CGSize windowSize;
    CGPoint windowPosition;
    CFStringRef windowTitle;
    AXUIElementRef frontMostApp;
    AXUIElementRef frontMostWindow;

    if (!amIAuthorized()) {
        printf("Can't use accessibility API!\n");
        return 1;
    }

    /* Give the user 5 seconds to switch to another window, otherwise
     * only the terminal window will be used
     */
    for (i = 0; i < 5; i++) {
        sleep(1);
        printf("%d", i + 1);
        if (i < 4) {
            printf("...");
            fflush(stdout);
        } else {
            printf("\n");
        }
    }

    /* Here we go. Find out which process is front-most */
    frontMostApp = getFrontMostApp();

    /* Get the front most window. We could also get an array of all windows
     * of this process and ask each window if it is front most, but that is
     * quite inefficient if we only need the front most window.
     */
    AXUIElementCopyAttributeValue(
        frontMostApp, kAXFocusedWindowAttribute, (CFTypeRef *)&frontMostWindow
    );

    /* Get the title of the window */
    AXUIElementCopyAttributeValue(
        frontMostWindow, kAXTitleAttribute, (CFTypeRef *)&windowTitle
    );

    /* Get the window size and position */
    AXUIElementCopyAttributeValue(
        frontMostWindow, kAXSizeAttribute, (CFTypeRef *)&temp
    );
    AXValueGetValue(temp, kAXValueCGSizeType, &windowSize);
    CFRelease(temp);

    AXUIElementCopyAttributeValue(
        frontMostWindow, kAXPositionAttribute, (CFTypeRef *)&temp
    );
    AXValueGetValue(temp, kAXValueCGPointType, &windowPosition);
    CFRelease(temp);

    /* Print everything */
    printf("\n");
    CFShow(windowTitle);
    printf(
        "Window is at (%f, %f) and has dimension of (%f, %f)\n",
        windowPosition.x,
        windowPosition.y,
        windowSize.width,
        windowSize.height
    );

    /* Move the window to the right by 25 pixels */
    windowPosition.x += 25;
    temp = AXValueCreate(kAXValueCGPointType, &windowPosition);
    AXUIElementSetAttributeValue(frontMostWindow, kAXPositionAttribute, temp);
    CFRelease(temp);

    /* Clean up */
    CFRelease(frontMostWindow);
    CFRelease(frontMostApp);
    return 0;
} 
```

Sine Ben 询问您如何在评论中获得所有窗口的列表，方法如下：

而不是`kAXFocusedWindowAttribute`你使用`kAXWindowsAttribute`的`AXUIElementCopyAttributeValue`功能。结果是 no `AXUIElementRef`，而是一个`CFArray`元素`AXUIElementRef`，一个用于此应用程序的每个窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-11T19:56:52.470

我同意无障碍是最好的前进方式。但是，如果您想要快速而肮脏，AppleScript 也可以。

# c# - 在同一装配空间中动态生成模块

> ID：614186
> 
> 赞同：4
> 
> 时间：2009-03-05T10:06:39.880
> 
> 标签：c#, .net, dynamic

考虑我有一个程序正在运行，它应该执行以下操作 - 应该从文本文件中读取一些代码并应该在自己的程序集空间中执行它，以便正在执行的新代码可以访问已经运行的代码的所有组件。这怎么可能？？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-07T19:42:44.923

组装空间是指 AppDomain 吗？

您可能想看看[IronPython](http://www.codeplex.com/Wiki/View.aspx?ProjectName=IronPython)。作为一种脚本语言，它更适合在运行时动态添加到程序中。

否则：

您可以通过位于 System.dll 中的[Microsoft.CSharp.CSharpCodeProvider](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)访问 C#（和 VB.NET）编译器。

您可以使用它将该文本文件编译为单独的 dll（可能在内存中）。确保在编译时添加当前正在执行的程序集作为参考。然后你可以

*   将程序集加载到当前正在执行的 AppDomain 中。这样，它就可以访问应用程序中的所有对象。但是，*您不能*再次卸载代码。您必须卸载整个 AppDomain（即您的应用程序）
*   将程序集加载到单独的 AppDomain 中。您必须通过远程处理（或其他进程中的通信方法）显式提供对某些对象的访问权限，但您可以卸载/替换代码以防文本文件发生更改。

无论哪种方式，您都必须使用反射来调用动态加载的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T10:15:29.423

不知道魔法是如何工作的，但我会看看[MyGeneration](http://sourceforge.net/projects/mygeneration/)，它是开源的，可以实现你想做的事情。它可以读取 C#、VB.Net 和 JScript 文件，然后构建/编译这些脚本并让它们访问它自己的一组类和程序集。

# c - 如何使用 log4c 使用滚动日志？

> ID：614193
> 
> 赞同：8
> 
> 时间：2009-03-05T10:09:26.460
> 
> 标签：c, logging

有人能告诉我如何使用[log4c](http://log4c.sourceforge.net/) API 库的滚动日志功能吗？

只有关于它提供的功能的文档，而且有很多。

如果有人在[log4c](http://log4c.sourceforge.net/)中使用过滚动日志，那么很高兴了解如何配置和使用它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-11-16T22:59:03.030

将类似的内容添加到您的`.log4crc`文件中：

```
<rollingpolicy name="myrollingpolicy" 
               type="sizewin"
               maxsize="1024"
               maxnum="10"
               />
<appender name="myrollingfileappender"
          type="rollingfile"
          logdir="."
          prefix="myprefix"
          layout="dated"
          rollingpolicy="myrollingpolicy"
          /> 
```

然后你像往常一样做日志记录：

```
#include <stdio.h>
#include "log4c.h"

int main(int argc, char** argv) {
  int rc = 0;
  log4c_category_t* mycat = NULL;

  if (log4c_init()) {
    printf("log4c_init() failed");
    rc = 1;  
  } 
  else{
      mycat = log4c_category_get("log4c.examples.helloworld");

      log4c_category_log(mycat, LOG4C_PRIORITY_ERROR, "Hello World!");

    /* Explicitly call the log4c cleanup routine */
    if ( log4c_fini()){
      printf("log4c_fini() failed");
    }
  }
  return 0;
} 
```

这些都可以在[log4c 源代码的示例中找到](http://log4c.cvs.sourceforge.net/viewvc/log4c/log4c/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-04T17:38:36.287

由于这是一个 3 个月大的问题，只是想知道是否尝试过 Wikipedia 页面 - [http://en.wikipedia.org/wiki/Log4c#Development_with_Log4C](http://en.wikipedia.org/wiki/Log4c#Development_with_Log4C)。

# open-source - 用TeX/LaTeX制作的书籍源代码学习

> ID：614197
> 
> 赞同：17
> 
> 时间：2009-03-05T10:10:19.903
> 
> 标签：open-source, latex, tex, typography

前段时间，在阅读[这篇](https://stackoverflow.com/questions/563036/what-is-elegant-code/575983#575983)文章时，我发现了一张漂亮的图片和指向一本名为“思考”的更好的书的指针。令我惊讶的是，这本书的 LaTeX 源代码已经可以下载了，其中包括：

```
%% There's no bold typewriter in Computer Modern.
%% Emulate with printing several times, slightly moving

\newdimen\poormove
\poormove0.0666pt
\newcommand{\poorbf}[1]{%
\llap{\hbox to \poormove{#1\hss}}%
\raise\poormove\rlap{#1\hss}%
\lower\poormove\rlap{#1\hss}%
\rlap{\hbox to \poormove{\hss}\hbox{#1}}%
#1}

%\let\poorbf=\textbf
\renewcommand{\poorbf}[1]{{\fontencoding{OT1}\fontfamily{cmtt}\fontseries{b}\selectfont#1}} 
```

它可以模拟没有它的字体的粗体笔触。自从阅读之后，我不知道`\llap`等等，但现在我可以使用它们来定义框等。

所以，我的问题是双重的：

1.  您是否知道一些网站显示在有用的食谱方面相对高级地使用 TeX/LaTeX，以及
2.  你知道有哪些书提供了他们的 TeX/LaTeX 源代码来检查和学习（并且值得这样做。）？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-03-05T10:36:48.263

TeX 有两本综合参考指南/食谱书：

*   [TeX](http://www.eijkhout.net/tbt/) by Victor Eijkhout的主题
*   [不耐烦的 TeX](http://tug.ctan.org/pkg/impatient)由 Paul Abrahams、Kathryn Hargreaves 和 Karl Berry

在这两种情况下，资源也是可用的。

正如 lindelof 所提到的，TeXBook 也是可用的，尽管它的形式阻止了编译（Knuth 希望人们查看源代码以获取灵感，但不要随意复制这本书）：

*   Donald Knuth[的 TeXBook](http://tug.ctan.org/pkg/texbook)

在 LaTeX 方面，从编程的角度来看，资源更加稀缺。我所知道的最好的免费参考是

*   彼得弗林的[格式化信息](http://tug.ctan.org/tex-archive/info/beginlatex/)

当然也有

*   Tobias Oetiker[不那么简短的 LaTeX 指南](http://tug.ctan.org/tex-archive/info/lshort/)

但这并没有涵盖这么多的编程“东西”。LaTeX 源代码本身包含一些有用的信息，但文档的质量从优秀到部分不存在；这应该在您的发行版中可用`texdoc source2e`。

其他大型 LaTeX 包显然有其可用文档的源代码；一个值得注意的例子是回忆录类：

*   [彼得威尔逊的回忆录课](http://www.ctan.org/tex-archive/macros/latex/contrib/memoir/)（`memman.tex`是文档）

* * *

我敢肯定还有更多书籍及其来源可用；这些只是第一个想到的碰巧也可以使用 TeX 和/或 LaTeX 的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-05T10:16:07.533

信不信由你，但[TeXbook](https://rads.stackoverflow.com/amzn/click/com/0201134470)的源代码实际上是可以免费下载的：

[TeXbook源代码包](http://ctan.org/pkg/texbook)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-05T10:48:12.123

不是我推荐它（除非你有很多时间和咖啡因），但我从阅读 latex.ltx 文件中学到了很多东西。我不仅学到了很多关于 LaTeX 的知识，当然也学到了关于 TeX 的知识。虽然这是一个沉重的阅读，我建议先阅读一本关于 TeX 的书，然后再深入研究 latex.ltx 文件。

我想知道“可选”参数实际上是如何工作的，阅读 latex.ltx 文件真的帮助我理解了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-11T11:06:42.040

另一本绝对适合您问题的第 2 部分的书是TeX.SX[成员 Nicola Talbot的](https://tex.stackexchange.com/users/19862/nicola-talbot)[*LaTeX for Complete Novices*](http://www.dickimaw-books.com/latex/novices/)。

[发布在 TeX.SX 上的这个后面的问题](https://tex.stackexchange.com/questions/230526/list-of-books-written-in-latex-with-the-source-available)也与第 2 部分相关，值得一读。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-04-18T15:48:28.120

我发现 Allen B. Downey 的这本书看起来非常好：[计算建模和复杂性科学](http://www.greenteapress.com/compmod/)。

# nlp - NLP 的 WordNet 代码

> ID：614199
> 
> 赞同：-1
> 
> 时间：2009-03-05T10:10:43.537
> 
> 标签：nlp, wordnet

是否有任何代码可用于演示使用 Wordnet 进行自然语言处理？我的问题陈述是“开发一个查询回答系统。它将查询字符串作为输入。从用户正在阅读的文档中搜索令人兴奋的答案。它是一个桌面应用程序，文档已经保存。期望的输出是显示材料.

我是最后一年的学生。在 2009 年 3 月 15 日之前等待您的回复。问候， Farheena Jawed

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-05T10:14:27.850

如果你是最后一年的学生，并且打算成为一名专业程序员，那么你至少现在应该已经学会了如何思考解决方案，而不是等到最后一刻才试图复制别人的努力。

也许，您应该尝试另一个需要较少努力的职业方向。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-05T10:17:39.153

您可以使用 python 快速构建 NLP 原型。NLTK 具有与 wordnet 的接口，并具有与 NLP 相关的其他功能。

[http://www.nltk.org/documentation](http://www.nltk.org/documentation)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-06T18:28:49.573

你可以试试[这个屡获殊荣的 NLP 代码](http://www1.us.ioccc.org/1993/schnitzi.c)，虽然它不使用 WordNet。

有一个[示例数据文件](http://www1.us.ioccc.org/1993/schnitzi.info)，并提供了一些[解释和使用说明](http://www1.us.ioccc.org/1993/schnitzi.hint)。

摘自作者评论：

> 我想编写一个程序，它可以读取自然语言（例如英语）的文本文件并回答有关该文本文件的问题。我认为这可能是一项复杂的任务，我是对的——我花 **了 800 多个字节**。当然，它并不总是有效，但这就是适合你的人工智能。

在[托管站点的](http://www0.us.ioccc.org/main.html)[上下文](http://www1.us.ioccc.org/years.html#1993_schnitzi)中。尽情享受你的任务吧！

# python - 为什么正则表达式在python中返回错误？

> ID：614205
> 
> 赞同：3
> 
> 时间：2009-03-05T10:13:47.243
> 
> 标签：python, regex

我在 python 中尝试以下正则表达式，但它返回错误

```
import re
...

#read a line from a file to variable line
# loking for the pattern 'WORD' in the line ...

m=re.search('(?<=[WORD])\w+',str(line))
m.group(0) 
```

我收到以下错误：

**AttributeError：“NoneType”对象没有属性“组”**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-05T10:16:21.637

发生这种情况是因为正则表达式不匹配。因此 m 是 None 并且你当然不能访问 group[0]。在尝试访问组成员之前，您需要先测试搜索是否成功。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-05T12:53:45.753

两个问题：

1.  您的模式不匹配，因此`m`设置为`None`，并且`None`没有`group`属性。

2.  我相信你的意思是：

    ```
    m= re.search(r"(?<=WORD)\w+", str(line)) 
    ```

    输入时，或

    ```
    m= re.search(r"(?P<WORD>\w+)", str(line)) 
    ```

    前者匹配“WORDabc def”中的“abc”；后者匹配“abc def”中的“abc”，匹配对象将包含一个`.group("WORD")`“abc”。（在指定正则表达式时，使用 r"" 字符串通常是一个好主意。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-05T10:17:19.840

[re.search 文档说](http://docs.python.org/library/re.html#re.search)：

> 如果字符串中没有位置与模式匹配，则返回**None ；**请注意，这与在字符串中的某个点找到零长度匹配不同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-05T10:17:31.900

```
>>> help(re.search)
Help on function search in module re:

search(pattern, string, flags=0)
    Scan through string looking for a match to the pattern, returning
    a match object, or None if no match was found. 
```

查看最后一行：**如果没有找到匹配项，则返回 None**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-05T10:46:45.730

顺便说一句，您的正则表达式不正确。如果您查找“WORD”，它应该只是“WORD”。`str`也是无关紧要的。您的代码应如下所示：

```
m = re.search('WORD', line)
if m:
    print m.group[0] 
```

您的原始正则表达式可能会返回意外和不希望的结果：

```
>>> m = re.search('(?<=[WORD])\w+', 'WORDnet')
>>> m.group(0)
'ORDnet' 
```

# ios - 如何隐藏 iPhone 导航栏上的“返回”按钮？

> ID：614212
> 
> 赞同：324
> 
> 时间：2009-03-05T10:15:23.247
> 
> 标签：ios, objective-c, iphone, navigation, uinavigationcontroller

我添加了一个导航控件来在我的应用程序中的视图之间切换。但有些视图不应该有“返回”（前一个标题）按钮。关于如何隐藏后退按钮的任何想法？

* * *

## 回答 #1

> 赞同：826
> 
> 时间：2009-04-27T00:56:54.347

目标-C：
`self.navigationItem.hidesBackButton = YES;`

迅速：
`navigationItem.hidesBackButton = true`

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-08-14T07:45:55.193

最好的方法是将这些组合起来，因此即使您手动设置它也会隐藏后退按钮：

```
self.navigationItem.leftBarButtonItem=nil;
self.navigationItem.hidesBackButton=YES; 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-05-01T04:54:28.213

使用以下代码隐藏后退按钮...

```
[self.navigationItem setHidesBackButton:YES animated:YES]; 
```

**或者**

```
[self.navigationItem setHidesBackButton:YES]; 
```

另外，如果您有自定义，请`UINavigationBar`尝试以下代码

```
self.navigationItem.leftBarButtonItem = nil; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-12-02T19:58:47.677

在**斯威夫特**：

将此添加到**控制器**

```
override func viewDidLoad() {
    super.viewDidLoad()
    self.navigationItem.setHidesBackButton(true, animated: false)
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-16T11:02:36.967

使用代码：

```
 self.navigationItem.backBarButtonItem=nil; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-04-11T22:15:22.000

在 UIViewController 的函数 viewDidLoad 中使用代码：

```
self.navigationItem.hidesBackButton = YES; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-02-11T16:22:11.433

不要忘记您需要在具有导航控制器的对象上调用它。例如，如果您有导航控制器在带有 RootViewController 的选项卡栏控制器上推送，则调用`self.navigationItem.hidesBackButton = YES`RootViewController 将不会执行任何操作。你实际上必须打电话`self.tabBarController.navigationItem.hidesBackButton = YES`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-04-09T12:46:36.183

在您的视图控制器中添加此代码

```
UIView *myView = [[UIView alloc] initWithFrame: CGRectMake(0, 0, 300, 30)];
UIBarButtonItem *btnL = [[UIBarButtonItem alloc]initWithCustomView:myView];
self.navigationItem.leftBarButtonItem = btnL; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-09-30T16:04:52.040

不要忘记我们现在有滑动到后退的手势。您可能也想删除它。**如有必要，不要忘记再次启用它。**

```
if ([self.navigationItem respondsToSelector:@selector(hidesBackButton)]) {
    self.navigationItem.hidesBackButton = YES;
}

if ([self.navigationController respondsToSelector:@selector(interactivePopGestureRecognizer)]) {
    self.navigationController.interactivePopGestureRecognizer.enabled = NO;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-06-22T11:39:06.380

对我来说，上述方法似乎都不起作用，它没有视觉效果。我正在使用带有“嵌入”在导航控制器中的视图的情节提要。

然后我在代码级别添加我的 menuItems 并且由于某种原因在可视化调试视图层次结构时“backButton”是可见的，并且我的 menuItem 图标显示在不可见的“后退按钮”下方。

我按照各种钩子方法的建议尝试了设置，但没有效果。然后我尝试了一种更残酷的方法并迭代了也没有效果的子视图。

我检查了我的图标大小，似乎没问题。在参考了他的苹果人机界面指南后，我确认我的图标是正确的。（在我的情况下小 1 像素 24px 48px 72px）。

然后最奇怪的部分是实际修复......

**添加 BarButton 项时，给它一个至少包含一个字符的标题**，在我的例子中是一个空格字符。

希望这可以帮助某人。

```
//left menu - the title must have a space
UIBarButtonItem *leftButtonItem = [[UIBarButtonItem alloc] initWithTitle:@" " <--THE FIX 
                                                                    style:UIBarButtonItemStylePlain
                                                                  target:self
                                                                  action:@selector(showMenu)];
leftButtonItem.image = [UIImage imageNamed:@"ic_menu"];

[self.navigationItem setLeftBarButtonItem:leftButtonItem]; 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-02-19T03:39:31.607

当我设置时，它在所有情况下都不适用于我

self.navigationItem.hidesBackButton = 是；

在 viewWillAppear 或 ViewDidLoad 中，但是当我在 viewController 的 init 中设置它时效果很好。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-01-22T21:41:59.507

试试这个 - `self.navigationController?.navigationItem.hidesBackButton = true`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-05-31T10:11:51.930

在 c# 或 Xamarin.ios 中，this.NavigationItem.HidesBackButton = true;

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-05-17T12:14:28.027

```
navigationItem.leftBarButtonItem = nil
navigationItem.hidesBackButton = true 
```

如果您在 didLoad 或 loadView 中使用此代码块，但可以正常工作但不能正常工作。如果您仔细看，您可以看到后退按钮在您的视图加载时隐藏。看起来很奇怪。

什么是完美的解决方案？

将来自 componentView *(Command + Shift + L)的***BarButtonItem**组件添加到目标 viewControllers 导航栏。

 *从右侧面板中选择 BarButtonItem set Title = " "

[![在此处输入图像描述](https://i.stack.imgur.com/DU1vG.png)](https://i.stack.imgur.com/DU1vG.png)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-10-14T19:00:23.557

```
self.navigationItem.setHidesBackButton(true, animated: true) 
```

# sql - 将 GPS 位置存储在数据库 varchar 字段中

> ID：614215
> 
> 赞同：7
> 
> 时间：2009-03-05T10:15:55.523
> 
> 标签：sql, database

对于任何人的任何建议，我将不胜感激：

**您如何有效地将 gps（或任何浮点数）存储在可以*索引*的 varchar 字段中。**

* * *

背景：

我们开发了一个内容管理系统，可以有效地将任何类型的文件与元数据集合一起存储。该文件/元数据存储如下：

```
file_table              metadata_table
----------              --------------
file_id         ->      file_id (number)
file_name               metadata_id (number)
file_location           metadata_value (varchar)
...etc 
```

我被要求为地理标记文件提供支持（即，将 gps 坐标存储为元数据）。此外，我们还希望支持具有多个地理标签的文件。

现在据我所知，我有几个选择：

**1) 将纬度和经度存储在同一个 metadata_value varchar 中（例如，'52.4343242,-1.32324'）。**

我将如何查询这个字符串？我可以用 sql 做些什么聪明的事情来让我查询字符串的“组件”？我可以将坐标存储为 xml 字符串吗？这有帮助吗？如何有效地索引？

**2) 将纬度和经度作为单独的行存储在*metadata_table*中。**

此解决方案解决了支持更轻松查询的问题（以复杂性和笨拙为代价，特别是当我将在每个文件存储多个地理标签时），但是我仍然面临索引问题。

我可以在查询时将 varchars 转换为浮点数，但是我不确定这是否会忽略我在*metadata_table.metadata_value*上的索引并改为执行表扫描。

**3）创建专用的浮点字段来存储gps数据。**

这是最不理想的选择，因为它违背了为特定元数据添加数据库字段的设计。并非所有文件都会存储 GPS 数据。

任何帮助或建议表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-05T12:28:46.327

您可以使用 Oracle 定位器。Oracle Spatial 的免费子集，用于对空间数据进行各种不同的地理操作和索引：[http ://www.oracle.com/technology/products/spatial/index.html](http://www.oracle.com/technology/products/spatial/index.html)

通过使用列类型 mdsys.sdo_geometry，您可以在数据库中存储点、点云、线、多边形和 3D 事物。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-05T10:22:36.567

这有什么帮助吗：http: [//postgis.refractions.net](http://postgis.refractions.net)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-05T10:28:11.670

尽管您已使用 Oracle 对此进行了标记，但我认为这对使用 MySQL 的任何人都有用：[使用空间扩展来存储位置数据](http://dev.mysql.com/doc/refman/5.0/en/spatial-extensions.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-06T09:38:09.160

使用 mdsys.sdo_geometry 类型的专用浮点字段或列是存储此数据的最佳方式。如果文件没有 GPS 数据，这些字段将为空，但为什么会出现问题？如果一个文件可以关联多个点，请使用详细信息表。

选项 1 和 2 是“通用”解决方案。通用数据库解决方案很慢，因为它们更难以索引并且收集统计信息变得更加困难，因此查询优化器的生活变得更加困难。

此外，使用 Cognos（商业智能）等工具在通用解决方案上收集管理信息的报告对您的用户来说更难。

将日期存储在日期字段中，将数字存储在数字字段中，将地理信息存储在地理字段中 (mdsys.sdo_geometry)。

这里解释了为什么在数字字段中存储像“20031603”这样的日期会减慢速度：http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID: [77598210939534](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:77598210939534) .

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-05T10:18:54.750

对于选项 1，我可以说：使用[Gps eXchange Format (GPX)](http://en.wikipedia.org/wiki/GPX_(data_transfer))。这是保存 GPS 点的标准方法。有标记航点、轨迹和兴趣点的选项。
尽管如此，查询起来并不容易。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-06T09:50:43.360

一般来说，如果我有一个千篇一律的表（我并不是说它们没有用），我倾向于允许存储一系列数据类型，并在类型之前使用。例如

```
CREATE TABLE MetaDataType (
  MetaDataID int IDENTITY(1,1) not null,
  MetaDataType varchar(10) not null,
  constraint PK_MetaDataType PRIMARY KEY (MetaDataID),
  constraint UQ_MetaDataType_TypeCheck UNIQUE (MetaDataID,MetaDataType),
  constraint CK_MetaDataType CHECK (MetaDataType in ('INT','CHAR','FLOAT'))
) 
```

然后元数据表看起来像：

```
CREATE TABLE MetaData (
  FileID int not null,
  MetaDataID int not null,
  MetaDataType varchar(10) not null,
  IntValue int null,
  CharValue varchar(max) null,
  FloatValue float null,
  constraint PK_MetaData PRIMARY KEY (FileID,MetaDataID),
  constraint FK_MetaData_Files FORIEGN KEY (FileID) references /* File table */,
  constraint FK_MetaData_Types FOREIGN KEY (MetaDataID,MetaDataType) references MetaDataTypes (MetaDataID,MetaDataType),
  constraint CK_MetaData_ValidTypes ((MetaDataType = 'INT' or IntValue is null) and (MetaDataType = 'CHAR' or CharValue is null) and (MetaDataType = 'FLOAT' or FloatValue is null))
) 
```

重点是 1）您为每个元数据项存储预期的类型，以及 2）您在元数据表中强制执行该类型。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-05T16:38:55.040

编辑：请参阅评论以了解不足之处。

要回答您的基本问题，忽略其背后的任何推理，您可以使用[基于函数的索引](http://download.oracle.com/docs/cd/B28359_01/server.111/b28310/indexes003.htm#insertedID7)。如果您选择选项#2，这应该是直截了当的。

如果你坚持使用#1，你只需要添加一些 instr/substr voodoo；例如：

```
select 
    to_number(
      substr(
          '52.4343242,-1.32324'
        , 1
        , instr( '52.4343242,-1.32324', ',' ) - 1
      )
    ) as lattitude
  , to_number(
      substr(
          '52.4343242,-1.32324'
        , instr( '52.4343242,-1.32324', ',' ) + 1
      )
    ) as longitude
from dual; 
```

所以你会做这样的事情：

```
create index lat_long_idx on metadata_table ( 
    to_number(
      substr(
          metadata_value
        , 1
        , instr( metadata_value, ',' ) - 1
      )
    )
  , to_number(
      substr(
          metadata_value
        , instr( metadata_value, ',' ) + 1
      )
    )
); 
```

# c# - 什么是 MVC 期货库？

> ID：614224
> 
> 赞同：36
> 
> 时间：2009-03-05T10:19:12.940
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-futures

在 Stack Overflow 上，我看到一些人提到[MVC Futures 库](http://aspnet.codeplex.com/releases/view/24471)

这个项目是什么？我该如何使用它？文档在哪里？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-03-05T10:28:30.093

查看[Eilon Lipton 的博客](http://weblogs.asp.net/leftslipper/archive/2009/03/03/asp-net-mvc-release-candidate-2-i-declare-myself-to-be-declarative.aspx)：

> 在这篇博文中，我将向您介绍一个甚至不是主 ASP.NET MVC 下载的一部分的功能。它是单独的 MVC Futures 下载的一部分，**其中包括我们正在考虑在 ASP.NET MVC 的未来版本中包含的功能原型**。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-03-06T06:12:00.763

没有文档，因为它是非常早期的原型工作。我们确实发布了源代码，所以如果你真的感兴趣，你可以弄清楚。随着时间的推移，我们将开始写博客并提供示例。目前，我们的重点是主要产品。我们发布未来的目的是为那些真正想深入了解源代码的人提供一种方式，以就我们对未来的想法提供反馈。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-01T10:48:44.407

看看这个博客。它突出了 MVC 未来的领域

[http://msmvps.com/blogs/luisabreu/archive/tags/MVC/default.aspx](http://msmvps.com/blogs/luisabreu/archive/tags/MVC/default.aspx)

# java - 如何使用 Java 检测 PC 已空闲 30 秒？

> ID：614227
> 
> 赞同：9
> 
> 时间：2009-03-05T10:20:22.687
> 
> 标签：java

如何使用 Java 检测 PC 已空闲 30 秒？

已编辑

空闲是指没有用户活动。用户在 30 秒内什么都不做。我想做一个像 Windows 这样的应用程序，它检测到用户什么都不做，然后进入备用状态。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-05T18:44:41.913

我遇到了这个使用[JNA](https://github.com/twall/jna/)检测系统范围空闲时间的优秀示例。[Java Native Access (JNA)](https://github.com/twall/jna/)是一个库，它提供对[Java Native Interface (JNI)](http://java.sun.com/j2se/1.5.0/docs/guide/jni/index.html)的访问，而无需您实际编写本机代码。

这是与您要求的非常接近[的示例。](http://ochafik.free.fr/blog/?p=98)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-05T11:11:20.880

无法按要求进行，但您可以使用[java.lang.management API](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/management/package-summary.html)创建变通方法。JNI 实现也可以在[javaworld](http://www.javaworld.com/javaworld/javaqa/2002-11/01-qa-1108-cpu.html)上找到。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-05T10:42:56.503

直接从java是不可能的。您必须找到一些本机库并为此创建一个 JNI 包装器。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-05T11:12:18.150

不容易看一下 OperatingSystemMXBean 方法 getSystemLoadAverage() 仅从 java 6 开始可用，您可以跟踪它，如果它在一段时间内相同，则确定 pc 处于空闲状态。

这假设空闲 CPU 空闲

> OperatingSystemMXBean operatingSystemMxBean = ManagementFactory.getOperatingSystemMXBean();

# git - 我可以将 repo 的 .git 目录移动到它的父目录吗？

> ID：614229
> 
> 赞同：37
> 
> 时间：2009-03-05T10:20:50.613
> 
> 标签：git, merge, directory, subdirectory

我有两个子目录，每个子目录都有一个 repo，因此：

```
PPP/
 |--ABC/
 |   |--.git/
 |   |--AAA/
 |   |    BBB/
 |   |   CCC/
 |   
 |--DEF/
 |   |--.git/
 |   |--DDD/
 |   |--EEE/ 
```

并且想将它们合并到一个仓库中，所以，我假设目录结构是这样的：

```
PPP/
 |--.git/
 |--ABC/
 |   |--AAA/
 |   |--BBB/
 |   |--CCC/
 |   
 |--DEF/
 |   |--DDD/
 |   |--EEE/ 
```

这可能吗？

目前还有几个人在他们的机器上拥有 repos。这让生活复杂了多少？

塔。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2009-03-05T10:28:34.337

你可以像这样做你描述的事情：

1.  将 的内容移动`ABC`到`ABC/`子目录，并修复历史记录，使其看起来一直存在：

    ```
    $ cd /path/to/ABC
    $ git filter-branch --index-filter \
        'git ls-files -s | sed "s-\t-&ABC/-" |
         GIT_INDEX_FILE=$GIT_INDEX_FILE.new \
         git update-index --index-info &&
         mv $GIT_INDEX_FILE.new $GIT_INDEX_FILE' HEAD 
    ```

    现在你的目录结构是`ABC/ABC/your_code`

2.  的内容相同`DEF`：

    ```
    $ cd /path/to/DEF
    $ git filter-branch --index-filter \
        'git ls-files -s | sed "s-\t-&DEF/-" |
         GIT_INDEX_FILE=$GIT_INDEX_FILE.new \
         git update-index --index-info &&
         mv $GIT_INDEX_FILE.new $GIT_INDEX_FILE' HEAD 
    ```

    现在你的目录结构是`DEF/DEF/your_code`

3.  最后，创建`PPP`存储库并将两者拉`ABC`入`DEF`其中：

    ```
    $ mkdir /path/to/PPP
    $ cd /path/to/PPP
    $ git init
    $ git pull /path/to/ABC
    $ git pull /path/to/DEF 
    ```

    现在你有了`PPP/ABC/your_code`和`PPP/DEF/your_code`，以及所有的历史。

您可能应该要求您的同事在他们的系统上运行以前的命令，以使每个人都同步。

> **注意：**时髦的`filter-branch`命令[来自手册页](http://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html)。:-)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-13T18:45:43.693

您真的需要将两个现有存储库合并到一个存储库中，还是只想将它们分组？

如果你只是想对它们进行分组，那么 git-submodule 会做你想做的事：你最终会得到三个存储库，其中顶级的一个链接到当前的两个。

作为指南：

*   如果要增加它们之间的耦合，则应该将它们合并到一个存储库中，这样将一个版本的存储库 A 与不同版本的存储库 B 一起使用不再有意义。

*   你应该使用子模块，如果它们仍然有些分离（有时单独处理一个是有意义的），但你希望能够一起使用它们的便利（例如同时下载两个，检查点已知良好的状态） ， ETC）。

使用子模块将避免存储库的现有副本出现问题，因为历史不会改变。合并它们将创建一个新的历史，并且在现有分支中工作的人将更难合并他们的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T10:26:09.680

对我来说，似乎很难按照你想要的方式去做，因为这两个项目的历史不会合并。

我最好的建议是创建一个包含 ABC 和 DEF 的新存储库，保留这两个存储库的旧存储库以备份历史记录并使用这个新项目开始新的历史记录。

# c++ - 与字符串一起使用时对函数模板的未定义引用 (GCC)

> ID：614233
> 
> 赞同：4
> 
> 时间：2009-03-05T10:22:46.677
> 
> 标签：c++, string, templates, gcc, stl

我需要`replace_all`在 C++ 中编写一个模板化函数，它将接受一个字符串、wstring、glibmm::ustring 等并将所有出现的`search`in`subject`替换为`replace`.

replace_all.cc

```
template < class T >
T replace_all(
        T const &search,
        T const &replace,
        T const &subject
) {
        T result;

        typename T::size_type done = 0;
        typename T::size_type pos;
        while ((pos = subject.find(search, done)) != T::npos) {
                result.append (subject, done, pos - done);
                result.append (replace);
                done = pos + search.size ();
        }
        result.append(subject, done, subject.max_size());
        return result;
} 
```

测试.cc

```
#include <iostream>

template < class T >
T replace_all(
        T const &search,
        T const &replace,
        T const &subject
);

// #include "replace_all.cc"

using namespace std;

int main()
{
        string const a = "foo bar fee boor foo barfoo b";
        cout << replace_all<string>("foo", "damn", a) << endl;
        return 0;
} 
```

当我尝试使用 gcc 4.1.2 编译它时

```
g++ -W -Wall -c replace_all.cc  
g++ -W -Wall -c test.cc  
g++ test.o replace_all.o 
```

我得到：

```
test.o: In function `main':
test.cc:(.text+0x13b): undefined reference to `
   std::basic_string<char, std::char_traits<char>, std::allocator<char> >
   replace_all< std::basic_string<char, std::char_traits<char>, std::allocator<char> > >(
       std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&,
       std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&,
       std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&
   )
'
collect2: ld returned 1 exit status 
```

但是当我`#include "replace_all.cc"`在 test.cc 中取消注释并以这种方式编译时：

```
g++ -W -Wall test.cc 
```

该程序链接并产生预期的输出：

```
damn bar fee boor damn bardamn b 
```

为什么链接失败，我该怎么做才能使它工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-05T10:30:43.990

您无法链接模板，因为编译器在有人尝试使用（实例化）模板之前不知道要生成哪些代码。

如果您知道要使用哪些类型或者您知道它们是有限的，您可以“要求”编译器实例化模板。
如果你愿意 - 把它放到你的 .cc 文件中：

```
template std::string replace_all( std::string const& search,
                                  std::string const& replace,
                                  std::string const& subject );

template glibmm::ustring replace_all( glibmm::ustring const& search,
                                      glibmm::ustring const& replace,
                                      glibmm::ustring const& subject ); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-05T10:30:02.400

编译器需要在实例化点查看模板定义，否则无法生成专门为您实例化模板的类型的代码。正确的方法是将模板函数的实现放在[头文件中，或者](http://www.parashift.com/c++-faq-lite/templates.html#faq-35.15)像你一样#include .cc。

# flash - swfobject getFlashPlayerVersion 在 IE 中不起作用

> ID：614235
> 
> 赞同：1
> 
> 时间：2009-03-05T10:23:40.950
> 
> 标签：flash, internet-explorer, swfobject

swfobject.getFlashPlayerVersion 在 IE 中不起作用，还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-05T12:09:41.117

只是一个想法：试试吧`swfobject.hasFlashPlayerVersion(versionStr)`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-03-05T10:49:33.633

如果您的 flash 版本是 10.0.12，则以下代码允许您检索版本 nr：

```
var playerVersion = swfobject.getFlashPlayerVersion(); // returns a JavaScript object
var majorVersionNr = playerVersion.major; //returns the major nr: 10
var minorVersionNr = playerVersion.minor; //returns the minor nr: 0
var releaseVersionNr = playerVersion.release; //returns the version nr: 12 
```

# sql - 如何在选择时重命名表中的单个列？

> ID：614238
> 
> 赞同：30
> 
> 时间：2009-03-05T10:24:42.350
> 
> 标签：sql

我有两张表，列名相同，但数据不同。我想加入表格，但访问两列（row["price"], row["other_price"]）：如何在 select 语句中重命名/别名其中之一？（我不想在数据库中重命名它们）

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2009-03-05T10:27:14.637

选择 table1.price，table2.price 作为 other_price .....

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-03-05T10:28:19.643

```
select t1.Column as Price, t2.Column as Other_Price
from table1 as t1 INNER JOIN table2 as t2 
ON t1.Key = t2.Key 
```

像这样 ？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-05T10:27:50.453

我们使用 AS 关键字

```
select a.Price as PriceOne, b.price as PriceTwo 
from tablea a, tableb b 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-10-09T17:57:52.633

如果像我一样，您正在为一个列执行此操作，该列然后通过 COALESCE / array_to_json / ARRAY_AGG / row_to_json (PostgreSQL) 并希望在列名中保留大写字母，请在列名中加双引号，如下所示：

```
SELECT a.price AS "myFirstPrice", b.price AS "mySecondPrice" 
```

如果没有引号（以及使用这些函数时），我在 camelCase 中的列名将丢失大写字母。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-05T10:41:17.147

如果您使用的是 sql server，请在代码中的查询中使用括号或单引号将别名括起来。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-10T16:07:12.247

您也可以省略 AS 关键字。
`SELECT row1 Price, row2 'Other Price' FROM exampleDB.table1;`
在这个选项中，可读性有点下降，但你得到了想要的结果。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-22T03:02:27.307

无需使用`AS`，只需使用：

```
SELECT table1.price Table1 Price, table2.price Table2 Price, ..... 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-05T10:27:48.323

# c++ - 获取 QPixmap 哈希的最佳方法是什么？

> ID：614242
> 
> 赞同：5
> 
> 时间：2009-03-05T10:26:24.250
> 
> 标签：c++, qt, caching, hash, qpixmap

我正在使用 Qt 4.5 开发一个图形应用程序并将图像放入 QPixmapCache，我想对此进行优化，以便如果用户插入已经在缓存中的图像，它将使用它。

现在每个图像都有一个唯一的 id，这有助于优化自己的绘画事件。但是我意识到，如果我可以计算图像的哈希值，我可以查找缓存以查看它是否已经存在并使用它（当然这对重复对象更有帮助）。

我的问题是，如果它的 QPixmap 很大，它的哈希计算会减慢速度还是有更快的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T17:33:01.087

对此有几点评论：

1.  如果您要生成像素图的哈希/缓存键，那么您可能希望跳过 QPixmapCache 并**直接使用 QCache**。这将消除使用 QStrings 作为键的一些开销（除非您还想使用文件路径来定位项目）

2.  从 Qt4.4 开始，QPixmap 有一个与之关联的“散列”值（参见**QPixmap::cacheKey()**）。文档声称“如果不同的 QPixmap 对象引用相同的内容，它们只能具有相同的缓存键。” 然而，由于 Qt 使用共享数据复制，这可能只适用于复制的像素图，而不适用于从同一图像加载的两个不同的像素图。一些测试会告诉你它是否有效，如果有效，它会让你轻松获得哈希值。

3.  如果你真的想通过删除重复来做一个很好的、相当快速的缓存，**你可能想看看你自己的数据结构**，它根据大小、颜色深度、图像类型和诸如此类的东西进行排序。那么你只需要在找到具有相同尺寸，位深度等的相同类型的图像后，对实际图像数据进行哈希处理。当然，如果你的用户通常打开很多具有相同内容的图像，它就不会一点帮助都没有。

4.  性能：不要忘记 Qt 在 4.5 中添加的基准测试内容，它可以让您比较各种散列想法并查看哪个运行得最快。我还没有检查它，但它看起来很整洁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T15:49:00.030

以防万一有人遇到这个问题（并且在散列事物方面不是非常有经验，尤其是像图像这样的东西），这是一个非常简单的解决方案，我用于散列 QPixmap 并将它们输入查找表以供以后比较：

```
qint32 HashClass::hashPixmap(QPixmap pix)
{
    QImage image = pix.toImage();
    qint32 hash = 0;

    for(int y = 0; y < image.height(); y++)
    {
        for(int x = 0; x < image.width(); x++)
        {
            QRgb pixel = image.pixel(x,y);

            hash += pixel;
            hash += (hash << 10);
            hash ^= (hash >> 6);
        }
    }

    return hash;
} 
```

这是散列函数本身（如果您希望减少冲突，可以将其散列到 qint64 中）。如您所见，我将像素图转换为 QImage，并简单地遍历其尺寸并对每个像素执行非常简单的一次一个哈希并返回最终结果。有很多方法可以改进此实现（请参阅此问题的其他答案），但这是需要完成的基本要点。

OP 提到了他将如何使用这个散列函数来构造一个查找表，以便以后比较图像。这需要一个非常简单的查找初始化函数——像这样：

```
void HashClass::initializeImageLookupTable()
{
    imageTable.insert(hashPixmap(QPixmap(":/Image_Path1.png")), "ImageKey1");
    imageTable.insert(hashPixmap(QPixmap(":/Image_Path2.png")), "ImageKey2");
    imageTable.insert(hashPixmap(QPixmap(":/Image_Path3.png")), "ImageKey2");
// Etc...
} 
```

我在这里使用了一个名为 imageTable 的 QMap，它需要在类中声明如下：

```
QMap<qint32, QString> imageTable; 
```

然后，最后，当您想将图像与查找表中的图像进行比较时（即：“在我知道的图像中，这是什么图像，是这个特定的图像吗？”），您只需调用散列函数图像（我假设它也将是一个 QPixmap）和返回的 QString 值将允许您弄清楚这一点。像这样的东西会起作用：

```
void HashClass::compareImage(const QPixmap& pixmap)
{
    QString value = imageTable[hashPixmap(pixmap)];
    // Do whatever needs to be done with the QString value and pixmap after this point.
} 
```

就是这样。我希望这对某人有所帮助——它会为我节省一些时间，尽管我很高兴有解决这个问题的经验。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-05T10:36:59.230

哈希计算应该很快（如果不涉及磁盘 I/O，则在 100 MB/s 以上），具体取决于您使用的算法。在散列之前，您还可以进行一些快速测试以筛选出潜在的候选者 - fe 图像必须具有相同的宽度和高度，否则比较它们的散列值是没有用的。

当然，您还应该保留插入图像的哈希值，这样您只需为新图像计算哈希值，而不必为缓存的图像再次计算它。

如果图像足够不同，那么不散列整个图像而是散列较小的缩略图或图像的一部分（fe 前 10 行和后 10 行）可能就足够了，这会更快，但会导致更多的冲突。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-05T10:39:17.837

我假设您正在谈论实际计算图像数据的哈希值，而不是获取 QT 生成的唯一 ID。
根据您的图像，您可能不需要遍历整个图像来计算哈希值。也许只读取前 10 个像素？第一条扫描线？
也许从整个图像中伪随机选择像素？（使用已知种子，以便您可以重复序列）不要忘记将图像的大小也添加到哈希中。

# git - Git 和 Team Foundation Server

> ID：614245
> 
> 赞同：57
> 
> 时间：2009-03-05T10:27:38.287
> 
> 标签：git, tfs

**更新：**我不再使用 TFS。但从评论中我可以看出**git-tfs**显然是当今的发展方向。

有没有人使用 Git 作为 Team Foundation Server 的离线解决方案？

对于 Subversion，您可以使用 git-svn 来保留一个带有 svn 后端的私有存储库。

我尝试使用[SvnBridge](http://www.codeplex.com/SvnBridge)和 git-svn 来处理 TFS。起初它看起来很有希望，但 Visual Studio 将解决方案识别为受 TFS 版本控制并在提交期间进行干扰。

还有其他方法可以将这两者结合起来吗？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2010-02-10T19:21:50.723

我已经开始研究一个名为 git-tfs 的工具，在某些方面类似于 git-svn。

[https://github.com/git-tfs/git-tfs](https://github.com/git-tfs/git-tfs)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-27T18:31:29.617

微软的新产品：[**Git-tf**](http://gittf.codeplex.com/)

公告：[宣布 Git 与 TFS 集成](http://blogs.msdn.com/b/bharry/archive/2012/08/13/announcing-git-integration-with-tfs.aspx)

下载：[这里](http://www.microsoft.com/en-us/download/details.aspx?id=30474)

来源（CodePlex）：[这里](http://gittf.codeplex.com/SourceControl/list/changesets)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-03-05T10:42:09.330

我敢肯定这是可能的，但它的结构将是非常古怪的戈德堡式的，而且很可能会导致更多的痛苦而不是快乐。我建议选择一个源代码控制系统并使用它。

如果您需要真正的离线支持，那么 git 很棒，但 Windows 支持仍然有点不稳定。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-10-21T17:58:48.663

我们只是决定在工作中这样做。这是一篇关于我们如何做到的博客文章。

[http://blog.lozanotek.com/archive/2009/10/20/git-svn_SvnBridge_and_TFS_Source_Control.aspx](http://blog.lozanotek.com/archive/2009/10/20/git-svn_SvnBridge_and_TFS_Source_Control.aspx)

刚刚在 Github 上也找到了这个项目。这可能有效，但我还没有尝试过。

[http://github.com/spraints/git-tfs](http://github.com/spraints/git-tfs)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-22T20:02:13.710

我可以告诉你这是可能的...

此外，您还可以在这里找到有关具有相同经历的人的一些小细节：http: [//blog.zobie.com/2009/04/using-git-to-avoid-problems-with-tfs/](http://blog.zobie.com/2009/04/using-git-to-avoid-problems-with-tfs/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-01-04T18:44:05.050

与您的问题有点题外话，但我编写了一个 Powershell 脚本，可将 TFS 存储库转换为 Git 存储库。也可能有用。

有关脚本，请参阅[我的 Github 存储库](https://github.com/WilbertOnGithub/TFS2GIT#)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-30T17:52:11.940

TFS 现在支持 git： [tfs news git support](http://tfs.visualstudio.com/en-us/home/news/#git%20support)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-07-10T14:18:03.223

Brian Harry 详细介绍了[Git 存储库](http://blogs.msdn.com/b/bharry/archive/2013/06/19/enterprise-grade-git.aspx)与[Team Foundation Service](http://tfs.visualstudio.com)以及[Team Foundation Server 2013](http://www.microsoft.com/visualstudio/eng/2013-preview)的新集成。他提出了很多有趣的观点，这些观点对企业特别重要，通常对于关心拥有可靠的 Git 存储库托管的团队来说：

> **易于安装**——我们现在让安装 Git 成为安装 TFS 的无缝部分。没有什么可追踪和下载的。无需单独安装和配置。您只需安装 TFS 2013 并自动获得 Git 支持。
> 
> **支持和服务**——因为我们正在运送它，所以我们支持它。这意味着如果您有任何问题，您可以联系我们的支持并获得帮助。您将收到安全更新、热修复、定期更新等，所有这些都与您习惯获取它们的方式相同。无论您使用哪些功能，我们都会努力确保您的 TFS 服务器健康且处于最新状态。
> 
> **高可用性**——从一开始，我们就致力于让 TFS 支持高可用性。我们的 Git 支持也不例外——我们支持您习惯使用 TFS 的所有相同功能 – 负载平衡和集群以确保您的服务器在硬件和软件故障的情况下仍能继续运行，如果您需要确定地理复制即使面对区域中断，您也能保持业务连续性，将在线备份和恢复作为 TFS 的一个组成部分，以便您现有的企业级备份和恢复策略（完整、增量和事务日志）将继续有效（为您提供良好的 RTO和 RPO）。
> 
> **扩展**– 与 TFS 一样，您可以随着需求的增长无缝扩展 TFS 安装。这包括在您需要添加额外容量时横向扩展应用程序层和存储层。
> 
> **易于管理**——我们的 Git 实施完全集成到 TFS 中，因此您的所有管理策略都可以保持不变——服务帐户管理、硬件迁移、软件修补、备份和恢复、监控、权限管理等等。
> 
> **集成身份验证**——我们的 Git 支持完全集成了 Windows Active Directory 身份验证，因此您的所有访问控制、审核等都可以针对一致且可管理的基础架构进行。作为其中的一部分，所有更改都将根据授权身份进行审核，以确保您知道谁进行了每次更改。
> 
> **增强的权限**– 我们已经构建（并且正在构建）一系列额外的存储库和权限管理功能，允许管理员“控制混乱”。第一组包括管理存储库（创建、删除、重命名等）的能力和控制读取、写入和管理权限的存储库级别权限。我们还包括第四个权限，它解决了许多客户在使用 Git 时遇到的一个关键问题——“强制推送”，它有效地使用户能够“更改历史记录”。在我们启用此功能的同时，我们还允许管理员通过权限禁用它。我们现在也在研究额外的权限——比如分支级别的权限，这将使管理员能够控制谁可以创建、删除和使用单个分支。这样，开发人员可以在本地选择任何方式使用分支，但是，
> 
> **ALM 集成**——当然，我们正在将 Git 完全集成到 TFS ALM 工作流中——工作项跟踪、构建自动化、报告、代码审查等等。尚未完成所有集成，但我们将通过 2013 年更新充实它，当我们完成时，我们应该对 Team Foundation 版本控制和 Git 版本控制之间的 ALM 集成功能进行完全对等。
> 
> **本地化**——与我们产品的其他部分一样，我们的 Git 功能将被本地化为与 VS 的其他部分相同的语言，使其更容易被非英语世界的部分地区所接受。

来源： [企业级 Git 存储库](http://blogs.msdn.com/b/bharry/archive/2013/06/19/enterprise-grade-git.aspx)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-10-18T08:27:29.767

我同意 Matt Burke 的说法，我认为[http://git-tfs.com](http://git-tfs.com)是你的选择。但也有一些缺点：

*   您必须提交 2 次，一次在 VS 中，一次在 Git 控制台中

*   如果要将变更集链接到某个项目，则必须了解有关 git-tfs 语句的更多信息（rcheckin，...）

# c# - 后台工作者中止

> ID：614250
> 
> 赞同：9
> 
> 时间：2009-03-05T10:28:13.433
> 
> 标签：c#, winforms, backgroundworker

我最近尝试使用 backgroundworker 而不是“经典”线程，我意识到至少对我而言，它导致的问题多于解决方案。我有一个后台工作程序运行同步读取（在这种情况下从 serialPort）并在 1 个代码行中被阻塞大约 30 秒，然后取消挂起不是解决方案。我看到，如果此时应用程序关闭（使用十字按钮和 Application.Exit()），该进程将永远保持僵尸状态。

我需要一种强制中止或终止后台工作线程的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2010-04-07T03:00:47.377

我把一个（我认为）放在一起可以完成这项工作。请让我知道我是否离开了。这是一个简单的例子，说明它是如何工作的。

```
var backgroundWorker = new BackgroundWorker(){WorkerSupportsCancellation = true};

backgroundWorker.DoWork += (sender, args) =>
         {                 
                 var thisWorker = sender as BackgroundWorker;
                 var _child = new Thread(() =>
                                               {
                                                   //..Do Some Code

                                               });
                 _child .Start();
                 while (_child.IsAlive)
                 {
                     if (thisWorker.CancellationPending)
                     {
                         _child.Abort();
                         args.Cancel = true;
                     }
                     Thread.SpinWait(1);
                 }                 
         };

 backgroundWorker.RunWorkerAsync(parameter);
 //..Do Something...
backgroundWorker.CancelAsync(); 
```

由于后台工作者是线程池的一部分，我们不想中止它。但是我们可以在内部运行一个线程，我们可以允许中止发生。然后 backgroundWorker 基本上会一直运行，直到子线程完成或者我们向它发出信号以终止进程。然后后台工作线程可以返回读池。通常，我会将其包装在一个辅助类中，并通过我希望后台线程运行的委托方法作为参数传入并在子线程中运行。

请有人让我知道我是否将我的头撞在墙上但它似乎工作正常..但这不是线程的问题..当你在不同的时间运行它时你可以获得不同的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-07-06T15:32:51.287

该进程不应成为僵尸进程，因为 BackgroundWorker 线程被标记为“后台”并且应该在 UI 关闭时结束。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-05T11:07:04.230

我不认为 BackgroundWorker 支持杀死线程。取消操作必须在执行该作业的方法中完成。在您的情况下，我认为常规线程将是最佳选择。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-05T11:10:38.213

我不太确定您要完成什么，但也许[SerialPort.DataReceived](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.datareceived.aspx)事件是更好的解决方案？

如果您已经精通线程的使用，我看不出使用 BackgroundWorker 有什么意义。它是为那些一开始就不懂线程的人设计的。

此外，我不喜欢中止线程的想法。感觉很危险，多线程应用程序不需要再冒险了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-17T09:41:57.710

你可以试试这个：

```
 backgroundworker.Dispose();
            backgroundworker = null;
            GC.Collect(); //this helps cleans up ram 
```

# java - Java 库类来处理“回调”的预定执行？

> ID：614257
> 
> 赞同：7
> 
> 时间：2009-03-05T10:29:45.990
> 
> 标签：java, design-patterns, cron, scheduling, scheduled-tasks

我的程序有一个组件——称为调度程序——它允许其他组件注册它们想要被回调的时间点。这应该像 Unix cron 服务一样工作，即您告诉调度程序“在每整整一小时后十分钟通知我”。

我意识到Java中没有真正的回调。

这是我的方法，是否有一个图书馆已经做了这些事情？也可以随意提出改进建议。

注册对调度程序的调用传递：

*   包含小时、分钟、秒、年月、dom、dow 的时间规范，其中每个项目可能未指定，意思是“每小时/分钟等执行一次”。（就像 crontabs 一样）
*   一个包含数据的对象，当调度程序通知调用对象时，它将告诉调用对象做什么。调度程序不处理这些数据，只是将其存储并在收到通知时将其传回。
*   对调用对象的引用

在启动时，或在新的注册请求之后，调度程序从当前系统时间的日历对象开始，并检查数据库中是否有任何条目与该时间点匹配。如果有，则执行它们并重新开始该过程。如果没有，Calendar 对象中的时间将增加一秒并重新检查 entreis。如此重复，直到有一个或多个匹配项。（离散事件模拟）

然后调度程序将记住该时间戳，每秒睡眠和唤醒以检查它是否已经存在。如果它碰巧醒来并且时间已经过去，它会重新开始，同样如果时间到了并且作业已经执行。

* * *

**编辑**：感谢您将我指向 Quartz。然而，我正在寻找更小的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-05T10:33:58.567

查找[石英](http://www.quartz-scheduler.org/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-05T11:10:46.077

如果您的对象确切地知道它们希望执行的各个时间点，那么您可以使用`java.util.concurrent.ScheduledExecutorService`. 然后他们简单地调用：

```
ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(2);
long timeToExecute = ... //read from DB? use CronTrigger?
long delayToExecution = timeToExecute - System.currentTimeMillis();
scheduler.schedule(aRunnable, delayToExecution, TimeUnit.MILLISECONDS); 
```

`Quartz`如果您希望调度程序本身处理诸如“每 5 秒执行一次”之类的功能，或者如果您想要围绕错过执行的复杂行为，或者执行审计跟踪的持久性，您只需要使用。

实际上，您可以简单地重用 Quartz 的`CronTrigger`类来获得“下一个执行时间”。该类是完全独立的，不依赖于从`Quartz`“上下文”中调用。一旦您将下一个执行时间设置为`Date`or ，您就可以像上面那样`long`使用 Java`ScheduledExecutorService`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-05T10:58:31.583

[Quartz](http://www.quartz-scheduler.org/)是该领域的大而明显的强者，但也有一些替代品可供探索。

[Cron4j](http://www.sauronsoftware.it/projects/cron4j/)是一个足够好的库，它比 Quartz 更轻量级。它提供了很好的文档，并会做你想做的事。

可能更有趣的是，如果您想使用更适合 Java 并发库（特别是 Executors 和 ScheduledExecutors）的库，那么[HA-JDBC](http://ha-jdbc.sourceforge.net/)有一个[CronExecutorService](http://ha-jdbc.sourceforge.net/api/net/sf/hajdbc/util/concurrent/CronExecutorService.html)接口，由其[CronThreadPoolExecutor](http://ha-jdbc.sourceforge.net/api/net/sf/hajdbc/util/concurrent/CronThreadPoolExecutor.html)实现。现在，有趣的是，它依赖于 Quartz（提供 CronExpression 类），但我发现两者一起工作比单独使用 Quartz 更好。如果您不想要大的依赖关系，可以很容易地从 Quartz 和 HA-JDBC 中提取少量的类来实现这一点。

因为你想要更小的东西（刚刚注意到你的编辑），所以从 Quartz 和我上面提到的两个 HA-JDBC 类中获取 CronExpression。这样就可以了。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-05T12:31:25.010

如果您的需求很简单，请考虑使用[java.util.Timer](http://java.sun.com/javase/6/docs/api/java/util/Timer.html)：

```
public class TimerDemo {

  public static void main(String[] args) {
    // non-daemon threads prevent termination of VM
    final boolean isDaemon = false;
    Timer timer = new Timer(isDaemon);

    final long threeSeconds = 3 * 1000;
    final long delay = 0;
    timer.schedule(new HelloTask(), delay, threeSeconds);

    Calendar calendar = Calendar.getInstance();
    calendar.add(Calendar.MINUTE, 1);
    Date oneMinuteFromNow = calendar.getTime();

    timer.schedule(new KillTask(timer), oneMinuteFromNow);
  }

  static class HelloTask extends TimerTask {
    @Override
    public void run() {
      System.out.println("Hello");
    }
  }

  static class KillTask extends TimerTask {

    private final Timer timer;

    public KillTask(Timer timer) {
      this.timer = timer;
    }

    @Override
    public void run() {
      System.out.println("Cancelling timer");
      timer.cancel();
    }
  }

} 
```

如前所述[，](https://stackoverflow.com/questions/614257/java-library-class-to-handle-scheduled-execution-of-callbacks/614353#614353)如果您需要，[java.util.concurrent](http://java.sun.com/javase/6/docs/api/java/util/concurrent/package-frame.html)的[ExecutorService提供了更丰富的 API。](http://java.sun.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-04-07T06:48:54.463

我强烈推荐[cron4j](http://www.sauronsoftware.it/projects/cron4j/)（已经提到过）而不是 Quartz，除非你绝对需要 Quartz 的一些更高级和复杂的特性。Cron4j 很好地专注于它应该做的事情，拥有不错的文档，并且不是一个厨房水槽解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-05T10:35:54.617

通常推荐使用[Quartz 调度器。](http://www.quartz-scheduler.org/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-07T07:54:39.743

不敢相信 java.util.Timer 被选为答案。石英确实是一个更好的选择。

与 java.util.Timer 相比，quartz 的一大优势在于，使用quartz，作业可以存储在数据库中。结果，一个 jvm 可以调度，另一个可以执行。此外（显然）该请求在 jvm 重新启动后仍然存在。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-02-11T15:57:32.883

> 可能更有趣的是，如果您想使用更适合 Java 并发库（特别是 Executors 和 ScheduledExecutors）的库，那么 HA-JDBC 有一个 CronExecutorService 接口，由其 CronThreadPoolExecutor 实现。现在，有趣的是，它依赖于 Quartz（提供 CronExpression 类），但我发现两者一起工作比单独使用 Quartz 更好。如果您不想要大的依赖关系，可以很容易地从 Quartz 和 HA-JDBC 中提取少量的类来实现这一点。

我只是想说我尝试提取这些类，并且成功了！我需要这三个类：

*   CronExpression（石英）
*   CronThreadPoolExecutor (ha-jdbc)
*   DaemonThreadFactory (ha-jdbc)

我只需要做这些小调整：

*   从 CronThreadPoolExecutor 中删除记录器（它已创建但从未使用过）
*   将常量 YEAR_TO_GIVEUP_SCHEDULING_AT 从 CronTrigger 移动到 CronExpression

我很高兴我没有陷入纠缠不清的依赖关系中。恭喜班级作者！

它一直像冠军一样工作。

# javascript - 像 Facebook 和 Orkut 相册照片中的照片标记？

> ID：614264
> 
> 赞同：6
> 
> 时间：2009-03-05T10:32:16.560
> 
> 标签：javascript, jquery, web-applications, jquery-plugins

是否有 jQuery 库或任何关于在 Facebook 和 Orkut 相册中实现照片标记的线索？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-08T00:58:52.823

嗯，我发现新版本的[Img Notes](http://www.sanisoft.com/blog/2009/01/23/img-notes-v02-a-couple-of-bug-fixes-and-some-more/)似乎完全符合您的要求。

查看[演示](http://www.sanisoft.com/downloads/imgnotes-0.2/example.html)。它允许您轻松添加标签注释并使用 JQuery 显示它们。他还依赖于[imgAreaSelect](http://odyniec.net/projects/imgareaselect/) jquery 插件来添加注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-05T10:36:15.677

你可以试试[Jcrop](http://deepliquid.com/projects/Jcrop/demos.php)或[imgAreaSelect](http://odyniec.net/projects/imgareaselect/)。不是 100% 与 Facebook 相同的行为，但经过一些调整，这应该是可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-22T00:22:58.017

我没有找到任何适合这个目的的插件。因此，我最终为自己编写了一个小插件，以根据通过 XML 文件加载的坐标来标记图像上的区域。

需要的基本代码是：

```
<div id="imageholder">

 <!-- The main image -->
 <img src="<link to image file>" alt="Image">

 <!-- The grid tags -->
 <div class="gridtag" style="bottom: 100px; left: 106px; height: 41px; width: 41px;"/>
 <div class="gridtag" style="bottom: 300px; left: 56px; height: 100px; width: 56px;"/>

 <div class="gridtag" ...

</div> 
```

以及所需的基本 CSS 样式：

```
#imageholder{
 height:500px;
 width:497px;
 position:relative;
}
div.gridtag {
 border:1px solid #F0F0F0;
 display:block;
 position:absolute;
 z-index:3;
} 
```

在上面，“gridtags”类的 div 是使用 jQuery 通过 XML 或 JSON 添加的，通过在这个 div 上绑定事件，我们可以在 Orkut 中进行类似的照片标记。

PS：这只是照片标记的一侧，即。如果我们已经有了坐标，我们可以在图像上标记并添加点击事件，这正是我想要的部分。:) 你们必须编写代码来进行照片标记的标记部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-07-03T10:20:18.773

facebook 中类似标签功能的一个很好且复杂的示例是 [Talking Pictures](http://apps.facebook.com/talking_pictures/)，它是一个 facebook 应用程序。

# c# - 线程池线程的异常

> ID：614266
> 
> 赞同：7
> 
> 时间：2009-03-05T10:33:52.920
> 
> 标签：c#, multithreading, threadpool

有关的：

*   [如何从 ThreadPool.QueueUserWorkItem 中捕获异常？](https://stackoverflow.com/questions/753841)
*   [.Net ThreadPool 线程的异常](https://stackoverflow.com/questions/668265/exceptions-on-net-threadpool-threads)

* * *

如果某个方法抛出了由 ThreadPool.QueueUserWorkItem 方法调用的异常，该异常将在哪里抛出？还是只会被吃掉？

我的意思是它永远不会被扔到调用线程上，对吗？

* * *

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-05T10:41:54.867

不，异常永远不会传播到另一个线程。它最终会使线程崩溃，并被运行时捕获。此时，运行时会引发 AppDomain.UnhandledException 事件，在该事件中可以观察到异常。

[您可以在此处](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)阅读有关此内容的更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-05T10:43:29.793

如果未在您的线程回调中捕获该异常（被吞下的 ThreadAbortException 和 AppDomainUnloadedException 除外），则该异常将使您的应用程序崩溃。请注意，在 .NET 1.1 中，所有异常都被吞没了。这种行为在 .NET 2.0 中发生了变化。

我找到了这个链接：http: [//msdn.microsoft.com/en-us/library/ms228965.aspx](http://msdn.microsoft.com/en-us/library/ms228965.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-05T10:41:41.920

未处理的异常将在 .Net 2.0 或更高版本中关闭应用程序。QUWI 代码中的异常不会被捕获或转移到另一个线程。

参见例如 [https://blog.codinghorror.com/improved-unhandled-exception-behavior-in-net-20/](https://blog.codinghorror.com/improved-unhandled-exception-behavior-in-net-20/)

# javascript - JavascriptEngine 的 Javascript Array .length 属性/方法

> ID：614279
> 
> 赞同：0
> 
> 时间：2009-03-05T10:39:47.993
> 
> 标签：javascript, arrays

我只是好奇这是如何由浏览器直接完成的。我听说 Javascript 引擎中 Array 的 .length 属性实际上使用了不可见的 setter 和 getter 来实现 ECMA-s 标准的功能，该标准说：“每当更改长度属性时，名称为数组索引的每个属性都不会更小比新长度自动删除”）。我知道在这种情况下需要 setter，但是 getter 呢？我们真的需要调用原生 getter 来获取这个值吗？或者这只是在某处理解 Javascript 引擎的一些错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T11:22:58.870

属性要么作为字段实现，要么作为 setter/getter 方法实现。

如果它是一个字段，那么它只是一个值，当设置值时，不会发生任何事情，只是值发生了变化。

如果您有一个 setter 方法以便在设置值时执行更多操作，那么您也有一个 getter 方法可以匹配，即使 getter 方法除了返回值之外没有做任何其他事情。您不想混合实现属性的两种方式，只是在任一方向上都简单得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T10:46:45.153

看看[**defineGetter**和**defineSetter**](https://developer.mozilla.org/En/Core_JavaScript_1.5_Guide:Creating_New_Objects:Defining_Getters_and_Setters)。这可能是 Firefox 的做法，但我不确定其他浏览器。

真的有关系吗？据我所知，.length 可以在 C++ 中实现。它可能是 javascript 引擎的内置部分，无论如何都不能在 javascript 中真正实现。作为用户，你需要知道的只是长度保存了数组的长度，如果你改变它，数组的长度就会改变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-05T10:48:23.387

首先，JavaScript Array 对象有一个函数属性 .length() ，它将返回数组实例的当前长度。Getter 和 setter 可以在 JavaScript 1.6 中定义（我认为），但它没有被广泛采用，而且我没有看到太多使用它。getter 和返回值的函数之间的唯一区别是语法。引擎可以根据分配的方向调用 Getter 和 setter。

```
var obj = {myProp:0}.myProp; // getting
obj.myProp = 1; // setting 
```

上面的例子有点时髦，但我想你明白了......

# java - 使用 JEditorPane 及其 setPage 方法

> ID：614297
> 
> 赞同：4
> 
> 时间：2009-03-05T10:48:10.623
> 
> 标签：java, user-interface, jeditorpane

我有一个显示 HTML 文件的编辑器窗格。当我要求它执行一次时，它会很好地显示 HTML 文件。然后，我对我的 HTML 文件进行更改并使用该`setPage`方法打印更新的 HTML 文件，但即使 HTML 文件已更改，它也不会这样做。

这是编辑器窗格的问题还是我的代码有问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-05T17:40:35.190

查看[JavaDoc for`setPage`](http://java.sun.com/javase/6/docs/api/javax/swing/JEditorPane.html#setPage(java.net.URL))，我看到以下内容：

> 如果所需的 URL 是当前正在显示的 URL，则不会重新加载文档。要强制重新加载文档，必须清除文档的流描述属性。以下代码显示了如何做到这一点：
> 
> ```
> Document doc = jEditorPane.getDocument();
> doc.putProperty(Document.StreamDescriptionProperty, null); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T11:20:54.367

我已经做了一些测试，我已经重现了这种行为。当我调用 setPage 并将先前在同一方法中传递的相同 URL 作为参数传递时，JEditorPane 似乎忽略了该调用。

一个简单的解决方法：测试新的 Url 是否与前一个相同。如果是，请以不同的方式格式化 URL。例如，在末尾添加 %20。新的 Url 实际上是指同一个页面，但 JEditorPane 会将其视为新的，并且会正确地重新加载它。

# c++ - C++ 头文件顺序

> ID：614302
> 
> 赞同：35
> 
> 时间：2009-03-05T10:49:40.230
> 
> 标签：c++, header, include, code-organization

在 header/cpp 文件中应该以什么顺序声明 headers？显然，后续标头所需的那些标头应该更早，并且特定于类的标头应该在 cpp 范围内而不是标头范围内，但是是否有固定的顺序约定/最佳实践？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2009-03-05T10:58:06.903

在头文件中，您必须包含所有头文件才能使其可编译。并且不要忘记使用前向声明而不是某些标题。

在源文件中：

*   对应的头文件
*   必要的项目标题
*   3rd 方库标题
*   标准库头文件
*   系统头文件

按照这个顺序，您将不会错过任何忘记自己包含库的头文件。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-03-05T10:56:17.500

良好做法：每个 .h 文件都应该有一个 .cpp，其中首先包含该 .h，然后再包含其他任何内容。这证明任何 .h 文件都可以放在首位。

即使标头不需要实现，您也可以创建一个仅包含该 .h 文件的 .cpp 文件，而不包含其他任何内容。

这意味着您可以以任何您喜欢的方式回答您的问题。将它们包含在什么顺序中并不重要。

如需进一步的重要提示，请尝试这本书：[Large-Scale C++ Software Design](https://rads.stackoverflow.com/amzn/click/com/0201633620) - 可惜它太贵了，但它实际上是 C++ 源代码布局的生存指南。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-05T11:00:24.307

在头文件中，我倾向于首先放置标准头，然后是我自己的头（两个列表都按字母顺序排列）。在实现文件中，我首先放置相应的标头（如果有），然后是标准标头和其他依赖标头。

顺序无关紧要，除非您大量使用宏和`#define`; 在这种情况下，您必须检查您定义的宏是否不会替换先前包含的宏（当然，除非这是您想要的）。

关于此声明

> 后续标题需要的那些应该更早

标头不应该依赖于它之前包含的其他标头！如果它需要标题，它只包含它们。标头保护将防止多重包含：

```
#ifndef FOO_HEADER_H
#define FOO_HEADER_H
...
#endif 
```

* * *

*编辑*

由于我写了这个答案，我改变了在我的代码中排序包含指令的方式。现在，我尝试始终将标头按标准化的递增顺序排列，因此我的项目的标头排在第一位，然后是 3rd 方库标头，然后是标准标头。

例如，如果我的一个文件使用我编写的库、Qt、Boost 和标准库，我将按如下方式订购包含：

```
//foo.cpp
#include "foo.hpp"

#include <my_library.hpp>
// other headers related to my_library

#include <QtCore/qalgorithms.h>
// other Qt headers

#include <boost/format.hpp> // Boost is arguably more standard than Qt
// other boost headers

#include <algorithms>
// other standard algorithms 
```

我这样做的原因是为了检测我自己的标头中缺少的依赖项：让我们假设例如`my_library.hpp`使用`std::copy`，但不包括`<algorithm>`. 如果我在`<algorithm>`in之后包含它`foo.cpp`，那么这个缺失的依赖项将不会被注意到。相反，按照我刚才提出的命令，编译器会报错`std::copy`没有被声明，让我更正`my_library.hpp`.

在每个“库”组中，我尝试保持包含指令按字母顺序排列，以便更轻松地找到它们。

在旁注中，一个好的做法也是最大程度地限制头文件之间的依赖关系。文件应包含尽可能少的标头，尤其是标头文件。事实上，你包含的头文件越多，当某些事情发生变化时，需要重新编译的代码就越多。限制这些依赖关系的一个好方法是使用前向声明，这在头文件中通常就足够了（请参阅[何时可以使用前向声明？](https://stackoverflow.com/q/553682/20984)）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-05T11:37:57.120

[Google C++ 样式指南、名称和包含顺序](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Names_and_Order_of_Includes)：

> 在 dir/foo.cc 中，其主要目的是实现或测试 dir2/foo2.h 中的内容，按如下顺序排列您的包含：
> 
> *   dir2/foo2.h（首选位置 - 请参阅下面的详细信息）。
> *   C 系统文件。
> *   C++ 系统文件。
> *   其他库的 .h 文件。
> *   您项目的 .h 文件。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-05T10:50:52.520

我曾经按字母顺序排列它们（更容易找到）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-05T11:13:52.933

“如何”并不明显，但“是什么”是显而易见的。您的目标是确保包含头文件的顺序不重要（我的意思是“从不！”）。

一个很好的帮助是在构建仅包含其中一个的 cpp 文件（每个头文件一个）时测试头文件是否编译。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-05T10:58:11.473

对于 .cpp 文件，您应该包含类的标头或您首先要实现的任何内容，这样您就可以捕捉到该标头缺少某些包含的情况。之后，大多数编码指南倾向于首先包含系统标头，其次是项目标头，例如[Google C++ Style Guide](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Names_and_Order_of_Includes)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-05T10:53:57.803

这是一个依赖关系，很大程度上取决于您在我们的标题中放置的内容。一个事实是，您可能对此非常臭名昭著并最小化以保持您的包含严格，但您最终会遇到您想要使用包含防护的情况。

```
#ifndef MY_HEADER_H
#define MY_HEADER_H
//...
#endif 
```

问题在开始时并不那么明显，但随着软件复杂性的增加，您的依赖项也会增加。您可以做得很好，并且对此很聪明，但是较大的 C++ 项目通常充满了包含。你可以尝试，但你只能做这么多。所以要勤奋，想想你的包括，是的！但是你肯定会在某些时候产生循环依赖，这就是你需要包含保护的原因。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-05T10:58:37.493

如果一个标头需要其他标头，那么它只是将它们包含在该标头中。

尝试构造您的代码，以便您传递指针或引用并在可能的地方前向声明。

在实现中，应该首先列出定义它的标头（Visual Studio 除外，如果您使用的是 pch，则 stdafx 将首先出现）。

我通常根据需要列出它们。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2009-03-05T11:02:40.840

我发现以下约定最有用：

模块.cpp：

```
// this is the header used to trigger inclusion of precompiled headers
#include <precompiled.h> 
// this ensures that anything that includes "module.h" works
#include "module.h"
// other headers, usually system headers, the project 
```

重要的是将模块的头文件作为第一个非预编译头文件。这确保了“module.h”没有意外的依赖。

如果您正在处理一个磁盘访问时间很慢的大型项目，我已经看到这种风格用于减少构建时间：

模块.cpp：

```
// this is the header used to trigger inclusion of precompiled headers
#include <precompiled.h> 
// this ensures that anything that includes "module.h" works
#include "module.h"
// other headers, usually system headers, the project
#if !defined _OTHER_MODULE_GUARD_
#include "other_module.h"
#endif 

#if !defined _ANOTHER_MODULE_GUARD_
#include "another_module.h"
#endif 
```

这有点冗长，但确实节省了磁盘查找，因为如果已经包含标题，则不会搜索/打开标题。如果没有保护检查，编译器将寻找并打开头文件，解析整个文件以最终`#ifdef`将整个文件取出。

# ruby - 理想的 Ruby 项目结构

> ID：614309
> 
> 赞同：130
> 
> 时间：2009-03-05T10:52:11.253
> 
> 标签：ruby, project-structure

我正在对 ruby​​（非 Rails/merb/etc）项目的理想项目结构进行概述/澄清。我猜它遵循

```
app/
  bin/                  #Files for command-line execution
  lib/
    appname.rb
    appname/            #Classes and so on
  Rakefile              #Running tests
  README
  test,spec,features/   #Whichever means of testing you go for
  appname.gemspec       #If it's a gem 
```

我有什么问题吗？我错过了哪些部分？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2009-03-05T11:20:58.690

我认为这是非常正确的。默认情况下，Rubygems 会将 lib 目录添加到加载路径中，但是您可以使用 $: 变量将您想要的任何目录推送到该目录中。IE

```
$:.push File.expand_path(File.dirname(__FILE__) + '/../surfcompstuff') 
```

这意味着当您说`surfer.rb`在该目录中时，您可以`require "surfer"`在任何地方找到该文件。

此外，按照惯例，类和单例获取文件，模块获取目录。例如，如果您有如下所示的`LolCatz`模块和`LolCatz::Moar`类：

```
lib/
  appname.rb
  lolcatz/
    moar.rb 
```

这就是为什么有一个 lib/appname 文件夹的原因，因为大多数库都在`appname`命名空间中。

此外，如果您尝试运行该命令`newgem --simple [projectname]`，它将快速为您生成一个脚手架，其中仅包含 Ruby 项目（以及扩展的 Ruby Gem）的基本要素。我知道还有其他工具可以做到这一点，但 newgem 很常见。我通常会摆脱 TODO 文件和所有脚本内容。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-07-25T09:35:37.867

[请参阅http://guides.rubygems.org/what-is-a-gem/](http://guides.rubygems.org/what-is-a-gem/)中的以下示例

```
 % tree freewill
    freewill/
    ├── bin/
    │   └── freewill
    ├── lib/
    │   └── freewill.rb
    ├── test/
    │   └── test_freewill.rb
    ├── README
    ├── Rakefile
    └── freewill.gemspec 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-06T05:32:55.897

我试图模仿 Rails 项目结构，因为我的团队通常与 Rails 打交道，他们会比其他配置更好地理解该结构。约定优于配置 - 从 Rails 流血。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-16T11:15:51.377

如果您使用 bundler，运行此命令`bundle gem app_name`将为您提供相同的目录结构。

如果你想使用 rspec 而不是单元测试，你可以运行这个命令`rspec --init` （只要确保你`cd app_name`先）

# memory - Powershell 内存使用情况

> ID：614317
> 
> 赞同：2
> 
> 时间：2009-03-05T10:56:30.963
> 
> 标签：memory, powershell

我对Powershell有点菜鸟所以请不要责备我:-)所以我有一些相当大的日志文件（600mb）需要处理，我的脚本基本上删除了那些包含“收到消息”的行然后标记那些行并将一些标记输出到输出文件。

脚本的逻辑很好（尽管我确信它可能更有效）但问题是当我向输出文件写入行并且文件随后变大时，powershell 使用的内存量也增加到了内存耗尽。

谁能建议我如何阻止这种情况发生？我想过将日志分解成一个只有 10mb 的临时文件，然后在临时文件上进行处理？

这是我的代码，你们可以提供的任何帮助都会很棒:-)

```
Get-Date | Add-Content -Path d:\scripting\logparser\testoutput.txt

$a = Get-Content D:\scripting\logparser\importsample.txt 

foreach($l in $a){
#$l | Select-String -Pattern "Message Received." | Add-Content -Path d:\scripting\logparser\testoutput.txt
if
    (($l | Select-String -Pattern "Message Received." -Quiet) -eq "True")

    {
    #Add-Content -Path d:\scripting\logparser\testoutput.txt -value $l
    $var1,$var2,$var3,$var4,$var5,$var6,$var7,$var8,$var9,$var10,$var11,$var12,$var13,$var14,$var15,$var16,$var17,$var18,$var19,$var20 = [regex]::split($l,'\s+')
    Add-Content -Path d:\scripting\logparser\testoutput.txt -value $var1" "$var2" "$var3" "$var4" "$var16" "$var18

    }
else
    {}
}   
Get-Date | Add-Content -Path d:\scripting\logparser\testoutput.txt 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-05T11:07:38.627

如果您在管道中执行所有操作，则一次只需要一个对象（在您的情况下为文件中的一行）需要在内存中。

```
Get-Content $inputFile | Where-Object { $_ -match "Message Received" } |
  foreach-object -process {
  $fields = [regex]::split($_,'\s+') # An array is created
  Add-Content -path $outputFile -value [String]::Join(" ", $fields[0,1,2,3,15,17])
} 
```

创建一个由 的给定索引组成的`$fields[0,1,2,3,15,17]`数组`$fields`。

这也可以在单个管道中使用表达式而不是传递给 Select-Object 的属性名称来完成，但不太清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-02-02T19:59:34.330

一个工作的PowerShell示例：

```
$csvFile = "c:\test.txt"

$file_reader = [System.IO.File]::OpenText($csvFile)
$row = "";
while(($row = $file_reader.ReadLine()) -ne $null) 
{ 
    # do something with '$row' 
    Write-Host row: $row
}
$file_reader.Close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T11:06:18.333

您实际上是将整个日志文件存储在内存中，而不是按顺序逐位访问它。

假设您的日志文件对于您一次读取的每个条目（可能是新行）都有一些内部分隔符，而不是在内存中保留超过绝对必要的内容。

您将无法依赖内置的 PowerShell 东西，因为它很愚蠢。

您必须向我的代码示例道歉，我的 PowerShell 有点生锈。

```
var $reader = Create-Object "System.IO.StreamReader" testoutput.txt
var $s = ""
while(($s = reader.ReadLine())!=null)
{ 
    // do something with '$s' 
    // which would contain individual log entries.
}
$reader.Close() 
```

# c++ - 警告 LNK4099：切换到 vista 后未找到 PDB 'vc80.pdb'

> ID：614325
> 
> 赞同：4
> 
> 时间：2009-03-05T10:58:21.723
> 
> 标签：c++, visual-studio-2005, windows-vista, windows-xp, warnings

从旧 XP 移至新 vista PC 后，我在旧项目的 VS2005 中收到以下几个警告：

UnitTest++.vsnet2005.lib(TestRunner.obj)：警告 LNK4099：在 'c:\projects\blah.lib' 或 'c:\projects\blah\debug\vc80.pdb' 中找不到 PDB 'vc80.pdb' ; 链接对象好像没有调试信息

我知道这个警告可以忽略，但我不喜欢警告。这些警告都与我静态链接到的第三方库（UnitTest++）有关。我看不出这与 vista 有何关系，但两台 PC 在构建后在相同位置具有相同数量的 vc80.pdb 文件，因此我对如何解决此问题感到困惑。欢迎任何想法。

编辑：好的，它已经消失了。以防万一有人遇到任何类似的事情，我做了三件事，但不确定是什么点击了它：

1：复制lib旁边的任何旧的vc80.pdb，构建它，然后删除pdb

2：将properties->c/c++->debug information format从edit and continue改为database only，构建，再切换回来

3：重建第三方库（这似乎很可能，但我敢肯定这是我昨天做的第一件事没有效果......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-05T11:30:22.863

您是否尝试过清理/重建 UnitTest++ 库项目（如果它是构建表单源）？

# html - HTML 还是 RTF？

> ID：614329
> 
> 赞同：8
> 
> 时间：2009-03-05T10:59:20.113
> 
> 标签：html, delphi, rtf, page-layout

在我的 Delphi 程序中，我想显示应用程序生成的一些信息。没有什么花哨的，只有 2 列文本，部分单词用颜色编码。
我想我基本上有两个选择：

1.  TWebbrowser 中的 HTML
2.  TRichEdit 中的 RTF。

HTML 更标准，但似乎加载速度较慢，我不得不处理[The Annoying Click Sound](https://stackoverflow.com/questions/613943)。如今，RTF 仍然是一个不错的选择吗？

**编辑：**
来自 dangph 的好问题：“生成的文档会怎样？”
文件在查看后将被丢弃。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-05T11:06:51.280

我会投票给 HTML。

我认为它更面向未来。速度与我无关。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-05T12:22:49.057

HTML 或 RTF 的问题可能无关紧要。如果它们仅用于显示目的，则文件格式无关紧要。它实际上只是一种内部表示。（是否有任何文件甚至被保存到磁盘？）我认为要问的问题是哪一个以最少的工作量解决了问题。

我会稍微担心浏览器控件一直在变化。我怀疑richedit控件会发生很大变化。我会倾向于 Richedit 控件，因为我认为它不会出错。但这两种方式可能都不是什么大问题。

你有没有考虑过做一个ownerdraw TListView？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-05T11:21:57.487

我也会使用 HTML。此外，您刚刚得到了 TWebBrowser 中[点击声音的答案](https://stackoverflow.com/questions/613943/annoying-click-sound-in-twebbrowser)。

如果您不想使用 TWebBrowser，请查看 Dave Baldwin 的免费[HTML 显示组件](http://pbear.com/)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-05T12:42:58.367

我也会投票给 HTML。

我们前段时间启动了一个应用程序......我们想要

> 显示应用程序生成的一些信息。没什么好看的，只是...

（你听到铃声了吗？？？）

然后我们想显示更多信息并对其进行更多样式设置…………有人认为 RTF 已经不够了，但是为了向后兼容，我们转向 MS Word over OLE-Server。这就是谈论性能的结束。

我认为如果我们在 HTML 中做到这一点，现在会快得多。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-03-05T16:03:30.023

RTF 更容易处理，因为 TRichEdit 控件是每个 Windows 安装的一部分，并且比 TWebBrowser（它基本上将 Internet Explorer 的 ActiveX 版本嵌入到您的应用程序中）具有更少的开销。

TRichEdit 也更容易用于以编程方式添加文本和格式。使用 SelStart 和 SelLength 以及文本属性，使添加粗体和斜体、设置不同的字体等变得简单。而且，正如 Re0sless 所说，TRichEdit 可以轻松打印，而 TWebBrowser 使打印变得更加复杂。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-05T13:46:37.467

我会投票给 RTF，因为我不喜欢 TWebBrowser 使用 Internet Explorer 的事实，因为过去我们在紧密锁定的计算机上遇到过这个问题。

此外，TRichEdit 还内置了一个打印方法，您必须在其中进行各种操作才能让 TWebBrowser 打印。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2010-01-17T12:13:26.147

似乎还没有人提到报告组件。是的，它现在有点矫枉过正，但如果你仍然使用它（也许你已经在你的应用程序中做了一些报告，所以组件已经包含在内）你可以只显示预览并允许打印/导出为 pdf稍后，如果它有任何意义。此外，如果您后来决定想要一个更精美的显示器，那么没有什么能阻止您。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-05T11:07:25.103

如果 HTML 和 RTF 都不能满足您的需求，您还可以使用支持着色文字的开源文本/编辑组件或基于 Delphi 组件创建自己的编辑组件。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-05T17:01:29.387

HTML 浏览器的另一个替代方案是“[嵌入式 Web 浏览器](http://www.bsalsa.com/product.html)”组件，我使用了一些项目来向用户显示 html 文档。您可以完全控制嵌入式浏览器，加载页面时我不记得有任何点击。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-03-21T18:21:05.813

我也投票给 HTML

RTF 只对它的编辑器有用，否则你最好去标准。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-03-21T18:00:14.087

RTF 提供了一些有用的文本编辑选项，例如 HTML 中没有的水平制表符。自动超链接检测也是一个不错的附加功能。但我想如果不需要这些功能，我会更喜欢 HTML。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2011-11-16T08:24:43.793

我投票支持 HTML。

*   更容易以编程方式生成。
*   广泛支持。
*   由于您不需要所见即所得的功能，我认为 HTML 的优势胜过 RTF。此外，如果需要导出生成的数据以进行进一步的类似 WP 的编辑，请记住主要的文字处理器可以打开和转换 HTML 文件。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2011-11-16T17:38:52.350

使用 HTML，但通过[Henri Gourvest的“](http://www.progdigy.com/?page_id=83) [Delphi Wrapper for **Chromium Embedded**](http://code.google.com/p/delphichromiumembedded/) ” ，Chromium Embedded 使用了为[Google Chrome](http://www.google.com/chrome)提供支持的核心。

不要使用 TWebBrowser，我正在遭受所有使用 IE 网络控制的程序的困扰 - 我的 22 英寸显示器上的字体太小，分辨率为 1920x1080，我使用的是 Windows 7，我的系统的 DPI 是 150%（XP 模式），我尝试了一切来调整试图解决这个问题，没有运气......

# dynamics-crm - 如何使用 Web 服务链接 CRM 4.0 查询中的实体并从两者返回列？

> ID：614331
> 
> 赞同：2
> 
> 时间：2009-03-05T10:59:44.420
> 
> 标签：dynamics-crm, dynamics-crm-4

我有一个需要针对 CRM 执行的查询。它相当于 SQL 中的以下内容：

```
SELECT A.*, B.*
FROM Table1 A INNER JOIN Table2 B
ON A.ID = B.ID 
```

我创建了一个查询并添加了如下链接：

```
link.JoinOperator = JoinOperator.Inner;
link.LinkFromEntityName = EntityName.new_Table1.ToString();
link.LinkFromAttributeName = "new_Table1ID";
link.LinkToEntityName = EntityName.new_Table2.ToString();
link.LinkToAttributeName = "new_Table2ID";
query.LinkEntities = new LinkEntity[] { link }; 
```

但是，它只返回 new_Table1 中的列。

有没有办法以这种方式链接并从两个实体返回列，而无需创建两个查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-05T17:38:34.320

QueryExpression 不支持这一点。您需要使用 Fetch XML。

从 SDK 中的“使用 FetchXML” - 你最终会得到这样的东西：

```
<fetch mapping='logical'>
      <entity name='account'>
<attribute name='accountid'/>
<attribute name='name'/>
<link-entity name='systemuser' to='owninguser'>
   <filter type='and'>
      <condition attribute='lastname' operator='ne' value='Cannon' />
   </filter>
   <attribute name='name' />
</link-entity>
      </entity>
   </fetch> 
```

如果您还没有使用过 FetchXML，我强烈推荐[http://www.stunnware.com/?area=products&group=swtools4](http://www.stunnware.com/?area=products&group=swtools4)来构建和测试 FetchXML。这样您就可以预览您的 Result XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-08T09:40:43.333

您也可以使用[LinqtoCRM](http://codeplex.com/linqtocrm)。检索系统用户角色的查询如下所示：

```
var res = from u in p.Linq()
        join sr in p.Linq() on u.systemuserid.Value equals sr.systemuserid.Value
        join r in p.Linq() on sr.roleid.Value equals r.roleid.Value
        select new { u.fullname, r.name }; 
```

这适用于正常和（使用 CRMMetal）多对多关系。[您可以在这里](http://friism.com/querying-relationships-with-linqtocrm)观看网络广播。

# ruby - 映射一个数组，只修改匹配某个条件的元素

> ID：614335
> 
> 赞同：19
> 
> 时间：2009-03-05T11:03:13.803
> 
> 标签：ruby, map, iteration, collect

*在 Ruby 中，以修改某些元素而其他元素保持不变*的方式映射数组的最具表现力的方法是什么？

这是一种直接的方法：

```
old_a = ["a", "b", "c"]                         # ["a", "b", "c"]
new_a = old_a.map { |x| (x=="b" ? x+"!" : x) }  # ["a", "b!", "c"] 
```

如果还不够，当然可以省略“单独”的情况：

```
new_a = old_a.map { |x| x+"!" if x=="b" }       # [nil, "b!", nil] 
```

我想要的是这样的：

```
new_a = old_a.map_modifying_only_elements_where (Proc.new {|x| x == "b"}) 
        do |y|
          y + "!"
        end
# ["a", "b!", "c"] 
```

在 Ruby 中是否有一些很好的方法可以做到这一点（或者 Rails 有一些我还没有找到的便捷方法）？

* * *

谢谢大家的回复。虽然你们集体说服我最好只`map`与三元运算符一起使用，但你们中的一些人发布了非常有趣的答案！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-03-09T10:35:15.537

因为数组是指针，所以这也有效：

```
a = ["hello", "to", "you", "dude"]
a.select {|i| i.length <= 3 }.each {|i| i << "!" }

puts a.inspect
# => ["hello", "to!", "you!", "dude"] 
```

在循环中，确保您使用的方法可以更改对象，而不是创建新对象。例如`upcase!`，与 相比`upcase`。

确切的程序取决于您要达到的目标。用 foo-bar 的例子很难确定一个明确的答案。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-05T21:54:12.707

```
old_a.map! { |a| a == "b" ? a + "!" : a } 
```

给

```
=> ["a", "b!", "c"] 
```

`map!`就地修改接收器，`old_a`现在返回的数组也是如此。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-05T14:59:43.547

我同意地图声明是好的。它清晰简单，任何人都可以轻松维护。

如果你想要更复杂的东西，这个怎么样？

```
module Enumerable
  def enum_filter(&filter)
    FilteredEnumerator.new(self, &filter)
  end
  alias :on :enum_filter
  class FilteredEnumerator
    include Enumerable
    def initialize(enum, &filter)
      @enum, @filter = enum, filter
      if enum.respond_to?(:map!)
        def self.map!
          @enum.map! { |elt| @filter[elt] ? yield(elt) : elt }
        end
      end
    end
    def each
      @enum.each { |elt| yield(elt) if @filter[elt] }
    end
    def each_with_index
      @enum.each_with_index { |elt,index| yield(elt, index) if @filter[elt] } 
    end
    def map
      @enum.map { |elt| @filter[elt] ? yield(elt) : elt }
    end
    alias :and :enum_filter
    def or
      FilteredEnumerator.new(@enum) { |elt| @filter[elt] || yield(elt) }
    end
  end
end

%w{ a b c }.on { |x| x == 'b' }.map { |x| x + "!" } #=> [ 'a', 'b!', 'c' ]

require 'set'
Set.new(%w{ He likes dogs}).on { |x| x.length % 2 == 0 }.map! { |x| x.reverse } #=> #<Set: {"likes", "eH", "sgod"}>

('a'..'z').on { |x| x[0] % 6 == 0 }.or { |x| 'aeiouy'[x] }.to_a.join #=> "aefiloruxy" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-05T13:50:27.877

你的`map`解决方案是最好的。我不确定您为什么认为 map_modifying_only_elements_where 更好。使用`map`更干净，更简洁，并且不需要多个块。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-04T10:18:15.263

一个班轮：

```
["a", "b", "c"].inject([]) { |cumulative, i| i == "b" ? (cumulative << "#{i}!") : cumulative } 
```

在上面的代码中，您从 [] “累积”开始。当您通过枚举器（在我们的例子中是数组，[“a”，“b”，“c”]）进行枚举时，累积以及“当前”项被传递到我们的块（|累积，i|）和我们的块执行的结果被分配给累积。我上面所做的是在项目不是“b”并附加“b！”时保持累积不变。到累积数组并在它是 b 时返回它。

上面有一个使用 的答案`select`，这是最简单的方法（并记住）。

您可以结合`select`使用`map`以实现您正在寻找的内容：

```
 arr = ["a", "b", "c"].select { |i| i == "b" }.map { |i| "#{i}!" }
 => ["b!"] 
```

在`select`块内，您指定要“选择”的元素的条件。这将返回一个数组。您可以在结果数组上调用“map”以将感叹号附加到它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-08-02T09:38:33.480

**红宝石 2.7+**

*从 2.7 开始，有一个明确的答案。*

Ruby 2.7 正是`filter_map`为此目的而引入的。它是惯用的和高性能的，我希望它很快就会成为常态。

例如：

```
numbers = [1, 2, 5, 8, 10, 13]
enum.filter_map { |i| i * 2 if i.even? }
# => [4, 16, 20] 
```

这是一个[很好的阅读主题](https://blog.saeloun.com/2019/05/25/ruby-2-7-enumerable-filter-map.html)。

希望这对某人有用！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-05T21:10:58.117

如果您不需要旧数组，我更喜欢地图！在这种情况下，因为您可以使用 ! 表示您正在更改数组的方法。

```
self.answers.map!{ |x| (x=="b" ? x+"!" : x) } 
```

我更喜欢这个：

```
new_map = self.old_map{ |x| (x=="b" ? x+"!" : x) } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-05T22:20:11.430

它有几行长，但这里有一个替代方案：

```
oa = %w| a b c |
na = oa.partition { |a| a == 'b' }
na.first.collect! { |a| a+'!' }
na.flatten! #Add .sort! here if you wish
p na
# >> ["b!", "a", "c"] 
```

在我看来，三元的收集似乎是最好的。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-12-07T22:05:54.810

我发现实现这一目标的最佳方法是使用`tap`

```
arr = [1,2,3,4,5,6]
[].tap do |a|
  arr.each { |x| a << x if x%2==0 }
end 
```

# c# - 检查服务器是否可用

> ID：614336
> 
> 赞同：11
> 
> 时间：2009-03-05T11:04:43.737
> 
> 标签：c#

我正在寻找一种方法来检查服务器是否仍然可用。我们有一个在服务器上保存数据的离线应用程序，但是如果服务器连接断开（偶尔发生），我们必须将数据保存到本地数据库而不是在线数据库。所以我们需要继续检查服务器是否仍然可用。

我们在这个应用程序中使用 C#

检查`sqlconnection.open`并不是一个真正的选项，因为这需要大约 20 秒才能引发错误，我们不能等这么久 + 我也在使用一些 http 服务。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-03-05T11:09:39.637

只需使用[System.Net.NetworkInformation.Ping](https://msdn.microsoft.com/en-us/library/system.net.networkinformation.ping(v=vs.110).aspx)类。如果您的服务器不响应 ping（由于某种原因您决定阻止 ICMP Echo 请求），您将不得不为此发明自己的服务。就个人而言，我完全赞成不阻止 ICMP Echo 请求，我认为这是要走的路。ping 命令用于检查**主机的可达性**已有很长时间了。

```
using System.Net.NetworkInformation;
var ping = new Ping();
var reply = ping.Send("google.com", 60 * 1000); // 1 minute time out (in ms)
// or...
reply = ping.Send(new IPAddress(new byte[]{127,0,0,1}), 3000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-05T11:13:00.970

如果连接像你说的那样不可靠，我不会使用单独的检查，而是**将数据保存在异常处理的本地部分**。我的意思是，如果连接失败并引发异常，您可以切换策略并将数据保存在本地。

如果您先检查然后连接断开（当您实际保存数据时），那么您仍然会遇到需要处理的异常。所以最初的检查是不必要的。仅当您可以假设在成功检查后连接已启动并保持正常时，该检查才有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-05T12:52:44.507

从您的问题看来，连接到服务器的目的是使用其数据库。您的首要任务必须是检查您是否可以成功连接到数据库。无论您是否可以`PING`服务器或获得`HTTP`响应（如其他答案中所建议），除非您成功建立与**数据库**的连接，否则您的过程将失败。您提到检查数据库连接花费的时间太长，您为什么不`Connection Timeout`将应用程序连接字符串中的设置更改为更不耐烦的值，例如 5 秒（`Connection Timeout=5`）？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-05T11:12:02.843

如果这是一个 sql server，那么你可以尝试打开一个新的连接。如果 SqlConnection.Open 方法失败，那么您可以检查错误消息以确定服务器是否不可用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-05T11:23:26.857

你现在做的是：

*   使用远程服务器
*   如果远程服务器出现故障，则求助于本地缓存

如何判断服务器是否可用？使用 catch 块。这是最简单的编码。

* * *

如果您实际上有一个本地数据库（而不是，例如，等待插入的事务或数据列表），我会改变设计：

*   使用本地数据库
*   定期同步本地数据库和远程数据库

* * *

我会让你判断并发约束和其他与你的应用程序相关的东西来选择解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-05T11:11:53.407

由于您想查看数据库服务器是否存在，或者在尝试连接到数据库时捕获任何错误，或者使用套接字并尝试在某些服务上与服务器建立原始连接，所以我建议使用数据库，因为这是资源你需要。

# vb.net - 如何从 Outlook 2003 发送多个草稿

> ID：614337
> 
> 赞同：1
> 
> 时间：2009-03-05T11:05:26.167
> 
> 标签：vb.net, outlook

Outlook 不允许我同时发送多个草稿。有没有一种简单的方法可以在 Outlook 中一次发送多个草稿？无需单独打开每一个？

根据我所读、所见和尝试过的；这在 Outlook 本身是不可能的，因此需要一个编程解决方案，可能是一些 VB 脚本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T09:59:39.313

好的，我发现了一些 VB 可以做到这一点：

```
`Public Sub SendDrafts()

Dim lDraftItem As Long
Dim myOutlook As Outlook.Application
Dim myNameSpace As Outlook.NameSpace
Dim myFolders As Outlook.Folders
Dim myDraftsFolder As Outlook.MAPIFolder

'Send all items in the "Drafts" folder that have a "To" address filled
'in.

'Setup Outlook

Set myOutlook = Outlook.Application
Set myNameSpace = myOutlook.GetNamespace("MAPI")
Set myFolders = myNameSpace.Folders

'Set Draft Folder.  This will need modification based on where it's
'being run.

Set myDraftsFolder = myFolders("$MAILBOX").Folders("$DRAFTS")

'Loop through all Draft Items

For lDraftItem = myDraftsFolder.Items.Count To 1 Step -1

'Check for "To" address and only send if "To" is filled in.

If Len(Trim(myDraftsFolder.Items.Item(lDraftItem).To)) > 0 Then

'Send Item

myDraftsFolder.Items.Item(lDraftItem).Send

End If
Next lDraftItem

'Clean-up

Set myDraftsFolder = Nothing
Set myNameSpace = Nothing
Set myOutlook = Nothing

End Sub 
```

只需将 $MAILBOX 替换为您的邮箱名称，将 $DRAFTS 替换为草稿文件夹的名称。这已经过个人测试，似乎工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:21:03.717

与作者的答案没有太大不同，但仍然：

```
Sub SendDrafts()
  Dim ns As NameSpace
  Dim drafts As MAPIFolder
  Dim Item As MailItem

  Set ns = Application.GetNamespace("MAPI")
  Set drafts = ns.GetDefaultFolder(olFolderDrafts) ' 16
  For Each Item In drafts.Items
    'Item.Send
  Next
End Sub 
```

请小心，因为它确实会在您的默认草稿文件夹中发送所有电子邮件。取消注释发送行后。`Dim`在 Outlook 宏编辑器中允许自动完成的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T04:36:14.107

一个有用的版本，我刚刚在 Outlook 2000 中测试过：

将您要发送的电子邮件拖到发件箱。它们不会自动发送，但使用之前发布的这个版本会发送它们：

```
Sub SendOutbox()
  Dim ns As NameSpace
  Dim outbox As MAPIFolder
  Dim Item As MailItem

  Set ns = Application.GetNamespace("MAPI")
  Set outbox = ns.GetDefaultFolder(olFolderOutbox) ' 16
  For Each Item In outbox.Items
    Item.Send
  Next
End Sub 
```

这样，你就可以有选择性了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-03-05T11:15:13.757

是的，您可以编写一个宏或加载项来做到这一点。

# global - SAS 宏全球范围

> ID：614338
> 
> 赞同：3
> 
> 时间：2009-03-05T11:05:27.027
> 
> 标签：global, sas, sas-macro

有没有一种捷径可以让在宏范围内创建的所有宏变量都在全局范围内？

IE：

```
%macro x;  
 %global _all_;  * ??? ;  
 %let x=1;  
 %let y=1;  
 %let z=1;  
%mend; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-06T00:34:56.410

***我能想到的唯一方法是使用宏代替***%let 语句，而不必提前将每个宏声明为全局宏然后执行%let 语句。

在下面的代码中，我创建了一个名为**%mylet**的宏，其唯一目的是创建一个具有我作为参数传递的名称和值的全局变量。然后，我在想要定义全局变量的任何地方都使用这个宏代替 %let。

例如。

```
%global myvar;
%let myvar=2; 
```

会成为...

> `%mylet(myvar,2);`

```
/* Define a macro to declare variables as global */
%macro mylet(var,value);
  %global &var;
  %let &var.= &value ;
%mend;

/* Test macro */
%macro test;
 %mylet(myvar,2);
 %mylet(myvar2,12);
 %mylet(myvar3,'string');

/* see that they are global inside the macro */
title "Macro scope inside test macro";
proc sql;
    select *
       from dictionary.macros
       where name in('MYVAR','MYVAR2','MYVAR3');
quit;

%mend;
%test;

/* Check to see if they are still global outside the macro */
title "Macro scope outside test macro";
proc sql;
    select *
       from dictionary.macros
       where name in('MYVAR','MYVAR2','MYVAR3');
quit; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-05T15:34:59.890

如果您在开放代码中创建宏变量，宏变量将自动添加到全局宏符号表中：

```
%let x=1;  
%let y=1;  
%let z=1; 
```

这将**在**您创建更大的宏之前：

```
%macro x;
  <code here>
%mend x; 
```

另一种选择是使用数据步骤创建变量：

```
data _null_;
    set LIB.DSET;
    x = 1;
    call symput('x',x);
run; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-24T11:17:01.127

如果您在数据步骤中创建宏变量，并且该数据步骤在宏内部，则默认情况下，创建的宏变量将是该宏范围内的本地变量。

采用

```
call symputx('macvar',macval,'g'); 
```

创建全局宏变量。

# drupal - 如何更改创建页面的 Drupals 菜单选项

> ID：614351
> 
> 赞同：0
> 
> 时间：2009-03-05T11:09:50.917
> 
> 标签：drupal, organic-groups, drupal-permissions

我有一个带有 Organic Groups 的 Drupal 站点，我希望一个组能够访问菜单选项并将页面放在 primary_links 菜单中他们想要的任何位置。其他组应该根本无法访问它。

我已经通过特权完成了其中的一些操作，但是有权访问菜单的用户可以访问*所有*菜单。我只是希望他们能够访问*主链接*菜单。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T09:16:34.877

好吧，如果您将菜单用作块，则可以定义允许哪些角色查看每个块。

此外，您可以采用Drupal 为节点提供的[众多访问控制模块](http://drupalmodules.com/search/node/access+category%3A24)之一，因为不允许用户查看的节点不会出现在他的菜单中。

此外，您可以编写代码来根据用户的角色来切换哪些菜单（您可以创建任意数量的菜单）被考虑用于主链接。

*请注意，默认名称为Primary Links*的菜单与实际页面上应将哪个菜单用于“primary links”的设置之间存在差异。配置它的正常位置是`admin/build/menu/settings`，但可以通过`$conf`在 settings.php 中弄乱全局数组来轻松覆盖它。我认为该设置称为`'menu_primary_links_source'`.

# php - 全文搜索是答案吗？

> ID：614358
> 
> 赞同：9
> 
> 时间：2009-03-05T11:12:21.673
> 
> 标签：php, mysql, search

好的，我有一个看起来像这样的 mySQL 数据库

**ID - 一个 int 和记录的唯一 ID**

**标题 - 项目的名称**

**描述 - 项目描述**

我想搜索关键字的标题和描述，目前我正在使用。

**SELECT * From 'item' where title LIKE %key%**

这很有效，因为数据库中没有太多，但是搜索“this key”没有找到“this that key”我想改进网站的搜索引擎，甚至可能会添加某种排名系统到它（但那是很长一段时间了）。

所以对于这个问题，我听说过一种叫做“全文搜索”的东西（据我所知）它是数据库设计的主要内容，但作为这个主题的新手，我对此一无所知，所以......</p >

1）你觉得有用吗？

还有一个额外的探子……</p>

2) 我能读到什么关于数据库设计/搜索引擎设计的信息，这将为我指明正确的方向。

如果它是相关的，该网站目前是直接用 PHP（没有框架的 IE）编写的（我想到了将它转换为 Ruby on Rails 的想法）

**更新**

谢谢大家，我会去全文搜索。对于以后发现这一点的任何人，我也找到了一个很好的全文搜索[教程](http://www.devarticles.com/c/a/MySQL/Getting-Started-With-MySQLs-Full-Text-Search-Capabilities/)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-05T11:18:57.680

'%keyword%' 类型搜索的问题在于，即使您在该列上创建索引，也无法在常规表中有效地搜索它。想想你会如何看待电话簿中的那根绳子。实际上没有办法优化它——你必须扫描整个电话簿——这就是 MySQL 所做的，全表扫描。

如果您将该搜索更改为“关键字%”并使用索引，您可以获得非常快速的搜索。不过，听起来这不是您想要的。

因此，考虑到这一点，我已经使用了相当多的全文索引/搜索，这里有一些优点和缺点：

**优点**

*   非常快
*   返回按相关性排序的结果（默认情况下，尽管您可以使用任何排序）
*   可以使用停用词。

**缺点**

*   仅适用于 MyISAM 表
*   太短的单词将被忽略（默认最小为 4 个字母）
*   在 where 子句中需要不同的 SQL，因此您需要修改现有查询。
*   不匹配部分字符串（例如，'word' 不匹配'keyword'，只匹配'word'）

[这是一些关于全文搜索的好文档](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html)。

另一种选择是使用搜索系统，例如[Sphinx](http://www.sphinxsearch.com/)。它可以非常快速和灵活。它针对搜索进行了优化，并与 MySQL 很好地集成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-05T12:19:58.203

你也可以考虑 Zend_Lucene。它比 Sphinx 更容易集成，因为它是纯 PHP。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-05T12:25:25.057

我猜 MySQL 全文足以满足您的需求，但值得注意的是，内置支持不能很好地扩展。对于平均大小的文档，它开始变得无法用于小到几十万行的表格大小。如果您认为这可能会成为进一步的问题，您可能应该已经研究过 Sphinx。它正在成为 MYSQL 用户的事实标准，尽管我个人更喜欢使用 java lucene 实现我自己的解决方案。:)

Also, I'd like to mention that full text search is fundamentally different from the standard LIKE '%keyword%'-search. Unlike the LIKE-search full text indexing allows you to search for several keywords that doesn't have to appear right next to each other. Standard search engines such as google are full text search engines, for example.

# html - HTML 标记如何在 Safari 中工作而在 Chrome 中不工作

> ID：614359
> 
> 赞同：0
> 
> 时间：2009-03-05T11:12:38.710
> 
> 标签：html, safari, google-chrome

问题出在我的博客 - blog.dynback.com 上。

右侧面板在 Chrome 中关闭，在包括 Safari 4 在内的所有其他浏览器中保持正常。如果没有 Firebug，很难找到问题所在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T11:22:44.690

您的标记中有错误，首先修复这些错误，至少是缺少的结束标签。

在此处验证：http: //validator.w3.org/check?uri= [http%3A%2F%2Fblog.dynback.com](http://validator.w3.org/check?uri=http%3A%2F%2Fblog.dynback.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-05T11:18:57.913

我认为这与 JavaScript 有关。我注意到代码片段突出显示后出现了问题。Chrome 使用与 Safari 不同的 JavaScript 引擎。也许这就是问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T11:18:22.970

尝试缩小#main_content 的宽度

# .net - 可用 .net 控件库的比较

> ID：614364
> 
> 赞同：4
> 
> 时间：2009-03-05T11:13:55.057
> 
> 标签：.net, asp.net, controls, components

您会推荐哪些 .net 控件库作为企业的必备工具？

*   可以免费/非免费
*   至少应该包含一个真正强大的 Datagrid
*   Ajax 功能

有没有可用的比较？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T11:58:57.007

我以前使用过[Telerik](http://www.telerik.com/) [ASP.NET](http://www.telerik.com/products/aspnet-ajax.aspx)控件，效果很好，我还想说看看[DevComponents](http://www.devcomponents.com) WinForms 控件......非常酷的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-05T12:06:25.087

我会加入[Developer Express](http://devexpress.com/)。我过去曾使用过其他一些组件供应商，但就[团队对客户的参与](http://community.devexpress.com/blogs/)和[支持](http://tv.devexpress.com/)而言，他们是一流的。

[他们的 ASP.Net、WPF 和 Silverlight 组件的在线演示](http://devexpress.com/Downloads/NET/OnlineDemos.xml)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-05T18:30:17.130

我会为 ASP.NET/AJAX 的 Telerik 服务。是的，它们可能被认为是“臃肿软件”，但由于额外的功能和开箱即用的 UI 设计，我将在这里和那里添加额外的 5k 数据。您说的是“企业”，所以我认为成本不是问题，如果是这样，那么 Telerik 就是赢家。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-05T12:55:38.853

这取决于您愿意花多长时间来了解一组 UI 控件的工作方式。例如，DevXpress WinForms 控件需要一些时间来适应，因为某些属性的名称与标准 Winforms 控件不同。然而，这使 DevXpress 的样式系统能够工作。

过去我发现 DevXpress 在 WinForms 上运行良好，但在 Asp.net 上运行得不太好。我认为这是因为没有两家公司以相同的方式构建复杂的 Web 应用程序，因此像 Grid 这样的复杂控件很难插入到现有的 Asp.net 应用程序中。使用 Ajax 的 101 种不同方式只会让情况变得更糟。

一些控件供应商提供简单的控件，可以快速学习并放入现有代码中，而其他控件供应商则必须购买他们的做事方式。决定您是否愿意让控制供应商告诉您如何构建您的应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-19T23:55:44.597

我在 2007 年进行了比较，请参阅[Infragistics 控件与 devexpress 和 Janus 控件的比较](http://peitor.blogspot.com/2007/02/infragistics-controls-compared.html)

我强烈建议自己做一个快速比较。

1.  您的应用程序/开发目标是什么（快速开发、良好的用户体验、漂亮的外观和感觉、性能、win 或 web，哪个控件是必须具备的，...）
2.  收集可能的不同供应商
3.  与不同的供应商一起制作快速测试工具
4.  让不同的开发人员对控件/供应商进行评分
5.  关于你的工作的博客，让我们知道:-)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-05T13:12:56.063

虽然这取决于您的项目规模和要求，但我推荐 DevXpress 和 Telerik（Web/Windows）。我使用过 ComponentArt、Telerik、DevXpress，我认为如果您正在开发 Web 应用程序，Telerik 会更好。而 devXpress 在 Winforms 中更好。顺便说一句，在开发过程中，在某些情况下，我特别遇到了 Telerik Products 的性能问题。尽管如此，Telerik 是 Web 开发的不错选择。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-05T13:14:59.180

我们使用[了同步融合](http://www.syncfusion.com/)来增强数据网格功能。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-05T11:40:03.527

我们使用 Infragistics 来满足我们的大部分需求，主要是用于它们的网格和日期控制。此外，我们使用来自 DevXpress 的 XtraReports 作为报告工具。

Niether 是完美的，但为 Windows 和 ASP.NET 开发提供了最好的性价比，因为它们在一组中提供。

我也会看看 Telerik，没有使用过它们，但据我所知，它们与 Infragistics 相似。

编辑：作为补充说明，我发现坚持使用 1 个或 2 个控件集比在多个供应商中选择一个个体更好，它使学习控件的结构更容易和更容易部署，因为大多数人将使用一些通用库而不是控制套件。

# exception - 在 C# 中捕获 Ironpython 异常

> ID：614365
> 
> 赞同：6
> 
> 时间：2009-03-05T11:14:24.243
> 
> 标签：exception, ironpython

我在 C# 中嵌入 IronPython 2.0。在 IronPython 中，我定义了自己的异常：

```
def foobarException(Exception):
    pass 
```

并在某处提出：

```
raise foobarException( "This is the Exception Message" ) 
```

现在在 C# 中，我有：

```
try
{
   callIronPython();
}
catch (Exception e)
{
   // How can I determine the name (foobarException) of the Exception
   // that is thrown from IronPython?   
   // With e.Message, I get "This is the Exception Message"
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-08T18:39:15.613

当您从 C# 捕获 IronPython 异常时，您可以使用 Python 引擎来格式化回溯：

```
catch (Exception e)
{
    ExceptionOperations eo = _engine.GetService<ExceptionOperations>(); 
    string error = eo.FormatException(e); 
    Console.WriteLine(error);
} 
```

您可以从回溯中提取异常名称。否则，您将不得不调用 IronPython 托管 API 以直接从异常实例中检索信息。`engine.Operations`对这些类型的交互有有用的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-05T15:06:34.420

IronPython 将 .NET 异常映射到 Python 异常的方式并不总是那么简单。许多异常被报告为`SystemError`（尽管如果您导入 .NET 异常类型，您可以在`except`子句中指定它）。您可以使用获取异常的 Python 类型

```
type(e).__name__ 
```

如果您想要 .NET 异常类型，请确保您`import clr`在模块中有。它使 .NET 属性在对象上可用，就像`ToUpper()`字符串上的方法一样。然后您可以使用以下`.clsException`属性访问 .NET 异常：

```
import clr
try:
    1/0
except Exception, e:
    print type(e).__name__
    print type(e.clsException).__name__ 
```

印刷：

```
ZeroDivisionError      # the python exception
DivideByZeroException  # the corresponding .NET exception 
```

捕获您想要的特定 .NET 异常的示例：

```
from System import DivideByZeroException
try:
    1/0
except DivideByZeroException:
    print 'caught' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T11:32:11.153

我的最终解决方案是：

我在 C# 中有一个结果类，它传递给我的 Ironpython 代码。在 Ironpython 中，我用我所有的计算值填充结果类。我刚刚向这个类添加了一个成员变量 IronPythonExceptionName。现在我在 IronPython 中做了一个简单的尝试：

```
try: 
    complicatedIronPythonFunction()
except Exception, inst:
    result.IronPythonExceptionName = inst.__class__.__name__
    raise inst 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-05T11:39:55.710

假设您使用 .NET 等效编译器编译了您的 python 代码，您将有一个静态类型，它就是那个异常。如果此异常是公共的（导出类型），那么您在项目中引用包含您的 python 代码的程序集并在某些 python 命名空间中挖掘类型 foobarException。这样 C# 将能够键入匹配该异常。这是您可以正确执行此操作的唯一方法。

# xml - 在平面结构中使用 xpath 导航到节点

> ID：614370
> 
> 赞同：4
> 
> 时间：2009-03-05T11:16:27.547
> 
> 标签：xml, xslt, xpath

我有一个平面结构的 xml 文件。我们不控制这个xml文件的格式，只需要处理就可以了。我重命名了这些字段，因为它们是高度特定于域的，并且对问题没有任何影响。

```
<attribute name="Title">Book A</attribute>
<attribute name="Code">1</attribute>
<attribute name="Author">
   <value>James Berry</value>
   <value>John Smith</value>
</attribute>
<attribute name="Title">Book B</attribute>
<attribute name="Code">2</attribute>
<attribute name="Title">Book C</attribute>
<attribute name="Code">3</attribute>
<attribute name="Author">
    <value>James Berry</value>
</attribute> 
```

需要注意的关键事项：该文件不是特别分层的。书籍由 name='Title' 的属性元素的出现来分隔。但是 name='Author' 属性节点是可选的。

是否有一个简单的 xpath 语句可以用来查找“n”书的作者？很容易识别书名'n'，但作者值是可选的。而且您不能只选择以下作者，因为在第 2 本书的情况下，这将给出第 3 本书的作者。

我已经编写了一个状态机来将其解析为一系列元素，但我不禁想到会有一种方法可以直接获得我想要的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T13:48:11.690

我们希望@name 'Author' 的“attribute”元素跟随@name 'Title' 的“attribute”元素，其值为'Book n'，而@name 'Title' 的任何其他“attribute”元素之间没有任何其他“attribute”元素他们（因为如果有，那么作者写了一些其他的书）。

换句话说，这意味着我们想要一个作者，其中第***一个***前面的标题（它“属于”的那个）是我们正在寻找的那个：

```
//attribute[@name='Author']
[preceding-sibling::attribute[@name='Title'][1][contains(.,'Book N')]] 
```

N=C => 找到`<attribute name="Author"><value>James Berry</value></attribute>`

N=B => 什么也没找到

使用 XSLT 2.0 中可用的键和/或分组功能会使这更容易（如果文件很大，则更快）。

（所以代码解析器似乎认为 '//' 代表 'comments' 但在 XPath 中它不是！！！叹息。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T13:58:29.013

好吧，我已经使用[Elementtree](http://effbot.org/zone/element-index.htm)从上述 XML 中提取数据。我已将此 XML 保存在名为 foo.xml 的文件中

```
from xml.etree.ElementTree import fromstring

def extract_data():
    """Returns list of dict of book and
    its authors."""

    f = open('foo.xml', 'r+')
    xml = f.read()
    elem = fromstring(xml)
    attribute_list = elem.findall('attribute')
    dic = {}
    lst = []

    for attribute in attribute_list:
        if attribute.attrib['name'] == 'Title':
            key = attribute.text
        if attribute.attrib['name'] == 'Author':
            for v in attribute.findall('value'):
                lst.append(v.text)
            value = lst
            lst = []
            dic[key] = value
    return dic 
```

当你运行这个函数时，你会得到这个：

```
{'Book A': ['James Berry', 'John Smith'], 'Book C': ['James Berry']} 
```

我希望这就是你要找的。如果不是，那么只需指定更多。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-05T14:22:11.733

**正如*bambax*在他的回答中指出的那样，使用 XSLT 键的解决方案更有效**，尤其是对于大型 XML 文档：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes"/>
 <!--                                            -->
 <xsl:key name="kAuthByTitle" 
  match="attribute[@name='Author']"
  use="preceding-sibling::attribute[@name='Title'][1]"/>
 <!--                                            -->
    <xsl:template match="/">
      Book C Author:
      <xsl:copy-of select=
         "key('kAuthByTitle', 'Book C')"/>
  <!--                                            -->
         ====================
      Book B Author:
      <xsl:copy-of select=
         "key('kAuthByTitle', 'Book B')"/>
    </xsl:template>
</xsl:stylesheet> 
```

当对这个 XML 文档应用上述转换时：

```
<t>
    <attribute name="Title">Book A</attribute>
    <attribute name="Code">1</attribute>
    <attribute name="Author">
        <value>James Berry</value>
        <value>John Smith</value>
    </attribute>
    <attribute name="Title">Book B</attribute>
    <attribute name="Code">2</attribute>
    <attribute name="Title">Book C</attribute>
    <attribute name="Code">3</attribute>
    <attribute name="Author">
        <value>James Berry</value>
    </attribute>
</t> 
```

产生正确的输出：

```
 Book C Author:
  <attribute name="Author">
    <value>James Berry</value>
</attribute>

     ====================
  Book B Author: 
```

**请注意，`"//"`应尽可能避免使用 XPath 缩写**，因为它通常会导致在每次对 XPath 表达式求值时扫描整个 XML 文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-05T12:25:14.557

我不确定您是否真的想去那里：我发现最简单的方法是从作者那里获取以前的标题，然后检查第一作者或后面的标题是否确实是标题。丑陋！

```
/books/attribute[@name="Author"]
  [preceding-sibling::attribute[@name="Title" and string()="Book B"]
                               [following-sibling::attribute[ @name="Author" 
                                                             or @name="Title"
                                                            ]
                                 [1]
                                 [@name="Author"]
                               ]
  ][1] 
```

（我添加了*书籍*标签来包裹文件）。

我使用 libxml2 BTW 进行了测试，使用[xml_grep2](http://xmltwig.com/tool/)，但仅在您提供的示例数据上进行了测试，因此欢迎进行更多测试）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-05T12:29:04.000

选择所有标题并应用模板

```
<xsl:template match="/">
  <xsl:apply-templates select="//attribute[@name='Title']"/>
</xsl:template> 
```

在模板输出标题中，检查下一个标题是否存在。如果不是，则输出以下作者。如果确实存在，则检查下书的下作者节点是否与当前书的下作者节点相同。如果是，则表示当前书籍没有作者：

```
<xsl:template match="*">
   <book>
     <title><xsl:value-of select="."/></title> 
   <author>
   <xsl:if test="not(following::attribute[@name='Title']) or following::attribute[@name='Author'] != following::attribute[@name='Title']/following::attribute[@name='Author']">
   <xsl:value-of select="following::attribute[@name='Author']"/>
   </xsl:if>
   </author>
   </book>
</xsl:template> 
```

# c# - C# 代表和事件？

> ID：614371
> 
> 赞同：2
> 
> 时间：2009-03-05T11:16:47.060
> 
> 标签：c#, .net

我有一个带有类的程序集，该类使用委托和自定义事件参数定义自定义事件。现在我必须通过我的代码动态加载这个程序集并创建这个类的实例。到这里为止我很好。现在我必须为使用自定义委托的类对象引发的事件提供事件处理程序。如何使用反射向从类引发的事件添加事件处理程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T11:41:09.063

这是执行此操作的代码：

```
 class Program
  {
    static void Main(string[] args)
    {
      // Create publisher.
      var pub = Activator.CreateInstance(typeof(Publisher));
      // Get the event.
      var addEvent = typeof(Publisher).GetEvent("Event");

      // Create subscriber.
      var sub = Activator.CreateInstance(typeof(Subscriber));
      // Get the method.
      var handler = typeof(Subscriber).GetMethod("Handle");
      // Create a valid delegate for it.
      var handlerDelegate = MakeEventHandlerDelegate(handler, sub);

      // Add the event.
      addEvent.AddEventHandler(pub, handlerDelegate);

      // Call the raise method.
      var raise = typeof(Publisher).GetMethod("Raise");
      raise.Invoke(pub, new object[] { "Test Value" });
      Console.ReadLine();
    }

    static Delegate MakeEventHandlerDelegate(MethodInfo methodInfo, object target)
    {
      ParameterInfo[] info = methodInfo.GetParameters();
      if (info.Length != 2)
        throw new ArgumentOutOfRangeException("methodInfo");
      if (!typeof(EventArgs).IsAssignableFrom(info[1].ParameterType))
        throw new ArgumentOutOfRangeException("methodInfo");
      if (info[0].ParameterType != typeof(object))
        throw new ArgumentOutOfRangeException("methodInfo");

      return Delegate.CreateDelegate(typeof(EventHandler<>).MakeGenericType(info[1].ParameterType), target, methodInfo);
    }
  }

  class Args : EventArgs
  {
    public string Value { get; set; }
  }

  class Publisher
  {
    public event EventHandler<Args> Event;

    public void Raise(string value)
    {
      if (Event != null)
      {
        Args a = new Args { Value = value };
        Event(this, a);
      }
    }
  }

  class Subscriber
  {
    public void Handle(object sender, Args args)
    {
      Console.WriteLine("Handle called with {0}.", args.Value);
    }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-05T11:27:43.040

事件是多播委托，您可以将该事件检索为 System.Delegate 的类型，使用 Delegate.Combine 组合两个实例，然后将委托设置为组合委托。

C# 对此有很好的速记语法：

```
class SomeClass
{
    public event Action<string> TextEvent;
} 
```

你会写这样的东西：（我感觉有点懒，不会检查这个，你必须自己解决问题）

```
var obj = // instance of SomeClass...
var t = typeof(SomeClass); // you need the type object
var member = t.GetEvent("TextEvent"); 
member.AddEventHandler(obj, new Action<string>(delegate(string s)){}); // done! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T11:26:09.347

我以前必须这样做，真的很痛苦 - 最终遇到了这个[教程](http://msdn.microsoft.com/en-us/library/ms228976.aspx)。

是否有可能在另一个程序集中有一个接口，您可以使用它来将事件与反射联系起来？只是一个想法...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-05T13:33:39.760

我可能遗漏了一些东西，但是如果您知道需要连接的事件的名称和签名，那么您大概知道暴露该事件的类型。在这种情况下，为什么需要使用反射？只要您有正确键入的引用，您就可以以正常方式附加处理程序。

# amazon-ec2 - 在 Amazon EC2 中，如何将 EBS 卷复制给其他用户？

> ID：614372
> 
> 赞同：6
> 
> 时间：2009-03-05T11:17:27.450
> 
> 标签：amazon-ec2, amazon-web-services, amazon-ebs

我使用我的亚马逊凭据创建了一个亚马逊 EBS 卷。我的客户给了我他的客户凭证，以便我为他创建一个 EC2 机器，并附上我创建的磁盘，我该怎么做？

我正在使用 Web 控制台，如果重要的话

===================

让我补充一点，当我在客户帐户中创建卷并将我的快照 ID 作为快照时，我得到“快照快照 1xyz1234”不存在。我需要以某种方式告诉 snaphsot 是另一个用户的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-08T17:45:56.960

这个有可能。在官方文档中查找[“修改快照权限”](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-modifying-snapshot-permissions.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T23:22:40.323

最好的方法可能是在每个账户下启动一个 EC2 实例，然后通过网络复制它。VM->VM 网络流量非常快，更重要的是免费。

# actionscript-3 - 如何避免使用 CDN 进行客户端缓存

> ID：614389
> 
> 赞同：2
> 
> 时间：2009-03-05T11:24:25.500
> 
> 标签：actionscript-3, caching, cdn

在 AS3 中处理项目时，我需要传输一些文件以进行带宽测试。文件需要来自 CDN（客户端最近的代理）以使带宽测试可靠。

当然，如果远程文件被缓存在客户端浏览器中，带宽测试将不可靠。

通常我会在 GET 变量中添加时间戳以欺骗客户端缓存。但我可以想象这是使用 CDN 的一种非常糟糕的做法。

所以我的问题是：

如何在不真正更改请求的情况下强制绕过客户端缓存以检索文件的新版本？

提前致谢，

吨

**编辑 ：**

理想的情况是在 URLRequest 中发送一个缓存控制标头（感谢 Assaf！）。不幸的是，我已经尝试了一段时间，但它似乎在 FlashPlayer 中不起作用。即使在网络上，人们似乎也对这个话题持悲观态度。

快速示例：

```
var headers:Array = new Array(new URLRequestHeader("Cache-Control", "no-cache"));
urlRequest.requestHeaders = headers;
urlRequest.load(url); 
```

有人曾经设法做出类似工作的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-05T11:29:10.790

正确的做法是在请求中指定缓存 http 控制标头，或在服务器上配置无缓存。

如果您可以控制服务器，则可以指定 pragma no-cache 或等效的东西，以便*永远不会*缓存某些文件。

时间戳确实不是一个好主意，因为它可能会与各种缓存一起使用。

# jquery - 仅用 jQuery 构建网站？

> ID：614396
> 
> 赞同：2
> 
> 时间：2009-03-05T11:26:32.390
> 
> 标签：jquery, html

我是[jQuery](http://jquery.com/)新手。

是否可以仅使用 jQuery 和 HTML 创建一个网站，例如在线测验？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-05T11:32:59.813

我想理论上你可以。

对于一个网站来说，它不仅仅是一组静态页面，它必须做一些有用的事情。页面本身只能处理用户提供的输入，其他不多。因此，静态页面可以进行纬度和经度距离等计算，因为它可以是独立的。

对于一个真正有用的网站，它必须与其他东西交互：服务器后端或其他输入提供者。现在这可能是您的服务器，或者您可以使用 Web 服务来做很多事情。

归根结底，jQuery 只是 Javascript，所以除了它和 HTML（加上，我假设是 CSS）之外，你没有理由需要其他任何东西。但不确定它会有多大用处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T11:45:22.967

[TiddlyWiki](http://www.tiddlywiki.com/)是一个很好的例子，说明了仅用 javascript 就可以完成的事情。因此，您可以在 javascript 之上使用 jQuery 构建各种应用程序是完全可行的。

然而，这并不意味着它一定是一个好主意 - 但我想这一切都取决于你正在尝试做的事情的背景。

**编辑**：作为演示可以在纯客户端 javascript 中做什么 - [MSX](http://en.wikipedia.org/wiki/MSX)模拟器：http: [//jsmsxdemo.googlepages.com/jsmsx.html](http://jsmsxdemo.googlepages.com/jsmsx.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-06T11:12:14.927

没有人提到您将陷入的 SEO、可访问性和 noscript 支持的严重问题。

技术上可行，就像跳下悬崖一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-05T11:31:28.977

我确信这是可能的，但我认为这不是一个好主意。一切都需要存储在网页中。包括所有数据（答案、问题和备选方案）。

作为了解 jQuery 的练习，它可能是一个好的开始。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-05T11:31:34.530

当然，这是可能的。您最大的挑战可能是在请求之间保存状态，但您可以使用[jQuery Session](http://code.google.com/p/jquery-session/)之类的东西来完成此任务。而且，我不认为您将能够在客户端之外持久保存数据（例如，保存数据以供第 3 方查看），除非您拥有存储数据的服务器端语言。

# visual-studio - 轻松（GUI？）创建自定义 VS 项目模板？

> ID：614398
> 
> 赞同：0
> 
> 时间：2009-03-05T11:27:25.727
> 
> 标签：visual-studio, project-template

有没有一种简单的方法来创建自定义项目模板？
我做了一个快速的谷歌，但似乎我必须对各种 zip 文件、xml 文档等进行模糊处理。

我最终想要做的是类似于 Empty Solution 模板的东西，但是已经有了一些目录和自定义项目。

我想要这个，因为它会让我的生活稍微舒服一些，但是了解有关项目模板如何工作的所有坚韧不拔的细节还不够重要......

**编辑**
[Schooner 的解决方案](https://stackoverflow.com/questions/614398/easily-gui-creating-custom-vs-project-template/614416#614416)回答了我的问题。但是，如果有人有更一般的答案，那也太好了..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-05T11:36:27.483

为什么不直接制作新的空解决方案并将它们保存到您自己的模板文件夹中。然后，您可以根据需要复制它们，并在需要时为新的实际项目重命名它们。可能比试图在 VS 中找出真正的模板更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:34:37.517

看看WarmuP（[https://github.com/chucknorris/warmup](https://github.com/chucknorris/warmup)）。我发现使用它取得了一些成功。它可以使用 github 和令牌替换从“模板”为您创建解决方案结构

# php - PHP：检查目录是否包含 Zend_Search_Lucene 索引

> ID：614400
> 
> 赞同：1
> 
> 时间：2009-03-05T11:28:06.317
> 
> 标签：php, zend-framework, exception, zend-search-lucene

我正在寻找一种可靠的方法来检查目录是否包含*Zend_Search_Lucene*索引。目前，我设法解决这个问题的唯一方法是使用以下代码检查返回给我的异常的内容：

```
<?php
try
{
    $newIndex = Zend_Search_Lucene::open( $luceneDir );
} catch ( Zend_Search_Lucene_Exception $e ) {
    if ( strpos( $e->getMessage( ), 'in the specified directory' ) !== false )
    {
        $newIndex = Zend_Search_Lucene::create( $luceneDir );
    }
}
?> 
```

这种方法并不理想，而且对 API 的检查似乎也不是很有用。有谁知道是否有一种简单的方法可以查看 $luceneDir 是否包含*Zend_Search_Lucene*索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T12:44:26.413

您可以先尝试检查是否有索引段编号文件

```
file_exists($luceneDir.'segments.gen') 
```

# vb.net - 如何防止在datagridview中“自我”拖放？

> ID：614404
> 
> 赞同：3
> 
> 时间：2009-03-05T11:29:39.043
> 
> 标签：vb.net, datagridview, drag-and-drop

我正在两个数据网格视图之间实现拖放功能。这可以按预期工作，但有一个例外：可以在同一个 datagridview 中拖放。这会导致重复的行。我想限制功能，以便我只能从一个 datagridview 拖动到另一个。有谁知道如何做到这一点？我猜需要某种命中测试，但我不知道如何实现这个......

我正在使用的代码如下：

```
Private Sub dgvFMAvailable_MouseMove(ByVal sender As System.Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles dgvFMAvailable.MouseMove

    If e.Button = Windows.Forms.MouseButtons.Left Then
        Me.dgvFMAvailable.DoDragDrop(Me.dgvFMAvailable.SelectedRows, DragDropEffects.Move)
    End If

End Sub 
```

和

```
Private Sub dgvFMSelected_DragDrop(ByVal sender As System.Object, ByVal e As System.Windows.Forms.DragEventArgs) Handles dgvFMSelected.DragDrop

    Try
        Me.SelectFM(CType(e.Data.GetData(GetType(DataGridViewSelectedRowCollection)), DataGridViewSelectedRowCollection))

    Finally
        e.Effect = DragDropEffects.None
    End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-05T11:38:32.407

只是一个快速的想法。如果当你开始拖动时你持有原始网格的名称怎么办。当您进行放置检查名称时，如果它们是同一个对象，则不允许放置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T11:42:28.857

删除时只需测试参考相等性。像这样的东西：

```
If Object.ReferenceEquals(droppedThing, thingWhereItWasDropped)
    ' Don't drop it
Else
    ' Drop it
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-07-12T19:19:09.270

我找不到一个好的答案，尽管它似乎一定是一个常见的问题。所以我以下列方式使用了gbianchi的答案：

```
public bool DraggingFromFileLinkDGV { get; set; }
void grdFiles_MouseDown(object sender, MouseEventArgs e)
{
    this.DraggingFromFileLinkDGV = true;
}
void grdFiles_MouseLeave(object sender, EventArgs e)
{
    this.DraggingFromFileLinkDGV = false;
}

void grdFiles_DragDrop(object sender, DragEventArgs e)
{
    // Avoid DragDrop's on jittery DoubleClicks
    if (this.DraggingFromFileLinkDGV) return;

    // Your DragDrop code here ...
} 
```

现在，我实际上这样做是为了防止鼠标在双击之间移动一点的“徘徊”双击。这可以防止双击注册为拖放以及回答 OP 问题。

请注意，它似乎并非 100% 有效。显然，某些事件在 20 个案例中只有 1 个“丢失”。我还没有确切地确定在它自己注册下降的情况下会发生什么变化。在防止双击注册为拖放的情况下，95% 就足够了，因为它只是为了避免烦恼而放置到位。如果您需要 100% 有效的东西，您可能需要尝试其他方法或找出为什么它在少数情况下不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T07:20:35.537

一种方法是在开始拖动时将要拖动的内容的字符串描述存储在 DataObject 中，即：

```
Dim dataObj As New DataObject
...
dataObj.SetText(G_SELF_DRAG_DROP_FLAG) 
```

然后在 DragEnter 上检查标志是否存在：

```
Public Sub ProcessAttachment_DragEnter(ByRef e As System.Windows.Forms.DragEventArgs)

    ' prevent dragging onto self
    Dim s = e.Data.GetData(DataFormats.Text)
    If s IsNot Nothing Then
        If s.contains(G_SELF_DRAG_DROP_FLAG) Then
            e.Effect = DragDropEffects.None
            Exit Sub
        End If
    End If

    ...

End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-09T15:31:13.887

在事件中将标志设置为 false`MouseLeave`对我来说无法正常工作。 `MouseLeave`我一打电话就一直打电话`DoDragDrop`。

我终于让它正常工作，如下所示：

```
A) I create a private bool DraggingFromHere flag
B) Right before calling DoDragDrop, I set this.DraggingFromHere = true
C) In the MouseUp event, I set this.DraggingFromHere = false
D) In the DragDro event, I simply to this:
    if(this.DraggingFromHere) return; 
```

卡洛斯·梅里赫

# html - mailto 链接共享点设计器

> ID：614405
> 
> 赞同：1
> 
> 时间：2009-03-05T11:29:46.250
> 
> 标签：html, sharepoint, sharepoint-designer

在共享点设计器中，我有一个控件

```
<SharePointWebControls:TextField FieldName="Title" runat="server"></SharePointWebControls:TextField> 
```

我想要一个 mailto 链接，该链接将使用此标题作为电子邮件的主题，并且我需要电子邮件的正文包含一些文本，例如“我的示例文本”

我该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-25T03:46:37.893

我会使用上面给出的方法。Jason 给出的评论具有误导性——该代码实际上是一个自定义字段控件。是的，我猜自定义字段控件可以称为用户控件，因为它们是用 C# 编写的。我在自己的解决方案中使用了类似的自定义字段控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T12:47:29.637

在我看来，您正在寻找联系表格而不是 MailTo 链接，也许像[这个示例](http://www.rl-soft.com/en/blog/Lists/Posts/Post.aspx?ID=2)这样的东西会很有用，至少作为一些值得一看的东西。[这个 Sharepoint 联系表格示例](http://www.codeproject.com/KB/sharepoint/SharepointContactForm.aspx)也值得一看。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-03-05T14:31:08.920

我建议创建一个自定义字段类，它继承自 TextField 并在显示模式下创建 mailto 标记。

```
public class EmailToTextField: Microsoft.SharePoint.WebControls.TextField
{
    public override void RenderControl(System.Web.UI.HtmlTextWriter writer)
    {
     switch (ControlMode)
     {
        case Microsoft.SharePoint.WebControls.SPControlMode.Display:
              writer.Write("<a href='mailto:" + Value + "?subject=" + Value + "&body=sometext'>EMAIL</a>");
              break;
        default:
              base.RenderControl(writer);
              break;
      }
   }
} 
```

然后只需将其添加为安全控件，并在如下代码中使用它：

```
<MyWebControls:EmailToTextField FieldName="Title" runat="server"></MyWebControls:EmailToTextField> 
```

希望能帮助到你

# c# - 正则表达式匹配除 C# 中引号中的字符串之外的所有内容

> ID：614410
> 
> 赞同：3
> 
> 时间：2009-03-05T11:31:39.333
> 
> 标签：c#, regex

我是 C# 中使用正则表达式的新手。我想要一个正则表达式从给定列表中找到下一个关键字，但它没有被引号包围。

例如，如果我有一个看起来像这样的代码：

```
 while (t < 10)
            {
                string s = "get if stmt";
                u = GetVal(t, s);
                for(;u<8;u++)
                {
                    t++;
                }

            } 
```

我尝试将正则表达式用作 @"(.*?)\s(FOR|WHILE|IF)\s" 但它给了我“if”作为下一个关键字。然而，我想在while之后获得下一个关键字，而不是用引号括起来的“if”。

无论如何都可以使用正则表达式来完成吗？或者我将不得不使用传统编程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-05T12:13:06.333

尝试以下正则表达式（**编辑：**已修复）。

```
(?:[^\"]|(?:(?:.*?\"){2})*?)(?: |^)(?<kw>for|while|if)[ (] 
```

注意：由于此 RegEx 文字包含引号，因此您不能在字符串前使用 @ 符号。请记住，如果您将任何 RegEx 特殊字符添加到字符串中，您需要适当地对它们进行双重转义（例如 \w）。确保在与 RegEx 匹配时还指定 Multiline 参数，因此插入符号 (^) 被视为新行的开始。

这尚未经过测试，但应该可以完成工作。让我知道是否有任何问题。此外，根据您还想在这里做什么，我可能会建议使用标准文本解析（非正则表达式），因为根据您想从代码中提取多少数据，它会很快变得更具可读性。希望无论如何都会有所帮助。

**编辑：** 这是一些示例代码，我已经对其进行了测试，并且非常有信心它可以按预期工作。

```
var input = "while t < 10 loop\n s => 'this is if stmt'; for u in 8..12 loop \n}"; 
var pattern = "(?:[^\"]|(?:(?:.*?\"){2})*?)(?: |^)(?<kw>for|while|if)[ (]";
var matches = Regex.Matches(input, pattern);
var firstKeyword = matches[0].Groups["kw"].Value;
// The following line is a one-line solution for .NET 3.5/C# 3.0 to get an array of all found keywords.
var keywords = matches.Cast<Match>().Select(match => match.Groups["kw"].Value).ToArray(); 
```

希望这应该是您现在的完整解决方案...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-05T12:17:09.443

如果你决定走正则表达式路线，你可以[使用这个网站](http://www.nregex.com/nregex/default.aspx)来测试你的正则表达式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T11:36:26.717

您可以尝试反向引用，它可以让您匹配字符串，但由于您想做完全相反的事情，您最好转义字符串，这实际上很容易。

要么编写一个匹配字符串的正则表达式并将它们替换为空，要么运行文本跳过带引号的字符串并同时寻找关键字。我认为后者会更有效率。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-05T11:40:37.877

我想正则表达式，不能轻易理解 C# 关键字。我建议您使用：Microsoft.CSharp.CSharpCodeProvider，使用此 Visual Studio 管理 C# 代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-05T12:42:26.730

> 无论如何都可以使用正则表达式来完成吗？

在一般情况下，没有。C# 的语法不适合正则表达式解析。

考虑这些极端情况：

```
method("xxx\"); while (\"xxx");

method(@"xxx \"); while (...);

// while

/* while */

/* xxx
// xxx */ while

/* xxx " xxx */ while ("... 
```

像 C# 这样复杂的语言需要专用的解析器。

# linux - 在 Fedora 9、KDE 4.2 上运行 eclipse 时出现问题（在 Gnome 中运行良好）

> ID：614417
> 
> 赞同：-1
> 
> 时间：2009-03-05T11:37:11.163
> 
> 标签：linux, eclipse, fedora, kde

我最近在我的 Fedora 9 机器上安装了 KDE4.2，它已经有 Gnome，并且一直在尝试运行 Eclipse 3.3（Europa，它带有 Fedora Distro），但没有运气。当我使用 gnome 会话时，Eclipse 运行良好，但是我需要在 KDE 中使用它。

我附上崩溃后拍摄的屏幕截图以及有关我的机器的一些信息：

> uname -a 产生：
> 
> Linux localhost.localdomain 2.6.25-14.fc9.i686 #1 SMP Thu May 1 06:28:41 EDT 2008 i686 i686 i386 GNU/Linux

我有一个 Intel Core 2 Duo 处理器。我还有许多 JRE 和 JDK（JRE、JDK 5 和 6、JRE 4）。JDK6 s 正在使用中。

我有一种感觉，它与gtk和qt有关。由于 KDE 在 qt 上运行，我可能需要一些插件。但是在互联网上搜索时找不到太多。

一些指针真的会有所帮助！另外，如果您需要有关机器或 Eclipse 的更多信息，请告诉我

编辑：添加了屏幕截图。

[![这是图像：](https://i.stack.imgur.com/YuD5N.png)](https://i.stack.imgur.com/YuD5N.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-05T11:49:47.730

尝试从其站点下载 Eclipse。

根据我的经验，Linux 发行版通常会试图在 Java 应用程序上过于智能，而且我总是更幸运地找到源代码（对于 JDK 来说是 Sun，对于 Eclipse 来说是 Eclipse）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T11:49:28.747

Eclipse 使用 SWT 库（SWT 在 linux 上使用 gtk++）。我认为您的问题与在 KDE 环境中运行的 SWT 库没有找到 gtk++ 库有关。但这只是猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T11:50:59.320

刚看到截图，试试Sun JDK而不是openjdk。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-06T22:22:19.167

我对分销商打包的 Eclipse 也有不好的体验。他们经常修补 Eclipse 以在系统中拥有插件，而只将应用程序留在用户家中。由于缺少权限，这经常给我带来插件问题。最好得到一个原始的 Eclipse 并将其放在您的家中。

嗯，您安装了最新的 JRE（Sun JRE 6），所以我在这里看不到问题。但是您可以完全删除 JRE 包并重新安装它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-03T05:36:23.637

你有安装gcj吗？我认为 Eclipse 仍然使用 gcj，并且不适用于 OpenJDK。当我上次在 Fedora（KDE 4.1.8x 和 Fedora 10）中使用 Eclipse 时，它​​运行良好。

# c# - SPGridview 单个DataKeyName 而不是多个？

> ID：614418
> 
> 赞同：1
> 
> 时间：2009-03-05T11:37:29.633
> 
> 标签：c#, asp.net, sharepoint

我在 webpart 中有一个 SPgridview。

当我选择一行时，我想获取项目的 ID，而不是索引。我怎么做？

通常我只会将gridview的DataKeyName设置为“ID”或表中的任何列被调用。

但是在这里我不允许设置单个数据键名，只能使用 stringArray 设置多个。我尝试将其设置为只有一个项目的字符串数组，但失败了。

我使用 SPdatasource 在 gridview 中提供数据。

我对这个共享点世界很陌生..

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-08-21T09:46:53.057

我遇到了同样的问题，并搜索了 2 天的解决方案。阅读这篇文章后，我想到了检查两台服务器上安装的更新。存储数据键名的服务器需要最新的 .NET 更新。安装 .NET 3.5 SP1 后，错误消失了！

也许这对某人有帮助。;)

# tsql - 删除 T-SQL 中的非数字字符

> ID：614423
> 
> 赞同：2
> 
> 时间：2009-03-05T11:38:33.170
> 
> 标签：tsql, varchar

我正在使用函数 sp_spaceused 来获取数据库中所有表的详细信息。index_size 列是返回的 VARCHAR，末尾带有“KB”，但我想以 MB 为单位显示。我只需要知道如何去掉 KB，剩下的我可以做！:D

更新：我不觉得这是另一个问题的重复，因为我正在寻找一个仅 SQL 的解决方案，该解决方案在这个线程中给出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-05T11:44:38.600

我的第一个想法是只存储在一个变量中，然后使用子字符串来删除最后一个字符。

```
-- Setup
DECLARE @data VARCHAR(50)
SET @data = '159736 KB'

-- Computation
SET @data = SUBSTRING(@data, 1, LEN(@data)-2)

-- Conversion
SELECT CAST(@data AS INTEGER) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-05T11:51:43.077

替换（列，'KB'，''）。不需要 LEN 和其他东西

在 SQL 2005 上，这将为您提供“保留”值：

```
SELECT
    SUM(au.total_pages) / 128.0 AS UsedMB
FROM
    sys.allocation_units au 
```

更多调查应该允许您从目录视图中读取索引与数据空间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T11:56:51.037

更通用的解决方案：

```
-- Test data
DECLARE @StrIn VARCHAR(100), @StrOut VARCHAR(100), @I INT, @Len INT
  SELECT @StrIn = '123m43 5m409', @StrOut = '', @I = 0, @Len = Len(@StrIn)

-- Answer
WHILE (@I < @Len) BEGIN 
  SELECT @I = @I + 1, 
    @StrOut = @StrOut + 
      CASE 
        WHEN (CAST(ASCII(SUBSTRING(@StrIn, @I, 1)) AS INT) BETWEEN 47 AND 58) 
        THEN SUBSTRING(@StrIn, @I, 1) ELSE '' 
      END 
END

SELECT @StrIn, @StrOut 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-08T18:42:24.297

T-SQL (SS 2008+) 的通用解决方案，删除除了一组允许的字符之外的所有字符：

```
DECLARE @StrIn varchar(20)='(323)-555-1212'; -- input value    
DECLARE @Allowed varchar(20)='%[0123456789]%'; -- pattern for allowed characters.

DECLARE @Result varchar(20)=''; -- result    
DECLARE @I int = patindex(@Allowed, @StrIn);

WHILE (@I>0)
begin

    SET @Result = @Result + SUBSTRING(@StrIn, @I, 1); -- add allowed charcter.
    set @StrIn = SUBSTRING(@StrIn, @I+1, 20); -- take rest of string.
    SET @i = patindex(@Allowed, @StrIn); 
END

PRINT @Result; 
```

这可以很容易地封装成一个标量函数。一个完全通用的函数将接受允许的字符列表，或者您可以为特殊目的进行硬编码（例如这个）。

# wcf - WCF 中的可排序列表

> ID：614436
> 
> 赞同：0
> 
> 时间：2009-03-05T11:43:25.577
> 
> 标签：wcf, list, jquery-ui-sortable

基于这篇文章[http://www.codeproject.com/KB/linq/bindinglist_sortable.aspx](http://www.codeproject.com/KB/linq/bindinglist_sortable.aspx)我实现了我的业务对象与可排序功能。当我将对象发送到客户端应用程序 (winfoms) 时，对象不可排序。有人对此有解决方案吗？

谢谢你的回答，贾尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-05T11:46:48.317

您应该在客户端上执行排序，而不是在服务中。

从您的 WCF 服务返回一个集合/列表/数组，将其提供给`SortableBindingList`客户端并将该列表传递给您的网格。这应该够了吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-09T16:51:36.490

LINQ 是 WCF 和返回的对象数组的完美伴侣。我们使用它对我们的服务返回的结果进行排序和小规模定制。在某些系统中，我们实际上会拉下更大的数据集，并将它们以应用程序状态保存在 DMZ Web 服务器上，然后重用这些数据集以满足使用 LINQ 的多个类似客户端请求以进行一些额外的按摩。

```
listingQuery = listingQuery.OrderByDescending(p => p.JobCityId).ThenBy(p => p.WorkingTitle); 
```

# c++ - 读取存储在 XML 文件中的业务规则的优雅方式

> ID：614437
> 
> 赞同：2
> 
> 时间：2009-03-05T11:44:29.430
> 
> 标签：c++, xml, design-patterns

我必须阅读存储在 XML 文件中的业务规则（我使用的是 VC++/MFC/MSXML）。XML 由规则组成。每个规则都有一组条件和操作。对于这样的系统，什么是优雅的 OOP 设计？如果您是此类系统的设计者，您会使用什么设计模式？

更新：
如果满足规则的所有条件，则将规则按顺序排列并执行一买一。

xml 示例：

```
 <rules>
      <!--  rule no. 1 -->
      <rule name="rule no. 1">
         <conditions>
            <condition name="condition no. 1" type="ATTR_EMPTY">
               <parameters>
                  <parameter name="attribute_name">ttt</parameter>
                  <parameter name="workflow_id">3</parameter>
                  <parameter name="workflow_state_id">5</parameter>
               </parameters>
            </condition>
            <condition name="condition no. 2" type="ATTR_EMPTY">
               <parameters>
                  <parameter name="attribute_name">ttt</parameter>
                  <parameter name="enviroment_id">3</parameter>
               </parameters>
            </condition>
         </conditions>
         <actions>
            <action name="action no. 1" type="ATTR_CLEAR">
               <parameters>
                  <parameter name="attribute_name">ttt</parameter>
               </parameters>
            </action>
         </actions>
      </rule>
   </rules> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-05T11:49:00.773

XML 实际上只是低级传输层，您使用的是在它之上的任何更高级别的格式吗？这样您就可以获得对特定库的推荐。

编辑：

好的，投反对票，所以这不是您要寻找的答案。

您可能会获得 oo 设计，但您需要发布 xml 片段或详细规范。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-05T11:54:47.093

您打算如何在内存中对这些规则进行建模？

在内存中表示这些规则的一种方法是使用更高级的编程语言（例如 python）。使用等效的控制流将您的 XML 规则转换为 python 代码，该控制流在执行时调用您的 C++ 对象。实际上，我过去曾这样做以实施规则系统。我使用 JavaScript 作为规则的序列化格式（在 JS 中定义规则比在 XML 中容易得多，并且更具可读性）和实际执行的代码（我使用 SpiderMonkey 来执行 C++<->JS）。但是您基本上可以使用任何具有 C++ 绑定的流行脚本语言来完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-05T11:55:03.693

很难从这样一个简短的描述中分辨出来，但我会让每个规则成为一个管理自己的条件和动作的对象。规则将由工厂从 XML 创建并存储在某种字典中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-05T12:41:07.373

我会考虑两种设计，一种是一次性评估器（您的应用程序使用一组规则与数据运行一次，然后退出）在这种情况下，我将使用带有回调的[XML SAX](http://en.wikipedia.org/wiki/Simple_API_for_XML)解析器来处理数据

另一种是 DOM 解析器，它使用由 Condition(Check) 类和 Action 类组合而成的 Rule Class 将规则缓存在内存中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-05T13:14:51.303

规则部分看起来有点像 Schematron：

[http://www.schematron.com/elements.html](http://www.schematron.com/elements.html)

这是一种用 XML 和 ISO 标准编写的 XML 验证语言。

假设源数据（正在验证）也在 XML 中，一种方法是将您的规则集转换为 Schematron（这在 XSLT 中并不难），然后使用 Schematron“基础结构”（即样式表）来根据 Schematron 文件验证您的内容。

这将生成一个结果 XML 文件，显示哪些规则已满足，哪些未满足；然后，您可以执行与每个已验证规则相关的“操作”（转换？）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-19T13:33:33.170

另请查看 RulesML ...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-01-22T16:09:30.753

用 XML 编写业务规则很笨重。此外，C++ 也不是一种很好的 XML 处理语言。

您的应用程序可以通过 Active Scripting 公开其属性，并在 VBScript/JScript 中编写规则。通过这种方式，您可以在运行时评估规则。

如果定义规则需要 XML，我会用 Java、JavaScript 或 XSLT 等高级语言单独编写处理器。在后台运行处理器并获取 C++ 应用程序中的返回值。

# c# - 默认启用 Nhibernate 过滤器

> ID：614442
> 
> 赞同：3
> 
> 时间：2009-03-05T11:45:04.030
> 
> 标签：c#, nhibernate

有没有办法确保默认启用过滤器（ ）而不是每次`<filter-def>`都调用？`session.EnableFilter("filter_name")`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2011-07-13T09:02:33.387

我知道这可能无法完全解决您的问题，但是如果您通过 IOC 容器连接对象或者您有一个创建会话的点，则可以做到这一点。

我如何处理它是在激活 ISession 时我默认切换了过滤器（使用 Autofac）：

```
 builder.RegisterAdapter<ISessionFactory, ISession>(factory => factory.OpenSession())
            .InstancePerHttpRequest()
            .OnActivated(activatedArgs =>
                         {
                             var session = activatedArgs.Instance;
                             session.EnableFilter(MyCustomFilter.Name);
                             session.BeginTransaction();
                         }); 
```

# asp.net - 如何使RequiredFieldValidator改变父div的css类

> ID：614445
> 
> 赞同：9
> 
> 时间：2009-03-05T11:46:24.680
> 
> 标签：asp.net, css

我有一个 TextBox 输入元素，它有一个RequiredFieldValidator，如下所示：

```
<div>
    <label>First name</label>
    <asp:RequiredFieldValidator ID="RequiredFieldValidatorFirstname" runat="server" ErrorMessage="Required" ControlToValidate="TextBoxFirstname"></asp:RequiredFieldValidator>
    <asp:TextBox ID="TextBoxFirstname" runat="server"></asp:TextBox>
</div> 
```

当提交时 TextBox 为空时，我想将“form-error”类添加到父 Div：

```
<div class="form-error">
    <label>First name</label>
    <asp:RequiredFieldValidator ID="RequiredFieldValidatorFirstname" runat="server" ErrorMessage="Required" ControlToValidate="TextBoxFirstname"></asp:RequiredFieldValidator>
    <asp:TextBox ID="TextBoxFirstname" runat="server"></asp:TextBox>
</div> 
```

这是可能的，如果是这样 - 我该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T18:20:40.707

使用以下内容：

```
<script>

    $(function(){
        if (typeof ValidatorUpdateDisplay != 'undefined') {
            var originalValidatorUpdateDisplay = ValidatorUpdateDisplay;

            ValidatorUpdateDisplay = function (val) {
                if (!val.isvalid) {
                    $("#" + val.controltovalidate).closest("div").addClass("form-error");
                }

                originalValidatorUpdateDisplay(val);
            }
        }
    });

</script> 
```

这段代码装饰了原始的 ValidatorUpdateDisplay 函数，该函数负责更新验证器的显示，更新控件以验证最近的 div。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-05T11:55:52.600

使用RequiredFieldValidator 你不能添加你的自定义代码。

您应该使用 asp.net [customvalidator 控件](http://quickstarts.asp.net/QuickStartv20/aspnet/doc/validation/default.aspx)，并编写您自己的自定义验证 javascript 函数，将类设置为 div。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-03-25T03:22:45.040

我认为您可能会发现以下选项很有用。基本上它会覆盖 ASP.NET 验证默认脚本之一。并在其中添加一些逻辑以在父 div 上添加/删除错误类。

我在执行此任务时遇到的问题是在触发验证后执行我的脚本，因为没有重新加载 DOM。通过覆盖原始验证脚本，您可以在验证显示更新时运行自己的脚本。

这样您就可以继续使用您的其他验证控件。您必须将脚本放在页面或母版页的底部。我还使用 JQuery 让事情变得更简单。

***请注意，以下代码要求您的验证器设置为动态显示。如果您不希望它们可见，您可以向它们添加一个 css 类并设置 display: none。**

```
<script type="text/javascript">
    function ValidatorUpdateDisplay(val) {
        if (typeof (val.display) == "string") {
            if (val.display == "None") {
                return;
            }
            if (val.display == "Dynamic") {
                val.style.display = val.isvalid ? "none" : "inline";
                return;
            }
        }
        if ((navigator.userAgent.indexOf("Mac") > -1) && (navigator.userAgent.indexOf("MSIE") > -1)) {
            val.style.display = "inline";
        }
        val.style.visibility = val.isvalid ? "hidden" : "visible";

        //---  Add / Remove Error Class
        var triggeredSiblings = 0;
        if (val.isvalid) {
            $(val).siblings('span').each(function () {
                if ($(this).isvalid == false) { triggeredSiblings = 1; }
            });
            if (triggeredSiblings == 0) { $(val).closest("div").removeClass("error"); }
        } else {
            $(val).closest("div").addClass("error");
        }
    }
</script> 
```

# python - 如何在 python 中为以下模式编写正则表达式？

> ID：614458
> 
> 赞同：0
> 
> 时间：2009-03-05T11:50:50.707
> 
> 标签：python, regex, string

如何在 python 中使用正则表达式查找以下模式？对于这两种情况

在“=”符号后寻找str2

*   情况1：`str1=str2`
*   案例二：`str1 = str2`

请注意，“=”符号的两侧之间可以有**空格或没有空格**

我的就是这样，但只适用于其中一种情况！

```
m=re.search('(?<=str\s\=\s)\w+','str = str2') 
```

返回 str2

帮助！

加思

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-05T12:08:53.503

如果您确实只有这么简单的字符串要解析，则不需要正则表达式。您可以对`=`结果元组的最后一个元素进行分区并剥离（甚至是 lstrip）：

```
>>> case = 'str = str2'
>>> case.partition('=')[2].lstrip()
'str2' 
```

它会比正则表达式快得多。只是为了展示我做了一个简单的测试有多快：

```
>>> timeit.timeit("'str1 = str2 '.partition('=')[2].strip()")
0.49051564213846177
>>> timeit.timeit("'str1 = str2 '.split('=')[1].strip()")
0.97673281637025866
>>> timeit.timeit('import re')
0.65663786250422618 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-05T11:57:28.430

```
re.search(r'=\s*(.*)', 'str = str2').group(1) 
```

或者如果你只想要一个词：

```
re.search(r'=\s*(\w+)', 'str = str2').group(1) 
```

扩展到特定的初始字符串：

```
re.search(r'\bstr\s*=\s*(\w+)', 'str=str2').group(1) 
```

`\b`= 单词边界，所以不匹配`"somestr=foo"`

一次遍历所有选项会更快，而不是一次搜索单个选项：

```
option_str = "a=b, c=d, g=h"
options = dict(re.findall(r'(\w+)\s*=\s*(\w+)', option_str))
options['c']  # -> 'd' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-10T08:25:01.737

只需使用拆分功能

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-05T12:14:37.453

如果您的数据是固定的，那么您可以在不使用正则表达式的情况下执行此操作。只需将其拆分为'='。例如：

```
>>> case1 = "str1=str2"
>>> case2 = "str1 = str2"

>>> str2 = case1.split('=')[1].strip()
>>> str2 = case2.split('=')[1].strip() 
```

该`YOURCASE.split('=')[1].strip()`声明适用于任何情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-06T10:24:49.457

相关想法：我发现在尝试找出正确模式时使用图形正则表达式工具很有帮助：http: [//kodos.sf.net](http://kodos.sf.net)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-05T13:09:22.470

两种情况：

*   （情况1）如果'='之前有一个空格，那么'='之后也**必须**有一个空格

    ```
    m=re.search(r'(?<=\S)(?:\s=\s|=)(\w+)','str = str2')
    print m.group(1) 
    ```

*   (情况 2) 否则，

    ```
    m=re.search(r'(?<=\S)\s?=\s?(\w+)','str = str2')
    print m.group(1) 
    ```

在第一种情况下，您也可以对第二个空格使用 "(?P= *…* .

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-05T11:56:41.350

如果您只想处理上述两种情况，我认为正则表达式是矫枉过正的。这就是我要做的-

```
>>> case1 = "str1=str2"
>>> case2 = "str1 = str2"
>>> case2.split()
['str1', '=', 'str2']
>>> ''.join(case2.split())
'str1=str2'
>>> case1[5:]
'str2'
>>> ''.join(case2.split())[5:]
'str2'
>>> 
```

## **假设**

我假设您正在寻找特定的令牌“str1”。我还假设 str1 可以分配不同的值。类似于您在配置文件中的内容 => propertyName = value。

这只是我的看法。

我知道其他方式是可能的！SilentGhost 提供了一个不错的（更好的！）替代方案。

希望这可以帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-05T12:09:23.753

扩展@batbrat 的答案和其他建议，您可以使用它`re.split()`来分隔输入字符串。该模式可以使用`\s`（空白）或显式空格。

```
>>> import re
>>> c1="str1=str2"
>>> c2="str1 = str2"
>>> re.split(' ?= ?',c1)
['str1', 'str2']
>>> re.split(' ?= ?',c2)
['str1', 'str2']
>>> re.split(r'\s?=\s?',c1)
['str1', 'str2']
>>> re.split(r'\s?=\s?',c2)
['str1', 'str2']
>>> 
```

# ruby-on-rails - Rails 2.2.2 中的动态脚手架

> ID：614462
> 
> 赞同：3
> 
> 时间：2009-03-05T11:52:22.047
> 
> 标签：ruby-on-rails, scaffolding

```
class AdminController < ApplicationController
  scaffold :product
end 
```

上面的代码在 Rails 1.2 中可以正常工作。但是对于上面提到的代码，它给出了 Rails 2.2.2 中缺少“脚手架”的错误方法。上面的代码用于 Rails 1.2 中的动态脚手架。Rails 2.2.2 支持这种动态脚手架吗？

还是我需要在 Rails 2.2.2 中使用 ruby​​ script/generate 'model_name' field_names 来生成静态脚手架？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-05T14:08:20.457

动态脚手架已被弃用。正如您所提到的，您应该使用以下方法生成它们：

```
./script/generate scaffold 
```

您可以在没有任何参数的情况下运行它以获取内置帮助和语法。

我记得阅读的原因（它甚至可能在这个站点上）是脚手架只是开始构建应用程序的一种方式，它生成的代码不应该用于生产站点。通过让脚手架生成代码供您编辑并满足您的需求，这比每次都生成代码要灵活得多。

# eclipse - 在 Eclipse 中使用 SVN Team 集成禁用终端访问

> ID：614463
> 
> 赞同：0
> 
> 时间：2009-03-05T11:52:29.660
> 
> 标签：eclipse, svn, macos, version-control

我将 Eclipse 与 Subversive SVN Team Provider 0.7.0.v20080425 以及安装在 OSX 10.5.6 上的 Subversion 的最新更新一起使用。

我的问题是，每当我将项目文件夹添加到 Eclipse 以启用团队集成时，它都会从终端中禁用 SVN 功能，并向我抛出以下错误消息：

> svn：这个客户端太旧了，不能使用工作副本'。'；请获取更新的 Subversion 客户端

即使我首先使用 OSX SVN 客户端通过终端签出一个项目，然后在文件夹上创建一个项目，Eclipse 似乎会覆盖设置。

这很痛苦，因为借助终端，我可以更好地控制任务，同时 Eclipses 集成对于快速提交、添加文件等简单操作非常好。

有人知道如何使两者都可以使用吗？（即如何停止 Eclipse 更改所需的 SVN 版本或使它们使用相同的版本）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-05T12:03:50.957

您的 Subversive 版本使用 Subversion 1.5 附带的更新的工作副本布局。升级`svn`您在命令行上使用的版本（我更喜欢[MacPorts](http://www.macports.org/ "MacPorts 主页")）或使用使用 1.4 时代工作副本布局的旧版本的 Subversive。

PS 我发现[Subclipse](http://subclipse.tigris.org/ "子剪辑主页")与 Subversive 以外的其他工具配合得更好。YMMV。

# java - 正则表达式匹配除某些分隔符以外的任何内容

> ID：614469
> 
> 赞同：1
> 
> 时间：2009-03-05T11:54:49.793
> 
> 标签：java, regex

我期待来自应用程序的字符串看起来像：

约翰|COL-DELIM|doe|COL-DELIM|55|ROW-DELIM|乔治|COL-DELIM|jetson|COL-DELIM|90|ROW-DELIM|

我想做两件事：

1) 验证字符串“看起来”是否正确（即它是否与正则表达式匹配）

2）拉出每一“行”，然后能够解析每一行

分隔符（|COL-DELIM| 和 |ROW-DELIM|）之间的值可以是任何值（不仅仅是字符串、数字等）。

((. *)(\|COL-DELIM\|)(.* )(\|COL-DELIM\|)(.*)(\|ROW-DELIM\|))+

自然，这对 (.*) 的事情不起作用……有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-05T12:07:49.870

人们似乎没有意识到他们不必为每项任务使用 RE（或 SQL，但这是另一个问题 :-)，尤其是那些具有过程代码的任务更干净。

如果您限制自己使用 RE，我认为这是缺乏远见。

我会简单地处理字符串，一个令牌一个令牌，其中一个令牌是以下之一：

*   一个非分隔符。
*   列分隔符。
*   行分隔符。

从一个空的列列表开始，然后提取（使用 indexOf/substring 的东西）直到第一个下一行/列分隔符，将该文本添加到列列表中。

如果分隔符是列，请继续。

如果分隔符是行，请检查列数并根据需要处理列表。

如果没有最终行分隔符并且列列表非空，则格式无效。

抱歉，如果您真的在使用 RE 方法，但我认为这里不需要（甚至不需要）。

伪代码（只是第一次剪切，可能有点错误）如下：

```
def processStr(s):
    if not s.endsWith ("|ROW-DELIM|"):
        error "Invalid format"
    columnList = []
    while not s.equals (""):
        nextRowDelim = s.indexOf ("|ROW-DELIM|")
        nextColDelim = s.indexOf ("|COL-DELIM|")
        if nextColDelim == NotFound:
            nextColDelim = nextRowDelim + 1
        nextDelim = minimumOf (nextRowDelim,nextColDelim)

        columnList.add (s.substring (0, nextDelim))
        s = s.substring (nextDelim)

        if nextDelim == nextRowDelim:
            s = s.substring (length ("|ROW-DELIM|"))
            processColumns (columnList)
            columnList = []
        else:
            s = s.substring (length ("|COL-DELIM|")) 
```

您可以轻松添加代码以检查此代码中的正确列数，或者`processColumns()`如果您愿意，可以在 中添加代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-05T12:09:18.307

您不必使用`".*"`来匹配“任何东西”。事实上，大多数时候，`".*"`是错误的。

如果您的 col-delim 是单个字符（例如“;”），您可以使用它来匹配列：

```
[^;]*                      // "anything that's *not* a semi-colon"
([^;]*);([^;]*);([^;]*)\n  // three columns, ending with \n 
```

由于这个任务本质上是解析 CSV，而 regex 并不完全是解析的最佳工具，我建议你找一个 Java CSV 解析包。

如果`"|COL-DELIM|"`并且`"|ROW-DELIM|"`确实是固定的字符序列，我建议您`split()`使用它们上的字符串而不是依赖正则表达式。

*   拆分`"|ROW-DELIM|"`以获取“行”字符串数组
*   拆分每个“行” - 字符串`"|COL-DELIM|"`以获取列数组
*   检查数组长度以确保您拥有正确的列数
*   迭代列数组以处理数据。

这种方法当然也适用于单字符分隔符。

# mysql - 在 MySQL 中存储 SHA1 哈希值

> ID：614476
> 
> 赞同：160
> 
> 时间：2009-03-05T11:57:16.963
> 
> 标签：mysql, database-design, hash, sha1

当我想将 SHA1 哈希的结果存储在 MySQL 数据库中时，我遇到了一个简单的问题：

我存储哈希结果的*VARCHAR*字段应该多长时间？

* * *

## 回答 #1

> 赞同：316
> 
> 时间：2009-03-05T12:00:39.560

我将`VARCHAR`用于可变长度数据，但不适用于固定长度数据。因为 SHA-1 值*始终*是160 位长，所以`VARCHAR`会浪费[一个额外的字节用于固定长度字段的长度](http://dev.mysql.com/doc/refman/5.1/en/storage-requirements.html)。

而且我也不会存储[`SHA1`](http://dev.mysql.com/doc/refman/5.1/en/encryption-functions.html#function_sha1)返回的值。因为它每个字符只使用 4 位，因此需要 160/4 = 40 个字符。但是如果你使用每个字符 8 位，你只需要一个 160/8 = 20 个字符长的字段。

所以我建议你使用[`BINARY(20)`](http://dev.mysql.com/doc/refman/5.0/en/binary-varbinary.html)和[`UNHEX`函数](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_unhex)将`SHA1`值转换为二进制。

`BINARY(20)`我比较了和的存储要求`CHAR(40)`。

```
CREATE TABLE `binary` (
    `id` int unsigned auto_increment primary key,
    `password` binary(20) not null
);
CREATE TABLE `char` (
    `id` int unsigned auto_increment primary key,
    `password` char(40) not null
); 
```

百万条记录`binary(20)`需要 4456 万，而`char(40)`需要 6457 万。 `InnoDB`引擎。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2009-03-05T11:58:50.703

SHA1 哈希是 40 个字符长！

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-07-28T19:56:37.303

**[参考来自这个博客：](http://www.dbrnd.com/2016/07/mysql-choose-data-type-and-length-of-the-secure-hash-algorithm-sha/)**

**以下是哈希算法列表及其所需位大小：**

*   MD5 = 128 位哈希值。
*   SHA1 = 160 位哈希值。
*   SHA224 = 224 位哈希值。
*   SHA256 = 256 位哈希值。
*   SHA3​​84 = 384 位哈希值。
*   SHA512 = 512 位哈希值。

**使用需要 CHAR(n) 创建了一个示例表：**

```
CREATE TABLE tbl_PasswordDataType
(
    ID INTEGER
    ,MD5_128_bit CHAR(32)
    ,SHA_160_bit CHAR(40)
    ,SHA_224_bit CHAR(56)
    ,SHA_256_bit CHAR(64)
    ,SHA_384_bit CHAR(96)
    ,SHA_512_bit CHAR(128)
); 
INSERT INTO tbl_PasswordDataType
VALUES 
(
    1
    ,MD5('SamplePass_WithAddedSalt')
    ,SHA1('SamplePass_WithAddedSalt')
    ,SHA2('SamplePass_WithAddedSalt',224)
    ,SHA2('SamplePass_WithAddedSalt',256)
    ,SHA2('SamplePass_WithAddedSalt',384)
    ,SHA2('SamplePass_WithAddedSalt',512)
); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-03-05T12:03:06.200

sha1 的输出大小为 160 位。这是 160/8 == 20 个字符（如果您使用 8 位字符）或 160/16 = 10（如果您使用 16 位字符）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-05T12:17:00.833

所以长度在 10 个 16 位字符和 40 个十六进制数字之间。

在任何情况下，决定您要存储的格式，并根据该格式使字段的大小固定。这样你就不会浪费任何空间。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-05-25T22:26:15.277

在您不总是为用户存储哈希的情况下（即验证帐户/忘记登录 url），您可能仍希望使用 VARCHAR。一旦用户验证/更改了他们的登录信息，他们就不应该能够使用哈希并且应该没有理由这样做。您可以创建一个单独的表来存储临时哈希-> 可以删除的用户关联，但我认为大多数人不会费心去做。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-31T07:42:55.537

如果您需要 sha1 列上的索引，出于性能原因，我建议使用 CHAR(40)。在我的情况下，sha1 列是一个电子邮件确认令牌，因此在登录页面上，查询仅使用令牌输入。在这种情况下，我认为带有 INDEX 的 CHAR(40) 是最好的选择:)

如果要采用这种方式，记得留$raw_output = false。

# c# - 如何提高 Mono 中 winforms 应用程序的性能？

> ID：614478
> 
> 赞同：1
> 
> 时间：2009-03-05T11:58:39.143
> 
> 标签：c#, winforms, performance, mono, gtk#

我有一个在 C# 中使用 Windows 窗体的远程处理应用程序（2 名玩家 Magic the Gathering Game），我看到单声道的性能很差。我能想到的可能会影响性能的一件事是我有按钮背景和表单背景（.png）的自定义图像。此外，我大量使用卡片图像（.jpg）。最后，我非常严格地坚持使用 .NET 2.0。

我可以寻找什么来提高单声道的 Windows 窗体性能？如果这是不可能的，是否有一个快速的 gtk# 转换器或工具可以帮助转换？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-05T12:10:12.270

您是否尝试[分析您的代码](http://www.mono-project.com/Performance_Tips)。也许这会告诉你瓶颈在哪里......

我认为一个大问题是

> .Net 实现是对 Win32 工具包的绑定，而 Mono 实现是用 C# 编写的，以允许它在多个平台上工作

[正如这里](http://www.mono-project.com/Gui_Toolkits)提到的和

> Mono 中的 System.Windows.Forms 是使用 System.Drawing 实现的。所有控件都是通过 System.Drawing 本地绘制的。System.Windows.Forms 实现自己的驱动程序接口以与主机操作系统窗口系统进行通信。

[如此处](http://www.mono-project.com/WinForms)所述。

我不知道从 winforms 到 gtk# 的转换器...，但如果您真的想费心将您的游戏转换为 gtk#，[这](http://mono-project.com/GtkSharpTutorials)可能是一个很好的起点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-15T20:48:46.147

如果您能详细说明您正在观察到的性能问题是什么，那将会很有用。

由于试图支持正确嵌入其中的 WndProc 模型所带来的一些要求，如今 Mono 的 Windows.Forms 实现有点慢。

这是一个可以改进的领域，很可能 Wine 的许多经验教训都可以应用于 Mono 的 Winforms 实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-05T12:10:03.360

您是否尝试过对其进行分析？Mono 有一个内置的分析器。[单声道网站上有一个关于单](http://www.mono-project.com/Performance_Tips)声道分析器和其他性能提示的页面。

# winforms - 使用动态 ToolStripItem 进行事件处理

> ID：614482
> 
> 赞同：1
> 
> 时间：2009-03-05T12:00:01.467
> 
> 标签：winforms, event-handling

我正在尝试使用以下代码将项目动态添加到工具条中：

```
contextMenuStrip.Items.Add(string.Format("{0} kB/s", currSpeed), null, new EventHandler(Connection.SetSpeed)); 
```

问题是我需要将参数传递给 Connection.SetSpeed: currSpeed (int)。我怎样才能做到这一点？

谢谢你的时间。最好的祝福。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-05T12:31:22.593

调用 add 将返回一个 ToolStripItem，如果您将其 Tag 属性设置为 currSpeed 变量，您应该能够在单击项目时通过 Connection.SetSpeed 方法中的 sender 参数将该 ToolStripItem 拉出...

```
ToolStripItem item = contextMenuStrip.Items.Add(string.Format("{0} kB/s", currSpeed), null, new EventHandler(Connection.SetSpeed));
item.Tag = currSpeed;

void Connection.SetSpeed (object sender, EventArgs e)
{
    ToolStripItem item = (ToolStripItem)sender;
    int currSpeed = (int)item.Tag;

    // Do stuff...
} 
```

# asp.net - 如何在 web.sitemap 中实现本地化

> ID：614484
> 
> 赞同：7
> 
> 时间：2009-03-05T12:01:01.777
> 
> 标签：asp.net, localization

你能解释一下如何在 web.sitemap 中实现本地化吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2010-07-26T10:22:17.507

如果你有全球资源，你可以像这样使用它

```
<siteMapNode url="~/Default.aspx" Title="$resources:SiteMapLocalizations,HomePageTitle"></siteMapNode> 
```

其中 SiteMapLocalizations: 是资源名称 HomePageTitle: 你的资源键

参考：http: [//msdn.microsoft.com/en-us/library/ms178427.aspx](http://msdn.microsoft.com/en-us/library/ms178427.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-05T12:07:34.443

使用全局资源文件。

```
App_GlobalResources\Web.sitemap.resx 
```

然后使用 web.sitemap 中的键，例如；

```
<siteMapNode url="somepage.aspx" title="Name"  resourceKey="PageName"/> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-21T18:18:44.390

值得注意的是，您还需要设置`enableLocalization="true"`at`siteMap`标签。否则它将无法正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-12T18:14:44.507

1)在 Web.sitemap 文件的根节点中添加一个`enableLocalization='true'`属性。`<siteMap>`

2)为Web.sitemap 文件中的每个节点添加一个唯一的`resourceKey`属性。`<siteMapNode>`

3) 在 GlobalResources 目录下新建一个`Web.sitemap.resx`资源文件。

4) 打开新`Web.sitemap.resx`文件。`<siteMapNode>`将您在步骤 2 中创建的每个 resourceKey 属性添加到 Name 列下的资源列表中，然后`.Description`设置本地化描述，并`.Title`设置本地化标题。然后显示的文本进入值列。

请注意，Visual Studio 将使用红色感叹号标记每个资源条目，表示它是无效标识符 - 忽略警告。

例如，如果您`<siteMapNode>`有一个`resourceKey`“示例”，则本地化的描述标签将为 Example.Description，本地化的标题标签将为 Example.Title

那应该这样做。然后，您可以通过复制 resx 文件并重命名副本以适应新文化来提供其他语言的翻译。

如果不起作用，请确保新资源文件位于 GlobalResources 目录中，而不是 LocalResources 中。还要确保 OutputCache 被禁用。

# vb.net - VB.NET 和 Windows 窗体中的文本框验证

> ID：614488
> 
> 赞同：2
> 
> 时间：2009-03-05T12:02:33.207
> 
> 标签：vb.net, winforms, textbox

我正在使用以下代码来验证用户输入的文本。它工作得很好。但我想添加退格功能，以便用户删除错误输入的号码。

我已经尝试了几件事，但它们在最后一个数字之前（小数点之后）起作用了，即它不允许在完全输入数字后删除。数字输入格式为：12313213.45

我该怎么办？

```
Private Sub TextBox5_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles TextBox5.KeyPress

    'validation '
    Dim KeyAscii As Short = Asc(e.KeyChar)
    If Not ((KeyAscii >= System.Windows.Forms.Keys.D0 And KeyAscii <= System.Windows.Forms.Keys.D9) Or (KeyAscii = System.Windows.Forms.Keys.Back) Or Chr(KeyAscii) = "." Or (Chr(KeyAscii) Like "[ ]")) Then
        KeyAscii = 0
        TextBox5.Focus()
    End If
    If KeyAscii = 0 Then
        e.Handled = True
    End If

    If TextBox5.Text.IndexOf(".") >= 0 And e.KeyChar = "." Then
        e.Handled = True
    End If

    If TextBox5.Text.IndexOf(".") > 0 Then
        If TextBox5.SelectionStart > TextBox5.Text.IndexOf(".") Then
            If TextBox5.Text.Length - TextBox5.Text.IndexOf(".") = 3 Then
                e.Handled = True
            End If
        End If
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-05T12:53:36.673

更好的方法是使用支持小数的控件（如果您使用的是基础设施、componentone、devexpress 等）。用户可以获得视觉提示，并且可以做一些简洁的事情，例如单击箭头来推进数字。

如果您使用的是普通的旧 winform，请查看蒙版编辑控件。

就我个人而言，当应用程序试图纠正我并且我还没有完成输入数据时，我发现它非常**令人恼火。**让用户完成然后在有任何问题时通知他们对用户来说更加友好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T12:23:46.247

有一种更简单的方法来验证这一点。尝试将编辑框中的文本转换为浮点数。如果捕获异常，则该数字无效。

试图通过击键来验证击键会让你很头疼。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-11-11T05:20:42.383

```
txtMobil.Text = Format(txtMobil.Text, "###-###-####") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-07T15:27:58.920

我认为下面的链接应该给你你所追求的东西：

[数字文本框](http://www.codeproject.com/KB/vb/NumericTextBox.aspx)

虽然它需要大量的代码来处理每次按键的验证，但这当然是可能的，并且上面的代码似乎处理了删除、退格、复制/粘贴等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-05T12:42:10.787

不要尝试一次验证一个击键。
1）您刚刚发现退格需要更多代码，现在添加对剪切/复制和粘贴的支持，并且删除键和键入替换选择。代码不是很好。
2）它只会让用户感到困惑。或者更糟糕的是，他们尝试输入 a 。将日期分隔到您的字段中，您可以通过忽略第二个来将该日期强制转换为合法数字。他们现在输入了一些完全错误的东西，你的程序不会告诉他们。
文本框的验证事件是这种逻辑应该去的地方。它会在焦点移动到另一个控件时触发（其 CausesValidation 属性为 true，这允许即使当前控件未处于有效状态也可以单击取消按钮）。
在验证事件中，您可以进行所有需要的检查，如果数据无效则取消该事件，以及显示您需要的任何消息。为了验证我建议从 Single.TryParse 开始的值，然后如果转换成功，您可以继续执行您需要的任何范围检查。TryParse 比@Bork 的建议更好，因为它更易于阅读并避免抛出/捕获不必要的异常。

编辑：刚刚注意到您还限制了输入文本的长度。您可以通过设置 TextBox 的 MaxLength 属性来做到这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-08-27T21:05:30.823

或者对困难的东西使用正则表达式

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-11-06T22:53:07.177

是的，或者只是使嵌套的 if...then 块看起来像这样：

```
If Textbox5.Text.IndexOf(".") > 0 Then
    If Textbox5.SelectionStart > Textbox5.Text.IndexOf(".") Then
        If Textbox5.Text.Length - Textbox5.Text.IndexOf(".") = 3 Then
            If KeyAscii <> System.Windows.Forms.Keys.Back Then e.Handled = True
        End If
    End If
End If 
```

# c++ - 如何找到我的程序的 main(...) 函数？

> ID：614492
> 
> 赞同：8
> 
> 时间：2009-03-05T12:03:38.057
> 
> 标签：c++, unix, gcc, gdb

我目前正在将一个包含数百个代码文件和依赖项的项目移植到几个第三方库到 Mac Os 上。我终于达到了程序编译没有警告或错误的地步，但它似乎没有执行我自己的 main 函数。

相反，它似乎执行了一些其他似乎属于第三方的主要功能。此函数将一些诊断数据写入控制台，然后退出：

```
(gdb) continue
Current language:  auto; currently c++
//
// This is an automatically generated file.
// Do not edit.
//

const unsigned short expTable[] =
{
    0x3c00, 0x3c00, 0x3c00, 0x3c00, 0x3c00, 0x3c00, 0x3c00, 0x3c00, 
...
    0x3c00, 0x3c00, 0x3c00, 0x3c00, 0x3c00, 0x3c00, 0x3c00, 0x3c00, 
};

Debugger stopped.
Program exited with status value:0. 
```

我无法使用调试器找出这个 main 函数所在的位置，因为虽然堆栈跟踪似乎有效，但 gdb 没有向我显示每个堆栈条目的正确行号和文件名（有关详细信息，请参阅[这个未解决的问题](https://stackoverflow.com/questions/594782/gcc-debugger-stack-trace-displays-wrong-file-name-and-line-number)）。

搜索需要几分钟才能完成，但没有返回任何结果。

我的项目在其他库中使用 SDL，但我获得了 SDL_Main() 和潜在问题的奖励，并且在完美运行的 SDL 项目模板之上构建了我的项目。所以我很确定我自己的主要功能是有效的。

你知道可能出了什么问题吗？我目前对如何查找和删除流氓主要功能一无所知。

谢谢，

阿德里安

**编辑：**正如我刚刚发现的那样，我在使用字符串“这是自动生成的”搜索文件文件时犯了一个错误。我刚刚发现了几十个具有相同字符串的文件，它们都属于我正在使用的第三方库之一 FreeImage。因此，问题似乎与 FreeImage 有关，但我仍然不确定如何继续，因为我已将 Freeimage 编译为包含 MacOs makefile 的库并且仅包含该库。我会尝试重建一个更新版本的 FreeImage 并查看它是否解决了我的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-05T12:22:15.563

它可能是在调用 main() 之前失败的静态对象的初始化程序吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-05T13:33:35.580

你有几个主要的二进制文件吗？尝试使用`nm`它。*（它不应该`ld`与重复链接，但进入动态库并在`_main`那里寻找）*

```
nm a.out | grep -5 _main 
```

`_main`这应该在二进制文件中找到之前和之后给出 5 行`a.out`

如果您有多个，请查看周围的符号以提示它们位于哪些部分...

下一步可以对使用的每个动态库执行相同的操作。要获取使用的动态库的列表，请使用 `otool`

```
otool -L a.out 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-05T12:24:46.743

我不确定如何找到另一个，但您可以明确指定自己的入口点并使另一个不使用。您可以使用 GNU 链接器[ld](http://unixhelp.ed.ac.uk/CGI/man-cgi?ld) -e 选项来设置您的入口点。

> -e 条目
> 
> --entry=条目
> 
> 使用 entry 作为开始执行程序的显式符号，而不是默认的入口点。如果没有名为 entry 的符号，链接器将尝试将 entry 解析为一个数字，并将其用作入口地址（该数字将以 10 为基数解释；您可以使用前导 0x 表示基数 16，或者以 8 为基数的前导 0）。

对于未来的读者，如果您在 Windows 中遇到此问题。等效的链接器选项是[/ENTRY](http://msdn.microsoft.com/en-us/library/f9t8842e(VS.71).aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-05T12:06:55.427

您是否尝试通过运行您的可执行文件`nm`？或许能给你一些提示。我认为不可能将一个程序与多个名为 的全局可见函数链接起来`main()`，但不确定这是如何实现的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-05T12:25:52.120

查看您包含的头文件，看看是否没有重新映射`main`到其他内容的定义。这是确保首先调用库的主要功能以进行某些设置的老技巧。通常，它最终会通过引用重新定义的值来调用您的 main 函数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-05T12:30:13.093

快速破解：

```
readelf -s -w my_bin_file > temp.txt 
```

打开 temp.txt，搜索 main（在一列中带有 FUNC） 向上直到找到第一个 FILE 列 - 这是带有链接 main 的文件。

**编辑：**这只适用于 GNU Unix 风格和朋友。OS X 使用 Mach-O 格式，而不是 ELF。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-05T12:45:44.087

我知道在 C 中，您可以在 main 函数之前调用不同的入口点，这可能是一个想法。代码通常如下所示：

```
void __attribute__ ((constructor)) my_main(void); 
```

也许您可以在代码中搜索类似的内容。

在 C 中，也有不同的方法来捕获主函数并在“真正的”主函数之后调用它。一些线程库为了“准备”环境、调度程序和类似的东西而进行了这种黑客攻击。

这并不是很有用，但这可以解释为什么你的 main 根本没有被调用。

希望这可以帮助！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-05T13:39:47.530

另一个注意事项。

WxWidgets 也定义了自己的`main`

从[这里](http://www.wxwidgets.org/docs/tutorials/hello.htm)

> 与所有程序一样，必须有一个“主要”功能。在 wxWidgets 下 main 是使用这个宏实现的，它创建一个应用程序实例并启动程序。
> 
> `IMPLEMENT_APP(MyApp)`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-06T11:04:07.690

看起来您可以将一个名为的文件`b44ExpLogTable.cpp`编译到您的二进制文件或某个第三方库中。看起来那个小程序是生成一个 exp() 表，但不知何故被导入到您的项目中

[在FreeImage 资源](http://freeimage.cvs.sourceforge.net/viewvc/freeimage/FreeImage/Source/OpenEXR/IlmImf/b44ExpLogTable.cpp?revision=1.1&view=markup)中查看[这个](http://tinyurl.com/cjwv22)和这个

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-06T11:33:49.587

生成地图文件。大多数程序实际上并不是从 main 开始的。来自 GCC 的映射文件应该告诉您 __start 或 __executable_start 的地址，您应该能够闯入并逐步查看导致程序退出的原因。

# actionscript-3 - 在 Actionscript 3.0 中调用共享对象的远程方法

> ID：614499
> 
> 赞同：0
> 
> 时间：2009-03-05T12:06:02.810
> 
> 标签：actionscript-3

我不会向 AS3 中的远程共享对象添加方法。在 AS2 中，此代码用于工作

```
SharedObjectName.MethodName = function(){} 
```

但此代码不适用于 AS3。我在 Google 和其他 AS3 论坛中进行了搜索，但没有得到任何帮助。

谁能给我指点一下。

谢谢， 苏米特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-05T12:15:15.267

SharedObject 不是动态类，这意味着您不能像 JavaScript 那样向它添加属性（显然，AS2 中的对象的行为方式相同，但我从未使用过 AS2，所以我不知道）。根据您要执行的操作，您可能希望继承 SharedObject 或创建一个包装类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-07T14:21:11.033

好的，我终于以某种方式解决了，

这就是我所做的

类 abc { 公共函数 MessageFromServer() {

}

SharedObject.client=这个；这允许 FMS 服务器控制我想要的这个客户端的公共方法。

在 FMS 中，我可以将其称为 -

SharedObject.call("MessageFromServer")

# java - Java中是否有错误处理API/框架？

> ID：614500
> 
> 赞同：0
> 
> 时间：2009-03-05T12:06:12.823
> 
> 标签：java, api, error-handling

在服务器上可能会发生不同的临时（暂时）错误。例如 OutOfMemoryError 或与数据库的连接断开。

我认为在短时间内重复这样的工作是个好主意。当然它不应该是一个无限循环，因为错误不是暂时的。

有什么好的 API 来帮助它吗？或者指导我如何自己实现它。它应该有如下参数：

*   重复计数
*   最大执行时间
*   需要空闲内存
*   ETC

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T12:11:29.270

这个一般概念通常被称为断路器模式。谷歌有一个[有趣](http://www.google.com/search?client=opera&rls=en&q=circuit-breaker+pattern&sourceid=opera&ie=utf-8&oe=utf-8)的实现想法列表。

# struts - 为什么在 struts 1.* forward 中使用'redirect=true'？

> ID：614516
> 
> 赞同：24
> 
> 时间：2009-03-05T12:10:38.507
> 
> 标签：struts

我`ActionMessages`在执行未显示的操作期间遇到了一些问题，我发现我的问题是由于我的前锋`redirect=true`在 struts-config.xml 中。

由于默认行为是`redirect=false`，我一直在考虑可以使用哪些好处`redirect=true`，但找不到任何答案。有谁知道何时以及为什么`redirect=true`应该在行动前锋中使用？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-03-05T12:20:35.707

它可以防止“双重提交问题”

**从不显示响应 POST 的页面**

**始终使用 GET 加载页面**

**使用 REDIRECT 从 POST 导航到 GET**

更多关于[这里](https://www.theserverside.com/news/1365146/Redirect-After-Post)和[这里](https://www.theserverside.com/news/1365142/Redirect-After-Post-2)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2009-03-11T20:45:14.070

重定向向浏览器发送响应，强制浏览器发出新请求。从服务器的角度来看，浏览器只是发出一个新请求（尽管是自动的）。重定向的一些特征：

*   处理现有的参数和属性，使用您在 URL 中指定的参数形成一个新的请求。
*   新 URL 在浏览器中可见，用户可以为其添加书签。
*   它需要访问浏览器并返回，因此它可能会更慢。

转发发生在服务器上。浏览器不参与其中。前锋的一些特点：

*   添加新参数或覆盖现有参数。因此无法从请求中删除现有参数。
*   可以在请求上下文中添加东西，它将保持可用。您可以通过这种方式传递信息。
*   URL 在浏览器中没有改变，对于浏览器来说，原始地址保持不变。
*   您只能转发到同一应用程序中的另一个 URL。

所以这取决于你想要完成什么。前锋通常说得更快。但是，如果用户应该能够为新位置添加书签，则不是一种选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-02T11:06:18.913

如果您指定 `redirect="true"`，则 Struts 使用客户端重定向 [ `response.sendRedirect()`]。JSP 将被新的浏览器请求调用，并且存储在旧请求中的所有数据都将丢失。

# c# - 在 Win 表单应用程序中持久化表单数据

> ID：614517
> 
> 赞同：2
> 
> 时间：2009-03-05T12:10:58.820
> 
> 标签：c#, winforms

在 C# winforms 应用程序中，将数据保存在另一个表单打开的表单上的正常方法是什么？我本来打算只将它全部保留在表单对象上，但是当表单关闭时，似乎该表单对象已被处置。意思是我丢失了所有数据。

我可以将表单包装在另一个对象中，该对象将所有数据从中取出，但这似乎需要做很多工作。

有没有办法在关闭时隐藏表单而不是处理它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-05T12:15:22.070

2种可能性：

1）捕捉关闭事件并隐藏它。创建函数（隐藏形式）以使用属性获取输入值。

```
private void Form1_Closing(object sender, System.ComponentModel.CancelEventArgs e)
{
    this.Visible = false;
    e.Cancel = true;
} 
```

2）Moj告诉我们：如果你在创建表单后关闭它，表单对象仍然是活动的并且可以访问

我赞成 2) + 属性

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T12:17:10.787

使用公共属性。

*   在关闭之前，用相应的值填充这些属性（即 this._userName = txtUsername.Text）
*   关闭表格
*   在表单的父对象中，您仍然可以调用 dialog.Username 来读取值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-05T12:19:25.913

关闭表单时不会处理。通常这是管理数据的方式。

```
 Result res;
  using (MyForm form = new MyForm())
  {
      if(form.ShowDialog()== DialogResult.OK) 
      {
         // In Myform, after the data collection is done, you can set  DialogResult=DialogResult.Ok and close form using form.Close(); 
         res = form.Result; // expose forms data as result.                              
      }
  }
  UserResult(res); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-05T13:12:52.773

我建议您构建一个包含数据的单独对象。您可以以非常简单的方式将表单控件绑定到其属性（支持设计器，无需代码）。这使您的数据与表单分离。

如果您还不知道此文档： [如何：在 Windows 窗体上创建简单绑定控件](http://msdn.microsoft.com/en-us/library/sw223a62.aspx)

马蒂亚斯

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-05T13:22:59.130

您可以隐藏表单与处理它，但这几乎肯定不是您想要的。如果您只是隐藏表单，表单会占用进程中不会释放的资源。只有当你处理掉它时，它们才会消失。在不使用它们时保留一堆 Form 实例只是在以后提出问题。

您可能想要做的是在表单完成显示但实际关闭之前从表单传回一些结果数据。例如，

```
MyDataObject data;
using (var form = new SomeForm() ) {
  var dialogResult = form.ShowDialog(someWindow);
  data = form.InterestingData;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-05T12:38:49.533

访问子窗体的控件在技术上是可行的，但不是一个好的设计。这是我的做法：

1) 在接受/保存按钮上，将“确定”设置`this.DialogResult`为“确定”，并获取所有控件信息。在关闭按钮或/和关闭事件设置`this.DialogResult`为“取消”

2）如果数据映射到一个对象（让我们说“客户”）......设置对象属性。如果没有，只需使用属性公开每个控件的数据，处理所有需要的格式。

`this.Close();`3) 使用not dispose关闭表单。

4）在您的父表单上检查是否 dialog.ShowDialog() == DialogResult.OK 然后访问您在步骤 2 中创建的公共属性...或者如果您使用信息加载一个对象，只需访问表单中的该对象（也由一个属性）

5）然后调用该`dialog.Dispose()`方法...用户按下确定或取消。

希望这可以帮助你...

# python - 用于计算间隔的工具/库，例如“本月的最后一个星期四”

> ID：614518
> 
> 赞同：2
> 
> 时间：2009-03-05T12:11:07.133
> 
> 标签：python, datetime, date

我正在寻找一个命令行工具或某种 python 库（然后我可以包装），这样我就可以计算像“本月的最后一个星期四”这样指定的日期。

即我想让人们像上面那样输入人类友好的文本，它应该能够计算任何月/年/任何满足这一点的所有日期。

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-05T13:03:01.517

mxDateTime 和 Datejs 和 webservice 都不支持“本月的最后一个星期四”。OP 想知道这个月的最后一个星期四，比如说一整年。

mxDateTime 支持这些操作，但问题必须用 Python 代码提出，而不是字符串。

我能想到的最好的是[parsedatetime](http://code.google.com/p/parsedatetime/)，但这不支持“本月的最后一个星期四”。它确实支持：

```
>>> c.parseDateText("last thursday of april 2001")
(2001, 4, 20, 13, 55, 58, 3, 64, 0)
>>> c.parseDateText("last thursday of may 2001")
(2001, 5, 20, 13, 56, 3, 3, 64, 0)
>>> c.parseDateText("last thursday of may 2010")
(2010, 5, 20, 13, 56, 7, 3, 64, 0)
>>> 
```

（请注意，DateJS 和 Web 服务都不支持这种语法。）

**编辑**：嗯，好的，但是虽然年份和月份是正确的，但日期却不是。2001 年 4 月的最后一个星期四是 27 日。我认为您将不得不在这里推出自己的解决方案。

它不支持：

```
>>> c.parseDateText("last thursday of 2010")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "parsedatetime/parsedatetime.py", line 411, in parseDateText
    mth = self.ptc.MonthOffsets[mth]
KeyError
>>> 
```

因此，一种可能性是文本替换：将字符串规范化为小写、单个空格等，然后为您感兴趣的每个月份执行“月份”的字符串替换。您可能需要调整您找到的任何解决方案. 例如，在他为在线音乐日历系统编写[的 Skip Montanaro 的一些旧代码中：](http://web.archive.org/web/20050309211440/manatee.mojam.com/~skip/python/dates.py)

```
 # someone keeps submitting dates with september spelled wrong...
     'septmber':9, 
```

或者您在 mxDateTime 之上编写自己的解析器，使用上述所有链接作为参考。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-05T12:21:15.563

[我认为你可以只使用 Python 的标准日历](http://docs.python.org/library/calendar.html#module-calendar)模块，也许通过在这些方法之上添加一些“人类友好”的方法来取得相当大的进展。该模块为您提供日期迭代器，同时考虑周数，等等。

首先，我想您必须回答“有哪些对人类友好的方式来谈论日期？”这个问题，我想这已经超过了这个问题的一半难度。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-05T13:03:52.483

算法并不难。它们在下面的书中提供，值得每一分钱。

[http://emr.cs.iit.edu/home/reingold/calendar-book/third-edition/](http://emr.cs.iit.edu/home/reingold/calendar-book/third-edition/)

一般的方法是找到所需月份的第一天。然后，您可以减去一天以找到所需月份的最后一天。然后你计算你想要的星期几相对于你找到的星期几的偏移量。

假设你有一个`datetime.dat`e, `d`。您可以通过计算下个月的开始减去一天来计算月底。

```
monIx= d.year*12 + (d.month-1) + 1
endOfMonth= datetime.date( monIx//12, monIx%12+1, 1 ) - datetime.timedelta( days=1 ) 
```

此时，您正在寻找一周中所需日期的偏移量。在这种情况下，所需的星期几是星期四，即`3`.

```
dayOffset =  ((3 - endOfMonth.weekday()) -7 ) % -7 
lastDay = endOfMonth + datetime.timedelta( days=dayOffset ) 
```

获取星期偏移的一般方法需要一些思考，但只有少数案例组合可供试验。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-05T17:20:41.850

我不完全确定，但您可能会查看 Python [DateUtil](http://labix.org/python-dateutil)模块。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-05T12:21:06.423

好吧，不知道这样的库是否存在，但`date`来自 GNU coreutils 有这样的东西：

```
$ date -d "last monday"
Mon Mar  2 00:00:00 RST 2009 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-05T12:32:41.917

使用**mxDateTime**。[http://www.egenix.com/products/python/mxBase/mxDateTime/](http://www.egenix.com/products/python/mxBase/mxDateTime/)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-03-05T12:46:27.563

如果这是针对 Web 应用程序的，请查看[Datejs](http://www.datejs.com/)，在您的表单中使用它可能更容易，然后只需将其日期对象的值传递给 Python。

如果您最终自己编写了一个，那么源代码也可能会有所帮助。

# javascript - 没有 php 或 asp.net 等的 blogengine

> ID：614519
> 
> 赞同：6
> 
> 时间：2009-03-05T12:11:26.540
> 
> 标签：javascript, html, blogs

有没有办法将博客直接集成到我的 HTML/javascript-only 网站中，而不必拥有 SQL 数据库和 PHP 或 MySQL 等动态引擎？

也许网络上有一些服务可以提供这个（希望没有广告:)）。或者也许我可以拥有一个完全用 javasript 编写的博客引擎？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T13:04:38.767

这是一个想法。它不是一个真正的博客引擎 - 而是一个 wiki。

完全是 javascript/html/css。所有人都存在于一个 html 文件中：

[http://www.tiddlywiki.com/](http://www.tiddlywiki.com/)

不确定它如何在真实的现场网站上工作，但他们的网站正在使用它：

> ```
> * A personal notebook
> * A GTD ("Getting Things Done") productivity tool
> * A collaboration tool
> * For building websites (this site is a TiddlyWiki file!)
> * For rapid prototyping
> * ...and much more! 
> ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-05T12:16:12.613

完全用 JavaScript 编写？当然，这首先破坏了拥有“博客引擎”的全部意义吗？关键是数据存储在某处并动态检索。为了避免使用任何服务器端（这似乎是您的意图），并且只使用 HTML/JavaScript，您必须将博客的所有数据存储在提供给每个访问者的文件中，然后检索数据来自使用 JavaScript 的特定本地位置。

抱歉，如果我误解了这里的意思……但这似乎是一种完全无用的尝试做事的方式。一般来说，博客要么是静态编写的（用 HTML 编写[尽管这种情况很少见]），要么是通过服务器端脚本语言从数据库动态生成的（最常见的）。

**编辑：**另外一点，我想您可以通过使用 JavaScript 在您的页面中包含一些第三方博客提要或服务......但我不确定哪些（如果有）博客服务会直接支持这种工作方法。此外，这是在页面中包含第三方数据的一种非常不可靠的方式......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-05T13:48:11.613

你可以使用[github pages](http://github.com/blog/272-github-pages)。您将获得一个带有版本控制的生成博客。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-05T12:59:54.957

其他选择是使用桌面博客工具，然后更新您的网站。

如果您在 Windows 上有 Mac 或[CityDesk](http://www.fogcreek.com/CityDesk/) ，您可以使用[iWeb](http://www.apple.com/ilife/iweb/)，或者您可以尝试这个[开源工具](http://thingamablog.sourceforge.net/)

**编辑**今天我遇到了这个工具：可能有帮助的[Zeta 制作人。](http://www.zeta-producer.com/index.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-09-14T16:43:03.943

[http://code.google.com/p/showdown-blog/](http://code.google.com/p/showdown-blog/) 仅用 JS 和 XML [v0.6] {JavaScript, XML} 编写的博客引擎

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-18T02:32:23.003

您最好的选择是使用生成器来创建 HTML/CSS/JS 以上传到您的服务器，看看 Webby：[http ://webby.rubyforge.org/](http://webby.rubyforge.org/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-05T12:32:24.290

那么，您想要的是拥有一个您的网站提供商不提供提供动态内容的方式的博客？

我认为在这种情况下您可以做到的唯一方法是编写 html 文件（或如果您愿意，可以使用文本文件）并将它们添加到站点中。之后，您可以使用一些 JavaScript 将它们添加到您的“博客页面”。

您当然需要以与其他文件相同的方式将它们上传到网站，然后让 JavaScript 知道它应该获取哪些页面。

我不知道有任何 JavaScript 博客引擎，但您可以查看例如[Prototype中的模板函数](http://www.prototypejs.org/api/template)

当然，这意味着您必须通过 Ajax 获取模板和内容，并让客户端完成所有处理（可能很慢并且可能不安全），并且您仍然需要有一个地方来上传内容和更新它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-05T12:31:35.477

如果您真的需要，您可以使用公共 api 服务，让您发布少量信息并使用 javascript 检索它。

例如，如果您只需要小帖子，您可以在 html.javascript 中创建一个使用 twitter 作为引擎的博客。当然，您将被限制为 140 个字符。我相信还有其他服务可以实现类似的想法，但限制较少。

当然最好的选择 - 获取博客软件或通过服务提供商托管您的博客并从您的站点链接到它。

祝你好运

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-09-24T19:30:11.963

一种解决方案是使用一些应用程序来生成您博客的静态网页，并将它们上传到您的网络服务器。这样，您将拥有一个包含静态内容的博客，这些内容都可以在现有站点旁边的 javascript 中进行管理，而无需在您的服务器上安装数据库、守护程序软件或其他动态 Web 编程语言。如果可能，静态内容生成可以直接在您的服务器上进行，或者您可以在本地运行 html 生成工具并上传输出。

MoveableType 有一个这样的工具。您仍然需要在某个地方存储您的博客内容，并且对于此 MoveableType，默认情况下使用 MySQL，因此您仍然需要在某个地方安装一个数据库，但该数据库可能只是您的本地桌面之一。

MoveableType 还支持通过插件或旧版本从 sqlite 或其他数据库中检索数据。sqlite 的优点是它不需要像 MySQL 那样安装守护进程，您只需将 sqlite 文件放在磁盘上的某个位置，给 MoveableType 文件的路径，然后运行脚本来生成您的静态内容。

可能还有其他工具，例如 MoveableType，我过去通过编写小脚本生成 HTML 来生成类似博客的网页。主要问题是您需要在某个地方让这些脚本从中获取数据。

另一种选择可能是使用 XSLT 开发您的博客，... 使用 XSLT，您可以将页面内容放在 XML 文件中，然后在 XSL 中编写一个将您的 XML 转换为 HTML 的模板。

如果您在谷歌上搜索“静态博客站点生成”，您可能会发现其他想法/选项，包括其他回复之一中提到的 Jekyll/github。

# browser - 黑莓推出原生网络浏览器

> ID：614526
> 
> 赞同：11
> 
> 时间：2009-03-05T12:13:08.300
> 
> 标签：browser, blackberry

如何从 BlackBerry 打开 URL？在 J2ME 中，我正在使用：

```
this.platformRequest("http://www.google.com"); 
```

如何在黑莓上做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-03-06T01:30:38.227

如果要启动浏览器会话，可以使用：

```
Browser.getDefaultSession().displayPage("http://www.google.com");

```

如果要打开，然后读取返回的数据自行处理：

```
 HttpConnection google = (HttpConnection)javax.microedition.io.Connector.open("[http://www.google.com](http://www.google.com)");
int rc = google.getResponceCode();
...
InputStream is = google.openInputStream(); 
```

您确实需要确保不会在事件线程上处理连接和返回的数据，否则您的黑莓将挂起。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-04-30T15:55:14.287

```
Browser.getDefaultSession().displayPage("http://www.google.com"); 
```

是使用您的 URL 启动 BlackBerry 浏览器的正确方法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2010-05-25T13:17:52.593

好吧，我认为 kozen 是对的，但你可以这样继续下去，也许......

```
BrowserSession bSession = Browser.getDefaultSession();
bSession.displayPage(url); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-07-08T15:35:08.683

```
BrowserSession myBrowser = Browser.getDefaultSession();
myBrowser.displayPage("http://www.stackoverflow.com"); 
```

或者

```
Browser.getDefaultSession().displayPage("http://www.stackoverflow.com"); 
```

# delphi - delphi中的匿名记录构造函数

> ID：614536
> 
> 赞同：12
> 
> 时间：2009-03-05T12:16:52.703
> 
> 标签：delphi, anonymous-types

是否可以将记录用作方法参数，并在不隐式声明所述记录的实例的情况下调用它？

我希望能够编写这样的代码。

```
type
  TRRec = record
    ident : string;
    classtype : TClass;
  end;

procedure Foo(AClasses : array of TRRec); 
```

然后调用这样的方法或类似的方法。

```
Foo([('Button1', TButton), ('Lable1', TLabel)]); 
```

顺便说一句，我仍然坚持使用 Delphi 5。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-03-05T12:46:21.603

是的。几乎。

```
type
  TRRec = record
    ident : string;
    classtype : TClass;
  end;

function r(i: string; c: TClass): TRRec;
begin
  result.ident     := i;
  result.classtype := c;
end;

procedure Foo(AClasses : array of TRRec);
begin
  ;
end;

// ...
Foo([r('Button1', TButton), r('Lable1', TLabel)]); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-05T13:16:27.930

也可以使用 const 数组，但它不像“gangph”给出的解决方案那么灵活：（特别是你必须给出数组中数组的大小（[0..1]）声明。记录是异常的，数组不是）。

```
type
  TRRec = record
    ident : string;
    classtype : TClass;
  end;

procedure Foo(AClasses : array of TRRec);
begin
end;

const tt: array [0..1] of TRRec = ((ident:'Button1'; classtype:TButton),
                                   (ident:'Lable1'; classtype:TLabel));

Begin
  Foo(tt);
end. 
```

# c++ - 我在哪里可以找到 arm-wince-pe-gcc 的二进制文件？

> ID：614540
> 
> 赞同：1
> 
> 时间：2009-03-05T12:17:16.713
> 
> 标签：c++, windows-ce

我正在寻找针对 ARM uP 和 WindowsCE 操作系统的 gcc (C++) 编译器版本。到目前为止，我只能找到以 ARM uP 为目标但生成 ELF 可执行文件（GNUARM 等）的编译器，或者它们以 Windows CE 为目标但自 2003 年以来未更新的编译器。我相信我正在寻找的编译器的确切名称如 GCC 文档中`arm-wince-pe-gcc`所述，但我不知道如何获取二进制文件。任何/所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-07-02T13:54:55.473

我正在使用 SourceForce 的 CEGCC：[http://cegcc.sourceforge.net/](http://cegcc.sourceforge.net/)，到目前为止它工作正常。我已经成功构建了一个 Windows API 应用程序 zlib 和 libpng，一切都在 Windows CE 5.0 上运行良好，您编写的 C 代码与您在 Visual Studio 中编写的代码相同。

从那里使用 mingw32ce 工具链。从最新的 SVN 源代码自己构建工具链。

我在 Linux 下使用它，但我猜它也应该在 Cygwin 下工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-05T12:23:10.193

自己建一个。GCC 可以很好地生成交叉编译器，请参阅[构建说明](http://gcc.gnu.org/install/build.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-05T13:15:21.177

我在这里找到了所需编译器的二进制版本：http: [//sourceforge.net/project/showfiles.php](http://sourceforge.net/project/showfiles.php?group_id=173455&package_id=198682) ?group_id=173455&package_id=198682 选择 0.51.0/cygwin-cegcc-cegcc-0.51.0-1.tar.gz文件下载。

# linq - 使用 LINQ 将多行连接成单行（CSV 属性）

> ID：614542
> 
> 赞同：16
> 
> 时间：2009-03-05T12:17:55.730
> 
> 标签：linq, csv, group-concat, linq-group

我正在寻找与 Sybase 的 LIST() 或 MySQL 的 group_concat() 等效的 LINQ

它将转换：

```
User  Hobby
--------------
Bob   Football 
Bob   Golf 
Bob   Tennis 
Sue   Sleeping 
Sue   Drinking 
```

到：

```
User  Hobby
--------------
Bob   Football, Golf, Tennis 
Sue   Sleeping, Drinking 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-03-05T12:30:57.943

这就是 GroupBy 运算符。你在使用 LINQ to Objects 吗？

这是一个例子：

```
using System;
using System.Collections.Generic;
using System.Linq;

public class Test
{
    static void Main()
    {
        var users = new[]
        {
            new { User="Bob", Hobby="Football" },
            new { User="Bob", Hobby="Golf" },
            new { User="Bob", Hobby="Tennis" },
            new { User="Sue", Hobby="Sleeping" },
            new { User="Sue", Hobby="Drinking" },
        };

        var groupedUsers = users.GroupBy(user => user.User);

        foreach (var group in groupedUsers)
        {
            Console.WriteLine("{0}: ", group.Key);
            foreach (var entry in group)
            {
                Console.WriteLine("  {0}", entry.Hobby);
            }
        }
    }
} 
```

分组就是这样——你能自己管理其余的吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-05T12:40:01.620

看看这个解决方案是否对您有帮助：

```
List<User> users = new List<User>() 
{ 
    new User {Name = "Bob", Hobby = "Football" },
    new User {Name = "Bob", Hobby = "Golf"},
    new User {Name = "Bob", Hobby = "Tennis"},
    new User {Name = "Sue", Hobby = "Sleeping"},
    new User {Name = "Sue", Hobby = "Drinking"}
};

var groupedUsers = from u in users
         group u by u.Name into g
         select new
         {
             Name = g.First<User>().Name,
             Hobby = g.Select(u => u.Hobby)
         };

foreach (var user in groupedUsers)
{
    Console.WriteLine("Name: {0}", user.Name);
    foreach (var hobby in user.Hobby)
    {
        Console.WriteLine("Hobby: {0}", hobby);
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-05T12:55:20.380

重新`_concat`您问题的方面，使用：

```
static class EnumerableExtensions 
{  
    public static String AsJoined( this IEnumerable<String> enumerable )
    {
        return AsJoined( enumerable, "," );
    }

    public static String AsJoined( this IEnumerable<String> enumerable, String separator )
    {
        return String.Join( separator, enumerable.ToArray() );
    }
} 
```

bruno conde 和 Jon Skeet 的答案中的输出 foreach 可以变成：

```
Console.WriteLine( "User:\tHobbies");
foreach ( var group in groupedUsers )
    Console.WriteLine( "{0}:\t{1}", group.Key, group.Select( g => g.Hobby ).AsJoined( ", " ) ); 
```

...您将获得您要求的精确结果输出格式（是的，我知道其他人已经解决了您的问题，但很难抗拒！）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-11T15:21:55.600

否则我们可以执行以下操作-

```
var users = new[]
                {
                new { User="Bob", Hobby="Football" },
                new { User="Bob", Hobby="Golf" },
                new { User="Bob", Hobby="Tennis" },
                new { User="Sue", Hobby="Sleeping" },
                new { User="Sue", Hobby="Drinking" },
                };

                var userList = users.ToList();
                var ug = (from user in users
                          group user by user.User into groupedUserList
                          select new { user = groupedUserList.Key, hobby = groupedUserList.Select(g =>g.Hobby)});

                var ug2 = (from groupeduser in ug
                          select new{ groupeduser.user, hobby =string.Join(",", groupeduser.hobby)}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-08T22:17:40.147

在一个 Linq 语句中完成。我没有办法推荐代码，但它表明它可以完成。

```
 var groupedUsers = from user in users
                           group user by user.User into userGroup
                           select new
                           {
                               User = userGroup.Key,
                               userHobies =
                                   userGroup.Aggregate((a, b) => 
                                       new { User = a.User, Hobby = (a.Hobby + ", " + b.Hobby) }).Hobby
                           }
                            ;
        foreach (var x in groupedUsers)
        {
            Debug.WriteLine(String.Format("{0} {1}", x.User, x.userHobies));
        } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-21T21:56:41.673

所有的答案都不够好；

因为这是一个数据库查询，但我们所有人都只是在内存中这样做；

diff是内存中的某些操作会发生错误can't trans to store expression；

```
var list = db.Users.GroupBy(s=>s.User).
             select(g=>new{user=g.Key,hobbys=g.select(s=>s.Hobby)}); // you can just do that from db

var result=list.ToList(); // this is important,to query data to memory;

var result2 = result.select(g=>new{user=g.Key,hobbyes=string.join(",",g.hobbyes)}; //then,do what you love in memory 
```

# visual-studio - 安装 .msi 时的额外空间

> ID：614547
> 
> 赞同：1
> 
> 时间：2009-03-05T12:19:49.267
> 
> 标签：visual-studio, windows-installer, setup-project

我的定制 .msi 中有额外的空间。要安装的数据大约有 600MB，安装程序说它需要 1.4 GB。切换到另一个位置，然后预定的位置（例如从 C:\Program Files\My_App 到 F:\My_App）表明它总是需要大约 800 MB在 Windows 分区上，在我的情况下是额外的空间。关于为什么会发生这种情况的任何想法？

这也会导致 64 位操作系统上的安装错误吗？我只将它安装在 32 位操作系统上，一切都很好，但我的一位同事在上述类型上安装它时遇到问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-05T12:30:39.363

我认为这可能与添加可能的缓存有关。如果您要缓存完整的 msi 以及已安装的产品，则可能会导致问题。

有关更多信息，请参阅此[页面](http://blogs.msdn.com/heaths/archive/2006/04/20/580237.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T13:03:22.780

不将 600 MB 数据包含在 MSI 中怎么样？您仍然可以通过将 MSI + 所有数据文件（+ 引导程序，如果有）打包到一个自解压 exe 文件中来分发单个安装程序。IExpress 是一个很好的工具，它包含在 Windows 中。您甚至可以从更好的压缩 afaik 中受益。

# windows - 我应该复制哪些 Qt DLL 以使我的程序独立？

> ID：614554
> 
> 赞同：5
> 
> 时间：2009-03-05T12:21:27.327
> 
> 标签：windows, qt, installation

我正在尝试使用我的应用程序创建一个分发目录。我已经将几个 Qt DLL 复制到该目录，并且该程序似乎正在运行，但有一个例外：它似乎没有找到 SQLite 的 SQL 插件。将 qtsqlite.dll 复制到目录中，不允许我的应用程序打开或创建 SQLite 文件。必须是什么目录结构或需要复制哪些附加文件才能使程序可以读取数据库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-05T12:46:12.760

您可以使用[depends.exe](http://www.dependencywalker.com/)来准确查看您的exe 的依赖关系，并确保它们都包含在内。

另外，请阅读有关 qt 插件的[页面。](http://doc.trolltech.com/4.2/plugins-howto.html)它们应该位于名为“plugins”的特定目录中，而不是与所有其他 dll 一起位于主目录中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T12:24:25.573

最有可能的是，qtsqlite.dll 本身取决于您可能还需要复制的原始 SQLite DLL。

不要忘记在您的发行版中包含 LGP 许可证副本以及指向您包含的库及其源的原始下载资源的*指针*。遵守法律:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-05T13:09:14.827

感谢@shoosh 提供的链接，我能够解决问题。我需要在分发目录中创建 sqldrivers 子目录，其中包含 qsqlite.dll 库。但这只是第一步。您有关于创建成熟的 Windows 安装程序的任何提示和资源吗？我主要是一名 Linux 程序员，所以我不知道这个领域。

# flash - FLASH AS3 spme 外部流 url 在我的服务器上不起作用

> ID：614562
> 
> 赞同：1
> 
> 时间：2009-03-05T12:24:43.217
> 
> 标签：flash, actionscript-3, streaming

一些外部流 url 从我的服务器工作，一些流 url 不工作，是什么原因？我使用 as3 flash 9player。像这样的外部网址[http://38.96.174.38:9568](http://38.96.174.38:9568)这不起作用。

请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:06:05.280

问题（和解决方案）：`getURL()`在 Firefox 中的 Flash 投影仪失败

[http://probertson.com/articles/2006/10/11/geturl-flash-projector-firefox-problem/](http://probertson.com/articles/2006/10/11/geturl-flash-projector-firefox-problem/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-05T18:47:54.277

这很简单：如果给定的服务器通过[默认策略文件](http://livedocs.adobe.com/flex/2/langref/flash/system/Security.html#loadPolicyFile%28%29)（称为`/crossdomain.xml`）授予您的播放器访问其内容的权限，那么它就可以工作。如果没有默认策略文件，则没有。

# oracle10g - 如何在 Oracle 中获取块标头大小？

> ID：614584
> 
> 赞同：1
> 
> 时间：2009-03-05T12:30:38.960
> 
> 标签：oracle10g

我正在尝试计算[此处](https://stackoverflow.com/questions/497214/)所述的几个表的大小，但我找不到块头大小变量

我如何得到它？它是某种公式吗？

我正在使用 Oracle 10g

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T12:41:12.817

这个站点对块头的格式有很好的讨论：http: [//www.adp-gmbh.ch/ora/concepts/db_block.html](http://www.adp-gmbh.ch/ora/concepts/db_block.html)。基本上区块头 = 固定头 + 交易头 + 表目录 + 行目录。以下是各个部分：

固定标头 = 57 字节

交易标头 = 23*inittrans 和 23*maxtrans 之间

表目录 = 4 * 表数（通常为 1，除非您使用集群）

行目录 = 2*存储的行

简而言之，虽然您可以得出一个粗略的估计，但它并不是每个数据块的固定大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T12:37:30.423

[这个页面](http://www.adp-gmbh.ch/ora/concepts/db_block.html)（对于 10g）说它是 57 个字节。

# iphone - UITableView 中部分索引下方出现的删除按钮

> ID：614588
> 
> 赞同：0
> 
> 时间：2009-03-05T12:31:07.537
> 
> 标签：iphone, uitableview

我设置了我的 UITableView（以标准方式）以允许在滑动时删除。但是，每当我显示 sectionindex 时，“删除”按钮就会出现在 /below/section index 下方：

[![索引下方的删除按钮](https://i.stack.imgur.com/FXfMs.png)](https://i.stack.imgur.com/FXfMs.png)

也许我错过了一些明显的东西？

我尝试在 willBeginEditingRowAtIndexPath 中将选定的单元格设置为更窄，但这也会删除单元格下方的分隔线（即，该线是单元格的一部分，因此不会在单元格新边界之外的区域中绘制）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-05T13:08:25.060

我们使用的解决方案是在表格处于编辑模式时删除索引（显然，另一个选项是不要在同一个表格中使用两个表格功能）。

# c# - 我可以数据绑定（2 路）动态生成的 RadioButtonLists 吗？

> ID：614593
> 
> 赞同：0
> 
> 时间：2009-03-05T12:32:06.863
> 
> 标签：c#, asp.net, data-binding, radiobuttonlist

我正在尝试创建一个动态调查页面。这个想法看起来很简单，但是尝试在 ASP.NET 中实现它让我非常沮丧......

每个用户都链接到一个单独的（多项选择）问题列表。我有以下数据表：

调查：

```
User   | Question   | Rank
-------+------------+-----
user-x | question-x |    1
user-x | question-y |    2
user-y | question-z |    1
user-y | question-x |    2 
```

问题：

```
ID         | Text | Choices
-----------+------+-----------------------
question-x | Foo? | yes|no
question-y | Bar? | never|sometimes|always
question-z | Baz? | 1|2|3|4|5|6|7|8|9|10 
```

答案：

```
User   | Question   | Answer
-------+------------+-------
user-x | question-x |    0
user-x | question-y |    2
user-y | question-z |    5 
```

所以答案选择是字符分隔的字符串，需要在数据绑定时进行扩展，并且答案存储为答案的基于 0 的索引。（所以用户 x 在问题 y 上回答“总是”。）

这是我的第一个版本的代码：

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:dbconn %>" 
    SelectCommand="
        SELECT Questions.Text AS Question, Questions.Choices, Answers.Answer 
        FROM Questions 
            INNER JOIN Surveys ON Surveys.Question = Questions.ID 
            LEFT OUTER JOIN Answers ON Questions.ID = Answers.Question 
                AND Users.ID = Answers.User 
        WHERE (Surveys.User = @User) 
        ORDER BY Surveys.Rank">
    <SelectParameters>
        <asp:QueryStringParameter Name="User" QueryStringField="id" />
    </SelectParameters>
</asp:SqlDataSource>

<asp:Repeater ID="Repeater1" runat="server" DataSourceID="SqlDataSource1" 
    onitemdatabound="Repeater1_ItemDataBound">
    <HeaderTemplate><table></HeaderTemplate>
    <ItemTemplate>
        <tr>
            <td><%# Eval("Question") %></td>
            <td><asp:Label runat="server" ID="ChoicesLabel"/></td>
        </tr>
    </ItemTemplate>
    <FooterTemplate></table></FooterTemplate>
</asp:Repeater>

<asp:Button ID="Button1" runat="server" Text="Submit" onclick="Button1_Click"/> 
```

和：

```
protected void Repeater1_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType != ListItemType.Item && e.Item.ItemType != ListItemType.AlternatingItem) 
        return;

    DataRowView row = (DataRowView)e.Item.DataItem;
    RadioButtonList rbl = new RadioButtonList();
    rbl.RepeatDirection = RepeatDirection.Horizontal;
    string[] Choices = row["Choices"].ToString().Split('|');
    for (int n = 0; n < Choices.Length; n++)
    {
        rbl.Items.Add(new ListItem(Choices[n], n.ToString()));
    }
    if (row["Answer"] != DBNull.Value)
        rbl.SelectedIndex = (int)row["Answer"];
    ((Label)e.Item.FindControl("ChoicesLabel")).Controls.Add(rbl);
}

protected void Button1_Click(object sender, EventArgs e)
{
} 
```

现在，第一个问题是，当我点击“提交”后，我得到一个**只**包含问题的页面，而不是带有答案的单选按钮！经过大量搜索后，我通过强制在页面初始化时发生数据绑定来解决此问题：

```
public void Page_Init(Object sender, EventArgs e)
{
    Repeater1.DataBind();
} 
```

但是，如果可以在 RadioButtonLists 上进行 2 路数据绑定，我仍然完全一无所知？（我的意思是使用 <%# Bind() %> 命令。）或者我是否必须编写自己的程序来将答案提交回数据库？为了使事情变得更复杂，第一次访问时必须将答案插入到 Answers 表中，而在回访时，可以更新现有行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-06T11:01:09.570

是的，当我想将 Bind 与 DropDownList 一起使用时，我发现了类似的问题。我所做的是从您的示例中创建一个自定义控件，该控件继承自 RadioButtonList。我给它一个额外的属性，称为值。设置好后，我会编写代码以通过值设置所选项目。当我调用 get 时，我返回实际选择的值，所以本质上你需要一个从 RadioButtonList 继承的自定义类并给它一个额外的属性

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI.WebControls;

/// <summary>
/// Summary description for BindingRadioButtonList
/// </summary>
public class BindingRadioButtonList : RadioButtonList
{
    public string Value
    {
        get
        {
            return this.SelectedValue;
        }
        set
        {
            if (this.Items.FindByValue(value) != null)
            {
                this.ClearSelection();
                this.Items.FindByValue(value).Selected = true;
            }
        }
    }

    public BindingRadioButtonList()
    {
        //
        // TODO: Add constructor logic here
        //
    }
} 
```

然后我可以轻松地使用它：

```
<cc1:BindingRadioButtonList ID="a1" runat="server" Value='<%#Bind("YourValue")%>'>
</cc1:BindingRadioButtonList> 
```

安德鲁

# html - 如何使用 VB6 从 HTML 中获取内容

> ID：614597
> 
> 赞同：1
> 
> 时间：2009-03-05T12:35:47.543
> 
> 标签：html, vb6

我如何从 HTML 中获取内容，删除它周围的元素。

我正在寻找使用 VB6 的示例

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-05T14:25:52.177

您可以将 Internet Explorer 用作 COM 对象（不显示在屏幕上）。例如，要获取 HTML 的纯文本版本：

```
Public Function Html2Text(ByVal Data _
   As String) As String
      Dim obj As Object
      On Error Resume Next
      Set obj = _
         CreateObject("htmlfile")
      obj.Open
      obj.Write Data
      Html2Text = obj.Body.InnerText
End Function 
```

你也可以遍历元素树来做一些更复杂的事情。

[图片来源： Visual Studio Magazine](http://vb.mvps.org/articles/qa200302.asp)中的 Karl Peterson 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T12:43:28.943

您可以使用正则表达式；构建您的模式并从 HTML 中提取您想要的数据。在此链接中，您可能会了解如何在 vb6 [http://www.regular-expressions.info/vb.html中使用正则表达式](http://www.regular-expressions.info/vb.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T14:18:33.473

HTML 可能格式错误，因此很难使用正则表达式删除标签。另一种方法是在 VB 中将 Internet Explorer 作为 COM 对象加载，然后在 Internet Explorer 中加载 HTML 文档并使用它来遍历解释的元素树。

# asp.net - 从 SQL 2005 Server 访问 TimeZoneInfo

> ID：614600
> 
> 赞同：8
> 
> 时间：2009-03-05T12:37:10.660
> 
> 标签：asp.net, sql, sql-server, clr, timezone

.NET TimeZoneInfo 类很棒，我认为它可以解决我在 SQL 2005 数据库中记录来自多个时区的数据的所有问题。

要将数据库中的 UTC 日期时间转换为任何其他时区，我只需使用 TimeZoneInfo.FindSystemTimeZoneById() 将时区转换为 TimeZoneInfo 类，然后调用 TimeZoneInfo.ConvertTimeFromUtc()。杰出的！我只是从 SQL .NET CLR 调用它！

但是...TimeZoneInfo 具有 MayLeakOnAbort 的主机保护属性。

当我使用 VS 2008 创建 SQL 函数或存储过程时，我什至看不到 system.TimeZoneInfo 类，没关系使用它。我还假设即使我可以以某种方式引用 TimeZoneInfo 类，如果我尝试在 SQL Sever 2005 中注册程序集，我可能会遇到某种安全异常。

帮助！有没有办法从 SQL Server 2005 访问 TimeZoneInfo 类及其所有财富？

注意：我刚刚在第一个答案之后添加了这个警告：

我们在世界各地都有站点。我们需要在数据库中存储本地时间和 UTC 时间，以应对可能需要在站点级别进行趋势分析的事件。一个趋势可能在一年内包含超过 52,000 个数据点，因此，为了提高效率，我不能只在数据库中以 UTC 格式存储时间并转换客户端上的每个数据点。因此，我需要能够在数据库中将任何时区的本地时间与 UTC 时间相互转换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:02:00.763

我刚刚在 SQL 2008 数据库上完成了此操作。

首先，我必须将数据库设置为可信赖并验证所有者是否正确。

```
use [myDB]
go
alter database [myDB] set trustworthy on
go

exec sp_changedbowner 'sa'
go 
```

接下来，我创建了一个 .NET 解决方案

```
Imports System
Imports System.Data
Imports System.Data.SqlClient
Imports System.Data.SqlTypes
Imports Microsoft.SqlServer.Server
Imports System.Collections.ObjectModel
Imports System.Runtime.InteropServices

Partial Public Class StoredProcedures
    <Microsoft.SqlServer.Server.SqlProcedure()> _
    Public Shared Sub sp_ConvertTime(ByVal UTCTime As DateTime, ByVal ZoneID As String, <Out()> ByRef Output As DateTime)
    Dim sp As SqlPipe = SqlContext.Pipe

    Dim ConvertedTime As DateTime
    Dim tzUTC = TimeZoneInfo.FindSystemTimeZoneById("UTC")
    Dim tzNew = TimeZoneInfo.FindSystemTimeZoneById(ZoneID)

    ConvertedTime = TimeZoneInfo.ConvertTime(UTCTime, tzUTC, tzNew)

    Output = ConvertedTime
    sp.Send(ConvertedTime)

    ConvertedTime = Nothing
    tzUTC = Nothing
    tzNew = Nothing
    sp = Nothing

End Sub
End Class 
```

在部署之前，我将 Permission 级别设置为**Unsafe**。

接下来，我将其部署出来，检查了输出窗口中的构建错误并更正了这些错误。

这是 SQL 测试

```
DECLARE @UTCTime datetime
DECLARE @ZoneID varchar(21)
DECLARE @NewTime datetime

SET @UTCTime = GETUTCDATE()
SET @ZoneID = 'Central Standard Time'

exec sp_ConvertTime @UTCTime, @ZoneID, @NewTime OUTPUT
select @NewTime AS NewTime 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-03-18T21:53:33.740

这是一个解决方案：

1.  创建一个 CLR 存储过程或 UDF，它包装了 TimeZoneInfo 类的功能。遵循本指南： http: [//www.codeproject.com/KB/cs/CLR_Stored_Procedure.aspx](http://www.codeproject.com/KB/cs/CLR_Stored_Procedure.aspx)
2.  TimeZoneInfo 需要 .NET 3.5。但是，System.Core v3.5 在 Sql Server 2005 中不会通过验证。因此您必须为 System.Core 进行 CREATE ASSEMBLY。查看详细信息：[http ://weblogs.asp.net/paulomorgado/archive/2009/06/13/playing-with-sql-server-clr-integration-part-iv-deploying-to-sql-server-2005.aspx](http://weblogs.asp.net/paulomorgado/archive/2009/06/13/playing-with-sql-server-clr-integration-part-iv-deploying-to-sql-server-2005.aspx)

请注意，您需要将 System.Core 注册为 UNSAFE... 所以您的 DBA 可能会遇到问题。

此外，即使您正在部署到 Sql Server 2008（包括 .NET 3.5），您的自定义程序集也必须是 UNSAFE，因为它使用来自 TimeZoneInfo 的不安全方法：http: [//social.msdn.microsoft.com/Forums/en /sqlnetfx/thread/d0515862-eb87-4a13-bab4-0e343983823a](http://social.msdn.microsoft.com/Forums/en/sqlnetfx/thread/d0515862-eb87-4a13-bab4-0e343983823a)

我试过这个并收到一条关于 MayLeakOnAbort 的消息。

如果 UNSAFE 在你的环境中是可以的，你应该可以做到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-25T20:31:41.910

我遇到了同样的问题，因为我想在报告服务正在使用的查询中在本地和 UTC 之间进行转换。我经历了似乎与您正在经历的完全相同的斗争。我的解决方案...

我开始编写一个独立的应用程序，该应用程序通过 TimeZoneInfo 对象并将条目写入数据库中的 TimeZoneInfo 表。我存储了开始年和结束年之间每年的所有偏移量（包括夏令时偏移量）（这些是独立应用程序的参数）。

从这个表中，我可以创建一些 sql 函数，这些函数将采用 utc 或本地日期和时区，使用 TimeZoneInfo 查找表来获取一年中正确时间和时区的正确偏移量，并返回转换后的日期时间到 UTC 或本地。

不幸的是，我还没有完成。我必须创建一个 CLR 函数，该函数使用对 SQL Server 安全的库（与 TimeZoneInfo 对象不同）返回系统的当前时区。目前我无法访问我的代码，但我相信我使用了 TimeZone 对象。

[http://msdn.microsoft.com/en-us/library/system.timezone_members.aspx](http://msdn.microsoft.com/en-us/library/system.timezone_members.aspx)

总而言之，我有一个 CLR 函数，它返回系统的时区，该应用程序生成了一个包含 DLS 特定信息的时区查找表，其中包含一系列年份。我用一个存储过程来完成这一切，该过程包含一个时区和一个要转换的日期，并且从那以后它一直运行良好。

我知道这是一项巨大的工作，要做一些看起来很简单的事情，但它以安全的方式完成了工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-05T12:58:51.950

我不知道您是否可以从 SQL 访问 TimeZoneInfo 类，但通常认为在数据库中坚持使用 UTC 是一种好习惯，客户端将转换为本地时间。

因此，每次写入数据库时​​，都会从本地时间转换为 UTC，每次从数据库中读取时，都会将 UTC 转换为本地时间。

编辑：根据我对问题的理解，我仍然推荐的解决方案是：

1) 将日期以 UTC 格式存储在数据库中。2) 在客户端计算本地时间。

2 可以通过多种方式完成。推荐的方法是在 DataColumn 类 (*) 中将 DateTimeMode 设置为 Local（或 Utc）。如果您需要本地时间的报告，请使用 Local，如果您需要 UTC，请使用 UTC。

(*) 请注意 Visual Studio 中的设计器存在问题，请参阅博客文章：[http](http://bethmassi.blogspot.com/2006/01/serializing-data-across-time-zones-in.html) ://bethmassi.blogspot.com/2006/01/serializing-data-across-time-zones-in.html ，错误报告：[http ://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=96118](http://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=96118)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-08-22T06:40:01.330

您在 Channel9 上查看过这篇文章吗？似乎可以在 CLR 函数中执行您正在寻找的操作……尽管我认为您不会获得想要访问的所有好东西……但这是一个开始。

[http://channel9.msdn.com/playground/Sandbox/139123/](http://channel9.msdn.com/playground/Sandbox/139123/)

该线程上的一张海报提到的问题是，由于 p/invoke，它是一个不安全的程序集。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-05T15:35:53.053

我们一直在寻找这个，但一直无法找到一个好的方法来做到这一点。如果我记得不久前看过它，我认为那是在 SQL 2008 中要添加的东西的列表中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-03T06:04:02.247

在与同样的问题斗争多年后，我终于决定为[SQL Server Time Zone Support](https://github.com/mj1856/SqlServerTimeZoneSupport)构建一个解决方案。该项目使用标准 IANA 时区，[如此处所列](http://en.wikipedia.org/wiki/List_of_tz_database_time_zones)。

例如：

```
SELECT Tzdb.UtcToLocal('2015-07-01 00:00:00', 'America/Los_Angeles') 
```

我意识到这并不是所要求的，但我认为它同样可以很好地解决问题*。*

# asp.net - ADSI/IIS 管理和 ASP.NET 模拟

> ID：614601
> 
> 赞同：0
> 
> 时间：2009-03-05T12:37:17.867
> 
> 标签：asp.net, iis-6, impersonation, adsi, remote-administration

我正在编写一个小型 Web 应用程序，它允许我管理我们网络上不同服务器上的多个 IIS 安装。我们没有域控制器。

我编写了一个使用 win32 api 及其 LogonUser 方法的小型模拟控制器。然后我使用 System.DirectoryServices 和 IIS ADSI 提供程序来创建一个新站点。

我有以下例程（用明文字符串交换了一些值以获得更好的可读性）：

```
 if (impersonationSvc.ImpersonateValidUser("Administrator@SRV6", String.Empty, "PASSWORD))
            {

            string metabasePath = "IIS://" + server.ComputerName + "/W3SVC";
            DirectoryEntry w3svc = new DirectoryEntry(metabasePath, "Administrator", "PASSWORD");

            string serverBindings = ":80:" + site.HostName;
            string homeDirectory = server.WWWRootNetworkPath + "\\" + site.FolderName;

            object[] newsite = new object[] { site.Name, new object[] { serverBindings }, homeDirectory };

            object websiteId = (object)w3svc.Invoke("CreateNewSite", newsite);
            int id = (int)websiteId;

            impersonationSvc.UndoImpersonation();
        } 
```

当我使用托管 Web 应用程序的服务器 (SRV6) 时，此例程有效。创建了一个新站点。

例如，如果我使用 SRV5，我们网络上的另一台服务器（没有域），ImpersonateValidUser 工作，DirectoryEntry 创建，但 w3svc.Invoke 失败并出现以下错误：

**[COMException (0x80070005): 拒绝访问]**

```
System.DirectoryServices.DirectoryEntry.Bind(Boolean throwIfFail) +377678
System.DirectoryServices.DirectoryEntry.Bind() +36
System.DirectoryServices.DirectoryEntry.get_NativeObject() +31
System.DirectoryServices.DirectoryEntry.Invoke(String methodName, Object[] args) +53 
```

...

任何人都知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-05T13:37:11.933

在这种情况下，您不能使用模拟。您模拟的帐户需要在本地计算机上登录权限。

如果您的 Web 服务器不是域的一部分，我认为 Tant102 的 Web 服务理念是您唯一的出路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T13:24:59.437

我会查看 SRV5 的事件日志，以检查当您连接到该服务器时使用了哪些权限。您可能需要更改组策略以在安全日志中记录故障。

在您的服务器上设置 web 服务听起来更容易，最好是通过登录名和/或 IP 限制来保护，执行这些操作。

# iphone - WiFi iPhone 应用程序

> ID：614618
> 
> 赞同：2
> 
> 时间：2009-03-05T12:44:27.070
> 
> 标签：iphone, objective-c, cocoa-touch, wifi

我正在开发一个需要通过 WiFi 在 2 个设备之间进行通信的 iPhone 应用程序。

有人可以通过提供一个简单的 iphone 应用程序代码来帮助我，它能够在设备之间进行数据通信...我已经通过开发人员网站上提供的“ **witap 应用程序”但无法理解它...**

请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-05T14:52:52.813

MacResearch 有一个很棒的两部分教程：

[第一部分](http://www.macresearch.org/cocoa-scientists-part-xxviii-bonjour-and-how-do-you-do)

[第二部分](http://www.macresearch.org/cocoa-scientists-part-xxix-message)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T07:56:06.503

使用 Bonjour ，让 Device A 作为服务器，通过 Bonjour 发布服务；在设备B中，使用NSNetServiceBrowser在同一个本地网络中通过设备A搜索已发布的服务，并通过socket连接发送数据。

这里有一个演示。[下载](http://www.cppblog.com/Files/kesalin/MacChatty.zip)。你可以阅读这篇文章[去>>](http://blog.csdn.net/kesalin/article/details/6779882)。它以前帮助过我。

# pdf - 如何找出 PDF 文档中引用了哪些字体以及嵌入了哪些字体

> ID：614619
> 
> 赞同：121
> 
> 时间：2009-03-05T12:44:46.273
> 
> 标签：pdf, fonts

我们对 PDF 文档中的字体有一点问题。为了解决我想检查的问题，哪些字体实际上嵌入在 pdf 文档中，哪些仅被引用。有没有一种简单（而且像免费一样便宜）的方法来做到这一点？

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2009-03-05T13:12:23.320

`pdffonts`最初来自[Xpdf](http://en.wikipedia.org/wiki/Xpdf)的命令行工具，现在是[Poppler](http://en.wikipedia.org/wiki/Poppler_(software))的一部分。

该工具在大多数 Linux 发行版中作为`poppler-utils`软件包的一部分提供。

示例用法和输出：

```
$ pdffonts some.pdf 

name                                 type              emb sub uni object ID
------------------------------------ ----------------- --- --- --- ---------
BAAAAA+Arial-Black                   TrueType          yes yes yes     53  0
CAAAAA+Tahoma                        TrueType          yes yes yes     28  0
DAAAAA+Wingdings-Regular             TrueType          yes yes yes     43  0
EAAAAA+Webdings                      TrueType          yes yes yes     38  0
FAAAAA+Arial-BoldMT                  TrueType          yes yes yes     33  0
GAAAAA+Tahoma-Bold                   TrueType          yes yes yes     23  0
HAAAAA+OpenSymbol                    TrueType          yes yes yes     48  0 
```

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2011-01-27T19:59:25.437

如果您只想找出字体名称，则简单得多：从终端运行它

```
strings yourPDFfilepath.pdf | grep FontName 
```

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2009-03-05T13:26:07.593

我终于得到了一个实际上似乎嵌入了字体的示例文件。

使用普通的 Adob​​e Reader（如果您愿意，也可以使用 Foxit）。在结果对话框中选择文件-> 属性，然后选择字体选项卡。您将看到字体列表。嵌入的将在字体名称后面的 ( ) 中说明这一事实。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-13T02:07:41.857

[CAM::PDF](http://search.cpan.org/dist/CAM-PDF/)有一个字体报告器，可作为命令行实用程序或通过库调用使用。如果你运行“listfont.pl file.pdf”你会得到这样的输出：

```
Page 1:
  Name: F1.0
    Type: TrueType
    BaseFont: NZUXSR+Impact
    Encoding: MacRomanEncoding
    Widths: yes
      Characters: 0-255
    Embedded: yes
  Name: F2.0
    Type: TrueType
    BaseFont: XSFKRA+ArialMT
    Encoding: MacRomanEncoding
    Widths: yes
      Characters: 0-255
    Embedded: yes 
```

# .net - 自定义 DependencyObject 继承树

> ID：614624
> 
> 赞同：8
> 
> 时间：2009-03-05T12:46:32.883
> 
> 标签：.net, wpf, dependency-properties, dependencyobject

我正在努力寻找有关 and 使用的属性继承树（或继承上下文）的足够`DependencyObject`信息`DependencyProperty`。

我想使用`DependencyProperty`典型 WPF 页面之外的值继承功能，例如对象 A 是逻辑父对象 B，因此分配给对象 A 上的属性的值将自动传播到对象 B，除非它已经在本地设置（有点像`FlowDirection`WPF 中的属性）。

如果 Object A 和 Object B 派生自`DependencyObject`，并且*不是*a 的子级`UIElement` （换句话说，Object A 是它自己的*根*），那么您如何建立逻辑树以便`DependencyProperty`理解 B 是 A 的子级？

Hillberg [Freezable Trick](http://www.drwpf.com/blog/Home/tabid/36/EntryID/36/Default.aspx)以及[Josh Smith 的技巧包](http://www.codeproject.com/KB/WPF/ArtificialInheritanceCxt.aspx)并不是我想要的。我*不想*从现有元素树中检索属性...我想创建自己的非可视元素树...即控制继承上下文。

有谁知道这个知识体系隐藏在哪里？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-06T08:12:51.177

经过大量研究和混淆源代码后`DependencyObject`，以下是简短答案：

（`InheritenceContext`显示实例的逻辑父级的属性）（就像 90% 的有用实现`DependencyObject`一样）标记为内部，因此对 WindowsBase.dll 之外的所有代码都隐藏

可以使用反射来设置`_contextParent`字段，也可以调用这个隐藏的方法来设置`InheritenceContext`，但归根结底，它不是一个干净的解决方案。

在搜索了`DependencyObject`源代码之后，我不得不说我没有留下深刻的印象。`DependencyObject`可以而且应该是一个非常干净、无处不在、可重用的类。相反，它在结构上和行为上都绑定到它的继承者，甚至包含特定的常量、字段、方法和解决方法，以帮助 Freezable 与其他子类共存，这不仅与良好的 OO 设计相去甚远，而且还使一个其他出色的类在 WPF 框架之外完全无法使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T13:28:58.147

我假设您正在询问将值传播给不覆盖值本身的孩子。

`ContentControl`据我所知，WPF 元素有一个子元素的概念已经介绍过了。这在层次结构中比您想要的更深入。因此，我假设如果您只是从中得出`DependencyObject`这种行为不会表现出来。

具体来说，孩子需要知道询问其父母是否没有给定属性的值。

有趣的问题。我也想知道完整的答案。

# iphone - 如何在使用 cocos2d 的 iphone 应用程序中同时使用更多的声音？

> ID：614625
> 
> 赞同：0
> 
> 时间：2009-03-05T12:46:45.380
> 
> 标签：iphone, cocos2d-iphone

### 复制：

> [使用 cocos2d 在我的 iphone 应用程序中使用多个声音](https://stackoverflow.com/questions/580796/use-more-then-one-sound-in-my-iphone-application-using-cocos2d)

嗨，这个论坛的所有成员。我需要帮助你做我的游戏项目。我想在我的游戏项目中播放一些声音。当这个游戏开始时，背景声音会持续播放直到游戏停止（退出）。那时玩游戏时，一些动作按钮起作用，每个动作都会播放一个声音几秒钟，但背景声音并没有停止。如果有人有解决方案而不是回答，我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-10-27T21:46:16.277

如果您使用的是 cocos2d 0.82，那么您可以为此使用 denshion。

播放背景音乐：[[SimpleAudioEngine sharedEngine] playBackgroundMusic:@"somemusic.mp3"];

播放音效：[[SimpleAudioEngine sharedEngine] playEffect:@"mysound.wav"]

[你可以在http://www.cocos2d-iphone.org/wiki/doku.php/cocosdenshion:cookbook](http://www.cocos2d-iphone.org/wiki/doku.php/cocosdenshion:cookbook)找到这个和更多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T13:08:51.287

你可以，如果你实现了自己的混音器。只需播放缓冲区并自己混合音频。它基本上归结为只是平均两个不同的幅度。在某些情况下，它更高级一些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T13:10:39.860

查看[AVAudioPlayer](http://developer.apple.com/iphone/library/documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html)类。它会做你需要的。

需要注意的一件事是，该课程一次只能播放一种 mp3 格式的声音。如果您使用 mp3 并且需要一次播放多个声音，我建议转换为 IMA4 格式。

您可以使用[afconvert](http://www.manpagez.com/man/1/afconvert/)命令在声音文件格式之间进行转换。

AVAudioPlayer 在固件 2.2+ 中可用。

# cocoa - 在 Cocoa 中构建字符串时使用单引号

> ID：614633
> 
> 赞同：1
> 
> 时间：2009-03-05T12:51:46.567
> 
> 标签：cocoa, string

我正在 Cocoa 中构建一个字符串，用作 SQL 语句，该语句将传递给 sqlite 的 FMDB 包装器；但是，数据库因 BAD_ACCESS 失败而崩溃。我有以下代码：

prefix = @"SELECT * FROM Table WHERE Field1 LIKE '%";

中间 = @"%' OR Field2 LIKE '%";

后缀 = @"%' ORDERY BY";

orderby = @"%' ORDER BY Fieldnames";

sqlStatement = [NSString stringWithFormat:@"%@%@%@%@%@%@", 前缀, searchString, 中间, searchString, suffix, orderby];

在运行时 sqlStatement 最终包含如下内容：

SELECT * FROM Table WHERE Field1 LIKE \'%A%\' OR Field2 LIKE \'%A%\' ORDER BY Fieldnames

出于某种原因，正在将 \ 添加到导致数据库崩溃的字符串中。

有什么想法可以防止 \ 出现在我的字符串中吗？

更新：当我通过 NSLog 输出我的变量时，我得到以下信息：SELECT * FROM Table WHERE Field1 LIKE 'OX1.87A8013DBD18F-1027' OR Field2 LIKE 'OX1.87A8013DBD18F-1027'ORDER BY Fieldname。

问题似乎与在字符串中使用 %A 有关。即使我对 sqlStatement 变量进行硬编码以包含“%A%”，%A 似乎也会转换为内存地址或其他内容。如果我执行“%ABAP%”，我会得到类似“OX1.87A8013DBD18F-1027BAP”的输出。请注意，我正在丢失 % 符号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-05T13:07:41.430

我猜你正在使用 sqlite，在这种情况下你想稍微不同地做这件事。首先创建您的查询，如下所示：

```
SELECT * FROM Table WHERE Field1 LIKE ?001 OR Field2 LIKE ?002 ORDER BY Fieldnames 
```

?000 语法用于参数。

然后，您可以使用 sqlite3_bind_text 绑定您的参数：

```
sqlite3_bind_text(statement, 1, [@"%bar%" UTF8String], -1, SQLITE_STATIC);
sqlite3_bind_text(statement, 2, [@"%foo%" UTF8String], -1, SQLITE_STATIC); 
```

希望这应该为您指明正确的方向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T16:53:01.090

关于您的“更新”：

看起来“%A”被用作格式说明符，即：

> %A：一个 64 位浮点数（双精度），以科学计数法打印，前导 0X 和小数点前一个十六进制数字，使用大写 P 引入指数

请参阅[Cocoa 的字符串编程指南](http://developer.apple.com/documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html#//apple_ref/doc/uid/TP40004265-SW1 "字符串编程指南")。

所以发生的事情是您`sqlStatement`稍后将该字符串用作格式控制字符串，这很糟糕。如果您确实需要传递`sqlStatement`给将字符串解释为格式说明符的方法/函数，您应该像这样传递它`do_query(@"%@", sqlStatement)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T13:06:37.233

该字符串似乎构造正确。如果我运行代码：

```
int main(int argc, char *argv[])
{
    NSAutoreleasePool* pool = [NSAutoreleasePool new];

    NSString* prefix = @"SELECT * FROM Table WHERE Field1 LIKE '%";

    NSString* middle = @"%' OR Field2 LIKE '%";

    NSString* suffix = @"%' ORDERY BY ";

    NSString* orderby = @"%' ORDER BY Fieldnames";

    NSString* sqlStatement = [NSString stringWithFormat:@"%@%@%@%@%@%@", prefix, @"blah", middle, @"blah", suffix, orderby];

    NSLog(@"sqlStatement: %@", sqlStatement);

    [pool drain];

    return 0;
} 
```

我在控制台中得到以下结果：

```
2009-03-05 08:04:29.734 Untitled[79999:813] sqlStatement: SELECT * FROM Table WHERE Field1 LIKE '%blah%' OR Field2 LIKE '%blah%' ORDERY BY %' ORDER BY Fieldnames 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-05T13:15:21.660

“在运行时”是什么意思？你的意思是在 Xcode 调试器中？

看来你是针对[这个问题](http://lists.apple.com/archives/Cocoa-dev/2007/Mar/msg00875.html)的。

> 反斜杠转义的单引号似乎只出现在 Xcode 调试器窗口的变量摘要列中。在 gdb 中手动检查“sql”的值会发现正确的格式：
> 
> (gdb) po sql select * from t_state where state_code = 'XX'
> 
> 并且 NSLogging 字符串也省略了反斜杠。所以，我想说那些单引号仅在 Xcode 格式化对象以在变量视图中显示的过程中因某种原因被转义。

# sas - 数据集的排序顺序

> ID：614637
> 
> 赞同：2
> 
> 时间：2009-03-05T12:52:14.337
> 
> 标签：sas

SAS中是否有任何固有方法来查找数据集的排序顺序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T23:23:00.483

正如 Sassy 所说，SAS 知道数据集是否已排序的唯一方法是它是否进行了排序，或者您是否明确告诉它排序顺序。如果您没有完成这些步骤中的任何一个，它将不知道数据是否处于任何类型的顺序中。

我喜欢 AFHood 试图对其进行排序的想法。如果 SAS 知道它是以这种方式排序的，它只会告诉您并且不会再这样做。

> ```
> NOTE: Input data set is already sorted, no sorting done 
> ```

以下是研究数据排序的其他一些想法……享受吧。

如果只想手动查看，可以使用 proc contents data=libname.data;run; 并查看输出。有一个属性叫做 sorted。如果您使用的是窗口模式，您可以右键单击资源管理器中的数据集并选择属性，然后单击详细信息选项卡并查看排序依据值。

对于程序化测试方法，您可以使用来自 proc 内容的输出数据集。sorted 和 sortedby 列将告诉您数据集是否已排序以及它是按哪个变量排序的。通过运行下面的代码来尝试一下。

```
/* In an unsorted data set, proc contents will give missing values
   for the sorted and sortedby columns of its output data */
proc contents data=sashelp.class out=class_contents noprint;run;
proc print data=class_contents;
  var memname name sorted sortedby;
run;

/* Now sort and observe the changes in the sorted and sortedby columns */
proc sort data=sashelp.class out=class_sorted; by name;run;
proc contents data=class_sorted out=class_sorted_contents;run;
proc print data=class_sorted_contents;
  var memname name sorted sortedby;
run;`enter code here` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T15:25:23.580

如果数据确实已经“排序”，是的。在 proc 内容生成的输出底部有一个关于排序信息的小表格。

使用已经按某种排序顺序的数据构建的数据集可能没有附加此信息，您将需要开始探索数据以确定其顺序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-09T21:26:55.250

您可以使用该`Attrc`功能。

[http://support.sas.com/onlinedoc/913/getDoc/en/lrdict.hlp/a000147794.htm](http://support.sas.com/onlinedoc/913/getDoc/en/lrdict.hlp/a000147794.htm)上的文档

它类似于以下内容

```
data _null_;
   dsid=open("work.a","i");
   sortby=attrc(dsid,"SORTEDBY");
   put  sortby=;
   rc=close(dsid);
run; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-05T18:51:14.240

我假设您正在解决的问题是试图确定数据集是否需要以编程方式进行排序。我们使用的最佳解决方案是在有疑问时简单地使用 proc sort。

当然，您可能会说，这是开销和处理.. 是的，但是如果数据集已经正确排序，则 proc 知道它并让您的代码以最少的处理继续前进。它内置了“如果排序然后继续”逻辑。

如果这不是您要解决的问题，请详细说明，我们会看看是否可以提供帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-05T23:53:49.130

如果 sas 没有对数据进行排序，但您认为它可能已排序，则可以尝试将其视为已排序并处理可能会或可能不会发生的错误。

```
* This works, swap some values to see how an error looks;
data foo;
input height;
cards;
1
2
3
4
;
run;

data _null_;
set foo;
by height;
run; 
```

可以在宏中检测和重置错误状态，但这种方法可能会变得混乱。更多信息在[这里](http://www.uc.edu/sashtml/lrcon/z0993436.htm)

# c# - 如何在使用 XmlWriter 进行 XmlSerialization 时添加命名空间？

> ID：614640
> 
> 赞同：3
> 
> 时间：2009-03-05T12:52:49.123
> 
> 标签：c#, .net, xml, xml-serialization

我将 XmlWriter 与 Xml 序列化结合使用。我能够很好地输出 XML，但是如何在 XmlWriter 中包含 xmlns 属性似乎让我无法理解。

要编写文档的开头，我使用以下内容：

```
 Writer.WriteStartDocument();
    Writer.WriteStartElement("urlset","http://www.sitemaps.org/schemas/sitemap/0.9"); 
```

创建了我的 XmlWriter 后，我循环遍历创建了它们的 SitemapNodes，并通过这样的序列化将它们写入底层的字符串构建器：

```
 foreach (uk.co.andrewrea.SitemapNode node in List)
    {
        Serializer.Serialize(Writer, node);
    } 
```

正如我所说，这很好用，但不包括上述根元素的命名空间。每次我尝试物理写入属性 xmlns 时，我都会收到一个异常，即 xmlns 是系统保留给 XML 使用的，所以基本上我不能使用。

**我知道如何使用 XmlTextWriter 以及使用 XmlDocument 类来做到这一点，但我需要了解如何使用 XmlWriter 和通过序列化来实现这一点。**

以下尝试还会引发有关该命名空间被保留的异常。

```
foreach (uk.co.andrewrea.SitemapNode node in List)
{
      XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
      ns.Add("xmlns", "http://www.sitemaps.org/schemas/sitemap/0.9");

      Serializer.Serialize(Writer, node, ns);
}

Exception Details: System.ArgumentException: Prefix "xmlns" is reserved for use by XML. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-05T13:11:05.507

您可以将命名空间添加到 XmlSerialization 属性，例如：

```
[XmlElement(
ElementName = "Members",
Namespace = "http://www.cpandl.com")]
public Employee[] Employees; 
```

如果您可以控制代码。

# jquery - 在 ImageButton 上叠加文本

> ID：614649
> 
> 赞同：1
> 
> 时间：2009-03-05T12:57:23.963
> 
> 标签：jquery, html, css

有谁知道在图像顶部显示文本的简单方法？我发现的一种解决方案是执行以下操作：

```
<img id='img1' src='myimage.jpg'>
<div style='position:relative; top:-30px'> MY TEXT TO DISPLAY ON IMAGE</div> 
```

这将导致 Div 及其所有内容向上移动 30 像素。问题是我不知道图像的高度。但是，我确实知道宽度。此外，我的页面上可能有许多动态图像需要覆盖文本，并且我不一定知道图像在服务器上运行时的绝对位置。

我也没有成功地将图像作为背景图像，因为我无法让它显示完整的图像——它只是显示了足够的图像以放在 div 后面。如果您有任何建议或需要更多信息，请告诉我。

PS：我对 javascript/JQuery 之类的客户端解决方案持开放态度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T13:11:15.773

那这个呢？

```
<div style="position: relative;">
  <img src="..." />
  <div style="position: absolute; top:0; left:0">!!! TEXT HERE !!!</div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T13:16:40.503

背景图像最适合这个。有点像

```
<style>
.thing {
  background-image: url(myimage.jpg);
  background-repeat: no-repeat;
  padding: 10px;;
</style>

<div class="thing">My Text</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-05T13:05:06.613

使用 jQuery，您可以使用[尺寸插件](http://plugins.jquery.com/project/dimensions)来获取图像的大小。然后，您可以轻松地修改 div 的样式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-05T13:31:45.177

背景图像不是最好的——尤其是在我们不完全了解页面的其他部分的情况下——所以很难说应该如何使用它们。

使用背景图像，您无法检查图像的大小！不要忘记这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-05T13:46:45.843

如果您希望它与背景图像一起使用，请尝试以下操作：

```
 .btn {position: relative; background-image: url('yourimagehere.png'); width: 100px; height: 20px;}
    .btn span {position: absolute; top:0; left:0; width: 100px; height: 20px; }

    <div class="btn">
         <a  href="#">My Text<span/></a>
    </div> 
```

请注意，您需要为 css 中的按钮设置适当的宽度和高度。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-05T23:03:10.623

好吧，在意识到在我感兴趣的特定情况下，所有图像实际上都具有相同的高度后，我能够解决这个问题。既然是这样，以下标记对我来说效果很好：

```
<head>
<style type="text/css">
  .myClass {
    text-align:center;
    margin-top:-35px; /*set this to the distance from the bottom*/
    font-weight:bold;
    font-size:18px;
    color:#fff;
    background-color:#111;
    width:160px;
   }
</style>
</head>
<body>
<img src='My Fixed Size Image' />
<div class='myClass' runat='server'>MY TEXT HERE</div>
</body> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-14T04:29:01.027

Why not just use a `div` by itself?

```
<div style="display:inline;background:url('img.png');width:128px;height:128px;">text here</div> 
```

# c# - 连接时 Windows XP 家庭版上的 SocketException：提供了一个无效的参数

> ID：614650
> 
> 赞同：1
> 
> 时间：2009-03-05T12:57:30.547
> 
> 标签：c#, sockets, socketexception

我们的软件需要连接到服务器，我们使用 TCPclient 来实现。50 多个系统（所有 Windows XP 专业版）都在使用该软件，并且连接没有问题。该软件还已经在 windows vista 和 Windows 7 beta 上进行了测试。

今天有一些外部人员在这里进行培训，其中一个人有一台装有**Windows XP Home**版的笔记本电脑，它无法连接到服务器，并使用 SocketExeption“提供了一个无效的参数”。（Windows 套接字异常代码：10022）

但是，当我们尝试在同一台笔记本电脑上远程登录到该 ip 和端口时，我们可以建立连接。

连接代码非常基础：

```
m_client = new TcpClient();
m_client.Connect(System.Net.IPAddress.Parse(host), port); 
```

我们必须在 Windows XP Home 版上设置任何额外的套接字选项吗？

关于他的系统：Windows XP Home edition version 2002 Service pack 2 一个激活的网卡：Broadcom 440x 10/100 Integrated Controller

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-10-20T06:40:02.963

只为好奇的人。我们从来没有时间进一步调查这个问题。楼主的电脑好像有问题。。。

# regex - 如何在 Powershell 中提取正则表达式反向引用/匹配的值

> ID：614651
> 
> 赞同：23
> 
> 时间：2009-03-05T12:57:50.500
> 
> 标签：regex, powershell

我有一个包含数据行的文本文件。我可以使用以下 powershell 脚本来提取我感兴趣的行：

```
select-string -path *.txt -pattern "subject=([A-Z\.]+)," 
```

一些示例数据是：

```
blah blah subject=THIS.IS.TEST.DATA, blah blah blah 
```

我想要的是能够仅提取主题的实际内容（即“THIS.IS.TEST.DATA”字符串）。我试过这个：

```
select-string -path *.txt -pattern "subject=([A-Z\.]+)," | %{ $_.Matches[0] } 
```

但“匹配”属性始终为空。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-05T13:20:57.777

我不知道为什么你的版本不起作用。它应该工作。这是一个更丑陋的版本。

```
$p = "subject=([A-Z\.]+),"
select-string -path *.txt -pattern $p | % {$_ -match $p > $null; $matches[1]} 
```

解释：

`-match`是一个正则表达式匹配运算符：

```
>"foobar" -match "oo.ar"
True 
```

只是抑制将`> $null`True 写入输出。（尝试删除它。）有一个 cmdlet 可以做同样的事情，我现在不记得它的名字了。

`$matches`是一个神奇的变量，它保存最后一次`-match`操作的结果。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2010-01-28T15:03:13.017

在 PowerShell V2 CTP3 中，实现了 Matches 属性。所以以下将起作用：

```
select-string -path *.txt -pattern "subject=([A-Z\.]+)," | %{ $_.Matches[0].Groups[1].Value } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-05T14:20:21.300

另一种选择

```
gci *.txt | foreach { [regex]::match($_,'(?<=subject=)([^,]+)').value } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-06-09T15:38:57.687

select-string 有一个更简单的替代方法，效果会更好。

在PowerShell中，

1.  `$sample="blah blah subject=THIS.IS.TEST.DATA, blah blah blah"`
2.  `$sample -match "subject=([A-Z\.]+),"`
3.  `$matches[1]`将有您正在寻找的子字符串。

这适用于 Windows 10.0.16299 版本

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-05T14:20:46.527

从所有其他答案中学到了很多东西后，我能够使用以下行得到我想要的东西：

```
gci *.txt | gc | %{ [regex]::matches($_, "subject=([A-Z\.]+),") } | %{ $_.Groups[1].Value } 
```

这感觉很好，因为我每行只运行一次正则表达式，并且当我在命令提示符下输入它时，没有多行代码很好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-05T13:39:52.553

您键入的代码的问题是 select-string 不会传递实际的 Regex 对象。相反，它传递了一个名为 MatchInfo 的不同类，该类没有实际的正则表达式匹配信息。

如果你只想运行一次正则表达式，你将不得不滚动你自己的函数，这并不难。

```
function Select-Match() {
  param ($pattern = $(throw "Need a pattern"), 
         $filePath = $(throw "Need a file path") )
  foreach ( $cur in (gc $filePath)) { 
    if ( $cur -match $pattern ) { 
      write-output $matches[0];
    }
  }
}

gci *.txt | %{ Select-Match "subject=([A-Z\.]+)," $_.FullName } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-22T16:33:53.533

Select-String 命令似乎返回***MatchInfo***变量而不是“字符串”变量。我花了几个小时在论坛和官方网站上找到了这个，但没有运气。我还在收集信息。解决此问题的一种方法是显式声明一个字符串变量以保存从 Select-String 返回的结果，例如：

**[字符串]** $foo = select-string -path *.txt -pattern "subject=([AZ.]+),"

$foo 变量现在是一个字符串，而不是 MatchInfo 对象。

希望这可以帮助。

ps5 powershell 版本 5 字符串字符串操作

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-01-28T01:21:46.587

另一种变体，匹配字符串中的 7 个数字

```
echo "123456789 hello test" | % {$_ -match "\d{7}" > $null; $matches[0]} 
```

返回：1234567

# linux - Linux：删除不包含所有指定单词的文件

> ID：614654
> 
> 赞同：13
> 
> 时间：2009-03-05T12:59:29.000
> 
> 标签：linux, bash, file, shell

在目录中，如何删除缺少任何指定单词的文件，以便只留下包含所有单词的文件？我尝试使用 grep 和 rm 命令编写一个简单的 bash shell 脚本，但我迷路了。我对Linux完全陌生，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-03-05T13:08:48.413

怎么样：

```
grep -L foo *.txt | xargs rm
grep -L bar *.txt | xargs rm 
```

如果文件不***包含***，`foo`则第一行将删除它。

如果文件不***包含***，`bar`则第二行将删除它。

仅包含两者的文件`foo`和`bar`应该留下

```
-L, --files-without-match
     Suppress normal output; instead print the  name  of  each  input
     file from which no output would normally have been printed.  The
     scanning will stop on the first match. 
```

另请参阅[@Mykola Golubyev 的帖子](https://stackoverflow.com/questions/614654/linux-removing-files-that-dont-contain-all-the-words-specified/614727#614727)以放置循环。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-03-05T13:22:15.933

```
list=`Word1 Word2 Word3 Word4 Word5`
for word in $list
    grep -L $word *.txt | xargs rm
done 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-05T13:28:40.207

除了上面的答案：使用换行符作为分隔符来处理带空格的文件名！

```
grep -L $word $file | xargs -d '\n' rm 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-05T13:51:51.090

grep -L 单词 | xargs rm

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-05T14:04:47.920

要执行相同的匹配文件名（不是上述大多数解决方案的文件内容），您可以使用以下内容：

```
for file in `ls --color=never | grep -ve "\(foo\|bar\)"`
do
   rm $file
done 
```

根据评论：

```
for file in `ls` 
```

不应该使用。下面不使用`ls`

```
for file in *
do
  if [ x`echo $file | grep -ve "\(test1\|test3\)"` == x ]; then
    rm $file
  fi
done 
```

-ve 反转对文件名中 foo 或 bar 的正则表达式模式的搜索。要添加到列表中的任何其他单词都需要用 \| 分隔。例如一\|二\|三

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-05T13:07:57.713

首先，删除文件列表：

```
rm flist 
```

然后，对于每个单词，如果文件包含该单词，则将文件添加到文件列表中：

```
grep -l WORD * >>flist 
```

然后排序，uniqify 并得到一个计数：

```
sort flist | uniq -c >flist_with_count 
```

应该删除 flsit_with_count 中没有字数的所有文件。格式为：

```
2 file1
7 file2
8 file3
8 file4 
```

如果有 8 个单词，那么 file1 和 file2 应该被删除。我会把脚本的编写/测试留给你。

好的，你说服了我，这是我的脚本：

```
#!/bin/bash
rm -rf flist
for word in fopen fclose main ; do
    grep -l ${word} *.c >>flist
done
rm $(sort flist | uniq -c | awk '$1 != 3 {print $2} {}') 
```

这将删除目录中不包含所有三个单词的文件：

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-05T15:34:18.813

您可以尝试这样的事情，但如果模式包含*shell*或*grep*元字符，它可能会中断：

（在这个例子中，*一二三*是模式）

```
for f in *; do
  unset cmd
  for p in one two three; do
    cmd="fgrep \"$p\" \"$f\" && $cmd"
  done
  eval "$cmd" >/dev/null || rm "$f"  
done 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-03-05T13:10:17.850

这将删除所有不包含*Ping*或*Sent字样的文件*

```
grep -L 'Ping\|Sent' * | xargs rm 
```

# c# - 我想知道文件路径的用法

> ID：614660
> 
> 赞同：0
> 
> 时间：2009-03-05T13:02:23.547
> 
> 标签：c#

我做了一个项目，其中有一个业务逻辑和一个 GUI。现在我必须将它们分开在同一个项目中。业务逻辑在不同的类中。在我的项目中，有一个文件需要从内存中加载。然后在该文件中的操作在业务逻辑类中完成，结果显示在 winform 中。现在我想在业务逻辑类中给出文件路径，以便我浏览的任何 xml 文件都显示在 winform 上。这样做的语法是什么，即给出文件路径。像 String filename= 这样的东西（之后是什么）。以便文件在winform中打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-05T14:14:33.717

As I understand it, you get a file path from the UI and are wondering how to best pass this path to your business logic classes.

A string is a very common and acceptable way to pass a file path from one class to another.

FxCop may complain and request you use a Uri. I think that's a bit of overkill, and the Uri class can be confusing. I'd suggest skipping it.

Another way is to pass a FileInfo. Your UI gets the file path from the user, creates a FileInfo, and determines from this if the file exists and if its available to the user. If it isn't, the UI reports back to the user and waits for input. If it is, just pass the FileInfo to your business logic. There it can be used to construct a stream that an XmlReader can consume.

Of the three I'd say 3 sounds the best. The first is done more often, however.

# actionscript-3 - AS3 的日志记录 API

> ID：614663
> 
> 赞同：10
> 
> 时间：2009-03-05T13:03:12.000
> 
> 标签：actionscript-3, logging

快速提问，我一直在为 AS3 项目寻找一个简单的日志工具（我不想要任何 Flex 依赖项），到目前为止我的印象是没有积极开发的项目。

我需要的是基本的日志记录，以及允许我将日志记录发送到文件（可能使用 AIR 和 LocalConnection）并可能发送到 html div 等的适配器。

有人对一个简单、轻量级的项目有任何意见吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-05T13:08:14.110

我们最近启动了一个名为 AS3Commons 的项目，其中包含 AS3 日志框架的早期实现。我们的目标是提供一个日志抽象 API，允许您插入其他日志框架的适配器。我们还有一个使用跟踪记录的内置记录器。

它的用法类似于其他日志记录框架。

```
private static var logger:ILogger = LoggerFactory.getLogger("com.domain.Class"); 
```

[在http://code.google.com/p/as3-commons/](http://code.google.com/p/as3-commons/)检查它

任何反馈表示赞赏。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-08-17T15:21:29.153

这是迄今为止最好的 as3 记录器！！！！

[http://arthropod.stopp.se/](http://arthropod.stopp.se/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-06T01:26:33.773

AS3 中有一个标准的[Logging API](http://livedocs.adobe.com/flex/3/html/help.html?content=logging_09.html)。您可以将其设置为记录到不同的目标。例如，如果您使用的是 AIR，则可以使用 as3corelib 中的[FileTarget](http://code.google.com/p/as3corelib/)将其记录到文件中。

配置：

```
var logFile:File = File.applicationStorageDirectory.resolvePath("logs/logfile.log");
var logTarget:FileTarget = new FileTarget(logFile);
logTarget.filters = ["path.to.Class"];
logTarget.level = LogEventLevel.ALL;
logTarget.includeDate = true;
logTarget.includeTime = true;
logTarget.includeCategory = true;
logTarget.includeLevel = true;
Log.addTarget(logTarget); 
```

记录：

```
var log:ILogger = Log.getLogger("path.to.Class");
log.info("testing the logging..."); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-06T01:13:12.090

[我总是对没有听说过节肢动物](http://arthropod.stopp.se/)的人数感到惊讶。它可以完成您所描述的一切以及更多。包括密码加密连接。节肢动物的设置方式也很容易根据您的特定需求快速编辑类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-13T18:13:04.800

我正在开展一个对 Flash 友好的日志记录项目。它没什么大不了的（还没有？），但它轻巧方便。它确实（可选地）利用了节肢动物（一个伟大的项目），但你可以很容易地在任何你喜欢的地方拍摄输出。它的工作方式类似于 Flex 框架，所以如果您熟悉它，那么过渡将是轻松的。

您可以在此处阅读有关该项目的信息并[下载商品](http://pbking.com/blog/?tag=pblogger)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-02-07T14:34:09.477

MonsterDebugger 的选项比您想要的要多。但它很小，并且有一些非常方便的功能。包括实例检查、编辑属性、从空中控制台远程调用方法、浏览/编辑显示树。

[http://monsterdebugger.com/](http://monsterdebugger.com/)

他们制作了一个游戏，所以你可以学习调试器，它很棒。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-14T12:24:24.623

我发现对我来说最好的解决方案是将 as3commons-logging 与 Arthropod 结合起来，如下所示：

```
LOGGER_FACTORY.setup = new SimpleTargetSetup(mergeTargets(new TraceTarget(), new ArthropodTarget())); 
```

然后，如果您的客户遇到问题但无法跟踪 flashlog，他们可以启动 Arhtropod。惊人的！

# java - 记录 Java Web 应用程序？

> ID：614666
> 
> 赞同：21
> 
> 时间：2009-03-05T13:03:48.303
> 
> 标签：java, web-applications, logging, log4j

我计划实现登录到我目前正在开发的 Web 应用程序，但我正在努力解决一些细节问题。记录 Java Web 应用程序的最佳方法是什么？

具体来说;

*   .war 包文件中的配置文件在哪里？
*   人们在哪里登录，相对或绝对路径平面文件或数据库？
*   Log4J 日志记录是直接自动进入应用程序服务器日志文件还是您必须设置的东西？在这种情况下，我使用的是 Tomcat，但我经常使用 Jrun。
*   对于 Web 应用程序日志记录，我应该注意哪些其他问题？

目前我正在使用 Log4J，但我认为最佳实践将普遍适用于所有日志记录实现。

**编辑：**
顶部问题的一个补充。

*   你在哪里初始化日志配置？

在传统应用程序中，我在入口点执行此操作；

```
DOMConfigurator.configureAndWatch("log4j.xml"); 
```

Web 应用程序等价物是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-05T18:42:39.673

我建议您使用[SLF4J](http://www.slf4j.org)。这是一个简单的日志外观，它支持大多数流行的日志系统（*Log4j*、*commons-logging*、*Java Logging API*和*Logback*）。使用它，**您将能够**通过简单的 CLASSPATH 更新将您的下划线日志系统替换为任何其他系统。

*SLF4J*的另一个好处是[参数化调用](http://www.slf4j.org/faq.html#logging_performance)，它减少了丑陋的日志记录代码。

实际上，他们建议将*SLF4J*与[Logback](http://logback.qos.ch)一起使用。 *Logback*是*Log4J*的继承者。它是由同一作者设计的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-05T13:13:04.987

**.war 包文件中的配置文件在哪里？** 类路径的根。

**人们在哪里登录，相对或绝对路径平面文件或数据库？** 取决于需要。使用相对路径总是更好。如果您实现另一个应用程序，该应用程序将从它获取日志并使用电子邮件/短信发送它们，那么数据库是很好的

**Log4J 日志记录是直接自动进入应用程序服务器日志文件还是您必须设置的东西？在这种情况下，我使用的是 Tomcat，但我经常使用 Jrun。** 如果您使用控制台附加程序，是的，它将记录在您的 servlet 容器日志文件中。

**对于 Web 应用程序日志记录，我应该注意哪些其他问题？** 如果您从不同的线程使用[logback](http://logback.qos.ch/)进行日志记录，它是线程安全的，并且会公开参数化的日志消息。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-05T15:01:31.203

记录到数据库会增加另一个故障点。我们遇到了这样一种情况，即 prod 服务器登录到数据库，并且有人在该数据库上运行了一个昂贵的查询，这大大降低了它的速度，以至于 prod 服务器变得非常非常慢。如果空间不足，登录到文件可能会导致问题，但似乎不太可能减慢整个应用程序的速度。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-05T13:07:27.857

我将配置放在默认包上：src/

并使用 ${catalina.home} 系统属性登录到文件：

```
log4j.appender.???.file=${catalina.home}/logs/system.log
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-05T13:27:50.350

将配置文件放置在管理员可以在不重新构建您的 Web 应用程序的情况下修改它的地方可能是一个好主意（例如，这样他们就可以打开详细的日志记录而不会在半夜唤醒您）。

不幸的是，没有“官方”方法可以从网络应用程序中找到外部化资源（如果我错了，请纠正我）。我见过的最常见的做法是查看类路径中的目录。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-05T16:19:09.550

我建议通过 slf4j 调用日志 API (log4j)。即使您使用 log4j，Web 容器或依赖模块也可能使用不同的日志 API，例如 Java.util.logging 或 Jakarta commons logging。Slf4j 提供了将它们重定向到 slf4j API 的桥接模块。因此，在这种情况下，所有日志消息都由 log4j 写入。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-30T23:05:17.473

优秀的论文[How to Do Application Logging Right](http://arctecgroup.net/pdf/howtoapplogging.pdf)有很多问题。

我相信您的其他问题已在此页面上由其他人回答。

我还建议您使用 SLF4J。

最后一件事：拥有[对象的可朗读表示](http://eclipsesource.com/blogs/2012/07/24/google-guava-quickie-clean-tostring-methods/)可以节省一些时间。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-05T13:09:25.747

*   将 log4j 放入容器（服务器）并为每个应用程序创建适当的附加程序
*   相对于服务器路径，但这取决于您的需要
*   我们使用记录到不同文件的附加程序，具体取决于您的需要，例如一个用于休眠信息/统计的文件，一个仅用于应用程序等。
*   不要登录太多，它会减慢应用程序的速度

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-05T13:15:07.073

我个人将 log4j.properties 放在 WEB-INF 目录中，并使用带有以下代码的 init servlet：

```
public class InitServlet extends javax.servlet.http.HttpServlet implements javax.servlet.Servlet {

private static final String LOG4J_FILE = "WEB-INF/log4j.properties";

public InitServlet() {
    super();
}

@Override
public void init() throws ServletException {
    super.init();
    PropertyConfigurator.configure(getServletContext().getRealPath(LOG4J_FILE));
    LogFactory.getLog(InitServlet.class).info("LOG 4J configured");
} 
```

}

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-05T14:27:36.183

*   .war 包文件中的配置文件在哪里？

在类路径的根目录下，但是……不要把配置文件放在war包里。如果您更改日志记录配置，您不想重新打包和重新部署应用程序，是吗？更好的做法是将配置文件放在战争之外的类路径中。

*   人们在哪里登录，相对或绝对路径平面文件或数据库？

我通常将日志记录到**单独分区**上的文件系统（日志文件可以增长得非常快，如果它们变得太大，则永远不应阻塞应用程序或操作系统）。我大部分时间使用基于以下模型的**绝对路径**： /var/projects/<PROJECT_NAME>/<PRODUCT>/<CLUSTER_NAME>/logs/<INSTANCE_NAME>.log 其中 <PROJECT_NAME> 是项目名称，<PRODUCT>可以是 Apache、Tomcat、Weblogic...，<CLUSTER_NAME> 是集群的名称，<INSTANCE_NAME> 是集群内实例的名称。记录到文件系统比在数据库中要快。缺点是如果您使用多个实例和物理机，则日志不是集中式的。但是合并可以很容易地用一个脚本来完成。

*   Log4J 日志记录是直接自动进入应用程序服务器日志文件还是您必须设置的东西？在这种情况下，我使用的是 Tomcat，但我经常使用 Jrun。

应用程序服务器日志是应用程序服务器日志，而不是应用程序日志。不要给他们写信，而是设置一个记录器工具（例如 log4j）并写入应用程序日志（了解专用）。

*   对于 Web 应用程序日志记录，我应该注意哪些其他问题？

如果您使用的是 log4j，请不要忘记在记录之前使用 isDebugEnabled()：

```
if(logger.isDebugEnabled()) {
  logger.debug("Bla Bla Bla");
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-03-05T14:56:50.340

*   .war 包文件中的配置文件在哪里？

通常，我不会在应用程序中放置任何日志记录配置，而是将其留给 appserver 管理员来配置服务器范围的日志记录。在极少数情况下，我希望使用 webapp 部署 log4j 配置，WEB-INF 是通常的路径。

*   人们在哪里登录，相对或绝对路径平面文件或数据库？

同样，取决于应用服务器设置。应用服务器和每天轮换的一个常见日志文件是通常的设置。如果有任何特定于应用程序的需求，管理员可以为应用程序配置单独的日志文件（按包/类名区分）。

*   Log4J 日志记录是直接自动进入应用程序服务器日志文件还是您必须设置的东西？在这种情况下，我使用的是 Tomcat，但我经常使用 Jrun。

往上看。对于用于开发目的的 tomcat，我只需查找它的日志记录 (log4j) 配置并在那里添加特定于应用程序的特定内容。

*   对于 Web 应用程序日志记录，我应该注意哪些其他问题？表现。上线后，将日志级别限制在最低限度（即 WARN 或 ERROR）。在您的代码中使用 `if (log.isDebugEnabled()) { log.debug("..."); }`和类似的构造。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-03-05T18:08:21.363

请注意，如果您只需要一点日志记录，则 servlet 标准规定您可以获取 ServletContext 并使用那里的日志方法。这是 System.out.println 的通用 servlet 等价物。

# php - 命令不同步；你现在不能运行这个命令

> ID：614671
> 
> 赞同：111
> 
> 时间：2009-03-05T13:05:32.323
> 
> 标签：php, sql, mysql, mysqli

我正在尝试执行我的 PHP 代码，该代码通过 mysqli 调用两个 MySQL 查询，并收到错误“命令不同步；您现在无法运行此命令”。

这是我正在使用的代码

```
<?php
$con = mysqli_connect("localhost", "user", "password", "db");
if (!$con) {
    echo "Can't connect to MySQL Server. Errorcode: %s\n". Mysqli_connect_error();
    exit;
}
$con->query("SET NAMES 'utf8'");
$brand ="o";
$countQuery = "SELECT ARTICLE_NO FROM AUCTIONS WHERE upper(ARTICLE_NAME) LIKE % ? %";
if ($numRecords = $con->prepare($countQuery)) {
    $numRecords->bind_param("s", $brand);
    $numRecords->execute();
    $data = $con->query($countQuery) or die(print_r($con->error));
    $rowcount = $data->num_rows;
    $rows = getRowsByArticleSearch("test", "Auctions", " ");
    $last = ceil($rowcount/$page_rows);
}  else {

print_r($con->error);
}
foreach ($rows as $row) {
    $pk = $row['ARTICLE_NO'];
    echo '<tr>' . "\n";
    echo '<td><a href="#" onclick="updateByPk(\'Layer2\', \'' . $pk . '\')">'.$row['USERNAME'].'</a></td>' . "\n";
    echo '<td><a href="#" onclick="updateByPk(\'Layer2\', \'' . $pk . '\')">'.$row['shortDate'].'</a></td>' . "\n";
    echo '<td><a href="#" onclick="deleterec(\'Layer2\', \'' . $pk . '\')">DELETE RECORD</a></td>' . "\n";
    echo '</tr>' . "\n";
}
function getRowsByArticleSearch($searchString, $table, $max) {
    $con = mysqli_connect("localhost", "user", "password", "db");
    $recordsQuery = "SELECT ARTICLE_NO, USERNAME, ACCESSSTARTS, ARTICLE_NAME, date_format(str_to_date(ACCESSSTARTS, '%d/%m/%Y %k:%i:%s'), '%d %m %Y' ) AS shortDate FROM AUCTIONS WHERE upper(ARTICLE_NAME) LIKE '%?%' ORDER BY str_to_date(ACCESSSTARTS, '%d/%m/%Y %k:%i:%s')" . $max;
    if ($getRecords = $con->prepare($recordsQuery)) {
        $getRecords->bind_param("s", $searchString);
        $getRecords->execute();
        $getRecords->bind_result($ARTICLE_NO, $USERNAME, $ACCESSSTARTS, $ARTICLE_NAME, $shortDate);
        while ($getRecords->fetch()) {
            $result = $con->query($recordsQuery);
            $rows = array();
            while($row = $result->fetch_assoc()) {
                $rows[] = $row;
            }
            return $rows;
        }
    }
} 
```

我已尝试阅读此内容，但我不确定该怎么做。我已阅读有关商店结果和免费结果的信息，但是在使用它们时它们没有任何区别。我不确定这个错误是在哪一点引起的，我想知道为什么会出现这个错误，以及如何解决它。

按照我的调试语句，countQuery 的第一个 if 循环甚至没有被输入，因为我的 sql 语法中的错误 near near `'% ? %'`。但是，如果我只是选择`*`而不是尝试基于 LIKE 子句进行限制，我仍然会收到命令不同步错误。

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2009-03-05T13:24:45.990

您不能同时进行两个查询，因为 mysqli 默认使用无缓冲查询（对于准备好的语句；对于 vanilla 则相反`mysql_query`）。您可以将第一个获取到数组中并循环遍历，或者告诉 mysqli 缓冲查询（使用[`$stmt->store_result()`](http://php.net/manual/en/mysqli-stmt.store-result.php)）。

有关详细信息，请参见[此处](http://php.net/mysqli_query)。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2009-11-30T18:08:35.210

我在我的 C 应用程序中解决了这个问题——我是这样做的：

1.  引用mysql论坛：

    > *当您在应用程序中使用分号分隔符终止查询*时，会出现此错误。虽然在从命令行或在查询浏览器中执行查询时需要使用分号分隔符来终止查询，但请从应用程序内的查询中删除分隔符。

2.  在运行我的查询并处理结果 [C API: `mysql_store_result()`] 之后，我遍历通过多个 SQL 语句执行（例如两个或多个 select 语句（背靠背而不处理结果）发生的任何进一步的潜在未决结果）。

    事实是我的程序没有返回多个结果，但数据库在我执行之前不知道：[C API: `mysql_next_result()`]。我在一个循环中执行此操作（为了更好地衡量），直到它返回非零。那是当前连接处理程序知道可以执行另一个查询的时候（我缓存我的处理程序以最小化连接开销）。

    这是我使用的循环：

    ```
    for(; mysql_next_result(mysql_handler) == 0;) 
      /* do nothing */; 
    ```

我不知道 PHP，但我确信它有类似的东西。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-02-20T22:37:58.690

我今天遇到了同样的问题，但仅在使用存储过程时。这使查询的行为类似于多查询，因此您需要在进行另一个查询之前“使用”其他可用结果。

```
while($this->mysql->more_results()){
    $this->mysql->next_result();
    $this->mysql->use_result();
} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-09-12T15:17:24.390

我每次在使用 $mysqli->query 之前都会调用这个函数，它也适用于存储过程。

```
function clearStoredResults(){
    global $mysqli;

    do {
         if ($res = $mysqli->store_result()) {
           $res->free();
         }
    } while ($mysqli->more_results() && $mysqli->next_result());        

} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2019-06-01T14:13:11.313

一旦你使用

```
stmt->execute(); 
```

您**可以**关闭它以使用另一个查询。

```
stmt->close(); 
```

这个问题困扰了我好几个小时。希望它会解决你的问题。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-09-13T00:39:25.787

我使用 CodeIgniter。一台服务器好的...这台可能较旧...无论如何使用

```
$this->db->reconnect(); 
```

修复。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-06T03:59:25.670

问题在于 MySQL 客户端 C 库，大多数 MySQL API 都是基于该库构建的。问题是 C 库不支持同时执行查询，因此所有基于此构建的 API 也不支持。即使您使用无缓冲查询。这是编写异步 MySQL API 的原因之一。它使用 TCP 直接与 MySQL 服务器通信，并且有线协议*支持*同时查询。

您的解决方案是修改算法，这样您就不需要同时进行两者，或者将它们更改为使用缓冲查询，这可能是它们存在于 C 库中的原始原因之一（另一个是提供一种游标）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-10-28T14:53:02.457

要解决此问题，您必须在使用前存储结果数据

```
$numRecords->execute();

$numRecords->store_result(); 
```

就这样

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-03-06T19:24:59.453

这是我的问题！

参数绑定是“动态的”，所以我有一个变量来设置数据的参数，以便使用**bind_param**。所以那个变量是错误的，但不是抛出像“错误的参数数据”这样的错误，而是说“不同步bla bla bla”所以我很困惑......

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-11-19T00:53:45.930

另一个原因： store_result() 不能被调用两次。

例如，在以下代码中，将打印错误 5。

```
<?php

$db = new mysqli("localhost", "something", "something", "something");

$stmt = $db->stmt_init();
if ($stmt->error) printf("Error 1 : %s\n", $stmt->error);

$stmt->prepare("select 1");
if ($stmt->error) printf("Error 2 : %s\n", $stmt->error);

$stmt->execute();
if ($stmt->error) printf("Error 3 : %s\n", $stmt->error);

$stmt->store_result();
if ($stmt->error) printf("Error 4 : %s\n", $stmt->error);

$stmt->store_result();
if ($stmt->error) printf("Error 5 : %s\n", $stmt->error); 
```

（这可能与原始示例代码无关，但可能与寻求此错误答案的人有关。）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-03-05T13:15:13.813

我认为问题在于你在函数中建立了一个新的连接，然后最后没有关闭它。为什么不尝试传入现有连接并重新使用它？

另一种可能性是您正在从 while 循环获取的中间返回。您永远不会完成外部提取。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-04-04T16:11:33.727

检查您是否正确输入了所有参数。如果定义然后传递给函数的参数数量不同，则会引发相同的错误。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-08-16T12:54:36.260

这与原始问题无关，但我有相同的错误消息，这个线程是谷歌的第一个热门话题，我花了一段时间才弄清楚问题是什么，所以它可能对其他人有用：

我没有使用 mysqli，仍在使用 mysql_connect 我有一些简单的查询，但是一个查询导致所有其他查询在同一个连接中失败。

我使用 mysql 5.7 和 php 5.6 我有一个数据类型为“JSON”的表。显然，我的 php 版本无法识别 mysql 的返回值（php 只是不知道如何处理 JSON 格式，因为内置的 mysql 模块太旧了（至少我认为））

现在我将 JSON-Field-Type 更改为 Text（因为现在我不需要本机 mysql JSON 功能）并且一切正常

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-03-05T08:15:39.183

**清除引用内存，并运行下一个 MYSQL 提取**

如果您使用`Buffered`或`Unbuffered`结果集来获取数据，**首先您必须在获取所有数据后简单地从内存中清除获取的数据**。因为在清除获取的内存之前，您无法在同一连接上执行另一个 MYSQL 过程。

在脚本的右端添加以下函数，这样就可以**解决问题**

```
$numRecords->close(); or $numRecords->free(); // This clears the referencing memory, and will be ready for the next MYSQL fetch 
```

[来自 PHP 文档的参考](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-03-25T15:41:56.193

我使用 Doctrine DBAL QueryBuilder 遇到了这个错误。

我使用 QueryBuilder 创建了一个使用列子选择的查询，也是使用 QueryBuilder 创建的。子选择仅通过创建`$queryBuilder->getSQL()`而不执行。创建第二个子选择时发生错误。`$queryBuilder->execute()`通过使用before using临时执行每个子选择`$queryBuilder->getSQL()`，一切正常。就好像连接`$queryBuilder->connection`在执行当前准备的 SQL 之前仍处于创建新 SQL 的无效状态，尽管每个子选择上都有新的 QueryBuilder 实例。

我的解决方案是在没有 QueryBuilder 的情况下编写子选择。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-04-07T02:08:12.993

我正在使用 ODBC，此修复对我有用：ODBC -> 选项卡系统 DSN -> 双击配置我的数据源 -> 详细信息 -> 选项卡游标 ->**取消选中**[不要缓存只进游标的结果] - > 点击确定

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-07-16T01:37:34.757

我经常遇到这个错误，而且总是在我运行我在 phpmyadmin 或 SQL Workbench 中调试的存储过程时（我正在使用 php 连接 mysqli）。

错误是由于调试涉及在代码中的战略点插入 SELECT 语句以告诉我变量的状态等。在这些客户端环境中运行产生多个结果集的存储过程很好，但它会产生“从 php.ini 调用时出现“命令不同步”错误。解决方案**始终**是注释掉或删除调试选择，因此该过程只有一个结果集。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-10-23T17:59:27.057

`multi_query`仅供参考，我`query`在同一代码中混合使用了这个问题：

```
$connection->multi_query($query);
...
$connection->query($otherQuery); 
```

对于我阅读的内容，未使用的结果未决，因此导致上述错误。

我用一个循环解决了它，消耗了所有的结果`multi_query`：

```
$connection->multi_query($query);
while ($connection->next_result()); // <--- solves the problem
...
$connection->query($otherQuery); 
```

在我的情况下，所有查询都`multi_query`插入到了 where 中，所以我对结果本身没有兴趣。

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2019-05-04T12:57:24.783

我的问题是我使用了第一个准备语句，然后我在同一页面上使用了 mysqli 查询，并收到错误“命令不同步；您现在无法运行此命令”。只有当我使用具有准备语句的代码时，才会出现错误。

我所做的是结束这个问题。它奏效了。

mysqli_stmt_close($stmt);

我的代码

get_category.php （这里使用准备语句）

```
 <?php

    global $connection;
    $cat_to_delete =    mysqli_real_escape_string($connection, $_GET['get'] );

    $sql = "SELECT category_name FROM categories WHERE category_id = ? ;";

    $stmt = mysqli_stmt_init($connection);

    if (!mysqli_stmt_prepare($stmt, $sql))
        $_SESSION['error'] = "Error at preaparing for deleting query. mysqli_stmt_error($stmt) ." & redirect('../error.php');

    mysqli_stmt_bind_param($stmt, 's', $cat_to_delete);

    if (!mysqli_stmt_execute($stmt))
        $_SESSION['error'] = "ERror at executing delete category ".mysqli_stmt_error($stmt) &
            redirect('../error.php');

    mysqli_stmt_bind_result($stmt, $cat_name);

    if (!mysqli_stmt_fetch($stmt)) {
        mysqli_stmt_error($stmt);
    }

    mysqli_stmt_free_result($stmt);
    mysqli_stmt_close($stmt); 
```

admin_get_category_body.php（这里是 mysqli）

```
 <?php

        if (isset($_GET['get']) && !empty($_GET['get']) )
        {
            include 'intodb/edit_category.php';
        }

        if (check_method('get') && isset($_GET['delete']) )
        {
            require 'intodb/delete_category.php';
        }

        if (check_method('get') && isset($_GET['get']) )
        {
            require 'intodb/get_category.php';
        }

        ?>

        <!--            start: cat body          -->

        <div     class="columns is-mobile is-centered is-vcentered">
            <div class="column is-half">
                <div   class="section has-background-white-ter box ">

                    <div class="has-text-centered column    " >
                        <h4 class="title is-4">Ctegories</h4>
                    </div>

                    <div class="column " >

                        <?php if (check_method('get') && isset($_GET['get'])) {?>
                        <form action="" method="post">
                            <?php } else {?>
                            <form action="intodb/add_category.php" method="post">
                                <?php } ?>

                                <label class="label" for="admin_add_category_bar">Add Category</label>
                                <div class="field is-grouped">

                                    <p class="control is-expanded">

                                        <?php if (check_method('get') && isset($_GET['get'])) {?>

                                            <input id="admin_add_category_bar" name="admin_add_category_bar_edit" class="input" type="text" placeholder="Add Your Category Here" value="<?php echo $cat_name; ?>">

                                            <?php

                                            ?>
                                        <?php } else {?>
                                            <input id="admin_add_category_bar" name="admin_add_category_bar" class="input" type="text" placeholder="Add Your Category Here">

                                        <?php } ?>
                                    </p>
                                    <p class="control">
                                        <input type="submit" name="admin_add_category_submit" class="button is-info my_fucking_hover_right_arrow" value="Add Category">
                                    </p>
                                </div>
                            </form>

                            <div class="">

                                <!--            start: body for all posts inside admin          -->

                                <table class="table is-bordered">
                                    <thead>
                                    <tr>
                                        <th><p>Category Name</p></th>
                                        <th><p>Edit</p></th>
                                        <th><p>Delete</p></th>
                                    </tr>
                                    </thead>

                                    <?php

                                    global $connection;
                                    $sql = "SELECT * FROM categories ;";

                                    $result = mysqli_query($connection, $sql);
                                    if (!$result) {
                                        echo mysqli_error($connection);
                                    }
                                    while($row = mysqli_fetch_assoc($result))
                                    {
                                        ?>
                                        <tbody>
                                        <tr>
                                            <td><p><?php echo $row['category_name']?></p></td>
                                            <td>
                                                <a href="admin_category.php?get=<?php echo $row['category_id']; ?>" class="button is-info my_fucking_hover_right_arrow" >Edit</a>

                                            </td>

                                            <td>
                                                <a href="admin_category.php?delete=<?php echo $row['category_id']; ?>" class="button is-danger my_fucking_hover_right_arrow" >Delete</a>

                                            </td>
                                        </tr>

                                        </tbody>
                                    <?php }?>
                                </table>

                                <!--           end: body for all posts inside admin             -->

                            </div>

                    </div>
                </div>

            </div>

        </div>
        </div> 
```

我刚刚想到的东西，我也再次通过全局 $connection 添加连接变量；。所以我认为，在使用 mysqli_stmt_close($stmt); 结束准备语句后，基本上会启动一套全新的查询系统；而且我正在通过包含添加这些文件和其他东西

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2020-06-08T04:25:19.217

这是一个老问题，但是在我的情况下，发布的答案都不起作用，我发现在我的情况下，我在存储过程中的一个表上进行了选择和更新，同一个表有一个更新触发器，该触发器正在被触发并发送程序进入无限循环。一旦发现错误，错误就消失了。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2021-12-21T22:18:23.633

**此错误的最终解决方案如下：**

**1）您必须将此代码复制并粘贴到存储过程的下一个查询上方。**

`do if($result=mysqli_store_result($myconnection)){ mysqli_free_result($result); } while(mysqli_more_results($myconnection) && mysqli_next_result($myconnection));`

* * *

## 回答 #22

> 赞同：-3
> 
> 时间：2019-09-11T17:41:14.063

创建两个连接，分别使用

```
$mysqli = new mysqli("localhost", "Admin", "dilhdk", "SMS");

$conn = new mysqli("localhost", "Admin", "dilhdk", "SMS"); 
```

# c# - 确定由于更改文本框而发生回发的时间

> ID：614699
> 
> 赞同：0
> 
> 时间：2009-03-05T13:13:29.370
> 
> 标签：c#, asp.net, events

我有一个用户控件，它的 <asp:TextBox> 自动回发设置为 true。当用户输入文本并移出文本框时，asp.net 会触发一个回发事件。但是，它不是由文本框专门处理的，而是简单的回发 - page_load 触发，然后生活继续。

我需要的是一种知道这个文本框触发了事件的方法。然后我想触发我自己的自定义事件，以便我的主页可以订阅它并在文本框更改时处理事件。

起初我以为我可以捕获发件人 - 我假设发件人是文本框，但它似乎是页面本身。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-05T14:26:09.993

我认为您遗漏了一些东西，所以我想逐步解释一下：

你的文本框应该是这样的：

```
<asp:TextBox runat="server" ID="TextBox1" AutoPostBack="true" 
OnTextChanged="TextBox1_TextChanged"></asp:TextBox> 
```

并且在您的代码隐藏中，您应该有这样的事件：

```
protected void TextBox1_TextChanged(object sender, EventArgs e)
{
    string str = TextBox1.Text;
} 
```

**注意：** 如果您想在代码隐藏中附加您的事件，您可以通过以下方式执行此操作：

```
TextBox1.TextChanged +=new EventHandler(TextBox1_TextChanged); 
```

但是如果你谈论自定义控件，你应该实现**IPostBackDataHandler**接口来引发事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T13:20:43.177

这是我动态创建的用户控件还是文本框？如果是这样，您必须在 page_load 事件中重新创建该控件，并且该事件应该在文本框上正常触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T13:31:10.357

页面加载发送者将始终是 ASP.default_aspx，因为页面是调用该事件的对象。

您可以连接到偶数 OnTextChanged，其中该发件人将是已更改或导致回发的文本框。

请记住，页面加载将始终在控件上的任何事件之前触发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-05T14:09:47.393

这可能会被忽略，但您实际上是否有为文本框的 TextChanged 事件编码的事件？如果您将其设置为自动回发，但实际上从未为其创建事件，那么您只会获得页面加载和其他相关事件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-05T14:26:11.350

正如在其他答案中提到的，您需要处理“OnTextChanged”事件。

```
<asp:TextBox ID="TextBox1" runat="server" OnTextChanged="TextBox1_TextChanged"></asp:TextBox>

private void TextBox1_TextChanged(object sender, System.EventArgs e)
{
    TextBox txt = (TextBox)sender;
    string id = txt.ID;

    switch(id)
    {
        case "TextBox1":
            break;
    }
} 
```

# xsd - 在 XSD 模式中实现外键类型关系

> ID：614700
> 
> 赞同：3
> 
> 时间：2009-03-05T13:14:50.927
> 
> 标签：xsd, foreign-keys, schema, database-relations

我正试图围绕 xml 模式进行思考，而我试图弄清楚的一件事是如何在元素上引用另一个的关系类型模式，可能完全在另一个模式中。我查看了 xsd:key 和 xsd:keyref ，这似乎是我感兴趣的东西，但我不确定。最初我只是设置类型为 xs:ID abd xs:IDREF 的属性，据我所知，这显然不一定指特定元素。

基本上，我有几个不同的 xml 文件，其中元素引用同一文件或其他文件中的其他元素。它看起来很像一个关系数据库，我很想使用一个，但要求是只使用 XML 文件，所以我至少试图建立*一些*理智，而不是仅仅依靠 xml 注释来定义看似随机的字符串关系。它适用于较小的项目，但它肯定不可扩展。

有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-06T02:34:56.713

我不知道 XML Schema 中有任何东西可以让您相互验证多个 XML 文档。在`xs:id`and `xs:key`(etc) 约束中，您使用 xpath 来应用约束。您可以转到[XML Schema Part 1: Structures](http://www.w3.org/TR/xmlschema-1/#declare-key)并向下滚动一下示例以查看这些约束的实际作用。

如果您有能力定义一个包含其他人的元 XML 文件（如果没有其他方式，可能通过实体引用）然后为该元文件使用模式，那么您应该能够使用 XML 模式来应用您的约束. 如果您为每种 XML 文件类型定义一个模式，您应该能够轻松地（通过`xs:import`或`xs:include`）为一个 XML 文件定义一个元模式，该 XML 文件在一个 XML 文件中包含所有 XML 内容。此元模式可以成功应用您想要的约束。

假设您必须验证一个包含许多帖子的 Wiki，其中每个帖子都有一个作者，可能还有很多评论，其中每个评论也有一个作者，并且您有一个用于所有帖子的 XML 文件，一个用于所有评论，一个用于所有作者，并且您想要验证这些文件之间的约束，每个帖子使用存在的作者和评论，每个评论使用存在的作者，等等。假设您有以下三个文件：

文件`/home/username/posts.xml`：

```
<?xml version="1.0" encoding="UTF-8" ?>
<posts>
  <post>
    <author name="author1"/>
    <comment id="12345" pos="1"/>
    <comment id="12346" pos="2"/>
    <body>I really like my camera...</body>
  </post>
   ...
</posts> 
```

文件`/home/username/comments.xml`：

```
<?xml version="1.0" encoding="UTF-8" ?>
<comments>
  <comment id="12345" author="kindguy">
    That was a very good post
  </comment>
   ...
</comments> 
```

文件`/home/username/authors.xml`：

```
<?xml version="1.0" encoding="UTF-8" ?>
<authors>
  <author name="kindguy" id="1"/>
  <author name="author1" id="2"/>
   ...
</authors> 
```

我的建议是您使用[Entity References](http://en.wikipedia.org/wiki/SGML_entity)制作一个元 XML 文件。例如，您可以创建以下 XML 文件：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!ENTITY postfile    SYSTEM "file:///home/username/posts.xml">
<!ENTITY commentfile SYSTEM "file:///home/username/comments.xml">
<!ENTITY authorfile  SYSTEM "file:///home/username/authors.xml">
<root>
  &postfile1;
  &commentfile;
  &authorfile;
</root> 
```

这个元 XML 文件（实际上，一个普通的旧 XML 文件......“元”只是从您定义的三个 XML 文件的角度来看，而不是任何 XML 意义上的）与以下文件完全等效，并且 XML解析器的行为就像您确实拥有以下文件一样：

```
<?xml version="1.0" encoding="UTF-8" ?>
<root>
  <posts>
    <post>
      <author name="author1"/>
      <comment id="12345" pos="1"/>
      <comment id="12346" pos="2"/>
      <body>I really like my camera...</body>
    </post>
     ...
  </posts>
  <comments>
    <comment id="12345" author="kindguy">
      That was a very good post
    </comment>
     ...
  </comments>
  <authors>
    <author name="kindguy" id="1"/>
    <author name="author1" id="2"/>
     ...
  </authors>
</root> 
```

从此**文件**中，您可以定义将应用所需约束的 XML 模式，即使对于单个文件，无法应用约束。由于使用 XML 实体表示法，您已将所有 XML “包含”到一个文件中，因此您可以在约束引用中使用 xpath。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-01-09T22:28:44.827

此问题在[http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/structures.html](http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/structures.html)注释第 3.11 节中讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T13:36:49.067

如果我没记错的话，`xs:ID`必须在整个文档中是全局唯一的，而`xs:key`只对定义它的元素是唯一的。所以`key/keyref`实际上更像是PK/FK。PK 只需要在一张表中是唯一的。

# c# - MS 企业库配置应用程序块从 4.1 堆栈中删除？

> ID：614709
> 
> 赞同：2
> 
> 时间：2009-03-05T13:16:35.277
> 
> 标签：c#, xml

不确定为什么从最新堆栈中删除了配置应用程序块。

那里有首选的配置框架吗？我期待从 C# 读取/写入 xml 配置信息的解决方案。

**编辑#1**：这个功能现在移到 System.Configuration 是真的吗？我们可以使用它来读取\写入自定义 xml 文件（其他 web.config 或 app.config 文件）

**Edit#2**：我们可以使用 System.Configuration 在自定义配置文件（即不是应用程序配置文件或 web.config 文件）中读取/写入配置数据吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T14:06:03.877

**这个功能现在移到 System.Configuration 是真的吗？**

是的，.NET 1.1 时代的配置应用程序块被移入 System.Configuration，作为 2.0 版本框架的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-09-05T03:39:12.333

我猜它又回到了 Ent Lib 5.1，具有更多功能：http: [//vaideeswaranr.blogspot.com/2010/08/enterprise-library-50-configuration.html](http://vaideeswaranr.blogspot.com/2010/08/enterprise-library-50-configuration.html)

# c - OSX 中 Carbon C 应用程序的异常包装器

> ID：614710
> 
> 赞同：3
> 
> 时间：2009-03-05T13:16:38.053
> 
> 标签：c, macos, exception, crash, macos-carbon

如何在 OSX Carbon 应用程序中有效地捕获和处理来自 C 的分段错误？

背景：我正在制作一个 OSX Carbon 应用程序。我必须从第三方调用库函数。由于线程问题，函数偶尔会崩溃，通常是因为它从一个线程更新自身，并且当我从另一个线程查询它时，它有一些内部过时的指针或句柄。该功能对我来说是一个黑匣子。我希望能够调用该函数，但能够“捕获”它是否崩溃并提供替代返回。在 Windows 中，我可以使用简单的 Visual C 和 Intel C 编译器的 __try{} 和 __except。

```
/* Working Windows Example */
__try { x=DangerousFunction(y);}
__except(EXCEPTION_EXECUTE_HANDLER) {x=0.0;} /* whups, func crashed! */ 
```

我正在尝试为 OSX 制作相同类型的崩溃捕捉器。我在一个非常大的应用程序上使用纯 C。我每秒调用该函数数百万次，因此效率也非常重要。（令人印象深刻的是，Windows __try() 开销非常小！）

这是我尝试过的：

1) C++ 异常。我不确定 C++ 异常是否会捕获 segfault 崩溃。我的应用程序目前是 C。我可以尝试包装器和#ifdefs 使其成为 C++，但这对应用程序来说是很多工作，而且我认为 C++ 异常不会导致崩溃。

2) 信号 + setjump + longjmp。我认为这会起作用......这就是它的设计目的。但是我设置了我的 SEGV 错误处理程序 [事实上我为每个信号都设置了它！] 并且在崩溃期间它从未被调用过。我可以在调用 raise(SEGV) 时手动测试（并成功）。但崩溃似乎并没有真正调用它。我的想法是 CFM 应用程序无法访问完整的 BSD 信号，只有一个子集，并且 Mach 应用程序对于 Real Thing 是必需的。

3) MPSetExceptionHandler。没有很好的记录。我试图设置一个处理程序。它编译并运行，但没有发现段错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T13:57:31.217

您确定您没有获得 SIGBUS 而不是 SIGSEGV 吗？

以下捕获 SIGBUS 是由于尝试在内存位置 0 写入引起的：

```
cristi:tmp diciu$ cat test.c

#include <signal.h>

static void sigac(int sig)
{
    printf("sig action here, signal is %d\n", sig);
    exit(1);
}

int main()
{
    (void)signal(SIGSEGV, sigac);
    (void)signal(SIGBUS, sigac);

    printf("Raising\n");
    strcpy(0, "aaksdjkajskd|");
}

cristi:tmp diciu$ ./a.out 
Raising
sig action here, signal is 10 
```

# c# - DataRow 比较未按预期工作

> ID：614713
> 
> 赞同：3
> 
> 时间：2009-03-05T13:17:40.110
> 
> 标签：c#, datarow

我试图`DataRow`在一个循环中比较两个 s 。但是，以下`if`语句不会返回`true`：

```
if (dt1.Rows[0]["Name"] == dt2.Rows[b]["Name"]) {
    // This never executes
} 
```

但是，如果我添加`.ToString()`到 each 的末尾`DataRow`，则`if`语句返回`true`：

```
if (dt1.Rows[0]["Name"].ToString() == dt2.Rows[b]["Name"].ToString()) {
    // This now executes
} 
```

“名称”列来自同一个表/列。所以问题很简单......我做错了什么？

谢谢
斯蒂芬

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-05T13:21:26.170

这些单元格包含对象，因此您正在进行对象比较，它只是进行参考比较，这与值比较不同。它提出的问题是“这两个对象真的是同一个对象吗？”，本质上它们是指同一个对象，因此是“参考比较”。当您执行 ToString() 调用时，您正在执行字符串比较。这就是它起作用的原因。

[这是 MS 对 Operator== 和比较的讨论的链接。](http://msdn.microsoft.com/en-us/library/ms173147.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-05T13:24:22.183

正如[其马特所说](https://stackoverflow.com/questions/614713/datarow-comparison-not-working-as-expected/614725#614725)，您的第一个片段正在做参考比较。调用的替代方法`ToString`是使用`Object.Equals`：

```
if (Object.Equals(dt1.Rows[0]["Name"], dt2.Rows[b]["Name"])) {
    // stuff
} 
```

使用静态方法而不是实例方法的原因是为了避免空引用的问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-05T13:23:08.973

运算符，如果`==`没有重载，则等同于`ReferenceEquals()`-- 即，它确定两个给定`object`的 s 是否是相同的实例。

调用`ToString()`返回一个`string`类对象，该对象具有重载`==`运算符，用于进行字符串比较。

# mysql - InnoDB 一对一（或无）关系问题

> ID：614715
> 
> 赞同：0
> 
> 时间：2009-03-05T13:18:44.490
> 
> 标签：mysql, database, database-design, innodb

我有两张桌子：

[替代文字 http://img.zoodia.com/pics/643d0c93d59782ae16c0fbb85cabdb88.png](http://img.zoodia.com/pics/643d0c93d59782ae16c0fbb85cabdb88.png)

```
创建表`汽车`（
  `car_id` int(11) NOT NULL AUTO_INCREMENT,
  `car_name` varchar(25),
  主键（`car_id`）
)
引擎=创新；

```

```
创建表`轮胎`（
  `tire_id` int(11) NOT NULL AUTO_INCREMENT,
  `tire_size` int(11),
  `car_id_FK` int(11) NOT NULL DEFAULT '0',
  主键（`tire_id`），
  约束`Ref_Car_Has_tire`外键（`car_id_FK`）
    参考`汽车`（`car_id`）
    删除无操作
    更新无动作
)
引擎=创新；

```

我的问题是轮胎不一定属于汽车，可能会有额外的轮胎坐在周围。尝试在没有正确 car_id 的情况下创建轮胎当然会引发错误。

现在我可以简单地删除引用，但我确信有一种处理这种情况的正确方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-05T13:21:56.557

我现在不确定MySQL是否允许这样做，但我认为以下可以解决您的问题：

```
`car_id_FK` int(11) DEFAULT NULL, 
```

# c++ - 包装数据结构

> ID：614718
> 
> 赞同：2
> 
> 时间：2009-03-05T13:19:33.333
> 
> 标签：c++, inheritance, data-structures, oop

我有一个数据结构，我想在不同的情况下以不同的方式访问/修改。我想出了这个：

```
class DataStructure
{
    public:
       int getType();

    private:
       // underlying data containers    
};

class WrapperBase
{
    public:
        void wrap(DataStructure *input)
            {dataStructure = input;}

    protected:
        DataStructure *dataStructure;
};

class WrapperOne : public WrapperBase
{
     public:
          // @Mykola: I know bytes 4-10 in an array of type one specify the date
          // so this method will format those bytes and return them
          Data getDate()
};

class WrapperTwo : public WrapperBase
{
     public:
          // @Mykola: There is mostly just a chunk of data in packet type two. So this
          // method will turn 4 bytes into an int at position index and return that
          int dataAt(int index);              
}; 
```

我在这里看到的一个问题是 WrapperBase 不是抽象的，即使它应该是。我当然可以在构造函数中添加一些纯虚拟虚拟函数~~或 assert(0) ，~~但这似乎是一个太老套的解决方案。或者我应该完全摆脱继承，因为它只是为了代码重用而完成的？此解决方案还有其他问题吗？

还是我完全走错了路？

**编辑@保罗**

我为什么要这样做？好吧，我得到了几个 1000 个序列化数据数组，我想将它们添加到数据集中。每个数组的前几个字节告诉我它是什么类型的数据，这决定了我如何处理它。所以然后我做类似的事情：

```
// some place in the program
dataSet.processData(dataStructure);

// in the data set class
DataSet::processData(DataStructure *dataStructure)
{
     if(dataStructure->getType() == TYPE_ONE)
     {
          WrapperOne wrapperOne;
          wrapperOne.wrap(dataStructure); 
          processDataTypeOne(wrapperOne); 
     }

     // repeat the above for other data types
} 
```

我当然可以把所有的逻辑都放在`processDataTypeOne`函数中，我一开始就是这么做的，但是对原始数据结构的操作变成了一个丑陋的索引操作。这就是为什么我想将它包装在一个对象中，这将隐藏所有这些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-05T13:48:37.163

想想你希望你的数据基类做什么。如果您要保存数据或将其显示到屏幕上，您可能需要一个具有 ToString 和 ToXML 等函数的基类。

让代码进化。写出您需要的不同 DataStructure 类。然后找到共性并将其移至基类中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-05T13:23:10.377

好吧，我觉得还可以。**如果可能**的话，我建议为 WrapperBase 编写一个更彻底的接口（使用虚拟方法）。我不是要求您添加不必要的功能，而是建议让“包装器”界面更加明确。与 Thomi 的建议相反，我的建议涉及预先确定要修改的接口——正如我已经说过的，这可能是不可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-05T13:24:46.880

只是一个简短的评论，你不能真正在 Base 构造函数中添加一个 assert(0) ，因为无论你有多少继承，构造函数都会一直运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-05T13:28:31.487

我认为您在基类中缺少任何虚拟方法这一事实表明继承是浪费时间。WrapperOne 和 WrapperTwo 的所有共同点是它们使用相同的数据结构。如果您试图避免两次编写相同的业务逻辑来与 DataStructure 交互，那么请考虑将 DataStructure 包装在一个类中以实现该业务逻辑，并让 WrapperOne 和 WrapperTwo 都使用（而不是继承自）该业务逻辑类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-05T13:30:41.763

您可以将 WrapperBase 的默认构造函数和复制构造函数设为“受保护”。它不需要添加任何非函数方法，并确保继承链之外的任何类都不能调用 WrapperBase 的构造函数。或者只是一起废弃继承。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-05T13:32:54.363

使您的包装器成为数据。
创建将返回数据或不同包装器的工厂。这就是我的意思。

```
class DataStructure
{
public:
    typedef int DataType;

    DataStructure( int id ):
        id_( id )
    {}

    DataStructure( const DataStructure& dataStructure );
    virtual ~DataStructure();

    virtual void Set( const DataType& data ) { data_ = data; } 
    virtual DataType Get() const { return data_; }

    int id() const { return id_; }
private:
    DataType data_;
    int id_;
};

class WrapperBase : public DataStructure
{ 
public:
    WrapperBase( DataStructure* dataStructure ):
        DataStructure( dataStructure->id() ),
        dataStructure_( dataStructure )
    {}

    virtual void Set( const DataType& data );
    virtual DataType Get() const;
protected:
    DataStructure* dataStructure_;
};

class WrapperOne : public WrapperBase
{ 
public:
    WrapperOne( DataStructure* dataStructure );
    virtual void Set( const DataType& data );
    virtual DataType Get() const;
};

class WrapperTwo : public WrapperBase
{ 
public:
    WrapperTwo( DataStructure* dataStructure );
    virtual void Set( const DataType& data );
    virtual DataType Get() const;
};

DataStructure* getWrapper( DataStructure* dataStructure )
{
    switch ( dataStructure->id() )
    {
        case 1: return new WrapperOne( dataStructure );
        case 2: return new WrapperTwo( dataStructure );
        default: return new DataStructure( *dataStructure );
    }
}

void processData(DataStructure *dataStructure)
{
    std::auto_ptr<DataStructure> wrapper( getWrapper( dataStructure ) );
    processDataImpl( wrapper.get() );
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-05T13:24:55.957

我认为我们需要更多地了解为什么您需要以不同的方式访问/修改它，为什么您认为需要不同的类来执行此操作，以及您希望从中获得什么

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-05T13:25:09.890

我认为这个解决方案没有任何问题。

您很可能会发现，您最终会在 WrapperBase 类中添加一些通用代码，并且当发生这种情况时，您会很高兴您拥有一个通用基类。

您可能还会发现 WrapperOne 和 WrapperTwo 支持类似的接口。如果是这种情况，您可能希望使用纯虚拟方法在 WrapperBase 中定义该接口 - 这样您就可以使用指向 WrapperBase 的指针作为您实际使用的任何 Wrapper 的替身。

...希望这是有道理的！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-05T13:34:00.727

我会使用一个 teplate 包装器，这样你就可以得到你需要的东西，并且不需要为虚拟呼叫/接口支付任何费用。

```
 template<T>
   class Wrapper
   { 
     Wrapper( const T& data ) 
```

然后，您可以在不需要基类的情况下专门化包装器。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-05T14:26:16.933

一般来说，虽然我同意基类*可能*应该被考虑两次并包含虚拟方法，但从 OO 的角度来看，根本不需要让基类成为虚拟的。
如果一个类与另一个类有“是”关系，它应该从这个类继承。（例如，白鲨“是”鲨鱼，而“是”鱼，但您很可能拥有一个只包含普通鲨鱼或鱼类的系统。）
（与“有”关系相反，其他类应该成为会员。例如，汽车“有”挡风玻璃。）

# cvs - 将 CVS 数据导入 Angel LMS

> ID：614719
> 
> 赞同：0
> 
> 时间：2009-03-05T13:20:10.620
> 
> 标签：cvs

我在将成绩单 cvs 文件导入 angel LMS 时遇到问题。当我尝试导入它时，它什么也没显示。请指导我该怎么做。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-10-09T17:12:47.080

进入 sql 查询管理器，从要导入的表中选择，模仿 csv 文件中的这些字段，然后添加数据并按照以下步骤操作

转到管理控制台
转到工具选项卡
单击文本导入向导
选择您的文件
单击上传
如果您的选项看起来正确，请单击继续
检查您的列并设置默认值
单击继续
选择要导入的表

# ruby-on-rails - REST API 用户速率限制的最佳实践？

> ID：614728
> 
> 赞同：30
> 
> 时间：2009-03-05T13:22:27.617
> 
> 标签：ruby-on-rails, rest, scaling, capacity

我正在整理一个 REST API，由于我不确定它将如何扩展或对它的需求是什么，我希望能够对它的使用进行速率限制以及能够在何时临时拒绝请求盒子容量已满，或者是否存在某种斜线点场景。

当/如果我需要通过添加更多容量来扩展服务时，我还希望能够暂时关闭服务（同时为客户端提供表明主要服务暂时离线的结果）。

这种事情有什么最佳实践吗？实现是带有mysql的Rails。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-03-05T13:41:29.273

这一切都是通过外部网络服务器完成的，它监听世界（我推荐 nginx 或 lighttpd）。

关于速率限制，nginx可以限制，即每个IP 50 req/minute，全部得到503页面，您可以自定义。

关于预期的临时停机，在 Rails 世界中，这是通过特殊的maintainance.html 页面完成的。当 Rails 应用服务器出现故障时，有某种自动化会创建或符号链接该文件。我建议不要依赖文件存在，而是依赖应用服务器的实际可用性。

但实际上，您可以启动/停止服务而不会丢失任何连接。即，您可以在不同的 UNIX 套接字/IP 端口上运行单独的应用服务器实例，并让平衡器（nginx/lighty/haproxy）也使用该新实例。然后您关闭旧实例，所有客户端都只使用新实例。没有连接丢失。当然，这种情况并不总是可能的，取决于您在新版本中引入的更改类型。

haproxy 是一个仅平衡器的解决方案。它可以非常有效地平衡对农场中应用服务器的请求。

对于相当大的服务，你最终会得到类似的东西：

*   api.domain 解析为循环 N 平衡器
*   每个平衡器代理对 M 个网络服务器的静态请求和 P 个应用程序服务器的动态内容请求。哦，你的 REST API 没有静态文件，是吗？

对于相当小的服务（低于 2K rps），所有的平衡都在一两个网络服务器内完成。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-05T10:59:14.827

已经有了很好的答案 - 如果您不想自己实现限制器，还有像 3scale ( [http://www.3scale.net](http://www.3scale.net) ) 这样的解决方案，它对 API 进行速率限制、分析等。它使用与 3scale 架构挂钩的插件（请参阅此处了解[ruby​​ api 插件）。](https://github.com/3scale/3scale_ws_api_for_ruby)您也可以通过 varnish 使用它，并让 varnish 充当速率限制代理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-05T13:38:51.790

我建议在您的应用程序之外实施速率限制，否则高流量仍然会影响您的应用程序。一个好的解决方案是将它作为你的 apache 代理的一部分来实现，比如[mod_evasive](https://coderwall.com/p/eouy3g)

# spring-mvc - Spring MVC spring:bind 标签是如何工作的，status.expression 和 status.value 的含义是什么？

> ID：614729
> 
> 赞同：30
> 
> 时间：2009-03-05T13:22:37.523
> 
> 标签：spring-mvc

让我们讨论以下示例：

```
<spring:bind path="user.userName">
    <input type="text" name="${status.expression}" value="${status.value}"/>
    <span class="fieldError">${status.errorMessage}</span>
</spring:bind> 
```

当这个视图片段被渲染时，${status.expression} 和 ${status.value} 被评估为什么？这些价值观从何而来？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-03-11T14:16:48.730

有关状态变量含义的说明，请参阅此[链接。](http://static.springframework.org/spring/docs/1.1.5/taglib/)

*   *status.expression*：用于检索 bean 或属性的表达式
*   *status.value* : bean 或属性的实际值（使用注册的 PropertyEditors 转换）
*   *status.errorMessages*：由验证产生的错误消息数组

绑定完成时评估状态对象。

还要记住 Spring 2.0 引入了新的表单标签，这可能更适合您的需求。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2011-06-15T14:57:42.810

[Spring 3.0 的绑定标签文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/spring.tld.html#spring.tld.bind)

另请参阅：[绑定状态](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/support/BindStatus.html)

# c# - 有没有办法在不下载整个 CTP VPC 的情况下访问 DotNet 4.0 类库

> ID：614731
> 
> 赞同：0
> 
> 时间：2009-03-05T13:23:02.950
> 
> 标签：c#, c#-4.0, .net-4.0

我想查看我正在处理的项目的新 DotNet 4.0 System.Numeric 命名空间。

我能找到的唯一信息是 microsoft connect 上的 CTP VPC 下载。我不想要整个 vs2010 包，我只需要 System.Numeric 程序集，这样我就可以对其进行一些测试。

有没有人有任何想法或者可能有 VPC 并且可以将 dll 发送给我。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T13:27:03.940

不支持通过 Microsoft 执行此操作的方法。微软为 4.0 发布的唯一版本是 Vs 2010 CTP。.Net 框架或其任何库都没有单独的下载。

单独拥有 DLL 对您没有任何好处。DLL 是针对 4.0 CLR 构建的，需要 4.0 CLR 才能运行。除非您拥有 CTP 映像，否则您将没有 4.0 CLR，并且无法运行/测试此 DLL。

我认为您无法获得 VPC

# java - 如何使用 BeanUtils copyProperties 从布尔值复制到布尔值？

> ID：614734
> 
> 赞同：1
> 
> 时间：2009-03-05T13:23:53.450
> 
> 标签：java, apache-commons-beanutils

开箱即用的 BeanUtils copyProperties 似乎无法处理从布尔对象属性到布尔原始属性的复制。

我想我可以创建并注册一个转换器来处理这个问题，但这似乎不起作用。

那么，如何使用 BeanUtils 将属性从 Source 类复制到 Destination 类，其中：

```
public class Destination {

    private boolean property;

    public boolean isProperty() {
        return property;
    }

    public void setProperty(boolean property) {
        this.property = property;
    }
}

public class Source{

    private Boolean property;

    public Boolean getProperty() {
        return property;
    }

    public void setProperty(Boolean property) {
        this.property = property;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-31T00:39:00.593

```
try creating both 
/*by default beanutils copyproperties looks for below method if you use either apache or spring flavour of beanutils.
always prefer using apache 1.9.2 ( fixed many bugs) but bit slow compared with spring beanutils.*/
 public Boolean getProperty() {
        return property;
    }
//which is used by some frameworks 
 public Boolean isProperty() {
        return property;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T13:59:45.593

其实反之亦然：

```
public static void main(String[] args) throws Exception {
    Source d = new Source();
    d.setProperty(Boolean.TRUE);
    BeanMap beanMap = new BeanMap(d);

    Destination s = new Destination();
    BeanUtils.populate(s, beanMap);
    System.out.println("s.getProperty()=" + s.isProperty());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-05-28T08:39:40.073

```
public class Destination {
    private boolean property;

    // code getProperty() instead
    public boolean isProperty() {
        return property;
    }

    public void setProperty(boolean property) {
        this.property = property;
    }
} 
```

# mysql - 如何在没有统计信息的日子里从 Mysql 取回数据

> ID：614739
> 
> 赞同：2
> 
> 时间：2009-03-05T13:24:25.023
> 
> 标签：mysql, count

我想从一个时间段（比如一周）中恢复注册的数量，这并不难，但我想知道在 MySQL 中是否有可能在没有的天返回零注册。

一个例子： 数据：

```
ID_Profile 数据创建
1 2009-02-25 16:45:58
2 2009-02-25 16:45:58
3 2009-02-25 16:45:58
4 2009-02-26 10:23:39
5 2009-02-27 15:07:56
6 2009-03-05 11:57:30

```

SQL：

```
    选择
        DAY(datCreate) 作为注册日期，
    COUNT(ID_Profile) 作为 NumberOfRegistrations
    FROM tbl_profile
    WHERE DATE(datCreate) > DATE_SUB(CURDATE(),INTERVAL 9 DAY)
    GROUP BY 注册日期
    按 datCreate ASC 排序；

```

在这种情况下，结果将是：

```
注册日期注册人数
25 3
26 1
27 1
5 1

```

显然，我在这之间错过了几天。目前我正在我的 php 代码中解决这个问题，但我想知道 MySQL 是否有任何方法可以为丢失的天数/行自动返回 0。这将是期望的结果：

```
注册日期注册人数
25 3
26 1
27 1
28 0
1 0
2 0
3 0
4 0
5 1

```

这样我们就可以使用 MySQL 来解决任何关于一个月天数的问题，而不是依靠 php 代码来计算每个月有多少天，因为 MySQL 内置了这个功能。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-05T13:33:20.040

不，但一种解决方法是创建一个带有日期主键的单列表，并预加载每天的日期。从最早的起点一直到遥远的未来，您都会有日期。

现在，您可以针对它 LEFT JOIN 您的统计数据 - 然后您将在没有数据的情况下获得空值。如果您真的想要零而不是空值，请使用[IFNULL(colname, 0)](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-05T14:46:04.967

感谢 Paul Dixon，我找到了解决方案。任何对我如何解决此问题感兴趣的人请继续阅读：

首先创建一个存储过程，我在某个地方找到了一个包含今年所有日期的表格。

```
CREATE 表日历（dt 日期不为空）；

CREATE PROCEDURE sp_calendar(IN start_date DATE, IN end_date DATE, OUT result_text TEXT)
  开始
    SET @begin = '插入日历（dt）值';
    SET @date = start_date;
    SET @max = SUBDATE(end_date, INTERVAL 1 DAY);
    SET @temp = '';
    重复
      SET @temp = concat(@temp, '(''', @date, '''), ');
      SET @date = 添加（@date，间隔 1 天）；
      直到@date > @max
    结束重复；
    SET @temp = concat(@temp, '(''', @date, ''')');
    SET result_text = concat(@begin, @temp);
  结尾

   调用 sp_calendar('2009-01-01', '2010-01-01', @z);

   选择@z；

```

然后更改查询以添加左连接：

```
选择
    DAY(dt) 作为注册日期，
    COUNT(ID_Profile) 作为 NumberOfRegistrations
从日历
左连接
    tbl_profile ON calendar.dt = tbl_profile.datCreate
WHERE DATE_SUB(CURDATE(),INTERVAL 6 DAY) 和 CURDATE() 之间的 dt
GROUP BY 注册日期
由 dt ASC 订购

```

我们完成了。

感谢大家的快速回复和解决方案。

# internet-explorer - IE6 中未加载 Flash 电影

> ID：614754
> 
> 赞同：0
> 
> 时间：2009-03-05T13:28:51.410
> 
> 标签：internet-explorer, flash

我有一个 .swf 文件，我尝试浏览它，它在 Firefox 中加载良好，但在 IE6 中无法加载。右键单击时显示“电影未加载”。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T13:44:40.247

确保 OBJECT 元素有一个名为 movie 的子 PARAMETER 元素和一个名为 data 的属性，它们都指向您的 SWF 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T13:31:28.063

您可以发布用于在页面中嵌入移动的 html 吗？

不过，我不得不承认，我发现嵌入闪存的所有细微差别都令人头疼。我永远都记不住它们，所以我依靠这个项目来为我处理所有的浏览器变体：[http](http://code.google.com/p/swfobject/) ://code.google.com/p/swfobject/ 。您可能会发现使用 swfobject 有助于使问题“消失” :-) 如果您需要，他们的文档也有一些“非 JavaScript”后备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-09T04:12:25.067

将 Flash 发布到 HTML 的一个*非常*简单的方法是在 Flash 中按**F12**键。这将在空白 HTML 页面上发布 SWF。这种不费吹灰之力的技术将在所有浏览器上无缝运行。

否则，为了更简洁的实现，我建议使用 swfObject（请参阅上面的 Jarret Hardie 的链接）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-09T10:32:59.020

每当您发布 swf 文件时，您需要将 flash player 更改为 5.0，这意味着 swf 发布在旧版本中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-10T16:28:15.560

查找 swf 对象

[http://code.google.com/p/swfobject/](http://code.google.com/p/swfobject/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-07-29T11:20:24.110

实际问题是应用程序使用 SSL 和客户端身份验证，并且存在一个奇怪的问题，即在 IE 中加载应用程序时，它没有填写 HTTP 请求中的某个标头，因此我不得不使用插入的自定义 servlet 过滤器标题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-02-04T12:57:00.440

我有同样的问题。只需将以下代码复制并粘贴到您的标签中（在 Firefox、IE6、IE7、IE8 中测试）：

```
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"       codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=5,0,0,0" width="750" height="500">
   <param name=movie value="../FolderName/FlashFile.swf">
   <param name=quality value=high>
   <embed src="../FolderName/FlashFile.swf" quality=high pluginspage="http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash" width="750" height="500"></embed> 
</object> 
```

# lucene - 在 lucene 查询中防止“太多子句”

> ID：614758
> 
> 赞同：11
> 
> 时间：2009-03-05T13:31:12.730
> 
> 标签：lucene

在我的测试中，当我尝试从由术语查询和通配符查询组成的布尔查询中获取命中时，我突然遇到了太多子句异常。

我在网上搜索并找到了他们建议增加 BooleanQuery.SetMaxClauseCount() 的资源。
这对我来说听起来很可疑。我应该怎么做？我怎么能相信这个新的幻数足以满足我的查询？在所有地狱崩溃之前，我可以将这个数字增加多远？

总的来说，我觉得这不是一个解决方案。一定有更深层次的问题。。

查询是 +{+companyName:mercedes +paintCode:a*} 并且索引有大约 250 万个文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T15:05:08.417

查询的paintCode:a* 部分是任何以“a”开头的paintCode 的前缀查询。这就是你的目标吗？

Lucene 将前缀查询扩展为一个布尔查询，其中包含与前缀匹配的所有可能术语。在您的情况下，显然有超过 1024 个可能`paintCode`的以“a”开头的 s。

如果您觉得前缀查询毫无用处，那么您离事实不远了。

我建议您更改索引方案以避免使用前缀查询。我不确定您要通过示例完成什么，但是如果您想按首字母搜索油漆代码，请创建一个 paintCodeFirstLetter 字段并按该字段进行搜索。

### 添加

如果你很绝望，并且愿意接受部分结果，你可以从源代码构建你自己的 Lucene 版本。`PrefixQuery.java`您需要对 .和.`MultiTermQuery.java`下的文件进行更改`org/apache/lucene/search`。在`rewrite`两个类的方法中，换行

```
query.add(tq, BooleanClause.Occur.SHOULD);          // add to query 
```

到

```
try {
    query.add(tq, BooleanClause.Occur.SHOULD);          // add to query
} catch (TooManyClauses e) {
    break;
} 
```

我为自己的项目做了这个并且它有效。

如果你真的不喜欢改变 Lucene 的想法，你可以编写你自己的 PrefixQuery 变体和你自己的 QueryParser，但我不认为它更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-12-14T13:48:26.607

似乎您在某种*关键字*类型的字段上使用它（这意味着您的数据源字段中不会有多个标记）。

这里有一个对我来说似乎很优雅的建议：http: [//grokbase.com/t/lucene.apache.org/java-user/2007/11/substring-indexing-to-avoid-toomanyclauses-exception/12f7s7kzp2emktbn66tdmfpcxfya](http://grokbase.com/t/lucene.apache.org/java-user/2007/11/substring-indexing-to-avoid-toomanyclauses-exception/12f7s7kzp2emktbn66tdmfpcxfya)

基本思想是将您的术语分解为多个长度增加的字段，直到您非常确定您不会达到子句限制。

**例子：**

想象一下这样的paintCode：

```
"a4c2d3" 
```

索引此值时，您会在文档中创建以下字段值：

```
[paintCode]: "a4c2d3"

[paintCode1n]: "a"

[paintCode2n]: "a4"

[paintCode3n]: "a4c" 
```

到您查询时，您的术语中的字符数决定了要搜索的字段。这意味着您将*只*对超过 3 个字符的术语执行前缀查询，这大大减少了内部结果计数，从而防止了臭名昭著的*TooManyBooleanClausesException*。显然，这也加快了搜索过程。

您可以轻松地自动化一个过程，该过程自动分解术语并在索引期间根据名称方案用值填充文档。

如果每个字段都有多个标记，则可能会出现一些问题。您可以在文章中找到更多详细信息

# php - 从 Sphinx 中检索信息的最佳方法是什么（在 PHP 中）？

> ID：614761
> 
> 赞同：4
> 
> 时间：2009-03-05T13:32:30.027
> 
> 标签：php, mysql, database, full-text-search, sphinx

我是狮身人面像的新手，我正在一个新网站上设置它。它工作正常，当我在控制台中使用搜索进行*搜索*时，一切正常。

使用 PHP api 和搜索，也给了我相同的结果。但它只给了我找到的行的 ID 和权重。例如，是否有某种方法可以将一些文本字段与“匹配”哈希结合起来？

如果没有办法做到这一点，是否有人知道如何以狮​​身人面像权重排序顺序从数据库（sql）中检索记录（同时搜索所有记录）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-06T11:19:05.957

是的，狮身人面像不会带来结果。但我发现了一种使用 IN() 子句重新排序查询的简单方法，将所有内容组合在一起。

查询某事

```
SELECT * FROM table WHERE id IN(id_list... ) 
```

只是索引结果，它们的 id 在表中：

```
while ($row = mysql_fetch_objects)
   $result[$row->id] = $row; 
```

并从 sphinx 获得匹配结果，它很容易重新排序：

```
$ordered_result = array();
foreach ($sphinxs_results['matches'] as $id => $content)
   $ordered_result[] = $result1[$id]; 
```

如果您的 $sphinxs_results 顺序正确，这将起作用。

它几乎是 pat 的答案，但只有一个循环。我猜可以在大的结果中产生一些差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-19T13:56:48.220

您可以在 ORDER BY 中使用 mysql FIELD() 函数调用来确保所有内容都符合 sphinx 指定的顺序。

```
 $idlist = array();
foreach ( $sphinx_result["matches"] as $id => $idinfo ) {
    $idlist[] = "$id";
}
$ids = implode(", ", $idlist);

SELECT * FROM table WHERE id IN ($ids) ORDER BY FIELD(id, $ids) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T16:52:51.730

不幸的是，sphinx 没有返回匹配的字段，只返回它的 id（sphinx 索引不包含数据 - 仅来自数据的哈希）。您可以在 sphinxsearch.com 论坛上发布有关此问题的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-05T23:51:49.413

正如 Alex 所说，Sphinx 不会返回该信息。您必须使用 ID 自己查询数据库 - 只需遍历每个 ID，获取相关数据，保持结果按权重顺序排列。要在一个查询中完成所有操作，您可以尝试以下操作（伪代码 - PHP 不是我选择的语言）：

```
results = db.query("SELECT * FROM table WHERE id IN (%s)", matches.join(", "));
ordered_results = [];

for (match in matches) {
  for (result in results) {
    if (result["id"] == match) {
      ordered_results << result;
    }
  }
}

return ordered_results; 
```

# windows - 在没有用户登录的情况下在 Windows 启动时运行脚本

> ID：614766
> 
> 赞同：15
> 
> 时间：2009-03-05T13:33:40.040
> 
> 标签：windows, cron, scheduled-tasks, startup

这是一台 Windows 2003（或更高版本）的机器，每天早上都会开机，但直到几个小时后才有人登录。

我想利用中间的时间运行备份脚本 c:\script\backup.cmd

机器启动后如何在无人看管的情况下启动？

我尝试了 2 个注册表项，但这导致脚本在用户登录后运行（为时已晚）：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run

HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\RunServices 
```

最后我使用了Windows TaskScheduler，谁有这样的选择，但我想知道是否还有另一种可能？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-03-06T00:32:09.990

**简短回答：** **GPEDIT.MSC**（开始、运行、GPEdit.msc）

Windows 2000 及更高版本 [1] 在策略编辑器中提供计算机**启动脚本**集合：

*   **计算机设置**-> **Windows 设置**->**脚本（启动/关机）**

在用户配置位中有一个等效的*登录*脚本区域（即计算机启动后，用户登录时）。

**更长：**

GPEDIT.MSC 是组策略编辑控制台，在直接使用时针对本地计算机的本地组策略存储运行，因此对于设置仅本地参数很有用。使用 Active Directory 时，类似的界面用于编辑 AD 林托管的*组策略对象*(GPO)，因此相同的设置可在一堆机器上使用。

计算机启动脚本在*计算机上下文中*运行，即作为 LocalSystem，如您所述，因此它们通常*无法*访问需要特定用户或组成员身份才能工作的网络驱动器。当域成员计算机访问网络资源时，他们通常（有例外）使用他们的 MACHINENAME$ 帐户进行身份验证 - 这允许您设置共享/NTFS 权限以允许计算机访问这些资源。

*启动脚本*是在机器启动时让进程运行的一种快速简便的方法。

但是，计算机启动过程将受到运行程序所需时间的影响，因此您可能希望确保使用批处理文件中的 START 命令调用它，或者指定不等待可执行文件在任何脚本中完成您使用的语言。（关键点是：*异步*运行脚本，除非它很关键，或者不需要异步运行，因为它总是*不需要时间*。长靴=不满意的用户）。

使用 Win32 服务是另一种选择 - 您可以使用资源工具包中的**SRVANY**实用程序来“服务化”几乎任何可执行文件。VS.Net 2002 及更高版本还允许您直接构建托管服务。

从 Vista/2008 开始，**任务计划程序**变得*更加*强大，能够在启动时、空闲时和/或在生成事件日志或满足某些其他条件时运行脚本：这非常酷！计划任务可能具有能够指定运行任务的用户帐户的优势，如果这对您很重要的话。

警告脚本：http: [//support.microsoft.com/kb/256320](http://support.microsoft.com/kb/256320)

异步运行启动脚本：http: [//msdn.microsoft.com/en-us/library/ms811602.aspx](http://msdn.microsoft.com/en-us/library/ms811602.aspx)

Vista 任务计划程序（新增功能）： [http ://technet.microsoft.com/en-us/appcompat/aa906020.aspx](http://technet.microsoft.com/en-us/appcompat/aa906020.aspx)

[1] Windows XP、2003、Vista/2008、Windows 7/2008R2、Windows 8/2012、Windows 8.1/2012R2、Windows 10/Windows Server 2016。一切。但NT4没有！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-05T13:36:19.643

您已经概述了一个很好的解决方案：

设置计划任务以在启动时运行，并允许作业在用户未登录时运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-05T13:40:50.913

您可以使用组策略 gpedit.msc 在系统启动时运行脚本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-05T13:43:37.397

你这样做的方式对我来说似乎很好；但是，如果您想要一种替代方法，那么服务会在机器启动时启动，因此您可以编写一个服务来检测它是否是新的一天（以允许重新启动），然后运行您的备份。

如果**我**将其作为服务执行，我会使用 TCL，因为我了解并喜欢它，并且它具有扩展[twapi](http://twapi.magicsplat.com/)，允许您将脚本作为服务运行。其他脚本语言可能也有类似的功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-05T14:10:35.333

有，如果您使用的是 Active Directory。如果您可以将计算机隔离到其自己的 OU 或使用 WMI 过滤，则可以分配一个 GPO，该 GPO 具有计算机的启动脚本。这将确保即使有人通过安全模式进入并禁用了任务计划程序，在启动并连接到域时，脚本也会运行。

# .net - 重复没有数据绑定的 ASP.NET 控件

> ID：614768
> 
> 赞同：2
> 
> 时间：2009-03-05T13:35:53.170
> 
> 标签：.net, asp.net

我有一个 ASP.NET 页面，它需要能够让用户输入多条记录。我想要的是在下面显示一个带有添加按钮的文本框集合。每次用户单击添加按钮时，都会将一个新的、相同的文本框集合添加到页面中。然后，当用户单击提交时，可以检查每个文本框集合，提取数据并将其保存到数据库中。

请注意，用户只会将数据插入数据库。不允许编辑或更新记录。

问题是我看过的每个 asp.net 控件（Repeater、Formview 等）都要求控件是数据绑定的。但是，我宁愿没有这个。我只想要一个控件来收集信息，这样我就可以在最后通读它并自己插入数据库。关于如何轻松完成此任务的任何想法？如有必要，我会将数据绑定到表中，但我想我会先问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-05T13:41:31.237

我会使用中继器：您可以将它数据绑定到诸如 List<> 之类的集合 - 它不必绑定到数据库中的某些内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-05T14:35:26.320

利用 Repeater、GridView 和 ListView 等控件提供的数据绑定的便利性。

使用绑定来填充控件。

使用您喜欢的任何方法从中继器等中检索和更新数据库。

要使 2 路数据绑定工作，您无论如何都必须通过代码启用它。

这些控件提供的 Row/Item 集合也将使您的自定义代码更易于编写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T13:44:08.657

您可以在 de aspx 中执行 for 循环

```
 <% for (i=0;i<list.count;i++)
       {
          string name = "textbox" + i.ToString();
          string value = list[i].property;

%>
        <input type="text" name="<%= name %>" value="<%= value %>">
       <%}
    %> 
```

在代码隐藏中，您可以在发布后询问 Request.Form["textbox2"] 变量的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-05T13:57:11.433

您可以动态地将所需的任何控件添加到页面，允许迭代您自己的数组并添加您需要的任何控件，而无需任何数据绑定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-05T14:04:10.387

使用 jQuery 从客户端添加文本框，您必须在服务器端收集。

# asp.net-mvc - 完全动态的表单创建：MVC 还是 WebForms？

> ID：614771
> 
> 赞同：1
> 
> 时间：2009-03-05T13:36:21.423
> 
> 标签：asp.net-mvc, forms, dynamic, webforms

我将开始一个新项目，其中将包括其输入及其类型（文本框、复选框等）、验证规则在 DB 中定义的表单。

我必须为**Form Creation**、**Form Validation**、**Edit/Insert Forms**选择框架之一，但我被卡住了。我怀疑 MVC 会使处理控件**的父子关系**变得困难。尽管 WebForms 将帮助我将所有动态输入都视为对象，但我担心我将不得不为简单的事情处理**反射**。

这个犹豫不决的人有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-05T16:41:26.437

我已经将常规的 asp.net（网络表单）用于完全动态的界面，不需要任何反射。也就是说，我真的不认为你会发现它们中的任何一个会阻碍你实现它。您可能还想查看[http://www.asp.net/dynamicdata/](http://www.asp.net/dynamicdata/)

附言。对于完全动态的，我的意思是通过管理 UI 的界面说明哪些表、哪些列、添加验证元数据、标签:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T13:39:41.587

您对 MVC 的父子关系问题是正确的。据我所知，这将是一个痛苦的屁股。我认为您不需要对 WebForms 进行反射，只要您能以某种方式将控件放入数组中。

我的投票：WebForms。

# wcf - 将架构发布为 wcf 服务问题

> ID：614773
> 
> 赞同：0
> 
> 时间：2009-03-05T13:36:58.317
> 
> 标签：wcf, xsd, wsdl, biztalk

我正在尝试使用“WCF 服务发布向导”将一些 HL7 模式（有很多）发布为 wcf 服务。该向导似乎运行并完成得很好，创建了一个公开我想要的模式的服务。但是当我尝试浏览新创建的服务时，我得到“服务器应用程序不可用”......我查看了事件查看器并注意到错误消息：“System.OutOfMemoryException”。我在查看“任务管理器”时再次进行了测试，我注意到 aspnet_wp.exe 在终止之前消耗了超过 1 GB 的 RAM（应用程序池可能在达到允许的最大内存消耗后回收）。

我很困惑为什么会这样，所以我决定使用“Web 服务发布向导”发布与 ASMX Web 服务相同的模式，看看它是否会有所不同。运行向导后，我尝试浏览该服务，它运行良好，没有任何问题。我查看了生成的 WSDL 定义，它很大，所有引用的模式都作为内联模式添加，而不是作为包含或导入。

这让我相信这可能是 WSDL 生成的问题，在已发布的模式中有这么多包含，但我完全不确定是否会出现这种情况......

有没有人在尝试将模式发布为 wcf 服务时遇到过类似问题？我欢迎所有可以引导我在这个问题上朝着正确方向发展的建议。

谢谢。

-M.帕帕斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-25T02:59:53.467

这个问题肯定是 WSDL 生成工具的内存问题。将复杂甚至半复杂的架构发布为 Web 服务或 WCF 服务通常会导致内存不足异常。我在做 SAP iDoc 演示时遇到过几次这种情况，只是模式对于 WSDL 工具来说太复杂了。希望有帮助。

# wix - MSI 安装程序错误对话框本地化 (WiX)

> ID：614776
> 
> 赞同：0
> 
> 时间：2009-03-05T13:39:15.237
> 
> 标签：wix

我为使用 Visual Studio Express 2008 编写的 .NET 3.5 应用程序创建了一个 MSI 安装程序。安装程序 UI 已本地化（丹麦语）并且看起来不错。我的问题是错误，比如安装了以前的版本，需要先删除，错误对话框是英文的。如何本地化错误对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-05T22:30:46.537

I'm not familiar with Visual Studio, but have you checked out [http://www.tramontana.co.hu/wix/lesson2.php#2.3](http://www.tramontana.co.hu/wix/lesson2.php#2.3) - you need to ensure you specify the correct language and codepages in the **Product** and **Package** tags. You might need to edit the source wxs file if VS doesn't provide a GUI for this.

# php - ASP Classic 中的 UTF-8 Server.UrlEncode 问题

> ID：614781
> 
> 赞同：3
> 
> 时间：2009-03-05T13:40:07.327
> 
> 标签：php, vbscript, asp-classic

我有点麻烦 URL 编码一串 UTF-8 编码文本以通过 HTTP 传递。我在经典 ASP (vbscript) 中使用 Server.URlEncode 对“é”字符进行编码。

它产生以下字符串，

%C3%83%C2%A9

然而，我通过 HTTP 与之交谈的系统是 PHP，它无法解码这个字符串。[在http://www.albionresearch.com/misc/urlencode.php](http://www.albionresearch.com/misc/urlencode.php)使用 PHP 编码器，使用 PHP URL 编码方法编码的相同字符出现，

%E9

有谁知道我如何在我的 ASP 中成功编码我的 UTF-8 编码字符串，以便 PHP 系统可以成功解码它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-05T18:39:12.817

> %C3%83%C2%A9

那编码太多了：字符串被写为 UTF-8，读回为 ISO-8859-1，然后在被十六进制编码之前再次写为 UTF-8！

> %E9

那编码太少了：字符串被写成普通的 ISO-8859-1 和十六进制编码。如果您正在与之交谈的 PHP 脚本需要 ISO-8859-1，这很好，但现代 Web 系统应该使用 UTF-8，在这种情况下，您希望它看起来像这样的序列：

> %C3%A9

（编码恰到好处！）

> 我在经典 ASP 中使用 Server.URLEncode

不幸的是，经典 ASP 在处理 Unicode 方面存在一些严重缺陷。您可以设置@CODEPAGE=65001（和Response.Charset="UTF-8"）来生成UTF-8 页面，但是您的内部字符串类型仍然编码在系统代码页中，并且从表单提交或数据库中抓取的任何数据都会被读入该编码。

因此，您可以 URLEncode() 一个文字 chr 233 以获得正确的输出 OK，但是如果您在表单提交中从 UTF-8 编码的 'é' 获取数据，您最终会得到 'Ã©' — UTF-8 序列被误解为 ISO-8859-1（实际上是 cp1252，相当于 Windows）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T09:38:55.137

那这个呢？

```
Function URLEncodeWithCodepage(value, myCodepage)
    Dim cpOriginal
    cpOriginal = Response.Codepage
    Response.Codepage = myCodepage
    URLEncodeWithCodepage = Server.URLEncode(value)
    Response.Codepage = cpOriginal
End Function 
```

您可以将它与

```
encodedValue = URLEncodeWithCodepage(value, 65001) 
```

让它 UTF-8 编码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T13:21:16.937

将以下内容添加到返回数据的 ASP 页面的头部

```
Response.ContentType = "text/html"
Response.AddHeader "Content-Type", "text/html;charset=UTF-8"
Response.CodePage = 65001
Response.CharSet = "UTF-8" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-10-11T03:27:00.603

这是我的工作。

创建一个用 JScript（不是 VBScript）编码的新 ASP 文件，命名为 urlEncodeUTF8.asp：

```
<%@ Language="JScript" %>
<%
    Response.CharSet="UTF-8"
    Response.Write(encodeURIComponent(Request("s")))
%> 
```

在您的主 ASP 文件中编写以下代码：

```
FUNCTION URLEncodeUTF8(ByVal str)
    URLEncodeUTF8 = ""
    On Error Resume NEXT
    Err.Clear
    postStr = "s=" & Server.URLEncode(str)
    sURL = "http://" & Request.ServerVariables("SERVER_NAME") & "/urlEncodeUTF8.asp"
    SET xmlHTTPObj = CreateObject("MSXML2.ServerXMLHTTP")
    WITH xmlHTTPObj
        .SetTimeouts 2000, 2000, 2000, 5000
        .Open "POST", sURL, false
        .SetRequestHeader "Content-Type", "application/x-www-form-urlencoded; charset=utf-8"
        .SetRequestHeader "Content-Length", Len(postStr)
        .Send postStr
        xmlHttpResponse = .responseText
        IF Err.number=0 AND .Status=200 THEN
            URLEncodeUTF8 = xmlHttpResponse
        END IF
    END WITH    
    SET xmlHTTPObj = NOTHING
    On Error Goto 0
END FUNCTION 
```

现在你可以使用上面的函数对你的字符串进行 URLEncode：

```
Response.Write(URLEncodeUTF8("é")) 
```

在这种情况下，结果将是：

```
%C3%A9 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-30T23:24:34.683

[bobince](https://stackoverflow.com/users/18936/bobince)上面的[回答](https://stackoverflow.com/a/616029/3626160)很好地解释了为什么内置函数不起作用，以及为什么改变 the`CodePage`或`Response`the`Session`不足以改变它。

但是您不必使用额外的 JavaScript 页面来获得有效的自定义功能。下面的 VBScript 函数将转义 UTF8 字符，包括那些使用超过一个字节`%C3%A9`的字符，例如`é`.

```
Function UrlEncode(url)
    For i = 1 To Len(url)
        n = Asc(Mid(url,i,1))
        If (n >= 48 And n <= 57) Or (n >= 65 And n <= 90) Or (n >= 97 And n <= 122) Then
            UrlEncode = UrlEncode & Mid(url,i,1)
        Else
            ChrHex = Hex(Asc(Mid(url,i,1)))
            For j = 0 to (Len(ChrHex) / 2) - 1
                UrlEncode = UrlEncode & "%" & Mid(ChrHex,(2*j)+1,2)
            Next
        End If
    Next
End Function 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-27T13:57:28.470

David Cain 和 Santiago 的 URLEncodeWithCodepage(value, 65001) 与 Server.URLEncode(value) 相同。

我发现最好的方法是 JavaScript runat server ！

```
<script language="javascript1.2" runat="server">
function twEntitesHTMLEncode(sChaineTemp) {
    var buffer = "";
    for (var i=0;i<=sChaineTemp.length-1;i++) {
        buffer = buffer + "&#" + sChaineTemp.charCodeAt(i);
    }
   return buffer;
}
</script> 

<%=twEntitesHTMLEncode("école")%> 
```

# asp.net - 带有 https 的 IE6 和 IE7 中的 PDF 错误错误

> ID：614784
> 
> 赞同：0
> 
> 时间：2009-03-05T13:40:52.613
> 
> 标签：asp.net, https

```
Response.Write("<script language=\"javascript\">window.open( with https and pdf 
```

我们在 Asp.Net 1.1.4332 应用程序中执行的操作如下：

一个按钮触发一个服务器事件，该事件执行一些处理并将数据放入会话对象中，然后执行以下代码：

```
string page = Request.ApplicationPath + "/ApkRapportPage.aspx";    
Response.Write("<script language=\"javascript\">window.open('" + page + "','_new');</script>"); 
```

这将打开一个将 pdf 流式传输到新浏览器窗口的页面

基本上使用以下代码（我知道这里缺少一些东西，但这对问题并不重要）

byte[] pdfbytes = Convert.FromBase64String(rapportB64);

```
Response.ClearContent();
Response.ClearHeaders();
Response.Buffer = true;
Response.ContentType = GetContentType(format);
string header = GetContentDispostionHeader(fileName, format, type);
Response.AddHeader("Content-Disposition", header);
Response.BinaryWrite(pdfbytes);         
Response.End(); 
```

**好的，这段代码有效！**

**只是在使用 HTTPS 时不在 IE6 和 IE7 中**

当使用带有 HTTPS 的 IE6 时，它会导致一个另存为对话框（不是在浏览器中打开的 pdf） 当使用带有 HTTPS 的 IE7 时，它会导致一个空白屏幕 当使用 Firefox 时它工作得很好

如果我在 page_load 中模拟额外的服务器端处理以将所需数据放入会话中，并将按钮替换为在新窗口中打开相同 pdf 生成页面的链接，则代码有效。

对于实际应用程序，在单击按钮之前获取所需数据不是一个选项。

所以我真的很想让下面的代码工作

```
string page = Request.ApplicationPath + "/ApkRapportPage.aspx";    
Response.Write("<script language=\"javascript\">window.open('" + page + "','_new');</script>"); 
```

**问题：** 有人知道为什么在使用 HTTPS 时这段代码在 IE6 和 IE7 中不起作用吗？需要什么才能使代码正常工作？

额外信息：

*   我尝试不使用 response.write，而只是在按钮后面使用一个 javascript window.open，这具有相同的效果
*   当谷歌搜索 pdf 流时，你会发现很多人遇到了这个问题，主要是他们在 IIS 中设置标题长度或其他属性或静态文件压缩标志。我很有信心我都试过了。
*   Adobe acrobat 阅读器设置、浏览器设置或任何其他客户端设置似乎都不是问题。在不同的机器上测试过，http 可以，https 不行。
*   在 https 和 http 之间切换可能与此有关，但是当我将 IE 设置为告诉我何时切换时，测试期间似乎没有发生切换。
*   当用 response.redirect 替换 window.open 部分时，代码也可以工作，只是不在新窗口中

任何帮助将不胜感激 ！

* * *

根据请求的标题，如 Fiddler 所示：

```
 HTTP/1.1 200 OK
   Server: Microsoft-IIS/5.1
   Date: Thu, 05 Mar 2009 14:18:36 GMT
   X-Powered-By: ASP.NET
   X-AspNet-Version: 1.1.4322
   Content-Disposition: Inline;filename=APKrapport.pdf
   Cache-Control: private
   Content-Type: application/pdf; charset=utf-8
   Content-Length: 28307 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-05T13:55:27.587

让附件以您想要的方式打开与您发送的标题有关。如果您定位到要充当动态 PDF 资源的 .aspx 页面，这些 HTTP 标头将变得越来越重要。

[该网站](http://www.rgagnon.com/javadetails/java-0404.html)说明了它可能无法在 IE 中运行的许多原因。

1.  将响应的内容类型设置为“application/pdf”，例如。response.setContentType("应用程序/pdf");
2.  在 url 的末尾添加一个 dummy 参数，例如： [http://xyz/DoGenCompStmt?filename=dummy.pdf](http://x.y.z/DoGenCompStmt?filename=dummy.pdf) 因为 IE 忽略了 content-types，所以你需要给它一个提示，并且“.pdf”扩展名是一个简单的方法。
3.  在响应中设置“内容长度”，否则 Acrobat Reader 插件可能无法正常工作，例如。response.setContentLength(bos.size());
4.  似乎对某些 IE 浏览器有帮助的另一件事是： response.setHeader("Content-Disposition", "inline;filename=somepdf.pdf");

**编辑：**由于您已经尝试了上述所有方法，我只能将您指向[内容处置的 rfc，](http://www.ietf.org/rfc/rfc2183.txt)据我所知，这是告诉浏览器如何处理二进制内容的唯一方法。

**编辑**：真正有帮助的是在您尝试在浏览器中打开 pdf 时查看它当前返回的 HTTP 标头。 [Fiddler 在吸引流量方面做得很好](http://www.fiddlertool.com/Fiddler2/version.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T14:56:53.723

您最好使用通用处理程序 (.ASHX) 来提供此类内容，而不是试图强制网页提供 HTML 以外的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-06T11:24:23.307

经过大量的试验和错误，我找到了一个可行的解决方案，但仍然不确定为什么其他代码不起作用。

此代码有效：

```
StringBuilder js = new StringBuilder("<script language=\"javascript\">");
js.Append("_window = window.open(\"\",'_new');");
js.Append("_window.document.open(\"application/pdf\");");
js.Append("_window.location.href = \"ApkRapportPage.aspx\";");  
js.Append("_window.document.close();");
js.Append("</script>");

Response.Write(js.ToString()); 
```

一定与mime类型有关。

它有一个问题。当 IE 设置为在您在 HTTP 和 HTTPS 之间切换时显示时，此代码将给出该消息两次。以下代码不会切换，但会导致 ApkRapportPage 的页面加载被触发两次。

```
StringBuilder js = new StringBuilder("<script language=\"javascript\">");
js.Append("_window = window.open(\"ApkRapportPage.aspx\",'_new');");
js.Append("_window.document.open(\"application/pdf\");");
js.Append("_window.location.href = \"ApkRapportPage.aspx\";");  
js.Append("_window.document.close();");
js.Append("</script>");

Response.Write(js.ToString()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-03T16:46:08.060

**如果您尝试在 IE7 浏览器中查看内嵌 PDF 时出现空白页，并且您使用的是 Acrobat 版本 6。请更新您的 Acrobat 版本以解决问题。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-12-02T10:17:44.303

请注意，此问题与 HTTPS 无关，同样的问题（和相同的修复）适用于 HTTP。

该修复之所以有效，是因为 IE 的问题是，如果一次加载 PDF，它不会在脚本打开的窗口中显示 PDF。（不知道为什么，但这是问题的核心，也是解决方法。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-12-01T21:27:21.977

我注意到您返回的内容类型已被冲洗

“内容类型：应用程序/pdf；charset=utf-8”

当您将内容流式传输到 aspx 页面时，请确保您设置

```
Response.charset = "" 
```

# bash - bash：下班后如何在家里使用屏幕进行学期会话？

> ID：614785
> 
> 赞同：9
> 
> 时间：2009-03-05T13:40:56.280
> 
> 标签：bash, gnu-screen

一切都在标题中，我想在工作中开始一个会话，并在我在家时能够得到它。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-05T13:51:39.967

在工作时，启动屏幕会话：

```
$ screen 
```

在终端会话上做任何你想做的工作，当你离开回家时，按**CTRL-A**然后**D****分离**会话。然后您的屏幕会话将消失。要在您回家后重新激活它，请使用**-r**选项**恢复**会话：

 ******```
$ screen -r 
```

当您进入保存的屏幕会话时，您的所有工作都会出现。

# html - 是否可以对 Adob e LiveCycle HTML 表单进行数字签名？

> ID：614789
> 
> 赞同：0
> 
> 时间：2009-03-05T13:42:16.477
> 
> 标签：html, forms, adobe, digital-signature, livecycle

是否可以对 Adob​​e LiveCycle HTML 表单进行数字签名？

我知道使用 IBM Lotus Forms，您可以签署表单，并使用 ActiveX 控件呈现为 HTML。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-03-01T08:01:42.747

不可以，Adobe LiveCycle 数字签名仅设计用于 PDF。

参考：

*   [http://www.adobe.com/products/livecycle/digitalsignatures/](http://www.adobe.com/products/livecycle/digitalsignatures/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-12-27T20:30:25.060

我不太确定，我必须自己尝试一下。但这里有一些提示可以回答你的问题。

[LiveCycle 文档]）http://help.adobe.com/en_US/enterpriseplatform/10.0/programLC/help/index.htm?content=000610.html）！说明如下：“对 HTML 表单进行数字签名 如果表单呈现为以下 HTML 转换之一，则您无法签署包含数字签名字段的 HTML 表单：AHTML HTML4 StaticHTML NoScriptXHTML”

XDP 表单也可以以其他格式呈现，MSDHTML 就是其中之一。因此，这需要尝试。

希望这可以帮助。祝你好运。

# java - JAR 多重下载

> ID：614790
> 
> 赞同：2
> 
> 时间：2009-03-05T13:42:25.167
> 
> 标签：java, jar, applet, download, overloading

我在一个小程序上有这个代码。小程序工作正常，但我得到了很多不必要的重复下载。特别是，我注意到每个“getResource”都会触发 .JAR 文件的下载。

```
static {
    ac = new ImageIcon(MyClass.class.getResource("images/ac.png")).getImage();
    dc = new ImageIcon(MyClass.class.getResource("images/dc.png")).getImage();
    //...other images
} 
```

如何避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-11-29T11:03:35.043

只需删除 URLConnection.setDefaultUseCaches(false) 的所有实例即可解决问题。

详情请参阅。

[http://java-junction.blogspot.com/2009/11/applet-jar-caching-not-working.html](http://java-junction.blogspot.com/2009/11/applet-jar-caching-not-working.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T14:08:02.937

您是否将小程序包含在 HTML 页面中？如果是这样，请尝试启用 JAR 缓存，如下所述：http: [//java.sun.com/j2se/1.4.2/docs/guide/plugin/developer_guide/applet_caching.html](http://java.sun.com/j2se/1.4.2/docs/guide/plugin/developer_guide/applet_caching.html)

如果由于某种原因这没有帮助:) 可能会在 Web 服务器上沿您的 applet JAR 公开您的资源/图像，并使用单独的 HTTP 请求访问它们（是的，它很难看，是的，它不会减少所需的下载次数，但它至少减少了需要传输的数据量）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T13:49:08.070

只有一种解决方法：

您可以将图像放在 jar 内的 zip 文件中，使用 ZipInputStream 获取并从那里提取图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-09T21:32:24.443

您使用哪个 Java 虚拟机？您使用哪个服务器？

*   Linux 上的浏览​​器插件存在错误。
*   如果服务器不发送修改日期，则 Java 无法缓存 jar 文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-07-29T11:55:58.313

如果即使 jar 被缓存，您的小程序总是下载 jar，请确保您没有`URLConnection`通过 API 禁用 's 缓存：`URLConnection.setUseCaches`和`URLConnection.SetDefaultUseCaches`.

`ImageIcon`获取资源的底层机制是`URLConnection`. 调用`URLConnection.setDefaultUseCaches(false)`, 设置“全部静态状态的一部分`URLConnections`”，这会导致 JRE 忽略缓存并在每次访问时重新下载整个 jar。

只需删除所有实例即可`setDefaultUseCaches`解决问题。

这是来自：http: [//java-junction.blogspot.com/2009/11/applet-jar-caching-not-working.html的转贴](http://java-junction.blogspot.com/2009/11/applet-jar-caching-not-working.html)

# c++ - 在 C/C++ 中检测多余的#include？

> ID：614794
> 
> 赞同：331
> 
> 时间：2009-03-05T13:43:53.667
> 
> 标签：c++, c, refactoring, include, dependencies

我经常发现文件的标题部分一直在变大，但它永远不会变小。在源文件的整个生命周期中，类可能已经移动并被重构，很可能有很多`#includes`不需要存在并且不再存在。将它们留在那里只会延长编译时间并添加不必要的编译依赖项。试图找出仍然需要哪些可能是相当乏味的。

是否有某种工具可以检测多余的#include 指令并建议我可以安全删除哪些指令？
lint 可能会这样做吗？

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2009-03-05T14:43:44.070

Google 的 cppclean（链接至：[下载](https://github.com/myint/cppclean)、[文档](https://code.google.com/p/cppclean/)）可以找到几类 C++ 问题，现在它可以找到多余的#includes。

还有一个基于 Clang 的工具[include-what-you-use](https://github.com/include-what-you-use/include-what-you-use)可以做到这一点。include-what-you-use 甚至可以建议前向声明（因此您不必#include 这么多）并可选择为您清理您的#includes。

当前版本的[Eclipse CDT](http://www.eclipse.org/cdt/)还内置了此功能：在 Source 菜单下单击 Organize Includes 将按字母顺序排列您的#include，添加 Eclipse 认为您正在使用的任何标题而不直接包含它们，并注释掉它不包含的任何标题'认为你不需要。但是，此功能并非 100% 可靠。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2011-02-22T13:48:37.043

另请查看[include-what-you-use](https://github.com/include-what-you-use/include-what-you-use "包括你用什么")，它解决了类似的问题。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2009-03-05T14:13:57.620

它不是自动的，但[doxygen](http://www.doxygen.nl/)`#included`会为文件生成依赖关系图。您将不得不直观地浏览它们，但它们对于了解什么使用什么非常有用。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2009-03-05T13:51:53.007

检测多余包含的问题在于它不能只是一个类型依赖检查器。多余的包含是一个文件，它对编译没有任何价值，**并且**不会改变其他文件所依赖的另一个项目。头文件可以通过多种方式更改编译，例如通过定义常量、重新定义和/或删除使用的宏、添加命名空间以某种方式更改名称的查找。为了检测像命名空间这样的项目，您需要的不仅仅是预处理器，实际上您几乎需要一个完整的编译器。

Lint 更像是一个样式检查器，当然不会有这个完整的功能。

我认为您会发现检测多余包含的唯一方法是删除、编译和运行套件。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2009-03-05T13:47:47.540

我认为[PCLint](http://www.gimpel.com/html/pcl.htm)会这样做，但我已经有几年没有看过它了。你可能会检查一下。

我查看了[这个博客](http://www.riverblade.co.uk/blog.php?archive=2008_09_01_archive.xml#3575027665614976318)，作者谈到了配置 PCLint 以查找未使用的包含。也许值得一瞧。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2009-03-05T14:53:07.323

CScout重构浏览器可以检测 C（不幸的是不是 C++）代码中多余的包含指令[。](http://www.spinellis.gr/cscout/)您可以在[这篇](http://dx.doi.org/10.1002/smr.369)期刊文章中找到它如何工作的描述。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2009-03-05T19:02:11.077

很抱歉在这里（重新）发布，人们通常不会扩展评论。

检查我对 crashmstr 的评论，FlexeLint / PC-Lint 会为你做这件事。信息性消息 766。我的手册（8.0 版）的第 11.8.1 节讨论了这一点。

此外，**这很重要，继续迭代直到消息消失**。换句话说，在删除未使用的标头后，重新运行 lint，一旦您删除了一些不需要的标头，更多的标头文件可能会变得“不需要”。（这可能听起来很傻，慢慢阅读并解析它，这是有道理的。）

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2009-03-10T10:22:46.807

我从来没有找到一个成熟的工具来完成你的要求。我使用的最接近的东西是[IncludeManager](http://www.profactor.co.uk/includemanager.php)，它绘制了标题包含树，因此您可以直观地发现仅包含在一个文件中的标题和循环标题包含之类的东西。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-03-05T14:10:49.607

您可以编写一个快速脚本来删除单个#include 指令，编译项目，并在#include 中记录名称以及在没有发生编译错误的情况下删除它的文件。

让它在夜间运行，第二天您将获得一个 100% 正确的包含文件列表，您可以将其删除。

有时蛮力只是有效:-)

* * *

**编辑：**有时它不会:-)。以下是评论中的一些信息：

1.  有时您可以单独删除两个头文件，但不能同时删除。一种解决方案是在运行期间删除头文件，而不是将它们带回来。这将找到您可以安全删除的文件列表，尽管可能有一个解决方案可以删除更多文件，而该算法无法找到这些文件。（这是对要删除的包含文件空间的贪婪搜索。它只会找到局部最大值）
2.  如果您根据某些#ifdefs 以不同方式重新定义了某些宏，则行为可能会发生细微的变化。我认为这些是非常罕见的情况，作为构建一部分的单元测试应该能够捕捉到这些变化。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-03-05T22:07:26.747

我尝试过使用 Flexelint（PC-Lint 的 unix 版本），结果有些喜忧参半。这可能是因为我正在处理一个非常庞大而复杂的代码库。我建议仔细检查每个报告为未使用的文件。

主要担心是误报。同一标头的多个包含被报告为不需要的标头。这很糟糕，因为 Flexelint 不会告诉您标题包含在哪一行或之前包含在哪里。

自动化工具可能会出错的一种方式：

在 A.hpp 中：

```
class A { 
  // ...
}; 
```

在 B.hpp 中：

```
#include "A.hpp

class B {
    public:
        A foo;
}; 
```

在 C.cpp 中：

```
#include "C.hpp"  

#include "B.hpp"  // <-- Unneeded, but lint reports it as needed
#include "A.hpp"  // <-- Needed, but lint reports it as unneeded 
```

如果你盲目地遵循来自 Flexelint 的消息，你会搞砸你的 #include 依赖项。还有更多的病理情况，但基本上你需要自己检查标题以获得最佳结果。

我强烈推荐这篇关于[物理结构和 C++](http://gamesfromwithin.com/?p=7)的文章，来自博客 Games from inside。他们推荐了一种全面的方法来清理#include 混乱：

> 指导方针
> 
> 这是 Lakos 书​​中的一组精炼指南，可最大限度地减少文件之间的物理依赖关系。我已经使用它们多年了，我一直对结果非常满意。
> 
> 1.  每个 cpp 文件首先包含自己的头文件。[剪辑]
> 2.  头文件必须包含解析它所需的所有头文件。[剪辑]
> 3.  头文件应该具有解析它所需的最少数量的头文件。[剪辑]

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2011-06-01T12:52:20.580

如果您使用的是 Eclipse CDT，您可以尝试[http://includator.com](http://includator.com)，它对 beta 测试人员是免费的（在撰写本文时），它会自动删除多余的 #include 或添加缺失的 #include。对于那些拥有 FlexeLint 或 PC-Lint 并使用 Elicpse CDT 的用户，[http](http://linticator.com) ://linticator.com可能是一个选项（也可以免费进行 beta 测试）。虽然它使用 Lint 的分析，但它提供了快速修复以自动删除多余的 #include 语句。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-03-10T10:14:15.860

[这篇文章](http://gamesfromwithin.com/?p=7)解释了一种使用 Doxygen 的解析来移除#include 的技术。这只是一个 perl 脚本，所以它很容易使用。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-04-06T23:53:42.157

[CLion](https://www.jetbrains.com/clion/)是 JetBrains 的 C/C++ IDE，可检测冗余包含的开箱即用。这些在编辑器中是灰色的，但也有[优化当前文件或整个项目中包含的](https://www.jetbrains.com/help/clion/2016.3/optimizing-imports.html)功能。

不过，我发现您为此功能付费；首次加载时，CLion 需要一段时间来扫描和分析您的项目。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2010-06-30T14:47:41.080

也许有点晚了，但我曾经发现一个 WebKit perl 脚本可以满足您的需求。我相信它需要一些调整（我不精通 perl），但它应该可以解决问题：

[http://trac.webkit.org/browser/branches/old/safari-3-2-branch/WebKitTools/Scripts/find-extra-includes](http://trac.webkit.org/browser/branches/old/safari-3-2-branch/WebKitTools/Scripts/find-extra-includes)

（这是一个旧分支，因为主干不再有文件）

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2010-12-14T06:13:01.337

有两种类型的多余 #include 文件：

1.  模块（.c，.cpp）根本不需要的头文件
2.  模块需要一个头文件，但它被多次直接或间接包含。

根据我的经验，有两种方法可以很好地检测到它：

*   gcc -H 或 cl.exe /showincludes (解决问题2)

    在现实世界中，如果所有 Makefile 没有覆盖 CFLAGS 选项，您可以在 make 之前导出 CFLAGS=-H。或者像我使用的那样，您可以创建一个 cc/g++ 包装器，以将 -H 选项强制添加到 $(CC) 和 $(CXX) 的每个调用中。并将包装器的目录添加到 $PATH 变量中，然后您的 make 将全部使用您的包装器命令。当然你的包装器应该调用真正的 gcc 编译器。如果您的 Makefile 直接使用 gcc，则需要更改此技巧。而不是 $(CC) 或 $(CXX) 或隐含规则。

    您还可以通过使用命令行进行调整来编译单个文件。但是如果你想清理整个项目的标题。您可以通过以下方式捕获所有输出：

    打扫干净

    制作 2>&1 | 发球结果.txt

*   PC-Lint/FlexeLint（解决问题 1 和 2）

    确保添加 +e766 选项，此警告是关于：未使用的头文件。

    pclint/燧石 -vf ...

    这将导致 pclint 输出包含头文件，嵌套的头文件将适当缩进。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2011-01-06T20:34:30.387

有一个免费工具[Include File Dependencies Watcher](http://www.mobile-mir.com/cpp/1007/)可以集成到 Visual Studio 中。它以红色显示多余的#includes。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-04-14T10:24:58.130

这是一种[识别多余标头的简单蛮力方法 include](https://cognitivewaves.wordpress.com/2017/04/14/header-file-dependencies/)。它并不完美，但消除了“明显的”不必要的包含。摆脱这些对于清理代码大有帮助。

这些[脚本](https://github.com/cognitivewaves/misc/tree/master/check-header-includes)可以直接在 GitHub 上访问。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-03-05T14:00:16.670

Gimpel Software 的[PC Lint](http://www.gimpel.com/html/pcl.htm)可以报告何时在编译单元中多次包含包含文件~~，但它无法以您查找的方式找到不需要的包含文件。~~

**编辑：**可以。查看[itsmatt的答案](https://stackoverflow.com/questions/614794/c-c-detecting-superfluous-includes/614811#614811)

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2014-04-07T16:00:28.957

结束这个讨论：c++ 预处理器已经完成。它是一个语义属性，包含是否是多余的。因此，根据赖斯定理，不能确定包含是否是多余的。不可能有一个程序（总是正确地）检测包含是否是多余的。

# linux - 在 Linux 上模拟延迟和丢弃的数据包

> ID：614795
> 
> 赞同：275
> 
> 时间：2009-03-05T13:43:58.283
> 
> 标签：linux, tcp, throttling

我想在 Linux 上模拟数据包延迟和丢失，`UDP`以`TCP`测量应用程序的性能。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：353
> 
> 时间：2009-03-05T17:28:50.333

[netem](http://www.linuxfoundation.org/collaborate/workgroups/networking/netem)利用 Linux 和用户空间实用程序中已经内置的功能来模拟网络。这实际上是马克的答案所指的，但名称不同。

[他们主页](http://www.linuxfoundation.org/collaborate/workgroups/networking/netem)上的示例已经展示了如何实现您的要求：

> ## 例子
> 
> ### 模拟广域网延迟
> 
> 这是最简单的例子，它只是为所有从本地以太网传出的数据包增加了固定量的延迟。
> 
> ```
> # tc qdisc add dev eth0 root netem delay 100ms 
> ```
> 
> 现在对本地网络上的主机进行简单的 ping 测试应该显示增加了 100 毫秒。延迟受内核时钟分辨率 (Hz) 的限制。在大多数 2.4 系统上，系统时钟以 100 Hz 运行，这允许以 10 ms 为增量进行延迟。在 2.6 上，该值是从 1000 到 100 Hz 的配置参数。
> 
> 后面的例子只是改变参数而不重新加载 qdisc
> 
> 真正的广域网显示出可变性，因此可以添加随机变化。
> 
> ```
> # tc qdisc change dev eth0 root netem delay 100ms 10ms 
> ```
> 
> 这导致增加的延迟为 100 ± 10 ms。网络延迟变化不是纯粹随机的，因此要模拟也存在相关值。
> 
> ```
> # tc qdisc change dev eth0 root netem delay 100ms 10ms 25% 
> ```
> 
> 这导致添加的延迟为 100 ± 10 ms，下一个随机元素取决于最后一个元素的 25%。这不是真正的统计相关性，而是一个近似值。
> 
> ### 延迟分布
> 
> 通常，网络中的延迟是不均匀的。更常见的是使用正态分布之类的东西来描述延迟的变化。netem 规程可以使用一个表来指定非均匀分布。
> 
> ```
> # tc qdisc change dev eth0 root netem delay 100ms 20ms distribution normal 
> ```
> 
> 实际的表（normal、pareto、paretonormal）作为 iproute2 编译的一部分生成并放置在 /usr/lib/tc 中；因此，可以根据实验数据做出自己的分布。
> 
> ### 数据包丢失
> 
> 随机数据包丢失在“tc”命令中以百分比指定。最小可能的非零值是：
> 
> 2 ^(-32) = 0.0000000232%
> 
> ```
> # tc qdisc change dev eth0 root netem loss 0.1% 
> ```
> 
> 这会导致 1/10%（即千分之一）的数据包被随机丢弃。
> 
> 也可以添加可选的相关性。这会导致随机数生成器的随机性降低，并可用于模拟数据包突发丢失。
> 
> ```
> # tc qdisc change dev eth0 root netem loss 0.3% 25% 
> ```
> 
> 这将导致 0.3% 的数据包丢失，并且每个连续的概率取决于最后一个的四分之一。
> 
> 概率[n] = 0.25 × 概率[n-1] + 0.75 × 随机

**请注意**`tc qdisc add`，如果您没有该接口的规则或者`tc qdisc change`您已经有该接口的规则，则应使用该接口。尝试`tc qdisc change`在没有规则的界面上使用会报错**`RTNETLINK answers: No such file or directory`。**

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2009-07-06T18:17:34.563

对于丢弃的数据包，我只需使用 iptables 和[statistic 模块](http://ipset.netfilter.org/iptables-extensions.man.html#lbCD)。

```
iptables -A INPUT -m statistic --mode random --probability 0.01 -j DROP 
```

以上将以 1% 的概率丢弃传入的数据包。小心，任何高于 0.14 和大多数 tcp 连接的东西很可能会完全停止。

查看 man iptables 并搜索“statistic”以获取更多信息。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-05T15:13:01.050

我的一位同事使用 tc 来执行此操作。有关更多信息，请参阅手册页。[您可以在此处](http://www.topwebhosts.org/tools/traffic-control.php)查看其用法示例。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-03-05T14:20:36.120

iptables(8) 有一个统计匹配模块，可用于匹配每个第 n 个数据包。要丢弃这个数据包，只需附加**-j DROP**。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-05T14:10:20.217

本[关于网络物理模拟的教程在](https://web.archive.org/web/20181107181430/https://gafferongames.com/post/networked_physics_2004/)[示例代码](https://web.archive.org/web/20160103025448/https://gamephysics.googlecode.com/files/NetworkedPhysics.zip)中包含一个 C++ 类，用于模拟 UDP 连接中的延迟和数据包丢失，并且可能具有指导意义。[请参阅可下载源代码的](https://web.archive.org/web/20160103025448/https://gamephysics.googlecode.com/files/NetworkedPhysics.zip)*Connection.h*文件中的*Connection*类的公共*延迟*和*packetLoss*变量。

 *** * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-05T13:48:16.683

自己没有尝试过，但是[这个页面](http://www.tummy.com/journals/entries/jafo_20050717_164535)有一个在 Linux 中运行的插件模块列表，内置 iptables IP 过滤系统。其中一个模块称为“nth”，它允许您设置一个规则，该规则将丢弃可配置的数据包速率。至少可能是一个不错的起点。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-04-11T11:34:51.970

一个易于使用的网络故障注入工具是[Saboteur](https://github.com/tomakehurst/saboteur)。它可以模拟：

> *   总网络分区
> *   远程服务死了（不在预期的端口上监听）
> *   延误
> *   丢包 - TCP 连接超时（当两个系统被有状态防火墙分开时经常发生）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-04-11T11:50:00.400

科学界为此目的最常用的工具之一是[DummyNet](http://info.iet.unipi.it/~luigi/dummynet/)。安装`ipfw`内核模块后，为了在两台机器之间引入 50 毫秒的传播延迟，只需运行以下命令：

```
./ipfw pipe 1 config delay 50ms
./ipfw add 1000 pipe 1 ip from $IP_MACHINE_1 to $IP_MACHINE_2 
```

为了还引入 50% 的数据包丢失，您必须运行：

```
./ipfw pipe 1 config plr 0.5 
```

[这里](http://info.iet.unipi.it/~luigi/ip_dummynet/original.html)有更多细节。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-10-23T16:43:07.960

您可以尝试~~http://snad.ncsl.nist.gov/nistnet/~~ [https://www-x.antd.nist.gov/nistnet/](https://www-x.antd.nist.gov/nistnet/) 这是相当古老的 NIST 项目（最后发布 2005 年），但它适用于我。

# xml - xpath：查找具有给定属性的节点，其值包含字符串

> ID：614797
> 
> 赞同：83
> 
> 时间：2009-03-05T13:44:29.140
> 
> 标签：xml, xpath, contains

是否有一种 xpath 方法来查找具有给定属性且值包含给定字符串的节点？

例如，我有一个 xml 文档，想找到一个`address`属性包含 string的节点`Downing`，这样我就可以找到以下节点：

```
<person name="blair" address="10 Downing St. London"/> 
```

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2009-03-05T13:50:57.440

```
select="//*[contains(@address,'Downing')]" 
```

# jquery - ASP（不是 .NET）：将 null 作为参数发送到查询字符串中的存储过程？

> ID：614798
> 
> 赞同：0
> 
> 时间：2009-03-05T13:44:31.887
> 
> 标签：jquery, stored-procedures, asp-classic

我在 ASP 页面上有以下代码：

```
<%
    QueryToJSON(conn, "execute WebGetEmployeesPlanned'"
    +Request.QueryString("customercode")+"', 
    '"+Request.QueryString("lang")+"', 
    '"+Request.QueryString("date")+"'").flush
%> 
```

除了一些包含之外，此页面上没有其他代码，因为我使用 $.getJSON() 从另一个页面使用 ajax 调用此页面

问题是我不知道如何将 NULL 作为参数之一发送到 SP。

有时 Request.QueryString("customercode") 将为空。我需要知道如何将它放在上面的代码中，以使 SP 将此参数视为 NULL。

我可以访问 SP 代码，因此我可以更改那一侧的某些内容以将空字符串转换为 null。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-05T13:59:37.233

你在正确的轨道上。查询字符串参数只是字符串。因此，您必须为 NULL 选择一个字符串代表，它不会与您将发送的任何实际字符串值冲突。您可以使用空字符串、“null”或“Thomas's special null flag”；没关系。查询字符串参数中没有 NULL 的“官方”表示。

**更新**：不，我不认为存储过程是处理这个翻译的地方。原因是您将查询字符串参数中空值的字符串表示形式转换为“真实”空值这一事实是您必须做的事情，因为您可以放入查询字符串参数中的内容受到限制。在存储过程中进行这种转换会使该过程在某种程度上“意识到”查询字符串，这感觉不对。相反，我会在 aspx 标记中执行此操作，该标记应该是 Web 感知的。这是一个源示例（未经测试，因此请修复我的语法错误，或者更好的是，更改为 string.Format() 或参数化查询...

改变：

```
QueryToJSON(conn, "execute WebGetEmployeesPlanned'"
+Request.QueryString("customercode")+"', 
'"+Request.QueryString("lang")+"', 
'"+Request.QueryString("date")+"'").flush 
```

到：

```
QueryToJSON(conn, "execute WebGetEmployeesPlanned "
    + (string.IsNullOrEmpty(Request.QueryString("customercode")) ?
          "null, '"
          :
          "'" + Request.QueryString("customercode") + "','")
    +Request.QueryString("customercode")+"', 
    '"+Request.QueryString("lang")+"', 
    '"+Request.QueryString("date")+"'").flush 
```

# .net - 实体框架 .Include() 另一个导航属性的导航

> ID：614809
> 
> 赞同：34
> 
> 时间：2009-03-05T13:46:54.097
> 
> 标签：.net, entity-framework

我有一个实体*Test*。它包含一个导航属性*Question*和*Question*包含一个导航属性*QuestionLocale*。

```
var test = context.Tests
       .Include("Question")
       .FirstOrDefault(); 
```

按预期工作。但是怎么可能包含*QuestionLocale*呢？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2009-03-05T13:51:34.817

您可以使用：

```
 var test = context.Tests
                  .Include("Question.QuestionLocale")
                  .FirstOrDefault(); 

```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-01-09T19:37:55.543

你也可以用强类型的方式来做

```
var test = context.Tests
                .Include(x => x.Question.Select(child => child.QuestionLocale))
                .FirstOrDefault() 
```

# debugging - Solaris GDB：如何暂停执行？

> ID：614810
> 
> 赞同：7
> 
> 时间：2009-03-05T13:47:38.150
> 
> 标签：debugging, gdb, solaris

我正在使用 GDB 在 Solaris 10 x86 上调试封闭源程序。

我将 gdb 附加到程序并继续执行，但是当我想稍后暂停执行以检查我无法检查的一些内存时。当我按下 CTRL-C 时，它只打印 ^C 而不是暂停程序并将我放到 (gdb) 提示符下。

```
bash-3.00# gdb --pid=1521
GNU gdb 6.6
Copyright (C) 2006 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "i386-pc-solaris2.10".
Attaching to process 1521
Retry #1:
Retry #2:
Retry #3:
Retry #4:
[New LWP 1]
0xfe3b5a23 in ?? ()
(gdb) c
Continuing.
^C^C^C^C^C^C^C^C 
```

如何返回 (gdb) 提示？我是不是做错了什么，或者我该如何让它发挥作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-05T14:39:24.437

Just found a workaround. From another terminal give the following command:

```
kill -INT 1521 
```

GDB will pause execution upon the debugged program receiving the SIGINT.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-06T02:24:18.720

这将是 GDB 中的一个错误。

[如果您可以使用CVS Head](http://savannah.gnu.org/cvs/?group=gdb)的当前版本的 GDB 重现此问题，请提交[错误](http://sourceware.org/bugzilla/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-14T01:54:20.090

当您使用 Solaris 时，我看到您正在使用 bash，您可能没有正确设置终端，bash 通常可以为您处理很多这样的事情，但是如果您使用 ksh 或其他东西，您的退格键可能正在打印^H 而不是退格（在这种情况下，您需要 stty erase '^H' ...您始终可以使用 stty sane 设置控制台。

这里一个可能的问题（不是错误）是您正在调试的应用程序正在重置您的终端，我现在不在 Solaris 机器上，但是 GNU stty 允许您执行类似 stty tostop 的操作，

> *   [-]tostop 停止尝试写入终端的后台作业

您还可以从另一个终端运行 reset 或 tset 并重新配置您的 ^C

在 gdb 中，您可以使用“tty”别名或设置 lower-tty /path/to/term

```
Set terminal for future runs of program being debugged.
Usage: set inferior-tty /dev/pts/1 
```

# java - 如何在 JBoss 中找到被 CachedConnectionManager 关闭的 JmSession 的创建者

> ID：614812
> 
> 赞同：0
> 
> 时间：2009-03-05T13:47:58.320
> 
> 标签：java, jakarta-ee, jboss, jbpm

我在使用 JBPM 的 JBoss 5.0.1 的日志中收到以下错误。我一生都无法弄清楚这个会话在哪里打开而不是关闭（无论我们在哪里使用 JMS，我们都会在 finally 块中清理集合）。

```
2009-03-05 13:11:12,595 INFO [org.jboss.resource.connectionmanager.CachedConnectionManager] (WorkerThread#1[127.0.0.1:51191]) 为您关闭连接。请自行关闭它们：org.jboss.resource.adapter.jms.JmsSession@11ed463
```

谁能提供任何关于我应该如何查找 JmsSession 的创建位置的指示，以便我可以看到出了什么问题？

提前致谢

富有的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-05T13:56:44.820

我找到了——错误消息下方的堆栈跟踪显示了创建的堆栈——而且它似乎是 JBPM 本身。起初我认为这是发生错误的堆栈（我无法想象 JBPM 需要创建消息，因此将堆栈跟踪打折为没有多大用处......） - 现在我需要找出原因！

# c# - 在 C# 中，public、private、protected 和没有访问修饰符有什么区别？

> ID：614818
> 
> 赞同：771
> 
> 时间：2009-03-05T13:48:38.163
> 
> 标签：c#, .net, asp.net, access-modifiers

我一直在使用的所有大学时期`public`，并且想知道 , 和 之间`public`的`private`区别`protected`？

还有什么`static`做而不是一无所有？

* * *

## 回答 #1

> 赞同：1062
> 
> 时间：2009-03-05T13:55:02.313

## 访问修饰符

来自[docs.microsoft.com](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/access-modifiers)：

> [**`public`**](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/public)
> 
> 类型或成员可以由同一程序集或引用它的另一个程序集中的任何其他代码访问。
> 
> [**`private`**](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/private)
> 
> 类型或成员只能由同一类或结构中的代码访问。
> 
> [**`protected`**](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/protected)
> 
> 类型或成员只能由同一类或结构中的代码或派生类中的代码访问。
> 
> [**`private protected`**](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/private-protected)（在 C# 7.2 中添加）
> 
> 类型或成员只能由同一类或结构中的代码或同一程序集的派生类中的代码访问，但不能从另一个程序集中访问。
> 
> [**`internal`**](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/internal)
> 
> 类型或成员可以由同一程序集中的任何代码访问，但不能从另一个程序集中访问。
> 
> [**`protected internal`**](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/protected-internal)
> 
> 同一程序集中的任何代码或另一个程序集中的任何派生类都可以访问该类型或成员。

如果**未**设置访问修饰符，则使用默认访问修饰符。因此，即使没有设置，也总会有某种形式的访问修饰符。

## [`static`修饰符](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/static)

类上的 static 修饰符意味着该类不能被实例化，并且它的所有成员都是静态的。无论创建了多少个其封闭类型的实例，静态成员都有一个版本。

静态类与非静态类基本相同，但有一个区别：静态类不能被外部实例化。换句话说，您不能使用 new 关键字来创建类类型的变量。因为没有实例变量，所以您可以使用类名本身来访问静态类的成员。

但是，有一个[静态构造函数](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/static-constructors)。任何类都可以有其中之一，包括静态类。它们不能直接调用并且不能有参数（除了类本身的任何类型参数）。在创建第一个实例或引用任何静态成员之前，会自动调用静态构造函数来初始化类。看起来像这样：

```
static class Foo()
{
    static Foo()
    {
        Bar = "fubar";
    }

    public static string Bar { get; set; }
} 
```

静态类通常用作服务，您可以像这样使用它们：

```
MyStaticClass.ServiceMethod(...); 
```

* * *

## 回答 #2

> 赞同：182
> 
> 时间：2014-04-11T08:00:45.917

图形概览（简而言之）

![能见度](https://i.stack.imgur.com/ExkwO.png)

由于[静态类](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/static-classes-and-static-class-members)是密封的，它们不能被继承（从 Object 除外），所以关键字 protected 在静态类上是无效的。

如果您在前面没有放置访问修饰符，则有关默认值，请参见此处：
[C# 类和成员（字段、方法等）的默认可见性？](https://stackoverflow.com/questions/3763612/default-visibility-for-c-sharp-classes-and-members-fields-methods-etc)

非嵌套

```
enum                              public
non-nested classes / structs      internal
interfaces                        internal
delegates in namespace            internal
class/struct member(s)            private
delegates nested in class/struct  private 
```

嵌套：

```
nested enum      public
nested interface public
nested class     private
nested struct    private 
```

此外，还有 seal-keyword，它使类不可继承。
此外，在 VB.NET 中，关键字有时是不同的，所以这里有一个备忘单：

[![VB 与 CS 等价物](https://i.stack.imgur.com/o6BZf.png)](https://i.stack.imgur.com/o6BZf.png)

* * *

## 回答 #3

> 赞同：162
> 
> 时间：2009-03-05T14:26:45.327

**Public** - 如果你可以看到类，那么你可以看到方法

**Private** - 如果您是*班级*的一员，那么您可以看到该方法，否则不能。

**受保护**- 与私有相同，而且所有*后代*也可以看到该方法。

**静态（类）** - 还记得“类”和“对象”之间的区别吗？忘记这一切。它们与“静态”相同......该类是其自身的唯一实例。

**静态（方法）** - 每当您使用此方法时，它都会有一个独立于它所属的类的实际实例的参考框架。

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2018-04-01T10:17:15.323

[从这个答案](https://stackoverflow.com/a/22958035/2604492)重新发布真棒图表。

> 以下是维恩图中的所有访问修饰符，从更多限制到更混杂：
> 
> `private`：
> ![在此处输入图像描述](https://i.stack.imgur.com/SdeM9.png)
> 
> `private protected`: -[在 C# 7.2 中添加](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/private-protected)
> ![在此处输入图像描述](https://i.stack.imgur.com/ACp0t.png)
> 
> `internal`：
> ![在此处输入图像描述](https://i.stack.imgur.com/8o7Dm.png)
> 
> `protected`：
> ![在此处输入图像描述](https://i.stack.imgur.com/uniOu.png)
> 
> `protected internal`：
> ![在此处输入图像描述](https://i.stack.imgur.com/VaQQ9.png)
> 
> `public`：
> ![在此处输入图像描述](https://i.stack.imgur.com/VGgjh.png)

* * *

## 回答 #5

> 赞同：33
> 
> 时间：2019-02-21T09:24:39.840

[当前访问修饰符](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/access-modifiers)的另一种可视化方法(C# 7.2)。希望架构有助于更轻松地记住它
[（单击图像以查看交互式视图。）]

[![交互式访问修饰符 svg](https://raw.githubusercontent.com/gist/michail-peterlis/67ab9f81f16cd2fb074d8ea9c8008653/raw/1b41929acf1cab64b4cb386966659e079a9edef5/access_modifier.svg)](https://raw.githubusercontent.com/gist/michail-peterlis/67ab9f81f16cd2fb074d8ea9c8008653/raw/1b41929acf1cab64b4cb386966659e079a9edef5/access_modifier.svg)

## 外 内

如果您难以记住两个词的访问修饰符，请记住***outside-inside***。

*   **私有保护**：**私有** *外部*（同一个程序集）**受保护** *内部*（同一个程序集）
*   **受保护的内部**：**受保护的** *外部*（相同的组件）**内部的** *内部*（相同的组件）

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2015-05-24T07:19:38.427

## ![在此处输入图像描述](https://i.stack.imgur.com/Gdf5z.png)

```
using System;

namespace ClassLibrary1
{
    public class SameAssemblyBaseClass
    {
        public string publicVariable = "public";
        protected string protectedVariable = "protected";
        protected internal string protected_InternalVariable = "protected internal";
        internal string internalVariable = "internal";
        private string privateVariable = "private";
        public void test()
        {
            // OK
            Console.WriteLine(privateVariable);

            // OK
            Console.WriteLine(publicVariable);

            // OK
            Console.WriteLine(protectedVariable);

            // OK
            Console.WriteLine(internalVariable);

            // OK
            Console.WriteLine(protected_InternalVariable);
        }
    }

    public class SameAssemblyDerivedClass : SameAssemblyBaseClass
    {
        public void test()
        {
            SameAssemblyDerivedClass p = new SameAssemblyDerivedClass();

            // NOT OK
            // Console.WriteLine(privateVariable);

            // OK
            Console.WriteLine(p.publicVariable);

            // OK
            Console.WriteLine(p.protectedVariable);

            // OK
            Console.WriteLine(p.internalVariable);

            // OK
            Console.WriteLine(p.protected_InternalVariable);
        }
    }

    public class SameAssemblyDifferentClass
    {
        public SameAssemblyDifferentClass()
        {
            SameAssemblyBaseClass p = new SameAssemblyBaseClass();

            // OK
            Console.WriteLine(p.publicVariable);

            // OK
            Console.WriteLine(p.internalVariable);

            // NOT OK
            // Console.WriteLine(privateVariable);

            // Error : 'ClassLibrary1.SameAssemblyBaseClass.protectedVariable' is inaccessible due to its protection level
            //Console.WriteLine(p.protectedVariable);

            // OK
            Console.WriteLine(p.protected_InternalVariable);
        }
    }
} 
```

* * *

```
 using System;
        using ClassLibrary1;
        namespace ConsoleApplication4

{
    class DifferentAssemblyClass
    {
        public DifferentAssemblyClass()
        {
            SameAssemblyBaseClass p = new SameAssemblyBaseClass();

            // NOT OK
            // Console.WriteLine(p.privateVariable);

            // NOT OK
            // Console.WriteLine(p.internalVariable);

            // OK
            Console.WriteLine(p.publicVariable);

            // Error : 'ClassLibrary1.SameAssemblyBaseClass.protectedVariable' is inaccessible due to its protection level
            // Console.WriteLine(p.protectedVariable);

            // Error : 'ClassLibrary1.SameAssemblyBaseClass.protected_InternalVariable' is inaccessible due to its protection level
            // Console.WriteLine(p.protected_InternalVariable);
        }
    }

    class DifferentAssemblyDerivedClass : SameAssemblyBaseClass
    {
        static void Main(string[] args)
        {
            DifferentAssemblyDerivedClass p = new DifferentAssemblyDerivedClass();

            // NOT OK
            // Console.WriteLine(p.privateVariable);

            // NOT OK
            //Console.WriteLine(p.internalVariable);

            // OK
            Console.WriteLine(p.publicVariable);

            // OK
            Console.WriteLine(p.protectedVariable);

            // OK
            Console.WriteLine(p.protected_InternalVariable);

            SameAssemblyDerivedClass dd = new SameAssemblyDerivedClass();
            dd.test();
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2009-03-05T17:27:55.187

关于**一无所有的问题**

*   默认情况下，命名空间类型是内部的
*   默认情况下，任何类型成员，包括嵌套类型都是私有的

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2009-03-05T13:53:57.370

唔。

请参阅此处： [访问修饰符](http://msdn.microsoft.com/en-us/library/ms173121(VS.80).aspx)。

简而言之：

Public 为其他类型/类提供方法或类型的完全可见性。

Private 只允许包含私有方法/变量的类型访问私有方法/变量（注意嵌套类也可以访问包含类的私有方法/变量）。

受保护类似于私有，只是派生类也可以访问受保护的方法。

"Nothing" 相当于 VB.NET 的 null。尽管如果您指的是“无”，意思是“没有访问修饰符”，那么这取决于，尽管一个非常粗略的经验法则（当然在 C# 中）是，如果您没有显式指定访问修饰符，则方法/变量声明通常受到尽可能多的*限制*。IE

```
public class MyClass
{
    string s = "";
} 
```

实际上与以下内容相同：

```
public class MyClass
{
    private string s = "";
} 
```

当没有明确指定访问修饰符时，链接的 MSDN 文章将提供完整描述。

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2009-03-05T13:55:40.283

**public** - 任何人都可以在任何地方访问。
**private** - 只能从它所属的类中访问。
**protected** - 只能从类中的 with 或从该类继承的任何对象中访问。

除了在 VB 中，没有什么比 null 更好的了。
静态意味着您拥有该对象的一个​​实例，该类的每个实例的方法。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-03-05T13:53:14.050

嗯……

静态意味着您可以在没有类实例的情况下访问该函数。

您可以直接从类定义中访问。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2010-07-07T08:13:49.003

Private 状态表示变量只能由同一类的对象访问。受保护的状态扩展了该访问以包括该类的后代。

“从上表中我们可以看到私有和受保护之间的区别......我认为两者都是相同的......所以这两个单独的命令需要什么”

查看[MSDN](http://msdn.microsoft.com/en-us/library/ms173121.aspx)链接以获取更多信息

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2009-03-05T13:52:47.687

这些访问修饰符指定您的成员可见的位置。您可能应该阅读此内容。以 IainMH 提供的链接为起点。

静态成员是每个类一个，而不是每个实例一个。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2009-03-05T14:21:00.770

小心！观看您的课程的可访问性。默认情况下，每个人都可以访问公共和受保护的类和方法。

此外，在 Visual Studio 中创建新类时，Microsoft 在显示访问修饰符（public、protected 等关键字）方面并不是很明确。因此，请注意并考虑您的类的可访问性，因为它是您实现内部的大门。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2021-03-31T15:32:02.780

*   `public`意味着它可以被任何程序集中的任何类访问，包括类本身。
*   `protected internal`意味着它可以被类本身访问（在类定义中），并且它可以被当前程序集中的任何类访问，但在程序集之外它只能被继承该类的类访问，或者被类本身（如果它是一个部分类）——基本上它意味着`internal`在程序集内部和程序集`protected`之外。
*   `protected`意味着它只能由类本身访问，或者由继承它的类访问，并且该类可以在任何程序集中
*   `internal`意味着它可以被类本身或程序集中的任何类访问，但在程序集之外根本不能访问，除非类本身（即它是一个部分类）
*   `private protected`意味着它只能被类本身访问，或者它可以被继承它的类访问，并且只有当该类在当前程序集中时。在程序集之外，它只能由类本身访问（即它是一个部分类）——基本上结合了`internal`and `protected`，或者另一种说法是它`private`在程序集之外和程序集之`protected`内。
*   `private`意味着它只能被类本身访问
*   无访问修饰符：[C# 中所有内容的默认访问权限是“您可以为该成员声明的最受限制的访问权限”。](https://stackoverflow.com/a/2521492/7194773)，`private`用于类中的成员/方法/嵌套类和`internal`非嵌套类。

在上面的文本中，“访问”是指通过类类型的对象进行访问，在类本身的方法中，该对象将是隐式`this`对象，或者该方法实例化了当前类类型的显式对象并通过该对象访问它. 两者都被认为是由类本身访问的，因此访问规则是相同的。这也适用于从静态方法执行的访问，或者当它是被访问的静态成员/方法时，除了使用类范围而不是对象执行访问。需要显式创建静态类的成员/方法，`static`否则将无法编译。

默认情况下，未嵌套的类既可以是，也`public`可以`internal`是`internal`。嵌套的类可以是任何访问类型，如果父类是静态的，它不需要是静态的，它的成员也不需要。一个`internal`类意味着它只能被实例化，或者它的静态成员只能从当前程序集中访问。

`internal`您可以在一个或嵌套类中拥有一个公共成员/方法/嵌套`private`类——只有低于当前访问所需级别的访问说明符（在正在进行的访问的完全限定名称中）阻止访问。

C# 中的继承始终`public`与 C++ 不同，C++ 可以私有或受保护地继承，然后更改所有类的访问权限，然后从该类继承的类继承，以及通过对象/通过类型范围的类范围的访问从类中私有/受保护地继承的类和从私有/受保护地继承的类继承的类形成该类，依此类推。访问被更改，使得所有访问修饰符的限制性低于`private`or`protected`分别制作`private`和`protected`。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2009-03-05T13:57:36.440

我认为这与良好的 OOP 设计有关。如果你是一个库的开发者，你想隐藏你的库的内部工作。这样，您可以稍后修改您的库内部工作。所以你把你的成员和辅助方法设置为私有的，只有接口方法是公共的。应该被覆盖的方法应该受到保护。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2017-12-20T09:27:01.030

C# 总共有**6 个**访问修饰符：

> **private**：使用此可访问性声明的成员可以在包含类型中可见，它对任何派生类型、同一程序集中的其他类型或包含程序集之外的类型不可见。即，访问仅限于包含类型。

> **protected**：使用此可访问性声明的成员可以在从包含程序集内的包含类型派生的类型中可见，以及从包含程序集外部的包含类型派生的类型。即，访问仅限于包含类型的派生类型。

> **internal**：使用此可访问性声明的成员可以在包含此成员的程序集中可见，它对包含程序集之外的任何程序集都不可见。即，访问仅限于包含程序集。

> **internal protected**：使用此可访问性声明的成员可以在从包含类型派生的类型中可见，该类型在包含程序集内部或外部，它对包含程序集内的任何类型也是可见的。即，访问仅限于包含程序集或派生类型。

> **public**：使用此可访问性声明的成员可以在包含此成员的程序集中或任何其他引用包含程序集的程序集中可见。即，访问不受限制。

在 C# 7.2 中，添加了新级别的可访问性：

> **private protected**：使用此可访问性声明的成员可以在从包含程序集中的此包含类型派生的类型中可见。对于不是从包含类型派生的任何类型或在包含程序集之外的任何类型，它都是不可见的。即，访问仅限于包含程序集中的派生类型。

[源代码包括新的私有受保护访问修饰符的示例代码](https://docs.microsoft.com/en-us/archive/blogs/mazhou/c-7-series-part-5-private-protected)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-03-03T19:32:39.560

> C# 的所有访问修饰符的描述

[![在此处输入图像描述](https://i.stack.imgur.com/cXw9o.png)](https://i.stack.imgur.com/cXw9o.png)

# c# - 如何在回发之间保存树视图节点的状态（展开/折叠）？

> ID：614820
> 
> 赞同：0
> 
> 时间：2009-03-05T13:49:07.290
> 
> 标签：c#, asp.net

**DUPE** [C# Treeview 状态扩展](https://stackoverflow.com/questions/516192/c-treeview-state-expanded)

往上看...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-05T14:04:00.637

我认为这取决于您的树视图。Telerik 树视图通过视图状态执行此操作...

[http://www.telerik.com/community/forums/aspnet/treeview/how-do-i-maintain-treeview-state-after-postback.aspx](http://www.telerik.com/community/forums/aspnet/treeview/how-do-i-maintain-treeview-state-after-postback.aspx)

...下面的帖子提出了一种手动滚动的方法...

[http://blog.binaryocean.com/PermaLink,guid,23808645-43b5-4e2a-afb1-53dc8da35636.aspx](http://blog.binaryocean.com/PermaLink,guid,23808645-43b5-4e2a-afb1-53dc8da35636.aspx)

我没有尝试过任何一种解决方案，所以不能保证它们，但它们看起来很有希望。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T14:02:05.667

您可以尝试为树视图控件启用视图状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-07-24T06:27:23.477

使用这个。在回发时将其保存为视图状态，并使用视图状态将其呈现为相同的状态

```
<% List<TreeViewItem> checkedNodes = ViewData["TreeView1_checkedNodes"] as ist<TreeViewItem>; %>

<%= Html.Telerik().TreeView()
.Name("Tree")    
.ShowCheckBox(true)
.ClientEvents(ev => ev.OnChecked("OnCheck")
)
.BindTo(Model, mappings =>
{
    mappings.For<GridWithWindow.Jar>(binding => binding
        .ItemDataBound((item, jag) =>
            {
                item.Text = jag.TreeName;
                item.Value = jag.TreeName;

                if (checkedNodes != null)
                {
                    var checkedNode = checkedNodes
                                        .Where(e => e.Value.Equals("ddd"))
                                        .FirstOrDefault();
                    item.Checked = checkedNode != null ? checkedNode.Checked : false;
                }                    

            })
            .Children(jag => jag.FirstLevelIList));
    mappings.For<GridWithWindow.Jaguar.FirstLevel>(binding => binding
        .ItemDataBound((item, frst) =>
            {
                item.Text = frst.FirstLevelName;
                item.Value = frst.FirstLevelName;
            }) 
```

# php - 从缓存中禁用图像？

> ID：614822
> 
> 赞同：1
> 
> 时间：2009-03-05T13:49:48.830
> 
> 标签：php, javascript, jquery, xhtml

****编辑似乎当 javascript 更改图像时，反射会得到一个未定义的 src。对此有任何想法****

我在使用 jquery 来反映图像时遇到了这个问题。我有这个新闻标题列表，它会自动跳过标题。每次它都会改变图像和反射。

这是第一次完美的工作，但是当您导航回页面时，它已经缓存了图像，因此它只显示所有图像的第一张图像的反射。

有谁知道如何禁用图像缓存？

我正在使用[反射.js](http://www.digitalia.be/software/reflectionjs-for-jquery)

这是在图像之间旋转的功能。

```
function changeId(){
    $(".speglun").unreflect();
    if(id < 5){
        id++;
        var eldri = id - 1;
    }else{
        id = 1;
        var eldri = 5;
    }

    $('#newsBgW'+id).css("background-position", "-477px 0px");
    $('#newsBgW'+eldri).css("background-position", "0px 0px");

    $('#frettaMynd').attr("src", myndir[id]);
    $(".speglun").reflect();
    t = setTimeout("changeId()", time);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-05T13:56:52.073

当您为图像构建 URL 时，添加当前时间戳，使其看起来有点像`image.jpg?20090305101423`. 这应该防止缓存。实际上它仍然会缓存，但每次都是“不同”的图像。

在你澄清之前我已经回答了这个问题。我不知道那个 jQuery 插件，但也许它仍然会有所帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T16:17:05.687

to swap image use a jquery plugin, its very cool [http://code.google.com/p/jquery-swapimage/](http://code.google.com/p/jquery-swapimage/)

# java - 使用 Internet Explorer 打开 Excel 文档时出现问题

> ID：614832
> 
> 赞同：2
> 
> 时间：2009-03-05T13:52:01.867
> 
> 标签：java, internet-explorer, jsp, servlet-filters

我遇到了一个问题，IE 没有像 Firefox 那样打开 Excel 文档的另存为/打开对话框。

所以我创建了一个使用 '*.xls' 作为 url 模式的 servlet 过滤器。我现在面临的问题（因为这是我创建的第一个过滤器）是如何获取用户想要的文件名，以便正确填充对话框。当前，当用户选择给定页面上的链接时，将调用过滤器。

这是我想出的：

以上就是我所拥有的doFilter()。

```
String fileName = "fileName.xls";

HttpServletRequest httpRequest = (HttpServletRequest) pRequest;
String requestURI = httpRequest.getRequestURI();

if(StringUtils.isNotBlank(requestURI))
{
  String uri[] = StringUtils.split(requestURI, '/');
  fileName = uri[uri.length - 1];
}

HttpServletResponse httpResponse = (HttpServletResponse) pResponse;
httpResponse.setContentType("application/vnd.ms-excel");
httpResponse.setHeader("Content-disposition", "attachment; filename=\"" + fileName +"\""); 
```

网页.xml：

```
<filter>
    <filter-name>ExcelFilter</filter-name>
    <filter-class>vsg.rp.common.ExcelFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>ExcelFilter</filter-name>
    <url-pattern>*.xls</url-pattern>
</filter-mapping> 
```

这一切都在我的开发机器上运行：Windows XP、JBoss、Eclipse、Oracle。但是当它在测试服务器（Linux、Apache/JBoss、Oracle）上运行时，它就不起作用了。似乎甚至没有调用过滤器，也没有抛出错误等。知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-05T15:12:22.940

您希望正确设置内容类型以及内容处置标头，因此：

> response.setContentType("application/vnd.ms-excel");
> response.setHeader("Content-Disposition", "attachment; filename=\"" + filename + "\"");

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-05T14:01:47.133

使用`Content-Disposition`HTTP 标头并将其设置为：

```
attachment; filename=myworkbook.xls 
```

这是一篇关于此问题的[Microsoft 知识库文章。](http://support.microsoft.com/kb/260519)这是[在 Java 代码中设置 Content-Disposition 的示例](http://www.onjava.com/pub/a/onjava/excerpt/jebp_3/index3.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T15:34:52.980

除了为内容类型设置标题之外，您还需要确保服务器不会告诉浏览器不要缓存文件。

在 IE 领域，如果您告诉 IE 不要缓存文件，它会愉快地下载文件...然后尝试从将文件保存到的目录中打开文件...但是由于标题说“不要缓存”它从字面上理解，并且不保存文件，因此 Excel 会抛出一个错误，说“没有文件！”。

长话短说，***告诉 IE 缓存文件***。

# .net - 分离和重构大量依赖类的最佳方法

> ID：614835
> 
> 赞同：1
> 
> 时间：2009-03-05T13:52:31.273
> 
> 标签：.net, refactoring, code-reuse, dto

我有大量的分层结构（或 DTO），它们在不同的业务逻辑、应用程序层、Web 服务和 WCF 合同之间共享。我想重构我的所有代码以将结构拆分为谨慎的业务领域。

两个问题：

1.  是否有任何工具可以帮助我做到这一点（假设我想要 A 类，列出所有依赖项）？

2.  是否有在不同应用程序域中复制 DTO 以允许它们独立发展的情况？固定的规范商业模式的想法纯属虚构！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-05T14:03:13.870

Resharper/CodeRush 可以帮助解决问题#1。它们都对重构有很好的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-05T14:03:45.287

[http://www.jetbrains.com/resharper/features/code_refactoring.html#Rename](http://www.jetbrains.com/resharper/features/code_refactoring.html#Rename)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-05T14:15:51.750

我将从[NDepend](http://www.ndepend.com/)分析开始列出依赖项（请参阅本文：[控制组件依赖项以获得更清晰的架构](http://www.theserverside.net/tt/articles/showarticle.tss?id=ControllingDependencies)）

然后我将使用 Resharper 来简化重构。

祝你好运。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-05T16:37:50.503

关于第 2 点：当然，有界上下文： [http](http://dddcommunity.org/discussion/messageboardarchive/BoundedContext.html) ://dddcommunity.org/discussion/messageboardarchive/BoundedContext.html 检查这篇文章以更好地理解它：http: [//devlicio.us/blogs/casey/archive/2009/02/ 11/ddd-bounded-contexts.aspx](http://devlicio.us/blogs/casey/archive/2009/02/11/ddd-bounded-contexts.aspx)

对于 1 号 Resharper :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-05T14:24:13.490

结构 101（非免费）（www.structure101.com/）和/或代码导航器（免费）（[http://plugins.intellij.net/plugin/?id=3202](http://plugins.intellij.net/plugin/?id=3202)）可能有用

# c++ - 为什么这段代码会破坏内存？

> ID：614842
> 
> 赞同：3
> 
> 时间：2009-03-05T13:54:22.440
> 
> 标签：c++, memory-corruption

这是一个相当新手的问题，应该可以很快得到回答......

基本上，在*echo*中第一次调用*Printf后，* *args*的内容已损坏。对我来说，这听起来像是我错误地传递了指针。但是想不通为什么？

 **```
#define MAX_PRINT_OUTPUT 4096

void Echo(char *args[MAX_COMMAND_ARGUMENTS], int argCount)
{
    for (int i = 1; i < argCount; ++i)
    {
        Printf("%s ", args[i]);
        Printf("\n");
    }
};

void Printf(const char *output, ...)
{
    va_list args;
    char formattedOutput[MAX_PRINT_OUTPUT];

    va_start(args, output);
    vsnprintf(formattedOutput, sizeof(formattedOutput), output, args);
    va_end(args);

    g_PlatformDevice->Print(formattedOutput);
};

void RiseWindows::Print(const char *output)
{
    //Corruption appears to occur as soon as this function is entered
    #define CONSOLE_OUTPUT_SIZE 32767

    char buffer[CONSOLE_OUTPUT_SIZE];
    char *pBuffer = buffer;
    const char *pOutput = output;
    int i = 0;

    while (pOutput[i] && ((pBuffer - buffer) < sizeof(buffer) - 1))
    {
        if (pOutput[i] == '\n' && pOutput[i+1] == '\r' )
        {
            pBuffer[0] = '\r';
            pBuffer[1] = '\n';
            pBuffer += 2;
            ++i;
        }
        else if (pOutput[i] == '\r')
        {
            pBuffer[0] = '\r';
            pBuffer[1] = '\n';
            pBuffer += 2;
        }
        else if (pOutput[i] == '\n')
        {
            pBuffer[0] = '\r';
            pBuffer[1] = '\n';
            pBuffer += 2;
        }
        else
        {
            *pBuffer = pOutput[i];
            ++pBuffer;
        }
        ++i;
    }
    *pBuffer = 0;

    SendMessage(this->ConsoleWindow.hwndBuffer, EM_LINESCROLL, 0, 0xffff);
    SendMessage(this->ConsoleWindow.hwndBuffer, EM_SCROLLCARET, 0, 0);
    SendMessage(this->ConsoleWindow.hwndBuffer, EM_REPLACESEL, 0, (LPARAM)buffer);

}; 
```

**注意**这不是生产代码，只是概念证明。
**编辑**g_PlatformDevice 是 RiseWindows 类型，如果不清楚的话...
**编辑**这是在 vs2008 下运行的 windows xp 平台上

**更新** 对于任何有兴趣的人来说，问题似乎是调用堆栈溢出，在堆栈的更下方，然后定义了另一个大数组。重构这消除了内存损坏。所以粉笔成堆的殴打！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-05T14:17:10.387

您还没有提到此代码在什么环境下运行。可能是你在吹你的筹码。您在 RiseWindows::Print 的堆栈上声明一个 32767 字节数组。在我熟悉的一些嵌入式系统环境中，这将是个坏消息。您可以增加堆栈大小和/或在堆上分配缓冲区来测试该理论吗？您可能希望将该缓冲区设置为 std::vector，或者可能是私有成员向量，以避免在每次调用 Print 时分配和重新分配它。

按照这些思路，MAX_PRINT_OUTPUT 有多大？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T14:03:41.387

可能不是您要询问的错误，但在您的循环中，在某些情况下，您会双倍递增 pBuffer，这可能会将您推到缓冲区的末尾，因为您只检查长度为 1（用于空终止）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-05T14:07:32.143

您是否尝试过分而治之的策略？

*   开始注释行，直到它起作用。
*   一旦它正常工作，请取消注释行，直到您找到错误所在。

一步一步地在单独的窗口中观察 args[] 指向的内存也会很有帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-05T14:12:17.543

随机猜测：我感觉问题是由 Printf 中的这一行引起的：

```
char formattedOutput[MAX_PRINT_OUTPUT]; 
```

我认为这是因为你有一些明显声明的指针和一些明显未声明的指针。一个字符数组是一个指针 - 没有办法解决这个问题，但它并不明显。在 Echo args 的函数定义中，将其定义为二维数组，因为您将其定义为

```
*args[MAX_COMMAND_ARGS] 
```

你想要那个吗？我的猜测是，某些东西无意中被作为引用而不是值传递，因为指针与数组的定义模糊，并且您将指针传递给作为数组开头的指针而不是指针数组的开始。既然您说当您输入 RiseWindows::Print 时它会损坏，我的猜测是您传递了错误的东西。

此外，据我所知，指向 char 的 const 指针仅保留指针的值，而不是指针内容的值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-05T13:58:35.567

我是否可以建议使用调试器单步执行以查看代码损坏的位置？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-05T14:05:06.517

而 (pOutput[i] && ((pBuffer - buffer) < sizeof(buffer) - 1))

改成：

而 (pOutput[i] && ((pBuffer - buffer) < sizeof(buffer) - 2))

你一次写 2 个字符，所以你需要确保你有两个字符的空间。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-05T14:03:58.687

不确定它是否应该如何工作，但 Echo 没有打印出 args 的第一个元素

```
// Changed i=1 to i=0;
for (int i = 0; i < argCount; ++i)
{
    Printf("%s ", args[i]);
    Printf("\n");
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-05T14:07:03.157

您想将 #define 从函数调用移到文件顶部：

[预处理器指令可以出现在源文件的任何位置，但它们仅适用于源文件的其余部分。](http://msdn.microsoft.com/en-us/library/3sxhs2ty(VS.80).aspx)

在这种情况下，这可能不会导致损坏，但它是非标准的，并且很容易导致问题发生。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-09T09:51:33.143

工作原理是，我们正在用以下方法破坏堆栈：

字符缓冲区[CONSOLE_OUTPUT_SIZE]; 字符 *pBuffer = 缓冲区；

而是尝试：

字符 *pBuffer = 新字符 [CONSOLE_OUTPUT_SIZE];

然后记得在最后调用delete [] pBuffer。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-10T11:59:29.553

我还没有真正研究过这个，但是你把你的类型弄混了......这非常迂腐，但它确实在 C 中有所作为。

在这里，您有一个 char 数组。

```
char formattedOutput[MAX_PRINT_OUTPUT]; 
```

在这里，您有一个需要 const char 指针的函数。

```
void RiseWindows::Print(const char *output) 
```

尝试：

```
void RiseWindows::Print(const char output[]) 
```

此外，我注意到您正在修改这些缓冲区中的内存-您确定可以这样做吗？至少，我确信你不能随意使用更多而不分配更多内存。（提示提示！）

我会分配我自己的数组，并将字符串复制到其中。然后，我将使用字符串函数来替换适用的换行符。

最后，我强烈建议您在这里使用 std::string。（尽管您无法将它们放入 varargs 的东西中——您必须为它们使用 c-strings，但尽可能将它们复制回 std::string's 中）。

# c# - 激活器和静态类

> ID：614863
> 
> 赞同：13
> 
> 时间：2009-03-05T13:58:39.123
> 
> 标签：c#, reflection, static, activator

我正在折腾使用 Activator 类来访问程序集中的资源的想法，否则我会为（依赖注入）创建循环引用。我以前使用需要引用的 vanilla 类来完成它，但我的问题是：我可以使用 Activator 来访问静态类吗？

让我失望的部分是激活器返回给你一个对象的*实例*，而静态类没有实例。这可能吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-03-05T14:04:41.993

您不需要激活器来调用该方法。您直接使用[MethodInfo.Invoke](http://msdn.microsoft.com/en-us/library/system.reflection.methodbase.invoke.aspx)。第一个参数可以为空。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-03-05T14:09:50.810

GvS 是正确的 - 这是一个用法示例：

```
using System;
using System.Reflection;

class Program
{
    static void Main()
    {
        Type type = Type.GetType("Foo");
        MethodInfo info = type.GetMethod("Bar");

        Console.WriteLine(info.Invoke(null, null));
    }
}

static class Foo
{
    public static String Bar() { return "Bar"; }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-02-19T16:10:03.167

另一个使用 MethodInfo.Invoke 的示例

```
Type myStaticClassType = Type.GetType("MyStaticClassNameSpace",true);
object[] myStaticMethodArguments = {object1,object2...};
MethodInfo myStaticMethodInfo = myStaticClassType.GetMethod("YourMethod");
var myStaticMethodResult = myStaticMethodInfo.Invoke(null,myStaticMethodArguments); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-05T14:05:50.120

不是静态类没有实例，只是它没有任何公共构造函数。Activator 使用反射来创建实例，当你使用反射时你可以调用任何你想要的东西，甚至是私有构造函数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-05T14:08:18.600

如果您所说的“资源”实际上是嵌入在程序集中的资源，那么您总是可以手动提取它们（请参阅 参考资料`Assembly.GetManifestResourceStream()`），而不使用静态类（这些会出现更多问题，因为您可以使用它们的唯一方法是纯粹带反射）。

Spring.NET 有一个很好的[IResource](http://springframework.net/docs/1.2.0/reference/html/resources.html)抽象。

不，`Activator`不能用于“创建”静态类。

# actionscript-3 - 阶段何时初始化？

> ID：614871
> 
> 赞同：0
> 
> 时间：2009-03-05T14:01:44.997
> 
> 标签：actionscript-3

我有一个从 sprite 继承的单例类，以便它可以访问舞台，就像这样..

```
package  
{
    import flash.display.Sprite;

    public class C extends Sprite
    {   
        private var _grid:Array = new Array();

        public function get Grid():Array
        {
            return _grid;
        }       

        private static var _instance:C;

        public static function get Instance():C
        {
            if (_instance == null)
            {
                _instance = new C();
            }

            return _instance;
        }

        function C() 
        {
            this.InitGrid();
        }

        private function InitGrid():void 
        {
            var gridWidth:Number = stage.width / 10;
        }
    }
} 
```

这会引发错误

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
    at C/InitGrid()
    at C()
    at C$/get Instance()
    at C()
    at Main() 
```

如果我用 int 替换 stage.width，则代码执行正常。这是因为该对象尚未添加到舞台的任何子级的 displayList 中吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T15:13:46.570

是的。Sprite 只有在成为显示列表的一部分时才具有舞台属性。
要获得舞台，您需要为您的单例提供对该舞台的引用或将其添加到显示列表中。如果您选择后者，您可以添加一个监听器 Event.ADDED_TO_STAGE，并在您的单例中相应地处理它。

# c++ - 在 C++ 中缓存昂贵的数据 - 函数范围的静态变量与可变成员变量

> ID：614875
> 
> 赞同：10
> 
> 时间：2009-03-05T14:02:09.783
> 
> 标签：c++, static, thread-safety, mutable

我有一个相对昂贵的数据获取操作，我想缓存它的结果。这个操作是从`const`方法中调用的，大致是这样的：

```
double AdjustData(double d, int key) const {
  double factor = LongRunningOperationToFetchFactor(key);
  return factor * d;
} 
```

我想`AdjustData`留下来`const`，但我想缓存这个因素，所以我只在第一次获取它。目前我正在使用 a`mutable map<int, double>`来存储结果（地图是 from `key`to `factor`），但我认为使用函数范围的静态可能是一个更好的解决方案 - 这个因素只需要这个函数，并且与其余的班级。

这似乎是一个好方法吗？有没有更好的选择？我可能会想到什么，特别是在线程安全方面。

谢谢，

多姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-05T14:56:17.300

我会用这样的东西来包装 LongRunningOperationToFetchFactor 的实现。我正在使用 Boost 范围锁，但您可以使用与其他锁定框架类似的东西。

```
#include <boost/thread/thread.hpp>
#include <boost/thread/mutex.hpp>
#include <map>

using namespace std;

static boost::mutex myMutex;
static map<int,double> results;

double CachedLongRunningOperationToFetchFactor( int key )
{

   {
       boost::mutex::scoped_lock lock(myMutex);

       map<int,double>::iterator iter = results.find(key);
       if ( iter != results.end() )
       {
          return (*iter).second;
       }
   }
   // not in the Cache calculate it
   result = LongRunningOperationToFetchFactor( key );
   {
       // we need to lock the map again
       boost::mutex::scoped_lock lock(myMutex);
       // it could be that another thread already calculated the result but
       // map assignment does not care.
       results[key] = result;
   }
   return result;
} 
```

如果这确实是一个长时间运行的操作，那么锁定 Mutex 的成本应该是最小的。

你的问题不是很清楚，但如果函数 LongRunningOperationToFetchFactor 是你类的成员函数，那么你希望映射是同一个类中的可变映射。不过，我使用单个静态互斥锁进行访问仍然足够快。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-05T15:24:00.587

我*不会*让这个缓存成为本地静态的。可变映射是缓存结果*的解决方案。*否则它将使您的函数无用，因为您的类的不同对象将共享相同的缓存，因为本地静态缓存对于所有对象都是相同的。如果结果不依赖于对象，您可以使用本地静态。但是然后我会问自己，为什么该函数是对象的非静态成员，如果它不需要访问它的任何状态。

正如你所说，它应该是线程安全的——如果不同的线程可以在同一个对象上调用成员函数，你可能想要使用互斥锁。`boost::thread`是一个很好用的库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-05T14:49:22.930

您可以将[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)(1) 用于执行长时间运行操作并缓存结果的类。然后可以在其他类的 const 成员函数中使用该实例。考虑互斥以保护映射数据结构中的插入和提取，以确保线程安全。如果多线程性能是一个大问题，那么您可以将键标记为正在进行中，以防止多个线程同时计算同一个键。

```
#include <cstdlib>
#include <iostream>
#include <map>

using namespace std;

class FactorMaker {
    map<int, double> cache;

    double longRunningFetch(int key)
    {
        const double factor = static_cast<double> (rand()) / RAND_MAX;
        cout << "calculating factor for key " << key << endl;
        // lock
        cache.insert(make_pair(key, factor));
        // unlock
        return factor;
    }

public:
    double getFactor(int key) {
        // lock
        map<int, double>::iterator it = cache.find(key);
        // unlock
        return (cache.end() == it) ? longRunningFetch(key) : it->second;
    }
};

FactorMaker & getFactorMaker()
{
    static FactorMaker instance;
    return instance;
}

class UsesFactors {
public:
    UsesFactors() {}

    void printFactor(int key) const
    {
        cout << getFactorMaker().getFactor(key) << endl;
    }
};

int main(int argc, char *argv[])
{
    const UsesFactors obj;

    for (int i = 0; i < 10; ++i)
        obj.printFactor(i);

    for (int i = 0; i < 10; ++i)
        obj.printFactor(i);

    return EXIT_SUCCESS;
} 
```

*(1) 单例模式可能会被严重遗漏。因此，如果您是第一次看到它，请不要为之疯狂。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-05T14:09:34.243

除非我不明白，否则对我来说很明显你想让它成为一个静态的：

```
double AdjustData(double d) const {
   static const double kAdjustFactor = LongRunningOperationToFetchFactor();
   return kAdjustFactor * d;
} 
```

这样，您只需获取一次因子。

# javascript - 根据内容动态改变div元素的高度

> ID：614881
> 
> 赞同：3
> 
> 时间：2009-03-05T14:03:31.590
> 
> 标签：javascript, jquery, html, css

我正在为我的网站开发类似 Facebook 的工具栏。

工具栏的一部分，用户可以单击以查看他们最喜欢的成员在线。

我试图弄清楚如何让弹出的 div 元素根据 AJAX 调用放入的内容而增长。

例如，当用户点击“Favorites Online (4)”时，我会显示一个固定高度和“Loading...”的弹出 div 元素。加载内容后，我想根据返回的内容调整 div 元素的高度。

我可以通过计算每个元素的高度 * 元素的数量来做到这一点，但这根本不是很优雅。

有没有办法用 JavaScript 或 CSS 做到这一点？（注意：也使用 JQuery）。

谢谢。

JavaScript：

```
 function favoritesOnlineClick()
{
    $('#favoritesOnlinePopUp').toggle();
    $('#onlineStatusPopUp').hide(); 
    if ($('#favoritesOnlinePopUp').css('display') == 'block') { loadFavoritesOnlineListing(); } 
} 
```

CSS 和 HTML：

```
 #toolbar
{
    background:url('/_assets/img/toolbar.gif') repeat-x;
    height:25px;
    position:fixed;
    bottom:0px;
    width:100%;
    left:0px;
    z-index:100;
    font-size:0.8em;
}
#toolbar #popUpTitleBar
{
    background:#606060;
    height:18px;
    border-bottom:1px solid #000000;
}
#toolbar #popUpTitle
{
    float:left;
    padding-left:4px;
}
#toolbar #popUpAction
{
    float:right;
    padding-right:4px;
}
#toolbar #popUpAction a
{
    color:#f0f0f0;
    font-weight:bold;
    text-decoration:none;
}
#toolbar #popUpLoading
{
    padding-top:6px;
}
#toolbar #favoritesOnline
{
    float:left;
    height:21px;
    width:160px;
    padding-top:4px;
    border-right:1px solid #606060;
    text-align:center;
}
#toolbar #favoritesOnline .favoritesOnlineIcon
{
    padding-right:5px;
}
#toolbar #favoritesOnlinePopUp
{
    display:block;
    border:1px solid #000000;
    width:191px;
    background:#2b2b2b;
    float:left;
    position:absolute;
    left:-1px;
    top:-501px; /*auto;*/
    height:500px;/*auto;*/
    overflow:auto;
}
#toolbar #favoritesOnlineListing
{
    font-size:12px;
}
<div id="toolbar">
    <div id="favoritesOnline" style=" <?php if ($onlinestatus == -1) { echo "display:none;"; } ?> ">
       <img class="favoritesOnlineIcon" src="/_assets/img/icons/favorite-small.gif" /><a href="javascript:favoritesOnlineClick();">Favorites Online (<span id="favoritesOnlineCount"><?php echo $favonlinecount; ?></span>)</a>
        <div id="favoritesOnlinePopUp">
            <div id="popUpTitleBar">
                <div id="popUpTitle">Favorites Online</div>
                <div id="popUpAction"><a href="javascript:closeFavoritesOnline();">x</a></div>
            </div>     
            <div id="favoritesOnlineListing">
             <!-- Favorites online content goes here -->
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-05T14:11:42.833

也许您可以删除 height 属性（确保它没有在 CSS 中设置）并让 DIV 自行扩展高度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T14:07:26.277

使其成为浮动元素，并且不要在其后使用清除元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-18T06:26:07.943

您应该在工具栏中取出 CSS height:25px 属性，内容将扩展容器。此外，ID 选择器标签是唯一的，您可以直接指定它们而无需引用祖先：

不正确：

```
 #toolbar #popUpAction  { /*some css */ }

 #toolbar #popUpAction a  { /*some css */ } 
```

正确的：

```
 #popUpAction  { /*some css */ }

 #popUpAction a  { /*some css */ } 
```

# java - 如何让 Netbeans 6.5 可共享库正常工作

> ID：614892
> 
> 赞同：8
> 
> 时间：2009-03-05T14:05:57.827
> 
> 标签：java, netbeans, shared-libraries, netbeans6.5

我在 Netbeans 6.5 中创建了一个 Web 应用程序。现在我想使用 Joda Time 库。我想通过 subversion 共享这个库，因为我不希望我的队友依赖于某些 Netbeans 配置。

为了让项目正常工作，我首先将该库添加到 Netbeans 库（工具->库）。这工作正常。JAR 被添加到类路径中，并且也被部署。

但是当我创建一个共享库（通过项目属性->库->浏览/新建库文件夹）时，JAR 不在类路径中。我收到`package org.joda.time does not exist`有关代码的错误消息`import org.joda.time.*`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-29T15:20:18.133

这个库的范围是什么？这个库是否仅用于这个特定的 Web 应用程序？

如果是这样，我们可以将库放在 WEB-INF/lib 目录中并将其也检查到 subversion 中吗？

WEB-INF/lib 目录中的库应该自动添加到项目的类路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-20T10:32:31.127

此博客条目描述了在 NetBeans 5 中有效的 hack。我不知道它是否适用于 NetBeans 6.5。如果您每晚在服务器上构建文件，我也不知道这是否可行。

[http://blogs.oracle.com/gjmurphy/entry/using_netbeans_free-form_projects_as](http://blogs.oracle.com/gjmurphy/entry/using_netbeans_free-form_projects_as)

我记得 8 年前在 JBuilder 中设置了这样的共享库。我希望 Netbeans 现在拥有它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-13T15:09:32.917

在项目依赖于可以为不同用户放置在不同位置的 JAR 的场景中，可以使用命名的 IDE 变量。

[http://wiki.netbeans.org/NewAndNoteWorthyNB65#section-NewAndNoteWorthyNB65-VariableBasedPathsInJ2SEJ2EEProjects](http://wiki.netbeans.org/NewAndNoteWorthyNB65#section-NewAndNoteWorthyNB65-VariableBasedPathsInJ2SEJ2EEProjects)

另一种选择是使用已经在 NetBeans 6.5 中运行良好的 Maven 插件。Artifact Jar 文件的 Intranet 存储库可以放置在文件服务器上，或通过 Maven 代理（如 Nexus）进行管理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-05T16:40:26.923

这是我所做的：

*   工具 -> 库 -> 新库...

    *   叫图书馆joda-time
    *   add 将 joda-time-1.6.jar 文件添加到其中
*   项目 -> 属性 -> 库

    *   在编译选项卡下
        *   添加库...
        *   选定的乔达时间

（编辑，我想我现在看到了这个问题——但也许没有）。

您需要将库添加到编译库并将其添加到分发库。还是我误解了这个问题？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-31T07:19:46.133

创建“新项目”时，可以选择启用“库专用文件夹”。这样，库也将提交到存储库，您的同行开发人员可以使用所有库签出您的项目，您的项目具有依赖关系，从而消除了 netbeans 配置绑定。

# java - 从 Java 调用 PHP 方法

> ID：614894
> 
> 赞同：0
> 
> 时间：2009-03-05T14:06:06.017
> 
> 标签：java, php

我需要从 java 调用 PHP 方法。我可以使用请求调度程序来做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-05T14:15:33.420

Here is a handy way to invoke a PHP method from within a Java application.

```
Runtime.getRuntime().exec("php <your script name>"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-05T14:16:39.110

您需要像向外部站点一样发出单独的请求，但这本质上是一个完整的 Web 请求。除非您的 JVM 中有 PHP 解释器，否则无法从 Java 中调用单个 PHP 函数，这似乎不太可能。

您可能希望编写 PHP 端，就像编写 AJAX 接口（使用[JSON](http://json.org)或一些松散定义的 XML）或 SOAP 接口一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T14:15:47.070

The request dispatcher is only meant to forward to (or include) another web resources in your J2EE web app.

If you want to bring user to a PHP page from a J2EE webapp, issue a redirect.

If you want to process results of request to a php page in your J2EE webapp, try HttpURLConnection or the like.

# php - PHP 正则表达式问题 - 可选文本

> ID：614895
> 
> 赞同：0
> 
> 时间：2009-03-05T14:06:25.610
> 
> 标签：php, regex

以下正则表达式应适用于 Do Dollars Dollar 或 #do #Dollars 或 #Dollar 但不适用于 Doblabla （目前是）等。

```
/^@(?P<name>\w+) (?P<amount>\d+) [#]?Do(?:llars?)?/i 
```

我该如何改变呢？这样它就不再匹配 Dogfood 和 Dogs 等...

**更新 3：毕竟没有解决**：

```
 /^@(?P<name>\w+) (?P<amount>\d+) [#]?(do(?:llars?|s))/i 
```

以下不匹配：

```
@name 2 do 
```

有什么想法吗？

我的第二个问题是我如何让它也匹配：Dox 和#Dox

所以最后我希望它匹配到

```
@name 2 #do
@name 2 do
@name 2 #dollars
@name 2 dollars
@name 1 dollar
@name 1 #dollar
@name 2 dox
@name 2 #dox 
```

没有别的了。

非常感谢！

冰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-05T14:32:12.520

这应该为你做：

```
/^@(?P<name>\w+) (?P<amount>\d+) #?Do(?:llars?|x)(?:\s|$)/i 
```

这匹配名称和数量，后跟可选的#，然后是“do”，然后是“llar”、“llars”、空格或字符串的结尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T14:12:45.233

如果我没记错的话，`(?:llars?)?`建议这将匹配以 do 开头的任何内容，而不关心它之后的内容，因为它是可选的。

在末尾添加 $ 以强制字符串以 do 或美元结尾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-05T14:25:17.903

在 Regexp.net 上进行了更多尝试后，我找到了答案

```
[#]?(do(?:llars?)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-05T14:14:13.110

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-05T15:12:00.553

也许我不完全理解，但你的正则表达式对我来说看起来过于复杂。这样做有什么问题？

```
/^@name [12] #?do(llar|llars|x)?$/ 
```

编辑：通读评论后，听起来您还有其他未提出的要求。编辑这些内容以便我们有一个实际完整的问题可以解决，这会使事情变得容易得多。

# mysql - 当 MS SQL 2005 express 已经存在时，在 windows server 2003 上安装 mySQL 是否安全？

> ID：614916
> 
> 赞同：3
> 
> 时间：2009-03-05T14:11:32.430
> 
> 标签：mysql, sql-server, sql-server-2005, installation, windows-server-2003

**[编辑]**
我应该注意我需要在实时生产服务器上执行此操作。MS SQL Server 已经连接到我们的网站并支持第 3 方 ERP 包。我想建立一个单独的数据库，我可以为一些辅助页面和内部使用的应用程序编写代码），它将完全独立于 ERP 解决方案（主要是为了安全，但也因为我更喜欢 mySQL）。
**[结束编辑]**

MS SQL 2005 express db 已经安装并在使用中，所以我不想管它。

这会产生问题，还是你成功地做到了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T14:12:39.103

除了性能问题，假设它们都被连续使用，应该没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T14:15:15.290

正如 Assaf 所说，您唯一应该担心的是两个数据库服务同时运行时可能出现的性能问题。除此之外，您不必担心两者的完整性。它们是完全独立的，不应该有任何冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T14:16:57.753

对于开发机器来说，这样做是安全的。两台数据库服务器监听不同的端口，所以两者同时运行是没有问题的。

我不会推荐它用于生产系统。

# bash - 如何剪切（1）驼峰式单词？

> ID：614930
> 
> 赞同：8
> 
> 时间：2009-03-05T14:15:29.347
> 
> 标签：bash, shell, camelcasing

在 Bash 中是否有一种简单的方法可以将驼峰词拆分为其组成词？

例如，我想将 aCertainCamelCasedWord 拆分为“某个 Camel Cased Word”，并能够选择我感兴趣的那些字段。当单词分隔符是下划线时，这可以通过 cut(1) 轻松完成，但是当单词是驼峰式时，我该怎么做呢？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-03-05T14:18:01.243

`sed 's/\([A-Z]\)/ \1/g'`

捕获每个大写字母并将前导空格替换为整个流的捕获。

```
$ echo "aCertainCamelCasedWord" | sed 's/\([A-Z]\)/ \1/g'
a Certain Camel Cased Word 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-04-07T15:32:06.570

如果您不需要拆分全部大写的单词，则此解决方案有效。例如，使用您将得到的最佳答案：

```
$ echo 'FAQPage' | sed 's/\([A-Z]\)/ \1/g' 
F A Q Page 
```

但是，使用我的解决方案，您将得到：

```
$ echo 'FAQPage' | sed 's/\([A-Z][^A-Z]\)/ \1/g'
FAQ Page 
```

> 注意：当有多个大写单词的第二个实例时，这将无法正常工作，例如：

```
$ echo 'FAQPageOneReplacedByFAQPageTwo' | sed 's|\([A-Z][^A-Z]\)| \1|g'
FAQ Page One Replaced ByFAQ Page Two 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-11-01T18:26:55.263

[当存在多个大写的第二个实例时，此答案](https://stackoverflow.com/questions/614930/how-can-i-cut1-camelcase-words/5583654#5583654)无法正常工作

```
echo 'FAQPageOneReplacedByFAQPageTwo' | sed 's|\([A-Z][^A-Z]\)| \1|g'
FAQ Page One Replaced ByFAQ Page Two 
```

因此，需要额外的表达式

```
 echo 'FAQPageOneReplacedByFAQPageTwo' | sed -e 's|\([A-Z][^A-Z]\)| \1|g' -e 's|\([a-z]\)\([A-Z]\)|\1 \2|g'
 FAQ Page One Replaced By FAQ Page Two 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-06T09:55:08.420

**纯重击：**

```
name="aCertainCamelCasedWord"

declare -a word                                 # the word array

counter1=0                                      # count characters
counter2=0                                      # count words

while [ $counter1 -lt ${#name} ] ; do
  nextchar=${name:${counter1}:1}
  if [[ $nextchar =~ [[:upper:]] ]] ; then
    ((counter2++))
    word[${counter2}]=$nextchar
  else
    word[${counter2}]=${word[${counter2}]}$nextchar
  fi
  ((counter1++))
done

echo -e "'${word[@]}'" 
```

# email - Microsoft CRM 4.0 工作流程：如何通过电子邮件发送相关实体列表？

> ID：614934
> 
> 赞同：1
> 
> 时间：2009-03-05T14:16:14.663
> 
> 标签：email, workflow, dynamics-crm, dynamics-crm-4

我正在 Microsoft CRM 4.0 中为 Entity *E1*构建工作流。在这个 wf 中，我必须发送一封电子邮件。在电子邮件中，我必须**打印符合某些条件的 E1 的所有实体**。

例如，以下邮件会很棒：

> *嗨，卡尔，这是您在昨天之前创建的帐户列表：*
> 
> *   *帐户1，信息*
> *   *帐户2，信息*
> *   *帐户3，信息*

嗬我能做到吗？看来我做不到！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-05T16:37:14.233

您必须编写自定义工作流程序集来创建这种类型的电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-03-09T22:23:44.067

根据您何时需要启动它，实际上有一种复杂的方式来处理使用本机工作流程。如果在父实体上的字段更改为某个值时将启动它，则执行此操作。

1.  在子实体上创建一个在创建时运行并且是子工作流的工作流。第一步应该是等到父实体上的相关字段具有正确的值。
    2.  然后在等待条件下，发送您的电子邮件
    3.  最后作为子工作流再次启动工作流
    4.  然后结束当前工作流程。

如果你不害怕等待工作流程，你也可以做一些巧妙的技巧

# delphi - 将参数传递给delphi TFrame

> ID：614937
> 
> 赞同：3
> 
> 时间：2009-03-05T14:16:47.660
> 
> 标签：delphi, constructor, tframe

为了避免单例和全局变量，我希望能够将参数传递给 TFrame 组件。但是，由于 TFrame 通常在设计时包含在表单中，因此只能使用默认构造函数。

父窗体当然可以在创建 TFrame 后在 OnCreate 回调中设置一些属性。但是，这并不能确保不会忘记属性，并且依赖关系不像使用构造函数那样清晰。

如果可以在读取 dfm 文件时注册一个用于创建组件的工厂，那么一个不错的方法是。然后可以在工厂创建时将所需的参数传递给 TFrame 构造函数。有没有办法做到这一点？

或者有人对如何将参数传递给 TFrame 有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-05T18:37:24.070

所有组件，包括 的后代`TFrame`，都需要能够使用从 继承的构造函数来构造`TComponent`。否则，它们无法在设计时正确使用。如果您可以接受设计时使用的限制，那么您可以覆盖该构造函数并引发异常。这将阻止组件在设计时放置在表单上。只需提供一些需要其他参数的其他构造函数。

由于设计时的要求，所有组件都需要能够在其部分或全部属性仍为其默认值的情况下存在。这并不意味着组件在处于该状态时必须做有用的事情，但它们确实需要能够无限期地保持在该状态。应该没问题，例如，在表单上放置一个组件，保存表单，然后关闭 Delphi，以便稍后恢复表单设计。组件应该允许自己被保存和恢复，即使它的所有属性还没有设置为最终使用。

我的首选选项是仅在运行时强制执行组件的规则。在允许使用它们之前，检查所有属性是否都设置为合理的值。您可以使用断言来强制正确使用您的组件。如果您的课程的使用者还没有完成在表单上设置您的组件，他们将很快学会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-06T02:54:58.240

我通常会添加一个公共的、非虚拟的“初始化”或（对美国人初始化）程序，它需要提供所有参数。这将设置属性。

如果可能，使属性受保护或私有，因此可以设置它们的唯一方法是调用 Initialise(AFoo, ABar : integer)。

然后在 TFormXXX.FormCreate 或 TformXXX.Create 中，有：

```
inherited;
Initialise(foo, bar); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T14:36:53.087

您可以创建/注册您自己的 tFrame 组件并将其放置在表单上吗 - 它的创建可以将任何东西传递给它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-05T14:39:22.253

如果工厂可以提供您需要的参数，您为什么不直接覆盖框架的默认构造函数，并要求工厂类提供参数？

我通常制作自己的构造函数。无论如何，我不喜欢在设计时创建框架。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-05-02T05:19:12.527

a) 框架可以在需要时动态创建，在不需要时销毁

b) 给框架一个具有参数数据类型或数据结构的公共属性，并通过该属性将值传递给表单。

示例：
`TAddress`- 保存地址的常用元素的类。
`TAddressFra`- 带有视觉控件的框架以显示地址

*   `TAddress`用值填充 的实例
*   创建一个实例`TAddressFra`
*   用实例分配`TAddressFra.address`属性`TAddress`
*   使用该过程`setAddress(o_address : TAddress)`将`TAddress`属性的值分配给相应的可视组件`TAddressFra`

# sharepoint - 处理 PDF 文档的 SharePoint 工作流

> ID：614941
> 
> 赞同：2
> 
> 时间：2009-03-05T14:17:26.877
> 
> 标签：sharepoint, pdf, workflow

我们正在尝试减少在工作流程中批准 PDF 的点击量。使用 Word 2007 中的 Word 文档，您在应用程序顶部有工作流任务栏，因此当您查看文档时，您可以从那里批准或拒绝它。我们的问题是我们需要 PDF 文档的这个功能。您是否知道一种能够在一项简单的任务中查看/批准而不是必须在 acrobat 中查看 PDF 然后返回到 SharePoint（或电子邮件）来编辑任务的方法？我对此进行了研究，但只找到了这篇文章：[http ://social.technet.microsoft.com/Forums/en-US/sharepointworkflow/thread/728c2e34-9031-4a27-b9c9-6625af2547e3/](http://social.technet.microsoft.com/Forums/en-US/sharepointworkflow/thread/728c2e34-9031-4a27-b9c9-6625af2547e3/)

不是很有用。你有什么解决办法？知道是否可以对自定义解决方案进行编码，以便对高管来说更容易处理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T20:52:53.493

您可以编写自己的工作流程，发送一封自定义电子邮件，其中包含指向批准表单的链接，他们可以在其中 1\. 查看 2\. 批准/拒绝文档。

这样用户就有 3 次点击：

1.  打开表格
2.  打开文档
3.  批准文件

对于仍在使用 Office 2003 的人来说，这也是同样的问题——非常有效的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T13:17:31.560

您可以使用 iTextSharp 之类的工具在文档本身中嵌入“批准”和“拒绝”链接，单击该链接时会调用一个 Web 服务，该服务会在 SharePoint 中翻转标志。这意味着生成的 PDF 将永久具有这些链接，但取决于您的工作流程，这可能不是问题。例如，如果管理人员只查看 PDF 一次然后将其丢弃，您可能会为他们提供不会出现在文件最终版本中的嵌入式链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T14:26:26.123

我知道你可以得到一个 Word 的 PDF 编写器，所以也许你也可以得到一个 PDF 查看器？理所当然地，如果是这样，那么您还可以在 Word 中为您的 PDF 保留现有的工作流程批准栏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-05T16:46:50.527

您必须为用于 PDF 的任何查看器编写插件。这可能是 Adob​​e Reader（6、7、8、9）、Adobe Acrobat（6、7、8、9）、Foxit、Okular、Ghostscript、SumatraPDF、Inkscape 等。

你能控制你的环境并保证每个人都使用同一个查看器吗？为这些查看器之一编写自定义代码是否值得一两次点击？

# .net - 什么是最好、最简单的 ajax 文件上传器？

> ID：614945
> 
> 赞同：6
> 
> 时间：2009-03-05T14:19:01.273
> 
> 标签：.net, asp.net, javascript, ajax

我有 asp.net 3.5 网站，我想放置一个 ajax 上传器，但我希望这个 ajax 上传器：

1.  上传时/上传后不要刷新页面
2.  易于集成
3.  自由
4.  不是swf上传控件
5.  我将在上传图像时使用它，因此想要一种简单的方法来获取上传的图像文件名，并能够告诉它要上传到哪个文件夹。

有谁知道好的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T14:41:07.397

查看[http://krystalware.com/Products/SlickUpload/](http://krystalware.com/Products/SlickUpload/)

免费试用永无止境，但它会在您的网站上放置一点“由”通知。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-05T16:33:31.263

我在那里找到了一些不同的选择。我没有使用过它们中的任何一个，但我很可能会在不久的将来在这里研究第三个选项。

*   [http://en.fileuploadajax.subgurim.net/](http://en.fileuploadajax.subgurim.net/)
*   [http://ajaxuploader.com/](http://ajaxuploader.com/)
*   [http://mattberseth.com/blog/2008/07/aspnet_file_upload_with_realti.html](http://mattberseth.com/blog/2008/07/aspnet_file_upload_with_realti.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-06T07:49:40.157

您可以使用我的[AJAX 上传插件](http://valums.com/ajax-upload/)，该插件允许您使用任何元素进行文件上传，并且不需要闪存。

# python - 开罗的大图像

> ID：614949
> 
> 赞同：5
> 
> 时间：2009-03-05T14:19:46.840
> 
> 标签：python, cairo

我必须用 cairo 渲染一个非常大的图像（>50.000² 像素）。为了在不耗尽内存的情况下做到这一点，我一个接一个地渲染图像的一部分（<1.000² 像素），然后将它们合并在一起。

1.  创建 1000x1000 曲面
2.  平移到当前零件的位置
3.  绘制图像（使用pycairo调用绘图指令）
4.  渲染/保存图像到文件 (cairo_surface_write_to_png)
5.  重复下一部分

因为 cairos 裁剪算法比我自己的要快，所以第三步绘制了整个图像，即使它只有一部分是可见的。大部分 CPU 用于第 3 步（通过 python）。大部分内存用于第 4 步（由 cairo）。

有没有办法加快速度？像这样的东西？

1.  创建 1000x1000 曲面
2.  绘制图像
3.  将所有内容移动到当前部分的位置
4.  渲染/保存图像到文件
5.  对下一部分重复 3

或者

1.  创建 50000x50000 曲面
2.  绘制图像
3.  仅将图像的当前部分渲染/保存到文件
4.  对下一部分重复 3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-05T14:30:03.167

首先，使用 C 或 Vala 代替 Python 可能会加快速度。

至于内存使用，我会尝试写入我自己的流，而不是文件（参见[write_to_png_stream](http://cairographics.org/manual/cairo-png-functions.html#cairo-surface-write-to-png-stream)）。这*可以*让您（我没有尝试过）控制内存使用，假设 Cairo 在一切完成后不会只调用您的函数一次。

# c# - C#：如何使用 CategoryAttribute.Appearance 属性

> ID：614951
> 
> 赞同：4
> 
> 时间：2009-03-05T14:20:29.663
> 
> 标签：c#, user-controls, attributes, windows-forms-designer

我已经阅读了一些关于[Design-Time Attributes for Components 的](http://msdn.microsoft.com/en-us/library/tk67c2t8.aspx)内容。在那里我找到了一个名为[CategoryAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.categoryattribute.aspx)的属性。在那个页面上它说

> CategoryAttribute 类定义了以下常见类别：

然后列出了一些常见的类别。其中之一是例如[Appearance](http://msdn.microsoft.com/en-us/library/system.componentmodel.categoryattribute.appearance.aspx)。我想，太棒了！然后我可以使用`[Category.Appearance]`而不是`[Category("Appearance")]`！但显然我不能？尝试编写它，但 Intellisense 无法接收它并且无法编译。我在这里错过了什么吗？难道这些属性不是为了这个吗？如果不是，它们是干什么用的？如果是，我该如何使用它们？

是的，我确实`using`有权访问`CategoryAttribute`，原因`[Category("Whatever")]`确实有效。我只是想知道我如何使用那些定义的常见类别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-05T14:40:16.230

正如您在 MSDN 上看到的，它只是一个 getter 属性，而不是一个 setter。

```
public static CategoryAttribute Appearance { get; } 
```

实际上，使用 Reflector 的代码如下所示：

```
 public static CategoryAttribute Appearance
    {
        get
        {
            if (appearance == null)
            {
                appearance = new CategoryAttribute("Appearance");
            }
            return appearance;
        }
    } 
```

所以它并没有做很多事情。

我能看到的唯一用途是这样的：

```
 foreach (CategoryAttribute attrib in prop.GetCustomAttributes(typeof(CategoryAttribute), false))
            {
                bool result = attrib.Equals(CategoryAttribute.Appearance);
            } 
```

基本上，当使用反射查看类时，您可以轻松检查它属于哪个类别，而无需进行 String 比较。但是不幸的是，您不能以您尝试的方式使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T14:33:33.047

静态属性通过 CategoryAttribute.Appearance 访问。但是属性系统不允许您在属性声明中调用代码，我想这就是它不会为您编译的原因。您可能不得不满足于 [Category("Appearance")]。

# c# - 在 C# 中使用 using 语句

> ID：614959
> 
> 赞同：4
> 
> 时间：2009-03-05T14:23:22.993
> 
> 标签：c#, using

> **可能重复：**
> [什么是 C# Using 块，我为什么要使用它？](https://stackoverflow.com/questions/212198/what-is-the-c-using-block-and-why-should-i-use-it)

我已经看到在代码块中间使用了 using 语句，这是什么原因？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2009-03-05T14:24:43.740

**using**语法可以（应该）用作定义任何实现[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)的范围的方法。using 语句确保在发生异常时调用 Dispose。

```
 //the compiler will create a local variable 
    //which will go out of scope outside this context 
    using (FileStream fs = new FileStream(file, FileMode.Open))
    {
         //do stuff
    } 
```

或者，您可以只使用：

```
 FileStream fs;
    try{
       fs = new FileStream();
       //do Stuff
    }
    finally{
        if(fs!=null)
           fs.Dispose();
    } 
```

[来自 MSDN 的额外阅读](http://msdn.microsoft.com/en-us/library/yh598w02(VS.80).aspx)

C# 通过 .NET Framework 公共语言运行时 (CLR) 自动释放用于存储不再需要的对象的内存。内存的释放是不确定的；每当 CLR 决定执行垃圾回收时，就会释放内存。但是，通常最好尽快释放文件句柄和网络连接等有限资源。

using 语句允许程序员指定使用资源的对象何时应该释放它们。提供给 using 语句的对象必须实现 IDisposable 接口。该接口提供了 Dispose 方法，该方法应该释放对象的资源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-05T14:28:45.197

它通常在打开到流或数据库的连接时使用。

它的行为类似于 try { ... } finally { ... } 块。在*using*块之后，括号中实例化的 IDisposable 对象将被正确关闭。

```
using (Stream stream = new Stream(...))
{

} 
```

在此示例中，流在块之后正确关闭。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-05T14:33:16.217

使用最终尝试语法糖用于任何具有 IDisposable.. 的东西，比如 sqlconnection。它的使用确保某些东西在超出`using(){}`范围后被处置。

```
using(SqlConnection conn = new SqlConnection(connString))
{
  //use connection
}

//shorter than

SqlConnection conn = new SqlConnection(connString)
try
{
  //use connection 
}
finally
{
    conn.Dispose();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-05T14:27:17.853

using 语句确保对象在不再需要时被正确处理。它基本上可以节省您编写 obj.Dispose(); 并提供关于变量范围和使用的可视化指南。

有关详细信息，请参阅[MSDN 页面](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-05T14:33:39.397

这种使用形式与释放资源有关。它只能与实现 IDisposable 接口的类结合使用。

例子：

```
using(SqlConnection conn = new SqlConnection(someConnectionString))
{
     //Do some database stuff here
} 
```

在 using 块结束时调用 conn.Dispose，即使在块内引发异常也是如此。在 SwqlConnection 对象的情况下意味着连接总是关闭的。

这种结构的一个缺点是现在有办法知道发生了什么。

希望这有助于回答您的问题？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-05T14:44:56.047

每当您的代码创建一个实现 IDisposable 的对象时，您的代码都应该在 using 块内进行创建，如上所示。

这条规则有一个例外。WCF 代理类设计中的一个错误会阻止 using 语句对代理类有用。简而言之，代理类的 Dispose 方法可能会引发异常。WCF 团队认为没有理由不允许这样做。

*不幸的是，没有看到原因并不*意味着没有原因：

```
try
{
    using (var svc = new ServiceReference.ServiceName())
    {
        throw new Exception("Testing");
    }
}
catch (Exception ex)
{
    // What exception is caught here?
} 
```

如果隐式 Dispose 调用引发异常，则 catch 块将捕获*该*异常，而不是在*using*块中引发的异常。

# css - 在 div 中居中多个元素

> ID：614960
> 
> 赞同：1
> 
> 时间：2009-03-05T14:23:31.653
> 
> 标签：css

问候，我正在尝试为我的一个列表创建一个分页面板，并希望使其居中。目前它看起来像：

```
<div class="panel">
  <div class="page">1</div>
  <div class="page">2</div>
  <div class="page">3</div>
</div> 
```

所以我基本上是想让所有的“页面”div元素都到“面板”容器的中心，像这样：

```
_____________________________
|           1 2 3            |
------------------------------ 
```

有没有办法在**不知道“页面”元素需要的宽度**的情况下实现这一点（可能有 3 或 9 页，两种情况都应该正确处理）。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-05T14:30:25.333

您是否有任何理由希望页面为`<div>`s？如果您将它们设为 a `<span class='page'>`（在语义上更正确，恕我直言）并应用于`text-align: center;`面板，您将获得所需的效果。否则你可以`display: inline;`在页面上做，但为此你不妨去`<span>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T14:28:19.003

你必须使用 div 来获取数字吗？

我会用 span 替换那些 div，然后将 text-align:center 应用于外部 div (.panel)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T14:54:55.227

由于这是一个数字列表，您应该考虑将它们放在一个列表中以在语义上是正确的。将它们推入 UL 中，使用 CSS 进行样式化，你就很成功了。

也许像这样：

```
<div class="panel">
 <ul>
   <li><a href="#">1</a></li>
   <li><a href="#">2</a></li>
   <li><a href="#">3</a></li>
 </ul>
</div> 
```

CSS 中的样式如下：

```
.panel{text-align:center; }
.panel ul{list-style-type:none; margin:0 auto; padding:0; overflow:hidden; }
.panel li{display:inline; }
.panel li a{padding:5px; margin:0;} 
```

玩弄填充和边距。当它们用于分页、选项卡和菜单时，为链接添加一些肥厚总是一个好主意。

在 Opera 9、FF3、IE6、Chrome 中测试

# ruby-on-rails - 在 Dreamhost 上运行 Rails 和 PHP

> ID：614961
> 
> 赞同：1
> 
> 时间：2009-03-05T14:23:34.820
> 
> 标签：ruby-on-rails, dreamhost

是否可以在“example.com”上运行一些 PHP 页面，并在 Dreamhost 上的“test.example.com”上运行 rails 应用程序？有人做过吗？

还是我需要在不同的域上运行 rails 应用程序？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-05T16:01:47.530

在 Dreamhost 控制面板菜单中，转到“域”下的“管理域”。

将域 example.com 添加为完全托管的域，并保留默认设置。默认情况下，PHP 设置在完全托管的域上，所以你很高兴去那里。

返回“管理域”面板并设置子域 test.example.com。这一次，选中标有“Ruby on Rails Passenger (mod_rails)？”的框。并填写表格以指定 Rails 应用程序的公共文件夹。有关如何在 DH 中设置乘客应用程序的完整详细信息，您应该查看[相关的 DH wiki 文章](http://wiki.dreamhost.com/Passenger "DreamHost 上的乘客/mod_rails")- 说明非常简单。

祝你好运！

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2009-03-05T14:36:15.600

你可以做到，我已经做到了。听起来不像是广告，但他们的控制面板让您可以轻松地做您想做的事。

# javascript - 如何在 DIV 中的 XY 位置插入元素

> ID：614962
> 
> 赞同：3
> 
> 时间：2009-03-05T14:23:37.563
> 
> 标签：javascript, jquery, events

我正在尝试创建一个网页，用户可以在其中使用上下文菜单在文本之间插入一个图钉（如谷歌地图）。

我的问题是我不知道如何将销钉插入确切的位置。使用 DOM 我只能到达最近的 DIV（通过使用**this**），但是 DIV 包含大量文本，并且 PIN 必须位于文本旁边。

我可以使用 pageX 和 pageY 获取鼠标单击的位置，但不知道如何在该位置插入元素。我在 JQuery 中尝试过：insertAfter、prepend、append 但没有得到想要的结果。

任何想法如何解决这个问题。

问候， Choesang Tenzin

```
 $("#Content").rightClick( function(e) {

    $("<div class='pin'/>").insertAfter(this); 
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-05T14:29:12.480

```
$("#Content").rightClick( function(e) {
        var myTop = ...;
        var myRight= ...;
        $("<div class='pin' style='position:absolute; top: ' + myTop +'px; right: ' + myRight + 'px;/>").insertAfter(this); 
 }); 
```

抱歉，我不记得如何从 e 参数中获取 x 和 y 了。此外，您需要将鼠标单击的 x,y 转换为相对于 #content 元素的 x,y。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-09T09:48:10.297

非常感谢你的所有想法。我想出了另一种方法来做到这一点。我正在使用“RANGE”直接插入到单击区域（div）中，而不是在它之后或之前并添加 z-indexes。这样做的好处是：

1.  它真的在文本中而不是作为图层
2.  文本在引脚周围流动（文本为引脚腾出空间）

    ```
    $("div").click( function(e) {
        //the following works only for FF at the moment          
        var range = window.getSelection().getRangeAt(0);
        var pin = document.createElement('img');
        pin.setAttribute('src','pin_org.png');    
        pin.setAttribute('class','pin');                                                                    
        range.insertNode(pin);
    });           

    $("img.pin").live( 'mouseover', function () { 
    alert("hovered!!"); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T15:28:03.323

在包含的 div 上设置样式`position:relaitve;`，使其成为一个图层。这样它就可以作为其中绝对定位元素的原点。

# sql - SQL FOR EACH？

> ID：614963
> 
> 赞同：0
> 
> 时间：2009-03-05T14:23:39.763
> 
> 标签：sql

我有一个包含两列 userID 和 contentID 的表。基本上，此表用于将访问某些内容的权限分配给特定用户。我有分配给内容 A 的每个用户的请求也分配给内容 B。那么我将如何为具有 (userid, [内容 A]) 的 ID？

好的，我尝试了前两个帖子所说的内容，并将其转换为：

```
INSERT INTO tbl_courseAccess
                      (contentid)
SELECT     11 AS Expr1
WHERE     (contentid = 6) 
```

并且没有工作，所以我不确定我做错了什么，这是我尝试使用的：

```
insert into tbl_contentAccess
(userid, contentid)
select userid, 11
where contentid = 6 
```

好的，我找到了一个新的解决方案，不要再担心这个了，谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-05T14:26:01.507

```
insert into <table>(userid, contentid)
select userid, [content b id] from <table> where contentid = [content a id])) 
```

**更正：**打字太快无法与其他回答者竞争

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-05T14:27:10.490

```
insert into [tablename]
(userid, contentid)
select userid, [id of content B]
where contentid = [id of content A] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T14:28:20.860

```
 insert into your_table(userid, contentid) select userid, 
[id of content B] from your_table where contentid = [id of content A]) 
```

那应该做的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-05T14:28:36.693

```
INSERT INTO mytable (userID,contentID) 
  SELECT userID,[id of content B] FROM mytable 
    WHERE content = [id of content A]; 
```

# c# - 如何获取状态机工作流程中给定角色的可能转换列表？

> ID：614969
> 
> 赞同：0
> 
> 时间：2009-03-05T14:24:38.030
> 
> 标签：c#, .net-3.5, workflow-foundation

在给定的状态机工作流程中，我们如何找出给定角色的可能转换。在我的场景中，只有某些角色有权执行某些活动。我必须得到那个清单。辅助类`StateMachineWorkflowInstance`在这里没有用，因为它只是返回所有可能的转换，而忽略了演员的角色。

这里的任何帮助将不胜感激。

谢谢，苏格拉底。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-05T19:11:05.737

看起来没有直接的方法可以做到这一点。我大致根据[Ruurd Boeke 博客](http://www.sitechno.com/Blog/HowToFindOutWhatWorkflowStateTransitionsArePossibleForAGivenRole.aspx)上的解决方案编写了这个方法。我正在获取可能事件的列表，然后查看它们是否可以由用户角色执行。这是一种解决方法，但仍然可以正常工作。

```
public string[] GetTransistions(string strUser)
{
    string[] strRoles = System.Web.Security.Roles.GetRolesForUser(strUser);
    List<string> strActivity = new List<string>();
    ReadOnlyCollection<WorkflowQueueInfo> queues = workflowInstance.GetWorkflowQueueData();
    foreach (WorkflowQueueInfo info in queues)
    {
        if (!info.QueueName.Equals("SetStateQueue"))
        {
            foreach (string subscribedActivity in info.SubscribedActivityNames)
            {
                HandleExternalEventActivity heea = workflowInstance.GetWorkflowDefinition().GetActivityByName(subscribedActivity) as HandleExternalEventActivity;

                #region check roles
                if (heea.Roles != null)
                {
                    foreach (WorkflowRole workflowRole in heea.Roles)
                    {
                        foreach (string strRole in strRoles)
                        {
                            if (workflowRole.Name.Equals(strRole))
                            {
                                strActivity.Add(heea.EventName);
                                //permissionLog += workflowRole.Name + " can perform " + heea.EventName + " Activity. ";
                            }
                        }
                    }
                }
                #endregion
            }
        }
    }
    return strActivity.ToArray();
} 
```

# mysql - SQL 语法错误

> ID：614971
> 
> 赞同：1
> 
> 时间：2009-03-05T14:24:47.077
> 
> 标签：mysql, sql

我在以下 sql 中找不到错误：

```
$query = "INSERT INTO users('username', 'password', 'key', 'email', 'rank', 
'ip','active') VALUES ('$username','$password','$random','$email','1','$ip',
'0')"; 
```

出于某种原因，我不断收到错误

错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在 ''username'、'password'、'key'、'email'、'rank'、'ip'、'active' 附近使用的正确语法） VALUES ('wx ','79' 在第 1 行

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-05T14:28:59.267

转换

```
('username', 'password', 'key', 'email', 'rank', 'ip', 'active') 
```

至

```
(`username`, `password`, `key`, `email`, `rank`, `ip`, `active`) 
```

在 MySQL 中，字段名称应该**不加引号**或**反引号**（括在反引号或反引号中）。

在 MS SQL Server 中，字段名称应不加引号或括在**[方括号]**中。

其他 SQL DBMS 大多遵循 SQL 标准，字段名称应不加引号或用**“双引号”括起来**，然后称为“分隔标识符”。有时，您必须打开分隔标识符处理（这本身就是非标准行为）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-05T14:27:27.743

丢失列名周围的引号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-05T14:28:23.887

不要将列名放在单引号中：

```
$query = "INSERT INTO users(username, password, key, email, rank, ip, active) 
          VALUES ('$username','$password','$random','$email','1','$ip','0')"; 
```

我们暂时忽略 SQL 注入问题。:-)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-05T14:28:25.337

“在''用户...附近使用正确的语法”是一个很好的提示。您应该在列名周围放置“”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-05T14:52:28.930

除了像已经提到的那样删除名称周围的撇号之外，如果某些名称是数据库提供程序中的保留关键字，则可能需要将它们指定为标识符。

对于 SQL Server，您将使用括号来指定标识符：`[password]`，但是从您的错误消息看来，您使用的是 MySQL，它使用反引号 (`) 而不是括号。（由于这个论坛使用反引号来表示代码块，所以我无法编写示例，但我认为无论如何你都明白了。）

根据表中的数据类型，您可能还必须删除某些值周围的撇号。例如，如果`rank`是数字字段，则值中的数字 1 周围不应有撇号。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-05T14:28:50.110

去掉字段名称周围的单引号。该错误消息为您提供了问题的提示。

> 检查与您的 MySQL 服务器版本相对应的手册，以获取在 “用户名”、“密码”、“密钥”...附近使用的**正确语法**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-05T15:30:20.930

从错误发生的位置来看，您没有在将数据发送到数据库之前对其进行转义，并且密码中的第三个字符是撇号（'）。

根据您使用的 MySQL API，您需要以下函数之一： [`mysql_real_escape_string`](http://www.php.net/manual/en/function.mysql-real-escape-string.php)、[`mysqli_real_escape_string`](http://www.php.net/manual/en/mysqli.real-escape-string.php)或[`pdo_quote`](http://www.php.net/manual/en/pdo.quote.php)在将每个变量传递到数据库之前对其进行转义。

或者，如果您使用的是 MySQLi 或 PDO，请使用带有绑定参数的准备好的语句来为您执行此操作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-05T18:48:38.863

> 插入用户（'用户名'，...

正如 Itay 所指出的，这里不需要单引号。如果您想/需要使用保留字作为名称，则必须将它们用其他东西分隔，或者：

*   `backticks`，默认的 MySQL 方式，或者
*   “双引号”，其他数据库支持的标准 ANSI SQL 方式。

如果您想在此处使用跨 DBMS 兼容的代码，则将连接的 sql_mode（或服务器默认值，如果这不会干扰其他应用程序）设置为允许[ANSI_QUOTES并不是一个坏主意。](http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html#sqlmode_ansi_quotes)

> ('$用户名', ...

哎呀！除非您之前处理过 $username 以对其进行转义，否则您只是在您的应用程序中引入了一个可爱的[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)安全漏洞。请参阅[mysql_real_escape_string](http://de.php.net/manual/en/function.mysql-real-escape-string.php)或者更好地使用参数化查询来避免这种情况。

# sql - 在 DB2 8.x 中删除模式及其所有内容

> ID：614976
> 
> 赞同：1
> 
> 时间：2009-03-05T14:26:00.930
> 
> 标签：sql, schema, db2

在不知道内容是什么的情况下，如何使用 SQL 在 DB2 8.x 中删除模式及其所有内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-05T20:16:52.753

我手头没有要删除的架构，但是信息中心（[http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/ admin/t0005230.htm](http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/admin/t0005230.htm) ) 说 a`DROP SCHEMA [schema name]`应该在 DB2 8.x 上工作

编辑：好的，信息中心还说：“在删除模式之前，该模式中的所有对象都必须自己删除或移动到另一个模式”

因此，需要先删除模式中的所有对象。可以列出对象（表、视图、触发器、过程、索引...）以查询 SYSIBM 模式中的目录视图。

例如，要获取属于架构的所有表，请运行：

```
select table_name from sysibm.tables where table_schema = '[your schema name]' 
```

检查其他 sysibm 视图以获取属于模式的所有对象。这些视图包括：sysibm.views、sysibm.triggers、sysibm.routines、sysibm.indexes，... - 详情请咨询 IBM 信息中心（上面的链接）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-05T14:39:06.763

使用命令 center-GUI 删除模式的所有内容，然后 DROP SCHEMA

# iphone - 使用翻转过渡更改 leftBarButtonItem？

> ID：614988
> 
> 赞同：3
> 
> 时间：2009-03-05T14:28:04.370
> 
> 标签：iphone, transition

在我的代码中，我以编程方式将带有 UIButton 的 leftBarButtonItem 更改为 UIActivityIndi​​catorView，我想知道如何在更改时执行翻转过渡，知道吗？

非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-05T14:44:02.180

嗯..我有一种感觉，要进行翻转过渡，您需要有一个 UIView。

所以..你可以制作一个自定义 barButtonItem 并添加一个 FlipView：

```
UIView *flipView = [[UIView alloc] init....];
BarButtonItem *barbutton = [[BarButtonItem alloc] initWithCustomView:flipView]; 
```

然后将您的原始视图添加到翻转视图中，这可以包含您喜欢的任何内容...

```
[flipView addSubview:<original view>]; 
```

然后将其翻转为 UIActivityIndi​​catorView，我认为您需要执行以下操作：

```
[UIView beginAnimations:@"flip" context:NULL];
[UIView setAnimationDuration:1];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:flipView cache:YES];

[<original view> removeFromSuperView];
[flipView addSubview:<activityIndicatorView>];

[UIView commitAnimations]; 
```

您可能必须在某处保留对您的 flipView 的引用，以便在您想要执行翻转时带回对它的引用。

希望这可以帮助！

缺口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-05T18:16:32.887

查看 Elements 示例。他们正在那里的工具栏中进行翻转。

# java - 从 Java 调用 PHP

> ID：614995
> 
> 赞同：2
> 
> 时间：2009-03-05T14:28:40.033
> 
> 标签：java, php

> **可能重复：**
> [从 java 调用 php 方法](https://stackoverflow.com/questions/614894/invoking-a-php-method-from-java)

我正在编写一个 Java 类。我在 test.php 中有一些逻辑。该 Java 类的方法之一应该调用 test.php，以便 test.php 执行一些计算并将结果返回给调用 Java 方法。我可以这样做吗？

```
Runtime rt = runtime.getRuntime();
process exec = rt.exec(test.php); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-05T19:42:09.077

您应该使用 JSR-223 脚本 API。有一个使用 Java/PHP 桥的 PHP 实现：

[http://php-java-bridge.sourceforge.net/pjb/](http://php-java-bridge.sourceforge.net/pjb/)

另一个是纯Java： http: [//www.caucho.com/resin-3.0/quercus/](http://www.caucho.com/resin-3.0/quercus/)

我自己没有用过这个。但是 Caucho 的 Quercus 产品使用了它，所以我怀疑它已经足够成熟，可以满足您的任何需求。

[http://quercus.caucho.com/](http://quercus.caucho.com/)

以下是一些可能对您有所帮助的其他链接：

[https://scripting.dev.java.net/](https://scripting.dev.java.net/)

[http://jcp.org/en/jsr/detail?id=223](http://jcp.org/en/jsr/detail?id=223)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T14:36:29.873

You may be able to execute the php script that way, but will it produce expected result?

Call to PHP done this way may work, but it will miss any context that it may need to work (parameters from a request, user's session scope, etc.)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-05T18:57:48.030

This works in the opposite direction you are describing but it may be able to help as it is an actual bridge between the two languages.

[http://www.php.net/manual/en/java.examples-basic.php](http://www.php.net/manual/en/java.examples-basic.php)

PHP has had a Java bridge for awhile now, but keep in mind it is experimental at best.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-05T14:31:19.463

如果您安装了 php cli，那么您可以执行您在此处编写的操作。只需使用 CLI 运行 php 文件。***************