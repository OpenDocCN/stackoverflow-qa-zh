# StackOverflow 问答 10500000-10500999

# django - 如何捕获和查看 JSON 响应？

> ID：10500000
> 
> 赞同：0
> 
> 时间：2012-05-08T13:53:14.870
> 
> 标签：django, django-serializer

我有以下视图，我从模型中获取数据，然后将其序列化为 JSON。

**视图.py**

```
def polling(request):
    if request.is_ajax():
        data = UserReview.objects.filter(movie_id=request.GET['m_id'])
        serializers.serialize('json', data)
        return HttpResponse(data, mimetype='application/json')
    else:
        raise Http404 
```

在客户端，我现在想显示此内容。我正在使用 jQuery 的函数`getJSON`来存档它。它不会显示任何内容，并且 setTimeout 也不起作用。但是当我用firebug调试它时我得到了一个响应，但是它并没有调用该`alert()`函数来查看数据。一段时间以来，我一直试图找出问题所在。所以我想知道我的脚本是否有问题？

**javascript**

```
function polling() {
    $.getJSON(  "/polling/", 
                {m_id: {{movie_info.id}} },
                function(data) {
                    alert(data)
                    setTimeout(polling, 5000)
                });
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:58:36.410

我对这一切都很陌生，但你有没有试过使用。

$.ajax ({

```
 url: "/Build/AllStatuses",
        dataType: 'json',
        success: function (buildstatuses) 
```

这就是我以前调用我的 json 的方式，它似乎有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:52:32.270

一些通用方法可以帮助您找出问题所在。

1.  `console.log`在前端非常自由地使用以确保一切按计划进行

2.  [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)评论中建议的回调函数，确保您至少记录一个错误

3.  [https://docs.djangoproject.com/en/dev/topics/logging/](https://docs.djangoproject.com/en/dev/topics/logging/)设置调试记录器，确保您可以看到正在发生的事情以及 django 实际上以 json 形式返回的内容。

4.  [http://docs.python.org/library/pdb.html](http://docs.python.org/library/pdb.html)最好将这个坏小子放在代码中的任何位置，并确保一切正常。如果你的成功没有在前端被调用，我敢打赌错误在 django 中！找出在哪里。

5.  您可以在 firebug 的 HTML 选项卡中查看错误，`debug=True`或者您可以`/polling/`通过浏览器请求并查看 django 错误屏幕。

使用其中的一些或任何一个应该可以让你在一个很好的地方解决你的问题 django dev server 使得解决这些错误变得非常容易 请做一些研究并找出许多可供你使用的调试工具！

# ruby - 如何从循环中捕获每个值并将其分配给数组？[红宝石]

> ID：10500016
> 
> 赞同：1
> 
> 时间：2012-05-08T13:53:53.323
> 
> 标签：ruby, arrays, loops, capture, fibonacci

我正在尝试从 Fibonacci 方法中捕获值并将其连接到一个数组。但是，它不是将循环中的每个值都分配给数组，而是仅返回最后一个值。有没有办法解决？谢谢你。

```
 def fib_up_to(max)
    i1, i2 = 1, 1
    while i1 <= max
        yield i1
        i1, i2 = i2, i1+i2
    end
end

def capture_arr(val)
    $a = []
    $a << val
end

fib_up_to(1000) do |f| 
    capture_arr(f)
end

p $a   # => [987] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T13:58:16.627

在`capture_arr`中，您在每次调用时将数组重置为空，然后再向其中添加元素。试试这个：

```
def capture_arr(val)
  $a ||= []
  $a << val
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:23:51.297

你必须试试这个

def fib_up_to(max)

i1, i2 = 1, 1

而 i2 <= 最大值

```
i1, i2 = i2, i1+i2 
```

结尾

i1

结尾

a = [fib_up_to(1000)]

帕

谢谢

# ios - Titanium 应用程序中的 iOS 原生功能

> ID：10500017
> 
> 赞同：1
> 
> 时间：2012-05-08T13:53:57.680
> 
> 标签：ios, ios4, titanium, titanium-modules, hybrid

我有一个 Titanium 应用程序，我想在其中放置几个​​使用 iPhone SDK（本机）开发的 UI 屏幕。

1.  Titanium 应用程序启动并在某些时候调用本机 UI 类，并且本机类继续导航。

2.  我也需要相应地来回切换。

3.  显然我需要在它们之间传递参数。

是否可以使用 iOS 模块开发来开发这些要求，可以在[iOS 模块开发 - Titanium中找到](http://docs.appcelerator.com/titanium/2.0/index.html#!/guide/iOS_Module_Development_Guide)

或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:12:17.890

除了在 Titanium 中重写您的 Obj-C 代码之外，创建自定义模块是执行此操作的唯一方法。

模块真的没那么难！您提供的链接是一个很好的起点，我还会[检查 moddevguide 示例模块](https://github.com/appcelerator/titanium_modules)，该模块充满了来回传递数据的示例。此外，paint 模块是继承 UIView 以滚动您自己的钛组件的一个很好的例子。

# java - 元素过期时具有信令功能的过期映射

> ID：10500018
> 
> 赞同：2
> 
> 时间：2012-05-08T13:53:58.147
> 
> 标签：java, data-structures, collections

如果存在的话，任何人都可以指出我`Ticking collection/Map`在 Java 中所说的一个好的实现。集合中的元素有一些过期时间。当集合的特定元素过期时，集合会引发某种警报或调用处理程序。

我看到了一个过期地图的番石榴实现，它自动删除已过期的密钥。

[即将到期的地图](https://stackoverflow.com/questions/3802370/java-time-based-map-with-expiring-keys)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T16:36:07.660

番石榴支持驱逐回调：

```
 Cache<String, String> cache = CacheBuilder.newBuilder()
            .expireAfterAccess(100, TimeUnit.SECONDS)
            .removalListener(new RemovalListener<Object, Object>() {
                public void onRemoval(RemovalNotification<Object, Object> objectObjectRemovalNotification) {
                    //do something
                }
            })
            .build(); 
```

# c# - 可点击的 Web 控件，ASP.NET

> ID：10500019
> 
> 赞同：2
> 
> 时间：2012-05-08T13:54:02.123
> 
> 标签：c#, asp.net, button, web-controls

如果您需要更多背景信息，这个问题与[我的最后一个问题有关。](https://stackoverflow.com/questions/10489552/creating-a-table-dynamically-with-multiple-lines-of-text-in-each-cell-and-each)

我的问题是：是否有可能使 asp.net 表格中的单元格可点击？

或者是否至少可以在 ASP.NET 中制作一个不是 Button 或 LinkBut​​ton 的可点击 WebControl（应该可以放置在 ControlCollection 中）？如果没有，是否可以将多行信息放入按钮文本中？

我尝试将其他组件添加到按钮的 ControlCollection （我已经看到在[Button](http://msdn.microsoft.com/en-us/library/system.windows.forms.button.aspx)的 Windows 窗体版本中工作），以查看是否可以将子组件呈现到按钮，但没有成功：

```
private void ModifyTableCell(TableCell cell)
{
    //Create new button
    Button btnCell = new Button();
    btnCell.Click += (sender, args) =>
    {
        //Event for the button
    };

    //Create new Label
    Label lblCell = new Label();
    lblCell.Font.Bold = true;
    lblCell.Text = "This text won't appear";

    btnCell.Controls.Add(lblCell); //Attempt to add label to Button
    cell.Controls.Add(btnCell);
} 
```

**编辑**：我最终只是为整个单元格创建了一个多行的 LinkBut​​ton。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T14:12:20.990

`onclick`通过分配属性并利用该`__doPostBack`功能，您应该能够使几乎任何控件都可点击。

```
ctrl.Attributes["onclick"] = string.Format("__doPostBack('{0}', '{1}');", ctrl.ClientID, "SomeArgument"); 
```

您也可以使用该`GetPostBackEventReference`方法。这个选项实际上更安全，因为它会注册`__doPostBack`它不存在的函数：

```
ctrl.Attributes["onclick"] = Page.ClientScript.GetPostBackEventReference(ctrl, string.Empty); 
```

然后，在代码隐藏中，您可以简单地覆盖该`RaisePostBackEvent`方法：

```
protected override void RaisePostBackEvent(IPostBackEventHandler source, string eventArgument)
{
    base.RaisePostBackEvent(source, eventArgument);

    if (eventArgument == "SomeArgument") //using the argument
    {
        //do whatever
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:13:11.300

您可以使用字符串生成器向 asp.net 按钮添加多行，例如：

```
System.Text.StringBuilder buttonText = new System.Text.StringBuilder();
buttonText.AppendLine("first line");
buttonText.AppendLine("second line");
btnMultiline.Text = buttonText.ToString; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T14:25:29.300

我不确定您如何想象这样的复合控件会被呈现。请记住，每个 ASP.NET 控件最终都会输出 HTML。You Button 基本上输出一个

```
<input type="button">The button text</input> 
```

如果您想在`<input>`标签内放置任何其他内容，则它必须与 HTML 兼容。我不确定输入标签是否允许在其中使用其他 HTML。

另一方面，如果它是 LinkBut​​ton，则生成的 HTML 标记是一个`<a href="">`标记。你可以在那里放任何东西，如果你愿意的话，甚至是一张图片，它会变成可点击的。

我不确定您的完整方案是什么，但是您尝试做的事情闻起来很糟糕。我建议您使用 LinkBut​​ton 或重新考虑您的方法，只要记住 HTML 的最终输出是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T14:41:21.050

在阅读您的两个帖子时，您似乎希望能够单击单元格中的任何内容并将其回发，就好像整个单元格是一个按钮一样？

如果是这样，其中一种相当简单的方法是构建您的单元格内容，就像您不尝试回发时一样。然后添加一个样式为`display:none;`. 然后，您可以使用客户端脚本来捕获单元格的单击事件，并引发按钮的单击事件以导致回发。

这允许您以您喜欢的任何方式创建单元格内容，并且会自动为您生成回发代码和处理程序。

使用 JQuery，您最终会得到以下内容：

```
<head runat="server">
    <style>
        input.ClickableCellButton
        {
            display: none;
        }
    </style>
</head>
<body>
    <form id="form1" runat="server">
    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("td.ClickableCell").click(function (event) { $(event.target).children("input.ClickableCellButton").click() });
        });
    </script>
    <div>
        <table>
            <tbody>
                <tr>
                    <td class="ClickableCell">
                        Cell Contents<br />
                        on multiple lines
                        <asp:Button ID="Button1" runat="server" Text="Button" CssClass="ClickableCellButton"
                            OnClick="Button1_Click" />
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    </form>
</body> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-08T14:33:24.137

> 如果没有，是否可以将多行信息放入按钮文本中？

对于这种特殊情况，您只能通过 CSS 完成此操作；无需扩展按钮：

```
<asp:button id="myMultilineButton" runat="server" style="width:60px; white-space: normal;" Text="Several lines of text" /> 
```

它将呈现为：

![在此处输入图像描述](../Images/4a2e67e8a4200a02293c925118e24e16.png)

# sql - 如何使用“+”运算符在 ORACLE 中执行 FULL OUTER JOIN？

> ID：10500020
> 
> 赞同：16
> 
> 时间：2012-05-08T13:54:09.097
> 
> 标签：sql, oracle

除了使用 FULL OUTER JOIN 或 FULL JOIN 之类的关键字，如何在“+”运算符的帮助下使用“where”子句执行完全外部连接？！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-08T13:59:47.603

你不能（至少直接）。Oracle 仅支持使用 SQL:1999 语法的完全外连接。

您可以通过联合两个外部联接来伪造它：

```
select a.field1, b.field2
from table_a a, table_b b
where a.id = b.id(+)
union all 
select a.field1, b.field2
from table_a a, table b b
where a.id(+) = b.id
      and a.id is null 
```

使用 SQL:1999 语法更具可读性：

```
select a.field1, b.field2
from table_a a full outer join table_b b
on a.id = b.id 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T15:09:50.120

这是一个示例，您也可以在 oracle 中运行以查看结果。

```
with 
a as 
   (select 'A' tbl, level id from dual connect by level < 1000),
b as 
   (select 'B' tbl, level + 500 id from dual connect by level < 1000)
select a.tbl, a.id, b.tbl, b.id from a, b where a.id = b.id(+)
union all
select a.tbl, a.id, b.tbl, b.id from a, b where a.id(+) = b.id and a.id is null 
```

是相同的：

```
with 
a as 
   (select 'A' tbl, level id from dual connect by level < 1000),
b as 
   (select 'B' tbl, level + 500 id from dual connect by level < 1000)
select a.tbl, a.id, b.tbl, b.id from a full outer join b on a.id = b.id 
```

# c# - Silverlight SDK 日期选择器未将所选日期重置为今天

> ID：10500022
> 
> 赞同：3
> 
> 时间：2012-05-08T13:54:09.407
> 
> 标签：c#, silverlight, datepicker

我对 a 有以下定义`DatePicker`：

```
<sdk:DatePicker x:Name="dtpStartDate"
                Grid.Row="4"
                Grid.Column="1"
                SelectedDateFormat="Short"
                SelectedDate="{Binding MyObject.StartDate, Mode=TwoWay, NotifyOnValidationError=True}"/> 
```

`MyObject`是一个包含`StartDate`被定义为 nullable的类`DateTime`。

```
class MyObjectClass
{
    ....
    public DateTime? StartDate { get; set; }
    ....
} 
```

我正在使用 MVVM（通过 Prism）并`MyObject`正确绑定。

我第一次显示此视图时，日期是空白的（如预期的那样），当我单击选择器时，会显示日历并突出显示今天的日期。

如果我选择一个日期（今天除外）或显示一条填写了日期的记录，那么当我清空表单以创建新对象时：

```
this.MyObject = new MyObjectClass(); 
```

单击选择器时突出显示的日期是先前选择的日期。

因此，如果记录显示“2009 年 5 月 1 日”，那将在选择器中突出显示。我可以设置`StartDate`正确`DateTime.Today`显示的日期，但确实意味着日期以我不想要的形式显示。

那么，为什么不将日期设置为 null 将选择器中的选定日期重置为今天？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:55:07.680

解决方案是重置`DisplayDate`属性`DatePicker`：

```
 this.SelectedDateChanged += (s, e) =>
        {
            if (this.SelectedDate == null)
            {
                this.DisplayDate = DateTime.Today;
                this.Text = string.Empty;
            }
        }; 
```

*要添加这个功能，我们必须继承`DataPicker`它。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T18:51:01.337

不确定您是否只是在问题中忽略了这一点，但如果您希望在 UI 上显示编程更改，您的 ViewModel 和 MyObjectClass 应该实现 INotifyPropertyChanged。具体来说，VM 的 MyObject 属性和 MyObjectClass StartDate 属性设置器应该触发 PropertyChanged 事件。

# c# - nHibernate QueryOver 以编程方式构建？

> ID：10500025
> 
> 赞同：1
> 
> 时间：2012-05-08T13:54:27.037
> 
> 标签：c#, asp.net, nhibernate, queryover

你好，有没有一个选项可以从代码中以编程方式从 nhibernate 构建查询？

我不知道会有多少限制，我正在构建自动生成多少个表，这些表将从对象列表中进行查询。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T06:49:21.377

如果您在谈论动态限制，那么您可以这样做：

```
var query = _session.QueryOver<Something>();
if(someterm!=null)
   query.Where(x=>x.SomeTerm==someTerm);

if(someotherterm!=null)
   query.Where(x=>x.SomeOtherTerm==someotherterm);

var results = query.List(); 
```

如果您需要喜欢，您甚至可以动态加入：

```
if(something!=null){
  SomeReference srAlias = null;
  query.JoinAlias(x=>x.SomeReference,()=>srAlias, JoinType.LeftOuterJoin)
       .Where(x=>srAlias.Something==something);
} 
```

# oracle - 用于生产的 oracle user_constraints、user_tables 等视图

> ID：10500031
> 
> 赞同：1
> 
> 时间：2012-05-08T13:54:43.760
> 
> 标签：oracle, oracle11g

可以在生产中使用该视图吗？我的意思是，如果对字典的查询是为了经常被调用，或者它是为非常罕见的使用而设计的，比如 sql navigator、sql developer 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:41:19.000

这取决于您对“频繁”的定义、数据库中这些对象的大小以及您需要查询它们的原因。

一般来说，在生产中定期查询数据字典表是可以的——例如，大量的数据库监控工具会定期查询一堆数据字典表来收集性能数据。但是，与此同时，您可以轻松地配置这些工具中的大多数，通过过于频繁地收集太多数据给您的数据库带来巨大的负载，从而使您的性能监控工具成为性能问题的根源。通常，您只需回拨捕获的数据量和捕获数据的频率即可获得 99% 的监控收益，而不会产生大量问题。

我不确定为什么任何工具会经常需要查询`user_tables`——因为在适当的系统中不会在运行时创建或销毁表，所以你真的需要查询该特定视图的理由并不多。经常这样。

# arrays - 我可以使用字符串数组作为记录集中的键吗？

> ID：10500035
> 
> 赞同：1
> 
> 时间：2012-05-08T13:55:06.007
> 
> 标签：arrays, ms-access, vba

我在 Access 数据库中有这个小的 VBA 脚本。我想做一些现场比较。在其他语言中，我可以创建一个键数组，然后使用 for..each 循环来测试每个键。像这样的东西：

```
string[] myKeys = { "key1", "key2", "key3" };
foreach(string myKey in myKeys)
{
    if(myRecordset!myKey == myTable!myKey) DoSomething()
} 
```

我在 VBA 中尝试过，但它给了我运行时错误“3265”：使用以下代码时在此集合中找不到项目：

```
For Each myKey In myKeys
    If Not IsNull(myR![myKey]) Then Me.Recordset![myKey] = myR![myKey]
Next myKey 
```

我在 VBA 中尝试做的事情甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:35:48.877

如果要引用名称存储在变量中的字段的值`myKey`，请使用此...

```
myR.Fields(myKey) 
```

无论您的记录集是 DAO 还是 ADO 对象，这都会起作用。

错误 3265，“在此集合中找不到项目”，不是对数组的抱怨。它告诉您您的记录集没有字面名称为“myKey”的字段。也许这段代码会让它更清晰。它可以正常工作，没有错误。取消注释前 2`Debug.Print`行中的任何一个都将触发错误 3265。

```
Public Sub foo()
    Const myKey As String = "id"
    Dim db As DAO.Database
    Dim rs As DAO.Recordset
    Dim strSelect As String
    strSelect = "SELECT id FROM MyTable;"
    Set db = CurrentDb
    Set rs = db.OpenRecordset(strSelect)
    'Debug.Print rs![myKey]
    'Debug.Print rs!myKey
    Debug.Print rs.Fields(myKey)
    rs.Close
    Set rs = Nothing
    Set db = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:30:57.753

不知道你想在这里做什么。“key1”是字段名还是值？当您编写 myR![myKey] 时，myKey 是一个字段名。

如果它应该是一个值，那么你会得到错误。例如，如果“key1”、“key2”、“key3”是员工 ID 号（比如 10、20 和 30），那么您尝试做的是询问 IsNull(myR![10])，因为没有字段名为 10，它给出了一个错误。

希望这可以帮助。

# cakephp - 多语言 cms 的 Cakephp 路由

> ID：10500036
> 
> 赞同：1
> 
> 时间：2012-05-08T13:55:15.510
> 
> 标签：cakephp, routes, custom-routes

我正在尝试在 Cakephp 中创建一个可以有任何前缀的路由。但我也希望管理员路由正常工作。在这种情况下，前缀将是一种语言。Route 必须使用 action: index 链接到名为 front 的控制器。

网址应如下所示 www.domain.com/eng/the/rest/of/the/url_12 或 www.domain.com/nl/the/rest/of/the/url_12

这就是我所拥有的，这意味着我必须为每种语言创建一条路线，这不是我想要的。

```
Router::connect('/', array('controller' => 'front', 'action' => 'index'));
Router::connect('/admin', array('controller' => 'cms', 'action' => 'index', 'admin' => true));
Router::connect('/nl/*', array('controller' => 'front', 'action' => 'index')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T04:17:07.140

你可以使用这个：

```
Router::connect('/:i10n/:controller', array('action' => 'index'), array('i10n' => '[a-z]{2}'));
Router::connect('/:i10n/:controller/:action/*', array(), array('i10n' => '[a-z]{2}')); 
```

# java - 使用 JavaTreeProfiler

> ID：10500039
> 
> 赞同：0
> 
> 时间：2012-05-08T13:55:18.553
> 
> 标签：java, linux, profiler, jtree

我想使用 javaTreeeProfiler 来分析我的简单 java 程序。我想将它与 32 位 linux 一起使用。我从[http://sourceforge.net/projects/jcoverage/](http://sourceforge.net/projects/jcoverage/)下载了它 。自述文件说“要运行分析器，请将 libjprofiler.so 复制到动态加载器可以找到的位置。” 谁能告诉我这是什么意思？我应该在哪里复制该 libjrofiler.so 文件？我试图建立它。它显示构建成功消息，但我没有看到任何调用树。我试图用我的简单应用程序运行它，但这也没有用。它说 ：

```
Error occurred during initialization of VM
     [java] Could not find agent library jprofiler on the library path, with error: libjprofiler.so: cannot open shared object file: No such file or directory
     [java] Java Result: 1 
```

有人可以指导我如何使用此分析器运行简单的 java 程序吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:09:38.980

JTreeProfiler 是一个相当古老的项目。现在 JDK 中包含了[jvisualvm](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/index.html)，它内置了[出色的分析器](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/profiler.html)。

# php - 从日期（'z'）和年份获取时间戳

> ID：10500045
> 
> 赞同：6
> 
> 时间：2012-05-08T13:56:02.077
> 
> 标签：php, date, timestamp, strtotime

我知道年份和日期（0-365）。有没有办法从它恢复到时间戳？

就像是：

```
$day=date('z');
$year=2012;

$timestamp=strtotime($day.'-nd day of '.$year); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T14:07:18.090

尝试以下操作：

`$timestamp = mktime(0,0,0,1,$day,$year);`

它将生成时间设置为 0:00:00 的时间戳。（我不确定它在夏令时方面是否会正确运行......）

查看 PHP 手册了解更多详情：[PHP: mktime - Manual](http://php.net/manual/en/function.mktime.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T14:06:06.360

也许 strtotime 在这里很方便： `php -r 'echo @date("Y-m-d H:s", strtotime("january 2012 +200 day")).PHP_EOL;'` 在你的例子中`$timestamp = strtotime("january $year +$day day");`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T14:05:26.953

尝试使用[createFromFormat](http://www.php.net/manual/en/datetime.createfromformat.php)：

```
$date = DateTime::createFromFormat('z Y', $day . ' ' . $year);
echo $date->getTimestamp(); 
```

# database - oracle 内部连接上的标识符无效

> ID：10500048
> 
> 赞同：2
> 
> 时间：2012-05-08T13:56:16.100
> 
> 标签：database, oracle, oracle11g

我遇到错误 ORACLE: ORA-00904: Invalid Identifier on：

```
and l.cd_pergunta = e.cd_pergunta 
```

无效标识符是 'e'，cd_pergunta 的前缀...

当我执行此查询时：

```
select count(*)
  from TEACEITE e
 inner join TEREGETA re on re.cd_etapa = e.cd_etapa
                       and re.id_reg_neg = 1.00000000
 where e.obrigatorio = 1
   and not exists
 (select 1
          from GESESSAO s
         inner join GERESPOS r on r.sessao = s.sessao_resp
                              and r.resposta_log = 1
         inner join GEEPE l on l.cd_quest = s.cd_quest
                           and l.ord_perg = r.ord_pergunta
                           and l.cd_pergunta = e.cd_pergunta
         where s.cd_quest = e.cd_quest
           and s.item = e.cd_etapa
           and s.origem = 'GC'
           and s.os_nf_orc_cont = 1.00000000) 
```

任何的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T14:08:43.383

问题是别名 e 在嵌套选择中不可用，因此是“无效标识符”。您可以尝试重写查询，使条件`s.cd_quest = e.cd_quest and s.item = e.cd_etapa`成为主选择的一部分，而不是嵌套选择。

编辑：我尝试了一些场景，问题是在嵌套查询的连接解析期间别名 e 不可用。看起来您不能在内部查询的连接条件中引用外部表别名。

我相信以下将起作用

```
 select count(*)
  from TEACEITE e
 inner join TEREGETA re on re.cd_etapa = e.cd_etapa
                       and re.id_reg_neg = 1.00000000
 where e.obrigatorio = 1
   and not exists
 (select 1
          from GESESSAO s
         inner join GERESPOS r on r.sessao = s.sessao_resp
                              and r.resposta_log = 1
         inner join GEEPE l on l.cd_quest = s.cd_quest
                           and l.ord_perg = r.ord_pergunta
         where l.cd_pergunta = e.cd_pergunta
           and s.cd_quest = e.cd_quest
           and s.item = e.cd_etapa
           and s.origem = 'GC'
           and s.os_nf_orc_cont = 1.00000000) 
```

虽然此查询可能有效，但我不确定它是否完成了您想要的，请确保您的业务逻辑也得到照顾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T04:36:37.970

正如 Raam 所说，您不能在子查询的连接中使用别名 e。
您也可以尝试不使用 sql1999 语法进行连接：

```
select count(*)
  from TEACEITE e
 inner join TEREGETA re on re.cd_etapa = e.cd_etapa
                       and re.id_reg_neg = 1.00000000
 where e.obrigatorio = 1
   and not exists
 (select 1
    from GESESSAO s, GERESPOS r , GEEPE l 
   where r.sessao = s.sessao_resp
     and r.resposta_log = 1
     and l.cd_quest = s.cd_quest
     and l.ord_perg = r.ord_pergunta
     and l.cd_pergunta = e.cd_pergunta
     and s.cd_quest = e.cd_quest
     and s.item = e.cd_etapa
     and s.origem = 'GC'
     and s.os_nf_orc_cont = 1.00000000) 
```

# magento - 加拿大邮政编码范围 Magento 的税率

> ID：10500054
> 
> 赞同：1
> 
> 时间：2012-05-08T13:56:28.080
> 
> 标签：magento, zip, alphanumeric

我想为字母数字的加拿大邮政编码范围添加税率。当我尝试添加税率时，它给了我无效的邮政编码错误。如何为税率添加字母数字邮政编码范围？

下面给出示例。

国家/地区邮政编码率邮政编码是范围范围从范围到默认值 CA 12.5 1 A0A1A0 A0A1C0
CA 65 1 A0A1E0 A0A1E0
CA 12.5 1 A0A1G0 A0A1K0
CA 65 1 A0A1L0 A0A1M0
CA 12.5 1 A0A1N0 A0A1P0
CA 65 1 A0A1R0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:31:23.310

看看这篇文章： http: [//www.magentocommerce.com/boards/viewthread/235224/#t363765](http://www.magentocommerce.com/boards/viewthread/235224/#t363765)

请注意，由于 OP 的要求，第一个代码段不允许在美国境外发货。他在之后发布了后续代码，允许国际运输。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:02:56.533

首先，这是一种丑陋的做法，正确的做法是编写一个覆盖此功能的模块。
到 app/code/core/Mage/Adminhtml/Block/Tax/Rate/Form.php
找到上面的：（对我来说它从第 155 行开始）

```
 $fieldset->addField('zip_from', 'text',
        array(
            'name' => 'zip_from',
            'label' => Mage::helper('tax')->__('Range From'),
            'value' => $rateObject->getZipFrom(),
            'required' => true,
            'class' => 'validate-digits'
        )
    );

    $fieldset->addField('zip_to', 'text',
        array(
            'name' => 'zip_to',
            'label' => Mage::helper('tax')->__('Range To'),
            'value' => $rateObject->getZipTo(),
            'required' => true,
            'class' => 'validate-digits'
        )
    ); 
```

将**validate-digits**更改为**required-entry**，因此变为：

```
 $fieldset->addField('zip_from', 'text',
        array(
            'name' => 'zip_from',
            'label' => Mage::helper('tax')->__('Range From'),
            'value' => $rateObject->getZipFrom(),
            'required' => true,
            'class' => 'required-entry'
        )
    );

    $fieldset->addField('zip_to', 'text',
        array(
            'name' => 'zip_to',
            'label' => Mage::helper('tax')->__('Range To'),
            'value' => $rateObject->getZipTo(),
            'required' => true,
            'class' => 'required-entry'
        )
    ); 
```

***注意***：邮政编码限制为**10 个字符**长（如所述）
app/code/code/Mage/Tax/Model/Calculation/Rate.php (line74)

```
$zipFrom = (strlen($this->getZipFrom()) > 10) ? substr($this->getZipFrom(), 0, 10) : $this->getZipFrom();
$zipTo   = (strlen($this->getZipTo()) > 10) ? substr($this->getZipTo(), 0, 10) : $this->getZipTo(); 
```

# asp.net - 我从 asp.net 发送没有任何错误...但是 html 模板未在邮件中查看..它仅显示下载选项

> ID：10500055
> 
> 赞同：0
> 
> 时间：2012-05-08T13:56:34.170
> 
> 标签：asp.net, wcf, c#-4.0

实际上邮件（html模板）是从asp.net发送的，没有任何错误......但是html模板没有在邮件中查看......它只显示下载选项......

代码是..

```
string strMailContent = "Welcome new user";

string cid = "banner.jpg";
string path = Server.MapPath(@"images/banner.jpg"); // my logo is placed in images folder
MailMessage mailMessage = new MailMessage();
MailAddressCollection addcoll = new MailAddressCollection();
addcoll.Add("kollihari1209@gmail.com");
addcoll.Add("kollihari1209@gmail.com");
mailMessage.From = addcoll[0];
mailMessage.To.Add(addcoll[1]);
mailMessage.Subject = "Welcome new User";
LinkedResource logo = new LinkedResource(path);
logo.ContentId = "banner";

AlternateView av1 = AlternateView.CreateAlternateViewFromString("<html><body><img src=cid:companylogo/>     <br></body></html>" + strMailContent, null, MediaTypeNames.Text.Html);
av1.LinkedResources.Add(logo);
mailMessage.AlternateViews.Add(av1);
mailMessage.IsBodyHtml = true;
SmtpClient mailSender = new SmtpClient(); 
mailSender.Host = "smtp.gmail.com";
mailSender.Port = 587; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:00:30.377

您已在 html`body`标记的末尾添加了文本。它必须在体内。

# multithreading - 在 JVM 应用程序中拥有许多线程会很昂贵吗？

> ID：10500058
> 
> 赞同：7
> 
> 时间：2012-05-08T13:56:52.980
> 
> 标签：multithreading, scala, jvm, actor

我目前正在学习 Scala 中的演员。本书推荐使用`react`方法而不是`receive`，因为它允许系统使用更少的线程。

我已经阅读[了为什么创建线程很昂贵](https://stackoverflow.com/questions/5483047/why-is-creating-a-thread-said-to-be-expensive)。但是，一旦你有了线程（在初始化之后应该为 Scala 中的演员系统保留），让它们周围存在代价高昂的原因是什么？

主要是内存消耗吗？还是有其他原因？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T14:03:31.383

使用多个线程*可能*比您预期的要昂贵，因为：

*   每个线程都消耗堆外的内存，这限制了 JVM 可以创建多少线程；
*   从一个线程切换到另一个线程会消耗一些 CPU 时间，因此如果您有可以在单个线程中执行的活动，您将节省 CPU 周期；
*   如果有更多线程，则有 JVM 调度程序有更多工作要做。同样适用于底层操作系统调度程序；
*   最后，在 CPU 密集型任务中使用比 CPU 内核更多的线程毫无意义，使用比 I/O 活动（例如，网络客户端）更多的 I/O 线程也毫无意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T14:02:24.457

除了周围有线程的内存开销（可能很小也可能不小），周围有更多线程通常还意味着调度将有更多的元素需要考虑，以便选择哪个线程将获得 CPU下一个。

一些操作系统/JVM 也可能对可以同时存在的线程数量有限制。

最终，它是小额间接费用的积累，最终可能占很大比例。而且这些都不是 Java 特有的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T14:04:14.063

有线程并不“昂贵”。当然，这有点取决于我们在这里谈论的数量。我怀疑数十亿个线程会是个问题。我认为一般来说，拥有很多线程被认为是昂贵的，因为你可以做更多的并行工作，所以 CPU 上升，内存上升等等......但如果它们得到正确管理（例如池化以保护系统资源），那么没关系。JVM 不一定使用本机线程，因此 Java 线程不一定映射到 OS 本机线程（例如，查看绿色线程或轻量级线程）。在我看来，JVM 中的线程没有隐含的成本。成本来自于糟糕的线程管理和不小心分配资源而过度使用资源。

# asp.net - 调用 WindowsIdentity.Impersonate 什么都不做

> ID：10500064
> 
> 赞同：0
> 
> 时间：2012-05-08T13:57:18.587
> 
> 标签：asp.net, iis-7.5, impersonation

我正在使用以下[Microsoft 示例](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsimpersonationcontext.aspx)。每次 WindowsIdentity 实例调用 .Impersonate() 时，什么都没有发生。没有错误，没有模仿。
在调用前后，当前身份始终是 AppPool 身份。
我还尝试了在网上找到[的另一个示例 Impersonator 类](http://blog.shynet.nl/post/2008/08/08/Impersonator.aspx)，并且发生了同样的事情。

我对这些示例所做的唯一修改是在 LogOnUser 调用中将 LOGON32_LOGON_INTERACTIVE 更改为 LOGON32_LOGON_NETWORK，因为使用 Interactive 总是返回 0 错误。

这是一个在 Win2k8 服务器上运行的 ASP.NET 4.0 应用程序，试图模拟 AD 中的用户。

**编辑：** 我最初没有提到这一点，但我修改了 Microsoft 示例并将其变成了一个类，以便我可以从我的 ASP.NET 应用程序中获得它。我也有`impersonate=true`web.config。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:07:28.960

我最终找到了一个助手类，几年前我做过类似的事情。助手实现 IDisposable，因此只需将文件访问代码包装在“使用”中，如下所示：-

```
using (Impersonate imp = new Impersonate())
{
    // Code in here will run under the identity specified in the helper
} 
```

这是帮助程序类的代码（我删除了“使用”以节省一些空间）。您会注意到用户帐户在构造函数中是硬编码的：

```
internal class Impersonate : IDisposable
{
    private const int LOGON32_LOGON_INTERACTIVE = 2;
    private const int LOGON32_PROVIDER_DEFAULT = 0;

    private bool _disposed = false;
    private WindowsImpersonationContext _context = null;

    [DllImport("advapi32.dll")]
    private static extern int LogonUserA(String lpszUserName, String lpszDomain, String lpszPassword, int dwLogonType, int dwLogonProvider, ref IntPtr phToken);
    [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern int DuplicateToken(IntPtr hToken, int impersonationLevel, ref IntPtr hNewToken);

    [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern bool RevertToSelf();

    [DllImport("kernel32.dll", CharSet = CharSet.Auto)]
    private static extern bool CloseHandle(IntPtr handle);

    internal Impersonate()
    {
        WindowsIdentity tempWindowsIdentity;
        IntPtr token = IntPtr.Zero;
        IntPtr tokenDuplicate = IntPtr.Zero;

        string domain = "<whatever>";
        string username = "<whatever>";
        string password = "<whatever>";

        try
        {
            if (RevertToSelf())
            {
                if (LogonUserA(username, domain, password, LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT, ref token) != 0)
                {
                    if (DuplicateToken(token, 2, ref tokenDuplicate) != 0)
                    {
                        tempWindowsIdentity = new WindowsIdentity(tokenDuplicate);
                        _context = tempWindowsIdentity.Impersonate();
                    }
                }
            }
        }
        finally
        {
            if (token != IntPtr.Zero)
            {
                CloseHandle(token);
            }

            if (tokenDuplicate != IntPtr.Zero)
            {
                CloseHandle(tokenDuplicate);
            }
        }
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    private void Dispose(bool disposing)
    {
        if (!_disposed)
        {
            if (disposing)
            {
                // Dispose any managed resources here.
            }

            // Stop the impersonation.
            _context.Undo();

            _disposed = true;

        }
    }
} 
```

试一试，让我知道你的进展如何......

安德鲁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:10:47.030

您链接的示例适用于控制台应用程序。如果您有一个 ASP.Net Web 应用程序，您希望您的代码在访问者的安全上下文中执行，您可以在 IIS 身份验证设置中启用 ASP.Net 模拟（在 IIS 管理器 MMC 管理单元中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T17:37:08.183

为用户组授予对 App_Data 文件夹的写入权限解决了该问题。不确定这与模仿有什么关系。

# java - 如何通过按下按钮执行代码？JSP

> ID：10500068
> 
> 赞同：-5
> 
> 时间：2012-05-08T13:57:29.210
> 
> 标签：java, jsp, button

我有jsp页面和html表单，上面有按钮。如果这段代码写在这个jsp页面上，如何通过按下按钮来执行java代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:34:05.680

首先，当用户按下一个按钮时，它在前端，而不是后端，所以当用户按下按钮时，它应该通过http协议调用一个请求，当服务器接受这个请求时，它可以调用你的java代码，但我认为你不能以你的方式做！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T22:09:00.817

您将无法在浏览器中执行任何 java 代码。JavaScript，是的，但不是 Java。如果您需要回调您的 java 代码，请设置一个 servlet 或另一个 JSP（或者如果您使用 Web 框架则更好）并让您的 JavaScript 使用一个`XMLHttpRequest`对象（例如 Ajax / Asynchronous JavaScript ）回调该 servlet和 XML）。

网上有很多信息可以帮助您入门。您还可以使用有助于简化客户端的 JavaScript 框架。流行的例子包括 jQuery、Mootools、Prototype 等等。

# wordpress - 在哪里为自定义档案输入自定义字段 meta_key？

> ID：10500070
> 
> 赞同：0
> 
> 时间：2012-05-08T13:57:40.937
> 
> 标签：wordpress, custom-fields

我有一个名为 books 的 post_type，它有作者姓名、出版商姓名等的自定义字段。

我想创建出版商或作者分组的页面。例如，“企鹅”或“麦格劳山”。例如，当用户从 Publisher 下拉菜单中单击“Penguin”时，她应该会看到 Penguin 的所有书籍。

为此，我想尝试这样的查询：

```
 $args = array(
        'meta_key' => 'publisher'
        ,'meta_key_value' => 'Penguin'
        ,'taxonomy' => 'book'
        ,'orderby' => 'date'
        ,'posts_per_page' => 48
        ,'paged' => get_query_var('page')
    );

    $my_query = new WP_Query( $args ); 
```

我的问题是：我应该把这个查询放在哪里？在“category.php”还是“archive.php”？标题中的链接会是什么样子？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:08:26.173

两者都不。你应该把它放在'archive-book.php'中。您可以使用[get_post_type_archive_link](http://codex.wordpress.org/Function_Reference/get_post_type_archive_link)生成链接，并且您的链接（没有漂亮的永久链接）看起来像“？post_type = book”。

您还应该像这样设置查询：

```
$args = array(
    'meta_key' => 'publisher',
    'meta_key_value' => 'Penguin',
    'post_type' => 'book',
    'orderby' => 'date',
    'posts_per_page' => 48,
    'paged' => get_query_var('page')
);

$my_query = new WP_Query( $args ); 
```

在您的情况下，“书”不是分类法，而是自定义帖子类型。让我知道这是否有帮助。

# javascript - 配置从 node_modules 读取的 requirejs

> ID：10500073
> 
> 赞同：17
> 
> 时间：2012-05-08T13:57:46.943
> 
> 标签：javascript, node.js, coffeescript, requirejs, node-modules

我正在尝试设置一个 nodejs 项目以使用 requirejs。我调用我的程序，`node r.js ./config/main.js`我的 main.js 如下所示：

```
var cs = require("coffee-script");
var requirejs = require("requirejs");

requirejs.config({
  nodeRequire: require,
  baseUrl: ".",
  paths: {
    cs: "cs",
    CoffeeScript: "CoffeeScript",
    csBuild: "csBuild",

    express: "express",
    nohm: "nohm",
    redback: "redback",
    _: "underscore",
    "connect-redis": "connect-redis",
    freebase: "freebase"
   }
});

console.log("hetet");
requirejs(["cs!./config/app"], function(app){
  console.log("closing")
}); 
```

在 app.coffee 里面：

```
define((require) ->

  express = require("express")

  RedisStore = require("connect-redis")(express)
  app = express.createServer()

  config = require('cs!./config')

  require('cs!./setup')(app, express, RedisStore)
  require('cs!./routes')(app)
  require('cs!../src/server')

  app.listen(config.server.port)
) 
```

我似乎在 main.js 中失败并出现错误：

```
node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
Error: Calling node's require("config") failed with error: Error: Calling node's require("config") failed with error: Error: Cannot find module 'config' 
```

我注意到的是，当我注释掉该行`var requirejs = require("requirejs");`（在 main.js 中）时，我走得更远并在该行`RedisStore = require("connect-redis")(express)`（在 app.coffee 中）失败并出现错误：

```
node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
TypeError: undefined is not a function
    at ./config/app.coffee:10:41 
```

我在节点中配置 requirejs 时遇到了很多麻烦，任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2012-05-10T17:28:21.973

最好不要将 requirejs 配置为查看 node_modules，因为该区域中的模块是针对 node 格式化的模块。[requirejs 节点页面](http://requirejs.org/docs/node.html#2)中有更多信息。

# php - Codeigniter 2 良好实践

> ID：10500074
> 
> 赞同：-3
> 
> 时间：2012-05-08T13:57:51.607
> 
> 标签：php, codeigniter, codeigniter-2

我决定在 CI 2 中完成所有新代码/功能。我是 CI 中的一个完整的菜鸟。您推荐的操作和字体是什么。还有什么是用 CI 调用现有代码的最佳方法。旧代码只是普通的 PHP，在一些地方带有类/函数。

还让我知道在开始之前我需要阅读什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:01:41.170

为了重新使用您的旧代码 - 使用 CI 库。但请注意，您可能需要更改旧代码中的一些内容才能使其正常工作。 [http://codeigniter.com/user_guide/general/libraries.html](http://codeigniter.com/user_guide/general/libraries.html)

我强烈建议您通读整个（或至少部分）CI 手册/用户指南。

在开始使用 CI 之前，您可能需要通读此内容。它有一些优点。 [http://codeigniter.com/user_guide/general/styleguide.html](http://codeigniter.com/user_guide/general/styleguide.html)

在相关的说明中 - 您可能需要先通读 PHP 手册 OOP 部分。也许谷歌'MVC架构'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:00:29.097

从用户指南开始：[Codeigniter 用户指南](http://codeigniter.com/user_guide/)。花几天时间浏览所有主题。或者您可以下载 Codeigniter 并在本地浏览用户指南。然后开始开发像 CRUD 这样的小型应用程序，并添加更多您已经使用过的功能。

# c - 我应该缓存 dlsym 的返回值吗？

> ID：10500079
> 
> 赞同：2
> 
> 时间：2012-05-08T13:58:05.427
> 
> 标签：c, performance, posix, dynamic-linking, dlsym

我正在使用 POSIX `dlopen`/ `dlsym`API 在运行时加载动态库，然后按名称从这些库中调用函数。

`dlsym`在性能方面存储某处的结果是一个好主意吗？或者 dlsym 是否已经进行了自己的缓存，并且添加另一层是无用的甚至是有害的？函数可能会被调用很多次，但我真的没有办法提前知道哪些函数，或者调用它们的频率。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:04:44.447

该`dlsym`函数不做任何缓存。它只是访问 ELF 符号表（使用它的哈希表，实现得不是很好）。

我认为您应该避免`dlsym`多次调用相同的名称和库（例如数百万次）。

您可能会使用惰性技术：将`dlsym`调用中使用的名称和库（在某些结构或类中）与`dlsym`-ed 函数指针放在一起，并且`dlsym`仅在该指针为空时调用。

您可能还希望尽快发现`dlsym`故障。

FWIW，你可以打电话`dlopen`很多`dlsym`次。特别是，您可以在 Linux 上拥有成千上万个`dlopen`-ed 共享库，正如我的[manydl.c](http://starynkevitch.net/Basile/manydl.c)示例所示。`dlclose`但是，如果您仍然有一些`dlsym`-ed 函数内部的活动调用框架，请避免使用库。实际上，您可能永远不会调用`dlclose`并且您的程序仍然可以工作（有轻微的进程地址空间泄漏）。

# java - 如何为 Restful 客户端代码示例进行 TDD

> ID：10500082
> 
> 赞同：2
> 
> 时间：2012-05-08T13:58:09.397
> 
> 标签：java, rest, tdd, resteasy, rest-client

我之前做过一些 TDD，但它们只是简单明了。

但是，我将实现一个 RESTful 客户端并调用第三方（Twitter 或 Jira）的一个 RESTful API。

我使用 Resteasy 客户端框架来实现它。代码是：

```
public void invokePUT() {
     ClientRequest request =
                 new ClientRequest("http://example.com/customers");
     request.accept("application/xml");
     ClientResponse<Customer> response = request.put(Customer.class); 
     try {
          if (response.getStatus() != 201)
               throw new RuntimeException("Failed!");
     } finally {
          response.releaseConnection(); 
     }} 
```

如果我想为这个方法写一个测试（应该在实现这个方法之前写测试），我应该写什么样的代码。

对于 GET，我可以测试返回的实体是否等于我的预期实体，对于 POST，我可以测试创建的实体的 id 不为空。

但是 PUT 和 DELETE 怎么样。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:38:49.243

尝试使用[REST Assured](https://github.com/jayway/rest-assured)测试框架。它是测试 REST 服务的绝佳工具。在他们的网站上，您会找到大量如何使用它的示例。只需将它与 JUnit 或 TestNG 一起使用来检查断言即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:04:07.340

如果按预期调用 put 和 delete （使用预期参数等），我将注入测试的模拟类。easymock 或类似的东西对此有好处（与 post 和 get 相同）

编辑：如果您想测试其余客户端，请使用依赖注入来注入请求，然后使用 easymock 像这样模拟它（例如测试，如果删除被正确调用）：

```
@Test void myTest(){
 ClientRequest mock = EasyMock.createMock(ClientRequest.class);
 mock.delete(2); //test if resource with id=2 is deleted or something similar

 EasyMock.replay(mock);
 invokeDelete(mock);
 EasyMock.verify(mock);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T12:37:12.643

以下是我在短期内解决问题的方法：

1) 将请求提取为方法的参数。`invokePUT()`现在变成：

```
public void invokePUT(ClientRequest request) {
    request.accept("application/xml");
    ClientResponse<Customer> response = request.put(Customer.class); 
    try {
         if (response.getStatus() != 201)
              throw new RuntimeException("Failed!");
    } finally {
         response.releaseConnection(); 
    }
} 
```

2）在您的测试中，使用存根版本`ClientRequest`

```
@Test
public void sendsPayloadAsXml() {
    StubbedClientRequest request = new StubbedClientRequest(new StubbedResponse());
    restApi.invokePUT(request);
    assertEquals("application/xml", request.acceptHeader);
}

@Test
public void makesTheCallUsingPut() {
    StubbedClientRequest request = new StubbedClientRequest(new StubbedResponse());
    restApi.invokePUT(request);
    assertTrue(request.putWasCalled);
}

@Test
public void releasesTheConnectionWhenComplete() {
    StubbedResponse success = new StubbedResponse();
    StubbedClientRequest request = new StubbedClientRequest(success);
    restApi.invokePUT(request);
    assertTrue(success.connectionWasClosed);
}

@Test(expected = RuntimeException.class)
public void raisesAnExceptionWhenInvalidResponseReceived() {
    StubbedClientRequest request = new StubbedClientRequest(new StubbedResponse(400));
    restApi.invokePUT(request);
}

private static class StubbedClientRequest extends ClientRequest {
    public String acceptHeader = "";
    public boolean putWasCalled;
    public ClientResponse response

    public StubbedRequest(ClientResponse response) {
        this.response = response;
    }

    @Override
    public ClientResponse put(Class klass) {
        putWasCalled = true;
        return response;
    }

    @Override
    public void accept(String header) {
        acceptHeader += header;
    }

}

private static class StubbedResponse extends ClientResponse {
    public boolean connectionWasReleased;
    public int status = 201;

    public StubbedResponse(int status) {
        this.status = status;
    }

    public StubbedResponse() { }
} 
```

这可能不是一个完美的设计（将 ClientRequest 交给班级并将 RestEasy 的东西暴露给外界），但这是一个开始。

希望有帮助！

布兰登

# jsf - 为 ManagedBean (JSF 1.2) 中的类获取 JSF 转换器

> ID：10500085
> 
> 赞同：5
> 
> 时间：2012-05-08T13:58:16.443
> 
> 标签：jsf, converter, managed-bean, faces-config

我被困住了，需要 JSF 专家的外部帮助来解决以下问题：我在 faces-config.xml 中为特定类定义了一些转换器，因此我不必一直使用转换器属性或标记。例如：

```
 <converter>
      <converter-for-class>org.joda.time.DateTime</converter-for-class>
      <converter-class>com.example.converter.JodaDateTimeConverter</converter-class>
    </converter> 
```

现在需要一个 JSF 组件（主要是 rich:extendedDataTable）的爬虫，它构建整个组件树并将一层一层地转换为 CSV、HTML 或以后可能需要的任何东西。即导出为 CSV、HTML 等的通用方式，无需每次都重新实现。它几乎完成了（感谢我的一位老同事的好主意），它确实工作得很好，除了一个部分：

```
 Object expressionResult = expression.getValue(FacesContext.getCurrentInstance().getELContext());
    expressionResultString = expressionResult.toString(); 
```

该命令检索 h:outputText 的值并将其转换为字符串。如果有针对特定表达式结果的自定义转换器，那么最后一行是我想用转换器类替换的内容。我不知道如何为我的课程找到确切的转换器（由 faces-config 指定）。对于我的用例，FacesContext 似乎没有任何有用的方法/对象。直接访问 faces-config.xml 似乎有点错误。正确的方法可能类似于：

```
 Converter converter = magically_fetch_the_correct_converter_for_expressionResult_type;
    converter.getAsString(FacesContext.getCurrentInstance(), component,
                                expressionResult); 
```

如果我为组件本身使用转换器 ID 和适当的属性/标签，那将相当容易，但我真的想避免那种无用的附加代码。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T13:02:44.867

你正在寻找[`Application#createConverter()`](http://docs.oracle.com/javaee/6/api/javax/faces/application/Application.html#createConverter%28java.lang.Class%29).

```
Object object = expression.getValue(context.getELContext());
Class<?> type = expression.getType(context.getELContext());
Converter converter = context.getApplication().createConverter(type);
String string = converter.getAsString(context, component, object); 
```

# visual-c++ - 在 OpenGL 程序中加载 3Ds 模型

> ID：10500088
> 
> 赞同：0
> 
> 时间：2012-05-08T13:58:30.460
> 
> 标签：visual-c++, opengl, 3ds

我有一个在 VC++ 中使用 OpenGL 创建的棋盘。我从其他地方下载了 3ds 模型的棋子。我正在尝试将这个 3ds 模型放在板上。帮我放置可以在鼠标交互时翻译的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:24:46.713

OpenGL“仅仅是”一个绘图API（虽然功能强大）。OpenGL不加载3ds模型，但您当然可以使用3ds文件加载器/解析器加载3ds文件并将提取的数据提供给OpenGL。

# c# - 获取两个值之间的时间差

> ID：10500095
> 
> 赞同：9
> 
> 时间：2012-05-08T13:58:38.720
> 
> 标签：c#, .net, datetime

在我的应用程序中，我有 4 个文本框和 2 个文本框输入开始时间，以及 2 个文本框输入结束时间。

用户将始终输入完成时间，因此输入将始终为 11:30、12:45 等。

如何获得开始时间和结束时间之间的小时和分钟差异？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-08T14:01:14.833

使用 TimeSpan 类和 DateTime 的 Subtract 方法。

```
 DateTime t1 = Convert.ToDateTime(textBox1.Text);
        DateTime t2 = Convert.ToDateTime(textBox2.Text);
        TimeSpan ts = t1.Subtract(t2); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T14:02:08.263

您可以`TimeSpan`通过减法获得差异。

```
TimeSpan time1 = TimeSpan.Parse(textBox1.Text);
TimeSpan time2 = TimeSpan.Parse(textBox2.Text);

TimeSpan difference = time1 - time2;

int hours = difference.Hours;
int minutes = difference.Minutes; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-08T14:00:39.523

创建两个`DateTime`对象来解析`TextBox`控件中的值并简单地将两者相减`DateTime`，您将得到一个`TimeSpan`您正在寻找的对象。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-08T14:04:11.260

使用 TimeSpan，无需使用日期

```
var start = TimeSpan.Parse(start.Text);
var end = TimeSpan.Parse(end.Text);

TimeSpan result = end - start;
var diffInMinutes = result.TotalMinutes(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T14:00:39.367

```
TimeSpan difference = DateTime.Parse(txtbox1.Text) - Datetime.Parse(txtbox2.Text); 
```

例子：

```
TimeSpan difference =  DateTime.Parse("12:55")-DateTime.Parse("11:45");
double hourDiff=  difference.TotalHours;
double minutes = difference.TotalMinutes;
Console.WriteLine(hourDiff);//1.16666666666667
Console.WriteLine(minutes);//70 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-08T14:02:39.110

使用时间跨度：

```
 DateTime dt1 = new DateTime(starttime.text);
    DateTime dt2 = new DateTime(endtime.text);

    TimeSpan result = dt2 - dt1; 
```

然后你可以从结果中得到分钟、秒等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-08T14:00:37.377

将小时转换为分钟，将其添加到现有分钟，将其转换为总秒数，对 endtime 执行相同操作。将它们彼此减去，将它们转换回小时和分钟。记住一小时内的 60 分钟，一分钟内的 60 秒，我就是这样处理它的。因为总秒数总是相同的，所以很难教计算机尝试从 60 回绕到 0 或从 12 回绕到 1。更容易使用像秒这样完全线性的东西。然后向上重新转换

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-08T14:03:49.987

您可以减去两个`DateTime`s 并接收一个`TimeSpan`结构。这具有检索`Days`, `Hours`, `Minutes`,`Seconds`等的属性。

```
var first = new DateTime(2012, 05, 08, 10, 30, 00);
var second = new DateTime(2012, 05, 08, 11, 49, 13);

var diff = first - second;
var hours = diff.Hours;
var mins = diff.Minutes; 
```

# asp.net-mvc-3 - 在 ViewEngine 覆盖中处理 _Layout.cshtml 渲染

> ID：10500096
> 
> 赞同：0
> 
> 时间：2012-05-08T13:58:41.917
> 
> 标签：asp.net-mvc-3, razor, viewengine

我有自己的 Razor 视图引擎实现，它允许我处理部分视图和视图“馈送”，以便我向客户端提供我的视图的本地化版本。

我`protected override IView CreateView`用来覆盖视图选择过程并注入语言感知逻辑。

我也有`protected override IView CreatePartialView`，但是当我加载一个假设要渲染我的`_Layout.cshtml`CreatePartialView 的视图时，并没有启动。

我需要重写 ViewEngine 的哪个方法以“捕获”_layout 页面呈现以执行语言感知替换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T20:13:28.123

一种方法是通过设置 Layout 属性从特定语言的视图中指定特定语言的布局，如下所示：

```
@{
    Layout = "~/Views/Shared/_Layout.french.cshtml";
} 
```

这仍然不是一个好方法，因为它破坏了依赖于视图引擎覆盖代码的整个“视图/语言”链接范式。

但它更灵活，因为它允许远离主视图命名约定。

# php - 将对象复制到其他表 - Symfony 1.4

> ID：10500098
> 
> 赞同：1
> 
> 时间：2012-05-08T13:58:47.503
> 
> 标签：php, symfony1, symfony-1.4

我有两张桌子：

```
First:
id | name  | password
 1 | peter | old

Second:
id | name  | password 
```

我首先从表中获取对象：

```
$first = Doctrine::getTable('First')->find(1);

$copy = $first->copy();

$second = new Second($first);
$second->save(); 
```

或者

```
$second = new Second($copy);
$second->save(); 
```

在这两种情况下，我都有：

```
Second:
id | name  | password
 1 | NULL  | NULL 
 2 | NULL  | NULL 
```

可以制作这个副本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:04:57.720

你试过[`toArray`](https://github.com/doctrine/doctrine1/blob/master/lib/Doctrine/Record.php#L1884)/[`fromArray`](https://github.com/doctrine/doctrine1/blob/master/lib/Doctrine/Record.php#L1962)吗？

```
$first = Doctrine::getTable('First')->find(1);

$second = new Second();
$second->fromArray($first->toArray());
$second->save(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T15:37:38.820

为什么不使用克隆？它比使用 toArray、fromArray 更简单。

```
$first = Doctrine::getTable('First')->find(1);
//do whatever to $first here...

$second = clone $first;
$second->save(); 
```

不过，您可能必须将 $second 上的 ID 字段设置为 null。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T14:13:04.597

当然可以，但我不这么认为。你在哪里看到的？我认为您不能将一个实体作为参数传递给另一个实体的构造函数。

只需手动执行或使用反射复制所有字段：

```
$first = Doctrine::getTable('First')->find(1);

$second = new Second();
$second->setValue1($first->getValue1());
$second->setValue2($first->getValue2());
...
$second->save(); 
```

# ruby-on-rails-3 - Actionmailer - 我如何设置“来自”部分？

> ID：10500104
> 
> 赞同：0
> 
> 时间：2012-05-08T13:59:07.003
> 
> 标签：ruby-on-rails-3, email, actionmailer

这是我的配置文件`/config/initializers/setup_mail.rb`：

```
ActionMailer::Base.smtp_settings = {  
  :address              => "smtp.gmail.com",  
  :port                 => 587,  
  :domain               => "...something...",  
  :user_name            => "my_gmail_name",  
  :password             => "my_gmail_pass",
  :authentication       => "plain",  
  :enable_starttls_auto => true  
} 
```

这是`Mailer's`我使用的方法类：

```
class Notifierpass < ActionMailer::Base
  default from: "no-reply@my-domain.com"

  def forgot_password(user)    
    @reset_password_link = reset_password_url(user.perishable_token)

    mail(:from => "no-reply@my-domain.com", :to => user.email, :subject => "New passwordt")  
  end
end 
```

发送电子邮件正在工作，我的问题是，在电子邮件的字段**From**始终是**my_user_name**而不是**no-reply@my-domain.com**。

哪里有问题？为什么仍然使用我的 gmail 名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:21:26.653

GMail 只允许您从您的帐户或您正确配置的其他电子邮件地址发送电子邮件。要从备用电子邮件地址发送，您需要将其添加到 Gmail 设置中。您只能添加您已经可以从中接收的地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:07:56.453

当您连接到 gmail 的 smtp 服务器（如在您的配置中）时，已经分配了 authentication_information，因为您将使用具有已知电子邮件地址的某个 user_id 发送电子邮件。因此 google 将不接受任何 :from => "value" 但它将适合 :from 参数与 auth_info 返回的电子邮件。

希望这对你有帮助

# python - langid.py 中的“返回值”到底是什么意思？

> ID：10500105
> 
> 赞同：3
> 
> 时间：2012-05-08T13:59:12.770
> 
> 标签：python

在正确的语言 ID 旁边，[langid.py](https://github.com/saffsd/langid.py)返回一个特定值 - “返回的值是语言的分数。它不是概率估计，因为它没有被文档概率标准化，因为这对于分类是不必要的。” 但是值是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T04:46:16.617

我其实是`langid.py`. 不幸的是，我现在才发现这个问题，差不多是在它被问到一年之后。自从提出这个问题以来，我已经整理了规范化的处理，因此所有 README 示例都已更新以显示实际概率。

您在那里看到的值（并且您仍然可以通过关闭规范化来获得）是文档的非规范化对数概率。因为 log/exp 是单调的，我们实际上不需要计算概率来决定最可能的类别。这个 log-prob 的实际值实际上对用户没有任何用处。我可能不应该包含它，并且将来我可能会删除它的输出。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T14:38:44.010

我认为这是 langid.py 代码的重要部分：

```
def nb_classify(fv):
  # compute the log-factorial of each element of the vector
  logfv = logfac(fv).astype(float)
  # compute the probability of the document given each class
  pdc = np.dot(fv,nb_ptc) - logfv.sum()
  # compute the probability of the document in each class
  pd = pdc + nb_pc
  # select the most likely class
  cl = np.argmax(pd)
  # turn the pd into a probability distribution
  pd /= pd.sum()
  return cl, pd[cl] 
```

在我看来，作者正在为每种可能的语言计算数据的[多项式](http://en.wikipedia.org/wiki/Multinomial_distribution)对数后验。 `logfv`计算 PMF ( `x_1!...x_k!`) 分母的对数。 `np.dot(fv,nb_ptc)`计算项的对数`p_1^x_1...p_k^x_k`。所以，`pdc`看起来像语言条件对数似然列表（除了它缺少`n!`术语）。 `nb_pc`看起来像先验概率，`pd`对数后验也是如此。归一化线`pd /= pd.sum()`让我感到困惑，因为通常会归一化类似概率的值（不是对数概率值）；此外，文档 ( ) 中的示例`('en', -55.106250761034801)`看起来没有经过规范化——也许它们是在添加规范化行之前生成的？

无论如何，简短的回答是这个值，`pd[cl]`是一个置信度分数。根据当前代码，我的理解是它们应该是 0 到 1/97 之间的值（因为有 97 种语言），值*越小*表示置信度越高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T14:10:20.197

看起来像一个值，它告诉您引擎猜测文档的正确语言的确定程度。我认为通常数字越接近 0，它就越有把握，但是您应该能够通过将语言混合在一起并传递它们来测试您得到的值。它允许您在使用 langid 时微调您的程序，具体取决于您认为“足够接近”以算作匹配。

# ios - 从机架空间获取文件时，IOS AFNetworking over 3G 不可靠

> ID：10500113
> 
> 赞同：1
> 
> 时间：2012-05-08T13:59:43.760
> 
> 标签：ios, 3g, afnetworking, rackspace

我在使用 AFNetworking 从 Rackspace 存储库下载文件时遇到了问题。

基本上有时文件没有完全传输，但 AFNetworking 会触发成功块。收到的 http 响应代码也设置为 200 OK。

这种情况只发生在 3G 连接上。在 WiFi 上，我们正确接收所有文件。

谁能给我们任何可能导致这种行为的提示？

**编辑，2012-05-10** 我检测到问题可能出在其他地方，我正在做的是检查文件的 CRC 并将其与预期的 CRC 进行比较。但是（仅当连接超过 3G 时才会发生）CRC 校验失败。下面是我用来下载文件然后检查它的 CRC 的一些代码片段：

```
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:urlNS];

AFImageRequestOperation * imageRequestOperation = [AFImageRequestOperation imageRequestOperationWithRequest:request
                                                   imageProcessingBlock:nil
                                                   cacheName: nil
                                                   success: ^(NSURLRequest * request, NSHTTPURLResponse * response, UIImage * image)
                                                   {
                                                       [self.class postProcessDownloadAfNetworking: request andResponse: response resultImage: image error: nil];
                                                   }
                                                   failure: ^(NSURLRequest * request, NSHTTPURLResponse * response, NSError * error)
                                                   {
                                                       [self.class postProcessDownloadAfNetworking: request andResponse: response resultImage: nil error: error];                                                        
                                                   }];

imageRequestOperation.outputStream = [NSOutputStream outputStreamToFileAtPath:obj.destinationFilename append:NO];

[imageRequestOperation start]; 
```

然后在回调方法中：

```
if(error == nil)
{
    NSData * data = [NSData dataWithContentsOfFile:imgData.destinationFilename];
    uint32_t fileCrcInt = [data crc32];
    NSString * fileCrcHex  = [NSString stringWithFormat:@"%2X", (int) fileCrcInt] ;
    NSString * fileCrcHex2 = [NSString stringWithFormat:@"000000%@", fileCrcHex] ;
    fileCrcHex2 = [fileCrcHex2 substringFromIndex:[fileCrcHex2 length]-8];

    // Compare CRC
    if( [expectedCRC isEqualToString:fileCrcHex2] )
    {
       (...) 
```

指令 [NSData dataWithContentsOfFile:] 是否有可能在 AFNetworking 的输出流完全写入文件之前读取文件？也许我遇到了某种 iOS 磁盘缓存或类似的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T02:15:49.790

在没有其他数据的情况下，我会大胆猜测：

某些文件类型可能会受到 3G 上的透明代理的影响，这可能会改变这些文件。这适用于具有有损压缩的广泛认可的文件类型。基本上，如果您尝试下载 JPEG，代理可能会提供比您预期更小的 JPEG。单元提供者认为它“足够接近”，并且双重压缩的 JPEG 更小（而且丑得多）。自然，重新压缩的图像将具有不同的 CRC。

这也可能适用于其他文件类型。

我已经阅读了有关 T-Mobile 这样做的报道。我认为其他手机提供商也注意到了这一点。

有两个可能的修复：

正如 Tony Million 在下面的评论中所指出的，切换到 HTTPS 将解决此问题，因为代理将不再处于通信中间。

如果您的资源可通过 HTTPS 获得，那么这是一个很棒且简单的解决方法。

如果没有，您可以尝试添加一个 HTTP 标头来解决此问题。我无法验证它是否适合您，因为我的手机提供商不玩这个特定的游戏：

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.5](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.5)

这个想法是为您的请求添加一个无转换缓存控制 HTTP 标头。这应该不允许服务器进行这种更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:23:27.210

这似乎是一个机架空间/服务器问题。如果服务器发回 200 响应代码，则表明连接和文件/数据传输成功。

如果没有关于服务器端的更多细节，我们真的帮不了你。

# iphone - 根据流行度对 NS(Mutable)Array 进行排序

> ID：10500114
> 
> 赞同：1
> 
> 时间：2012-05-08T13:59:45.540
> 
> 标签：iphone, ios

我知道如何按字母对数组进行排序，但我想根据其中对象的受欢迎程度对我的 NSMutableArray 进行排序。想象一个包含以下对象的数组：

*   乙
*   一个
*   C
*   乙
*   乙
*   一个

我想按受欢迎程度对这些对象进行排序并创建一个这样的数组：

*   乙
*   乙
*   乙
*   一个
*   一个
*   C

有没有一个好的和快速的方法来做到这一点？也许是 NSSortDescriptor 的键？（找不到那个）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:25:47.380

简而言之，为了简洁起见，我使用了数组文字的新语法。

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {
        NSArray *ar = @[@"B", @"A", @"C", @"B", @"B", @"A"];
        NSCountedSet *countedSet = [NSCountedSet setWithArray:ar];
        NSArray *sorted = [ar sortedArrayUsingComparator:^NSComparisonResult(id obj1, id obj2) {
            NSInteger diff = [countedSet countForObject:obj1] - [countedSet countForObject:obj2];
            if (diff < 0)
                return NSOrderedDescending;
            else if (diff > 0)
                return NSOrderedAscending;
            else
                return NSOrderedSame;
        }];
        NSLog(@"%@", ar);
        NSLog(@"%@", sorted);
    }
    return 0;
} 
```

输出

```
2012-05-08 07:25:18.465 Sort[20434:303] (
    B,
    A,
    C,
    B,
    B,
    A
)
2012-05-08 07:25:18.468 Sort[20434:303] (
    B,
    B,
    B,
    A,
    A,
    C
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:02:44.880

```
NSSortDescriptor *sortDescriptor;
sortDescriptor = [[[NSSortDescriptor alloc] initWithKey:@"theSortKey"
                                              ascending:YES] autorelease];
NSArray *sortDescriptors = [NSArray arrayWithObject:sortDescriptor];
NSArray *sortedArray;
sortedArray = [myArray sortedArrayUsingDescriptors:sortDescriptors]; 
```

也看到这个线程

[如何对包含自定义对象的 NSMutableArray 进行排序？](https://stackoverflow.com/questions/805547/how-to-sort-an-nsmutablearray-with-custom-objects-in-it)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T14:21:23.040

这应该适合你。

```
NSArray *array = [[NSArray alloc] initWithObjects:@"A", @"A", @"B", @"B", @"B", @"C", nil];
NSMutableDictionary *occurenceOfValues = [[NSMutableDictionary alloc] init];
for (id value in array) {
    NSNumber *count = [occurenceOfValues objectForKey:value];
    [occurenceOfValues setValue:[NSNumber numberWithInt:[count intValue] + 1] forKey:value];
}
NSArray *valuesInOrder = [[[occurenceOfValues keysSortedByValueUsingSelector:@selector(compare:)] reverseObjectEnumerator] allObjects];
NSMutableArray *sortedArray = [[NSMutableArray alloc] initWithCapacity:array.count];
for (id value in valuesInOrder) {
    NSNumber *count = [occurenceOfValues objectForKey:value];
    for (int i = 0; i < [count intValue]; i++) {
        [sortedArray addObject:value];
    }
}
NSLog(@"%@", sortedArray); 
```

控制台输出：

2012-05-08 09:20:15.805 SortArrayPopularity[25206:f803]（B、B、B、A、A、C）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T14:24:13.460

我会使用以 A,B,C... 作为键的字典并将默认值设置为 0

然后枚举数组并增加相应键的计数。

最后对 [dict allKeys] 返回的键数组进行排序；

# regex - 如何模仿 Twitter 的 url-shortener？

> ID：10500117
> 
> 赞同：0
> 
> 时间：2012-05-08T13:59:48.440
> 
> 标签：regex, twitter, tld

主要问题有点短，所以我会合作。我正在为 twitter 构建一个应用程序，您可以使用它执行基本操作（获取帖子、发布帖子、回复等）

现在我想如果我在我的应用程序中检查最大 140 字符限制，那将是一个好主意。到目前为止一切顺利，然后有人问我是否也可以做 url-shortener 的事情。

所以目前我有一个正则表达式，可以选择大多数（实际上太多）url，采用它们的长度，并添加或推断与 140 最大值的差异。它仍然是一个错误但我可以管理它。

现在我的问题....

似乎 twitter 在他们认为的 url 方面非常挑剔：我得到了最基本的（以 http(s):// 等开头），但 twitter 也很容易替换一些 tld，(www.)google.com [whatever].net/.biz/.info 只是其中的一部分）但不是 .nl .de .tk

现在我想知道是否有人发现他们做了哪些，哪些没有“缩短”。

现在因为我很确定我的正则表达式不是最好的，所以我也会把它放在这里：

```
((http|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?)|([\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:15:00.590

[http://support.twitter.com/articles/78124-how-to-shorten-links-urls#](http://support.twitter.com/articles/78124-how-to-shorten-links-urls#)表示所有发布到 Twitter 的 URL 都将被重写为正好 19 个字符长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T04:53:18.127

我正在使用这个：`var url_expression = /[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi;`没有人抱怨:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T08:46:48.717

我想通了，我在 tld wikipage 上发现了一条非常重要的行。它指出所有国家的顶级域名都是两个字符长。反之亦然；所有 2 个字符的顶级域名都是国家。考虑到这一点，我开始用 twitter 测试其中的一些，我很确定我现在知道 url 的 twitter 缩短了哪些，哪些没有。

*   所有网址都以 http:// 或 https:// 开头
*   所有网址都像 [something].[non country tld] # .com .biz .mobi 等（.arpa 和 .aero 除外）
*   所有 url 都像 [something].[something].[valid tld] # 包括国家

*   http://[user]:[pass]@[something].[tld] 之类的链接**不会**被缩短

现在要为它构建一个正则表达式，我会在我认为我拥有它时将它发布在这里：D

这就是我到目前为止得到的：

```
/(^(?:(?:ht|f)tp(?:s?)\:\/\/|~\/|\/)?(?:(?:[-\w]+\.)+(?:com|asia|cat|coop|edu|int|tel|pro|org|net|gov|mil|biz|info|mobi|name|jobs|museum|travel|([a-z]{2})))(?::[\d]{1,5})?(?:(?:(?:\/(?:[-\w~!$+|.,=\(\)]|%[a-f\d]{2})+)+|\/)+|\?|#)?(?:(?:\?(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)(?:&(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)*)*(?:#(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)?)/gim; 
```

它仍然存在一个主要缺陷，它还接受 twitter 不接受的 [domain].[tld]。

我希望这对将来的某人有所帮助。我很确定在网上没有很多容易找到的信息（或者至少我找不到）。

# iphone - 释放对象，内存管理，Objective C

> ID：10500119
> 
> 赞同：0
> 
> 时间：2012-05-08T13:59:52.650
> 
> 标签：iphone, objective-c, memory-management

如果我有 ClassA.h

> 1.@property（非原子，保留）NSMutableArray *arr；

类A.m

> -（A类）函数{
> 
> ```
>  1.ClassA *obj = [[ClassA alloc] init]; 
>     // initialize the arr
>     // add another object into the arr
>     2\. [obj.arr addObject:nameOfAnObject]
>     3\. return obj; 
> ```
> 
> }

在ClassB，我想调用**（ClassA）函数**方法。我要做的是

B类.m

> -（无效）viewDidload {
> 
> ```
>  1.[super viewDidLoad];
>   2.ClassA     *classAinB = [[classA alloc] init];                                                                        
>   3.classAinB = [classA function];
>   4.[classAinB release]; 
> ```
> 
> }

根据内存管理的规则，因为我在ClassB.m中拥有一个**ClassAinB**，所以最后释放了它。

我的问题是我在 ClassA.m 中拥有的 var **ClassA**怎么样，我应该什么时候释放它，以便在 ClassB 的第 3 行回调后，我仍然拥有 ClassA 的对象，其 arr 包含**nameOfAnObject**对象

请就这个问题给我建议。欢迎任何意见在这里。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:07:32.270

将其添加到自动释放池中。即`return [obj autorelease];`。`release`如果对象不再有任何所有者，这将确保在运行循环迭代结束时向对象发送消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:13:32.017

如果您使用手动保留释放：您分配 2 个 A 类对象。一个 - 当您直接从 classB 函数分配它时，另一个 - 当您在该函数内调用 classA 函数时。因此，当第 3 行执行时，您会破坏第一个 classA 对象上的链接（覆盖 classAinB var），这是内存泄漏。如果您希望使用返回类 A 对象的工厂方法，请将该方法设为静态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T14:09:33.003

任何时候你都`alloc`需要一个对应`release`的来匹配它。

在带有 LLMV 编译器（并启用 ARC）的 XCode 4.2 + 中，您不必担心引用计数，所以当您`alloc`是一个对象时，您不必担心调用`release`，事实上您不能，因为编译器会抛出错误。

# sql - SQL Server - 计算从基准时间开始 15 分钟到 14 天发生的事件

> ID：10500123
> 
> 赞同：1
> 
> 时间：2012-05-08T14:00:08.913
> 
> 标签：sql, sql-server, sql-server-2005

我正在使用 SQL Server 2005。当客户端和类型相同时，我正在尝试计算 15 分钟到 14 天之间的重复次数。

表 [交互] 看起来像：

```
eci_date                 user_ID  Type  Client
2012-05-01 10:29:59.000  user1    12    14
2012-05-01 10:35:04.000  user1    3     15
2012-05-01 10:45:14.000  user3    4     14
2012-05-01 11:50:22.000  user1    5     15
------------------------------------------
2012-05-02 10:30:28.000  user2    12    14
2012-05-02 10:48:59.000  user5    12    14
2012-05-02 10:52:23.000  user2    12    15
2012-05-02 12:49:45.000  user8    3     14
------------------------------------------
2012-05-03 10:30:47.000  user4    5     15
2012-05-03 10:35:00.000  user6    4     12
2012-05-03 10:59:10.000  user7    4     12 
```

我希望输出看起来像：

```
eci_date    Type  Total_Calls  Total_Repeats
2012-05-01  12    1            2
2012-05-01  3     1            0
2012-05-01  4     1            0
2012-05-01  5     1            1
---------------------------------------------
2012-05-02  12    3            0
2012-05-02  3     1            0
---------------------------------------------
2012-05-03  4     2            1
2012-05-03  5     1            0 
```

所以会有 2 次重复，因为客户端 14 在他们第一次调用之后调用了 2 次，因为 Client 和 Type 必须相同并且因为我需要按天过滤。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:55:40.673

```
With Metrics As
  (
  Select T1.Client, T1.Type
    , Min(eci_Date) As FirstCallDate
  From Table1 As T1
  Group By T1.Client, T1.Type
  )
Select DateAdd(d, DateDiff(d,0,T1.eci_date), 0) As [Day], Type, Count(*) As TotalCalls
  , (
    Select Count(*)
    From Table1 As T2
      Join Metrics As M2
        On M2.Client = T2.Client
          And M2.Type = T2.Type
    Where T2.eci_Date >= DateAdd(mi,15,M2.FirstCallDate)
      And T2.eci_date <= DateAdd(d,15,M2.FirstCallDate)
      And DateAdd(d, DateDiff(d,0,T1.eci_date), 0) = DateAdd(d, DateDiff(d,0,T2.eci_date), 0)
    ) As Total_Repeats
From Table1 As T1
Group By DateAdd(d, DateDiff(d,0,T1.eci_date), 0), Type
Order By [Day] Asc, Type Desc 
```

[SQL小提琴](http://sqlfiddle.com/#!3/1f976/36)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:35:41.963

您的问题含糊不清，因此我将其解释为以下含义： *“total_count”列是给定日期不同用户的数量 *重复次数是接下来 14 次中第一个之后的呼叫次数天

以下查询完成此操作：

```
select eci_date, count(distinct id) as numusers, count(*) as Total_repeats
from 
(
  select cast(eci_date as date) as eci_date, 
     id, 
     count(*) as total,
     min(eci_date) as firstcall
  from table t
  group by cast(eci_date as date), user_id
) t 
left outer join table t2
  on t.user_id = t2.user_id 
  and t2.eci_date between firstcall and dateadd(day, 14, firstcall) 
  and t2.eci_date <> firstcall
group by eci_date 
```

请注意，这使用语法`cast(<datetime> as date)`从日期时间中提取日期部分。

# java - 如何打开新窗口

> ID：10500124
> 
> 赞同：2
> 
> 时间：2012-05-08T14:00:12.277
> 
> 标签：java, swing, user-interface, jframe

我有这样的课：

```
public class A {
    public static void main() {
        B f1 = new B();
        f1.setVisible(true);
    }

    class B extends JFrame {
        public B() {
            JButton btn = new JButton("click me");
            btn.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent evt) {
                    C f2 = new C();
                    f2.setVisible(true);
                }
            });
            add(btn);
        }
    }

    class C extends JFrame {
        public C() {
            //whatever here
        }
    }
} 
```

当我第一次运行这个 java 代码时，一个窗口 X 包含一个按钮“点击我”。单击它后，会弹出另一个新窗口 Y。但问题是当我关闭新窗口 Y 时，旧窗口 X 会自动与 Y 一起关闭。（即它们同时关闭）

我想做的是在我关闭 Y 之后，X 保持在那里而不是关闭。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:07:08.900

最简单的方法，将 this.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE) 放在第二个窗口构造函数中。

其他方式： http: [//www.leepoint.net/notes-java/GUI/containers/10windows/12frameclose.html](http://www.leepoint.net/notes-java/GUI/containers/10windows/12frameclose.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T14:09:29.507

您将更改该`setDefaultCloseOperation()`方法的参数，该参数定义单击关闭按钮时发生的情况。在这种情况下，您将`DISPOSE_ON_CLOSE`用作参数。两个框架都被处理的原因可能是因为您将参数设置为`EXIT_ON_CLOSE`（如果您没有明确设置，那么它已为您完成；这是所有框架的默认关闭行为）终止*整个过程*- 这包括所有打开的窗户和框架。如果您需要进一步的帮助，请询问。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T14:08:16.470

什么 DefaultCloseOperation 有 Y Frame ？它可能是EXIT_ON_CLOSE，因此X与Y一起关闭。将其更改为DISPOSE_ON_CLOSE或保留默认值。它应该工作。

# facebook-graph-api - oAuth Dialog 后不知道如何获取用户数据

> ID：10500136
> 
> 赞同：0
> 
> 时间：2012-05-08T14:00:36.160
> 
> 标签：facebook-graph-api, oauth-2.0

我正在开发一个 FB 应用程序。该应用程序正在画布页面内进行身份验证，页面加载时重定向到 OAuth 对话框

```
if(!isset($data['user_id']) && $data['page']['liked']){ ?>
<script>
  var oauth_url = 'https://www.facebook.com/dialog/oauth/';
  oauth_url += '?client_id=XXXX';
  oauth_url += '&redirect_uri=' + encodeURIComponent('https://apps.facebook.com/YYYY/');
  window.top.location = oauth_url;
</script>
<?php   
} 
```

当用户进行身份验证时，我只需要读取用户的名称，但我无法在signed_request 中找到该信息。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:09:24.377

您需要执行以下步骤：

1.  [解码这里](https://developers.facebook.com/docs/authentication/signed_request/)提到的签名请求。
2.  提取访问令牌。
3.  使用提取的访问令牌发出新请求以检索用户名。

# php - 如何在 magento 中创建新的自定义选项类型？

> ID：10500144
> 
> 赞同：8
> 
> 时间：2012-05-08T14:01:03.493
> 
> 标签：php, magento, magento-1.7, option

如何在 magento 中创建新的产品自定义选项类型，例如，我必须在 magento 中提供新的图像自定义选项类型，该类型从我的自定义模块表中获取图像，并且我想将该图像分配给我的自定义选项图像字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T22:09:57.697

正如达斯汀格雷厄姆所说，这非常棘手。第一步：

1.  在 下添加新节点`global/catalog/product/options/custom/groups`。请参阅 中的示例`/app/code/core/Mage/Catalog/etc/config.xml`。

2.  创建新块以呈现您的自定义选项。

3.  重写`Mage_Catalog_Model_Product_Option`并实现保存自定义类型选项（`saveOptions()`方法）和加载自定义类型选项（`getProductOptionCollection`方法）。

如果您的自定义类型不是很自定义:) - 它应该足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-09T06:13:45.217

我忘记了这个问题，但我需要再次在我的另一个项目中创建新的自定义选项类型。我使用此链接创建了新的自定义选项类型。 [http://magento.ikantam.com/qa/custom-input-types-custom-options](http://magento.ikantam.com/qa/custom-input-types-custom-options)

解决方案有点冗长，不可能把整个代码放在这里，所以我刚刚分享了这个链接，通过这个链接我很容易创建新的自定义选项类型，这篇文章的解释很好。

我根据需要修改了一些更改。

希望这会对某人有所帮助。

正如达斯汀格雷厄姆所说，这非常棘手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-29T20:55:56.297

@Mufaddal 感谢分享此链接。我想提供一个替代方案，因为它需要相当多的知识。

如果您只是尝试更改特定下拉列表（例如）的显示方式，您还可以覆盖`/template/catalog/product/view/options/type/select.phtml`如下：

` getOption() ?>

```
<dt><label<?php if ($_option->getIsRequire()) echo ' class="required"' ?>><?php if ($_option->getIsRequire()) echo '<em>*</em>' ?><?php echo  $this->escapeHtml($_option->getTitle()) ?></label>    </dt>
<dd<?php if ($_option->decoratedIsLast){?> class="last"<?php }?>>
<div class="input-box">
    <?php echo $this->getValuesHtml(); ?>

    <?php if($_option->option_id == 2) : ?>
                <script type="text/javascript">
                    jQuery('#select_2').css('display', 'none');
                </script>

                <?php foreach ($_option->getValues() as $_value) { ?>
                    <?php echo $_value->getTitle(); // the title of the option ?>
                    <?php echo $_value->getOptionTypeId(); // the id ?>
                <?php } ?>
                <!-- add custom code that triggers select in the background -->

            <?php endif ?>

    <?php if ($_option->getIsRequire()): ?>
        <?php if ($_option->getType() == Mage_Catalog_Model_Product_Option::OPTION_TYPE_RADIO || $_option->getType() == Mage_Catalog_Model_Product_Option::OPTION_TYPE_CHECKBOX): ?>
            <span id="options-<?php echo $_option->getId() ?>-container"></span>
        <?php endif; ?>
    <?php endif;?>
</div> 
```

`

然后，您可以隐藏选择并通过 jQuery 与选择进行交互。

# iphone - iPhone 加速度计灵敏度

> ID：10500145
> 
> 赞同：1
> 
> 时间：2012-05-08T14:01:03.663
> 
> 标签：iphone, ios4, cordova, accelerometer

我有一个非常奇怪的问题。我有两部 iPhone 4S 手机，我正在使用加速度计在游戏中移动角色。然而，在一部手机中，角色的移动速度比另一部手机快。加速度计的灵敏度是否因手机/软件版本等而异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:10:57.483

我不确定这是否是您正在寻找的，但它可能与您的问题有关：

```
CGFloat samplesPerSecond = 30;
[[UIAccelerometer sharedAccelerometer] setDelegate: self];
[[UIAccelerometer sharedAccelerometer] setUpdateInterval: 1.0 / samplesPerSecond]; 
```

这将限制电话在回调方法上给你打电话的次数。此设置的标准值可能在不同的 iOS 版本中有所不同（未经证实，只是一个想法）。

# wcf-data-services - WCF 5.0 和 Firebird .NET 提供程序：$expand 损坏

> ID：10500147
> 
> 赞同：0
> 
> 时间：2012-05-08T14:01:12.947
> 
> 标签：wcf-data-services, firebird

以下链接（WCF 5.0 和 DevArt 提供程序）中描述的问题似乎也适用于 Firebird .NET 提供程序：

[http://social.msdn.microsoft.com/Forums/en/adodotnetdataservices/thread/e74ea4d1-a262-4326-8529-c146a3acfb6d](http://social.msdn.microsoft.com/Forums/en/adodotnetdataservices/thread/e74ea4d1-a262-4326-8529-c146a3acfb6d)

但是我已经尝试了 5.1.0-pre 版本并且仍然得到 ArumentNullException: Value cannot be null。参数名称：值。

除此之外，行为与描述的完全相同。不过，它确实在 WCF 5.0 CTP 中工作。

谁能确认这是 WCF 5.0 RC 或 Firebird .NET 提供程序中的错误？是否有解决方法，或者我必须降级到 CTP？

这是调用堆栈：

```
Microsoft.Data.Services.dll!System.Data.Services.WebUtil.CheckArgumentNull<string>(string alue, string parameterName) + 0x34 bytes  
Microsoft.Data.Services.dll!System.Data.Services.Internal.ExpandedWrapper<Mdv.AppGuard.Central.Data.ServerGroup>.ReferenceDescription.set(string value) + 0x33 bytes    
[Lightweight Function]  
System.Data.Entity.dll!System.Data.Common.Internal.Materialization.Coordinator<System.Data.Services.Internal.ExpandedWrapper<Mdv.AppGuard.Central.Data.ServerGroup,System.Collections.Generic.IEnumerable<Mdv.AppGuard.Central.Data.Server>>>.ReadNextElement(System.Data.Common.Internal.Materialization.Shaper shaper) + 0x41 bytes   
System.Data.Entity.dll!System.Data.Common.Internal.Materialization.Shaper<System.Data.Services.Internal.ExpandedWrapper<Mdv.AppGuard.Central.Data.ServerGroup,System.Collections.Generic.IEnumerable<Mdv.AppGuard.Central.Data.Server>>>.RowNestedResultEnumerator.MoveNext() + 0xec bytes  
System.Data.Entity.dll!System.Data.Common.Internal.Materialization.Shaper<System.Data.Services.Internal.ExpandedWrapper<Mdv.AppGuard.Central.Data.ServerGroup,System.Collections.Generic.IEnumerable<Mdv.AppGuard.Central.Data.Server>>>.ObjectQueryNestedEnumerator.TryReadToNextElement() + 0x11 bytes    
System.Data.Entity.dll!System.Data.Common.Internal.Materialization.Shaper<System.Data.Services.Internal.ExpandedWrapper<Mdv.AppGuard.Central.Data.ServerGroup,System.Collections.Generic.IEnumerable<Mdv.AppGuard.Central.Data.Server>>>.ObjectQueryNestedEnumerator.MoveNext() + 0x3a bytes    
Microsoft.Data.Services.dll!System.Data.Services.Providers.BasicExpandProvider.ExpandedEnumerator<System.Data.Services.Internal.ExpandedWrapper<Mdv.AppGuard.Central.Data.ServerGroup,System.Collections.Generic.IEnumerable<Mdv.AppGuard.Central.Data.Server>>>.MoveNext() + 0x23 bytes    
Microsoft.Data.Services.dll!System.Data.Services.DataService<Mdv.AppGuard.Central.Data.SetupContext>.SerializeResponseBody(System.Data.Services.RequestDescription description, System.Data.Services.IDataService dataService, Microsoft.Data.OData.IODataResponseMessage responseMessage) + 0x246 bytes    
Microsoft.Data.Services.dll!System.Data.Services.DataService<Mdv.AppGuard.Central.Data.SetupContext>.HandleNonBatchRequest(System.Data.Services.RequestDescription description) + 0x1d8 bytes   
Microsoft.Data.Services.dll!System.Data.Services.DataService<Mdv.AppGuard.Central.Data.SetupContext>.HandleRequest() + 0x13e bytes  
Microsoft.Data.Services.dll!System.Data.Services.DataService<Mdv.AppGuard.Central.Data.SetupContext>.ProcessRequestForMessage(System.IO.Stream messageBody) + 0xe3 bytes    
[Lightweight Function]  
System.ServiceModel.dll!System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(object instance, object[] inputs, out object[] outputs) + 0x8c7 bytes   
System.ServiceModel.dll!System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0x243 bytes    
System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0x9f bytes 
System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0xa2 bytes    
System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0xd9 bytes 
System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0x102 bytes   
System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0x99 bytes 
System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0x96 bytes 
System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0x8e4 bytes   
System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(ref System.ServiceModel.Dispatcher.MessageRpc rpc) + 0x63 bytes 
System.ServiceModel.dll!System.ServiceModel.Dispatcher.MessageRpc.Process(bool isOperationContextSet) + 0x122 bytes 
System.ServiceModel.dll!System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.Dispatch(ref System.ServiceModel.Dispatcher.MessageRpc rpc, bool isOperationContextSet) + 0x49 bytes    
System.ServiceModel.dll!System.ServiceModel.Dispatcher.ChannelHandler.DispatchAndReleasePump(System.ServiceModel.Channels.RequestContext request, bool cleanThread, System.ServiceModel.OperationContext currentOperationContext) + 0x5d4 bytes 
System.ServiceModel.dll!System.ServiceModel.Dispatcher.ChannelHandler.HandleRequest(System.ServiceModel.Channels.RequestContext request, System.ServiceModel.OperationContext currentOperationContext) + 0x226 bytes    
System.ServiceModel.dll!System.ServiceModel.Dispatcher.ChannelHandler.AsyncMessagePump(System.IAsyncResult result) + 0x77 bytes 
System.ServiceModel.dll!System.ServiceModel.Dispatcher.ChannelHandler.OnAsyncReceiveComplete(System.IAsyncResult result) + 0x6a bytes   
System.Runtime.DurableInstancing.dll!System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(System.IAsyncResult result) + 0x32 bytes  
System.Runtime.DurableInstancing.dll!System.Runtime.AsyncResult.Complete(bool completedSynchronously) + 0xfd bytes  
System.Runtime.DurableInstancing.dll!System.Runtime.InputQueue<System.ServiceModel.Channels.RequestContext>.AsyncQueueReader.Set(System.Runtime.InputQueue<System.ServiceModel.Channels.RequestContext>.Item item) + 0x44 bytes 
System.Runtime.DurableInstancing.dll!System.Runtime.InputQueue<System.ServiceModel.Channels.RequestContext>.EnqueueAndDispatch(System.Runtime.InputQueue<System.ServiceModel.Channels.RequestContext>.Item item, bool canDispatchOnThisThread) + 0x1aa bytes    
System.Runtime.DurableInstancing.dll!System.Runtime.InputQueue<System.ServiceModel.Channels.RequestContext>.EnqueueAndDispatch(System.ServiceModel.Channels.RequestContext item, System.Action dequeuedCallback, bool canDispatchOnThisThread) + 0x5e bytes 
System.ServiceModel.dll!System.ServiceModel.Channels.InputQueueChannel<System.ServiceModel.Channels.RequestContext>.EnqueueAndDispatch(System.ServiceModel.Channels.RequestContext item, System.Action dequeuedCallback, bool canDispatchOnThisThread) + 0x46 bytes 
System.ServiceModel.dll!System.ServiceModel.Channels.SingletonChannelAcceptor<System.ServiceModel.Channels.IReplyChannel,System.ServiceModel.Channels.ReplyChannel,System.ServiceModel.Channels.RequestContext>.Enqueue(System.ServiceModel.Channels.RequestContext item, System.Action dequeuedCallback, bool canDispatchOnThisThread) + 0x68 bytes    
System.ServiceModel.dll!System.ServiceModel.Channels.SingletonChannelAcceptor<System.ServiceModel.Channels.IReplyChannel,System.ServiceModel.Channels.ReplyChannel,System.ServiceModel.Channels.RequestContext>.Enqueue(System.ServiceModel.Channels.RequestContext item, System.Action dequeuedCallback) + 0x2b bytes  
System.ServiceModel.dll!System.ServiceModel.Channels.HttpChannelListener.HttpContextReceived(System.ServiceModel.Channels.HttpRequestContext context, System.Action callback) + 0x352 bytes 
System.ServiceModel.dll!System.ServiceModel.Channels.SharedHttpTransportManager.OnGetContextCore(System.IAsyncResult result) + 0x400 bytes  
System.ServiceModel.dll!System.ServiceModel.Channels.SharedHttpTransportManager.OnGetContext(System.IAsyncResult result) + 0x3d bytes   
System.Runtime.DurableInstancing.dll!System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(System.IAsyncResult result) + 0x32 bytes  
System.dll!System.Net.LazyAsyncResult.Complete(System.IntPtr userToken) + 0x6c bytes    
System.dll!System.Net.LazyAsyncResult.ProtectedInvokeCallback(object result, System.IntPtr userToken) + 0xbb bytes  
System.dll!System.Net.ListenerAsyncResult.WaitCallback(uint errorCode, uint numBytes, System.Threading.NativeOverlapped* nativeOverlapped) + 0x1f5 bytes    
mscorlib.dll!System.Threading._IOCompletionCallback.PerformIOCompletionCallback(uint errorCode, uint numBytes, System.Threading.NativeOverlapped* pOVERLAP) + 0x74 bytes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:41:29.060

5.1.0-rc build 也修复了 Firebird 提供者的问题。正如 Vitek Karas 提到的，我忘记从 GAC 中删除 5.0 RTM。因此，我从未真正尝试过 5.1.0-rc。

# c# - EDSDK，C#：试图获取相机上的文件列表

> ID：10500160
> 
> 赞同：1
> 
> 时间：2012-05-08T14:01:58.487
> 
> 标签：c#, edsdk

我正在用 C# 编写一个应用程序，它使用 EDSDK 将数码相机与 PC 连接起来。用户拍照；在软件中触发事件；然后软件将图像新图像复制到PC。这很好用。

现在，我希望该软件能够优雅地处理没有 PC 可用或相机以某种方式与 PC 失去连接的情况。因此，每当用户开始使用该软件的新会话时，它首先会检查相机上是否有任何图像，如果有，则将它们复制到本地。为此，我需要一种方法来获取指向每个单独目录项的指针。到目前为止，我无法在文档或在线找到任何关于如何执行此操作的内容。

EDSDK 有没有办法从相机中获取现有文件的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:55:22.763

我写了一个函数来做到这一点，纯粹是为了自学SDK。因此，该代码未用于生产中的任何内容，因此我为您提供了相关功能：

```
 /// <summary>
    /// Gets a list of files on the CF Card. If dest is given, downloads them
    /// </summary>
    /// <param name="dest">string.empty if you just want a list of file names, otherwise the folder in which you want the files</param>
    /// <returns>a list of file names</returns>
    public  List<string> GetPicturesOnCard(string dest)
    {
        IntPtr volumeRef = IntPtr.Zero;
        IntPtr dirRef = IntPtr.Zero;
        IntPtr subDirRef = IntPtr.Zero;
        List<string> result = new List<string>();
        try
        {
            openSession();
            int nFiles;
            if (EDSDK.EdsGetChildAtIndex(camera, 0, out volumeRef) != EDSDK.EDS_ERR_OK)
                throw new CannonException("Couldn't access Memory Card");
            //first child is DCIM
            if (EDSDK.EdsGetChildAtIndex(volumeRef, 0, out dirRef) != EDSDK.EDS_ERR_OK)
                throw new CannonException("Memory Card formatting Error");
           //first child of DCIM has the actual photos
            if(EDSDK.EdsGetChildAtIndex(dirRef, 0, out subDirRef)!= EDSDK.EDS_ERR_OK)
                throw new CannonException("Memory Card formatting Error");
            EDSDK.EdsGetChildCount(subDirRef, out nFiles);  
            for (int i = 0; i < nFiles; i++)
            {      

                IntPtr fileRef = IntPtr.Zero;
                EDSDK.EdsDirectoryItemInfo fileInfo;
                try
                {
                    EDSDK.EdsGetChildAtIndex(subDirRef, i, out fileRef);
                    EDSDK.EdsGetDirectoryItemInfo(fileRef, out fileInfo);
                    if (dest != string.Empty)
                    {
                        IntPtr fStream = IntPtr.Zero;//it's a cannon sdk file stream, not a managed stream
                        uint fSize = fileInfo.Size;
                        try
                        {
                            EDSDK.EdsCreateMemoryStream(fSize, out fStream);
                            if (EDSDK.EdsDownload(fileRef, fSize, fStream) != EDSDK.EDS_ERR_OK)
                                throw new CannonException("Image Download failed");
                            if (EDSDK.EdsDownloadComplete(fileRef) != EDSDK.EDS_ERR_OK)
                                throw new CannonException("Image Download failed to complete");
                            byte[] buffer = new byte[fSize];
                            IntPtr imgLocation;
                            if (EDSDK.EdsGetPointer(fStream, out imgLocation) == EDSDK.EDS_ERR_OK)
                            {
                                Marshal.Copy(imgLocation, buffer, 0, (int)fSize - 1);
                                File.WriteAllBytes(dest + fileInfo.szFileName, buffer);
                            }
                            else
                                throw new CannonException("Interal Error #1");//because the expection text coud land up in a message box some where
                        }
                        finally
                        {
                            EDSDK.EdsRelease(fStream);
                        }
                    }
                }
                finally
                {
                    EDSDK.EdsRelease(fileRef);
                }
                result.Add(fileInfo.szFileName);
            }

        }
        finally
        {
            EDSDK.EdsRelease(subDirRef);
            EDSDK.EdsRelease(dirRef);
            EDSDK.EdsRelease(volumeRef);
            closeSession();
        }

        return result;
    } 
```

你真正要做的是：初始化 SDK，然后是相机，然后打开一个会话。完成后，您将获得对卡的引用，然后是文件夹（您想要的文件夹是第一个孩子的第一个孩子），然后遍历那里的所有孩子——它们就是文件。

SDK 文档阅读起来并不有趣，但会告诉您我错过的一些内容（如何初始化相机等，我假设您知道如何从项目的其余部分进行操作）。

# php - 我无法在 php 中设置会话变量

> ID：10500161
> 
> 赞同：-5
> 
> 时间：2012-05-08T14:01:59.297
> 
> 标签：php, session-variables

谁能告诉我，我在我的 php 网站上设置会话变量时遇到问题。我还检查了我`php_info()`未启用的位置。但是，同一服务器中的其他站点工作正常。请任何人对此提出建议以关闭？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T14:03:20.450

```
session_start(); 
```

确保你在脚本的顶部有这个。忘记可能导致代码无法正常工作的挫败感是很常见的。就像 Marcus Adams 所说，您需要在每个将访问会话变量的脚本的顶部使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:10:29.853

[`session_start()`](http://ar.php.net/manual/en/function.session-start.php)在您打算访问会话变量并在任何输出之前调用它的每个脚本中使用。

另外，确保您的浏览器启用了 cookie（如果您通过命令行运行 PHP，很可能无法正常工作）。

用于[`session_save_path()`](http://ar.php.net/manual/en/function.session-save-path.php)获取会话保存文件夹的位置，并确保您的脚本具有访问权限。

如果您需要进一步的帮助，请向我们展示一些 codez 和一些错误消息。

# nullpointerexception - 在 VB.net 中使用 EchoSign API

> ID：10500167
> 
> 赞同：2
> 
> 时间：2012-05-08T14:02:30.350
> 
> 标签：nullpointerexception, echosign

我正在尝试转换我在 VB.net 中提供的 echosign 示例 C# 代码，以便在我们的应用程序中使用。特别是 SendDocument 方法。

有没有人已经这样做了？

每当我调用它时，API 都会返回错误消息“Fault: java.lang.NullPointerException”。

这是转换后的函数：

```
Public Shared Function SendDocument(ByVal apiKey As String, ByVal file As Byte(), ByVal recipientEmailAddress As String, ByVal fileName As String, ByVal message As String, ByVal expireDays As Int32) As String

    Try

        Dim ES As EchoSignDocumentService13 = New EchoSignDocumentService13()
        ES.Url = "https://secure.echosign.com/services/EchoSignDocumentService13"

        Dim recipients(1) As String
        recipients(0) = recipientEmailAddress

        Dim localSenderInfo As com.echosign.secure.SenderInfo = Nothing

        Dim echoFileInfo(1) As com.echosign.secure.FileInfo
        echoFileInfo(0) = New com.echosign.secure.FileInfo()
        With echoFileInfo(0)
            .fileName = fileName
            .mimeType = "application/msword"
            .file = file
        End With

        Dim echoDocumentInfo As com.echosign.secure.DocumentCreationInfo = New com.echosign.secure.DocumentCreationInfo()
        With echoDocumentInfo
            .tos = recipients
            .name = fileName
            .message = message
            .fileInfos = echoFileInfo
            .signatureType = SignatureType.ESIGN
            .signatureFlow = SignatureFlow.SENDER_SIGNATURE_NOT_REQUIRED
            .daysUntilSigningDeadline = expireDays
        End With

        Dim echoKey() As DocumentKey
        echoKey = ES.sendDocument(apiKey, localSenderInfo, echoDocumentInfo)

        Return echoKey(0).documentKey.ToString()

    Catch ex As Exception

        Return "EchoError: " & ex.Message

    End Try

End Function 
```

任何帮助都是最受欢迎的

谢谢

理查德

# imagemagick - 如何使用 imagemagick 对文本进行着色？

> ID：10500179
> 
> 赞同：0
> 
> 时间：2012-05-08T14:03:14.173
> 
> 标签：imagemagick

我想知道如何在 jpeg 的底部添加阴影版权文本。目前我只是使用：

```
convert input.jpg  -font /usr/share/fonts/truetype/pointfree/pointfree.ttf -pointsize 15 -fill white -gravity SouthEast -strokewidth 3 -annotate +0+5 "  @blabla.com  " "output.jpg" 
```

这样做的问题是，当背景很亮时，文本会消失。我知道我可以添加一个标志

```
-undercolor '#00000080' 
```

但我发现这相当突兀，因此寻找更好的解决方案，使文本明显更独立于背景颜色。注意：图像大小不同，因此我无法对文本的协调进行硬编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:33:23.623

试试这个：

```
convert input.jpg  -font /usr/share/fonts/truetype/pointfree/pointfree.ttf -pointsize 15 -gravity SouthEast -strokewidth 3 -fill black -annotate +2+7 "  @blabla.com  "-fill white -annotate +0+5 "  @blabla.com  " "output.jpg" 
```

一位成员在 imagemagick 论坛上发表了一篇帖子，该帖子考虑了文本下方的颜色并生成了白色或黑色水印以适应。前几天我在找它，但找不到它。这是一个来自内存的批处理脚本。

我不得不在此处添加评论，因为我在尝试添加评论时收到了一些我不理解的关于通知的消息。

对不起，我在这里漏掉了一个空格“@blabla.com”-fill 应该是“@blabla.com”-fill 命令行很长，如果你把它分成不同的行会更容易使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:33:21.477

好的，最后我找到了一个很好的批处理解决方案：

```
for FILE in *.jpg; do convert $FILE -gravity southeast -stroke '#000C' -strokewidth 2 -annotate 0 'blabla.com' -stroke  none   -fill white    -annotate 0 'blabla.com' $FILE; done 
```

# c - 简单功能的显示响应时间似乎太慢

> ID：10500191
> 
> 赞同：1
> 
> 时间：2012-05-08T14:03:43.673
> 
> 标签：c, gtk, gtk2

我使用 GTK 2.0 用 C 语言编写了一个应用程序，用于带有运行 debian linux 的 ARM 处理器的触摸屏面板。这是一个非常基本的应用程序，在屏幕上显示了一些可以单击的按钮（事件框）。在一个页面上，我有 4 个字段来呈现一个“列表”，可以通过单击向上箭头和向下箭头（也是事件框）滚动浏览。我的滚动功能（下面的代码）非常基本......它只是用数组中的下一个项目更新每个字段。一切正常，但我看到的问题是，如果您反复单击滚动按钮有点太快，它会跳到一些列表项太远。我对正在发生的事情的猜测是，当点击太快时，计数器的前进速度超过了屏幕的更新速度，这样当您再次单击时，它实际上正在使用当时太高的计数器进行更新。如果它仅在真正快速单击时发生，我不会担心，但我认为对于这样一个以相当快的速度重复的简单功能来说，缓慢的响应似乎有些不合时宜。

我希望也许有人对我在使用 GTK 的屏幕刷新方面可能遗漏的东西有一些意见？

提前感谢您的任何想法或建议！

这是我的“提高音量”功能和“向上滚动”功能的代码，它们都有同样的问题。有相应的“向下滚动”和“降低音量”功能具有相同的问题：

```
static void sr_vol_up_clicked (GtkWidget *fakewidget, GdkEvent *fakeevent, gpointer number)
{

g_timer_start(lock_timer);
gtk_image_set_from_file (GTK_IMAGE(sr_vol_up_button),"./images/Admin/navigation_up_arrow_DOWN.png");

if (sr_current_level < 100)
{
    sr_current_level = sr_current_level + 1;
    gtk_label_set_text (GTK_LABEL(sr_current_level_label), (g_strdup_printf("%i", sr_current_level)));
    set_sr_volume(sr_current_level);
}

gtk_image_set_from_file (GTK_IMAGE(sr_vol_up_button),"./images/Admin/navigation_up_arrow_UP.png");

} 
```

和另一个：

```
static void scroll_show_up ()
{
g_timer_start(lock_timer);
if (show_scroll_count > 0)
{

    if (show_one_displayed - 1 < 0)
    {
        show_one_displayed = (show_loop_list->len -1);
    }

    else
    {
        show_one_displayed = show_one_displayed - 1;
    }

    gtk_label_set_text (GTK_LABEL(upcoming_show_1_label), get_show_name((char *)g_ptr_array_index(show_loop_list, show_one_displayed)));

    if (show_two_displayed - 1 < 0)
    {
        show_two_displayed = (show_loop_list->len -1);
    }

    else
    {       
        show_two_displayed = show_two_displayed - 1;
    }

    gtk_label_set_text (GTK_LABEL(upcoming_show_2_label), get_show_name((char *)g_ptr_array_index(show_loop_list, show_two_displayed)));

    if (show_three_displayed - 1 < 0)
    {
        show_three_displayed = (show_loop_list->len -1);
    }

    else
    {
        show_three_displayed = show_three_displayed - 1;
    }

    gtk_label_set_text (GTK_LABEL(upcoming_show_3_label), get_show_name((char *)g_ptr_array_index(show_loop_list, show_three_displayed)));

    if (show_four_displayed - 1 < 0)
    {
        show_four_displayed = (show_loop_list->len -1);
    }

    else
    {
        show_four_displayed = show_four_displayed - 1;
    }

    gtk_label_set_text (GTK_LABEL(upcoming_show_4_label), get_show_name((char *)g_ptr_array_index(show_loop_list, show_four_displayed)));

    show_scroll_count = show_scroll_count - 1;

}
} 
```

# c# - 如何动态添加 ToolStripMenuItems

> ID：10500196
> 
> 赞同：1
> 
> 时间：2012-05-08T14:03:54.530
> 
> 标签：c#, winforms, contextmenustrip, menustrip

```
sqlstr = "select ModuleName,ModuleId,pagename from modules WHERE ParentID='" + parentID + "' AND VIsibility=1 ORDER BY ModuleId";

cmd.CommandText = sqlstr;
cmd.Connection = cn; ;
dr = cmd.ExecuteReader();

while (dr.Read())
{
    menu.Tag = dr["ModuleId"].ToString();
    menu.Text = dr["ModuleName"].ToString();
    menu.Name = dr["pagename"].ToString();
    menu.ToolTipText = dr["pagename"].ToString();
    menuStrip1.Items.Add(menu);
    menuStrip1.Show();
}

cn.Close();
dr.Close(); 
```

仅添加查询中的最后一项。如何添加查询中的所有项

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:08:11.710

```
while (dr.Read())
{
    // If you don't do this, you are just changing the same
    // ToolStripMenuItem object all the time.
    menu = new ToolStripMenuItem();

    menu.Tag = dr["ModuleId"].ToString();
    menu.Text = dr["ModuleName"].ToString();
    menu.Name = dr["pagename"].ToString();
    menu.ToolTipText = dr["pagename"].ToString();
    menuStrip1.Items.Add(menu);
    menuStrip1.Show();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:08:00.947

每次都必须在循环中创建一个新的 ToolStripMenuItem。您只需继续覆盖同一菜单实例上的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T14:10:25.203

每次阅读新行时尝试创建一个新的菜单实例。

像这样的东西：

```
 while (dr.Read())
 {
    var menu = new ToolStripMenuItem();

    ...
 } 
```

# java - 放心的请求不起作用

> ID：10500202
> 
> 赞同：6
> 
> 时间：2012-05-08T14:04:20.943
> 
> 标签：java, rest, rest-assured

我正在使用 Rest-Assured 来测试我的 Rest API。网络服务似乎运行正常，因为正在运行

```
 curl -u "admin:admin" http://localhost:8888/users/ 
```

我将我的用户作为 json。

然后，当尝试使用 Rest-Assured 进行简单请求时

```
 RestAssured.authentication = basic("admin", "admin");

  expect().statusCode(200).when().get("http://localhost:8888/users/"); 
```

给我输出

```
 Exception in thread "main" org.apache.http.conn.HttpHostConnectException: Connection to http://localhost:8888 refused
at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:158)
… 
```

这会是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T22:05:52.700

解决了。从 更改`localhost`为`127.0.0.1`并且它起作用了。cURL/浏览器都与 localhost 一起工作有点奇怪。猜猜这可能是一个路由问题。

# android - 线性布局在两个线性布局之间垂直居中

> ID：10500208
> 
> 赞同：0
> 
> 时间：2012-05-08T14:05:03.927
> 
> 标签：android, android-linearlayout, vertical-alignment

我需要做一个像图片中的布局，使用 3 线性布局，或相对布局或任何类似的。中间的线性布局必须根据顶部的第一个 ll 和底部的第三个 ll 之间的自由空间来调整高度。底部的 ll 必须固定在那里。 ![在此处输入图像描述](../Images/15dff1147c2fd206bea46edd3f8a0b30.png)

我能怎么做？

谢谢， 马蒂亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:09:53.160

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1">

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

    </LinearLayout>

</LinearLayout> 
```

这里重要的是`android:layout_weight="1"` 在第二个布局

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:09:14.313

用这个

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout 
        android:id="@+id/ui_main_header"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:orientation="horizontal"/>

    <LinearLayout 
        android:id="@+id/ui_main_footer"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:orientation="horizontal"/>

    <LinearLayout 
        android:id="@+id/ui_main_center"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"

        android:layout_below="@id/ui_main_header"
        android:layout_above="@id/ui_main_footer"

        android:orientation="vertical"/>

</RelativeLayout> 
```

# asp.net-mvc - Timepicker 字段必须是日期 - 验证失败

> ID：10500212
> 
> 赞同：2
> 
> 时间：2012-05-08T14:05:14.283
> 
> 标签：asp.net-mvc, validation

我的代码类似于这个：[http ://demos.telerik.com/aspnet-mvc/grid/editingajax](http://demos.telerik.com/aspnet-mvc/grid/editingajax)

DateTime 部分视图：

```
@model DateTime?
@( Html.Telerik().DatePickerFor(m => m) ) 
```

和网格中的绑定：

```
columns.Bound(p => p.Timestamp).Width(110); 
```

我的模型类中的字段：

```
public DateTime Timestamp
    {
        get; set;
    } 
```

但是，当我一天输入大于 12 的值时，我收到错误，该字段必须是日期。这太烦人了！如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-30T19:49:45.490

数据注释可以为 DatePicker 提供正确的数据类型来使用。将以下数据注释添加到类属性声明中：

```
[DataType(DataType.Time)] 
```

剃刀视图：

```
@model DateTime?
@( Html.Telerik().DatePickerFor(m => m) ) 
```

捆绑：

```
columns.Bound(p => p.Timestamp).Width(110); 
```

班级：

```
[DataType(DataType.Time)]
public DateTime Timestamp
{
    get; set;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T10:00:51.327

我有一个类似的问题。经过多次挠头和反复试验，这对我有用。

时间局部视图

```
@model DateTime?

@(Html.Kendo().TimePickerFor(m => m)
.Min(new DateTime(2010, 1, 1, 10, 0, 0)) //Set min time of the timepicker
      .Max(new DateTime(2010, 1, 1, 20, 0, 0)) //Set min date of the timepicker
      .Value(DateTime.Now) //Set the value of the timepicker
) 
```

视图模型

```
[Required(AllowEmptyStrings = false, ErrorMessage = "Please select a start time")]
[Display(Name = "Start time")]
[DataType(DataType.Time)]
[UIHint("Time")]
public DateTime StartTime { get; set; } 
```

风景

```
@Html.EditorFor(model=>model.StartTime)
@Html.ValidationMessageFor(model=>model.StartTime) 
```

不显眼的验证现在似乎起作用了，并且似乎没有出现错误消息“开始时间必须是日期”。如果 timepicker 框未填写，它仍然无法验证。希望这可以帮助。

# solr - 在 SolrNet 中使用 score 字段

> ID：10500213
> 
> 赞同：1
> 
> 时间：2012-05-08T14:05:14.803
> 
> 标签：solr, solrnet

我正在使用 SolrNet，并且遇到一个问题，即 score 字段与索引中添加或更新的文档冲突。

代表我的文档的类看起来像这样

```
class MyDoc
{
    [SolrUniqueKey("doc_id")]
    public string DocId { get; set; }

    [SolrField("foo")]
    public string Foo { get; set; }

    [SolrField("bar")]
    public string Bar { get; set; }

    [SolrField("score")]
    public double Score { get; set; }
} 
```

在向 Solr 发出的查询中，我已将 'score' 字段添加到`fl`参数中，并且在此类上返回并正确设置了分数值。但是，在添加或更新文档时，我收到关于我的索引中不存在的分数字段的错误，它不存在，也不应该因为这是一个动态字段。

执行添加/更新的代码相当简单：

```
Startup.Container.GetInstance<ISolrOperations<MyDoc>>().Add(doc); 
```

看起来我需要在添加或更新文档时被 SolrNet（或 Solr）忽略 score 属性，并且仅在检索文档时使用它。

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:24:18.827

我通过开设两个单独的课程来实现这一点。一个映射到作为搜索结果从索引中检索到的文档，另一个用于将项目添加到索引中。因此，在这种情况下，您可以执行以下操作：

```
 class MyDoc
 {
      [SolrUniqueKey("doc_id")]
      public string DocId { get; set; }

      [SolrField("foo")]
      public string Foo { get; set; }

      [SolrField("bar")]
      public string Bar { get; set; }
 }

 class MyDocResult
 {
      [SolrUniqueKey("doc_id")]
      public string DocId { get; set; }

      [SolrField("foo")]
      public string Foo { get; set; }

      [SolrField("bar")]
      public string Bar { get; set; }

      [SolrField("score")]
      public double Score { get; set; }
 } 
```

确保初始化两个指向相同 solr url 的类。Startup.Init("http://localhost:8983/solr"); Startup.Init("http://localhost:8983/solr");

然后你可以添加：

```
 ServiceLocator.Current.GetInstance<ISolrOperations<MyDoc>>().Add(doc); 
```

并查询：

```
 var solr ServiceLocator.Current.GetInstance<ISolrOperations<MyDocResult>>();
  var results = solr.Query("foo bar"); 
```

如果您不想创建两个单独的类，您还可以考虑使用 SolrNet 的[动态或完全松散映射选项。](http://code.google.com/p/solrnet/wiki/Mapping)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-16T15:17:51.633

如果您使 POCO 类的 Score 可以为空，则可以使用相同的对象进行索引和结果

```
[SolrField("score")]
public double? Score { get; set; } 
```

# php - PDO 事务和函数调用

> ID：10500217
> 
> 赞同：13
> 
> 时间：2012-05-08T14:05:27.403
> 
> 标签：php, mysql, transactions, pdo

函数调用可以发生在 PDO 事务块中吗？这是简化的代码（使用 MySql 数据库）...

```
try{  
  $db->beginTransaction();  

  // call to function that creates user
  $user_id = create_user();  

  // call to function that creates company      
  $company_id = create_company();

  // call to function to link user & company
  add_user_to_company($user_id, $company_id);

  $db->commit();  
} 
```

如果使用事务不能做到这一点，推荐的策略是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-08T14:07:29.227

除非这些函数调用中的任何一个尝试自己打开或提交事务，或者使用与存储在不同的连接`$db`，否则它应该可以正常工作。PDO 对象（或就此而言的 RDBMS）不知道也不关心您是否正在调用 PHP 中的其他函数。它所知道的只是该操作是否发生在与打开的连接相同的打开连接上`$db`。我们假设这些函数要么`$db`作为参数接收，要么全局访问它。

请记住，虽然 PDO 跟踪事务状态（通过 公开`PDO::inTransaction()`），但实际上是 RDBMS 管理事务状态，而不是 PDO 或 PHP 应用程序代码。如果一个函数试图在前一个事务提交之前打开一个新事务，[MySQL 的记录行为](http://dev.mysql.com/doc/refman/5.5/en/implicit-commit.html)是自动提交前一个事务，因为它不支持事务嵌套。

所以只要确保你的附加函数调用没有试图改变事务状态。

# c# - 如何从 C#/WPF 中的嵌套属性获取通知？

> ID：10500219
> 
> 赞同：1
> 
> 时间：2012-05-08T14:05:34.707
> 
> 标签：c#, wpf, binding, propertychanged

我的视图模型中有以下属性，并且视图绑定到该属性。

`ActiveCategory`除了（在 中`_catManager`）可以从其他事件（在此视图之外）更改的特殊情况外，一切正常。

我不想`Category Manager`在视图模型中公开整个，所以我只公开我需要的属性。这样做的最佳方法是什么，以便视图收到所有更改的通知，即使是那些未在此视图模型中触发的更改？

```
 public ICategory SelectedCategory
     {
      get
       {
        return _catManager.ActiveCategory;
       }
      set
       {
        _catManager.ActiveCategory = value;
        OnPropertyChanged("SelectedCategory");
       }
     } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T14:11:43.660

让您的视图模型挂钩到 _catManager 的 INotifyPropertyChanged 事件，并让它通过视图模型中继属性更改事件。当您看到“ActiveCategory”通过时，这意味着您需要为“SelectedCategory”提高 INPC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:17:19.100

您还需要将通知委托给任何类 _catManager 。

因此，对其 ActiveCategory 属性的更改会引发通知。

一种方法是在将其作为属性的类中添加一个处理程序，然后发出通知，它的 _catManager 已以某种方式更改。

# linux-kernel - 在 insmod 之后，我无法在 /proc/devices 中看到设备条目

> ID：10500220
> 
> 赞同：0
> 
> 时间：2012-05-08T14:05:35.860
> 
> 标签：linux-kernel, device-driver

执行命令“insmod demo_device”后，/proc/modules 中列出的模块

```
**demo_device 2528 0 - Live 0xe02da000**
fp_indicators 5072 1 - Live 0xe02d2000 (P)
screader 22672 1 - Live 0xe02c5000 (P)
icamdescrambler 12912 0 - Live 0xe02b2000 (P)
icamemmfilter 16208 0 - Live 0xe02a4000 (P)
icamecmfilter 14992 0 - Live 0xe0294000 (P) 
```

但在那之后“（P）”就没有用了。

触发命令后`cat /proc/devices`，设备“demo_device”未在此处列出。

所以我的问题是：什么（P）在（`cat /proc/modules`）中以及设备未在（）中列出的原因是什么`cat /proc/devices`。

提前致谢 ！！

源代码如下：

```
#include <linux/module.h>
#include <linux/kernel.h>
#include <linux/version.h>
#include <linux/fs.h>
#include <linux/cdev.h>
#include <linux/device.h>
#include <linux/errno.h>
#include <asm/uaccess.h>
#include "query_ioctl.h"

#define FIRST_MINOR 0
#define MINOR_CNT 1

static dev_t dev;
static struct cdev c_dev;
static struct class *cl;
static int status = 1, dignity = 3, ego = 5;

static int my_open(struct inode *i, struct file *f)
{
    return 0;
}
static int my_close(struct inode *i, struct file *f)
{
    return 0;
}
#if (LINUX_VERSION_CODE < KERNEL_VERSION(2,6,35))
static int my_ioctl(struct inode *i, struct file *f, unsigned int cmd, unsigned long arg)
#else
static long my_ioctl(struct file *f, unsigned int cmd, unsigned long arg)
#endif
{
    query_arg_t q;

    switch (cmd)
    {
        case QUERY_GET_VARIABLES:
            q.status = status;
            q.dignity = dignity;
            q.ego = ego;
            if (copy_to_user((query_arg_t *)arg, &q, sizeof(query_arg_t)))
            {
                return -EACCES;
            }
            break;
        case QUERY_CLR_VARIABLES:
            status = 0;
            dignity = 0;
            ego = 0;
            break;
        case QUERY_SET_VARIABLES:
            if (copy_from_user(&q, (query_arg_t *)arg, sizeof(query_arg_t)))
            {
                return -EACCES;
            }
            status = q.status;
            dignity = q.dignity;
            ego = q.ego;
            break;
        default:
            return -EINVAL;
    }

    return 0;
}

static struct file_operations query_fops =
{
    .owner = THIS_MODULE,
    .open = my_open,
    .release = my_close,
#if (LINUX_VERSION_CODE < KERNEL_VERSION(2,6,35))
    .ioctl = my_ioctl
#else
    .unlocked_ioctl = my_ioctl
#endif
};

static int __init query_ioctl_init(void)
{
    int ret;
    struct device *dev_ret;

    printk("Before calling alloc\n");
    dev=150;
    if ((ret = register_chrdev_region(dev, MINOR_CNT, "demo_device")))
    {
        return ret;
    }
    else if((ret = alloc_chrdev_region(&dev,0,MINOR_CNT,"demo_device")))
    {
        return ret;
    }
    printk("After alloc %d %d\n",ret,dev);

    cdev_init(&c_dev, &query_fops);

    if ((ret = cdev_add(&c_dev, dev, MINOR_CNT)) < 0)
    {
        return ret;
    }
    printk("After cdev_add\n");

    if (IS_ERR(cl = class_create(THIS_MODULE, "char")))
    {
        cdev_del(&c_dev);
        unregister_chrdev_region(dev, MINOR_CNT);
        return PTR_ERR(cl);
    }
    printk("After class_create\n");

    if (IS_ERR(dev_ret = device_create(cl, NULL, dev, NULL, "demo")))
    {
        class_destroy(cl);
        cdev_del(&c_dev);
        unregister_chrdev_region(dev, MINOR_CNT);
        return PTR_ERR(dev_ret);
    }
    printk("After device_create\n");

    return 0;
}

static void __exit query_ioctl_exit(void)
{
    device_destroy(cl, dev);
    class_destroy(cl);
    cdev_del(&c_dev);
    unregister_chrdev_region(dev, MINOR_CNT);
}

module_init(query_ioctl_init);
module_exit(query_ioctl_exit);

MODULE_LICENSE("GPL"); 
```

插入模块后，我可以看到这些消息：

$insmod demo_device.ko
调用前 alloc
后 alloc 0 217055232
后 cdev_add
后 class_create
后 device_create
$

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:44:56.897

查看`module_flags_taint()`kernel/module.c。

“P”标志仅表明其他模块是专有的。您的设备未显示的原因可能是因为初始化有问题，但除非您*向我们展示代码*`/proc/devices`，否则我们无法帮助您。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:56:09.827

在对 linux/应用程序源代码执行 make clean 并再次重建它之后......让它工作。现在插入模块后，相应的条目在 /proc/devcies 文件中可见:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-22T05:23:46.873

确保设备的**主要编号**没有被其他设备文件占用。使用以下命令检查占用的主要编号

```
 cat /proc/devices 
```

使用以下代码在 init 函数中捕获初始化错误

```
 int t=register_chrdev(majorNumber,"mydev",&fops);

   if(t<0)
   printk(KERN_ALERT "device registration failed."); 
```

使用**dmesg**查看内核日志*

# iphone - NSMutableArray(of dictionaries) 基于另一个数组的洗牌数组

> ID：10500222
> 
> 赞同：1
> 
> 时间：2012-05-08T14:05:39.820
> 
> 标签：iphone, objective-c, ios, xcode

已经有很多关于 NSMutableArray 排序的问题仍然无法找到我的问题的确切解决方案。请跟进：

我有一个像这样的**arrMasterArray**：

```
 //This is an array of dictionaries with each element having dictionary at its index and key-value for the same.
    <__NSArrayM 0x8bbaca0>(
    {
        "Brand_Description" = Accolate;
        "Medication_DateStart" = "5/5/2012 12:00:00 AM";
    },{
        "Brand_Description" =Trisenox;
        "Medication_DateStart" = "5/5/2012 12:00:00 AM";
    }, {
        "Brand_Description" = Ultiva;
        "Medication_DateStart" = "5/5/2012 12:00:00 AM";
    } ,{
        "Brand_Description" = Accretropin;
        "Medication_DateStart" = "5/5/2012 12:00:00 AM";
    } 
```

**我在arrMasterArray**上应用排序，它返回一个排序数组，但只有该特定 keyPath 的元素：

```
NSArray *arrNameCompare= [[arrMasterArray valueForKeyPath:@"Brand_Description"] sortedArrayUsingSelector:@selector(compare:)]; 
```

输出如下内容：

> ```
> <__NSArrayI 0x10e0efb0>(
> Accolate,
> Accretropin,
> Trisenox,
> Ultiva
> ) 
> ```

现在我希望**arrMasterArray**根据`**arrNameCompare**`.

我搜索了很多，但没有运气。感谢您的耐心和对不起我的英语。再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:22:10.643

我想你可能会读到这个帖子。它会帮助你

[如何使用 sortedArrayUsingDescriptors 对 NSMutableArray 进行排序？](https://stackoverflow.com/questions/1844031/how-to-sort-nsmutablearray-using-sortedarrayusingdescriptors)

也为了更多这个

[如何对包含自定义对象的 NSMutableArray 进行排序？](https://stackoverflow.com/questions/805547/how-to-sort-an-nsmutablearray-with-custom-objects-in-it)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:11:15.657

我认为您正在寻找的是 NSMutableArray 方法 sortUsingDescriptors:。此方法“就地”对您的（可变）数组进行排序，而不是创建一个新数组，如 sortedArrayUsingSelector:。所以，如果我理解你想要做什么，那么这些行将根据 Brand_Description 的值对 arrMasterArray 进行排序：

```
 NSSortDescriptor *sorter = [NSSortDescriptor sortDescriptorWithKey:@"Brand_Description" ascending:YES];
 [arrMasterArray sortUsingDescriptors:[NSArray arrayWithObject:sorter]]; 
```

# c# - 从网站获取html

> ID：10500223
> 
> 赞同：1
> 
> 时间：2012-05-08T14:05:41.637
> 
> 标签：c#, silverlight, windows-phone-7, httpwebrequest

我可以通过这种方式从网站获取 html 代码：

```
public void Test()
{
    WebClient client = new WebClient();
    client.DownloadStringCompleted += 
        new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);
    client.DownloadStringAsync(new Uri("http://testUrl.xml"));
}

void client_DownloadStringCompleted(object sender, 
                                    DownloadStringCompletedEventArgs e)
{
    string html = e.Result;
    //Now do something with the string...
} 
```

但我需要每 30 秒更新一次 html，所以我写道：

```
public void TestMain()
{

    DispatcherTimer Timer = new DispatcherTimer()
    {
        Interval = TimeSpan.FromSeconds(30)
    };
    Timer.Tick += (s, t) =>
    {
        Test();
    };
    Timer.Start();
} 
```

我更改了xml，但我得到了相同的html，怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:27:45.870

中包含一个缓存`WebClient`。如果您两次请求相同的 URI，第二次它将直接从缓存中获取整个内容。

无法在 上禁用缓存`WebClient`，因此您有两种解决方法：

*   使用`HttpWebRequest`代替`WebClient`
*   向 URI 添加一个随机参数：

    ```
    client.DownloadStringAsync(new Uri("http://testUrl.xml?nocache=" + Guid.NewGuid())); 
    ```

# git - 如何在 GitHub 上托管的文件中推进版本字符串？

> ID：10500224
> 
> 赞同：1
> 
> 时间：2012-05-08T14:05:48.487
> 
> 标签：git, githooks

我在 GitHub 上有一个存储库，我希望存储库在每次提交/推送时更改特定文件，以将修订号作为版本字符串的一部分包含在内。

即我的版本字符串如下所示：

```
/**
 * Filename
 * @version 1.0.{REVISION}
 */ 
```

我希望将 {REVISION} 字符串替换为相关的修订号。

这可能吗？如果是这样怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:10:16.700

您尝试做的通常称为“RCS 标签”。

您将不得不依靠 git filter 来完成这项工作。谷歌搜索带来了以下[GitHub 项目](https://github.com/turon/git-rcs-keywords)。

假设“修订号”实际上是指“提交 ID”，那么您的标题将变为：

```
/**
 * Filename
 * @version 1.0.$Revision$
 */ 
```

然而，在许多情况下，这被视为冗余信息（尽管这只是个人喜好问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:58:43.070

ProGit 书[详细介绍了如何实现关键字扩展](http://git-scm.com/book/en/Customizing-Git-Git-Attributes#Keyword-Expansion)。

# javascript - 移动设备上的 Javascript 支持

> ID：10500228
> 
> 赞同：4
> 
> 时间：2012-05-08T14:06:01.833
> 
> 标签：javascript, mobile, cross-browser

这篇文章中有一个类似的问题： [javascript是否可以在手机上运行？](https://stackoverflow.com/questions/1538004/does-javascript-work-on-mobile-phones)

问题是这个问题是在 2009 年提出的，现在移动设备的 javascript 支持是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T14:11:30.290

基本上只要你想要的。大多数手机都在运行某些版本的 WebKit（Chrome 运行的版本），因此如果您正在为移动设备开发，几乎可以保证比 IE8 提供的更好的支持。

编辑：**Joe Tuskan**所说的。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:12:31.007

JavaScript 支持在现代移动浏览器上非常好。Firefox 和 Chrome 的移动版本为 HTML5（CSS3+JavaScript+HTML）功能提供了相当多的桌面级支持。

**HTML5 移动支持** [http://mobilehtml5.org/](http://mobilehtml5.org/)

**跨桌面/移动的 JavaScript 功能** [http://caniuse.com/#cats=JS_API](http://caniuse.com/#cats=JS_API)

说明现代移动浏览器令人印象深刻的 JavaScript 性能可能也是值得的，我最近比较了桌面与移动浏览器的性能，请参见此处： [移动浏览器与桌面相比有多强大？](https://stackoverflow.com/questions/10489901/how-powerful-are-mobile-browsers-compared-to-desktops/10489942#10489942)

# javascript - JavaScript OOP：带或不带“原型”的方法定义

> ID：10500233
> 
> 赞同：14
> 
> 时间：2012-05-08T14:06:22.040
> 
> 标签：javascript, oop, methods, prototype

是这个代码，

```
function Person() {
    function  myMethod() {
        alert ('hello');
    }
    this.method = myMethod;
} 
```

相当于：

```
function Person() {    }
Person.prototype.method2  = function() {
    alert ('hello');
}; 
```

如果是，我应该使用哪种方法定义，为什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-08T14:10:30.860

在您的简单示例中，它们在功能上是等效的，但在幕后的工作方式却大不相同。函数的`prototype`属性实际上是“原型模板”。它说“每当制作一个对象并且我被用作对象的构造函数时，就给他们这个对象作为他们的原型”。

因此`Person`，在您的第二个示例中创建的所有 s 共享该`method2`方法的相同副本。

在第一个示例中，解释器每次遇到`function`关键字时，都会创建一个新的函数对象。所以在第一个例子中，每个实例`Person`都有自己的`myMethod`方法副本。绝大多数时候这无关紧要。但是第一种方法使用更多的内存，有时这确实很重要。

在更有趣的情况下，它们在功能上并不等效。在第一个示例中，`myMethod`可以访问定义在 中的局部变量`Person`，但第二个示例不能，作为一个区别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T14:11:57.793

在第一种情况下，当您创建一个新人时`var person1 = new Person();`，它将拥有自己的`myMethod`. 如果你创建了 100 个 Person 对象，它们每个都有自己的这个方法的副本。

使用原型，每个新的 Person 对象都将共享方法定义。由于该方法只有一个副本，因此内存效率要高得多。

如果您打算拥有多个 Person 对象，则第二种方法更好。但是如果只有几个 Person 对象，那也没关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T14:16:02.410

它不完全等价。

在这两种情况下，您都在全局命名空间中定义了一个函数（构造函数）`Person()`。

在第一种情况下，您在函数`myMethod()`内部的闭包中定义一个新`Person()`函数。通常，`myMethod()`函数/构造函数完成后该函数将不可用`Person()`。但是，在这种情况下，您将其分配给`this.method`. 因此，当您运行构造函数时

```
var myPerson = new Person(); 
```

创建一个新对象，然后调用该`Person()`函数并将其`this`设置为新对象。因此，您的新对象会收到一个绑定`method`了函数的字段。`myMethod`

在第二种情况下，`method2`在`Person.prototype`. 在这种情况下，当您调用

```
var myPerson = new Person(); 
```

新对象内部不会直接定义任何字段（因为您`this`在函数中什么也不做`Person`）。但是，每个对象都包含对其原型的引用。如果对象是通过调用创建的`Person()`，则此引用设置为`Person.prototype`。因此，您的对象最终将包含`method2`，尽管不是直接在其自身中，而是在原型中。所以当你打电话

```
myPerson.method2(); 
```

解释器`method2`在对象内部`myPerson`寻找并没有找到任何东西，然后它查看 的原型`myPerson`，即`Person.prototype`并找到`method2`，所以它调用它。

长话短说：首先你的构造函数创建了方法，所以每次调用构造函数时，都会创建一个新方法并将其插入到新对象中。在第二种情况下，方法存储在原型中，因此您创建的每个对象都将引用您的方法的同一实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T14:09:54.393

不，它们不相等。虽然，它们很相似。第一种方法将为`myMethod`每个`new Person()`创建的函数创建一个新函数。

第二种方法将具有一个`method2`由所有人“共享”的功能`Person's`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T14:12:55.943

它们具有相似的功能，但您应该使用第二种方法（原型），因为当您使用`new Person()`每个对象创建一个对象时，每个对象都将共享相同的内容`method2`，但使用第一种方法，每个新对象都将拥有自己的`myMethod()`，这将消耗 moe 内存。

**几天前我问了一个类似的问题并得到了** [**这个答案**](https://stackoverflow.com/questions/10156702/oop-javascript-and-simple-class-instantiation)。

# c# - 从下拉列表中选择值时不显示 GridView

> ID：10500235
> 
> 赞同：0
> 
> 时间：2012-05-08T14:06:31.303
> 
> 标签：c#, asp.net, ms-access, gridview, drop-down-menu

我有一个 DropDownList 列出了数据库表（.accdb）中的用户，还有一个 GridView 应该列出用户登录时存储在同一数据库的另一个表中的日期。

我将下拉列表与链接到用户表的 ObjectDataSource 和 gridview 链接到链接到 lof 表并具有如下选择查询的 objectdatasource 链接：

```
SELECT        Data
FROM            log
WHERE  (User = ?) 
```

我将参数设置为在 DropDownList 中选择的参数。

这是我的问题：DropDownList 正确显示了所有用户，但 GridView 甚至没有显示在页面上。我尝试使用回发和 GridView.DataBind() 但没有一个有效。

我很确定这是我犯的一个愚蠢的错误，但我找不到它。

生成的 ASPX 代码：

```
<asp:DropDownList ID="DropDownList1" runat="server" 
            DataSourceID="ObjectDataSource1" DataTextField="Utilizator" 
            DataValueField="ID" 
            onselectedindexchanged="DropDownList1_SelectedIndexChanged" 
            AutoPostBack="True">
        </asp:DropDownList>
        <asp:ObjectDataSource ID="ObjectDataSource1" runat="server" 
            OldValuesParameterFormatString="original_{0}" SelectMethod="GetData" 
            TypeName="DataSet1TableAdapters.DataTable1TableAdapter">
        </asp:ObjectDataSource>
        <asp:ObjectDataSource ID="ObjectDataSource2" runat="server" 
            InsertMethod="Insert" OldValuesParameterFormatString="original_{0}" 
            SelectMethod="GetDataBy" TypeName="DataSet1TableAdapters.logTableAdapter">
            <InsertParameters>
                <asp:Parameter Name="Data" Type="String" />
                <asp:Parameter Name="Utilizator" Type="String" />
            </InsertParameters>
            <SelectParameters>
                <asp:ControlParameter ControlID="DropDownList1" DefaultValue="" 
                    Name="Utilizator" PropertyName="SelectedValue" Type="String" />
            </SelectParameters>
        </asp:ObjectDataSource>
        <br />
        <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
            DataSourceID="ObjectDataSource2" Height="145px" Width="107px">
            <Columns>
                <asp:BoundField DataField="Data" HeaderText="Data" SortExpression="Data" />
            </Columns>
        </asp:GridView> 
```

# python - 是否有在报告实验室中获取浮动 div 的解决方法？

> ID：10500237
> 
> 赞同：2
> 
> 时间：2012-05-08T14:06:36.423
> 
> 标签：python, pdf, pdf-generation, reportlab, xhtml2pdf

我使用 xhtml2pdf Python 包生成 PDF。输出不是最优的。我使用浮动 div 来在页面上放置图像和文本。在 HTML 中这是可行的，但在 PDF 渲染之后，图像和文本会放在彼此下方，这不是我想要的。从网上冲浪我了解到 xhtml2pdf 使用的 Report Lab 包不能处理浮动 div。是否存在解决方法？我曾尝试通过 QT 进行 webkit 渲染，但生成的 PDF 质量低，即字符间距完全错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:35:36.420

如果使用 xhtml2pdf 无法达到您需要的结果，我建议您直接使用 ReportLab。ReportLab 包含对 RML 的支持，ReportLabs 自己的标记语言可以让您轻松创建格式化文本，并且有一个名为 Platypus 的支持库，它使用 Python 对象来表示文档部分和页面布局，使布局变得相当简单。

顺便说一句，您遇到问题的原因是 xhtml2pdf 本质上必须像 HTML 渲染引擎一样输出到 PDF 而不是直接输出到屏幕。由于为浏览器制作良好的渲染引擎需要很长时间和大量的努力，因此，xhtml2pdf 似乎也需要花费很多努力才能使其具有相似的质量。这并不是说 xhtml2pdf 不好，只是它需要时间才能像在浏览器中呈现一样好，如果 PDF 输出本身是你真正感兴趣的，我认为使用 ReportLab直接是更好的选择。

# ruby-on-rails - Rails、redmine、插件文件夹名称

> ID：10500240
> 
> 赞同：0
> 
> 时间：2012-05-08T14:06:55.517
> 
> 标签：ruby-on-rails, plugins, path, directory, redmine

我想知道是否有可能在 rails 插件上获取路径或文件夹名称。

在 Rails 中，我们可以使用 Rails.root 或 RAILS_ROOT 获取 root 路径。但我需要安装插件的文件夹的路径或名称。

我试图在 redmine 插件中做到这一点，但如果存在任何获取 rails 插件路径或文件夹的通用方法，我可以将其实现为 redmine。

插件文件夹由安装时的用户定义，如果没有此选项，他必须安装在预定义的文件夹中。

像：

```
{Rails.root}/vendor/plugins/{RailsPlugin.foldername} 
```

使用插件文件夹名称，我可以优化 javascript 和样式表的一些调用，并让用户将插件安装在不同的文件夹中，而不会丢失它们的引用：

```
<%= javascript_include_tag 'jquery-1.4.2.min.js', :plugin => 'RailsPlugin.foldername' %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T18:05:27.713

您可以使用控制器上的 File 类获取插件目录：

在 redmine 1.4.x 上

```
File.dirname(__FILE__).gsub(File.join(Rails.root.to_s,'vendor','plugins'),'').split('/')[1] 
```

在 redmine 2.0.x 上

```
File.dirname(__FILE__).gsub(File.join(Rails.root.to_s,'plugins'),'').split('/')[1] 
```

# box-api - API 2.0 如何使用 POSTMAN 上传文件？

> ID：10500241
> 
> 赞同：1
> 
> 时间：2012-05-08T14:06:56.703
> 
> 标签：box-api

我正在阅读 API 2.0 文档并尝试使用 POSTMAN（在文档中推荐）。

在“[上传文件](http://developers.box.com/docs/#files-upload-a-file)”部分，我收到“404 not found”错误。

例如：

{"type":"error","status":404,"code":"not_found","help_url":"","message":"未知错误","re​​quest_id":"11139828924fa91c0d283d2"}

邮递员窗口图像在[这里](https://www.box.com/s/6d8b00d9d1cbe2f615fe)。基本 URL 是“upload.box.com/api/2.0”（根据文档是临时的）。

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T09:59:09.387

还有一点，您的 POSTMAN 请求未`folder_id`在其表单中指明 data 。您需要该“ `folder_id`”值才能使请求生效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T17:08:52.143

特定于域的上传问题已全部解决。您现在可以将所有 API 请求（包括上传）定向到[https://api.box.com/2.0](https://api.box.com/2.0)

# css - *完美*垂直图像对齐

> ID：10500249
> 
> 赞同：13
> 
> 时间：2012-05-08T14:07:22.787
> 
> 标签：css, alignment

我有一个固定大小的方形 div，并希望在其中放置任意大小的图像，以便使用 CSS 水平和垂直居中。水平很容易：

```
.container { text-align: center } 
```

对于垂直，常见的解决方案是：

```
.container {
    height: 50px;
    line-height: 50px;
}
img {
    vertical-align: middle;
} 
```

但这**并不完美**，根据字体大小，图像会下降 2-4px 左右。

据我了解，这是因为用于垂直对齐的“中间”并不是真正的中间，而是靠近中间的字体上的特定位置。一个（有点老套）的解决方法是：

```
container {
    font-size: 0;
} 
```

这适用于 Chrome 和 IE7，但不适用于 IE8。我们希望使所有字体行在中间的同一点，但它似乎是偶然发生的，这取决于浏览器，可能还取决于所使用的字体。

我能想到的唯一解决方案是修改行高，使其略短，以使图像出现在正确的位置，但它看起来非常脆弱。有更好的解决方案吗？

在此处查看所有三种解决方案的演示：http: [//jsfiddle.net/usvrj/3/](http://jsfiddle.net/usvrj/3/)

那些没有 IE8 的人可能会发现这个屏幕截图很有用：

![font-size 设置为 0 时的 IE8 截图](../Images/4a9f88f636160564508fbac2adc83bf9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:29:45.090

使用您的图像作为背景怎么样？这样你就可以在任何地方始终如一地居中。这些方面的东西：

```
margin:5px;
padding:0;
background:url(http://dummyimage.com/50) no-repeat center center red;
height:60px;
width:60px; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-13T11:16:54.010

如果 css3 是一个选项，那么 flexbox 在垂直和水平对齐方面做得很好：

**[更新的小提琴](http://jsfiddle.net/danield770/usvrj/9/)**

```
.container {
    display:flex;
    align-items: center; /* align vertical */
    justify-content: center; /* align horizontal */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T21:33:58.750

这真的很 hacky，但这是我们过去在 ie6 天做的事情。

```
.container {
     position: relative;
}
img {
     position: absolute;
     top: 50%;
     left: 50%;
     margin-top: -12px; // half of whatever the image's height is, assuming 24px
     margin-left: -12px; // half of whatever the image's width is, assuming 24px
} 
```

在这个例子中我可能遗漏了一些东西，但你明白了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T14:24:59.823

您是否尝试过以下方法：

```
img {
    display: block;
    line-height: 0;
} 
```

我通常使用这个 hack，但我还没有在 IE8 中彻底检查过它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-13T11:05:51.643

这是我制作的一个小型 JS Fiddle：http: [//jsfiddle.net/rachit5/Ge4YH/](http://jsfiddle.net/rachit5/Ge4YH/)

我相信它符合您的要求。

HTML：

```
<div>
    <img src=""/>
</div> 
```

CSS：

```
div{height:400px;width:400px;position:relative;border:1px solid #000;}
img{position:absolute;top:0;left:0;right:0;bottom:0;margin:auto;} 
```

# javascript - 刷新表

> ID：10500250
> 
> 赞同：0
> 
> 时间：2012-05-08T14:07:25.673
> 
> 标签：javascript, jquery, html

我已阅读有关此的帖子，但我无法得到正确的答案。

我尝试过隐藏和显示来刷新表格：

```
 $("#cmdUnreadID").click(function(){
           $.ajax({
                    type: "GET", 
                    url:"orderBy.php", 
                    data: "unreadCtrl=1", 
                    success:function(result){
                      $("#tableInbox").hide(500,function(){
                        $("#tableInbox").show();
                      });
                    }
            });
       }); 
```

这对我不起作用。我也尝试了其他动画，但没有任何效果。我想我错过了一些东西，或者我使用了错误的方式。

任何建议如何仅刷新表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:14:46.887

您在哪里将结果数据加载到 UI。可能您需要将结果设置为任何元素。使用`html`方法来做到这一点

```
success:function(result){
      $("#tableInbox").hide(500,function(){
          $("#tableInbox").html(result).show();
      });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:15:22.410

我想你想改变/更新的内容`#tableInbox`，你可以试试这个：

```
success:function(result){
     $("#tableInbox").hide(500,function(){
         $("#tableInbox").html(result).show();
     });
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T14:14:20.450

使用 AJAX 内容填充表格

```
 $("#cmdUnreadID").click(function(){
       $.ajax({
                type: "GET", 
                url:"orderBy.php", 
                data: "unreadCtrl=1", 
                success:function(result){
                  $("#tableInbox").hide(500,function(){
                    $("#tableInbox").html(result).show(); // <-- Notice html() call here, to populate the table
                  });
                }
        });
   }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T14:18:10.877

```
 $("#cmdUnreadID").live('click', function () {
            $("#tableInbox").hide(500);

            $.ajax({
                type: "GET",
                url: "orderBy.php",
                data: "unreadCtrl=1",
                success: function (result) {
                    $("#tableInbox").html(result).show();

                    //Or

                    // $("#tableInbox").replaceWith(result).show();
                }
            });
        }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T14:24:43.630

我在你的代码上看不到真正改变表格的东西，你必须改变表格 .htm() 并提供类似的结果

```
$("#tableInbox").html(result) 
```

注意：您还可以在请求中将**dataType:**设置为“html”或“xml”，因为如果您接收 XML，结果将不适合直接馈送到表格 .html。jquery 将根据服务器响应中的数据类型进行智能猜测，但它仍然可以是 XML

# c++ - 在 vs2005 中通过 COM 引用 .net 4 库

> ID：10500255
> 
> 赞同：0
> 
> 时间：2012-05-08T14:07:37.217
> 
> 标签：c++, .net-4.0, com, visual-studio-2005

我有一个 Visual Studio 2005 C++ 项目（使用 QT 框架）。我想引用和使用我通过 COM 拥有的 .net 4 库。我知道如果我在 2005 年有一个 .net 项目（.net 2 或 .net 3.5），我无法引用 .net 4 库，但我很想知道在 c++ 项目中使用它是否会遇到任何问题通过 COM。我还不能创建和测试概念验证应用程序，所以我想知道是否有其他人尝试过这个或对此有所了解。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:16:29.913

使用 COM 是加载 CLR 的好方法，因此您可以执行托管代码。但是您必须在 C++ 代码中使用 COM 编程技术。使用“添加引用”不起作用，该选项仅在您使用 C++/CLI 语言编写托管代码时可用。

一种好方法是在 C++ 代码中使用[#import 指令。](http://msdn.microsoft.com/en-us/library/8etzzkb6%28v=VS.80%29.aspx)这可以加载类型库并自动生成可以在 C++ 代码中直接调用的智能指针类型和方法包装器。使用 Tlbexp.exe 实用程序或 Regasm.exe /tlb 命令行选项生成所需的类型库。QT 也有内置的 COM 支持，我对此了解不够。

# c# - 将图片之间的差异显示为矢量

> ID：10500260
> 
> 赞同：3
> 
> 时间：2012-05-08T14:08:04.830
> 
> 标签：c#, .net, image, aforge

我想使用一些图形库应用程序在 C# 中编写，它将显示两张图片之间的差异作为矢量地图，这将显示点的移动。

像这样的东西是为 matlab 实现的，称为 PIVlab，例如：

![在此处输入图像描述](../Images/065fd7f6b7f5b3fddd4c8deb5343cc1d.png)

和

![在此处输入图像描述](../Images/b49603b5578e79e203086a66c466b116.png)

由第一个图像表示

![在此处输入图像描述](../Images/bff344a2f586129a8f365a0a20ad585b.png)

我很乐意使用例如 AForge 在 .NET 中编写类似的东西。你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:28:24.240

你想要的是找到[光流](http://en.wikipedia.org/wiki/Optical_flow)。[在此处](https://stackoverflow.com/questions/3803061/how-to-implement-optical-flow-tracker)查找光流跟踪器的 C# + emguCV 实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:42:07.573

一个有趣的问题，点总是在视野中吗？还是图像不像相机噪音那样稳定。

运动是慢还是快>我的意思是帧之间有一个像素？

像素是否像单个大组一样移动，例如跟踪星星，或者像素移动更像是空中的云或鸟群？还是像素像逃跑一样向各个方向移动？可能有一些普遍的可疑运动（如摄像头驾驶？）

您能否使用原始问题中的此类信息更新您的问题。

因为这有很大的不同，在大多数情况下，它关于跟踪近邻可能会为每个像素编写一个令人兴奋的像素检查（或者只是为了从小矩形到大矩形的简单编程，对于逃跑的例子来说，这可能不是最好的面团

# git - Git：创建了本地和远程存储库，我如何使用我推送到远程存储库的文件？

> ID：10500261
> 
> 赞同：0
> 
> 时间：2012-05-08T14:08:08.480
> 
> 标签：git, repository

我已经创建了两个存储库 - 一个本地（在我的机器上）和一个远程（来自实时服务器）。远程的是一个裸存储库。这些文件都是 HTML 文件。

现在我的问题是，如何使用我推送到远程文件的那些文件，以便可以通过网络访问它们？我是否应该从实时服务器创建另一个存储库并从裸存储库中提取该存储库？或者符号链接会为此工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T20:28:35.913

恕我直言，最好的解决方案是在服务器上配置 git push 挂钩脚本，它将从裸仓库（猜测，主分支）克隆/更新文件到您的 WEB 源文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T03:10:41.583

我能够通过克隆我的远程仓库来解决我的问题。

例如

我的远程仓库位于

```
/home/user/repo/mywebsite.git 
```

所以在我的内心

```
/var/www/mywebsite 
```

我做了`git clone /home/user/repo/mywebsite.git .`

然后，如果我推送到我的远程仓库`/home/user/repo/mywebsite.git`，我会`git pull`在`/var/www/mywebsite`

我希望这会帮助那些和我有同样问题的人，因为 git-daemon 对我来说效果不佳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T14:15:54.407

如果您在服务器上创建了一个裸存储库，那么它将不包含可见文件的工作树。这通常是您想要的远程商店。

但是，如果您想通过网络服务器提供文件，则需要访问工作树，而且您是对的 - 将裸仓库克隆到提供的网络目录将允许您（和网络服务器）访问文件。

如果您想通过网络浏览 git 存储库本身（即查看日志等），那么您需要安装 git-daemon 并将其指向裸 git 存储库。

# sql - 案例陈述有问题

> ID：10500262
> 
> 赞同：0
> 
> 时间：2012-05-08T14:08:08.827
> 
> 标签：sql, sql-server-2008

我对这个案例陈述有疑问。我不知道我做错了什么，但我得到了错误：

当不使用 EXISTS 引入子查询时，选择列表中只能指定一个表达式。

我有一种情况，当字段等于一个值然后执行左外连接，但如果字段等于不同的值，则执行内连接。这是我的查询：

```
SELECT

   case 
    when oqt = '26' then  `(Select qm.id_oqm, cast(isNull(id_eval, '') as varChar(50)) + ' - ' + qm.methodName as methodName, qm.methodName as actualMethod,cv.*
             FROM OQMethods QM left outer join courseversions cv on cv.evalid = QM.id_eval and cv.courselanguage = 'EN' and cv.courseactive='Y' and cv.id_cp > 0 
             WHERE QM.id_oqt in (SELECT  tempoq.oqt FROM tempoq INNER JOIN OQMethods ON tempoq.oqt = OQMethods.id_oqt)and active = 1) 
             END,
case
when oqt = '31' then
            (Select qm.id_oqm, cast(isNull(id_eval, '') as varChar(50)) + ' - ' + qm.methodName as methodName, qm.methodName as actualMethod,cv.*
             FROM OQMethods QM inner join courseversions cv on cv.evalid = QM.id_eval and cv.courselanguage = 'EN' and cv.courseactive='Y' and cv.id_cp > 0
             where QM.id_oqt in (SELECT  tempoq.oqt FROM tempoq INNER JOIN OQMethods ON tempoq.oqt = OQMethods.id_oqt) and active = 1) 

    END
from tempoq` 

            回答 #1

赞同：4

时间：2012-05-08T14:12:31.570

case 是一个必须计算为一个值的表达式。您拥有的 Select 语句返回多个值。

似乎您正在尝试像使用 C# 开关一样使用 Case？如果是这种情况，那么您可能会更好地进行`IF ELSE IF`建筑。

            回答 #2

赞同：2

时间：2012-05-08T14:16:40.460

看起来您想要做这样的事情而不是使用 CASE 语句。

```
DECLARE @t int
-- This would contain your oqt value
SET @t =1

IF @t = 1 
BEGIN
   SELECT * FROM tableA
END
ELSE IF @t = 2
BEGIN
   SELECT * FROM TableB
END 
```

            回答 #3

赞同：0

时间：2012-05-08T14:45:33.483

```
Select qm.id_oqm, cast(isNull(id_eval, '') as varChar(50)) + ' - ' + qm.methodName as methodName, qm.methodName as actualMethod,cv.*
 FROM OQMethods QM 
 inner join tempoq on tempoq.oqt = QM.id_oqt
 left outer join courseversions cv on cv.evalid = QM.id_eval and cv.courselanguage = 'EN' and cv.courseactive='Y' and cv.id_cp > 0 
 WHERE active = 1 and (tempoq.oqt = '26' or (tempoq.oqt = '31' and courseversions.* is not null)) 
```

`left outer join`表示加入`OQMethods`甚至不匹配数据`courseversions`的数据，然后用null过滤`courseversions.*`数据`inner join`。

希望我有正确的理解。

```

# javascript - PhoneGap：media.startRecord() 在 cordova-1.6.1 中不起作用

> ID：10500267
> 
> 赞同：0
> 
> 时间：2012-05-08T14:08:20.947
> 
> 标签：javascript, ios, cordova

我正在尝试使用 phoneGap 录制示例音频，但没有成功。

根据文档，我所做的非常简单：

```
<script>
var media = null;

function record(){
   media = new Media("audio.wav");
   media.startRecord();
}
</script> 
```

“audio.wav”存在于我的“www”文件夹中，是一个空的 wav 文件。每当此代码块运行时，我都会收到此控制台错误：

```
 - ERROR: Method 'create:withDict:' not defined in Plugin 'Media'

 - FAILED pluginJSON = {"className":"Media","methodName":"create","arguments":["INVALID","952d1fe0-5ec7-5e48-d68a-74cc979878b5","audio.wav"]} 
```

即使有那个错误，录音应该还在继续。但是当我尝试播放录音时，我在调试器上观看媒体对象，我看到'_duration：-1'

当我尝试在实际的 iPhone 设备上调试应用程序时，会出现不同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:26:42.003

实际上，问题是即使我认为我正确地在您所描述的根目录上创建了文件，但我后来无法访问它，即使我得到了它的 URI（由于某种原因找不到文件，在同一个目录中的文件是在一秒钟前创建的！！！！）。所以我发现（不是简单的方法..）我必须通过`"documents://"`. 因此，当我创建新媒体时，我会执行以下操作：

`var mediaFile = new Media ("documents://"+audioFileName).`

如果我做了“`var mediaFile = new Media(fileURI_I_Just_Created)`它会说该文件不存在！！！！（必须爱phoneGap！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T05:26:59.393

您需要在根目录中创建一个空白 wav 文件，而不是 www 文件夹。获取根目录 URI 的方法之一是使用[toURI()](http://docs.phonegap.com/en/1.7.0/cordova_file_file.md.html#FileEntry)方法。

这是 URI 的样子：

```
file:///data/some/com.stack.overflow/ 
```

以下是如何在根目录中创建空白 wav 文件的示例：

```
function onDeviceReady() {
  window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
}

function gotFS(fileSystem) {
  fileSystem.root.getFile("blank.wav", {create: true, exclusive: false}, gotFileEntry, fail);
} 
```

笔记：

> ```
> create: Used to indicate that the file or directory should be created, if it does not exist. (boolean)
> exclusive: By itself, exclusive has no effect. Used with create, it causes the file or directory creation to fail if the target path 
> ```
> 
> 已经存在。（布尔值）

# android - 使用字符串数组将子项添加到列表视图？

> ID：10500270
> 
> 赞同：0
> 
> 时间：2012-05-08T14:08:33.133
> 
> 标签：android, arraylist, android-listview, arrays, subitem

顺便说一句：这是针对 Android 应用程序的。嘿伙计们，我已经制作了一个 ListView，并且我已经设法向其中添加数据。这是我到目前为止所做的一些示例代码。

```
String[] gameListFin;
ArrayList<String> gameList = new ArrayList<String>();

gameList.add(someData);
gameListFin = gameList.toArray(new String[gameList.size()]);

listView = (ListView)findViewById(R.id.shortcutsList);
listView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, gameListFin)); 
```

这可以正常工作，我有一个包含我想要的项目的列表视图。但是我需要在列表视图中添加一些额外的数据作为子项，我不知道该怎么做。所以我想知道我是否这样做：

```
String[] gameListFin;
String[] extraFin
ArrayList<String> gameList = new ArrayList<String>();
ArrayList<String> extra = new ArrayList<String>();

gameList.add("1");
gameList.add("2");
gameList.add("3");
gameList.add("4");
extra.add("1 extra");
extra.add("2 extra");
extra.add("3 extra");
extra.add("4 extra");
gameListFin = gameList.toArray(new String[gameList.size()]);
extraFin = extra.toArray(new String[extra.size()]); 
```

我如何设置它以便可以将 String Array extraFin 设置为列表视图的子项，所以它会说

```
1
1 extra
----------
2
2 extra
----------
3
3 extra
----------
4
4 extra 
```

感谢您的时间和帮助，帮助将不胜感激。佐基拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:13:37.963

您需要使用 expandableListView 而不是 listView。[http://developer.android.com/reference/android/widget/ExpandableListView.html](http://developer.android.com/reference/android/widget/ExpandableListView.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:15:20.850

您必须学习自定义适配器才能为 ListView 显示自定义数据

在这里你会找到一个很好的例子

[http://redth.info/2010/10/12/monodroid-custom-listadapter-for-your-listview](http://redth.info/2010/10/12/monodroid-custom-listadapter-for-your-listview)

[http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)

# c# - 将指向结构的指针的 FieldOffset 设置为与固定字节数组相同的值

> ID：10500271
> 
> 赞同：4
> 
> 时间：2012-05-08T14:08:33.130
> 
> 标签：c#, pointers, layout, struct, fixed

我是 stackoverflow 的新手，我会对 C# 结构及其布局有疑问。

让我们假设以下结构：

```
[StructLayout(LayoutKind.Sequential, Pack = 1)]
public unsafe struct Link
{
    // some primitive data (2 integers for example)
}

[StructLayout(LayoutKind.Explicit, Pack = 1)]
public unsafe struct Node
{
    [FieldOffset(0)]
    public int LinkCount;
    [FieldOffset(4)]
    public Link* Links;
    [FieldOffset(4)]
    private fixed byte _linksData[10 * sizeof(Link)];
} 
```

这样做的原因是我需要 IO-Performance 的 blittable 类型。我必须处理具有数 GB 大小的非常大（并且每个节点最多稀疏 10 个链接）图。该图表示为节点结构数组。通过上面的设置，我希望能够从图形文件中读取例如 100 MB 到字节指针（当然指向字节缓冲区）并将其转换为 Node* 类型的指针，从而产生非常好的表现。起初，我的节点结构只有 10 个独立的 Link 类型变量（Link0，...，Link10），它们工作得很好。但是最好在编译时使其可配置，这会导致上面的 Node-struct。

我希望 Links 只指向与 _linksData 相同的内存位置，因为它具有相同的 FieldOffset。但实际上 Links 指针始终是空指针。

所以我的问题是：有没有一种方法可以使 Links 指向与 _linksData 相同的内存位置，或者是否有另一种方法可以将固定大小的结构数组嵌入到另一个结构中。

提前感谢您的每一个回答 - 马库斯

在阅读了 Ben Voigt 的帖子后，我尝试了类似的方法，而无需将结构更改为类。以下是它对我的工作方式：

```
[StructLayout(LayoutKind.Explicit, Pack = 1)]
public unsafe struct Node
{
    [FieldOffset(0)]
    public int LinkCount;
    [FieldOffset(4)]
    private fixed byte _linksData[10 * sizeof(Link)];

    public Link* GetLinks()
    {
       fixed(byte* pLinksData = _linksData)
       {
          return (Link*)pLinksData;
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:18:22.907

我猜您实际上并没有尝试存储指针，只是有一种正确键入的方式来访问这 10 个元素。怎么样：

```
[StructLayout(LayoutKind.Explicit, Pack = 1)]
public unsafe struct Node
{
    [FieldOffset(0)]
    public int LinkCount;
    [FieldOffset(4)]
    private fixed byte _linksData[10 * sizeof(Link)];

    public Link* Links { get { return _linksData; } };
} 
```

不，等等，.NET 支持内部指针，但 C# 不支持，所以这不起作用。如果您已将 .NET 对象固定或放置在堆栈上，您只能拥有指向 .NET 对象的指针，我们不知道这里是否是这种情况。

:(

完整的包装时间：

```
public class LinkCollection
{
    Node peer;
    public LinkCollection(Node node) { peer = node; }
    void CheckIndex(int index) { if (index < 0 || index >= 10) throw new ArgumentOutOfRangeException(); }
    public Link default[int index] {
        get { CheckIndex(index); return peer.GetLink(index); }
        set { CheckIndex(index); peer.SetLink(index, value); }
    }
}

[StructLayout(LayoutKind.Explicit, Pack = 1)]
public unsafe class Node
{
    [FieldOffset(0)]
    public int LinkCount;
    [FieldOffset(4)]
    private fixed byte _linksData[10 * sizeof(Link)];

    unsafe Link GetLink(int index) { fixed( Link* plink = (Link*)&_linksData[0] ) return plink[index]; }
    unsafe void SetLink(int index, Link newvalue) { fixed( Link* plink = (Link*)&linksData[0] ) plink[index] = newvalue; }
    public LinkCollection Links { get { return new LinkCollection(this); } };
} 
```

请注意，我必须更改`Node`为一个类... p/invoke 的行为仍然应该几乎相同。

如果您不想这样做，扩展方法可能是一个答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:14:28.960

您只能编组 blitable 类型。这将您限制为 IntPtr、string、byte、char int、float、double、decimal 和无符号对应项的实例。您不能定义指向您也感兴趣的其他数据结构的指针。目前不支持此功能。

Marhsaler 需要知道最终实例将占用多少空间，并且需要知道何时停止。当您定义指向托管类型的指针时，它还需要在访问它之前对指针进行编组，因为它现在是托管类型，您总是会得到一个副本。这些问题在一定程度上是可以解决的，但据我所知，目前尚不支持。也许.NET 4.5 带来了一些新特性。

**编辑1：**

要从结构中获取某些内容，您可以将指针保留为 IntPtr 并简单地使用扩展方法自己完成繁重的工作（编组）。我不知道原始链接是否已固定。这假定链接不可移动（非托管数据或固定托管对象）。

```
using System;
using System.Collections.Generic;
using System.Runtime.InteropServices;

unsafe class Program
{
    static void Main(string[] args)
    {
        Link[] arr = new Link[] { 
            new Link(1),
            new Link(2),
            new Link(3),
            new Link(4),
        };

        fixed (Link* pLinks = arr) // for demo purposes create a node instance
        {
            var nde = new Node
            {
                LinkCount = arr.Length,
                Links = new IntPtr(pLinks) // Marshal as IntPtr is safe, later the data can be retrieved via an Extension method.
            };

            foreach (var link in nde.GetLinks())
            {
                Console.WriteLine("Link {0}", link.I);
            }
        };
    }
}

[StructLayout(LayoutKind.Sequential, Pack = 1)]
public unsafe struct Link
{
    // some primitive data (2 integers for example)
    public int I;

    public Link(int i)
    {
        I = i;
    }
}

[StructLayout(LayoutKind.Explicit, Pack = 1)]
public unsafe struct Node
{
    [FieldOffset(0)]
    public int LinkCount;
    [FieldOffset(4)]
    public IntPtr Links; // this assumes that the Links is some unsafe buffer which is not under GC control or it is pinned
}

static class LinkExtensions
{
    public static IEnumerable<Link> GetLinks(this Node node)
    {
        for (int i = 0; i < node.LinkCount; i++) // very efficient if you want to traverse millions of nodes without marshalling all of them at once
        {
            // alternatively you can also use a memcpy (PInvoke to msvcrt.dll) to fill in the data from a given offset.
            // it is up to you to decide which is faster
            yield return (Link)Marshal.PtrToStructure(node.Links + IntPtr.Size * i, typeof(Link));
        }
    }
} 
```

# c - 在C中反转文本文件

> ID：10500274
> 
> 赞同：0
> 
> 时间：2012-05-08T14:09:02.677
> 
> 标签：c

我编写了以下代码，但是当我输入“abcd”时，它显示“dcb”并跳过第一个字符。我知道我在 while 循环中的逻辑跨越了文件边界，但 fseek(f2) 在跨越文件时仍然不是 0边界。它应该返回一些负值。

```
#include<stdio.h>

int main()
{
    FILE *f1,*f2;
    char ch;

    clrscr();

    f1=fopen("Input","w");

    while((ch=getchar())!=EOF)
            putc(ch,f1);

    fclose(f1);

    f2=fopen("Input","r");

    fseek(f2,-1L,2);

    while(ftell(f2)!=0)
    {
            ch=getc(f2);
            printf("%c",ch);
            fseek(f2,-2L,1);
    }

    fclose(f2);

    getch();
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T14:15:22.593

您需要一个 do-while 循环，而不是 while-do 循环。

当 ftell() 返回零时，您需要读取字符，但不再读取。这通常表明您需要一个底部测试的循环而不是顶部测试的循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:50:35.747

```
#include <stdio.h>

int main(){
    FILE *fp;
    int ch;

    fp=fopen("out.txt","w");

    while((ch=getchar())!=EOF)
        fputc(ch,fp);

    fclose(fp);

    fp=fopen("out.txt","rb");

    fseek(fp,0L,SEEK_END);

    while(fseek(fp,-2L,SEEK_CUR)==0){
        ch=fgetc(fp);
        putchar(ch);
    }

    fclose(fp);

    return(0);
} 
```

# php - php，如何确定已经运行了多少代码？

> ID：10500283
> 
> 赞同：4
> 
> 时间：2012-05-08T14:09:33.707
> 
> 标签：php, xdebug

我想记录每个文件在 php 中运行的行。Xdebug 可以做到这一点，这就是我所知道的。这该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T14:14:00.267

我猜你想要一个代码分析器，这是一个很好的[线程](https://stackoverflow.com/a/379471/63678)

# c# - 当 apppemt 连接 Web 服务时，Windows Mobile Pocket PC 2003 应用程序“无法解析远程名称”异常

> ID：10500284
> 
> 赞同：0
> 
> 时间：2012-05-08T14:09:36.667
> 
> 标签：c#, web-services, windows-mobile

我正在开发一个移动应用程序（在 Visual strudio 2005 sp1 上），当我尝试访问 Web 服务（写在 sap 上）时，我得到了这个异常。但这并不是全部。

当我在计算机上的模拟器上运行该应用程序（通过电缆连接互联网）时，它工作正常。此外，我将应用程序安装到移动设备上，没有问题，但只能使用底座，我的意思是只有当它通过底座电缆连接到计算机时才有效。

如果应用程序尝试通过我们客户互联网的无线连接来连接 Web 服务（从底座拔下），问题就会出现。

我发现如果我以 IP 形式编写 WSDL 链接，设备会连接到 Web 服务（通过无线方式）（但不是通过代码，通过将链接复制到文本文件并单击它）但在其他形式的设备上找不到 Web服务页面。我将 Web 服务的 IP 添加到 hosts 文件，但问题仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:08:14.660

我通过从 sap 事务 sicf 获取 Web 服务地址解决了这个问题。

# c - 逐行替换txt内的字符串

> ID：10500295
> 
> 赞同：0
> 
> 时间：2012-05-08T14:10:15.240
> 
> 标签：c

我将如何**在 txt 中逐行**检查下面的字符串并替换每个字符串？

```
"FLD_CUSTORDREF_FLD"                 
"FLD_CUSTOMERNAME_FLD"            
"FLD_ADDRESSLINE1_FLD"             
"FLD_ADDRESSLINE2_FLD"             
"FLD_CITY_FLD" 
```

例如

```
If file line has "FLD_CITY_FLD"
  change to Header->City
else if file line has "FLD_CUSTOMERNAME_FLD" 
  change to Header->Name 
```

我可以通过使用阅读每一行

```
while ( fgets ( line, sizeof line, file ) != NULL ) 
```

但是我将如何检查匹配的字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T14:12:04.160

您正在寻找`strstr`功能。

> ```
> char *strstr(const char *haystack, const char *needle); 
> ```
> 
> 该`strstr()`函数在字符串 haystack 中查找子字符串 needle 的第一次出现。

然而，更换部件可能更棘手。我只是`fprintf`结果而不是替换字符串。

# java - 如何避免“安全性 - 从非常量字符串生成准备好的语句” FindBugs 警告

> ID：10500305
> 
> 赞同：12
> 
> 时间：2012-05-08T14:10:31.953
> 
> 标签：java, jdbc, findbugs

我正在开发一个具有如下代码的项目：

```
String sql = "SELECT MAX(" + columnName + ") FROM " + tableName;                
PreparedStatement ps = connection.prepareStatement(sql); 
```

有什么方法可以更改此代码，以便 FindBugs 停止给我“安全性 - 从非常量字符串生成准备好的语句”警告？

请假设这段代码对于 SQL INJECTION 是安全的，因为我可以在代码的其他地方控制“tableName”和“columnName”的可能值（它们不直接来自用户输入）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T14:13:58.090

不要`sql`通过 连接字符串`+`。您可以使用

```
String sql = String.format("SELECT MAX(%s) FROM %s ", columnName, tableName); 
```

这比连接字符串要慢，所以你应该初始化它`static`然后这不是问题。

我认为使用 a`StringBuilder`也可以解决此警告。

避免此警告的另一种方法是在`@SuppressWarnings("SQL_PREPARED_STATEMENT_GENERATED_FROM_NONCONSTANT_STRING")`该字符串（或方法/或类）之上添加。

您还可以使用[过滤器文件](http://findbugs.sourceforge.net/manual/filter.html)来定义应排除的规则。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-08T11:23:00.647

```
private static final String SQL = "SELECT MAX(?) FROM ?";
PreparedStatement ps = connection.prepareStatement(sql);
ps.preparedStatement.setInt(1,columnName);
ps.preparedStatement.setString(2,tableName); 
```

如果您使用准备好的语句，那么 in 参数应该是最终字符串，并且稍后应该使用 setInt、setString 方法添加参数。

这将解决 findbug 警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T14:16:19.317

尝试使用以下...

```
private static final String SQL = "SELECT MAX(%s) FROM %s"; 
```

然后在使用时使用 String.format() 调用...

```
PreparedStatement ps = connection.prepareStatement(String.format(sql,columnName,tableName)); 
```

如果那不能解决问题，您可以随时忽略该检查；在您的 FindBugs 配置中将其关闭。

如果这不起作用（或不是一个选项），某些 IDE（如 IntelliJ）也会让您使用特殊格式的注释或注释来抑制警告。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T07:31:14.670

String.format 和 StringBuilder（或 StringBuffer）都没有帮助我。

解决方案是“prepareStatement”隔离：

```
private PreparedStatement prepareStatement(Connection conn, String sql) throws SQLException {
    return conn.prepareStatement(sql);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-09T09:49:24.997

可以使用连接来创建您的字符串。这样做不会导致安全警告。在处理较长的 SQL 语句时，为了清楚起见，最好将其拆分为多行

使用变量构造字符串是导致安全警告的原因。

这将导致警告：

```
String columnName = getName();
String tableName  = getTableName();
final String sql = "SELECT MAX(" + columnName + ") FROM " + tableName;
PreparedStatement ps = connection.prepareStatement(sql); 
```

这不起作用：

```
String columnName = getName();
String tableName  = getTableName();
final String sql = "SELECT MAX(" + "?" + ")" +
                   "FROM " + "?";
PreparedStatement ps = connection.prepareStatement(sql);
ps.setString(1, columnName);
ps.setString(2, tableName); 
```

它不起作用，因为准备好的语句只允许将参数绑定到 SQL 语句的“值”位。

这是有效的解决方案：

```
private static final boolean USE_TEST_TABLE = true;
private static final boolean USE_RESTRICTED_COL = true;
private static final String TEST_TABLE = "CLIENT_TEST";
private static final String PROD_TABLE = "CLIENT";
private static final String RESTRICTED_COL ="AGE_COLLATED";
private static final String UNRESTRICTED_COL ="AGE";

....................

final String sql = "SELECT MAX(" +
        ( USE_RESTRICTED_COL ? RESTRICTED_COL : UNRESTRICTED_COL ) +  ")" +
        "FROM " +
        ( USE_TEST_TABLE ? TEST_TABLE : PROD_TABLE );
PreparedStatement ps = connectComun.prepareStatement(sql); 
```

但它仅在您必须在编译时已知名称的两个表之间进行选择时才有效。您可以在超过 2 种情况下使用复合三元运算符，但随后它变得不可读。

如果 getName() 或 getTableName() 从不受信任的来源获取名称，则第一种情况可能是安全问题。

如果这些变量之前已经过验证，则很有可能使用变量构建安全的 SQL 语句。这是您的情况，但 FindBugs 无法弄清楚。Findbugs 无法知道哪些来源可信或不可信。

但是，如果您必须使用来自用户或不受信任的输入的列名或表名，那么就没有办法了。您必须使用其他答案中提出的任何方法来验证自己的此类字符串并忽略 Findbugs 警告。

**结论**：对于这个问题的一般情况，没有完美的解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-27T11:44:25.660

如果您确定没有 SQL 注入的可能性，请在方法上使用**SuppressFBWarnings**注释：

```
@edu.umd.cs.findbugs.annotations.SuppressFBWarnings("SQL_PREPARED_STATEMENT_GENERATED_FROM_NONCONSTANT_STRING") 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-17T19:48:54.693

```
StringBuilder sql = new StringBuilder();
sql.append("SELECT MAX(")
   .append(columnName)
   .append(") FROM ")
   .append(tableName);

PreparedStatement ps = connection.prepareStatement(sql);
ps.execute(); 
```

# objective-c - 创建一个包含多个 NSArrays 的 NSDictionary

> ID：10500310
> 
> 赞同：-1
> 
> 时间：2012-05-08T14:10:51.633
> 
> 标签：objective-c, ios, xcode, nsarray, nsdictionary

我想将几个 NSArray 合并到一个 NSDictionary 中。这是我的数组：

```
@property (nonatomic, strong) NSArray *EuropeTable;
@property (nonatomic, strong) NSArray *AsiaTable;
@property (nonatomic, strong) NSArray *AfricaTable;
@property (nonatomic, strong) NSArray *LatinAmericaTable;
@property (nonatomic, strong) NSArray *NorthAmericaTable; 
```

关于如何做到这一点的任何想法？

***编辑**

我希望每个数组都有相同的键@“country”，这样我以后可以使用这个键

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:16:09.457

```
NSMutableDictionary *dictionary = [NSMutableDictionary dictionary];
[dictionary setObject:self.EuropeTable forKey:@"EuropeTable"];
[dictionary setObject:self.AsiaTable forKey:@"AsiaTable"];
[dictionary setObject:self.AfricaTable forKey:@"AfricaTable"];
[dictionary setObject:self.LatinAmericaTable forKey:@"LatinAmericaTable"];
[dictionary setObject:self.NorthAmericaTable forKey:@"NorthAmericaTable"]; 
```

然后访问您需要的阵列之一：

```
NSArray *europeTable = [dictionary objectForKey:@"EuropeTable"]; 
```

**更新：**

```
NSArray *array = [NSArray arrayWithObjects:self.EuropeTable,
                                           self.AsiaTable,
                                           self.AfricaTable, 
                                           self.LatinAmericaTable,
                                           self.NorthAmericaTable, nil];

NSDictionary *dict = [NSDictionary dictionaryWithObject:array forKey:@"country"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T14:14:28.853

```
NSDictionary *countries =
  [NSDictionary dictionaryWithObjectsAndKeys:
    EuropeTable, @"You",
    AsiaTable, @"Need To",
    AfricaTable, @"Provide",
    LatinAmericaTable @"More",
    NorthAmericaTable, @"Details",
    nil]; 
```

没有更多细节，我不确定任何答案会对您有多大帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T14:13:43.157

```
NSMutableDictionary dict = [NSMutableDictionary dictionary];
[dict addObject:self.EuropeTable forKey:@"EuropeTable"];
etc... 
```

# wix - WIX 安装程序中同一文件夹中的互斥文件

> ID：10500315
> 
> 赞同：1
> 
> 时间：2012-05-08T14:11:15.687
> 
> 标签：wix, windows-installer

我想根据 WIX 项目中的用户输入将互斥应用程序部署到互斥环境中。我所做的研究告诉我，我不能使用条件[http://www.joyofsetup.com/2007/05/30/feature-conditions-and-ui/](http://www.joyofsetup.com/2007/05/30/feature-conditions-and-ui/) 这似乎是一个相当普遍的问题和一个明确的问题最佳实践将是有价值的。

根据上述文章，我已经使用功能和发布事件实现了这一点。我的 UI 中的事件如下。

在我的情况下，我将两个相互排斥的 Web 应用程序之一安装到三个不同环境之一中。我通过创建 8 个功能来做到这一点，其中 1 个用于应用程序和除 web.config 之外的所有文件，6 个用于 web.config 文件，具体取决于正在安装的应用程序和正在安装的环境。我必须在每个功能中包含一个条件才能通过 ICE 验证，即使它们由下面的发布元素控制，因为它们被安装到不同服务器上同名的目录中。有没有更好的方法，或者这是这种情况的标准做法？

```
 <Publish Event="AddLocal" Value="WebApp"><![CDATA[ServerType="Web"]]></Publish>
      <Publish Event="Remove" Value="WebApp"><![CDATA[ServerType<>"Web"]]></Publish>
      <Publish Event="AddLocal" Value="DataApp"><![CDATA[ServerType="App"]]></Publish>
      <Publish Event="Remove" Value="DataApp"><![CDATA[ServerType<>"App"]]></Publish>
      <Publish Event="AddLocal" Value="WebDevConfigFeature"><![CDATA[ServerType="Web" AND Environment="Dev" ]]></Publish>
      <Publish Event="Remove" Value="WebDevConfigFeature"><![CDATA[ServerType<>"Web" OR Environment<>"Dev"]]></Publish>
      <Publish Event="AddLocal" Value="WebQAConfigFeature"><![CDATA[ServerType="Web" AND Environment="QA" ]]></Publish>
      <Publish Event="Remove" Value="WebQAConfigFeature"><![CDATA[ServerType<>"Web" OR Environment<>"QA"]]></Publish>
      <Publish Event="AddLocal" Value="WebProdConfigFeature"><![CDATA[ServerType="Web" AND Environment="Prod" ]]></Publish>
      <Publish Event="Remove" Value="WebProdConfigFeature"><![CDATA[ServerType<>"Web" OR Environment<>"Prod"]]></Publish>
      <Publish Event="AddLocal" Value="AppDevConfigFeature"><![CDATA[ServerType="App" AND Environment="Dev" ]]></Publish>
      <Publish Event="Remove" Value="AppDevConfigFeature"><![CDATA[ServerType<>"App" OR Environment<>"Dev"]]></Publish>
      <Publish Event="AddLocal" Value="AppQAConfigFeature"><![CDATA[ServerType="App" AND Environment="QA" ]]></Publish>
      <Publish Event="Remove" Value="AppQAConfigFeature"><![CDATA[ServerType<>"App" OR Environment<>"QA"]]></Publish>
      <Publish Event="AddLocal" Value="AppProdConfigFeature"><![CDATA[ServerType="App" AND Environment="Prod" ]]></Publish>
      <Publish Event="Remove" Value="AppProdConfigFeature"><![CDATA[ServerType<>"App" OR Environment<>"Prod"]]></Publish>
      <Publish Event="EndDialog" Value="Return">1</Publish> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:56:53.127

我喜欢做的技巧是有 2 个组件和 2 个不同的密钥文件

c1 -> f1 (web.config.dev) c2 -> f2 (web.config.qa) c3 -> f3 (web.config.prod)

然后为每个文件提供 web.config 的副本文件元素和互斥条件

DEPLOYMENTTYPE~="DEV" DEPLOYMENTTYPE~="QA" DEPLOYMENTTYPE~="PROD"

结果是不会安装这些组件中的 1 个。你可能会得到一个 web.config.dev 和一个 web.config 并且它会工作。

所有这些都可以使用单个功能来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:53:30.310

Depending on whether you want to choose the files by environment (no questions), indirect user input (related question), or direct user input (feature selection), there are various approaches to take. Christopher Painter's approach is good for the first two, but for feature selection, you might try the technique described on this [InstallTalk blog post](http://blogs.flexerasoftware.com/installtalk/2011/07/old-jokes-and-feature-selections.html).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T08:54:56.573

就我个人而言，我会将两个单独的应用程序拆分为两个 msi，并使用一个用于重复代码的公共库。如果需要，可以使用烧录将它们引导在一起。

此外，无需存储 web.config 的所有不同版本，因为可以在安装时使用[`XmlFile`](http://wix.sourceforge.net/manual-wix2/wix_xsd_xmlfile.htm)or[`XmlConfig`](http://wix.sourceforge.net/manual-wix2/wix_xsd_xmlconfig.htm)元素修改不同的值。这种修改 web.config 文件的方法的优点是，如果值发生更改，也可以在命令行上将其传递到安装程序中，从而避免仅为了配置更改而重新构建 msi。为了使事情变得更容易，您甚至可以创建对话框来设置它们，而不是通过 msiexec 传递它们。

# haskell - 重做标准类

> ID：10500320
> 
> 赞同：18
> 
> 时间：2012-05-08T14:11:35.080
> 
> 标签：haskell, types, typeclass

正如 Typeclassopedia 所证明的那样，当前从范畴论中引入的一堆类有点像是历史的一个错综复杂的偶然事件，而不是一个美丽的连贯整体。

特别是，这使得跟踪正在发生的事情变得相当困难。

如果不存在诸如向后兼容性、代码重复或易于处理的短类型签名之类的小问题，这些东西*应该*是什么样子？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-08T14:15:24.657

对于标准类的一些子集，已经尝试给出修改后的层次结构。

**数值类型类**

*   [数字前奏曲](http://hackage.haskell.org/package/numeric-prelude)。数字类型类的实验性替代层次结构

特别是，它提供了一组更丰富的数学抽象。

除此之外，还有许多其他替代设计：

*   [另一个前奏曲](http://hackage.haskell.org/package/yap)- 罗斯帕特森的一个值得注意的替代前奏曲：

![在此处输入图像描述](../Images/2295b82538f3011432a72ba039862046.png)

*   [prelude-extras](http://hackage.haskell.org/package/prelude-extras) - 高阶前奏函数
*   [classy-prelude](http://hackage.haskell.org/package/ClassyPrelude) - 更多类的前奏

**分类类型类**

[受类别启发的类的](http://en.wikibooks.org/wiki/Haskell/Category_theory)工作较少，例如 Functor、Monad、Monoid、Applicative，当然还有 Category。

最重要的工作是

*   [category-extras](http://hackage.haskell.org/package/category-extras)包，它确实提供了一个非常丰富的库，包括著名的 zygohistoprepromorphism。

![在此处输入图像描述](../Images/7928ec46e4396d0d352a05c7aa0a8e60.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-08T19:05:43.563

关于“分类”类，还有[The Other Prelude](http://www.haskell.org/haskellwiki/Functor-Applicative-Monad_Proposal)。那里概述的类层次结构已在[Frege](http://code.google.com/p/frege/)中实现。

# emacs - 如何在emacs中查看文件的编码？

> ID：10500323
> 
> 赞同：58
> 
> 时间：2012-05-08T14:11:56.153
> 
> 标签：emacs, encoding

我没有找到当前文件的编码，如何显示？

![emacs](../Images/c9bd6ed0a92fafd64388a58553756467.png)

可以看到文件中有一些汉字，但不知道是什么编码。

有什么办法让它总是显示在 emacs GUI 上？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-05-08T14:45:28.557

您有几种方法来获取（和设置）缓冲区编码：

*   您可以`U`在模式行中看到您的缓冲区是“Unicode”，如果您将**鼠标放在它上面**，它将在工具提示中显示当前缓冲区编码。

*   您还可以通过以下方式查看当前**编码**`C-h``v` `buffer-file-coding-system` `RET`

*   您可以**更改**整个缓冲区编码以便**下次**保存`C-x``RET``f`

*   您还可以更改检测到的编码以强制使用另一种编码并重新加载**文件**`C-x``RET``r`

*   您只能为下一个 I/O 命令设置编码`C-x``RET``c`

*   还有一些其他的可能，看看`C-x``RET``C-h`

修复和诊断：

*   在缓冲区内，如果您对**单个字符编码/详细信息**感兴趣，请将点放在中文字符上，`C-u``C-x``=`这样会有所帮助。（同样没有`C-u`显示关于字符的一些信息，并且编码不是它的一部分。）
*   自己检查文件：
    *   您可以打开文本文件而无需任何解码或启发式`M-x find-file-literally`
    *   或者你可以更接近金属（十六进制编辑器）`M-x hexl-find-file`
*   如果文件是混合编码的混乱，你**可以修复部分**`M-x recode-region`

# python - Python 2.7.3 中的内存错误

> ID：10500324
> 
> 赞同：0
> 
> 时间：2012-05-08T14:11:56.560
> 
> 标签：python

我试图在 python 上运行这个程序，它模拟一个在太空中无意识的人，看看它是否会达到它的目标。但每次运行它时都会出现内存错误..--

```
init_posn=[0,0]
posn_final=[2,2]

obs = [[-1,1],[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1]]

# algo can be improved

def obs_det(posn_x,posn_y,obs):
    for e in obs:
        if e[0]==posn_x & e[1]==posn_y:
            return 1
    return 0

posn=[]
posn.append(init_posn)

def posn_progress(posn,posn_final,obs):
    i=0
    non=0
    while (non==0 | (posn[i][0]==posn_final[0] & posn[i][1]==posn_final[1])):
        l=posn[i][0]
        m=posn[i][1]
        if obs_det(l,m+1,obs) == 0:
            posn.append([l,m+1])
        elif obs_det(l+1,m,obs) == 0:
            posn.append([l+1,m])
        elif obs_det(l,m-1,obs) == 0:
            posn.append([l,m-1])
        elif obs_det(l-1,m,obs) == 0:
            posn.append([l-1,m])
        else:
            non=1
        i=i+1
    if non==1:
        return 0
    else:
        return posn

print posn_progress(posn,posn_final,obs) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:05:49.797

这是一些示例代码；它基本上从起点进行洪水填充，直到到达终点。请注意，它会跟踪它已经去过的地方 ( `seen`)，因此它不会无休止地重新探索它们。

```
dir = [(dx,dy) for dx in (-1,0,1) for dy in (-1,0,1) if (dx,dy)!=(0,0)]

def backtrack(b, seen):
    if seen[b]==0:
        return [b]
    else:
        seek = seen[b]-1
        x,y = b
        for dx,dy in dir:
            p = (x+dx, y+dy)
            if p in seen and seen[p]==seek:
                return backtrack(p, seen) + [b]

def find_path(a, b, dist=0, here=None, seen=None):
    if here is None: here = set([a])
    if seen is None: seen = {a:0}

    next = set()
    for x,y in here:
        for dx,dy in dir:
            p = (x+dx, y+dy)
            if p not in seen:
                seen[p] = dist+1
                next.add(p)

    if b in seen:   # found it!
        return backtrack(b, seen)
    else:
        return find_path(a, b, dist+1, next, seen)

def main():
    print find_path((0,0), (2,2))

if __name__=="__main__":
    main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:19:30.190

因为这看起来像家庭作业，所以我将回答两个提示：

1.  您将如何编写单元测试来查看障碍物检测例程是否按预期工作？
2.  阅读有关逻辑和位运算符的信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-08T14:23:39.257

我认为你的无意识存在是在兜圈子。

你可以教它避免回到它来自的地方。然后它不会循环，但可能无法找到路，即使存在一条路。

或者你可以让它更聪明，并告诉它如果它返回，下次它应该尝试不同的路线。

# ios - 找不到类 IOS NSURLDownload.h

> ID：10500335
> 
> 赞同：0
> 
> 时间：2012-05-08T14:12:30.447
> 
> 标签：ios, ios5

我正在尝试导入此类标头#import `<Foundation/NSURLDownload.h>`，但出现错误 File not found 但我在基础框架的构建路径中有它。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:14:53.780

此类仅适用于 Mac OS X，不适用于 iOS。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLDownload_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLDownload_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:14:43.767

这是一个 mac osx 类而不是 ios 类，因此您将无法找到它。

# perl - Perl：下载远程 html 页面？

> ID：10500339
> 
> 赞同：0
> 
> 时间：2012-05-08T14:12:39.760
> 
> 标签：perl

在 perl 中，如何将远程 html 页面下载到我的本地机器？例如

`http://example.com/catalog/lperl3/chapter/ch04.html`

我需要使用 Perl 下载这个 html 源代码，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T14:18:37.947

看看[LWP::Simple](http://search.cpan.org/perldoc/LWP%3a%3aSimple)模块。

```
use strict;
use warnings;
use LWP::Simple;

my $status = getstore('http://myweb.com/catalog/lperl3/chapter/ch04.html', 'ch04.html');
unless (is_success($status)) {
  die "An error has occured! Status code: $status\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:15:17.740

使用 LWP::Simple 模块中的 getstore

```
use LWP::Simple;
getstore('http:://example.com/index.html', 'something.html'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T20:35:24.827

您可以使用[Mojo::UserAgent](https://www.metacpan.org/module/Mojo%3a%3aUserAgent)：

```
use Mojo::UserAgent;

my $url = 'http://oreilly.com/catalog/lperl3/chapter/ch04.html';

Mojo::UserAgent
    ->new
    ->get( $url )
    ->res
    ->content
    ->asset
    ->move_to( 'ch04.html' ) 
```

不过，您应该获得更新版本的[Learning Perl](http://www.learning-perl.com/)。

# python - Python：如何访问 YouTube 网页？

> ID：10500341
> 
> 赞同：4
> 
> 时间：2012-05-08T14:12:41.853
> 
> 标签：python, browser

我正在使用“webbrowser”模块打开一个 YouTube 网页：

```
controller = webbrowser.get()
controller.open("http://www.youtube.com/watch?v=SMwZsFKIXa8&amp;feature=fvst") 
```

视频开始播放，我希望我的 Python 应用程序在视频结束或浏览器关闭后立即恢复。

现在，我不能使用`time.sleep`它，因为它会迫使我等到歌曲结束（如果我“快进”视频，或者我只是关闭浏览器，应用程序将不会继续）。

所以我基本上需要从网页上得到一些关于视频状态的指示，以及另一个指示，以防网页突然关闭。

`webbrowser.get`为了做到这一点，我可以使用我创建的句柄吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T14:22:52.230

你根本做不到。该`webbrowser`模块将它交给一个浏览器，它无法控制它。

您需要通过 PySide 中的 QtWebkit 或 pygtk/wxPython 中的等价物来托管您自己的浏览器控件。然后，您可以像拥有它一样与它互动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-06T09:14:29.280

您可以使用 webbrowser.open，不要忘记先导入 webbrowser lib：示例：

```
import webbrowser
webbrowser.open("https://www.youtube.com/.....") 
```

# java - 在带有应用程序的 Safari 上获取“断言失败：（匿名函数）”

> ID：10500351
> 
> 赞同：6
> 
> 时间：2012-05-08T14:13:23.783
> 
> 标签：java, javascript, html, rest, safari

我正在为 ipad 创建一个应用程序，并且正在使用 Java 进行。JavaScript。HTML 和休息。我有一个国家列表，我想在应用程序的一个页面上的下拉列表中显示这些国家/地区列表，我正在尝试使用 rest 来填充此列表，但是当我运行应用程序时，下拉列表中没有任何内容，而 safari 正在给错误

```
Assertion failed: (anonymous function) :449 
```

我得到这个错误 8 次，最后有不同的数字

这是我正在使用的一些代码

main.html

```
<div id="wrapper">
<div id="mainBackground">
     <div id="stflogo"><img src="images/logo.png" width="200" height="186" alt="MyLogo logo" /></div>

<div id="formContainer">
        <h1>Register Your Card</h1>
        <form id="AccountDetailsForm" method="post" data-ajax="false">

                <input  id="tfscCardNumber" type="hidden" name="tfscCardNumber" class="readonly" minlength="2" maxlength="20" readonly="readonly" disabled="disabled"/>

                <p><label id="firstNameLabel" for="firstName" class="displayBlockLabel RequiredField">First Name </label>
                <input id="firstName" type="text" name="firstName" class="required" minlength="2" maxlength="20"/></p>
                <p><label id="lastNameLabel" for="lastName" class="displayBlockLabel RequiredField"> Last Name </label>
                <input id="lastName" type="text" name="lastName" class="required" minlength="2" maxlength="25"/></p>        

                <p><label id="address1Label" for="address1" class="displayBlockLabel RequiredField">Address 1 </label>
                <input id="address1" type="text" name="address1" class="required" minlength="2" maxlength="40"/></p>
                <p><label id="address2Label" for="address2" class="displayBlockLabel">Address 2</label>
                <input id="address2" type="text" name="address2" maxlength="40"/></p>

                <p><label id="cityLabel" for="city" class="displayBlockLabel RequiredField">Town / City </label>
                <input id="city" type="text" name="city" class="required" minlength="2" maxlength="40"/></p>

               <p> <label id="countyLabel" for="county" class="displayBlockLabel RequiredField">County / State </label>
                <input id="county" type="text" name="county" class="required" minlength="2" maxlength="40"/>    </p>

               <p> <label id="postcodeLabel" for="postcode" class="displayBlockLabel RequiredField">Postcode / Zip </label>
                <input id="postcode" type="text" name="postcode" class="required" minlength="2" maxlength="11"/>    </p>                

               <p> <label id="countrySelectionLabel" for="countrySelection" class="displayBlockLabel RequiredField">Country </label>
                <select id="countrySelection" class="required">
                </select> </p>

               <p><label id="telephoneLabel" for="telephone" class="displayBlockLabel RequiredField">Tel Number </label>
                <input id="telephone" type="tel" name="telephone" class="tel number required" minlength="2" maxlength="12"/></p>    
                <p><label id="emailLabel" for="email" class="displayBlockLabel RequiredField">Email </label>
                <input id="email" type="email" name="email" class="email required" minlength="2" maxlength="100"/></p>                                      
                <p><label id="confirmEmailLabel" for="confirmEmail" class="displayBlockLabel RequiredField">Confirm Email </label>
                <input id="confirmEmail" type="email" name="confirmEmail" class="email required" minlength="5" maxlength="100"/></p>    

                <p><label id="passportNumberLabel" for="passportNumber" class="displayBlockLabel RequiredField">Passport Number </label>
                <input id="passportNumber" type="text" name="passportNumber" class="required" minlength="3" maxlength="20"/></p>        
                <p class="tandcnotice">Please Ensure that you have read the Terms &amp; Conditions and Privacy &amp; security Policy</p>

                <p class="tandcCheckbox">
                <input type="checkbox" name="accepttandc" id="accepttandc" class="checkbox" />
                <label for="checkbox" class="accepttandc">I have read the Terms &amp; Conditions</label>
                <p>

                <input class="button" type="submit" value="Submit" data-role="button" data-theme="redbutton"/>
        </form>
     </div><!-- END OF FORM CONTAINER -->
     </div>
</div>
.... 
```

appForm.js

```
$('#wrapper').live("pageshow", function() {
if ( $('#countrySelection')[0].length < 1){

    $.mobile.loadingMessage = "Retrieving Countries";
    $.mobile.showPageLoadingMsg();

    Repository.load('details/countries/all', function(countries){
        $.each(countries, function() {
            $('#countrySelection').append('<option value="' + this.id + '">' + this.name + '</option>').selectmenu('refresh');
        });
        $.mobile.hidePageLoadingMsg();
    });
}

});

$('#wrapper').live("pagecreate", function() {               

$('#AccountDetailsForm select, #AccountDetailsForm input[type!=submit]').focus(function (){
    focusScroller(this);                                                                                   
});
$('#AccountDetailsForm select, #AccountDetailsForm input[type!=submit]').blur(function (){
    if ( $('#accountFormScrollView').data().scrolllistview._sy < $('#accountFormScrollView').data().scrolllistview._maxY){
         $('#accountFormScrollView').data().scrolllistview.scrollTo(0, $('#accountFormScrollView').data().scrolllistview._maxY, 0);
    }
}); 

});           

$(window).resize(function (){
// Android Resize Event needed for the keyboard
});

var focusScroller = function(formElement){
    $(window).scrollTop(0);
    var elementLabel = "#" + formElement.id + "Label";   
    var offSetPosition = $(elementLabel)[0].offsetTop;
    if(formElement.labels === undefined && formElement.id === "countrySelection"){
        // ios4 quirk for select elements
        offSetPosition = 100; 
    }

    scrollTo(0,0,0);
    $('#accountFormScrollView').data().scrolllistview.scrollTo(0, offSetPosition * -1, 0);
}

$('#wrapper"').live("pageshow", function() {
if (getTfscCardNumber() === ''){
    $('#passportNumberLabel').css('display', 'none');
    $('#passportNumber').css('display', 'none'); 
    $('#passportNumber').attr("disabled", true);
}else{
    $('#passportNumberLabel').css('display', 'block');
    $('#passportNumber').css('display', 'block'); 
    $('#passportNumber').attr("disabled", false);
}

loadForm($('#AccountDetailsForm')[0]);
}); 
```

如果需要，我可以提供更多代码，但我确定其余代码都可以，但如果有人想查看任何其他代码，请询问

这个错误是什么意思，谁能看到出了什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T21:09:37.203

这是 Safari 的一个错误，它使用 type="tel" 处理输入。我不会担心的。

我遇到了同样的问题，然后我发现了这个：[https ://github.com/jquery/jquery-mobile/issues/2341](https://github.com/jquery/jquery-mobile/issues/2341)

# google-maps - 如何将 Adob e Illustrator 路径转换为 Google 地图多边形？(v3 API)

> ID：10500356
> 
> 赞同：1
> 
> 时间：2012-05-08T14:13:38.660
> 
> 标签：google-maps, adobe-illustrator

我有一个插画家文件，我想将众多插画家路径转换为谷歌地图多边形。我已经通过 Google 和这个网站进行了多次搜索，但似乎没有关于这个主题的任何最新信息。

我目前有一个用 map-tiler 切割的 illustrator 文件，放大和缩小工作正常。我还将地图居中在坐标 (0.0,0.0) 处。我知道这个坐标在海洋中间，但我没有使用谷歌地图库来给人们指路。我只是想将它用作显示在 Adob​​e Illustrator 中生成的自定义地图的工具。

任何信息将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:29:57.847

Avenza MAPublisher 就是为此任务而构建的。

[http://www.avenza.com/mapublisher](http://www.avenza.com/mapublisher)

使用 MAPublisher，您可以将 Illustrator 多边形导出到 KML，它应该可以直接导入到 Google 地图中。

（披露，我为 Avenza 工作）

# google-app-engine - 'OAuth2Token' 对象没有属性 'redirect_uri' 并使用 Appengine 和 gdata 保存访问令牌

> ID：10500361
> 
> 赞同：0
> 
> 时间：2012-05-08T14:13:59.787
> 
> 标签：google-app-engine, python-2.7, oauth-2.0, gdata

我尝试了一个简单的带有 gdata、appengine 和 OAuth2 的 HelloWorld。我读[了这篇文章](https://stackoverflow.com/questions/5903278/gdata-python-api-analytics-with-simple-auth?answertab=votes#tab-top "gdata-python-api + 带有简单身份验证的分析")和[谷歌的官方帖子](http://googleappsdeveloper.blogspot.fr/2011/09/python-oauth-20-google-data-apis.html "Python、OAuth 2.0 和 Google 数据 API")。

**问题 1**

根据[第一篇文章](https://stackoverflow.com/questions/5903278/gdata-python-api-analytics-with-simple-auth?answertab=votes#tab-top "gdata-python-api + 带有简单身份验证的分析")，我的应用程序在第 7 部分“使用代码获取访问令牌”失败：

```
Traceback (most recent call last):
  File "[$PATH]/dev/outils/google_appengine/google/appengine/ext/webapp/_webapp25.py", line 701, in __call__
    handler.get(*groups)
  File "[$PATH]/dev/outils/google_appengine/google/appengine/ext/webapp/util.py", line 68, in check_login
    handler_method(self, *args)
  File "[$PATH]/dev/projets/xxx/main.py", line 76, in get
    token.get_access_token(url.query)
  File "[$PATH]/dev/projets/xxx/gdata/gauth.py", line 1296, in get_access_token
    'redirect_uri': self.redirect_uri,
AttributeError: 'OAuth2Token' object has no attribute 'redirect_uri' 
```

我在方法 generate_authorize_url() 中提供了 redirect_uri，**并在**[Google API 控制台](https://code.google.com/apis/console/)上填写了 2 个“重定向 URI” ：

*   [http://localhost:8080/oauth2callback](http://localhost:8080/oauth2callback)
*   [http://example.com/oauth2callback](http://example.com/oauth2callback)

**为什么redirect_uri 是松散的？**

*解决方案*：参见@bossylobster 答案。

* * *

**问题 2** 现在，我想像这样保存这个新的访问令牌：

```
access_token_key = 'access_token_%s' % current_user.user_id()
gdata.gauth.ae_save(token, access_token_key) 
```

这些行抛出此异常：

```
Traceback (most recent call last):
  File "[$PATH]/dev/outils/google_appengine/google/appengine/ext/webapp/_webapp25.py", line 701, in __call__
    handler.get(*groups)
  File "[$PATH]/dev/outils/google_appengine/google/appengine/ext/webapp/util.py", line 68, in check_login
    handler_method(self, *args)
  File "[$PATH]/dev/projets/xxx/main.py", line 89, in get
    gdata.gauth.ae_save(token, access_token_key)
  File "[$PATH]/dev/projets/xxx/gdata/gauth.py", line 1593, in ae_save
    return gdata.alt.app_engine.set_token(key_name, token_to_blob(token))
  File "[$PATH]/dev/projets/xxx/gdata/alt/app_engine.py", line 92, in set_token
    if Token(key_name=unique_key, t=token_str).put():
  File "[$PATH]/dev/outils/google_appengine/google/appengine/ext/db/__init__.py", line 973, in __init__
    prop.__set__(self, value)
  File "[$PATH]/dev/outils/google_appengine/google/appengine/ext/db/__init__.py", line 613, in __set__
    value = self.validate(value)
  File "[$PATH]/dev/outils/google_appengine/google/appengine/ext/db/__init__.py", line 2779, in validate
    (self.name, self.data_type.__name__, err))
BadValueError: Property t must be convertible to a Blob instance (Blob() argument should be str instance, not unicode) 
```

但是`gdata.gauth.access_token`调用`gdata.gauth.upgrade_to_access_token`会返回带有一些修改的令牌。

如果我尝试`token_to_blob`，我有这个例外`UnsupportedTokenType: Unable to serialize token of type <type 'unicode'>`

** 如何保存新的 access Token ？**

主.py：

```
from google.appengine.ext import webapp
from google.appengine.ext.webapp.util import run_wsgi_app, login_required
from google.appengine.api import users

import gdata.gauth
import atom.http_core

SETTINGS = {
    'APP_NAME': 'xxx',
    'CLIENT_ID':'xxx.apps.googleusercontent.com',
    'CLIENT_SECRET':'xxx',
    'SCOPES': ['https://www.google.com/m8/feeds/', 'https://docs.google.com/feeds/', 'https://www.google.com/calendar/feeds/'],
    'USER_AGENT' : 'xxxs',
    'OAUTH2CALLBACK':'http://localhost:8080/oauth2callback'
    #'OAUTH2CALLBACK':'http://example.com/oauth2callback'
    }

class Home(webapp.RequestHandler):

    def get(self):
        """Home"""
        if users.get_current_user():
            self.redirect("/step1")
        else:
            self.response.out.write("<a href='/step1'>Sign in google</a><br />")

class Fetcher(webapp.RequestHandler):

    @login_required
    def get(self):
        """This handler is responsible for fetching an initial OAuth
        request token and redirecting the user to the approval page."""

        current_user = users.get_current_user()

        #create token
        token = gdata.gauth.OAuth2Token(client_id = SETTINGS['CLIENT_ID'],
                                        client_secret = SETTINGS['CLIENT_SECRET'],
                                        scope = ' '.join(SETTINGS['SCOPES']),
                                        user_agent = SETTINGS['USER_AGENT'])

        url = token.generate_authorize_url(redirect_uri = SETTINGS['OAUTH2CALLBACK'])
        #save token to datastore
        gdata.gauth.ae_save(token, current_user.user_id())

        message = """<a href="%s">
        Request token for the Google Documents Scope</a>"""

        self.response.out.write(message % url)
        self.response.out.write(" ; redirect uri : %s" % token.redirect_uri)

class RequestTokenCallback(webapp.RequestHandler):

    @login_required
    def get(self):
        """When the user grants access, they are redirected back to this
        handler where their authorized request token is exchanged for a
        long-lived access token."""

        current_user = users.get_current_user()

        #get token from callback uri
        url = atom.http_core.Uri.parse_uri(self.request.uri)

        # get token from datastore
        token = gdata.gauth.ae_load(current_user.user_id())
        # SOLUTION 1
        token.redirect_uri = SETTINGS['OAUTH2CALLBACK']

        if isinstance(token, gdata.gauth.OAuth2Token):
            if 'error' in url.query:
                pass
            else:
                token.get_access_token(url.query)

         gdata.gauth.ae_save(gdata.gauth.token_to_blob(token), "access_token_" + current_user.user_id())

def main():
    application = webapp.WSGIApplication([('/', Home),
                                          ('/step1', Fetcher),
                                          ('/oauth2callback', RequestTokenCallback)],
                                         debug = True)
    run_wsgi_app(application)

if __name__ == '__main__':
    main() 
```

应用程序.yaml：

```
application: xxx
version: 2
runtime: python
api_version: 1

handlers:

- url: .*
  script: main.py 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:19:36.490

当你打电话时`AeLoad`，你需要看看`AeSave`。您会在调用的[源代码](http://code.google.com/p/gdata-python-client/source/browse/src/gdata/gauth.py?r=895214e46e6bbf6885ba21de8bde7524953217c2#1571)中注意到。`token_to_blob`

但是，在 for 的[源代码](http://code.google.com/p/gdata-python-client/source/browse/src/gdata/gauth.py?r=895214e46e6bbf6885ba21de8bde7524953217c2#1473)中`token_to_blob`，`redirect_uri`没有保存到 blob，因此您需要保留它并调用：

```
token = gdata.gauth.ae_load(current_user.user_id())
token.redirect_uri = SETTINGS['OAUTH2CALLBACK'] 
```

如需参考，请参阅另一篇[相关帖子](https://stackoverflow.com/questions/7199405/authenticating-to-calendar-with-python-gdata-and-oauth-2/10220706#10220706)。

**对问题 2 的回答**：阅读回溯：`Blob()`参数应该是`str`实例，而不是`unicode`。您在本地使用的是哪个版本`Python`？

# javascript - 将上传文件的路径从 HTML5 拖放到输入字段

> ID：10500362
> 
> 赞同：14
> 
> 时间：2012-05-08T14:14:00.017
> 
> 标签：javascript, file-upload, input, drag-and-drop

我正在开发一个允许用户上传图像的应用程序（在 Node.js 中，与这种情况无关）。使用带有输入 (type="file") 字段的表单可以正常工作。

但是，我想要的是能够使用 HTML5 拖放来上传图像。据我所知，可以将图像拖动到客户端，并且图像缩略图显示在 div 中。但是，我确实需要一些帮助才能使文件上传正常工作。

问题是我想使用我现在正在使用的表单，并且（以某种方式）将文件的路径传递给输入字段，即流程将完全像现在一样工作，而不是通过浏览来选择文件我想通过拖放将其附加到输入字段。

在下面用于拖放的 js 代码中，拖放到客户端的文件存储在变量“file”中，我可以使用“file.name”、“file.type”和“file.size”与以前使用表单的方式完全相同。但是，我无法访问文件“路径”（file.path），这使得无法访问文件服务器端进行上传，就像我以前那样。

问题是，是否可以在将文件拖到客户端后将文件对象传递给输入字段，以便我可以单击“提交”并上传文件？如果是这样，如何做到这一点？

提前致谢！

保管箱以及我用于文件上传的表单：

```
<div id='upload'>
    <article>
        <div id='holder'>
            <p id='status'>File API and FileReader API not supported</p>
        </div>
    </article> 

    <form method='post' enctype='multipart/form-data' action='/file-upload'>
        <p>
            <input type='file' name='thumbnail'>
        </p>
        <p>
            <input type='submit'>
        </p>
    </form>
</div> 
```

拖放代码：

```
uploadImage: function(){
    var holder = document.getElementById('holder'),
        state = document.getElementById('status');

    if (typeof window.FileReader === 'undefined') {
      state.className = 'fail';
    } else {
      state.className = 'success';
      state.innerHTML = 'File API & FileReader available';
    }

    holder.ondragover = function () { this.className = 'hover'; return false; };

    holder.ondragend = function () { this.className = ''; return false; };

    holder.ondrop = function (e) {
      this.className = '';
      e.preventDefault();

      var file = e.dataTransfer.files[0],
          reader = new FileReader();

      reader.onload = function (event) {
        holder.style.background = 'url(' + event.target.result + ') no-repeat center';
      };

      reader.readAsDataURL(file);

      return false;
    };
}, 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T23:44:30.960

您不能使用文件输入来添加文件数据。尽管如此，您可以做的（在其他技术中）是使用 base64（在使用*readAsDataURL方法时，通过 reader.onload 事件作为**event.target.result*原生可用）编码数据并将其放入隐藏字段：

 *html

```
<article>
    <div id='holder'>
        <p id='status'>File API and FileReader API not supported</p>
    </div>
</article> 

<form method='post' enctype='multipart/form-data' action='/file-upload'>
        <input type='file' name='thumbnail' />
        <input type='hidden' name='base64data' />
        <input type='submit' formenctype='application/x-www-form-urlencoded' />
</form> 
```

js

```
reader = new FileReader();
reader.onload = function (event) {
    document.getElementById('base64data').setAttribute('value', event.target.result);
};
reader.readAsDataURL(file); 
```

从服务器端，您将能够从文件中获取 base64 编码数据，只需对其进行解码并根据需要使用它。

提交表单时，您还可以更改“enctype”属性（通过*formenctype*属性完成）并删除基本的 html 文件输入，因为数据将发布在文本字段中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T20:58:46.377

出于安全目的，不可能知道该字段的路径。通过拖放，您必须让它独立于主表单上传。看这里的例子：[http ://www.sitepoint.com/html5-file-drag-and-drop/](http://www.sitepoint.com/html5-file-drag-and-drop/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-25T03:33:50.127

我发现在后面的代码中访问时未设置 reader.onload 中设置的隐藏字段（请参阅@challet 的答案）。我正在使用 asp.net 和一个 WebForms 项目。要访问隐藏字段，我必须在字段名称前添加 MainContent_。aspx 代码如下

```
 <asp:Content ID="Content3" ContentPlaceHolderID="MainContent" runat="server">
...
<script type="text/javascript">
    function dropHandler(ev) {
        alert("File(s) dropped");
        // Prevent default behavior (Prevent file from being opened)
        ev.preventDefault();
        //alert("Default prevented");
        if (ev.dataTransfer.items) {
            if (ev.dataTransfer.items.length > 1) {
                alert("Only single files can be dragged and dropped into Caption Pro Web");
                return;
            }
            // If dropped items aren't files, reject them
            if (ev.dataTransfer.items[0].kind === 'file') {
                var file = ev.dataTransfer.items[0].getAsFile();                    
                document.getElementById("MainContent_DroppedFileName").value = ev.dataTransfer.items[0].name
                reader = new FileReader();
                reader.onload = function (event) {
                    document.getElementById('MainContent_DroppedFileContent').value = event.target.result;
                };
                reader.readAsDataURL(ev.dataTransfer.items[0]);               
            }
        } else {
            // Use DataTransfer interface to access the file(s)
             if (ev.dataTransfer.files.length > 1) {
                alert("Only single files can be dragged and dropped into Caption Pro Web");
                return;
            }           
            document.getElementById("MainContent_DroppedFileName").value = ev.dataTransfer.files[0].name
            document.getElementById("MainContent_DroppedFileContent").value = "Test";

            reader = new FileReader();
            reader.onload = function (event) {
                 document.getElementById("MainContent_DroppedFileContent").value = event.target.result;
            };
            reader.readAsDataURL(ev.dataTransfer.files[0]);           
        }

        document.getElementById('<%=btnDrop.ClientID %>').click();

    }
</script>

...

    <div id="drop_zone" ondrop="dropHandler(event);" ondragover="dragOverHandler(event);">
    <p>Drag image to this Drop Zone ...</p>
    </div> 
    <asp:HiddenField ID="DroppedFileName" runat="server" />
    <asp:HiddenField ID="DroppedFileContent" runat="server" />
...
 </asp:Content> 
```

我从 c# 访问隐藏字段，如下所示

```
protected void btnDrop_Click(object sender, EventArgs e)
         {
             string FileName = DroppedFileName.Value;
             string FileContent = DroppedFileContent.Value;
         } 
```

如果我使用 Internet Explorer 作为目标浏览器（不以管理员身份运行 VS，因为这会禁用拖放！）并在 reader.onload() 函数中设置断点，隐藏字段 DroppedFileContent 包含编码的文件内容，但是当我尝试从 btnDrop_Click 访问它只包含 reader.onload() 之前设置的“测试”，不包含编码文件内容。DroppedFileNam.Value 字段与 Javascript 中的设置相同。*

# android - 在电话间隙中隐藏模糊软键盘

> ID：10500364
> 
> 赞同：5
> 
> 时间：2012-05-08T14:14:09.423
> 
> 标签：android, cordova, hide, android-softkeyboard

我有一个 PhoneGap 应用程序，它工作正常。唯一困扰我的是 PhoneGap 处理软键盘的方式。当输入模糊时它不会隐藏。它确实在 iOS 中执行此操作，但在 Android 中加载新页面时它甚至会保留。

我看看这个： [http ://wiki.phonegap.com/w/page/27915465/How%20to%20show%20and%20hide%20soft%20keyboard%20in%20Android](http://wiki.phonegap.com/w/page/27915465/How%20to%20show%20and%20hide%20soft%20keyboard%20in%20Android)

这： [https ://github.com/phonegap/phonegap-plugins/tree/master/Android/SoftKeyboard](https://github.com/phonegap/phonegap-plugins/tree/master/Android/SoftKeyboard)

但他们都没有为我工作，有什么想法吗？

问候， 埃里克

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T21:23:51.737

您链接到的插件对我有用（有完全相同的问题）：

```
$("#eingabe").blur(); //for ios
var softkeyboard = window.cordova.plugins.SoftKeyBoard;
softkeyboard.hide(); 
```

您可能使用了 Cordova 2.0.0（或更高版本）并且没有修改插件文件（为 Phonegap < 2.0 编写的）。

以下是更新的文件（我使用的文件）：

## 软键盘.js

```
cordova.plugins = cordova.plugins || {};

cordova.plugins.SoftKeyBoard = {
show: function (win, fail) {
    return cordova.exec(
        function (args) { if (win !== undefined) { win(args); } },
        function (args) { if (fail !== undefined) { fail(args); } },
        'SoftKeyBoard', 'show', []
    );
},

hide: function (win, fail) {
    return cordova.exec(
        function (args) { if (win !== undefined) { win(args); } },
        function (args) { if (fail !== undefined) { fail(args); } },
        'SoftKeyBoard', 'hide', []
    );
},

isShowing: function (win, fail) {
    return cordova.exec(
        function (args) { if (win !== undefined) { win(args); } },
        function (args) { if (fail !== undefined) { fail(args); } },
        'SoftKeyBoard', 'isShowing', []
    );
}
}; 
```

## 软键盘.java

```
package org.apache.cordova.plugins;

import org.json.JSONArray;
import android.content.Context;
import android.view.inputmethod.InputMethodManager;
import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;

public class SoftKeyBoard extends Plugin {
public SoftKeyBoard () { }

public void showKeyBoard () {
    InputMethodManager mgr = (InputMethodManager) cordova.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
    mgr.showSoftInput(webView, InputMethodManager.SHOW_IMPLICIT);
    ((InputMethodManager) cordova.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE)).showSoftInput(webView, 0);
}

public void hideKeyBoard() {
    InputMethodManager mgr = (InputMethodManager) cordova.getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
    mgr.hideSoftInputFromWindow(webView.getWindowToken(), 0);
}

public boolean isKeyBoardShowing() {
    // if more than 100 pixels, its probably a keyboard...
    int heightDiff = webView.getRootView().getHeight() - webView.getHeight();
    return (100 < heightDiff);
}

public PluginResult execute(String action, JSONArray args, String callbackId) {
    if (action.equals("show")) {
        this.showKeyBoard();
        return new PluginResult(PluginResult.Status.OK, "done");
    } else if (action.equals("hide")) {
        this.hideKeyBoard();
        return new PluginResult(PluginResult.Status.OK);
    } else if (action.equals("isShowing")) {
        return new PluginResult(PluginResult.Status.OK, this.isKeyBoardShowing());
    } else {
        return new PluginResult(PluginResult.Status.INVALID_ACTION);
    }
}
} 
```

## 修改config.xml

还要确保在“ **res/xml/config.xml** ”中添加以下行：

```
<plugin name="SoftKeyBoard" value="org.apache.cordova.plugins.SoftKeyBoard" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-12T19:30:39.283

这对我有用，让我的头免于过度抓挠！（也不需要插件）

```
var hideKeyboard = function() {
    document.activeElement.blur();
    $("input").blur();
}; 
```

解决方案在[此处](http://uihacker.blogspot.cz/2011/10/javascript-hide-ios-soft-keyboard.html)找到，您可以在其中找到非`jQuery`解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-06T18:18:29.123

请注意，与键盘状态无关，Java 将调用：

```
return new PluginResult(PluginResult.Status.OK, this.isKeyBoardShowing()); 
```

这里的第二个参数包含真或假。所以你的javascript回调应该是：

```
cordova.plugins.SoftKeyBoard.isShowing(function (showing) {
    if (showing) {
        console.error("############ keyboard is open");
    } else {
        console.error("############ keyboard is closed");
    }
}
,function () {
    // never called
    console.error("############ never called!");
}); 
```

似乎 Cordova 期望成功和失败的 javascript 回调，即使在这种情况下，在两种可能的结果中都只调用成功回调。

# extjs - 带有子字段的 Extjs 模型字段

> ID：10500367
> 
> 赞同：5
> 
> 时间：2012-05-08T14:14:14.910
> 
> 标签：extjs, model, grid, field

任何人都知道您如何在 ExtJS 中对任何字段的子字段进行建模？例如

外部数据模型：

```
fields:[
   {name: 'id', type: 'int'},
   {name: 'title', type: 'string'},
   {name: 'description', type: 'string'},
   {name: 'priority', type: 'auto', fields:[
      {name: 'code', type: 'string'}
   ]},
   {name: 'createdBy', type: 'auto'},
] 
```

然后在我的网格面板中

扩展网格面板

```
columns:[
    {header:'Title', dataIndex:'title', flex:1},
    {header:'Priority', dataIndex:'code'}
], 
```

知道如何访问“优先级”下的dataIndex“代码”吗？提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T07:22:22.220

感谢@sha - 这是我需要的答案:)

模型

```
fields:[

            {name: 'id', type: 'int'},
            {name: 'title', type: 'string'},
            {name: 'description', type: 'string'},
            {name: 'priority', type: 'auto'},
            {name: 'code', type: 'string', mapping:'priority.code'},
            {name: 'createdBy', type: 'auto'},

        ] 
```

梁板

```
columns:[

             {header:'Title', dataIndex:'title', flex:1},
             {header:'Description', dataIndex:'description'},
             {header:'Priority', dataIndex:'code'}

         ], 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T14:53:27.803

尝试这个：

```
dataIndex: 'priority.code' 
```

# php - 试图切断最后一个空格字符

> ID：10500368
> 
> 赞同：1
> 
> 时间：2012-05-08T14:14:19.393
> 
> 标签：php

我需要找出字符串中的最后一个字符在哪里，字符是一个空格，然后把它剪掉。这是我正在使用的函数，但是 if 语句似乎有问题，但我不知道是什么。$text-string 中肯定有一个空格。

假设我有一个字符串“嘿，我叫 Joh”。然后它必须缩短为“嘿，我的名字是”。

```
$checkLastChar = false;
$text = $line[2];

while($checkLastChar != true){
   for($i = 1; $i <= strlen($text); $i++)
    {
        if($text[strlen($tekst) - $i] == " ") {
                $checkLastChar = true;
            $text = substr($text, 1, strlen($text) - $i);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T14:19:13.047

```
substr($string, 0, strrpos($string, ' ')); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T14:15:17.773

~~你为什么不使用[`rtrim()`](http://us.php.net/manual/en/function.rtrim.php)？~~

**更新**

根据澄清[，像 Nate 的解决方案](https://stackoverflow.com/a/10500457/250259)似乎更合适。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T14:15:31.817

你有没有考虑过使用[trim()](http://lv.php.net/trim)？它从开头和结尾去除空格。

例子：

```
echo trim(' Hello my name is Matt.  '); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T14:28:25.310

试试这个：

```
<?php
$str = "dsajhc   \tsjdtgsd   "; // string with whitespaces
$str = preg_replace( '/(\s+.*)/i', '', $str ); // remove everything after whitespace
?> 
```

希望能帮助到你。

# java - 布尔值中操作数的顺序是否重要？

> ID：10500370
> 
> 赞同：-1
> 
> 时间：2012-05-08T14:14:21.350
> 
> 标签：java, boolean

布尔值中操作数的顺序会影响求值顺序吗？作为一个例子，我可以依靠

```
String s = ...;
if (s != null && s.length() > 10) ... 
```

我似乎记得 Java 语言没有定义评估顺序，并且 null 值`s`可能导致 NPE。（a）原则上和（b）在常见的 Java 实现中仍然如此吗？

更新：我找不到确切的副本。有趣的是看到答案中的意见分歧并获得反对票 - 嗯！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T14:16:24.407

是的，这很重要

> ... Java 语言没有定义评估顺序

不是真的。参数是从左到右计算的，所以像这样的表达式`s != null && s.length() > 10`永远不会抛出`NullPointerException`.

请参阅Java 语言规范中的[15.7 表达式 - 评估顺序](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.7)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T14:15:18.930

不，这不是真的。这是避免空指针异常的正确方法。仅当表达式的值仍不清楚时，才计算一个操作数，并计算下一个操作数。

这意味着：

*   如果您有一个 and 运算符 (&&) 并且第一个操作数的计算结果为 false，则不会计算第二个操作数。
*   如果您有 or 运算符 (||) 并且第一个操作数的计算结果为 true，则不会计算第二个操作数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T14:19:15.787

Java 和许多其他语言支持布尔语句的[短路求值。](http://en.wikipedia.org/wiki/Short-circuit_evaluation)

# `&&`和`||`

在 Java 中，`&&`和`||`是短路布尔运算符。如果您使用这些，则只有在确定语句的真值所必需的情况下才会评估第二个参数。

# `&`和`|`

在 Java 中，按位运算符`&`和`|`也是非短路布尔运算符。如果使用它们，将始终评估两个参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T14:17:32.977

它被称为*短路逻辑和运算*，这意味着`&&`如果前面的部分要返回，则永远不会评估后面的部分`false`。

我们甚至有*短路逻辑或操作*，它不会评估`||`if 之前的部分之后的部分 return `true`。

此类操作数通常用于`null`您发布的示例中的检查。

`s`如果您要使用being执行以下（正常和运算符）`null`，结果将是灾难性的。

```
if (s != null & s.length() > 10) 
```

这是因为即使返回 a`s.length()`也会继续尝试评估，导致 a on 。但是，对于短路版本，将完全跳过第二部分。`s != null``false``NullPointerException``s.length()`

# http - 减少http请求或部分从数据库加载数据

> ID：10500371
> 
> 赞同：0
> 
> 时间：2012-05-08T14:14:28.070
> 
> 标签：http, time, load, maps

我有这个网站，我想减少 http 请求，www.dealsonmap.gr，我怎样才能减少加载时间？

我在 pingdom 工具上检查了该站点，它告诉我它有 600 多个请求！

有解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:17:43.767

您的站点向服务器发出 127 个请求，并且请求的初始化速度很慢。

减少 .css 和 .js 文件的数量，这样可以加快下载速度。

*   将所有 .css 文件连接到一个文件中*（9 个 .css 请求）*
*   获取相似的图像（fb、g+、tw）并将它们组合成包含图像数组的图像，并使用`background-position`css 属性访问它们（71 个图像请求）
*   如果可能，将 javascript 文件连接成更大的 .js 文件*（27 个 .js 请求）*

# mysql - SQL 子查询问题

> ID：10500377
> 
> 赞同：0
> 
> 时间：2012-05-08T14:14:46.353
> 
> 标签：mysql

我试图以这样的方式结合这两个查询来确定拥有设备的 PI 是谁（价值超过 10 万美元）。我有能力找到一个 PI 拥有的大于 100k 的所有设备。我也有能力查看所有的 PI。我只是无法将这两个查询结合起来。我尝试过使用 WHERE 子查询和 EXIST 子查询。我希望能够找到查询#2 中存在 PI 的所有设备（与其 PI 所有者匹配）。

**查询 #1 用于查找特定 PI 的设备**

```
select Account_No,Inventory_No,Building_No,Room_No,CDDEPT,Location,Normalized_MFG,Manufacturer_Name,Normalized_Model,Name,Serial_Code,CONCAT( '$', FORMAT( Cost, 2 ) ) as Cost, Equipment_Inventory_Normalized.Active 
from Temp_Equipment_Inventory.Equipment_Inventory_Normalized, `paul`.`ROOM`, `paul`.`BLDG`, `paul`.`LABORATORY`, `paul`.`PERSON` 
where (`PERSON`.`ID` = `LABORATORY`.`PI_ID` OR `PERSON`.`ID` = `LABORATORY`.`SUPV_ID`) 
AND `LABORATORY`.`RM_ID` = `ROOM`.`ID` 
AND `LABORATORY`.`ACTIVE` = '1' 
AND `ROOM`.`BLDG_ID` = `BLDG`.`ID` 
AND ((
`BLDG`.`BLDGNUM` = Equipment_Inventory_Normalized.Building_No 
AND Equipment_Inventory_Normalized.Actual_Building IS NULL 
AND (`BLDG`.`BLDGNUM` != '1023' AND `LABORATORY`.`OTHER_LEVEL` != '1' AND `ROOM`.`RMNUM` != '0199')
)OR (
`BLDG`.`BLDGNUM` = Equipment_Inventory_Normalized.Actual_Building AND 
(`BLDG`.`BLDGNUM` != '1023' AND `LABORATORY`.`OTHER_LEVEL` != '1' AND `ROOM`.`RMNUM` != '0199')
)) 
AND ((
`ROOM`.`RMNUM` = Equipment_Inventory_Normalized.Room_No 
AND Equipment_Inventory_Normalized.Actual_Room IS NULL
)OR (
`ROOM`.`RMNUM` = Equipment_Inventory_Normalized.Actual_Room
)) 
AND Equipment_Inventory_Normalized.Active !=0 
AND SurplusPending != '1'
AND Cost >= 100000 
AND `PERSON`.`CANNUM`='810010787' 
```

**查询 2 找到所有 PI**

```
select distinct i.CAN
from CGWarehouse.CCGV10WC w
inner join CGWarehouse.CCGV10IC i
on w.PROJECT_NUMBER=i.SPONSORED_PROJECT
and w.SEQUENCE_NUMBER=i.PROJECT_SEQUENCE
where w.STATUS='A'
and i.PRIN_INVEST_CODE='Y'
and i.DEL_CODE!='Y'
and i.CAN IS NOT NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:36:16.133

也许您正在 WHERE 子句中寻找`IN`关键字？

请原谅我，但我不得不稍微清理一下您的查询格式......这有点像我的强迫症：

```
SELECT
    Account_No,
    Inventory_No,
    Building_No,
    Room_No,
    CDDEPT,
    Location,
    Normalized_MFG,
    Manufacturer_Name,
    Normalized_Model,
    Name,
    Serial_Code,
    CONCAT('$', FORMAT( Cost, 2 )) AS Cost,
    Equipment_Inventory_Normalized.Active
FROM
    Temp_Equipment_Inventory.Equipment_Inventory_Normalized a,
    `paul`.`ROOM`,
    `paul`.`BLDG`,
    `paul`.`LABORATORY`,
    `paul`.`PERSON` 
WHERE
    (`PERSON`.`ID` = `LABORATORY`.`PI_ID` OR `PERSON`.`ID` = `LABORATORY`.`SUPV_ID`) 
    AND `LABORATORY`.`RM_ID` = `ROOM`.`ID` 
    AND `LABORATORY`.`ACTIVE` = '1' 
    AND `ROOM`.`BLDG_ID` = `BLDG`.`ID` 
    AND (
        (
            `BLDG`.`BLDGNUM` = Equipment_Inventory_Normalized.Building_No 
            AND Equipment_Inventory_Normalized.Actual_Building IS NULL 
            AND `BLDG`.`BLDGNUM` != '1023'
            AND `LABORATORY`.`OTHER_LEVEL` != '1'
            AND `ROOM`.`RMNUM` != '0199'
        ) OR (
            `BLDG`.`BLDGNUM` = Equipment_Inventory_Normalized.Actual_Building
            AND `BLDG`.`BLDGNUM` != '1023'
            AND `LABORATORY`.`OTHER_LEVEL` != '1'
            AND `ROOM`.`RMNUM` != '0199'
        )
    ) 
    AND (
        (
            `ROOM`.`RMNUM` = Equipment_Inventory_Normalized.Room_No 
            AND Equipment_Inventory_Normalized.Actual_Room IS NULL
        ) OR (
            `ROOM`.`RMNUM` = Equipment_Inventory_Normalized.Actual_Room
        )
    ) 
    AND Equipment_Inventory_Normalized.Active !=0 
    AND SurplusPending != '1'
    AND Cost >= 100000 
    AND `PERSON`.`CANNUM` IN ( /* this assumes that the `PERSON`.`CANNUM` column matches up with the CGWarehouse.CCGV10IC.CAN column */
        SELECT DISTINCT i.CAN
        FROM
            CGWarehouse.CCGV10WC w
            INNER JOIN CGWarehouse.CCGV10IC i ON w.PROJECT_NUMBER=i.SPONSORED_PROJECT AND w.SEQUENCE_NUMBER=i.PROJECT_SEQUENCE
        WHERE
            w.STATUS='A'
            AND i.PRIN_INVEST_CODE='Y'
            AND i.DEL_CODE!='Y'
            AND i.CAN IS NOT NULL
    ) 
```

# c++ - 为顺序相关操作建议的流控制结构

> ID：10500387
> 
> 赞同：0
> 
> 时间：2012-05-08T14:15:21.210
> 
> 标签：c++, design-patterns, dry

我遇到了以下问题，任何想像力都不难解决，但**我想知道最好/最优雅的解决方案是什么。**

我有以下方法，其原型如下所示：

```
bool Team::isEveryoneDead(int teamOnTurn); 
```

有**两个团队**可用，根据当前团队的哪个实例轮流，我想检查团队中的每个角色是否**以这个非常特殊的顺序**死亡：

1.  循环遍历团队中**没有****先**轮到的所有角色。如果有任何角色还活着，请**停止**循环（并转到第 2 步）。如果**没有**人活着，**终止**函数并返回。

2.  既然我知道**不**轮流的团队至少包含一个活着的角色，请循环遍历当前轮流的团队并检查相同的内容。我应该找到**一个**活着的人，**停止循环**并终止/返回。

该参数`int teamOnTurn`允许我解决当前轮流的 Team 实例。**我评估“活着的条件”的顺序在这里非常重要。**

现在，可以采用几种方法，比如硬编码订单（因为只有 2 个可能的订单）并通过检查谁在轮流来解决订单，然后执行已经具有特定订单的分支，如下所示：

```
bool Team::isEveryoneDead(int teamOnTurn) {
    if (Team::Blue == teamOnTurn) {
        checkThis();
        checkThat();
    } else {
        checkThat();
        checkThis();
    }
} 
```

但是，此解决方案不适用于 5！更多项目的特定调用排序的排列。**应该部署什么技术以最优雅的方式解决这个问题:)**？

在此先感谢，斯嘉丽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:24:16.783

尝试创建另一个实际执行检查的内部方法，并让 isEveryoneDead() 方法协调检查团队的顺序，可能是这样的：

```
bool Team::isEveryoneDead(int teamOnTurn) {
    bool isFound = isEveryoneDeadInternal( /* params for team not on turn */ );
    if(isFound) {
        isFound = isEveryoneDeadInternal( /* params for team on turn */ );
    }
    return isFound;
} 

// This method know nothing about on turn or off turn
bool Team:isEveryoneDeadInternal() {
    // Loop through all characters in the team, checking if any are alive
    // When the first live character is found, return true
    // else return false
} 
```

这是一个叫做 DRY 的概念：不要重复自己

# jquery - 简单的jquery图像翻转

> ID：10500391
> 
> 赞同：2
> 
> 时间：2012-05-08T14:15:27.213
> 
> 标签：jquery, rollover

我有多个缩略图，并且希望主图像在每个缩略图都翻转时代表缩略图的大版本。我很欣赏这一定是一种常见用法，但我正在努力寻找一个简单的解决方案。我使用了以下代码，我很欣赏它可能很差，但这对我来说都是全新的......谢谢

```
$('.thumbnail').mouseover(function() {
    var currentimg = $('this').attr('src');
    $('#imageMain img').attr('src', currentimg);
}); 
```

我没有包含 HTML，因为我想这很清楚我想要实现的目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:17:41.200

你试过改变吗

```
$('this').attr('src'); 
```

和

```
$(this).attr('src'); 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:19:07.643

您应该为两种翻转状态创建一个类，然后您可以使用[toggleClass](http://api.jquery.com/toggleClass/)函数：

```
$(".thumbnail").hover(function(){
    $(this).toggleClass("rollover");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T14:20:02.880

更改`$('this')`为`$(this)`

它应该可以工作，当使用“this”来引用当前对象时，它不需要引号

# c++ - 单词到音节转换器

> ID：10500394
> 
> 赞同：1
> 
> 时间：2012-05-08T14:15:33.113
> 
> 标签：c++, nlp, linguistics

我正在用 C++ 编写一段代码，其中我需要一个单词到音节的转换器，是否有任何可用的开源标准算法或任何其他可以帮助我构建一个的链接。

```
for a word like invisible syllable would be in-viz-uh-ble 
```

理想情况下，它甚至应该能够解析像“隐形”这样的复杂单词。

我已经在 perl 和 python 中找到了算法的链接，但我想知道 C++ 中是否有任何库可用

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T14:33:19.460

您的示例显示了单词的语音表示，而不仅仅是分成音节。这是一个复杂的 NLP 问题。

看看[soundex](http://en.wikipedia.org/wiki/Soundex)和[metaphone](http://en.wikipedia.org/wiki/Metaphone)。两者都有 C/C++ 实现。

许多词典也提供了[IPA](http://en.wikipedia.org/wiki/International_Phonetic_Alphabet)单词的表示法。看看维基词典 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-07T12:29:55.267

为了检测单词中的音节，您可以根据您的需要调整我的项目。它被称为[tinyhyphenator](http://tiny-hyphenator.sourceforge.net/ "小连字符")。

它为您提供一个单词中所有可能的断字索引的整数列表。对于德语，它的渲染非常准确。您必须自己获取索引列表并插入连字符。

“适应”是指添加英语音节的规范。看一下源代码，它应该是非常不言自明的。

# python - 通过方法更新模型：SQLAlchemy

> ID：10500400
> 
> 赞同：0
> 
> 时间：2012-05-08T14:16:02.707
> 
> 标签：python, sqlalchemy

我对模型事物有方法：

```
def method(self, session):
        if self.column_value is None:
            self.column_value = some expensive calculation
            session.add(self)
            session.commit()
            return self.column_value                        
        else:
            return self.column_value 
```

所以，我可以运行 thing_instance.method 并返回 column_value，如果需要进行计算。这就是我在其他地方的做法，我正在努力适应使用 python 来做这件事。

这不像我想要的那样工作，我遇到了很多错误......有什么更好的方法？

编辑：

简而言之，就是这种方法。我有thing_instance 并调用thing_instance.method()。我得到的错误是：

```
sqlalchemy.exc.InterfaceError: (InterfaceError) Error binding parameter 0 - probably unsupported type 
```

这可能更有用。

我会根据要求放置更具体的代码，但这会分散我的问题。这里的问题是：如果未设置列值，我该如何在 sqlalchemy 模型上编写一个计算和更新实例列值的方法？以pythoinic / sqlalchemic方式？我尝试的变体没有奏效，所以我把它放在一边，问了这个问题

编辑2：

这是一个列类型错误.....计算的值是一个列表，我需要转换或使用 PickleType 作为列。任何指针仍然赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:06:27.827

您所指的错误是因为整数 0 是所讨论类型的无效值？此外，如果 thing_instance 已经处于持久连接状态，则无需将其添加到会话中！此外，a`session.commit()`很可能不是您真正想要的，也许您的意思是`session.flush()`？

# linux - 如何在一个命令中删除并重新创建现有的符号链接？

> ID：10500405
> 
> 赞同：1
> 
> 时间：2012-05-08T14:16:23.637
> 
> 标签：linux, symlink

我有一个名为我的实时服务器的符号链接，我`current`在目录中有版本`releases`，即`current -> releases/2012-05-08_15-13`

如果我想更新我的`current`目录的符号链接，我必须 unlink/rm 它并重新 ln -s 它。

我的问题是：如何删除符号链接并一步将其更新到最新版本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T14:18:30.593

ln 的形式是

```
ln -sf sourcefile targetlink 
```

尝试

```
ln -sf releases/2012-05-08_15-13 current 
```

删除当前链接并创建新链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T14:23:07.350

如果您想在单个命令中执行此操作，请按照@hughw 的建议执行并运行`ln -sf`。

如果您想以原子方式替换符号链接（即，不存在符号链接不存在的时间点）创建一个新符号链接，然后`mv`将其覆盖旧符号链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-06T22:05:12.117

正如 ToddR 所建议的那样，这是唯一可以在大多数 Linux 版本上实际运行的答案——当然是 Ubuntu——它使用 coreutils 包中的 ln 。让我向你证明。

```
matthewh@xen:~$ mkdir -p releases/dirA
matthewh@xen:~$ mkdir -p releases/dirB
matthewh@xen:~$ ln -s releases/dirA
matthewh@xen:~$ ls -l dirA
lrwxrwxrwx 1 matthewh matthewh 13 Apr  7 09:58 dirA -> releases/dirA
matthewh@xen:~$ ln -sf releases/dirB
matthewh@xen:~$ rm dirA
matthewh@xen:~$ ln -s releases/dirA current
matthewh@xen:~$ ln -sf releases/dirB current
matthewh@xen:~$ ls -l current
lrwxrwxrwx 1 matthewh matthewh 13 Apr  7 09:59 current -> releases/dirA  <--- DOESN'T WORK!
matthewh@xen:~$ ln -sfn releases/dirB current <--- WORKS!
matthewh@xen:~$ ls -l current
lrwxrwxrwx 1 matthewh matthewh 13 Apr  7 09:59 current -> releases/dirB 
```

所以在Linux上正确的方法是：

```
ln -sfn source target 
```

> -n, --no-dereference 如果 LINK_NAME 是指向目录的符号链接，则将其视为普通文件

这是必不可少的，如果你不使用 -n 开关，你最终会在源目录中得到一个名为“target”的符号链接。

在我的例子中，

```
matthewh@xen:~$ ls -l releases/dirA/
total 0
lrwxrwxrwx 1 matthewh matthewh 13 Apr  7 10:03 dirB -> releases/dirB 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-21T09:27:13.647

正确答案：

```
ln -s new current_tmp && mv -Tf current_tmp current 
```

移动是原子操作。

不要使用“ln -snf”。strace 'ln -snf' 显示了两个系统调用 unlink + symlink。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-25T18:42:00.097

此示例清除了 -sfn 开关的使用：

```
drwxr-xr-x. 10 root    root         4096 Aug 25 18:24 .
dr-xr-xr-x. 25 root    root         4096 Aug 19 10:32 ..
lrwxrwxrwx.  1 wildfly wildfly        25 Aug 25 18:15 wildfly -> /opt/wildfly-8.2.0.Final/
drwxr-xr-x. 10 wildfly wildfly      4096 Aug 25 18:28 wildfly-8.2.0.Final

                                                link to            link
                                                  |                 |
[gecloud@ip-10-227-224-45 opt]$ sudo ln -sfn wildfly-8.2.0.Final /opt/wildfly
[gecloud@ip-10-227-224-45 opt]$ ls -la
total 115540
drwxr-xr-x. 10 root    root         4096 Aug 25 18:34 .
dr-xr-xr-x. 25 root    root         4096 Aug 19 10:32 ..
lrwxrwxrwx.  1 root    root           19 Aug 25 18:34 wildfly -> wildfly-8.2.0.Final
drwxr-xr-x. 10 wildfly wildfly      4096 Aug 25 18:28 wildfly-8.2.0.Final 
```

# tags - Jsoup 添加空格

> ID：10500407
> 
> 赞同：0
> 
> 时间：2012-05-08T14:16:25.083
> 
> 标签：tags, whitespace, jsoup

使用 jsoup 解析时，代码如下：

```
<p>Long<a>word</a></p> 
```

jsoup 返回：

```
<p>Long <a>word</a></p> 
```

“长词”是一个词。如何避免这种情况？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T22:59:29.187

如果我确实正确地回答了您的问题，并且您想要没有标签的文本，并且以它们在浏览器中显示的方式，我会使用 .text() 如果它位于 Element 或 Elements 变量中。它应该解析“

长字

”，变成简单的“长剑”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-28T10:51:07.553

您可以使用

```
Document doc = Jsoup.connect("url").get();
Element link = doc.select("p");
System.out.println(link.text().replace(" ", "")); 
```

# android - 动态数组，也可以保存到文件中

> ID：10500409
> 
> 赞同：0
> 
> 时间：2012-05-08T14:16:29.120
> 
> 标签：android

在我的 Android 应用程序中，我需要列出最喜欢的项目。这些项目中的每一个都由 3 个键/值对组成。我想要一个能够：

*   仅在末尾插入
*   可排序
*   随时删除
*   可以保存到文件

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:21:12.400

[`SharedPreferences`](http://developer.android.com/guide/topics/data/data-storage.html#pref)考虑到您的要求，听起来很完美。

> 该类[`SharedPreferences`](http://developer.android.com/reference/android/content/SharedPreferences.html)提供了一个通用框架，允许您保存和检索原始数据类型的持久键值对。您可以使用[`SharedPreferences`](http://developer.android.com/reference/android/content/SharedPreferences.html)来保存任何原始数据：布尔值、浮点数、整数、长整数和字符串。此数据将在用户会话中持续存在（即使您的应用程序被终止）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:21:35.043

用于`ArrayList`前 3 个点，最后一个，覆盖`toString()`方法并将结果写入文件。

# css - 使一个表占用 100% 的包含 td

> ID：10500411
> 
> 赞同：2
> 
> 时间：2012-05-08T14:16:33.660
> 
> 标签：css, html-table

```
<style>
        .topTable
        {
            border-top:1px solid #333333;
            border-right:1px solid #333333;
        }

        .topTable td, th
        {
            border-left:1px solid #333333;
            border-bottom:1px solid #333333;
        }

        .topTable .inner
        {
            border-width:0px;
            position:relative;
            top:0px;
            left:0px;
            height:100%;
            width:100%;
        }
        .topTable .container
        {
            padding:0px;
            border-width:0px;
            position:relative;
        }
    </style>

    <table cellpadding="4" class="topTable" cellspacing="0" style="background-color:#f0f0f0;">
        <tr>
           <th>Option A</th>
           <td class="container">
                <table cellpadding="4" class="inner" cellspacing="0" style="background-color:#f0a0a0;">
                     <tr>
                        <td>Part 1</td>
                        <td>Part 2</td>
                     </tr>
                </table>
           </td>
           <td class="container">
                <table cellpadding="4" class="inner" cellspacing="0" style="background-color:#a0f0a0;">
                     <tr>
                        <td>Part 3</td>
                     </tr>
                     <tr>
                        <td>Part 3</td>
                     </tr>
                </table>
           </td>
           <td>Done</td>
        </tr>
    </table> 
```

我需要 TD 中的那些表是 height:100% 并且似乎没有任何效果。在这种情况下，我不能使用 rowspan，因为每个子表中的数据都是动态的。我需要一些 CSS 来强制这些表格占据它们存储的 td 的全部高度。我认为这很容易，因为我正在处理块元素，但我必须遗漏一些东西，因为它根本不起作用不管我尝试什么技巧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:39:22.743

这是我能做的最好的：http: [//jsfiddle.net/jc5qf/2/](http://jsfiddle.net/jc5qf/2/)

希望它能让你走上正确的道路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:07:16.357

找到了使用 jQuery 的解决方法。

有人发布了与此类似的内容，我对其进行了修改以满足这些需求：

```
$(function () {
        $('td.container').each(function () {
            var $this = $(this);
            var panelheight = $this.height();
            $this.children('table.inner').height(panelheight);
        })
    }); 
```

只需将每个包含 td 的类设置为“容器”，并且其中的表需要拉伸以将该容器的高度匹配到“内部”这个 jQuery 将从那里接管。

# c# - 通过在开头放置以某个字母开头的单词来对字符串列表进行排序

> ID：10500413
> 
> 赞同：4
> 
> 时间：2012-05-08T14:16:39.813
> 
> 标签：c#, linq, list

假设我有以下列表：

```
IList<string> list = new List<string>();
list.Add("Mouse");
list.Add("Dinner");
list.Add("House");
list.Add("Out");
list.Add("Phone");
list.Add("Hat");
list.Add("Ounce"); 
```

使用 LINQ 我将如何选择包含“ou”的单词并对选择进行排序，以便在开头列出以“ou”开头的单词，然后列出包含但不以“ou”开头的单词。我要创建的列表是：

```
Ounce
Out
House
Mouse 
```

我想出了以下内容，但它不起作用：

```
list.Where(x => x.Contains("ou"))
    .OrderBy(x => x.StartsWith("ou"))
    .Select(x => x); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T14:21:02.190

你得到一个区分大小写的比较，而且你还需要`OrderByDescending()`. 实现不区分大小写的一种快速而肮脏的方法是`ToLowerInvariant()`：

```
var result = list.Where(x => x.ToLowerInvariant().Contains("ou"))
                    .OrderByDescending(x => x.ToLowerInvariant().StartsWith("ou"))
                    .Select(x => x); 
```

现场示例：[http ://rextester.com/GUR97180](http://rextester.com/GUR97180)

[这个先前的答案](https://stackoverflow.com/questions/444798/case-insensitive-containsstring)显示了进行不区分大小写比较的*正确方法（即，不要使用我上面的例子，它不好）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T14:22:01.420

您的第一个错误是没有以不区分大小写的方式比较字符串；"Out" 和 "Ounce" 有大写 Os，并且在使用 Contains("ou") 时不会返回 "true"。解决方案是在检查字母时使用 ToLower()。

```
list.Where(x => x.ToLower().Contains("ou"))
    .OrderByDescending(x => x.ToLower.StartsWith("ou")) //true is greater than false.
    .Select(x => x); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T14:19:50.187

三个问题：

*   您需要将结果分配给某些东西，否则它会被简单地丢弃。
*   你需要使用*，*`OrderByDescending`因为`true`如果你使用. *`false``OrderBy`*
**   您需要使用不区分大小写的比较。*

 *尝试这个：

```
var needle = "ou";
var stringComparison = StringComparison.OrdinalIgnoreCase;

var query =
    from word in list
    let index = word.IndexOf(needle, stringComparison)
    where index != -1
    orderby index
    select word; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T14:21:16.103

```
list = list.Where(x => x.ToLower().Contains("ou"))
           .OrderBy(x => !x.ToLower().StartsWith("ou")).ToList(); 
```

或者通过使用 List 的方法（将其从 IList 更改为 List）：

```
list.RemoveAll(x => !x.ToLower().Contains("ou"));
list.Sort((s1, s2) => -1 * 1.ToLower().StartsWith("ou")
                            .CompareTo(s2.ToLower().StartsWith("ou"))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T14:24:52.040

这将在以“OU”开头的单词的开头附加一个空格。

```
var result = list.Where(x => x.ToLowerInvariant().Contains("ou"))
                 .OrderBy(x => x.ToLowerInvariant()
                                .StartsWith("ou") ? " " + x : x.Trim()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T14:27:18.607

我想这就是你要找的：

```
list = list.Where(x => x.IndexOf("ou", StringComparison.OrdinalIgnoreCase) >= 0)
            .OrderByDescending(x => x.StartsWith("ou", StringComparison.OrdinalIgnoreCase))
            .ThenBy(x => x)
            .ToList(); 
```

请注意，我没有转换字符串`ToLower`（或大写），而是使用`StringComparison`枚举（当前`OrdinalIgnoreCase`）。这确保了它在任何文化中都能按预期一致地工作。根据您的情况选择正确的不区分大小写的比较。

如果您更喜欢以下 LINQ 查询语法：

```
list = (from x in list
        where x.IndexOf("ou", StringComparison.OrdinalIgnoreCase) >= 0
        orderby x.StartsWith("ou", StringComparison.OrdinalIgnoreCase) descending, x
        select x).ToList(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-08T14:33:36.243

您可以通过传入自定义比较器的实例来简单地调用该`list.Sort`方法，如下所示：

```
public class MyCustomStringComparer: IComparer<string>  
{  
    public int Compare(Entity x, Entity y)  
    {  
        int result = 0;

        if (x.ToLower().StartsWith("ou") && y.ToLower().StartsWith("ou"))  
            result = x.Compare(y);  
        else if (x.ToLower().StartsWith("ou") && !y.ToLower().StartsWith("ou"))  
            result = -1;  
        else if (!x.ToLower().StartsWith("ou") && y.ToLower().StartsWith("ou"))  
            result = 1;  
        else  
            result = x.Compare(y);  

        return (result);  
    }  
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-08T14:33:41.263

```
var bla = "ou";

var list = new List<string>{
            "Mouse",
            "Dinner",
            "House",
            "Out",
            "Phone",
            "Hat",
            "Ounce"};

var groupa = list.GroupBy(x =>x.ToLower().Contains(bla));

groupa.First().ToList().OrderByDescending(x => x.ToLower().StartsWith(bla)); 
```*

# wcf - MessageSecurityException：安全处理器无法在消息中找到安全标头

> ID：10500417
> 
> 赞同：1
> 
> 时间：2012-05-08T14:16:54.570
> 
> 标签：wcf, web-services, ssl, xamarin.android

Mono for Android 的安全 WCF 服务的状态如何？到 SOAP 1.2 了吗？我正在为一个将与 WCF 服务交互的 Android 应用程序编写 POC，但我正在努力让事情正常工作。

我正在尝试连接到具有`TransportWithMessageCredential`安全性的服务。但是我在服务器端遇到错误。

这是服务器端错误：

> MessageSecurityException：安全处理器无法在消息中找到安全标头。这可能是因为消息是不安全的错误，或者是因为通信双方之间存在绑定不匹配。如果为安全配置了服务并且客户端未使用安全性，则可能会发生这种情况。

服务器配置：

```
<service name="BrandDirector.ApplicationServer.Core.Services.UI.Products.Specifications.IngredientService" 
         behaviorConfiguration="CredentialValidation">
    <endpoint address="/BasicHttp"
        binding="basicHttpBinding"
        bindingConfiguration="BDBasicHttpBindingWithSecurity" 
        contract="BrandDirector.ApplicationServer.Core.Services.UI.Products.Specifications.IIngredientService" />
    <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />
</service>

<behavior name="CredentialValidation">
  <serviceMetadata httpGetEnabled="true" />
  <serviceDebug includeExceptionDetailInFaults="true" />
  <HttpStatusCode200Behavior />
  <serviceCredentials type="BrandDirector.ApplicationServer.Core.Security.Authentication.PasswordServiceCredentials, BrandDirector.ApplicationServer.Core.Security, Version=1.0.0.0, Culture=neutral">
    <userNameAuthentication userNamePasswordValidationMode="Custom"
      customUserNamePasswordValidatorType="BrandDirector.ApplicationServer.Core.Security.CredentialValidator, BrandDirector.ApplicationServer.Core.Security" />
  </serviceCredentials>
</behavior>

<extensions>
  <behaviorExtensions>
    <add name="HttpStatusCode200Behavior" type="BrandDirector.ApplicationServer.Core.Services.Common.ServiceModel.HttpStatusCode200BehaviorExtension, BrandDirector.ApplicationServer.Core.Services.Common" />
  </behaviorExtensions>

  <basicHttpBinding>
    <binding name="BDBasicHttpBindingWithSecurity" messageEncoding="Text" maxReceivedMessageSize="655536">
      <security mode="TransportWithMessageCredential" >
        <message clientCredentialType="UserName" />
      </security>
    </binding>
  </basicHttpBinding>
</extensions> 
```

客户代码：

```
public class Activity1 : Activity
{
    private Button button;
    const string address = "https://.../IngredientService.svc/BasicHttp";

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        var timeout = new TimeSpan(0, 1, 0);
        var binding = new BasicHttpBinding(BasicHttpSecurityMode.TransportWithMessageCredential)
        {
            MessageEncoding = WSMessageEncoding.Text,
            Security =
            {
                Transport =
                {
                    ClientCredentialType = HttpClientCredentialType.None,
                    ProxyCredentialType = HttpProxyCredentialType.None
                },
                Message =
                {
                    ClientCredentialType = BasicHttpMessageCredentialType.UserName,
                }
            },
            HostNameComparisonMode = HostNameComparisonMode.StrongWildcard,
            MaxReceivedMessageSize = 655536,
            ReaderQuotas = new System.Xml.XmlDictionaryReaderQuotas
            {
                MaxArrayLength = 655536,
                MaxStringContentLength = 655536,
            },
            SendTimeout = timeout,
            OpenTimeout = timeout,
            ReceiveTimeout = timeout,
        };

        System.Net.ServicePointManager.ServerCertificateValidationCallback += OnServerCertificateValidationCallback;

        // Set our view from the "main" layout resource
        SetContentView(Resource.Layout.Main);

        // Get our button from the layout resource,
        // and attach an event to it
        button = FindViewById<Button>(Resource.Id.MyButton);

        button.Click += delegate
        {
            client = new IngredientServiceClient(binding, new EndpointAddress(address));
            var clientCredential = client.ClientCredentials.UserName;
            clientCredential.UserName = "admin";
            clientCredential.Password = "KDNSG7";

            client.BeginGetIngredients("e", callBack, null);
        };
    }

    IngredientServiceClient client;

    private void callBack(IAsyncResult ar)
    {
        var result = client.EndGetIngredients(ar);

        button.Text = result.First().Name;
    }

    private bool OnServerCertificateValidationCallback(object sender, X509Certificate certificate, 
                                                       X509Chain chain, SslPolicyErrors sslPolicyErrors)
    {
        return true;
    }
} 
```

此代码在 WPF 中运行良好，返回结果，一切正常。我从较旧的线程中看到 WCF 仍处于开发周期的早期，但我只是想先检查一下我是否做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T22:15:32.143

要使您的服务在绑定不匹配的情况下仍能正常工作，您需要修改

```
<security mode="TransportWithMessageCredential" enableUnsecuredResponse="true"  >
   <message clientCredentialType="UserName" />
 </security> 
```

我已经包含了上面示例中的整个 webconfig 以及添加的更改

```
 <service name="BrandDirector.ApplicationServer.Core.Services.UI.Products.Specifications.IngredientService" 
         behaviorConfiguration="CredentialValidation">
    <endpoint address="/BasicHttp"
        binding="basicHttpBinding"
        bindingConfiguration="BDBasicHttpBindingWithSecurity" 
        contract="BrandDirector.ApplicationServer.Core.Services.UI.Products.Specifications.IIngredientService" />
    <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />
</service>

<behavior name="CredentialValidation">
  <serviceMetadata httpGetEnabled="true" />
  <serviceDebug includeExceptionDetailInFaults="true" />
  <HttpStatusCode200Behavior />
  <serviceCredentials type="BrandDirector.ApplicationServer.Core.Security.Authentication.PasswordServiceCredentials, BrandDirector.ApplicationServer.Core.Security, Version=1.0.0.0, Culture=neutral">
    <userNameAuthentication userNamePasswordValidationMode="Custom"
      customUserNamePasswordValidatorType="BrandDirector.ApplicationServer.Core.Security.CredentialValidator, BrandDirector.ApplicationServer.Core.Security" />
  </serviceCredentials>
</behavior>

<extensions>
  <behaviorExtensions>
    <add name="HttpStatusCode200Behavior" type="BrandDirector.ApplicationServer.Core.Services.Common.ServiceModel.HttpStatusCode200BehaviorExtension, BrandDirector.ApplicationServer.Core.Services.Common" />
  </behaviorExtensions>

  <basicHttpBinding>
    <binding name="BDBasicHttpBindingWithSecurity" messageEncoding="Text" maxReceivedMessageSize="655536">
      <security mode="TransportWithMessageCredential" enableUnsecuredResponse="true"  >
        <message clientCredentialType="UserName" />
      </security>
    </binding>
  </basicHttpBinding>
</extensions> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T21:54:21.900

目前 MonoTouch 不支持 WS-Security 协议，该协议允许客户端在 SOAP 消息信封内发送凭据。但是，MonoTouch 确实支持通过指定适当的 ClientCredentialType 将 HTTP 基本身份验证凭据发送到服务器的能力。

请参阅此页面： [http ://docs.xamarin.com/android/guides/Application_Fundamentals/Introduction_to_Web_Services](http://docs.xamarin.com/android/guides/Application_Fundamentals/Introduction_to_Web_Services)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:41:28.217

我刚刚使用了 RestSharp 和一个将在服务器端进行身份验证的自定义身份验证标头内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-11T15:47:58.017

在我的情况下，在主机配置文件的 AudienceUris 标记中添加服务修复了相同异常的问题。

```
<system.identityModel>
...
    <identityConfiguration>
    ...
        <audienceUris>
            <add value="serviceName.svc" />
        </audienceUris>
    ...
    </identityConfiguration>
...
</system.identityModel> 
```

# objective-c - 从命令行更改项目的代码签名

> ID：10500422
> 
> 赞同：0
> 
> 时间：2012-05-08T14:17:15.997
> 
> 标签：objective-c, ios, xcode, command

我制作了一个脚本来从命令行复制、重命名和更改项目的 Bundle Id，在此过程之后，我的下一步是将项目的代码签名更改为指向新证书。

有没有办法从命令行做到这一点？

编辑：我刚刚看到该信息存储在 .pbxproj 中，我该如何更改该文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T14:23:02.750

您可以使用以下命令重新签署构建：

```
export CODESIGN_ALLOCATE=`xcode-select -print-path`/Platforms/iPhoneOS.platform/Developer/usr/bin/codesign_allocate
codesign -f -s "iPhone Developer" -vv Example.app/Example 
```

如果您只有一个 IPA，只需解压缩它，它是一个普通的 zip 文件，其中包含一个`Payload`包含您的应用程序的目录。

**编辑：**

如果您需要更改 Xcode 项目本身，Xcode 项目只是一个捆绑包，进入目录并打开`project.pbxproj`文件。您应该能够简单地使用`sed`来查找和替换开发者身份。

可能有更好的选择，例如将命令行上的设置提供给`xcodebuild`. 如果您提供更多有关您正在尝试做的事情的背景信息，您可能会得到更好的建议。

# c# - 如何让我的 Windows 服务继续运行？

> ID：10500426
> 
> 赞同：1
> 
> 时间：2012-05-08T14:17:39.820
> 
> 标签：c#, windows-services

我试图让 Windows 服务一直在我的计算机后台运行，但没人知道。我的 Windows 服务会下载我的电子邮件收件箱的内容并将其放入我的数据库中。

我的 Windows 服务刚刚停止 - 它每 60 秒输入一次日志，然后在大约 10 分钟后停止？

我在下面发布了我的代码。任何人都可以看到或告诉我原因吗？

任何帮助将非常感激。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Diagnostics;
using System.Linq;
using System.ServiceProcess;
using System.Text;
using System.Timers;

namespace EmailWindowsService
{
    public partial class MyEmailService : ServiceBase
    {
        private DateTime lastRun;
        private bool flag = true;
        private static System.Timers.Timer aTimer;
        public MyEmailService()
        {
            InitializeComponent();
            if (!System.Diagnostics.EventLog.SourceExists("MySource")) // every thing the windows service does is logged in server explorer
            {
                System.Diagnostics.EventLog.CreateEventSource(
                    "MySource", "MyNewLog");
            }
            eventLogEmail.Source = "MySource";
            eventLogEmail.Log = "MyNewLog";

            // Timer Code
             aTimer = new System.Timers.Timer(1 * 60 * 1000); // 60 seconds
             aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);
             aTimer.Enabled = true;
            // Timer Code
        }

        protected override void OnStart(string[] args)
        {
            flag = true;
            lastRun = DateTime.Now;
            eventLogEmail.WriteEntry("Started");
        }

        protected override void OnStop()
        {
            eventLogEmail.WriteEntry("Stopped");
        }
        protected override void OnPause()
        {
            eventLogEmail.WriteEntry("Paused");
        }
        protected override void OnContinue()
        {    
            eventLogEmail.WriteEntry("Continuing");
        }
        protected override void OnShutdown()
        {
            eventLogEmail.WriteEntry("ShutDowned");
        }

        private void OnTimedEvent(object source, ElapsedEventArgs e)
        {
            RetriveEmailClass Emails = new RetriveEmailClass();
            if (flag == true)
            {
                eventLogEmail.WriteEntry("In getting Email Method");
                Emails.ServiceEmailMethod();
                lastRun = DateTime.Now;
                flag = false;
            }
            else if (flag == false)
            {
                if (lastRun.Date < DateTime.Now.Date)
                {
                    Emails.ServiceEmailMethod();
                    eventLogEmail.WriteEntry("In getting Email Method");
                }
            }
        }       
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:44:24.433

确保您的课程没有错误，那里的错误可能会使您整个服务退出。还可以尝试将您的计时器放入一个方法中并且只调用它，而不是在您的服务代码中使用它。

Windows 服务应始终作为只调用方法的空壳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:49:51.217

您很可能有未处理的异常。自从你使用它就被隐藏了`System.Timers.Timer`。该计时器会吃掉所有未处理的异常，而不是让它们使您的应用程序崩溃。

这意味着您的应用程序可能看起来运行良好，但实际上并非如此。计时器回调中的 try/catch 将证明这一点。

我建议您改用`System.Threading.Timer`它，因为它不能以这种方式工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T14:24:55.113

Windows 服务停止运行的几个原因。

```
1\. Unhandled exception in your code. Looking from you code snippet, please add exception handling in the OnTimedEvent() method.
2\. You service may crashed for some reason. In this case, you can go to event viewer to find out the reason for the failure. 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-08T14:23:38.677

除了 Emails.ServiceEmailMethod 方法的源代码之外，您的代码非常简单。该方法是否产生任何异常？如果是这样，它们并没有被困在您的计时器方法中。尝试：

```
try { Emails.ServiceEmailMethod(); }  
catch (Exception ex) { eventLogEmail.WriteEntry(ex.Message); } 
```

# entity-framework - 存储过程返回不同维度的数据 Entity Framework 4

> ID：10500427
> 
> 赞同：0
> 
> 时间：2012-05-08T14:17:40.593
> 
> 标签：entity-framework, stored-procedures, entity-framework-4, entity-framework-4.1

对于我正在研究的调查系统的报告，我们开发了一个存储过程，它返回具有不同列数的数据。

我们向操作员显示这些表中的所有列：用户、问题、答案。

用户从报告应显示的​​每个表中选择列。例如：用户：姓名、年龄、邮政编码。
问题：问题 2、问题 4 答案：答案 2、答案 3、答案 4。

然后我们将参数传递给存储过程，存储过程返回：每个用户属性、问题或答案一列。以及数据库中每个用户的一行。

例子： ![例子](../Images/2347a09225f70cf1575db3278741e589.png)

如您所见，存储过程可以返回 3 行 2 列到 500 行 50 列之间的任何内容。有没有办法将存储过程与实体框架一起使用？起初我尝试使用复杂的返回类型，但似乎这种方法在这种情况下不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:32:03.047

EF 仅支持在设计时定义的具有固定列数的存储过程。要执行此过程，您需要使用普通的旧 ADO.NET。

编辑：如果您有固定的列总数（您提到 50 个），您可以创建包含所有这些列的单个类并将其用作执行结果。EF 将仅填充结果集中存在的属性。

# search - Lucene 搜索结果不是最优的

> ID：10500431
> 
> 赞同：0
> 
> 时间：2012-05-08T14:18:00.257
> 
> 标签：search, optimization, lucene

我知道 lucene 的不同部分以及如何使用它们，但我还有一个问题。Lucene 在我的网上商店中运行并且做得很好。现在我想使用单个搜索字段优化我的搜索功能的搜索结果，用户可以在其中输入他想要搜索的任何内容。从现在开始，我正在结合不同的搜索方法来获得短语和模糊搜索等结果。问题是我总是得到一个巨大的结果集。我想要一个较小的结果列表，其中包含最佳点击。当我离开模糊时，我可以做到这一点。然后我得到了一个很好的搜索结果，但是当用户输入错误时，结果是空的。

必须有一个解决方案来获得一个分数很高的小结果集，如果命中不好，还可以将它与模糊搜索结合起来？！

我要考虑什么？我应该走哪条路？这种情况的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:58:09.357

一种方法是首先使用非模糊查询进行搜索。如果该搜索返回合理数量的命中，那么您就完成了。

如果第一次搜索返回 0 个匹配项，则通过组合搜索再次尝试搜索，其中每个单独的搜索词都经过一次模糊测试 - 例如，如果您有“AB C”，则第二次搜索将类似于“(A~ AND B AND C) OR (A AND B~ AND C) OR (A AND B AND C~)"。这将最大限度地减少引入的模糊性，同时仍然对每个搜索词进行模糊处理。

请注意，我没有尝试过这种方法，但我尝试过类似的方法，您的第二次搜索会删除每个搜索词一次，以便您处理根本不在索引中的搜索词 - “（A AND B）OR（A和 C) 或 (B 和 C)"。

# c# - 我应该使用哪个类将二进制数据写入缓冲区（比如字节列表）

> ID：10500441
> 
> 赞同：2
> 
> 时间：2012-05-08T14:18:31.957
> 
> 标签：c#, .net, c#-4.0, .net-4.0

我想将数据编码为缓冲区中的二进制格式，稍后我将写入文件或通过套接字传输。最好使用什么 C# 类来创建`List<byte>`包含二进制数据的类。

我将在此缓冲区中以自定义编码格式（对于字符串）和整数和浮点类型的常规二进制数字布局存储整数、单字节字符串（即 ASCII）、浮点数和其他数据。

`BinaryWriter`看起来它有我需要的方法，但它必须为我管理一个不断增长的缓冲区，我想`List<byte>`在我完成编码后产生结果。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T14:21:40.783

[BinaryWriter](http://msdn.microsoft.com/en-us/library/system.io.binarywriter.aspx)，写入[MemoryStream](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx)。如果您需要超过可用内存，您可以轻松切换到[临时文件](http://www.knowdotnet.com/articles/tempfiles.html)流。

```
using (var myStream = new MemoryStream()) {
    using (var myWriter = new BinaryWriter(myStream)) {
        // write here
    }
    using (var myReader = new BinaryReader(myStream)) {
        // read here
    }

    // put the bytes into an array...
    var myBuffer = myStream.ToArray();

    // if you *really* want a List<Byte> (you probably don't- see my comment)
    var myBytesList = myStream.ToArray().ToList();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T14:24:00.210

BinaryWriter 写入流。给它一个 MemoryStream，当你想要你的时`List<byte>`，使用`new List<byte>(stream.GetBuffer())`.

# java - 将 2D 对象数组的列转换为 1D 字符串数组

> ID：10500442
> 
> 赞同：2
> 
> 时间：2012-05-08T14:18:34.687
> 
> 标签：java, arrays, string, object, casting

我正在尝试将 2D 对象数组列转换为 1D 字符串数组；获取数据本身没有问题，但它是创建运行时错误的数据类型：

> 线程“AWT-EventQueue-0”中的异常 java.lang.ClassCastException：java.lang.String 无法转换为 [Ljava.lang.String;

这是我正在使用的代码片段的示例：

```
Object[][] currentData = BackOffice.getData();
String[] dataWanted = null;

    for (int i=0; i<currentData.length; i++)
        dataWanted = (String[])currentData[i][1]; 
```

我以为我可以使用（String []）进行强制转换，但显然不是......任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:21:22.580

如果我理解正确，你想做：

```
String[] dataWanted = new String[currentData.length];

for (int i=0; i<currentData.length; i++)
    dataWanted[i] = currentData[i][1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:28:35.120

`currentData`是对象的二维数组，因此`currentData[i][1]`计算为单个对象。`dataWanted`是一个字符串数组。您不能将单个 Object 转换为数组类型。此外，在插入项目之前，必须使用大小初始化数组。如果您想将每个对象放入`dataWanted`数组中，您需要这样的东西：

```
String[] dataWanted = new String[currentData.length];
for (int i = 0; i < currentData.length; i++) {
    dataWanted[i] = (String)currentData[i][1];
} 
```

如果这不是您想要完成的，那么请编辑您的问题以更具体。

# c++ - 如何获取 Windows 在登录屏幕上显示的用户帐户列表？

> ID：10500445
> 
> 赞同：0
> 
> 时间：2012-05-08T14:18:40.770
> 
> 标签：c++, windows

我正在使用 NetQueryDisplayInformation（我已经尝试过 NetUserEnum 函数）来获取本地计算机上的一组用户帐户。我可以通过这种方式获取所有帐户 - 但我只想要与实际人类相关的帐户，而不是例如用于软件更新的隐藏帐户。

在阅读有关相关结构和[类似堆栈问题](https://stackoverflow.com/questions/3417409/enumerating-windows-log-in-screen-user-accounts-in-vb6)[的 MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370684%28v=vs.85%29.aspx)后，我看不到任何东西可以让我过滤到我需要的帐户。

理想情况下，有人会有一个简单可靠的解决方案：

1.  不涉及使用未记录的注册表项
2.  不依赖于枚举磁盘上的用户文件夹
3.  我不会尝试建立一个详尽的非真实用户帐户列表
4.  由于技术原因，WMI 不是一个选项

有任何想法吗？

[很久以后] 得到了答案，但不是在这里 - 只是枚举每个用户的组。“真正的人类”帐户将是管理员、高级用户、用户、访客中的一个或多个的成员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T04:07:36.247

您可以使用 NetQueryDisplayInformation API，结合按位检查用户信息标志。

我有完全相同的要求，所以我编写了示例代码（从 MSDN GROUP 查询修改）。

我使用的用户标志是：

```
UF_NORMAL_ACCOUNT
UF_ACCOUNTDISABLE
UF_PASSWD_NOTREQD ---> this ensure we get Human account, Human account always requires password. 
```

工作代码：[http ://www.cceye.com/list-system-normal-user-account-only/](http://www.cceye.com/list-system-normal-user-account-only/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:30:28.553

您可以使用[NetUserEnum](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370652%28v=vs.85%29.aspx)函数。它应该返回系统上所有用户帐户的列表。我不必亲自使用这个函数，所以我不能提供任何壮观的代码示例，但 MSDN 信息听起来就像你正在寻找的。

# java - Java 6 中鼠标的 KeyStroke 等效类？

> ID：10500447
> 
> 赞同：1
> 
> 时间：2012-05-08T14:18:48.690
> 
> 标签：java, swing, awt, mouseevent, keystroke

KeyStroke 是否有鼠标等效类？我正在寻找某种围绕 a MouseEvent 的包装器来描述按下了哪个按钮（我可以通过 SwingUtilities 得到它），以及使用的任何修饰符。我的想法是我已经通过侦听器捕获 AWT 鼠标事件，然后获取该事件并处理它以在虚拟世界中进行 3D 拾取。我想尝试以这种方式映射鼠标绑定（类似于带有摆动控件的 InputMap 和 ActionMap）。KeyStroke 是天赐之物，有人知道 MouseStroke 或类似的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T14:25:12.033

“鼠标”传统上被定义为最多具有三个按钮。这也是 Java 所支持的`MouseEvent.getButton()`。

具有多个按钮的更高级鼠标通常安装为多个 HID 设备。这意味着他们为鼠标和键盘安装了两个驱动程序。对于这些鼠标，您可以设置其他按钮的含义，通常类似于按键（例如，shift）或双击。这些是 Java 可以捕获的事件，或者作为 KeyEvent 的 MouseEvent。

驱动程序中实现了更高级的功能，例如“打开应用程序”或“更改 DPI”。由于特定于设备，Java 无法捕获这些事件（如果驱动程序支持，您必须为这些事件编写自己的本机侦听器）。

# java - jchart2D 多个 Y 轴标题组合在一起

> ID：10500455
> 
> 赞同：0
> 
> 时间：2012-05-08T14:19:08.847
> 
> 标签：java, graph, charts, jchart2d

我已经使用 Achim Westerman 的 jchart2D 类已经有一段时间了，只是碰巧发生了一个例子，我试图在图表的右侧制作 3 个 Y 轴。

制作3轴的代码如下

```
//Create Y Axis 1
AAxis<IAxisScalePolicy> yAxisShaftSpeed = 
                    new AxisLinear<IAxisScalePolicy>();
yAxisShaftSpeed.setAxisScalePolicy(new AxisScalePolicyManualTicks());
yAxisShaftSpeed.setMinorTickSpacing(10);
yAxisShaftSpeed.setStartMajorTick(true);
yAxisShaftSpeed.setPaintGrid(false);
yAxisShaftSpeed.setAxisTitle(new IAxis.AxisTitle("Shaft Speed (RPM)"));
IRangePolicy rangePolicyYShaftSpeed = 
                    new RangePolicyFixedViewport(new Range(0,225));
//Create Y axis 2
AAxis<IAxisScalePolicy> yAxisWindSpeed = 
                    new AxisLinear<IAxisScalePolicy>();
yAxisWindSpeed.setAxisScalePolicy(new AxisScalePolicyManualTicks());
yAxisWindSpeed.setMinorTickSpacing(10);
yAxisWindSpeed.setStartMajorTick(true);
yAxisWindSpeed.setPaintGrid(false);
yAxisWindSpeed.setAxisTitle(new IAxis.AxisTitle("Wind Speed (m/s))"));
IRangePolicy rangePolicyYWindSpeed = 
                    new RangePolicyFixedViewport(new Range(0,25));
//Create Y axis 3
AAxis<IAxisScalePolicy> yAxisPressure = 
                    new AxisLinear<IAxisScalePolicy>();
yAxisPressure.setAxisScalePolicy(new AxisScalePolicyManualTicks());
yAxisPressure.setMinorTickSpacing(10);
yAxisPressure.setStartMajorTick(true);
yAxisPressure.setPaintGrid(false);
yAxisPressure.setAxisTitle(new IAxis.AxisTitle("Pressure (hPa)"));
IRangePolicy rangePolicyYPressure = 
                    new RangePolicyFixedViewport(new Range(700,1100)); 
```

然后我继续添加并设置右手 Y 轴如下

```
timePlotZoomableChart.setAxisYRight(yAxisShaftSpeed,0);
timePlotZoomableChart.addAxisYRight(yAxisWindSpeed);
timePlotZoomableChart.addAxisYRight(yAxisPressure); 
```

不幸的是，当图表出现时，三个 Y 轴按预期位于右侧，但所有标题都在第一个添加的右侧 Y 轴 (yAxisShaftSpeed) 下相互堆叠。有人有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:50:53.293

可能是一个错误（我从未测试过这个）。随意发布错误报告，包括最小可运行代码、jchart2d 的版本、操作系统和在 sourceforge 上的 java 版本。亲切的问候，阿奇姆

# windows - 使用 directshow graphedit 到文本文件的隐藏式字幕

> ID：10500456
> 
> 赞同：0
> 
> 时间：2012-05-08T14:19:10.360
> 
> 标签：windows, directshow, codec, closed-captions, graphedit

我想将 cc（隐藏式字幕）作为纯文本捕获到文本文件；使用directshow，graphedt。

我使用过 VBICodec 和 Dump 过滤器。我的图表如下

Ospray 捕获设备（有 4 个输出引脚：Capture、Preview、CC、VBI）-> Tee/Sink-to-Sink

转换器 -> VBI 编解码器 -> ClosedCaptions.txt（转储过滤器）。

该文件具有编码数据而不是纯文本。

如何将隐藏式字幕保存到文本文件？（我有 Windows 2008 服务器）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T23:24:52.270

Osprey（以及可能任何其他支持 NTSC 和 ATSC 字幕的采集卡）输出[EIA-608](http://en.wikipedia.org/wiki/EIA-608)格式。它具有特殊的字符集和控制代码，必须转换为您需要的任何格式。

不幸的是，我不知道有任何现成的 DirectShow 过滤器可以为您将其转换为文本格式，因此您可能不得不编写一个。

# screen-scraping - 如何确保机器人/爬虫不会被阻止

> ID：10500459
> 
> 赞同：-1
> 
> 时间：2012-05-08T14:19:17.223
> 
> 标签：screen-scraping, web-scraping, bots

我编写了一个简单的爬虫程序，他的工作是浏览网站的几个不同页面。做一些解析，调用一些通过 AJAX 调用的 URL，并将数据存储在数据库中。

麻烦的是，有时我的 ip 在我的爬虫执行后被阻止。我可以采取哪些步骤来防止我的 ip 被阻止？有什么推荐的做法吗？我在请求之间添加了 5 秒的间隔，几乎没有效果。该网站是中型的（需要抓取几个 URL），而且我的互联网连接速度很慢，所以脚本运行了一个多小时。使用更快的网络连接（如托管服务）会有帮助吗？

基本上我想编写一个表现良好的机器人。

最后，我不是在发帖或发送垃圾邮件。

编辑：我想我会把我的脚本分成 4-5 个部分，并在一天中的不同时间运行它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T01:52:45.623

您可以使用旋转代理，但这不是一个表现良好的机器人。你看过网站的 robots.txt 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:29:06.190

编写您的机器人，使其更有礼貌，即不要按顺序获取所有内容，而是在战略位置添加延迟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-29T22:15:39.183

遵循 robots.txt 中设置的指南是很好的第一步。有 import.io 和 morph.io 等工具。还有用于服务器的包/插件。例如[X 射线](https://www.npmjs.com/package/x-ray)；一个 node.js，它可以帮助快速编写负责任的抓取工具，例如油门、延迟、最大连接数等。

# android - Android Eclipse 构建错误

> ID：10500462
> 
> 赞同：-1
> 
> 时间：2012-05-08T14:19:42.310
> 
> 标签：android, eclipse

我是即将到来的 Android 开发者。我目前正在从事许多项目。

我无法构建我的任何项目，因为我收到此错误：

> 您的项目包含错误，请在运行您的应用程序之前修复它们。

我的项目没有错误。我所有的项目都会发生这种情况。

为什么会这样？

我真的需要帮助。这个问题已经阻止了我几天完成任何工作。

这是错误的图片 [http://dl.dropbox.com/u/21264710/zzzz.jpg](http://dl.dropbox.com/u/21264710/zzzz.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:55:46.600

你试过这个：“项目属性”->“Android工具”->“修复项目属性”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:33:18.130

这也发生在我身上。我解决了我的问题，重新启动 Eclipse 并再次向他展示我的 androidsdk 在哪里，然后创建一个新项目。你可以通过进入 Windows、Preferences、Android 来做到这一点，在那里你可以设置你的 androidsdk 位置。我希望这对你也有用。确保你有良好配置的 sdk、android 工具、平台工具等。

# google-maps - 如何在特定区域内的所有街道上每隔“x”米放置标记？

> ID：10500463
> 
> 赞同：0
> 
> 时间：2012-05-08T14:19:47.693
> 
> 标签：google-maps

我想创建一个可以在本地电脑上工作的地图，它将在我必须手动绘制的区域内的所有街道和道路上创建标记。这个想法是标记需要彼此分开一个固定值（例如：10米）。我在文档或此论坛中找不到任何内容。谢谢。

# c# - 表达式树嵌套 wheres

> ID：10500466
> 
> 赞同：2
> 
> 时间：2012-05-08T14:19:56.807
> 
> 标签：c#, linq, tree, expression

我正在尝试动态构建一个表达式树，该树使用 in 查询有效地查询数据源。我试图复制的查询是

```
Countries.Where(y => Countries
                         .Where(x =>
                             x.CountryLanguage.Any(b => b.CountryID == 73) &&
                             x.CountryLanguage.Any(b => b.CountryID == 150))
                         .Select(z => z.ShortCode)
                         .Contains(y.ShortCode)) 
```

我已经尝试了很多方法，但这是我最近的尝试：

```
public void AddContainsWhereClause(IQueryable<T> objectSet, string predicateIdentifier)
{
    ParameterExpression pe = Expression.Parameter(typeof(T), predicateIdentifier);

    Expression expInner = Expression.Call(
        typeof(Queryable),
        "Where",
        new Type[] { typeof(T) },
        objectSet.Expression,
        Expression.Lambda<Func<T, bool>>(rootExperession, resultExpression));

    Expression expOuter = Expression.Call(
        typeof(Queryable),
        "Where",
        new Type[] { typeof(T) },
        objectSet.Expression,
        Expression.Lambda<Func<T, bool>>(expInner, pe));

} 
```

NB rootExpression 是：

```
x => x.CountryLanguage.Any(b => b.CountryID == 73) &&
     x.CountryLanguage.Any(b => b.CountryID == 150) 
```

但这会返回：

> [ApplicationFramework.LINQBuilder.tests.Country]'不能用于返回类型'System.Boolean'

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T01:44:58.157

我假设你想要的是一个 lambda 函数来模拟你的`Where`调用的谓词组件。

where 子句需要是 type `Func<TSource, bool>`，但您正在调用`Queryable.Where`，它实际上返回一个`IEnumerable`.

沿着表达式树路径（可能非常复杂且难以维护），您真正的问题是否只是您需要选择支持所提供国家列表语言的国家列表？

```
int[] requiredCountryIds = {73, 150};

// Select countries which contain all required country IDs in their CountryLanguage set
var resultSet =
    countries.Where(
        y => requiredCountryIds.All(requiredCountryId => y.CountryLanguage.Any(b => b.CountryId == requiredCountryId))); 
```

# asp.net - 如何将全局变量传递给引用的程序集？

> ID：10500471
> 
> 赞同：0
> 
> 时间：2012-05-08T14:20:18.920
> 
> 标签：asp.net, .net, global-variables

如何将全局变量传递给引用的程序集？

我正在修改一个 asp.net 应用程序。需要记录所有员工（网站的当前用户）的操作，例如保存新客户或更新发票数据。UI 层正在调用引用的程序集 BLL.dll。

我想将当前员工传递给引用的程序集。传递的 Employee 应该**在该 dll 中的所有静态方法之间共享**。它应该是线程安全的，因为 Employee 可以跨请求更改。

**我无法在 BLL 中公开静态字段，**因为 Employee 存储在会话状态中。

**我需要一些不是静态的、全局的、可由两个程序集（UI 层和 BLL.dll）访问且线程安全的东西。**

我正在考虑使用存储在当前线程对象中的一些变量。但我不知道我到底应该做什么？？

任何解决方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:25:04.773

基本上，您的 BLL 中需要一些可以获取参考的东西。您可以使用带有接口的策略模式。

```
// IN BLL.dll

public interface IEmployeeContextImplementation 
{
   Employee Current { get; }
}

public static EmployeeContext 
{
   private static readonly object ImplementationLock = new object();
   private static IEmployeeContextImplementation Implementation;

   public static void SetImplementation(IEmployeeContextImplementation impl)
   {
      lock(ImplementationLock)
      {
         Implementation = impl;
      }
   }
   public static Employee Current { get { return Implementation.Current; }
} 
```

然后在您的网络应用程序中，`IEmployeeContextImplementation`使用会话状态实现并`SetImplementation`在应用程序启动时仅调用一次。

但是，会话状态仅在请求的上下文中足够好。如果您需要它在不同的线程上运行，则必须将其显式传递给不同的线程。

# java - org.apache.jasper.JasperException 错误

> ID：10500472
> 
> 赞同：0
> 
> 时间：2012-05-08T14:20:19.940
> 
> 标签：java, sql-server, tomcat

我收到以下错误。

*   我正在使用 MyEclipse Bling 10.1
*   部署在 Tomcat 上
*   微软 SQL 2008 R2

当我在 MS SQL 2000 中执行相同操作时，代码可以正常工作。我想找到我做错的地方。

```
 HTTP Status 500 - 

--------------------------------------------------------------------------------

type Exception report

message 

description The server encountered an internal error () that prevented it from fulfilling this request.

exception 

org.apache.jasper.JasperException: An exception occurred processing JSP page /uservalidation.jsp at line 16

13: 
14: 
15: Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
16:             Connection con5=DriverManager.getConnection("jdbc:odbc:web");
17:             PreparedStatement st1=con5.prepareStatement("select * from login where username=? and pass=?");
18:             st1.setString(1,un);
19:             st1.setString(2,ps);

Stacktrace:
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:524)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:417)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)

root cause 

javax.servlet.ServletException: java.sql.SQLException: [Microsoft][ODBC Driver Manager] The specified DSN contains an architecture mismatch between the Driver and Application
    org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:850)
    org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:779)
    org.apache.jsp.uservalidation_jsp._jspService(uservalidation_jsp.java:109)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:393)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)

root cause 

java.sql.SQLException: [Microsoft][ODBC Driver Manager] The specified DSN contains an architecture mismatch between the Driver and Application
    sun.jdbc.odbc.JdbcOdbc.createSQLException(JdbcOdbc.java:6957)
    sun.jdbc.odbc.JdbcOdbc.standardError(JdbcOdbc.java:7114)
    sun.jdbc.odbc.JdbcOdbc.SQLDriverConnect(JdbcOdbc.java:3073)
    sun.jdbc.odbc.JdbcOdbcConnection.initialize(JdbcOdbcConnection.java:323)
    sun.jdbc.odbc.JdbcOdbcDriver.connect(JdbcOdbcDriver.java:174)
    java.sql.DriverManager.getConnection(DriverManager.java:582)
    java.sql.DriverManager.getConnection(DriverManager.java:207)
    org.apache.jsp.uservalidation_jsp._jspService(uservalidation_jsp.java:77)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:393)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)

note The full stack trace of the root cause is available in the Apache Tomcat/6.0.13 logs.

--------------------------------------------------------------------------------

Apache Tomcat/6.0.13 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:52:51.243

尝试谷歌搜索根本原因通常是个好主意。在这种情况下，“指定的 DSN 包含驱动程序和应用程序之间的体系结构不匹配”，第一个结果为您提供了答案：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms712362%28v= vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms712362%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-08T14:24:08.840

检查你的jsp语法。它可能不会在 eclipse 中显示任何错误，但手动检查它是否存在任何丢失的括号或 jsp 语法中的任何错误导致此问题

# css - jquery mobile center文本选择列表如何？

> ID：10500476
> 
> 赞同：0
> 
> 时间：2012-05-08T14:20:57.903
> 
> 标签：css, jquery-mobile

我需要在选择列表中居中文本。我发现实现这一点的唯一示例是 jQuery Mobile。我不想使用该框架，但现在我知道它是可能的，他们是如何做到的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:31:27.443

只要你找到选择框的类并给出

```
padding:%px or text-align:Center 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:50:10.513

jQuery Mobile 隐藏输入并创建 div 以使文本居中。

# r - 为什么我不能针对 0 测试 which.max()

> ID：10500477
> 
> 赞同：1
> 
> 时间：2012-05-08T14:20:57.947
> 
> 标签：r

我正在尝试将 which.max 的结果与 0 进行比较，以检查是否在数据中找到任何最大值。解释：大约有 24.000 个向量，我必须检查它们的最大值索引。

这是一个小例子：

```
tmp <- which.max(c(NA, NA, NA, NA))
str(tmp)
tmp == 0
as.integer(tmp) == 0
as.numeric(tmp) == 0 
```

它导致 FALSE、FALSE 和 FALSE - 尽管 str(tmp) 返回 int(0)。

我做的解决方法是：

```
tmp <- which.max(c(NA, NA, NA, NA))
isTRUE(as.logical(tmp)) 
```

如果 which.max() 是否找到最大值，这将起作用。但是我不明白为什么上述比较不起作用。

额外的问题：除了 str() 之外，还有其他函数可以轻松地向我展示 tmp 对象的结构以立即理解比较失败吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T14:30:54.383

`int(0)`意味着它是一个*长度为零的*向量（即它没有元素，它是空的，等等）。即使您执行类似`tmp == integer(0)`获得零长度逻辑向量的操作，也不是`TRUE`or `FALSE`。

根据`?which.max`：

> 价值：
> 
> ```
>  Missing and ‘NaN’ values are discarded.
> 
>  an ‘integer’ of length 1 or 0 (iff ‘x’ has no non-‘NA’s), giving
>  the index of the _first_ minimum or maximum respectively of ‘x’. 
> ```

因此，您要检查是否`length(tmp) > 0`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T14:30:13.183

您可以是否 tmp`numeric(0)`为：

```
length(tmp) == 0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T14:35:46.787

如果`which.max`返回`0`或`-1`没有找到最大值可能会更好。然后你可以更容易地检查它。`regexpr`例如返回`-1`并`match`允许您指定在不匹配的情况下返回的内容（这可以说类似于）。

...但您可以自己检查返回值的长度：

```
x <-  which.max(c(NA, NA, NA, NA))
if(length(x)) {
  # Do stuff with x...
} 
```

...或将其包装成一个函数以简化事情：

```
which.max2 <- function(x) {
    x <-  which.max(x)
    if(length(x)) x else 0L
}

which.max2(c(NA,-Inf,NA)) # 2
which.max2(c(NA,NA))      # 0 
```

# scala - Scala 的绝对反向路由？

> ID：10500489
> 
> 赞同：3
> 
> 时间：2012-05-08T14:21:52.057
> 
> 标签：scala, playframework, url-routing, playframework-2.0

在 play 1.X 中，可以使用带有反向路由的绝对 url：

```
@@{MyController.method(param)} --> http://www.mydomain.com/myaction/param 
```

而不是相对反向路由：

```
@{MyController.method(param)} --> /myaction/param 
```

我使用带有 scala 版本的 play 2.0。我可以使用以下方法检索相对路线：

```
@routes.MyController.method(param) --> /myaction/param 
```

由于“@@”只是转义了为 scala 语句保留的“@”，是否还有可能拥有绝对反向路由？我在 API 中找不到

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T14:31:15.573

有一种`absoluteUrl`方法可以检索绝对地址。

所以 ：

```
@routes.MyController.method(param).absoluteURL() 
```

# stream - 客户端连接/断开问题 - Liquidsoap

> ID：10500493
> 
> 赞同：1
> 
> 时间：2012-05-08T14:22:03.007
> 
> 标签：stream, streaming, audio-streaming, liquidsoap

今天，我尝试在 Windows Server 上安装 Liquidsoap。

我安装了 Windows 版本的 Liquidsoap，一切正常（阅读播放列表、mp3、...），但我遇到了问题。

当有人尝试连接到我的音频流时，它可以工作，但他会在 1 秒内断开连接（所以他只有 2 秒的音乐，没有别的）。

它可以从哪里来？

在调试中我得到：

```
2012/05/08 16:19:23 Client .... connected
2012/05/08 16:19:23 Client .... disconnected 
```

谢谢你的帮助。

# java - VFS 上的 Hello world 示例：从头开始创建 zip 文件

> ID：10500494
> 
> 赞同：5
> 
> 时间：2012-05-08T14:22:07.460
> 
> 标签：java, zip, apache-commons-vfs

我想用 Commons VFS2 库创建一个 zip 文件。我知道如何在使用`file`前缀时复制文件，但`zip`没有实现文件的写入和读取。

`fileSystemManager.resolveFile("path comes here")``zip:/some/file.zip`当 file.zip 是不存在的 zip 文件时，当我尝试路径时，-方法失败。我可以解析现有文件，但不存在的新文件失败。

那么如何创建新的 zip 文件呢？我无法使用 createFile()，因为它不受支持，并且在调用它之前我无法创建 FileObject。

正常的方法是使用该 resolveFile 创建 FileObject，然后为该对象调用 createFile。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T15:27:35.020

我需要的答案是以下代码片段：

```
// Create access to zip.
FileSystemManager fsManager = VFS.getManager();
FileObject zipFile = fsManager.resolveFile("file:/path/to/the/file.zip");
zipFile.createFile();
ZipOutputStream zos = new ZipOutputStream(zipFile.getContent().getOutputStream());

// add entry/-ies.
ZipEntry zipEntry = new ZipEntry("name_inside_zip");
FileObject entryFile = fsManager.resolveFile("file:/path/to/the/sourcefile.txt");
InputStream is = entryFile.getContent().getInputStream();

// Write to zip.
byte[] buf = new byte[1024];
zos.putNextEntry(zipEntry);
for (int readNum; (readNum = is.read(buf)) != -1;) {
   zos.write(buf, 0, readNum);
} 
```

在此之后，您需要关闭流并且它可以工作！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-15T15:42:42.570

事实上，可以使用以下 idio 从 Commons-VFS 唯一地创建 zip 文件：

```
 destinationFile = fileSystemManager.resolveFile(zipFileName);
        // destination is created as a folder, as the inner content of the zip
        // is, in fact, a "virtual" folder
        destinationFile.createFolder();

        // then add files to that "folder" (which is in fact a file)

        // and finally close that folder to have a usable zip
        destinationFile.close();

        // Exception handling is left at user discretion 
```

# matlab - Libsvm 与 Weka (WLSVM)

> ID：10500501
> 
> 赞同：1
> 
> 时间：2012-05-08T14:22:38.647
> 
> 标签：matlab, machine-learning, weka, svm, libsvm

我必须处理一个不平衡的数据集（95% 的负类记录和 5% 的正类记录）。我使用决策树和[Weka](http://www.cs.waikato.ac.nz/ml/weka/)框架开发了一个模型。现在我想尝试 SVM 和 Libsvm 以获得更好的结果。我正在尝试将[Libsvm](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)用于 matlab 和[Libsvm weka wrapper](http://weka.wikispaces.com/LibSVM)。我想知道如何比较我从他们那里得到的结果。在 weka 中，模型是从整个数据集构建的，并在执行 10 倍交叉验证之后。我怎样才能用 Libsvm 做到这一点？从[Libsvm FAQ](http://www.csie.ntu.edu.tw/~cjlin/libsvm/faq.html) 's 我发现 CV 只是为了发现内核的最佳参数，而不是在训练/预测期间，所以我应该在 Matlab 中执行什么操作以获得类似结果以便将它们与 Weka 进行比较?

# android - 客户仍然希望在 android 上使用较低屏幕的 iphone 标签，解决方案？

> ID：10500502
> 
> 赞同：0
> 
> 时间：2012-05-08T14:22:46.057
> 
> 标签：android, iphone, user-interface, tabs, user-experience

客户想要在 iphone 和 android 上精确复制应用程序。iphone的设计是唯一想到的，它经常在屏幕下部有标签

在 android 中，这可以被复制，但由于各种原因，这样做的主要方式已被弃用。（标签主机、标签组、活动） android 的替换方法包括`action bars`和`viewpagers`和`fragments`具有不同程度的向后兼容性，但它们并没有真正将生成的标签放在屏幕底部。

同样，像 Sencha Touch 这样的多平台网络应用工具可以在两个平台上生成直观的“底部标签”。所以对于 Android 来说，底部标签仍然有很多种方法，所以告诉客户他们**需要**为 android 更改他们的 iphone 设计是虚构的

开发人员和顾问如何处理这个问题。任何最佳做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:32:29.820

我不太清楚你在问什么。如果它是一个编程解决方案，那么以前做过底部标签的人可以回答。我从来没有做过，所以我不知道是否有比蛮力自己动手方法更简单的方法。

如果这是一个咨询答案，那么对我来说最有效的方法是让客户相信“Android 方式”是将标签放在顶部。因此，经常使用 Android 手机的人会期望以某种方式完成事情。尤其是 ICS 出来以后，软按钮被移到了屏幕底部。这些不能移动、移动或删除，并且底部有选项卡可能会导致用户不小心按下返回、主页或进程列表。

# c# - 如果 GetValue() 方法失败，则引发错误

> ID：10500503
> 
> 赞同：0
> 
> 时间：2012-05-08T14:22:47.523
> 
> 标签：c#, wcf, exception-handling, trygetvalue

我继承了一个 WCF 服务，它充当文件缓存（每个文件代表对第三方 API 的请求的结果）。目前，如果文件不存在，则代码会创建一个新请求来创建数据，并且还会向客户端代码引发异常。

我认为这个想法是客户会回来再次请求文件，然后他们就可以使用它（生成文件需要几秒钟）。

我认为这里有代码味道，我应该重写这部分。目前，异常正在通过几种方法被捕获并冒泡。我认为我应该从源头确定文件是否存在并将该信息传递到调用堆栈。

在 WCF 界面，我目前有一个`GetValue()`方法，尽管我认为可以使用两个选项来替换它：

1.  `null`如果文件不存在则返回。
2.  使用`bool TryGetValue(string key, out string value)`方法

有没有人有任何偏好/建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:33:51.753

“TryGet”方法更明确一点。使用返回 null 的方法，您必须记录该方法出于某种原因返回 null，这需要开发人员阅读文档。众所周知，有些人对阅读文档过敏。

“TryGet”方法的另一个优点是您可以使用枚举而不是布尔值，向调用者提供有关方法失败（或成功）的原因和方式的更多信息。

> Jeffrey Richter（C# 中的 CLR）对异常的定义：当动作成员无法完成其任务时，该成员应抛出异常。异常意味着操作成员未能完成其名称所指示的应执行的任务。我的问题是我应该保持 GetValue 方法对客户端可用，并在数据不可用时引发错误，还是将其删除并用 TryGetValue() 替换？

当您确定 API 的设计时，Jeffrey Richter 的定义没有帮助，因为这包括*确定每个操作成员的任务应该是什么。*

在您的设计中，您理所当然地期望该值不可用；这意味着*该值不可用并非例外情况。* 因此，我只会使用*TryGet* ... 模式。

但是，说实话，我会完全采用不同的方法。假设有人尝试这种方法：

```
while (!TryGetValue(key, out value)) {} 
```

或者：

```
SomeType value;
bool flag = false;
while (!flag)
{
    try
    {
        value = GetValue(key);
        flag = true;
     }
     catch {}
} 
```

您的 WCF 服务将获得大量点击。研究异步模型可能会更好，因此当结果准备好时通过回调通知客户端，而不是邀请客户端不断轮询服务。

# javascript - 使用 jquery 的表格样式 - Jquery 事件样式没有相应响应

> ID：10500506
> 
> 赞同：1
> 
> 时间：2012-05-08T14:22:52.767
> 
> 标签：javascript, jquery, css-selectors

我有一张桌子，每个 tr 大约有 15 个 tr 和 11 个 td。我可以将 tr 悬停以仅通过 .css() 方法设置 td 编号 8（从 0 开始）。

问题：使用我的代码，它选择了整个列，所有带有 .media 类的 td，而不仅仅是悬停的 tr 中的那个。

编辑 ：

**这是 jsfiddle 链接：http: [//jsfiddle.net/XgH43/3/](http://jsfiddle.net/XgH43/3/)**

更改：
这是我尝试过的：

注意：MEDIA、LIGADO 和 HIDE 是对我所做的类的引用。注意 2：我无法访问 css 或 php，我与他们分开工作，后来他们可以实现类以及他们喜欢的任何东西。

```
//MOUSE OVER:

    //MEDIA W/O .LIGADO:

    //W/O .HIDE:
    $("tr.destacar:not(.hide, .ligado)").mouseover(function (){
    $("td.media", $(this)).css(
    {
        'background'        : 'purple',
        'box-shadow'        : 'inset 0 10px 20px 5px #FFFFFF,0 1px 5px #929292',
        '-moz-box-shadow'   : 'inset 0 10px 20px 5px #FFFFFF,0 1px 5px #929292',
        '-webkit-box-shadow': 'inset 0 10px 20px #FFFFFF,0 1px 5px #929292',
        'text-decoration'   : 'underline'
    }
    );
    }
);

    //WITH HIDE:  
    $("tr.destacar.hide:not(.ligado)").mouseover(function (){
    $("td.media", $(this)).css(
    {
        'background'        : 'green',
        'box-shadow'        : 'inset 0 10px 20px 5px #FFFFFF,0 1px 5px #929292',
        '-moz-box-shadow'   : 'inset 0 10px 20px 5px #FFFFFF,0 1px 5px #929292',
        '-webkit-box-shadow': 'inset 0 10px 20px #FFFFFF,0 1px 5px #929292',
        'text-decoration'   : 'underline'
    }
    );
    }
);

//MOUSE OUT:

    //MEDIA W/O .LIGADO:

    //MEDIA W/O.HIDE:
    $(".destacar").not(".hide, .ligado").mouseout(function (){
    $("td.media", $(this)).css(
    {
        'background'        : 'red',
        'box-shadow'        : 'none',
        '-moz-box-shadow'   : 'none',
        '-webkit-box-shadow': 'none',
        'text-decoration'   : 'none'
    }
    );
    }
    );

    //MEDIA WITH .HIDE:
$(".destacar.hide").not(".ligado").mouseout(function (){    
    $("td.media", $(this)).css(
    {
        'background'        : 'yellow',
        'box-shadow'        : 'none',
        '-moz-box-shadow'   : 'none',
        '-webkit-box-shadow': 'none',
        'text-decoration'   : 'none'
    }
    ); 
}
);

// ON CLICK:
// 
    //MEDIA WITH LIGADO:

    $('.destacar.ligado').not(".hide").click(function () {

    //MEDIA W/O HIDE:
    $("td.media", $(this)).css(
    {
        'background'        :'red',
        'box-shadow'        :'none',
        'font-weight'       :'normal',
        'font-size'         :'default',
        '-moz-box-shadow'   :'none',
        'box-shadow'        :'none',
        '-webkit-box-shadow':'none',
        '-o-box-shadow'     :'none'
    }
    );
}
);

    //MEDIA WITH .HIDE:
    $('.destacar.hide.ligado').click(function () {
    $("td.media", $(this)).css(
    {
        'background'        :'yellow',
        'box-shadow'        :'none',
        'font-weight'       :'normal',
        'font-size'         :'default',
        '-moz-box-shadow'   :'none',
        'box-shadow'        :'none',
        '-webkit-box-shadow':'none',
        '-o-box-shadow'     :'none'
    }
    );
}
);

    //MEDIA W/O .LIGADO

    //MEDIA W/O .HIDE:
    $('.destacar').not(".hide, .ligado").click(function () {
        $(this).addClass(".ligado");
    $("td.media", $(this)).css(
    {
        'background'        :'purple',
        'box-shadow'        :'0 1px 5px #FFFFFF,inset 0 10px 20px #305775',
        'font-weight'       :'bolder',
        'font-size'         :'12pt',
        '-moz-box-shadow'   :'0 1px 5px #FFFFFF,inset 0 10px 20px #305775',
        'box-shadow'        :'0 1px 5px #FFFFFF,inset 0 10px 20px #305775',
        '-webkit-box-shadow':'0 1px 5px #FFFFFF,inset 0 10px 20px #305775',
        '-o-box-shadow'     :'0 1px 5px #FFFFFF,inset 0 10px 20px #305775'
    }
    );
    }
    );

    //MEDIA WITH .HIDE:
    $('.destacar.hide').not(".ligado").click(function () {
        $(this).addClass(".ligado");
    $("td.media", $(this)).css(
    {
        'background'        :'green',
        'box-shadow'        :'0 1px 5px #FFFFFF,inset 0 10px 20px #305775',
        'font-weight'       :'bolder',
        'font-size'         :'12pt',
        '-moz-box-shadow'   :'0 1px 5px #FFFFFF,inset 0 10px 20px #305775',
        'box-shadow'        :'0 1px 5px #FFFFFF,inset 0 10px 20px #305775',
        '-webkit-box-shadow':'0 1px 5px #FFFFFF,inset 0 10px 20px #305775',
        '-o-box-shadow'     :'0 1px 5px #FFFFFF,inset 0 10px 20px #305775'
    }
    );
    }
    ); 
```

这不是完整的代码，而是重要的部分。我已经改变了它，现在它几乎可以工作了，但仍然没有完全工作。PS.: tr 不能有 .hide 和 .ligado 类，而不是 td。

Jsfiddle完整版代码：http: **[//jsfiddle.net/XgH43/3/](http://jsfiddle.net/XgH43/3/)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:27:51.753

尝试从样式更改您的选择器

```
$(this + ":not(.hide, .ligado) td.media") 
```

到

```
$(":not(.hide, .ligado) td.media", this) 
```

这会将选择限制为具有鼠标悬停的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:32:09.377

```
$('td.media', $(this)).not('.hide, .ligado').css({...}); 
```

**更新**（从您的评论中我意识到应该是这样）

```
$("tr.destacar").not('.hide, .ligado').mouseover(function(){
    $('td.media', $(this)).css({...});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T19:31:13.560

I've acctually used the tow previous answers - if you know how could I reward both the authors please tell me - and came up with the solution , but unfortunetly I had to edit the css file , which fails my goal to not do so, I could mess arround and find another solution , but really , to edit the css makes it much cleaner. Here it is the jsfiddle link of it (by the way , the colors are just for testing , I wouldn't make it so ugly). Thanks again , Niclas and Sheikh.

# java - 如何查找 Java 中使用的 SSL/TLS 版本

> ID：10500511
> 
> 赞同：48
> 
> 时间：2012-05-08T14:23:11.253
> 
> 标签：java, ssl

我有一个基于 java 的客户端（使用 java 1.6.30），它打开与部署在 Tomcat 7.0.26 上的服务器的 SSL 连接。Tomcat 使用的是 Java 6，并且在 server.xml 中我配置了要使用的连接器`sslProtocol="TLS"`。

我想知道正在使用的 SSL 版本是什么？是 TLS1.0 吗？TLS1.1？还有什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-08T14:31:46.040

[`SSLSession`](http://docs.oracle.com/javase/7/docs/api/javax/net/ssl/SSLSession.html)从您的客户端获取`SSLSocket`并使用它的`getProtocol()`方法。

[Oracle JRE/OpenJDK 6 支持 SSLv3 和 TLS 1.0](http://docs.oracle.com/javase/6/docs/technotes/guides/security/SunProviders.html#SunJSSEProvider)。您至少需要[IBM JRE 6/7](https://www-01.ibm.com/support/knowledgecenter/SSYKE2_6.0.0/com.ibm.java.security.component.60.doc/security-component/jsse2Docs/protocols.html)或[Oracle JRE/OpenJDK 7 才能获得对 TLS 1.1 和 TLS 1.2 的支持](https://docs.oracle.com/javase/7/docs/technotes/guides/security/SunProviders.html#SunJSSEProvider)。（这也与可用的密码套件有关，如[本问题](https://stackoverflow.com/a/10488029/372643)所述。）

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2019-08-23T23:50:05.007

您可以使用以下代码段获取支持的协议数组：

```
SSLContext.getDefault().getSupportedSSLParameters().getProtocols() 
```

如果您希望它作为空格分隔的字符串，例如用于 SMTP 协商，请将数组传递给 String.join()，即：

```
String.join(" ", SSLContext.getDefault().getSupportedSSLParameters().getProtocols()) 
```

后一个片段显示在 Windows 上的 Java 8 中：

> SSLv2Hello SSLv3 TLSv1 TLSv1.1 TLSv1.2

在 Windows 上的 Java 11 中：

> TLSv1.3 TLSv1.2 TLSv1.1 TLSv1 SSLv3 SSLv2Hello

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-10-05T02:58:33.963

对于 tomcat 8.5.38 和 8.5.46（可能还有 tomcat 7.0x 和更新版本）将其添加到 AccessLogValve 模式（在 server.xml 中） - 并启用该 Valve - 将显示正在使用的 TLS 版本：

```
%{org.apache.tomcat.util.net.secure_protocol_version}r

eg
        <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"
               prefix="localhost_access_log" suffix=".txt"
               pattern="%h %l %u %t &quot;%r&quot; %s %b" %{org.apache.tomcat.util.net.secure_protocol_version}r /> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-05-28T22:48:13.137

这将获得活动协议：

```
 private static String getActiveProtocols() {
    try {
      return Arrays.toString(SSLContext.getDefault().createSSLEngine().getEnabledProtocols());
    } catch (Exception e) {
      StringWriter stringWriter = new StringWriter();
      e.printStackTrace(new PrintWriter(stringWriter));
      return "Unable to get enabled protocols: " + e.getMessage() + LINE_SEPARATOR + stringWriter;
    }
  } 
```

# java - 为什么解密的数据与使用 java 加密的原始数据不同？

> ID：10500512
> 
> 赞同：0
> 
> 时间：2012-05-08T14:23:13.337
> 
> 标签：java, encryption, aes

我正在使用 java 的 AES 加密和解密。我使用 Appache commons 库将字符串转换为字节，反之亦然。但是当我解密数据时，它与使用相同密钥加密的输入数据不同吗？为什么会这样

这是我的代码：

```
public static void main(String[] args) throws Exception {

        String key="this is key";

        String message="This is just an example";

           KeyGenerator kgen = KeyGenerator.getInstance("AES");

           kgen.init(128, new SecureRandom(Base64.decodeBase64(key)));

           // Generate the secret key specs.
           SecretKey skey = kgen.generateKey();

           byte[] raw = skey.getEncoded();

           SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");

           Cipher cipher = Cipher.getInstance("AES");

           cipher.init(Cipher.ENCRYPT_MODE, skeySpec);

           byte[] encrypted= cipher.doFinal(Base64.decodeBase64(message));

           String encryptedString=Base64.encodeBase64String(encrypted);

           cipher.init(Cipher.DECRYPT_MODE, skeySpec);

           byte[] original =
             cipher.doFinal(Base64.decodeBase64(encryptedString));

           System.out.println(Base64.encodeBase64String(original));

    } 
```

我得到输出“Thisisjustanexamplc =”，它应该是“这只是一个例子”。我需要在我的代码中更改什么。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:31:32.107

你是base-64——解码你的纯文本消息。您应该使用`message.getBytes(StandardCharsets.UTF_8)`（或其他一些编码）来转换为字节。Base-64 对加密操作的结果进行编码，然后在解密之前对其进行 base-64 解码。用于`new String(original, StandardCharsets.UTF_8)`将解密操作的结果转换回文本。

换句话说，使用字符编码在文本和字节之间进行转换。使用 base-64 编码和解码以文本形式编码二进制数据。

# android - 非法状态异常：适配器的内容发生了变化但ListView没有收到通知

> ID：10500520
> 
> 赞同：1
> 
> 时间：2012-05-08T14:23:40.843
> 
> 标签：android, listview, illegalstateexception

我有两个 ListView，第二个视图项根据第一个用户在第一个 ListView 中选择的内容而变化

当用户首先从第一个列表中选择一个项目时，第二个 ListView 加载没有问题......但是当返回到第一个 ListView，选择另一个项目时，第二个 ListView 给出非法状态异常......

而且我不知道何时通知 ListView 有关 DataSetChanges，因为在 setListAdapter 之前或之后通知它是没有意义的！

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    int mIndex = getIntent().getIntExtra("mIndex", 0);

    adapter = new mListAdapter(this, getItems(mIndex));

    setListAdapter(adapter);

} 
```

**更新：** 我更改了适配器类，问题消失了......这是我的旧自定义类导致错误......知道它有什么问题吗？

mListAdapter 类

```
public class mListAdapter extends BaseAdapter {

private static ArrayList<mItemsHolder> arrayList;

private LayoutInflater mInflater;

Context context;
int textSize;

public mListAdapter (Context m_context, ArrayList<mItemsHolder> results, int mTextSize) {
    arrayList = results;
    mInflater = LayoutInflater.from(m_context);
    context = m_context;
    textSize = mTextSize;

}

public int getCount() {
    return arrayList.size();
}

public Object getItem(int position) {
    return arrayList.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.custom_row, null);
        holder = new ViewHolder();
        holder.mainItem = (TextView) convertView.findViewById(R.id.row_txt_main);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();         
    }

    Typeface typeFace=Typeface.createFromAsset(context.getAssets(),"fonts/verdana.ttf");
    holder.mainItem.setText(arrayList.get(position).getMainItem());
    holder.mainItem.setTextSize(TypedValue.COMPLEX_UNIT_DIP, textSize);
    holder.mainItem.setTypeface(typeFace);
    return convertView;
}

static class ViewHolder {
    TextView mainItem;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:56:28.897

我在声明我的 ArrayList 时刚刚删除了“静态”

```
private static ArrayList<mItemsHolder> arrayList; 
```

# linux - Linux 检索监视器名称

> ID：10500521
> 
> 赞同：24
> 
> 时间：2012-05-08T14:23:43.087
> 
> 标签：linux, ubuntu, xserver

情况：我正在使用多个监视器，我想在 bash 中获取它们的名称。目前我正在使用 Ubuntu 10.04。

我知道xrandr。从中我只能得到统计数据。我想要的是读取数组中的所有监视器名称以使用它们。

有没有一种明确的方法可以做到这一点，而无需从某种字符串中删除名称？一个明确的方法是从文件中读取它们。一种不清楚的方法是将 xrandr 输出通过管道传输到某种函数以从中删除名称。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-07-24T12:11:56.837

受 Beni 回答的启发，这将使用[EDID](http://en.wikipedia.org/wiki/EDID)数据读取`xrandr`并根据[EDID 规范](http://read.pudn.com/downloads110/ebook/456020/E-EDID%20Standard.pdf)提取监视器名称，无需任何外部工具，例如`parse-edid`：

```
#!/bin/bash
while read -r output hex conn; do
    [[ -z "$conn" ]] && conn=${output%%-*}
    echo "# $output $conn   $(xxd -r -p <<< "$hex")"
done < <(xrandr --prop | awk '
    !/^[ \t]/ {
        if (output && hex) print output, hex, conn
        output=$1
        hex=""
    }
    /ConnectorType:/ {conn=$2}
    /[:.]/ && h {
        sub(/.*000000fc00/, "", hex)
        hex = substr(hex, 0, 26) "0a"
        sub(/0a.*/, "", hex)
        h=0
    }
    h {sub(/[ \t]+/, ""); hex = hex $0}
    /EDID.*:/ {h=1}
    END {if (output && hex) print output, hex, conn}
    ' | sort
) 
```

*仅*用于`awk`精确提取监视器名称，而不会从 EDID 中提取额外的垃圾，因此是“幻数”，例如,和. 最后用于从十六进制转换为 ASCII，每行打印一个监视器名称。*`000000fc00``26``0a``xxd`*

 *基于这个解决方案，我制作了一个[方便的脚本来切换监视器](https://github.com/MestreLion/scripts/blob/master/monitor-switch)，它也可以用来简单地列出监视器信息：

```
$ monitor-switch --list
Connected monitors:
# DFP5  HDMI    HT-R391
# DFP7  DVI-I   DELL U2412M

$ monitor-switch --list
Connected monitors:
# DisplayPort-1 DisplayPort DELL U2412M
# DisplayPort-3 DisplayPort DELL U2415
# HDMI-A-2      HDMI        LG TV 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-05-11T16:17:51.227

在 Ubuntu 16.04、18.04 上测试。（我知道现在回答为时已晚，但这个解决方案今天很重要）

```
$ sudo apt-get install -y hwinfo
...
$ hwinfo --monitor --short
monitor:
                   SONY TV
                   AUO LCD Monitor 
```

我连接了两台显示器。一个是笔记本电脑，另一个是外接显示器。只要插入或拔出外接显示器，此命令就会反映更改。您需要不断地进行轮询。删除该`--short`选项可提供更详细的信息。

您可以使用以下后台作业轮询状态：

```
$ while true;
>  do
>   hwinfo --monitor --short;
>   sleep 2;
>  done >> monitor.log & 
```

`while true`循环无限次运行。将`sleep 2`循环的每次迭代暂停 2 秒。的输出`hwinfo --monitor --short`附加到`monitor.log`. 该日志文件可以为您提供监控插件和插件的活动历史记录。

仅供参考：我正在使用使用上述命令（和其他类似命令）的后台（守护程序）python 脚本来检测是否有人在计算机实验室的系统中执行一些硬件插件和插件。如果是这样，我几乎实时地收到有人插入/插入显示器、鼠标或键盘的适当通知！

`hwinfo`有关命令的更多信息[在这里](http://www.binarytides.com/linux-hwinfo-command/)。它的[手册页](https://www.systutorials.com/docs/linux/man/8-hwinfo/)也是一个很好的来源。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-08-15T02:39:12.200

`sudo get-edid` didn't work for me. (EDIT: now works on another computer, Lubuntu 14.10; I'd blame BIOS differences but that's a random guess...)

Anyway under X, `xrandr --verbose` prints the EDID block. Here is a quick and dirty way to extract it and pass to `parse-edid`:

```
#!/bin/bash
xrandr --verbose | perl -ne '
if ((/EDID(_DATA)?:/.../:/) && !/:/) {
  s/^\s+//;
  chomp;
  $hex .= $_;
} elsif ($hex) {
  # Use "|strings" if you dont have read-edid package installed 
  # and just want to see (or grep) the human-readable parts.
  open FH, "|parse-edid"; 
  print FH pack("H*", $hex); 
  $hex = "";
}' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-06T23:20:07.380

我知道这是一种肮脏的方式，但它给了我一些显示器型号名称，甚至比`sudo get-edid|parse-edid`. 它读取数组中的信息，并以一种可以像读取文件一样读取的方式输出它。您可以根据需要对其进行修改。

```
#!/bin/bash
#
#
#    get-monitors.sh
#
#    Get monitor name and some other properties of connected monitors
#    by investigating the output of xrandr command and EDID data
#    provided by it.
#
#    Copyright (C) 2015,2016 Jarno Suni <8@iki.fi>
#
#    This program is free software: you can redistribute it and/or modify
#    it under the terms of the GNU General Public License as published by
#    the Free Software Foundation, either version 3 of the License, or
#    (at your option) any later version.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU General Public License for more details.
#
#    You should have received a copy of the GNU General Public License
#    along with this program. See <http://www.gnu.org/licenses/gpl.html>

set -o nounset
set -o errexit

# EDID format:
# http://en.wikipedia.org/wiki/Extended_Display_Identification_Data#EDID_1.3_data_format
# http://read.pudn.com/downloads110/ebook/456020/E-EDID%20Standard.pdf

declare -r us=';' # separator string;
# If EDID has more than one field with same tag, concatenate them,
# but add this string in between.

declare -r fs=$'\x1f' # Field separator for internal use;
# must be a character that does not occur in data fields.

declare -r invalid_edid_tag='--bad EDID--'
# If base EDID is invalid, don't try to extract information from it,
# but assign this string to the fields.

# Get information in these arrays:
declare -a outs  # Output names
declare -a conns # Connection type names (if available)
declare -a names # Monitor names (but empty for some laptop displays)
declare -a datas # Extra data; may include laptop display brand name
                 # and model name
declare -i no    # number of connected outputs (to be counted)

# xrandr command to use as a source of information:
declare -r xrandr_output_cmd="xrandr --prop"

hex_to_ascii() {
    echo -n "$1" | xxd -r -p
}

ascii_to_hex() {
    echo -n "$1" | xxd -p
}

get_info() {
    no=0
    declare OIFS=$IFS;
    IFS=$fs
    while read -r output conn hexn hexd; do
        outs[no]="${output}"
        conns[no]="${conn}"
        names[no]="$(hex_to_ascii "$hexn")"
        datas[no]="$(hex_to_ascii "$hexd")"
        (( ++no ))
    done < <(eval $xrandr_output_cmd | gawk -v gfs="$fs" '
        function print_fields() {
            print output, conn, hexn, hexd
            conn=""; hexn=""; hexd=""
        }
        function append_hex_field(src_hex,position,app_hex,  n) {
                     n=substr(src_hex,position+10,26)
                     sub(/0a.*/, "", n)
                     # EDID specification says field ends by 0x0a
                     # (\n), if it is shorter than 13 bytes.
                     #sub(/(20)+$/, "", n)
                     # strip whitespace at the end of ascii string
                     if (n && app_hex) return app_hex sp n
                      else return app_hex n
        }
        function get_hex_edid(  hex) {
            getline
            while (/^[ \t]*[[:xdigit:]]+$/) {
                sub(/[ \t]*/, "")
                hex = hex $0
                getline
            }
            return hex
        }
        function valid_edid(hex,  a, sum) {
            if (length(hex)<256) return 0
            for ( a=1; a<=256; a+=2 ) {
                # this requires gawk
                sum+=strtonum("0x" substr(hex,a,2))

                # this requires --non-decimal-data for gawk:
                #sum+=sprintf("%d", "0x" substr(hex,a,2))
            }
            if (sum % 256) return 0
            return 1
        }
        BEGIN {
            OFS=gfs
        }
        /[^[:blank:]]+ connected/ {
            if (unprinted) print_fields()
            unprinted=1
            output=$1
        }
        /[^[:blank:]]+ disconnected/ {
            if (unprinted) print_fields()
            unprinted=0
        }
        /^[[:blank:]]*EDID.*:/ {
            hex=get_hex_edid()
            if (valid_edid(hex)) {
                for ( c=109; c<=217; c+=36 ) {
                    switch (substr(hex,c,10)) {
                        case "000000fc00" :
                         hexn=append_hex_field(hex,c,hexn)
                         break
                        case "000000fe00" :
                         hexd=append_hex_field(hex,c,hexd)
                         break
                    }
                }
            } else {
              # set special value to denote invalid EDID
              hexn=iet; hexd=iet
            }
        }
        /ConnectorType:/ {
            conn=$2
        }
        END {
            if (unprinted) print_fields()
        }' sp=$(ascii_to_hex $us) iet=$(ascii_to_hex $invalid_edid_tag))

    IFS="$OIFS"
}

get_info

# print the colums of each display quoted in one row
for (( i=0; i<$no; i++ )); do
    echo "'${outs[i]}' '${conns[i]}' '${names[i]}' '${datas[i]}'"
done 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-09T12:29:36.260

如果您不想解析`xrandr`输出，请编写一个 C 程序，使用`libXrandr`它只获取您想要的内容。如果您只想查询信息，则可以快速完成。[阅读这份文件](http://cgit.freedesktop.org/xorg/proto/randrproto/tree/randrproto.txt.)。

如果您想获取*真实的*监视器名称，@dtmilano 的解决方案的替代方法是使用 libXrandr 获取监视器的 EDID 属性，然后手动解析并打印（阅读 EDID 规范）。

[`xrandr`源代码](http://cgit.freedesktop.org/xorg/app/xrandr/tree/)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-08T18:15:48.490

您可以尝试`ddcprobe`和/或`get-edid`

```
$ sudo apt-get install xresprobe read-edid
$ sudo ddcprobe
$ sudo get-edid 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-09T12:37:26.730

您正在寻找[EDID](http://en.wikipedia.org/wiki/EDID)信息，该信息通过 I²C 总线传递并由您的视频驱动程序解释。正如 dtmilano 所说，从 ddcprobe 获取编辑应该可以工作。

您还可以通过记录您的 X start 来获取此信息：

```
startx -- -logverbose 6 
```

多年前，我使用了一个名为[read-edid](http://polypux.org/projects/read-edid/)的包来收集这些信息。

[根据 2009 年的这篇博客文章](http://maxolasersquad.blogspot.ca/2009/04/get-edid-information.html)，read-edid 软件包可能已经在 Ubuntu 中可用。*

# c# - 需要更改转发器元素中的类

> ID：10500522
> 
> 赞同：2
> 
> 时间：2012-05-08T14:23:47.900
> 
> 标签：c#, html, dom, repeater

我有一个中继器：

```
<ul>
    <asp:Repeater ID="Repeater4" runat="server" DataSourceID="SqlDataSource5" onitemcommand="Repeater4_ItemCommand"> 
    <ItemTemplate> 
    <li class="sports_menu1">  
    <asp:LinkButton ID="LinkButton1" runat="server" class="selected  onclick="sideMenuSports1_Click"> 
    <%#Eval("iconURL")%> 
    </asp:LinkButton></li> 
    </ItemTemplate>
    </asp:Repeater>
</ul> 
```

我想处理同一功能中的所有按钮：

```
protected void sideMenuSports1_Click(object sender, EventArgs e)
{ 
    changeDataSources();   /*-----> this function supose to derict to URL(in a div on the same page) acording the id  of the item of the repeater   */ 
    removeAllClasses();  /*this supose to remove all class named selected from the element in the <asp:button> element */
    ((LinkButton)sender).Attributes.Add("class", "selected");
} 
```

总而言之，我需要的是：

1.  我需要删除所有转发器 `<asp:button>`元素中的“选定”类，然后仅将其添加到用户单击的元素中
2.  单击的每个按钮都重定向到其他 URL，我如何将转发器元素的 id 传递给按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-27T13:11:57.107

遇到了同样的问题，这样解决：

**.aspx 部分：**

```
<asp:Repeater ID="itemsRepeater" runat="server" OnItemCommand="itemsRepeater_ItemCommand">
    <ItemTemplate>
        <li>
            <asp:LinkButton id="location_button" CommandArgument='<%# Eval("Key") %>' Text='<%# Eval("Value") %>' runat="server"></asp:LinkButton>
        </li>
    </ItemTemplate>
</asp:Repeater> 
```

**代码隐藏部分：**

```
protected void itemsRepeater_ItemCommand(object source, RepeaterCommandEventArgs e)
{
    // for the sample purpose, setting the value here - replace it with your own
    int locationId = 2;

    // looping through all the repeater items (buttons)
    foreach (RepeaterItem i in ((Repeater)source).Items)
    {
        // finding the repeater items having ID set to "location_button"
        LinkButton btn = (LinkButton)i.FindControl("location_button");

        // custom class added when location matches button's CommandArgument
        if (btn.CommandArgument == locationId.ToString())
            btn.CssClass = "button_main active";
        else
            btn.CssClass = "button_main";
    }
} 
```

# iphone - 设置状态栏隐藏后不旋转

> ID：10500526
> 
> 赞同：0
> 
> 时间：2012-05-08T14:24:04.053
> 
> 标签：iphone, objective-c, ios, xcode

一般来说，我的应用程序只能在纵向上工作，但一个屏幕应该只能在横向上。所以我需要旋转我的视图，隐藏状态栏并添加一个工具栏。当状态栏可见时，我的视图旋转正常，但在我执行之后`[[UIApplication sharedApplication] setStatusBarHidden:YES]`，我看不到旋转。这是代码：

```
- (void) viewWillAppear:(BOOL)animated
{
    //[[UIApplication sharedApplication] setStatusBarHidden:YES];

    CGAffineTransform landscapeTransform = CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(90));
    landscapeTransform = CGAffineTransformTranslate (landscapeTransform, +80.0, +100.0);
    [self.view setTransform:landscapeTransform];

    self.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    self.view.autoresizesSubviews = YES;
    self.view.bounds  = CGRectMake(0.0, 0.0, 480.0, 320.0);

    UIToolbar *toolBar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 20, 480, 40)];
    [[UIToolbar appearance] setBackgroundImage:[UIImage imageNamed:@"BarBg"] forToolbarPosition:UIToolbarPositionAny barMetrics:UIBarMetricsDefault];

    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 20, 100, 30)];
    label.text = @"asdasd";
    [toolBar addSubview:label];

    [self.view addSubview:toolBar];

    self.gallery.backgroundColor = [UIColor redColor];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:41:30.400

您发布的代码对我有用：视图出现旋转，我可以稍后旋转它，并具有默认值

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} 
```

我还将在您的`viewWillAppear`实现中添加以下行：

```
[super viewWillAppear:animated]; 
```

# .net - 使用正则表达式解析固定长度文件

> ID：10500528
> 
> 赞同：-1
> 
> 时间：2012-05-08T14:24:11.217
> 
> 标签：.net, regex, vb.net

我正在使用 .NET 3.5 和 Regex 解析固定长度的文件。此文件来自银行。在客户名称中，有时会出现此集合中的一个字符`&,(),[],',""`。这些是字符，到目前为止我遇到过。可以有其他任何东西。因此，我的正则表达式失败了。我的正则表达式是`[A-Za-z0-9\s-\.,'""""\(\)\{\}\[\]]{35}`. 是否有任何通配符可以用于特殊字符而不是单独指定。我也试过`.`但没有奏效。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:03:56.443

终于`.`奏效了。对不起大家。我用错了方法。一如既往，感谢大家的时间和努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:58:50.223

您的正则表达式精确地指定了您的字符类的 35 次出现，并且您似乎在说您将接受任何字符作为名称的一部分。您说文件是固定长度的，我将其解释为每行（记录）都是固定长度。（文件中的记录数量可能是可变的。）您说该文件包含财务数据。这使我相信您尝试从记录中提取的客户名称字段位于固定字符位置。如果是这种情况，那么您根本不需要使用正则表达式，一个简单的[String.Substring()](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)调用或类似的东西就可以满足您的目的。

# php - PDO 插入查询，为什么这不起作用

> ID：10500530
> 
> 赞同：1
> 
> 时间：2012-05-08T14:24:16.800
> 
> 标签：php, pdo

我愚蠢地用 mysqli 构建了我的 Web 应用程序。现在，我正在尝试将我的数据抽象层转换为 pdo，但由于某种原因，插入查询给我带来了麻烦。我的快捷插入函数是从控制器调用的，我希望将其保持为名称格式，并以表名和列/值数组作为参数。

我评论了我认为问题出在哪里。请帮忙。

```
function insert($table, array $columns_values) {        

    // connect to db
    $dbh = $this->db_connect();

    $i = 0;

    $columns = array();
    $values  = array();
    $params  = array();

    foreach($columns_values as $column => $value) {

        $i++;

        $param = array($i => $value);
        array_push($params, $param);

        array_push($columns, $column);
        array_push($values, '?');

    }

    // turn arrays into comma separated list
    $columns =      implode(",", $columns);
    $values  =      implode(",", $values);

    $stmt = $dbh->prepare("INSERT INTO $table ($columns) VALUES ($values)");

    foreach ($params as $param_stmt) {

             // i think this is where the problem is
            foreach ($param_stmt as $placeholder => $value) {

                $stmt->bindParam($placeholder, $value);

            }

    }

    $stmt->execute();

    return $stmt;

} // end insert() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:57:03.760

我不会按照你的方式去做。几分钟后，我想出了这个：

```
/**
 * Function to insert a list of values to the database.
 * 
 * @param PDO    $pdo
 * @param string $table
 * @param array  $columns_values
 *
 * @throws \Exception
 * @throws \PDOException
 */
function insert_to_db(PDO $pdo, $table, array $columns_values) {
    //Some data validation.
    if (empty($columns_values)) {
        throw new \Exception("Insert at least one value.");
    }
    if (empty($table)) {
        throw new \Exception("Table may not be empty.");
    }

    //Implode all of column names. Will become the columns part of the query.
    $str_columns = implode(", ", array_keys($columns_values));

    //Implode all column names after adding a : at the beginning.
    //They will become the placeholders on the values part.
    $prepared_column_names = array_map(function ($el) {
        return ":$el";
    }, array_keys($columns_values));
    $prepared_str_columns  = implode(", ", $prepared_column_names);

    //The query itself. Will look like "INSERT INTO `$table` (col1, col2, col3) VALUES (:col1, :col2, :col3);"
    $query = "INSERT INTO `$table` ($str_columns) VALUES ($prepared_str_columns);";

    //Prepare the query
    $stmt = $pdo->prepare($query);

    //Iterate over the columns and values, and bind the value to the placeholder
    foreach ($columns_values as $column => $value) {
        $stmt->bindValue(":$column", $value);
    }

    //Execute the query
    $stmt->execute();

} 
```

## 我改变的东西

1.  我没有在函数内部实例化 PDO 对象。该函数**需要**一个才能工作，所以它应该是参数之一！
2.  如果出现错误，我会抛出**Exception**。这是处理错误的更好方法。
3.  我使用**命名占位符**而不是未命名的占位符（`:name`vs `?`）。如果您需要调试，则生成更具可读性、更易于跟踪的查询。
4.  在代码中添加了注释。再说一次，你现在明白你写了什么，但你会在 6 个月后吗？
5.  我利用`array_keys()`自动生成一个充满键的数组（即列），而不是循环并手动添加一个。

## 一些技巧

*   当你实例化一个 PDO 对象时，确保它抛出`PDOException`s 错误！像这样：

    ```
    new PDO($dsn, $user, $pass, array(PDO::PARAM_ERRMODE => PDO::ERRMODE_EXCEPTION)); 
    ```

    或者

    ```
    $pdo = new PDO($dsn, $user, $pass);
    $pdo->setAttribute(PDO::PARAM_ERRMODE, PDO::ERRMODE_EXCEPTION); 
    ```

    这样，您就不需要每次都显式检查错误，您`try catch`对整个事情使用单个块，并且您很好：

    ```
    try {
        insert_to_db($pdo, $table, $array_of_columns_and_values);
    }
    catch (\Exception $e) { //Will catch all kinds of exceptions, including PDOExceptions
        echo $e->getMessage();
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:53:06.030

没有看到你的原始`$columns_values`数组是什么样子的。

希望能帮助到你

```
<?php 
function insert($table, $values){
    $dbh = $this->db_connect();

    $fieldnames = array_keys($values[0]);

    $sql = "INSERT INTO $table";
    /*** set the field names ***/
    $fields = '( ' . implode(' ,', $fieldnames) . ' )';
    /*** set the placeholders ***/
    $bound = '(:' . implode(', :', $fieldnames) . ' )';
    /*** put the query together ***/
    $sql .= $fields.' VALUES '.$bound;

    //INSERT INTO testtable( id ,col1 ,col2 ) VALUES (:id, :col1, :col2 )

    /*** prepare and execute ***/
    $query = $dbh->prepare($sql);
    foreach($values as $vals){
        $query->execute($vals);
        /*  Array
        (
        [id]   =
        [col1] = someval1
        [col2] = Someval21
        )*/
    }

}
//Multi Insert
$insert = array(array('id'=>'','col1'=>'someval1','col2'=>'Someval21'),
                array('id'=>'','col1'=>'someval2','col2'=>'Someval22'),
                array('id'=>'','col1'=>'someval3','col2'=>'Someval23'),
                array('id'=>'','col1'=>'someval4','col2'=>'Someval24')
);

insert('testtable',$insert);
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T14:34:05.603

您尚未检查您的 prepare() 是否实际成功：

```
$sql = "INSERT ....";
$stmt = $dbh->prepare($sql);
if (!$stmt) {
    die($sql . $dbh->errorInfo());
} 
```

永远不要假设查询成功，尤其是当您完全动态地构建查询时。

# scala - DAG，斯卡拉/阿卡

> ID：10500532
> 
> 赞同：2
> 
> 时间：2012-05-08T14:24:17.423
> 
> 标签：scala, graph, akka

我想知道使用 Scala/Akka 的 DAG（有向无环图）的最佳实现，其中每个节点都可能位于不同的虚拟机、不同的计算机上。将每个节点想象成一个只作用于其直接父节点的 Scala 角色（以图表形式），您将如何在高层次上实现这一点？Akka 中有几个可以应用的概念： • 如果发送者不是直接父级，则带有丢弃的普通参与者 • 事件总线和分类器 • ... 我仍然在努力选择最佳方法，至少在理论上，我知道对于一个DAG，您需要能够处理菱形场景（其中一个节点依赖于两个或多个节点，而这些节点又依赖于一个唯一节点）。欢迎任何指向论文、文章、想法的指针。问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-21T16:03:32.987

本文描述了一种**使用 Akka 进行分布式图处理的**方法：

[http://letitcrash.com/post/30257014291/distributed-in-memory-graph-processing-with-akka](http://letitcrash.com/post/30257014291/distributed-in-memory-graph-processing-with-akka)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T22:59:25.687

简单地使用 Akka Remote 和一些 DIY

# php - codeigniter 数据库查询 / mysql

> ID：10500534
> 
> 赞同：0
> 
> 时间：2012-05-08T14:24:20.790
> 
> 标签：php, mysql, database, codeigniter

我用 codeigniters 数据库库编写了一个查询，它看起来像这样，

```
public function getCandidateCredits($candidate_id)
{
    $this->db->select('*')
    ->from('credits')
    ->join('candidate_has_credits', 'candidate_has_credits.credits_credit_id = credits.credit_id', 'left')
    ->where('credits.candidates_candidate_id', (int)$candidate_id)
    ->order_by('candidate_has_credits.date_created', 'DESC')
    ->order_by('credits.credit_position', 'DESC');

    $query = $this->db->get();

    return $query->result_array();
} 
```

此查询的目的是获取所有成员的积分，并首先按日期（最新的优先），然后按积分位置（最高的数字在前）对它们进行排序。

我遇到了一些问题，信用应该按日期排序，但只有在没有信用位置的情况下，如果有信用位置（0 - 999），那么在订购信用时应该优先考虑，如果有一个日期和一个信用头寸，那么信用应该按信用头寸和日期排序。

这可能吗？我觉得我离我需要的地方很远，我返回的结果似乎是返回没有明显的顺序。不确定是否有所不同，但 date_created 字段是 DATETIME。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:03:20.060

您正确地使用了左连接，但是按错误的顺序排列了子句的顺序，所以首先，翻转它们：

```
->order_by('credits.credit_position', 'DESC')
->order_by('candidate_has_credits.date_created', 'DESC') 
```

应该这样做，除了现在那些没有相应信用记录的 Candidate_has_credit 行（因此 credit_position 为空）将在最后，我假设你想要那些在顶部。

使用 DESC 排序时有一个小技巧可以将空值推到顶部，前提是您知道该字段中可用的最大值：

```
->order_by("ifnull('credits.credit_position',1000) desc,candidate_has_credits.date_created desc") 
```

请注意，我使用的是 order_by 方法的形式，它只包含一个参数，它不应该转义函数并且稍微快一点。

检查[ifnull 文档](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull)以了解它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:28:43.370

这是一个缩短的版本：

```
public function getCandidateCredits($candidate_id)
{
    return $this->db->from('credits')
    ->join('candidate_has_credits', 'candidate_has_credits.credits_credit_id = credits.credit_id', 'left')
    ->where('credits.candidates_candidate_id', (int)$candidate_id)
    ->order_by('credits.credit_position', 'DESC')
    ->order_by('candidate_has_credits.date_created', 'DESC')
    ->get()->result_array(); 
} 
```

# python - 在 mod_wsgi 托管的 cherrypy 应用程序中显示异常

> ID：10500536
> 
> 赞同：0
> 
> 时间：2012-05-08T14:24:25.413
> 
> 标签：python, mod-wsgi, cherrypy

我有一个cherrypy应用程序，在我的本地机器上运行良好，但在我的服务器上却不行。如果在请求处理程序中引发异常，我会在浏览器中看到以下消息：

> 服务器遇到了一个意外情况，导致它无法完成请求。

如何告诉cherrypy显示异常？我在 appache 日志或其他地方看不到日志信息。我希望有一些标志可以说“DEBUG = True”或类似的东西。但我在文档中找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:03:58.993

如果您将环境配置设置为生产、嵌入式或 test_suite，那么 log.screen 会自动设置为 False。手动将此设置为 true 将为您提供屏幕上显示的完整回溯。或者，您必须开始挖掘您的网络服务器日志。

# sql-server-2008 - 具有动态 SQL 的 sql server 中的列名无效

> ID：10500538
> 
> 赞同：3
> 
> 时间：2012-05-08T14:24:37.247
> 
> 标签：sql-server-2008

当我尝试运行 SQL 时，它没有用单引号格式化 @Status 参数的值，因为它是文本。因此它给出了这个错误，因为**Running**是无效的列名。

```
DECLARE
    @ID int,
    @Status varchar(150),
    @StandardOutput varchar(max) = NULL,
    @StandardError varchar(max) = NULL,
    @Query Varchar(max),
    @S1 varchar(max),
    @S2 varchar(max),
    @S3 varchar(max)

SET     @Status = N'Running'
SET     @StandardError = N'So2234'
SET     @StandardOutput = Null
SET @S1 = ''
SET @ID = 1
--DECLARE @S1 varchar(max)
--SET @S1 = N' '
IF @Status IS NOT NULL 
    BEGIN
    SET @S1 = ( N',  dbo.JobQueue.Status = ' + @Status);
    END
IF @StandardError IS NOT NULL 
    BEGIN
    SET @S1 = @S1 + N',  dbo.JobQueue.StandardError = ' + @StandardError
    END
IF @StandardOutput IS NOT NULL
    BEGIN
    SET @S1 = N', dbo.JobQueue.StandardOutput = ' + @StandardOutput
    END

SET @S1 = (N' UPDATE  dbo.JobQueue SET ' + SUBSTRING(@S1, 2, LEN(@s1)) ) + ' ';
SET @S1 = @S1 + N' WHERE  dbo.JobQueue.ID = ' + CONVERT(VARCHAR(12), @ID);
SELECT @S1
EXEC(@S1) 
```

消息 207，级别 16，状态 1，第 1 行
无效的列名称“正在运行”。
消息 207，级别 16，状态 1，第 1 行
无效的列名称“So2234”

打印结果@S1

```
UPDATE  dbo.JobQueue SET   dbo.JobQueue.Status = Running,  dbo.JobQueue.StandardError = So2234  WHERE  dbo.JobQueue.ID = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:31:52.340

由于这些值是您已知的，而不是由某处的 UI 提供的，因此您可以手动对其进行转义。但是，如果“运行”值不是常量而是由 UI 提供（SQL 注入），则不要这样做

尝试这个：

```
IF @Status IS NOT NULL 
    BEGIN
    SET @S1 = ( N',  dbo.JobQueue.Status = ''' + @Status + ''');
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:29:41.650

从 中检查结果`SELECT @S1`。

一定有语法错误！例如，某处缺少空格或引号通常是主要原因。

* * *

更新：

```
UPDATE  dbo.JobQueue SET   dbo.JobQueue.Status = Running,  dbo.JobQueue.StandardError = So2234  WHERE  dbo.JobQueue.ID = 1 
```

Running 和 So2234 prolly 是文本数据类型，因此您在它们上缺少引号！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T14:37:59.620

为什么不在这里使用非动态sql呢？

```
UPDATE jq
SET Status = ISNULL(@status, jq.Status)
    ,StandardError = ISNULL(@StandardError, jq.StandardError)
    ,StandardOutput = ISNULL(@StandardOutput, jq.StandardOutput)      
FROM dbo.JobQueue jq
WHERE jq.ID = @id 
```

# java - 如何从 android 中的 HSB 检索 RGB 值？

> ID：10500540
> 
> 赞同：0
> 
> 时间：2012-05-08T14:24:50.120
> 
> 标签：java, android, image-processing, rgb, hsb

我找到了从 RGB 到 HSB 转换的答案......但是在操纵 hsb 值之后，我无法在 android/java 中找到任何方法来检索 rgb 值。我使用了此链接中的代码[http://biginteger.blogspot.com/2012/01/convert-rgb-to-hsl-and-vice-versa-in.html](http://biginteger.blogspot.com/2012/01/convert-rgb-to-hsl-and-vice-versa-in.html)

但是这个问题是..即使不改变像素的 HSB 值，我也试图取回不同的 RGB 值。有没有更有效的方法从 HSB 检索 RGB 值？？？？？？

# java - 重新编译 TJWS

> ID：10500549
> 
> 赞同：0
> 
> 时间：2012-05-08T14:25:17.403
> 
> 标签：java, compilation, tjws

我是 Java 新手，我必须对 Tiny Java Web Server( [LINK](http://tjws.sourceforge.net/) ) 进行一些更改并重新编译它。有人可以解释一下它是如何在java中完成的吗？

通常我一直使用 javac 命令进行编译，但这里我有多个文件要编译。

另外，我读过我应该使用 ant 的人，但这似乎很复杂。为什么在java中编译程序必须如此复杂？

我可以使用eclipse以某种方式编译它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:30:17.447

回答您隐含的问题“为什么不能使用 Eclipse 编译所有 Java 程序” - 您会看到，有一些工具可以编译由许多文件（不仅仅是一个）组成的 Java 程序，这些工具会自动执行编译，无需人工操作，不使用 Eclipse（或任何其他 IDE），所以他们需要一个编译程序。一个这样的程序是 Ant，另一个在 Java 世界中流行的是 Maven。

Ant的另一点是，通常你只需要编译程序，而不是无论如何编辑它，所以你不需要IDE，只需要编译工具。

如果您有兴趣了解这些编译工具的工作原理，我建议您从 Ant 开始，然后继续使用 Maven（如果需要）。

# .htaccess - htaccess - 禁用除 www 以外的子域

> ID：10500550
> 
> 赞同：2
> 
> 时间：2012-05-08T14:25:18.790
> 
> 标签：.htaccess, subdomain

我想禁用除 www 之外的子域，因此这将不再起作用：**subdomain.mysite.tld**，但这将：**www.mysite.tld**

我也想从**mysite.tld**重定向到**www.mysite.tld**，我知道该怎么做，但是如果有 mysite.tld 它不会重定向到 www，而是会抛出一个禁止的错误......

```
RewriteCond %{HTTP_HOST} !mysite.tld$ [OR]
RewriteCond %{HTTP_HOST} !www.mysite.tld$
RewriteRule .* - [F]

RewriteCond %{HTTP_HOST} !^www
RewriteRule .? http://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T14:55:01.047

你能试一下吗：

```
RewriteCond %{HTTP_HOST} !^(www\.)?mysite\.tld$ [NC]
RewriteRule ^ - [F,L]

RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:34:15.623

重写为 www：

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^mysite.tld[nc]
RewriteRule ^(.*)$ http://www.mysite.tld/$1 [r=301,nc] 
```

# html - 不能在 Firefox 中工作

> ID：10500551
> 
> 赞同：7
> 
> 时间：2012-05-08T14:25:19.227
> 
> 标签：html, css, firefox

我正在编写一些代码，并希望在两个输入之间有一些空间，并且`<br />`在 Firefox 中不起作用：

```
<input type="text" id="X_Axis" /><br />
<input type="text" id="Y_Axis" /> 
```

`<br />`, `<br/>`,都没有`</br>`工作。

PS我没有在任何其他浏览器中尝试过，所以它可能不是Firefox，我想。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-08T14:28:47.453

使用`<br/>`在 HTML 元素之间添加间距是不好的做法。我建议为您的表单元素分配 CSS 填充或边距。以下帖子非常有用：[何时使用 <br> 换行符与 CSS 定位？](https://stackoverflow.com/questions/3937515/when-to-use-br-line-breaks-vs-css-positioning)

工作示例：http: [//jsfiddle.net/uHKzq/1/](http://jsfiddle.net/uHKzq/1/)

我添加了 CSS 属性`display: block;`，它将导致您的第二个表单元素显示在第一个表单元素的下方。然后我在表单元素周围应用了一个边距，这在您的两个表单输入字段之间创建了一个空间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-09T20:47:39.237

这很棒。我有 2 个 AdSense 链接单元，我想放置一个断线。

`<br>`没用，所以我只在我的小部件区域中建议了你的建议，两个广告单元占位符之间有 div 元素

* * *

*第一个 AdSense 代码*

```
<div style="margin: 10px 0 10px 0;"></div> 
```

*第二个 AdSense 代码*

# c# - Window Phone：实现类似于 People Hub、电子邮件搜索、通话记录的列表搜索

> ID：10500553
> 
> 赞同：1
> 
> 时间：2012-05-08T14:25:22.013
> 
> 标签：c#, .net, windows-phone-7, windows-phone-7.1

我已经尝试过 Windows Phone 工具包中的自动完成框组件，但我知道它不如人员中心搜索、电子邮件搜索或通话记录搜索快或流畅；有没有办法实现在这些标准 Windows Phone 应用程序/模块中使用的相同列表搜索机制？或者这是微软开发的控件自定义不向公众提供？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:27:34.317

我建议您评估 Telerik 的 Windows Phone 控件。

[http://www.telerik.com/products/windows-phone/overview/all-controls.aspx](http://www.telerik.com/products/windows-phone/overview/all-controls.aspx)

我在我的 WP7 应用程序中使用了许多控件，它们的支持是首屈一指的！

# c# - xpath 选择器中的 C# 变量

> ID：10500557
> 
> 赞同：1
> 
> 时间：2012-05-08T14:25:47.743
> 
> 标签：c#, xpath, selenium

我可以将 C# 字符串变量传递给 xpath 选择器吗？这是一个硒单元测试。我想做这样的事情：

```
string myText = "foo";    
Assert.IsTrue(Browser.IsElementPresent("//option[contains(text(), $myText)]")); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T14:26:57.477

使用 string.Format 应该可以工作：

```
Assert.IsTrue(Browser.IsElementPresent(string.Format("//option[contains(text(), {0}]",myText))); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T14:28:05.290

是的，你可以使用[String.Format](http://msdn.microsoft.com/en-us/library/system.string.format%28v=vs.110%29.aspx)

```
string myText = "foo";    
Assert.IsTrue(Browser.IsElementPresent(String.Format("//option[contains(text(), {0})]", myText))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T07:46:55.330

我看到这已经得到回答，但你也可以这样做：

```
Assert.IsTrue(Browser.IsElementPresent(String.Format("//option[contains(text(), " + myText + ")]"))); 
```

这是可行的，因为 C# 只会将每个字符串附加到另一个字符串的末尾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-09T19:29:05.960

谢谢您的回答！我在表格中进行查找，上述解决方案对我不起作用，可能是因为我的字符串包含连字符、小数点和如下数字：“TV-8888-ZIP-54-EN-CTR.05021031”

我将字符串分配给 C# 变量 ID。我怀疑，由于小数点和数字，上面的答案失败了。使用 Nashibukasan 的回答，我必须明确添加单引号。有效的 Find 语句（从包含第一列中的 ID 字符串的同一行获取表的第三列中的值）最终看起来像这样：

```
value = driver.FindElement(By.XPath(string.Format("//td[contains(text()," + "'" + ID + "'" + ")]/following-sibling::td[2]"))).Text; 
```

# ruby - 为什么这个 Albacore zip 任务不创建 zip 文件？

> ID：10500564
> 
> 赞同：2
> 
> 时间：2012-05-08T14:26:35.217
> 
> 标签：ruby, rake, albacore

当我使用 运行 zip 任务时，它会显示对and`rake –-trace`的调用，但不会创建 zip 文件。它没有给我错误消息。我究竟做错了什么？`default``zip_up_files`

```
require 'albacore'

task :default => :zip_up_files

zip :zip_up_files do |zip|
  zip.directories_to_zip 'C:\\Temp\\StuffToZip'
  zip.output_file = 'out.zip'
  zip.output_path = 'C:\\Temp'
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T20:43:25.813

我在我的机器上尝试了你的 rakefile，没有错误，也没有 zip 文件！我查看了 Albacore [zip 任务](https://github.com/Albacore/albacore/blob/dev/lib/albacore/zipdirectory.rb#L28)，它使用了 Ruby [ZipFile](http://rubyzip.sourceforge.net/classes/Zip/ZipFile.html)类。这似乎是 zip 存档的纯 Ruby 实现。因此，我尝试的下一件事是修复使用*正斜杠*的路径。那行得通！

```
zip :zip_up_files do |zip|
  zip.directories_to_zip 'C:/Temp/StuffToZip'
  zip.output_file = 'out.zip'
  zip.output_path = 'C:/Temp'
end 
```

我有另一个想法，也许你没有在C盘上写的权限。我无法重现它，但我建议您可能位于用户控制的目录中。即使它是自动构建用户。仔细检查一下。

# c++ - 从字符数组中检索整数

> ID：10500569
> 
> 赞同：1
> 
> 时间：2012-05-08T14:26:52.637
> 
> 标签：c++

我正在工作的程序传递了 3 个命令行参数，所有这些参数都应该是整数。提供的骨架程序有：

```
int main(char *argv[]){
...
} 
```

我所做的只是尝试为数组的每个位置（0、1和2）中的项目设置一个整数，但由于它试图将char转换为整数，因此无法编译。我确信有一个简单的解决方法，但我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T14:29:34.680

由于这看起来像家庭作业，我会给你几个提示：

*   的签名`main()`包括一个`int`参数，通常命名为`argc`
*   最初的论点是`argv[1]`，不是`argv[0]`
*   [`atoi`](http://www.cplusplus.com/reference/clibrary/cstdlib/atoi/)是将字符串转换为整数的最简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:30:44.850

尝试这样的事情：

```
int i = atoi(argv[1]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T14:31:01.060

为每个参数尝试 cstdlib 函数“atoi”：

[char* 到 int 的转换](http://www.cplusplus.com/reference/clibrary/cstdlib/atoi/)

# c++ - 在使用 boost::singleton_pool 时处理 std::string/std::vector 成员变量

> ID：10500574
> 
> 赞同：9
> 
> 时间：2012-05-08T14:27:12.660
> 
> 标签：c++, memory-management, boost-pool

我正在编写一个性能关键的应用程序，在该应用程序中我创建了大量类似类型的对象来下订单。我正在使用[boost::singleton_pool](http://www.boost.org/doc/libs/1_49_0/libs/pool/doc/html/boost_pool/pool/interfaces.html#boost_pool.pool.interfaces.interfaces.singleton_pool)来分配内存。最后我的课看起来像这样。

```
 class MyOrder{
    std::vector<int> v1_;
    std::vector<double> v2_;

    std::string s1_;
    std::string s2_;

public:
    MyOrder(const std::string &s1, const std::string &s2): s1_(s1), s2_(s2) {}

    ~MyOrder(){}

    static void * operator new(size_t size); 
    static void operator delete(void * rawMemory) throw();
    static void operator delete(void * rawMemory, std::size_t size) throw();

};

struct MyOrderTag{};
typedef boost::singleton_pool<MyOrderTag, sizeof(MyOrder)> MyOrderPool; 

void* MyOrder:: operator new(size_t size)
{
    if (size != sizeof(MyOrder)) 
        return ::operator new(size);

    while(true){
        void * ptr = MyOrderPool::malloc();
        if (ptr != NULL) return ptr;

        std::new_handler globalNewHandler = std::set_new_handler(0);
        std::set_new_handler(globalNewHandler);

        if(globalNewHandler)  globalNewHandler();
        else throw std::bad_alloc();

    }
}

void MyOrder::operator delete(void * rawMemory) throw()
{
    if(rawMemory == 0) return; 
    MyOrderPool::free(rawMemory);
}

void MyOrder::operator delete(void * rawMemory, std::size_t size) throw()
{
    if(rawMemory == 0) return;
    if(size != sizeof(Order)) {
        ::operator delete(rawMemory);
    }
    MyOrderPool::free(rawMemory);
} 
```

我最近发布了一个[关于](https://stackoverflow.com/questions/10466845/custom-allocation-using-boost-singleton-pool-slower-than-default)使用 boost::singleton_pool 的性能优势的问题。当我比较[boost::singleton_pool](http://www.boost.org/doc/libs/1_49_0/libs/pool/doc/html/boost_pool/pool/interfaces.html#boost_pool.pool.interfaces.interfaces.singleton_pool)和默认分配器的性能时，我没有获得任何性能优势。当有人指出我的班级有 std::string 类型的成员，其分配不受我的自定义分配器控制时，我删除了 std::string 变量并重新运行测试。这一次，我注意到性能有了相当大的提升。

1.  现在，在我的实际应用中，我无法摆脱时间 std::string 和 std::vector 的成员变量。我应该将[boost::pool_allocator](http://www.boost.org/doc/libs/1_49_0/libs/pool/doc/html/boost_pool/pool/interfaces.html#boost_pool.pool.interfaces.interfaces.pool_allocator)与我的 std::string 和 std::vector 成员变量一起使用吗？

2.  boost::pool_allocator 从底层 std::singleton_pool 分配内存。不同的成员变量是否重要（我的 MyOrder 类中有多个 std::string/std::vector 类型。此外，我正在为 MyOrder 以外的包含 std::string/std::vector 类型的类使用池作为成员）使用相同的内存池？如果是这样，我如何确保他们以一种或另一种方式做事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T19:43:16.903

> 1.  现在，在我的实际应用中，我无法摆脱时间 std::string 和 std::vector 的成员变量。我应该将 boost::pool_allocator 与我的 std::string 和 std::vector 成员变量一起使用吗？

我从来没有研究过 boost 的那一部分，但是如果你想改变字符串分配内存的位置，你需要`std::basic_string<>`在编译时传递一个不同的分配器。没有其他办法。但是，您需要注意它的缺点：例如，此类字符串将不再可分配给`std::string`。（虽然雇佣`c_str()`会奏效，但它可能会造成很小的绩效损失。）

> 1.  boost::pool_allocator 从底层 std::singleton_pool 分配内存。不同的成员变量是否重要（我的 MyOrder 类中有多个 std::string/std::vector 类型。此外，我正在为 MyOrder 以外的包含 std::string/std::vector 类型的类使用池作为成员）使用相同的内存池？如果是这样，我如何确保他们以一种或另一种方式做事？

池的全部意义在于将多个对象放入其中。如果它只是一个，你就不需要一个游泳池。所以，是的，你可以把几个对象放进去，包括几个`std::string`对象的动态内存。

然而，这是否会给您带来任何性能提升还有待观察。您使用池是因为您有理由假设它比通用分配器更快（而不是使用它来例如从特定区域分配内存，如共享内存）。通常这样的池更快，因为它可以对其中分配的对象的大小做出假设。这对你的类来说当然是正确的`MyOrder`：它的对象总是具有相同的大小，否则（更大的派生类）你不会在池中分配它们。
这是不同的`std::string`. 使用动态分配字符串类的全部意义在于它适应任何字符串长度。所需的内存块具有不同的大小（否则您可以只使用 char 数组）。我认为池分配器几乎没有改进通用分配器的空间。

* * *

附带说明：您的重载`operator new()`返回调用全局结果的结果，但是您`operator delete`只是将任何东西传递到该池的`free()`. 这对我来说似乎很可疑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:54:20.417

Using a custom allocator for the `std::string`/`std::vector` in your class would work (assuming the allocator is correct) - but only performance testing will see if you really see any benefits from it.

Alternatively, if you know that the `std::string`/`std::vector` will have upper limits, you could implement a thin wrapper around a `std::array` (or normal array if you don't have c++11) that makes it a drop in replacement.

Even if the size is unbounded, if there is some size that *most* values would be less than, you could extend the `std::array` based implementations above to be expandable by allocating with your pooled allocator if they fill up.

# sql-server - 在 SQL Server 2012 SSDT 解决方案中引用 CLR 项目

> ID：10500577
> 
> 赞同：1
> 
> 时间：2012-05-08T14:27:18.730
> 
> 标签：sql-server, clr, sql-server-2012, sql-server-data-tools

我正在尝试使用 SSDT 将 SQL Server 2008 dbproj 升级到 SQL Server 2012 sqlproj。一切似乎都正常，接受解决方案中的 CLR 项目。我在我的 sqlproj 中引用了它，但是当我尝试构建时，它在项目中使用的所有位置（参见下面的示例）都抛出错误：“blah blah blah has an unresolved reference to assembly []”。是否有一种特殊的方式需要引用 CLR 项目，以便 sqlproj 中的文件可以使用它？CLR 项目在 2008 年的 dbproj 中运行良好...

```
CREATE AGGREGATE [dbo].[ConcatenateAll]
(@value NVARCHAR(MAX))
RETURNS NVARCHAR(MAX)
EXTERNAL NAME [Rma.Pass.Database.SqlClrUtility].[Rma.Pass.Database.SqlClrUtility.Aggregates.ConcatenateAll] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:05:32.860

原来在我的 .sqlproj 文件中创建引用的方式有问题。我创建了一个新项目并从那里复制了 ProjectReference xml 设置，并且能够成功构建我的项目。

# java - 使用此运算符使用接口转换实现的类

> ID：10500578
> 
> 赞同：0
> 
> 时间：2012-05-08T14:27:20.803
> 
> 标签：java, interface, casting, this

```
interface iMyInterface {
    public iMethod1();
}

public class cMyClass implements iMyInterface{
    public iMethod1() {
        System.out.println("From Method1");
    }
    protected iMethod2() {
        System.out.println("From Method2");
    }
}

class AppMain
{
    iMyInterface i=new cMyClass();
    public static void main(){
    i.iMethod1();
    ((cMyClass)i).iMethod2();
    }
} 
```

这产生如下输出

从方法1

从方法2

因为接口对象被强制转换为该类

但我的问题是我不能在以下情况下投

```
class AppMain
{
    iMyInterface i=new cMyClass();
    public static void main(){    
    i.iMethod1();
    this.((cMyClass)i).iMethod2();
    }
} 
```

Eclipse IDE 显示以下错误：令牌“.”上的语法错误，此令牌后应有标识符。

我不明白这一点，我访问同一个字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T14:29:23.827

你只是在错误的点上施法。你要：

```
((cMyClass) this.i).iMethod2(); 
```

并不是说您*必须*像示例中那样在`this`静态方法中引用`main`...

（另请注意，您的类型等都不遵循 Java 命名约定......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:29:25.727

尝试

```
((cMyClass)(this.i)).iMethod2(); 
```

你看，你的里面`this`没有`(cMyClass)i`，它只有一个`i`。所以你得到那个`i`( `this.i`) 并将它转换成你想要的任何东西。

# c# - 从 C# Table 控件中的控件访问数据？

> ID：10500580
> 
> 赞同：0
> 
> 时间：2012-05-08T14:27:24.863
> 
> 标签：c#, controls

正如标题所示，我在访问表格控件 (System.Web.UI.WebControls.Table) 中的数据时遇到问题。布局基本上是一个基于 Web 的动态电子表格，每个 TableCell 中都有 TextBox 控件。我试图做类似下面代码的事情，但我无法访问数据。任何帮助，将不胜感激。

```
 foreach (Control c in this.Controls)
        {
            if (c.GetType().ToString() == "System.Windows.Form.Textbox")
            { 
                TextBox t = c as TextBox;
                if (t.Text.Trim() != "")
                {
                    // Do more things based on t.ID...
                }
             }
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:40:49.903

您可以尝试这样做：

```
 foreach (var control in this.Controls.OfType<TextBox>())
        {
            if (control.Text.Trim() != string.Empty)
            {
                //do your code..
            }
        } 
```

# vsto - 使用 VSTO 4.0 的 Outlook 插件的 VSIS 安装程序，下载 VSTO 4.0 x86 和 x64

> ID：10500584
> 
> 赞同：2
> 
> 时间：2012-05-08T14:27:50.627
> 
> 标签：vsto, nsis, outlook-addin

我正在构建一个 Outlook 插件，对于安装程序，我决定使用 NSIS 安装脚本。我检查了 .Net 4.0，我可以下载并安装 .Net Framework 4.0。但是，如果客户端计算机上不存在 VSTO 4.0 运行时，我需要一些指导。

基本上可以从[http://www.microsoft.com/en-us/download/details.aspx?id=20479下载的运行时](http://www.microsoft.com/en-us/download/details.aspx?id=20479)

我总是可以检查是否存在 VSTO 并检测操作系统，然后使用硬编码的下载位置

对于 x64 [http://download.microsoft.com/download/F/3/9/F395E3C2-28A0-4F0D-9E20-FF4D1ADB08D8/vstor40_x64.exe](http://download.microsoft.com/download/F/3/9/F395E3C2-28A0-4F0D-9E20-FF4D1ADB08D8/vstor40_x64.exe)

对于 x86

[http://download.microsoft.com/download/F/3/9/F395E3C2-28A0-4F0D-9E20-FF4D1ADB08D8/vstor40_x86.exe](http://download.microsoft.com/download/F/3/9/F395E3C2-28A0-4F0D-9E20-FF4D1ADB08D8/vstor40_x86.exe)

下载并运行安装程序。

但是，有没有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:26:47.853

试试这个，它可能会有所帮助：[Microsoft Office 2010 Primary Interop Assemblies Bootstrapper Package 1.0 2010-9-7](http://www.microsoft.com/en-us/download/details.aspx?id=18249)。

# java - 在 Camel 上下文中访问 JVM 选项

> ID：10500587
> 
> 赞同：0
> 
> 时间：2012-05-08T14:27:51.870
> 
> 标签：java, apache-camel, jvm-arguments

我有 JVM 选项来定义每个环境。它类似于 -Denv="development"。如何在骆驼上下文中访问此 JVM 选项并根据 env 值决定我的路线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:31:55.357

使用[骆驼属性](http://camel.apache.org/properties.html)组件...

```
PropertiesComponent pc = context.getComponent("properties", PropertiesComponent.class);

from("direct:start").to("properties:{{cool.end}}"); 
```

# jquery - jCoverflip 的鼠标悬停导航

> ID：10500588
> 
> 赞同：1
> 
> 时间：2012-05-08T14:27:54.037
> 
> 标签：jquery, jquery-plugins

我正在使用 jCoverflip，并希望当我将鼠标移动到任一侧时它会转动......我找不到任何关于如何做到这一点的信息......我正在使用基本设置：

```
$('.items').jcoverflip();
<ul class="items">
  <li class="item"><a href="#"><img src=""><span class="title">My title 1</span></a></li>
  <li class="item"><a href="#"><img src=""><span class="title">My title 2</span></a></li>
  <li class="item"><a href="#"><img src=""><span class="title">My title 3</span></a></li>
</ul> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T03:48:16.333

我假设，您想在鼠标悬停时移动/滑动图像而不是单击。您必须更改配置，即 jCoverflip.js 文件。

您应该能够将 jquery.jcoverflip.js 的第 542 行从：

```
this.element.click( proxy( this, this._clickItem ) ); 
```

至

```
this.element.mouseover( proxy( this, this._clickItem ) ); 
```

我希望这对你有用。

# c# - 找到圆心

> ID：10500589
> 
> 赞同：0
> 
> 时间：2012-05-08T14:28:00.540
> 
> 标签：c#, trigonometry

我需要一些 c# 代码用于以下内容：

我有两点（2D）。这些点在半径为 r 的圆上。我知道每个点的切线角。我需要抓住圆的中点。

//托马斯

* * *

好的，我想我有点不清楚。见下图。点 P1 位于直线的末端，直线的夹角为 At1。点 P2 位于角度为 At2 的直线的起点。我知道 P1 和 P2 的坐标。我也知道角度 At1 和 At2。在 P1 和 P2 之间形成一个半径，我需要知道由 P1、P2、At1 和 At2 形成的（不可见）圆的中心点 Pc。点 P1 和 P2 可以位于坐标系中的任何位置。

我知道这不是 c#，但是我希望遇到解决这个问题的人。

[看图片](http://thomashellstrom.com/centerpoint.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:35:47.080

如果不知道这些点在圆上彼此相距最远，那么它们可以在无限数量的圆上。

否则，很简单：

```
Point pt1 = ...
Point pt2 = ...

Point mid = new Point((pt1.X + pt2.X) / 2, (pt1.Y + pt2.Y) / 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:12:25.497

首先，检查切角是否平行。如果它们是，那么您需要做的就是根据 Yorye Nathan 的解决方案找到它们之间的中点（因为它们都位于圆的直径上）。

如果它们不平行，那么您可以从已知的 P1 和 P2 开始绘制两条垂直于切线角的线。如果你解决了这两条线的交点，那么这个交点就是 Pc。

我现在没有时间编写完整的 C# 数学并对其进行测试，但一些伪代码可能是：

```
public Point CalculateCircleCentre(Point p1, Degrees tangent1, Point p2, Degrees tangent2)
{
    if (AreAnglesParallel(tangent1, tangent2))
    {
        return Midpoint(p1, p2);
    }
    else
    {
        var line1 = new Line(p1, tangent1 + 90);
        var line2 = new Line(p2, tangent2 + 90);
        var intersectionPoint = FindIntersection(line1, line2);

        return intersectionPoint;
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-08T15:06:28.763

假设您在坐标为 (x1, y1)、(x2, y2) 的圆上有 2 个点，点 (x3, y3) 是半径为 r 的圆的中心，您需要做的就是找到 x3 和 y3。解决这个系统：

```
(x3-x1)^2+(y3-y1)^2=r^2
(x3-x2)^2+(y3-y2)^2=r^2 
```

扩展到

```
 x3*x3-2*x3*x1+x1*x1 + y3*y3-2*y3*y1+y1*y1 = r*r

 x3*x3-2*x3*x2+x2*x2 + y3*y3-2*y3*y2+y2*y2 = r*r

2*x3*(x2-x1) + 2*y3*(y2-y1) + x1*x1 + x2*x2 + y1*y1 + y2*y2 = 0 
```

您现在可以用这个长表达式替换 x3 并找到 y3

```
x3 = (2*y3*(y1-y2) - (x1*x1 + x2*x2 + y1*y1 + y2*y2)) / (2*(x2-x1)) 
```

之后，您将知道找到 x3 的一切。

# c++ - 在 C++ 共享对象文件中找到完整的函数定义

> ID：10500591
> 
> 赞同：8
> 
> 时间：2012-05-08T14:28:05.320
> 
> 标签：c++, linux, compiler-errors, shared-libraries, linker-errors

我有一个链接器错误，它说未定义对函数的引用。我希望函数所在的共享库具有该函数名称（我通过 nm -s 检查）所以现在我想看看函数参数是否正确。如何查看共享对象文件中函数的类型和参数数量？

编辑：所以它出现的问题是：我试图通过链接共享*C*对象来创建 C++ 共享对象文件，但是在 C++ 源代码中我没有在“extern”C“”块中包含标题，所以它无法找到这些符号，感谢所有回答此问题的人。这个问题现在已经解决了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T14:38:38.957

您可以使用`nm`以下`--demangle`选项：

```
nm -s --demangle libWhatever.so 
```

在样本上尝试一下 .so 给了我输出，例如

> 00005820 T detail::print_(std::ostream&, cv::Mat const&, std::string const&)

`T`只是意味着它位于用于制作的目标文件中，`.so`并且不需要由链接器解析。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T20:38:51.320

你可能想要：

```
nm --demangle --defined-only --dynamic x.so 
```

上面对 C++ 名称进行了解码，并且仅在动态部分中显示了已定义的符号，这些符号是具有可以链接的外部链接的已定义符号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T14:33:15.323

尝试对损坏的名称执行 c++filt。它会解开它，你可以看到论点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T00:06:34.130

所以它出现的问题是：我试图通过链接一个共享的*C*对象来创建一个 C++ 共享对象文件，但是在 C++ 源代码中我没有在“extern”C“”块中包含标题，所以它不是能够找到这些符号，感谢所有回答这个问题的人。这个问题现在已经解决了。

# jquery - MVC，将文本值提交到日期属性

> ID：10500592
> 
> 赞同：0
> 
> 时间：2012-05-08T14:28:07.163
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, datetime

实际上不确定如何表达我的问题。

我在我的大部分屏幕中都使用 jqgrid（不确定在这种情况下是否相关信息），我在添加/编辑模式上有两个日期时间选择器。我一直在使用[这个](http://trentrichardson.com/examples/timepicker/)日期时间选择器组件，它运行良好，除了我发现人们不喜欢使用滑块来捕捉时间，尤其是如果它需要经常输入。

随之而来的是[will_pickdate](http://zenapsis.github.com/will_pickdate/)组件，尽管它非常发光：P，但似乎回答了我的最终用户的祈祷，（我的另一个选择是尝试编写我自己的组件，但我现在先跳过它）

当我尝试保存时，我的问题就出现了。will_pickdate 组件似乎将其日期时间值作为文本提交，或者当我调用 TryUpdateModel 方法时它没有正确映射。

**客户端代码**

```
 function CreateDateTimePicker(elem, ShowOn, OnClose) {

        setTimeout(function () {
    //code that works
            $(elem).datetimepicker({
                dateFormat: 'yy/mm/dd',
                timeFormat: 'hh:mm',
                showOn: ShowOn,
                buttonImageOnly: true,
                buttonImage: "/Images/date_time.jpg",
                changeYear: true,
                changeMonth: true,
                showButtonPanel: true,
                showWeek: true,
                onClose: function (dateText, inst) {
                    if (OnClose != null)
                        OnClose(dateText, inst);

                    $(this).focus();
                }
            }).attr('size', '16').next('img.ui-datepicker-trigger')
            .attr("tabIndex", "-1").css({ 'cursor': 'pointer', 'vertical-align': 'middle', 'padding-left': '3px', 'padding-bottom': '4px' });

//new code that sort of works.. eg component renders fine, but fails server side
            //$(elem).will_pickdate({
            //    timePicker: true,
            //    format: 'Y/m/d H:i',
            //    inputOutputFormat: 'Y/m/d H:i',
            //    militaryTime: true,
            //    allowEmpty: true,
            //    startView:'day',
            //    onSelect: function (date) {

            //        if (OnClose != null)
            //            OnClose();

            //        $(this).focus();

            //      //  $('#' + display[0].id).val(new Date($(elem).val()));
            //   //     $('#' + display[0].id+ '_display').val(new Date($(elem).val()));
            //       // alert($('#' + display[0].id).val());
            //    }
            //});

        }, 100);} 
```

**我的添加方法。**

```
 public ActionResult Edit(Down_Time_Capture viewModel, FormCollection formCollection)
    {
        Down_Time_CaptureRepository repository = new Down_Time_CaptureRepository();

        try
        {
            if (!ModelState.IsValid)
                return ReturnValidationFailure(ViewData.ModelState.Values);

            int item_id = Convert.ToInt32(formCollection["id"]);

            var model = repository.Where(o => o.DTCP_ID == item_id).SingleOrDefault();

            if (model == null)
            {
                //append any error code to allow jqgrid modal to handle error display
                Response.StatusCode = 400;
                return Json("Record not found.", JsonRequestBehavior.AllowGet);
            }               

    ====>   //code fails here, model tries to get updated but dies
            if (TryUpdateModel(model, formCollection.ToValueProvider()))
            {
                repository.Edit(model, User.Identity.Name);
                repository.Save();
                return Json("Updated successfully.", JsonRequestBehavior.AllowGet);
            }
            else
            {
                return ReturnValidationFailure(ViewData.ModelState.Values);
            }
        }
        catch (Exception ex)
        {
           ...
        }

    } 
```

我注意到的是视图模型是有效的并且包含日期时间格式的值，但是当我尝试从数据库更新我的模型时，它会失败并显示以下消息。

*从类型“System.String”到类型“..Portal.Models.Down_Time_Capture”的参数转换失败，因为没有类型转换器可以在这些类型之间进行转换。*

我已经尝试在我的 javascript/jquery 中将值转换为日期格式，并将其附加到我的日期输入字段......但它仍然将其作为字符串提交

如果需要，我会提供任何其他信息，但这是一个奇怪的信息：/

**更新：**

我的视图只包含 jqgrid 组件的 html。我在下面添加了一个 jsfiddle 链接。

[链接到 JsFiddle - 包括两个日期选择器的代码](http://jsfiddle.net/Yenros/vawtN/7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:17:22.077

Ended up changing my controller methods.

I'd like to attempt to use generics and make it... uhm. generic. but its a completely new question on its own.

```
 [HttpPost]
        [AuthorizeAD]
        public ActionResult Edit(long id, VM_Down_Time_Capture viewModel)
        {
            using (Down_Time_CaptureRepository repository = new Down_Time_CaptureRepository())
            {
                //checks to see if data is valid
                if (!ModelState.IsValid)
                    return ReturnValidationFailure(ViewData.ModelState.Values);

                //find model to update
                var model = repository.Where(o => o.DTCP_ID == id).SingleOrDefault();

                if (model == null)
                    RecordNotFoundError();

                //update model using value injector
                model.InjectFrom(new Me().Ignore(new[] { "DTCP_ID" }), viewModel).InjectFrom<StringToDate>(viewModel);

                //perform edit
                string mserMsg = repository.Edit(model, User.Identity.Name);

                //notify user of any errors/notifications
                if (!string.IsNullOrEmpty(mserMsg))
                    return ReturnCustomValidationFailure(Server.HtmlEncode(mserMsg));

                //apply changes to db
                repository.Save();
                return Json("Updated successfully.", JsonRequestBehavior.AllowGet);
            }
        } 
```

ValueInjector Helper Code

```
public class StringToDate : LoopValueInjection
    {
        //by default is sourceType == targetType; override to change behaviour
        protected override bool TypesMatch(Type sourceType, Type targetType)
        {
            return sourceType == typeof(string)
                   && targetType == typeof(DateTime);
        }

        //by default is return sourcePropertyValue; override to change behaviour 
        protected override object SetValue(object sourcePropertyValue)
        {                
            return DateTime.Parse(sourcePropertyValue.ToString());
        }
    }

    public class Me : LoopValueInjection
    {
        private string[] ignore;

        public Me Ignore(string[] ignore)
        {
            this.ignore = ignore;
            return this;
        }

        protected override bool UseSourceProp(string sourcePropName)
        {
            return !ignore.Contains(sourcePropName);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:06:17.260

通常，当使用视图模型方法时，您使用映射器（例如 Automapper）将捕获的值从视图模型移动到持久对象。您正在做的是让 MVC 将捕获的值绑定到视图模型，然后您基本上是丢弃 Down_Time_Capture 实例并从表单重新绑定到 Down_Time_CaptureRepository 返回的任何类型（它不是 Down_Time_Capture，是吗？在这种情况下，你正在做双倍的工作）。

首先让我们尝试清理一下您的操作：

```
 public ActionResult Edit(int id)
    {
        Down_Time_CaptureRepository repository = new Down_Time_CaptureRepository();

        var model = repository.Where(o => i.DTCP_ID == id).SingleOrDefault();

        if (model == null)
            {
                //append any error code to allow jqgrid modal to handle error display
                Response.StatusCode = 400;
                return Json("Record not found.", JsonRequestBehavior.AllowGet);
            }  

            if (TryUpdateModel(model))
            {
                repository.Edit(model, User.Identity.Name);
                repository.Save();
                return Json("Updated successfully.", JsonRequestBehavior.AllowGet);
            }

            return ReturnValidationFailure(ViewData.ModelState.Values);
    } 
```

这个 will_pickdate 组件似乎确实有效地发送了 DateTime 值（该值将作为字符串通过网络传输，然后当表单字段的名称与被绑定模型的属性名称匹配时，MVC 的绑定器会将值转换为 DateTime） .

# oracle - 在 oracle 中加载包含包的开始日期、结束日期和 proc 进度的日志表

> ID：10500595
> 
> 赞同：0
> 
> 时间：2012-05-08T14:28:19.787
> 
> 标签：oracle, logging, plsql, package, procedure

我有一个通过 plsql 包加载的名为 AN_REMEDIATION_MATRIX 的表。

我有一个具有以下结构的日志表 MD_RUNS_STEP：

```
STEP_ID       NOT NULL NUMBER        
RUN_TYPE               VARCHAR2(10)  
RUN_START              DATE          
RUN_END                DATE          
RUN_SUCCESS            NUMBER        
USERNAME               VARCHAR2(30)  
RUN_ID        NOT NULL NUMBER        
RUN_ROLLBACK           NUMBER        
STEP_ID_PREV           NUMBER        
SYSID                  VARCHAR2(9)   
PROGRESS               VARCHAR2(500) 
STAT_RECS              NUMBER        
STAT_CPU               NUMBER        
STAT_TIME              NUMBER        
STAT_SEQ_READ          NUMBER        
STAT_SCT_READ          NUMBER 
```

现在我需要在执行包时使用上述值加载此日志表。
如何才能做到这一点？谁能帮助我，因为我是 Oracle 新手，所以我不知道它是如何工作的。

期待回复。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:50:58.917

没有自动填充此日志表的 Oracle 特定方式/设置。由于它特定于您的应用程序，因此一旦您了解这些列的含义，您就可以将代码添加到您的 pl/sql 过程中以根据需要获取日志。有些列很简单，这通常是代码的外观。

让我们说您当前的程序当前看起来像这样..

```
create or replace procedure p_INS_AN_REMEDIATION_MATRIX
as
BEGIN
  insert into p_INS_AN_REMEDIATION_MATRIX(.....) values (.....);
  update p_INS_AN_REMEDIATION_MATRIX set... where ...;
  commit;
END;
/ 
```

让我们获取一些日志列..（STEP_ID、RUN_START、RUN_END、RUN_SUCCESS）。更改后您的代码将如下所示

```
create or replace procedure p_INS_AN_REMEDIATION_MATRIX
as
  procedure add_new_log (i_step_id) is
    pragma autonomous_transaction;
  begin
    insert into MD_RUNS_STEP (i_step_id, run_start) 
        values (i_step_id, sysdate);
     commit;
  end;

  procedure update_status (i_step_id, i_status) 
  .....
  end;

  v_step_id number;

BEGIN

  select run_step_id_seq.nextval into v_step_id from dual;

  add_new_log(v_step_id);

  insert into p_INS_AN_REMEDIATION_MATRIX(.....) values (.....);
  update p_INS_AN_REMEDIATION_MATRIX set... where ...;
  commit;

  update_status(i_step_id,'SUCCESS'); --will set the load finish time as well.

EXCEPTION
  WHEN OTHERS THEN
     update_status(i_step_id,'FAILURE');  
     --RAISE, SEND ERROR EMAIL Based on your logic.
END;
/ 
```

正如@DCookie 指出的 (+1) ，自治事务是这样记录日志的完美用例。您的主要交易不受影响，您可以随时查看运行的最新状态。

*通常，您可能拥有执行所有这些更新的现有包，并且您可能只需要调用这些 API。四处询问或查看当前正在运行的负载。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T17:36:38.800

您是否需要在执行包时定期向该表中插入数据，并且需要能够查看另一个会话的进度？

如果是这样，您可能会查看[PRAGMA AUTONOMOUS_TRANSACTION](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/autonotransaction_pragma.htm)语句。将您的插入语句放入使用此 PRAGMA 定义的函数中，您可以独立于您的包提交插入。根据需要在包中调用您的函数。

# authentication - Tomcat - 启用双向 SSL

> ID：10500603
> 
> 赞同：-1
> 
> 时间：2012-05-08T14:28:43.217
> 
> 标签：authentication, ssl, tomcat6, ssl-certificate

我正在使用 Windows XP 并运行 Tomcat 6。我正在尝试在 Tomcat 上启用 SSL。首先，我尝试了客户端身份验证。

它不起作用 - 我将其配置为无需客户端身份验证即可工作。

我在 tomcat 服务器上安装了证书，还在浏览器（IE 和 FireFox）上安装了 CA 证书。

它仍然不起作用。

在 IE 中，除了 EOFException 之外，服务器不会抛出任何异常。

在 FireFox 中，它会抛出 SSLHandeShakeException: Remote host close the connection。

任何人都可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:09:04.467

评论中提供的 SSL 配置非常值得怀疑——尤其是 keyStorePass 属性。我建议您使用[Tomcat SSL 文档](http://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html)并按以下顺序进行操作：

*   使用自签名证书从浏览器获取 https
*   然后让它使用适当的证书
*   然后尝试添加客户端证书身份验证

这一切都有效。它作为 Servlet TCK 的一部分进行了测试，并且每个 Tomcat 版本都通过了 TCK。

# android - 如何确定电话是否在响铃或发出任何其他声音？

> ID：10500609
> 
> 赞同：0
> 
> 时间：2012-05-08T14:29:05.823
> 
> 标签：android

我正在编写一个用于声音测量的录音应用程序。我需要查明电话是否发出任何声音（响铃、收到短信、播放音乐……）以及用户是否正在拨号。在这种情况下，测量会暂时停止并在之后自动恢复。振动也可能影响测量，所以我也想知道。

有什么想法可以找到吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:29:29.627

我想你正在寻找这个:)

这是一些方便的代码，可以在音频播放完毕之前休眠：

```
 AudioManager manager = (AudioManager)this.getSystemService(Context.AUDIO_SERVICE);
   while(manager.isMusicActive())
    {
        Log.d("music", "music is active");
        try
        {
            Thread.sleep(500);
        }
        catch (InterruptedException e)
        {
            Log.e("music", "interrupted waiting for music to stop");
        }
        Log.d("music", "done playing music");
    } 
```

我希望这将帮助您完成工作。

谢谢 ：）

# jquery - Jquery - 使用“开始于”与远程数据源匹配

> ID：10500617
> 
> 赞同：0
> 
> 时间：2012-05-08T14:29:15.527
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

想知道如何切换以下代码以使用远程数据源而不是本地数组。此代码将匹配更改为“开始于”

```
 $("#input").autocomplete({
    minLength: 1,
    source: function(req, responseFn) {
        var re = $.ui.autocomplete.escapeRegex(req.term);
        var matcher = new RegExp( "^" + re, "i" );
        var a = $.grep( group_members_array, function(item){
            return matcher.test(item.value);
            });
        responseFn( a );
    }
}); 
```

# java - 为什么com.google.protobuf.CodedOutputStream的方法flush里面没有调用output.flush()？

> ID：10500618
> 
> 赞同：3
> 
> 时间：2012-05-08T14:29:23.647
> 
> 标签：java, protocol-buffers

请解释一下为什么谷歌编码器不调用该`flush()`方法？

```
 /**
  * Flushes the stream and forces any buffered bytes to be written.  This
  * does not flush the underlying OutputStream.
  */
  public void flush() throws IOException {
      if (output != null) {
          refreshBuffer();
      }
  } 
```

这有什么隐藏的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T23:29:46.090

因为您可能不想刷新底层流。例如，您可能只想刷新 ，`CodedOutputStream`以便可以安全地将一些其他数据写入底层`OutputStream`，并确保它最终在`CodedOutputStream`的数据之后写入。在这种情况下，您可能还不想将数据写入底层文件或套接字，因为批处理数据更有效。

# drupal - 如何在 drupal 6 中更改不同类型用户角色的用户注册表单字段

> ID：10500624
> 
> 赞同：0
> 
> 时间：2012-05-08T14:29:40.327
> 
> 标签：drupal, roles

我有两个名为的用户角色

1.  雇主
2.  求职者

我需要为每个角色显示不同的注册表单字段。

对于雇主 - 注册字段是

公司名称
地址
电话
邮编
联系人

对于求职者 - 注册字段是

名字
姓氏
电子邮件地址

我使用了个人资料角色模块，用户可选角色模块。但我无法执行此过程。

请帮我完成这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:15:22.403

我在这里找到了我的结果

[http://drupal.org/node/170023#comment-3300274](http://drupal.org/node/170023#comment-3300274)

它是有益的。

# c# - 将长字符串拆分为自定义字符串

> ID：10500626
> 
> 赞同：2
> 
> 时间：2012-05-08T14:29:43.827
> 
> 标签：c#, regex, linq

你好，我有一个长字符串。我想将其拆分为具有许多返回carrages的某种格式。每行有5个简短的单词。前任。

`string input="'250.0','250.00','250.01','250.02','250.03','250.1','250.10','250.11','250.12','250.13','250.2','250.20','250.21','250.22','250.23','250.3','250.30','250.31','250.32','250.33','250.4','250.40','250.41','250.42','250.43','250.5','250.50','250.51','250.52','250.53','250.6','250.60','250.61','250.62','250.63','250.7','250.70','250.71','250.72','250.73','250.8','250.80','250.81','250.82','250.83','250.9','250.90','250.91','250.92','250.93','357.2','357.20','362.01','362.02','362.03','362.04','362.05','362.06','362.07','366.41','648.0','648.00','648.01','648.02','648.03','648.04'";`

它有66个短字。

```
string output = "'250.0','250.00','250.01','250.02','250.03',
                 '250.1','250.10','250.11','250.12','250.13',
                 '250.2','250.20','250.21','250.22','250.23',
                 '250.3','250.30','250.31','250.32','250.33',
                 '250.4','250.40','250.41','250.42','250.43',
                 '250.5','250.50','250.51','250.52','250.53',
                 '250.6','250.60','250.61','250.62','250.63',
                 '250.7','250.70','250.71','250.72','250.73',
                 '250.8','250.80','250.81','250.82','250.83',
                 '250.9','250.90','250.91','250.92','250.93',
                 '357.2','357.20','362.01','362.02','362.03',
                 '362.04','362.05','362.06','362.07','366.41',
                 '648.0','648.00','648.01','648.02','648.03',
                 '648.04'"; 
```

我认为我必须首先在字符串中计算 char ',' ，例如在[示例](http://www.dotnetperls.com/count-characters)中。但这可能有点笨拙。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:31:32.497

如果我对你的理解正确，你想

*   用逗号分隔这些词
*   将结果分组为每行包含 5 个单词的行
*   `Environment.NewLine`用as 分隔符构建一个字符串

* * *

```
string input = "'250.0','250.00','250.01','250.02','250.03','250.1','250.10','250.11','250.12','250.13','250.2','250.20','250.21','250.22','250.23','250.3','250.30','250.31','250.32','250.33','250.4','250.40','250.41','250.42','250.43','250.5','250.50','250.51','250.52','250.53','250.6','250.60','250.61','250.62','250.63','250.7','250.70','250.71','250.72','250.73','250.8','250.80','250.81','250.82','250.83','250.9','250.90','250.91','250.92','250.93','357.2','357.20','362.01','362.02','362.03','362.04','362.05','362.06','362.07','366.41','648.0','648.00','648.01','648.02','648.03','648.04'";
int groupCount = 5; 
var linesGroups = input.Split(',')
    .Select((s, index) => new { str = s, Position = index / groupCount, Index = index })
    .GroupBy(x => x.Position);

StringBuilder outputBuilder = new StringBuilder();
foreach (var grp in linesGroups)
{
    outputBuilder.AppendLine(String.Join(",", grp.Select(x => x.str)));
}
String output = outputBuilder.ToString(); 
```

**编辑**：结果是：

```
'250.0','250.00','250.01','250.02','250.03'
'250.1','250.10','250.11','250.12','250.13'
'250.2','250.20','250.21','250.22','250.23'
'250.3','250.30','250.31','250.32','250.33'
'250.4','250.40','250.41','250.42','250.43'
'250.5','250.50','250.51','250.52','250.53'
'250.6','250.60','250.61','250.62','250.63'
'250.7','250.70','250.71','250.72','250.73'
'250.8','250.80','250.81','250.82','250.83'
'250.9','250.90','250.91','250.92','250.93'
'357.2','357.20','362.01','362.02','362.03'
'362.04','362.05','362.06','362.07','366.41'
'648.0','648.00','648.01','648.02','648.03'
'648.04' 
```

如果你想用逗号附加每一行（如你的例子）：

```
foreach (var grp in linesGroups)
{
    outputBuilder.AppendLine(String.Join(",", grp.Select(x => x.str)) + ",");
}
// remove last comma + Environment.NewLine
outputBuilder.Length -= ( 1 + Environment.NewLine.Length ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:35:37.360

最简单的方法是遵循@Tim 的已删除（编辑：不再删除）答案中的方法：

1.  用逗号将字符串分成几部分（使用`string.Split`）
2.  以您需要的任何方式重新排列获得的零件：例如，将 5 个包装成一行。

类似的东西（未测试）：

```
Console.WriteLine("string output =");
var parts = sourceString.Split(',');
int i = 0;
for (; i < parts.Length; i++)
{
    if (i % 5 == 0)
        Console.Write('    "');
    Console.Write(parts[i]);
    Console.Write(',');
    if (i % 5 == 4 && i != parts.Length - 1)
        Console.WriteLine('" +');
}
Console.WriteLine('";'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T14:36:21.887

做这样的事情：

```
string[] words = input.Split(','); 
int wordsInString = words.Length; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T14:43:15.597

```
var input="'250.0','250.00','250.01','250.02','250.03','250.1','250.10','250.11','250.12','250.13','250.2','250.20','250.21','250.22','250.23','250.3','250.30','250.31','250.32','250.33','250.4','250.40','250.41','250.42','250.43','250.5','250.50','250.51','250.52','250.53','250.6','250.60','250.61','250.62','250.63','250.7','250.70','250.71','250.72','250.73','250.8','250.80','250.81','250.82','250.83','250.9','250.90','250.91','250.92','250.93','357.2','357.20','362.01','362.02','362.03','362.04','362.05','362.06','362.07','366.41','648.0','648.00','648.01','648.02','648.03','648.04'";

var wordsArray = input.Split(',');
var sbOutput = new StringBuilder();

for (int i = 1; i < wordsArray.Length +1; i++)
{
    sbOutput.AppendFormat("{0},", wordsArray[i-1]);

    if(i % 5 == 0)
        sbOutput.AppendLine();
}

var output = sbOutput.ToString(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T15:01:06.817

这个解决方案怎么样：

```
private static IEnumerable<string> SplitLongString(string input, char separator, int groupSize)
{
    int indexCurrent = 0;
    int indexLastOccurence = 0;
    int separatorCounter = 0;

    foreach (var character in input)
    {
        indexCurrent++;

        if (character == separator)
        {
            separatorCounter++;

            if (separatorCounter % groupSize == 0)
            {
                yield return input.Substring(indexLastOccurence, indexCurrent - indexLastOccurence);
                indexLastOccurence = indexCurrent;
            }
        }
    }

    if (indexCurrent != indexLastOccurence)
    {
        yield return input.Substring(indexLastOccurence, indexCurrent - indexLastOccurence);
    }
} 
```

你会称之为：

```
var result = SplitLongString(input, ',', 5);

foreach (var row in result)
{
    Console.WriteLine(row);
} 
```

# perl - Perl 从脚本转换为模块的设计思路

> ID：10500627
> 
> 赞同：2
> 
> 时间：2012-05-08T14:29:46.847
> 
> 标签：perl, module

我有一个脚本，我想将其转换为模块并从 Perl 脚本调用它的函数，就像我现在对 CPAN 模块所做的那样。我的问题是其他人将如何设计模块，我想知道如何进行，因为我以前从未编写过模块。现在编写的脚本执行以下操作：

1) 使用 am in house 模块设置日志记录到数据库 2) 使用 DBI 建立与数据库的连接 3) 使用 Net::SFTP:Foreign 从远程服务器获取文件 4) 处理每个文件中的用户并将数据添加到数据库

该脚本当前采用命令行选项来使用 Getopt::Long 覆盖默认值。

每个文件都是一个管道分隔的用户数据集合，大约 4000 行，如果用户在我们的 LDAP 目录中有一个条目，它会进入数据库。

更重要的是：我应该如何设计我的模块？是否应该将我的脚本当前所做的*所有内容都*移到模块中，或者是否有一些最好留在脚本中的东西。例如，我正在考虑设计我的模块，所以它会被这样调用：

```
use MyModule;

$obj = MyModule->new; // possibly pass some arguments

$obj->setupLogging;

$obj->connectToDB;

$obj->fetchFiles;

$obj->processUsers; 
```

这将使脚本保持整洁，但这是模块的最佳主意吗？我正在考虑让脚本检索文件，然后将路径传递给模块进行处理。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:38:56.423

我认为最有用的问题是“这段代码中有哪些可以被多个脚本使用？” 整个事情肯定不会。我很少创建 perl 模块，直到我发现自己不止一次地编写同一个子例程。

在那个阶段，我通常将它转储到一个名为“Utility.pm”的东西中，直到收集到足够的代码，模式（实际上不是四种意义上的）开始建议什么属于具有明确定义的职责的模块。

您需要考虑的另一件事是您的模块是要表示一个对象类还是要成为库子例程的集合。

在您的示例中，我可以看到属于外部模块的日志记录和数据库连接管理（尽管我可能会使用 DBI）。

但是将所有内容放在那里只会给您留下一个名为“MyModule::DoStuff”的五行脚本，这没什么用处。

大多数时候 ;）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:21:32.587

> “这是模块的最佳主意吗？我正在考虑让脚本检索文件，然后将路径传递给模块进行处理。”

在我看来，它是一个不错的设计。我也同意您不应该在模块中硬编码路径（或 URL），但我对*“让脚本检索文件然后将路径传递给模块进行处理”的*含义有点困惑：你的意思是，脚本会将它们写入磁盘吗？为什么要这样做？相反，如果有意义，请`fetchFile(URL)`检索单个文件并返回适合提交到的引用/句柄/对象`processUsers`，因此逻辑如下：

```
my @FileUrls = ( ... );

foreach (@FileUrls) {
    my $file = $obj->fetchFile($_);
    $obj->processUsers($file);
} 
```

虽然，如果 fetchFile 的目的只是为了获取一些原始文本，您可能希望使该函数独立于数据库类——或者是脚本的一部分，或者是另一个模块。

如果您想要写入磁盘的原因是您不希望一次将整个文件加载到内存中，您可能需要调整所有内容以处理文件块，这样您就可以拥有一种用于获取文件的对象通过套接字并在将块读取到另一种对象（添加到数据库的过程）时输出块。在这种情况下：

```
my $db = DBmodule->new(...);
my $netfiles = NetworkFileReader->new(...)

foreach (@FileUrls) {
    $netfiles->connect($_);
    $db->newfile();  # initialize/reset
    while (my $chunk = $netfiles->more()) {
        $db->process($chunk);
    }
    $db->complete();
    $netfiles->close();
} 
```

或者，如果您认为它更合适且不太可能用于通用目的，则将块读取合并到 db 类中。

# facebook-graph-api - 应用程序令牌不同

> ID：10500630
> 
> 赞同：0
> 
> 时间：2012-05-08T14:30:01.683
> 
> 标签：facebook-graph-api

在本页面：

[http://developers.facebook.com/docs/opengraph/using-app-tokens/](http://developers.facebook.com/docs/opengraph/using-app-tokens/)

它描述了如何获取应用程序访问令牌，但它返回的令牌与开放图“获取代码”示例中的令牌不同。后者是唯一有效的。如何使用 API 获取第二个访问令牌？当我尝试使用第一个示例时，我基本上得到了一些看起来像“应用程序 ID|秘密密钥”的东西，它与真正的访问令牌不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T20:58:10.983

如文档所述，您将获得

```
access_token=YOUR_APP_ACCESS_TOKEN 
```

从 API 调用返回的字符串。尽管它看起来像“应用程序 ID|秘密密钥哈希” - 它是一个有效的访问令牌，您可以使用它来发布到用户的墙上。您可以使用 FB 的 Debug toll 验证它是正确的访问令牌：[https](https://developers.facebook.com/tools/debug) ://developers.facebook.com/tools/debug - 只需将令牌粘贴到那里。

它可能对您不起作用的原因是因为您试图将某些内容发布到未授权您的应用的用户的墙上。看这里：[https](https://developers.facebook.com/docs/reference/javascript/) ://developers.facebook.com/docs/reference/javascript/ - 例如如何使用您的应用程序 ID 使用户授权应用程序。您需要向用户请求您的应用程序的**publish_stream**权限，以便能够作为应用程序发布到用户的墙上。

回到[文档](http://developers.facebook.com/docs/opengraph/using-app-tokens/)：

> 请注意，应用程序访问令牌用于发布操作和发布流权限允许的发布目的。您将无法使用应用访问令牌检索有关具有给定 ID 的状态更新帖子的信息。相反，您应该为此目的使用用户访问令牌。

希望有帮助。

# ios - 如何在 iTunes 中从我的应用程序“告诉朋友”功能打开

> ID：10500633
> 
> 赞同：2
> 
> 时间：2012-05-08T14:30:07.433
> 
> 标签：ios, iphone, itunes

我想知道，如果可以通过代码打开 iTunes 功能“告诉朋友”，通过邮件链接和我的应用程序在 iTunes 中的照片发送。

如果不可能，我认为唯一的方法是使用**MFMailComposeViewControllerDelegate**并创建自制邮件......但是很难将图像包含到邮件中......

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:39:26.720

您可以使用 MFMailComposeViewController 并只制作基于 html 的消息，您不附加图像而是将其托管在服务器上或使用 iTunes 托管的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:38:58.067

是的，您只能通过邮件执行此操作，并且图像也不难，只需使用 MFMailComposer 的此消息将图像与邮件附加

```
- (void)addAttachmentData:(NSData *)attachment mimeType:(NSString *)mimeType fileName:(NSString *)filename 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T11:53:58.307

我正在寻找类似的东西，我找到了“iTellAfriend”类。这个对我有用。

[从github/iTellafriend](https://github.com/aporat/iTellAFriend)下载此源代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T14:40:03.337

您可以使用：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:URL_HERE]]; 
```

指定出现 URL_HERE 的 iTunes url，当执行该代码时，Safari 将打开指向 iTunes 页面。

# c# - 使用 JSON.Net CustomCreationConverter

> ID：10500635
> 
> 赞同：2
> 
> 时间：2012-05-08T14:30:13.060
> 
> 标签：c#, asp.net, json, json.net, deserialization

我正在尝试以这种格式反序列化 JSON：

```
{
   "data": [
      {
         "installed": 1,
         "user_likes": 1,
         "user_education_history": 1,
         "friends_education_history": 1,
         "bookmarked": 1
      }
   ]
} 
```

像这样的简单字典：

```
{
    "installed": true,
    "user_likes": true,
    "user_education_history": true,
    "friends_education_history": true,
    "bookmarked": true
} 
```

使用`CustomCreationConverter`in `JSON.NET 4.0`。

我收到错误消息，说我只能反序列化为数组。它是否正确？如何“强制”它创建字典？我需要创建一个自定义类吗？

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2012-05-26T11:33:26.040

尝试一下：

```
var convert = function(obj){
    var newObj = {};
    for(var prop in obj.data[0])
        newObj[prop] = obj.data[0][prop];
    return newObj;
}
convert({
    "data": [
        {
            "installed": 1,
            "user_likes": 1,
            "user_education_history": 1,
            "friends_education_history": 1,
            "bookmarked": 1
        }
    ]
}); 
```

# cruisecontrol.net - 条件参数

> ID：10500638
> 
> 赞同：0
> 
> 时间：2012-05-08T14:30:18.440
> 
> 标签：cruisecontrol.net, cruisecontrol

有没有办法在巡航控制.net 中使用条件参数。

我希望如果用户从选择参数（下拉）Dev 中进行选择，那么如果测试，我将显示两个文本框，然后显示一个文本框，具体取决于条件。

请给我任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:54:46.770

实现这一目标的最佳（并且仅据我所知）方法是构建您自己的 CCTray 自定义版本，源代码可在此处免费获得[https://github.com/ccnet/CruiseControl.NET](https://github.com/ccnet/CruiseControl.NET)。

# asp.net-mvc - 如何从 MVC3 中的下拉列表中获取选定的值

> ID：10500642
> 
> 赞同：0
> 
> 时间：2012-05-08T14:30:31.317
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

这听起来很简单，但我遇到了一个非常奇怪的问题。

我在我的应用程序中创建了下拉列表，但无法在编辑时获取选定的值。

这是我的观点：

```
<div class="editor-field">
      @Html.DropDownListFor(model => model.Hobbyhome.HobbyHomeAddressList.First().ProvincialState.ProvincialStateID, new SelectList(ViewBag.State, "ProvincialStateID", "ProvincialStateName"), "-----Select State-----", new { @id = "State" })<font color="red">*</font> 
      </div> 
```

我在控制器中编写了一个函数来获取值，我也能够获取值，但是当它进入 View 时，它不会显示我
创建的另一个下拉列表的值，如下所示：

```
 @Html.DropDownListFor(model => model.Hobbydetail.Hobbymaster.HobbyId, new SelectList(ViewBag.Hobby, "HobbyId", "HobbyName"), "----Select Hobby----", new { @id = "Hobby" })<font color="red">*</font> 
```

奇怪的是我可以看到第二个下拉列表的值，但看不到第一个下拉列表的值
我认为可能是因为我在第一个下拉列表中使用了**list.First()**，所以它给出了这个问题 bcoz 在编辑视图页面上仅向我显示“-----Select State--”作为第一个下拉列表的值。
请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:36:06.313

要在编辑视图中获取“选定的值对象”：

```
@Html.DropDownListFor(model => model.Hobbydetail.Hobbymaster.HobbyId, 
    new SelectList(ViewBag.Hobby, "HobbyId", "HobbyName", Model.Hobbydetail.Hobbymaster.HobbyId),
    "----Select Hobby----", new { @id = "Hobby" }) 
```

要在 DropDown 中包含所有元素，请确保您的 ViewBag.Hobby 已初始化并在显示编辑视图之前填充到您的控制器中！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:40:24.763

`First()`方法返回序列的第一个元素。如果源序列为空，它会抛出异常。

**为什么你需要在那里使用 First() ？**我认为你做错了。你的第一个参数`DropDownListFor`应该是一个保存所选值的变量，在你使用的这个特殊的重载中。

```
public static MvcHtmlString DropDownList(
    this HtmlHelper htmlHelper,
    string name,
    IEnumerable<SelectListItem> selectList,
    IDictionary<string, Object> htmlAttributes
) 
```

> **name**：要返回的表单字段的名称。

您应该使用第二种方法

我会制作一个干净的 ViewModel 来处理这个问题。**这使我的 Views Clean**。

```
public class AddHobbyViewModel
{
  public int SelectedHobbyId { set;get;}
  public IEnumerable<Hobby> Hobbys { set;get;}
  //other relevant properties for the View.  
} 
```

在 GET 操作方法中，我不会在 ViewBag 中返回数据，而是在 ViewModel 中返​​回它。

```
public ActionResult Add()
{
  AddHobbyViewModel model=new AddHobbyViewModel ();
  model.Hobbys=db.Hobbies();  // get all available hobbies.

  return View(model);
} 
```

在视图中，

```
 @Html.DropDownListFor(model => SelectedHobbyId , new SelectList(Hobbys , "HobbyId", "HobbyName"), "----Select Hobby----", new { @id = "Hobby" }) 
```

现在，您将在 SelectedHobbyId 属性的 httppost 方法中使用选定的值

```
[HttpPost]
public ActionResult Add(AddHobbyViewModel model)
{
  // check model.SelectedHobbyId here
} 
```

# salesforce - 在 Salesforce 沙盒 API 中看不到自定义对象？

> ID：10500643
> 
> 赞同：2
> 
> 时间：2012-05-08T14:30:33.800
> 
> 标签：salesforce

我创建了一个沙盒并安装了一个应用程序来测试我们的 Enterprise Salesforce 解决方案。但是，在 API 中，进行`describeGlobal()`调用不会列出新对象。我猜它与权限相关，但我找不到设置。这是我检查过的内容：

*   执行 API 查询的用户的配置文件为“系统管理员”（设置 > 管理用户 > 配置文件 > 系统管理员 > 分配的用户）
*   系统管理员配置文件对尝试查询的对象具有“读取、创建、编辑、删除、查看全部、修改全部”权限（设置 > 管理用户 > 配置文件 > 系统管理员 > 对象和选项卡）
*   对象本身已“部署”（设置 > 创建 > 对象）
*   已安装的软件包具有不受限制的 API 访问权限（设置 > 已安装的软件包）
*   在正常的 Salesforce CRM Web 界面中，用户有权查看和编辑这些对象。
*   使用创建自定义对象后下载的 Enterprise WSDL；

我缺少一些“在 API 中公开此对象”按钮吗？还是因为这些自定义对象是在沙箱中创建的，所以会搞砸？创建沙盒时已在生产中安装的应用程序创建的自定义对象可以正常访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:23:27.467

我只能从 .NET 的角度发言。对 SF 的任何更改都需要再次重新下载 Enterprise WSDL 并刷新 Web 服务。如果可以访问较旧的对象，那么听起来服务需要使用新的 wsdl 进行更新。

# sql - 内连接没有重复，有可能吗？

> ID：10500644
> 
> 赞同：4
> 
> 时间：2012-05-08T14:30:37.140
> 
> 标签：sql

给定这两个表，表 A1 有两行具有相同的值“a”

```
A1
一个
一个

```

表 A2 有两行，主键值为 A，B，它们与“a”相关联

```
A2
PK col2
一个
乙

```

我想要的是 A1 和 A2 与这个结果的连接

```
一个
乙

```

显然内部连接在这里不起作用。有没有办法在 SQL Server 2008 中做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T14:36:54.147

您可以使用清除重复项`DISTINCT`

```
select distinct
  A1.col1,
  A2.PK
from
  A1
  inner join A2
          on A1.col1 = A2.col2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:37:14.140

如果`distinct`不受限制

```
SELECT DISTINCT a.*, b.pk
FROM    A1 a
INNER JOIN A2 b ON (a.[test] = b.fk) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T14:36:36.693

帖子中没有加入条件，所以我们需要进行交叉加入。我已应用交叉连接并使用 distinct 限制重复值。

```
Select distinct A1.Col1, A2.Pk
From A1 ,A2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-27T04:26:58.347

“并使用 distinct 限制重复值。” 至少在 Postgres 9+ DISTINCT 中消除了现有的重复项，但不阻止或限制其出现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-14T11:02:41.550

```
SELECT DISTINCT A.* 
FROM aTable AS A 
     INNER JOIN 
     bTable AS B USING(columnId) 
```

# asp.net - Devexpress ASPxGridView 新行已禁用

> ID：10500645
> 
> 赞同：0
> 
> 时间：2012-05-08T14:30:42.617
> 
> 标签：asp.net, xml, select, devexpress, aspxgridview

我用 devexpress ASPxGridView 有这样的代码。一切顺利，但是当我尝试添加新行时，新行的文本框被禁用......我设置了 KeyFieldName。

```
 void BindGrid()
    {
       var AnnObj = SearchBarBanners.Select(i => new
        {
            Caption = i.Attribute("caption").Value,
            ID = i.Attribute("id").Value, // this is generated by Guid
        }).ToList();
        ImagesGrid.DataSource = AnnObj;
        ImagesGrid.DataBind();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:56:51.540

使用[**Q392961**](http://www.devexpress.com/Support/Center/p/Q392961.aspx) DX 文章中的建议来解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:39:55.680

我可以建议您在没有网格标记的情况下做两件事：
1.[在 Page_Init 中调用 BindGrid 方法](http://www.devexpress.com/Support/Center/kb/p/K18282.aspx)
2\. 如果您的数据源最初返回零行，网格将无法确定将在网格中呈现的对象的类型。您需要使用[ASPxGridView.ForceDataRowType](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_ForceDataRowTypetopic)来解决这个问题。

# ruby-on-rails-3 - 跟踪用户登录日期和 IP 历史记录的有效方法

> ID：10500653
> 
> 赞同：6
> 
> 时间：2012-05-08T14:30:58.393
> 
> 标签：ruby-on-rails-3, devise

我正在尝试出于统计目的跟踪用户登录历史记录，但我不清楚最好的方法是什么。我可以有一个单独的表来记录用户和他们的登录统计信息，但该表可能会变得非常大。我可以在可解析字段中跟踪用户模型/对象本身中的一些历史字段，并使用一些分隔字符串格式更新它（它们）。例如拆分：，获取最后一个，如果包含的日期代码不是今天，则添加一个项目（日期+计数），否则递增，然后将其保存回来。至少使用第二种方法很容易删除旧项目（例如，只保留 30 天的每日登录或 IP），因为单独的表需要删除旧记录的任务。

我是即时变化的忠实粉丝。任务很有用，但出于维护原因可能会使事情复杂化。

有人有什么建议吗？我还没有外部数据缓存解决方案或任何东西。也欢迎任何指点！（我一直在寻找类似的问题和答案）

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-29T00:56:06.840

如果你有 :trackable 模块，我发现这是最简单的方法。在用户模型中（或您正在验证的任何模型）

```
 def update_tracked_fields!(request)
    old_signin = self.last_sign_in_at
    super
    if self.last_sign_in_at != old_signin
      Audit.create :user => self, :action => "login", :ip => self.last_sign_in_ip
    end
  end 
```

（灵感来自[https://github.com/plataformatec/devise/wiki/How-To:-Turn-off-trackable-for-admin-users](https://github.com/plataformatec/devise/wiki/How-To:-Turn-off-trackable-for-admin-users)）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T14:58:02.823

通过 Devise 有一个很好的方法来做到这一点。

Warden 设置了一个名为 after_set_user 的钩子，该钩子在设置用户后运行。因此，假设您有一个包含 ip 字段、logged_in_at 字段和 user_id 字段的模型登录，您只能使用此字段创建记录。

```
Warden::Manager.after_set_user :except => :fetch do |record, warden, options|
  Login.create!(:ip => warden.request.ip, :logged_in_at => Time.now, :user_id => record.id)
end 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-24T20:21:53.467

基于[@user208769 的回答](https://stackoverflow.com/a/20276850/107277)，核心`Devise::Models::Trackable#update_tracked_fields!`方法现在调用一个`update_tracked_fields`在保存之前命名的辅助方法。这意味着您可以使用`ActiveRecord::Dirty`帮助程序使其更简单：

```
def update_tracked_fields(request)
  super

  if last_sign_in_at_changed?
    Audit.create(user: self, action: 'login', ip: last_sign_in_ip)
  end
end 
```

`audits`如果您的模型有关系，则可以进一步简化（并且在给定验证的情况下更可靠） ：

```
def update_tracked_fields(request)
  super
  audits.build(action: 'login', ip: last_sign_in_ip) if last_sign_in_at_changed?
end 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-17T00:38:38.830

Devise 支持使用其`:trackable`模块跟踪上次登录日期和上次登录 IP 地址。通过将此模块添加到您的用户模型，然后还将正确的字段添加到您的数据库中，它们是：

```
:sign_in_count,      :type => Integer, :default => 0
:current_sign_in_at, :type => Time
:last_sign_in_at,    :type => Time
:current_sign_in_ip, :type => String
:last_sign_in_ip,    :type => String 
```

然后，您可以覆盖`Devise::SessionsController`and 它的`create`操作，然后在回调中将`:last_sign_in_at`and保存`:last_sign_in_ip`到单独的表中。`before_create`然后，您应该能够随心所欲地保留它们。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-08T15:19:07.947

这是一个示例（scribd_analytics）

```
create_table 'page_views' do |t|
  t.column 'user_id', :integer 
  t.column 'request_url', :string, :limit => 200
  t.column 'session', :string, :limit => 32
  t.column 'ip_address', :string, :limit => 16
  t.column 'referer', :string, :limit => 200
  t.column 'user_agent', :string, :limit => 200
  t.column 'created_at', :timestamp
end 
```

> 添加一大堆索引，具体取决于查询
> 
> 在每个请求上创建一个 PageView
> 
> 我们使用手动构建的 SQL 查询来消除 ActiveRecord 开销
> 
> 可能会尝试 MySQL 的“插入延迟”
> 
> 分析查询通常是手工编码的 SQL
> 
> 使用“解释选择”来确保 MySQL 正在使用您期望的索引
> 
> 规模相当不错
> 
> 但是分析查询很昂贵，可能会阻塞上游数据库服务器
> 
> **我们的解决方案：**
> 
> ```
> use two DB servers in a master/slave setup
> 
> move all the analytics queries to the slave 
> ```

[http://www.scribd.com/doc/49575/Scaling-Rails-Presentation-From-Scribd-Launch](http://www.scribd.com/doc/49575/Scaling-Rails-Presentation-From-Scribd-Launch)

* * *

另一个检查选项是带有 Google Analytics 的 Gattica

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-09T21:01:55.353

我讨厌回答我自己的问题，尤其是考虑到你们都给出了有用的答案。我认为用我采取的方法回答我的问题可能会帮助其他人，结合你的答案。

到目前为止，我一直在使用[Impressionist](https://github.com/charlotte-ruby/impressionist) Gem（自废弃 RailStat 以来唯一有用的页面视图 Gem）并取得了不错的效果。在设置了基本迁移之后，我发现预期的用法非常接近 Rail 的 MVC 设计。如果您将“印象派”添加到控制器，它将在将页面视图记录到数据库时寻找模型。如果您像我一样并且碰巧在没有模型的控制器上对其进行测试，您可以修改此行为，或者只是在您的控制器（或任何地方）中自己调用印象派。

无论如何，我通过重写 Devise::SessionsController 并仅调用 @current_member 的印象派方法来使用 Devise 跟踪成功登录：（不要忘记检查它是否为 nil！登录失败）

```
class TestSessionController < Devise::SessionsController
  def create
    if not @current_member.nil?
      impressionist(@current_member)
    end
    super
  end
end 
```

稍后将其添加到其他站点部分以进行一些有限的分析很容易。我唯一要做的另一件事是更新我的路由以使用新的 TestSessionController 作为 Devise 登录路由：

```
post 'login' => 'test_session#create', :as => :member_session 
```

Devise 可以正常工作，而无需以任何方式修改 Devise，并且我的印象派数据库表已编入索引并记录登录。稍后我只需要一个 rake 任务来每周左右修剪它。

现在我只需要弄清楚如何绘制每日登录图表，而不必编写一堆循环的脏查询......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-16T21:17:11.747

还有['paper_trail' gem](https://github.com/airblade/paper_trail)，允许跟踪模型更改。

# objective-c - 醒来后 NSDate 日期不返回当前日期和时间

> ID：10500660
> 
> 赞同：0
> 
> 时间：2012-05-08T14:31:31.820
> 
> 标签：objective-c, ios

我注意到 [NSDate date] 从睡眠中醒来后不久就会返回旧日期和时间。我找不到有关此规范的任何信息，或者如何在醒来后刷新当前日期和时间。

有没有人有关于这种行为的任何信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:39:19.680

您是否保存`NSDate`在 ivar 中并在应用程序重新启动后检查它？如果是这种情况，那将是旧日期。

您可以重新初始化 ivar on `viewWillAppear`，或者在您的`AppDelegate`. 或者，您也可以将其设置为`nil`退出时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:09:10.183

也许尝试处理[`applicationSignificantTimeChange:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/applicationSignificantTimeChange%3a)应用程序委托方法或[`UIApplicationSignificantTimeChangeNotification`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIApplication_Class/Reference/Reference.html#//apple_ref/c/data/UIApplicationSignificantTimeChangeNotification)通知。

从`applicationSignificantTimeChange:`文档中：

> 如果您的应用程序当前处于挂起状态，则此消息将排队等待您的应用程序返回到前台，此时它会被传递。如果发生多个时间更改，则仅传送最近的一个。

可能您必须等到此时才能从 NSDate 类中获取准确的数据。您的视图可能加载得太早了。

然而，做这种事情可能会更好`viewWillAppear:`，我有一种感觉，如果你这样做，你可以避免处理重大的时间变化事件。

# sql - oracle 触发错误 ORA-01427 和错误 ORA-04091

> ID：10500663
> 
> 赞同：0
> 
> 时间：2012-05-08T14:31:39.433
> 
> 标签：sql, oracle, triggers, oracle10g

我有以下表格：

**教员表**

```
CREATE TABLE  "FACULTY" 
   (    "FACULTY_ID" NUMBER(3,0), 
    "FACULTY_NAME" VARCHAR2(30), 
    "FACULTY_DEAN" VARCHAR2(30), 
     CONSTRAINT "FACULTY_PK" PRIMARY KEY ("FACULTY_ID") ENABLE
   ) 
```

**课程表**

```
CREATE TABLE  "COURSE" 
   (    "COURSE_ID" NUMBER(5,0), 
    "COURSE_NAME" VARCHAR2(50), 
    "COURSE_LEVEL" NUMBER, 
    "FACULTY" NUMBER, 
     CONSTRAINT "COURSE_PK" PRIMARY KEY ("COURSE_ID") ENABLE
   ) 
```

所以现在我想实现两件事

(1) 当faculty_id 在faculty 表上更新时。触发器将触发并使用新的faculty_id 更新课程表中的相应行。它还将在 course_log 表中存储旧的 Faculty_id 值、课程名称和执行操作的日期。

下面是我得到的

```
create or replace trigger update_faculty
after update on faculty
for each row
begin
   insert into course_log 
     values (:old.faculty_id, 
             (select course_name 
                from course 
               where faculty=:old.faculty_id),
             sysdate);
   update course 
      set faculty=:new.faculty_id 
    where faculty=:old.faculty_id;
end; 
```

但我收到以下错误。

> 错误 ORA-01427：单行子查询返回多于一行 ORA-06512：在“SYSTEM.UPDATE_FACULTY”，第 2 行 ORA-04088：执行触发器 'SYSTEM.UPDATE_FACULTY' 期间出错

关于如何解决它的任何想法？

(2) 编写一个触发器，当尝试更改课程表中的 course_id 属性时触发，该触发器将检查该值是否已存在于课程表中，如果是新值则更新成功。如果该值已存在于任何行中，则触发器将引发应用程序错误，提示“课程 ID 已存在！更新不成功。”

以下是我的查询

```
CREATE OR REPLACE TRIGGER  "UPDATE_COURSE_ID" 
after update on course
for each row
declare 
    error number;
begin
    select count(*) 
      into error 
    from course
    where course_id=:new.course_id;

    if error > 0 then
        raise_application_error (-20000,'The course_id already found! Update not success'); 
    end if;
    if error = 0 then
        update course set course_id=:new.course_id where course_id=:old.course_id;
    end if;
end; 
```

但我得到了这个错误

> 错误 ORA-04091：表 SYSTEM.COURSE 正在变异，触发器/函数可能看不到它 ORA-06512：在“SYSTEM.UPDATE_COURSE_ID”，第 5 行 ORA-04088：执行触发器 'SYSTEM.UPDATE_COURSE_ID' 期间出错

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:57:14.560

对于第一个问题，由于您可能希望在表中插入多行`course_log`，因此您需要执行类似的操作

```
create or replace trigger update_faculty
  after update on faculty
  for each row
begin
   -- I'm guessing about the definition of the course_log table
   insert into course_log( faculty_id, course_name, log_date ) 
     select :old.faculty_id, course_name, sysdate
       from course 
      where faculty=:old.faculty_id;

   update course 
      set faculty=:new.faculty_id 
    where faculty=:old.faculty_id;
end; 
```

对于第二个问题，使用触发器是没有意义的。您想使用约束。而且您已经有一个主键约束`course_id`，`course`其中已经防止重复`course_id`值。

用触发器强制执行这种事情是一个非常糟糕的主意。由于行级触发器`course`无法查询`course`表（如果您的插入语句始终为单行形式`INSERT ... VALUES`或使用自治事务的触发器，则行级插入触发器除外，这两种情况都不适用）。因此，如果您真的想使用触发器执行此操作，您需要创建一个包含`course_id`值集合的包、一个用于初始化集合的 before 语句触发器、一个`:new.course_id`将遍历集合并查找重复的语句触发器`course_id`价值观。这是很多对象要做的事情，这些事情一开始就不应该用触发器来做，而且你的约束已经在做这些事情了。如果您只是在学习触发器，我猜您还没有学习过包或集合，这使得解决方案更加不合适。

# iphone - Availability.h 类宏

> ID：10500673
> 
> 赞同：2
> 
> 时间：2012-05-08T14:32:16.713
> 
> 标签：iphone, ios, objective-c, cocoa

是否可以有一个自定义可用性宏，例如 __OSX_AVAILABLE_STARTING。我需要它以相同的方式执行，我只需要更改它的名称以及参数的版本和数量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T06:26:22.343

是的，当然了。Objective-C 是 C 的严格超集，因此 C 宏非常任您使用，而该工具只是一组 C 宏，最终扩展为 [gcc 的`__attribute__`关键字以声明函数的特殊属性](http://gcc.gnu.org/onlinedocs/gcc-4.0.0/gcc/Function-Attributes.html)。

相关声明都在

*   [`Availability.h`](http://opensource.apple.com/source/CarbonHeaders/CarbonHeaders-18.1/Availability.h)
*   [`AvailabilityInternal.h`](http://opensource.apple.com/source/CarbonHeaders/CarbonHeaders-18.1/AvailabilityInternal.h)

要刷新，您可以使用`__OSX_AVAILABLE_STARTING`宏将函数声明标记为特定版本支持，如下所示：

```
extern void mymacfunc() __OSX_AVAILABLE_STARTING(__MAC_10_5,__IPHONE_NA); 
```

那么我们自己需要什么来实现呢？如果您剥离他们对两种不同操作系统（mac、iphone）的支持，可用性工具可以归结为：

1.  一个接受版本参数的宏，例如`__MY_AVAILABLE_STARTING(<version>)`：

    ```
    #define __MY_AVAILABLE_STARTING(_myversion) __MY_AVAILABILITY_INTERNAL##_myversion 
    ```

2.  一组版本参数，如 中的那些`Availability.h`，它们是上述的有效参数：

    ```
    #define __MYVER_2_0     20000  
    #define __MYVER_2_1     20100  
    #define __MYVER_2_2     20200  
    #define __MYVER_3_0     30000 
    ```

3.  另一组宏，例如`AvailabilityInternal.h`指定每个版本应该发生的事情（常规支持、已弃用、不可用、弱等）。同样，这是编译器的一个功能，请参阅[`gcc docs`](http://gcc.gnu.org/onlinedocs/gcc-4.0.0/gcc/Function-Attributes.html)（还有很多其他有趣的选项）：

    ```
    #define __MY_AVAILABILITY_INTERNAL__MYVER_2_0 __AVAILABILITY_INTERNAL_UNAVAILABLE
    #define __MY_AVAILABILITY_INTERNAL__MYVER_2_1 __AVAILABILITY_INTERNAL_WEAK_IMPORT
    #define __MY_AVAILABILITY_INTERNAL__MYVER_2_1 __AVAILABILITY_INTERNAL_REGULAR 
    ```

4.  最后，在降压结束的地方，扩展到`__attribute__`设施的宏。

    对于我上面的那些，你可以继续使用苹果的宏：

    ```
    #define __AVAILABILITY_INTERNAL_DEPRECATED         __attribute__((deprecated,visibility("default")))
    #define __AVAILABILITY_INTERNAL_UNAVAILABLE        __attribute__((unavailable,visibility("default")))
    #define __AVAILABILITY_INTERNAL_WEAK_IMPORT        __attribute__((weak_import,visibility("default")))
    #define __AVAILABILITY_INTERNAL_REGULAR            __attribute__((visibility("default"))) 
    ```

    或者，当然，你可以定义你自己的疯狂。

C 宏是强大的东西，但经常被忽视。祝你好运！

# c# - 相互干扰的两个 MDI 子窗体

> ID：10500674
> 
> 赞同：0
> 
> 时间：2012-05-08T14:32:24.477
> 
> 标签：c#, animation, mdichild

我正在用 C# 编写一个 MDI 应用程序，其中包含两个通过 DLL 引用的子窗体（添加到引用的独立项目）。一个子窗体（称为 form1）正在使用计时器执行基于图形对象的动画。在加载另一个子表单（称为 form2）之前，此项目（子 form1）工作正常。发生的情况是第一个表单（form1）上的动画停止，但是当我关闭第二个子表单（form2）时，动画继续没有问题。

我在 form2 中使用此代码：

```
private void FlyingBeeForm_Paint(object sender, PaintEventArgs e) {
    Graphics g = e.Graphics; 
    DrawImages(g); 
    System.Threading.Thread.Sleep(50); 
    this.Invalidate(); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:10:58.480

当时间间隔到期时，计时器会通过 Windows 传递的通知保持运行。然而，这是一个非常低优先级的通知，只有在不需要做其他工作时才会收到它。

您现在应该看到 Paint 事件处理程序的问题。一方面，你通过不断睡觉来阻止*任何*工作完成。然后通过调用 Invalidate() 确保*总*有工作要做。因此，Windows 会生成一个新的绘制事件，并且永远不会到达可以传递计时器事件的状态。

您必须删除 Sleep 和 Invalidate 调用。并改用 50 毫秒计时器。只需在其 Tick 事件处理程序中调用 Invalidate()。

# c# - ViewBag 作为会话模型的持有者

> ID：10500677
> 
> 赞同：2
> 
> 时间：2012-05-08T14:32:36.497
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

这比其他任何问题都更像是一个高级别的问题。

我有一个 MVC 项目，其中包括管理用户。我目前坚持更严格的方法，在我的视图页面上我只使用一个声明的模型，这意味着我有：

```
@model MVCApp.Models.SomeModel 
```

在每个 View.cshtml 的顶部

有些页面需要超过 1 个模型。此时我将 2 个模型合并为 1 个，并将其作为一个模型发送到视图。

棘手的部分来了。假设我有一些保存用户数据的模型。该用户数据存储在会话 cookie 中（典型的表单身份验证）。对我来说似乎很奇怪，我现在必须用我自己的模型包装我使用的每个模型，该模型同时包含用户模型和我想在该视图中使用的模型。

我问自己的问题是为什么不将用户模型传递给 ViewBag 并在 View 中使用它。为什么这被认为是不好的做法？它允许我将该模型附加到每个页面，而无需最终复制所有模型。

我很想得到一些指导。我可能以错误的方式看待这个问题。任何帮助将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T14:38:57.243

应避免使用 ViewBag 有几个原因：

*   ViewBag 是弱类型的
*   您没有在视图中获得 Intellisense
*   您的视图是 ViewBag 和视图模型的混合体，您的视图从不同位置获取信息，而不是将所有内容集中到强类型视图模型中
*   ViewBag 不适用于强类型帮助器和表达式，因为动态类型不能与扩展方法一起使用（这不是 ASP.NET MVC 的限制，它是 .NET => 你不能在动态类型上调度扩展方法）
*   由于 ViewBag 的这种弱类型特性，您必须将视图转换为意大利面条代码，因为 HTML 帮助程序希望将特定类型作为参数传递
*   ...这个列表还在继续（我真的没有时间填写它，但它是一个非常大的列表）

所以现在我们知道 ViewBag 不好并且不应该使用，有不同的方法可以通过使用视图模型来解决这个要求。

一种可能性是使用[Html.Action 助手](http://haacked.com/archive/2009/11/18/aspnetmvc2-render-action.aspx)，它允许您通过完整的控制器/模型/视图生命周期在视图中插入 HTML 的某些部分。这样您就可以拥有一个常用的小部件，而不会干扰您的主视图模型。

另一种可能性是拥有一个基本视图模型，该模型将包含一个表示用户详细信息的属性，并将由一个自定义全局操作过滤器填充，该过滤器可以在每次控制器操作完成执行并返回视图结果时执行。动作过滤器可以拦截这个视图结果，读取身份验证cookie信息并设置视图模型属性。这假定您的所有视图模型都派生自公共基础视图模型。如果您需要在每个页面上显示此用户信息，这显然是有道理的。

例如：

```
public class UserInfoInjectorAttribute : ActionFilterAttribute
{
    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        var result = filterContext.Result as ViewResultBase;
        if (result == null)
        { 
            // the controller action didn't return any view result => no need to continue
            return;
        }

        var model = result.Model as BaseViewModel;
        if (model == null)
        {
            // the controller action didn't pass a model or the model passed to the view
            // doesn't derive from the common base view model that will contain 
            // the user info property => no need to continbue any further
            return;
        }

        model.UserInfo = ... go ahead and read the forms authentication cookie
                             userData portion and extract the information
                             you are looking for
    }
} 
```

现在剩下的就是将此动作过滤器注册为全局动作过滤器，它将应用于所有控制器动作。

现在，如果您的所有视图模型都由此派生，`BaseViewModel`您将知道，一旦您进入视图，UserInfo 属性将填充相关信息，而不会使用获取此属性的代码污染您的所有控制器操作。而且您仍然可以在视图中输入强类型 => 没有 ViewBag (youpeeee)。

当然，根据您的具体情况，可能还有其他方法可以实现这一点（显然不涉及任何`ViewBag`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:43:15.387

您可以使用[ActionFilterAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionfilterattribute.aspx)并在那些加载需要特定 ViewBag 项目的视图的操作中初始化它们。

I don't recommend it, as it will be harder to mantains, but will be a generic approach which may solve your problems.

# java - 如何使用 JndiPropertySource？

> ID：10500678
> 
> 赞同：3
> 
> 时间：2012-05-08T14:32:39.450
> 
> 标签：java, spring, jndi

我们正在尝试使用 a 将我们的 WebApp 转换为完整的配置[`JndiPropertySource`](http://static.springsource.org/spring/docs/3.1.0.M1/javadoc-api/org/springframework/jndi/JndiPropertySource.html)（对于所有依赖于环境的参数）。

有没有人使用它的示例（甚至可能是 tomcat）？

我们已经`DataSource`通过 JNDI 获得了，所以我们希望在`HibernateDialect`它旁边进行配置......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:01:28.767

在你的`spring-context.xml`你只需要占位符标签：

```
<context:property-placeholder /> 
```

之后，您在 Tomcats main 中插入一个环境标签`context.xml`，它会读取它：

```
<Environment name="hibernate.dialect" 
            value="org.hibernate.dialect.Oracle10gDialect" 
             type="java.lang.String" 
         override="false"/> 
```

现在您可以使用`${hibernate.dialect}`spring 配置文件中的代码。

# java - Netbeans 更新，项目不再打开索引页面

> ID：10500679
> 
> 赞同：1
> 
> 时间：2012-05-08T14:32:45.100
> 
> 标签：java, netbeans

昨天当我启动我的 java 项目时，它打开了一个 Web 浏览器并`http://localhost:8080/`显示我的应用程序的登录页面。今天，在接受最新更新（敲击键盘）后，它不再加载我的应用程序，而是加载 Glassfish 索引页面......

```
GlassFish Server 3.1.2
Your server is now running 
```

我已经验证了我的应用程序的上下文路径是正确的，我真的不确定除了项目设置之外我应该查看哪些 netbeans 区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:00:08.430

从上面的评论中，问题是当您从 netbeans 运行项目时，url 打开

[http://localhost:8080/](http://localhost:8080/)

如果这就是我如何理解的问题，那么转到 context.xml 并确保有这样的路径属性

“只看路径”

```
<Context antiJARLocking="true" path="/account_2"> 
```

ETC...

但正如你所说，你已经检查了它“上下文路径”，但你能告诉我哪一个，因为在 RUN 节点下的 netbeans 的项目属性中有上下文路径，并且还有“指定相对 url 上下文路径”选项

netbeans-->projects---转到你的项目--->然后右键单击然后属性然后转到相对url下运行节点放置/account/login.html这应该可以工作

# forms - 我可以在输入表单中有一个文件字段吗？

> ID：10500680
> 
> 赞同：5
> 
> 时间：2012-05-08T14:32:45.503
> 
> 标签：forms, haskell, yesod

我需要能够自动将文件和一些相关数据上传到我的 Yesod 服务器。我认为最好的方法是使用输入表单。

但是，输入表单似乎不允许文件字段。

1.  我是正确的还是有办法在输入表单中使用 fileAFormReq ？
2.  如果没有这样的方法，那么最好的策略是什么（也就是如何允许服务器接受脚本从另一台机器发送的文件，同时在任何时候都不需要显示表单） ?

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T01:59:29.723

你知道[lookupFile](http://hackage.haskell.org/packages/archive/yesod-core/1.1.2.1/doc/html/Yesod-Request.html#v%3alookupFile)吗？

（请参阅[什么是 IForm 等效于 fileAFormOpt？](https://stackoverflow.com/questions/12811776/what-is-the-iform-equivalent-to-fileaformopt/12817924)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:47:22.000

表格允许`<input type="file" />`，这是您要找的吗？

# iphone - iOS 游戏玩家 ID

> ID：10500692
> 
> 赞同：3
> 
> 时间：2012-05-08T14:33:28.283
> 
> 标签：iphone, ios, game-center, fbconnect, gamekit

我将第一次从事游戏项目。我有一些想法，但无法让所有事情都有意义。

**游戏只有在用户登录的情况下才能玩。** 计划让用户登录有以下选项：

1.  游戏中心 ID
2.  脸书ID
3.  在我的服务器上注册的 ID（电子邮件/用户名/密码）。

问：有意义吗？看起来没有 API 来获取用户的游戏中心 ID，所以我可以将它发布到我的服务器。对于 Facebook ID，我可以获取它并发布到服务器。注册ID肯定没有程序化。

我需要将这些 ID 发布到服务器，因为除了 Game Center 的排行榜之外，我需要在服务器中记录我们的游戏成就奖励系统。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:13:34.517

`playerID`您可以通过类的属性获取 Game Center 的唯一玩家 ID `GKPlayer`。请参阅[GKPlayer 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/GameKit/Reference/GKPlayer_Ref/Reference/Reference.html#//apple_ref/occ/instp/GKPlayer/playerID)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:13:31.667

我错了，GameCenter 实际上确实有一个 playerID API。[developer.apple.com](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/Users/Users.html#//apple_ref/doc/uid/TP40008304-CH8-SW6)

谢谢。

# java - Android CookieManager

> ID：10500693
> 
> 赞同：5
> 
> 时间：2012-05-08T14:33:28.880
> 
> 标签：java, android, cookiemanager

我有一个应用程序可以进行多次 Web 调用，以便在返回 JSON 之后进行身份验证。我的网络调用是对 https 服务器的，我正在使用 HTTPURlConnection。

我需要将会话存储在cookie中，经过研究，我发现了这个

[http://developer.android.com/reference/java/net/HttpURLConnection.html](http://developer.android.com/reference/java/net/HttpURLConnection.html)

在带有 cookie 标题的会话下，它告诉您在此处使用此代码

```
 CookieManager cookieManager = new CookieManager();
   CookieHandler.setDefault(cookieManager); 
```

但是，当我尝试使用此代码时，新的 CookieManager(); 部分以红色突出显示并说

> 构造函数 CookieManager 不可见

并且 Cookiehandler.setDefault 也以红色突出显示并说

> CookieHandler 类型中的方法 setDefault(CookieHandler) 不适用于参数 (CookieManager)

有人知道为什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T14:41:26.220

您可能正在尝试使用错误的`CookieManager`类。在Android中有2个类...

```
android.webkit.CookieManager
java.net.CookieManager 
```

对于这种情况，您需要使用`java.net.CookieManager`该类。

# redis - Redis：如何将“正常”集合与排序集合相交？

> ID：10500695
> 
> 赞同：22
> 
> 时间：2012-05-08T14:33:39.610
> 
> 标签：redis

**假设我有一个**包含 100 到 1000 个字符串的集合（或者排序集合或列表，如果这样会更好） 。

然后我有一个由更多字符串组成的排序集合**B ，比如一百万。**

现在**C**应该是**A**和**B**的交集（当然是字符串）。

我想要 X 在**C**中的每个元组 (X, SCORE_OF_X_IN_B) 。

任何想法？

我有两个想法：

1.  店间
    *   将 A 存储为每个分数为 0 的排序集
    *   中间存储到 D
    *   得到 D 的每一项
    *   删除 D
2.  客户端中的简单循环
    *   在我的客户端程序中循环 A
    *   获取每个字符串的 zscore

虽然 1\. 在 redis 方面有太多开销（例如，必须编写。redis 页面也指出了相当高的时间复杂度[http://redis.io/commands/zinterstore](http://redis.io/commands/zinterstore)），2\. 会有 |A| 数据库连接，这不是一个好的选择。

也许我可以编写一个 redis/lua 脚本，它可以像 zscore 一样工作，但可以使用任意数量的字符串，但我不确定我的主机是否允许脚本......

所以我只是想问一下，是否有一个优雅而快速的解决方案，无需编写脚本！

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-08T15:37:26.727

您的问题有一个简单的解决方案：`ZINTERSTORE`将与 a`SET`和 a一起使用`ZSET`。尝试：

```
redis> sadd foo a
(integer) 1
redis> zadd bar 1 a
(integer) 1
redis> zadd bar 2 b
(integer) 1
redis> zinterstore baz 2 foo bar AGGREGATE MAX
(integer) 1
redis> zrange baz 0 -1 withscores
1) "a"
2) "1" 
```

**编辑：**我在`AGGREGATE MAX`上面添加了，因为redis会给（未排序的）集合的每个成员`foo`一个默认分数`1`，并且`SUM`它在（排序的）集合中具有任何分数`bar`。

# cordova - 在我的 sencha touch 应用程序中添加 ProgressHuds/ActivityIndi cator

> ID：10500699
> 
> 赞同：1
> 
> 时间：2012-05-08T14:33:52.080
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

在创建原生 iOS 应用程序时，我曾经`MBProgressHuds`在请求发送到服务器、从服务器接收时显示一个活动指示器，如视图。

现在我需要一个`ProgressHud`（类似于`MBProgressHud`我的应用程序）。我怎样才能实现这一点`Sencha TOuch 2`。（我正在使用`Cordova 1.6.1`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:13:08.653

如果你想使用原生的 MBProgressHud，你可以通过创建一个 Cordova 插件，说明在[这里](http://wiki.phonegap.com/w/page/36753496/How%20to%20Create%20a%20PhoneGap%20Plugin%20for%20iOS)。

如果你想在 Sencha 中完成这一切，你可能需要自己使用像 Ext.MessageBox 这样的东西，里面有一个微调器。

# wpf - 绑定属性更改时不会触发多重绑定

> ID：10500700
> 
> 赞同：0
> 
> 时间：2012-05-08T14:33:52.823
> 
> 标签：wpf, data-binding, multibinding

我有一个 wpf wpplication，其中包含许多用户控件。其中一个控件有一个名为 的属性`ButtonsEnabled`。这是用户控件中的布尔 DependencyProperty。该属性绑定到该控件上几个按钮的 IsEnabled 属性。

此用户控件用于`MainWindow`. 它`MainWindow`有几个视图模型对象，称为`EocMonitor`and `ComMonitor`。它们都来自实现`INotifyPropertyChanged`. `ButtonsEnabled`UserControl 上的属性使用多重绑定和我编写的实现类绑定到该`Status`属性`IMultiConverter`。

问题是，即使在`Status`属性更改时引发了 PropertyChanged 事件，但在最初调用 IMultiConverter 后并未调用它，因此`ButtonsEnabled`属性的值不会更改。结果，按钮未启用。

我需要做什么才能完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:04:52.190

在我们达到此版本的代码冻结之前，我已经没有时间解决这个问题了。我所做的是`ButtonsEnabled` `DepdendencyProperty`向`MainWindow`类添加了一个并将其绑定到用户控件的`ButtonsEnabled`属性。然后，我在 MainWindow 中添加了一个`PropertyChanged`事件处理程序，并在创建时将其注册到`DbMonitor`and`ComMonitor`对象中。`PropertyChanged`然后我在事件处理程序中编写代码来正确设置`MainWindow`' `ButtonsEnabled`。

一切正常，我会担心稍后让另一种方法起作用。也许。

# java - 有没有办法等待原子整数的变化

> ID：10500703
> 
> 赞同：13
> 
> 时间：2012-05-08T14:34:02.987
> 
> 标签：java, multithreading, atomic

有没有办法等待，`AtomicInteger`这样我就不必一直睡我当前的线程并继续检查`AtomicInteger`这样的事情

```
while(atomicInt.get() >= 0) {
    Thread.sleep(1000)
} 
```

我知道有这样的东西，`CountDownLatch`但它只允许我减少我还需要它能够增加

进一步的背景故事 - 我有一个创建线程的循环，我需要等待其中一个线程执行完成，然后再创建一个新线程。然而，我正在使用一个`Executors.newFixedThreadPool(numThreads)`等待它的唯一方法似乎是调用关闭方法等待终止，然后创建一个新的线程池，所以我使用原子整数来跟踪正在运行和/或运行的线程数队列，以便当该数字减少时，我可以继续循环。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T14:47:33.353

[`Semaphore`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Semaphore.html)看起来它可能更接近你正在寻找的东西，实际上 - 它让你等到一个或多个“许可证”可用。 `AtomicInteger`不打算用于您如何使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T14:37:32.937

我认为你真正想要的是处理一些事件。该事件可以反过来增加一个整数。看看[BlockingQueue](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/BlockingQueue.html)。

> 一个队列，它还支持在检索元素时等待队列变为非空，并在存储元素时等待队列中的空间变为可用的操作。

代码可能看起来像......

```
MyEvent incrementEvent = queue.take(); //blocks until an event is added to the queue
// increment int and do logic here 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-09T10:49:09.230

我认为与您想要的更接近的是[Phaser](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Phaser.html)。我粗略的理解是，它有点像一个递增计数器，您可以在其中阻塞直到数字递增。

```
// This constructor one party (so it expects one advance per phase).
Phaser phaser = new Phaser(1);
try {
  // This will timeout as phase 0 hasn't arrived yet.
  phaser.awaitAdvanceInterruptibly(0, 1, TimeUnit.MILLISECONDS);
  fail();
}
catch (TimeoutException expected) {
}

// Arrive phase 0
phaser.arrive();
phaser.awaitAdvance(0);
try {
  // Phase 1 will timeout..
  phaser.awaitAdvanceInterruptibly(1, 1, TimeUnit.MILLISECONDS);
  fail();
}
catch (TimeoutException expected) {
}

// Arrive phase 1
phaser.arrive();
phaser.awaitAdvance(0);
phaser.awaitAdvance(1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T00:56:07.397

如果您使用的是 Executors API，那么等待任务完成的正确方法是使用 Future API。示例代码如下所示：

```
Future<?> future = threadPool.submit(task);
future.get(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-18T12:41:13.830

**CompletableFuture**的简单解决方案

 **创建两个线程thread1，thread2都可以访问的CompletableFuture

```
private CompletableFuture<Integer> future = new CompletableFuture<>(); 
```

等待线程1（或多个线程）中的值

```
Integer value = future.join(); 
```

计算thread2中的值并完成future

```
if (!future.isDone()) future.complete(calculatedValue); 
```**

# iphone - 如何以编程方式创建此工具栏

> ID：10500708
> 
> 赞同：1
> 
> 时间：2012-05-08T14:34:19.647
> 
> 标签：iphone, ios, uitoolbar

我真的很难以`UIToolBar`编程方式创建一个（没有 xib 文件）。这就是我想要创造的。

但直到现在，我觉得我还没有以正确的方式接近它。我尝试向其添加 barbuttonitem，但无法创建 png 中显示的效果。我该怎么办。需要帮助。

编辑：我添加了更大的图像

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T06:48:16.457

```
UIBarButtonItem *spaceItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
[self.navigationController.toolbar setBarStyle:UIBarStyleBlackOpaque];
UIBarButtonItem *customItem = [[UIBarButtonItem alloc] initWithTitle:@"toolbar title" style:UIBarButtonItemStylePlain    target:self     action:@selector(onToolbarTapped:)];
NSArray *toolbarItems = [NSArray arrayWithObjects:spaceItem, customItem, spaceItem, nil];

[self setToolbarItems:toolbarItems animated:NO]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T06:56:38.817

使用 CGRECT 创建您的工具栏，将其放在您想要的位置

```
UIToolbar *myToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(x, y, width, height)]; 
```

您可以使用背景图像、标题、文本颜色、背景颜色等自定义它。

接下来创建您的按钮

```
UIBarButtonItem *theButton = [UIBarButtonItem alloc] initWithTitle:@"button title" style:UIBarButtonItemStylePlain    target:self     action:@selector(selector:)]; 
```

将其添加到您的工具栏：

```
NSArray *buttons = [NSArray arrayWithObjects: theButton, nil];
[myToolbar setItems:buttons animated:NO] 
```

将工具栏添加到当前视图

```
[self.view addSubview:mytoolbar] 
```

刚打字，没测试，希望对你有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T06:38:39.127

工具栏和按钮具有自定义图像

```
- (void)viewDidLoad {
    [super viewDidLoad];

    UIToolbar *myToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, self.view.frame.size.height - 44, 320, 44)];
    [myToolbar insertSubview:[[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"toolbar_40.png"]] autorelease] atIndex:0];

    UIBarButtonItem *barButtonDone = [self createImageButtonItemWithNoTitle:@"button_down.png" target:self action:@selector(closeMe:)];
    UIBarButtonItem *barButtonShare = [self createImageButtonItemWithNoTitle:@"button_share.png" target:self action:@selector(actionShareButton:)];
    UIBarButtonItem *barButtonFlexibleGap = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil]autorelease];
    myToolbar.items = [NSArray arrayWithObjects:barButtonDone,barButtonFlexibleGap,barButtonShare,nil];

    [self.view addSubview:myToolbar];
    [myToolbar release];
}

-(void)closeMe:(id)sender
{
    NSLog(@"closeMe");
}

-(void)actionShareButton:(id)sender
{   
    NSLog(@"actionShareButton");
}

-(UIBarButtonItem *)createImageButtonItemWithNoTitle:(NSString *)imagePath target:(id)tgt action:(SEL)a
{
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];

    UIImage *buttonImage = [[UIImage imageNamed:@"button_slice.png"] stretchableImageWithLeftCapWidth:5 topCapHeight:0];
    UIImage *buttonPressedImage = [[UIImage imageNamed:@"button_slice_over.png"] stretchableImageWithLeftCapWidth:5 topCapHeight:0];

    CGRect buttonFrame = [button frame];
    buttonFrame.size.width = 32;
    buttonFrame.size.height = 32;
    [button setFrame:buttonFrame];

    UIImageView *imageView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 32, 32)];
    imageView.image = [UIImage imageNamed:imagePath];
    [button addSubview:imageView];
    [imageView release];

    [button setBackgroundImage:buttonImage forState:UIControlStateNormal];
    [button setBackgroundImage:buttonPressedImage forState:UIControlStateHighlighted];

    [button addTarget:tgt action:a forControlEvents:UIControlEventTouchUpInside];

    UIBarButtonItem *buttonItem = [[UIBarButtonItem alloc] initWithCustomView:button];

    return [buttonItem autorelease];

} 
```

这些png文件需要添加

1.  toolbar_40.png 用于工具栏图像
2.  button_down.png 用于按钮图像
3.  button_share.png 用于按钮图像
4.  button_slice.png 用于按钮背景
5.  button_slice_over.png 用于按钮背景（按下）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T16:07:29.260

似乎更适合导航栏（至少如果您保持您正在做的事情的精神：IE 在屏幕底部添加标题）

无论如何，我创建了一个简单的测试项目，这就是我为获得图片功能所做的工作，您可能必须以不同的方式将其插入到视图/控制器中，但它相对容易获得您想要的东西并且不使用按钮栏

```
- (void)viewDidLoad {

    [super viewDidLoad];

    UINavigationBar *navBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, self.view.frame.size.height - 44, 320, 44)];
    [navBar setBarStyle:UIBarStyleBlack];

    UINavigationItem *title = [[UINavigationItem alloc] initWithTitle:@"Your Title"];
    NSArray *array = [[NSArray alloc] initWithObjects:title, nil];

    [navBar setItems:array];

    [self.view addSubview:navBar];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T04:31:37.830

```
UIToolbar *myToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, self.view.frame.size.height - 44, 320, 44)];
myToolbar.barStyle = UIBarStyleBlack;

UILabel *myLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
myLabel.text = @"Sperre aufheben";
myLabel.textColor = [UIColor whiteColor];
myLabel.textAlignment = UITextAlignmentCenter;
myLabel.backgroundColor = [UIColor clearColor];

[myToolbar  addSubview:myLabel];
[self.view addSubview:myToolbar];

[myLabel release];
[myToolbar release]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T14:37:34.800

```
UIToolbar *toolbar = [UIToolbar new];
toolbar.barStyle = UIBarStyleBlackTranslucent;
toolbar.backgroundColor = [UIColor clearColor]; 
```

然后添加`UIBarButtonItem`到`toolbar`.

# android - android：动态添加组件到布局

> ID：10500710
> 
> 赞同：0
> 
> 时间：2012-05-08T14:34:22.910
> 
> 标签：android, android-layout

我有一个 java 应用程序，可以将视图动态添加到容器面板，如下所示。

```
void addBoard(int ID) {
    BoardPanel p = new BoardPanel(myManager,ID);
    setAutoLayout();
    containerPanel.add(p);
    containerPanel.repaint();
} 
```

当我尝试将其转换为 android 应用程序时，它会在调用 addView 时挂起。问题是什么？请注意，如果他喜欢，用户可以添加 1000 个视图（BoardPanels），所以我不能使用 XML 布局。

```
void addBoard(int ID) {
    BoardPanel p = new BoardPanel(context,myManager,ID);
    Log.i("Info", "Going to add view");
    containerPanel.addView(p);
    Log.i("Info", "Added");
    containerPanel.postInvalidate();
} 
```

谢谢

* * *

更新：问题似乎是由于 Aegonis 指出的线程代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:48:24.100

试试[ViewGroup.addView()](http://developer.android.com/reference/android/view/ViewGroup.html#addView%28android.view.View,%20int,%20android.view.ViewGroup.LayoutParams%29)（FrameLayout、GridLayout、LinearLayout……都是 ViewGroup 的扩展）。

例如，如果您希望在第一个已经存在的视图之后插入视图：

```
LinearLayout layout = (LinearLayout) findViewById(R.id.layoutID);
layout.addView(viewToBeAdded, 1); 
```

# c# - 你如何在 Windows 窗体应用程序 c# 中浏览数据库

> ID：10500711
> 
> 赞同：0
> 
> 时间：2012-05-08T14:34:23.800
> 
> 标签：c#, database, visual-studio-2010

我有一个简单的 c# 应用程序，它显示来自访问数据库的数据

```
 private void DisplayRow(int rowIndex)
    {
        // Check that we can retrieve the given row
        if (myDataTable.Rows.Count == 0)
            return; // nothing to display
        if (rowIndex >= myDataTable.Rows.Count)
            return; // the index is out of range

        // If we get this far then we can retrieve the data
        try
        {
            DataRow row = myDataTable.Rows[rowIndex];
            SurnametextBox.Text = row["Surname"].ToString();
            FirstNametextBox.Text = row["Firstname"].ToString();
            PhonetextBox.Text = row["Phone"].ToString();
            ContactTypetextBox.Text = row["ContactType"].ToString();
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error in DisplayRow : \r\n" + ex.Message);
        }

    } 
```

现在它显示了数据库中的第一条记录，就是这样，我有下一步和后退按钮以便单击数据，但是显示下一条记录需要什么代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:43:33.570

创建一个类变量，这样您就可以记住您当前拥有的行索引。因此，当您单击 NEXT 时，将 +1 添加到此变量，然后按 PREVIOUS 从中减去 (-1)。然后使用该变量。

```
class Form1
{
    int counter;
    void ButtonForth_Click()
    {
       counter++;
       YourMethod();
    }

    void ButtonBack_Click()
    {
       counter--;
       YourMethod();
    }

    void YourMethod()
    {
        DataRow row = table.Rows[counter];
        // more code...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:47:19.830

RhysW：感谢您指出这一点。我只是简单地展示了模式代码的基础知识。当然，要让它顺利运行，还有很多工作要做。

这是可以做到的大约：

```
class Form1
{
    int counter;
    DataTable table; //class variable so we can access to the reference from all over the class

    void ButtonForth_Click()
    {
       if(counter < table.Rows.Count)
          counter++;
       YourMethod();
    }

    void ButtonBack_Click()
    {
       if(counter > 0)
          counter--;
       YourMethod();
    }

    void YourMethod()
    {
        DataRow row = table.Rows[counter];
        if(row.Count > 0 )
        {
           SurnametextBox.Text = row["Surname"].ToString();
           FirstNametextBox.Text = row["Firstname"].ToString();
           PhonetextBox.Text = row["Phone"].ToString();
           ContactTypetextBox.Text = row["ContactType"].ToString();
        }
        //no need of try, catch block, is there are all the names correct (textobxes, and columns of datatable)
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T14:41:46.303

确保 rowIndex 在调用此函数之前递增。否则代码看起来不错。

# facebook - 使用 PhoneGap 时，我拥有完整的网络功能？

> ID：10500719
> 
> 赞同：0
> 
> 时间：2012-05-08T14:34:53.107
> 
> 标签：facebook, jquery, cordova

我正在研究开发移动应用程序的最佳平台（首先适用于 Android），该应用程序将具有大量 Web 交互，例如加载 XML、图像和与 Facebook 的交互（例如加载联系人）。

我想知道使用 PhoneGap 创建的应用程序是否可以像普通网页一样运行（如果可以将 Jquery 用于 Ajax 等），否则我会遇到问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:45:37.557

是的，您可以将 jQuery 和 Ajax 与 PhoneGap 一起使用。

# php - JQuery/JSONP/PHP - Firefox 可以，但在 Chrome 和 Opera 上不起作用

> ID：10500721
> 
> 赞同：1
> 
> 时间：2012-05-08T14:35:00.737
> 
> 标签：php, jquery, ajax, jsonp

我必须使用带有跨域 AJAX 请求的 JQuery 和 PHP 创建一个 Web 应用程序。所以，我使用 JSONP 来完成我的请求。它在 Firefox 上运行良好，但不适用于 Chrome 和 Opera。

我有一个执行请求的功能：

```
function update()
{
    $.ajax({
        url : url,
        type : "GET",
        dataType: "jsonp",
        crossDomain : true,
        jsonpCallback : "updateCallback",
        async : false, 
        data : {'session_id' : sessionID,'user' : userName },
        error : function (xhr, status, error) {
            alert("Erreur de chargement du fichier '"+url+"' : "+xhr.responseText+" ("+status+" - "+error+")");
        },
        success: function(){
            alert("Success !");
        }
    });
} 
```

这是回调函数：

```
function updateCallback(data)
{     
    var i = 0;
    var messages = data.messages;

    while(i < data.messages.length){  
       appendMessage(data.messages[i]);
       i++;
    }

    saveLastMsgID = lastMsgID;
    doUpdate = updateInProgress = false;
} 
```

AJAX 请求调用的 PHP 脚本：

```
<?php

/* ... */ 

function sendResponse($messages,$date)
{
    header('content-type: application/json; charset=utf-8'); 
    header("Access-control-allow-origin: *");
    header ("Access-Control-Allow-Headers: x-requested-with", true);
    header('Access-Control-Allow-Methods: GET,OPTIONS');

    $datas = array();

    for($i = 0 ; $i < count($messages) ; $i++){
        $msg = $messages[$i];
        $message = null;
        $message->sender = $msg->getSender();
        $message->date = $date;
        $message->msg = stripslashes($msg->getContent());
        $message->carrier = $carrier;
        $datas[] = $message;
    }
    $data->messages = $datas;
    echo $_GET['callback']. '('. json_encode($data) . ')'; 
}
?> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:47:59.800

伙计，你那里有很多东西。这不是真的必要。尝试这个。它让 jQuery 处理您的回调，以便成功函数传递响应中嵌入的 JSON 表示的对象：

```
function update()
{
    $.ajax({
        url : url,
        dataType: "jsonp",
        // async : false, <-------- THIS IS IGNORED BY JQUERY DUE TO JSONP DATATYPE
        data : {'session_id' : sessionID,'user' : userName },
        success: function(data){
            // alert("Success !");
            var i = 0;
            var messages = data.messages;

            while(i < data.messages.length){  
               appendMessage(data.messages[i]);
               i++;
            }

            saveLastMsgID = lastMsgID;
            doUpdate = updateInProgress = false;
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T14:55:15.400

我想知道您是否在浏览器中安装了任何 adblock 插件，并且您的请求 url 包含一些关键字，例如“ad”。

我有类似的问题，最后发现是adblock导致了问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T14:37:37.823

JSON-P 不是 JSON。它是嵌入在 JavaScript 程序中的 JSON。MIME 类型应该是`application/javascript`.

Chrome 和 Opera 可能正在对似乎试图将函数调用注入 JSON 字符串的行为做出反应。

# facebook - as3 sdk 中的 Facebook 请求

> ID：10500724
> 
> 赞同：0
> 
> 时间：2012-05-08T14:35:06.060
> 
> 标签：facebook, actionscript-3, dialog

我无法发送 facebook 请求，因为弹出窗口在 Firefox 中加载为空，并在 iExplorer 中给出 HTTP 500 错误。我正在使用 as3 sdk，这是我拥有的代码：

```
function gotoInvite(e:Event):void{
var sendTo:String=e.target.vstId;
var fbReq:Object=new Object;
fbReq.message='test request.';
fbReq.title='Some test';
fbReq.to=sendTo;
Facebook.ui('apprequest',fbReq,inviteResult,'popup');
} 
```

我认为参数没有正确设置，但我找不到一个很好的例子。我只想对 1 个 ID 使用请求对话框...请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:00:24.090

正确的语法是：

```
Facebook.ui('apprequests',fbReq,inviteResult,'popup'); 
```

# asp.net-mvc - 在 MVC 中，如何验证提交的表单隐藏字段的可靠性？

> ID：10500727
> 
> 赞同：2
> 
> 时间：2012-05-08T14:35:29.547
> 
> 标签：asp.net-mvc, form-fields, sensitive-data

在 mvc 中，当提交给控制器时，如何验证用户没有恶意更改只读隐藏表单字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T19:44:18.743

显示表单字段时，呈现一个隐藏字段，其中包含显示值的哈希值。

当接收到 post 请求时，再次对接收到的数据进行哈希处理，并将该哈希值与隐藏字段的值进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:42:01.267

我能想到的两个选择：

1.  显示时加密字段，然后解密服务器端并使用该值
2.  不要将敏感信息存储在隐藏字段中，而是将它们存储在会话中（推荐）

# sql - 根据 SQL 中的代码计算树级别

> ID：10500729
> 
> 赞同：3
> 
> 时间：2012-05-08T14:35:39.263
> 
> 标签：sql

我有一个数据表，其中包含技术上是树结构的数据，但是树是由代码和该代码的长度定义的。

商品代码表由代码和描述组成：

例如：

```
Code    Description
------  -------------
0101    Live Animals
01011   Horses
010110  Purebred
010190  Other 
```

一个项目的等级是通过计算它下面的代码来计算的。它下面的代码必须包含在当前代码中。如果那有意义的话。

所以在上面的例子中：

```
0101   is level 0 (nothing is contained in it)
01011  is level 1 (0101 is contained in it)
010110 is level 2 (0101 and 01011 is contained in it)
010190 is level 1 (only 0101 is contained in it) 
```

有没有办法在 SQL 中获得这些级别？我正在使用 DB2。

**编辑：** 尼古拉和戈登的解决方案都运作良好，虽然我认为尼古拉的稍微快一点！谢谢你们！

必须对 DB2 进行一些编辑：

```
select
    t1.code, count(t2.code)
from commoditycode t1 
left join commoditycode t2
on substr(t1.code, 1, length(t1.code) - 1) like concat(t2.code, '%')
group by t1.code 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T15:03:29.350

在减去最后一个字符的代码上加入自身将在右侧找到所有父母。计算它们将得到项目的级别：

```
declare @test table (code varchar(10), name varchar(100))

insert into @test values ('0101', 'Live Animals')
insert into @test values ('01011', 'Horses')
insert into @test values ('010110', 'Purebred')
insert into @test values ('010190', 'Other')

select t1.code, t1.name, count (t2.code) + 1 [level]
  from @test t1
  left join @test t2
    on substring (t1.code, 1, len (t1.code) - 1) like t2.code + '%'
 group by t1.code, t1.name

code    name            level
01011   Horses          2
0101    Live Animals    1
010190  Other           2
010110  Purebred        3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T15:14:05.573

有趣的问题。如果我理解正确，这可以使用标准 SQL 解决。

这是想法。对于每个代码，我想将其与所有其他代码进行比较。我只关心第一个代码的开头与整个其他代码匹配的其他代码。

一旦我有了这个，我只计算这样的代码的数量：

```
select code, description, count(*) as level
from 
(
  select c.code, c.description, c2.code as abovecode
  from commmodity c 
  left outer join commodity c2 on
    on left(c.code, len(c2.code)) = c2.code 
    and c.code <> c2.code
  group by c.code, c2.code
) c
group by code, description 
```

# session - 从 ASP 中的非安全页面获取安全会话对象

> ID：10500732
> 
> 赞同：0
> 
> 时间：2012-05-08T14:35:45.460
> 
> 标签：session, ssl, asp-classic, iis-6, iis-7.5

我正在维护一个用 ASP 构建的系统。

登录过程在 SSL 中。这意味着，当用户单击“登录”时，他的用户名和密码将安全地发送到服务器。登录过程产生一个 Session 对象，它是现在登录用户的 ID。

完成登录过程后，页面会将浏览器重定向到非安全页面。此页面尝试访问 ID 会话对象。

直到上周，这一切都很好。我们的系统运行在 IIS6.0 上，非安全页面可以访问这个 Secure ID Session 对象。然而，在切换到 IIS7.5 之后，这个不可避免的安全漏洞被关闭了（或者我假设如此）。非安全页面无法再访问安全 ID 会话对象。

对对象的访问就像这样简单地完成：

```
string ID = Session(SESSION_USER_ID) 
```

只是为了检查一下，我尝试从安全登录页面访问非安全会话对象 - 这也失败了。

有没有办法从非安全页面访问安全会话对象？

顺便说一句，我可能误解了这里的一些术语，但我认为情况或多或少是清楚的。如果不是这种情况，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:57:13.867

我以前遇到过这个问题，我最终解决了这个问题，当进入或退出 SSL 时，调用一个将会话变量写入 cookie 的函数，然后从 cookie 读回 SSL 会话变量。

# php - 动态菜单的交替颜色

> ID：10500744
> 
> 赞同：2
> 
> 时间：2012-05-08T14:36:30.433
> 
> 标签：php, javascript, jquery, css, opencart

我在 Opencart 网站上工作，对于左侧的类别，我需要它们以不同的颜色交替显示，例如。红色，紫色，绿色，蓝色等，然后​​在菜单中添加更多类别时重复。

谁能给我建议最简单的方法来做到这一点？

您可以查看以下网站：http: [//getsmarta.co/_ecommerce/easy-leaf/](http://getsmarta.co/_ecommerce/easy-leaf/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:47:25.097

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var color = ['Red', 'Green', 'Yellow'];

            $('ul#test').find('li').each(function (i) {
                $(this).addClass(color[((i + 3) % 3)]);
            });
        });
    </script>
    <style type="text/css">
        .Red
        {
            background-color: Red;
        }

        .Green
        {
            background-color: Green;
        }

        .Yellow
        {
            background-color: Yellow;
        }
    </style>
</head>
<body>
    <ul id="test">
        <li>a</li><li>b</li><li>c</li>
        <li>a</li><li>b</li><li>c</li>
        <li>a</li><li>b</li><li>c</li>
        <li>a</li><li>b</li><li>c</li>
    </ul>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T14:42:11.557

我对Opencart不熟悉，但这不能用css实现吗？您很可能使用第 n 个子事物来完成这项工作。或者，您可以使用 jquery 为它着色，使用 for 循环和 colour1、 colour2 等的类名。循环遍历颜色数量并将 addClass() 添加到每个元素。可能有更好的解决方案，这些就是现在出现的。

编辑：好的，也许第 n 个孩子对早期的浏览器不好，所以 jquery 解决方案会很好，除非你想使用与 jquery 相同的概念在页面本身中添加颜色类

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T14:48:22.117

我会做这个服务器端。

在您需要填写的部分代码/部分注释中：

```
$i = 0;
// loop through rows
$i++;
$alt=false;
if ($i % 2 == 0) {
 $alt = true;
}
// output row
// make sure to use a if ($alt) { echo 'class="alt""'; } or something similar so you can style away
// end loop 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-08T14:51:40.587

我没有给你代码。自己写吧。这是想法。

1.  为 4 种不同的颜色编写 4 个类。
2.  现在编写一个函数来为每个`li`项目添加正确的类。即，您可以检查 li 项目的位置并为其添加正确的类。

您可以使用 javascript 或 php 来执行此操作。现在链接颜色将随着新类别的添加而自动更改。

# eclipse - 在混合 Windows/Mac 团队环境中与 Eclipse 修改的 .classpath 搏斗

> ID：10500745
> 
> 赞同：0
> 
> 时间：2012-05-08T14:36:30.577
> 
> 标签：eclipse, maven, javadoc

我在一个小型开发环境中使用 Eclipse，其中一个开发人员拥有一台 Windows PC，而另一个开发人员拥有一台 MacBook。我们使用 subversion 存储库共享代码，并使用 Maven 作为“外部工具”（不使用 m2e 插件）。

我们每个人都有一个 M2_REPO 变量，该变量在我们两个系统上解析 .jar 文件的路径时效果很好。然而，最近，我运行了一个命令来告诉 Maven 拉下源代码和 javadocs。

```
mvn eclipse:eclipse -DdownloadSources=true -DdownloadJavadocs=true 
```

从那以后，我在我的 .classpath 中看到了一些非常以 Windows 为中心的引用，这对我使用 Mac 的朋友来说是个麻烦。

```
<classpathentry kind="var" path="M2_REPO/org/slf4j/slf4j-api/1.6.4/slf4j-api-1.6.4.jar"
  sourcepath="M2_REPO/org/slf4j/slf4j-api/1.6.4/slf4j-api-1.6.4-sources.jar">
    <attributes>
      <attribute value="jar:file:/C:/Users/John/.m2/repository/org/slf4j/slf4j-api/1.6.4/slf4j-api-1.6.4-javadoc.jar!/" name="javadoc_location"/>
    </attributes>
</classpathentry> 
```

即使在删除了 downloadSources 和 downloadJavadocs 参数，并在我的 maven-eclipse-plugin 插件配置中验证它们是错误的，删除了我的 .classpath 文件并重新运行之后，`mvn eclipse:eclipse`我仍然看到那些不需要的引用放置在我的 .classpath 文件中。

有没有人找到一个很好的解决这个问题的方法？我是否忽略了一些告诉 Maven 在其对 javadoc 文件的引用中使用 M2_REPO 变量的设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T16:11:32.460

在我的团队中，我们不会将 Eclipse`.settings`或`.classpath`文件提交到源代码控制中。当我们最初检查项目时，我们使用 m2e 来构建类路径（从前使用 eclipse 目标进行）并且无论开发人员使用什么平台，一切都设置正确。我们有人使用 Win 7、Mac 和各种 Linux 版本，构建机器是 Linux，我不知道任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T18:47:52.833

我不使用 maven，我是唯一的开发人员，我有一台 Windows PC 和一台 Mac。对我来说，这个“小”解决方案效果很好。创建一个符号链接，以便您在两个系统上的路径匹配：

```
C:\> mklink /d "C:\Users\xxx\android-sdks" "C:\Users\xxx\AppData\Local\Android\android-sdk" 
```

我在windows机器上做了这个。命令是 mklink /d（对于目录）newDir existingDir。至少在 Windows 7 上工作。也许这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T20:48:40.820

与其使用“mvn eclipse:eclipse”，不如从项目站点或通过 Eclipse Marketplace安装[M2Eclipse 。](http://eclipse.org/m2e/)它将为您处理所有链接，而不是嵌入绝对路径。

（我总是版本 .classpath 和 .settings/）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T14:59:40.717

尝试通过以下方式启用 Maven 项目的依赖管理：

**项目右键->Maven->启用依赖管理**

在此之后删除并重新创建您的 .classpath 文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-03T11:38:26.930

如果您的存储库中有 javadocs，maven eclipse 插件将始终将它们添加到您的类路径中。

-DdownloadJavadocs=true 选项只告诉 eclipse 插件下载它们。它不会告诉插件是否将它们包含在您的类路径中。如果您不再希望它们出现在类路径中，则必须删除所有*-javadoc。*从您的本地存储库（或删除您的定位存储库）。

# matlab - 如何从 [0,1] 矩阵在 Matlab 的 [0,1] 间隔中设置颜色范围创建颜色图

> ID：10500748
> 
> 赞同：0
> 
> 时间：2012-05-08T14:36:38.050
> 
> 标签：matlab

考虑一个矩阵，其值都在实数区间 [0,1] 中。我正在尝试从 Matlab 中的这个矩阵中获取颜色图。

我的问题涉及使用工具箱中的`image`函数或`HeatMap`对象。`Bioinformatics`然而，我真正关心的是颜色范围。

如何指定？

最重要的事情：如何指定最小热颜色和最大颜色必须重置为区间 [0,1]？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:43:10.257

您可以使用`imagesc`来指定颜色范围。

```
 imagesc(rand(10,10),[0 1]); 
```

# javascript - 获取当前光标位置周围单词的样式

> ID：10500750
> 
> 赞同：1
> 
> 时间：2012-05-08T14:36:45.960
> 
> 标签：javascript, word, selection, range, styling

我正在尝试获取当前光标位置下单词的样式/粗体、斜体等/。我有点击的`x`坐标`y`，我已经完成了以下操作

```
var range = document.caretRangeFromPoint(x, y);
range.expand('word');
range.queryCommandState('bold'); 
```

但这会导致错误，即范围没有`queryCommandState`方法，而此阅读：[http](http://help.dottoro.com/ljkxwclp.php) ://help.dottoro.com/ljkxwclp.php暗示范围或至少文本范围（我是 JS 新手，请原谅我）有这样的一个方法。任何帮助是极大的赞赏。

编辑：我通过添加来解决这个问题

```
var range = document.caretRangeFromPoint(x,y);
range.expand('word');
window.getSelection().addRange(range);
document.queryCommandState('bold');
window.getSelection().empty(); 
```

但我对此并不满意。有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:06:00.923

如果不编写大量代码，我认为没有比现有的更好的了。IE 的专有`TextRange`有一个`queryCommandState()`和相关的方法，但它从未在其他浏览器中进入 Range。

如果您不满意需要破坏选择来进行大胆的测试，那么我同意这似乎不必要地复杂和笨重，但是将选择恢复到其原始状态很简单。此外，清空选择的基于标准的方法是`removeAllRanges()`而不是`empty()`，这是特定于 WebKit 的。

演示：http: [//jsfiddle.net/GkWTb/1/](http://jsfiddle.net/GkWTb/1/)

代码：

```
var range = document.caretRangeFromPoint(x, y);
var sel = window.getSelection();
var selRange;

// Save initial selection
if (sel.rangeCount > 0) {
    selRange = sel.getRangeAt(0);
}
range.expand("word");
sel.removeAllRanges();
sel.addRange(range);
alert( document.queryCommandState("bold") );

// Restore original selection
sel.removeAllRanges();
if (selRange) {
    selRange = sel.addRange(selRange);
} 
```

# ruby - 未找到 RVM (Mac 10.7.3)

> ID：10500753
> 
> 赞同：3
> 
> 时间：2012-05-08T14:36:48.393
> 
> 标签：ruby, rvm, ruby-on-rails-3.2

我做了很多搜索，似乎有类似的问题，但没有一个可以帮助我解决这个问题。我对 Ruby、Rails 和 -ix 系统还很陌生，所以这也无济于事。:(

我能够启动 RVM 并与最新版本（Ruby 的 1.9.3-p125 和 Rails 的 3.2）一起运行。但是，当我退出终端并返回系统默认值时。当我尝试更改版本时，我收到“找不到命令”。然后我尝试输入“rvm”并得到：

```
-bash: rvm: command not found 
```

我遵循了其他一些教程建议，并将我的 ~/.bashrc 文件修改为如下所示：

```
 PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting
    echo '[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm"' >> ~/.bashrc 
```

但即使在退出终端后，我仍然得到完全相同的“找不到命令”。

关于如何让 RVM 正常工作的任何想法？每个人都说用它，但它肯定不简单......

非常感谢！格雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:54:16.700

如果您修改您的`.bashrc`，您要么需要立即修改`source`它，要么创建一个新的 shell 以查看更改生效。

标准`rvm`过程是创建`source`的`rvm`脚本。[安装文档](https://rvm.io/rvm/install/)涵盖了大多数用例。

如果您的`rvm`命令丢失，则您的命令可能`.bashrc`没有按预期工作。您`PATH`是否按照您的要求进行了修改？如果不是，您可能还有另一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:04:31.720

> 我遵循了其他一些教程建议并修改了我的 ~/.bashrc 文件

通常我在 Mac OS X 上修改 .profile 文件，在 Linux 上修改 .bashrc。尝试修改 .profile

请检查[如何在 OS X Lion 上修复终端不加载 ~/.bashrc](https://stackoverflow.com/questions/7780030/how-to-fix-terminal-not-loading-bashrc-on-os-x-lion)以了解终端不加载 .bashrc 文件的原因。

# sql - 检查可空日期值的正确顺序

> ID：10500755
> 
> 赞同：5
> 
> 时间：2012-05-08T14:36:51.943
> 
> 标签：sql, sql-server-2008, tsql

我有一个包含日期的数据集，并想检查日期顺序是否正确。

```
RecordID   Date1        Date2        Date3        Date4
1          2011-05-10   2011-08-16   NULL         2011-11-22
2          NULL         2012-02-03   2012-02-27   2012-03-05
3          2011-05-30   2011-05-11   2011-08-17   2011-09-15
4          2011-05-30   NULL         NULL         NULL 
```

在提供日期的所有情况下，这应该满足：Date1 < Date2 < Date3 < Date4。当记录包含某些日期的 NULL 值时，应在非 NULL 日期之间进行检查。所以这就是我想要的结果：

```
RecordID   Date1        Date2        Date3        Date4        CheckDates
1          2011-05-10   2011-08-16   NULL         2011-11-22   correct
2          NULL         2012-02-03   2012-02-27   2012-03-05   correct
3          2011-05-30   2011-05-11   2011-08-17   2011-09-15   incorrect
4          2011-05-30   NULL         NULL         NULL         correct 
```

我为此写了一个广泛的 CASE 声明，但必须有一个更优雅的解决方案：

```
CASE
  WHEN Date1 IS NULL AND Date2 IS NULL AND Date3 IS NULL AND Date4 IS NULL THEN 'correct'
  WHEN Date1 IS NULL AND Date2 IS NULL AND Date3 IS NULL AND Date4 IS NOT NULL THEN 'correct'
  WHEN Date1 IS NULL AND Date2 IS NULL AND Date3 IS NOT NULL AND Date4 IS NULL THEN 'correct'
  WHEN Date1 IS NULL AND Date2 IS NULL AND Date3 IS NOT NULL AND Date4 IS NOT NULL AND Date3 < Date4 THEN 'correct'
  ...
  ELSE 'incorrect'
END 
```

有任何想法吗？

**编辑：**
我正在寻找一种解决方案，它允许比我上面给出的第一个示例中的三列更多的“日期”列（我的实际问题中有四个，并将其更改为三个以简化问题，但似乎我已经失去了这种简化的一个重要特征）。更新了四列的示例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T14:45:47.370

您可以使用`ISNULL`and`COALESCE`跳过空值。如果缺少日期，只需将其替换为始终通过检查的日期即可：

```
CASE
  WHEN (ISNULL(Date1, '01/01/1900') < COALESCE(Date2, Date3, Date4, '01/01/3000'))
   AND (ISNULL(Date2, '01/01/1900') < COALESCE(Date3, Date4, '01/01/3000'))
   AND (ISNULL(Date3, '01/01/1900') < COALESCE(Date4, '01/01/3000'))
  THEN 'correct'
  ELSE 'incorrect'
END 
```

这假设您的“真实”日期当然永​​远不会超出 1900 - 3000 的范围；下一个千年虫正等着发生；）

**编辑：编辑处理四个字段**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:52:43.857

您可以在比较日期的选择上使用大小写，并使用 ISNULL 函数，如果第一个参数不为空，则返回第一个参数，如果第一个参数为空，则返回第二个参数。

在这种情况下，我将开始日期设置为早期日期，将结束日期设置为旧日期

```
select date1,date2,date3,
     case
        when isnull(date1,'01/01/1900') <isnull(date2,'01/01/2100') and isnull(date2,'01/01/1900') <isnull(date3,'2100') then 'OK'
        else 'not OK'
    end
from testDates 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T09:22:34.337

这是另一种方法：

```
WITH data (
  RecordID,  Date1      , Date2      , Date3      , Date4
) AS (
  SELECT 1, '2011-05-10','2011-08-16', NULL       ,'2011-11-22' UNION ALL
  SELECT 2,  NULL       ,'2012-02-03','2012-02-27','2012-03-05' UNION ALL
  SELECT 3, '2011-05-30','2011-05-11','2011-08-17','2011-09-15' UNION ALL
  SELECT 4, '2011-05-30', NULL       , NULL       , NULL
)
SELECT
  *,
  CheckDates = (
    SELECT
      MAX(CASE IdRank WHEN DateRank THEN 'correct' ELSE 'incorrect' END)
    FROM (
      SELECT
        IdRank   = ROW_NUMBER() OVER (ORDER BY ID),
        DateRank = ROW_NUMBER() OVER (ORDER BY Date)
      FROM (
        VALUES
          (1, Date1),
          (2, Date2),
          (3, Date3),
          (4, Date4)
      ) s (ID, Date)
      WHERE Date IS NOT NULL
    ) s
  )
FROM data 
```

这是输出：

```
RecordID    Date1      Date2      Date3      Date4      CheckDates
----------- ---------- ---------- ---------- ---------- ----------
1           2011-05-10 2011-08-16 NULL       2011-11-22 correct
2           NULL       2012-02-03 2012-02-27 2012-03-05 correct
3           2011-05-30 2011-05-11 2011-08-17 2011-09-15 incorrect
4           2011-05-30 NULL       NULL       NULL       correct 
```

The checking expression is more complicated than the one in [@njr's answer](https://stackoverflow.com/a/10500917/297408), but, I guess, it pays off when you need to scale the script to support more columns: you'd just need to add new rows after the `VALUES` clause.

# android - 在列表视图项中设置文本视图的文本颜色？（安卓）

> ID：10500758
> 
> 赞同：2
> 
> 时间：2012-05-08T14:36:56.773
> 
> 标签：android, listview, textview

一直在这个网站上搜索任何答案，我没有找到真正简单的解决方案。我正在创建一个使用 sqlite 数据库通过键入的颜色名称查找十六进制值的 Android 应用程序。我正在动态创建一个 TextView，设置其文本和文本颜色，然后将其添加到 ArrayList，然后 ArrayList 正在添加到列表视图。文本显示在 ListView 中，但未设置其颜色属性。我真的很想找到一种方法来为每个列表视图项设置文本颜色。到目前为止，这是我的代码：

类变量：

```
 private ListView lsvHexList;

private ArrayList<String> hexList;
private ArrayAdapter adp; 
```

在 onCreate() 中：

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.color2hex);

    lsvHexList = (ListView) findViewById(R.id.lsvHexList);

    hexList = new ArrayList<String>(); 
```

在我的按钮处理程序中：

```
 public void btnGetHexValueHandler(View view) {

    // Open a connection to the database
    db.openDatabase();

    // Setup a string for the color name
    String colorNameText = editTextColorName.getText().toString();

    // Get all records
    Cursor c = db.getAllColors();

    c.moveToFirst(); // move to the first position of the results 

    // Cursor 'c' now contains all the hex values
    while(c.isAfterLast() == false) {

        // Check database if color name matches any records
        if(c.getString(1).contains(colorNameText)) {

            // Convert hex value to string
            String hexValue = c.getString(0);
            String colorName = c.getString(1);

            // Create a new textview for the hex value
            TextView tv = new TextView(this);
            tv.setId((int) System.currentTimeMillis());
            tv.setText(hexValue + " - " + colorName);
            tv.setTextColor(Color.parseColor(hexValue));

            hexList.add((String) tv.getText());

        } // end if

        // Move to the next result
        c.moveToNext();

    } // End while  

    adp = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, hexList);
    lsvHexList.setAdapter(adp);

    db.close(); // close the connection
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:40:18.813

您根本没有将创建的 TextView 添加到列表中，您只需将 String 添加到列表中，因此您在 TextView 上调用的方法无关紧要：

```
 if(c.getString(1).contains(colorNameText)) {
        // ...
        TextView tv = new TextView(this);
        tv.setId((int) System.currentTimeMillis());
        tv.setText(hexValue + " - " + colorName);
        tv.setTextColor(Color.parseColor(hexValue));

        hexList.add((String) tv.getText()); // apend only the text to the list
        // !!!!!!!!!!!!!!  lost the TextView  !!!!!!!!!!!!!!!!
    } 
```

您需要做的是将颜色存储在另一个数组中，并在创建实际列表视图时，根据列表中的适当值设置每个 TextView 的颜色。

为此，您需要在其中扩展`ArrayAdapter`和添加 TextView 颜色的逻辑。

# mysql - MYSQL INSERT IF SUMs > CONSTANT

> ID：10500759
> 
> 赞同：5
> 
> 时间：2012-05-08T14:36:58.367
> 
> 标签：mysql, if-statement, insert, sum, where

如果来自 2 个表的 3 个用户列的总和超过一个常数，我正在尝试插入一条记录。

我到处搜索，发现您不能将用户变量放入`IF`s, `WHERE`'s 等。发现您不能将`SUM`s 放入`IF`s, `WHERE`'s 等。我完全不知所措。这是我之前尝试`SUM`在 s 中使用 s失败之前的错误代码示例`WHERE`，如果有帮助的话：

```
SELECT SUM(num1) INTO @mun1 FROM table1 WHERE user = '0';

SELECT SUM(num2) INTO @mun2 FROM table1 WHERE user = '0';

SELECT SUM(num3) INTO @mun3 FROM table2 WHERE column1 = 'd' AND user = '0';

SET @mun4 = @mun1 - @mun2 - @mun3;

INSERT INTO table2 (user, column1, column2) VALUES ('0', 'd', '100') WHERE @mun4 >= 100; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T14:41:58.003

尝试这个：

```
INSERT INTO table2 (user, column1, column2) 
select '0', 'd', '100'
from dual
where (SELECT SUM(num1 + num2) FROM table1 WHERE user = '0') +
      (SELECT SUM(num3) FROM table2 WHERE column1 = 'd' AND user = '0') > 100; 
```

这是“插入 if 条件”问题的一般解决方案的一个案例：

```
insert into ... select ... where condition 
```

select 只会在条件为真时返回行，重要的是，如果为假，则不会返回任何行——这意味着只有在条件为真时才会插入，否则什么也不会发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:33:42.717

这与@Bohemian 的答案相同，但是您必须添加一个`LIMIT`子句来停止插入多条记录，因为 select 子句可能会返回多条记录

```
INSERT INTO table2 (user, column1, column2) 
SELECT      '0', 'd', '100'
   FROM dual
   WHERE 
         (SELECT SUM(num1 - num2) FROM table1 WHERE user = '0')
         (SELECT SUM(num3) FROM table2 WHERE column1 = 'd' AND user = '0') > 
         100 
   LIMIT 1 
```

# facebook - 单击 Facebook 的“喜欢”按钮 (iFrame) 会引发错误

> ID：10500762
> 
> 赞同：1
> 
> 时间：2012-05-08T14:37:24.103
> 
> 标签：facebook, wordpress, console

在我的页面（WordPress 博客，单入口页面）上单击 Facebook 的“喜欢”按钮时

我的控制台显示错误：

```
NetworkError: 500  - https://www.facebook.com/plugins/like/connect?__a=1 
```

我已经使用 Facebook 对象调试器调试了页面，并消除了任何错误。我绞尽脑汁，无法弄清楚问题出在哪里。

如果有帮助，当再次单击点赞按钮删除点赞时，控制台会显示：

```
NetworkError: 500  - https://www.facebook.com/plugins/like/disconnect?__a=1 
```

我看到有很多人在使用 Facebook 时遇到问题。这可能有关系吗？

# wcf - WCF：检测服务合同何时更改

> ID：10500763
> 
> 赞同：0
> 
> 时间：2012-05-08T14:37:25.297
> 
> 标签：wcf, silverlight, updates

我有一个连接到 WCF 服务的 Silverlight 应用程序。有时 WCF 服务合同会在用户仍在使用应用程序时更新，在这种情况下，用户需要刷新页面以下载最新的 Silverlight 客户端。

我想检测服务合同何时更新，并在浏览器中显示提示“检测到新更新 - 请刷新页面”。我可以使用 try/catch 块来处理 CommunicationException，但这是一个非常通用的异常，可能由于多种原因而发生。

检测合同不匹配的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:45:41.770

最好的是，如果您可以进行一些操作 GetServiceVersion() ，客户端可以定期轮询（如果您可以更好地将其推送到客户端）。如果服务器无法“合作”，那么客户端必须下载 wsdl 并查看它是否发生了变化，尽量避免这种情况。

# google-apps-script - 是否可以为多个电子表格使用一个脚本？

> ID：10500764
> 
> 赞同：19
> 
> 时间：2012-05-08T14:37:25.797
> 
> 标签：google-apps-script, google-sheets

我有一个主电子表格和一些副本。这个主电子表格使用了一些脚本。

是否可以将此主电子表格的所有副本链接到与主电子表格中相同的脚本？

客观的：

*   副本自动使用主电子表格中脚本的更改
*   又名：低维护

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-06T16:53:58.400

amleczko 是对的：您应该使用 Google Apps 脚本中的新库功能。

但是，从今天开始，您将无法完全按照自己的意愿行事（对多个电子表格使用相同的脚本）。您可以做的是保存脚本的一个版本（文件 > 管理版本...），以便创建一个库。然后，将此库导入其他电子表格（资源 > 管理库...）。打开“开发模式”，这样库所做的每一项更改都会立即在使用该库的电子表格中生效。否则，您必须为每次更改保存库的新版本，并在使用它的每个电子表格中手动更新库的版本号。

问题是，您需要使用您的库在每个电子表格中编写一个脚本，其骨架函数如下：

```
function doSomething(){
   myLibrary.doSomething();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-30T21:21:13.207

最好的方法是作为插件发布，然后安装插件，它会出现在您打开的每个电子表格中。并且您可以以私有方式发布，只有您自己才能看到。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T09:12:47.563

我认为这已经改变了。根据从 2012 年 5 月 22 日开始的[第 40 期](http://code.google.com/p/google-apps-script-issues/issues/detail?id=40)，存在这种可能性。请检查：

*   [https://developers.google.com/apps-script/guide_libraries](https://developers.google.com/apps-script/guide_libraries)
*   [https://developers.google.com/apps-script/guide_versions](https://developers.google.com/apps-script/guide_versions)
*   [http://googleappsdeveloper.blogspot.it/2012/05/introducing-versions-and-libraries-in.html](http://googleappsdeveloper.blogspot.it/2012/05/introducing-versions-and-libraries-in.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T01:53:00.580

你想的这种方式是不可能的。至少，现在还没有（见[第 40 期](http://code.google.com/p/google-apps-script-issues/issues/detail?id=40)）。

但是，根据您的脚本使用情况，您可以“以困难的方式”连接它们，或者甚至更好，只使用一个脚本。主电子表格上的脚本可以打开其他电子表格文件并“远程”完成其工作。不需要将脚本托管在电子表格上即可与之交互（对其进行读/写）。如果您要使用电子表格事件触发器，即打开时、编辑时和表单提交时，您只需要托管在电子表格上的脚本。

也许您可以为主表上的脚本开发一个漂亮的 UI 并将其作为服务发布。然后只有副本上的链接才能在不同的浏览器选项卡上访问相同的 UI。将参数添加到链接脚本 UI 甚至可以适应“触发”它的特定电子表格。

嗯，这就是我现在所能想象的。但是，不幸的是，有些用例不适合这种好的“解决方法”。对于那些人，只能给[第 40 期加注](http://code.google.com/p/google-apps-script-issues/issues/detail?id=40)星标（进行投票和跟踪更新）并希望它尽快开发。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T07:00:49.990

我在这种情况下采用的解决方案是拥有一个 Google 站点，其中嵌入了主脚本，并且也嵌入了电子表格

然后，引用专用电子表格的脚本查找 Google 站点页面的名称，查看主电子表格并获取嵌入页面中的电子表格的 ID。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T01:23:31.917

使用自动生成电子表格的脚本时，我已经解决了这个问题。

通常，我会使用名为“Info”的脚本将工作表添加到任何电子表格。我将使用它来存储对脚本很重要的信息。在自动生成更多电子表格的脚本中，我跟踪创建的工作表的 ID。这样，我就可以快速调用所有“链接”的工作表，并使用相同的脚本与它们进行交互。甚至可能值得将脚本写在一张纸上，并将其与您的主纸或其子纸完全分开。

看看这个函数，它可能会给你一些想法。

[SpreadsheetApp.openById(id)](https://developers.google.com/apps-script/class_spreadsheetapp#openById)

# x86 - 4 个 32 位整数的 SSE 乘法

> ID：10500766
> 
> 赞同：18
> 
> 时间：2012-05-08T14:37:30.953
> 
> 标签：x86, sse, simd, multiplication, sse2

如何将四个 32 位整数乘以另外 4 个整数？我没有找到任何可以做到这一点的指令。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-08T15:19:23.873

如果您需要有*符号*的 32x32 位整数乘法，那么[software.intel.com](http://software.intel.com/en-us/forums/showthread.php?t=75969)上的以下示例看起来应该可以满足您的需求：

```
static inline __m128i muly(const __m128i &a, const __m128i &b)
{
    __m128i tmp1 = _mm_mul_epu32(a,b); /* mul 2,0*/
    __m128i tmp2 = _mm_mul_epu32( _mm_srli_si128(a,4), _mm_srli_si128(b,4)); /* mul 3,1 */
    return _mm_unpacklo_epi32(_mm_shuffle_epi32(tmp1, _MM_SHUFFLE (0,0,2,0)), _mm_shuffle_epi32(tmp2, _MM_SHUFFLE (0,0,2,0))); /* shuffle results to [63..0] and pack */
} 
```

您可能希望有两个构建 - 一个用于旧 CPU，一个用于最近的 CPU，在这种情况下，您可以执行以下操作：

```
static inline __m128i muly(const __m128i &a, const __m128i &b)
{
#ifdef __SSE4_1__  // modern CPU - use SSE 4.1
    return _mm_mullo_epi32(a, b);
#else               // old CPU - use SSE 2
    __m128i tmp1 = _mm_mul_epu32(a,b); /* mul 2,0*/
    __m128i tmp2 = _mm_mul_epu32( _mm_srli_si128(a,4), _mm_srli_si128(b,4)); /* mul 3,1 */
    return _mm_unpacklo_epi32(_mm_shuffle_epi32(tmp1, _MM_SHUFFLE (0,0,2,0)), _mm_shuffle_epi32(tmp2, _MM_SHUFFLE (0,0,2,0))); /* shuffle results to [63..0] and pack */
#endif
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-08T14:42:16.120

来自 SSE 4.1 的[PMULLD就是这样做的。](http://www.tptp.cc/mirrors/siyobik.info/instruction/PMULLD.html)

描述有点误导，它谈论有符号乘法，但由于它只存储低 32 位，它实际上是一个可以用于两者的符号忽略指令，就像`IMUL`.

# java - 从 HttpURLConnection 对象解析 JSON

> ID：10500775
> 
> 赞同：65
> 
> 时间：2012-05-08T14:37:55.843
> 
> 标签：java, html, json, parsing, httpurlconnection

我正在使用`HttpURLConnection`Java 中的对象进行基本的 http 身份验证。

```
 URL urlUse = new URL(url);
        HttpURLConnection conn = null;
        conn = (HttpURLConnection) urlUse.openConnection();
        conn.setRequestMethod("GET");
        conn.setRequestProperty("Content-length", "0");
        conn.setUseCaches(false);
        conn.setAllowUserInteraction(false);
        conn.setConnectTimeout(timeout);
        conn.setReadTimeout(timeout);
        conn.connect();

        if(conn.getResponseCode()==201 || conn.getResponseCode()==200)
        {
            success = true;
        } 
```

我期待一个 JSON 对象，或有效 JSON 对象格式的字符串数据，或带有有效 JSON 的简单纯文本的 HTML。`HttpURLConnection`在它返回响应后如何访问它？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-05-08T15:24:37.297

您可以使用以下方法获取原始数据。顺便说一句，此模式适用于 Java 6。如果您使用的是 Java 7 或更高版本，请考虑[try-with-resources 模式](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)。

```
public String getJSON(String url, int timeout) {
    HttpURLConnection c = null;
    try {
        URL u = new URL(url);
        c = (HttpURLConnection) u.openConnection();
        c.setRequestMethod("GET");
        c.setRequestProperty("Content-length", "0");
        c.setUseCaches(false);
        c.setAllowUserInteraction(false);
        c.setConnectTimeout(timeout);
        c.setReadTimeout(timeout);
        c.connect();
        int status = c.getResponseCode();

        switch (status) {
            case 200:
            case 201:
                BufferedReader br = new BufferedReader(new InputStreamReader(c.getInputStream()));
                StringBuilder sb = new StringBuilder();
                String line;
                while ((line = br.readLine()) != null) {
                    sb.append(line+"\n");
                }
                br.close();
                return sb.toString();
        }

    } catch (MalformedURLException ex) {
        Logger.getLogger(getClass().getName()).log(Level.SEVERE, null, ex);
    } catch (IOException ex) {
        Logger.getLogger(getClass().getName()).log(Level.SEVERE, null, ex);
    } finally {
       if (c != null) {
          try {
              c.disconnect();
          } catch (Exception ex) {
             Logger.getLogger(getClass().getName()).log(Level.SEVERE, null, ex);
          }
       }
    }
    return null;
} 
```

然后您可以使用[Google Gson](http://code.google.com/p/google-gson/)返回的字符串将 JSON 映射到指定类的对象，如下所示：

```
String data = getJSON("http://localhost/authmanager.php");
AuthMsg msg = new Gson().fromJson(data, AuthMsg.class);
System.out.println(msg); 
```

有一个 AuthMsg 类的示例：

```
public class AuthMsg {
    private int code;
    private String message;

    public int getCode() {
        return code;
    }
    public void setCode(int code) {
        this.code = code;
    }

    public String getMessage() {
        return message;
    }
    public void setMessage(String message) {
        this.message = message;
    }
} 
```

[http://localhost/authmanager.php](http://localhost/authmanager.php)返回的 JSON必须如下所示：

```
{"code":1,"message":"Logged in"} 
```

问候

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-08T14:48:04.597

定义以下函数（不是我的，不知道我很久以前在哪里找到的）：

```
private static String convertStreamToString(InputStream is) {

BufferedReader reader = new BufferedReader(new InputStreamReader(is));
StringBuilder sb = new StringBuilder();

String line = null;
try {
    while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
    }
} catch (IOException e) {
    e.printStackTrace();
} finally {
    try {
        is.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
}
return sb.toString(); 
```

}

然后：

```
String jsonReply;
if(conn.getResponseCode()==201 || conn.getResponseCode()==200)
    {
        success = true;
        InputStream response = conn.getInputStream();
        jsonReply = convertStreamToString(response);

        // Do JSON handling here....
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-16T11:58:21.610

此外，如果您希望在 http 错误（400-5** 代码）的情况下解析您的对象，您可以使用以下代码：（只需将 'getInputStream' 替换为 'getErrorStream'：

```
 BufferedReader rd = new BufferedReader(
            new InputStreamReader(conn.getErrorStream()));
    StringBuilder sb = new StringBuilder();
    String line;
    while ((line = rd.readLine()) != null) {
        sb.append(line);
    }
    rd.close();
    return sb.toString(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-08T14:48:24.887

JSON 字符串将只是您从调用的 URL 返回的响应的主体。所以添加这段代码

```
...
BufferedReader in = new BufferedReader(new InputStreamReader(
                            conn.getInputStream()));
String inputLine;
while ((inputLine = in.readLine()) != null) 
    System.out.println(inputLine);
in.close(); 
```

这将允许您看到返回到控制台的 JSON。您唯一缺少的部分是使用 JSON 库来读取该数据并为您提供 Java 表示。

[这是一个使用 JSON-LIB 的示例](http://answers.oreilly.com/topic/257-how-to-parse-json-in-java/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-13T11:48:33.613

该函数将用于从 url 以 HttpResponse 对象的形式获取数据。

```
public HttpResponse getRespose(String url, String your_auth_code){
HttpClient client = new DefaultHttpClient();
HttpPost postForGetMethod = new HttpPost(url);
postForGetMethod.addHeader("Content-type", "Application/JSON");
postForGetMethod.addHeader("Authorization", your_auth_code);
return client.execute(postForGetMethod);
} 
```

上面的函数在这里被调用，我们使用 Apache 库 Class 接收一个字符串形式的 json。在下面的语句中，我们尝试从我们收到的 json 中制作简单的 pojo。

```
String jsonString     =     
EntityUtils.toString(getResponse("http://echo.jsontest.com/title/ipsum/content/    blah","Your_auth_if_you_need_one").getEntity(), "UTF-8");
final GsonBuilder gsonBuilder = new GsonBuilder();
gsonBuilder.registerTypeAdapter(JsonJavaModel .class, new    CustomJsonDeserialiser());
final Gson gson = gsonBuilder.create();
JsonElement json = new JsonParser().parse(jsonString);
JsonJavaModel pojoModel = gson.fromJson(
                    jsonElementForJavaObject, JsonJavaModel.class); 
```

这是一个用于传入 json 的简单 java 模型类。公共类 JsonJavaModel{ 字符串内容；字符串标题；这是一个自定义反序列化器：

```
public class CustomJsonDeserialiserimplements JsonDeserializer<JsonJavaModel>         {

@Override
public JsonJavaModel deserialize(JsonElement json, Type type,
                                 JsonDeserializationContext arg2) throws    JsonParseException {
    final JsonJavaModel jsonJavaModel= new JsonJavaModel();
    JsonObject object = json.getAsJsonObject();

    try {
     jsonJavaModel.content = object.get("Content").getAsString()
     jsonJavaModel.title = object.get("Title").getAsString()

    } catch (Exception e) {

        e.printStackTrace();
    }
    return jsonJavaModel;
} 
```

包括 Gson 库和 org.apache.http.util.EntityUtils；

# javascript - 如何在图像后添加 HTML 然后包装在 div 中？

> ID：10500780
> 
> 赞同：2
> 
> 时间：2012-05-08T14:38:19.990
> 
> 标签：javascript, jquery, html

在我的函数中，我想为一张图片添加一个动态创建的标题，然后将其整齐地包装在一个 div 中。

前：

```
<img src="whatever" /> 
```

后：

```
<div class="imageBlock">
 <img src="whatever" />
 <span class="caption">The Caption</span>
</div> 
```

这是我目前拥有的：

```
var imageCaption = '<span class="caption">'+array[1]+'</span>'
$(this).after(imageCaption).wrap('<div class="imageBlock '+array[0]+'" />'); 
```

这是有效的，但将跨度放置在结束`div`标记之外。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:50:59.893

您必须注意`this`实际指的是什么。

要得到你想要的东西，只需颠倒顺序，

```
var imageCaption = '<span class="caption">'+array[1]+'</span>'
$(this).wrap('<div class="imageBlock '+array[0]+'" />').after(imageCaption); 
```

这是因为您正在传递的对象是原始图像标签。最初您调用`after`您的标签，因此它可以正确执行此操作，但从该调用返回的仍然只是原始图像元素，而不是两者。因此，当您调用 wrap 时，您只是在原始图像标签上调用它。通过首先包装，图像标签成为被包装元素的子元素，然后`after`将其插入正确的位置。

这可能更清楚，

```
var myImage = $(this);
myImage.after(imageCaption);
myImage.wrap('<div class="imageBlock '+array[0]+'" />'); 
```

看到问题了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:50:21.273

尝试

```
$(document).ready(function() {
    $('#x').wrap('<div class="imageBlock">');
$('<span class="caption">The Caption</span>').insertAfter($('#x'));
});​ 
```

'x' 是`<img src="whatever">`元素的 ID 属性值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T14:56:23.760

这是一个让你开始的小提琴：http: [//jsfiddle.net/c3nxe/](http://jsfiddle.net/c3nxe/)

# notepad++ - 如何在Notepad ++中插入两个带有光标的括号？

> ID：10500781
> 
> 赞同：1
> 
> 时间：2012-05-08T14:38:22.850
> 
> 标签：notepad++, code-formatting

我在 Mac 上的一个视频中看到了这种功能。有没有办法在 Windows 上做到这一点？

在编程的路上，这将是一个不错的功能。我的意思是一次插入 {} 或 () 或 '' 括号，中间有一个光标。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:17:40.800

如果我正确理解了您的问题...

为 NP++使用[XBrackets Lite 插件](http://sourceforge.net/projects/npp-plugins/files/XBrackets%20Lite/)。另外，请记住启用自动完成括号。

![在此处输入图像描述](../Images/5c9a18e396ab5dbb749b969ad4886fde.png)

它会自动关闭括号并将光标保持在中间。

# java - 我的 JDBC sql 语句有什么问题

> ID：10500786
> 
> 赞同：2
> 
> 时间：2012-05-08T14:38:40.230
> 
> 标签：java, mysql, sockets, jdbc, client-server

我正在编写一个允许客户端与服务器通信的 Java 套接字应用程序，其他要求之一是它还需要初始化 JDBC。我相信我已经正确地编写了我的 JDBC 连接方法，并且我的插入语句在类似的项目中也是如此。这可能是一个简单的错误，因为我没有使用 IDE，有人可以告诉我我的 SQL 语句有什么问题吗？所有信息都是正确的，但它不会编译。

错误：

```
C:\Users\imallin\My Documents> javac provider.java
Provider.java:88 ';' expected 
String sql = "Insert INTO 'users' ('ID', 'firstName') VALUES ("123","123")"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T14:40:54.163

您的直接问题是您需要转义字符串中的双引号。这是因为当编译器看到另一个时`"`，它认为它是字符串定义的结尾并执行分号。

```
String sql = "Insert INTO 'users' ('ID', 'firstName') VALUES (\"123\",\"123\")"; 
```

既然 Java 编译器很高兴，那么您将遇到与 SQL 相关的问题。

通常使用 SQL，您会希望使用单引号来表示字符串。似乎 MySQL 专门允许双引号，但仅当[SQL QUOTES ANSI 模式未设置](http://dev.mysql.com/doc/refman/5.1/en/string-literals.html)时。所以这里最好用单引号来表示字符串。

这是您可能想要的，假设该`ID`列是一个整数，并且该`firstName`列是一个字符串/varchar。

```
String sql = "Insert INTO users (ID, firstName) VALUES (123,'123')"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T14:41:57.253

为了与已发布的其他答案略有不同，您不需要在 SQL 中*使用*双引号。你用过的单引号都放错地方了，双引号根本就不行。你的陈述应该看起来像

```
String sql = "Insert INTO users (ID, firstName) VALUES ('123','123')"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T14:40:54.903

看起来您没有转义 SQL 语句中的双引号。Java 将您的字符串视为在第一个 123 之前完成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T14:49:09.980

在行中：

```
String sql = "Insert INTO 'users' ('ID', 'firstName') VALUES ("123","123")"; 
```

双引号字符串在 之后结束`VALUES (`，后面紧跟一个数字标记。这在 Java 中是非法的。直接的解决方法是添加反斜杠：

```
String sql = "Insert INTO 'users' ('ID', 'firstName') VALUES (\"123\",\"123\")"; 
```

虽然这也可以（假设它谈论的是整数，而不是字符串）：

```
String sql = "Insert INTO 'users' ('ID', 'firstName') VALUES (" + 123 + "," + 123 + ")"; 
```

但更一般地说，它的问题在于您在不使用参数化的情况下进行 INSERT。这在实际代码中几乎总是错误的！JDBC 对参数化查询有很好的支持，您*应该*使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T05:53:58.020

您可以改用单引号。

> "插入 INTO 用户 (ID, firstName) VALUES ('123','123')";

# google-chrome - Chrome 标签 URL 重定向

> ID：10500787
> 
> 赞同：1
> 
> 时间：2012-05-08T14:38:41.577
> 
> 标签：google-chrome, tabs, google-chrome-extension

各位晚上好 ，

我正在开始一个 chrome 扩展，在某些情况下我需要重定向（更改 URL）用户的选项卡。

这是我的代码

```
function changeTabURL(tabName,addr) {
var tabId=parseInt(localStorage.getItem(tabName)); //fetch tab ID

chrome.tabs.update(tabId,{"url":addr});

} 
```

现在这就是正在发生的事情，Chrome:// ... 东西被添加到我的 URL 之前！假设我尝试将标签重定向到“http://www.google.com”，这就是发生的情况：

**“没有找到该网址的网页：chrome-extension://oihdngeahhchnacpilhnmaknneooabbc/http://www.google.com”**

我不能动摇这个！我试过先重置网址

```
chrome.tabs.get(tabId,function(tab) {
tab.url='';
alert(tab.url);
});
chrome.tabs.update(tabId,{"url":addr});
} 
```

我所做的一切都不会动摇这一点。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T06:32:29.847

由于您已经在使用 chrome.tabs API，您可能想尝试使用 chrome.tabs.query 来查找活动选项卡并以这种方式获取它的 id。这是一个例子：

```
queryInfo = new Object();
queryInfo.active = true;
chrome.tabs.query(queryInfo, function(result) {
     var activeTab = result[1].id;
     updateProperties = new Object();
     updateProperties.url = 'YOUR_URL_HERE';
     chrome.tabs.update(activeTab, updateProperties, function() {
          // Anything else you want to do after the tab has been updated.
     });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:56:55.503

你有没有像这样在你的 manifest.json 中设置权限：

```
"permissions": [
"notifications",
"contextMenus",
"tabs",
"contentSettings",
"http://*/*",
"https://*/*" 
```

]

# objective-c - 在 UIWebView 中打开自定义链接

> ID：10500788
> 
> 赞同：0
> 
> 时间：2012-05-08T14:38:41.910
> 
> 标签：objective-c, uiwebview

我有一个显示由页面组成的演示文稿的应用程序。

这些页面可以包含某些类型的媒体，其中之一是 HTML，它使用 UIWebView 组件作为查看器。

我需要的是某种方式在 HTML 文档中插入某种链接，这样我就可以跳转到我的应用程序演示文稿的另一个页面。

在我的研究中，我发现不推荐子类化 UIWebView，所以我不知道应该如何处理这个问题。

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:43:25.167

提供：

```
-webView:shouldStartLoadWithRequest:navigationType: 
```

在您的应用程序委托中（[参考此处](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIWebViewDelegate/webView%3ashouldStartLoadWithRequest%3anavigationType%3a)）。

每次 Web 视图即将加载新内容并让您有机会做您需要的事情时都会调用它。例如，如果您在网页中嵌入“file://”类型的 URL，这将起作用：

```
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {
    if ([[[request URL] scheme] isEqual:@"file"])
        return YES;
    ... 
```

# android - 与整数比较的字节

> ID：10500791
> 
> 赞同：0
> 
> 时间：2012-05-08T14:38:53.570
> 
> 标签：android, integer, compare, byte

我正在尝试将我保存在 A 文件中的高分与整数进行比较。所以我总是会从我的文件中得到三个字符，但是如果我控制它，它不会把我的新分数放进去。

```
try{
                String FILENAME = "HanoiScore1File";
                FileInputStream fos = openFileInput(FILENAME);
                byte[] b = new byte[2];
                fos.read(b);
                fos.close();
                Data = new String(b);
                Score2 = Integer.parseInt(Data);
            }catch (java.io.FileNotFoundException e) {
              } catch (IOException e) {
                e.printStackTrace();
            }
            if(Score2>Score){
                try{
                    String FILENAME="HanoiScore1File";
                    Data=Integer.toString(Score);
                    FileOutputStream fostemp = openFileOutput(FILENAME, Context.MODE_PRIVATE);
                    fostemp.write(Data.getBytes());
                    fostemp.close();
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:00:18.593

```
String FILENAME = "HanoiScore1File";

//Read the score
Scanner scanner = new Scanner(new File(FILENAME));
int Score = scanner.nextInt();
scanner.close();

//Write the score
PrintWriter printWriter = new PrintWriter(new File(FILENAME));
printWriter.println(Score);
printWriter.close(); 
```

这有效，但我犯的错误是

```
if (Score2>Score) 
```

score2 始终为 0，永远不会大于 score，所以它没有保存高分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:16:26.337

如果您真的关心将分数存储为两个字节以节省空间，则需要结合使用位移和按位运算符，例如：

```
 int score = 2839;
    byte a = (byte)(score & 255);
    byte b = (byte)(score >> 2); 
```

但是，如果您对空间比较宽容，您可以执行以下简单操作：

```
 String FILENAME = "HanoiScore1File";

    //Read the score
    Scanner scanner = new Scanner(new File(FILENAME));
    int Score = scanner.nextInt();
    scanner.close();

    //Write the score
    PrintWriter printWriter = new PrintWriter(new File(FILENAME));
    printWriter.println(Score);
    printWriter.close(); 
```

# iphone - iPhone - Xcode - 在地址簿中搜索符号时 CFArrayRef 无效

> ID：10500795
> 
> 赞同：1
> 
> 时间：2012-05-08T14:38:58.107
> 
> 标签：iphone, objective-c, xcode, addressbook

每次用户输入字符时，我都会尝试使用搜索栏过滤联系人。这适用于常规字符，但是当输入像 $ 或 ( 对于第一个字符这样的符号时，ABAddressBookCopyPeopleWithName 返回一个“Invalid CFArrayRef”。我已经搜索了一段时间的解决方案，但似乎找不到任何东西。代码如下。

```
 CFArrayRef filteredContacts = ABAddressBookCopyPeopleWithName(addressBook, (CFStringRef)searchText);
    CFMutableArrayRef filteredContactsMutable = CFArrayCreateMutableCopy(kCFAllocatorDefault, CFArrayGetCount(filteredContacts), filteredContacts);
    CFArraySortValues(filteredContactsMutable, CFRangeMake(0, CFArrayGetCount(filteredContactsMutable)), (CFComparatorFunction)ABPersonComparePeopleByName, (void*)sortOrdering);
    contacts = (NSArray *)filteredContactsMutable;
    CFRelease(filteredContacts); 
```

我在第二行得到一个 EXC_BAD_ACCESS，在该行中，filteredContactsMutable 是使用filteredContacts 创建的。当我调试它时，当符号是第一个字符时，filteredContacts 是一个 Invalid ***CFArrayRef***。Apple 创建的本机 PeoplePicker 允许您搜索符号作为第一个字符，所以我知道这是可能的。

任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:42:52.043

首先，开始搜索时不应触发过多的操作系统调用。一次加载所有数据并将其存储到数组中然后搜索。以及由于其中的 nil 参数而导致它崩溃的原因 cz 我认为找不到这样的用户名。尝试使用简单的字符 n 告诉我这个 prblm 是否仍然存在

# authentication - 基于 JDBCRealm 的程序化登录

> ID：10500796
> 
> 赞同：0
> 
> 时间：2012-05-08T14:39:02.610
> 
> 标签：authentication, java-ee-6, glassfish-3, jaas, servlet-3.0

我正在尝试在一个简单的 JSP 应用程序中实现 OpenID 身份验证。

基于-`FORM`的身份验证真的让我抓狂，因为没有办法监听*pre*，*post* -authenticate 事件。

当我收到来自 OpenID 提供者的用户信息时，我想建议他们填写简单的注册表单（即编辑从身份提供者收到的详细信息，并可选择添加一些附加信息）。但是如果我使用标准的“j_security_check”操作，这些细节就会丢失。如果我尝试以编程方式登录用户（即使用 HttpServletRequest#login(user, password) 我无法将用户重定向到最初请求的 URL（因为只`FormAuthenticator`保留此信息）。

有没有办法使用一些预先配置的 JDBC 领域来手动控制身份验证机制？也就是说，我不想`<login-config />`在我的 web.xml 中指定，但是在调用 HttpServletRequest#login 时，我想针对 JDBC 领域进行身份验证。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T06:23:16.917

不，这对于 GlassFish 提供的 ootb 基本上是不可能的。你需要深入挖掘。您最终将使用自定义 JAAS LoginModule 和 JSR-196 Login Bridge。更多指针：

*   [http://www.java.net/forum/topic/glassfish/glassfish/gf-and-generic-jaas-loginmodule?force=316](http://www.java.net/forum/topic/glassfish/glassfish/gf-and-generic-jaas-loginmodule?force=316)
*   [https://blogs.oracle.com/nasradu8/entry/loginmodule_bridge_profile_jaspic_in](https://blogs.oracle.com/nasradu8/entry/loginmodule_bridge_profile_jaspic_in)

# date - jqplot 来自时间戳的日期轴

> ID：10500797
> 
> 赞同：1
> 
> 时间：2012-05-08T14:39:07.450
> 
> 标签：date, timestamp, axis, jqplot

我正在尝试获取带有日期的 x 轴。x 数据是时间戳。不知何故，我无法正确处理。

该行具有以下值：

```
line = [[1334856823000, 2], [1334856853000, 1], [1334856883000, 0], [1334856913000,4],[1334856914000, 13], [1334856943000, 16], [1334856973000, 23], [1334857003000, 24], [1334857033000, 36], [1334857063000, 14], [1334857093000, 1]]

            $.jqplot('container', [line],
              { title: "Snelheidsgrafiek",
                axes: {
                  xaxis: {
                    rederer: $.jqplot.DateAxisRenderer,
                    rendererOptions: {tickRenderer: $.jqplot.canvasAxisTickRenderer},
                    tickOptions: {formatString: '%H:%M'}
                  },
                  yaxis: {
                    min: 0
                  }
                }
            }); 
```

现在它显示`%H:%M`为标签。我尝试了很多变化，但无法实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:59:05.927

就这样吧。您的问题是`tickRenderer: $.jqplot.CanvasAxisTickRenderer`应该与 处于同一级别`renderer`，而不是 inside `rendererOptions`。

[请参阅jsfiddle。](http://jsfiddle.net/Boro/DWFTb/)

**编辑**

此外，您还缺少使用的导入，`CanvasTextRenderer`并且`CanvasAxisTickRenderer`您忘记以大写字母开头`C`，如下所示：`$.jqplot.CanvasAxisTickRenderer`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T12:23:34.690

试试这个。这是从工作代码中匆忙复制的。我删除了很多内容，以便为您提供更好的概述。也许它在这里和那里缺少一个括号，但它应该让您了解要设置什么以及受影响的变量如何。这肯定 100% 有效。

确保还包含所需的 Javascript 库。

如果您需要更多详细信息，请告诉我...

```
<script type="text/javascript">(function($) {
            var indizes;
            var plot1; 
            $(document).ready(function() {
                $(function() {
                   $(document).ready(function() {
indizes = [["2011-12-31",0.00],["2012-01-31",6.25],["2012-02-28",12.56],["2012-03-31",17.62],["2012-04-30",18.72],["2012-05-31",12.44],["2012-06-30",15.14],["2012-07-31",20.27],["2012-08-31",20.82],["2012-09-30",24.47],["2012-10-31",25.68],["2012-11-30",26.41],["2012-12-31",28.43],["2013-01-31",32.76],["2013-02-28",36.82],["2013-03-31",42.29],["2013-04-30",43.14],["2013-05-31",45.87],["2013-06-30",40.68],["2013-07-31",50.58],["2013-08-31",46.00],["2013-09-29",56.20],["2013-10-02",55.40]];                            ;

            draw_first();

            function draw_first() {
                plot1 = $.jqplot("chartdiv", [indizes], {
                    seriesColors: ["rgba(0, 189, 255, 1)"],
                    title: '',
                    grid: {
                        background: 'rgba(57,57,57,0.0)',
                        drawBorder: false,
                        shadow: false,
                        gridLineColor: '#333',
                        gridLineWidth: 1
                    },
                    legend: {
                        show: true,
                        placement: 'inside',
                        location: 'nw'
                    },
                    seriesDefaults: {
                        rendererOptions: {
                            smooth: false,
                            animation: {
                                show: true
                            }
                        },
                        showMarker: true,
                        pointLabels: {show: pointlabels},
                        markerOptions: {
                            style: 'filledSquare'
                        }
                    },
                    series: [
                        {
                            label: 'Indizes'
                        }
                    ],
                    axesDefaults: {
                        rendererOptions: {
                            baselineWidth: 2,
                            baselineColor: '#444444',
                            drawBaseline: false
                        }
                    },
                    axes: {
                        xaxis: {
                            renderer: $.jqplot.DateAxisRenderer,
                            tickRenderer: $.jqplot.CanvasAxisTickRenderer,
                            tickOptions: {
                                formatString: "%b",
                                angle: 0,
                                textColor: '#888'
                            },
                            min: "2012-10-01",
                            max: "2013-10-31",
                            tickInterval: "1 month",
                            drawMajorGridlines: true
                        },
                        yaxis: {
                            renderer: $.jqplot.LinearAxisRenderer,
                            pad: 0,
                            rendererOptions: {
                                minorTicks: 1
                            },
                            drawMajorGridlines: false,
                            tickOptions: {
                                formatString: function() {
                                    return '%#.1f %';
                                }(),
                                showMark: false,
                                textColor: '#888'
                            }
                        }
                    }
                });
            } 

        })(jQuery);</script> 
```

# android - Android重新创建ListView

> ID：10500799
> 
> 赞同：0
> 
> 时间：2012-05-08T14:39:19.130
> 
> 标签：android, android-listview, android-adapter

如何重新创建 listView？我有包含少量 TextView 的项目的 listView，我想要重新加载 ListView 并从每一行隐藏这些 TextView 的一部分。我尝试使用 notifyDataSetChanged() 设置新适配器，清除适配器（它使 listView 为空），使 listView 无效。没有什么强制 ListView 重新创建项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:45:03.960

使用由 ArrayList 支持的[ArrayAdapter 。](http://developer.android.com/reference/android/widget/ArrayAdapter.html)要更改数据，只需更新列表中的数据并调用[adapter.notifyDataSetChanged()](http://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetChanged%28%29) - Robby Pond

另请查看[Google I/O 2010 - ListView 的世界](http://www.youtube.com/watch?v=wDBM6wVEO70&t=17m38s)

# java - 具有多个可变查找属性的集合的正确数据结构

> ID：10500802
> 
> 赞同：0
> 
> 时间：2012-05-08T14:39:20.947
> 
> 标签：java, algorithm, oop, data-structures

如果我有 5,000 个或更多类型对象的内存集合`SampleObject`

```
class SampleObject {
  ...
  Date getLastRefreshDate()
  Status getCurrentStatus()
} 
```

我想快速获取刷新日期早于某个值的对象的子列表，并且还能够快速获取具有特定状态的对象，什么数据结构/算法会有用？迭代列表并进行比较是否足够快？如果列表增长到 25,000 或更多怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:41:20.060

A`TreeMap<Date, SampleObject>`可以很容易地完成“比”某个日期“更早”的工作——你只需使用它`headMap`来获取所有对象都比某个值更早。

你需要一个单独的`Map<Status, List<SampleObject>>`（或者，如果你可以使用第三方库，一个 Guava `Multimap`）来跟踪具有某些特定状态的对象，但我认为如果你不愿意支付第二个数据结构是不可避免的线性搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:45:04.257

[NavigableSet](http://docs.oracle.com/javase/7/docs/api/java/util/NavigableSet.html)和[NavigableMap](http://docs.oracle.com/javase/7/docs/api/java/util/NavigableMap.html)类提供了执行此操作的方法。

`NavigableSet`已经提供了类似`headSet`and的方法`tailSet`来获取其他给定元素之前或之后的所有元素。您可以将日期标准用作`Comparator`您班级的自然顺序（如果尚未提供）`SampleObject`。

除了其他有用的方法，如`lower`, `floor`,`ceiling`和`higher`.

同样`NavigableMap`提供类似的方法，如 headMap 和 tailMap 来执行完全相同的切片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T17:08:47.543

> 获取刷新日期早于某个值的对象的子列表，也能够快速获取具有某种状态的对象

听起来像是一个*k*维范围或搜索问题。您的选择包括：

*   [一个*kd*树](http://en.wikipedia.org/wiki/K-d_tree)
*   [范围树](http://en.wikipedia.org/wiki/Range_tree)

如果您主要只返回一维数据，您可能能够通过排序结构摆脱线性访问。

# c# - 在设计器视图中呈现派生用户控件

> ID：10500805
> 
> 赞同：3
> 
> 时间：2012-05-08T14:39:25.563
> 
> 标签：c#, winforms, windows-forms-designer

我有一个`UserControl`看起来像这样的层次结构：

```
public class BaseClass : UserControl
{
    protected Label[] Labels;
    public BaseClass(int num)
    {
        Labels = new Label[num];
        for(int i=0; i<num; i++)
        {
            Labels[i] = new Label();
        }
    }
} 
```

在另一个文件中：

```
public class DerivedClass : BaseClass
{
    public DerivedClass() : base(2)
    {
        // Do stuff to the location, size, font, text of Labels
    }
} 
```

设计此结构以便 BaseClass 处理核心逻辑，而 DerivedClass 处理显示逻辑。Labels 的数量需要是可变的（不同的 DerivedClass 会有不同的 num 值）。

我的问题是我希望设计器视图显示 UserControl，因为它会照顾*显示*调整。有几个问题——首先，如果 BaseClass 缺少默认构造函数，那么 DerivedClass 的设计器视图就会失败。即使我添加了默认构造函数，设计器视图也会显示 DerivedClass 的布局，而不会进行各种显示更改。

我对使用设计器视图来更改控件不感兴趣。我并不反对它，但标签位于数组中的事实似乎阻止了设计器视图能够访问它们。我只是对能够在 DerivedClass 中查看我的显示布局代码的效果感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T16:07:01.357

Windows 窗体设计器中似乎存在一个限制，阻止当前设计的类自己的构造函数运行 - 只有父类构造函数被触发。

如果我以你为例：

```
public partial class BaseControl : UserControl
{
    public BaseControl()
    {
        InitializeComponent();
    }

    protected Label[] Labels;

    public BaseControl(int num) : base()
    { 
        Labels = new Label[num]; 
        for(int i=0; i<num; i++) 
        { 
            Labels[i] = new Label(); 
        } 
    }

}

public class DerivedControl : BaseControl
{

    public DerivedControl() : base(5)
    {
        Controls.Add(Labels[0]);

        Labels[0].Text = "Hello";
        Labels[0].Location = new System.Drawing.Point(10, 10);

    }

} 
```

然后，当我查看派生控件的设计器时，我什么也没看到。但是，如果我添加从 DerivedControl 派生的以下控件：

```
public class GrandchildControl : DerivedControl
{

    public GrandchildControl() : base() { }

} 
```

而且，在构建我的项目之后，在设计器（Visual Studio 2010）中查看它，我看到：

![GrandchildControl 按预期调用 DerivedControl 构造函数](../Images/a4d0f112aae80b6c478d77e562eab005.png)

这似乎是设计师的一个特点。根据[MSDN 博客](http://blogs.msdn.com/b/rprabhu/archive/2004/12/12/280823.aspx)上的这篇博文（这很旧）

1.  必须先构建 Form1，然后才能添加另一个表单，比如 Form2，它在视觉上继承自它。这是因为 Form2 的设计器必须实例化 Form1，而不是 System.Windows.Forms.Form。这也解释了为什么如果在设计器中打开 Form2，将调试器附加到 Visual Studio 并在 Form1 的 InitializeComponent 中设置断点，断点会被命中。

2.  InitializeComponent 上方有一条注释，警告您不要手动修改它。这是因为设计者需要解析这段代码，并且它对它可以解析的内容有一些限制。通常可以保证解析其中序列化的任何内容，但不能解析您可能添加的任意代码。

3.  如果您在构造函数或 Load 事件处理程序中手动（通过代码）将控件添加到窗体，则该控件不会显示在设计器中。这是因为设计器不解析它 - 它只解析 InitializeComponent。

我曾经让它可靠地工作的唯一方法是将我的所有代码移动到一个由 InitializeComponent 调用的方法中（有时，当它被设计者“覆盖”时，你必须记住将它放回原处）或者像我上面所做的那样创建一个 GrandchildUserControl 来伪造我感兴趣的实际控件的构造函数调用。

FWIW 我相信这是 1) 和 3) 的结果，并且几乎可以肯定是设计的解决方法。

第 1 点）还针对这些情况提出了一种很好的调查技术 - 您实际上可以启动另一个 Visual Studio 实例并附加到第一个 Visual Studio 实例*并调试在那里运行的方法调用。*这帮助我解决了过去的几个设计师问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T10:08:46.977

正如 dash 所指出的，设计者创建了一个基类的实例，然后解析 InitializeComponent 方法并执行它的指令。这意味着没有简单的方法让它执行派生类的构造函数中的代码（您应该解析构造函数并执行其指令）。

您必须小心，将派生类的特定指令分组在一个在 InitializeComponent 内部调用的方法中的解决方案仅在该方法足够通用以在基类中定义时才有效，因为设计者正在使用这个基类。这意味着，如果该方法在基类中声明为虚拟方法，则该方法将被执行，而如果基类中没有此类方法，则设计器将崩溃。

你可以按照这些思路做一些事情。在基类中定义这个方法：

```
 protected void CreateLabels(int num)
    {
        Labels = new Label[num];
        for(int i=0; i<num; i++)
        {
            Labels[i] = new Label();
            this.Controls.Add(Labels[i]);
        }
    } 
```

然后，您必须在派生控件的 InitializeComponent 中调用它，并传递正确的 num 值。

然后，您的所有设置也将移至 InitializeComponent 方法。当然，如果它们可以泛化，你可以编写同一种方法。

这种方法的主要缺点是，在您不从设计器修改控件之前，一切都会正常工作，因为您的 InitializeComponent 将被搞砸。您可以通过为控件实现序列化程序来控制这种行为。即你必须实现一个派生自 System.ComponentModel.Design.Serialization.CodeDomSerializer 的类 BaseControlCodeDomSerializer 重新定义 Serialize 方法，如下所示：

```
 public override object Serialize(IDesignerSerializationManager manager, object value)
    {
        BaseControl aCtl = value as BaseControl;
        if (aCtl == null)
            return null;
        if (aCtl.Labels == null)
            return null;
        int num = aCtl.Labels.Length;

        CodeStatementCollection stats = new CodeStatementCollection();

        stats.Add(new CodeSnippetExpression("CreateLabels(" + num.ToString() + ")"));

        return stats;
    } 
```

最后，您可以简单地将 Serializer 与具有此属性的控件相关联：

```
[DesignerSerializer("MyControls.BaseControlCodeDomSerializer", typeof(CodeDomSerializer))] 
```

# jquery - 对一些尚未创建的元素使用 .one()（如 .live()）

> ID：10500807
> 
> 赞同：4
> 
> 时间：2012-05-08T14:39:39.500
> 
> 标签：jquery

有没有办法`one()`与事件委托一起使用？喜欢`on()`或`live()`以便将其应用于未在绑定时创建的 DOM 元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T14:42:11.910

就在这里：

```
// added in jQuery 1.7
// .one( events [, selector] [, data], handler(eventObject) )
$("div").one("click", "span", function (e) {
   $(this).hide(); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:42:42.883

完全一样的方式`.on`

```
$("#to-bind-to").one('event-type', 'delegated-selector', eventFunction); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T14:45:53.303

是的。来自[jQuery`.one()`文档](http://api.jquery.com/one/)：

> jQuery 1.7 中引入的后两种形式与 .on() 相同，只是在委托元素第一次发生事件后删除了处理程序，无论选择器是否匹配任何内容。例如：

```
 $("#foo").one("click", function() {
      alert("This will be displayed only once.");
    });
    $("body").one("click", "#foo", function() {
      alert("This displays if #foo is the first thing clicked in the body.");
    }); 
```

> 代码执行后，单击 ID 为 foo 的元素将显示警报。随后的点击将无济于事。

这意味着，当您使用表单`$(el).one('click', '.selector', handler)`时，它将像`live`- 绑定事件处理程序`el`（必须存在于 DOM 中）但事件处理程序将仅在单击时执行`.selector`，无论该元素是否在您的打电话给`.one()`.

**编辑：**似乎 jQuery 的文档是错误的——至少，我解释它的方式是错误的。根据`alert`以上，

> “如果 #foo 是在正文中单击的第一件事，则会显示。”

这让我觉得如果*首先*在正文中单击其他任何内容，事件处理程序将被删除并且不会再次触发。情况并非如此——事件处理程序将一直存在，直到`#foo`被单击一次。

请参阅[this fiddle](http://jsfiddle.net/bfqvG/)进行演示。

# php - PHP - 致命错误：类 'PHPUnit_Framework_Test

> ID：10500809
> 
> 赞同：2
> 
> 时间：2012-05-08T14:39:41.343
> 
> 标签：php, phpunit, pear, fatal-error, testcase

所以我开始使用 PHPUnit 来测试我的程序。

当我尝试测试程序将控制网页是否存在时，我遇到了这个问题。

编码：

```
<?php
class RemoteConnect  
{  
    public function connectToServer($serverName=null)  
    {  
        if($serverName==null){  
          throw new Exception("That's not a server name!");  
        }  
        $fp = fsockopen($serverName,80);  
        return ($fp) ? true : false;  
    }  
    public function returnSampleObject()  
    {  
      return $this;  
    }  
}  
?> 
```

以及它的测试代码：

```
<?php  
require_once('RemoteConnect.php');  
class RemoteConnectTest extends PHPUnit_Framework_TestCase  
{  
  public function setUp(){ }  
  public function tearDown(){ }  
  public function testConnectionIsValid()  
  {  
    // test to ensure that the object from an fsockopen is valid  
    $connObj = new RemoteConnect();  
    $serverName = 'www.google.com';  
    $this->assertTrue($connObj->connectToServer($serverName) !== false);  
  }  
}  
?> 
```

它们位于同一个目录中，名为：PHPUnit inside the www (C:\wamp\www\PHPUnit)

但我不明白为什么会出现错误（致命错误：第 5 行的 C:\wamp\www\PHPUnit\RemoteConnectTest.php 中未找到 Class 'PHPUnit_Framework_TestCase'）

我的 PHPUnit 包路径是 (C:\wamp\bin\php\php5.3.10\pear\PHPUnit)

我曾尝试制作一个程序 MailSender，它会在其中发送一封包含文本内容的邮件，这只是为了使用 PEAR。它成功了，但我不明白为什么这不起作用。

问候亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:46:57.650

您不需要在**RemoteConnectTest.php中提供****PHPUnit_Framework_TestCase**类吗？

 **在文件顶部添加以下内容：

```
require_once 'PHPUnit/Autoload.php'; 
```**

# ruby-on-rails - Rspec：将控制器属性设置为我的模拟对象

> ID：10500810
> 
> 赞同：0
> 
> 时间：2012-05-08T14:39:47.467
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

我有一个我正在尝试完成的控制器测试。基本上控制器看起来像这样：

```
before_filter :set_up_foo

def set_up_foo
  ...
  @foo = SomeObject.create(params[:some_object_attributes])
  ...
end

def some_action
  # reference @foo
  if @foo.nil?
    ...
  else
    # this is what I want to test
    ...
  end
end 
```

我不想测试 else 块的内部结构，而不是 before 过滤器。在我的情况下，我必须模拟大量模型对象才能实际执行 before 过滤器。我对此有另一个测试。我想确保完成之前过滤器的“副作用”......在这种情况下，@foo 被初始化为它的模拟版本。

基本上我想做：

```
controller.foo = mock_foo_object 
```

但这不起作用。我也试过：

```
controller.stub!(:foo).and_return(mock_foo_object) 
```

尽管我希望（哈哈）这行得通，但事实并非如此。我得到的唯一真实反馈是 @foo 对象从未设置，因此我们得到了 if，而不是 else 条件。

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:36:34.293

所以我找到了这个解决方案：我可以将一个块传递给具有副作用的方法的存根，而不是模拟访问器，以实现该副作用：

```
controller.stub!(:set_up_foo) { controller.set_instance_variable(:@foo, @mock_foo_object) } 
```

这具有确保我关心的一个副作用确实发生的效果。我试过这个，它就像一个魅力。

# java - FSDirectory 和 MMap 目录的区别？

> ID：10500811
> 
> 赞同：9
> 
> 时间：2012-05-08T14:40:01.840
> 
> 标签：java, caching, lucene

谁能解释一下 FSDirectory 和 MMapDirectory 有什么区别？我想预热我的缓存。我读到这可能很有用，但找不到这对预热缓存有何帮助。如果您有任何想法，请向我解释。甚至欢迎指点。

> Lucene 文档说 MMap 使用虚拟内存来加速索引的查找。

**如何实现加速以及如果我的索引很大以至于它们不适合我的虚拟内存会发生什么>**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T00:44:39.127

`MMapDirectory`是抽象`FSDirectory`类的具体子类之一。它使用内存映射文件来访问索引中的信息。

其他选项是`SimpleFSDirectory`和`NIOFSDirectory`，它们使用不同的方法。您应该查看[文档以`FSDirectory`](http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/store/FSDirectory.html)获取所有三个的简要说明。正如您将看到的那样，`FSDirectory.open(File)`尝试为您的环境选择最佳实现。

根据我自己的经验，我没有注意到 和 之间的性能有任何显着差异`NIOFSDirectory`，`MMapFSDirectory`但是您应该使用自己的数据和硬件设置进行一些性能测试。

如果您最终使用`MMapFSDirectory`，虚拟内存和索引大小只能在 32 位机器上成为问题（[除非您的索引大于 2^48 位 = 32TB](http://en.wikipedia.org/wiki/X86-64#Virtual_address_space_details)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:43:26.420

如果您的索引不适合虚拟内存，则使用 FSDirectory 可能会更好。问题是当它不适合虚拟内存时使用 MMapDirectory 等同于使用 FSDirectory 和使用操作系统的缓存算法（操作系统的缓存算法可能比你可以手动编码的更好）。（“等效”，因为在这两种情况下，只有部分索引会同时在物理内存中。）

但正如上面“马丁”所说，您需要自己进行一些性能测试。

# jquery - 表单正在提交，即使条件失败（MVC3）

> ID：10500813
> 
> 赞同：1
> 
> 时间：2012-05-08T14:40:11.300
> 
> 标签：jquery

我正在使用 jQuery 和 MVC 来做这样的表单提交

```
@using (Ajax.BeginForm("Orders", "Customers", new AjaxOptions() {
 InsertionMode = InsertionMode.Replace, UpdateTargetId =
 updatemessages" }, new { id = "formupdate" })) {
       <input type="submit" class="t-button" id="btnupdate" value="Update Orders"/>  
}

<script type="text/javascript">
   $(document).ready(function () {
    $('#btnupdate').live("click", function () {
         return false;
    ); 
  });
 </script> 
```

我在这里做表格发布。

**我在 SUBMIT BUTTON 函数中检查表单验证，如果验证失败，我不想做表单 POST ，如果成功，做表单 POST**

```
$('#btnupdate').live("click", function () {

  if(success) {

  // do form POST <BR/>
}

else
{
// dont do form POST <BR/>

} 
```

## -**实际上，我可以这样做吗**

```
$("form#theForm").submit(function(evt){

    $('#btnupdate').live("click", function () {

if(success) {

// do form POST 
}

else {

evt.preventDefault(); // dont do form POST 

}
  }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:03:21.220

```
 <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript">  </script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
    <script type="text/javascript">
     $(function () {
        $('#btnupdate').live("click", function () {
            if (!$("#formupdate").valid()) {
                return false;
            }
        });

        //Or

        $("form#formupdate").live('submit', function () {
            if (!$(this).valid()) {
                return false;
            }
        });
     });
    </script> 
```

# vb.net - 从文本文件中读取并填充文本框

> ID：10500821
> 
> 赞同：0
> 
> 时间：2012-05-08T14:40:31.040
> 
> 标签：vb.net, visual-studio-2010, readfile

好的，这是我当前的代码。我无法读取文件并相应地填充文本框。加载文件后（我认为是），下面列出的任何文本框中都没有填充任何内容。基本上我不确定文件是否正在被读取。

有什么建议么？

```
 If OpenFileDialog2.ShowDialog() = DialogResult.OK Then
        If My.Computer.FileSystem.FileExists("path_to_file") Then
            Dim ioFile As New System.IO.StreamReader("path_to_file" + "filename")
            TextBox1.Text = ioFile.ReadLine() 'Adds the first line
            TextBox2.Text = ioFile.ReadLine() 'Adds the second line
            TextBox3.Text = ioFile.ReadLine() 'Adds the third line
            TextBox4.Text = ioFile.ReadLine() 'Adds the fourth line
            TextBox5.Text = ioFile.ReadLine() 'Adds the fifth line
        End If
    End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:59:32.560

呃这是什么

```
If My.Computer.FileSystem.FileExists("path_to_file") Then
  Dim ioFile As New System.IO.StreamReader("path_to_file" + "filename") 
```

应该

```
If My.Computer.FileSystem.FileExists(OpenFileDialog2.FileName) Then
  Dim ioFile As New System.IO.StreamReader(OpenFileDialog2.FileName) 
```

# c# - 如何将静态文本设置为 JsonResult？

> ID：10500823
> 
> 赞同：3
> 
> 时间：2012-05-08T14:40:37.143
> 
> 标签：c#, asp.net, asp.net-mvc-3, telerik, telerik-mvc

我找到了我试图理解的以下代码示例（来自[Telerik ）。](http://demos.telerik.com/aspnet-mvc/combobox/ajaxloading)我需要做的是以某种方式将静态文本设置为 JsonResult (egText ="Abc" 和 Value="123")

```
 public ActionResult _AjaxLoading(string text)
    {
        Thread.Sleep(1000);
        using ( var nw = new NorthwindDataContext() )
        {
            var products = nw.Products.AsQueryable();
            if ( text.HasValue() )
            {
                products = products.Where((p) => p.ProductName.StartsWith(text));
            }
            return new JsonResult { Data = new SelectList(products.ToList(), "ProductID", "ProductName") };
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T15:02:40.093

```
public ActionResult _AjaxLoading(string text
{
  var data = new { Text= "123", Value= "Abc"};
  return Json(data, JsonRequestBehavior.AllowGet);
} 
```

如果是`HTTPGet`方法，则应指定第二个参数以从方法`JsonRequestBehavior.AllowGet`返回 JSon 数据`GET`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T14:45:03.523

看起来你需要这个：

```
return new JsonResult { Data = new { Text="Abc", Value="123", Produtcs= new SelectList(products.ToList(), "ProductID", "ProductName") }}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T14:43:22.283

这是你想要的

```
return new JsonResult { Text = "Abc", Value="123" }; 
```

如果您想在开始时向下拉列表中添加一个新元素，那么

```
var editedProducts = new SelectList(products.ToList(), "ProductID","ProductName" ).ToList();
editedProducts.insert(0, new SelectListItem() { Value = "123", Text = "Abc" });

return new JsonResult { Data = editedProducts }; 
```

# java - Thread.sleep() 是否使执行停止准确的间隔

> ID：10500831
> 
> 赞同：1
> 
> 时间：2012-05-08T14:41:11.930
> 
> 标签：java

这是我的代码

```
try{

  System.out.println("Before");
  thread.sleep(10000);//sleep for 10000 ms
  System.out.println("After");

}
catch(ItrerruptedException ie){
//If this thread was intrrupted by nother thread 
} 
```

我只想知道线程是否会休眠 10 秒然后打印`After`或者有一些延迟？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T14:45:46.997

来自 javadocs：`Causes the currently executing thread to sleep (temporarily cease execution) for the specified number of milliseconds, subject to the precision and accuracy of system timers and schedulers.`这意味着它将至少休眠 10 秒。如果调度程序决定在 10 秒结束后不让它运行，它可能会休眠更长时间。
如果更多并发线程同时在可运行池中，则可能会发生这种情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T15:03:18.727

非实时调度程序不能保证时间。

如果您正在执行某种真正依赖时序的硬件通信，您可能应该使用[RTSJ](http://java.sun.com/javase/technologies/realtime/index.jsp)。

如果您每 x 毫秒执行一次操作，则可以使用[TimeTask](http://www.javapractices.com/topic/TopicAction.do?Id=54)，它的性能会稍好一些。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T14:43:59.210

它会休眠至少 10 秒，然后很快就会醒来（除非被打断）。多久之后取决于操作系统和机器上的负载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T14:43:43.910

它或多或少是随机的，因为您的操作系统任务调度程序通常不需要为您的进程提供所需的所有关注。通常，您将无法休眠很短的时间（例如，`Thread.sleep(5)`可能会在调用后 5 毫秒后恢复您的进程），但随着您增加休眠时间，相对精度会增加。

如果您可以容忍一些余地，`Thread.sleep(10000)`通常会睡足够接近 10 秒的时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T14:46:55.767

我会说除非你有很多线程运行它非常接近准确。如果你有几个线程，那么这是一个竞争。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T14:49:15.330

线程从休眠到运行的开销非常低。

# android - 在同一屏幕上显示多个活动

> ID：10500832
> 
> 赞同：0
> 
> 时间：2012-05-08T14:41:13.703
> 
> 标签：android

TabHost 有一个很棒的方法 setContent，我可以在其中设置另一个 Activity，因此我将有两个活动活动：TabActivity 和我将在 setContent 中设置的活动。

没有 TabHost 有没有可能做到这一点？只有一个有视图的活动，我可以在其中设置另一个活动。

**PS 片段对我不起作用！！！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T14:46:25.643

不，恐怕在 TabHost 旁边或使用片段，这是不可能的。实际上，没有 tabHost - 我不明白为什么这样的东西对你有用。因为在没有标签的活动之间切换 - 是微不足道的..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:04:59.543

如果想在同一个activity中显示不同的view，可以通过ViewGroup。它**不是**不同的Activity，但它可以满足您的需求。你可以检查它，如果你运行 ApiDemos - 去 Views->Animation->3D Transition。

# python - 能够在输入中使用任何大小写在输出中生成相同的 dict 值

> ID：10500834
> 
> 赞同：0
> 
> 时间：2012-05-08T14:41:14.863
> 
> 标签：python, dictionary, case

我有以下代码：

```
people = {'Bob' : {'phone' : '12',
            'birthday' : 'May',
            'address' : 'ABC',
            'interests' : ['a', 'b', 'c']},
        'Mary' : {'phone' : '13',
            'birthday' : 'April',
            'address' : 'CBA',
            'interests' : ['d', 'e', 'f']},

            response = ['']
wrong = "I don't know. Try again or type 'quit' to get out: " 
while response[0] != 'quit': 
    response = raw_input("Please enter who you're looking for, or type 'quit' to get out: ").split() 
    try:
        print "%s's %s is %s" % (response[0], response[1], people[response[0]][response[1]])  
    except KeyError: 
        print wrong, 
```

我想让它在任何情况下都可以输入并且仍然生成正确的输出。例如

```
'Mary phone', 'mary Phone', 'MARY PHONE' 
```

都给

```
Mary's phone number is 13. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:45:47.890

你应该使用`capitalize()`和`lower()`

```
while response[0] != 'quit': 
    response = raw_input("Please enter who you're looking for, or type 'exit' to quit the program: ").split() 
    try:
        print "%s's %s is %s" % (response[0].capitalize(), response[1].lower(), people[response[0].capitalize()][response[1].lower()])  
    except KeyError: 
        print wrong, 
```

如果您走这条路线，您应该将`'bob'`密钥更改为`'Bob'`...

或者，如果您重复使用结果，您可以节省更多的 CPU 周期，如下面的 rubik 所述。

```
while response[0] != 'quit': 
    response = raw_input("Please enter who you're looking for, or type 'exit' to quit the program: ").split() 
    try:
        fn, thing = response[0].capitalize(), response[1].lower()
        print "%s's %s is %s" % (fn, thing, people[fn][thing])  
    except KeyError: 
        print wrong, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T14:46:25.880

尝试使用 . 将输入转换为小写，以确保输入始终为小写`str.lower()`。然后确保您的所有`people{}`名称也是小写以便于搜索，并在执行输出时将输出格式化回大写名称。

# ios - 在 UITableView 之外聚焦以移除键盘

> ID：10500842
> 
> 赞同：3
> 
> 时间：2012-05-08T14:41:50.033
> 
> 标签：ios, ios5

我使用 UITableView 作为用户/密码登录控件。现在它是视图上的唯一控件，还有一个登录按钮。当我点击里面时，文本编辑内容变为活动状态，键盘弹出，我可以输入。但是没有办法停止编辑。我想在我的 UIView 的白色区域上单击外部，以便将焦点从我的 UITableVIew 内的文本编辑器中移开，并且键盘再次变得不可见。

我怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T14:57:09.860

您可以添加 alpha 通道为零的按钮。在您的登录名和密码字段后面。通过以下方式设置此按钮的操作：

```
-(void)hideKeyboard:(id)sender
{
   [self.username resignFirstResponder];
   [self.password resignFirstResponder];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T15:07:21.087

在`viewDidLoad`让您的视图控制器监听键盘通知并创建一个点击识别器，它将接收您的 tableView 之外的所有事件：

```
- (void)viewDidLoad
{
   [super viewDidLoad];
   ...

    NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];

    [nc addObserver:self selector:@selector(keyboardWillShow:) name:
     UIKeyboardWillShowNotification object:nil];

    [nc addObserver:self selector:@selector(keyboardWillHide:) name:
     UIKeyboardWillHideNotification object:nil];

    tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(dismissKeyboard:)];

    ... 
} 
```

然后在键盘的通知方法中从您的视图中添加和删除手势识别器。

```
//add gesture recognizer when keyboard appears
-(void)keyboardWillShow:(NSNotification *) note {
    [self.view addGestureRecognizer:tapRecognizer];
}

//remove it when keyboard disappears
-(void)keyboardWillHide:(NSNotification *) note
{
    [self.view removeGestureRecognizer:tapRecognizer];
} 
```

在手势识别器的操作方法中，您让所有第一响应者退出键盘：

```
-(IBAction)dismissKeyboard:(id)sender
{
    //this removes ALL firstResponder from view
    [self.view endEditing:TRUE];
} 
```

不要忘记在某个时候结束收听键盘通知：

```
[[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T14:47:15.263

在被调用函数中添加 Single Tap GestureRecognizer 并退出键盘

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(resignKeyBoard)];
[tap setNumberOfTapsRequired:1];
[self.view addGestureRecognizer:tap]; 
```

# java - 在运行 Java 代码的 OSX 上设置 crontab

> ID：10500848
> 
> 赞同：0
> 
> 时间：2012-05-08T14:42:01.660
> 
> 标签：java, cron, terminal, osx-snow-leopard, crontab

我有一个名为 cron.txt 的文本文件，它引用了一个 java 调用。findme.txt：

`java -classpath /example/...jkk/ findthesethings | mailx -s "does this work" email@address.com`

这是我的 cron.txt 文件中的一行：

`0 * * * * /Users/USERNAME/Desktop/scripts/findme.txt`

然后在终端中我输入 crontab cron.txt，这似乎是设置 cron 来运行等，因为 crontab -l 的输出会显示 cron.txt 的主体......但每小时似乎没有运行？

# c# - 如何获得不在另一个列表中的项目列表

> ID：10500850
> 
> 赞同：0
> 
> 时间：2012-05-08T14:42:02.900
> 
> 标签：c#, .net, linq, list, except

我想`BeerNames`从一个不在第二个列表中的列表中获得一个列表。

```
var myList=(from f in Beers where ...
              select f.BeerNames).ToList

var storeList(from f in Store where...
                select f).ToList() 
```

MyList 将有一些不在 StoreList 上的 BeerNames。我如何找到那些 BeerNames？我试过了`.Except`，`!Contains`但我意识到我做错了什么，并且错过了一些关键的知识。谢谢

如果我改变

```
var storeList(from f in Store where...
                select f).ToList() 
```

至

```
var storeList(from f in Store where...
                select f.BeerNames).ToList() 
```

然后我可以使用除了`List1.Except(List2)`. 我不确定是否有更好的方法。对不起，如果这不清楚......我正在尝试:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:51:20.290

```
var list1 = new String[] {"ABC1","ABC2", "ABC3", "ABC4"} ;
var list2 = new String[] {"ABC3","ABC4", "ABC5", "ABC6"} ;
var list3 = list1.Except(list2); // list3 holds ABC1, ABC2 
```

除了工作正常。

我怀疑问题出在从 linq 查询返回的项目中。似乎首先是 f.BeerNames，而 StoreList 中的 f 没有指向相同的数据类型。

对于异种类型

```
var list1 = from s in new String[] {"ABC1","ABC2", "ABC3", "ABC4"} select new {BeerName=s,Id = Guid.NewGuid().ToString()}  ;
var list2 = new String[] {"ABC3","ABC4", "ABC5", "ABC6"} ;
var intermediateList = list1.Select(i=>i.BeerName).Except(list2);
var list3 = from l1 in list1
        join l2 in intermediateList on l1.BeerName equals l2
        select l1;

list1.Dump(); // run in linqPad
intermediateList.Dump();// run in linqPad
list3.Dump();// run in linqPad 
```

list3 返回以下

啤酒名称 ID

ABC1 569ace9a-66c4-46aa-bbf5-50d586a2886f

ABC2 af456094-9692-4771-b489-8b3cca8aa938

使用[LinqPad](http://www.linqpad.net/)运行上述程序，或删除 .Dump() 以在 VS 中执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:50:40.977

除了应该使用字符串类型

```
var myList = MyFrig.Select(f => f.BeerNames).Except(Store).ToList(); 
```

# uml - 用于描述分层（嵌套）有限状态机的标准文件格式？

> ID：10500856
> 
> 赞同：3
> 
> 时间：2012-05-08T14:42:21.820
> 
> 标签：uml, standards, graphviz, state-machine, scxml

我需要以标准和可移植的格式描述分层有限状态机。是否有我应该使用的被广泛接受和支持的文件格式？

*   我看到[Graphviz DOT 语言](http://www.graphviz.org/content/dot-language)支持可能被有向边引用的子图。（尽管使用 Graphviz 渲染连接的集群[有点问题](https://stackoverflow.com/questions/2012036/graphviz-how-to-connect-subgraphs)。）将通用有向边上的文本标签解释为转换事件/标准似乎有点语义拉伸，但并非不可用。

*   我看到[UML 状态图](http://en.wikipedia.org/wiki/UML_state_machine)支持[分层嵌套状态](http://en.wikipedia.org/wiki/UML_state_machine#Hierarchically_nested_states)。然而，[这个问题的公认答案](https://stackoverflow.com/questions/7930199/standard-uml-file-format)意味着我自己在 XMI 中描述状态图实际上可能无法与名义上支持 UML 的工具正确互操作。

*   我看到了[W3C SCXML 标准](http://www.w3.org/TR/scxml/)。然而，这仍然是一个工作草案（已经有将近 7 年了），我不确定是否有任何工具支持这种格式（除了通过[转换](http://code.google.com/p/scxml2dot/)）。

是否有比上述任何一种更广泛接受的替代方案？我应该使用上述一种还是另一种？

*可移植性的一个例子是，我希望图形能够被[Matlab Stateflow](http://www.mathworks.com/products/stateflow/)之类的 HSM 模拟器读取和使用。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:52:56.403

有一个[用于 UML 图交换的 OMG 标准](http://www.omg.org/spec/UMLDI)。但我不认为它被广泛接受。您还可以使用[eclipse EMF UML2](http://www.eclipse.org/modeling/mdt/?project=uml2)格式，您可以为此开发自己的其他格式的翻译器。

# jquery - 我可以限制 CellSelectionModel 插件选择特定的列/单元格吗？

> ID：10500857
> 
> 赞同：0
> 
> 时间：2012-05-08T14:42:22.213
> 
> 标签：jquery, slickgrid

我需要禁用网格前两列的单元格选择。

slickgrid/CellSelectionModel 支持这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:08:53.687

在列定义上设置 'selectable:false'。

# php - 使用 ATK4 中其他模型/数组的列扩展 CRUD

> ID：10500859
> 
> 赞同：1
> 
> 时间：2012-05-08T14:42:32.657
> 
> 标签：php, atk4

在 atk4 中，我喜欢用一列扩展 CRUD，该列是模型中可用列的数组中的查找。获取catshop_id已经可用的类别名称（catshop）。但是 catshop 只能作为数组使用。

型号为：

```
class Model_CatLink extends Model_Table {
  public $table='catlink';
  function init() {
    parent::init();
    $this->addField('catshop_id');
    $this->addField('margin_ratio');
  }
} 
```

在页面上我有：

```
$catshop=array(1=>'cat1',2=>'another cat 2',...,123=>'top cat'); 
$c=$p->add('CRUD');
$m=$this->add('Model_CatLink');
$c->setModel($m); 
```

现在网格显示 catshop_id 和 margin_ratio 字段。使用 catshop_id 我想查找 $catshop 中可用的类别标题。这个 $catshop 数组实际上是从另一个 mysql 平台检索的，因此无法加入。

**如何用 catshop 列扩展 crud？** 到目前为止，我尝试的是使用 addExpression 扩展模型本身......无法让它工作。

我想是这样的，首先将其添加到模型中：

```
$self=$this;
$this->addExpression('catshop')->set(function($select) use ($self){
    return $self->catshop[$self->get('catshop_id')];
}); 
```

然后在页面上将 $catshop 传递给模型：

```
$catshop=array(1=>'cat1',2=>'another cat 2',...,123=>'top cat'); 
$c=$p->add('CRUD');
$m=$this->add('Model_CatLink');
$m->catshop=$catshop;
$c->setModel($m); 
```

然后我想在 $c->setModel($m) 之前将值添加到模型中，尽管我不确定如何进行。

我正在寻找的结果是一个 CRUD，它显示 catshop 字符串，还允许使用 catshop 数组中的下拉构建更改 catshop_id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:28:33.883

您不需要扩展 CRUD，您需要扩展 CRUD 正在积极使用的 Grid。或者，您可以扩展模型加载。

# 选项 1：在网格中：

```
class MyGrid extends Grid {
    function init(){
        parent::init();
        $this->add('myfield','category');
    }
    funciton format_myfield($field){
        $this->current_row[$field]=
            $this->model->lookupCategory($this->current_row[$field]);

        // use current_row_html[] if you want HTML output
    }
} 
```

然后，当您创建 CRUD 时，您需要指定：

```
$c=$this->add('CRUD',array('grid_class'=>'MyGrid')); 
```

# 选项 2：在模型中：

您的替代方案是模型内部的 afterLoad：

```
class Model_CatLink extends Model_Table {
    function init(){
        parent::init();

        $this->addExpression('category')->set('undefined'); // nothing by default

        $this->addHook('afterLoad',$this);
    }
    function afterLoad(){
        $this['category']=$this->lookupCategory($this['category_id']);
    }
} 
```

# c++ - 编译.h文件

> ID：10500860
> 
> 赞同：0
> 
> 时间：2012-05-08T14:42:38.847
> 
> 标签：c++, makefile

如何在我的 makefile 中包含我自己的“.h”文件的重新编译/更新。

这是我的生成文件：

```
COMPILER = g++
SOURCES =  main.cpp 
APP = executable/main

OBJECTS = $(SOURCES:.cpp=.o)

all: $(SOURCES) $(APP) 

$(APP): $(OBJECTS)
    $(COMPILER) $(OBJECTS) -o $@

clean:
    rm -rf *.o $(APP) 
```

假设现在我想重新编译项目，但我只是修改了whatever.h 和whatever1.h。这些文件包含在 main.cpp 的头文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:08:49.213

**将这些文件添加到`$(APP)`.** 这将导致 Make 重新链接（即从 构建`main`）`main.o`但不会重新编译（即`main.o`从和构建`main.cpp`）。可执行文件的行为不会改变——它不会反映您对标头所做的更改。`whatever.h``whatever1.h`

您应该将这些文件添加到*目标文件*的先决条件列表中：

```
main.o: whatever.h whatever1.h 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-08T14:50:26.827

在你的应用依赖列表中添加头文件：

```
COMPILER = g++
SOURCES =  main.cpp
HEADERS = whatever.h whatever1.h
APP = executable/main

OBJECTS = $(SOURCES:.cpp=.o)

all: $(SOURCES) $(APP) 

$(APP): $(OBJECTS) $(HEADERS)
    $(COMPILER) $(OBJECTS) -o $@

clean:
    rm -rf *.o $(APP) 
```

# ruby - 不等于 (ne) 和 OR 未在 Mongoapper 范围内返回正确结果

> ID：10500862
> 
> 赞同：1
> 
> 时间：2012-05-08T14:42:39.960
> 
> 标签：ruby, mongodb, model, scope, mongomapper

我不能在 Mongoapper 中使用 OR 将这两个范围链接在一起：

```
scope :comment_is_nil, where(:comment => nil)
scope :post_not_blank, where(:post.ne => "") 
```

它应该返回评论不为零的模型对象，或者帖子不为空白。

这不起作用：

```
Model.where("$or" => [{:comment_is_nil, :post_not_blank]) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:00:34.107

链接作用域是一个**和**操作，所以`M.comment_is_nil.post_not_blank`不会像你知道的那样工作。[MongoDB 的**or**语法](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24or)如下所示：

```
Model.where(
    :$or => [
        { :comment => nil },
        { :post.ne => ''  }
    ]
) 
```

因此，您需要通过手动扩展范围来为其提供一系列单独的条件。

# ant - 在自定义任务中运行嵌套任务

> ID：10500867
> 
> 赞同：0
> 
> 时间：2012-05-08T14:42:52.877
> 
> 标签：ant, nested, antbuilder

我已经编写了自己的 ANT 任务来执行某些功能。但是，我需要这个任务来调用 java 任务作为嵌套任务。所以我的构建文件中有以下代码：

```
<mytask ... >
  <java ... />
</mytask> 
```

我想在java任务完成执行之后但在`mytask`完成之前运行一段代码，以进行清理。

这是一个损坏的设计，不建议在构建文件中使用吗？如果不是，我应该覆盖哪种方法来运行清理方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:09:50.450

让你的任务实现`org.apache.tools.ant.TaskContainer`接口，编写你自己的`addTask(Task task)`方法。

例如（它应该只接受一个名为“java”的任务）：

```
private List<Task> _nestedTask = new ArrayList<>();

public void addTask(Task task) {
    if (task.getTaskName().equals("java")) {
        _nestedTasks.add(task);
    }
    else {
        throw new BuildException("Support only nested <java> task.");
    }
} 
```

请注意，如果您`<java>`在构建文件中编写了多个嵌套任务，则需要您自己处理它们。要执行嵌套`<java>`任务，只需遍历列表并`execute()`为每个任务调用方法。

更新：

添加嵌套任务时，它不会自动运行。`execute()`如果您的自定义任务中没有调用它的方法，它甚至不会运行。

所以......一个非常基本和简单的例子：

```
// your custom task's execute...
public void execute() {
    //do something

    for (Task task : _nestedTask) {
        task.perform(); // here the nested task is executed.
    }

    //do something
} 
```

# javascript - javascript 中的对象字面量。如何访问引用的对象的“prop s”？

> ID：10500869
> 
> 赞同：0
> 
> 时间：2012-05-08T14:43:02.637
> 
> 标签：javascript

在 javascript 教程中，我看到了下一个对象定义：

```
var myObject = {
    validIdentifier: 123,
    'some string': 456,
    99999: 789
}; 
```

这种带有引号的键值对作为键的目的是什么？如何以这样的价值观运作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T14:44:03.310

您可以使用括号（称为[“括号表示法”或“下标运算符”](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Member_Operators)）访问它们：

```
myObject['some string'] 
```

由于空格，必须引用这样的键（以避免语法错误）。

这样做的原因取决于开发人员。一个（例如，一百万个）示例是将事件和选择器映射到处理函数[`Backbone.js`的 's 。`delegateEvents`](http://documentcloud.github.com/backbone/#View-delegateEvents)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T14:45:10.183

如果将它们放在字符串中，则可以使用特殊字符。例如，这是无效的：

```
myObj.prop-one 
```

但这是：

```
myObj["prop-one"] 
```

这在访问 DOM 元素的 CSS 属性时特别有用，如下所示：

```
myElement.style["background-color"], 
```

什么时候`myElement.style.background-color`无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T14:44:31.593

> 这种带有引号的键值对作为键的目的是什么？

在许多情况下，名称中有空格很有用。

```
var people_per_street = {
    "1st Street: [ ... ],
    "Broadway": [ ... ]
    /* etc */
}; 
```

> 如何以这样的价值观运作？

`myObject['validIdentifier'], myObject['some string'], myObject['99999']`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T14:45:13.967

这是一种将逻辑上属于彼此的变量组合在一起的方法。

像这样访问它们：

```
myObject['some string']; 
```

# c# - 通过 WCF 服务序列化通用类型

> ID：10500870
> 
> 赞同：9
> 
> 时间：2012-05-08T14:43:06.270
> 
> 标签：c#, wcf

我有一个 C# 类定义如下：

```
public class GenericItem<T>
{
  public List<T> Items { get; set; }

  public DateTime TimeStamp { get; set; }
} 
```

我正在我的服务器上创建这个类的一个实例。然后，我尝试通过 WCF 服务将其通过网络传递，如下所示：

```
[OperationContract]
public GenericItem<MyCustomType> GetResult()
{
  GenericItem<MyCustomType> result = BuildGenericItem();
  return result;
} 
```

此时一切都编译得很好。当我在 Silverlight 应用程序中“更新服务参考”并重新编译时，我收到一个编译时错误，类似于以下内容：

*MyNamespace.GenericItemOfMyCustomType[extra chars] 不包含“GetEnumerator”的公共定义*

我不知道为什么：

1.  出现额外的字符。每次我更新服务参考时，似乎都会发生变化。
2.  如何实际解决这个问题。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T14:59:05.477

[Sleiman 是正确的，但是可以使用本文](http://jeffbarnes.net/blog/post/2007/05/10/WCF-Serialization-and-Generics.aspx)中描述的有界泛型，并且您可能能够实现您想要的。这允许您在服务中创建泛型类型并将其公开。但是消费者不会认为它像服务操作中指定的类型那样通用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T14:53:07.247

您不能定义依赖泛型类型参数的 WCF 协定。泛型是特定于 .NET 的，使用它们会违反 WCF 面向服务的性质。但是，数据协定可以将集合作为数据成员包括在内，因为 WCF 为集合提供了专用的封送规则。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T14:58:30.677

正如 sleiman 所指出的，SOAP 不支持泛型。

WCF 和泛型 -> [http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/79585667-6b97-4ce4-93fa-3a4dcc7a9b86](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/79585667-6b97-4ce4-93fa-3a4dcc7a9b86)

相关问题-> [WCF。服务通用方法](https://stackoverflow.com/questions/2906694/wcf-service-generic-methods)

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2014-11-19T14:09:01.653

您可以在客户端使用以下内容，而不是使用服务引用：

```
var myBinding = new BasicHttpBinding();
var myEndpoint = new EndpointAddress("");
var myChannelFactory = new ChannelFactory<IService>(myBinding, myEndpoint);
IService gks = myChannelFactory.CreateChannel(); 
```

适用于泛型。

# mercurial - 在服务器上设置 TortoiseHg

> ID：10500871
> 
> 赞同：1
> 
> 时间：2012-05-08T14:43:09.420
> 
> 标签：mercurial, tortoisehg, windows-server

我想在我的服务器上设置 tortoisehg。我做的。

我已经设置了 tortoisehg 提供的网络服务器。但是我想管理可以使用存储库（可以读/写）的用户我如何使用他们的密码设置用户？

我非常喜欢 VisualSVN 服务器的这种功能[http://www.visualsvn.com/server/](http://www.visualsvn.com/server/)。是否有可能与 tortoisehg 有类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T01:18:10.380

当我在 Windows Server 2000 上做这件事时，我不想弄乱 Apache，最后使用这个 HOWTO 在 nginx 后面设置 hg serve：

[https://www.mercurial-scm.org/wiki/HgServeNginx](https://www.mercurial-scm.org/wiki/HgServeNginx)

这里的诀窍是您需要将 hg serve 作为 Windows 服务运行。你需要[srvany](http://support.microsoft.com/kb/137890)或类似的东西来做到这一点。

这仅允许每个人都可以读取的配置，但只有经过身份验证的用户才能推送，或者，如果您删除`limit_except GET`，则只有经过身份验证的用户才能阅读和推送。更详细的权限方案需要额外的设置。

# mysql - MySQL插入包含单引号和双引号的数据给出语法错误

> ID：10500880
> 
> 赞同：5
> 
> 时间：2012-05-08T14:43:40.473
> 
> 标签：mysql, insert, quotes

我在将数据从一个数据库拉入另一个数据库的工具中使用以下插入语句。

```
INSERT INTO act_vulnerabilities_internal_test (device_type, ip_address, user_tag,       
repositoryID, severity, pluginID, pluginName, pluginText)

VALUES ("@Data.device_type~", "@Data.ip_address~", "@Data.user_tag~",    
"@Data.repositoryID~", "@Data.severity~", "@Data.pluginID~", "@Data.pluginName~",   
 @Data.pluginText~) 
```

错误信息：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的 '\nSynopsis :\n\nIt is possible to retrieve file backups from the remote web serv' 附近使用正确的语法

我试图从其中一列中提取的数据中有很多单引号和双引号（这是从专有工具中提取的，我无法编辑数据）。给我问题的专栏是名为 pluginText 的专栏。有没有办法让数据库忽略行中包含的 ' 和 " ？

mysql_real_escape_string 我需要正确执行此操作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T15:21:19.810

**更新**：用[`QUOTE()`函数来做](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_quote)。

*原答案：*

请试试这个：

```
INSERT INTO 
...
VALUES (
...
, REPLACE(@Data.pluginText, '"', '\"')
) 
```

或者如果你有单引号*和*双引号：

```
INSERT INTO 
...
VALUES (
...
, REPLACE(REPLACE(@Data.pluginText, '"', '\"'), "'", "\'")
) 
```

[你可以在这里](http://dev.mysql.com/doc/refman/5.0/en/string-literals.html)阅读更多关于它的信息

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-21T20:31:10.773

我们需要使用该`addslashes($text)`函数将所有的单引号和双引号、NULL等转义，以使MYSQL可以理解。 [这里有一些关于这方面的信息。](https://ahmsaiful.wordpress.com/2009/12/20/insert-string-with-single-quote-or-double-quote-in-mysql/)

# c++ - 如何在 C++ 中使用 GUID 查找设备

> ID：10500881
> 
> 赞同：1
> 
> 时间：2012-05-08T14:43:41.003
> 
> 标签：c++, device, guid, hid

这是一个两部分的问题。

首先，这是我的代码：

```
#include<iostream>
#include<Windows.h>

extern "C"
{
#include<hidsdi.h>
#include<SetupAPI.h>
}

int main()
{
    int iQuit;
    GUID guid;

    HidD_GetHidGuid(&guid);
    //SetupDiGetClassDevs(NULL, NULL, NULL, 

    std::cout << "testing program" << std::endl;
    std::cout << guid.Data1 << std::endl;
    std::cout << guid.Data2 << std::endl;
    std::cout << guid.Data3 << std::endl;
    std::cout << guid.Data4 << std::endl;

    std::cin >> iQuit;

    return 0;
} 
```

结果被打印出来：

```
1293833650
61807
4559
//Data4 prints out e pie for some reason. 
```

所以我的第一个问题是，有没有办法检查我在这里得到的 guid 属于哪个设备？我查看了设备管理器部分，但似乎找不到它。

我的第二个问题是如何遍历所有设备并将所有 guid 存储在计算机上？

任何建议和帮助将不胜感激。很抱歉这么长的信息

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:56:15.370

该函数`HidD_GetHidGuid`返回所有 HID 类设备的 GUID，而不是单个设备的 GUID。

要枚举所有设备，请查看[SetupDiGetClassDevs](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551069%28v=vs.85%29.aspx)示例 5。

# javascript - Techart HTML5/Javascript 标签自动缩放

> ID：10500883
> 
> 赞同：0
> 
> 时间：2012-05-08T14:43:45.330
> 
> 标签：javascript, html, teechart

在我写信给他们的支持之前，我想问问你们。

我已经购买了 teechart javascript 版本。它工作正常，但问题是我在我的系列上使用的标签彼此堆叠，它的日期。

我希望他们只显示适合的内容，并在缩放时显示更多。

这是我的代码

```
 <script type="text/javascript">
var Chart;

function draw() {

    Chart=new Tee.Chart("graf");

        var input0 = new Tee.Line();

    Chart.addSeries(input0);

    input0.data.values =  ["-47.9","-47.6","-47.4","-48.6","-48.2","-49.7","-49.1","-49.2","-48.1","-47.6","-48.3","-48","-49.3","-49.2","-49.7","-49.8","-47.5","-47.2","-49","-47.4","-47.6","-49.4","-48.1","-48.6","-48.4","-48.5","-48.7","-49.1","-48.6","-49.4","-49.7"];
    input0.data.labels = ["120503 14:00","120503 14:01","120503 14:02","120503 14:03","120503 14:04","120503 14:05","120503 14:06","120503 14:07","120503 14:08","120503 14:09","120503 14:10","120503 14:11","120503 14:12","120503 14:13","120503 14:14","120503 14:15","120503 14:16","120503 14:17","120503 14:18","120503 14:19","120503 14:20","120503 14:21","120503 14:22","120503 14:23","120503 14:24","120503 14:25","120503 14:26","120503 14:27","120503 14:28","120503 14:29","120503 14:30"];
    input0.title = "Input 1";
        var input1 = new Tee.Line();

    Chart.addSeries(input1);

    input1.data.values =  ["-38.4","-37.9","-39.8","-39.1","-37","-37","-39.9","-39.5","-39.4","-38.9","-37.9","-38.5","-37.1","-38.1","-37.6","-39.7","-39.8","-38.4","-39.7","-37.7","-39.1","-37.4","-38.8","-39.3","-38.8","-38.8","-38.5","-39.1","-39.4","-37.1","-39.5"];
    input1.data.labels = ["120503 14:00","120503 14:01","120503 14:02","120503 14:03","120503 14:04","120503 14:05","120503 14:06","120503 14:07","120503 14:08","120503 14:09","120503 14:10","120503 14:11","120503 14:12","120503 14:13","120503 14:14","120503 14:15","120503 14:16","120503 14:17","120503 14:18","120503 14:19","120503 14:20","120503 14:21","120503 14:22","120503 14:23","120503 14:24","120503 14:25","120503 14:26","120503 14:27","120503 14:28","120503 14:29","120503 14:30"];
    input1.title = "Input 2";
        var input2 = new Tee.Line();

    Chart.addSeries(input2);

    input2.data.values =  ["-28.3","-29.9","-27.2","-28.1","-27.3","-28","-29.1","-29.5","-29.4","-29.1","-27.3","-28.5","-29.8","-28.4","-28.6","-29","-29.4","-29.7","-28.2","-29.2","-29.3","-28.2","-27.1","-27","-27.5","-27.9","-29.3","-29.5","-27.9","-29.8","-29.9"];
    input2.data.labels = ["120503 14:00","120503 14:01","120503 14:02","120503 14:03","120503 14:04","120503 14:05","120503 14:06","120503 14:07","120503 14:08","120503 14:09","120503 14:10","120503 14:11","120503 14:12","120503 14:13","120503 14:14","120503 14:15","120503 14:16","120503 14:17","120503 14:18","120503 14:19","120503 14:20","120503 14:21","120503 14:22","120503 14:23","120503 14:24","120503 14:25","120503 14:26","120503 14:27","120503 14:28","120503 14:29","120503 14:30"];
    input2.title = "Input 3";
        var input3 = new Tee.Line();

    Chart.addSeries(input3);

    input3.data.values =  ["-19.1","-18.8","-18.9","-18.1","-19.3","-20","-18.9","-18.1","-18.2","-17.2","-17.5","-18.6","-18.8","-19.5","-17.7","-19.6","-18","-17.7","-19.5","-18","-18.6","-17.7","-19.7","-19.6","-17.5","-19.5","-18.1","-18.4","-17.8","-19.8","-17.9"];
    input3.data.labels = ["120503 14:00","120503 14:01","120503 14:02","120503 14:03","120503 14:04","120503 14:05","120503 14:06","120503 14:07","120503 14:08","120503 14:09","120503 14:10","120503 14:11","120503 14:12","120503 14:13","120503 14:14","120503 14:15","120503 14:16","120503 14:17","120503 14:18","120503 14:19","120503 14:20","120503 14:21","120503 14:22","120503 14:23","120503 14:24","120503 14:25","120503 14:26","120503 14:27","120503 14:28","120503 14:29","120503 14:30"];
    input3.title = "Input 4";
        var input4 = new Tee.Line();

    Chart.addSeries(input4);

    input4.data.values =  ["-9.1","-7.4","-8.4","-9.2","-7.9","-8.3","-9.1","-8.8","-9.8","-8.1","-9.9","-8.9","-8.9","-7.2","-8.2","-10","-8.6","-8.8","-7.2","-9.2","-9.2","-7.2","-7.2","-9.9","-8","-8.7","-8.5","-9.3","-8.2","-7.6","-8.4"];
    input4.data.labels = ["120503 14:00","120503 14:01","120503 14:02","120503 14:03","120503 14:04","120503 14:05","120503 14:06","120503 14:07","120503 14:08","120503 14:09","120503 14:10","120503 14:11","120503 14:12","120503 14:13","120503 14:14","120503 14:15","120503 14:16","120503 14:17","120503 14:18","120503 14:19","120503 14:20","120503 14:21","120503 14:22","120503 14:23","120503 14:24","120503 14:25","120503 14:26","120503 14:27","120503 14:28","120503 14:29","120503 14:30"];
    input4.title = "Input 5";
        var input5 = new Tee.Line();

    Chart.addSeries(input5);

    input5.data.values =  ["2.3","2.4","2.3",".8","2.9",".3","2.8","1.2","1.4","1.9","1.6","1.2","1.5","2","2.5","1.6","1.1","1.4",".3",".3","1","1","1.9","1","2.2","1.6","2","1.8","2.3","1.1","1.7"];
    input5.data.labels = ["120503 14:00","120503 14:01","120503 14:02","120503 14:03","120503 14:04","120503 14:05","120503 14:06","120503 14:07","120503 14:08","120503 14:09","120503 14:10","120503 14:11","120503 14:12","120503 14:13","120503 14:14","120503 14:15","120503 14:16","120503 14:17","120503 14:18","120503 14:19","120503 14:20","120503 14:21","120503 14:22","120503 14:23","120503 14:24","120503 14:25","120503 14:26","120503 14:27","120503 14:28","120503 14:29","120503 14:30"];
    input5.title = "Input 6";
        var input6 = new Tee.Line();

    Chart.addSeries(input6);

    input6.data.values =  ["10","11.1","10.2","12.5","10.7","10.3","12.9","12.1","12.7","11.3","12.7","10.8","10.5","11.5","10.1","12","10.4","11.5","11.3","10.1","10.1","11.6","11","11.6","13","12.4","12.7","11.1","10.5","11.4","10.7"];
    input6.data.labels = ["120503 14:00","120503 14:01","120503 14:02","120503 14:03","120503 14:04","120503 14:05","120503 14:06","120503 14:07","120503 14:08","120503 14:09","120503 14:10","120503 14:11","120503 14:12","120503 14:13","120503 14:14","120503 14:15","120503 14:16","120503 14:17","120503 14:18","120503 14:19","120503 14:20","120503 14:21","120503 14:22","120503 14:23","120503 14:24","120503 14:25","120503 14:26","120503 14:27","120503 14:28","120503 14:29","120503 14:30"];
    input6.title = "Input 7";
        var input7 = new Tee.Line();

    Chart.addSeries(input7);

    input7.data.values =  ["22.3","22.9","21.8","22.5","21.6","22.4","21.2","21","20.8","20.3","21.3","20.2","21.4","21.2","20.6","21.6","22.1","20.6","20.8","21","21.4","20.2","20.4","22.8","21","21.6","21.1","22.6","22.4","20.4","21.4"];
    input7.data.labels = ["120503 14:00","120503 14:01","120503 14:02","120503 14:03","120503 14:04","120503 14:05","120503 14:06","120503 14:07","120503 14:08","120503 14:09","120503 14:10","120503 14:11","120503 14:12","120503 14:13","120503 14:14","120503 14:15","120503 14:16","120503 14:17","120503 14:18","120503 14:19","120503 14:20","120503 14:21","120503 14:22","120503 14:23","120503 14:24","120503 14:25","120503 14:26","120503 14:27","120503 14:28","120503 14:29","120503 14:30"];
    input7.title = "Input 8";

    Chart.axes.left.title.text="Y";
    Chart.title.text="Input graf";
    Chart.title.format.font.style="18px Verdana";

    Chart.draw();
}</script>
<canvas id="graf" width="800" height="400">
This browser does not seem to support HTML5 Canvas.
</canvas> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:43:42.793

我认为自动避免标签堆叠的代码有问题，我将对其进行审查并为您的示例代码找到修复程序。您可以使用以下代码手动分隔标签：

```
Chart.axes.bottom.increment=3;
Chart.axes.bottom.labels.alternate=true;
Chart.draw(); 
```

另一种方法是将标签旋转90度，但此功能尚未发布，有待改进：

```
Chart.axes.bottom.labels.rotation=90; // degree
Chart.axes.bottom.labels.padding=50;  // pixels 
```

# python - Python：通过键的指针获取或设置字典中的值

> ID：10500884
> 
> 赞同：-3
> 
> 时间：2012-05-08T14:43:50.670
> 
> 标签：python, pointers, dictionary, reference

如何通过引用在字典中设置值？

```
def set(point):
    point=0

dic={'pointer':22}
set(dic['pointer'])

print dic   # {'pointer': 0} 
```

我必须提出一个论点。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-08T14:46:27.767

不要创建名为 的函数`set`，因为您将覆盖同名的内置函数。

假设您想在 a 中设置值`dict`，这从您的问题中并不完全清楚，您可以使用赋值：

```
dic={'pointer':22}
dic['pointer'] = 0

print dic   # {'pointer': 0} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T14:46:38.483

这是你想做的吗？

```
>>> dic = {'pointer':22}
>>> dic['pointer'] = 0
>>> print dic
{'pointer':0} 
```

从你的问题不清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T14:58:55.867

您的问题与其他问题的含义略有不同，我如何通过引用设置值：

```
def setit(point, adic): 
    adic[point] = 0

dic={'pointer':22} 
setit('pointer',dic) 

print dic   # {'pointer': 0} 
```

在您的版本中，对传递的 set 函数的调用`set(dic['pointer'])`只会传递值。

Python 没有像 C 这样的指针类型。变量是引用，因此不需要指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T15:16:16.233

虽然 python 并没有像您似乎正在寻找的指针对象，但可以根据需要修改可变对象（所以是列表、dict 之类的东西。不是 int 或 str）。这就是关键；它们可以被修改，而不是在这样的函数中设置。如果您尝试使用 设置值`=`，它只会更改`setit`本地范围内的变量。如果您访问变量并对其进行修改，则字典中的实际对象将保持修改状态。

```
def setit(val):
    val.pop() 
    val.append(0)
dic = {'pointer':['22']}
setit(dic['pointer'])
print dic # {'pointer':[0]} 
```

# mysql - 如果没有找到行，则为列显示 null

> ID：10500890
> 
> 赞同：0
> 
> 时间：2012-05-08T14:44:06.300
> 
> 标签：mysql, sql

我目前有以下 SQL 语句：

```
SELECT s.first_name, s.last_name, tgs.group_identifier
FROM staff s
JOIN staff_training st
ON s.staff_id = st.staff_id
JOIN training_group_staff tgs
ON st.staff_training_id = tgs.staff_training_id
WHERE st.staff_course_id = '164' 
```

`training_group_staff`只包含`staff_training_id`和`training_group_id`

此语句按预期工作，并返回参加课程 164 的所有工作人员姓名，并已被放入一个组（用该`group_identifier`字段标识）。

我试图做的是在培训课程 164 上显示所有用户，如果没有选择任何组（特定`staff_training_id`in不会有一行`training_group_staff`），则为该列返回 null。

**视觉示例**

当前语句返回：

```
first_name  |  last_name  |  group_identifier
 Jim        |   Jones     |   3
 Harry      |   Jones     |   6 
```

我试图返回的是：

```
first_name  |  last_name  |  group_identifier
 Jim        |   Jones     |   3
 Harriet    |   Smith     |   NULL   // No row in training_group_staff
 Harry      |   Jones     |   6 
```

我尝试了几个连接，但似乎返回相同的结果 - 一个查询中是否可能有所需的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:46:58.263

尝试使用`LEFT JOIN`. 应该是你所追求的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:46:58.357

两件事情：

1.  `LEFT JOIN`加入`training_group_staff`表时尝试使用显式
2.  一个 IF 语句检查值是否为空并将其设置为`null`

```
SELECT s.first_name    
    , s.last_name    
    , IF(tgs.group_identifier = '', null, group_identifier) AS group_identifier    
FROM staff s    
JOIN staff_training st    
ON s.staff_id = st.staff_id    
LEFT JOIN training_group_staff tgs    
ON st.staff_training_id = tgs.staff_training_id    
WHERE sm.staff_course_id = '164' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T14:47:29.383

当您想要包含以下操作时，请使用[外连接：](http://en.wikipedia.org/wiki/Join_%28SQL%29#Outer_joins)`NULL``JOIN`

```
SELECT s.first_name, s.last_name, tgs.group_identifier
FROM staff s
JOIN staff_training st
JOIN ON s.staff_id = st.staff_id
LEFT OUTER JOIN training_group_staff tgs
ON st.staff_training_id = tgs.staff_training_id
WHERE st.staff_course_id = '164' 
```

# php - 计数器的模板精简版使用

> ID：10500891
> 
> 赞同：0
> 
> 时间：2012-05-08T14:44:14.723
> 
> 标签：php, template-lite

我想要的是，如果计数器大于 4，放一个新的`<li><li>`

为了做到这一点

我写了下面的代码

```
<div id="content">
        <div id="slider">
            <ul>
                {foreach from=$books value=book}

                {counter start=0 skip=1 print=false}
                <li>
                    <div onclick="chOpe('http://)"class="video2">
                        <div class="thumb">
                            <div class="kitap"><a href="{$book.title}><img src="{$imageUrl}/{$book.image}" width="145" height="205"></a></div>
                            <div class="kitap_baslik"><strong>{$book.title}</strong></div>
                            <div class="alt_baslik"><em>{$book.description|truncate:75:"..."}</em></div>
                            <div class="yorumlar_btn"></div>

                        </div>
                </li>
            </ul>

            {if counter > 4}
            {/foreach}
        </div>
    </div> 
```

当 counter 大于 4 时有没有办法从 counter 退出？我怎样才能做到这一点 ？

# java - 在任何 Map Sub 类中是否存在原子“如果为空则设置”操作？

> ID：10500896
> 
> 赞同：0
> 
> 时间：2012-05-08T14:44:33.063
> 
> 标签：java, map

我必须实现逻辑，仅当键当前未映射到任何值时，我才需要为键自动设置对象。我可以自己实现它，但如果它已经在某个地方完成，我不想重新发明轮子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T14:45:59.497

`ConcurrentHashMap`有`putIfAbsent`方法，可能是你需要的。正如 dogbane 指出的那样，它实际上是在 base interface 中定义的`ConcurrentMap`，`ConcurrentSkipListMap`它也是如此。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T14:45:59.863

使用[ConcurrentHashMap.putifAbsent](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html#putIfAbsent%28K,%20V%29)

> 如果指定的键尚未与值关联，则将其与给定值关联。这相当于

```
if (!map.containsKey(key))
   return map.put(key, value);    
else
   return map.get(key); 
```

> 除了动作是原子执行的。

# java - 如何将 pdf 文件添加到 NetBeans 项目？

> ID：10500899
> 
> 赞同：0
> 
> 时间：2012-05-08T14:44:39.777
> 
> 标签：java, pdf, netbeans

我希望能够在这样的 NetBeans 项目中打开 pdf 文件以[获取](https://stackoverflow.com/a/2547004/398460)帮助菜单，但我看不到将 pdf 文件添加到项目中的方法，以使其成为分发的一部分。应用程序需要能够找到 pdf 文件。我认为可能有一个选项可以将文件添加到项目资源中，但这似乎不是一个选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:52:16.733

如果您的项目中有一个资源文件夹，那么只需将其复制到那里然后`clean and build`

或右键单击该文件夹并创建一个名为“documents”的包文件夹。将您的 pdf 文件放入其中并进行清理和构建。

# core-data - RestKit/CoreData 未更新 - 创建重复项

> ID：10500900
> 
> 赞同：3
> 
> 时间：2012-05-08T14:44:41.097
> 
> 标签：core-data, ios5, restkit

我有一个 ios 5 应用程序，它不创建任何数据 - 它只是对 REST Web 服务进行 GET 调用，并用这些记录填充 sqlite 数据库。当本地数据库中没有记录时，初始 GET 效果很好。但是，当我进行后续调用时，我只会返回自上次 GET 以来数据已更改的记录子集。但是正在发生的事情是记录只是被再次添加，而不是更新现有记录。

我有一个 ID 字段，它是主键（或应该是主键），当一个 ID 已经存在的记录进入时，我希望更新该数据。如果该 ID 不存在，它应该是一个插入。

我没有看到在 XCode 的数据模型中将我的 ID 字段设置为“主键”的方法。我尝试在我的 didFinishLaunchingWIthOptions 方法中这样做：

```
userMapping.primaryKeyAttribute = @"id"; 
```

但这似乎并没有真正起到任何作用。

这是我实际执行 GET 的调用：

```
 // Load the object model via RestKit   
[objectManager loadObjectsAtResourcePath:[@"/synchContacts" appendQueryParams:params] delegate:self]; 
```

这似乎可以自动完成所有操作。在这一点上，我不知道应该在哪里放置逻辑以检查 ID 是否存在，如果存在，则进行更新与插入，或者什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-28T21:49:37.380

从最新的 RESTKit 版本 (0.23) 开始，您可以像这样定义主键：

```
[_mapping addAttributeMappingsFromDictionary:@{ @"id" : @"objectId", @"name" : @"name" }];
[_mapping setIdentificationAttributes:@[ @"objectId" ]]; 
```

而 objectId 是核心数据对象的主键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:19:15.597

您似乎做得正确，当您的 didLoadObjects 回调发生时，您应该能够查询核心数据以获取您需要的对象。

您的获取请求的设置方式可能存在问题。使用最新的 RestKit，您可以使用 RKObjectMappingProvider 的

```
- (void)setObjectMapping:(RKObjectMappingDefinition *)objectMapping forResourcePathPattern:(NSString *)resourcePathPattern withFetchRequestBlock:(RKObjectMappingProviderFetchRequestBlock)fetchRequestBlock; 
```

函数并让 fetchRequestBlock 获取正确的数据。

不过，RestKit 并没有真正开箱即用地处理部分更新请求。在非常活跃的 RestKit google 组中，您可能会有更多的运气。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T17:43:33.467

Quote: 我没有看到在 XCode 的数据模型中将我的 ID 字段设置为“主键”的方法。我尝试在我的 didFinishLaunchingWIthOptions 方法中执行此操作： userMapping.primaryKeyAttribute = @"id";

请记住，“primaryKeyAttribute”是您的 api 有效负载中的一个，而不是 CoreData 自己管理的 CoreData id。RestKIt 然后将（不可见的）CoreData 主键映射到指定的 JSON 键。

# php - PHP强制标头下载不适用于zip文件

> ID：10500906
> 
> 赞同：0
> 
> 时间：2012-05-08T14:45:08.083
> 
> 标签：php

我有一个文档下载站点，可以在其中跟踪下载的文件。

我的问题是通过我正在使用的脚本下载 zip 文件。除 zip 文件外，所有其他文件都被迫下载。当一个 zip 文件被推送时，它只是转到脚本所在的 download.php 页面，没有文件被推送出去。

```
 ob_start();
    header('Content-Description: File Transfer');
          header('Content-Type: application/octet-stream');
          header('Content-Disposition: attachment; filename='.basename($file));
          header('Content-Transfer-Encoding: binary');
          header('Expires: 0');
          header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
          header('Pragma: public');
          header('Content-Length: ' . filesize($file));
    ob_clean();
          flush();
          readfile($file);
          exit; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:06:57.110

我没有使用`base_name`内容配置和长度，而是使用完整路径。使用`base_name`对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:51:04.597

这是一个适合我的代码片段：

```
if (strstr($_SERVER['HTTP_USER_AGENT'], "MSIE")) {
    header('Content-Type: "application/octet-stream"');
    header('Content-Disposition: attachment; filename="'.basename($file_url).'"');
    header('Expires: 0');
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header("Content-Transfer-Encoding: binary");
    header('Pragma: public');
    header("Content-Length: ".filesize($file_url));
} else {
    header('Content-Type: "application/octet-stream"');
    header('Content-Disposition: attachment; filename="'.basename($file_url).'"');
    header("Content-Transfer-Encoding: binary");
    header('Expires: 0');
    header('Pragma: no-cache');
    header("Content-Length: ".filesize($file_url));
}
readfile($file_url); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T14:51:37.897

有类似的问题，这段引用帮助了那个时候：

```
header('Content-Disposition: attachment; filename="'.basename($file).'"'); 
```

# c# - Linq to Sql 选择具有多个 id 之一的映射项

> ID：10500911
> 
> 赞同：0
> 
> 时间：2012-05-08T14:45:27.593
> 
> 标签：c#, asp.net, linq-to-sql

大脑锁定并需要一个简单/快速的答案 - 我可能从错误的角度看待这个问题，但本周我有很多事情要做。:-(

使用 linq-to-sql，我有一个表，其中的项目通过映射表映射到许多类别。

我现在需要提取所有映射到多个类别的项目，但只有映射到所有所需类别的项目。这是对原始摘要的更改，该摘要是提取映射到任何类别 ID 的数据。

例子：

人员 A 映射到类别 1、类别 2 和类别 3 人员 B 映射到类别 1 和类别 3

因此，如果我选择类别 1 和 2，则返回两个人员项目，但是如果我选择 1、2 和 3，则只应返回人员 A。

这是返回任何项目的原始（简化）代码：

```
IList<Person> results = (from a in data from b in a.CategoryMappings 
                   where catIDs.AsEnumerable().Contains(b.CategoryID) 
                   select a).Distinct().ToList(); 
```

catIDs 是`IList<int>`从发送到查询的数据中获取的，它可以是任意长度。数据要么是 IQueryable。

知道如何构建此查询吗？

吨

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:52:02.320

**编辑：**这不是有效的 LINQ to SQL，而是 LINQ to Objects。无论如何，作为灵感来源可能会有所帮助。

您可以使用[Intersect 方法](http://msdn.microsoft.com/en-us/library/bb460136.aspx)：

```
var results = (from a in data
               where catIDs.Intersect(a.CategoryMappings).Count() == catIDs.Count
               select a).Distinct().ToList(); 
```

它返回两个可枚举的交集，基本上应该和 一样长`catIDs`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:10:27.650

这个怎么样？Mudu 用完全相同的解决方案击败了我，所以这是我的替代方案。

仅当 catIDs 列表中的所有元素都满足条件时才从数据中选择对象，即 p.CategoryMappings 必须包含该元素。

```
var results = from p in data 
              where catIds.All(i => p.CategoryMappings.Contains(i))
              select p; 
```

# c# - DateTime 构造函数在值正常时抛出错误

> ID：10500918
> 
> 赞同：0
> 
> 时间：2012-05-08T14:45:47.440
> 
> 标签：c#

这一行：

```
new DateTime(2000, 11, 31, 10, 0, 0) 
```

抛出错误：年、月和日参数描述了无法表示的日期时间。

为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T14:47:06.230

11 月只有 30 天。

*有很多方法可以记住这一点……这里有两种：*

**诗**

[http://askville.amazon.com/poem-remember-days-month/AnswerViewer.do?requestId=6262594](http://askville.amazon.com/poem-remember-days-month/AnswerViewer.do?requestId=6262594)

**指关节法**

我个人不记得这首诗，但指关节方法很容易记住： http: [//lifehacker.com/232828/macgyver-tip-use-your-knuckles-to-remember-each-months-days](http://lifehacker.com/232828/macgyver-tip-use-your-knuckles-to-remember-each-months-days)

指关节方法可以总结如下：

1.  握拳并将其指向远离你的方向，掌心向下。
2.  看着你的拳头，你应该看到一排四个指关节。
3.  它应该看起来像**指节**-*谷*-**指节**-*谷*-**指节**-*谷*-**指节**。
4.  如果您在触摸关节和山谷时开始列出月份，那么落在关节上的每个月都有 31 天。
5.  一旦你到达最后一个关节（七月），从第一个关节（八月）重新开始。

指节有 31 天，山谷有 30 天，除了 2 月。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T14:47:18.350

11 月从来没有 31 天。

没有这样的日期。

同样，您不能在大多数年份中拥有 2 月 29 日...它仅在闰年有效（所以对于 2012 年可以，但您不能将 29/02/2013 创建为`DateTime`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T14:47:53.473

十一月没有31天！

# android - 我的 android 应用程序在我第二次打开它时崩溃

> ID：10500921
> 
> 赞同：0
> 
> 时间：2012-05-08T14:45:54.507
> 
> 标签：android, multithreading

我使用 contentView “gameView” 它扩展了 SurfaceView 并且我使用线程对我的游戏进行永久循环，我的 onCreate() 方法是

```
public class mainclass extends Activity {
GameView game;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    game = new GameView(this);
    setContentView(game);
} 
```

崩溃日志猫是

```
05-09 09:35:06.378: W/dalvikvm(9664): threadid=1: thread exiting with uncaught exception (group=0x40015560)
05-09 09:35:06.388: E/AndroidRuntime(9664): FATAL EXCEPTION: main
05-09 09:35:06.388: E/AndroidRuntime(9664): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
05-09 09:35:06.388: E/AndroidRuntime(9664):     at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
05-09 09:35:06.388: E/AndroidRuntime(9664):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:460)
05-09 09:35:06.388: E/AndroidRuntime(9664):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
05-09 09:35:06.388: E/AndroidRuntime(9664):     at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:359)
05-09 09:35:06.388: E/AndroidRuntime(9664):     at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:385)
05-09 09:35:06.388: E/AndroidRuntime(9664):     at superBill.Mbiz.Egypt.GameView.<init>(GameView.java:87)
05-09 09:35:06.388: E/AndroidRuntime(9664):     at superBill.Mbiz.Egypt.SuperBillActivity.onCreate(SuperBillActivity.java:20)
05-09 09:35:06.388: E/AndroidRuntime(9664):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-09 09:35:06.388: E/AndroidRuntime(9664):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
05-09 09:35:06.388: E/AndroidRuntime(9664):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
05-09 09:35:06.388: E/AndroidRuntime(9664):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-09 09:35:06.388: E/AndroidRuntime(9664):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
05-09 09:35:06.388: E/AndroidRuntime(9664):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-09 09:35:06.388: E/AndroidRuntime(9664):     at android.os.Looper.loop(Looper.java:130)
05-09 09:35:06.388: E/AndroidRuntime(9664):     at android.app.ActivityThread.main(ActivityThread.java:3683)
05-09 09:35:06.388: E/AndroidRuntime(9664):     at java.lang.reflect.Method.invokeNative(Native Method)
05-09 09:35:06.388: E/AndroidRuntime(9664):     at java.lang.reflect.Method.invoke(Method.java:507)
05-09 09:35:06.388: E/AndroidRuntime(9664):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-09 09:35:06.388: E/AndroidRuntime(9664):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-09 09:35:06.388: E/AndroidRuntime(9664):     at dalvik.system.NativeStart.main(Native Method) 
```

注意：此崩溃发生在第二次，但第三次正常，第四次崩溃，第五次正常，依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:17:42.550

在 GameView 的 surfaceCreated 方法中，您需要重新创建游戏线程，因为您可能会在 surfaceDestroyed 方法中使用 gamethread.join() 让它死掉。像这样的东西：

```
@Override
public void surfaceCreated(SurfaceHolder holder) {
    if (gamethread.getState() == Thread.State.TERMINATED) {
        gamethread = new GameThread(getHolder(), this);
        gamethread.setRunning(true);
        gamethread.start();
    } else if (gamethread.getState() == Thread.State.NEW) {
        gamethread.setRunning(true);
        gamethread.start();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:49:41.603

@dymmeh：我的代码是

```
@Override
          public void surfaceDestroyed(SurfaceHolder holder) 
        {
            boolean retry = true;
            mythread.setRunning(false);
            while (retry) {

                   try {
                            mythread.join();
                            retry = false;
                       } catch (InterruptedException e) {
                   }
            }
     } 
```

那是什么导致了你所说的，我把它替换为

```
 @Override
          public void surfaceDestroyed(SurfaceHolder holder) 
        {
            mythread.setRunning(false);
            System.exit(0);
        } 
```

现在，一切顺利，谢谢！

# ruby-on-rails - 关联的重复 ActiveRecord 对象

> ID：10500922
> 
> 赞同：0
> 
> 时间：2012-05-08T14:45:57.357
> 
> 标签：ruby-on-rails, activerecord, associations

我与一个条件关联，该条件指的是与直接加载的对象不同的对象：

```
it "should point to the same object" do
  user = create(:user)
  user.current_location.should == nil

  user.update_location(latitude: 11, longitude: 22)
  user.current_location.should_not == nil

  location = UserLocation.first

  location.id.should == user.current_location.id
  location.object_id.should == user.current_location.object_id #fails on this line
end 
```

在我看来，关联和直接加载的对象都应该指向同一个对象。这是预期的行为吗？

这是我的模型的重要部分的要点： [https ://gist.github.com/2635673](https://gist.github.com/2635673)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T22:40:20.783

这是预期的行为。Rails 关联中有一个新功能，

```
:inverse_of 
```

你可以在belongs_to和对应的has_many中设置这个，然后在

```
user.current_location.users 
```

current_location.users 中用户的出现将是用户对象。

但是如果你从数据库中得到一个新的对象，它就是一个不同的对象。

# jsf - JSF 1.2 动态添加自定义验证器

> ID：10500923
> 
> 赞同：0
> 
> 时间：2012-05-08T14:45:58.343
> 
> 标签：jsf, lifecycle, jsf-1.2, customvalidator

如果我正确理解 JSF 生命周期，它会在应用请求阶段注册验证器。这是否意味着我无法将 addValidator 调用到我在处理请求事件阶段调用的 decode() 方法中的组件对象句柄？如果是这样，是否有任何其他方法可以根据组件的属性值动态添加自定义验证器？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:10:43.060

我希望应该工作类似于..

```
public class ValidatorWrapper implements Validator {

private DoubleRangeValidator dbRangeValidator;
private LongRangeValidator lRangeValidator;
private String requiredValidatorType;/*An attribute to choose the type of validator*/

public ValidatorWrapper(){
    dbRangeValidator = new DoubleRangeValidator(10.01, 20.99);lRangeValidator = new LongRangeValidator(10, 20);
}

@Override
public void validate(FacesContext context, UIComponent component,
        Object value) throws ValidatorException {
    if("LONG".equalsIgnoreCase(requiredValidatorType))
        lRangeValidator.validate(context, component, value);
    else if("DBL".equalsIgnoreCase(requiredValidatorType))
        dbRangeValidator.validate(context, component, value);
}  } 
```

# php - PHP 中使用 sqlsrv (MSSQL) 的动态准备语句

> ID：10500926
> 
> 赞同：2
> 
> 时间：2012-05-08T14:46:05.793
> 
> 标签：php, sql-server, dynamic, prepared-statement

## 生成语句元素

我正在尝试以通用方式创建一个 MSSQL 准备好的语句。

基本上，我循环遍历这些字段，并将它们添加到准备好的 SQL 字符串和引用参数（向下滚动以查看代码）。

这导致（名称被删除）：

**准备好的查询：：**

> INSERT INTO 表 ([field],[field],[field],[field],[field],[field],[field],[field],[field],[field],[field],[field ],[field],[field],[field],VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)

和 **sPrepStatement：**

```
return array(&$aLine[0],&$aLine[1],&$aLine[2],&$aLine[3],&$aLine[4],&$aLine[5],&$aLine[6],&$aLine[7],&$aLine[8],&$aLine[9],&$aLine[10],&$aLine[11],&$aLine[12],&$aLine[13],&$aLine[14]); 
```

* * *

## 准备声明

我尝试了以下 4 种方法来使其与 sqlsrv_prepare 语句一起使用：

```
$oSQLStmnt = sqlsrv_prepare($dbhandle, $sPreppedSQL, eval($sPrepStatement));

$fReturnPrepVals = function(){ return eval($sPrepStatement); } ;
$oSQLStmnt = sqlsrv_prepare($dbhandle, $sPreppedSQL, $fReturnPrepVals);

$oSQLStmnt = sqlsrv_prepare($dbhandle, $sPreppedSQL,$aPrepValues);

$oSQLStmnt = call_user_func_array('sqlsrv_prepare',array($dbhandle,$sPreppedSQL, eval($sPrepStatement))); 
```

这要么不起作用，要么在数据库中插入空白。

这是执行 SQL 的循环：

```
foreach ($aLines as $iLineNum => $sLine) {
            $aLine = explode('|', $sLine);
            print_r($aPrepValues);
            print_r(eval($sPrepStatement));
            sqlsrv_execute($oSQLStmnt);
        } 
```

作品很好，这`eval($sPrepStatement)`是有道理的。但我认为在准备语句中工作“解析得太早”。它实际上应该只在执行查询时被解析，但我不知道如何实现这一点。

* * *

生成sql语句的代码：

```
<?php
//Setup the basic query
        $sSql = "INSERT INTO " . $sQName . "\n";
        $sFieldNames = "(";
        $sValues = "VALUES(";
        //This will be evalled to prepare the query, so inserting will be easy.
        $sPrepStatement = "return array(";
        //FieldIndex to keep track of the current column number
        $iFI = 0;
        $aLine = array();
        foreach ($aSQLQueries[$sQName]['fields'] as $sFieldName => $sQ) {
            $sFieldNames .= "[" . $sFieldName . "],";
            $sValues .= "?,";
            //Init the $aLine var to prevent errors
            $aLine[$iFI] = '';

            //This will be evalled, so no "" as that would parse it directly
            //The values wil be passed by reference
            $sPrepStatement .= '&$aLine[' . $iFI . '],';
            //Different approach
            $aPrepValues[] = &$aLine[$iFI];

            $iFI++;
        }
        $sFieldNames = substr($sFieldNames, 0, -1) . ")";
        $sValues = substr($sValues, 0, -1) . ")";
        $sPrepStatement = substr($sPrepStatement, 0, -1) . ");";
        $sPreppedSQL = $sSql . $sFieldNames . " " . $sValues; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:32:48.647

我最终使它与 PDO 一起工作，却发现它一次无法处理数百万个导入，所以我最终使用了 CSV 导入

# design-patterns - 策略设计模式与状态设计模式

> ID：10500927
> 
> 赞同：4
> 
> 时间：2012-05-08T14:46:13.447
> 
> 标签：design-patterns, strategy-pattern, state-pattern

我正在阅读有关状态模式的[链接。](http://www.javabeat.net/state-pattern-design-patterns-in-javaj2ee/)它看起来像策略模式吗？这两种模式之间的确切区别是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T15:07:58.997

> 国家和战略之间的区别在于意图。使用 Strategy，算法的选择是相当稳定的。对于 State，“上下文”对象的状态变化会导致它从 Strategy 对象的“调色板”中进行选择。

见[http://sourcemaking.com/design_patterns/state](http://sourcemaking.com/design_patterns/state)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-26T13:32:59.890

> 策略模式与状态模式非常相似。区别之一是上下文包含状态作为实例变量，并且可以有多个任务的实现可以依赖于状态，而在策略模式中，策略作为参数传递给方法，上下文对象没有任何变量来存储它.

有关更多详细信息，请参阅[java 示例教程中的策略设计模式](http://www.journaldev.com/1754/strategy-design-pattern-in-java-example-tutorial)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-19T19:57:23.423

我认为一个主要的区别是：

-在**状态**模式中，我们将上下文本身作为参数传递给我们需要分配给上下文的状态具体类的方法，它做两件事：首先它将自己分配给发送的上下文，其次，它执行它的角色.

-在**策略**模式中，我们在第一次创建策略时将策略传递给上下文，因此它在整个程序中保持不变，除非我们使用“new”将相同的变量分配给内存中的新上下文（指针）和为它分配一个新策略，一段时间后垃圾收集器将使用其分配的策略消除旧上下文。

更清楚地说，**策略**对于一个上下文是固定的，一旦分配它就不能更改，即使上下文没有策略设置器。但是对于**State**，许多状态可以一个接一个地分配给同一个上下文，因为上下文有一个状态设置器。

我希望它是有用的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-01T13:33:48.910

在状态模式中，通常状态的一个动作会导致状态的变化；在策略模式中，策略的一个动作不会引起策略的改变。换句话说，状态的变化在于状态本身；战略的改变在于外部条件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-02T09:07:34.327

摘自 Steven Lott 的优秀书籍[“Python 面向对象编程：构建健壮且可维护的面向对象 Python 应用程序和库”](https://rads.stackoverflow.com/amzn/click/com/B094DJYLTV)。

> 策略模式用于在运行时选择算法；通常，只会为特定用例选择其中一种算法。这里的想法是在设计过程中尽可能晚地在运行时提供实现选择。策略类定义很少知道其他实现；每个策略通常都是独立的。
> 
> 另一方面，状态模式旨在允许随着某些过程的发展而动态地在不同状态之间切换。在我们的示例中，状态随着字节的消耗和不断变化的有效性条件的满足而改变。状态定义通常被定义为能够在各种状态对象之间切换的组。

# c# - 使用 C# 读取 UNIX 编码文件

> ID：10500930
> 
> 赞同：5
> 
> 时间：2012-05-08T14:46:20.527
> 
> 标签：c#, file, unix, encoding

我有 c# 程序，我们用来用其他值替换一些值，然后用作参数。就像 'NAME1' 用 &1 代替，'NAME2' 用 &2 代替，等等。

问题是要修改的数据在 UNIX 上编码的文本文件上，而像 í 这样的特殊字符，即使在内存中，也会被读取为正方形（无效字符）。由于规范超出了我的控制范围，因此无法更改文件，除了这样阅读之外别无选择。

我尝试阅读 c# 为我提供的 130 种编码中的大多数：

```
EncodingInfo[] info = System.Text.Encoding.GetEncodings();
string text;
for (int a = 0; a < info.Length; ++a)
{
      text = File.ReadAllText(fn, info[a].GetEncoding());
      File.WriteAllText(fn + a, text, info[a].GetEncoding());
} 
```

fn 是要读取的文件路径。已经检查了所有制作的文件（如 130 个），没有一个人能正确地写 í 所以我没有想法，我无法在互联网上找到任何东西。

解决方案：

看起来最后这段代码完成了正确获取文本的工作，还必须为写作部分修复相同的编码器：

```
System.Text.Encoding encoding = System.Text.Encoding.GetEncodings()[41].GetEncoding();

String text = File.ReadAllText(fn, encoding); // get file text 

// DO ALL THE STUFF I HAD TO

File.WriteAllText(fn, text, encoding) System.Text.Encoding.GetEncodings()[115].GetEncoding();   //Latin 9 (ISO) 

/* ALL THIS ENCODINGS WORKED APARENTLY FOR ME WITH ALL WEIRD CHARS I WAS ABLE TO WRITE :P
    System.Text.Encoding.GetEncodings()[108].GetEncoding(); //Baltic (ISO)
    System.Text.Encoding.GetEncodings()[107].GetEncoding(); //Latin 3 (ISO)
    System.Text.Encoding.GetEncodings()[106].GetEncoding(); //Central European (ISO)
    System.Text.Encoding.GetEncodings()[105].GetEncoding(); //Western European (ISO)
    System.Text.Encoding.GetEncodings()[49].GetEncoding();      //Vietnamese (Windows)
    System.Text.Encoding.GetEncodings()[45].GetEncoding();      //Turkish (Windows)
    System.Text.Encoding.GetEncodings()[41].GetEncoding();      //Central European (Windows)   <-- Used this one 
    */ 
```

非常感谢您的帮助

诺曼(1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:57:53.000

你必须得到正确的编码格式。尝试

> 使用文件-i。这将输出文件的 MIME 类型信息，其中还包括字符集编码。我也找到了 它的[手册页](http://linux.die.net/man/1/file):)

或者试试`enca`

> 它可以猜测甚至在编码之间进行转换。只需查看手册页。

如果您有正确的编码格式，请寻找一种将其应用于文件读取的方法。

引用：[如何通过脚本在 Unix 中查找文件的编码](https://stackoverflow.com/questions/805418/how-to-find-encoding-of-a-file-in-unix-via-scripts)

# javascript - 来自javascript问题的asp下拉列表动态值

> ID：10500944
> 
> 赞同：3
> 
> 时间：2012-05-08T14:47:01.310
> 
> 标签：javascript, asp.net, drop-down-menu

我有一个包含 5 个项目的下拉列表。最后一项的值为“其他”。通过选择“其他”出现带有输入的弹出窗口。我通过 javascript 将此输入的值设置为此项目。所以 value 变成了插入的文本。当我提交表单时，它不适用于此动态值，但其他选择项有效。有任何想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T16:35:47.567

这是一个使用 Request.Params 集合读取动态附加值的快速示例。

这是客户端代码。

```
<!-- Server Control - Drop Down List -->
<asp:DropDownList ID="ddList" runat="server">
    <asp:ListItem Text="A" Value="A"></asp:ListItem>
    <asp:ListItem Text="B" Value="B"></asp:ListItem>
    <asp:ListItem Text="C" Value="C"></asp:ListItem>
</asp:DropDownList>

<!-- Control to fire JS event to add a new item to the Drop Down List above -->
<input type="button" value="Add Item D" id="AddItem" />

<!-- jQuery event to add a new option to the list on the click (no postback) -->
$('#AddItem').click(function ()
{
    $('#<%= ddList.ClientID %>').append('<option value="D">D</option>');
}); 
```

这是读取值的服务器端代码。

```
var ddlListSelectedValue = Request.Params["ddList"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T15:10:46.373

而不是将此值设置为下拉列表项值，您可以使用隐藏字段

```
<input type="hidden" id="hiddenField" runat="server" /> 
```

使用 JavaScript 设置值如下

```
document.getElementById ("hiddenField").value = "inputValue"; 
```

hiddenField 值可以从后面的代码中访问，如下所示

```
string inputValue = hiddenField.Value; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T10:44:41.113

只需更新您的功能

```
$('#AddItem').click(function ()
{
var dropdown= document.getElementById("<%= ddList.ClientID %>");
dropdown.options[dropdown.options.length] = new Option('YOUR TEXT', 'YOUR VALUE');
}); 
```

干杯

我自己测试过，它有效。下面是一个完整的例子：

```
<html>
<head>
<title>Test ddl Item Addition By IuR</title>
</head>
<body onload="add_dditem()">
<script type="text/javascript">
function add_dditem()
{
var dropdown= document.getElementById("ddList");
dropdown.options[dropdown.options.length] = new Option('YOUR TEXT', 'YOUR VALUE');
}
</script>

<select id="ddList">
</select>
</body>
</html> 
```

# sorting - aaSorting 无法识别使用 aoColumns 定义的自定义排序

> ID：10500945
> 
> 赞同：1
> 
> 时间：2012-05-08T14:47:01.773
> 
> 标签：sorting, datatables

这是我的 JS。排序是 hh:mm 格式的时间。当我运行它时，我得到了错误：**oSort[(sDataType ? sDataType : "string") + "-" + aaSort[i][1]] is not a function**我试图默认为一个列排序声明排序。对前两列或最后一列进行排序是可行的，但是当我尝试默认为任何其他列时它不喜欢。似乎 DataTable 在初始化期间很难弄清楚这些列的 sDataType 是什么。

```
<script type="text/javascript">

$(document).ready(function() {
    $('#example').dataTable({

        "bJQueryUI": true,
        "iDisplayLength": 50,
        "aoColumns": [
            null,
            null,
            { "sType": 'string-case' },
            { "sType": 'string-case' },
            { "sType": 'string-case' },
            { "sType": 'string-case' },
            null
        ],
        "aaSorting": [[ 2, 'desc']]
     } );
} );

function getTimeValue(x) {
    var time = x.match(/(\d+)(?::(\d\d))?\s*(P?)/);
    var h = parseInt(time[1],10) + (time[3] ? 12 : 0);
    if(!time[3] && parseInt(time[1],10)==12) h = 0;
    if(time[3] && parseInt(time[1],10)==12) h = 12;
    return h * 60 + ( parseInt(time[2],10) || 0 );
}

/* Define two custom functions (asc and desc) for string sorting */
jQuery.fn.dataTableExt.oSort['string-case-asc']  = function(x,y) {

    x = getTimeValue(x);
    y = getTimeValue(y);

    return ((x < y) ? -1 : ((x > y) ?  1 : 0));

};

jQuery.fn.dataTableExt.oSort['string-case-desc'] = function(x,y) {

    x = getTimeValue(x);
    y = getTimeValue(y);

    return ((x < y) ?  1 : ((x > y) ? -1 : 0));
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:41:49.777

发布这个几乎很尴尬，但如果它对其他人有帮助，那将是值得的。简单解释：getTimeValue 和 jQuery.fn 需要在调用设置 DataTable 之前进行初始化，所以我需要做的就是将这三个函数移到 $(document).ready(function() 之前。我是 JS 新手，但是这个也是objective-c中常见的编程错误。bleh。

# url - 接近外语和 SEO 友好的 URL 查询

> ID：10500948
> 
> 赞同：1
> 
> 时间：2012-05-08T14:47:10.793
> 
> 标签：url, seo

我是 SEO 的初学者，所以我基本上是在尝试通过 mod-rewrite 创建对 SEO 友好的 URL，例如：

www.website.com?title=The-Big-Book 到 www.website.com/The-Big-Book

我现在的问题是，如果标题（用户定义的）有可能是中文等外语，我应该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:52:03.657

我想说的是为你的 url 选择一个好的格式，（你的例子不是一个好的格式的例子），浏览器支持外语，所以你不必担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:00:05.263

`RewriteRule ^/?([^/.]+)$ **YOUR REWRITE RULES**`

# c# - emddudley 的 WeakEventManager 的示例

> ID：10500949
> 
> 赞同：1
> 
> 时间：2012-05-08T14:47:11.673
> 
> 标签：c#, .net, weak-events, weakeventmanager

我正在尝试将 Michael Dudley 的示例代码用于我自己的弱事件管理器实现：

[使用 .NET 的 WeakEventManager 实现弱事件的示例](https://stackoverflow.com/questions/3524597/example-implementation-of-weak-events-using-nets-weakeventmanager/10490721#10490721)

我想知道我将把我自己的处理程序的用户代码放在哪里？我看到这个：

```
private EventHandler mHandler = (s, e) =>
{
    CurrentManager.DeliverEvent(s, e);
    return;
}; 
```

我会用我自己的自定义代码替换那个表达式的内容吗？

谢谢，

凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T17:22:58.490

在大多数情况下，处理程序应该保持原样。正如对该答案的评论所述，处理程序声明甚至不是必需的。以下代码`StartListening`应该足够了：

`((PropertyValue)source).Changed += DeliverEvent;`

如果您需要修改`s`和/或`e`在传递事件之前的值，您可以将该代码添加到您发布的处理程序中。但无论如何，都`DeliverEvent`必须调用。它循环并调用`ReceiveWeakEvent`所有已注册的侦听器，除非您将它们存储在自己的`ListenerList`. 因此，基本上，如果您修改事件处理程序，它仍然必须调用`DeliverEvent`，否则您的弱事件侦听器将永远不会收到事件通知。

如果您发布了您想要找到位置的代码，那么可能会更容易帮助您弄清楚您正在尝试完成什么以及应该去哪里。

# c# - 在应用程序的生命周期内保存/防篡改敏感数据的推荐方法

> ID：10500953
> 
> 赞同：0
> 
> 时间：2012-05-08T14:47:22.040
> 
> 标签：c#, .net, security, c#-4.0, hash

我的应用程序将用户交互存储在一个加密文件中，它会在`Session`. 会话就像离线考试，因此我们不仅存储答案，还存储鼠标点击、屏幕截图等。

会话必须保持 ATOMIC，因此我不断保存增量文件并在会话结束时将它们修补在一起。如果应用程序发现被篡改文件的痕迹，它会将会话标记为不合格。

我想要达到的目标：

*   创建的增量文件只能由应用程序访问。换句话说，任何拥有提升权限的人都不应该能够修改或删除它们。
*   应用程序的一种非 Windows 依赖方式，可确保在打包会话时没有人篡改增量文件。
*   内存防篡改。换句话说，如果内存数据被强行修改了，我的应用程序应该了解它。这可能吗？

我曾考虑过独立存储、散列等，但希望得到其他做过此类事情的人的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:53:38.943

尤其是在 .NET（和 Java）等托管环境中，在与完全控制其系统的用户在同一台​​机器上运行时，无法安全地执行此操作。尝试将需要安全的应用程序部分移动到中央机器（例如 Web 服务）。这样，没有人可以将调试工具附加到该逻辑或进行内存转储。这是保护您的应用程序的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:07:17.937

您可以使用[SecureString](http://msdn.microsoft.com/en-us/library/system.security.securestring.aspx)来存储敏感信息，但只能在内存中。并避免内存转储。

您可以加密文件以避免在文件系统中看到敏感信息。

您无法避免文件删除，您可以在应用程序的整个生命周期内锁定文件，但这不是*防弹*的。

# jsf - 从外部页面登录

> ID：10500954
> 
> 赞同：1
> 
> 时间：2012-05-08T14:47:22.470
> 
> 标签：jsf, login, primefaces

我有两个网站。我使用带有 Primefaces 的 JSF 2.0。第一个网站（www.mysiteone.com）有一个登录页面（用户名 + 密码）。我必须从第二个网站（www.mysiteone.com）登录到第一个网站（www.mysiteone.com） .mysitetwo.com).. 我该怎么做？

# amazon-s3 - 使用 GZIP 压缩替代 Amazon S3

> ID：10500957
> 
> 赞同：1
> 
> 时间：2012-05-08T14:47:31.427
> 
> 标签：amazon-s3, static-site

我正在寻找替代 Amazon S3 来托管静态站点，但它允许根据 Accept-Encoding 标头进行 GZIP 压缩。

换句话说，我正在寻找将根据客户端的 Accept-Encoding 标头返回不同版本的文件的东西。我不介意自己上传压缩和未压缩的文件（它可以很容易地自动化）。

除此之外，该服务需要能够托管网站（允许设置索引页面和 404 页面）。我不需要 CNAME 功能，因为我将使用 CDN。我还希望能够设置缓存标头（Expires，Last-Modified）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:57:44.287

仅供参考，我的初创公司[Site44](http://www.site44.com)通过与 Dropbox 同步来进行静态托管。除了自定义缓存标头之外，我们支持所有这些，但我们会对该功能请求持开放态度。（今天我们使用基于上次修改日期的启发式方法设置 Cache-Control 标头，最大值为 24 小时。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T07:46:16.430

Rackspace [Cloudfiles](https://www.rackspace.com/en-us/cloud/files)支持提到的所有内容。

# hadoop - HBase 截断表

> ID：10500959
> 
> 赞同：2
> 
> 时间：2012-05-08T14:47:37.113
> 
> 标签：hadoop, hbase, hdfs

如果我要从 HBase 截断表，那么 1）它是否也从底层 HDFS 系统中删除数据，或者它只是用删除标记标记数据？2）如何确保/验证数据也从底层 HDFS 系统中删除？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T15:43:59.530

目前无法确保从底层文件系统中完全擦除 HBase 表数据。HBase 表的文件可能会从 HDFS 中删除，但这仍然意味着它们被移动到了垃圾文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:59:34.370

当从表中删除数据时，Hbase 墓碑数据，因此扫描/获取行不会返回它们并且无法读取它们。当对表运行主要压缩时，所有墓碑数据都会从 Hbase 和 HDFS（本机文件系统）中删除并释放磁盘。

# android - 在gridview中使用从右到左的方向

> ID：10500967
> 
> 赞同：2
> 
> 时间：2012-05-08T14:48:00.037
> 
> 标签：android, gridview

我想在gridview中使用从右到左的方向。默认情况下，gridview 从左到右显示内容。

例如：

如果我有这个数组并且我想为它指定 3 列：

```
[1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

GridView 显示如下：

```
[1 2 3]
[4 5 6]
[7 8 9] 
```

但我想这样展示它：

```
[3 2 1]
[6 5 4]
[9 8 7] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T12:45:09.743

根据“Dmytro Danylyk”的建议，我使用此功能并解决了我的问题。

```
 /** Returns inverted list by step that take. for example if our list is {1, 2, 3, 4, 5, 6,
   * 7 ,8 ,9} and step is 3 inverted list is this: {3, 2, 1, 6, 5, 4, 9, 8, 7}  
   */
       public static <E> ArrayList<E> invert(List<E> source, int step){
            List<E> inverted = new ArrayList<E>();
            for(int i = 0; i < source.size(); i++){
                if((i + 1) % step == 0){
                    for(int j = i, count = 0; count < step; j--, count++){
                        inverted.add(source.get(j));
                    }
                }
            }

            //
            // When (source.size() % step) is not 0 acts.this is for last of list. add last part
            // of the source that wasn't add.
            //
            int remainder = source.size() % step;
            if((remainder) != 0 ){
                for (int j = source.size() - 1, count = 0; count < (remainder); j--, count++) {
                    inverted.add(source.get(j));
                }
            }

            return (ArrayList<E>) inverted;

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:54:58.150

您不能只修改您的列表以符合您的要求吗？

前

```
List<String> list = new ArrayList<String>();
list .add("Element 1");
list .add("Element 2");
list .add("Element 3"); 
```

后

```
List<String> list = new ArrayList<String>();
list .add("Element 3");
list .add("Element 2");
list .add("Element 1"); 
```

# php - 将字符 ā 替换为其 html 实体 ā

> ID：10500970
> 
> 赞同：0
> 
> 时间：2012-05-08T14:48:07.343
> 
> 标签：php, utf-8, character-encoding

我很难用它的实体等效替换某个字符。我试图用 str_replace 字符“ā”，但它就是行不通！我不明白为什么。我使用的代码：

```
$content = str_replace('ā', '&#257;',$content); 
```

如果有人有一些提示或什至解释为什么它不起作用，请告诉我！

更新：

虽然上面的代码没有用实体替换字符（不明白为什么），但这不是主要问题。该字符显示得很好，但是当我使用 file_get_contents 阅读此页面并将读取的 HTML 插入数据库后，该字符会被破坏。它已经在插入它的数据库中被破坏了。

下面建议的所有标题都是 UTF-8，数据库表是 UTF-8 编码，文件是 UTF-8...

作为快速修复，我想在插入该数据库之前将 char 转换为它的实体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:02:42.017

包含 ā 的较大字符串是否易于访问？如果是这样，[htmlentities](http://php.net/manual/en/function.htmlentities.php)函数应该可以完成这项工作。它应该将所有字符转换为等效的 HTML。但是，它也会将之类的转换`<`为`&lt;`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:53:14.357

试试这个：`header('Content-Type: text/html; charset=utf-8');` 这将使您的页面以 UTF8 显示所有合法字符，将此代码放在您的页面上`<?php`

**更新：** 尝试与数据库的每个连接：

```
 $connect = YOUR_MYSQL_CONNECTION();

    mysql_query( "SET NAMES 'utf8';" , $connect );

    mysql_query( "SET CHARACTER SET 'utf8';" , $connect ); 
```

# javascript - 查找最接近的单选按钮集的值

> ID：10500971
> 
> 赞同：2
> 
> 时间：2012-05-08T14:48:09.577
> 
> 标签：javascript, jquery, forms

我有多组单选按钮，并试图使用该`.find()`功能动态查找同一分组中单选按钮的值。

但是，它一直返回未定义。

```
<fieldset>
  <div id="border1">
    <input id="radio1a" type="radio" id="set1" class="animals radio" value="Zebra">
    <input id="radio1b" type="radio" id="set1" class="animals radio" value="Lion">
  </div>
  <div id="border2">
    <input id="radio2a" type="radio" id="set2" class="fruit" value="Oranges">
    <input id="radio2b" type="radio" id="set2" class="fruit" value="Grapes">
  </div>
</fieldset>

<fieldset>
  <div class="border1">
    <input id="radio3a" type="radio" id="set3" class="animals radio" value="Monkey">
    <input id="radio3b" type="radio" id="set3" class="animals radio" value="Parrot">
  </div>
  <div class="border2">
    <input id="radio4a" type="radio" id="set4" class="fruit radio" value="Bananas">
    <input id="radio4b" type="radio" id="set4" class="fruit radio" value="Cherries">
  </div>
</fieldset> 
```

（对不起，不是要放相同的 ID。是复制/粘贴。）

我正在尝试使用 jquery 来动态查找值：

```
$(".animals .radio").change(function()
{
  alert($(this).closest('fieldset').find('.fruit').val());
  etc.
} 
```

但它不断返回`undefined`

也试过：

```
$(this).closest('fieldset').find('.fruit:checked').val() 
```

我应该用另一种方法来解决这个问题吗？我不想为每一组单选按钮编写代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:50:13.797

它应该`.animals.radio`，不是`.animals .radio`。

1.  `.animals.radio`表示这两个类属于同一个元素。（在你的情况下这是正确的）

2.  `.animals .radio`意思`.animals`是 的祖先`.radio`。

    ```
     $(".animals.radio").change(function() {

       alert($(this).closest('fieldset').find('.fruit').val());

     }); 
    ```

有人认为，您的代码有***重复的 ID***，请避免使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T14:51:06.763

`$(".animals .radio")`不是您要查找的查询，它应该是`$(".animals.radio")`（类之间没有空格）。

`$(".animals .radio")`在“animals”类的元素中查找“radio”类的元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T14:55:48.917

不使用`id=""`两次，并`type="radio"`在这些输入上为初学者设置 a 怎么样？您还对多个元素使用相同的 ID，停止吗？

应该是：

```
<fieldset>

<div id="border1">
      <input type="radio" id="radio1a" name="set1" class="animals radio" value="Zebra" />
      <input type="radio" id="radio1b" name="set1" class="animals radio" value="Lion" />
  </div>
  <div id="border2">
      <input type="radio" id="radio1c" name="set2" class="fruit" value="Oranges" />
      <input type="radio" id="radio1d" name="set2" class="fruit" value="Grapes" />
  </div>
</fieldset>

<fieldset>
  <div class="border1">
      <input type="radio" id="radio2a" name="set3" class="animals radio" value="Monkey" />
      <input type="radio" id="radio2b" name="set3" class="animals radio" value="Parrot" />
  </div>
  <div class="border2">
      <input type="radio" id="radio2c" name="set4" class="fruit radio" value="Bananas" />
      <input type="radio" id="radio2d" name="set4" class="fruit radio" value="Cherries" />
  </div>
</fieldset>​​​​​​​​​​ 
```

要获得这两个值：

```
$('input[type="radio"]').on('change', function() {
    $(this).closest('fieldset').find('.fruit').each(function() {
         alert(this.value);
    });
}​);​ 
```

只得到一个被检查的：

```
$('input[type="radio"]').on('change', function() {
    var elm = $(this).closest('fieldset').find('.fruit').filter(':checked');
    alert(elm.value);
}​);​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T14:53:14.617

`$(".animals .radio")`正在为您提供具有班级动物父母的班级广播的所有元素。

你想要同时具有动物类和无线电类的元素，就像`$(".animals.radio")`

# powershell - 使用 winrm 和 powershell 持久化控制台

> ID：10500973
> 
> 赞同：2
> 
> 时间：2012-05-08T14:48:22.167
> 
> 标签：powershell, winrm

我刚开始使用 powershell 来自动化一个过程，现在我坚持使用 win 远程处理。我在要连接的机器上启用了远程处理，并且可以轻松执行单行命令，例如

```
winrs -r:http://$servername:5985 -u:$user "dir c:\" 
```

执行该命令后，远程外壳程序完成，每次我需要执行命令时，我都需要再次编写 winrs -r... 。有什么方法可以留在远程计算机的控制台中，例如当我远程登录或使用 ssh 连接时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:00:59.297

在 PowerShell 中尝试：

```
Enter-PSSession -ComputerName $servername 
```

# iphone - 在类方法中访问的实例变量，Objective C

> ID：10500977
> 
> 赞同：2
> 
> 时间：2012-05-08T14:48:25.777
> 
> 标签：iphone, objective-c, class-method

这是我收到此错误时的原始代码

类A.h

> +(ClassA*)methodA:(NSData*)data;
> 
> ```
> @property (nonatomic, strong) NSMutableArray    *arr; 
> @property (nonatomic, strong) RXMLElement     *rxmlRoot; 
> ```
> 
> @结尾

类A.m

> +(ClassA*)methodA:(NSData*)data {
> 
> ```
> //NSLog(@"class is %@",[name class]);
> ClassA *ClassA   =   [[Stores alloc] init];
> arr        =   [NSMutableArray array];
> rxmlRoot   = [RXMLElement elementFromXMLData:data]; 
> ```
> 
> }

我正在审查我的代码，现在我有两个选项来修复代码

**选项A**

> 类A.h
> 
> ```
> +(ClassA*)methodA:(NSData*)data;
> 
> @property (nonatomic, strong) NSMutableArray    *arr; 
> @property (nonatomic, strong) RXMLElement     *rxmlRoot; 
> 
> @end 
> ```
> 
> 类A.m
> 
> ```
> +(ClassA*)methodA:(NSData*)data {
> 
> //NSLog(@"class is %@",[name class]);
> ClassA *ClassA   =   [[Stores alloc] init];
> ClassA.arr        =   [NSMutableArray array];             <----- this has been modified
> ClassA.rxmlRoot   = [RXMLElement elementFromXMLData:data];<----- this has been modified
> 
> } 
> ```

**选项B**

> 类A.h
> 
> ```
> +(ClassA*)methodA:(NSData*)data;
> 
> @end 
> ```
> 
> 类A.m
> 
> ```
> static RXMLElement    *rxlRoot; <----- this has been added as class variable
> static NSMutableArray *arr;     <----- this has been added as class variable
> 
> +(ClassA*)methodA:(NSData*)data {
> 
> //NSLog(@"class is %@",[name class]);
> ClassA *ClassA   =   [[Stores alloc] init];
> arr        =   [NSMutableArray array];             
> rxmlRoot   = [RXMLElement elementFromXMLData:data]; 
> ```
> 
> }

我尝试了 optionA 或 optionB 并且编译器没有抱怨任何东西并且代码正常工作。

我在 optionB 之后看到许多创建类变量的帖子。

**问题**：当我们处理类方法和类变量时，optionA 也是一个很好的方法吗？

请就这个问题给我建议，顺便说一下，如果我在某处犯了错误，请纠正我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:26:00.003

在 Objective-C 中没有“类变量”这样的东西。当您按原样声明变量时，`static`实际上是一个全局变量，该变量仅限于编译它的文件的范围或方法/函数（或子表达式）的范围。

摆脱`Class.`设置变量的调用部分；这`.m`仅适用于类的文件；这通常是您想要的模式（通常不鼓励真正的全局变量 - 但有时很有用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:58:55.557

使用数据参数创建指定的初始化程序。每个类都应该有一个指定的初始化器。

在您的类方法中调用传入的指定初始化程序`data`。

这是示例代码：

```
//ClassA.h
@class RXMLElement;

@interface ClassA : NSObject
+(ClassA*)methodA:(NSData*)data;
-(id)initWithData:(NSData*)data;

@property (nonatomic, strong) NSMutableArray *arr; 
@property (nonatomic, strong) RXMLElement    *rxmlRoot; 

@end

//ClassA.m
@implementation ClassA
@synthesize arr;
@synthesize rxmlRoot;

+(ClassA*)methodA:(NSData*)data {
    return [[ClassA alloc] initWithData:data];
}

-(id)initWithData:(NSData*)data {
    self = [super init];
    if (self) {
        arr      = [NSMutableArray array];
        rxmlRoot = [RXMLElement elementFromXMLData:data];
    }
    return self;
}
@end 
```

示例中假定为 ARC。

# python - Google App Engine，上传视频，python

> ID：10500978
> 
> 赞同：0
> 
> 时间：2012-05-08T14:48:30.117
> 
> 标签：python, google-app-engine, upload, dropbox, google-drive-api

我正在编写一个应用程序，让用户可以将视频上传到我的网站，这样我就可以对其进行编辑并发回给他们。我正在使用谷歌应用引擎和 python。我已经阅读了有关 blob 和东西的内容，但我认为仍然需要一些进一步的解释。

它究竟是如何工作的？

我已经使用 google blob 示例代码编写了一些代码，所以看起来文件正在上传。但是，我不知道如何访问它们。我什至不知道他们被保存在哪里。

这是我的表格

```
<form method="POST" action="%s" enctype="multipart/form-data">
    Upload file: <input type="file" name="file" /><br />
    </br>
    <input type="submit" name="Submit" value="Submit"/>
  </form> 
```

这是我的处理程序：

```
import os
os.environ['DJANGO_SETTINGS_MODULE'] = 'settings'
from google.appengine.dist import use_library
use_library('django', '1.2')

import os
import logging
import cgi
import datetime
import urllib
import wsgiref.handlers
from google.appengine.ext import webapp
from google.appengine.ext.webapp import template
from util.sessions import Session
from google.appengine.ext import db
from google.appengine.api import users
from google.appengine.ext import blobstore
from google.appengine.ext.webapp import blobstore_handlers

# A Model for a User
class User(db.Model):
  account = db.StringProperty()
  password = db.StringProperty()
  name = db.StringProperty()

# A helper to do the rendering and to add the necessary
# variables for the _base.htm template
def doRender(handler, tname = 'index.html', values = { }):
  logging.info('doRender(' + tname + ')')
  temp = os.path.join(
      os.path.dirname(__file__),
      'templates/' + tname)
  logging.info(temp)
  if not os.path.isfile(temp):
    return False

  # Make a copy of the dictionary and add the path and session
  newval = dict(values)
  newval['path'] = handler.request.path
  handler.session = Session()
  if 'username' in handler.session:
     newval['username'] = handler.session['username']
  logging.info(newval)
  outstr = template.render(temp, newval)
  handler.response.out.write(outstr)
  return True

class LoginHandler(webapp.RequestHandler):

  def get(self):
    doRender(self, 'login.html')

  def post(self):
    self.session = Session()
    acct = self.request.get('account')
    pw = self.request.get('password')
    logging.info('Checking account='+acct+' pw='+pw)

    self.session.delete_item('username')
    self.session.delete_item('userkey')

    if pw == '' or acct == '':
      doRender(
          self,
          'login.html',
          {'error' : 'Please specify Account and Password'} )
      return

    que = db.Query(User)
    que = que.filter('account =',acct)
    que = que.filter('password = ',pw)

    results = que.fetch(limit=1)

    if len(results) > 0 :
      user = results[0]
      self.session['userkey'] = user.key()
      self.session['username'] = acct
      doRender(self,'index.html',{ } )
    else:
      doRender(
          self,
          'login.html',
          {'error' : 'Incorrect password'} )

class AddUserHandler(webapp.RequestHandler):

  def get(self):
    doRender(self, 'adduser.html')

  def post(self):
    self.session = Session()
    name = self.request.get('name')
    acct = self.request.get('account')
    pw = self.request.get('password')
    logging.info('Adding account='+acct)

    if pw == '' or acct == '' or name == '':
      doRender(
          self,
          'adduser.html',
          {'error' : 'Please fill in all fields'} )
      return

    # Check if the user already exists
    que = db.Query(User).filter('account =',acct)
    results = que.fetch(limit=1)

    if len(results) > 0 :
      doRender(
          self,
          'adduser.html',
          {'error' : 'Account Already Exists'} )
      return

    # Create the User object and log the user in
    newuser = User(name=name, account=acct, password=pw);
    pkey = newuser.put();
    self.session['username'] = acct
    self.session['userkey'] = pkey
    doRender(self,'index.html',{ })

class LogoutHandler(webapp.RequestHandler):

  def get(self):
    self.session = Session()
    self.session.delete_item('username')
    self.session.delete_item('userkey')
    doRender(self, 'index.html')

class UploadHandler(blobstore_handlers.BlobstoreUploadHandler):
    def post(self):
        upload_files = self.get_uploads('file')  # 'file' is file upload field in the form
        blob_info = upload_files[0]
        self.redirect('/serve/%s' % blob_info.key())

class ServeHandler(blobstore_handlers.BlobstoreDownloadHandler):
    def get(self, resource):
        resource = str(urllib.unquote(resource))
        blob_info = blobstore.BlobInfo.get(resource)
        self.send_blob(blob_info)

class MainHandler(webapp.RequestHandler):        

  def get(self):
    if doRender(self,self.request.path) :
      return
    doRender(self,'index.html')

def main():
  application = webapp.WSGIApplication([
     ('/login', LoginHandler),
     ('/add-user', AddUserHandler),
     ('/logout', LogoutHandler),
     ('/upload', UploadHandler),
     ('/serve/([^/]+)?',ServeHandler),
     ('/.*', MainHandler)],
     debug=True)
  wsgiref.handlers.CGIHandler().run(application)

if __name__ == '__main__':
  main() 
```

有人可以帮我解决这个问题吗？此外，是否有任何选项可以将这些文件直接保存在我的谷歌驱动器或保管箱中？

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T00:54:13.667

[您可以使用BlobReader](https://developers.google.com/appengine/docs/python/blobstore/blobreaderclass)类访问 blobstore 文件数据，该类的行为类似于 Python 文件对象。

例如：

```
upload_files = self.get_uploads('file')
blob_info = upload_files[0]
f = blob_info.open() # Return a BlobReader
content = f.read() # Read the entire file content into memory 
```

您可以使用[Drive SDK在 Google Drive 上保存文件，您可以](https://developers.google.com/drive/)[在此处](https://developers.google.com/drive/examples/python)找到 Google App Engine 的示例应用

# c# - 如何删除内存映射文件？

> ID：10500981
> 
> 赞同：2
> 
> 时间：2012-05-08T14:48:43.740
> 
> 标签：c#, memory-mapped-files, memory-mapping

我使用内存映射文件，完成工作后，我想从磁盘中删除文件。但我在 File.Delete(fileName); 中有 UnauthorizedAccessException 我在[这里](https://stackoverflow.com/questions/6481378/cant-delete-file-for-memorymappedfile)读到我应该使用“使用”，但我处理了几个文件，所以我有 MemoryMappedFileAccessor 的数组。我的代码：

```
var mmf_acc_array = new MemoryMappedViewAccessor[numFiles];
var size = 1048576; //1Mb
var mmf = new MemoryMappedFile[numFiles];
for (int i = 0; i < numFiles; i++)
{
mmf[i] = MemoryMappedFile.CreateFromFile(Path.Combine("tmp", "tmp" + i.ToString()));
mmf_acc_array[i] = mmf[i].CreateViewAccessor(0, size);
}

do sm work

for (int i = 0; i < numFiles; i++)
{
mmf_acc_array[i].Dispose();
mmf[i].Dispose();
File.Delete(Path.Combine("tmp", "tmp" + i.ToString()));
} 
```

File.Delete() 中出现异常；如何释放文件？

# oracle - 为 Oracle 列（尤其是 CLOB）的 NULL 值分配的空间是多少

> ID：10500983
> 
> 赞同：2
> 
> 时间：2012-05-08T14:48:53.100
> 
> 标签：oracle, database-design, schema

我们有一个报告（简单文本）存储在 Oracle 中，平均案例将少于 4K，但有些案例超过了。所以一个选择是使用 CLOB。它仅用于记录目的，不用于查询或更新。只插入一次，退出几次。

**空间和整体架构（其他表）性能是主要关注点。**

我阅读了有关 CLOB 存储分配格式的信息。

我们正在考虑使用 2 列，msgV varchar2(4000) 和 msgC CLOB。当文本超过 4k 时，我们将存储到 CLOB 中，否则通常使用 varchar2 并且 CLOB 保持为 NULL。

所以我的问题是，

1.  这个方案是**更好地考虑上述性能**还是简单地使用 CLOB ？（除了它需要更多的编码工作来维持这种情况）

2.  NULL 和 Empty CLOB（或任何数据类型）占用的空间是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T16:20:06.970

使用块。如果 clob 中的数据小于 4000 字节，它实际上将被内联存储。请参阅下面链接中有关 LOB 与 LONG 比较的部分。

[甲骨文](http://docs.oracle.com/cd/B28359_01/appdev.111/b28393/adlob_tables.htm)

# java - 通过 JSP 中的 Servlet 进行 Web 搜索

> ID：10500985
> 
> 赞同：0
> 
> 时间：2012-05-08T14:49:04.473
> 
> 标签：java, jsp, servlets

我正在 JSP 中构建一个页面，其中包含一个用于插入搜索查询的文本框的表单。单击搜索按钮时，它必须传递到一个 servlet，该 servlet 从文本框中收集术语并将其提交给 Google，然后收集结果并显示到我自己的页面中（例如，就在之前页面中的表单下方）。
任何人都可以建议我是否可以从 servlet 以编程方式将搜索参数传递给谷歌？

任何见解、建议或伪代码示例都将受到高度赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:55:08.673

是的，虽然 Google 自定义搜索 API 查看概述和以下说明是可能的：

[概述](https://developers.google.com/custom-search/v1/overview)

[使用 REST](https://developers.google.com/custom-search/v1/using_rest)

[Java 库和指南](http://code.google.com/p/google-api-java-client/wiki/APIs#CustomSearch_API)

我认为或多或少这就是你要找的东西：

```
package com.hahahaha.servlet;

import com.google.api.client.http.javanet.NetHttpTransport;
import com.google.api.client.json.jackson.JacksonFactory;
import com.google.api.services.customsearch.Customsearch;
import com.google.api.services.customsearch.model.Result;
import com.google.api.services.customsearch.model.Search;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.List;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 *
 * @author hahahahaha
 */
@WebServlet(name = "GoogleSearchServlet", urlPatterns = {"/GoogleSearchServlet"})
public class GoogleSearchServlet extends HttpServlet {

    /**
     * Processes requests for both HTTP
     * <code>GET</code> and
     * <code>POST</code> methods.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();

        try {
            out.println("<html>");
            out.println("<head>");
            out.println("<title>Servlet GoogleSearchServlet</title>");
            out.println("</head>");
            out.println("<body>");

            // Get your query string posted by the user
            String query = request.getParameter("query");            
            //Instantiate a Customsearch object using NetHttpTransport and the JacksonFactory (JSON library)
            Customsearch customsearch = new Customsearch(new NetHttpTransport(), new JacksonFactory());
            // Instantiate a Customsearch.Cse.List object using your query string
            com.google.api.services.customsearch.Customsearch.Cse.List list = customsearch.cse().list(query);
            // Set your API KEY
            list.setKey("YOUR_API_KEY");
            // Set your custom search engine ID
            list.setCx("YOUR_CSEID");
            // Execute the search
            Search results = list.execute();
            // Get the result items
            List<Result> items = results.getItems();
            // Loop through your result items and stream them to the client            
            for(Result result : items){
                out.println("<b>" + result.getHtmlTitle() + "</b>");
            }                
            out.println("</body>");
            out.println("</html>");
        } finally {
            out.close();
        }
    }

    // <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">
    /**
     * Handles the HTTP
     * <code>GET</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /**
     * Handles the HTTP
     * <code>POST</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /**
     * Returns a short description of the servlet.
     *
     * @return a String containing servlet description
     */
    @Override
    public String getServletInfo() {
        return "Short description";
    }// </editor-fold>
} 
```

# html - 双图背景不加css类

> ID：10500987
> 
> 赞同：0
> 
> 时间：2012-05-08T14:49:11.970
> 
> 标签：html, css, background

我正在做这个项目：[http ://www.e-pedkelnes.beta.verskis.lt/](http://www.e-pedkelnes.beta.verskis.lt/)

实际上我要做的是在不添加类的情况下放置背景。背景必须是白色的，带有菜单和页脚元素的扩展名。如果它只是菜单的扩展，那将很容易。内容的大小不同，大小取决于屏幕中的元素。因此，为菜单放置背景很容易，但由于内容的大小不同，页脚背景总是处于不同的位置。如果你明白我的意思:)，我会很感激能得到一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:59:13.480

之内：

```
.foot-outer {
    background: none repeat scroll 0 0 #E8E4E5;
    border-top: medium none !important;
    left: 2px;
    padding-top: 15px;
} 
```

我删除了宽度和边距，看起来更好。您不应该将它们设置在外部元素上，而只能设置在容器元素上。

那有意义吗？

编辑：

您的 HTML 布局应该更像

```
<div class='header wrapper'>
    <div class='header'>
    </div>
</div>
<div class='content wrapper'>
    <div class='content'>
    </div>
</div>
<div class='footer wrapper'>
    <div class='footer'>
    </div>
</div> 
```

然后将背景应用到包装器 div，并将居中宽度应用到内部内容 div。

# javascript - 防止在运行 javascript 时提示打开窗口

> ID：10500989
> 
> 赞同：2
> 
> 时间：2012-05-08T14:49:21.493
> 
> 标签：javascript, windows, scripting, batch-file

我有一个名为`fancy.js`. `fancy.js`我有一个批处理脚本多次调用它。

当我在我的计算机上运行这个批处理脚本时，它运行良好。

当我在为测试脚本而创建的干净 vm 上运行此批处理脚本时，它会在每次`fancy.js`调用时提示用户打开文件。对话框类似于：“你想打开这个文件吗？文件类型：jscript 脚本文件，发布者：未知发布者”。

**我如何防止它每次尝试运行时都提示用户`fancy.js`？**

它是在带有 win7 主机的 windows 7vm 上的管理命令提示符内运行的。

我`cscript //h:cscript`在批处理文件的顶部有这个。这是为了防止在旧版本的 Windows 中出现一些提示。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:10:25.210

你试过解除封锁吗？当来自不同来源时，Windows 会将内容标记为不安全。

右键单击该文件并获取其属性。单击取消阻止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:18:13.977

我弄清楚了这个问题。我试图`fancy.js`从网络驱动器运行批处理脚本。

一旦我将它移动到虚拟机的本地驱动器，它就运行良好。

# .net - Win32Exception：创建窗口句柄时出错（大量嵌套控件）

> ID：10500993
> 
> 赞同：1
> 
> 时间：2012-05-08T14:49:38.117
> 
> 标签：.net, winforms, nunit-2.5

首先，对不起我的英语，因为它不是我的母语。

问题发生在我的 .NET Windows Forms 应用程序中，并且由于某些原因仅在 Virtaul PC Windows 7 (x64) 上重现。

当调整包含许多自定义控件的主应用程序窗体的大小时，我在应用程序的一个地方遇到了 Win32Exception，包括两个相互堆叠的 tabcontrols 等。异常的消息是“创建窗口句柄时出错”。我花了一些时间在 Microsoft 支持网站上找到了该问题的解决方案。这与我的情况非常相似。来自网站的引用：

> 在 .NET 应用程序中，停靠控件有时在它们的父级嵌套时不会调整大小。在 64 位和 32 位平台上都会出现此问题，但在 32 位系统上需要更深的嵌套级别。
> 
> 发生的情况是，当顶层控件布局时，SetBoundsCore 调用 SetWindowPos 来调整子控件的大小。每个子控件都会收到一个 WM_WINDOWPOSCHANGED 通知，该通知会触发一个布局事件，该事件调用 SetBoundsCore，该事件调用 SetWindowPos。对 SetWindowPos 的每次调用都会进入内核模式，然后退出以传递 WM_WINDOWPOSCHANGED 通知。最终线程耗尽内核堆栈空间，SetWindowPos 静默失败。

建议的解决方案是覆盖容器控件的 OnSizeChanged 方法（如 Panels 或 TabControl（在我的情况下））：

```
 protected override void OnSizeChanged(EventArgs e)
    {
        if (this.Handle != null)
        {
            BeginInvoke((MethodInvoker)(() => base.OnSizeChanged(e);));
        }
    } 
```

我成功地将这个解决方案应用于我的案例：创建了自定义 TabControl（从普通的 winforms TabControl 类继承）并使用我的自定义控件实例更改了 TabControl 实例。问题消失了！但...

...当我在 CCnet 构建机器上启动 Build 时，我在不同的单元测试中遇到了很多 Win32Exception-s“创建窗口句柄时出错”，但最有趣的不是我有问题的控件（包含自定义 TabControl 对象）单元测试！错误情况不同，但它们与我的自定义控件无关。当我恢复更改时，一切正常，创建了构建（单元测试成功执行）。

应用更改修复了用户应用程序的可操作性，但在创建构建时导致单元测试失败，这让我完全感到困惑。

顺便说一句，在本地机器上，所有单元测试在任何情况下都可以正常执行（有或没有修复）。

我花了很多时间来调查这个问题，现在我只有一个假设：ccnet build machine 在一个进程中执行所有单元测试，并且测试没有正确处理测试数据（gdi 对象）（在拆卸时），因为错误“错误创建窗口句柄”通常发生在达到允许的 gdi 对象句柄 (10000) 的限制时。

能否请您分享您的专业意见？提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:35:25.317

如果在 CCNET 机器上作为单元测试运行，它可能在非交互式服务上下文中运行，这可能会阻止创建窗口，因为没有人可以查看它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:13:24.353

与您的错误没有直接关系，但访问 Handle 属性将强制创建窗口句柄，这有时是不可能的。不应像这样执行句柄检查：

```
if (this.Handle != null) 
```

相反，检查 IsHandleCreated 属性：

```
if (this.IsHandleCreated) 
```

不久前，我在有关此问题[的博客文章](http://blogs.msdn.com/b/alejacma/archive/2008/11/20/controls-won-t-get-resized-once-the-nesting-hierarchy-of-windows-exceeds-a-certain-depth-x64.aspx?PageIndex=2#comments)中提到了这一点，但似乎没有被注意到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-19T12:01:27.970

我对深度嵌套的控件有同样的问题。但是，为了获得适当的解决方案，我不得不覆盖并延迟 SetBoundsCore

```
 protected override void SetBoundsCore(int x, int y, int width, int height, BoundsSpecified specified)
    {
        if (this.IsHandleCreated)
        {
            this.BeginInvoke(
                             (MethodInvoker)delegate
                             {
                                 base.SetBoundsCore(x, y, width, height, specified);
                             });
        }
    } 
```

# macos - Zend Server CE 和 Mac OSX 上的虚拟主机问题

> ID：10500995
> 
> 赞同：1
> 
> 时间：2012-05-08T14:49:39.943
> 
> 标签：macos, apache, zend-server, virtual-hosts

我在 Mac OSX 上使用 Zend Server CE 5.6.0。

我`httpd.conf`有以下行，添加虚拟主机文件：

`Include conf/extra/httpd-vhosts.conf`

在该文件中，我有以下内容：

```
NameVirtualHost *:80

<VirtualHost *:80>
    ServerName localtextil.drupal.lh
    DocumentRoot /usr/local/zend/apache2/htdocs/Obiz/LocalTextil-Portal/drupal
</VirtualHost> 
```

因此，根据定义，当我尝试访问时`localtextil.drupal.lh`，它应该将我重定向到它的文档根目录。

问题是，当我尝试访问该主机时，出现错误。

当我简单地访问时`localhost`，我会转到位于`/usr/local/zend/apache2/htdocs/Obiz/LocalTextil-Portal/drupal`.

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:54:52.497

两件事 - 首先是虚拟主机定义（据我所知）覆盖了 apache 在目录和服务器名之间的映射。第一个定义的虚拟主机是 apache 在找不到地图时将使用的默认值 - 所以它应该是一个通用设置（反映你的原始域名，在你的情况下是 localhost），然后是你的特定设置。

其次，如果您的文件夹不在您授予 apache 读取权限的位置，那么您可能会收到错误消息。目录权限由 DocumentRoot 指令设置 - 但是：

> 现在，当请求到达时，服务器将首先检查它是否使用与 NameVirtualHost 匹配的 IP 地址。如果是，那么它将查看具有匹配 IP 地址的每个部分，并尝试找到 ServerName 或 ServerAlias 与请求的主机名匹配的部分。如果找到，则使用该服务器的配置。如果未找到匹配的虚拟主机，则将使用与 IP 地址匹配的第一个列出的虚拟主机。
> 
> 因此，第一个列出的虚拟主机是默认虚拟主机。当 IP 地址与 NameVirtualHost 指令匹配时，将永远不会使用来自主服务器的 DocumentRoot。如果您想对与任何特定虚拟主机不匹配的请求进行特殊配置，只需将该配置放在容器中并首先在配置文件中列出。

关于基于名称的虚拟主机的 Apache 文档页面在[这里](http://httpd.apache.org/docs/2.0/vhosts/name-based.html#using)，它应该有助于提供一些想法。基本上，您需要查看 DocumentRoot 和服务器名称的定义，并检查它们以确保它们都“正常”。