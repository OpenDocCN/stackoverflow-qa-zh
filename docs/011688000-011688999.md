# StackOverflow 问答 11688000-11688999

# c# - 从自己的 C# Dll in Progress 4GL 创建 COM-Object

> ID：11688009
> 
> 赞同：2
> 
> 时间：2012-07-27T12:43:24.640
> 
> 标签：c#, com, progress-4gl

我想知道如何从我自己的 C# DLL 创建一个 Com-Object。

我在 C# 中创建了以下类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;

namespace ProgressNet
{
    [Guid("a9b1e34d-3ea3-4e91-a77a-5bcb25875485")]
    [ClassInterface(ClassInterfaceType.AutoDual)]
    [ComVisible(true)]
    [ProgId("ProgressNet.Server")]
    public class NetServer
    {
        public NetServer() {}

        [DispId(1)]
        public string GetString()
        {
            return "Some String";
        }
    }
} 
```

在属性中，我检查了注册 COM 互操作。

然后我用 regasm 注册了 DLL。

```
regasm G:\ProgressTestApp\ProgressNet.dll /tlb:G:\ProgressTestApp\ProgressNet.tlb /codebase 
```

然后我在Progress 4GL中尝试了这段代码：

```
DEFINE VARIABLE NetServer AS COM-HANDLE.
CREATE "ProgressNet.NetServer" NetServer.  
MESSAGE NetServer:GetString(). 
```

但后来我得到“ProgressNet.NetServer 的自动化服务器未正确注册”..

有什么建议么？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:34:03.810

万一有人还在读这篇文章，答案很简单：以下行是错误的。

```
MESSAGE NetServer::GetString(). 
```

它应该是

```
MESSAGE NetServer:GetString(). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-03T21:26:59.427

错误在`create`com-handle 语句中。它应该是`create "ProgressNet.Server" NetServer.`而不是调用`"ProgressNet.NetServer"`指定的`ProgId`。

`regasm`我按照您提到的那样注册了 DLL，并使用下面的代码进行测试，它工作正常。

```
def var ch as com-handle no-undo.

create "ProgressNet.Server" ch.

MESSAGE ch:GetString()
    VIEW-AS ALERT-BOX INFO BUTTONS OK. 
```

# sql - 服务器端与客户端

> ID：11688011
> 
> 赞同：0
> 
> 时间：2012-07-27T12:43:32.907
> 
> 标签：sql, sql-server

首先让我说我只是一个新手程序员，绝不是一个sql大师。我们有一个正在工作的应用程序，并且已经在供应商的大力开发下进行了一段时间（2 年以上）。它在我们的一台服务器上作为 MSSQL 实例运行，并且为桌面安装了客户端。客户端软件正在对数据库进行直接 sql 调用。（它还有一个本地 mysql 实例来处理客户端设置）有 6-12 个端口必须打开以进行通信。查看 sql 管理器，我可以看到来自各种客户端的直接 sql 调用。

在我看来，这完全是错误的做法。我对此做过的最接近的事情是网页+ php + mysql。网页会发出请求，所有处理都在服务器端，然后简单地显示结果。我认为我的用户感觉迟缓来自客户端请求+对 sql 数据的处理。

ps：我意识到如果他们现在还没有这样做，切换到另一个范式似乎是不可能的。我只是想知道我是否离基地很远。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T12:47:47.960

你离基地太远了。

客户端具有更多的处理能力。

考虑一台服务器和 5 个客户端的情况。即使是服务器的功率是客户端的 3 倍，客户端作为一个整体仍然是 5:3 更强大。

如果应用程序运行缓慢，则可能是写得不好。您需要调查根本原因。客户端/服务器是设计中的领先实践，我猜这不是根本原因。它可能实施不当或可能有其他原因。您对拥有本地 mysql 的评论对我来说听起来很可疑——应该没有必要这样做。

# mysql - 科学实验的时间序列数据库

> ID：11688017
> 
> 赞同：1
> 
> 时间：2012-07-27T12:43:50.350
> 
> 标签：mysql, database, time-series

我必须使用时间序列进行科学实验。

我打算`MySQL`用作数据存储平台。

我正在考虑使用以下一组表来存储数据：

`Table1`--> `ts_id`（存储时间序列索引，我要处理好几个时间序列）

`Table2`--> `ts_id`, `obs_date`, `value`(应该被 索引`{ts_idx,obs_date}`)

因为会有很多时间序列（数百个），每个可能有数百万个观测值，表 2 可能会变得非常大。

问题是我必须多次复制这个实验，所以我不确定最好的方法是什么：

1.  在表格中添加一个`experiment_id`，让它们增长得更多。
2.  为每个实验创建一个单独的数据库。

如果选项 2 更好（我个人认为是这样），那么最好的逻辑方法是什么？我有许多不同的实验要执行，每个都需要复制。如果我为每个复制创建不同的数据库，我很快就会获得数百个数据库。有没有办法在逻辑上组织它们，例如将每个复制作为其实验的“子数据库” `master database`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:05:09.170

您是否应该拥有多个数据库，每个实验一个数据库？

你的问题的答案取决于你对这个问题的回答：你愿意做很多分析来比较一个实验和另一个实验吗？

如果您将进行大量的实验与实验比较，那么为每个实验都有一个单独的数据库将是一件非常痛苦的事情。

我认为您对观察表中的实验 ID 列的建议是个好主意。这样，您就可以构建一个包含实验总体描述的实验表。该表还可以在您的值列中保存观察单位（例如温度、电压等）。

如果您有多个实验的某种复杂组织，您可以将该组织存储在您的实验表中。

请注意，MySQL 在处理短行数据方面非常有效。你可以花几十个小时的劳动成本购买一台漂亮的服务器，或者花几个小时的劳动成本在云服务上租用一台服务器。

还要注意 MySQL 提供了 MERGE 存储引擎。 [http://dev.mysql.com/doc/refman/5.5/en/merge-storage-engine.html](http://dev.mysql.com/doc/refman/5.5/en/merge-storage-engine.html) 这允许访问一堆具有相同列结构的不同表，就好像它是一个表一样。这将允许您将单个实验或一组实验的结果存储在各自的表中，然后一起访问它们。如果您在扩展数据收集系统时遇到问题，您可能需要考虑这一点。但好消息是你可以让你的数据库正常工作，然后转换成这个。

另一个问题：为什么你有一个只有 ts_id 值的表？我不明白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:17:40.597

您可能想从考虑如何分析数据开始。

假设您的分析需要了解实验名称、实验复制编号、内部复制（例如，在每个时间点，每个处理测量 3 个“相同”受试者）。所以你的数据库架构可能是这样的：

```
experiments

exp_id int unsigned not null auto_increment primary key,
exp_name varchar(45)
other fields that any kind of experiment can have

replicates

rep_id  int unsigned not null auto_increment primary key,
exp_id int unsigned not null foreign key to experiments
other fields that any kind of experiment replica can have

subjects

subject_id int unsigned not null auto_increment primary key,
subject_name varchar(45),
other fields that any kind of subject can have

observations

ob_id int unsigned not null auto_increment primary key,
rep_id  int unsigned not null foreign key to replicates,
subject_id int unsigned not null foreign key to subjects,
ob_time timestamp
other fields to hold the measurements you make at each timepoint 
```

如果您有内部复制，则需要另一个表来保存内部复制/主题关系。

不要担心你的数百万行。只要您明智地索引，就不可能有任何问题。但是，如果情况变得更糟，您始终可以将观察表（可能是最大的）分区为`rep_id`.

# windows - 批量列出不包含特定文件的文件夹

> ID：11688019
> 
> 赞同：4
> 
> 时间：2012-07-27T12:43:52.687
> 
> 标签：windows, batch-file

例如，有没有办法将所有不包含名为“test”的文件的文件夹（完整路径）保存在文本文件中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T13:04:26.533

这应该工作

```
@echo off
for /d /r %%f in (*) do (
if not exist %%f\test.txt (
echo %%f >>C:\folders.txt
)
) 
```

这会将所有不包含该文件的文件夹输出`test.txt`到该文件`C:\folders.txt`，只需根据您的需要进行调整/调整。

# c# - 使用 NHibernate 查询获取特定列

> ID：11688025
> 
> 赞同：4
> 
> 时间：2012-07-27T12:44:02.907
> 
> 标签：c#, nhibernate, queryover

我有一个使用 NHibernate 和 C# 语言的应用程序。我有一个具有一些关系的模型，我想创建一个查询以仅获取一个值。我试过这样的事情：

```
public long GetIdCompany(long number)
{
    return session.QueryOver<Report>()
                  .Where(x => x.Number == number)
                  .Select(x => x.Equipament.Company.Id)
                  .Take(1);
} 
```

但我没有工作。我只是想把`IdCompany`模型放进去`Report.Equipament.Company.Id`。它可能在 queryover、linq、hql 等...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T21:24:38.483

你应该使用`JoinAlias`，所以你的请求看起来像

```
 public long GetIdCompany(long number)
    {
        Equipament equipamentAlias = null;
        return session.QueryOver<Report>()
                      .Where(x => x.Number == number)
                      .JoinAlias(x => x.Equipament, () => equipamentAlias)
                      .Select(x => equipamentAlias.Company.Id)
                      .SingleOrDefault<long>();
    } 
```

这是[QueryOver 的精彩介绍](http://nhforge.org/blogs/nhibernate/archive/2009/12/17/queryover-in-nh-3-0.aspx)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-27T13:11:07.747

**高品质**

```
return session.CreateQuery(
        "select e.Company.id from Report r " +
        "    inner join r.Equipament e " +
        "where r.Number = :number")
    .SetInt64("number", number)
    .UniqueResult<long>(); 
```

**LINQ**

```
return session.Query<Report>()
    .Where(x => x.Number == number)
    .Select(x => x.Equipament.Company.Id)
    .Single(); 
```

**查询结束**

请参阅 GSerjo 的[回答](https://stackoverflow.com/a/11695844/119230)。

# java - 子类的哪种类型的属性不能被继承？

> ID：11688028
> 
> 赞同：-3
> 
> 时间：2012-07-27T12:44:18.550
> 
> 标签：java

```
class Test4{
    int a=2;
    public static void main(String[] args){
    Test4 test4=new Test4();
    Test4 test5=new Test5();
    System.out.println("test4_a="+test4.a);
    System.out.println("test5_a="+test5.a);
    System.out.println(test4.a==test5.a);
    }
}
class Test5 extends Test4{
    float a=2.0f;
} 
```

这两个属性的类型不一样。为什么“test4.a==test5.a”仍然是真的？请详细解释子类的属性。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T13:00:20.717

这个练习的诀窍在于它`test5`被声明为一个`Test4`类型，尽管实例化为一个`Test5`. 当您访问时`test5.a`，您实际上是在获取`Test4.a`. 没有浮点到整数的比较。您可以通过将浮点数定义为等于来轻松检查这一点`5.0f`：`true`无论如何都会进行比较，因为您正在将变量与其自身进行比较。

顺便说一下，这叫做[隐藏](https://stackoverflow.com/questions/10154348/java-field-hiding)。这非常令人困惑，您应该知道它的存在只是为了避免它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T12:55:34.540

这就是我*认为*让你感到困惑的事情。看这个例子：

```
public static void main(String[] args)
{
    int a = 5;
    double b = 5.0;
    short c = 5;

    System.out.println(a == b);
    System.out.println(b == c);

    int[] x = {1,2,3};
    int[] y = {1,2,3};

    System.out.println(x == y);

} 
```

结果是

> 真的
> 
> 真的
> 
> 错误的

为什么？*基本类型*，也称为[原始类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)，按值进行比较。正如我上面所说，$2k 和 $2.0k 的报价是相同的。它们代表相同的值。

但是对象，例如数组，应该通过它们的 equals() 方法进行比较。使用默认的 equals 运算符`==`只是比较内存位置。因此，两个单独的数组，它们都具有相同的对象但内存中的对象不同，不会被判断为相等。另一方面，如果我说

```
int[] y = x; 
```

然后`x == y`是真的，因为它们将指向内存中的同一个对象。

注意：我意识到数组可能不是最好的例子，因为比较数组应该使用静态`Arrays.equals(int[], int[])`方法进行真正的深度搜索。`x.equals(y)`仍然是错误的，但`Arrays.equals(x,y)`会给你真实的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T12:56:15.523

test5 是 Test5 的一个实例（它确实是，即使它被声明为 Test4），它有*一个*float 成员变量，隐藏了超类的*一个*int 成员变量。

test4 是 Test4 的一个实例，因此有一个 int 成员变量。test4.a == test5.a，因为它们的值是相同的。

# shell - 任何处于“LISTEN”状态的端口都可以被外界看到吗？

> ID：11688030
> 
> 赞同：0
> 
> 时间：2012-07-27T12:44:27.230
> 
> 标签：shell, tcp, netstat

我在 shell 中执行命令“netstat -tln”，这是它的输出。 ![在此处输入图像描述](../Images/a2c7bac75a9fc94b0fd9c256d7c21d2d.png)

第 5 个字段是外国地址，我不知道这里是什么意思。“0.0.0.0: *”是否意味着任何地址都可以连接到此端口而无需考虑 iptables，如果是这样，“:::* ”是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:13:22.473

3 个冒号 (:::) 表示 IPv6。

0.0.0.0 表示给定套接字正在侦听计算机可用的所有可用 IP 地址。

如果您不想使用 IPv6，我相信您可以将其删除。验证手册页，但可能删除“ipv6.o””会起作用。

# scala - Scala解析器陷入无限循环

> ID：11688031
> 
> 赞同：2
> 
> 时间：2012-07-27T12:44:31.567
> 
> 标签：scala, parser-combinators

我正在尝试在 scala 中编写一个简单的解析器，但是当我添加一个重复的标记时，Scala 似乎陷入了无限循环......

```
object RewriteRuleParsers extends RegexParsers {
  private def space = regex(new Regex("[ \\n]+"))
  private def number = regex(new Regex("[0-9]+")) 
  private def equals = (space?)~"="~(space?)
  private def word   = regex(new Regex("[a-zA-Z][a-zA-Z0-9-]*")) 
  private def string = regex(new Regex("[0-9]+")) >> { len => ":" ~> regex(new Regex(".{" + len + "}")) }  

  private def matchTokenPartContent: Parser[Any] = (space?)~word~equals~word<~ space?  
  private def matchTokenPart: Parser[Any] = ((space?) ~> "{" ~> matchTokenPartContent <~ "}"<~ space?)  
  private def matchTokenParts = (matchTokenPart *)  
  private def matchToken: Parser[Any] = ("[" ~> matchTokenParts ~ "]")

  def parseMatchToken(str: String): ParseResult[Any] = parse(matchToken, str)
} 
```

以及调用它的代码

```
val parseResult = RewriteRuleParsers.parseMatchToken("[{tag=hello}]") 
```

收到任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:35:55.070

问题是 的优先级`?`。以以下为例：

```
object simpleParser extends RegexParsers {
  val a = literal("a")
  val b = literal("b")
  def apply(s: String) = this.parseAll(a <~ b?, s)
} 
```

这里`a <~ b?`被解释为`(a <~ b)?`，所以它会接受`"ab"`or `""`，但不接受`"a"`。`a <~ (b?)`如果我们希望它接受，我们需要写`"a"`。

在您的情况下，您可以在 and`space?`末尾`matchTokenPartContent`加上括号`matchTokenPart`，它会按预期工作。

# ruby-on-rails-3 - 通过路径将参数作为 POST 传递

> ID：11688040
> 
> 赞同：1
> 
> 时间：2012-07-27T12:45:20.677
> 
> 标签：ruby-on-rails-3, path

我目前有以下链接：

```
<%= link_to 'New campus', new_campus_path(:university_id => @university.id) %> 
```

我得到的网址是：

```
/campus/new?university_id=1 
```

如何将参数作为 POST 传递？

我尝试添加方法=>：post，但没有运气。我很感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:25:48.973

的`method`参数`link_to`应该起作用 - 它到底有什么问题？

```
<%= link_to 'New campus', new_campus_path(:university_id => @university.id), method: :post %> 
```

或者，您可以尝试[`button_to`](http://apidock.com/rails/ActionView/Helpers/UrlHelper/button_to)

```
<%= button_to 'New campus', new_campus_path(:university_id => @university.id), method: :post %> 
```

* * *

编辑：在这两种情况下，参数仍将添加到查询字符串中，但只要 HTTP 动词是正确的，这对 rails 应该没有影响，因为对两者的访问都是通过`params`哈希完成的。

如果不包含参数真的很重要，您可以自己创建表单并添加隐藏字段：

```
<%= form_tag new_campus_path, method: :post %>
  <%= hidden_field_tag :university_id, @university.id %>
  <%= submit_tag 'New campus' %>
<% end %> 
```

我认为在rails中没有捷径

* * *

编辑2：顺便说一句，如果我猜对了，这个链接应该打开一个表格，用于创建一个新校区，并选择默认大学。如果是这种情况，你真的应该使用 GET，因为它只是一个不会导致任何副作用的读取操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:19:55.170

您可以使用 JQuery。像这样 ：

```
$("#my_link").click(function() {
  $.ajax({
    type: 'POST',
    url: '/campus/new?university_id=1'
  });
}); 
```

您可以在此处查看文档： http: [//api.jquery.com/click/](http://api.jquery.com/click/)和此处：[http](http://api.jquery.com/jQuery.post/) ://api.jquery.com/jQuery.post/ 。

# android - 空间不需要的布局和图像

> ID：11688041
> 
> 赞同：0
> 
> 时间：2012-07-27T12:45:22.783
> 
> 标签：android, image, android-layout, android-imageview

就像标题所说的那样，图像前后有一些“空间”，我不想要它。

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/fond"
    >

    <ImageView
        android:id="@+id/imageView1"
        android:contentDescription="@string/desc"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/top" 
        android:layout_gravity="top"        
    />

    <LinearLayout 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:background="@drawable/fond1"
        >

    </LinearLayout>    
</LinearLayout> 
```

所以就像你可以看到我有一个背景的第一个布局。ImageView 紧随其后，应该在顶部，但它没有。第二个布局是在图像之后。->

第一个布局

--不需要的空间--

图片

--不需要的空间--

第二种布局

如果有人知道如何删除这个“空间”，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:10:46.107

在`android:adjustViewBounds="true"`您的`ImageView`. 这样，您`ImageView`将被调整到提供的图像边界。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T12:54:32.217

以这种方式使用相对布局::

```
<RelativeLayout 
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical"
   android:background="@drawable/fond"
   >

<ImageView
    android:id="@+id/imageView1"
    android:contentDescription="@string/desc"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/top" 
    android:layout_gravity="top"  
    android:layout_alignParentTop="true"
/>

<LinearLayout 
    android:layout_below="@+id/imageView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="@drawable/fond1"
    >
</LinearLayout>    
</RelativeLayout> 
```

# php - SonataAdminBundle 嵌入式表单 sonata_admin_type 问题

> ID：11688048
> 
> 赞同：3
> 
> 时间：2012-07-27T12:45:48.457
> 
> 标签：php, symfony, symfony-sonata, sonata-admin

我有两个实体，即 Quiz 和 QuizQuestion，具有多对多单向关系。我想以测验形式嵌入问题形式。我在 2.0 分支上。我可以开始`sonata_type_model`工作，在下拉列表中获取 id 列表，并使用“添加”按钮。但是，尝试使用时出现错误`sonata_type_admin`：

```
Neither property "title" nor method "getTitle()" nor method "isTitle()" exists in class "Doctrine\ORM\PersistentCollection"
500 Internal Server Error - InvalidPropertyException 
```

这是我的测验实体：

```
 <?php 

namespace Some\SiteBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * Some\SiteBundle\Entity\Quiz
 * @ORM\Table(name="quiz")
 * @ORM\Entity(repositoryClass="Some\SiteBundle\Entity\QuizRepository")

 */
class Quiz
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\Column(type="datetime", name="created_at")
     * 
     * @var DateTime $createdAt
     */
    protected $createdAt;

    /**
     * @var string $title
     *
     * @ORM\Column(name="title", type="string", length=255)
     */
    private $title;

    /**
     * @var string $body
     *
     * @ORM\Column(name="body", type="text")
     */
    private $body;

  /**
    * @var QuizQuestion questions
     * @ORM\ManyToMany(targetEntity="QuizQuestion", cascade={"persist", "remove"} )
     **/
    protected $questions;

    public function __construct() {
        $this->questions = new ArrayCollection();
        $this->createdAt = new \DateTime();
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set title
     *
     * @param string $title
     */
    public function setTitle($title)
    {
        $this->title = $title;
    }

    /**
     * Get title
     *
     * @return string 
     */
    public function getTitle()
    {
        return $this->title;
    }

    /**
     * Get quiz body.
     * 
     * @return string body
     */
    public function getBody()
    {
        return $this->body;
    }

    /**
     * Sets body
     * 
     * @param string $value body
     */
    public function setBody($body)
    {
        $this->body = $body;
    }

    /**
     * Gets an object representing the date and time the quiz was created.
     * 
     * @return DateTime A DateTime object
     */
    public function getCreatedAt()
    {
        return $this->createdAt;
    }   

    /**
     * Add questions
     *
     * @param Some\SiteBundle\Entity\QuizQuestion $questions
     */
    public function addQuestion(\Some\SiteBundle\Entity\QuizQuestion $question)
    {
        $this->questions[] = $question;
    }

    /**
     * set question
     *
     * @param Some\SiteBundle\Entity\QuizQuestion $questions
     */
    public function setQuestion(\Some\SiteBundle\Entity\QuizQuestion $question)
    {
        foreach ($this->questions as $doc) {
            $this->questions->removeElement($doc);
        }
        $this->questions[] = $question;
    }

    /**
     * Get questions
     *
     * @return Doctrine\Common\Collections\Collection 
     */
    public function getQuestions()
    {
        return $this->questions;
    }

    /**
     * @ORM\PrePersist
     */
    public function beforePersist()
    {
        //$this->setCreatedAt(new \DateTime());        
        //$this->setModifiedAt(new \DateTime());
    }

      public function __toString()
  {
    return 'Quiz';
  }
} 
```

和 QuizQuestion 实体：

```
<?php 

namespace Some\SiteBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * Some\SiteBundle\Entity\QuizQuestion
 * @ORM\Table(name="quiz_question")
 * @ORM\Entity
 */
class QuizQuestion
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\Column(type="datetime", name="created_at")
     * 
     * @var DateTime $createdAt
     */
    protected $createdAt;

    /**
     * @var string $title
     *
     * @ORM\Column(name="title", type="string", length=255)
     */
    private $title;

    /**
     * @var string $body
     *
     * @ORM\Column(name="body", type="text")
     */
    private $body;

     /**
     * @var string $answer1
     *
     * @ORM\Column(name="answer1", type="text")
     */
    private $answer1;

     /**
     * @var string $answer2
     *
     * @ORM\Column(name="answer2", type="text")
     */
    private $answer2;

      /**
     * @var string $answer3
     *
     * @ORM\Column(name="answer3", type="text")
     */
    private $answer3;

     /**
     * @var string $answer4
     *
     * @ORM\Column(name="answer4", type="text")
     */
    private $answer4;

    /**
     * @var string $correctAnswer
     *
     * @ORM\Column(name="correct_answer", type="integer", length="1")
     */
    private $correctAnswer;

    public function __construct() {
        $this->createdAt = new \DateTime();
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set title
     *
     * @param string $title
     */
    public function setTitle($title)
    {
        $this->title = $title;
    }

    /**
     * Get title
     *
     * @return string 
     */
    public function getTitle()
    {
        return $this->title;
    }

    /**
     * Get question body.
     * 
     * @return string body
     */
    public function getBody()
    {
        return $this->body;
    }

    /**
     * Sets body
     * 
     * @param string $value body
     */
    public function setBody($body)
    {
        $this->body = $body;
    }

    /**
     * Get question answer1.
     * 
     * @return string answer1
     */
    public function getAnswer1()
    {
        return $this->answer1;
    }

    /**
     * Sets answer1
     * 
     * @param string $value answer1
     */
    public function setAnswer1($answer1)
    {
        $this->answer1 = $answer1;
    }

        /**
     * Get question answer2.
     * 
     * @return string answer2
     */
    public function getAnswer2()
    {
        return $this->answer2;
    }

    /**
     * Sets answer2
     * 
     * @param string $value answer2
     */
    public function setAnswer2($answer2)
    {
        $this->answer2 = $answer2;
    }

        /**
     * Get question answer3.
     * 
     * @return string answer3
     */
    public function getAnswer3()
    {
        return $this->answer3;
    }

    /**
     * Sets answer3
     * 
     * @param string $value answer3
     */
    public function setAnswer3($answer3)
    {
        $this->answer3 = $answer3;
    }

        /**
     * Get question answer4.
     * 
     * @return string answer4
     */
    public function getAnswer4()
    {
        return $this->answer4;
    }

    /**
     * Sets answer4
     * 
     * @param string $value answer4
     */
    public function setAnswer4($answer4)
    {
        $this->answer4 = $answer4;
    }

     /**
     * Get question correctAnswer.
     * 
     * @return string correctAnswer
     */
    public function getCorrectAnswer()
    {
        return $this->correctAnswer;
    }

    /**
     * Sets answer1
     * 
     * @param string $value correctAnswer
     */
    public function setCorrectAnswer($correctAnswer)
    {
        $this->correctAnswer = $correctAnswer;
    }

    /**
     * Gets an object representing the date and time the question was created.
     * 
     * @return DateTime A DateTime object
     */
    public function getCreatedAt()
    {
        return $this->createdAt;
    }   

  public function __toString()
  {
    return $this->title;
  }
} 
```

以及相关的管理课程。测验管理员第一：

```
 <?php 

namespace Some\SiteBundle;

use Some\SiteBundle\Form\QuizQuestionType;
use Sonata\AdminBundle\Admin\Admin;
use Sonata\AdminBundle\Datagrid\ListMapper;
use Sonata\AdminBundle\Datagrid\DatagridMapper;
use Sonata\AdminBundle\Validator\ErrorElement;
use Sonata\AdminBundle\Form\FormMapper;
use Sonata\AdminBundle\Show\ShowMapper;
use Symfony\Component\HttpFoundation\File\File;
use Symfony\Component\HttpFoundation\Request;

class QuizAdmin extends Admin
{

    protected function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
              ->add('title', NULL, array('label' => 'tytuł:'))
              ->add('body', NULL, array('label' => 'opis:', 'required' => false, 'attr' => array(
                  'class' => 'tinymce', 'data-theme' => 'simple')
              ))
              ->add('questions', 'sonata_type_admin', array(), array('required' => false, 'edit' => 'inline'));
              //->add('categories', NULL, array('label' => 'kategorie:'))
        ;
    }

    protected function configureDatagridFilters(DatagridMapper $datagridMapper)
    {
        $datagridMapper
            ->add('title')
            ->add('body')
        ;
    }

    protected function configureListFields(ListMapper $listMapper)
    {
        $listMapper
            ->addIdentifier('id')
            ->add('title')
            ->add('_action', 'actions', array(
                'actions' => array(
                    'view' => array(),
                    'edit' => array(),
                )
            ))
            //->add('body')
        ;

    }

    public function validate(ErrorElement $errorElement, $object)
    {
        $errorElement
            ->with('title')
                ->assertMinLength(array('limit' => 2))
            ->end()
        ;
    }

} 
```

和 QuizQuestionAdmin：

```
 <?php 

namespace Some\SiteBundle;

use Some\SiteBundle\Form\QuizQuestionType;
use Sonata\AdminBundle\Admin\Admin;
use Sonata\AdminBundle\Datagrid\ListMapper;
use Sonata\AdminBundle\Datagrid\DatagridMapper;
use Sonata\AdminBundle\Validator\ErrorElement;
use Sonata\AdminBundle\Form\FormMapper;
use Sonata\AdminBundle\Show\ShowMapper;
use Symfony\Component\HttpFoundation\File\File;
use Symfony\Component\HttpFoundation\Request;

class QuizAdmin extends Admin
{

    protected function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
              ->add('title', NULL, array('label' => 'tytuł:'))
              ->add('body', NULL, array('label' => 'opis:', 'required' => false, 'attr' => array(
                  'class' => 'tinymce', 'data-theme' => 'simple')
              ))
              ->add('questions', 'sonata_type_admin', array(), array('required' => false, 'edit' => 'inline'));
              //->add('categories', NULL, array('label' => 'kategorie:'))
        ;
    }

    protected function configureDatagridFilters(DatagridMapper $datagridMapper)
    {
        $datagridMapper
            ->add('title')
            ->add('body')
        ;
    }

    protected function configureListFields(ListMapper $listMapper)
    {
        $listMapper
            ->addIdentifier('id')
            ->add('title')
            ->add('_action', 'actions', array(
                'actions' => array(
                    'view' => array(),
                    'edit' => array(),
                )
            ))
            //->add('body')
        ;

    }

    public function validate(ErrorElement $errorElement, $object)
    {
        $errorElement
            ->with('title')
                ->assertMinLength(array('limit' => 2))
            ->end()
        ;
    }

} 
```

我尝试将 quizQuestion 注册为服务，但后来我得到了`Expected argument of type "Festus\SiteBundle\Entity\QuizQuestion", "Doctrine\ORM\PersistentCollection" given 500 Internal Server Error - UnexpectedTypeException`

经过几个小时的查找后找不到任何解决方案...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T17:21:51.970

好的，我解决了这个问题：

```
->add('questions', 'sonata_type_admin', array(), array('required' => false, 'edit' => 'inline')); 
```

有了这个：

```
->add('questions','collection', array( 'type' =>  new QuizQuestionType(),
                                          'allow_add' => true,
                                          'prototype' => true,
                                          'by_reference' => true,
                                          )); 
```

但对我来说，它看起来更像是一种解决方法而不是解决方案：-|

无论如何，我检查了 bundles 版本，symfony 分支并没有发现任何不连贯的东西，一切都在 2.0 分支上。

PS - QuizQuestionType 类，如果有人感兴趣的话……这里没什么特别的，只是普通的形式类：

```
<?php 

namespace Some\SiteBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class QuizQuestionType extends AbstractType
  {
      public function buildForm(FormBuilder $builder, array $options)
      {
    $builder
         ->add('title', NULL, array('label' => 'pytanie:'))
         ->add('body', NULL, array('label' => 'treść:', 'attr' => array(
          'class' => 'tinymce', 'data-theme' => 'simple')
         ))
         ->add('answer1', NULL, array('label' => 'odp. 1:'))
         ->add('answer2', NULL, array('label' => 'odp. 2:'))
         ->add('answer3', NULL, array('label' => 'odp. 3:'))
         ->add('answer4', NULL, array('label' => 'odp. 4:'))
         ->add('correctAnswer', NULL, array('label' => 'prawidłowa odp.:'))
    ;
    }

    public function getName()
    {
        return 'quiz_question';
    }

    public function getDefaultOptions(array $options){
        return array('data_class' => 'Some\SiteBundle\Entity\QuizQuestion');
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T13:37:01.783

看起来错误解释了为什么您会遇到不存在的方法的异常。

您正在尝试传递集合而不是对象。可能，您调用`addQuestion()`或`setQuestion()`方法到集合而不是来自它的对象。

这通常发生在关系填充的对象上。

在您使用该方法的地方，尝试调用`$object->first()->addQuestion()`而不是`$object->addQuestion()`

# javascript - RequireJS 2.0 - 定义我的 Backbone.Router

> ID：11688052
> 
> 赞同：1
> 
> 时间：2012-07-27T12:46:03.137
> 
> 标签：javascript, backbone.js, undefined, requirejs

我目前正在尝试 RequireJS 2.0，因此必须更改一些代码。这是我的`main.js`，`data-main`在我的`index.phtml`.

**编辑**：忘记项目结构，可能有用:)

```
->public

 -> css
 -> js
 app.js
 facade.js
 main.js
 router.js
 ...
  -> collections
  -> libs

   -> backbone
   -> jquery
   -> json2
   -> plugins
   -> require
   -> underscore

 -> templates
...

// Filename: main.js

// Require.js allows us to configure shortcut alias
// There usage will become more apparent futher along in the tutorial.

require.config({
    //Here baseUrl = /js (Loaded in data-main in logged.phtml)
    // 3rd party script alias names (Easier to type "jquery" than "libs/jquery-1.7.2.min")
    paths: {
        jQuery: 'libs/jquery/jquery',
        Underscore: 'libs/underscore/underscore',
        Backbone: 'libs/backbone/backbone',
        JSON: 'libs/json2/json2',
        templates: '../templates'
    },

    // Sets the configuration for your third party scripts that are not AMD compatible
    shim: {
        'libs/plugins/bootstrap-min': ['jQuery'],
        'libs/plugins/jquery.cookies.min': ['jQuery'],
        'jQuery': {
            exports: '$'
        },
        'JSON': {
            exports: 'JSON'
        },
        'Underscore': {
            exports: '_'
        },
        'Backbone': {
            deps: ['Underscore', 'jQuery'],
            exports: 'Backbone'  // attaches "Backbone" to the window object
        }
    }
});

define([
    // Load our app module and pass it to our definition function
    'app',
    'jQuery',
    'Underscore',
    'Backbone',
    'JSON'
], function(App) {
    // The "app" dependency is passed in as "App"
    // Again, the other dependencies passed in are not "AMD" therefore don't pass a parameter to this function
    App.initialize();
}); 
```

我试图将“路由器”及其依赖项添加到该文件中，但没有任何改变，所以我认为它没用。

这是调用 App 时加载的 app.js：

```
define([
    'jQuery',
    'Underscore',
    'Backbone',
    'JSON',
    'router', // Request router.js
    'i18n!nls/langs',
    'facade',
    //'order!libs/plugins/jquery.backstretch.min'
    //'libs/plugins/backbone.validation.min'
], function($, _, Backbone, JSON, Router, langs, facade) {
var initialize = ...
...
...
return {
        initialize: initialize
    };
}); 
```

这是问题所在，在我的`router.js`定义中，我使用了 a`console.log`并且它向我表明它正在返回正确的对象。

但是当我打电话给`router`我时`app.js`，`router`保持未定义。我可能犯了一个错误，但我找不到它。

**编辑：**添加了`router.js`代码

```
require([
    'jQuery',
    'Underscore',
    'Backbone',
    'JSON',
    'facade',
    'models/UserModel',
    'libs/plugins/jquery.cookies.min'
], function($, _, Backbone, JSON, facade, User, cookies){
    var AppRouter = Backbone.Router.extend({
...
    });

    var app_router = new AppRouter;
        // Start Backbone history a neccesary step for bookmarkable URL's
        Backbone.history.start();
    return app_router;
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:38:46.760

您的`router.js`文件未正确定义 AMD 模块。你需要使用`define`，而不是`require`。

# iphone - 脸书好友请求

> ID：11688053
> 
> 赞同：-3
> 
> 时间：2012-07-27T12:46:05.523
> 
> 标签：iphone, objective-c, ios5

> **可能重复：**
> [在 iphone 中使用 facebook graph api 发送好友请求](https://stackoverflow.com/questions/6548407/send-friend-request-with-facebook-graph-api-in-iphone)

我在通过我的 iphone 应用程序在 facebook 中发送好友请求时遇到问题。我力求为此找到任何 api。如果这里有人可以帮助我，我将非常感谢他们。

谢谢阿布舍克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T12:50:52.437

不可以。您不能使用 API 发送好友请求。但是您可以将用户定向到用户页面，在 webView 内查看好友请求按钮。

# facebook - Facebook SDK - 全天活动

> ID：11688055
> 
> 赞同：0
> 
> 时间：2012-07-27T12:46:10.580
> 
> 标签：facebook, events

是否可以确定 Facebook 活动是全天活动还是定时活动？

# foreign-keys - 使用外键从两个 h2 表中删除

> ID：11688067
> 
> 赞同：5
> 
> 时间：2012-07-27T12:46:45.460
> 
> 标签：foreign-keys, h2, sql-delete, cascading-deletes

我有一个 h2 数据库，其中包含两个带有外键的表，例如

```
CREATE TABLE master (masterId INT PRIMARY KEY, slaveId INT);
CREATE TABLE slave (slaveId INT PRIMARY KEY, something INT,
    CONSTRAINT fk FOREIGN KEY (slaveId) REFERENCES master(slaveId)); 
```

并且需要类似的东西

```
DELETE master, slave FROM master m JOIN slave s ON m.slaveId = s.slaveId
    WHERE something = 43; 
```

即，从两个表中删除（AFAIK 在 MySql 中工作）。由于 FOREIGN KEY，我无法先从 master 中删除。当我从从属服务器开始删除时，我丢失了从主服务器删除哪些行的信息。使用 ON DELETE CASCADE 会有所帮助，但我不希望它每次都自动发生。我应该暂时允许吗？我应该使用临时表还是最好的解决方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-27T13:52:51.597

没有人回答，但这实际上是微不足道的：

```
SET REFERENTIAL_INTEGRITY FALSE;
BEGIN TRANSACTION;
DELETE FROM master WHERE slaveId IN (SELECT slaveId FROM slave WHERE something = 43);
DELETE FROM slave WHERE something = 43;
COMMIT;
SET REFERENTIAL_INTEGRITY TRUE; 
```

# xml - XSL - 循环中的前一个节点值

> ID：11688073
> 
> 赞同：4
> 
> 时间：2012-07-27T12:46:59.970
> 
> 标签：xml, xslt

我有一个这样的 XML - （简化）

```
<OrderBundle>
    <BundleDetail>
        <BundleId>12312</BundleId>
        <BundleUnit>
            <Idset>
                <PartNo>807651</PartNo>
            </Idset>
        </BundleUnit>
    </BundleDetail>
    <BundleDetail>
        <BundleId>12112</BundleId>
        <BundleUnit>
            <Idset>
                <PartNo>807650</PartNo>
            </Idset>
        </BundleUnit>
    </BundleDetail>
    <BundleDetail>
        <BundleId>12412</BundleId>
        <BundleUnit>
            <Idset>
                <PartNo>807651</PartNo>
            </Idset>
        </BundleUnit>
    </BundleDetail>
    <BundleDetail>
        <BundleId>12612</BundleId>
        <BundleUnit>
            <Idset>
                <PartNo>807651</PartNo>
            </Idset>
        </BundleUnit>
    </BundleDetail>
</OrderBundle> 
```

我正在使用这个 XSL 来查找循环中类似节点的先前值。我在这里简化了 xsl，我需要在更大的集合中适应这个逻辑..

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format">

<xsl:template match="/">

  <html>
  <body>

    <table border="1">
        <tr>
            <th>Bundle Id</th>
            <th>PartNo</th>
            <th>PreviousValue</th>
        </tr>
      <xsl:for-each select="/OrderBundle/BundleDetail">
      <tr>
        <td> <xsl:value-of select="BundleId"/></td>
        <td><xsl:value-of select=" BundleUnit/Idset/PartNo" /> </td>
        <td> ?? <xsl:value-of select="ancestor::BundleUnit/Idset/PartNo"/>   </td>
      </tr>
      </xsl:for-each>
    </table>

  </body>
  </html>
</xsl:template> 
```

我尝试了祖先和前兄弟姐妹，对我不起作用..我期待以下结果

```
B.Id  PartNo PreviousValue 
12312 807651 ??             --
12112 807650 ??             -- 807651 
12412 807651 ??             -- 807650 etc
12612 807651 ?? 
```

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T12:57:06.823

**使用**：

```
preceding-sibling::BundleDetail[1]/BundleUnit/Idset/PartNo 
```

**完整的转换变为**：

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:fo="http://www.w3.org/1999/XSL/Format">

    <xsl:template match="/">

      <html>
      <body>

        <table border="1">
            <tr>
                <th>Bundle Id</th>
                <th>PartNo</th>
                <th>PreviousValue</th>
            </tr>
          <xsl:for-each select="/OrderBundle/BundleDetail">
          <tr>
            <td> <xsl:value-of select="BundleId"/></td>
            <td><xsl:value-of select=" BundleUnit/Idset/PartNo" /> </td>
            <td><xsl:value-of
            select="preceding-sibling::BundleDetail[1]/BundleUnit/Idset/PartNo"/>   </td>
          </tr>
          </xsl:for-each>
        </table>

      </body>
      </html>
    </xsl:template>
</xsl:stylesheet> 
```

**并产生了想要的正确结果**：

```
<html xmlns:fo="http://www.w3.org/1999/XSL/Format">
   <body>
      <table border="1">
         <tr>
            <th>Bundle Id</th>
            <th>PartNo</th>
            <th>PreviousValue</th>
         </tr>
         <tr>
            <td>12312</td>
            <td>807651</td>
            <td></td>
         </tr>
         <tr>
            <td>12112</td>
            <td>807650</td>
            <td>807651</td>
         </tr>
         <tr>
            <td>12412</td>
            <td>807651</td>
            <td>807650</td>
         </tr>
         <tr>
            <td>12612</td>
            <td>807651</td>
            <td>807651</td>
         </tr>
      </table>
   </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T12:56:26.213

我想`<xsl:value-of select="preceding-sibling::BundleDetail[1]/BundleUnit/Idset/PartNo"/>`这就是你要找的。

# ios - Provisioning Profile 和 NSUbiquitousKeyValueStore 问题

> ID：11688075
> 
> 赞同：0
> 
> 时间：2012-07-27T12:47:06.850
> 
> 标签：ios, ios-provisioning, provisioning-profile, code-signing-entitlements, nsubiquitouskeyvaluestore

我目前正在开发的应用程序最初是由其他人在另一台 Mac 上开发的，并且有几个与之链接的配置文件。大约一个月前，我制作了一个新的配置文件，以便在原始开发人员测试的同一台设备上进行测试，一切正常。从过去几天开始，我在设备上运行应用程序时收到此错误：

```
NSUbiquitousKeyValueStore error: com.companyname.appname has no valid com.apple.developer.ubiquity-kvstore-identifier entitlement 
```

我研究了这个错误并得出结论，我的权利在某种程度上是错误的。然后我发现它们被关闭了，这是我为了让新的配置文件在设备上工作而做的。我再次打开权利并得到这个熟悉的错误：

```
The executable was signed with invalid entitlements ... (0xE8008016). 
```

我尝试了互联网上各种来源的许多建议来解决这个问题，但似乎没有一个有效，这就是我最初关闭权利的原因（一个有效的建议）。

我创建的配置文件在设备的配置文件选项卡下列为有效。还有 4 个其他配置文件仅在库的配置文件选项卡中列出。

可以在没有权利文件的情况下将应用上传到商店吗？

是否可以进行应用程序的最终分发和二进制文件的上传以及 NSUbiquitousKeyValueStore 错误：不会出现？

谁能给我一个相当全面的分步指南，以完全删除旧配置文件和当前权利之间的链接，或者更改权利文件以使用当前配置文件的方法？

我知道这种错误很难诊断和解决，但感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:13:26.827

我发现我的问题的根源是我试图签署应用程序的配置文件具有通配符* appID，因此不匹配。一个非常愚蠢的错误，但其他人可能会遇到。

# php - 使用不匹配绑定变量的 mysqli 准备语句错误进行全文搜索

> ID：11688084
> 
> 赞同：0
> 
> 时间：2012-07-27T12:47:33.743
> 
> 标签：php, full-text-search, mysqli, prepared-statement

我用 PHP 编写了一个简单的搜索脚本。运行时出现空白屏幕并且 PHP 错误日志状态

> 绑定变量的数量与准备好的语句中的字段数量不匹配

我不明白为什么会这样说，因为我绑定了一个字段 - $searchTitle 和一个绑定参数（字符串）。我的标记很可能完全错误。

任何建议表示赞赏。谢谢。

```
<?php
if (isset($_POST['btn-search-article'])) {
    $searchTitle = $_POST['search-title'];
    include_once("mysqli_connect.php");
    $table = "articles";  
    $sql = "SELECT title, 
            MATCH(title,category,artbody) 
            AGAINST ('?') 
            AS score
            FROM $table
            ORDER BY score DESC";                
    $stmt = mysqli_stmt_init($dbh);
    if (!(mysqli_stmt_prepare($stmt, $sql))) {
        echo("Write to DB failed ");
    }
    else { //statement prepared ok
        mysqli_stmt_bind_param($stmt, 's', $searchTitle);
        mysqli_stmt_execute($stmt);
        mysqli_stmt_bind_result($stmt, $s1);
        while (mysqli_stmt_fetch($stmt)) {
            echo($s1 . "<br>");
        }
        mysqli_stmt_close($stmt);
    }
} else {
    echo("Error: Search could not be completed");
}
?> 
```

注意：PHP 错误日志指出错误在线

> mysqli_stmt_bind_result($stmt, $s1);

修复：似乎 sql 语句的顺序导致了错误。应该

```
$sql = "SELECT title
        FROM $table
        WHERE MATCH (title, category, artbody)
        AGAINST (?)"; 
```

# javascript - 使用 PrimeFaces ，仅在更改字段的击键时在 inputText 中启动 Ajax

> ID：11688086
> 
> 赞同：6
> 
> 时间：2012-07-27T12:47:45.733
> 
> 标签：javascript, ajax, primefaces

我正在使用**PrimeFaces**并有一个**p:inputText**字段，我需要根据**p:inputText**中的最新击键来更新视图上的一些组件。这是代码：

```
<p:inputText value="#{customerLController.surnameFilterConstraint}"
             id="surnamefilterfield">
    <p:ajax event="keyup" 
            update=":custForm:custDataTable"
            listener="#{customerLController.focusSurname}"
            oncomplete="primeFacesId('surnamefilterfield')"/>
</p:inputText> 
```

**问题是，即使在箭头键击的情况下，上面的代码也会启动 Ajax（考虑到代价高昂的更新**，我宁愿避免这种情况）。理想情况下，我想要一个不同版本的**p:ajax event="change"**，其条件是更改在击键时发音，而不是在用户*按 Enter*时发音（这就是现在发生的情况）。

如果**p:ajax**组件不允许过滤掉某些**keyup**事件，那么我认为唯一的（？）替代方法是在客户端调用 JavaScript，然后在 Javascript 中实现 Ajax 调用，但我会放弃使用 PrimeFaces **p:ajax**组件的便利，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-11-15T13:11:48.900

从 JSF 2.2 开始，我使用优雅的方式来解决这个问题。

解决方案基于`p:remoteCommand`（如注释之一中所指出的）和命名空间的组合`http://xmlns.jcp.org/jsf/passthrough`，它允许您在 JSF 组件中定义本机 HTML[事件属性。](https://www.w3schools.com/tags/ref_eventattributes.asp)

在这种情况下，它将是：

1.  首先将新命名空间添加到您的页面

    ```
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough" 
    ```

2.  修改`p:inputText`和添加`p:remoteCommand`

    ```
    <p:inputText id="surnamefilterfield" 
              value="#{customerLController.surnameFilterConstraint}" 
              pt:onkeyup="onKeyUpFilterKeyCode(event)"/>
    <p:remoteCommand delay="300" name="onFilteredKeyUp" 
                  actionListener="#{customerLController.focusSurname}" /> 
    ```

3.  添加 JavaScript 函数

    ```
     function onKeyUpFilterKeyCode(event){
            var keyCode=event.keyCode;
            console.log("Key code = " + keyCode);
            //if key is not ENTER and not cursor/arrow keys
            if ((keyCode != 13) && !((keyCode >= 37) && keyCode <= 40)){
                //call remoteCommand
                onFilteredKeyUp();
            }
        } 
    ```

（因为这个 JS 函数包含“特殊”XML 字符，请遵循[BalusC](https://developer.mozilla.org/en-US/docs/Archive/Web/Writing_JavaScript_for_HTML)关于如何将其添加到 JSF/XML 网页的建议）

这种方法的优点是您可以在仍然使用 JSF/Primefaces 组件和创建 WEB 页面的“JSF 方式”的同时，对组件（和 WEB 浏览器）支持的任何原生 HTML 事件进行 ajaxify。

# cassandra - Cassandra和pig集成导致启动时出错

> ID：11688092
> 
> 赞同：1
> 
> 时间：2012-07-27T12:47:55.370
> 
> 标签：cassandra, apache-pig

我在尝试启动示例猪和 cassandra 配置时遇到问题（来自示例/猪）

```
2012-07-27 14:34:49,020 [main] ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1070: Could not resolve CassandraStorage using imports: [, org.apache.pig.builtin., org.apache.pig.impl.builtin.] 
```

看起来有些类路径问题我仍然找不到原因。任何人都知道什么罐子可能会导致这个问题？我已将变量设置为：

```
export PIG_HOME=/home/sebastian/cassandra/source/pig-0.10.0
export PIG_INITIAL_ADDRESS=localhost
export PIG_RPC_PORT=9160
export PIG_PARTITIONER=org.apache.cassandra.dht.RandomPartitioner 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:07:21.397

CassandraStorage 位于 org.apache.cassandra.hadoop.pig 中，需要 Cassandra jar 才能运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T21:24:39.240

检查您的类路径中是否有以下内容 PIG_JAR=//pig-0.11.0.jar HADOOP_CLASSPATH=//hadoop-1.0.4/hadoop-core-1.0.4.jar HADOOP_CONF=//hadoop-1.0.4/会议

将以上所有内容添加到在 pig_cassandra 中进行这些更改让我知道您是否有同样的问题。我将分享代码。

# c# - 如何从 html 中删除 div 内容并使用 html 敏捷包将其放置在所有 div 之上

> ID：11688093
> 
> 赞同：0
> 
> 时间：2012-07-27T12:47:57.227
> 
> 标签：c#, asp.net, html-agility-pack

我的 html 敏捷包有问题 我无法从 html 中删除 div 内容并将相同的内容放在所有 div 的顶部。喜欢

```
<body>
   <div class="1">...</div>
   <div class="2">...</div>
   <div class="3">...</div>
</body> 
```

现在我想删除/排序第三个 div 并将其放在第一个 div 的顶部。任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:01:34.210

你应该试试这段代码：

```
HtmlDocument doc = new HtmlDocument();
doc.LoadHtml("<html><body><div class=\"1\">...</div><div class=\"2\">...</div><div class=\"3\">...</div></body></html>");
HtmlNode body = doc.DocumentNode.SelectSingleNode("/html/body");
HtmlNode div = body.SelectSingleNode("div[@class='3']");
if (div != null) {
    div.Remove();
    body.InsertBefore(div, body.FirstChild);
} 
```

# php - php给空变量新内容

> ID：11688095
> 
> 赞同：1
> 
> 时间：2012-07-27T12:48:07.227
> 
> 标签：php, post

你好，我有一个简短的问题。我想重置一个将要发布的变量：

我将发布一个来自输入字段的变量。当这个变量`$_POST['a'];`为空时，我想用新的内容填充它。

方案是这样的：

将发布空变量-> php 识别出它是空的-> 为其提供新内容-> 回显新内容。

这很简单，但对我不起作用。

所以这就是我所拥有的：

```
$a = $_POST['a'];

if( empty($a){
    $errors['a'][]="text";
    $a =="new content";
} 
```

因此，如果有人可以告诉我这有什么问题，我真的很感激。非常感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T12:51:22.840

三件事：

```
$a = isset($_POST['a']) ? $_POST['a'] : ''; // always check if array index exists

if( empty($a)) { // one more bracket
    $errors['a'][]="text";
    $a ="new content"; // only one '='
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T12:51:08.893

您的代码中有一个语法错误和一个逻辑错误。

`if (empty($a) {`缺少一个结局`)`

你`==`用来做作业，但它是用来比较的。您只想`=`在这种情况下使用。

修改后的代码：

```
$a = $_POST['a'];
if(empty($a)) {
    $errors['a'][] = "text";
    $a = "new content";
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-27T12:51:57.600

如果您想在将来访问它，您需要在数组中重新分配它。

```
$_POST['a'] = $a; 
```

# c# - 无法在 GAL 中解决

> ID：11688096
> 
> 赞同：1
> 
> 时间：2012-07-27T12:48:10.520
> 
> 标签：c#, outlook, outlook-redemption

我正在使用 Redemption 来处理 Outlook 2003。我想访问 sharedMailBox 上的文件夹并且代码失败：

```
 RDOSession session = new RDOSession();
        session.LogonExchangeMailbox(Constants.UserName,Constants.ExchangeServerName);
        RDOStore store = session.Stores.GetSharedMailbox(Constants.MailBoxName);
        RDOFolder folder = store.GetDefaultFolder(rdoDefaultFolders.olFolderInbox); 
```

当我试图获取 RDOStore 对象时，我得到“无法在 GAL 中解析：邮箱 - MTS SH 支持”。

我之前使用过这段代码：

```
 RDOSession session = new RDOSession();
        session.Logon();
        RDOFolder InboxFolder = rSession.GetFolderFromPath(System.IO.Path.Combine(Constants.MailBoxName, Constants.InboxFolder)); 
```

它正在工作，但经过几个小时的工作后，它在尝试创建 RDOFolder 时失败，并出现错误“IMAPISession::OpenMsgStore:MAPI_E_FAILONEPROVIDER 中的错​​误”。

那么访问 sharedMailbox 文件夹的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:40:22.787

哦。。问题解决了。一切都在 .GetSharedMailBox 参数中。我以为是 SharedMailBox 名称（邮箱 - 示例邮箱）。实际上它是邮箱的地址。也许它对某人有用！

# c# - 使用 MVC SimpleMembership 分配角色

> ID：11688098
> 
> 赞同：12
> 
> 时间：2012-07-27T12:48:23.233
> 
> 标签：c#, asp.net-mvc-3, asp.net-membership, membership-provider

我正在通过 Nuget 在 MVC3 中尝试“SimpleMembership”，并下载了要使用的示例。问题是我无法弄清楚如何将角色分配给特定用户。

在标准 MVC 成员资格中，您可以使用如下内容：

```
Roles.AddUserToRole(model.UserName, "StandardUser"); 
```

然而，SimpleMembership 似乎只有一种暴露角色的方法（除非我很愚蠢！），即

```
public void RequireRoles(params string[] roles)
        {
            WebSecurity.RequireRoles(roles);
        } 
```

必须有一种简单的方法，因为下表是作为此 nuget 包的一部分创建的：

```
-TABLE: webpages_Roles
     RoleId , RoleName 
```

这有点令人困惑，尽管`App_Start/SimpleMembershipMvc3.cs`有以下内容：

```
Roles.Enabled = true;
RoleProvider provider3 = Roles.Providers["AspNetSqlRoleProvider"];
        if (provider3 != null)
        {
            RoleProvider provider6 = provider3;
            SimpleRoleProvider provider4 = CreateDefaultSimpleRoleProvider("AspNetSqlRoleProvider", provider6);
            Roles.Providers.Remove("AspNetSqlRoleProvider");
            Roles.Providers.Add(provider4);
        } 
```

SimpleRoleProvider 函数

```
 private static SimpleRoleProvider CreateDefaultSimpleRoleProvider(string name, RoleProvider currentDefault)
            {
                RoleProvider previousProvider = currentDefault;
                SimpleRoleProvider provider = new SimpleRoleProvider(previousProvider);
                NameValueCollection config = new NameValueCollection();
                provider.Initialize(name, config);
                return provider;
            } 
```

这个包是否使用内置的角色提供程序？如果是这样，它如何与 SimpleMembership 创建的表挂钩

*   [简单的会员 GIT](https://github.com/anderly/SimpleMembership.Mvc3)
*   [Nuget 包](http://nuget.org/packages/simplemembership.mvc3)
*   [用于示例的 Nuget 包](http://nuget.org/packages/SimpleMembership.Mvc3.Sample)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-19T23:26:18.640

您需要使用[角色 API](http://msdn.microsoft.com/en-us/library/system.web.security.roles.adduserstorole.aspx)与角色进行交互。像下面这样的东西应该可以工作：

```
if (!Roles.RoleExists("Administrator"))
    Roles.CreateRole("Administrator");

if (!Roles.GetRolesForUser(model.UserName).Contains("Administrator"))
    Roles.AddUsersToRole(new[] { model.UserName }, "Administrator"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T17:46:54.950

```
WebSecurity.InitializeDatabaseFile("SecurityDemo.sdf", "Users", "UserID", "Username", true); 
```

看看这个网站。它可能会有所帮助。 [http://blog.osbornm.com/archive/2010/07/21/using-simplemembership-with-asp.net-webpages.aspx](http://blog.osbornm.com/archive/2010/07/21/using-simplemembership-with-asp.net-webpages.aspx)

# android - ANDROID：活动在睡眠模式下被破坏

> ID：11688099
> 
> 赞同：0
> 
> 时间：2012-07-27T12:48:24.230
> 
> 标签：android, android-activity, broadcastreceiver

我在从广播接收器调用的活动中遇到问题。

我的应用程序包含警报系统，所以当警报时间匹配时，广播接收器会调用一个活动来获得前面。此活动不是全屏的，它是一种使用 RegionSearchDialog 作为主题的警报框。（不要混淆，我只使用活动，我的类扩展活动，但 xml 中的主题设置为 RegionSearchDialog）

我的开发平台是：4.0.4

现在我的问题是：如果我的设备处于开启状态（解锁 keygurad），无论应用程序在前面还是在后面，它都可以正常工作。但是如果电源关闭（睡眠模式/设备被锁定），它将调用相同的活动，onCreate() 先调用然后 onResume()，然后它会调用 onPause()，因为我的设备处于睡眠模式。

我想保持该活动运行，不想让它睡觉。

因此，当闹钟时间匹配时，它会发出嗡嗡声警报，如果它处于睡眠模式，那么用户可以解锁设备并查看该警报的弹出窗口。

在此先感谢您对此的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:03:52.357

这就是 Android 中的活动应该工作的方式。您最好使用服务或使用[警报管理器](http://developer.android.com/reference/android/app/AlarmManager.html "报警管理器")在特定时间启动活动，因为这些更适合您尝试做的事情 =)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:11:30.413

这是我的代码，我认为它可以帮助您： 在您的 create() 活动中：

```
 super.onCreate(savedInstanceState);
  final Window win = getWindow();
  win.addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED
  | WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD);
  win.addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON
  | WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);
  setContentView(R.layout.main); 
```

主要的xml是：

```
<activity
android:name=".main"
android:label="@string/app_name"
android:screenOrientation="portrait"
android:theme="@android:style/Theme.Wallpaper.NoTitleBar"

android:launchMode="singleInstance" 
android:excludeFromRecents="true"
android:taskAffinity=""
android:configChanges="orientation|keyboardHidden|keyboard|navigation" /> 
```

请在您的项目中测试这些代码。:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-12T13:00:08.413

除了“享受写作”的回应：

1.  在我的 android 应用程序中设置标志就足够了，如 onCreate 代码中所述。
2.  效果是应用程序在进入睡眠模式时会暂停（例如通过按下手机上的开/关按钮），并在从睡眠模式返回时恢复。
3.  通过删除 FLAG_KEEP_SCREEN_ON 标志，如果有一段时间不使用视图，您仍然可以让手机进入睡眠状态。

# c# - 在作业队列表本身中包含作业详细信息还是在单独的表中包含详细信息？

> ID：11688105
> 
> 赞同：1
> 
> 时间：2012-07-27T12:48:39.347
> 
> 标签：c#, sql-server, sql-job, job-queue

我目前正在设计一个模块，服务或控制台应用程序将从 JobQueue 表中读取 Job。我设计了 JobQueue 表，其中包含以下信息：

JobId: int 主键

作业类型：int notnull

状态：varchar notnull

CreatedOn: datetime notnull

LastModifiedOn：日期时间可为空

CompletedOn：日期时间可为空

引入 JobType 属性主要是为了使该表更通用，而不是针对特定类型的工作。我的问题是是否将要执行的作业的详细信息保留在此表本身或其他具有作业 ID 引用它的表中？这是因为我在其他表中有可用的数据。因此，在执行作业时，我们可以间接获取数据。为了避免重复信息，我想到了这样的事情。这是一个好方法吗？需要你的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T12:51:30.983

我在这里看不到很多属性（也许您没有显示这些属性？）

我看到了一个明确需要的 id (jobID)、类型和状态信息（如果没有这些数据，您将无法理解。）

然后你就有了审计信息，创建、修改和完成。我自己喜欢在里面放一个字符串来说明谁创建了谁修改了，但是我在我创建的每个表中都有审计信息。当您不确定发生了什么并试图维护数据库时，它总是有用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:34:26.953

将您在该表中的“其他表”中的任何数据保留。您在这里需要考虑的是您将如何使用这些数据。
如果您要显示一些索引作业，您可以从中选择一个来查看详细信息，您可以在两个单独的提取中获取数据。或者，如果您需要与作业相关的所有数据（JobQueue 表中的数据加上“其他表”中的数据），您始终可以使用 JOIN 执行一次提取。我不认为将 JobDetails 数据保存在单独的表中会导致任何问题。

# jquery - 通过ajax加载页面的对话框ui中的Jquery sortable-ui

> ID：11688107
> 
> 赞同：1
> 
> 时间：2012-07-27T12:48:53.123
> 
> 标签：jquery, ajax, jquery-ui, cakephp, jquery-ui-dialog

我有一个用 CakePHp v1.3 编写的用户管理系统，我想对用户进行排序。所以我正在使用 jquery dialog-ui （让我们说类似于 facebook 朋友列表）并通过添加最新用户的 ajax 页面加载它。

在这个列表中，我希望能够使用 jquery sortable-ui 但由于某种原因我不能。我猜javascript没有加载？如果发生这种情况，我无法在萤火虫中看到，所以如果有人知道可以做什么，请帮助我。

这是代码：这会触发对话框：

```
<div onClick="manageCoauthors(data={'id':'<?php echo $this->params['pass'][0]; ?>'});" class="floatRight allImg leftManageFDs" style="cursor: pointer"></div> 
```

然后这是打开对话框的javascript：

```
$('#dialog-manage-coauthors').load(fdBaseUrl + 'publications/ajaxManageCoauthors/' + paperID).dialog({
        resizable: false,
        modal: true,
        width:500,
        height:400,
        buttons:{
            "OK": function(){
                $(this).dialog('close');
            }
        }
    }); 
```

以及使用 ajax 加载的页面内容将填充 dialog-ui 容器

```
<style>
#sortable { list-style-type: none; margin: 0; padding: 0; cursor: move }
#sortable li { margin: 3px 3px 3px 0; padding: 1px; float: left; width: 50px; height: 50px; font-size: 4em; text-align: center; }
</style>

<script type="text/javascript">
$(document).ready(function(){
    //initialize sortable
    $("#sortable").sortable({
        /*update: function(){
            var order = $('#sortable').sortable('serialize');
            $.ajax({
                url: fdBaseUrl + 'cv/orderParahraphs',
                data: order,
                dataType: 'json'
            })
        }*/
    });
    $( "#sortable" ).disableSelection();
});

</script>
<?php
    if(isset($publicationColaborators) && !empty($publicationColaborators)){
        ?>
        <ul id="sortable" class="ui-sortable">
        <?php
        foreach($publicationColaborators as $colaboratorDetail){

            //debug($colaboratorDetail);
            $profile_image = 'users/profile/' . 
                                md5((isset($colaboratorDetail['User']) ? $colaboratorDetail['User']['id'] : $colaboratorDetail['id'])) . DS . 
                                (isset($colaboratorDetail['User']) ? $colaboratorDetail['User']['profile_photo'] : $colaboratorDetail['profile_photo']);
            $options = array('gender'=>(isset($colaboratorDetail['User']) ? $colaboratorDetail['User']['gender'] : $colaboratorDetail['gender']), 
                                'size' => '40',
                                'link'=>(isset($colaboratorDetail['User']) ? $colaboratorDetail['User']['slug'] : $colaboratorDetail['slug']),
                                'title'=>$this->Fellow->fullUserVisitCard((isset($colaboratorDetail['User']) ? $colaboratorDetail['User'] : $colaboratorDetail)));
            ?>
            <li class="ui-state-default">
                <div class="floatLeft" style="padding:10px;">

                        <div onClick="removeColaborator(data={'id':'<?php echo (isset($colaboratorDetail['User']) ? $colaboratorDetail['User']['id'] : $colaboratorDetail['id']); ?>', 'paperID':'<?php echo $paperID; ?>'})" style="position: absolute; margin-left:27px" class="allImg wall_post_actions_delete_active"></div>
                        <?php
                        echo $this->Fellow->checkImage($profile_image, $options); 
                        ?>

                </div>
            </li>
            <?php
        }
        ?>
        </ul>
        <?php
    }
    else{
        echo __d('publications', 'You have no co-authors yet', true); 
    }
?>
<div class="clearDiv"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:40:27.133

我认为这里的问题是`document.ready`调用不会在 AJAX 的内容上重新触发，所以你的 sortable 永远不会被调用。

您需要做的是在[load](http://api.jquery.com/load/)`load()`函数的 next 参数中添加 sortable，这是一个在自身完成时触发的回调。

```
$('#dialog-manage-coauthors').load(fdBaseUrl + 'publications/ajaxManageCoauthors/' + paperID, function() {
    //initialize sortable
    $("#sortable").sortable({
        /*update: function(){
            var order = $('#sortable').sortable('serialize');
            $.ajax({
                url: fdBaseUrl + 'cv/orderParahraphs',
                data: order,
                dataType: 'json'
            })
        }*/
    });
    $( "#sortable" ).disableSelection();
}).dialog({
        resizable: false,
        modal: true,
        width:500,
        height:400,
        buttons:{
            "OK": function(){
                $(this).dialog('close');
            }
        }
    }); 
```

这显然会进入父页面。

# python - 当 django 作为 fcgi 运行时，启动无限线程的正确方法是什么？

> ID：11688109
> 
> 赞同：0
> 
> 时间：2012-07-27T12:49:04.117
> 
> 标签：python, django, fastcgi, pyinotify

我想使用 pyinotify 来观察文件系统的变化。如果文件已更改，我想相应地更新我的数据库文件（重新读取标签，其他信息......）

我将以下代码放入我的应用程序的signals.py

```
import pyinotify
....

# create filesystem watcher in seperate thread
wm       = pyinotify.WatchManager()
notifier = pyinotify.ThreadedNotifier(wm, ProcessInotifyEvent())
# notifier.setDaemon(True)
notifier.start()
mask     = pyinotify.IN_CLOSE_WRITE | pyinotify.IN_CREATE | pyinotify.IN_MOVED_TO | pyinotify.IN_MOVED_FROM
dbgprint("Adding path to WatchManager:", settings.MUSIC_PATH)
wdd      = wm.add_watch(settings.MUSIC_PATH, mask, rec=True, auto_add=True)

def connect_all():
    """
    to be called from models.py
    """
    rescan_start.connect(rescan_start_callback)
    upload_done.connect(upload_done_callback)
.... 
```

当 django 使用 ''./manage.py runserver'' 运行时，这非常有用。但是，当作为 ''./manage.py runfcgi'' 运行时，django 不会启动。没有错误消息，它只是挂起并且不会守护进程，可能在“notifier.start()”行。

当我运行“。

当 django 作为 fcgi 运行时，与 django 一起启动无限线程的正确方法是什么？甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:23:14.740

嗯，呃。除了 django 之外，永远不要开始一个自己的、无穷无尽的线程。我使用 celery，运行这样的线程会更好一些。

# git - 将分叉的 repo 添加到父 repo 文件夹，并且可以从两者拉入同一个文件夹

> ID：11688110
> 
> 赞同：0
> 
> 时间：2012-07-27T12:49:06.260
> 
> 标签：git, github, fork, external

我在将分叉从 github 拉到父仓库所在的文件夹中时遇到问题。

我已经有一个可以工作的本地文件夹，我可以将父 repo 更改拉入其中。
这是我的步骤：

1.  为分叉的仓库创建本地文件夹
2.  在 github 上 fork 一个 repo
3.  将分叉的仓库拉入本地文件夹
4.  进行更改，提交并推送它们
5.  Github 已注册提交

到目前为止没有问题。我有 2 个同级文件夹，（ORG）一个带有原始仓库，（FORK）一个带有我可以处理的 fork。
现在我需要将我的叉子拉到第二台机器上（用于测试）。以下是辅助机器上的步骤：

1.  `cd folderWith ORG repo`
2.  `git remote add UniqueName git://github.com/myUserName/forkedRepoName.git`
3.  `git branch -a`不显示唯一名称。我认为这就是问题所在
4.  `git remote -v`显示 UniqueName 的 fetch 和 push 条目。我只需要获取/拉取
5.  `git branch fork`. 创建一个新分支，以便我可以在 ORG 和 FORK 存储库之间切换
6.  `git checkout fork`
7.  `git pull UniqueName/master`. “致命错误：'UniqueName/master' 似乎不是 git 存储库”

我究竟做错了什么 ？
我不希望在辅助机器上也有兄弟文件夹，只有另一个分支。

**更新：将***首先*
`git branch -a`显示您执行.`UniqueName` *`git fetch/pull`*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:17:22.117

对于您的最后一个命令，请尝试`git pull UniqueName master`.*

# r - 使用 R 检索到 Dropbox 文件的公共链接

> ID：11688111
> 
> 赞同：8
> 
> 时间：2012-07-27T12:49:09.113
> 
> 标签：r, dropbox

我有几个 R 函数可以将文件保存到下拉框（主要是绘图）。这使我能够将它们作为网址在网络上共享。这些功能将保存绘图并自动打开它们以及它们所在的保管箱目录。我只关心懒惰/效率（取决于你的观点），不幸的是，当我完成时，我仍然必须右键单击文件创建然后 Dropbox/复制公共链接。如果可能的话，我想让 R 检索这个公共链接（一旦我有了它，我会更加懒惰并让它直接写入剪贴板）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-27T13:09:38.210

您可以使用[Dropbox 的 CLI 界面](http://www.dropboxwiki.com/Using_Dropbox_CLI)和 R 的**系统**（我在 linux 中）功能。

我的公共文件夹中有一个 png (interpolation.png) 文件，如果我想要公共链接，我可以这样做：

```
getwd()
[1] "/home/ahmadou/Dropbox/Public"

system('dropbox puburl interpolation.png ', intern = TRUE)
[1] "https://dl.dropbox.com/u/8750577/interpolation.png" 
```

希望这有帮助

# jqplot - jqplot中的标准差图

> ID：11688112
> 
> 赞同：0
> 
> 时间：2012-07-27T12:49:24.743
> 
> 标签：jqplot

有没有办法使用 jqplot 图绘制关于均值的 +-标准差的图？我知道 jqplot 中有烛台图，但它们不会将每个烛台相互链接。我正在寻找的就像一个线图，每个点都标有 +- 标准偏差。以这张图为例

[http://www.csupomona.edu/~jcclark/classes/old/bio542l/graphics/g-line.gif](http://www.csupomona.edu/~jcclark/classes/old/bio542l/graphics/g-line.gif)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:51:27.200

我不相信 jqplot 对此有内置支持。你的选择是三个：

1.）使用内置的：[带状线/置信区间](http://www.jqplot.com/deploy/dist/examples/bandedLine.html)。

2.) 自己破解。绘制绘图后，为每个高/低标准差添加额外的垂直系列。这是我会使用的选项。

3.) 按照[此处](https://bitbucket.org/cleonello/jqplot/issue/35/add-error-bar-capability)的帖子之一修改烛台插件（ohlc 插件）以提供该功能。

# c++ - 管理模板派生类型的向量集合

> ID：11688113
> 
> 赞同：1
> 
> 时间：2012-07-27T12:49:26.913
> 
> 标签：c++, generics, boost, metaprogramming

**X：我想做的事：**

我有类型：`BaseType`和`DerivedType<int k>`（见下面的代码），我需要处理`K`派生类型的向量集合`std::vector<DerivedType<k>>`，`k = 1...K`. 我想访问这些向量中的对象，并对它们执行依赖于`k`. `K`是编译时间常数。问题在实现中说明：

类型定义为：

```
#include <iostream>
#include <algorithm>

struct BaseType { // Interface of the DerivedTypes
  virtual void print(){std::cout << "BaseType!" << std::endl; }
};

template< int k >
struct DerivedType : public BaseType {
  static const int k_ = k;
  // ... function calls templated on k ...
  void print(){std::cout << "DerivedType: " << k_ << std::endl;}
};

template< int k >
void doSomething ( DerivedType<k>& object ) { object.print(); } 
```

我想做的是：

```
int main() {

  // My collection of vectors of the derived types:
  std::vector<DerivedType<0>> derType0(2);
  std::vector<DerivedType<1>> derType1(1);
  std::vector<DerivedType<2>> derType2(3);
  // ... should go to K: std::vector<DerivedType<K>> derTypeK;

  // Iterate over the derived objects applying a k-dependent templated function:
  std::for_each(begin(derType0),end(derType0),[](DerivedType<0>& object){
    doSomething<0>(object);
  });
  std::for_each(begin(derType1),end(derType1),[](DerivedType<1>& object){
    doSomething<1>(object);
  });
  std::for_each(begin(derType2),end(derType2),[](DerivedType<2>& object){
    doSomething<2>(object);
  });

  return 0;
} 
```

我想避免重复代码，这样我只需要更改`K`，这是 的编译时间常数`O(10)`。理想情况下，我会有“更像”这样的东西：

```
// Pseudocode: do not try to compile this

create_derived_objects(DerivedType,K)
  = std::vector< std::vector<DerivedType<k>>* > my_K_derived_types;                                                  

for each vector<DerivedType<k>>* derivedTypes in my my_K_derived_types
  for each object in (*derivedTypes)
    doSomething<k> on object of type derivedType<k>
    // I could also restrict doSomething<k> to the base interface 
```

`O(10^6)`派生类型的每个向量都包含`O(10^9)`对象。最内层的循环是我的应用程序中最耗时的部分，因此使 dynamic_cast 只是最外层循环的一个选项。

**Y：我尝试过的都没有成功。**

我目前正在研究 Abrahams C++ Template Metaprogramming 这本书，看看我是否可以使用`boost::mpl`. 我也在做教程`boost::fusion`，看看我是否也可以使用它。然而，这些库的学习曲线相当大，所以我想在我投入一周的时间之前先问一下，什么时候有更好、更简单的解决方案可用。

我的第一次尝试是包装我的向量`std::vector<DerivedType<k>>`，以便我可以创建一个, 并在一个循环中`vector<WrappedDerivedTypes*>`分别访问每个单个向量。`for_each`但是，在循环中，我有一系列`if(dynamic_cast<std::vector<DerivedType<0>>>(WrappedVector) != 0 ){ do for_each loop for the derived objects } else if( dynamic_cast...) { do...} ...`我无法消除的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:44:09.113

那么基于向量的通用链表、策略模式和通过链表递归应用策略的递归解决方案呢？（**注**：见最后的改进版）：

```
#include <iostream>
#include <vector>

template <int j>
class holder {
public:
    const static int k = j;
};

template <int j>
class strategy {
public:
    void operator()(holder<j> t)
    {
        std::cout << "Strategy " << t.k << std::endl;
    }
};

template <int k>
class lin_vector {
private:
    std::vector<holder<k>> vec;
    lin_vector<k-1> pred;
public:
    lin_vector(const lin_vector<k-1> &pred, std::vector<holder<k>> vec)
        : vec(vec), pred(pred) { }
    std::vector<holder<k>> get_vec() { return vec; }
    lin_vector<k-1> &get_pred() { return pred; }
};

template <>
class lin_vector<0> {
public:
    lin_vector() { }
};

template <int k, template <int> class strategy>
class apply_strategy {
public:
    void operator()(lin_vector<k> lin);
};

template <int k, template <int> class strategy>
void apply_strategy<k, strategy>::operator()(lin_vector<k> lin)
{
    apply_strategy<k-1, strategy>()(lin.get_pred());
    for (auto i : lin.get_vec())
    strategy<k>()(i);
}

template <template <int> class strategy>
class apply_strategy<0, strategy>
{
public:
    void operator()(lin_vector<0> lin) { /* does nothing */ } 
};

template <int k>
lin_vector<k> build_lin()
{
    return lin_vector<k>(build_lin<k-1>(), {holder<k>()});
}

template <>
lin_vector<0> build_lin()
{
    return lin_vector<0>();
}

int main(void)
{
    apply_strategy<5, strategy>()(build_lin<5>());
} 
```

使用 C++11 编译器对其进行编译。很可能您会发现构建 a`lin_vector`需要大量复制这一事实并不令人满意，但是您可以根据您的需要专门化结构（也许`pred`用指针替换 a 或将创建策略直接嵌入到链表中）。

**编辑**：这里有一个改进的版本，它避免了大量的复制并以更连贯和统一的方式处理列表构建和处理：

```
#include <iostream>
#include <vector>

template <int j>
class holder {
public:
    const static int k = j;
};

template <int k>
class lin_vector {
private:
    std::vector<holder<k>> vec;
    lin_vector<k-1> pred;
public:
    std::vector<holder<k>> &get_vec() { return vec; }
    lin_vector<k-1> &get_pred() { return pred; }
};

template <>
class lin_vector<0> {
public:
    lin_vector() { }
};

template <int k, template <int> class strategy>
class apply_strategy {
public:
    void operator()(lin_vector<k> &lin);
};

template <int k, template <int> class strategy>
void apply_strategy<k, strategy>::operator()(lin_vector<k> &lin)
{
    apply_strategy<k-1, strategy>()(lin.get_pred());
    strategy<k>()(lin.get_vec());
}

template <template <int> class strategy>
class apply_strategy<0, strategy>
{
public:
    void operator()(lin_vector<0> &lin) { /* does nothing */ } 
};

template <int j>
class strategy {
public:
    void operator()(std::vector<holder<j>> &t)
    {
        std::cout << "Strategy " << j << ", elements: ";
        for (auto v : t)
            std::cout << v.k << " ";
        std::cout << std::endl;
    }
};

template <int j>
class build_strategy {
public:
    void operator()(std::vector<holder<j>> &t)
    {
        for (unsigned int i = 0; i < j; i++)
            t.push_back(holder<j>());
    }
};

int main(void)
{
    const int K = 5;
    lin_vector<K> list;
    apply_strategy<K, build_strategy>()(list);
    apply_strategy<K, strategy>()(list);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:43:45.750

一个没有虚拟调度的解决方案是可能的，尽管它可能是矫枉过正的。

您需要的第一件事是`doSomething<K>()`专门针对每种派生类型的函数模板：

```
template <int K>
void doSomething(vector<DerivedType<K> >& x);

template <>
void doSomething<1>(vector<DerivedType<1> >& x) { ... }

template <>
void doSomething<2>(vector<DerivedType<2> >& x) { ... }   // etc. 
```

`struct`然后，您可以使用递归定义的模板构建强类型的向量集合：

```
template <int K>
struct vov {
    vov<K - 1> prev;
    vector<DerivedType<K> > v;
};

template <>
struct vov<1> {
    vector<DerivedType<1> > v;
}; 
```

最后，你可以编写一个递归函数模板来处理这个结构：

```
template <int K>
void process(vov<K>& x) {
    doSomething(x.v);     // Type inference will find the right doSomething()
    process(x.prev);      // Here too
}

template <>
void process<1>(vov<1>& x) {
    doSomething(x.v);
} 
```

现在主要代码将如下所示：

```
vov<42> foo;
process(foo); 
```

因为`process()`函数调用通过使用递归来执行迭代，它可能会不必要地使用K个堆栈帧；但是它是尾递归，现代优化 C++ 编译器通常可以将其转换为纯迭代，而不会浪费堆栈。使用尾递归迫使我们以“反向”顺序处理向量，以便`DerivedType<1>`最后处理向量，但如有必要，这可以通过使用 2 个`int`模板参数的稍微更精细的模板来修复（一个将“向上计数”到另一个，而不是`int`向 1“倒计时”的单个参数）。

**`DerivedType<k>`请注意，从该解决方案中派生出每个都不会带来任何好处`BaseType`——您最好完全忘记`BaseType`，除非您出于不同的原因需要它。**

很可能有 MPL 原语可以简化其中的一些过程——如果有人知道它们，请随时编辑。

# php - 在 php 中按日期条件过滤特定行的 mysql 查询？

> ID：11688115
> 
> 赞同：0
> 
> 时间：2012-07-27T12:49:40.423
> 
> 标签：php, mysql, sql, phpmyadmin

我有一个表“***会议***”，其中包含以下字段

```
id   recurring_start_date  recurring_end_date (Both are date fields)
1\.    2012-07-22             2012-07-25
2\.    2012-07-27             2012-08-05
3\.    2012-07-26             2012-08-26
4\.    2012-07-23             2012-10-23
5\.    2012-08-24             2012-11-24
6\.    2012-09-12             2012-10-19
7\.    2012-07-28             2012-07-29 
```

我想通过 sql 查询过滤那些在**开始-结束重复日期范围之间包含“** **2012-07-28** ”日期并包括开始 n 结束重复日期的行。 我们知道结果将是第 2 行、第 3 行、第 4 行、第 7 行。 但是我如何在 php.ini 中运行这个查询。

 **我试过这个，但它不起作用。

```
$sql = "
    SELECT * 
    FROM 
        `meetingss` 
    WHERE 
        `recurring_st_date` >= \'2012-07-28\' 
        AND `recurring_ed_date` <= \'2012-07-28\' 
    "; 
```

可能是出错了，可能是提供日期条件错误。
有什么好的建议我的伙伴们这样做。谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T12:56:23.077

```
$sql = "SELECT * FROM `meetings` 
        WHERE date('2012-07-28') 
              between `recurring_st_date` AND `recurring_ed_date`"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T12:52:51.763

```
`recurring_st_date` >= STR_TO_DATE('2012-07-28', '%Y-%m-%d') AND 
`recurring_ed_date` <= STR_TO_DATE('2012-07-28', '%Y-%m-%d') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T12:55:43.733

删除反斜杠

```
`recurring_st_date` >= '2012-07-28' 
AND `recurring_ed_date` <= '2012-07-28' 
```**

# mysql - 何时使用不同的数字数据类型 - TINYINT / SMALLINT / MEDIUMINT / INT / BIGINT - MySQL

> ID：11688116
> 
> 赞同：1
> 
> 时间：2012-07-27T12:49:42.383
> 
> 标签：mysql, numeric, unsigned, signed, sqldatatypes

我阅读了这里给出的答案：[MySQL 中的 tinyint、smallint、mediumint、bigint 和 int 有什么区别？](https://stackoverflow.com/questions/2991405/what-is-the-difference-between-tinyint-smallint-mediumint-bigint-and-int-in-s)，所以我现在知道他们如何存储数据，但我仍然不确定如何设置我的数据库。例如，如果我希望字段为 0 或 1（二进制，0 = 关闭，1 = 开启），我是否使用长度为 1 的 TINYINT？

我的主要问题是，LENGTH 设置决定什么？因为每个 NUMERIC 数据类型已经有自己的关联数据大小。

另外，SIGNED 和 UNSIGNED 有什么区别，我为什么要选择一个而不是另一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T12:56:29.677

*   [http://dev.mysql.com/doc/refman/5.0/en/numeric-type-overview.html](http://dev.mysql.com/doc/refman/5.0/en/numeric-type-overview.html)

SIGNED 和 UNSIGNED 之间的区别在于 UNSIGNED 您只能存储正数。

例如：关于 INT (Normal INTEGER) 值

有符号范围是 -2147483648 到 2147483647。无符号范围是 0 到 4294967295。如果您使用 PK auto_increment 值，那么在这种情况下您应该使用 UNSIGNED。

*   [http://dev.mysql.com/doc/refman/5.0/en/integer-types.html](http://dev.mysql.com/doc/refman/5.0/en/integer-types.html) 这显示了每个 INTEGER 类型的存储和范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T12:54:22.920

对于二进制字段，请使用`BIT`.

数字的长度指定逗号前后的精度。看[这里](http://dev.mysql.com/doc/refman/5.0/en/fixed-point-types.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-15T10:39:45.407

整数变量有 32 位来存储整数值。在有符号整数中，第一位保留用于存储正号或负号。因此，一个有符号整数只能使用 31 位来存储一个值，因此它的范围是 -2,147,483,648 到 +2,147,483,647。假设如果您的程序只需要存储大于 +2,147,483,647 的正整数。您需要考虑占用 8 位的长整数，这会导致内存浪费。相反，您可以使用无符号整数。在无符号整数中，没有为符号保留任何位，因此现在您有 32 位来存储值。无符号整数的唯一限制是您不能使用它来存储负值。32 位无符号整数的范围是 0 到 4,294,967,295。希望它能清除您对有符号和无符号整数的概念。

# php - Symfony2 动态表单域

> ID：11688121
> 
> 赞同：1
> 
> 时间：2012-07-27T12:50:05.323
> 
> 标签：php, javascript, forms, symfony

我想在 Symfony2 中创建一个表单，它根据属于同一表单的组合框中的选定值显示一组单选按钮。
我无法在 Symfony2 中找到一个合适的解决方案来让我拥有这个功能。
有没有办法至少在部分实现中使用 Symfony2 框架，或者我应该手动生成表单？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T13:08:12.907

您正在寻找的是 AJAX。这可以使用直接的 javascript 或 jQuery 来实现（jQuery 更简洁且更易于使用）。

这是一个 jQuery 存根，让您了解必须发生的事情：

```
<script language="javascript">
    $('#mySelect').change(function() {
        $.post('backgroundScript.php', {
            val: $(this).val()
        }, function(data) {
            $('#radioDiv').html(data);
        });
    });
</script> 
```

如果您不熟悉 AJAX 和 jQuery，我将解释发生了什么。`$('#mySelect')`几乎相当于javascript的`getElementById()`功能。它们的功能不同（jQuery 使用与**css**相同的符号来查找您要查找的元素），但这将返回带有`mySelect`id 属性的元素。

`.change()`将 onChange 事件处理程序设置为`function()`括号内的定义。 `$.post`是执行 AJAX 的 jQuery 简写`post`（相对于 a `get`），它在没有页面加载的情况下发送到*backgroundScript.php 。*当*backgroundScript.php*返回 200 状态（即“一切正常，这是我的输出”）时，它将执行回调函数`function(data)`。

*backgroundScript.php*将`val`作为 $_POST 变量接收并执行“某些操作”以确定应显示哪些单选按钮，然后将输出写入屏幕。

**编辑（更多信息）：**

*如果您根据数据库确定单选按钮， backgroundScript.php*应该看起来像这样。***请记住，这不是在考虑安全性或考虑过时的功能（例如`mysql_*`）的情况下编写的，只是功能***：

```
<?php
// backgroundScript.php
$masterVal = $_POST['val'];
$output = "";

$query = "SELECT bt.button_value, bt.button_label
    FROM button_table as bt
    WHERE bt.button_master_id = " . $masterVal;

$result = mysql_query($query);

while($row = mysql_fetch_array($result)) {
    $output .= "<input type='radio' name='radioGroup' value='" . 
        $row['button_value'] . "' /> " . $row['button_label'];
}

echo $output; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:21:07.047

您可以尝试使用 symfony2 表单构建器，它允许以编程方式构建表单。

如果您可以在构建表单之前确定实体，这将是可能的......

# php - 在 XAMPP1.7.7 上使用 Imagick 保存图像

> ID：11688126
> 
> 赞同：0
> 
> 时间：2012-07-27T12:50:29.567
> 
> 标签：php, imagick

我有以下代码块：

```
<?php
$im = new imagick('test.jpg');
echo "a";
?> 
```

如果省略 $im，则结果为“a”，但如果未省略 $im，则结果为“”。这是因为imagick没有安装好吗？如果这是答案，我怎样才能为 XAMPP 1.7.7 安装好它？在网上几乎没有信息，他们谈论使用旧版本的 imagick，但我不喜欢这个想法。

我对 imagick 的另一个问题是我想重新处理图像并将其保存在我的服务器中。我已阅读有关 move_uploaded_file 的使用，但如果我使用 writeimage，我将不会使用它。我需要以不同的方式使用它吗？

最后一个问题：我传递了一个以 64 基编码的图像，并在一个 php 文件中解码。如何在不保存之前将解码图像分配给 Imagick？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:06:37.990

显示。

```
<?
$im = new imagick('test.jpg');
$im->setImageFormat('jpg');
header('Content-type: image/jpg');
echo $im;
?> 
```

保存

```
<?
$im = new imagick('test.jpg');
$im->setImageFormat('jpg');
$saveToDir = "/home/";
$imageName = "image.jpg";
$im->writeImage($saveToDir . $imageName);
?> 
```

# oracle - 我可以使用 Oracle PL/SQL 同时持有两个锁吗？

> ID：11688127
> 
> 赞同：2
> 
> 时间：2012-07-27T12:50:35.877
> 
> 标签：oracle, plsql, locking

我的应用程序的当前锁定概念假定获得 2 个锁并执行代码。但是当我尝试释放第一个锁柄时，总是会出错。有没有办法做到这一点，或者我错误地使用 dbms_lock 一次获得 2 个锁？

此致！

```
DECLARE
  l_handle_1 VARCHAR2(128);
  l_handle_2 VARCHAR2(128);
  l_result NUMBER;
BEGIN

    -- >>> LOCK1
    dbms_lock.allocate_unique('lock_1', l_handle_1);
    l_result := dbms_lock.request(l_handle_1, dbms_lock.x_mode, 10, true);
    BEGIN

      -- >>> LOCK2
      dbms_lock.allocate_unique('lock_2', l_handle_2);
      l_result := dbms_lock.request(l_handle_2, dbms_lock.x_mode, 10, true);
      BEGIN

        /*
         * PLSQL-Code with both locks held
         */

        -- LOCK-2 release
        l_result := dbms_lock.release(l_handle_2);
        IF (l_result > 0) THEN
          dbms_output.put_line('Fail 2');
        END IF;

        -- LOCK-1 release
        l_result := dbms_lock.release(l_handle_1);
        IF (l_result > 0) THEN
          dbms_output.put_line('Fail 1');
        END IF;

      EXCEPTION
        WHEN OTHERS THEN
          l_result := dbms_lock.release(l_handle_2);
          IF (l_result > 0) THEN
            dbms_output.put_line('Fail 3');
          END IF;
          RAISE;          
      END;

    EXCEPTION
      WHEN OTHERS THEN
        l_result := dbms_lock.release(l_handle_1);
        IF (l_result > 0) THEN
          dbms_output.put_line('Fail 4');
        END IF;
        RAISE;
    END;
END; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T14:12:59.853

您使用 release_on_commit = TRUE 调用 dbms_lock.request 作为第一个锁句柄，然后调用 allocate_unique。allocate_unique 执行提交并因此释放第一个锁。

如果您按以下方式更改代码，则不会出现错误：

```
DECLARE
  l_handle_1 VARCHAR2(128);
  l_handle_2 VARCHAR2(128);
  l_result NUMBER;
BEGIN

    dbms_lock.allocate_unique('lock_1', l_handle_1);
    dbms_lock.allocate_unique('lock_2', l_handle_2);

    -- >>> LOCK1
    l_result := dbms_lock.request(l_handle_1, dbms_lock.x_mode, 10, true);
    BEGIN

      -- >>> LOCK2
      -- dbms_lock.allocate_unique('lock_2', l_handle_2);
      l_result := dbms_lock.request(l_handle_2, dbms_lock.x_mode, 10, true);
      BEGIN

        /*
         * PLSQL-Code with both locks held
         */

        -- LOCK-2 release
        l_result := dbms_lock.release(l_handle_2);
        IF (l_result > 0) THEN
          dbms_output.put_line('Fail 2');
        END IF;

        -- LOCK-1 release
        l_result := dbms_lock.release(l_handle_1);
        IF (l_result > 0) THEN
          dbms_output.put_line('Fail 1');
        END IF;

      EXCEPTION
        WHEN OTHERS THEN
          l_result := dbms_lock.release(l_handle_2);
          IF (l_result > 0) THEN
            dbms_output.put_line('Fail 3');
          END IF;
          RAISE;          
      END;

    EXCEPTION
      WHEN OTHERS THEN
        l_result := dbms_lock.release(l_handle_1);
        IF (l_result > 0) THEN
          dbms_output.put_line('Fail 4');
        END IF;
        RAISE;
    END;
END; 
```

# jquery - 如何动态调整fancybox高度

> ID：11688133
> 
> 赞同：2
> 
> 时间：2012-07-27T12:50:50.860
> 
> 标签：jquery, fancybox, fancybox-2

新的 fancybox [v2] 有一个函数 $.fancybox.update() 可以在浏览器调整大小时改变 fancybox 的宽度

但是我如何动态改变高度？

这是我的定义

```
$.fancybox({
'autoSize'      : true,
'fixed'         : true,
'padding'       : 0,
'fitToView '        : true,
'onUpdate '     :  function(){
                                                            $.fancybox.update();
                                                            $.fancybox.reposition();

            },

}); 
```

# spring - 跨多个耳朵共享 Spring 应用程序上下文

> ID：11688158
> 
> 赞同：2
> 
> 时间：2012-07-27T12:52:14.387
> 
> 标签：spring, jakarta-ee, architecture, n-tier-architecture

您如何看待跨多个耳朵共享弹簧上下文的概念？

假设我想共享一个拦截器或过滤器，因为我不想为了节省内存而为我的 2 只耳朵使用同一个 bean 的 2 个实例。

有一些关于跨应用程序共享上下文的博客，但它仅指在一个耳朵内跨多个战争共享上下文。

我知道跨多个耳朵共享上下文在技术上是可能的（一种方法可能是在服务器启动时定义一个上下文，然后在 web 应用程序上下文初始化时，将服务器上下文作为其父上下文注入）。

我不知道它是否是一种在多个耳朵之间共享 bean 的便捷设计方法，或者是否有一些标准的方法来做到这一点。

提前致谢。

**编辑：**

关于在耳朵内跨多个战争共享 web 应用程序上下文的相关博客：http: [//blog.springsource.org/2007/06/11/using-a-shared-parent-application-context-in-a-multi-war-弹簧应用/](http://blog.springsource.org/2007/06/11/using-a-shared-parent-application-context-in-a-multi-war-spring-application/)

# c++ - %p 说明符是否仅适用于有效指针？

> ID：11688162
> 
> 赞同：20
> 
> 时间：2012-07-27T12:52:22.620
> 
> 标签：c++, pointers, reinterpret-cast

假设在我的平台上`sizeof(int)==sizeof(void*)`，我有这个代码：

```
printf( "%p", rand() ); 
```

由于传递了一个不是有效指针的值来代替，这是否会成为未定义的行为`%p`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-27T14:28:49.487

为了扩展@larsman 的答案（它说由于您违反了约束，因此行为未定义），这是一个实际的 C 实现 where `sizeof(int) == sizeof(void*)`，但代码不等同于`printf( "%p", (void*)rand() );`

摩托罗拉 68000 处理器有 16 个寄存器用于一般计算，但它们并不等效。`a0`其中八个（通过命名`a7`）用于访问内存（地址寄存器），另外八个（`d0`通过`d7`）用于算术（数据寄存器）。此架构的有效调用约定是

1.  将前两个整数参数传入`d0`and `d1`; 将其余的传递到堆栈上。
2.  将前两个指针参数传入`a0`and `a1`; 将其余的传递到堆栈上。
3.  传递堆栈上的所有其他类型，无论大小。
4.  无论类型如何，在堆栈上传递的参数都是从右向左推送的。
5.  基于堆栈的参数在 4 字节边界上对齐。

这是一个完全合法的调用约定，类似于许多现代处理器使用的调用约定。

例如，要调用函数，您`void foo(int i, void *p)`将传入和传入`i`。`d0``p``a0`

请注意，要调用该函数，您`void bar(void *p, int i)`还需要传入和传入`i`。`d0``p``a0`

在这些规则下，`printf("%p", rand())`将传递格式字符串 in`a0`和随机数参数 in `d0`。另一方面，`printf("%p", (void*)rand())`将传递格式字符串 in`a0`和随机指针参数 in `a1`。

`va_list`结构如下所示：

```
struct va_list {
    int d0;
    int d1;
    int a0;
    int a1;
    char *stackParameters;
    int intsUsed;
    int pointersUsed;
}; 
```

前四个成员使用寄存器的相应条目值进行初始化。通过、 和传递`stackParameters`的第一个基于堆栈的参数的指向被初始化为命名参数的数量，它们分别是整数和指针。`...``intsUsed``pointersUsed`

宏是一个编译器内在函数，它根据`va_arg`预期的参数类型生成不同的代码。

*   如果参数类型是指针，则`va_arg(ap, T)`扩展为`(T*)get_pointer_arg(&ap)`.
*   如果参数类型是整数，则`va_arg(ap, T)`扩展为`(T)get_integer_arg(&ap)`。
*   如果参数类型是其他类型，则`va_arg(ap, T)`扩展为`*(T*)get_other_arg(&ap, sizeof(T))`.

`get_pointer_arg`函数是这样的：

```
void *get_pointer_arg(va_list *ap)
{
    void *p;
    switch (ap->pointersUsed++) {
    case 0: p = ap->a0; break;
    case 1: p = ap->a1; break;
    case 2: p = *(void**)get_other_arg(ap, sizeof(p)); break;
    }
    return p;
} 
```

`get_integer_arg`函数是这样的：

```
int get_integer_arg(va_list *ap)
{
    int i;
    switch (ap->intsUsed++) {
    case 0: i = ap->d0; break;
    case 1: i = ap->d1; break;
    case 2: i = *(int*)get_other_arg(ap, sizeof(i)); break;
    }
    return i;
} 
```

`get_other_arg`函数是这样的：

```
void *get_other_arg(va_list *ap, size_t size)
{
    void *p = ap->stackParameters;
    ap->stackParameters += ((size + 3) & ~3);
    return p;
} 
```

如前所述，调用`printf("%p", rand())`将传递格式字符串 in`a0`和随机整数 in `d0`。但是当`printf`函数执行时，它会看到`%p`格式并执行 a `va_arg(ap, void*)`，它将使用`get_pointer_arg`和读取参数 from`a1`而不是`d0`. 由于`a1`未初始化，它包含垃圾。您生成的随机数将被忽略。

进一步举个例子，如果你有`printf("%p %i %s", rand(), 0, "hello");`这将被称为如下：

*   `a0`= 格式字符串的地址（第一个指针参数）
*   `a1`= 字符串地址`"hello"`（第二个指针参数）
*   `d0`= 随机数（第一个整数参数）
*   `d1`= 0（第二个整数参数）

When the `printf` function executes, it reads the format string from `a0` as expected. When it sees the `%p` it will retrieve the pointer from `a1` and print it, so you get the address of the string `"hello"`. Then it will see the `%i` and retrieve the parameter from `d0`, so it prints a random number. Finally, it sees the `%s` and retrieves the parameter from the stack. But you didn't pass any parameters on the stack! This will read undefined stack garbage, which will most likely crash your program when it tries to print it as if it were a string pointer.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-27T13:11:08.340

C 标准，7.21.6.1，`fprintf`函数，只是声明

> `p` 参数应是指向 的指针`void`。

根据附录 J.2，这是一个*约束*，违反约束会导致 UB。

（以下是我之前的推理为什么应该是UB，这太复杂了。）

~~该段没有描述如何从`void*`中检索`...`，但 C 标准本身为此目的提供的唯一方法是 7.16.1.1，`va_arg`宏，它警告我们~~

> ~~如果*type*与实际下一个参数的类型不兼容（根据默认参数提升），则行为未定义~~

如果您阅读 6.2.7，兼容类型和复合类型，那么无论它们的大小如何，都没有暗示`void*`并且`int`应该兼容。所以，我想说，因为这是*在标准 C*`va_arg`中实现的唯一方法，所以行为是未定义的。`printf`

 ** * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-27T13:04:21.050

是的，它是未定义的。从 C++11、3.7.4.2/4 开始：

> 使用无效指针值（包括将其传递给释放函数）的效果是未定义的。

带脚注：

> 在某些实现中，它会导致系统生成的运行时错误。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-27T13:06:22.800

%p 只是 printf 的输出格式规范。它不需要以任何方式取消引用或验证指针，尽管如果类型不是指针，一些编译器会发出警告：

```
int main(void)
{
    int t = 5;
    printf("%p\n", t);
} 
```

编译警告：

```
warning: format ‘%p’ expects argument of type ‘void*’, but argument 2 has type ‘int’ [-Wformat] 
```

输出：

```
0x5 
```*

# node.js - Node.js / Express - 通过请求/响应对象修改响应模板上下文

> ID：11688163
> 
> 赞同：2
> 
> 时间：2012-07-27T12:52:33.193
> 
> 标签：node.js, express

我正在使用 Express 在 node.js 应用程序中提供网页。

假设我希望在响应对象的方法`foo`呈现的所有视图中都有一个可用的变量。`render`我知道我可以为此任务定义动态助手。但是，当您需要像这样异步设置辅助变量时，我发现它们不适合（Mongoose 示例）：

```
Thing.count(filter, function(error, thingCount) {
    foo = thingCount;
} 
```

我尝试使用连接中间件方法，这非常适合我，但是这里的问题是如何影响响​​应上下文。通过查看`render`方法定义，`express/lib/view.js`我发现可以通过写入 app._locals 对象来操作它：

```
function putFooIntoContext (req, res, next) {
  Thing.count(filter, function(error, thingCount) {
    res.app._locals.foo = thingCount;
    next();
  }
} 
```

它按预期工作，但是，我有点担心这种直截了当的方法不是最好的解决方案。有人可以告诉我如何通过 Express 开发人员设计的正确方式仅与请求/响应对象交互来影响响应上下文吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:13:51.053

Express 3.x 允许以“app.use”的形式使用异步助手。因此，对于一个简单的全局“foo”变量，您的代码如下所示：

```
app.use(req, res, next) {
    Thing.count(filter, function(error, thingCount) {
        res.locals.foo = thingCount;
        next();
    });
} 
```

当然中间件选项也是有效的，这只是另一种观点，并且节省了在每个 app.get(....) 中插入中间件

# boost - Boost 1.50 CMake 2.8 和 Ogre 1.8 - win64 - 动态链接

> ID：11688168
> 
> 赞同：1
> 
> 时间：2012-07-27T12:53:33.527
> 
> 标签：boost, cmake, boost-thread, ogre

我已经构建了 Ogre 3d 引擎（线程和 date_time）所需的动态提升库。我的 boost 目录位于 C:\boost 中，lib 位于 C:\boost\lib 中，并且包含在 C:\boost(\boost) 中，这是标准要求的。

如果您熟悉 CMake 和 Ogre（因为这是从源代码构建任何 Ogre 存储库克隆的最简单方法），您就会知道没有什么需要指定的了。在我的情况下这不是真的：Cmake 总是报告它找不到提升。只有当我尝试从他们的存储库构建 Ogre 1.8 版本时才会发生这种情况。当我使用 Ogre 2.0 实验性不稳定时（在我写这个问题的时候），成功找到了 boost，它的线程和日期时间组件也是如此。

有没有人有任何想法？最好是，有没有人尝试过以这种方式构建 Ogre 1.8 源代码？

我确实尝试了几乎所有的东西（甚至是命令行 cmake），但没有积极的结果。

我在 Ogre 论坛上几乎两次问过这个问题，但这些来源都没有解决 Ogre 稳定版本的问题。

是什么让 Cmake 在构建一个版本而不是另一个版本时如此出轨？我如何至少在 CMake 中检查 boost 的存在（而不创建构建解决方案或其他任何东西）？

必须有一个简单的命令行标志或一个简单的脚本才能使用 cmake 运行，但除了`FindBoost.cmake`文件之外，没有其他真正有用的东西（而且那个文件太大而无法快速浏览）。

**更新** 使用*sakra*的建议，我看到*提升*被认可：

```
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:6
7 ] location of version.hpp: C:/boost/boost/version.hpp
-- [ C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoost.cmake:7
6 ] version.hpp reveals boost 1.50.0 
```

但是尽管本节确实显示了 boost 应该在的地方，但是 thread 和 date_time 库对 CMake 是不可见的。

该`Boost_USE_STATIC_LIBS`标志设置为 OFF/FALSE，以防万一。

**使用--find** -package cmake 命令行参数更新：

```
C:\Ogre18\Build>cmake --find-package -DNAME=Boost -DCOMPILER_ID=GNU -DLANGUAGE=C
XX -DMODE=EXIST
Boost found. 
```

最终，cmake 找不到所需的组件。可以检查属于 boost 安装的特定库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:06:39.490

尝试使用设置为`cmake`的变量进行调用。这可能会给您一些提示，说明 FindBoost 模块为什么找不到您的 Boost 安装。`Boost_DEBUG``TRUE`

```
cmake -DBoost_DEBUG=TRUE . 
```

# javascript - 调用chrome.tabs.query后，结果不可用

> ID：11688171
> 
> 赞同：23
> 
> 时间：2012-07-27T12:53:47.710
> 
> 标签：javascript, asynchronous, google-chrome-extension, breakpoints, google-chrome-devtools

我正在为 Google Chrome 创建（学习）一个扩展。

为了调试一些代码，我插入`console.log()`了 ，如下：

```
var fourmTabs = new Array();
chrome.tabs.query({}, function (tabs) {
    for (var i = 0; i < tabs.length; i++) {
        fourmTabs[i] = tabs[i];
    }
});
for (var i = 0; i < fourmTabs.length; i++) {
    if (fourmTabs[i] != null)
        window.console.log(fourmTabs[i].url);
    else {
        window.console.log("??" + i);
    }
} 
```

这是非常简单的代码：将所有标签信息放入我自己的数组中，然后打印一些东西。

为了检查代码是否正常工作，我运行了代码。问题来了：

*   当我使用断点（通过开发者工具）时，代码运行良好。
*   如果没有断点，则不会打印任何内容。

知道为什么吗？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-07-27T14:23:52.917

您的问题可以简化为：

```
/*1.*/ var fourmTabs = [];
/*2.*/ chrome.tabs.query({}, function(tabs) {
/*3.*/     fourmTabs[0] = tabs[0];
/*4.*/ });
/*5.*/ console.log(fourmTabs[0]); 
```

您希望在`fourmTabs`到达第 5 行时更新数组（按第 3 行）。
那是**错误**的，因为该`chrome.tabs.query`方法是**异步**的。

* * *

为了让您了解异步方面的重要性，我展示了一个与您的代码**和**一个故事具有相同结构的代码片段。

```
/*1.*/ var rope = null;
/*2.*/ requestRope(function(receivedRope) {
/*3.*/     rope = receivedRope;
/*4.*/ });
/*5.*/ grab(rope); 
```

*   在第 1 行，宣布存在绳索。
*   在第 2-4 行，创建了一个*回调函数*，应该由该`requestRope`函数调用。
*   在第 5 行，您将通过`grab`函数抓住绳索。

**同步**`requestRope`实现时没问题：   你：“你好，我想要一根绳子，有绳子请*扔掉*^(“调用回调函数”)。   她：“当然。” *扔绳子*   你：*跳跃并抓住绳子*- 你设法到达另一边，*活着*。

 *****当`requestRope`是**异步**实现时，如果把它当成同步的，你可能会遇到问题：
  你：“请向我扔一根绳子。”
  她：“当然。让我们看看……”
  你：*跳起来试图抓住绳子*因为没有绳子，你会摔倒而死。
  她：*扔绳子* [当然太晚了。]

* * *

现在您已经看到了异步和同步实现的功能之间的区别，让我们解决您最初的问题：

```
var fourmTabs = new Array();
chrome.tabs.query({}, function (tabs) {
    for (var i = 0; i < tabs.length; i++) {
        fourmTabs[i] = tabs[i];
    }
    // Moved code inside the callback handler
    for (var i = 0; i < fourmTabs.length; i++) {
        if (fourmTabs[i] != null)
           window.console.log(fourmTabs[i].url);
        else {
            window.console.log("??" + i);
        }
    }
});
// <moved code inside callback function of chrome.tabs.query> 
```

使用断点，您的代码可以工作，因为在到达代码的第二部分时，回调已经被调用。*****

# uml - 使用 ATL 插件午餐 atl 文件

> ID：11688174
> 
> 赞同：0
> 
> 时间：2012-07-27T12:53:53.887
> 
> 标签：uml

我正在使用 ATl 插件使用 java 类午餐 atl。在我使用 ATL 配置向导运行 ATL 文件之前。我在配置中给出的输入是：

*   **ATL 模块：** sample.atl

*   **元模型 UML：** sampleprofile.uml

*   **源模型系统：** samplemodel.uml

*   **目标：**输出.uml

运行后输出是正确的，也是我想要的。

问题是当我使用 ATL 插件来处理 atl 文件时，它只需要我作为输入：ATL 文件的名称和元模型的名称。问题是我不知道在哪里指定 samplemodel.uml。因为这也应该作为输入。因此，我得到的 output.uml 不是我期望得到的。

有谁知道如何在生成的 java 类中指定第二个文件？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:47:01.630

您不需要更改生成的 java 类。`Families2Persons`只需从您的 java 程序中导入生成的类（例如）并像这样启动转换：

```
Families2Persons runner = new Families2Persons();
runner.loadModels("/pathto/samplemodel.uml");
runner.doFamilies2Persons(new NullProgressMonitor());
runner.saveModels("/pathto/output.uml"); 
```

如果您愿意，您还可以从命令行启动转换，将两个路径作为参数传递。

# sql-server - 如何使用 t-sql 命令将数据更新为大写首字母？

> ID：11688182
> 
> 赞同：19
> 
> 时间：2012-07-27T12:54:27.823
> 
> 标签：sql-server, tsql, sql-update, uppercase

我的数据库上有一个表。我的表的名称是“公司”。我想将数据“company_name”更改为大写首字母。例如;

“ABC公司”

“DEF 可塑性”

作为

“ABC公司”

“定义可塑性”

我知道我应该使用“UPDATE”命令。但是如何？谢谢你的帮助！

（CONCAT 不起作用）

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-27T13:32:04.477

SQL Server 没有`Initcap`oracle 之类的功能。

您可以为 Initcap 创建 UDF。

```
CREATE FUNCTION [dbo].[InitCap] ( @InputString varchar(4000) ) 
RETURNS VARCHAR(4000)
AS
BEGIN

DECLARE @Index          INT
DECLARE @Char           CHAR(1)
DECLARE @PrevChar       CHAR(1)
DECLARE @OutputString   VARCHAR(255)

SET @OutputString = LOWER(@InputString)
SET @Index = 1

WHILE @Index <= LEN(@InputString)
BEGIN
    SET @Char     = SUBSTRING(@InputString, @Index, 1)
    SET @PrevChar = CASE WHEN @Index = 1 THEN ' '
                         ELSE SUBSTRING(@InputString, @Index - 1, 1)
                    END

    IF @PrevChar IN (' ', ';', ':', '!', '?', ',', '.', '_', '-', '/', '&', '''', '(')
    BEGIN
        IF @PrevChar != '''' OR UPPER(@Char) != 'S'
            SET @OutputString = STUFF(@OutputString, @Index, 1, UPPER(@Char))
    END

    SET @Index = @Index + 1
END

RETURN @OutputString

END
GO 
```

检查 UDF 是否正常工作

```
select [dbo].[InitCap] ('stackoverflow com');

Stackoverflow Com 
```

你可以像这样更新你的表

```
update table
set column=[dbo].[InitCap](column); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-27T12:57:37.883

```
update  YourTable
set     company_name = upper(substring(company_name,1,1)) + 
            lower(substring(company_name, 2, len(company_name)-1))
where   len(company_name) > 0 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!3/343fb/1/0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T13:11:19.463

借助像[这样](https://stackoverflow.com/a/314917/569436)的拆分功能。

试试这个，`YourTable`用你的表名替换：

```
update T
set Name = P.Name
from YourTable as T
  cross apply (select (select upper(left(X.s, 1))+lower(stuff(X.s, 1, 1, ''))+' '
                       from dbo.split(' ', Name) as X
                       for xml path(''), type).value('.', 'varchar(50)')
              ) as P(Name) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T20:09:50.727

由于感谢上述帖子，此函数将每个单词的第一个字母大写，除了那些小于特定字符长度的单词，假设为首字母缩略词。如果这没有问题，那么您将第二个参数设置为 0。

 `````
CREATE function [dbo].[f_camel_exc_short_words] (@InputString varchar(4000),@AcronymMaxLen INT )
RETURNS VARCHAR(4000)
AS
BEGIN

DECLARE @Index          INT
DECLARE @Char           CHAR(1)
DECLARE @PrevChar       CHAR(1)
DECLARE @Word           VARCHAR(255)
DECLARE @WordChar       CHAR(1)
DECLARE @OutputString   VARCHAR(255)
DECLARE @WordIndex      INT

SET @Word = ''
SET @OutputString = '' 
SET @Index = 1

WHILE @Index <= LEN(@InputString)+1
BEGIN
    SET @Char     = SUBSTRING(@InputString, @Index, 1)
    SET @PrevChar = CASE WHEN @Index = 1 THEN   ' '   ELSE   SUBSTRING(@InputString, @Index - 1, 1)  END

    --IF @Char IN (' ', ';', ':', '!', '?', ',', '.', '_', '-', '/', '&', '''', '(')
    --    SET @OutputString = @OutputString + @Char

    IF @PrevChar IN (' ', ';', ':', '!', '?', ',', '.', '_', '-', '/', '&', '''', '(','0','1','2','3','4','5','6','7','8','9') or @Index = LEN(@InputString)+1
    BEGIN
         SET @WordIndex = 1
        IF LEN(@Word) > @AcronymMaxLen 
        BEGIN
            WHILE @WordIndex <= LEN(@Word)
            BEGIN
                SET @WordChar = SUBSTRING(@Word,@WordIndex,1)
                if @WordIndex = 1  begin
                    SET @Word = STUFF(@Word,@WordIndex,1,UPPER(@WordChar))    end
                else    begin
                    SET @Word = STUFF(@Word,@WordIndex,1,LOWER(@WordChar))    end
                SET @WordIndex = @WordIndex + 1
            END
        END
        ELSE BEGIN
            SET @Word = UPPER(@Word)
        END
        set @OutputString = @OutputString + @Word
        SET @Word = ''
    END
    SET @Word = @Word + @Char
    SET @Index = @Index + 1
END  

return @OutputString

end
GO 
````  `所以`PRINT dbo.f_camel_exc_short_words ('PIONEER EURO BOND FUND CLASS C (NON-DIST) (EUR) (OFFSHORE) ISIN LU0119429891',4)`返回 *Pioneer EURO BOND FUND Class C (NON-Dist) (EUR) (Offshore) ISIN LU0119429891*

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-07T16:11:19.090

试试这个：

```
declare @word as nvarchar (50)
set @word = 'ABC COMPANY'
select upper(left(@word, 1)) + lower(SUBSTRING(@word,2,charindex(' ', @word)-2)) + ' ' + 
upper(left(substring(@word,charindex(' ', @word)+1,len(@word)-1),1)) 
+ lower(SUBSTRING(@word,charindex(' ', @word)+2, len(@word))) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-01T16:21:41.363

进一步的修改处理所有格 ('s) 和以 Mc 开头的单词

```
if ' ' + @OutputString like '% Mc%'
set @OutputString = ' ' + @OutputString
set @index = CHARINDEX ( ' Mc', @OutputString)
while @Index > 0
begin
    set @OutputString = SUBSTRING(@outputString, 1, @index + 2) + UPPER(SUBSTRING(@outputString, @index + 3, 1)) + SUBSTRING(@outputString, @index + 4, len(@outputString))
    set @index = CHARINDEX ( ' Mc', @OutputString, @Index + 4)
end
set @outputstring = ltrim(rtrim(@outputstring))

if @OutputString + ' ' like '%''S %' 
set @OutputString = ltrim(rtrim(REPLACE(@outputstring + ' ', '''S ', '''s '))) 
```

就在返回之前

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-01-24T20:07:17.473

```
CREATE FUNCTION Initcap
( @mystring varchar(50) )
RETURNS VARCHAR(50)
AS
BEGIN
   DECLARE @val VARCHAR(50);
   SET @val = (select upper(left(@mystring,1)) +  lower(substring(@mystring,2,datalength(@mystring)-1)) )
   RETURN @val;
END; 
`````

# sql - 如何在没有过多往返数据库的情况下使用 SQL AUTOINCREMENT 主键？

> ID：11688190
> 
> 赞同：2
> 
> 时间：2012-07-27T12:54:56.723
> 
> 标签：sql, sqlite, sqlalchemy, auto-increment

假设我有 1000 万个客户名称，每个名称都与一个或多个地址相关联，并且我想将数据放入 SQL 数据库中。

我制作了一个客户表和一个地址表。Customer 表包含一个自动增量主键。每个地址条目都指向带有外键的客户表。

现在，对于 1000 万条记录中的每一条，我必须创建一条 Customer 记录，将其插入到 Customer 表中，然后再次检索它以获得分配给它的自动增量主键，以便在新的 Address 条目中使用。2000 万次往返。啊。

除了使用 GUID 之外，还有更好的方法吗？

（我碰巧将 SQLite 与 SQLAlchemy 一起使用）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T05:44:29.033

这不是使用 SA，而是一个示例来说明在 Sqlite3 中的两个表中插入行并且不进行往返。

创建一个连接两个表的视图，然后编写一个代替触发器来处理插入，然后插入到您的视图中。如果您想更进一步，修改 SA 以插入您的视图应该不难。

```
create table customer (id integer primary key autoincrement, name text not null);

create table address (id integer primary key autoincrement, customer_id integer references customer not null, street text);

create view customer_view as 
select customer.id as customer_id, customer.name, address.id as address_id, address.street
from customer 
inner join address on customer.id = address.id;

create trigger customer_view_insert_trg
instead of insert on customer_view begin
insert into customer (name) values (new.name);
insert into address (customer_id, street) values ((select last_insert_rowid()), new.street);
end;

insert into customer_view (name, street) values ('Joe', 'Main Street');
insert into customer_view (name, street) values ('Bill', 'Water Street'); 
```

* * *

```
sqlite> select * from customer;
1|Joe
2|Bill

sqlite> select * from address;
1|1|Main Street
2|2|Water Street 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T17:54:55.117

如果将 Customer 和 Address 对象配置为在它们之间建立关系，则可以简单地插入它们而无需担心 ID。SA 知道它们是相关的，并为您制定 FK 详细信息。

细心的读者会注意到 SA 对象关系教程[通过创建具有相关 Address 的 User 对象直接解决了这个用例](http://docs.sqlalchemy.org/en/rel_0_7/orm/tutorial.html#building-a-relationship)。我认识到 OP 的实际问题更复杂，但 ORM 教程似乎是一个很好的起点。SA 是一个摇滚工具。

请注意，您仍然需要迭代 10M 原始数据对象，这可能意味着您的数据库的批量加载工具可能是更有效的解决方案，但这是一种不同的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T12:57:09.297

我认为应该这样做：[http ://www.sqlite.org/c3ref/last_insert_rowid.html](http://www.sqlite.org/c3ref/last_insert_rowid.html)

> 此例程从第一个参数中的数据库连接返回最近成功 INSERT 到数据库中的 rowid。

和

> 如果表具有 INTEGER PRIMARY KEY 类型的列，则该列是 rowid 的另一个别名。

虽然这是一个 C/C++ 接口函数，但该函数也作为 SQLite 核心函数存在（实际上，它只是 C/C++ 的一个包装器[。http://www.sqlite.org/lang_corefunc.html](http://www.sqlite.org/lang_corefunc.html)）

# ajax - 以ajax方式从数据库中填充多个文本框

> ID：11688192
> 
> 赞同：0
> 
> 时间：2012-07-27T12:55:06.220
> 
> 标签：ajax

我是ajax新手。我有一个从数据库和 4 个文本框填充的下拉列表。当用户从下拉列表中选择标题时，文本框应自动填充。

这是我的 JavaScript 代码。

```
function getXMLHttp()
{
  var xmlHttp

  try
  {
    //Firefox, Opera 8.0+, Safari
    xmlHttp = new XMLHttpRequest();
  }
  catch(e)
  {
    //Internet Explorer
    try
    {
      xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
    }
    catch(e)
    {
      try
      {
        xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
      }
      catch(e)
      {
        alert("Your browser does not support AJAX!")
        return false;
      }
    }
  }
  return xmlHttp;
}

function MakeRequest(username)
{
  var xmlHttp = getXMLHttp();

  xmlHttp.onreadystatechange = function()
                               {
                                    if(xmlHttp.readyState == 4 && xmlHttp.status == 200)
                                     {
                                        HandleResponse(xmlHttp.responseText);
                                     }
                                }

  xmlHttp.open("GET","ajax.php?username="+username,true);
  xmlHttp.send(null);
}

function HandleResponse(response)
{
  document.getElementById("f").value = response; 
} 
```

这是我的 php 代码

```
 require_once'/classes/USRclass.php';
if(isset($_GET['username']))
{
    $username=$_GET['username'];
    $usr1=new USER;
    $where="username='$username'";
    $a=$usr1->show($where);
    echo $a['name'];
    echo $a['family'];
    echo $a['email'];
    echo $a['privilege'];
} 
```

这是我的表格

```
<form method="get">
    username:<select name="username" onChange="MakeRequest(this.value)">
        <option></option>
        <?php
        require_once'/classes/USRclass.php';
        $usr1=new User;
        $a=$usr1->show_all_field('username');
        if(count($a)==1)
        {
        foreach($a as $key)
         echo"<option>$key</option>";
        }
        else if(count($a>1))
        {
        foreach($a as $key)
            foreach($key as $column=>$val)
                echo"<option>$val</option>";
        }
        ?>      
        </select><br>
        name: <input id="n" type="text" name="u_name"><br>
        family:  <input type="text" name="u_family" id="f"><br>
        email: <input type="text" name="u_email"><br>
        privilege: <input type="text" name="u_privilege"><br>
        <input type="button" name="u_edit" value="Edit">
        <input type="submit" name="u_ok" value="OK">
        </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:40:19.543

这所有的ajax调用都可以通过jquery轻松完成，您可以使用[.ajax jquery api](http://api.jquery.com/jQuery.ajax/)首先您需要获取选项的val，如下所示

html

```
<option id="optn">first</option> //like you want to sent the value of the option have id optn you can send according to you its  only example 
```

并通过 jquery 获取该选项的值

```
var variable = $("optn").val(); 
```

并通过邮寄或获取您想要的方法发送这个php文件

```
$.ajax({
  type: "POST",
  url: "some.php",
  data: { dat: var}
}).done(function( msg ) { //you can also use success
  alert( "Data Saved: " + msg );
});
}); 
```

在php中，您可以通过

```
$_POST['dat'] 
```

并根据您进行操作

# http - Jmeter中标题的相同名称

> ID：11688196
> 
> 赞同：0
> 
> 时间：2012-07-27T12:55:10.547
> 
> 标签：http, header, xmlhttprequest, jmeter

如何在 Jmeter (HTTP Header Manager) 中设置多个标头，所有标头都已命名`Content-Type`，而不会出现只考虑第一个的问题？

例如：我将第一个标题`Content-Type=<value1>`和第二个标题设置为`Content-Type=<value2>`. 在我使用第一个标头登录后，我的其他 HTTP 请求失败，因为第二个标头被忽略。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:31:39.013

假设您可以尝试使用[HTTP Raw Request](http://code.google.com/p/jmeter-plugins/wiki/RawRequest)自定义采样器作为最终解决方案。

# c# - c# bin to hex 和 hex to bin

> ID：11688199
> 
> 赞同：0
> 
> 时间：2012-07-27T12:55:13.013
> 
> 标签：c#, binary, hex

我有一个关于将二进制转换为十六进制然后将十六进制转换为二进制的问题。
例如，我有一个图像文件。首先我想将该图像转换为十六进制字符串，然后我想将此十六进制字符串插入数据库。当用户想要获取该图像文件时，程序必须从数据库中读取十六进制字符串，然后转换为图像文件。在 C# 中可能吗？

我尝试了 StackOverflow 中的一些示例方法，但我做不到。我做了一个图像文件，但它无法显示。

我在等你的帮助。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:29:10.083

让我们知道这是否对您有帮助 -

```
 private string GetHexStringFromImage(System.Drawing.Image imageToConvert)
    {
        //Convert image it to byte-array
        byte[] byteArray;
        using (MemoryStream ms = new MemoryStream())
        {
            imageToConvert.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
            byteArray = ms.ToArray();
        }

        //Convert byte-array to Hex-string
        StringBuilder hexBuilder = new StringBuilder();
        foreach (byte b in byteArray)
        {
            string hexByte = b.ToString("X");

            //make sure each byte is represented by 2 Hex digits
            string tempString = hexByte.Length % 2 == 0 ? hexByte : hexByte.PadLeft(2, '0');

            hexBuilder.Append(tempString);
        }

        //return Hex-string to save to DB
        return hexBuilder.ToString();
    }

    private System.Drawing.Image GetImageFromHexString(string hexSting)
    {
        //Convert Hex-string from DB to byte-array
        int length = hexSting.Length;
        List<byte> byteList = new List<byte>();

        //Take 2 Hex digits at a time
        for (int i = 0; i < length; i += 2)
        {
            byte byteFromHex = Convert.ToByte(hexSting.Substring(i, 2), 16);
            byteList.Add(byteFromHex);
        }
        byte[] byteArray = byteList.ToArray();

        //Convert byte-array to image file and return the image
        using (MemoryStream stream = new MemoryStream(byteArray))
        {
            return System.Drawing.Image.FromStream(stream);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:22:24.997

您可以使用[JSON.NET](http://james.newtonking.com/projects/json-net.aspx)库将 byte[] 序列化为字符串，然后将其转换为十六进制。然后在需要时使用相同的库将其反序列化回 byte[]。

我建议您将它作为 byte[] 存储在数据库中，因为它将使用至少两倍的空间作为字符串（十六进制的一个字节是 2 个字符，每个字节至少是 ASCII 或 UTF8 的一个字节）并且有JSON 格式的开销很小*。*

# facebook - Facebook获取最大图像大小的方法？

> ID：11688201
> 
> 赞同：0
> 
> 时间：2012-07-27T12:55:15.750
> 
> 标签：facebook

当一张图片上传到 Facebook 时，它会将图片的分辨率限制在较大尺寸的最大 2048 像素和较小尺寸的比例。但是，不能保证这种行为在不久的将来不会改变。
我的问题是：是否有 Facebook API 方法用于检索上传图像的最大尺寸？
我知道 Facebook 会在到达其服务器后减小图像大小，但在上传之前缩小图像很重要，因为上传是在移动环境中进行的，我不想浪费带宽来上传图像这将受到限制，因为这意味着浪费电池寿命和数据流量。
我可以将图像缩小到 2048 像素这个尺寸，但不能保证 Facebook 不会在不久的将来将最大接受尺寸提高到 4096。
那么，有没有靠谱的方法呢？谢谢！

# java - java中的“==”运算符如何检查以及检查什么？

> ID：11688203
> 
> 赞同：-3
> 
> 时间：2012-07-27T12:55:31.200
> 
> 标签：java, hash, operators, equals, hashcode

我已经坚持了一段时间了，实际上我有 2 个对象，根据我的说法是相同的，我已经覆盖了 hashCode 方法来为两者创建相等的哈希码，仍然当我使用“==”或比较它们是否相等时对象的等于（也使用“==”），它返回false给我，下面的场景应该完全解释:::

```
1)HashCode-->-626561382 AND 2)HashCode--->-626561382  
1)IdentityHashCode-->19640463
2)IdentityHashCode-->22330755  
1)Bean1=beans.OrdersBean@daa76e9a  AND 2)Bean2=beans.OrdersBean@daa76e9a  
Check MySelf for(==)-->false  
Check Object's Equals()-->false 
```

请解释一下为什么会这样？？？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-27T12:56:44.950

`==`运算符比较java中对象的引用（内存位置）...

如果你比较对象然后使用`.equals()`

```
if(obj1.equals(obj2)){

} 
```

*   [看这里](https://stackoverflow.com/questions/767372/java-string-equals-versus)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T12:57:51.393

要比较两个对象的相等值，您需要重写该`equals`方法。

其他人提到的`==`运算符比较引用（即它是完全相同的对象）

**解释**

如果您以同卵双胞胎 Ben 和 Adam 为例，`==`在比较两者时使用 an 将返回 false，因为 Ben 不是 Adam（即使它们看起来相同），如果您使用`.equals`并且比较基于外观，那么这将返回 true .

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T12:57:35.763

在Java`==`中用于比较引用。要评估两个对象是否等效，请使用[`equals`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#equals%28java.lang.Object%29).

**注意**如果您必须比较自定义对象，请考虑`equals`根据您的等效标准在您的类中覆盖。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T12:57:37.277

`.equals`从 parent的方法覆盖`Object`，这是为了“更深入”的比较，而`==`涉及检查引用（标识符）是否引用（以便对一个的更新适用于两者）相同的实例化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T16:32:17.967

**1\. 使用 '==' ：**

当你想检查两个引用变量是否引用同一个对象时，你应该在 java 中使用**==运算符。**例如 - （假设有一个名为**Person**的类）

```
Person person1 = new Person();
Person person2 = person1;

System.out.println(person1 == person2); // true 
```

在这里，由于我们只使用了一次**new**，因此在堆内存中只创建了一个对象，我们将它分配给一个引用变量 -> person1。在第二个语句中，我们将 person1 分配给 person2。所以实际上内存中只有一个对象，但 person1 和 person2 都指的是同一个对象。

[简而言之，我们可以说，类似于原语，== 比较变量中的值，在引用变量的情况下是实际对象的内存地址]。

**2\. 使用 '.equals()' ：**

当您想检查两个对象是否有意义相等时，请使用 .equals() 方法。例如 -

```
Person person1 = new Person();
Person person2 = new Person();

System.out.println(person1.equals(person2)); // false 
```

在这里，我们完全创建了两个不同的对象，因此它们在意义上并不相等。因此 equals() 方法将返回 false。

# cakephp - 如何在 CakePHP 调度程序过滤器中设置 cookie？

> ID：11688204
> 
> 赞同：0
> 
> 时间：2012-07-27T12:55:31.397
> 
> 标签：cakephp, cookies, dispatcher, cakephp-2.2

在我的应用程序中，我需要在应用程序工作开始时执行某种“自动登录”逻辑。在这个“自动登录”功能中，我做了很多操作，其中之一 - 使用 CookieComponent 设置 cookie。

当我在控制器或组件中使用此自动登录时 - 一切都很好，但是当我从调度程序过滤器执行相同操作时未设置 cookie。

我深入研究了 CakePHP 代码，发现当我尝试从调度程序过滤器设置 cookie 时，`$_cookies`属性为`CakeResponse`空。所以看起来调度程序过滤器创建了自己的`CakeResponse`，并且稍后重置，所以没有设置 cookie。

我的过滤器如下所示：

```
class UserLoadFilter extends DispatcherFilter 
{
    public $priority = 8;    
    public function beforeDispatch($event) {
        App::uses('AuthComponent', 'Controller/Component');
        if (!AuthComponent::user()) {
            App::uses('CustomAuthComponent', 'Controller/Component');
            //$controller = new AppController($event->data['request'], $event->data['response']);
            $auth = new CustomAuthComponent(new ComponentCollection(), Configure::read('Auth'));
            $auth->autoLogin();
        }
    }
} 
```

我也试过这样直接在 beforeDispatch 方法中设置 cookie：

```
App::uses('CookieComponent', 'Controller/Component');
$cookie = new CookieComponent(new ComponentCollection());
$cookie->write('test', 'TEST!', false, "1 day"); 
```

但这也没有任何意义。

我做错了什么？也许我只是没有看到一些简单的东西，但是我花了很多时间仍然无法解决这个问题。是否可以从这个地方设置cookie？

当然，我可以尝试只使用 setcookie，或者编写自己的 cookie 包装器，但我想使用 CakePHP 风格，使用 cookie 组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T19:03:48.103

这对我来说似乎是错误的。2.x 使用身份验证和授权对象，因此不需要 CustomAuthComponent（即组件部分）。相反，您创建定制的[身份验证和授权对象](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#creating-custom-authentication-objects)。

我看不出为什么必须在 beforeDispatcher() 中完成此操作。那么你的目标到底是什么？您要实施哪种身份验证？

根据您的评论进行编辑：

在您按照鲍里斯所说的那样识别用户并设置您的区域设置（如果您做得对的话）之后，只需重定向即可。因此，只需从 beforeFilter() 中的 cookie 中读取 uuid，基于此获取用户记录并使用用户记录进行“手动”登录，然后重定向。

你在 AuthComponent 中修改了什么？

# php - 添加到数组值

> ID：11688212
> 
> 赞同：3
> 
> 时间：2012-07-27T12:55:57.727
> 
> 标签：php, sql, arrays

我从mysql数据中得到：

```
$starcik_o = mysql_query("select id, mapa, miasto, nazwa_obiektu from oferty where id = 28");
        while($data = mysql_fetch_array($starcik_o, MYSQL_ASSOC)) $punkty[] = $data; 
```

我想在这个数组中添加另一个表，我试图这样做：

```
foreach ($punkty as $item)
        {
        $deserialized = unserialize($item['mapa']);
        $punkty['long'] = $deserialized['lng'];
        $punkty['lat'] = $deserialized['lat'];
        } 
```

但它不像我想要的那样工作，因为 var_dump($punkty); 给我看

```
array(3) 
{ 
    [0]=> array(4) 
    { 
    ["id"]=> string(2) "28" 
    ["mapa"]=> string(97) "a:3:{s:3:"lat";s:17:"49.21103723075132";s:3:"lng";s:18:"22.330280542373657";s:4:"zoom";s:2:"17";}" 
    ["miasto"]=> string(5) "Cisna" 
    ["nazwa_obiektu"]=> string(44) "Cisna - noclegi u Mirosławy w Bieszczadach" 
    } 
    ["long"]=> string(18) "22.330280542373657" 
    ["lat"]=> string(17) "49.21103723075132" 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T12:59:47.800

```
 foreach ($punkty as &$item)
    {
        $deserialized = unserialize($item['mapa']);
        $item['long'] = $deserialized['lng'];
        $item['lat'] = $deserialized['lat'];
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:00:44.490

采用

```
foreach ($punkty as $key => $item)
        {
        $deserialized = unserialize($item['mapa']);
        $punkty[$key]['long'] = $deserialized['lng'];
        $punkty[$key]['lat'] = $deserialized['lat'];
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T13:01:16.287

```
$starcik_o = mysql_query("select id, mapa, miasto, nazwa_obiektu from oferty where id = 28");
            while($data = mysql_fetch_array($starcik_o, MYSQL_ASSOC))
{
$punkty1[] = $data[' id'];
$punkty2[] = $data['mapa'];
$punkty3[] = $data['miasto'];
$punkty4[] = $data['nazwa_obiektu'];
.....
}
try this code 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T13:00:56.747

你的循环正在做它被告知要做的事情：它从每个项目中获取`lat`and`lng`字段并将其写入`$punkty`数组。

我假设您希望`lat`and`lng`字段位于每个单独的项目中，而不是数组的顶层。在这种情况下，将循环更改为：

```
foreach ($punkty as &$item) {   // added the '&' to reference the item
    $deserialized = unserialize($item['mapa']);
    $item['long'] = $deserialized['lng'];   // saving "long" to item
    $item['lat'] = $deserialized['lat'];    // saving "lat" to item
} 
```

# c++ - 如何绘制亮化边框（外发光效果）？

> ID：11688214
> 
> 赞同：5
> 
> 时间：2012-07-27T12:56:00.393
> 
> 标签：c++, algorithm, graphics, gdi+, gdi

我怎样才能用 gdi/gdi+ 画一个这样的浅色边框： ![在此处输入图像描述](../Images/a0fdc7f5fad5cd0fb7bf1415c1cea61d.png)

任何人都可以给我一个思路？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:35:35.957

使用 GDI+，我建议你使用 PathGradientBrush。它允许您用边缘周围的一系列颜色填充区域，这些颜色都向中心颜色混合。在这种情况下，您可能只需要 1 种边缘颜色。为圆角矩形创建一个 GraphicsPath 并使用 FillPath() 用 PathGradientBrush 填充它：

```
GraphicsPath graphicsPath;

//rect - for a bounding rect
//radius - for how 'rounded' the glow will look
int diameter = radius * 2;

graphicsPath.AddArc(Rect(rect.X, rect.Y, diameter, diameter) 180.0f, 90.0f);
graphicsPath.AddArc(Rect(rect.X + rect.Width - diameter, rect.Y, diameter, diameter), 270.0f, 90.0f);
graphicsPath.AddArc(Rect(rect.X + rect.Width - diameter, rect.Y + rect.Height - diameter, diameter, diameter), 0.0f, 90.0f);
graphicsPath.AddArc(Rect(rect.X, rect.Y + rect.Height - diameter, diameter, diameter), 90.0f, 90.0f);
graphicsPath.CloseFigure();

PathGradientBrush brush(&graphicsPath);
brush.SetCenterColor(centerColor); //would be some shade of blue, following your example
int colCount = 1;
brush.SetSurroundColors(surroundColor, &colCount); //same as your center color, but with the alpha channel set to 0

//play with these numbers to get the glow effect you want
REAL blendFactors[] = {0.0, 0.1, 0.3, 1.0};
REAL blendPos[] = {0.0, 0.4, 0.6, 1.0};
//sets how transition toward the center is shaped
brush.SetBlend(blendFactors, blendPos, 4);
//sets the scaling on the center. you may want to have it elongated in the x-direction
brush.SetFocusScales(0.2f, 0.2f);

graphics.FillPath(&brush, &graphicsPath); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:40:24.280

*   将边框绘制成比边框本身稍大的图像。
*   模糊它。
*   擦除边框的内部。
*   在模糊的图像上绘制边框。
*   将该图像绘制到目的地。

# asp.net - MVC 3 Routes：来自家庭控制器的动态内容 - 我哪里出错了？

> ID：11688227
> 
> 赞同：1
> 
> 时间：2012-07-27T12:56:45.870
> 
> 标签：asp.net, asp.net-mvc-3, c#-4.0, custom-routes

## 我的设置

我有一组正常方式的控制器，其中有它们常用的 CRUD 操作方法。这些控制器的示例是推荐、画廊和常见问题解答。这些在 Entity Framework 中有支持模型，例如 Testimonial、Gallery 和 FAQ。

您可以通过这种 URL 获得这些：/Galleries/Edit/2 到目前为止一切都很好，并且所有默认约定......

我还有一组需要在其中包含可编辑内容的页面，这些页面的内容通过实体框架从数据库中填充。他们使用称为“Page”的 EF 模型。这有一个内容属性 (html) 和一个名称属性，以便我可以匹配传入的请求。这些页面是主页、关于和价格页面。

我选择了 Home 控制器来执行此操作 - 我打算让索引 Action 通过 name 参数确定要从 DB 加载的页面：

```
 [AllowAnonymous]
    public ActionResult Index(string name = "Home")
    {
        // look up the page by name in the DB.
        var model = context.Pages.FirstOrDefault(p => p.Title == name);

        // trap errors.
        if (model == null)
        {
            return RedirectToAction("NotFound", "Error", new { aspxerrorpath = name } );
        }

        // normal path
        return View(model);
    } 
```

因此，理论上我可以向 Pages 表/DbSet 添加新项目，这些项目将正确映射到此控制器和操作。然后，我将为管理员添加一个编辑操作，以编辑与上述索引操作具有相同签名的内容。

* * *

## 问题

问题来自路由请求......

我有 2 条初始路线：

```
routes.MapRoute("DynamicAccess",
                "{name}/{action}",
                new { controller = "Home", action = "Index" });

routes.MapRoute("Default",
                "{controller}/{action}/{id}",
                new { controller = "Home", action="Index", id=UrlParameter.Optional}); 
```

当我转到“Galleries/”时，它会失败，因为它每次都通过 Home 控制器，如果我交换它们就会失败。我也通过家庭控制器收到对 Scripts/ 文件夹的请求......

* * *

## 我的临时解决方案

我当前的路线现在看起来像这样：

```
 routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        routes.IgnoreRoute("favicon.ico");

        routes.MapRoute("Gallery",
                        "Gallery/{action}/{id}",
                        new { controller = "Galleries", action = "Index", id = UrlParameter.Optional });

        routes.MapRoute("Testimonials",
                        "Testimonials/{action}/{id}",
                        new { controller = "Testimonials", action = "Index", id = UrlParameter.Optional });

        routes.MapRoute("FAQs",
                        "FAQs/{action}/{id}",
                        new { controller = "FAQs", action = "Index", id = UrlParameter.Optional });

        routes.MapRoute("DynamicAccess",
                       "{name}/{action}",
                       new { controller = "Home", action = "Index" });

        routes.MapRoute("Default",
                        "{controller}/{action}/{id}",
                        new { controller = "Home", action="Index", id=UrlParameter.Optional});

        routes.MapRoute("Root",
                        "",
                        new { controller = "Home", action = "Index" });

        routes.MapRoute("AdminAccess",
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional }, // Parameter defaults
            new { authenticated = new AuthenticatedAdminRouteConstraint() }); 
```

您可以在这里看到，我必须在动态解析的主路由的路由上方为我的每个静态页面声明一个路由。

* * *

## 问题

这对我来说看起来很笨拙 - 必须将每个非动态页面添加到我的路由表中。任何人都可以指出我这样做的更清洁的方式吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T09:07:22.967

为什么不对您的静态路由施加约束，这将允许不匹配的路由落入动态路由？

```
routes.MapRoute("default",
                "{controller}/{action}/{id}",
                new {controller="home", action="index", id=UrlParameter.Optional},
                new {controller="^(|home|gallery|testimonial|faq)$"});

routes.MapRoute("dynamic",
                "{name}/{action}",
                new {controller="home", action="index"}); 
```

您必须更改控制器以匹配约束中的单数名称，但除此之外，它应该可以工作。

# sql - 获取替换逗号分隔符的列的值

> ID：11688228
> 
> 赞同：0
> 
> 时间：2012-07-27T12:57:02.220
> 
> 标签：sql, tsql

如何获取在她的值中有逗号分隔符的列的每个值？

例子：

```
ID   ColumnUnified
1    12,34,56,78
2    80,99,70,56 
```

我想要的是查询以获取不带逗号的号码。如果可能，在列中。

```
12    34     56    78 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:04:31.430

这适用于任意数量的值[http://beyondrelational.com/modules/2/blogs/70/posts/10844/splitting-delimited-data-to-columns-set-based-approach.aspx](http://beyondrelational.com/modules/2/blogs/70/posts/10844/splitting-delimited-data-to-columns-set-based-approach.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:43:18.863

Madhivanan 的链接所指的解决方案非常有创意，但我在 SQL Server 2012 上遇到了与其中一列名称（开始）相关的小问题。我已经修改了他的答案中的代码来`StartPos`代替`Start`列名。

我不熟悉系统过程，但是对于那些对这个解决方案的工作原理感兴趣的人，我[在 SO 上](https://stackoverflow.com/questions/4273978/why-and-how-to-split-column-using-master-spt-values)`spt_values`找到了一个非常有用的过程描述。

最后，这是 Madhivana 回答的（略微）修改的代码：

```
CREATE TABLE #test(id int, data varchar(100))

INSERT INTO #test VALUES (1,'This,is,a,test,string')
INSERT INTO #test VALUES (2,'See,if,it,can,be,split,into,many,columns')

DECLARE @pivot varchar(8000)
DECLARE @select varchar(8000)

SELECT  @pivot = COALESCE(@pivot + ',', '') + '[col'
        + CAST(number + 1 AS VARCHAR(10)) + ']'
FROM    master..spt_values
WHERE   type = 'p'
        AND number <= ( SELECT  MAX(LEN(data) - LEN(REPLACE(data, ',', '')))
                        FROM    #test
                      )

SELECT  @select = '
    select p.*
    from (
    select
    id,substring(data, StartPos+2, endPos-StartPos-2) as token,
    ''col''+cast(row_number() over(partition by id order by StartPos) as varchar(10)) as n
    from (
    select
    id, data, n as StartPos, charindex('','',data,n+2) endPos
    from (select number as n from master..spt_values where type=''p'') num
    cross join
    (
    select
    id, '','' + data +'','' as data
    from
    #test
    ) m
    where n < len(data)-1
    and substring(data,n+1,1) = '','') as data
    ) pvt
    Pivot ( max(token)for n in (' + @pivot + '))p'

EXEC(@select)

DROP TABLE #test 
```

# .net - WPF 样式转换异常

> ID：11688236
> 
> 赞同：1
> 
> 时间：2012-07-27T12:57:31.030
> 
> 标签：.net, wpf, xaml, styles

我正在尝试定义许多样式元素可以引用的字体：

```
<System:String x:Key="FontFamilyDefault">Arial</System:String>
<System:Int32  x:Key="FontSizeDefault">18</System:Int32>
<SolidColorBrush x:Key="FontColourDefault" Color="Black"/> 
```

我的风格通过以下方式引用它：

```
<Style TargetType="{x:Type Control}" x:Key="myStyle1">
    <Setter Property="FontSize" Value="{StaticResource FontSizeDefault}" />
    <Setter Property="FontFamily" Value="{StaticResource FontFamilyDefault}" />
    <Setter Property="Foreground" Value="{StaticResource FontColourDefault}" />
</Style> 
```

并且控件引用了myStyle1：

```
<Style TargetType="TextBox" BasedOn="{StaticResource myStyle1}" /> 
```

我得到以下运行时异常： **无法将“System.String”类型的对象转换为“System.Windows.Media.FontFamily”。** 如果我注释掉：

```
<Setter Property="FontFamily" Value="{StaticResource FontFamilyDefault} 
```

然后在大小 conersion 上得到这个异常： **Specified cast is not valid**。

谁能建议如何将字符串转换为 fontfamily 以及如何在 xaml 中指定字体大小？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:02:05.923

您可以使用 FontFamily 类型创建一个 StaticResource ..

```
<FontFamily x:Key="CockpitFont" >Verdana</FontFamily> 
```

# c# - MVC 路由...如何设置我的控制器来处理 /configuration/building/add

> ID：11688237
> 
> 赞同：0
> 
> 时间：2012-07-27T12:57:34.000
> 
> 标签：c#, asp.net-mvc-3, razor, asp.net-mvc-routing

我有一个架构，其中有许多可以配置的对象。我想要的 URL 示例如下：

```
/configuration/building/add
/configuration/building/edit/1
/configuration/group/add
/configuration/group/edit/1 
```

我有一个配置控制器，但我如何拦截或处理`building/add`等等`building/edit/1`......如果是`AddBuilding`我可以简单地添加一个`AddBuilding()`函数，同样我如何让它工作`configuration/building/edit/`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T12:59:07.040

这是您可以为第一个执行的操作 - 打开您站点的 Global.asax.cs 文件并将其放在`RegisterRoutes` *标准*MVC 包罗万象的路线（使用该路线的路线`"{controller}/{action}/{id}"`）之前：

```
routes.MapRoute("AddBuilding", "configuration/building/add",
  new { controller = "Configuration", action = "AddBuilding" }); 
```

其他的将是相同的，但不同的名称（第一个参数）和操作，whislt 编辑路由但将包括`{id}`路由占位符和路由参数（但不是可选的 - 与 MVC 默认路由不同）：

```
routes.MapRoute("EditBuilding", "configuration/building/edit/{id}",
  new { controller = "Configuration", action = "EditBuilding" }); 
```

通过保留`id`关闭路由默认值，我们将其设为必需。我假设这一点，因为我猜 Url`/Building/Edit`在逻辑上没有映射到任何东西。

***作为一个侧面节点***- 在你的 url 中包含动词并不真正符合 REST 方法，但是你并不是第一个这样做的人（我也包括在内）。也就是说 - 尝试保持它通常会让你的生活更轻松，因为你会发现你的控制器会更干净，你的路由表也会更干净，并且你的网站的 URL 空间会更小，层次更明显。最后一点是 -*在开发时缩放网站很方便*，但更重要的是它对 SEO 至关重要。

所以（我已经对这段代码进行了大量评论，希望足以提供一些知识！）：

```
public class ConfigurationController{

  ////HTTP GET /Buildings
  /// DISPLAYS BUILDINGS
  public ActionResult Buildings(){
    //get model and return view that shows all buildings with perhaps a 
    //partial in that for creating a new one (or you can use another action)
    //The HTML form on that view will POST to the URL handled by the method below.
  }

  ////HTTP POST /Buildings
  /// CREATES A NEW BUILDING
  //use ActionName here to make this and the method above accessible through
  //the same URL
  [ActionName("Buildings")]
  [HttpPost]
  public ActionResult CreateBuilding(BuildingModel model){
    //validate the model, create the object and return the same
    //view as the Buildings() method above (after re-loading all the
    //buildings.  Or, you can issue a redirect, effectively transferring
    //control back to the method above.
  }

  ////HTTP GET /Configuration/Building/id
  ///DISPLAYS A BUILDING
  public ActionResult Building(int id){
    //get building and return view, which also contains Edit functionality
  }

  ////HTTP POST /Configuration/Building/id
  ///EDITS A BUILDING
  [HttpPost]
  public ActionResult Building(int id, BuildingModel model){
    //very similar to the CreateBuilding method - and again you might
    //either simply return a building view at the end, or redirect
    //to the method above.

    //Note that we don't need [ActionName] here because this and the
    //get method can have the same method names, because they are overloads
    //i.e. since they have different method signatures we can call them the same
    //thing in code.
  }
} 
```

为了简短起见，我已经省略了小组内容，希望您能够从那里了解如何做到这一点。

有了这个，我们最多只需要 Global.asax.cs 中的两条路线 - 尽管我认为顺序很重要：

```
//handles both GET and POST to this URL, i.e. our view & edit operations
routes.MapRoute("IndividualBuilding", "/configuration/buildings/{id}", 
  new { controller = "Configuration", action = "Building" });
routes.MapRoute("Buildings", "/configuration/buildings",
  new { controller = "Configuration", action = "Buildings" }); 
```

现在我们使用 HTTP 动词来表示我们打算对特定请求执行的操作，并且我们的 URL 变得更加“合乎逻辑”。

***另一个重构***

如果您想变得“聪明”，您可以将建筑物和团体归为两条路线

```
//handles both GET and POST to this URL, i.e. our view & edit operations
routes.MapRoute("Individual", "/configuration/{controller}/{id}", 
  new { controller = "Configuration", action = "List" });
//again, handles GET and POST
routes.MapRoute("Collection", "/configuration/{controller}",
  new { controller = "Configuration", action = "Single" }); 
```

现在你可以像我上面展示的那样做建筑物和组控制器，但是用 和 替换（记住`Buildings`第二种`ActionName`方法的属性）。`List``Building``Single`

最后要考虑的一件事是，由于默认的 MVC 路由：

```
routes.MapRoute("Default", "{controller}/{action}/{id}", 
  new { controller = "Default", action="Home", id = UrlParameter.Optional }); 
```

您的两个控制器仍然可以通过`/Buildings/Single/1`或`/Groups`例如路由。这是一个小问题（欺骗内容不是很好的 SEO），但它可能是人们可以用来嗅探您的网站的东西。

如果您绝对想阻止这种其他 url 格式；您*可以*取出默认路由，这意味着您必须明确路由其他可能已经工作的东西（不是一个大问题）。

或者你可以使用一个小技巧，让它变得更加困难：使用`[ActionName]`路由名称中不允许通过 IIS 的字符的显式属性 - 例如`":Single"`or `":List"`，然后从几个代码块中相应地调整我们的两条路由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:04:13.117

因此，首先您可以创建一个控制器操作`AddBuilding()`，如您所暗示的那样。

然后在您的`Global.asax`文件中的`RegisterRoutes`方法中，您可以添加如下路线：

```
routes.MapRoute(
   "AddBuilding", // Route name
   "configuration/building/add", // URL with parameters
   new { controller = "Configuration", action = "AddBuilding" }
); 
```

您不应该因为您的默认路由映射，您可能仍然能够使用“/configuration/addbuilding”访问该页面。

您编辑一个将是类似的期望您将要映射此`ID`值：

```
routes.MapRoute(
   "EditBuilding", // Route name
   "configuration/building/edit/{id}", // URL with parameters
   new { controller = "Configuration", action = "AddBuilding", id = UrlParameter.Optional }
); 
```

我认为您需要使用默认`MapRoute`设置添加此代码，以确保不优先

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:06:08.700

另一种方法是创建一个配置 MVC `area`，然后在其中创建一个建筑物和`controller`组`Area`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-29T19:53:34.710

您可以通过 ASP.NET MVC 5 中的属性路由来做到这一点。如下所示；

```
// eg: /reviews
[Route(“reviews”)]
public ActionResult Index() { … }
// eg: /reviews/5
[Route(“reviews/{reviewId}”)]
public ActionResult Show(int reviewId) { … }
// eg: /reviews/5/edit
[Route(“reviews/{reviewId}/edit”)]
public ActionResult Edit(int reviewId) { … } 
```

您也可以为同一个控制器添加多个路由。详情请查看[这里](https://blogs.msdn.microsoft.com/webdev/2013/10/17/attribute-routing-in-asp-net-mvc-5/)

# java - Java 自动完成不显示我在接口中创建的方法

> ID：11688243
> 
> 赞同：0
> 
> 时间：2012-07-27T12:58:04.887
> 
> 标签：java, eclipse, interface, content-assist

我正在尝试从类型为`interface`.

```
 private Car Ferrari;
    Ferrari.startEngine(); 
```

`Car`是`interface`具有名为 的方法的类`startEngine()`。

我也有一个实现的类`Car`，让我们调用它`CarImplementation`。所以当我打电话时`Ferrari.startEngine()`，我假设`startEngine()`CarImplementation 将被调用。

但是，在 Eclipse 中，我在`startEngine()`. 我收到一条错误消息说

> 未定义 Car 类型的 startEngine() 方法

当我`startEngine()`在我的接口和实现接口的类中都有它时，它是如何未定义的？

我还注意到，当我在 Ferrari 后面键入点后，我的`startEngine()`方法**没有**出现在 Eclipse 的内容辅助中。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:05:30.293

`Ferrari`不是 a `Car`，`null`直到你将它分配给一个实际的对象。

```
Car ferrari = new CarImplementation();
ferrari.startEngine(); // works 
```

（另外，根据 Sun Java 标准，我将您的对象重命名为`ferrari`没有上限）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:01:43.450

您需要创建一个实例`CarImplementation`来使用它的实现——接口没有它们定义的方法的实现。

所以如果它是一个非静态方法，你想试试这个：

```
Private Car ferrari = new CarImplementation();
ferrari.startEngine(); 
```

# android - 安卓虚拟WIFI

> ID：11688246
> 
> 赞同：2
> 
> 时间：2012-07-27T12:58:24.740
> 
> 标签：android, wifi, virtual

是否可以在 Android 智能手机上创建虚拟 WIFI 设备？在 PC 上，您可以这样做，因为有虚拟 Wifi 卡，所以它不可能同时连接到 2 个（或更多）网络。我现在想知道这是否也可以在 Android 上实现。如果可以在 Android 上创建这样的虚拟设备，有没有人不知道？

背景是我想将智能手机用作两个 WIFI 热点之间的“桥梁”，以便您能够将数据从 WIFI 1 中的智能手机发送到 WIFI 2 中的智能手机。这是一个虚拟 Wifi 实现的链接来自微软[http://research.microsoft.com/en-us/um/redmond/projects/virtualwifi/](http://research.microsoft.com/en-us/um/redmond/projects/virtualwifi/)。在冲浪时我发现了这一点，我想知道这是否也可以在智能手机（尤其是 Android）上实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:20:44.730

您的方法似乎很复杂……我将两个或多个设备连接到 android 设备的方法是创建一个 Wi-Fi 热点，然后将移动设备用作路由器。

# java - 卡在线程上，放弃 - Android

> ID：11688249
> 
> 赞同：0
> 
> 时间：2012-07-27T12:58:48.367
> 
> 标签：java, android, dalvik

我的班级里面有一个`run-method`扩展`Thread`的 . 代码片段：

```
 public void run() {
        Log.i(TAG, "BEGIN mConnectedThread");
        byte[] buffer = new byte[1024];
        int bytes;

        Log.i("INSIDE RUN: ", "STARTING LISTNING FOR INPUTSTREAM" ); 
        // Keep listening to the InputStream while connected

        while (true) {
            try {
                // Read from the InputStream
                bytes = mmInStream.read(buffer);

                //Log.d("BYTES FROM THE DEVICE: ", Integer.toString(bytes));

            } catch (IOException e) {
                Log.e(TAG, "disconnected", e);

                break;
            }
        }
    } 
```

一段时间后，LogCat 给了我以下错误：

```
07-27 14:51:55.860: E/dalvikvm(17271): threadid=2: stuck on threadid=1187, giving up 
```

我认为这条错误消息试图告诉我的是线程正在 a`spinlock`和 do`Busy waiting`中，就操作系统相关的东西而言。但是为什么要忙等待，我实际上正在做一些事情，阅读流。谁能指出我正确的方向？谢谢！

# jquery - 使用 jQuery 为 div 设置相等的高度

> ID：11688250
> 
> 赞同：40
> 
> 时间：2012-07-27T12:58:57.010
> 
> 标签：jquery, html, height, equals

我想用 jQuery 为 div 设置相等的高度。所有的 div 可能有不同的内容量和不同的默认高度。这是我的 html 布局示例：

```
<div class="container">
    <div class="column">This is<br />the highest<br />column</div>
    <div class="column">One line</div>
    <div class="column">Two<br />lines</div>
</div>
<div class="container">
    <div class="column">One line</div>
    <div class="column">Two<br>lines</div>
    <div class="column">One line</div>
</div> 
```

我正在使用下一个 jQuery 函数设置高度：

```
$(document).ready(function(){

    var highestBox = 0;
        $('.container .column').each(function(){  
                if($(this).height() > highestBox){  
                highestBox = $(this).height();  
        }
    });    
    $('.container .column').height(highestBox);

}); 
```

这很好用，但在我的情况下不行，因为我希望所有“列”仅在一个“容器”内相等。这意味着在第一个容器中，所有框必须与第一个 div 一样高，但在第二个容器中，它们必须等于第二列。

所以问题是——我应该如何修改我的 jQuery 来达到这个目的？

谢谢！

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-07-27T13:08:09.730

**回答您的具体问题**

您的代码正在检查任何容器中的所有列，您需要做的是：

*   循环遍历每个容器
    *   获取该容器内每一列的高度
    *   找到最高的
    *   在移动到下一列之前，将该高度应用于该容器中的每一列。

> 注意：尝试提供您的问题的示例 jsfiddle，它使我们能够更轻松地帮助您并理解问题，您可以立即看到有效的解决方案，并鼓励更快的响应。

**快速（粗略）示例**

```
$(document).ready(function(){

    // Select and loop the container element of the elements you want to equalise
    $('.container').each(function(){  

      // Cache the highest
      var highestBox = 0;

      // Select and loop the elements you want to equalise
      $('.column', this).each(function(){

        // If this box is higher than the cached highest then store it
        if($(this).height() > highestBox) {
          highestBox = $(this).height(); 
        }

      });  

      // Set the height of all those children to whichever was highest 
      $('.column',this).height(highestBox);

    }); 

});
```

```
.container { border 1px solid red; }
.column { border: 1px solid blue; float:left; width: 30%; text-align:center; }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<div class="container">
    <div class="column">This is<br />the highest<br />column</div>
    <div class="column">One line</div>
    <div class="column">Two<br />lines</div>
</div>
<div class="container">
    <div class="column">One line</div>
    <div class="column">Two<br>lines</div>
    <div class="column">One line</div>
</div>
```

> **图书馆！**
> 
> 这是我发现的一个库，如果你想要一些更聪明的均衡控制，它看起来很有希望
> 
> [http://brm.io/jquery-match-height-demo/](http://brm.io/jquery-match-height-demo/)

* * *

解决@Mem 的问题

> **问题**：`$(document).ready()`如果您有需要加载的图像又会修改容器的高度，是否会起作用？

**图像加载后均衡高度**

如果您正在加载图像，您会发现此解决方案并不总是有效。这是因为[`document.ready`在尽可能早的时间被触发](https://developer.mozilla.org/en-US/docs/Web/Reference/Events/DOMContentLoaded)，这意味着它不会等待外部资源（例如图像）被加载。

当您的图像最终加载时，它们可能会在均衡脚本运行后扭曲其容器的高度，导致它看起来也不太工作。

**用图像解决均衡高度**

1.  绑定到图像加载事件

这是最好的解决方案（在撰写本文时），涉及绑定到`img.load`事件。您所要做的就是计算有多少 img `$('img').length`，然后为每个img 计数`load`，`-1`从该计数直到您达到零，然后触发均衡器。

`load`如果图像在缓存中，此处的警告可能不会在所有浏览器中触发。看看google/github，应该有一个解决方案脚本在那里。在撰写本文时，我发现[了来自 Alexander Dickson 的 waitForImages](https://github.com/alexanderdickson/waitForImages)（未经测试，这不是背书）。

2.  另一个更可靠的解决方案是[`window.load`](https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers.onload)事件。这通常应该始终有效。但是，如果您查看[文档](https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers.onload)，您会注意到在加载所有外部资源后会触发此事件。这意味着如果您的图像已加载但有一些 javascript 等待下载，则在完成之前不会触发。

如果您异步加载大部分外部组件并且巧妙地最小化、压缩和分散负载，您可能不会对这种方法有任何问题，但是突然变慢的 CDN（一直发生）可能会导致问题。

在这两种情况下，您都可以采取愚蠢的方法并应用回退计时器。让均衡脚本在设定的几秒钟后自动运行，以防事件未触发或速度慢到您无法控制的情况。这不是万无一失的，但实际上，如果您正确调整计时器，您将通过此回退满足 99% 的访问者。

**多年后，这仍然得到了支持，如今，随着 flexbox 的广泛支持，您可能只想为此考虑纯 CSS，除非您使用 JS 有特定原因**

```
.container {
  display: flex;
  border: 2px dashed red;
  margin: 10px 0;
}

.container > .column { 
 padding: 10px;
}

.container.fill-width {
  justify-content: stretch;
}

.container.fill-width>.column {
  flex-grow: 1
}

.container>.column:nth-child(1) {
  background: yellow;
}

.container>.column:nth-child(2) {
  background: blue;
}

.container>.column:nth-child(3) {
  background: green;
}
```

```
<div class="container">
  <div class="column">Some<br>text</div>
  <div class="column">Some<br>more<br>text<br>here</div>
  <div class="column">One line</div>
</div>
<div class="container">
  <div class="column">Some<br>more<br>even<br>longer<br>text<br>here</div>
  <div class="column">Some<br>text</div>
  <div class="column">One line</div>
</div>
<div class="container fill-width">
  <div class="column">Some<br>more<br>text<br>here</div>
  <div class="column">Some<br>text</div>
  <div class="column">One line</div>
</div>
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-27T13:08:46.330

```
$(document).ready(function(){

    $('.container').each(function(){  
        var highestBox = 0;

        $(this).find('.column').each(function(){
            if($(this).height() > highestBox){  
                highestBox = $(this).height();  
            }
        })

        $(this).find('.column').height(highestBox);
    });    

}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-27T13:10:25.737

你需要这个：

```
$('.container').each(function(){  
     var $columns = $('.column',this);
     var maxHeight = Math.max.apply(Math, $columns.map(function(){
         return $(this).height();
     }).get());
     $columns.height(maxHeight);
}); 
```

*解释*

*   以下代码段构造了一个高度数组：

    ```
    $columns.map(function(){
        return $(this).height();
    }).get() 
    ```

*   `Math.max.apply( Math, array )`找到数组项的最大值

*   `$columns.height(maxHeight);`将所有列的高度设置为最大高度。

[现场演示](http://jsfiddle.net/kP7XC/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-09-26T06:44:15.313

重要改进！（我添加了 $(this).height('auto'); 在测量高度之前 - 我们应该将其重置为自动。然后我们可以在调整大小时使用此功能）

```
function equalheight () {
            $('.cont_for_height').each(function(){  

                var highestBox = 0;
                $('.column_height', this).each(function(){

                    var htmlString = $( this ).html()

                    ;

                $(this).height('auto');

                    if($(this).height() > highestBox) 
                       highestBox = $(this).height(); 
                });  

                $('.column_height',this).height(highestBox);

        });  

        } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-07-21T10:10:55.417

这是我在同一高度设置块的版本...例如，您有一个 div 包含名称为“col”的 div

```
$('.col').parent().each(function() {
    var height = 0,
        column = $(this).find('.col');
    column.each(function() {
        if ($(this).height() > height) height = $(this).height();
    });
    column.height(height);
}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-08-14T15:38:43.223

You need imagesLoaded if the container have images inside. This works for responsive too.

```
$(document).ready(function () { 
     equalHeight('.column');
});
$(window).resize(function(){equalHeight('.column');});

function equalHeight(columnClass){
    $('.eq-height-wrap').imagesLoaded(function(){
        $('.eq-height-wrap').each(function(){  

            var maxHeight = Math.max.apply(null, $(this).find(columnClass).map(function ()
            {
                return $(this).innerHeight();
            }).get());

            $(columnClass,this).height(maxHeight);
        });
    });
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-21T06:25:13.860

您也可以以这种方式编写函数这有助于一次构建您的代码，只需在最后添加类名或 ID

```
function equalHeight(group) {
               tallest = 0;
               group.each(function() {
                  thisHeight = jQuery(this).height();
                  if(thisHeight > tallest) {
                     tallest = thisHeight;
                  }
               });
               group.height(tallest);
            }
            equalHeight(jQuery("Add your class")); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-13T08:16:45.873

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-05-19T05:16:22.883

```
 <script>
function equalHeight(group) {
   tallest = 0;
   group.each(function() {
      thisHeight = $(this).height();
      if(thisHeight > tallest) {
         tallest = thisHeight;
      }
   });
   group.height(tallest);
}
$(document).ready(function() {
   equalHeight($(".column"));
});
</script> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-07-04T13:32:31.250

So, below the jquery script to set the equal height to column which Math.max will calculate the two divs height and takes the highest height either it may be left or right.

```
$(document).ready(function() {
var Equalheights = Math.max($(“#left”).height(), $(“#right”).height());
$(“#left”). Equalheights(d);
$(“#right”). Equalheights(d);
});
Highest height will be assigned to both left and right divs 
```

[Live Demo](http://webdesignersdairy.com/setting-equal-heights-for-a-column-using-jquery/)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-01-11T17:05:23.523

I wish i'd read this post before I (with help from Earl) created this one

```
setMaxHeightForTitles($column, $title) {
      var maxHeight = 0;
      $column.find($title)
      .each(function(index, title){
        var height = $(title).height();
        if  (height > maxHeight) maxHeight = height;
      })
      .each(function(index, title){
        $(title).height(maxHeight);
      });
  } 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-12-27T12:59:21.017

Here is what worked for me. It applies the same height to each column despite their parent div.

```
$(document).ready(function () {    
    var $sameHeightDivs = $('.column');
    var maxHeight = 0;
    $sameHeightDivs.each(function() {
        maxHeight = Math.max(maxHeight, $(this).outerHeight());
    });
    $sameHeightDivs.css({ height: maxHeight + 'px' });
}); 
```

[Source](https://stackoverflow.com/a/2619843/2734491)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-07-27T13:03:23.907

您可以使用`.parent()`API 访问每个单独的容器。

像，

```
var highestBox = 0;
        $('.container .column').each(function(){  
                if($(this).parent().height() > highestBox){  
                highestBox = $(this).height();  
        }
    }); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-05-23T23:08:36.720

There is a jQuery plugin for this exact purpose: [https://github.com/dubbs/equal-height](https://github.com/dubbs/equal-height)

If you want to make all columns the same height, use:

```
$('.columns').equalHeight(); 
```

If you want to group them by their top position, eg. within each container:

```
$('.columns').equalHeight({ groupByTop: true }); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-09-19T07:25:09.120

```
function setEqualHeight(columns) {
  var tallestColumn = 0;

  columns.each(function(){
    var currentHeight = $(this).height();

    if(currentHeight > tallestColumn){
      tallestColumn  = currentHeight;
    }
  });

  columns.height(tallestColumn);
}

=> setEqualHeight($('.column')); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-04-10T14:16:44.710

```
// Select and loop the container element of the elements you want to equalise
        $('.equal').each(function(){  

          // Cache the highest
          var highestBox = 0;

          // Select and loop the elements you want to equalise
          $('.col-lg-4', this).each(function(){

            // If this box is higher than the cached highest then store it
            if($(this).height() > highestBox) {
              highestBox = $(this).height(); 
            }

          });  

          // Set the height of all those children to whichever was highest 
          $('.col-lg-4',this).height(highestBox);

        }); 

    }); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-09-07T13:02:49.590

```
<div class('a')>
   <div class('.cols-to-eq')></div>
   <div class('.cols-to-eq')></div>
   <div class('.cols-to-eq')></div>
   <div class('.cols-to-eq')></div>
</div>
<div class('b')>
   <div class('.cols-to-eq')></div>
   <div class('.cols-to-eq')></div>
   <div class('.cols-to-eq')></div>
   <div class('.cols-to-eq')></div>
</div>
var a = ['.a','.b'];
a.forEach(function(value) {
    var column = 0;
    $(value).find('.cols-to-eq').each(function(){
        if($(this).height() > column){
            column = $(this).height();
        }
    });
    $(value).find('.cols-to-
    eq').attr('style','height:'+column+'px');
   }); 
```

# c# - 如何在 sql 程序中识别和发送新数据

> ID：11688254
> 
> 赞同：0
> 
> 时间：2012-07-27T12:59:07.060
> 
> 标签：c#, winforms, sql-server-2008

`C#`我用, ,编写了一个程序`Sql-Server-2008`，`.Net 4`并安装在两个具有空间距离的系统上。

我想将新信息（数据`sql`）从 a`program1`发送到`program2`。如何检测我们在中提供任何新信息（数据`sql`）`program1`并将其发送到`sql`中`program2`？

# android - Android：单击小部件时活动未启动

> ID：11688258
> 
> 赞同：0
> 
> 时间：2012-07-27T12:59:33.117
> 
> 标签：android, android-activity, widget

我有一个布局有两个按钮的小部件。我的代码如下，

```
public void onReceive(Context context, Intent i) {

    AppWidgetManager mgr = AppWidgetManager.getInstance(context);

    Intent intent = new Intent(context, Activity1.class);
    PendingIntent pendingLayout = PendingIntent.getActivity(context, 0, intent, 0);

    Intent searchIntent = new Intent(context, Activity2.class);
    PendingIntent searchPendingLayout = PendingIntent.getActivity(context, 0, searchIntent, 0);

    RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.searchwidget);

    views.setOnClickPendingIntent(R.id.widgetbutton, pendingLayout);
    views.setOnClickPendingIntent(R.id.widgetsearch, searchPendingLayout);

    ComponentName comp = new ComponentName(context,
            RecentTaskWidget.class.getName());

    mgr.updateAppWidget(comp, views);
} 
```

widgetbutton 和 widgetsearch 是布局中的两个视图。我从 remoteviews 对象中获取相应的视图，并将挂起的布局添加到每个视图中。但是，活动尚未开始。代码有什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:44:18.030

覆盖`onUpdate()`您的方法`AppWidgetProvider`并将此代码添加到它的主体：

```
@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    AppWidgetManager mgr = AppWidgetManager.getInstance(context);
    Intent intent = new Intent(context, Activity1.class);
    PendingIntent pendingLayout = PendingIntent.getActivity(context, 0, intent, 0);
    Intent searchIntent = new Intent(context, Activity2.class);
    PendingIntent searchPendingLayout = PendingIntent.getActivity(context, 0, searchIntent, 0);
    RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.searchwidget);
    views.setOnClickPendingIntent(R.id.widgetbutton, pendingLayout);
    views.setOnClickPendingIntent(R.id.widgetsearch, searchPendingLayout);
    ...
    appWidgetManager.updateAppWidget(appWidgetIds, views);
} 
```

您可以查看[此页面](http://www.helloandroid.com/files/xmaswidget/android_howto-hellowidget.pdf)以获取更多详细信息。

# zend-framework2 - ZendFramework 2 中的 ServiceNotFoundException，来自 Rob Allen 的示例

> ID：11688260
> 
> 赞同：8
> 
> 时间：2012-07-27T12:59:40.050
> 
> 标签：zend-framework2

在过去的几周里，我一直在关注 ZF2，尤其是[Rob Allen 的“Album”示例](http://akrabat.com/wp-content/uploads/Getting-Started-with-Zend-Framework-2.pdf)，我创建了示例 DB-'zf2tutorial' 和示例表-'album'，当我使用 php-mysql 时，它可以很好地获取所有项目，所以数据库中的数据有问题。

我的 local.php 看起来像这样 **config.autoload/local.php：**

```
return array(
    'db' => array
    (
        'driver'         => "Pdo",
        'dsn'            => "mysql:dbname=zf2tutorial;hostname=localhost",
        'username'       => "user", //here I added my valid username 
        'password'       => "password", //here I added my valid password 
        'driver_options' => array
        (
            PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES 'UTF8'"
        ),
    ),
); 
```

模块.php **模块/相册/Model.php

```
<?php
namespace Album;

use Album\Model\AlbumTable;

class Module 
{
    public function getAutoloaderConfig() 
    {
        return array(
            'Zend\Loader\ClassMapAutoloader' => array(
                __DIR__ . '/autoload_classmap.php',
            ),
            'Zend\Loader\StandardAutoloader' => array(
                'namespaces' => array(
                    __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
                ),
            ),
        );
    }

    public function getConfig() 
    {
        return include __DIR__ . '/config/module.config.php';
    }

    public function getServiceConfiguration() 
    {
        return array(

            'factories' => array(

                'album-table' => function($sm) //also tried this 'Album\Model\AlbumTable' =>  function($sm)
                {
                    $dbAdapter = $sm->get('db-adapter');//also tried this $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                    $table = new AlbumTable($dbAdapter);
                    return $table;
                },
            ),
        );
    }  
} 
```

我只是想检查 zf2turorial/album 是否有效，它是否会抛出这个错误，这与 stackoverlow 中的[这篇](https://stackoverflow.com/questions/11355126/how-do-i-get-the-service-manager-in-zend-framework-2-beta4-to-create-an-instance)文章类似。

它抛出的错误是： **附加信息：Zend\ServiceManager\Exception\ServiceNotFoundException**

```
File:
..\vendor\zendframework\zendframework\library\Zend\ServiceManager\ServiceManager.php:392
Message:
Zend\ServiceManager\ServiceManager::get was unable to fetch or create an instance for Album\Model\AlbumTable 
```

我也遵循了 ZF2 Beta 5 教程，但仍然遇到这个问题。如果有人有解决方案，请与我们分享。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T22:31:45.897

好像有人忘记更新 zf2 中的最新更改。

解决方案：

文件 module/Album/Module.php 必须包含以下内容：

```
<?php

namespace Album;

use Album\Model\AlbumTable;
use Zend\ModuleManager\Feature\ServiceProviderInterface;

class Module implements ServiceProviderInterface 
```

那么你必须重命名

```
public function getServiceConfig() 
```

至

```
public function getServiceConfiguration() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T23:18:12.877

public function getServiceConfiguration() 不是正确的函数名

```
rename getServiceConfiguration() to getServiceConfig() 
```

虽然这不是强制性的，但您应该将类​​ Module 声明为

```
class Module implements ServiceProviderInterface 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T00:27:20.810

我不确定，但尝试将代码放入

config.autoload/ **global.php** : 像这样

```
return array(
    'db' => array(

        'driver'         => 'Pdo',
        'dsn'            => 'mysql:dbname=kd_tutorial;host=localhost',
        'driver_options' => array(
            PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
        ),
    ),
    'service_manager' => array(
        'factories' => array(
            'Zend\Db\Adapter\Adapter'
                    => 'Zend\Db\Adapter\AdapterServiceFactory',
        ),
    ),
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-05T05:59:19.503

在尝试按照 zend 教程实现代码时，我遇到了同样的问题。主要原因是订单文件夹

```
module
    ModuleX
        config
        src
            ModuleX //may be you forget this one
                Controller
                Factory
                Model
                ...
        view
        Module.php 
```

在 Module.php 中，getConfig()、getAutoloaderConfig() 足以运行

```
class Module implements AutoloaderProviderInterface, ConfigProviderInterface{
public function getAutoloaderConfig(){
    return array(
        'Zend\Loader\StandardAutoloader' => array(
            'namespaces' => array(
                __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
            ),
        ),
    );
}

public function getConfig(){
    return include __DIR__ . '/config/module.config.php';
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-08T16:09:39.213

Just got the same issue.

```
Zend\ServiceManager\Exception\ServiceNotFoundException: Zend\ServiceManager\ServiceManager::get was unable to fetch or create an instance for Cache\Model\UniversityStorage 
```

In my case the problem was, that PHPUnit could not find the key `Cache\Model\UniversityStorage` in the service manager (registry) because it's being added in the `Module` class of the `Cache` module and the `Cache` module was missing in the PHPUnit config file and was also not being loaded:

**/module/Application/test/phpunit.config.php**

```
<?php
return array(
    'modules' => array(
        'Application',
        'Cache', // <- was missing
    ),
    'module_listener_options' => array(
        'config_glob_paths'    => array(
            '../../../config/autoload/{,*.}{global,local}.php',
        ),
        'module_paths' => array(
            'module',
            'vendor',
        ),
    ),
); 
```

I've added the `Cache` module to the module list. Now it works.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T06:07:59.530

使用以下代码修改 config/autoload/global.php：

```
return array(
    'db' => array(
        'driver'         => 'Pdo',
        'dsn'            => 'mysql:dbname=YourDBName;host=localhost',
        'driver_options' => array(
            PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
        ),
    ),
    'service_manager' => array(
        'factories' => array(
            'Zend\Db\Adapter\Adapter'
                    => 'Zend\Db\Adapter\AdapterServiceFactory',
        ),
    ),
); 
```

并且您应该将数据库凭据放在 config/autoload/local.php 中，以便它们不在 git 存储库中（因为 local.php 被忽略）：

```
return array(
    'db' => array(
        'username' => 'YourDBUsername',
        'password' => 'YourDBPassword',
    ),
); 
```

如果您想了解更多详细信息，请参阅[链接 1](http://framework.zend.com/manual/2.0/en/user-guide/database-and-models.html#using-servicemanager-to-configure-the-table-gateway-and-inject-into-the-albumtable)或[链接 2](http://framework.zend.com/manual/2.0/en/user-guide/database-and-models.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-14T13:14:57.773

问题是在 config/autoload/global.php 中，该服务被命名为“Zend\Db\Adapter\Adapter”，而在 module/Album/Module.php 中它正在搜索“Zend\Db\Adapter”（缺少额外的 \Adapter ）。

像这样在 module/Album/Module.php 中添加缺少的“\Adapter”为我修复了它。

```
 'AlbumTableGateway' => function($sm) {
                $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter'); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-13T21:28:44.713

在`module/Album/src/Album/Model/Album.php`中，请改用：

`array('name' => 'striptags'), array('name' => 'stringtrim'),`

请参阅 Zend 创建的上述命名空间`vendor/zendframework/zendframework/library/Zend/Filter/FilterPluginManager.php`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-21T15:35:21.000

如果您在不同的模块中遇到类似的错误并且代码似乎正确，那么在 composer.json 中添加一个条目

“专辑\”：“模块/专辑/src/”

在这样的 autoload 和 autoload-dev 部分，其中 Album 是您的模块的名称

```
"autoload": {
    "psr-4": {
        "Application\\": "module/Application/src/",
        "Album\\": "module/Album/src/"

    }
},
"autoload-dev": {
    "psr-4": {
        "ApplicationTest\\": "module/Application/test/",
        "Album\\": "module/Album/src/"
    }
}, 
```

在此之后运行“作曲家更新”并重新加载页面。检查错误是否消失。

# c# - 如何创建/皮肤 C# UI？

> ID：11688261
> 
> 赞同：-1
> 
> 时间：2012-07-27T12:59:44.937
> 
> 标签：c#, winforms, user-interface, user-controls

我已经在 C# 项目上工作了一段时间，我觉得它需要改变它的外观。

我找到了一个我非常喜欢的 UI 套件，如下所示： http: [//medialoot.com/item/transparent-ui-kit/](http://medialoot.com/item/transparent-ui-kit/)

有谁知道如何做到这一点？

谢谢

编辑：我使用 WinForms

EDIT2：也许我应该转换为 WPF？这是可行的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:04:54.007

您可以对最常见的控件进行子类化并自己绘制它们的外观。但是，除非对于新颖的应用程序，我怀疑您的用户会感谢您这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:05:28.093

如果您没有很好的设计技能并且知道如何创建此类模板，最好购买它们。

而 C# 只是一种语言。您正在寻找为 ASP.NET 网站/应用程序或 Windows 窗体创建模板和皮肤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:12:26.143

您的示例是一个控件库。要获得这样的外观，您必须创建或获取类似的控件库并替换项目中的所有控件才能获得该外观。

如果您想更新颜色（背景、前景等）等，您可以创建一个通过控件递归的类，并使用反射和 switch 语句设置设置来处理每个控件。然后在显示之前在每个表单上运行它。关于这一点要注意一点，一些控件不尊重您的更改并被操作系统的主题覆盖（datetimerpicker 是最大的罪魁祸首）。您还需要考虑您的用户是否会欣赏为颜色/外观更改所做的额外工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T13:24:09.050

看看[DevExpress 皮肤](http://www.devexpress.com/Products/NET/Controls/WinForms/Skins/)

如果你能负担得起。

# jquery - jQuery 移动使用 36x36 图标

> ID：11688272
> 
> 赞同：3
> 
> 时间：2012-07-27T13:00:22.130
> 
> 标签：jquery, jquery-mobile

如何使用 36x36 图标而不是 18x18？我找不到任何解释或示例的地方。我只想使用更大的图标！

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:25:49.623

取自 OP 对问题的修订：

* * *

问题是我使用的是[jQuery 移动图标包](http://github.com/commadelimited/jQuery-Mobile-Icon-Pack)，我必须修改 css 文件才能调整每个图标的位置。

# java - 在没有按钮的活动开始时播放文本到语音

> ID：11688274
> 
> 赞同：0
> 
> 时间：2012-07-27T13:00:25.363
> 
> 标签：java, android, text-to-speech

我在我的应用程序中使用文本到语音，我已经能够让它在我的所有按钮上正常工作。但是，当我尝试在我的启动活动中使用文本到语音时，它会使应用程序崩溃。这是一个空指针异常，所以我知道我只是编码不正确。澄清我想要它做什么。我希望它在飞溅活动中说话。当启动活动休眠时，我希望它再次交谈以告诉用户它已完成加载。我已经为我的启动活动包含了 java。

```
public class mainj extends Activity implements OnInitListener {

    private TextToSpeech myTTS;
    // status check code
    private int MY_DATA_CHECK_CODE = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.loadscreen);
        Thread logoTimer = new Thread() {
            public void run() {
                try {
                    try {
                        sleep(5000);
                        speakWords("loading");
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    Intent menuIntent = new Intent("android.intent.action.MENU");
                    startActivity(menuIntent);

                    Intent checkTTSIntent = new Intent();
                    checkTTSIntent
                            .setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
                    startActivityForResult(checkTTSIntent, MY_DATA_CHECK_CODE);
                }

                finally {
                    finish();
                }
            }

        };
        logoTimer.start();
    }

    // speak the user text
    private void speakWords(String speech) {

        // speak straight away
        myTTS.speak(speech, TextToSpeech.QUEUE_FLUSH, null);
    }

    // act on result of TTS data check
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        if (requestCode == MY_DATA_CHECK_CODE) {
            if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {
                // the user has the necessary data - create the TTS
                myTTS = new TextToSpeech(this, this);
            } else {
                // no data - install it now
                Intent installTTSIntent = new Intent();
                installTTSIntent
                        .setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
                startActivity(installTTSIntent);
            }
        }
    }

    // setup TTS
    public void onInit(int initStatus) {

        // check for successful instantiation
        if (initStatus == TextToSpeech.SUCCESS) {
            if (myTTS.isLanguageAvailable(Locale.US) == TextToSpeech.LANG_AVAILABLE)
                myTTS.setLanguage(Locale.US);
        } else if (initStatus == TextToSpeech.ERROR) {
            Toast.makeText(this, "Sorry! Text To Speech failed...",
                    Toast.LENGTH_LONG).show();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:08:29.397

在你睡觉后你的线程开始时，你正在调用 speakWords。调用 myTTS.speak。那时查看您的代码，myTTS 似乎没有被初始化并且为空，因此会因 NPE 而崩溃。

这段代码应该可以防止 NPE，但是如果 TTS 引擎的初始化时间太长，那么你就不会让它说 Loading。另外，我猜5秒（顺便说一句，这是一个很长的时间）睡眠是为了让它初始化？

```
public class mainj extends Activity implements OnInitListener {

private TextToSpeech myTTS;
// status check code
private int MY_DATA_CHECK_CODE = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.loadscreen);
    Intent checkTTSIntent = new Intent();
    checkTTSIntent
         .setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
    startActivityForResult(checkTTSIntent, MY_DATA_CHECK_CODE);
    Thread logoTimer = new Thread() {
        public void run() {
            try {
                try {
                    sleep(5000);
                    speakWords("loading");
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                Intent menuIntent = new Intent("android.intent.action.MENU");
                startActivity(menuIntent);

            }

            finally {
                finish();
            }
        }

    };
    logoTimer.start();
}

// speak the user text
private void speakWords(String speech) {

    // speak straight away
   if(myTTS != null)
   {
        myTTS.speak(speech, TextToSpeech.QUEUE_FLUSH, null);
   }
}

// act on result of TTS data check
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (requestCode == MY_DATA_CHECK_CODE) {
        if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {
            // the user has the necessary data - create the TTS
            myTTS = new TextToSpeech(this, this);
        } else {
            // no data - install it now
            Intent installTTSIntent = new Intent();
            installTTSIntent
                    .setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
            startActivity(installTTSIntent);
        }
    }
}

// setup TTS
public void onInit(int initStatus) {

    // check for successful instantiation
    if (initStatus == TextToSpeech.SUCCESS) {
        if (myTTS.isLanguageAvailable(Locale.US) == TextToSpeech.LANG_AVAILABLE)
            myTTS.setLanguage(Locale.US);
    } else if (initStatus == TextToSpeech.ERROR) {
        Toast.makeText(this, "Sorry! Text To Speech failed...",
                Toast.LENGTH_LONG).show();
    }
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:12:13.533

在加载 TTS 引擎后，您最好调用您的小加载片段，因此您可以将发言放在 OnActivityResult() 中。

在您的代码中，您实际上无法判断 myTTS 在您调用 speak 时是否已初始化。试试这种方式：

```
 Intent menuIntent = new Intent("android.intent.action.MENU");
                startActivity(menuIntent);

                Intent checkTTSIntent = new Intent();
                checkTTSIntent
                        .setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
                startActivityForResult(checkTTSIntent, MY_DATA_CHECK_CODE);

      try {
                    sleep(5000);
                    speakWords("loading");
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T15:27:50.523

你的方法有两个问题。

首先，您的应用程序需要等待`init()`才能尝试说话。其次，当语音库不可用时，您的应用需要处理。

使用[此类](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/speech/SpeechRecognizingAndSpeakingActivity.java)或[此类](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/speech/tts/TextToSpeechInitializer.java)来帮助 TextToSpeech 初始化。它实际上有点复杂，使用`TextToSpeech.Engine.ACTION_CHECK_TTS_DATA`实际上并不是最好的方法。

# jquery - jQuery在桌子上无限滚动？

> ID：11688279
> 
> 赞同：8
> 
> 时间：2012-07-27T13:00:42.003
> 
> 标签：jquery

有谁知道一个好的教程，或者我可以用来在我的桌子上添加无限滚动的 jQuery 插件？

我基本上想在用户向下滚动页面时向表中添加更多行。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T13:08:57.603

试试这个：

HTML：

```
 <div id="postswrapper">
       <div class="item">content</div>
       ...
       <div id="loadmoreajaxloader" style="display:none;"><center><img src="ajax-loader.gif" /></center></div>
    </div> 
```

Javascript：

```
<script type="text/javascript">
$(window).scroll(function()
{
    if($(window).scrollTop() == $(document).height() - $(window).height())
    {
        $('div#loadmoreajaxloader').show();
        $.ajax({
        url: "loadmore.php",
        success: function(html)
        {
            if(html)
            {
                $("#postswrapper").append(html);
                $('div#loadmoreajaxloader').hide();
            }else
            {
                $('div#loadmoreajaxloader').html('<center>No more posts to show.</center>');
            }
        }
        });
    }
});
</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T13:05:29.257

如果它适合您的需要，您可以查看它：http: [//datatables.net/examples/basic_init/scroll_y_infinite.html](http://datatables.net/examples/basic_init/scroll_y_infinite.html)

即使您不熟悉数据表，它也可能会吸引您使用它，至于要在表上实现无限滚动，您只需添加以下 jQuery 代码：

```
$(document).ready(function() {  
    $('#example').dataTable( {  
    "bScrollInfinite": true,
    "bScrollCollapse": true,
    "sScrollY": "200px"
    } );
} ); 
```

到 html 中的填充表（他们有[4 种方法](http://datatables.net/usage/#data_sources)可以做到这一点）。

Anyay，IMO，值得一试。

**编辑：**正如@SpoiledTechie.com 在下面的评论中所说 - 此信息已过时，您应该查看他们现在支持的方式：http: [//datatables.net/upgrade/1.10#bScrollInfinite](http://datatables.net/upgrade/1.10#bScrollInfinite)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T13:05:47.280

您可能想查看以下链接：

[http://www.jquery4u.com/tutorials/jquery-infinite-scrolling-demos/#.UBKSdHWi6so](http://www.jquery4u.com/tutorials/jquery-infinite-scrolling-demos/#.UBKSdHWi6so)

[http://net.tutsplus.com/tutorials/javascript-ajax/how-to-create-an-infinite-scroll-web-gallery/](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-create-an-infinite-scroll-web-gallery/)

[http://wp.tutsplus.com/tutorials/theme-development/how-to-create-infinite-scroll-pagination/](http://wp.tutsplus.com/tutorials/theme-development/how-to-create-infinite-scroll-pagination/)

我希望这有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T13:07:36.917

这是我最喜欢的两个用于无限滚动的 jquery 插件。两者都有很好的例子来说明如何使用它们。

[https://github.com/msjolund/jquery-esn-autobrowse](https://github.com/msjolund/jquery-esn-autobrowse)

[https://github.com/paulirish/infinite-scroll/](https://github.com/paulirish/infinite-scroll/)

# android - 可点击的隐藏按钮或图像

> ID：11688282
> 
> 赞同：1
> 
> 时间：2012-07-27T13:00:45.323
> 
> 标签：android, hidden

在 android 中有什么东西可以创建一个隐藏的按钮或图像，它仍然是可点击的。或者有什么方法可以在 Android 中实现这个功能。在 ios 中，我们可以放置一个可点击的隐藏按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T13:01:59.320

一切都可以在Android中实现

```
<Button...
  android:background="@null"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:30:47.797

您可以使用背景属性使按钮透明或半透明：

```
android:background="#ARGB" 
```

其中 A 是透明度，可以设置在 0-F 之间，即 0 表示透明，F 表示不透明。其余颜色为 R-Red、G-Green、B-Blue。所以一个例子。可能：

```
android:background="#200B" 
```

呈现出淡淡的蓝色。

通过这种方式，您可以为您的视图提供透明度以及透明色的色调。这适用于任何视图。

您也可以通过代码应用它：

```
button.setBackgroundColour(0x220000BB); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:02:29.127

可能对按钮使用透明图像。

# eclipse - Eclipse Mountain Lion 滚动条扩展

> ID：11688286
> 
> 赞同：7
> 
> 时间：2012-07-27T13:00:59.990
> 
> 标签：eclipse, osx-mountain-lion

我遇到了山狮问题，这大大降低了我的工作效率。

当在方法/类/上使用 cmd+鼠标单击（我假设 ctrl+鼠标单击）时，我得到 Open 声明/实现等弹出窗口。问题是滚动条位于最底部的项目上，并且由于它在鼠标上方展开，因此无法选择该项目。

有什么解决方法吗？还是一种使弹出窗口更大的方法？还是选择使用键盘？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-30T15:06:18.977

感谢一位朋友，我找到了解决方案！如果您将滚动条可见性更改为始终（系统偏好设置 - 常规），它们根本不会出现在弹出窗口中！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T09:37:57.420

虽然切换到“显示滚动条：始终”是一种选择，但我认为在 Eclipse 中解决这个问题会更好，因此我提交了一个错误：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=387095](https://bugs.eclipse.org/bugs/show_bug.cgi?id=387095)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T21:14:35.567

查看我制作的**[这个](http://youtu.be/qV7EmzozI0o)**截屏视频，以展示 Mountain Lion Preferences 和它如何影响 Eclipse 之间的关系。

对我来说，这只是`When Scrolling`造成问题的选项。使用剩下的任何一个设置，事情都很顺利：

![在此处输入图像描述](../Images/466bdc5274a191827a3c225c5a6e69b2.png)

# c - 为什么我不能释放内存？

> ID：11688288
> 
> 赞同：0
> 
> 时间：2012-07-27T13:01:09.740
> 
> 标签：c, structure

我用 C 写了一个简单的计数器结构：

```
typedef struct{
    int value;
}Counter; 
```

然后，我写了一些简单的实现：

```
void createCounter(Counter *dCount)
{ 
    dCount = (Counter*)malloc(sizeof(Counter));
    dCount->value = 0;
}

void FreeResource(Counter *dCount)
{
  free(dCount);
} 
```

现在主要是，我想释放我创建的指针，它抱怨没有分配被释放的指针。我正在查看代码，我想我在调用 createCounter() 函数时为它分配了内存？

```
 int main()
  {
    Counter m;
    CreateCounter(&m);
    FreeResource(&m); //run time error given here..

    return 0;
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T13:03:12.403

> ```
> dCount = (Counter*)malloc(sizeof(Counter)); 
> ```

有多个问题：

*   `dCount = ...`对调用者绝对没有影响，即指针不变。
*   你传递了一个指向已经分配的结构的指针，你不需要`malloc`任何东西
*   你正试图释放一些`&m`你没有从中获得的东西 ( )`malloc`

在这一点上，唯一明智的建议是复习关于指针的一章。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T13:03:43.273

您正在尝试传递在堆栈中分配的变量的地址，然后尝试将 malloc 分配的地址分配给它，这不会反映在调用者中。因此，当您尝试释放它时，您实际上是在将堆栈变量的地址传递给 free，因此您会得到未定义的行为。

改变功能

```
void createCounter(Counter *dCount) 
{      
    dCount = (Counter*)malloc(sizeof(Counter));    
    dCount->value = 0; 
} 
```

作为

```
void createCounter(Counter **dCount) 
{      
   *dCount = (Counter*)malloc(sizeof(Counter));     
   (*dCount)->value = 0; 
} 
```

在您的情况下，指针按值传递，新的内存地址分配不会反映在调用者中。

主要功能必须更改为：

```
int main()     
{       
  Counter *m;       
  CreateCounter(&m);       
  FreeResource(m); //run time error given here..          
  return 0;    
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-27T13:04:18.163

问题是在`CreateCounter`变量`dCount`中是一个*局部*变量。这意味着当函数返回时，对变量的更改将不可见。

有两种常见的解决方案：

1.  返回指针：

    ```
    Counter *CreateCounter()
    {
        Counter *dCounter = malloc(sizeof(Counter));
        dCounter->value = 0;
        return dCounter;
    } 
    ```

2.  将参数作为*引用*传递，即指向指针的指针：

    ```
    void CreateCounter(Counter **dCounter)
    {
        *dCounter = malloc(sizeof(Counter);
        (*dCounter)->value = 0;
    } 
    ```

    并称之为：

    ```
    Counter *m;
    CreateCounter(&m); 
    ```

# firefox - tomcat（apache-tomcat-6.0.32）的 CSRF 方法在 firefox 14.0.1 上无法正常工作

> ID：11688289
> 
> 赞同：0
> 
> 时间：2012-07-27T13:01:12.657
> 
> 标签：firefox, tomcat, csrf

我正在使用tomcat（apache-tomcat-6.0.32）的CSRF方法进行安全扫描（以避免跨站点伪造），但是我遇到了firefox的以下问题：
1.Firefox不支持tomcat提供的CSRF适当Firefox 创建多个会话的方式。2\. 每当页面出现任何异常（如 JSP 异常）时。Firefox 将其重定向到 CSRFPreventionFilter 并且此过滤器创建新会话。3\. 有时在遍历应用程序时，CSRFPreventionFilter 过滤器也会创建新会话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:04:41.480

an 的创建`HttpSession`是设计使然：`CSRFPreventionFilter`使用一个`HttpSession`对象来存储用于保护您的 URL 的 nonce。

`CSRFPreventionFilter`只调用`HttpServletRequest.getSession(true)`并且从不使会话无效，因此它不应该创建任何额外的会话（或切换会话）。

请注意，最新版本的 Tomcat 将在跨越身份验证边界时更改会话 ID（即，当您输入用户名和密码时）。这是针对另一种攻击的缓解措施：会话固定。

# android - Facebook Connect 在模拟器/设备上的工作方式不同，但在 Google Play 上却不同

> ID：11688296
> 
> 赞同：1
> 
> 时间：2012-07-27T13:02:04.203
> 
> 标签：android, facebook, google-play

我的应用程序中出现了奇怪的 facebook 连接行为。如果我在模拟器中使用它，则在 facebook.authorize > onComplete 调用 facebook.request（检索用户数据）和 facebook.dialog（在墙上发布）。但是如果我使用设备进行调试，这些调用需要在 onActivityResult() 才能工作。

而且我已经将经过设备测试的 apk 上传到 google play 中，但它不起作用！相同的代码，如果从 eclipse 安装，它可以工作......如果从 Play 下载，则不能！

“不起作用”是指在用户获得授权后不会调用 facebook.request 和 facebook.dialog，并且应用程序会卡在空白屏幕中。

我的 facebook 连接活动：

```
public class FacebookConnectActivity extends Activity {
private static final String TAG_JSON = "json";
static Facebook facebook = new Facebook("111111111111111");
AsyncFacebookRunner mAsyncRunner;
private SharedPreferences mPrefs;
JSONObject json;
Context ctx = this;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.resgatar_produto_layout);
    Log.w("FacebookConnect", "Activity Started");

    mPrefs = getPreferences(MODE_PRIVATE);
    String access_token = mPrefs.getString("access_token", null);
    long expires = mPrefs.getLong("access_expires", 0);
    if(access_token != null) {
        facebook.setAccessToken(access_token);

    }
    if(expires != 0) {
        facebook.setAccessExpires(expires);
    }

    if(!facebook.isSessionValid()) {

    facebook.authorize(this, new String[] {"email", "user_photos",     "user_birthday", "user_hometown", "user_relationships","user_location", "user_work_history",     "publish_actions"}, new DialogListener() {
        @Override
        public void onComplete(Bundle values) {
            Log.w("FacebookConnect", "User authorized");
            /*mAsyncRunner = new AsyncFacebookRunner(facebook);
            mAsyncRunner.request("me", new SampleRequestListener());
            Bundle params = new Bundle();
            params.putString("link", "www.qranio.com");
            facebook.dialog(ctx, "feed", params, new SampleDialogListener());*/
        }

        @Override
        public void onFacebookError(FacebookError error) {
            Log.w("FacebookConnect", "Error authorizing: "+error.toString());
        }

        @Override
        public void onError(DialogError e) {}

        @Override
        public void onCancel() {}   
    });

    }

}

public static  void logoutFB(){
    if(facebook.isSessionValid()){
        facebook.setAccessToken(null);
    }
}

public void startDataProcess(){
    while (json==null){

    }
    Intent a = new Intent(FacebookConnectActivity.this,     FacebookDataProcess.class);
    a.putExtra(TAG_JSON, json.toString());
    startActivity(a);
    finish();
}

public class SampleDialogListener extends BaseDialogListener {

    public void onComplete(Bundle values) {
        final String postId = values.getString("post_id");
        if (postId != null) {
            Log.d("Facebook-Example", "Dialog Success! post_id=" + postId);
            mAsyncRunner.request(postId, new WallPostRequestListener());
        } else {
            Log.d("Facebook-Example", "No wall post made");
            startDataProcess();
        }
    }

    public void onCancel(){
        Log.w("FacebookConnect", "Post to Wall Canceled");
        startDataProcess();
    }
}

public class WallPostRequestListener extends BaseRequestListener {

    public void onComplete(final String response, final Object state) {

        Log.d("WallPostRequestListener", "Got response: " + response);
        String message = "<empty>";
        try {
            JSONObject json = Util.parseJson(response);
            message = json.getString("message");
        } catch (JSONException e) {
            Log.w("Facebook-Example", "JSON Error in response");
        } catch (FacebookError e) {
            Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());
            //Toast.makeText(ctx, "Erro ao postar no Facebook.",     Toast.LENGTH_LONG).show();
        }
        startDataProcess();
    }
}

public class SampleRequestListener extends BaseRequestListener {

    public void onComplete(final String response, final Object state) {
        try {

            // process the response here: executed in background thread
            Log.d("SampleRequestListener", "Response: " + response.toString());
            json = Util.parseJson(response);
            Log.e("FacebookConnect", "JSON " + json.toString());

            startDataProcess();

            // then post the processed result back to the UI thread
            // if we do not do this, an runtime exception will be generated
            // e.g. "CalledFromWrongThreadException: Only the original
            // thread that created a view hierarchy can touch its views."

        } catch (JSONException e) {
            Log.w("Facebook-Example", "JSON Error in response");
        } catch (FacebookError e) {
            Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());
        }

    }
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    facebook.authorizeCallback(requestCode, resultCode, data);
    try{
        mAsyncRunner = new AsyncFacebookRunner(facebook);
        mAsyncRunner.request("me", new SampleRequestListener());
        /*Bundle params = new Bundle();
        params.putString("link", "www.qranio.com");
        //params.putString("display", "touch");
        facebook.dialog(ctx, "feed", params, new SampleDialogListener());*/
        Log.e("FacebookConnect", "Authentication authorizeCallback called");
        Log.e("FacebookConnect", "Access Token:     "+facebook.getAccessToken().toString());
        //facebook.
        //if (facebook.isSessionValid()){

        //}else{
            //Log.e("FacebookConnect", "Invalid facebook session while trying to     fetch user data");
        //}*/

    }catch(FacebookError fbe){
        Log.e("FacebookConnect", "onActivityResult FacebookError " + fbe.toString());
    }catch (Exception e){
        Log.e("FacebookConnect", "onActivityResult Exception " + e.toString());
    }

}

} 
```

[更新] 我的 AndroidManifest.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<manifest android:versionCode="9" android:versionName="1.1.3"
package="androidhive.dashboard" xmlns:android="http://schemas.android.com/apk/res/android">
<uses-sdk android:minSdkVersion="8"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<application android:icon="@drawable/icone"
    android:label="@string/app_name" android:theme="@android:style/Theme.NoTitleBar.Fullscreen">
    <activity android:label="@string/app_name"
        android:name="com.androidhive.dashboard.SplashScreen"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" android:windowSoftInputMode="stateHidden|adjustResize">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>
    <activity
        android:name="com.androidhive.dashboard.AndroidDashboardDesignActivity"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" android:windowSoftInputMode="stateHidden|adjustResize"/>
    <activity android:name="com.androidhive.dashboard.LoginActivity"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" android:windowSoftInputMode="stateHidden|adjustResize"/>
    <activity
        android:name="com.androidhive.dashboard.RegisterActivity"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" android:windowSoftInputMode="stateHidden|adjustResize"/>
    <activity
        android:name="com.androidhive.dashboard.LoginWithUsernameActivity"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" android:windowSoftInputMode="stateAlwaysVisible"/>
    <activity android:name="com.androidhive.dashboard.FacebookConnectActivity"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" android:windowSoftInputMode="stateHidden|adjustResize"/>
    <activity android:name="com.androidhive.dashboard.FacebookDataProcess"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" android:windowSoftInputMode="stateHidden|adjustResize"/>
...other activities...
</application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:30:25.770

Facebook Connect 是 SSO 流，完成后会回调 onActivityResult。你应该在那里处理响应

简单的例子

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

if (requestCode == AppContext.FACEBOOK_SSO_ACTIVITY_CODE) {

            // Successfully redirected.
            if (resultCode == Activity.RESULT_OK) {

                    // Check OAuth 2.0/2.10 error code.
                    String error = data.getStringExtra("error");
                    if (error == null) {
                        error = data.getStringExtra("error_type");
                    }
                    else {// SSO successful
                        String access_token = data.getStringExtra("access_token");
                        // from here on, you can do whatever you need
                     }
      }
} 
```

另一方面，我建议两个实现这两个选项（sso 和 oauth 作为后备）。这是 Facebook SSO 和 OAuth 的示例实现； [https://github.com/wareninja/generic-oauth2-login-for-android](https://github.com/wareninja/generic-oauth2-login-for-android)

# iphone - 纹理层随机切换位置

> ID：11688299
> 
> 赞同：0
> 
> 时间：2012-07-27T13:02:09.830
> 
> 标签：iphone, ios, opengl-es, opengl-es-2.0

在我的项目中，我想创建 5 个纹理层。

每层由 4 个带纹理的矩形组成。一层的这四个部分被排列成一个大的纹理。这些层是部分透明的，并排列在彼此的前面以创建三维外观。

当我只启用一个图层运行项目时，一切看起来都很好，但是一旦我添加第二个（或更多）图层，一切都会变得混乱。某些部分丢失，其他部分的 z 坐标完全错误（值本身看起来不错，但背景层突然成为最前面的层）。有些部分甚至会移动它们的 x 坐标（如果我使用 NSLog 输出所有方形坐标，这个在设置上看起来也不错）。

这是我的 setupVBOs 函数，我将对象坐标写入 VBO（我只有一个 Index VBO，因为每个正方形都是相同的，但是一个 5x4 VBO 的数组来保存图层每个部分的坐标。）

```
- (void)setupVBOs {

glGenBuffers(1, &_indexBufferLayer);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, _indexBufferLayer);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(IndicesLayer), IndicesLayer, GL_STATIC_DRAW);

for (int layerNo = 1; layerNo < LAYER_COUNT + 1; ++layerNo)
{
    for (int layerPart = 1; layerPart < LAYER_PARTS + 1; ++layerPart)
    {   
        glGenBuffers(1, &_vertexBufferLayer[layerNo][layerPart]);
        GLfloat x = -3.0 + (2.0 * (layerPart - 1));
        GLfloat z = 0.0 + (50.0 * (layerNo - 1));

        NSLog(@"Layer %d, Part %d: x=%f, z=%f", layerNo, layerPart, x, z);

        // Alter the Texture slightly to
        // remove errors from compression (x-Coord.)
        Vertex Vertices[] = {
            {{x + 1.0, -1.0, z}, {0.9865, 1.0}},
            {{x + 1.0, +1.0, z}, {0.9865, 0}},
            {{x - 1.0, +1.0, z}, {0.01, 0}},
            {{x - 1.0, -1.0, z}, {0.01, 1.0}}
        };

        glBindBuffer(GL_ARRAY_BUFFER, _vertexBufferLayer[layerNo][layerPart]);
        glBufferData(GL_ARRAY_BUFFER, sizeof(Vertices), Vertices, GL_STATIC_DRAW);

        x = z = 0;
    }
}
} 
```

这是我的渲染函数，我在其中绘制所有内容并添加纹理。

```
- (void)render: (CADisplayLink*)displayLink {

glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

CC3GLMatrix *projection = [CC3GLMatrix matrix];
float h = 4.0f * self.frame.size.height / self.frame.size.width;
[projection populateFromFrustumLeft:-1 andRight:1 andBottom:-h/4 andTop:h/4 andNear:2 andFar:500];

CC3GLMatrix *modelView = [CC3GLMatrix matrix];

// Translate the Modelviewmatrix
[modelView populateFromTranslation:CC3VectorMake(_cameraX, _cameraY, -5.0)];

// Rotate the Modelviewmatrix
[modelView rotateBy:CC3VectorMake(_currentRotation, 0, 90)];

[modelView translateByZ:_cameraZoom];    

//
// Draw all layers
//
for (int layerNo = 1; layerNo < LAYER_COUNT + 1; layerNo++)
{
    GLfloat layerFactor = (LAYER_COUNT + 1 - layerNo) * 22.0;

    GLfloat scaleFactor = 100.0 + layerFactor;

    [modelView scaleByX:scaleFactor];
    [modelView scaleByY:scaleFactor];

    for (int layerPart = 1; layerPart < LAYER_PARTS + 1; layerPart++)
    {            
        glUniformMatrix4fv(_modelViewUniform, 1, 0, modelView.glMatrix);
        glUniformMatrix4fv(_projectionUniform, 1, 0, projection.glMatrix); 
        GLuint uniformTexture = glGetUniformLocation(programHandle, "Texture");

        // Bind Buffer and Texture
        glBindBuffer(GL_ARRAY_BUFFER, _vertexBufferLayer[layerNo][layerPart]);

        // Activate Texturing Pipeline and Bind Texture
        glActiveTexture(GL_TEXTURE0);
        glBindTexture(GL_TEXTURE_2D, _layers[layerNo][layerPart][0]);
        glUniform1i(uniformTexture, 0);

        // Vertex Shader calls
        glVertexAttribPointer(_positionSlot, 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), (GLvoid*) 0);
        glVertexAttribPointer(_texCoordSlot, 2, GL_FLOAT, GL_FALSE, sizeof(Vertex), (GLvoid*) (sizeof(float) * 3));

        glEnableVertexAttribArray(_positionSlot);
        glEnableVertexAttribArray(_texCoordSlot);

        glDrawElements(GL_TRIANGLES, sizeof(IndicesLayer)/sizeof(IndicesLayer[0]), GL_UNSIGNED_BYTE, 0);

        glDisableVertexAttribArray(_texCoordSlot);
        glDisableVertexAttribArray(_positionSlot);    
    }

    [modelView scaleByX:1/scaleFactor];
    [modelView scaleByY:1/scaleFactor];

}
[_context presentRenderbuffer:GL_RENDERBUFFER];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T17:58:49.527

利用：

```
glenable(GL_TEXTURE_2D) 
```

并且：

```
glActiveTexture — select active texture unit 
```

# jquery - jquery问题中的预订表格

> ID：11688301
> 
> 赞同：0
> 
> 时间：2012-07-27T13:02:17.050
> 
> 标签：jquery, datepicker

我需要一些帮助来创建一个处理汽车预订表格的 jquery 脚本。

该表单具有诸如“开始日期，结束日期（在日期选择器中），租车和还车的本地化（城市）以及客户借车的天数等字段。只有一种依赖。租车不足4天，还车城市必须相同，超过4天，还车地点可能不同。

整个表格效果很好，以至于客户开始操纵返回日期，将汽车住在其他城市并租用汽车少于 4 天。

工作示例：http: [//jsfiddle.net/amarcinkowski/W7NHK/48/](http://jsfiddle.net/amarcinkowski/W7NHK/48/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:30:31.277

可能是这样吗？

```
if ( parseInt($("#finish_day").val()) < 4 ) {
    $('#return_car')
        .children('#return_car option[value=' + $('#get_car').val() + ']')
        .attr('selected', true)
        .siblings().attr('disabled', true);
} 
```

# java - Java/C++ 中的音频处理

> ID：11688306
> 
> 赞同：-1
> 
> 时间：2012-07-27T13:02:37.860
> 
> 标签：java, c++, audio

我正在寻找一个可以让我处理声音的库。这只是发生在我身上的事情，问题是在大型音乐收藏中我需要找到与另一个参考曲目相似的曲目。最简单的事情是找到具有相同/几乎相同节奏的曲目。这可能吗？是否有任何可用的工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:43:42.037

寻找与其他音乐相似的音乐是一个相当复杂的领域，如果你愿意花相当多的时间，可能需要相当多的工作。如果 Java 是您选择的语言，那么您可以看看[coMIRVA](http://www.cp.jku.at/people/schedl/Research/Development/CoMIRVA/webpage/CoMIRVA.html)，它可以让您根据音色比较音乐。根据我的经验，在单个维度上进行比较并不总是足够好，但这至少是一个开始。

总是有另一条路径，即使用已经存在的商业产品，例如 Echo Nest 和 BMAT。我不知道它们的价格，但它可能相当昂贵。然而，这些产品需要数年时间才能开发出来，所以我认为它们至少必须提供某种价值。

# java - 由于缺少 GenericArrayType 从 Java6 升级到 Java7 时出现 ClassCastException

> ID：11688312
> 
> 赞同：8
> 
> 时间：2012-07-27T13:03:17.213
> 
> 标签：java, generics, java-7

我的代码在 Java 5 和 6 中运行，但是当我升级到 Java 7 时，我得到一个“java.lang.ClassCastException：java.lang.Class 不能转换为 java.lang.reflect.GenericArrayType”。

对于以下代码：

```
public class A<T> {
  public Vector<Integer[]> arr;
}

System.out.println(((ParameterizedType)A.class.getField("arr").getGenericType()).getActualTypeArguments()[0]);
System.out.println(((ParameterizedType) A.class.getField("arr").getGenericType()).getActualTypeArguments()[0].getClass()); 
```

Java6 打印：

```
java.lang.Integer[]
class sun.reflect.generics.reflectiveObjects.GenericArrayTypeImpl 
```

Java7 打印：

```
class [Ljava.lang.Integer;
class java.lang.Class 
```

这种不同的行为正在破坏我依赖泛型的代码。有人可以帮我理解为什么会发生这种情况以及如何从中获取GenericArrayType[吗](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/GenericArrayType.html)`Vector<Integer[]> arr`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T13:19:06.230

状态文档`GenericArrayType`表示它*的组件类型是参数化类型或类型变量的数组类型*。

在给定的示例中，数组类型是`Integer[]`. 组件类型`Integer`既不是参数化类型也不是类型变量。所以你的数组类型真的不应该用`GenericArrayType`.

所以显然 JRE6 的行为是错误的，它得到了修复。对不起。:(

# python - 绘制和保存大量图形时如何加快 matplotlib？

> ID：11688318
> 
> 赞同：10
> 
> 时间：2012-07-27T13:03:46.273
> 
> 标签：python, matplotlib

我正在处理来自许多天线基线的观测数据。目前我正在做的是绘制〜40个数字，每个数字都有4x5的子图区域。在循环中使用 matplotlib 绘制和保存图形时，我发现它很慢。这是我的代码：

```
 import numpy as np
    import matplotlib.pyplot as plt
    import time
    ...

    PLT_PAGE_NUM = 39 # default is 39
    SUB_PLT_NUM = 20 # default is 20

    for pp in xrange(0,PLT_PAGE_NUM):

        plt.figure(figsize=(20,12))

        start_time = time.clock() 
        for kk in xrange(0,SUB_PLT_NUM):
            plt.subplot(5,4,kk+1)
            plt.plot(np.arange(0,TIME_LENGTH), xcor_real_arr[20*pp+kk,0:],'r-',
                     range(0,TIME_LENGTH), xcor_imag_arr[20*pp+kk,0:],'b-')
            plt.title('XCOR of '+ ind_arr[20*pp+kk], color='k') 

        plt.savefig('test_imag_real'+str(pp)+'.png',format='png',dpi=100)
        print 'Fig-'+str(pp)+' has been saved'
        print "Excution time:", time.clock()-start_time 
```

执行时间信息是：

```
######### Check your inputs setting #########
You have selected 2 files.
The time interval is From 2011-10-20_14:28:38 to 2011-10-20_15:10:54
Your time resolution is set to 1.125s
The total plot points number is: 100
Your frequency channel is: ch2
######### Hardworking...please wait #########
Fig-0 has been saved
Excution time: *2.52576639619*
Fig-1 has been saved
Excution time: *2.59867230708*
Fig-2 has been saved
Excution time: *2.81915188482*
Fig-3 has been saved
Excution time: *2.83102198991*
Program ends 
```

如您所见，我只绘制了 4 个图形，耗时约 11 秒。绘制并保存所有 39 个数字大约需要 2 分钟。我不知道瓶颈在哪里。你能帮忙让它更快吗？ **谢谢！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:36:06.693

我已经修改了您的代码以使其可运行：

```
import numpy as np
import matplotlib.pyplot as plt
import time

PLT_PAGE_NUM = 39 # default is 39
SUB_PLT_NUM = 20 # default is 20
TIME_LENGTH = 1000

xcor_real_arr = np.random.random((SUB_PLT_NUM*PLT_PAGE_NUM,TIME_LENGTH))
xcor_imag_arr = np.random.random((SUB_PLT_NUM*PLT_PAGE_NUM,TIME_LENGTH))
for pp in xrange(0,PLT_PAGE_NUM):

    plt.figure(figsize=(20,12))

    start_time = time.time() 
    for kk in xrange(0,SUB_PLT_NUM):
        plt.subplot(5,4,kk+1)
        plt.plot(np.arange(0,TIME_LENGTH), xcor_real_arr[SUB_PLT_NUM*pp+kk,0:],'r-',
                 range(0,TIME_LENGTH), xcor_imag_arr[SUB_PLT_NUM*pp+kk,0:],'b-')
        plt.title('XCOR of '+ str(SUB_PLT_NUM*pp+kk), color='k') 

    plt.savefig('test_imag_real'+str(pp)+'.png',format='png',dpi=100)
    print 'Fig-'+str(pp)+' has been saved'
    print "Excution time:", time.time()-start_time 
```

在我的机器上，每个数字大约需要 3 秒：

```
Fig-0 has been saved
Excution time: 3.01798415184
Fig-1 has been saved
Excution time: 3.08960294724
Fig-2 has been saved
Excution time: 2.9629740715 
```

使用[Matplotlib Animations Cookbook](http://www.scipy.org/Cookbook/Matplotlib/Animations)中的想法（也由 Joe Kington 演示，[here](https://stackoverflow.com/questions/4098131/matplotlib-update-a-plot/4098938#4098938)），我们可以通过重用相同的轴并简单地重新定义每个绘图的 y 数据来将其加速约 33%（每图 1 秒）：

```
import numpy as np
import matplotlib.pyplot as plt
import time

PLT_PAGE_NUM = 39 # default is 39
SUB_PLT_NUM = 20 # default is 20
TIME_LENGTH = 1000

xcor_real_arr = np.random.random((SUB_PLT_NUM*PLT_PAGE_NUM,TIME_LENGTH))
xcor_imag_arr = np.random.random((SUB_PLT_NUM*PLT_PAGE_NUM,TIME_LENGTH))
plt.figure(figsize=(20,12))

ax = {}
line1 = {}
line2 = {}

for pp in xrange(0,PLT_PAGE_NUM):
    start_time = time.time() 
    for kk in xrange(0,SUB_PLT_NUM):
        if pp == 0:
            ax[kk] = plt.subplot(5,4,kk+1)
            line1[kk], line2[kk] = ax[kk].plot(np.arange(0,TIME_LENGTH),
                                   xcor_real_arr[SUB_PLT_NUM*pp+kk,0:],'r-',
                                   range(0,TIME_LENGTH),
                                   xcor_imag_arr[SUB_PLT_NUM*pp+kk,0:],'b-')
        else:
            line1[kk].set_ydata(xcor_real_arr[SUB_PLT_NUM*pp+kk,0:])
            line2[kk].set_ydata(xcor_imag_arr[SUB_PLT_NUM*pp+kk,0:])
        plt.title('XCOR of '+ str(SUB_PLT_NUM*pp+kk), color='k') 

    plt.savefig('test_imag_real'+str(pp)+'.png',format='png',dpi=100)
    print 'Fig-'+str(pp)+' has been saved'
    print "Excution time:", time.time()-start_time 
```

这会产生这些执行时间：

```
Fig-0 has been saved
Excution time: 3.0408449173
Fig-1 has been saved
Excution time: 2.05084013939
Fig-2 has been saved
Excution time: 2.01951694489 
```

（第一个图仍然需要 3 秒来设置初始图。在后续图上我们可以节省一些时间。）

# php - 我的输入数据无法更新

> ID：11688319
> 
> 赞同：0
> 
> 时间：2012-07-27T13:03:48.197
> 
> 标签：php, mysql, sql, input

[http://imageshack.us/photo/my-images/221/mysystem.jpg/](http://imageshack.us/photo/my-images/221/mysystem.jpg/)

任何人都可以帮助我，我现在卡在第一列，即 Total Pending Column，我无法在前端页面更改“200”的数据，我只能在 phpmyadmin 的后端页面手动编辑它，这对我来说很难用户在前端更改数据，但是让我感到困惑，为什么另一列可以在前端进行编辑？只是无法编辑 Total Pending 列，当我单击更新按钮时，除第一列之外的其他列都更新了。

请帮我..

特此更新 PHP 编码

```
$editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
  $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
}

if ((isset($_POST["MM_update"])) && ($_POST["MM_update"] == "form1")) {
  $updateSQL = sprintf("UPDATE sr1 SET appt_today=%s, partial_complete=%s, full_complete=%s, return_technical=%s, return_customer=%s, return_cancel=%s, cancel=%s, reappt=%s, focus=%s WHERE total_pending=%s",
                       GetSQLValueString($_POST['appt_today'], "int"),
                       GetSQLValueString($_POST['partial_complete'], "int"),
                       GetSQLValueString($_POST['full_complete'], "int"),
                       GetSQLValueString($_POST['return_technical'], "int"),
                       GetSQLValueString($_POST['return_customer'], "int"),
                       GetSQLValueString($_POST['return_cancel'], "int"),
                       GetSQLValueString($_POST['cancel'], "int"),
                       GetSQLValueString($_POST['reappt'], "int"),
                       GetSQLValueString($_POST['focus'], "int"),
                       GetSQLValueString($_POST['total_pending'], "int"));

  mysql_select_db($database_pods, $pods);
  $Result1 = mysql_query($updateSQL, $pods) or die(mysql_error());

  $updateGoTo = "main.php";
  if (isset($_SERVER['QUERY_STRING'])) {
    $updateGoTo .= (strpos($updateGoTo, '?')) ? "&" : "?";
    $updateGoTo .= $_SERVER['QUERY_STRING'];
  }
  header(sprintf("Location: %s", $updateGoTo));
}

mysql_select_db($database_pods, $pods);
$query_sr1 = "SELECT * FROM sr1";
$sr1 = mysql_query($query_sr1, $pods) or die(mysql_error());
$row_sr1 = mysql_fetch_assoc($sr1);
$totalRows_sr1 = mysql_num_rows($sr1);
?> 
```

这是我的输入数据编码，我上面说的是“200”，但不能更新。

```
<input name="total_pending" type="text" class="style6" onKeyPress="return checkIt(event)" value="<?php echo $row_sr1['total_pending']; ?>" size="3" maxlength="3" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:08:17.083

您的 SQL 查询不会更新任何名为`total_pending`：

```
UPDATE
  sr1
SET
  appt_today=%s,
  partial_complete=%s,
  full_complete=%s,
  return_technical=%s,
  return_customer=%s,
  return_cancel=%s,
  cancel=%s,
  reappt=%s,
  focus=%s
WHERE
  total_pending=%s 
```

您用于`total_pending`查找要更新的记录，但实际上并未更新该/那些记录中的该值。

请记住，为了更新您用于查找记录的同一字段，您需要将该参数包含两次并使用两个不同的值。一个是它应该更新的新值，一个是它用来查找记录的现有值。

例如：

```
UPDATE
  sr1
SET
  appt_today=%s,
  partial_complete=%s,
  full_complete=%s,
  return_technical=%s,
  return_customer=%s,
  return_cancel=%s,
  cancel=%s,
  reappt=%s,
  focus=%s,
  total_pending=%s -- update this field as well
WHERE
  total_pending=%s 
```

**编辑：**为了更清楚地为您说明，您要做的第一件事是在表单中添加另一个字段以跟踪单独的`total_pending`值。这是因为您需要其中两个用于更新，一个代表原始值（用于`WHERE`子句），一个代表新值。因此，您需要添加如下内容：

```
<input name="total_pending_original" type="hidden" value="<?php echo $row_sr1['total_pending']; ?>" /> 
```

然后，使用我上面给你的更新查询，你还需要添加一个新参数。所以总的查询/参数代码应该是这样的：

```
$updateSQL = sprintf("UPDATE sr1 SET appt_today=%s, partial_complete=%s, full_complete=%s, return_technical=%s, return_customer=%s, return_cancel=%s, cancel=%s, reappt=%s, focus=%s, total_pending=%s WHERE total_pending=%s",
                   GetSQLValueString($_POST['appt_today'], "int"),
                   GetSQLValueString($_POST['partial_complete'], "int"),
                   GetSQLValueString($_POST['full_complete'], "int"),
                   GetSQLValueString($_POST['return_technical'], "int"),
                   GetSQLValueString($_POST['return_customer'], "int"),
                   GetSQLValueString($_POST['return_cancel'], "int"),
                   GetSQLValueString($_POST['cancel'], "int"),
                   GetSQLValueString($_POST['reappt'], "int"),
                   GetSQLValueString($_POST['focus'], "int"),
                   GetSQLValueString($_POST['total_pending'], "int"),
                   GetSQLValueString($_POST['total_pending_original'], "int")); 
```

此外，您应该注意的一件事是您不应该再成为 mysql_* 函数。PHP 正在弃用它们。看看[这里](http://php.net/manual/en/function.mysql-query.php)指示的大红色框。

# ruby-on-rails - Rails 3.2.7 和 Spree 1.1.2。当我尝试访问 CART 时，有调试信息显示“未定义的方法 `password_salt=' ..”

> ID：11688325
> 
> 赞同：0
> 
> 时间：2012-07-27T13:04:02.517
> 
> 标签：ruby-on-rails, spree, password-encryption

我使用 RailsInstaller (v2.1.0) 在 Windows7 上安装了 rails。我发现原来的 rails 是 v3.2.1。之后，我“gem install spree”。似乎安装将导轨升级到 v3.2.7。我提到这一点是因为在昨天之前它只是 3.2.6。在 rails 3.2.6 下一切都很顺利，但如果我“疯狂安装”一个 rails 3.2.7 应用程序，我无法访问默认商店的购物车。并得到这样的错误：

```
NoMethodError in Spree::OrdersController#edit

undefined method `password_salt=' for #<Spree::User:0x68438d0> 
```

当我检查数据库时，是的，spree_users 表中没有“password_salt”，只有“salt”。

有没有其他人遇到过这个问题？我花了将近半天的时间来解决这个问题。我错过了 Spree 路径中的某些内容吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T00:48:08.903

我想我之前遇到过完全相同的问题，看看是否在 Gemfile 中指定 spree gem 版本（假设是 1.1.2）然后运行 ​​bundle update 工作

```
#Gemfile
gem 'spree', '1.1.2' 
```

然后运行

```
bundle update 
```

看看有没有效果！

# java - 用于文本用户界面 (TUI) 的 Java 框架

> ID：11688326
> 
> 赞同：6
> 
> 时间：2012-07-27T13:04:03.257
> 
> 标签：java, tui

我需要为我的应用程序创建 TUI。有什么框架可以帮助我吗？我需要类似[Ncurses](http://en.wikipedia.org/wiki/Ncurses)的东西，但对于 Java。我找到了一些（[Jcurses](http://sourceforge.net/projects/javacurses/)，[Charva](http://www.pitman.co.za/projects/charva/index.html)）。有谁有他们的经验？请告诉我，哪个更好（在我的情况下更好意味着更容易）。或者也许是别的什么？

# sql - LINQ 不返回所有子记录

> ID：11688329
> 
> 赞同：1
> 
> 时间：2012-07-27T13:04:14.193
> 
> 标签：sql, entity-framework, linq-to-entities

我在数据库中有一个查询：

```
SELECT  GreenInventoryBlendGradeID,bgx.blendgradeid,
        bgX.GreenBlendGradeTypeID,[Description]
  FROM [GreenInventory] gi 
 INNER JOIN [GreenInventoryBlendGradeXref] bgX 
    ON bgX.[GreenInventoryID] = gi.[GreenInventoryID] 
 INNER JOIN [BlendGrade] bg
    ON bg.[BlendGradeID]=bgx.[BlendGradeID] 
```

这将返回 3 条记录：

> 类型 ID 描述
> 
> * * *
> 
> 1 XR
> 2 XR
> 1 XF2

LINQ：

```
 var GreenInventory = (from g in Session.GreenInventory
                    .Include("GreenInventoryBlendGradeXref")
                    .Include("GreenInventoryBlendGradeXref.BlendGrade")
                    .Include("GreenInventoryBlendGradeXref.GreenBlendGradeType")
                    .Include("GreenInventoryWeightXref")
                    .Where(x => x.GreenInventoryID == id && x.GreenInventoryBlendGradeXref.Any(bg=>bg.GreenBlendGradeTypeID > 0) )
            select g); 
```

我尝试了不同的 Where 子句，包括简单的 - (x => x.GreenInventoryID == id) 但总是只返回前 2 条记录。

有任何想法吗？

如果我尝试以下操作：

```
var GreenInventory = (from gi in Session.GreenInventory.Where(y => y.GreenInventoryID == id)  
join bgX in Session.GreenInventoryBlendGradeXref.DefaultIfEmpty() on gi.GreenInventoryID equals bgX.GreenInventoryID  
join bg in Session.BlendGrade.DefaultIfEmpty()  on bgX.BlendGradeID equals g.BlendGradeID  
select new { GreenInventory = gi, GreenInventoryBlendGradeXref = bgX, BlendGrade = bg }); 
```

我取回每个对象的 3 个，正确的信息在 BlendGrade 对象中。看起来 3 个 GreenInventory 对象是相同的。它们每个都包括 2 个 GreenInventoryBlendGradeXref 对象，它们显示与以前相同的 2 条记录。

所以我不清楚最初的问题是什么。也不知道这是否是解决它的最佳方法。

感谢您的回答。如果有人有进一步的想法，请告诉我们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:57:11.437

根据您提供的一些细节，我假设您缺少连接。我没有使用 EntityFramework 的经验（我假设您使用这个 ORM），但据我所知，“.Include”试图确保根实体集不会更改并且不会包含重复项。

您手动创建的查询似乎表明模型中至少存在一个 1:n 关系。您从 LINQ 获得的结果表明只返回不同的 GreenInventory 实体。

因此，您需要调整您的查询并明确声明您想要所有结果（而不仅仅是不同的根实体） - 我假设通过显式连接 EntityFramework 将产生所有预期结果 - 或者您需要调整您的映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:13:12.167

我首先要看的是您的模型和您在实体之间定义的连接。您可能还想检查生成的 SQL 语句：

`Trace.WriteLine(GreenInventory.Provider.ToString())`

或使用 Visual Studio IntelliTrace 调查发送到数据库的内容。

# android - 使用 android 设备通过 SPP 通过蓝牙发送数据

> ID：11688336
> 
> 赞同：4
> 
> 时间：2012-07-27T13:04:32.923
> 
> 标签：android, bluetooth

我正在尝试将数据从 android 设备发送到支持串行端口配置文件（SPP）的远程蓝牙设备。我注意到每次按下按钮后打开和关闭插座时，它都太慢了。在 Run() 和 Onclick() 函数中应该执行哪些套接字命令？下面是一个做蓝牙 IO 的类：

```
public class Selecteddevice extends Activity implements OnClickListener {

private static final String TAG = "THINBTCLIENT";
private BluetoothAdapter mBluetoothAdapter = null;
private BluetoothDevice device;
private BluetoothSocket btSocket = null;
private OutputStream outStream = null;

private static final UUID MY_UUID = 
        UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");
public static String address;

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.selecteddevice);
    findViewById(R.id.toggleButton1).setOnClickListener(this);
    findViewById(R.id.toggleButton2).setOnClickListener(this);
    findViewById(R.id.toggleButton3).setOnClickListener(this);

}

@Override
public void onStart() {
    super.onStart();

    String address = getIntent().getStringExtra("address");
    TextView tv1 = (TextView) findViewById(R.id.textView_address);
    tv1.setText("                       DEVICE ADDRESS:      " +  address);

    mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
    device = mBluetoothAdapter.getRemoteDevice(address);
    run();
}

public void run(){
    mBluetoothAdapter.cancelDiscovery();
    try {
        btSocket = device.createRfcommSocketToServiceRecord(MY_UUID);

    } catch (IOException e) 
    {   
        Log.e(TAG, "ON START: Socket creation failed.", e);
    }

    try {
        btSocket.connect();

    } catch (IOException e) 
    {       
        Log.e(TAG, "sendTestByte: Socket connection failed.", e);
    }   
}

public void sendTestString(String s){
    try {
        outStream = btSocket.getOutputStream();

    } catch (IOException e) 
    {       
        Log.e(TAG, "sendTestByte: OutputStream creation failed.", e);
    }

    try {
        outStream.write(s.getBytes());
        Log.d(TAG, "sendTestByte: OutputStream write succeeded.");

    } catch (IOException e) 
    {       
        Log.e(TAG, "sendTestByte: OutputStream writefailed.", e);
    }       
}

public void onClick(View v){
    switch(v.getId())
    {
    case R.id.toggleButton1:
        this.sendTestString("1");
        break;
    case R.id.toggleButton2:
        this.sendTestString("2");
        break;
    case R.id.toggleButton3:
        this.sendTestString("3");
        break;
    }
}           

@Override
public void onPause() {
    super.onPause();
    if (outStream != null) {
        try {
            outStream.flush();
        } catch (IOException e5) 
        { 
            Log.e(TAG, "ON PAUSE: Couldn't flush output stream.", e5);
        }
    }
    try {
        btSocket.close();
    } catch (IOException e6) 
    {
        Log.e(TAG, "ON PAUSE: Unable to close socket.", e6);
    }
}

@Override
public void onStop() {
    super.onStop();

}

@Override
public void onDestroy() {
    super.onDestroy();

} 
```

}

* * *

与错误消息配对后，我的程序崩溃：

```
 07-27 13:00:57.483: E/THINBTCLIENT(7855): sendTestByte: OutputStream writefailed.
    07-27 13:00:57.483: E/THINBTCLIENT(7855): java.io.IOException: socket closed
    07-27 13:00:57.483: E/THINBTCLIENT(7855):   at  
    android.bluetooth.BluetoothSocket.write(BluetoothSocket.java:331)
    ... 
```

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:46:46.930

如果您确定连接建立没有任何错误并且您可以获得*套接字*，请尝试在方法中分配您的`OutputStream`成员，`run()`如下所示：

```
public void run()
{
    mBluetoothAdapter.cancelDiscovery();
    try 
    {
        btSocket = device.createRfcommSocketToServiceRecord(MY_UUID);           
    } catch (IOException e) 
    {   
        Log.e(TAG, "ON START: Socket creation failed.", e);
    }

    try 
    {
        btSocket.connect();     
    } catch (IOException e) 
    {       
        Log.e(TAG, "sendTestByte: Socket connection failed.", e);
    }   

    try 
    {
        outStream = btSocket.getOutputStream();
    } catch (IOException e) 
    {       
        Log.e(TAG, "sendTestByte: OutputStream creation failed.", e);
    }
}

public void sendTestString(String s)
{    
    try 
    {
        outStream.write(s.getBytes());
        outSttream.flush(); // <-- Try flush to force sending data in buffer
        Log.d(TAG, "sendTestByte: OutputStream write succeeded.");
    } catch (IOException e) 
    {       
        Log.e(TAG, "sendTestByte: OutputStream writefailed.", e);
    }       
} 
```

您实际上并没有关闭套接字，但这应该可以。`write()`调用前确保与主设备的连接没有丢失

# javascript - Firefox 移动错误控制台丢失

> ID：11688340
> 
> 赞同：4
> 
> 时间：2012-07-27T13:05:01.287
> 
> 标签：javascript, android, debugging, mobile, browser

我正在开发一个移动网站，它在 Android 股票浏览器中运行良好。在 Firefox 中，一些 JavaScript 函数不起作用。所以我在谷歌上搜索错误控制台。我发现了一个支持页面，它提供了有关早期版本的错误控制台的信息。

[Firefox for mobile 版本 14](https://en.wikipedia.org/wiki/Firefox_for_mobile#History) (2012-06-26)中是否有错误控制台？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:01:20.117

看起来它是隐藏的，但是添加[`browser.console.showInPanel`](http://starkravingfinkle.org/blog/2009/06/embedding-the-error-console-in-fennec/)然后 [`devtools.errorconsole.enabled`](https://developer.mozilla.org/en-US/docs/Error_Console)将两者都设置为“true”[`about:config`](https://wiki.mozilla.org/Mobile/Fennec/Tips#Hidden_Preferences)将启用控制台和首选项面板以进行 JavaScript 调试。

以下是如何找到错误控制台图标：

*   [Firefox Mobile：启用错误控制台](https://developer.mozilla.org/en-US/docs/Mozilla/QA/Firefox_Mobile:_Enabling_the_Error_Console)

似乎错误控制台已被弃用，因此书签是[其余移动调试替代方案](http://eclipsesource.com/blogs/2012/08/14/debugging-javascript-on-android-and-ios/)中最简单的：

*   安卓控制台：

```
javascript:(function(){if((/android/gi).test(navigator.appVersion)){console={"_log":[],"log":function(){var%20arr=[];for (var%20i=0;i%20\""+value+"\"");}},"show":function(){alert(this._log.join("\n"));this._log =[];}};window.onerror=function(msg,url,line){console.log("ERROR:%20\""+msg+"\"%20at%20\""+"\",% 20line%20"+line);}window.addEventListener("touchstart",function(e){if(e.touches.length===3){console.show();}});}})() ;

```

*   萤火虫精简版：

```
javascript:(函数(F,i,r,e,b,u,g,L,I,T,E){if(F.getElementById(b))return;E=F[i+'NS']&&F. documentElement.namespaceURI;E=E?F[i+'NS'](E,'script'):F[i]('script');E[r]('id',b);E[r]( 'src',I+g+T);E[r](b,u);(F[e]('head')[0]||F[e]('body')[0])。 appendChild(E);E=new%20Image;E[r]('src',I+L);})(document,'createElement','setAttribute','getElementsByTagName','FirebugLite','4', 'firebug-lite.js','releases/lite/latest/skin/xp/sprite.png','https://getfirebug.com/','#startOpened');

```

# function - jQuery UI 延迟不起作用

> ID：11688353
> 
> 赞同：0
> 
> 时间：2012-07-27T13:05:39.620
> 
> 标签：function, button

为什么延迟在此代码中不起作用？

```
$(function() {
    $( "#button" ).click(function() {
        $("#dialog").dialog({
              show: { effect: 'fade', direction: "up" },
              hide: { effect: 'fade', direction: "down" },
         }).delay(1000).dialog( "close" );
         return false;
    });

 }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:09:50.273

从[`.delay`文档](http://api.jquery.com/delay/)：

> 它可以与标准效果队列或自定义队列一起使用。**只有队列中的后续事件被延迟**；例如，这不会延迟不使用效果队列的 .show() 或 .hide() 的无参数形式。

# php - 如何使用 xpath 获取元素？

> ID：11688355
> 
> 赞同：2
> 
> 时间：2012-07-27T13:05:41.983
> 
> 标签：php, xpath, simplexml, domdocument

我正在尝试从 HTML 中获取一些数据

```
$xdata = simplexml_import_dom($doc);
$datas = $xdata->xpath("//*[@class='proglist']");
$aData = array();
foreach($datas as $data)
{   

    $rightdatas = $data->xpath("*[@class='progright']");
    $rt = $rightdatas[0];
    print_r($rt);
    $content  = $rt->xpath("*[@class='progrighthead']");
    print_r($content  );
} 
```

如果我打印出类的内容，`$rt`那么`progrighthead`该类就在那里，但`$content`变量是空的。为什么？

为什么我收到以下语法的相同结果？

```
$xdata = simplexml_import_dom($doc);
$datas = $xdata->xpath("//*[@class='proglist']");
$aData = array();
foreach($datas as $data)
{   

    $rightdatas = $data->xpath("*[@class='progright']");
    $rt = $rightdatas[0];
    print_r($rt);
    $content  = $rt->xpath("*[@class='progrighthead']");
} 
```

和

```
$datas    = $xdata->xpath("//*[@class='progrighthead']"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:12:40.460

progrighthead 不是 progright 的孩子，而是后代。采用

```
$rt->xpath(".//*[@class='progrighthead']"); 
```

放在`//`开头意味着从根开始搜索，而不是从当前元素开始。

# android - 用相机捕获图像并在其上放置图像视图，如何？

> ID：11688360
> 
> 赞同：3
> 
> 时间：2012-07-27T13:06:08.803
> 
> 标签：android, camera, imageview

有什么办法吗？我遵循了本教程（[http://marakana.com/forums/android/examples/39.html](http://marakana.com/forums/android/examples/39.html)），效果很好。此外，我将 FrameLayout（包含相机预览）放入带有 ImageView 的 RelativeLayout。

```
<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <FrameLayout
        android:id="@+id/preview"
        android:layout_width="330dp"
        android:layout_height="233dp"
        android:layout_marginTop="22dp"
        android:layout_alignBottom="@+id/imageView1"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true" >
    </FrameLayout>

<ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/image_on_preview" />

</RelativeLayout> 
```

所以现在启动应用程序，我有相机和图像视图。如果我将图片保存到 SD 卡中，我只会得到用相机拍摄的图片，但不会出现 imageview（当然，为什么会出现）。现在我的问题是如何保存它？为了更好地理解，我在使用我的应用程序时捕获了一个屏幕截图。

![在此处输入图像描述](../Images/fb750f1931f710a86120c269271ed925.png)

所以我想将相机预览和图像视图都保存在一张图片中。我不确定这是否可能，但如果我不必将照片保存到 SD 卡上，那将是最好的。稍后我将添加一个“保存到 SD 卡”按钮来保存它。

**更新

现在我想出了一个办法。我将图片保存在 SD 卡上，然后在创建文件时更改为另一个意图。它包含两个图像视图，一个是“image_on_preview”，另一个是我之前保存图片的来源。好的，现在我只需要以某种方式变得棘手并结合两个图像视图:)

***更新2

好的，我做到了。在第二个活动中，我将两个图像视图都转换为位图。然后我画了一个画布并将它们放在一起，然后我可以直接将它保存到 SD 卡中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T22:07:47.713

由于没有人回答并且我解决了问题（并且有一票赞成）我展示了我自己的方法。

1.  在第一个活动中，有一个带有 FrameLayout 和 Imageview 的 RelativeLayout。就像在附图中一样。
2.  我创建了一个按钮，用于捕获图像。当我按下该按钮时，我将拍摄的照片保存到 SD 卡中并更改为 activity2。
3.  在活动 2 中，我将保存的图像读入位图（我立即针对 OutOfMemory 错误对其进行缩放），然后将其添加到图像视图中。就像在activity1中一样，我将另一个imageview（封面）和保存的照片放在相对布局中。
4.  为了将它保存到 SD 卡，我需要创建一个画布，并使用`canvas.drawBitmap()`. 我首先绘制了捕获的照片而不是图像视图（封面），然后将它们放置/缩放以看起来就像在活动中一样。画布将绘制位图，您可以将其保存到 sd 卡。5*（可以跳过）删除第一张照片。

希望这对某人有用:)

# batch-file - 当玩家未提供正确输入时，批处理基于文本的游戏错误

> ID：11688367
> 
> 赞同：0
> 
> 时间：2012-07-27T13:06:35.743
> 
> 标签：batch-file

所以，我和另外两个朋友正在尝试制作一个批量运行的基于文本的游戏，一切都很顺利，好吧，除了这一件事，通常在基于文本的游戏中，当玩家没有输入正确的输入时，游戏通常会响应“不知道是什么（玩家输入）”之类的内容，而在我们的情况下，它只是出现错误并继续下一行，所以，我的问题是，我们如何才能解决这个问题并做到这一点基于文本的游戏应该怎么做？

谢谢！

这是一些代码：

```
set/p input="What do you want to do?"
if "%input%"=="play" goto :beg: 
if "%input%"=="quit" goto :quit:
if "%input%"=="credits" goto :credits:
if "%input%"=="start" goto :lvl1:
if "%input%"=="ilrdj87imwa" goto :lvl2:
if "%input%"=="valveisevil" goto :lvl3:

pause 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:10:21.863

如果没有看到您正在使用的代码，就很难知道出了什么问题。

尝试使用这样的东西

```
:LOOP
set /p input=Enter input
if %input%==ok (
goto :CONTINUE
) else (
echo Wrong input
goto :LOOP
)

:CONTINUE
REM Input ok, carry on 
```

***更新***

```
set /p input=What do you want to do?
if "%input%"=="play" goto :beg 
if "%input%"=="play again" goto :pa
if "%input%"=="quit" goto :quit

:play
echo Play
pause >nul

:pa
echo Play again
pause >nul

:quit
exit >nul 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T02:15:33.840

你也可以尝试使用这样的东西......我不确定，但我认为你使用参数 eq(equals) neg(Negative) 注意：eq 实际上可能是 eg 但我不确定......

编辑：实际参数是 equ 和 neg

```
:loop
set /p choice=

if %choice% equ 1 goto game
if %choice% equ 2 goto info
if %choice% equ 3 goto options
if %choice% equ 4 goto exit
if %choice% neg 1 goto error

:error
echo Error you choose the wrong one...
echo Type c to continue
set /p start=

if %start% egu c goto loop
if %start% egu C goto loop
if %start% neg c goto error
if %start% neg C goto error 
```

您必须将 neg 1 放在最后，否则如果您在哪里不输入 1，如果您不输入任何内容，则代码将永远无法工作，然后它会进入 ERROR

# c# - CLR 集成问题

> ID：11688368
> 
> 赞同：1
> 
> 时间：2012-07-27T13:06:36.543
> 
> 标签：c#, sql-server, sqlclr

我正在尝试使用 C# 在 Sql Server 2008 中遵循 CLR 集成的简单示例： [http ://www.sqlservercentral.com/articles/SQL+Server+2008/87743/](http://www.sqlservercentral.com/articles/SQL+Server+2008/87743/)

但是当我尝试部署项目时，它会抛出一个错误：

> 开始将程序集 SimpleCLRIntegrationNew.dll 部署到服务器 xxxxxxxxx\SQLExpress：TableName C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\TeamData\Microsoft.Data.Schema.SqlClr.targets(96,5)：错误：无法连接到服务器 xxxxxxxxxx\SQLExpress BlogData：用户“sa”登录失败。

但是连接正确且有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T17:28:06.627

I don't really understand the technical background here, but I noticed the following problem:

When in VisualStudio, check the Project Properties, and under the Database Tab you have the Connection string.

It looks something like this:

```
Data Source=[ServerName];Initial Catalog=[DBName];Integrated Security=True 
```

I unfortunately didn't copy the connection string from before - but instead of `Integrated Security=True` it had something with `...User...`. I think I had UserID=sa specified, but don't remember exactly, and I don't know why the connection string was set that way.

I clicked the Browse-button and refreshed the connection (chose my DB and clicked 'OK'). The connection string for the project was reset with the `Integrated Security=True option`set.

I don't know if it matters, but in my CLR I'm connecting to the db using `"context connection=true"`

# java - 传递 jIntArray 给出不满意的链接错误

> ID：11688371
> 
> 赞同：0
> 
> 时间：2012-07-27T13:06:46.587
> 
> 标签：java, android, c++, java-native-interface

我正在编写一个通过 jni 与 C++（不是 C）进行通信的 Android 应用程序。我能够成功传递一个 jstring，所以设置有效，但现在我想传递一个 jintarray。但是，代码在本机方法上返回了一个不满意的链接错误，所以我认为我没有正确返回一个 jintarray。

```
extern "C" {

JNIEXPORT jintArray JNICALL Java_com_example_optimuse_MainActivity_generate(JNIEnv* env, jobject thiz, jintArray arr);

};

JNIEXPORT jintArray JNICALL Java_com_example_optimuse_MainActivity_generate(JNIEnv* env, jobject thiz){

    int mymusic[6];
    mymusic[0]=60;
    mymusic[1]=64;
    mymusic[2]=67;
    mymusic[3]=72;
    mymusic[4]=67;
    mymusic[5]=64;

    jintArray jmymusic = env->NewIntArray(6);

    env->SetIntArrayRegion(jmymusic, 0, 6, mymusic);

    return jmymusic;
} 
```

我在java中这样称呼它：

```
int[] music = generate(); 
```

我想我在做一些基本错误的事情。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:26:25.150

@迈克尔天哪！你说的对。由于分辨率的原因，这在我的屏幕上被截断了 ;-) 在我对导入数组所做的所有测试中一定已经存在。

谢谢一百万，当然应该是

```
JNIEXPORT jintArray JNICALL Java_com_example_optimuse_MainActivity_generate(JNIEnv* env, jobject thiz);

}; 
```

# sql - 使用 excel vba 将 Userform 数据插入 Access 表

> ID：11688375
> 
> 赞同：2
> 
> 时间：2012-07-27T13:07:07.560
> 
> 标签：sql, ms-access, excel, vba

我目前正在使用 Excel VBA 制作一个简单的库存系统应用程序。我有一个用户表单来获取输入，我想将导入数据保存到几个 Microsoft Access 表中。

我正在尝试从用户窗体中提取数据并在用户按 Enter 时将其输入到访问表中。当我运行此代码时，会使用表 ID 创建一条新记录，但我尝试导入的两条记录留空。

```
 Public Sub AddDatabaseEntry()

      'Initialize all variables
      Dim cn As New ADODB.Connection
      Dim rs As New ADODB.Recordset
      Dim stDB As String, stSQL As String, stProvider As String
      Dim orderNum As String
      Dim orderDate As String

      orderNum = txtOrderNum
      orderDate = txtDate

      stDB = "Data Source= " & ThisWorkbook.Path & "\obsDatabase.accdb"
      stProvider = "Microsoft.ACE.OLEDB.12.0"

      'Opening connection to database
      With cn

          .ConnectionString = stDB
          .Provider = stProvider
          .Open

      End With

     'SQL Statement of what I want from the database
      stSQL = "INSERT INTO Orders (OrderNumber, OrderDate) " & _
              "Values ('" & orderNum & "', '" & orderDate & "')"

      Set rs = cn.Execute(stSQL)

      'Looping through the records I pulled and inserting the data into the comboBox

      cn.Close
      Set rs = Nothing
      Set cn = Nothing

    End Sub

    Private Sub btnAdd_Click()

      AddProduct
      AddDatabaseEntry

    End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:09:40.023

我怀疑您的数据类型错误：

```
tSQL = "INSERT INTO Orders (OrderNumber, OrderDate) " & _
          "Values (" & orderNum & ", #" & orderDate & "#)" 
```

我认为您的订单号可能是数字，因此没有引号，并且日期的分隔符是井号 (#)，而不是引号 (')。

将日期格式化为明确的格式几乎总是更安全：

```
"Values (" & orderNum & ", #" & Format(orderDate,"yyyy/mm/dd") & "#)" 
```

您不能将记录集设置为操作查询，因此：

```
cn.Execute stSQL 
```

最后，可以用参数保存数据类型问题、字符串问题等。

```
stSQL = "INSERT INTO table1 (id, adate) " & _
          "Values (?, ?)"

cmd.ActiveConnection = cn
cmd.CommandText = stSQL
cmd.CommandType = adCmdText
cmd.Parameters.Append _
      cmd.CreateParameter("p1", adInteger, adParamInput, , OrderNum)
cmd.Parameters.Append _
      cmd.CreateParameter("p2", adDate, adParamInput, , OrderDate)

cmd.Execute 
```

顺便说一句，您可以使用单个查询将一系列数字或工作表插入到 Access 表中：

```
INSERT INTO Table1 ( ADate ) 
SELECT SomeDate FROM [Excel 8.0;HDR=YES;DATABASE=Z:\Docs\Test.xls].[Sheet1$a1:a4] 
```

# c# - 在另一个操作系统上引发的任务继续上的未处理 AggregateException

> ID：11688380
> 
> 赞同：1
> 
> 时间：2012-07-27T13:07:35.843
> 
> 标签：c#, wcf, task-parallel-library, continuations, aggregateexception

在进行测试以查看它在不同操作系统上的响应方式时，我在 winForms 应用程序中遇到了一个奇怪的行为。

抛出未处理的长时间运行的操作`AggregateException`（在 XP 32 位机器上测试时）是 WCF（使用`basicHttpBinding`和`Streamed`传输模式）客户端更新过程的一部分。该结构类似于以下代码片段。为了清楚起见，我省略了 WCF 异常处理：

```
var tsUIthread = TaskScheduler.FromCurrentSynchronizationContext();
int filesCount = 0;
List<MessageContract> files;

private void Update()
{
    var cTokenDownloadFiles = new CancellationTokenSource();
    var cTokenUpdateDatabases = new CancellationTokenSource();

    var task1CheckForNewFiles = Task.Factory.StartNew(() => 
    {
        filesCount = proxy.GetFiles();
        If(filesCount == 0)
        {
            cTokenDownloadFiles.Cancel();
            cTokenUpdateDatabases.Cancel();
        }
        else
            files = new List<MessageContract>();
    });

    var task2UpdateControls = task1CheckForNewFiles.ContinueWith(result => 
    {
        UpdateControlsBeforeDownload();

    }, CancellationToken.None, TaskContinuationOptions.None, tsUIthread);

    var task3DownloadFiles = task2.ContinueWith(result => 
    {
        for(int i = 0; i< filesCount; i++)
        {
            try
            {
                files.Add(proxy.DownloadFile());
            }
            catch(IOException)
            {
                cTokenUpdateDatabases.Cancel();
                Task.Factory.StartNew(() => ResetControls, 
                    CancellationToken.None, TaskCreationOptions.None, tsUIthread);
                retryUpdateTimer.Start(); // System.Windows.Forms.Timer
                return;
            }
        }    

    }, cTokenDownloadFiles.Token);

    var task4UpdateDatabases = task3DownloadFiles.ContinueWith(result =>
    {            
        UpdateDatabases();

    },cTokenUpdateDatabases.Token);

    var task5UpdateControls = task4UpdateDatabases.ContinueWith(result =>
    {
        UpdateControlsOnUpdateFinished();

    }, CancellationToken.None, TaskContinuationOptions.None, tsUIthread);

} 
```

你会注意到我将`proxy.DownloadFile()`方法包装在一个 try-catch 块中，我在其中捕获了一个`IO.IOException`. 正如我在文章开头所说的那样，我的 WCF 服务使用`Streamed`传输模式，`basicHttpBinding`因此当操作开始后由于某种原因与服务器的连接丢失时，我需要捕获这种类型的异常。我在 catch 语句中所做的只是取消数据库更新任务，将 UI 控件重置为其主要值，并`Interval`在几秒钟内启动 System.Windows.Forms.Timer，`Update()`如果客户端有互联网，它将再次执行该方法连接性。

虽然整个过程在我的开发环境（Windows7 32 位机器）上按预期工作`IOException`，但当我在 Windows XP 32 位机器上测试我的 winforms 应用程序时，未处理`AggregateException`的 at 会`System.Threading.Tasks.ExceptionHolder.Finalize()`终止应用程序。

有没有人经历过类似的事情？怎么可能只在 XP 机器上抛出异常？我还没有在其他环境中测试过它。实际代码包含更多任务和延续，调用下游业务组件，当涉及到带有延续意大利面的任务异常处理时，我有点迷失了。你能给我一些我应该如何构建异常处理的例子吗？

# sql - 将数据类型从一个数据库表转换为另一个

> ID：11688382
> 
> 赞同：2
> 
> 时间：2012-07-27T13:07:55.190
> 
> 标签：sql, sql-server, sql-server-2008

我对一个大型文本文件进行了批量插入，该文件是对我拥有的现有数据库的更新。我遇到了各种截断错误的麻烦，所以我将所有内容都设置为`varchar(max)`. 现在一切都在 SQL Server 中，我想将数据库 b 的数据类型转换为数据库 a 的数据类型。如果两个数据库具有相同的表名和字段名，有哪些方法可以完成这项工作？或者最好有一个在导入后运行的预先存在的脚本，它是“硬编码”的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:25:29.503

尝试这样的事情并修改结果并执行它

```
declare @sql varchar(max)
set @sql=''
select 
    @sql=@sql+'Alter table '+table_name+' alter column '+column_name+' '+cast(data_type as varchar(100))+
    case when data_type like '%char%' then '(' else '' end +cast(coalesce(CHARACTER_MAXIMUM_LENGTH,'' ) as varchar(100))+
    case when data_type like '%char%' then ')' else '' end+';' 
 from 
    information_schema.columns
where 
    table_name='test'
print @sql 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:33:05.960

您可以创建要从中提取的表的视图，然后将需要更改的列强制转换为您需要将其更改为的数据类型。然后，您可以在适当的数据类型中从该视图中执行所有插入操作。希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:23:12.140

如果要将数据从一个 sql server 数据库移动到另一个数据库，则可以使用[Atlantis Interactive Data Inspector](http://www.atlantis-interactive.co.uk/products/datainspector/default.aspx)。如果您不想这样做，您可以编写数据库 a 中的表，然后`ALTER TABLE [table] ALTER COLUMN`在每列之前粘贴并在数据库 b 上运行。

# jenkins - Siebel 编译与 Jenkins CI 的集成

> ID：11688390
> 
> 赞同：1
> 
> 时间：2012-07-27T13:08:22.103
> 
> 标签：jenkins, siebel

我的任务是使用 Jenkins CI 工具配置 Siebel 编译。我对西贝尔了解不多。因此，请建议是否有人曾经配置过这两个，或者是否有人对集成或工具有一些了解。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-13T17:31:58.993

将 Siebel 构建与 Jenkins 集成非常简单。步骤如下，

1.  在您安装工具的位置添加新的 jnlp slave（窗口机器）。
2.  使用存储库工具在您的窗口机器上下载对象。对于 SVN，您可以使用 Silk svn，或者如果您使用 git，它们可以直接与您的工作集成，因为 Jenkins 提供了相同的插件。
3.  使用主文件夹定义您的文件夹结构。比如applet、bc、bo等。
4.  叫你`siebdev.exe`导入所有对象。你可以通过选项来做到这一点`/batchimport`。它将导入目录中存在的所有 sif 文件

`siebdev.exe " /c "D:\sea81\Tools_2\BIN\ENU\tools.cfg" /d "Local" /u "USER" /p "PASSWORD!" /batchimport "Siebel Repository" overwrite "d:\workspace_future\objects/Applet"`

5.  导入完成后，开始编译。

`tools.cfg" /d "Local" /u "USER" /p "PASSWORD!" /bc "Siebel Repository" "d:\workspace_future\built\siebel.srf"`

6.  现在您还可以创建浏览器脚本，将其压缩并上传到任何 ftp 系统，可用于在集成期间下载文件。

有很多东西可以玩。例如，我创建了一个独特的构建文件，其中包含具有最新更改的存储库、srf 文件、浏览器脚本和其他参考数据，如 lov、系统偏好等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:50:30.287

这可能会帮助您：

[http://siebelunleashed.com/how-to-automate-siebel-full-compile/](http://siebelunleashed.com/how-to-automate-siebel-full-compile/)

它展示了如何自动化 siebel 编译。使用第一部分（命令行的东西）并将其放在 Jenkins 的“执行 Windows 批处理命令”部分。

我不确定您对 Jenkins 有多少经验，所以如果您需要更多详细信息，请发表评论。

# php - 如何显示持续的实时更新，如 facebookticker、meetup.com 主页呢？

> ID：11688397
> 
> 赞同：8
> 
> 时间：2012-07-27T13:08:46.357
> 
> 标签：php, python, node.js, asynchronous, real-time

如何在 facebookticker、meetup.com 主页等浏览器中显示持续的实时更新？在 python、PHP、node.js 中，服务器端的性能影响是什么？另外，如果页面由 akamai 之类的 CDN 缓存，我们如何实现相同的更新？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-27T15:46:47.293

您有两个选项（其他人在上面详细说明）。如果您不熟悉每个选项背后的一些概念性想法，我想我会给出一两行关于它们的信息。请注意，我在非常非常高的层次上介绍这些概念。

您的三个选项是：

1.  短轮询
2.  网络套接字
3.  彗星/长轮询

# 短轮询

**Short Polling**通过强制客户端不断向服务器发送请求，克服了 Client-Server 之间的单向通信，形式如下：

```
Client: Do you have a message for me?
Server: No.
Client: (wait x seconds)
Client: Do you have a message for me?
Server: No.
Client: (wait x seconds)
Client: Do you have a message for me?
Server: Yes. Here it is!
Client: Yay!
Client: (update message) 
```

代表客户的不断唠叨被称为**轮询**。为了实现这种结构，您需要将服务器设置为“监听”来自客户端的这些轮询请求。服务器还必须将这些消息存储在某个地方，以便在消息准备好时，服务器可以传递它们。在非常简单的级别上，您的服务器需要：

*   接受一般网络请求
*   接受轮询请求
*   运行获取消息的后台作业
*   将这些消息存储在某处，以便在轮询请求进入时，服务器可以检查它们。

您还需要将这些轮询请求与用户的某种会话 ID 联系起来，以便正确的消息到达正确的人。总体而言，范式很复杂，在我看来，效率低下。

# 网络套接字

Web Sockets 是 HTML5 的新功能。它们背后的基本思想是客户端可以保持与服务器的直接连接，并且它们可以相互*推送*信息。因此，与通常的做法不同：客户端发送 GET 请求>>服务器响应内容，Web Sockets 允许您保持持续对话。

但是，为了进行设置，您需要：

*   与 WebSocket 兼容的浏览器（并非全部都是）。
*   可以处理 Web 套接字的服务器（不确定如何表达这一点，但并非所有服务器都设置为这种安排）。

设置有点复杂，虽然比长轮询简单：

*   客户端保持与服务器的启用 Web 套接字的连接的连接
*   服务器通过 web socket 将结果**推送给客户端**
*   客户端根据结果更新页面

您会看到这种称为**推送通知**的模式（当然，如果您拥有 iPhone，您会经历过这种情况），因为服务器已被授权向客户端*推送*“东西”（多么不礼貌！）。由于有很多客户端和服务器的细微差别，我建议测试一下[Pusher](http://pusher.com/)之类的东西，它基本上是一个 Web 服务，用于处理 Web Sockets 的所有困难部分。在开始自己设置之前，这将是您测试和使用该模式的一种简单方法。它同时具有客户端和服务器端库。

希望这些信息为您提供解决问题的基准。其他答案包含有关如何解决每种情况的更直接信息。

# 彗星/长轮询

Web Sockets 的另一种看似跨浏览器的方法是长轮询（参见[Comet](http://en.wikipedia.org/wiki/Comet_(programming))）。在这种情况下，您的客户端建立与服务器的连接并将其挂起，等待数据被推回。这个设置有点复杂，但它确实代表了**Short Polling**和**Web Sockets**之间的中间立场。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-27T13:13:49.460

我建议使用 SockJS 或 Socket.io 作为客户端 JavaScript 库来实现类似套接字的连接，然后在服务器端使用 Tornado 将任何状态更改发布到客户端。代码相当简单。

客户端代码取决于您选择的库。SockJS 或 SocketIO。或者，如果您只想直接使用 Websockets，这非常简单：

```
update_socket = new WebSocket("ws://my_server.com/listening_url");
update_socket.onmessage = function (evt) {
    $("#my_div").html(evt);
}; 
```

服务器端代码也很简单：

```
import tornado

class UpdateHandler(tornado.websocket.WebSocketHandler):

    def open(self):
        self.write_message('Hi client')
        # listen for some events that are occurring
        for message in function_that_generates_events():
            self.write(message) 

    def on_message(self, message):
        # Do something with incoming messages

    def on_close(self):
        # tidy up

app = tornado.web.Application(('r/listening_url',UpdateHandler))
app.listen(9000) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:10:57.813

您可以使用轮询、长轮询或者如果您想要一个推送系统。最简单的就是民意调查。但是，所有解决方案都需要客户端编码。

性能影响取决于您的解决方案。最容易实施的是民意调查。一次短频率的轮询有效地执行一个请求，例如 100 毫秒或模拟实时。长轮询的影响较小，但它会在或多或少的时间内保持打开大量请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T13:12:32.470

[码头](http://jetty.codehaus.org/jetty/)

[Ajax 推送引擎](http://www.ape-project.org/)

[套接字.io](http://socket.io)

这些是实现 Comet 的方法

我会推荐使用 Node.js 实现的 Socket.io

因为它利用最佳可用连接方法

# javascript - 将随机空间放入动态网格中

> ID：11688398
> 
> 赞同：2
> 
> 时间：2012-07-27T13:08:50.580
> 
> 标签：javascript, jquery

我有一个动态生成网格的单词列表。

问题是我需要一个 6x6 网格，如果列表中没有足够的单词来促进 6x6（12 个单词），那么它不会。

我怎样才能使它始终生成 6x6 网格，随机生成单词的位置并用空单元格填充空白？

```
var listOfWords = ["mat", "cat", "dog", "pit", "pot", "fog"];
var shuffledWords = listOfWords.slice(0).sort(function() {
    return 0.5 - Math.random();
}).slice(0, 6);
var tbl = document.createElement('table');
tbl.className = 'tablestyle';
var wordsPerRow = 2;
for (var i = 0; i < shuffledWords.length; i += wordsPerRow) {
    var row = document.createElement('tr');
    for (var j = i; j < i + wordsPerRow; ++j) {
        var word = shuffledWords[j];
        for (var k = 0; k < word.length; k++) {
            var cell = document.createElement('td');
            cell.textContent = word[k];
            row.appendChild(cell);
        }
    }
    tbl.appendChild(row);
}
document.body.appendChild(tbl); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:50:30.557

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">
            function loaded() {
                    var tbl = document.getElementById("tbl");
                if(tbl != null) {
                    tbl.parentNode.removeChild(tbl);
                }
                var nrOfWordsToUse = Number(document.getElementById("howManyWords").value);
                if(nrOfWordsToUse > 12 || nrOfWordsToUse < 0) {
                    alert("nrOfWordsToUse has to be between 0 and 12");
                } else {
                    var initialListOfWords = ["mat", "cat", "dog", "pit", "pot", "fog", "aha", "beb", "pan", "pet", "pir", "pem"];
                    listOfWords = [];
                    for(var i = 0; i < nrOfWordsToUse; i++)
                        listOfWords[i] = initialListOfWords[i];
                    var positions = [];
                    for(var i = 0; i < 6; i++) {
                        positions[i] = ["", "", "", "", "", ""];
                    }
                    for(var i = 0; i < listOfWords.length; i++) {
                        var y = number0to5();
                        var x = number0or3();
                        if(positions[y][x] == "") {
                            positions[y][x] = listOfWords[i].charAt(0);
                            positions[y][x + 1] = listOfWords[i].charAt(1);
                            positions[y][x + 2] = listOfWords[i].charAt(2);
                        } else {
                            i--;
                        }
                    }
                    var table = document.createElement("table");
                    table.id = "tbl";
                    document.body.appendChild(table);
                    for(var i = 0; i < positions.length; i++) {
                        var row = table.insertRow(-1);
                        for(var j = 0; j < positions[i].length; j++) {
                            var cell = row.insertCell(-1);
                            cell.innerHTML = positions[i][j];
                        }
                    }
                }
                alert("end");
            }
            function number0to5() {
                return Math.floor(Math.random() * 6);
            }
            function number0or3() {
                return Math.random() > 0.5 ? 0 : 3;
            }
        </script>
    </head>
    <body>
        <input id="howManyWords" value="6" /><input type="button" onclick="loaded()" value ="doIt"/>
    </body>
</html> 
```

这是一个小提琴：http: [//jsfiddle.net/dpbzq/12/](http://jsfiddle.net/dpbzq/12/)

* * *

关于您帮助您将我的代码构建到您的代码中的请求：

我做了一个新的小提琴：http: [//jsfiddle.net/uv74h/2/](http://jsfiddle.net/uv74h/2/)

如您所见，它是一个函数：rndSpaces。它需要1个参数；由 3 个字母组成的单词数组，最多 12 个单词。他们不必预先洗牌；该功能将随机播放它们。该函数将尝试查找 id == "myTable" 的表。如果找不到表，它会创建一个表并将其附加到 id == "myDiv" 的 div 中（有一行注释掉；如果要将其附加到正文，请取消注释该行并注释掉将表格附加到 div 的行）。该函数清除表中的所有内容，创建一个 6x6 网格并用单词填充它。我给表格、行和单元格赋予了 CSS 样式（tablestyle、myRow 和 myCell）。

这是一个函数被调用的例子：

```
rndSpaces(["pim", "pam", "pet", "rol", "fik", "fak", "ral"]);​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:37:04.073

[更新了 JSFiddle](http://jsfiddle.net/e5BKq/23/)

我补充说：

```
while(listOfWords.length < 6)
    listOfWords.push("   "); 
```

因此，如果没有足够的单词，它会在数组后面附加空的“单词”（3 个空格）并被打乱，这会导致随机空格

* * *

**编辑**

[JSFiddle 12个字](http://jsfiddle.net/e5BKq/27/)

**编辑2**

我想这就是你想要的： [JSFiddle with 6 words,filled with spaces](http://jsfiddle.net/e5BKq/32/)

# c# - 比较验证器不会停止回发

> ID：11688399
> 
> 赞同：2
> 
> 时间：2012-07-27T13:08:54.723
> 
> 标签：c#, asp.net, postback, buttonclick, comparevalidator

```
Below is my mark up. 

<asp:TextBox ID="txtPatientDateOfBirth" runat="server" 
    CssClass="rightDivInnerControls" ClientIDMode="Static" 
    CausesValidation="True">
</asp:TextBox>
<asp:CompareValidator ID="cvPatientDateOfBirth" runat="server" 
    ErrorMessage="Enter proper date." 
    Type="Date" ControlToValidate="txtPatientDateOfBirth" Font-Bold="True"  
    Operator="DataTypeCheck"
    ValidationGroup="FirstPreview">
</asp:CompareValidator>    

<asp:Button ID="btnSaveChanges" runat="server" 
    Text="Save Changes"  OnClientClick="return showFinalReviewAlert();" 
    CssClass="btnPrimary hideInPrint btnEditFinalReport" 
    ValidationGroup="FirstPreview" 
    onclick="btnSaveChanges_Click"  ClientIDMode="Static"/> 
```

当我将日期更改为错误格式时，它会立即向我显示**错误消息**。

![在此处输入图像描述](../Images/c08973ce5e7367fd1f39c9e4b1f4c79b.png)

但是当我单击“btnSaveChanges”按钮时，它会进行回发。我认为缺少某些东西，因为它正在回发。

谁能帮我解决这个问题。如果验证失败，我想**停止回发**。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:36:52.150

实际上，这些 ASP.NET 验证器的工作方式（在此处描述：[Validating User Input in ASP.NET Web Pages](http://msdn.microsoft.com/en-us/library/7kh55542.aspx)）与您所期望的有点不同 - 它应该是回发的。从链接的 MSDN 文档：

> 当用户向服务器提交页面时，将调用验证控件以逐个控件检查用户输入。如果在任何输入控件中检测到验证错误，**则页面本身将设置为无效状态，以便您可以在代码运行之前测试其有效性。**

强调我的。当他们说“将页面设置为无效状态”时，他们指的是[Page.IsValid](http://msdn.microsoft.com/en-us/library/system.web.ui.page.isvalid.aspx)属性。因此，当您运行服务器端代码时，您需要将其包装在一个块中，如下所示：

```
if(Page.IsValid)
{
    // Run code now that validation has been verified.
} 
```

为了完全防止回发，您只需要使用 JavaScript（客户端代码）来禁用提交按钮，直到所有控件都处于有效状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T13:50:37.040

通过返回按钮`showFinalReviewAlert();`中的值`OnClientClick`，您将阻止页面验证发生。

这实际上是正在呈现的 HTML（为查看而简化）......

```
<input type="submit" 
       id="btnSaveChanges" 
       onclick="return showFinalReviewAlert();WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;btnSaveChanges;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" 
       name="btnSaveChanges"> 
```

这其中重要的一点是...

```
onclick="return showFinalReviewAlert();WebForm_DoPostBackWithOptions.... 
```

这意味着无论`showFinalReviewAlert()`返回什么，`WebForm_DoPostBackWithOptions`都永远不会到达。但是，因为它是一个`<input type="submit">`页面，无论如何都会将其打包到服务器上。

因此，如果返回值`showFinalReviewAlert`必须通过返回值来阻止回发的发生`false`，则应将`OnClientClick`属性设置为...

```
OnClientClick="if(showFinalReviewAlert()==false){return false;}" 
```

换句话说，如果`showFinalReviewAlert`return`false`则停止按钮继续任何回发处理......但如果它 return `true`，则允许回发验证发生。

另一方面，如果结果`showFinalReviewAlert()`无关紧要...只需删除`return`即可简单地给出...

```
OnClientClick="showFinalReviewAlert();" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-16T17:36:02.210

在您的服务器控件 asp:button 中添加 OnClientClick 和 Onclick 事件，

**asp:Button** ID="btnSave" runat="server" Text="Save" OnClick="btnSave_OnClick" **OnClientClick** ="if(validateTotal()==false){return false;}"

如果函数 OnClientClick 事件将返回 false，则它不会回发。

你的 validateTotal() 可能是这样的，

```
function validateTotal() 
{
    if (parseInt($('.lblTotal').text().trim()) > 100) {
        alert("Please check total value, it should not be more than 100%");
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-17T06:45:35.943

你`ValidationGroup`在`TextBox`控件中丢失了。

```
<asp:TextBox ID="txtPatientDateOfBirth" runat="server" 
    CssClass="rightDivInnerControls" ClientIDMode="Static" 
    CausesValidation="True"
    ValidationGroup="FirstPreview">
</asp:TextBox> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T13:36:41.063

这是因为您使用过：

```
OnClientClick="return showFinalReviewAlert();" 
```

你在做什么`showFinalReviewAlert();"`？

你可以在里面做`showFinalReviewAlert();"`的是添加 `return false`将停止页面的回发。

```
<script language="javascript">
    function showFinalReviewAlert() {
        //
        //   Your coding stuffs...
        //
        return false;
    }
</script> 
```

# c# - 如何使用 XmlReader 读取 List 中的数据

> ID：11688402
> 
> 赞同：0
> 
> 时间：2012-07-27T13:09:17.053
> 
> 标签：c#, xml-parsing

我想获取 XML 文件的内容并将其转储到列表中。然后我想获取列表中的字符串并使用 XmlReader 解析它们以获取数据。有没有办法做到这一点？

我对 XmlReader 不是很熟悉，也不是 C# 专家，但我想使用这样的东西：

```
List<string>fileData = new List<string>();
string xmlData = "somestring";
XmlReader reader = XmlReader.Create(new StringReader(xmlData));

/* put all the data in a file into fileData */

foreach (string s in fileData)
{
   /* use reader.WHATEVERFUNCTION I need to parse fileData for my data */
} 
```

有没有办法做到这一点？似乎我必须将 .Create 函数放在 foreach 中，这意味着我每次需要使用函数时都必须创建一个新的阅读器。由于许多原因，这似乎不是最好的想法。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:15:21.223

根据您正在使用的 xml：

```
XDocument doc = XDocument.Parse("<root><node>value1</node><node>value2</node></root>");
List<String> data = doc.Root.Elements().Select(e => e.Value).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:14:26.123

你应该看看 System.Xml.Linq 命名空间，它使用起来真的更简单：http: [//msdn.microsoft.com/en-us/library/bb343181.aspx](http://msdn.microsoft.com/en-us/library/bb343181.aspx)

# html - 将 3 个 div 并排放置在未定义大小的 div 中

> ID：11688406
> 
> 赞同：3
> 
> 时间：2012-07-27T13:09:30.803
> 
> 标签：html, css

我有一个标题，它占据了屏幕的整个宽度。在我的标题中，我想放置 3 个 div，它们应该彼此相邻对齐。侧面的 div 是固定宽度的，中间应该占用其他可用空间。所以我不知道标题的宽度，也不知道中间容器的宽度。

现在我有这个代码：html：

```
<div id="header">
  <div id="menu-container">
    menu goes here
  </div>
  <div id="logo-container">
    logo goes here
  </div>
  <div id="music-player-container">
    music player comes here
  </div>
</div> 
```

和CSS：

```
#header {
  height: 200px;
  margin: 0;
  padding: 0;
  border: 0;
}

#menu-container {
  width: 400px;
  height: inherit;
  float: left;
}

#logo-container {
  height: 100%;
  background-image: url('../images/logo.png');
  background-repeat: no-repeat;
  background-position: center;
  float: left;
  width: auto;
}

#music-player-container {
  width: 400px;
  height: inherit;
  float: left;
} 
```

根据浮动的其他问题应该可以工作....它没有

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T13:16:13.797

您可以使用具有负边距的浮动 div：

[http://jsfiddle.net/cy5E7/1/](http://jsfiddle.net/cy5E7/1/)

**在你的情况下：**

[http://jsfiddle.net/AjVHy/](http://jsfiddle.net/AjVHy/)

负边距比左/右浮动固定 div 更好。如果用户的窗口非常小，我们不会弄乱布局。看看这个**不好的**例子（将浏览器窗口调整为小宽度）：http: [//jsfiddle.net/surendraVsingh/qZLHb/1/](http://jsfiddle.net/surendraVsingh/qZLHb/1/)（感谢@SVS）。在正常的浮动布局中，只有当父容器足够宽时，所有浮动的 div 才会就位。

标准浮动布局的另一个缺点是当我们想要列布局但我们不知道中间内容的高度时，看起来可以看起来

*   [浮动布局，动态内容高度](http://jsfiddle.net/cy5E7/4/)
*   [负边距布局，动态内容高度](http://jsfiddle.net/cy5E7/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:26:47.953

切换第二个和第三个 div 的顺序，然后使用这个 CSS。

```
#menu-container, #music-player-container {
    float:left;
    width: 400px;
}
#music-player-container {
    float:right;
}
#logo-container {
    margin:0 400px;
} 
```

[jsfiddle 示例](http://jsfiddle.net/mf6qr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:20:19.410

我不确定您打算编写什么代码，但在我看来，我认为它是这样的：“您希望有 3 列，第 1 列是固定的，第 2 列是流体宽度，第 3 列又是固定宽度。”

我在这里无法理解的是，对于一个非常小宽度的显示器（例如 1024x768 分辨率），两边都有一个 400px 的列只会给你留下 224px 的徽标空间。会显得不自然。

无论如何，如果您仍想继续，我建议您将所有三个 div [ `menu-container, logo-container & music-player-container`] 包含在另一个名为 header 的元素中（如果您使用的是 HTML5）或另一个具有您喜欢的名称的 div（如果您使用的是 <= HTML 4.01) 然后将其宽度固定为 100%；和200px的固定高度；。

然后让 menu-container`float: left;`和 music-player-container `float: right;`。这将为徽标容器提供空间。让 logo-container 有一个`width: auto;`. 如果我是对的，这样做会给你一个基本的半流体标题布局。

干杯，希望你的问题得到快速解决:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T13:28:26.130

我理解你想要做什么，我很遗憾地说，我还没有找到解决这个问题的方法，而不使用一些丑陋的 JavaScript/jQuery 形式。

本质上，问题在于 CSS 没有任何属性（即使在摆弄显示属性时也没有）可以让您拥有两个元素，一个具有固定宽度，另一个占据 div 中的剩余空间。有一些带有浮点数的选项可以让你非常接近地模拟这一点，但我可以告诉你，它们不太可能给你真正想要的东西。

那里有一个资源，一个名为 Bootstrap 的项目，您可以像安装任何其他 jQuery 插件一样安装它（或者您实际上可以像“CSS”插件一样使用它 - 你会明白我的意思 - 如果你不想要JavaScript），这将使你能够做你想做的事。

这是链接：http: [//twitter.github.com/bootstrap/download.html](http://twitter.github.com/bootstrap/download.html)

我强烈建议您首先查看文档，以确保您了解任何警告/限制。

祝你好运！

编辑：我喜欢 rogal 的回答，但在使用它之前，您应该记住，这样做会消除您添加左边框的能力，并且很难将背景图像应用于具有负边距的 div。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T13:45:29.040

另外一个选项：

```
#header {
    display: table;
    height: 200px;
    margin: 0;
    padding: 0;
    border: none;
}
#header > div {
    display: table-cell;
    height: inherit;
}
#menu-container, #music-player-container {
    width: 400px;
}
#logo-container {
    background-image: url('../images/logo.png');
    background-repeat: no-repeat;
    background-position: center;
} 
```

高温高压

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-27T14:04:21.093

你当然可以用一张桌子.. -*隐藏*-

标题 div 中的内容如下：

```
<table width=100%>
    <tr>
        <td width=200>
            menu
        </td>
        <td>
            logo
        </td>
        <td width=400>
            music
        </td>
    </tr>
</table> 
```

（对于 CSS atm 来说太懒了）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-02T09:04:51.737

想不出一个很好的方法来做到这一点。不是一个理想的解决方案，但你可以把它变成一张桌子。

```
<table>
    <tr>
        <td>
            <div></div>
        </td>
        <td>
            <div></div>
        </td>
        <td>
            <div></div>
        </td>
    </tr>
</table> 
```

然后，您可以将 div 的尺寸和包含它的 td 设置为相同。

# c# - NHibernate 得到错误的日期时间范围

> ID：11688407
> 
> 赞同：-1
> 
> 时间：2012-07-27T13:09:34.843
> 
> 标签：c#, nhibernate

在NHibernate + Oracle中，生成了一个查询

```
SELECT *
FROM mytbl this_ 
WHERE this_.PRICING_DATE >= :p0 and this_.PRICING_DATE <= :p1 
:p0 = 7/25/2012 12:00:00 AM [Type: DateTime (0)], :p1 = 7/26/2012 12:00:00 AM [Type: DateTime (0)] 
```

为什么此查询将在 2012 年 7 月 26 日返回数据？我想要的是在 7/25 上获取数据。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:28:49.203

这是因为 2012 年 7 月 26 日 == 到 2012 年 7 月 26 日凌晨 12:00:00。您应该使用 < :p1。即便如此，我仍隐约记得午夜 12 点左右（在 SQL 中）的时间有一些小问题。尝试 <=，但让 :p1 = 7/25/2012 11:59:59 PM

# ios - 如何创建带有后退按钮的导航栏？

> ID：11688411
> 
> 赞同：16
> 
> 时间：2012-07-27T13:09:46.310
> 
> 标签：ios, xcode4, uinavigationbar, xcode4.3, uinavigationitem

我对**iOS App Development**很陌生。

在我的应用程序中，我试图使用导航栏后退按钮从第二个视图导航到第一个视图，但是在视图中拖放导航栏时，我只能获得带有标题的栏。

我真的很担心，我不确定我做错了什么？我正在使用**Xcode 4.3。**和故事板来设计视图。

**我现在得到什么**

![同时拖放导航栏](../Images/b87caa7626d41b803892b67fef313665.png)

**寻找**

![寻找](../Images/bffef567fc88da10af5cc1fc5a689313.png)

谢谢你们的帮助

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-27T13:15:33.053

**Xcode 为您处理这个问题。**

突出显示您的第一个控制器。转到菜单栏，然后​​单击**Embed In > Navigation Controller**。现在使用`UIButton`或其他东西，控制单击并从您的第一个视图控制器的按钮拖动到您的第二个视图控制器并使其成为**Push segue**。后退按钮不会出现，但如果你运行它，它就会出现。

所以你应该在故事板中有 3 个视图。**导航控制器**、您的**第一个视图控制器**和您的**第二个视图控制器**。

[这](https://stackoverflow.com/questions/5752297)是使用代码执行此操作的一种方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T14:45:37.593

如果你想在导航中获得一个普通的按钮，就像iphone的后退按钮（只有一个视图），你必须添加图像，我认为没有其他办法。当然，如果你有2个或更多的视图控制器，你会使用navigationItem .backBarButtonItem 没有添加图片。但是第一个viewcontroller 没有backButton。

像这样的代码：

```
navigationBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
UINavigationItem *navigationItem = [[[UINavigationItem alloc] initWithTitle:@"Detail"] autorelease];

        UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 70, 30)];

    [button setImage:[UIImage imageNamed:@"plain.png"] forState:UIControlStateNormal];
    [button addTarget:self action:@selector(buttonClicked:)
        forControlEvents:UIControlEventTouchUpInside];

    UIBarButtonItem *buttonItem = [[UIBarButtonItem alloc]
                               initWithCustomView:button];

    navigationItem.leftBarButtonItem = buttonItem;

    [buttonItem release];
    [button release];
[navigationBar pushNavigationItem:navigationItem animated:NO];
[self.view addSubview:navigationBar]; 
```

# http - 如何生成 HTTP 1.1 标头以流式传输视频

> ID：11688413
> 
> 赞同：2
> 
> 时间：2012-07-27T13:09:49.837
> 
> 标签：http, http-1.1

从 HTTP 服务器流式传输视频的 HTTP 1.1 标头是什么？目前我正在发送

传输编码：分块

这在 google chrome 的 flash 视频播放器中运行良好，但无法在 Firefox 中加载。

# jquery - 使用自定义 jQuery 加载 jQuery 插件

> ID：11688416
> 
> 赞同：1
> 
> 时间：2012-07-27T13:10:07.607
> 
> 标签：jquery, plugins

我有自定义 jQuery：

```
jQueryCustom = jQuery.noConflict(true); 
```

我在单独的文件中有一个插件：

```
(function (window, document, $, undefined) {
    // ......
}(window, document, jQuery)); 
```

将我的 jQueryCustom 作为 jQuery 传递给插件的最佳方法是什么？

我认为使用插件编辑库文件不是一个好主意。

PS我想将自定义jQuery和插件加载到页面中，**可能**已经有另一个版本的jQuery和另一个版本的这个插件..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:34:01.403

```
<!-- load newest version of jQuery (1.7.2) -->
<script src="http://example.com/jquery-1.7.2.js"></script>
<script>var jQuery_1_7_2 = $.noConflict(true);</script>

<!-- load custom version of jQuery (1.1.3) -->
<script src="http://example.com/jquery-1.1.3.js"></script>
<script>var jQuery_1_1_3 = $.noConflict(true);</script>

<!-- load your plugin -->
<script src="http://example.com/yourplugin.js"></script>

<script>
/* do something with the newest version of jQuery */
jQuery_1_7_2('#selector').function(); 

/* run your plugin using the custom version of jQuery */
jQuery_1_1_3('#selector').pluginFunction();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T10:50:20.853

我决定在自定义 jQuery 插件的上部闭包中编辑 jQuery 变量名。

# java - 如何在 JBoss7 中将 src/main/webapp 文件夹（Maven）部署为应用程序？

> ID：11688417
> 
> 赞同：3
> 
> 时间：2012-07-27T13:10:10.087
> 
> 标签：java, maven, java-ee-6, war, jboss7.x

我想将 Maven 项目中的 src/main/webapp 文件夹部署为 JBoss7 中的应用程序。我想做的是：

*   保存和刷新 xhtml、css、js 等。
*   做`mvn prepare-package war:inplace`全面部署

这当然只是为了开发。我希望拥有与 Maven Jetty 插件类似的工作流程，但适用于 JEE6 应用程序。

部署扫描程序正在寻找 *.war 目录。

我目前的解决方案：

*   使用 jboss-as-maven-plugin 在包阶段部署 - 我需要在每个 CSS、JS 或 XHTML 更改上重新部署
*   将我的目标文件夹添加到部署扫描器，`war:exploded`并将资源复制到战争目录。完全重新部署需要使用 antrun 插件创建 .dodeploy 文件，这非常难看。节省资源后我仍然需要运行maven。我不希望我的资源被复制到任何地方。

我的没有什么特别的`pom.xml`：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>com.pg</groupId>
<artifactId>jeesample</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>war</packaging>

<name>jeesample</name>

<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-web-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>org.primefaces</groupId>
        <artifactId>primefaces</artifactId>
        <version>3.3.1</version>
    </dependency>

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.6.6</version>
    </dependency>

</dependencies>

<build>
    <finalName>jeesample.war</finalName>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>

</build>

<repositories>
    <repository>
        <id>prime-repo</id>
        <name>PrimeFaces Maven Repository</name>
        <url>http://repository.primefaces.org</url>
        <layout>default</layout>
    </repository>
</repositories> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T13:42:37.170

尝试使用[maven-war-plugin](http://maven.apache.org/plugins/maven-war-plugin/)。Maven 应该添加您的依赖项。但是请注意，JBoss 7 有一个新的模块依赖系统，所以如果您想使用 jboss 提供的一些内部模块，您必须像示例中那样在 MANIFEST.MF 文件中声明它们，并将它们标记为 pom.xml 中提供的。 xml。JBoss 7 在部署时读取清单并加载模块

这是一个对我有用的例子：

```
 ...
    <plugin>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1.1</version>
            <configuration>
                <failOnMissingWebXml>false</failOnMissingWebXml>
                <archive>
                    <manifestEntries>
                        <Built-By>Dev Team</Built-By>
                        <Dependencies>javaee.api, javax.faces.api, javax.xml.rpc.api,
                            org.joda.time, org.hibernate, org.hibernate.validator,
                            org.dom4j, org.picketlink</Dependencies>
                    </manifestEntries>
                </archive>
            </configuration>
        </plugin>
     ... 
```

使用此配置创建正确的战争 (mvn war:war)。此外，当我在 Eclipse 中右键单击项目并选择 >“在服务器上运行”时，战争已正确部署。xhtml 等资源在保存时会自动重新部署，并且更改在刷新时可见。我还安装了 m2eclipse 插件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:17:53.987

如果你可以切换到播放框架，这将大大提高生产力。真的……就像铁轨上的红宝石。

此外，如果您使用的是 Maven，这可能有助于在安装阶段自动部署 EAR

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <version>2.4</version>
    <configuration>
        <artifactItems>
            <artifactItem>
                <groupId>${project.groupId}</groupId>
                <artifactId>${project.artifactId}</artifactId>
                <version>${project.version}</version>
                <type>ear</type>
                <overWrite>true</overWrite>
                <outputDirectory>${jboss-inst}/deploy</outputDirectory>
            </artifactItem>
        </artifactItems>
        <skip>${skip.ear.auto.deployment}</skip>
    </configuration>
    <executions>
        <execution>
            <phase>install</phase>
            <goals>
                <goal>copy</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

# model - CakePHP var $useTable = false 仍然产生“未找到基表或视图：1146 ...”错误

> ID：11688423
> 
> 赞同：2
> 
> 时间：2012-07-27T13:10:25.720
> 
> 标签：model, cakephp-2.0

我无法解决这个问题，我宁愿不必用 unBinds 填充我的控制器。我有一个需要验证的贤者薪酬表格。因此，我使用以下内容建立了一个圣人模型：

```
class Sage extends AppModel {

    var $useTable = false;
    var $_schema = array(
        'CardHolderName'        =>array('type'=>'string', 'length'=>100), 
        'CardType'      =>array('type'=>'string', 'length'=>100), 
        'CardNumber'        =>array('type'=>'string', 'length'=>100), 
        'EndMonth'      =>array('type'=>'string', 'length'=>100), 
        'EndYear'       =>array('type'=>'string', 'length'=>100), 
        'BILLING_address_line_1'        =>array('type'=>'string', 'length'=>100), 
        'BILLING_city'      =>array('type'=>'string', 'length'=>100), 
        'BILLING_county'        =>array('type'=>'string', 'length'=>100), 
        'BILLING_country'       =>array('type'=>'string', 'length'=>100), 
        'BILLING_country'       =>array('type'=>'string', 'length'=>100), 
        'BILLING_post_code'     =>array('type'=>'string', 'length'=>100), 
        'DELIVER_name'      =>array('type'=>'string', 'length'=>100), 
        'DELIVER_address_line_1'        =>array('type'=>'string', 'length'=>100), 
        'DELIVER_city'      =>array('type'=>'string', 'length'=>100), 
        'DELIVER_county'        =>array('type'=>'string', 'length'=>100), 
        'DELIVER_country'       =>array('type'=>'string', 'length'=>100), 
        'DELIVER_post_code'     =>array('type'=>'string', 'length'=>100), 
        'CSV'       =>array('type'=>'string', 'length'=>3)

    );

    public $validate = array(
        'CardHolderName'=>array(
            'Please enter your name.'=>array(
                'rule'=>'notEmpty',
                'message'=>'Please enter your name.'
            )
        ),
        'CardType'=>array(
            'Card Type Select'=>array(
                'rule'=>'notEmpty',
                'message'=>'You must select a card type.'
            )
        ),
        'CardNumber'=>array(
            'Card Number Length'=>array(
                'rule'=> array('between', 16, 20),
                'message'=>'Card numbers are at least 16 numbers long.'
            ),
            'Not empty'=>array(
                'rule'=> 'notEmpty',
                'message'=>'Card Number is missing.'
            ),
            'Is a number' => array(
                'rule' => 'numeric',
                'message' => 'This must be a number (no spaces either).'
            )
        ),
        'EndMonth'=>array(
            'End Month Select'=>array(
                'rule'=>'notEmpty',
                'message'=>'No Month.'
            )
        ),
        'EndYear'=>array(
            'End Year Select'=>array(
                'rule'=>'notEmpty',
                'message'=>'No Year.'
            )
        ),
        'CSV'=>array(
            'Card Number Length'=>array(
                'rule'=> array('between', 3, 3),
                'message'=>'A CSV is 3 numbers long.'
            ),
            'CSV not empty'=>array(
                'rule'=>'notEmpty',
                'message'=>'Please enter your security code.'
            ),
            'Is a number' => array(
                'rule' => 'numeric',
                'message' => 'A CSV is 3 numbers long.'
            )
        )
    );
} 
```

但是，当我转到订单的索引页面（其中有一个`$this->paginate('Order');`）时，我得到以下信息：

> 错误：SQLSTATE [42S02]：未找到基表或视图：1146 表 'wr_shop.sages' 不存在
> 
> SQL 查询： SELECT COUNT(*) AS `count`FROM `wr_shop`。`orders`如左 `Order`加入`wr_shop`。`users`AS `User`ON ( `Order`. `user_id`= `User`. `id`) 左连接`wr_shop`。`baskets`AS `Basket`ON ( `Basket`. `order_id`= `Order`. `id`) 左连接`wr_shop`。`sages`AS `Sage`ON ( `Sage`. `order_id`= `Order`. `id`) 其中 1 = 1

有人可以告诉我我错过了什么，我似乎无法在任何地方在线找到答案。

---UPADATE--- 我已经通过创建一个'sages'表临时解决了这个问题，即使它永远不会保存任何数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T01:03:35.713

今天我遇到了同样的问题，就我而言，问题是我的表单发送了 ID 字段。当我删除 ID 字段时，验证执行得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T19:57:46.873

您的 Sage 模型未正确加载，而是使用了 AppModel 实例。

检查路径、文件名和文件扩展名：app/Model/Sage.php

# mysql - 如何恢复 MYSQL 表

> ID：11688425
> 
> 赞同：2
> 
> 时间：2012-07-27T13:10:31.587
> 
> 标签：mysql, phpmyadmin

不小心我检查了 phpmydamin 的所有表并单击 drop 我丢失了我的数据库中的所有表，你能帮我恢复吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:14:28.463

如果您没有备份，请告别您的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:12:14.030

从备份中重新加载。

你确实有备份的权利...

# ember.js - emberjs：在应用程序初始化（）之后添加路由

> ID：11688427
> 
> 赞同：2
> 
> 时间：2012-07-27T13:10:44.987
> 
> 标签：ember.js, router

在使用 emberjs 构建基于路由器的应用程序时，我遇到了以下问题。我的应用程序简化结构如下：

```
var App = Em.Application.create({});

App.ApplicationController   = Em.Controller.extend({});

App.ApplicationView = Em.View.extend({

    template    : Em.Handlebars.compile('APPLICATION TEMPLATE')

});

App.RootState   = Em.Route.extend({

    index   : Em.Route.extend({
        route   : "/"
    })

})

App.Router  = Em.Router.extend({

    root    : App.RootState

});

    // initialize the app here
App.initialize();

// extend the RootState from anywhere. eg. from a plugged widget 
App.RootState.reopen({

    login   : Em.Route.extend({
        route   : "/state1"
    })

});

//App.initialize(); //init the app a second time forces unexpected behaviour 

App.RootState.reopen({

    alarms  : Em.Route.extend({
        route   : "/state2"
    })

});

//App.initialize(); 
```

就像我的应用程序演示的那样，我尝试在运行时使用新路由扩展路由器。我知道存在另一个存在类似问题的线程，但讨论的示例对我不起作用。如何在运行时使用其他路由扩展我的路由器，而无需在每次 ...reopen({}) 之后调用 initialize()。

这样做的背景是在运行时决定应用程序的外观，例如用自己的路由插入不同的wiget。

问候，T

# mysql - MySQL：一起返回2个不同的结果

> ID：11688428
> 
> 赞同：-5
> 
> 时间：2012-07-27T13:10:45.443
> 
> 标签：mysql, sql

我的 SQL 语句看起来像这样

```
SELECT qe.id, qe.content, a.id, a.content, a.addDT, acr.checked, acr.score  
FROM `questions_and_exercises` qe, 
`questions from-to` qft 
LEFT JOIN `questions-answers` qa ON (qa.qid=qe.id AND qa.uid=qft.uid) 
LEFT JOIN answers a ON (a.id=qa.aid) 
LEFT JOIN `answer_chk_results` acr ON (acr.aid=a.id)
AND qft.to_lid=2 
WHERE qft.to_uid=3 
```

现在，`WHERE`部分没有做我想做的事。试图达到这个结果：

*   全选 qft.to_lid=? （这意味着 qft.to_uid=NULL）**（总是）**
*   如果有 qft.to_uid=? （这意味着 qft.to_lid=NULL）也选择它们（仅当有这样的行时）。换句话说，追加到结果。

无论如何只有一个sql语句来实现这个？

# 更新

![在此处输入图像描述](../Images/e7f99f17ed44ac9fc15e7ebee2c8fb8a.png)

例如，当我查询时

```
WHERE qft.to_lid=2 AND qft.to_uid=NULL
WHERE qft.to_uid=2 AND qft.to_lid=NULL 
```

我想获取 ids: 4,5,6 的行。如果其中一个条件没有结果，则显示另一个。换句话说，这个条件之间没有任何关系

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:15:47.370

```
SELECT qe.id, qe.content, a.id, a.content, a.dt, acr.checked, acr.score  
FROM `questions_and_exercises` qe, 
`questions from-to` qft 
LEFT JOIN `questions-answers` qa ON (qa.qid=q.id AND qa.uid=?) 
LEFT JOIN answers a ON (a.id=qa.aid) 
AND qft.to_lid=? 
AND qft.uid=? 
```

# sql - 我如何在 RFM.RFMID=PV.RFMID 上使用不同的 INNER JOIN RFM

> ID：11688430
> 
> 赞同：0
> 
> 时间：2012-07-27T13:10:53.863
> 
> 标签：sql, sql-server

> **可能重复：**
> [从多个表中获取数据](https://stackoverflow.com/questions/11738574/get-data-from-multiple-table)

```
SELECT PM.PMID,RFM.TITLE,RFM.NAME ,PV.RFMID FROM MMASTER 
INNER JOIN AMM ON MMASTER.MID=AMM.MID
INNER JOIN PS ON AMM.AMMID=PS.AMMID
INNER JOIN PV ON PV.VTID=PS.VTID
INNER JOIN RFM ON RFM.RFMID=PV.RFMID
INNER JOIN PM ON PV.PMID==PM.PMID
INNER JOIN SM ON PS.SMID=SM.SMID
WHERE PM.PMID='2'

Table MMASTER
   MID col1
   1   abc
   2   xyx
   3   pqr

   Table AMM
   AMMID MID col1 col2
   1     1   bnb  mfk
   2     1   def  rwr
   3     2   re   wrwr

   Table PS
   UID VTID AMMID SMID col1 col2 
   1   1    1     1    rkk  jdj
   2   2    3     3    kdf  lfl
   6   2    2     4    rgr  rtr

   Table PV
   VTID PMID RFMID
   1    2   1
   2    2   3
   7    2   2

   Table RFM
   RFMID title name
   1     mr   john
   2     mr   jack
   3     mr   jim

   Table PM
   PMID col1 col2
   1   df  ere
   2   rwe rwer
   3   rwr fwr

   Table SM
   SMID MMID col1 col2
   1    1    fdf  efe
   2    1    ddf  dfdf
   3    2    df   ef 
```

我在上面的查询中得到这样的结果

```
 PMID title name  PV.RFMID
 2     mr.   jim  3
 2     mr.   jim  3
 2     mr.   jim  3 
```

我必须`distinct`在`inner join RFM ON RFM.RFMID=PV.RFMID`.

在我的查询`PV.RFMID`中，当加入时获得重复值，`RFM`并且由于该标题和名称重复

我如何`distinct`在这一行中使用

```
INNER JOIN RFM ON RFM.RFMID = PV.RFMID 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:14:04.813

您可以使用它进行子查询`INNER JOIN`并使用`DISTINCT`

```
SELECT MID,NAME,SEX,AGE,RFM.TITLE,RFM.NAME ,PV.RFMID
FROM MMASTER 
INNER JOIN AMM ON MMASTER.MID=AMM.MID
INNER JOIN PS ON AMM.AMMID=PS.AMMID
INNER JOIN PV ON PV.VTID=PS.VTID
INNER JOIN
(
    SELECT DISTINCT RFMID, NAME
    FROM RFM 
) RFM 
    ON RFM.RFMID=PV.RFMID
INNER JOIN PM ON PV.PMID==PM.PMID
INNER JOIN SM ON PS.SMID=SM.SMID
WHERE PM.PMID='13' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-27T13:14:58.790

选择后使用`distinct`。无需在内连接线使用..

```
 SELECT DISTINCT MID,NAME,SEX,AGE,RFM.TITLE,RFM.NAME 
 FROM MMASTER  
      INNER JOIN AMM ON MMASTER.MID=AMM.MID 
      INNER JOIN PS ON AMM.AMMID=PS.AMMID 
      INNER JOIN PV ON PV.VTID=PS.VTID 
      INNER JOIN RFM ON RFM.RFMID=PV.RFMID 
      INNER JOIN PM ON PV.PMID==PM.PMID 
      INNER JOIN SM ON PS.SMID=SM.SMID 
 WHERE PM.PMID='13' 
```

如果您想要所有唯一数据。

# jquery - 如何通过jQuery知道其ID的一部分将事件绑定到复选框

> ID：11688431
> 
> 赞同：0
> 
> 时间：2012-07-27T13:10:54.357
> 
> 标签：jquery

有一个

```
 <input type="checkbox" name="option2" id="checkbox_3" value="3" /> 
```

我试过这段代码

```
<script type="text/javascript">
    $(document).ready(function () {
        $('input[id*="checkbox_"]').click(function () {
            alert('!!!');
        });
    });
</script> 
```

但没有成功。

有什么线索吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:19:46.470

我猜你还没有包含 jQuery。

把它放在你的脚本标签之前（和之外）

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

# html - 使用 Html5 的下拉状态

> ID：11688438
> 
> 赞同：2
> 
> 时间：2012-07-27T13:11:16.680
> 
> 标签：html, drag-and-drop

我在 html5 中找到了这个片段：

```
<script>
    function drag(target, evt) {
        evt.dataTransfer.setData("Text", target.id);
    }
    function drop(target, evt) {
        var id = evt.dataTransfer.getData("Text");
        target.appendChild(document.getElementById(id));
        evt.preventDefault();
    }
</script>

<img src="../#"  id="block1" ondragstart="drag(this, event)" alt="block1">
<img src="../#"  id="block2" ondragstart="drag(this, event)" alt="block2"><br/>

<div class="box" ondragover="return false" ondrop="drop(this, event)">
    <p>Box 1</p>
</div>
<div class="box" ondragover="return false" ondrop="drop(this, event)">
    <p>Bax 2</p>
</div>
<div style="clear:both"></div> 
```

我怎样才能接收到哪个块在 box1 中，在 box2 中等等。我们无法区分这两个盒子，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:18:51.080

首先，赋予盒子独特的`id`属性。然后，您可以使用该函数的`target`参数`drop()`：

```
<div class="box" ondragover="return false" ondrop="drop(this, event)" id="box1">
    <p>Box 1</p>
</div>
<div class="box" ondragover="return false" ondrop="drop(this, event)" id="box2">
    <p>Box 2</p>
</div> 
```

然后就可以用这个值`target.id`来区分这两个div了。

此外，您可以使用函数的`target`参数`drag()`来获取`id`被拖动块的属性，假设块具有`id`分配给它们的属性。

这是一个有效的[jsFiddle](http://jsfiddle.net/vUm2v/)。

这里有很多关于 HTML5 拖放的信息：

[http://www.w3.org/TR/html5/dnd.html#dnd](http://www.w3.org/TR/html5/dnd.html#dnd)

# xml - Grails 错误：无效的 XML 字符（Unicode：0x5c）

> ID：11688440
> 
> 赞同：2
> 
> 时间：2012-07-27T13:11:20.210
> 
> 标签：xml, web-services, grails, groovy

我对这个问题做了一些研究，但似乎所有其他答案都包括更改响应发送给您的方式。我正在调用以 xml 字符串返回的第三方 Web 服务。当我在本地 Win7 机器上执行此操作时，效果很好。但是当我把它放到我们的服务器 Win Server 2003 上时，我得到这个错误返回：

```
Error 500: Executing action [vinlookup] of controller [AutoVehicleController] caused   exception: null
Servlet: grails
URI: /NonProfits/grails/autoVehicle/vinlookup.dispatch
Exception Message: An invalid XML character (Unicode: 0x5c) was found in the public identifier. 
Caused by: An invalid XML character (Unicode: 0x5c) was found in the public identifier. 
Class: AutoVehicleController 
At Line: [172] 
Code Snippet:
Stack Trace
org.xml.sax.SAXParseException: An invalid XML character (Unicode: 0x5c) was found in the public identifier.

    at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)

    at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)

    at VinPowerService.decodeVin(VinPowerService.groovy:40)

    at VinPowerService$$FastClassByCGLIB$$6f8d198b.invoke(&lt;generated&gt;)

    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149)

    at VinPowerService$$EnhancerByCGLIB$$f1db38bd.decodeVin(&lt;generated&gt;)

    at VinPowerService$decodeVin.call(Unknown Source)

    at AutoVehicleController$_closure7.doCall(AutoVehicleController.groovy:172)

    at AutoVehicleController$_closure7.doCall(AutoVehicleController.groovy)

    at java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:49:19.693

该消息非常明确：

> 在公共标识符中发现无效的 XML 字符 (Unicode: 0x5c)。

“公共标识符”是出现在 DOCTYPE 声明中关键字 PUBLIC 之后的字符串。公共标识符中可以出现哪些字符是有规则的，并且不允许使用反斜杠。

你有一个选择。说服生成此标识符的人改过自新，或者编写某种脚本来修复收到的错误 XML。不太可能有人关心公共标识符的值是什么，因此您可能只需删除反斜杠而不会造成任何损害。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:17:47.683

0x5c 是“重击”字符`\`，可用于“转义序列”。因此，对于 XML 内容，它需要自行转义。应该有一个像 HTMLEncode 这样的辅助函数（这里从内存中提取），它将所有这些字符转换为它们的“转义版本”（即`&`变成`&amp;`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:18:55.877

如果您的 XML 格式良好，请确认您在第一个节点之后没有空格。服务器返回一个字符串，但它想在之前添加空格，并且发生错误...

# class - OWL：定义类的属性和成员对象

> ID：11688443
> 
> 赞同：2
> 
> 时间：2012-07-27T13:11:31.320
> 
> 标签：class, properties, attributes, owl

我对语义网领域完全陌生，需要创建一个本体。

我做了很多研究，但仍然没有找到以下问题的明确解决方案： 基本上，我想从语义上描述，某个类包含某些对象和属性。但我不是 100% 清楚如何做到这一点。示例：我想描述类“设备”。现在这个类包含一个对象“应用程序”和一个属性“ID”。我将对象“应用程序”映射到 ObjectProperty“hasApplication”，并将属性映射到 DatatypeProperty“ID”。到目前为止一切顺利，但现在我如何将它们绑定到班级？

我发现了两种主要方法：

1.  您可以将类名作为域包含在属性的定义中。
2.  或者您通过以下方式将属性包含到类定义中`owl:Restricion/owl:onProperty.`

但在我看来，这两种方式都不能准确地捕捉到我的语义意图，因为在第一种情况下，我将其理解为，如果一个对象使用了定义的属性，那么这个对象必须是定义在域，但这并不一定意味着此类的每个实例都必须具有此属性。类似地，在第二种情况下，通过 将一个属性绑定到一个类`owl:Restriction/owl:onProperty`，我对这个属性施加了限制，即基数或值范围。但这不是我的本意，我不想描述“这个类有这个属性有这个限制。”，而只是“这个类有这个属性”。

希望你们能把事情弄清楚一点。:S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T03:47:35.017

以您的示例为例，您有一个 class `Device`，并且有一个 class`Application`和一个 ObjectProperty 用于关联它们。在 OWL 曼彻斯特语法中：

```
 Class: Device

  Class: Application

  ObjectProperty: hasApplication 
```

从“设备类中包含的对象”的角度来考虑应用程序有点误导。将它们视为与该类*相关的对象。*

现在，您可以通过设置属性的域和范围来使`Device`s 和s 之间的关系全局可用：`Application`

```
 ObjectProperty: hasApplication
    Domain: Device
    Range: Application 
```

然而，这可能不是你所追求的，因为这只是说如果一个`hasApplication`关系发生在任何地方，它的主语和宾语可以分别被推断为 和`Device`类型`Application`。它并不是说 的所有实例都`Device`必须具有`hasApplication`属性。

要表达 的所有实例`Device` *必须*具有`hasApplication`属性，可以使用 OWL 基数限制：

```
 Class: Device 
    SubClassOf: hasApplication min 1 
```

这告诉我们任何实例`Device`必须*至少有 1 个* `hasApplication`属性。

# html - 具有半透明背景图像的白色文本的 css 背景颜色

> ID：11688446
> 
> 赞同：1
> 
> 时间：2012-07-27T13:12:02.093
> 
> 标签：html, css, accessibility

我会尝试我的第一个问题。

这是一个问题，我有几次，但不完全知道，如何解决它：

我有一个半透明的背景图像（例如透明的圆角），它也作为渐变背景颜色。（在本例中，它是一个下拉导航按钮：当您悬停该按钮时，会出现导航列表。）

这是代码：

```
 <div id="top-navi"><a id="top-navi-button" href="#" >Navigation</a>
     <ul>
      <li><a href='#'>bla</a></li>
      <li><a href='#'>blubb</a></li>
     </ul>
    </div> 
```

CSS：

```
#top-navi {
    position: fixed;
    top: 0px;
    left: 6%;
    z-index: 1000;
}

#top-navi a#top-navi-button {
    float: left;
    width: 130px;
    height: 20px;
    padding: 5px 10px 5px 20px;
    background: url(../img/top-navi-button.png) no-repeat;
    color: #FFF;
    font-size: 120%;
    text-decoration: none;
}
#top-navi a#top-navi-button:hover, 
#top-navi a#top-navi-button:focus {
    text-decoration: underline;
} 
```

按钮上的文字是白色的。因为我想让网站易于访问，所以我没有将文本放在图像上，而是用 html 编写（以便屏幕阅读器可以阅读）并将其设置为白色。直到这里，这工作得很好。

现在，我想让它更易于访问，因此您可以使用所有功能，即使图像已停用。如果我这样做（例如，使用 FF 开发人员工具栏），背景图像就会消失，您将无法再看到白色文本。

现在，如果我给链接一个背景颜色（除了图像）它会覆盖透明的角落。我还尝试将文本放入 a`<span>`并为其赋予背景颜色，但由于我的图像具有渐变，因此您会看到跨度的背景颜色。

任何想法如何解决这个问题？非常感谢您！

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:52:36.407

对于图像的不透明渐变部分，您需要一个额外的图像。当您添加`span`到链接时，您可以将跨度设置为具有纯色背景*和*后备颜色。

```
+------------------------------------------------+
| a: Gradient and shadow                         |
| +---------------------------------------------+|
| | a > span: Solid gradient + background color ||
| +---------------------------------------------+|
+------------------------------------------------+ 
```

所以，HTML：

```
<a id="top-navi-button" href="#"><span>Navigation</span></a> 
```

和 CSS 类似：

```
a#top-navi-button {
  background: url(top-navi-button.png) no-repeat;
}

a#top-navi-button span {
  background: url(top-navi-solid_gradient.png) #00F;
} 
```

请注意，如果您想创建一个可访问的站点，您还应该考虑提供[键盘导航](http://www.w3.org/TR/WCAG/#keyboard-operation)。现在您不能使用该`Tab`键来选择任何菜单项。

# iphone - 在动画视图上检测触摸

> ID：11688447
> 
> 赞同：2
> 
> 时间：2012-07-27T13:12:03.127
> 
> 标签：iphone, cocoa, uiview, touch, uiviewanimation

我正在为几个视图设置动画，但`animateWithDuration:`我根本无法检测到对它们的任何触摸。

我尝试过简单的触摸处理 ( `touchesEnded:`) 和`tapGestureRecognizer`.

首先我用它们为它们设置了动画，`CGAffineTransformTranslation`但后来我意识到如果我用它检查坐标就不会这样，`touchesMoved:`所以我切换到为 frame 属性设置动画。我很快注意到，帧值在动画期间并没有真正改变，所以我放弃了 touchesEnded: 想法。所以我改成了一个也不起作用的tapGestureRecognizer。

我已经在所有视图上启用了 userInteraction，并且我还向`UIViewAnimationOptionAllowUserInteraction`动画添加了选项。

这是动画的代码和之前发生的事情：

```
// init the main view
singleFingerTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTapOnItem:)]; // singleFingerTap is an ivar

// code somewhere:
// userItem is a subview of MainView
[userItem addGestureRecognizer:singleFingerTap];

[UIView animateWithDuration:animationTime
                      delay:0.0f
                    options:UIViewAnimationOptionBeginFromCurrentState | UIViewAnimationOptionCurveLinear | UIViewAnimationOptionAllowUserInteraction
                 animations:^{
                     userItem.frame = CGRectMake(-(self.bounds.size.width + userItem.frame.size.width), userItem.frame.origin.y, userItem.frame.size.width, userItem.frame.size.height);
                 }

                 completion:^(BOOL finished) {
                     if (finished) {
                         [unusedViews addObject:userItem];
                         [userItem removeFromSuperview];
                         [userItem removeGestureRecognizer: singleFingerTap];
                     }
                 }
 ]; 
```

这是手势识别器：

```
- (void) handleTapOnItem:(UITapGestureRecognizer *)recognizer{
   NSLog(@"Touched");
} 
```

那么我如何才能真正从动画视图中获得触摸或最佳解决方案是什么？向每个视图添加透明 uibutton 不是一种选择。:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:21:58.297

当动画应用于视图时，动画属性立即更改为其最终值。您在屏幕上实际看到的是视图层的表示层。

不久前，我写[了一篇关于命中测试动画视图/图层的博客文章](http://ronnqvi.st/hit-testing-animating-layers)，其中更详细地解释了这一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:15:06.727

当使用 Core Animation 移动任何东西时，对象上的触摸会暂停，直到对象完成移动。有趣的花絮，如果你移动对象并触摸它的最终位置，触摸就会被拾取。这是因为一旦动画开始，对象的帧就设置为结束点，当它在屏幕上移动时它不会更新。

您可能需要研究 Quartz 或 OpenGL ES 等替代技术，以在视图移动时检测它们的触摸。

# razor - 如何从 Razor 视图中访问 Nancy 的 CurrentUser 属性？

> ID：11688451
> 
> 赞同：11
> 
> 时间：2012-07-27T13:12:13.177
> 
> 标签：razor, nancy

我正在尝试访问`CurrentUser`. `NancyContext`如何从 Razor 视图的 html 中执行此操作？

如果可能的话，我将不胜感激代码片段。

谢谢

**编辑**

我现在扩展`Nancy.ViewEngines.Razor.HtmlHelpers`给我带有语法糖的交叉视图数据，使视图代码保持简洁和可读。

这里有一些例子：

```
public static bool IsRegistered<T>(this HtmlHelpers<T> html)
{
    var user = GetUser(html);
    return user != null && user.IsRegistered;
}

public static bool IsAuthenticated<T>(this HtmlHelpers<T> html)
{
    return GetUser(html) != null;
}

public static User GetUser<T>(this HtmlHelpers<T> html)
{
    return (User)html.RenderContext.Context.CurrentUser;
} 
```

和一些剃刀代码从一个视图。在这里，我决定仅在用户当前未经过身份验证时才包含登录弹出窗口（Foundation Reveal）的 html - 有意义。

```
@if (!Html.IsAuthenticated())
{
    Html.Partial("Reveals/SignInReveal");
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T13:25:39.953

您可以`NancyContext`通过该`Html`属性的`RenderContext`属性访问 。

示例用法：

```
@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<dynamic>

<p>Current User: @Html.RenderContext.Context.CurrentUser </p> 
```

但是，如果您使用的是 SuperSimpleViewEngine（感谢@Sean 的评论[）](https://stackoverflow.com/users/350933/sean) ，那么您可以使用

```
@Context.CurrentUser.UserName 
```

# android - 使用谷歌地图进行电话差距地理定位

> ID：11688457
> 
> 赞同：0
> 
> 时间：2012-07-27T13:12:38.943
> 
> 标签：android, google-maps, cordova, geolocation

我想制作一个应用程序，它需要我获取我的位置并将其显示在谷歌地图上。我使用了来自[http://wiki.phonegap.com/w/page/16494764/PhoneGap%20Geolocation%20Sample%20Application](http://wiki.phonegap.com/w/page/16494764/PhoneGap%20Geolocation%20Sample%20Application)的代码。我正在使用 phonegap 2.0.0 为 Android 2.2 开发。我正在使用模拟器 2.2。

我已经正确安装了 Phonegap 的所有内容，并且获得了地图的 google Api3 密钥。我把钥匙放在：[http](http://maps.google.com/maps/api/staticmap?center=(here) ://maps.google.com/maps/api/staticmap?center= （这里我放钥匙）。现在，当我启动应用程序时，我使用 CMD 发送坐标。Telnet 本地主机 5554、geo fix 等。当我启动应用程序时，它会给出一个错误：无法检索位置错误 [object PositionError]。

我不再收到错误消息（我添加了启用高精度）。但它也没有显示任何东西。所以我认为我在谷歌地图上做错了，或者我忘记了一些东西。

有人可以帮我吗？它在左上角显示一个问号。

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>

     <head>

<meta name="viewport" content="width=device-width; height=device-height; user-scalable=no" />

<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>Beer Me</title>
<link rel="stylesheet" href="/master.css" type="text/css" media="screen" />
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
<script type="text/javascript">

               function loader() {

                    var state = document.readyState;

                    if (state == 'loaded' || state == 'complete') {

                         run();

                    } else {

                         if (navigator.userAgent.indexOf('Browzr') > -1) {

                              setTimeout(run, 250);

                         } else {

                              document.addEventListener('deviceready',run,false);
                         }
                         }
                         }

               function run() {
                   var imageUrl = "http://maps.google.com/maps/api/staticmap?sensor=false&center=" + latitude + ',' + longitude +
                   "&zoom=14&size=300x400&markers=color:blue|label:S|" + latitude + ',' + longitude;
               console.log("imageUrl-" + imageUrl);
               $("#map").remove();
               $(document.body).append(
                   $(document.createElement("img")).attr("src", imageUrl).attr('id', 'map')
               );

                    var fail = function(e) {
                         alert('Can\'t retrieve position.\nError: ' + e);
                    };
                    navigator.geolocation.getCurrentPosition(imageUrl, fail,{ enableHighAccuracy: true });
               } 

          </script>
     </head> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:07:12.283

```
/* enter code here */ function GetCurrentLocation()
            {
                if (navigator.geolocation) { 
                    navigator.geolocation.getCurrentPosition(function(position) {  

                                                             var point = new google.maps.LatLng(position.coords.latitude, 
                                                                                                position.coords.longitude);

                                                             // Initialize the Google Maps API v3
                                                             var map = new google.maps.Map(document.getElementById('map'), {
                                                                                           zoom: 16,
                                                                                           center: point,
                                                                                           mapTypeId: google.maps.MapTypeId.ROADMAP
                                                                                           });

                                                             // Place a marker
                                                             new google.maps.Marker({
                                                                                    position: point,
                                                                                    map: map
                                                                                    });
                                                             }); 
                } 
                else {
                    alert('W3C Geolocation API is not available');
                }
            } 
```

使用此代码并设置 sensor = false on

希望它会有所帮助。请记住，它不是静态地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:35:13.553

您需要将 google java 脚本文件导入到您的解决方案中

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script> 
```

然后可以使用下面的代码来显示您的位置...只需替换您的纬度和经度

```
 var imageUrl = "http://maps.google.com/maps/api/staticmap?sensor=false&center=" + latitude + ',' + longitude +
        "&zoom=14&size=300x400&markers=color:blue|label:S|" + latitude + ',' + longitude;
    console.log("imageUrl-" + imageUrl);
    $("#map").remove();
    $(document.body).append(
        $(document.createElement("img")).attr("src", imageUrl).attr('id', 'map')
    ); 
```

# javascript - 在 Javascript / PHP 中传递数据和替换

> ID：11688459
> 
> 赞同：0
> 
> 时间：2012-07-27T13:12:40.223
> 
> 标签：javascript, php, replace

假设我**已经有近**2000 行这样的行：

```
<div style="position:absolute;top:461;left:167"><nobr>1 001 A NAME HERE</nobr></div>
<div style="position:absolute;top:461;left:682"><nobr>TRUE</nobr></div>
<div style="position:absolute;top:480;left:167"><nobr>2 002 ANOTHER NAME GOES HERE</nobr></div>
<div style="position:absolute;top:480;left:682"><nobr>FALSE</nobr></div> 
```

我想将它们**自动**传递到如下表中：

```
<tr>
    <td class="id">1</td>
    <td class="serial">001</td>
    <td class="name">A NAME HERE</td>
    <td class="accepted">TRUE</td>
</tr>
<tr>
    <td class="id">2</td>
    <td class="serial">002</td>
    <td class="name">ANOTHER NAME GOES HERE</td>
    <td class="accepted">FALSE</td>
</tr> 
```

你能帮助我如何使用 PHP/Javascript 做到这一点吗？

**PS：**定义的样式无关紧要，因为在表格中会更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:45:58.077

假设 $str 包含您的输入 DIV：

```
<?php
preg_match_all('#<nobr>(?P<id>\d)(\s)(?P<number>\d{3})(\s)(?P<name>.*)</nobr>#Ui', $str, $names, PREG_SET_ORDER);
preg_match_all('#<nobr>(?P<bool>TRUE|FALSE)</nobr>#Ui', $str, $bools, PREG_SET_ORDER);

foreach($names as $i=>$row){
    echo '<tr>
            <td class="id">'.$row['id'].'</td>
            <td class="serial">'.$row['number'].'</td>
            <td class="name">'.$row['name'].'</td>
            <td class="accepted">'.$bools[$i]['bool'].'</td>
           </tr>'. PHP_EOL;
}
?> 
```

请注意，此代码不受行尾格式的影响，因为它使用正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:48:24.183

这是一个javascript版本。

```
 <script>
        var data = [];

        $('div').each(function(index) {
            data[index] = $(this).text();
        });

        var str = '';

        for (var i=0; i < data.length; i=i+2) {
            var temp = data[i].split(' ');
            var name = temp.slice(2).join(' ');
            str += '<tr>' +
                        '<td class="id">'+ temp[0] + '</td>' + 
                        '<td class="serial">' + temp[1] + '</td>' +
                        '<td class="name">' + name +'</td>' +
                        '<td class="accepted">' + data[i + 1] + '</td>' +
                    '</tr>';
            temp = [];
        }

        console.log(str);
    </script> 
```

str 变量包含您的表数据。只需将该数据添加到您的 html 页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:23:44.853

`$string`是所有div的字符串。假设换行符是 \r\n，将所有这些更改为正确的换行符

```
$sections = explode("\r\n", strip_tags($string));//Remove divs ad nobrs and sort into lines
$numSections = count($sections);
for($row = 0; $row < $numSections; $row += 2) {
    $rows[0] = explode(" ", $sections[$row]);
    $rows[1] = $sections[$row + 1];?>
<tr>
    <td class="id"><?php echo $rows[0][0]; ?></td>
    <td class="serial"><?php echo $rows[0][1]; ?></td>
    <td class="name"><?php for($i=2; $i<count($rows[0]); $i++) echo $rows[0][$i]+" "; ?></td>
    <td class="accepted"><?php echo $rows[1]; ?></td>
</tr>

<?php  } 
```

假设您希望它回显

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T13:30:55.920

lat 在 temp.html 中说你当前的 html

获取 php 变量中的所有数据；

```
$data = file_get_contents('temp.html');
$data_filter = explode('<nobr>',$data);

$final_data  = array();
foreach($data_filter as $df1)
{
   $temp = explode('</nobr>',$df1);
   $final_data[] = $temp[0];
}
// now all your required data is in an array in sequences of two
$str = '';
while(count($final_data))
{
  $name  = array_pop($final_data);
  while(strlen($name)<5){
  $name  = array_pop($final_data);
  }
  $accepted = array_pop($final_data);
  $name = explode(' ',$name);
  $str.= '<tr>
    <td class="id">'.$name[0].'</td>
    <td class="serial">'.$name[1].'</td>
    <td class="name">'.$name[2].'</td>
    <td class="accepted">'.$accepted.'</td>
</tr>
';
}
echo $str; 
```

# task - Jbpm : 结束 TaskInstance 转换

> ID：11688460
> 
> 赞同：3
> 
> 时间：2012-07-27T13:12:49.167
> 
> 标签：task, transitions, jbpm

我不明白 JBPM API 中的某些内容。我有两个用户同时执行一项任务。第一个选择转换并完成任务，因此 TaskInstance 现在结束。第二个用户做同样的事情，但得到一个 nullPointerException ： getAvalaibleTransition() 返回 null。

为什么 getAvailableTransition() （属于 TaskInstance 类）会返回 null ？它是同一个节点，转换应该是相同的？

我是 JBPM 的新手。只是测试应用程序的行为以响应竞争行为并遇到此错误...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T10:03:57.830

我想您使用的是 jBPM 3.x 对吧？如果您只有一个业务流程实例，为什么在一项任务中有两个用户？您可能缺少 Process Instance 的概念，那么您能描述一下您的业务情况吗？因为如果一个用户完成了一项任务，那么该任务就不能由另一个用户完成。干杯

# asp.net-mvc - 对象不支持此属性或方法 - jqGrid 4.4.0

> ID：11688461
> 
> 赞同：0
> 
> 时间：2012-07-27T13:13:06.277
> 
> 标签：asp.net-mvc, jqgrid

我在 mvc2 应用程序中使用 jqGrid 4.4.0。网格加载数据很好。但是，当我编辑/添加或删除记录时出现`'Object doesn't support this property or method'`错误。这就是我的设置在 site.master 页面上的样子：

```
<link rel="stylesheet" type="text/css" media="screen" href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.16/themes/redmond/jquery-ui.css" />
<link rel="stylesheet" type="text/css" href="../../Content/ui.jqgrid.css" />    
<script src="<s:url value= http://ajax.microsoft.com/ajax/jquery/jquery-1.7.min.js" type="text/jscript"></script>
<script src="../../Scripts/grid.locale-en.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.jqGrid.min.js" type="text/javascript"></script> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:38:46.830

好的，即使我多次遇到此错误...我用两种解决方案解决了...首先尝试这个，如果它不适合您...然后将您的确切代码粘贴到此处，您会在哪里收到该错误.

如果您正在执行内联编辑，则需要包含此 grid.inlinedit.js，如果您正在执行表单编辑，则需要包含 grid.formedit.js...让我知道这是否解决了您的问题...如果不是我'将提供第二种解决方案

# ruby - 从Ruby数组中的一列中选择所有元素？

> ID：11688466
> 
> 赞同：32
> 
> 时间：2012-07-27T13:13:36.623
> 
> 标签：ruby

我有一个数组数组：

```
arr = [["Foo1", "Bar1", "1", "W"], 
["Foo2", "Bar2", "2", "X"], 
["Foo3", "Bar3", "3", "Y"], 
["Foo4", "Bar4", "4", "Z"]] 
```

我想要一个只包含每个数组的第三列的数组：

```
res = ["1", "2", "3", "4"] 
```

我该怎么做？

我想输入如下内容：

```
arr[][2] 
```

但考虑到更像 Ruby，我尝试了：

```
arr.select{ |r| r[2] } 
```

但这会返回整行。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-27T13:17:33.997

你要`arr.map {|row| row[2]}`

```
arr = [["Foo1", "Bar1", "1", "W"], 
["Foo2", "Bar2", "2", "X"], 
["Foo3", "Bar3", "3", "Y"], 
["Foo4", "Bar4", "4", "Z"]]

arr.map {|row| row[2]}
# => ["1", "2", "3", "4"] 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-27T13:49:15.727

另一种方法：

```
arr.transpose[2] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T13:18:36.150

使用地图或收集 arr.map { |a| a2]}

# dojo - 从 dojo.gridx 获取行内容它总是显示最初加载的旧数据

> ID：11688469
> 
> 赞同：2
> 
> 时间：2012-07-27T13:13:42.363
> 
> 标签：dojo, dojo.gridx

我正在尝试在单击相关行时检索存储在 dojo.gridx 表中的数据值。只要第一次调用以下函数，它就可以正常工作，当使用新数据再次调用该函数时，这些数据会正确显示在屏幕上，但是当我单击任何行时，检索到的实际数据是属于该行的数据保存第一次调用函数时加载的数据。获得正确数据的唯一方法是重新加载调用 java 脚本的整个 html 页面。加载为“dati”的数据动态来自此处未显示的 ajax-js。

```
HTML reference: 
```

```
<table data-dojo-type="gridx.Grid" id="userconf" selectable="true"  selectionMode="single" singleClickEdit="true" style="width: 936px; position: absolute; z-index: 900; left: 23px; top: 280px; height: 170px;" data-dojo-props="cacheClass: 'gridx/core/model/cache/Async',store:ItemFileWriteStore_11">
<thead>
   <tr>
     <th field="cf_utente" width="auto" editable="true" type="dojox.grid.cells.Bool">
      cf_utente</th>
     <th field="sn_contatore" width="auto" editable="true" type="dojox.grid.cells.Bool">
      sn_contatore</th>
     <th field="sn_serbatoio" width="auto" editable="true" type="dojox.grid.cells.Bool">
       sn_serbatoio</th>
     <th field="seqnum" width="auto" editable="true" type="dojox.grid.cells.Bool">
       seqnum</th>
    </tr>
 </thead>
</table> 
```

脚本：

```
function fillupAnagUsers(dati) {
var grid = dijit.byId('userconf');
var rows = dati.split("\n");
var righe = [];
var data = {items: righe};
var i,j,rw,x;
var lbl = rows[0].split(",");
var newStore = new dojo.data.ItemFileWriteStore({data: data});
for(i=1;i<rows.length-1;i++) {
    rw = rows[i].split(",");
    x = "{";
    for(j=0;j<lbl.length-1;j++) {
        x +=lbl[j]+":\""+rw[j]+"\",";
    }
    x += lbl[j]+":\""+rw[j]+"\"}";
    eval('var obj='+x);
    data.items.push(obj);
}

grid.setStore(newStore);

var handle = dojo.connect(grid, "onCellClick", grid, function(evt){

        var idx = evt.rowIndex;
    var data = this.cell(idx, 0).data();
    dojo.byId('cfutente').value = data.substring(data.indexOf('r>')+2,data.indexOf('</'));
    data = this.cell(idx, 1).data();
    dojo.byId('sncontatore').value = data.substring(data.indexOf('r>')+2,data.indexOf('</'));
    data = this.cell(idx, 2).data();
    dojo.byId('snserbatoio').value = data.substring(data.indexOf('r>')+2,data.indexOf('</'));
    data = this.cell(idx, 3).data();
    dojo.byId('useqnum').value = data.substring(data.indexOf('r>')+2,data.indexOf('</'));
    dojo.byId('rec').value = dojo.byId('useqnum').value;

});

 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-04T09:26:48.683

GridX 需要标识符：

```
var data = {items: righe, identifier: 'myidfield'}; 
```

设置存储还不够，还需要清理缓存并强制刷新网格内容：

```
 grid.model.clearCache();
            store = new Memory({data: data});
            grid.model.setStore(store)
            grid.body.refresh() 
```

# windows-phone-7 - 无法退出我的应用程序

> ID：11688472
> 
> 赞同：1
> 
> 时间：2012-07-27T13:13:52.940
> 
> 标签：windows-phone-7, xna, windows-phone-7.1

我创建了一个应用程序，其中数据库在启动时加载，几毫秒后它导航到主页。我的问题是当我从主页单击返回键时，数据库再次加载并返回主页，有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T05:08:59.623

我使用以下命令和 Microsoft.Xna.Framework.Game dll 覆盖了 onbackpress 事件？

```
new Microsoft.Xna.Framework.Game().Exit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:31:03.837

两个建议。一：在 Application_Launching 和 Application_Activated（当 e.IsApplicationInstancePreserved == false 时）事件处理程序中加载数据库。执行此操作时，请始终确保 MainPage 是应用程序首先导航到的页面。您的页面可以绑定到将更改并触发 PropertyChanged 事件的值（来自支持 ViewModel）。这将导致页面显示数据。

第二种解决方案是修改[此](http://www.visuallylocated.com/post/2012/06/18/Using-a-custom-UriMapper-to-navigate-to-a-login-screen.aspx)导航到登录屏幕的实现，以满足您加载数据库的需求。

# ruby-on-rails - 使用 Model.update_attributes 时模型不会保存更改！在 Rails 3 迁移期间

> ID：11688482
> 
> 赞同：2
> 
> 时间：2012-07-27T13:14:31.910
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, database-migration

我有以下 Rails 3 迁移，它将列 game_type 添加到名为 games 的表中。它应该根据 live 是否为真来更新 game_type 的值，但这个值永远不会被保存。

```
class AddGameTypeToGames < ActiveRecord::Migration

  class Game < ActiveRecord::Base
  end

  def up
    say "Adding game_type column to Games table"
    add_column :games, :game_type, :string, :null => false, :default => 'Demo'

    say_with_time "Migrating live value into game_type column" do
      rows_affected = 0
      Game.all.each do |game|
        if game.live
          game.update_attributes!(:game_type => 'Live')
          rows_affected += 1
        end
      end
      rows_affected
    end
  end
end 
```

我最终通过将线路更改`game.update_attributes!(:game_type => 'Live')`为`Game.connection.execute("UPDATE games SET game_type='Live' where id = #{game.id}")`.

我想知道为什么 update_attributes！行不通？我还有其他可以正常工作的迁移。包含模型应该阻止验证妨碍迁移。我尝试`attr_accessible :game_type`在迁移中设置游戏模型，但这不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T13:35:50.770

您必须在游戏模型上运行循环之前添加此行

```
Game.reset_column_information
Game.all.each do |game|
  ....
  .... 
```

有时您会想要在迁移中添加一列并在之后立即填充它。在这种情况下，您需要调用 Base#reset_column_information 以确保模型具有添加新列后的最新列数据。

[在ActiveRecord::Migration](http://api.rubyonrails.org/classes/ActiveRecord/Migration.html)的 API 文档中有一个示例。查找“更改表格后使用模型”

# sql - SQL join：三张表，其中一张是另外两张的关系，行可能不存在

> ID：11688486
> 
> 赞同：1
> 
> 时间：2012-07-27T13:14:44.467
> 
> 标签：sql, left-join

我有三张桌子：

产品（p_id，prod_name），竞争对手（c_id，comp_name），销售（p_id，c_id，价格）。

所以假设我有数据：

```
(producs table)
p_id | prod_name
1    | product1
2    | product2

(competitors table)
c_id | comp_name
1    | competitor1

(sells table)
p_id | c_id | price
1    | 1    | 1.56 
```

在某处使用 c_id = 1 ，我想检索：

```
prod_name | price
product1  | 1.56
product2  | NULL 
```

问题是餐桌销售是产品和竞争对手之间唯一的关系。并且 table sells 可能没有包含产品 id 和竞争对手 id 的行。在这种情况下，我希望它返回 null 作为价格。简而言之，我想返回给定竞争对手的所有产品（假设 comp_id = 1），如果表中不存在该行，则返回价格或 null 销售。

我试过这个，但它没有用，因为它没有返回 NULL 价格：

```
SELECT prod_name, price
  FROM products
  LEFT JOIN sells ON products.p_id = sells.p_id
  LEFT JOIN competitors ON sells.c_id = competitors.c_id
 WHERE competitors.c_id = 1 
```

我怎样才能在 SQL 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:17:16.650

```
select prod_name, price 
from products 
left join sells 
    on products.p_id = sells.p_id 
left join competitors 
    on sells.c_id = competitors.c_id 
AND competitors.c_id = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:18:11.817

您希望右加入竞争对手而不是左加入。右连接将返回右表中的所有记录，而不管左表中是否有任何记录；这与左连接的行为相反。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:29:06.577

这应该有效（参见[SQL Fiddle](http://sqlfiddle.com/#!2/b83d3/6)）：

```
select prodname, price
from products p
left join sells s
  on p.pid = s.pid
left join competitors c
  on s.cid = c.cid
where c.cid = 1 
  or c.cid is null 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T13:34:19.730

```
SELECT p.prod_name, s.price
FROM products p
LEFT JOIN sells s ON p.p_id = s.p_id
WHERE s.c_id = 1 
```

# php - 从 IMAP 请求电子邮件的 PHP 库

> ID：11688487
> 
> 赞同：6
> 
> 时间：2012-07-27T13:14:54.310
> 
> 标签：php, email, request, imap

有许多 PHP 库非常适合发送电子邮件。但是哪个是从 IMAP 帐户请求电子邮件最可靠的方法？尤其是带有附件的电子邮件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:26:52.263

考虑到您应该能够与任何框架一起加载功能强大的 IMAP 库，因此不会选择基于其 IMAP 功能的框架。您可能想要使用[Horde IMAP 驱动程序](http://wiki.horde.org/Project/HordeImapLib)，这是一个强大的协议抽象层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:18:30.160

我不知道支持此功能的框架，但很多框架都为您提供了加载自定义库或类的选项。

在很多情况下，我认为理想的解决方案是最简单的解决方案。[PHP-imap](http://code.google.com/p/php-imap/)可以连接 POP3/IMAP/NNTP 邮箱并支持附件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-02T09:46:13.407

[Fetch](https://github.com/tedious/Fetch)是一个非常好的面向对象的包装器，用于处理原生 PHP Imap 函数。它不能做任何 PHP 自己的 IMAP 函数不能做的事情，但它确实为您提供了一堆很好的面向对象的 API 供您编写代码。在撰写本文时，Fetch 库仍在开发中。它已经支持消息和附件，但对某些 IMAP 函数（如 imap_thread）的覆盖范围不足。获取服务器接口有一种方法可以从给定邮箱中获取所有消息，但还没有一种方法可以将消息聚合到线程中。

[https://github.com/tedious/Fetch](https://github.com/tedious/Fetch)

PS：我不是这个项目的所有者，也没有为它贡献任何代码。我已经将它用于一些实验项目，但从未在生产环境中使用过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T13:48:10.080

有一个内置的[IMAP 模块](http://us.php.net/imap)可以在您的 PHP 副本中编译。在您的 phpinfo() 输出中应该有类似`--with-imap[=DIR]`. 如果你有它，那么你也许可以用现有的 PHP 模块做你需要的一切。

# xslt - 如何使用 xslt 获取元素的第 4 个或第 5 个子元素的值

> ID：11688494
> 
> 赞同：0
> 
> 时间：2012-07-27T13:15:22.800
> 
> 标签：xslt, xslt-1.0

我使用这个 XML 源：

```
<?xml version="1.0" encoding="UTF-8"?>
<sets xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="simulation-request.xsd">
<set>
    <hP />
    <para>
        <setP>
            <nom1>acc</nom1>
            <nom2></nom2>
            <typ>T</typ>
            <oP>T_EQUALS</oP>
            <val1>40</val1>
            <bId>21</bId>
        </setP>
    </para>
    <issuers />
</set>
<set>
    <hP>
        <sethP>
            <hTyp>EX</hTyp>             
            <tFt>L_D</tFt>
            <tFv>1</tFv>
            <sCF>cd</sCF>
            <setP>
                <nom1>bount</nom1>
                <oP>NLO</oP>
                <val1>00</val1>
                <bId>22</bId>
            </setP>
            <setP>
                <nom1>bount</nom1>
                <oP>NLO</oP>
                <val1>00</val1>
                <bId>23</bId>
            </setP>
            <setP>
                <nom1>bount</nom1>
                <oP>NLO</oP>
                <val1>00</val1>
                <bId>31</bId>
            </setP>

        </sethP>
    </hP>
    <para>
        <setP>
            <nom1>bount</nom1>
            <nom2></nom2>
            <typ>LO</typ>
            <oP>T_C</oP>
            <val1>1</val1>
            <bId>24</bId>
        </setP>
    </para>
    <issuers />
</set>  
</sets> 
```

使用此 XSLT 源：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output method="xml" version="1.0" encoding="UTF-8" indent="no"   xml:space="preserve"/>
<xsl:template match="node()|@*">
    <xsl:copy>
        <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="/"><xsl:text>&#10;</xsl:text>   
    <xsl:for-each select="sets/set/hP | sets/set/para/setP">            
            <com-set-cond b.name="netInternalMs" name="{.//bId}">
            </com-set-cond><xsl:text>&#10;</xsl:text>
        </xsl:for-each>
</xsl:template> 
```

输出如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<com-set-cond b.name="netInternalMs" name=""/>
<com-set-cond b.name="netInternalMs" name="21"/>
<com-set-cond b.name="netInternalMs" name="22"/>
<com-set-cond b.name="netInternalMs" name="24"/> 
```

但预期的输出必须如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>

<com-set-cond b.name="netInternalMs" name="21"/>
<com-set-cond b.name="netInternalMs" name="22"/>
<com-set-cond b.name="netInternalMs" name="23"/>
<com-set-cond b.name="netInternalMs" name="31"/>
<com-set-cond b.name="netInternalMs" name="24"/> 
```

其中 21、22、23、31 和 24 的每个数字是整个 xml 文件中元素**bId的值，并且当祖先中没有****bId**元素时，如第一个标签**，我的转换将不会显示任何内容，并且在使用我的转换后，输出文件中的第一行不会显示任何“名称”为空值的行有谁知道，该怎么做？谢谢你的帮助。**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T11:44:42.867

问题在于您的**xsl:for-each**

```
<xsl:for-each select="sets/set/hP | sets/set/para/setP"> 
```

特别是，**sets/set/hP** xpath。这将匹配两个**hP**元素。第一个是空的，因此生成了空**名称**属性。第二个包含三个**setP**元素，但是做`name="{.//bId}"`只会选择第一个（在这种情况下，bId = 22）

因此，您可能希望将您的**xsl:for-each**更改为此

```
<xsl:for-each select="sets/set/hP/sethP/setP | sets/set/para/setP"> 
```

如果您不担心**setP**元素出现的级别，可以将其简化为以下

```
<xsl:for-each select=".//setP"> 
```

请注意，通常首选使用**xsl:apply-templates**而不是**xsl:for-each**，因为这可以使代码更具可读性，减少缩进，并且更容易重用代码。

```
<xsl:template match="/">
    <xsl:text>&#10;</xsl:text>    
    <xsl:apply-templates select=".//setP" /> 
</xsl:template> 

<xsl:template match="setP">
   <com-set-cond b.name="netInternalMs" name="{.//bId}" />
   <xsl:text>&#10;</xsl:text>  
</xsl:template> 
```**

# c++ - 捕获已创建异常的正确方法

> ID：11688495
> 
> 赞同：0
> 
> 时间：2012-07-27T13:15:25.173
> 
> 标签：c++, exception

我有以下内容`class exception`：

```
namespace A{
 namespace B{
   namespace C{
     class internal_error : public std::runtime_error{
        public:
             explicit internal_error(const std::string &arg) : std::runtime_error(arg) {};
     };
    }
   }
  } 
```

在我的代码中，我有：

```
try{
  if(mkdipath(dirname, DIR_CREATION_MODE, &err)){
       string msg;
       msg = "failed to create path " + *dirname;
       logmsg(MSERROR, msg.c_str(), who);
       throw A::B::C::internal_error(msg);
  }
}
catch(){
    // how am I going to catch a A::B::C::internal_error?
} 
```

我的问题是：我将如何捕获 A::B::C::internal_error？我应该使用：

```
catch(A::B::C::internal_error &error){
      string msg("You should never had happened\n");
      logmsg(MSERROR, msg.c_str(), who);
} 
```

请忽略标签`MSERROR`, `who`, `mkdirpath`... 它们对问题并不重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:18:16.417

```
catch(A::B::C::internal_error &error){
    //...
} 
```

很好，请注意前导下划线的来源，可能是错字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:19:27.243

```
try{
// ...
} catch (const A::internal_error& ex) {
// ...
} catch (const B::internal_error& ex) {
// ...
} catch (const C::internal_error& ex) {
// ...
} 
```

这是你想要的？

# android - 皮棉警告 ExportedContentProvider

> ID：11688500
> 
> 赞同：2
> 
> 时间：2012-07-27T13:15:42.333
> 
> 标签：android, android-contentprovider, android-lint

我有一个导出文件`ContentProvider`，用于访问用户想要通过其他应用程序共享的图像。简单地说，用户在我的应用程序中单击一个共享按钮，我向她展示可以共享图像的应用程序列表，然后她选择其中一个应用程序（调用 my`ContentProvider`以基于 Uri 获取图像）。

但是，有一个 lint 警告`ExportedContentProvider`说我应该使用权限。如果我确实设置了权限，其他应用程序如何知道访问图像的权限？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-27T13:28:21.840

Lint 所说的权限不是“访问图像”。它更多地是关于“使用你的 ContentProvider”。

当用户选择一个应用程序来共享图像时，您将为该应用程序提供一个 URI，而不是您的 ContentProvider。就像是：

```
intent.putExtra(Intent.EXTRA_STREAM, uri); 
```

使您提供给共享应用程序的 Uri 代表**图像文件的路径**。不是您用来查询提供商的 Uri。

为避免 Lint 警告，您只需添加

```
android:exported="false" 
```

在清单的[提供者标签中。](http://developer.android.com/guide/topics/manifest/provider-element.html#exported)

然后，您的提供者将只能在您的应用程序中使用。

# c# - 获取选中的 RadioButton 的标签名称

> ID：11688503
> 
> 赞同：1
> 
> 时间：2012-07-27T13:15:48.553
> 
> 标签：c#, linq, c#-4.0, radio-button

我有一组 RadioButtons，每个都有一个标签名称。我想得到它。如果没有选择 RadioButton，则它为空。我只完成了其中的一部分。

```
string sGender = 
    groupBox4.Controls.OfType<RadioButton>().Where(r => r.Checked)
        .FirstOrDefault().Tag.ToString(); 
```

**更新**：

如果没有选中任何按钮，它可能会出现异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:20:03.223

问题到底是什么？这里有错误吗？它是什么，在哪里？您需要确保尽可能清晰准确地指定您的问题。

猜测虽然`.FirstOrDefault()`可以返回 null 所以我怀疑你在那里得到了一个空引用异常。在继续之前，您需要检查一下...

```
string sGender;
var radioButton = groupBox4.Controls.OfType<RadioButton>()
                    .Where(r => r.Checked).FirstOrDefault();
if (radioButton == null)
{
    sGender = "";
}
else
{
    sGender = radioButton.Tag.ToString()
} 
```

既然你已经问过了，你可以使用三元运算符来避免使用 if 这个词。在任何实际意义上，这仍然是一个有效的 if 语句。您可以使用它来替换我上面给出的 if 语句，或者如果您真的不顾一切，您可以做一个衬里......我真的会选择最可读的，因为其他选项真的不会添加任何东西并且会失去可读性...

```
string sGender = groupBox4.Controls.OfType<RadioButton>().Any(r => r.Checked)?
    groupBox4.Controls.OfType<RadioButton>().Where(r => r.Checked)
        .First().Tag.ToString(): ""; 
```

# django - django中带有CharFiled的SelectMultiple表单字段

> ID：11688504
> 
> 赞同：0
> 
> 时间：2012-07-27T13:15:51.880
> 
> 标签：django, django-forms

我有一个匹配模型：

```
class Match(models.Model):
  base_f = models.CharField(max_length=255)
  base_v = models.IntegerField()
  dest_f = models.CharField(max_length=255)
  dest_v = models.IntegerField() 
```

我从`Match`模型创建了一个模型表单：

```
class MatchForm(forms.ModelForm):
   class Meta:
       model = Match
       widgets = {
           'base_f':forms.Select(choices=base_fs, attrs={'class':'base_f'}),
           'base_v':forms.Select(attrs={'class':'dest_v'}),
           'dest_f':forms.Select(choices=dest_fs, attrs={'class':'dest_f'}),
           'dest_v':forms.Select(attrs={'class':'dest_v'}),
        } 
```

form.save() 适用于这个模型表单。但我想使用`SelectMultiple`. 但是 form.save() 不会在数据库中添加任何数据，格式如下：

```
class MatchForm(forms.ModelForm):
   class Meta:
       model = Match
       widgets = {
           'base_f':forms.Select(choices=base_fs, attrs={'class':'base_f'}),
           'base_v':forms.SelectMultiple(attrs={'class':'dest_v'}),
           'dest_f':forms.Select(choices=dest_fs, attrs={'class':'dest_f'}),
           'dest_v':forms.SelectMultiple(attrs={'class':'dest_v'}),
        } 
```

我可以在 django 中将 SelectMultiple 模型与 CharFiled 一起使用吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:37:27.367

您不能在 CharField 中存储多个值。您可以为 CharField 提供选项并存储一个选项，但不能存储多个选项。

如果您需要存储多个值，则需要使模型存储多个多对多字段的实例。

# android - handler.postDelayed() 不工作

> ID：11688510
> 
> 赞同：2
> 
> 时间：2012-07-27T13:16:16.603
> 
> 标签：android

我想在延迟后重复执行一些代码。以下是代码。

```
public void hintrun(int i){
     Handler handler = new Handler();       
     for(int j = 1; j< i+1;j++) {
         handler.postDelayed(new Runna(j), 1000); 
     }
}

class Runna implements Runnable { 
    private int j;
    public Runna(int j2) {
        j=j2;
    }

    public void run() {  
        // some code
    }
} 
```

但它不起作用。如果说`for`循环运行 3 次，那么代码在 1000 毫秒后立即运行 3 次。我希望每次执行之间有 1000 毫秒的间隔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:20:56.697

您可以通过这种方式简单地更改循环代码，

```
for(int j = 1; j< i+1;j++)
{
    handler.postDelayed(new Runna(j), 1000*j); // 1000 * J
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:19:40.613

然后替换

```
handler.postDelayed(new Runna(j), 1000); 
```

和

```
handler.postDelayed(new Runna(j), 1000*(i+1)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T13:20:39.073

如果你想要 Runna 的每次执行之间有一个间隔。您将需要增加延迟的时间。

例如

```
handler.postDelayed(new Runna(j),1000 * j); 
```

# c# - 无法删除文件，因为它正被另一个进程使用

> ID：11688515
> 
> 赞同：1
> 
> 时间：2012-07-27T13:16:47.230
> 
> 标签：c#, file-io

```
for (int i = 0; i < PrefixDistinctCount; i++)
                {
                    string FirstPolicy = "";

                    FirstPolicy = OriginalPics[0].ToString().Substring(26, 7);

                    var SamePoliciesQuery = OriginalPics.Where(x => Path.GetFileName(x).StartsWith(FirstPolicy));

                    foreach (string picture in SamePoliciesQuery)
                    {
                        File.Move(picture, AppVars.ProcessingPolicyImagesDirectory + picture.Substring(26, 12) + ".jpg");
                    }

                    string[] SamePolicyPics = Directory.GetFiles(AppVars.ProcessingPolicyImagesDirectory);
                    GenerateTiffFile(SamePolicyPics);

                    Directory.Delete(AppVars.ProcessingPolicyImagesDirectory, true);
                    Directory.CreateDirectory(AppVars.ProcessingPolicyImagesDirectory);

                    OriginalPics = Directory.GetFiles(SelectedDirectory);
                } 
```

到最后它说“Directory.Delete(AppVars.ProcessingPolicyImagesDirectory, true);” 我收到一个错误，它不允许我删除文件。我猜这是因为代码中的某些内容没有关闭文件或没有关闭文件。有谁知道可能是什么情况？或者我将如何使用“使用”来解决这个问题？

IOException 未处理。该进程无法访问文件“blah blah”，因为它正被另一个进程使用。

这是 GenerateTiffFile 的代码 -

```
public void GenerateTiffFile(string[] SamePolicyPics)
        {
            ImageCodecInfo info = null;
            foreach (ImageCodecInfo ice in ImageCodecInfo.GetImageEncoders())
                if (ice.MimeType == "image/tiff")
                    info = ice;

            Encoder enc = Encoder.SaveFlag;

            EncoderParameters ep = new EncoderParameters(1);
            ep.Param[0] = new EncoderParameter(enc, (long)EncoderValue.MultiFrame);

            Bitmap pages = null;

            int frame = 0;

            foreach (string picture in SamePolicyPics)
            {
                if (frame == 0)
                {
                    pages = (Bitmap)Image.FromFile(picture);
                    //pages.Save(picture.Substring(0, picture.Length - 3) + "tiff", info, ep);
                    pages.Save(AppVars.FinalPolicyImagesDirectory + picture.Substring(29, 7)  + ".tiff", info, ep);
                }
                else
                {
                    ep.Param[0] = new EncoderParameter(enc, (long)EncoderValue.FrameDimensionPage);
                    Bitmap bm = (Bitmap)Image.FromFile(picture);
                    pages.SaveAdd(bm, ep);
                }

                if (frame == SamePolicyPics.Length - 1)
                {
                    ep.Param[0] = new EncoderParameter(enc, (long)EncoderValue.Flush);
                    pages.SaveAdd(ep);
                }
                frame++;
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:38:41.983

```
Bitmap bm = (Bitmap)Image.FromFile(picture); 
```

[如手册](http://msdn.microsoft.com/en-us/library/stf701f5.aspx)所述，这将保持文件锁定直到`bm`被处理。将其包装在一个块中：`using`

```
using (Bitmap bm = (Bitmap)Image.FromFile(picture))
{
   // your code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:20:23.463

```
using(Bitmap pages = (Bitmap)Image.FromFile(SamePolicyPics[0])){
        int frame = 0;

        foreach (string picture in SamePolicyPics)
        {
            if (frame == 0)
            {
                pages.Save(AppVars.FinalPolicyImagesDirectory + picture.Substring(29, 7)  + ".tiff", info, ep);
            }
            else
            {
                ep.Param[0] = new EncoderParameter(enc, (long)EncoderValue.FrameDimensionPage);
                using(Bitmap bm = (Bitmap)Image.FromFile(picture)){
                    pages.SaveAdd(bm, ep);
                }
            }

            if (frame == SamePolicyPics.Length - 1)
            {
                ep.Param[0] = new EncoderParameter(enc, (long)EncoderValue.Flush);
                pages.SaveAdd(ep);
            }
            frame++;
        }} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:55:59.503

这将需要对您的代码进行一些重写，因为该对象将仅存在于 using 范围内。但这个想法是这样的

```
foreach (string picture in SamePolicyPics)
{
    using (pages = (Bitmap)Image.FromFile(picture))
    {
        if (frame == 0)
        {
            pages.Save(AppVars.FinalPolicyImagesDirectory + picture.Substring(29, 7)  + ".tiff", info, ep);
        }
        else
        {
            ep.Param[0] = new EncoderParameter(enc, (long)EncoderValue.FrameDimensionPage);
            using (Bitmap bm = (Bitmap)Image.FromFile(picture))
            {
              pages.SaveAdd(bm, ep);
            }
        }

        if (frame == SamePolicyPics.Length - 1)
        {
            ep.Param[0] = new EncoderParameter(enc, (long)EncoderValue.Flush);
            pages.SaveAdd(ep);
        }
    }
    frame++;
} 
```

# cordova - 从一个选项卡移动到另一个选项卡后，dojox.mobile.currentView 为空

> ID：11688519
> 
> 赞同：0
> 
> 时间：2012-07-27T13:17:16.917
> 
> 标签：cordova, dojo, dojox.mobile, ibm-mobilefirst

我正在使用以下选项卡控件：

```
function tweetsAction()
{
    var w = dojox.mobile.currentView;
    if (w.id != "tweetsView") w.performTransition('tweetsView', 1, "slide", null);
}

function secondAction()
{
    var w = dojox.mobile.currentView;
    if (w.id != "secondView") w.performTransition('secondView', 1, "slide", null);
}

function thirdAction()
{
    var w = dojox.mobile.currentView;
    if (w.id != "thirdView") w.performTransition('thirdView', 1, "slide", null);
} 
```

在 Worklight JavaScript 中初始化它们，例如：

```
function initCommonControls()
{
    console.log("Android initCommonControls");

    WL.TabBar.init();
    WL.TabBar.addItem("tweetsView", tweetsAction, "Tweets", {image:"images/icons/help_bw.png", imageSelected:"images/icons/help.png"});
    WL.TabBar.addItem("secondView", secondAction, "Second", {image:"images/icons/help_bw.png", imageSelected:"images/icons/help.png"});
    WL.TabBar.addItem("thirdView", thirdAction, "Third", {image:"images/icons/help_bw.png", imageSelected:"images/icons/help.png"});

    WL.TabBar.setSelectedItem("tweetsView");
} 
```

标签在应用启动时显示正常：

![在此处输入图像描述](../Images/884bb2866d269ade0b9676b53a70a435.png)

但是，当我单击第二个或第三个选项卡时，这两个选项卡都会移动到第一个选项卡上：

![在此处输入图像描述](../Images/2cdbfb2ff92e92ec474a3fa4e9071783.png)

我在 JS 控制台中看到了这个 JavaScript 错误：

> 未捕获的类型错误：无法读取未定义的属性“id”

这意味着`var w = dojox.mobile.currentView; 移出初始选项卡后无法获取当前视图。

这就是我的 HTML 的样子：

```
<!-- Tweets View -->
    <div id="tweetsView" data-dojo-type="dojox.mobile.ScrollableView" data-dojo-props="selected: true">
        <div class="spacing"></div>
        <h1 id="head0" data-dojo-type="dojox.mobile.Heading" 
            data-dojo-props="label:'Tweet Search', fixed:'top'"></h1>
        <button onclick="getTweets()">Get Tweets</button>
        <input data-dojo-type="dojox.mobile.TextBox" id="sampleItem">
        <ul data-dojo-type="dojox.mobile.EdgeToEdgeList" id="theTable"
            class="tweetviewList">
        </ul>
    </div>

    <!-- second View -->
    <div id="secondView" data-dojo-type="dojox.mobile.ScrollableView" data-dojo-props="selected:false">
        <div class="spacing"></div>
        <h1 data-dojo-type="dojox.mobile.Heading" 
            data-dojo-props="label:'second view', fixed:'top'"></h1>
        This is a second view
    </div>

    <!-- third View -->
    <div id="thirdView" data-dojo-type="dojox.mobile.ScrollableView" data-dojo-props="selected:false">
        <div class="spacing"></div>
        <h1 data-dojo-type="dojox.mobile.Heading" 
            data-dojo-props="label:'third view', fixed:'top'"></h1>
        This is a third view
    </div> 
```

关于为什么`dojox.mobile.currentView`在切换标签后什么都不返回的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:55:58.923

我猜它与此有关：http: [//bugs.dojotoolkit.org/ticket/15040](http://bugs.dojotoolkit.org/ticket/15040)。听起来他们已经从最新版本的 Dojo Mobile 中删除了 dojox.mobile.currentView。我目前正在使用 Worklight 做一些事情，并且我也得到了 dojox.mobile.currentView 的“未定义”。

该页面上有一些建议，但现在看来一切都需要变得更加复杂 - 耶 :(

# vertica - vsql 比 Squirrel SQL 慢

> ID：11688527
> 
> 赞同：0
> 
> 时间：2012-07-27T13:17:39.527
> 
> 标签：vertica, vsql

我在一个大约有 2.58 亿行的表上的 Vertica 数据库（在单个节点上运行）中执行如下 SQL。

在 SQuirrel SQL 中，我在大约 17 秒内获得了输出，但在命令行模式下，在 vsql 中获得相同查询的输出需要几分钟。

```
select avg(item_chr_val_id) from table1 
```

任何想法，这种缓慢的原因可能是什么`vsql`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T16:49:48.963

您使用的是什么版本的 Vertica ande JDBC jar？我想知道您是否以某种方式幸运地使用 JDBC 进入了正确的执行计划。虽然这看起来很奇怪而且不太可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T18:21:29.760

延迟是由于格式化操作。在您的 SQuirrel SQL 中，我的第一个格式化数据可能有 100 或 1000 个限制！在 vsql 中，默认值是 1000 但你可以 chenge !! 要查看执行时间，一种选择是执行以下操作

```
\timing
\o \dev\null
select avg(item_chr_val_id) from table1; 
```

这可能会得到一个准确的结果，因为数据不会在屏幕上格式化

# php - 使用不同服务器中的域进行 URL 掩码

> ID：11688534
> 
> 赞同：1
> 
> 时间：2012-07-27T13:17:55.947
> 
> 标签：php, .htaccess, url-rewriting, dns, masking

我有 domain.com 并使用 .htaccess 将其重定向到 domain2.com（位于不同的服务器中）。但是掩盖接缝并不困难，因为它们位于不同的服务器中。如何进行域屏蔽。任何可能的方法（可能是 php、.htaccess 或其他任何东西）。我从私人域名注册处购买了 domain.com 的托管服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:22:47.273

要进行屏蔽，域必须位于同一服务器中。在 Apache 配置中，您的第一个域的别名必须具有另一个域。在某些托管面板中，此选项显示为“停车域”

# ruby-on-rails - Activeadmin creating new associations "belongs_to" in a form

> ID：11688538
> 
> 赞同：4
> 
> 时间：2012-07-27T13:18:12.890
> 
> 标签：ruby-on-rails, associations, activeadmin, belongs-to

having those example models:

```
class Post < ActiveRecord::Base
  belongs_to :category
end

class Category < ActiveRecord::Base
  has_many :posts
end 
```

Imagine I have a form to create new posts, by default I get a select with a list of available categories, but what If I want to create new categories from the "new/edit post" form?

Would be perfect to have a button with the select box that popup a windows to create a new category.

Is better than creating a new category and then going to create a new post.

What I always saw is creating has_many associations, but not belongs_to one.

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T23:13:16.963

I think you're kind of asking a couple questions here. I'm going to say the more important one is how to create the association in the opposite direction from how it's usually built (because that's the one I know how to answer). I'll focus on that.

For simplicity, I'll just define a simple text field with label you can fill in as part of your form.

```
= label_tag :new_category_name
= text_field_tag :new_category_name 
```

In your controller, you can then build the new category like so.

```
@post.build_category(name: params[:new_category_name]) 
```

If you're saving your @post the conventional way, then the category will be created in the same transaction as the post, so if that fails it won't create the category. If you want it to save the category no matter what you can call `@post.create_category` instead.

Here's the documentation: [http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

In the table *Singular associations (one-to-one)*, replace `other` with your model name.

The other question I think is how to make it look good in the view. You certainly have options for how to make it look good. You can create a popup as you suggested. You could also use AJAX to send a small xhr request. I've seen fancy combination select / text boxes too.

# javascript - 节点控制台的咖啡脚本模式？

> ID：11688543
> 
> 赞同：12
> 
> 时间：2012-07-27T13:18:20.880
> 
> 标签：javascript, node.js, console, coffeescript

我想知道是否有任何简单的方法可以让交互式 node.js 控制台会话使用 coffeescript 的语法对命令进行即时解释。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-27T13:26:38.503

假设您已安装 node.js 和 npm[1]，请使用以下命令安装 CoffeeScript：

```
> npm install -g coffee-script 
```

然后在您的终端中，键入：

```
> coffee 
```

您将拥有一个类似 node.js 的控制台，但使用的是 CoffeeScript 语法。

[1] 要安装 node.js，请从此处下载二进制文件：[http ://nodejs.org/#download](http://nodejs.org/#download)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T13:24:43.730

试着输入

```
coffee 
```

在壳里

**用于安装**

1.  [首先安装 Node.js（包括 NPM）](http://nodejs.org/#download)

2.  `sudo npm install -g coffee-script`

# .net - .NET 远程处理：读取大文件

> ID：11688554
> 
> 赞同：0
> 
> 时间：2012-07-27T13:19:00.813
> 
> 标签：.net, file, remoting

我有一个 .NET Remoting 应用程序。目前，该应用程序具有远程服务器需要获取文件并将其作为字节数组发送到客户端的功能。由于整个字节数组会立即发送到客户端，如果文件大小很大，那么就会出现问题。

所以我正在考虑实现文件的部分读取，

像

```
public byte[] ReadPartialFile(string fileName, int offset, int bufferSize)
{
   //use FileStream and BinaryReader to read the required (depends of offset and buffer) bytes and send them back...
} 
```

但是我担心如果文件很大，缓冲区很小，文件流和相关对象会被创建和处理 N 次，这会对应用程序产生不利影响....

我也不想增加应用程序（客户端和服务器）的内存消耗......

谁有更好的主意...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:33:44.583

由于 Stream 是 MarshalBy Ref 您可以将流从客户端传递到服务器

```
public unsafe void ReadFileFromSensor(Stream destination)
{
     //server writes to stream
     destination.Write(buffer, 0, buffer.Length);
} 
```

反过来是行不通的。如果您通过远程处理从流中读取，则传递的数组将被序列化，因此不会被填充。

在这种情况下，我们为流定义了一个扩展方法，而无需传递数组

```
public static byte[] Read(this Stream stream, int nBytesToRead, out  int nBytesRead)
{
        byte[] buffer = new byte[nBytesToRead];
        nBytesRead = stream.Read(buffer,0,nBytesToRead);
        return buffer;
} 
```

我们使用这种方法通过本地以太网进行通信。服务器访问客户端上的流没有问题。但如果服务器必须连接回客户端，则在其他情况下可能会出现问题。

# php - 使用 html 在另一个区域中输入的表单数据

> ID：11688556
> 
> 赞同：1
> 
> 时间：2012-07-27T13:19:11.643
> 
> 标签：php, html, forms

我想取某人在我的表单中输入的名字，并在页面的其他地方使用它。所以当他们提交表单时，在它指向的页面上会说“谢谢，*_* ”

我知道如何使用 php 来做到这一点，但是我已经将我的 php 设置为在发送电子邮件后定向到 html 页面，所以我想知道是否有办法保持这个设置，并在 html 页面上会说“谢谢你，*_* ”

当我使用 php 时，我写 ($_REQUEST['name']); 提取名称，但是有没有办法在 php 页面之外执行此操作？

如果没有，我会坚持过去的做法，但我无法在任何地方找到答案，我想知道是否有可能，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:39:08.633

您应该查看 HTML5 跨文档消息传递

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:27:02.653

您可以在 PHP 中设置一个 cookie，然后让一些 Javascript 将其拾取并输入他们的名字！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T13:27:42.853

您可以将名称添加到 HTML 页面的 URL，例如`thanks.html?name=John`，然后使用 JavaScript 将其添加到页面中。可以通过`location.search`JavaScript 访问该变量。

# asp.net-mvc - 视图中的 ASP MVC 显示矩阵 (array[,])

> ID：11688561
> 
> 赞同：0
> 
> 时间：2012-07-27T13:19:36.573
> 
> 标签：asp.net-mvc

你好我有asp mvc查看页面，

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<System.Drawing.Color[,]>" %> 
```

我如何通过这个模型制作一个循环并显示所有元素？

我不使用剃刀:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:29:17.553

您可以使用 2 个嵌套循环，一个用于矩阵的行，一个用于矩阵的列：

```
<table>
    <% for (int i = 0; i < Model.GetLength(0); i++) { %>
        <tr>
            <% for (int j = 0; j < Model.GetLength(1); j++) { %>
                <td>
                    <%= Model[i, j] %>
                </td>            
            <% } %>
        </tr>
    <% } %>
</table> 
```

# c++ - 是否有可以在 Visual Studio 中编译的可用且许可的 strptime.h 版本？

> ID：11688565
> 
> 赞同：1
> 
> 时间：2012-07-27T13:19:49.537
> 
> 标签：c++, c, visual-studio-2010, visual-c++, strptime

我查看了几个实现，但没有成功让它们在 Visual Studio 2010 中编译（有明显修改）。如果有人能指出我正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:25:05.790

没关系，我找到了一个。我的 google-fu 正在改进。

[http://code.google.com/p/googlesitemapgenerator/source/browse/trunk/src/common/timesupport.cc](http://code.google.com/p/googlesitemapgenerator/source/browse/trunk/src/common/timesupport.cc)

# c++ - 依赖于参数的名称查找：添加额外的名称空间以查看

> ID：11688566
> 
> 赞同：1
> 
> 时间：2012-07-27T13:19:51.317
> 
> 标签：c++, namespaces, argument-dependent-lookup, name-lookup

我想利用 ADL 规则来检查额外命名空间中的函数：

假设我们有一个`class X`.

```
class X
 {
 ...
 }; 
```

通话中

```
X x;
f(x); 
```

我希望编译器查看`namespace funky`，直到现在与`class X`. 但我不想通过`funky::f`在调用时放置来混淆编码`f`。

实现此目的的一种方法是定义`class X`为模板类，其参数来自`namespace funky`.

```
template <typename Fake = funky::someClassFromFunky>
class X
 {
 ...
 }; 
```

对于一个调用`f(x)`，现在，编译器确实会寻找`funky::f`.

是否有更清洁/更简单的方法来实现相同的行为？（特别是，`someClassFromFunky`在声明中引用一些任意类`class X`是很尴尬的。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:22:41.033

您可以像这样将 f 导入您的命名空间：

```
using funky::f; 
```

# java - 在平板电脑上播放 HTML5 视频

> ID：11688571
> 
> 赞同：1
> 
> 时间：2012-07-27T13:20:07.837
> 
> 标签：java, android

我有一个可行的解决方案来在 android 手机中查看 HTML5 视频。它在安卓平板电脑上根本不起作用（例如三星 Galaxy Tab 2）。当我开始播放视频时，我可以听到声音，但屏幕是黑色的。

这是我的代码： http: [//pastebin.com/P9ebDKha](http://pastebin.com/P9ebDKha)

我必须重写所有代码吗？小错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:25:22.893

THis is how i am getting to play a youtube video filling the size of the webview which i have ...

```
 video = (WebView) v.findViewById(R.id.videoview);

               String videoURL = "http://www.youtube.com/v/DZi6DEJsOJ0?fs=1&amp;hl=nl_NL";

               video.setHorizontalScrollBarEnabled(false);
               video.setVerticalScrollBarEnabled(false);

               video.getSettings().setJavaScriptEnabled(true);
               video.getSettings().setPluginsEnabled(true);

               Display display = getActivity().getWindowManager().getDefaultDisplay();
               int width = display.getWidth();
           int widthdp = (int) (width / getResources().getDisplayMetrics().density);
               int height = display.getHeight();
          int heightdp = (int) (height / getResources().getDisplayMetrics().density);

               String widthAndHeight = "width=" + widthdp + "height=" + heightdp;
               String temp = "<object "
              + widthAndHeight
               + ">"
            + "<body style='margin:0;padding:0;'>"
          + "<param name='allowFullScreen' value='true'>"
          + "</param><param name='allowscriptaccess' value='always'>"
           + "</param><embed src='"
           + videoPoP
            + "'"
             + " type='application/x-shockwave-flash' style='margin:0;padding:0;'         allowscriptaccess='always' allowfullscreen='true'"
                + widthAndHeight + "></embed></object>";

               video.loadData(temp, "text/html", "utf-8"); 
```

# ruby-on-rails - Rails：活动记录协会

> ID：11688572
> 
> 赞同：2
> 
> 时间：2012-07-27T13:20:07.873
> 
> 标签：ruby-on-rails, activerecord, associations, ruby-on-rails-3.2

两天来，我一直在努力解决 AR 协会的问题。我知道有一个简单的解决方案，但我无法弄清楚。

我有两个模型产品和用户，应该链接在一起。一个产品应该属于一个用户，一个用户应该有很多产品。我没有设法在我的控制器中设置用户变量，所以我去了一个 habtm 关联。以下是模型：

用户.rb

```
class User < ActiveRecord::Base
# Include default devise modules. Others available are:
#...

has_and_belongs_to_many :products 
```

产品.rb

```
class Product < ActiveRecord::Base
has_many :product_images, :dependent => :destroy
accepts_nested_attributes_for :product_images, :allow_destroy => :true
has_and_belongs_to_many :users 
```

products_controller.rb

```
class ProductsController < ApplicationController

def index
@products = Product.search(params[:search]).order(sort_column + ' ' + sort_direction).paginate(:per_page => 10, :page => params[:page])

respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @products }
end
end

def new
@user = current_user
@product = Product.new#@user.products.build(params[:product])
@product.product_images.build
respond_to do |format|
  format.html # new.html.erb
  format.json { render json: @product }
end
end

def create
@user = current_user
@product =  @user.products.build(params[:product])#Product.new(params[:product])
    @product.product_images.build
    @user.products << @product

respond_to do |format|
  if @product.save
    format.html { redirect_to @product, notice: 'Product was successfully created.' }
    format.json { render json: @product, status: :created, location: @product }
  else
    format.html { render action: "new" }
    format.json { render json: @product.errors, status: :unprocessable_entity }
  end
end
end 
```

_form.html.erb

```
<%= form_for @product, :html => {:multipart => true, :class => 'form-horizontal'} do |f| %> 
```

架构.rb

```
....
create_table "products_users", :id => false, :force => true do |t|
t.integer "product_id"
t.integer "user_id"
end
.... 
```

所以，即使我知道，用户和产品之间应该存在一对多的关联，这对我来说很有效。在 IRB 中，我可以这样做：

```
u = User.first
u.products 
```

通过 habtm 协会，我什至可以做到这一点：

```
p = Product.first
p.users 
```

但我无法访问用户属性：

```
p.users.username:

NoMethodError:   User Load (2.0ms)  SELECT "users".* FROM "users" INNER JOIN "products_users" ON "users"."id" = "products_users"."user_id" WHERE "products_users"."product_id" = 12 
```

有人能帮我解决这个问题吗？我究竟做错了什么？

非常感谢！你的帮助将节省我的周末！

编辑：这是我对一对多关系的控制器操作：

```
class ProductsController < ApplicationController

helper_method :sort_column, :sort_direction
def index
@products = Product.search(params[:search]).order(sort_column + ' ' + sort_direction).paginate(:per_page => 10, :page => params[:page])

respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @products }
end 
```

结尾

def show @product = Product.find(params[:id]) @images = @product.product_images respond_to do |format| format.html # show.html.erb format.json { 渲染 json: @product } end end

```
def new
@user = current_user
@product = Product.new#@user.products.build(params[:product])
@product.product_images.build
#3.times { @product.product_images.build }
respond_to do |format|
  format.html # new.html.erb
  format.json { render json: @product }
end
end

def edit
@product = Product.find(params[:id])
    @product.product_images.build
end

def create
@user = current_user
@product =  @user.products.build(params[:product])#Product.new(params[:product])
    @product.product_images.build

respond_to do |format|
  if @product.save
    format.html { redirect_to @product, notice: 'Product was successfully created.' }
    format.json { render json: @product, status: :created, location: @product }
  else
    format.html { render action: "new" }
    format.json { render json: @product.errors, status: :unprocessable_entity }
  end
end
end

def update
@product = Product.find(params[:id])

respond_to do |format|
  if @product.update_attributes(params[:product])
    format.html { redirect_to @product, notice: 'Product was successfully updated.' }
    format.json { head :no_content }
  else
    format.html { render action: "edit" }
    format.json { render json: @product.errors, status: :unprocessable_entity }
  end
end
end

def destroy
 @product = Product.find(params[:id])
 @product.destroy

respond_to do |format|
  format.html { redirect_to products_url }
  format.json { head :no_content }
end
end

private
def sort_column
Product.column_names.include?(params[:sort]) ? params[:sort] : "created_at"
# params[:sort] || "created_at"
end

def sort_direction
%w[asc desc].include?(params[:direction]) ? params[:direction] : "asc"
# params[:direction] || "asc"
end
end 
```

EDIT2：Schema.rb

```
create_table "products", :force => true do |t|
t.string   "title"
t.string   "description"
t.string   "testimonial"
t.decimal  "credits",       :precision => 3, :scale => 0
t.datetime "created_at",                                  :null => false
t.datetime "updated_at",                                  :null => false
t.decimal  "age"
t.string   "condition"
t.string   "product_image"
t.string   "image"
t.integer  "user_id"
end

create_table "users", :force => true do |t|
t.string   "email",                  :default => "", :null => false
t.string   "encrypted_password",     :default => "", :null => false
t.string   "reset_password_token"
t.datetime "reset_password_sent_at"
t.datetime "remember_created_at"
t.integer  "sign_in_count",          :default => 0
t.datetime "current_sign_in_at"
t.datetime "last_sign_in_at"
t.string   "current_sign_in_ip"
t.string   "last_sign_in_ip"
t.datetime "created_at",                             :null => false
t.datetime "updated_at",                             :null => false
t.string   "username"
t.integer  "product_id"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:24:35.433

`has_and_belongs_to_many`如果您有一对多关系，请不要使用。创建和维护另一个表会增加太多的复杂性。我的建议是弄清楚为什么你不能使一对多关系起作用。

您应该能够完成这项工作：

```
class User < ActiveRecord::Base
  has_many :products #Plural
end

class Product < ActiveRecord::Base
  belongs_to :user #Singular
end 
```

如果它不起作用，请复制/粘贴用于一对多关系的控制器代码！

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:22:35.447

因为`Product`有很多`users`,`p.users`是一个类似数组的对象。你需要`p.users[0].username`.

但是为什么不能让它成为标准的一对多关联呢？

# javascript - document.write 和 document.innerHTML 和其他 javascript 问题有什么区别？

> ID：11688575
> 
> 赞同：-1
> 
> 时间：2012-07-27T13:20:13.780
> 
> 标签：javascript, document.write

我在尝试将标签放入 document.write() 调用时遇到问题。我认为这是因为 document.write() 已经存在于另一个标签中。

我在网上的某个地方看到还有一个 document.innerHTML() 调用。有谁知道这是否对我有帮助，如果没有，还有其他方法吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:22:50.953

`document.write`可用于在页面解析期间发出标记。解析后不能用于修改页面。的输出`document.write`直接进入解析器，就好像它一开始就在 HTML 文档中一样。例如：

```
<body>
<script>
document.write("<p>");
</script>
hi there</p> 
```

**在**浏览器中看起来与

```
<body>
<p>hi there</p> 
```

`innerHTML`，它不是一个函数，而是一个*属性*，存在于所有 DOM 元素实例上，并且可以使用标记来设置它们的内容。这与实例上可用的各种 DOM 方法一起，是完成动态网页的主要方式。例如：

```
<body>
<p id="target">Hi there</p>
<script>
document.getElementById("target").innerHTML = "Updated by <strong>code</strong>";
</script>
</body> 
```

...将段落从说“嗨”更改为“由**代码**更新”。

更多探索：

*   [`innerHTML`](http://www.w3.org/TR/html5/embedded-content-0.html#dom-innerhtml)
*   [DOM2 核心](http://www.w3.org/TR/DOM-Level-2-Core/)
*   [DOM2 HTML](http://www.w3.org/TR/DOM-Level-2-HTML/)
*   [DOM3 核心](http://www.w3.org/TR/DOM-Level-3-Core/)
*   [DOM2 事件](http://www.w3.org/TR/DOM-Level-2-Events/)
*   [DOM3 事件](http://www.w3.org/TR/DOM-Level-3-Events/)
*   [HTML5 Web 应用程序 API](http://www.w3.org/TR/html5/webappapis.html#webappapis)

# java - 使用 JTextfield 文本重复搜索 JTable

> ID：11688581
> 
> 赞同：1
> 
> 时间：2012-07-27T13:20:31.847
> 
> 标签：java, swing

以下代码将从文本字段中获取文本并在 JTable 中搜索它。它仅显示文本的第一次出现。我也需要连续发生。所以，请指导我如何实现这一目标。提前致谢。

```
private void search8()
{
    String target8 = sear8.getText();
    for(int row = 0; row < table8.getRowCount(); row++)
        for(int col = 0; col < table8.getColumnCount(); col++)
        {
            String next8 = (String)table8.getValueAt(row, col);
            if(next8.equals(target8))
            {
                showSearchResults(row, col);
                return;
            }
        }
} 
```

更新：

```
private void showSearchResults(int row, int col)
{
    CustomRenderer renderer = (CustomRenderer)table8.getCellRenderer(row, col);
    renderer.setTargetCell(row, col);
    Rectangle r8 = table8.getCellRect(row, col, false);
    table8.scrollRectToVisible(r8);
    table8.repaint();
}

class CustomRenderer implements TableCellRenderer
{
    public CustomRenderer()
    {
       label = new JLabel();
       label.setHorizontalAlignment(JLabel.CENTER);
       label.setOpaque(true);
       targetRow = -1;
       targetCol = -1;
    }

    public Component getTableCellRendererComponent(JTable table,
    Object value,boolean isSelected,boolean hasFocus,int row, int column)
    {
       if(isSelected)
       {
           label.setBackground(table.getSelectionBackground());
           label.setForeground(table.getSelectionForeground());
       }
       else
       {
           label.setBackground(table.getBackground());
           label.setForeground(table.getForeground());
       }
       if(row == targetRow && column == targetCol)
       {
           label.setBackground(new Color(176,196,222));
           //label.setBorder(BorderFactory.createLineBorder(Color.red));
           label.setFont(table.getFont().deriveFont(Font.BOLD));
       }
       else
       {
           label.setBorder(null);
           label.setFont(table.getFont());
       }
       label.setText((String)value);
       return label;
    }

    public void setTargetCell(int row, int col)
    {
       targetRow = row;
       targetCol = col;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:25:14.230

您在找到 target8 的第一个匹配项后立即返回。

最好建立一个匹配字符串列表并传递给您的方法`showSearchResults`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T14:16:53.753

有两种方法可以实现这一点：

*   正如 Reimeus 建议的那样，执行一次解析以查找特定搜索关键字的所有出现并将它们的位置存储在列表中。然后调用你的`showSearchResults()`并遍历列表。

*   第二个选项是将您上次扫描的位置存储在某个地方。然后当用户按下下一步时，从这个位置开始搜索，而不是再次 (0,0)。

*我个人更喜欢第一个选项，因为我不必重复扫描此表。此外，此列表将帮助我轻松实现“上一个”和“下一个”功能*

**编辑：**这是实现此目的的一种方法（*请注意，您必须根据自己的要求对其进行自定义，这只是为了帮助您入门*）：

```
private void search8() {
    ArrayList<String> resultList = new ArrayList<String>();

    String target8 = sear8.getText();
    for (int row = 0; row < table8.getRowCount(); row++) {
        for (int col = 0; col < table8.getColumnCount(); col++) {
            String next8 = (String) table8.getValueAt(row, col);
            if (next8.contains(target8)) {
                resultList.add(row + "," + col);
            }
        }
    }

    System.out.println(sarr8.length);

    String[] tokens;
    for (String result : resultList) {
        try {
            tokens = result.split("[,]");
            showSearchResults(tokens[0], tokens[1]);
        } finally {
            tokens = null;
        }
    }

    /**
     * Your remaining part
     */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T22:09:18.403

```
// I'd, personally, make this protected as you may wish to change the how the search 
// is performed in the future.
protected void search8() {

    // You've assumed that there are only ever 40 elements
    // while you've allowed for a variable number of search positions
    // You would need (at least) (rowCount * colCount) * 2 elements to be
    // safe.  This is a little ridiculous considering that there might
    // only be 1 reuslt in the table
    // int[] sarr8 = new int[40]; <-- Don't really want to do this

    // Instead, we should use a dynamic array instead
    // The ArrayList is a Collection implementation backed by an array
    // but it has the means to grow (and shrink) to meet the capacity requirements
    List<Point> slist8 = new ArrayList<Point>(25); // <-- you could change the initial value as you see fit
    int i = 0;
    String target8 = sear8.getText();
    for (int row = 0; row < table8.getRowCount(); row++) {
        for (int col = 0; col < table8.getColumnCount(); col++) {
            String next8 = (String) table8.getValueAt(row, col);
            if (next8.contains(target8)) {
                // Okay, this kinda cheating, but we want to store col/row or x/y
                // cell coordinates.  You could make your own class "Cell" class,
                // but for what we want, this is exactly the same
                Point cell = new Point(col. row);
                //sarr8[i] = row;
                //sarr8[i + 1] = col;
                //i = i + 2;
                slist8.add(cell);
            }
        }
    }

    //System.out.println(sarr8.length);
    System.out.println(slist8.size());

    //for (int j = 0; j < sarr8.length; j += 2) {
    //    showSearchResults(sarr8[j], sarr8[j + 1]);
    //    return;
    //}

    // Now, personally, I'd pass in the whole result set to the "showSearchResults"
    // method, because, IMHO, that's the methods domain of responsibility, ours was
    // to simply find the results.

    showSearchResults(slist8);

    // At this point, the showSearchResults method can determine how it wants to display
    // the search results

} 
```

@Sujay 在他的回答中也证明了这种方法

**更新**

```
for (Point p : slist8) {
    showSearchResults(p.x, p.y);
} 
```

别的

```
private void showSearchResults(List<Point> results)
{

    for (Point p : results) 
    {
        int col = p.x;
        int row = p.y;
        CustomRenderer renderer = (CustomRenderer)table8.getCellRenderer(row, col);
        renderer.setTargetCell(row, col);
        Rectangle r8 = table8.getCellRect(row, col, false);
        table8.scrollRectToVisible(r8);
    }
    table8.repaint();
} 
```

# excel - 将侦听器附加到单元格并获得“内存不足”异常

> ID：11688583
> 
> 赞同：0
> 
> 时间：2012-07-27T13:20:35.057
> 
> 标签：excel, vba

我有一张我点击按钮的工作表。此按钮创建两个论坛字符串（它们是 C# excel 插件/UDF），然后将它们粘贴到两个单元格中。第一个函数创建一些数据并将其存储在缓存中，第二个函数使用插入到 Excel 缓存中的数据。问题是第二个函数在插入数据之前执行得太早了。

因此，我编写了一个函数来充当侦听器，并在编辑第一个单元格的值时：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Target = Sheets("1").Range("A1") Then           'The error is here
        Sheets("1").Cells(5, 1).Calculate
    End If
End Sub 
```

当我单击创建公式/函数字符串的按钮时，我得到：

运行时错误'7'：内存不足

我不明白这是为什么？错误的行是：

```
If Target = Sheets("1").Range("A1") Then 
```

**编辑这是由于当我单击按钮时我清除了整个工作表 X 的内容而引起的。有什么办法解决这个问题吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:11:18.777

基本问题是 Excel 通过计算后进先出序列中的公式开始重新计算：因此让您的按钮代码计算您的第一个公式以创建缓存是明智的（您可以使用 Range.calculate 或任何其他适当的计算方法）在输入第二个公式之前。

# java - 为什么 Tomcat 无法显示实际的堆栈跟踪？

> ID：11688587
> 
> 赞同：4
> 
> 时间：2012-07-27T13:20:45.730
> 
> 标签：java, gwt, tomcat

使用`GWT`，我已将我的服务器部署到**Tomcat**中。这很好用，但是当`GWT`抛出异常时，弹出窗口会向客户端显示异常的堆栈跟踪。

在开发模式下，这工作正常。在 Tomcat 中，我得到以下堆栈跟踪。

**为什么以及如何解决这个问题？**

> ```
> Unknown.Le(StackTraceCreator.java:168)
> Unknown.Jd(StackTraceCreator.java:421)
> Unknown.NT(Exception_FieldSerializer.java:16)
> Unknown.g1(SerializerBase.java:55)
> Unknown.b1(SerializerBase.java:112)
> Unknown.D$(AbstractSerializationStreamReader.java:119)
> Unknown.uAc(CustomException_FieldSerializer.java:39)
> Unknown.uBc(ServerSideException_FieldSerializer.java:12)
> Unknown.f1(SerializerBase.java:46)
> Unknown._0(SerializerBase.java:92)
> Unknown.D$(AbstractSerializationStreamReader.java:119)
> Unknown.B_(RequestCallbackAdapter.java:216)
> Unknown._o(Request.java:287) 
> ```

**使用@Christian Kuetbach 的答案后，我现在得到了：**

> Unknown.com_google_gwt_core_client_impl_StackTraceCreator $ CollectorEmulated_ $ fillInStackTrace__Lcom_google_gwt_core_client_impl_StackTraceCreator $ CollectorEmulated_2Ljava_lang_Throwable_2V（StackTraceCreator.java:168）Unknown.java_lang_Throwable_Throwable__Ljava_lang_String_2Ljava_lang_Throwable_2V（StackTraceCreator.java:421）Unknown.com_google_gwt_user_client_rpc_StatusCodeException_StatusCodeException__ILjava_lang_String_2V（StatusCodeException.java:35）Unknown.com_google_gwt_user_client_rpc_impl_RequestCallbackAdapter_ $ onResponseReceived__Lcom_google_gwt_user_client_rpc_impl_RequestCallbackAdapter_2Lcom_google_gwt_http_client_Request_2Lcom_google_gwt_http_client_Response_2V（RequestCallbackAdapter.java:209）未知。com_google_gwt_http_client_Request_$fireOnResponseReceived__Lcom_google_gwt_http_client_Request_2Lcom_google_gwt_http_client_RequestCallback_2V(Request.java:287) Unknown.com_google_gwt_http_client_RequestBuilder$1_onReadyStateChange__Lcom_google_java_gwt_xhr_client_XMLHttpRequest_2V(RequestBuilder.java:395) Unknown.anonymous(HttpRequest:287)

**请帮忙！**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T15:02:50.363

> 为什么？

正如 Christian Kuetbach 所说，这是在 DevMode（您的代码在 Java 中执行）和 prod 模式（您的代码已编译为 JavaScript 并优化，包括重命名类和方法）之间的区别。

> 你如何解决这个问题？

你没有。一般来说，向用户显示堆栈跟踪不是一个好主意。更好的是通过将异常发送到服务器来记录异常（例如，使用`java.util.logging`来记录，以及`SimpleRemoteLogHandler`将日志发送到服务器，在服务器上使用 来记录`java.util.logging`）。

不过，有一些方法可以对堆栈跟踪进行反混淆，并且`RemoteLoggingServiceImpl`可以将 servlet 配置为自动执行此操作。
有关血腥细节，请参阅[http://code.google.com/p/google-web-toolkit/wiki/WebModeExceptions](http://code.google.com/p/google-web-toolkit/wiki/WebModeExceptions)。

如果您不能或不想使用远程日志记录，那么您可以“手动”对堆栈跟踪进行反混淆：查看与排列对应的`WEB-INF/deploy`（默认位置，可以通过传递`-deploy`给 GWT 编译器来更改）中的文件（与`*.cache.*`浏览器加载的文件同名），它会告诉您该`Le`方法源自哪个 Java 方法。
但是你已经有了源文件名和行号，所以你真的不需要它，对吧？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-29T10:46:49.153

在 GWT 文档中找到所有信息有点困难，您需要设置去混淆日志记录，所以这里是简短版本：

在您的模块文件 (.gwt.xml) 中，添加：

```
<inherits name="com.google.gwt.logging.Logging"/>
<set-property name="gwt.logging.simpleRemoteHandler" value="ENABLED" />
<set-property name="compiler.stackMode" value="emulated" />
<set-configuration-property name="compiler.emulatedStack.recordLineNumbers" 
     value="true" /> 
```

在客户端，使用类似的东西

```
import java.util.logging.Logger;

private static Logger rootLogger = Logger.getLogger("");
...
rootLogger.log(Level.SEVERE, "My message", e); 
```

您不必`RemoteLoggingServiceAsync`在客户端创建实例 - 它由记录器自动使用，因为我们指定了`<set-property name="gwt.logging.simpleRemoteHandler" value="ENABLED" />`.

在服务器端，配置 RemoteLoggingServiceImpl。您必须告诉它，它在哪里可以找到符号映射，这将在使用 GWT 编译器参数进行编译时生成`-extra /path/to/myExtraDir`。我个人使用重写 RemoteLoggingServiceImpl 的方法，以允许从 web.xml 的`<init-param>`[ ^(*]中指定目录)

```
package mypackage.server;

public class ConfigurableRemoteLoggingServiceImpl extends RemoteLoggingServiceImpl {

  @Override
  public void init(final ServletConfig config) throws ServletException {
    super.init(config);

    final String symbolMapsDirectory = 
        config.getInitParameter("symbolMapsDirectory");
    setSymbolMapsDirectory(symbolMapsDirectory);
  }
} 
```

在`web.xml`中，像这样注册

```
<servlet>
    <servlet-name>remoteLogging</servlet-name>
    <servlet-class>mypackage.server.ConfigurableRemoteLoggingServiceImpl</servlet-class>

  <init-param>
    <param-name>symbolMapsDirectory</param-name>
    <param-value>/path/to/myExtraDir/mymodulename/symbolMaps</param-value>
  </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>remoteLogging</servlet-name>
    <url-pattern>/mymodulename/remote_logging</url-pattern>
</servlet-mapping> 
```

用您自己的值替换`/path/to/myExtraDir`,`mymodulename`和`mypackage`，并且不要忘记使用[`-extra`参数](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#DevGuideCompilerOptions)调用 GWT 编译器（请注意，您不必使用`-style PRETTY`或详细说明，它也适用于 OBF）。保留所有生成的符号映射：没有它们，反混淆将不起作用。由于每个新版本都会自动获得一个唯一的名称，因此您可以在构建时将它们全部收集在一个安全的中心位置。

^([*] 我真的，真的很想知道，为什么 RemoteLoggingServiceImpl 自己不实现它！)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T13:28:37.737

这按预期工作，因为优化将删除方法和类名。

您可以编译为 PRETTY 或 DETAILED，以获得更好的可读性 Stacktraces。

还有模拟 Stacktraces 的可能性。

```
<set-property name="compiler.emulatedStack" value="true"/> 
<set-configuration-property name="compiler.emulatedStack.recordLineNumbers" value="true"/>
<set-configuration-property name="compiler.emulatedStack.recordFileNames" value="true"/> 
```

这对于生产用途来说是个坏主意，因为它会增加您的 javascript 的大小。

**更新：** 我看到一个 Exception_FieldSerializer 异常。

您是否尝试序列化某些不可序列化的东西？

没有默认构造函数的类是不可序列化的，不在您的客户端或共享包中的类。如果您尝试序列化异常，这可能是问题所在。

# python - 如何将ajax对象数据传递给python文件

> ID：11688588
> 
> 赞同：-3
> 
> 时间：2012-07-27T13:20:49.380
> 
> 标签：python, jquery

我编写了一个 ajax 代码来将值传递给 python 文件。我使用了 request.GET['user'] 但它给出了编译错误。帮助我在 python 中给出任何方法来捕获值。下面是python代码：

```
if (request.session.get('word',None) and request.session.get('user',None)):
    print "<script type='text/javascript'>console.log('no words submitted')</script>"
else:
    word=request.GET['word']
    user=request.GET['user'] 
```

阿贾克斯代码：

```
$.ajax({
    type:'GET',
    url: "http://sudhanshu-gupta-gh.com/wm-mrg/word_to_dictionary_test.py",
    data: {word: word, user: myName},
    success:function(html) { 
    console.log("Word send");
    },
    error: function(){
        console.log("Unable to Load!");
            },
    complete: function(){
        console.log("Word Added")
        }
            }); 
```

编译错误：

```
File "word_to_dictionary_user.py", line 8, in <module>
    word=request.GET['word']
NameError: name 'request' is not defined 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:23:51.727

看起来该函数没有`request`作为参数，但由于您的代码片段不完整，因此无法查明问题。

# winapi - WinAPI CreateFileA 错误代码 0xdf

> ID：11688589
> 
> 赞同：0
> 
> 时间：2012-07-27T13:20:55.307
> 
> 标签：winapi, webdav, createfile, error-code

我有一个映射的 Webdav 驱动器，我无法打开文件进行阅读

```
CreateFileA(file_path, FILE_READ_DATA, FILE_SHARE_READ, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL); 
```

我仍然收到错误代码 0xdf

> ERROR_FILE_TOO_LARGE 223 (0xDF) 文件大小超过允许的限制，无法保存。

但是在磁盘驱动器（NTFS）上我可以读取它，但在映射驱动器上表示为（FAT）ai只能写入文件

```
CreateFileA(dest_file_path, FILE_WRITE_DATA, FILE_SHARE_READ, NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL); 
```

有用

但不读取，当文件大小超过例如 70 MB 时

我的 webdav 在 apache 上运行。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:07:24.707

解决了

这是 WebClient 服务参数 FileSizeLimitInBytes 的问题

```
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\WebClient\Parameters\FileSizeLimitInBytes 
```

设置为 50,000,000 字节 50MB

如果我将其设置为

> 0xffffffff

现在可以处理 4GB 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-09T19:36:52.957

HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\WebClient\Parameters\FileSizeLimitInBytes

它应该可以工作

# file - WQL WMI 查询以监视新创建的文件

> ID：11688592
> 
> 赞同：0
> 
> 时间：2012-07-27T13:20:59.133
> 
> 标签：file, wmi, wql

以下查询应返回在文件夹 test 中创建到 G 驱动器的一组文件。

我无法让以下 WMI 查询正常工作：

```
SELECT * FROM __InstanceCreationEvent WITHIN 1 WHERE 
TargetInstance ISA 'CIM_DataFile' AND TargetInstance.Drive = 'G:' AND 
TargetInstance.Path = '\\test\\' 
```

wbemtest 实用程序给了我以下错误：

```
Number: 0x80041017
Facility: WMI
Description: Invalid query 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:34:55.147

事件类名中有一个空格，即。__InstanceCreationEvent 应该是 __InstanceCreationEvent。除此之外，您不应在查询中使用 LIKE 运算符，因为它会强制 WMI 在您的计算机上搜索所有将“test”作为其父目录之一的文件。最好使用确切的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:41:43.833

当您将其作为查询运行时，这会给您带来无效查询错误，但必须将 _instancecreationEvent*或“* _InstanceOperationEvent”的所有子类称为 NotificationQuery。

谢谢。

# ruby-on-rails - rails validates_format_of 的自定义正则表达式

> ID：11688594
> 
> 赞同：0
> 
> 时间：2012-07-27T13:21:16.073
> 
> 标签：ruby-on-rails, regex, validation

我正在开发一个具有特殊要求的表属性的 Ruby on Rails 应用程序。他们需要在表格中为我提供一种非常特殊的日期格式。有问题的格式是：

年月日

我更喜欢使用 Rails 的 validates :format 助手来使它更简洁一些，但我对正则表达式不是很好。有什么启发我的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:30:35.727

尝试

```
 validates :date, :format => { :with => /^[0-9]{4}[.][0-9]{2}[.][0-9]{2}$/, :message => "Invalid Date" } 
```

不是最佳实践。所有这一切都忘记了 bissext 年和月的天数

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-27T14:00:54.703

您可以尝试[http://rubular.com/](http://rubular.com/)来测试您的正则表达式。

# c++ - 提升类的 Python 绑定向量

> ID：11688595
> 
> 赞同：0
> 
> 时间：2012-07-27T13:21:18.613
> 
> 标签：c++, python, boost, boost-python

我正在尝试使用 Boost Python 为 C++ 类创建 python 绑定

```
#include <boost/python.hpp>
#include <boost/python/suite/indexing/vector_indexing_suite.hpp>
#include <vector>

using namespace boost::python;

struct World
{
    void set(std::string msg) { this->msg = msg; }

    std::string greet() { return msg; }

    MyList2 getList() {
        MyList v1(5, 1), v2(10, 2);
        MyList2 v;
        v.push_back(v1);
        v.push_back(v2);
        std::cout<<"In C++: "<<v.size()<<std::endl;
        return v;
    }

    std::string msg;
};

BOOST_PYTHON_MODULE(test_ext)
{
    class_< std::vector<World> >("MyList")
        .def(vector_indexing_suite< std::vector<World> >() );

    class_<World>("World")
        .def("greet", &World::greet)
        .def("set", &World::set)
        .def("list", &World::getList)
    ;
} 
```

但是我在尝试绑定类的向量时遇到向量索引套件的编译错误。

```
no match for ‘operator==’ in ‘__first.__gnu_cxx::__normal_iterator<_Iterator, _Container>::operator* [with _Iterator = World*, _Container = std::vector<World>, __gnu_cxx::__normal_iterator<_Iterator, _Container>::reference = World&]() == __val’ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T20:47:15.373

Python 列表比 C++ 向量具有更多的功能。 `vector_indexing_suite`除其他外定义`contains`方法，因此您的容器类必须定义`operator==`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T02:59:01.450

为什么我们需要定义运算符，我认为可以检查以下内容：

[为什么在 boost python 矢量索引套件中需要比较运算符？](https://stackoverflow.com/questions/10680691/why-do-i-need-comparison-operators-in-boost-python-vector-indexing-suite)

# seo - 如何在网站重新设计中保持#3 google 排名？

> ID：11688596
> 
> 赞同：-2
> 
> 时间：2012-07-27T13:21:22.470
> 
> 标签：seo

我有一个简单的三页网站，在自然谷歌排名中排名第三。当前的站点看起来已经过时并且处于重新设计项目的早期阶段。有没有办法改变整个网站的标记并保持排名或使其更好？

[网站：http://www.polytechnicsolutions.com/](http://www.polytechnicsolutions.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:40:34.883

**标记**

不要使用基于表格的布局。使用适当的标记，例如标题、微标签、图像（带有替代文本！）等等。您缺少元描述标签。您没有 doctype，并且[剪切不 validate](http://validator.w3.org/check?uri=http://www.polytechnicsolutions.com/&charset=%28detect%20automatically%29&doctype=Inline&group=0)。

仅在这里就有很多改进。

**内容**

你没有内容可谈。如果您想成为权威资源，则需要努力推动社区内容。视频、教程、案例研究、竞赛等。SEOmoz 有许多很棒的指南，用于为艰难的利基市场思考内容。相信我，这是可能的：我看到一家放射学公司特别制作了杀手级的内容，这反过来又产生了一个庞大的社区。是的，对于*放射学*来说，这是最难长期写作的利基市场的竞争者。

不要因为没有“有趣”的利基而气馁。虽然，你的肯定不错。

**链接建设**

你没有链接可言。如果你*真的*想在谷歌中排名（并且请高于#3），你需要反向链接。再次，看起来[SEOmoz 初学者指南](http://www.seomoz.org/beginners-guide-to-seo)会在这里帮助你。

如今，大多数白帽方法包括礼貌地要求链接或访客博客。你可以走得更远一点，参与灰帽方法而不会造成任何伤害，但要小心。并确保在您的旗舰域上尝试方法之前启动多个站点来测试方法。

祝你好运。

# joomla2.5 - 我如何在除主页之外的所有其他页面中隐藏 joomla 中的 HTML 代码块

> ID：11688598
> 
> 赞同：1
> 
> 时间：2012-07-27T13:21:25.493
> 
> 标签：joomla2.5

我以前在 joomla 1.5 中做过，但我不记得如何在 joomla 2.5 中做，我知道它涉及一个 php if 语句。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T09:04:43.370

在 Joomla 2.5 中执行以下操作：

```
<?php
$app = JFactory::getApplication();
$menu = $app->getMenu();
if ($menu->getActive() == $menu->getDefault()) {
    echo 'This is the front page';
}
?> 
```

多语言网站会变得有点复杂。它在[Joomla 文档](http://docs.joomla.org/How_to_determine_if_the_user_is_viewing_the_front_page)中有完整的描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T00:04:09.947

如果我理解您的问题，这可以通过从您的管理控制面板创建一个新的 HTML 模块并在其中插入您的 HTML 代码来轻松实现。

如何创建自定义 HTML 模块：[http ://www.joomlatutorials.com/joomla-tips-and-tricks/38-joomla-website-management/102-create-a-custom-html-joomla-module.html](http://www.joomlatutorials.com/joomla-tips-and-tricks/38-joomla-website-management/102-create-a-custom-html-joomla-module.html)

然后，您可以轻松设置模块的可见位置（菜单分配选项“在除所选页面之外的所有页面上”和选择的主菜单项），而无需破解您的模板。

# jquery - 绑定时两个输入的总和

> ID：11688600
> 
> 赞同：0
> 
> 时间：2012-07-27T13:21:32.100
> 
> 标签：jquery, bind

我试图总结绑定时的两个输入字段。

这是我的功能：

```
$j('#calclength, #calcwidth').keyup(function() {
    var s1 = $j('#calclength').val();
    var s2 = $j('#calcwidth').val();
    var s3 = (s1) + (s2);
        $j('.s1').text(s3);
}); 
```

而#calclength, #calcwidth 是我的输入，.s1 是一个带结果的跨度。

目前，每当将例如 1 和 2 插入输入中时，结果都会显示为 12 而不是 3。

你们能告诉我我在这里做错了什么吗？

提前谢谢你的帮助。多姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T13:25:15.473

使用将字符串转换为数字的一元 + 运算符

```
$j('#calclength, #calcwidth').keyup(function() {
    var s1 = $j('#calclength').val();
    var s2 = $j('#calcwidth').val();
    var s3 = (+s1) + (+s2);
    $j('.s1').text(s3);
}); 
```

[**小提琴**](http://jsfiddle.net/rTu6T/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T13:23:59.207

您需要将值转换为整数，例如[`parseInt()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)：

```
var s1 = parseInt($j('#calclength').val(), 10);
var s2 = parseInt($j('#calcwidth').val(), 10); 
```

第二个参数设置确保数字始终被视为十进制数字而不是八进制（前导）或十六进制（前导）的*基数*。`10``0``0x`

* * *

您`parseInt()`也可以通过在数字前面加上前缀来使用隐式转换为数字`+`：

```
var s1 = +$j('#calclength').val();
var s2 = +$j('#calcwidth').val(); 
```

* * *

哪种解决方案更适合您取决于您​​希望包含数字后跟垃圾的字符串的行为；请参阅此示例，了解行为有何不同：

```
js> +'123x'
NaN
js> parseInt('123x', 10)
123 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T13:22:55.120

这些值被读取为字符串，因此是连接的，而不是相加的。将它们强制为整数：

```
var s1 = parseInt($j('#calclength').val());
var s2 = parseInt($j('#calcwidth').val()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-27T13:25:50.470

您需要将它们转换为整数，否则它们是字符串并连接在一起，而不是求和。

```
$j('#calclength, #calcwidth').keyup(function() {
    var s1 = $j('#calclength').val();
    var s2 = $j('#calcwidth').val();
    var s3 = (+s1) + (+s2);
        $j('.s1').text(s3);
}); 
```

# maple - 无效输入：qMulZeil 使用了第 6 个参数 N，该参数缺失

> ID：11688602
> 
> 赞同：0
> 
> 时间：2012-07-27T13:21:38.653
> 
> 标签：maple

1.  不知道怎么解决

    RE1 := sumtools超递归；解决（RE1）；

2.  然后改用qMulZeil get error, already has N, got error

    哈恩 := 超项([-n,n+a+b-1,-x],[a,-N],1,k); qMulZeil(哈恩,[a,b],n,N,{});

    > 哈恩：=超项（[-n，n+a+b-1，-x]，[a，-N]，1，k）；qMulZeil(Hahn, [i, j], n, N, {});
    > 
    > ## pochhammer(-n, k) pochhammer(n + a + b - 1, k) pochhammer(-x, k)

    ```
     pochhammer(a, k) pochhammer(-N, k) factorial(k) 
    ```

    错误，无效输入：qMulZeil 使用了第 6 个参数 N，该参数缺失

3.  尝试演示[http://www.math.rutgers.edu/~zeilberg/multiZ/qmZ/inqmZ1](http://www.math.rutgers.edu/~zeilberg/multiZ/qmZ/inqmZ1)后，也得到错误

    qMulZeil(qfac(n)/qfac(i)/qfac(j)/qfac(nij),q^i+q^j,二项式(i,2)+二项式(j,2),[i,j], n,N,{});

    > qMulZeil(qfac(n)/(qfac(i)*qfac(j)*qfac(nij)), q^i+q^j, 二项式(i, 2)+二项式(j, 2), [i, j ], n, N, {}); 输入错误 FAIL[1], [FAIL[2][1], FAIL[2][2]]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:51:28.757

假设您正在使用第三方包 qMultiZeilberger，其中过程 qMulZeil 定义为[此处](http://www.math.rutgers.edu/~zeilberg/tokhniot/qMultiZeilberger)。

但是该过程指定了七个参数，而您的代码调用只传递了五个。所以错误消息是抱怨第一个（第六个）缺失的参数。

这不是库存 Maple 的一部分。如果您了解该第三方程序应该如何工作，请尝试向其传递另外两个（适当的）参数。

# java - 是否有类似 JSpinner 的触摸屏组件？

> ID：11688604
> 
> 赞同：0
> 
> 时间：2012-07-27T13:21:50.043
> 
> 标签：java, touchscreen, jspinner

我想使用类似于 JSpinner 的控件，但我需要在触摸屏上使用它。

JSpinner 箭头太小。

我在谷歌上找，但我什么也找不到！

你知道我可以使用的一些组件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:28:24.027

[您可以按照本](http://today.java.net/pub/a/today/2007/02/22/how-to-write-custom-swing-component.html)指南创建自己的 Swing 组件。这样你就可以指定旋钮的大小等等。

# json - 如何使用 Advanced REST Client 或 Postman 测试 Express/node REST API 后端？

> ID：11688608
> 
> 赞同：21
> 
> 时间：2012-07-27T13:22:01.063
> 
> 标签：json, api, node.js, rest, google-chrome

我需要使用 Advanced REST Client 或 Postman for Chrome 测试接受 JSON 的 REST API 后端。

但我遇到了问题：我只能使用内置表单和 Content-Type: application/x-www-form-urlencoded 发送请求

但这不起作用，因为我已经嵌入了文档，例如，**我需要发布这个**：

```
{title:"Awesome post!", tags: ["blue", "jeans"] } 
```

这对于任一 Chrome 扩展程序的内置形式都是不可能的。

当我选择 Raw Body 并在那里插入内容时，我的后端将 req.body 视为一个空对象。当我还设置标题“Content-Type：application/json”时，我在后端收到以下错误：

```
SyntaxError: Unexpected token n
at Object.parse (native)
at IncomingMessage.exports.parse.application/json (/Library/WebServer/Documents/slipfeed/node_modules/express/node_modules/connect/lib/middleware/bodyParser.js:135:16)
at IncomingMessage.EventEmitter.emit (events.js:85:17)
at IncomingMessage._emitEnd (http.js:366:10)
at HTTPParser.parserOnMessageComplete [as onMessageComplete] (http.js:149:23)
at Socket.socket.ondata (http.js:1682:22)
at TCP.onread (net.js:404:27) 
```

注意：我在应用程序的配置中使用了 bodyParser() 和 methodOverride()。禁用它们没有帮助。

**我应该使用什么设置才能将 JSON 输入到 Raw body 字段并且请求可以工作？**

为了澄清答案：我必须同时设置 Content-Type: application/json （在请求标头中）并使用格式正确的 json ，其中属性名称也在双引号内以使其正常工作。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-27T13:33:01.833

尝试用引号将字段属性括起来：{"title":"Awesome post!", "tags": ["blue", "jeans"] }

# mysql - 为什么这个 MySQL 查询不起作用？

> ID：11688609
> 
> 赞同：0
> 
> 时间：2012-07-27T13:22:04.760
> 
> 标签：mysql

我得到了这个不起作用的查询，我不知道它是什么。我正在写一封电子邮件活动脚本。这是网址；

```
http://www.example.com/activate.php?id=1&h=secretkey1 
```

这就是它的`activate.php`样子；

```
<?php
require "inc/connect.php";

$id = (int)$_GET['id'];
$hash = mysql_real_escape_string($_GET['h']);

$sql = mysql_query("SELECT id, h, active FROM tablename WHERE id=$id AND key=$hash") or die(mysql_error());  
$row = mysql_fetch_array($sql);

if ($row['active'] == "1") {
    echo "error!";
}
elseif ($row['active'] == "0") {
    mysql_query("UPDATE tablename SET active=1 WHERE id='$id' AND key='$hash'");
}
?> 
```

这是我得到的错误；

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“key=secretkey1”附近使用正确的语法

在我的数据库中，我有一个测试字段`tablename`；

```
id /    key    / active
------------------
1 / secretkey1 / 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:24:15.043

### 两个原因：

1）因为您需要将`secretkey1`（内部`$hash`）括在单引号中，因为它是一个字符串，并且字符串必须是单引号。`$id`不需要引用，因为您已将其转换为整数。

2)`KEY`是[MySQL 保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，必须用反引号括起来才能用作表名或列名：

```
$sql = mysql_query("SELECT id, h, active FROM tablename WHERE id=$id AND `key`='$hash'") or die(mysql_error()); 
```

我还注意到您正在`id, h, active`查询中进行选择，但您的示例表有一个名为 的列`key`，而不是`h`（除非我们没有看到该列）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T13:24:10.153

你有这个：

```
 key=$hash 
```

那应该是：

```
 key='$hash' 
```

* * *

顺便说一句，尽可能使用参数化查询来**防止**sql注入攻击。

使用 PDO：

[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

[PDO 准备好的语句是否足以防止 SQL 注入？](https://stackoverflow.com/questions/134099/are-pdo-prepared-statements-sufficient-to-prevent-sql-injection)

# magento - 如何在 Magento 中显示和跟踪分组产品？

> ID：11688610
> 
> 赞同：0
> 
> 时间：2012-07-27T13:22:05.350
> 
> 标签：magento, shopping-cart, product, shop, magento-1.7

我想在 Magento 中将多个简单产品作为分组产品销售。例如作为“集合”。
问题是，分组的产品没有显示在购物车中，也没有在订购时显示在 magento 后端。只有简单的产品被添加到购物车并显示在后端的订单信息中。
我想以某种方式跟踪和展示我的分组产品。
也不可能查，有多少人订购了我的组合产品，对吧？

我想在购物车和magento后端（报告=>产品=>订购的产品）中显示有关分组产品（产品名称）的信息

购物车和 magento-backend 中的信息应如下所示：
Product Set 1
- Product X
- Product Y

实际上，我并不真正关心将简单产品显示为前端分组产品的一部分。必须显示分组产品的名称。

我还需要在客户邮件中对其进行调整，然后将其发送到支付系统，......很多吗？有一个简单的解决方案吗？

顺便说一句：
我正在使用 Magento 1.7.0.2
我正在寻找扩展，但找不到满足此要求的扩展

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:31:21.127

我正在关注此项目，因此我可以为您提供可能解决此问题的更新。

# html - 使用 CSS 缩放图像，同时保持圆角

> ID：11688612
> 
> 赞同：3
> 
> 时间：2012-07-27T13:22:11.800
> 
> 标签：html, css, background-image, image

有人可以帮忙吗？

我有一张图片显示在我的页面上。图像有一些圆角，我用一些 CSS 技巧实现了这些圆角。但现在的问题是自动缩放图像。

用 a 缩放图像`<img>`没有问题，但是在圆角代码中使用它就成了一个问题，因为这是通过 background-image 实现的。

有谁知道我可以如何结合2？

这是我在 CSS 中实现圆角的方法：

```
.informationBarLeft {
width: 24%;
height: 160px;
border: 1px solid #000000;
float: left;
margin-right: 1%;
background-image: url('../Images/pumpkin-soup.jpg'); /*The image to use */
background-repeat: no-repeat;
-moz-border-radius: 15px;
-webkit-border-radius: 15px;
border-radius: 15px; 
```

}

然后 HTML 很简单：

```
<div class="informationBarLeft">&nbsp;</div> 
```

如您所见，我不在`<img>`任何地方使用该元素，所以我想知道这可以在 CSS 中完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:27:43.833

使用`background-size: cover;`：

```
.informationBarLeft {
  width: 24%;
  height: 160px;
  border: 1px solid #000000;
  float: left;
  margin-right: 1%;
  background-image: url('../Images/pumpkin-soup.jpg'); /*The image to use*/
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
  background-repeat: no-repeat;
  -moz-border-radius: 15px;
  -webkit-border-radius: 15px;
  border-radius: 15px;
} 
```

[工作演示](http://jsfiddle.net/surendraVsingh/ZbTVh/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T13:28:50.890

使用可以使用css3[**背景大小属性**](https://developer.mozilla.org/en/CSS/background-size)来缩放`background-size: 100% 100%;`

```
-moz-background-size: 100% 100%;           
-o-background-size: 100% 100%;           
-webkit-background-size: 100% 100%;      
background-size: 100% 100%; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T13:32:07.737

使用 . 缩放图像时我没有发现任何问题`background-image: url("#")`。在这里查看：http: [//jsfiddle.net/sE3RG/](http://jsfiddle.net/sE3RG/)

我认为您只需要删除评论`/* The image to use`或至少用结尾 */ 标签关闭它

[OR] 你可以使用`background-size: cover;`代码，但我没有看到它工作过很多次。虽然适用于 JSFiddle 代码:)

# javascript - 图像上映射区域的引导弹出框/工具提示

> ID：11688613
> 
> 赞同：2
> 
> 时间：2012-07-27T13:22:16.913
> 
> 标签：javascript, jquery, css, html, twitter-bootstrap

我正在尝试将来自 Twitter 的 Bootstrap 包和我绘制的图像结合起来，以便部分将 - 当翻转时 - 在映射区域旁边产生一个弹出框/工具提示。这是我到目前为止所做的：

1.  我使用 CSS 而不是旧的 Image Map 方式进行映射。代码如下。
2.  图像及其上的区域在翻转时可见并突出显示。

现在我已经能够使弹出框出现，但它始终固定在图像的左上角（即使重新定位原始图像）。

HTML：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Image Map</title>

<link href="bootstrap/css/bootstrap.css" rel="stylesheet">
<link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
<link href="style.css" rel="stylesheet">

<link href="demo.css" rel="stylesheet">
<link href="style_common.css" rel="stylesheet">
<link href="style5.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div id="wrapper">
            <a href="#" id="jon" rel="popover" data-original-title="Milage Rate"
                data-content="Content..."><div id="milagerate"></div></a> <a
                href="#"><div id="fairmarketvalue"></div></a> <a href="#"><div
                    id="netassessment"></div></a> <a href="#"><div id="adjustedfmv"></div></a>
            <a href="#"><div id="exemptions"></div></a> <a href="#"><div
                    id="taxablevalue"></div></a>
        </div>
    </div>

    <script src="jquery-1.7.2.js"></script>
    <script src="bootstrap/js/bootstrap-tooltip.js"></script>
    <script src="bootstrap/js/bootstrap-popover.js"></script>
    <script type="text/javascript">
        $(function() {
            $('#jon').popover({
                placement : 'bottom'
            });
        });
    </script>
</body>
</html> 
```

CSS：

```
@CHARSET "ISO-8859-1";

a {
    color:white;
}

#wrapper{
    background:white url(PB.jpg) no-repeat 0 0;
    position:relative;
    z-index:0;
    width:530px;
    height:570px;
}

#milagerate {
    position:absolute;
    width:27px;
    height:17px;
    top:346px;
    left:347px;
}

#fairmarketvalue {
    position:absolute;
    width:56px;
    height:15px;
    top:319px;
    left:177px;
}

#netassessment {
    position:absolute;
    width:50px;
    height:17px;
    top:346px;
    left:194;
}

#adjustedfmv {
    position:absolute;
    width:51px;
    height:17px;
    top:346px;
    left:141px;
}

#exemptions {
    position:absolute;
    width:51px;
    height:17px;
    top:346px;
    left:245px;
}

#taxablevalue {
    position:absolute;
    width:51px;
    height:17px;
    top:346px;
    left:295px;
}

#milagerate:hover, #fairmarketvalue:hover, #netassessment:hover, #adjustedfmv:hover, #exemptions:hover, #taxablevalue:hover {
    border:1px solid red;
} 
```

如何强制弹出框出现在映射区域旁边？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:18:49.010

好的，我得到了一些帮助，我已经解决了我最初遇到的问题。我的问题是弹出框代码与我的锚（图片）而不是内容相关联。话虽如此，我不得不为每个内容使用单独的 ID：

```
<script type="text/javascript">
    $(function() {
        $('#jon').popover({
            placement : 'right'
        });

        $('#jon2').popover({
            placement : 'right'
        });

        $('#jon3').popover({
            placement : 'right'
        });

        $('#jon4').popover({
            placement : 'right'
        });

        $('#jon5').popover({
            placement : 'right'
        });

        $('#jon6').popover({
            placement : 'right'
        });
    });
</script> 
```

在 CSS 中，我遵循了这个模式：

```
...
#thing1, #jon3 {
    position:absolute;
    width:50px;
    height:17px;
    top:346px;
    left:194px;
}

#thing2, #jon4 {
    position:absolute;
    width:51px;
    height:17px;
    top:346px;
    left:141px;
}
... 
```

我确信有一种更优雅的方法可以解决这个问题，但目前这段代码对我来说非常有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:50:02.850

使用“展示位置”属性

请参阅此处的提示文档：http: [//twitter.github.com/bootstrap/javascript.html#tooltips](http://twitter.github.com/bootstrap/javascript.html#tooltips)

# javascript - 选择弧/元素

> ID：11688615
> 
> 赞同：1
> 
> 时间：2012-07-27T13:22:17.150
> 
> 标签：javascript, svg, d3.js, sunburst-diagram

在[sunburst](http://mbostock.github.com/d3/ex/sunburst.html)中，如何在生成所有弧之后让代码选择根弧？

例如，在代码中：

```
var first_arc = ""
.json("../data/flare.json", function(json) {
   var path = vis.data([json]).selectAll("path")
       .data(partition.nodes)
     .enter().append("path")
       .attr("display", function(d) { return d.depth ? null : "none"; })
       .attr("d", arc)
       .attr("t_name", function(d) {return d.name})
       .style("fill-rule", "evenodd")
       .on("click", function(d)... 
```

单击中间弧时，它将作为“d”传递给“函数”。

（它的数据首先在 json 文件中）

**更新 1**：像这样更改代码……</p>

```
.style("fill-rule", function(d) {
   if (first_arc == "") first_arc = d; return "evenodd"}) 
```

…解决了问题，它返回`object`：

```
name: "flare"
children: Array[10]
... 
```

但这个解决方案看起来不正确，也不通用。

**更新 2**：我尝试了几个选择，例如：

```
first_arc = d3.select("[name='flare']") 
```

它通常返回`array`：

```
0: null
length: 1
parentNode: HTMLHtmlElement
__proto__: Array[0] 
```

或“未定义”

**更新 3**：

```
first_arc = d3.select("[t_name='flare']") 
```

`array`带孩子的 1 号退货：

```
0: SVGPathElement
   __data__: Object 
```

，`__data__`我要的对象在哪里，但我无法选择它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:03:27.583

The root node is the one with a "depth" attribute set to 0\. So you can say:

```
d3.selectAll("path").filter(function(d) { return d.depth === 0; }) 
```

Your attempts above weren't working because [D3 uses CSS3 to select elements](https://github.com/mbostock/d3/wiki/Selections). So you can only use d3.select and d3.selectAll with [CSS3](http://www.w3.org/TR/css3-selectors/) selectors i.e. you can't access the data bound to each element this way. The way to filter on the bound data is to use [selection.filter](https://github.com/mbostock/d3/wiki/Selections#wiki-filter).

[D3 selections](https://github.com/mbostock/d3/wiki/Selections) are literally an array of elements, see the "Operating on Selections" section.

Lastly, you can get the bound `__data__` property for an element using [selection.datum()](https://github.com/mbostock/d3/wiki/Selections#wiki-datum).

# freebase - Freebase 查询返回 rdf:resource uri

> ID：11688620
> 
> 赞同：1
> 
> 时间：2012-07-27T13:22:26.603
> 
> 标签：freebase

我正在尝试获取免费基础资源 uri 而不是一个人出生地的文字。

我的get看起来像这样......

```
 https://www.googleapis.com/freebase/v1/mqlread?query={%22/people/person/place_of_birth%22:null,%22id%22:%22/en/bob_dylan%22} 
```

返回此结果...

```
{
"result": {
"/people/person/place_of_birth": "Duluth", 
"id": "/en/bob_dylan"
}
} 
```

是否可以更改获取参数以返回 rdf:resource uri？

```
<fb:people.person.place_of_birth rdf:resource="http://rdf.freebase.com/ns/en.tilden"/> 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:40:20.937

将您的查询更改为

```
{
  "id": "/en/bob_dylan",
  "/people/person/place_of_birth": {
    "id": null
  }
}​ 
```

将意味着你回来`/en/duluth`而不是名字“德卢斯”。使用托管在 googleapis.com 上的新 Freebase API，您可能会得到`/m/0h1k6`而不是`/en/duluth`; 但是这些是等价的。

从那里开始，移动到 RDF 资源 URI 应该很容易。但是，请注意，Freebase 团队已经弃用了 RDF URI，并且还没有正式承诺生产类似的替代品，因此在依赖此服务之前要小心。

# asp.net-mvc - Orchard：主题放置不覆盖模块放置

> ID：11688626
> 
> 赞同：2
> 
> 时间：2012-07-27T13:22:45.243
> 
> 标签：asp.net-mvc, orchardcms, placement

我正在运行 Orchard 1.4.2。

我有一个基于未修改的“The Theme Machine”安装并设置为当前的自定义主题。

我的自定义主题定义了以下placement.info 文件

```
<Placement>
    <Place Parts_Autoroute="-"/>
    <Place Parts_Autoroute_Edit="-"/>
    <Place Parts_Autoroute_SummaryAdmin="-"/>
    <Place Parts_Autoroute_Summary="-"/>
</Placement> 
```

我期望在使用它时从所有项目中删除自动布线部分是否正确？当我在仪表板中查看内容时，固定链接和“设置为主页”复选框仍然可见。如果我在模块本身中更改放置文件，它工作正常。

有什么我可能在这里遗漏的吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:16:48.023

您的主题不是管理员主题，因此当您在管理员中时，该文件是无关紧要的。

如果您想删除自动布线部分，为什么不这样做并将其从您的类型中删除？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T17:25:30.437

我最终在我的 CSS 中为非管理员做的是：

```
fieldset[shape-id='3']{display:none;} 
```

因为我的 id 是 3，这对我有用。拥有自动路由选项会很好，但是当“允许自定义模式”选项关闭时，甚至不会显示永久链接框。

# jsf-2 - 值更改监听器开启 有效，但抛出异常。为什么？

> ID：11688628
> 
> 赞同：1
> 
> 时间：2012-07-27T13:22:47.413
> 
> 标签：jsf-2, primefaces, selectonemenu, valuechangelistener

我正在使用 Primefaces 3.3.1 并且有一个`<p:selectOneMenu>`我正在选择新值的地方。选择新值时，正在调用ValueChangeListener方法，其中正在处理该值。像这样：

```
<h:form>
    <p:selectOneMenu id="signature-menu" value="#{objectBuffertBean.loggedInSignature}" effect="fold" style="width: 125px;">
        <p:ajax event="change" update="signature-menu" 
                listener="#{loginBean.changeSignature()}" />
        <f:selectItems value="#{signaturesBean.signatures}" />
    </p:selectOneMenu>
</h:form> 
```

登录Bean.java：

```
public void changeSignature(ValueChangeEvent e) {
    if (e.getNewValue() != null) {
        try {
            WebDB db = new WebDB();

            SessionHandler.getInstance().
                    getCurrentObjectBuffert().setSignature(
                    db.getSignatureBySignatureFromWebDb(
                                           (String) e.getNewValue()
                    ));
        } catch (DatabaseException e1) {
            e1.printStackTrace();
        }
    }
} 
```

但是，奇怪的是，当我选择一个新值时，我得到了这个异常：

```
javax.el.MethodNotFoundException: Method changeSignature not found 
```

它有效！该方法以某种方式被调用并且正在处理新值！有没有人有过同样奇怪的并发症？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T13:31:52.457

您将/`valueChangeListener`的属性`UIInput`与/的`listener`属性混淆了。该参数仅在属性后面的方法上受支持。/属性后面的方法必须带参数（或什么都不带）。`<p:ajax>``<f:ajax>``ValueChangeEvent``valueChangeListener``listener``<p:ajax>``<f:ajax>``AjaxBehaviorEvent`

所以

```
 public void changeSignature(AjaxBehaviorEvent e) {
     if (loggedInSignature != null) {
         // ...
     }
 } 
```

或者

```
 public void changeSignature() {
     if (loggedInSignature != null) {
         // ...
     }
 } 
```

请注意，提交的值已经设置在`UIInput`组件属性后面的`value`属性上，因此无需通过事件以某种方式获取它。这是因为它在调用操作阶段而不是像`valueChangeListener`. 此外，从`valueChangeListener`技术上讲，**仅**当您打算在方法中*同时*拥有旧值和新值时才应该使用。

* * *

**与具体问题**无关**`event="change"`，属性`<p:ajax>`已经是默认了。你可以省略它。此外，属性中的那些方法括号`listener`最好省略，因为它不会增加任何值。只需使用`listener="#{loginBean.changeSignature}"`.**

# ios - 手动触发单元格选择 TableView

> ID：11688637
> 
> 赞同：6
> 
> 时间：2012-07-27T13:23:15.073
> 
> 标签：ios, uitableview, ios5

我需要手动以编程方式触发我的 tableView 上的单元格选择。本质上运行预制功能

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

我这样做是为了当从 tableView 中删除一个项目时，它会自动加载下一个项目。但是，当我尝试手动调用此函数时，似乎找不到它。我试过了

```
self.tableView: didSelectRowAtIndexPath 
```

和

```
[tableView didSelectRowAtIndexPath] 
```

但两者都不被认可。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T13:25:11.010

```
[self tableView:self.tableView didSelectRowAtIndexPath:selectedIndexPath]; 
```

将 selectedIndexPath 替换为下一行

确保 self 是您的表视图委托

编辑：我知道这是一个老问题，但实际上应该这样做 `[tableView selectRowAtIndexPath:path animated:YES scrollPosition:UITableViewScrollPositionMiddle];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:25:31.173

你应该试试：

```
[self tableView:self.tableView didSelectRowAtIndexPath:YourIndexPath] 
```

# jquery - XML 通过元素属性获取数据

> ID：11688638
> 
> 赞同：0
> 
> 时间：2012-07-27T13:23:15.230
> 
> 标签：jquery, html, xml, parsing

嗨，我对 xml 解析有一些问题。所以 - 我想按数据从一些 xml 标签中读取数据。你能帮助我吗？这是我的代码。

```
 <data>
        <element name="name">Zook</element>
        <element name="image">img/icons/01/zook.png</element>
    </data> 
```

和jQuery

```
$(this).find("element").each(function(){
    var name = $(this).attr("name");
    $("#div").html('<span>' + name + '</span>')
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:28:13.853

只需通过此 [链接](http://www.switchonthecode.com/tutorials/xml-parsing-with-jquery)即可 解释您需要的一切:)

```
$(xml).find("element").each(function()
 {
   $("#output").append($(this).attr("name") + "<br />");
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:33:55.540

此示例代码将为您提取数据：

```
$.ajax({
   type: "GET",
   url: "path/to/your/xml.xml",
   dataType: "xml",
   success: function(xml){
   $(xml).find("element").each(function() {
          var name = $(this).find("name").text();
          var image = $(this).find("image").text();
          $("#div").html('<span>' + name + '</span>');
   });
}); 
```

不过，您将需要重组您的 xml，因为目前元素具有双重含义。简化此操作，使您的数据如下所示：

```
<data>
  <element>
    <image>path/to/img.ext</image>
    <name>Name</name>
  </element>
</data> 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:31:16.097

```
var name = $(this).text(); 
```

应该让你的生活更轻松

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T13:45:02.353

```
$(xml).find("main_menu").each(function () {
    $(this).find("element").each(function(){
        var name = $(this).text();
        var image = $(this).text();

        $("#carousel_items").append('<span>' + name + '</span><span>' + image + '</span>')
    });
}); 
```

这就是我的代码现在的样子

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T14:13:44.130

```
$(xml).find("main_menu").each(function () {
    var name, image;

    $(this).find("element").each(function() {
        // make sure they default to what they originally were if null
        // since one <element> has name other has image
        name = ($(this).attr('name')) ? $(this).text() : name;
        image = ($(this).attr('image')) ? $(this).text() : image;
    });

    // Build the items once you've looped through the elements within a <data> section
    $("#carousel_items").append('<span>' + name + '</span><span>' + image + '</span>')
}); 
```

# java - NetBeans中的java异常verifyError

> ID：11688644
> 
> 赞同：0
> 
> 时间：2012-07-27T13:23:50.610
> 
> 标签：java, exception, netbeans, verifyerror

这个[问题](https://stackoverflow.com/questions/3019394/java-lang-verifyerror-on-method-that-worked-a-minute-ago)类似，但没有用。我复制并粘贴了我的项目文件夹（因为我只需要为不同的客户端提供不同的背景图像），然后使用 NetBeans 打开复制的项目并运行它。启动时出现此错误：

```
Exception in thread "main" java.lang.VerifyError: Constructor must call super() or this() before return in method com.einge.scadaremotecontrol.ProgramacionAuto.<init>(Lorg/joda/time/DateTime;I)V at offset 0 
```

原始项目运行良好（我关闭一个运行另一个，以免混淆或在 VM 中运行两个相同的程序）。可能是什么问题呢？NetBeans 是 7.1.2 JDK 是 7u5 在此先感谢

编辑：我刚刚在另一台计算机上尝试过，它工作正常（它认为是 NB 7.1，JDK 7u3）仍然不知道那里发生了什么。如果有任何解决方案，他们将受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:47:37.833

首先重建项目。很可能它会照顾它。

如果没有，请重建它，退出 netbeans。然后几秒钟后重新打开。这就是我在 JavaFX 意外构建错误中所做的。

# regex - Rails 正则表达式日期验证

> ID：11688645
> 
> 赞同：0
> 
> 时间：2012-07-27T13:23:56.617
> 
> 标签：regex, ruby-on-rails-3

对不起，我在这里束手无策。

我有这个

```
 validates :departing_at, :format => {
    # 2012-07-14 10:00 am
    :with => /^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}) ([ap]m)$/,
    :message => "must be date and time"
  } 
```

但它只是不会验证 2012-07-14 10:00 am 或与该正则表达式匹配的任何其他日期格式。

但是如果我把它放在控制器里面

```
pattern = /^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}) ([ap]m)$/

if params[:vacation][:departing_at] =~ pattern
  raise "works"
else
  raise params[:vacation][:departing_at].to_yaml
  raise "doesn't work"
end 
```

它打印出“作品”，伙计们有什么想法吗？:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:56:00.020

试试这个矫枉过正的正则表达式：

```
:with => /^(\d{4})\-(\d{2})\-(\d{2})\s(\d{2})\:(\d{2})\s([aApP][mM])$/, 
```

# python - python从堆中创建一切？

> ID：11688647
> 
> 赞同：13
> 
> 时间：2012-07-27T13:23:57.117
> 
> 标签：python, variables

在 c/c++ 中，当您在函数内创建局部变量时，堆栈中有变量。

[http://effbot.org/zone/call-by-object.htm](http://effbot.org/zone/call-by-object.htm)

> CLU 对象独立于过程激活而存在。对象的空间是从动态存储区分配的 /.../ 理论上，所有的对象都会永远存在下去。实际上，当任何 CLU 程序不再可访问对象时，可以回收对象使用的空间。

这是否意味着 python 中的对象是从堆中创建的（就像 c/c++ 中的 malloc 一样）？并且对象在没有与之关联的名称时被释放？（如智能指针）？

例子：

```
def foo(a): 
  result = []
  result.append(a)
  return result

foo("hello")

myList = foo("bye") 
```

那么第一个 result([]) 是在堆中创建的并且因为没有与之关联的名称而被释放？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-27T13:25:48.880

是的，所有 Python 对象都存在于堆上（至少在 CPython 上）。它们是引用计数的：当对对象的最后一个引用消失时，它们被解除分配。（CPython 还有一个垃圾收集器来打破循环。）

在 CPython 中，一旦函数返回，您的第一个列表就会消失，因为您没有将返回值绑定到名称并且引用计数降至零。在其他实现中，对象可能会存活更长时间，直到垃圾收集器启动。

一些对象（如打开的文件）具有附加的资源，这些资源在对象被释放时会自动释放，但由于上述原因，不建议依赖它。当你用完资源时，应该明确地关闭它们。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-27T13:26:12.950

是的，CPython 中的所有值都分配在堆上并通过引用计数来知道何时释放它们。与 C 不同的是，在大多数情况下，无法知道一个值是否会比它的函数寿命更长，因此唯一安全的做法是对所有内容进行堆分配。

当然，您可以进行一些分析并确定某些值永远不会传递给函数，因此无法转义，但这在 Python 中的用途有限，而且额外的开销可能不值得。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-27T13:31:01.870

作为其他答案的补充，这是一种使用特殊方法跟踪垃圾收集何时发生的方法[`__del__`](http://docs.python.org/reference/datamodel.html#object.__del__)：

```
class Test(object):
    def __init__(self, name):
        self.name = name

    def __del__(self):
        print "deleting {0}".format(self.name)

print "discarded instance creation"
Test("hello")

print "saved instance creation"
myList = Test("bye")

print "program done" 
```

输出：

```
丢弃的实例创建
删除你好
保存的实例创建
程序完成
删除再见

```

有关更深入的数据，请参阅[gc 模块](http://docs.python.org/library/gc.html)。

# c# - 'Microsoft.VisualStudio.Tools.Office.Runtime.Security.UserInclusionList' 的类型初始化程序引发异常

> ID：11688653
> 
> 赞同：3
> 
> 时间：2012-07-27T13:24:09.097
> 
> 标签：c#, visual-studio, exception, vsto

在 VSTO（Visual Studio 到 Office）项目中，我收到以下异常：

> 错误：
> “Microsoft.VisualStudio.Tools.Office.Runtime.Security.UserInclusionList”的类型初始化程序引发异常

这是什么意思，我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T20:25:05.257

您必须启用包含列表才能信任 Office 应用程序自定义。[按照此处](http://msdn.microsoft.com/en-us/library/bb772070.aspx)启用包含列表。

# mongodb - mongodb查询的最大长度是多少？

> ID：11688658
> 
> 赞同：11
> 
> 时间：2012-07-27T13:24:28.677
> 
> 标签：mongodb

我将执行一个大查询，所以我想知道 mongodb 查询的最大长度是多少？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-27T14:40:35.177

创建查询时正在构建的文档的最大大小为 16MB。您可以在此处看到这一点以及其他限制：

[http://docs.mongodb.org/manual/reference/limits/](http://docs.mongodb.org/manual/reference/limits/)

# c# - 在线创建 PDF

> ID：11688659
> 
> 赞同：1
> 
> 时间：2012-07-27T13:24:32.717
> 
> 标签：c#, asp.net, sharepoint, pdf, rdlc

我们正在使用报告定义语言 (RDL) 模板在我们的一个 Sharepoint 应用程序中定义各种报告。这些报告（然后）以 PDF 格式保存到各种 SharePoint 文档库中。一份报告特别呈现，但由于报告的样式需求而被认为是“失败的”。所以看起来 RDL 只理解“非常简单”的 HTML。

**例如：**

1.  商标字符不呈现为上标（它们呈现为普通文本）
2.  分配线高的能力失败
3.  分配字间距的能力失败（因此打印机“领先”要求失败）

这两点都指向微软对 RDL 的各种标记的限制，以对各种 HTML 进行互印……我们现在知道了。

**所以...**

我需要一个更好的工具……而我们在这个工具上摸不着头脑！

**问题：**
哪些工具可以接收 HTML、理解 CSS（嗯！）并且可以从 C-Sharp 对象生成 PDF？

请记住，我需要您推荐的 PDF 生成器工具（如下）来理解 CSS 和 HTML。

**注意：** 我查看了其他各种 StackEchange 站点，看看是否有更好的论坛来解决这个特定问题，但这个论坛似乎是唯一一个符合要求的论坛。如果您是调解员，并且觉得这个问题放错了地方，请随时移动这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:48:49.837

这个[HTML 到 PDF 转换器](http://www.hiqpdf.com)对复杂的 html/css 页面进行了最准确的转换。还有一个演示可以尝试使用您的 html 进行转换

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:07:25.877

也许你可以试试[Amyuni WebkitPDF](http://www.amyuni.com/en/developer/webkitpdf/)。它是一个**免费**的组件，用于将 HTML+CSS 转换为 PDF 文件。从主页：

*   无需使用网络浏览器或打印机驱动程序即可将 HTML 文件直接转换为 PDF
*   将 HTML 文件转换为 XAML/XPS 以在 Silverlight 中呈现
*   在您的应用程序中集成和部署 HTML 转换功能
*   生成单个连续 PDF 页面或将 HTML 拆分为多个 PDF 页面

Amyuni WebkitPDF 作为带有示例应用程序的库以及用于 C++ 和 C# 的示例代码分发。

*免责声明：我目前在 Amyuni Technologies 担任软件开发人员。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:44:42.383

看看 Aspose.Pdf for .NET：[http ://www.aspose.com/categories/.net-components/aspose.pdf-for-.net/default.aspx](http://www.aspose.com/categories/.net-components/aspose.pdf-for-.net/default.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T13:49:10.897

我只知道“领先空间”问题的解决方法。此示例以 10 个空格“引导”该值：

```
=space(10) & Fields!FieldName.Value 
```

这应该适用于任何渲染器，如果我遇到其他技巧，我会更新它。

# svn - SVN 将本地主干合并到分支中

> ID：11688660
> 
> 赞同：7
> 
> 时间：2012-07-27T13:24:33.123
> 
> 标签：svn, version-control, merge, branch

*免责声明：我对 SVN 比较陌生。我的大部分经验都是与 GIT 相关的。*

我们有一个生产站点，其中包含 SVN 主干上的所有代码。我有一个已签出的副本，我一直在对其进行一些更改。我们决定为我正在构建的功能创建一个分支。我继续检查了分支。现在我有一个主干的本地副本，其中包含我需要合并到分支的本地副本中的更改。一旦我这样做了，我将丢弃本地主干副本，因为我不希望我的更改被推送到生产主干。

**我将如何将本地 SVN 文件夹中的代码合并到另一个本地 SVN 文件夹中？**

PS 我在 Ubuntu 12.04 上开发。我安装了 SVN Workbench（但我并没有真正使用它）并通过命令行完成我的大部分 svn 工作。如果有一个 linux GUI 可以帮助解决这个问题，我也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:12:18.233

1.  使用对分支的更改来切换工作副本
2.  犯罪

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:03:37.597

由于您对 Git 的体验比 SVN 的体验更丰富，并且您以 DVCS 风格思考，您可以使用[SmartGit](http://www.syntevo.com/smartgit/index.html)作为 SVN 客户端。它像 git-svn 一样工作，但诚实地翻译完整的分支和挑选合并、忽略、EOL 处理属性、外部和标签（git-svn 没有）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T14:09:20.853

在主干中创建更改的差异，然后将其应用于您的分支。

```
cd trunk
svn diff > ../the-branch/yourchanges.diff
svn revert -R .
cd ../the-branch
svn patch yourchanges.diff 
```

如果补丁不喜欢你在不同的分支，你可以使用 unix patch 命令

```
patch -p0 < yourchanges.diff 
```

这会让你大部分时间都在那里，但不会删除文件（它会截断它们）并且不会保留 svn 属性更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T13:31:08.173

好吧，因为 SVN 不是 DCVS，如果没有： - 丢失您的历史记录， - 或提交到中央存储库，您将无法做到这一点。

我假设您知道如何与中央存储库执行合并。

如果您不介意丢失历史记录，您应该创建一个本地 svn 存储库并在其中导入您本地版本的主干。签出此 repo 并将您的本地分支文件复制到其中。执行合并并将结果重新提交到远程存储库。

但同样，如果您的日常工作流程意味着要有一个本地暂存区，您可以切换到 Git 或 Mercurial。

再见。

# grails - 如何将环境变量输出到 Grails log4j 日志文件

> ID：11688661
> 
> 赞同：1
> 
> 时间：2012-07-27T13:24:35.760
> 
> 标签：grails, log4j

我有以下文件附加程序，并且我希望在记录消息时将特定环境输出到日志文件：

```
appenders {
        rollingFile name:'mtagradepush_file', 
                    maxFileSize: 2048, 
                    file: "${globalDirs.logDirectory}${appName}.log".toString(), 
                    layout:pattern(conversionPattern: "[Env:${app.log.env}] %d{yyyy-MM-dd HH:mm:ss} %5p %c{1}:%L - %m%n")
} 
```

当我在普通 Java 应用程序的 log4j.properties 文件中使用它时，这种转换模式很有效，但现在当与 Grails 一起使用时，它不会将环境的值打印到日志文件中。

app.log.env 变量在 Tomcat 6 服务器启动时在 CATALINA_OPTS 中设置，如下所示：

> 导出 CATALINA_OPTS="-Xms128m -Xmx2000m -XX:MaxPermSize=512m -Dapp.log.env=DEVL..."

如果无法引用此变量，那么有没有办法获取 Grails 环境变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:30:55.317

将`${}`视为 Groovy 代码块并执行`${System.getProperty('app.log.env')}`

# c - fgetc 在一个流中读取多少位？

> ID：11688664
> 
> 赞同：0
> 
> 时间：2012-07-27T13:24:52.827
> 
> 标签：c

函数 fgetc 在流中读取多少位？

fgetc 的手册页告诉这个函数读取一个“字符”，但一个字符对我来说不是一个明确的定义。多少位包含一个“字符”？使用 fgetc 读取字符是否等同于读取字节？

它是否取决于机器的架构以及“char”或“byte”的大小？

我的目标是读取具有可移植性的流中的二进制数据（字节 = 8 位或字节 = 16 位）。将 fread/fwrite 与 uintN_t 之类的类型一起使用而不是 fgetc 来控制在流中读取多少位是一个更好的主意吗？有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:26:40.323

> 多少位包含一个“字符”？

一个字符包含精确`CHAR_BIT`的位，一个特定于实现的值，定义在`limits.h`.

```
/* Number of bits in a `char'.  */
#  define CHAR_BIT      8 
```

> 使用 fgetc 读取一个字符相当于读取一个字节

是的，`fgetc`只读取一个字节。

这个可移植性问题不容易解决。最好的解决方法是不对二进制表示进行假设。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:51:29.393

`fgetc`正好读一个*字节*。字符类型（`signed char`、`char`和`unsigned char`限定版本）包含`CHAR_BIT`位 ( `<limits.h>`)，它是大于 的常数`8`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:28:20.207

您的平台有一个最小的数据单元，它对应于 C 数据类型`char`。所有 I/O 都以 s 为单位发生`char`。您可以保证 char 可以保存 0–127 和 0–255 或 -127–127 的值。其他一切都是特定于平台的。（a 中的实际位数`char`包含在宏中`CHAR_BIT`。）

也就是说，只要您只在每个字符中写入和读取广告范围内的值，就可以保证您的程序可以在任何符合标准的平台上运行。唯一*不能*保证的是生成的数据流将是二进制相同的。

# java - DAO 模式和模型对象

> ID：11688683
> 
> 赞同：19
> 
> 时间：2012-07-27T13:25:46.883
> 
> 标签：java, oop, design-patterns, dao

我查阅了很多关于 DAO 模式的信息，我明白了这一点。但我觉得大多数解释并没有说明全部故事，我的意思是你会在哪里实际使用你的 DAO。因此，例如，如果我有一个 User 类和一个相应的 UserDAO 可以为我保存和恢复用户，这是正确的方法：

*   控制器创建 User 对象并将其传递给 UserDAO 以将其保存到数据库中

*   控制器创建用户对象并在其构造函数中用户对象调用 userDAO 以便将自身保存到数据库中

*   这是一种代码异味，您缺少一个额外的类“UserManager”，控制器将要求该类创建用户。UserManager 负责创建用户并要求 UserDAO 保存

我真的觉得第三种选择是最好的，因为控制器所负责的只是将请求委托给正确的模型对象。你最喜欢的方式是什么？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-27T13:30:14.497

根据我对 DAO 的经验，第一种方法是唯一正确的方法。原因是它的职责最明确，产生的混乱最少（嗯，一些非常受人尊敬的程序员认为 DAO 本身就是混乱的。Adam Bien 认为原始 DAO 模式已经在未来的`EntityManager`DAO 中实现，并且更多的 DAO 大多是不必要的“管道”）

**方法 2**将模型绑定到 DAO，创建“上游依赖项”。我的意思是，通常模型作为单独的包分发，并且（并且应该）不知道它们持久性的细节。与您描述的类似模式是[Active Record 模式](http://en.wikipedia.org/wiki/Active_record_pattern)。它在 Ruby on Rails 中被广泛使用，但在 Java 中并没有以同样优雅和简单的方式实现。

**方法3** - 应该是什么`UserManager`？在您的示例中，管理器执行 2 个任务 - 它具有用户工厂的职责，并且是持久性请求的代理。如果它是一个工厂并且你需要它，你应该命名它`UserFactory`而不对其施加额外的任务。至于代理 - 为什么需要它？

恕我直言，大多数命名的课程`...Manager`都有气味。该名称本身表明该类没有明确的目的。每当我有为一个类命名的冲动时`...Manager`，这都是我找到一个更合适的名称或认真思考我的架构的信号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-31T13:06:46.257

对于第一种方法；恕我直言，在 DAO 对象上调用方法的控制器不是一个好的设计。控制器必须询问有关业务的“服务”级别对象。这些“服务”如何保存数据不是控制器关心的问题。

对于第二种方法；有时您可能只想创建对象，因此构造函数和持久化任务不能像这样紧密耦合。

最后，管理器或服务对象是分层架构的一个很好的抽象。这样，您可以将业务流分组到适当的类和方法中。

但是对于 Play，案例类的伴生对象也是用作 DAO 的良好候选对象。这些对象的单例性质使其成为一个很好的候选对象。

```
case class TicketResponse(appId: String, ticket: String, ts: String)

object TicketResponse{
  implicit val ticketWrites = Json.writes[TicketResponse]

  def save(response: TicketResponse) = {

    val result = DB.withConnection {
      implicit connection =>

        SQL("insert into tickets(ticket, appid, ts)"
          +   " values ({ticket},{appid},{ts})")
          .on('ticket -> response.ticket, 'appid -> response.appId, 'ts -> response.ts).executeInsert()
    }

  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:34:38.160

数据访问对象 (DAO) 应该更靠近应用程序的数据访问层使用。数据访问对象实际上执行数据访问活动。所以它是数据访问层的一部分。

DAO 之前的架构层可能因项目而异。

控制器基本上用于控制请求流。所以它们有点接近 UI。虽然 Manager 和 Handler 是个坏主意，但我们仍然可以在控制器和 DAO 之间添加一层。因此控制器将预处理来自请求或发出的数据（数据完整性、安全性、本地化、i18n、转换为 JSON 等）。它以域对象（在本例中为用户）的形式向服务发送数据。该服务将调用该用户的某些业务逻辑或将其用于某些业务逻辑。然后它将它传递给 DAO。

如果您支持多个客户端，如 JSP、WebServices、手持设备等，那么在控制器层中拥有业务逻辑并不好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T14:46:39.037

假设 Controller 表示[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)中的“C” ，那么您的第三个选项是正确的方法。一般来说，控制器代码扩展或遵循框架的约定。MVC 的理想之一是交换框架，这实际上是 Controller，应该相对容易。控制器应该只是在模型层和视图层之间来回移动数据。

从模型的角度来看，控制器应该与位于[域模型](http://martinfowler.com/eaaCatalog/domainModel.html)前面的[服务层](http://martinfowler.com/eaaCatalog/serviceLayer.html)（[上下文边界](https://stackoverflow.com/questions/2603748/service-layer-pattern-could-we-avoid-the-service-layer-on-a-specific-case)）进行交互。该对象将是您认为属于您的服务层的一部分的示例——即域模型的公共 API。`UserManager`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-27T13:29:53.977

对于典型的 webapp，我更喜欢带有 play 的 JPA 和数据库实现的**play**框架。它更有成效的方式。

请看这里[http://www.playframework.org/documentation/1.2.5/jpa](http://www.playframework.org/documentation/1.2.5/jpa) 和这里 [http://www.playframework.org/documentation/1.2.5/guide1](http://www.playframework.org/documentation/1.2.5/guide1)和 [http://www.playframework。 org/documentation/1.2.5/guide2](http://www.playframework.org/documentation/1.2.5/guide2)

就是这样））

# alfresco - 使用 alfresco java script api 或通过 web 脚本启动工作流程

> ID：11688688
> 
> 赞同：2
> 
> 时间：2012-07-27T13:25:50.700
> 
> 标签：alfresco

我想以编程方式启动工作流程。于是写了一个网页脚本。

执行脚本：

```
function startWorkflow()
{
   var workflow = actions.create("start-workflow");
   workflow.parameters.workflowName = "activiti$alfGroupReview";
   workflow.parameters["bpm:workflowDescription"] = "Please review ";
   workflow.parameters["bpm:groupAssignee"] = people.getGroup( "GROUP_site_collaborators");;
   var futureDate = new Date();
   futureDate.setDate(futureDate.getDate() + 7);
   workflow.parameters["bpm:workflowDueDate"] = futureDate; 
   workflow.execute(document);
   return ;
} 
```

对于上述脚本，我收到错误“未定义文档”。我指的是[https://forums.alfresco.com/en/viewtopic.php?f=34&t=42677](https://forums.alfresco.com/en/viewtopic.php?f=34&t=42677)和[http://livinginjava.blogspot.in/2008/10/starting-alfresco-workflow-using.html](http://livinginjava.blogspot.in/2008/10/starting-alfresco-workflow-using.html)链接。

所以我将我的脚本更新为：

```
function startWorkflow()
{
var nodeRef = "workspace://SpacesStore/25285e6c-2995-49fe-aa50-1270cefc806a";
var docNode = search.findNode(nodeRef);
   var workflow = actions.create("start-workflow");
   workflow.parameters.workflowName = "activiti$alfGroupReview";
   workflow.parameters["bpm:workflowDescription"] = "Please review ";
   workflow.parameters["bpm:groupAssignee"] = people.getGroup( "GROUP_aloha_collaborators");;
   var futureDate = new Date();
   futureDate.setDate(futureDate.getDate() + 7);
   workflow.parameters["bpm:workflowDueDate"] = futureDate; 
   workflow.execute(docNode);
   return ;
} 
```

这里， nodeRef : 是来自文档库的文档的参考。

现在新的错误是：

```
500 Description:    An error inside the HTTP server which prevented it from fulfilling the request.

Message:    06270056 Wrapped Exception (with status template): 06270273 Failed to execute script 'classpath*:alfresco/templates/webscripts/org/justransform/startWF.get.js': null

Exception:  org.alfresco.scripts.ScriptException - 06270273 Failed to execute script 'classpath*:alfresco/templates/webscripts/org/justransform/startWF.get.js': null

    org.alfresco.repo.jscript.RhinoScriptProcessor.execute(RhinoScriptProcessor.java:195) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T14:04:17.627

使用 Alfresco Workflow API。注意：wfDocs 保存 doc 节点数组：

```
// 2 days from now
var dueDate2d = new Date((new Date()).getTime() + 2*(24*60*60*1000));

// Start workflow
var wfdef = workflow.getDefinitionByName("activiti$alfGroupReview");
if (wfdef) {
    var wfparams = new Array();
    wfparams["bpm:workflowDescription"] = "Please review";
    wfparams["bpm:groupAssignee"] = people.getGroup( "GROUP_site_collaborators");
    wfparams['bpm:workflowDueDate'] = dueDate2d;
    wfparams['bpm:workflowPriority'] = 1;
    wfparams['wf:notifyMe'] = true;

    var wfpackage = workflow.createPackage();
    for each (var n in wfDocs)
        wfpackage.addNode(n);  
    var wfpath = wfdef.startWorkflow(wfpackage, wfparams);
    var tasks = wfpath.getTasks();
    for each (task in tasks)
        task.endTask(null);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-27T16:25:29.613

此代码在以下情况下运行良好：

*   docNode 不为空。您应该为此添加检查。
*   您的群组存在。可能值得为此添加检查。
*   工作流以指定的 ID 存在。使用工作流控制台确认这一点。例如，您提供的 ID 不是开箱即用的工作流程。如果是自定义的，可能您没有成功部署工作流或者您的 ID 不正确。

另外，不要使用名为“工作流”的变量。Alfresco 已经定义了一个根范围的对象，称为“工作流”。说到这一点，请随意使用[工作流 JavaScript API](https://wiki.alfresco.com/wiki/Workflow_JavaScript_API)来调用您的工作流而不是操作。不过，两者都应该工作。

[我使用JavaScript 控制台](http://addons.alfresco.com/addons/javascript-console)和“activiti$activitiParallelGroupReview”的工作流 id成功运行了您的代码（并且在将工作流变量更改为 workflowAct 之后）。

# android - 退出应用程序后保存变量？

> ID：11688689
> 
> 赞同：24
> 
> 时间：2012-07-27T13:25:52.667
> 
> 标签：android, variables, quit

我希望在关闭应用程序并在打开应用程序后加载它们时保存一些变量（用于游戏中的统计信息）

我怎样才能做到这一点？

编辑：这是我的代码：

```
TextView test1;
String punkte = "15";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    SharedPreferences save = getSharedPreferences(punkte, 0);
    save.edit().putString("score", punkte);

    SharedPreferences load = getSharedPreferences(punkte, 0);
    String points = load.getString("score", "0");

    test1 = (TextView) findViewById(R.id.test1);
    test1.setText(points);

    } 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-27T13:29:10.870

你应该使用`SharedPrefences`. 它们使用起来非常简单，并将变量存储在应用程序数据中。只要用户从未在您的应用程序设置中点击“清除数据”，他们就会一直存在。

这是一个代码示例。

要访问变量：

```
SharedPreferences mPrefs = getSharedPreferences("label", 0);
String mString = mPrefs.getString("tag", "default_value_if_variable_not_found"); 
```

要编辑变量并提交（存储）它们：

```
SharedPreferences.Editor mEditor = mPrefs.edit();
mEditor.putString("tag", value_of_variable).commit(); 
```

确保两个“标签”字段匹配！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-27T13:26:36.050

使用`SharedPreference`，这是一个更好的选择。

看[这个](http://samir-mangroliya.blogspot.in/p/android-shared-preferences.html)教程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T13:31:30.247

示例代码：保存：

```
SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(context);
SharedPreferences.Editor editor = settings.edit();
editor.putString("statepara1", ts);
editor.commit(); 
```

得到：

```
SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(context);    
String ret = settings.getString("statepara1", "0"); 
```

# c# - 使用 C# Web 应用程序嵌入 SharePoint PowerShell

> ID：11688690
> 
> 赞同：0
> 
> 时间：2012-07-27T13:25:58.530
> 
> 标签：c#, .net, sharepoint

我正在以任何 CPU 为目标在 3.5 框架中运行 C# Web 应用程序。我的机器配置：带有 64 位操作系统的 Windows 7 Visual Studio 2010 SharePoint 2010

我正在尝试从我的 Web 应用程序调用 SharePoint PowerShell 脚本。但是失败了。下面是我的代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Management.Automation;
using System.Management.Automation.Runspaces;
using System.IO;
using System.Collections.ObjectModel;
using System.Text;

namespace WebApplication3
{
    public partial class test : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

    protected void Button1_Click(object sender, EventArgs e)
    {

        try
        {
            string scriptText = ReadPowerShellScript("D:\\SiteHierarchy_project\\scriptSC.ps1");
            RunspaceConfiguration rsConfig = RunspaceConfiguration.Create();
            PSSnapInException snapInException = null;
            Runspace runspace = RunspaceFactory.CreateRunspace();
            runspace.Open();

            PSSnapInInfo info = rsConfig.AddPSSnapIn("Microsoft.SharePoint.Powershell", out snapInException);
            Pipeline pipeline = runspace.CreatePipeline();
            string scriptSnapIn = "Get-PsSnapin -Registered";
            pipeline.Commands.AddScript(scriptSnapIn);

            Runspace RunSpace = RunspaceFactory.CreateRunspace(rsConfig);
            RunSpace.Open();
            Pipeline pipeLine = RunSpace.CreatePipeline();
            Command scriptCommand = new Command(scriptText);
            pipeLine.Commands.AddScript(scriptText);

            // execute the script        
            //  Collection<PSObject> commandResults = pipeLine.Invoke();
            pipeLine.Invoke();
            // close the runspace        
            RunSpace.Close();
        }
        catch (Exception ex)
        { }

    }

    public string ReadPowerShellScript(string Script)
    {
        //Read script         
        //StreamReader objReader = new StreamReader(Server.MapPath(Script));
        StreamReader objReader = new StreamReader(Script);
        string strContent = objReader.ReadToEnd();
        objReader.Close();
        return strContent;
    } 
} 
```

}

并得到以下错误。

“此计算机上未安装 Windows PowerShell 管理单元‘Microsoft.SharePoint.Powershell’。”

请让我知道，我在哪里做错了

谢谢，桑迪普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:35:13.410

只是一个想法；创建批处理文件以调用 .ps1 文件。您可以使用 System.Diagnostics.ProcessStartInfo 调用批处理文件，而不是直接从代码调用 .ps1 文件；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:34:57.903

您是否在运行此代码的 Web 服务器上安装了 sharepoint？错误消息非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T05:29:33.480

解决方案称为 64 位 powershell，而不是仅适用于 VS 2010。

我已经从批处理文件中调用了 Powershell 脚本，而我的批处理文件正在调用 64 位 poweshell。

在我的批处理文件中，我写了 %windir%\sysnative\windowspowershell\v1.0\powershell -File "C:\filepath\Poweshellfile.ps1" auto

现在应用程序工作正常。

Sandeep Tiwari MCTS SharePoint 2010

# javascript - 如何在 JavaScript 中创建唯一项目列表？

> ID：11688692
> 
> 赞同：22
> 
> 时间：2012-07-27T13:26:16.207
> 
> 标签：javascript, arrays, couchdb

在我的 CouchDB reduce 函数中，我需要将项目列表减少为唯一的项目。

*注意：在这种情况下，可以有一个列表，它将是少量字符串类型的项目。*

我目前的方法是设置一个对象的键，然后返回该对象的键，因为代码不能使用`_.uniq`例如。

我想找到一种比这更优雅的拼写方式。

```
function(keys, values, rereduce) {
  // values is a Array of Arrays
  values = Array.concat.apply(null, values);
  var uniq = {};
  values.forEach(function(item) { uniq[item] = true; });
  return Object.keys(uniq);
} 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2018-09-29T07:36:47.340

最好的方法似乎是使用 ES6 和 Set。[根据小提琴](http://jsfiddle.net/8gzmtao5/)，单行且比上面更快*

```
 const myList = [1,4,5,1,2,4,5,6,7];
const unique = [...new Set(myList)];

console.log(unique);
```

*在野生动物园测试

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-08-11T02:59:05.063

**2021年答案：**

```
const unique = (arr) => [...new Set(arr)];
unique([1, 2, 2, 3, 4, 4, 5, 1]); // [1, 2, 3, 4, 5] 
```

在这里，您只需从给定数组创建一个[集合](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)，然后将其转换回数组。我测量了性能，现在它几乎比我之前发布的旧答案中提出的方法快两倍。而且，它只是一个单行。

[更新的小提琴](https://jsfiddle.net/f0t0n/kcwjLve1/)

**旧答案仅供记录：**

通常，您使用的方法是一个好主意。但我可以提出一个解决方案，使算法更快。

```
function unique(arr) {
    var u = {}, a = [];
    for(var i = 0, l = arr.length; i < l; ++i){
        if(!u.hasOwnProperty(arr[i])) {
            a.push(arr[i]);
            u[arr[i]] = 1;
        }
    }
    return a;
} 
```

如您所见，我们这里只有一个循环。

我做了一个[**例子**](http://jsfiddle.net/f0t0n/bbjpT/)来测试你和我的解决方案。尝试玩它。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-07-01T10:37:59.493

适用于小列表的替代方法是模仿 Unix 命令行方法`sort | uniq`：

```
 function unique(a) {
        return a.sort().filter(function(value, index, array) {
            return (index === 0) || (value !== array[index-1]);
        });
    } 
```

此函数对参数进行排序，然后过滤结果以省略与其前任相同的任何项目。

基于键的方法很好，并且对于大量项目（将 n 个项目插入哈希表的 O(n) 与对数组排序的 O(n log n) 相比）具有更好的性能特征。但是，这在小型列表中不太可能引起注意。此外，在此版本中，您可以根据需要修改它以使用不同的排序或相等函数；使用哈希键，您会被 JavaScript 的键相等概念所困扰。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-08-12T20:08:21.160

这应该适用于任何东西，而不仅仅是字符串：

```
export const getUniqueList =  (a: Array<any>) : Array<any> => {

  const set = new Set<any>();

  for(let v of a){
      set.add(v);
  }

  return Array.from(set);

}; 
```

以上可以简化为：

```
export const getUniqueValues = (a: Array<any>) => {
   return Array.from(new Set(a));
}; 
```

:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-21T18:10:01.773

这是一个老问题，我知道。但是，它位于一些谷歌搜索的顶部，所以我想补充一点，您可以使用以下方法组合来自 @RobHague 和 @EugeneNaydenov 的答案：

```
function unique(arr) {
  const u = {};
  return arr.filter((v) => {
    return u[v] = !u.hasOwnProperty(v);
  });
}; 
```

您还可以通过添加以下内容来忽略*未定义*的值（通常很方便）：

```
function unique(arr) {
  const u = {};
  return arr.filter((v) => {
    return u[v] = (v !== undefined && !u.hasOwnProperty(v));
  });
}; 
```

您可以在此处使用此解决方案：[https ://jsfiddle.net/s8d14v5n/](https://jsfiddle.net/s8d14v5n/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-05T16:20:17.897

如果您输入整数参数 (uniq([1,2,3]) => ['1','2','3']，则使用 Object.keys 将为您提供字符串。这是 Array.reduce 的一个：

```
function uniq(list) {
    return list.reduce((acc, d) => acc.includes(d) ? acc : acc.concat(d), []);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-15T15:59:30.773

我发现其他答案相当复杂，因为我看不到任何收益。

我们可以使用 Array 的[indexOf](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf)方法在推送之前验证其中是否存在项目：

```
const duplicated_values = ['one', 'one', 'one', 'one', 'two', 'three', 'three', 'four'];
const unique_list = [];

duplicated_values.forEach(value => {
  if (unique_list.indexOf(value) === -1) {
    unique_list.push(value);
  }
});

console.log(unique_list);
```

这也适用于任何类型的变量，甚至对象（假设标识符实际上引用了相同的实体，只是等效的对象不被视为相同）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-02T09:42:44.953

要获取唯一对象，您可以使用`JSON.stringify`and `JSON.parse`：

```
const arr = [{test: "a"}, {test: "a"}];
const unique = Array.from(new Set(arr.map(JSON.stringify))).map(JSON.parse);
console.log(unique);
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-09-11T18:07:25.890

关于什么

```
 function unique(list) {
      for (i = 0; i<list.length; i++) {
        for (j=i+1; j<list.length; j++) {
          if (list[i] == list[j]) {
            list.splice(j, 1);
          }
        }
      }
    } 
```

# c# - 使用 JavaScript 或获取元素时出现 Selenium 错误

> ID：11688694
> 
> 赞同：0
> 
> 时间：2012-07-27T13:26:28.330
> 
> 标签：c#, jquery, selenium-webdriver, htmlunit

使用 Selenium 2.25，我遇到了很多问题。

我正在尝试在我的计算机（本地/客户端）上的远程计算机（服务器）上使用 Selenium 远程驱动程序。但是，当我尝试使用 DesiresCapabilities.Htmlunit() 它会定位元素，但它说它们不可见。我完全被这个难住了。我不确定为什么可以找到它但随后不可见。

所以我尝试使用一些 JavaScript 来强制它。它回来并抛出一个错误，说网页在加载页面之前无法执行 javascript。当我进行隐含等待并找到它正在等待的元素时，这怎么可能？

```
DesiredCapabilities iecapa = DesiredCapabilities.HtmlUnit();
iecapa.IsJavaScriptEnabled = true;
driver = new RemoteWebDriver(new Uri("http://<IP of server>:4444/wd/hub"), iecapa);

IJavaScriptExecutor jQuery = ((IJavaScriptExecutor)(driver));
addressElement = (IWebElement)jQuery.ExecuteScript("return document.GetElementByName('searchAddress')"); 
```

因此，如果有人愿意帮助我，将不胜感激！谢谢！

[http://imageshack.us/photo/my-images/163/seleniumhtmluniterror.jpg/](http://img163.imageshack.us/img163/7044/seleniumhtmluniterror.jpg)

这就是错误。StackOverflow 不会让我把它贴在这里。=(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:41:15.023

试试这个：

```
WebDriverWait wait = new WebDriverWait(driver, new TimeSpan(0, 0, 0, 30));
wait.Until(p => driver.FindElement(By.Name("searchAddress")));

IJavaScriptExecutor jQuery = ((IJavaScriptExecutor)(driver));
addressElement = (IWebElement)jQuery.ExecuteScript("return document.GetElementByName('searchAddress')"); 
```

您还可以在 JavaScript 中添加检查：

```
if (document.readyState.toLowerCase()=="complete") 
return document.GetElementByName('searchAddress');
return 'Error'; 
```

# storage - 支持 Javafx 2.x 中的离线存储

> ID：11688695
> 
> 赞同：3
> 
> 时间：2012-07-27T13:26:33.917
> 
> 标签：storage, offline, javafx-2

我有一个应用程序支持离线存储用户数据，以防服务器无法访问。在 Javafx 1.3 中，这是通过 javafx.io.Storage 和 javafx.io.Resource 类实现的。

迁移到 Javafx 2.0 时，这些类已停止使用。我相信甲骨文的人在 Java 中具有等效的功能。

我的问题是 Javafx 2.0 中上述类的等价物我想要的是指定一个资源名称，我可以将数据存储到该资源名称，而不必担心它在客户端文件系统上的确切存储位置，与浏览器 cookie 相同。

谢谢你的帮助

艾哈迈德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T18:05:11.867

JavaFX 2.x 本身没有 javafx.io.Storage 和 javafx.io.Resource 等价物。因为JavaFX 2.x 基于Java，您可以使用Java 服务。

可以使用JNLP [FileSaveService](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/developersguide/examples.html#FileSaveService)和[FileOpenService 。](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/developersguide/examples.html#FileOpenService)这些服务应该适用于基于 JNLP 的部署（浏览器嵌入式和 webstart 应用程序）——不确定它们是否适用于独立应用程序。

如果您知道您的应用程序将作为独立应用程序或嵌入的签名浏览器或具有更高权限的 webstart 应用程序运行，那么您可以通过[user.home 系统属性](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)获取用户目录并将您的应用程序数据写入适当的文件位置在此之下，可能使用本[文件教程中的](http://docs.oracle.com/javase/tutorial/essential/io/fileio.html)[文件](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html)api 。例如，使用 Files api 创建要读取和写入的文件。`{$user.dir}/.myapp/appdata.dat`

JavaFX 嵌入了一个 html5 网络引擎。JavaFX 8 中的[WebEngine](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebEngine.html)实现了 html5 规范的离线存储部分，JavaFX 2.2 中的 WebEngine 没有。

# ios - iOS 6 MapKit 是否适用于早期版本的 iOS？

> ID：11688698
> 
> 赞同：1
> 
> 时间：2012-07-27T13:26:35.493
> 
> 标签：ios, routing, mapkit, compatibility, mkmapview

我正在开发一个使用 MKMapView 的应用程序，我需要它在 iOS4、iOS5 和 iOS6 中运行。

我的问题是，如果我使用新的 iOS MapKit 功能进行开发，使用 iOS4 的人可以看到从 sourceAddress 到 destinationAddress 的路由之类的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T13:34:28.563

是和不是。

如果您使用 iOS 6 功能编写地图应用程序，它将无法在旧版本的 iOS 上运行，除非您检查这些方法是否存在。

更一般地说，MapKit 框架足够智能，可以在适当的地方显示 iOS 6 地图，并在其他任何地方使用 Google 地图。但是，您需要避免使用不受支持的路由功能。因此，为了回答您的问题，iOS 4 和 5 上的用户将看不到新的路由功能。

因此，如果您的应用程序不使用新的地图功能，那您完全没问题。如果是这样，您需要采取措施，例如弱链接和方法检查，以确保您的应用不会尝试在旧系统版本上运行新 API。当然，在不支持上述代码的 iOS 版本上运行新代码会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:35:21.797

在文档中，它说明了哪些操作系统版本的特定功能可以使用。我没有文档（目前在 PC 上），但如果在 iOS6 中添加了这些方法，则它们在早期版本中将不可用。您可以做些什么来解决这个问题，即`#ifdef`检查用户的操作系统版本并根据需要禁用功能。

请注意，iOS6 处于 NDA 之下，因此有关其中引入的特定方法的问题应保留在 Apple 开发者论坛中。

编辑：`#ifdef`不是阻止它运行的方法。您只需检查应用程序中的操作系统版本并执行以下操作：

```
if (os >= 6) sourceAddress stuff
else if ((os >= 5) && (os < 6) ignore sourceAddress stuff 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:36:37.607

请参考这篇文章中给出的答案。 [我应该担心苹果将在 iOS6 中停止使用谷歌地图的传闻吗？](https://stackoverflow.com/questions/10964585/should-i-be-worried-about-rumors-that-apple-will-stop-using-google-maps-in-ios6/10964615#10964615)

它对你的问题有描述性的回答。

# php - 在 Wampserver 上更改为旧版本的 PHP/Apache 后，Phpmyadmin 访问被拒绝

> ID：11688699
> 
> 赞同：0
> 
> 时间：2012-07-27T13:26:36.303
> 
> 标签：php, apache, phpmyadmin, wampserver

有人知道为什么是这样吗？

我已经阅读了有关更改 httpd.conf 文件的各种内容，但是

1.  信息各不相同且相互矛盾
2.  据说文件中的内容格式不同，并且有两个版本的内容，`<Directory /> </Directory>`即`<Directory something else> </Directory>`

原始的 PHP 5.4.3/Apache 2.4.2 工作正常，但我看不到足够的类似参考点，无法将 httpd.conf 设置复制到 Apache 2.2.2 的文件中（我正在使用PHP 5.3.1。

```
Lines 160-166:

<Directory />
    Options FollowSymLinks
    AllowOverride None
    Order deny,allow
    Deny from all
    Satisfy all
</Directory>

Lines 305-310:

<Directory "cgi-bin">
    AllowOverride None
    Options None
    Order allow,deny
    Allow from all
</Directory> 
```

还是完全不同的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:14:59.440

您需要将以下行添加到 httpd.conf：

```
# This tells Apache where to look for phpmyadmin
Alias /phpmyadmin C:/wamp/apps/phpmyadmin3.5.1

# This gives permission to serve the directory
<Directory C:/wamp/apps/phpmyadmin3.5.1>
  Options None
  AllowOverride None
  # This allows eveyone to access phpmyadmin, which you may not want
  Order Allow,Deny
  Allow from all
</Directory> 
```

完成这些修改并重新启动 Apache 后，它应该可以工作了。

我怀疑第一行可能已经存在，因为您得到的是 403 而不是 404。

# audio - FFmpeg 输出不准确

> ID：11688704
> 
> 赞同：0
> 
> 时间：2012-07-27T13:26:42.717
> 
> 标签：audio, video, ffmpeg, video-capture, video-processing

> **可能重复：**
> [ffmpeg：转换前后的视频长度不同](https://stackoverflow.com/questions/11455128/ffmpeg-videos-before-and-after-conversion-arent-the-same-length)

最近，我一直在尝试将 FFmpeg 用于在时间参数（毫秒分辨率）方面需要非常准确的操作的应用程序。不幸的是，我惊讶地发现 FFmpeg 的操作功能返回了一些不准确的结果。

这是“ffmpeg”的输出：

```
ffmpeg version 0.11.1 Copyright (c) 2000-2012 the FFmpeg developers
  built on Jul 25 2012 19:55:05 with gcc 4.2.1 (Apple Inc. build 5664)
  configuration: --enable-gpl --enable-shared --enable-pthreads --enable-libx264 --enable-libmp3lame
  libavutil      51\. 54.100 / 51\. 54.100
  libavcodec     54\. 23.100 / 54\. 23.100
  libavformat    54\.  6.100 / 54\.  6.100
  libavdevice    54\.  0.100 / 54\.  0.100
  libavfilter     2\. 77.100 /  2\. 77.100
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\. 15.100 /  0\. 15.100
  libpostproc    52\.  0.100 / 52\.  0.100 
```

现在，假设我想翻录“foo.mov”的音轨。这是'ffmpeg -i foo.mov'的相关输出：

```
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'foo.mov':
  Metadata:
    major_brand     : qt  
    minor_version   : 0
    compatible_brands: qt  
    creation_time   : 2012-07-24 23:16:08
  Duration: 00:00:40.38, start: 0.000000, bitrate: 805 kb/s
    Stream #0:0(und): Video: h264 (Baseline) (avc1 / 0x31637661), yuv420p, 480x360, 733 kb/s, 24.46 fps, 29.97 tbr, 600 tbn, 1200 tbc
    Metadata:
      rotate          : 90
      creation_time   : 2012-07-24 23:16:08
      handler_name    : Core Media Data Handler
    Stream #0:1(und): Audio: aac (mp4a / 0x6134706D), 44100 Hz, mono, s16, 63 kb/s
    Metadata:
      creation_time   : 2012-07-24 23:16:08
      handler_name    : Core Media Data Handler 
```

您可能已经注意到，视频文件的持续时间是 00:00:40.38。使用以下命令，我翻录了它的音轨：

'ffmpeg -i foo.mov foo.wav'

输出：

```
Output #0, wav, to 'foo.wav':
  Metadata:
    major_brand     : qt  
    minor_version   : 0
    compatible_brands: qt  
    creation_time   : 2012-07-24 23:16:08
    encoder         : Lavf54.6.100
    Stream #0:0(und): Audio: pcm_s16le ([1][0][0][0] / 0x0001), 44100 Hz, mono, s16, 705 kb/s
    Metadata:
      creation_time   : 2012-07-24 23:16:08
      handler_name    : Core Media Data Handler
Stream mapping:
  Stream #0:1 -> #0:0 (aac -> pcm_s16le)
Press [q] to stop, [?] for help
size=3482kB time=00:00:40.42 bitrate= 705.6kbits/s    
video:0kB audio:3482kB global headers:0kB muxing overhead 0.001290% 
```

如您所见，输出文件比输入文件长。

另一个例子是音频（和视频）文件修剪：假设我想使用 ffmpeg 进行音频文件修剪。我使用了下一个命令：

'ffmpeg -t 00:00:10.000 -i foo.wav trimmed_foo.wav -ss 00:00:25.000'

输出：

```
[wav @ 0x10180e800] max_analyze_duration 5000000 reached at 5015510
Guessed Channel Layout for  Input Stream #0.0 : mono
Input #0, wav, from 'foo.wav':
  Duration: 00:00:40.42, bitrate: 705 kb/s
    Stream #0:0: Audio: pcm_s16le ([1][0][0][0] / 0x0001), 44100 Hz, mono, s16, 705 kb/s
Output #0, wav, to 'trimmed_foo.wav':
  Metadata:
    encoder         : Lavf54.6.100
    Stream #0:0: Audio: pcm_s16le ([1][0][0][0] / 0x0001), 44100 Hz, mono, s16, 705 kb/s
Stream mapping:
  Stream #0:0 -> #0:0 (pcm_s16le -> pcm_s16le)
    Press [q] to stop, [?] for help
size=864kB time=00:00:10.03 bitrate= 705.6kbits/s    
video:0kB audio:864kB global headers:0kB muxing overhead 0.005199% 
```

同样，输出文件比我预期的要长 30 毫秒。

很长一段时间以来，我都试图研究这个问题，但没有成功。当我将 Audacity 用于相同的功能时，它做得非常准确！

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-27T19:33:36.687

**TL; DR** : FFmpeg 和您的 iOS 设备不适合您的需求。

有很多问题需要解决，所以没有特别的顺序：

*   FFmpeg 或您正在使用的底层编解码器都不是为您想要的时间分辨率而设计的。40ms 是 25fps 的 1 帧，这在大多数视频和音频文件的上下文中并不多。超精确计时不是常见音频编解码器的设计功能，例如您的源 AAC 数据，FFmpeg 也效仿。

*   不要进行任何转码！如果您想尽可能少地更改数据......不要更改它。您可以使用`ffmpeg -i in.mov -c:a copy out.m4a`精确提取音频流，而不是将其转码为 wav 格式。

*   使用 FFprobe 而不是 FFmpeg 来获取文件信息。FFmpeg 只是提供了一些关于输入和输出文件的粗略信息，因为它的默认日志记录过于冗长。FFprobe 通常与 FFmpeg 捆绑在一起，专门设计用于以方便的形式提取信息。用于`ffprobe -show_streams -show_format in.mov`获取信息。

*   增加你的`-analyzeduration`！您可能已经注意到`max_analyze_duration reached`输出中关于的注释。从[文档中可以看出，在 FFmpeg](http://ffmpeg.org/ffmpeg.html#Format-AVOptions)*估计*总长度之前，实际读取文件需要多少*微秒。*同样，对于大多数目的而言，知道文件长度精确到微秒是不可行或不可取的，而且*成本*很高。如果您想要超精确度，请确保该参数设置得更高，可能比您的实际输入更长。

***   对您的期权放置要更加小心。这是相当轻微的，但我认为我应该提出它以防你不知道。FFmpeg 的许多选项的行为不同，具体取决于它们在输入和输出方面给出的顺序。值得注意的是`-ss`，您正在使用。你在输入之后有它，这是你想要的，但你`-t`在开始时也有仅输出选项，这很奇怪。订购该命令的更自然的方式是：

    ```
    ffmpeg -i foo.wav -ss 00:00:25.000 -t 00:00:10.000 trimmed_foo.wav 
    ```

    *   所有计时命令都接受以秒为单位的输入（包括小数秒），因此您不必在所有内容前加上`00:00:`.

    *   区分容器长度和实际流长度。我不使用 Audacity，但如果它显示出极高的准确性，我不会感到惊讶，因为它在对你撒谎。实际上，以毫秒精度修剪音频或视频数据不仅需要选择输入中的哪些帧包含在输出中（在 25fps 时精确到 40ms！），还需要更改帧数据以在末尾插入静音。更容易的是仅根据帧包含进行修剪，然后将超准确的长度放入容器文件元数据中。一些播放软件实际上可能会根据该数字切断，但同样，大多数 AV 软件并不是为这种精度水平而设计的。我很想知道 FFmpeg 显示为 Audacity 修剪的文件的长度。** 

 **这就是现在想到的所有内容，但是一旦您有机会整合上述一些内容，我很乐意提供更多反馈。我的猜测是研究目的需要这种准确性，在这种情况下，快乐的研究！**

# asp.net - 如何使用数据源中的 DropDownList.SelectedIndex？

> ID：11688705
> 
> 赞同：0
> 
> 时间：2012-07-27T13:26:42.670
> 
> 标签：asp.net

我有一个用于注册的 ASP.NET 向导。在第 1 步中，我几乎没有进入表 dbo.Emp 的控件。在此步骤 1 中，我有几个 DropDownList，它们是从名为 dbo.Emptype 的不同表的代码隐藏中绑定的。

但是，在将表单插入到表 dbo.Emp 时，我收到以下错误-

```
Insert Error:Error converting data type nvarchar to numeric. 
```

我不知道它是针对哪个控件而告诉它的。

但这里有一个声明——

```
cmd.Parameters.AddWithValue("@EmpType",DropDownList1.SelectedIndex);
cmd.Parameters.AddWithValue("@DeptID", DropDownList3.SelectedIndex); 
```

我希望将与 EmpType 中的项目关联的 INT 值插入到表中。DropDownList1 绑定到名为 Dbo.EmpType (TypeID (PK-AutoIncrement)| Type) 的表中，因此，当用户下拉该控件并选择值时，我需要将 DataValueField（即 TypeID）插入表中。

我该怎么办？

这是我的绑定课程。

```
public void dropdowntype()
        {
            SqlConnection myConn = new SqlConnection(@"Data Source=USER-PC\SQLEXPRESS;Initial Catalog=KKSTech;Integrated Security=True");
            SqlCommand myCmd = new SqlCommand(
                "SELECT Type, TypeID FROM EmpType", myConn);
            myConn.Open();
            SqlDataReader myReader3 = myCmd.ExecuteReader();

            //Set up the data binding.
            Emp_type.DataSource = myReader3;
            Emp_type.DataTextField = "Type";
            Emp_type.DataValueField = "TypeID";
            Emp_type.DataBind();

 //Close the connection.
            myConn.Close();
            myReader3.Close();

        }
protected void Page_Load(object sender, EventArgs e)
        {
            if (!(Page.IsPostBack))
            {
                dropdownDept();
                dropdowntype();
                dropdownskills();
            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:37:26.980

如果您需要下拉列表中的数据值字段，请使用此语句

```
cmd.Parameters.AddWithValue("@EmpType",DropDownList1.SelectedValue);
cmd.Parameters.AddWithValue("@DeptID",DropDownList3.SelectedValue); 
```

您当前正在选择下拉列表的索引。

# php - PHP树祖先检查

> ID：11688707
> 
> 赞同：0
> 
> 时间：2012-07-27T13:26:51.717
> 
> 标签：php, mysql, tree

我有一个带有组的数据库，每个组都可以包含其他组，依此类推。数据库的结构是这样的：

```
 Group[Id,Name]
 GroupGroups[Id,ParentGroup,ChildGroup] 
```

我想在将组添加到父组之前检查该组是否已经在上层。最好的方法是什么？我可以考虑在每个上下文中拥有一个包含每个节点的所有祖先的缓存，或者构建树并将其遍历到根以检查添加的元素是否已经存在。

# c - lixml2 C xpath 因“无效表达式”而失败

> ID：11688709
> 
> 赞同：0
> 
> 时间：2012-07-27T13:26:52.403
> 
> 标签：c, xpath, libxml2

我在 C 应用程序中使用 libxml2 来解析 XML 文件。

搜索带有特殊字符“$”的 XPath 时出现错误。

这是我的代码：

```
xmlXPathExpression("//mytag/foo$"); 
```

我收到错误“无效的表达式”。

我试图像这样编码特殊字符：

```
xmlXPathExpression("//mytag/foo&#36;"); 
```

但我得到同样的错误。

有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:45:46.877

我没有看到`$`元素名称中列为有效字符：[XML 1.0](http://www.w3.org/TR/REC-xml/#NT-NameChar)。

# database - 将数据从旧数据库复制到具有新结构的新数据库

> ID：11688714
> 
> 赞同：0
> 
> 时间：2012-07-27T13:27:18.877
> 
> 标签：database, ms-access, migration

我有一个旧数据库，其中包含一个包含客户订单和客户详细信息的表。我继续使用单独的表为客户和详细信息创建一个新的数据库模型。我设法将客户详细信息迁移到新数据库，但无法迁移客户订单。我们认为这样就可以了，并且我们将从现在开始构建订单记录，而忽略旧数据库中的所有先前订单。这是不久前的事，我不记得我无法导入客户订单的确切原因。但是，现在我们发现我们需要新数据库中的旧订单。是否有使用 Microsoft Access 的简单方法来执行此操作？

**这就是为什么：**

[将访问中的表拆分为两个链接表](https://stackoverflow.com/questions/11263253/split-a-table-in-access-into-two-linked-tables#comment14807539_11263253)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:05:26.863

根据您的模式的复杂程度，一种简单的方法是通过`INSERT INTO SELECT`查询进行模式映射。

例如，如果您的旧数据库有一个表：

```
Orders
------
OrdID
CustID
ProductName
Price
oDay
oMonth
oYear 
```

并且您的新数据库具有不同名称的字段、额外字段等：

```
OrderDetails
------
Order_ID
Customer_ID
Product
Price
DeliveryAddress
OrderDate 
```

您需要做的就是创建一个插入查询以将旧记录附加到新表中。在定义查询时，您可以指定源和目标字段名称，甚至可以对数据执行函数/表达式。您甚至可以直接查询另一个表，而无需将其链接或导入到新数据库中：

```
INSERT INTO OrderDetails (Order_ID,Customer_ID,Product,Price,OrderDate)
SELECT OrdID,CustID,ProductName,Price,DateSerial(oYear,oMonth,oDay) AS oDate
FROM Orders IN 'C:\oldDatabasePath.mdb'; 
```

如果您必须对数据进行额外的转换，例如在列值上运行表达式，我建议`SELECT`在添加`INSERT`行之前测试查询的部分。

# asp.net - 验证控件扭曲 UI

> ID：11688715
> 
> 赞同：0
> 
> 时间：2012-07-27T13:27:21.353
> 
> 标签：asp.net, css, styles, validation

我检查了萤火虫，发现验证控件显示的错误消息被渲染为 span 和 visibility: hidden; 样式应用于它们以使它们不可见。因为可见性：隐藏；style 错误消息的空间被保留，这会扭曲 UI。

检查此图像![在此处输入图像描述](../Images/1b977669122f549064e4f58b7c3cfe4b.png)

我检查了萤火虫并知道我们是否应用 display:none 而不是 visibility:hidden 这个 UI 失真将得到修复。但是我不知道如何应用这种样式，因为错误消息的范围是在内部创建的，并且应用的样式是内联的。

谁能让我知道如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:29:46.770

尝试`Display="Dynamic"`在您的验证器上使用属性。

这应该使用`display:none`样式而不是`display:hidden`

[来自 MSDN 的更多信息](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basevalidator.display%28v=vs.80%29.aspx)

# php - 如何为 Facebook 应用创建点赞门

> ID：11688716
> 
> 赞同：-1
> 
> 时间：2012-07-27T13:27:30.480
> 
> 标签：php, facebook, facebook-like, facebook-likebox

我对编码完全陌生，正在尝试向我的 Facebook 应用程序添加一个类似的门（一个使用 wordpress 插件创建的简单博客提要）

我真的很想为应用程序制作一个类似的门......理想情况下，它会是一个 ajax 样式的弹出窗口，它会使内容变灰，直到页面被喜欢，或者是一个透明的图形。

有谁知道如何做到这一点？我完全被困住了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:05:42.193

Like-Gates 通常位于应用程序选项卡中，可以在其中检查用户是否喜欢该页面，而无需强制用户首先授权您的应用程序。因此，您的第一步是研究如何使用**signed_request**来确定该页面是否已被点赞。如果页面不受欢迎，请显示 ajax 弹出窗口。对于'ajax-style-popup'，您可以使用类似[leanModal](http://leanmodal.finelysliced.com.au)

# php - 卷曲并创建图像

> ID：11688717
> 
> 赞同：0
> 
> 时间：2012-07-27T13:27:31.780
> 
> 标签：php, image, curl

我有这部分脚本。在这个脚本之前，我有一个返回页面内容的 curl 函数。使用 preg_match，我得到了这些值。问题出在 imagecreate 脚本或与之相关的东西上。

这是脚本：

```
<?php
    ob_start();
    $user = "username"; 
    $pw = "pass"; 
    $ne_ki = 1;
    $postfields = "name=".$id."&pass=".$pw."&ne_ki=".$ne_ki; 
    $ch = curl_init(); 
    curl_setopt($ch, CURLOPT_HEADER, 0); // Get the header 
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_URL, "http://domain.tld/login.php"); 
    curl_setopt($ch, CURLOPT_POST, 1); 
    curl_setopt($ch, CURLOPT_POSTFIELDS, $postfields); 
    curl_setopt($ch, CURLOPT_COOKIEFILE, 'C:\AppServ\www\curl\cookies.txt');
    curl_setopt($ch, CURLOPT_URL, 'http://domain.tld/profile.php?id='.$_GET['id']);
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
    $data2 = curl_exec($ch);
    curl_close($ch);
    preg_match_all ("/<div class=\"profil_jobb_masodik2\">([^`]*?)<\/div>/", $data2,$matches);
    preg_match_all ("/<div class=\"lista_mini_fej\">([^`]*?)<\/div>/", $data2, $matches2);
    preg_match_all ("/<nobr>([^`]*?)<\/nobr>/", $data2, $matches3);
    $string = preg_match("/\([0-9]+\)/", $matches2[0][0], $strend);
    $HTML = '';
    $HTML .= "DATA1: ".$matches3[0][0]."<br />";
    $HTML .= "DATA2: ".$matches[1][0]."<br />";
    $HTML .= "DATA3: ".$matches[1][1]."<br />";
    $HTML .= "DATA4: ".$matches[1][2]."<br />";
    $HTML .= "DATA5: ".$matches[1][3]."<br />";
    $HTML .= "DATA6: ".$matches[1][4]."<br />";
    $HTML .= "DATA7: ".$matches[1][5]."<br />";
    $HTML .= "DATA8: ".$matches[1][6]."<br />";
    $HTML .= "DATA9: ".$matches[1][7]."<br />";
    if (!empty($strend[0]))
    $HTML .= "DATA10: ".$strend[0]."<br />";
     $text = $HTML;
    if(empty($text))

        fatal_error('Error: Text not properly formatted.') ;

    // customizable variables

    $font_file      = 'ambient.ttf';

    $font_size      = 23 ; // font size in pts

    $font_color     = '#ffffff' ;

    $image_file     = 'bb.jpeg';

    // x and y for the bottom right of the text

    // so it expands like right aligned text

    $x_finalpos     = 227;

    $y_finalpos     = 103;

    // trust me for now...in PNG out PNG

    $mime_type          = 'image/png' ;

    $extension          = '.png' ;

    $s_end_buffer_size  = 4096 ;

    // check for GD support

    if(!function_exists('ImageCreate'))

        fatal_error('Error: Server does not support PHP image generation') ;

    // check font availability;

    if(!is_readable($font_file)) {

        fatal_error('Error: The server is missing the specified font.') ;

    }

    // create and measure the text

    $font_rgb = hex_to_rgb($font_color) ;

    $box = @ImageTTFBBox($font_size,0,$font_file,$text) ;

    $text_width = abs($box[2]-$box[0]);

    $text_height = abs($box[5]-$box[3]);

    $image =  imagecreatefrompng($image_file);

    if(!$image || !$box)

    {

        fatal_error('Error: The server could not create this image.') ;

    }

    // allocate colors and measure final text position

    $font_color = ImageColorAllocate($image,$font_rgb['red'],$font_rgb['green'],$font_rgb['blue']) ;

    $image_width = imagesx($image);

    $put_text_x = $image_width - $text_width - ($image_width - $x_finalpos);

    $put_text_y = $y_finalpos;

    // Write the text

    imagettftext($image, $font_size, 0, $put_text_x,  $put_text_y, $font_color, $font_file, $text);

    header('Content-type: ' . $mime_type) ;

    ImagePNG($image) ;

    ImageDestroy($image) ;

    exit ;

    /*

        attempt to create an image containing the error message given. 

        if this works, the image is sent to the browser. if not, an error

        is logged, and passed back to the browser as a 500 code instead.

    */

    function fatal_error($message)

    {

        // send an image

        if(function_exists('ImageCreate'))

        {

            $width = ImageFontWidth(5) * strlen($message) + 10 ;

            $height = ImageFontHeight(5) + 10 ;

            if($image = ImageCreate($width,$height))

            {
                $background = ImageColorAllocate($image,255,255,255) ;

                $text_color = ImageColorAllocate($image,0,0,0) ;

                ImageString($image,5,5,5,$message,$text_color) ;    

                header('Content-type: image/png') ;

                ImagePNG($image) ;

                ImageDestroy($image) ;
                // This is line 197
                exit ;

            }

        }

    }

    /* 

        decode an HTML hex-code into an array of R,G, and B values.

        accepts these formats: (case insensitive) #ffffff, ffffff, #fff, fff 

    */    

    function hex_to_rgb($hex) {

        // remove '#'

        if(substr($hex,0,1) == '#')

            $hex = substr($hex,1) ;

        // expand short form ('fff') color to long form ('ffffff')

        if(strlen($hex) == 3) {

            $hex = substr($hex,0,1) . substr($hex,0,1) .

                   substr($hex,1,1) . substr($hex,1,1) .

                   substr($hex,2,1) . substr($hex,2,1) ;

        }

        if(strlen($hex) != 6)

            fatal_error('Error: Invalid color "'.$hex.'"') ;

        // convert from hexidecimal number systems

        $rgb['red'] = hexdec(substr($hex,0,2)) ;

        $rgb['green'] = hexdec(substr($hex,2,2)) ;

        $rgb['blue'] = hexdec(substr($hex,4,2)) ;

        return $rgb ;

    }

?> 
```

第 197 行标有注释。错误是：

> 警告：无法修改标头信息 - 标头已由第 197 行 C:\AppServ\www\curl\index.php 中的（输出开始于 C:\AppServ\www\curl\index.php:1）发送

问题是什么？

# xcode - 单元测试目标不在 Xcode 4.5 上运行

> ID：11688720
> 
> 赞同：10
> 
> 时间：2012-07-27T13:27:36.740
> 
> 标签：xcode, unit-testing, ios6

我正在使用最新的 Xcode 测试版（Xcode 4.5 和 iOS 6.0）。我有一个 iphone 应用程序的 xcode 项目，我想在它上面添加一个单元测试目标。[我已仔细按照此页面](https://developer.apple.com/library/archive/documentation/DeveloperTools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html)上的说明进行操作， 但无法运行测试。这是我在控制台中读到的消息：

```
Failed to find SDK: '6.0'  
error: failed to attach to process ID 0 
```

不过，对应于主应用程序的目标在 iPhone 6.0 模拟器上运行良好。

我在哪里犯了错误？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-30T02:56:18.443

Xcode -> Preferences -> Locations -> Command Line Tools => 选择与 SDK 匹配的那个。

**编辑：**

**编辑2：对于某些人来说，上述方法有效。如果没有，请尝试：**

~~看来这个问题是在多个版本的 SDK 之间切换的结果，可以通过使用终端命令（需要 root 权限）将当前 SDK 指定为活动版本来解决：~~

```
$ sudo xcode-select --switch <path-to-your-current-xcode.app> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T16:17:54.737

我发现为了让 Xcode 附加到我的单元测试中，我必须使用 LLDB，而 GDB 不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T04:09:03.877

我回到了我之前的一个快照——唯一的变化是编译器被设置为 GDB 而不是 LLVM——令人惊讶的是，这似乎工作得很好。

不知道为什么 LLVM 不起作用。

# java - jsp需要写不同颜色的文字

> ID：11688721
> 
> 赞同：1
> 
> 时间：2012-07-27T13:27:38.753
> 
> 标签：java, css, jsp, jsf

我需要在不同颜色的一行上写下 jsf 2 文本。这是我的代码：

```
<h:panelGrid id="accessinfo_grid" columns="3">
<h:outputText id="loginid" value="#{msgs.loginId}" styleClass="label"/>
<h:outputText id="loginid_asterix" value="#{msgs.asterix}" styleClass="error_message"/>
<h:inputText  id="inputusername" disabled="true" value="#{userAccount.userName}"/>
<h:outputText id="password" value="#{msgs.passwordID}" styleClass="label"/>
<h:outputText id="passwordid_asterix" value="#{msgs.asterix}" styleClass="error_message"/>
<h:secretText  id="inputpassword" disabled="true" value="#{userAccount.password}"/>
</h:panelGrid> 
```

我希望输出是这样的，带有红色的 *：

```
Login:* edit_box
Password:* edit_box 
```

但现在是这样的：

```
Login:   * edit_box
Password:* edit_box 
```

我希望 * red 就在第一个文本之后。可能我应该尝试使用其他东西然后是 panelGrid 但我不知道什么/如何。

我是这方面的新手。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T13:44:52.757

在`<h:panelGrid>`生成 HTML 的 a 中`<table>`，每个直接子 JSF 组件都将以自己的形式结束`<td>`。您需要将应该以相同结尾的 JSF 组件分组`<td>`到`<h:panelGroup>`.

```
<h:panelGrid id="accessinfo_grid" columns="2">
    <h:panelGroup>
        <h:outputText id="loginid" value="#{msgs.loginId}" styleClass="label"/>
        <h:outputText id="loginid_asterix" value="#{msgs.asterix}" styleClass="error_message"/>
    </h:panelGroup>
    <h:inputText id="inputusername" disabled="true" value="#{userAccount.userName}"/>

    <h:panelGroup>
        <h:outputText id="password" value="#{msgs.passwordID}" styleClass="label"/>
        <h:outputText id="passwordid_asterix" value="#{msgs.asterix}" styleClass="error_message"/>
    </h:panelGroup>
    <h:inputSecret id="inputpassword" disabled="true" value="#{userAccount.password}"/>
</h:panelGrid> 
```

*（请注意，我用 替换了不存在`h:secretText`的`h:inputSecret`，不知道你为什么使用它）*

请注意，这与 CSS**无关。**禁用 CSS 时，您仍然会遇到完全相同的问题。我建议暂停 JSF 并专注于阅读一些不错的 HTML 教程，以更好地了解 JSF 生成的所有工作原理（您可以通过在浏览器中打开 JSF 页面并右键单击并*查看源代码*来查看它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:31:33.553

您可以使用 a`<h:outputText>`并通过`styleClass="color-red"`. 例子：

```
<h:outputText styleClass="color-red" value="*" /> ... 
```

然后在您的 CSS 中创建相应的类：

```
.color-red {
    color: #F00;
} 
```

# java - 实体管理器休眠/Spring Roo 错误 - 无法创建 TypedQuery

> ID：11688724
> 
> 赞同：0
> 
> 时间：2012-07-27T13:27:47.833
> 
> 标签：java, spring, hibernate, spring-roo, jpql

使用 Spring Roo（但手动创建这些方法可能无关紧要）我试图在一个列表中显示两个表。我有以下方法可以让所有人在 people.java 类中使用他们的用户名。我相信这种方法可以正常工作。

```
public static TypedQuery<Person> findAllPeople() {
  String queryStr = "SELECT o.name, b.username FROM Person o INNER JOIN o.users b";
  TypedQuery<Person> query = entityManager().createQuery(queryStr, Person.class);
  return query;
} 
```

这是控制器的代码

```
@RequestMapping(produces = "text/html")
public String list(@RequestParam(value = "page", required = false) Model uiModel) {
    uiModel.addAttribute("people", Person.findAllPeople());
    return "people/list";
} 
```

当我尝试通过 list.jspx 运行它时，我收到错误“无法使用请求的结果类型 [com.test.peopletest.Person]; 创建 TypedQuery 以进行具有多个返回的查询；”

有谁知道我如何正确返回此查询并输出所有结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:49:12.687

您不是在查询 Person 对象，您的查询似乎返回两个字符串

```
 SELECT o.name, b.username... 
```

为了返回一个人，你应该有

```
 SELECT o FROM Person o 
```

只需查看您的查询，您就可以在拥有人员对象后深入了解用户/用户名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:06:18.300

看来您可以使用类似...

```
SELECT o FROM Person o FETCH JOIN o.users b 
```

当您步行 person.users 时，所有用户都从内存中加载（没有数据库往返）将完成。

或者，理论上（阅读未经测试！！），你可以

```
SELECT o.name, b.username FROM Person o FETCH JOIN o.users b
TypedQuery<String[]> query = entityManager().createQuery(queryStr, String[]); 
```

# ruby - 将 MatchData 中的命名匹配转换为哈希

> ID：11688726
> 
> 赞同：20
> 
> 时间：2012-07-27T13:27:56.850
> 
> 标签：ruby, regex, hash

我有一个相当简单的正则表达式，但我想使用命名的正则表达式使其更清晰，然后迭代结果。

测试字符串：

```
testing_string = "111x222b333" 
```

我的正则表达式：

```
regexp = %r{
                (?<width> [0-9]{3} ) {0}
                (?<height> [0-9]{3} ) {0}
                (?<depth> [0-9]+ ) {0}

                \g<width>x\g<height>b\g<depth>
            }x
dimensions = regexp.match(testing_string) 
```

这项工作就像一个魅力，但问题出在此处：

```
dimensions.each { |k, v| dimensions[k] = my_operation(v) }

# ERROR !

 undefined method `each' for #<MatchData "111x222b333" width:"111" height:"222" depth:"333">. 
```

没有。`each`MatchData 对象中的方法，我真的不想修补它。

我该如何解决这个问题？

我并没有我想**的那么清楚：关键是要保留名称**和类似哈希的结构。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-27T15:06:42.240

如果你需要一个完整的哈希：

```
captures = Hash[ dimensions.names.zip( dimensions.captures ) ]
p captures
#=> {"width"=>"111", "height"=>"222", "depth"=>"333"} 
```

如果您只想遍历名称/值对：

```
dimensions.names.each do |name|
  value = dimensions[name]
  puts "%6s -> %s" % [ name, value ]
end
#=>  width -> 111
#=> height -> 222
#=>  depth -> 333 
```

备择方案：

```
dimensions.names.zip( dimensions.captures ).each do |name,value|
  # ...
end

[ dimensions.names, dimensions.captures ].transpose.each do |name,value|
  # ...
end

dimensions.names.each.with_index do |name,i|
  value = dimensions.captures[i]
  # ...
end 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-12-25T10:47:02.920

所以今天发布了一个新的 Ruby 版本（2.4.0）[，](https://www.ruby-lang.org/en/news/2016/12/25/ruby-2-4-0-released/)其中[包括许多新功能](https://github.com/ruby/ruby/blob/v2_4_0/NEWS)，其中包括[功能 #11999](https://bugs.ruby-lang.org/issues/11999)，又名`MatchData#named_captures`。这意味着您现在可以这样做：

```
h = '12'.match(/(?<a>.)(?<b>.)(?<c>.)?/).named_captures
#=> {"a"=>"1", "b"=>"2", "c"=>nil}
h.class
#=> Hash 
```

所以在你的代码更改中

```
dimensions = regexp.match(testing_string) 
```

到

```
dimensions = regexp.match(testing_string).named_captures 
```

您也可以在正则表达式匹配结果上使用该`each`方法，就像在任何其他上一样`Hash`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T16:22:40.610

我会以不同的方式解决创建哈希的整个问题：

```
irb(main):052:0> testing_string = "111x222b333"
"111x222b333"
irb(main):053:0> hash = Hash[%w[width height depth].zip(testing_string.scan(/\d+/))]
{
    "width" => "111",
    "height" => "222",
    "depth" => "333"
} 
```

虽然正则表达式很强大，但它们的警笛声可能太诱人了，当有更简单或直接的完成某事的方法时，我们会被吸引尝试使用它们。这只是需要考虑的事情。

* * *

要跟踪扫描的元素数量，请根据 OP 评论：

```
hash = Hash[%w[width height depth].zip(scan_result = testing_string.scan(/\d+/))]
=> {"width"=>"111", "height"=>"222", "depth"=>"333"}
scan_result.size
=> 3 
```

也`hash.size`将返回它，包含键的数组的大小等也会返回。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-20T23:19:03.730

[如果您的所有捕获都有唯一的名称， @Phrogz 的答案](https://stackoverflow.com/a/11690565/1886865)是正确的，但是您可以为多个捕获提供相同的名称。[这是 Regexp 文档中的一个示例。](http://ruby-doc.org/core-1.9.3/Regexp.html#method-i-named_captures "正则表达式#named_captures")

此代码支持具有重复名称的捕获：

```
captures = Hash[
  dimensions.regexp.named_captures.map do |name, indexes|
    [
      name,
      indexes.map { |i| dimensions.captures[i - 1] }
    ]
  end
]

# Iterate over the captures
captures.each do |name, values|
  # name is a String
  # values is an Array of Strings
end 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-27T13:41:33.287

如果你想保留名字，你可以这样做

```
new_dimensions = {}
dimensions.names.each { |k| new_dimensions[k] = my_operation(dimensions[k]) } 
```

# zend-framework - 包含一个带有 ZendFramework 库的模块

> ID：11688729
> 
> 赞同：1
> 
> 时间：2012-07-27T13:28:06.193
> 
> 标签：zend-framework, zend-framework-modules

我想为我公司的 ZendFramework 和 Doctrine 安装设置一个分析器。现在我在底部有一个栏，在开发环境中显示时会显示一些基本的时间和查询计数（很像 Symfony 分析器栏）。我想做的是将所有这些信息以及更多信息存储在 SQLite 数据库中，并允许在 Symfony 允许的分析器中查看这些信息。

有没有一种方法可以让我在我公司的库中包含一个模块，该分析器的所有代码都可以放在其中？理想情况下，我希望它进行设置，以便开发人员可以输入“domainname.com/CompanyProfiler”，它会向他们显示全屏分析器。我目前似乎没有办法在没有新模块的情况下使路由成为可能。

**编辑：**在看到关于 setControllerDirectory 的答案后，我查看了前端控制器方法并找到了 addModuleDirectory，这听起来正是我所需要的。但我无法让它工作。

```
$frontController->addModuleDirectory(APPLICATION_PATH . '/../library/Company/modules'); 
```

如果我在那之后做一个 getControllerDirectory ，我会看到：

```
'profiler' => '{really long correct path}../library/Company/modules\profiler\controllers' 
```

在“controllers”文件夹中，我有 IndexController.php 的类名：

```
class Profiler_IndexController extends Zend_Controller_Action 
```

但是如果我尝试访问 URL“/profiler”，我会收到一个找不到控制器的错误。对我做错了什么有任何想法吗？

如果我 var_dump 错误控制器中的错误，我可以看到它显然正在尝试访问默认模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:01:57.713

如果我理解正确，您还希望在库中拥有控制器吗？[如果是这样，您可以设置 ZF 使用setControllerDirectory()](http://framework.zend.com/manual/en/zend.controller.router.html#zend.controller.router.default-routes)查找所有控制器都在库（或其他任何地方）中的 CompanyProfiler 模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:13:44.320

尝试通过在引导程序中放置以下内容来添加到模块的直接路由：

```
protected function _initRoutes()
{
    $router = Zend_Controller_Front::getInstance()->getRouter();

    // Route for profiler
    $route = new Zend_Controller_Router_Route(
        'profiler/:controller/:action/*',
        array(
            'module'     => 'profiler',
            'controller' => 'index',
            'action'     => 'index'
        )
    );
    $router->addRoute('profiler', $route);
} 
```

# ios - 当 UITableView 滚动到不可见的单元格时，UITextField 没有光标

> ID：11688731
> 
> 赞同：0
> 
> 时间：2012-07-27T13:28:08.717
> 
> 标签：ios, uitableview, scroll

我有一个自定义分组的 TableView，它有 5 个部分，总共有 50 个类型的自定义单元格：

```
Label      |    XXX 
```

其中 XXX 可以是 UITextField、UITextView、UIButton、UILabel。单元格在 tableView 中具有混合顺序。

![在此处输入图像描述](../Images/4884c5e8951c1fa028ea67d8c940552a.png)

为了浏览 textFields 和 textViews，我在键盘上添加了 Next/Prev 按钮。

![在此处输入图像描述](../Images/5117d42bd1880280dfd8cdc96b5345ef.png)

**问题**是当我选择 txtField 并**单击 Next 或 Prev 按钮**时，表格滚动到所需的单元格位置，但**txtField 没有得到光标**。为了获得带有 textField/textView 的单元格，我使用：

```
 nextCell = [self tableView:_myTableView 
      cellForRowAtIndexPath:[NSIndexPath indexPathForRow:curRow inSection:curSec]]; 
```

我需要搜索 tableView 中的所有单元格，而不仅仅是通过可见的单元格。

正如我测试的那样，问题出在这行代码中，因为如果我调用：

```
nextCell = [_myTableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:curRow inSection:curSec]]; 
```

并且单元格可见，然后 txtField 获得光标。但是，如果我需要从单元格（部分 = 1，行 = 6）跳转到不可见的单元格（部分 = 0，行 = 3），我会得到零。

我的按钮功能的完整代码：

```
-(void) previousTextField:(id)sender
{
   int curTagInd = _editingTextElement.tag;

   NSIndexPath *curInd = [self getRowIndexOf:_editingTextElement];
   int curSec = curInd.section;
   int curRow = curInd.row;

   id nextView = nil;
   UITableViewCell *nextCell = nil;

   do {        
    curRow--;

    if (curRow >=0) {
        nextCell = [self tableView:_myTableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:curRow inSection:curSec]];//[_myTableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:--curRow inSection:curInd.section]];
        curTagInd--;
        if ([nextCell isKindOfClass:[CustomCell class]] || [nextCell isKindOfClass:[CustomLongTextCell class]]) {
            do {
                nextView = [nextCell viewWithTag:curTagInd];
                if ([nextView isEnabled]) {
                    nextCell = nil;
                    _editingIndexPath = [NSIndexPath indexPathForRow:curRow inSection:curSec];
                    break;
                }else{
                    break;
                }
            } while (nextView != nil && ((![nextView isKindOfClass:[UITextField class]] && ![nextView isKindOfClass:[UITextView class]])  || ![nextView isEnabled]));
        }
      }
      else if(curSec > 0){ //got to previous section
        curSec--;
        curRow = [self getNumberOfRowsInSection:curSec];
        curTagInd = [self getNumberOfRowsInSection:curSec]+1;
      }
      else{
        nextCell = nil;
      }

   } while (nextCell != nil);

   if (nextView != nil) {
      [self.myTableView scrollToRowAtIndexPath:_editingIndexPath atScrollPosition:UITableViewScrollPositionMiddle animated:YES];

      UITextField *textField = (UITextField *)nextView;
      [textField becomeFirstResponder];
   }
} 
```

使用此代码我进入方法`textFieldShouldBeginEditing:`，但不是`textFieldDidBeginEditing:`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:34:06.303

解决方案：

问题是表格仅在函数`previousTextField:`完成后才开始滚动，因此`[textField becomeFirstResponder];`在表格滚动到所需位置之前被调用。由于所需的单元格在屏幕上仍然不可见，因此没有调用委托方法。

为了避免这种情况，我在表格滚动行之后添加了计时器：

```
NSTimer *t = [NSTimer scheduledTimerWithTimeInterval: 0.2
                                              target: self
                                            selector:@selector(doneScrolling)
                                            userInfo: nil repeats:NO]; 
```

并定义`doneScrolling`为：

```
-(void)doneScrolling
{
    NSLog(@"done scrolling");
    [self tableView:self.myTableView didSelectRowAtIndexPath:self.editingIndexPath];
} 
```

在哪里：

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:NO]; 
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath]; 
    UIView *nextView = [cell viewWithTag:indexPath.row+1];
    if ([nextView isKindOfClass:[UITextView class]] || [nextView isKindOfClass:[UITextField class]]) {
        if ([nextView isEnabled]) {
            UITextField *textField = (UITextField *)nextView;
            [textField becomeFirstResponder];
        }
    }  
 } 
```

# c++ - 完美的填充三角形渲染算法？

> ID：11688738
> 
> 赞同：13
> 
> 时间：2012-07-27T13:28:19.563
> 
> 标签：c++, language-agnostic, geometry, rendering

我在哪里可以获得渲染填充三角形的算法？**Edit3：**我不能使用 OpenGL 来渲染它。我需要为此的每像素算法。

我的目标是从三角形渲染一个正多边形，所以如果我使用这个三角形填充算法，每个三角形的边缘不会重叠（或在它们之间产生间隙），因为如果我使用它会导致渲染错误例如XOR 渲染像素。

因此，渲染质量应该与 OpenGL 渲染相匹配，所以我应该能够定义 - 例如 - 一个具有 N 个顶点的圆，并且它可以正确地渲染为任意大小的圆；所以它不像一些三角形填充算法那样只使用整数坐标来渲染它。

我需要自己控制三角形填充的能力：我可以添加自己的逻辑来渲染每个单独的像素。所以我需要渲染背后的裸代码来完全控制它。它应该足够有效地绘制数以万计的三角形而无需等待超过一秒钟。（我不确定它最多能有多快，但我希望它不会超过 10 秒）。

首选语言是 C++，但我可以根据需要转换其他语言。

如果没有免费的算法，我在哪里可以学习自己构建一个，这实际上有多难？（我=数学菜鸟）。

我添加了 OpenGL 标记，因为这与它有某种关联。

**Edit2：**我在这里尝试了算法：http: [//joshbeam.com/articles/triangle_rasterization/](http://joshbeam.com/articles/triangle_rasterization/)但它似乎有点破损，这是一个带有 64 个三角形的圆圈： ![在此处输入图像描述](../Images/31f02ec6cb1654483b9d1e34ba5e75ba.png)

但是如果你放大，你可以看到错误： ![在此处输入图像描述](../Images/a201acc9c5787dd560a7a165b9ca5aa5.png)

解释：有 2 个像素与其他三角形颜色重叠，这不应该发生！（或透明度或异或等效果会产生不好的渲染）。

似乎错误在较小的圆圈上更明显。如果我想对像素产生 XOR 效果，这是不可接受的。

我能做些什么来解决这些问题，所以它会完美地填充它而没有重叠的像素或间隙？

**Edit4：**我注意到渲染非常小的圆圈不是很好。我意识到这是因为坐标确实被转换为整数。如何将坐标视为浮点数并使其像在 OpenGL 中一样精确和完美地渲染圆？这是小圆圈看起来有多糟糕的示例：

![在此处输入图像描述](../Images/6801d5f98f4fc8223466430055126323.png)

注意 OpenGL 渲染是多么完美！这就是我想要实现的目标，而不使用 OpenGL。**注意：**我不只是想渲染完美的圆形，而是任何多边形形状。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:36:54.447

OpenGL 使用 GPU 来执行这项工作。这在硬件中被加速，称为光栅化。据我所知，硬件实现是基于扫描线算法的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:59:50.863

这过去是通过创建轮廓然后填充水平线来完成的。有关更多详细信息，请参阅此链接 - [http://joshbeam.com/articles/triangle_rasterization/](http://joshbeam.com/articles/triangle_rasterization/)

编辑：我不认为这会产生你所追求的孤立像素，每一行都应该有一个像素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T19:02:11.903

总是有[半空间法](https://web.archive.org/web/20141221050705/http://forum.devmaster.net/t/advanced-rasterization/6145)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-11T05:55:19.790

您的问题看起来很像共享同一边的三角形所遇到的问题。共享边的三角形所做的是允许一个三角形占据空间，而另一个必须将其留空。

在使用图形卡工作时，通常通过应用从左到右的绘制顺序来获得这种行为，同时还启用 z 缓冲区测试或测试是否曾经绘制过像素。因此，如果已经设置了具有相同 z 值的像素，则不允许更改像素。

在您使用圆圈的示例中，两个相邻圆段的线都不准确。您必须检查边缘的计算方式是否不同以及原因。

每当您绘制两个不同的形状并看到类似的东西时，您可以修复您的模型（因此它们共享所有边缘顶点），进行 z 缓冲区测试或颜色测试。

您还可以通过使用具有更高分辨率的子缓冲区绘制边缘并对其进行下采样来最小化影响。由于这不会影响整个区域，因此与对整个场景进行下采样相比，它在空间和时间方面更具成本效益。

# networking - 使用无头 jnlp 将从属连接到主控时显示异常

> ID：11688744
> 
> 赞同：4
> 
> 时间：2012-07-27T13:28:34.760
> 
> 标签：networking, hudson, jenkins, jenkins-plugins, hudson-api

我正在使用 jenkins 1.447.2 版本。我的主人是 linux，奴隶是 windows

```
 Jul 27, 2012 12:44:17 PM hudson.remoting.jnlp.Main$CuiListener <init>
    INFO: Hudson agent is running in headless mode.
    Jul 27, 2012 12:44:17 PM hudson.remoting.jnlp.Main$CuiListener status
    INFO: Locating server among [http://10.10.1.162:8080/jenkins/, http://dem
     Jul 27, 2012 12:44:38 PM hudson.remoting.jnlp.Main$CuiListener status
    INFO: Connecting to demo.sigmainfo.in:8050
     Jul 27, 2012 12:44:38 PM hudson.remoting.jnlp.Main$CuiListener status
     INFO: Handshaking
     Jul 27, 2012 12:44:58 PM hudson.remoting.jnlp.Main$CuiListener error
     SEVERE: The server rejected the connection:
     java.lang.Exception: The server rejected the connection:
     at hudson.remoting.Engine.onConnectionRejected(Engine.java:258)
     at hudson.remoting.Engine.run(Engine.java:233) 
```

在尝试将奴隶连接到詹金斯的主人时，我遇到了上述错误。我收到此错误，因为我将主人设为静态。（IP）。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T13:24:07.533

JNLP 从属连接问题通常是由于 Jenkins 全局配置中的“Jenkins URL”设置不正确。请验证。

如果设置正确，我认为您需要认真考虑是否有某些东西阻止了您的 Windows 从站和 Linux 主站之间的连接。是否可以在一台或两台主机上安装防火墙？

如果有防火墙，您可能希望首先为 JNLP 连接设置一个固定端口，然后将 Linux 主服务器上的防火墙配置为接受到该端口的入站连接，并将 Windows 防火墙配置为接受到该端口的出站连接。

我可以向您展示的第一部分：转到 Jenkins master、Manage Jenkins、System Configuration。选中“激活安全性”复选框。

将出现一个新部分。选中“JNLP 从代理的 TCP 端口”框并设置所需的任何空闲端口号。请注意，非 root 进程不能使用 1024 以下的端口，因此您应该选择高于 1024 的端口。端口号是 16 位无符号整数，因此最大值为 65535。

关于防火墙配置的第二部分我无法帮助您。如何允许访问 JNLP 端口完全取决于您的 master 和 slave 上的防火墙软件。有关详细信息，请参阅它们的手册。

如果还是不行，建议你用`tcpdump host demo.sigmainfo.in`看看slave是不是真的把包发到了正确主机的正确接口上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-25T20:29:11.347

有了一个 Windows 主机和 mac jenkins 从机，我得到了；

```
 java.lang.exception: the serverrejected the connection: None of the protocols were accepted 
```

因为我更改了我们机器的凭据并且没有通知詹金斯。由于错误似乎与问题相去甚远，我想我会为未来的自己发帖。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-22T19:31:17.773

曾经，我有这个错误，因为我已经建立了连接，所以检查你的连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-12T21:23:01.077

我有同样的错误日志。但我的设置不同。我让詹金斯大师在我的本地电脑上运行。并配置为使用 kubernetes jenkins 插件在 docker-for-mac 本地 pc 中为 jenkins slave 使用 kubernetes pod。

我不得不将 tcp 代理的固定端口更改为 8888。詹金斯 -> 管理詹金斯 -> 配置全局安全 -> 代理 -> 固定 8888 我不确定问题是否是奴隶只能尝试连接到这个端口，但这解决了问题。

# qt - QWidget透明背景（但不是孩子）

> ID：11688750
> 
> 赞同：3
> 
> 时间：2012-07-27T13:28:53.103
> 
> 标签：qt, background, qwidget

我有一个 QWidget，它的布局中包含 a`QPixmap`和 a `QComboxBox`。我想将小部件的背景设置为透明（但我想正常显示`QPixmap`和`QComboBox`）。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-07-18T12:26:00.360

你可以使用属性

```
widget->setAttribute(Qt::WA_NoSystemBackground); 
```

[Qt 文档](http://doc.qt.io/qt-5/qt.html#WidgetAttribute-enum)：

> 表示小部件没有背景，即小部件接收到绘制事件时，不会自动重新绘制背景。注意：与 WA_OpaquePaintEvent 不同，新暴露的区域永远不会被背景填充（例如，在第一次显示窗口后，用户可以“透过”它看到，直到应用程序处理绘制事件）。该标志由小部件的作者设置或清除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:43:25.760

这在 QWidget 文档中得到了很好的解释：http: [//doc.qt.io/qt-5/qwidget.html#transparency-and-double-buffering](http://doc.qt.io/qt-5/qwidget.html#transparency-and-double-buffering)

# php - 在 Android 中如何创建 web 服务以在 phpmyadmin 中存储数据？

> ID：11688751
> 
> 赞同：1
> 
> 时间：2012-07-27T13:28:52.273
> 
> 标签：php, android, web-services

我在 android 应用程序上开发，用户在他们的移动设备中填写表格，数据将存储在 phpmyadmin 中。我想为此在 php 中创建 web 服务。我是网络服务的新手。所以请为此建议一些教程。

请帮我找到这个..提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:35:14.847

PhpMyAdmin 只是数据库（MySQL）管理的前端。您不能在 phpMyAdmin 中存储数据。尝试使用 Kohana 或 Yii 框架来创建简单的 Web 服务。

# java - 使用平面 DOM 解析器在 java 中使用 XML 解析返回 Null 值

> ID：11688757
> 
> 赞同：0
> 
> 时间：2012-07-27T13:29:33.413
> 
> 标签：java, xml, parsing

我试图使用平面 DOM 解析器在 java 中解析 collada(.dae) 文件。当我尝试获取价值时，它返回 null。我尝试了其他讨论的答案和建议，但没有成功。我使用的代码如下。

```
for(int k1=0;k1<meshlist.getLength();k1++) {
    Element geometryItr1 = (Element)geometrylist.item(k);

    NodeList trianglelist = geometryItr1.getElementsByTagName("triangles");

    //System.out.println("Triangles length is " + trianglelist.getLength());     

        for(int o=0;o<trianglelist.getLength();o++) {

            Element trichildnodes = (Element) trianglelist.item(o);
            NodeList inputs = trichildnodes.getElementsByTagName("input");
        NodeList p = trichildnodes.getElementsByTagName("p");
        Element ppp = (Element) p.item(0);
        System.out.println("Node Value " + ppp.getNodeValue());
        System.out.println(inputs.getLength() + "Input length");

        for(int in=0;in<inputs.getLength();in++) {

            Element inn = (Element) inputs.item(in);
            System.out.println(inn.getAttribute("semantic") + " " + inn.getAttribute("source") + " Attributes");

        }

        //System.out.println(p.getLength() +  " P's length" );
        //System.out.println("P's content " + ppp.getFirstChild().getNodeValue());

    }   
} 
```

XML 非常大，我发布了一个我试图解析的部分。

```
<mesh>
  <source> </source>
  <source> </source>
  <source> </source>
  <triangles>
    <input />
    <input />
    <input />
    <p> 24 262 2 72 72 72 72 2222 8198219  </p>
  <triangles>
  <triangles>
    <input />
    <input />
    <input />
    <p> 24 262 2 72 72 72 72 2222 8198219  </p>
  <triangles>
  <triangles>
    <input />
    <input />
    <input />
    <p> 24 262 2 72 72 72 72 2222 8198219  </p>
  <triangles>
  <triangles>
    <input />
    <input />
    <input />
    <p> 24 262 2 72 72 72 72 2222 8198219  </p>
  <triangles>
</mesh> 
```

我试图获得`<p>`. 除了获得 p 的值外，一切正常。但是当我调试时，我可以看到这些值，它与第一个孩子相关联。我什至尝试使用 firstChild。我完全迷失了试图找出解决方案的解析。请有人帮我找到关于如何获得 p 值的解决方案？

当我改用 getTextContent 时，我得到如下输出：

```
NodeValue null
NodeValue 24 262 2 72 72 72 72 2222 8198219
NodeValue null 
```

两个标签的输出为空白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T15:21:15.087

我建议使用`javax.xml.xpath`自 Java SE 5 起在 JDK/JRE 中可用的 API 来简化 XML 文档的处理：

```
package forum11688757;

import java.io.File;
import javax.xml.parsers.*;
import javax.xml.xpath.*;
import org.w3c.dom.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document document = db.parse(new File("src/forum11688757/input.xml"));

        XPathFactory xpf = XPathFactory.newInstance();
        XPath xpath = xpf.newXPath();
        NodeList nodeList = (NodeList) xpath.evaluate("/mesh/triangles/p", document, XPathConstants.NODESET);
        for(int x=0; x<nodeList.getLength(); x++) {
            System.out.println(nodeList.item(x).getTextContent());
        }
    }

} 
```

**输入.xml**

```
<mesh>
  <source> </source>
  <source> </source>
  <source> </source>
  <triangles>
    <input />
    <input />
    <input />
    <p> 24 262 2 72 72 72 72 2222 8198219  </p>
  </triangles>
  <triangles>
    <input />
    <input />
    <input />
    <p> 24 262 2 72 72 72 72 2222 8198219  </p>
  </triangles>
  <triangles>
    <input />
    <input />
    <input />
    <p> 24 262 2 72 72 72 72 2222 8198219  </p>
  </triangles>
  <triangles>
    <input />
    <input />
    <input />
    <p> 24 262 2 72 72 72 72 2222 8198219  </p>
  </triangles>
</mesh> 
```

**输出**

```
 24 262 2 72 72 72 72 2222 8198219  
 24 262 2 72 72 72 72 2222 8198219  
 24 262 2 72 72 72 72 2222 8198219  
 24 262 2 72 72 72 72 2222 8198219 
```

**更新**

您还可以`p`使用以下代码行获取元素。您需要小心，因为它会获取所有`p`元素，而不仅仅是`/mesh/triangles/p`路径中的元素

```
NodeList nodeList = document.getElementsByTagName("p"); 
```

以下方法将始终为您提供您正在寻找的数据，即使`p`后来在文档中的其他位置添加了元素。

```
NodeList nodeList = (NodeList) xpath.evaluate("/mesh/triangles/p", document, XPathConstants.NODESET); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:52:14.780

`nodeValue()`of an被[记录](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/Node.html)`Element`为空。

相反，您可能想调用[getTextContent()](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/Node.html#getTextContent%28%29)。但请注意，它有自己的特性（如果您在树的根部调用它，它将连接树中所有元素的文本）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T14:23:09.483

如果您不需要它们，则不必遍历先前的节点。例如，它是如何打印`<p>`标签中的所有文本内容：

```
 File xmlPath = new File("test.xml");

    DocumentBuilderFactory fabrique = DocumentBuilderFactory.newInstance();
    fabrique.setCoalescing(true);
    fabrique.setIgnoringElementContentWhitespace(true);

    DocumentBuilder constructeur = fabrique.newDocumentBuilder();

    Document document = constructeur.parse(xmlPath);  
    document.setXmlVersion("1.0");
    Element racine = document.getDocumentElement();
    NodeList liste = racine.getElementsByTagName("p");

    for(int i=0; i<liste.getLength(); i++) {
        Element e = (Element)liste.item(i);  
        System.out.println(e.getFirstChild().getTextContent());
    } 
```

您可以使用它并详细说明来获得您想要的我猜。如果你想要属性值，只需使用：`e.getAttribute("att_name")`。

# c# - 不能嵌入。改用适用的接口

> ID：11688761
> 
> 赞同：62
> 
> 时间：2012-07-27T13:29:40.783
> 
> 标签：c#

我正在尝试将照片添加到 Excel 电子表格但不断收到以下错误？

> 错误 1 ​​无法嵌入互操作类型“Microsoft.Office.Interop.Excel.ApplicationClass”。请改用适用的接口。

应用程序类（）；在下面的代码行中用红色下划线：

> xlApp = new Excel.ApplicationClass();

有人可以请告诉我我该如何解决这个问题吗？

```
using Excel = Microsoft.Office.Interop.Excel;
using Microsoft.Office.Core;

private void btnWriteSpreedSheet_Click(object sender, EventArgs e)
        {
            Excel.Application xlApp;
            Excel.Workbook xlWorkBook;
            Excel.Worksheet xlWorkSheet;
            object misValue = System.Reflection.Missing.Value;

            xlApp = new Excel.ApplicationClass(); //This is where the problem is??????
            xlWorkBook = xlApp.Workbooks.Add(misValue);
            xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);

            //add some text 
            xlWorkSheet.Cells[1, 1] = "http://csharp.net-informations.com";
            xlWorkSheet.Cells[2, 1] = "Adding picture in Excel File";

            xlWorkSheet.Shapes.AddPicture("C:\\csharp-xl-picture.JPG", Microsoft.Office.Core.MsoTriState.msoFalse, Microsoft.Office.Core.MsoTriState.msoCTrue, 50, 50, 300, 45);

              xlWorkBook.SaveAs("csharp.net-informations.xls", Excel.XlFileFormat.xlWorkbookNormal, misValue, misValue, misValue, misValue, Excel.XlSaveAsAccessMode.xlExclusive, misValue, misValue, misValue, misValue, misValue);
            xlWorkBook.Close(true, misValue, misValue);
            xlApp.Quit();

            releaseObject(xlApp);
            releaseObject(xlWorkBook);
            releaseObject(xlWorkSheet);

            MessageBox.Show ("File created !");
        }

        private void releaseObject(object obj)
        {
            try
            {
                System.Runtime.InteropServices.Marshal.ReleaseComObject(obj);
                obj = null;
            }
            catch (Exception ex)
            {
                obj = null;
                MessageBox.Show("Unable to release the Object " + ex.ToString());
            }
            finally
            {
                GC.Collect();
            }
        } 

    } 
```

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2012-07-27T13:32:28.090

在您的项目中，展开“参考”，找到 Microsoft Office 互操作参考。右键单击它并选择属性，然后将“嵌入互操作类型”更改为`false`.

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2013-05-13T15:33:27.437

正如[MSDN 博客文章](https://web.archive.org/web/20130321052626/http://blogs.msdn.com/b/mshneer/archive/2009/12/07/interop-type-xxx-cannot-be-embedded-use-the-applicable-interface-instead.aspx)中所解释的那样，除了禁用“嵌入互操作类型”之外，您还可以更改

```
xlApp = new Excel.ApplicationClass(); 
```

进入

```
xlApp = new Excel.Application(); 
```

虽然`Excel.Application`是一个接口，但我们可以实例化它，因为它装饰有 CoClass 属性，如其他 SO 答案中所述：[https ://stackoverflow.com/a/11039870/501196](https://stackoverflow.com/a/11039870/501196)

使用这种方法 (Embed Interop Types = true) 的优点是您将需要在项目中部署更少的文件，并且嵌入式类型将仅包含您的应用程序实际使用的方法和类型。当您使用外部互操作程序集时，您将在那里导入引用库公开的所有类型和方法。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-06-25T08:13:38.700

找到 Microsoft.Office.Interop.Excel Reference 并右键单击并更改“Embed Interop Types”状态如果它是真的。

# c# - 无法在新的浏览器窗口中打开我的 wpf 浏览器应用程序的第二页？

> ID：11688764
> 
> 赞同：0
> 
> 时间：2012-07-27T13:29:50.857
> 
> 标签：c#, .net, wpf

我是 wpf 的新手。我正在 wpf 中做一个浏览器应用程序，我想知道我是否可以在新的浏览器窗口中打开我的第二页。

我可以使用 system windows diagnostics.process 语句打开一个新的浏览器窗口，并且我也可以加载我的项目，但不能加载其中所需的页面。

我还可以像使用 uri 的应用程序一样打开我想要的页面。

但我想要的是两者的混合体，我找不到任何适合我目的的东西。提前谢谢小伙伴们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:39:30.797

你可以使用这个代码

```
1\. Add a new window NewWindow  

2\. var newWindow= new NewWindow();
newWindow.Show(); // works

//Or use ShowDialog, if parant wait close of child window
newWindow.ShowDialog(); 
```

# c++ - OpenCV 2.4.2 calcOpticalFlowPyrLK 找不到任何点

> ID：11688767
> 
> 赞同：2
> 
> 时间：2012-07-27T13:30:00.047
> 
> 标签：c++, linux, opencv, opticalflow

我在 Linux 上使用 OpenCV 2.4.2。我正在用 C++ 编写。我想跟踪简单的对象（例如白色背景上的黑色矩形）。首先，我使用 goodFeaturesToTrack，然后使用 calcOpticalFlowPyrLK 在另一个图像上找到这些点。问题是 calcOpticalFlowPyrLK 没有找到这些点。

我发现在 C 中执行此操作的代码在我的情况下不起作用：http: [//dasl.mem.drexel.edu/~noahKuntz/openCVTut9.html](http://dasl.mem.drexel.edu/~noahKuntz/openCVTut9.html)

我已将其转换为 C++：

```
int main(int, char**) {
    Mat imgAgray = imread("ImageA.png", CV_LOAD_IMAGE_GRAYSCALE);
    Mat imgBgray = imread("ImageB.png", CV_LOAD_IMAGE_GRAYSCALE);
    Mat imgC = imread("ImageC.png", CV_LOAD_IMAGE_UNCHANGED);

    vector<Point2f> cornersA;

    goodFeaturesToTrack(imgAgray, cornersA, 30, 0.01, 30);

    for (unsigned int i = 0; i < cornersA.size(); i++) {
        drawPixel(cornersA[i], &imgC, 2, blue);
    }

    // I have no idea what does it do
//    cornerSubPix(imgAgray, cornersA, Size(15, 15), Size(-1, -1),
//            TermCriteria(TermCriteria::COUNT + TermCriteria::EPS, 20, 0.03));

    vector<Point2f> cornersB;
    vector<uchar> status;
    vector<float> error;

    // winsize has to be 11 or 13, otherwise nothing is found
    int winsize = 11;
    int maxlvl = 5;

    calcOpticalFlowPyrLK(imgAgray, imgBgray, cornersA, cornersB, status, error,
            Size(winsize, winsize), maxlvl);

    for (unsigned int i = 0; i < cornersB.size(); i++) {
        if (status[i] == 0 || error[i] > 0) {
            drawPixel(cornersB[i], &imgC, 2, red);
            continue;
        }
        drawPixel(cornersB[i], &imgC, 2, green);
        line(imgC, cornersA[i], cornersB[i], Scalar(255, 0, 0));
    }

    namedWindow("window", 1);
    moveWindow("window", 50, 50);
    imshow("window", imgC);

    cvWaitKey(0);

    return 0;
} 
```

> [图片A： http](http://oi50.tinypic.com/14kv05v.jpg) ://oi50.tinypic.com/14kv05v.jpg
> 
> [图片B： http](http://oi46.tinypic.com/4l3xom.jpg) ://oi46.tinypic.com/4l3xom.jpg
> 
> [图片C： http](http://oi47.tinypic.com/35n3uox.jpg) ://oi47.tinypic.com/35n3uox.jpg

我发现它仅适用于 winsize = 11。我尝试在移动矩形上使用它来检查它与原点的距离。它几乎没有检测到所有四个角。

```
int main(int, char**) {
    std::cout << "Compiled at " << __TIME__ << std::endl;

    Scalar white = Scalar(255, 255, 255);
    Scalar black = Scalar(0, 0, 0);
    Scalar red = Scalar(0, 0, 255);
    Rect rect = Rect(50, 100, 100, 150);

    Mat org = Mat(Size(640, 480), CV_8UC1, white);
    rectangle(org, rect, black, -1, 0, 0);

    vector<Point2f> features;
    goodFeaturesToTrack(org, features, 30, 0.01, 30);
    std::cout << "POINTS FOUND:" << std::endl;
    for (unsigned int i = 0; i < features.size(); i++) {
        std::cout << "Point found: " << features[i].x;
        std::cout << " " << features[i].y << std::endl;
    }

    bool goRight = 1;

    while (1) {

        if (goRight) {
            rect.x += 30;
            rect.y += 30;
            if (rect.x >= 250) {
                goRight = 0;
            }
        } else {
            rect.x -= 30;
            rect.y -= 30;
            if (rect.x <= 50) {
                goRight = 1;
            }
        }

        Mat frame = Mat(Size(640, 480), CV_8UC1, white);
        rectangle(frame, rect, black, -1, 0, 0);

        vector<Point2f> found;
        vector<uchar> status;
        vector<float> error;
        calcOpticalFlowPyrLK(org, frame, features, found, status, error,
                    Size(11, 11), 5);

        Mat display;
        cvtColor(frame, display, CV_GRAY2BGR);

        for (unsigned int i = 0; i < found.size(); i++) {
            if (status[i]  == 0 || error[i] > 0) {
                continue;
            } else {
                line(display, features[i], found[i], red);
            }
        }

        namedWindow("window", 1);
        moveWindow("window", 50, 50);
        imshow("window", display);

        if (cvWaitKey(300) > 0) {
            break;
        }
    }

} 
```

Lucas-Kanade 的 OpenCV 实现似乎无法跟踪二进制图像上的矩形。我做错了什么还是这个功能不起作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T20:49:24.767

Lucas Kanade 方法通过使用该区域中的梯度来估计该区域的运动。在这种情况下，梯度下降方法。因此，如果您在 x 和 y 方向上没有渐变，则该方法将失败。第二个重要说明是 Lucas Kanade 方程

E = sum_{winsize} (Ix * u + Iy * v * It)²

是强度恒定约束的一阶泰勒近似。

I(x,y,t) = I(x+u,y+v,t+1)

所以没有水平的方法（图像金字塔）的一个限制是图像需要是一个线性函数。在实践中，这意味着只能估计小的运动，取决于您选择的 winsize。这就是为什么你使用水平，线性化图像（它）。所以5级有点高，3级就够了。在您的情况下，顶级图像的大小为 640x480 / 2^5 = 20 x 15。

最后，您的代码中的问题是这一行：

```
 if (status[i]  == 0 || error[i] > 0) { 
```

您从 lucas kanade 方法返回的错误是生成的 SSD，这意味着：

误差 = sum(winSize) (I(x,y,0) - I(x+u,y+u,1)^2) / (winsize * winsize)

错误是 0 的可能性很小。所以最后你跳过所有功能。通过忽略错误，我有很好的经验，这只是一个信心衡量标准。有非常好的替代置信度度量，如前向/后向置信度。如果丢弃了太多的 feaurtes，您也​​可以通过忽略状态标志来开始实验

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T14:00:36.227

KLT 通过查找关于某个窗口的两组点之间的转换来进行点跟踪。窗口大小是一个区域，每个点将被追逐以匹配另一帧。

这是另一种基于梯度的算法，可以找到要跟踪的好特征。

通常，KLT 使用金字塔形方法，以便即使在大动作时也能保持跟踪。对于您指定的“窗口大小”，它可能在“maxLevel”时间使用。

从未在二进制图像上尝试过 KLT。问题可能出在 KLT 实现上，它以错误的方向开始搜索，然后就失去了分数。当您更改窗口大小时，搜索算法也会更改。在您的图片上，您最多只有 4 个兴趣点，并且只有 1 个像素。

这些是您感兴趣的参数：

```
winSize – Size of the search window at each pyramid level
maxLevel – 0-based maximal pyramid level number. If 0, pyramids are not used (single level), if 1, two levels are used etc.
criteria – Specifies the termination criteria of the iterative search algorithm (after the specified maximum number of iterations criteria.maxCount or when the search window moves by less than criteria.epsilon 
```

建议 ：

*   你试过自然图片吗？（例如两张照片），您将拥有更多要跟踪的功能。4个或更少是很难保持的。我会先试试这个

# php - 我应该将检查用户/通行证的代码放在最顶部还是不放在哪里？

> ID：11688769
> 
> 赞同：0
> 
> 时间：2012-07-27T13:30:18.407
> 
> 标签：php, security, authorization

目前我在第 4 行检查用户/密码，而前几行包含用于配置和连接数据库的 php 文件以及包含有用功能的文件...

我想知道在包含这些文件后检查权限是错误的还是最好将其放在顶部？

*   我也是 php 新手

> require_once('includes/config.php');
> require_once('includes/connection.php');
> require_once('includes/functions.php');
> checkAuthority();

PS: checkAuthority 函数里面有 session_start() ，虽然它现在不在顶部但仍然有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:37:37.990

不，除非您在包含的文件中执行某些仅应在用户登录时执行的操作，否则这并没有错。但看起来您包含了对用户进行身份验证所必需的脚本（例如数据库连接）。

此外，没有人说，`session_start()`必须在其他任何事情之前执行。在执行之前不能有任何其他输出`session_start()`（例如 an `echo`）。例如，如果您在 config.php 中回显某些内容，则`session_start()`in`checkAuthority()`将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:39:06.007

为了验证用户，您将需要您的数据库。为此，您似乎需要

`require_once('includes/config.php');`

`require_once('includes/connection.php');`

然后使用 checkAuthority 功能，你需要`require_once('includes/functions.php');`

So your placement is correct. There is no need to change anything.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-27T13:34:26.340

您可能正在使用数据库，并且您已经将这些数据库设置放在 config.php 中，因此您必须在包含一些常用文件后检查用户/密码。

# java - 每次我键入对象的方法时，Eclipse 都会出错

> ID：11688772
> 
> 赞同：1
> 
> 时间：2012-07-27T13:30:32.977
> 
> 标签：java, eclipse

例如，对于我当前的对象 tabPanelMain，我将在其后键入一个点，并期望看到一个包含所有对象可用方法的下拉菜单。相反，在编辑器上显示我当前选择的字符的标记消失了，这意味着我不知道我在哪里输入。更糟糕的是，保存和保存所有按钮停止工作。而且 ctrl-s 和菜单保存也不起作用。我无法保存我的 Eclipse 项目并且必须重新启动，从而丢失了我的工作。

有什么问题？这个问题以前从来不存在，但现在我无法像以前那样获得对象的方法。

我希望这足够清楚，如果没有，请问我问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:36:00.150

无法保存的保存问题是我以前遇到过的。

我不知道它为什么会发生，但对我来说，它有助于最小化然后再次最大化日食。不是修复，但至少是一种可以让您保存的解决方法。

从来没有听说过其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T09:26:37.703

I couldn't figure out what it was that was causing the problem, and while Martin Larsson provided an effective short term solution, I found it best to fresh install Eclipse.

The most annoying part about this was transferring my previous plug ins (like GWT, Subversion, etc) over to the new install. In the end I ended up re-installing them manually. If anyone could shed some light on how to keep previous plug ins, I'd like to hear how. Though I've heard this can be problematic with path urls in the files or something.

# ruby-on-rails - 存根图像 url 并返回图像

> ID：11688777
> 
> 赞同：2
> 
> 时间：2012-07-27T13:30:48.050
> 
> 标签：ruby-on-rails, carrierwave, fakeweb

如何存根对 url 的调用，例如[http://www.example.com/images/123.png](http://www.example.com/images/123.png)并返回一个名为 123.png 的图像？

我正在使用 Rails 3.2，Carrierwave。我试过 Fakeweb，但有点难过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T03:27:11.310

经过几个小时的研究，结果很简单：

```
FakeWeb.register_uri(:get, string_or_regxp_of_uri,
        body: SupportFiles.uploaded_file("square.jpg"),
        content_type: 'image/jpg') 
```

我的问题更棘手：
我正在测试 FB 头像，我得到了 whitelst 扩展

由于缺少扩展，上述代码将不起作用
（FB 头像 URL：[https](https://graph.facebook.com/123/picture) ://graph.facebook.com/123/picture ）

但是真正的 FB 头像会重定向到 CDN 或具有扩展名的东西
所以你需要添加另一个存根：

```
# Register a fake remote image
fake_avatar_uri = "https://graph.facebook.com/fake_avatar.jpg"
# Redirect to a fake uri
FakeWeb.register_uri(:get, %r|https://graph\.facebook\.com/|,
  status: ["301", "Moved Permanently"],
  location: fake_avatar_uri)
# Feed fake image for the fake uri
FakeWeb.register_uri(:get, fake_avatar_uri,
  body: SupportFiles.uploaded_file("square.jpg"),
  content_type: 'image/jpg') 
```

SupportFiles 模块（不是我自己写的：P）：

```
require 'rack/test/uploaded_file'

module SupportFiles
  extend ActiveSupport::Concern

  included do
    let(:an_image) do
      open_file("square.jpg")
    end
  end

  def open_file(filename)
    File.open(support_file_path(filename))
  end

  # idea stolen from ActionDispatch::TestProcess#fixture_file_upload
  def uploaded_file(filename)
    Rack::Test::UploadedFile.new(support_file_path(filename))
  end
  module_function :uploaded_file

  protected

  def support_file_path(filename)
    Rails.root.join("spec/support/files", filename)
  end
  module_function :support_file_path

end 
```

# android - 当我在 textView 上放一个长字符串时，为什么有些字符看起来像这些照片？

> ID：11688782
> 
> 赞同：1
> 
> 时间：2012-07-27T13:31:01.267
> 
> 标签：android, textview

我在 Galaxy S2 上测试，没有问题。但是有些设备看起来像这些屏幕截图-三星 Galaxy Note-。

我该怎么办？我找不到任何关于它的话题？

![在此处输入图像描述](../Images/cb30fb55591cb5c5d988a4948f488d01.png)

![在此处输入图像描述](../Images/197d7179f0e95aa050adea1d5079e444.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:06:24.773

```
<TextView ...
....
android:ellipsize="none"
..></TextView> 
```

您需要将该文本视图设置`ellipsize`为无，并且不会有“...”

第二件事只有在您将 textview 设置为 时才会发生`SingleLine = true`，因此如果您想根据文本大小将 textview 调整为多行，请删除单行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:33:47.393

这是因为 textView 的宽度更小，并且您尝试添加更多字符，1) 尝试为 textView 添加更多宽度，您可以[在此处查看](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3aminWidth)如何设置宽度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:57:39.267

那么你可以使用`android:layout_width = "wrap_content"`.

或者，您可以使用`android:layout_width = "45dp"`（或您定义的宽度）并设置`android:maxLines = "2"`. 这会将测试包含在两行中，您将找到您要的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T07:00:36.107

您可以在定义 textView 的 java 代码中声明它，而不是在 XMl 文件中使用 android:singleLine。

```
text.setSingleLine(true); 
```

或在 XML 文件中

```
 android:singleLine="true"
        android:ellipsize="none" 
```

# c# - 将 ControlTemplate 应用于窗口时，错误模板不起作用

> ID：11688790
> 
> 赞同：1
> 
> 时间：2012-07-27T13:31:23.010
> 
> 标签：c#, wpf, wpf-controls, controltemplate, errortemplate

我有一个带有 App.xaml、MainWindow.xaml 和 Person 类的简单应用程序。当我没有指定模板时，我的 ValidateOnDataErrors 工作得很好，当它出错时在我的文本框周围放置一个红色边框。但是，只要我在 MainWindow.xaml 的 Window 标记中插入“ Template="{StaticResource WindowTemplate}" '，该字段仍然有效，但红色边框消失了。

应用程序.xaml：

```
<Application x:Class="WpfPOC.App"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         StartupUri="MainWindow.xaml">
<Application.Resources>
    <ControlTemplate TargetType="Window" x:Key="WindowTemplate">
        <Grid Background="{TemplateBinding Background}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Control x:Name="FocusCatcher"></Control>
            <TextBlock>Menu Section</TextBlock>
            <ContentPresenter Grid.Row="1" />
            <StatusBar Height="23" VerticalAlignment="Bottom" Grid.Row="2">
                <TextBlock Text="Current Editing Mode" />
            </StatusBar>
        </Grid>
    </ControlTemplate>
</Application.Resources>
</Application> 
```

* * *

MainWindow.xaml ：

```
<Window x:Class="WpfPOC.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:data="clr-namespace:WpfPOC"
    Template="{StaticResource WindowTemplate}"
    Title="MainWindow" 
    Height="350" 
    Width="525">
<Window.Resources>
    <data:Person x:Key="myDataSource" Name="Joe"/>
</Window.Resources>
<Grid>
    <TextBox Height="23" Width="120" Text="{Binding Source={StaticResource myDataSource}, Path=Name, ValidatesOnDataErrors=True}" />
</Grid>
</Window> 
```

* * *

个人.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;

namespace WpfPOC
{
public class Person : IDataErrorInfo
{
    public string Name { get; set; }

    #region IDataErrorInfo Members

    public string Error
    {
        get { return string.Empty; }
    }

    public string this[string columnName]
    {
        get { return "Simulated error"; }
    }

    #endregion
}
} 
```

* * *

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T14:50:17.043

发生这种情况是因为用于显示验证错误的默认 ControlTemplate（在控件周围绘制红色边框）使用 AdornerLayer。

您已经为整个 Window 创建了一个新的 ControlTemplate 并省略了 AdornerDecorator（Window 的默认 ControlTemplate 提供）

因此，只需使用 AdornerDecorator 包装您的新 ControlTemplate，如下所示：

```
<ControlTemplate TargetType="Window" x:Key="WindowTemplate">
    <AdornerDecorator>
        <Grid Background="{TemplateBinding Background}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Control x:Name="FocusCatcher"></Control>
            <TextBlock>Menu Section</TextBlock>
            <ContentPresenter Grid.Row="1" />
            <StatusBar Height="23" VerticalAlignment="Bottom" Grid.Row="2">
                <TextBlock Text="Current Editing Mode" />
            </StatusBar>
        </Grid>
    </AdornerDecorator>
</ControlTemplate> 
```

# html - 另一个带有 div 的图像内的 CSS 图像

> ID：11688800
> 
> 赞同：0
> 
> 时间：2012-07-27T13:31:52.137
> 
> 标签：html, css

我创建了一个文本，我希望它在图像内（不再重复）。我希望将其放置在中心的另一个图像中，所有四个侧面，而不仅仅是两侧。这是代码。它就像背景更大的图像（500x500），前景图像（250x250）和不透明度前景图像顶部的文本。

CSS：

```
div.background
{
    width:500px; 
    height:500px;
    display:block;
    margin-left:auto;
    margin-right:auto;
    background-color:LimeGreen;
}

div.box
{
    margin:5px;
    width:250px;
    height:250px;
    background-color:white;
    border:5px dotted white;
    opacity:0.5;
} 
```

HTML

```
 <div class="background">
        <div class="box">
            <p>image inside another image</p>
        <br />
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:37:55.597

像这样的东西？[http://jsfiddle.net/eE7zV/1/](http://jsfiddle.net/eE7zV/1/)

# c - 编译错误的麻烦

> ID：11688801
> 
> 赞同：0
> 
> 时间：2012-07-27T13:31:57.783
> 
> 标签：c, pointers, network-programming, compiler-errors

我遇到了一些我无法弄清楚的编译错误，尽管我确信它们很愚蠢，但我无法通过其他渠道找到对我有很大帮助的答案。

问题1：（这些是TCP协议的一部分）

```
error: ‘TH_SYN’ undeclared (first use in this function)
error: ‘TH_ACK’ undeclared (first use in this function)

tcp.tcph_flags = TH_SYN;
tcp.tcph_flags = TH_ACK; 
```

问题2：

```
error: conversion to non-scalar type requested

const int one = 1;
char buffer[PCKT_LEN];
struct sockaddr_in sin;
struct ipheader ip;
struct tcpheader tcp;

ip = (struct ipheader) buffer;                      /* ERROR POINTS HERE */
tcp = (struct tcpheader) buffer + ip.iph_ihl *4;    /* AND HERE */ 
```

问题3：

```
warning: assignment makes integer from pointer without a cast

case 'i': dip = inet_addr(optarg);
          dstip = (optarg);  /* ERROR POINTS TO THIS LINE */
          break; 
```

现在，我希望我已经复制了足够多的有关错误的相关信息，以便您能够提供帮助，但如果我遗漏了一些内容，请告诉我。对于问题 1，我相信我缺少某种头文件，但我不知道是哪个。问题 2 和 3 是指针问题，但我不确定它们为什么不正确。提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T13:34:43.733

*   对于第一个问题，包括定义`TH_SYN`和的标题`TH_ACK`。在我的系统上`netinet/tcp.h`
*   对于第二个问题，把`ipheader`和`tcpheader`变成指针
*   对于第三个问题，我认为您需要一个`strtoul`但我不确定

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T13:36:12.113

对于问题 1，您需要

```
#include <netinet/tcp.h> 
```

对于问题 2，`struct ipheader`应该`struct ipheader *`在您的声明和演员表中，以及`struct tcpheader`应该是`struct tcpheader *`

对于问题3，optarg是一个指针，需要解引用，所以引用为`*optarg`

# php - 为什么使用 jQuery 和 PHP 的多项选择自动完成功能不起作用？

> ID：11688802
> 
> 赞同：1
> 
> 时间：2012-07-27T13:32:00.100
> 
> 标签：php, jquery, mysql, autocomplete

我想使用 jQuery、PHP 和 MySQL 在我的表单中使用[多个自动完成功能。](http://jqueryui.com/demos/autocomplete/#multiple-remote)但这对我不起作用。我有什么错误吗？

* * *

**HTML 代码：**

```
<input type="text" id="country" name="country" /> 
```

**jQuery代码：**

```
$( "#countries" )
        // don't navigate away from the field on tab when selecting an item
        .bind( "keydown", function( event ) {
            if ( event.keyCode === $.ui.keyCode.TAB &&
                $( this ).data( "autocomplete" ).menu.active ) {
                event.preventDefault();
            }
        })

        .autocomplete({
            source: function( request, response ) {
                $.getJSON( "process/find_countries.php", {
                    term: extractLast( request.term )
                }, response );
            },
            search: function() {
                // custom minLength
                var term = extractLast( this.value );
                if ( term.length < 2 ) {
                    return false;
                }
            },
            focus: function() {
                // prevent value inserted on focus
                return false;
            },
            select: function( event, ui ) {
                var terms = split( this.value );
                // remove the current input
                terms.pop();
                // add the selected item
                terms.push( ui.item.value );
                // add placeholder to get the comma-and-space at the end
                terms.push( "" );
                this.value = terms.join( ", " );
                return false;
            }
        }); 
```

**PHP 代码**

```
 $result = array();
    $term = strtolower($_GET["term"]);
    $sql = "SELECT title FROM tbl_countries WHERE title LIKE ?";
    $q = $db->prepare($sql);
    $q->execute(array('%'.$term.'%'));
    $rows = $q->rowCount();
    echo($rows);
    while ($r = $q->fetch())
    {
        array_push($result,array('label'=>$r['title'], 'value'=>$r['title']));
    }
    echo json_encode($result); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:41:10.997

在服务器的萤火虫响应中看到。以及为什么要做 echo($rows); ?

# asp.net-mvc-4 - 如何在 mvc4 中更改下拉列表选定项时进行回发

> ID：11688805
> 
> 赞同：5
> 
> 时间：2012-07-27T13:32:17.043
> 
> 标签：asp.net-mvc-4

我的页面中有一个下拉菜单。在下拉列表中选择一个值时，我希望更改标签文本。这是我的代码：

```
@model FND.Models.ViewLender

@{
    ViewBag.Title = "Change Lender";
 }

@using (Html.BeginForm())
{
    @Html.Label("Change Lender : ")
    @Html.DropDownList("Ddl_Lender", Model.ShowLenderTypes)
    @Html.DisplayFor(model => model.Description)
 } 
```

在更改下拉列表中的值时，我希望描述相应地更改。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T13:35:41.343

您可以首先将描述放入一个 div 并为您的下拉列表提供一个唯一的 id：

```
@model FND.Models.ViewLender

@{
    ViewBag.Title = "Change Lender";
}

@using (Html.BeginForm())
{
    @Html.Label("Change Lender : ")
    @Html.DropDownList("Ddl_Lender", Model.ShowLenderTypes, new { id = "lenderType" })
    <div id="description">
        @Html.DisplayFor(model => model.Description)
    </div>
} 
```

现在剩下的就是订阅`onchange`这个下拉列表的javascript事件并更新相应的描述。

例如，如果您使用 jQuery，这是非常简单的任务：

```
$(function() {
    $('#lenderType').change(function() {
        var selectedDescription = $(this).find('option:selected').text();
        $('#description').html(selectedDescription);
    });
}); 
```

* * *

话虽这么说，我可能误解了您的问题，并且此描述必须来自服务器。在这种情况下，您可以使用 AJAX 查询将返回相应描述的控制器操作。我们需要做的就是将此操作的 url 作为 HTML5 data-* 属性提供给下拉列表，以避免在我们的 javascript 文件中对其进行硬编码：

```
@Html.DropDownList(
    "Ddl_Lender", 
    Model.ShowLenderTypes, 
    new { 
        id = "lenderType", 
        data_url = Url.Action("GetDescription", "SomeController") 
    }
) 
```

现在`.change`如果我们触发 AJAX 请求：

```
$(function() {
    $('#lenderType').change(function() {
        var selectedValue = $(this).val();
        $.ajax({
            url: $(this).data('url'),
            type: 'GET',
            cache: false,
            data: { value: selectedValue },
            success: function(result) {
                $('#description').html(result.description);
            }
        });
    });
}); 
```

最后一步当然是让这个控制器动作根据所选值获取相应的描述：

```
public ActionResult GetDescription(string value)
{
    // The value variable that will be passed here will represent
    // the selected value of the dropdown list. So we must go ahead 
    // and retrieve the corresponding description here from wherever
    // this information is stored (a database or something)
    string description = GoGetTheDescription(value);

    return Json(new { description = description }, JsonRequestBehavior.AllowGet);
} 
```

# android - 编辑文本不接收文本

> ID：11688806
> 
> 赞同：0
> 
> 时间：2012-07-27T13:32:19.643
> 
> 标签：android, android-edittext

我试图解决它几个小时，但无法解决。发生的事情是我设置了这个editText，称为活动上的布局，并将其连接到活动上的我的变量，当您单击该字段时，它会打开可视键盘，但是当您按下一个键时，它会带您到类似浏览器的搜索屏幕，而不仅仅是更新edittext的文本。

在我的 xml 中，editText 是：

```
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:background = "@drawable/splash"
  android:orientation = "vertical">

  <EditText 
    android:id="@+id/searchEdit"
    android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:gravity="center_vertical"
android:singleLine="true"
android:textColor="@color/black"
android:textColorHint="@color/hintGray"
android:textSize="20dp"
android:paddingLeft="50dp"
android:paddingRight="10dp"
android:layout_marginTop="300dp"
android:background="@drawable/a01_text_box"
android:hint="Hint"
android:layout_gravity="center_horizontal"   />

  <ImageButton 
android:id="@+id/searchButton"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="@drawable/a01_boton_buscar"
android:layout_gravity="center_horizontal"  /> 

</LinearLayout> 
```

在我做这个的活动上

```
public class SubscribeActivity {

private EditText searchEdit;
private ImageButton searchButton;
private Context context;

protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.subscribe_main);

        this.context = this;

        findAndInitViews();

}

protected void findAndInitViews() {
    searchEdit = (EditText) findViewById(R.id.searchEdit);
    searchButton = (ImageButton) findViewById(R.id.searchButton);

    searchButton.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            String codeText = searchEdit.getText().toString();
            Toast.makeText(context, codeText, Toast.LENGTH_LONG).show();
        }
    });

}

} 
```

我仍然找不到不让它发生的方法。你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:47:39.047

看起来你实际上并没有在玩活动

这是错误的：

```
public class SubscribeActivity 
```

它应该是这样的：

```
public class SubscribeActivity extends Activity 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:57:49.693

尝试不同的方式。

```
 public class SubscribeActivity extends Activity{

    private EditText searchEdit;
    private ImageButton searchButton;

    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.subscribe_main);

    searchEdit = (EditText) findViewById(R.id.searchEdit);
    searchButton = (ImageButton) findViewById(R.id.searchButton);    
 }

searchButton.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        String codeText = searchEdit.getText().toString();
        Toast.makeText(SubscribeActivity.this, codeText, Toast.LENGTH_LONG).show();
    }
});

  }
 } 
```

请尝试以这种方式进行并让我知道结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:06:26.940

首先，我建议使用`getApplicationContext()`Activity 方法 - 而不是将 Activity 转换为您的 Context-Object。旁边你必须扩展`Activity`。我想知道您的代码正在运行...但我认为这是复制和粘贴错误。

您`onCreate(Bundle b)`应该是公开的而不是受保护的。

如果故障仍然存在，我将注释显示 EditText 不需要的代码。然后一步一步地重新包含代码。

# spring - 使用 Spring 数据和 QueryDSL 对 MongoDb 查询进行投影

> ID：11688807
> 
> 赞同：5
> 
> 时间：2012-07-27T13:32:22.777
> 
> 标签：spring, mongodb, projection, spring-data

我有一个 Spring MVC/Spring Data/Mongo DB 应用程序。我已经根据 spring 数据文档设置了我的环境，并且我的存储库工作正常（我可以使用谓词执行查询）

我想知道是否可以在进行投影时执行类型安全查询（使用 Spring Data 和 QueryDSL）（我只想要一个非常大的文档的几个字段）。

QueryDSL 文档为 Hibernate 提供了一个示例，但声明它可以在所有模块[QueryDSL 文档](http://www.querydsl.com/static/querydsl/2.1.0/reference/html/ch03.html)中完成（但我无法找到如何使用 Mongo 来完成）

这是休眠的代码片段

```
class CustomerDTO {

  @QueryProjection
  public CustomerDTO(long id, String name){
     ...
 }

 QCustomer customer = QCustomer.customer;
 JPQLQuery query = new HibernateQuery(session);
 List<CustomerDTO> dtos = qry.from(customer).list(new QCustomerDTO(customer.id,    customer.name)); 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:59:09.933

目前不支持此功能。随意将它的票添加到我们的[问题跟踪器](https://github.com/mysema/querydsl/issues)中。

Querydsl 的 Lucene 和 Mongodb 模块仅支持来自查询根的直接投影，但对于自定义投影，可以计算出一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T19:09:18.167

我刚刚建立了一个这样的投影：

```
Criteria c1 = Criteria.where("field.name").is("val")
Criteria projection = Criteria.where("field").is(1)
BasicQuery query = new BasicQuery(c1.getCriteriaObject(), projection.getCriteriaObject()) 
```

# javascript - 从现有数组创建数组

> ID：11688810
> 
> 赞同：0
> 
> 时间：2012-07-27T13:32:29.780
> 
> 标签：javascript, arrays, join

我想通过提取其他数组的日期来创建一个数组，然后用逗号将这些值分隔成一个字符串。

```
 array.push({date:created_at,username:user});
      for (i in array) {
      var combined=new array();
      combined = array[i].date;
                }   
      console.log(combined); 
```

我是 javascript 新手，很难在数组中学习。谢谢！谁能给我推荐一本关于javascript的好书？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:45:13.987

尝试这个

```
var originalArray = [{date:"2012-01-01", username: "first"}, {date:"2012-01-02", username: "second"}];

// First step: Get a dateArray with only the dates
var dateArray = [];
for (var i in originalArray) {
    dateArray.push(originalArray[i].date);
}   

// Or if you prefer to cut a few lines
// dateArray = originalArray.map(function(x) { return x.date; } );

// Second step: Get it as a comma separated string
var datesString = dateArray.join(",");

console.log(dateArray); // ["2012-01-01","2012-01-02"]
console.log(datesString); // 2012-01-01,2012-01-02 
```

最受欢迎的书籍之一是 Douglas Crockford 的“Javascript The Good Parts” [http://www.amazon.com/JavaScript-Good-Parts-Douglas-Crockford/dp/0596517742](https://rads.stackoverflow.com/amzn/click/com/0596517742)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:46:09.773

我个人偏爱 Javascript the Good 部分，但在编程书籍上有一个完整的社区 wiki。至于您的问题，如果要使用字符串，则需要对组合变量使用字符串而不是数组。

```
array.push({date:created_at,username:user});
var combined = array.map(function(a) { return a.date; }).join(", "); 
```

当然有更好的方法来做到这一点，但这只是一个可行的例子。通过与字符串连接，它隐式地将 array[i].date 转换为字符串，如果它还没有的话。

编辑：修正我的代码不那么糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:57:35.583

这是代码：

```
var firstArray = new Array(new Date(), "hello", "something", new Date());
var combined = new Array();

for(i in firstArray) {
   if(firstArray[i] instanceof Date) {
      combined[combined.length] = firstArray[i];
   }
 }

 var theString = combined.join(",");

 alert(combined.length);
 alert(theString); 
```

# c++ - 带有子控件的 Win32 自定义控件

> ID：11688811
> 
> 赞同：0
> 
> 时间：2012-07-27T13:32:35.503
> 
> 标签：c++, winapi, win32gui

我创建了一个包含子控件的自定义容器控件（所有者绘制等）。不幸的是，这些子控件永远不会更新（它们不会收到 WM_PAINT）

你知道问题出在哪里吗？窗口的创建

```
 hwnd = CreateWindowEx(
             WS_EX_CONTROLPARENT  , 
             _T("PopupControl"),
             _T("Popup Control"),
              WS_OVERLAPPED | WS_CLIPCHILDREN|WS_CLIPSIBLINGS,
             100,100,420,220  ,
             NULL,
             NULL, GetModuleHandle(0), NULL
           ); 
```

创建子控件

```
CreateWindowEx(0, L"button", TEXT("Type here"),
WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON, 
200,15,100,20, 
hwnd, NULL, GetModuleHandle(0), NULL); 
```

谢谢并恭祝安康，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T22:24:35.010

将`WS_CLIPCHILDREN|WS_CLIPSIBLINGS`样式添加到容器控件。

# android - 不能做 findViewById

> ID：11688814
> 
> 赞同：2
> 
> 时间：2012-07-27T13:32:43.943
> 
> 标签：android, xml, layout

我正在开发一个 ViewFlipper 项目。在这个 main.xml 文件中，我创建了一个 webview，但在我的 mainActivity 中无法访问它（通过 findViewById）。我可以连接按钮，但似乎我无法连接网络视图。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/previous"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="previous" />

    <Button
        android:id="@+id/next"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="next" />
</LinearLayout>

<ViewFlipper
    android:id="@+id/flipper"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <ImageView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:src="@drawable/ic_launcher" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#C0C0C0"
        android:gravity="center"
        android:orientation="vertical" >

        <WebView
            android:id="@+id/webView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#A0A0A0"
        android:gravity="center"
        android:orientation="horizontal" >

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:src="@drawable/ic_launcher" />
    </LinearLayout>
</ViewFlipper>

</LinearLayout> 
```

这是它的外观图片，如您所见，我只能通过按钮 + 脚蹼访问 web 视图！

[http://postimage.org/image/h3g6yr7r9/](http://postimage.org/image/h3g6yr7r9/)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:37:46.720

请参阅此处的文档[。](http://developer.android.com/reference/android/webkit/WebView.html)

像这样初始化webview：

`WebView webview = new WebView(this);`

`setContentView(webview);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:40:02.477

看来您以正确的方式使用它，
但我想我知道为什么它没有显示在自动完成建议框中：
从 Eclipse 菜单工具执行“干净”+“构建”操作：

检查

> 项目 -> 自动构建

然后点击：

> 项目->清洁

我确定项目重建后，webView1 的 id 会显示在自动完成框中。

# c# - C# Xml序列化

> ID：11688815
> 
> 赞同：1
> 
> 时间：2012-07-27T13:32:44.227
> 
> 标签：c#, xml-serialization

我有一个非常非常奇怪的问题。我想通过 xml 序列化一个对象。好的，所以我开始创建一个 XmlSerializer 并且没有错误 - 什么都没有。但是如果我反序列化......属性只是没有设置。另一个奇怪的事情是xml似乎没问题。

这是我的代码的一部分，其余的只是方法......

```
[XmlInclude(typeof(TestMapper))]
[XmlInclude(typeof(TestSource))]
[XmlInclude(typeof(TestTarget))]
public abstract class ElementBase : IElement
{
    [XmlIgnore]
    public IElement this[int index]
    {
        get
        {
            return Childs.ElementAt(index).Value;
        }
    }

    List<ElementBase> _childSerializable;
    [XmlArrayItem(typeof(ElementBase))]
    public List<ElementBase> ChildSerializable
    {
        get
        {
            _childSerializable = Childs.Select(x => x.Value).ToList();
            return _childSerializable;
        }
        set
        {
            _childSerializable = value;
            foreach (ElementBase element in _childSerializable)
                Childs.Add(element.Index, element);
        }
    }

    protected Dictionary<object, ElementBase> _childs;
    [XmlIgnore]
    public Dictionary<object, ElementBase> Childs
    {
        get
        {
            return _childs ?? (_childs = new Dictionary<object ,ElementBase>());
        }
        set
        {
            _childs = value;
        }
    }

    object _index = -1;
    public object Index
    {
        get
        {
            return _index;
        }
        set
        {
            _index = value;
        }
    } 
```

这就是我序列化的方式：

```
TestTarget target = new TestTarget();
TestSource source = new TestSource() { Value = "Hallo", Index = 1};
TestSource source1 = new TestSource() { Value = " Welt", Index = 2};
TestMapper mapper = new TestMapper();
target.ConnectChild(mapper);
mapper.ConnectChild(source);
mapper.ConnectChild(source1);
target.Execute();

System.IO.MemoryStream memStream = new System.IO.MemoryStream();
XmlSerializer serializer = new XmlSerializer(target.GetType());
serializer.Serialize(memStream, target);

memStream.Position = 0;

object obj = serializer.Deserialize(memStream);
target = obj as TestTarget;

memStream.Position = 0;
Console.ReadKey(); 
```

好的，现在这是最终结果：

```
<?xml version="1.0"?>
<TestTarget xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <ChildSerializable>
    <ElementBase xsi:type="TestMapper">
      <ChildSerializable>
        <ElementBase xsi:type="TestSource">
          <ChildSerializable />
          <Index xsi:type="xsd:int">1</Index>
          <Value xsi:type="xsd:string">Hallo</Value>
        </ElementBase>
        <ElementBase xsi:type="TestSource">
          <ChildSerializable />
          <Index xsi:type="xsd:int">2</Index>
          <Value xsi:type="xsd:string"> Welt</Value>
        </ElementBase>
      </ChildSerializable>
      <Index xsi:type="xsd:int">-1</Index>
    </ElementBase>
  </ChildSerializable>
  <Index xsi:type="xsd:int">-1</Index>
</TestTarget> 
```

所以有没有人知道发生了什么错误。我已经工作了几个小时，但我找不到任何东西:((

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:21:43.897

这似乎与您使用`List<ElementBase>`. 如果您使用一个简单的数组，如`ElementBase[]`，则这些项目将被反序列化。

[这里](https://stackoverflow.com/questions/890316/xmlserializer-deserialize-isnt-deserializing-a-listt-correctly)有一些解释，但我觉得没有什么令人满意的。

# python - 如何在 OpenShift 上配置 Django？

> ID：11688819
> 
> 赞同：24
> 
> 时间：2012-07-27T13:33:02.120
> 
> 标签：python, django, openshift, redhat

我最近尝试在 OpenShift 上导出一个 Django 项目，但没有结果。我发现的唯一解决方案是“预建”解决方案（例如[https://github.com/openshift/django-example](https://github.com/openshift/django-example)）。

我花了几个小时试图让它适应我的项目，但我总是遇到内部服务器错误。

那么，如何在 openshift 上设置 django？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-27T19:02:42.240

我终于弄明白了。首先要做的是启动一个 openshift 应用程序并编辑 setup.py 文件：

```
rhc app create -a APPNAME -t python-2.6
cd APPNAME
vim setup.py 
```

您需要取消注释“install_requires=['Django>=1.3']”

然后你可以提交到服务器：

```
git commit -a -m "Initialization"
git push 
```

默认情况下，它会安装 django 1.4，但我认为您可以在 setup.py 中选择具有正确安装要求的另一个版本。无论如何，您必须在您的计算机和服务器上运行相同的 django 版本才能执行以下操作。

创建你的 django 项目：

```
cd wsgi
django-admin.py startproject PROJECTNAME 
```

然后您必须编辑文件应用程序，将整个内容替换为：

```
#!/usr/bin/python
import os, sys

os.environ['DJANGO_SETTINGS_MODULE'] = 'PROJECTNAME.settings'
sys.path.append(os.path.join(os.environ['OPENSHIFT_REPO_DIR'], 'wsgi',
    'PROJECTNAME'))

virtenv = os.environ['APPDIR'] + '/virtenv/'
os.environ['PYTHON_EGG_CACHE'] = os.path.join(virtenv, 'lib/python2.6/site-packages')
virtualenv = os.path.join(virtenv, 'bin/activate_this.py')

try:
    execfile(virtualenv, dict(__file__=virtualenv))
except IOError:
    pass

#
# IMPORTANT: Put any additional includes below this line.  If placed above this
# line, it's possible required libraries won't be in your searchable path
# 
from django.core.handlers import wsgi
application = wsgi.WSGIHandler() 
```

最后，您可以提交修改：

```
cd ..
git add .
git commit -a -m "Project Creation"
git push 
```

您应该会看到 django 欢迎页面。现在您可以编辑设置并导入您的 django 应用程序，而不会出现不需要的内容

# java - textView 不会显示小数

> ID：11688822
> 
> 赞同：2
> 
> 时间：2012-07-27T13:33:06.023
> 
> 标签：java, android, int, decimal

我的程序有问题，我的 textveiw 不会显示任何小数，这是发生了什么的分解。用户在 textEdit 中输入一个数字（另外我如何使 textedit 只接受数字和小数点？）该数字被转换为 int，发送到我的第二个活动，被 3600 潜水，然后显示在 textveiw 框中。问题是，当显示该数字时，它没有十进制值，例如，如果它小于 1，它将不显示任何内容，我该如何解决这个问题？我需要它至少达到第 1000 名。这是我的代码一活动1：

```
 public void sendMessage(View view) {
    // Do something in response to button
    Intent intent = new Intent(this, PayTracker.class);
    // Gather text from text boxes
    EditText editText = (EditText) findViewById(R.id.hourly_wage);
    //Create String from text
    String message1 = editText.getText().toString();
    //Convert String to Int
    int HW = 0;
    try{
        HW = Integer.valueOf(message1);
    }
    catch(NumberFormatException nfe){
        //do something else here
        //for e.g. initializing default values to your int variables
    }
    // Send Integers to PayTracker.java
    intent.putExtra(MESSAGE_HW, HW);
    // start new activity
    startActivity(intent); 
```

然后这是需要显示数字的活动2：

```
 public void sendMessage(View view) {
    // Receive messages from options page
    Intent intent = getIntent();
    int HW = intent.getIntExtra(Options.MESSAGE_HW, 0);
    // Calculate pay per second
    int PPS = 0;
    PPS = (HW/3600);

    // set textView
    TextView textView = (TextView) this.findViewById(R.id.yourpay);
    textView.setText(String.valueOf(PPS));
} 
```

任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:49:59.020

使用双打或浮点数。据我所知，除了你忘记了 5 除以 2 因为 int 是 2 而不是 2.5 之外，一切都应该工作。

照 gtumca 说的做，使用双打；多头只是更大的整数。

换句话说...活动1

```
try{
    HW = Double.valueOf(message1);
} 
```

活动二

```
//double HW = intent.getIntExtra(Options.MESSAGE_HW, 0);
double HW = intent.getDoubleExtra(Options.MESSAGE_HW, 0);
     // pay is rarely a round number
double PPS = HW / 3600; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:36:14.243

您正在使用`int`as 数据类型，因此您`int`仅获取值

```
double PPS = 0;
^^^^^^
instead of           
int PPS = 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T13:38:18.887

> 该数字被转换为 int

整数没有小数:)

至于 EditText 只接受数字：

[EditText，inputType 值 (xml)](https://stackoverflow.com/questions/2712761/edittext-inputtype-values-xml) 将其中一种类型设置为布局 xml 中的 EditText，例如：

```
android:inputType="number" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T13:54:48.823

您不应该使用 float 或 double 来保持如此高精度的数字。Float 和 double 由于它们的内部表示形式，不能准确地表示小数。如果您想要 1000 位精度（或更多），请检查[BigDecimal 。](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)

# jquery - 使用 jQuery 为事件创建多个票务详细信息

> ID：11688825
> 
> 赞同：0
> 
> 时间：2012-07-27T13:33:25.830
> 
> 标签：jquery

[请找到这里](http://www.acruxsolutions.in/demo/uploadtest.html)提到的链接

现在，当您单击添加票证时会生成多个 div，但是当您单击高级设置时，会为第一个 div 打开 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:41:03.583

代码示例：

```
<span class="fieldlabel"><label class="labeltext">Select Currency :</label></span>
    <span class="fieldinput"><div id="selectfield"><select>
            <option>Select Currency</option>
            <option>US DOLLAR</option>
            <option>CADIAN DOLLAR</option>                                              
    </select></div></span>

<span class="fieldlabel"><label class="labeltext">Select Ticket Format :</label></span>
    <span class="fieldinput"><div id="selectfield"><select>
            <option>Select Ticket Format</option>
                <option>QR CODE</option>
                <option>BAR CODE</option>                                               
    </select></div></span> 
```

**请注意，** `<div id="selectfield">`这`<div id="selectfield">`是重复 id 属性的示例。

HTML 中不允许有重复的 ID。重新编写代码以仅包含唯一的 id 值。如果您需要多个元素具有相同的“标记”，您可以使用可以包含多个值并且可以重复的类属性。

查看 jQuery 文档，它包含对按类值（即包含值的类属性）进行选择的非常好的支持，因为这是一种常用技术。这对你来说将是无价的。

您的代码中的逻辑是错误的，因为您有多个具有相同 id 的地方 - 这会导致您的重复并且无法访问您希望操作的特定项目。

# html - 我应该在我的网站上使用相对 URL 还是绝对 URL？

> ID：11688826
> 
> 赞同：4
> 
> 时间：2012-07-27T13:33:26.790
> 
> 标签：html, hyperlink

如果我不移动我的网站，为什么我应该使用绝对 URL 而不是相对的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:38:09.457

无论您是否将内容从一个文件夹移动到另一个文件夹，绝对 URL 都将起作用，但是每种语言都有一种以一种或另一种方式引用基本 URL 的方法。

例如，如果您将“test/1.html”作为 index.html 上的 URL，它将重定向到 /test/1.html，但是如果您将该链接复制到 /dom/index.html，它将重定向到 /dom/test /1.html

最好先使用基本 URL，然后使用相对 URL，例如 {BASE URL}/test/1.html

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:35:56.123

我倾向于使用相对，因为如果您对网站进行任何更改，相对 url 往往更具适应性。

如果您在谈论效率，则两者之间没有真正的区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:38:41.353

> 如果我不移动我的网站 [...]

这总有一天会出现。即使您只是将站点从一个文件夹移动到另一个文件夹，您也希望链接是相对的。你可能认为这永远不会发生，但安全总比后悔好。

# mysql - 如何从连接表上的多个 id 中选择最低 id

> ID：11688828
> 
> 赞同：1
> 
> 时间：2012-07-27T13:33:29.733
> 
> 标签：mysql

我在创建查询时遇到了小麻烦。我有两张桌子：

```
user_data
+----+---------+--------+
| id | mail    | etc... |
+----+---------+--------+
|  1 | 1@m.com | ...    |
|  2 | 2@m.com | ...    |
|  3 | 3@m.com | ...    |
+----+---------+--------+ 
```

```
contracts
+----+---------+--------+
| id | user_id | etc... |
+----+---------+--------+
|  1 |       1 | ...    |
|  2 |       2 | ...    |
|  3 |       1 | ...    |
|  4 |       1 | ...    |
|  5 |       3 | ...    |
+----+---------+--------+ 
```

如您所见，第一个表包含有关用户的数据，第二个表包含有关其合同的数据。关于一个用户的条目总是只有一个，但一个用户可以有多个合同。现在我需要找出所有用户，他们的**第一个**合同 id *（合同表中的最低 id）*和他们的电子邮件，如果它在 are 参数中。

到目前为止，我有这样的查询：

```
SELECT
  u.id as user_id,
  c.id as first_contract_id,
  u.mail as email
FROM
  user_data u
JOIN
  contracts c ON u.id = c.user_id
WHERE
  u.mail
IN (
  '1@me.com',
  '2@me.com',
  '3@me.com'
); 
```

现在我不知道如何`only the lowest contract ID`从这些结果中进行选择。帮助赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:37:42.383

```
select 
    u.id as user_id, 
    c.id as first_contract_id, 
    u.Mail as email 
from users as u inner join
(
    select min(id) as id,user_id from contracts 
    group by user_id
) as c
on  u.id = c.user_id 
WHERE 
      u.mail 
    IN ( 
      '1@me.com', 
      '2@me.com', 
      '3@me.com' 
    ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:35:40.513

```
SELECT
  u.id as user_id,
  min(c.id) as first_contract_id,
  u.Mail as email
FROM
  user_data u
JOIN
  contracts c ON u.id = c.user_id
WHERE
  u.mail IN ('1@me.com', '2@me.com', '3@me.com')
GROUP BY u.id 
```

如果您`group by`是用户，您可以使用`min`.

（并且MySQL选择不在组中的列没有问题）

# php - PHP，使用 strtotime 从日期时间变量中减去分钟？

> ID：11688829
> 
> 赞同：18
> 
> 时间：2012-07-27T13:33:40.407
> 
> 标签：php, strtotime

我需要从 PHP 中的日期时间变量中减去 45 分钟。

编码：

```
$thestime = '2012-07-27 20:40';
$datetime_from = date("Y-m-d h:i",strtotime("-45 minutes",strtotime($thestime)));
echo $datetime_from; 
```

返回结果`2012-07-27 07:55`。

不过应该是`2012-07-27 19:55`。我该如何解决？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-27T13:35:15.940

你应该做：

```
$datetime_from = date("Y-m-d H:i", strtotime("-45 minutes", strtotime($thestime))); 
```

代替意味着使用 24 小时格式`H`，`h`用前导零表示小时：`00`通过`23`.

您可以在[PHP 日期函数文档](http://php.net/manual/en/function.date.php)中阅读更多相关信息。

* * *

还有一些更流畅的面向对象的方法，例如[`DateTime::sub`](http://php.net/manual/ro/datetime.sub.php)：

```
$datetime_from = (new DateTime($thestime))->sub(DateInterval::createFromDateString('45 minutes'))->format('Y-m-d H:i') 
```

[`Carbon`](http://carbon.nesbot.com/)或者由扩展 PHP 内置类的库提供的更具表现力的方式`DateTime`：

```
$datetime_from = (new Carbon($thestime))->subMinutes(45)->format('Y-m-d H:i'); 
```

# php - 使用 chrome 中的 REST 客户端在 POST 后查看 php echo

> ID：11688832
> 
> 赞同：0
> 
> 时间：2012-07-27T13:33:44.773
> 
> 标签：php, google-chrome

我在 chrome 中使用休息客户端来手动发布数据。在 php 文件中，我会在阅读这篇文章时回显一个值。我在哪里可以查看 Chrome 开发工具中的回显数据？

# python - TixComboBox 子小部件在首次使用时未选择/设置为指定值

> ID：11688841
> 
> 赞同：0
> 
> 时间：2012-07-27T13:34:11.793
> 
> 标签：python, tkinter, tix

我有一个与我的程序`TixExFileSelectDialog`中的几个`Entry`对象相关联的；该对话框是动态配置的，以便所选文件与`Entry`正在使用的对话框中的文本匹配。但是，第一次打开对话框时，无论使用哪个`Entry`，它都只显示模式字符串，即使`Entry`已经有默认值。但是，如果我取消对话框然后重新打开它，它会显示正确的字符串。当我设置组合框`selection`和`value`选项（一个、另一个和两者）的任意组合以及将组合框的`variable`选项设置为`StringVar`. 我`TixComboBox`的功能有什么遗漏吗？

我目前正在使用的代码（带有一些重新格式化/等用于发布）：

```
from tkinter.tix import *

opts = {'path': 'C:\\'}

class ImportGUI(Frame):
    def _setfsd(self, directory='', pattern='*.xls', variable='', selection=None):
        "Reconfigures the ExFileSelectDialog to enable reusability."
        self.fsd.fsbox.config(directory=directory or opts['path'], # can't use opts['path'] as a default argument, because it could change.
                              pattern=pattern)

        self.fsd.fsbox.file['variable'] = variable

        if not variable:
            self.fsd.fsbox.file['value'] = selection or pattern # Defaults to the pattern, which is the behavior of a fresh ExFileSelectionBox.
        elif selection is not None:   # variable exists, but setting selection manually as well
            self.fsd.fsbox.file['value'] = selection

    def _selectdatafile(self):
        self._setfsd(selection='apple1.xls')
        self.fsd.popup()

    def _selectcodefile(self):
        self._setfsd(selection='apple2.xls')
        self.fsd.popup()

    def createWidgets(self):
        self.fsd = ExFileSelectDialog(self.master) # a top-level widget, so giving it the default root as master

        self.dfrow = Frame(self)
        self.cfrow = Frame(self)

        self.dfentry = Entry(self.dfrow)
        self.dfentry.pack(side='left')
        self.cfentry = Entry(self.cfrow)
        self.cfentry.pack(side='left')

        self.dfbtn = Button(self.dfrow, text='...', command=self._selectdatafile)
        self.dfbtn.pack(side='left')
        self.cfbtn = Button(self.cfrow, text='...', command=self._selectcodefile)
        self.cfbtn.pack(side='left')

        self.dfrow.pack()
        self.cfrow.pack()
        self.pack()

    def __init__(self, master=None):
        Frame.__init__(self, master)
        self.master.tk.eval('package require Tix')
        self.createWidgets()

if __name__ == '__main__': # for testing
    gui = ImportGUI()
    gui.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T18:08:38.263

事实证明，我一开始就不需要做任何这些，因为我可以使用`askopenfilename()`from[`tkinter.filedialog`](http://tkinter.unpythonic.net/wiki/tkFileDialog)来获得我想要的功能，使用当前操作系统的外观。Tix 就这么多。

（嗯，这不是我想要的，因为在 Windows 上看起来仍然有点过时，但它已经足够接近了。[IDLE 似乎也使用它，就此而言。] *）*

# html - Windows 上的 Safari 无法播放音频

> ID：11688842
> 
> 赞同：0
> 
> 时间：2012-07-27T13:34:13.613
> 
> 标签：html, audio, safari

我在一个可以在 IE 9、FF 和 Chrome 中正常播放的网站上有音频标签。它在 iPad 上的 Safari 上也能正常播放。但我刚刚将 Safari 下载到我的 Win 7 / 64 位机器上，无法让它播放音频。

```
<a href="#" onclick="document.getElementById('english').play()">ENGLISH
<audio id="english">
     <source  src="/Content/Audio/Parachute/T1S2(En).ogg"/>
     <source  src="/Content/Audio/Parachute/T1S2(En).mp3" />
     <source  src="/Content/Audio/Parachute/T1 Parachutes.wav"/>
</audio>
</a> 
```

我尝试将 type="audio/mpeg" 添加到 mp3 以获得 Safari 支持：

```
<source  src="/Content/Audio/Parachute/T1S2(En).mp3" type="audio/mpeg" />
<source  src="/Content/Audio/Parachute/T1S2(En).mp3" type="audio/mp3" /> 
```

但这仍然无法播放。作为最后的手段，我把 .wav 文件扔在那里，但它仍然无法播放。我的机器上没有安装 Quicktime，我希望不必下载它，因为我想不是每个用户都有 Quicktime。有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:33:05.933

对于 Windows 上的修复，需要 Quicktime，并且您必须首先放置 mp3。

Safari上的修复，需要在mp3上设置类型，所以

```
type="audio/mp3" 
```

这已经在所有版本的 Mac / Safari 和 Win / Safari 上清除了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T07:17:36.420

抱歉，但是当我添加时：

```
type = "audio/mp3" 
```

所以，我的问题并没有在 Safari 中消失。我有win7

# c# - 如何在不冻结 GUI 的情况下使用视频帧不断更新 contentcontrol？

> ID：11688849
> 
> 赞同：1
> 
> 时间：2012-07-27T13:34:31.800
> 
> 标签：c#, wpf, xaml, user-interface, contentcontrol

我有一个 VideoRenderer 类，它继承了一个 Image 控件，一个 MyVideo 类，它有一个 VideoRenderer 实例，以及 MainWindow 代码隐藏中的一个 RenderFrames 方法

我附上了这些类的相关部分，以及下面的 RenderFrames 方法和一些 MainWindow 代码隐藏构造函数。

VideoRenderer 接收外部视频并将视频帧生成为位图对象，存储在“位图”字段中。在每个完成的过程之后，我将位图的副本存储在“bitmapCopy”字段中。

MyVideo 控制 VideoRenderer 实例“sharedVideoRenderer”何时开始和停止接收和发送帧到 MainWindow RenderFrames 方法，使用 ThreadPool.QueueUserWorkItem 将 VideoRenderer 实例作为对象参数传递。

RenderFrames 循环，直到 MyVideo 说通过更改其布尔“我们正在渲染”属性中的任何一个来停止，并且它从 Bitmap -> BitmapImage -> Image.Source 进行转换，然后使用 MainWindow Dispatcher 将 VideoContentControl.Content 设置为图像.

一切正常，视频被渲染，但 GUI 控制基本上被冻结，其他按钮和东西不起作用，因为将整个操作分派到 MainWindow 线程并不断循环正在占用线程。

我的问题是：我可以尝试哪些其他方法将位图帧从“sharedVideoRenderer”传输到 VideoContentControl，并使用新图像不断更新它，而不冻结 GUI？

任何帮助，将不胜感激。

相关代码：

视频渲染器.cs：

```
internal void DrawBitmap()
{
    lock (bitmapLock)
    {
        bitmapCopy = (Bitmap)bitmap.Clone();
    }
} 
```

我的视频.cs：

```
public static void RenderVideoPreview()
{
    sharedVideoRenderer.VideoObject = videoPreview;

    sharedVideoRenderer.Start();

    videoPreviewIsRendering = true;

    ThreadPool.QueueUserWorkItem((Application.Current.MainWindow as MainWindow).RenderFrames, sharedVideoRenderer);
    } 
```

MainWindow.xaml.cs：

```
Dispatcher mainWindowDispatcher;

public MainWindow()
{
    InitializeComponent();

    mainWindowDispatcher = this.Dispatcher;
...

public void RenderFrames(object videoRenderer)
{
    while (MyVideo.VideoPreviewIsRendering || MyVideo.LiveSessionParticipantVideoIsRendering)
    {
        mainWindowDispatcher.Invoke(new Action(() =>
        {
            try
            {
                System.Drawing.Bitmap bitmap;

                bitmap = (videoRenderer as VideoRenderer).BitmapCopy;

                using (MemoryStream memory = new MemoryStream())
                {
                    BitmapImage bitmapImage = new BitmapImage();
                    ImageSource imageSource;
                    Image image;
                    image = new Image();

                    bitmap.Save(memory, System.Drawing.Imaging.ImageFormat.Bmp);

                    memory.Position = 0;

                    bitmapImage.BeginInit();
                    bitmapImage.StreamSource = memory;
                    bitmapImage.CacheOption = BitmapCacheOption.OnLoad;
                    bitmapImage.EndInit();

                    imageSource = bitmapImage;

                    image.Source = imageSource;

                    VideoContentControl.Content = image;

                    memory.Close();
                }
            }
            catch (Exception)
            {

            }
        }));
    }

    mainWindowDispatcher.Invoke(new Action(() =>
        {
            VideoContentControl.ClearValue(ContentProperty);

            VideoContentControl.InvalidateVisual();
        }));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T18:15:59.243

```
 ThreadPool.QueueUserWorkItem((Application.Current.MainWindow as MainWindow).RenderFrames, sharedVideoRenderer);

////    

public void RenderFrames(object videoRenderer)
{
    while (MyVideo.VideoPreviewIsRendering || MyVideo.LiveSessionParticipantVideoIsRendering)
    {
        mainWindowDispatcher.Invoke(new Action(() => 
```

我猜这些线引起了痛苦。

尽管在线程池线程上调用了 Renderframes 方法，但它所做的主要工作是将控制权传递回 UI 线程并因此声明/阻止它。

您可以尝试找到更小的范围：

```
while (MyVideo.VideoPreviewIsRendering || MyVideo.LiveSessionParticipantVideoIsRendering)
{

        try
        {
            System.Drawing.Bitmap bitmap;

            bitmap = (videoRenderer as VideoRenderer).BitmapCopy;

            using (MemoryStream memory = new MemoryStream())
            {
                BitmapImage bitmapImage = new BitmapImage();
                ImageSource imageSource;
                Image image;
                image = new Image();

                bitmap.Save(memory, System.Drawing.Imaging.ImageFormat.Bmp);

                memory.Position = 0;

                bitmapImage.BeginInit();
                bitmapImage.StreamSource = memory;
                bitmapImage.CacheOption = BitmapCacheOption.OnLoad;
                bitmapImage.EndInit();

                imageSource = bitmapImage;

                mainWindowDispatcher.Invoke(new Action(() =>
                {
                    image.Source = imageSource;

                    VideoContentControl.Content = image;

                    memory.Close();
                }
            }
        }
        catch (Exception)
        {

        }
    }));
} 
```

我不太确定我将范围更改得太少或太多，因为我真的不知道什么属于 UI 线程，但这可能会给你一个开始，你可能想要四处移动。

您可以/应该使用的另一个技巧是尽量减少您正在制作的 UI 元素的数量。在当前代码中，您每帧都创建一个 Image 元素。相反，您可以制作一个 WriteableBitmap，将 Image 的 ImageSource 指向它，然后简单地将图片数据传送到它。请参阅：[在 WPF 中生成和绘制视频的快速方法是什么？](https://stackoverflow.com/questions/4259570/what-is-a-fast-way-to-generate-and-draw-video-in-wpf)

# sql - 使用来自父级的相同表优化具有子查询的 Oracle 查询

> ID：11688852
> 
> 赞同：0
> 
> 时间：2012-07-27T13:34:43.380
> 
> 标签：sql, asp.net-mvc-3, performance, optimization, oracle10g

我正在开发一个 MVC 3 项目，其中一些报告将在代码中生成 SQL 查询，然后在 Oracle 10g 数据库上执行它们。另外，我了解 SQL 注入攻击，所有值都来自下拉列表，而不是文本输入，所以这不是问题。我生成的查询“工作”，但它们非常慢。以下是该报告如何工作的简要说明：

用户选择了总帐帐户和其他过滤器。用户选择了一个时间段（财政年度、季度或特定月份）。用户运行报告。

该报告显示总帐帐户（或帐户，如果选择显示所有帐户）和每个月花费的值以及该帐户的总额。查询的输出将如下所示：

帐号和姓名 | 第 1 个月 | 第 2 个月 | 等| 全部的

第 1 个月、第 2 个月等是在生成 SQL 代码时动态添加的，因此根据用户选择的内容，可能会或可能不会在结果集中返回。我该怎么做才能使这个查询更快？当我昨天对整个财政年度（并且只有 1 个帐户）运行此查询时，它需要 10 分钟才能完成。我不认为这是可以接受的性能，并希望使其更快。请记住，我只能对查询本身进行更改，而不是对数据库进行更改，因此不会发生索引（DBA 会锁定所有内容）。查询如下。感谢大家对此提供的任何意见。

```
SELECT gl.gen_led_acct_nbr, gl.gen_led_acct_scr_nm, bu.bus_unit_txt, gl.gen_led_acct_typ_nm,
  (SELECT SUM(fct.pd_txn_amt) Jun2012
FROM Maintable fct
JOIN Dimtable1 gl1 ON fct.gen_led_acct_key = gl1.gen_led_acct_key
JOIN Dimtable2 bu1 ON fct.bus_unit_key = bu1.bus_unit_key
JOIN Dimtable3 cc1 ON fct.cst_ctr_key = cc1.cst_ctr_key
JOIN Dimtable4 oc1 ON fct.cst_ctr_own_org_key = oc1.org_cd_key
JOIN Dimtable5 dt1 ON fct.chk_dt_key          = dt1.dt_key
WHERE gl1.gen_led_acct_nbr = gl.gen_led_acct_nbr
  AND bu1.bus_unit_txt       = bu.bus_unit_txt
  AND dt1.fscl_mo_nbr        = 1
  AND dt1.fscl_yr_nbr        = 2012
  GROUP BY gl1.gen_led_acct_nbr, gl1.gen_led_acct_scr_nm, bu1.bus_unit_txt) Jun2012,
(SELECT SUM(fct.pd_txn_amt) Jun2012
FROM Maintable fct
JOIN Dimtable1 gl2 ON fct.gen_led_acct_key = gl2.gen_led_acct_key
JOIN Dimtable2 bu2 ON fct.bus_unit_key = bu2.bus_unit_key
JOIN Dimtable3 cc2 ON fct.cst_ctr_key = cc2.cst_ctr_key
JOIN Dimtable4 oc2 ON fct.cst_ctr_own_org_key = oc2.org_cd_key
JOIN Dimtable5 dt2 ON fct.chk_dt_key          = dt2.dt_key
WHERE gl2.gen_led_acct_nbr = gl.gen_led_acct_nbr
  AND bu2.bus_unit_txt       = bu.bus_unit_txt
  AND dt2.fscl_mo_nbr        = 2
  AND dt2.fscl_yr_nbr        = 2012
  GROUP BY gl2.gen_led_acct_nbr, gl2.gen_led_acct_scr_nm, bu2.bus_unit_txt) Jul2012,

(etc...)
--The sub queries above can be repeated up to an indefinite amount of times (maybe 20+), but with a different fscl_mo_nbr (and possibly fscl_yr_nbr as well)

FROM Maintable fct
JOIN Dimtable1 gl ON fct.gen_led_acct_key = gl.gen_led_acct_key
JOIN Dimtable2 bu ON fct.bus_unit_key = bu.bus_unit_key
JOIN Dimtable3 cc ON fct.cst_ctr_key = cc.cst_ctr_key
JOIN Dimtable4 oc ON fct.cst_ctr_own_org_key = oc.org_cd_key
JOIN Dimtable5 dt ON fct.chk_dt_key         = dt.dt_key
WHERE gl.gen_led_acct_nbr = 000000
  AND bu.bus_unit_txt       = 'AAAAA'
  AND dt.fscl_mo_nbr        = 1
  AND dt.fscl_yr_nbr        = 2012
GROUP BY gl.gen_led_acct_nbr, gl.gen_led_acct_scr_nm, bu.bus_unit_txt, gl.gen_led_acct_typ_nm
ORDER BY gl.gen_led_acct_nbr, gl.gen_led_acct_typ_nm 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:40:06.727

你的评论：

```
--The sub query above can be repeated up to another 11 times, but with a different dt1.fscl_mo_nbr 
```

建议一种解决方案是使用“in”而不是“=”，如：

```
AND dt1.fscl_mo_nbr        in (1, 2, . . . ) 
```

然后，您需要将 t1.fscl_mo_nbr 添加到 group by 子句。

我还注意到这是一个很大的相关子查询，这可能也会影响性能。像下面这样的东西应该可以简化查询并帮助它运行得更快：

```
SELECT gl.gen_led_acct_nbr, gl.gen_led_acct_scr_nm, bu.bus_unit_txt, 
       gl.gen_led_acct_typ_nm,
       sum(case when year = 2012 and dt.fscl_mo_nbr = 1 then fct.pd_txn_amt end) as Jun2012,
       sum(case when year = 2012 and dt.fscl_mo_nbr = 2 then fct.pd_txn_amt end) as Jul2012,
        etc. 
      FROM Maintable fct
           JOIN Dimtable1 gl ON fct.gen_led_acct_key = gl.gen_led_acct_key
           JOIN Dimtable2 bu ON fct.bus_unit_key = bu.bus_unit_key
           JOIN Dimtable3 cc ON fct.cst_ctr_key = cc.cst_ctr_key
           JOIN Dimtable4 oc ON fct.cst_ctr_own_org_key = oc.org_cd_key
           JOIN Dimtable5 dt ON fct.chk_dt_key          = dt.dt_key
       where dt.fscl_mo_nbr  in (1, 2, 3 . . .)
            AND dt.fscl_yr_nbr  = 2012
       GROUP BY gl.gen_led_acct_nbr, gl.gen_led_acct_scr_nm,
                bu.bus_unit_txt, dt.fscl_mo_nbr 
```

（请原谅任何打字错误......我从所有别名中删除了“1”后缀。）

# windows - Vim（7.3.3 Windows 64bit）：如果没有，则将 ^M 添加到行尾（ff=unix）

> ID：11688853
> 
> 赞同：1
> 
> 时间：2012-07-27T13:34:45.203
> 
> 标签：windows, vim, vi, eol, end-of-line

我有大约 100,000 多个文件，其中包含部分损坏的数据、混合文本+二进制文件（带有 http 标头的 jpg 图像数据的单个文件），其中一些标头字段具有 dos 样式 ^M^J 行终止，而一些只有 unix 样式 ^J . 当 vim 像这样打开一个文件时，它会将其视为 unix 格式。因此，所有没有 ^M 的标题行都需要添加一个。但这已被证明是非常艰难的。

`:1,11s/Cache-Control:.*\zs^M\{0,}$/^M/`

不起作用，我尝试了各种变体，甚至使用 \=printf("%s","^M") 作为替换字符串。但结果始终是文件中的一个新的空行。

我能够通过命令添加 ^M 的唯一方法是

`:exe "normal A\<c-q>\<c-m>\<Esc>"`

好的，一种方法是首先删除任何现有的 ^M，然后按之前添加它。但是有没有更优雅的单一命令解决方案？

（为了避免更多的误解，这里有一个这样的文件的简短示例：

```
HTTP/1.1 200 OK
Server: Apache/2.2.3
(more lines...)
Cache-Control: public, max-age=214748
(more lines...)

ÿØÿá Exif  II*            ÿì 
```

)

编辑/解决方案：关于 100,000 多个文件，这里有一个版本（关于缺少 ^M 仅在缓存控制行上），仅在缺少 ^M 时匹配（因为并非所有文件都被破坏，这将节省大量时间与“更新！”）：

`:1,11s/^Cache-Control:.\{-}\zs\(^M*$\)\(^M\)\@<!/\^M/i`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T14:02:59.970

单个命令可能看起来像`:v/^M/s/$/\^M/`. 这使用`<C-v><C-m>`，也就是说......它插入一个`^M`用反斜杠转义的文字字符。

# javascript - 如何通过 Javascript 更改以前 TD 中的值

> ID：11688854
> 
> 赞同：0
> 
> 时间：2012-07-27T13:34:45.593
> 
> 标签：javascript, jquery, html, html-table

单击时我有一个按钮运行一个函数，我希望之前 TD 中的值从 no 更改为 yes。

HTML：

```
<tr class="odd">
  <td class="">13.00</td>
  <td class="">DDR</td>
  <td class="">No</td>
  <td class="">
    <div class="button ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" onclick="javascript:paid(4);return false" href="#" "="" role="button" aria-disabled="false">
       <span class="ui-button-text">Paid</span>
    </div>
  </td>
</tr> 
```

因此，当用户点击“付费”时，这被称为.. Javascript：

```
function paid(iD) {       
    $.ajax({
        contentType: "application/json; charset=utf-8",
        type: "POST",
        url: "Paid",
        dataType: "json",
        data: "{ id:" + iD +"}",
        success: function (id) {
            //Here change value of previous TD to yes;

        },
        error: function (XMLHttpRequest, textStatus, errorThrown) {               
        }
    });
}; 
```

有没有办法可以访问前一个 td 的 html 并更改它的值？

O 并且还使按钮消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:37:22.897

这是一种可行的方法。但是对于这些事情，你需要小心改变你的 html 之后：

```
$("span.ui-button-text").click(function(){
    var td = $(this).closest("td").prev();
    //do ajax here
}); 
```

这将允许您存储正确的`td`单元格，然后您可以在成功回调中引用它。例如：

```
td.html("Yes"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:36:45.223

这里的关键是保留对外部`this`（单击的按钮）的引用。一旦进入成功回调，上下文就丢失了，因为它是 nan 异步操作。

不过，我们可以使用立即执行的函数来捕获外部`this`，并将其作为参数引用传递。

```
 success: (function(button) { return function (id) {
        $(button).closest('td').prev('td').text('yes');
    }; })(this) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:38:10.047

解决方法

向 TR​​ 元素添加 ID

```
<tr id="tr1" class=".odd"> 
```

和

```
<div class="button ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" onclick="javascript:paid(4,"tr1");return false" href="#" "="" role="button" aria-disabled="false"> 
```

并将您的付费功能修改为

```
paid(id, rowId); 
```

TD为

```
<td class="yn">No</td> 
```

和成功处理程序

```
success: function (id) {
$("#"+rowId+" .yn").html("Yes");
} 
```

=============================================== OLD：简单的方法是给你的是/否 TD 一个类说 yn

所以你的 TD 看起来像

```
<td class="yn">No</td> 
```

并将您的成功处理程序实现为

```
success: function (id) {
$(".odd .yn").html("Yes");
}, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T13:38:11.593

HTML：

```
<td class="" id="paid">No</td> 
```

Javascript：

```
document.getElementById("paid").innerHTML = "Yes"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T13:42:35.127

一个好方法是使用 $.ajax(..) 的 context 属性来保存对您要修改的先前 TD 的引用。

例如：

```
$.ajax({
        ...
        context: prevTD, // specify the previous TD as context
        ...
        success: function (data) {
            // 'this' refers to the passed in context
            // so you can do 
            this.text('Yes');
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) {               
        }
    }); 
```

要从您呼叫的地方获取以前的 TD，您可以使用：

```
yourPaidButton.parents('TD').first().prev() 
```

# c# - 我可以使用 LINQ 在列表列表中搜索内部列表吗？

> ID：11688863
> 
> 赞同：1
> 
> 时间：2012-07-27T13:35:16.070
> 
> 标签：c#, linq

我有这些课程：

```
public class ZoneMember
    // a zone member is a member of a zone
    // zonemembers have ports, WWPNs, aliases or all 3
{
    private string _Alias = string.Empty;
    public string MemberAlias {get{return _Alias;} set{_Alias = value; } }
    private FCPort _Port = null;
    public FCPort MemberPort { get { return _Port; } set { _Port = value; } }
    private string _WWPN = string.Empty;
    public string MemberWWPN { get { return _WWPN; } set { _WWPN = value; } }
    private bool _IsLoggedIn;
    public bool IsLoggedIn { get { return _IsLoggedIn; } set { _IsLoggedIn = value; } }
    private string _FCID;
    public string FCID {get{return _FCID;} set{ _FCID=value; } }
}

public class Zone
{ 
    public List<ZoneMember> MembersList = new List<ZoneMember>();
    private string _ZoneName;
    public string zoneName{ get{return _ZoneName;}  set{_ZoneName=value;} }

    public Zone(string n) { zoneName=n; } 
```

}

```
public class ZoneSet 
{    
    private string _ZoneSetName;
    private int _VSANNum;
    public string ZoneSetName{get{ return _ZoneSetName;}  set{_ZoneSetName=value;} }
    public int VSANNum{ get{ return _VSANNum;}  set{_VSANNum=value;} }
    public bool isActive;
    public List<Zone> ZoneList = new List<Zone>();
} 
```

我想在 Zoneset 中找到所有具有区域成员的区域，该成员具有特定值的成员列表中的属性。

我知道这样的事情会起作用 - 在这种情况下，我正在搜索 WWPN 属性：

```
// assumes myZoneSet has already been instantiated ad has zones in it
// and inputWWPN in the select statement has the value we want

List<Zone> myZoneList = new List<Zone>();

foreach (Zone z in myZoneset)
{   
var zm=null;

        zm = from member in z.MembersList where member.MemberWWPN == inputWWPN select member;  
  // if we find a matching member, add this zone to the list 
  if (zm != null)
   {  myZoneList.Add(z);
    }
} 
```

有没有办法使用 LINQ 来完成整个事情？我不确定数据库术语中的术语是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:38:13.170

这个小查询应该是您所需要的：

```
var myZoneList = myZoneSet.ZoneList
    .Where(z => z.Any(member => member.MemberWWPN == inputWWPN))
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:43:42.623

尝试这个 -

```
List<Zone> listOfZone = zoneSet.ZoneList.Where(e => e.Any(p => p.MemberWWPN == inputWWPN)).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:49:30.270

```
 myZoneList =myZoneSet.SelectMany(z => z.MembersList).Where(m => m.MemberWWPN == "somestring").ToList(); 
```

我希望这将有所帮助。

# .net - 为什么 ObservableCollection 没有 RemoveAll 方法？

> ID：11688865
> 
> 赞同：13
> 
> 时间：2012-07-27T13:35:33.927
> 
> 标签：.net, wpf, observablecollection

为什么`ObservableCollection`没有`RemoveAll`像 a 这样的方法`List`？

我已经实现了一个**扩展**方法来提供这个功能`ObservableCollection`，但我想了解是否有特定的原因不提供这个功能。

由于**Collection 更改**，它可能会以某种方式影响**Data Binding**吗？[这篇](http://updatecontrols.net/doc/tips/common_mistakes_observablecollection)文章确实指定了一些在使用时可能出错的事情，但没有解决这个问题。**`ObservableCollections`**

 *** * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-27T15:20:46.067

它确实有一种`Clear()`方法可以删除您可以使用的所有项目。

如果我不得不冒险猜测他们为什么使用`Clear`而不是`RemoveAll`，我认为这是因为`RemoveAll`暗示您正在从集合中删除项目，同时`Clear`告诉您这些项目只是被清除。

这会`CollectionChanged`导致引发的通知类型有所不同。`Clear()`引发`NotifyCollectionChangedAction.Reset`事件并且不包括事件中移除的项目，同时`Remove`引发`NotifyCollectionChangedAction.Removed`事件并将移除的项目传递给事件。

[您不能引发`CollectionChanged`包含多个项目](https://stackoverflow.com/a/7449401/302677)的事件，因此`NotifyCollectionChangedAction.Removed`在移除所有项目的情况下引发事件会引发异常。另一种方法是为每个被删除的项目引发一个`CollectionChanged`事件，这可能对性能非常不利。`NotifyCollectionChangedAction.Reset`当用户期望`Removed`在删除项目时发生事件时，简单地引发事件会导致一些混乱。

所以我猜他们决定简单地使用`.Clear()`而不是`.RemoveAll()`因为这个名字更好地描述了幕后实际发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:46:58.510

您不妨问为什么它没有实现`Reverse`或任何其他方法。除了最常见和绝对必要的方法之外，没有理由实施更多的方法。旁边的一切`Add`，`Remove`只是方便。（`RemoveAll`甚至不是列表实现的通用接口的一部分，而且它们确实已经有很多方法）**

# ios - 从 iOS 将 MongoDB _id 值写入 JSON

> ID：11688866
> 
> 赞同：-1
> 
> 时间：2012-07-27T13:35:33.507
> 
> 标签：ios, json, mongodb

我在 Objective-c/iOS 中创建一个 JSON 格式的字符串。如何编写符合 MongoDB _id 字段结构（type3 二进制）的 _id 元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:43:14.453

[Mongo Extended JSON](http://www.mongodb.org/display/DOCS/Mongo+Extended+JSON)文档说这应该是 ObjectIds 的 JSON 表示

```
{ "$oid" : "50129aff7f8adfda54f955a1" } 
```

# casting - Inno Setup/Pascal Scripting - Casting Returning Nil

> ID：11688878
> 
> 赞同：3
> 
> 时间：2012-07-27T13:35:59.967
> 
> 标签：casting, inno-setup, pascal, null

我正在尝试为使用 Inno Setup Compiler 5.5.1 制作的安装程序编写一些 Pascal 脚本。我目前正在尝试添加一个执行命令的自定义向导页面，从文本字段（TEdit 组件）获取用户输入。我定义了 NextButtonClick 函数，它检查页面 ID 是否是我定义的自定义页面，并尝试从字段中检索用户输入。当我从 Page 的 Surface 属性的组件中获取它时，它会作为 TComponent 返回。为了获得下一个，我需要将它转换为 TEdit，所以我尝试转换它，它似乎返回 nil。除了过去几天我一直在为 Inno 编写脚本之外，我对 Pascal 没有太多经验，所以我可能做错了什么。但我会很感激帮助！

这是给我一个参考问题的代码块（保留调试行）：

```
function NextButtonClick(CurPageID: Integer): Boolean;
var
    ResultCode: Integer;
    CurrPage: TWizardPage;
    Server : TComponent;
    Server2: TEdit;
    SurfacePage : TNewNotebookPage;
    ServerStr : String;
begin
    if CurPageID = 100 then
    begin
      CurrPage := PageFromID(100);
      SurfacePage := CurrPage.Surface;
      Server := SurfacePage.Controls[0];
      Server2 := TEdit(Server);  // RETURNS NIL HERE
      if Server2 = nil then
        MsgBox('', mbInformation, MB_OK);
      ServerStr := Server2.Text;
      MsgBox(ServerStr, mbInformation, MB_OK);
      //ShellExec('', 'sqlcmd', '-S ' + ServerStr + ' -Q ":r setMemUsage.sql"', ExpandConstant('{app}') + '\sql', SW_SHOW, ewWaitUntilTerminated, ResultCode);

    end;
    Result := True;
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:53:43.483

我无法模拟你的问题。我使用了这个简约的代码：

```
[Code]
var
  CustomPageID: Integer;

procedure InitializeWizard;
var
  EditBox: TEdit;
  CustomPage: TWizardPage;
begin
  CustomPage := CreateCustomPage(wpWelcome, '', '');
  CustomPageID := CustomPage.ID;
  EditBox := TEdit.Create(WizardForm);
  EditBox.Parent := CustomPage.Surface;
end;

procedure CurPageChanged(CurPageID: Integer);
var
  EditBox: TEdit;
  Component: TComponent;
  CustomPage: TWizardPage;
begin
  if (CurPageID = CustomPageID) then
  begin
    CustomPage := PageFromID(CustomPageID);
    Component := CustomPage.Surface.Controls[0];
    if (Component is TEdit) then
    begin
      MsgBox('Controls[0] is assigned and is TEdit', mbInformation, MB_OK);
      EditBox := TEdit(Component);
      EditBox.Text := 'Hi, I''m just a modified edit text!';
    end;
  end;
end; 
```

# javascript - JavaScript 和局部变量的坏习惯？

> ID：11688879
> 
> 赞同：0
> 
> 时间：2012-07-27T13:36:03.390
> 
> 标签：javascript

在下面的代码中使用局部变量是否不好，如果是，为什么？

```
var lib = new function () {

    var localVariable;

    this.publicCall = function (e) {
      localVariable = e.variable;
    };

    var privateCall = function (e) {
      localVariable = e.variable; 
    };
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:39:01.030

不，事实上我会说这看起来是一种很好的做法。

你想过什么替代方案？全局变量？现在*那*将是不好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:42:11.770

不，这实际上是首选模式。局部变量应始终在它们需要的范围内定义。你绝对不应该用变量污染你的全局范围，因为这被认为是一种不好的做法。

网络上有许多资源可帮助您了解变量范围。看看这个[SO question](https://stackoverflow.com/a/2613647/56864)。

# c# - Web 应用程序或共享点应用程序中的 lync 集成

> ID：11688880
> 
> 赞同：1
> 
> 时间：2012-07-27T13:36:05.427
> 
> 标签：c#, .net, sharepoint, lync

我的目标是在 Web 应用程序中的 Microsoft 的 Lync 上提供个人状态信息（您在“今天发生了什么？”框中编写的字符串）。

我使用了这样的代码：

```
LyncClient lyncClient = LyncClient.GetClient();
var usrStatus = lyncClient.Self.Contact.GetContactInformation(ContactInformationType.PersonalNote); 
```

但它不起作用。错误是“主机进程未运行”。如何从 lync 配置文件中获取信息？你有什么主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:05:00.517

问题是 Lync 客户端在该[工作站上下文](http://bit.ly/RIIkRE)中的用户桌面上运行。您的 ASP.NET 应用程序在 IIS 进程下的单独工作站上下文中运行，并且无权访问在用户上下文中运行的 Lync 客户端。

有一种方法可以做到这一点，它涉及使用网络服务，我会看看我是否可以挖掘该链接。

# android - Android模拟器中的WebView加载页面但不显示内容

> ID：11688882
> 
> 赞同：1
> 
> 时间：2012-07-27T13:36:10.967
> 
> 标签：android, android-webview, emulation

在为离线 WebApp 测试 appcache 问题时，我偶然发现了模拟器的问题：我试图在 WebView 中加载网页。有时它显示完美，有时它什么也不显示。首先，我认为这是我的错——监督我在测试时插入的一些错误代码。但事实并非如此。
相反，我认为这是模拟器本身的错误（或错误配置）。因为如果我打电话

```
 myWebView.loadData("<html><body><h1>TEST</h1></body></html>", "text/html", "UTF-8"); 
```

接着

```
 myWebView.loadUrl("http://10.0.2.2:8080/FrontEnd/index.jsp"); 
```

该视图显示标题“TEST”，而不是 index.jsp 的内容。所以我添加到索引中：

```
 $(alert("Hallo Welt!")); 
```

现在，它显示了我预期的吐司“你好！” -> 页面已收到并以某种方式处理。
但是：显示不是我的 index.jsp - 而是 TEST 驻留。

此外，我观察到“所有应用程序菜单”中的应用程序符号被切成两半，并且最下面的行也没有显示。也许这是与图形驱动程序或类似的不兼容！？

有没有人知道这个问题或者可以给我一个提示如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:49:47.100

问题是：用 Toast 对 JS-alerts 做出反应：

```
 myWebView.setWebChromeClient(new WebChromeClient() {
        @Override
        public boolean onJsAlert(WebView view, String url, String message, JsResult result) {
            Logger.getLogger("js-console").log(Level.INFO, "received js-alert!");
            Toast toast = Toast.makeText(view.getContext(), message, Toast.LENGTH_LONG);
            toast.setGravity(Gravity.CENTER, 0, 0);
            toast.show();
            return true;
        }
    }); 
```

但不打电话

```
 JsResult.confirm(); 
```

在所有工作之后`toast.show();`和之前添加此行之后，`return true;`就像预期的那样...... ... ... ...

# amazon-s3 - 亚马逊 s3 与谷歌云存储

> ID：11688885
> 
> 赞同：37
> 
> 时间：2012-07-27T13:36:14.417
> 
> 标签：amazon-s3, storage, google-cloud-storage

我们正在收集有关不同系统的信息。目前我们正在寻找存储解决方案。我们将有大量带有大文件的传出流量。

我想将 s3 与谷歌云存储进行比较。

谷歌云存储在 90TB 时的成本约为 0.08 美元/GB。S3 约为 0.06 美元。但是谷歌云存储已经有一个cdn，这使得它比带有云端的亚马逊s3便宜得多。

现在我在某处读到谷歌云存储比具有非常大文件的 s3 慢得多。这是真的 ？

我找不到任何信息。

如果我有大量的传出流量和大文件，我有什么选择？

编辑：

基准：

[http://blog.zencoder.com/2012/07/23/first-look-at-google-compute-engine-for-video-transcoding/](http://blog.zencoder.com/2012/07/23/first-look-at-google-compute-engine-for-video-transcoding/)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-22T00:09:39.660

2016 年更新 - 查看比较 AWS、Azure 和谷歌云存储的基准：

*   [http://blog.zachbjornson.com/2015/12/29/cloud-storage-performance.html](http://blog.zachbjornson.com/2015/12/29/cloud-storage-performance.html)

正如[reddit 用户评论](https://www.reddit.com/r/sysadmin/comments/3zg3oc/aws_s3_vs_google_cloud_vs_azure_cloud_storage/)的那样：

> “不适用于 GCP 上的网络吞吐量。它始终以如此巨大的优势击败所有竞争对手，以至于如果您正在编写一个对网络端的延迟/带宽敏感的应用程序，请忽略竞争对手。”</p>

* * *

对于当前的定价方案，比较：

*   [https://developers.google.com/storage/pricing#pricing](https://developers.google.com/storage/pricing#pricing)
*   [https://aws.amazon.com/s3/pricing/](https://aws.amazon.com/s3/pricing/)

评估性能比较棘手：您可以获得数字，但这些数字在很大程度上取决于当前条件、网络、与数据中心的接近程度、读/写比率等。

# php - 在页面上回显之前从自定义字段中拆分电子邮件字符串 - 使用 PHP

> ID：11688886
> 
> 赞同：0
> 
> 时间：2012-07-27T13:36:14.747
> 
> 标签：php

我习惯于使用 javascript 来打乱电子邮件，但我刚刚意识到我的 wordpress 系统上的电子邮件地址将作为一个完整的字符串回显。因此javascript这次帮不了我。

我使用 javascript 来破坏电子邮件地址，但我总是手动拆分电子邮件字符串。

请参阅下面我来自 wordpress 的自定义字段 php，它与电子邮件地址相呼应。

```
<?php if (  get_post_meta($post->ID, 'E-mail Address', true) )

    echo get_post_meta($post->ID, 'E-mail Address', true);

?> 
```

我的问题是可以在 get_post_meta 在页面上实际回显之前拆分它吗？但然后以位回显它......就像一个数组。

这是我下面通常使用的，那么是否可以拆分上面的get_post_meta？

```
<script type="text/javascript">
<!-- 
// spam protected email
emailE=('david@' + 'example.com')
document.write('<a title="E-mail David" href="mailto:' + emailE + '">' + emailE + '</a>')
 //-->
</script> 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:30:18.350

```
<?php if (  get_post_meta($post->ID, 'E-mail Address', true) ) { ?>

<?php 

        $email = get_post_meta($post->ID, 'E-mail Address', true);
        $emailSpam = explode("@", $email);

    ?>

    <script type="text/javascript">
        <!-- 
        // spam protected email
        emailE=('<?php echo $emailSpam[0]; ?>' + '@' + '<?php echo $emailSpam[1]; ?>')
        document.write('<a class="exhibitor-links-icon-email" title="Click here to E-mail <?php echo get_the_title(); ?>" href="mailto:' + emailE + '" target="_blank"><img src="<?php bloginfo('template_url'); ?>/images/x.gif" alt="" /></a>')
        //-->
    </script>

<?php } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:08:55.547

未经测试：（可能偏离 +1 个字符）

```
$emailBeginning = substr(0, strrchr($email, '@')); 
$emailEnd = substr(strrchr($email, '@'), strlen($email)); 
```

参考资料（未来）：

[http://php.net/manual/en/function.substr.php](http://php.net/manual/en/function.substr.php)

[http://www.php.net/manual/en/function.strrchr.php](http://www.php.net/manual/en/function.strrchr.php)

# c - int 和 char 浮点格式说明符

> ID：11688890
> 
> 赞同：-3
> 
> 时间：2012-07-27T13:36:35.440
> 
> 标签：c

我有下面的代码行。

```
int i =125;
char s[]="hello";
char c='z';
printf("%f",i);
printf("%f",c);
printf("%f",s); 
```

输出 -936283178250000000000.000000 -936283178250000000000.000000 -936283178250000000000.000000 这是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:38:08.690

这意味着您使用了不正确的格式指令。试试这个：

```
printf("%d", i);
printf("%c", c); 
```

或者，将您的两个值转换为`i`和`c`浮动（但这没有多大意义，尤其是在 的情况下`c`），最好使用正确的格式指令。

当您使用不正确的说明符时，行为是*undefined*，这就是您所观察到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:41:34.310

你是从哪里得到 %f 的？如果没记错的话 %f 是浮点数的 C++ 参数。

通过您使用：

```
int i =125;
char s[]="hello";
char c='z';
printf("%f",i);
printf("%f",c);
printf("%f",s); 
```

您告诉编译器您正在打印的所有内容都是浮点数（又名十进制），而实际上它应该是

```
printf("%d",i);
printf("%c",c);
printf("%s",s); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T21:52:17.723

在 printf 中使用错误的格式说明符将导致未定义的行为。当我说未定义的行为时，它可以给出一个输出，但输出可能因一种 C 实现而异。通常这会导致警告。GCC 编译器会为此发出警告。

# gcc - 解码 gcc 规范文件行

> ID：11688893
> 
> 赞同：2
> 
> 时间：2012-07-27T13:36:42.320
> 
> 标签：gcc, replace, line, specs

我在两个版本之间对 g++ 的隐式 LIBRARY_PATH 修改有问题（`g++ -v`给出这个信息）。我将 LIBRARY_PATH 设置为具有自定义库的单个本地目录。然而，事实证明只有一个版本的 g++（我们称之为版本 A）正确链接，另一个（版本 B）链接到系统默认值，这是不希望的。显然，目录的顺序混淆了，我的规范没有得到适当的尊重。[这与gcc 4.2 及更高版本中 /usr/lib 之前不再使用](http://gcc.gnu.org/ml/gcc-help/2008-06/msg00115.html)的 LIBRARY_PATH 类似的问题吗？虽然不是这些版本。

不知何故，我萌生了查看两个不同版本的规格文件的想法（通过 获得它们`g++ -dumpspecs > specs`）。然后，我尝试查看使用另一个版本 (A) 的规范文件运行 g++ 版本（B；产生 *un*expected 修改）是否仍会产生该修改，令我松了一口气的是 LIBRARY_PATH 现在完全一样我期待它（匹配版本A）！

我进一步追踪了这个奇怪修改发生在以下行的位置：

```
. !m64 !m32;.:../lib64 m64 !m32;.:../lib32 !m64 m32; 
```

除了似乎影响 LIBRARY_PATH 的设置/修改之外，我很遗憾不知道这条线是什么意思。因此，我希望你们中的一些人能够“破译”这条线并解释它的含义，以便我可以根据我的要求尝试修改它。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T01:08:43.227

该行会影响相对于 GCC`$PREFIX/lib`目录的库的查找方式（GCC 安装到的目录在哪里`$PREFIX`。）

它分为三个部分：

`$PREFIX/lib/.`在命令行上既不使用`-m32`或也不使用时使用。`-m64`

`$PREFIX/lib/.:$PREFIX/lib/../lib64`使用时`-m64`使用。

`$PREFIX/lib/.:$PREFIX/lib/../lib32`使用时`-m32`使用。

这对我来说表明您使用的是 Debian 或 Ubuntu，我认为从 FSF 源构建的香草 GCC 不会在规范中包含它。您的 GCC 版本都是来自`.deb`软件包还是您自己安装的？（最近 Debian/Ubuntu 版本中的 Multi Arch 支持移动了库目录，因此破坏了原版 GCC，我认为 Debian 和 Ubuntu 为它们的`.deb`软件包修补了 GCC 代码。）

您能否为每个版本添加链接输出`g++ -v`，以查看每个版本使用的确切库搜索路径？

另外，为什么不直接使用`-L`而不是`LIBRARY_PATH`？用 指定的目录`-L`总是最先出现，在系统目录或 GCC 自己的目录或`LIBRARY_PATH`.

# iphone - CLLocationManager 警报自行解除

> ID：11688902
> 
> 赞同：11
> 
> 时间：2012-07-27T13:37:06.267
> 
> 标签：iphone, ios, location, cllocationmanager, cllocation

每当用户登录时以及在其他几个地方，我都会调用当前位置。每当我这样做时，请求用户许可的警报视图会出现一秒钟左右，然后消失。显然，我不知道位置。每次我提示位置时都会发生这种情况。它不允许用户单击取消或确定。请帮忙

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-16T14:54:41.310

您可能没有保留 locationManager。结果，当您调用 `[CLLocationManager startUpdatingLocation]`警报时，会显示警报，但一旦释放 locationManager，它就会消失。当我在为我的 locationManger 实例创建的属性中输入 assign 而不是 strong 时，曾经发生过这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-29T04:55:42.463

我的项目（swift lang）也面临同样的问题。

试试这个，将**CLLocationmanage 变量**声明为全局变量并在你想要的地方调用。

前任：

```
 var locManager = CLLocationManager()

    override func viewDidLoad() 
    {

    super.viewDidLoad()

let iOS7 = floor(NSFoundationVersionNumber) <= floor(NSFoundationVersionNumber_iOS_7_1)

let iOS8 = floor(NSFoundationVersionNumber) > floor(NSFoundationVersionNumber_iOS_7_1)

            locManager.delegate = self
            locManager.desiredAccuracy = kCLLocationAccuracyBest
            if(iOS8)
            {
                locManager.requestAlwaysAuthorization()// only support ios 8.0
            }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-11T07:51:41.473

尝试在 startUpdatingLocation 之后移动委托设置器方法。这个对我有用。例子：

```
CLLocationManager *m = [[CLLocationManager alloc] init];
[m startUpdatingLocation];
m.delegate = self; 
```

哎呀，我的英语很差。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-02T10:09:26.490

我无法评论他的帖子，所以我在这里回答。

Gianluca Tranchedone 是对的。我的情况是，我保留了 CLLocationManager。但是：它在显示 AlertView 之后立即触发第一个回调，以告诉委托状态未确定。当收到任何回调时，我犯了释放实例的错误。

这就是该方法现在的样子并且它有效：

```
-(void)locationManager:(CLLocationManager*)manager didChangeAuthorizationStatus:(CLAuthorizationStatus)status {
switch (status) {
    case kCLAuthorizationStatusNotDetermined:
        break;
    default:
        _locationManagerForAuthorizationRequest.delegate = nil;
        self.locationManagerForAuthorizationRequest = nil;
} 
```

}

# php - 如何从 PHP 类中的另一个类函数中查看变量？

> ID：11688905
> 
> 赞同：0
> 
> 时间：2012-07-27T13:37:11.500
> 
> 标签：php, class, functional-programming, global-variables

如何查看同一类中另一个函数的变量？

这是我遇到的问题：

```
class slike {
    public function __construct($dire) { 
        $this->dire=$dire;
    }

    function skupljanjeslika() {
        $slike = array();
        $handler = opendir($this->dire);
        while ($file = readdir($handler)) {
            if ($file != "." && $file != "..") {
                $slike[] = $file;
            }
        }

        closedir($handler);

        return $slike; // **Array i want to use!**
    }

    function prikazradnomslike() {
        $slike; // Here is the array from first function, but I can't see it here
        $rezultat = count($slike)-1;
        $koliko=rand(0, $rezultat);
        $slika=$slike[$koliko];

        return $slika;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:39:20.280

你试过这样做吗：

```
$slike = $this->skupljanjeslika(); 
```

或者，如果您之前使用过 skupljanjeslika 方法，请尝试以下操作：
在您的类中，添加一个 var ：

```
protected $slike; 
```

在 skupljanjeslika 中，将返回替换为：

```
$this->slike = $slike; 
```

在 prikazradnomslike 中，这样做：

```
$slike = $this->slike; 
```

为了提高效率，您绝对可以这样做：

```
class slike {
    protected $slike;
    public function __construct($dire) { 
        $this->dire=$dire;
    }

    function skupljanjeslika() {
        $slike = array();
        $handler = opendir($this->dire);
        while ($file = readdir($handler)) {
            if ($file != "." && $file != "..") {
                $slike[] = $file;
            }
        }

        closedir($handler);

        $this->slike = $slike;
    }

    function prikazradnomslike() {
        $rezultat = count($this->slike)-1;
        $koliko=rand(0, $rezultat);
        $slika=$this->slike[$koliko];

        return $slika;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:39:18.597

在类中添加一个变量：

```
class slike 
{
    $protected $slike;

     public function __construct($dire) {
     ... 
```

像这样访问它：

```
$this->slike; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:50:30.527

您遇到的问题与“*范围”有关*”（[http://php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)）有关。变量在最初声明它的函数之外是不可访问的。

如果您想在脚本中的任何位置访问变量，有多种方法可以完成此操作。您可以使用全局变量（在大多数情况下不推荐）或将它们声明为类的一部分（这些可以是也可以`static`不是 - 更多在后面的帖子中）。

在类中声明的变量看起来像这样：

```
class myClass {
    public $var1;
    protected $var2;
    private $var3;

    public function foo() {
        return $this->var1;
    }
} 
```

记下`public`,`private`和`protected`因为这些是非常重要的关键字。

类中的私有变量只能在该类中访问——**它不会被任何子类继承，也不能被对象的实例直接访问（即`$myClassObj->var1`）**

受保护的变量将被子类继承，但在使用对象实例时具有相同的访问限制。

公共变量可以直接访问并且会被继承。

为了访问类中的任何这些变量，只需使用`$this`变量引用它。

**例如：**

```
$this->$var1; 
```

现在，如果您声明一个变量，因为`static`它将始终在内存中可用，并且可以通过范围解析运算符 ( `::`) 访问。**但是**私有和受保护的变量将不能直接访问（与以前相同的规则适用）。

```
myClass::$var1 = 4; // this works fine, and sets $var1 to 4 across ALL instances of myClass
myClass::$var2 = 3; // this WILL NOT WORK - protected variable. 
```

如果您需要访问类中的静态变量，则必须使用范围解析运算符和关键字来引用它`self`。

```
class myClass {
    public static $var1;

    function bar() {
        return self::$var1;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T13:42:10.180

您需要将您的变量定义为类变量，我建议阅读[此](http://www.php.net/manual/en/language.oop5.basic.php)内容以了解如何声明类变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T13:42:14.760

```
class slike {
  ...
  function prikazradnomslike()
  {
    $slike = $this->skupljanjeslika();
    return $slike[ array_rand($slike, 1) ];
  }
} 
```

见[http://docs.php.net/return](http://docs.php.net/return)和[http://docs.php.net/array_rand](http://docs.php.net/array_rand)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-27T13:42:42.017

你可以`skupljanjeslika()`像这样从你想要返回值的地方调用：`$slike = $this->skupljanjeslika();`或者如果你想从其他地方调用它，你可以将数组作为参数传递：

```
function prikazradnomslike($slike)
{
    $rezultat = count($slike)-1;
    $koliko=rand(0, $rezultat);
    $slika=$slike[$koliko];
    return $slika;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-27T13:46:57.803

你可以在你的类中有一个私有属性 $slike，在你的 slike::skuplanjeslika() 中设置它并在你的 slike::prikazrandomslike() 中使用它。另一种选择是将 $slike 作为参数传递给 slike::prikazrandomslike：

```
class slike 
{
    public function __construct($dire)
    { 
        $this->dire=$dire;
    }

    function skupljanjeslika()
    {
        $slike = array();
        $handler = opendir($this->dire);
        while ($file = readdir($handler)) {
        if ($file != "." && $file != "..") {
        $slike[] = $file;
        }
        }
        closedir($handler);
        return $slike; // **Array i want to use!**
    }
    function prikazradnomslike($slike)
    {
        $rezultat = count($slike)-1;
        $koliko=rand(0, $rezultat);
        $slika=$slike[$koliko];
        return $slika;
    }
}

$photos = new slike('mydir');
$photos->prikazrandomslike($photos->skuplanjeslika()); 
```

# php - Smarty：多维数组键

> ID：11688907
> 
> 赞同：1
> 
> 时间：2012-07-27T13:37:16.473
> 
> 标签：php, multidimensional-array, smarty

我在堆栈解决方案中找到了如何在 Smarty 中查看多维数组

```
{foreach from=$myArr key=key item=item}
    <h2>{$key}</h2>
    {foreach from=$item item=i}
        {$i} <br />
    {/foreach}
{/foreach} 
```

但是在第二个 foreach 中，我无法获取键值（索引），该怎么做？我试过了

```
{foreach from=$myArr key=key item=item}
        <h2>{$key}</h2>
        {foreach from=$item key=k item=i}
            {$i} <br />
            {$k} <br />
        {/foreach}
    {/foreach} 
```

但它不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:55:18.810

您可以在当前 var 上使用 @key 或 @index。

```
{$i@key}
{$i@index} 
```

# entity-framework - 围绕企业数据库代码 + 实体框架代码的事务

> ID：11688908
> 
> 赞同：0
> 
> 时间：2012-07-27T13:37:17.613
> 
> 标签：entity-framework, transactions, enterprise-library

嘿，我有一个独特而令人不安的情况。

我正在做一个项目，我的团队混合使用了企业数据库和实体框架。显然这可能不推荐，但这是我坚持的。我想采用使用企业数据库编写的方法，也采用使用实体框架编写的不同方法，并将这两种方法包装在一个事务中（不需要 Microsoft 分布式事务服务）。我希望尽量减少重写代码，并能够将这两种方法原样包装在一个事务中。这可能吗？谢谢。

使用 SQL Server 2008 和 .NET 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:20:03.160

我想您想在`TransactionScope`不使用 DTC 的情况下将 EF 和 EntLib 查询混合在一起。

好消息：这是可能的。如果您对 EntLib DAAB 和 EF DbContext 使用完全相同的连接字符串，它将起作用，具体取决于 EF、EntLib 和 SQL Server 的版本。

所以你要做的是：

1.  检查你有正确的版本
2.  获取由 EF 更改的连接字符串的版本并使用它而不是你的。

对于 1，我检查了这些组合：

*   SQL Server 必须是 2008 或更早版本
*   EntLib 4.1 + EF 5 不起作用
*   EntLib 5 + EF 5 作品

对于 2，要让 EF 更改连接字符串，您必须调试使用 DbContext 实例的代码的执行。设置断点并观察或检查 DbContext`Database.Connection.ConnectionString`属性。那是连接字符串的 EF 版本。将它用于 EF 和 EntLib，您将摆脱 DTC。

# processing.js - 在 processingjs 中更改 javascript var 并加载不同的 txt 文件 int html 取决于 var

> ID：11688911
> 
> 赞同：0
> 
> 时间：2012-07-27T13:37:29.313
> 
> 标签：processing.js

这两个问题发生在同一个html中。

1.  我有一个 .pde 文件会检测用户的鼠标点击，而且里面的对象很少，如果用户点击第一个，我会得到 '1' 作为输出，依此类推。我已经在 javascript 中创建了一个 var 来存储输出，但是如何更改 processingjs 中的 var 值？

2.  如何将不同的txt加载到html中的div中取决于处理js返回的var？当我完成第一部分并且取决于用户点击不同的对象时，我想将不同的 txt 加载到 div 中。（例如，如果对象 2 被点击，text2.txt 将被加载到 div 中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T02:14:29.623

1：你不需要一个特殊的 JavaScript 变量，你可以在你的草图中跟踪它，直到你需要页面上的结果。

2：让您的草图告诉 javascript 当您单击时要做什么 - 请参阅[http://processingjs.org/articles/PomaxGuide.html#interface](http://processingjs.org/articles/PomaxGuide.html#interface)了解如何使草图和 javascript 相互交谈，同时保持您的代码在两者上都可运行web 和处理 IDE

# matlab - 在 Matlab 和 Octave 中对非显式函数进行矢量化

> ID：11688913
> 
> 赞同：2
> 
> 时间：2012-07-27T13:37:31.217
> 
> 标签：matlab, octave, vectorization

我想对一个 3D 函数进行矢量化，但该函数没有解析表达式。例如，我可以对函数进行矢量化

```
 F(x, y, z) = (sin(y)*x, z*y, x*y) 
```

通过做类似的事情

```
 function out = Vect_fn(x, y,z)
     out(1) = x.*sin(y);
     out(2) = z.*y;
     out(3) = x.*y;
 end 
```

然后运行脚本

```
 a = linspace(0,1,10);
 [xx, yy, zz] = meshgrid(a, a, a);
 D = Vect_fn(xx, yy, zz) 
```

但是，假设函数没有解析表达式，例如

```
 function y = Vect_Nexplicit(y0)
      %%%%%%y0 is a 3x1 vector%%%%%%%%%%%%%%
      t0 = 0.0; 
      tf = 3.0;
      [t, z] = ode45('ODE_fn', [t0,tf], y0);
      sz = size(z);
      n = sz(1);
      y = z(n, :);
 end 
```

where`ODE_fn`只是一些在 ODE 右侧吐出的函数。因此，该函数仅求解 ODE，因此该函数不明确。当然，我可以使用`for`循环，但速度较慢（尤其是在 Octave 中，我更喜欢它，因为它`lsode`可以解决 ODE）

尝试类似的东西

```
a = linspace(0,1,10);
 [xx, yy, zz] = meshgrid(a, a, a);
 D = Vect_Nexplicit(xx, yy, zz) 
```

不起作用。这里也是 ODF_fn 的代码：

```
 function ydot = ODE_fn(t, yin)

 A = sqrt(3.0);
 B = sqrt(2.0);
 C = 1.0;

 x = yin(1, 1);
 y = yin(2,1);
 z = yin(3, 1);

 M = reshape(yin(4:12), 3, 3);

 ydot(1,1) = A*sin(yin(3)) + C*cos(yin(2));
 ydot(2,1) = B*sin(yin(1)) + A*cos(yin(3));
 ydot(3,1) = C*sin(yin(2)) + B*cos(yin(1));

 DV = [0 -C*sin(y) A*cos(z); B*cos(x) 0 -A*sin(z); -B*sin(x)      C*cos(y) 0];

 Mdot = DV*M;

 ydot(4:12,1) = reshape(Mdot, 9, 1);

 end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:49:53.797

您可以使用 ode45 求解微分方程组，因此如果 ODE_fn 被矢量化，您可以使用您的方法。y0 也只需要是一个向量。

您可以创建一个 y0，即 [x1, ..., xn, y1, ..., yn, z1, ..., zn, M1_1-9, ... ,Mn_1-9] 然后用于 x， y, z 只是适当的索引，即 1:n、n+1:2*n、2*n+1:3n。然后使用 reshape(yin(3*n+1:end),3,3,n)。但我不确定如何向量化矩阵乘法。

# c# - 从中心和半径创建一个 SqlGeography 多边形圆

> ID：11688922
> 
> 赞同：11
> 
> 时间：2012-07-27T13:38:03.077
> 
> 标签：c#, sql-server, geospatial, sqlgeography

我想使用 c# 在 sql-server 2008 地理字段中保存一个圆圈。

在 c# 中，我有一个纬度、一个经度和一个半径，但我找不到一种方法来计算代表圆的多边形并`SqlGeography`从中创建一个。

我尝试使用以下函数来创建多边形：

```
 private List<Coordinate> getCirclePoints(Coordinate center, int radius, int speed)  //speed 1: draws 360 sides, 2 draws 180 etc...
    {
        var centerLat = (center.Latitude * Math.PI) / 180.0;  //rad
        var centerLng = (center.Longitude * Math.PI) / 180.0; //rad
        var dist = (float)radius / 6371.0;             //d = angular distance covered on earth's surface
        var circlePoints = new List<Coordinate>();
        for (int x = 0; x <= 360; x += speed)
        {
            var brng = x * Math.PI / 180.0;         //rad
            var latitude = Math.Asin(Math.Sin(centerLat) * Math.Cos(dist) + Math.Cos(centerLat) * Math.Sin(dist) * Math.Cos(brng));
            var longitude = ((centerLng + Math.Atan2(Math.Sin(brng) * Math.Sin(dist) * Math.Cos(centerLat), Math.Cos(dist) - Math.Sin(centerLat) * Math.Sin(latitude))) * 180.0) / Math.PI;
            circlePoints.Add(new Coordinate((latitude * 180.0) / Math.PI, longitude));
        }
        return circlePoints;
    } 
```

然后尝试将其转换`List<Coordinate>`为可解析的字符串：

```
 var s = "POLYGON((" + string.Join(",", points.ConvertAll(p => p.Longitude + " " + p.Latitude).ToArray()) + "))";
        var poly = SqlGeography.STPolyFromText(new System.Data.SqlTypes.SqlChars((SqlString)s), 4326); 
```

但它总是抱怨多边形必须在一个半球上，我敢肯定是这样。

我在正确的轨道上吗？有没有其他（更简单）的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-30T10:34:01.297

好的，我自己找到了答案。诀窍是创建一个点

```
var point = SqlGeography.Point(latitude, longitude, 4326); 
```

然后在该点周围创建一个缓冲区

```
var poly = point.BufferWithTolerance(radiusInMeter, 0.01, true); //0.01 is to simplify the polygon to keep only a few sides 
```

然后你可以简单地创建一个`SqlCommand`并添加多边形作为参数：

```
var param = new SqlParameter(@"Polygon", poly);
param.UdtTypeName = "Geography";
command.Parameters.Add(param); 
```

希望将来能帮助别人！

# javascript - 如何从javascript对象中删除空值

> ID：11688926
> 
> 赞同：0
> 
> 时间：2012-07-27T13:38:08.933
> 
> 标签：javascript, jquery, arrays, recursion, javascript-objects

我有一个包含两个数组的 javascript 对象。有时其中一个数组可能为空。我正在尝试通过递归函数遍历对象，但我不希望任何为空或空字符串的数组进入循环。到目前为止我所拥有的是产生错误`Typeerror: obj.filter is not a function`。

**注意**：在这个例子中，obj 里面有两个数组，但实际上，它可以是我传递给函数的任何东西。

```
var obj = {
    selected: [ "value1", "value"2],
    unselected: []
}

function clearAndSetSelectElement($elem, obj, isEmpty) {
    if(isEmpty) $elem.empty(); //empty the select element if it isn't empty
    $.each(obj.filter(function(v){return v != null}), function() { //filter out empty arrays or empty strings
        if(this instanceof Array) clearAndSetSelectElement($elem, this, false); //if this is an array make recursive call
        $elem.append("<option />").val(this).text(this)); //append value to select element
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:05:49.900

也许你可以试试这个（如果你想用数组中的一些选项填充选择）

**HTML**

```
<select id="sel"></select>​ 
```

**JS**

```
function setSelect(elem, obj)
{
    for(var o in obj)
    {
        if(obj[o] instanceof Array && obj[o].length)
        {
            $.each(obj[o], function(key, value) {   
                elem.append($("<option></option>").attr("value",value).text(value)); 
            });
        }
    }
} 
```

`setSelect`使用函数填充选择

```
var obj = {
    selected: [ "value1", "value2"],
    unselected: []
}

var elem=$('#sel');            
setSelect(elem, obj); 
```

[**演示**](http://jsfiddle.net/heera/PTdM3/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:40:34.883

obj.filter 不是函数，但 obj.selected.filter 应该是（obj 是一个对象，而不是数组）。

我猜默认情况下它在 IE7 中不起作用，您要么必须从 Mozilla 开发者网络 ( [MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter) ) 复制 polyfill，要么使用 Modernizr。

# iphone - 特定时间戳的 ALAsset 缩略图

> ID：11688938
> 
> 赞同：0
> 
> 时间：2012-07-27T13:38:44.520
> 
> 标签：iphone, ios, video, thumbnails, alasset

我正在开发一个用于将视频文件上传到特定平台的 iPhone 应用程序，我真正喜欢的一个功能是能够为同一视频呈现十个不同的缩略图供用户选择。

问题是，ALAsset 只提供了一个*缩略图*方法，它只返回默认的缩略图。我已通读 ALAssetRepresentation 和 ALAsset 文档，但似乎找不到获取*特定*时间戳缩略图的方法。

我想一个选择是使用类似于 libav 的东西来获取缩略图，但这似乎有点“过头”了。谁能帮我解决这个问题？

最好的问候，
尼克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T14:23:53.847

我认为这会对您有所帮助，您还可以通过此提示 [视频文件缩略图时间戳在 ALAsset 中丢失](https://stackoverflow.com/questions/10896527/video-file-thumbnail-timestamp-missing-in-alasset)

{

```
 if ([theAsset valueForProperty:ALAssetPropertyType] == ALAssetTypeVideo) {

        // Black semi-transparent background at the bottom of the item
        CGRect containerFrame = CGRectMake(0, frame.size.height - AGIPC_ITEM_HEIGHT, frame.size.width, AGIPC_ITEM_HEIGHT);
        UIView *containerForMovieInfo = [[[UIView alloc] initWithFrame:containerFrame] autorelease];
        containerForMovieInfo.backgroundColor = [UIColor blackColor];
        containerForMovieInfo.alpha = 0.7f;

        // Movie icon on left side
        CGRect movieFrame = CGRectMake(4, 60, 26, 15);
        UIImageView *movieImageView = [[[UIImageView alloc] initWithFrame:movieFrame] autorelease];
        if (IS_IPAD()) {
            movieImageView.image = [UIImage imageNamed:@"AGIPC-Movie-iPad"];
        } else {
            movieImageView.image = [UIImage imageNamed:@"AGIPC-Movie-iPhone"];
        }
        [containerForMovieInfo addSubview:movieImageView];

        // Movie duration on right side
        if ([theAsset valueForProperty:ALAssetPropertyDuration] != ALErrorInvalidProperty) {
            NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease];
            [formatter setDateFormat:@"mm:ss"];
            CGRect durationFrame = CGRectMake(frame.size.width - 26 - 4, 60, 26, 15);
            UILabel *durationView = [[[UILabel alloc] initWithFrame:durationFrame] autorelease];
            durationView.backgroundColor = [UIColor clearColor];
            durationView.textColor = [UIColor whiteColor];
            durationView.text = [formatter stringFromDate:[NSDate dateWithTimeIntervalSince1970:[[theAsset valueForProperty:ALAssetPropertyDuration] doubleValue]]];
            durationView.font = [UIFont systemFontOfSize:10];
            [containerForMovieInfo addSubview:durationView];
        }

        [self addSubview:containerForMovieInfo];
    } 
```

}

最后但并非最不重要的一点是，您必须自己创建相机的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T15:35:12.737

```
// Get URL from ALAsset* asset:
NSURL* assetURL = [asset valueForProperty:ALAssetPropertyAssetURL];

// Create AVURLAsset using this URL (assetOptions is optional):
NSDictionary* assetOptions = nil;
// assetOptions = @{AVURLAssetPreferPreciseDurationAndTimingKey : @(YES)};
AVAsset* avAsset = [[AVURLAsset alloc] initWithURL:assetURL options:assetOptions];

// Create generator:
AVAssetImageGenerator* generator = [[AVAssetImageGenerator alloc] initWithAsset:avAsset];
generator.appliesPreferredTrackTransform = YES;

// Create array with CMTimes of thumbnails using your own logic.
// (Use +(NSValue*)valueWithCMTime:(CMTime)time to add CMTime in array).
NSArray* times = [self generateThumbnailTimesForVideo:avAsset];

// Generate thumbnail images asynchronously:
[generator generateCGImagesAsynchronouslyForTimes:times
                                completionHandler:^(CMTime requestedTime,
                                                    CGImageRef image,
                                                    CMTime actualTime,
                                                    AVAssetImageGeneratorResult result,
                                                    NSError* error)
    {
        // This block is performed for each CMTime in times array.
        UIImage* thumbnail = [[UIImage alloc] initWithCGImage:image];
    }
]; 
```

随时获取缩略图的同步方法是

```
// PS: SYNC method:
CGImageRef imgRef = [generator copyCGImageAtTime:time actualTime:NULL error:&error];
UIImage* thumbnail = [[UIImage alloc] initWithCGImage:image]; 
```

# php - Crypt 函数为相同的密码生成相同的哈希值

> ID：11688942
> 
> 赞同：0
> 
> 时间：2012-07-27T13:38:58.037
> 
> 标签：php, hash, password-protection

我正在尝试创建一个散列函数，给定随机盐，从中生成密码散列。

问题是，如果我为两个不同的用户输入相同的密码，那么两者生成的哈希值是相同的。

可能是什么问题？

```
public function generateSalt()
{       

     return $salt = substr(sha1(uniqid(rand(), true)), 0, 32);
}

public function pwdEncrypt($password, $salt)
{       

    $hash = crypt($password, '$2a$' . $salt . '$');     
    return $hash;
}

public function registerUser($nome, $email, $password, $permitions, $active)
{

    $this->nome = $nome;
    $this->email = $email;

    $salt = $this->generateSalt();

    $this->password = $this->pwdEncrypt($password, $salt);

   //INSERT METHODS BELOW
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:45:08.297

这不是你使用`crypt`河豚的方式（`$2a$`）

您需要指定强度和最后的盐。

试试这个`crypt($password, '$2a$08$'.$salt);`

显然增加强度以提高安全性，但代价是处理时间。

我还应该补充一点，如果您使用的 PHP 版本高于 5.3.7，您应该使用您的河豚算法，因为在 2011 年发现了`$2y$`一种攻击。`$2a$`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T13:44:01.613

`crypt()`将使用基于标准 Unix DES 的算法返回一个散列字符串。

基于标准 DES 的散列具有来自字母表“./0-9A-Za-z”的**两个字符的盐。**

由于在您的情况下盐的前**三个**字符始终相同，因此使用的盐始终相同。

采用

```
return $salt = substr(sha1(uniqid(rand(), true)), 0, 2); 
```

和

```
$hash = crypt($password, $salt); 
```

# emacs - emacs：如何使用标记环？

> ID：11688952
> 
> 赞同：6
> 
> 时间：2012-07-27T13:39:23.900
> 
> 标签：emacs, elisp, advising-functions, defadvice

当我执行 a`C-u C-SPC`时，emacs 会将我带到“以前的位置”。随后`C-u C-SPC`的压力会回到以前的位置。这太棒了，我经常使用它。

但是有些事情总是困扰着我：标记环中唯一缺少的标记是*where-I-invoked-this-in-the-1st-place*！这就像在你身后留下面包屑，然后去“哎呀，我*可能*会迷路，我回去检查一下”，然后**在你现在所在的地方不留下面包屑！**

我尝试为该功能提供建议，但我无法终生以编程方式模拟`C-SPC C-SPC`.

*   我怎样才能“看到”（回声、消息、跟踪等）组合键的作用，例如“Ch k”，但对于重复的键序列，例如`C-SPC C-SPC`？这是手册对后者的描述（强调我的）

> C-SPC 运行命令 set-mark-command，它是 `simple.el' 中的交互式编译 Lisp 函数。
> 
> 它绑定到 C-@，C-SPC。
> 
> (set-mark-command ARG)
> 
> 在点所在的位置设置标记，或跳转到标记处。设置标记也会改变区域，即点和标记之间的文本；这是 Emacs 中最接近某些编辑器所称的“选择”的等价物。
> 
> **在没有前缀参数的情况下，将标记设置为点**，并将旧标记位置推到本地标记环上。如果前一个标记设置在另一个缓冲区中，也将旧标记推到全局标记环上。

但是当我尝试使用它（非交互式）“没有前缀参数”以“在点设置标记”时，我得到一个调试器错误“错误的参数数量”..？（我意识到参数和前缀参数之间的区别）。

即使有一个哲学的，非实用的答案，我也可以。我只是想了解这里的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:48:14.820

`(push-mark)`似乎正在做你想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:34:01.093

好的，这就是我所做的

```
(defun px-push-mark-once-and-back ()
    "Mark current point (`push-mark') and `set-mark-command' (C-u C-SPC) away."
    (interactive)
    (let ((current-prefix-arg '(4))) ; C-u
        (if (not (eq last-command 'px-push-mark-once-and-back))
                (progn
                    (push-mark)
                    (call-interactively 'set-mark-command))
            (call-interactively 'set-mark-command))))

(global-set-key (kbd "<s-left>") 'px-push-mark-once-and-back) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-29T17:28:25.300

[好的，我在这里将这个](https://github.com/lewang/le_emacs_libs/blob/master/bi-dir-set-mark-command.el)[问题](https://github.com/lewang/le_emacs_libs/blob/master/bi-dir-set-mark-command.el)的两个相关答案打包成一个小包。

它允许您使用`C-- C-SPC`在标记环中前进。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T14:08:18.017

您可能不应该使用`set-mark`或非`set-mark-command`交互方式。在 elisp 中，只需将点（或任何位置）保存在具有好名称的变量中。

另外，`C-h i m emacs m mark`.

我不是emacs大师wrt标记运动，我几乎不使用它。我知道我以前见过你想要的行为。

# haskell - 在haskell中编写一个接受多个输入并具有多个输出的函数

> ID：11688954
> 
> 赞同：1
> 
> 时间：2012-07-27T13:39:26.977
> 
> 标签：haskell

编写可以接受不同输入并具有不同输出的函数的正确方法是什么

例如，我正在使用 hmatrix，假设我想在我的函数中接受矩阵或向量，并且输出可以是矩阵或向量，具体取决于 hte 公式，其中下例中的 T 可以是矩阵或向量，也许是正确的工具吗？

```
Myfunc ::(Matrix A, Matrix/Vector T) -> Maybe(Matrix/Vector T) 
```

使用下面提到的更新是一种可能的解决方案

```
Myfunc :: Maybe Matrix Double t -> (Either Vector Double a,Matrix Double a) -> Either (Matrix Double T,Vector Double T) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T13:48:57.820

看看HMatrix的[源代码中是如何实现矩阵乘法和左除的。](http://hackage.haskell.org/packages/archive/hmatrix/0.14.0.1/doc/html/src/Numeric-Container.html#constant)

本质上，它们定义了一个多参数类型类，它告诉函数如何针对不同的输入表现，并且它有一个函数依赖关系，告诉它什么输出是合适的。例如，对于乘法：

```
{-# LANGUAGE MultiParamTypeClasses  #-}
{-# LANGUAGE FunctionalDependencies #-}

-- |The class declaration 'Mul a b c' means "an 'a' multiplied by a 'b' returns
--  a 'c'". The functional dependency 'a b -> c' means that once 'a' and 'b' are
--  specified, 'c' is determined.
class Mul a b c | a b -> c where
    -- | Matrix-matrix, matrix-vector, and vector-matrix products.
    (<>)  :: Product t => a t -> b t -> c t

-- |Matrix times matrix is another matrix, implemented using the matrix
--  multiplication function mXm
instance Mul Matrix Matrix Matrix where
    (<>) = mXm

-- |Matrix times vector is a vector. The implementation converts the vector
--  to a matrix and uses the <> instance for matrix/matrix multiplication/
instance Mul Matrix Vector Vector where
    (<>) m v = flatten $ m <> asColumn v

-- |Vector times matrix is a (row) vector.
instance Mul Vector Matrix Vector where
    (<>) v m = flatten $ asRow v <> m 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T13:43:59.703

您可以看一下[Either](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t%3aEither)（我知道，这是个坏笑话），或者，如果您的函数具有一般含义但在不同数据类型上的实现不同，则可以定义一个[typeclass](http://www.haskell.org/tutorial/classes.html)。

*编辑：我没有添加任何进一步的细节，因为你的问题对我来说并不完全清楚*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T13:49:47.290

问题是你想用你的输入做什么？例如，如果您想进行比较，那么您可以说输入必须是 Ord 类，如下所示：

```
myFunc :: (Ord a) => a -> b 
```

另一种方法是使用 Either，但在这种情况下，您只能拥有两种不同的数据类型。例如

```
myFunc :: Either a b -> Either c d 
```

可以接受和返回不同的类型。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-27T13:46:03.763

另一种解决方案是使用列表列表 [[a]]。本质上，向量是具有单行的矩阵。

# iphone - iPhone SDK：SDWebImageDownloader 崩溃

> ID：11688955
> 
> 赞同：0
> 
> 时间：2012-07-27T13:39:27.380
> 
> 标签：iphone, exc-bad-access, sdwebimage

我正在使用 SDWebImageDownloader 库来异步下载图像。我遇到的问题是，当我在图像完成下载之前单击后退按钮时，应用程序在 SDWebImage 类中的以下行崩溃：

```
if([delegate respondsToSelector:@selector(imageDownloaderDidFinish:)]) 
```

这就是我在代码中使用它的方式：

```
sdDownloader = [[SDWebImageDownloader downloaderWithURL:headerImgURL delegate:self]retain]; 
```

是什么导致它崩溃？我保留它，我不会在任何地方发布它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:50:41.910

当您说您保留“它”时，您所说的“它”是什么意思？`EXC_BAD_ACCESS`如果当您尝试向 发送消息时它崩溃了`delegate`，那很可能`delegate`是一个悬空指针，因为它被过早地释放了。什么是保留`delegate`？什么是释放`delegate`？

# python - 在命名空间、多租户 Appengine 应用程序中管理全局数据

> ID：11688960
> 
> 赞同：3
> 
> 时间：2012-07-27T13:39:32.607
> 
> 标签：python, google-cloud-datastore, google-cloud-platform, app-engine-ndb

我正在使用命名空间设计一个多租户系统。

用户通过 OpenID 进行身份验证，用户模型保存在 Cloud Datastore 中。用户将被分组到组织中，也在数据库中建模。应用程序数据需要按组织进行分区。

所以想法是将命名空间映射到“组织”。

当用户登录时，会在会话中查找并保存他们的组织。

WSGI 中间件检查会话并相应地设置命名空间。

我的问题涉及如何最好地管理“全局”数据（即用户和组织）和应用程序数据（按组织命名空间）之间的切换

我目前的方法是使用 python 装饰器和上下文管理器来临时切换到全局命名空间，以进行访问此类全局数据的操作。例如

```
standard_datastore_op()

with global_namespace():
    org = Organization.query(Organization.key=org_key)

another_standard_datastore_op(org.name) 
```

或者

```
@global_namespace
def process_login(user_id):
    user = User.get_by_id(user_id) 
```

这也意味着模型具有跨命名空间的 KeyProperties：

```
class DomainData(ndb.Model): # in the current user's namespace

    title = ndb.StringProperty()
    foreign_org = ndb.KeyProperty(Organization) #in the "global" namespace 
```

这似乎是一种合理的方法吗？我觉得这有点脆弱，但我怀疑这是因为我不熟悉在 App Engine 中使用命名空间。我的替代想法是将 Cloud Datastore 中的所有“全局”数据提取到外部 Web 服务中，但如果可能的话，我宁愿避免这种情况。

非常感谢您的建议。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-29T15:57:15.767

装饰器是一种非常好的方法，它还具有清楚地标记哪些功能在组织特定的命名空间范围之外运行的好处。

```
def global_namespace(global_namespace_function):
  def wrapper():
    # Save the current namespace.
    previous_namespace = namespace_manager.get_namespace()

    try:
        # Empty string = default namespace, change to whatever you want to use as 'global'
        global_namespace = ''
        # Switch to 'global' namespace
        namespace_manager.set_namespace(global_namespace)

        # Run code that requires global namespace
        global_namespace_function()
    finally:
        # Restore the saved namespace.
        namespace_manager.set_namespace(previous_namespace)

  return wrapper 
```

在相关的说明中，我们还有关于使用[命名空间进行多租户](https://cloud.google.com/appengine/docs/python/multitenancy/multitenancy)的文档。

# java - 黑莓权限在签名后连接互联网？

> ID：11688963
> 
> 赞同：1
> 
> 时间：2012-07-27T13:39:34.973
> 
> 标签：java, blackberry, blackberry-simulator, blackberry-webworks

在黑莓中使用浏览器字段时，代码在签名前在模拟器中运行时工作。但是签名应用程序不起作用后，意味着网页没有加载..代码如下......

代码：

```
 public final class MyScreen extends MainScreen
  { 
    public MyScreen()
    {        

    // Set the displayed title of the screen       
    setTitle("MyTitle");

    ButtonField bf = new ButtonField("google");
    bf.setChangeListener(new FieldChangeListener() {

        public void fieldChanged(Field field, int context) {
            // TODO Auto-generated method stub          
            Dialog.alert("this is button click");                               
            UiApplication.getUiApplication().invokeLater(new Runnable() {                   
                public void run() {
                    // TODO Auto-generated method stub
                    BrowserField browserField = new BrowserField();
                    add(browserField);
                    browserField.requestContent("http://www.google.com");
                }
            }, 2000, false);
        }
    });       

    add(bf);

}

} 
```

根据以下代码，如果我**在签署**工作良好且网站正在加载之前在模拟器中执行它。但是**在使用签名密钥签署我的应用程序之后**，如果我在设备中执行，它没有执行意味着网站没有加载，只是显示空白页面。

**在签署之前和之后没有得到我的应用程序的问题。** 在互联网上搜索后，得到了一些信息，我们需要在签名后传递一些后缀才能工作，在使用 HTTP 连接的设备中，如

```
 HttpConnection httpConn;
    StreamConnection s;
    String url;
    s = (StreamConnection)Connector.open(url+";deviceside=true"); 
```

但是，如果我在浏览器字段中传递相同的代码意味着它与给定的 url 连接，例如..

```
 browserField.requestContent("http://www.google.com" + ";deviceside=true"); 
```

并出现无法找到“http://www.google.com;deviceside=true”之类的错误

**那么，任何人都可以建议我在黑莓应用程序签名后如何使用浏览器字段访问互联网。**

我的应用需要支持 OS 6.0 和 7.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:58:37.853

试试这个代码 -

```
 String url="http://www.google.com";
    BrowserFieldConfig myBrowserFieldConfig = new BrowserFieldConfig();
    myBrowserFieldConfig.setProperty(BrowserFieldConfig.NAVIGATION_MODE,BrowserFieldConfig.NAVIGATION_MODE_POINTER);
    browserField = new BrowserField(myBrowserFieldConfig);
    add(browserField);
    browserField.requestContent(url); 
```

# mysql - 将值插入空列

> ID：11688966
> 
> 赞同：0
> 
> 时间：2012-07-27T13:39:44.060
> 
> 标签：mysql

```
 $querychange = 
  mysql_query("UPDATE table SET clounm='$newvale' WHERE email='$email'") 
```

但将 $newvalue 放入最近的空单元格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:50:55.760

考虑以下代码：

```
UPDATE `table_name` SET `col_name` = `col_value` WHERE `record_name` = 'ID' 
```

例如

```
UPDATE `student` SET `marks` = 50 WHERE `name` = 'Jack' 
```

这会将名称为 Jack 的所有记录设置为 50 分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:09:18.783

这是你要找的吗

```
UPDATE table SET clounm='$newvale' WHERE email IS NULL LIMIT 1 
```

# javascript - js中的电话号码验证

> ID：11688967
> 
> 赞同：-5
> 
> 时间：2012-07-27T13:39:45.403
> 
> 标签：javascript, validation, phone-number

我想验证长度应该在 8 到 15 之间的电话号码，并且号码前面可能有一个 + 符号。这意味着 +56789765908 和 7612345678909 是有效的电话号码。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:41:34.120

使用[正则表达式](http://www.regular-expressions.info/javascriptexample.html)来验证输入的数字。在发布之前尝试使用谷歌搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:47:31.933

Jquery 有一个内置了电话号码验证方法的验证器插件。如果它们的内置插件不能为您完成这项工作，那么您可以定义自定义验证方法。您使用他们的 Min 和 Max 来确保电话 # 的长度正确，然后使用正则表达式来测试可选的“+”和所有数字。

((+|)\d*) 尝试使用它。

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

[http://regexpal.com/](http://regexpal.com/)用于测试正则表达式。非常方便的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:51:06.610

我建议使用[`<input type="tel">`](http://www.w3.org/TR/html-markup/input.tel.html "http://www.w3.org/TR/html-markup/input.tel.html"). 这是 HTML5 的一个新特性。它是最简单的，并在实现此新功能的浏览器中创造了最佳的用户体验（尤其是在移动设备上）。

您还可以使用 JavaScript 来检测访问者的浏览器是否实现了电话号码输入，并在没有实现时回退到使用 jQuery 或正则表达式或类似方法。 [Modernizr](http://modernizr.com/)是一个现成的 JavaScript 库，用于检测浏览器实现的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T13:51:39.147

我建议不要这样的事情，因为几乎总是有一个国家的电话号码与验证不匹配，但这里是符合您要求的正则表达式

```
^\+?[0-9]{8,15}$ 
```

# c# - 正确启用/禁用保存按钮

> ID：11688968
> 
> 赞同：0
> 
> 时间：2012-07-27T13:39:49.357
> 
> 标签：c#

假设我们有一个带有保存工具栏按钮的 Win32 表单，并且表单上有一些像 CheckBox 这样的子控件，现在我们为复选框的 onchange 事件编写一行代码来启用/禁用保存按钮。假设首先选中复选框，禁用保存按钮，现在取消选中复选框，启用保存按钮...现在再次选择复选框保存按钮仍处于启用状态...例如对于文本框也是如此。假设它的文本是“Hi”...将其更改为“Hi Bye”，保存已启用...将其更改回“Hi”，保存仍处于启用状态...有没有我们可以使用的模型防止这些错误的启用/禁用保存按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:45:05.140

您需要在 Checkbox 事件中编写一些`IF - ELSE`代码。`CheckedChanged`通过检查`Checked`控件的属性（复选框）检查当前状态是什么，如果是，则将 Button 的 Enabled 属性设置为 true，否则为 false。

```
private void checkBox2_CheckedChanged(object sender, EventArgs e)
{
    if (checkBox2.Checked)
        button1.Enabled = true;
    else
        button1.Enabled = false;
} 
```

Assuming`checkBox2`是 Checkbox`button1`的名称，是 Save 按钮的名称。

您也可以对其他控件使用相同的 IF ELSE 逻辑。要设置文本框的值，请使用 Text 属性

```
 TextBox1.Text="I am gonna try something now"l 
```

**编辑：**正如[comecme](https://stackoverflow.com/users/537956/comecme)建议的那样，如果您只想启用/禁用基于复选框的按钮，可以在一行中完成，而不是像这样的 IF else 块

```
button1.Enabled=checkBox2.Checked 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:43:42.540

您可以存储上次保存的状态，并在当前状态更改时与它进行比较，以查看它们是否相同。如果是这样，请禁用该按钮。

如果这些比较很昂贵，您可以通过计算所有需要保存的字段的哈希值来提高效率，并且仅在最后保存状态的哈希与当前状态的哈希匹配时才进行适当的比较.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T13:59:05.413

我更喜欢将我所有的控制状态检查和设置放在一个方法中：

```
private void UpdateControls()
{
    saveButton.Enabled = checkBox1.Checked;
    otherButton.Visible = checkBox2.Checked && textBox.Text.Length > 0;
}

private void checkBox1_CheckedChanged(object sender, EventArgs e)
{
    UpdateControls();
}

private void checkBox2_CheckedChanged(object sender, EventArgs e)
{
    UpdateControls();
}

private void textBox_TextChanged(object sender, EventArgs e)
{
    UpdateControls();
} 
```

这意味着您只有一个地方可以检查和设置状态，并且更容易理解正在发生的事情，尤其是当您有复杂的表单时。在分配布尔变量时，我也更喜欢布尔表达式而不是 if 语句，因为它可以同时满足 true 和 false 的要求，而无需编写单独的 else 语句（可能会被忘记）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T13:45:00.163

我不知道你的复选框要去哪里，但我会使用一个布尔变量：

```
private Boolean _canSave = false;
private Boolean CanSave 
{
    get { return _canSave; }
    set
    {
        _canSave = value;
        MenuSave.Enabled = value;
    }
}

public void MenuSave_Click()
{
    Save();
}

private void Save()
{
    // do your thing

    CanSave = false;
}

public void TextBox_TextChanged()
{
    CanSave = true;
} 
```

当您将文本恢复为原始时，这不会导致禁用保存菜单。如果需要，您必须将`Save()`方法中的文本存储在私有变量中，并将其与 every 上的当前文本进行比较，`TextBox_TextChanged()`以确定与原始文本相比是否发生了更改（即自上次保存以来）。

# firefox - 与 Chrome 扩展程序中的本地方法交互

> ID：11688970
> 
> 赞同：0
> 
> 时间：2012-07-27T13:39:52.377
> 
> 标签：firefox, google-chrome, networking, google-chrome-extension

我不确定我应该使用哪种技术，甚至不确定我到底想要做什么，所以我希望能就这个问题获得一些指导。

我们有一个客户端/服务器架构，从客户端你应该能够通过浏览器 -> 客户端 -> 服务器，或者直接从浏览器 -> 服务器向服务器端发送命令

我的问题是，我应该寻找什么来帮助我完成这项任务？我相信如果我要使用 Chrome 扩展程序，它必须使用 NPAPI 与我的 PC 进行本地交互，这不是推荐的 ;)

该解决方案只需要在 Windows 上运行，并且不会访问任何本地用户文件。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:14:08.503

在 Chrome 扩展中，当且仅当您在[清单](http://code.google.com/chrome/extensions/manifest.html)文件中明确定义权限（url 模式）时，才允许您访问外部资源。

根据您的应用程序的需要，您可以使用 RESTful 服务器方法或 WebSockets 服务器方法。完成服务器的开发后，您的扩展可以使用现有的 Web 技术（XmlHTTPRequest、WebSocket）通过它进行通信。

假设您要使用 RESTful，我要做的是创建一个 JavaScript 服务类/库，它使用 XHR 与您的后端（服务器）通信，并将其包含在扩展程序的[背景页面中。](http://code.google.com/chrome/extensions/background_pages.html)然后，您可以使用扩展消息传递与您的服务类进行通信。

可以这样想，在扩展程序的后台上下文中定义的脚本位于扩展程序和服务器之间，就像一个门面。如果您需要有关如何使用的问题，请在 GitHub/StackOverflow 上搜索，这里有许多有用的帖子/项目。

# javascript - 在 JavaScript 中使用 === 进行字符串比较有意义吗？

> ID：11688975
> 
> 赞同：4
> 
> 时间：2012-07-27T13:40:12.153
> 
> 标签：javascript

虽然很清楚将`===`运算符用于例如数字是如何有用的（`0`，`null`并且`undefined`都是虚假值，这可能会导致混淆），但我不确定使用`===`字符串比较是否有好处。

我的一些队友使用这个运算符进行所有比较，但这真的有意义吗？是否至少有一些轻微的性能影响？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T13:44:33.990

`==`如果您知道类型相同，则和之间的算法没有区别`===`。

也就是说，当我看到 时`==`，我假设我正在使用它来进行类型强制，这让我停下来分析代码。

当我看到时`===`，我知道没有强制的意图，所以我不需要再想了。

换句话说，我只`==`在我*打算*进行某种类型强制时使用。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-27T13:46:21.770

`===`在 JavaScript中始终使用比较被认为是一种很好的做法。由于 JavaScript 是一种动态语言，因此您认为两个字符串可能是具有不同类型的变量。

考虑以下：

```
var a = "2", b = 2;
a == b  // true
a === b // false 
```

`false`在这种情况下保证结果的唯一方法是`===`在比较两个值时使用。

# iphone - 如何在ios中更改gps更新时间

> ID：11688976
> 
> 赞同：0
> 
> 时间：2012-07-27T13:40:15.407
> 
> 标签：iphone, objective-c, ios, ios5, gps

我正在寻找一种方法来在我的 iOS 应用程序中每 n 分钟更新一次后台位置。现在我每秒都会更新一次。我可以将一秒更改为三秒或四秒还是每分钟...

这是我的代码：

```
 - (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
        if([self.delegate conformsToProtocol:@protocol(GPSLocationDelegate)]) { 
            // Check if the class assigning itself as the delegate conforms to our protocol.  If not, the message will go nowhere.  Not good.

            [self.delegate locationUpdate:newLocation];

             NSLog(@"location manager");
            /// alert for check msg ////

            ////////////////////////////
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:44:51.900

你做不到。或者，您可以通过以下方式实现它。当您获得位置更新时，它将具有与之关联的时间戳。

缓存第一次位置更新的时间戳。当您收到第二次位置更新时，比较差异并检查。如果它大于您的阈值限制，请致电您的代表并使用更新的位置时间戳更新缓存的时间戳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:24:44.190

您可以在收到新位置时停止位置管理器，并安排一个计时器在 60 秒后再次启动它。唯一的问题是您不会在每 60 秒后准确触发事件，但这可能没问题。

当你停止你的位置管理器时也要小心，因为我认为它的第一个事件可能是无效的（给你一个你最后一个位置的副本），所以你可能必须在停止之前让它运行 5-10 秒它并安排下一个触发器。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:48:39.833

位置更新是异步的，您无法控制它们出现的频率。

# jsp - API 或任何其他方式访问 IMDB TOP 250 列表？

> ID：11688978
> 
> 赞同：5
> 
> 时间：2012-07-27T13:40:26.140
> 
> 标签：jsp, web-scraping, imdb

我进行了广泛的研究，发现我找不到 API。是否有任何可用的 API 来获取 TOP 250 列表？

或者另一种访问列表的方法？

我尝试访问页面 HTML 并在我的 JSP 后端进行解析。但这里的问题是我只得到一个骨架，列表作为 AJAX 加载。

有什么方法可以抓取它吗？

任何使用想法将不胜感激......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T20:08:32.780

最简单的方法是从[IMDb 备用接口](http://www.imdb.com/interfaces)下载数据。

您想要的文件是**ratings.list.gz**。排名前 250 的电影列在第一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-09T07:56:26.610

是的，现在有一个名为 omdbapi 的 API

```
http://www.omdbapi.com/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-19T18:41:17.337

我也遇到了这个问题，我通过一些刮擦解决了它。这是Python代码：

```
import requests
import re

top250_url = "http://akas.imdb.com/chart/top"

def get_top250():
    r = requests.get(top250_url)
    html = r.text.split("\n")
    result = []
    for line in html:
        line = line.rstrip("\n")
        m = re.search(r'data-titleid="tt(\d+?)">', line)
        if m:
            _id = m.group(1)
            result.append(_id)
    #
    return result 
```

它返回前 250 部电影的 IMDb ID。然后，使用[imdbpy](http://imdbpy.sourceforge.net/)包，您可以询问有关电影的所有信息，因为您有电影 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-09T18:48:08.417

可从那里获得：

[http://api.myapifilms.com/imdb.do](http://api.myapifilms.com/imdb.do)

获取它的网址：（您需要一个免费令牌）

```
 http://api.myapifilms.com/imdb/top?token=GET A FREE API KEY&format=json&data=0 
```

（不是我的网站）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-11T19:27:13.260

[https://www.theimdbapi.com/](https://www.theimdbapi.com/) 这个很棒，我从现在开始使用

# c++ - 制作对 inner_product 的自定义调用 (C++ STL)

> ID：11688981
> 
> 赞同：3
> 
> 时间：2012-07-27T13:40:40.010
> 
> 标签：c++, stl

我很难理解如何使用a和 a`inner_product`来组合。给定，例如，和，我想制作`std::vector<float>``std::vector<std::vector<float>>``<2,3>``<<4,5>,<6,7>>``inner_product`

```
2*<4,5> + 3*<6,7> = <8,10> + <18,21> = <26,31>. 
```

假如

```
vector<float> foo; 
```

和

```
vector<vector<float>> bar; 
```

已初始化并且大小相同，我不知道`UK1`,`UK2`和`UK3`in

```
vector<float> ip = 
              inner_product(foo.begin(), foo.end(), bar.begin(), UK1, UK2, UK3); 
```

应该。我怀疑`UK1`应该是一个用 s`vector`填充的，与s 中的s`0.0f`大小相同。也许应该是`vector``bar``UK3`

```
std::transform(UK4.begin(), UK4.end(), UK4.begin(),
                                   std::bind1st(std::multiplies<float>(), UK5)); 
```

而且我想`UK2`应该以某种方式代表组件方面的`vector<float>`添加！

我什至不想考虑当向量中的向量`bar`被具有属性的类的对象替换时，这将变得多么复杂`float`......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T13:59:10.237

像这样定义加法和乘法函数：

```
static vector<float> add(const vector<float> &a,const vector<float> &b)
{
  assert(a.size()==b.size());
  size_t n = a.size();
  vector<float> result(n);
  for (size_t i=0; i!=n; ++i) {
    result[i] = a[i]+b[i];
  }
  return result;
}

static vector<float> mul(const float &a,const vector<float> &b)
{
  size_t n = b.size();
  vector<float> result = b;
  for (size_t i=0; i!=n; ++i) {
    result[i] *= a;
  }
  return result;
} 
```

并像这样使用它：

```
vector<float> zero(2,0);
vector<float> result =
  inner_product(a.begin(),a.end(),b.begin(),zero,add,mul); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:10:33.273

`std::inner_product`积累一笔。`UK2`是求和运算。`UK1`通常是 的中性元素`UK2`。`UK3`是乘法运算，将两个序列的相应元素相乘并返回 的和`UK2`。

我想`std::valarray`应该为这个操作提供一个更合适的容器。

```
// this is c++11
#include <vector>
#include <valarray>
#include <algorithm>
#include <iostream>

int main ()
{
    std::valarray <int> zero = { 0, 0 };
    std::vector <int> foo = { 1, 2, 3 };
    std::vector <std::valarray<int>> bar = { { 3, 4 }, { 5, 6 }, { 7, 8 } };
    std::valarray<int> result = std::inner_product (foo.begin(), foo.end(), 
                                     bar.begin(), zero);
    for(auto n : result) {
        std::cout << n << ' '; 
    }               
    std::cout << std::endl;
} 
```

# android - 从 sd 卡中选择图像，调整图像大小并将其保存回 sd 卡

> ID：11688982
> 
> 赞同：26
> 
> 时间：2012-07-27T13:40:44.367
> 
> 标签：android, image, bitmap

我正在开发一个应用程序，我需要从中选择一个图像`sd card`并在图像视图中显示它。现在我希望用户通过单击一个按钮来减小/增加其宽度，然后将其保存回 sd 卡。

我已经完成了图像挑选并在 ui 上显示它。但无法找到如何调整它。任何人都可以建议我如何实现它。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-27T13:46:34.470

就在昨天我做了这个

```
File dir=Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM);
Bitmap b= BitmapFactory.decodeFile(PATH_ORIGINAL_IMAGE);
Bitmap out = Bitmap.createScaledBitmap(b, 320, 480, false);

File file = new File(dir, "resize.png");
FileOutputStream fOut;
try {
    fOut = new FileOutputStream(file);
    out.compress(Bitmap.CompressFormat.PNG, 100, fOut);
    fOut.flush();
    fOut.close();
    b.recycle();
    out.recycle();               
} catch (Exception e) {} 
```

也不要忘记回收你的`bitmaps`：它会节省内存。

您还可以获得新创建的文件字符串的路径：`newPath=file.getAbsolutePath();`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-09-05T10:58:25.630

没有`OutOfMemoryException`Kotlin 的解决方案

```
fun resizeImage(file: File, scaleTo: Int = 1024) {
    val bmOptions = BitmapFactory.Options()
    bmOptions.inJustDecodeBounds = true
    BitmapFactory.decodeFile(file.absolutePath, bmOptions)
    val photoW = bmOptions.outWidth
    val photoH = bmOptions.outHeight

    // Determine how much to scale down the image
    val scaleFactor = Math.min(photoW / scaleTo, photoH / scaleTo)

    bmOptions.inJustDecodeBounds = false
    bmOptions.inSampleSize = scaleFactor

    val resized = BitmapFactory.decodeFile(file.absolutePath, bmOptions) ?: return
    file.outputStream().use {
        resized.compress(Bitmap.CompressFormat.JPEG, 75, it)
        resized.recycle()
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T13:42:27.033

尝试使用此方法：

```
public static Bitmap scaleBitmap(Bitmap bitmapToScale, float newWidth, float newHeight) {   
if(bitmapToScale == null)
    return null;
//get the original width and height
int width = bitmapToScale.getWidth();
int height = bitmapToScale.getHeight();
// create a matrix for the manipulation
Matrix matrix = new Matrix();

// resize the bit map
matrix.postScale(newWidth / width, newHeight / height);

// recreate the new Bitmap and set it back
return Bitmap.createBitmap(bitmapToScale, 0, 0, bitmapToScale.getWidth(), bitmapToScale.getHeight(), matrix, true);  
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T13:44:15.750

您可以使用[Bitmap.createScaledBitmap (Bitmap src, int dstWidth, int dstHeight, boolean filter)](http://developer.android.com/reference/android/graphics/Bitmap.html#createScaledBitmap%28android.graphics.Bitmap,%20int,%20int,%20boolean%29)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-03T13:43:45.767

我为这个成就找到了这个有用的库：[https ://github.com/hkk595/Resizer](https://github.com/hkk595/Resizer)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-02-24T16:30:42.817

这是我的静态方法：

```
public static void resizeImageFile(File originalImageFile, File resizedImageFile, int maxSize) {
    Bitmap bitmap = BitmapFactory.decodeFile(originalImageFile.getAbsolutePath());
    Bitmap resizedBitmap;
    if (bitmap.getWidth() > bitmap.getHeight()) {
        resizedBitmap = Bitmap.createScaledBitmap(bitmap, maxSize, maxSize * bitmap.getHeight() / bitmap.getWidth(), false);
    } else {
        resizedBitmap = Bitmap.createScaledBitmap(bitmap, maxSize * bitmap.getWidth() / bitmap.getHeight(), maxSize, false);
    }

    FileOutputStream fileOutputStream;
    try {
        fileOutputStream = new FileOutputStream(resizedImageFile);
        resizedBitmap.compress(Bitmap.CompressFormat.PNG, 100, fileOutputStream);
        fileOutputStream.flush();
        fileOutputStream.close();
        bitmap.recycle();
        resizedBitmap.recycle();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-27T13:47:52.047

理想情况下，您应该使用多点触控而不是使用按钮来增加/减少宽度。[这是](http://code.google.com/p/android-multitouch-controller/)一个了不起的图书馆。一旦用户决定保存图像，图像转换矩阵必须永久存储（在您的 sqlite 数据库中）。下次用户打开图像时，您需要调用矩阵并将其应用于图像。

我以前确实这样做过。

# c# - Wpf Membership Exception`不支持指定的方法。`

> ID：11688985
> 
> 赞同：1
> 
> 时间：2012-07-27T13:40:58.293
> 
> 标签：c#, wpf, wcf, asp.net-membership

我在使用 WCF 野兽的 WPF 项目中实现了成员资格，我使用[客户端应用程序服务](http://msdn.microsoft.com/en-us/library/bb384297.aspx)来使用 ASP.Net Membership Provider

但是每当我使用**不支持指定方法之类的会员功能时，我都会收到错误消息。**，虽然它在登录时进行用户验证，

我在我的 web.config 文件中完成了配置，但似乎没有任何解决方法。

```
<connectionStrings>
    <clear/>
    <add name="MTMSConnection" connectionString="data source=***;initial catalog=MTMS;user id=****;password=****;multipleactiveresultsets=True" providerName="System.Data.SqlClient"/>
    <add name="MTMSEntities" connectionString="metadata=res://*/MTMSModel.csdl|res://*/MTMSModel.ssdl|res://*/MTMSModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=****;initial catalog=MTMS;user id=**;password=****;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>

 <system.web>
    <authentication mode="Forms" />
    <membership defaultProvider="MTMSProvider">
      <providers>
        <clear />
        <add name="MTMSProvider"
        type="System.Web.Security.SqlMembershipProvider"
        connectionStringName="MTMSConnection"
        minRequiredNonalphanumericCharacters="0"
        requiresQuestionAndAnswer="false"
        enablePasswordRetrieval="false"
        enablePasswordReset="false"
        passwordFormat="Hashed"
        requiresUniqueEmail="false"
        applicationName="MTMS" />
      </providers>
    </membership>
    <roleManager enabled="true" defaultProvider="MTMSRoleProvider">
      <providers>
        <clear />
        <add name="MTMSRoleProvider"
        connectionStringName="MTMSConnection"
        applicationName="MTMS"
        type="System.Web.Security.SqlRoleProvider" />
      </providers>
    </roleManager>
  </system.web>

<system.web.extensions>
    <scripting>
      <webServices>
        <authenticationService enabled="true" />
        <roleService enabled="true"/>
      </webServices>
    </scripting>
  </system.web.extensions>

<services>
      <service name="MTMS.Services.MTMSService"
               behaviorConfiguration="serviceBehavior">
        <endpoint name="wsHttpWellthService"
                  address=""
                  binding="wsHttpBinding"
                  bindingConfiguration="wsHttpBinding"
                  contract="MTMS.Services.Contracts.IMTMSService"/>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>

<behaviors>
      <serviceBehaviors>
        <behavior name="serviceBehavior">
          <serviceCredentials>
            <userNameAuthentication
            userNamePasswordValidationMode="MembershipProvider"
            membershipProviderName="MTMSProvider" />
          </serviceCredentials>
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
          <serviceThrottling maxConcurrentCalls="120" maxConcurrentSessions="120"
                             maxConcurrentInstances="120" />
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
          <useRequestHeadersForMetadataAddress>
            <defaultPorts>
              <add scheme="http" port="81" />
              <add scheme="https" port="444" />
            </defaultPorts>
          </useRequestHeadersForMetadataAddress>
        </behavior>
      </serviceBehaviors>
    </behaviors> 
```

我在配置中犯了任何错误吗？

* * *

只需要一行代码，

```
var objRole=  Roles.GetAllRoles(); 
```

* * *

堆栈跟踪 说：

```
 at System.Web.ClientServices.Providers.ClientRoleProvider.GetAllRoles()
   at System.Web.Security.Roles.GetAllRoles()
   at MTMSWPF.AdminUserControls.UCRole.GetAllRoles() in C:\VSS Working Folder\MTMS\CODE\DEVELOPMENT\MTMS\MTMS.root\MTMS\MTMSWPF\AdminUserControls\UCRole.xaml.cs:line 45
   at MTMSWPF.AdminUserControls.UCRole..ctor() in C:\VSS Working Folder\MTMS\CODE\DEVELOPMENT\MTMS\MTMS.root\MTMS\MTMSWPF\AdminUserControls\UCRole.xaml.cs:line 33
   at MTMSWPF.AdminUserControls.UCViewAllEmployee.btnEdit_Click(Object sender, RoutedEventArgs e) in C:\VSS Working Folder\MTMS\CODE\DEVELOPMENT\MTMS\MTMS.root\MTMS\MTMSWPF\AdminUserControls\UCViewAllEmployee.xaml.cs:line 64
   at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
   at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
   at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
   at System.Windows.UIElement.RaiseEvent(RoutedEventArgs e)
   at System.Windows.Controls.Primitives.ButtonBase.OnClick()
   at System.Windows.Controls.Button.OnClick()
   at System.Windows.Controls.Primitives.ButtonBase.OnMouseLeftButtonUp(MouseButtonEventArgs e)
   at System.Windows.UIElement.OnMouseLeftButtonUpThunk(Object sender, MouseButtonEventArgs e)
   at System.Windows.Input.MouseButtonEventArgs.InvokeEventHandler(Delegate genericHandler, Object genericTarget)
   at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
   at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
   at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
   at System.Windows.UIElement.ReRaiseEventAs(DependencyObject sender, RoutedEventArgs args, RoutedEvent newEvent)
   at System.Windows.UIElement.OnMouseUpThunk(Object sender, MouseButtonEventArgs e)
   at System.Windows.Input.MouseButtonEventArgs.InvokeEventHandler(Delegate genericHandler, Object genericTarget)
   at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
   at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
   at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
   at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
   at System.Windows.UIElement.RaiseTrustedEvent(RoutedEventArgs args)
   at System.Windows.UIElement.RaiseEvent(RoutedEventArgs args, Boolean trusted)
   at System.Windows.Input.InputManager.ProcessStagingArea()
   at System.Windows.Input.InputManager.ProcessInput(InputEventArgs input)
   at System.Windows.Input.InputProviderSite.ReportInput(InputReport inputReport)
   at System.Windows.Interop.HwndMouseInputProvider.ReportInput(IntPtr hwnd, InputMode mode, Int32 timestamp, RawMouseActions actions, Int32 x, Int32 y, Int32 wheel)
   at System.Windows.Interop.HwndMouseInputProvider.FilterMessage(IntPtr hwnd, WindowMessage msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at System.Windows.Interop.HwndSource.InputFilterMessage(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
   at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
   at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
   at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
   at System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)
   at System.Windows.Application.RunDispatcher(Object ignore)
   at System.Windows.Application.RunInternal(Window window)
   at System.Windows.Application.Run(Window window)
   at System.Windows.Application.Run()
   at MTMSWPF.App.Main() in C:\VSS Working Folder\MTMS\CODE\DEVELOPMENT\MTMS\MTMS.root\MTMS\MTMSWPF\obj\x86\Debug\App.g.cs:line 0
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

# php - PHP上的相反覆盖

> ID：11688988
> 
> 赞同：0
> 
> 时间：2012-07-27T13:41:05.690
> 
> 标签：php, class, overriding

有太多子类，如果它们包含“例如”getName() 函数并在“超级类”中覆盖它们并希望为每个子类打印“a”，我想处理它们。我该如何实施？

```
<?php
   class SuperClass{
      public function getName(){
          echo 'a';
      }
   }
   class ChildClass extends SuperClass{
      public function getName(){
          echo 'b';
      }
   }
   class SecondChildClass extends SuperClass{
      public function getName(){
          echo 'c';
      }
   }
$a = new ChildClass();
$a->getName(); //prints a
$b = new SecondChildClass();
$b->getName(); //prints a
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T13:51:01.300

对于您的示例，要正常工作，只需从 SuperClass 中删除 getName() 函数。如果您仍想每隔一段时间调用 SuperClass getName，请尝试重载 SuperClass getName 函数。

获取名称（$标志）

这样，如果您想对 SuperClass 变量进行分类，则将标志传递给它，否则它将调用子类。

```
<?php
   class SuperClass{
      public function getName($flag){
          echo 'a';
      }
   }
   class ChildClass extends SuperClass{
      public function getName(){
          echo 'b';
      }
   }
   class SecondChildClass extends SuperClass{
      public function getName(){
          echo 'c';
      }
   }

   $a = new ChildClass();
   $a->getName(); //prints b
   $a->getName(true); //prints a
   $b = new SecondChildClass();
   $b->getName(); //prints c
   $b->getName(true); //prints a
?> 
```

# spring - GWT RequestFactory 奇怪的行为：没有错误报告

> ID：11688996
> 
> 赞同：1
> 
> 时间：2012-07-27T13:41:58.580
> 
> 标签：spring, hibernate, gwt, hsqldb, requestfactory

我确实有一个问题，我无法弄清楚它会发生什么...... GWT 初学者，从事个人项目。

环境：

*   ****具有两个模块的****maven**项目**

     *****   一个模块是“**模型**”，具有**Hibernate**、**HSQLDB**和**Spring**依赖项。HSQLDB 在内存中运行**嵌入式**，从 spring applicationContext.xml 配置

    *   另一个模块是“网络”，并具有所有**GWT 依赖项****** 

 ****该应用程序是使用一些 Spring Roo 生成的代码作为基础构建的，随后对其进行了修改和扩展。

问题是，当**编辑**一些实体字段并按下保存时，什么也没有发生。创建新实体实例时没问题，**仅在编辑**更改某些字段并按“**保存**”时基本上会覆盖新值。所以我开始彻底调试客户端代码，启用休眠和 Spring 详细日志记录，但仍然......什么都没有。

然后我做了一个（对我来说）令人惊讶的发现。检查 GWT 响应负载，我看到了这个：

```
 {"S":[false],"O":        [{"T":"663_uruC_g7F5h5IXBGvTP3BBKM=","V":"MS4w","S":"IjMi","O":"UPDATE"}],"I":[{"F":true,"M":"Server Error: org.hibernate.PersistentObjectException: detached entity passed to persist: com.myvdm.server.domain.Document; nested exception is javax.persistence.PersistenceException: org.hibernate.PersistentObjectException: detached entity passed to persist: com.myvdm.server.domain.Document"}]} 
```

啊哈，分离的实体通过坚持！请注意，gwt 客户端代码使用此代码段来调用服务：

> requestContext.persist().using(代理);

可以说这可能会触发异常，调用 merge() 可以解决问题，但是，请继续阅读问题 3...

现在出现三个问题：

*   为什么不以某种方式将其作为错误/异常发送给客户端？
*   为什么 Hibernate 不记录这个？
*   Spring Roo 生成的代码（如我所说，用作基础）如何在没有表现出这个问题的情况下工作？

非常感谢，

等待一些意见/建议。

* * *

**在 T. BROYER 的回应后编辑::**

嗨，托马斯，感谢您的回复。

我有一个实现 RequestTransport 并实现 send() 的自定义类。这就是我收集响应负载的方式。实施如下：

```
public void send(String payload, final TransportReceiver receiver) {
    TransportReceiver myReceiver = new TransportReceiver() {

        @Override
        public void onTransportSuccess(String payload) {
            try {
                receiver.onTransportSuccess(payload);
            } finally {
                eventBus.fireEvent(new RequestEvent(RequestEvent.State.RECEIVED));
            }
        }

        @Override
        public void onTransportFailure(ServerFailure failure) {
            try {
                receiver.onTransportFailure(failure);
            } finally {
                eventBus.fireEvent(new RequestEvent(RequestEvent.State.RECEIVED));
            }
        }
    };

    try {
        wrapped.send(payload, myReceiver);
    } finally {
        eventBus.fireEvent(new RequestEvent(RequestEvent.State.SENT));
    }
} 
```

以下是在编辑模式下单击“保存”按钮时执行的代码：

```
RequestContext requestContext = editorDriver.flush();
    if (editorDriver.hasErrors()) {
        return;
    }

    requestContext.fire(new Receiver<Void>() {
        @Override
        public void onFailure(ServerFailure error) {
            if (editorDriver != null) {
                setWaiting(false);
                super.onFailure(error);
            }
        }

        @Override
        public void onSuccess(Void ignore) {
            if (editorDriver != null) {
                editorDriver = null;
                exit(true);
            }
        }

        @Override
        public void onConstraintViolation(Set<ConstraintViolation<?>> errors) {
            if (editorDriver != null) {
                setWaiting(false);
                editorDriver.setConstraintViolations(errors);
            }
        }
    }); 
```

**根据您所说的，应该调用 onSuccess() ，它被称为**

那么如何准确地隔离产生问题的代码呢？我有这个方法可以创建一个新的请求上下文以持久化对象

```
 @Override
        protected RequestContext createSaveRequestContextFor(DocumentProxy proxy) {
            DocumentRequestContext request = requests.documentRequestContext();
            request.persist().using(proxy);
            return request;
        } 
```

这就是它的名称::

```
 editorDriver.edit(getProxy(), createSaveRequestContextFor(getProxy())); 
```

至于 Spring 问题，您是说在两个后续请求 find() 和 persist() 之间，不应关闭 JPA entityManager。我仍在调查此问题，但在按下编辑按钮后，我看到消息“org.springframework.orm.jpa.EntityManagerFactoryUtils - Closing JPA EntityManager”，这是不对的，可能没有应用 @Transactional 注释...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:49:25.983

> 为什么不以某种方式将其作为错误/异常发送给客户端？

这是。表示第`"S": [false]`一个（也是唯一一个）方法调用（记住，a`RequestContext`是一个批处理！）失败。`onFailure`调用的方法将`Receiver`被调用。

的then 说这是一个`"F": true`致命*错误*，所以默认实现会抛出一个. 但是，由于您根本不使用 a ，因此不会发生任何事情，并且会默默地忽略该错误。`ServerFailure`*`Receiver#onFailure``RuntimeException``Receiver`*

 *请注意，批处理请求本身已成功，因此全局`Receiver`（您将传递给的那个`RequestContext#fire`）将`onSuccess`调用其方法。
另请注意，它`Request#fire(Receiver)`是`Request#to(Receiver)`后跟`RequestContext#fire()`（不带参数）的简写。

> 为什么 Hibernate 不记录这个？

这个我不知道，对不起。

> Spring Roo 生成的代码（如我所说，用作基础）如何在没有表现出这个问题的情况下工作？

好的，让我们来探讨一下异常的根本原因：实体是由您`Locator`（或实体类的`findXxx`静态方法）加载的，然后`persist`在实例上调用该方法。如果您不在and方法中使用相同的 JPA `EntityManager`/ Hibernate 会话，那么您将遇到问题。 请求工厂希望您使用*视图模式中的打开会话*来克服这个问题。不幸的是，我不知道 Spring Roo 生成什么样的代码。`find``persist`

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T08:45:19.283

关于Thomas 提到*的视图模式中的打开会话*`web.xml`，只需将此过滤器定义添加到您的 Spring 应用程序中即可打开该模式：

```
<filter>
    <filter-name>
        Spring OpenEntityManagerInViewFilter
    </filter-name>
    <filter-class>
         org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter
    </filter-class>
</filter>
<filter-mapping>
    <filter-name>Spring OpenEntityManagerInViewFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```******

# osx-mountain-lion - Safari 6：-webkit-transform：rotateY 错误？

> ID：11688998
> 
> 赞同：1
> 
> 时间：2012-07-27T13:42:03.543
> 
> 标签：osx-mountain-lion, safari

我昨天升级到 Mountain Lion，其中包括 Safari 6。不幸的是，它有一些奇怪的 -webkit-transform 错误？

检查这个网址： [http ://dropshado.ws/post/1301087289/webkit-transform-perspective-function](http://dropshado.ws/post/1301087289/webkit-transform-perspective-function)

Safari 6 显示了这一点（什么都没有……）：

![在此处输入图像描述](../Images/f4a4955b6fcd7153ad19b54e68b737f8.png)

Chrome 显示了这一点（正确的方式）：

![在此处输入图像描述](../Images/5166571914f80f74dc1ef5190880f7ea.png)

有没有人也有这些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T16:19:31.163

在我公司的网站上遇到了这个问题，并与我的同事一起发现，添加`overflow: hidden`到容器 div 似乎可以解决山狮 Safari 6 中的问题。

适用于我们的网站和您的示例。奇怪的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T01:13:22.173

在 Safari 6（运行 Mountain Lion）中围绕 X 或 Y 轴进行任何旋转时，我都遇到了同样的问题。最新的 webkit build 似乎没有任何问题，所以这一定是一个 bug。

奇怪的是，如果您从 Web Inspector 的 DOM 树中选择应该应用了变换的元素，它会突出显示该元素，就好像应用了正确的变换一样。

网络上的许多示例仍然在 Safari 6 中正确呈现，因此可能还有更多的东西比我们看到的要多。