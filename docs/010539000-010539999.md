# StackOverflow 问答 10539000-10539999

# php - PHP加倍这个数字？

> ID：10539000
> 
> 赞同：1
> 
> 时间：2012-05-10T17:09:10.593
> 
> 标签：php

我正在尝试对从数据库中选择的内容 +5 然后 *10。

顺便说一句：*$stats['Level'] = 1*

所以这是我的代码。

```
<?php echo intval(floor($stats['Level'] + 5 * 10)); ?> 
```

我究竟做错了什么？它显示为 51，而不是 60。这是为什么呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T17:09:51.653

[操作顺序](http://www.php.net/manual/en/language.operators.precedence.php)。

乘法在加法之前。试试这个：

```
echo intval(floor(($stats['Level'] + 5) * 10)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T17:10:22.590

操作顺序。乘法总是在加法之前。您需要使用括号来克服这一点，因为它们具有更高的总统地位。

```
<?php echo intval(floor(($stats['Level'] + 5) * 10)); ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T17:19:02.397

运算顺序表明乘法总是在加法之前，因此您的代码应如下所示：

```
echo intval(floor(($stats['Level'] + 5) * 10)) 
```

# google-chrome - 自定义 chrome 扩展的自动更新功能

> ID：10539007
> 
> 赞同：1
> 
> 时间：2012-05-10T17:09:35.587
> 
> 标签：google-chrome, google-chrome-extension, auto-update, self-hosting

所以我正在使用一个不会托管在谷歌网上商店的 chrome 扩展程序，因此我需要向它添加自动更新功能，但是我需要它更加动态，我将尝试说明什么我正在尝试通过一个小场景来完成，所以它看起来不会毫无意义。

**设想**

我需要一个扩展，每个版本都有不同的版本，即每个版本都有一个免费版本和一个付费（功能丰富）版本，每当发布新版本时，扩展都会根据它的版本进行更新。

换句话说，服务器应该能够检测到用户的版本并根据它“即动态”提供crx文件。

**我尝试/想到的**

1.我尝试设置一个带有扩展版本的cookie，所以当自动更新发生时服务器可以检查它并生成xml文件，不幸的是我发现cookie没有在chrome发送的自动更新标头中发送.

2.我可以让扩展程序在chrome启动时与服务端对话，所以它会发送它的版本，所以服务器会将它与ip一起存储，当自动更新发生时，服务器会检查请求ip并匹配它与提供 xml 的版本一起提供，我认为这可以工作，但它有点蹩脚的方法。

3.我可以使用本机应用程序根据版本修改清单文件以指向不同的xml文件，我想这也可以，但我不赞成使用本机应用程序。

4.我试图想办法修改get-request参数（即添加自定义参数，如版本），但似乎没有办法这样做。

5.我可以将不同的版本分开为不同的扩展（即免费版将与付费版在不同的包中），但是我有兴趣将它们合二为一，因此用户可以升级/降级他们的订阅而无需安装/删除他们已经拥有的扩展名。

我想就是这样，我希望有人对我如何完成我想做的事情有更好的想法。

***PS***我知道标题有点模糊，但我找不到更好的，所以如果你想出更好的标题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:42:00.507

为什么不制作免费版`1.*`和付费版`2.*`呢？然后让您的更新页面由一个简单的 PHP 页面动态生成，该页面获取应用程序 ID 和版本（请参阅[自动更新文档](http://code.google.com/chrome/extensions/autoupdate.html#H2-4)）。

放入`"update":"http://www.mysite.com/update_app.php`你的清单。在您的 PHP 脚本中，阅读`$_GET['version']`并提供 XML 更新文档以匹配主要版本号（`1.*`免费版本、`2.*`付费版本）。基本上，在您的服务器上保留两个 XML 更新文件（和两个 CRX 文件）并让脚本决定提供哪个文件。

当然，它不必是 PHP。任何服务器端语言都可以。

# java - Swing JTabbedPane 如何设置滚动宽度？

> ID：10539013
> 
> 赞同：1
> 
> 时间：2012-05-10T17:10:00.170
> 
> 标签：java, swing, user-interface, jtabbedpane

我使用以下代码创建一个 JTabbedPane

```
new JTabbedPane(JTabbedPane.LEFT,JTabbedPane.SCROLL_TAB_LAYOUT); 
```

它导致滚动宽度小于选项卡选择区域

![在此处输入图像描述](../Images/abd93f730345f915472f2df3ba48089a.png)

如何使滚动宽度更宽以适合选项卡选择区域？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T18:25:12.183

您可以扩展`BasicTabbedPaneUI`和实现您自己的按钮以`createScrollButton()`提供新的首选尺寸。看起来`BasicTabbedPaneUI`这些按钮有自己的私有实现 - `ScrollableTabButton`. 您可以创建类似的东西，如下所示：

```
public class ExtendedTabbedPaneUI extends BasicTabbedPaneUI {

    @Override
    protected JButton createScrollButton(int direction) {
         if (direction != SOUTH && direction != NORTH && direction != EAST &&
                                   direction != WEST) {
             throw new IllegalArgumentException("Direction must be one of: " +
                                                "SOUTH, NORTH, EAST or WEST");
         }

         //return new ScrollableTabButton(direction);

         return new BasicArrowButton(direction,
            UIManager.getColor("TabbedPane.selected"),
            UIManager.getColor("TabbedPane.shadow"),
            UIManager.getColor("TabbedPane.darkShadow"),
            UIManager.getColor("TabbedPane.highlight")) {

            @Override
            public Dimension getPreferredSize() {
                int maxWidth = calculateMaxTabWidth(JTabbedPane.LEFT);
                return new Dimension(maxWidth, super.getPreferredSize().height);
            }
        };
    }
} 
```

并设置新的 UI：

```
tabbedPane.setUI(new ExtendedTabbedPaneUI()); 
```

# c++ - 使用 Makefile.am/Makefile.in 在 Ubuntu Linux 中构建 c++ 项目

> ID：10539015
> 
> 赞同：0
> 
> 时间：2012-05-10T17:10:05.913
> 
> 标签：c++, ubuntu, build, autoconf, automake

我是 Ubuntu/Linux 的新手，我一直在使用 NetBeans IDE 使用 java，所以我在构建 c++ 项目方面没有太多经验。但是现在我必须提供概念证明，并且我需要将 C++ 客户端与我的 ActiveMQ 服务器连接起来。[我从此链接](http://activemq.apache.org/cms/download.html)下载了 ActiveMQ-CPP API ，但无法构建/运行它。

下载附带文件：Maklefile.am 和 Makefile.in。我搜索了它，发现我需要 automake/autoconf 来构建它。我尝试运行**./configure**但它说找不到这样的文件或目录。我试过

```
sudo apt-get update
sudo apt-get install automake
sudo apt-get install autoconf 
```

以及我在 Internet 上找到的许多其他命令。然后都没有工作。我知道这个问题真的很基本，似乎已经在其他地方得到了回答，但我所做的每一次尝试都失败了。我想我错过了一些东西。我什至尝试了[本主题](http://ubuntuforums.org/showthread.php?t=116126)最后一条消息中提供的解决方案，但也没有用。

谁能帮我安装 autoconf/automake，或者告诉我如何使用 Makefile.am / Makefile.in 来构建我下载的项目，或者甚至建议我用其他方式构建它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:57:43.640

由于您对构建项目的其他方法持开放态度，因此我建议您使用 CMake。它是一个**比**autotools 更好的构建系统（至少从我的立场来看）。

```
#CMakeLists.txt
project(MyProject CXX)
set_minimum_required(VERSION 2.8)
add_executable(foobar foo.cpp bar.cpp) 
```

该示例将通过编译和链接 foo.cpp 和 bar.cpp 来构建一个名为“foobar”的可执行文件。将上述代码放在一个名为 CMakeLists.txt 的文件中，然后运行以下命令：

```
cmake <path to project> #run in the folder you want to build in
make #this does the actual work 
```

CMake 真正酷的地方在于它生成了一个构建系统（默认为 Makefiles），但您可以使用它为 Eclipse、Visual Studio 解决方案和一堆其他东西生成项目文件。如果您想了解更多信息，我会查看[他们的文档](http://cmake.org/cmake/help/v2.8.8/cmake.html "最新文档")。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:16:19.530

“配置”脚本应该在您的 ActiveMQ-cpp 源目录中。从 Linux 命令行，您应该能够：

1) "cd" 进入你的 ActiveMQ* 目录

2）“ls -l”查看“配置”脚本

3) "./configure" 设置构建库\

4）“make”实际构建库

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T15:48:34.500

评论中提到了这一点，但这种特殊的混淆点在十多年来一直很常见，我认为需要尽可能多地澄清。 **您不需要安装 autoconf 或 automake 来构建使用这些工具的项目。** autotools 的全部意义在于生成一个构建系统，该系统将在仅使用标准工具（make、ac 编译器、sh 和其他一些工具）的系统上构建。不幸的是，许多开发人员发布的 tarball 构建不干净。如果您解压缩 tarball 并且它不包含配置脚本，或者如果配置脚本被破坏，这是包中的错误。解决办法绝对*不行*安装 autoconf/automake/libtool 并尝试生成一个工作配置脚本。解决方案是将构建错误作为错误报告给包维护者。

如果 Linux 发行版默认停止安装多个版本的自动工具，世界将会变得更美好，因为只有不到 0.002% 的人口需要这些工具，而且任何真正需要这些工具的人都应该能够自己安装它。任何无法获取和安装这些工具的人都无法使用它们。

# php - Drupal - PHP 验证

> ID：10539018
> 
> 赞同：0
> 
> 时间：2012-05-10T17:10:27.817
> 
> 标签：php

我有一些附加到各种分类法的内容类型（节点）。对于特定的节点类型，我想对分类进行一些验证。我不想对引用分类的节点类型及其对应字段进行硬编码。所以我把它们放在数组中。

但是，我无法取消引用字段名称。我尝试过双 $$、引号等，但无法正常工作。我想做的事可能吗？

下面是我正在尝试使用的独立 PHP。

```
<?php

$node = (object) array(
    'nid' => NULL,
    'vid' => NULL,
    'uid' => '1',
    'type' => 'price_document',
    'language' => 'und',
    'field_taxonomy_price' => array(
        'und' => array(
            array(
                'tid' => '94'
            )
        )
    ),
);

  $nodes_to_check = array("price_document" => "field_taxonomy_price",
                          "package"        => "field_taxonomy_package",
                         );

  if (array_key_exists($node->type,$nodes_to_check)) {
    $taxonomy_field = $nodes_to_check[$node->type];
    print_r($taxonomy_field);
    $tid = $node->field_taxonomy_price ['und'][0]['tid']; //  <- this works but, how
    //$tid = $node->"$$taxonomy_field" ['und'][0]['tid'];     <- can I deref variable?
  }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:29:24.707

好吧，你可以这样做：

```
 $taxonomy_field = $nodes_to_check[$node->type];
 $tid = $node->{$taxonomy_field}['und'][0]['tid]; 
```

你不需要双美元符号。如果你想做这样的事情：

```
 $dog = "I am a dog";
 $var = "dog";
 $$var = "Now I'm a pussycat";
 echo $dog; // Output: Now I'm a pussycat 
```

# php - 未创建php单例对象

> ID：10539023
> 
> 赞同：1
> 
> 时间：2012-05-10T17:10:41.170
> 
> 标签：php, oop, singleton

我正在尝试了解 OOP，并创建一个单例以在 PHP 脚本中返回一个设置对象。出于某种原因，该实例似乎永远不会被设置。

每当单例通过其构造时，我`getting settings`都会回显一条消息（如果它只返回现有实例，它将保持沉默）。

当从脚本中调用它时，我会收到数十条这样的`getting settings`消息，每次调用时都会收到一条消息`mySettings::getSettings()`——`$instance`似乎没有被创建，即使我在创建后立即尝试转储它也是如此。

谁能指出我哪里出错了？

这是代码：

```
class mySettings {
    private $settings;
    private static $instance;

    private function __construct(){
        $configfile = "myconfig.ini";
        if(!$this->settings = parse_ini_file( $configfile )){
            die('CONFIG NOT FOUND/PARSED');
        }
    }

    public static function getSettings(){
        if ( !self::$instance ){
            echo "getting settings-- no instance found!";
            self::$instance = new mySettings();
            var_dump(self::$instance); // <-- dumps nothing
        }
        return self::$instance;
    }

    public function setParam( $key, $value ){
        $this->settings[$key] = $value;
    }

    public function getParam( $key ){
        return $this->settings[$key];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:14:27.457

您创建单例的方法看起来是正确的。

尝试使用空的构造函数，那里的 die() 语句可能存在问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T19:40:48.823

是否：`// <-- dumps nothing`意味着您看到“NULL”被渲染或什么都没有？

也许你有一些隐藏 var_dump() 输出的输出缓冲。

# ajax - 单击单个按钮时为每个按钮触发 ajax

> ID：10539025
> 
> 赞同：1
> 
> 时间：2012-05-10T17:10:43.137
> 
> 标签：ajax, wordpress

我正在向页面上的每个 list_item 添加一个按钮。生成的按钮具有正确的 ID。并且按钮值会发生应有的变化 - 如警报中所示。

但是单击一次按钮，警报触发的次数与页面上的按钮次数一样多。警报始终显示相同（且正确）的按钮 ID。如果没有警报，如果同时单击其他按钮，这会导致按钮值来回切换。

生成按钮：

```
function create_saved_message_button( ) { 
    $button_label = "Save";
?>
    <td width="15%" class="thread-options">
        <input type="button" class="savedbutton" value = "<?php echo $button_label ?>"  id = "<?php echo message_thread_id(); ?>" />
    </td>   
<?php
} 
```

阿贾克斯：

```
function saved_message_button_javascript() {
?>
    <script type="text/javascript" >
    jQuery(document).ready(function($) {

        $('.savedbutton').click(function(event){
         event.preventDefault();
            var button = $(this);  
            var butt_txt = $(button).attr('value');

            alert($(button).attr("id"));

            $(button).attr({'disabled': true});
            var data = {
                action: 'saved_button_clicked',
            };

            $.get(ajaxurl, data, function(response) {
                if(butt_txt == 'Save') {
                    $(button).attr('value', 'Un-Save');
                }
                else {
                    $(button).attr('value', 'Save');
                }
            });
            $(button).attr({'disabled': false});
            return false;
        });

    });
    </script>
<?php
} 
```

有什么办法可以阻止多个警报？我认为这将解决价值转换问题。

然后我只需要将按钮 id 传递给 php 函数 saved_button_clicked

add_actions：

```
 add_action( 'messages_inbox_list_item', 'create_saved_message_button', 1 ); 
//this was the problem
    //add_action('messages_inbox_list_item', 'saved_message_button_javascript');
//the solution - use this instead
add_action('after_member_messages_threads', 'saved_message_button_javascript');
    add_action('wp_ajax_saved_button_clicked', 'process_save_button_clicked'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:02:41.553

也许我误解了什么。我创建了一个带有 5 个按钮和你的 javascript 的 html，但我找不到你描述的行为。看[这里](http://jsfiddle.net/SgTrf/)。

# django - 如何创建具有最大和最小限制的 Django FloatField？

> ID：10539026
> 
> 赞同：85
> 
> 时间：2012-05-10T17:10:53.510
> 
> 标签：django, django-models

我在我的 Django 模型中存储了一些浮点数据，并且只有一定范围的值是有意义的。因此，我想在模型和 SQL 约束级别施加这些限制。

例如，我想做这样的事情：

```
class Foo(Model):
   myfloat = FloatField(min=0.0, max=1.0) 
```

我想在模型级别而不是表单级别执行此操作。实际上，我可能希望表单级别具有不同的范围；例如，在表单级别使用百分比 [0,100]，但在模型中转换为 [0,1]。

这是可能的，如果是这样，我将如何去做？

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2012-05-27T17:55:07.490

到目前为止的答案描述了如何使表单验证。您还可以将验证器放入模型中。使用[MinValueValidator](https://docs.djangoproject.com/en/dev/ref/validators/#minvaluevalidator)和[MaxValueValidator](https://docs.djangoproject.com/en/dev/ref/validators/#maxvaluevalidator)。

例如：

```
from django.core.validators import MaxValueValidator, MinValueValidator

...
weight = models.FloatField(
    validators=[MinValueValidator(0.0), MaxValueValidator(1.0)],
) 
```

**编辑**：

但是，这不会添加 SQL 约束。

您可以添加 SQL 约束，如此处所述的[s](https://docs.djangoproject.com/en/3.2/ref/models/constraints/)`CheckConstraint` in `Meta.constraints`。

组合示例：

```
from django.core.validators import MaxValueValidator, MinValueValidator
from django.db.models import CheckConstraint, Q

class Foo(Model):
    myfloat = FloatField(min=0.0, max=1.0,
        # for checking in forms
        validators=[MinValueValidator(0.0), MaxValueValidator(1.0)],)

    class Meta:
        constraints = (
            # for checking in the DB
            CheckConstraint(
                check=Q(myfloat__gte=0.0) & Q(myfloat__lte=1.0),
                name='foo_myfloat_range'),
            ) 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-05-10T18:03:05.840

如果您需要对表单级别进行限制，您可以传递`min_value`并传递`max_value`到[表单字段](https://docs.djangoproject.com/en/dev/ref/forms/fields/#floatfield)：

```
myfloat = forms.FloatField(min_value=0.0, max_value=1.0) 
```

但是，如果您需要将其提升到模型级别，则必须扩展基`models.FloatField`类

```
class MinMaxFloat(models.FloatField):
    def __init__(self, min_value=None, max_value=None, *args, **kwargs):
        self.min_value, self.max_value = min_value, max_value
        super(MinMaxFloat, self).__init__(*args, **kwargs)

    def formfield(self, **kwargs):
        defaults = {'min_value': self.min_value, 'max_value' : self.max_value}
        defaults.update(kwargs)
        return super(MinMaxFloat, self).formfield(**defaults) 
```

然后你可以在模型中使用它

```
class Foo(models.Model):
    myfloat = MinMaxFloat(min_value=0.0, max_value=1.0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-08T14:18:53.053

已经有一段时间了，社区投票的答案已经足够好，基于 Django 内置，但这里有另一种方法，具体问题，遵循[Django 项目的文档](https://docs.djangoproject.com/en/3.1/ref/validators/)。

### 创建自定义验证器

```
# app/models.py or create another file for custom validators, i.e. app/custom_validators.py
from django.core.exceptions import ValidationError
from django.utils.translation import gettext_lazy as _  # use if you support internationalization

def validate_interval(value):
    if value < 0.0 or value > 1.0:
        raise ValidationError(_('%(value)s must be in the range [0.0, 1.0]'), params={'value': value},) 
```

### 在模型中使用验证器

```
# app/models.py

class Foo(models.Model):
    myfloat = models.FloatField(validators=[validate_interval]) 
```

您甚至可以使验证器参数更通用。

## 编辑 - 重要

请记住，在表单的`clean()`方法期间调用任何验证器。

IE 如果您尝试直接创建对象而不使用表单，则**不会**调用您的验证器。

有些人不推荐它，但如果您想在创建对象时调用验证器，请覆盖 save 方法。

```
# app/models.py

from django.core.exceptions import ValidationError
from django.utils.translation import gettext_lazy as _  # use if you support internationalization

class Foo(models.Model):
    def save(self, *args, **kwargs):
        self.full_clean()  # or clean
        super().save(*args, **kwargs)

    def validate_interval(value):
        if value < 0.0 or value > 1.0:
            raise ValidationError(_('%(value)s must be in the range [0.0, 1.0]'), params={'value': value},)

    myfloat = models.FloatField(validators=[validate_interval]) 
```

# javascript - Javascript解析innerhtml

> ID：10539030
> 
> 赞同：3
> 
> 时间：2012-05-10T17:11:35.150
> 
> 标签：javascript, parsing, innerhtml

我有一个 HTML 页面，里面充满了用逗号分隔的数据，每一行都以 (br /) 标记结尾。在 Javascript 中，我可以通过询问包含数据的元素的 innerHTML 来从 DOM 中获取此信息。

**我的问题是如何解析 innerHTML 以从逗号之间获取数据并在到达 (br /) 标记时从下一行开始？**

您可能可以忽略其余部分，因为这是我上面的问题。

当我解析每一行时，我将启动一个新对象并将数据放入其中。我只是不确定如何处理innerHTML！

我确实通过我找到的 CSVtoarray 函数放置了数据，但最终得到了一个大数组的数组，而不是每行的数组数组。我可以通过这个数组从数据中创建对象，但是当我可以将数据直接解析为对象时，将 innerHTML 转换为单个数组似乎是不必要的步骤。

数据通过 AJAX 放在那里。我可以更改数据输入的格式。正如我所说，我在行尾用逗号和 (br /) 标记分隔数据。我不知道这是否愚蠢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:17:34.083

因此，您想对一个用?`<br />`而不是`\n`?指示换行符的文件进行 csv 解析。只需在 CSV-Parser 中使用该分隔符即可。简单版：

```
text.split("<br />".map(function(line){ return line.split(","); }) 
```

你也可以用正则表达式分割，比如

```
text.split(/\s*<br ?\/>\s*/)... 
```

如果您真的在 DOM 中保留 CSV 数据，则可以删除所有 br 元素并将剩余的（文本）节点用作行数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:22:43.177

如果您只想“从逗号之间获取数据”，您可以简单地执行此操作：

```
yourElem.innerHTML = yourElem.innerHTML.split(",").join(""); 
```

或者，如果您只想要一组行：

```
var lines = yourElem.innerHTML.split(","); 
```

`<br>`这将返回一个元素完整的行数组。不过，尚不清楚这是否是您想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T17:28:09.673

您提到您可以控制通过 AJAX 获取的数据，您说得对，您当前的方法不是最好的主意。首先，你永远不应该尝试自己解析 HTML，即使你认为它“简单”——不同的浏览器会`innerHTML`为完全相同的内容提供不同的结果。相反，使用 DOM 来查找您正在寻找的信息。

也就是说，这里的正确方法是从服务器返回一个[JSON](http://www.json.org/)对象；然后，您将可以直接访问您的数据。几乎每一种服务器端语言都有某种输出 JSON 的工具，并且 JavaScript 可以原生解析 JSON 字符串¹和`JSON.parse()`.

从服务器返回：

```
{items: [
    { id: 0, name: '...' },
    { id: 1, name: '...' },
    ...
]} 
```

在客户端（假设 jQuery），

```
$.getJSON('/path-to-script/', function(d) {
    for (var i = 0; i < d.items.length; i++) {
        d.items[i].id;
    }
}); 
```

* * *

^(1 - 在现代浏览器中)

# c# - 如何隐藏 XNA 4.0？

> ID：10539031
> 
> 赞同：3
> 
> 时间：2012-05-10T17:11:35.460
> 
> 标签：c#, xna, xna-4.0

我正在尝试隐藏我的 XNA 游戏窗口，但我似乎无法从谷歌上得到我迄今为止尝试过的东西。

```
 Form frmXNA = (Form)Form.FromHandle(this.Window.Handle);
        frmXNA.Hide(); 
```

我也试过

```
 Form frmXNA = (Form)Form.FromHandle(this.Window.Handle);
        frmXNA.Visible = false; 
```

我想我在做一些非常简单的错误，一旦被指出，我可能会嘲笑我没有看到它。谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T19:43:26.457

将 System.Windows.Form 引用添加到项目中，然后添加 using 语句：

```
using System.Windows.Forms; 
```

然后在 Initialize 方法中添加：

```
Form MyGameForm = (Form)Form.FromHandle(Window.Handle);
            MyGameForm.FormBorderStyle = FormBorderStyle.None; 
```

编辑：mybee 玩不透明

```
 Form MyGameForm = (Form)Form.FromHandle(Window.Handle);
        MyGameForm.Opacity = 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-16T12:36:49.853

您*可以*使用该`form.Hide()`函数，您只需要在窗体窗口显示**后调用它。**

这是一个示例，它仅在第一次绘制时隐藏窗口。

```
Form window = (Form)Form.FromHandle(Window.Handle);
window.Shown += (e, s) => window.Hide(); 
```

# gwt - GWT2.4如何在GWT中获取边距宽度，这是在css中设置的

> ID：10539034
> 
> 赞同：0
> 
> 时间：2012-05-10T17:11:38.517
> 
> 标签：gwt, margin

我在 CSS 中为面板设置了边距。现在我需要在 GWT 中获取边距宽度。我怎么能这样做？比如我给面板设置了一个css样式

```
 <ui:binder>
  .panel{
   margin: 5px;
   }

  <g:HTMLPanel Ui:field=myPanel styleName="{style.panel}" />   
  </ui:binder> 
```

在 GWT 2.4 中，如何在 GWT 类中检索边距值（5px）。我已经厌倦了这些，DOM.getIntStyleAttribute(myPanel.getElement(), "margin"), DOM.getIntStyleAttribute(myPanel.getElement(), "marginWidth") 和 myPanel.getElement().getStyle().getMargin()。所有这些都返回 0。

那我怎样才能得到边距宽度呢？

感谢回复。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T17:41:40.580

您正在寻找计算的样式，但正在请求元素样式。

如果您要直接在元素上设置样式属性，那么您可以像尝试一样查询元素的边距。

```
<!-- style can only be set on html elements, not widgets -->
<div ui:field="divElement" style='margin:5px'></div> 

divElement.getStyle().getMargin(); 
```

据我所知，GWT 没有提供查找计算样式的方法。相反，您将需要依赖外部库。快速谷歌搜索[`gwt computed style`](https://www.google.com/search?q=gwt+computed+style)将为您提供一些选项。

* * *

或者，您可以将边距宽度定义为 GWT CSS 常量并使用 CssResource 来访问它。

### MyPanel.ui.xml

```
<ui:style field="style" type="com.myproject.client.MyPanel.MyStyle">
  @def marginWidth 5px;
  .panel{ margin: marginWidth; }
</ui:style> 
```

### 我的面板.java

```
@UiField MyStyle style;

interface MyStyle extends CssResource {
  String marginWidth();
} 
```

# regex - 正则表达式：仅匹配前面带有小写字母的字符

> ID：10539038
> 
> 赞同：2
> 
> 时间：2012-05-10T17:11:52.620
> 
> 标签：regex

我想清理一个由于 OCR 而有很多错误的字幕文件。错误之一`l`是 显示为`I`。当然有时 the`I`真的是 a `I`，主要是在以下情况下：

*   句首：`I'm Ieaving...`或`- I'm Ieaving...`。
*   在名称中：`IsabeIIe`。
*   也许是一些奇怪的案例。

由于名称难以检测，我认为最好仅将`I`'s 替换为一个或多个直接在前面的小写字母，然后手动检查其余部分。所以在转换后我得到`I'm Ieaving`and `Isabelle`。这是我能想到的最“准系统”的自动化解决方案，因为没有那么多单词在大写字母之前有一个小写字母。

我怎样才能在正则表达式中做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:18:11.247

如果您的正则表达式引擎支持lookbehind，您可以找到所有 I 前面都有一个小写字母，如下所示：

```
(?<=[a-z])I 
```

否则，您可以匹配两个字符，而第二个字符将是 I。

```
[a-z]I 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:27:28.887

其中之一，如果您的引擎支持修饰符组。

```
(?-i:(?<=[a-z])I)
or
(?-i:[a-z]I) 
```

对于 Unicode，您将需要使用属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T17:16:28.563

`/([a-z])I/`将捕获前面有任何小写字母 az 的大写字母 I。

# php - PHP $_GET 与 Ajax/Jquery 请求

> ID：10539042
> 
> 赞同：2
> 
> 时间：2012-05-10T17:12:04.557
> 
> 标签：php, javascript, jquery, ajax

我正在尝试设置一个变量 $id=$_GET["categoryID"]。我无法让它工作。我相信这与 Ajax 请求有关。但我不知道我必须如何格式化它才能与该请求一起工作。我需要 mysql 查询的变量。任何帮助是极大的赞赏。这超出了我的想象，并且已经为此苦苦挣扎了好几天。我已经尝试过 GET 和 POST。谢谢。

我已经将页面提炼成这个......

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test $_GET</title>
</head>
<body>
<?php 
        if(isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {

        $id = $_GET["categoryID"];
        //$id=3; 
        }
?>
  print_r($_GET) = <?php print_r($_GET); ?>
  <br />
  print_r($id) = <?php print_r($id); ?> 
</body>
</html> 
```

这是结果页面....

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Test $_GET</title>
    </head>
    <body>
          print_r($_GET) = Array
(
    [categoryID] => 1001
)
      <br />
      print_r($id) =  
    </body>
    </html> 
```

这是整个页面......

```
<?php
if (@$_REQUEST['ajax']) {
    $link = $nm33;
    if ($link == false)
        trigger_error('Connect failed - ' . mysql_error(), E_USER_ERROR);
    $connected = mysql_select_db('nm', $link);
    if ($connected) {

    //How do I set $id = $_GET["categoryID"] It fails to set the variable.

        $id =$_GET["categoryID"];
    //  $id=1;
    // It will work as $id=1    

        $results = mysql_query('select * from selectMenu where categoryID= \'' . $id . '\' AND category="' . strtolower(mysql_real_escape_string(strip_tags($_REQUEST['category']))) . '"');

    //////////  

        $json = array();
        while (is_resource($results) && $row = mysql_fetch_object($results)) {
            //$json[] = '{"id" : "' . $row->id . '", "label" : "' . $row->label . '"}';
            $json[] = '"' . $row->label . '"';
        }
        echo '[' . implode(',', $json) . ']';
        die(); // filthy exit, but does fine for our example.
    } else {
        user_error("Failed to select the database");
    }
}
?>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script src="js/select-chain.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
    <!--
    $(function () {
        var cat = $('#categorySelect');
        var el = $('#elementSelect');
        var attr = $('#attributeSelect');

        el.selectChain({
            target: attr,
            url: 'select-menu.php',
            data: { ajax: true, anotherval: "anotherAction" }            
        });        

        // note that we're assigning in reverse order
        // to allow the chaining change trigger to work
        cat.selectChain({
            target: el,
            url: 'select-menu.php',
            data: { ajax: true }
        }).trigger('change');

    });
    //-->
    </script>
<link href="selectMenu.css" rel="stylesheet" type="text/css" />
<form action="performance-models.php" method="get">
  <select name="category" class="dropdown" id="categorySelect">
    <option selected="selected">Select Your Vehicle</option>
    <?php do { ?>
    <option> <?php echo $row_rsMake['make']; ?></option>
    <?php } while ($row_rsMake = mysql_fetch_assoc($rsMake)); ?>
  </select>
  <select name="model" class="dropdown" id="elementSelect">
    <option selected="selected">Select Model</option>
    <option>[none selected]</option>
  </select>
  <select name="appYear" class="dropdown" id="attributeSelect" >
    <option selected="selected"> </option>
    <option>[none selected]</option>
  </select>
  <input  type="submit" value="Go">
</form>
<p><br />
  <br />
  print_r($_GET) = <?php print_r($_GET); ?> <br />
  print_r($_REQUEST) = <?php print_r($_REQUEST); ?><br />
  echo $_REQUEST['categoryID']  <?php  echo $_REQUEST['categoryID'];?>
</p> 
```

这是 select-chain.js

```
(function ($) {
    $.fn.selectChain = function (options) {
        var defaults = {
            key: "id",
            value: "label"
        };

                var settings = $.extend({}, defaults, options);

        if (!(settings.target instanceof $)) settings.target = $(settings.target);

        return this.each(function () {
            var $$ = $(this);

            $$.change(function () {
                var data = null;
                if (typeof settings.data == 'string') {
                    data = settings.data + '&' + this.name + '=' + $$.val();
                } else if (typeof settings.data == 'object') {
                    data = settings.data;
                    data['category'] = $$.val();
                    data['model'] = $$.val();
                    data['year'] = $$.val();
                }

                settings.target.empty();

                $.ajax({
                    url: settings.url,
                    data: data,
                    type: (settings.type || 'get'),
                    dataType: 'json',
                    success: function (j) {
                        var options = [], i = 0, o = null;

                        for (i = 0; i < j.length; i++) {
                            // required to get around IE bug (http://support.microsoft.com/?scid=kb%3Ben-us%3B276228)
                            o = document.createElement("OPTION");
                            o.value = typeof j[i] == 'object' ? j[i][settings.key] : j[i];
                            o.text = typeof j[i] == 'object' ? j[i][settings.value] : j[i];
                            settings.target.get(0).options[i] = o;
                        }

            // hand control back to browser for a moment
            setTimeout(function () {
                settings.target
                                .find('option:first')
                                .attr('selected', 'selected')
                                .parent('select')
                                .trigger('change');
            }, 0);
                    },
                    error: function (xhr, desc, er) {
                        // add whatever debug you want here.
            alert("an error occurred here");
                    }
                });
            });
        });
    };
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T17:17:36.083

`$_GET`为此，在 URL 中传递了一个参数；

> [http://www.google.com/?q=search](http://www.google.com/?q=search)

该参数`$_GET['q']`将等于`'search'`

因此，当您执行 AJAX 请求时，您需要在 URL 中指定参数。

**编辑**：

试着摆脱你的`HTTP_X_REQUESTED_WITH`陈述。如果没有这些检查，请求可能足够安全。只需将其简化为：

```
if ( isset( $_GET["categoryID"] ) ) {
  $id = $_GET["categoryID"];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:31:16.560

不需要：

```
if(isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') 
```

您可以使用：

```
$id = isset($_GET["categoryID"]) ? intval($_GET["categoryID"]) : 0; 
```

这与（但更短......）相同：

```
if (isset($_GET["categoryID"]))
{
  $id =  intval($_GET["categoryID"]);
}
else
{
  $id =  0;
} 
```

如果要检查是否通过 ajax 发出请求，则必须重写脚本，因为`header`不需要整个部分。相反，您可以从您的页面调用此脚本，在页面本身中设置一个变量，如果该变量未在脚本中设置，则它是一个 ajax 调用。显然这只是一个简单的例子。

**编辑：**插件没有提到请求的默认类型是什么，但这很可能是`POST`这样你可以尝试添加`type: "post"`到`selectChain`.

并确保您的响应是格式正确的 json（当您到达那里时......）我还建议您使用`json_encode`，所以：

```
 echo json_encode($json);
    die(); // filthy exit, but does fine for our example. 
```

**编辑 2：**我刚刚注意到另一个问题：`categoryID`ajax 中的数据部分没有被添加：

*   您正在请求/发布到 (???) :（`select-menu.php`注意，没有查询字符串！）
*   您发送的数据是：`{ ajax: true, anotherval: "anotherAction" }`或`{ ajax: true}`

因此，`categoryID`永远不会出现在`select-menu.php`.

最合乎逻辑的做法是将所选类别添加到数据部分：

```
data: { "ajax": true, "anotherval": "anotherAction", "categoryID": cat } 
```

和：

```
data: { "ajax": true, "categoryID": cat } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T17:24:41.050

使用 jQuery，您可以使用[`jQuery.get()`](http://api.jquery.com/jQuery.get/)或添加`type='GET'`参数到[`jQuery.ajax()`](http://api.jquery.com/jQuery.ajax/). 一些例子：

```
jQuery(function($) {
    $.ajax({
        url : 'your-page.php',
        type : 'GET', 
        data : {
            'paramName' => 'paramValue',
            'foo' => 'bar'
        },
        success : function(data) {
             // do something in the callback function
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T17:25:42.177

您需要传递以下值[`jQuery.get()`](http://api.jquery.com/jQuery.get/)：

```
$.get('yourphppage.php', { categoryID : 1234 }, function(data) { 
    alert(data);
}); 
```

在您的 php 中，只需回显您的 cateogryId 以查看它是否正常工作

```
<?php echo $_GET['categorID'] ?> 
```

# android - 在 Android JUnit 中创建文件

> ID：10539049
> 
> 赞同：6
> 
> 时间：2012-05-10T17:12:25.397
> 
> 标签：android, file, junit

我正在尝试在 Android JUNIT 测试用例设置中创建一个文件：

```
protected void setUp() throws Exception {
        super.setUp();

        File storageDirectory = new File("testDir");
        storageDirectory.mkdir();

        File storageFile = new File(storageDirectory.getAbsolutePath()
                + "/test.log");

        if (!storageFile.exists()) {
            storageFile.createNewFile();
        }
        mContext = new InternalStorageMockContext(storageFile);
        mContextWrapper = new ContextWrapper(mContext);
    } 
```

当我调用 createNewFile 时，我得到一个异常没有这样的文件或目录。是否有从 Android JUNIT 创建文件的标准方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T21:42:52.080

在 Android 中，目录/文件的创建和访问通常由[Context](http://developer.android.com/reference/android/content/Context.html)管理。例如，这通常是我们在应用程序的内部存储下创建目录文件的方式：

```
File testDir = Context.getDir("testDir", Context.MODE_PRIVATE); 
```

查看 API，还有许多其他有用的方法 getXXXDir() 可用于创建/访问文件。

回到 JUnit 主题，假设您使用 ActivityInstrumentationTestCase2 并且您的应用程序项目具有包名称`com.example`，并且您的测试项目具有包名称`com.example.test`：

```
// this will create app_tmp1  directoryunder data/data/com.example.test/,
// in another word, use test app's internal storage.
this.getInstrumentation().getContext().getDir("tmp1", Context.MODE_PRIVATE);

// this will create app_tmp2 directory under data/data/com.example/,
// in another word use app's internal storage.
this.getInstrumentation().getTargetContext().getDir("tmp2", Context.MODE_PRIVATE); 
```

希望这可以帮助。

# jquery - 使用 jQuery 按 ID 定位嵌入的声音元素

> ID：10539051
> 
> 赞同：0
> 
> 时间：2012-05-10T17:12:51.967
> 
> 标签：jquery, audio, bad-request

所以我有一个客户不会听到它不是 1997 年......他们希望他们的导航在鼠标悬停时发出声音。

大多数解决方案似乎是这样的包装：

```
$('body').append('<embed src="g/nav.mp3" autostart="true" hidden="true" loop="false">'); 
```

问题是，根据浏览器的不同，执行会有一些延迟。

我想知道是否有方法可以做到这一点：

```
<embed src="g/nav.mp3" autostart="true" hidden="true" loop="false" id="about-nav-sound"> 
```

和

```
$("#about-nav").hover(
  function () {
    $("#about-nav-sound").play();
  }, 
  function () {
    $("#about-nav-sound").stop();
  }
); 
```

任何人都知道平台无关的方法吗？

# objective-c - 获取给定 UTType 的扩展

> ID：10539052
> 
> 赞同：10
> 
> 时间：2012-05-10T17:12:53.697
> 
> 标签：objective-c, types

我知道我可以使用 UTTypeCreatePreferredIdentifierForTag(kUTTagClassFilenameExtension, extension, NULL) 获取给定扩展的 UTType，但我找不到相反的方法，即给定 UT 的扩展数组......我能做什么?

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T17:27:17.637

`UTTypeCopyPreferredTagWithClass`用于将 UTI 转换为另一个标签，例如文件扩展名：

```
NSString *extension = (__bridge_transfer NSString *)UTTypeCopyPreferredTagWithClass(myUTI, kUTTagClassFilenameExtension); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-03-09T18:24:16.323

## 斯威夫特 5

```
import MobileCoreServices

static func fileExtension(for dataUTI: String) -> String? {
    guard let fileExtension = UTTypeCopyPreferredTagWithClass(dataUTI as CFString, kUTTagClassFilenameExtension) else {
        return nil
    }

    return String(fileExtension.takeRetainedValue())
} 
```

# sql-server - 将带有零星文本限定符的csv导入sql server

> ID：10539053
> 
> 赞同：0
> 
> 时间：2012-05-10T17:13:02.747
> 
> 标签：sql-server, csv, bulk-import

我有一个 csv 文件，其中包含带有零星文本限定符的字段（因为某些字段信息的值中有逗号）

我知道我可以使用格式文件，但格式文件可以处理间歇性文本限定符吗？

这是一个例子

```
5,Company A,1234 Main St, New York, NY, 11111
22,"Company B, Inc.",555 Best Ave, Detroit, MI, 48222
43,Another Company,"3344 Goodie Ave, Apt 2",Seattle, WA 98888
55,Something Else,7684 Something St, Nashville, TN, 37200 
```

请注意，文本限定的字段可以是任何字段

# matlab - 与 Matlab GPGPU 的图像互相关，索引到 3d 数组

> ID：10539056
> 
> 赞同：1
> 
> 时间：2012-05-10T17:13:04.477
> 
> 标签：matlab, gpgpu, cross-correlation

我遇到的问题是编写代码，以便 Matlab 的 GPU 编程的内置功能将正确划分数据以进行并行执行。具体来说，我将 N 个“粒子”图像发送到 GPU 的内存，组织在一个 3-d 数组中，第三维代表每个图像，并尝试将 N 个图像中的每一个与一个代表目标的图像进行比较，也在 GPU 内存中。

我当前的实现，实际上或多或少是我希望看到它实现的方式，是用一行代码：

```
particle_ifft = ifft2(particle_fft.*target_fft); 
```

请注意，这是在对每个上传的图像进行 fft 之后。这就是索引问题：该语句需要相同大小的“particle_fft”和“target_fft”矩阵才能使用“.*”运算符。为了与每个粒子图像进行比较，具有相同目标图像的多个副本在内存使用方面效率低下。我使用这种低效的方法来获得良好的性能结果，但它显着影响了我可以上传到 GPU 的粒子图像的数量。

有没有一种方法可以告诉 matlab 将粒子图像 3d 数组（每个图像）的每个 2d 元素与单个目标图像进行比较？

我尝试使用 for 循环来索引 3d 数组并单独访问每个粒子图像以与单个目标进行比较，但 Matlab 不会在 GPU 上并行化此类操作，即它的运行速度比等效代码慢近 1000 倍使用内存效率低的目标数组。

我意识到我可以编写自己的内核来解决这个索引问题，但我有兴趣找到一种利用 matlab 现有功能的方法（特别是不重写 fft2 和 ifft2 函数）。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:58:12.830

In [Parallel Computing Toolbox release R2012a](http://www.mathworks.co.uk/help/toolbox/distcomp/rn/bs8h9g9-1.html), `bsxfun` was added - I think that's what you need, i.e.

```
bsxfun(@times, particle_fft, target_fft); 
```

See: [http://www.mathworks.co.uk/help/toolbox/distcomp/bsxfun.html](http://www.mathworks.co.uk/help/toolbox/distcomp/bsxfun.html)

# c# - 在按钮 WP7 中将源绑定到图像

> ID：10539057
> 
> 赞同：0
> 
> 时间：2012-05-10T17:13:05.290
> 
> 标签：c#, image, windows-phone-7, bitmap

我实际上是在尝试将图像源绑定到我的按钮中的图像，不知道出了什么问题，但什么也没有出现......

这是我的xml

```
<Grid>
    <Grid x:Name="FakeGridBig" Background="White" Opacity="0.1" 
        HorizontalAlignment="Left" Width="714" Height="269" Margin="3,0,0,0"></Grid>
    <Button  x:Name="Featured_Big" MouseEnter="Featured_Big_MouseEnter_1"
        MouseLeave="Featured_Big_MouseLeave"
        ContentTemplate="{StaticResource FeaturedBig}" 
        Style="{StaticResource BlackOpacityButton}" 
        BorderThickness="0" VerticalAlignment="Top" Margin="0,0,11,0">
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="Click" >
                <gs:EventToCommand Command="{Binding FeaturedBigImage.InnerCommand1}"/>
            </i:EventTrigger>
        </i:Interaction.Triggers>      
        <Image x:Name="bigimage" Height="269" Width="714" ></Image>
    </Button>                       
</Grid> 
```

这是后面的代码，uri其实很好......

```
Uri uri = new Uri(FeaturedSmallImage1.Image1,UriKind.Absolute);
BitmapImage bmp = new BitmapImage(uri);
View.bigimage.Source = bmp; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:29:15.103

我会说你可能与这条线有关......

```
ContentTemplate="{StaticResource FeaturedBig}" 
```

根据该模板的外观，它可能会覆盖您尝试使用的图像。

# ruby - 给定哈希数组，如何在评估另一个键时在哈希的一个键上使用 select？

> ID：10539058
> 
> 赞同：1
> 
> 时间：2012-05-10T17:13:19.783
> 
> 标签：ruby

使用我的哈希数组：

```
data = [{:bool => true, :val => 5}, {:bool => false, :val => 9}, {:bool => true, :val => 1}] 
```

我想遍历数据并仅检索值数组。我可以：

```
data.map{|x| x[:val] if x[:bool]} 
```

返回：

```
[5, nil, 1] 
```

但是这个方法需要一个额外的 .compact 调用来摆脱 nil 值。

有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T17:25:54.980

使用链接来代替首先[`select`](http://ruby-doc.org/core-1.9.3/Array.html#method-i-select)只有那些 where `:bool`is `true`，然后[`map`](http://ruby-doc.org/core-1.9.3/Array.html#method-i-map)是结果`:val`：

```
data.select { |h| h[:bool] }.map { |h| h[:val] }  #=> [5, 1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:16:15.117

`data.map { |x| x[:val] if x[:bool] }.compact`可能是最容易阅读的，但您可以通过以下方式进行一个函数调用`reduce`：

```
data.reduce([]) { |m,x| m << x[:val] if x[:bool]; m } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T09:34:00.790

这似乎不是一种优雅的方式，但你可以试试这个：

```
data = [{:bool => true, :val => 5}, {:bool => false, :val => 9}, {:bool => true, :val => 1}]
result = Array.new
data.each do |b|
val = Hash.try_convert(b)[:val]
result.unshift(val)
end 
```

# jquery - 具有滚动功能的浮动 div

> ID：10539059
> 
> 赞同：0
> 
> 时间：2012-05-10T17:13:40.763
> 
> 标签：jquery

我一直在寻找一个浮动的 div/菜单，它不仅会像下面的示例那样浮动

[http://dropthebit.com/demos/stickyfloat/stickyfloat.html](http://dropthebit.com/demos/stickyfloat/stickyfloat.html)

但是当浮动 div/菜单的高度超过视口的高度时，您可以使用主滚动条来查看高于或低于视口的菜单部分。

但是一旦它到达浮动 div/menu 的末尾，它将根据您滚动的方向锁定在顶部或底部。

每个浮动 div 似乎总是锁定在顶部，如果您有一个不会增长的固定高度，这将非常有用。

要查看上面的浮动 div 示例如何失败，使用 firebug 或 dev 工具使 div 的高度大于视口，它将无法工作。或者只是调整窗口大小，使其短于浮动 div 的高度，当您向下滚动长页面时，您会看到它停止跟随您。

这是一个问题，因为我有一个动态选项菜单，可以扩展 istockphoto 选项等合同，您可以在下面看到它。

[http://www.istockphoto.com/search/text/boxer/source/](http://www.istockphoto.com/search/text/boxer/source/)

您可以看到它如何超出视口。我希望它浮动，但允许您向上或向下滚动，直到到达菜单的上限或下限，然后根据您滚动的方向坚持到顶部或底部。

我希望这是有道理的，我一直在研究一个浮动器，它监视滚动位置和滚动方向，然后使用偏移高度和底部调整滚动元素的边距高度，使外观看起来浮动......等等

对于似乎足够简单的事情来说，这似乎太多了。

如果 div 比视口高度高，有谁知道一个插件可以使浮动 div 与主窗口一起滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:24:29.213

由于您使用的是 jQuery，如果您可以使用 jQuery UI，它们支持对话框：http: [//jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

然后你可以设置 min-height, min-width, 允许框跨越内容一样大, 或者你可以使用 height/width 设置只允许一定的大小, 然后溢出:auto 允许滚动酒吧。

# axapta - 如何覆盖/控制表单的 super() 调用中的默认查找以进行查找？

> ID：10539064
> 
> 赞同：2
> 
> 时间：2012-05-10T17:14:04.370
> 
> 标签：axapta, x++

特别是 \Forms\SalesCreateOrder\Data Sources\SalesTable\Fields\CustAccount\lookup

**super() 调用去哪里了？是什么决定了填充这个的字段？**

EDT 是 CustAccount，我没有看到“FormHelp”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:23:26.933

`super()`调用控件的方法，该`performDBLookup`方法创建查找表单。

您可以在[Axaptapedia](http://www.axaptapedia.com/index.php?title=Lookups#Automatic_lookups)上阅读所有相关信息。

> Axapta 使用一个简单的系统来确定在自动创建的查找中显示哪些字段。如果未进行特殊更改，则查找中显示的字段由基表中的以下信息确定：
> 
> *   负责关系的字段
> *   标题字段1
> *   标题字段2
> *   表的每个索引的第一个字段（按 index-id 的顺序）

# xcode - Xcode 4.2 重置默认布局

> ID：10539065
> 
> 赞同：2
> 
> 时间：2012-05-10T17:14:12.263
> 
> 标签：xcode, layout, window, xcode4.2

我不知道我做了什么，但我的观点完全被搞砸了。它现在一次只显示一个窗口（例如：仅编辑器），无论我在顶部的“视图”面板上更改什么设置，似乎都没有任何帮助。有没有办法将 Xcode 4.2 恢复为其默认布局？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-07T20:27:27.517

您必须手动启用“视图”选项卡中的所有工具栏。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-02T02:52:12.490

正如MrHappy所说...

### 第1步：

[屏幕截图 2013-08-01 在 10.50.02 PM.png http://img405.imageshack.us/img405/2723/kh3p.png](http://img405.imageshack.us/img405/2723/kh3p.png)

### 第2步：

单击工具栏右上角的所有视图按钮：

[oeqm.png http://img825.imageshack.us/img825/6383/rdth.png](http://img825.imageshack.us/img825/6383/rdth.png)

完毕。

# java - 基于 GIS 的报告和维护工具

> ID：10539068
> 
> 赞同：1
> 
> 时间：2012-05-10T17:14:21.017
> 
> 标签：java, report, gis, crud, interactive

## 背景

从概念上讲，我正在寻找一种工具或软件工具套件，可以很容易地集成以帮助使用基于 GIS 的地图（例如 Google 地图）浏览数据。建议的架构类似于但不限于以下内容：

![](../Images/085f039ef97411d198c8e4861366cf78.png)

上面显示的技术不是固定的。例如，如果 OpenGEO 可以消除许多组件，同时添加其他未列出的组件（例如身份验证和授权），那将是最有帮助的。

从本质上讲，该架构归结为：

```
Map -> Filter sites -> Select sites -> CRUD 
```

和：

```
Map -> Filter sites -> Select sites -> Summary Reports 
```

以下部分使用假设（粗笔）示例更详细地描述了这两个问题。

## 问题 - CRUD

在第一个屏幕中，提示用户按一些任意标准（团队名称、地区、技能、设备等）进行过滤并选择一些站点：

![](../Images/a44a1c1b3377c5dc11366107abe09c05.png)

匹配过滤选项的站点会显示在地图上，然后会向用户显示一些可用于编辑数据的选项：

![](../Images/e262276d29329938bc407823559c2c43.png)

如果用户选择人员，系统会提供一个 CRUD 屏幕：

![](../Images/565b20cbfcbd329c261cc96961d61cb2.png)

CRUD 屏幕可能相当复杂，有简单的代码表来驱动它们，例如：

![](../Images/4e6e3dabd4b18d7375b26dc0b532c5a4.png)

## 问题 - 报告

问题的第二部分与第一部分非常相似，但用户可以选择生成报告，而不是访问 CRUD 屏幕：

![](../Images/2fb6634644de990012fecf53cf423279.png)

请注意，用户已经选择了要报告的站点。如果用户选择设备选项，则会生成带有汇总数据的报告：

![](../Images/f21682c624dc784667e71416bd930ba1.png)

## 问题

哪些现成的软件工具可以提供大部分（如果不是全部）这些功能？

注意：交互不必完全如图所示，但主要用例必须是可能的。

### 用例 1 - 填充数据库

1.  在地图上定义区域。
2.  将站点 [建筑位置] 放在地图上。
3.  插入数据（针对每个站点）。

### 用例 2 - 选择

1.  系统显示地图。
2.  用户按地区和其他条件过滤。
3.  用户选择站点。
4.  系统提供选项（维护或报告）。

### 用例 3 - 维护

1.  用户选择维护。
2.  系统呈现复杂的 CRUD。
3.  用户可以添加、编辑或删除数据。

### 用例 4 - 报告

1.  用户选择报告。
2.  用户选择要生成的报告类型。
3.  系统生成汇总报告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T18:05:35.023

[m-Power](http://www.mrc-productivity.com/products/index.html)可以处理您上面提到的一切。它是一种基于开放式架构的 Web 应用程序开发工具，可轻松与其他软件集成。如果您想查看 m-Power 的架构，这里有一个指向[m-Power 技术堆栈](http://www.mrc-productivity.com/products/specs.html)图的链接。

此外，这里有一些使用 m-Power 构建的演示应用程序的链接，这些链接类似于您在上面描述的内容：

[谷歌地图应用程序](http://crazybikes.com/mrcjava/servlet/CBB2E.I00190s)：在谷歌地图上绘制数据。可以轻松地与数据库 CRUD 应用程序或报告应用程序集成以创建您上面提到的应用程序。

[维护订单卡车分配（带地图）](http://crazybikes.com/mrcjava/servlet/CBB2E.R00170s?run=2)：让用户通过拖放或选择地图上的任何项目来更新他们的数据库。还可以轻松地与数据库 CRUD 应用程序或报告应用程序集成，以创建您上面提到的应用程序。

[数据库 CRUD 应用程序](http://www.crazybikes.com/mrcjava/servlet/CBB2E.M00020s)：我列出此应用程序是因为它可以集成到上述映射应用程序中，以创建您在上面描述的示例中找到的数据库 CRUD 功能。

[基本报告](http://www.crazybikes.com/mrcjava/servlet/CBB2E.R00060s?run=1&S_SHIPYR=1&S_CLASS=1)：我列出此应用程序是因为它还可以与地图应用程序集成以创建上述示例的报告功能。

这四个应用程序与您的问题中列出的应用程序最相似，但您也可以查看该演示站点中的其他应用程序，以更好地了解 m-Power 还可以构建什么。还值得注意的是，m-Power 没有运行时或分发费用，因此您可以嵌入和分发应用程序而无需额外费用。

# php - 使用 jQuery、Ajax 和 PHP 的评论系统？

> ID：10539069
> 
> 赞同：0
> 
> 时间：2012-05-10T17:14:22.153
> 
> 标签：php, jquery, comments

有 50 张图片可以添加/删除评论，哪一种更好的实现方式？

> 1）为每个图像创建一个单独的表单。将数据添加到表单并发布？（我认为将创建 50 个表格和 50 个用于删除的表格）
> 
> 2) 使用 Jquery 从文本框和 ID 中选择文本，然后使用 Ajax 发布？

我认为网站

[http://pinterest.com/](http://pinterest.com/)

正在使用方法 1 并且

Facebook

我们使用方法 2 吗？哪一个更好 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:21:47.290

我会使用第二种方法，它更现代，您不必重新加载页面即可执行操作。

但这不是一个有明确答案的问题，因为这两种方法都可以正常工作。

**更新：**这是删除评论的教程[http://papermashup.com/jquery-ajax-delete/](http://papermashup.com/jquery-ajax-delete/)

添加一个它基本上是相同的方法，但是您发送参考图像ID和评论文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T20:58:39.347

对于方法 2，类似这样的方法将起作用：

```
//LISTEN FOR YOUR SUBMIT COMMENT BUTTON TO FIRE
$("#commentButton").live('submit', function(e) {

    //GET COMMENT
    com = $("#commentField").text();

    //POST COMMENT
    $.post("commentsystem.php", { user: user, comment: com} );

}); 
```

# mysql - 具有不同 where 子句的表总和的 MySQL 总和

> ID：10539070
> 
> 赞同：0
> 
> 时间：2012-05-10T17:14:26.677
> 
> 标签：mysql, sum, where, multiple-tables

尝试对每个表具有不同 where 条件的不同表中的多个总和进行求和。

这是我的3个总和：

```
SELECT SUM(1column2) FROM table1 WHERE 1column1 = '0';
SELECT SUM(1column4) FROM table1 WHERE 1column3 = '0';
SELECT SUM(2column2) FROM table2 WHERE 2column1 = '0' AND 2column3 = 'w' AND 2column4 != 'f'; 
```

结果需要`(first sum) - (second sum) - (third sum)`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T17:20:51.820

MySQL 支持基本运算符，因此您应该能够执行以下简单操作：

```
SELECT (SELECT SUM(1column2) FROM table1 WHERE 1column1 = '0') - (SELECT SUM(1column4) FROM table1 WHERE 1column3 = '0') - (SELECT SUM(2column2) FROM table2 WHERE 2column1 = '0' AND 2column3 = 'w' AND 2column4 != 'f'); 
```

我确信这可以优化，但这应该会给你你需要的东西（如果没有更好的关系信息，优化会很困难）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:19:16.003

您可以将这些查询中的每一个作为执行所需求和的外部查询的子查询：

```
SELECT
    (SELECT SUM(1column2) FROM table1 WHERE 1column1 = '0')
  - (SELECT SUM(1column4) FROM table1 WHERE 1column3 = '0')
  - (SELECT SUM(2column2) FROM table2 WHERE 2column1 = '0' 
      AND 2column3 = 'w' AND 2column4 != 'f'); 
```

# jquery - jQuery - 根据类位置分隔 li 组

> ID：10539073
> 
> 赞同：-1
> 
> 时间：2012-05-10T17:14:28.000
> 
> 标签：jquery, html-lists

我有一组 li 剧集。每个组在点击时只能有一个红色类，但只能来自该组。每个组的定义如下所示（分为 3 组），如下所示：

1.  li 有 .newseason 并且在它之后的任何 li 在再次进入 newseason 之前都是一个组。

2.  第一个 .newseason 之前的所有列表

html:

```
<ul id="seasons">

<li class="red">Episode 1</li>
<li>Episode 2</li>
<li>Episode 3</li>

<li class="newseason">Episode 1</li>
<li class="red">Episode 2</li>
<li>Episode 3</li>

<li class="newseason">Episode 1</li>
<li>Episode 2</li>
<li class="red">Episode 3</li>
<li>Episode 4</li>

</ul> 
```

jQuery：

```
$('li').live('click',function(){
//add .red to clicked li in group and remove previous .red from same group
}); 
```

[这是小提琴](http://jsfiddle.net/89PgF/)

每个组怎么可能只有一个点击时的红色类，但只能来自该组？我想知道如何在不添加任何父类的情况下基于 .newseason 类来完成它。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:22:37.313

我会继续将“组”分成单独的 UL 标记（正如 Johannes 上面也建议的那样），使代码如下所示：

HTML：

```
<ul>
    <li>Episode 1</li>
    <li>Episode 2</li>
    <li>Episode 3</li>
</ul>

<ul>
    <li>Episode 1</li>
    <li class="red">Episode 2</li>
    <li>Episode 3</li>
</ul>

<ul>
    <li>Episode 1</li>
    <li>Episode 2</li>
    <li class="red">Episode 3</li>
    <li>Episode 4</li>
</ul>​ 
```

和 JS：

```
$('li').live('click',function(){
    $(this).parent().find('li.red').removeClass('red');
    $(this).addClass('red');
});​ 
```

您可以在 JSFiddle 上查看：http: [//jsfiddle.net/w8sUz/](http://jsfiddle.net/w8sUz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:37:54.797

要将所有内容保持在同一个 UL 元素中（就像您提到的那样），您应该这样做... [http://jsfiddle.net/w8sUz/4/](http://jsfiddle.net/w8sUz/4/)

我确信可能有更好/更优化的方法来实现这一点，但这有效。

HTML

```
<ul class="seasons">
  <li class="newseason">Episode 1</li>
  <li class="red">Episode 2</li>
  <li>Episode 3</li>

  <li class="newseason">Episode 1</li>
  <li class="red">Episode 2</li>
  <li>Episode 3</li>

  <li class="newseason">Episode 1</li>
  <li>Episode 2</li>
  <li class="red">Episode 3</li>
  <li>Episode 4</li>
</ul>​ 
```

JS：

```
$('li').live('click',function(){
    $(this).addClass('red');
    if( !$(this).hasClass('newseason') )
    {
        var prev = $(this).prev();
        while( prev.parent().attr('class') == 'seasons' )
        {
            if( prev.hasClass('red') )
            {
                prev.removeClass('red');
                return true;
            }
            if( prev.hasClass('newseason') )
            {
                break;
            }
            prev = prev.prev();
        }
    }        

    var next = $(this).next();
    while( next.parent().attr('class') == 'seasons' )
    {
        if( next.hasClass('newseason') )
        {
            break;
        }
        if( next.hasClass('red') )
        {
            next.removeClass('red');
            return true;
        }
        next = next.next() ;
    } 
});​ 
```

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T17:20:47.173

试试这个：

```
$('li').live('click',function(){
$('.red').removeClass('red');
$(this).addClass('red'); 
```

# java - 在代码中更改 Android 设备名称

> ID：10539074
> 
> 赞同：0
> 
> 时间：2012-05-10T17:14:50.827
> 
> 标签：java, android

我正在尝试更改我的程序当前正在运行的 Android 设备的名称，因为该设备的名称将包含与其他手机通信时相关的信息。手机名称会随着手机扫描其他手机并计算信息而不断变化。关于如何在 java 代码中更改手机名称的任何想法？我无法想象它只是几行代码，但我找不到任何东西。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:45:56.443

这很容易，获取一个蓝牙适配器的实例（因为您可以设置的唯一名称是我认为的蓝牙名称）引用本地设备并调用`setName("newName");`它。

```
BluetoothAdapter myDevice = BluetoothAdapter.getDefaultAdapter();
                 myDevice.setName("new name"); 
```

**引用文档：**

> 使用 UTF-8 编码的有效蓝牙名称最多为 248 个字节，尽管许多远程设备只能显示前 40 个字符，有些可能仅限于 20 个。

因此，请注意您设置为设备名称的内容。哦，另一方面，如果设备蓝牙关闭，您将无法更改名称。因此，检查后的实际代码将类似于以下内容：

```
BluetoothAdapter myDevice = BluetoothAdapter.getDefaultAdapter();
if(myDevice.getState() == BluetoothAdapter.STATE_ON){
    myDevice.setName("new name");
} 
```

**需要注意的重要事项：** 如果您要在模拟器上进行测试，请注意模拟器上没有蓝牙功能，因此该`getDefaultAdapter()`方法返回 null，导致`NullPointerException`:)

# java - 外部系统集成最佳实践

> ID：10539079
> 
> 赞同：2
> 
> 时间：2012-05-10T17:15:15.660
> 
> 标签：java, architecture, integration

关于与外部系统集成的最佳实践是什么的快速问题。

我们有一个系统来处理我们用自己的对象代表的公司。我们还通过返回组织对象的 SOAP 使用外部系统。它们非常相似但不相同（我们的是它们的子集）。

我的问题是，我们是否应该通过 Facade 包装 SOAP 服务以便仅将 Company 对象返回给我们的应用程序，或者我们是否应该返回另一种类型的对象（例如 OrgCompany），或者甚至只是在我们的代码中使用 Organization 对象。

SOAP 服务和组织对象由我们无法控制的外部公司（银行）定义。

非常感谢任何建议和理由。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T17:35:25.373

我的两分钱，将外部对象引入应用程序始终是一个问题。尤其是在维护期间。一个小的服务更改可能会导致应用程序中的大代码更改。

在外部服务和应用程序之间有一个抽象层总是好的。我建议创建一个服务层，它将外部服务对象转换为您的应用程序域对象并在应用程序中使用它们。清晰的分离/解耦有助于维护。

下图描述了上述内容。

![在此处输入图像描述](../Images/db7bd6e1fa644e0280289f28380be7ea.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:42:17.460

我想不出使用其他公司控制的对象的任何情况。您应该做的第一件事是将这些对象连接到您自己的对象中。此外，通过拥有自己的对象，您可以将它们的功能扩展到您连接的第三方提供的功能之外（例如，如果将来您需要与多个公司对象提供者交谈）

查看[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T17:45:54.447

您在这里的决定是您希望如何管理应用程序中的外部代码依赖项。一些影响您决定的因素： 1) API 多久更改一次，更改的预期性质是什么？2）您的应用程序在其依赖之外的用途是什么？如果您删除了 SOAP 服务依赖项，您的应用程序是否仍然有用？

一种防御方法是围绕 SOAP 服务构建外观或适配器，以便您的代码仅依赖于您的对象模型。这为您提供了很多控制权，并且代码/逻辑与服务之间的耦合相对松散。您为此控件付出的代价是，当 SOAP 合同发生更改时，您通常还必须更改代码层。

另一种方法是直接使用从 WSDL 获得的对象。当在您的应用程序中引入客户端代码之间的间接级别没有意义时，这是有益的，即您的应用程序只是一个不同系统的馈送器，而应用程序的全部意义在于将组织对象填充到一个JMS 管道或类似的东西。如果 SOAP API 契约从不改变，并且您不希望应用程序的输出发生太大变化，那么引入额外的间接层只会长期阻碍代码库的可读性。

根据我的经验，大多数 j2ee 开发人员倾向于采用前一种方法，这既是因为他们的应用程序的性质，也是因为他们希望将他们的应用程序逻辑与数据源的细节分开。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T18:26:04.540

我支持 Sridhars 的建议，我只想补充一点，以便将外部服务对象翻译到您的应用程序域，您可以使用 Dozer：

[http://dozer.sourceforge.net/documentation/mappings.html](http://dozer.sourceforge.net/documentation/mappings.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T17:38:23.607

我通常总是将外部定义的域对象[调整](http://en.wikipedia.org/wiki/Adapter_pattern)为内部表示。

我还针对外部域对象创建了一套全面的测试，如果外部供应商发布新版本，它将快速突出任何问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T17:42:03.607

[企业服务总线](http://en.wikipedia.org/wiki/Enterprise_service_bus)架构在这里可能很有用

> 它的主要用途是异构和复杂环境的企业应用程序集成。

（来自[维基百科](http://en.wikipedia.org/wiki/Enterprise_service_bus)）

如果您正在寻找开源解决方案，我会查看开源[Mule](http://www.mulesoft.org/)

# javascript - 按钮调用javascript函数错误

> ID：10539082
> 
> 赞同：2
> 
> 时间：2012-05-10T17:15:26.117
> 
> 标签：javascript, asp.net-mvc

在我看来，我想要两个按钮来填充表单的三个隐藏字段并提交它。它不起作用，我不知道为什么。有任何想法吗？

我有以下代码：

```
<script language="javascript" type="text/javascript">
    function FillAndSubmit(thisid) {
        $('input[name=First]').val(thisid);
        $('input[name=Second]').val(@Model.ID);
        $('input[name=Third]').val(@ViewBag.Something);
        document.form.submit();
    }
</script> 
```

A 有一个带有不可见字段的表单：

```
@using (Html.BeginForm(null, null, FormMethod.Post, 
                       new { name = "form", id = "form" }))
{
    @Html.Hidden("First")
    @Html.Hidden("Second")
    @Html.Hidden("Third")
} 
```

还有两个按钮：

```
<button class="Button" id="ButtonA" onclick="javascript:FillAndSubmit(this.id);">
    CaptionA
</button>
<button class="Button" id="ButtonB" onclick="javascript:FillAndSubmit(this.id);">
    CaptionB
</button> 
```

如果我将按钮放在表单范围内，它会提交但不填充隐藏字段。因此，它只是不调用该函数。Javascript 在同一应用程序的其他页面中运行。

**添加：**

生成源：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Title</title>
    <link href="/Content/Site.css" rel="stylesheet" type="text/css" />
    <script src="/Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
    <script src="/Scripts/modernizr-1.7.min.js" type="text/javascript"></script>
</head>

<body>
    <script language="javascript" type="text/javascript">
        function Botao(thisid) {
            $('input[name=First]').val(thisid);
            $('input[name=Second]').val(41); 
            $('input[name=Third]').val(10/5/2012 1:58:02 PM);
            document.form.submit();
        }
</script>

...
Some div's with some text
...

<form action="/Controller/Action/" id="form" method="post" name="form"><input id="First" name="First" type="hidden" value="" /><input data-val="true" data-val-required="The DateTime field is required." id="Second" name="Second" type="hidden" value="10/5/2012 1:58:02 PM" /><input id="Third" name="Third" type="hidden" value="" /></form>        
    <button class="Button" id="ButtonA" onclick="javascript:Botao(this.id);">
        CaptionA
    </button>

    <button class="myButton" id="ButtonB" onclick="javascript:Botao(this.id);">
        CaptionB
    </button>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T17:36:44.590

这需要引号：

`$('input[name=momentoDaConsulta]').val("10/5/2012 1:58:02 PM");`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T17:45:29.517

JQuery`.val(value)`接受字符串或字符串数​​组，在 and 周围`@Model.ID`加上引号`@ViewBag.Something`：

```
 $('input[name=Second]').val("@Model.ID");
    $('input[name=Third]').val("@ViewBag.Something"); 
```

# join - Google Analytics 中的事件跟踪是否与内置指标相关联？

> ID：10539084
> 
> 赞同：0
> 
> 时间：2012-05-10T17:15:35.557
> 
> 标签：join, google-analytics, metrics, event-tracking

在 Google Analytics (GA) 中，我正在使用事件跟踪，并希望对事件进行查询，*加入*相关的指标，例如`Page`、`Source`等。在 GA 中，事件是与这些指标相关联还是完全独立？这篇文章（[Google Analytics Event Tracking by Page](http://blog.shufflepoint.com/2011/05/google-analytics-event-tracking-by-page.html)）似乎暗示它们是相关的，但想验证一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T03:19:47.280

他们是。

您可以构建自定义报告，从源向下钻取到事件类别，然后是操作和标签。或者从页面向下钻取到事件的自定义报告或其他方式。

# objective-c - 导航按钮点击外部

> ID：10539086
> 
> 赞同：2
> 
> 时间：2012-05-10T17:15:39.533
> 
> 标签：objective-c, uinavigationbar

我创建了这样的自定义导航按钮：

```
 UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom];
  [button setImage:[UIImage imageNamed:@"some.png"] forState:UIControlStateNormal];
  ....
  [[current navigationItem] setLeftBarButtonItem:[[UIBarButtonItem alloc] initWithCustomView:button]]; 
```

当前是 UIViewController * 类型。一切正常并创建了按钮，但它是按钮外部的可点击区域，非常靠近导航栏的中间。是否可以限制可点击区域？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T18:10:28.243

我相信那是iOS的“功能”。左侧和右侧的导航按钮小于 iOS 中允许的最小触摸区域。因此，实际点击区域比物理 NavigationButton 大得多。包括在栏的下方，就像您注意到按钮的左侧和右侧一样。它允许快速触摸而无需“查看”您触摸的位置。这是早期 iPhone 比大多数安卓手机更自然使用的关键原因之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:07:18.320

我最好的猜测是按钮设置为图像居中而不是缩放它，所以按钮的框架太大了。

`button.frame=CGRectMake(x,y,w,h)`

将框架设置为您想要的可点击区域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T18:14:32.920

我最初考虑将`UIBarButtonItem`and override子类化`-touchInside:`。

但这不起作用，因为`UIBarButtonItem`它不是`UIView`.
因此，如果不覆盖某些私有 API，您想要实现的目标是不可能的。

# oauth-2.0 - 如何使用具有 GET 参数的 Redirect_URL 在 JS 中进行 Soundcloud Auth Dance

> ID：10539087
> 
> 赞同：0
> 
> 时间：2012-05-10T17:15:43.710
> 
> 标签：oauth-2.0, soundcloud

** 我目前正在实施花哨的 URL，看看这些是否“解决”了这个问题。例如 /me/soundcloudconnect 而不是 index.php?c=me&a=soundcloudconnect via mod_rewrite **

我一直在使用 Soundcloud JS SDK 和 SC.Connect() 等函数，它们可以自动执行大部分身份验证过程。我一直在使用一个普通的 html 文件：sc.html，它工作得很好，让我可以得到 /me/ 和 /me/tracks 等。

然而我现在意识到了吗？我需要自己执行身份验证，因为我需要添加如下所述的状态变量，以便将这些参数添加到 Redirect_URI 的末尾。

[http://groups.google.com/group/soundcloudapi/browse_thread/thread/7bddbc296f3b80af](http://groups.google.com/group/soundcloudapi/browse_thread/thread/7bddbc296f3b80af)

我试图重定向回的 URL 是：

index.php?c=me&a=soundcloudconnect

这是 'me' 控制器和 'soundcloudconnect' 动作。

那么有人可以指出我正确的方向吗？

我希望能够使用 SC.Connect() 等（但也能够获取和保存令牌）以及重定向回上面的 URI

或者，我需要做同样的事情（身份验证和存储令牌）但不使用 SC.Connect() 而是使用普通 JS。

我读到 Soundcloud 开发人员支持是通过 Stackoverflow - 所以希望有人可以提供帮助？

具有工作 SC Auth 的普通 HTML 文件：http: [//socialartist.co/sc.html](http://socialartist.co/sc.html)

不适用于 SC Auth 的动态页面： [http ://socialartist.co/index.php?c=me&a=soundcloudconnect#](http://socialartist.co/index.php?c=me&a=soundcloudconnect#)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T20:22:17.200

问题可能是那些查询参数干扰了原始 url。例如[http://www.soundcloud.com/register/?token=blagha23412&redirect_uri=http://anydomain.com/index.php?c=me&a=soundcloudconnect](http://www.soundcloud.com/register/?token=blagha23412&redirect_uri=http://anydomain.com/index.php?c=me&a=soundcloudconnect)

SoundCloud 如何区分您的参数及其参数？您也许可以将 redirect_uri 值用引号括起来。

另一种方法可能是使用路径作为参数。例如[http://anydomain.com/index.php/me/soundcloudconnect](http://anydomain.com/index.php/me/soundcloudconnect)然后您应该能够从服务器上的路径中获取您需要的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T21:37:05.153

** 解决了！！**

如果您需要将参数传递给 SC 连接/身份验证，那么唯一的方法是通过 mod_rewrite 设置花哨的 url。

这里“似乎”有另一种方法，但您需要分两步进行身份验证，而不是通过 SC.Connect。

[http://groups.google.com/group/soundcloudapi/browse_thread/thread/7bddbc296f3b80af](http://groups.google.com/group/soundcloudapi/browse_thread/thread/7bddbc296f3b80af)

我试图让 URL_redirect 使用：

index.php?c=me&a=soundcloudconnect

但最后只使用了有效的花式 URL

[http://socialartist.co/me/soundcloudconnect](http://socialartist.co/me/soundcloudconnect)

# ruby-on-rails - 如何重定向 Rails 中的所有路由

> ID：10539091
> 
> 赞同：2
> 
> 时间：2012-05-10T17:16:14.957
> 
> 标签：ruby-on-rails, routes

我在 mydomain.com 上有一个可用的私有 beta Rails 应用程序。所有路线都有效。

但是，我想在根目录上有一个登录页面，并隐藏所有其他路线。用户将无法在不知道特定扩展名的情况下访问任何其他页面（例如，mysecretsubdomain.mydomain.com 或 mydomain.com/mysecretsubdomain）。

在不更改 routes.rb 中所有现有路由的情况下，我应该如何做到这一点？

非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T17:21:10.027

在应用程序控制器中使用 a`before_filter`检查特定参数，如果不正确则重定向。

# java - 如何对通过反射创建的对象进行类型转换以运行方法？

> ID：10539094
> 
> 赞同：2
> 
> 时间：2012-05-10T17:16:24.210
> 
> 标签：java, reflection

我很难找到如何在使用反射时对动态创建的类进行类型转换。

```
String s;
...
Class unknownClass = Class.forName(s); 
Constructor defaultConstructor = unknownClass.getConstructor(null);

Object retobj = defaultConstructor.newInstance(null);
retobj.Writeout(); // This won't work since; 
```

对象类没有称为 Writeout 的方法，但这是由此处动态创建的其他九个可能的类共享的方法的名称（不用说每个 Writeout 方法都做单独的事情）。有什么建议么 ？提前谢谢您的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T17:22:46.433

使用反射卢克...

```
Method writeOutMethod = unknownClass.getMethod("Writeout", new Class[]{});
writeOutMethod.invoke(retobj, new Object[]{}); 
```

或者，确保您的对象实现一个众所周知的*接口*（干净的方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:20:40.060

投射它：

```
 ((YourObjectWithThatMethod) retobj).Writeout(); 
```

编辑（见 Kevin Welker 的评论）：

如果所有 9 个类都实现了相同的接口，则可以将每个类强制转换为该接口：

```
 ((YourInterface) retobj).Writeout(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T17:21:37.573

9 个类都应该实现一个`Output`声明`writeOut()`方法的接口（我们称之为它）。因此，代码将是：

```
Output retobj = (Output) defaultConstructor.newInstance(null);
retobj.writeOut(); 
```

请注意，您可以只使用`unknownClass.newInstance()`来调用无参数构造函数。

旁注：请尊重 Java 命名约定：方法以小写字母开头。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T17:21:51.563

如果所有九个类共享一个超类或一个声明/实现的接口，`writeOut`那么您可以`retobj`转换为该接口然后调用它。

```
public interface Writable {
    public void writeOut();
} 
```

然后每个类都需要在类声明中拥有。

```
class MyClass implements Writable {
} 
```

然后你可以说

```
((Writable) retobj).writeOut(); 
```

# c# - 使用 Sharpen 和 eclipse：错误“在注册表中找不到应用程序“shapen.core.application”。”

> ID：10539105
> 
> 赞同：4
> 
> 时间：2012-05-10T17:17:16.413
> 
> 标签：c#, java, converter, sharpen-tool

## 背景

我目前正在做一个将java代码转换为c#的解决方案基准测试我们有一个快速发展的java软件，不想用工具移植一些低级（不是ui）api，因为维护版本之间的所有更改可能真的很烦人...无论如何，我一直在尝试使用 Sharpen，因为我听说它是​​一些单声道“怪胎”用来控制他们工具的某些版本的一个非常邪恶的工具。

## 我做了什么

*   为此，我尝试了在互联网上找到的几个教程，最容易理解的是[http://www.pauldb.me/post/14916717048/a-guide-to-sharpen-a-great-tool-for-converting-爪哇](http://www.pauldb.me/post/14916717048/a-guide-to-sharpen-a-great-tool-for-converting-java)
*   由于他为预构建锐化插件提供的链接现在已损坏，我使用此处找到的源代码和说明构建了我自己的插件版本：[https ://github.com/xamarin/XobotOS/](https://github.com/xamarin/XobotOS/)

## 结果

该插件构建完美，并安装在我的 eclipse 文件夹中。但是，当我在设置完所有内容后尝试运行 ant 脚本时，出现错误：

> java.lang.RuntimeException：在注册表中找不到应用程序“shapen.core.application”。

## 结论

好。我在这里迷路了。我不知道那是什么意思。

*   我正在使用 Windows 7 64 位
*   我正在使用 Eclipse 3.7
*   我正在使用 java 6 sdk 64 位

如果有人遇到这个并有解决方案......那会很有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T12:26:53.457

最初，我尝试了与您相同的方法，结果相同。但是，如果您按照[README.build](https://github.com/xamarin/XobotOS/blob/master/README.build)文件的*设置*部分中的说明进行操作，您应该能够启动包含有sharpen.core 和sharpen.xobotos 插件的辅助Eclipse 应用程序。

然后，您可以将要转换的 Java 项目导入辅助 Eclipse 应用程序，前提是您已将 Sharpen Xobot 构建器命令和性质包含到您的项目文件中，例如 XobotOS/android 文件夹中的这个[.project](https://github.com/xamarin/XobotOS/blob/master/android/.project)文件。我在导入项目之前手动编辑了 .project 文件，但我假设您也可以在 Eclipse 中配置它？

[Paul Du Bois](http://www.pauldb.me/post/14916717048/a-guide-to-sharpen-a-great-tool-for-converting-java)提供的配置文件不适用，您需要从 XobotOS/android 文件夹中复制和编辑[converter-config.xml文件。](https://github.com/xamarin/XobotOS/blob/master/android/converter-config.xml)该文件又引用了*app*子文件夹中的一个文件，该文件可能也需要被复制和编辑。

到目前为止，这基本上是我所能接受的。我已经能够编辑配置文件以使转换器能够运行，但此时我只能生成 C# 存根。如果您或其他人设法更进一步，我将很高兴学习如何使用 XobotOS Sharpen 转换器生成真正的 C# 文件。

**更新**

问 Miguel de Icaza 是否有任何使用 XobotOS Sharpen 版本转换任意 Java 项目的说明。他回应说，这个版本中有很多硬编码的细节，很难应用于任意项目。在这个阶段，他推荐使用[Lluis Sanchez 的 Sharpen](https://github.com/slluis/sharpen)版本。

顺便说一句，NGit 库已移至[此处](https://github.com/mono/ngit)。您将在 gen/plugins 子文件夹中找到一个功能齐全的 Eclipse[锐化插件。](https://github.com/mono/ngit/blob/master/gen/plugins/sharpen.core_1.0.0.jar)

**5月17日更新**

请注意，您需要在 Eclipse 中安装*插件开发环境*软件才能构建和运行插件项目。如果您正在运行*Eclipse IDE for Java (SE) Developers*，则需要使用 PDE 软件对其进行扩展。

# c# - 更新gridview中的一行时，标签中的catch约束唯一值错误

> ID：10539107
> 
> 赞同：0
> 
> 时间：2012-05-10T17:17:31.157
> 
> 标签：c#, asp.net

我有一个 gridview 和 sqldatasource 来将数据从 datatable 绑定到 gridview 。

当我用一个新的单元格更新一个值，并且该值已经存在于 gridview 的其他单元格中时，我将得到唯一值的约束错误。

如何捕获该错误并在标签中显示文本以警告用户该值已存在？所以，我没有从事件中向 gridview 添加一些东西，也没有什么我可以捕捉到的。我只是在编辑gridview。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:26:12.990

为那里添加一个处理程序`OnRowUpdated`并处理错误：

例子：

```
OnRowUpdated="GridViewUpdateEventHandler"

protected void GridViewUpdateEventHandler(Object sender, GridViewUpdatedEventArgs e)
{
    if(e.Exception!=null)
    {
       lblForError.Text="Unable to update"; //etc
    }
} 
```

其他人建议您这样做，`OnRowUpdating`但这是如果您想在实际允许更新继续**之前进行验证。**如果您决定要走这条路线，您需要做的就是将参数设置`e.Cancel`为 True，`GridViewUpdateEventArgs`如下所示：

```
e.Cancel=true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:22:30.273

我认为您想定义您的插入/插入处理程序，并且这些处理程序的参数包含从数据库抛出的任何异常。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.inserted.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.inserted.aspx)

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasourcestatuseventargs.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasourcestatuseventargs.aspx)

# jquery - 对于使用 phonegap 的 ajax 获取请求，document.cookie 为空

> ID：10539112
> 
> 赞同：2
> 
> 时间：2012-05-10T17:17:41.687
> 
> 标签：jquery, android, ajax, cordova

我正在使用**PhoneGap**（模仿 PhoneGapHelloWorld 示例）和**jQuery**编写我的第一个 android 应用程序。我对我的 django 服务器使用**AJAX GET**请求，它使用**csrftoken** cookie 进行响应。我可以在 HTTP 响应标头的 Fiddler 输出中看到这个 cookie，但是当我尝试使用**document.cookie**在 javascript 代码中访问它时，它返回 null。请高手帮忙！！！

请在下面找到所有相关的代码片段和输出。

*   **响应标头（来自 Fiddler 输出）**

> HTTP/1.0 200 OK 日期：2012 年 4 月 29 日星期日 18:25:46 GMT 服务器：WSGIServer/0.1 Python/2.7.2 最后修改时间：2012 年 4 月 29 日星期日 18:25:46 GMT 过期时间：2012 年 4 月 29 日星期日18:25:46 GMT 内容类型：文本/html；charset=utf-8 变化：Cookie 缓存控制：max-age=0 设置 Cookie： **csrftoken** =97c5b4b7b39ef7f54e09a55157b5ae9e；过期=星期日，2013 年 4 月 28 日 18:25:46 GMT；最大年龄=31449600；Path=/ Set-Cookie: sessionid=b1d29d8a6adc02be41e8cc3951b791fb; 路径=/

*   **Javascript (jQuery)**

```
 document.addEventListener("deviceready", onDeviceReady, false);

    function onSuccess(data, status, xhr) {
        alert(document.cookie);
    }

    function onDeviceReady() {
       $.ajax({type : 'GET',
          url: "http://someurl.com/",
          success: onSuccess
         });
    } 
```

# jquery - 专注于下一个输入（jquery）

> ID：10539113
> 
> 赞同：23
> 
> 时间：2012-05-10T17:17:50.823
> 
> 标签：jquery

我有四个输入，每个输入一个数字。我想要做的是在设置数字后自动将焦点设置到下一个输入。它们都有“输入”类。

这不太奏效：

```
$(".inputs").keydown(function () {

            $(this).next().focus();
        }); 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-05-10T17:27:29.150

我建议将每个文本框的 maxlength 设置为 1 并在`val.length`和 相同时切换到下一个`maxlength`。

[**演示**](http://jsfiddle.net/skram/qygB2/2/)

```
$(".inputs").keyup(function () {
    if (this.value.length == this.maxLength) {
      $(this).next('.inputs').focus();
    }
}); 
```

**编辑：**花了一些时间进行以下操作（未完全测试，但基本测试工作正常）

```
 1\. Allowing just numeric chars  
   2\. Allow some control like del, backspace, e.t.c
   3\. Backspace on empty textbox will move to prev textbox
   4\. charLimit var to dynamically decide how many char you want to restrict. 
```

**代码：**

```
$(function() {
    var charLimit = 1;
    $(".inputs").keydown(function(e) {

        var keys = [8, 9, /*16, 17, 18,*/ 19, 20, 27, 33, 34, 35, 36, 37, 38, 39, 40, 45, 46, 144, 145];

        if (e.which == 8 && this.value.length == 0) {
            $(this).prev('.inputs').focus();
        } else if ($.inArray(e.which, keys) >= 0) {
            return true;
        } else if (this.value.length >= charLimit) {
            $(this).next('.inputs').focus();
            return false;
        } else if (e.shiftKey || e.which <= 48 || e.which >= 58) {
            return false;
        }
    }).keyup (function () {
        if (this.value.length >= charLimit) {
            $(this).next('.inputs').focus();
            return false;
        }
    });
}); 
```

[**演示**](http://jsfiddle.net/skram/qygB2/4/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-05-04T10:06:15.713

试试这个

```
jQuery.extend(jQuery.expr[':'], {
    focusable: function (el, index, selector) {
        return $(el).is('a, button, :input,[tabindex]');
    }
});
$(document).on('keypress', 'input,select', function (e) {
    if (e.which == 13) {
        e.preventDefault();
        // Get all focusable elements on the page
        var $canfocus = $(':focusable');
        var index = $canfocus.index(document.activeElement) + 1;
        if (index >= $canfocus.length) index = 0;
        $canfocus.eq(index).focus();
    }
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-10T17:20:10.030

这只会得到下一个元素，不管它是什么。你可能想要：

```
$(".inputs").keyup(function () {
  $(this).next(".inputs").focus();
}); 
```

另外，上键而不是下键，否则它会很快改变。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-31T11:41:59.580

这是我用来使输入键充当制表符的代码，即在按下 Enter 键时聚焦到下一个元素或在按下 shift+Enter 时聚焦上一个元素。

1）本质上：

```
tabables = $("*[tabindex != '-1']:visible");
var index = tabables.index(element);
tabables.eq(index + 1).focus(); 
```

2）在这里，您是一个封装行为的“类”，考虑到向前和向后以及有效的可聚焦元素。

我希望它有所帮助，如果某些代码适合您的需求，请随时适应您的需求:)

```
EnterAsTab = function () {
    this.ENTER_KEY = 13;
};

EnterAsTab.prototype.init = function () {
    this.listenOnEnterKey();
};

EnterAsTab.prototype.listenOnEnterKey = function () {

    var me = this;
    $('form input').on('keypress', function (event) {

            if (event.which === me.ENTER_KEY) {

                if (!event.shiftKey)
                    me.findNextFocusableElement(this);
                else
                    me.findPreviousFocusableElement(this);

                event.preventDefault();
            }
        }
    );
};

EnterAsTab.prototype.findNextFocusableElement = function (element) {
    this.findFocusableElement(element, this.increaseIndex);
};

EnterAsTab.prototype.findPreviousFocusableElement = function (element) {
    this.findFocusableElement(element, this.decreaseIndex);
};

EnterAsTab.prototype.findFocusableElement = function (element, callable) {

    var tabables = $("*[tabindex != '-1']:visible");
    var index = tabables.index(element);
    var counter = 1;
    var nextElement = undefined;

    try {

        while (true) {

            if ((nextElement = tabables.eq(index + counter)).length === 0) {
                break;
            }

            if (this.isFocusableElement(nextElement)) {

                var newIndex = callable.call(this, index, counter);
                tabables.eq(newIndex).focus();

                break;
            } else {
                counter++;
            }
        }
    } catch (error) {
        console.log(error);
    }

};

EnterAsTab.prototype.increaseIndex = function (index, counter) {
    return (index + counter);
};

EnterAsTab.prototype.decreaseIndex = function (index, counter) {
    return index - counter;
};

EnterAsTab.prototype.isFocusableElement = function (element) {

    return ['SELECT', 'TEXTAREA'].indexOf(element.prop('tagName')) > -1 ||
        element.is(':text') ||
        element.is(':checkbox') ||
        element.is(':radio');
};

var enterAsTab = new EnterAsTab();
enterAsTab.init(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-25T14:04:28.820

在搜索和开发之后，我最终得到了一个跨浏览器片段，它可以根据 maxlength（用 1 个字符测试）聚焦具有相同类的下一个输入字段，还可以通过退格按钮重新聚焦：

Javascript（jQuery）：

```
var codeCharInput = 'input.code-char';
$(codeCharInput+':first').focus();
$(codeCharInput).keyup(function(e) {
  if ((e.which == 8 || e.which == 46)) {
    $(this).prev(codeCharInput).focus().val($(this).prev().val());
  } else {
    if (this.value.length == this.maxLength) {
      $(this).next(codeCharInput).focus();
    }
  }
}); 
```

HTML：

```
<input type="text" name="chars[]" maxlength="1" class="code-char" />
<input type="text" name="chars[]" maxlength="1" class="code-char" />
<input type="text" name="chars[]" maxlength="1" class="code-char" />
<input type="text" name="chars[]" maxlength="1" class="code-char" /> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-22T10:07:56.703

如果您只想查看下一个输入，但您已经以这样的方式说分隔符

```
<input type="number" pattern="[0-9]*" inputmode="numeric" maxlength="2" placeholder="DD" name="dobday" id="dobday">
<div class="separator">/</div>
<input type="number" pattern="[0-9]*" inputmode="numeric" maxlength="2" placeholder="MM" name="dobmonth" id="dobmonth">
<div class="separator">/</div>
<input type="number" pattern="[0-9]*" inputmode="numeric" maxlength="4" placeholder="YYYY" name="dobyear" id="dobyear"> 
```

您将需要此代码来获取所有下一个项目并确定找到的第一个输入：

```
$('input#dobday,input#dobmonth,input#dobyear').on('input', function(e) {
    if (jQuery(this).val().length >= parseInt(jQuery(this).attr("maxlength"), 10)) {
            if (jQuery(this).attr('id') === 'dobyear') {
                jQuery(this).blur();
            } else {
                jQuery(this).nextAll('input:first').focus();
            }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-10T17:21:08.250

使用`keyup`例如

```
$(".inputs").keyup(function () {
    $(this).next().focus();
});​ 
```

在行动中查看它[http://jsfiddle.net/qygB2/](http://jsfiddle.net/qygB2/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-10T17:29:04.103

如果您使用的是最新的 jQuery 版本，我强烈建议您使用该`on`方法。如果您查看 jQuery 源代码，您会注意到所有其他事件方法现在都重定向到此方法，所以为什么不直接使用它：

```
$(document).ready(function () {
        $('.inputs').on('keyup', function(){
            $(this).next().focus();
        })
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-07-09T09:31:04.487

在使用 next 而不命名类或 id 之后，这将继续关注文本框。

```
 $(this).hide();        
 $(this).next().show();
 $('input[type=text]').focus(); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-05-05T01:53:42.327

以@Vega 的回答为基础

```
inputs.keydown(function(e) {
    var keys = [8, 9, /*16, 17, 18,*/ 19, 20, 27, 33, 34, 35, 36, 37, 38, 39, 40, 45, 46, 144, 145];

    $(this).val('');

    if (e.which == 8 && this.value.length == 0) {
        $(this).prev(inputs).focus();
    } else if ($.inArray(e.which, keys) >= 0) {
        return true;
    } else if (this.value.length > charLimit) {
        $(this).next(inputs).focus();
        return false;
    } else if (e.shiftKey || e.which <= 48 || e.which >= 58) {
        return false;
    }
}).keyup (function () {
    if (this.value.length >= charLimit && $(this).next(inputs).attr('type') === 'text') {
        $(this).next(inputs).focus();
        return false;
    }
}); 
```

如果用户单击已经有值的输入，它将覆盖它，而不是转到下一个输入，它也将只关注文本输入。我有一种情况，我在文本输入旁边有一个提交输入，如果使用退格键可能会意外重定向页面。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-10-23T06:01:39.843

这是满足您所有需求的代码。

```
$(".input").keyup(function(e) {

if (e.which == 8 || e.which == 46){ 
    //backspace / Delete
    $(this).val('');
    $(this).prevAll('input:first').focus();
}
else
{ 
    var spcl_arr = ["~","!","@", "#", "$", "%", "^", "&", "*", "(", ")", "+","-", "=", "." ,"/"];
   if(e.which == 13){ // Enter Kay
      return false;
   }
  else if(jQuery.inArray($(this).val(), spcl_arr) !== -1 ){ 
         $(this).val('');
         $(this).focus();
        return false;
   }else{ 
       var regex = new RegExp("^[a-zA-Z0-9]+$");
        var str = String.fromCharCode(!e.charCode ? e.which : e.charCode);
        if (regex.test(str)) { 
             if (this.value.length == this.maxLength) {
                 $(this).next('.input').focus();
             }
        }else{
            $(this).val('');
            $(this).focus();
            return false;
        }
    }
} 
```

});

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-08-28T09:16:55.350

这完美地工作它还检查中间输入是否已填充

```
$(".inputs").keyup( function () {

    if (this.value.length == this.maxLength) {
    var n=$(this).next('.inputs');
    n.focus();
   if(n.val().length==n.prop('maxlength')) n.next('.inputs').focus(); 
    }

}); 
```

# ruby-on-rails - Ruby on Rails Bash 配置文件问题

> ID：10539114
> 
> 赞同：2
> 
> 时间：2012-05-10T17:17:50.877
> 
> 标签：ruby-on-rails, ruby-on-rails-3, .bash-profile, sublimetext2

我正在尝试学习使用 Ruby on Rails（通过 Hartl 的 3.2 教程），并且我正在尝试让一些命令行工具从终端的命令提示符下工作。在这个特定的例子中，我试图让 Sublime Text 2 工作。一切都设置好了，但是当我运行 subl --help 时，例如它返回

-bash：subl：找不到命令

我按照此链接中的所有说明进行操作 - [http://www.sublimetext.com/docs/2/osx_command_line.html](http://www.sublimetext.com/docs/2/osx_command_line.html)

而且我还使用 Stack Overflow 试图弄清楚如何解决这个错误，这似乎是一个 bash 配置文件问题，但我不知道如何访问或修改这个配置文件以使事情正常进行。你能提供任何帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:21:34.023

如果您使用的是 OSX Lion，则可能没有`.bash_profile`文件。使用[这个问题](https://apple.stackexchange.com/questions/26928/no-bash-profile-in-os-x-lion)的答案来帮助创建/使用一个，然后将 sublimetext.com 上的 howto 建议的导出放入其中。

# mysql - Mysql 使用 select 中的值更新

> ID：10539124
> 
> 赞同：0
> 
> 时间：2012-05-10T17:19:02.710
> 
> 标签：mysql

我有两个疑问。第一个将返回多行：

```
SELECT parent_entry_id,child_entry_id FROM exp_playa_relationships WHERE parent_field_id = '34'; 
```

...而且我想使用这些值 (parent_entry_id,child_entry_id) 并将它们合并到此查询中，替换“x”和“y”，并对第一个查询返回的每一行执行此操作。

```
UPDATE exp_channel_data AS t1,
(
SELECT field_id_46,field_id_47 FROM exp_channel_data WHERE entry_id = 'x') AS t2
SET t1.field_id_60 = t2.field_id_46, t1.field_id_61 = t2.field_id_47
WHERE t1.entry_id = 'y'; 
```

我想我需要使用另一个 JOIN，但我不知道如何在我的示例中实现一个。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:25:29.303

试试这个查询

```
UPDATE exp_channel_data a1 INNER JOIN exp_playa_relationships a  ON a1.entry_id = a.child_entry_id
INNER JOIN exp_channel_data b ON a.parent_entry_id = b.entri_id 
SET a1.field_id_60 = b.field_id_46, ta1.field_id_61 = b.field_id_47
WHERE parent_field_id = '34' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:26:13.847

我想这就是你所追求的：

```
UPDATE exp_playa_relationships AS t0
  JOIN exp_channel_data        AS t1
    ON t1.entry_id = t0.child_entry_id
  JOIN exp_channel_data        AS t2
    ON t2.entry_id = t0.parent_entry_id
   SET t1.field_id_60 = t2.field_id_46
     , t1.field_id_61 = t2.field_id_47 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:14:14.423

谢谢大家的回复。工作语法是：

```
UPDATE exp_channel_data AS t1,
(
SELECT 
entry_id as ei2, child_entry_id, parent_entry_id, field_id_46 as f46,field_id_47 as f47 
FROM 
exp_channel_data JOIN exp_playa_relationships ON entry_id=child_entry_id AND parent_field_id = 34) AS t2
SET t1.field_id_60 = f46, t1.field_id_61 = f47
WHERE t1.entry_id=parent_entry_id; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-10T17:30:07.120

或者在更经典的语法中，您需要调整自己的 foo 和 bar 属性，但使用如下内容：

```
update exp_channel_data t1
set (t1.field_id_60,t1.field_id_61) = (
    select t2.field_id_46 , t2.field_id_47
    from exp_channel_data t2
    where 1=1
      and t2.entry_id = 'x'
      and /* ENTER YOUR t1-t2 join condition here */
)
where 1=1
  and t1.entry_id = y
; 
```

但是因为你是 MySQL 我不相信它支持复合子查询。像这样：

```
update exp_channel_data t1
set t1.field_id_60 = (
    select t2.field_id_46 
    from exp_channel_data t2
    where 1=1
      and t2.entry_id = 'x'
      and /* ENTER YOUR t1-t2 join condition here */
) , t1.field_id_61 = (
    select t3.field_id_47
    from exp_channel_data t3
    where 1=1
      and t3.entry_id = 'x'
      and /* ENTER YOUR t1-t3 join condition here */
)
where 1=1
  and t1.entry_id = y
; 
```

# specman - Specman 的指针和实例有什么区别？

> ID：10539125
> 
> 赞同：2
> 
> 时间：2012-05-10T17:19:05.707
> 
> 标签：specman

结构中的指针和实例有什么区别。如何在 struct 中实例化实例和指针？如何连接指针？

任何人都可以用一个例子来解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:55:14.603

一个**单元实例**声明一个单元的实例。**单元引用**（也称为**单元指针**）指向单元层次结构中已经存在的单元，或者当它不指向任何内容时其值为 NULL。

单元是静态项目，只能在运行前生成期间创建，并且永远不能被销毁（取消引用，然后进行垃圾收集）。一个单元只能在另一个单元内实例化。因此，每个 e 程序都有一个单元实例树，其根为 sys（唯一的预定义单元）。这与结构相反，结构可以在测试阶段的任何时间动态创建。

```
unit simple_u {};

struct example_s {
  generated_ref  : simple_u;
  generated_inst : simple_u is instance; // Illegal: Instance cannot be in struct
}; 
```

由于单元实例只能在运行前生成期间创建，因此不能使用不生成运算符 (!) 声明它们：

```
generated_inst : simple_u is instance;
!nongen_inst   : simple_u is instance; // Illegal: Instances must be generated. 
```

可以生成或不生成单位参考。如果它被生成，那么它必须有一个约束，要么将它指向一个单独声明的单元实例，要么指向 NULL：

```
!nongen_ref    : simple_u;
generated_ref  : simple_u; // Requires a generation constraint (like below)
keep soft generated_ref == NULL;
keep      generated_ref == generated_inst; 
```

在单元实例上使用*gen*操作是非法的。可以随时（即时）生成单元引用，但它必须具有预先存在的约束或使用*保留*块指定的约束：

```
gen generated_inst; // Illegal to explicitly generate an instance
gen generated_ref;
gen nongen_ref keeping {it == generated_inst}; 
```

在程序代码中分配给单元引用是合法的，但不能将单元实例分配给：

```
generated_ref  = NULL;
generated_inst = NULL; // Illegal to assign to an instance 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T06:17:11.687

关于结构 -

对于结构，没有“实例”与“指针”。在某种程度上 - 所有结构字段都是引用。

顺便说一句 - 调试时，您会看到包含对结构的引用的消息（或 dut 错误）。就像是 -

[1045] 数据包-@9: 开始注入...

然后你可以发出 @9 的 Specman 命令

这将打印出对此“实例”的所有引用。这个列表可能很长，包含所有曾经引用过这个结构的东西。

# php - mod_rewrite 如果不是某个页面

> ID：10539126
> 
> 赞同：0
> 
> 时间：2012-05-10T17:19:14.813
> 
> 标签：php, mod-rewrite, redirect

我有一个带有典型 wordpress mod_rewrite 的 .htaccess 文件：

```
 <IfModule mod_rewrite.c>
 RewriteEngine On
 RewriteBase /blog/
 RewriteRule ^index\.php$ - [L]
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule . /blog/index.php [L]
 </IfModule>

 # END WordPress 
```

但是我需要允许某个页面不被重定向。作为“域/ee”，我尝试添加：

```
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI}      -f
RewriteRule ^ %{DOCUMENT_ROOT}%{REQUEST_URI}    [L] 
```

到顶部。当我阅读它时，应该检查页面是否存在，如果存在则不运行重写的重置。但是它不起作用。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:30:55.373

使第一个重写规则如下所示：

```
RewriteRule ^(path/to/page)$ $1 [L] 
```

这两条规则应该防止重写任何实际的文件或目录：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

# python - 上传视频并从 django 中的视频创建缩略图

> ID：10539128
> 
> 赞同：8
> 
> 时间：2012-05-10T17:19:18.933
> 
> 标签：python, django, video

django 中是否有任何视频模型字段？任何关于插件或片段的建议将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-06-16T01:20:22.353

MoviePy 不处理 Django 中的上传，但它可以很容易地生成缩略图：

```
from moviepy.editor import *
clip = VideoFileClip("example.mp4")
clip.save_frame("thumbnail.jpg",t=1.00) 
```

[http://zulko.github.io/moviepy/index.html](http://zulko.github.io/moviepy/index.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T17:22:06.923

您可能想查看[django-video](http://code.google.com/p/django-video/ "django-视频")应用程序。它支持[缩略图生成](http://code.google.com/p/django-video/wiki/README)。

# database - 复制如何在分布式数据库中工作

> ID：10539129
> 
> 赞同：8
> 
> 时间：2012-05-10T17:19:30.543
> 
> 标签：database, replication, distribution, distributed, database-replication

我想知道复制在分布式数据库中是如何工作的。如果能以一种透彻而又易于理解的方式来解释这一点，那就太好了。

如果您可以在分布式事务和分布式复制之间进行比较，那也很好。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2020-05-26T20:11:30.100

## Single point of failure

The database server is a central part of an enterprise system, and, if it goes down, service availability might get compromised.

[![Single point of failure](../Images/1d63e166a5504b28b249a8db9b9676c3.png)](https://vladmihalcea.com/single-primary-database-replication/)

If the database server is running on a single server, then we have a single point of failure. Any hardware issue (e.g., disk drive failure) or software malfunction (e.g., driver problems, malfunctioning updates) will render the system unavailable.

## Limited resources

If there is a single database server node, then vertical scaling is the only option when it comes to accommodating a higher traffic load. Vertical scaling, or scaling up, means buying more powerful hardware, which provides more resources (e.g., CPU, Memory, I/O) to serve the incoming client transactions.

Up to a certain hardware configuration, vertical scaling can be a viable and simple solution to scale a database system. The problem is that the price-performance ratio is not linear, so after a certain threshold, you get diminishing returns from vertical scaling.

Another problem with vertical scaling is that, in order to upgrade the server, the database service needs to be stopped. So, during the hardware upgrade, the application will not be available, which can impact underlying business operations.

## Database Replication

To overcome the aforementioned issues associated with having a single database server node, we can set up multiple database server nodes. The more nodes, the more resources we will have to process incoming traffic.

Also, if a database server node is down, the system can still process requests as long as there are spare database nodes to connect to. For this reason, upgrading the hardware or software of a given database server node can be done without affecting the overall system availability.

The challenge of having multiple nodes is data consistency. If all nodes are in-sync at any given time, the system is [`Linearizable`](https://vladmihalcea.com/linearizability/), which is the strongest guarantee when it comes to data consistency across multiple registers.

The process of synchronizing data across all database nodes is called replication, and there are multiple strategies that we can use.

## Single-Primary Database Replication

The Single-Primary Replication scheme looks as follows:

[![Single-Primary Database Replication](../Images/3d0e79df130b55714efcc8d7367bc22f.png)](https://vladmihalcea.com/single-primary-database-replication/)

The primary node, also known as the Master node, is the one accepting writes while the replica nodes can only process read-only transactions. Having a single source of truth allows us to avoid data conflicts.

To keep the replicas in-sync, the primary nodes must provide the list of changes that were done by all committed transactions.

Relational database systems have a Redo Log, which contains all data changes that were successfully committed.

PostgreSQL uses the WAL (Write-Ahead Log) records to ensure transaction Durability and for Streaming Replication.

Because the storage engine is separated from the MySQL server, MySQL uses a separate Binary Log for replication. The Redo Log is generated by the InnoDB storage engine, and its goal is to provide transaction Durability while the Binary Log is created by the MySQL Server, and it stores the logical logging records, as opposed to physical logging created by the Redo Log.

By applying the same changes recorded in the WAL or Binary Log entries, the replica node can stay in-sync with the primary node.

## Horizontal scaling

The Single-Primary Replication provides horizontal scalability for read-only transactions. If the number of read-only transactions increases, we can create more replica nodes to accommodate the incoming traffic.

This is what horizontal scaling, or scaling out, is all about. Unlike vertical scaling, which requires buying more powerful hardware, horizontal scaling can be achieved using commodity hardware.

On the other hand, read-write transactions can only be scaled up (vertical scaling) as there is a single primary node.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T23:29:18.903

Clustrix 是一个分布式数据库，具有无共享架构，支持分布式事务和复制。有一些可用的技术文档描述了[数据分布](http://docs.clustrix.com/display/CLXDOC/Data+Distribution)、[分布式评估模型](http://docs.clustrix.com/display/CLXDOC/Evaluation+Model)和内置的[容错](http://docs.clustrix.com/display/CLXDOC/Consistency,+Fault+Tolerance,+and+Availability)，以及[架构](http://docs.clustrix.com/display/CLXDOC/Database+Architecture)的概述。

作为 MySQL 的替代品，Clustrix 实现了 MySQL 的复制策略并生成 MySQL 格式的 binlog，这些 binlog 被序列化，以便 Clustrix 可以充当 MySQL 的 Master 或 Slave。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T01:19:54.363

我建议最初花时间查看 MySQL Docs on Replication。这是数据库复制的一个很好的例子。他们在这里：

[http://dev.mysql.com/doc/refman/5.5/en/replication.html](http://dev.mysql.com/doc/refman/5.5/en/replication.html)

对于一个问题来说，涵盖您问题的整个范围似乎太多了。

如果您有一些具体问题，请随时发布。谢谢！

# oracle - 在 Oracle Apex 中扩展组

> ID：10539132
> 
> 赞同：1
> 
> 时间：2012-05-10T17:19:46.113
> 
> 标签：oracle, oracle11g, oracle-apex

我刚刚开始使用 Oracle ApEx，在深入了解它之前，我想确保内置某些功能。
有没有一种简单的方法可以让我拥有一个展开和折叠节点的报告？
例如，假设我有一张桌子：

```
STATE   CITY  POPULATION 
```

我想向用户展示一个显示一行的报告

```
CALIFORNIA      100000000 
```

然后他们点击 (+) 并展开为

```
CALIFORNIA
    LOS ANGELES    10387487
    SANFRANCISCO     9278437 
```

等等
。我刚刚浏览了一些教程，我还没有看到类似的东西（我认为这是相当基本的）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:55:10.273

[您可以使用我的演示](http://apex.oracle.com/pls/apex/f?p=36342:27)中的 APEX 树区域来实现此目的： ![在此处输入图像描述](../Images/94893c1635ab5e77860087a343f02051.png)

首先，我创建了一个视图，该视图以树所需的方式将州和城市数据结合在一起：

```
create or replace view state_city_view as
select state_name as name, '' as parent_name 
from state
union all
select city_name || ' ' || population name, state_name as parent_name
from city; 
```

然后我用它作为树区域的来源，如下所示：

![在此处输入图像描述](../Images/14be16bccb707128992c12fcba4d3c26.png)

# abap - 2个时间戳之间的差异

> ID：10539133
> 
> 赞同：3
> 
> 时间：2012-05-10T17:19:59.310
> 
> 标签：abap

我在 ABAP 中有一个程序，他们在变量中使用“timestamp”类型，因此他们可以获得某些事件的时间。他们使用它是因为他们需要毫秒。

我现在的任务是获取其中两个变量之间的差异，但我似乎找不到功能模块或其他解决方案。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-09T09:09:28.523

使用该方法[**`CL_ABAP_TSTMP=>SUBTRACT`**](https://help.sap.com/doc/abapdocu_753_index_htm/7.53/en-US/index.htm?file=abencl_abap_tstmp.htm)，通过传递两个时间戳，它们必须是`TIMESTAMPL`包含毫秒的类型，并且两个时间戳之间的差异将以秒数返回，包括毫秒。

例子：

```
DATA: lv_tstmp1 TYPE timestampl,
      lv_tstmp2 TYPE timestampl,
      lv_diff   TYPE tzntstmpl.

lv_tstmp1 = '20190704000010.999'. " July 4th, 00:00:10 and 999 ms
lv_tstmp2 = '20190703235950.001'. " July 3rd, 23:59:50 and 001 ms

CALL METHOD cl_abap_tstmp=>subtract
    EXPORTING
      tstmp1 = lv_tstmp1
      tstmp2 = lv_tstmp2
    RECEIVING
      r_secs = lv_diff.

ASSERT lv_diff = '20.998'. " expectation verified or run time error 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:51:36.830

谷歌搜索出现了这个建议：[http](http://www.sdn.sap.com/irj/scn/index?rid=/library/uuid/840ad679-0601-0010-cd8e-9989fd650822#q-8) ://www.sdn.sap.com/irj/scn/index?rid=/library/uuid/840ad679-0601-0010-cd8e-9989fd650822#q-8 ：使用类CL_ABAP_TSTMP。您还可以在此线程中查看如何使用该类的示例：http: [//scn.sap.com/thread/85476](http://scn.sap.com/thread/85476)。

```
 cl_abap_tstmp=>systemtstmp_syst2utc(
    exporting
      syst_date = <wa_joblist>-strtdate
      syst_time = <wa_joblist>-strttime
    importing
      utc_tstmp = start_stamp ).

  cl_abap_tstmp=>systemtstmp_syst2utc(
    exporting
      syst_date = sy-datum
      syst_time = sy-uzeit
    importing
      utc_tstmp = now_stamp ).

  seconds = cl_abap_tstmp=>subtract(
      tstmp1 = now_stamp
      tstmp2 = start_stamp ). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T05:59:08.763

使用 FM ***'CCU_TIMESTAMP_DIFFERENCE'***

检查哪个时间戳更大后，调用 FM。

```
IF TIMESTAMP_2 > TIMESTAMP_1.

 CALL FUNCTION 'CCU_TIMESTAMP_DIFFERENCE'
   EXPORTING
      TIMESTAMP1 = TIMESTAMP_2
      TIMESTAMP2 = TIMESTAMP_1 
   IMPORTING 
      DIFFERENCE = TIMESTAMP_DIFFERENCE.
EndIf. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-01T12:48:06.950

现有的提议忽略了毫秒。这是现代 ABAP AS 的解决方案，它也考虑了毫秒：

```
r_secs = CONV #( cl_abap_tstmp=>subtract(
  tstmp1 = CONV timestamp( i_ts1 )
  tstmp2 = CONV timestamp( i_ts1 )
) ).
r_secs = r_secs + ( frac( i_ts1 ) - frac( i_ts2 ) ). 
```

i_ts1 和 i_ts2 是两个时间戳，r_secs (type f) 是结果。

这是一个小测试器：

```
REPORT ztest_timestampl_dif.

CLASS lcl_timestampl DEFINITION.
  PUBLIC SECTION.
    CLASS-METHODS:
      test,
      dif
        IMPORTING
                  i_ts1         TYPE timestampl
                  i_ts2         TYPE timestampl
        RETURNING VALUE(r_secs) TYPE f.
ENDCLASS.

START-OF-SELECTION.
  lcl_timestampl=>test( ).

CLASS lcl_timestampl IMPLEMENTATION.
  METHOD test.
    DATA:
      l_ts1   TYPE timestampl,
      l_ts2   TYPE timestampl,
      l_msecs TYPE f.

    GET TIME STAMP FIELD l_ts1.
    WAIT UP TO '0.378' SECONDS.
    GET TIME STAMP FIELD l_ts2.

    l_msecs = dif( i_ts1 = l_ts1  i_ts2 = l_ts2 ).

    cl_demo_output=>display( l_msecs ).
  ENDMETHOD.

  METHOD dif.
    r_secs = CONV #( cl_abap_tstmp=>subtract(
      tstmp1 = CONV timestamp( i_ts1 )
      tstmp2 = CONV timestamp( i_ts1 )
    ) ).
    r_secs = r_secs + ( frac( i_ts1 ) - frac( i_ts2 ) ).
  ENDMETHOD.

ENDCLASS. 
```

如果您正在使用它，请考虑添加溢出处理。

# c++ - 由于未定义的行为或编译器错误导致 C++ 代码崩溃？

> ID：10539140
> 
> 赞同：16
> 
> 时间：2012-05-10T17:20:18.217
> 
> 标签：c++, visual-studio-2010, visual-c++, crash, compiler-optimization

我正在经历奇怪的崩溃。我想知道这是否是我的代码或编译器中的错误。当我使用 Microsoft Visual Studio 2010 编译以下 C++ 代码作为优化版本构建时，它在标记的行中崩溃：

```
struct tup { int x; int y; };

class C 
{
public:
  struct tup* p;

  struct tup* operator--() { return --p; }
  struct tup* operator++(int) { return p++; }

  virtual void Reset() { p = 0;}
};

int main ()
{
  C c;
  volatile int x = 0;
  struct tup v1;
  struct tup v2 = {0, x};

  c.p = &v1;
  (*(c++)) = v2;

  struct tup i = (*(--c));   // crash! (dereferencing a NULL-pointer)
  return i.x;
} 
```

查看反汇编，很明显它必须崩溃：

```
int _tmain(int argc, _TCHAR* argv[])
{
00CE1000  push        ebp  
00CE1001  mov         ebp,esp  
00CE1003  sub         esp,0Ch  
  C c;
  volatile int x = 0;
00CE1006  xor         eax,eax  
00CE1008  mov         dword ptr [x],eax  
  struct tup v1;
  struct tup v2 = {0, x};
00CE100B  mov         ecx,dword ptr [x]  

  c.p = &v1;
  (*(c++)) = v2;
00CE100E  mov         dword ptr [ebp-8],ecx  

  struct tup i = (*(--c));
00CE1011  mov         ecx,dword ptr [x]  
00CE1014  mov         dword ptr [v1],eax  
00CE1017  mov         eax,dword ptr [ecx]  
00CE1019  mov         ecx,dword ptr [ecx+4]  
00CE101C  mov         dword ptr [ebp-8],ecx  
return i.x;
}
00CE101F  mov         esp,ebp  
00CE1021  pop         ebp  
00CE1022  ret 
```

在偏移量 00CE1008 处，它将 0 写入 x。

在偏移量 00CE100B 处，它将 x（0）读入 ecx

在偏移量 00CE1017 处，它取消引用该 0 指针。

我看到两个可能的原因：

*   在我的代码中存在一些微妙的（或不那么微妙的？）未定义行为的情况，编译器将这种未定义的行为“优化”为崩溃。

*   或者存在编译器错误

有谁看到可能导致问题的原因？

谢谢，

乔纳斯

**编辑：解决有关“指向无效位置的指针”的评论**

如果我更改`v1`为 be`struct tup v1[10];`和 set `c.p = &v1[0];`，那么将没有指向无效位置的指针。但我仍然可以观察到相同的行为。反汇编看起来略有不同，但仍然存在崩溃，它仍然是由将 0 加载到 ecx 并取消引用它引起的。

**编辑：结论**

所以，这可能是一个错误。我发现如果我改变，崩溃就会消失

```
struct tup* operator--() { return --p; } 
```

到

```
struct tup* operator--() { --p; return p; } 
```

正如 bames53 告诉我们的那样，在 VS2011 中不会发生崩溃，并得出结论认为它必须已修复。

尽管如此，我还是出于两个原因决定提交该错误：

*   该错误可能仍然存在于 VS2011 中。也许优化器只是改变了我的代码不再触发错误的方式。（该错误似乎非常微妙，当我删除`volative`或时不会发生`virtual void Reset()`）

*   我想知道我的解决方法是否是排除崩溃的可靠方法，或者其他地方的代码更改是否可以重新引入错误。

链接在这里：

[https://connect.microsoft.com/VisualStudio/feedback/details/741628/error-in-code-generation-for-x86](https://connect.microsoft.com/VisualStudio/feedback/details/741628/error-in-code-generation-for-x86)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-10T17:54:01.337

The code is fine. It's a compiler bug.

The code `*(c++) = v2` will post-increment `c.p` yielding the original value. That value was assigned in the previous line and is `&v1`. So, in effect, it does `v1 = v2;`, which is perfectly fine.

`c.p` now behaves as a one-past-the-end of a one element array that holds only `v1`, per §5.7p4 of the standard:

> For the purposes of these operators [`+` and `-`], a pointer to a nonarray object behaves the same as a pointer to the first element of an array of length one with the type of the object as its element type.

Then `*(--c)` moves that pointer back to `&v1` and dereferences it, which is also fine.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:39:18.650

它不一定是 UB 或编译器错误。两者都不是由于 VS2010 的生产方式。

Strictly speaking, your program exhibits well-defined behaviour. However, that might only be according to the newest C++ Standard. VS2010 is only implemented against a draft Standard which may not have included this provision. If it did not, then your code is not UB, but VS is not incorrect to produce UB, as those were the requirements of the time it was made.

Of course, if it's been legal to treat stack objects as an array of one object in C++03, then it is a compiler bug.

Edit: If you still get the crash for an array as you state, then that is definitely a compiler bug.

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-05-10T17:25:44.857

您`&v1`进入 cp ，然后使用运算符 ++ 推进它。您不能依赖堆栈的顺序，因此会出现未定义的行为 ( `(&v1)+1 != &v2`)

# javascript - 在 Rails 应用程序中重新加载部分

> ID：10539143
> 
> 赞同：10
> 
> 时间：2012-05-10T17:20:25.907
> 
> 标签：javascript, ruby-on-rails, ajax, partial, unobtrusive-javascript

我想在我的 rails 应用程序中的“新”视图上每 3 秒重新加载一次部分。

我有这个在我的`new.html.erb`

```
<h1>Controller#new</h1>
This is my static content
<%= render partial: 'dynamic' %>
More Static content 
```

如何每 3 秒重新加载一次此部分？我必须为此使用不显眼的javascript吗？我怎样才能通过 ujs 实现这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-10T17:49:43.197

将部分放在 div 中

```
 <div class="dynamic"><%= render partial: 'dynamic' %></div> 
```

你可以像这样使用jquery来做到这一点

```
 $(document).ready(
         function() {
          setInterval(function() {
            $('.dynamic').load('/controller_name/action_name');
        }, 3000);
    }); 
```

现在刷新部分控制器动作以加载新内容

```
 def action_name
            render :partial => "directory_name/dynamic"
         end 
```

它肯定会工作......

# php - 如果变量等于字母或单词

> ID：10539147
> 
> 赞同：0
> 
> 时间：2012-05-10T17:20:30.090
> 
> 标签：php, mysql

认为我正在尝试做的事情很明显。如果性别变量为 M，则显示男性图像。我尝试了一些事情，例如删除 =，但我没有任何成功。

我完全错了吗？

```
if ($gender == M){
<img src='images/male.png' width='45px' height'45px'>
}else{
($gender == F){
 <img src='images/female.png' width='45px' height'45px'>
}else{
($gender == HIDE){
<img src='images/uni.png' width='45px' height'45px'>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:23:18.863

除非这些是常量，否则您需要将字符串封装在引号中：

```
if($gender == 'M') {
?>
<img src="images/male.png" width="45" height="45" />
<?php
} else { 
```

另外，请注意（您的代码给出语法错误）如何混合 html 和 php。您应该使用 CSS 进行样式设置，而不是内联属性（已弃用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:28:35.780

您还可以尝试使用 switch 语句，例如：

```
switch(strtoupper($gender))
{
    case 'M': $gender_img = 'male'; break;
    case 'F': $gender_img = 'female'; break;
    case 'HIDE': $gender_img = 'uni'; break;
    default: $gender_img = 'uni'; break;
}

echo '<img src="images/'.$gender_img.'.png" width="45px" height="45px">'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T17:23:24.480

`M`除非您为、`F`和设置了 php 常量定义`HIDE`，否则您需要将它们变成字符串。

常量： http: [//php.net/manual/en/function.define.php](http://php.net/manual/en/function.define.php)

还要记住，php 中没有枚举。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T17:29:05.590

我会内联（像老板一样）

```
<img src="imgs/<?=($gender=="m"?"male.jpg":($gender=="f"?"female.jpg":"uni.jpg"))?>" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T17:23:10.680

if ($gender === 'M'){

```
// or to make sure $gender is uppercase:
if (strtoupper($gender) === 'M'){
...
}
elseif { ... 
```

而且，您的第一个“else”应该是 elseif

# php - ESL Elo 公式（有问题）

> ID：10539148
> 
> 赞同：0
> 
> 时间：2012-05-10T17:20:31.423
> 
> 标签：php, algorithm

我正在尝试像 ESL 门户一样实施 ELO 公式。（[http://cheater.esl.eu/uk/faq/rankmodules/](http://cheater.esl.eu/uk/faq/rankmodules/)）

第一个例子对应于 ESL 的例子，但第二个和第三个给出了疯狂的结果。我哪里错了？

```
 function eloEsl($k1, $k2, $g1, $g2)
{
    $per1 = $g1 / ($g1 + $g2);
    $per2 = $g2 / ($g1 + $g2);

    $E = 1/(1+ Pow(10, -($k1-$k2)/400)); 

    $Pts1 =  $k1 + 50 * ( $per1 - $E );
    $Pts2 =  $k2 + 50 * ( $per2 - $E );

    $Pts1 = round($Pts1);

    $Pts2 = round($Pts2);

    return array($Pts1, $Pts2);
}

// first test is similar to ESL example
eloEsl(1000, 1000, 3, 6); // returns  -8 / + 8

// This make crazy result !
eloEsl(1000, 1200, 5, 1); // returns  +30 / -4

// and reverse
eloEsl(1000, 1200, 1, 5); // returns  -4 / +30 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T00:37:59.840

两个玩家的预期计算点数（变量 $E）不同。所以你应该有$E1和$E2。

```
$E1 = 1/(1+ Pow(10, -($k1-$k2)/400)); 

$E2 = 1/(1+ Pow(10, -($k2-$k1)/400)); 
```

# jquery - IE 中的 JQuery 动画问题在所有其他浏览器中运行良好

> ID：10539150
> 
> 赞同：0
> 
> 时间：2012-05-10T17:20:37.437
> 
> 标签：jquery, internet-explorer, jquery-animate

所以我在这个网站上运行动画：[http ://www.pivot-innovation.com/index_dev.php](http://www.pivot-innovation.com/index_dev.php)

在每个浏览器中，一切都看起来和工作正常。当然IE除外。起初它告诉我从谷歌调用 jquery 有一个错误......所以我在本地提取了 jquery 的完整版本现在我可以调用它。我的脚本很简单，但它不会在 IE 中设置动画或淡入淡出或任何内容。

```
<script type="text/javascript" src="js/jquery.js"></script> 

<script>
$(document).ready(function() {

    $("#left_innovation_image").hide(); //Hide all content
    $("#right_innovation_image").hide(); //Hide all content
    $("#mainImage_home").hide(); //Hide all content

    $("#left_innovation_image").fadeIn(2000); //Show first tab content
    $("#right_innovation_image").fadeIn(2000); //Show first tab content

    $("#left_innovation_image").animate({position:'absolute', top:'0px', left:'50px'}, 1000)
    $("#right_innovation_image").animate({position:'absolute', top:'0px', right:'50px'}, 1000,
    function(){

    }
    )

    $("#mainImage_home").delay(2500).fadeIn(1000); //Show first tab content

});
</script> 
```

我什至尝试使用绝对位置，只是像这样简单地向左设置动画：

```
$("#left_innovation_image").animate({'left': '+=50px'}, 1000) 
```

它仍然无法工作或移动。任何想法如何解决这一问题？如果没有，我可以写一些只告诉 IE 显示图像而忘记 jQuery 的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:31:22.660

为初学者摆脱`position:absolute`动画你能发布一些示例 html 以便我们摆弄它吗

# c - 使用 gnu-make 链接静态库时如何遵循链接顺序？

> ID：10539153
> 
> 赞同：8
> 
> 时间：2012-05-10T17:20:46.407
> 
> 标签：c, makefile, gnu-make, static-linking

我有以下问题：

```
cc -g -O2 -Wall -Wextra -Isrc -rdynamic -DNDEBUG  build/liblcthw.a    tests/list_tests.c   -o tests/list_tests
/tmp/ccpvGjZp.o: In function `test_create':
~/lcthw/tests/list_tests.c:12: undefined reference to `List_create'
collect2: ld returned 1 exit status
make: *** [tests/list_tests] Error 1 
```

但

```
cc -g -O2 -Wall -Wextra -Isrc -rdynamic -DNDEBUG tests/list_tests.c  build/liblcthw.a -o tests/list_tests 
```

运行良好，`nm`显示预期内容，测试运行，每个人都很开心，等等。

我搜索了 SO 并找到了很多答案（例如[Linker order - GCC](https://stackoverflow.com/questions/45135/linker-order-gcc)），所以很明显链接器可以正常工作。那么，我应该如何修改我的 makefile 以遵循顺序？

到目前为止，这是 Makefile：

```
CFLAGS=-g -O2 -Wall -Wextra -Isrc -rdynamic -DNDEBUG $(OPTFLAGS)
LIBS=$(OPTLIBS)
PREFIX?=/usr/local
BUILD=build

SOURCES=$(wildcard src/**/*.c src/*.c)
OBJECTS=$(patsubst %.c,%.o,$(SOURCES))

TEST_SRC=$(wildcard tests/*_tests.c)
TESTS=$(patsubst %.c,%,$(TEST_SRC))

TARGET=$(BUILD)/liblcthw.a
TARGET_LINK=lcthw
SO_TARGET=$(patsubst %.a,%.so,$(TARGET))

#The Target Build
all: $(TARGET) $(SO_TARGET) tests

dev: CFLAGS=-g -Wall -Isrc -Wall -Wextra $(OPTFLAGS)
dev: all

$(TARGET): CFLAGS += -fPIC
$(TARGET): build $(OBJECTS)
    ar rcs $@ $(OBJECTS)
    ranlib $@

$(SO_TARGET): $(TARGET) $(OBJECTS)
    $(CC) -shared -o $@ $(OBJECTS)

build:
    @mkdir -p $(BUILD)
    @mkdir -p bin

#The Unit Tests
.PHONY: tests
tests: CFLAGS+=$(TARGET)     #I think this line is useless now
tests: $(TESTS)
    sh ./tests/runtests.sh

#some other irrelevant targets 
```

尝试了一些奇怪且明显错误的事情，例如递归调用

```
$(TESTS):
    $(MAKE) $(TESTS) $(TARGET) 
```

`Debian6`在 VirtualBox 上运行它`Windows7`。系统规格：

```
$ uname -a
Linux VMDebian 2.6.32-5-686 #1 SMP Mon Mar 26 05:20:33 UTC 2012 i686 GNU/Linux
$ gcc -v
Using built-in specs.
Target: i486-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Debian 4.4.5-8' --with-bugurl=file:///usr/share/doc/gcc-4.4/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.4 --enable-shared --enable-multiarch --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.4 --libdir=/usr/lib --enable-nls --enable-clocale=gnu --enable-libstdcxx-debug --enable-objc-gc --enable-targets=all --with-arch-32=i586 --with-tune=generic --enable-checking=release --build=i486-linux-gnu --host=i486-linux-gnu --target=i486-linux-gnu
Thread model: posix
gcc version 4.4.5 (Debian 4.4.5-8) 
```

PS 它来自 Zed Shaw 的 Learn C The Hard Way，[练习 33](http://c.learncodethehardway.org/book/learn-c-the-hard-waych33.html)。不知道我是否应该将其标记为作业:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T18:49:17.350

您没有显示正在构建的 makefile 规则，`tests/list_tests`但它看起来好像只是内置规则。使用 GNU Make，您可以使用 打印出该规则`-p`，它将显示：

```
# default
LINK.c = $(CC) $(CFLAGS) $(CPPFLAGS) $(LDFLAGS) $(TARGET_ARCH)
[...]
.c:
#  recipe to execute (built-in):
    $(LINK.c) $^ $(LOADLIBES) $(LDLIBS) -o $@ 
```

通过将库添加到`$(CFLAGS)`（通过特定于目标的变量`tests: CFLAGS+=$(TARGET)`），您可以将它`$^`放在生成的命令之前。相反，您应该将其添加到`$(LDLIBS)`目标文件之后：

```
tests: LDLIBS+=$(TARGET) 
```

但是请注意，像这样依赖特定于目标的变量的传播在实践中并不是特别有效。当您键入时`make tests`，该库用于构建`tests/list_tests`等。但是，当您只对一项测试感兴趣时，您会发现`make tests/list_tests`由于链接库未包含在命令中而失败。（有关详细信息，请参阅[此答案](https://stackoverflow.com/questions/3261737/makefile-change-variable-value-depending-on-a-target/#3263435)。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T07:18:11.703

我是一个菜鸟，正在阅读同一本书，我得到了它以这种方式构建：

我改变了这一行：

tests: CFLAGS+=$(TARGET) #我觉得这行现在没用了

到

测试：CFLAGS+=$(SO_TARGET)

# mysql - 插入数据库日期时间字符串

> ID：10539154
> 
> 赞同：11
> 
> 时间：2012-05-10T17:20:46.900
> 
> 标签：mysql

我有字符串`04/04/2012 04:03:35 AM`。如何将其转换并插入到表格中？字段类型为`datetime`。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-10T17:35:24.060

您需要使用[`STR_TO_DATE()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_str-to-date)：

```
STR_TO_DATE('04/04/2012 04:03:35 AM', '%d/%m/%Y %r') 
```

或者，更好的是，[以 MySQL 期望的格式](http://dev.mysql.com/doc/en/date-and-time-literals.html)呈现您的文字（例如`YYYY-MM-DD HH:mm`）。

# javascript - 使用jQuery查看一个div是否有某个类的孩子

> ID：10539162
> 
> 赞同：135
> 
> 时间：2012-05-10T17:21:04.723
> 
> 标签：javascript, jquery

我有一个`#popup`用类动态填充几个段落的 div `.filled-text`。我试图让 jQuery 告诉我其中是否`#popup`有这些段落之一。

我有这个代码：

```
$("#text-field").keydown(function(event) {
    if($('#popup').has('p.filled-text')) {
        console.log("Found");
     }
}); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：229
> 
> 时间：2012-05-10T17:23:09.027

您可以使用[查找](http://api.jquery.com/find/)功能：

```
if($('#popup').find('p.filled-text').length !== 0)
   // Do Stuff 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-05-10T17:25:52.173

有一个[hasClass](http://api.jquery.com/hasClass/)函数

```
if($('#popup p').hasClass('filled-text')) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-10T17:25:52.210

使用jQuery的[children函数。](http://api.jquery.com/children/)

```
$("#text-field").keydown(function(event) {
    if($('#popup').children('p.filled-text').length > 0) {
        console.log("Found");
     }
}); 
```

`$.children('').length`将返回匹配选择器的子元素的计数。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-05-08T06:20:46.337

简单的方法

```
if ($('#text-field > p.filled-text').length != 0) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-10-15T12:59:56.493

如果您有多个具有相同类的 div，而有些只有该类，则必须检查每一个：

```
 $('.popup').each(function() {
                if ($(this).find('p.filled-text').length !== 0) {
                    $(this).addClass('this-popup-has-filled-text');
                }
            }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-10T17:24:46.063

如果它是一个直接的孩子，如果它可以嵌套更深，您可以执行以下操作，删除 >

```
$("#text-field").keydown(function(event) {
    if($('#popup>p.filled-text').length !== 0) {
        console.log("Found");
     }
}); 
```

# sql - Firebird：为什么这条sql语句存在时找不到记录？

> ID：10539169
> 
> 赞同：2
> 
> 时间：2012-05-10T17:21:15.270
> 
> 标签：sql, firebird

我有这个 sql 语句：

```
SELECT * from tBooks where BookNbr = '20111122-001' 
```

BookNbr 定义为`varchar (15)`，并且该记录确实存在于表中。

我想这可能与破折号有关，但不知道为什么...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T19:39:03.613

因此，这可能是连字符与破折号与破折号的问题。（您可以通过将显示的匹配字段粘贴到 ascii 编辑器中来确认这一点，以查看是否出现多字节字符。）

```
SELECT * from tBooks where BookNbr like '20111122%001' 
```

这样就`%`忽略了中间的特定标点符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T07:39:12.440

除了@wallyk 提供的解决方案外，该问题还可能是由损坏的索引条目引起的。您可以通过使用绕过索引来检查这一点

```
SELECT * from tBooks where BookNbr||'' = '20111122-001' 
```

如果这确实返回了记录，那么备份和恢复数据库以重建索引（或删除并重新创建索引）将是明智的。

# python - Python webscript 将无法运行 - 生成 403 错误

> ID：10539171
> 
> 赞同：0
> 
> 时间：2012-05-10T17:21:18.890
> 
> 标签：python, apache

我正在尝试在我的网站上运行 python (.py) 脚本。

每当我将浏览器定向到[http://mydomain.co.uk/cgi-bin/index.py](http://mydomain.co.uk/cgi-bin/index.py)时，我都会收到 403 错误。

我查过了，每个人都有执行权限。

我检查了错误日志，得到了这个：

```
[Thu May 10 13:17:03 2012] [error] [client 82.132.248.44] client denied by server configuration: /home/liamwli2/public_html/cgi-bin/index.py 
```

我正在使用共享主机包。

谁能给我一个解决方案？谢谢。

# objective-c - 什么时候创建新班级？

> ID：10539173
> 
> 赞同：0
> 
> 时间：2012-05-10T17:21:26.907
> 
> 标签：objective-c

也许这是一个愚蠢的问题，但我想知道我们何时必须或何时建议创建新课程。这在我的脑海中并不是很清楚。现在，每个控制器只有一个类，仅此而已......我所有的代码都在这个类中。我认为这可能会更好...

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T18:49:25.740

如果您遵循 MVC 模式，那么在大多数情况下，您的类应该分为以下类别之一：

*   控制器：UIKit/NS 视图控制器，负责呈现视图并从这些视图上的交互元素接收消息。
*   视图：如果您的一个控制器呈现的视图需要大量自定义逻辑才能呈现自身，则将其分离到自己的类中可能是一个更好的主意。本质上，这是在使用 Interface Builder（`.xib`文件）创建视图时完成的。
*   模型：在应用程序中封装逻辑的对象。

例如，如果您正在根据此设计模式构建一个 RSS 查看器，您可能会创建以下类：

*   代表单个 RSS 项目的模型，以及代表 RSS 提要的模型。如果您使用自己的 RSS 提要解析器，您可能希望隔离在另一个类中获取条目所需的逻辑。
*   处理显示提要和单个视图的控制器。控制器应该只关心呈现数据。对于 iOS 上的 RSS 查看器，您可能会将 a`UINavigationController`与`UITableViewController`类的根视图控制器一起使用。点击表格单元格会推动另一个`UIViewController`负责显示单个 RSS 项目的单元格。
*   虽然`UITableController`具有显示项目列表的默认视图，但单个项目可能需要自定义逻辑才能很好地显示。您可能想要创建一个视图类或`.xib`呈现这些。`UIViewController`负责在视图上填充数据（在 上设置值等`IBOutlets`）`.xib`。

作为一般准则，您应该尽量遵守[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)——每个类都应该有单一职责，并且它可以或多或少自主地执行其任务。

在这种情况下，控制器负责处理单一类型视图的显示并从该视图委派消息。视图负责显示数据。模型负责创建它们的唯一目的——一个 RSS 项目，用于将数据从 RSS 提要映射到一个对象，一个 RSS 提要对象用于管理一组 RSS 项目（添加、删除，可能通过 获取更多`NSURLRequest`）。

*[注意：根据Stack Overflow 指南](https://stackoverflow.com/questions/how-to-ask)，您的问题有点模糊，所以这可能是它被否决的原因。考虑添加一个具体的例子或描述你所面临的困境。*

# performance - ibatis initmapper 非常慢

> ID：10539178
> 
> 赞同：1
> 
> 时间：2012-05-10T17:21:50.230
> 
> 标签：performance, c#-4.0, ibatis, ibatis.net

我们选择了 ibatis 作为我公司的 o/rm（很多年前），与其他选项相比，我们通常对性能感到满意。但是，我们已经确定了一项服务，其中 initmapper 阶段始终需要 4 - 6 秒。映射器很小，我们只使用 ibatis 映射到存储过程，因此没有动态 sql 影响。

我已经搜索和搜索并没有找到任何其他可能的原因。有没有人看到这种类型的行为是由大型地图文件或动态 sql 生成以外的东西引起的？我迷失了，绝望了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T22:14:44.500

看来，如果我在映射器中映射所有类型（CLR 和 db），我的性能就会提高。尽管 ibatis 文档说这并不是必需的。

# javascript - jquery/jscript 防止打开多个弹出窗口

> ID：10539182
> 
> 赞同：1
> 
> 时间：2012-05-10T17:22:15.453
> 
> 标签：javascript, jquery, popup

我使用超链接的单击事件打开一个弹出窗口...弹出窗口包含来自服务器的记录。

**问题是当我快速点击时**，一次有多个弹出窗口。有办法防止这种情况吗？在其中可以打开一个弹出窗口

我的代码：

```
$('.wrapper_form a.add').click(function(e)
{
    e.preventDefault();

    if(typeof(currentPopup) == 'undefined' || currentPopup.closed)
    {
        url = 'server_page.aspx';
        currentPopup = window.open(url,'server','height=500,width=800');
        if (window.focus) {currentPopup.focus()}
    }
    else
    {
        currentPopup.focus();
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T17:54:34.677

这是一种方法。不是最好的解决方案，但它应该可以工作。这段代码的作用是防止多次单击链接，并为每次单击打开一个新实例。此代码将不允许窗口在 1/2 间隔内打开多次，当然您可以更改时间。

```
var hopefullyThisIsNotInGlobalScope = false;

$('.wrapper_form a.add').click(function(e)
{
if (hopefullyThisIsNotInGlobalScope)
{
 return false;
}
    hopefullyThisIsNotInGlobalScope = true; 
    setTimeout(function () { hopefullyThisIsNotInGlobalScope = false; }, 500);
    e.preventDefault();

    if(typeof(currentPopup) == 'undefined' || currentPopup.closed)
    {
        url = 'server_page.aspx';
        currentPopup = window.open(url,'server','height=500,width=800');
        if (window.focus) {currentPopup.focus()}
    }
    else
    {
        currentPopup.focus();
    }
}); 
```

假设弹出窗口与启动它的窗口位于同一域中，您可能可以将希望ThisIsNotInGlobalScope 变量替换为附加到窗口的全局变量。然后，您可以在弹出窗口启动时设置该变量并使用[浏览器卸载事件更改它](https://stackoverflow.com/questions/1631959/browser-window-close-event)

# c# - Merging two datatable in memory and grouping them to get sum of columns.Using linq but kind of lost here

> ID：10539189
> 
> 赞同：3
> 
> 时间：2012-05-10T17:22:30.630
> 
> 标签：c#, linq, datatable, group-by

I have two table where two column are fixed. Some columns are identical and some are new.**Columns are dynamic.**

**Have to do it in code level and I am trying to loop and conditions**

What I want is to generate a report following the condition,

*   All columns in table1 and table2 must be present.
*   If a column is common and value is there it should be added with the identical row in other table.
*   If any row is present in one table but not in other, it should be included.

**Example data**

Table1

```
ID  | NAME | P1  | P2  | P3 
 ----------------------------
  1  | A1   | 1   |  2 | 3.3
  2  | A2   | 4.4 |  5 |  6 
```

TABLE 2

```
 ID  | NAME | P1 | P2  | P4 
 ---------------------------
  1  | A1   | 10  | 11  |  12
  2  | A2   | 12  | 14  |  15
  3  | A3   | 16  | 17  |  18 
```

Expected output:

```
 ID  | NAME | P1   |  P2  | P3  | P4
 ---------------------------------
  1  | A1   | 11   |  13  | 3.3 | 12
  2  | A2   | 16.4 |  19  |  6  | 15
  3  | A3   | 16   |  17  | null| 18 
```

Progress till now:

First I merged those two table in to table1 `table1.Merge(table2)`

Then trying to group by over it

```
var query = from row in table1.AsEnumerable()
                        group row by new
                        {
                            ID = row.Field<int>("ID"),
                            Name = row.Field<string>("Name")
                        }
                            into grp
                            select new
                            {
                                ID = grp.Key.ID,
                                Name = grp.Key.Name,
                                Phase1 = grp.Sum(r => r.Field<decimal>("P1"))
                            }; 
```

I have modified this code to get a datatable. **Please see attached cs file.**
This is working, but as the number of columns are dynamic, I guess I have to repeat it for other columns and join all these small tables where one columns will be added.

How can I merge all those small tables?

I am lost here.Is there any other way. Its feeling as stupid thing.

Any help would be appreciated.

Attached File:

* * *

[http://dl.dropbox.com/u/26252340/Program.cs](http://dl.dropbox.com/u/26252340/Program.cs)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:29:15.360

You want to use an implementation of a full outer join. Something like what follows.

Some setup so you can try this yourself:

```
DataTable t1 = new DataTable();
t1.Columns.Add("ID", typeof(int));
t1.Columns.Add("Name", typeof(string));
t1.Columns.Add("P1", typeof(double));
t1.Columns.Add("P2", typeof(double));
t1.Columns.Add("P3", typeof(double));

DataRow dr1 = t1.NewRow();
dr1["ID"] = 1;
dr1["Name"] = "A1";
dr1["P1"] = 1;
dr1["P2"] = 2;
dr1["P3"] = 3.3;
t1.Rows.Add(dr1);
DataRow dr2 = t1.NewRow();
dr2["ID"] = 2;
dr2["Name"] = "A2";
dr2["P1"] = 4.4;
dr2["P2"] = 5;
dr2["P3"] = 6;
t1.Rows.Add(dr2);

DataTable t2 = new DataTable();
t2.Columns.Add("ID", typeof(int));
t2.Columns.Add("Name", typeof(string));
t2.Columns.Add("P1", typeof(double));
t2.Columns.Add("P2", typeof(double));
t2.Columns.Add("P4", typeof(double));

DataRow dr3 = t2.NewRow();
dr3["ID"] = 1;
dr3["Name"] = "A1";
dr3["P1"] = 10;
dr3["P2"] = 11;
dr3["P4"] = 12;
t2.Rows.Add(dr3);
DataRow dr4 = t2.NewRow();
dr4["ID"] = 2;
dr4["Name"] = "A2";
dr4["P1"] = 12;
dr4["P2"] = 14;
dr4["P4"] = 15;
t2.Rows.Add(dr4);
DataRow dr5 = t2.NewRow();
dr5["ID"] = 3;
dr5["Name"] = "A3";
dr5["P1"] = 16;
dr5["P2"] = 17;
dr5["P4"] = 18;
t2.Rows.Add(dr5); 
```

The queries look like:

```
var ids = (from r1 in t1.AsEnumerable() select new { ID = r1["ID"], Name = r1["Name"] }).Union(
                    from r2 in t2.AsEnumerable() select new { ID = r2["ID"], Name = r2["Name"] });
var query = from id in ids
            join r1 in t1.AsEnumerable() on id equals new { ID = r1["ID"], Name = r1["Name"] } into left
            from r1 in left.DefaultIfEmpty()
            join r2 in t2.AsEnumerable() on id equals new { ID = r2["ID"], Name = r2["Name"] } into right
            from r2 in right.DefaultIfEmpty()    
            select new
            {
                ID = (r1 == null) ? r2["ID"] : r1["ID"],
                Name = (r1 == null) ? r2["Name"] : r1["Name"],
                P1 = (r1 == null) ? r2["P1"] : (r2["P1"] == null) ? r1["P1"] : (double)r1["P1"] + (double)r2["P1"],
                P2 = (r1 == null) ? r2["P2"] : (r2["P2"] == null) ? r1["P2"] : (double)r1["P2"] + (double)r2["P2"],
                P3 = (r1 == null) ? null : r1["P3"],
                P4 = (r2 == null) ? null : r2["P4"]
            }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T22:49:38.390

Since the columns are dynamic you'll need to return an object with dynamic properties. You could do this with an [ExpandoObject](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx).

The following code is ugly in many ways - I would do some massive refactoring before letting it go - but it gets the job done and might help you out to achieve what you want.
(Sorry for using the other linq syntax.)

```
var query = table1.AsEnumerable()
    .GroupBy(row => new
                    {
                        ID = row.Field<int>("ID"),
                        Name = row.Field<string>("Name")
                    })
    .Select(grp =>
    {
        dynamic result = new ExpandoObject();
        var dict = result as IDictionary<string, object>;
        result.ID = grp.Key.ID;
        result.Name = grp.Key.Name;
        foreach (DataRow row in grp)
        {
            foreach (DataColumn column in table1.Columns)
            {
                string columnName = column.ColumnName;
                if (columnName.Equals("ID") || columnName.Equals("Name"))
                    continue;
                //else
                if (!dict.Keys.Contains(columnName))
                    dict[columnName] = row[columnName];
                else
                {
                    if (row[columnName] is System.DBNull)
                        continue;
                    if (dict[columnName] is System.DBNull)
                    {
                        dict[columnName] = row[columnName];
                        continue;
                    }
                    //else
                    dict[columnName] = (decimal)dict[columnName] + (decimal)row[columnName];
                }
            }
        }
        return result;
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T03:20:47.650

Got this solved by

```
table1.Merge(table2, true, MissingSchemaAction.Add);
finalTable = table1.Clone();
finalTable.PrimaryKey = new DataColumn[] { finalTable.Columns["ID"], finalTable.Columns["Name"] };
List<string> columnNames = new List<string>();
for (int colIndex = 2; colIndex < finalTable.Columns.Count; colIndex++)
{
columnNames.Add(finalTable.Columns[colIndex].ColumnName);
}
foreach (string cols in columnNames)
{
var temTable = new DataTable();
temTable.Columns.Add("ID", typeof(int));
temTable.Columns.Add("Name", typeof(string));
temTable.Columns.Add(cols, typeof(decimal));

(from row in table1.AsEnumerable()
group row by new { ID = row.Field<int>("ID"), Team = row.Field<string>("Team") } into grp
orderby grp.Key.ID
select new
{
ID = grp.Key.ID,
Name = grp.Key.Team,
cols = grp.Sum(r =>  r.Field<decimal?>(cols)),
})
.Aggregate(temTable, (dt, r) => { dt.Rows.Add(r.ID, r.Team, r.cols); return dt; });

finalTable.Merge(temTable, false, MissingSchemaAction.Ignore);
} 
```

# ruby-on-rails - Rails 重定向到用户在登录前想要查看的页面

> ID：10539197
> 
> 赞同：5
> 
> 时间：2012-05-10T17:22:47.387
> 
> 标签：ruby-on-rails, ruby-on-rails-3, session, authentication, ruby-on-rails-3.1

我正在尝试将用户重定向回他们在登录之前尝试访问的页面（该页面仅对用户可见）。

我将从一个针对我的旅行新动作的前置过滤器开始：

`before_filter :authenticate, :only => [:new, :create, :edit, :update, :destroy]`

```
def authenticate
  deny_access unless signed_in?
end 

def deny_access
  store_location
  redirect_to login_path, :notice => "Please log in to access this page."
end

def store_location
  session[:return_to] = request.fullpath
end 
```

这是我的 session_controller.rb 中的新操作和创建操作

```
def new
  @title = "Log in"
end

def create
  user = User.authenticate(params[:session][:email].downcase, 
                           params[:session][:password])     
  if user.nil?
    flash.now[:error] = "Invalid email/password combination."
    @title = "Log in"
    render 'new'
  else
    sign_in user
    redirect_back_or(root_path)
  end
end

def redirect_back_or(default)
  redirect_to(session[:return_to] || default)
  clear_return_to
end 
```

谢谢！

编辑：删除了我的代码的 MaddHacker 版本，因为这不是我想要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T17:29:03.470

我通常使用 before_filter 之类的

```
def login_required
  session[:return_to] = request.fullpath
  redirect_to(login_page_url)
end 
```

然后，当我的登录完成时，我会在会话中查找 return_to：

```
def login
  # user validation of login here
  url = session[:return_to] || root_path
  session[:return_to] = nil
  url = root_path if url.eql?('/logout')
  logger.debug "URL to redirect to: #{url}"
  redirect_to(url)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:27:51.157

好吧，首先您需要调用 store_return_to 方法，然后才能从未经授权的页面重定向到登录页面。然后我认为您需要将方法描述更改为类似`def redirect_back_or_default(default = root_path)`的内容，以便参数变为可选。

顺便说一句，我真的不明白为什么需要将参数传递给该方法，如果它只是一个默认值，那么您可以在方法本身中进行硬编码。

# jquery - 如果坐标超过 24，jQuery goMap 插件折线会消失

> ID：10539198
> 
> 赞同：0
> 
> 时间：2012-05-10T17:22:51.053
> 
> 标签：jquery, google-maps, jquery-plugins

我在杜塞尔多夫有一个 S-Bahn 公共交通网络项目。我想显示所有线路及其车站。

当我添加超过 24 个坐标时，折线消失。我尝试在开头、中间和结尾删除坐标 - 每次坐标低于 24 时都可以工作。

这是我的标记和折线的输出代码。

点使用相同的 latlng 并始终显示在地图上。

这是我的输出页面[查看生成的代码](http://duesseldorf24.eu/test.php)

折线有什么限制吗？

当我完成这段代码时，猜测我将有 300 多个坐标点。

# javascript - 如何在 node.js 中输出深度堆栈跟踪？

> ID：10539201
> 
> 赞同：23
> 
> 时间：2012-05-10T17:23:12.563
> 
> 标签：javascript, debugging, node.js, stack-trace

当发生正常异常时，会输出如下的堆栈跟踪：

```
util.js:38
      case '%s': return String(args[i++]);
                        ^
TypeError: Cannot convert object to primitive value
    at String (unknown source)
    at util.js:38:25
    at String.replace (native)
    at Object.<anonymous> (util.js:35:23)
    at Object.<anonymous> (console.js:25:36)
    at EventEmitter.<anonymous> (/project/src/routines/debug/boot.js:16:21)
    at EventEmitter.emit (/project/node_modules/eventemitter2/lib/eventemitter2.js:319:22)
    at /project/src/bootstrap.js:15:14
    at /project/src/util/routineloader.js:36:11
    at /project/src/util/routineloader.js:47:6 
```

这非常有帮助。然后当我在某处执行以下操作时：

```
process.on('uncaughtException', function(err) {
        console.trace();
        throw err;
    }); 
```

我只得到：

```
Trace: 
    at EventEmitter.<anonymous> (/project/src/routines/debug/exceptions.js:4:17)
    at EventEmitter.emit (events.js:88:20) 
```

这根本没有帮助。

如何让它返回整个堆栈跟踪，就像原来的一样？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-10T17:38:53.857

您快到了：

```
process.on('uncaughtException', function(err) {
  console.log(err.stack);
  throw err;
});

function foo() {
  throw new Error("HI. I'm an error.");
}

foo();

/* Prints
Error: HI. I'm an error.
    at foo (/Users/rye/Desktop/test.js:7:9)
    at Object.<anonymous> (/Users/rye/Desktop/test.js:10:1)
    at Module._compile (module.js:441:26)
    at Object..js (module.js:459:10)
    at Module.load (module.js:348:31)
    at Function._load (module.js:308:12)
    at Array.0 (module.js:479:10)
    at EventEmitter._tickCallback (node.js:192:40)
*/ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-21T18:00:41.370

```
node --stack_trace_limit=200 your-script.js 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-24T05:20:11.530

I found that when I used console.log(err) I got the right results so I looked at the api and found the following:

```
var mystring=require('util').inspect(error_object); 
```

and you'll get the stack trace as a string

# jquery - jQuery Mobile 和 Fullcalendar - 选择事件

> ID：10539202
> 
> 赞同：1
> 
> 时间：2012-05-10T17:23:12.820
> 
> 标签：jquery, zend-framework, mobile, fullcalendar

我正在尝试将 Fullcalendar 与 jQuery Mobile 一起使用，并且我想在用户单击“日”视图中的某个时间时调用 $.mobile.changePage - 偶数触发，它会更改 url，但不会更改远离当前页面。

有没有人集成 jQuery Mobile 和 Fullcalendar？或者知道任何其他可能更好的日历？我正在写一个日程表，所以需要一个基于日期的视图，我可以在其中添加事件。

[http://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/) - 这是我目前正在使用的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:34:14.973

我解决了这个问题，但使用了 fullcalendar select: 方法，并改编了一些优秀的 Fullcalendar JS。

# iphone - 为设备构建时编译非常慢

> ID：10539203
> 
> 赞同：0
> 
> 时间：2012-05-10T17:23:15.260
> 
> 标签：iphone, ios, compiler-construction, ios-simulator, device

我有一个使用大量视频和音频的应用程序。由于 Apple 媒体代码的长期存在且有据可查的错误，在模拟器上运行会导致崩溃。因此我必须在我的 iPhone 上运行。问题是编译时间从 15 秒到超过一分钟。这真的让我慢了下来。

这种编译时间的差异是否正常？

任何人都可以提供任何建议来改善我的困境吗？

# jquery - Jquery 克隆、插入和操作插入的元素

> ID：10539210
> 
> 赞同：1
> 
> 时间：2012-05-10T17:24:04.317
> 
> 标签：jquery, insert, traversal, cloning

我正在克隆一个包含 2 个按钮的表。一个按钮克隆并插入一个新的表格行，另一个按钮克隆整个表格并将其插入到最后一个表格之后。

当一个表被克隆并插入到底部时，我单击“添加”按钮添加一个新行，该行仅插入到顶部表中。

如果我有 5 个表，如何在相应表中插入新行？

**我的 HTML：**

```
<table class="myTable">
<tr class="firstRow">
    <td>
        Name: <input type="text" size="30" />
    </td>
    <td>
        Email: <input type="text" size="30" />
    </td>
</tr>
<tr>
    <td colspan="2" align="right">
        <input type="button" value="Add" class="addRow" />
    </td>
</tr>
</table>

<p><input type="button" value="Copy" class="addTable" /></p> 
```

**jQuery：**

```
$('.addRow').click(function(){
  var cloned = $('.firstRow').clone(true);
  cloned.insertAfter($('table.myTable tr').eq(-2)).removeClass('firstRow');
});

$('.addTable').click(function(){
  var cloned = $('.myTable').clone(true);
  cloned.insertAfter($('.myTable:last')).before('<hr />').removeClass('myTable');
}); 
```

**我的小提琴：http:** [//jsfiddle.net/jonxblaze/S3N77/](http://jsfiddle.net/jonxblaze/S3N77/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:01:04.347

您对`.addRow`按钮的实现并不好。

请试试这个：

```
$('.addRow').click(function(){
    var cloned = $(this).parents('table').find('tr:eq(0)').clone(true);
    cloned.insertBefore($(this).parents('table').find('tr:last-child'));
}); 
```

上面的实现不需要`.firstRow`类。此外，它仅在作为单击按钮的父级的表上插入克隆行。

**[演示](http://jsfiddle.net/TYGB3/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:35:24.423

这是因为绑定克隆行点击事件时，第二个克隆的表不存在。您需要使用 jQuery .on() 函数来执行此操作。

[http://api.jquery.com/on/](http://api.jquery.com/on/)

基本上，当您使用 .click() 时，它将该函数绑定到它可以找到与选择器匹配的所有元素，在文档准备好时，它只是一个表。.on() 适用于所有元素，而不仅仅是那些在脚本运行时存在的元素。

如果您真的想使用 .click() 而不是 .on()，请在创建第二个表格后重新绑定单击。

这是我遇到类似问题的帖子： [Using jQuery .on() to make a drop-down menu](https://stackoverflow.com/questions/9268098/using-jquery-on-to-make-a-drop-down-menu)

# oracle11g - liquibase 和 Oracle 11g 可变数组

> ID：10539212
> 
> 赞同：0
> 
> 时间：2012-05-10T17:24:10.400
> 
> 标签：oracle11g, liquibase

我对 liquibase 完全陌生，我想知道是否可以将它用于我正在从事的项目。在大多数情况下，我的架构非常简单且相当通用。但是，其中一个字段是 vArray。我可以在 liquibase 中定义它吗？示例代码将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:19:19.177

liquibase 中没有对可变数组的内置支持，但是有一个 < [sql](http://www.liquibase.org/manual/custom_sql) > 标签可以让你做任何你可以通过 SQL 做的事情。

# amazon-web-services - 如何在 DynamoDB 中查看表数据

> ID：10539214
> 
> 赞同：0
> 
> 时间：2012-05-10T17:24:28.543
> 
> 标签：amazon-web-services, amazon-dynamodb

AWS 控制台似乎表明我的表有一些来自我的测试 put_item() 调用的数据，但我想实际*查看*这些数据。有没有办法在 AWS 控制台中执行此操作？我在 AWS Explorer 上读过一些可以作为插件安装到 Eclipse 或 Visual Studio 的东西，但我是一个不使用 Eclipse 的 PHP 开发人员，所以为了确保正确的数据而安装整个 IDE 似乎很愚蠢正在输入。

如何检查 DynamoDB 表中的数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T12:47:13.130

[更新] 亚马逊刚刚在 AWS 管理控制台中为 DynamoDB 推出了“探索表”。

* * *

如果您使用的是 Visual Studio 或 Eclipse，则可以使用[AWS Explorer](http://aws.amazon.com/eclipse/#explorer)查看所有表和数据。

在 Eclipse 中，它看起来像这样：

![Eclipse 中 AWS Explorer 的屏幕截图](../Images/8cb0a1cdd32df2b6cfd7bde4bc447c2c.png)

# yii - 页面加载时 CGridview 过滤器在搜索字段中具有预定义值

> ID：10539216
> 
> 赞同：2
> 
> 时间：2012-05-10T17:24:31.300
> 
> 标签：yii, cgridview

我正在使用 Yii 框架。

我使用以下方法在我的 cgridview 过滤器字段之一中设置了一个值：

这是我的 jQuery 为搜索字段赋值：

```
$('#gridviewid').find('input[type=text],textarea,select').filter(':visible:first').val('".$_GET['value']."'); 
```

这里是我调用 cgridview 的 PHP：

```
$this->widget('zii.widgets.grid.CGridView', array(
'id'=>'bills-grid',
'dataProvider'=>$dataProvider,
'filter'=>$model,
'cssFile'=>Yii::app()->baseUrl . '/css/gridview.css',
'pager'=>array(
    'class'=>'AjaxList',
    'maxButtonCount'=>25,
    'header'=>''
),
'columns' => $dialog->columns(),
'template'=>"<div class=\"tools\">".$dialog->link()."&nbsp;&nbsp;&nbsp;".CHtml::link($xcel.'  Export to excel', array('ExcelAll'))."</div><br />{items}{summary}<div class=\"pager-fix\">{pager}</div>",)); 
```

该值出现在搜索字段中，我的 cgridview 正常工作，没有任何问题，但我无法触发 cgridview 刷新或过滤。有谁知道在页面加载后使用预定义值触发 cgridview 过滤的人？

任何帮助将不胜感激，如果您需要更多信息，请告诉我。

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T12:49:59.183

您可以在不修改任何客户端代码的情况下解决问题。在您的控制器操作中，只需设置属性的默认值，如下所示

```
public function actionAdmin()
{
    $model = new Bills();
    $model->unsetAttributes();
    $model->attribute_name="default filter value";//where attribute_name is the attribute for which you want the default value in the filter search field
    if(isset($_GET['Bills'])){
        $model->attributes = $_GET['Bills'];
    }

    $this->render('admin',array('model'=>$model));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:14:06.597

查看 gii 生成的“默认”索引操作：

```
public function actionIndex()
{
    $model = new Bills();
    $model->unsetAttributes();
    if(isset($_GET['Bills'])){
        $model->attributes = $_GET['Bills'];
    }

    $this->render('index',array('model'=>$model));
} 
```

因此，如果您添加一行：`$model->attribute = 'test';`，您就完成了。“属性”当然是必须具有默认过滤器值的属性（在这种情况下，值是“测试”）:)。所以你的代码看起来像：

```
public function actionIndex()
{
    $model = new Bills();
    $model->unsetAttributes();
    if(isset($_GET['Bills'])){
        $model->attributes = $_GET['Bills'];
    }

    if(!isset($_GET['Bills']['attribute']) {
        $model->attribute = 'test';
    }

    $this->render('index',array('model'=>$model));
} 
```

当然，只要您不在其过滤器字段中键入任何内容，您的属性就会设置一个测试值（在过滤器中）。我希望这就是你要找的。您的过滤器应该像往常一样工作。

对不起，我的英语不好 ：）

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T20:43:45.290

你可以使用 Yii 的更新：

```
$.fn.yiiGridView.update('bills-grid', {
 type: 'GET',
 url: <?php echo Yii::app()->createUrl('controller/action') ?>"?Class[attribute]=<?php echo $_GET['value'] ?>
 success: function() {
  $.fn.yiiGridView.update('bills-grid');
 }
}); 
```

我就是这样做的，只需更改 URL，它应该是 gridview 的相同控制器操作，并将 URL 参数更改为其中表示的结构，应该像**Bills[attribute]=value**。

# javascript - 如何防止复选框选中或未选中的值，直到单击保存，而页面每 20 秒自动刷新一次

> ID：10539217
> 
> 赞同：-1
> 
> 时间：2012-05-10T17:24:35.697
> 
> 标签：javascript, jquery

> **可能重复：**
> [复选框在页面刷新时保持选中状态](https://stackoverflow.com/questions/3176155/checkbox-stays-checked-on-page-refresh)

![]](../Images/5179305dbbd90b5e192bef900c1a1e30.png)

请仔细查看图片。此页面每 20 秒自动刷新一次。我的问题是看图片的底部，我在备份频率组中有 8 个复选框。当我选中或取消选中复选框时，由于页面刷新，我无法保存更改。我知道我可以增加刷新时间和它的可能。但是我需要一些其他逻辑来防止选中或未选中的值，直到我单击“应用更改”（保存）。
例如，8 个复选框有 8 个不同的 id，当我单击 id 时，我在选中时将值设置为 true，否则设置为 false。等等 。请用 jquery 或 javascript 编写代码。

请为这个疑问提供一个工作代码。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:29:11.897

简单而正确的解决方案是不要每 20 秒刷新一次页面，根本不刷新它。根据刷新的原因，您可以将其替换为 ajax 调用。

或者，如果您想以错误的方式执行此操作，请通过设置 document.location 每隔 N 秒从 javascript 刷新页面，但在更改位置之前检查用户是否更改了值，在这种情况下，在用户按下保存按钮和因此重新加载页面，例如这样的

```
user_activity = false;

function refresh(){
    if(user_activity) return;
    window.location.reload()
}

$('.mycheckboxes').click(){
    user_activity=true;
}

window.setInterval(refresh, 20000); 
```

# php - 无法通过php生成正确的soap xml请求

> ID：10539218
> 
> 赞同：0
> 
> 时间：2012-05-10T17:24:37.263
> 
> 标签：php, soap, wsdl

我正在尝试创建正确的基于 wsdl 的肥皂请求，但没有成功，这是我需要的示例： **soap.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Header>
      <AuthMember xmlns="http://tempuri.org/">
           <somefield>string</somefield>
      </AuthMember>
  </soap:Header>
  <soap:Body>
      <AuthenticateMember xmlns="http://tempuri.org/" />
  </soap:Body>
</soap:Envelope> 
```

我的结果是： **soap.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"             xmlns:ns1="http://tempuri.org/" xmlns:ns2="http://schemas.xmlsoap.org/ws/2002/07/utility">
<SOAP-ENV:Header>
    <ns2:AuthMember>
        <somefield>somefieldvalue</somefield>
    </ns2:AuthMember>
</SOAP-ENV:Header>
<SOAP-ENV:Body>
    <ns1:AuthenticateMember/>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

这是我的 php 代码：

```
 class SoapHeaderAuthMember
    {

        public $somefield;

        public function __construct($somefield)
        {

            $this->somefield = $somefield;        

        }
    }

    $client = new SoapClient( 'https://www.somepage.com/service.asmx?WSDL', 
        array("exceptions"=>0, "trace" => 1 )
    );
    $authMember = new SoapHeaderAuthMember('somefieldvalue');

    $soapHeaders[] = new SoapHeader('http://schemas.xmlsoap.org/ws/2002/07/utility', 'AuthMember', $authMember);
    $client->__setSoapHeaders($soapHeaders);                 

    $client->__soapCall('AuthenticateMember',array()); 

```

看，

1.它生成 SOAP-ENV:Envelope 而不是 SOAP-ENV:Envelope

2.in 标头：我有 ns2:AuthMember 而不是 AuthMember

3.在正文中我有 ns1:AuthenticateMember 而不是 AuthenticateMember xmlns="http://tempuri.org/"

我怎样才能得到正确的 xml ？我查看了 php 函数手册并找不到答案，谷歌搜索并没有给我的案例提供成功的结果。

能否请你帮忙 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:41:22.980

生成的结果就是代码中要求的，但是对命名空间的一些属性的解释是有序的：

XML 文档中的每个标签都有一个完全限定的形式，它由名称空间和标签名称定义（即使它位于没有显式名称空间声明的“默认”名称空间中）。完全限定的版本通常写为*{namespace}tag*。通过解析完全限定名称，可以确定两个元素的表示是否相同。

命名空间以多种方式与元素相关联，包括与元素显式包含命名空间

```
Example:
<AuthMember xmlns="http://tempuri.org/">
resolving to fully-qualified name {http://tempuri.org/}AuthMember 
```

并通过命名空间相关的前缀

```
Example:
<... xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
    <soap:Header>
resolving to {http://schemas.xmlsoap.org/soap/envelope/}Header 
```

前缀在声明前缀的元素和任何包含的元素的范围内。实际使用的前缀并不重要（*soap*、*SOAP-ENV*或*randomprefix*可用于*http://schemas.xmlsoap.org/soap/envelope/*命名空间），尽管好的做法是使用有意义的东西。

鉴于此，“期望”和“实际”文档中的完全限定元素几乎相同，异常是标题元素 AuthMember。在您想要的中，您为完全限定的*{http://tempuri.org/}AuthMember指定一个**http://tempuri.org/*的命名空间。实际上，前缀关联会产生完全限定的*{http://schemas.xmlsoap.org/ws/2002/07/utility}AuthMember*。

 **这是为 AuthMember 指定 ...utility 命名空间的 SoapHeader 实例化的结果。在代码中更改该语句以使用*http://tempuri.org/*命名空间应该会导致实际文档与所需的匹配。**

# c# - 为什么 string.Format 会产生这样的结果？

> ID：10539221
> 
> 赞同：2
> 
> 时间：2012-05-10T17:24:48.013
> 
> 标签：c#, string

我的代码中有如下一行：

```
string buffer = string.Format(CultureInfo.InvariantCulture, "{0:N4}", 1008.0); 
```

为什么执行此行后`buffer`包含`1,008.0`（注意逗号）？

是的，我猜这是由我的区域设置引起的。问题是为什么它们会影响这种情况下的结果？

编辑：

好吧，我明白这完全是我的错。看来我应该使用[F 格式说明符](http://msdn.microsoft.com/en-us/library/dwhawy9k#FFormatString)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T17:30:17.917

`InvariantCulture`松散地基于其`en-US`用作`,`千位（组）分隔符。

你的结果是我所期望的。

我还指出了[`N`数字格式说明符](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#NFormatString)的详细信息：

> 数字（“N”）格式说明符将数字转换为“-d,ddd,ddd.ddd…”形式的字符串，其中“-”表示负数符号（如果需要），“d”表示数字（0 -9)，“，”表示组分隔符，“.”表示组分隔符。表示小数点符号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T17:32:07.480

您正在使用**不变的文化**；你的文化与此无关。为此，N4 格式意味着

```
-d,ddd,ddd,ddd... 
```

也就是说，数千组之间可能有前导负号指示符和逗号。有关详细信息，请参阅：http: [//msdn.microsoft.com/en-us/library/dwhawy9k#NFormatString](http://msdn.microsoft.com/en-us/library/dwhawy9k#NFormatString)

你可以看看

```
NegativeSign
NumberNegativePattern
NumberGroupSizes
NumberGroupSeparator
NumberDecimalSeparator
NumberDecimalDigits 
```

对于不变的文化。如果你这样做，你会看到：

```
-
1
{ 3 }
,
.
2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T17:32:45.857

由于“{0:N4}”，您得到逗号

> n ----- 用逗号表示千位的数字 ----- {0:n} [来源：](http://blog.stevex.net/string-formatting-in-csharp/)

即使没有指定 InvariantCulture，您也会得到逗号

```
Console.WriteLine(string.Format("{0:n4}", 1008.0)); 
```

# java - JAXB JSON JAR 运行时列表阅读器不可用

> ID：10539222
> 
> 赞同：1
> 
> 时间：2012-05-10T17:24:57.933
> 
> 标签：java, jaxb, intellij-idea, jersey

我有一个用 IntelliJ IDEA 创建的小项目，使用 Jersey。我已经创建了运行良好的服务器部分并托管在 GAE 服务器上。我尝试通过 Jersey 客户端连接到它，但奇怪的东西来了。如果我从 IntelliJ IDEA 内部运行我的应用程序，一切正常。但是，一旦我运行 jar JSON 支持似乎就消失了，但是 XML 可以工作。有任何想法吗？

我觉得有必要提一下 jersey-json 是与生成的 jar 打包在一起的。这是有问题的jar文件。您将需要 jar 和 dll 文件，一个靠近另一个，然后运行它。

控制台输出（错误）：[https ://docs.google.com/open?id=0B42XvjSlpDCtTTdwQl9MSTBlQ0U](https://docs.google.com/open?id=0B42XvjSlpDCtTTdwQl9MSTBlQ0U)

我使用的 JAR 文件（提取到其中的所有依赖项）。任何 JRE6 都可以运行它。[https://docs.google.com/open?id=0B42XvjSlpDCtTVNUQTQ4SXFCcDg](https://docs.google.com/open?id=0B42XvjSlpDCtTVNUQTQ4SXFCcDg)

JAR 所需的 DLL（尽管它也应该在没有这个的情况下工作）：[https ://docs.google.com/open?id=0B42XvjSlpDCtNXpabVk5RDkyRW8](https://docs.google.com/open?id=0B42XvjSlpDCtNXpabVk5RDkyRW8)

这是github（公共）上的源代码：[https ://github.com/gaborbernat/fs_viewer](https://github.com/gaborbernat/fs_viewer)

最后，我附上一张带有工件（JAR）生成规则设置的图片。![JAR 工件生成](../Images/ef018793dde4352961e04829cd003486.png)

谢谢你的支持， ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:56:10.880

请参阅[http://java.net/projects/jersey/sources/svn/content/trunk/jersey/jersey-tests/src/test/java/com/sun/jersey/impl/json/ListOfJAXBBeanTest.java?rev= 5698](http://java.net/projects/jersey/sources/svn/content/trunk/jersey/jersey-tests/src/test/java/com/sun/jersey/impl/json/ListOfJAXBBeanTest.java?rev=5698)

（您的用例可以从那里提取；关键是您需要配置 Jersey 客户端以通过 a）注册 JAXBContextResolver 或 b）显式添加 MessageBodyWriters（杰克逊）来处理 json）

并且不要忘记使用 GenericEntity（如在链接测试中）。

# url-rewriting - SharePoint 中的 SignalR

> ID：10539225
> 
> 赞同：0
> 
> 时间：2012-05-10T17:25:20.837
> 
> 标签：url-rewriting, sharepoint-2007, signalr

我的项目需要实时用户交互，我认为 SignalR 将解决我的需求。我在技术上是在 SharePoint 2007 项目中，虽然我只在应用程序页面中，因此几乎不使用 SharePoint。无论如何，我被困在 IIS 中的 2.0 框架应用程序池中。

我的第一种方法是尝试创建一个 4.0 应用程序作为子站点。不幸的是，这惨遭失败。这种方法适用于非 SharePoint 世界，但似乎 SharePoint 劫持了太多的请求管道，以使这种方法对我有用。

所以现在我正在创建一个单独的 IIS 站点，它是 4.0，并使用 IIS 重写规则来伪造我的应用程序，使其认为特定的子目录 (/realtime/) 是本地的而不是单独的站点，所以我没有处理跨域请求问题。问题是我无法让 IIS 重写规则重写到另一个 http 主机（例如[http://www.mySharepoint.com/_layouts/MySite/realtime/Hello.aspx](http://www.mySharepoint.com/_layouts/MySite/realtime/Hello.aspx)到[http://realtime.mySharePoint.com/Hello .aspx](http://realtime.mySharePoint.com/Hello.aspx)）。

对于方法#1 或方法#2 或任何替代想法的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T02:00:29.613

这就是我所做的...带有signalR .net4.0的Web App，然后是您的SharePoint Web App .net 2。

1.  将此添加到 Signalr 项目中的 global.asax

    ```
    RouteTable.Routes.MapHttpHandlerRoute("spproxy","spproxy/{*operation}", new SharePointRProxyHandler()); 
    ```

2.  例如，如果您想从 SharePoint 引发事件，您可以对这个新路由 URL 执行 http POST

    ```
     http://localhost:38262/spproxy 
    ```

    它会将任何发布的数据传递到下面的 httphandler，然后将其广播给您的客户。

这是 MapHttpHandlerRoute 的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace System.Web.Routing
{
public class HttpHandlerRoute : IRouteHandler
{
    private String _virtualPath = null;
    private IHttpHandler _handler = null;

    public HttpHandlerRoute(String virtualPath)
    {
        _virtualPath = virtualPath;
    }

    public HttpHandlerRoute(IHttpHandler handler)
    {
        _handler = handler;
    }

    public IHttpHandler GetHttpHandler(RequestContext requestContext)
    {
        IHttpHandler result;
        if (_handler == null)
        {
            result = (IHttpHandler)System.Web.Compilation.BuildManager.CreateInstanceFromVirtualPath(_virtualPath, typeof(IHttpHandler));
        }
        else
        {
            result = _handler;
        }
        return result;
    }
}

public static class RoutingExtensions
{
    public static void MapHttpHandlerRoute(this RouteCollection routes, string routeName, string routeUrl, string physicalFile, RouteValueDictionary defaults = null, RouteValueDictionary constraints = null)
    {
        var route = new Route(routeUrl, defaults, constraints, new HttpHandlerRoute(physicalFile));
        RouteTable.Routes.Add(routeName, route);
    }

    public static void MapHttpHandlerRoute(this RouteCollection routes, string routeName, string routeUrl, IHttpHandler handler, RouteValueDictionary defaults = null, RouteValueDictionary constraints = null)
    {
        var route = new Route(routeUrl, defaults, constraints, new HttpHandlerRoute(handler));
        RouteTable.Routes.Add(routeName, route);
    }
}
} 
```

或者您可以直接发布到 httphandler 并让处理程序进行连接。广播

```
namespace SharePointRProxy
{
 /// <summary>
 /// Summary description for SharePointRProxyHandler
 /// </summary>
 public class SharePointRProxyHandler : IHttpHandler
 {

     public void ProcessRequest(HttpContext context)
     {
         context.Response.ContentType = "text/plain";
         IConnectionManager connectonManager = AspNetHost.DependencyResolver.Resolve<IConnectionManager>();
         IConnection connection = connectonManager.GetConnection<MyConnection>();

         object payload = null; //Add payload here 'context.Request.Params["data"] ?'

         JavaScriptSerializer jss = new JavaScriptSerializer();
         var payloadJSON = jss.Serialize(payload);

         connection.Broadcast(payloadJSON);
     }

     public bool IsReusable
     {
         get
         {
             return false;
         }
     }
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:14:00.277

您还可以使用调用 .net 4.0 Web 服务的事件处理程序或 http 处理程序从 SharePoint 获取请求并将它们传递给运行信号器代码的 .net 4.0 应用程序。

您可以在此处查看使用 http 处理程序的示例：http: [//spmatt.wordpress.com/2012/04/12/harnessing-signalr-in-sharepoint/](http://spmatt.wordpress.com/2012/04/12/harnessing-signalr-in-sharepoint/)

# ruby-on-rails - 如何在 Rails 和 Heroku 中部署阶段服务器

> ID：10539231
> 
> 赞同：0
> 
> 时间：2012-05-10T17:25:39.210
> 
> 标签：ruby-on-rails, deployment, heroku, staging

我的 Rails 应用程序托管在 Heroku 上。在更新我的主应用程序之前，我希望有另一台服务器用于暂存（即显示和测试新功能）。

我不知道如何在一般情况下以及在 Rails 中执行此操作。

我应该怎么做？我是否需要创建全新的应用程序、Git 存储库、Heroku 服务器等？

这种工作最受欢迎的宝石是什么？（我听说过很多关于 Caspitrano 的信息，但我不知道它在 Heroku 的环境中有何帮助）。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:33:36.683

Heroku 文档涵盖了这种情况。您只需要为暂存创建另一个分支。检查它[ht​​tps://devcenter.heroku.com/articles/multiple-environments](https://devcenter.heroku.com/articles/multiple-environments)

# git - git svn clone grab 是复制所有分支中的所有文件，还是只复制结构？

> ID：10539235
> 
> 赞同：1
> 
> 时间：2012-05-10T17:25:50.353
> 
> 标签：git, svn

我目前正在从一个有很多分支和标签的 svn 存储库中进行 git svn 克隆，这需要很长时间（2 小时并且还在计数）。它是从所有分支获取文件*内容*，还是仅从主干获取文件内容？如果是前者，它是否足够聪明，可以查看何时创建分支，从而不会抓取重复文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:43:31.317

Git-svn 非常慢，因为它会向 subversion 服务器询问每个提交并在本地一个一个地重放它们。因此，Git 存储库包含操作完成时的所有内容（主干、分支和标签）。但这需要非常非常长的时间。

git-svn 命令有 IMO 两个主要问题：

*   它无法过滤掉与您尝试克隆的 svn 子树无关的修订（即，即使它们不影响您正在克隆的子树，它也会从 SVN 根文件夹获取每个提交）
*   它从一开始就获取提交，防止您在完成之前开始工作。

我建议你看看 SmartGit 客户端 ( [syntevo.com/smartgit](https://www.syntevo.com/smartgit/) )，它实现了一个完全重构的 git 到 svn 桥接层。有了它，只需几分钟即可克隆并准备好 svn 存储库。在几秒钟内首先检索最后一个修订，然后在后台获取其余的修订，这样您就可以非常快速地开始工作。

# jquery - jQuery无限队列

> ID：10539239
> 
> 赞同：0
> 
> 时间：2012-05-10T17:25:52.477
> 
> 标签：jquery

我对 jQuery 有点陌生，在这种情况下我无法设置队列。

我正在尝试这样做：鼠标悬停时会触发第一个队列条目。然后它**等到**另一个鼠标悬停触发下一个队列条目。无限循环队列。

[http://jsfiddle.net/fChDX/](http://jsfiddle.net/fChDX/)

```
$("#header").mouseover(function() {
    var $shineCopy = $("#shine111").clone();
    $shineCopy.appendTo('body').animate({
        width: "300px",
        height: "300px",
        opacity: 0,
        "left": 0,
        "top":  100
    }, 1000, function() {
        $(this).remove();
    });
    $shineCopy.appendTo('body').rotate({animateTo:180})
});
​
$("#header").mouseover(function() {
    var $shineCopy = $("#shine222").clone();
    $shineCopy.appendTo('body').animate({
        width: "300px",
        height: "300px",
        opacity: 0,
        "left": 0,
        "top":  200
    }, 1000, function() {
        $(this).remove();
    });
    $shineCopy.appendTo('body').rotate({animateTo:180})
});

$("#header").mouseover(function() {
    var $shineCopy = $("#shine222").clone();
    $shineCopy.appendTo('body').animate({
        width: "300px",
        height: "300px",
        opacity: 0,
        "left": 0,
        "top":  300
    }, 1000, function() {
        $(this).remove();
    });
    $shineCopy.appendTo('body').rotate({animateTo:180})
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T20:38:47.767

分别定义三个函数，在页面级别定义一个 javascript 计数器变量，并让您的鼠标悬停事件更新 coutner 变量并根据它决定调用哪个函数。如果您想确保在前一个正在运行时不会触发下一个，请在 start 函数上设置第二个“isrunning” var，在 remove 函数上设置为 false，并检查它。没有什么花哨的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T02:22:42.717

感谢 Felix 的[jQuery 函数切换插件](https://github.com/fkling/jQuery-Function-Toggle-Plugin)，这简直是小菜一碟！

更新了 jsFiddle 以显示结果。
[http://jsfiddle.net/Wuq6M/](http://jsfiddle.net/Wuq6M/)

# jquery - 如何在_Layout.cshtml中的列表项中动态设置样式

> ID：10539242
> 
> 赞同：4
> 
> 时间：2012-05-10T17:25:59.853
> 
> 标签：jquery, asp.net-mvc-3, razor

我在 _Layout.cshtml 中有这个菜单：

```
<td class="MenuStructure">
    <ul id="menu">
        <li>@Html.ActionLink("First Page", "Page1Action", "Main")</li>
        <li>@Html.ActionLink("Second Page", "Page2Action", "Main")</li>
        <li>@Html.ActionLink("Third Page", "Page3Action", "Second")</li>
    </ul>
</td> 
```

单击其中一个操作链接时，我想将包含它的 <li> 的类设置为“已选择”，将其他 <li> 元素的类设置为“”。

这有效：

```
 <script type="text/javascript">
        $(document).ready(function () {
        var selMenu = '@ViewBag.SelectedMenu';
            if (selMenu == "page1") {
                $("#page1").attr('class', 'selected');
                $("#page2").attr('class', '');
                $("#page3").attr('class', '');
            }
            if (selMenu == "page2") {
                $("#page1").attr('class', '');
                $("#page2").attr('class', 'selected');
                $("#page3").attr('class', '');
            }
        });
    </script> 
```

但它非常丑陋。有人可以告诉我一个更优雅的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:34:29.927

如果您将单击事件处理程序添加到`a`元素组，则可以轻松地将类添加到单击的元素`li`并为所有兄弟元素删除它，无论有多少。这消除了对 if 语句和`attr`每个`li`.

这是一个示例：

[http://jsfiddle.net/JjBgm/4/](http://jsfiddle.net/JjBgm/4/)

标记：

```
<ul id="menu">
    <li><a href="#">one</a></li>
    <li><a href="#">two</a></li>
    <li><a href="#">three</a></li>
</ul> 
```

jQuery：

```
$(document).ready(function() {

    $('#menu li a').click(function() {
        $(this).parent().addClass('selected').siblings().removeClass('selected');
    });

}); 
```

您显然必须使用 MVC 根据您的需要修改这种方法，但是这个概念应该有效。

**编辑：**因为你提到有一个往返所涉及的服务器上面可能无法正常工作。在这种情况下，您可以根据所选菜单构建客户端 id 并从那里控制类。

```
$(document).ready(function () {
    var selMenu = '@ViewBag.SelectedMenu';
    $("#" + selMenu).addClass('selected').siblings().removeClass('selected');
}); 
```

这是假设`#page1`,`#page2`等`<li>`在服务器处理后没有看到生成的标记的情况下引用元素。

如果`#page1`引用`<a>`标签，那么您的声明将是：

```
$("#" + selMenu).parent().addClass('selected').siblings().removeClass('selected'); 
```

当然未经测试。重点是动态构建您的选择器，然后根据需要使用兄弟选择器和父选择器来清除类。干净多了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:01:13.923

我假设这是您网站的主要导航，即使您没有执行确切的操作，您也希望保持顶部菜单“选中”（例如，链接进入列表，但随后您进入“编辑”页等）。

有两种方法可以做到这一点。一种是在 viewbag 中放置一个属性，然后在渲染时在 _layout.cshtml 文件中检查该属性。

```
// in controller Action method
ViewBag.SelectedMenu = "first"
// in view
<li class="@((ViewBag.SelectedMenu == "first") ? "selected-class" : "")">first link</li> 
```

第二种方式（我们使用的）是使用[站点地图](http://mvcsitemap.codeplex.com/)包（从 NuGet 安装）。然后您在根目录中编辑您的站点地图文件，并将所有链接放在那里（即使是您不直接用于导航的链接）。然后，您可以为您呈现控件`<ul><li>'s`。它主要输出与您现在拥有的相同的 html，因此 css 应该仍然可以工作。

*   所有菜单内容集中在一个地方
*   站点地图尊重 [authorize] 属性或其他过滤器，仅隐藏登录链接
*   可以隐藏/显示菜单中可能不存在的节点（重新映射的 url 等）
*   许多其他不错的小功能

`Mvc.sitemap`文件：

```
<mvcSiteMapNode title="Home" controller="Home" action="Index">
<mvcSiteMapNode title="Get a car" controller="Cars" action="Buy"/>
    <mvcSiteMapNode title="Reports" controller="Report" action="AllReports">
      <mvcSiteMapNode title="" controller="Report" action="ViewMPG"/>
    </mvcSiteMapNode>
</mvcSiteMapNode> 
```

然后，在您的`_Layout.cshtml`文件中：

```
<td class="MenuStructure">
    <!-- one level menu starting at top (home), including the "home" link -->
    @Html.MvcSiteMap().Menu(0, true, true, 1)
</td> 
```

然后修改`Views\Shared\MenuHelperModel.cshtml`改变样式：

```
<ul id="menu">
    @foreach (var node in Model.Nodes)
    {
        var show = node.IsInCurrentPath && (!node.IsRootNode || node.IsCurrentNode);
        var cls = show ?  "selected" : ""; 
        <li class="@cls">@Html.DisplayFor(m => node)</li>
    }
</ul> 
```

# jquery - 全宽 div

> ID：10539248
> 
> 赞同：0
> 
> 时间：2012-05-10T17:26:43.520
> 
> 标签：jquery, fullscreen, scrollto

我正在做一个使用 jQuery ScrollTo 的项目

我有 6 行，每行有 6 个子 div，我希望这些子 div 中的每一个都是“全宽”（浏览器窗口中的边到边）。

这是我的小提琴：http: [//jsfiddle.net/RZjrV/2/](http://jsfiddle.net/RZjrV/2/)

这是一个现场版本：[http ://www.david-haigh.com/Website-Files/index.html](http://www.david-haigh.com/Website-Files/index.html)

干杯! ;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T07:43:35.097

Alot of times you would want fixed sidebars but full body...heres my fiddle for tht

[http://fiddle.jshell.net/asadpakistani/8sSMD/](http://fiddle.jshell.net/asadpakistani/8sSMD/)

Demo: [http://fiddle.jshell.net/asadpakistani/8sSMD/show/](http://fiddle.jshell.net/asadpakistani/8sSMD/show/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:47:10.997

在CSS中你可以做类似的事情

```
.child_div {
  width: 100%;
} 
```

但看起来它可能需要像这样使用 jquery/js 来完成：

```
$(".child_div").width($(document).width()) 
```

# asp.net - 使用远程 SQL 服务器上的用户凭据使用表单身份验证保护 asp.net 4.0 网站

> ID：10539255
> 
> 赞同：1
> 
> 时间：2012-05-10T17:27:22.990
> 
> 标签：asp.net, authentication, forms-authentication

这是我第一次尝试构建安全的 Web 应用程序。它将在 Internet 上，它包括一个 IIS 服务器（由 ISP 托管）和 SQL 2008 db（也由 ISP 托管）。

作为一个快速而肮脏的测试，我只是在 Visual Studio 中使用模板。我只使用 ASP.NET 配置工具上的向导配置了身份验证。但是，这会创建一个隐藏在 Web 应用程序中的数据库。

我更愿意将用户凭据保留在 SQL 服务器上，因为这似乎是允许可伸缩性的最佳实践。但是，我该怎么做？我对数据库的访问权限有限——我可以创建表，但我认为我无法在服务器上运行任何工具来创建正确的模式。谁能指出我正确的方向？做了一些谷歌搜索，但一直看到 ASP.NET 1.1 文章，这让我觉得我可能遗漏了一些东西，并且在 ASP.NET 4.0 中有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:34:08.993

在 SQL Server 中创建一个存储用户登录名和密码的用户表。您可以对密码进行哈希处理，这样即使管理员自己（包括您自己）也看不到它。然后在表单身份验证期间使用 LINQ 拉取，以根据用户表检查登录名/密码。

您还可以使用嵌入式 SQL 或存储过程来代替 LINQ。但是，嵌入式 SQL 是高度不安全的，因此留下了存储过程和 Linq。如果您熟悉它，我更喜欢使用 Linq。或者使用最安全的存储过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T04:51:45.020

您不必“必须”使用整个 ASP.Net Membership 框架来使用 Forms 身份验证。它为你做了很多工作（安全等），所以如果可以的话，最好使用它——如果你刚开始的话，更是如此。

您可以将表单身份验证与您想要的任何身份验证方案一起使用（预先存在的或您自己创建的东西）。这是一个[过于简单的示例](http://msdn.microsoft.com/en-us/library/xdt4thhy%28v=vs.100%29.aspx)，您可以在其中看到您甚至可以对身份验证方案进行硬编码（**不是**您应该这样做，但它向您展示了可能性）。

最后，如果您无法运行命令行 ASP.Net 工具`aspnet_regsql.exe`，则用于创建架构的 sql 脚本位于：`C:\Windows\Microsoft.NET\Framework\[Framework version]`.

所以对于.Net 4，它将是：`C:\Windows\Microsoft.NET\Framework\v4.0.30319`

安装和“卸载” sql 脚本都在那里 - 例如

*   安装会员.sql
*   卸载会员.sql

... 等等....

# javascript - 将 $.getJSON 与 JSCharts 一起使用

> ID：10539263
> 
> 赞同：0
> 
> 时间：2012-05-10T17:27:57.040
> 
> 标签：javascript, jquery

我是 JSCharts 的初学者。我正在使用 $.getJSON 加载 json 文件，我想用它们创建带有 JSCharts 的图表。我收到消息：

JSChart：为所选图表类型输入错误格式的数据

```
 var x= new Array();

 $.getJSON('test.json', function(data) {

  $.each(data, function(key, val) {

  x.push(val[0].abs);
  x.push(val[1].ord)
});
 });

var myChart = new JSChart('chartcontainer', 'line');
myChart.setDataArray(x);
myChart.draw(); 
```

任何想法如何更改为格式，以便jscharts可以接受？

即使我将它们作为整数传递，它们也不会被接受。Json 看起来像这样：

```
 " cordonnee " : [ { " abs " : "45" } ,
                     { " ord " : "12" }
                   ],

     "autre" : [ { "abs": "68" } ,
                 { " ord " : "13" }
               ] 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:33:09.803

尝试将值解析为整数。

```
$.each(data, function(key, val) {

  x.push(parseInt(val[0].abs));
  x.push(parseInt(val[1].ord));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:49:58.907

您将数据作为一维数组提供，对于折线图，它必须是二维的。

```
$.each(data, function(key, val) {
   var y = new Array();
   y.push(val[0].abs);
   y.push(val[1].ord);
   x.push(y);

}); 
```

有关更多详细信息，请参阅[JSCharts 如何使用折线图](http://www.jscharts.com/how-to-use-line-graphs)

# java - XML响应如何为变量赋值

> ID：10539264
> 
> 赞同：0
> 
> 时间：2012-05-10T17:28:05.403
> 
> 标签：java, xml

我得到了 http 请求的 xml 响应。我将它存储为字符串变量

```
String str = in.readLine(); 
```

内容`str`是：

```
<response>
    <lastUpdate>2012-04-26 21:29:18</lastUpdate>
    <state>tx</state>
    <population>
       <li>
           <timeWindow>DAYS7</timeWindow>
           <confidenceInterval>
              <high>15</high>
              <low>0</low>
           </confidenceInterval>
           <size>0</size>
       </li>
    </population>
</response> 
```

我想将`tx`,分配`DAYS7`给变量。我怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:46:51.947

[来自http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/](http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/)的稍微修改的代码

```
public class ReadXMLFile {

    // Your variables
    static String state;
    static String timeWindow;

    public static void main(String argv[]) {

        try {

            SAXParserFactory factory = SAXParserFactory.newInstance();
            SAXParser saxParser = factory.newSAXParser();

            // Http Response you get
            String httpResponse = "<response><lastUpdate>2012-04-26 21:29:18</lastUpdate><state>tx</state><population><li><timeWindow>DAYS7</timeWindow><confidenceInterval><high>15</high><low>0</low></confidenceInterval><size>0</size></li></population></response>";

            DefaultHandler handler = new DefaultHandler() {

                boolean bstate = false;
                boolean tw = false;

                public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {

                    if (qName.equalsIgnoreCase("STATE")) {
                        bstate = true;
                    }

                    if (qName.equalsIgnoreCase("TIMEWINDOW")) {
                        tw = true;
                    }

                }

                public void characters(char ch[], int start, int length) throws SAXException {

                    if (bstate) {
                        state = new String(ch, start, length);
                        bstate = false;
                    }

                    if (tw) {
                        timeWindow = new String(ch, start, length);
                        tw = false;
                    }
                }

            };

            saxParser.parse(new InputSource(new ByteArrayInputStream(httpResponse.getBytes("utf-8"))), handler);

        } catch (Exception e) {
            e.printStackTrace();
        }

        System.out.println("State is " + state);
        System.out.println("Time windows is " + timeWindow);
    }

} 
```

如果您将其作为某个进程的一部分运行，您可能需要扩展`ReadXMLFile`from `DefaultHandler`。

# c++ - 获取第一个字符串输入，然后忽略其余的

> ID：10539265
> 
> 赞同：0
> 
> 时间：2012-05-10T17:28:08.463
> 
> 标签：c++, string, input, getline

我希望用户输入一个字符串，双精度和长整数，但事情是在第一次之后，该字符串有点被忽略并留空并直接提示输入双精度。

这是我的代码：

```
#include <iostream>
#include <string>

using namespace std;

int main () {
    string name;
    double price;
    long serial;

    cout << "Enter the dvd's name: "; getline(cin, name);
    cout << "Enter the dvd's price (in $): "; cin >> price;
    cout << "Enter the dvd's serial number: "; cin >> serial;

    cout << endl;

    cout << "Enter the dvd's name: "; getline(cin, name);
    cout << "Enter the dvd's price (in $): "; cin >> price;
    cout << "Enter the dvd's serial number: "; cin >> serial;

    return 0;
} 
```

![代码控制台](../Images/1aa3ce0e90f6033d911c7e8b85785b62.png)

正如你第一次看到的那样，我第二次可以输入一个字符串，只是将我直接发送到双精度，即使我忽略了丢失的字符串，然后输入一个双精度然后长，它会将名称打印为空字符串。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:41:50.827

*序列号后面*的空格（回车或空格）没有检索，然后将`getline`其拾取。

**编辑：**正如 johnathon 指出的那样，`cin >> ws`在这种情况下不能正常工作（我确信我以前这样使用过，虽然我找不到一个例子）。

**经测试的解决方案：**相反，在序列号之后添加它会从流中获取回车符（和任何其他空格），以便为下一个 DVD 名称做好准备。

```
string dummy;
getline(cin, dummy); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:49:45.290

在这种情况下，我通常使用 istringstream（如下所示）。但更好的解决方案是使用 cin.ignore

```
#include <sstream>

int main () {
    string name,line;
    double price;
    long serial;

    cout << "Enter the dvd's name: "; getline(cin, line);
    name = line;
    cout << "Enter the dvd's price (in $): ";
    getline(cin,line);
    istringstream(line)>>price;
    cout << "Enter the dvd's serial number: ";
    getline(cin,line);
    istringstream(line)>>serial;
    cout << endl;
    return 0; 
```

}

# android - 不使用 layout_weight 使两个 LinearLayout 各占屏幕的 50%

> ID：10539268
> 
> 赞同：9
> 
> 时间：2012-05-10T17:28:15.173
> 
> 标签：android, android-layout, android-linearlayout

我目前正在做一个横向屏幕的特殊 xml 布局，其中存在 4 个图像，并且 2 个 LinearLayouts 彼此相邻，每个图像 2 个图像。这些 LinearLayouts 我称之为`linearLayout1`和`linearLayout2`.

`linearLayout1`用蓝色矩形标记：

![线性布局1](../Images/efb031fb88245c355f89cfd022cc1af6.png)

`linearLayout2`用蓝色矩形标记：

![线性布局2](../Images/cafaf10562fc6081795c4e8e1f36d917.png)

如您所见，第一个使用了大约 80% 的屏幕，而第二个使用了剩余的屏幕。我当然不想要这个，我想要每个 50%。我不能使用`layout_weight`，因为它已经在 LinearLayouts 本身（两个图像的定位）中使用，并且嵌套权重不利于性能。

我尝试了许多不同的变体，但我根本无法让两个 LinearLayout 各占屏幕的 50%。这是代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/db1_root"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

<LinearLayout
    android:id="@+id/title_container"
    style="@style/TitleBar" >

    <ImageView
        style="@style/TitleBarLogo"
        android:contentDescription="@string/imgViewDesc"
        android:src="@drawable/title_logo" />

    <ImageView
        style="@style/TitleBarSeparator"
        android:contentDescription="@string/imgViewDesc" />

    <TextView style="@style/TitleBarText" />

    <ImageButton
        style="@style/TitleBarAction"
        android:contentDescription="@string/imgViewDesc"
        android:onClick="onClickAbout"
        android:src="@drawable/title_about" />
</LinearLayout>

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/title_container"
    android:layout_above="@+id/mobFoxView" >

    <!-- LEFT COLUMN -->

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/mobFoxView"
        android:layout_alignParentLeft="true"
        android:layout_toLeftOf="@+id/linearLayout2"
        android:background="@color/white"
        android:gravity="center"
        android:orientation="vertical"
        android:weightSum="2" >

        <ImageView
            android:id="@+id/imgNews"
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:contentDescription="@string/imgViewDesc"
            android:onClick="onClickFeature"
            android:src="@drawable/front_news_1" />

        <ImageView
            android:id="@+id/imgReleases"
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:contentDescription="@string/imgViewDesc"
            android:onClick="onClickFeature"
            android:src="@drawable/front_releases_1" />
    </LinearLayout>

    <!-- RIGHT COLUMN -->

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_above="@+id/mobFoxView"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@id/linearLayout1"
        android:background="@color/white"
        android:gravity="center"
        android:orientation="vertical"
        android:weightSum="2" >

        <ImageView
            android:id="@+id/imgArtists"
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:contentDescription="@string/imgViewDesc"
            android:onClick="onClickFeature"
            android:src="@drawable/front_artists_1" />

        <ImageView
            android:id="@+id/imgLabels"
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:contentDescription="@string/imgViewDesc"
            android:onClick="onClickFeature"
            android:src="@drawable/front_labels_1" />
    </LinearLayout>
</RelativeLayout>

<com.mobfox.sdk.MobFoxView
    android:id="@+id/mobFoxView"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:layout_alignParentBottom="true"
    mode="test"
    publisherId="@string/mobFoxID" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-10T17:45:14.123

好吧，我在这里看到了两个选项。

1.  拧紧该 LINT 警告并使用嵌套权重。手机速度很快，而且它会产生几毫秒的差异，因为你只膨胀一次布局（大部分时间）。嵌套布局只会对性能不利，因为充气机需要进行更多通道来测量布局。

2.  `LinearLayout`用 a交换你的顶部`RelativeLayout`并将两个孩子与中心的不可见对齐，`View`如下所示：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/top"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
      android:id="@+id/center_point"
      android:layout_width="0dp"
      android:layout_height="0dp"
      android:layout_centerInParent="true"/>

    <LinearLayout
      android:id="@+id/left_layout"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:layout_alignParentLeft="true"
      android:layout_alignRight="@+id/center_point">
    </LinearLayout>

    <LinearLayout
      android:id="@+id/right_layout"
      android:orientation="horizontal" //default
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:layout_alignParentRight="true"
      android:layout_alignLeft="@+id/center_point">
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-07-20T07:09:13.697

您可以为布局设置“重量”，如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent" >
    <LinearLayout android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1">
    </LinearLayout>
    <LinearLayout android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1">
    </LinearLayout> 
```

所以每个线性输出占据屏幕的 50%。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T17:32:44.267

如果您试图避免将某个功能用于其预期目的，您可能应该考虑您的方法是否不理想......您似乎正在尝试将项目排列成行和列。尝试使用[`TableLayout`](http://developer.android.com/reference/android/widget/TableLayout.html).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T17:36:13.390

如果没有 layout_weight，将这两个线性布局都放入父线性布局中

```
<LinearLayout orientation:horizontal>
           <LinearLayout Child 1 />
           <LinearLayout Child 2 />
</LinearLayout> 
```

使用 layout_gravity 将它们居中，如果这些线性布局的内容大小相同，则它们应该大小相同

如果没有，那么您仍然可能有问题

并且可能需要使用代码调整大小

# ruby - 如何制作红宝石字符串“\(”？

> ID：10539279
> 
> 赞同：1
> 
> 时间：2012-05-10T17:29:06.230
> 
> 标签：ruby, escaping

我需要一根红宝石绳子，`"\("`并在我身上发现了逃跑的把戏。

`"\("`给我`"("` `"\\("`给我`"\\("`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T17:34:13.080

`"\\("`是正确的，问题是[`inspect`](http://ruby-doc.org/core-1.9.3/String.html#method-i-inspect)（这是IRB用来显示最后一次调用的返回值）的结果与实际内容不一样，因为转义：

```
puts "\\(".inspect  #prints: "\\("
puts "\\("          #prints: \( 
```

如果您不需要插值，只需使用单引号：

```
puts '\('  #prints: \( 
```

# windows - 批处理：调用目录中最近的批处理文件

> ID：10539280
> 
> 赞同：0
> 
> 时间：2012-05-10T17:29:08.213
> 
> 标签：windows, batch-file, directory

我看到了几个类似的问题，但可以拼凑出我想要的东西。这很接近，因为它给了我最近的批处理文件的名称：

```
for /f "delims=" %%x in ('dir /od /b c:\maps\*.bat') do set recent=%%x
echo %recent% 
```

但是包含此文件的批处理文件位于 c:\start 中，因此我需要取回完整的路径名，而不仅仅是文件名。然后我可以使用“调用”来运行批处理文件。

（顺便说一句，我在 xp 上这样做。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:04:38.197

如果你使用

```
 for /f "delims=" %%x in ('dir /od /b c:\maps\*.bat') do set recent=%%x 
```

您肯定知道文件的完整路径将是`c:\maps\%%x`

* * *

或者，如果您`dir /s`改用，它将遍历所有现有的子目录

```
for /f "delims=" %%x in ('dir /od /b /s c:\maps\*.bat') do set recent=%%x 
```

但是由于返回完整路径的有趣副作用，那就是`%%x`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:04:33.050

尝试使用：

```
for /f "delims=" %%x in ('dir /od /b /s c:\maps\*.bat') do set recent=%%x
echo %recent% 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T19:01:05.937

这对我来说比 /s 效果更好，它的性能很差：

```
for /f "delims=" %%x in ('dir /od /b c:\maps\*.bat') do set recent=%%~fx 
```

# c# - 运算符“>=”不能应用于“System.DateTime”和“int”类型的操作数

> ID：10539281
> 
> 赞同：-2
> 
> 时间：2012-05-10T17:29:11.070
> 
> 标签：c#, datetime, casting

如何解决这个问题

```
DateTime now = DateTime.Today;
DateTime s = (DateTime)dobcalender.SelectedDate;

int years = now.Year - s.Year;
if (now.Month < s.Month || (now.Month == s.Month && now.Day < s.Day))
    --years;
tb_age.Text = years.ToString();

if (_data.Age >= 60)
{
    _data.Citizen = "Senior";
}
else
{
    _data.Citizen = "Junior";
} 
```

现在的问题是我已经声明_data.Age 是int32。

我必须从出生日期计算年龄，还要检查这个人是老年人还是少年这两个值都是从年龄计算的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:36:51.580

_data.Age 被声明为`DateTime`变量。将此更改为 an`int`以解决此错误。

# git - Git无法正常工作？

> ID：10539285
> 
> 赞同：0
> 
> 时间：2012-05-10T17:29:19.807
> 
> 标签：git

我的 git 存储库有问题，我不确定问题是我没有正确使用它还是某种错误......

我正在使用 git 1.7.9。在cygwin里面。

我的问题是我看不到文件（任何文件）的日志历史记录。假设我想查看名为 index.php 的文件的历史记录。我输入这个：

> git log -p index.php

但是没有回应。Git刚刚关闭。当我尝试这个时：

> 混帐责备 index.php

该文件中的每一行都得到“00000000（尚未提交 2012-05-10 19:27:07 +0200 1）”。但是该文件之前已经提交了很多次。我做错了什么还是我的 git 存储库损坏了？

欢迎任何想法:) 谢谢！

编辑：

以下是 status 和 ls-files 命令的输出：

```
$ git status
# On branch master
nothing to commit (working directory clean)

xx77abs@Ferdo ~/gaudeamus_ipad/HTML
$ git ls-files 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T17:49:25.723

所以回答我自己的问题......首先我要感谢 larsks，因为他要求 git ls-files 输出让我知道出了什么问题......

我的 git 存储库位于 gaudeamus_ipad 文件夹中。在该文件夹中，我有一个名为 HTML 的文件夹。最初它被称为 html，但在某个地方我将它重命名为 HTML。在 HTML 文件夹中执行“git ls-files”后，我什么也没有。然后我向上一个文件夹并再次执行“git ls-files”。这是输出的一部分：

```
html/index.php 
```

如您所见，此处的 HTML 文件夹拼写为小写。我还注意到，在 cygwin 中，我可以使用“cd HTML”和“cd html”命令输入文件夹 HTML。但是当我使用“cd HTML”输入它时，git 不能正常工作。当我使用“cd html”输入它时，git 正在正常工作。我想这是某种 cygwin 错误（虽然我不确定这是否可以归类为错误）......

无论如何，这就是我解决问题的方法。谢谢大家！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:38:22.787

如果您的存储库不是很大，您可以尝试删除并重新克隆到其他位置。这似乎解决了我遇到的大多数问题。

# jquery - 检查cookie并在关闭jquery对话框模式后设置它

> ID：10539286
> 
> 赞同：1
> 
> 时间：2012-05-10T17:29:26.780
> 
> 标签：jquery, cookies, modal-dialog

这是我第一次发帖，但一段时间以来我一直在搜索和使用这个网站作为一个很好的参考工具。我的 jquery 知识几乎没有，我一直在为一个交给我的项目快速学习。基本上我希望代码检查 cookie，如果 cookie 在那里不显示 jquery 模式。如果它不存在，则 jquery 模式将显示，然后在用户关闭它后设置 cookie。

到目前为止，这是我尝试拼凑的内容...

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
<script type="text/javascript" src="/storage/jquery-validation/jquery.cookie.js"></script>
<script>
 $(function() {
 var seen = $.cookie('modal');
 if (seen == null) {
// a workaround for a flaw in the demo system
(http://dev.jqueryui.com/ticket/4375), ignore!
$( "#dialog:ui-dialog" ).dialog( "destroy" );

$( "#dialog-confirm" ).dialog({
      resizable: false,
      height:400,
      width:600,
      modal: true,
  buttons: {
                I agree": function() {
                $( this ).dialog( "close" );
      $.cookie('modal', 'true', { path: '/', expires: 365 });
            },
        },
    });
     }
});
</script> 
```

我希望这有点道理。我感谢任何人可以提供的任何帮助。

# entity-framework - 为什么在 POCO 上使用带有 EF 存储库模式的基类？

> ID：10539288
> 
> 赞同：2
> 
> 时间：2012-05-10T17:29:39.143
> 
> 标签：entity-framework, poco

我见过许多 EF POCO 示例，其中每个 POCO 类都继承了一个基 Entity 类或实现了一个 IEntity 接口。

我有点理解为什么要使用它，但我看不出它在所有情况下都有效，除非我遗漏了一些东西。

Entity 基类可能如下所示：

```
public class Entity
{
    #region Primitive Properties
    [Key]
    public int Id { get; set; }
    public DateTime DateCreated { get; set; }
    public DateTime DateModified { get; set; }
    [Timestamp]
    public byte[] rowversion { get; set; }
    #endregion
} 
```

...具体的 POCO 类看起来像这样：

```
public class BlogCategory : Entity
{
    #region Properties

    [Required(ErrorMessage = "Category Name is required.")]
    public string CategoryName { get; set; }
    public virtual ICollection<Blog> BlogList { get; set; }

    #endregion
} 
```

当我的所有类都包含一个主键属性时这很好，但是当我有一个多对多关系时会发生什么？通常在多对多关系中，实体具有表示该实体主键的双重属性。

如：

```
public class ClaimQuestionAnswer : Entity <-- this will not work, will it?
{
    [Key]
    public int QuestionId { get; set; }
    [Key]
    public int AnswerId { get; set; }
    public string Answer { get; set; }
    public byte[] rowversion { get; set; }
} 
```

这个特定的 POCO 不会继承基类吗？

任何澄清表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:05:06.760

您可能只看到了不使用任何具有复合键的实体类的示例。否则他们会遇到你现在面临的同样问题。

多对多关系不是最好的例子，因为在真正的多对多关系中，连接表在模型中没有对应的实体。但是您可能出于任何其他原因在实体中拥有复合键，或者您可能拥有其键只需要具有另一种类型（`string`、、`long`或`Guid`其他）的实体。

在这种情况下，您不能使用您的基类，因为键不再是所有实体的公共属性。您可以将密钥移出基类并将其放入不同的派生类中 - 仅`DateCreated`，`DateModified`并且`rowversion`是通用属性。或者，您可以为正在使用的不同密钥类型创建多个基类。

这完全取决于您希望在所有实体中支持哪些公共属性。

# php - DynamoDB put_item() 记录时间 > 6 小时？

> ID：10539289
> 
> 赞同：1
> 
> 时间：2012-05-10T17:29:58.963
> 
> 标签：php, amazon-dynamodb

我运行了以下代码，它表明执行正确。这是本[教程](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/LoadData_PHP.html)的结果，我将其缩短并重新连接到我的项目中。运行 AWS 控制台后，该表显示该表的项目*为零*。我明天回来，它包含一些时间。环顾四周，我发现控制台平均每六个小时左右更新一次。有没有其他方法可以更直接地检查我的数据是否已成功插入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:09:34.543

## 更新

AWS 团队刚刚宣布了[使用 AWS 管理控制台探索您的 DynamoDB 表](http://aws.typepad.com/aws/2012/05/explore-your-dynamodb-tables-using-the-aws-management-console.html)的选项：

> 您现在可以从 AWS 管理控制台中查看和修改 DynamoDB 表的内容。通过添加此新功能，您可以边做边学——无需编写任何代码即可试用许多 DynamoDB 功能。您可以通过一个非常干净和简单的用户界面创建一个表格、添加一些项目并在表格中查看它们。

这显然是我在下面的初始答案中引用的富客户端选项的一个非常方便的补充，请查看帖子本身以获得简短的插图*之旅，以帮助您入门*。

* * *

## 初步答案

AWS Toolkits for [Eclipse](http://aws.amazon.com/eclipse/)和[Visual Studio](http://aws.amazon.com/visualstudio/)都允许您直接从本地开发环境创建表、插入和编辑数据、启动表扫描等（请参阅介绍性文章[AWS Toolkits for Eclipse 和 Visual Studio 现在支持 DynamoDB](http://aws.typepad.com/aws/2012/01/aws-toolkits-for-eclipse-and-visual-studio-now-support-dynamodb.html)）。

*AWS Toolkit for Visual Studio*似乎为 AWS 的所有事物提供了一个特别快速和全面的 UI，但是如果您碰巧运行其中一个 IDE，这两个工具包都可以有效地取代AWS管理[控制台以供日常使用。](http://aws.amazon.com/console/)

因此，我刚刚添加了一个表格和一些项目，它们会立即显示出来，并且同样可以按预期在您的指尖扫描（以类似的方式与两个 takeits 一起工作）。

因此，根据您的用例，这可能就是您所需要的。

# python - Python：无法使用 win32gui.FindWindowEx() 找到句柄

> ID：10539290
> 
> 赞同：0
> 
> 时间：2012-05-10T17:30:01.207
> 
> 标签：python, win32gui

我正在尝试在对话框中获取“是”按钮的句柄，因此我可以发送消息以单击它。

我得到对话框，然后我尝试找到按钮，但我总是得到 0 回来。

```
import win32gui

hwnd = win32gui.FindWindow("#32770", "Programs and Features")
# got back the correct handle to the dialog

win32gui.SetForegroundWindow(hwnd)

btnhdl = win32gui.FindWindowEx(hwnd, 0, "Button", "&Yes")
# returns 0 
```

按钮在那里，班级和标题似乎没问题。我通过这个验证了它：

```
def printClasses(childHwnd, lparam):
    if win32gui.GetWindowText(childHwnd) == "&Yes":
        print win32gui.GetClassName(childHwnd), win32gui.GetWindowText(childHwnd)
    return 1

win32gui.EnumChildWindows(hwnd, printClasses, None)
# output: Button &Yes 
```

看起来一切都应该没问题，但为什么它不返回句柄`FindWindowEx`？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T20:17:22.097

[来自OP中的评论]也许按钮是孩子的孩子，即孙子？IIRC`EnumChildWindow`递归枚举，而`FindWindowEx`没有。

# php - 基本 PHP 继承

> ID：10539293
> 
> 赞同：3
> 
> 时间：2012-05-10T17:30:13.813
> 
> 标签：php, oop

我是 OOP 的新手，我有一个非常基本的问题，但我无法以简洁的方式解释它，因此很难找到答案。

我有一个支持信用卡处理的应用程序，我想抽象处理能力，以便可以添加其他提供程序（linkpoint、authorize.net 等）。我想我想做的是创建一个看起来像这样的简单类：

```
class credit {

    function __construct($provider){
        // load the credit payment class of $provider
    }

} 
```

然后我会让每个提供者扩展这个类，例如

```
class linkpoint extends credit { } 
```

但我真的想使用信用等级更像是一个界面，有点。我不想要一个信用对象，我想做类似的事情：

```
$credit = new credit('linkpoint'); 
```

然后我希望 $credit 成为链接点类的一个实例。或者至少，我希望所有方法都执行链接点类中定义的代码。

解决这个问题的最佳方法是什么？或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T17:34:57.917

这称为“[**工厂模式**](http://en.wikipedia.org/wiki/Factory_method_pattern)”（另请参阅[设计模式](http://en.wikipedia.org/wiki/Software_design_pattern)）

你可以这样处理

```
class Credit
{
  public function __construct($factory)
  {
    $object = null;

    switch($factory) {
      case 'linkpoint':
        $object = new linkpoint();
        break;
      case 'xy':
        //...
    }
    return $object;
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T17:34:19.087

我不确定我是否做对了，但是当你想 $credit 作为链接点的一个实例时，你只需要做

```
$linkPointCredit = new linkpoint(); 
```

顺便提一句。您的班级名称应始终以大写字母开头。

**更新：**

那么你确实可以使用工厂模式。

```
class Credit
{
    private $provider;

    public function __construct($provider)
    {
        if(class_exists($provider) {
            $this->provider = new $provider();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T17:36:08.167

您所描述的听起来像是[工厂设计模式](http://en.wikipedia.org/wiki/Factory_method_pattern)。除了不使用构造函数之外，您将在基`Credit`类上有一个类（静态）方法，该方法返回您的子类之一的实例，具体取决于传递的字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T17:38:47.357

我会推荐“依赖注入”。

```
class credit {

    function __construct(Provider $provider)
    {
        $this->setProvider($provider);
    }

}

class Provider {}
class Linkpoint extends Provider {}
class crossave extends Provider {}
class Debitcentral extends Provider {} 
```

然后你可以像这样使用它们：

```
$linkpoint = new Linkpoint();
$credit = new Credit($linkpoint);

$crossave = new Crossave();
$credit = new Credit($crossave);

$debitcentral = new Debitcentral();
$credit = new Credit($debitcentral);
// etc... 
```

# ide - D 具有自动格式化功能的 IDE

> ID：10539296
> 
> 赞同：2
> 
> 时间：2012-05-10T17:30:21.770
> 
> 标签：ide, d, autoformatting

我刚开始学习 D。有人知道具有自动格式化功能的 D IDE 吗？Eclipse 的 DDT 似乎除了语法高亮之外没有任何其他功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:36:33.783

我相信，目前 MonoDevelop + Mono-D 插件没有竞争对手。链接： http: [//mono-d.alexanderbothe.com/](http://mono-d.alexanderbothe.com/)。我多年来一直使用 Code::Blocks，但现在我只使用 MonoDevelop。

如果您更喜欢 Eclipse - 试试 Eclipse DDT 项目：[http ://code.google.com/a/eclipselabs.org/p/ddt/](http://code.google.com/a/eclipselabs.org/p/ddt/)

如果您更喜欢仅 Windows 的 IDE，那么 Visual D 可能是最佳选择 - [http://www.dsource.org/projects/visuald](http://www.dsource.org/projects/visuald)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T02:22:30.827

你应该试试 Code::Blocks。

[http://www.codeblocks.org/](http://www.codeblocks.org/)

它是跨平台的，并提供了良好的（如果不是完美的）D 集成。它可以轻松配置为使用 DMD、GDC 或 LDC 进行编译。

# python - 使用 Python 在 Windows Active Directory 中获取组的名称

> ID：10539297
> 
> 赞同：0
> 
> 时间：2012-05-10T17:30:34.650
> 
> 标签：python, active-directory, python-2.7

我正在使用这个库与 Python 中的 Active Directory 进行交互：

[http://timgolden.me.uk/python/ad_cookbook.html](http://timgolden.me.uk/python/ad_cookbook.html)

我正在尝试访问这样的组名：

```
groups = []
for group in active_directory.search(objectClass='group'):
    groups.append(str(group.cn)) 
```

我的第一个问题是`group.cn`获取组的显示名称而不是实际的对象名称。如何获取对象名称？

我的第二个问题是运行此代码会占用大量内存。当 Active Directory 中有数千个组时，我的程序将使用数百兆甚至一两个 gig 的内存。当有组嵌套在其他组中时尤其如此。在我获得所有组名之后，我仍然使用所有这些内存有什么原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:14:49.863

这就是我最终做的事情：

```
 results = None
    try:    
        connection = ldap.open(str(self.hostnameLineEdit.text()))
        connection.simple_bind_s(str(self.usernameLineEdit.text()), str(self.passwordLineEdit.text()))
        userDNSDomain = os.environ['USERDNSDOMAIN']
        userDNSDomain = userDNSDomain.split('.')
        base = ""
        for dc in userDNSDomain:
            base += "dc=" + dc + ","
        base = base[:-1]
        #print base
        resultID = connection.search(base,ldap.SCOPE_SUBTREE,'(objectClass=group)')
        resultTypes, results = connection.result(resultID, 0)
    except ldap.LDAPError, e:
        self.messageBox("LDAP Error: " + str(e))
    if results != None:
        while results[0][0] != None:
            #print results[0][1]['cn']
            self.groupsListWidget.addItem(QString(results[0][1]['cn'][0]))
            resultTypes, results = connection.result(resultID, 0) 
```

# javascript - 在 div 中获取链接文本

> ID：10539299
> 
> 赞同：2
> 
> 时间：2012-05-10T17:30:41.827
> 
> 标签：javascript, html

我目前有一个我想从中提取文本的 href。不幸的是，我无权访问代码，我必须使用的有限代码如下：

```
<div id="myDiv">
  <h1 class="myClass">
    <a href="link">TEXT</a>
  </h1>
</div> 
```

我更喜欢使用 JavaScript 来获取这些信息。引用“文本”的最佳方式是什么？我尝试了几种使用`getElementById`and的方法`getElementsByClassName`，但每种方法都被证明是不成功的。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T17:33:08.337

```
var text = document.getElementById('myDiv')
                   .getElementsByTagName('a')[0].innerHTML;
alert(text);​ // TEXT 
```

[**现场演示**](http://jsfiddle.net/gdoron/LtUr3/)

如果你可以使用 jQuery...：

```
var text = $('#myDiv .myClass a').text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:32:23.580

可以使用 jQuery 吗？

这将是

```
$(".myClass a").text(); 
```

我不确定纯javascript。这就是我问的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T17:32:41.847

```
var links = document.getElementsByTagName('a');

for (var i = 0; i < links.length; i++)
    console.log('Link ' + i + ' text: ' + links[i].innerHTML); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T17:34:09.960

假设您无法修改 HTML：

[http://jsfiddle.net/9rXaS/](http://jsfiddle.net/9rXaS/)

```
document.getElementsByClassName('myClass')[0].childNodes[1].innerHTML; 
```

# javascript - 观察表单上的字段并报告更改

> ID：10539301
> 
> 赞同：0
> 
> 时间：2012-05-10T17:30:50.647
> 
> 标签：javascript, observer-pattern

观察表单上的字段并报告更改

我现在编写了一个简单的实用程序（观察者模式的一部分）来观察表单每个字段中所做的更改。

```
var idInt = setInterval(function() {
  // each input is a document.getElementById(id)
  var len = inputList.lenght;

  while(len--) {
    //send value to somewhere
    someWhere(ininputList[len].value);
  }
}, 40) 
```

但我有这样的问题：

1.  用鼠标更改值时（剪切/粘贴）
2.  当以编程方式更改值时

`someWhere(ininputList[len].value);`即使我尝试将事件（onchange、oncut、onpaste、oninput、onkeyup）添加到元素以避免 setIntervalloop 但当我尝试以编程方式更改值时不会触发这些事件，该值也不会刷新。

这将是观察元素值变化的更好方法（输入 [按钮 | 文本 | 密码 | url | 电子邮件]，单选，复选框，选择）考虑到程序化更改监视和通过界面用户进行的更改，

注意：我正在寻找原始解决方案，没有 jquery、原型、js 类或任何框架，只有原生 javascript

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:46:47.330

我不确定是什么问题，因为下面的代码有效

```
setInterval(function() {
  var inputList = document.getElementsByTagName('input')
  var len = inputList.length;

  while(len--) {
    console.log(inputList[len].value);
  }
}, 4000)​ 
```

它每 4 秒打印一次更改的值，您可以在此处查看它的运行情况[http://jsfiddle.net/QKqzT/](http://jsfiddle.net/QKqzT/)

# c++ - 测试类型是否为（智能）指针的通用方法

> ID：10539305
> 
> 赞同：10
> 
> 时间：2012-05-10T17:31:15.810
> 
> 标签：c++, templates, shared-ptr

在我的代码中，我需要测试给模板的类型是否是指针——它是否智能。根据 boost 的说法，没有可靠和通用的方法来做到这一点（见[这里](http://www.boost.org/doc/libs/1_49_0/libs/type_traits/doc/html/boost_typetraits/reference/is_pointer.html)）——或者有吗？

到目前为止，我检查了以下内容：

*   - 答：可以`T`转换为`void*`？
*   B：`T`有`get()`方法吗？
*   C:`T`有一个类型叫`element_type`?
*   D：是否`get()`返回一个`element_type*`？

如果 (A || B && C && D)，那么我的结论是我的类型必须是某种指针。

这是模板：

```
template <typename T>
class is_pointer_type
{
    typedef struct { char array[1]; } yes;
    typedef struct { char array[2]; } no;

    template <typename C> static yes test_g(decltype(&C::get));
    template <typename C> static no  test_g(...);

    template <typename C> static yes test_e(typename C::element_type*);
    template <typename C> static no  test_e(...);

    enum {
        has_get          = sizeof(test_g<T>(0)) == sizeof(yes),
        has_element_type = sizeof(test_e<T>(0)) == sizeof(yes)
    };

    template <typename Q, bool OK = false>
    struct get { struct type {}; };

    template <typename Q>
    struct get<Q, true>
    {
        typedef decltype(((Q*)nullptr)->get()) type;
    };

    template <typename Q, bool OK = false>
    struct ptr { struct type {}; };

    template <typename Q>
    struct ptr<Q, true>
    {
        typedef typename Q::element_type* type;
    };

public:
    enum {
        types_ok = std::is_same<
                           typename get<T, has_get>::type,
                           typename ptr<T, has_element_type>::type
                   >::value,
        value    = std::is_convertible<T, void*>::value || types_ok
    };
}; 
```

到目前为止，它似乎工作正常。但是这个推理有问题吗？我应该为不愉快的意外做好准备吗？`const`/呢`volatile`？

## 更新（动机）：

在评论中你问我的动机，他们是对的，我欠你一个。用例是一个 Lua - C++ 绑定库：当使用 向 Lua 公开一个类实例时，我需要以和的任意组合`template <typename T> push_value(T value)`推断底层类型。我需要知道底层类是否已经在活页夹中注册。`U``T = U const/volatile/*/&``T = some_pointer<U>``U`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T19:03:20.543

很容易检查一个类型是否是一个指针，无论是使用 boost 还是定义一个具有专门化的自定义模板，如

```
template <typename C> static no test_pointer(C);
template <typename C> static yes test_pointer(C*); 
```

但是，如果您更喜欢 void* 解决方案，您可以坚持使用它。

要检查智能指针，我建议改为检查适当的运算符。我认为只有同时定义了 operator* 和 operator-> 的类型才能被视为智能指针。所以你应该检查

```
template <typename C> static yes test_deref(decltype(&C::operator*));
template <typename C> static no test_deref(...);
template <typename C> static yes test_arrow(decltype(&C::operator->));
template <typename C> static no test_arrow(...); 
```

并要求两个结果都是“是”。因此，最终公式可以计算为“普通指针||（有运算符* && 有运算符->）”。

但是，它只是智能指针的解决方案。如果您还想将智能指针（其他包装器、集合等）以外的类型传递给 Lua，那就完全不同了，我不敢为此提出解决方案。

# mysql - cpmysqladmin 出现未知错误

> ID：10539307
> 
> 赞同：0
> 
> 时间：2012-05-10T17:31:21.410
> 
> 标签：mysql, centos, cpanel, mysql-management, whm

我有一个专用服务器，我在服务器上安装了 WHM 我在 WHM 上创建了经销商帐户，我试图使用 cpanel 使用经销商帐户创建数据库，但我收到奇怪的错误消息`cpmysqladmin had an unknown error`，当我尝试为 mysql 创建用户时我得到了同样的错误信息。有人知道我该如何解决这个问题吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:19:39.587

我昨天遇到了这个问题......我看到你的帖子并叹了口气，因为我没有看到任何回应。我联系了一位在 cPanel 工作的朋友，他帮助我解决了这个问题。

第一的！在我遇到版本不匹配的问题之后，我更新 mysql 时出现了问题。我更新了它以匹配所有版本号。

要确认这是问题所在，请执行以下操作：

```
# tail /var/lib/mysql/'hostname'.err 
```

*（将主机名替换为您的服务器名。）*

如果你看到：

```
**[ERROR] Can't open and lock privilege tables: Table 'mysql.servers' doesn't exist**
**[ERROR] Can't open and lock privilege tables: Table 'mysql.servers' doesn't exist**
**[ERROR] Can't open and lock privilege tables: Table 'mysql.servers' doesn't exist** 
```

你在做生意。

最终发生的是一张表格在更新中丢失了。“mysql.servers”

选项是手动重新创建它*（别担心，这个表在 cPanel 服务器上通常是空白的）*

或者

我采取的方法......

```
# mysql_upgrade --user=root --password=mysqlpasswordhere --verbose 
```

该命令的旧版本是：

```
# mysql_fix_privilege_tables --user=root --password=mysqlpasswordhere --verbose 
```

（这个命令对我不起作用，我不得不使用 mysql_upgrade 路由）

我希望这有帮助！享受！

PS：空白表是这样写的：

```
# // Column // Type //  Collation // Attributes // Null //

1 // Server_name // char(64) // utf8_general_ci // No //

2 // Host // char(64) // utf8_general_ci // No //   

3 // Db // char(64) // utf8_general_ci // No //   

4 // Username // char(64) // utf8_general_ci // No //

5 // Password // char(64) // utf8_general_ci // No //

6 // Port // int(4) // _________________________ // No // 0(DefaultValue)   

7 // Socket // char(64) // utf8_general_ci // No //   

8 // Wrapper // char(64) // utf8_general_ci // No //     

9 // Owner // char(64) //   utf8_general_ci //  No // 
```

# powershell - 保留x个目录并删除所有其他目录，每次都需要排除一个目录及其内容

> ID：10539311
> 
> 赞同：6
> 
> 时间：2012-05-10T17:32:02.800
> 
> 标签：powershell

我正在尝试删除除 10 个最近的目录之外的所有目录，始终不包括 java 目录。不幸的是，它也删除了“java”目录的最后 10 个内容之外的所有内容。

我一直在尝试从以下链接修改解决方案，以使我的情况正常工作： [保留 x 个文件并删除所有其他文件 - 第二部分](https://stackoverflow.com/questions/8914763/keep-x-number-of-files-and-delete-all-others-part-two)

目录结构如下：

```
dev_app_backup\java
dev_app_backup\2012-05-09_01-00-05_commnXsl  (contains Xsl files)
dev_app_backup\2012-05-09_01-00-05_published  (contains zip files)
dev_app_backup\various-dates-time_commonXsl
dev_app_backup\various-dates-time_published 
```

我的计划是运行第二个脚本来清除 java 子目录。

```
#----- define folder where files are located ----#
$TargetFolder = "\\test\TestShare\dev_app_backup\*"

#----- number of directories to keep ----#
$keep = 10

#----- get zip files based on lastwrite filter ---#
$files = Get-Childitem $TargetFolder -recurse -exclude java

if ($files.Count -gt $keep) 
{
$files | Sort-Object -property $_.LastWriteTime | Select-Object -First ($files.Count - $keep) | Remove-Item -Force
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T18:25:22.847

好的，这就是我想出的脚本，对不起，这是我的第一个powershell脚本......

```
$TargetFolder = "\test\TestShare\dev_app_backup*"
$keep = 10
$folders = Get-Childitem $TargetFolder -exclude java*
echo "folders"
echo $folders
echo "endfolders"
echo $folders.Count
echo $folders | Sort-Object -property $_.LastWriteTime | Select-Object -First ($folders.Count - $keep)
foreach ($folder in $folders | Sort-Object -property $_.LastWriteTime | Select-Object -First ($folders.Count - $keep))
{
echo $folder
$files = Get-Childitem $folder -recurse
echo $files
Remove-Item -Force $folder\$files
Remove-Item -Force $folder
} 
```

回声只是为了帮助我调试，随时删除它们。

# authentication - 浏览器内客户端 API 的身份验证？

> ID：10539312
> 
> 赞同：4
> 
> 时间：2012-05-10T17:32:04.890
> 
> 标签：authentication, client

我在考虑 Google Static Maps API，它将您限制为 1000 个静态地图，如果您注册一个帐户则更多。当客户端上的所有内容都是公开的时，他们如何跟踪帐户等？

对于大多数服务器到服务器的 API，我都获得了 access_token/key/etc。我可以将其传递给服务以证明我确实是我，但在客户端上任何此类 access_token/key/etc。将立即成为公众知识。

一般来说，客户端库（FB SDK、Stripe、Google 等）使用什么策略来执行身份验证，以及它们如何绕过客户端上的所有内容都是公开的这一事实？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:54:49.427

您可以将 API 密钥配置为[按主机](https://developers.google.com/console/help/#whitelistingbyhost)列入白名单，这会告诉 Google 地图只允许从发送与您的白名单匹配的引荐来源网址的站点使用 API 密钥。

如果其他站点使用您的 API 密钥，他们将在加载时收到以下错误消息：

> 此网站需要不同的 Google Maps API 密钥。可以在[http://code.google.com/apis/maps/documentation/javascript/v2/introduction.html#Obtaining_Key](http://code.google.com/apis/maps/documentation/javascript/v2/introduction.html#Obtaining_Key)生成新密钥。

您可以使用 FireFox 的[RefControl 扩展](https://addons.mozilla.org/en-US/firefox/addon/refcontrol/)来验证这一点：

*   使用扩展，覆盖你的推荐人，比如说，[http://www.microsoft.com/](http://www.microsoft.com/)
*   访问非谷歌托管的谷歌地图示例网站 - 例如，[http ://econym.org.uk/gmap/example_controlpos.htm](http://econym.org.uk/gmap/example_controlpos.htm)
*   你应该得到错误。

这有效，因为：

*   几乎所有的网络浏览器都会发送一个referrer [（即链接到它的资源的URI）](http://en.wikipedia.org/wiki/HTTP_referer)作为请求的一部分。
*   对于窃取您的 API 密钥的人（因为正如您所说，它是一个公开可用的字符串），他们需要告诉所有用户覆盖他们的引荐来源网址以匹配他们从中窃取它的网站（这显然不切实际）。

请注意，Google 似乎允许不包含引荐来源网址的请求 - 我猜配置为排除此信息的浏览器数量很少，因此不值得关注。

# c# - 即使在 Tcpclient.NoDelay = true 之后，socket.send 也会将数据包附加在一起；

> ID：10539314
> 
> 赞同：3
> 
> 时间：2012-05-10T17:32:05.593
> 
> 标签：c#, sockets, tcp

这开始让我很沮丧，因为无论我做什么，我的数据包都会被挤在一起，这使得必须在另一端区分它们很烦人（对象很容易，可变字符串可能会很痛苦）。有没有办法避免这种情况？

这是我正在使用的一些粗略代码（是的，初始化发生在这里，这是粗略的测试代码，对糟糕的编程约定感到抱歉）

```
 sender.Connect("localhost", 8523);
    sender.Client.SendTimeout = 1000;
    sender.NoDelay = true;
    byte[] buffer = ASCIIEncoding.ASCII.GetBytes(message);
    sender.Client.Send(buffer);
    buffer = ASCIIEncoding.ASCII.GetBytes("DISCONNECT");
    sender.Client.Send(buffer);
    sender.Client.Close(); 
```

正如您所看到的，两个发送一个接一个地发生，并且套接字决定将它们一起发送是最佳的。太好了，但我不想那样。因此在另一端它最终成为

```
 helloDISCONNECT 
```

我需要将两者分开接收，因为它们会自动加载到阻塞队列中，我不想处理对象大小和字符串解析。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T20:58:27.630

TCP 向接收方提供一个字节流。

在流关闭之前，TCP 套接字的每次读取都可以返回 1 和您给它的缓冲区大小之间。你应该相应地编码。

TCP 不知道也不关心程序的消息帧概念。它并不关心您发送 3 条“消息”以及单独的发送调用。一个有效的 TCP 实现可以为从流中读取的函数的每次调用返回一个字节，或者它可以在向您返回字节之前尽可能多地缓冲。你应该相应地编码。

如果您想在通过 TCP 发送时处理消息，那么您必须应用自己的框架，并且您必须在阅读消息时自己处理该框架。这通常意味着已知大小的长度前缀或消息终止符。

[我在这里](http://www.serverframework.com/asynchronousevents/2010/10/message-framing-a-length-prefixed-packet-echo-server.html)更详细地处理了这个问题，尽管代码是 C++ 中的，但概念仍然适用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:41:32.970

看来您期望：

```
sender.NoDelay = true; 
```

基本上意味着：

```
sender.Client.Send(buffer); 
```

...成为阻塞调用，直到位从您的 NIC 上移开。不幸的是，这种情况并非如此。`NoDelay`只告诉网络层不要等待，但是您正在使用的底层调用`Send`具有一些异步行为，并且您的程序线程运行得足够快，以至于在您实质上附加第二个字符串之前网络层的线程不会唤醒。

阅读更多关于`NoDelay` [这里](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.nodelay.aspx)。阅读那里的注释以了解详细信息。

一些相关的引用：

> 获取或设置一个布尔值，该值指定流 Socket 是否使用 Nagle 算法。
> 
> Nagle 算法旨在通过使套接字缓冲小数据包，然后在某些情况下将它们组合在一个数据包中发送来减少网络流量

此外，即使您可以保证这些位离开，客户端的网络层也可能会在您的客户端代码甚至有机会看到有两个“数据包”之前缓冲它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T15:50:16.957

此外`sender.NoDelay = true`，最终对我有用的技巧`sender.Client.Send(...)`是以`Thread.Sleep(50)`.

实际数字没有研究，它只是从一开始就起作用（我猜测 50 毫秒是一个合理的等待时间，不会在我的发送队列中创建积压），因此请务必针对您的操作环境进行测试和调整。

题外话：接收我的数据的应用程序是一个闭路电视录像机，它可以在视频上叠加文本，这样每个 TCP 数据包都是屏幕上的不同行。我被迫对 Nagle 的算法做一些事情，否则我的“行”被显示为“捆绑”在一起（更不用说明显与机器使用缓冲区有关的其他工件）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T17:47:06.613

如果您想确保在 TCP 上单独接收具有您提到的约束的消息，您应该在每条消息之后关闭连接。如果您不期待回复，您可以关闭读写操作，如果您想要回复，请关闭仅写入操作。关闭写入将导致接收器收到 0 个字节，因此接收器可以检测到消息的结尾。例如，http 就是这样工作的。

这里的权衡是您需要为每条消息打开一个新的 TCP 连接，这会导致一些开销。然而，在许多应用中，这并不重要。

免责声明：这很容易使用 BSD 套接字 API 实现。我对 C# 的经验很少，不知道它是否提供了合适的 API 来执行这些低级套接字操作。

# android - 应用升级后重启和安卓服务

> ID：10539317
> 
> 赞同：0
> 
> 时间：2012-05-10T17:32:10.273
> 
> 标签：android, android-intent, package, upgrade, broadcast

我有一个通过“看门狗”警报管理器保持运行的服务，它检查服务是否正在运行并在需要时重新启动它。

这工作正常，直到用户从应用商店更新应用。大概是从手机中删除应用程序并替换包的过程使我的 AlarmMgr 条目无效。

有人可以告诉我应该使用什么意图来根据由于从应用商店升级应用程序而发生的包更改来重新安排服务。

似乎需要以下一项或多项。

```
 <intent-filter>
            <action android:name="android.intent.action.PACKAGE_CHANGED"/>
            <action android:name="android.intent.action.PACKAGE_REPLACED"/>
            <action android:name="android.intent.action.PACKAGE_INSTALL"/>
        </intent-filter> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:21:59.020

[他们在这里](http://developer.android.com/reference/android/content/Intent.html#ACTION_PACKAGE_ADDED "这里")说，*“新安装的包没有收到这个广播”*。我认为所有这些广播都是一样的，这是出于安全原因。也`PACKAGE_INSTALL`已弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-15T04:20:52.890

在谷歌上遇到这个问题，所以认为值得更新答案的状态。从 Honeycomb 开始，现在有 ACTION_MY_PACKAGE_REPLACED 在更新时发送到您的应用程序，这是为这种用例设计的。

与 2012 年提出这个问题时不同，对 Android 2.3 或更低版本的支持不再重要。

# prolog - 了解 Prolog 中的列表和递归

> ID：10539326
> 
> 赞同：3
> 
> 时间：2012-05-10T17:32:53.860
> 
> 标签：prolog

我很难在 Prolog 中思考。这个说法有什么不正确的：

```
numberList([], 0).
numberList([H|T], Limit) :-
    H is Limit,
    numberList(T, Limit - 1). 
```

我想

```
?- numberList(X,Limit). 
```

确定`[Limit, Limit-1 ... 1]`为 Limit 的给定值的唯一解决方案，即

```
?- numberList(X, 100). 
```

会产生`X = [100, 99, 98, ..., 1].`。

我的猜测是，我在这里的理解有很大问题，因为这不起作用。我不一定要求解决我正在尝试做的事情，我只是想了解为什么我的第一次尝试是错误的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T18:03:07.107

这里潜伏着两个主要问题：

1- 你很难在正确的地方进行统一和算术运算

2-你没有足够检查你的输入

备注 1- `(is)/2`用于执行算术运算，例如，减去`1`。可以但不应该用于将变量统一为已经计算过的算术表达式。应该是首选（统一）。`Limit``(is)/2``(=)/2`

关于 2 的备注 - 即使您的运算符正确，您的程序也会循环。稍后再谈。

仅通过自己切换运算符不会获得太多收益，因此这是正确的方法：

```
numberList([], 0).
numberList([Limit|T], Limit) :-
    NewLimit is Limit - 1,
    numberList(T, NewLimit). 
```

在这里你可以看到我在第二个子句的头部隐含地使用了统一，另一种说法如下：

```
numberList([], 0).
numberList([H|T], Limit) :-
    H = Limit,
    NewLimit is Limit - 1,
    numberList(T, NewLimit). 
```

但是现在，正如您通过尝试这个程序所看到的那样，它找到了一个正确的解决方案，但如果您要求另一个带有`;`.

原因对于初学者来说可能更难发现：当 Prolog 成功并返回一个解决方案时，它只能通过探索执行过程中留下的选择点来找到新的解决方案。在这里，剩下的唯一选择点是 when `Limit`is `0`。所以它在这种情况下尝试第二个子句而不是第一个子句并循环直到它到达`NegativeInfinity`. 可悲的是，由于到达那里的行程很长，所以它之前溢出了。这个问题的解决方案是在第二个子句中添加一个保护，指定`Limit`应该大于`0`或在第一个子句中添加一个cut，甚至更好：两者都做。问问你自己这样做有没有困难！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-26T17:27:39.047

“Limit - 1”被认为是一个函数调用，在 C 语言中它会起作用。它正在询问/命令 Prolog“找到一个减法函数，用 Limit-variable 和 1 调用它”。它要求 Prolog 将“Limit - 1”理解为函数调用结果，但 Prolog 将“Limit - 1”理解为复合术语减法（Limit，1），它是一阶逻辑的谓词

“H is Limit”这也被认为是一个函数调用

Prolog没有功能（？？？），我认为这种说法对C-人来说是一个很大的障碍。Prolog 没有函数（如 C 等，如数学），而是有谓词（如谓词逻辑、一阶等）

函数是命令微处理器的命令。而是谓词将数据呈现给微处理器以“用微处理器的眼睛看”，将数据呈现给微处理器以感知。

谓词描述一个世界，描述该世界中对象之间的一些关系，微处理器试图验证这些关系。微处理器试图证明这些关系确实存在于它的知识中。这些关系可以在它的知识中多次存在，因此微处理器可以返回多个结果（又名非确定性）

Prolog是一门神奇的编程语言，也许我应该写神奇的描述语言，神奇的模式识别语言，神奇的推理/演绎语言（简单的推理/演绎，它不是一种“人工智能”，推理/演绎就像数字电子逻辑门）。我以前是一个热心的 Visual Studio 程序员，但我已经学习 Prolog 几年了。

C 语言等用于命令，Prolog 语言等用于描述。

# algorithm - 有限精度算术编码解码过程？

> ID：10539331
> 
> 赞同：1
> 
> 时间：2012-05-10T17:33:20.753
> 
> 标签：algorithm, compression, floating-point, data-compression

我一直在阅读算术编码，特别是如何处理有限精度，例如，当范围在区间 (0, 0.5) 或 (0.5, 1) 内时，可以分别输出 0 或 1 ，然后将范围加倍。我不明白的是，如果采用此过程，如何解码生成的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:45:27.427

解码器运行编码器的完全相同的副本（相对于原始编码器必然延迟），包括其编码间隔模型。

解码器还跟踪编码器的已知输出间隔，直到它读取压缩数据流为止。当这个区间适合编码模型的区间之一时，它知道它可以解码相应的符号。

* * *

请注意，在读取压缩数据流时，输出间隔可以快速减小到 1 的大小（有限精度编码器可以表示的最小步长）。由于编码区间都是离散化的，保证了这个单位输出区间适合某个编码区间，所以解码器永远不会落后于编码器太远。然而，压缩流的结束可能需要解码状态的“刷新”——要么通过一些辅助信号（如文件长度），要么通过编码器发送足够的额外位以确保解码器找到其终止符号。

# php - PHP将信息从文本框发送到WAMP服务器导致错误

> ID：10539332
> 
> 赞同：-3
> 
> 时间：2012-05-10T17:33:27.453
> 
> 标签：php, textbox, wamp

我没有收到任何错误，但是当我单击提交时没有任何反应。

只是想在文本框中输入值之前尝试这个简单的代码，但即使这样也不会添加记录。我不明白出了什么问题。

```
<form method="post" action="">   
User Name: <input type="text" name="UN"><br>    
Password: <input type="text" name="PW"><br>   
 <input type="Submit" name = "submit" value="Add User">  
</form>

<?php 
$mysql = new mysqli('localhost', 'root', 'password', 'db')
 or die ('you\'re dead');

if (mysqli_connect_errno()) {    
  exit('Connect failed: '. mysqli_connect_error());    
}

if(isset($_POST['Submit'])) {    
   $quer = "INSERT INTO 'unpw'('id' , 'username', 'password') VALUES 
    (? , 'hello' , 'world')";

    $mysql->query($quer);

    if ($mysql->query($query) === TRUE) {  
      echo 'users entry saved successfully';    
    } else {    
     echo 'Error: '. $mysql->error;    
    }

    $mysql->close();

}    
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T21:54:06.807

PHP 中的变量区分大小写。

您正在检查`$_POST['Submit']`，应该是什么时候`$_POST['submit']`；正如您所写`<input type="Submit" name ="submit" value="Add User">`- 永远不会触发提交代码。

# javascript - 如何通过单击而不是页面加载来触发 Dojo xhrGet？

> ID：10539338
> 
> 赞同：0
> 
> 时间：2012-05-10T17:34:10.870
> 
> 标签：javascript, dojo, xmlhttprequest

Dojo Toolkit 的新手，我能够在页面加载时成功加载 xhrGet，但我需要在选择 DataGrid 的一行时加载 xhrGet。有没有办法做到这一点？

```
<!doctype html>
<html>
<head>
<script type="text/javascript>
dojo.connect(btn, "onclick", function() {
/************************/
/* xhr - AJAX functions */
/************************/
dojo.ready(function(){

var targetNode = dojo.byId("xhr-container");

var xhrArgs = {
url: "info-to-get.html",
handleAs: "text",
load: function(data){
targetNode.innerHTML = data;
},
error: function(error){
targetNode.innerHTML = "You messed up, dummy!: " + error;
}
}
var deferred = dojo.xhrGet(xhrArgs);
});
});
</script>
</head>
<body>
<button type="button" id="btn">TEST</button>
<br>
<br>
<div id="xhr-container"></div>
</body>
</html> 
```

xhrGet 本身在页面加载时工作正常，尝试通过按钮调用它时没有骰子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:44:13.263

这会将 html domNode 的点击连接到触发一个可以放置 xhr 代码的函数。

```
dojo.connect(someDomNode, 'onclick', function() {
    //xhr code here
}); 
```

如果它是一个小部件，就像`dijit.form.Button`你可以写

```
dojo.connect(someWidget, 'onClick', function() {
    //xhr code here
}); 
```

- 编辑 - - - - - - - - - - -

根据您发布的代码，我希望以下工作：

```
dojo.ready(function(){

    var targetNode = dojo.byId("xhr-container");

    var fnDoXHR = function() {
        var xhrArgs = {
            url: "info-to-get.html",
            handleAs: "text",
            load: function(data){
                targetNode.innerHTML = data;
            },
            error: function(error){
                targetNode.innerHTML = "You messed up, dummy!: " + error;
            }
        };
        var deferred = dojo.xhrGet(xhrArgs);
    };

    dojo.connect(dojo.byId('btn'), 'onclick', fnDoXHR);
}); 
```

# sql-server - T-SQL：左连接并在没有连接时返回空值

> ID：10539342
> 
> 赞同：0
> 
> 时间：2012-05-10T17:34:20.893
> 
> 标签：sql-server, tsql, join, null

我有下表 TableA 和一些数据

```
ColA  ColB
0      5
0      6 
```

我有另一个表，TableB，有一些数据

```
ColC  ColD   ColE
5      10     5
5      15     10
6      20     10 
```

ColC 是 ColB 的外键。对于 TableA 中的每一行，我需要返回 ColA、ColB 和 ColD。在 TableB 中选择的行取决于通过参数设置的 ColE 的值。

例如：如果我的参数设置为 5，我应该得到两行，如下所示：

```
ColA  ColB  ColD
0      5     10
0      6     null 
```

但是，如果我的参数不是 5 并且 TableB 中不存在任何行，则它会使用参数值 5 并从 ColB 检索值（如果存在行）。

我尝试了几件事，但似乎无法提出解决方案。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:36:44.143

尝试这个：

```
select ColA, ColB, ColD
  from TableA a
  left outer join TableB b on (a.ColB = b.ColC and b.ColE = 5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:12:14.877

```
select a.ColA, a.ColB, COALESCE(b.ColD, b5.ColD)
  from TableA a
  left outer join TableB b 
  on a.ColB = b.ColC 
  and b.ColE = 6
  left outer join TableB b5 
  on a.ColB = b5.ColC 
  and b5.ColE = 5 
```

# vba - 在数据点更改后插入行

> ID：10539346
> 
> 赞同：2
> 
> 时间：2012-05-10T17:34:47.073
> 
> 标签：vba, excel

我有一个如下所示的数据集：

```
这 1 生长激素
这2GH
这3GH
这4 BR
这5 BR
这6 VB

```

当数据点发生变化时，即“GH”到“BR”我希望excel插入换行符。使最终的数据看起来像这样。

```
这 1 生长激素
这2GH
这3GH

这4 BR
这5 BR

这6 VB

```

知道如何做到这一点吗？我认为负迭代 for 循环会起作用。但我不知道在这种情况下 excel 将如何处理行操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:47:17.800

假设您的电子表格没有数千行，您可以使用此（快速而肮脏的）代码：

```
Sub doIt()

  Dim i As Long

  i = 2
  While Cells(i, 1) <> ""
    If Cells(i, 2) <> Cells(i - 1, 2) Then
      Rows(i).Insert
      i = i + 1
    End If
    i = i + 1
  Wend

End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T18:08:25.307

最快的方法（**尝试和测试**）

```
Option Explicit

Sub Sample()
    Dim aCell As Range, bCell As Range
    Dim ExitLoop As Boolean

    With Sheets("Sheet1")
        .Columns("A:B").Subtotal GroupBy:=2, Function:=xlCount, TotalList:=Array(2), _
        Replace:=True, PageBreaks:=False, SummaryBelowData:=True

        Set aCell = .Cells.Find(What:=" Count", LookIn:=xlValues, _
                     LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                     MatchCase:=False, SearchFormat:=False)

        If Not aCell Is Nothing Then
            Set bCell = aCell
            .Rows(aCell.Row).ClearContents
            Do While ExitLoop = False
                Set aCell = .Cells.FindNext(After:=aCell)

                If Not aCell Is Nothing Then
                    If aCell.Address = bCell.Address Then Exit Do
                    .Rows(aCell.Row).ClearContents
                Else
                    ExitLoop = True
                End If
            Loop
        End If

        .Cells.RemoveSubtotal
    End With
End Sub 
```

我假设第 1 行有标题。

**宏在行动**

![在此处输入图像描述](../Images/01865da1b5cff2f184b9a9a197d187f0.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-23T20:06:10.703

除了上面的 'slow' excel 问题，别忘了禁用 application.screenupdating ，它会提高任何宏的速度 5000%

```
Sub doIt()
  Application.ScreenUpdating = False
  Dim i As Long

  i = 2
  While Cells(i, 1) <> ""
  If Cells(i, 1) <> Cells(i - 1, 1) Then
     Rows(i).Insert

     i = i + 1
  End If
  i = i + 1
 Wend
 Application.ScreenUpdating = True
End Sub 
```

# ruby-on-rails-3 - Rails remember_token 会话不起作用

> ID：10539347
> 
> 赞同：0
> 
> 时间：2012-05-10T17:34:49.880
> 
> 标签：ruby-on-rails-3

我是 Ruby on Rails 的新手。我正在通过互联网上提供的 Michel Hartl 的参考文档来学习它。但是我在用户登录过程中遇到了问题，我怀疑 before_save 没有调用 create_remember_token 方法。我试图从很长时间内调试这个问题。我的代码如下：

用户.rb 文件：

```
# == Schema Information
#
# Table name: users
#
#  id              :integer(4)      not null, primary key
#  name            :string(255)
#  email           :string(255)
#  created_at      :datetime        not null
#  updated_at      :datetime        not null
#  password_digest :string(255)
#  username        :string(255)
#  remember_token  :string(255)
#

class User < ActiveRecord::Base
def to_param
username
end
attr_accessible :name, :email, :password, :password_confirmation, :username
has_secure_password

before_save { |user| user.email = email.downcase }
before_save :create_remember_token

private

def create_remember_token
 self.remember_token = SecureRandom.urlsafe_base64
end
end 
```

session_helper.rb

```
module SessionsHelper

def sign_in(user)
cookies.permanent[:remember_token] = user.remember_token
current_user = user
end

def current_user=(user)
  @current_user = user
end

def current_user
 @current_user ||= user_from_remember_token
end

def signed_in?
 !current_user.nil?
end

private

def user_from_remember_token
  remember_token = cookies[:remember_token]
  User.find_by_remember_token(remember_token) unless remember_token.nil?
end   
end 
```

session_controller.rb：

```
class SessionsController < ApplicationController
def new

end

def create
    user=User.find_by_username(params[:session][:username])
    if user && user.authenticate(params[:session][:password])
        sign_in user
        redirect_to "/@/#{params[:session][:username]}"
    else
        flash.now[:error] = "Login failed! Please try again!"
        render 'new'
    end
end

def destroy

end
end 
```

请帮助我，让我知道问题出在哪里。干杯:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:05:09.243

before_save 回调只应在创建用户时调用（即，当他们注册时，而不是在他们登录时）。您没有在代码示例中显示整个注册/用户创建流程，但我认为它存在。

您可以通过从 Rails 控制台运行以下命令来测试是否调用了 create_remember_token（当创建用户时）：

```
User._save_callbacks.select { |cb| cb.kind.eql?(:before) }.collect(&:filter).include?(:create_remember_token) 
```

当且仅当 create_remember_token 函数在保存时运行时，它才应该返回 true。[回调 API 文档](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)的“调试回调”部分中的更多详细信息。

如果在注册流程中调用回调，那么 remember_token 应该保存到数据库中。您可以通过使用 Rails 控制台检查用户来验证这一点（User.last，在创建测试用户之后）。

您的注册/用户创建流程是什么样的？哪些重现步骤会产生您所描述的问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T20:18:13.020

您在登录期间遇到的具体问题是什么？

我问的原因是在登录过程中不应该调用 create_remember_token 方法。它在用户被保存（注册）时被调用。

登录过程只是从用户表中获取令牌并将其复制到永久 cookie 中。登录过程大致如下：

登录用户 --> session_helper.rb --> def sign_in(user) --> cookies.permanent[:remember_token] = user.remember_token --> 返回 session_controller.rb --> redirect_to ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T05:40:04.383

我在一年前发布了这个问题。现在我正在使用[Devise](https://github.com/plataformatec/devise) gem 进行身份验证。一切都按预期工作。

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-07T18:28:12.850

您可能没有在布局中使用 csrf 元标记。尝试删除控制器文件夹中 application_controller.rb 中的“防止伪造”。然后尝试再次运行该应用程序，如果它有效，那么您没有将标签添加到您的布局中。

# delphi - 如何跟踪delphi中某个类的实例数？

> ID：10539353
> 
> 赞同：1
> 
> 时间：2012-05-10T17:35:20.440
> 
> 标签：delphi

如何在 Delphi 7 中跟踪某个类在内存中的计数，而不在类中添加静态计数成员。用于跟踪程序性能。提前谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T21:56:50.460

您可以在 VMT 类中挂钩 NewInstance 和 FreeInstance 方法：

```
unit ClassHook;

{no$DEFINE SINGLE_THREAD}

interface

var
  BitBtnInstanceCounter: integer;

implementation

uses Windows, Buttons;

function GetVirtualMethod(AClass: TClass; const VmtOffset: Integer): Pointer;
begin
  Result := PPointer(Integer(AClass) + VmtOffset)^;
end;

procedure SetVirtualMethod(AClass: TClass; const VmtOffset: Integer; const Method: Pointer);
var
  WrittenBytes: {$IF CompilerVersion>=23}SIZE_T{$ELSE}DWORD{$IFEND};
  PatchAddress: PPointer;
begin
  PatchAddress := Pointer(Integer(AClass) + VmtOffset);
  WriteProcessMemory(GetCurrentProcess, PatchAddress, @Method, SizeOf(Method), WrittenBytes);
end;

{$IFOPT W+}{$DEFINE WARN}{$ENDIF}{$WARNINGS OFF} // avoid compiler "Symbol 'xxx' is deprecated" warning
const
  vmtNewInstance = System.vmtNewInstance;
  vmtFreeInstance = System.vmtFreeInstance;
{$IFDEF WARN}{$WARNINGS ON}{$ENDIF}

type
  TNewInstanceFn = function(Self: TClass): TObject;
  TFreeInstanceProc = procedure(Self: TObject);

var
  OrgTBitBtn_NewInstance: TNewInstanceFn;
  OrgTBitBtn_FreeInstance: TFreeInstanceProc;

function TBitBtn_NewInstance(Self: TClass): TObject;
begin
  Result := OrgTBitBtn_NewInstance(Self);
  {$IFDEF SINGLE_THREAD}
  Inc(BitBtnInstanceCounter);
  {$ELSE}
  InterlockedIncrement(BitBtnInstanceCounter);
  {$ENDIF}
end;

procedure TBitBtn_FreeInstance(Self: TObject);
begin
  {$IFDEF SINGLE_THREAD}
  Dec(BitBtnInstanceCounter);
  {$ELSE}
  InterlockedDecrement(BitBtnInstanceCounter);
  {$ENDIF}
  OrgTBitBtn_FreeInstance(Self);
end;

procedure InstallHooks;
begin
  OrgTBitBtn_NewInstance := GetVirtualMethod(TBitBtn, vmtNewInstance);
  OrgTBitBtn_FreeInstance := GetVirtualMethod(TBitBtn, vmtFreeInstance);
  SetVirtualMethod(Buttons.TBitBtn, vmtNewInstance, @TBitBtn_NewInstance);
  SetVirtualMethod(Buttons.TBitBtn, vmtFreeInstance, @TBitBtn_FreeInstance);
end;

procedure RemoveHooks;
begin
  SetVirtualMethod(Buttons.TBitBtn, vmtNewInstance, @OrgTBitBtn_NewInstance);
  SetVirtualMethod(Buttons.TBitBtn, vmtFreeInstance, @OrgTBitBtn_FreeInstance);
end;

initialization
  InstallHooks;

finalization
  RemoveHooks;

end. 
```

将此单元包含在程序的任何子`uses`句中，现在`BitBtnInstanceCounter`将跟踪`TBitBtn`实例数。

**编辑：**如果有可能多个线程同时创建被跟踪类的对象，则有必要使用互锁访问来修改计数器变量。请注意，第三方组件可能会静默使用线程，因此不定义`SINGLE_THREAD`符号会更安全。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T17:42:05.933

没有内置的方法可以做到这一点。一些分析器（AQTime？）通过安装自定义堆管理器挂钩然后查看位于任何对象开头的类型指针来为您生成此类指标。您可以自己执行此操作，但如果这是为了在开发期间进行分析，则仅使用其他人已经开发和测试的内容会容易得多。

# android - URISyntaxError 当我调用 request.setURI(new URI(url)) 而 url 在所有浏览器上都可以正常工作时

> ID：10539354
> 
> 赞同：0
> 
> 时间：2012-05-10T17:35:22.237
> 
> 标签：android

我有一个问题，当我调用带有许多 JSON 响应参数的 url 时，它会显示一个 URISyntaxError 但相同的 url 在所有浏览器上都可以正常工作。我无法理解出了什么问题？

```
The URL is: http://apibeta.highgearmedia.com/v1/vehicles/get-make-models.json?sort=mpg&filter=category&client-id=10030812&from=convertible&signature=QOwiWhG2T47KaQoyUztbag== 
```

代码：

```
HttpClient client = new DefaultHttpClient();
            HttpGet request = new HttpGet();
            request.setURI(new URI(api_url));

            HttpResponse response = client.execute(request);
            InputStream ips = response.getEntity().getContent();
            BufferedReader buf = new BufferedReader(new InputStreamReader(ips,
                    "UTF-8"));

            StringBuilder sb = new StringBuilder();
            String s;
            while (true) {
                s = buf.readLine();
                if (s == null || s.length() == 0)
                    break;
                sb.append(s);

            }
            buf.close();
            ips.close();
            return sb.toString(); 
```

**错误：**

```
05-10 23:03:45.326: W/System.err(2227): java.net.URISyntaxException: Illegal character in query at index 161: http://apibeta.highgearmedia.com/v1/vehicles/get-make-models.json?sort=mpg&filter=category&client-id=10030812&from=convertible&signature=QOwiWhG2T47KaQoyUztbag==
05-10 23:03:45.326: W/System.err(2227):     at java.net.URI.validateQuery(URI.java:434)
05-10 23:03:45.326: W/System.err(2227):     at java.net.URI.parseURI(URI.java:340)
05-10 23:03:45.335: W/System.err(2227):     at java.net.URI.<init>(URI.java:72)
05-10 23:03:45.335: W/System.err(2227):     at com.TCC.android.ResearchList.getJsonSring(ResearchList.java:3892)
05-10 23:03:45.335: W/System.err(2227):     at com.TCC.android.ResearchList$67.run(ResearchList.java:4077) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:27:04.617

如果您的问题，这是一个解决方案，该函数将从 url 中删除所有无效字符。在此函数中传递您的 url，您将获得一个带有编码字符串的新 url。

```
public static String convertURL(String str) {

    url = null;
    try{
    url = new String(str.trim().replace(" ", "%20").replace("&", "%26")
            .replace(",", "%2c").replace("(", "%28").replace(")", "%29")
            .replace("!", "%21").replace("=", "%3D").replace("<", "%3C")
            .replace(">", "%3E").replace("#", "%23").replace("$", "%24")
            .replace("'", "%27").replace("*", "%2A").replace("-", "%2D")
            .replace(".", "%2E").replace("/", "%2F").replace(":", "%3A")
            .replace(";", "%3B").replace("?", "%3F").replace("@", "%40")
            .replace("[", "%5B").replace("\\", "%5C").replace("]", "%5D")
            .replace("_", "%5F").replace("`", "%60").replace("{", "%7B")
            .replace("|", "%7C").replace("}", "%7D"));
    }catch(Exception e){
        e.printStackTrace();
    }
    return url;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:00:09.400

根据[java URI javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/URI.html#URI%28java.lang.String%29)和底层[RFC](http://www.faqs.org/rfcs/rfc2396.html)（第 2.2 和 3.4 节），`=`是一个保留字符，应该转义（`%3D`for `=`）

顺便说一句，你应该使用`android.net.URI`

# c++ - Code::Blocks 链接不起作用，在提示时它确实起作用

> ID：10539359
> 
> 赞同：0
> 
> 时间：2012-05-10T17:35:39.287
> 
> 标签：c++, codeblocks, fltk

我在链接我在 Code::Blocks、Windows 7 上进行的 FLTK 测试项目时遇到了很多麻烦。

在花了很多时间了解如何以正确的顺序放置库之后，我设法让项目几乎完成。但是仍然存在链接问题：

```
mingw32-g++.exe -Wall -fexceptions  -IC:\Users\Svalorzen\Documents\Projects\fltk-1.3.0 -mwindows -DWIN32 -DUSE_OPENGL32 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE     -c C:\Users\Svalorzen\Documents\Projects\test\main.cpp -o obj\Debug\main.o
mingw32-g++.exe  -o bin\Debug\test.exe obj\Debug\main.o   -LC:\Users\Svalorzen\Documents\Projects\fltk-1.3.0\lib -mwindows -lfltk -lole32 -luuid -lcomctl32  
C:\Users\Svalorzen\Documents\Projects\fltk-1.3.0\lib/libfltk.a(Fl_Native_File_Chooser.o):Fl_Native_File_Chooser.cxx:(.text+0x1556): undefined reference to `__chkstk_ms'
collect2: ld returned 1 exit status
Process terminated with status 1 (0 minutes, 1 seconds)
1 errors, 0 warnings 
```

但是，使用 Code::Blocks 显示的完全相同的脚本，在命令提示符下执行（甚至是 msys 重要的），正确编译和链接所有内容。生成的 exe 也可以工作。

```
C:\Users\Svalorzen\Documents\Projects\test>mingw32-g++ -Wall -fexceptions -IC:\Users\Svalorzen\Documents\Projects\fltk-1.3.0 -mwindows -DWIN32 -DUSE_OPENGL32 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -c C:\Users\Svalorzen\Documents\Projects\test\main.cpp -o obj\Debug\main.o

C:\Users\Svalorzen\Documents\Projects\test>mingw32-g++ -o bin\Debug\test.exe obj\Debug\main.o -LC:\Users\Svalorzen\Documents\Projects\fltk-1.3.0\lib -mwindows -lfltk -lole32 -luuid -lcomctl32

C:\Users\Svalorzen\Documents\Projects\test>dir bin\Debug\test.exe
   Volume in drive C has no label.
   Volume Serial Number is 00E8-6659

Directory of C:\Users\Svalorzen\Documents\Projects\test\bin\Debug

10/05/2012  19:01           661.087 test.exe
           1 File(s)        661.087 bytes
           0 Dir(s)  66.016.849.920 bytes free 
```

指令中的路径都是绝对的，所以我真的不明白为什么会这样。

我究竟做错了什么？我应该检查什么？

编辑：原来我有一个我不记得的 MinGW 安装，而 Code::Blocks 正在使用那个。我改变了它，现在一切都修复了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T09:06:47.657

如果您的 MinGW 是最新的，请尝试添加`-no-vcproj`，`-no-dsp`然后运行`mingw32-make confclean`​​.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T21:56:13.987

事实证明，我安装了一个我不记得的 MinGW，而 Code::Blocks 正在使用那个。

我使用创建库的相同编译器设置 Code::Blocks，现在一切都很好。

# css - 如何在 twitter bootstrap 中自定义响应列和输入字段？

> ID：10539361
> 
> 赞同：4
> 
> 时间：2012-05-10T17:36:06.900
> 
> 标签：css, twitter-bootstrap, responsive-design

主要问题是如何自定义引导响应 css？我的代码部分有效，但我无法解决这种情况。很难解释，所以为了更好地理解，我在屏幕截图上呈现了可视化。

[我在JSFIDDLE](http://jsfiddle.net/PyVc7/1/)上发布了实际清理过的模板代码。

现在，当宽度大于 1200px 列时可以，这意味着它们是两个并排的 span6： ![在此处输入图像描述](../Images/30039014f01a41e279e3ecb5b511b640.png) 在 1200px 和 980px 之间显示应该看起来像： ![在此处输入图像描述](../Images/d510b402b482a32635a677bcad6ab26f.png) 在第一个导航栏折叠时小于 979px 和大于 768px 我想有类似的东西容器中心： ![在此处输入图像描述](../Images/84957f50b4d23bb8e3a2af75d66a314d.png) 直到下一次收缩低于 768 像素时，右栏会跳转到新行并在进一步减少到 480 像素及以下时停留在那里。我认为下面显示的视图适用于移动设备，并且在狭窄的桌面浏览器中看起来更好，但缩放时两列都不在中心： ![在此处输入图像描述](../Images/78109213364f315bcd1b10c302d73e35.png)

最小的宽度符合我的期望。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T10:23:12.840

我不确定我是否正确理解您的问题，但您可以使用媒体查询自定义行为

```
// Landscape phones and down
@media (max-width: 480px) { ... }

// Landscape phone to portrait tablet
@media (max-width: 767px) { ... }

// Portrait tablet to landscape and desktop
@media (min-width: 768px) and (max-width: 979px) { ... }

// Large desktop
@media (min-width: 1200px) { ... } 
```

也许你必须覆盖一些类和 id。响应信息可以在 git 上找到：

[无响应的](https://github.com/twitter/twitter/bootstrap/blob/master/less/responsive.less)

*   [responsive-1200px-min.less](https://github.com/twitter/bootstrap/blob/master/less/responsive-1200px-min.less)

*   [responsive-767px-max.less](https://github.com/twitter/bootstrap/blob/master/less/responsive-767px-max.less)

*   [响应式 768px-979px.less](https://github.com/twitter/bootstrap/blob/master/less/responsive-768px-979px.less)

*   [响应式导航栏.less](https://github.com/twitter/bootstrap/blob/master/less/responsive-navbar.less)

*   [响应式实用程序.less](https://github.com/twitter/bootstrap/blob/master/less/responsive-utilities.less)

不过，只有在您确实需要时才使用这些设置。

# c++ - 不使用任何外部库时，是否存在 LNK2001 未解决的外部符号错误的可能/常见原因？

> ID：10539363
> 
> 赞同：0
> 
> 时间：2012-05-10T17:36:10.503
> 
> 标签：c++, linker

我正在尝试创建一个类的新实例，但是当我尝试编译我的代码时收到 LNK2001 未解决的外部符号错误。

据我所知，在这两种情况下，我已经以与包含另一个课程完全相同的方式编写和包含该课程 -

```
#include "class.h"      // In main.cpp 

class Class {           // In class.h
   private: 
       // etc. 
   public:         
       Class(); 
       ~Class(); 
       // etc.
}; 

#include "class.h"      // In class.cpp 
```

这些错误是否有常见/可能的原因，或者我可以找到问题根源的好方法？

**编辑：**错误是

> “错误 1 ​​错误 LNK2019：无法解析的外部符号“类 Max __cdecl max(void)”(?max@@YA?AVMax@@XZ) 在函数 _main main.obj Racing 中引用“

**编辑：**在这两种情况下，一个类是跨项目中包含的 .h 和 .cpp 文件实现的。该错误仅出现在一类中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:07:10.337

你在某处写过这个：

```
Max max(); 
```

您的意图是声明一个`max`类型为 的变量`Max`。

C++ 认为您打算声明一个`max`返回类型对象的函数`Max`。这就是它正在寻找的东西。

如果你只是这样说：

```
Max max; 
```

问题就会消失。

**编辑：**这只发生在不带参数的构造函数中。如果构造函数接受参数，C++ 可以从参数（将是右值，例如常量或表达式）中看出它是类的实例化而不是函数声明。

```
Max max(5);  // Clearly cannot be a function, because 5 is an rvalue 
```

或者

```
Max max(int); // Clearly cannot be an instantiation, because int is a type 
```

但是如果构造函数没有参数，为了区分它们，如果你在实例化，你必须去掉括号。

# stream - VLC RTSP 与 GStreamer 的兼容性

> ID：10539367
> 
> 赞同：1
> 
> 时间：2012-05-10T17:36:17.353
> 
> 标签：stream, gstreamer, rtsp, vlc, pipeline

我正在做一个流媒体项目。

我有 VLC 作为服务器运行，将 mp4 (h264/aac) RTSP 流流式传输到 Flumotion 服务器（基于 Gstreamer）。

我认为这要么是 VLC（基于 Live555）和 Flumotion（基于 GStreamer）之间的兼容性问题，要么是用于接收 RTSP 流的管道写错了。

这是flumotion使用的管道，需要修复（rtsp.py第44-49行）：

```
return ("rtspsrc name=src location=%s ! decodebin name=d ! queue "
        " ! %s ffmpegcolorspace ! video/x-raw-yuv "
        " ! videorate ! video/x-raw-yuv,framerate=%d/%d ! "
        " @feeder:video@ %s ! @feeder:audio@"
        % (location, scaling_template, framerate[0],
           framerate[1], audio_template)) 
```

编辑：问题是flumotion中的RTSP-Producer组件无法从VLC流中接收任何数据。没有错误，什么都没有，它只是保持“清醒”状态。

我尝试了 Flumotion 使用的 GStreamer 管道的一些变体，但无法使其正常工作。

我在 StackOverflow 中发现了许多类似的未解决问题，这让我认为这是一个兼容性问题

我不是 gst-pipeliner ！所以请帮助我摆脱这场斗争。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:57:13.973

现在好了，因为这个命令正在工作（通常）：

```
gst-launch playbin uri="rtsp://127.0.0.1:8554/live" 
```

我决定不能有兼容性问题！并且通过使用 'rtspdecodebin' 而不是 'rtspsrc' 和 'decodebin' 解决了问题

所以最后我在 rtsp.py::

```
return ("uridecodebin name=d uri=%s ! queue "
        " ! %s ffmpegcolorspace ! video/x-raw-yuv "
        " ! videorate ! video/x-raw-yuv,framerate=%d/%d ! "
        " @feeder:video@ %s ! @feeder:audio@"
        % (location, scaling_template, framerate[0],
           framerate[1], audio_template)) 
```

现在它起作用了！（大多数时候），它可能与流或 QoS 相关......

# c++ - boost python：如何调用 C++ 虚函数

> ID：10539373
> 
> 赞同：1
> 
> 时间：2012-05-10T17:36:50.460
> 
> 标签：c++, python, boost-python, virtual-functions

我在 C++ 应用程序中嵌入了 python。C++ 调用 python 并将其作为参数传递给 C++ 对象。该对象具有一些虚函数，并且可以是某些派生类的基类。如何让 boost::python 明白它是一个虚函数？

考虑以下内容：
在 C++ 中：

```
class Base {
public:
  virtual void func();
}

class Derived {
public:
  virtual void func();
}

BOOST_PYTHON_MODULE(module_api) {
  class_<Base>("Base")
    .def("func", &Base::func);  // ?? what should I put here?
}

int main() {
  //... initialization
  Derived derived;
  main_namespace["pyentry"](&derived);
} 
```

在蟒蛇中：

```
def pyentry(baseref):
  baseref.func()    # here I want Derived::func() to be called 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T23:23:55.767

这里的问题是 Boost.Python 在将派生类对象转换为 Python 时会深度复制您的派生类对象并将其切片为基础对象；根本不需要告诉 Boost.Python 一个函数是虚拟的，除非你需要在 Python 中重写它（听起来你不需要）。

它这样做是为了安全：它确保给定 Python 的对象不会被 C++ 删除，而 Python 仍然具有对它的引用。并且它正在将它切片`Base`- 我认为 - 因为它不知道任何关于`Derived`.

我可以想到两种方法来解决这个问题：

*   为`Derived`. Boost.Python 在将其转换为 Python 时仍会复制它，但它不会再将其切片为 a `Base`。

*   为(via )注册一个`shared_ptr`转换，在 a 中创建您的实例，并将其作为参数传递给您的 Python 函数。现在 Boost.Python 知道当 Python 对象存在时不能删除 C++ 对象，因为 Python 包装器持有对它的引用。`Base``register_ptr_to_python< boost::shared_ptr<Base> >()``Derived``shared_ptr``shared_ptr`

# junit - assertThat 和 Hamcrest is() 和 nullValue() 的奇怪错误

> ID：10539379
> 
> 赞同：1
> 
> 时间：2012-05-10T17:37:14.700
> 
> 标签：junit, hamcrest

我有一种从标准转换`assertNull`为`assertNotNull`使用的方法`assertThat`。

我开始改变一些断言：

```
assertNull(asyncResultsContainer.getQueryOutagesFuture()); 
```

对此：

```
 assertThat(callSession.getOutages(), is(nullValue())); 
```

但是当我`nullValue()`进入内部时，`is()`我开始出现不一致的断言失败，这些断言失败似乎跨越了不同的测试方法，我很难推断出这种失败的模式，除了：

当我`nullValue()`单独转换时：

```
assertThat(callSession.getOutages(), nullValue()); 
```

问题消失了。

那么有人可以解释为什么使用`nullValue()`

```
static <T> org.hamcrest.Matcher<T> nullValue() 
```

作为参数`is()`

```
static <T> org.hamcrest.Matcher<T> is(org.hamcrest.Matcher<T> matcher) 
```

不应该工作？

# orm - Apex - SalesForce - 通过连接对象访问父对象字段

> ID：10539381
> 
> 赞同：3
> 
> 时间：2012-05-10T17:37:20.690
> 
> 标签：orm, salesforce, apex-code, junction-table

**大家好，**

我正在努力在 Force.com 平台上定制一些功能。我有一个问题问你; 我不太确定这是否可能！

**是）我有的？**: 2 个自定义对象 - abc 和 pqr。Abc 是标准对象 Account 和 pqr 之间的连接对象，即 Account 是 abc 的父级，然后 Pqr 是 abc 的父级。我正在通过这些对象将所有内容检索到 Account 类型的 List 中（即来自 Account 对象）。

**我需要的？**：我可以访问 Apex 中的 abc 对象，即 Account 的第一个孩子。是否有可能通过帐户访问 pqr 的字段？

**我尝试过**：通过关系名称访问对象 - Account.abc_ *r[0].pqr* _r[0].FIELDNAME

但它没有奏效。***一些销售人员/顶尖开发人员可以帮我解决这个问题吗？***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T18:05:02.217

您应该能够使用子查询获得所需的信息。这里真正的问题是您的查询是如何设置的。您的查询需要访问所有级别的数据模型才能使用。如果您依赖触发器或标准控制器中返回的数据，那么我建议您要求帐户对象访问附加信息。

因此，我希望看到以下内容：

```
List<Account> accounts = [SELECT Id, Name, (SELECT Id, pqr__r.Id, pqr__r.Name FROM abc__r) FROM Account];

for (Account acct : accounts) {
    string someValue = acct.abc__r[0].pqr__r.Name;
} 
```

请记住，作为最佳实践，您不应该像我上面那样访问子记录，因为如果没有 ABC 记录，该对象将为空，因此作为最佳实践，您需要提前测试。PQR 对象数据也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T16:08:21.433

***这个问题的答案如下：***

```
List<Account> accounts = [SELECT Id, Name, (SELECT Id, pqr__r.Id, pqr__r.Name FROM abc__r) FROM Account];

for (Account acct : accounts) {
    for(Abc__c abc : acct.abc__r)
       {
          String someValue = abc.pqr__r.Name;
       }
} 
```

**注意**：这里，abc_r*是对象*Abc_c 与 Account 的关系。如果您有任何问题，请对此发表评论。

# spring - 在 Spring 的 Application Context xml 中访问 JVM 选项

> ID：10539385
> 
> 赞同：2
> 
> 时间：2012-05-10T17:37:48.740
> 
> 标签：spring, jvm, apache-camel, jvm-arguments

有什么方法可以访问 Spring 的 applicationContext.xml 中的任何 -D 选项值（JVM 选项）？

我正在通过 Spring 的 applicationContest.xml 访问 Apache Camel Context，并分离出我的路由或基于 camelContexts 的 -Denv="preprod"。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:42:46.490

如果您配置了属性占位符，则可以使用`${env}`.

如果您使用的是 spring 3.0 或更高版本，则可以使用 spring 表达式语言支持 (Spel) -`#{systemProperties.env}`

# android - Android：定位 admob 广告

> ID：10539386
> 
> 赞同：0
> 
> 时间：2012-05-10T17:37:58.747
> 
> 标签：android, layout, admob

我在我的应用中定位我的 admob 广告时遇到问题。使用下面的代码，我收到一条错误消息 `error parsing XML: unbound prefix`

我似乎无法修复它。我究竟做错了什么？还有其他方式来定位广告吗？

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainLayout"    
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <com.admob.android.ads.AdView
   android:id="@+id/ads"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   myapp:backgroundColor="#000000"
   myapp:primaryTextColor="#FFFFFF"
   myapp:secondaryTextColor="#CCCCCC"
   myapp:refreshInterval="10"
   android:visibility="visible" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:43:10.250

编译器不理解你的`myapp:`

请`admobsdk:`改用。

参见代码示例：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:admobsdk="http://schemas.android.com/apk/res/joke.content"
        android:orientation="vertical" android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <ImageView android:id="@+id/photo" android:src="@drawable/joker"
                android:layout_width="wrap_content" android:layout_height="wrap_content" />
        <RelativeLayout android:layout_height="wrap_content"
                android:layout_width="wrap_content">
                <TextView android:id="@+id/title" android:text=""
                        android:layout_width="wrap_content" android:layout_height="wrap_content"
                        android:textSize="24sp" android:textColor="@color/css_a"
                        android:layout_centerInParent="true" android:layout_alignParentTop="true"></TextView>
        </RelativeLayout>
        <ScrollView android:layout_width="fill_parent"
                android:layout_height="wrap_content" android:layout_weight="1">
                <TextView android:layout_width="fill_parent"
                        android:layout_height="wrap_content" android:text="" android:id="@+id/content"
                        android:textSize="18sp" />
        </ScrollView>

        <RelativeLayout android:layout_height="wrap_content"
                android:layout_width="fill_parent">
                <Button android:text="下一篇" android:id="@+id/next"
                        android:layout_width="wrap_content" android:layout_height="wrap_content"
                        android:layout_alignParentRight="true" android:layout_marginRight="15dip"
                        android:textSize="22sp"></Button>
        </RelativeLayout>
        <com.admob.android.ads.AdView android:id="@+id/ad"
                android:layout_width="fill_parent" admobsdk:backgroundColor="#000000"
                admobsdk:textColor="#FFFFFF" admobsdk:refreshInterval="60"
                admobsdk:keywords="笑话" android:layout_height="wrap_content"
                admobsdk:testing="false" admobsdk:isGoneWithoutAd="false" />
</LinearLayout> 
```

请确保您在前面的代码中有这一行：

```
xmlns:admobsdk="http://schemas.android.com/apk/res/joke.content" 
```

您的 attrs.xml（在 res/values 文件夹中）文件是否如下所示：

```
<?xml version="1.0" encoding="utf-8" ?> 
    <resources>
      <declare-styleable name="com.admob.android.ads.AdView">
        <attr name="backgroundColor" format="color" /> 
        <attr name="primaryTextColor" format="color" /> 
        <attr name="secondaryTextColor" format="color" /> 
        <attr name="keywords" format="string" /> 
        <attr name="refreshInterval" format="integer" /> 
      </declare-styleable>
    </resources> 
```

如果没有，请在您的 res/values 文件夹中创建一个名为 attrs.xml 的 xml 文件并将此代码复制到其中。

`joke.content`是你的包名。请记住将其更改为您的包名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T17:51:50.480

您在 LinearLayout 上错过了这一行： xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"

看看这个网址：

[https://developers.google.com/mobile-ads-sdk/docs/android/banner_xml](https://developers.google.com/mobile-ads-sdk/docs/android/banner_xml)

# css - CSS3 第二个 3D 透视图

> ID：10539387
> 
> 赞同：2
> 
> 时间：2012-05-10T17:38:01.287
> 
> 标签：css, 3d, perspective

大家好，我有一张这样的地图[http://sinanisler.com/demo/map/](http://sinanisler.com/demo/map/)

正如你所看到的，有一些树，但不是真正的观点我想要这个[http://sinanisler.com/demo/musteri/uploads/res.png](http://sinanisler.com/demo/musteri/uploads/res.png) 问题很清楚我怎样才能做这样的树。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T20:02:19.357

**1)**将此样式应用于主 div 容器以保留孩子的 3d 绘图：

```
[-webkit-/-moz-/...]transform-style: preserve-3d; 
```

**2）**对树应用旋转：

```
[-webkit-/-moz-/...]transform: rotate3d(1, 0, 0,-90deg); 
```

**3）**为树木使用透明背景图像

# ios - 如何在 iOS 上显示像 iBooks 这样的缩略图弹出框？

> ID：10539390
> 
> 赞同：1
> 
> 时间：2012-05-10T17:38:13.577
> 
> 标签：ios, thumbnails, uipopovercontroller, ibooks

在固定布局 epub 的底部栏上拖动时会显示此弹出框。它不是普通的 UIPopover（边界不同）。它看起来更像一个 UIMenuController，但不能将图像放入其中。如何才能做到这一点？

![iBooks 缩略图弹出框](../Images/6b6e0a27ea7f752c867a76483a97635f.png)

# c++ - SDKDDKVer.h 是做什么用的？

> ID：10539391
> 
> 赞同：22
> 
> 时间：2012-05-10T17:38:17.840
> 
> 标签：c++, windows, visual-c++

使用 MSVC 创建的所有项目都有 stdafx，它是预编译的头文件，我知道它们是什么，但是 targetver.h 呢？它包括 SDKDDKVer.h，我找不到那个标题是关于什么的。

这个是来做什么的 ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T18:30:28.620

`targetver.h`并`SDKDDKVer.h`用于根据您希望程序支持的操作系统来控制从 Windows 标头中将哪些函数、常量等包含到您的代码中。我相信`targetver.h`除非在其他地方指定了定义，否则默认设置为使用最新版本的 Windows。

`SDKDDKVer.h`是实际定义`#defines`代表每个版本的 Windows、IE 等的头文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-21T14:58:26.593

`SDKDDKVer.h`（在 SDK 8.1 中）的第 193 行状态：

*“如果尚未定义版本，则默认为最新版本”*

此注释专门指的是`_WIN32_WINNT`和`NTDDI_VERSION`宏。

所以..

1.  `SDKDDKVer.h`应用默认值，除非宏已经定义
2.  以下代码可用于显式定义宏
    *   `#define _WIN32_WINNT 0x0601`
    *   `#define NTDDI_VERSION 0x06010000`
3.  有趣的是，`SDKDDKVer.h`头文件为所有 SDK 版本定义了“常量”值。例如：
    *   `#define _WIN32_WINNT_WINXP 0x0501`
    *   `#define _WIN32_WINNT_WIN7 0x0601`
    *   `#define _WIN32_WINNT_WIN8 0x0602`
4.  一种约定是在名为 的头文件中定义`_WIN32_WINNT`和，您将在预编译的头文件中引用它。`NTDDI_VERSION``TargetVer.h``StdAfx.h`

# 附加阅读

*   [修改 WINVER 和 _WIN32_WINNT](https://msdn.microsoft.com/en-us/library/6sehtctf.aspx "修改 WINVER 和 _WIN32_WINNT")
*   [使用 Windows 标头](https://msdn.microsoft.com/en-us/library/windows/desktop/aa383745(v=vs.85).aspx "使用 Windows 标头")
*   [目标平台版本对 VS C++ 项目意味着什么？](https://stackoverflow.com/questions/39621646/what-does-the-target-platform-version-mean-for-a-vs-c-project "“目标平台版本”对于 VS C++ 项目意味着什么？")

# wpf - WPF转换器奇怪的行为

> ID：10539395
> 
> 赞同：1
> 
> 时间：2012-05-10T17:38:34.777
> 
> 标签：wpf, binding, converter, actualwidth

我将`Width`a 的 a绑定`TextBox`到`ActualWidth`其包含的`Grid`，如下所示：

```
<TextBlock
    Grid.Column="0"
    Text="WorkPortalView UserControl"
    TextTrimming="CharacterEllipsis"
    Foreground="White"
    Margin="5" 
    Width="{Binding ActualWidth, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Grid}}, Converter={StaticResource textWidthConverter}, diag:PresentationTraceSources.TraceLevel=High}" /> 
```

如图，我使用的是Converter，如下：

```
class TextWidthConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            double? d = value as double?;
            if (d == null)
                return null;

            return (d / 2);
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            throw new NotSupportedException("Cannot convert back");
        }
    } 
```

奇怪的是，显示的代码工作正常。但是，如果我将`return (d / 2)`语句替换为`return (d - 75D)`，似乎会引发属性更改的无限循环。

这是 d / 2 的诊断跟踪标记的输出：

```
System.Windows.Data Warning: 71 :     Lookup ancestor of type Grid:  queried Grid (hash=19487651)
System.Windows.Data Warning: 70 :   RelativeSource.FindAncestor found Grid (hash=19487651)
System.Windows.Data Warning: 76 : BindingExpression (hash=35097890): Activate with root item Grid (hash=19487651)
System.Windows.Data Warning: 106 : BindingExpression (hash=35097890):   At level 0 - for Grid.ActualWidth found accessor DependencyProperty(ActualWidth)
System.Windows.Data Warning: 102 : BindingExpression (hash=35097890): Replace item at level 0 with Grid (hash=19487651), using accessor DependencyProperty(ActualWidth)
System.Windows.Data Warning: 99 : BindingExpression (hash=35097890): GetValue at level 0 from Grid (hash=19487651) using DependencyProperty(ActualWidth): '417.6'
System.Windows.Data Warning: 78 : BindingExpression (hash=35097890): TransferValue - got raw value '417.6'
System.Windows.Data Warning: 80 : BindingExpression (hash=35097890): TransferValue - user's converter produced '208.8'
System.Windows.Data Warning: 87 : BindingExpression (hash=35097890): TransferValue - using final value '208.8' 
```

以下是 d - 75D 的诊断跟踪标记的输出：

```
System.Windows.Data Warning: 94 : BindingExpression (hash=58235710): Got PropertyChanged event from Grid (hash=43090134) for ActualWidth
System.Windows.Data Warning: 99 : BindingExpression (hash=58235710): GetValue at level 0 from Grid (hash=43090134) using DependencyProperty(ActualWidth): '429.6'
System.Windows.Data Warning: 78 : BindingExpression (hash=58235710): TransferValue - got raw value '429.6'
System.Windows.Data Warning: 80 : BindingExpression (hash=58235710): TransferValue - user's converter produced '354.6'
System.Windows.Data Warning: 87 : BindingExpression (hash=58235710): TransferValue - using final value '354.6'
System.Windows.Data Warning: 94 : BindingExpression (hash=58235710): Got PropertyChanged event from Grid (hash=43090134) for ActualWidth
System.Windows.Data Warning: 99 : BindingExpression (hash=58235710): GetValue at level 0 from Grid (hash=43090134) using DependencyProperty(ActualWidth): '441.6'
System.Windows.Data Warning: 78 : BindingExpression (hash=58235710): TransferValue - got raw value '441.6'
System.Windows.Data Warning: 80 : BindingExpression (hash=58235710): TransferValue - user's converter produced '366.6'
System.Windows.Data Warning: 87 : BindingExpression (hash=58235710): TransferValue - using final value '366.6'
System.Windows.Data Warning: 94 : BindingExpression (hash=58235710): Got PropertyChanged event from Grid (hash=43090134) for ActualWidth
System.Windows.Data Warning: 99 : BindingExpression (hash=58235710): GetValue at level 0 from Grid (hash=43090134) using DependencyProperty(ActualWidth): '453.6'
System.Windows.Data Warning: 78 : BindingExpression (hash=58235710): TransferValue - got raw value '453.6'
System.Windows.Data Warning: 80 : BindingExpression (hash=58235710): TransferValue - user's converter produced '378.6'
System.Windows.Data Warning: 87 : BindingExpression (hash=58235710): TransferValue - using final value '378.6'
System.Windows.Data Warning: 94 : BindingExpression (hash=58235710): Got PropertyChanged event from Grid (hash=43090134) for ActualWidth
System.Windows.Data Warning: 99 : BindingExpression (hash=58235710): GetValue at level 0 from Grid (hash=43090134) using DependencyProperty(ActualWidth): '465.6'
System.Windows.Data Warning: 78 : BindingExpression (hash=58235710): TransferValue - got raw value '465.6'
System.Windows.Data Warning: 80 : BindingExpression (hash=58235710): TransferValue - user's converter produced '390.6'
System.Windows.Data Warning: 87 : BindingExpression (hash=58235710): TransferValue - using final value '390.6'
System.Windows.Data Warning: 94 : BindingExpression (hash=58235710): Got PropertyChanged event from Grid (hash=43090134) for ActualWidth
System.Windows.Data Warning: 99 : BindingExpression (hash=58235710): GetValue at level 0 from Grid (hash=43090134) using DependencyProperty(ActualWidth): '477.6'
System.Windows.Data Warning: 78 : BindingExpression (hash=58235710): TransferValue - got raw value '477.6'
System.Windows.Data Warning: 80 : BindingExpression (hash=58235710): TransferValue - user's converter produced '402.6'
System.Windows.Data Warning: 87 : BindingExpression (hash=58235710): TransferValue - using final value '402.6'
System.Windows.Data Warning: 94 : BindingExpression (hash=58235710): Got PropertyChanged event from Grid (hash=43090134) for ActualWidth
System.Windows.Data Warning: 99 : BindingExpression (hash=58235710): GetValue at level 0 from Grid (hash=43090134) using DependencyProperty(ActualWidth): '489.6'
System.Windows.Data Warning: 78 : BindingExpression (hash=58235710): TransferValue - got raw value '489.6'
System.Windows.Data Warning: 80 : BindingExpression (hash=58235710): TransferValue - user's converter produced '414.6'
System.Windows.Data Warning: 87 : BindingExpression (hash=58235710): TransferValue - using final value '414.6'
System.Windows.Data Warning: 94 : BindingExpression (hash=58235710): Got PropertyChanged event from Grid (hash=43090134) for ActualWidth
System.Windows.Data Warning: 99 : BindingExpression (hash=58235710): GetValue at level 0 from Grid (hash=43090134) using DependencyProperty(ActualWidth): '501.6'
System.Windows.Data Warning: 78 : BindingExpression (hash=58235710): TransferValue - got raw value '501.6'
System.Windows.Data Warning: 80 : BindingExpression (hash=58235710): TransferValue - user's converter produced '426.6'
System.Windows.Data Warning: 87 : BindingExpression (hash=58235710): TransferValue - using final value '426.6'
System.Windows.Data Warning: 94 : BindingExpression (hash=58235710): Got PropertyChanged event from Grid (hash=43090134) for ActualWidth
System.Windows.Data Warning: 99 : BindingExpression (hash=58235710): GetValue at level 0 from Grid (hash=43090134) using DependencyProperty(ActualWidth): '513.6'
System.Windows.Data Warning: 78 : BindingExpression (hash=58235710): TransferValue - got raw value '513.6'
System.Windows.Data Warning: 80 : BindingExpression (hash=58235710): TransferValue - user's converter produced '438.6'
System.Windows.Data Warning: 87 : BindingExpression (hash=58235710): TransferValue - using final value '438.6'
System.Windows.Data Warning: 94 : BindingExpression (hash=58235710): Got PropertyChanged event from Grid (hash=43090134) for ActualWidth
System.Windows.Data Warning: 99 : BindingExpression (hash=58235710): GetValue at level 0 from Grid (hash=43090134) using DependencyProperty(ActualWidth): '525.6'
System.Windows.Data Warning: 78 : BindingExpression (hash=58235710): TransferValue - got raw value '525.6'
System.Windows.Data Warning: 80 : BindingExpression (hash=58235710): TransferValue - user's converter produced '450.6'
System.Windows.Data Warning: 87 : BindingExpression (hash=58235710): TransferValue - using final value '450.6'
System.Windows.Data Warning: 94 : BindingExpression (hash=58235710): Got PropertyChanged event from Grid (hash=43090134) for ActualWidth
System.Windows.Data Warning: 99 : BindingExpression (hash=58235710): GetValue at level 0 from Grid (hash=43090134) using DependencyProperty(ActualWidth): '537.6'
System.Windows.Data Warning: 78 : BindingExpression (hash=58235710): TransferValue - got raw value '537.6'
System.Windows.Data Warning: 80 : BindingExpression (hash=58235710): TransferValue - user's converter produced '462.6'
System.Windows.Data Warning: 87 : BindingExpression (hash=58235710): TransferValue - using final value '462.6'
System.Windows.Data Warning: 94 : BindingExpression (hash=58235710): Got PropertyChanged event from Grid (hash=43090134) for ActualWidth
System.Windows.Data Warning: 99 : BindingExpression (hash=58235710): GetValue at level 0 from Grid (hash=43090134) using DependencyProperty(ActualWidth): '549.6'
System.Windows.Data Warning: 78 : BindingExpression (hash=58235710): TransferValue - got raw value '549.6'
System.Windows.Data Warning: 80 : BindingExpression (hash=58235710): TransferValue - user's converter produced '474.6'
System.Windows.Data Warning: 87 : BindingExpression (hash=58235710): TransferValue - using final value '474.6'
System.Windows.Data Warning: 94 : BindingExpression (hash=58235710): Got PropertyChanged event from Grid (hash=43090134) for ActualWidth
System.Windows.Data Warning: 99 : BindingExpression (hash=58235710): GetValue at level 0 from Grid (hash=43090134) using DependencyProperty(ActualWidth): '561.6'
System.Windows.Data Warning: 78 : BindingExpression (hash=58235710): TransferValue - got raw value '561.6'
System.Windows.Data Warning: 80 : BindingExpression (hash=58235710): TransferValue - user's converter produced '486.6'
System.Windows.Data Warning: 87 : BindingExpression (hash=58235710): TransferValue - using final value '486.6' 
```

关于什么解释了转换器的这种行为的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:26:01.637

显然，网格需要为文本块提供更多空间。您可能能够在 d-87D 找到此行为的截止点，因为网格似乎需要在每个文本块宽度更改时额外增加 12 像素。

顺便说一句，如果您只想为文本块提供相对大小，则最好对网格列使用[星号大小。](http://wpf.2000things.com/2011/10/28/418-star-sizing-allows-setting-row-and-column-sizes-relative-to-each-other/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:44:41.360

这似乎是一个错误。该行为对于一次“自动调整”迭代是合理的，但不应导致无限循环。请参阅上面的讨论。

我最终切换到`DockPanel`实现所需的布局。

# css - 通过 CSS 隐藏输入和标签

> ID：10539396
> 
> 赞同：-1
> 
> 时间：2012-05-10T17:38:35.780
> 
> 标签：css

我正在为 wordpress 使用 mailchimp 插件，并且需要隐藏列表中的一些片段。我将如何指示 css 隐藏这些特定于其名称的元素？

```
<input type="checkbox" name="group[841][1]" id="mc_interest_841_Camp C" class="mc_interest" value="Camp C">
<label for="mc_interest_841_Camp C" class="mc_interest_label">Camp C</label> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:43:15.430

如果类名是静态的，那么你可以这样做：

```
.mc_interest input {
    visibility: hidden;
    height: 0;
} 
```

# c# - 表单集合返回两个值，如何先读取？

> ID：10539398
> 
> 赞同：0
> 
> 时间：2012-05-10T17:38:44.590
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, forms, .net-4.0

我的表单正在向控制器发布值，并且在表单集合中，一些键有一个值，而另一些键有两个值，我打算读取表单集合中所有键的第一个值，有什么帮助吗？

1.  键：A 值：[0]：真，[1]：假
2.  键：B 值：[0]：假
3.  键：C 值：[0]：假
4.  键：D 值：[0]：真，[1]：假

我只想要每个键的 Value[0] ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-08T15:29:07.307

Amarnath 的回答是正确的，但不需要使用拆分，因为 GetValues() 方法已经为您做到了。

```
public ActionResult YourAction(FormCollection fc)
{
     foreach (string key in fc.AllKeys)
     {
          string value-to-consider = fc.GetValues(key).FirstOrDefault();

          //further processing.
     }

} 
```

编辑：如果我有能力这样做，我会将此添加为评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:47:51.170

表单集合返回指定键的逗号分隔值，您可以使用 split(",") 分隔所有值，并且只能考虑第一个值。一个示例实现将是

```
public ActionResult YourAction(FormCollection fc)
{
     foreach (string key in fc.AllKeys)
     {
          string values = fc[key];
          string[] valueArray = values.split(',');
          string value-to-consider = valueArray[0];

          //further processing.
     }

} 
```

希望这可以帮助。

# mysql - 如何使用 LEFT OUTER JOIN 获得正确的选择计数（*）总数？

> ID：10539401
> 
> 赞同：0
> 
> 时间：2012-05-10T17:38:49.163
> 
> 标签：mysql

这是我没有 JOIN 语句的总用户。

```
mysql> SELECT COUNT(*) AS total
    -> FROM users;
+--------+
| total  |
+--------+
| 608000 |
+--------+
1 row in set (0.28 sec) 
```

与`LEFT OUTER JOIN`

```
mysql> SELECT COUNT(*) AS total
    -> FROM users
    ->        LEFT OUTER JOIN users_icon
    ->          ON users.uid = users_icon.iconuid
    ->        LEFT OUTER JOIN icon_code
    ->          ON users_icon.icondata = icon_code.iconid;
+--------+
| total  |
+--------+
| 608084 |
+--------+
1 row in set (3.78 sec) 
```

这里我有不同的总数。与`LEFT OUTER JOIN`我如何得到总数是608000？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:56:50.243

利用：

`count(distinct users.id)`得到正确的计数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:44:22.390

在这里，`LEFT OUTER JOIN`可能会产生更多的计数，因为它还会计算表中的行数`users_icon`和`icon_code`表。如果`users_icon`or`icon_code`中的相应行为空，它也将计数。这是 的行为`LEFT OUTER JOIN`。

# symfony - 如何在 Symfony 2.0.x 上安装 WhiteOctoberPagerfantaBundle

> ID：10539403
> 
> 赞同：0
> 
> 时间：2012-05-10T17:38:55.027
> 
> 标签：symfony, pagination, doctrine-orm

到目前为止，已经安装了我用于 Symfony2 的包，修改`deps`文件然后运行命令`bin/vendors install`，但是对于这个包（[WhiteOctoberPagerfantaBundle](https://github.com/whiteoctober/WhiteOctoberPagerfantaBundle)），安装过程是使用`git submodule add`我不完全理解的命令进行的。

```
git submodule add http://github.com/whiteoctober/Pagerfanta.git vendor/pagerfanta
git submodule add http://github.com/whiteoctober/WhiteOctoberPagerfantaBundle.git vendor/bundles/WhiteOctober/PagerfantaBundle 
```

我假设这个命令检索两个库的主版本，但文档说如果我使用 Symfony 2.0.x（这是我的情况）我应该得到 symfony2.0 分支：

"**注意：**如果你使用的是 Symfony2 的 2.0.x 版本，请使用这个包的 symfony2.0 分支。这个包的主分支跟踪 Symfony2 主分支。

我应该如何修改 git 命令以获取 symfony2.0 分支而不是 master？为什么有些包使用 deps 文件安装，而另一些使用 git 子模块？有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:47:55.147

您仍然可以使用 bin/vendors 和 deps 系统来安装这些包/供应商

在**部门**

```
[Pagerfanta]
    git=http://github.com/whiteoctober/Pagerfanta.git
    target=/pagerfanta

[WhiteOctoberPagerfantaBundle]
    git=http://github.com/whiteoctober/WhiteOctoberPagerfantaBundle.git
    target=/bundles/WhiteOctober/PagerfantaBundle
    version=origin/symfony2.0 
```

并重新运行`bin/vendors install`

# css - 以窗口为中心的居中背景，而不是元素

> ID：10539404
> 
> 赞同：0
> 
> 时间：2012-05-10T17:39:00.943
> 
> 标签：css, background-image

我已将`repeat-y`背景附加到我的`body`元素，虽然其他一切正常，但我注意到当窗口宽度小于 的`min-width`时`body`，背景实际上以窗口而不是`body`元素为中心。

我从 Chrome 中的元素检查器（从水平滚动条也很明显）检查了该`min-width`属性是否有效；背景只是没有相应地居中。

我正在运行最新的消费者 Chrome。这是一个浏览器错误（我肯定闻起来喜欢它）？我该如何规避它？

我做了一个小提琴；[http://jsfiddle.net/FXyMz/](http://jsfiddle.net/FXyMz/) - 使结果窗口的宽度小于 250 像素，你会看到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:45:21.653

body 元素是一种特殊情况，不会按照您希望的方式工作。

“根元素的背景成为画布的背景，其背景绘画区域延伸到整个画布，”
**在：** [http ://www.w3.org/TR/css3-background/#special-backgrounds](http://www.w3.org/TR/css3-background/#special-backgrounds)

您最好的选择可能是在身体内放置另一层，以按照您期望身体的行为方式行事。

这： http: [//jsfiddle.net/7mVNL/1/](http://jsfiddle.net/7mVNL/1/)是部分解决方案。您会看到包装器并没有像我期望的那样一直绘制到视口的底部。

# visual-studio-2010 - VS 2010 在 x64 机器上运行 Opencv240 应用程序：缺少 tbb.dll

> ID：10539406
> 
> 赞同：0
> 
> 时间：2012-05-10T17:39:05.713
> 
> 标签：visual-studio-2010, opencv

我在 Win7 x64 机器上使用 Visual Studio 2010 运行 opencv240 应用程序。该应用程序。构建正常，但运行时出现以下错误：

tbb.dll 丢失...

虽然 tbb.dll 在 C:\OpenCV-2.4.0\opencv\build\common\tbb\intel64\vc10 下可用。

有任何想法吗 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T16:47:46.967

将缺少的 dll 的路径添加到存在于下的环境变量中

win7 - mycomputer:properties->advanced system settings (to left) -> environment variables (bottom right) -> new .... 路径进入 value 列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:06:10.927

tbb 或 tbb_debug 在调试模式下运行它？在任何情况下，您都应该将其包含在您的路径中。对于 tbb_debug，它不包含在 opencv 存档中，因此可以从[http://threadingbuildingblocks.org/](http://threadingbuildingblocks.org/)手动下载。

# lotus-notes - Domino 中的身份验证和 Web 服务？

> ID：10539408
> 
> 赞同：4
> 
> 时间：2012-05-10T17:39:15.493
> 
> 标签：lotus-notes, lotus-domino, lotusscript

有没有办法允许在 Domino Web 服务中进行身份验证？如果是这样，我会怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T17:47:14.477

[IBM这里](http://www-01.ibm.com/support/docview.wss?uid=swg21295968)有一个例子。还有[其他](http://www.nsftools.com/stubby/Authentication.htm) [选择](http://www.garydev.com/gdev/garydevnew.nsf/d6plinks/GDEF-6APUBS)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T14:53:10.247

JAVA中的另一种方式是：

```
ServiceBindingStub stub = (WebServiceBindingStub) new ServiceLocator().getWebServicePort(portAddress);
stub.setSSLOptions(PortTypeBase.NOTES_SSL_ACCEPT_SITE_CERTS + PortTypeBase.NOTES_SSL_ACCEPT_EXPIRED_CERTS);

stub.setUsername(usr);
stub.setPassword(pwd); 
```

# php - 解析 ebay xml 响应

> ID：10539416
> 
> 赞同：1
> 
> 时间：2012-05-10T17:39:43.937
> 
> 标签：php, xml, ebay-api

我正在尝试在实现他们的 API 后解析 ebay 网站的 xml 结构。我得到“categoryId”元素和“currentPrice”元素的空值。请问我做错了什么。在下面找到我的 php 代码：

```
<?php

// http get url ***

$url =("http://svcs.sandbox.ebay.com/services/search/FindingService/v1?OPERATION-NAME=findItemsByKeywords&SERVICE-VERSION=1.0.0&SECURITY-APPNAME=Linkserv-9a06-4300-982e-769819b827e9&RESPONSE-DATA-FORMAT=XML&REST-PAYLOAD&keywords=shirts&paginationInput.entriesPerPage=20&paginationInput.pageNumber=1");

$xml = simplexml_load_file($url);

foreach ($xml->searchResult->item as $entry){
echo $entry->itemId;
echo $entry->title;
echo $entry->categoryId;
echo $entry->categoryName;
echo $entry->viewItemURL;
echo $entry->location;
echo $entry->currentPrice;

// Process XML file
// Opens a connection to a PostgresSQL server
$connection = pg_connect("dbname=postgres user=postgres password=xxxx");
$query = "INSERT INTO ebay(id, title, catid, category, image, location, price) VALUES ('" . $entry->itemId . "', '" . $entry->title . "', '" . $entry->categoryId . "', '" . $entry->categoryName . "', '" . $entry->viewItemURL . "', '" . $entry->location . "', '" . $entry->currentPrice . "')";

$result = pg_query($query);
pg_close();
}

?> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:45:58.160

你能试试：

```
echo $entry->primaryCategory->categoryId
echo $entri->sellingStatus->currentPrice 
```

# java - Spring Data JPA - 注入失败 - BeanCreationException：无法自动装配字段

> ID：10539417
> 
> 赞同：19
> 
> 时间：2012-05-10T17:39:58.387
> 
> 标签：java, spring, annotations, spring-data, spring-data-jpa

[我按照此处](http://blog.springsource.org/2011/02/10/getting-started-with-spring-data-jpa/)发布的教程获得了与 Spring Data JPA 一起使用的基础应用程序。现在，我如何理解，使用配置

```
<jpa:repositories base-package="my.package.to.scan" /> 
```

应该导致 Spring Data JPA 扫描该包以扩展接口`JpaRepository`并创建它的 concreate bean，以便可以使用简单的 Spring 在我的服务类中的任何地方使用它`@Autowired`。但它失败了，说它找不到带有 className 的 bean（这是 bean 在创建时获得的默认名称，只需使用去大写的 ClassName）。

但是，当我在 applicationContext 中手动配置 bean 时，如下所示：

```
<bean id="ClassName" class="my.package.to.scan.ClassName"/> 
```

Spring能够找到bean。然后我当然会得到一个错误，因为我想从一个接口创建一个 bean，这显然是行不通的。但关键是，Spring Data JPA“自动创建 bean”似乎以某种方式失败了。

我附上了相关代码，你可以看看。顺便说一句，我应该提到我正在开发一个 portlet，所以不要想知道为什么我没有 spring-config。我目前只使用一个 applicationConfig 加上一个 MyPortlet-Portlet.xml 用于 portlet 配置（但这应该与这个问题无关）。我添加了导入语句只是为了确保我没有使用错误的注释/类。

**应用程序上下文.xml**

```
<beans *** ALL MY XMLN's and XSI's *** />
<context:annotation-config />
<jpa:repositories base-package="model.repositories" />

// JPA specific configuration here: dataSource, persistenceUnitManager exceptionTranslator, entityManagerFactory, SessionFactory, transactionManager - should not be relevant for this problem, tell me if i'm wrong

<bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" /> 
```

**ICustomerService - 只是 CustomerService 的一个接口**

```
import model.entities.Customer;
public interface ICustomerService {
        // example method
    public Customer getCustomer(Long customerId);   
} 
```

**CustomerService - 我的应用程序逻辑用来获取/设置 ORM 数据的类**

```
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Transactional;
import model.entities.Customer;
import model.repositories.CustomerRepository;
import model.service.interfaces.ICustomerService;
@Repository
@Transactional(readOnly = true)
public class CustomerService implements ICustomerService{
    @Autowired
    private CustomerRepository repository;

    // example method
    @Override
    public Customer getCustomer(Long customerId){
        return repository.findById(customerId);
    } 
```

**CustomerRepository - Spring Data JPA 的存储库**

```
import javax.annotation.Resource;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.transaction.annotation.Transactional;
import model.entities.Customer;
@Resource
@Transactional(readOnly = true)
public interface CustomerRepository extends JpaRepository<Customer, Long>{

    public Customer findById(Long id);
} 
```

**客户 - 我的样本实体**

```
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name = "Customers")
public class Customer{

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    @Column(name = "ID_CUSTOMER")
    private Long    id;

    @Column(name = "dbfirstname")
    private String  firstName;

    @Column(name = "dbname")
    private String  lastName;

    public Long getId(){
        return id;
    }

    public String getFirstName(){
        return firstName;
    }

    public void setFirstName(String firstName){
        this.firstName = firstName;
    }

    public String getLastName(){
        return lastName;
    }

    public void setLastName(String lastName){
        this.lastName = lastName;
    }
} 
```

我刚从 WebSphere 的类路径地狱中走出来（该死，多么糟糕的产品），现在我在这里。希望有人可以帮助我。

一个关于究竟哪里出了问题的基本解释，也许可以更好地理解弹簧自动装配注入功能。我已经阅读了 spring 文档，但说实话：有很多方法可以配置某些东西，而我不太清楚选择其中一种配置样式时真正需要什么。

**编辑**

尝试更新项目后，我仍然收到错误消息。根据此处的要求，提供更多详细信息（跟踪）：

```
Exception created : org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'customerService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private model.repositories.CustomerRepository model.service.CustomerService.repository; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'customerRepository': FactoryBean threw exception on object creation; nested exception is java.lang.NullPointerException
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    [...]
        at com.ibm.ws.http.HttpConnection.run(HttpConnection.java:522)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1563)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private model.repositories.CustomerRepository model.service.CustomerService.repository; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'customerRepository': FactoryBean threw exception on object creation; nested exception is java.lang.NullPointerException
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 96 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'customerRepository': FactoryBean threw exception on object creation; nested exception is java.lang.NullPointerException
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:149)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:102)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1442)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:248)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    ... 98 more
Caused by: java.lang.NullPointerException
    at org.hibernate.engine.transaction.internal.jta.JtaStatusHelper.getStatus(JtaStatusHelper.java:73)
    at org.hibernate.engine.transaction.internal.jta.JtaStatusHelper.isActive(JtaStatusHelper.java:115)
    at org.hibernate.engine.transaction.internal.jta.CMTTransaction.join(CMTTransaction.java:149)
    at org.hibernate.ejb.AbstractEntityManagerImpl.joinTransaction(AbstractEntityManagerImpl.java:1215)
    at org.hibernate.ejb.AbstractEntityManagerImpl.postInit(AbstractEntityManagerImpl.java:177)
    at org.hibernate.ejb.EntityManagerImpl.<init>(EntityManagerImpl.java:89)
    at org.hibernate.ejb.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:179)
    at org.hibernate.ejb.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:174)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:600)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.invokeProxyMethod(AbstractEntityManagerFactoryBean.java:376)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean$ManagedEntityManagerFactoryInvocationHandler.invoke(AbstractEntityManagerFactoryBean.java:517)
    at $Proxy325.createEntityManager(Unknown Source)

    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:234)
    at $Proxy328.createNamedQuery(Unknown Source)
    at org.springframework.data.jpa.repository.query.NamedQuery.<init>(NamedQuery.java:74)
    at org.springframework.data.jpa.repository.query.NamedQuery.lookupFrom(NamedQuery.java:96)
    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:128)
    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:162)
    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:71)
    at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.<init>(RepositoryFactorySupport.java:303)
    at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:157)
    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:120)
    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:39)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:142) 
```

**编辑 #2** 完成 applicationContext.xml （包括我根据正在进行的讨论所做的更改）按要求添加

```
<context:annotation-config />

<jpa:repositories base-package="model.repositories" />

<context:component-scan base-package="model,model.repositories,model.service,controller" />

<bean class="model.service.CustomerService"/>
<bean class="model.service.OrderService"/>
<bean class="model.repositories.CustomerRepository"/>
<bean class="model.repositories.OrderRepository"/>

<bean id="myExceptionTranslator" class="org.springframework.orm.hibernate4.HibernateExceptionTranslator" /> 

<jee:jndi-lookup id="dataSource" jndi-name="jdbc/mydata"
    resource-ref="true" cache="true" />

<bean id="pum"
    class="org.springframework.orm.jpa.persistenceunit.DefaultPersistenceUnitManager">
    <property name="persistenceXmlLocations">
        <list>
            <value>classpath*:META-INF/OverridePersistence.xml</value>
        </list>
    </property>
    <property name="defaultDataSource" ref="dataSource" />
</bean>

<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="generateDdl" value="true" />
            <property name="database" value="MYSQL" />
        </bean>
    </property>
    <property name="persistenceUnitManager" ref="pum" />
    <property name="persistenceUnitName" value="default" />
</bean>

<bean id="mySessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="packagesToScan" value="model"/>
    <property name="hibernateProperties">
        <value>hibernate.dialect=org.hibernate.dialect.MySQLDialect</value>
    </property>
</bean>

<bean id="transactionManager"
    class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
    <property name="sessionFactory" ref="mySessionFactory" />
</bean>

<tx:annotation-driven />

<bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" /> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-13T07:37:22.380

问题很可能出在您未显示的某些配置中。如果您发布了您遇到的错误，那也会很好。它可能与您认为的不同。

关于您的配置，我注意到的一件事是您使用`context:annotation-config`的是`context:component-scan`. 后者将根据`@Component`注释系列自动检测和创建 bean。前者不这样做。

除此之外，您发布的所有内容看起来都应该可以正常工作，尽管有一些奇怪的事情，我稍后会谈到。我将您发布的所有代码复制到一个示例项目中，并填写了一些细节，例如[maven pom](https://github.com/zzantozz/testbed/blob/master/stackoverflow/10539417-basic-spring-data-jpa/pom.xml)、[persistence.xml和](https://github.com/zzantozz/testbed/blob/master/stackoverflow/10539417-basic-spring-data-jpa/src/main/resources/META-INF/persistence.xml)[applicationContext.xml](https://github.com/zzantozz/testbed/blob/master/stackoverflow/10539417-basic-spring-data-jpa/src/main/resources/applicationContext.xml)的缺失部分。我还在服务中添加了一个“创建”方法，因此它实际上会做一些事情。有了这些到位和一个主要的类来驱动这一切，这是一个可运行的例子。您可以[浏览 github 上的代码](https://github.com/zzantozz/testbed/tree/master/stackoverflow/10539417-basic-spring-data-jpa)，也可以克隆并运行它：

```
git clone git://github.com/zzantozz/testbed tmp
cd tmp/stackoverflow/10539417-basic-spring-data-jpa
mvn -q compile exec:java -Dexec.mainClass=rds.testbed.springDataJpa.SpringDataJp 
```

现在是我注意到的奇怪之处。从顶部：

*   使用给定的代码，不需要[`PersistenceAnnotationBeanPostProcessor`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/orm/jpa/support/PersistenceAnnotationBeanPostProcessor.html)您添加到`applicationContext.xml`. 它没有为你做任何事情。当然，很可能还有其他代码需要它，但您没有显示。
*   CustomerService 上的`@Repository`注释[应该用于 DAO 类](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/stereotype/Repository.html)或与数据库交互的类。服务的适当注释是[`@Service`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/stereotype/Service.html).
*   `@Resource`ICustomerRepository 上的注释主要[用于标记自动装配的字段和方法](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-resource-annotation)。我不确定是什么让你想把它放在你的存储库界面上，但它在那里没有做任何事情。
*   您的存储库不应该是`@Transactional`. 这属于你的服务，你已经得到了它，所以没关系。请注意，它仍然适用`@Transactional`于存储库上的 ，因为它只是加入了由服务启动的现有事务。
*   再次值得注意的是，您没有使用[组件扫描](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-scanning-autodetection)，即使您有`@Component`-related 注释（`@Repository`在您的服务上）。这可能会给您带来一些问题。我没有打开组件扫描，而是在示例项目中使用 XML 手动创建了服务 bean。

所以......如果这还没有向你解释什么，如果你给我一个具体的错误，我可能会解释你为什么会得到它，并告诉你如何做才能使它正确。

# javascript - javascript获取元素的标签

> ID：10539419
> 
> 赞同：57
> 
> 时间：2012-05-10T17:40:24.917
> 
> 标签：javascript, html, tags

假设这是我的 HTML：

```
<div id="foo">
<input id="goo" value="text" />
<span id="boo">
</span>
</div> 
```

我希望能够确定哪个标签属于 html 元素。

`div`id 为 "foo" = , "goo" = `input`, "boo" = `span`...的示例元素

所以是这样的：

```
function getTag (id) {
   var element = document.getElementById(id);
   return element.tag;
} 
```

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-05-10T17:41:49.230

[**HTMLElement.tagName**](https://developer.mozilla.org/en/DOM/element.tagName)

```
const element = document.getElementById('myImgElement');
console.log('Tag name: ' + element.tagName);
// Tag name: IMG
```

```
<img src="http://placekitten.com/200/200" id="myImgElement" alt="">
```

**注意**：它返回大写的标签。例如`<img />`将返回`IMG`。

# c# - 放弃互斥异常

> ID：10539420
> 
> 赞同：13
> 
> 时间：2012-05-10T17:40:28.307
> 
> 标签：c#, multithreading, multiprocessing, mutex, abandonedmutexexception

我第一次尝试使用互斥锁，并在程序的两个单独实例上执行以下代码

```
public void asynchronousCode()
    {
        using (var mutex = new Mutex(false, "mySpecialMutex"))
        {
            if (!mutex.WaitOne(1000, false))
            {
                Console.WriteLine("First check - some one locked the mutex");
            }

            if (!mutex.WaitOne(3000, false))
            {
                Console.WriteLine("Second check- some one locked the mutex");
            }
            else
            {
                Console.WriteLine("I got the mutex");
                Console.WriteLine("sleeping");
                Thread.Sleep(3000);
                Console.WriteLine("Awaking and Releasing mutex");
                mutex.ReleaseMutex();
            }
        }
    } 
```

当我运行它时，其中一个实例（我首先运行的那个）打印

```
I got the mutex
sleeping
awaking and releasing mutex 
```

另一个实例打印

```
First check - some one locked the mutex 
```

并且一旦第一个实例租用互斥锁，它就会在第二个等待语句处崩溃，但异常

```
The wait completed due to an abandoned mutex. 
```

关于为什么我得到这个异常以及如何防止它的任何想法？

解决方案：我可能应该更清楚地阅读 mdsn 文档。感谢安德鲁为我指明了正确的方向

*您可以使用 WaitHandle.WaitOne 方法来请求互斥体的所有权。拥有互斥锁的线程可以在对 WaitOne 的重复调用中请求相同的互斥锁，而不会阻塞其执行。但是，线程必须调用 ReleaseMutex 方法相同的次数才能释放互斥锁的所有权。Mutex 类强制执行线程标识，因此互斥锁只能由获取它的线程释放。*

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-10T18:39:17.103

你的问题是你持有 Mutex 两次，但只释放一次，因为你错误地安排了你的`if`陈述。您的第一次执行捕获它*两次*- 在这两个`if`语句中，但您的代码只释放它一次。

您需要重新组织`if`s 以便您只捕获一次互斥锁。

```
bool captured = true;
if (!mutex.WaitOne(1000, false))
{
        Console.WriteLine("First check - some one locked the mutex");
        captured = false;
}
if (!captured && !mutex.WaitOne(3000, false))
{
        Console.WriteLine("Second check- some one locked the mutex");
        captured = false;
}
if (captured)
{
        Console.WriteLine("I got the mutex");
        Console.WriteLine("sleeping");
        Thread.Sleep(3000);
        Console.WriteLine("Awaking and Releasing mutex");
        mutex.ReleaseMutex();
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-10T18:04:06.437

我认为你的问题出在这`using (var mutex = new Mutex(false, "mySpecialMutex"))`条线上。当第一个线程终止时，它将处理互斥对象，我相信这可能会导致您遇到错误。

如果可能，最好将互斥锁声明为该方法之外的（静态）类变量。然后，您将在启动线程之前手动实例化它，并在它们完成后将其处理掉。

# video - 编码/解码具有不同参数的 H.264 流

> ID：10539421
> 
> 赞同：0
> 
> 时间：2012-05-10T17:40:31.037
> 
> 标签：video, h.264, rtp

在点对点会话（双向）中使用 H.264 时，必须执行某种媒体协商。但是，这两个流是否可以具有不同的特征，例如不同的配置文件/级别等？毕竟，编码器和解码器是独立的，它们能够处理不同的参数集是有意义的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T08:17:51.833

h.264 元数据可以在带内或带外找到。如果您使用 rtsp 接收流，您可以在 rtsp 协商中找到数据（参见[http://www.ietf.org/rfc/rfc2326.txt](https://stackoverflow.com/questions/5512333/how-to-fragment-h264-packets-in-rtp-compliant-with-rfc3984)）。

您还需要解析 rtp 数据包并查看那里是否还有更多数据（请参阅[“如何在符合 RFC3984 的 RTP 中对 H264 数据包进行分段”](https://stackoverflow.com/questions/5512333/how-to-fragment-h264-packets-in-rtp-compliant-with-rfc3984)。

# objective-c - 正确使用 Objective C++

> ID：10539424
> 
> 赞同：2
> 
> 时间：2012-05-10T17:40:38.413
> 
> 标签：objective-c, ios, xcode, objective-c++

我正在为 iOS 编写一个应用程序，我最近在一个 Objective C 实现 (.m) 文件中#included了一个 C++ 头文件。我将扩展名从 .m 更改为 .mm，并希望一切运行顺利。

出乎意料的是，我的 C++ 类的 .h 文件中出现了多个编译器错误。

如：“C++ 要求所有声明的类型说明符”和“重复成员...”。

有谁知道这可能是什么原因造成的？

编辑 - 我为上下文添加了 C++ 头文件：

```
#ifndef __CAAudioUnitOutputCapturer_h__
#define __CAAudioUnitOutputCapturer_h__

#include <AudioToolbox/ExtendedAudioFile.h>

/*
    Class to capture output from an AudioUnit for analysis.

    example:

    CFURL fileurl = CFURLCreateWithFileSystemPath(NULL, CFSTR("/tmp/recording.caf"), kCFURLPOSIXPathStyle, false);

    CAAudioUnitOutputCapturer captor(someAU, fileurl, 'caff', anASBD);

    {
    captor.Start();
    ...
    captor.Stop();
    } // can repeat

    captor.Close(); // can be omitted; happens automatically from destructor
*/

class CAAudioUnitOutputCapturer {
public:
    enum { noErr = 0 };

    CAAudioUnitOutputCapturer(AudioUnit au, CFURLRef outputFileURL, AudioFileTypeID fileType, const AudioStreamBasicDescription &format, UInt32 busNumber = 0) :
        mFileOpen(false),
        mClientFormatSet(false),
        mAudioUnit(au),
        mExtAudioFile(NULL),
        mBusNumber (busNumber)
    {   
        CFShow(outputFileURL);
        OSStatus err = ExtAudioFileCreateWithURL(outputFileURL, fileType, &format, NULL, kAudioFileFlags_EraseFile, &mExtAudioFile);
        if (!err)
            mFileOpen = true;
    }

    void    Start() {
        if (mFileOpen) {
            if (!mClientFormatSet) {
                AudioStreamBasicDescription clientFormat;
                UInt32 size = sizeof(clientFormat);
                AudioUnitGetProperty(mAudioUnit, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Output, mBusNumber, &clientFormat, &size);
                ExtAudioFileSetProperty(mExtAudioFile, kExtAudioFileProperty_ClientDataFormat, size, &clientFormat);
                mClientFormatSet = true;
            }
            ExtAudioFileWriteAsync(mExtAudioFile, 0, NULL); // initialize async writes
            AudioUnitAddRenderNotify(mAudioUnit, RenderCallback, this);
        }
    }

    void    Stop() {
        if (mFileOpen)
            AudioUnitRemoveRenderNotify(mAudioUnit, RenderCallback, this);
    }

    void    Close() {
        if (mExtAudioFile) {
            ExtAudioFileDispose(mExtAudioFile);
            mExtAudioFile = NULL;
        }
    }

    ~CAAudioUnitOutputCapturer() {
        Close();
    }

private:
    static OSStatus RenderCallback( void *                          inRefCon,
                                    AudioUnitRenderActionFlags *    ioActionFlags,
                                    const AudioTimeStamp *          inTimeStamp,
                                    UInt32                          inBusNumber,
                                    UInt32                          inNumberFrames,
                                    AudioBufferList *               ioData)
    {
        if (*ioActionFlags & kAudioUnitRenderAction_PostRender) {
            CAAudioUnitOutputCapturer *This = (CAAudioUnitOutputCapturer *)inRefCon;
            static int TEMP_kAudioUnitRenderAction_PostRenderError  = (1 << 8);
            if (This->mBusNumber == inBusNumber && !(*ioActionFlags & TEMP_kAudioUnitRenderAction_PostRenderError)) {
                OSStatus result = ExtAudioFileWriteAsync(This->mExtAudioFile, inNumberFrames, ioData);
                if (result) DebugMessageN1("ERROR WRITING FRAMES: %d\n", (int)result);
            }
        }
        return noErr;
    }

    bool                mFileOpen;
    bool                mClientFormatSet;
    AudioUnit           mAudioUnit;
    ExtAudioFileRef     mExtAudioFile;
    UInt32              mBusNumber;
};

#endif // __CAAudioUnitOutputCapturer_h__ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:20:52.657

按照 Rob Napier 博客上的代码，我为 CAAudioUnitOutputCapturer 做了。以为我会分享它以节省其他人的时间。

RNWrap.h

```
//
//  RNWrap.h
//
//  ObjC wrapper for Wrap.cpp
//

#import <Foundation/Foundation.h>
#import <CoreFoundation/CoreFoundation.h>
#import <AudioUnit/AudioUnit.h>
#import <AudioToolbox/AudioToolbox.h>
#import <AVFoundation/AVFoundation.h>
#import <CoreAudio/CoreAudioTypes.h>

struct RNWrapOpaque;

@interface RNWrap : NSObject {
struct RNWrapOpaque *_cpp;
}

- (id) initWithAudioUnit:(AudioUnit) au andURL:(CFURLRef) outputFileURL andAudioFileTypeID:(AudioFileTypeID) fileType andAudioStreamBasicDescription: (const AudioStreamBasicDescription) asbd;
- (void) Start;
- (void) Close;
- (void) Stop;

@end 
```

RNWrap.mm

```
//
//  RNWrap.mm
//  Objective C++ Wrapper Class for CAAudioUnitOutputCapturer.h
//
//  Created by Pier 23/10/12
//  Copyright 2012 DreamUpApps. All rights reserved.
//

#import "RNWrap.h"
#import "CAAudioUnitOutputCapturer.h"

@interface RNWrap ()
@property (nonatomic, readwrite, assign) RNWrapOpaque *cpp;
@end

@implementation RNWrap
@synthesize cpp = _cpp;

struct RNWrapOpaque
{
public:
    RNWrapOpaque(AudioUnit au, CFURLRef outputFileURL, AudioFileTypeID fileType, const AudioStreamBasicDescription format) : outputCapturer(au, outputFileURL, fileType,  format, 0) {}; // note added bus number = 0 at the end
CAAudioUnitOutputCapturer outputCapturer;
};

- (id)initWithAudioUnit:(AudioUnit) au andURL:(CFURLRef) outputFileURL andAudioFileTypeID:(AudioFileTypeID) fileType andAudioStreamBasicDescription: (const AudioStreamBasicDescription) format
{
self = [super init];
if (self != nil)
{
    self.cpp = new RNWrapOpaque(au, outputFileURL, fileType, format);
}
return self;
}

- (void)dealloc
{
delete _cpp;
_cpp = NULL;

//[super dealloc];
}

- (void) Start
{
self.cpp->outputCapturer.Start();
}

- (void) Stop
{
self.cpp->outputCapturer.Stop();
}

- (void) Close
{
self.cpp->outputCapturer.Close();
}

@end 
```

你在课堂上这样使用它。

```
- (void) captureInAppAudio:(AudioUnit) auToCapture
{
AudioStreamBasicDescription destFormat; 
memset( &destFormat, 0, sizeof(AudioStreamBasicDescription) );
destFormat.mSampleRate = 44100;
destFormat.mFormatID = kAudioFormatLinearPCM;
destFormat.mFormatFlags = ( kAudioFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked | kAudioFormatFlagIsBigEndian );
destFormat.mBytesPerPacket = 2;
destFormat.mFramesPerPacket = 1;
destFormat.mBytesPerFrame = 2;
destFormat.mChannelsPerFrame = 1;
destFormat.mBitsPerChannel = 16;

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

soundPath = [documentsDirectory stringByAppendingString:@"/recording.caf"] ;
CFURLRef fileurl = CFURLCreateWithFileSystemPath(NULL, (CFStringRef)soundPath, kCFURLPOSIXPathStyle, false);
captor = [[RNWrap alloc] initWithAudioUnit:auToCapture andURL:fileurl andAudioFileTypeID:'caff' andAudioStreamBasicDescription:destFormat];

[captor Start];
} 
```

希望这对其他人有帮助！

码头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T18:36:05.793

不幸的是，如果你刚开始创建类`.mm`，任何使用该`.mm`标题的类也需要成为`.mm`. 如果你继续只改变你的类扩展，你最终会让整个项目变成 Objective-c++。如果这是您的意图，那么您可以更改构建设置以编译 Objective-c++（这对您来说可能是一个痛苦的房子）。

但是，如果您使用一些标题魔法，您将避免很多麻烦。只需确保在编译之前将您的`Compile sources as`构建属性更改为。`According to file type`

这是我对我编写的包装类所做的事情，用于将 c++ 类与我的其他 Objective-c 类隔离开来。C++ 类是`MyClass`.

**MyClassWrapper.h**

```
//declare c++ impl for Obj-C++
#ifdef __cplusplus
class CppPlanterModel;
namespace com{namespace company{namespace mypackage {class MyClass;}}}
typedef com::company::mypackage::MyClass CppMyClass;
#endif

//declare obj-c impl
#ifdef __OBJC__
#ifndef __cplusplus
typedef void CppMyClass;
#endif
#endif

@interface MyClassWrapper : NSObject {
    CppMyClass* _myClass;
}
//etc etc
@end 
```

**MyClassWrapper.mm**

```
#include "MyClass.h"
using namespace com:company:mypackage;

class CppMyClass : public MyClass {
    CppMyClass() {};
    ~CppMyClass() {};
    //other stuff you might like to have
};

@implementation MyClassWrapper
    //etc etc
@end 
```

这是我用不同的标题来处理共享`extern`内容的另一件事：

**东西.h**

```
#ifdef __cplusplus
#define FV_EXTERN       extern "C" __attribute__((visibility ("default")))
#else
#define FV_EXTERN       extern __attribute__((visibility ("default")))
#endif

FV_EXTERN const int kMyInt;
FV_EXTERN int GetAnotherInt(...); 
```

我建议阅读这篇关于包装 c++ 的博客文章（其中也有类似主题的其他博客文章的链接）：[http ://robnapier.net/blog/wrapping-c-take-2-1-486](http://robnapier.net/blog/wrapping-c-take-2-1-486)

# twitter - Twitter搜索api相同返回结果

> ID：10539425
> 
> 赞同：1
> 
> 时间：2012-05-10T17:40:48.630
> 
> 标签：twitter, twitter-search

有时即使请求参数不同，也会根据地理位置从 twitter 搜索 api获取**相同的返回值。**任何人都可以帮助我理解为什么会发生这种情况……是因为 twitter 的任何缓存问题吗？

问候， 纳文

# c# - 如何从 RSS 提要项中获取所有可能的图像 URL？

> ID：10539428
> 
> 赞同：3
> 
> 时间：2012-05-10T17:41:13.247
> 
> 标签：c#, .net, image, url, syndication-feed

我尝试使用此示例从[http://www.nydailynews.com/cmlink/NYDN.Article.rss获取图像 url](http://www.nydailynews.com/cmlink/NYDN.Article.rss)

但没有成功

你能帮我找到所有正确的方法来按`SyndicationItem`类从 RSS 提要中获取所有可能的图像 URL 吗？

[这里](https://stackoverflow.com/questions/319591/reading-non-standard-elements-in-a-syndicationitem-with-syndicationfeed)有草案解决方案，但我想应该是更通用的解决方案。

谢谢！

```
 List<RssFeedItem> rssItems = new List<RssFeedItem>();
                    Stream stream = e.Result;
                    XmlReader response = XmlReader.Create(stream);
                    SyndicationFeed feeds = SyndicationFeed.Load(response);
                    foreach (SyndicationItem f in feeds.Items)
                    {
                        RssFeedItem rssItem = new RssFeedItem();

                        rssItem.Description = f.Summary.Text;
foreach (SyndicationLink enclosure in f.Links.Where<SyndicationLink>(x => x.RelationshipType == "enclosure"))
                            {
                                Uri url = enclosure.Uri;
                                long length = enclosure.Length;
                                string mediaType = enclosure.MediaType;
                                rssItem.ImageLinks.Add(url.AbsolutePath);
                            }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T18:43:27.523

我找到了解决方案。

```
foreach (SyndicationElementExtension extension in f.ElementExtensions)
{
    XElement element = extension.GetObject<XElement>();

    if (element.HasAttributes)
    {
        foreach (var attribute in element.Attributes())
        {
            string value = attribute.Value.ToLower();
            if (value.StartsWith("http://") && (value.EndsWith(".jpg") || value.EndsWith(".png") || value.EndsWith(".gif") ))
            {
                   rssItem.ImageLinks.Add(value); // Add here the image link to some array
             }
        }                                
    }                            
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T17:50:36.300

```
XDocument xDoc = XDocument.Load("http://www.nydailynews.com/cmlink/NYDN.Article.rss");
XNamespace media = XNamespace.Get("http://search.yahoo.com/mrss/");

var images = xDoc.Descendants(media+"content")
    .Where(m=>m.Attribute("type").Value=="image/jpeg")
    .Select(m=>m.Attribute("url").Value)
    .ToArray(); 
```

- 编辑 -

```
var images = feeds.Items
     .SelectMany(i => i.ElementExtensions
                       .Select(e => e.GetObject<XElement>().Attribute("url").Value)
                )
     .ToArray(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-18T12:01:09.687

从字符串中获取图像列表

```
var text = "your text with image links";
Regex regx = new Regex("http://([\\w+?\\.\\w+])+([a-zA-Z0-9\\~\\!\\@\\#\\$\\%\\^\\&amp;\\*\\(\\)_\\-\\=\\+\\\\\\/\\?\\.\\:\\;\\'\\,]*)?.(?:jpg|bmp|gif|png)", RegexOptions.IgnoreCase);
MatchCollection mactches = regx.Matches(text); 
```

# php - 用户可以更改选择框的输入变量吗？

> ID：10539431
> 
> 赞同：0
> 
> 时间：2012-05-10T17:41:26.293
> 
> 标签：php, html

我想保护用户输入，如果是文本输入，我们可以简单地使用`filter_input`and `mysql_real_escape_string`。

我的问题是：当变量来自选择框时，我是否必须使用它们？某些狡猾的用户是否可以从浏览器更改 POST 值？

我的选择框是从数据库中动态填充的。我是否仍然需要将收到的数据（提交后）与数据库进行比较，并`mysql_real_escape_string`用于安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T17:43:27.857

当然，您需要始终确认从客户端获得的**所有数据。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T17:44:31.453

是的，有人可以更改任何表单元素的输入。像 firefox 中的 FireBug 这样简单的东西将允许我更改我的客户端网页副本上的任何源代码，并使用我更改的数据提交表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T17:48:16.753

你不能相信来自用户的**任何东西。**假设用户发送给您的所有内容都是邪恶的。您需要转义所有内容，甚至更好地使用准备好的语句/参数化查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T07:29:44.060

如果您想要一个安全的站点，您需要验证每个输入。您需要检查选择框字段是否与您的数据库值匹配以确保安全。

# javascript - JQuery UI“可选择”的默认选择问题

> ID：10539432
> 
> 赞同：0
> 
> 时间：2012-05-10T17:41:29.807
> 
> 标签：javascript, jquery

下面是我的 JS。当页面加载时，我希望它自动运行该功能，就好像它被点击一样。默认选择使其开始被选中，但不启动该功能。关于如何使它工作的任何想法？

```
$(function() {
    $( "#selectable" ).selectable({
        selected: updatefilters  
    });   
    function updatefilters(ev, ui){
        // get the selected filters
        var template, html;
        var pagego;
        if(! pagego){
        var page = 0; 
        }
        var $selected = $('#selectable').children('.ui-selected');
        // create a string that has each filter separated by a pipe ("|")
        var filters = $selected.map(function(){return this.id;}).get().join("\|");
        $.ajax({
            type: "POST",
            url: 'updatefilters',
            dataType: 'json', 
            data: { filters: filters, page: page },
            success: function(data){
                html = "Do Something";
                $('#board').html(html); 
            }
        });
    }
    $('#lets').addClass('ui-selected') 
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:50:26.973

只需在声明后调用该函数：

```
$(function() {
    $( "#selectable" ).selectable({
        selected: updatefilters  
    });   
    function updatefilters(ev, ui){
        ...
    }
    $('#lets').addClass('ui-selected');

    // none of your params are consumed in the function anyways, so you don't need to pass anything
    updatefilters(); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:44:34.820

尝试在body标签中运行函数

```
<body onload="name_of_function()"> 
```

# c# - 使用 LINQ 从字符串 [] 获得多数票？

> ID：10539438
> 
> 赞同：1
> 
> 时间：2012-05-10T17:41:48.263
> 
> 标签：c#, linq

有没有办法**在 C# 中使用 Linq**来查找数组中的大多数元素？为了让它更复杂一点，如果没有多数，它应该取第一个元素。

因此，例如对于数组`["A", "B", "B"]`，该语句的计算结果应为`"B"`。并且，对于数组`["A", "B", "C"]`，该语句的计算结果应为`"A"`。

我敢肯定还有 100 种其他方法可以做到这一点，但很好奇是否有 Linq 解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T17:44:01.187

```
var majority = array.GroupBy(x => x)
                    .MaxBy(g => g.Count())
                    .Key; 
```

在这里，我正在使用[`MaxBy`](https://stackoverflow.com/a/4888703/45914)（按照它的版本的链接，但想法很简单），您可以将其定义为扩展方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T17:43:57.403

```
string majority = yourArray.GroupBy(x => x)
                           .OrderByDescending(g => g.Count())
                           .First()
                           .Key; 
```

在线查看它：[ideone](http://ideone.com/w0xKy)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T17:45:01.303

```
var strings = new List<string>{"A", "B", "B"};

var mostCommonOrFirst = strings
    .GroupBy(s => s)
    .OrderByDescending(g => g.Count())
    .Select(g => g.Key)
    .First(); 
```

# python - python 保管箱 api 错误

> ID：10539442
> 
> 赞同：0
> 
> 时间：2012-05-10T17:41:59.347
> 
> 标签：python, api, dropbox

我在[这里按照教程](https://www.dropbox.com/developers/start/files#python)

到目前为止一切顺利，但上传示例给了我错误。编码：

```
from dropbox import client, rest, session

f = open('txt2.txt') # upload a file
response = client.put_file('/magnum-opus.txt', f)
print "uploaded:", response 
```

错误：

```
Traceback (most recent call last):
  File "dropbox_ul.py", line 4, in <module>
    response = client.put_file('/magnum-opus.txt', f)
AttributeError: 'module' object has no attribute 'put_file' 
```

我哪里做错了？

编辑：我正在尝试的新代码。这实际上来自 Dropbox 开发者网站。正如我之前所说，我确实完成了身份验证和设置：

```
# Include the Dropbox SDK libraries
from dropbox import client, rest, session

# Get your app key and secret from the Dropbox developer website
APP_KEY = 'iqxjea6s7ctxv9j'
APP_SECRET = 'npac0nca3p3ct9f'

# ACCESS_TYPE should be 'dropbox' or 'app_folder' as configured for your app
ACCESS_TYPE = 'dropbox'

sess = session.DropboxSession(APP_KEY,APP_SECRET, ACCESS_TYPE )

request_token = sess.obtain_request_token()

# Make the user sign in and authorize this token
url = sess.build_authorize_url(request_token)
print "url:", url
print "Please authorize in the browser. After you're done, press enter."
raw_input()

# This will fail if the user didn't visit the above URL and hit 'Allow'
access_token = sess.obtain_access_token(request_token)

client = client.DropboxClient(sess)
print "linked account:", client.account_info()

f = open('txt2.txt')
response = client.put_file('/magnum-opus.txt', f)
print "uploaded:", response

folder_metadata = client.metadata('/')
print "metadata:", folder_metadata

f, metadata = client.get_file_and_metadata('/magnum-opus.txt',rev='362e2029684fe')
out = open('magnum-opus.txt', 'w')
out.write(f)
print(metadata) 
```

和错误：

```
 url: https://www.dropbox.com/1/oauth/authorize?oauth_token=jqbasca63c0a84m
    Please authorize in the browser. After you're done, press enter.

    linked account: {'referral_link': 'https://www.dropbox.com/referrals/NTMxMzM4NjY5', 'display_name': 'Greg Lorincz', 'uid': 3133866, 'country': 'GB', 'quota_info': {'shared': 78211, 'quota': 28185722880, 'normal': 468671581}, 'email': 'alkopop79@gmail.com'}
    Traceback (most recent call last):
      File "dropb.py", line 28, in <module>
        response = client.put_file('/magnum-opus.txt', f)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/dropbox-1.4-py2.7.egg/dropbox/client.py", line 149, in put_file
        return RESTClient.PUT(url, file_obj, headers)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/dropbox-1.4-py2.7.egg/dropbox/rest.py", line 146, in PUT
        return cls.request("PUT", url, body=body, headers=headers, raw_response=raw_response)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/dropbox-1.4-py2.7.egg/dropbox/rest.py", line 113, in request
        raise ErrorResponse(r)
    dropbox.rest.ErrorResponse: [403] 'The provided token does not allow this operation' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:52:02.167

您尚未初始化客户端对象。再次参考教程，你会看到：

```
client = client.DropboxClient(sess) 
```

在调用客户端模块的 DropboxClient 方法之前，还必须初始化 sess 对象：

```
sess = session.DropboxSession(APP_KEY, APP_SECRET, ACCESS_TYPE) 
```

当您注册您的应用程序时，您应该拥有所有必需的参数（即，APP_KEY、APP_SECRET、ACCESS_TYPE）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-27T13:42:00.870

我遵循了您的编辑代码，一切顺利。

```
from dropbox import client, rest, session

# Get your app key and secret from the Dropbox developer website
app_key = 'enter-your-app_key'
app_secret = 'enter-your-app_secret'

ACCESS_TYPE = 'dropbox'

sess = session.DropboxSession(app_key, app_secret, ACCESS_TYPE )

request_token = sess.obtain_request_token()

# Make the user sign in and authorize this token
url = sess.build_authorize_url(request_token)
print "url:", url
print "Please authorize in the browser. After you're done, press enter."
raw_input()

# This will fail if the user didn't visit the above URL and hit 'Allow'
access_token = sess.obtain_access_token(request_token)

client = client.DropboxClient(sess)
print "linked account:", client.account_info()

f = open('/home/anurag/Documents/sayan.odt')
response = client.put_file('/sayan.odt', f)
print "uploaded:", response 
```

请注意系统上不匹配的代码中的响应和文件位置。

谢谢。

# eclipse - EGit - 创建分支时正确设置远程跟踪

> ID：10539450
> 
> 赞同：3
> 
> 时间：2012-05-10T17:42:26.990
> 
> 标签：eclipse, git-branch, egit

当我使用 EGit 从远程分支创建新分支时，我设置了错误的远程跟踪：

我从远程分支 refs/heads/master 创建本地分支 feature1 并立即推送到上游。在我的 .git/config 文件中配置了以下远程跟踪：

```
[branch "feature1"]
    remote = origin
    merge = refs/heads/master 
```

因此，拉入和推入该分支将拉出/拉入远程主分支。我希望使用以下跟踪配置：

```
[branch "feature1"]
    remote = origin
    merge = refs/heads/feature1 
```

我知道我什至可以从 EGit 修复它，但我担心我团队中的其他开发人员没有意识到这一点并将未完成的功能推送到主分支。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:30:58.223

默认情况下，从远程分支创建分支时，Egit 将采用上游分支作为合并参数。
这意味着，如果您想执行`remote/master`仅从本地分支推送的策略`master`，您可以尝试在本地执行它。

检查 Egit 是否尊重 a`git config push.default current`仅将当前分支推送到*具有相同名称*的上游分支（这实际上可能成为[git1.7.10 之后的默认策略](https://stackoverflow.com/a/9749535/6309)）。
但是，这存在确保每个开发人员在他/她的 repo 中都有该策略的问题。

（我认为您不能在“中央”存储库中强制执行它，您可以在其中添加一个像钩子一样的[服务器端](http://git-scm.com/book/ch7-3.html#Server-Side-Hooks)`update`钩子：该脚本采用正在更新的分支的名称（即这里的 ' `master`'，而不是名称下游回购中的分支，即这里' `feature1`'）

* * *

注意：[错误 378960在](https://bugs.eclipse.org/bugs/show_bug.cgi?id=378960)[Egit 3.2](https://wiki.eclipse.org/EGit/New_and_Noteworthy/3.2#Features)中已标记为已解决（2014 年 2 月）：

> 推送分支/初始推送向导简化了推送分支，还**允许为推送操作创建的新分支进行上游配置**：

![https://wiki.eclipse.org/images/6/6f/Egit-3.2-PushBranchWizard.png](../Images/39c5b92936d0806c388bd6b57e10482e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:45:44.417

也许您应该建议开发人员不要从远程跟踪分支（例如 origin/master）创建功能分支，而是从本地分支（master）创建。这样，EGit 默认不会设置任何远程跟踪。

如果您随后决定首次发布分支，那么在实施[错误 378960](https://bugs.eclipse.org/bugs/show_bug.cgi?id=378960)后应该可以设置远程跟踪（相当于 git push --set-upstream） 。

# asp.net-mvc - MVC/ENTITY 如何在模型更改后重新创建用户表？

> ID：10539455
> 
> 赞同：0
> 
> 时间：2012-05-10T17:42:51.983
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4

我正在使用 MVC4 beta 和实体框架。我正在使用代码优先设计，当我对模型类文件进行更改时，我将其设置为删除数据库并重新创建，但我的问题是默认用户表没有重新创建。如何让这些表每次都重新创建？

额外的问题：有没有办法将数据保留在未更改的表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:25:46.240

您将需要使用数据库初始化器及其[种子方法](http://msdn.microsoft.com/en-us/library/gg679410%28v=vs.103%29)

[数据库初始化器](http://msdn.microsoft.com/en-us/data/gg194002)

[创建 Code First 数据库初始化策略](http://blogs.microsoft.co.il/blogs/gilf/archive/2011/05/30/creating-a-code-first-database-initializer-strategy.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T17:42:22.513

经过一番研究，新版本的 EF 似乎支持这一点。

# mysql - MySQL分组查询优化

> ID：10539463
> 
> 赞同：4
> 
> 时间：2012-05-10T17:43:32.063
> 
> 标签：mysql, optimization, group-by, left-join

我有三个表：categories、articles和article_events，结构如下

```
categories: id, name                        (100,000 rows)
articles: id, category_id                   (6000 rows)
article_events: id, article_id, status_id   (20,000 rows) 
```

每个文章行的最高 article_events.id 描述了每篇文章的当前状态。

我正在返回一个类别表以及其中有多少篇最新事件 status_id 为“1”的文章。

到目前为止我所做的工作，但对于我的桌子大小来说相当慢（10 秒）。想知道是否有办法让这更快。据我所知，所有表都有适当的索引。

```
SELECT c.id, 
       c.name, 
       SUM(CASE WHEN e.status_id = 1 THEN 1 ELSE 0 END) article_count
FROM categories c
LEFT JOIN articles a ON a.category_id = c.id
LEFT JOIN (
    SELECT article_id, MAX(id) event_id
    FROM article_events
    GROUP BY article_id
) most_recent ON most_recent.article_id = a.id
LEFT JOIN article_events e ON most_recent.event_id = e.id
GROUP BY c.id 
```

基本上我必须加入事件表两次，因为询问 status_id 和 MAX(id) 只会返回它找到的第一个 status_id，而不是与 MAX(id) 行关联的那个。

有什么办法可以让这变得更好？还是我只需要忍受 10 秒？谢谢！

编辑：

这是我对查询的解释：

```
ID | select_type | table          | type   | possible_keys | key         | key_len | ref                  | rows   | Extra 
---------------------------------------------------------------------------------------------------------------------------
1  | PRIMARY     | c              | index  | NULL          | PRIMARY     | 4       | NULL                 | 124044 | Using index; Using temporary; Using filesort
1  | PRIMARY     | a              | ref    | category_id   | category_id | 4       | c.id                 | 3      |
1  | PRIMARY     | <derived2>     | ALL    | NULL          | NULL        | NULL    | NULL                 | 6351   |
1  | PRIMARY     | e              | eq_ref | PRIMARY       | PRIMARY     | 4       | most_recent.event_id | 1      |
2  | DERIVED     | article_events | ALL    | NULL          | NULL        | NULL    | NULL                 | 19743  | Using temporary; Using filesort 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:11:14.513

如果您可以使用 JOIN 消除子查询，它通常会执行得更好，因为派生表不能使用索引。这是您没有子查询的查询：

```
SELECT c.id, 
       c.name, 
       COUNT(a1.article_id) AS article_count
FROM categories c
LEFT JOIN articles a ON a.category_id = c.id
LEFT JOIN article_events ae1
  ON ae1.article_id = a.id
LEFT JOIN article_events ae2
  ON ae2.article_id = a.id
  AND ae2.id > a1.id
WHERE ae2.id IS NULL
GROUP BY c.id 
```

您将要试验索引并使用 EXPLAIN 进行测试，但这是我的猜测（我假设`id`字段是主键并且您使用的是 InnoDB）：

```
categories: `name`
articles: `category_id`
article_events: (`article_id`, `id`) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:11:06.727

没有尝试过，但我认为这将为数据库节省一些工作：

```
SELECT ae.article_id AS ref_article_id, 
    MAX(ae.id) event_id, 
    ae.status_id,
    (select a.category_id from articles a where a.id = ref_article_id) AS cat_id,
    (select c.name from categories c where c.id = cat_id) AS cat_name
FROM article_events
GROUP BY ae.article_id 
```

希望有帮助

编辑：

顺便说一句...请记住，连接必须遍历每一行，因此如果可以提供帮助，您应该从小端开始选择并逐步向上。在这种情况下，查询必须遍历 100,000 条记录，并连接每条记录，然后一次又一次地连接这 100,000 条记录，即使值为空，它仍然必须遍历这些记录。

希望这一切都有帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T18:20:09.547

我不喜欢`categories.id`使用该索引，因为您要选择整个表。

尝试运行：

```
ANALYZE TABLE categories;
ANALYZE TABLE article_events; 
```

并重新运行查询。

# php - 正则表达式：删除空格，但不从 < > 标签中删除

> ID：10539464
> 
> 赞同：0
> 
> 时间：2012-05-10T17:43:32.687
> 
> 标签：php, regex, string, preg-replace

多年来，我一直在为正则表达式苦苦挣扎。我需要的是从字符串中删除所有空格，而不是从 < tags > 中删除（例如，a href 标记或 img src 标记必须有空格）。

我正在用 PHP 做这件事，我正在尝试不同的解决方案（我完全是一个正则表达式的菜鸟，这让我很困惑）。到目前为止，这是我的代码的一部分：

```
$text=$_POST["text"];
$pattern = '(\<.+?\>)|\s'; 
$replace = '';
echo preg_replace( $pattern, $replace, $text ); 
```

这有什么问题？:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T17:54:02.820

首先，您忘记了正则表达式周围的分隔符。然后，正则表达式`/(\<.+?\>)|\s/`匹配标签或空格，因此您将*其中一个*`preg_replace()`替换为空字符串。

 *至少可以说，用正则表达式操作 HTML 是很困难的。如果您可以确定文件中的任何地方都没有任何`<`s 和`>`s ，除了它们分隔标记的位置，您可以查找最接近的括号（如果有）是开头括号的空格：

```
$result = preg_replace(
    '/\s+     # Match one or more whitespace characters
    (?!       # but only if it is impossible to match...
     [^<>]*   # any characters except angle brackets
     >        # followed by a closing bracket.
    )         # End of lookahead
    /x', 
    '', $subject); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T17:56:35.457

非正则表达式解决方案。

```
function remove_non_tag_space($text){
    $len = strlen($text);
    $out = "";
    $in_tag=false;
    for($i=0;$i<$len; $i++){
        $c = $text[$i];
        if($c=='<')
            $in_tag=true;
        elseif($c=='>')
            $in_tag=false;

        $out .= $c==" "? ($in_tag? $c: ""): $c;
    }
    return $out;
} 
```

在此处查看示例[http://ideone.com/oI0DI](http://ideone.com/oI0DI)*

# algorithm - 乘法的背包算法

> ID：10539469
> 
> 赞同：0
> 
> 时间：2012-05-10T17:43:54.417
> 
> 标签：algorithm, knapsack-problem

我有一组`N`数字，每个数字都有一些成本，问题是选择所有可能的数字集作为一个列表，使得它们的乘积小于某个数字`M`，根据成本总和进行排序。

例如：- 数字集是

```
(number, costOfThatNumber) : {(90, 10) , (80, 20), (60, 40), (40, 60), (15, 85)}, 
```

并且产品必须小于, `Prod <= 1000`,

可能的解决方案是： -

```
[Solution 1 :- {(15, 85), (40, 60)} :- Product = 600 (which is less than, 1000), cost = 85 + 60 = 145]
[Solution 2 :- {(15, 85), (80, 20)} :- Product = 900 and cost = 105] 
```

所以列表变成了，`{Solution2, Solution1}`。

PS：-

1.  这不是作业问题，在采访中被问到。我只被问到算法，我只能说它看起来有点类似于背包问题，但用于乘法。
2.  如果我无法正确解释问题，请原谅。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T18:28:50.743

我认为可以将问题简化为背包问题。

注意

```
x1 * x2 * ... * xn <= M <-> 
log(x1*x2*...*xn) <= log(M) <-> 
log(x1) + log(x2) + ... + log(xn) <= log(M) 
```

因此可以使用背包找到最佳解决方案：

```
weight'(item) = log(weight(item))
value(item) = value(item)
M' = log(M)
run Knapsack on the items with weight', value, M' 
```

需要更多的工作来获得所有可行的解决方案，不仅是最优的，而且由于这些解决方案的数量是指数的（`2^n`如果`M = infinity`），我怀疑甚至有伪多项式解决方案。

一个非有效的解决方案只是创建[幂集](http://en.wikipedia.org/wiki/Power_set)（包含所有可能集的集合），并检查它们中的每一个的可行性及其值，并根据它们的值将可行的解决方案存储在有序集中。[这篇文章](https://stackoverflow.com/questions/4640034/calculating-all-of-the-subsets-of-a-set-of-numbers)解释了如何获得电源组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:22:52.973

如前所述，这不是背包问题。只需按升序排序，从头开始挑选直到达到产品限制，然后根据成本重新排序。如前所述，不要求总成本应低于任何阈值或限制，因此最佳解决方案只是选择具有最小第一个元素的对。

# sql-server - 必须声明表变量

> ID：10539470
> 
> 赞同：1
> 
> 时间：2012-05-10T17:43:56.680
> 
> 标签：sql-server, tsql, data-import

我在为数据导入编写一些 SQL 语句时遇到错误。

在做数据端口时，我需要声明一些临时表变量。

我在文件的开头声明了一个表变量，并对表变量执行了一些操作（while 循环、插入和更新）。稍后在另一个 while 循环中的脚本中间，如果我访问此表变量，则脚本解析给出以下错误

> 必须声明表变量@temptable

感谢你的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T18:18:16.053

如果先前声明的变量在已执行的 SQL 代码块中不再可用，则很可能调用了 GO 语句。

根据 MSDN，“局部变量的范围是声明它的批次。”。

Go 语句“向 SQL Server 实用程序发出一批 Transact-SQL 语句结束的信号。”

建议仔细检查您的 SQL 代码中是否存在任何错误的 GO 语句。

参考：

声明 @local_variable (Transact-SQL) [http://msdn.microsoft.com/en-us/library/ms188927.aspx](http://msdn.microsoft.com/en-us/library/ms188927.aspx)

去（Transact-SQL） [http://msdn.microsoft.com/en-us/library/ms188037.aspx](http://msdn.microsoft.com/en-us/library/ms188037.aspx)

# ruby-on-rails-3 - 部分本地只能使用 local_assigns 访问，不按名称公开

> ID：10539475
> 
> 赞同：3
> 
> 时间：2012-05-10T17:44:16.583
> 
> 标签：ruby-on-rails-3, partial-views, erb, renderpartial

我将两个本地人从一个视图 ERB 传递给一个局部。两个本地人都成功地传入了 local_assigns。但是，我只能通过局部变量名使用 FormBuilder。另一个值可在我的部分中用作 local_assigns[:disable_edits]，但不能用作 disable_edits。

**_form.html.erb**

```
 <div>
    <%= f.fields_for :panels do |builder| %>
        <%= render "panel_fields", :f => builder, :disable_edits => true %>
    <% end %>
</div> 
```

**_panel_fields.html.erb**

```
<div>
<p>
    <%= local_assigns[:disable_edits] %>
</p>
<p>
    <%#= disable_edits ? 'disable edits true' : 'disable edits false' %>
</p>
<p>
    <%= local_assigns.keys %>
</p> 
```

local_assigns[:disable_edits] 导致显示“true”。

local_assigns.keys 导致显示“[:f, :disable_edits, :panel_fields]”。

取消注释三元语句会导致“#<#:0x4d58768> 的未定义局部变量或方法‘disable_edits’”

我遵循我所理解的最新建议的 Rails 语法，但尝试使用 :partial=>、:locals=>、:as=> 等进行操作无济于事。我也不认为我已经以任何方式将此作为可选参数，所以有很多关于使用 has_key 与 nil 进行测试的信息？没有帮助我。我的理解是 local_assigns 中的所有内容都应该像在局部变量中一样暴露为与哈希键同名的局部变量。

我现在正在使用 local_assigns[:disable_edits]，但想了解正在发生的事情并更正一些事情，以便我可以使用更传统的语法。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T02:09:22.747

尝试使用

```
render :partial => "panel_fields", :locals => {:f => builder, :disable_edits => true } 
```

# c# - ASP.NET 自定义服务器控件未在设计器中刷新

> ID：10539478
> 
> 赞同：2
> 
> 时间：2012-05-10T17:44:26.490
> 
> 标签：c#, asp.net, visual-studio-2010, designer, custom-server-controls

我编写了一个 ASP.NET 自定义服务器控件，我正在使用它。此控件继承自`CompositeControl`并具有在其生命周期中可以显示的不同视图。最好的类比类似于选项卡控件，其中一个控件具有许多用户可选择的视图，具体取决于用户选择的选项卡。在有人问之前，不，我的不是Tab控件，这是每个人都应该熟悉的类比。

无论如何，我希望在 Visual Studio 2010 设计器中可以选择视图。为此，我创建了一个`CompositeControlDesigner`with 操作（只需一个组合框来选择视图）。所有这些工作都很好，我什至已经在调试器中逐步完成了代码，并验证了一切都按预期启动，包括`CreateChildControls`回到主控件中，但 Visual Studio 没有刷新屏幕。如果在控件上添加/删除/修改了标签，它似乎只会刷新设计器（在这种情况下不会发生，因为它是仅限设计器的功能）

有没有人知道如何强制设计师刷新？

# python - 如何在使用 range() 函数从列表中删除项目时迭代列表？

> ID：10539479
> 
> 赞同：3
> 
> 时间：2012-05-10T17:44:29.847
> 
> 标签：python

这是我在尝试学习 python 编程时遇到的最常见的问题。问题是，当我尝试使用“range()”函数迭代列表以检查列表中的给定项目是否满足给定条件，如果是则删除它，它总是会给出“IndexError”。那么，有没有一种特殊的方法可以在不使用任何其他中间列表或“while”语句的情况下做到这一点？下面是一个例子：

```
l = range(20)
for i in range(0,len(l)):
  if l[i] == something:
    l.pop(i) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T17:47:15.477

首先，你永远不想在 Python 中迭代类似的东西。迭代实际对象，而不是索引：

```
l = range(20)
for i in l:
    ... 
```

您的错误的原因是您正在删除一个项目，因此后来的索引不复存在。

现在，您不能在循环遍历列表时修改它，但这不是问题。更好的解决方案是在这里使用[列表推导](https://www.youtube.com/watch?v=t85uBptTDYY)来过滤掉多余的项目。

```
l = range(20)
new_l = [i for i in l if not i == something] 
```

您也可以使用[builtin `filter()`，](http://docs.python.org/library/functions.html#filter)尽管在大多数情况下往往不清楚（并且在您需要的地方更慢`lambda`）。

另请注意，在 Python 3.x 中，`range()`生成的是生成器，而不是列表。

使用更具描述性的变量名称也是一个好主意——例如，我假设这里是这样的，但名称如`i`和`l`很难阅读，并且更容易引入错误。

编辑：

如果您希望更新现有列表，如评论中所指出的，您可以使用切片语法依次替换列表中的每个项目（`l[:] = new_l`）。也就是说，我认为这种情况是非常糟糕的设计。您不希望一段代码依赖以这种方式从另一段代码更新的数据。

编辑2：

如果出于任何原因，您在遍历项目时需要索引，这就是[内置`enumerate()`函数](http://docs.python.org/library/functions.html#enumerate)的用途。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T17:47:44.057

你总是可以用列表理解来做这种事情：

```
newlist=[i for i in oldlist if not condition ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T17:48:58.933

您应该从另一面来看问题：当它与“某物”相等时，将一个元素添加到列表中。列表理解：

```
l = [i for i in xrange(20) if i != something] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T17:50:06.750

*   你不应该使用`for i in range(0,len(l)):`，`for i, item in enumerate(l):`如果你需要索引，则使用，`for item in l:`如果不需要
*   你不应该操纵你正在迭代的结构。当面临这样做时，迭代一个副本而不是
*   不要命名变量 l（可能被误认为 1 或 I）
*   如果要过滤列表，请明确执行。使用`filter()`或列出推导

顺便说一句，在你的情况下，你也可以这样做：

```
while something in list_: list_.remove(something) 
```

不过，这不是很有效。但根据上下文，它可能更具可读性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T17:52:44.740

正如其他人所说，遍历列表并创建一个仅包含您想要保留的项目的新列表。

使用切片分配就地更新原始列表。

```
l[:] = [item for item in l if item != something] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T18:02:40.827

你得到 an 的原因`IndexError`是你在 for 循环中迭代时改变了列表的长度。基本上，这是逻辑...

```
#-- Build the original list: [0, 1, 2, ..., 19]
l = range(20)

#-- Here, the range function builds ANOTHER list, in this case also [0, 1, 2, ..., 19]
#-- the variable "i" will be bound to each element of this list, so i = 0 (loop), then i = 1 (loop), i = 2, etc.
for i in range(0,len(l)):
    if i == something:
        #-- So, when i is equivalent to something, you "pop" the list, l.
        #-- the length of l is now *19* elements, NOT 20 (you just removed one)
        l.pop(i)
    #-- So...when the list has been shortened to 19 elements...
    #-- we're still iterating, i = 17 (loop), i = 18 (loop), i = 19 *CRASH*
    #-- There is no 19th element of l, as l (after you popped out an element) only
    #-- has indices 0, ..., 18, now. 
```

另请注意，您正在根据列表的索引做出“弹出”决定，而不是列表的索引单元格中的内容。这很不寻常——这是你的意图吗？还是你的意思更像...

```
if l[i] == something:
    l.pop(i) 
```

现在，在您的具体示例中，`(l[i] == i)`但这不是典型的模式。

与其遍历列表，不如试试 filter 函数。它是一个内置的（就像许多其他列表处理功能：例如 map、sort、reverse、zip 等）

试试这个...

```
#-- Create a function for testing the elements of the list.
def f(x):
    if (x == SOMETHING):
        return False
    else:
        return True

#-- Create the original list.
l = range(20)

#-- Apply the function f to each element of l.
#-- Where f(l[i]) is True, the element l[i] is kept and will be in the new list, m.
#-- Where f(l[i]) is False, the element l[i] is passed over and will NOT appear in m.
m = filter(f, l) 
```

列表处理函数与“lambda”函数密切相关——在 Python 中，后者是简短的匿名函数。所以，我们可以将上面的代码重写为...

```
#-- Create the original list.
l = range(20)

#-- Apply the function f to each element of l.
#-- Where lambda is True, the element l[i] is kept and will be in the new list, m.
#-- Where lambda is False, the element l[i] is passed over and will NOT appear in m.
m = filter(lambda x: (x != SOMETHING), l) 
```

试一试，看看它是如何工作的！

# c# - 根据当前时间更改Label.Text？

> ID：10539482
> 
> 赞同：0
> 
> 时间：2012-05-10T17:44:39.517
> 
> 标签：c#, winforms

如何根据当前时间更改标签的 Text 属性？

谢谢

澄清：

我希望标签的文本在上午 10 点到下午 5 点之间阅读，然后在下午 5:01 到上午 9:59 之间阅读关闭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T17:57:04.910

使用[计时器](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)。在 Timer.Tick 处理程序中，使用基于 DateTime.Now 的简单 if/else 语句修改标签的 Text 属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T18:06:05.887

```
int hour = DateTime.Now.Hour;

if (hour >= 10 && hour < 17) 
    //Open 10:00am through 4:59pm
    LabelStatus.Text = "Open";
else
    //Closed 5:00pm through 9:59am
    LabelStatus.Text = "Closed"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T20:36:25.410

下面是一种使用更新标签的单独线程来执行此操作的方法。这样线程将在后台运行，并不断检查标签是否处于正确状态。确保在关闭表单时停止线程，或者通过使用 Thread.Abort() 并捕获我认为总是抛出的异常，或者通过在 while 循环中添加标志作为条件，然后降低标志以停止线。

只要没有其他对象访问标签，就不需要锁定线程的任何部分。

```
 public delegate void DelLabelText(Label l, string s);
    public DelLabelText delLabelText;

    public Form1()
    {
        InitializeComponent();

        delLabelText = Label_Text;

        // Initialize text
        lblOpenStatus.Text = "Closed";

        // Create and start thread
        Thread threadUpdateLabel = new Thread(UpdateLabel_Threaded);
        threadUpdateLabel.Start();
    }

    // Thread function that constantly checks if the text is correct
    public void UpdateLabel_Threaded()
    {
        while (true)
        {
            Thread.Sleep(5000);

            // 24 hour clock so 17 means 5
            if ((DateTime.Now.Hour >= 10 && DateTime.Now.Hour < 17) || (DateTime.Now.Hour == 17 && DateTime.Now.Minute == 0 && DateTime.Now.Second == 0))
            {
                if (lblOpenStatus.Text.ToLower() == "closed")
                {
                    Label_Text(lblOpenStatus, "Open");
                }
            }
            else
            {
                if (lblOpenStatus.Text.ToLower() == "open")
                {
                    Label_Text(lblOpenStatus, "Closed");
                }
            }
        }
    }

    // Set the text using invoke, because text is changed outside of main thread
    public void Label_Text(Label label, string text)
    {
        if (label.InvokeRequired)
        {
            label.Invoke(delLabelText, new object[] { label, text });
        }
        else
        {
            label.Text = text;
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T17:55:17.780

在表单中添加一个计时器并将其间隔设置为 1000 毫秒。

声明一个不可见的 TextBox，其当前时间的毫秒数由 Timer on Every Tick 更新..

现在在文本框的 TextBox.TextChanged 事件上添加一个函数以将毫秒转换为时间...

下一个方法是添加一个计时器并将间隔设置为 1 毫秒...

从那里更新时间..

下一个方法，正在添加一个 BackgroundWorker 并将其用作 Timer 来更新时间......

如果您发现上述任何方法有用...评论，我会发布代码！:)

# vb.net - 有没有更好的方法来计算文本文件中的行数？

> ID：10539483
> 
> 赞同：11
> 
> 时间：2012-05-10T17:44:41.693
> 
> 标签：vb.net, visual-studio-2010, text-files, streamreader

下面是我一直在使用的。虽然它确实有效，但我的程序在尝试计算一个相当大的文件时锁定，比如 10,000 行或更多行。较小的文件立即运行。

有没有更好的或者我应该说更快的方法来计算文本文件中的行数？

这是我目前正在使用的：

```
 Dim selectedItems = (From i In ListBox1.SelectedItems).ToArray()
    For Each selectedItem In selectedItems
        ListBox2.Items.Add(selectedItem)
        ListBox1.Items.Remove(selectedItem)

        Dim FileQty = selectedItem.ToString
        'reads the data file and returns the qty
        Dim intLines As Integer = 0
        'Dim sr As New IO.StreamReader(OpenFileDialog1.FileName)
        Dim sr As New IO.StreamReader(TextBox1_Path.Text + "\" + FileQty)
        Do While sr.Peek() >= 0
            TextBox1.Text += sr.ReadLine() & ControlChars.CrLf
            intLines += 1
        Loop
        ListBox6.Items.Add(intLines)
    Next 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-10T17:47:29.203

```
Imports System.IO.File 'At the beginning of the file

Dim lineCount = File.ReadAllLines("file.txt").Length 
```

看到[这个](https://stackoverflow.com/questions/119559/determine-the-number-of-lines-within-a-text-file)问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T17:49:27.597

即使您尽可能高效地进行迭代，如果您将其交给一个足够大的文件，您也会让应用程序在执行工作时冻结。

如果您想避免锁定，您可以生成一个新线程并异步执行工作。如果您使用的是 .NET 4.0，您可以使用[Task](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)类来简化此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-31T23:06:43.980

```
TextBox2.Text = File.ReadAllLines(scannerfilePath).Length.ToString() 
```

# javascript - AJAX，在服务器端 JavaScript 之前处理客户端 JavaScript？

> ID：10539497
> 
> 赞同：0
> 
> 时间：2012-05-10T17:45:57.170
> 
> 标签：javascript, ajax, client-side, server-side

我有一个关于如何处理客户端代码以及服务器端响应的问题。我有一些代码（太复杂且太长，无法在此处发布），当它运行时，会调用一个函数，该函数使用 HTTPRequest 对象运行一些服务器端代码，并向调用该函数的页面返回一个字符串。出于某种原因，我认为正在处理客户端代码，返回字符串（为时已晚）并且我的代码因此而失败。例如，我使用 HTTPRequest 调用我的函数，下一行我尝试在警报中显示返回值（来自 HTTPRequest 的字符串），并且警报显示为空白。不过，在代码后面的几行代码中，返回的值会显示相同的警报。所以，基本上，我的印象是第一个客户端警报正在处理中，因此它显示一个尚未返回的字符串，而第二个警报稍后处理，（ergo。给服务器时间来处理请求）并显示请求的字符串。这个理论听起来合乎逻辑吗？无论 HTTPRequest 是否完成，客户端代码都会运行吗？如果是这样，有什么方法可以阻止客户端代码在从服务器收到响应之前执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:48:53.493

HTTP 请求是异步的。这意味着您的代码将发送它并继续执行它。您需要设置一个回调函数来获取 XHR 请求返回的数据，并以某种方式使用该数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T13:28:48.853

您需要确保尝试显示/作用于返回值的代码位在 ajax 例程的范围内。这是保证在请求完成（无论成功与否）之前不会对响应采取行动的唯一方法。例如，如果您使用的是 jQuery： **CORRECT**

```
jQuery.get('ajax/ajax.getSomeData.php',{id:id}, function(data) {
    $('#myDIV').html(data);
}); 
```

**不正确**

```
jQuery.get('ajax/ajax.getSomeData.php',{id:id}, function(data) {});
$('#myDIV').html(data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T17:51:16.923

您需要将匿名函数绑定到 XmlHttpRequest 对象的 onreadystatechange 事件，以便：

```
//xhr is an instance of the XmlHTTPRequest object that you have opened correctly
xhr.onreadystatechange = function(){  //4 means the request was successful
  if (xhr.readyState === 4){
    //Your code here
  }
} 
```

# android - 如何让“安卓解锁”应用更安全地抵御破解？

> ID：10539499
> 
> 赞同：9
> 
> 时间：2012-05-10T17:46:02.983
> 
> 标签：android, security, reverse-engineering, cracking

对于我的应用程序的付费版本，我选择解锁器应用程序路线，因为它易于实现，允许在开发者控制台中进行单独的统计，但主要是因为我不需要维护 2 个代码库（一个用于免费版本和另一个用于付费版本）。即使我使用了 CVS（我确实这样做了），继续合并功能和错误修复仍然会让人头疼。解锁器应用程序整体上更容易实现......

但这有一个严重的缺点，很容易超过安全检查；除非我在这里遗漏了什么。

无论我做什么，这样的实现总是会导致一个简单的`if`，像这样：

```
if(Program.isPremiumVersion()) {
    // Remove ads...
} 
```

该`isPremiumVersion()`方法负责检查付费解锁应用程序安装的所有工作，如果证书匹配等等。是的，解锁器应用程序受 LVL 保护（虽然我读过一些文章提到 LVL 是多么不安全，但这不是现在的重点）。但最终，无论里面的代码`isPremiumVersion()`变得多么复杂，它总是导致返回一个`true`或`false`值。

覆盖此类安全功能只是对代码进行逆向工程并使其始终返回的问题`true`。不是吗？我们如何保护我们的 Android 应用免受这种情况的影响？是的，代码被 ProGuard 混淆了。不过，对于足够熟练的人来说应该不会太难。

请注意，我不是想和饼干打架，我们根本就赢不了。我不会为此失眠，在“完美解决方案”上浪费无数时间。我只是在寻找一种让它更安全的方法。至少在理论上，这似乎很容易破解。我错了吗？

有什么想法可以提高此类功能的安全性吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T21:54:15.297

没有简单的方法可以解决这个问题。

你必须尝试掩盖它。这里有一些提示：

**提示 1：**返回布尔值太明显了。尝试返回一个值（例如 int）。然后，使用比较来查看这是否是一个有效的已知返回值。

例如：获取包含某些内容的字符串的 md5，您可以从中判断它是否是优质的。假设您在每个应用程序上都有一个静态的最终字符串。也许一个的 md5 以 9 开​​头，另一个以 1 开头。在这种情况下，计算 md5 并查看它是否大于您知道它位于其他两个数字之间的“随机”数字。假设“premium”的md5是987，“free”的md5是123，可以计算md5和456比较。

**提示 2** - 更好：复制一些代码并每次使用不同的值（而不是 456）！希望这将使解码混淆代码变得更加困难。

我知道所有这些检查最终都会被映射到一个布尔值（`if(1 > 2)`将被评估为`if(true)`），但是对你的应用程序进行逆向工程应该会更加困难。

**提示 3**：不要在最明显的地方检查“isPremium”。例如，不要在启动应用程序时进行检查，因为这是最明显的地方。如果您想根据应用程序的版本使用条件逻辑，可能很难避免某些明显的地方，但请在这里尽力而为！

**提示 4：**构建和混淆您的应用程序。针对您的 apk 运行逆向工程工具。阅读它，看看它的外观。

**最后**，每天早餐时观看这个 Google IO 演示：[使用许可证验证库、应用内计费和 App Engine 逃避海盗和阻止吸血鬼](http://www.google.com/events/io/2011/sessions/evading-pirates-and-stopping-vampires-using-license-verification-library-in-app-billing-and-app-engine.html)

**[编辑-更多提示]**

**提示 6：**尝试使用您使用的代码检查完全有效的位置。这可能会掩盖你在那里真正做的事情。这可能包括调用代码来检查这是哪个版本的应用程序，但没有做任何有意义的事情。或者，在我之前的示例中，将 md5 与 012 或 999 进行比较，只是为了稀释这些变量的实际用途。

**提示 7：**您可以考虑在运行时构造字符串，而不是依赖单个字符串。决赛和静态也可能会引起太多关注，因此避免这些可能是一件好事。

**提示 8：****永远**不要使用谷歌教程中提供的 LVL 代码。修改它。很多！

*注意：*我不确定这些技巧中的任何一个是否真的会产生很大的不同，但你应该有很好的机会至少让饼干的生活变得更加艰难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:11:14.030

您可能已经看到了这一点，但这里有一些代码用于实现您所谈论的内容：

[http://groups.google.com/group/android-developers/browse_thread/thread/4ad3d67f735f16d7/948b4f9eee2490a3?pli=1](http://groups.google.com/group/android-developers/browse_thread/thread/4ad3d67f735f16d7/948b4f9eee2490a3?pli=1)

它检查免费和解锁应用程序上的签名是否相同。因此，某人不可能人为地创建具有正确名称的应用程序，因为签名会有所不同。但是，人们仍然有可能从手机上撕下 apk 并分发它。解决这个问题的唯一方法是使用某种服务器身份验证，但这会增加成本和复杂性。

# javascript - 用于 Ubuntu 的 Nitrotasks 应用程序是用哪种语言开发的？

> ID：10539500
> 
> 赞同：-2
> 
> 时间：2012-05-10T17:46:11.060
> 
> 标签：javascript

我需要知道 nitrotasks 是用哪种语言开发的。我刚刚从[https://github.com/stayradiated/Nitro/](https://github.com/stayradiated/Nitro/)下载了他们的源代码。它只是 html、css 和 js。他们是如何使用它创建 Ubuntu 应用程序的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:55:24.240

您可能会问他们是如何使用看起来像 HTML/CSS/JS 的东西制作桌面应用程序的。他们没有。

您链接到的源代码是 Nitro for web，它是一个 Chrome 扩展程序。

桌面版本的源代码不同，托管在启动板：

*   [Nitrotasks 桌面](https://launchpad.net/nitrotasks/)项目页面
*   [Nitrotasks 桌面源代码](https://launchpad.net/nitrotasks/trunk/1.2.5/+download/nitrotasks_1.2.5.tar.gz)下载链接

[桌面版是一个 Python 应用程序，从浏览代码](http://bazaar.launchpad.net/~cooperjona/nitrotasks/quickly_trunk/files/head:/nitrotasks/)中可以看出。

它有类似的文件`NitroTasksWindow.py`，并使用 GTK 进行窗口化。

# mysql - 在 MySQL 中选择不为空的 DISTINCT

> ID：10539502
> 
> 赞同：2
> 
> 时间：2012-05-10T17:46:18.003
> 
> 标签：mysql, sql, select, null, distinct

我有一张桌子，例如，`ID`和`Name`。

有多个行包含空白名称，但也可以有多个具有相同名称的行。我想选择所有`ID`的，每个名字只计算一次（`DISTINCT`），但选择所有的空白。

下面的查询自然只选择一个空白名称。**如何选择所有不同的名称以及所有空白名称？**

```
SELECT DISTINCT Name, ID
FROM TestTable 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T17:48:10.560

```
SELECT DISTINCT Name, ID FROM TestTable where Name <> ''
union all
SELECT Name, ID FROM TestTable where Name = '' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:59:31.090

我能想到的唯一轻微改进是：

```
SELECT DISTINCT Name, ID FROM TestTable where Name <> ''
union all
SELECT '', ID FROM TestTable where Name IS NULL OR Name = '' 
```

# ruby-on-rails - 对 RESTful API 执行 update_attributes 时如何更改 XML 标记？

> ID：10539504
> 
> 赞同：1
> 
> 时间：2012-05-10T17:46:35.040
> 
> 标签：ruby-on-rails, activeresource

我有一个非 Rails RESTful API，我可以轻松地使用 ActiveResource 连接到它，并且在我进行查找时获取数据很简单。但是，更新数据并不那么简单。我认为这是因为 API 希望将 XML 主体包装在这个非标准 XML 标记中， `<platform_user>`而不是`<hash>`GET 请求被包装在哪个标记中。

在执行 update_attributes 时如何修改基本 XML 模板，以便它可以包含`<platform_user>`?

通常，我找不到太多关于以这种方式使用 ActiveResource 的指导。有什么书或网站可以指点我吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T23:53:29.237

如果您的问题将通过简单地重命名或包装在父节点中来解决，我实际上会感到非常惊讶，并且我假设您在接近解决方案时会遇到更多的服务问题。我（不幸的是）以前曾在这艘船上，所以我正在写我学到的东西。

一般来说，当服务需要一些复杂或丑陋的 XML 时，我发现通过 ActiveResource 处理服务有点困难。在这些情况下，我的解决方案不可避免地会覆盖对象的 to_xml 方法，因为创建 (POST) 或更新 (PUT) 应该在内部调用对象的 to_xml 以将数据序列化为 XML。所述方法可以使用 ruby​​ 的 xml 构建器，或者您也可以使用“此处文档”来处理更棘手的内容。我认为底线是，您必须**确切地**知道您的服务期望什么，并构建该结构以发送给服务。

例如使用 'here document' 来强制使用不友好的 xml 结构：

```
class User << ActiveResource::Base

  def to_xml
    xml =<<-EOS
      <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
      <platform_user>
        <user xsi:type="userData" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <userId>#{self.id}</userId>
          <userName>#{self.name}</userName>
          <addresses>
            <address>
              <address1>#{self.address1}</address1>
              <addressZip>#{self.zip}</addressZip>
            </address>
          </addresses>
        </user>
      </platform_user>
    EOS
    xml.gsub(/\n|\t|\r/,"").strip #clean it up.
  end
end 
```

您也可以使用 XML Builder 它适用于您的结构，例如：

```
def to_xml
  xml = Builder::XmlMarkup.new()
    xml.instruct! :xml, :version => "1.0", :encoding => "UTF-8", :standalone=>"yes"
    xml.platform_user do
        xml.user do
          xml.userId self.id
          ...
        end
    end
end 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:51:14.630

尝试为 PlatformUser 创建一个类。

```
class PlatformUser < ActiveResource::Base 
```

然后使用这些值来设置此对象中的属性，而不是填充散列。

改变

```
platform_user_data = { :name => "foo", :level => 15 } 
```

到

```
platform_user_attrs = { :name => "foo", :level => 15 }
platform_user = PlatformUser.new(platform_user_attrs) 
```

# javascript - Web方法和复杂对象类型问题

> ID：10539505
> 
> 赞同：1
> 
> 时间：2012-05-10T17:46:34.853
> 
> 标签：javascript, jquery, asp.net, webmethod

我在.NET 中有一个返回对象列表的网络方法。

```
[System.Web.Services.WebMethod(enableSession: true)] 
public static List<CourseItem> GetItems() { 
    return (new MTE()).GetItems(); 
} 
```

和 CourseItem 对象如下：

```
public static CourseItem {
    public string CourseNum { get; set; }
    public string Desc { get; set; }
} 
```

我从 javascript 中使用 webmethod，如下所示：

```
function GetCourses_Success(result) {
    // Problem starts here
    if (result.d != null) {
        for (i = 0; i < result.d.length; i++) {
            alert(result.d[i]["CourseNum"]);
} 
```

**问题：** 警报有时会显示“NaN”而不是实际的课程编号。问题与大多数课程编号只是数字这一事实有关，但偶尔会有课程编号是一个末尾带有星号的数字（例如 - 111234* 或 999234*）。因此，在 webmethod 和警报之间的某个地方，有些东西试图过于聪明，并认为 CourseNum 是一个数字字段（也许是整数），而实际上它只是一个字符串。

我也试过

```
result.d[i]["CourseNum"].toString() 
```

但警报仍然显示“NaN”

在此先感谢您的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:28:34.610

尝试转义星号。Javascript 很可能认为您正在成倍增加。正如你所说的那样，某些东西（Javascript）太聪明了。

# javascript - 这个简单的 Safari 扩展代码有什么问题？

> ID：10539510
> 
> 赞同：3
> 
> 时间：2012-05-10T17:46:49.920
> 
> 标签：javascript, jquery, safari

我正在创建一个 Safari 扩展，它将保留在 Safari 的菜单栏中，单击后，它将打开包含某个字符串的所有链接。但是，它不起作用。

这是我的扩展生成器屏幕的样子：http: [//i.imgur.com/xRXB1.png](http://i.imgur.com/xRXB1.png)

我没有设置任何外部脚本，因为我的 HTML 文件中有脚本，因为我只希望它在单击时运行。

我有一个 global.html 页面，其中包含以下代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
    <head>
        <script type="text/javascript" src="jquery.js"></script>
    </head>
    <body>
        <script>
            safari.application.addEventListener("comnand", performCommand, false);

            Function performCommand(event) {  
                if (event.command == "open-designs") {  
                    $(document).ready(function() {
                        $('a[href*="/Create/DesignProduct.aspx?"]').each(function() {
                            window.open($(this).attr('href'),'_blank');
                        });
                    });
                }  
            }
        </script>
    </body>
</html> 
```

这不应该工作吗？我可以混合使用 jQuery 和 JS 编写，因为 jQuery 是 JS？这不是我如何定位链接吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T12:32:22.873

问题是您的扩展全局页面无法直接访问当前加载页面的 DOM。为了能够实现您的需求，您必须使用[注入脚本](http://developer.apple.com/library/safari/#documentation/Tools/Conceptual/SafariExtensionGuide/InjectingScripts/InjectingScripts.html)并使用[消息代理与页面对话](http://developer.apple.com/library/safari/#documentation/Tools/Conceptual/SafariExtensionGuide/AddingExtensionToolbars/AddingExtensionToolbars.html#//apple_ref/doc/uid/TP40009977-CH5-SW7)。

例如，您的全局看起来像：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
    <head>
        <script type="text/javascript" src="jquery.js"></script>
    </head>
    <body>
        <script>
            $(document).ready(function() {
                safari.application.addEventListener("command", performCommand, false);
            });

            function performCommand(event) {  
                if (event.command == "open-designs") { 
                    safari.application.activeBrowserWindow.activeTab.page.dispatchMessage("open-designs", "all");
                }  
            }
        </script>
    </body>
</html> 
```

然后，在 Extension Builder 中，您需要添加两个“启动脚本”，一个是 jquery，另一个是加载到页面中的新文件，看起来类似于：

```
function extensionname_openAll(event)
{
    if (event.name == 'open-designs')
    {
        $('a[href*="/Create/DesignProduct.aspx?"]').each(function(index,elem) {
            window.open($(elem).attr('href'),'_blank');
        });
    }
}
safari.self.addEventListener("message", extensionname_openAll, true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T17:55:20.277

1.  我看到的一件清楚的事情是您的`$(document).ready()`函数位于另一个函数中。这从本质上减轻了对`$(document).ready()`只在 DOM 和 jQuery 完全加载后调用该函数的需求。

    重新排列代码以仅在加载 DOM 和 jQuery 后添加事件侦听器。 **这**就是您使用`$(document).ready()`回调的目的。

2.  此外，我还看到 `.each()`. 该函数需要处理两个参数，索引和它引用的元素。`each()` 对元素集合的迭代调用。对于进入回调函数的每个元素，其索引以及位于该索引处的元素本身作为参数传递。查看[文档](http://api.jquery.com/jQuery.each/)以获取更多信息。

```
$(document).ready(function() {
 safari.application.addEventListener("command", performCommand, false);
 console.log("Document is ready to go!");
});

function performCommand(event) {  
  console.log("event recieved");
  if (event.command == "open-designs") {     
    console.log("got 'open-designs' event");
    $('a[href*="/Create/DesignProduct.aspx?"]').each(function(index,elem) {
      console.log("opening window", index, elem);
      window.open($(elem).attr('href'),'_blank');
    });
  }  
} 
```

您使用`$(document).ready()`回调作为 DOM 已准备好并且 jQuery 已初始化的指示。一旦你知道一切准备就绪，你就可以设置你的事件监听器了。`performCommand()`在添加监听器之前不能调用该函数（除非有其他引用）。

# r - 当 sd 参数包含向量时，R 中的 rnorm 返回什么？

> ID：10539514
> 
> 赞同：4
> 
> 时间：2012-05-10T02:41:45.337
> 
> 标签：r

以下代码有什么作用：

```
rnorm(10, mean=2, sd=1:10) 
```

第一个数字来自 N(2,1)

第二个数字如果来自 N(2,2)

第三个数字来自 N(2,3)

ETC...？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T02:46:32.590

第一个参数告诉 R 你想要返回多少随机变量。在这种情况下，它将返回 10 个值。这些值将来自均值等于 2 的正态分布。此外，所有 10 个值都将来自具有不同标准差的分布，第一个 SD=1，第二个 2，...，第 10 个 SD=10 . 也许要理解的是`R`，就其本质而言，它是*矢量化*的。也就是说，没有标量之类的东西，只有长度= 1的向量。（我认识到这在纯数学中没有多大意义，但在计算机科学中确实如此。）因此，参数经常被“回收”，以便它们都匹配最长向量的长度，即，您最终会得到一个包含 10 个均值的向量，每个均等于 2，以匹配您的 10 个 SD 向量。HTH。

# rubygems - google_drive-0.3.0 与 nokogiri 冲突

> ID：10539516
> 
> 赞同：0
> 
> 时间：2012-05-10T17:47:05.100
> 
> 标签：rubygems

我刚刚安装了 roo gem，当我尝试运行 ruby​​ 脚本时，出现以下错误：

```
/usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/1.9.1/rubygems/specification.rb:1615:in `raise_if_conflicts': Unable to activate google_drive-0.3.0, because nokogiri-1.5.2 conflicts with nokogiri (!= 1.5.1, != 1.5.2, >= 1.4.4) (Gem::LoadError)
    from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/1.9.1/rubygems/specification.rb:738:in `activate'
    from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/1.9.1/rubygems/specification.rb:764:in `block in activate_dependencies'
    from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/1.9.1/rubygems/specification.rb:758:in `each'
    from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/1.9.1/rubygems/specification.rb:758:in `activate_dependencies'
    from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/1.9.1/rubygems/specification.rb:742:in `activate'
    from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/1.9.1/rubygems/specification.rb:764:in `block in activate_dependencies'
    from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/1.9.1/rubygems/specification.rb:758:in `each'
    from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/1.9.1/rubygems/specification.rb:758:in `activate_dependencies'
    from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/1.9.1/rubygems/specification.rb:742:in `activate'
    from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/1.9.1/rubygems.rb:209:in `rescue in try_activate'
    from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/1.9.1/rubygems.rb:206:in `try_activate'
    from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/1.9.1/rubygems/custom_require.rb:58:in `rescue in require'
    from /usr/local/Cellar/ruby/1.9.3-p125/lib/ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
    from Untitled.rb:8:in `<main>' 
```

有谁知道如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:13:19.870

显然 google_drive 不支持 nokogiri 1.5.2。我只需要卸载 nokogiri 1.5.2 并重新安装 1.5.0 即可解决错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T19:45:55.513

您的 get 文件的 nokogiri 行应如下所示：

```
nokogiri, "1.5.0" 
```

然后从命令行运行

```
bundle install 
```

然后运行

```
bundle update 
```

然后通过命令行将目录更改为运行脚本的目录并键入

```
gem uninstall nokogiri 
```

您将收到一个提示，询问您要安装哪个版本。必须卸载 1.5.1 和 1.5.2。如果两者都安装了，则需要运行 gem uninstall nokogiri 两次。

一旦我完成了所有这些，它在 1.9.3-p125 中对我有用。

仅仅通过将我在 bundler 中的 gem 版本设置为 1.5.0并*不能*正常工作，它还是使用了更新的 nokogiri 版本。

# java - 我可以使用 PageIndicator 中的哪个事件来单击当前选项卡？

> ID：10539518
> 
> 赞同：0
> 
> 时间：2012-05-10T17:47:06.910
> 
> 标签：java, android

即使当前选项卡是相同的单击选项卡，我也必须捕获选项卡单击事件。我尝试了 setOnPageChangeListener，但没有调度任何事件。指标的 onClick 和 onTouch 也不会调度。我怎样才能做到这一点？

我正在使用来自 Jake Wharton 的 TabPageINdicator

谢谢

# javascript - jquery offset() 在 Firefox 12 中的 each() 中返回空字符串

> ID：10539524
> 
> 赞同：2
> 
> 时间：2012-05-10T17:47:19.283
> 
> 标签：javascript, jquery, firefox, each, offset

[http://jsfiddle.net/suenot/3b3XM/1/](http://jsfiddle.net/suenot/3b3XM/1/)

```
// in FF and IE each() don't work offset()
// $(this).offset().top return empty string
$(document).ready(function(){
    var index = 0;
    $('.box').each(function(){
        var background = $(this).css('background');
        $(this).css('background', 'none');
        var height = $(this).css('height');
        var top = $(this).offset().top;
        $('body').prepend('<div id="box' + ++index + '"></div>');
        $('#box' + index).css({
            'height': height,
            'background': background,
            'position': 'absolute',
            'z-index': '-1',
            'top': top,
            'width': '100%'
        });
    });
});​ 
```

请帮助我，我找不到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:00:32.787

我不确定是否`$(this).css('background-color');`是您想要的，但在更新后它会显示该框。[在小提琴](http://jsfiddle.net/skram/3b3XM/4/)中查看输出

```
$(document).ready(function(){
    var index = 0;
    $('.box').each(function(){
        var background = $(this).css('background-color');
        $(this).css('background', 'none');
        var height = $(this).css('height');
        var top = $(this).offset().top;
        $('body').prepend('<div id="box' + ++index + '"></div>');
        $('#box' + index).css({
            'height': height,
            'background': background,
            'position': 'absolute',
            'z-index': '-1',
            'top': top,
            'width': '100%'
        });
    });
}); 
```

# c# - 我需要2个比较器吗 用于双向排序？

> ID：10539525
> 
> 赞同：4
> 
> 时间：2012-05-10T17:47:20.373
> 
> 标签：c#, sorting, .net-4.0

如果我`Comparer<T>`为了对一组对象进行排序而创建一个，是否有一种简单的方法可以“反转”它，以便我可以在另一个方向进行排序？或者我是否需要`Comparer<T>`在比较方法中交换测试来定义第二个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T17:59:33.363

```
public class ReverseComparer<T> : Comparer<T>
{
    private Comparer<T> inputComparer;
    public ReverseComparer(Comparer<T> inputComparer)
    {
        this.inputComparer = inputComparer;
    }

    public override int Compare(T x, T y)
    {
        return inputComparer.Compare(y, x);
    }
} 
```

这使您可以执行以下操作：

```
list.Sort(new ReverseComparer(someOtherComparer)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T17:51:57.283

这不是有效的代码，但您可以`Reverse`在 sort 后使用`Comparer<T>`：

```
var ordered = theList.Sort(new FooComparer()).Reverse(); 
```

* * *

由于您标记了您的问题，因此`.Net4`
您可以使用`LINQ` `OrderBy`and `ThenBy`，因此您甚至不需要`Comparer<T>`...

```
var ordered = theList.OrderBy(x => x.First).ThenBy(x => x.Second);
var reverseOrdered = theList.OrderByDescending(x => x.First)
                            .ThenByDescending(x => x.Second); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T17:51:01.213

您可以使用相同的`Comparer<T>`，只是当您需要反转结果时，您可以简单地使用`myList<T>.Reverse()`方法。

# c# - 关闭并从另一个类引用时表单不会变为空

> ID：10539526
> 
> 赞同：2
> 
> 时间：2012-05-10T17:47:20.727
> 
> 标签：c#, winforms

我需要帮助解决以下问题。

我正在创建一个带有 MDI 接口的 Windows 窗体应用程序。在我的应用程序中，我创建了一个基本上处理所有子表单的所有打开/关闭的类，我们称之为**FManage**。此外，它还检查表单实例是否打开。如果是这样，它不会让用户打开表单的另一个实例。这就是我的问题所在。当用户要求打开一个窗口时，**FManage**如下代码：

```
if (frm1 == null)
{
    frmOne = new frm1();
    frmOne.MdiParent = Main.ActiveForm; //Main is the parent form
}
frmOne.Show(); 
```

现在，当第一次打开窗口时，这段代码可以正常工作。假设**frm1**已关闭并要求再次打开。再次执行上面的代码，但是，**frm1**不等于 NULL。**我在FManage**类的上述代码中设置了一个断点，它显示**frm1** != null，即使**frm1**已关闭。我认为问题在于**frm1**，因为它作为引用存储在**FManage**中，所以没有告诉**FManage**它为空。**FManage**只存储表单的初始状态，类似于静态变量。我是 OOP 的新手，我真的在寻找解决这个问题的最佳方法。

我的第一个解决方案是在**frm1**关闭之前，可能在 FormClosing 事件中，将消息发送回**FManage**类以将**frm1**设置为 null；但是，为了做到这一点，**frm1**类需要了解**FManage**，而现在它不知道。**FManage**知道**frm1**，而不是相反。分享不是相互的。仅供参考，**frm1**定义为我的类定义后的方法：

```
public class FManage
{
    frmOne frm1;
 ...
} 
```

任何有关如何解决此问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T17:59:20.540

解决问题的关键是 FormClosing 事件的子类化。
仅在您打开表单时为该事件设置一个处理程序。
然后在那种情况下（如果您同意关闭）将您的全局变量设置为空。
这将正确重置您的逻辑以打开一个新的**frmOne 实例**。
不要将 frmOne（类）与 frm1（frmOne 的实例）混淆

```
public class FManage 
{ 
    frmOne frm1; 
    ... 

    // Here test on frm1 and create a new instance of frm1
    if (frm1 == null) 
    { 
        frm1 = new frmOne(); 
        frm1.FormClosing += fManage_FormOneClosing;
        frm1.MdiParent = Main.ActiveForm; 
    } 
    frm1.Show(); 

    ...

    public void fManage_FormOneClosing(object sender, FormClosingEventArgs e) 
    {
        ... (check if you agree to close the form frm1

        // set the instance of frmOne captured in the global var to null....
        frm1 = null;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T17:50:54.100

A`Form`是一个对象，就像任何其他对象一样。它的生命周期由它是否仍然可达来控制。因此，隐藏（关闭）表单永远不会破坏对象或将任何内容设置为`null`.

您需要处理表单的[FormClosed](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosed.aspx)事件才能知道它何时关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T17:52:59.607

[来自 MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.close.aspx)：

> 当窗体关闭时，对象内创建的所有资源都将关闭并释放窗体。您可以通过处理 Closing 事件并设置作为参数传递给事件处理程序的 CancelEventArgs 的 Cancel 属性来防止在运行时关闭窗体。如果您要关闭的表单是应用程序的启动表单，则您的应用程序将结束。
> 
> 表单未在 Close 上处理的两种情况是： (1) 它是多文档界面 (MDI) 应用程序的一部分，并且表单不可见；(2) 您已经使用 ShowDialog 显示了表单。在这些情况下，您将需要手动调用 Dispose 以将表单的所有控件标记为垃圾回收。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T17:54:21.027

一种选择是按照您的描述处理 FormClosing 事件。您不需要表格即可“了解”FManage。您可以让 FManage 像这样订阅事件：

```
frm1.FormClosing += this.FormClosing; // this is FManage 
```

另一种选择是在创建子表单时检查表单的 Visible 属性是否为真。

```
if (frmOne == null || !frmOne.Visible)
{
    frmOne = new frm1();
    frmOne.MdiParent = Main.ActiveForm; //Main is the parent form
}
else
{
    // form is already created.  maybe bring to front?
    frmOne.BringToFront();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T17:53:14.160

如果 frmOne 没有超出范围，它就不会被处理掉。它将保留您给它的任何值（在本例中为 frm1 的实例）。如果需要，您可以在每次需要显示时创建一个新的 frm1 对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T16:55:44.940

另一种解决方案是遍历 My.Application.OpenForms 集合以检查表单是否打开。
当它们的 onFormClosed 内部方法/事件被调用时，它们将从这个集合中移除。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-05T07:27:08.853

您可以使用 lambda：

```
public class FManage 
{ 
    frmOne frm1; 
    ... 

    // Here test on frm1 and create a new instance of frm1
    if (frm1 == null) 
    { 
        frm1 = new frmOne(); 
        frm1.FormClosing += (sndr, evnt) => { frm1 = null; };
        frm1.MdiParent = this; 
    } 
    frm1.Show(); 

    ...

} 
```

# c# - 每个 ComboBox.Selected... 返回什么？

> ID：10539528
> 
> 赞同：2
> 
> 时间：2012-05-10T17:47:25.583
> 
> 标签：c#, .net, string, combobox

现在，为了确保我得到了我想要的东西

```
actionComboBox.Items[actionComboBox.SelectedIndex].ToString() 
```

检索存储为我的项目的字符串`TextBox`

Selected 属性之一是否返回我的上述声明？当我使用它们时，我似乎永远无法得到我想要的东西。

像，是否`actionComboBox.SelectedItem as string`返回上述值？

编辑：

我想这里真正的问题是：每个 Selected Property 返回什么，例如；`SelectedItem`, `SelectedValue`, `SelectedText`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:22:47.703

`SelectedText`如果您能够编辑组合框中的文本，我认为返回选定的文本。`DropDownList`如果您选择了用户不能只在组合框中键入值的样式，我认为您不会使用此属性。

`SelectedValue`仅当您绑定到数据源时才适用。`SelectedValue`将返回您选择的数据源中的项目，或者如果您已`DisplayMember`填写该字段，则返回您指定的属性/列的值。

`SelectedItem`如果您刚刚通过设计器填写了列表项，则将返回所选项目。

我一直被这些烧伤，因为我总是忘记。您的示例中的大问题是如何将项目填充到组合框中，这将影响这些属性的返回值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:55:32.837

`ComboBox.Items`是`System.Object`'s 的集合，所以它可以是任何东西。默认情况下，`ComboBox`显示对象`ToString`方法的返回值。无论你添加`ComboBox`什么，你都会得到什么，尽管它作为 a 返回`System.Object`，你必须将它转换回它的原始类型才能访问它的成员。

```
comboBox.Items.Add("foo"); 
```

以上将添加`System.String`到`ComboBox`.

```
class Foo
{
    public String Bar { get; set; }
}

Foo foo = new Foo();
foo.Bar = "Value";

comboBox.Items.Add(foo); 
```

以上将添加`Foo`到`ComboBox`. 所以要找回你的价值观。

```
Object obj = comboBox.Items[comboBox.SelectedIndex];
Foo foo = obj as Foo;

if (foo != null) { // check just in case
} 
```

对于字符串，不需要转换，调用`ToString`就可以了。最好只使用`SelectedItem`。

```
Foo foo = comboBox.SelectedItem as Foo;
if (foo != null) { // again, check to make sure
} 
```

的强大之处`ComboBox`在于，由于它存储了 的集合`System.Object`，因此您可以存储多种类型的对象，但是当您需要访问它时，您负责将其转换回最初的可用类型。

# c++ - 什么可能导致将指针地址写入 std::cout 崩溃？

> ID：10539536
> 
> 赞同：0
> 
> 时间：2012-05-10T17:47:57.813
> 
> 标签：c++, pointers, cout

每当我将特定的指针地址输出到 时`std::cout`，我都会崩溃：

```
bool MyClass::foo() const
{
  std::cout << "this prints fine" << std::endl << std::flush;
  std::cout << d << std::endl << std::flush;  // crash!
  return true;
} 
```

类的指针成员在哪里`d`，即：

```
class MyClass {
// ... 
 private:
  MyClassPrivate* d;
}; 
```

**什么可能导致应用程序崩溃？**即使它是一个 NULL 指针，或者一个已初始化的指针，它仍然应该打印出（可能是无效的）地址，对吧？

应用程序在调试模式下编译，如果有区别的话。该函数`foo`未标记为内联。

*背景：我正在尝试追踪外部应用程序进程中的错误。该错误仅在另一个应用程序向进程发送快速命令时引起。我`std::cout`用来跟踪外部进程的执行。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T17:49:57.113

如果`this`不是有效指针，则对成员字段的任何访问都可能导致访问冲突。在无效指针上调用的非虚拟方法可以正常工作，直到它们尝试访问字段，因为调用本身不需要取消引用`this`。

例如，这种情况会按照您的描述大致崩溃：

```
MyClass* instance = nullptr; // or NULL if you're not using C++11
instance->foo(); // will crash when `foo` tries to access `this->d` 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T17:50:44.757

可能有 , 的重载`operator<<(ostream &, MyClassPrivate*)`会取消对指针的引用。例如当然有 if `MyClassPrivate`is true `char`。

试试看`std::cout << (void*)d;`，看看有没有区别。如果不是，zneak 的回答似乎是合理的。

# android - ContactsContract 如何枚举所有可用字段？

> ID：10539537
> 
> 赞同：8
> 
> 时间：2012-05-10T17:48:08.440
> 
> 标签：android, contacts, android-contacts

在我的应用程序中，我需要让用户有机会查看/编辑 ContactsContract 的所有可用字段。

我应该如何获取/查看所有可用字段 - 包括任何自定义字段？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T05:20:47.937

首先获取手机中存在的所有人员的姓名：

```
Cursor phones = getContentResolver().query(
                    ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                    null,
                    null,
                    null,
                    ContactsContract.Contacts.DISPLAY_NAME
                            + " COLLATE LOCALIZED ASC");
            while (phones.moveToNext()) {

                name = phones
                        .getString(phones
                                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                namelist.add(name);
                String phoneNumber = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                 number_list.add(phoneNumber);
            detaillist.put(name, phoneNumber);
            }
            phones.close();
} 
```

现在获取联系人 ID 并使用联系人 ID 获取其他信息，例如电话号码、电子邮件 ID、地址、组织：

```
protected void get_UserContactId(String item_clicked) 
        {
            System.out.println("i m in fincution contact id");
            ContentResolver localContentResolver = this.getContentResolver();
            Cursor contactLookupCursor =  
               localContentResolver.query(
                        Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, 
                        Uri.encode(item_clicked)), 
                        new String[] {PhoneLookup.DISPLAY_NAME, PhoneLookup._ID}, 
                        null, 
                        null, 
                        null);
            try {
            while(contactLookupCursor.moveToNext()){
              contactName = contactLookupCursor.getString(contactLookupCursor.getColumnIndexOrThrow(PhoneLookup.DISPLAY_NAME));
                user_contact_id = contactLookupCursor.getString(contactLookupCursor.getColumnIndexOrThrow(PhoneLookup._ID));

                 System.out.println("contatc id id"+user_contact_id);

                }

            }
        finally {
            contactLookupCursor.close();
            } 

        }

protected void get_UserEmail(String item_clicked) 
        {
            Cursor emails = getContentResolver().query(ContactsContract.CommonDataKinds.Email.CONTENT_URI, null, ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = " + user_contact_id, null, null); 
            while (emails.moveToNext()) { 
               // This would allow you get several email addresses 
               user_email_id = emails.getString( 
               emails.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA)); 
               String user_email_type=emails.getString( 
                       emails.getColumnIndex(ContactsContract.CommonDataKinds.Email.TYPE)); 
               System.out.println("the email type"+user_email_type);
               System.out.println("email address might be"+emailAddress);
            contact_attribute_type.add(EMAIL_TYPE[(Integer.parseInt(user_email_type))-1]);
            contact_attribute_value.add(user_email_id);
            } 
            emails.close(); 

        }

        protected void get_UserNumber(String item_clicked) {
            // TODO Auto-generated method stub
            final String[] CONTACTS_SUMMARY_PROJECTION = new String[] {
                ContactsContract.Contacts._ID,
                ContactsContract.Contacts.DISPLAY_NAME,
                ContactsContract.Contacts.STARRED,
                ContactsContract.Contacts.TIMES_CONTACTED,
                ContactsContract.Contacts.CONTACT_PRESENCE,
                ContactsContract.Contacts.PHOTO_ID,
                ContactsContract.Contacts.LOOKUP_KEY,
                ContactsContract.Contacts.HAS_PHONE_NUMBER,
            };

            String select = "(" + ContactsContract.Contacts.DISPLAY_NAME + " == \"" +item_clicked+ "\" )";
            Cursor c = this.getContentResolver().query(ContactsContract.Contacts.CONTENT_URI, CONTACTS_SUMMARY_PROJECTION, select, null, ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC");
            this.startManagingCursor(c);

            if (c.moveToNext())
            {
                String id = c.getString(0);
                ArrayList<String> phones = new ArrayList<String>();

                Cursor pCur = this.getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?", new String[]{id}, null);
                while (pCur.moveToNext())
                {
                    phones.add(pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER)));
                    user_number=pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                   String number_type=pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE));
                   System.out.println("the number type---"+number_type); 
                   System.out.println("user no. in share is"+user_number);
                   contact_attribute_type.add(PHONE_TYPE[(Integer.parseInt(number_type))-1]);
                   contact_attribute_value.add(user_number);
                 //   Log.i("", name_to_search+ " has the following phone number "+ pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER)));

                } 
                pCur.close();   
            }

            }

        protected String get_UserAddress() {
            // TODO Auto-generated method stub
            try { 

                System.out.println(" i m in user address");
            Cursor address = getContentResolver().query(ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_URI,null, ContactsContract.CommonDataKinds.StructuredPostal.CONTACT_ID + " = " + client_contact_id, null, null); 
                while (address.moveToNext()) { 
                   // This would allow you get several email addresses 
                  user_home_address = address.getString( 
                   address.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.DATA)); 
                  String user_address_type=address.getString( 
                           address.getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.TYPE));
                  System.out.println("the user address type"+user_address_type);
                  System.out.println(" address might be"+user_home_address);
                contact_attribute_type.add(ADDRESS_TYPE[(Integer.parseInt(user_address_type))-1]);
                contact_attribute_value.add(user_home_address);

                } 
                address.close(); 
            }
            catch(Exception e)
            {
                System.out.println("this exception due to website"+e);
            }

        return(user_home_address);  
        }   

          protected void get_UserWebsite() {
                // TODO Auto-generated method stub
                        try{
                            Cursor websiteNameCursor = getContentResolver().query(ContactsContract.Data.CONTENT_URI,new String[] {Website.URL}, ContactsContract.Data.CONTACT_ID + " = " + user_contact_id + " AND ContactsContract.Data.MIMETYPE = '"
                                    + ContactsContract.CommonDataKinds.Website.CONTENT_ITEM_TYPE
                                    + "'",null,null);

                            websiteNameCursor.moveToNext();
                            user_website=(websiteNameCursor.getString(websiteNameCursor.getColumnIndex(Website.URL)));

                            System.out.println("this is my website"+(websiteNameCursor.getString(websiteNameCursor.getColumnIndex(Website.URL))));
                        contact_attribute_type.add("Website");
                        contact_attribute_value.add(user_website);

                        }
                            catch(Exception e)
                            {
                            user_website=null;
                            System.out.println("this website is"+user_website); 
                            System.out.println("this exception in website"+e);
                            }

            }

                    protected void get_UserOrganization() {
                // TODO Auto-generated method stub
                        try{
                            Cursor organizationNameCursor = getContentResolver().query(ContactsContract.Data.CONTENT_URI,new String[] {Organization.COMPANY}, ContactsContract.Data.CONTACT_ID + " = " + user_contact_id + " AND ContactsContract.Data.MIMETYPE = '"
                                    + ContactsContract.CommonDataKinds.Organization.CONTENT_ITEM_TYPE
                                    + "'",null,null);

                            organizationNameCursor.moveToNext();
                            user_company=organizationNameCursor.getString(organizationNameCursor.getColumnIndex(Organization.COMPANY));
                        //    String user_company_type=organizationNameCursor.getString(organizationNameCursor.getColumnIndex(Organization.TYPE));
                       //   System.out.println("the company type "+user_company_type);
                            System.out.println("this is my organization"+user_company);

                            contact_attribute_type.add("Company");
                        contact_attribute_value.add(user_company);
                        }
                            catch(Exception e)
                            {
                            user_company=null;
                            System.out.println("user company name is"+user_company);
                                System.out.println("this exception in org"+e);
                            }
            }   

    } 
```

通过这样做，您可以获得联系人合同的所有字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-12T18:48:09.977

这会记录所有联系人行中所有列的名称和值。使用原生联系人应用在 Galaxy S6 上测试。我需要它来查找用于自定义 SMS 通知声音 (sec_custom_alert) 的列名。

```
private void enumerateColumns() {
    Cursor cursor = getApplicationContext().getContentResolver().query(
            ContactsContract.Contacts.CONTENT_URI,
            null, null, null, null);

    if (cursor != null && cursor.moveToFirst()) {
        do {
            for(int i=0; i<cursor.getColumnCount();i++)
            {
                Log.d("myActivity", cursor.getColumnName(i) + " : " + cursor.getString(i));
            }
        } while (cursor.moveToNext());

        cursor.close();
    }
} 
```

# ruby-on-rails - Ruby on Rails -> 元编程 - 基于 has_many 关系创建 attr_accessible 属性的动态数组

> ID：10539548
> 
> 赞同：0
> 
> 时间：2012-05-10T17:49:03.913
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

导轨 3.1，红宝石 1.9.2

我正在尝试将 Railscasts 第 345 集 (HSTORE) 改编为我正在构建的应用程序——这个问题不是以 HSTORE 为中心的......因为如果我正在序列化 Properties 哈希，我也会遇到它。

这是我有疑问的代码：

```
Class Product < ActiveRecord::Base

has_many :properties

%w[author rating runtime].each do |key| #  *****--> PLEASE SEE BELOW!
  attr_accessible key
  scope "has_#{key}", lambda { |value| where("properties @> (? => ?)", key, value) }

  define_method(key) do
    properties && properties[key]
  end

  define_method("#{key}=") do |value|
    self.properties = (properties || {}).merge(key => value)
  end
end 
```

*****现在，这里是转折点。产品类别具有许多由管理员在创建时分配的属性。这是在一个名为 Property 的连接模型中完成的。

因此，我想搜索一个名为 Property 的已连接的 has_many 模型，而不是属性数组，并让数组填充属性 ID 的集合。

我尝试将声明的 %w[author rating runtime] 数组替换为

```
self.properties.collect{ |property| "property_#{property.id}" }.each do |key| 
```

但这不起作用！我在属性关系上得到一个未定义的方法错误（我认为这是因为模型尚未实例化？）我对编程相当陌生，对元编程一无所知。

编辑 - 我试图将所有这些移到 after_find 钩子中，但这也不起作用（以及其他几十次不成功的尝试。）所以迷失了......

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T18:49:09.437

好吧，经过几天的黑客攻击，我想我终于弄明白了。

非常感谢有关此解决方案的“声音”程度的任何和所有小齿轮！

简而言之，我所做的只是将上面的代码块（以 % 符号开头）包装成这样的方法：

```
def dynamic_accessible_and_setters(*details)
  details.each do |key| # I placed the details variable here instead of the %w[]
    attr_accessible key
    scope "has_#{key}", lambda { |value| where("properties @> (? => ?)", key, value) }

    define_method(key) do
      properties && properties[key]
    end

    define_method("#{key}=") do |value|
      self.properties = (properties || {}).merge(key => value)
    end
  end
end 
```

然后，在控制器中，我只是从类中调用方法并分配属性数组：

```
def edit
  PRODUCT.dynamic_accessible_and_setters("author", "rating", "runtime")
  ...
end 
```

现在我已经为类的每个实例动态构建了 getter、setter 和 attr_accessible（或者，我认为？！）

我希望这可以帮助别人！现在来看看多次数据库写入与序列化和一次写入的性能权衡。

# android - 在 Android 2.2+ 中检测屏幕方向

> ID：10539552
> 
> 赞同：0
> 
> 时间：2012-05-10T17:49:22.120
> 
> 标签：android, android-emulator, screen-orientation

我的屏幕方向有些问题。基本上我要做的是确定确切的屏幕方向（包括反向横向和反向纵向）。我在下面编写了方法来为我做这件事，它似乎在我的 Transformer 上完美地工作，但是当我在模拟器上启动相同的代码时，有些事情变得一团糟。

基本上发生的事情是，每当在模拟器中我根据文档切换到横向（ROTATION_90）时，它应该是反向横向（例如，在带有 ROTATION_90 设备的 Transformer 上，正如 Android 文档所描述的那样，它是反向纵向的）。不幸的是，由于某种原因，在模拟器上它似乎是正常的横向模式。

所以我的问题是下面的代码正确的问题在于它。或者也许我没有考虑其他一些参数（例如，模拟器几乎没有启用加速度计）。

```
public static int getDeviceCurrentOrientation() {

    WindowManager lWindowManager = (WindowManager) getContext()
            .getSystemService(Activity.WINDOW_SERVICE);

    Configuration cfg = getContext().getResources().getConfiguration();
    int lRotation = lWindowManager.getDefaultDisplay().getRotation();

    int rotation1;
    int orientation;

    rotation1 = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED;
    if (cfg.orientation == Configuration.ORIENTATION_LANDSCAPE)
        rotation1 = ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;
    else if (cfg.orientation == Configuration.ORIENTATION_PORTRAIT)
        rotation1 = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT;
    else
        rotation1 = ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED;

    switch (lRotation) {
    case Surface.ROTATION_0:
        orientation = 0;
        break;
    case Surface.ROTATION_90:
        orientation = 1;
        break;
    case Surface.ROTATION_180:
        orientation = 2;
        break;
    case Surface.ROTATION_270:
        orientation = 3;
        break;
    default:
        orientation = -1;
    }

    if ((orientation == 0)
            && (rotation1 == ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE))
        return ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;

    if ((orientation == 0)
            && (rotation1 == ActivityInfo.SCREEN_ORIENTATION_PORTRAIT))
        return ActivityInfo.SCREEN_ORIENTATION_PORTRAIT;

    if ((orientation == 1)
            && (rotation1 == ActivityInfo.SCREEN_ORIENTATION_PORTRAIT))
        return ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT;

    if ((orientation == 1)
            && (rotation1 == ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE))
        return ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE;

    if ((orientation == 2)
            && (rotation1 == ActivityInfo.SCREEN_ORIENTATION_PORTRAIT))
        return ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT;

    if ((orientation == 2)
            && (rotation1 == ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE))
        return ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE;

    if ((orientation == 3)
            && (rotation1 == ActivityInfo.SCREEN_ORIENTATION_PORTRAIT))
        return ActivityInfo.SCREEN_ORIENTATION_PORTRAIT;

    if ((orientation == 3)
            && (rotation1 == ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE))
        return ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;

    return ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T00:50:38.110

我遇到了类似的问题，经过数小时的努力……
我找到[了这个不错的解决方案>>](http://blogs.captechconsulting.com/blog/eric-miles/programmatically-locking-android-screen-orientation)

```
Display display = getWindowManager().getDefaultDisplay();
int rotation = display.getRotation();

Point size = new Point();
display.getSize(size);

int lock = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT;

if (rotation == Surface.ROTATION_0
        || rotation == Surface.ROTATION_180) {
    // if rotation is 0 or 180 and width is greater than height, we have
    // a tablet
    if (size.x > size.y) {
        if (rotation == Surface.ROTATION_0) {
            lock = ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;
        } else {
            lock = ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE;
        }
    } else {
        // we have a phone
        if (rotation == Surface.ROTATION_0) {
            lock = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT;
        } else {
            lock = ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT;
        }
    }
} else {
    // if rotation is 90 or 270 and width is greater than height, we
    // have a phone
    if (size.x > size.y) {
        if (rotation == Surface.ROTATION_90) {
            lock = ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;
        } else {
            lock = ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE;
        }
    } else {
        // we have a tablet
        if (rotation == Surface.ROTATION_90) {
            lock = ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT;
        } else {
            lock = ActivityInfo.SCREEN_ORIENTATION_PORTRAIT;
        }
    }
} 
```

# .net - SQL CLR AppDomain 数据缓存和内存释放

> ID：10539555
> 
> 赞同：2
> 
> 时间：2012-05-10T17:49:36.910
> 
> 标签：.net, sql, clr, sqlclr

出于性能原因，我编写了一个 C#.Net 独立 DLL，用于加密 SQL 2008 R2 表（在 64 位平台上运行）上的数据。这可能会占用大量内存，因为可能需要通过很多行。

我已将其与 SQL CLR 集成为程序集/函数，一切正常。

此程序集使用 Permission_Set'UNSAFE' 运行，但作为托管程序集运行（由 sys.dm_clr_loaded_assemblies 报告）。

我通过 MS Process Explorer 密切关注内存使用情况，每次调用该函数时内存使用量都会增加，但它没有被释放。

通过阅读 MSDN 文档，AppDomain 缓存了函数返回的数据，以提高效率。如果我卸载程序集，内存就会被释放。

我有几个问题：

1.  有什么方法可以在不卸载 AppDomain 的情况下“刷新”它？
2.  来自标记为“Dispose”的 DLL 中的所有对象都会被 GC 清理吗？
3.  （这显然与上述有关！）GC 是否也覆盖 SQL Server 进程空间？

我非常感谢您对上述内容的帮助，因为在线文档对 SQL CLR 和内存等内容并不清楚。

谢谢 ：）

# algorithm - 我怎样才能想出一个模拟实时情况的算法

> ID：10539556
> 
> 赞同：2
> 
> 时间：2012-05-10T17:49:39.217
> 
> 标签：algorithm, computation-theory

我擅长算法，但不如转换实时问题并彻底学习它们以使其成为算法。我想知道是否有任何书籍/论文可以教授或让您揭开情况的神秘面纱并将其制定为算法。（这很像训练你打破局面并快速提出算法的心理能力。）

展示了一些解决这些问题的方法。任何简单的学习链接/材料都会对我有很大帮助。

**注意：**我知道 SO 不允许征求意见或含糊不清的东西（我不介意我的 Q 被降级）。但我在问一些具体的问题，希望能从这里的一些伟大的头脑中得到一些很好的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:18:10.453

更适合直接回答的词是“经验”。不存在将实时问题转换为解决它的算法的神奇公式。作为类比，不存在关于如何解决数学问题的预定义模式。根据一些基础知识和通过不断学习积累的经验来表达解决方案是大脑的任务。

# load - 多个水平容器上的延迟加载

> ID：10539557
> 
> 赞同：2
> 
> 时间：2012-05-10T17:49:40.420
> 
> 标签：load, containers, lazy-evaluation

我正在使用延迟加载 jQuery 插件：

[http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

我的问题是：

是否可以有多个滚动容器，每个容器内部都有一个延迟加载图像，如下所示：

```
$("#container1 img.lazy").lazyload({ 
container: $("#container1")});

$("#container2 img.lazy").lazyload({ 
container: $("#container2")}); 
```

当我这样做时，它似乎只跟踪最近调用的。

我尝试调用该函数两次（每个容器一个）但它不起作用，我也尝试以这种方式调用两个容器： container: $("#container1, #container2")}); 也没有工作。

我实际上尝试了很多东西，但我无法做到这一点。

非常感谢您的阅读。

# ios - 有没有办法为 RadioGroup 设置 BackgroundColor？

> ID：10539561
> 
> 赞同：2
> 
> 时间：2012-05-10T17:49:58.453
> 
> 标签：ios, xamarin.ios, monotouch.dialog

我正在使用 MonoTouch.Dialog 创建一个类似设置的页面。下面的 linq 创建了一组 RootElement，每个都有一个部分，其中包含一组 RadioEventElement（我为添加 OnSelected 事件而创建的 RadioElement 的子类）。

```
 // initialize other phone settings by creating a radio element list for each phone setting
        var elements = (from ps in PhoneSettings.Settings.Keys select (Element) new RootElement(ps, new RadioGroup(null, 0))).ToList();

        // loop through the root elements we just created and create their substructure
        foreach (RootElement rootElement in elements)
        {
            rootElement.Add(new Section()
            {
                (from val in PhoneSettings.Settings[rootElement.Caption].Values select (Element) new RadioEventElement(val.Name)).ToList()
            });
            // ...
        } 
```

我实现的设置之一是“主题”——目前它只是应用程序中各种屏幕的背景颜色。我可以通过将 TableView.BackgroundColor 属性设置为所需的颜色来正确设置每个页面的样式...除了新的 DialogViewControllers，它是在导航到单选组时由父 DialogViewController 自动创建和推送的。

有没有办法设置这个子 DialogViewController 的样式（或至少设置背景颜色）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T18:17:42.620

在问简单的问题之前，我需要更多地使用程序集浏览器:-)

幸运的是，RootElement 有一个名为 PrepareDialogViewController 的虚拟方法似乎正是用于此目的。我所要做的就是创建一个简单的 RootElement 子类并重写此方法以获得我想要的行为。

```
public class ThemedRootElement : RootElement 
{    
    public ThemedRootElement(string caption) : base (caption)
    {
    }

    public ThemedRootElement(string caption, Func<RootElement, UIViewController> createOnSelected) : base (caption, createOnSelected)
    {
    }

    public ThemedRootElement(string caption, int section, int element) : base (caption, section, element)
    {
    }

    public ThemedRootElement(string caption, Group group) : base (caption, group)
    {
    }

    protected override void PrepareDialogViewController(UIViewController dvc)
    {
        dvc.View.BackgroundColor = UIColorHelper.FromString(App.ViewModel.Theme.PageBackground);
        base.PrepareDialogViewController(dvc);
    }
} 
```

希望这有助于节省一些时间......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-19T22:06:54.777

为了让它工作，我必须重写该`MakeViewController`方法并将通常返回的 UIViewController 转换为 UITableViewController，然后进行编辑。

```
protected override UIViewController MakeViewController()
{
    var vc = (UITableViewController) base.MakeViewController();

    vc.TableView.BackgroundView = null;
    vc.View.BackgroundColor = UIColor.Red; //or whatever color you like
    return vc;
} 
```

# c# - 命名空间中的特殊字符

> ID：10539564
> 
> 赞同：3
> 
> 时间：2012-05-10T17:50:18.297
> 
> 标签：c#, .net, visual-studio, namespaces, .net-assembly

我正在考虑在自定义框架的命名空间中使用带有变音符号（例如 ō）的字符。这个想法是作为区分产品的一种方式出现的，但我想确定这不是一个坏主意，如果有什么关于它的东西会在以后回来咬我。在我的搜索中，我没有看到其他使用特殊字符的命名空间示例，也没有关于这个主题的任何类似讨论，这让我在继续沿着这条道路前进时停下来。

我最初也考虑用变音符号命名程序集，但我遇到的第一个障碍是试图对程序集进行数字签名。我无法让特殊字符出现在命令提示符中，因此出现 No valid input 错误。也许还有另一种解决方法？

我意识到的一个问题是，它使在 Visual Studio 中输入命名空间更具挑战性。但是，我不认为这是一个主要问题，因为该字符将接近我所使用的单词的末尾，因此该单词将相当独特，并且使用 IntelliSense 这应该不是太大的问题。

考虑以下示例，包含在程序集 Macron.dll 中：

```
namespace Macrōn.Library
{
    public class MyLibrary
    {
        public string MyProperty { get; set; }
    }
} 
```

生成和使用此 Macron.dll 似乎没有问题，区分此示例 Macrōn.Library 命名空间也没有问题。文件、文件夹、项目和解决方案名称 Macrōn 似乎没有引起任何问题，而且一切似乎都与源代码控制相吻合，没有任何问题。

在程序集和命名空间中使用变音符号时我遗漏的任何其他注意事项或事情？关于解决我签署程序集的问题有什么想法吗？这种方法一定会失败吗？它真的不值得实施吗，因为它可能会令人困惑或难以使用/晦涩难懂？

这将变成以后要撤消的大量工作，所以我想知道在我深入到这个问题之前我是不是在打自己的脚。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T17:54:53.710

> 我想确定这不是一个坏主意，并且如果有任何关于它的事情会在以后回来咬我。

这是有效的。许多混淆器将命名空间/类型更改为具有 unicode 字符，其中一些甚至不可打印，以使逆向工程更加困难。

话虽这么说，如果这是一个其他人会使用的公共框架，我会劝阻它。这将迫使任何使用命名空间的人将他们的源文件保存为 Unicode / UTF8，如果他们不这样做，ō 字符可能会被替换为`?`. 然后它不再编译。

阿列克谢也发表了非常好的评论。除了复制和粘贴之外，我不知道如何键入 ō 字符。那肯定会让我慢下来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T17:58:52.287

我想补充一下 vcsjones 的答案，不是每个人都使用 Visual Studio，所以你不应该依赖智能感知来让任何人都更容易做到这一点。

> 我意识到的一个问题是，它使在 Visual Studio 中输入命名空间更具挑战性。但是，我不认为这是一个主要问题，因为该字符将接近我使用的单词的末尾，因此该单词将相当独特，并且使用 IntelliSense 这应该不是太大的问题

如果我不得不解决这个问题，我会非常恼火使用别人的图书馆。

# java - 使用格式化程序与 Logger v/s 检查 isXEnabled

> ID：10539565
> 
> 赞同：0
> 
> 时间：2012-05-10T17:50:27.017
> 
> 标签：java, arrays, slf4j, variadic-functions

众所周知

```
LOGGER.debug("The parameter p1 cannot be " + p1 +
        ", it must be between " + P1_MIN + " and " + P1_MAX); 
```

缺点是即使由于记录器设置而丢弃结果，也会进行字符串连接。为了避免这种情况，以下样板很受欢迎

```
if (LOGGER.isDebugEnabled())
{
    LOGGER.debug("The parameter p1 cannot be " + p1 +
            ", it must be between " + P1_MIN + " and " + P1_MAX);
} 
```

这以三个额外的线路为代价避免了它。

`slf4j`(and others)使用(and ) 提供[替代方案](http://www.slf4j.org/apidocs/org/slf4j/Logger.html#debug%28java.lang.String,%20java.lang.Object%5B%5D%29)：`varargs``overloading`

```
 LOGGER.debug("The parameter p1 cannot be {} , it must be between {} and {}", 
             p1, P1_MIN, P1_MAX); 
```

这看起来更干净，但是有一个`Object array`创建来传递可变数量的参数。

**这个对象数组的创建有多昂贵？**它的成本是否超过了减少代码行数的优势？

我怀疑这些`varargs/formatter`基于方法的创建正是为了解决上述样板问题，因此即使专家的主观回答会帮助大量的程序员。此外，恕我直言，对象数组的创建是否非常便宜（这是我的希望）或非常昂贵也不是主观的。

# spotify - 如何访问其他 Spotify 用户当前正在播放的曲目？

> ID：10539572
> 
> 赞同：0
> 
> 时间：2012-05-10T17:50:42.603
> 
> 标签：spotify

我想构建一个应用程序，用户可以在其中看到他们的朋友正在听什么。

我可以使用播放器模型获得自己当前正在播放的曲目。

我可以通过向 toplist 模型提供 userName 来获取另一个用户的 toplist。

但是我怎样才能得到另一个用户当前正在播放的曲目呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:56:47.970

你不能，直接。

如果您想这样做，您需要拥有自己的 Web 服务来跟踪它。当用户使用您的应用并选择将他们当前播放的曲目上传到您的服务以供您的朋友查看时。当然，这意味着每个人都需要使用您的应用程序来保持您的服务。

另一种方法是连接到 Facebook API 并以这种方式获取朋友的收听历史记录。

# sql - 准备好的语句中的重复参数

> ID：10539574
> 
> 赞同：5
> 
> 时间：2012-05-10T17:50:46.660
> 
> 标签：sql, perl, dbi

考虑一个看起来像这样的查询：

```
 my $query=<<QUERY;

select * from foo1 where col < ?
union all
select * from foo2 where col < ?
QUERY 
```

假设实际查询确实需要联合，并且无法通过其他方式有效解决。where 子句中的变量将始终相同。有什么方法可以构造它，以便我只需要传递 1 个参数来执行，而不是传递相同的参数两次？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T18:09:54.090

可以尝试以下方法，我假设您将整数传递给 where 子句...

```
DECLARE @variableName as int

SET @variableName = ? --the value gets passed here once

select * from foo1 where col < @variableName -- and gets used here
union all
select * from foo2 where col < @variableName -- and here! 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T09:09:24.107

You could use the list repetition operator.

```
$sth->execute(($value) x 2); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-10T17:59:10.647

在“真实”数据库中，您可以参数化查询并将查询作为参数传递。这是一个替代解决方案：

```
with const as (select ? as val)
select *
from ((select foo1.*
       from foo1 cross join const
       where col < const.val
      ) union all
      (select foo2.*
      from foo2 cross join const
      where col < const.val
     )) t 
```

我并不是说这一定是个好主意。但是，我有时发现将参数收集到这样的子查询中然后在需要的地方加入它们非常有用。

# jquery - jQuery Animate on Background 在 FireFox 中不起作用

> ID：10539575
> 
> 赞同：2
> 
> 时间：2012-05-10T17:50:48.547
> 
> 标签：jquery, firefox, jquery-animate

这适用于 Chrome、Safari 和 IE9。

```
$(".menu").animate({'background-position-y': '50%'}, 100); 
```

但不是在 Firefox 中！

我现在有点迷路了，FF有简单的解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T17:54:09.667

`background-position-x/y`并不是任何 CSS 规范的真正组成部分，它的 IE 特定 CSS，添加到 IE5.5，后来由 Webkit 实现。

最好的解决方案是使用该`step`方法，它可以让您对任何东西进行动画处理。

```
$('elem').animate({
  'border-spacing': -1000
},
{
  step: function(now, fx) {
    $(fx.elem).css("background-position", "0px "+now+"px");
  },
  duration: 5000
}); 
```

[http://jsfiddle.net/q9aeh/1/](http://jsfiddle.net/q9aeh/1/)

# ipad - 如何在 ipad (adobe air) 上查看跟踪状态

> ID：10539576
> 
> 赞同：1
> 
> 时间：2012-05-10T17:50:49.857
> 
> 标签：ipad, debugging, air, adobe, trace

针对我的 ipad（物理设备）跟踪/记录跟踪语句的正确 adobe-air 方式是什么？我正在寻找类似于 android 的“adb logcat”的东西。

我尝试浏览 ADL 示例，但我的印象是 ADL 仅适用于虚拟设备。

AIR_SDK 版本 4.6.0.23201

# android - 如何像普通应用程序一样在动态壁纸 Android 中添加应用程序图标

> ID：10539579
> 
> 赞同：3
> 
> 时间：2012-05-10T17:51:08.717
> 
> 标签：android, icons, live, wallpaper

是否可以添加应用程序图标，就像它在动态水族馆壁纸中显示的那样 (https://play.google.com/store/apps/details?id=fishnoodle.aquarium_free&feature=search_result#?t=W251bGwsMSwxLDEsImZpc2hub29kbGUuYXF1YXJpdW1fZnJlZSJd) 当我安装它时壁纸，它会显示和图标，单击它会打开设置页面。有没有人这样做过？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-23T05:47:29.743

首先，您应该创建`Activity`：

```
public class SetLiveWallpaperActivity extends Activity{

@Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Intent intent = new Intent();
    if(Build.VERSION.SDK_INT >= 16)
    {
        intent.setAction(WallpaperManager.ACTION_CHANGE_LIVE_WALLPAPER);
        intent.putExtra(WallpaperManager.EXTRA_LIVE_WALLPAPER_COMPONENT, new ComponentName(this, LibGDXWallpaperService.class));
    }
    else
    {
        intent.setAction(WallpaperManager.ACTION_LIVE_WALLPAPER_CHOOSER);
    }
    startActivity(intent);
    finish();
  } 
} 
```

然后在你的`AndroidManifest.xml`你应该添加以下代码：

```
 <activity
        android:name=".SetLiveWallpaperActivity"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Light.WallpaperSettings" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />               
        </intent-filter>           
 </activity> 
```

它会创建一个图标，单击它会打开设置页面。希望它会帮助你或其他人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T19:38:33.627

您需要`AndroidManifest.xml`使用默认的[intent-filter](http://developer.android.com/guide/topics/intents/intents-filters.html)在您的 Activity 中声明：

```
 <activity
        android:name="com.your.company.ui.SettingsActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-23T06:26:55.673

对于那些仍在寻找正确答案的人：

您需要`<meta-data>`在清单文件中的墙纸服务标签声明中声明一个标签：

```
 <service
        android:name=".MyWallpaperService"
        android:enabled="true"
        android:label="My Wallpaper"
        android:permission="android.permission.BIND_WALLPAPER" >
        <intent-filter>
            <action android:name="android.service.wallpaper.WallpaperService"/>
        </intent-filter>

        <meta-data
            android:name="android.service.wallpaper"
            android:resource="@xml/wallpaper" >
        </meta-data>

    </service> 
```

此标记指向一个 xml 文件，其中包含有关动态壁纸部分中显示的壁纸图标的信息：

```
<?xml version="1.0" encoding="UTF-8"?>
<wallpaper
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:label="GIF Wallpaper"
    android:thumbnail="@android:drawable/btn_star">
</wallpaper> 
```

`android:thumbnail`设置图标资源的位置也是如此

# mysql - MySQL - SUM 和 AS 一样 SUM(test1) AS test2, SUM(test2)

> ID：10539583
> 
> 赞同：0
> 
> 时间：2012-05-10T17:51:34.897
> 
> 标签：mysql, sum

我有一个类似的问题，我想在以下查询中总结“totaal_inclusief_btw”：有人可以帮我解决这个问题吗？想不通。

表 1（制作）

```
factuur_id    factuur_datum    factuur_btw_weergave
---------------------------------------------------------------------------
1             2012-05-10       inclusief
2             2012-05-10       exclusief 
```

表 2 (factuur_regels)

```
regel_id    regel_factuur_id    regel_aantal   regel_bedrag   regel_btw
---------------------------------------------------------------------------
18          1                   1              40             19
19          1                   2              40             6
20          2                   1              40             19
21          2                   2              40             6 
```

**使用以下查询：**

```
SELECT 
CASE    
 WHEN factuur_btw_weergave = 'inclusief' 
 THEN SUM(regel_bedrag*regel_aantal)
 WHEN factuur_btw_weergave = 'exclusief' 
 THEN SUM(((regel_bedrag*regel_aantal)/100)*(100+regel_btw))
END
AS totaal_inclusief_btw,
SUM(totaal_inclusief_btw) AS new
FROM factuur_regels
INNER JOIN facturen ON factuur_id = regel_factuur_id
GROUP BY factuur_datum 
```

我得到错误：

```
#1054 - Unknown column 'totaal_inclusief_btw' in 'field list' 
```

**当我离开第二个 SUM“SUM(totaal_inclusief_btw) AS new”时：**

```
SELECT 
CASE    WHEN factuur_btw_weergave = 'inclusief' THEN SUM(regel_bedrag*regel_aantal)
        WHEN factuur_btw_weergave = 'exclusief' THEN SUM(((regel_bedrag*regel_aantal)/100)*(100+regel_btw))
        END
        AS totaal_inclusief_btw

FROM factuur_regels
LEFT JOIN facturen ON factuur_id = regel_factuur_id
WHERE factuur_datum = '2012-05-10'
GROUP BY factuur_datum 
```

我会得到这个结果：

```
totaal_inclusief_btw: 
240 (this needs to be 252,4) 
```

**当我按“factuur_id”分组时：**

```
SELECT 
CASE    WHEN factuur_btw_weergave = 'inclusief' THEN SUM(regel_bedrag*regel_aantal)
        WHEN factuur_btw_weergave = 'exclusief' THEN SUM(((regel_bedrag*regel_aantal)/100)*(100+regel_btw))
        END
        AS totaal_inclusief_btw

FROM factuur_regels
LEFT JOIN facturen ON factuur_id = regel_factuur_id
WHERE factuur_datum = '2012-05-10'
GROUP BY factuur_id 
```

我会得到这个结果：

```
totaal_inclusief_btw: 
120
132.4 
```

**我希望有人能帮我解答这个问题！谢谢你**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:49:21.757

**问题解决了**

它现在适用于以下查询：

```
SELECT factuur_datum, SUM(totaal_inclusief_btw)
FROM    (
               SELECT  factuur_datum,
               CASE    WHEN factuur_btw_weergave = 'inclusief' THEN SUM(regel_bedrag*regel_aantal)
                            WHEN factuur_btw_weergave = 'exclusief' THEN SUM(((regel_bedrag*regel_aantal)/100)*(100+regel_btw))
                            END
                            AS totaal_inclusief_btw
               FROM factuur_regels
               LEFT JOIN facturen ON factuur_id = regel_factuur_id
               WHERE factuur_datum = '2012-05-10'
               GROUP BY factuur_id
               )q 
```

此查询返回：252.4（正确）

# groovy - 在这种情况下如何在 Groovy 中使用不等于

> ID：10539585
> 
> 赞同：-2
> 
> 时间：2012-05-10T17:51:45.817
> 
> 标签：groovy

我只想打印不在 ss 中的文件

```
def folder = "./test-data"
//  println "reading files from directory '$folder'"
    def basedir = new File(folder)
basedir.traverse {
if (it.isFile()) {
        def rec = it
    //  println it
                     def ss = rec.toString().substring(12)
if(!allRecords contains(ss)) {
            println ss
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:23:06.893

你的问题不是很清楚，但看起来你只是想做

```
if (!allRecords.contains(ss)) {
     println ss
} 
```

在代码段的最后一部分。

# django - Django + OpenLayers？

> ID：10539587
> 
> 赞同：1
> 
> 时间：2012-05-10T17:51:49.530
> 
> 标签：django, openlayers, geodjango

谁能给我指出一个关于如何将 Django 或 GeoDjango 与 OpenLayers 一起使用的好教程。我似乎找不到一个好的教程。我是这两个方面的初学者，以前没有使用过这些。我只需要建立一个带有地图的网站并快速运行。因此，如果有人能告诉我如何在 django 网站上显示地图，我将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T05:01:44.403

我仍在学习如何使用两者，但这里有一个小概述，可能有助于澄清一些事情：[link](https://stackoverflow.com/questions/3034482/rendering-spatial-data-of-geoqueryset-in-a-custom-view-on-geodjango)

您需要一种以 OpenLayers 可以理解的格式将数据从 Django 传递到 OpenLayers 的方法。之后，您可以使用 OpenLayers 库来操作该数据。

以下是一些示例： http: [//openlayers.org/en/master/examples/](http://openlayers.org/en/master/examples/)

# php - 上传新副本后使用 PHP 更新文件

> ID：10539589
> 
> 赞同：1
> 
> 时间：2012-05-10T17:51:50.730
> 
> 标签：php

所以我想看看在不使用数据库的情况下是否有可能发生这样的事情。

1.  一个文件上传到服务器 /files/file1.html
2.  PHP通过检查数据库中的最后更新时间来跟踪上传时间
3.  如果文件 (file1.html) 自上次 DB 时间以来已更新，则 PHP 进行更改；否则，不会进行任何更改

基本上，对于文本模拟游戏（篮球），它会输出用于名册/统计/排名/等的 HTML 文件。我希望能够在顶部插入每个团队的徽标（输出文件不这样做）。显然，由于每天将输出的文件上传到服务器，因此需要经常执行此操作。我不想通过每个团队的花名册手动在顶部插入图像。

***由于联赛还没有开始，所以没有一个例子。***

我一直在考虑在联盟网站上创建一个按钮（尚未创建），当按下它时会更新页面，但我希望 PHP 自己来做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:55:31.120

是的，您可以简单地让 php 检查文件创建日期（在服务器上创建文件的时间点，而不是制作图片本身的时间点）。检查[http://php.net/manual/en/function.filemtime.php](http://php.net/manual/en/function.filemtime.php)你应该在 30 分钟内完成；）

性感的快速和肮脏的未经证实的代码：

```
$filename = 'somefile.txt';
$timestamp_now = time(); // get timestamp from now (seconds)
if (filemtime($filename) > $timestamp_now) {
   // overwrite the file (maybe check for existing file etc first)
} 
```

# java - 如何在netbeans中创建这样的Java gui应用程序

> ID：10539593
> 
> 赞同：0
> 
> 时间：2012-05-10T17:52:04.803
> 
> 标签：java, swing, user-interface, netbeans

我正在创建一个 Java 桌面应用程序，用户将在其中输入他的姓名和年龄，然后按下一步，如下图 1 所示。

![在此处输入图像描述](../Images/613bdc72019f2006be121d41d7af8e90.png)

并且执行的操作将如下图 2 所示。

![在此处输入图像描述](../Images/a0d9db24ad96ea62df31fe875008f6bb.png)

我浏览了 Netbeans 网站上的所有教程，但仍然找不到任何解决方案。我想构建这个应用程序，就像我们在 Windows 上安装某些应用程序时看到的那样，我们选择某个选项并按下一步，然后会出现一个新窗口，其中包含结果或更多选项。请有人帮助我逐步指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T18:01:12.730

我不认为你会从“一步一步”的指导中得到更多，因为你会通过教程学习，不仅要学习如何做你想做的事，还要了解你正在做的事情的原因和方式. 话虽如此，您将需要通过几个[Java Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/index.html)来学习如何做到这一点，包括

*   [CardLayout 教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)，了解如何在 GUI 中交换 JComponent 。
*   了解如何与 JTextField 交互的[JTextField 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/textfield.html)
*   [JButton](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)和[ActionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)教程，了解如何与 JButton 交互以及如何响应它们的按下。

大部分学习编码意味着独立学习和反复试验。所以开始尝试并享受这样做的乐趣吧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:23:37.297

正如上面的答案所说， CardLayout 是这样做的一种方式。但是，就我而言，我发现卡片布局对我来说有点困难。因此，在这种情况下，我所做的是创建扩展 JPanel 的 JavaBeans。因此，您可以将它们添加到主视图并用另一个 JavaBean 处理/替换，从而制作不同的“下一步”视图。这种方式将帮助您将代码分成几个类，使代码也很简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T14:43:53.403

[本文](http://java.sun.com/developer/technicalArticles/GUI/swing/wizard/)包含或多或少的关于如何在 Swing 中创建向导的分步教程。但在你开始阅读那篇文章之前，请确保你有一些基本的 Swing 知识，否则那篇文章将是完整的胡言乱语

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-21T09:41:47.840

您可以使用安装向导创建工具来设置您的 java 应用程序

例如，您可以使用“Setup Factory”工具来创建应用程序的安装 exe

它使安装程序与您的问题一样

# python - 带括号的精确字符串匹配

> ID：10539597
> 
> 赞同：1
> 
> 时间：2012-05-10T17:52:21.730
> 
> 标签：python, regex

我一直在使用单词边界来查找字符串中的确切单词，但刚刚了解到它们忽略了非单词字符。

因此，当我在字符串“height (in stories)”中查找“height”时，我得到了我期望的结果：

```
p = re.compile(r'\b%s\b' % 'height')
p.search('height (in stories)') # match 
```

但是，当我在字符串“height (in stories)”中查找“height (in stories)”时，我找不到匹配项：

```
p = re.compile(r'\b%s\b' % 'height (in stories)')
p.search('height (in stories)') # no match 
```

如何识别括号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T17:55:29.483

有两个问题。

1.  您需要使用 [`re.escape(text)`](http://docs.python.org/library/re.html#re.escape)创建一个匹配字符串的正则表达式`text`。
2.  括号和字符串结尾之间没有单词边界。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:56:29.447

`p = re.compile(r'\bheight \(in stories\)')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T17:57:55.220

使用正则表达式时，您应该*阅读它们的语法*。

和字符在正则表达式中具有特殊含义`(`，`)`如果要从字面上匹配字符，则需要对其进行转义。就像点`.`...

考虑使用`re.escape`.

# android - Android：如何获取特定 mp3 歌曲的元数据

> ID：10539601
> 
> 赞同：2
> 
> 时间：2012-05-10T17:52:31.277
> 
> 标签：android, mp3

我知道可以使用 MediaStore.Audio 类显示歌曲艺术家、专辑等。但它会显示艺术家、专辑等列表。问题是当我单击艺术家姓名（在我的活动中显示为列表）时，应该显示该特定艺术家的所有歌曲。

如何根据元数据（专辑/艺术家等）过滤歌曲。如何获取那首特定歌曲的元数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T20:19:24.513

如果要根据用户点击的艺术家进行过滤，则需要重新查询数据库。

以下是此类查询的示例。

```
String query = MediaStore.Audio.Media.IS_MUSIC + " != 0 AND _display_name LIKE '%.mp3' AND artist LIKE " + artistStringHere; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:54:26.643

通读 mp3 并找到 id3 和 id3+。但是，处理 mp3 音乐通常意味着盗版。

# perl - Perl CGI - 如何删除文本字段的内容？

> ID：10539603
> 
> 赞同：0
> 
> 时间：2012-05-10T17:52:50.793
> 
> 标签：perl, cgi, fastcgi, cgi-bin

所以，我对 Perl 中的 CGI 编程完全陌生。问题很简单。是否有机会删除 CGI 中文本字段的内容？

我必须编写一个包含一些 popup_menu、提交按钮和文本字段（区域）的代码。

当我单击提交按钮时，程序从 popup_menu 之一读取值。任务是将此内容复制到文本字段中，然后当我从 popup_menu 中选择另一个元素（当然单击提交按钮）时，让新内容写入文本字段替换旧内容。

我认为 perldoc.perl.org 只提供了一些关于 CGI 编程的信息。我会有很多问题在thema ... :(

任何帮助都是合适的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T11:11:05.350

我想，您所描述的是：当您单击提交按钮时，您的 cgi 脚本将运行，给定您在表单中输入的参数。然后我要做的是：写回一些东西并再次打印表格 - 使用不同的值。

因此，即使这不是做这类事情的完美方式（对于简单的表单元素替换，您应该在客户端进行并使用 javascript - 您不需要 cgi 后端脚本），让我们看看 cgi 脚本如何可能看起来像。

首先，重要的是要知道如何编写表单。让我们假设您用 print 以“艰难的方式”编写它。您的脚本要做的是解析输入，然后将其作为值添加到输出中。

```
use CGI;
my $q = CGI->new;

# get the value from the popup / html select
my $popup_value = $q->param('popup_menu'); # name of the <select name="..."> in your html
# ...

# writing the form
print $q->header;
# some more prints with form etc.
print textarea( -name    => 'text_area',
                -default => $popup_value // '', # will use empty string on first call
              );
# Don't turn off autoescaping ! 
```

顺便说一句，选择选项的值是一个简短的指示符，而不是全文（即使这可能达到一定数量的字符）。因此，您可能会考虑使用要在文本区域中打印的适当值构建散列或数组，并为您的选择选项提供值 0、1、2 ...

```
my @text_values = ('', 'First text', 'second text', 'third text');
my $popup_value = $q->param('popup_menu') || 0; # default index.
# now use 1,2,3, ... as values in your popup_menu options
# ...
print textarea( -name    => 'text_area',
                -default => $text_values[$popup_value] ); 
```

# php - 将变量从 Ajax 传递到 Php

> ID：10539607
> 
> 赞同：0
> 
> 时间：2012-05-10T17:53:00.590
> 
> 标签：php, javascript, ajax, jquery

我已经查看了所有先前的示例，但仍然没有骰子，并且我有一个基本的 php 问题。

例子在[这里](http://whichchart.com/)。我希望能够单击一个表并让选项显示如下：

![例子](../Images/5eeaef99dfaf44c95b196846acdd89c0.png)

在此代码中显式声明表名有效：

```
if($_GET['action'] == 'getOptions'){
        $category = $_GET['category'];
        $query = "SELECT `COLUMN_NAME` 
                    FROM `INFORMATION_SCHEMA`.`COLUMNS` 
                    WHERE `TABLE_SCHEMA`='headfirstjson' AND 
                    **`TABLE_NAME`='AmericanOilProduction'**";

        $result = db_connection($query);
        //echo $result;
        $Options = array();

        while ($row = mysql_fetch_array($result)) {                
                $Options[] = $row;
        }
        echo json_encode(array("Options" => $Options));
        exit;
} 
```

这种通过 AJAX 传入变量的组合不会：

阿贾克斯：

```
function getOptions(category){
var category = category.value
$.ajax({
    url: "getData.php?action=getOptions",
    type: "GET",
    dataType:"json",
    data: {category:category},
    success: function(json){
        $.each(json.Options,function(){
        var option = "<option>"+this.COLUMN_NAME+"</option>"
        $('#options').append(option)
    });  
    }
});
} 
```

PHP：

```
if($_GET['action'] == 'getOptions'){
        **$category = $_GET['category']**;
        $query = "SELECT `COLUMN_NAME` 
                    FROM `INFORMATION_SCHEMA`.`COLUMNS` 
                    WHERE `TABLE_SCHEMA`='headfirstjson' AND 
                    `TABLE_NAME`='**.$category.**'";

        $result = db_connection($query);
        //echo $result;
        $Options = array();

        while ($row = mysql_fetch_array($result)) {                
                $Options[] = $row;
        }
        echo json_encode(array("Options" => $Options));
        exit;
    } 
```

如果有人可以帮助我，那就太好了！谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T17:59:00.603

您正在尝试`$category`与它周围的句点连接。双引号将扩展使表名称为“.AmericanOilProduction.”的变量。将代码更改为如下所示，删除连接运算符。这里不需要它们。你也应该清理你的输入......

```
if($_GET['action'] == 'getOptions'){
    $category = $_GET['category'];
    $query = "SELECT `COLUMN_NAME` 
                FROM `INFORMATION_SCHEMA`.`COLUMNS` 
                WHERE `TABLE_SCHEMA`='headfirstjson' AND 
                `TABLE_NAME`='$category'";

    $result = db_connection($query);
    //echo $result;
    $Options = array();

    while ($row = mysql_fetch_array($result)) {                
            $Options[] = $row;
    }
    echo json_encode(array("Options" => $Options));
    exit;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:57:03.567

我*认为*`data:`jQuery 对 URL 本身和选项中 URL 参数的存在感到困惑。

尝试将您的`action`参数放入`data:`选项中：

```
data: {
   category: category,
   action: 'getOptions'
}, 
```

# ruby - Ruby 作为一门独立的语言

> ID：10539611
> 
> 赞同：0
> 
> 时间：2012-05-10T17:53:24.020
> 
> 标签：ruby, desktop-application

我一直在摆弄 ruby​​ on rails。但我的问题真的很简单。ruby 使用的语言是否用于桌面应用程序？我的意思是没有Rails？例如，它可以与 GUI 包和图形库相结合来创建游戏吗？我读过 ruby​​ 是基于 C 的。所以它会很快，对吧？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-10T17:56:19.547

> ruby 使用的语言是否用于桌面应用程序？

是的。

> 我的意思是没有Rails？

是的。

> 例如，它可以与 GUI 包和图形库相结合来创建游戏吗？

是的，可以。

> 我读过 ruby​​ 是基于 C 的。所以它会很快，对吧？

不，它不会像 C 一样“快”，因为这不是 Ruby 的重点。Ruby 在任何意义上都不是“基于”C 的。运行 Ruby 代码的解释器*可能*是用 C 编写的（有很多解释器，但并非全部都是），但这与语言本身无关。C 和 Ruby 并没有真正的可比性，并且占据着*完全*不同的细分市场。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T18:00:30.570

我对速度至关重要的程序没有经验；但是，根据我的经验，Ruby 对于具有 GUI 的用户应用程序来说已经足够快了，并且与其他类似的动态语言几乎没有区别（Ruby 1.9 有时甚至更快）。

我不命名“相似语言”是有原因的：我认为语言基准根本没有用。虽然 Ruby 对于通用编程来说足够快这一事实可能会让您感到高兴，但我认为更重要的是，如果您已经了解并喜欢 Ruby，那么您将更有效率地使用它。

在某些限制情况下，Ruby 甚至会比 C 更快：您在 C 中对作为 Ruby 核心 lang 和 std lib 中的方法提供的函数的实现可能比 Ruby VM 中的慢。这只是说，速度通常不是问题，除非您实际上很清楚应该关注速度的特定原因。

一些不错的 GUI 库是[FXRuby](http://www.fxruby.org/)和[Shoes ，这是在](http://shoesrb.com/)[Hackety Hack](http://hackety.com/)项目中用于教孩子编程的一个非常简单的库。在使用 Ruby 和 Python 编程时，我通常使用[Tk](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/tk/rdoc/index.html)，因为它包含在标准库中，无需安装其他任何东西。

对于游戏，您可以尝试[Gosu](http://www.libgosu.org/)和[Chingu](http://ippa.se/chingu)；Gosu 可能是开发最活跃的 Ruby 游戏库，Chingu 是基于 Gosu 提供的基础的一个很好的类集合。他们没有其他游戏库（例如 Pygame）的良好社区，但您可以轻松地开始使用它们制作小游戏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T19:03:49.213

查看鞋子 GUI，它有不同的实现，每个都有一个颜色名称，最流行的红色和绿色鞋子，它们通常用于制作你在 Flash 或常规 javascript 中看到的那种游戏。它们对于那种游戏来说已经足够快了。一些实现甚至可以使用 JRuby。

*   [红鞋子](http://shoes.heroku.com/)
*   [绿色表演](https://github.com/ashbb/green_shoes)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T17:57:24.783

[Ruby](http://www.ruby-lang.org/en/)是一种语言，其通用实现（例如[ruby​​-1.9.3-pl94](http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p194.tar.gz)）是用 C 编码的解释器。 File`main.c`包含 C 中的函数，该`main`函数在 file 中设置用 C 实现的 Ruby VM `vm.c`。

您可以有多个 Ruby 实现。听说有人想在[Parrot VM](http://www.parrot.org/)上重新实现 Ruby （本身是用 C 实现的）；但这项努力或许仍在进行中。[JRuby](http://jruby.org/)是 JVM 之上的 Ruby。

事实上，解释器与编译器并没有太大的区别。许多解释器包含一个带有该 VM 的翻译器（您可以将其视为编译器）的虚拟机[。](http://en.wikipedia.org/wiki/Virtual_machine)一些 VM 实现有一个[即时](http://en.wikipedia.org/wiki/Just-in-time_compilation)动态的机器代码翻译器。JIT 部分动态生成机器代码。

[您可以使用例如Ruby-Gnome](http://ruby-gnome2.sourceforge.jp/)编写图形应用程序，它是 Gnome 和 Gtk 的粘合剂。您还可以使用[Ruby Qt](http://rubyforge.org/projects/korundum/)，它是 KDE 和 Qt 的粘合剂

# python - 创建拆分档案（zip、rar、7z）？

> ID：10539612
> 
> 赞同：3
> 
> 时间：2012-05-10T17:53:31.980
> 
> 标签：python, split, zip, 7zip, rar

**简而言之：**

*   我**需要**使用虚拟安全格式（例如 zip 或 rar 任何可行的格式！）将单个（或多个）文件拆分为多个最大大小的档案。
*   我**很想**知道某个部分什么时候完成（回调？）所以我可以开始把它运走。
*   除非不可能，否则我**宁愿不使用 rar 或 zip 命令行实用程序来执行此操作。**
*   我正试图让它在未来独立于操作系统，但现在如果只能在 linux（我的主电脑）上进行压缩，我仍然可以生活，我仍然需要让它在 Windows（妻子的电脑）中轻松打开

**长篇：**

我正在编写一个希望成为令人敬畏的备份实用程序，它扫描我的图片文件夹，压缩每个文件夹并将它们上传到注册的任何上传类（无论是邮件发送、ftp 上传、http 上传）。

我使用 zipfile 为每个文件夹创建了一个巨大的存档，但由于我的上传速度非常糟糕，我让它只在晚上工作，但我的互联网偶尔会断掉，整个事情都搞砸了。所以我决定把它分成~10MB 块。我发现无法使用 zipfile 执行此操作，因此我只是将文件添加到 zip 中，直到达到 > 10MB。

问题是通常有 200-300MB 的视频，有时还有更多的视频，我们又一次达到了半夜的截止时间。

我现在正在使用带有“rar”的子进程来创建拆分档案，但是由于目录太大而且我正在使用大压缩，即使第一个文件已经准备好，这也需要很长时间 - 这就是为什么我喜欢知道文件何时已准备好发送。

这么短的故事，我需要一种很好的方法将它分成最大大小的档案。我正在考虑让它变得有点通用，并且尽可能地防伪，因为最终我打算让它成为一些很棒的可扩展备份库..

# matlab - 在MATLAB中找到点和曲线之间的最小距离

> ID：10539613
> 
> 赞同：3
> 
> 时间：2012-05-10T17:53:33.070
> 
> 标签：matlab, distance, numeric

我想使用 MATLAB 函数来找到点和曲线之间的最小长度？该曲线由一个不太平滑的复杂函数描述。所以我希望使用现有的matlab工具来计算这个。你碰巧认识一个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T02:24:31.047

当有人说“它很复杂”时，答案也总是很复杂，因为我永远不知道你到底有什么。所以我将描述一些基本的想法。

如果曲线是已知的非线性函数，则使用符号工具箱开始。例如，考虑函数 y=x^3-3*x+5，以及 x,y 平面中的点 (x0,y0) =(4,3)。

写下距离的平方。欧几里得距离很容易写。

```
(x - x0)^2 + (y - y0)^2 = (x - 4)^2 + (x^3 - 3*x + 5 - 3)^2 
```

因此，在 MATLAB 中，我将部分使用符号工具箱来执行此操作。最小距离必须位于一阶导数的根上。

```
sym x
distpoly = (x - 4)^2 + (x^3 - 3*x + 5 - 3)^2;
r = roots(diff(distpoly))
r =
      -1.9126              
      -1.2035              
       1.4629              
      0.82664 +    0.55369i
      0.82664 -    0.55369i 
```

我对复杂的根源不感兴趣。

```
r(imag(r) ~= 0) = []
r =
      -1.9126
      -1.2035
       1.4629 
```

哪一个是距离平方的极小值？

```
subs(P,r(1))
ans =
    35.5086

subs(P,r(2))
ans =
    42.0327

subs(P,r(3))
ans =
    6.9875 
```

那是距离的平方，这里被列表中的最后一个根最小化。鉴于 x 的最小位置，当然我们可以通过代入 y(x)=x^3-3*x+5 的表达式来找到 y。

```
subs('x^3-3*x+5',r(3))
ans =
       3.7419 
```

因此，如果可以将曲线写成上述简单的函数形式，则相当容易。对于仅从平面中的一组点已知的曲线，您可以使用我的[distance2curve](http://www.mathworks.com/matlabcentral/fileexchange/34869-distance2curve)实用程序。它可以在 n 维空间曲线样条插值上找到最接近给定点的点。

对于其他曲线，比如椭圆，通过转换为极坐标可能最容易求解，其中椭圆很容易以参数形式写成极角的函数。完成后，像以前一样写下距离，然后求解导数的根。

一个难以解决的情况是函数被描述为不太平滑。这是噪声还是不可微分曲线？例如，三次样条曲线在某种程度上“不太平滑”。分段线性函数在中断处甚至更不平滑。如果您实际上只有一组数据点，其中有一点噪音，您必须决定是否消除噪音。您是希望在平滑近似上找到最近点，还是在插值曲线上寻找最近​​点？

对于数据点列表，如果您的目标是不进行任何平滑处理，那么我的[distance2curve](http://www.mathworks.com/matlabcentral/fileexchange/34869-distance2curve)实用程序也是一个不错的选择，它使用线性插值。如果您想自己进行计算，如果您有足够的数据点，那么您可以通过简单地选择最接近的数据点本身来找到一个很好的近似值，但如果您的数据间隔不是很近，这可能是一个很差的近似值。

如果您的问题不属于这些类之一，您仍然可以经常使用多种方法解决它，但我需要了解有关该问题的更多细节才能获得更多帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T18:35:15.237

有两种方法可以解决这个问题。

如果您的曲线相当平滑并且您不需要太高的精度，那么简单的方法是在密集的点上评估您的曲线并简单地找到最小距离：

```
t = (0:0.1:100)';
minDistance = sqrt( min( sum( bxsfun(@minus, [x(t),y(t)], yourPoint).^2,2))); 
```

更难的方法是最小化描述距离的`t`（或）函数`x`

```
distance = @(t)sum( (yourPoint - [x(t),y(t)]).^2 );
%# you can use the minimum distance from above as a decent starting guess
tAtMin = fminsearch(distance,minDistance);

minDistanceFitte = distance(tAtMin); 
```

# sass - Compass: Mixins 只能定义在文档的根目录

> ID：10539618
> 
> 赞同：1
> 
> 时间：2012-05-10T17:54:05.753
> 
> 标签：sass, compass-sass

我不是 ruby​​ 开发人员，我使用 Compass 已经有 6 个月的时间了。我发现了如下所示的这个问题。

我已阅读此问题并使用了评分最高的答案： [升级到 sass-3.1.8 后出现错误](https://stackoverflow.com/questions/7616850/getting-error-after-ugrading-to-sass-3-1-8)

Sass`Sass 3.1.1 (Brainy Betty)`
版本：（根据建议）指南针版本：（`Compass 0.12.1 (Alnilam)`最新）

我运行这个命令：`compass compile --force`在项目内部时。

```
error sass/screen.scss (Line 3 of _utilities.scss: Mixins may only be defined at the root of a document.) 
```

这看起来像是自动包含的文件。我绝对找不到任何地方。我的主 screen.scss 文件如下所示：

```
 @import "partials/base";
  @import "blueprint/reset";
  @import "compass/css3";
  @import "sprite/*.png";
  $sprite-layout:vertical;
  $sprite-spacing: 15px;
  @include all-sprite-sprites;
  ....//blah blah blah rest of rules .... 
```

帮助！

# php - 向亚马逊出口变体产品

> ID：10539623
> 
> 赞同：1
> 
> 时间：2012-05-10T17:54:21.820
> 
> 标签：php, amazon-mws

请任何人帮助我了解如何将具有变体的产品出口到亚马逊。

我知道我必须发送：

*   产品饲料
*   定价饲料
*   图像馈送
*   库存提要

最后一个是关系羊饲料。

有人可以举一个产品提要和关系羊提要的工作示例吗？找遍了，没找到，非常感谢帮助！

```
<feed><product></product></feed> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:09:05.417

如果您还没有，请查看[MWS 文档的 feeds](https://images-na.ssl-images-amazon.com/images/G/01/mwsportal/doc/en_US/bde/MWSFeedsApiReference._V135478122_.pdf)。

此外，请查看[XML 文档](https://images-na.ssl-images-amazon.com/images/G/01/rainier/help/XML_Documentation_Intl._V162213417_.pdf)，其中包含一些示例 XML 文档以及 XSD 文件。

您还可以找到用于提要的[PHP 示例应用程序。](https://developer.amazonservices.com/gp/mws/api.html/192-4179144-8121723?ie=UTF8&section=feeds&group=bde&version=latest)

而且，一个有用的工具是[MWS 暂存器](https://mws.amazonservices.com/scratchpad/index.html)，它是各种 MWS 方法的 Web 前端。

# sql - 在 Oracle SQL 中执行 MERGE 时，如何更新 SOURCE 中不匹配的行？

> ID：10539627
> 
> 赞同：15
> 
> 时间：2012-05-10T17:54:36.393
> 
> 标签：sql, oracle, sql-merge

我有一个`main`数据库和一个`report`数据库，我需要将一个表`main`从`report`.

但是，当数据库中的项目被删除时`main`，我只想`IsDeleted`在数据库中设置一个标志`report`。

什么是一种优雅的方式来做到这一点？

我目前正在使用 MERGE 语句，如下所示：

```
MERGE INTO report.TEST target
USING (SELECT * FROM main.TEST) source
   ON (target.ID = source.ID)
WHEN MATCHED THEN
    UPDATE SET (target... = source...)
WHEN NOT MATCHED THEN
    INSERT (...) VALUES (source...)
; 
```

该`WHEN NOT MATCHED`语句为我提供了来自 的所有新值`main`，但我也想更新来自 的所有旧值`report`。

我正在使用 Oracle PL/SQL。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-10T18:20:03.323

您可以使用单独的 UPDATE 语句来完成

```
UPDATE report.TEST target
SET    is Deleted = 'Y'
WHERE  NOT EXISTS (SELECT 1
                   FROM   main.TEST source
                   WHERE  source.ID = target.ID); 
```

我不知道有什么方法可以将它整合到您的 MERGE 语句中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-05-16T15:08:59.297

以下答案是**将数据合并到同一张表中**

```
MERGE INTO YOUR_TABLE d
USING (SELECT 1 FROM DUAL) m
    ON ( d.USER_ID = '123' AND d.USER_NAME= 'itszaif') 
WHEN NOT MATCHED THEN
        INSERT ( d.USERS_ID, d.USER_NAME)
        VALUES ('123','itszaif'); 
```

该命令检查是否匹配`USER_ID`，`USER_NAME`如果不匹配则插入。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-11T18:34:35.720

```
MERGE INTO target
USING
(
    --Source data
    SELECT id, some_value, 0 deleteMe FROM source
    --And anything that has been deleted from the source
    UNION ALL
    SELECT id, null some_value, 1 deleteMe
    FROM
    (
        SELECT id FROM target
        MINUS
        SELECT id FROM source
    )
) source
   ON (target.ID = source.ID)
WHEN MATCHED THEN
    --Requires a lot of ugly CASE statements, to prevent updating deleted data
    UPDATE SET target.some_value =
        CASE WHEN deleteMe=1 THEN target.some_value ELSE source.some_value end
    ,isDeleted = deleteMe
WHEN NOT MATCHED THEN
    INSERT (id, some_value, isDeleted) VALUES (source.id, source.some_value, 0)

--Test data
create table target as
select 1 ID, 'old value 1' some_value, 0 isDeleted from dual union all
select 2 ID, 'old value 2' some_value, 0 isDeleted from dual;

create table source as
select 1 ID, 'new value 1' some_value, 0 isDeleted from dual union all
select 3 ID, 'new value 3' some_value, 0 isDeleted from dual;

--Results:
select * from target;

ID  SOME_VALUE   ISDELETED
1   new value 1  0
2   old value 2  1
3   new value 3  0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T07:17:52.667

```
merge into x as target using y as Source on target.ID = Source.ID
when not matched by target then insert
when matched then update
when not matched by source and target.ID is not null then
update whatevercolumn = 'isdeleted' ; 
```

# android - WindowManager.LayoutParams 动画

> ID：10539632
> 
> 赞同：3
> 
> 时间：2012-05-10T17:54:58.200
> 
> 标签：android, animation, imageview, layoutparams

我有一个`ImageView`我正在添加的`WindowManager.addView(ImageView, WindowManager.LayoutParams)`. 我想动画它出现在屏幕上的时间，但是当我调用该方法`ImageView`时它似乎没有动画。下面是我的代码...`ImageView.startAnimation(Animation)``addView()`

```
image = new ImageView(context);
image.setImageResource(R.drawable.image);
image.setAlpha(180);
WindowManager.LayoutParams params = new WindowManager.LayoutParams(WindowManager.LayoutParams.WRAP_CONTENT,
     WindowManager.LayoutParams.WRAP_CONTENT,
     WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY, 0, PixelFormat.TRANSLUCENT);
windowManager.addView(image, params);
image.startAnimation(AnimationUtils.loadAnimation(getContext(), R.anim.grow)); 
```

这是grow.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <scale android:fromXScale="0" 
           android:toXScale="1"
           android:fromYScale="0"
           android:toYScale="1"
           android:pivotX="50%"
           android:pivotY="50%"
           android:duration="350"/>
    <alpha android:fromAlpha="0.0" android:toAlpha="1.0" android:duration="350" />
</set> 
```

图像只是出现在窗口中并且没有动画，有谁知道我怎样才能让图像动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T16:59:03.577

如果您决定使用该`windowAnimations`字段，您指定的常量必须是系统资源；它不能是应用程序资源，因为窗口管理器无权访问应用程序。请参阅[文档](https://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#windowAnimations)）。

# c# - 如何在 C# 中有效地获取字节数组的子集（前 N 个元素）？

> ID：10539638
> 
> 赞同：7
> 
> 时间：2012-05-10T17:55:21.900
> 
> 标签：c#, .net

我有一个最大大小为 1K 的字节数组缓冲区。我想写出数组的一个子集（子集的开头总是元素 0，但我们感兴趣的长度在一个变量中）。

这里的应用是压缩。我将缓冲区传递给压缩函数。为简单起见，假设压缩将导致数据等于或小于 1K 字节。

```
byte[] buffer = new byte[1024];
while (true)
{
    uncompressedData = GetNextUncompressedBlock();
    int compressedLength = compress(buffer, uncompressedData);

    // Here, compressedBuffer[0..compressedLength - 1] is what we're interested in

    // There's a method now with signature Write(byte[] compressedData) that
    // I won't be able to change. Short of allocating a custom sized buffer,
    // and copying data into the custom sized buffer... is there any other
    // technique I could use to only expose the data I want?
} 
```

我真的很想避免在这里复制——这似乎完全没有必要，因为所需的所有数据都`buffer`已经在里面了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T18:08:17.947

Buffer.BlockCopy 将是我的选择。

微软示例：http: [//msdn.microsoft.com/en-us/library/system.buffer.blockcopy.aspx](http://msdn.microsoft.com/en-us/library/system.buffer.blockcopy.aspx)

```
const int INT_SIZE = 4;
int[] arr = { 2, 4, 6, 8, 10, 12, 14, 16, 18, 20 };
Buffer.BlockCopy(arr, 3 * INT_SIZE, arr, 0 * INT_SIZE, 4 * INT_SIZE);
foreach (int value in arr)
   Console.Write("{0}  ", value);
// The example displays the following output:
//       8  10  12  14  10  12  14  16  18  20 
```

您的代码如下所示：

```
uncompressedData = GetNextUncompressedBlock();      
int compressedLength = compress(buffer, uncompressedData);
Buffer.BlockCopy(buffer, 0, buffer, 0, compressedLength); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-10T18:01:30.727

如果您无法更改方法签名，那么您将陷入困境。您不能在*类型为 byte[] 的字节数组上*创建“视图” 。理想的解决方案是操作采用 an`ArraySegment<byte>`或 a`byte[]`后跟偏移量和计数。如果您真的无法更改 Write 方法，那么不幸的是，您只能创建一个新数组并将数据复制到其中。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-10T18:23:37.760

```
 byte[] b = new Byte[] {1, 2, 3, 4, 5};
    IEnumerable<Byte> middle = b.Skip(2).Take(3); 
```

这应该让你得到你喜欢的任何中间部分。这很可能会复制，但我认为您不应该尝试避免这种情况。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-10T18:08:35.463

你没有办法做到这一点。[Array.Resize](http://msdn.microsoft.com/en-us/library/bb348051)不是更改数组的长度，而是简单地将其复制到一个新的数组实例中。

但是，您可以使用[Buffer 类](http://msdn.microsoft.com/en-us/library/system.buffer%28v=vs.95%29.aspx)，它具有更好的性能：

> Buffer 提供了将字节从一个原始类型数组复制到另一个原始类型数组、从数组中获取字节、在数组中设置字节以及获取数组长度的方法。与 System.Array 类中的类似方法相比，此类为操作原始类型提供了更好的性能。

这符合您的需求，因为您有一个字节数组，而 byte 是一种原始类型。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-10T18:02:30.680

如果方法签名是`(byte[])`你不能做任何事情，只能复制。

如果您可以更改签名：

*   流支持写入数组的子集，因此具有类似[Stream.Write](http://msdn.microsoft.com/en-us/library/system.io.stream.write.aspx)的签名的请求并不罕见：

    `public abstract void Write( byte[] buffer, int offset, int count)`

*   另一种选择是通过`IEnumerable<byte>`，这样您就可以在不复制的情况下以任何方式对数组进行切片。

# javascript - 如何使用 PhantomJS 测试网页是否返回 404/500？

> ID：10539643
> 
> 赞同：7
> 
> 时间：2012-05-10T17:55:34.970
> 
> 标签：javascript, phantomjs

我是 PhantomJS 和 Javascript 的新手，我正在编写一个测试加载时间的脚本，我希望它能够检测在测试时是否遇到错误 404/500，并在 console.log 中显示和消息. 代码如下：

```
var page = require('webpage').create(), t, address;
t = Date.now();

var testArray =
['someURL'];

function loadTest(testURL)
{
address = testURL;
page.open(address, function (status) {
    if (status !== 'success') {
        console.log('FAIL to load the address' + address);
return;
    }

});
}

for(var i = 0; i < testArray.length; i++)
{
loadTest(testArray[i]);
t = Date.now() - t;
console.log('Testing ' + testArray[i]);
console.log('Loading time ' + t + ' msec\n');
}
phantom.exit(); 
```

非常感谢您的帮助。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T13:55:26.153

你可能想看看`onResourceReceived`对页面对象的回调，你应该能够从那里得到你需要的东西。（[API 文档...](https://github.com/ariya/phantomjs/wiki/API-Reference#wiki-webpage-onResourceReceived)）

这是一个人为的例子，它将返回作为请求的一部分检索到的每个资源的状态代码，但第一个将是页面本身（即，与支持 JS 或 CSS 等相反） ):

```
var page = require('webpage').create();

page.onResourceReceived = function(res) {
  if (res.stage === 'end') {
    console.log('Status code: ' + res.status);
  }
};

page.open('http://some.url/that/does-not-exist', function() {
  phantom.exit();
}); 
```

当然，这假设服务器将实际返回一个 404（例如，与伪装成 404 的 200 相对）——但是这些方面的东西应该会给你你想要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T23:45:36.993

我不相信 PhantomJS 目前支持返回 HTTP 响应代码。为此，[WebPage](https://github.com/ariya/phantomjs/blob/master/src/webpage.cpp)对象需要公开 QNetworkReply 对象并获取其 HTTP 响应代码。

在 C++ 代码中可以这样获取 HTTP 响应代码：

```
int statusCode = reply->attribute(QNetworkRequest::HttpStatusCodeAttribute).toInt(); 
```

在将其集成到 PhantomJS 的源代码中之前，我认为您只需要测试“成功”或“失败”即可。如果您确实需要查看 HTTP 响应代码，可以运行 CURL 脚本来检查来自服务器的响应。我怀疑“成功”或“失败”对于您的目的来说是可以的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-20T15:06:00.137

作为@founddrama 答案的补充，如果您有一个样式化的 404 页面并加载了一些资产，onResourceReceived 将显示所有这些资产的状态，所以我建议您将代码更改为类似

```
var definedStatus = false;
page.onResourceReceived = function(res) {
    if (res.stage === 'end' && definedStatus === false) {
        definedStatus = res.status;
    }
};

page.open(url, function(status) {
    if (status == 'success' && definedStatus == 200) {    
        // do something
        phantom.exit();
    } else {
        console.log("Erro")
        phantom.exit(1);
    }
}); 
```

所以你将只有你请求的页面的状态

# actionscript-3 - Flex：在 Spark DataGrid 中显示 URL 链接运行到相邻列

> ID：10539644
> 
> 赞同：0
> 
> 时间：2012-05-10T17:55:48.713
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4

这是一个可以运行的独立应用程序，它说明了我的问题。当在 Flex spark DataGrid 中使用 LinkBut​​ton 来显示可点击的 URL 时，如果 URL 的列宽变得太短（即可能由用户调整），则显示的 URL 文本会运行到它的相邻列中。如果您运行下面的代码，您将看到以下内容：

![在此处输入图像描述](../Images/57d4f0a0cea9374dd6a3486a48bd564d.png)

有人知道如何改进吗？理想情况下，URL 文本将被截断以适应其列的宽度，并且每当发生这种截断时都会显示工具提示（例如，类似于 spark Label 属性`showTruncationTip="true"`）。人们在实践中做什么？

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
   xmlns:s="library://ns.adobe.com/flex/spark" 
   xmlns:mx="library://ns.adobe.com/flex/mx"
   minWidth="300" minHeight="300">
   <fx:Declarations>
     <!-- Define the data -->
     <fx:XMLList id="siteList">
       <site> <name>IMDB</name> <url>http://www.imdb.com</url> </site>
       <site> <name>BoardgameGeek</name> <url>http://www.boardgamegeek.com</url> </site>
       <site> <name>Yahoo! Finance</name> <url>http://finance.yahoo.com</url> </site>
     </fx:XMLList>
     <!-- Use an XMLListCollection for the Spark DataGrid -->
     <s:XMLListCollection id="siteList2" source="{siteList}"/>
  </fx:Declarations>
  <s:layout> <s:VerticalLayout/> </s:layout>
  <s:Panel title="Spark DataGrid Links" width="300" height="300"
      horizontalCenter="0" verticalCenter="0">
    <s:DataGrid id="sparkDataGrid"
        width="100%" height="100%"
        dataProvider="{siteList2}">
        <s:columns>
            <s:ArrayList>
                <s:GridColumn dataField="url" headerText="URL" width="150"  itemRenderer="myItemRenderer"/>
                <s:GridColumn dataField="name" headerText="Name"/>
            </s:ArrayList>
        </s:columns>
    </s:DataGrid>
  </s:Panel>    
</s:Application> 
```

名为 myItemRenderer.mxml 的文件（位于同一目录中）是：

```
<?xml version="1.0" encoding="utf-8"?>
  <s:GridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    xmlns:mx="library://ns.adobe.com/flex/mx" >

  <s:HGroup height="25" verticalAlign="middle" horizontalAlign="left">
    <mx:LinkButton label="{data.url}" 
       textDecoration="underline" 
       textRollOverColor="0x7777FF" 
       click="navigateToURL(new URLRequest(data.url))" 
       width="100%" 
       labelPlacement="left" 
       color="0x0000DD"/>       
  </s:HGroup>
</s:GridItemRenderer> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:27:31.197

**对此进行改进**的一种方法（不截断并根据需要显示在工具提示上）是`clipAndEnableScrolling`在`true`您的`GridItemRenderer`.

```
<s:GridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    xmlns:mx="library://ns.adobe.com/flex/mx" 
    clipAndEnableScrolling="true"> 
```

这将强制链接不超过其允许的视口，因此文本不会覆盖您的其他列文本。在几分钟的实验中，我无法强制它截断并显示在工具提示上。

# zend-framework - Zend Lucene 和 Symfony：一个大索引与几个多个索引

> ID：10539646
> 
> 赞同：0
> 
> 时间：2012-05-10T17:56:13.240
> 
> 标签：zend-framework, symfony1, lucene, doctrine, symfony-1.4

我正在 symfony 中进行一项新设计，其中包括大量相关的表。

遵循 symfony 教程，并在网络上进行了一些研究，使我决定使用 Zend lucene 索引来提供搜索功能。

我希望能够跨多个表进行搜索，但能够区分结果以便在显示搜索结果时调用适当的模块操作。

如果您能给我一些关于在索引文档中包含不同信息的大索引（并且可能包括指示它对应于哪个模型的文件）与为每个表具有更同质索引文档的单独索引的意见，我将不胜感激结构体。

非常感谢，对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T19:17:44.303

通常，您可能希望将要搜索的所有内容都包含在一个索引中。它会更容易，并且无论如何可能会有很小的性能差异。

大索引的主要问题是每次索引更改时您都必须进行一些处理，因此如果您确实有不相交的数据，那么如果您正在为不需要的更改重新加热，那么您会失去一些性能。

但这不太可能对您产生显着影响。

# ruby-on-rails - 通过 hotmail 邀请使用 rails 联系人

> ID：10539647
> 
> 赞同：3
> 
> 时间：2012-05-10T17:56:18.797
> 
> 标签：ruby-on-rails, api, hotmail

我需要向 hotmail 联系人发送邀请邮件。我正在尝试为此使用[这个](https://github.com/mrThe/omnicontacts)宝石。这适用于 gmail 和 yahoo，但对于 hotmail 则不能：

> 他们的 API 返回一个不包含电子邮件字段的联系人对象！

然后，我尝试使用[这个](https://github.com/cardmagic/contacts)gem，但是它太旧了，现在不起作用。微软官方文档很差，我无法在谷歌上搜索一些示例。

有什么解决方案吗？也许是不同的 gem、api 或其他东西。

如果重要的话，我正在使用 ruby​​-1.9.2 和 rails 3.1.0。

PS对不起我的英语不好，这不是我的母语。如果有问题，请更正我的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T10:03:38.727

Hotmail 使用实时连接。有关实时连接的更多信息，请参见此处：

[http://msdn.microsoft.com/en-us/live](http://msdn.microsoft.com/en-us/live)

它使用带有 oauth 通信的 REST Api。

有关其余 api 的更多信息，请参见此处：

[http://msdn.microsoft.com/en-us/library/ff748607.aspx](http://msdn.microsoft.com/en-us/library/ff748607.aspx)

编辑：这是关于如何实现[http://msdn.microsoft.com/en-us/library/ff752216.aspx的概述/指南](http://msdn.microsoft.com/en-us/library/ff752216.aspx)

# c++ - 轮廓的排序点

> ID：10539656
> 
> 赞同：4
> 
> 时间：2012-05-10T17:56:58.777
> 
> 标签：c++, image-processing, opencv

我通过以下方式检测到一个矩形：

1.  寻找轮廓
2.  近似多边形

然后我试图找到矩形的角为：

```
imgPoints[0]=contours_poly[i][0];  
imgPoints[1]=contours_poly[i][1];  
imgPoints[3]=contours_poly[i][3];  
imgPoints[2]=contours_poly[i][2]; 
```

由于参考点，我想以预定义的顺序对这些点进行排序。假设我想从 0 点开始，我该如何排序之前的点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T18:10:24.293

如果您从点到点计算向量`0`和`x`，`y`它们的[叉积](http://en.wikipedia.org/wiki/Cross_product)将告诉您向量更逆时针。

代码示例[在问题“按顺时针顺序排列四个点”中给出](https://stackoverflow.com/a/242509/13767)。

# extjs - extjs 刷新树存储

> ID：10539662
> 
> 赞同：2
> 
> 时间：2012-05-10T17:57:46.113
> 
> 标签：extjs, tree, store

如何刷新树商店？

我试图这样做：

```
Ext.getStore('myStore').setRootNode({child: []}); 
```

然后商店会要求服务器生孩子，但有时它会给我一个双倍的孩子。在我的树中，我得到类似的东西：

```
child1
child2
child1 
```

还有一个javascript错误：

```
Uncaught TypeError: Cannot read property 'internalId' of undefined
Ext.define.updateIndexes ext-all-debug.js:61588
Ext.define.onAdd ext-all-debug.js:61513
Base.implement.callParent ext-all-debug.js:3728 
```

这是一个错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T21:43:33.410

我不确定您使用的是哪个版本的 extjs，但这是我在 4.1 中使用 load 方法刷新我的商店的方式（您可能有也可能没有参数，我有一个）：

```
this.getStore('MyTreeStore').load({ params: { id: this.getId().getValue()} }); 
```

商店用新记录刷新，没有任何先前加载的重复记录。

我的商店设置如下：

```
Ext.define('MyApp.store.MyTreeStore', {
    extend: 'Ext.data.TreeStore',
    model: 'MyApp.model.MyTreeModel',

    root: {
          children: []
    },

    proxy: {
        type: 'ajax',
        url: '/MyApp/Chart/GetTree'
    },
    fields: [
         { name: 'id', type: 'int' }
    ]
}); 
```

我的树看起来像这样：

```
Ext.define('MyApp.view.chart.MyTree', {
    extend: 'Ext.tree.Panel',
    alias: 'widget.mytree',

    id: 'MyTree',
    store: 'MyTreeStore',
    width: 350,
    height: 320,
    border: false,
    rootVisible: false,
    singleExpand: true
}); 
```

# .net - 我的托管应用程序中的哪个线程导致了崩溃？

> ID：10539665
> 
> 赞同：2
> 
> 时间：2012-05-10T17:58:14.143
> 
> 标签：.net, debugging, windbg

我的windbg技能有点生疏，如果这很明显，请原谅我。

3 个线程对它们有例外。这是否意味着它们在每个线程的堆栈顶部？我不明白这是怎么发生的，因为第一个会导致未处理的异常处理程序启动并崩溃我的应用程序。下面的缩写输出。

```
!threads

   0    1 1e5c 0015c008   2006020 Enabled  00000000:00000000 0015a4a8     6 STA
   2    2 2734 00176740      b220 Enabled  00000000:00000000 0015a4a8     0 MTA (Finalizer)
   4    3 1f64 001b22d0   880b220 Enabled  00000000:00000000 0015a4a8     0 MTA 
  25   14 2714 0897ef78   180b220 Enabled  39e4bf38:39e4cbec 0015a4a8     0 MTA (Threadpool Worker)
  29   19 1884 0898a3b8  1000b221 Disabled 39f36d50:39f38bec 0015a4a8     0 MTA System.Threading.ThreadAbortException (39f36bf8)
  71   57 164c 274b41f0      b220 Enabled  39ef4098:39ef4bec 0015a4a8     4 MTA System.NullReferenceException (39ef3028)
  72   58 223c 274b1110   200b220 Enabled  00000000:00000000 0015a4a8     0 MTA
 107   83 1e60 275fe008      b020 Enabled  00000000:00000000 0015a4a8     0 MTA System.ObjectDisposedException (1e66684c) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T23:53:42.393

该`!threads`命令输出每个线程的最后一个异常。由于所有线程都可能同时发生异常，因此您可以看到多个异常，但根据我的经验，这并不常见。

但是，我确实注意到输出列出了 107 的线程 id，所以我假设应用程序创建了很多线程。我还注意到一些线程持有多个锁。也许一个或多个线程在异常仍然存在于堆栈上的状态下被阻塞。

手头的信息很难说更具体的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T22:06:17.820

您可以在 Debug->Event Filters 下设置希望 WinDbg 中断的异常。我没有使用 WinDbg 完成 .net 调试，但我之前使用这些事件过滤器来捕获特定处理的异常以获取违规代码的调用堆栈。

当然，发生许多已处理的异常是很正常的，所以我不知道您的应用程序状态的真正含义，但您应该能够切换线程并转储调用堆栈并检查异常上下文记录或设置是否需要WinDbg 在这些异常发生时中断，然后当它们发生时比较调用堆栈，点击 go 并通过启用/禁用它们作为消除过程来查看它是否崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T09:37:26.250

通常如果你在windbg中打开一个崩溃转储，它会在加载崩溃转储后立即给出导致崩溃的异常。您应该在 windbg 中看到与此类似的消息

*“此转储文件中存储了一个感兴趣的异常。存储的异常信息可以通过 .ecxr 访问。（1890.da0）：堆栈溢出 - 代码 c00000fd（第一次/第二次机会不可用）”*

并且一旦加载故障转储，导致异常的线程应该与您在windbg左下角看到的线程号相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T07:14:39.057

好的，所以似乎无法确定哪个线程导致调试器调用。

# ajax - django save(commit = False) vs 设置初始值

> ID：10539667
> 
> 赞同：1
> 
> 时间：2012-05-10T17:58:20.617
> 
> 标签：ajax, django, form-submit, commit

我有一个 django 项目，在其中一个页面中我有一个表单，我可以`commit=False`在其中设置一个表单，`form.save`以便为外键添加一个值。

当我这样做时，表单中的其余值不会保存。

基本上我收到两个错误，具体取决于我保存表单的方式。

第一个是当我使用`save.(commit=False)`

代码：

```
form = RecipeForm()
form = form.save(commit=False)
form.original_cookbook = request.user.cookbooks.all()[0]
form.save() 
```

错误：

```
IntegrityError at /cookbook/createrecipe/

(1048, "Column 'ingredients' cannot be null")

Request Method:     POST 
```

但我知道我的成分字段不为空。

第二个错误是我不使用提交而是设置了一个初始值。

代码：

```
form = RecipeForm(initial = {'original_cookbook' : request.user.cookbooks.all()[0]})
form.save() 
```

错误：

```
IntegrityError at /cookbook/createrecipe/

(1048, "Column 'original_cookbook_id' cannot be null")

Request Method:     POST 
```

知道为什么这些方法似乎都不起作用吗？只是为了让您知道我正在尝试通过 AJAX 提交表单...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T18:12:03.670

您的原始表单未绑定，这就是为什么当您尝试保存它时，由于字段为空，它无法验证。

你应该使用：

```
form = RecipieForm(request.POST) 
```

这将从填写的值填充表单，然后您可以正常进行。

# iphone - 我如何利用 NSCoding 将对象转换为 NSDictionary ？

> ID：10539668
> 
> 赞同：3
> 
> 时间：2012-05-10T17:58:24.737
> 
> 标签：iphone, objective-c, ios, cocoa

我有一个实现 NSCoding 的 Objective-C 类。我需要以 NSDictionary 的形式返回此类实例的表示形式，其中键是属性名称，值是属性值。

如何在 Objective-C 中进行这种转换？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T18:22:07.750

NSObject 有一个方法`dictionaryWithValuesForKeys:`。从文档中：

> 返回一个字典，其中包含由给定数组中的每个键标识的属性值。

也有相应的`-setValuesForKeysWithDictionary:`方法。

NSCoding 实际上并没有在这里发挥作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T18:27:33.647

创建一个子类应该很简单[`NSCoder`](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSCoder_Class/Reference/NSCoder.html)，其`encode<thing>:forKey:`方法只是将 s 粘贴`thing`到字典中，然后您可以检索它。

```
@implementation DriisDictCoder
{
    NSMutableDictionary * encodedDict;
}

- (void)encodeDouble: (double)v forKey: (NSString *)k {
    [codedDict addObject:[NSNumber numberWithDouble:v] forKey:k];
}

// etc.

// Custom method
- (NSDictionary *)dictForEncodedObject {
     return encodedDict;
}

@end 
```

然后你创建你的编码器的一个实例，并发`encodeWithCoder:`送到你想要在字典中的这个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T18:26:50.323

安德鲁马德森所说的。但是，如果您想使用 NSCoding，则必须使用 NSKeyedArchiver 将对象编码为 NSData 对象，然后将该 NSData 放入字典中。但是，如果这是令人担忧的，那将不是人类可读的。干杯

编辑：重新阅读您的问题，这确实是 Andrew 所说的，因为您想要 1:1 表示字典中的键：值 - NSCoding 方法将为您提供整个对象作为字典键的值。所以，+1 给安德鲁。

# java - 在 Apache FileUpload Streaming API 中读取文件之前确定文件上传的大小

> ID：10539669
> 
> 赞同：5
> 
> 时间：2012-05-10T17:58:36.610
> 
> 标签：java, file-upload, apache-commons-fileupload

有两种方法可以使用 Apache FileUpload 库。

上传文件

[http://commons.apache.org/fileupload/using.html](http://commons.apache.org/fileupload/using.html)

和流式文件上传 API

[http://commons.apache.org/fileupload/streaming.html](http://commons.apache.org/fileupload/streaming.html)

它们都工作得很好，只是流 API 似乎没有办法在处理流之前检查文件大小。

这是因为 Streaming API 从根本上不知道文件大小，还是因为我需要手动读取一些标头或其他内容来获取 Multipart 上传大小？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-10T18:01:42.660

如果不消耗整个 HTTP 请求正文，就无法知道多部分请求的一部分的大小。而且一旦开始消费 HTTP 请求体，就不能中途停止消费。它必须被消耗到最后一个字节才能返回响应。这就是 HTTP 和 TCP/IP 的本质。但是，为了保持服务器内存使用率低，您可以在读取字节超过大小时丢弃它们（即在读取循环中检查它并且不要将它们分配给任何变量）。

最好的办法是在上传之前在 JavaScript 中验证文件长度。这在[支持](http://caniuse.com/fileapi)HTML5 [`File`](http://dev.w3.org/2006/webapi/FileAPI/)API 的浏览器中受支持。当前版本的 Firefox、Chrome、Safari、Opera 和 Android 都支持它。IE9还不支持，以后的IE10会支持。

```
<input type="file" ... onchange="checkFileSize(this)" /> 
```

`checkFileSize()`看起来像这样的地方

```
function checkFileSize(inputFile) {
    var max = 10 * 1024 * 1024; // 10MB

    if (inputFile.files && inputFile.files[0].size > max) {
        alert("File too large."); // Do your thing to handle the error.
        inputFile.value = null; // Clear the field.
    }
} 
```

# c# - 读取/解密加密的 XML 文件，然后在内部处理

> ID：10539670
> 
> 赞同：2
> 
> 时间：2012-05-10T17:58:39.463
> 
> 标签：c#, xml, xml-parsing, encryption

我过去曾使用此代码来编写和读取 xml 文件。这次我想写一些加密生成的 XML，然后在内部读取并处理它。我将发布代码，也许有人可以发现问题。

当我测试解密时，我已经能够输出一个包含连续空字符代码行的文件。加密文件似乎包含数据，并且大小随数据量的不同而变化。

请帮忙，谢谢！

## 加密

```
MemoryStream ms = new MemoryStream();
XmlTextWriter xmlwriter = new XmlTextWriter(ms,Encoding.UTF8);
FileStream EncryptedFileStream = new FileStream(file, FileMode.Create, FileAccess.Write);

DESCryptoServiceProvider DES = new DESCryptoServiceProvider();
DES.Key = ASCIIEncoding.ASCII.GetBytes("AAAAAAAA");
DES.IV = ASCIIEncoding.ASCII.GetBytes("AAAAAAAA");

ICryptoTransform desEncrypt = DES.CreateEncryptor();
CryptoStream cryptostream = new CryptoStream(EncryptedFileStream, desEncrypt, CryptoStreamMode.Write);

/*create working and tested XML data here*/

byte[] bytearray = new byte[ms.Length];

ms.Read(bytearray, 0, bytearray.Length);
cryptostream.Write(bytearray, 0, bytearray.Length);

cryptostream.Close();

EncryptedFileStream.Close();

xmlwriter.Close();
ms.Flush();
ms.Close(); 
```

## 解密

```
MemoryStream ms = new MemoryStream();
StreamWriter swDecrypt = new StreamWriter(ms);

DESCryptoServiceProvider DES = new DESCryptoServiceProvider();
DES.Key = ASCIIEncoding.ASCII.GetBytes("AAAAAAAA");
DES.IV = ASCIIEncoding.ASCII.GetBytes("AAAAAAAA");

ICryptoTransform desDecrypt = DES.CreateDecryptor();

FileStream fsDecrypt = new FileStream(mstrIndexFile, FileMode.Open, FileAccess.Read);

CryptoStream cryptostreamDecr = new CryptoStream(fsDecrypt, desDecrypt, CryptoStreamMode.Read);

swDecrypt.Write(new StreamReader(cryptostreamDecr).ReadToEnd());
swDecrypt.Flush();
ms.Position = 0; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T18:06:11.613

使用您当前的体系结构，您需要使用刚刚填充数据的 MemoryStream（不要忘记将其位置重置为零并刷新任何挂起的写入）

```
//I am currently stuck on this point.
swDecrypt.Flush();
ms.Position=0;
XmlTextReader lxmlReader = new XmlTextReader(ms); 
```

但是，我的感觉是你不需要 MemoryStream 这里。相反，只需将 CryptoStream 提供给 XmlTextReader：

```
CryptoStream cryptostreamDecr = new CryptoStream(.....
XmlTextReader lxmlReader = new XmlTextReader(cryptostreamDecr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T15:11:19.530

经过多次试验和错误，我被指出使用页面上的第一种方法进行[XML 元素加密。](http://msdn.microsoft.com/en-us/library/system.security.cryptography.xml.encryptionmethod%28v=vs.100%29.aspx)这种方法更容易和直接。如果有人决定使用它，请确保您在加密和解密中使用相同的 KEY 和 IV（如果它们发生在不同的地方）。

基本上，复制粘贴操作，您可以通过传入根元素来加密整个文档！

-感觉古德曼

# python - 在 Mint 上安装 M2Crypto 时出现问题

> ID：10539676
> 
> 赞同：1
> 
> 时间：2012-05-10T17:59:05.907
> 
> 标签：python, gcc, swig, m2crypto, linux-mint

我正在尝试在 Mint 12 上为 python 安装 M2Crypto。我已经执行了`python setup.py build，但构建失败，说明

```
error: command 'gcc' failed with exit status 1 
```

前面两行说明 Python.h 可能有问题：

```
SWIG/_m2crypto_wrap.c:126:20: fatal error: Python.h: No such file or directory
compilation terminated 
```

如果有人知道需要做什么来解决这个问题，请告诉我。

**编辑**

我尝试安装`python-dev`，但出现以下错误：

```
The following packages have unmet dependencies:
 python-dev: Depends: python (= 2.6.6-2ubuntu1) but 2.7.2-7ubuntu2 is to be installed
E: Unable to correct problems, you have held broken packages 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:00:55.827

看起来你错过了 python-dev 包，其中包含`python.h`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T02:07:57.760

尝试以下命令

> $sudo apt-get install python-m2crypto

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:03:36.810

在最近的 Debian、Ubuntu 或 Mint 等衍生产品上编译会出现错误：

```
ImportError: /usr/local/lib/python2.7/dist-packages/M2Crypto/__m2crypto.so: undefined symbol: SSLv2_method 
```

对应的问答[在这里](https://stackoverflow.com/questions/10553118/problems-installing-m2crypto-on-mint-follow-up/14835020)。

# ruby - “无法将符号转换为整数”奇怪的错误

> ID：10539681
> 
> 赞同：5
> 
> 时间：2012-05-10T17:59:30.727
> 
> 标签：ruby, haml

这是我正在处理的哈希，

```
a = {
  #...
  :fares => {
    :itinerary_fare => {
      :segment_names=>"C", 
      :free_seats => "6", 
      :fare_for_one_passenger => {
        :free_seats=>"0", 
        :@currency => "TL", 
        :@non_refundable => "false", 
        :@price => "439.0", 
        :@service_fee => "25.0", 
        :@tax => "33.0", 
        :@type => "Y"
      },
      :@currency => "TL", 
      :@non_refundable => "false", 
      :@price => "439.0", 
      :@service_fee => "25.0", 
      :@tax => "33.0", 
      :@type => "C"
    },
    :@currency => "TL", 
    :@tax => "33.0"
  }, 
  #..
} 
```

这里还有另一个例子[http://pastebin.com/ukTu8GaG](http://pastebin.com/ukTu8GaG)。

让我头疼的代码，

```
a[:fares][:itinerary_fare].each do |f|
   puts f[:@price]
end 
```

如果我将它写入控制台，它会给我“无法将符号转换为整数”错误。但如果我写，`a[:fares][:itinerary_fare][:@price]`它工作得很好。

最奇怪的部分是，如果我将代码写入 haml 文件

```
%tbody
    -@flights.each do |a|
     %tr.flight
      %td
       -a[:fares][:itinerary_fare].each do |f|
        -puts f[:@price] #Weird stuff happens here
        .prices
         %input{:type=>"radio",:name=>"selectedfight",:value=>"#{a[:id]}"}
          = f[:@price]
         %br 
```

它可以工作，将价格打印到我的控制台，但在同一行却失败了。

```
can't convert Symbol into Integer file: flights.haml location: [] line: 18 
```

这是我见过的最令人不安的错误，感谢您的帮助。

大多数时候有超过 1 `:itinerary_fare`，我必须迭代。

我的数据可以显示为[http://postimage.org/image/6nnbk9l35/](http://postimage.org/image/6nnbk9l35/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T20:35:36.953

`a[:fares][:itinerary_fare]`是一个`Hash`。`Hash#each` [生成块的键值对数组](http://ruby-doc.org/core-1.9.3/Hash.html#method-i-each)。

所以，`f`例如在块中的数组`[:@price, "439.0"]`。

因此，您使用符号 ( `:@price`) 作为数组索引。需要一个整数。

在`a[:fares][:itinerary_fare][:@price]`您将其作为散列键提供时，它当然可以工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-10T21:11:14.297

为什么要删除之前已经*正确*回答的问题？你只能用更多信息更新它。正如其他用户在您之前的帖子中所回答的那样，您正在迭代`a[:fares][:itinerary_fare]`. 你可以看到这个：

```
a[:fares][:itinerary_fare].each do |f|
     puts f
end 
```

而且你不需要循环，你可以使用：

```
a[:fares][:itinerary_fare][:@price] 
```

如果你有多个:itinerary_fare，它只会考虑最后一个，因为它是哈希的一个键:fares。也许你需要一个像（左到最少元素）这样的数组：

```
a = {:id=>"1",
    :fares=>{
      :itinerary_fares=>[{:@price=>"439"}, {:@price=>"1000"}]
    }
} 
```

进而：

```
a[:fares][:itinerary_fares].each do |f|
    puts f[:@price]
end 
```

# javascript - 拖放和克隆 div 元素

> ID：10539686
> 
> 赞同：0
> 
> 时间：2012-05-10T17:59:36.653
> 
> 标签：javascript

嗨，我在这里有一些 javascript，我想在其中实现拖放功能。因此，如果我单击一个 div 元素并将其拖过，我将改为拖动克隆，以便原始 div 保留在那里。

下面是我的脚本

```
var _startX = 0;            
var _startY = 0;
var _offsetX = 0;          
var _offsetY = 0;
var _dragElement;          
var _oldZIndex = 0;        
var _debug = $('.drag');    
var target1,target;

function ExtractNumber(value)
{
    var n = parseInt(value);
    return n == null || isNaN(n) ? 0 : n;
}

// this is simply a shortcut for the eyes and fingers
function $(id)
{
    return document.getElementById(id);
}

InitDragDrop();

function InitDragDrop()
{
    document.onmousedown = OnMouseDown;
    document.onmouseup = OnMouseUp;
}

function OnMouseDown(e)
{
    if (e == null) 
        e = window.event; 

    target = e.target != null ? e.target : e.srcElement;

    if (target.className == 'drag')
    {
        _startX = e.clientX;
        _startY = e.clientY;

        target1 = target.cloneNode(true);

        // grab the clicked element's position
        _offsetX = ExtractNumber(target1.style.left);
        _offsetY = ExtractNumber(target1.style.top);

        // bring the clicked element to the front while it is being dragged
        _oldZIndex = target1.style.zIndex;
        target1.style.zIndex = 10000;

        // we need to access the element in OnMouseMove
        _dragElement = target1;

        // tell our code to start moving the element with the mouse
        document.onmousemove = OnMouseMove;
    }
}

function OnMouseMove(e)
{
    if (e == null) 
        var e = window.event; 

    // this is the actual "drag code"
    _dragElement.style.left = (_offsetX + e.clientX - _startX) + 'px';
    _dragElement.style.top = (_offsetY + e.clientY - _startY) + 'px';
}

function OnMouseUp(e)
{
    if (_dragElement != null)
    {
        _dragElement.style.zIndex = _oldZIndex;
        document.onmousemove = null;
        _dragElement.ondragstart = null;     
        _dragElement = null;
    }
} 
```

如果我不克隆目标，则拖动工作。如果我克隆它，拖动不起作用。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:02:51.227

您永远不会将克隆添加到 DOM。之后`cloneNode`，您需要将其添加到容器中，例如：

```
target1 = target.cloneNode(true);
target.parentNode.appendChild(target1); 
```

# ios - iPhone手机号码格式NSFormatter

> ID：10539687
> 
> 赞同：0
> 
> 时间：2012-05-10T17:59:48.980
> 
> 标签：ios, formatting, phone-number, nsformatter

我正在将电话号码从 iPhone 通讯簿复制到文本字段。在文本字段中，它显示为 1 (234) 567-8901。我想将其格式化为 12345678901。有
什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:10:14.413

您可以使用`stringByReplacingOccurrencesOfString: withString:`删除不需要的字符，`@"("`例如`@""`

编辑：更好的解决方案。

```
NSCharacterSet *charSet =[NSCharacterSet characterSetWithCharactersInString:@"()- "];
cleanedPhoneNumber = [phoneNumberString stringByTrimmingCharactersInSet:charSet]; 
```

# build - 迁移到 TFS2010 后，TFS 未清除构建代理文件夹

> ID：10539694
> 
> 赞同：2
> 
> 时间：2012-05-10T18:00:37.247
> 
> 标签：build, compilation

我在使用 TFS 时遇到问题。当我们有 TFS2008 时，构建机器能够在创建新构建之前从构建代理文件夹中清除文件。但是，在迁移到 TFS2010 之后，构建机器无法清除此文件夹，并且我们正在使用已从源代码管理中删除的旧文件进行构建。

有没有办法恢复这个功能？我们目前正在使用 TFS2008 构建脚本和**TFS2010**中的 UpgradeTemplate.xaml。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:41:24.777

在您的 TFS 构建定义中，“进程”选项卡上的“清洁工作区”设置为什么？

它有三个选项：

*   全部
*   输出
*   没有任何

每个选项的解释（取自 TFS）：

> 设置为 All 以删除所有现有的输出和源并进行完全重建；输出删除所有现有输出，但仅获取自上次构建以来已更改的源文件（增量获取）；或 None 保留现有的输出和源并逐步构建任何更改。

您应该将其设置为`All`, 以确保您每次都执行干净的构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:10:45.263

我发现的唯一其他帖子没有答案。因此，我恢复为在构建脚本的 BeforeEndToEndIteration 级别运行 RMDIR 命令。

`<Target Name="BeforeEndToEndIteration"> <Exec WorkingDirectory="S:\src" Command="RMDIR /s /q &quot;S:\src\Sandbox_awdbu\&quot;"/> </Target>` 此命令将在构建服务执行 Get Latest 命令之前删除构建代理文件夹。

这不是一个很好的解决方案，但它有效。此解决方案将起作用，但我建议移至模板而不是保留旧的 TFS2008 构建脚本。

# orbeon - 重复插入实例

> ID：10539696
> 
> 赞同：0
> 
> 时间：2012-05-10T18:00:45.967
> 
> 标签：orbeon

我的**情况**如下：

1.  我有一个节点集，通过它我迭代并用一些数据填充一个表
2.  其中一个领域，我确实想总结一下

**问题：** 不幸的是，我不能使用 sum 方法进行计算，因为节点集是从其他形式访问数据的自定义函数。这似乎把事情搞砸了。

**我对解决方案的想法：** 我想，我可以创建一个实例，并在每次迭代中为其添加值。然后我就可以访问该数据并进行所需的任何计算。但我无法让 xforms:insert 工作。

简化版本如下所示：

```
 <xforms:repeat nodeset="(xxforms:si-source-forms('other_form'))">
              <!-- table here -->
              <xforms:insert
                 nodeset="instance('fr-form-instance')//positionen/position"
                 origin="instance('neue-position')"/>
            </xforms:repeat> 
```

'neue-position' 实例包含对源表单中值的绑定：

```
 <xforms:bind id="neue-position-binds" nodeset="instance('neue-position')">
    <xforms:bind id="neue-position-bind" nodeset="position">
      <xforms:bind id="neue-position-summe-bind" nodeset="summe" name="summe" type="xforms:string" required="true" xxforms:default="xxforms:si-source-forms('other_form')//gesamtbetrag_ausgabe" />
    </xforms:bind>
  </xforms:bind> 
```

但它并没有按预期工作，所以显然有问题。我会很感激任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T02:27:24.607

**关于您的第一个代码段：**

你`<xforms:insert>`不会有任何影响。您在视图中，并且只有在附加到事件侦听器时才会运行操作。如果没有`ev:listener`on `<xforms:insert>`（或围绕该插入的操作），它就不会运行。

**关于对不在实例中的节点进行求和：**

假设您的自定义函数返回的数据只有一个“总和”，您可以按照这些行编写代码：

1.  将函数返回的节点序列存储在变量中`<xf:var name="others" ref="xxforms:si-source-forms('other_form')"/>`
2.  在重复中使用该变量：（`<xf:repeat ref="$others">`顺便说一句，现在 XForms 正在标准化`ref`无处不在的使用，代替`nodeset`）。
3.  做你的计算：`<xf:var name="my-sum" ref="sum($others/path/to/values)"/>`。
4.  最后，我想你想用 做点什么`$my-sum`，也许用`<xf:output>`.

# eclipse - Eclipse 建模框架中的聚合和其他箭头

> ID：10539706
> 
> 赞同：2
> 
> 时间：2012-05-10T18:01:19.230
> 
> 标签：eclipse, frameworks, uml, modeling

**Eclipse 建模框架**中是否有任何选项可以选择与关联或泛化箭头不同的箭头？我的意思是“聚合”或最后没有箭头的关联线。在 EMF 中，我只能“绘制”这个：---> 和这个 ---<>。但还有更多类似：---|>，或 ---(+) 等等......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T05:34:20.840

Ecore 本身只支持 EClass.eReferences（关联）和 EClass.eSuperTypes（泛化）。EReference 可以是双向的，在这种情况下没有箭头，而 EReference 可以是一个容器，在这种情况下有一个黑色菱形。这就是全部。您将需要像 Papyrus 这样的 UML 工具来支持完整的 UML 曲目。

# .htaccess - 您可以让子目录忽略 htaccess 文件吗？

> ID：10539714
> 
> 赞同：2
> 
> 时间：2012-05-10T18:01:43.893
> 
> 标签：.htaccess

我有我的网站设置指向网络服务器上的一个目录。我有第二个站点指向主网站主目录内的子文件夹。我的问题是，您可以让子文件夹中的第二个站点忽略主目录中父 htaccess 文件中的任何规则吗？我不希望主站点的规则影响主站点根目录的子文件夹中的第二个站点的任何内容。我还想指出主站点有多个指向它的站点，所以我不能只编写特定于一个域的规则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:16:14.310

您需要为此进行编辑`httpd.conf`。

`<VirtualHost>`如果尚未创建，请为您的子域创建一个条目。在`<VirtualHost>`您的第二个站点的部分中添加以下代码：

```
DocumentRoot "/path/to/docuement/root/of/subdomain"

<Directory "/path/to/docuement/root/of/subdomain">
    AllowOverride None
    Options None
    Order allow,deny
    Allow from all
</Directory> 
```

确保在进行这些更改后退回 apache。

# python - shutil.copytree 的问题

> ID：10539724
> 
> 赞同：2
> 
> 时间：2012-05-10T18:02:41.737
> 
> 标签：python, shutil, copytree

我想从我的计算机上的本地服务器复制文件夹，使用函数 shutil.copytree，我使用 macOS，但今天我遇到问题，python 总是向我显示相同的消息，“[错误 1] 操作不允许”，但昨天我的相同文件夹的脚本工作没有问题......有人可以告诉我问题是什么，可能发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T08:08:09.327

“不允许操作”错误的原因可能是当源和目标位于不同的文件系统上时，shutil.copytree（以及shutil.copy 和shutil.copy2）有一些奇怪的行为。

例如，我在尝试使用 python2.7 将文件从 ext3 复制到 ubuntu 上的 ntfs 卷时遇到了 shutil.copy 的问题。我刚刚使用[了 shutil.copyfile](http://docs.python.org/2/library/shutil.html#shutil.copyfile)。

谈到shutil.copytree：看看[这个](https://stackoverflow.com/questions/1303413/python-shutil-copytree-ignore-permissions)答案，我喜欢它 - 只需编写你自己的copytree。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:32:55.593

错误代码告诉您您无权读取源或写入目标。您的文件和文件夹的权限设置是否更改？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T18:29:49.743

您正在尝试复制现有目录是我的猜测。

从文档

> shutil.copytree = copytree(src, dst, symlinks=False, ignore=None) 使用 copy2() 递归复制目录树。
> 
> ```
> The destination directory must not already exist. 
> ```

注意最后一行。

我没有要验证的 MAC OS 机器，但我猜测目标目录存在。这是我的 Linux 机器上发生的情况，它给出了类似的错误

```
$ mkdir test1
$ touch test1/a
$ touch test1/b 
```

然后在交互式解释器中

```
>>> from shutil import copytree
>>> copytree("test1","test2")
>>> copytree("test1","test2")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/shutil.py", line 175, in copytree
    os.makedirs(dst)
  File "/usr/lib/python2.7/os.py", line 157, in makedirs
    mkdir(name, mode)
OSError: [Errno 17] File exists: 'test2' 
```

# symfony - Symfony2 存储库查询不起作用

> ID：10539726
> 
> 赞同：-1
> 
> 时间：2012-05-10T18:02:51.067
> 
> 标签：symfony, doctrine, doctrine-orm, dql

我正在使用 Symfony2 和 DQL 开发一个应用程序，用于在存储库中构建一些查询。我在控制器中有下一个代码：

```
$emGalPak = $this->getDoctrine()->getEntityManager();
  $OsatugabeKop = $emGalPak->getRepository('AnotatzaileaAnotatzaileaBundle:GalderaPaketea')
                             ->getOsatugabeKop(); 
```

这是我在与上述实体对应的存储库中构建的查询：

```
<?php

namespace Anotatzailea\AnotatzaileaBundle\Repository;

use Doctrine\ORM\EntityRepository;

/**
 * GalderaPaketeaRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class GalderaPaketeaRepository extends EntityRepository
{
    public function getOsatugabeKop()
    {
        $qb = $this->createQueryBuilder('c')
                   ->select('c')
                   ->where('c.Osatua = 0')
        $Emaitza = $qb->getQuery()->getResult();

                return sizeof($Emaitza);

    }

} 
```

运行代码时，它显示下一个错误：

```
Parse error: syntax error, unexpected T_VARIABLE in /var/www/Symfony/src/Anotatzailea/AnotatzaileaBundle/Repository/GalderaPaketeaRepository.php on line 20 
```

关于如何解决此错误的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:10:41.627

这与您的查询不起作用无关。

当您看到“解析错误”时，这意味着您的 PHP 代码本身格式不正确，PHP 引擎甚至无法解析它，更不用说运行它了。

在这种特殊情况下，您在创建查询构建器的表达式末尾缺少分号。

```
public function getOsatugabeKop()
{
    $qb = $this->createQueryBuilder('c')
               ->select('c')
               ->where('c.Osatua = 0'); // <--- right there
    $Emaitza = $qb->getQuery()->getResult();

    return sizeof($Emaitza);
} 
```

当您收到`unexpected T_VARIABLE`错误时，几乎总是因为您省略了分号并且解析器在它认为应该之前遇到了一个变量。如果去掉空格，就更容易看出错误。

```
// Bad Code, two lines
$now = time()
$one = 1;

// Bad Code, one line
$now = time()$one = 1;
// ----------^  Pretty obvious now that a semicolon is missing
// And that a variable was encountered unexpectedly 
```

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:11:07.523

行后缺少分号`where`。

# c++ - 通过多个继承另一个类来提供纯虚函数的实现

> ID：10539728
> 
> 赞同：1
> 
> 时间：2012-05-10T18:02:56.973
> 
> 标签：c++

> **可能重复：**
> [从基类“导入”函数定义以实现抽象接口（C++ 中的多重继承）](https://stackoverflow.com/questions/3291568/import-a-definition-of-a-function-from-a-base-class-to-implement-abstract-inte)

假设我有一个基类

```
struct Base1 { virtual void f() = 0; }; 
```

和另一个提供函数实现的类`f`：

```
struct Base2 { virtual void f() {} }; 
```

我想通过多重继承`Base2::f`来实现：`Base1::f`

```
struct C : Base1, Base2 {}; 
```

但是看起来编译器并没有按照我的预期做，而且`C`仍然是抽象的。

那么通过另一个类为纯虚拟提供实现的最佳方式是什么？

谢谢。

# xml - 在 Ubuntu 12.04 上安装 Android SDK 1.6 时出现 XML 解析错误

> ID：10539730
> 
> 赞同：0
> 
> 时间：2012-05-10T18:02:58.697
> 
> 标签：xml, rhomobile, android-sdk-1.6

完成设置/android-sdk-linux/tools/android 后出现以下错误。

> [http://dl-ssl.google.com/android/repository/repository.xml](http://dl-ssl.google.com/android/repository/repository.xml)的 XML 验证失败。错误：cvc-elt.1：找不到元素“sdk:sdk-repository”的声明。获取 URL [http://dl-ssl.google.com/android/repository/repository.xml](http://dl-ssl.google.com/android/repository/repository.xml)失败，原因：未知

我已经签入 ~/.android/androidtool.cfg 并且 sdkman.force.http=true 设置正确。

仅供参考，我正在使用与最新 SDK 不兼容的 RhoMobile，因此我必须使用最新的旧版本。我读到 XML 在 1.5 的某个地方被重新配置，但如果是这种情况，1.6 应该没有问题。

我还通过在浏览器中加载 XML 文件来验证它确实包含数据。

这就是我到目前为止所做的所有故障排除。我不知道还有什么方法可以解决这个问题。我难住了。

半个王国寻求有用的答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:22:25.660

我从来没有最终能够让 SDK 1.6 工作，但我意识到最新的 SDK 确实可以工作，[Rhomobile 网站上](http://docs.rhomobile.com/rhodes/build#build-for-android)关于 Android SDK 安装的说明刚刚过时。如果您使用新 SDK 中的 /android-sdk-linux/tools/android 工具，您将无法按照给出的说明进行操作，但常识可以让您通过界面，然后上述问题不再存在.

希望这对其他人有帮助！

# xcode - 关闭父视图控制器 iOS 5

> ID：10539732
> 
> 赞同：2
> 
> 时间：2012-05-10T18:03:07.307
> 
> 标签：xcode, ios5, view, uiviewcontroller, dismiss

我将使用以下代码进入新视图：

```
UIStoryboard *storyboard = self.storyboard;
        finishViewController *finished = [storyboard instantiateViewControllerWithIdentifier:@"finishViewController"];
        [self presentViewController:finished animated:NO completion:nil]; 
```

加载新视图后，前一个视图控制器仍在其后面运行。有什么办法可以把它从记忆中抹去吗？

我试过了：

```
[self.presentingViewController dismissModalViewControllerAnimated:YES]; 
```

和

```
[self.parentViewController dismissModalViewControllerAnimated:YES]; 
```

我认为这会很简单。吨

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T04:35:47.530

这是做不到的。如果您解雇父母，您将解雇他们两个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:11:04.013

您正在呈现来自父视图控制器的模态视图。

听起来您真正想要做的是将完成的视图控制器从父视图控制器*推送或隔离。*

如果您决定关闭/删除父视图控制器，为什么不先弹出父视图控制器，然后推送/呈现完成的视图控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T18:16:03.510

尝试使用`[finished makeKeyAndVisible]`它将使您的新控制器成为唯一的控制器。

# html - 媒体查询 - 单独和独立的样式表？

> ID：10539734
> 
> 赞同：0
> 
> 时间：2012-05-10T18:03:15.997
> 
> 标签：html, layout, mobile, css, media-queries

在索引 html 文档的头部使用媒体查询，是否可以告诉访问者浏览器使用独立于原始样式表的单独样式表？

目前，我使用的除了原始样式表之外还使用了 mobile_specific 样式表，这使得样式变得棘手。

```
<link type="text/css" media="screen" href="styles.css" rel="stylesheet">

<link href="styles_mobile.css" media="only screen and (max-device-width: 480px)" type="text/css" rel="stylesheet"> 
```

所以除了styles.css，还要用到syles_mobile.css。**如何告诉浏览器仅使用“styles_mobile.css”而不是同时使用两个样式表？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T18:06:28.270

将媒体查询添加到与您的移动查询相反的常规样式表中：

```
<link rel="stylesheet" href="styles.css" media="only screen and (max-device-width: 480px)">

<link rel="stylesheet" href="styles_mobile.css" media="only screen and (min-device-width: 480px)"> 
```

PS：我建议您使用标准的属性顺序。并且该`type`属性不是必需的，因为它具有默认值`text/css`with link 和 style 元素以及默认值`text/javascript`on script 元素。

# java - 运行 Eclipse 时，运行代码后控制台出现错误

> ID：10539737
> 
> 赞同：0
> 
> 时间：2012-05-10T18:03:43.970
> 
> 标签：java, eclipse

所以我从字面上介绍了 Java 编程，现在我正在尝试创建我的第二个作业。这样做后，我在 eclipse 中创建了新的 java 类，但是当我尝试运行我编写的代码时，出现以下错误。

我不确定如何解决这个问题。任何帮助将不胜感激。

```
Exception in thread "main" java.lang.NoClassDefFoundError: math
Caused by: java.lang.ClassNotFoundException: math
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:07:48.057

ClassNotFoundException: math 我猜你在数学中创建了一个大写 M 的类，但是当你在某个地方调用它时，它没有大写，也没有正确引用。尝试在您的代码中仔细检查。对正确的 Java 标准友好的 FYI，尽量确保类是大写的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:27:49.497

你说你的代码如下：

```
public class rounding {
    public static void main (string[] args){
        System.outprintln("Hello World"); 
```

从您收到的错误消息中，您很可能在一个名为`math.java`. 在 Java 中，您必须将类名声明为等于文件名；例如，`YourClass.java`将声明`public class YourClass {`.

因此，您需要做的是将您的类名重命名为`math`，或者将您的文件命名为`rounding.java`，尽管以小写字母开头的类名是非常规的。

然而，除了这些错误之外，您还会遇到一个错误，指出该类型`string`不存在。您需要将该类型重命名为`string[]`，`String[]`否则 JVM 将无法识别您的`main`方法。

您还将收到一条错误消息，指出这`outprintln`不是`System`该类的方法。要打印，请使用`System.out.println("Your message")`而不是`System.outprintln("Your message")`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T18:07:23.483

听起来您正在尝试访问当前项目或范围中不存在的名为“数学”的类。您是否忘记导入您应该使用的特定库？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T13:16:04.350

这是正确的代码：

```
public class Rounding {
    public static void main (String[] args){
        System.out.println("Hello World");
    }
} 
```

一些小错误，通常由所有开始使用 Java 和 Eclipse 的人完成。Vulcan 已经给出了错误的描述。

# c# - InsertedDate，在数据库中设置默认值还是在应用程序中设置？

> ID：10539744
> 
> 赞同：0
> 
> 时间：2012-05-10T18:04:14.417
> 
> 标签：c#, .net, sql-server

我正在编写一个新的应用程序，我正处于设计阶段。一些 db 表需要有一个`InsertedDate`字段，该字段将在插入记录时显示。

我正在考虑`Default Value`将`GetDate()`

在应用程序中执行此操作比在数据库中设置默认值有优势吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T18:07:06.760

我认为最好在 SQL Server 中将默认值设置为 GetDate()，而不是在您的应用程序中。您可以使用它来获取基于插入的有序表。如果您尝试从应用程序中设置它，这看起来像是一种开销。除非您想在插入时指定某个特定日期，否则我认为这会破坏它的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:08:01.670

如果您需要手动将记录插入数据库，如果您在应用程序中设置默认值以避免 NULL 引用，则需要记住设置此字段。

就个人而言，我更喜欢在可能的情况下在数据库中设置默认值，但其他人可能对此有不同的看法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T18:31:22.117

如果您在应用程序中执行此操作，则**可以对其进行单元测试**。在我从事的项目中，尤其是在使用 ORM 时，我们在代码中执行所有默认操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T18:35:23.843

在设计时，我总是非常重视关注点分离，对我来说，在“数据库功能与应用程序功能”的背景下，归结为一个问题：“谁拥有数据？”。我一直认为我的代码拥有我的数据——而不是数据库。数据库只是数据的容器。这类似于说我拥有我的衣服，而不是我的梳妆台拥有我的衣服。我的梳妆台发挥着重要作用，让我的衣服有条不紊地摆放，但我始终是把衣服放进梳妆台的代理人，我负责他们的整理工作。

我相信很多人都会对这个类比有疑问，说现代数据库比我的梳妆台强大得多，但根据我的经验，我在数据库层中放置的功能越多，项目就越混乱，界限就越模糊数据和功能之间（例如数据库存储过程等）。诚然，你的例子是这个概念的一个简单例子，但一旦树立了先例，一切都会发生。

我想解决的另一件事是易用性因素。我拒绝这样的想法，因为特定的实现很方便（例如避免空值、不同的服务器时间等），所以我应该选择它。对我来说，选择这样的实现就等于说：“如果我的代码不起作用也没关系。我会避免使用我的代码，而不是修复它并使其变得健壮。”

我敢肯定，在很多情况下，可能是极端规模或由于其他业务需求，数据库层功能不仅是必要的，而且是必要的，但我的经验告诉我，你可以在代码中保留的功能越多，就越干净，更简单，更健壮您的应用程序将。

# c++ - 我是否需要在 C++ 中显式删除数组以节省内存？

> ID：10539747
> 
> 赞同：11
> 
> 时间：2012-05-10T18:04:38.680
> 
> 标签：c++, garbage-collection

在一个功能中。我创建了一个本地数组。 `char arr[20];` 在此功能结束之前。编译器会为我做垃圾收集吗？还是我需要`delete`自己做？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-10T18:06:34.167

C++ 中没有垃圾收集。

但是，如果您使用自动变量，它们会在超出范围时被销毁。

作为一项规则，每个 应该有 1 个`delete`调用`new`。如果你没有`new`，你就没有`delete`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-10T18:05:49.860

您不必删除此数组，因为您在堆栈上创建了它。如果您使用 new 创建了数组，则必须使用 delete 进行清理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T18:25:17.843

局部变量在创建它们的*块*（不一定是函数）的末尾被销毁。例如：

```
void myfunc() { 
   int x[some_size];

   if (something) { 
       std::vector<std::string> y;
       // ...
   } // y will be destroyed here
   // more code
} // x will be destroyed here 
```

如果您希望您的数组在函数退出之前被销毁，您可能需要使用相同的：

```
void f() { 
    // come code here   

    {
        int x[size];

         // code that uses x
    } // `x` gets destroyed here

    // more code
 } 
```

但是，我应该补充一点，此时销毁变量可能不会影响内存使用。退出内部块后*不需要*内存，但也可能不会立即释放。

另一方面，如果您使用类似的东西`std::vector`而不是显式动态分配，则销毁对象*将*（立即）释放用于存储对象数据的内存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T18:07:50.490

任何局部变量（包括数组）都是在堆栈上创建的，因此在函数返回时会被回收。

你可以认为这类似于垃圾回收，但细节却大不相同。如果你做更多的任何类型的编程，你应该更多地了解其他语言（在大多数语言中都是相似的）。

所以不，您不需要对本地阵列做任何事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T18:07:23.547

变量只存在于定义它们的函数中。一旦该函数终止，它们就消失了。如果您使用or type 命令手动分配内存，则只需要`delete`/您的变量。`free``new``malloc`

# .net - SmartIrc4net 一段时间后断开连接

> ID：10539748
> 
> 赞同：2
> 
> 时间：2012-05-10T18:04:50.297
> 
> 标签：.net, irc

我让 SmartIrc4net 连接到 FreeNode，它运行良好，但过了一会儿，机器人突然断开连接。关于为什么会发生这种情况的任何想法？

错误信息：

IOException: Unable to read data from the transport connection: 连接尝试失败，因为连接方在一段时间后没有正确响应，或者建立连接失败，因为连接的主机没有响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:40:39.383

研究 IRC 协议。我相信您必须每分钟左右从客户端 PING 服务器。

# java - 无法在子类中创建重载的构造函数

> ID：10539749
> 
> 赞同：1
> 
> 时间：2012-05-10T18:04:51.520
> 
> 标签：java, class, constructor, overloading

我已经定义了一个子类，并希望有两个具有不同参数的构造函数。看起来像这样

```
public class GraphNode extends Entity{
   protected String id;

   public GraphNode(PVector pos, String id) {
       super(pos,0);
       this.id = id;
   }

   public GraphNode(PVector pos, String id, List<GraphEdge>) {
       this(pos, id);
       //do something else
   }
} 
```

编译器一直告诉我：

> GraphNode 类型中的重复方法 GraphNode(PVector, String)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:07:51.487

应该是这样的

```
public class GraphNode extends Entity{
   protected String id;

   public GraphNode(PVector pos, String id) {
       super(pos,0);
       this.id = id;
   }

   public GraphNode(PVector pos, String id, List<GraphEdge> list) {
       this(pos, id);
       //do something else
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:08:35.107

你忘了给你的第三个参数一个变量名：

```
public GraphNode(PVector pos, String id, List<GraphEdge> list) 
```

# objective-c - 以某种方式链接的目标 c 数组

> ID：10539750
> 
> 赞同：0
> 
> 时间：2012-05-10T18:04:56.747
> 
> 标签：objective-c, arrays

嗨，我有一个数组，我试图复制它然后从中删除一个元素。问题是我认为我正在从副本中删除元素，但它也会从原始数组中删除元素。我不知道发生了什么。我是目标 c 的新手，所以任何帮助都将不胜感激。

```
NSArray *newarray = appDelegate.orginalArray;

[newarray removeObjectAtIndex: 2]; 
```

当我在删除对象后查看数组时，它已经从 newarray 和 orginalArray 中删除了它，为什么会这样？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:07:33.780

这不是复制。两者`newArray`和`appDelegate.originalArray`指的是同一个对象。你需要这样做：

```
NSMutableArray *newArray = [appDelegate.originalArray mutableCopy]; 
```

另请注意，我正在使用`NSMutableArray`并`mutableCopy`确保副本是可变的（即支持添加和删除项目）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:08:51.393

指针、伙伴和可变/不可变抽象。`newarray`并且`appDelegate.originalArray`都是指向同一个不可变（不可更改）数组的指针（引用）。你要：

```
NSArray *newarray = [appDelegate.orginalArray mutableCopy]; 
```

# clojure - 如何使用单个 lein 任务启动多个环子项目？

> ID：10539757
> 
> 赞同：2
> 
> 时间：2012-05-10T18:05:10.753
> 
> 标签：clojure, leiningen, ring

我有一个包含三个子项目的项目（使用[lein-sub](https://github.com/kumarshantanu/lein-sub)）：

```
(defproject trident "0.1.0"
  ...

  :sub
  ["admin"
   "api"
   "site"]) 
```

每个内部都有一个环处理程序，如下所示：

```
(defproject trident-api "0.1.0-SNAPSHOT"
  ...

  :ring {:handler trident.api.core/handler
         :servlet-name "trident-api"
         :init trident.api.core/init
         :port 33333}) 
```

现在我进入每个并输入：

```
> lein ring server 
```

这显然会让人厌烦。我也试过

```
> lein sub ring server 
```

看起来它应该可以工作，但它只启动第一个并且进程加入它！可能有办法解决这个问题？这似乎是最简单的方法。

取而代之的是，我现在正在编写一个 leiningen 任务来为我执行此操作，但遇到了一些问题。我可以使用 leiningen.core.project/read 轻松获取每个项目文件，但是从这里开始，我如何以尊重各自 project.clj 文件中的所有依赖项和其他设置的方式启动每个环服务器？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:41:22.487

这只是一个建议，因为我无法验证这是否会立即生效。

[有一个 var](https://github.com/technomancy/leiningen/blob/master/leiningen-core/src/leiningen/core/project.clj#L24) in`leiningen.core.project`标识默认值。也许您可以编写一个插件（或 fork lein-sub？）并让它覆盖子项目的这些值？然后，您可以创建一个插件，在将给定任务应用于每个子项目的同时迭代每个子项目。

例如，默认值声明源路径如下：

```
:source-paths ["src"] 
```

然后，您可以为每个子项目使用以下内容覆盖它：

```
:source-paths ["sub-project/src"] 
```

使用所有相关的默认值执行此操作，它可能会起作用。

Leiningen 2 的个人资料可能有办法做到这一点，但我不确定。我想如果您为父项目中的每个子项目创建一个配置文件，您可以在调用相应子项目的任务时轻松合并配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:53:54.650

我最终构建了一个元服务器来一次启动所有三个码头实例。代码在这里：

[https://github.com/antler/lein-caribou/blob/master/src/leiningen/caribou/server.clj](https://github.com/antler/lein-caribou/blob/master/src/leiningen/caribou/server.clj)

# ruby-on-rails - 检查控制器导轨中的日期

> ID：10539760
> 
> 赞同：2
> 
> 时间：2012-05-10T18:05:16.887
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在控制器中有一个方法接收这样的参数：

```
def example
   .... 
   params[:Date]
end 
```

我只想验证日期是否不是昨天或更早。

这个日期没有输入到数据库中，那么需要在控制器中而不是模型中进行验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:47:09.130

你在寻找这样的东西吗？

```
def example
  unless Date.strptime(params[:date], '%d/%m/%Y').before? Date.today.beginning_of_day
    #did not happen yesterday or before
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:46:36.207

就我而言，我有一个看起来像这样的 params[:at]：

```
params[:at]
=> "05-10-2012" 
```

我这样解析：

```
date = Date.strptime(params[:at], "%m-%d-%Y") 
```

如果我想检查它是否不是昨天或更早，我会去：

```
date > Date.today.beginning_of_day 
```

但这是 Rails 的语法，因为他们在基类中添加了辅助方法。

你 params[:Date] 是什么样的？这是 Rails 还是普通的 Ruby？

# paypal - Paypal IPN 获取订阅结束日期（循环）

> ID：10539764
> 
> 赞同：1
> 
> 时间：2012-05-10T18:05:27.270
> 
> 标签：paypal, paypal-ipn

我正在开发一个具有年度或每月贝宝订阅选项的网站。从收到的 IPN 数据中，我可以确定订阅是按年还是按月？似乎不可能。

目前它只设置为每月付款，所以在我自己的数据库中，我存储了以下内容：

```
$data = array(              
              'id'                  => $ipnData['custom'],
              'subscribed'          => 1,
              'subscription_fee'    => $ipnData['mc_amount3'],
              'subscribed_until'    => date("Y-m-d H:i:s",strtotime($ipnData['subscr_date'] . '+1 Month'))
              ); 
```

你会看到我正在使用 subscription_date 变量，并且只是将它增加了一个月。但是现在，潜在的订阅可能是每年一次，我需要以某种方式获得下一次付款的日期。这似乎不是一个变量？原始 T3 的回归会很棒。

我可以使用自定义字段来做到这一点，但这似乎有点愚蠢。干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T23:38:15.447

订阅结束时 PayPal 会发送通知：txn_type = "subscr_eot"

您收到此信息的那一刻就是订阅到期的那一刻。这是您降级/取消他们的帐户的时候。请注意，这与用户取消订阅时触发的 txn_type="subscr_cancel" 不同；这可能是他们订阅后的第二天，他们可能还有剩余的订阅时间。在这种情况下，当时间用完时，您仍然会收到 subscr_eot。

我还发现这有点违反直觉。

# perl - 惰性属性强制

> ID：10539765
> 
> 赞同：5
> 
> 时间：2012-05-10T18:05:36.397
> 
> 标签：perl, moose, lazy-evaluation

使用[Moose](http://search.cpan.org/~doy/Moose-2.0602/lib/Moose.pm)，您可以拥有on 属性，*如果该属性尚未填充，则在*`lazy` `builders`首次访问该属性时调用构建器。您可以使用 对属性进行类型强制，但是*只要设置了属性*，就会应用此强制，即使在对象初始化时也是如此。*`coerce`*

 **我正在寻找一种实现**惰性强制**的方法，其中一个属性可能最初被填充，但仅在第一次访问时才被强制。当强制很昂贵时，这一点很重要。

在以下示例中，我使用联合类型和方法修饰符来执行此操作：

```
package My::Foo;
use Moose;
has x => (
    is => 'rw',
    isa => 'ArrayRef | Int',
    required => 1
);

around "x" => sub {
    my $orig = shift;
    my $self = shift;
    my $val = $self->$orig(@_);
    unless(ref($val)) {
        # Do the cocerion
        $val = [ map { 1 } 1..$val ];
        sleep(1); # in my case this is expensive
    }
    return $val;
}; 
1;

my $foo = My::Foo->new( x => 4 );
is_deeply $foo->x, [ 1, 1, 1, 1 ], "x converted from int to array at call time"; 
```

但是，这样做存在一些问题：

1.  我不喜欢*联合类型*+*方法修饰符*的方法。它违背了[使用强制而不是 union](http://search.cpan.org/~doy/Moose-2.0602/lib/Moose/Manual/BestPractices.pod#Use_coercion_instead_of_unions)的“最佳实践”建议。它不是声明性的。

2.  *我需要在许多*类中使用*许多*属性来做到这一点。因此需要某种形式的 DRY。这可能是元属性角色，类型强制，你有什么。

 ***更新：** 我按照[ikegami 的](https://stackoverflow.com/users/589924/ikegami)建议将昂贵的类型强制封装在一个对象中，并为这个对象提供一个外部强制：

```
package My::ArrayFromInt;
use Moose;
use Moose::Util::TypeConstraints;
subtype 'My::ArrayFromInt::Inner',
    as 'ArrayRef[Int]';
coerce 'My::ArrayFromInt::Inner',
    from 'Int',
    via { return [ (1) x $_ ] };
has uncoerced => (is => 'rw', isa => 'Any', required => 1); 
has value => (
    is      => 'rw',
    isa     => 'My::ArrayFromInt::Inner',
    builder => '_buildValue',
    lazy    => 1,
    coerce  => 1
);
sub _buildValue {
    my ($self) = @_; 
    return $self->uncoerced;
}
1;
package My::Foo;
use Moose;
use Moose::Util::TypeConstraints;
subtype 'My::ArrayFromInt::Lazy' => as class_type('My::ArrayFromInt');
coerce 'My::ArrayFromInt::Lazy',
    from 'Int',
    via { My::ArrayFromInt->new( uncoerced => $_ ) };
has x => (
    is => 'rw',
    isa => 'My::ArrayFromInt::Lazy',
    required => 1,
    coerce => 1
);
1; 
```

如果`$foo->x->value`被调用，这将起作用。然而，这并不能解决第 2 点，因为我需要为我想要转换的每个属性创建子类型`My::ArrayFromInt`。如果可能的话`::Lazy`，我想避免打电话。`$foo->x->value`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:12:56.463

如何按照所描述的方式使用 typedef，然后执行

```
has _x => (
    is       => 'ro',
    isa      => 'Int|MyArrayOfInts',
    init_arg => 'x',
    required => 1,
);

has x => (
    is => 'ro',
    lazy => 1,
    isa => 'MyArrayOfInts',
    coerce => 1,
    default => sub { $_[0]->_x },
); 
```

将其包装成某种辅助方法来创建沿线的对象对是有意义的

```
has_lazily_coerced x => (
    is => 'ro',
    isa => 'TargetType',
); 
```

这将自省 TargetType 以获取未强制影子属性的合法类型列表并为您生成一对属性。***

# google-analytics - 谷歌分析事件跟踪下载不起作用

> ID：10539766
> 
> 赞同：1
> 
> 时间：2012-05-10T18:05:37.287
> 
> 标签：google-analytics, event-tracking

UA- ******* -1我正在尝试使用 GA 事件跟踪来跟踪我网站上的文件下载。这是我的 GA 代码，就在之前`</head>`：

```
 var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-*******-1']);
    _gaq.push(['_trackPageview']);

    (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })(); 
```

这是我进行下载跟踪的脚本：

```
$('a.track-dl').click(function(){
    _gaq.push(['_trackEvent', 'testcategory', 'testaction', 'testlabel']);

}) 
```

我已经检查了 Chrome Google Analytics 调试器，并看到了这个（识别信息隐藏）：

```
Account ID               : UA-*******-1
Page Title               : ************
Host Name                : ************
Page                     : ************
Referring URL            : 0
Hit ID                   : 961963542
Hit Type                 : event
Event Name               : testcategory
Event Type               : testaction
Event Label              : testlabel 
```

但这些事件从未出现在 GA 中。如果重要的话，我正在使用带有过滤器的配置文件来仅显示特定子域的流量（此事件发生在该子域上）。我所有的页面浏览量都会在我执行它们的大约 10 分钟内显示出来。

我在“事件概述”页面上看到了这一点：

## 您的 5 次访问发送了事件

> **事件总数：0
> 唯一事件：0
> 事件值：0
> 平均。价值：0.00
> 事件访问：0
> 事件/访问：0.00**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T20:54:44.397

想通了我的问题。下载正在取消对 __utm.gif 的请求。

使用此处建议的方法：http: [//support.google.com/googleanalytics/bin/answer.py](http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=55527) ?hl=en&answer=55527将 a 添加`setTimeout()`到下载请求中。

Hacky，但我想这是目前唯一的方法。

# mysql - 如何存储密码管理器的密码？

> ID：10539767
> 
> 赞同：1
> 
> 时间：2012-05-10T18:05:37.380
> 
> 标签：mysql, passwords

你们将如何在 MySQL 数据库中存储在线密码管理器的密码？没什么大不了的，只是几个用户。我不能真正散列它们或其他东西，因为它是不可逆转的，对吗？像 KeePass 这样的程序是如何做到这一点的？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T18:28:13.380

（*升级到答案*）

通常用户的密码在传输给您（密码管理器）之前使用主密码进行加密；您将存储此类加密密码并根据用户的要求将其返回给用户：然后他们将使用他们的主密码在自己的机器上解密。您在任何时候都不会处理主密码或未加密的密码，因此您完全无法访问您存储的基础密码。

如果您的应用程序是基于 Web 的，您可以在 Javascript 中执行加密操作（尽管您应该非常警惕 XSS 和浏览器安全漏洞）——[斯坦福 Javascript 加密库](http://crypto.stanford.edu/sjcl/)是一个很好的起点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-10T18:14:04.097

散列密码确实是不可逆的。但是您正是出于这个原因散列了密码：

1.  散列密码。插入数据库。
2.  用户尝试登录，提供密码。用户提供的密码经过哈希处理。如果它与数据库中的内容匹配，则验证用户。

程序通常提供以下内容：

```
setPassword(user, password); //puts the (hashed) password into a database table associated with user
authenticate(user, password); //for given user, checks to see if password is valid 
```

也就是说，这个问题非常广泛，很可能会被否决。你不是在问一个具体的问题，也不是在说你到目前为止所做的尝试。

# html - 如何在一个之后选择文本 标签，但在嵌套标签之前？

> ID：10539768
> 
> 赞同：1
> 
> 时间：2012-05-10T18:05:39.913
> 
> 标签：html, css-selectors, web-scraping

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:08:21.643

CSS 选择器无法到达裸文本节点。

然而，这对于 XPath 来说是微不足道的，如果您使用像 Nokogiri 这样的网络抓取工具或像 Selenium 这样的测试工具，您可以使用它：

```
//p/text()[following-sibling::a][1] 
```

# php - 条件数组

> ID：10539769
> 
> 赞同：-2
> 
> 时间：2012-05-10T18:05:42.713
> 
> 标签：php, arrays, string

我正在尝试编写一个数组，该数组根据登录用户的性别显示一组特定的产品。数组并不是真正的问题，但我必须检查数据库然后根据结果创建条件语句的部分是我认为的主要问题。

这是我的代码：

```
<?php

include"config.php" or die "cannot connect to server";

$gender=$_POST['gender'];

    $qry ="SELECT * FROM server WHERE gender ='$gender'";
    $result = mysql_query($qry);

    $productdetails;
    $productdetails1["Product1"] = "£8";
    $productdetails1["Product2"] = "£6";
    $productdetails1["Product3"] = "£5";
    $productdetails1["Product4"] = "£6";
    $productdetails1["Product5"] = "£4";
    $productdetails2["Product6"] = "£8";
    $productdetails2["Product7"] = "£6";
    $productdetails2["Product8"] = "£5";
    $productdetails2["Product9"] = "£6";
    $productdetails2["Product10"] = "£4";

         if (mysql_num_rows($result) = 1) {
        foreach( $productdetails1 as $key => $value){
            echo "Product: $key, Price: $value <br />";
            }
         }                  
         else {
        foreach( $productdetails2 as $key => $value) {
            echo "Product: $key, Price: $value <br />";
            }
         }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:12:25.627

你如果陈述是错误的。`=`是赋值运算符，您应该使用[比较运算符](http://php.net/operators.comparison)，例如`==`or`===`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:19:16.753

当前代码会发生什么？

一些提示：首先尝试回显 $gender，以确保它通过。它是通过post提交的，如果没有发布会发生什么？这是从哪里来的？您应该尝试使用 get 代替。这似乎是你会给某人一个链接的东西，因此在这里发布没有意义。您总是可以同时拥有两者，如果存在则直接获取帖子，否则使用获取，否则默认为“男性”或“女性”，具体取决于您的受众。

接下来，您的查询输出的是什么？如果性别没有回馈任何东西，此时它可能是空的。似乎您正在查询所有通过了性别 = 任何内容的行，但是您的 if 语句询问是否有任何返回？然后你所做的就是去数组，但你不应该这样做，你应该输出你从数据库中得到的东西。假设您确实在名为 server 的表中有产品，您应该执行以下操作：

```
$products = mysql_query("SELECT * FROM server WHERE gender ='$gender");

while($product = mysql_fetch_array($products)){
    echo $product['name'] . " " . $product['price']. " " . $product['gender'];
    echo "<br />";
} 
```

在那张纸条上。你真的应该把你的桌子叫做别的东西，比如产品，而不仅仅是“服务器”，除非你所说的服务器是指一张装满服务员或计算机硬件实例的桌子。

# arrays - 网络上的 Int 数组字节排序

> ID：10539773
> 
> 赞同：0
> 
> 时间：2012-05-10T18:05:54.953
> 
> 标签：arrays, int, endianness

我知道这可能是一个愚蠢的问题，但是如果我要通过网络发送一个 int 数组，我需要使用字节排序吗？换句话说，假设我有 int a, b, c, d 和 int e [4]

e[1] = 一个；e[2] = b; e[3] = c; e[4] = d;

现在我发送 e 使用：write(socket, e, sizeof (e));

接收者会按顺序阅读吗？或者我需要在存储到数组之前将 htonl 用于 a、b、c、d 吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:08:19.303

如果接收者期望`int`s 以网络字节顺序排列，那么是的，您必须`int`在发送之前将每个都放入网络字节顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:11:26.883

网络不会关心字节顺序，但托管接收套接字的应用程序会关心。如果发送应用程序使用 little-endian 字节顺序，而接收应用程序使用 big-endian，那么您将必须进行必要的字节反转。

# apache-flex - 在 Adob e Flex 中集成 Paypal API

> ID：10539778
> 
> 赞同：0
> 
> 时间：2012-05-10T18:06:15.467
> 
> 标签：apache-flex, air, flexbuilder

我正在编写一个 Flex 项目，我需要通过他们的 API 与 Paypal 进行通信。真的不知道如何开始 - 这是我的第一个 flex/air 应用程序。

我不会使用任何服务器端技术（没有 Java、Php、.NET、Coldfusion）——所有请求都必须来自 Flex，并且响应会直接发送回 flex 应用程序。

有人可以给我一个例子或一些东西。假设[RefundTransaction API的实现](https://www.x.com/developers/paypal/documentation-tools/api/refundtransaction-api-operation-nvp "退款交易")

在 Flex 中。

是否可以？如果不是，那么我需要在技术堆栈中添加哪一层？只需要一些指示，我会从那里拿起它。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T19:59:04.383

一定要看看这篇文章[http://www.adobe.com/devnet/flex/articles/flex_paypal.html](http://www.adobe.com/devnet/flex/articles/flex_paypal.html)

本质上，我自己也需要弄清楚这一点。BIG 、**BIG、BIG**（对你来说足够大）密钥之一是**不要**在应用程序的任何地方包含您的 API 密钥（或其他敏感信息）。这是使用 JIT 语言的缺陷之一，因为它基于 VM，无法非常有效地*隐藏。*

# objective-c - 对象字符串值设置不正确

> ID：10539782
> 
> 赞同：0
> 
> 时间：2012-05-10T18:06:30.880
> 
> 标签：objective-c, macos, cocoa

我正在为自己编写一个小型项目时间管理程序，但遇到了一个让我感到困惑的问题。

他们的设置方式是我有一个名为的对象`TCObject`，我在另一个名为`ProjectTimerController`. `ProjectTimerController`是一个`NSWindowController`并且它有它自己的NIB文件。

我正在做的事情非常简单。当您单击 a 中的一行时，会`NSTableView` `ProjectTimerController`找到`TCObject`与该行相对应的 a。然后它将信息从那里加载`TCObject`到一个界面中，您可以在其中查看和编辑一些内容。
这是它的截图：

![截屏](../Images/171201c961f26d0f82207e6f3b52ae26.png)

现在，当我更改文本`NSTextView`然后按添加按钮时，`-saveString`调用函数并且`currentSelection`（它是 a`TCObject`并且代表当前选定的行）并且它的 notes 变量已设置。我知道 _notes 设置为新值，因为 NSLog 函数在`setString`运行时记录了 _notes 中的正确字符串。`-tableViewSelectionDidChange:`在将currentSelection 设置为新选择的对象之前 ，登录了相同的、正确的字符串。

但是，如果我选择刚刚更改注释的行，它只会加载相同的文本，“初始字符串”并检查`_notes`告诉我它是“初始字符串”。

我没有这个问题的东西`isFinished`。当切换完成复选框时，我将相应`TCObjects`的`isFinished`布尔值设置为与复选框相同的值。该对象会记住并根据我选择的行正确更改。

**[编辑]
*我在这里添加了更清晰的解释。**

1.  我单击 NSTableView 中的一行（让我们说最上面的一行）

2.  这会从 myProjects 数组加载一个相应的 TCObject，并将该对象的变量添加到 Notes NSTextView 框中，并打开或关闭 Finished。

3.  如果我现在写入“注释”框并按“添加”，则该文本将设置到该 TCObject 的 _notes 变量中。

4.  因此，如果我单击另一行，则会将其他一些文本加载到“注释”框中。点击第一行应该会给我刚刚在步骤 3 中写入 Notes 的字符串。但它没有。_notes 似乎总是包含我在 -init 方法中初始化它时设置的字符串。

5.  “完成”复选框工作正常。当我单击状态时，单击一行时已正确保存和加载。

6.  我知道当我按下 Add 按钮时 _notes 设置正确，因为 setString 中的 NSLog 方法记录了我在按下 Add 按钮时写入 Notes 的字符串。

**[/编辑]**

下面是`TCObject`和的准系统版本`ProjectTimerController`。

```
//TCObject.h
@interface TCObject : NSObject
{
    NSString *_notes;
    Boolean _isFinished;
}

@property (retain, nonatomic) NSString *notes;
@property (nonatomic) Boolean isFinished;

@end 
```

```
//TCObject.m
#import "TCObject.h"

@implementation TCObject
@synthesize notes = _notes, isFinished = _isFinished;

-(id)init{
    if (self = [super init]) {
        self.notes = @"Initial string";
        self.isFinished = NO;
    }
    return self;
}

- (void)dealloc {   
    [_notes release]; _notes = nil;
    [super dealloc];
}

-(void)setNotes:(NSString *)notes {
    [notes retain];
    [_notes release];
    _notes = notes;
    NSLog(@"Setting _notes as: %@", _notes);

}

-(NSString *)notes {

    NSLog(@"Getting _notes, which is: %@", _notes);
    return _notes;
}

@end 
```

```
//ProjectTimerController.m
- (id)initWithWindow:(NSWindow *)window {
    self = [super initWithWindow:window];
    if (self)
    {
        myProjects = [[NSMutableArray alloc]init];
        currentSelection = nil;

        TCObject *newProject = [[TCObject alloc] init];
        TCObject *newProject2 = [[TCObject alloc] init];
        TCObject *newProject3 = [[TCObject alloc] init];
        TCObject *newProject4 = [[TCObject alloc] init];

        [myProjects addObject:newProject];
        [myProjects addObject:newProject2];
        [myProjects addObject:newProject3];
        [myProjects addObject:newProject4];
    }
    return self;
}

-(IBAction)isFinishedToggle:(id)sender {
    if(currentSelection != nil){
        currentSelection.isFinished = finishedCheckBtn.state;
    }
}

-(IBAction)saveString:(id)sender {
    if(currentSelection != nil){
        currentSelection.notes = [[notesField textStorage] string];
    }
}

//delegate function for NSTableView
- (void)tableViewSelectionDidChange:(NSNotification *)aNotification {
    NSInteger selectedIndex = [table selectedRow];

    if(selectedIndex == -1){
        return;
    }
    //here the correct notes string is printed
    NSLog(@"curr: %i", currentSelection.notes);

    currentSelection = [myProjects objectAtIndex:selectedIndex];

    NSString *notesInfo = currentSelection.notes;
    Boolean isFinishedInfo = currentSelection.isFinished;

    [notesField setString:notesInfo];
    [finishedCheckBtn setState:isFinishedInfo];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:18:19.327

终于发现问题了。似乎以这种方式更改注释：

```
-(IBAction)saveString:(id)sender {
    if(currentSelection != nil){
        currentSelection.notes = [[notesField textStorage] string];
    }
} 
```

导致一些问题。如果我这样做，一切正常：

```
-(IBAction)saveString:(id)sender{
    if(currentSelection != nil){
        NSString *temps = [NSString stringWithFormat:@"%@", [[notesField textStorage] string]];
        currentSelection.notes = temps;
    }
} 
```

所以我猜测发生了什么是 _notes 指向我的 NSTextView 中包含的文本。因此，当我更改文本时，_notes 也发生了变化或类似的事情......

# ruby-on-rails - CSS背景图像未显示在rails网站上

> ID：10539784
> 
> 赞同：4
> 
> 时间：2012-05-10T18:06:48.130
> 
> 标签：ruby-on-rails, css, background-image

我正在尝试将 background-image css 属性与我正在使用 Ruby on Rails 构建的网站一起使用。

我尝试了几种不同的背景图像变体：url，背景：url，带和不带引号，以及图像的几个路径。该图像当前位于 app/assets/images/upload.png 中。

```
background: url(upload.png); 
```

**自定义.css.scss**

```
/* UNIVERSAL */

body {
background-color: black;
padding-top: 8px;
width: 800px;
margin-left: auto;
margin-right: auto;
font-family: arial, sans-serif;
font-size: 16px;
}

.content {
background-color: white;
-moz-border-radius: 10px;
-webkit-border-radius: 10px;
-khtml-border-radius: 10px;
border-radius: 10px;
padding: 1px 15px;
}

h2 {
font-size: 18px;
}

p {
font-size: 16px;
}   

ol {
font-size: 16px;
}

/* NAVIGATION */

ul {
padding: 0px;
}

#navtop {
float: right;
display: inline-block;
position: relative;
bottom: 47px;
right:4px;
letter-spacing:1px;
}

#topnavcontainer {
margin-bottom: -40px;

}

#navtop li, #navbottom li, #navbuttons li {
display: inline;
margin: 0px;
padding: 0px;
}

#navbuttons {
word-spacing: 25px;
position: relative;
left: 400px;
bottom: 60px;
display: inline-block;
}

#navbottom {
text-align: center;
word-spacing:90px;
letter-spacing:1px;
margin-top:25px;
}

#navtop a:link, #navbottom a:link, #navtop a:visited, #navbottom a:visited  {
text-decoration: none;
font-size: 12px;
color: #999999;
}

#navtop a:hover, #navbottom a:hover {
color: white;
}

#uploadbutton a:link, #uploadbutton a:visited, #viewbutton a:link, #viewbutton a:visited  { 
text-decoration: none;
border-style:solid;
border-width:3px;
border-color:#666666;
padding: 5px;   
color: white;
font-size: 14px;
font-weight: bold;
letter-spacing:2px;
}

#uploadbutton a:hover {
color: #FF0000;
}

#viewbutton a:hover {
color: #0066FF;
}   

/*style the main menu*/
.myMenu {
margin:0;
padding:0;
text-align: left;
}

.myMenu li {
list-style:none;
float:left;

}

.myMenu li a:link, .myMenu li a:visited {
display:block;
text-decoration:none;

padding: 0.5em 1em;
margin:0;

}

.myMenu li a:hover {
background-color:black; 
}

/*style the sub menu*/
.myMenu li ul {
position:absolute;
visibility:hidden;
margin:0;
padding:0;
}

.myMenu li ul li {
display:inline;
float:none;
}

.myMenu li ul li a:link, .myMenu li ul li a:visited {
background-color:black;
width:55px;
}

.myMenu li ul li a:hover {
background-color:#999999;
}

/* HOME PAGE */

#homepage {
text-align: center;
}

#homeheadline {
color: white;
background-color: #333333;
font-weight:normal;
border-style:solid;
border-width:6px;
border-color:#333333;
letter-spacing:1px;
margin-bottom: 45px;
}

a#clickhere , a#clickhere:visited {
text-decoration: none;
color: #0066FF;
}

#videotitle {
color: #FF0000;
position: absolute;;
bottom: 70px;
display: inline;
font-size: 19px;
left: 60px;
}

#videolist {
position: absolute;
left: 40px;
display: inline-block;
}

#audiencetitle {
color: #0066FF;
position: absolute;
bottom: 70px;
left: 340px;
display: inline;
font-size: 19px;
}

#audiencelist {
position: absolute;
display: inline-block;
left: 320px;
}

a.greenbutton, a.greenbutton:visited, {
font-size: 14px;
color: white;
font-weight: bold;
text-decoration: none;
background-color: #009900;
border-style:solid;
border-width:7px;
border-color:#009900;
letter-spacing:1px;
}

#homead {
margin-bottom: 25px;
margin-top: 45px;
display: block;
}

#lists {
width: 538px;
height: 100px;
position: relative;
margin-bottom: 35px;
margin-left: auto;
margin-right: auto;
text-align: left;
}

/* FORMS */

.greenbutton {
font-family: arial, sans-serif;
font-size: 14px;
color: white;
font-weight: bold;
text-decoration: none;
background-color: #009900;
border-style:solid;
border-width:3px;
border-color:#009900;
letter-spacing:1px;
margin-bottom: 40px;
}

.textinput {
border: 1px solid #bbb;
height: 18px;
width: 300px;
margin-bottom:30px;
}

.signform {
text-align: center;
width:300px;
margin-left: auto;
margin-right: auto;

}

.signformfields {
text-align: left;
}

#error_explanation {
color:#f00;
font-size: 16px;
ul { list-style: none;
   margin: 0 0 18px 0;
   }
}

.field_with_errors {
 @extend .control-group;
 @extend .error;
 }

/* Upload Menu */

#uploadpage {
height: 580px;

}
.uploadnav ul {
list-style-type: none;
}

.uploadnav {
width: 200px;
text-align: center;
float:left;

}

.uploadbox {
background-color: black;
background-image: url( image_path ("upload.png"));
border-style:solid;
border-width:25px;
border-color: black;
margin-top: 20px;

}

.uploadgreybox {
background-color: #CCCCCC;
border-style:solid;
border-width:25px;
border-color: #CCCCCC;
margin-top: 20px;
}

.uploadtext {
color: white;
background-color: black;
padding: 5px;
}

.uploadgreytext {
color: #666666;
background-color: #CCCCCC;
padding: 5px;
}

.uploadpagecontent {

float:right;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T18:18:49.770

最正确的方法：

```
background-image: url(<%= asset_path 'upload.png' %>) 
```

有关详细信息，请参阅指南：http: [//guides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets](http://guides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets)（第 2.2.1 节 CSS 和 ERB）

注意：如果您在 application.css 中执行此操作，则将 .erb 扩展名添加到它以成为 application.css.erb

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-15T22:56:21.500

如果有人过来并仍在寻找答案并且您正在使用 SASS 和引导程序，您可以尝试

```
background: image-url('bgImage.jpg'); 
```

这对我有用。您也可以查看jdoe 提到的[http://guides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets 。](http://guides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T22:08:51.903

您需要正确指向图像路径。它应该是：

```
background: url(/assets/url.png); 
```

尝试在 Google Chrome 中使用 Inspector - 对于检查 CSS 调用的此类资源很有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T22:20:26.660

我有类似的问题，我发现以下代码有效

```
background-image: url('/assets/xyz.jpg'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T18:11:13.373

您可能需要更改图像的路径。与 images 文件夹相关的 css 文件在哪里，例如 app/assets/css/style.css。

如果它在这里，那么您的路径 upload.png 将是`background: url(../images/upload.png);`背景：`url(/images/upload.png);`或`background: url(images/upload.png);`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T19:31:23.430

您不必更改 custom.css.scss 的扩展名，或者重要的是无需将 erb 添加到 scss 文件

在 /assets/stylesheets 目录中的 application.css 文件中，您只需要一个元素 html{ background: url('/images/test.jpg'); 文本对齐：居中；颜色：#fff; }

拥有你的css文件，移动

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-01-06T08:41:41.280

尝试

```
background: white;z-index:-1; 
```

# java - java不能比较字符串

> ID：10539790
> 
> 赞同：0
> 
> 时间：2012-05-10T18:07:20.047
> 
> 标签：java

我编写了一个从套接字读取一行的代码。
如果该行是“再见”，我希望它输出“不错”。由于某种原因它不起作用，尽管我确实尝试无条件输出输入并且它确实说“再见”

这是我的代码

```
 String input = null;
                if (socket.getInputStream().available() > 0)                    
                    input = in.readLine();                                                                  

                if (input != null)
                {
                    input = input.trim();
                    if (input == "bye")
                        out.println("nice");

                    out.println(input);
                } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T18:08:40.140

使用[`String#equals()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equals%28java.lang.Object%29), not`==`来比较字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:09:32.033

```
if (input != null)
                {
                    input = input.trim();
                    if (input.equals("bye"))
                        out.println("nice");

                    out.println(input);
                } 
```

比较字符串的`equals()` 内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T18:10:43.617

你想要你的内心如果这样说：

```
if (input.equals("bye")) 
```

代替

```
if (input == "bye") 
```

这`==`实际上是比较引用对象（有点像指针），有时可能在字符串被实习时起作用，但这是另一个话题。使用`.equals()`！

# javascript - 使用 Gmail 帐户登录我的应用程序？

> ID：10539796
> 
> 赞同：3
> 
> 时间：2012-05-10T18:07:28.943
> 
> 标签：javascript, android, security, gmail

对于我正在开发的 android 应用程序，它需要创建配置文件以向其他用户发送和接收内容。对于登录过程，用户是否可以使用手机上关联的 Gmail 帐户登录？这将是使用 google play 的活跃帐户。

这将使整个登录过程非常顺利，我认为这将是最好的方案。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T11:10:06.423

是的，这是可能的，而且很简单。在你开始之前你需要添加一个权限给你 AndroidManifest.xml

```
<uses-permission android:name="android.permission.GET_ACCOUNTS"></uses-permission> 
```

它允许您读取与设备关联的帐户。然后在应用程序中执行以下操作：

```
Account[] accounts = AccountManager.get(context).getAccountsByType("com.google"); 
```

这将返回用户的所有 google 帐户。在您的情况下，您可能只需要电子邮件，所以这里有一个快速的静态函数，可以将它们提供给您：

```
public static String[] getAccounts(Context context) {
    Account[] accounts = AccountManager.get(context).getAccountsByType("com.google");
    String[] names = new String[accounts.length];

    for (int i = 0; i < accounts.length; ++i) names[i] = accounts[i].name;

    return names;
} 
```

此函数将返回设备上所有 gmail 电子邮件（Google 帐户）的字符串数组。

但是，如果您需要与某些 Google 服务“交谈”以获取更多信息，则必须执行以下操作。首先向清单添加一个权限：

```
<uses-permission android:name="android.permission.USE_CREDENTIALS"></uses-permission> 
```

此权限将允许您的应用使用使用凭据在某些 Google 服务前识别用户。它不会给你凭据（密码）。

要使用某些 Google 服务，您需要一个令牌。这是一个快速功能：

```
public static String getToken(Activity activity, String serviceName) {
        try {
            Bundle result = AccountManager.get(activity).getAuthToken(account, serviceName, null, activity, null, null).getResult();

            return result.getString(AccountManager.KEY_AUTHTOKEN);
        } catch (OperationCanceledException e) {
            Log.d("Test", "Operation Canceled");
        } catch (AuthenticatorException e) {
            Log.d("Test", "Authenticator Exception");
        } catch (IOException e) {
            Log.d("Test", "Auth IOException");
        }

        return null;
} 
```

一旦你有了令牌，你就只是他们拥有的 HTTP API，你会玩得很开心:-)

# javascript - 对象和数组的复杂 JSON 嵌套

> ID：10539797
> 
> 赞同：39
> 
> 时间：2012-05-10T18:07:29.023
> 
> 标签：javascript, jquery, arrays, json, object

我很难理解 JSON 对象/数组的语法和结构。

```
{ 
  "accounting" : [   
                     { "firstName" : "John",  
                       "lastName"  : "Doe",
                       "age"       : 23 },

                     { "firstName" : "Mary",  
                       "lastName"  : "Smith",
                        "age"      : 32 }
                 ],                            
  "sales"      : [ 
                     { "firstName" : "Sally", 
                       "lastName"  : "Green",
                        "age"      : 27 },

                     { "firstName" : "Jim",   
                       "lastName"  : "Galley",
                       "age"       : 41 }
                 ] 
} 
```

我想创建一个包含以下信息的对象和数组的嵌套结构：

```
{
"problems": [{
    "Diabetes":[{
        "medications":[{
            "medicationsClasses":[{
                "className":[{
                    "associatedDrug":[{
                        "name":"asprin",
                        "dose":"",
                        "strength":"500 mg"
                    }],
                    "associatedDrug#2":[{
                        "name":"somethingElse",
                        "dose":"",
                        "strength":"500 mg"
                    }]
                }],
                "className2":[{
                    "associatedDrug":[{
                        "name":"asprin",
                        "dose":"",
                        "strength":"500 mg"
                    }],
                    "associatedDrug#2":[{
                        "name":"somethingElse",
                        "dose":"",
                        "strength":"500 mg"
                    }]
                }]
            }]
        }],
        "labs":[{
            "missing_field": "missing_value"
        }]
    }],
    "Asthma":[{}]
}]} 
```

但我不知道正确的方法应该是什么。我应该只制作 JavaScript 对象吗？JSON 对这个项目有意义吗？

设置这样的东西的正确语法是什么？

到目前为止，这是我的代码：

```
$(document).ready(function() {
    $.getJSON('js/orders.json', function(json) {
      $.each(json.problems, function(index, order) {
        $('.loadMeds').append('<p>' + order.name + '</p>')
      });
    });
}); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-10T18:20:32.167

第一个代码是 Javascript 代码的示例，类似，但不是 JSON。JSON 不会有 1) 评论和 2)`var`关键字

您的 JSON 中没有任何注释，但您应该删除`var`并像这样开始：

```
orders: { 
```

该`[{}]`符号的意思是“数组中的对象”，而不是您在任何地方都需要的。这不是错误，但对于某些目的来说太复杂了。AssociatedDrug 应该作为一个对象很好地工作：

```
"associatedDrug": {
                "name":"asprin",
                "dose":"",
                "strength":"500 mg"
          } 
```

此外，空的对象实验室应该装满一些东西。

除此之外，您的代码还可以。您可以将其粘贴到 javascript 中，或使用该`JSON.parse()`方法或任何其他解析方法（请[不要使用 eval](https://www.google.com/search?q=eval%20is%20evil)）

更新 2 回答：

```
obj.problems[0].Diabetes[0].medications[0].medicationsClasses[0].className[0].associatedDrug[0].name 
```

返回“阿司匹林”。然而，它更适合任何地方的 foreaches

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-11T20:49:13.127

I successfully solved my problem. Here is my code:

The complex JSON object:

```
 {
    "medications":[{
            "aceInhibitors":[{
                "name":"lisinopril",
                "strength":"10 mg Tab",
                "dose":"1 tab",
                "route":"PO",
                "sig":"daily",
                "pillCount":"#90",
                "refills":"Refill 3"
            }],
            "antianginal":[{
                "name":"nitroglycerin",
                "strength":"0.4 mg Sublingual Tab",
                "dose":"1 tab",
                "route":"SL",
                "sig":"q15min PRN",
                "pillCount":"#30",
                "refills":"Refill 1"
            }],
            "anticoagulants":[{
                "name":"warfarin sodium",
                "strength":"3 mg Tab",
                "dose":"1 tab",
                "route":"PO",
                "sig":"daily",
                "pillCount":"#90",
                "refills":"Refill 3"
            }],
            "betaBlocker":[{
                "name":"metoprolol tartrate",
                "strength":"25 mg Tab",
                "dose":"1 tab",
                "route":"PO",
                "sig":"daily",
                "pillCount":"#90",
                "refills":"Refill 3"
            }],
            "diuretic":[{
                "name":"furosemide",
                "strength":"40 mg Tab",
                "dose":"1 tab",
                "route":"PO",
                "sig":"daily",
                "pillCount":"#90",
                "refills":"Refill 3"
            }],
            "mineral":[{
                "name":"potassium chloride ER",
                "strength":"10 mEq Tab",
                "dose":"1 tab",
                "route":"PO",
                "sig":"daily",
                "pillCount":"#90",
                "refills":"Refill 3"
            }]
        }
    ],
    "labs":[{
        "name":"Arterial Blood Gas",
        "time":"Today",
        "location":"Main Hospital Lab"      
        },
        {
        "name":"BMP",
        "time":"Today",
        "location":"Primary Care Clinic"    
        },
        {
        "name":"BNP",
        "time":"3 Weeks",
        "location":"Primary Care Clinic"    
        },
        {
        "name":"BUN",
        "time":"1 Year",
        "location":"Primary Care Clinic"    
        },
        {
        "name":"Cardiac Enzymes",
        "time":"Today",
        "location":"Primary Care Clinic"    
        },
        {
        "name":"CBC",
        "time":"1 Year",
        "location":"Primary Care Clinic"    
        },
        {
        "name":"Creatinine",
        "time":"1 Year",
        "location":"Main Hospital Lab"  
        },
        {
        "name":"Electrolyte Panel",
        "time":"1 Year",
        "location":"Primary Care Clinic"    
        },
        {
        "name":"Glucose",
        "time":"1 Year",
        "location":"Main Hospital Lab"  
        },
        {
        "name":"PT/INR",
        "time":"3 Weeks",
        "location":"Primary Care Clinic"    
        },
        {
        "name":"PTT",
        "time":"3 Weeks",
        "location":"Coumadin Clinic"    
        },
        {
        "name":"TSH",
        "time":"1 Year",
        "location":"Primary Care Clinic"    
        }
    ],
    "imaging":[{
        "name":"Chest X-Ray",
        "time":"Today",
        "location":"Main Hospital Radiology"    
        },
        {
        "name":"Chest X-Ray",
        "time":"Today",
        "location":"Main Hospital Radiology"    
        },
        {
        "name":"Chest X-Ray",
        "time":"Today",
        "location":"Main Hospital Radiology"    
        }
    ]
} 
```

The jQuery code to grab the data and display it on my webpage:

```
$(document).ready(function() {
var items = [];

$.getJSON('labOrders.json', function(json) {
  $.each(json.medications, function(index, orders) {
    $.each(this, function() {
        $.each(this, function() {
            items.push('<div class="row">'+this.name+"\t"+this.strength+"\t"+this.dose+"\t"+this.route+"\t"+this.sig+"\t"+this.pillCount+"\t"+this.refills+'</div>'+"\n");
        });
    });
  });

  $('<div>', {
    "class":'loaded',
    html:items.join('')
  }).appendTo("body");

}); 
```

});

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-10T18:19:17.820

确保遵循[JSON](http://json.org/)的语言定义。在您的第二个示例中，该部分：

```
"labs":[{
    ""
}] 
```

无效，因为对象必须由零个或多个键值对组成`"a" : "b"`，其中`"b"`可以是任何*有效值*。一些解析器可能会自动解释`{ "" }`为 be `{ "" : null }`，但这不是一个明确定义的情况。

此外，您还经常使用嵌套*的对象数组* `[{}]`。我只会在以下情况下这样做：

1.  数组中的每个对象都没有好的“标识符”字符串。
2.  在该条目的键值上使用数组有一些明确的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T18:17:43.807

首先，选择数据结构（xml、json、yaml）通常只包括可读性/大小问题。例如

Json 非常紧凑，但没有人能轻易阅读，很难调试，

XML 很大，但每个人都可以轻松读取/调试它，

Yaml 介于 Xml 和 json 之间。

但是如果你想大量使用 Javascript 和/或你的软件在浏览器-服务器之间进行大量数据传输，你应该使用 Json，因为它是纯 javascript 并且非常紧凑。但是不要尝试将它写成字符串，使用库从对象生成您需要的代码。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-31T04:47:06.343

您可以尝试使用此函数在国王数组的嵌套嵌套数组中查找任何对象。

**例子**

```
function findTByKeyValue (element, target){
        var found = true;
        for(var key in target) { 
            if (!element.hasOwnProperty(key) || element[key] !== target[key])   { 
                found = false;
                break;
            }
        }
        if(found) {
            return element;
        }
        if(typeof(element) !== "object") { 
            return false;
        }
        for(var index in element) { 
            var result = findTByKeyValue(element[index],target);
            if(result) { 
                return result; 
            }
        } 
    };

findTByKeyValue(problems,{"name":"somethingElse","strength":"500 mg"}) =====> result equal to object associatedDrug#2 
```

# c# - 保护基于 REST 的 WCF 服务

> ID：10539801
> 
> 赞同：2
> 
> 时间：2012-05-10T18:07:43.930
> 
> 标签：c#, wcf, web-services, security, authentication

我正在寻找一种方法来保护我的 WCF 服务使用 http 和简单的用户名密码身份验证，**而不使用证书**。
该服务由 Android 设备使用，因此我无法使用 .NET 代理生成的类。
我已经阅读了有关基本 HTTP 身份验证的信息，但还没有找到实现此方法的简单方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:23:46.163

您是否尝试过为 WCF使用[MSDN 自定义用户名/密码验证器？](http://msdn.microsoft.com/en-us/library/aa702565.aspx)它依赖于[`serviceCredentials`](http://msdn.microsoft.com/en-us/library/ms731370.aspx)配置和实现一个[`UsernamePasswordValidator`](http://msdn.microsoft.com/en-us/library/system.identitymodel.selectors.usernamepasswordvalidator.aspx).

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-12T20:39:03.373

我发现 ASP.NET Web API 似乎是比 WCF 更好的基于 REST 的服务的解决方案。

# objective-c - 将 xml 中的 unicode 字符转换为 ascii

> ID：10539807
> 
> 赞同：0
> 
> 时间：2012-05-10T18:07:52.870
> 
> 标签：objective-c, xml, escaping

InDesign 可以导出 XML 文件，如果您选中该框，它还将“重新映射中断、空白和特殊字符”。我怎样才能在文本上做同样的事情？

例如，如果我有： •这是一颗子弹——长破折号

InDesign 导出为： 8226;this is a bullet 8212;long dash

我不知道这是什么编码。标准的 Objective-C 类可以做到这一点（在 OS X 上工作）或第三方库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T20:23:01.250

它们是 HTML 的东西。人们通常将其称为 HTML 编码，但从技术上讲，它们是[数字字符引用](http://www.w3.org/TR/html4/charset.html#h-5.3.1)。Foundation 中没有内置任何东西来解码它们，但如果你环顾四周，你会发现一些代码来处理它（例如，[https://github.com/mwaterfall/MWFeedParser/blob/master/Classes/NSString+HTML.m](https://github.com/mwaterfall/MWFeedParser/blob/master/Classes/NSString+HTML.m)）。

# c# - 获取所有计算机的列表以及是否已登录到 AD

> ID：10539810
> 
> 赞同：0
> 
> 时间：2012-05-10T18:08:13.857
> 
> 标签：c#, active-directory, directoryentry

我正在尝试接收我的 AD 中的所有计算机以及当前登录的计算机。我尝试通过检查“lastLogonStamp”来执行此操作，但返回的值错误，说我的服务器在八天前登录到 AD . 即使我重新启动服务器，它也会说同样的话。我从另一个问题这里得到了代码：

[如何列出所有计算机以及它们最后一次登录 AD 的时间？](https://stackoverflow.com/questions/1602036/how-to-list-all-computers-and-the-last-time-they-were-logged-onto-in-ad)

```
public DataTable GetListOfComputers(string domain, string userName, string password)
    {
        DirectoryEntry entry = new DirectoryEntry("LDAP://" + domain,
                userName, password, AuthenticationTypes.Secure);
        DirectorySearcher search = new DirectorySearcher(entry);
        string query = "(objectclass=computer)";
        search.Filter = query;

        search.PropertiesToLoad.Add("name");
        search.PropertiesToLoad.Add("lastLogonTimestamp");

        SearchResultCollection mySearchResultColl = search.FindAll();

        DataTable results = new DataTable();
        results.Columns.Add("name");
        results.Columns.Add("lastLogonTimestamp");

        foreach (SearchResult sr in mySearchResultColl)
        {
            DataRow dr = results.NewRow();
            DirectoryEntry de = sr.GetDirectoryEntry();
            dr["name"] = de.Properties["Name"].Value;
            dr["lastLogonTimestamp"] = DateTime.FromFileTimeUtc(long.Parse(sr.Properties["lastLogonTimestamp"][0].ToString()));
            results.Rows.Add(dr);
            de.Close();
        }

        return results;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:28:08.560

如果您使用的是 .NET 3.5 及更高版本，则可以使用 a`PrincipalSearcher`和“按示例查询”主体进行搜索：

```
// create your domain context
PrincipalContext ctx = new PrincipalContext(ContextType.Domain);

// define a "query-by-example" principal - here, we search for a ComputerPrincipal 
ComputerPrincipal qbeComputer = new ComputerPrincipal(ctx);

// create your principal searcher passing in the QBE principal    
PrincipalSearcher srch = new PrincipalSearcher(qbeComputer);

// find all matches
foreach(var found in srch.FindAll())
{
    // do whatever here - "found" is of type "Principal" - it could be user, group, computer.....          
    ComputerPrincipal cp = found as ComputerPrincipal;

    if(cp != null)
    {
       string computerName = cp.Name;
       DateTime lastLogon = cp.LastLogon;
    }
} 
```

如果您还没有 - 绝对阅读 MSDN 文章[Managing Directory Security Principals in the .NET Framework 3.5](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)，它很好地展示了如何充分利用 .NET Framework 中的新功能`System.DirectoryServices.AccountManagement`。或查看[System.DirectoryServices.AccountManagement](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)命名空间上的 MSDN 文档。

# wsh - WScript 中的通配符文件搜索

> ID：10539815
> 
> 赞同：2
> 
> 时间：2012-05-10T18:08:23.623
> 
> 标签：wsh, jscript, file-search

我需要使用 JScript 获取与某个通配符模式匹配的文件夹中的所有文件。例如：

```
var fso = new ActiveXObject("Scripting.FileSystemObject");
var folderName = "C:\\TRScanFolder\\";
var folder = fso.GetFolder(folderName);
var searchPattern = "1001-*POD*.*"
// Now I need a list of all files matching the search pattern 
```

我知道我可以遍历`folder.Files`集合并根据正则表达式测试名称，但我更愿意让 Windows 进行搜索并只获取匹配的名称。这主要是为了提高性能，因为文件夹中可能有数百个文件，但只有少数是我想要的。

有没有可以用来搜索的功能或东西？还是我应该坚持使用循环和正则表达式？

编辑：在这里，我必须使用正则表达式。有没有办法做到这一点？

```
var regex = /^1001-.*POD.*\..*$/i;
var files = new Enumerator(folder.Files);
for (files.moveFirst(); !files.atEnd(); files.moveNext())
{
    var fileAttachment = files.item();
    if (regex.test(fileAttachment.Name))
    {
        // Do stuff
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T03:45:55.580

一种替代方法是转至命令行并使用该`dir`命令。

```
var wsh = new ActiveXObject("WScript.Shell");
var fso = new ActiveXObject("Scripting.FileSystemObject");
var dirName = "C:\\someFolder";
var pattern = "s*";
var fileName;

var oExec = wsh.Exec('%comspec% /c dir /on /b "' + dirName + '\\' + pattern + '"');

// wait for dir command to finish
while (oExec.Status === 0) {
    WScript.Sleep(100);
}

// process output
while (!oExec.StdOut.AtEndOfStream) {
    fileName = oExec.StdOut.ReadLine();

    if ( fso.FileExists(fso.BuildPath(dirName, fileName)) ) {
        //do stuff
        WScript.Echo(fileName);
    }
} 
```

# twitter - 关于 twitter 搜索 API 请求限制

> ID：10539816
> 
> 赞同：0
> 
> 时间：2012-05-10T18:08:24.623
> 
> 标签：twitter, twitter-search

在 twitter 速率限制页面 ( [https://dev.twitter.com/docs/rate-limiting](https://dev.twitter.com/docs/rate-limiting) ) 它说

"*未经身份验证的呼叫每小时允许 150 个请求。未经身份验证的呼叫是根据发出请求的服务器或设备的面向公众的 IP 来衡量的。* "

1.  那是基于最终用户IP地址还是服务器IP（http：xxxx.com的IP）的测量？
2.  有没有办法通过 Twitter 的一些付费服务来增加限制？

问候， 纳文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T04:05:23.607

1.  服务器 IP
2.  不，但是您应该使用经过身份验证的调用 (oAuth) - 您每小时收到 350 个请求。您的应用程序的每个经过身份验证的用户都有 350 个可以使用的调用，IP 被忽略。

# python - Python os.makedirs 重新创建路径

> ID：10539823
> 
> 赞同：3
> 
> 时间：2012-05-10T18:08:36.737
> 
> 标签：python, path, tree, append, mkdirs

我想遍历现有路径和文件名的文本文件中的每一行，将字符串划分为驱动器、路径和文件名。然后我想做的是将文件及其路径复制到新位置 - 不同的驱动器或附加到现有文件树（即，如果 S:\A\B\C\D\E\F.shp是原始文件。我希望将其附加到新位置 C:\users\visc\A\B\C\D\E\F.shp

由于我的编程技能不佳，我继续收到错误消息：

```
File "C:\Users\visc\a\b.py", line 28, in <module>
     (destination) = os.makedirs( pathname, 0755 ); 
```

这是我的代码：

导入操作系统、系统、shutil

```
## Open the file with read only permit
f = open('C:/Users/visc/a/b/c.txt')

destination = ('C:/Users/visc')
# read line by line
for line in f:

     line = line.replace("\\\\", "\\")
     #split the drive and path using os.path.splitdrive
     (drive, pathname) = os.path.splitdrive(line)
     #split the path and fliename using os.path.split
     (pathname, filename) = os.path.split(pathname)
#print the stripped line
     print line.strip()
#print the drive, path, and filename info
     print('Drive is %s Path is %s and file is %s' % (drive, pathname, filename))

     (destination) = os.makedirs( pathname, 0755 );
     print "Path is Created" 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T18:44:10.753

您需要做的是在调用之前检查文件夹是否存在，`makedirs()`或者在文件夹已经存在时处理发生的异常。在 Python 中，处理异常更常规一些，所以改变你的`makedirs()`行：

```
try:
    (destination) = os.makedirs( pathname, 0755 )
except OSError:
    print "Skipping creation of %s because it exists already."%pathname 
```

在尝试创建文件夹之前检查文件夹的策略称为“Look Before You Leap”或 LBYL；处理预期错误的策略是“请求宽恕比许可更容易”或 EAFP。EAFP 的优点是它可以正确处理文件夹由检查和`makedirs()`调用之间的另一个进程创建的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T18:12:48.920

我猜你想要类似的东西

```
os.makedirs(os.path.join(destination, pathname), 0755 ) 
```

如果您想将 给出的文件路径`pathname`与 给出的新目标连接起来`destination`。您的代码当前尝试在与以前相同的位置创建文件（至少看起来像这样 - 不能肯定地说，因为我不知道您正在阅读的文件中的内容以及当前目录是什么）。

如果将调用结果分配给`os.makedirs()`to `destination`（括号与该行中的分号一样无用），则实际上设置`destination`为`None`since`os.makedirs()`实际上不会返回任何内容。而且你没有用它来构建你的新路径。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-14T15:08:06.213

Python 3.2 添加了一个exist_ok 可选参数：

os.makedirs（名称，模式=0o777，exist_ok=False）

如果您有幸被允许使用 Python 3，这可能是一个更好（更安全）的选择。

# c# - NMEA gps 没有得到正确的坐标格式

> ID：10539824
> 
> 赞同：1
> 
> 时间：2012-05-10T18:08:38.737
> 
> 标签：c#, windows, google-maps-api-3, gps, nmea

我正在使用[这篇](http://www.codeproject.com/Articles/13577/GPS-Deriving-British-Ordnance-Survey-Grid-Referenc)文章和示例来测试我的 gps。首先我必须说这个程序真的很棒，但我当然需要一些帮助。

**第一的**

*所以我需要以“正常”（据我所知是正常的）欧洲格式获取坐标，例如十进制为 16,445554477 的东西......在这里我得到的度数很好，但我需要十进制值。当我尝试将我在这个程序中得到的十进制值时，我不知道如何使用它们，因为我不熟悉这种格式。例如我得到了 5600,35568 的东西......我不知道如何在谷歌地图中表示它。*

**第二**

我正在将数据从 gps 记录到数据库中。问题是我在一秒钟内得到 2-4 条记录。如何使其达到每秒一个数据？我试图查看代码但没有成功。

**第三**- 也是最后一个

是如何将第一个问题的数据实现到谷歌地图 API v3 中？

第一个问题是主要问题。其他两个只有在有人知道该怎么做的情况下。

我相信很多人都和我有同样的问题。当然也有很多人解决了这个“问题”。所以请给我一些例子。

有一个很好的编码:)

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:33:54.127

**首先**
你需要[解析你的 NMEA 字符串](http://www.codeproject.com/Articles/279647/NMEA-0183-2-0-Sentense-parser-builder)，你应该感兴趣的字符串是 RMC

```
$GPRMC,092750.000,A,5321.6802,N,00630.3372,W,0.02,31.66,280511,,,A*43 
```

这有纬度和经度的信息。要将它们从度数转换为 xy 坐标，请检查此[线程](https://stackoverflow.com/questions/1185408/converting-from-longitude-latitude-to-cartesian-coordinates)。使用 WGS84 将它们转换为 XY 坐标后，您就可以在 Google 地图中使用它们。
**秒**
通常 GPS 数据接收间隔为 1（一）秒。我不确定您如何在一秒钟内获得 2-4 条记录。但我建议您使用计时器并在每秒后获取记录，并且只存储您需要的记录，就像在您的情况下，您需要存储 GPRMC 字符串中可用的基于位置的数据。请查看此链接[编写您自己的 GPS 应用程序：第 2 部分](http://www.codeproject.com/Articles/9115/Writing-Your-Own-GPS-Applications-Part-2)
**第三**
部分 如果您想根据谷歌地图中的第一个问题显示位置，您会在[Google Maps API上找到很多帮助](https://developers.google.com/maps/documentation/javascript/). 我没有使用过这个 API，但我使用过 android。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-15T12:59:52.567

我在 toptechboy.com 上找到的一些代码

```
 degWhole=float(int(GPS.longitude/100)); //gives me the whole degree part of Longitude

 degDec = (GPS.longitude - degWhole*100)/60; //give me fractional part of longitude

 deg = degWhole + degDec; //Gives complete correct decimal form of Longitude degrees

  if (GPS.lon=='W') {  //If you are in Western Hemisphere, longitude degrees should be negative
    deg= (-1)*deg;
  } 
```

希望能帮助到你...

# ruby-on-rails - Ruby on Rails - 地理编码器视图

> ID：10539828
> 
> 赞同：2
> 
> 时间：2012-05-10T18:09:03.860
> 
> 标签：ruby-on-rails, google-maps, rails-geocoder

我试图使用[地理编码](https://github.com/alexreisner/geocoder)器来显示基于地址的位置。

我的问题是，一旦我从用户插入数据库的地址中获得纬度和经度，我应该在视图中放置什么以显示交互式地图？

我的地址模型

```
 belongs_to <another model>
 attr_accessible <all addresses attributes including latitude and longitude>

 geocoded_by :address

 after_validation :geocode, :if => :address_changed? 
```

插入地址后，会自动计算纬度和经度字段。

我遵循了 Ryan 的 Rail Cast 教程，但最后，我不想显示静态图像，而是想显示地图，谷歌地图交互风格。我怎样才能做到这一点？

如果已经查看了[Google-Maps-for-Rails](https://github.com/apneadiving/Google-Maps-for-Rails)，但无法理解如何在显示视图中获取单个位置的地图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:13:56.977

仔细查看[Google-Maps-for-Rails](https://github.com/apneadiving/Google-Maps-for-Rails)。该 gem 使它变得微不足道，关于如何在您的视图中获取交互式地图的说明非常清楚：

（我假设您的 Address 模型属于 User 模型。根据需要更改名称。）

如果您只想要地图上的一个特定用户，当然您可以更改控制器：

```
@json = User.find(params[:id]).address.to_gmaps4rails 
```

在您看来：

```
<%= gmaps4rails(@json) %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T18:14:18.027

[此处](https://developers.google.com/maps/documentation/javascript/examples/)提供了许多有用的 Google Maps API 示例。在最简单的情况下，您可以执行以下操作：

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
  var lat = <%= @model.latitude %>, 
      lon = <%= @model.longitude %>,
      map;
  function initialize() {
    var myOptions = {
      center: new google.maps.LatLng(lat, lon)
    };
    map = new google.maps.Map(document.getElementById('map_canvas'),
        myOptions);
  }

  google.maps.event.addDomListener(window, 'load', initialize);
</script>
<div id="map_canvas"></div> 
```

只需将`@model.latitude`和替换`@model.longitude`为模型中相应的地理编码字段即可。

# salesforce - 如何正确覆盖 Salesforce 标准对象控制器保存方法以在视觉强制页面中拦截它？

> ID：10539829
> 
> 赞同：2
> 
> 时间：2012-05-10T18:09:11.747
> 
> 标签：salesforce, apex-code, visualforce

您好，我创建了一个视觉力页面，以标准的主控制器作为控制器并对其进行扩展。我想这样做，所以我仍然可以使用 apex:detail 控件，而不是重新发明轮子来处理标准的潜在客户信息、相关列表等。

我添加了一个 apex:commandbutton 并使其调用保存。当我点击这个按钮时，我可以清楚地看到我的函数正在被调用。但是，不会捕获通过内联编辑对潜在客户信息所做的所有更改。

例如，如果我使用内联编辑编辑 LastName 并单击 apex:command 按钮，则不会保存新的 LastName 值。这几乎就像 apex:commandbutton 调用的保存函数不知道数据更改一样。

以下是我的视觉力量页面的代码。

```
<apex:page standardController="Lead" extensions="LeadTestExtensionController">
<apex:form >
    <apex:commandButton action="{!save}" value="Save" id="btnSave"/>
    <apex:detail subject="{!Lead.Id}" relatedList="true" showchatter="true" inlineEdit="true" />
</apex:form>
</apex:page> 
```

以下是共享类 LeadTestExtensionController { private Apexpages.StandardController 控制器；私有 PageReference 页面；私有字符串 id；私人决赛 Lead myLead; 公共字符串位置 {get; 放;}

```
public LeadTestExtensionController(ApexPages.StandardController stdController) {
    this.controller = stdController;
    this.myLead = (Lead)stdController.getrecord();
    this.page = ApexPages.currentPage();
    this.id = page.getParameters().get('id');
    List<Lead> myLeads = [select Opportunity_Stage__c from lead where id = :id];
    if(myLeads.size() > 0)
    {
        positions = myLeads[0].Opportunity_Stage__c;
    }
}

public PageReference save() {
    this.controller.save();
    PageReference newPage = New PageReference('/apex/RCS');
    newPage.getParameters().put('id',ApexPages.currentPage().getParameters().get('id'));
    newPage.setRedirect(true);
    return newPage;
 } 
```

}

一旦我点击 apex:command 按钮，页面就会被重定向到 apex/RCS，所以我知道它被调用了。但是，如果我返回同一条线索，则姓氏不会改变。我的印象是以下行会调用标准控制器的保存功能，该功能应该负责更新姓氏。

```
this.controller.save(); 
```

我做错了什么，我该如何做到这一点。上面的代码是我实际代码的高度简化版本。我在实际代码中尝试做的是检查某个字段的值，如果它符合某些标准，我希望它做一些事情。但是，我似乎看不到输入的新值。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:15:01.377

在标准控制器上调用 save() 不会在详细信息部分提交内联编辑。我刚刚仅使用标准控制器重现了该问题，因此您覆盖它的方式不是问题。

我*认为这样*做的原因是 apex:detail 本身就从数据库中获取了一条记录，而不是使用对标准控制器中的记录的引用。

内联编辑应该为您提供自己的保存按钮，我认为您最好的选择是尝试将其合并到您的设计中。

# ios - 旋转 ipad 屏幕时同时调用滚动功能

> ID：10539831
> 
> 赞同：2
> 
> 时间：2012-05-10T18:09:19.240
> 
> 标签：ios, ipad, cocoa-touch, uiscrollview

我正在创建一个 8 页的 UIscroll 视图。每个页面都是另一个视图控制器类，具有添加到此滚动视图的一些功能。

在加载应用程序时，当我将屏幕从一页滚动到另一页时，该应用程序运行良好。但是当我将 ipad 旋转到不同的界面方向时，会调用 UIScrollView 委托方法 - ScrollViewDidScroll，并且当前屏幕（页面）会滚动到上一个屏幕。调试使我认为滚动功能与设备旋转同时调用。

如何停止/防止在旋转时调用“ScrollViewDidScroll”委托方法，以便只执行旋转功能（即屏幕不应移动到前一个）？

我尝试过提供的不同解决方案，但帮助不大

我对 xcode 开发相当陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T15:46:23.720

不用`scrollViewDidScroll`设置当前页面的方法，可以使用`scrollViewDidEndDecelerating`轮换时不调用的方法。

有了这个，你只需要`contentOffset`在旋转之后根据当前页面进行设置。

# powershell - IIS 7.5 应用程序池/IIS 管理器 GUI 列：应用程序

> ID：10539833
> 
> 赞同：4
> 
> 时间：2012-05-10T18:09:28.320
> 
> 标签：powershell, iis-7.5, powershell-2.0, application-pool

在 IIS 7.5 管理器 > 应用程序池中查看时，最后一列列出了“应用程序”。此列显示与此 appPool 关联的应用程序池/网站的数量。

我想弄清楚如何使用 Powershell 查询此列/信息。这里的最终目标是拥有一个我可以运行的脚本，它会告诉我是否有任何应用程序池被用于超过 1 个网站或应用程序。

运行时，我无法找到如何查询此信息：

```
get-itemproperty IIS:\AppPools\(AppPoolName) | format-list * 
```

我没有看到这个属性。我不确定此列是否是一个属性，如果不是，是否有最好的方法来检查 AppPools 是否用于超过 1 个网站/应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T08:31:43.253

Applications 属性在格式文件中定义，其代码位于 iisprovider.format.ps1xml 文件中（在 webadmin 模块文件夹中）。

```
 <TableColumnItem>
          <ScriptBlock>
            $pn = $_.Name
            $sites = get-webconfigurationproperty "/system.applicationHost/sites/site/application[@applicationPool=`'$pn`'and @path='/']/parent::*" machine/webroot/apphost -name name
            $apps = get-webconfigurationproperty "/system.applicationHost/sites/site/application[@applicationPool=`'$pn`'and @path!='/']" machine/webroot/apphost -name path
            $arr = @()
            if ($sites -ne $null) {$arr += $sites}
            if ($apps -ne $null) {$arr += $apps}
            if ($arr.Length -gt 0) {
              $out = ""
              foreach ($s in $arr) {$out += $s.Value + "`n"}
              $out.Substring(0, $out.Length - 1)
            }
          </ScriptBlock>
        </TableColumnItem> 
```

您可以将代码取出并在格式文件之外使用它，只需将 $pn 分配给您要查询的应用程序池名称即可。这是代码的简化版本：

```
$pn = 'pool1'
$sites = get-webconfigurationproperty "/system.applicationHost/sites/site/application[@applicationPool='$pn' and @path='/']/parent::*" machine/webroot/apphost -name name
$apps = get-webconfigurationproperty "/system.applicationHost/sites/site/application[@applicationPool='$pn' and @path!='/']" machine/webroot/apphost -name path
$sites,$apps | foreach {$_.value} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:18:58.123

我和这个一起去了：

```
Import-Module WebAdministration

function Get-WebAppPoolApplications($webAppPoolName) {
    $result = @()

    $webAppPool = Get-Item ( Join-Path 'IIS:\AppPools' $webAppPoolName )
    if ( $webAppPool -ne $null ) {
        $webSites = Get-ChildItem 'IIS:\Sites'
        $webSites | % {
            $webApplications = Get-ChildItem ( Join-Path 'IIS:\Sites' $_.Name ) |
                where { $_.NodeType -eq 'application' }

            $result += $webApplications |
                where { $_.applicationPool -eq $webAppPoolName }
        }
    }

    $result
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T17:58:10.117

希望我能早点看到你的帖子，这就是我最终想出的：

```
$SiteApps = get-item IIS:\Sites* $arraySize = ($SiteApps.count -1) 
$i = 0 
$t = 0 
for ($i=0; $i -le $arraySize; $i ++) # start at the beg of the array
{ 
for ($t=($i+1); $t -le $arraySize; $t++) 
{
if ($siteApps[$i].applicationpool -eq $siteApps[$t].applicationpool) 
{
$web1 = $siteApps[$i].name 
$webappPool = $siteApps[$i].applicationpool 
$web2 = $siteApps[$t].name $answer = $answer + "The website "$web1" is sharing the AppPool "webAppPool" with website "$web2". " 
}
}
} 
```

# scala - 使用 Akka 将 Lucene 服务与网站分离

> ID：10539834
> 
> 赞同：2
> 
> 时间：2012-05-10T18:09:28.710
> 
> 标签：scala, lucene, akka

我正在开发一个带有 Lucene 后端的网站。Lucene 直接连接到索引文件，使得从索引机器以外的机器开发网站变得困难。传统数据库有一个运行的服务器来提供原始数据和应用程序之间的中介。

我想在 Lucene 和我的 Web 应用程序之间创建这样一个中介。乍一看，Akka 似乎是正确的工具，我想我会使用 Akka 期货或打字演员来执行调用。但是，Akka Typed Actors 页面警告说：

“更多背景知识：TypedActor 很容易被滥用为 RPC，这是众所周知的泄漏抽象。因此，当我们谈论使高度可扩展的并发软件更易于编写时，TypedActor 并不是我们首先想到的正确。他们有自己的利基，谨慎使用它们。

我认为关键在于 RPC 促进了中心化，但我的计划是好的还是滥用 Akka？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T18:26:04.743

为什么不使用solr？它提供了管理 lucene 索引的应用程序（因为它基本上是 lucene，顶部有一个应用程序来与数据交互。它比处理参与者更容易，它应该提供你需要的一切。

# ms-access - 访问：在 VBA 中对记录集使用查询

> ID：10539836
> 
> 赞同：6
> 
> 时间：2012-05-10T18:09:35.107
> 
> 标签：ms-access, vba

我已经习惯了以下格式的记录集：

```
Dim rs As DAO.Recordset
Dim strSQL As String

strSQL = "Select field1, field2 from myTable where field1 > 30"

Set rs = CurrentDb.OpenRecordset(strSQL)

'... Do wahtever using rs. 
```

是否可以使用已经创建的查询而不是文本并为其提供 where 子句？

这是一个指向 SQL Server 2008 数据库的链接表。我喜欢在 Access 中保存简单的查询。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-10T18:21:23.243

你可以

*   使用具有参数的查询并指定参数的值，前提是查询使用参数。

    ```
    Dim dbs As DAO.Database
    Dim qdf As DAO.QueryDef
    Dim prm As DAO.Parameter
    Dim rst As DAO.Recordset

    Set qdf = CurrentDb.QueryDefs("qry_SomeQueryWithParameters")

    qdf.Parameters("SomeParam").Value = "whatever"

    Set rst = qdf.OpenRecordset 
    ```

或者

*   将查询名称指定为命令并在记录集上使用[Filter 属性](http://msdn.microsoft.com/en-us/library/ff837300.aspx)

```
 Dim rs As DAO.Recordset
    Dim rsFiltered As DAO.Recordset

    Set rs = CurrentDb.OpenRecordset(qry_SomeQueryWithoutParameters)

    rs.Filter = "field1 > 30"
    set rsFiltered  = rs.OpenRecordset 

```

# javascript - 内容安全政策阻止对 *://www.google.com/recaptcha/api 的请求

> ID：10539837
> 
> 赞同：2
> 
> 时间：2012-05-10T18:09:36.043
> 
> 标签：javascript, google-chrome-extension, recaptcha, content-security-policy

[根据这个链接](http://code.google.com/p/chromium/issues/detail?id=107538)，它似乎是内联脚本，例如用于在页面中插入 recaptcha 对象，通过

```
<script type="text/javascript"
     src="http://www.google.com/recaptcha/api/challenge?k=your_public_key">
</script>
<noscript>
<iframe src="http://www.google.com/recaptcha/api/noscript?k=your_public_key"
     height="300" width="500" frameborder="0"></iframe><br>
<textarea name="recaptcha_challenge_field" rows="3" cols="40">
</textarea>
<input type="hidden" name="recaptcha_response_field"
     value="manual_challenge">
</noscript> 
```

或通过

```
 <script type="text/javascript" src="http://www.google.com/recaptcha/api/js/recaptcha_ajax.js"></script> 
```

和

```
Recaptcha.create("your_public_key",
"element_id",
{
  theme: "red",
  callback: Recaptcha.focus_response_field
} 
```

);

[尽管我的 manifest.json 显然允许像http://www.google.com/recaptcha/api/js/recaptcha_ajax.js](http://www.google.com/recaptcha/api/js/recaptcha_ajax.js)这样的网址，但我总是对内容安全政策有所抱怨

我是否遗漏了一些非常明显的东西，使整个问题变得疯狂？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T16:51:54.287

我只花了两个小时来解决这个问题。对我来说，我也认为对于这个例子，问题在于`src`属性；也就是说，在`http:`. 更改引用如下：

```
<script type="text/javascript" 
     src="https://www.google.com/recaptcha/api/challenge?k=your_public_key">
              ^  v
<iframe src="https://www.google.com/recaptcha/api/noscript?k=
     height="300" width="500" frameborder="0"></iframe> 
```

解决了这个问题。基本上，您试图通过不安全的连接访问 google api，并且某些浏览器（例如 Chrome）默认情况下不会呈现不安全的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T19:49:07.737

`http`在 Chrome 扩展程序中，不能通过 CSP将非安全项列入白名单。
[该文档](http://code.google.com/chrome/extensions/trunk/contentSecurityPolicy.html#H2-3)指出：

> ## 放宽默认策略
> 
> (...) 另一方面，如果您需要一些外部 JavaScript 或对象资源，您可以通过将应接受的脚本**的特定 HTTPS 来源列入白名单，在有限程度上放宽政策。****将不安全的 HTTP 资源列入白名单将不起作用。** 这是有意的，因为我们希望确保加载了扩展的提升权限的可执行资源正是您期望的资源，并且没有被活跃的网络攻击者替换。**由于中间人攻击在 HTTP 上是微不足道且无法检测到的，因此仅接受 HTTPS 来源。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-12T16:13:57.857

您应该将所有资源调用协议设为相对 url。基本上删除任何 http: 或 https: 并使用 //

更多信息在这里 [http://www.paulirish.com/2010/the-protocol-relative-url/](http://www.paulirish.com/2010/the-protocol-relative-url/)

在 <script src="http://..."> 中用 // 替换http [:// 是否有效？](https://stackoverflow.com/questions/550038/is-it-valid-to-replace-http-with-in-a-script-src-http)

# xcode - 归档部署时如何在开发和实时配置之间轻松切换？

> ID：10539844
> 
> 赞同：0
> 
> 时间：2012-05-10T18:10:02.277
> 
> 标签：xcode, deployment, configuration

为 iPad 应用程序进行多种配置（开发/测试/实时/等）并在存档部署时轻松切换它们的最佳方式是什么？

一个常见的示例是从 Web 服务 URL 的测试版本[https://testing.mycompany.com/api](https://testing.mycompany.com/api)切换到实时版本[https://customer.server.com/api](https://customer.server.com/api)。

我认为在 XCode 中开发时永远不会使用实时配置是一个安全的假设，但很有可能一些 iPad 部署想要使用测试配置，而其他人显然有实时配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:13:30.500

您可以根据自己的需要使用不同的方案。在那里，您可以定义要制作的构建类型。

# asp.net-mvc - 如何为我的 CRUD 设置权限？

> ID：10539847
> 
> 赞同：0
> 
> 时间：2012-05-10T18:10:14.650
> 
> 标签：asp.net-mvc, crud, user-permissions

我正在学习 ASP.NET MVC3，我刚刚为我的模型/上下文创建了一个控制器。但是，任何人都可以导航到这些页面并使用它们。如何设置这些页面的权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:15:10.127

[AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx)将是您的第一道防线。您可以根据组成员身份或用户名授予访问权限。工作起来很像代码访问安全/主体权限属性，但并不难使用。

例子：

```
// Allow Everybody in
public ActionResult Index ()
{}

// Allow only Editors/Admin to post edits back to controller.
[HttpPost]
[Authorize(Roles="Admin,Editor"]
public ActionResult Edit(EditViewModel vm)
{} 
```

您可以在类或方法级别使用它们，因此您可以拥有一个仅允许授权用户使用您的应用程序的某些控制器的基本控制器。

如果您发现自己一遍又一遍地使用相同的组或用户，我会创建一个预定义了这些组的 AuthorizeAttribute 的覆盖，这样您就不会拼错或忘记它们。这也会让你的代码变干，这总是很棒的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:14:53.887

您可以使用 Authorize 属性来限制权限，通常这是从基类继承的。这是最常见和推荐的。

您可以使用 ActionFilter 属性并覆盖 OnActionExecuting 并在其中设置自定义逻辑。可能，但不推荐。

还有很多其他方法，但前两种是 MVC 的主要方法。

# jquery - youtube播放器在暂停缓冲后重新开始时是否有js回调？

> ID：10539850
> 
> 赞同：5
> 
> 时间：2012-05-10T18:10:24.817
> 
> 标签：jquery, youtube, youtube-api, youtube-javascript-api

我试图弄清楚当播放器**不再**缓冲时是否有回调。

我现在正在使用 `onPlayerBuffering: function(){};`播放器开始缓冲的时间，但我似乎找不到任何相反的东西。

一旦播放器缓冲，似乎就`onPlayerPlaying: function(){};`不起作用了。

有谁知道这是否可能？

另外，我正在使用 [Nirvana Tikku 的 jquery-youtube 插件](http://www.tikku.com/jquery-youtube-tubeplayer-plugin)，回调列表在[这里](http://www.tikku.com/jquery-youtube-tubeplayer-plugin#tubeplayer_tutorial_3)和[这里](https://developers.google.com/youtube/js_api_reference#Overview)......这些都不起作用吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:58:15.147

我会设置一个函数来定期检查缓冲是否继续：

```
// set interval to something reasonable, 5 seconds?
var buffercheck = setInterval(bufferstatus, 5000);
function bufferstatus() {
  onPlayerBuffering: function(){ /* your code for a callback here */ },
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T05:51:12.880

查看 YouTube 播放器 API [https://developers.google.com/youtube/js_api_reference#Events](https://developers.google.com/youtube/js_api_reference#Events)

您只需要收听`onStateChange`事件：

这是一个工作演示：http: [//jsbin.com/izolo/edit](http://jsbin.com/izolo/edit)

示例代码：

```
function handlePlayerStateChange (state) {
  switch (state) {
    case 1:
    case 3:
      // Video has begun playing/buffering
      videoContainer.cycle('pause');
      break;
    case 2:
    case 0:
      // Video has been paused/ended
      videoContainer.cycle('resume');
      break;
  }
}

function onYouTubePlayerReady(id){
  var player = $('#' + id)[0];
  if (player.addEventListener) {
    player.addEventListener('onStateChange', 'handlePlayerStateChange');
  }
  else {
    player.attachEvent('onStateChange', 'handlePlayerStateChange');
  }
} 
```

# refresh - UITableView 没有重新加载

> ID：10539851
> 
> 赞同：2
> 
> 时间：2012-05-10T18:10:27.610
> 
> 标签：refresh, uitableview, reload, restkit

情况如下：

我有一个“UITableViewController”，它使用 RestKits“RKFetchedResultsTableController”加载对象。单击一个单元格后，我切换到一个详细的 UITableViewController，它也由“RKFetchedResultsTableController”驱动，它为我提供了所选对象的相应答案文本。

现在的问题是，如果我回到第一个“UITableViewController”并在表中选择另一个对象，则来自先前选择的对象的旧答案文本位于详细信息表中。如果我使用“pullToRefresh”函数，表格会被刷新并加载正确的答案。

为什么即使我在 viewWillAppear 方法中告诉 [tableController loadTable]，前一个对象的旧答案仍在 tableView 中，而不是新选定对象的正确答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:22:00.970

好的 想通了！！！一些挖掘显示我在映射提供程序之前加载了我的 UITableviewcontroller。

修复方法是，在 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 中采用 [self initialiserestkit] 方法

并将其放在此方法中的任何代码之前（即，将 [self initialiserestkit] 设为 didfinishlaunchingwithoptions 方法的第一行。

问题解决了。现在表格视图在映射之后加载，所以一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T15:57:55.210

应用委托：

@

```
interface AppDelegate ()
@property (nonatomic, strong, readwrite) RKObjectManager *objectManager;
@property (nonatomic, strong, readwrite) RKManagedObjectStore *objectStore;
@end;

@implementation AppDelegate

@synthesize window = _window, isAuthenticated;
@synthesize objectManager;
@synthesize objectStore;

- (void)initializeRestKit
{
    //self.objectManager = [RKObjectManager managerWithBaseURLString:@"http://falling-ocean-1302.herokuapp.com"];
    self.objectManager = [RKObjectManager managerWithBaseURLString:@"http://falling-ocean-1302.herokuapp.com"];
    self.objectManager.serializationMIMEType = RKMIMETypeJSON;
    self.objectManager.acceptMIMEType = RKMIMETypeJSON; 
    self.objectStore = [RKManagedObjectStore objectStoreWithStoreFilename:@"MMmtvzme.sqlite"];
    self.objectManager.objectStore = self.objectStore;
    self.objectManager.mappingProvider = [MMMappingProvider mappingProviderWithObjectStore:self.objectStore];
    self.objectManager.client.cachePolicy = RKRequestCachePolicyNone;

    RKLogConfigureByName("RestKit", RKLogLevelTrace); 
    RKLogConfigureByName("RestKit/Network", RKLogLevelTrace); 
    RKLogConfigureByName("RestKit/ObjectMapping", RKLogLevelTrace); 
    RKLogConfigureByName("RestKit/Network/Queue", RKLogLevelTrace);

    // Enable automatic network activity indicator management
    objectManager.client.requestQueue.showsNetworkActivityIndicatorWhenBusy = YES;

    [objectManager.router routeClass:[MMRequest class] toResourcePath:@"/requests" forMethod:RKRequestMethodPOST];
    [objectManager.router routeClass:[MMRequest class] toResourcePath:@"/requests" forMethod:RKRequestMethodDELETE];

    [objectManager.router routeClass:[MMAnswer class] toResourcePath:@"/requests/:request_id/answers" forMethod:RKRequestMethodPOST];
} 
```

好的，这是第一个 UITableViewController 的代码

```
 @interface MMMyRequestList ()
    @property (nonatomic, strong) RKFetchedResultsTableController *tableController;
    @end

    @implementation MMMyRequestList

    @synthesize tableController;

- (void)viewDidLoad
    {
        [super viewDidLoad];

        [self configureRKTableController];
        [self configureCellMapping];
        [self useCustomNib];

    }

    - (void)configureRKTableController{
        self.tableController = [[RKObjectManager sharedManager] fetchedResultsTableControllerForTableViewController:self];
        self.tableController.autoRefreshFromNetwork = YES;
        self.tableController.pullToRefreshEnabled = YES;
        self.tableController.resourcePath = @"/requests";
        self.tableController.variableHeightRows = YES;
        NSSortDescriptor *descriptor = [NSSortDescriptor sortDescriptorWithKey:@"request_id" ascending:NO];
        self.tableController.sortDescriptors = [NSArray arrayWithObject:descriptor];
        tableController.canEditRows = YES;      
    }

    - (void)configureCellMapping{
        RKTableViewCellMapping *cellMapping = [RKTableViewCellMapping cellMapping];
        cellMapping.cellClassName = @"MMRequestCell";
        cellMapping.reuseIdentifier = @"MMRequest";
        cellMapping.rowHeight = 100.0;
        [cellMapping mapKeyPath:@"title" toAttribute:@"requestLabel.text"];
        [cellMapping mapKeyPath:@"user.first_name" toAttribute:@"userLabel.text"];

        cellMapping.onSelectCellForObjectAtIndexPath = ^(UITableViewCell *cell, id object, NSIndexPath* indexPath) 
        {
            MMMyRequestListAnswer * uic = [self.storyboard instantiateViewControllerWithIdentifier:@"MMMyRequestListAnswer"];
            MMRequest *request = [self.tableController objectForRowAtIndexPath:indexPath];
            if ([uic respondsToSelector:@selector(setRequest:)]) {
                [uic setRequest:request];
            }
            [self.navigationController pushViewController:uic animated:YES];
        };

        [tableController mapObjectsWithClass:[MMRequest class] toTableCellsWithMapping:cellMapping];
    }

    - (void)useCustomNib{
        [self.tableView registerNib:[UINib nibWithNibName:@"MMRequestCell" bundle:nil] forCellReuseIdentifier:@"MMRequest"];
    }

    - (void)objectLoader:(RKObjectLoader*)objectLoader didFailWithError:(NSError*)error {
        UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Error" 
                                                        message:[error localizedDescription] 
                                                       delegate:nil 
                                              cancelButtonTitle:@"OK" otherButtonTitles:nil];

        [alert show];
        NSLog(@"Hit error: %@", error);
    }

    - (void)viewWillAppear:(BOOL)animated {
        [super viewWillAppear:animated];

        /**
         Load the table view!
         */
        [tableController loadTable];

    } 
```

单击一个单元格后，Detail UIViewController 开始起作用

```
 interface MMMyRequestListAnswer ()
    @property (nonatomic, strong) RKFetchedResultsTableController *tableController;

    @end

    @implementation MMMyRequestListAnswer
    @synthesize tableHeaderView, requestTextLabel;
    @synthesize request;
    @synthesize tableController;

 - (void)viewDidLoad
    {
        [super viewDidLoad];

        [self configureRKTableController];
        [self configureCellMapping];
        [self useCustomNib];
    }

    - (void)configureRKTableController{
        self.tableController = [[RKObjectManager sharedManager] fetchedResultsTableControllerForTableViewController:self];
        self.tableController.autoRefreshFromNetwork = YES;
        self.tableController.pullToRefreshEnabled = YES;
        self.tableController.resourcePath = [NSString stringWithFormat:@"/requests/%i/answers", [self.request.request_id intValue]];
        self.tableController.variableHeightRows = YES;
        NSSortDescriptor *descriptor = [NSSortDescriptor sortDescriptorWithKey:@"answer_id" ascending:NO];
        self.tableController.sortDescriptors = [NSArray arrayWithObject:descriptor];
    }

    - (void)configureCellMapping{
        RKTableViewCellMapping *cellMapping = [RKTableViewCellMapping cellMapping];
        cellMapping.cellClassName = @"MMRequestAnswerCell";
        cellMapping.reuseIdentifier = @"MMAnswer";
        cellMapping.rowHeight = 80.0;
        [cellMapping mapKeyPath:@"text" toAttribute:@"answerLabel.text"];
        [cellMapping mapKeyPath:@"user.first_name" toAttribute:@"userLabel.text"];
        [tableController mapObjectsWithClass:[MMAnswer class] toTableCellsWithMapping:cellMapping];
    }

    - (void)useCustomNib{
        [self.tableView registerNib:[UINib nibWithNibName:@"MMRequestAnswerCell" bundle:nil] forCellReuseIdentifier:@"MMAnswer"];
    }

    - (void)viewWillAppear:(BOOL)animated {
        [super viewWillAppear:animated];

        /**
         Load the table view!
         */
        [tableController loadTable];  

    } 
```

对象映射在此类中处理：

```
@implementation MMMappingProvider

@synthesize objectStore;

+ (id)mappingProviderWithObjectStore:(RKManagedObjectStore *)objectStore {
    return [[self alloc] initWithObjectStore:objectStore];    
}

- (id)initWithObjectStore:(RKManagedObjectStore *)theObjectStore {
    self = [super init];
    if (self) {
        self.objectStore = theObjectStore;

        [self setObjectMapping:[self requestObjectMapping] forResourcePathPattern:@"/requests" withFetchRequestBlock:^NSFetchRequest *(NSString *resourcePath) {
            NSFetchRequest *fetchRequest = [MMRequest fetchRequest];
            return fetchRequest;
        }];

        [self setObjectMapping:[self answerObjectMapping] forResourcePathPattern:@"/requests/:request_id/answers" withFetchRequestBlock:^NSFetchRequest *(NSString *resourcePath) {
            NSFetchRequest *fetchRequest = [MMAnswer fetchRequest];
            fetchRequest.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"answer_id" ascending:YES]];
            return fetchRequest;
        }];

        [self setSerializationMapping:[self.requestObjectMapping inverseMapping] forClass:[MMRequest class]];
        [self setSerializationMapping:[self.answerObjectMapping inverseMapping] forClass:[MMAnswer class]];
        [self setSerializationMapping:[self.userObjectMapping inverseMapping] forClass:[MMUser class]];

}

    return self;
}

- (RKManagedObjectMapping *)userObjectMapping {
    RKManagedObjectMapping *mapping =  [RKManagedObjectMapping mappingForEntityWithName:@"MMUser" inManagedObjectStore:self.objectStore];
    mapping.primaryKeyAttribute = @"user_id";

    [mapping mapAttributes:@"first_name", nil];
    [mapping mapKeyPathsToAttributes:
     @"id", @"user_id",
     nil];

    return mapping;
}

- (RKManagedObjectMapping *)answerObjectMapping {
    RKManagedObjectMapping *mapping = [RKManagedObjectMapping mappingForEntityWithName:@"MMAnswer" inManagedObjectStore:self.objectStore];
    mapping.primaryKeyAttribute = @"answer_id";

    [mapping mapAttributes:@"text",@"request_id",@"user_id", nil];
    [mapping mapKeyPathsToAttributes:
     @"id", @"answer_id",
     nil];

    [mapping mapKeyPath:@"user" toRelationship:@"user" withMapping:[self userObjectMapping]];
    [mapping mapKeyPath:@"request" toRelationship:@"request" withMapping:[self requestObjectMapping]];

    return mapping;
}

- (RKManagedObjectMapping *)requestObjectMapping {
    RKManagedObjectMapping *mapping = [RKManagedObjectMapping mappingForEntityWithName:@"MMRequest" inManagedObjectStore:self.objectStore];

    mapping.primaryKeyAttribute = @"request_id";

    [mapping mapAttributes:@"title",@"user_id", nil];
    [mapping mapKeyPathsToAttributes:
     @"id", @"request_id",
     nil];

    [mapping mapKeyPath:@"user" toRelationship:@"user" withMapping:[self userObjectMapping]];

    return mapping;    
} 
```

# jquery - jQuery幻灯片插件

> ID：10539856
> 
> 赞同：0
> 
> 时间：2012-05-10T18:10:43.713
> 
> 标签：jquery, jquery-plugins

我正在寻找一种特殊的幻灯片插件，它使用 jQuery 库。

请看这里：

[http://www.pacificcoastnews.com/](http://www.pacificcoastnews.com/)

这正是我想要的，4 个单独的褪色图像，固定大小，没有控件。我一直在寻找一段时间，并没有找到类似的东西。我想我可以用 4 个单独的幻灯片来制作这个，但即便如此，我也找不到一个简单的垂直幻灯片，没有控件和东西，这对我来说足够简单，我可以使用 4 个来制作这个。

有人知道上面那个插件吗？或者有人知道我可以使用一个好的插件，所以我可以简单地一起使用 4 个实例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:23:18.710

# haskell - 使用 GHC (+ LLVM) 将 GMP 静态链接到 Haskell 应用程序

> ID：10539857
> 
> 赞同：16
> 
> 时间：2012-05-10T18:10:44.277
> 
> 标签：haskell, ghc, static-linking, cabal

1.  我怎样才能放弃动态依赖`libgmp`并从此开始：

    ```
    linux-vdso.so.1 =>  (0x00007fffdccb1000)
    libgmp.so.10 => /usr/lib/x86_64-linux-gnu/libgmp.so.10 (0x00007fb01afc1000)
    libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007fb01acc7000)
    librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007fb01aabe000)
    libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007fb01a8ba000)
    libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007fb01a69d000)
    libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007fb01a2df000)
    /lib64/ld-linux-x86-64.so.2 (0x00007fb01b249000) 
    ```

    对此（当前需要）：

    ```
    linux-vdso.so.1 =>  (0x00007fffdccb1000)
    libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007fb01acc7000)
    librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007fb01aabe000)
    libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007fb01a8ba000)
    libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007fb01a69d000)
    libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007fb01a2df000)
    /lib64/ld-linux-x86-64.so.2 (0x00007fb01b249000) 
    ```

    以一种干净且可移植的方式，只适用于所有 GNU/Linux 发行版（而不是搞乱 BSD（包括 OS X））？

2.  在分发针对多个 GNU/Linux 发行版的单个 Haskell 二进制文件时，您是否看到任何其他可能导致上述当前所需列表中出现问题的依赖项？

* * *

**笔记：**

*   我的应用程序是 GPLv3，因此不会出现有关 GMP 的许可证违规问题
*   指定路径`libgmp.a`不起作用（[如何选择性地将某些系统库静态链接到 Haskell 程序二进制文件中？](https://stackoverflow.com/questions/7832112/how-to-selectively-link-certain-system-libraries-statically-into-haskell-program)），`libgmp`仍然在`ldd`输出中列出。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-11T10:15:12.643

如果您传递`-optl-static -optl-pthread`给 GHC，它将静态链接所有运行时库依赖项，包括 GMP。在你的 Cabal 文件中设置`ld-options: -static -pthread`应该完成同样的事情。

这意味着您也将在 glibc 中进行静态链接，但这可能不会成为问题，尽管它可能会大大增加二进制大小。[使用像musl](http://www.etalabs.net/musl/)或[uClibc](http://www.uclibc.org/)这样的替代 libc应该有助于抵消这种情况，如果这对您来说是个问题。

# solr - Url 参数和具体语法

> ID：10539858
> 
> 赞同：0
> 
> 时间：2012-05-10T18:10:48.367
> 
> 标签：solr, extjs4

我正在尝试使用 URL 通过 URL 传递参数：`setParams({id:id,model:mod})`，并在浏览器的地址栏中看到`localhost/MVC/query?id=1&model=member`。这是成功的。

但我想传递 url 栏中的参数，如下所示：`localhost/MVC/query?fq=model: member+model:new_member`. 我正在尝试集成“Solr”搜索服务器，这是支持过滤查询的语法。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:52:32.113

看看`Button#getHref()`：

```
getHref: function() {
    var me = this,
        params = Ext.apply({}, me.baseParams);
    params = Ext.apply(params, me.params);
    return me.href ? Ext.urlAppend(me.href, Ext.Object.toQueryString(params)) : false;
}, 
```

和`toQueryString()`：

```
toQueryString: function(object, recursive) {
    ...
    for (j = 0, ln = paramObjects.length; j < ln; j++) {
        ...
        params.push(encodeURIComponent(paramObject.name) + '=' + encodeURIComponent(String(value)));
    }
    return params.join('&');
}, 
```

所以我认为你应该为 编写一个新版本`toQueryString`，假设它是`toSolrQueryString`使用`:`而不是 = 和`+`而不是`&`. 最后，您在 Button 中覆盖`getHref()`to use`toSolrQueryString`函数。请记住，回报应该是：

```
return me.href ? Ext.urlAppend(me.href, 'fq=' + toSolrQueryString(params)) : false; 
```

# jquery - jquery hover() 和 click() 在将 TR 移动到另一个表后不起作用

> ID：10539859
> 
> 赞同：1
> 
> 时间：2012-05-10T18:10:49.943
> 
> 标签：jquery

我正在尝试使用 jQuery 的 hover() 来更改鼠标悬停的任何 TR 的背景颜色，并且我还使用 click() 在表格之间移动 TR。但是一旦我将 TR 移动到另一个表，hover() 和 click() 就不起作用了。

有人能告诉我为什么吗？我该如何解决这个问题？这是我的代码：http: [//jsfiddle.net/MJNGL/](http://jsfiddle.net/MJNGL/)

```
$(document).ready(function() {
    $("table tr").hover(
        function() {
            $(this).css('background', 'yellow');
        },
        function () {
            $(this).css('background', '');
        }
    )

    $("table tr").click(function () {
        var id = $(this).children().attr("id");
        $(".cityItem1").each(function m(x,e) {
            if ($(e).children().attr("id") == id) {
                $(e).remove();
                $("#tblCity2").append('<tr class="tableRow"><td width="750" id="' + $(e).children().attr('id') + '">' + $(e).children().html() + '</td></tr>');
            }
        });
    });
});
​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T18:12:40.267

尝试更改悬停功能，如下所示，

[**演示**](http://jsfiddle.net/skram/MJNGL/1/)

```
$("table").on('mouseenter', 'tr', function() {
        $(this).css('background', 'yellow');
}).on('mouseleave', 'tr', function () {
        $(this).css('background', '');
}); 
```

**为什么你的代码不起作用？**

事件处理程序绑定到 DOM 中可用的元素。在您的情况下， onPageLoad - 返回DOM 中当前存在的`$('table tr')`2 个匹配s，因此and事件仅绑定到这两个s。`tr``hover``click``tr`

稍后，`click`您`tr`从表中删除该行并将其附加到表 2。此时您必须再次将处理程序重新绑定到新添加的行。但每次添加行时绑定处理程序是一个痛苦的过程。

所以我们有另一种有趣的方法，称为事件委托。

**直接和委托事件**

大多数浏览器事件从文档中最深、最里面的元素（事件目标）开始冒泡或传播，一直到正文和文档元素。

事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。或者，使用委托事件来附加事件处理程序，如下所述。

委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件。通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。例如，该元素可以是模型-视图-控制器设计中视图的容器元素，或者如果事件处理程序想要监视文档中的所有冒泡事件，则可以是文档。在加载任何其他 HTML 之前，文档元素在文档的头部是可用的，因此在此处附加事件是安全的，而无需等待文档准备好。

~ 来自 jQuery 文档[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:21:21.450

正如@Vega 所指出的，`on()`用于 jQuery 1.7 的版本。如果您使用的是以前的版本，请使用`delegate()`.

这将是 jQuery < 1.7 的代码：

```
$(document).ready(function() {
    $("table").delegate('tr', 'hover',
        function() {
            $(this).css('background', 'yellow');
        });

    $("table").delegate('tr', 'mouseout',
        function() {
            $(this).css('background', '');
        }
    );

    $("table tr").click(function () {
        var id = $(this).children().attr("id");
        $(".cityItem1").each(function m(x,e) {
            if ($(e).children().attr("id") == id) {
                $(e).remove();
                $("#tblCity2").append('<tr class="tableRow"><td width="750" id="' + $(e).children().attr('id') + '">' + $(e).children().html() + '</td></tr>');
            }
        });
    });
}); 
```

**[演示](http://jsfiddle.net/RkFGz/)**

对于 jQuery >= 1.7 使用 Vega 的代码。

# ios - 使用 Xcode 4.3.2 和情节提要对滚动视图中的项目进行分组

> ID：10539866
> 
> 赞同：0
> 
> 时间：2012-05-10T18:11:46.750
> 
> 标签：ios, xcode, scrollview

我在视图中的滚动视图内的图像视图中有一个大图像。

```
View Controller
    View
        Scroll View
            Image View - 1750x3000image
            Button - button1
            Button - button2
            Button - button3
            Button - button4 
```

当我放大和缩小时，该按钮不会与较大的图像一起跟踪。滚动，按钮确实与图像一起跟踪。

我想要完成的是让较大图像的区域成为按钮，或者让按钮悬停在这些区域上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:32:09.073

根据我的猜测，您希望您的图像像一个按钮。只需将具有清晰颜色背景的 UIButton 自定义类型（与图像视图相同的框架）添加到图像视图顶部的滚动视图。

编辑：尝试将按钮添加为图像视图的子视图，而不是将其直接添加到 ScrollView？

# javascript - 无法让文档准备好工作

> ID：10539868
> 
> 赞同：1
> 
> 时间：2012-05-10T18:11:53.670
> 
> 标签：javascript, jquery, particle-system, particles

我无法让 JQuery 粒子发射器插件工作。我之前遇到过这个问题，这是因为 jquery 库和对particle.js 文件的脚本调用被提示同时加载，并且发射器文件显然首先加载。然后它不会有效加载，因为必须先加载 Jq lib 才能处理以下代码第 3 行的“$”jquery 调用：

```
<script type="text/javascript" src="js/particle.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){   
            var emitter = new particle_emitter({ size: 16, velocity: 50, decay:     2000, rate: 20 });
        emitter.start();
    });
    </script> 
```

你可以给我任何建议为什么 $(document).ready(function(){ ... }); 在 Jq 库加载之前无法延迟粒子发射器调用的加载将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T18:23:30.107

首先包含 jquery.js 文件。在粒子.js 之前

```
<script type="text/javascript" src="js/jquery.js"></script> 
```

如果您已经完成，请尝试编写 jQuery(document).ready 而不是 $(document).ready

喜欢

```
<script type="text/javascript" src="js/particle.js"></script>
    <script type="text/javascript">
        jQuery(document).ready(function(){   
            var emitter = new particle_emitter({ size: 16, velocity: 50, decay:     2000, rate: 20 }).start();
    });
</script> 
```

注意：我已将 .start() 移至上线只是为了缩短代码。

# android - 相机“确定”按钮不起作用

> ID：10539870
> 
> 赞同：1
> 
> 时间：2012-05-10T18:12:06.693
> 
> 标签：android, android-camera, android-camera-intent

嘿伙计们，我刚刚添加了一项功能，让用户能够从我的应用程序中捕获图片，并且我正确设置了相机意图 [我至少相信如此]。我在“xml”文件中设置了一个按钮，并在“class/java”文件中相应地设置了意图和按钮。在测试应用程序时，该按钮可以工作并加载本机 android 4.0.4 相机，并且可以很好地拍照，但是当我单击“复选标记”时 [旧版本 Android 上的“确定”按钮] 它不会返回到应用程序。相机仍然保持所有功能，它不会冻结或任何东西。我仍然可以选择重拍，或者选择取消；只是“确定/复选标记”按钮不起作用。

* * *

```
public class XXXXXXXXXXX extends Activity 
{

    Button button;
    String path;
    boolean taken;

    static final String PHOTO_TAKEN = "photo_taken";

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.XXXXXXXX);

        button = ( Button ) findViewById( R.id.take_picture );
        button.setOnClickListener( new ButtonClickHandler() );
        path = Environment.getExternalStorageDirectory() + "/images/testing-cam.jpg";

    }

    public class ButtonClickHandler implements View.OnClickListener 
        {
            public void onClick( View view )
            {
                Log.i("Button", ".onClick()" );
                startCameraActivity();
            }
        }

        protected void startCameraActivity()
        {
            Log.i("Start", "CameraActivity()" );
            File file = new File( _path );
            Uri outputFileUri = Uri.fromFile( file );

            Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE );
            intent.putExtra( MediaStore.EXTRA_OUTPUT, outputFileUri );

            startActivityForResult( intent, 0 );
        }

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{   
    switch( resultCode )
    {
        case 0:
            break;

        case -1:
            onPhotoTaken();
            break;
    }
}

protected void onPhotoTaken()
{
    taken = true;

    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inSampleSize = 4;

    Bitmap bitmap = BitmapFactory.decodeFile( _path, options );

    image.setImageBitmap(bitmap);

    field.setVisibility( View.GONE );
} 
```

* * *

如果需要任何其他代码，我可以提供，但这是我在我的应用程序中使用的主要相机代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T18:24:50.460

你在 Mainfest 中使用过这个吗

```
 <uses-permission android:name="android.permission.CAMERA" />
 <uses-feature android:name="android.hardware.camera" />
 <uses-feature android:name="android.hardware.camera.autofocus" /> 
```

您也可以点击此链接。

[http://www.vogella.com/articles/AndroidCamera/article.html](http://www.vogella.com/articles/AndroidCamera/article.html)

[http://marakana.com/forums/android/examples/39.html](http://marakana.com/forums/android/examples/39.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-06T09:41:42.857

你忘了创建你写图像的目录。在创建文件对象之前添加此行。

```
File path = new File(Environment.getExternalStorageDirectory().getPath() + "/images/").
path.mkdirs(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T16:39:50.060

您好，您可以将我的完整代码用于您的解决方案。这是链接：- [Imp Link](https://stackoverflow.com/questions/13414463/launch-android-camera-intent-and-layout/13414940#13414940)。

# android - 自 API 11 及更高版本起已弃用菜单按钮和相关 API - 如何处理？

> ID：10539881
> 
> 赞同：1
> 
> 时间：2012-05-10T18:13:04.167
> 
> 标签：android, menu, deprecated

我从 SDK 文档中引用：

“从 Android 3.0（API 级别 11）开始，Android 驱动的设备不再需要提供专用的菜单按钮。随着这一变化，Android 应用程序应该摆脱对传统 6 项菜单面板的依赖，而是提供一个操作栏来呈现常见的用户操作。”

进一步：“如果您正在为 Android 2.3 或更低版本进行开发，用户可以通过按下菜单按钮来显示选项菜单面板。在 Android 3.0 和更高版本上，选项菜单中的项目由操作栏显示为 on -屏幕操作项和溢出选项。从 Android 3.0 开始，不推荐使用菜单按钮（某些设备没有），因此您应该迁移到使用操作栏来提供对操作和其他选项的访问。

因此，如果我理解正确，在具有菜单按钮的 Android 3.0 或更高版本的设备上，已弃用的代码仍然有效，而在 Android 3.0 或更高版本且没有菜单按钮的设备上，已弃用的代码将不起作用。

出现5个问题：

1.  这些兼容性问题可以通过Android兼容库处理吗？
2.  如果是，如何？
3.  如果没有，是否有人拥有 Android 3 及更高版本且没有菜单按钮的设备列表？
4.  目前这些设备的市场份额有多高？
5.  指定最大 SDK，将排除所有设备，无论它们是否有菜单按钮。有没有更好的方法来确保应用程序只安装在兼容的设备上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T18:24:52.597

> 这些兼容性问题可以通过Android兼容库处理吗？如果是，如何？

将您的目标 API 设置为 11 或更高版本（建议您将其设置为最新的可用版本：因此，请将您的目标 API 设置为 15）。然后在您的应用程序中启用一个 ActionBar。过去通过菜单键显示的内容现在显示在 ActionBar 的溢出菜单中，或者如果您将每个人的“showIfRoom”设置为 true，则显示为栏本身上的单个操作。

> 如果没有，是否有人拥有 Android 3 及更高版本且没有菜单按钮的设备列表？

尝试编写特殊情况是错误的方法。在带有菜单按钮的设备上，它将与菜单按钮一起使用。在那些没有菜单按钮的地方，会有溢出菜单。[Android 开发者博客](http://android-developers.blogspot.com/2012/01/say-goodbye-to-menu-button.html)上有一篇关于此的博文。

> 目前这些设备的市场份额有多高？

小而成长。

> 指定最大 SDK，将排除所有设备，无论它们是否有菜单按钮。有没有更好的方法来确保应用程序只安装在兼容的设备上？

是的：我描述的方法将处理这两种情况，并且它适用于所有设备:) 没有理由使用 maxSdk。

编辑：要解决评论中的问题：

> 那么，如果我的目标是 8，那么具有 11 的设备将无法正确处理菜单按钮？

如果您将目标设置为小于 11，则没有菜单键的设备将在其他软按钮旁边有一个“旧版”菜单按钮，如下所示： [http ://android-developers.blogspot.com/2012/01/say -goodbye-to-menu-button.html](http://android-developers.blogspot.com/2012/01/say-goodbye-to-menu-button.html)

> 另一方面，如果我将 target 设置为 11，如果我使用 features > 8，eclipse 不会警告我？

如果您将目标设置为 11 并将最小设置为 8，那么如果您使用 9 个以上的功能，Eclipse 将不会警告您——您需要为此测试您的应用程序。简单的方法：将你的目标 SDK 暂时移回 8，看看编译器在哪里对你大喊大叫，确保这些代码路径永远不会在无法处理它们的设备上受到影响。

> 它对 Google Play Market 上的分发有什么影响？

只有好的。如果您设置 Max SDK，随着时间的推移，您的应用程序将与越来越少的设备兼容。最低版本为 8（而不是完全放弃向后兼容性）意味着您的应用程序可以安装在 Froyo 和 Gingerbread 设备上，而不仅仅是 Honeycomb 及更高版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T18:21:03.127

> 这些兼容性问题可以通过Android兼容库处理吗？

不。

> 如果没有，是否有人拥有 Android 3 及更高版本且没有菜单按钮的设备列表？

几乎所有人。运行 Android 2.x 并升级到 Android 4.x 的设备将有一个专用的 MENU 按钮（例如，Nexus S）。为 Android 3.0+ 构建的新设备很少有专用的 MENU 按钮。

> 目前这些设备的市场份额有多高？

截至 5 月初， Android 3.0+ 占[访问 Google Play 商店的设备的 8.2% 。](http://developer.android.com/resources/dashboard/platform-versions.html)它们中的大多数将是缺少 MENU 按钮的设备。

> 有没有更好的方法来确保应用程序只安装在兼容的设备上？

兼容性问题的唯一原因是您是否依赖 MENU 按钮来执行除显示选项菜单之外的操作。只需重写该代码以不再依赖 MENU 按钮，兼容性问题就会消失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T18:25:32.870

您已弃用的代码将在没有菜单按钮的设备上运行。如果您的目标 SDK 低于 3.0，没有菜单按钮的设备将在屏幕底部显示一个软件菜单按钮。

这在 Galaxy Nexus 和其他具有持久软件按钮的设备上看起来不错，但在 HTC One X 等通常没有软件按钮栏的设备上很难看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T18:26:26.637

[他们在这里](http://developer.android.com/resources/samples/ActionBarCompat/index.html)有一个在旧设备上使用操作栏的示例。还可以根据 android 版本配置不同的布局和活动/方法，因此您可以在旧设备上使用普通菜单，在支持它的设备上使用操作栏。（请参阅[此处](http://developer.android.com/training/basics/supporting-devices/platforms.html)了解如何在运行时检查平台，以及[使用](http://developer.android.com/guide/topics/resources/providing-resources.html)基于平台的不同布局文件夹）

# php - 函数参数中的 gmdate() 给出解析错误

> ID：10539882
> 
> 赞同：2
> 
> 时间：2012-05-10T18:13:04.387
> 
> 标签：php

我正在使用带有 Fast-CGI 的 PHP 5.3.5。

当我尝试使用`gmdate()`设置参数的初始值时，出现以下错误：

> 解析错误：语法错误，第 3 行 MyClass.php 中出现意外的 '('，期待 ')'

这是我的代码（第 3 行是声明 myFunction 的行）：

```
function myFunction($myDate = gmdate('Y-m-d')) {
    // ...
} 
```

难道我做错了什么？这是一个错误吗？如果我在类函数中做同样的事情，也会发生这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T18:14:04.697

您不能将函数用作函数或方法参数的默认值。

```
function myFunction($myDate = '') {
    $myDate = (!empty($myDate)) ? $myDate :  gmdate('Y-m-d');
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:30:37.920

包括验证：

```
function myFunction($myDate = '')
{
    $myDate = preg_match('/\d{4}\-\d{2}\-\d{2}/', $myDate) ? $myDate : gmdate('Y-m-d');
    // ...
} 
```

# java - NetBeans-Glassfish 使用哪个 Metro？

> ID：10539886
> 
> 赞同：0
> 
> 时间：2012-05-10T18:13:25.720
> 
> 标签：java, netbeans, glassfish, java-metro-framework

我是 NetBeans 世界的新手，我安装了与 Glassfish-3.1.2 捆绑在一起的 NetBeans 7.1.2

我正在开发一个 Metro 应用程序并想对其进行调试，所以去库管理器添加源文件。但注意到“图书馆经理”在其图书馆中显示 METRO 2.0。 ![在此处输入图像描述](../Images/616aeefbecd20d7dd1b020f6d712e060.png)

因此，我想将 Metro 升级到最新的 2.2 并启动 GlassFish 更新工具。在已安装的组件列表中，它显示 Metro 2.2-13 已安装！ ![在此处输入图像描述](../Images/6963658ea9f7dfb224c04f3c56615eb2.png)

所以请帮助我理解，在这两个中，当我通过 NetBeans 运行/调试时 glassfish 使用哪个版本的 Metro？如果正在使用 2.2，如何将源文件添加到其中进行调试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:28:58.380

我启用了 Metro Tube 日志，发现 Metro 2.2 正在使用中。

# ruby-on-rails - nil 的未定义方法“strftime”：NilClass 当值不是 nil 时

> ID：10539888
> 
> 赞同：0
> 
> 时间：2012-05-10T18:13:30.837
> 
> 标签：ruby-on-rails, null, strftime

我在 Rails 中显示时间时遇到了一个奇怪的错误

```
<%= Time.zone.parse(e["start_time"])%> 
```

显示完整的时间戳字符串。“2010-09-02 18:00:00 -0500”

```
<%= Time.zone.parse(e["start_time"]).strftime()%> 
```

显示我提供了 (0 of 1) 个参数的预期错误。再次，预期。

```
<%= Time.zone.parse(e["start_time"]).strftime("%Y")%> 
```

显示错误“nil:NilClass 的未定义方法 'strftime'”。

所以我的 e["start_time"] 字段*被*填充，但我无法弄清楚为什么指定 strftime() 想要的参数会导致 Nil 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:29:59.710

当我尝试它时它会起作用：

```
irb(main):005:0> Time.zone.parse("2012-04-05 12:00:02").strftime("%Y")
=> "2012" 
```

甚至：

```
irb(main):006:0> Time.zone.parse("2012-04-05 12:00:02 -0500").strftime("%Y")
=> "2012" 
```

中的价值是`e["start_time"]`多少？

# cordova - MessageBox 隐藏不显示

> ID：10539889
> 
> 赞同：0
> 
> 时间：2012-05-10T18:13:33.550
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

我有一个`MessageBox`和 init 是一个`ActivityIndicator`like `spinner`。因此，要显示**警报**失败，我将不得不隐藏`MessageBox`包含`ActivityIndicator`并显示**警报**，如下所示；

但是，一旦`hide()`代码被执行，**Alert messgaebox**也会隐藏（或不显示）。那么我该如何预防呢？

```
// There is a MessageBox here, and i will be hiding it to show the alert.   

 Ext.Msg.hide();
                                Ext.Msg.alert('Failed, faileddd'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:04:02.907

我有一个类似的错误，我试图在第一个警报完全关闭之前显示第二个警报。我的解决方案是添加一个简短的延迟来给第一个处理时间：

```
Ext.defer(function() {
    Ext.Msg.alert('Failed, faileddd');
}, 1); 
```

# php - 将图像添加到产品库 - 无法粘贴媒体类型

> ID：10539899
> 
> 赞同：2
> 
> 时间：2012-05-10T18:14:18.160
> 
> 标签：php, magento

我正在尝试以编程方式将基本图像、小图像和缩略图图像添加到我的所有产品中。图像可以正常导入`/media/catalog/product`并按预期放置，但是当我在 Magento 后端查看产品图像时，仅选择了“基本图像”。

我正在遍历目录中的每个产品并运行：

```
$mediaArray = array('thumbnail', 'small_image', 'image');   
$file = Mage::getBaseDir('media') . DS . 'import' .  trim($imageName);
try {
    $product->addImageToMediaGallery($file, $mediaArray, false, false);
    $product->save();
} catch (Exception $e) {
    echo $e->getMessage();
} 
```

我所有的图像名称都以斜线开头，并且图像本身被上传到`/media/import`. 我试图模仿 Mage 产品进口商会做的事情。

任何关于为什么没有设置小和缩略图标志的见解将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T18:30:22.583

这是我自己使用的导入代码，它有效：

```
 // Add three image sizes to media gallery
        $mediaArray = array(
            'thumbnail'   => $oscProduct['products_image'],
            'small_image' => $oscProduct['products_mediumimage'],
            'image'       => $oscProduct['products_largeimage'],
        );

        // Remove unset images, add image to gallery if exists
        $importDir = Mage::getBaseDir('media') . DS . 'import/';

        foreach ( $mediaArray as $imageType => $fileName ) {
            $filePath = $importDir . $fileName;
            if ( file_exists($filePath) ) {
                try {
                    $product->addImageToMediaGallery($filePath, $imageType, false);
                } catch (Exception $e) {
                    echo $e->getMessage();
                }
            } else {
                echo "Product does not have an image or the path is incorrect. Path was: {$filePath}<br/>";
            }
        } 
```

Note`$imageType`不是数组，因为您的对应对象是。

**编辑：**您只想要一个图像，并将其设置为每种类型。使用 保存产品`$product->save()`后，假设您已经设置了`image`类型，请尝试以下操作：

```
$product->setThumbnail($product->getImage());
$product->setSmallImage($product->getImage());
$product->save(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T03:42:50.047

我在复制产品，也想复制产品图像。

我为此工作了几个小时，但无法让 array('thumbnail', 'small_image', 'image') 实际设置这些值。它将图像添加到库中，但不设置上述类型。我还尝试输入为字符串，例如只是“图像”而不是数组，这也不起作用。最后，这对我有用：

```
//grab the pics from original product
$mediaApi = Mage::getModel("catalog/product_attribute_media_api");
$items = $mediaApi->items($product->getId());

//duplicate the product
$product = $product->duplicate();
$product->setStatus(1);

//also move the pics over
$product->setMediaGallery (array('images'=>array (), 'values'=>array ()));
$product->setImage($items[0]['file']);
$product->setThumbnail($items[0]['file']);
$product->setSmallImage($items[0]['file']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T18:08:48.163

除非您设置了`store id`.

我这样做了：

```
Mage::app()->getStore()->setId(Mage_Core_Model_App::ADMIN_STORE_ID); 
```

我只有一家店。

# sql-server - 打开端口 SQL Server 实例

> ID：10539900
> 
> 赞同：4
> 
> 时间：2012-05-10T18:14:21.000
> 
> 标签：sql-server, networking

他们最近封锁了我们 SQL Server 上的所有端口。服务器有不同的实例，打开端口 1433 不起作用。我们需要打开什么来允许访问 SQL Server？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T18:22:33.897

在安装服务器实例的计算机上：

1.  启动 SQL Server 配置管理器实用程序。
2.  打开树控件上的 SQL Server 网络配置节点，您应该会看到每个服务器实例都有一个子节点。
3.  对于每个实例，选择其节点并注意是否启用了 TCP/IP 协议（​​如果未启用，则没有端口）。
4.  右键单击 TCP/IP 协议条目并从上下文菜单中选择属性。这将打开 TCP/IP 属性对话框。
5.  转到 IP 地址选项卡并向下滚动到 IPAll 部分的底部以查看 TCP 端口。

如果您之前没有配置过服务器，那么您可能正在使用动态端口。这不是您想要的，因为端口可能会更改：这将使您的防火墙设置无效。因此，只需清除 TCP 动态端口条目并在 TCP 端口条目中为 IPAll 输入当前动态端口号。重新启动服务器实例后，服务器将被固定到该端口。

后续注意事项：如果要通过实例名称从防火墙外部引用服务器，则必须允许 SQL Server Browser 通过防火墙，即 UDP 端口 1434。在我看来，最好引用实例从外部通过端口，不用担心 SQL 浏览器。例如，不要`MYSERVER\SQLEXPRESS`在连接字符串中使用，而是使用`MYSERVER.mydomain.com,12345`（在此示例中 SQLEXPRESS 在端口 12345 上运行）。请注意，连接字符串中的端口语法使用逗号分隔符，而不是用于 http uri 的冒号分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:30:16.577

您必须为每个实例设置不同的端口（或多个具有相同端口的 ip） 转到“SQL Server 配置管理器”，转到“SQL Server 网络配置”，为第一个实例选择协议，双击 TCP/IP，选择选项卡“IP地址”，最后你会找到组“IPAll”，编辑tcp端口并输入1433，并删除“动态端口tcp”中的值，重新启动服务。对下一个实例执行相同操作，但将 1433 更改为 1434 、 1435 或任何您想要的。然后在防火墙中打开您的端口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T07:28:04.820

转到“SQL Server 网络配置”，单击“TCP/IP”并从属性中转到“IP 地址”，然后在 IP4 下将“启用”选项从“否”更改为“是”，然后单击应用和确定。然后转到“SQL server services”然后停止启动

# c# - 如何在 64 位环境中检查/授予作为服务登录的权限

> ID：10539902
> 
> 赞同：1
> 
> 时间：2012-05-10T18:14:40.737
> 
> 标签：c#

我遇到了整个 p/invoke 问题。我需要在 C# 中以编程方式执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:27:18.423

几周前我做了 p/invoke 的东西（使用 LSA 包装器）。我第一次运行包装器时遇到异常，但第二次在 Win2k8 服务器 64 位上成功。

像这样的东西对我有用

```
try{
   DoThePInvokeMagic();
}
catch(Exception){
    // Sometimes the first invocation fails, but the second time it seems to work       
    DoThePInvokeMagic();
} 
```

不幸的是，我们没有时间/prio 进一步调查为什么会发生这种情况以及为什么它第二次起作用，因为我们让它在我们所有的服务器上工作。

# iphone - clickedButtonAtIndex: 错误

> ID：10539910
> 
> 赞同：2
> 
> 时间：2012-05-10T18:15:36.290
> 
> 标签：iphone, objective-c

我有这个代码：

//显示警报

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Actualizado" 
message:@"Se ha actualizado todo" delegate:self 
cancelButtonTitle:@"Aceptar" otherButtonTitles:nil, nil];
[alert show];
```

和这个

```
- (void)alertView:(UIAlertView *)alert 
clickedButtonAtIndex:(NSInteger)buttonIndex {
    NSLog(@"ALgo"); }
```

并得到以下错误：

```
 -[__NSCFType alertView:clickedButtonAtIndex:]:
unrecognized selector sent to instance 0xdc559a0
```

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T18:29:45.470

看起来您可能正在释放处理`alertView:clickedButtonAtIndex:`选择器（委托）的对象或视图。确保您保留它，直到您的`UIAlertView`处理完毕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:46:47.397

您是否已将 UIAlertViewDelegate 添加到您的头文件中？例如@interface yourclass: UIViewController 检查这是否可能是原因

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T18:17:45.960

```
UIAlertView *alert = [[UIAlertView alloc]  initWithTitle:@"Actualizado" message:@"Se ha actualizado todo" delegate:self cancelButtonTitle:@"Aceptar" otherButtonTitles:nil, nil]; 
```

尝试这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-20T18:29:31.717

如果您的 alertView 是在从 ViewController 实例化的对象中创建的，则需要在 ViewController 中保留指向该对象的指针。

# c# - 如何客户端验证自定义控件？

> ID：10539911
> 
> 赞同：1
> 
> 时间：2012-05-10T18:15:53.230
> 
> 标签：c#, asp.net, validation, client-side

跟进我[之前](https://stackoverflow.com/questions/10521211/how-to-make-a-custom-control-validatable)关于自定义控件和验证的问题，我现在可以进行服务器端验证，但似乎无法弄清楚如何添加客户端验证。我必须遵循控制：

```
[ValidationProperty("Text")]
[ToolboxData("<{0}:DateSelect runat=server></{0}:DateSelect>")]
public class DateSelect : System.Web.UI.WebControls.Panel
{
 private DropDownList day;
 private DropDownList month;
 private DropDownList year;

 public DateSelect()
 {
    day = new DropDownList();
    /* some code to create items for 'day' here */
    Controls.Add(day);
    month = new DropDownList();
    /* some code to create items for 'month' here */
    Controls.Add(month);
    year = new DropDownList();
    /* some code to create items for 'year' here */
    Controls.Add(year);
 }

 public string Text
 {
    get
    {
        return year.Text + "-" + month.Text + "-" + day.Text;
    }
 }
} 
```

在我的网络表单上，我添加了这个控件，在 DataType 操作中添加了一个 CompareValidator 来检查有效日期。我将验证器设置`EnableClientScript`为，`false`并且自定义控件在服务器端得到了很好的验证，并在正确的情况下提供了正确的消息。但是，当我转向`EnableClientScript`自定义控件`true`时，客户端已验证并在 DropDownLists 中实际上存在有效日期时产生错误消息。我一直在试图找出原因并最终得到以下由 .net 生成的 javascript，我认为它永远不会产生正确的值：

```
function ValidatorGetValueRecursive(control)
{
    if (typeof(control.value) == "string" && (control.type != "radio" || control.checked == true)) {
        return control.value;
    }
    var i, val;
    for (i = 0; i<control.childNodes.length; i++) {
        val = ValidatorGetValueRecursive(control.childNodes[i]);
        if (val != "") return val;
    }
    return "";
} 
```

所以我相信我必须在我的自定义控件中添加一些东西，也许是一段 javascript，一旦验证器尝试验证我的控件并生成正确的值以从三个 DropDownLists 的选定项目中进行验证，它就会被调用。我只是不知道在哪里添加这个脚本。任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:40:31.957

因为您的控件实际上包含多个服务器控件，所以我建议将客户端验证器添加到控件集合中，就像您对其他控件所做的那样。

```
var ddl = new DropDownList();
ddl.ID = "ddlDay";
Controls.Add(ddl);

var validator = new RequiredFieldValidator();
val.ControlToValidate = ddl.ID;
val.ErrorMessage = "*"; //property to set this for all validators
val.Display = ValidatorDisplay.Dynamic; //property to set this for all validators
Controls.Add(validator); 
```

添加验证器后，您可以公开属性以应用于控件中的所有验证器，例如验证组、错误消息、显示类型等。

**编辑#1**

如果您想将组合输入验证为一个，请使用 a`CustomValidator`并通过控件注册必要的客户端脚本。

我根本没有测试过这个，但下面是一个简单的代码示例来演示这个概念。显然，您将使用 a`StringBuilder`或其他东西在代码中构建验证函数：

```
<script type="text/javascript">
    clientValidate = function(source, args){

        var ddl1 = document.getElementById("<%= ddl1.ClientID %>");
        var ddl2 = document.getElementById("<%= ddl2.ClientID %>");

        if (ddl1.options[e.selectedIndex].value.length == 0)
            args.IsValid = false;
        if (ddl2.options[e.selectedIndex].value.length == 0)
            args.IsValid = false; 

    }
</script>
<asp:CustomValidator ID="MyCustomValidator" runat="server"
    ErrorMessage="Invalid" 
    ClientValidationFunction="clientValidate" /> 
```

以下是一些解释如何使用自定义验证器进行客户端验证的文章：

*   [多个控件的自定义验证器](http://coding.infoconex.com/post/2010/10/12/ASPNET-CustomValidator-that-validates-multiple-controls-using-both-Server-Side-and-Client-Side-scripting.aspx)
*   [CustomValidator.ClientValidationFunction 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.clientvalidationfunction.aspx)

**编辑#2**

更多阅读表明`CustomValidator`应该与您的复合控件兼容。

# visual-studio-2010 - 让 mstest 结果显示在 CruiseControl.Net 构建报告中

> ID：10539912
> 
> 赞同：4
> 
> 时间：2012-05-10T18:15:54.557
> 
> 标签：visual-studio-2010, msbuild, cruisecontrol.net, mstest

我正在尝试设置 CruiseControl.Net 以在构建报告中显示来自 mstest 单元测试（msbuild / Visual Studio 2010）的结果。我正在合并结果，它们确实显示在构建日志中，但没有出现在构建报告中。我还尝试在 MsTestSummary2008.xsl 中转储一些文本，并且该文本确实显示在构建报告中，因此 xsl 似乎确实包含在内。

对于 VS2010，我需要一个新的/不同的 .xsl 吗？提前致谢。

ccnet.config：

```
 <publishers>
  <merge>
    <files>
      <file>C:\_Projects\test\code\results\results1.trx</file>
    </files>
  </merge>
  <xmllogger />
  <statistics />
</publishers> 
```

仪表板.config：

```
 <buildPlugins>
  <buildReportBuildPlugin>
    <xslFileNames>
      <xslFile>xsl\header.xsl</xslFile>
      <xslFile>xsl\modifications.xsl</xslFile>
      <xslFile>xsl\MsTestSummary2008.xsl</xslFile>
    </xslFileNames>
  </buildReportBuildPlugin>
  <buildLogBuildPlugin />
  <xslReportBuildPlugin description="MSTest Report" actionName="MSTESTReport" xslFileName="xsl\MsTestReport2008.xsl" />
</buildPlugins> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:18:39.527

[也许这个线程](http://www.telerik.com/automated-testing-tools/community/forums/test-studio-express/general-discussions/display-report-automation-test-on-cruise-control.aspx)中提到的修改后的 XSL将解决您的问题。

# git - 如何找到具有特定父级的所有提交？

> ID：10539918
> 
> 赞同：5
> 
> 时间：2012-05-10T18:16:29.627
> 
> 标签：git, libgit2, libgit2sharp

如何在存储库中找到具有特定父级的所有提交？

例如，如果我有一个 commit `A`，我想找到与`A`. 什么是最有效的，即在 LibGit2Sharp 中执行此操作的高效而正确的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T20:20:27.757

这是一个棘手的问题;-)

Git 对象允许检索提交的父项。但是，没有简单的方法可以找到提交的子项。

但是，以下代码将*部分*解决此问题。这个想法是`git log`从存储库的所有引用（头，标签，...）中执行 a ，并在此过程中选择每个带有请求 SHA 的父级的提交。

由于从最近的提交沿祖先路径进行遍历，因此如果您要在具有非常大的历史和许多分支的存储库中搜索非常早的提交的子代，则可能需要一些时间。

```
[Fact]
public void CanRetrieveChildrenOfASpecificCommit()
{
    TemporaryCloneOfTestRepo path = BuildTemporaryCloneOfTestRepo(StandardTestRepoPath);
    using (var repo = new Repository(path.RepositoryPath))
    {
        const string parentSha = "5b5b025afb0b4c913b4c338a42934a3863bf3644";

        var filter = new Filter
                         {
                             /* Revwalk from all the refs (git log --all) ... */
                             Since = repo.Refs, 

                             /* ... and stop when the parent is reached */
                             Until = parentSha
                         };

        var commits = repo.Commits.QueryBy(filter);

        var children = from c in commits
                    from p in c.Parents
                    let pId = p.Id
                    where pId.Sha == parentSha
                    select c;

        var expectedChildren = new[] { "c47800c7266a2be04c571c04d5a6614691ea99bd", 
                                        "4a202b346bb0fb0db7eff3cffeb3c70babbd2045" };

        Assert.Equal(expectedChildren, children.Select(c => c.Id.Sha));
    }
} 
```

**限制：**

*   这不会检索已重写的提交（例如，通过修改或变基），因为 LibGit2Sharp 没有公开访问 reflog 的方法（还）
*   此提案也不会检索无法访问（悬空）的提交。

**测试仓库：**

正在查询的存储库的内容如下所示

```
$ git log --all --graph
* commit 4c062a6361ae6959e06292c1fa5e2822d9c96345
| Author: gor <gorbach.alexey@gmail.com>
| Date:   Thu Apr 14 18:44:16 2011 +0300
|
|     directory was added
|
*   commit be3563ae3f795b2b4353bcce3a527ad0a4f7f644
|\  Merge: 9fd738e c47800c
| | Author: Scott Chacon <schacon@gmail.com>
| | Date:   Tue May 25 11:58:27 2010 -0700
| |
| |     Merge branch 'br2'
| |
| | * commit e90810b8df3e80c413d903f631643c716887138d
| | | Author: Vicent Marti <tanoku@gmail.com>
| | | Date:   Thu Aug 5 18:42:20 2010 +0200
| | |
| | |     Test commit 2
| | |
| | * commit 6dcf9bf7541ee10456529833502442f385010c3d
| |   Author: Vicent Marti <tanoku@gmail.com>
| |   Date:   Thu Aug 5 18:41:33 2010 +0200
| |
| |       Test commit 1
| |
| | *   commit a4a7dce85cf63874e984719f4fdd239f5145052f
| | |\  Merge: c47800c 9fd738e
| |/ /  Author: Scott Chacon <schacon@gmail.com>
| | /   Date:   Tue May 25 12:00:23 2010 -0700
| |/
|/|         Merge branch 'master' into br2
| |
* | commit 9fd738e8f7967c078dceed8190330fc8648ee56a
| | Author: Scott Chacon <schacon@gmail.com>
| | Date:   Mon May 24 10:19:19 2010 -0700
| |
| |     a fourth commit
| |
* | commit 4a202b346bb0fb0db7eff3cffeb3c70babbd2045
| | Author: Scott Chacon <schacon@gmail.com>
| | Date:   Mon May 24 10:19:04 2010 -0700
| |
| |     a third commit
| |
| * commit c47800c7266a2be04c571c04d5a6614691ea99bd
|/  Author: Scott Chacon <schacon@gmail.com>
|   Date:   Tue May 25 11:58:14 2010 -0700
|
|       branch commit one
|
* commit 5b5b025afb0b4c913b4c338a42934a3863bf3644
| Author: Scott Chacon <schacon@gmail.com>
| Date:   Tue May 11 13:38:42 2010 -0700
|
|     another commit
|
* commit 8496071c1b46c854b31185ea97743be6a8774479
  Author: Scott Chacon <schacon@gmail.com>
  Date:   Sat May 8 16:13:06 2010 -0700

      testing

* commit 41bc8c69075bbdb46c5c6f0566cc8cc5b46e8bd9
| Author: Scott Chacon <schacon@gmail.com>
| Date:   Tue May 11 13:40:41 2010 -0700
|
|     packed commit two
|
* commit 5001298e0c09ad9c34e4249bc5801c75e9754fa5
  Author: Scott Chacon <schacon@gmail.com>
  Date:   Tue May 11 13:40:23 2010 -0700

      packed commit one 
```

# iphone - 如何在选择 UIPickerPicker 视图时打开众多视图控制器之一

> ID：10539919
> 
> 赞同：0
> 
> 时间：2012-05-10T18:16:32.030
> 
> 标签：iphone, ios5, uipickerview

我正在使用情节提要在 IOS5 中创建应用程序。我创建了一个UIPickerview，并且选择选项时，我想打开众多UIViewController中的一个。我只想让用户选择他想要使用的视图控制器。如何连接多个视图控制器。

谢谢普雷纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:03:21.020

请为您的选择器视图使用以下委托和数据源

```
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view {

        if(button_Number == 1)
        {
            UILabel *label =[[UILabel alloc]initWithFrame:CGRectMake(0, 0, 280, 30)];

            NSString *nameStr=[arr_countryName objectAtIndex:row];
            // NSString *nameStr=[programNameArr objectForKey:@"programname"];
            label.text = nameStr;
            label.font = [UIFont boldSystemFontOfSize:14.0f];
            label.textAlignment = UITextAlignmentLeft;
            label.backgroundColor = [UIColor clearColor];
            [label autorelease];
            return label;
        }
        if (button_Number == 2)
        {
            UILabel *label =[[UILabel alloc]initWithFrame:CGRectMake(0, 0, 280, 30)];

            NSString *nameStr=[arr_currencyCode objectAtIndex:row];
            // NSString *nameStr=[programNameArr objectForKey:@"programname"];
            label.text = nameStr;
            label.font = [UIFont boldSystemFontOfSize:18.0f];
            label.textAlignment = UITextAlignmentLeft;
            label.backgroundColor = [UIColor clearColor];
            [label autorelease];
            return label;
        }
} 
```

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component{
        //return (NSString*)[clientListArray objectAtIndex:row];

        if(button_Number == 1)
        {
            return (NSString*)[arr_countryName objectAtIndex:row];
        }
        if (button_Number == 2)
        {
            return (NSString*)[arr_currencyCode objectAtIndex:row];
        }
} 
```

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView{
        return 1;
} 
```

```
-(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component{

        if(button_Number == 1)
        {
            return [arr_countryName count];
        }
        if (button_Number == 2)
        {
            return [arr_currencyCode count];
        }
}
```

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component{

        selectedScrollIndex = row;

        // clientNameTxtFld.text = [clientListArray objectAtIndex:row];

        // LBL.text = [clientListArray objectAtIndex:row];
}
```

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex 
    {
        if(buttonIndex == 0)
        {

        }

        if (buttonIndex == 1 && button_Number == 1)
        {
            countryTxtFld.text = [arr_countryName objectAtIndex:selectedScrollIndex];
            //selected_Client_ID = [clientIDArray objectAtIndex:selectedScrollIndex]; 

            selectedScrollIndex = 0;
        }

        if (buttonIndex == 1 && button_Number == 2)
        {
            currencyTxtFld.text = [arr_currencyCode objectAtIndex:selectedScrollIndex];
            //selected_Client_ID = [clientIDArray objectAtIndex:selectedScrollIndex]; 

            selectedScrollIndex = 0;
        }
}
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:35:02.877

为 .h 文件中的所有视图控制器创建实例，并根据`tag`UIPickerView 中的 row-touch-title 数组的顺序为所有视图控制器设置值。完成后，继承`UIPickerViewDelegate`并实现所需的委托方法。

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow: (NSInteger)row 
 inComponent:(NSInteger)component {
    // Handle the selection    
    switch (row) {
        case 0:
            [self presentModalViewController:viewController1 animated:YES];
            break;
        case 1:
            [self presentModalViewController:viewController2 animated:YES];
            break;
        case 2:
            [self presentModalViewController:viewController3 animated:YES];
            break;
    }
} 
```

# javascript - 在 MYSQL 数据库中存储包含对象的 javascript 数组？

> ID：10539923
> 
> 赞同：11
> 
> 时间：2012-05-10T18:17:05.023
> 
> 标签：javascript, mysql, arrays, object

所以在javascript中我有一个看起来像这样的数组：

> [{x1:0,x2:2000,y:300},{x1:50,x2:250,y:500}]

我想将它存储在我的数据库中的单个字段中。我考虑过以某种方式将其设为字符串，然后将其保存为文本，但我真的不知道一种非常有效且“智能”的方式来做到这一点。我也听说过 VARBINARY 字段类型，但我不知道如何将对象/数组写入其中之一以及如何读出它......

我真正最喜欢的是它是否会自动被读取为数组。我的 MYSQL 插件（或者在 js 中调用的）将我的查询作为对象数组返回，如下所示：

> [{id:0,bla:"text"},{id:0,bla:"text"}]

对于具有列 id 和 bla 的表中的查询。

好吧，假设我的数组存储在 bla 中，我希望对象在返回时看起来与此完全一样（但是，如果这不可能，我可以使用替代解决方案）。

> [{id:0,bla:[{x1:0,x2:2000,y:300},{x1:50,x2:250,y:500}]},{id:0,bla:[{x1: 0,x2:2000,y:300},{x1:50,x2:250,y:500}]}]

所以基本上我会得到一个包含两个对象的数组，每个对象都具有属性 bla 和 id，其中 bla 是具有属性 x1、x2 和 y 的对象数组。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-10T18:27:03.897

> > 以某种方式使其成为字符串，然后将其保存为文本，但我真的不知道一种非常有效且“智能”的方式来做到这一点。

将字符串保存为 JSON，如下所示：

```
var myArr = [{x1:0,x2:2000,y:300},{x1:50,x2:250,y:500}];
myArrString = JSON.stringify(myArr); 
```

稍后，当您从 MySQL 取回 JSON 字符串时，您可以使用 将其转回数组`JSON.parse()`，如下所示：

```
var myArr = JSON.parse(myArrString) 
```

是的，如果您想知道，JSON 功能已添加到 Javascript 的标准代码库中：这就是它的流行程度。

# c# - C# 在 Restful API 中接受图像作为 HttpPostedFile

> ID：10539924
> 
> 赞同：0
> 
> 时间：2012-05-10T18:17:14.090
> 
> 标签：c#, asp.net, rest, post, fiddler

我正在用 C# 构建一个 rest api - 我正在设置一些 POST - 这是界面：

```
 [SecurityTokenValidator("Registered Users")]
    [OperationContract]
    [WebInvoke(ResponseFormat = WebMessageFormat.Xml, RequestFormat = WebMessageFormat.Xml, UriTemplate = "camps/{campid}/markings/{token}", Method = "POST")]
    MarkingDto InsertMarking(string campid, string token, MarkingDto markingDto); 
```

这是我的 MarkingDto

```
[DataContract(Namespace = "FreeBeer")]
public class MarkingDto
{
    [DataMember] public int Id;
    [DataMember] public decimal Latitude;
    [DataMember] public decimal Longitude;
    [DataMember] public string MarkingType;
    [DataMember] public DateTime DateTime;
} 
```

在 Fiddler 中构建测试 POST 时——我注意到我的 RequestBody 是否按字母顺序排列——有些项目出现空值或零。例如 - 如果请求正文是这样的 - 经度在纬度之前出现 - 纬度将为零 (0)。

```
<MarkingDto xmlns="BigGameLogic">
<Longitude>456</Longitude>
<Latitude>123</Latitude>
<MarkingType>Scrape</MarkingType>
</MarkingDto> 
```

但如果按字母顺序排列 - 一切都在那里。这只是提琴手的事情吗？或者这是我需要解决的问题，因为我缺少简单的解决方案；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T23:08:32.023

WCF 中的一项要求是，除非您在 DataMember 上指定顺序，否则成员属性将按字母顺序发送。

重新看到这个问题的答案

[并非 WCF 数据协定中的所有参数都通过 Web 服务调用](https://stackoverflow.com/questions/10474838/not-all-parameters-in-wcf-data-contract-make-it-through-the-web-service-call/10475117#10475117)

更多信息可以在这里找到

msdn.microsoft.com/en-us/library/ms729813.aspx

谢谢

# asp.net - 为什么我的 VS 2011 ASP.NET 项目在使用 IIS Express 7.5 进行调试时会出现 401.2 错误？

> ID：10539925
> 
> 赞同：1
> 
> 时间：2012-05-10T18:17:15.320
> 
> 标签：asp.net, vb.net, web-config, iis-express

一切工作正常......然后有一次运行调试器，我收到来自 IIS Express 7.5 的 401.2 错误。我创建了一个新项目并进行了测试 - 工作正常。我确保 web.config 和其他项目设置相同 - 在原始项目中仍然出现错误！

（我实际上解决了这个问题......但在任何地方都没有看到与我的解决方案有关的这个确切问题的文档，我会立即添加答案......是的，我已经在 Stackoverflow（和其他地方）上查看了其他 401.2 问题，他们与我面临的问题不同......）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T18:19:23.087

就我而言，出于某种原因，VS 2011 在 Documents\IISExpress\config 下的 applicationhost.config 文件中添加了几行。添加的行（以及我删除的行）如下：

```
 <location path="IRFEmpty">
    <system.webServer>
        <security>
            <authentication>
                <anonymousAuthentication enabled="false" />
                <windowsAuthentication enabled="false" />
            </authentication>
        </security>
    </system.webServer>
    </location> 
```

不要问我他们是如何到达那里的——我没有添加他们。这很烦人，因为我的 VS 项目中的所有代码都是 100% 正确的，这是 IISExpress 配置错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:25:45.233

在 Web 项目上启用 AnonymousAuthentication... 请参阅这些说明以启用 WindowsAuthentication 除了在可以启用 AnonymousAuthentication 的相同位置：[IIS Express Windows 身份验证](https://stackoverflow.com/questions/4762538/iis-express-windows-authentication/7168308#7168308)

在 VS2011 中，调试我的 MVC 项目一直在工作，直到此设置神秘地更改为“已禁用”并且我开始收到 401.2 错误。启用此设置可解决问题。

# python - 如何从“A”类中调用“B”类的实例方法？

> ID：10539928
> 
> 赞同：1
> 
> 时间：2012-05-10T18:17:36.070
> 
> 标签：python, user-interface, pygame

我不确定我是否正确使用类。我正在尝试使用 pygame 构建一个简单的菜单。这是我第一次涉足 gui 的东西。我不知道如何构建我的代码。

我发现我可以创建一个通用的 Button 类来处理所有鼠标悬停/鼠标单击的内容，然后我可以为每个按钮子类化它，并重写该`do_action`方法以给每个按钮一个特定的操作。

```
class Button(pygame.sprite.Sprite):
    global screen_flags
    def __init__(self, images, pos):
        pygame.sprite.Sprite.__init__(self)
        self.images = images
        self.image = images[0]
        self.rect  = self.image.get_rect()
        self.rect.move_ip(pos)

    def update(self, events, surface):
        # if not screen_flags['config']:
        for event in events:
            if event.type == MOUSEMOTION:
                if self.rect.collidepoint(event.pos):
                    self.image = self.images[1]
                else:
                    self.image = self.images[0]
            elif event.type == MOUSEBUTTONDOWN:
                if event.button == 1 and self.rect.collidepoint(event.pos):
                    self.image = self.images[-1]
                    screen_flags['config'] = 1
                    self.do_action()
                    self.set_flag()

            elif event.type == MOUSEBUTTONUP:
                self.image = self.images[0]

        screen.blit(self.image, self.rect)

    def do_action(self):
        pass
    def set_flag(self):
        pass

class CheckBox(Button):
    def __init__(self, images, pos):
        Button.__init__(self, images, pos)
        self.is_clicked = False

    def update(self, events, surface):
        for event in events:
            if event.type == MOUSEMOTION:
                if not self.is_clicked:
                    if self.rect.collidepoint(event.pos):
                        self.image = self.images[1]
                    else:
                        self.image = self.images[0]
            elif event.type == MOUSEBUTTONDOWN:
                if event.button == 1 and self.rect.collidepoint(event.pos):
                    if not self.is_clicked:
                        self.image = self.images[-1]
                        self.is_clicked = True
                    else:
                        self.image = self.images[0]
                        self.is_clicked = False
        screen.blit(self.image, self.rect)

class Cancel(Button):
    def do_action(self):
        screen_flags['config'] = 0 
```

所以，正如你所看到的，他们还没有真正*做*任何事情。我可以打开和关闭复选框，打开和关闭一个“配置”窗口，但这就是我所得到的。其余代码：

```
global count
global sTime

config_button_img = load_sliced_images(25, 25, c_buttons)
config_button = Button(config_button_img, (608,4))

input_bar = load_sliced_images(351,33, inpt_bar)
text_box = Textbox(input_bar, (144,155))

s_button = load_sliced_images(110,32, sbmt_bttn)
submit = Button(s_button, (241,301))

c_button = load_sliced_images(110,32, cncl_bttn)
cancel = Cancel(c_button, (385, 301))

c_boxes = load_sliced_images(20,19, chk_box)
check_box = CheckBox(c_boxes, (200,200))    

try:
    while True:
        # ****************************
        # Pygame section
        events = pygame.event.get()
        for event in events:
            if event.type == QUIT:
                screen_flags['alert'] = 1
                ding.play(0,1000)
            elif event.type == MOUSEBUTTONDOWN:
                text_box.set_focus(event.button, event.pos)

        screen.blit(background, (0,0))
        screen.blit(client_logo, (0,30))
        screen.blit(tag, (174,462))

        if screen_flags['config']:
            screen.blit(config_window_img, (0,0))

            submit.update(events, screen)
            cancel.update(events, screen)
            check_box.update(events, screen)
        if screen_flags['alert']:
            screen.blit(alert_dialog, (0,0))

        config_button.update(events, screen)
        pygame.display.update()   

except KeyboardInterrupt:
    try: 
        pygame.quit()
    except:
        pass 
```

所以这有点像预期的那样。我不确定从这里去哪里。我是否继续在类中封装逻辑？例如，我尝试做的下一件事是，当单击“取消”按钮时，它会取消选中复选框。

我试图改变`Cancel`班级来做到这一点。

```
class Cancel(Button):
    def do_action(self):
        screen_flags['config'] = 0
        check_box.is_clicked=False 
```

但是，这给了我一个 GlobalName 错误。如何从不同的类中定位实例方法？这甚至是正确的方法吗？或者只有一些逻辑，比如`update()`照顾鼠标的东西，然后通过将变量传入和传出不同的类来*处理*`main()`类的作用？我应该让所有的类都使用全局变量吗？

有没有关于gui实践的好文章。诸如如何构造代码等之类的事情？

希望以上是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:25:23.850

就个人而言，我会这样做，以便我的每个类都被接受`screen_flags`为构造函数 ( `__init__`) 的参数。然后，您的每个类都会处理他们需要的“全局”数据。一个真正简单的方法是......

```
class Cancel(Button):
      def __init__(self,*args,**kwargs):
          self.screen_flags=kwargs.pop('screen_flags')
          Button.__init__(self,*args,**kwargs)  #Some might advise you to use super here...

      def do_action(self):
          self.screen_flags['config'] = 0

#now use the cancel class
cancel=Cancel(c_button, (385, 301),screen_flags=screen_flags) 
```

当然，根据共享数据的样子（您有多少不同的变量等），您可能需要传递一个字典或其他对象来制作它，这样您就不需要传递 5000 条不同的共享数据大约。

处理此问题的另一种方法是将类中的“全局”数据定义为“类变量”，然后从该类继承。

```
class GlobalData(object):
   stuff=None

class FooButton(Button,GlobalData):
   def do_action(self):
       print self.stuff
       #If you do something in here, don't do:  self.stuff = blah
       #instead, you *should* do: GlobalData.stuff = blah
       #However, it is fine to change mutable objects in place.
       #         e.g. self.stuff["dict_key"]=blah

#Now we can assign to GlobalData and instances of 
#FooButton will see the differences immediately.
cancel=FooButton(c_button, (385, 301))
cancel.do_action()
GlobalData.stuff="Cows say Moo"
cancel.do_action() 
```

我希望这有帮助。您的帖子内容很多，因此整理所有内容有点困难。

**编辑**

如果您不了解如何处理类变量，请参阅 中的注释`do_action`。基本上，您需要小心不要丢失对数据的处理...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:03:52.993

GUI 的东西可以做得更好。

是的，请务必将您的控件包装在类中。

我建议试试这个。

首先，**为您的控件定义逻辑接口**。暂时忘记实施细节。任何控件都可以点击；定义方法`onClick(pos)`。复选框可以选中或不选中；定义`setChecked(bool)`。窗口可以显示或隐藏、定义`setVisible(bool)`等。

**为可点击控件**创建一个共同的祖先。在其事件处理程序中，调用`onClick(event.pos)`. 默认实现什么都不做。`onClick()`现在，当您想模仿点击时，您可以调用控件。您将想要`onMouseDown`并`onMouseUp`执行诸如单击动画`onMouseIn`和`onMouseOut`悬停事件等之类的事情。您关心事件调度的血腥细节的唯一地方将是您的共同祖先。

**不要直接引用全局状态**；它会导致各种不愉快的事情。相反，让每个控件都知道它的状态以及如何更改它（无论如何我们都在做 OOP）。因此，复选框获取`isChecked()`方法等。

现在取消按钮只需要覆盖它的`onClick`方法和构造函数。在构造函数中，传递`CheckBox`实例；在`cancel_button.onClick`只是打电话`Button.onClick`然后`self.check_box.setChecked(False)`。

# security - .htacess 保护是否足够？

> ID：10539929
> 
> 赞同：2
> 
> 时间：2012-05-10T18:17:39.050
> 
> 标签：security, .htaccess

以wordpress网站为例，大家都知道，wordpress的管理面板只能通过site/wp-admin访问。我的问题是，如果我使用 .htaccess 文件拒绝来自除我之外的其他 IP 的所有访问，我的网站会不会受到黑客的攻击？

注意：为简单起见，我们假设该站点仅包含静态内容，内容从数据库中检索，恕我直言，如果黑客没有输入，则该站点不可能被 XSS、sql 注入等攻击.如果我错了，请纠正我，即使像我这样的聪明人也可能是错的。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:55:18.080

.htaccess 对安全性很有用，但它不能保证不受黑客攻击，即使您做出了所有假设。[http://www.cmswire.com/cms/web-cms/how-they-hack-your-website-overview-of-common-techniques-002339.php](http://www.cmswire.com/cms/web-cms/how-they-hack-your-website-overview-of-common-techniques-002339.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:01:50.043

单独使用`.htaccess`通过 IP 地址限制对 URL 的访问是一个“足够好”的解决方案，因为它在大多数情况下都可以正常工作。然而，有一些陷阱，比如如果您的 IP 地址发生变化，您必须进入控制台并更新您的`.htaccess`文件，这不是什么大不了的事，但也很不方便。

IMO，您最好专注于使用 SSL（SSL 证书比以往任何时候都便宜！）来加密您网站（或至少您的管理面板）的所有流量，并选择一个强大的管理员密码，而不是尝试限制访问从未知位置到您的管理面板。

# ios - performSegueWithIdentifier 可以与 AppDelegate 一起使用吗？

> ID：10539930
> 
> 赞同：5
> 
> 时间：2012-05-10T18:17:40.017
> 
> 标签：ios, uisplitviewcontroller, segue, uistoryboard

我正在开发一个应用程序，该应用程序在启动时检查有效的登录凭据，如果找到并且未过期，则显示主拆分视图控制器，如果没有，则应显示登录屏幕。

每个部分都可以单独工作，但我正在努力在启动时以最佳方式选择要显示的正确视图。

我尝试从根视图控制器设置模态segue，并在我的应用程序中设置：didFinishLaunchingWithOptions: App Delegate 中的函数，调用它：

```
// Segue to the login view controller...
if (loginNeeded) {
    [self.window.rootViewController performSegueWithIdentifier:@"LoginScreen" sender:self];
} 
```

这在逻辑上应该可行，但从应用程序委托中触发 segues 似乎是不可能的。

处理此问题的理想场所和技术是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T11:54:24.790

您可以尝试自定义转场，根据这个帖子[hidden-a-segue-on-login-process](https://stackoverflow.com/questions/9293260/hiding-a-segue-on-login-process)。

或者，如果您迫切希望在拆分视图控制器加载之前显示登录信息，请尝试以下几行...

在主故事板上创建您的登录屏幕，例如，作为`UIViewController`. 确保它是初始场景（检查*Is Initial View Controller*）。

在情节提要上，从您的登录类创建一个新的 segue 到原始的 SplitViewController。给它一个标识符 ' `Load SplitViewController`' 和一个我们将调用的 segue 自定义类名`FullyReplaceSegue`。

在您的登录类 .m 文件中，添加用户登录后要调用的代码：

```
[self performSegueWithIdentifier:@"Load SplitViewController" sender:self]; 
```

`UIStoryboardSegue`根据上面的名称创建新的 segue 类`FullyReplaceSegue`。

.h 文件

```
#import <UIKit/UIKit.h>
@interface  : UIStoryboardSegue

@end 
```

.m 文件

```
#import "FullyReplaceSegue.h"

@implementation FullyReplaceSegue

- (void)perform
{
    UIViewController *dest = (UIViewController *) super.destinationViewController;
    UIWindow *window = [UIApplication sharedApplication].keyWindow;
    window.rootViewController = dest;

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        UISplitViewController *splitViewController = (UISplitViewController *)dest;  // assumes we're transitioning to a UISplitViewController!
        UINavigationController *navigationController = [splitViewController.viewControllers lastObject];
        splitViewController.delegate = (id)navigationController.topViewController;
    }
}

@end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T19:45:51.763

这就是我的做法。

在 didFinishLaunchingWithOptions 中：

```
//save the root view controller
[[self window] makeKeyAndVisible];
UINavigationController *navigationController = (UINavigationController*) self.window.rootViewController;
rootController = [[navigationController viewControllers] objectAtIndex:0]; 
```

应用程序委托中的其他地方：

```
[rootController performSegueWithIdentifier:@"fileSegueID" sender:self]; 
```

然后，在情节提要中，从分配为“rootController”的视图创建一个转场到所需的可选视图，并为该新转场指定 id `fileSegueID`。需要进行一些调试以确保将`rootController`变量分配给正确的视图。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T18:05:14.740

也许有点晚了，但我正在寻找同样的建议。这就是我最终要做的事情。

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Signup" bundle:nil];
    if(isLoggedIn) {
    UINavigationController *navigationController = (UINavigationController*) self.window.rootViewController;
    IndexController *ivc = [storyboard instantiateViewControllerWithIdentifier:@"IndexController"];
    [navigationController pushViewController:ivc animated:NO];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T18:40:04.047

为什么不加载假设正确且未过期的登录凭据可见的屏幕（通过将其设置为窗口的根视图控制器），然后在第一个视图控制器的 viewDidLoad 中，检查是否有更新需要登录凭据。如果是这样，请进入登录视图控制器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-01T22:43:20.570

是的，如果您获得对 segue 的父视图控制器的引用，则可以使用它。你可以像这样得到它：

```
UINavigationController *navigationController = (UINavigationController*) self.window.rootViewController;

[[[navigationController viewControllers] objectAtIndex:0] performSegueWithIdentifier:@"LoginScreen" sender:self]; 
```

这仅在 viewControllers 数组中的索引与您的视图控制器之一匹配并且当然存在时才有效。在这种情况下是第一个（在数组和情节提要中）。

segue（“LoginScreen”）不得附加到操作。执行此操作的方法是通过控制从情节提要场景底部的文件所有者图标拖动到目标场景。将出现一个弹出窗口，要求在“Manual Segue”中选择一个选项；选择“推送”作为类型。点击小方块并确保您在属性检查器中。给它一个标识符，您将使用它在代码中引用它。

# css - CSS Media 查询是否会阻止多个请求？

> ID：10539934
> 
> 赞同：0
> 
> 时间：2012-05-10T18:17:51.060
> 
> 标签：css, httpwebrequest, media-queries

我正在尝试开发一个简单的移动网站（仅适用于 ipad 和 HTC 渴望高清）我尝试使用 css 媒体查询来更改不同屏幕尺寸的样式表，当我使用 firbug 查看请求时，我注意到每个 css 文件都有一个 http 请求。我的期望是该请求将仅针对访问的文件，有什么解决方案吗？.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T17:21:07.873

您可以在 css 文件中使用这两种媒体查询。

例如：

```
@media screen and ()...{} 
```

这样只会加载一个 css 文件，并且查询将位于不同的代码块中。

# c# - 选择 XML 元素和属性

> ID：10539937
> 
> 赞同：1
> 
> 时间：2012-05-10T18:18:03.450
> 
> 标签：c#, xml, linq, api

**我正在为 WP7 制作一个公式 1 应用程序。我使用 API 来检索信息。我设法检索了驱动程序元素的属性，但我无法检索它下面的元素。我使用了这个 API：[http ://ergast.com/api/f1/2012/drivers](http://ergast.com/api/f1/2012/drivers)**

**C＃**

```
namespace Formule1
{
public partial class DriversPage : PhoneApplicationPage
{
    const string URL = "http://ergast.com/api/f1/2012/";

    public DriversPage()
    {
        InitializeComponent();
        GetDrivers();
    }

    private void GetDrivers()
    {
        string resource = "drivers";           
        WebClient webclient = new WebClient();    
        webclient.DownloadStringCompleted += new DownloadStringCompletedEventHandler(webclient_DownloadStringCompleted);           
        webclient.DownloadStringAsync(new Uri(URL + resource));
    }

    private void webclient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Error != null)
        {
            return;
        }
        // xml-resultaat parsen
        XDocument xmlEntries = XDocument.Parse(e.Result);
        // drivers eruit halen          

        List<Driver> drivers = new List<Driver>();

        var ns = xmlEntries.Root.Name.Namespace;
        drivers = (from element in xmlEntries.Root.Element(ns + "DriverTable").Descendants(ns + "Driver")
                   select new Driver(element.Attribute("driverId").Value, element.Element("GivenName").Value)).ToList<Driver>();

            DriverListBox.ItemsSource = drivers;

    }
}
} 
```

**API**

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="http://ergast.com/schemas/mrd-1.2.xsl"?>
<MRData xmlns="http://ergast.com/mrd/1.2" series="f1"     url="http://ergast.com/api/f1/2012/drivers" limit="30" offset="0" total="24">
<DriverTable season="2012">
    <Driver driverId="alonso" url="http://en.wikipedia.org/wiki/Fernando_Alonso">
        <GivenName>Fernando</GivenName>
        <FamilyName>Alonso</FamilyName>
        <DateOfBirth>1981-07-29</DateOfBirth>
        <Nationality>Spanish</Nationality>
    </Driver>
     </DriverTable>
</MRData> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:28:57.640

您的问题是元素名称必须使用正确的命名空间进行限定。更改`.Element("GivenName")`为`.Element(ns + "GivenName")`。

# javascript - 覆盖 Javascript 中的等价比较

> ID：10539938
> 
> 赞同：47
> 
> 时间：2012-05-10T18:18:05.413
> 
> 标签：javascript, operator-overloading, qunit

是否可以覆盖 Javascript 中的等价比较？

我得到的最接近解决方案的方法是定义 valueOf 函数并在对象前面使用加号调用 valueOf。

这行得通。

```
equal(+x == +y, true); 
```

但这失败了。

```
equal(x == y, true, "why does this fail."); 
```

这是我的测试用例。

```
var Obj = function (val) {
    this.value = val;
};
Obj.prototype.toString = function () {
    return this.value;
};
Obj.prototype.valueOf = function () {
    return this.value;
};
var x = new Obj(42);
var y = new Obj(42);
var z = new Obj(10);
test("Comparing custom objects", function () {
    equal(x >= y, true);
    equal(x <= y, true);
    equal(x >= z, true);
    equal(y >= z, true);
    equal(x.toString(), y.toString());
    equal(+x == +y, true);
    equal(x == y, true, "why does this fails.");
}); 
```

在这里演示：http: [//jsfiddle.net/tWyHg/5/](http://jsfiddle.net/tWyHg/5/)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-10T18:29:28.763

那是因为`==`运算符不只比较原语，因此不调用该`valueOf()`函数。您使用的其他运算符仅适用于原语。恐怕你不能用 Javascript 实现这样的事情。有关更多详细信息，请参阅[http://www.2ality.com/2011/12/fake-operator-overloading.html 。](http://www.2ality.com/2011/12/fake-operator-overloading.html)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-10T19:07:01.193

捎带@Corkscreewe：

这是因为您正在处理对象，并且等价运算符只会比较两个变量是否引用同一个对象，而不是两个对象是否在某种程度上相等。

一种解决方案是在变量前面使用“+”并为对象定义一个 valueOf 方法。这会调用每个对象的 valueOf 方法以将其值“转换”为数字。您已经找到了这个，但可以理解的是，似乎对它不太满意。

一个更具表现力的解决方案可能是为您的对象定义一个 equals 函数。使用上面的示例：

```
Obj.prototype.equals = function (o) {
    return this.valueOf() === o.valueOf();
};

var x = new Obj(42);
var y = new Obj(42);
var z = new Obj(10);

x.equals(y); // true
x.equals(z); // false 
```

我知道这并不完全符合您的要求（重新定义等效运算符本身），但希望它能让您更接近一点。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-10T19:15:53.840

如果您正在寻找完整的对象比较，那么您可能想要使用与此类似的东西。

```
/*
    Object.equals

    Desc:       Compares an object's properties with another's, return true if the objects
                are identical.
    params:
        obj = Object for comparison
*/
Object.prototype.equals = function(obj)
{

    /*Make sure the object is of the same type as this*/
    if(typeof obj != typeof this)
        return false;

    /*Iterate through the properties of this object looking for a discrepancy between this and obj*/
    for(var property in this)
    {

        /*Return false if obj doesn't have the property or if its value doesn't match this' value*/
        if(typeof obj[property] == "undefined")
            return false;   
        if(obj[property] != this[property])
            return false;
    }

    /*Object's properties are equivalent */
    return true;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-01T18:51:28.083

您可以使用 ES6`Object.is()`函数来检查对象的属性。

```
Object.prototype.equals = function(obj)
{
    if(typeof obj != "Object")
        return false;
    for(var property in this)
    {
        if(!Object.is(obj[property], this[property]))
            return false;
    }
    return true;
} 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2020-04-01T12:15:49.590

`();`根据您的要求，添加可能会有所帮助。

```
var Obj = function (val) {
    this.value = val;
}(); 
```

# ajax - 为什么这个 jQuery Mobile 表单不能正确地 AJAX？

> ID：10539939
> 
> 赞同：0
> 
> 时间：2012-05-10T18:18:08.597
> 
> 标签：ajax, mobile, jquery-mobile, safari

我的印象是（可能是错误的？）您可以在开发过程中使用 Safari 测试 jQuery Mobile 应用程序，而不必使用移动设备。

当我

*   在 Windows 中加载 Safari，
*   在 Developer 菜单中将*User Agent*更改为*Safari iOS 4.3.3 — iPhone ，*
*   点击此网址：http: [//jquerymobile.com/test/docs/forms/forms-sample.html](http://jquerymobile.com/test/docs/forms/forms-sample.html)和
*   单击`Submit`Default **Ajax 表单示例**

它没有 AJAX。相反，它会加载一个新的 URL：

```
http://jquerymobile.com/test/docs/forms/forms-sample-response.php?shipping=Standard+shipping&submit=submit-value 
```

我的期望是错的，是我做错了，还是 jQuery Mobile 有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:44:31.250

我不认为有什么问题，我认为您只是被 jQuery Mobile 愚弄了。

看起来好像整个页面刷新正在发生，但事实并非如此。如果您在开发人员工具中查看 Network 选项卡，您可以看到 PHP 页面的 XHR 请求。

然后 jquery Mobile 正在使用它的 pushState 插件更改地址栏中的 URL：http: [//jquerymobile.com/test/docs/pages/page-navmodel.html](http://jquerymobile.com/test/docs/pages/page-navmodel.html)

一般来说，是的，您可以使用桌面浏览器进行开发，但当您转向在设备上进行测试时，请做好应对问题的准备。有时您什么也得不到，但是当前的移动浏览器中存在一些令人沮丧的错误。

# php - 如果这些行中至少有一个具有给定值，则选择具有给定 ID 的所有行

> ID：10539942
> 
> 赞同：2
> 
> 时间：2012-05-10T18:18:40.800
> 
> 标签：php, mysql, sql

我所拥有的是一个 mySQL 查询，它将选择一些饮料并返回有关该饮料的基本信息，以及该特定饮料的成分列表以及该特定饮料的评级。我有 3 桌酒水，drinks_ratings，drinks_ing

所以，我的问题是说我想获取有关含有伏特加的饮料的信息，并且在高球杯中，我将运行下面的查询......

它有效，只是我的问题是它不会返回所有成分。例如，如果我返回“randomDrinkName1”并且它恰好有伏特加和苏打水......当我得到信息时，它会忽略苏打水，因为我说 WHERE ing = voda，所以我明白为什么会发生这种情况。 ..但是我可以做一些其他类型的 WHERE 子句来检查它是否有“伏特加”并将其与所有其他可能存在的成分信息一起返回？

我知道我可以在这个查询之前做一个查询，从我的drinks_ing 表中获取包含伏特加的ID。

但这似乎是个坏主意……例如，如果有 1000 种带有伏特加的饮料只是为了对带有 1000 条 OR 语句的选择进行查询。

如果有一种方法可以让我在一个查询中轻松完成这一切，我很感兴趣。谢谢！

```
select dIngs.id,
    dIngs.name,
    dIngs.descrip,
    dIngs.type,
    dIngs.ing,
    AVG(b.rating) as arating,
    COUNT(b.id) as tvotes
from (
    select a.id,
        a.name,
        a.descrip,
        a.type,
        concat (
            '[',
            GROUP_CONCAT('{\"ing\":', c.ing, ',\"parts\":', c.parts, '}'),
            ']'
            ) ing
    from drinks a
    left join drinks_ing c on a.id = c.did
    where c.ing = "vodka"
        and a.type = "highball"
    group by a.id
    ) dIngs
left join drinks_ratings b on dIngs.id = b.id
group by dIngs.id
order by arating desc,
    tvotes desc LIMIT 0,
    50; 
```

编辑：为了说明我想要得到的结果是这样的：

```
 [0]
              descrip = "the description text will be here"
              arating = 0
              id = 4
              ing = [ {"ing": "vodka", "parts": 4}, {"ing": "soda", "parts": 2}, {"ing": "sprite", "parts": 2} ]
              name = "awesomeDrink"
              type = "highball"
              tvotes = 0 
```

但我实际上得到的只是包括伏特加，因为那是我正在检查的

```
 [0]
              descrip = "the description text will be here"
              arating = 0
              id = 4
              ing = [ {"ing": "vodka", "parts": 4} ]
              name = "awesomeDrink"
              type = "highball"
              tvotes = 0 
```

需要明确的是，如果我不提供类似的东西 `where ing = vodka`，我会把所有的成分都拿回来就好了。那不是问题....

我需要它来检查其中一种潜在成分是否恰好是伏特加，然后基本上返回所有数据……如果伏特加不是潜在成分，则忽略该饮料并且不返回它。

编辑：我的桌子是什么样子的..

```
drinks_ing
---------------
did (which is the drink id its associated with)
id (the id of the ingredient aka "vodka")
parts

drinks
---------------
id
name
description
type
timestamp

drinks_ratings
-----------------
id
userid
rating
timestamp 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T21:35:51.000

您最好的方法可能是使用自联接。这是您引用同一个表两次但名称不同的地方。大致看起来像：

```
SELECT     d.stuff
FROM       drinks d
INNER JOIN drinks v on d.id = v.id
WHERE      v.ingredient = "vodka" 
```

**更新：**使这更好地对应于有问题的表格。这就是说：给定所有伏特加成分，找出与该伏特加成分相同的饮料中的所有成分。

```
SELECT     d.*
FROM       drinks_ing d
INNER JOIN drinks_ing v on d.did = v.did
WHERE      v.ing = "vodka" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:25:27.643

是的，您可以在一个查询中完成。你的客栈

```
SELECT a.id, a.name, a.descrip, a.type, CONCAT('[', GROUP_CONCAT('{\"ing\":', c.ing, ',\"parts\":', c.parts, '}'), ']') ing
FROM drinks a LEFT JOIN drinks_ing c
     ON a.id = c.did
WHERE a.id in (select distinct a.id
                from drinks_ing c
                     ON a.id = c.did
                where c.ing = "vodka"
               ) 
```

这会找到您想要的成分的饮料并返回有关饮料的信息。

# android - Android - 为什么自动链接会忽略 URL 的根路径？

> ID：10539946
> 
> 赞同：6
> 
> 时间：2012-05-10T18:19:07.597
> 
> 标签：android, textview

我有一个带有 android:autoLink="web" 的 TextView。文本包含一些 URL。

例如：
[http ://example.com/](http://example.com/)

但是在渲染时，它会链接名称方案和域名，但会忽略根路径。

示例呈现为：
[http](http://example.com) : //example.com/

为什么它会这样做，我如何让它正确地自动链接完全限定的 URL？

编辑：此外，URL 后跟句号或逗号：
[http://example.com/](http://example.com/)，

正在呈现为：
[http://example.com/，](http://example.com/,)

请注意，StackExchange 自动链接正确（查看此问题的来源）。

编辑：山姆，这是代码：

```
 <TextView android:id="@+id/open_source"
            android:text="@string/open_source"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#FFF"
            android:paddingBottom="10dp"
            android:autoLink="web" /> 
```

一些文字：

```
<string name="open_source">Three examples, fully qualified http://isokeys.sourceforge.net/ missing root path http://isokeys.sourceforge.net and followed with a fullstop http://isokeys.sourceforge.net/.</string> 
```

应该呈现为：
三个示例，完全限定的[http://isokeys.sourceforge.net/](http://isokeys.sourceforge.net/)缺少根路径[http://isokeys.sourceforge.net](http://isokeys.sourceforge.net)并且后跟一个句号[http://isokeys.sourceforge.net/](http://isokeys.sourceforge.net/)。

呈现为：
三个示例，完全限定的[http://isokeys.sourceforge.net](http://isokeys.sourceforge.net) / 缺少根路径[http://isokeys.sourceforge.net](http://isokeys.sourceforge.net)，然后是句号[http://isokeys.sourceforge.net/。](http://isokeys.sourceforge.net/.)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:31:13.207

我只想指出两件事：
1）当您将 autoLink 设置为等于“web”时，Android 在后台使用 android.text.util 包中的工具来查找包含在您的 View 对象文本中的可操作项。默认情况下，android.text.util.Linkify 对什么是有效的 URL 和无效的 URL 有自己的看法（基于正则表达式匹配）。如果您真的想使用带有斜杠、您或逗号的 URL，您可以使用自己的正则表达式实现您自己的 MatchFilter。可以[在](http://developer.android.com/reference/android/text/util/Linkify.html#ALL)Android 开发者网站上找到文档
2) 尾部斜杠在标准 URL 中实际上没有任何意义，因为它用于指示资源层次结构中的位置，但如果斜杠后面没有任何内容，那么您不会遍历到另一个级别等级制度。附加逗号或句点不应该是有效的 URL 语法，因为这无助于在您的层次结构中定位资源，所以我假设 Android 的匹配正则表达式会忽略它，以防止您在尝试对链接执行操作时收到 MalformedURLException

# facebook - 是否可以在网页上嵌入 Facebook 提要对话框？

> ID：10539953
> 
> 赞同：0
> 
> 时间：2012-05-10T18:19:40.810
> 
> 标签：facebook, dialog, feed

我试图弄清楚是否可以在页面上嵌入 facebook 提要对话框，而不是将其弹出覆盖在页面上。

我已按照此处的说明将其弹出，但不知道是否可以将其嵌入页面中。[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:07:36.873

查看[Common Dialog Parameters](https://developers.facebook.com/docs/reference/dialogs/#display)`display`中的参数。

据此，您可以将对话框显示为页面、iframe、弹出窗口。在您的情况下，使用 iframe 可能很有用，您需要一个有效的 access_token。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T01:31:51.493

是的，我刚刚写了如何执行此操作以及在此处指定收件人的解决方法：[让用户在提要对话框中指定收件人](https://stackoverflow.com/questions/13260166/letting-user-specify-recipients-within-feed-dialog)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T01:48:15.713

不，您不能将其嵌入到页面中。

基本上它是弹出窗口或灯箱。

请参阅 Dhiraj Bodicherla 提供的链接

# c - 列出PE文件的导入DLL

> ID：10539955
> 
> 赞同：0
> 
> 时间：2012-05-10T18:19:50.160
> 
> 标签：c, winapi, dll, portable-executable

我尝试使用以下代码列出 PE 文件的导入 DLL，但它不起作用，并且 windows 说我运行它时 exe 已停止工作。在代码中，我只是使用 CreateFileMapping 函数将给定的 exe 文件映射到内存中，然后使用 Win32 API 中给出的适当结构来浏览每个部分。我该如何纠正？

```
#include <stdio.h>
#include <windows.h>

//add Pointer Values
#define MakePtr( cast, ptr, addValue ) (cast)( (unsigned long)(ptr)+(unsigned long)(addValue))

int main(int argc , char ** argv) //main method
{
HANDLE hMapObject, hFile;//File Mapping Object
LPVOID lpBase;//Pointer to the base memory of mapped 

PIMAGE_DOS_HEADER dosHeader;//Pointer to DOS Header
PIMAGE_NT_HEADERS ntHeader;//Pointer to NT Header
PIMAGE_IMPORT_DESCRIPTOR importDesc;//Pointer to import descriptor

hFile = CreateFile(argv[1],GENERIC_READ,FILE_SHARE_READ,NULL,OPEN_EXISTING,FILE_ATTRIBUTE_NORMAL,NULL);//Open the Exe File
if(hFile == INVALID_HANDLE_VALUE){
         printf("\nERROR : Could not open the file specified\n");
}
hMapObject = CreateFileMapping(hFile,NULL,PAGE_READONLY,0,0,NULL);
lpBase = MapViewOfFile(hMapObject,FILE_MAP_READ,0,0,0);//Mapping Given EXE file to Memory

dosHeader = (PIMAGE_DOS_HEADER)lpBase;//Get the DOS Header Base
//verify dos header
if ( dosHeader->e_magic == IMAGE_DOS_SIGNATURE)
{

    ntHeader = MakePtr(PIMAGE_NT_HEADERS, dosHeader, dosHeader->e_lfanew);//Get the NT Header
            //verify NT header
    if (ntHeader->Signature == IMAGE_NT_SIGNATURE ){
        importDesc = MakePtr(PIMAGE_IMPORT_DESCRIPTOR, dosHeader,ntHeader->OptionalHeader.DataDirectory[IMAGE_DIRECTORY_ENTRY_IMPORT].VirtualAddress);

        while (importDesc->Name)
        {
            printf("%s\n",MakePtr(char*, dosHeader,importDesc->Name));
            importDesc++;               
        }

    }
}

getchar();

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T20:42:33.613

您要查找的列表的内容包含在一个部分中（就像 PE 图像中的几乎所有内容一样）。您必须访问目录指向的部分。查看 Matt Pietrek ( [PeDump](http://www.wheaty.net/downloads.htm) ) 的代码，了解它是如何工作的。

# c - HTTP POST，如何获取消息体（数据）

> ID：10539956
> 
> 赞同：2
> 
> 时间：2012-05-10T18:19:50.690
> 
> 标签：c, http, post

我正在使用嵌入式 Web 服务器。我想收到一个 POST 但不知道如何访问消息正文（数据）。标题是固定大小的吗？通常如何访问邮件正文？

用 C 编程。

编辑：

我相信答案是标题字段和数据之间有一个空行（CRLF）。如果有人想确认这一点，将不胜感激。将很快对此进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:54:51.623

标题末尾有一个空行（CR+LF+CR+LF）。您可能需要阅读格式规范（在 Internet 上搜索例如 HTTP RFC）；有几个 HTTP 版本，因此您最终需要确切知道格式是什么。

# mysql - 如何在 JPA 中创建这个本机查询？

> ID：10539957
> 
> 赞同：1
> 
> 时间：2012-05-10T18:19:52.097
> 
> 标签：mysql, jpa, jpa-2.0

我在 MySQL 中有这个查询：

```
SELECT genre 
FROM genre g, person_genre pg, rfid rfid, room room 
WHERE 
    pg.id_genre = g.id and 
    pg.id_person = rfid.id_person and 
    rfid.id = room.id_rfid 
GROUP BY 
    g.genre
HAVING COUNT(*) > 1; 
```

> 输出：布鲁斯，摇滚

这在 mysql 查询浏览器中工作得很好，所以我试图在我的 jsf 2 和 jpa 中使用这个相同的查询，所以我这样做了：

```
public List<String> getListAverageGenres(){
        return em.createNativeQuery("SELECT genre " +
                                    "FROM genre g, person_genre pg, rfid rfid, room room " +
                                    "WHERE " +
                                        "pg.id_genre = g.id and " +
                                        "pg.id_person = rfid.id_person and " +
                                        "rfid.id = room.id_rfid " +
                                    "GROUP BY " +
                                        "g.genre " +
                                    "HAVING COUNT(*) > 1").getResultList();
    } 
```

> 输出：蓝调，摇滚，蓝调，摇滚，蓝调，摇滚

我不知道为什么它不止一次调用同一个查询。我认为是因为它是本机查询，所以我正在尝试构建一个 jpa 查询并查看它是否有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:53:11.583

你可以试试

```
SELECT DISTINCT genre 
```

# php - PHP字符序列检查功能

> ID：10539958
> 
> 赞同：2
> 
> 时间：2012-05-10T18:19:52.603
> 
> 标签：php

我将如何压缩这个 php 方法以减少代码但仍然具有可读性和功能性？你会在这段代码中改变什么？

```
public function charCount($string, $max, $min) {

    $stringCount = strlen($string);

    if(isset($max) || isset($min)) {
        //Testing Max Chars
        if($stringCount > $max) {
            return 'String length: ' . $stringCount . "<br />
                    Max Chars: " . $max . "<br />
                    Error: To Long";

        }
        else if($stringCount < $min) {
            return 'String length: ' . $stringCount . "<br />
                        Min Chars: " . $max . "<br />
                        Error: To Short";
        }
        else {
            return true;
        }
    }

    else {
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T18:34:23.160

首先，我会选择返回布尔值**或**字符串，但不能同时返回两者，原因是有一个同质接口。

但是`false`可以在出错的情况下使用。

我会去做这样的事情：

```
function charCount($string, $min = null, $max = null) {
    $length = strlen($string);

    $result = false;

    if ($max && $length > $max) {
        $result = sprintf('String length: <br />Max Chars: <br />Error: To Long', $length, $max);
    }

    if ($min && $length < $min) {
        $result = sprintf('String length: <br />Min Chars: <br />Error: To Short', $length, $min);
    }

    return $result;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T18:24:38.343

```
public function charCount($string, $max = false, $min = false) {

    $stringCount = strlen($string);

    if($max!==false && $stringCount > $max){
        return 'String length: ' . $stringCount . "<br />Max Chars: " . $max . "<br />Error: To Long";
    }

    if($min!==false && $stringCount < $min){
        return 'String length: ' . $stringCount . "<br />Min Chars: " . $min . "<br />Error: To Short";
    }

    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T18:25:21.290

```
public function charCount($string, $max, $min) {

$stringCount = strlen($string);

if(isset($max) || isset($min)) {
    $return_value = '';
    //Testing Max Chars
    if($stringCount > $max) {
        $return_value = 'String length: ' . $stringCount . "<br />
                Max Chars: " . $max . "<br />
                Error: Too Long";

    }
    else if($stringCount < $min) {
        $return_value = 'String length: ' . $stringCount . "<br />
                    Min Chars: " . $min . "<br />
                    Error: Too Short";
    }
    return $return_value;
}
return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T18:25:39.997

我会这样写：

```
public function charCount($string, $max = false, $min = false) {

    $stringCount = strlen($string);

    if (false !== $max && $stringCount > $max) {
        //Testing Max Chars
        return 'String length: ' . $stringCount . "<br />
                Max Chars: " . $max . "<br />
                Error: To Long";
    } else if (false !== $min && $stringCount < $min) {
        return 'String length: ' . $stringCount . "<br />
                    Min Chars: " . $max . "<br />
                    Error: To Short";
    } else {
        return true;
    }
} 
```

除此之外我觉得还不错。*除非性能确实*是一个问题，否则可读性应始终优先于任何事情。在这种情况下，简化 if-else 条件有助于提高可读性，顺便也减少了行数，但我认为后者并不重要。此外，默认值。

# perl - 有没有办法将 Mojolicious::Controller 与 MojoX::JSON::RPC::Service 结合起来？

> ID：10539960
> 
> 赞同：1
> 
> 时间：2012-05-10T18:19:54.150
> 
> 标签：perl, mojolicious

我正在使用 zabbix 并编写一个与 zabbix api 交互的界面。由于 zabbix 公开了一个 jsonrpc 接口，我决定使用 MojoX::JSON::RPC::Service。我遇到的问题是我现在面临与使用 Mojolicious::Controllers 编写的其他服务交互，他们期望 Mojolicious::Controller 对象。使用 MojoX::JSON::RPC::Service 时没有可用的 Mojolicious::Controller 对象。

```
my $obj = $rpc_obj->register(
               'retrieve',
               sub {
                    # do stuff
               },
               { with_mojo_tx => 1 }
); 
```

这注册了一条名为“检索”的路线。当访问路由并运行匿名子例程时，子例程只能访问 Mojo::Transaction::HTTP 对象。

因此，我无法访问该应用程序来使用插件以及 Mojolicious 提供的存储和其他东西。有没有办法将 Mojolicious::Controller 与 MojoX::JSON::RPC::Service 结合起来？

我可以重写它以使用 Mojolicious::Controller 但如果可能的话我会尽量避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T20:34:16.517

您应该考虑使用[MojoX::JSON::RPC::Dispatcher](http://search.cpan.org/~henryykt/MojoX-JSON-RPC-0.03-2/lib/MojoX/JSON/RPC/Dispatcher.pm)，因为它继承了[Mojolicious::Controller的所有属性](http://search.cpan.org/~sri/Mojolicious-2.94/lib/Mojolicious/Controller.pm)

**概要：**

```
# lib/your-application.pm

use base 'Mojolicious';
use MojoX::JSON::RPC::Service;

sub startup {
    my $self = shift;
    my $svc = MojoX::JSON::RPC::Service->new;

    $svc->register(
        'sum',
        sub {
            my @params = @_;
            my $sum = 0;
            $sum += $_ for @params;
            return $sum;
        }
    );

    $self->plugin(
        'json_rpc_dispatcher',
        services => {
           '/jsonrpc' => $svc
        }
    );
} 
```

* * *

[更新] **钩子示例：**

```
package Application;
use Mojo::Base 'Mojolicious';
use Application::Firewall;

# This method will run once at server start
sub startup {
    my $app = shift;

    # Routes
    my $r = $app->routes;

    # Validation Middleware
    $app->hook(
        before_dispatch => sub {
            my $self = shift;
            my $data = $self->req->params->to_hash;
            my $vald = Application::Firewall->new($data);

            # mojolicious bug at the time of coding
            delete $data->{""} if defined $data->{""};

            $app->{input} = {};

            if ( keys %{$data} ) {

                # validation the submitted data
                unless ( $vald->validate( keys %{$data} ) ) {
                    $self->render(
                        text   => join( "", @{ $vald->errors } ),
                        status => 500
                    );
                    return 0;
                }

                # Helper (optional)
                # create a helper to get access to the transformed data
                # if your validation rules had/has filters
                # Note! due to a bug in the params function we must do this
                # (... i know, so what)
                $app->{input} = {
                    map { $_ => $vald->{fields}->{$_}->{value} }
                      keys %{ $vald->{fields} }
                };

            }

            return 1;
        }
    );

    # Normal route to controller * with auto-matic input validation *
    $r->route('/')->to(
        cb => sub {
            my $self = shift;
            $self->render(
                text => 'Hello ' . ( $app->{input}->{foobar} || 'World' ),
                status => 200
            );
        }
    );
}

1; 
```

# ruby - 是否可以强制失败救援声明？

> ID：10539965
> 
> 赞同：0
> 
> 时间：2012-05-10T18:20:18.553
> 
> 标签：ruby

我在几个不同的属性中循环寻找未设置的东西`""`

为此，我写道：

```
def email
  begin
    if email1 != ""
      email1 
    elsif email2 != ""
      email2
    elsif email3 != ""
      email3
    else
      Fail
    end
  rescue
    "Undefined"
  end
end 
```

基本上，如果它在第一条语句上的逻辑失败，我希望它能够获救。

也许救援不是正确的决定。你会推荐什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T18:23:29.793

如果你想`rescue`发生，你需要提出一个例外 -

```
def email
  begin
    raise StandardError if email1.empty?
  rescue StandardError
    # do something
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T19:23:04.650

首先，`def`是一个隐含的`begin`，所以你可以保存自己。但是，根据您有限的描述，我认为这应该适合您：

```
[email1, email2, email3].reject(&:empty?).first || "undefined" 
```

它要么返回第一个设置的电子邮件地址，要么返回“未定义”。我的版本读起来更像你描述问题的方式（获取第一个设置的电子邮件地址或返回“未定义”），mu 的版本更紧凑，可能是我会使用的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T19:00:28.467

> 也许救援不是正确的决定。你会推荐什么？

你是对的，`rescue`不是正确的决定；例外是针对例外情况，而不是针对本地流量控制。我会使用[`find`](https://ruby-doc.org/core/Enumerable.html#method-i-find)：

```
def email
  [email1, email2, email3, 'Undefined'].find { |s| !s.empty? } # or != '' if nils might be present
end 
```

或者，如果存在 Rails（或其中的一部分），您可以这样说：

```
def email
  [email1, email2, email3, 'Undefined'].find(&:present?)
end 
```

# php - 将表单中的 _POST 数据动态插入 MYSQL

> ID：10539966
> 
> 赞同：1
> 
> 时间：2012-05-10T18:20:19.473
> 
> 标签：php, mysql

我有一个包含 100 多个动态命名字段的表单，该表单发布到一个 php 文件，我想获取发布到当前 php 文件的所有字段：

```
Array ( [option_page] => plugin_options 
[action] => update 
[_wpnonce] => a51bfc281a 
[_wp_http_referer] =>/wp-admin/options-general.php page=plug.php 
[13939069] => 
[2171] => 
[3600645] =>
[2168] => 
[13937024] => 
[submit] => Save Changes 
[__qca] => P0-1887521465-1334258158937 
[s_vi] => ) 
```

从这里我想将数据插入到 mysql 表中，格式如下：

```
id      | option_name     | value
--------------------------------------------
autonum | post data key   | post data value 
```

但问题是我只对 [_wp_http_referer] 之后但 [submit] 之前的发布数据值感兴趣，因此这些可以用作参考点。

我纠结的部分是：

*   我如何才能动态地获取帖子数据的那一部分？
*   如何获取所需的数组键并将其动态插入到表中？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T19:21:12.623

你试试这个

```
$start = array_search("_wp_http_referer",array_keys($_POST))+1;
$end = array_search("submit",array_keys($_POST))-1;
$newArr=array_slice($_POST, $start, $end);
foreach($newArr as $k=>$v)
{
    // $k is the key name and $v is the value of that key
    //echo $k."=".$v."<br />";  
    $val=mysql_real_escape_string($v);
    $sql="INSERT INTO table_name VALUES (null, ".$k.", ".$val.")";
    mysql_query($sql);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:29:45.673

```
$counter = 0;

foreach($_POST as $key=>$value)
{

if($key == "_wp_http_referer")
{
$counter = 1;
}

if($counter == "1")
{
if($key != "submit")
{
mysql_query("INSERT INTO table_name(id, option_name, value) VALUES ('','".mysql_real_escape_string($key)."','".mysql_real_escape_string($value)."')");
}
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T18:59:31.650

你可以这样做：

```
$discard_array = array('option_page', 'action', '_wpnonce', '_wp_http_referer', 'submit', '__qca', 's_vi');
$good_array = array();
foreach ($_POST as $key => $val)
{
    if (!in_array($key, $discard_array)) $good_array[$key] = $val;
}

// use $good_array to insert your data into db
print_r($good_array); 
```

或者，如果所有的“好”值总是有数字键，这里有一个简化的变体：

```
$good_array = array();
foreach ($_POST as $key => $val)
{
    if (is_numeric($key)) $good_array[$key] = $val;
}
print_r($good_array); 
```

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T19:11:58.710

您想要的键似乎都是数字，因此您只能存储它们。像我之前的其他人一样，我也建议使用 PDO 来增加安全性和便利性。

```
$dbh = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass); 
foreach($_POST as $key => $value) {
    if(preg_match("/^[0-9]+$/", $key) {
        $stmt = $dbh->prepare('INSERT INTO table_name(option_name, value) VALUES (?, ?)');
        $stmt->execute(array($key, $value));
    }
} 
```

# java - 移动矩阵中的元素

> ID：10539969
> 
> 赞同：-3
> 
> 时间：2012-05-10T18:20:33.180
> 
> 标签：java, arrays, multidimensional-array

例如我有一个矩阵：

```
 0 1 2 3 4 
[0 X X X X X ]
[1 X X N X X ]
[2 X X X X X ]
[3 X X X X X ]
[4 X X X X X ] 
```

我需要将值“N”向左、向右、向上或向下移动。“N”当前位置是 1 2\. 例如我有一个运动：U 表示向上。我应该如何将值“N”移动到位置 0 2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:29:23.490

如果您将其存储在多维数组中，则为二维。只需找到 N 所在的当前索引插入 X 并根据您的操作将 N 插入 +1 或 -1 索引内。清除控制台并重新显示矩阵。

# android - 以编程方式更改 ActionBarSherlock 的背景颜色

> ID：10539971
> 
> 赞同：6
> 
> 时间：2012-05-10T18:20:37.133
> 
> 标签：android, android-widget, android-actionbar

我的表单上有一个 ActionBarSherlock。我在运行时读取样式信息。其中一个样式是 ActionBar 的背景颜色。如何在运行时更改它？颜色可以是任何 RGB 值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T10:14:32.063

也许这有帮助：[如何在 ActionBarSherlock 中设置标题颜色？](https://stackoverflow.com/questions/10352022/how-to-set-title-color-in-sherlock-actionbar)通过样式或以 `getSupportActionBar().setBackgroundDrawable(getResources().getDrawable(R.drawable.ad_action_bar_gradient_bak));`编程方式

**随着主题**

```
// add theme in app
<application android:theme="@style/MainTheme"></application>

// MainTheme
<style name="MainTheme" parent="Theme.Sherlock.Light.DarkActionBar">       
</style>

// MainThemeGreen
<style name="MainThemeGreen" parent="Theme.Sherlock.Light.DarkActionBar">
    <item name="android:actionBarStyle">@style/MainTheme.ActionBarStyle</item>        
</style>

// ActionBar
<style name="MainTheme.ActionBarStyle" parent="Widget.Sherlock.Light.ActionBar">
    <item name="android:background">@drawable/bg_green_actionbar</item>
    <item name="android:titleTextStyle">@style/MainTheme.ActionBar.TitleTextStyle</item>
</style>

// Text style
<style name="MainTheme.ActionBar.TitleTextStyle" parent="TextAppearance.Sherlock.Widget.ActionBar.Title">
    <item name="android:textColor">@color/White</item>
</style>

// bg_green_actionbar.xml
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item>
        <shape>
            <solid android:color="#ff74af3b" />
        </shape>
    </item>
</layer-list> 
```

在此之后，您可以即时更改主题： setTheme(R.styles.MainThemeGreen);

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T23:01:11.850

单程：

```
mSupportActionBar = getSupportActionBar();
mSupportActionBar.setBackgroundDrawable(new ColorDrawable(0xff123456)); 
```

`0xff123456`您需要的 ARGB 整数在哪里。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-14T14:16:43.580

我只是在下面使用了代码

```
 getSupportActionBar().setBackgroundDrawable(new 
   ColorDrawable(Color.parseColor("#00853c"))); 
```

它改变了背景颜色。希望能帮助到你。

# c++ - std:: 指针列表和 remove_if

> ID：10539972
> 
> 赞同：1
> 
> 时间：2012-05-10T18:20:40.067
> 
> 标签：c++, stl

我正在使用 std::list 指针进行一些测试。我正在使用 remove_if 算法来消除列表中的一些元素。但是我遇到了一些问题，remove_if 正在造成内存泄漏，因为它不会破坏指针（我认为）。

我找到了一个解决方案，但我不知道它是否制作精良、正确或至少可以接受......

这是代码：

```
#include <algorithm>
#include <iostream>
#include <list>

using namespace std;

class Object
{
 private:
         int intData;   
 public:
        Object(int n) : intData(n) { };
        int getIntData(void) { return intData; };
        void setIntData(int n) { intData = n; };
};

/** Functor */
struct listFunctor
{ 
 bool operator()(Object* obj1, Object* obj2) const
 {
  return (obj1->getIntData() < obj2->getIntData());
 }
};

class removeFunctor
{
 private:
         int remover;
 public:
        removeFunctor(int n) : remover(n) { };
        bool operator()(Object* obj)
        {
         bool res = (obj->getIntData() != remover);

         if(res)
          delete obj;

         return res; 
        }
};

typedef list<Object*> objList;
typedef list<Object*>::iterator objectListIter;

int main(int argc, char** argv)
{
 objList objectList;

 objectList.push_back(new Object(8));
 objectList.push_back(new Object(0));
 objectList.push_back(new Object(2));

 /** sort elements. */
 objectList.sort(listFunctor());

 /** print. */
 for(objectListIter it = objectList.begin(); it != objectList.end(); ++it)
  cout<<*it<<"  "<<(*it)->getIntData()<<'\n';   

 /** remove. */
 objectListIter iter = remove_if(objectList.begin(), objectList.end(), removeFunctor(8));

 /** print. */
 for(objectListIter it = objectList.begin(); it != iter; ++it)
  cout<<*it<<"  "<<(*it)->getIntData()<<'\n';   

 /** delete list. */
 for(objectListIter it = objectList.begin(); it != iter; ++it)
  delete *it;   

 objectList.clear(); //IS THIS NECESSARY?

 return 0;
} 
```

该程序首先创建列表，对其进行排序，然后删除一些元素。

这段代码是解决这个问题的好方法吗？Valgrind 的默认扫描没有报告任何问题，但我正在做更多的测试。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T18:24:31.510

从 a`list<Object*>`中删除只会从列表中删除指针。您应该更喜欢 a`list<unique_ptr<Object>>`或 a`list<shared_ptr<Object>>`当智能指针从列表中删除时，它将自动删除指向的对象。

# c# - smtpclient 不适用于 Exchange 服务器，但适用于 smtp 服务器

> ID：10539976
> 
> 赞同：2
> 
> 时间：2012-05-10T18:20:51.830
> 
> 标签：c#, .net, smtp

我写了一个非常基本的类来发送电子邮件。我用 smtp 服务器对其进行了测试，它工作正常，但是当我尝试使用我公司的交换服务器时，它给出了这个异常：

SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应为：5.7.1 客户端未通过身份验证

我的代码如下：

```
MailMessage mailMessage = new MailMessage("From@company.com", "To@company.com", "Test Subject", "Void body");
SmtpClient smtpClient = new SmtpClient(smtpServerAddress, smtpServerPort);
NetworkCredential credentials = new NetworkCredential(AccountName,Password);
smtpClient.UseDefaultCredentials = false;
smtpClient.Credentials = credentials;
smtpClient.EnableSsl = true;
smtpClient.DeliveryMethod = SmtpDeliveryMethod.Network;
ServicePointManager.ServerCertificateValidationCallback = delegate(object s, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors) { return true; }; // without this I get: The remote certificate is invalid according to the validation procedure.
smtpClient.Send(mailMessage); 
```

我需要以不同于 smtp 服务器的方式处理交换服务器吗？

请指教 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T18:26:31.820

您是否使用了正确的端口号？

> **协议：SMTP/SSL**
> 
> •端口（TCP/UDP）：465（TCP）
> 
> •描述：基于 SSL 的 SMTP。TCP 端口 465 由行业惯例保留，用于使用 SSL 协议的安全 SMTP 通信。但是，与 IMAP4、POP3、NNTP 和 HTTP 不同，Exchange 2000 中的 SMTP 不使用单独的端口进行安全通信 (SSL)，而是使用称为传输层安全 (TLS) 的“带内安全子系统” . 要使 TLS 在 Exchange 2000 上工作，您必须在 Exchange 2000 服务器上安装计算机证书。

从这里撕下来：[http ://www.petri.co.il/ports_used_by_exchange.htm](http://www.petri.co.il/ports_used_by_exchange.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:47:49.663

我刚遇到这个问题。在您的 Exchange 服务器上，进入 Exchange 系统管理器并打开服务器的对象树，然后打开协议，然后右键单击默认 SMTP 虚拟服务器并选择属性。单击访问选项卡，然后单击身份验证按钮。最后单击用户并确保您使用的用户有权访问 SMTP 中继。此外，如果您还没有这样做，请选择 SMTP 下的中继按钮，并确保运行该应用程序的机器没有被列入黑名单，或者已被授予权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T18:32:17.357

我发现这篇关于使用交换发送电子邮件的帖子。看来他正在使用 Microsoft.Exchange.WebServices 命名空间。我没有交换来测试。只是提出想法。

[http://waqarsherbhatti.posterous.com/sending-email-using-exchange-server-2010-ews](http://waqarsherbhatti.posterous.com/sending-email-using-exchange-server-2010-ews)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T19:02:23.677

您可能想尝试使用 WebDAV 发送。如果您想尝试一下，这是我的方法..

```
 public static void ViaWebDav(String sMailbox, String sExchange, String sTo, String sCc, String sSubject, String sBody, params String[] sAttachments)
    {
        HttpWebRequest hwrOut;
        HttpWebResponse hwrIn;

        //String strServer = "SXGM-202.xxx.com";
        //string strPassword = "123";
        //string strUserID = "u";
        //string strDomain = "fg";

        Byte[] b = null;
        Stream s = null;

        String sMailboxUrl = "http://" + sExchange + "/exchange/" + sMailbox;

        String sMailboxSend = sMailboxUrl + "/##DavMailSubmissionURI##/";

        String sMailboxTemp = sMailboxUrl + "/drafts/" + sSubject + ".eml";

        // Construct the RFC 822 formatted body of the PUT request.
        // Note: If the From: header is included here,
        // the MOVE method request will return a
        // 403 (Forbidden) status. The From address will
        // be generated by the Exchange server.
        StringBuilder sb = new StringBuilder();
        sb.AppendLine("To: " + sTo);
        if (!sCc.IsEmpty()) sb.AppendLine("Cc: " + sCc);
        sb.AppendLine("Subject: " + sSubject);
        sb.AppendLine("Date: " + System.DateTime.Now);
        sb.AppendLine("X-Mailer: AML FIU;");
        sb.AppendLine("MIME-Version: 1.0;");
        sb.AppendLine("Content-Type: text/plain;");
        sb.AppendLine("Charset = \"iso-8859-1\"");
        sb.AppendLine("Content-Transfer-Encoding: 7bit;");
        sb.AppendLine();
        sb.AppendLine(sBody);

        // Create a new CredentialCache object and fill it with the network
        // credentials required to access the server.
        //MyCredentialCache = new CredentialCache();
        //MyCredentialCache.Add(new System.Uri(strMailboxURI),
        //    "NTLM",
        //    new NetworkCredential(strUserID, strPassword, strDomain)
        //   );

        // Create the HttpWebRequest object.
        hwrOut = (HttpWebRequest)HttpWebRequest.Create(sMailboxTemp);
        hwrOut.Credentials = CredentialCache.DefaultCredentials;
        hwrOut.Method = "PUT";
        hwrOut.ContentType = "message/rfc822";

        // Encode the body using UTF-8.
        b = Encoding.UTF8.GetBytes(sb.ToString());

        hwrOut.ContentLength = b.Length;

        s = hwrOut.GetRequestStream();
        s.Write(b, 0, b.Length);
        s.Close();

        // PUT the message in the Drafts folder of the mailbox.
        hwrIn = (HttpWebResponse)hwrOut.GetResponse();

        #region //ATTACHMENTS
        //Do the PROPPATCH
        sb = new StringBuilder();
        sb.Append("<?xml version='1.0'?>");
        sb.Append("<d:propertyupdate xmlns:d='DAV:'>");
        sb.Append("<d:set>");
        sb.Append("<d:prop>");
        sb.Append("<isCollection xmlns='DAV:'>False</isCollection>");
        sb.Append("</d:prop>");
        sb.Append("</d:set>");
        sb.Append("</d:propertyupdate>");

        foreach (String sAttach in sAttachments)
        {
            hwrOut = (HttpWebRequest)HttpWebRequest.Create(sMailboxTemp);
            hwrOut.Credentials = CredentialCache.DefaultCredentials;
            hwrOut.Method = "PROPPATCH";
            hwrOut.ContentType = "text/xml";
            hwrOut.Headers.Set("Translate", "f");

            b = Encoding.UTF8.GetBytes(sb.ToString());

            hwrOut.ContentLength = b.Length;

            s = hwrOut.GetRequestStream();
            s.Write(b, 0, b.Length);
            s.Close();

            hwrIn = (HttpWebResponse)hwrOut.GetResponse();

            hwrOut = (HttpWebRequest)HttpWebRequest.Create(sMailboxTemp + "/" + Path.GetFileName(sAttach));
            hwrOut.Credentials = CredentialCache.DefaultCredentials;
            hwrOut.Method = "PUT";

            using (FileStream fs = new FileStream(sAttach, FileMode.Open, FileAccess.Read))
            {
                b = new Byte[fs.Length];

                fs.Read(b, 0, (Int32)fs.Length);
            }

            hwrOut.ContentLength = b.Length;

            s = hwrOut.GetRequestStream();
            s.Write(b, 0, b.Length);
            s.Close();

            hwrIn = (HttpWebResponse)hwrOut.GetResponse();
        }
        #endregion

        // Create the HttpWebRequest object.
        hwrOut = (HttpWebRequest)HttpWebRequest.Create(sMailboxTemp);
        hwrOut.Credentials = CredentialCache.DefaultCredentials;
        hwrOut.Method = "MOVE";
        hwrOut.Headers.Add("Destination", sMailboxSend);

        hwrIn = (HttpWebResponse)hwrOut.GetResponse();

        // Clean up.
        hwrIn.Close();
    } 
```

# ruby-on-rails - Ajax 在页面上添加和更新内容

> ID：10539977
> 
> 赞同：0
> 
> 时间：2012-05-10T18:20:58.907
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery

在我的 rails 3 应用程序中实现 Ajax 请求是我做过的最令人沮丧的事情之一。在浪费了几天尝试在线遵循人们的指示之后，似乎对我有用的唯一方法是 ajax 删除。

我网站的用户有一个个人资料页面，其中包含顶部的一些信息，然后他们有几个不同的简历，每个简历都包含在页面上的一个选项卡中。每份简历中都有教育，这是我希望能够动态添加和更新的内容。即用户有_many简历，每份简历有_many教育。我将每个简历呈现在一个 id 等于它的 id 的 div 中。这是我希望在提交表单时使用 ajax 重新加载的 div。这是一个小代码。
用户/节目：

```
...
<%= render partial: 'shared/resume' %>
... 
```

共享/恢复：

```
<% if @resumes.any? %>
  <div class="tab-content" id="tabResumes">
     <%= render partial: 'shared/resume_item', collection: @resumes %>
  </div>
  <%= will_paginate @resumes %>
<% end %> 
```

共享/resume_item：

```
<div class="tab-pane" id="<%= resume_item.id %>">
 ...
 # here I render a few different partials which display the different elements of the resume, such as educations. 
 # I'd like to reload this area on form submission.
 ...
</div> 
```

教育控制器：

```
def create
@resume = Resume.find(params[:resume_id])
@education  = @resume.educations.build(params[:education])
respond_to do |format|
 if @education.save
  format.html  { redirect_to(@student, :notice => 'Education created.') }
  format.js
 else
  format.html {render :action => "new" }
  format.js
  end
 end
end 
```

意见/教育/create.js.erb

```
$('#<%=@resume.id%>').html("<%= escape_javascript()%>"); //not sure what to call here, nothing I've tried has given me any success. 
```

我也想让更新刷新同一个 div，但我想先让 create 工作。有人对如何使这项工作有任何建议吗？正如我得到的那样，ajax 提交似乎正在通过

```
Rendered educations/create.js.erb
Completed 200 OK in 52ms 
```

在控制台中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:28:35.143

试着让你`create.js.erb`的路线：

```
$('#<%= @resume.id %>').replaceWith("<%= escape_javascript render(:file => 'shared/resume_item.html.erb') %>"); 
```

或者，您也可以使用[jquery .appendTo 方法](http://api.jquery.com/append/)而不是[replaceWith](http://api.jquery.com/replaceWith/)，但是，在这种情况下，我认为`replaceWith`效果更好。

# java - 使用“DynaArray”时出现语法错误 “在Java中？

> ID：10539982
> 
> 赞同：0
> 
> 时间：2012-05-10T18:21:08.533
> 
> 标签：java, generics

我正在尝试编写我自己的 C++ STL 向量版本<> 我希望它能够创建一个动态增长和收缩的列表...我希望拥有 push_back、push_front、pop_back、pop_front、remove、removeAt、clear 和大小......我写了所有这些几乎没有问题并且没有得到任何构建错误或警告，当我尝试实例化类时 Eclipse 告诉我它在令牌之后寻找维度......所以它认为我发送的任何类型都想要成为该类型的数组，例如...

```
 DynaArray<int> Bob; 
```

这里它需要 int 之后的 [] 运算符。

这是我的班级目前的样子

```
 public class DynaArray<T>
{       
    int Size = 0;
    int CurrentCount = 0;
    int LastSpot = 0;
    T[] Array;

    DynaArray(int _size)
    {
        Size = _size;
    }

    @SuppressWarnings("unchecked")
    void push_back(T _element)
    {
        CurrentCount++;
        if(CurrentCount > Size)
        {
            //make a new array for double the size;
            if( Size == 0 )
            {
                Size = 2;
                Array = (T[]) new Object[Size];
            }
            else
            {
                int OldSize = Size;
                Size = Size*2;
                T[] TempArray;
                TempArray = (T[]) new Object[Size];
                int i = 0;
                for( ; i < OldSize; i++ )
                {
                    //Copy over info from Array to TempArray
                    TempArray[i] = Array[i];
                }
                Array = TempArray;
            }
        }

        //Now add the new element onto the array
        Array[LastSpot] = _element;
        LastSpot++;     

    }

    @SuppressWarnings("unchecked")
    void push_front(T _element)
    {
        CurrentCount++;
        if( Size == 0)
        {
            Size = 2;
            Array = (T[]) new Object[Size];
            Array[0] = _element;
            return;
        }
        else
        {
            int OldSize = Size;
            Size = Size+1;
            T[] TempArray;
            TempArray = (T[]) new Object[Size];
            int i = 1;
            for( ; i < OldSize; i++ )
            {
                //Copy over info from Array to TempArray
                TempArray[i] = Array[i-1];              
                Array = TempArray;
                Array[0] = _element;
            }           
    }

    }

    T pop_back()
    {
        if( CurrentCount <= 0)
            return null;
        else
        {
            return Array[CurrentCount-1];
        }

    }

    T pop_front()
    {
        if( CurrentCount <= 0)
            return null;
        else
        {
            return Array[0];
        }
    }

    int size()
    {
        return CurrentCount;
    }

    @SuppressWarnings("unchecked")
    void clear()
    {
        Size = 0;
        CurrentCount = 0;
        LastSpot = 0;
        Array = (T[]) new Object[2];

    }

    @SuppressWarnings("unchecked")
    void removeAt(int index)
    {
        T[] TempArray = (T[]) new Object[Size];
        int ArrayIndex = 0;
        for( int i = 0; i < CurrentCount; i++)
        {
            if( i == index )
                continue;

            TempArray[ArrayIndex] = Array[i];
            ArrayIndex++;

        }
    }

    void remove(T _element)
    {
        for(int i = 0; i < CurrentCount; i++)
        {
            //look for the element
            if( Array[i] == _element)
                removeAt(i);
        }
    }

} 
```

感谢您提供的任何帮助，或者如果我的代码以某种方式对您有所帮助，欢迎您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:22:52.297

`int`是原语，因此[不能与 Java 泛型一起使用](http://docs.oracle.com/javase/tutorial/java/generics/gentypes.html)。这样做的原因是为了[保持字节码的向后兼容性](https://stackoverflow.com/questions/2721546/why-dont-generics-support-primitive-types)（这在首次引入泛型时很重要）。您必须使用 an[`Integer`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html)代替。

**注意**，除非您将此作为学术练习，否则您可以/应该只使用 a[`List<T>`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)而不是自定义实现的课程。

或者：使用[Trove。](http://trove.starlight-systems.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:23:08.453

您不能将 Java 原语用作泛型类型，因为它们[不是 Object 的实例](https://stackoverflow.com/questions/2721546/why-dont-generics-support-primitive-types)。之所以`int[]`有效，是因为 Java 数组是一个对象。改用盒装的`Integer`。

# authentication - 在 chrome 中进行 facebook 身份验证后，Jquery 移动页面不会加载

> ID：10539983
> 
> 赞同：0
> 
> 时间：2012-05-10T18:21:13.040
> 
> 标签：authentication, google-chrome, jquery-mobile

我遇到了 chrome 和 jquery mobile 之间的奇怪交互。申请流程很简单：

*   主页/登录屏幕。“登录”链接是这样的`data-ajax="false"`，`rel="external"`所以所有花哨的 JQM AJAX 东西都被禁用了。
*   一系列 302 的 oauth 舞蹈，结束于`/auth/facebook/callback`
*   `/auth/facebook/callback`302 到真实页面`/home`，这是一个非常简单的 Jquery-mobile 页面

在 Chrome 和 Firefox 上，jquery 移动 'ajax-loading' 微调器永远显示，实际页面加载到 DOM 中但不显示。在 Safari（桌面版或移动版）上，页面可以正常显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:09:32.467

问题来自 Facebook。当从 oauth 返回时，它们会`#_=_`在您的回调 URL 中添加一个 URL 片段，这会使 JQM 感到困惑。就像 FB 的典型情况一样，这被[记录](https://developers.facebook.com/blog/post/552/)为蓄意而无正当理由，但关于如何处理它的说明含糊/不正确。[这个 SO question](https://stackoverflow.com/questions/7131909/facebook-callback-appends-to-return-url)中的一堆讨论。我发现的最佳解决方法是在 JQM 有机会混淆之前将此代码插入页面顶部：

```
<script>
    // workaround Facebook oauth feature-bug
    if (window.location.hash == '#_=_') window.location.hash = '';
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:50:51.717

据我所知，AJAX 请求不能很好地处理重定向（关于这个主题有很多 SO 问题）。

与其在 JavaScript 中进行身份验证，不如使用服务器端实现？对于用户的浏览器来说，它会更快、更简单。

# delphi - 如何编写一个小程序？

> ID：10539993
> 
> 赞同：0
> 
> 时间：2012-05-10T18:21:52.017
> 
> 标签：delphi, filesize

我想编程高效并保持我的 FileSize 非常小。但是我想知道一些技巧如何做到这一点。

例如，对于较小的 FileSize，什么更好：

任何一个：

```
if .... = '1' then begin
 ...
end; 
```

或者：

```
if ..... = inttostr(1) then begin
...
end; 
```

或者：

```
if .... = inttostr($0001) then begin
...
end; 
```

或者：

```
case of intvar
  1: ...
  2: ...
end; 
```

然后有一些我尝试过的东西，我很惊讶。我在我的项目中创建了另一个单元，将字符串存储为常量，然后我使用常量变量来替换我的项目中的字符串。出于某种原因，这提高了我的 FileSize，尽管我现在将双重使用的字符串替换为 var。

另外，将内容存储在 vars 中比将它们直接放入代码中更好吗？！例如：

```
Function1(param1, param2, param3); // this code is used about 20 times in my project 
```

或者如果我更好：

```
Avar = Function1 (param1,param2,param3); // Store this once in a var and then replace it 
```

那么：

```
if ... = TRUE 
```

或者：

```
if .... 
```

如同：

```
if .... = FALSE 
```

或者：

```
if not(...)... 
```

对于较小的 FileSize 进行高效编程的任何其他技巧？

提前致谢。

我用德尔福7

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T19:39:32.270

很抱歉直言不讳，但你是本末倒置。

如果您真的想知道如何在不知道给定示例中的代码变化会导致什么差异的情况下使可执行文件更小，那么您应该立即停下来阅读/学习/练习，直到您对语言和编译器有了更多了解.

然后你就会明白你的问题本身没有什么意义，正如你已经从你得到的所有相关评论中看到的那样。

*   完全相同的源代码可能会产生截然不同的可执行文件，而不同的源代码可能会产生相同的可执行文件，具体取决于编译器选项/优化
*   如果您的主要目标是对生成的 exe 进行微观管理/控制，请直接在汇编程序中编程。
*   如果您想知道编译器生成了什么，请学习如何使用 CPU View。
*   首先是正确性的程序，然后是可读性/可维护性
*   只有这样，如果需要（意味着使用正确的指标/工具），您可以优化速度、内存使用或文件大小（可能是最不有用/最不需要的）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T20:34:58.733

很久以前，我试图使程序尽可能小，因为它必须适合软盘（是的，我知道我是恐龙）。这个 Splitter 工具是用 Delphi 编写的，大小约为 50KB。

为了让它这么小，有必要不使用很多 Delphi 的单元（尤其是`Forms`单元和所有引用它的单元）。唯一的方法是直接将 Windows-API 用于 GUI，我现在想不出这样做的理由，但出于兴趣。

一旦你使用 VCL，exe 的大小就会增长得比你代码中的所有微优化一起减少它的大小要大得多。

# java - 使用在 wsimport JAX-WS 中创建的 web 服务

> ID：10539994
> 
> 赞同：0
> 
> 时间：2012-05-10T18:21:52.627
> 
> 标签：java, web-services, jax-ws

这是一个非常基本的问题，但我在任何地方都看不到答案。我使用 wsimport 和 wsdl 创建了一个 web 服务。

它创建了大量的文件。它们中的大多数似乎是代表 Web 服务方法的 bean。还有称为 Gateway、Gateway SOAP 和 ObjectFactory 的类。您究竟是如何使用这些方法实际调用 Web 服务的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:28:56.983

你应该这样做：

```
Gateway svc = new Gateway();
GatewaySOAP port = svc.getGatewaySOAP();
MyRequestClass rq = new MyRequestClass();
rq.setSomething(2);
MyResponseClass rs = port.doMyVeryOwnJob(rq);
System.out.println("Result is: " + rs.getSomethingElse()); 
```

# android - 使用自定义适配器从 ListView 中删除项目

> ID：10539996
> 
> 赞同：4
> 
> 时间：2012-05-10T18:21:57.787
> 
> 标签：android, android-listview, customization, adapter

我有一个自定义`ListView`和适配器。我可以从我的自定义列表中设置的列表中删除一个项目，但我可以从`ListView`. 当我尝试调用`adapter.remove(position)`编辑器时说“创建一个方法`"remove(int position)""`。我不知道当我在适配器中创建这个方法时应该做什么。代码：

**填写我的列表视图：**

```
lv = (ListView) findViewById(R.id.list);
        LayoutInflater mLInflater = getLayoutInflater();
        final ListViewAdapter adapter = new ListViewAdapter(
                getApplicationContext(), kimdenlist, konulist,
                mLInflater);
        lv.setAdapter(adapter); 
```

**列表视图适配器：**

```
public class ListViewAdapter extends BaseAdapter {
    static HashMap<Integer, Boolean> cartItems = new HashMap<Integer, Boolean>();
    Context mContext;
    ArrayList<String> kimdenlist; // to load images
    ArrayList<String> konulist; // for data
    LayoutInflater mLayoutInflater;

    public ListViewAdapter(Context context, ArrayList<String> kimdenlist, ArrayList<String> konulist,
            LayoutInflater layoutInflater) {
        mContext = context;
        this.kimdenlist = kimdenlist;
        this.konulist = konulist;
        mLayoutInflater = layoutInflater;
    }

    @Override
    public int getCount() 
    {

        return kimdenlist.size(); // images array length
    }

    @Override
    public Object getItem(int arg0) {

        return null;
    }

    @Override
    public long getItemId(int arg0) {

        return 0;
    }

    int count = 0;

    // customized Listview
    @Override
    public View getView(int position, View arg1, ViewGroup arg2) {

        View v;
        final int pos = position;
        v = mLayoutInflater.inflate(R.layout.listust, null);

        TextView kimden = (TextView) v.findViewById(R.id.textvKimden);
        kimden.setText(kimdenlist.get(position));
        TextView konu = (TextView) v.findViewById(R.id.textvKonu);
        konu.setText(konulist.get(position));
        CheckBox ch = (CheckBox) v.findViewById(R.id.chk);
        try {
            if (count != 0) {
                boolean b = cartItems.get(pos);
                if (b == false)
                    ch.setChecked(false);
                else
                    ch.setChecked(true);
            }
        } catch (NullPointerException e) {

        }

        ch.setOnCheckedChangeListener(new OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton arg0, boolean arg1) {
                cartItems.put(pos, arg1);
                count++;

            }
        });
        return v;
    }

    public static HashMap<Integer, Boolean> getcartItems() {
        return cartItems;
    }

} 
```

**当我点击“delete_Button”时：我只能从列表中删除：**

```
konulist.remove(konulist.get(position));;
kimdenlist.remove(kimdenlist.get(position)); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T18:46:14.090

这是因为您的 listViewAdapter 没有删除方法！您扩展 BaseAdapter 并且它没有删除方法。您应该在 listviewAdapter 中创建 remove 方法，它看起来像

```
public void remove(int position){
    konulist.remove(konulist.get(position));;
    kimdenlist.remove(kimdenlist.get(position));
} 
```

您必须了解列表视图和适配器的工作原理。适配器保存列表视图的数据。将要创建列表行时调用适配器方法 getView。列表大小由适配器的 getCount() 等返回的值计算...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-13T04:38:39.447

要从 ListView 但不在适配器类中删除项目：

```
lv.removeViewAt(index);
adapter.notifyDataSetChanged(); 
```

其中 "index" 指定 ListView 中包含要删除的项目的位置或索引。

要从 ListView INSIDE ADAPTER CLASS 中删除一个项目：首先，您需要为列表中的每个项目添加一个标签。在列表中的内容项中使用一些布局来分配该标签。这可以在方法 getView() 中完成。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    row = convertView;

    if(row == null){
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        row = inflater.inflate(R.layout.item_lista_lugares_visitar, parent, false);
        holder = new ViewHolder();

        // ... DO WHAT YOU NEED HERE
        holder.linearLayoutContainer = (LinearLayout) row.findViewById(R.id.ll_container);
        // Set the position as a Tag for the view
        holder.linearLayoutContainer.setTag(position);

    } else {
        holder = (ViewHolder) row.getTag();
    }

    // ... DO WHAT YOU NEED HERE

    return row;
}

// Method for remove an item of ListView inside adapter class
// you need to pass as an argument the tag you added to the layout of your choice
public void removeView(Object position) {
      // lv and the adapter must be public-static in their Activity Class
      SomeActivity.lv.removeViewAt(Integer.parteInt(position).toString());
      SomeActivity.adapter.notifyDataSetChanged();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-23T01:48:55.150

在你的代码之后

`konulist.remove(konulist.get(position)); kimdenlist.remove(kimdenlist.get(position));`

您可以调用该方法：

`notifyDataSetChanged();`

# windows - 使用移动模拟器/设备浏览 UNC 路径

> ID：10539999
> 
> 赞同：1
> 
> 时间：2012-05-10T18:22:09.257
> 
> 标签：windows, windows-mobile

什么会导致模拟器无法查看网络 UNC 共享？当试图通过“打开路径”或 Internet Explorer 打开网络上的任何计算机时，我被抛出“找不到网络路径”。然后是“找不到网络资源或您没有访问网络的权限”。注意事项：

*   连接到 IP 地址不起作用。

*   我可以通过模拟器浏览互联网。

*   ActiveSync 已正确配置，我已为适配器安装了所需的驱动程序，并且模拟器已安装好。

*   防火墙禁用/设置正确转发。

*   网络文件夹权限设置正确。

令我感到奇怪的是，我还尝试在物理 Windows Mobile 5 设备上浏览 UNC 共享，但遇到了同样的问题。这使我相信我们的网络设置中的某些原因导致了这种情况，但我不确定从哪里开始。人们建议检查 ActiveDirectory 安全策略，但哪些策略会影响 UNC 共享？这已经变成了一个相当严重的问题，因为在我能够解决这个问题之前，我无法完成设置合并复制。有没有人经历过这个并成功解决了这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:06:51.127

您的网络正在寻找身份验证。

我在我的工作场所也得到了这个。

只要您的网络密钥输入正确，您应该可以再尝试浏览同一路径 2 或 3 次，仍然会遇到同样令人讨厌的问题（*“找不到网络路径。”然后是“找不到网络资源”或者您没有访问网络的权限。”*）消息。

在这些时候，一个登录框应该出现在您输入用户名、密码和域的位置。

此时您还可以保存密码，这样每次您尝试通过网络访问某些内容时都不会提示您输入密码。

现在这是真正的废话：保存用户名/密码组合后，Windows Mobile 设备中似乎没有任何机制可以在密码在您的网络上过期后更改该密码。也永远不会再次提示您更改该密码。由于您的密码不正确，您只会收到上面那些愚蠢的消息之一。

唯一的解决方案似乎是重置设备。我已经向微软提出了一个问题大约 3 年了，它已经从一个论坛传递到另一个论坛。我终于决定一定不能这样做，但微软从未回信告诉我。