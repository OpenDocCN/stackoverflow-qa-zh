# StackOverflow 问答 000897000-000897999

# netbeans6.5 - 我可以创建一个登录屏幕来检查数据库表中的密码和用户名吗

> ID：897002
> 
> 赞同：2
> 
> 时间：2009-05-22T09:10:47.880
> 
> 标签：netbeans6.5

有没有人有登录屏幕的代码，可以注册一个新用户，也可以登录存在于数据库表中的用户？我非常感谢任何形式的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T09:13:22.150

这个问题有一个众所周知的解决方案：

[http://platform.netbeans.org/tutorials/60/nbm-login.html](http://platform.netbeans.org/tutorials/60/nbm-login.html)

# apache-flex - 从 swf 文件中提取资产？

> ID：897013
> 
> 赞同：1
> 
> 时间：2009-05-22T09:13:58.903
> 
> 标签：apache-flex, actionscript-3, flash, symbols

在为小游戏构建 Flex 框架时，我计划将一堆图形资源（电影剪辑符号）捆绑到一个 swf 文件中，然后我将其加载到我的 Flex 应用程序中，然后从 swf 文件中提取符号以用于我的应用。我的问题是：我如何通过 actionscript 做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T11:14:49.177

如果您不想使用 EMBED 并且不想在运行时加载资产，我建议您将 swf 导出为 SWC。

这样，您可以从 actionscript 浏览 SWC 文件。您可以在编译时检查是否存在另一个影片剪辑中的子影片剪辑。

如果您使用的是 flex 编译器，请记住在编译时添加：

```
-library-path C:\path\to\your\file.swc 
```

如果您使用 FDT，您可以选择自动添加 SWC 作为参数。

这是一个关于如何使用 FDT[的演示。](http://fdt.powerflasher.com/fileadmin/features_swf/swc.htm)不确定您使用的是哪个工具。如果是商业 Flex Builder，过程应该类似。

我想这就是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T11:05:37.213

我会尝试创建一个资产/图标库 AS 文件。

类似的东西

```
package 
{

public class IconLibrary
{

    /*
    *  Framework Icons
    */

    [Embed (source="../assets/fof_graphics.swf", symbol="clapperboard_icon")]
    public static const clapperBoardIcon:Class;
    [Embed (source="../assets/fof_graphics.swf", symbol="clapperboard_over_icon")]
    public static const clapperBoardOverIcon:Class;
    [Embed (source="../assets/fof_graphics.swf", symbol="close_button")]
    public static const closeButton:Class;
    [Embed (source="../assets/fof_graphics.swf", symbol="close_over")]
    public static const closeOverButton:Class;

    public function IconLibrary()
    {
    }

  }

} 
```

那么你需要做的就是

```
source="{IconLibrary.clapperBoardIcon}" 
```

或您希望显示的任何资产名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T15:58:35.937

这里有很多很好的解决方案，如果您在运行时加载 swf 并想要提取资产，则可以在加载器完整事件侦听器中执行以下操作：

```
var c:Class = Class(LoaderInfo(e.target).applicationDomain.getDefinition("myClassDefinitionName")); 
```

这会将 swf 中的资产存储为 Class 对象，因此您可以像这样创建它的实例：

```
var asset:MovieClip = new c(); 
```

# maven-2 - 跨项目分组 Maven 依赖项

> ID：897017
> 
> 赞同：1
> 
> 时间：2009-05-22T09:15:29.073
> 
> 标签：maven-2, dependencies, module

我有一个多模块项目，其中有各种组件遵循相当标准的布局。例如：

```
      根（pom）
          ...
          模块-NN (pom)
             模块-NN-launcher (jar)
             模块-NN-运行时 (jar)
          ...

```

（有很多module-NN项目的地方）

每个 *-launcher 项目都使用专有 API 来启动提供通用 API 的框架。然后将 *-runtime 项目加载到此框架中以“做事”。

按照目前的情况，我在每个 *-launcher/pom.xml 中定义了启动器的依赖项。同样，我在 *-runtime/pom.xml 中有通用 API 引用。我可以将项目结构更新为：

```
    根（pom）
        启动器（pom）
            ...
            模块-NN-launcher (jar)
            ...
        运行时（pom）
            ...
            模块-NN-运行时 (jar)
            ...
        应用程序（pom）
            ...
            模块-NN (pom)
            ...

```

并将相关依赖项放在启动器/运行时 pom.xml 文件中，但这会使项目的布局不那么直观。

有没有人遇到过这种问题？在不重复类似项目的细节的情况下，您可以提供什么建议来制作有意义的布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-22T15:42:50.257

我做过大约 90% 类似的事情。

考虑创建一个名为“runtime-common”的项目。在该 pom.xml 中，添加所有运行时通用的运行时依赖项。

在 module-NN-runtime 的 pom.xml 中，添加这个

```
 <parent>
      <groupId>FOO</groupId>
      <artifactId>runtime-common</artifactId>
      <version>1.0.0</version>
  </parent> 
```

您添加到 runtime-common 的任何内容都将添加到 runtime-common 的子项目中。这不会影响根项目构建所有模块的能力。

你最终会得到这样的东西：

```
ROOT (POM)
  Launcher-COMMON (POM)
    ...
  Launcher-1 (Jar)
    ...
  Runtime-COMMON (POM)
  Runtime-1  (Jar)
    ...    
  Runtime-2  (Jar)
    ... 
```

如果您不想在项目中保留启动器和运行时公用，则实际上不需要在其中保留。在这种情况下，做这样的事情

```
ROOT (POM)
  COMMON (POM)
    Runtime-COMMON (POM)
        ...    
    Launcher-COMMON (POM)
        ...    
  Launcher-1 (Jar)
    ...    
  Runtime-1  (Jar)
    ...    
  Runtime-2  (Jar)
    ... 
```

# python - 在数据库查询字符串中转义引号的好方法？

> ID：897020
> 
> 赞同：41
> 
> 时间：2009-05-22T09:16:28.807
> 
> 标签：python, database, escaping, sql-injection

我尝试了各种 Python 模块，但它们要么逃逸太多，要么以错误的方式逃逸。您发现在 Python 中转义引号 (", ') 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-05-22T09:30:32.320

如果它是数据库查询的一部分，您应该能够使用[Parameterized SQL Statement](https://web.archive.org/web/20100813151305/http://python.projects.postgresql.org/docs/0.8/driver.html)。

除了转义引号外，这还将处理所有特殊字符并保护您免受[SQL 注入攻击](https://stackoverflow.com/questions/681583/sql-injection-on-insert)。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-02-18T06:25:16.757

使用`json.dumps`.

```
>>> import json
>>> print json.dumps('a"bc')
"a\"bc" 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-12-03T03:27:26.260

转义字符串并将其他对象转换为编程形式的简单且标准的方法是使用内置`repr()`函数。它将对象转换为您需要使用手动代码输入的表示形式。

例如：

```
s = "I'm happy I am \"here\" now"
print repr(s)
>>  'I\'m happy I am "here" now' 
```

没有奇怪的黑客，它是内置的，它只适用于大多数目的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-01-30T23:51:12.750

三重单引号将方便地封装 SQL 查询中经常使用的单引号：

```
c.execute('''SELECT sval FROM sdat WHERE instime > NOW() - INTERVAL '1 days' ORDER BY instime ASC''') 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-06-18T12:36:48.570

如果使用 psycopg2，它的`execute()`方法有内置的转义：

```
cursor.execute("SELECT column FROM table WHERE column=%s AND column2=%s", (value1, value2)) 
```

请注意，您为执行方法（字符串和元组）提供了两个参数，而不是使用 Python 的 % 运算符来修改字符串。

从这里偷来的答案：[psycopg2 相当于 mysqldb.escape_string？](https://stackoverflow.com/questions/3823735/psycopg2-equivalent-of-mysqldb-escape-string)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-03-11T22:40:43.247

如果您使用的 psycopg2 具有转义字符串的方法：**`psycopg2.extensions.adapt()`**请参阅[如何显式引用字符串值 (Python DB API/Psycopg2)](https://stackoverflow.com/questions/309945/how-to-quote-a-string-value-explicitly-python-db-api-psycopg2)以获得完整答案

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-01-27T01:44:37.263

三双引号最适合转义：

```
string = """这将跨越“单引号”、“双引号”、
和文字 EOL 都在同一个字符串中。"""
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-03-11T22:28:36.653

对于更通用的问题的解决方案，我有一个程序，我需要将*任何*字符集存储在一个平面文件中，制表符分隔。显然，在“集合”中有标签会导致问题。

我使用了 output_f.write(repr(str)) 而不是 output_f.write(str)，这解决了我的问题。阅读速度较慢，因为我在阅读时需要 eval() 输入，但总的来说，它使代码更清晰，因为我不再需要检查边缘情况。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-05-16T00:51:43.417

对于我的用例，我在数据库中保存了一个段落，在该段落的某个地方可能有一些带有单引号的文本`(example: Charlie's apple sauce was soggy)`

我发现这个效果最好：

```
database_cursor.execute('''INSERT INTO books.collection (book_name, book_quoted_text) VALUES ('%s', "%s")''' % (book_name, page_text.strip())) 
```

您会注意到我`""`在将 INSERT 语句包装后使用`'''`

# django - 使用 ImageWithThumbnailsField (django sorl) 分配图像

> ID：897022
> 
> 赞同：2
> 
> 时间：2009-05-22T09:16:51.003
> 
> 标签：django, sorl-thumbnail

我正在使用 sorl 的 ImageWithThumbnailsField 来处理我的项目中的图像，没有任何问题。现在我想使用 PIL 从我的文本中生成图像，在某些情况下，用户不会上传照片。我很难弄清楚代码是什么，所以任何帮助都将不胜感激！

步骤 1\. 当用户不上传照片时，使用 PIL 创建一张（完成）

步骤 2\. 将创建的照片指定为 ImageWithThumbnailsField（您的帮助在此处）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-05T05:22:54.450

如果没有您当前正在做什么的例子，很难说，但这是我认为应该起作用的。

1.  确保将 PIL 创建的照片保存到模型上 ImageWithThumbnailsField 的“upload_to”参数中指定的位置。
2.  使用以下内容更新相关模型实例：

```
 # retrieve the Model instance however your app requires
    m = YourModel.objects.get(pk=1)

    # retrieve the upload_to path from the Field definition
    upload_to = m.img_with_thumb.field.upload_to

    # update field with location of the new image
    # img_filename should be whatever PIL created in step 1
    m.img_with_thumb = os.path.join(upload_to, img_filename)

    # save the model
    m.save() 
```

我从来没有用 sorl 试过这个，但它适用于普通的 Django ImageField。

# javascript - jQuery返回ID以某个字符串开头的元素

> ID：897025
> 
> 赞同：23
> 
> 时间：2009-05-22T09:17:22.110
> 
> 标签：javascript, jquery, jquery-validate

我有很多`<span>`这样的标签`<span id='val_Title'></span> <span id='val_Name'></span>`

我想返回所有以 'val_' 开头的元素并隐藏它们。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2009-05-22T09:20:21.793

使用[属性](http://docs.jquery.com/Selectors/attributeStartsWith#attributevalue)选择器

```
$(document).ready(function(){
   $("span[id^='val_']").hide();
}); 
```

# c - 我想用 libcurl 存储字符串的结果

> ID：897027
> 
> 赞同：2
> 
> 时间：2009-05-22T09:17:43.983
> 
> 标签：c, libcurl

我用 libcurl 编写了一个程序。

```
#include <stdio.h>
#include <string.h>
#include <curl/curl.h>

#define URL_MAX 256

int main(int argc, char *args[])
{
    CURL *curl;
    CURLcode res;
        curl_global_init(CURL_GLOBAL_DEFAULT);
    curl = curl_easy_init();
    curl_easy_setopt(curl, CURLOPT_URL, args[1]);
    curl_easy_perform(curl);
    curl_easy_cleanup(curl);

    return 0;
} 
```

$ gcc tinyCurl.c $ gcc `curl-config --libs`tinyCurl.c $ ./a.out [http://example.com/](http://example.com/) 我用谷歌搜索，但我找不到。我想存储 char[] 而不是标准输出。

是初学者的问题提前谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T09:33:06.527

查看`curl_easy_setopt()`功能。

您可能希望使用注册回调`CURLOPT_WRITEFUNCTION`- 每当收到数据时都会调用此回调。在回调中，您可以对数据做任何您想做的事情。

注意 - 这对初学者来说有点棘手。您需要了解什么是函数指针。

（此答案基于阅读[http://curl.haxx.se/libcurl/c/curl_easy_setopt.html](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html)中的 API - 我从未使用过 libcurl）。

**编辑**-
这是`CURLOPT_WRITEFUNCTION`在[curl-library 邮件列表](http://marc.info/?l=curl-library&m=100204184522546&w=2)中通过谷歌搜索找到的示例。这个例子是 Daniel Stenberg 的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-22T13:19:29.547

我得到它 ！

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>

#include <curl/curl.h>
#include <curl/types.h>
#include <curl/easy.h>

size_t  write_data(void *ptr, size_t size, size_t nmemb, FILE *stream)
{
  char buf[size*nmemb+1];
  char * pbuf = &buf[0];
  memset(buf, '\0', size*nmemb+1);
  size_t i = 0;
  for(;  i < nmemb ; i++){
    strncpy(pbuf,ptr,size);
    pbuf += size;
    ptr += size;
  }
  printf("%s",buf);
  return size * nmemb;
}

int main(int argc, char **argv)
{
    CURL *curl_handle;
    curl_handle = curl_easy_init();
    enum{Command,URL,NumCommands};
    if(NumCommands != argc){
        fprintf(stderr,"Usage : %s <url>\n",argv[0]);
        return 1;
    }
    curl_easy_setopt(curl_handle,   CURLOPT_URL, argv[URL]);
    curl_easy_setopt(curl_handle,   CURLOPT_NOPROGRESS  ,1);
    curl_easy_setopt(curl_handle,   CURLOPT_WRITEFUNCTION,&write_data);
    curl_easy_perform(curl_handle);
    curl_easy_cleanup(curl_handle);
    return 0;
} 
```

谢谢海克斯康。

# mysql - MySQL：使用 SELECT...INSERT INTO 与 UNIQUE 约束重复输入错误

> ID：897032
> 
> 赞同：1
> 
> 时间：2009-05-22T09:18:57.210
> 
> 标签：mysql, select, insert, duplicates

我有下表：

```
CREATE TABLE `products_quantity` (
  `id` int(11) NOT NULL auto_increment,
  `product_id` varchar(100) NOT NULL,
  `stock_id` int(11) NOT NULL,
  `quantity` int(11) NOT NULL,
  PRIMARY KEY  (`id`),
  UNIQUE KEY `product_id` (`product_id`,`stock_id`),
  KEY `products_quantity_product_id` (`product_id`),
  KEY `products_quantity_stock_id` (`stock_id`)
) ENGINE=MyISAM 
```

product_id 是另一个表的外键，stock_id 也是。

该表目前有 10 000 多行，所有行都具有相同的 stock_id (1)。我想要做的是将其所有行复制两次，两次都使用新的 stock_id（2 和 3），以及“数量”的随机值。

这是SQL：

```
INSERT INTO `products_quantity` (product_id, stock_id, quantity)
    SELECT product_id, 2 AS stock_id, FLOOR(-1 + (RAND() * 15)) AS random_quantity FROM products_quantity; 
```

这很好用。它使用另一个 stock_id 创建 10 000 多个新行，因此尽管每行的 product_id 已经存在，但不会违反唯一性约束。

此时表中的行示例，按 product_id 排序（一个 VARCHAR，丑陋但必要），请原谅格式：

```
22      0032705090062   1   1
10783   0032705090062   2   13
21      0032705090345   1   6
10784   0032705090345   2   0
... 
```

这是每个 product_id 两次，每个 stock_id 一次。现在，如果我想以类似的方式创建第三只股票，使用与上次完全相同的查询但替换为“3 AS stock_id”，我会在第一个产品行中收到此错误：

“密钥 2 的重复条目 '0032705090062-3'”

虽然 product_id 0032705090062 和 stock_id 3 的组合与 stock_id 1 和 2 的组合一样唯一，但据说突然违反了唯一性约束，不是吗？

有趣的是，创建了单行，所以有一个新行：

```
21563    0032705090062  3   5 
```

...但这是我试图插入的 10 000 多个中唯一的一个。

我在这里想念什么？为什么第一个 SELECT...INSERT INTO 有效，而第二个无效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T09:28:55.537

您从要插入的同一张表中进行选择，所以第一次抓取

```
22      0032705090062   1       1
21      0032705090345   1       6 
```

然后插入

```
10783   0032705090062   2       13
10784   0032705090345   2       0 
```

但是，当您再次运行它时，它将：

```
GET     22      0032705090062   1       1
INSERT  21563   0032705090062   3       5
GET     10783   0032705090062   2       13
INSERT          0032705090062   3   <-- oops, already exists 
```

您只需要添加`WHERE stock_id = 1`到您的 SELECT

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T09:30:48.323

简单的：

```
INSERT INTO `products_quantity` (product_id, stock_id, quantity)
    SELECT 
      product_id, 
      3 AS stock_id, 
      FLOOR(-1 + (RAND() * 15)) AS random_quantity 
    FROM 
      products_quantity;
    WHERE
      stock_id = 1  /* !!!!! */ 
```

您的第二次插入失败，因为现在有 20.000 行（不是 10.000，就像您想的那样）。添加 where 子句可确保仅插入 10.000。

# php - PHP:SVN 有多成熟

> ID：897033
> 
> 赞同：5
> 
> 时间：2009-05-22T09:19:03.247
> 
> 标签：php, svn

我正在考虑使用[PHP:SVN](http://uk.php.net/svn)来管理生产网站上的 svn 存储库。目前 svn 命令是在命令行上构建和执行的，这感觉像是一个重大的安全漏洞。

PHP:SVN 的优点是不直接执行任何命令并允许我废弃大量代码。

我的问题是该模块有多成熟，是否可以在生产站点上使用？大多数关于它的页面都带有警告“此功能是实验性的，可能会改变”。但这仅在升级 PHP 版本时才有意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T09:21:33.337

原始的PECL包在[这里](http://pecl.php.net/package/svn)，它应该让你感觉它有多成熟。这里是这个包当前打开的错误列表[。](http://pecl.php.net/bugs/search.php?cmd=display&status=Open&package_name[]=svn)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-22T09:37:03.680

*实验*应该带着一粒盐。有几个 PHP 扩展被标记为这样，它们非常稳定。也就是说，我不知道这个特定包的状态是什么。

您可能想要编写一个包装器，以便您可以在使用当前方法和使用扩展之间切换。

# c# - 在 Dictionary 上使用 LINQ Where 子句时，如何返回相同类型的字典？

> ID：897038
> 
> 赞同：7
> 
> 时间：2009-05-22T09:21:13.477
> 
> 标签：c#, linq, optimization

我目前正在使用以下代码来实现这一点，但似乎应该有更好的东西......建议？在我看来，应该有一种方法可以跳过 foreach ......

```
Dictionary<string,string> getValidIds(Dictionary<string,string> SalesPersons,List<string> ids)
{
    Dictionary<string,string> o = new Dictionary<string,string>();
    var ie = SalesPersons.Where<KeyValuePair<string, string>>(t => ids.Contains(t.Key));
    foreach (var i in ie)
    {
        o.Add(i.Key, i.Value);
    }
    return o;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-22T09:26:14.310

很确定您可以根据 Where 调用的结果调用 ToDictionary：

```
Dictionary<string, string> GetValidIds(Dictionary<string, string> salesPersons,
    IList<string> ids)
{
    return salesPersons
        .Where(p => ids.Contains(p.Key))
        .ToDictionary(p => p.Key, p => p.Value);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-22T09:49:33.433

有趣的是，如果您首先枚举字典（长度 N）*并*检查列表（长度 M）是否包含，那么您将获得 O(NM) 性能。

您可以构建一个`HashSet<>`id，但这似乎是多余的，因为我们已经有一个（预散列的）字典可用。

相反，我会先遍历 id；由于字典查找（按键）是 O(1)，这提供了 O(M) 性能 - 然而，这可能意味着您不使用 LINQ（因为`TryGetValue`不会喜欢 LINQ（并且引入元组太像辛苦了）...

```
 Dictionary<string, string> getValidIds(
            IDictionary<string, string> salesPersons,
            IEnumerable<string> ids) {
        var result = new Dictionary<string, string>();
        string value;
        foreach (string key in ids) {
            if (salesPersons.TryGetValue(key, out value)) {
                result.Add(key, value);
            }
        }
        return result;
    } 
```

我并不担心这比 LINQ 版本多行；它消除了 O(N) 的复杂性...

* * *

编辑; 以下*可能*有效（我还没有测试过），但我认为这是对 LINQ 的滥用，并且肯定不会扩展到 PLINQ 等......请谨慎使用！我也相信这种`foreach`方法的开销更少，所以会更快......无论如何：

```
 Dictionary<string, string> getValidIds(
        IDictionary<string, string> salesPersons,
        IEnumerable<string> ids)
    {
        string value = null;
        return  (from key in ids
                where salesPersons.TryGetValue(key, out value) // HACK: v. dodgy
                select new { key, value })
                .ToDictionary(x=>x.key, x=>x.value);
    } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-22T14:02:06.373

似乎对在列表中查找内容大惊小怪。如果列表只包含几个元素，那么没什么大不了的。如果 List 包含数千个元素，您将需要 O(1) 对其进行查找。HashSet 可以提供这个。

```
Dictionary<string, string> getValidIds(
  Dictionary<string, string> SalesPersons,
  List<string> ids
)
{
  HashSet<string> idsFast = new HashSet<string>(ids);
  Dictionary<string, string> result = SalesPersons
    .Where(kvp => idsFast.Contains(kvp.Key))
    .ToDictionary(kvp => kvp.Key, kvp => kvp.Value)
  return result;
} 
```

# jquery - JQuery 日期选择器无法正确显示

> ID：897039
> 
> 赞同：1
> 
> 时间：2009-05-22T09:21:22.040
> 
> 标签：jquery, jquery-ui

我最近从 JQuery 1.2 迁移到 JQuery 1.3。但是，DatePicker UI 给了我一个问题。我在 JQuery 对话框中有一个文本字段。日期选择器附加到此字段。当我单击该字段时，日期选择器会弹出但在对话框后面，它几乎挡住了整个 DatePicker。此外，DatePicker 不会显示在文本字段旁边，而是显示在其下方。我能做些什么来正确定位日期选择器吗？

编辑：这是我对日期选择器的声明：

```
$("#date").datepicker(
    {
        dateFormat: 'DD, d MM yy',
        minDate: 0,
        showOn: 'button',
        buttonText: "Choose a date",
        buttonImage: '/images/calendar.png',
        buttonImageOnly: true,
        hideIfNoPrevNext: true
    }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T09:43:54.537

请更新到最新的 JQuery Build。Afaik 这是最近构建中的一个错误。

# c# - IE 中的 Windows 窗体控件不响应 JavaScript 调用

> ID：897042
> 
> 赞同：0
> 
> 时间：2009-05-22T09:22:21.180
> 
> 标签：c#, javascript, windows, internet-explorer, forms

我有一个 Windows 窗体控件包装在 DLL 中并在 Object 标记中部署到 IE 的问题。该对象应返回一个字符串，Javascript 会将其放入一个隐藏字段中，准备好发回服务器。这是我多次使用过的方法，但我现在从 Javascript 中收到可怕的“对象不支持此方法或属性”错误消息。我已将其缩小到对返回字符串的函数的调用。

我已经消除的东西：

1.  函数调用的拼写错误
2.  被调用的函数是一个公共函数
3.  权限错误 - 都在本地主机、受信任的站点等上运行

可能相关的事情：

1.  该 dll 包含几个在控件中使用的类
2.  控件是自定义的，但使用各种 windows 窗体控件
3.  基本流程是控件（允许用户输入多页图纸）构建一个对象，该对象被序列化并输出为 base 64 字符串。javascript 调用输出函数并将（压缩的）字符串放入隐藏控件中。提交表单并将字符串回传到服务器进行处理。

如果有人可以提供帮助，我将不胜感激。

```
<body>
<script language="javascript" type="text/javascript">
    function GetValues(){
        alert(document.draw1.ReturnSerialisedObjectString());
        return true;
    }
</script>

<input type="hidden" id="hdnData" runat="server" />
<input type="button" onclick="javascript:return GetValues();" value="Click Me" />

<br /><br />

<object id="draw1" classid="SlainteCustomControls.dll#SlainteCustomControls.FreeFormControl" width="482" height="579" viewastext /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-22T09:27:42.137

尝试：-

```
alert(document.getElementById('draw1').ReturnSerialisedObjectString()); 
```

# jquery - 如何使用 jQuery Slider 旋转（度）图像？

> ID：897049
> 
> 赞同：3
> 
> 时间：2009-05-22T09:25:22.343
> 
> 标签：jquery

我想知道当 jQuery 滑块值改变时如何旋转图像。例如，图像的程度将根据从左（0）到右（360）滑块的变化动态变化。我不知道如何将滑块值传递给 jQuery 的 rotate() 函数。请帮我。谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T09:31:11.443

```
$(document).ready(function() {
    $('.selector').slider({
        slide: function(event, ui) {
             $('.image').rotate(ui.value);
        }
    });
}); 
```

查看[幻灯片事件](http://docs.jquery.com/UI/Slider#events)。

# asp.net-mvc - 从 HTMLHelper 生成 Javascript 代码和 HTML 标签是一种不好的做法吗？

> ID：897051
> 
> 赞同：1
> 
> 时间：2009-05-22T09:26:23.153
> 
> 标签：asp.net-mvc

也许这是一个愚蠢的问题，但我已经看到很多 Tuts 从 HTML 帮助扩展方法（如创建 Jquery 菜单或树）构建 JavaScript ode 和 HTML 标记，它看起来非常整洁，节省了视图中的混乱并鼓励可重用性。

但我想知道因为这段代码是在服务器端生成的，它会比直接在视图中编写代码慢吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T09:31:14.300

不它不是。甚至 MVC 框架也有执行此操作的 HTML Helper(s)。为什么会这样？

# java - 在 Mac 上运行时如何在 X11 上显示 java swing

> ID：897054
> 
> 赞同：4
> 
> 时间：2009-05-22T09:27:25.787
> 
> 标签：java, macos, swing, x11

我真的很希望能够在 Xvfb 上运行我们的测试套件，这样摆动窗口就不会一直弹出来妨碍我的工作。不幸的是，我似乎找不到让 java 运行时使用 DISPLAY 环境变量中指定的显示的方法。我想这是因为 Mac JDK 硬连线以使用（非基于 X 的）Mac 显示器。

我也找不到说要使用 X 的 java 命令的任何开关。

提前感谢您提供的任何帮助！马特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T13:12:41.840

我不知道是否有办法让 Apple 的 JDK 使用 X11，但可以选择使用[SoyLatte](http://landonf.bikemonkey.org/static/soylatte/)，这是一个仅适用于 X11 的 Mac Java 实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-06T10:53:56.343

尝试从 X11 终端中启动您的应用程序。这适用于我在 MacOS 10.14.5 上的[http://mcis.polymtl.ca/makao.html](http://mcis.polymtl.ca/makao.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-29T07:01:07.837

我正在这样做，但我在使用 Docker 作弊。

*   下载并安装最新的 docker 桌面。
*   码头工人拉[这个形象](https://hub.docker.com/_/openjdk)：

docker拉openjdk

*   如果要在 mac 上显示，请务必安装 XQuartz。
*   同上：在首选项、安全性中，选中两个框以进行身份​​验证并允许网络
*   来自 Mac 或带有 xwindows 的系统的同上：（您已设置 DISPLAY 环境变量）

    xhost + $DISPLAY（在 Mac OS X 上，这个命令也会启动 XQuartz）

*   在 docker 中运行 Java（docker hub 网页上有很多信息）

    docker run -e DISPLAY /bin/bash （此行传递 DISPLAY 环境变量的内容）

也可以[将替代形式的 java 安装](https://askubuntu.com/questions/536134/install-specific-java-version-for-12-04/536161#536161)到各种 docker 映像中。在此示例中，除非您另外：

```
apt-get install  -y libxext-dev libxrender-dev libxtst-dev 
```

作为 docker 文件中“运行”部分的一部分。使用 update-alternatives 脚本不处理依赖项。我已经按照这些说明让 Java 7 工作并添加了 X 库。

-

# svn - 本地/局域网服务器中是否可以进行 SVN 配置？

> ID：897057
> 
> 赞同：-2
> 
> 时间：2009-05-22T09:28:35.410
> 
> 标签：svn, webserver, lan

我想知道有没有办法在 LINUX、Windows 中通过 LAN 服务器（配置了 php+mysql+apache 的 Web 服务器）配置 SVN。我的要求是在本地构建一个带有 SVN 设施的小型 Web 服务器。

我知道乌龟svn配置。但是在局域网（本地）中怎么可能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-22T09:35:02.230

[Subversion Book](http://svnbook.org/)有一个关于服务器配置的优秀[章节](http://svnbook.red-bean.com/en/1.5/svn.serverconfig.html)。我建议你从那里开始。这本书相当透彻，易于理解。或者，如果您是 Windows 类型的人，您可能想看看[VisualSVN Server](http://www.visualsvn.com/server/)，它可以通过点击方式进行设置和管理。

# jdbc - 如何在 JDBC executeBatch 中忽略所有错误语句并执行所有好的语句？

> ID：897060
> 
> 赞同：2
> 
> 时间：2009-05-22T09:30:19.120
> 
> 标签：jdbc

我`java.sql.Statement`添加了很多批处理语句`addBatch`。执行`executeBatch`将在违反数据库约束的第一个语句之后抛出`BatchUpdateException`，并且不会批量执行所有剩余的语句。有什么方法可以批量执行所有语句而忽略错误的语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T09:47:02.050

我认为更好的解决方案是修复错误的解决方案。怎么了？SQL？基础表？数据？

异常应该是“异常的”。什么情况如此常见以至于您可能会在这批产品中更频繁地看到它？

例外是告诉你有什么不对劲。我不想推荐允许您忽略该消息的修复程序。如果抛出异常，则意味着您有机会在 catch 块中改善其根本问题。

如果您正在循环处理批处理中的每条语句，您可以单独捕获每个语句的异常并简单地记录错误。只是不要完全忽略它。

但除非你能想到另一种恢复策略，否则你就不走运了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-02-10T07:07:26.740

请参阅[BatchUpdateException：批处理不会](https://stackoverflow.com/questions/4724957/batchupdateexception-the-batch-will-not-terminate)因类似的问题和答案而终止。

它说批处理将在抛出异常的那一刻终止。你不能只执行好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-27T13:46:24.043

好吧，如果你想保存所有可能插入的数据，只需执行提交，并保存。

循环批处理中的每条语句是不可能的，只有当你调用执行批处理时，你才会得到异常，而不是每条语句（addbatch），所以无法找到错误的确切位置：你可以保存部分他们，或者什么都没有，你决定（提交或回滚）。

# iphone - iPhone UITableView 单元格保持选中状态

> ID：897071
> 
> 赞同：45
> 
> 时间：2009-05-22T09:32:08.273
> 
> 标签：iphone, cocoa-touch, uitableview

在我的 UITableView 中，有时单元格在触摸后保持选中状态。因为它只是偶尔发生，所以我无法重现该问题。

有什么提示吗？也许它与tableView的不当释放有关？

```
 - (void)tableView:(UITableView *)tableView 
    didSelectRowAtIndexPath:(NSIndexPath *)indexPath{   
    NSUInteger row = [indexPath row];

    [tableView deselectRowAtIndexPath:indexPath animated:YES];

switch (row) {
    case 0:
        FruitViewController *fruitController = [FruitViewController alloc];
        [fruitController retain];
        [fruitController initWithNibName:@"FruitView" bundle:[NSBundle mainBundle]];
        [self.navigationController pushViewController:fruitController animated:YES];
        [fruitController release];
        break;
    case 1: 
        CerealsViewController *cerealsController = [CerealsViewController alloc];
        [cerealsController retain];
        [cerealsController initWithNibName:@"CerealsView" bundle:[NSBundle mainBundle]];
        [self.navigationController pushViewController:cerealsController animated:YES];
        [cerealsController release];
        break;
    default:
        break;   
}
   } 
```

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2009-05-22T13:15:29.137

我不能告诉你为什么你会看到这个问题，但这里有一些修复它的建议：

根据 Apple HIG，选择不应该消失，直到从刚刚压入堆栈的视图控制器返回。如果你的控制器只是一个 UITableViewController，它应该在返回视图时自动取消选择。如果没有，请添加

```
- (void) viewWillAppear:(BOOL)animated {
    [tableView deselectRowAtIndexPath:[tableView indexPathForSelectedRow] animated:animated];
    [super viewWillAppear:animated];
} 
```

在视图控制器的某处。

如果有任何行在单击时不会转到另一个视图，并且在选择时实际上不执行任何操作，则它们不应该是可选的，因此您可以在

```
- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

`nil`并在不应选择该行的情况下返回。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2011-07-16T01:13:25.520

`-viewWillAppear:animated:`一个可能的原因是在没有调用`[super viewWillAppear]`扩展控制器的情况下进行覆盖`UITableViewController`。`[super viewWillAppear:animated]`在方法的开头添加`-viewWillAppear`可能会解决问题。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2011-05-06T07:53:17.547

只是为了扩展“Ed Marty”的答案，我选择在“viewWillDisappear”方法中添加取消选择，因为我认为它看起来更好。

除此之外，我正在使用带有常规 UIViewController（而不是 UITableViewController）的 UITableView，因此我无法使用 tableView 变量。为了克服这个问题，我在我的视图控制器头文件中添加了一个 tableView 属性（在我的 XIB 文件中，我将实际的表视图连接到了属性）......

```
@property (nonatomic,retain) IBOutlet UITableView *tableView 
```

...并在视图控制器实现中连接属性并执行取消选择，如下所示..

```
@synthesize tableView

- (void) viewWillDisappear:(BOOL)animated {
    [self.tableView deselectRowAtIndexPath:[self.tableView indexPathForSelectedRow] animated:animated];
    [super viewWillDisappear:animated];
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-04-03T20:02:25.667

如果您使用的是 UITableViewController，您可以使用：

```
self.clearsSelectionOnViewWillAppear = YES; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-09-06T07:55:20.767

就我而言，我取消选择了 didSelectRowAtIndexPath 末尾的单元格：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    // Do smth here. segue ..etc

    [tableView deselectRowAtIndexPath:[tableView indexPathForSelectedRow] animated:NO];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-14T08:02:19.203

`UITableViewCell`在你的课堂上使用这个方法

```
(void)setSelected:(BOOL)selected animated:(BOOL)animated {

// Just comment This line of code

// [super setSelected:selected animated:animated];

} 
```

甚至您可以在 didSelectRowAtIndexPath 方法中尝试此代码

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

  // 选择行时做一些事情

```
[tableView deselectRowAtIndexPath:indexPath animated:YES]; 
```

}

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-24T15:20:41.703

一旦您了解了如何管理表，解决这个问题大约需要两秒钟。

**一旦单元格滚动到屏幕外，它们就会失去格式。**该表通过关闭其他单元格并在用户向后滚动时重新创建它们来最小化其内存使用量。

即使是像重新加载表格数据这样的事情，也只适用于当时屏幕上的单元格。重点是， cellForRowAtIndexPath 可能会创建五次相同的单元格，而用户无需按下按钮或离开视图控制器！因此，将其设置为重新加载任何格式。将这样的内容添加到 cellForRowAtIndexPath：

```
 if arrayOf_SelectedCells.contains(indexPath) {
        setup_Selected(cell)
        //Where setup_Selected is a custom function to apply formatt
    } else {
        setup_Unselected(cell)
    } 
```

# java - 更改字体颜色运行时 Android

> ID：897072
> 
> 赞同：3
> 
> 时间：2009-05-22T09:32:16.153
> 
> 标签：java, android

我正在使用 EditText 获取 userInput 但我面临的问题是我想在运行时更改字体颜色但在相同的 Edittext 中我能够更改字体类型但是当我更改字体颜色时它会改变整个editext 但我只需要更改特定文本的颜色。

还有一个问题是，当制作高度超过“fillparent”属性的edittext时，我将光标位置置于中间，但我希望它始终位于顶部，即在开始时..

是否有任何其他可用的小部件可以为我提供这两个问题的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-22T10:37:26.303

EditText 小部件中的文本对齐可以通过重力控制：

```
editText.setGravity(Gravity.TOP);
```

要将标记对象附加到 EditText 的内容，您可以使用[Editable](http://developer.android.com/reference/android/text/Editable.html)接口：

```
EditText editText = (EditText) findViewById(R.id.editview);
SpannableStringBuilder builder = new SpannableStringBuilder();
builder.append("one red word");
builder.setSpan(new ForegroundColorSpan(Color.RED), 4, 7, Spanned.SPAN_COMPOSING);
editText.setText(builder, BufferType.EDITABLE); 
```

# serialization - 如何使用 Compact Framework 对对象进行二进制序列化？

> ID：897073
> 
> 赞同：4
> 
> 时间：2009-05-22T09:32:28.260
> 
> 标签：serialization, compact-framework

我有一个对象

```
struct _NETINFO { } 
```

我想使用 Compact Framework 将其转换为 Byte[]，我尝试了以下操作但没有成功：

```
_NETINFO info = new _NETINFO();
byte[] buffer = (byte[])info; 
```

而且它不起作用！我发现的唯一其他建议是使用 CF 中不可用的 BinaryFormatter！

还有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-08-17T23:51:25.097

结构有多复杂？对于没有指向其他东西的指针的简单事情，这很容易：

```
 var info = new _NETINFO();
    var buffer = new byte[Marshal.SizeOf(info)];
    var handle = GCHandle.Alloc(info, GCHandleType.Pinned);
    try
    {
        Marshal.Copy(handle.AddrOfPinnedObject(), buffer, 0, buffer.Length);
    }
    finally
    {
        handle.Free();
    } 
```

还有一个使用不安全代码的版本更短，但这需要打开“允许不安全代码”，并且出于某种原因让一些人感到恐慌。

希望托管代码允许在没有副本的情况下执行此操作（或相反 - 将字节数组转换为结构），但遗憾的是它没有。

# .net - 在 WPF 绑定中撤消

> ID：897076
> 
> 赞同：6
> 
> 时间：2009-05-22T09:33:21.253
> 
> 标签：.net, wpf, binding, undo

如何使用 WPF 中的绑定提供撤消/重做？

例如，您使用绑定实现了一个主从视图。编辑后，您的更改会使用绑定自动保存。然后，您要撤消更改。

WPF 的绑定中是否有现成的东西？WPF 是否提供了一些结构或接口？

这个问题不是关于如何使用堆栈实现撤消/重做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-22T09:51:01.467

看一下[IEditableObject](http://msdn.microsoft.com/en-us/library/system.componentmodel.ieditableobject.aspx)接口。它允许您拍摄实现它的对象的快照，然后在必要时回滚到该快照。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T09:37:08.170

你要绑定什么数据？

如果要对 DataSet 进行数据绑定，则可以使用 DataSet.RejectChanges() 方法撤消更改，前提是您尚未调用 DataSet.AcceptChanges()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-06-21T03:27:45.907

您可能会发现 Monitored Undo Framework 很有用。[http://muf.codeplex.com/](http://muf.codeplex.com/)

它不使用“自上而下”命令模式，而是在更改发生时监视更改，并允许您在撤消堆栈上放置一个委托来撤消更改。

在您的情况下，如果您要绑定到底层模型/视图模型，那么您可以连接框架以捕获这些更改，然后根据需要撤消/重做它们。如果模型实现 INotifyPropertyChanged 并使用 ObservableCollections，它应该自动反映在模型上执行的操作，包括撤消/重做操作。

[您可以在http://muf.codeplex.com/](http://muf.codeplex.com/)上的 codeplex 站点上找到更多信息和文档。

# reporting-services - Reporting Services 聚合不适用于父子关系

> ID：897077
> 
> 赞同：0
> 
> 时间：2009-05-22T09:33:53.123
> 
> 标签：reporting-services, ssas, mdx

我在分析服务维度中有一个父子属性关系，比如说`[Dim].[Child]`是一个子属性`[Dim].[Parent]`，我有一个查询，它返回集合

`UNION( [Dim].[Parent].Members * [Dim].[Child].Members, [Dim].[Parent].[ALL] * [Dim].[Child].Members )`

在轴 1 上和轴 0 上的一些输出。在管理工作室中运行时查询工作正常。

现在我正在尝试在 Reporting Services 中制作一个带有`[Dim].[Child]`x 轴和`Aggregate(some_output)`Y 轴的图表。我希望在 x 轴上看到子成员，并为所有父母（在这种情况下只是一个）汇总输出，即从行中获取的数据`{ [Dim].[Parent].[ALL], [Dim].[Child].&[TheChildID] }`。如上所述，查询确实返回了包含正确数据的这一行。

但是，`Aggregate`这种情况下的函数返回 NULL。当使用父子属性并将子属性放在 X 轴上时，此行为始终存在。将子项放入 tablix 行并在列中添加聚合输出时也会发生同样的情况。报告服务器似乎知道聚合只会发生在一个成员身上并拒绝这样做。

如果我进行另一个相同的查询，只需输入具有不同关系的属性，例如`[Time].[Month]`and `[Time].[DayOfMonth]`，聚合就可以正常工作，因为这一次同一天可能属于很多个月，并且需要聚合数据。

现在我不知道为什么会发生这种情况 - Reporting Server 是否准确地查询 OLAP 数据源以找出关系或什么？或者在返回所有行的查询中是否有一些魔法，我不知道？有效和无效的案例的唯一相关性似乎是关系。

**编辑：**玩了更多之后的一些观察：如果我从查询中删除该行，则报告有效`[Parent].Members * [Child].Members`，强制它只检索`[Parent].ALL * [Child].&[ID]`行。该图表现在已经汇总了数据，但显然，我不再有个人成员了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-26T18:25:36.513

只是一些我希望对您有所帮助的观察。

1.  报告服务中的聚合函数需要一个“范围”参数...例如 Aggregate(Fields!Child.value, "ParentGroup")
2.  您的数据提供者必须支持此功能。如果没有，则返回“Nothing”。请看下面的链接...

有关更多帮助/信息，请查看[聚合](http://msdn.microsoft.com/en-us/library/ms155830.aspx)函数文档。

# asp.net - 如何在asp.net中删除动态创建的控件

> ID：897078
> 
> 赞同：4
> 
> 时间：2009-05-22T09:34:57.240
> 
> 标签：asp.net

我在运行时在面板中创建了一些文件上传控件。现在我想通过单击链接按钮来删除控件。

我怎样才能做到这一点..

以下是动态创建控制的代码..

```
protected void LinkButton1_Click(object sender, EventArgs e)
{
    Panel1.Visible = true;
    newattach(count);
    count++;      
}
private void newattach(int tot)
{
    int i;
    for (i = 0; i < tot; i++)
    {

        f1 = new FileUpload();
        f1.ID = "FileUpload" + count.ToString();
        f1.Height =20;
        f1.Width = 150;
        Panel1.Controls.Add(f1);
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-23T11:55:04.943

正如上面[马特回答的那样？！;)](https://stackoverflow.com/users/27782/thatismatt)

```
 Panel1.Controls.Remove(Panel1.FindControl("FileUploadID")); 
```

应该工作，但是：

通过调试器运行整个页面，您会发现一些奇怪的事情....并且如果不了解 .Net 中的页面生命周期以及有关动态控件的基本原理，您可能会重新出现控件，具体取决于页面生命周期中的时间您确实创建了动态控件，因此问题的答案更多是关于如何以可控的方式创建正确的动态控件。所以：

asp.net 中的动态控件 - Yuriy Solodkyy 的这些原则适用：

遵循这种一致的方法来动态创建控件：

1.  在 CreateChildControls 方法中创建控件。
2.  在 LoadViewState 中调用 EnsureChildControls。
3.  在 Pair 对象中包装和展开视图状态以强制调用 LoadViewState。
4.  将页面动态部分的布局保存在 ViewState 支持的属性中。
5.  重新创建动态控件以响应事件处理程序中的用户操作。

其他重要说明：

1.  在将控件添加到父控件的控件集合之前配置它们。
2.  为动态创建的控件分配唯一的 ID。
3.  在本地字段中保留对动态创建的控件的引用。
4.  请记住，post 数据被处理两次：在 OnLoad 之前和 OnLoad 之后。

我通常在页面模板后面使用以下代码：

```
using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;

public partial class template : BasePageGui
{

        #region Introduction
        private string msg; //this is the message you are going to show to your users

        private TextBox [ ] holderForTxt;     //holder for dynamic textboxes
        private DropDownList [ ] holderForDdl;
        private HtmlInputRadioButton [ ] holderForRdb;
        private HtmlInputCheckBox [ ] holderForCkb;

        private Label [ ] holderForAst;

        DataSet ds;             //dataset for metadata
        DataSet pds;            //parameter dataset
        DataSet rds;            //return set dataset

        #endregion

        #region Properties
        //set here page properties to use with the viewstate
        #endregion //Properties

        #region TemplateMethods
        protected override void OnInit ( EventArgs e )
        {   
        } //eof OnInit

        protected override void CreateChildControls ()
        {
                base.CreateChildControls ();
                CreateDynamicControls ();
        } 

        protected override object SaveViewState ()
        {
                return new Pair ( base.SaveViewState () , null );
        }

        protected override void LoadViewState ( object savedState )
        {
                base.LoadViewState ( ( (Pair) savedState ).First );
                EnsureChildControls ();
        } 

        protected void Page_Load ( object sender , EventArgs e )
        {   //comm -- the controls should be generated at the init stage and the databinding happens here

                if (this.IsPostBack == false)
                {
                } //eof on first load 
                else
                {
                } //eof on post back 
                this.DataBind ();
        } //eof method

        private void CreateDynamicControls ()
        {

        } //eof method

        #endregion //TemplateMethods

        #region DisplayMethods

        #endregion //DisplayMethods

        #region ClickEventHandlers

    #endregion ClickEventHandlers

        #region GridViewEventHanlders

    #endregion //GridViewEventHandlers
} //eof class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T10:50:58.677

我没有尝试过，但如果您知道要删除的控件的 ID，我认为以下内容应该对您有用：

```
Panel1.Controls.Remove(Panel1.FindControl("FileUploadID")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T10:53:13.073

由于控件仅在单击按钮时添加，因此当您执行任何其他类型的回发时它不会出现。

# sql-server - 何时将 GUID 用作主键？

> ID：897083
> 
> 赞同：4
> 
> 时间：2009-05-22T09:35:52.463
> 
> 标签：sql-server, primary-key, guid, uuid, microsoft-sync-framework

> **可能重复：**
> [GUID/UUID 数据库键的优缺点](https://stackoverflow.com/questions/45399/advantages-and-disadvantages-of-guid-uuid-database-keys)

在 SQL Server 2005/8 数据库中，是否存在必须使用 GUID 作为主键的情况。例如，使用 MS Sync Framework 会强制执行此操作，还是数据复制？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-22T09:44:00.187

如果您需要通过复制同步多个数据库，您可以使用 guid 作为键。

使用 guid 的另一个原因是，如果您想在某个远程客户端（例如 winforms 应用程序）上创建行，然后通过 Web 服务等将这些行提交到服务器。

如果您这样做，我强烈建议您确保基于不唯一的自动递增 int 指定您自己的聚集索引。在聚集索引为 guid 的表中插入行可能会产生相当大的开销。

更新：这是一个如何设置这样的表的示例：

```
CREATE TABLE [dbo].[myTable](
[intId] [int] IDENTITY(1,1) NOT NULL,
[realGuidId] [uniqueidentifier] NOT NULL,
[someData] [varchar](50) NULL,
    CONSTRAINT [PK_myTable] UNIQUE NONCLUSTERED 
    (
   [realGuidId] ASC
    )
)

CREATE CLUSTERED INDEX [IX_myTable] ON [dbo].[myTable] 
(
[intId] ASC
) 
```

您可以正常插入表格，例如：

```
INSERT INTO myTable VALUES(NEWID(), 'Some useful data goes here') 
```

更新：我听了一个非常好的 dotnetrocks 插曲，它谈到了这一点值得一听 -[节目 #447](http://www.dotnetrocks.com/default.aspx?showNum=447)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-22T09:38:25.983

我使用 GUID 作为主键，因为当我使用分布式数据库和一个与所有分布式数据库中的数据同步的中央数据库构建应用程序时，我不想使用复合主键。使用 GUID，我确信（几乎*）当我将所有数据库中的数据拉入中央数据库时，我不会发生冲突（违反约束）。

* 在两个不同的地方生成相同的 GUID 的可能性很小，但并非不可能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-22T09:37:00.060

当数据库不是集中式的或某些收集是远程执行的。

# maven-2 - 从 GWT 1.5 升级到 1.6 出现问题；在 Maven 设置中要更改什么？

> ID：897085
> 
> 赞同：1
> 
> 时间：2009-05-22T09:36:50.153
> 
> 标签：maven-2, gwt, upgrade

我尝试使用 maven 将工作的 GWT 1.5.2 应用程序升级到 1.6.4 来构建。在修复所有错误并更新所有不推荐使用的调用后，它编译得很好。

但是当我尝试启动应用程序时没有任何反应，因为（根据 Firebug）我尝试下载的文件是

```
http://localhost:8080/softwarename/com.myCompany.WorkSpace/undefined 
```

显然，在此 ( `http://localhost:8080/softwarename/com.myCompany.WorkSpace/com.myCompany.WorkSpace.nocache.js`) 之前加载的文件正在尝试获取在`null`字符串中定义的文件。

我需要在设置（pom.xml、结构等）中进行哪些更改才能使其正常工作？谷歌没有帮助...

更新：我似乎找到了解决方案。迁移说明进行了一些修改。`rename-to`我必须使用属性中的名称在 war 目录中创建目录。

因为 maven 没有从 war 目录中获取 WorkSpace.html，而是从公共目录中获取了它，所以我不得不从脚本块的路径中删除该文件夹。我还必须更改 spring 安全过滤器路径，因为 url 已从`http://localhost:8080/softwarename/com.myCompany.WorkSpace/WorkSpace.html`to更改`http://localhost:8080/softwarename/workspace/WorkSpace.html`（`workspace`rename-to 值在哪里）。

现在我只需要让 RPC 调用再次工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T10:24:05.440

我认为您可能已经被 GWT 1.6 中的新项目结构所吸引。基本上你的一些文件需要在不同的地方。

我按照[GWT 1.6 发行说明中的​​迁移说明](http://code.google.com/webtoolkit/doc/1.6/ReleaseNotes_1_6.html)使我的代码正常工作。

我们不使用 Maven，所以恐怕我无法帮助您。

# fonts - helvetica ttf 或替代品请！

> ID：897091
> 
> 赞同：-3
> 
> 时间：2009-05-22T09:38:31.787
> 
> 标签：fonts

Helvetica 有 ttf 格式吗？如果没有，有什么好的选择？我将不胜感激任何以 ttf 格式下载的链接，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-10-30T01:11:27.380

并且，要完成三连胜的答案，另请参阅 Bitstream Vera Sans 系列：[http ://www.gnome.org/fonts/](http://www.gnome.org/fonts/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-30T01:08:17.963

当然，Arial 无疑是​​ Helvetica 的混蛋同父异母兄弟 - 并且所有“专家”都可以清楚地区分。要获得良好的历史记录，请查看[http://www.ms-studio.com/articles.html](http://www.ms-studio.com/articles.html)或查看精彩的 doco 'Helvetica'。

Microsoft Sans Serif 与 Arial 一样，与 Windows 捆绑在一起，但[比 Arial 更像 Helvetica](http://www.grputland.com/2013/11/multiplatform-helvetica-like-font-stack.html) - 前提是您不需要斜体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T10:03:03.453

您可以从[msttcorefonts](http://sourceforge.net/project/showfiles.php?group_id=34153&package_id=56408)项目下载 Arial。根据[维基百科](http://en.wikipedia.org/wiki/Helvetica)：

> Monotype 的 Arial 于 1982 年设计，虽然在一些细节上与 Helvetica 不同，但字符宽度相同，大多数非专业人士无法区分。

# sql - VB6中的日期格式

> ID：897096
> 
> 赞同：0
> 
> 时间：2009-05-22T09:39:41.597
> 
> 标签：sql, excel, datetime, vb6

我在我的应用程序中使用 VB6。我已经用从 SQL 查询中获得的 RecordSet 填充了 Excel。

一列称为`Time_period`具有如下值

```
"2/31/2006"
"12/29/2000"
etc. 
```

我需要将这些输入传递给另一个 SQL 查询进行处理。我对格式有点困惑，因为 Oracle 接受“2009 年 7 月 23 日”、“1998 年 1 月 2 日”等类型的输入。

您能帮助在 VB6 中从一种格式转换为另一种格式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T09:47:58.260

使用格式。

```
Debug.Print Format$(Now, "dd-mmm-yyyy") 
```

这将适用于您的情况。

您可以尝试使用以下格式（ISO 标准）：

```
Debug.Pring Format$(Now, "yyyy-MM-dd") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T09:47:37.447

将 oracleDate 调暗为字符串 将 excelDate 调暗为 DateTime

```
oracleDate = Format$(excelDate , "dd-mmm-yyyy") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T09:49:21.703

如果您从记录集中获取日期，则可以将其存储在日期变量中，然后调用以下格式化函数来获取您喜欢的字符串表示形式：

```
Format(myDateVar, "dd-mmm-yyyy") 
```

然后，您可以将此值与正确的日期分隔符一起传递给您的 SQL 查询。（如果不使用参数）

您可能还想检查*空*值，因为它们不适用于上述函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-22T13:26:09.410

这是来自 Excel VBA 的代码片段，应该可以在 VB6 中进行一些调整。

```
Sub temp()
    Dim lConn, lRs, sSQL As String
    Set lConn = CreateObject("ADODB.Connection")
    Set lRs = CreateObject("ADODB.Recordset")

    lConn.Open "DSN=yourdns; UID=youruid; PWD=yourpwd;"

    Dim oWS As Worksheet
    Set oWS = Worksheets(1)

    sSQL = " SELECT * FROM Product WHERE Last_Upd_Date > to_date('" & oWS.Range("A1").Value & "', 'MM-DDD-YYYY') "
    lRs.Open sSQL, lConn

    Debug.Print lRs.EOF
    lRs.Close
    lConn.Close
End Sub 
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-22T12:56:17.723

人们通常会通过在 SQL 代码中在两者之间创建一个 JOIN 来将一个查询的结果集“传递”给另一个查询。希望列中的日期值`Time_period`已经是时间类型；如果不是，则可以使用 SQL 将它们转换为一个。即使数据位于不同的数据库（例如 Oracle 和 Excel）中，您也可以使用 ACE/Jet（又名 MS Access）创建查询以直接或通过着墨表连接两者。请详细说明您要达到的目标。

# .net - 如何感知 .Net TrackBar 的用户滚动结束？

> ID：897097
> 
> 赞同：0
> 
> 时间：2009-05-22T09:40:03.017
> 
> 标签：.net, winforms, events, scroll

我有一个 TrackBar 并且已经处理了 Scroll 事件，但它可能会在用户滚动期间触发 10 次，我想在用户完成滚动时更新文件。我如何感觉到“滚动结束”？MouseUp 和 KeyUp 会为此目的吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T17:33:15.360

您可能应该为此目的使用 ScrollBar。ScrollBar 上的 Scroll 事件有一个 ScrollEventArgs，它有一个名为 Type 的属性，它的值之一是 EndScroll。

# visual-studio-2008 - 尝试创建基于 MFC 对话框的应用程序来读取视频

> ID：897098
> 
> 赞同：0
> 
> 时间：2009-05-22T09:40:23.220
> 
> 标签：visual-studio-2008, mfc

我正在编写一个使用基于 MFC Dialog 的应用程序来读取视频的程序。我使用 videolabs 包作为参考。我编译程序时得到的错误是

1>c:\users\prashanth\documents\visual studio 2005\projects\videodemo34\videodemo34\videodemo34dlg.cpp(105) : error C2679: binary '=' : no operator found which take a right-hand operand of type 'const char [36]'（或没有可接受的转换）

任何人都可以说如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-22T09:51:36.473

一些C错误不是很棒吗？祝你学习 C++ 好运。基本上，作业右侧的项目类型与左侧的项目类型不匹配。如果没有代码示例，很难说更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T10:01:02.087

我建议您双击 Visual Studio 错误窗口中的错误消息并查看代码或至少在此处发布代码。

我会冒险猜测您要么定义了一个 36 元素的 char 数组，要么有一个 const 字符串，然后您试图将其复制到不合适的项目类型。

如果您尝试复制文件名/字符串，请使用 strcpy_s。如果不是这样，那么代码真的会有所帮助！

# asp.net - ASP.NET：通过客户端 JavaScript 获取在 ASP.NET TreeView 上选择的节点

> ID：897100
> 
> 赞同：1
> 
> 时间：2009-05-22T09:40:38.883
> 
> 标签：asp.net, javascript, treeview

我需要从客户端的 ASP.NET 树视图中了解所选节点的深度。

反正有知道这个吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T02:58:16.410

并不是说我喜欢这样做，如果时间允许，我会尝试寻找另一种方法；

```
 var id = TreeView2_Data.selectedNodeID.value;  //Get the Selectednode id of tv with asp.net id of TreeView2
    if (id.length > 0) {
        var selectedNode = document.getElementById(id);  //Get the Selectnode object  -> selectedNode.innerText will give you the text of the node
        if ((typeof (selectedNode) != "undefined") && (selectedNode != null)) {
            //Determine the depth of the select node
            var nodeDepth = selectedNode.host.split('\\\\').length  // the separator is the default single \. Tv adds the extra on and of course we have to add 2 for the string literals.
            //node depth wil always be one more than the real node depth, so root is one.
            if (nodeDepth >= 4) {   
                //Do stuff or return value
            }
        }
    } 
```

希望能帮助到你。如果您找到替代方案，请回帖。

# javascript - 函数对象和可调用对象有什么区别？

> ID：897103
> 
> 赞同：20
> 
> 时间：2009-05-22T09:41:09.847
> 
> 标签：javascript, function, callable

我最近看到了[有关 ECMAScript 5 更改的演示文稿](http://google-caja.googlecode.com/svn/trunk/doc/html/es5-talk/es5-talk.html)。这张幻灯片上有一张[幻灯片](http://google-caja.googlecode.com/svn/trunk/doc/html/es5-talk/img31.html)：

> *函数*与*可调用*
> 
> ```
> typeof f === 'function'                       // → f is Callable
> ({}).toString.call(f) === '[object Function]' // → f is a Function 
> ```

谁能向我解释*Function*和*Callable*之间的区别是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-22T09:45:54.330

一般来说，一个对象可以被调用而不是一个函数。在一切都是对象（包括函数）的语言中，可调用对象不必来自 Function 类。

在 JS 中，看起来 Callable 是任何具有内部 [[Call]] 方法的东西（由 'function' 的 typeof 标识，而不是 'object'）。函数（如幻灯片中所用）是函数对象的后代。我可能是错的，但是在脚本中您只能创建函数，而 ECMAScript 实现可以定义不是函数的 Callables。

如果您尝试使用匿名函数/函数表达式和声明函数的幻灯片中的代码片段，结果是相同的。

```
typeof function() {}; // == 'function'
({}).toString.call(function() {}) // == '[object Function]'
function foo() {}
typeof foo; // == 'function'
({}).toString.call(foo) // == '[object Function]' 
```

# c - C 对齐不是 2 的幂

> ID：897105
> 
> 赞同：4
> 
> 时间：2009-05-22T09:42:01.907
> 
> 标签：c, alignment

在 gcc 中有一个名为的指令`.align`，它允许我在需要为 2 的*幂的*边界处对齐事物。但是，在我的 Intel Core Duo 机器上，我想将一些代码（不是数据）对齐到不是 2 次幂的地址。有没有直接的方法可以做到这一点？

因为显然，`.align 3`给了我错误：错误：对齐不是二的幂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T10:27:36.977

对齐到 2 的幂，然后在要未对齐的代码之前填充适当数量的汇编器 NOP。（我假设您知道如何在 gcc 中进行内联汇编；如果您不知道，请发表评论。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T09:53:29.730

假设您使用的是 GCC，您可以使用打包结构和手动填充：

```
struct very_slow_t
{
   int a;
   char padding;
   int b; /* b is now padded to byte 5 */
} __attribute__((__packed__)); 
```

但是你为什么要这样做呢？我的意思是，它会使你的程序慢得多。

# twitter - 如果我知道推文的 ID，我可以从 Twitter 获取推文吗？

> ID：897107
> 
> 赞同：60
> 
> 时间：2009-05-22T09:42:22.623
> 
> 标签：twitter

如果我知道推文的 ID，我可以从 Twitter 获取推文吗？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2015-05-17T12:51:50.340

@Adjam 和 @Gibron

您可以使用任何用户名，并且 URL 将重定向到正确的 Twitter 句柄。

例如，如果我去：

```
twitter.com/anyuser/status/541278904204668929 
```

链接重定向到：

```
https://twitter.com/MarkTabNet/status/541278904204668929 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-22T09:52:30.480

是的你可以。查看[Twitter 的 API 文档](https://dev.twitter.com/docs/api/1.1/get/statuses/show/:id)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-07-19T07:21:44.210

是的，我们可以通过[https://dev.twitter.com/docs/api/1/get/statuses/show/%3Aid](https://dev.twitter.com/docs/api/1/get/statuses/show/%3Aid)获取，如果将获取单个 id 的状态..

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-07-18T15:50:04.890

您无需使用 API 或知道用户帐户。

只需将其放入以下 ​​URL 格式，其中 XXXXXXXXX 是推文 ID。

[https://twitter.com/i/web/status/XXXXXXXXX](https://twitter.com/i/web/status/XXXXXXXXX)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2011-10-28T20:54:08.767

[https://api.twitter.com/1/statuses/show/id.json](https://api.twitter.com/1/statuses/show/id.json)

示例： [https ://api.twitter.com/1/statuses/show/130022282960715776.json](https://api.twitter.com/1/statuses/show/130022282960715776.json)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-22T09:52:32.320

[http://search.twitter.com/search.json?rpp=50?q=](http://search.twitter.com/search.json?rpp=50?q=from)来自：{twittername}

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-22T09:48:43.360

只需查看[公共 API 即可](http://apiwiki.twitter.com/Twitter-REST-API-Method%3A-statuses%C2%A0show)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-10-07T09:39:14.673

[我们可以在https://apigee.com/console/twitter](https://apigee.com/console/twitter)中测试 twitter api

```
https://api.twitter.com/1.1/statuses/show/335393046625652736.json 
```

# .net - .net 计时器的可靠性如何？

> ID：897108
> 
> 赞同：4
> 
> 时间：2009-05-22T09:42:47.177
> 
> 标签：.net, timer

我正在考虑在 Windows 服务中使用 System.Timers.Timer。我想知道它们的可靠性和准确性。尤其是：

1.  是否可以保证它们运行的​​频率？
2.  当处理器或内存过载时会发生什么？在这种情况下，ElapsedEventArgs.SignalTime 是否总是准确的？
3.  如果一个定时器运行了很长时间，当对系统时间进行更正以考虑系统时钟的不准确性时会发生什么？

更新：感谢到目前为止的答案。我希望对我在原始问题中详述的三个问题获得更具体的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-23T19:56:30.800

什么对你来说是准确的？普通的 windows 定时器的精度约为 100Hz。如果您想要更准确的信息，请查看 QueryPerformanceTimer（System.Diagnostics.Stopwatch 使用它）。它在短时间跨度内非常棒且非常准确，但随着 CPU 频率的变化（电源管理），它会失去同步。

另外，我看到系统时钟每天漂移几分钟，所以我们不得不安装 NTP 实用程序并安排它（讽刺的是）定期运行。

基本上，我们从未在 Windows 机器上达到亚毫秒级的时间精度，即使尝试使用主时钟作为基线，使用 QuerperformanceTimer 作为差分定时器。从来没有正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-23T19:30:40.387

如果您需要 .NET 中的高性能时钟，您应该查看 System.Diagnostics.Stopwatch。它使用 Windows 中的内核计时器来非常精确地测量时间。它通常用于诊断目的，例如测量给定代码段的执行时间......但如果需要，它可能会包装在自定义高性能 Timer 类中以用于预定事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T09:55:20.287

根据我的经验，如果您的性能负载非常高，我可以告诉计时器可能会不同步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T09:48:35.497

我在循环中为我的 Windows 服务任务使用睡眠（*Thread.Sleep(int) ）值。*这样，如果不是基于间隔而是基于特定时间，您就可以计算您想睡**多少。**这种方法从来没有问题。

# c# - ASP.NET AJAX 控件工具包：条件 ModalPopup

> ID：897109
> 
> 赞同：0
> 
> 时间：2009-05-22T09:43:25.770
> 
> 标签：c#, asp.net-ajax, ajaxcontroltoolkit

如果用户在特定深度上选择了树视图的节点，我需要显示一个模式弹出窗口。

有没有办法以条件方式显示模式弹出窗口？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T13:04:21.420

如果您使用的是 ModalPopupExtender，则可以在回发中显示模式。Put the TreeView in an UpdatePanel, and when the node in a specified depth is selected show the modal.

# c# - rsa 数据解密错误。系统找不到指定的文件

> ID：897119
> 
> 赞同：2
> 
> 时间：2009-05-22T09:47:14.110
> 
> 标签：c#, asp.net, rsa

我正在使用 rsa 提供程序进行加密解密，它给出了以下错误。

rsa 数据解密错误。系统找不到指定的文件。

任何人都知道我也在 web.cofig 中使用身份。我还授予了生成密钥的 rsa 文件夹的所有权利，但它仍然在那里。

另一个奇怪的事情是，当我与身份部分中给出的用户创建 rdp 会话时，它工作正常。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-01-31T20:30:09.493

您确定这在该用户帐户下运行吗？也许您需要授予 ASPNET、IUSR、IWAM 或 NETWORKSERVICE 的权限，而不是应用程序在其下运行的用户帐户。

# c# - 在 .net 中的 windows mobile 6 中上传图像

> ID：897120
> 
> 赞同：0
> 
> 时间：2009-05-22T09:47:20.523
> 
> 标签：c#, windows-mobile

我正在开发.NET 中的移动应用程序。这是一个 Windows 移动应用程序。我在这个应用程序中遇到了一个问题，我想将图像/文件上传到给定的 url/服务器。许多上传类没有使用 like `Webclient,WebRequest,WebResponse`。我用过`HttpWebReques`，就是没有连接服务器。

任何人都可以帮助我如何在 .NET 中的 windows mobile 6 中上传给定 url 上的图像吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-22T12:50:55.033

不确定将图像上传到给定 URL 的确切含义。当然，您需要一些侦听器或服务器上的某些东西才能接收图像数据。

您可以在您的服务器上创建一个 .NET Web 服务，其函数采用 byte[] 输入参数来上传您的图像数据，并在您的 Windows Mobile 应用程序中引用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T20:41:13.657

你也可以修改服务器代码吗？如果是这样，还有其他几个选择。

您可以将图像存储在数据库（SQL Server Compact Edition）中，然后使用同步服务。

您可以使用 WCF 传输数据（对于移动设备，您有两个 WCF 选项，Web 服务和消息......您可能需要为此提供消息）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-04T23:44:55.260

目标服务器应该有一个网页，当它出现时除了图像。打开文件流，将图像加载到内存中的字节缓冲区中。使用 fileinfo 获取详细信息，例如长度，稍后您将需要它。打开二进制阅读器，将图像读入缓冲区。使用您的 URL 打开一个 WebRequest.Create，设置方法为 post，漂亮的长超时，request.content 长度为字节缓冲区的长度，打开一个流实例到您的 request.GetRequestStream() 实例。像这样..使用流创建二进制写入器，写入文件缓冲区，关闭 em，打开 Web 响应，启动 GetResponseStream 的流读取器并检查接收到的字节是否与您发送的相匹配。我在数据传输下的 EggheadCafe 上找到了不错的代码。

# java - 如何为 Linux 打包游戏？

> ID：897141
> 
> 赞同：3
> 
> 时间：2009-05-22T09:52:50.527
> 
> 标签：java, linux, software-distribution, rpm, deb

我有一个目前在 Windows 和 Mac OS X 下运行的游戏，我想让它在 Linux 下可用。移植应该相当容易，因为它是基于 Java 的游戏，并且使用可在所有 3 个平台上使用的可移植库。

这个问题的难点和原因是打包它，以便它可以在尽可能多的现代 Linux 发行版上运行。主要目标是 Ubuntu 9。

Webstart 不是一种可接受的方式，.tar.gz 是最后的手段。我更喜欢具有正确定义的依赖项（例如 Java）并且易于安装的包。

我还需要能够在 Windows 环境下构建包，因为我的构建链中的一些工具是仅限 Windows 的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-22T10:43:42.093

首先看看一个类似的项目是如何实现这一目标的。浮现在脑海中的是[Freecol](http://www.freecol.org)，这是一款基于 Java 的跨平台游戏。他们的[下载页面上](http://www.freecol.org/download.html)有关于在多个平台上安装它的相当清晰的信息。他们还在诸如[GetDEB](http://www.getdeb.net/app/FreeCol) for Ubuntu 和[PackMan](http://packman.links2linux.org/package/freecol) for OpenSuse 等网站上提供软件包。

通常，如果您想访问尽可能多的发行版，您应该考虑的格式是（按重要性的粗略顺序）：

1.  Ubuntu .deb（如果可以，也创建一个存储库）
2.  OpenSUSE .rpm 或 .ypm（一键安装）
3.  Fedora .rpm
4.  .tar.gz 预编译包

然后是从源代码构建选项，或尽力而为的二进制安装程序。最后，看看其他流行的发行版，例如 Debian、Mandriva 和 BSD

一旦特定平台的包存在，您可能希望考虑将其接受到该发行版中。这将使用户更容易找到和获取。可以在此处找到有关 ubuntu 进程的信息：

*   [https://wiki.ubuntu.com/UbuntuDevelopment/NewPackages](https://wiki.ubuntu.com/UbuntuDevelopment/NewPackages)

（编辑：更好的列表，感谢 Jonik 的建议。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-23T16:44:32.560

看看零安装 ( [http://0install.net/](http://0install.net/) )。

*   任何人都可以安装软件

您不必成为管理员即可安装文字处理器 [ 更多 ]

*   任何人都可以分发软件

您无需获得发行版（或其他任何人）的祝福即可成为零安装的一部分；该系统是完全去中心化的 [更多]

*   自动更新

当更新可用时，零安装会通知您[更多]

*   安全

如果一个用户下载了恶意程序，其他用户不受影响；用户无需相互信任即可共享下载；安装不执行任何下载的代码；在新软件发布之前总是检查数字签名

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T10:09:45.343

你可以使用 Ubuntu 的 deb 系统。它将帮助您正确标记依赖项。

[此处](https://wiki.ubuntu.com/PackagingGuide)提供了包装指南。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-22T10:44:32.967

好问题 - 我不知道答案（而且我想没有一个简单的、包罗万象的解决方案），但从 Linux 用户的角度来看，这里有一些需要考虑的点。

我认为 .tar.gz（或 .tar.bz2）不一定那么糟糕。Linux 用户已经习惯了，例如许多商业软件包都是以这种方式分发的。如果主要目的是在某个位置提取文件，它通常会胜过图形 Windows 样式的安装程序。

一些（也许很多？）用户在包管理系统之外安装了 JRE，因此仅提供 RPM 或 deb（这取决于将 JRE 安装为 RPM 或 deb）可能会有问题。（我个人更喜欢在 . 下安装几个 JRE 版本（实际上是 JDK）`/usr/local/java`。）所以至少考虑提供一个 zip/gz/bz2 包以及其他选项。

此外，要了解如何创建 Java 软件的 RPM 包，请查看[JPackage](http://www.jpackage.org/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-22T13:15:16.903

每个发行版都可能有自己的通用文件去向的约定。
在 Ubuntu 中，常见的 java jar 进入 /usr/share/java。存在诸如 commons-cli 和 liblog4j 之类的东西。如果您使用其中任何一个，请确保您的 deb 依赖于适当的包。如果该库在您的应用程序之外使用，但不在 Ubuntu 存储库中，请考虑将其放在自己的 deb 中并依赖于此。您需要在 /usr/share/[name]/ 中为您的特定游戏 jar 创建一个文件夹，然后创建一个 shell 脚本来启动游戏。这个脚本应该放在 /usr/bin（或 /usr/games）并且是可执行的。

不要忘记依赖适当的 java 包（我建议 sun-java#-jre 包，因为 gjc 是废话，而 open-jdk 还不是 100%）（至少 METAL LaF 是 fubar，我不还不知道其他任何事情。）

# asp.net-mvc - Linq To Sql 验证

> ID：897142
> 
> 赞同：0
> 
> 时间：2009-05-22T09:53:04.113
> 
> 标签：asp.net-mvc, linq-to-sql

我有一个包含 Linq To SQL 对象的类，这些对象用于填充视图上的下拉列表。使用 Scott Gu 的书呆子晚餐，我正在使用部分类实现他们使用的验证框架。这在每个视图处理一个对象（例如晚餐）时效果很好。但是当我使用不是 Linq To Sql 对象的类时，我无法使验证正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-24T04:19:06.160

Nerd Dinner 应用程序利用 Linq To SQL 持久化数据时触发的事件。特别是 OnValidate() 方法。

由于您有一个不是 Linq To Sql 的类，因此您可以通过创建自己的自定义事件处理程序并在数据更改时触发它来伪造它。

作为替代方案，只需调用验证给定对象的方法，调用与对象一样多的验证函数。

# c# - 使一组 WPF 扩展器专门“扩展”，即一次只扩展一个

> ID：897146
> 
> 赞同：1
> 
> 时间：2009-05-22T09:54:15.577
> 
> 标签：c#, wpf, data-binding, listbox, expander

我有一个包含一组“扩展器”项目的列表框，我想做的是使`IsExpanded`每个项目的属性都独占。例如，如果我有 10 个扩展器`ListBox`，我希望一次只打开一个。

这是我到目前为止所拥有的：

```
<Window>
    <Window.Resources>
        <DataTemplate x:Key="NormalTemplate">
            <Expander Margin="0" IsExpanded="True" Header="{Binding Model.Name}" Background="Green">
                <Grid>
                    <StackPanel HorizontalAlignment="Stretch">
                        <TextBlock Text="{Binding Model.Description}" TextWrapping="Wrap" HorizontalAlignment="Stretch" Margin="0"/>
                    </StackPanel>
                </Grid>
            </Expander>
        </DataTemplate>
    </Window.Resources>

    <Grid>
        <ListBox ItemsSource="{Binding Groups}" 
                 ItemTemplate="{DynamicResource NormalTemplate}"
                 />
    </Grid>
</Window> 
```

有没有办法做到这一点？我与`ListBox`扩展器无关，见鬼 - 如果需要更改，我不会与任何扩展器绑定。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-22T10:03:46.837

是什么决定了an是否`Expander`被扩展？如果是选择，您可以将属性绑定`IsExpanded`到的`IsSelected`属性`ListBoxItem`：

```
<Expander IsExpanded="{Binding IsSelected, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListBoxItem}}}" ...> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T11:14:21.297

这款[Accordian 控件](http://www.rooijakkers.net/blog/post/2007/11/WPF-implementation-of-a-basic-Accordion-control.aspx)可能是您想要的

# java - 不“返回任何内容”的 servlet 的正确语法？

> ID：897149
> 
> 赞同：3
> 
> 时间：2009-05-22T09:55:36.667
> 
> 标签：java, ajax, servlets

终止不向客户端返回任何数据的 servlet 的正确方法是什么？

所讨论的 servlet 的目的是从 Ajax 请求中接收一些数据，并将 TCP 消息发送到硬件以告诉它更改其状态。

您是否必须指定响应？

我选择获取对输出流的引用并关闭它，这是正确的吗？

我应该发回“嘿，那有效”的消息吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-22T12:26:55.630

如果您只想提供“成功”状态，只需返回 HTTP 代码 200。您不必返回任何流，因为您只想说“OK”。

```
public void doGet(...) {
    response.setStatus(HttpServletResponse.SC_OK); 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-22T10:00:12.557

我认为回复很好，如果您观看 gmail 之类的内容，您会注意到很多帖子

```
ok 
```

作为回应，我喜欢这个。它简单明了。

另一件要考虑的事情是你将如何处理你的请求以某种方式失败的情况，我认为如果它不成功，你的客户端可能应该向用户报告一些东西，因此它需要来自 servlet 的响应。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-22T09:59:18.157

在任何情况下，您的 servlet 都将发送带有状态代码之类的响应标头，我不明白您为什么要在此之上输出任何内容。:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-22T10:00:03.337

在这些情况下，我通常会返回一条成功消息，例如（在 JSON 中）

```
{ success: true } 
```

我发现它有时有助于调试！不过，我认为没有“正确”响应，只要您的 servlet 返回 200 响应代码（除非您另有说明，否则我认为它们会这样做），那么就没有问题。

# xquery - 在xquery中，单引号和双引号有什么区别吗？

> ID：897150
> 
> 赞同：1
> 
> 时间：2009-05-22T09:55:41.317
> 
> 标签：xquery

在xquery中，单引号和双引号有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T10:12:09.380

不，对于字符串文字，它们的工作方式与 JavaScript 中的完全一样。

规范：[XQuery 1.0，A.2.1 节：终端符号 - StringLiteral](http://www.w3.org/TR/xquery/#doc-xquery-StringLiteral)：

```
字符串文字 ::=
    ('"' (PredefinedEntityRef | CharRef | EscapeQuot | [^"&])* '"') |
    ("'" (PredefinedEntityRef | CharRef | EscapeApos | [^'&])* "'")

```

# javascript - 使用 javascript 输入“电话”样式的密码

> ID：897157
> 
> 赞同：8
> 
> 时间：2009-05-22T09:58:41.730
> 
> 标签：javascript, security, login, passwords, accessibility

我希望为年幼的孩子改善网站的可访问性。由于他们的键盘技术很差，我们收到很多抱怨说输入密码而看不到字符对他们来说太难了。

我不希望密码完全不被屏蔽，但我正在考虑使用手机样式，其中当前字符仅在被屏蔽之前显示几秒钟。

有谁知道我可以查看的任何 javascript 解决方案，或者甚至是这种技术的实际名称，以便我可以更有效地搜索它？

我已经实现了一个基本的概念证明，它使用 onChange 事件来更新纯文本字段，而密码本身存储在隐藏字段中，但我不确定这是否是最好的方法。

### 更新：

我不想使用明文字段的原因是该系统用于学校，包括教师。例如，如果其中一名年长的学生能够获得教师管理员密码，那么他们可能会造成很多破坏。

拥有一个可切换的明文/密码字段是一个有趣的想法，并且可能比延迟屏蔽方法更容易。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-22T10:09:27.793

如果孩子（或成人）的打字技巧太差而无法使用密码字段，您真的认为显示他们输入几秒钟的字母真的有帮助吗？一个糟糕的打字员不会专注于他们的键盘而不是屏幕吗？

最简单的解决方案可能是在 Vista 中执行类似网络密码字段的操作：设置一个复选框，在普通输入字段和密码字段之间切换（并选择合理的默认值），或者如果登录不敏感，只需使用普通的输入框。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-22T10:09:14.080

如果该网站真的是为年幼的孩子准备的，为什么不让他们在纯文本字段中输入密码呢？好像您不会存储他们的信用卡详细信息。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-22T10:50:32.157

我可能会做与我现在（与成年人）使用的相反的事情，并将其变成为孩子们上课的机会。

即使该字段成为普通输入字段，然后在其下方包含一个链接，上面写着“ ***HIDE*** ”。

点击“ ***HIDE*** ”链接会将其切换为“ ***SHOW*** ”，并使密码字段的内容加星标。点击“ ***SHOW*** ”会做相反的事情。

我会想象在一个儿童网站上，您有类似“*这是什么*？”的图标。如果是这样，隐藏/显示切换将是一个描述为什么要隐藏密码的机会。

示例（横截面。请注意，XDOM 是跨浏览器规范化 DOM 函数的对象。）

```
...
function init() 
{
    pwdEl = XDOM.getElementById('pass');
    pwdClr = XDOM.getElementById('logindisplay');
    toglLnk = XDOM.getElementById('showhidepwd');
    pwdClr.style.display = "none"; //initiate 

    function mirrorType(e) 
    {
        pwdClr.innerHTML = pwdEl.value;
    }
    function toggleMirror(e) 
    {
        var toggle = pwdClr.style.display;
        if (toggle == "none") {
            pwdClr.style.display = "inline";
            toglLnk.innerHTML = "hide";
        } else {
            pwdClr.style.display = "none";
            toglLnk.innerHTML = "show";
        }
        pwdClr.innerHTML = pwdEl.value;
        XDOM.stopPropagation(e);
        XDOM.preventDefault(e);
    }
    XDOM.addListener(pwdEl, 'keyup', mirrorType, false);
    XDOM.addListener(toglLnk, 'click', toggleMirror, false);
}
window.onload = init;
</script>
<style type="text/css">
#logindisplay {display:none;}
.row {display:table-row; padding:4px;}
.cell {display:table-cell; padding:4px;}
</style>
</head>
<body>
<div>
    <h2>Test Show-Hide Login</h2>
    <form>
        <div class="row">
            <p class="cell">
                <label for="pass">Password</label> 
            </p>
            <p class="cell">
                <input type="password" id="pass" name="pass" value="" size="15" maxlength="15" />
                <br /><a href="#jsenable" id="showhidepwd"><span id="togglelogin">show</span></a> 
                <span id="logindisplay" style="display:none;"> </span>
            </p>
        </div>
    </form>
    <p id="jsenable"><!-- a note about enabling JavaScript here --></p>
</div> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-22T10:12:26.167

除了其他答案。您还可以在密码字段附近使用虚拟键盘。这样他们就可以单击并输入密码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-23T02:41:41.120

我认为您应该有一个*真正的*密码字段，其样式为 display:none; 而不是隐藏字段；以及只运行一次的该字段的 onchange 事件，将掩码放入您的概念证明文本字段中......以便浏览器的内置保存密码可以工作。正如其他人所建议的那样，“显示密码”切换框也不会受到伤害。问题是保存表单数据的自动填充往往发生在窗口的加载事件之后，也发生在 dom-ready 事件（由 jquery 使用）之后，因此必须绑定隐藏密码字段的 onchange。

# web-services - 如何使用 EMF 类使用 Web 服务？

> ID：897161
> 
> 赞同：3
> 
> 时间：2009-05-22T09:59:32.277
> 
> 标签：web-services, eclipse-emf

我想通过使用 EMF 创建的类来创建 Web 服务，因为这些类不是标准 bean 格式，是否有任何包装器或某些工具可用于创建 Web 服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-06T01:42:57.453

我还没有听说过任何这样的包装器或工具。但我很困惑，为什么要将 EMF 生成的类直接公开为 Web 服务。您最终会不会得到一个粒度太细而无法实用的 Web 服务 API？

回到 EMF 之前的世界，对 OMG MOF 1.x 规范的（有效的）批评之一是 MOF 到 CORBA IDL 的映射提供了需要发出太多请求的接口。但是为了保护 MOF 1.x，CORBA IDL 直到 CORBA 2.3 才获得对值类型的支持，这在 MOF 1.x 设计被冻结之后很久。

在 MOF 1.x 之后，人们对使用 IDL 失去了兴趣。当 MOF 人员开始研究 JMI 时，首选的方法是将模型作为 XMI blob 移动，并仅将细粒度 API 用于内存中的反序列化。这就是 JMI 所支持的，基本上也是 EMF 的工作原理。（但使用 EMF，您还可以使用其他技术实现模型持久性；例如使用 Teneo。）

# c# - 在 jQuery 中使用 PageMethods

> ID：897176
> 
> 赞同：3
> 
> 时间：2009-05-22T10:03:39.443
> 
> 标签：c#, asp.net, asp.net-ajax, jquery, pagemethods

简单地说，我想在*jquery.ajax*的代码隐藏 C# 文件中调用用*WebMethod属性修饰的**公共静态*方法，以获取一些 json 和其他简单的东西（在不同的函数中）。但相反，我得到了整个页面:'(

 **虽然我正在为 .NET 3.5 框架开发并使用 VS 2008，但我没有使用 asp.net AJAX。（客户端有一些限制）

请让我知道我是否可以通过使用 asp.net ajax 来使用页面方法，或者如果不能，其他简单的解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-08T06:15:53.890

经过深思熟虑，我发现了问题所在。我正在使用[jquery 的可编辑插件](http://www.appelsiini.net/projects/jeditable)。这是问题的根源。当 jeditable 调用 jquery 的 ajax 时，它会设置 ajax 选项，如下所示：

```
 var ajaxoptions = {
        type: 'POST',
        data: submitdata,
        url: settings.target,
        success: function(result, status) {
            if (ajaxoptions.dataType == 'html') {
                $(self).html(result);
            }
            self.editing = false;
            callback.apply(self, [result, settings]);
            if (!$.trim($(self).html())) {
                $(self).html(settings.placeholder);
            }
        },
        error: function(xhr, status, error) {
            onerror.apply(form, [settings, self, xhr]);
        }
    }; 
```

所以它以简单的*html*形式发送内容，并将其与页面方法一起使用，我们需要设置这些内容，以便它以*json*形式发送。所以我们需要像这样在设置中添加一些东西：

```
 var ajaxoptions = {
        type: 'POST',
        data: submitdata,
        url: settings.target,
        dataType: 'json', //Data Type
        contentType: 'application/json; charset=utf-8', //Content Type
       //....other settings
    }; 
```

所以我在设置**dataType**和**contentType**中添加了两个新属性，并在上面更改为：

```
 var ajaxoptions = {
        type: 'POST',
        data: submitdata,
        url: settings.target,
        dataType: settings.dataType,
        contentType: settings.contentType,
       //....other settings
    }; 
```

现在出现了另一个问题:(它正在发送数据（来自**submitdata**属性）作为 asp.net 不接受*json*请求的普通查询字符串。所以我不得不使用[jquery 的 json 插件](http://plugins.jquery.com/project/LABSJSON)并使用以下方法更改数据在 ajax 中发送的方式测试数据类型：

```
 if (settings.dataType == "json") {
        if ($.toJSON) {
            submitdata = $.toJSON(submitdata); 
        }
    } 
```

它就像微风一样工作！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T10:56:04.953

我不确定，但我认为 WebMethods 只能通过 asp.net AJAX 访问。不过我可能错了，因为我们根本不那样使用它。我们以稍微不同的方式来做这件事。

我们已经构建了一个 aspx 页面，它接受我们所有的 AJAX 请求并将它们传递给后续方法。

**服务器端代码**

```
If Not (Request("method") Is Nothing) Then
            method = Request("method")
            username = HttpContext.Current.User.Identity.Name.ToString
            Select Case UCase(method)
                Case "GETPROJECTS"
                    Response.ContentType = "text/json"
                    Response.Write(GetProjects(Request("cid"), Request("status")))
                    Exit Select
        end select
end if 
```

**客户端代码 [使用 jquery]**

```
$.ajaxSetup({
        error: function(xhr, msg) { alert(xhr, msg) },
        type: "POST",
        url: "Ajax.aspx",
    beforeSend: function() { showLoader(el); },
        data: { method: 'GetProjects', cid: "2", status:"open"},
        success: function(msg) {
            var data = JSON.parse(msg);
            alert(data.Message);
        },
        complete: function() { hideLoader(el);  }
    }); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T19:27:21.387

Russ Cam 发布此链接以[回答另一个问题](https://stackoverflow.com/questions/897408/asp-net-partial-page-upload-without-updatepanel-with-jquery/897464#897464)（因此，如果这有帮助，请投票给他的答案；））：

> [使用 jQuery 直接调用 ASP.NET AJAX 页面方法](http://encosia.com/2008/05/29/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-23T10:58:34.713

Dave Ward 有一系列[文章](http://encosia.com/category/jquery/)直接使用 jQuery 和 ASP.Net PageMethods，不需要 MS Ajax UpdatePanel。特别是这篇[文章](http://encosia.com/2008/05/29/using-jquery-to-directly-call-aspnet-ajax-page-methods/)将帮助您入门。

# php - Webmail 联系人列表导入器

> ID：897180
> 
> 赞同：4
> 
> 时间：2009-05-22T10:04:56.960
> 
> 标签：php, open-source, coldfusion, scripting, webmail

有谁知道类似 Twitter 和 LinkedIn 上使用的 Webmail 联系人列表导入程序脚本（ColdFusion、PHP 等）？我找到了一些，但它们是付费的，我想要更多定制和开放的。

为了澄清一点，我不是在寻找一种处理 .csv 文件的方法 :) 我在寻找一些可以登录到 gmail、yahoo 邮件、hotmail、aol 并拉出用户通讯录的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-22T10:36:01.657

您是否真的采用了一种方法，即用户将他们的网络邮件用户名和密码输入您的网站，然后您的网站关闭并从该帐户中获取联系方式？如果是这样，那么对我来说这听起来像是一罐蠕虫，而且是我们自己的阿特伍德先生不久前[在博客上写](http://www.codinghorror.com/blog/archives/000953.html)的东西。

我会按照 Evgeniy 的回答做一些事情。

*（我本来只是对这个问题发表评论，但我可悲的代表阻止了我......）*

（编辑以包含指向 Jeff 博客的链接，因为我被允许了）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T15:22:23.577

您可能需要使用可以登录所有这些服务的库，并以它们的格式访问他们的联系人列表，并以一种格式提取它们。

在其他新闻中，[PHP/Curl 书](http://curl.phptrack.com/get_page.php?fuseaction=downloads)似乎以 25 美元的价格完成了这一切。我怀疑无论 PHP 中的代码是什么，Coldfusion 大约是一半。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-07-03T08:24:11.250

试试[http://openinviter.com/](http://openinviter.com/)，有电子邮件联系人导入和一些内置的社交网络

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-06-02T10:02:07.940

可能你可以试试[http://stescodes.com/grabcontacts.aspx](http://stescodes.com/grabcontacts.aspx)，它也有演示

它有linkedin和myspace

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-22T10:14:25.273

它使用什么格式的联系人列表？如果是 CSV，那么您可以在 1 分钟内编写它...

```
$data = file('list.csv');
$contacts = array();
foreach ($data AS $entry)
{
    $contacts[] = explode($separator, $entry); // usually separator is ';'
} 
```

在此处添加错误处理并在爆炸后命名字段 - 就是这样！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-22T13:22:15.347

它使用什么格式的联系人列表？如果是 CSV，那么您可以在 10 秒内编写它...

```
<cfhttp
    url  = "http://localhost/list.csv"
    name = "Contacts"
/> 
```

它会为您处理所有转义和列命名，为使用 Query 提供了一个很好的便利。

;)

# c# - 在实例之间拖放数据

> ID：897184
> 
> 赞同：1
> 
> 时间：2009-05-22T10:05:43.153
> 
> 标签：c#, winforms, .net-3.5, drag-and-drop

我试图让我的用户将某些数据行从一个自定义列表控件拖放到另一个，其中第二个列表控件位于同一应用程序的另一个实例中。

```
DoDragDrop(parameterTypedListView.SelectedObjects, DragDropEffects.Copy); 
```

其中`parameterTypedListView.SelectedObjects`是一个通用 IList，其中 T 是一个自定义类，仅包含值类型作为字段/属性。

在 OnDragDrop 事件中，我尝试提取这些数据，但只得到一个`System.__ComObject`似乎继承自`System.MarshalByRefObject`.

简而言之：如何以我可以实际使用的面向对象格式提取数据？

编辑：将我的自定义类设置为可序列化没有任何明显的效果。我可以枚举 __ComObject：

```
foreach (var dataObject in (IEnumerable) e.Data.GetData("System.Collections.ArrayList"))
{
    // this actually enumerates the correct number of times, i.e. as many times as there are items in the list.
} 
```

但是每个 dataObject 本身都是一个 System.__ComObject ，我无法将其转换为任何有用的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T16:57:55.777

我能够复制您最初的问题，但是只要将 [Serializable] 属性添加到数组列表中的类，我就能够将对象视为正确的类型。

这是一些示例代码，显示了一个小的工作示例。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        this.DragDrop += new System.Windows.Forms.DragEventHandler(this.Form1_DragDrop);
        this.DragEnter += new System.Windows.Forms.DragEventHandler(this.Form1_DragEnter);
    }

    [Serializable]
    class DragClass
    {
        public string Prop1 { get; set; }
        public int Prop2 { get; set; }
    }

    private void label1_MouseDown(object sender, MouseEventArgs e)
    {
        System.Collections.ArrayList aDragClasses = new System.Collections.ArrayList();
        aDragClasses.Add(new DragClass() { Prop1 = "Test1", Prop2 = 2 });
        aDragClasses.Add(new DragClass() { Prop1 = "Test2", Prop2 = 3 });
        aDragClasses.Add(new DragClass() { Prop1 = "Test3", Prop2 = 4 });

        DoDragDrop(aDragClasses, DragDropEffects.Copy);
    }

    private void Form1_DragEnter(object sender, DragEventArgs e)
    {
        e.Effect = DragDropEffects.Copy;
    }

    private void Form1_DragDrop(object sender, DragEventArgs e)
    {
        foreach (var aData in (System.Collections.IEnumerable)e.Data.GetData(typeof(System.Collections.ArrayList)))
        {
          System.Diagnostics.Debug.WriteLine(((DragClass)aData).Prop1);
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T00:10:00.633

我认为问题在于您直接使用列表来传递数据。我尝试了几种不同的方法使其失败，并找出了一些不起作用的方法。

如果您的自定义类没有 [Serializable] 属性，它将无法正常工作，因为这是在进程之间编组类的方式。另外，如果我直接使用 List 来传递数据，我会得到一个空引用异常。

如果您使用简单的传输类来传递数据（并且所有类型都是可序列化的），那么一切对我来说都很好。

```
[Serializable]
class Test
{
    public string Name { get; set; }
    public string Description { get; set; }
}

[Serializable]
class Transport
{
    public Transport()
    {
        this.Items = new List<Test>();
    }
    public IList<Test> Items { get; private set; }
} 
```

然后我可以毫无问题地做到这一点，它可以跨实例工作......

```
private void Form1_DragDrop(object sender, DragEventArgs e)
{
    foreach (var item in ((Transport)e.Data.GetData(typeof(Transport))).Items)
    {
        System.Diagnostics.Debug.WriteLine(item.Name + " " + item.Description);
    }
} 
```

# sql - SQL 魔法 - 查询不应该花费 15 个小时，但确实如此

> ID：897185
> 
> 赞同：10
> 
> 时间：2009-05-22T10:05:48.487
> 
> 标签：sql, mysql, query-optimization

好的，所以我有一个非常可怕的 MySQL 表（900k 记录，总共 180 MB），我想从子组中提取更高的记录`date_updated`并计算每个组的加权平均值。计算运行约 15 个小时，我有一种强烈的感觉，我**做错了**。

首先，巨大的桌子布局：

*   `category`
*   `element_id`
*   `date_updated`
*   `value`
*   `weight`
*   `source_prefix`
*   `source_name`

这里唯一的关键是`element_id`（BTREE，~8k 独特元素）。

及计算过程：

*为每个组和子组进行哈希。*

```
CREATE TEMPORARY TABLE `temp1` (INDEX ( `ds_hash` ))
                SELECT `category`, 
                `element_id`, 
                `source_prefix`, 
                `source_name`, 
                `date_updated`, 
                `value`, 
                `weight`, 
                MD5(CONCAT(`category`, `element_id`, `source_prefix`, `source_name`)) AS `subcat_hash`, 
                MD5(CONCAT(`category`, `element_id`, `date_updated`)) AS `cat_hash` 
                FROM `bigbigtable` WHERE `date_updated` <= '2009-04-28' 
```

我真的不明白这种对哈希的大惊小怪，但这种方式工作得更快。暗魔法，我猜。

*查找每个子组的最大日期*

```
CREATE TEMPORARY TABLE `temp2` (INDEX ( `subcat_hash` ))

                SELECT MAX(`date_updated`) AS `maxdate` , `subcat_hash`
                FROM `temp1`
                GROUP BY `subcat_hash`; 
```

*将 temp1 与 temp2 连接以查找类别的加权平均值*

```
CREATE TEMPORARY TABLE `valuebycats` (INDEX ( `category` ))
            SELECT `temp1`.`element_id`, 
                   `temp1`.`category`, 
                   `temp1`.`source_prefix`, 
                   `temp1`.`source_name`, 
                   `temp1`.`date_updated`, 
                   AVG(`temp1`.`value`) AS `avg_value`,
            SUM(`temp1`.`value` * `temp1`.`weight`) / SUM(`weight`) AS `rating`

            FROM `temp1` LEFT JOIN `temp2` ON `temp1`.`subcat_hash` = `temp2`.`subcat_hash`
            WHERE `temp2`.`subcat_hash` = `temp1`.`subcat_hash`
            AND `temp1`.`date_updated` = `temp2`.`maxdate`

            GROUP BY `temp1`.`cat_hash`; 
```

（现在我浏览了它并将其全部写下来，在我看来，我应该在最后一个查询中使用 INNER JOIN（以避免 900k*900k 临时表））。

不过，有没有**正常的方法**可以做到这一点？

**UPD**：一些图片供参考：

*删除了无效的 ImageShack 链接*

**UPD**：解释建议的解决方案：

```
+----+-------------+-------+------+---------------+------------+---------+--------------------------------------------------------------------------------------+--------+----------+----------------------------------------------+
| id | select_type | table | type | possible_keys | key        | key_len | ref                                                                                  | rows   | filtered | Extra                                        |
+----+-------------+-------+------+---------------+------------+---------+--------------------------------------------------------------------------------------+--------+----------+----------------------------------------------+
|  1 | SIMPLE      | cur   | ALL  | NULL          | NULL       | NULL    | NULL                                                                                 | 893085 |   100.00 | Using where; Using temporary; Using filesort |
|  1 | SIMPLE      | next  | ref  | prefix        | prefix     | 1074    | bigbigtable.cur.source_prefix,bigbigtable.cur.source_name,bigbigtable.cur.element_id |      1 |   100.00 | Using where                                  |
+----+-------------+-------+------+---------------+------------+---------+--------------------------------------------------------------------------------------+--------+----------+----------------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-22T10:26:30.037

使用哈希是数据库引擎可以执行连接的方式之一。您必须编写自己的基于哈希的连接应该是非常罕见的；这肯定不像其中之一，它有一个包含一些聚合的 900k 行表。

根据您的评论，此查询可能会满足您的需求：

```
SELECT cur.source_prefix, 
       cur.source_name, 
       cur.category, 
       cur.element_id,
       MAX(cur.date_updated) AS DateUpdated, 
       AVG(cur.value) AS AvgValue,
       SUM(cur.value * cur.weight) / SUM(cur.weight) AS Rating
FROM eev0 cur
LEFT JOIN eev0 next
    ON next.date_updated < '2009-05-01'
    AND next.source_prefix = cur.source_prefix 
    AND next.source_name = cur.source_name
    AND next.element_id = cur.element_id
    AND next.date_updated > cur.date_updated
WHERE cur.date_updated < '2009-05-01'
AND next.category IS NULL
GROUP BY cur.source_prefix, cur.source_name, 
    cur.category, cur.element_id 
```

GROUP BY 执行每个源+类别+元素的计算。

JOIN 用于过滤掉旧条目。它查找后面的条目，然后 WHERE 语句过滤掉存在后面条目的行。像这样的连接受益于（source_prefix、source_name、element_id、date_updated）上的索引。

有很多方法可以过滤掉旧条目，但这种方法往往表现得相当不错。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-22T10:19:27.540

好的，所以 900K 行并不是一个庞大的表，它相当大，但是您的查询确实不应该花那么长时间。

首先，上面 3 个语句中哪一个花费的时间最多？

我看到的第一个问题是您的第一个查询。您的 WHERE 子句不包含索引列。所以这意味着它必须对整个表进行全表扫描。

在“data_updated”列上创建一个索引，然后再次运行查询，看看它对您有什么作用。

如果您不需要哈希并且仅使用它们来利用黑魔法，那么将它们完全删除。

编辑：比我有更多 SQL-fu 的人可能会在不使用临时表的情况下将你的整个逻辑集简化为一个 SQL 语句。

编辑：我的 SQL 有点生疏了，但是你在第三个 SQL 语句中加入了两次吗？也许它不会有所作为，但不应该是：

```
SELECT temp1.element_id, 
   temp1.category, 
   temp1.source_prefix, 
   temp1.source_name, 
   temp1.date_updated, 
   AVG(temp1.value) AS avg_value,
   SUM(temp1.value * temp1.weight) / SUM(weight) AS rating
FROM temp1 LEFT JOIN temp2 ON temp1.subcat_hash = temp2.subcat_hash
WHERE temp1.date_updated = temp2.maxdate
GROUP BY temp1.cat_hash; 
```

或者

```
SELECT temp1.element_id, 
   temp1.category, 
   temp1.source_prefix, 
   temp1.source_name, 
   temp1.date_updated, 
   AVG(temp1.value) AS avg_value,
   SUM(temp1.value * temp1.weight) / SUM(weight) AS rating
FROM temp1 temp2
WHERE temp2.subcat_hash = temp1.subcat_hash
AND temp1.date_updated = temp2.maxdate
GROUP BY temp1.cat_hash; 
```

# asp.net-mvc - 最佳实践：HTTP 处理程序或 ActionFilters 以获得最佳性能

> ID：897189
> 
> 赞同：2
> 
> 时间：2009-05-22T10:07:58.607
> 
> 标签：asp.net-mvc

我使用我的 Web 表单日表单中的一些 HTTP 处理程序，例如生成图像缩略图、服务 CSS 等...

我喜欢它们，它们很容易制作并且提供了很好的抽象。我仍然可以在 MVC 中以最佳性能使用它们还是应该使用动作过滤器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T10:12:28.600

动作过滤器添加了更多的抽象层，因为它们通过路由和 MVC 处理程序。如果您非常关心性能并且不需要任何 MVC 功能，那么您应该坚持使用 Handlers。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T11:39:43.057

如果你想要性能 - 使用 HttpHandlers

如果您想要可测试性 - 使用 ActionFilters

我个人更喜欢在 ASP.NET MVC 中可以使用的 ActionFilters

# c# - 从移动应用程序将图像上传到服务器

> ID：897192
> 
> 赞同：0
> 
> 时间：2009-05-22T10:09:24.160
> 
> 标签：c#, windows-mobile

我正在开发.net 上的移动应用程序。这是一个 Windows 移动应用程序。我在这个应用程序中遇到了一个问题，我想将图像/文件上传到给定的 url/服务器。许多上传类没有像 Webclient、WebRequest、WebResponse 那样使用。我使用了 HttpWebRequest，它没有与服务器连接。请任何人都可以帮助我如何在.net 中的 windows mobile 6 中的给定 url 上上传图像。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-22T10:23:47.687

CodeProject 上有[示例代码](http://www.codeproject.com/KB/cs/uploadfileex.aspx)`WebClient.UploadFile`使用 just and friends 重新实现“with more” `HttpwebRequest`，乍一看，它使用了 Compact Framework 中可用的功能。您可以检查代码是否适用于 PC 上的完整框架，并使用[Fiddler](http://www.fiddler2.com/fiddler2/)之类的工具来检查通过线路传输的内容。然后为 Compact Framework 进行编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-02-05T06:40:01.763

嘿，看看这个在 Image Shack 上传的代码：

您可以通过仅使用 Fiddler 更改 Web 请求来修改它以与其他网站一起使用

```
public class Uploader
    {

        public string UploadFileToImageShack(object oFileName)
        {
            try
            {
                string fileName = oFileName as string;
                string contentType = null;
                CookieContainer cookie = new CookieContainer();
                NameValueCollection col = new NameValueCollection();
                col["MAX_FILE_SIZE"] = "3145728";
                col["refer"] = "";
                col["brand"] = "";
                col["optimage"] = "1";
                col["rembar"] = "1";
                col["submit"] = "host it!";
                List<string> l = new List<string>();
                switch (fileName.Substring(fileName.Length - 3, 3))
                {
                    case "jpg":
                        contentType = "image/jpeg";
                        break;
                    case "peg":
                        contentType = "image/jpeg";
                        break;
                    case "gif":
                        contentType = "image/gif";
                        break;
                    case "png":
                        contentType = "image/png";
                        break;
                    case "bmp":
                        contentType = "image/bmp";
                        break;
                    case "tif":
                        contentType = "image/tiff";
                        break;
                    case "iff":
                        contentType = "image/tiff";
                        break;
                    default:
                        contentType = "image/unknown";
                        break;
                }

                string resp;
                col["optsize"] = "resample";
                resp = UploadFileEx(fileName,
                                               "http://www.imageshack.us/index.php",
                                               "fileupload",
                                               contentType,
                                               col,
                                               cookie);
                return resp;

            }
            catch (Exception ex)
            {
                return "";
            }
        }

        public static string UploadFileEx(string uploadfile, string url,
           string fileFormName, string contenttype, System.Collections.Specialized.NameValueCollection querystring,
           CookieContainer cookies)
        {
            if ((fileFormName == null) ||
                (fileFormName.Length == 0))
            {
                fileFormName = "file";
            }

            if ((contenttype == null) ||
                (contenttype.Length == 0))
            {
                contenttype = "application/octet-stream";
            }

            string postdata;
            postdata = "?";
            if (querystring != null)
            {
                foreach (string key in querystring.Keys)
                {
                    postdata += key + "=" + querystring.Get(key) + "&";
                }
            }
            Uri uri = new Uri(url + postdata);

            string boundary = "----------" + DateTime.Now.Ticks.ToString("x");
            HttpWebRequest webrequest = (HttpWebRequest)WebRequest.Create(uri);
            webrequest.CookieContainer = cookies;
            webrequest.ContentType = "multipart/form-data; boundary=" + boundary;
            webrequest.Method = "POST";

            // Build up the post message header
            StringBuilder sb = new StringBuilder();
            sb.Append("--");
            sb.Append(boundary);
            sb.Append("\r\n");
            sb.Append("Content-Disposition: form-data; name=\"");
            sb.Append(fileFormName);
            sb.Append("\"; filename=\"");
            sb.Append(Path.GetFileName(uploadfile));
            sb.Append("\"");
            sb.Append("\r\n");
            sb.Append("Content-Type: ");
            sb.Append(contenttype);
            sb.Append("\r\n");
            sb.Append("\r\n");

            string postHeader = sb.ToString();
            byte[] postHeaderBytes = Encoding.UTF8.GetBytes(postHeader);

            // Build the trailing boundary string as a byte array
            // ensuring the boundary appears on a line by itself
            byte[] boundaryBytes =
                   Encoding.ASCII.GetBytes("\r\n--" + boundary + "\r\n");

            FileStream fileStream = new FileStream(uploadfile,
                                        FileMode.Open, FileAccess.Read);
            long length = postHeaderBytes.Length + fileStream.Length +
                                                   boundaryBytes.Length;
            webrequest.ContentLength = length;

            Stream requestStream = webrequest.GetRequestStream();

            // Write out our post header
            requestStream.Write(postHeaderBytes, 0, postHeaderBytes.Length);

            // Write out the file contents
            byte[] buffer = new Byte[checked((uint)Math.Min(4096,
                                     (int)fileStream.Length))];
            int bytesRead = 0;
            while ((bytesRead = fileStream.Read(buffer, 0, buffer.Length)) != 0)
                requestStream.Write(buffer, 0, bytesRead);

            // Write out the trailing boundary
            requestStream.Write(boundaryBytes, 0, boundaryBytes.Length);
            WebResponse responce = webrequest.GetResponse();
            Stream s = responce.GetResponseStream();
            StreamReader sr = new StreamReader(s);

            return sr.ReadToEnd();
        } 

    } 
```

# workflow-foundation - Windows 工作流进程何时“空闲”？

> ID：897204
> 
> 赞同：2
> 
> 时间：2009-05-22T10:14:53.120
> 
> 标签：workflow-foundation

Windows 工作流进程何时“空闲”？

它会等待一定的时间吗？（这个时间可以改吗？）

或者当一个活动被阻塞/监听时它会立即空闲吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-26T07:14:44.637

工作流实例在以下情况下空闲：

*   它正在等待外部事件`(ReceiveActivity`/WCF 或`ListenActivity` /ExternaDataExchange）
*   a`DelayActivity`正在执行

此外，工作流实例会在以下情况下持久化：

*   它处于空闲状态（见上文）
*   它已完成或终止
*   a`TransactionScopeActivity`或 a`CompensatableTransactionScopeActivity`完成
*   使用该`PersistOnClose`属性标记的自定义活动的执行完成
*   Unload()（或 TryUnload）被调用

# c# - 使用 Unity 在多种类型中注入相同的 DataContext 实例

> ID：897205
> 
> 赞同：6
> 
> 时间：2009-05-22T10:15:12.820
> 
> 标签：c#, dependency-injection, unity-container, datacontext

假设我有 IRepository 接口及其实现 SqlRepository，它将 LINQ 作为 SQL DataContext 的参数。假设我有 IService 接口及其实现服务，它需要三个 IRepository、IRepository 和 IRepository。演示代码如下：

```
public interface IRepository<T> { }

public class SqlRepository<T> : IRepository<T>
{
    public SqlRepository(DataContext dc) { ... }
}

public interface IService<T> { }

public class Service<T,T1,T2,T3> : IService<T>
{
    public Service(IRepository<T1> r1, IRepository<T2>, IRepository<T3>) { ... }
} 
```

在创建服务类时是否可以通过相同的 DataContext 注入所有三个存储库？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2011-04-04T16:41:52.420

您需要做的就是确保在向`Datacontext`Unity 容器注册时使用`PerResolveLifetimeManager`配置中的任一：

```
<type type="<namespace>.DataContext, <assembly>">
    <lifetime type="Microsoft.Practices.Unity.PerResolveLifetimeManager, Microsoft.Practices.Unity" />
</type> 
```

或在代码中：

```
container.RegisterType<DataContext>(new PerResolveLifetimeManager()); 
```

then whenever the container resolves the `Service` any dependencies which also require a `DataContext` will be provided with exactly the same one. But the next request to resolve `Service` will create a new `DataContext`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-05-29T18:45:10.767

我想我知道你想做什么。我在同一条船上，正在尝试提出解决方案。

我的服务层对即将到来的请求执行操作，它的作用取决于内容。它将它传递给一系列责任类。我希望在调用的服务方法的生命周期内将相同的上下文传递给所有类

您可以指定 PerResolveLifetimeManager。到目前为止，它似乎正在处理我的测试用例：

服务等级：

```
public interface IServiceClass
{
    void DoService();
}

class ServiceClass : IServiceClass
{
    private IHandler Handler { get; set; }

    public ServiceClass(IHandler handler)
    {
        Handler = handler;
    }

    public void DoService()
    {
        Handler.HandleRequest();
    }
} 
```

IHandler 由两个类实现，并执行责任链模式：

```
 public interface IHandler
{
    void HandleRequest();
}

class Handler : IHandler
{
    private IDataContext DataContext { get; set; }
    public Handler(IDataContext dataContext)
    {
        DataContext = dataContext;
    }

    public void HandleRequest()
    {
        DataContext.Save("From Handler 1");
    }
}

class Handler2 : IHandler
{
    private IDataContext DataContext { get; set; }
    private IHandler NextHandler { get; set; }

    public Handler2(IDataContext dataContext, IHandler handler)
    {
        DataContext = dataContext;
        NextHandler = handler;
    }

    public void HandleRequest()
    {
        if (NextHandler != null)
            NextHandler.HandleRequest();

        DataContext.Save("From Handler 2");
    }
} 
```

如您所见，两个处理程序都接受一个 IDataContext 实例，我希望它们在它们中都相同。Handler2 也接受一个 IHandler 的实例来传递控制权（它在此处进行演示，但实际上，只有一个会处理请求......）

数据上下文。在构造函数中，我初始化了一个 Guid，并在它的操作过程中输出它，以便我可以查看它的调用是否使用相同的实例：

```
public interface IDataContext
{
    void Save(string fromHandler);
}

class DataContext : IDataContext
{
    private readonly Guid _guid;

    public DataContext()
    {
        _guid = Guid.NewGuid();
    }

    public void Save(string fromHandler)
    {
        Console.Out.WriteLine("GUI: [{0}] {1}", _guid, fromHandler);
    }
} 
```

最后是服务的注册和调用：

```
 private IUnityContainer container;
    private void InitializeUnity()
    {
        container = new UnityContainer();
        container.RegisterType<IHandler, Handler2>("Handler2",
            new InjectionConstructor(new ResolvedParameter<IDataContext>(), new ResolvedParameter<IHandler>("Handler1")));
        container.RegisterType<IHandler, Handler>("Handler1");
        container.RegisterType<IDataContext, DataContext>(new PerResolveLifetimeManager());
        container.RegisterType<IServiceClass, ServiceClass>("MyClass", new InjectionConstructor(new ResolvedParameter<IHandler>("Handler2")));
    }

    private void CallService()
    {
        var service = container.Resolve<ServiceClass>("MyClass");
        service.DoService();

        // Resolving and calling again to simulate multiple resolves:
        service = container.Resolve<ServiceClass>("MyClass");
        service.DoService();
    } 
```

这是我得到的输出：

```
GUI: [f2250055-8a5f-4f80-a1b6-bcc5574138cf] From Handler 1
GUI: [f2250055-8a5f-4f80-a1b6-bcc5574138cf] From Handler 2
GUI: [22a5c0a3-3c5c-4683-807d-bf2b43f3cd0a] From Handler 1
GUI: [22a5c0a3-3c5c-4683-807d-bf2b43f3cd0a] From Handler 2 
```

希望这堵文字墙回答了您的问题...如果不是很抱歉，它确实激发了我需要实施的解决方案...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-23T15:25:15.923

如果我正确理解了您的问题（并且如果您使用的是统一...我想您这样做是因为您已将其标记为统一），则可以执行以下操作：

在您的存储库实现中，

```
[InjectionConstructor]
public SqlRepository(
    [Dependency] DataContext ctx) 
```

但是您必须以相同的方式标记服务构造器并使用容器来解析您的服务以及存储库。DataContext 也必须在容器中才能使其工作。

另一种方法是对您的存储库执行以下操作：

```
[InjectionMethod]
public void Initialize(
    [Dependency] DataContext ctx 
```

这将告诉统一调用此方法，如果您将在您的服务构造函数中使用 Unity 和 BuildUp 方法......像这样：

```
unitycontainer.BuildUp<IRepository>(repository); 
```

我想这不是您要找的，但请告诉我我是否走在正确的轨道上，我会看看是否可以进一步帮助您...

干杯/J

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-29T16:45:41.950

您是否尝试过对统一容器使用 RegisterInstance() 方法？像这样的东西可能会起作用：

公共静态 UnityContainer CreateContainer() { UnityContainer 容器 = new UnityContainer();

```
 try
        {
            var section = ConfigurationManager.GetSection("unity") as UnityConfigurationSection;

            if (section != null)
            {
                section.Containers[0].Configure(container);
            }
        }
        catch (Exception ex)
        {
            TraceLogger.LogMessage("Configurarion Error for Unity Container", ex.Message, TraceEventType.Critical);
            Environment.Exit(1);
        }

        container.RegisterInstance(new DataContext());
        return container;
    } 
```

现在，每次此容器尝试构建需要 DataContext 的对象时，都会传递相同的实例。您甚至可以在注册它的实例之前配置 DataContext。

更新：一个选择（现在，我不知道这是否真的是一个好习惯，但这对我有用）是为您要创建的每个对象创建一个不同的容器。就像是：

```
UnityContainer container1 = ContainerFactory.CreateContainer();
UnityContainer container2 = ContainerFactory.CreateContainer();
UnityContainer container3 = ContainerFactory.CreateContainer();
MyObject1 object1 = container1.Resolve<MyObject1>();
MyObject2 object2 = container2.Resolve<MyObject2>();
MyObject3 object3 = container3.Resolve<MyObject3>(); 
```

或更概括的方式：

```
MyObject1 object1 = ContainerFactory.CreateContainer().Resolve<MyObject1>();
MyObject1 object2 = ContainerFactory.CreateContainer().Resolve<MyObject2>();
MyObject1 object3 = ContainerFactory.CreateContainer().Resolve<MyObject3>(); 
```

嗯，有很多方法可以做到这一点，创建一个列表，使用工厂模式。希望能帮助到你

# python - Python cgi FieldStorage 慢，有什么办法？

> ID：897206
> 
> 赞同：3
> 
> 时间：2009-05-22T10:15:13.943
> 
> 标签：python, cgi

我有一个 python cgi 脚本，它接收通过 http 帖子上传的文件。文件可能很大（300+ Mb）。问题是，cgi.FieldStorage() 获取文件的速度非常慢（一个 300Mb 的文件需要 6 分钟才能“接收”）。通过读取标准输入来做同样的事情大约需要 15 秒。后者的问题是，如果发布了多个字段，我将不得不自己解析数据。

FieldStorage() 有更快的替代方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T10:20:42.670

“[I] 必须自己解析数据”

为什么？CGI 有一个可以显式调用的[解析器。](http://docs.python.org/library/cgi.html#cgi.parse)

读取上传的流并将其保存在本地磁盘文件中。

要获得极快的速度，请使用 StringIO 内存文件。请注意上传将占用的内存量。

使用`cgi.parse(mylocalfile)`.

# visual-studio - 再考虑堆大小错误

> ID：897207
> 
> 赞同：0
> 
> 时间：2009-05-22T10:15:31.293
> 
> 标签：visual-studio, mfc

当我运行一个用于阅读视频的程序时，我收到一个关于 Heapsize 的错误，如下所示：

EAP[videodemo34.exe]：指定给 RtlSizeHeap(04EC0000, 00254CE8) 的地址无效 Windows 已在 videodemo34.exe 中触发断点。

这可能是由于堆损坏，并表明 videodemo34.exe 或它已加载的任何 DLL 中的错误。

输出窗口可能有更多诊断信息

任何人都可以说一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-22T10:33:51.957

如果您在 Prashanth 的问题中发布了一些代码（请参阅您的其他线程之一），那将会很有帮助。

无论如何，这是一个错误是值得怀疑的，因为它清楚地表明你的代码中已经触发了一个断点。

这很可能是因为您正在运行带有嵌入式断点的调试可执行文件。

# jquery-ui - jQuery UI 对话框抢了焦点

> ID：897211
> 
> 赞同：2
> 
> 时间：2009-05-22T10:16:21.087
> 
> 标签：jquery-ui, client-side

我有一个 jQuery UI 对话框，其中包含许多按钮。

我想对这些按钮进行键盘控制（选项卡导航），因此在对话框的打开事件处理程序上，我将第一个按钮设置为焦点。

我可以明显地看到这个工作，并且还使用 document.activeElement 验证它，但是焦点随后被盗并且其他东西得到焦点。

到这个时候，我不知道我应该如何看到有焦点的东西，因为我没有任何进一步的钩子。

有没有其他人注意到类似的问题？

如果您有兴趣，我的代码是这样的（修改为添加焦点，如下所述）

在 doc.ready -*注意*我还添加了 jQuery 按钮 - 但它们似乎根本不响应键盘事件 - 但这是一个单独的问题。

```
 $("#dialogSearchType").dialog
        (
            {
                bgiframe: true,
                height: 180,
                width: 350,
                modal: true,
                autoOpen: false,
                show: 'drop',
                hide: 'fold',
                buttons: { "Street": function() { HandleSearchStreetClick(); $(this).dialog("close"); },
                    "Property": function() { HandleSearchPropertyClick(); $(this).dialog("close"); }
                },
                focus: function(event, ui) { $("#btnSearchTypeProperty").focus(); }
            }
        );

    <div id="dialogSearchType" class="searchDialog" style="width: 280px; display: none" title="Search For..." onkeyup="HandleSearchTypeDialogKeyUp(event)">
        <span>What would you like to search for?</span>
        <br />                
                     <input type="button" tabindex="1" id="btnSearchTypeStreet" class="button" value="Street" onclick="HandleDialogSearchStreetClick()" />
        <input type="button" tabindex="2" id="btnSearchTypeProperty" class="button" value="Property" />           

    </div> 
```

如您所见，我一直尝试添加事件处理程序，但没有任何反应！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T11:51:35.200

好的，我明白了问题所在。

该对话框设置为模态。

jQuery 将在文档级别拦截键盘事件，并取消它们。

我认为这很糟糕，所以我正在尝试一种解决方法来销毁这个事件处理程序并添加我自己的。

PS如果有人知道如何做到这一点，请告诉我！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T10:49:44.560

尝试使用[焦点事件处理程序](http://docs.jquery.com/UI/API/1.7/Dialog#event-focus)而不是打开事件处理程序，看看是否有帮助。我认为这可能更正确，因为除非对话框是模态的，否则您可能希望默认按钮在每次对话框获得焦点时都获得焦点，而不仅仅是在它打开时。如果这不起作用，那么我建议您将代码添加到您的问题中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T09:06:38.293

在这里您可以找到对我们有用的有趣解决方案

[jQuery UI 焦点窃取](https://stackoverflow.com/questions/15665552/jquery-ui-focus-stealing)

# c# - 如何禁止创建（.net）异常对象？

> ID：897212
> 
> 赞同：0
> 
> 时间：2009-05-22T10:17:15.423
> 
> 标签：c#, .net, exception, memory, garbage-collection

如果我不关心抛出的异常。我可以以不创建它的方式编码吗？

换句话说，可以抛出异常但不创建异常对象吗？

一个示例 - 使用 System.Net.Sockets.Socket 的简单示例

```
 Socket acceptingSocket;
acceptingSocket.Blocking = false;

while(condition)
{
    try
    {
        Socket acceptedSocket = acceptingSocket.Accept(); //(i)
        doWork(acceptedSocket);
    }
    catch{}
} 
```

因为如果没有连接接受 SocketException 在点 (i) 抛出并且条件循环继续，则套接字处于非阻塞模式。

使用此代码实现 - 会创建 SocketException 对象吗？

如果它被创建 - 有没有办法不创建它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T10:24:10.433

是的，它将被创建。不，没有办法避免这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-22T10:24:25.063

它会一直被创建。AFAIK 没有办法阻止创建异常对象...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-22T10:25:37.357

抛出异常时总是会创建一个 Exception 对象。您所做的只是指定您不关心异常是什么类型并且您不需要引用它。`doWork`如果抛出异常，将不会被调用`acceptingSocket.Accept`。

您的代码相当于：

```
catch(Exception) {} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-22T10:27:30.037

你不能抑制异常，你只能忽略它们。在任何情况下，昂贵的不是创建 Exception 对象——而是抛出异常时发生的堆栈遍历。

还，

```
catch(SocketException) {} 
```

不是

```
catch { } or catch(Exception) { } 
```

:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-22T13:19:48.767

我认为这无关但很重要。

为什么您的套接字在循环内处于非阻塞模式？如果套接字没有传入连接，您只需无限期地再次进入循环，直到有这样的连接。你在这里做的是[忙着等待](http://en.wikipedia.org/wiki/Busy_waiting)，它会占用大量的 CPU 资源——正在创建的异常真的不应该让你担心。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-22T10:45:57.127

已经指出你无法阻止它，但我想指出原因。您调用的代码可能在您的代码之前编写。并且在编写时，已经确定了引发异常的情况。您在代码中所做的任何事情都无法及时返回并更改被调用者的开发人员所做的决定。

请注意，智能虚拟机可能能够在 JITting 时消除异常。与您和其他开发人员不同，它看到双方结合在一起，并且可以根据结合做出明智的决策。x86 异常模型无论如何都与 .Net 异常模型不匹配，因此 VM 已经必须执行智能映射。例如，在这种情况下，它可能会通过返回一个空指针而不是 - 您的代码不会注意到。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-22T11:00:22.030

除非您的代码或环境真的搞砸了，否则不要担心偶尔出现异常的性能成本。异常总是在运行时发生，这没什么大不了的。当然，如果你最终做了一些疯狂的事情，比如走过数组的末尾，这样你就可以跳过对数组长度的测试，如果你的方法被频繁调用，这将会受到伤害。

尽量避免不必要地投掷/造成它们。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-23T18:45:39.303

如前所述，如果一个异常被捕获并被忽略，那么它就会被创建并抛出。当异常情况已经发生时，没有办法抑制异常的创建和抛出，但是，通常可以采取一些措施来防止异常情况发生。

在您的情况下，您使用的是 Socket。可能引发 SocketException 的原因有很多……例如尝试从关闭的套接字中读取。为了防止抛出异常，您需要在启动读取之前验证套接字是否仍然打开。这将导致在每次读取之前检查套接字状态的额外成本，但从长远来看，您可能会在达到从关闭的套接字读取并引发异常所产生的开销水平之前执行数千次此类检查。

通常，执行此类检查只是一种良好的编程习惯。我们应该编写尽可能避免异常情况的代码。一个典型的例子是在访问参数和其他变量的方法或属性之前检查参数和其他变量是否为空，这样可以避免可怕的 NullReferenceException（在正确编写的应用程序中，永远不应该抛出的异常。）

始终意识到代码中可能出现的异常情况需要一点时间和经验，但是如果您尝试用心去思考它，您将能够在大多数情况下通过验证您的输入来避免异常，收到的数据等，然后再以会导致异常的方式使用它。

# jquery - JQuery 中的 CleanCalendar

> ID：897217
> 
> 赞同：0
> 
> 时间：2009-05-22T10:20:06.947
> 
> 标签：jquery

我使用 calendar.js 文件在我的应用程序中实现日历。实际上这个日历 .js 有一行接受我的应用程序的类名和 Div id 名称。

在我的应用程序中，我有这些行

```
 <input type="text" class="calendarSelectDate" />
 <div id="calendarDiv"></div> 
```

当我单击此文本框时，它将在 DIv 标记中生成日历..

..但是如果我使用 JQuery 创建了我自己的输入标签和 Div 标签

$("1").appendTo("#hold1"); $("").appendTo("#hold1"); 并使用相同的类，日历没有生成....建议我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T10:32:03.740

calendar.js 脚本在加载时运行，并连接显示日历所需的事件。如果稍后使用 jQuery 添加输入和 div，则不会关联事件。

如果您使用 jQuery 将它们添加到您自己的脚本中，您只需将 calendar.js-script 标签移动到包含您的代码的脚本标签之后即可解决您的问题。

如果在页面加载后动态添加元素，则必须弄清楚 calendar.js 的内部工作原理，然后再次调用它的初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T10:28:07.163

我不熟悉 CleanCalendar，我对 JQueryUI Datepicker control 有很好的[经验](http://jqueryui.com/demos/datepicker/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T10:30:51.387

您应该在创建 div 并使用 jquery 输入之后调用接受类名和 div ID 的行。

可能，当您调用该行时，它会将“showCalendar”事件绑定到具有这些类/id 的元素。但是由于您在创建事件（我假设）之后创建了 div/input，因此该事件不会绑定到这些动态创建的元素。

# iphone - iPhone 应用程序处于非活动状态时的 NSTimer 回调

> ID：897225
> 
> 赞同：5
> 
> 时间：2009-05-22T10:25:25.033
> 
> 标签：iphone, nstimer

这个问题似乎是这个论坛上其他几个人的本质。我相信活动的 iPhone 应用程序有可能继续运行，特别是在进入非活动状态后继续接收计时器回调（通过空闲计时器启动屏幕锁定，或通过用户按下硬件锁定按钮）。

该文档特别指出，当应用程序处于非活动状态时，它正在执行，但不发送传入事件（我没有提供链接，因为我对 NDA 感到不安——我应该放松一下吗？整个帖子是否违反了？*叹息*）。

此外，用户“Ambr Str”的两个答案直接表明可以继续接收计时器回调，并且他提供了一段代码来实现它（我无法链接到这个，因为我是一个新用户，抱歉 - 搜索以下问题：“当 iPhone 进入待机模式时，iPhone 应用程序会发生什么情况？”找到他的答案）。

我尝试按照他的建议创建回调，但是一旦我的应用程序变为非活动状态，回调就会停止触发。

我刚刚注意到，当 iPhone 插入时，如果应用程序变为非活动状态（由于空闲超时或我按下睡眠按钮），回调确实会继续发生 - 也许我应该让我的用户携带电池和他们一起打包；-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T11:31:22.527

这个问题在 Apple 的论坛上有一个很好的答案。搜索“计时器”和“爱斯基摩人”（提供答案的乐于助人的小伙子）。

简而言之，在应用程序变为非活动状态后不久，手机确实进入睡眠状态。防止这种情况的唯一方法是播放一些音频（或在后台应用程序中播放一些音频）。在播放音频时，手机不会休眠，您的应用程序会继续运行。

建议播放保持清醒的音频是一种技巧，如果可能的话，你不应该这样做。我认为在我的应用程序（执行穿插有静默期的音频播放）中，该方法是有效的，即使不是理想的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-23T19:06:17.613

我有一个应用程序。其中包括一个嵌入式网络服务器。我计划提供禁用自动睡眠 IFF 服务器已打开且设备已通电的选项。所以你可以考虑检查 UIDevice 的 batteryState 属性。因此，如果 batteryState != UIDeviceBatteryStateUnplugged，请继续禁用空闲计时器。（注意：文档说 UIDeviceBatteryStateUnknown 将在模拟器中返回。）

您还需要监听 UIDeviceBatteryStateUnplugged 通知并适当地设置 batteryMonitoringEnabled。

# c# - 使用 .NET 应用程序中的模板生成 HTML

> ID：897226
> 
> 赞同：11
> 
> 时间：2009-05-22T10:25:27.763
> 
> 标签：c#, .net, html, template-engine

我有一个需要生成一些 HTML 文件的 .NET 控制台应用程序。我可以在 StringBuilder 中构造 HTML 并将内容写入文件，但我认为最好使用某种带有占位符的模板文件来指示数据的去向，然后在运行时通过它处理我的数据。

我猜有一些方法可以使用 aspx、T4 或一些可以与 ASP.NET MVC 一起使用的替代视图引擎，但我不知道什么最容易集成到控制台应用程序中（或者如何我会去整合它们）。

我希望最终能够调用以下形式的东西：

```
 GenerateHtml(htmlPath, template, customDataObject); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-22T10:29:16.787

您可以这样做的一种方法是创建一个 XSL 文件作为模板，将您的`customDataObject`作为 XML 序列化，然后执行转换以生成所需的 HTML。

**更新：**虽然我喜欢（并且确实使用）这里其他人提倡的字符串替换方法，但使用 XML/XSL 有一定的灵活性。假设您的对象有一个列表属性，例如带有行项目对象列表的订单对象，您几乎必须在代码中写入必须呈现行项目的逻辑。

使用 XSL，您只需将序列化的订单对象 XML 传递给 XSL，让 XSL 处理它需要生成的任何 HTML。这意味着您通常可以在适当的位置编辑 XSL 或拥有变体（订单摘要、详细订单等），而无需为您的应用程序添加额外的代码，而无需重新构建/部署所有额外的麻烦。

但这一切都取决于您需要渲染的复杂性，对于某些作业，字符串替换更为明显，而对于其他作业，XSL 是一种方式。正如我所说，我们同时使用两者。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-22T10:38:52.697

这是一些代码，说明了一种相当简单的方法来完成您正在尝试做的事情：

```
using System;
using System.IO;

public class HtmlTemplate
{
    private string _html;

    public HtmlTemplate(string templatePath)
    {
        using (var reader = new StreamReader(templatePath))
            _html = reader.ReadToEnd();
    }

    public string Render(object values)
    {
        string output = _html;
        foreach (var p in values.GetType().GetProperties())
            output = output.Replace("[" + p.Name + "]", (p.GetValue(values, null) as string) ?? string.Empty);
        return output;
    }
}

public class Program
{
    void Main()
    {
        var template = new HtmlTemplate(@"C:\MyTemplate.txt");
        var output = template.Render(new {
            TITLE = "My Web Page",
            METAKEYWORDS = "Keyword1, Keyword2, Keyword3",
            BODY = "Body content goes here",
            ETC = "etc"
        });
        Console.WriteLine(output);
    }
} 
```

使用它，您所要做的就是创建一些 HTML 模板并用可替换的标记（例如 [TITLE]、[METAKEYWORDS] 等）填充它们。然后传入包含要替换标记的值的匿名对象。您还可以用字典或类似的东西替换值对象。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-22T11:36:00.677

查看[文档](http://github.com/jagregory/docu/tree/master)。它使用 Spark 视图引擎从控制台应用程序[呈现模板化的 HTML 。](http://github.com/jagregory/docu/blob/bbbd08669ccd1ac5b0c779dbc7044177b79153e3/src/Docu.Console/Output/HtmlGenerator.cs)很简单。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-22T12:39:12.483

正如马特所提到的，spark 很不错，但是对于一些简单的模板来说它可能有点过分了，如果你不在 MVC 中使用它，它就会变得复杂。

我个人在 NVelocity 方面取得了很大的成功，我还发布了一个简单的示例/包装器来使用它：[http ://simpable.com/code/simpletemplate/](http://simpable.com/code/simpletemplate/)

此外，GraffitiCMS 的整个主题系统在 NVelocity 上运行（尽管如果它可用于此任务，我会使用 spark）。

-斯科特

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-22T10:41:36.980

另一个替代 Kev 建议的使用 XSLT 的选择是使用命名字符串格式。使用Phil Haack 的[这个例子的代码。](http://haacked.com/archive/2009/01/14/named-formats-redux.aspx)

在这里，您可以将模板作为字符串（可能从文件中读取）并使用给定的对象对其进行格式化。

现在你可以做这样的事情：

```
var person = new { FirstName = "rune", LastName = "grimstad" };
string template = "<html><body><h1>Hello {FirstName} {LastName}</h1></body></html>";
string html = NamedFormat(template, person); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-01-06T13:37:31.143

有很多 HTML 模板引擎/生成器。

只需根据您的需要选择任何一个。

祝你好运。

*   [https://github.com/dotliquid/dotliquid（DotLiquid](https://github.com/dotliquid/dotliquid)是流行的Ruby **Liquid**模板语言的 .Net 端口。它是一个单独的项目，旨在保留与原始模板语法相同的模板语法，同时使用 .NET 编码约定，其中可能的）
*   [https://github.com/StubbleOrg/Stubble](https://github.com/StubbleOrg/Stubble)（**Stubble**修剪了 .NET 中的 {{mustache}} 模板是 C# 中 Mustache 模板系统的实现）
*   [https://github.com/scriban/scriban（Scriban](https://github.com/scriban/scriban)是一种快速、强大、安全和**轻量级**的 .NET 脚本语言和引擎，主要为文本模板开发，具有解析液体模板的兼容模式）
*   [https://github.com/sebastienros/fluid（Fluid](https://github.com/sebastienros/fluid)是一个**开源**的 .NET 模板引擎，它尽可能接近 Liquid 模板语言。它是一种安全的模板语言，对于非程序员受众来说也很容易上手。它还包含一个 ASP.NET Core MVC 视图引擎）
*   [https://github.com/jdiamond/Nustache（Nustache](https://github.com/jdiamond/Nustache) - .NET 的**无**逻辑模板）
*   [https://github.com/Handlebars-Net/Handlebars.Net（Handlebars](https://github.com/Handlebars-Net/Handlebars.Net) .js 是 Chris Wanstrath创建的 Mustache 模板语言的扩展**。Handlebars.js**和 Mustache 都是保持视图和代码分离的无逻辑模板语言就像我们都知道他们应该是）
*   [https://github.com/Antaris/RazorEngine](https://github.com/Antaris/RazorEngine)（**RazorEngine**是基于微软 Razor 解析引擎构建的模板引擎，RazorEngine 允许您使用 Razor 语法构建动态模板。）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-17T12:47:34.673

有几种方法，

1-使用视图引擎（Razor，Spark，...） - 如果您使用 mvc，这很好

2-[使用 XSLT 文件并将给定的 xml 转换为](http://www.codeproject.com/Articles/12047/How-to-Convert-XML-Files-to-HTML)Html

3-[使用 T4 文本模板](https://msdn.microsoft.com/en-us/library/ee844259.aspx)（最佳性能，易于理解）

# c++ - 在 C++ 中制作简单的跨平台 GUI 的最佳方法是什么？

> ID：897228
> 
> 赞同：5
> 
> 时间：2009-05-22T10:25:51.020
> 
> 标签：c++, visual-studio, user-interface, cross-platform

我想用一个非常简单的 GUI（背景图形、取消按钮和进度条）制作一个桌面应用程序。

我的主要目标是 Mac 和 Windows。

这可能使用 Visual C++ 2008 吗？

谁能指出使用 Visual C++ 的任何示例？

还是有更好的方法来单独创建 GUI？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-05-22T10:30:14.350

使用 Qt4。[http://qt-project.org/](http://qt-project.org/)

这是一个自包含的框架，其中包含开发人员工具、GUI 构建器、String/IO/XML/Thread 类、音频/视频控件、HTML 小部件和许多更多功能。它被构建为完全多平台，一个代码适用于所有系统。

与 wxWidgets 相比，它感觉更面向对象，并且拥有更好的文档和更好的维护。

在线查看：http: [//qt-project.org/doc/qt-4.8/](http://qt-project.org/doc/qt-4.8/)

编辑-自原始答案以来已有 6 年。我应该指向 Qt5 - [http://www.qt.io/](http://www.qt.io/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-22T10:28:23.963

我会推荐[wxWidgets](http://www.wxwidgets.org/)。它是跨平台的，可与 Visual C++ 一起使用。

还有 Qt（参见 Colins 帖子），它是 KDE（Linux 桌面管理器）使用的。虽然它有一个更严格的许可证。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-05-22T10:34:02.080

你也可以看看[FLTK](http://fltk.org/)

> FLTK（发音为“fulltick”）是一个跨平台的 C++ GUI 工具包，适用于 UNIX®/Linux® (X11)、Microsoft® Windows® 和 MacOS® X。FLTK 提供现代 GUI 功能而不会臃肿，并通过 OpenGL® 支持 3D 图形及其内置的 GLUT 仿真。
> 
> FLTK 设计为足够小且模块化，可以静态链接，但作为共享库可以正常工作。FLTK 还包括一个名为 FLUID 的优秀 UI 构建器，可用于在几分钟内创建应用程序。

以下是一些快速入门[截屏视频](http://seriss.com/people/erco/fltk-videos/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-22T10:37:14.057

1.  [GTK+](http://www.gtk.org/)
2.  [QT](http://www.qtsoftware.com/products/)
3.  [wxWidgets](http://www.wxwidgets.org/)

如果您询问的是 .NET（假设这就是 Visual C++ 2008），那么 Linux 和 Mac OS X 用户都可以使用[Mono](http://www.mono-project.com/Main_Page)运行 .NET 应用程序。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-22T10:44:25.867

由于用户界面非常简单，我建议您从 Windows 开始使用 Visual Studio，并将所有用户界面内容保存在单独的文件中，将其与应用程序的其余部分完全分离。

然后，在 OS X 上，您将通过创建 Cocoa 应用程序并结合 Interface Builder 在 Objective C 中编写用户界面来获得最佳视觉效果。然后，您可以轻松地将接口与您的内部 C++ 代码挂钩。（Objective C 编译器理解与 Objective C 代码相同的文件中的 C++ 代码。）

这将让您生成一个在 Windows 和 OS X 上看起来都恰到好处的跨平台应用程序，这是 QT 或其他跨平台工具包可能永远无法完全实现的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-22T10:29:21.297

我建议你看看[Qt](http://www.qtsoftware.com/products/)工具包。它包含跨平台的 UI 元素。可以将其与 VS2008 一起使用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-22T10:37:36.257

Gtkmm 是 C++ 并且被证明可以在带有 Visual Studio 的 linux 和 windows 中工作。

# visual-studio-2008 - 设计时错误 - 具有相同 ID 的多个控件

> ID：897236
> 
> 赞同：0
> 
> 时间：2009-05-22T10:28:31.157
> 
> 标签：visual-studio-2008

我正在使用 VS 2008，我有一个非常简单的页面，其中包含一堆唯一命名的控件。当我尝试在设计模式下查看它时，出现以下错误：

```
Error Rendering Control - Label12
An unhanded exception has occurred.
Multiple controls with the same ID 'Label1' were found. FindControl requires that controls have unique IDs 
```

我检查了 HTML 和设计器文件，我只能看到一个名为 Label1 的控件。这可能是什么原因造成的？

另外，这是我遇到问题的 aspx 标记？

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="CoachingAppearanceReport.aspx.vb"
    Inherits="AcademyPro.CoachingAppearanceReport" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <div id="appearanceDetail" class="Left CriteriaContainer">
                <asp:Label ID="Label1" runat="server" Text="Appearance Type" AssociatedControlID="ddlAppearanceType" />
                <asp:DropDownList ID="ddlAppearanceType" runat="server" CssClass="AppType" OnDataBound="ddlAppearanceType_DataBound"
                    DataSourceID="odsAppearanceType" DataTextField="AppearanceType" DataValueField="AppearanceTypeCode">
                </asp:DropDownList>
                <asp:RequiredFieldValidator ID="rfvAppearanceType" runat="server" 
                    ControlToValidate="ddlAppearanceType" InitialValue="" Text="*"
                    ErrorMessage="The appearance type must be selected" />
                <asp:Label ID="lblAppearanceType" runat="server" />
                <br />

                <div class="SubSettings">
                    <asp:Label ID="Label12" runat="server" Text="Subbed for" AssociatedControlID="ddlSubbedFor" />
                    <asp:DropDownList ID="ddlSubbedFor" runat="server" OnDataBound="ddlSubbedFor_DataBound"
                        DataSourceID="odsPlayersInAgeGroup" DataTextField="PlayerName" DataValueField="PlayerID">
                    </asp:DropDownList>
                    <asp:Label ID="lblSubbedFor" runat="server" />
                    <br />
                    <asp:Label ID="Label13" runat="server" Text="Mins" AssociatedControlID="txtSubMins" />                    
                    <asp:TextBox ID="txtSubMins" runat="server" MaxLength="3" CssClass="TinyWidth" />
                    <asp:Label ID="lblSubMins" runat="server" />
                </div>
            </div>
        </ContentTemplate>
    </asp:UpdatePanel>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-22T12:00:39.443

这是一个“网络应用程序项目”吗？

您的“ `.designer.cs`”文件可能已损坏/过期，并且其中包含两个“Label1”副本，这可能会导致您的问题。

如果是这种情况，请删除“ `.designer.cs`”文件的内容并返回到您的标记中。在文件的标题行之后添加一个换行符，保存页面，然后删除该行并保存页面。这将强制重新生成设计器，这可能会解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-15T18:43:51.790

我刚刚发现了同样的事情——它是 asp:label 上的**AssociatedControlID 。**当我删除设计器错误时，它就消失了。什么？

# html - 网站按钮

> ID：897239
> 
> 赞同：0
> 
> 时间：2009-05-22T10:28:53.277
> 
> 标签：html, css, graphics

我需要为 Web 应用程序创建一些按钮。但是，我根本没有图形/Photoshop 技能。是否有一个网站/软件可以让我简单地为我的按钮输入文本，它会在顶部吐出带有这些词的图形图像？

我不介意完全避免图形，但链接必须看起来像一个按钮。例如一个盒子。Stackoverflow 上的按钮对我的口味来说太简单了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T10:37:03.683

您可以使用[Google 的按钮方法](http://stopdesign.com/archive/2009/02/04/recreating-the-button.html)。

它们是由 HTML 元素而不是图形创建的。这样做的主要优点是您可以动态创建一个带有任何文本的漂亮按钮，如果您有很多按钮或多种语言来显示您的网站，这很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T10:31:54.003

您可以查看[MyCoolButton](http://www.mycoolbutton.com/)，但样式有限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T10:42:30.193

以下是我所知道的一些：

1.  [纽扣器](http://www.buttonator.com/)
2.  [我的酷按钮](http://www.mycoolbutton.com/)
3.  [作为按钮生成器](http://jirox.net/AsButtonGen/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T10:42:32.533

如果您使用 Mac OS X，则可以使用[Button Builder](http://www.buttonbuilderapp.com/)。

此外，虽然它不如生成自己的按钮图形那么好，但您可以简单地使用浏览器的默认按钮：

```
<input type="button" value="My Button" /> 
```

史蒂夫

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-22T10:52:26.193

如果你不介意进入 CSS，你可以生成一些看起来像 winforms 按钮的东西：

```
.button {
    font:"Microsoft Sans Serif";
    font-size:small;
    background:#CCCCCC;
    border:solid;
    border-width:thin;
    border-left-color:#FFFFFF;
    border-top-color:#FFFFFF;
    border-right-color:#666666;
    border-bottom-color:#666666;
    padding-left:12px;
    padding-right:12px
} 
```

或者这个看起来像键盘上的键：

```
.key {
    font:"Microsoft Sans Serif";
    font-size:small;
    color:#FFFFFF;
    background:#000000;
    border:solid;
    border-width:medium;
    border-left-color:#999999;
    border-top-color:#999999;
    border-right-color:#333333;
    border-bottom-color:#333333;
    padding-left:3px;
    padding-right:3px
} 
```

要使用它，只需将文本包围：

```
<span class="button">Button Text</span>
<span class="key">Key Text</span> 
```

我不认为我可以在这里发布一个例子，但是如果你看[这里](http://www.chrisforman.me.uk/2009/03/album-shuffle-random-playlist-generator/)你可以看到它在运行。

我将是第一个承认它们相当简单的人，但它们看起来确实像一个按钮；）我敢肯定，对 CSS 进行一些修改可以得到更好的结果——特别是如果你改变了颜色。

# multithreading - PBS（扭矩）未能将四核处理器视为 4 个处理器

> ID：897241
> 
> 赞同：1
> 
> 时间：2009-05-22T10:29:08.863
> 
> 标签：multithreading, scheduling, cluster-computing, pbs

我有一个 Debian 集群，每个节点有 2 个节点和两个四核处理器。我使用 Torque 和 Maui 作为调度程序。当我尝试运行具有 16 个进程的 MPI 作业时，调度程序无法运行该作业：要么将其放入队列（尽管当时没有任何作业在运行），要么运行并且生成的输出文件说你试图运行一个只有 4 个处理器的 16 个进程的作业。

我的 .../pbs/server_priv/nodes 文件如下所示：

```
node1 np=8
node2 np=8 
```

我用来运行程序的脚本示例如下：

```
#!/bin/sh

#PBS -d /home/bellman/

#PBS -N output
#PBS -k oe
#PBS -j oe
#PBS -l nodes=2:ppn=8,walltime=10000:00:00
#PBS -V

ulimit -s 536870912

# How many procs do I have?
NP=$(wc -l $PBS_NODEFILE | awk '{print $1}')
echo Number of processors is $NP

mpiexec -np 16 /home/bellman/AAA 
```

我尝试了很多节点和 ppn 的组合，但是发生了两个错误之一。关于发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T19:35:31.823

你试过了吗 ：

```
#PBS -l nodes=2:ncpus=8,walltime=10000:00:00 
```

# c# - 在这种情况下，警告 CS3006 是否有效？

> ID：897249
> 
> 赞同：3
> 
> 时间：2009-05-22T10:31:25.613
> 
> 标签：c#, .net, cls-compliant

下面的代码生成警告 CS3006“重载的方法 MyNamespace.Sample.MyMethod(int[])' 仅在 ref 或 out 或数组等级中不同，不符合 CLS”。

这个警告是否有效，即这真的不符合 CLS 吗？我原以为显式接口实现不会算作重载。

```
[assembly: CLSCompliant(true)]
namespace MyNamespace
{

    public class Sample : ISample
    {
        public void MyMethod(int[] array)
        {
            return;
        }

        void ISample.MyMethod(ref int[] array)
        {
            this.MyMethod(array);
        }
    }

    public interface ISample
    {
        void MyMethod([In] ref int[] array);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T13:35:11.123

CLS 合规性仅适用于您班级的可见部分。因此，您会认为`ref int[]`不`public`相关，因此不相关。但它是可见的，通过界面。

您的代码的用户知道`Sample`提供`void MyMethod(int[])`. 他们也知道它实现`ISample`了提供`void MyMethod(ref int[])`. 因此，我相信它实际上不符合 CLS。

* * *

编辑：[Eric Lippert](http://blogs.msdn.com/ericlippert/default.aspx)对原始问题发表了评论，他认为这实际上是一个编译器错误，并且原始代码符合 CLS。

* * *

但是，这是有效的：

```
[assembly: CLSCompliant(true)]
namespace MyNamespace
{
    public class Sample : ISample, ISample2
    {
        void ISample.MyMethod(ref int[] array)
        {
        }

        void ISample2.MyMethod(int[] array)
        {
        }
    }

    public interface ISample
    {
        void MyMethod(ref int[] array);
    }

    public interface ISample2
    {
        void MyMethod(int[] array);
    }
} 
```

这是因为 CLS 定义了两个接口可以定义具有相同名称或签名的冲突方法，并且编译器必须知道如何区分 - 但同样，只有当冲突发生在两个接口之间时。

# java - 如何正确使用泛型类型的数组？

> ID：897251
> 
> 赞同：21
> 
> 时间：2009-05-22T10:31:59.557
> 
> 标签：java, generics

我有一个类，可以根据消息的类将传入的消息映射到匹配的阅读器。所有消息类型都实现接口消息。读取器在映射器类中注册，说明它将能够处理哪些消息类型。这些信息需要以某种方式存储在消息阅读器中，我的方法是`private final`从构造函数中设置一个数组。

现在，我似乎对泛型和/或数组有一些误解，我似乎无法弄清楚，请参阅下面的代码。它是什么？

```
public class HttpGetMessageReader implements IMessageReader {
    // gives a warning because the type parameter is missing
    // also, I actually want to be more restrictive than that
    // 
    // private final Class[] _rgAccepted;

    // works here, but see below
    private final Class<? extends IMessage>[] _rgAccepted;

    public HttpGetMessageReader()
    {
        // works here, but see above
        // this._rgAccepted = new Class[1];

        // gives the error "Can't create a generic array of Class<? extends IMessage>"
        this._rgAccepted = new Class<? extends IMessage>[1];

        this._rgAccepted[0] = HttpGetMessage.class;
    }
} 
```

**ETA**： *正如 cletus 正确指出的那样，最基本的谷歌搜索表明 Java 不允许泛型数组。对于给出的示例，我绝对理解这一点（例如`E[] arr = new E[8]`，`E`周围类的类型参数在哪里）。但为什么是`new Class[n]`允许的？那么做到这一点的“正确”（或至少是常见的）方法是什么？*

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-05-22T10:34:46.480

Java 不允许使用[泛型数组](http://www.google.com.au/search?hl=en-GB&q=java+generics+arrays&sourceid=navclient-ff&rlz=1B3GGGL_en-GBAU319AU319&ie=UTF-8)。[Java 泛型常见问题解答](http://www.angelikalanger.com/Articles/Papers/JavaGenerics/ArraysInJavaGenerics.htm)中的更多信息。

要回答您的问题，只需使用[List](http://java.sun.com/javase/6/docs/api/java/util/List.html)（可能是[ArrayList](http://java.sun.com/javase/6/docs/api/java/util/ArrayList.html)）而不是数组。

更多解释可以在[Java 理论和实践中找到：泛型陷阱](http://www.ibm.com/developerworks/java/library/j-jtp01255.html)：

> ## 泛型不是协变的
> 
> 虽然您可能会发现将集合视为数组的抽象很有帮助，但它们具有一些集合所没有的特殊属性。Java 语言中的数组是协变的——这意味着如果 Integer 扩展了 Number（它确实如此），那么不仅 an`Integer` 也是 Number，而且 an`Integer[]`也是 a `Number[]`，并且您可以自由地传递或分配 an调用`Integer[]`a 的位置`Number[]`为了。（更正式地说，如果`Number`是 的超类型`Integer`，则`Number[]`是 的超类型`Integer[]`。）您可能认为泛型类型也是如此——这`List<Number>` 是 的超类型`List<Integer>`，并且您可以在预期a 的`List<Integer>` 地方传递 a。`List<Number>`不幸的是，它不是那样工作的。
> 
> 事实证明，它不能那样工作是有充分理由的：它会破坏泛型应该提供的类型安全。想象一下，您可以将 a 分配 `List<Integer>`给 a `List<Number>`。然后下面的代码将允许您将不是 a 的 `Integer`内容放入 a 中`List<Integer>`：
> 
> ```
> List<Integer> li = new ArrayList<Integer>();
> List<Number> ln = li; // illegal
> ln.add(new Float(3.1415)); 
> ```
> 
> 因为 ln 是 a `List<Number>`，添加 a`Float`似乎完全合法。但是如果 ln 用 li 作为别名，那么它会破坏 li 定义中隐含的类型安全承诺——它是一个整数列表，这就是泛型类型不能协变的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-22T11:05:01.613

克利图斯说的没错。通常强制执行的泛型类型参数的不变性与 Java 数组的协变之间存在普遍的不匹配。

（一些背景：Variance 指定了关于子类型的类型如何相互关联。即因为泛型类型参数是不变的 Collection <: Collection 不成立。因此，关于 Java 类型系统，String 集合不是 CharSequence 集合。数组是协变的表示对于任何类型 T 和 U，T<:U, T[] <: U[]。所以，你可以将 T[] 类型的变量保存到 U[] 类型的变量中。既然有一个自然的需要对于其他形式的差异，Java 至少允许为这些目的使用通配符。）

我经常使用的解决方案（实际上是 hack）是声明一个生成数组的辅助方法：

```
public static <T> T[] array(T...els){
    return els;
}
void test(){
    // warning here: Type safety : A generic array of Class is created for a varargs parameter
    Class<? extends CharSequence>[] classes = array(String.class,CharSequence.class);
}
```

由于擦除，生成的数组将始终是 Object[] 类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-22T11:02:55.363

> 那么做到这一点的“正确”（或至少是常见的）方法是什么？

```
@SuppressWarnings(value="unchecked")
public <T> T[] of(Class<T> componentType, int size) {
    return (T[]) Array.newInstance(componentType, size);
}

public demo() {
    Integer[] a = of(Integer.class, 10);
    System.out.println(Arrays.toString(a));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-22T10:43:11.907

数组始终是特定类型，与泛型之前的集合不同。

代替

```
Class<? extends IMessage>[] _rgAccepted; 
```

你应该简单地写

```
IMessage[] _rgAccepted; 
```

泛型不参与其中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-22T17:26:08.147

恕我直言，

```
this._rgAccepted = (Class<? extends IMessage>[])new Class[1]; 
```

*是*处理此问题的适当方法。数组组件类型必须是具体化类型，并且`Class`是最接近`Class<whatever>`. 它会像你期望的那样`Class<whatever>[]`工作。

是的，从技术上讲，它是未经检查的，如果你将它转换为另一个更通用的数组类型并在其中放入错误的东西，可能会在以后导致问题，但由于这是你类中的私有字段，我认为你可以确保它被正确使用。

# flash - 托管 AS2 swf 的 AS3 swf 如何共享同一个阵列？

> ID：897260
> 
> 赞同：0
> 
> 时间：2009-05-22T10:35:20.627
> 
> 标签：flash, actionscript-3, actionscript, actionscript-2, localconnection

我有一个 AS2 swf，它有一个数组，当用户单击屏幕上的项目时，该数组会更新。该数组存储当前选定的项目。这个 As2 swf 由使用 Loader 类加载的 AS3 swf 托管，它们之间的本地连接由 swfBridge 管理。

我想知道 AS3 和 AS2 swfs 共享这个数组的最佳方式是什么？或者当它需要从数组中读取项目时，如何调用 AS2（客户端）swf 中的函数并将数组返回给 AS3（主机）swf？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T04:39:38.900

您可以使用本地连接，并授予 skinner 专门为此目的创建的 swfBridge：

[http://www.gskinner.com/blog/archives/2007/07/swfbridge_easie.html](http://www.gskinner.com/blog/archives/2007/07/swfbridge_easie.html)

如果您在使用数组时遇到任何夸克，我记得奇怪的事情，例如在执行 for each 循环时长度是其中的一个值……只是提醒一下。

# windows - 检测硬件覆盖

> ID：897278
> 
> 赞同：0
> 
> 时间：2009-05-22T10:42:51.627
> 
> 标签：windows, winapi

如何检测给定窗口是否具有硬件覆盖面？（如 MediaPlayer、WinDVD、VLC、...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-09-03T05:21:47.463

覆盖表面与任何系统窗口无关，原则上，它们是要与视频帧缓冲区（或主显示表面）“组合”的表面*。*您可以检测的是（取决于您的 API）硬件是否支持覆盖、有多少平面、支持的格式（YUV 等）等等。例如，这可以通过 DX 和 OpenGL 完成。

过去通过覆盖完成的许多任务现在可以通过现代窗口管理器的组合支持来完成，例如：compiz、Vista 中的 DWM、OSX 中的 Quartz。事实上，我认为不鼓励使用原始覆盖表面进行编程，因为 WM 正在为应用程序开发人员提供这样的组合工具。

# sql-server - SQL Server Analysis Services 2008 和 ByAccount 聚合

> ID：897287
> 
> 赞同：0
> 
> 时间：2009-05-22T10:46:28.000
> 
> 标签：sql-server, ssas

我在让“ByAccount”聚合在 SQL Server Analysis Services (SSAS) 2008 中工作时遇到问题。

我正在尝试创建一个包含资产负债表和损益表元素的财务报告解决方案。

我有一个事实表，其中包含一个月级别的数据。目前我对此表感兴趣的一项度量是“报告金额”，并且 AggregateFunction 属性设置为“按帐户”。

我有一个由 Year 和 Period 组成的时间维度，Year 设置为“ReportingYear”类型，Period 设置为“ReportingMonthOfYear”。

我有一个“帐户”维度，由以下属性组成：AccountId（设置为 AccountNumber 类型）、AccountType（设置为 AccountType）、ParentAccountId（设置为类型 Account 和使用父项）。

如果我转到“编辑数据库”，我可以看到设置了适当的帐户类型映射，并且资产负债表类型设置为“LastNonEmpty”。

但是，ByAccount 根本没有生效，我没有得到任何与“LastNonEmpty”聚合的东西。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T13:56:59.393

我最终发现问题似乎在于我的 AccountType 列是一个整数 Id。将其更改为包含实际帐户类型描述（例如“资产”、“负债”等）的字符串解决了该问题。

# compilation - 什么是交叉编译？

> ID：897289
> 
> 赞同：59
> 
> 时间：2009-05-22T10:47:22.600
> 
> 标签：compilation, cross-compiling

什么是交叉编译？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2009-05-22T10:50:05.107

[交叉编译](http://en.wikipedia.org/wiki/Cross_compilation)是在称为主机的不同系统上为一个计算机系统（通常称为目标）编译代码的行为。

这是一种非常有用的技术，例如当目标系统太小而无法承载编译器和所有相关文件时。

常见的例子包括许多嵌入式系统，但也包括典型的游戏机。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-03-16T05:22:07.817

交叉编译器将源代码从一种架构编译到另一种架构。

例如： `hello.c`

1.  `gcc hello.c` （gcc 是 x86 架构的编译器。）
2.  `arm-cortexa8-linux-gnueabihf-gcc hello.c`
    （arm-....-gcc 是用于 arm 架构的编译器。）这是您在主机 pc 上为目标板（例如 rpi、beaglebone、wega 板）编译的。在此示例`arm-cortexa8-linux-gnueabihf-gcc`中称为“交叉编译器”。

这个过程称为交叉编译。
查看链接了解更多信息[交叉编译](http://baruch.siach.name/blog/posts/introduction_to_cross_compilation_part_1/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2011-03-23T02:07:03.253

“交叉编译”是在 Linux 机器上编译源代码，目的是在 MAC 或 Windows 机器上运行它。这通常使用交叉编译插件来完成，该插件可从网络上的各种 Web 服务器上轻松获得。如果要在他们的 Linux 机器上安装一个交叉编译插件，该插件旨在为 Windows 机器编译。然后他们可以为 Linux/*NIX 机器进行编译，也可以选择编译和链接 Windows 就绪的可执行文件。这对于只能访问一个 Linux/Windows/MAC 机器的自由程序员来说非常方便。请注意，各种交叉编译插件将允许大量应用程序，其中一些您可能会或可能不会认为有用，因此请仔细阅读插件的 README 文件。

您是否有想将交叉编译方法应用到的特定项目？

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-22T12:21:16.843

从严格意义上讲，它是在一台主机上编译的代码旨在在另一台主机上运行。

最常用于参考编译与主机二进制不兼容的架构——例如，在 CISC CPU 平台上构建 RISC 二进制文件，或在 32 位系统上构建 64 位二进制文​​件。或者，例如，构建旨在在基于英特尔 PC 的操作系统上的嵌入式设备（可能使用 ARM CPU 架构）上运行的固件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-21T09:07:48.640

**交叉编译器**是一种能够为编译器运行所在平台以外的平台创建可执行代码的编译器。
例如，在 Windows 7 PC 上运行但生成在 Android 智能手机上运行的代码的编译器就是交叉编译器。

从一台机器上编译多个平台需要交叉编译器。
编译器可能无法在平台上运行，例如嵌入式系统的微控制器，因为这些系统不包含操作系统。
在半虚拟化中，一台机器运行许多操作系统，交叉编译器可以从一个主要来源为每个操作系统生成一个可执行文件。

# security - 如何调试 WScript.Shell 对象的 ASP 权限问题？

> ID：897293
> 
> 赞同：5
> 
> 时间：2009-05-22T10:47:57.263
> 
> 标签：security, asp-classic, vbscript, iis-6, permissions

我必须从一些旧的 ASP 应用程序运行命令行操作。

这是我的代码：

```
<%
    cmd = "%comspec% /c echo Hello"    

    set wsh = CreateObject("WScript.Shell")
    ireturn = wsh.Run(cmd, 0, true)
    set wsh = nothing
%> 
```

这是我收到的结果：

> Microsoft VBScript 运行时错误“800a0046”
> 
> 没有权限
> 
> /test.asp，第 6 行

你知道如何让 IIS6 运行这段代码吗？

*注意：当然我不必运行 echo 命令，但我想排除问题的任何其他原因。*

*更新：我尝试了 tomalaks 提到的大多数事情，但没有任何帮助。也许我可以稍微改变一下问题。**我该如何调试这个问题？***

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-22T11:27:08.213

ASP 通常被拒绝访问任何具有潜在危险的东西，例如 cmd.exe。检查 cmd.exe 上的文件权限，看看这是否适合您（我想是的）。

如果您*确实必须*使用 cmd.exe 来执行部分页面处理，请更改 cmd.exe 上的文件权限（不建议用于面向 Internet 的 Web 服务器），或者确保 ASP 页面运行的凭据未被拒绝访问该文件。

为此，请使用 IIS 管理控制台删除对 ASP 页面的“匿名访问”并改用 Windows 集成身份验证（如果可行），或者保留“匿名访问”并输入应使用的一组固定凭据默认的“IUSR_...”。

或者，如果您使用 cmd.exe 只是为了启动一个向 STDOUT 输出内容的程序，您可以尝试直接启动该程序，而无需将其包装在 cmd.exe 调用中。同样，运行 ASP 页面的用户需要访问该程序的可执行文件。

# c++ - 检查字符串内的浮点数并返回结果？

> ID：897295
> 
> 赞同：-1
> 
> 时间：2009-05-22T10:48:02.070
> 
> 标签：c++

我有一个文本文件，我将它转换成一个字符串。文件是这样的：`0.2abc 0.2 .2abc .2 abc.2abc abc.2 abc0.20 .2 . 20`

我想检查结果然后将其解析为单独的浮点数。结果是：`0.2 0.2abc 2 20 2abc abc0.20 abc`

这是解释性的：检查是否有 2 位数字（在 '.' （句号）之前和之后）是否带有 char。如果只有 1 个站点的 '.' 是数字“。” 将是句号。

我怎样才能解析一个字符串来分离这样的结果？我确实使用迭代器来检查“。” 和它的位置，但仍然卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T11:48:28.483

您需要做的第一件事是将输入拆分为单词。简单，只是不要使用 .getline() 而是依赖 `while (cin >> strWord) { /* do stuff with word*/ };

第二件事是尽早排除错误的输入词：2个字符或更少的词，超过一个`.`，或者第`.`一个或最后一个。

你现在知道`.`是在中间的某个地方。find() 会给你一个迭代器。++ 和 -- 为您提供下一个和上一个迭代器。* 为您提供迭代器指向的字符。isdigit() 告诉您该字符是否为数字。把配料加在一起，你就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-23T07:45:47.537

似乎上面有一些相当复杂的建议——不一定有用。

您的问题并没有完全清楚最终结果应该是什么样子。你想要一个浮点数数组吗？你只想要总和吗？你想打印出结果吗？

如果您在作业方面需要帮助，最好的策略是发布您自己的尝试，然后其他人可以帮助您改进它，使其发挥作用。

一种可能有帮助的方法是尝试将字符串分解为子字符串（令牌）并丢弃垃圾。

*   编写一个接受字符并返回 true（这是浮点数的一部分）或 false（不是）的函数。
*   使用迭代器或索引沿字符串扫描。
*   虽然当前字符不是令牌的一部分，但请跳过它。
*   如果您找到一个令牌字符，而当前字符是令牌的一部分，请将其复制到另一个字符串
*   等以获取所有浮点子字符串。
*   然后您可以使用 std::stringstream 或 ::atof() 进行转换。

试一试，然后发布您可以完成的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T10:53:52.447

听起来你可以使用一些正则表达式来提取你的号码。

试试这个正则表达式以提取字符串中的浮动值。

```
[0-9]+\.[0-9]+ 
```

请记住，这不会提取整数值。即234abc

我不知道是否有在 C++ 中使用正则表达式的内置方法，但我通过快速谷歌搜索找到[了这个](http://www.boost.org/doc/libs/1_39_0/libs/regex/doc/html/index.html)库，它允许你在 C++ 中使用正则表达式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T12:30:45.653

听起来你应该看看“解释器”设计模式。

或者您可以使用“状态”设计模式并手动完成。

网络上应该有很多这两种方法的例子。

# iphone - UITableViewCell / UISegmentedControl 边框问题

> ID：897298
> 
> 赞同：7
> 
> 时间：2009-05-22T10:48:32.583
> 
> 标签：iphone, objective-c, uikit, uitableview, uisegmentedcontrol

我正在尝试`UISegmentedControl`在一个组中加入一个`UITableViewCell`，就像在设置应用程序中的 wifi 设置中一样。我遇到的问题是我得到了双边框。我得到一个边框，一个`UISegmentedControl`边框`UITableViewCell`。

我猜我需要从`UITableViewCell`. 我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-12-28T14:08:16.010

我只是注意到这仍在得到答案。碰巧我不得不为另一个项目做这件事，自从我问了这个问题以来，我学到了更多关于 iPhone 开发的知识。这是我最近解决它的方法。这一切都是为了使框架具有正确的尺寸。这应该适用于标准表。

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"CellIdentifier"];
if(cell == nil) 
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"CellIdentifier"] autorelease];

UISegmentedControl *segmentedControl = [[UISegmentedControl alloc] initWithFrame:CGRectMake(-1.0f, -1.0f, 302.0f, 46.0f)];
[cell.contentView addSubview:segmentedControl]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-12-25T00:49:45.533

在 Wi-Fi 设置的情况下，我怀疑他们所做的是让“忘记此网络”按钮、“IP 地址”标签和“DHCP/BootP/Static”分段控制表的所有部分标题视图。如果您需要在表格中间执行此操作（而不是在顶部或底部，您将分别使用`tableHeaderView`和`tableFooterView`属性），我建议使用委托方法`-tableView:viewForHeaderInSection:`with`-tableView:heightForHeaderInSection`或相应的`Footer`变体。使用其中任何一个，您将为表格视图的“部分”设置一个自定义视图（使用清晰的背景颜色或`[UIColor groupTableBackgroundColor]`），其中包含一个标签和一个分段控件，以便它们与其余部分匹配表部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-12-14T18:25:41.253

使用[这篇文章](https://stackoverflow.com/a/1335956/213955)中的技术来删除 UITableViewCell 的背景不透明度对我来说更容易让 UISegmentedControl 只显示在表格行中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-22T13:06:03.087

我对此有了更进一步的了解。到目前为止，我已经将 UITableViewCell 子类化了。我创建了一个带有 UISegmentedControl 的笔尖，并将 UITableViewCell 背景 alpha 设置为 0。它看起来仍然不太正确，但比以前好多了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-03-29T11:31:29.543

我的解决方案是允许分段控件调整大小以适应，并将表格视图的背景隐藏在`tableView:willDisplayCell:forRowAtIndexPath:`.

这会产生与“Settings.app > WiFi > Your Network > IP Address”分段控制相同的结果，而无需对任何布局指标进行硬编码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier] autorelease];
    }

    UISegmentedControl *control = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"One", @"Two", @"Three", nil]];
    control.segmentedControlStyle = UISegmentedControlStylePlain;
    control.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight);
    control.frame = cell.contentView.bounds;
    [cell.contentView addSubview:control];
    [control release];
}

- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
    cell.backgroundView.alpha = 0.0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-12-24T23:56:23.820

诀窍似乎是将[UISegmentedControl](http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UISegmentedControl_Class/)的大小调整`backgroundView`为控件的大小，而不是`contentView`. 我可以通过执行以下操作以编程方式做到这一点：

```
 // Size to cover the entire background
    self.contentView.frame = self.backgroundView.frame;
    self.myControl.frame = self.contentView.bounds; 
```

请注意，如果您使用的是配件，您也需要考虑到`accessoryView`这一点。

原因是视图层次结构如下：

*   `self`（[UITableViewCell](http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UITableViewCell_Class/)或子类）
    *   `backgroundView`
    *   `contentView`
        *   *（你的控制在这里）*
    *   `accessoryView`

在纵向布局中，`backgroundView`' 框架是`{{9, 0}, {302, 44}}`，而`contentView`' 框架略小一些，位于`{{10, 1}, {300, 42}}`。当表格样式被分组时，这会为单元格提供 1px 的“边框”。您必须调整`contentView` *和*您的控件的大小以获得适当的大小。

[（注意：虽然 Apple 实际上在SDK](https://developer.apple.com/iphone/library/navigation/index.html "iPhone OS Reference Library")的[UICatalog](https://developer.apple.com/iphone/library/samplecode/UICatalog/index.html)示例代码项目中有几个[UISegmentedControl](http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UISegmentedControl_Class/)示例，但它们通过使用[UIViewController](http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIViewController_Class/)并将主视图的背景颜色设置为表格背景颜色来有效地“作弊”。）

# .net - 如何将amcap的默认色彩空间设置为YUY2？

> ID：897300
> 
> 赞同：1
> 
> 时间：2009-05-22T10:49:31.880
> 
> 标签：.net, c++, visual-c++, webcam, winapi

AMcap 是一款用于捕捉视频或从网络摄像头预览的应用程序。它的源代码以 Microsoft Windows SDK 作为示例。

我想（绕过 amcap 代码中的以下用户交互过程或说想要）将其设置为默认值：

放大器菜单

```
 Options

    Video Capture Pin ...

        Color Space/Compression: YUY2

        Output size: 1600x1200 
```

我有一个兼容的网络摄像头，在 AMcap 应用程序中手动更改为 YUY2 和 1600x1200 时效果很好。

默认情况下是：

```
 Color Space/Compression: MJPG

    Output size: 160x120 
```

我试图在整个项目中找到'YUY2'字符串，但我找不到它，所以我可以对其进行硬编码。好像是动态创建然后操作的；参考：在文件 amcap.cpp 附近的第 3395 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T12:14:23.220

我有一些代码使用 IID_IAMStreamConfig 接口来设置相机图像大小。我没有使用它来设置图像格式，但我添加了我认为可以完成这项工作的代码。然而，它未经测试。

```
 // get the number of formats and make sure the strutucre size matches
            int count;
            int size;
            VIDEO_STREAM_CONFIG_CAPS caps;
            pSC->GetNumberOfCapabilities(&count, &size);
            if( sizeof(caps) != size )
            {
                // Error
            }

            AM_MEDIA_TYPE* mt_p = NULL;
            hr = pSC->GetStreamCaps(0, &mt_p, (BYTE*)&caps);
            if (hr != S_OK)
            {
                // Error
            }

            if ((mt_p->majortype != MEDIATYPE_Video) || (mt_p->formattype != FORMAT_VideoInfo))
            {
                // Error
            }

            VIDEOINFOHEADER* video_info_header_p = (VIDEOINFOHEADER *)mt_p->pbFormat;
            video_info_header_p->bmiHeader.biWidth = 1600;
            video_info_header_p->bmiHeader.biHeight = 1200;
            // Code to change video format 
            // I think 16 is the right value for biBitCount, but I am not sure!!!!
            video_info_header_p->bmiHeader.biCompression = MAKEFOURCC('Y','U','Y','2');
            video_info_header_p->bmiHeader.biBitCount = 16;

            hr = pSC->SetFormat(mt_p);
            if (hr != S_OK)
            {
                // Error
            }

            if (mt_p->cbFormat != 0)
            {
                CoTaskMemFree((PVOID)mt_p->pbFormat);
                mt_p->cbFormat = 0;
                mt_p->pbFormat = NULL;
            }
            if (mt_p->pUnk != NULL)
            {
                // Unecessary because pUnk should not be used, but safest.
                mt_p->pUnk->Release();
                mt_p->pUnk = NULL;
            } 
```

您应该将代码放在 amcap 中的以下块之后：

```
 if(hr != NOERROR)
        hr = gcap.pBuilder->FindInterface(&PIN_CATEGORY_CAPTURE,
            &MEDIATYPE_Video, gcap.pVCap,
            IID_IAMStreamConfig, (void **)&pSC); 
```

同样，这是未经测试的代码，但您可以尝试一下，希望对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T14:04:43.873

嘿@Dani van der Meer：感谢指针......我已经做到了：在函数BOOL InitCapFilters（）

后

```
 if(hr != NOERROR)
{

    hr = gcap.pBuilder->FindInterface(&PIN_CATEGORY_CAPTURE,
                                      &MEDIATYPE_Video, gcap.pVCap,
                                      IID_IAMStreamConfig, (void **)&gcap.pVSC);

    if(hr != NOERROR)
    {
        // this means we can't set frame rate (non-DV only)
        ErrMsg(TEXT("Error %x: Cannot find VCapture:IAMStreamConfig"), hr);
    }
}

gcap.fCapAudioIsRelevant = TRUE; 
```

粘贴：

```
CMediaType *pmt;
// default capture format
if(gcap.pVSC && gcap.pVSC->GetFormat((AM_MEDIA_TYPE**)&pmt) == S_OK)
{
    // DV capture does not use a VIDEOINFOHEADER
    if(pmt->formattype == FORMAT_VideoInfo)
    {
     pmt->SetType(&MEDIATYPE_Video);
     pmt->SetFormatType(&FORMAT_VideoInfo);
     pmt->SetSubtype(&MEDIASUBTYPE_YUY2);
     pmt->SetTemporalCompression(FALSE);

     VIDEOINFOHEADER* lpvihin = (VIDEOINFOHEADER*) pmt->pbFormat;

        {

             //DWORD fccYUY2 =  'YUY2' ;
             //lpvihin->bmiHeader.biCompression  =fccYUY2;
            //'YUY2';// MAKEFOURCC('Y','U','Y','2');
            //lpvihin->bmiHeader.biBitCount = 16; 
            lpvihin->bmiHeader.biWidth =  1600;// 960; //1600;
            lpvihin->bmiHeader.biHeight =  1200;//  720; //1200;
            lpvihin->bmiHeader.biSizeImage =   1600*1200*3; 

            hr = gcap.pVSC->SetFormat(pmt);

            ResizeWindow(HEADER(pmt->pbFormat)->biWidth,
                     ABS(HEADER(pmt->pbFormat)->biHeight));
        }
    }
    if(pmt->majortype != MEDIATYPE_Video)
    {
        // This capture filter captures something other that pure video.
        // Maybe it's DV or something?  Anyway, chances are we shouldn't
        // allow capturing audio separately, since our video capture
        // filter may have audio combined in it already!
        gcap.fCapAudioIsRelevant = FALSE;
        gcap.fCapAudio = FALSE;
    }
    DeleteMediaType(pmt);
} 
```

非常感谢

# .net - 在 .NET 中使用小数类型的问题

> ID：897301
> 
> 赞同：4
> 
> 时间：2009-05-22T10:49:35.687
> 
> 标签：.net, globalization

我对.NET 和使用十进制类型有一些奇怪的问题。我的 Web 应用程序使用以下全球化设置：

```
<globalization culture="auto" enableClientBasedCulture="true"/> 
```

考虑到这一点，请考虑以下内容：十进制值 123.00 变为 GBP 123.00 英镑和 EUR 123,00（注意逗号）。当我想从十进制值 123,00 (EUR) 再次回到 GBP 时，我遇到的问题出现了，因为它变成了 123,000 - 这是一个大问题。

在这种情况下，我的应用程序已根据检测到的文化查阅查找表，并以该货币显示价格。只有当用户做出选择并且数据准备好发送到我们的支付网关时才会出现问题，这会将 123,00 欧元转换为 123,000 欧元。

有什么想法可以克服这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T10:52:51.107

也许这可以帮助你

```
 NumberFormatInfo ni = new NumberFormatInfo();
        ni.NumberDecimalSeparator = '.'; 
```

用法即

```
 Double.Parse(MyString, ni) 
```

-雷特

不知道有什么更好的方法来检测格式，但是看看这个

```
 static void Main(string[] args)
    {
        // German Format (EUR)
        CultureInfo ci_de = new CultureInfo("de-DE");

        // English Format (GBP)
        CultureInfo ci_gb = new CultureInfo("en-GB");

        string test_de = "1.234.567.890,12";
        string test_en = "1,234,567,890.12";

        double result_de = 0.0;
        double result_en = 0.0;

        try
        {
            result_de = Double.Parse(test_en, ci_de.NumberFormat);
        }
        catch (FormatException ex)
        {
            Console.WriteLine("Number isn't a german format " + ex.InnerException);
        }
        try
        {
            result_en = Double.Parse(test_en, ci_gb.NumberFormat);
        }
        catch (FormatException ex)
        {
            Console.WriteLine("Number isn't a english format " + ex.InnerException);
        }

        Console.WriteLine(result_de.ToString());
        Console.WriteLine(result_en.ToString());

        Console.ReadLine();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T12:38:36.323

十进制数据类型基本上只包含一个数字——没有隐式应用于它的格式。数字的值不会因为它以不同的格式显示而改变。

很可能，您可能遇到的问题是，当您从网页接收作为字符串的输入时，您正在错误地解析它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-26T11:06:56.367

感谢所有提供经验和建议的人。

实现一个自定义类型/结构来保存我自己的 Decimal 值并不是我真正想要的，也不会真正给我所需的功能（我已经可以以适当的本地货币/格式显示十进制值，我只是无法在需要时将它们转换回英国格式）。

问题是网络配置中的这一行：

```
<globalization culture="auto" enableClientBasedCulture="true"/> 
```

设置culture = "auto" 允许.NET 根据浏览器提供的值设置区域设置（顺便说一下，根据MSDN，'enableClientBasedCulture' 没有实现——所以你可以省略它）。因此，如果来自法国的访问者（在他们的浏览器中配置了语言“fr-FR”）访问了我们的网站，所有数字格式都可以正常工作（正确的小数分隔符和货币符号），但我稍后在尝试时会遇到问题将该数字从它的欧洲格式转换为我需要的英国/美国格式。

这很奇怪，但是将“123.00”转换为“fr-FR”语言环境会产生 FormatException，因为“123.00”在法语语言环境中无效（它需要“123,00”）。但是，将“123,00”（fr-FR）转换为英国/美国“en-GB”或“en-US”格式不会产生错误，而是将值变为“123,000”。我相信这应该抛出一个 FormatException 因为添加另一个零是不可接受的。

我实施的解决方案如下：

1.  在 web.config 中将culture="auto" 设置为culture="en-GB"。
2.  使用 Decimal.ToString("c", ni) - 其中 'ni' 是自定义 NumberFormatInfo 类。

由于我现有的代码连接到我们的数据源以根据国家/地区检索正确的十进制值，因此我现在所拥有的只是一个格式问题。因此，要根据“fr-FR”区域设置格式化数字，您可以执行以下操作：

```
NumberFormatInfo ni = Globalization.CultureInfo.GetCultureInfo("fr-FR").NumberFormat;
Decimal.ToString("c", ni); 
```

在这个设置中，我所有的十进制值（内部）总是被视为 en-GB 小数，因此是我需要的格式。换句话说，我的应用程序不需要能够更改应用于整个当前线程的设置的灵活性；而恰恰相反：我只关心以不同的方式格式化值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-23T19:11:23.530

rAyt 提供了一个良好的开端，但如果您正在使用多种文化，那么自动检测十进制数是哪种文化可能会变得非常困难。为确保您始终了解，最好围绕包含文化的小数创建一个简单的包装器类型。您需要更新数据存储以存储文化代码（即 en-US），以便在重构数据时不会“忘记”数据保存为哪种文化。您拥有的任何实体都将使用您的十进制包装类型，而不是直接使用十进制，并且该类型可以具有覆盖的 ToString 方法以自动以正确的格式呈现：

```
public struct CulturedDecimal
{
    public decimal Value;
    public CultureInfo Culture;

    public override ToString()
    {
        return Value.ToString(Culture);
    }
}

public class SomeEntity
{
    public int ID { get; set; }
    public CulturedDecimal MonetaryValue { get; set; } // Was 'decimal' before
} 
```

# ms-access - Form.CurrentRecord=1 和 Form.RecordSet.Absoluteposition=-1

> ID：897312
> 
> 赞同：3
> 
> 时间：2009-05-22T10:52:09.190
> 
> 标签：ms-access, ms-access-2007

如标题所示，我遇到了一个奇怪的现象。我有一个包含两个子表单的表单。在两个子表单上，我都有一个按钮，可以触发对相关子表单的重新查询。如果在加载表单后，我立即单击此按钮（重新查询表单），当我尝试将 OnCurrent 事件中当前记录的主键值保存到变量时，出现错误“3021：无当前记录”。奇怪的是，在调试器中相关值是这样的：

```
 Form.CurrentRecord=1
  Form.RecordSet.Absoluteposition=-1
  Form.RecordSet.RecordCount=14
  Form.RecordSet.EOF=False
  Form.RecordSet.BOF=False 
```

另请注意，当表单被加载时，在加载事件中它仍然可以正常工作，并且我可以保存主键值，它是第一条记录中包含的主键。

在 Form_Load 和我单击该重新查询按钮之间的某个地方，表单的状态变得不同步。我最近刚刚从 Access 2003 切换到 2007，据我所知，这个错误以前没有发生过（尽管我可能只是在加载后没有点击这个按钮）。

现在我有一个解决方法，但我真的很想了解这是如何发生的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T10:49:08.930

如果这是 ADO，请检查正在使用哪个 OLE DB 提供程序，例如（猜测）

```
Debug.Print Form.RecordSet.ActiveConnection.Provider 
```

如果碰巧是 3.51 版本，请参阅：

[信息：ADO 中 JET 数据库的 AbsolutePosition 属性](http://support.microsoft.com/kb/194607)

...如果您使用的是 ACE 提供程序，也许这是一个回归错误？！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T23:46:33.503

您必须通过 MoveFirst 或其他方式将记录指针放在表单的 Recordset 中的特定记录上。并且返回值似乎是从零开始的，而不是从 1 开始的。

我无法重现您返回-1 的错误。您是否将表单的记录集设置为 ADO 记录集？如果是这样，那就可以解释了——DAO 记录集永远不会为这些值中的任何一个返回 -1，但我相信在 .MoveLast 之前 ADO RecordCount 返回 -1。也许 AbsolutePosition 在 ADO 中也是如此。

你想达到什么目的？我没有看到使用表单的 Recordset 对象的任何实用程序，因为它更容易分配记录源和导航 RecordsetClone（与表单的 Recordset 相比，它与表单的编辑/显示缓冲区绑定得更紧密，特别是当 Recordset 有被分配了一个 ADO 记录集）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-06-19T04:03:07.167

当我尝试转到“设计视图”时，我遇到了完全相同的问题。我不需要快速点击，我可以等一个小时然后这样做然后砰！有这个错误。

请注意，如果子表单仍然为空（即确实不包括任何记录，这是我第一次打开窗口时的情况），我只会收到错误消息。所以我一直认为这是正常的。

当光标当前未指向特定位置时，AbsolutePosition 设置为 -1。此外，这个值是从零开始的（正如其他人所提到的：第一行是 AbsolutePosition 0）。但是，即使您关注子表单中的特定行，该位置也可能为 -1。这意味着它是无用的。

如果您需要知道当前光标位置，您想要使用的是 CurrentRecord。这是一个从 1 开始的数字。我想如果列表为空，则 CurrentRecord 可能设置为 0 或 -1，表示没有行可用。

我在一个用于计算不同列的复杂总数的函数中使用了所有这些，这里是页面[http://linux.m2osw.com/msaccess-sum-focus-recordset-problem](http://linux.m2osw.com/msaccess-sum-focus-recordset-problem)

# xml - Delphi 有一个简单的文本差异单元吗？

> ID：897314
> 
> 赞同：4
> 
> 时间：2009-05-22T10:52:31.403
> 
> 标签：xml, delphi, diff

对于数据验证，例如在从一个 XML 库迁移到新库期间，我们需要确保新旧文本相同。

对于小文件，可以手动进行比较，但对于大文件，只查看不同的、缺失的或新的行会节省时间。

你知道 Delphi 的一个简单但可靠的 diff 单元，它可以扫描两个文档并收集有关具有不同内容的行的信息吗？

该单元应支持 WideString（用于 XML 文本）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-22T12:28:17.937

[时差](http://www.angusj.com/delphi/textdiff.html)？差异组件的来源在内部。如果您使用的是 Delphi 2009，它应该可以轻松处理 Unicode 字符串。否则，您可能需要进行一些更改来处理 WideStrings，但看起来修改起来不会太痛苦。diff 单元本身略小于 28K。

# c++ - 如何杀死程序的所有进程？

> ID：897321
> 
> 赞同：1
> 
> 时间：2009-05-22T10:55:18.933
> 
> 标签：c++, linux, process, kill

我写了一个程序，用 fork() 分叉一些进程。如果出现错误，我想杀死所有子进程和母进程。如果我使用 exit(EXIT_FAILURE) 只有子进程被杀死。

我正在考虑一个系统（“killall [program_name]”），但必须有更好的方法......

谢谢你们！伦纳特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-22T10:57:19.197

在 UNIX 下，发送 SIGTERM，或 SIGABRT，或 SIGPIPE 或 sth。类似于母进程。如果他们没有明确地阻止或忽略它，这个信号将自动传播到所有客户端。

用于`getppid()`获取 PID 发送信号，并`kill()`发送信号。

> getppid() 返回调用进程的父进程 ID。
> 
> kill() 系统调用可用于向任何进程组或进程发送任何信号。

备注： 1、用`system`为恶。使用内部函数发送信号。2.`killall`会更邪恶。考虑一次运行的程序的多个实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-22T11:49:27.827

请参阅[如何在父退出后使子进程死亡？](https://stackoverflow.com/questions/284325/how-to-make-child-process-die-after-parent-exits)

在 Linux 上，有一个调用明确设计用于在父进程*因任何原因*`prctl()`死亡时向所有进程的子进程发送信号。

 *我需要检查并且不能在第二个位置执行此操作，但是我真的不确定 ypnos 关于`SIGPIPE`,`SIGTERM`并`SIGABRT`传播给所有孩子的断言是否正确。

但是，如果您使用`kill(-ppid)`（注意减号），那么只要子进程仍在父进程的进程组中，内核就会向所有子进程传递任何信号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T15:51:17.463

如果你的母进程不是命令行启动的，它可能不是进程组长，就像一个守护进程一样。

为确保您的母进程是进程组组长，请在进程初始化期间调用 setsid()。

然后在你的子进程中，如果你想让所有进程退出：

> pgid = getpgid();
> 杀死（pgid，15）；

你也可以做一些技巧，比如告诉你所有的兄弟姐妹暂停：

> 杀死（pgid，20）；

并继续：

> 杀死（pgid，18）；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T13:24:48.727

考虑自杀方法 -`alarm()`在过程开始时（父母和孩子）设置一个正数秒数。如果计算在该时间内完成并且“没有错误”，则调用`alarm(0)`取消计时器；否则`SIGALRM`将终止该过程（假设您没有明确地捕获或忽略它。）

好吧，提出反对这个的理由，而不是仅仅投反对票:)

# ruby - CommandLine::Application 在 main 中吞下了我的异常，如何避免？

> ID：897330
> 
> 赞同：0
> 
> 时间：2009-05-22T10:58:08.570
> 
> 标签：ruby

例子：

```
require 'commandline'
class App < CommandLine::Application
    def initialize
    end
    def main
        raise 'foo'
    end
end 
```

结果是

```
$ ruby test.rb
ERROR: foo 
```

问题从这里开始：在开发过程中，我的代码深处总会有异常抛出，我需要查看堆栈跟踪而不是一些损坏的消息。

感谢**rampion**，我现在正在使用这个解决方案：

```
require 'commandline'
class App < CommandLine::Application
    def initialize
    end
    def main
        raise 'foo'
        rescue Exception => e
            puts format_like_real_exception e
    end
    def format_like_real_exception(e)
        s = ''
        b = e.backtrace
        s << b.shift << ': ' << e.message << "\n"
        b.each { |l| s << "\t" << l << "\n" }
        s
    end
end 
```

当然格式化程序不是必需的，但我更喜欢它们最初格式化的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-23T04:15:24.443

或者，您可以挽救以下错误`main`：

```
require 'rubygems'
require 'commandline'
class App < CommandLine::Application
    def initialize
    end
    def main
        raise 'foo'
    rescue Exception => e
        puts "BACKTRACE:"
        puts e.backtrace
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T15:04:16.280

到目前为止我找到的解决方案：

1.  更改`CommandLine::Application`为`CommandLine::Application_wo_AutoRun`
2.  将方法重命名`main`为其他未使用的名称，例如`start
3.  调用返回实例的静态方法`App.run`，然后`start`在其上调用您的方法

完整示例：

```
require 'commandline'
class App < CommandLine::Application_wo_AutoRun
    def initialize
    end
    def start
        raise 'foo'
    end
end
app = App.run
app.start 
```

该[文档](http://rubyforge.org/docman/view.php/632/233/posted-docs.index.html)提到`Application_wo_AutoRun`但不帮助如何进一步进行。只有源研究在这里有所帮助。

# jquery - 获取一个空的 JQuery 对象

> ID：897331
> 
> 赞同：128
> 
> 时间：2009-05-22T10:59:02.157
> 
> 标签：jquery

在下面的代码中，我在选择框上设置了一个更改处理程序，以根据选择的值显示和隐藏一些后续问题。

此外，对于选择的某些值，会显示一条额外的消息。

为了检查是否需要隐藏额外消息，我保留了一个名为 Previous 的变量。执行处理程序后，我检查 Previous 是否为 null 或大小是否为 0。

最好将 Previous 初始化为一个空的 JQuery 对象，这样就不必对 null 进行额外的检查。

执行 $() 会返回一个大小为 1 的对象。

有没有办法创建一个空的 Jquery 对象？

```
//初始化函数。
$(函数(){
//保持之前选择的对象为账户类型选择。

var 上一个 = null; //这里是我要初始化的地方。
                      //类似于上一个 = $();

$("SELECT[name='AccountType']").change(
    功能 （） {
        //如果有，则隐藏上一条消息。
        if(Previous == null || Previous.size() > 0){
            上一个.hide();
        }

        //如果找到则显示消息并将其保存为以前的。
        上一个 = $("#"+this.value+"_Msg").show();

        //获取第一个问题
        var FirstQuestion = $(".FirstQuestion");
        如果（this.value === ''）{
            FirstQuestion.hide();
        }别的{
            //手动显示FirstQuestion。
            FirstQuestion.show();
        }
    });
}

```

在最坏的情况下，我可以做这样的事情：

```
    var Previous = { size : function () { return 0; } };

```

但这似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2009-05-22T11:03:33.537

这将创建一个空的 jQuery 对象：

```
$([]) 
```

**更新：** 在较新版本的 jQuery (1.4+) 中，您可以使用：

```
$() 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2010-09-13T16:46:50.410

```
$(); 
```

> **返回一个空集**
> 
> 从 jQuery 1.4 开始，调用`jQuery()`不带参数的方法会返回一个空的 jQuery 集（`.length`属性为 0）。在以前的 jQuery 版本中，这将返回一个包含文档节点的集合。

来源：[api.jquery.com](http://api.jquery.com/jQuery/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-22T11:04:43.703

我的建议是不要那样做。有很多更简单的方法可以做到这一点。考虑：

```
<select id="select" name="select">
  <option value="msg_1">Message 1</option>
  <option value="msg_2">Message 1</option>
  <option value="msg_3">Message 1</option>
</select>

<div class="msg_1 msg_3">
  ...
</div>

<div class="msg_1">
  ...
</div>

<div class="msg_2">
  ...
</div>

$(function() {
  $("#select").change(function() {
    var val = $(this).val();
    $("div." + val").show();
    $("div:not(." + val + ")").hide();
  });
}); 
```

**容易**得多。基本上给出类来指示要显示和隐藏的内容，然后不需要跟踪。另一种选择是：

```
$(function() {
  $("#select").change(function() {
    var val = $(this).val();
    $("div").each(function() {
      if ($(this).hasClass(val)) {
        $(this).show();
      } else {
        $(this).hide();
      }
    });
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-19T04:51:36.360

试试这个

```
 var new = $([]); 
```

我不是一个好的程序员，但它给了你空对象:))

# java - （类型）String.class 是（类型）Object.class 的子类型吗？

> ID：897334
> 
> 赞同：5
> 
> 时间：2009-05-22T11:00:57.923
> 
> 标签：java, inheritance

在 Java 中，类对象是否与它们所代表的类具有相同的继承关系？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-22T11:02:39.060

该`.class`属性始终返回一个`Class`对象。类`Class`（奇怪）有一个通用参数。泛型参数类型是子类。

```
Class<String> stringClass = String.class;
Class<Object> objectClass = Object.class; 
```

并且因为泛型*不是*`Type<foo>`（参见[Java 教程](http://java.sun.com/docs/books/tutorial/java/generics/subtyping.html)）的超类型，这意味着答案是“否”。*`Type<subtype_of_foo>`*

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-22T11:03:37.483

`Class`Java中的对象都是同一个类。

您可以判断，因为如果您查看 Javadoc，您可以看到[`Class`该类是`final`.](http://java.sun.com/javase/6/docs/api/java/lang/Class.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T11:05:13.437

不，只有一个名为 的类`Class`。String.class 和 Object.class 一样是一个 instanceof Class。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-22T11:08:10.157

试试这个代码：

```
boolean answer = Object.class.isAssignableFrom(String.class);
System.out.println(answer); // true! 
```

然而：

```
Class<Object> string = String.class; <-- compile-time error
Class<? extends Object> string = String.class; <-- it's ok 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-22T11:06:33.233

即使 Y 扩展 X，Class 也不扩展 Class 的原因是对于任何泛型类型 G，G 不扩展 G

您可能想在常见问题解答等中查找此内容。一袋苹果不是一袋水果，即使苹果是水果；因为您可以在后者中添加任何水果，但在前者中只能添加苹果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-22T11:08:23.337

如果我正确理解你的问题，情况并非如此。表示 的类`java.lang.String`以及任何其他类的对象`java.lang.Class`始终是类的。

请记住，它`java.lang.Class`被定义为**final**，因此您不能对其进行*子类化*。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-22T20:56:14.827

所有 Class 对象都是 Class 的实例。

如果你想知道一个类的层次结构，你可以调用 getSuperClass() 和 getInterfaces()

注意：您可能需要递归调用这些来获取所有超类和接口。

# asp.net-mvc - 创建非 HTML 的 MVC 视图

> ID：897336
> 
> 赞同：1
> 
> 时间：2009-05-22T11:01:48.623
> 
> 标签：asp.net-mvc, model-view-controller

这是关于 MVC 作为一种模式的一般问题，但在这种情况下，我使用的是 ASP.NET MVC。

我需要创建一个应用程序，其输出是 HTTP 访问的 XML 流（内容类型 text/xml）。

我可以使用 Generic Handler 对象使用传统的 ASP.NET 来做到这一点。

```
public void ProcessRequest(HttpContext context)
{
    context.Response.ContentType = "text/xml";
    context.Response.Write(someXmlText);
} 
```

我可以创建实现相同结果的 ASP.NET MVC 视图吗？

这是对 MVC 视图的适当使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T11:06:27.430

您可以使用[MvcContrib 的 XmlResult](http://code.google.com/p/mvccontrib/source/browse/trunk/src/MVCContrib/ActionResults/XmlResult.cs)。这就像你上面的例子一样。您不需要使用视图来呈现 XML。

本质上 - 您对返回 XML 的控制器有一个操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T13:21:34.800

您可以不使用视图直接返回它，您只需要指定内容类型作为响应：

例如，您可以像这样指定操作方法：

```
XElement GetElements(param1,param2...)
{
    XElement elements = new XElement("elements",
                                from c in element
                                select new XElement("element",
                                                     new XElement("Id",c.Id),
                                                     new XElement("Name",c.Name)
                                                    ));

    this.ControllerContext.HttpContext.Response.ContentType = "application/xml";
    return elements;
} 
```

# c# - 从代码隐藏打开新窗口

> ID：897343
> 
> 赞同：4
> 
> 时间：2009-05-22T11:03:36.547
> 
> 标签：c#, asp.net, javascript, code-behind

如果选择了特定的单选按钮，我需要在回发时从代码隐藏中打开一个新窗口。

有没有办法做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-22T11:06:39.770

您可以使用 RegisterStartupScript 发送一个 window.open 脚本，以便在页面加载后运行。

但是，这将导致大多数弹出窗口阻止程序妨碍您。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-08-31T15:06:09.087

我*认为*这应该工作;-)

添加一些 javascript 到您的单选按钮以在您回发*之前*打开一个新的空白窗口。这使得弹出窗口阻止程序不会阻止您的弹出窗口，因为它是响应用户点击而打开的。有关如何执行此部分的信息，请参阅[此链接。](https://stackoverflow.com/questions/1061385/how-to-run-a-javascript-function-before-postback-of-asp-net-button)

然后，让回发正常进行，在页面加载时，注册一个启动脚本来告诉你已经存在的窗口转到一个新的 url。

```
 String script = "window.open('popupPage.aspx', 'myPopup')";
 ScriptManager.RegisterStartupScript(Page, Page.GetType(), "someId", script, true); 
```

请注意，在 javascript 中，当您调用

```
 window.open(url, 'myPopup') 
```

如果已经存在具有该名称的窗口，它将返回它而不是创建新窗口...因此您的弹出窗口不会被阻止！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T11:05:48.023

您需要[在回发时运行 javascript](http://weblogs.asp.net/kiyoshi/archive/2008/02/05/call-javascript-function-on-postback.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T11:38:07.770

RegisterStartupScript 的简单示例：

```
RegisterStartupScript("id1", "<script type=\"text/javascript\">alert(\"I'm from JavaScript.\");</script>"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-23T06:08:52.457

新窗口可能非常粗略，这取决于您需要呈现的内容，如果愿意，您可以考虑使用窗口内弹出窗口。这样您就可以避免弹出窗口阻止程序。如果您可以提供更多详细信息，我们可以提供更好的答案。

# php - PHP/MySQL 插入行然后获取 'id'

> ID：897356
> 
> 赞同：199
> 
> 时间：2009-05-22T11:07:02.373
> 
> 标签：php, mysql

当我插入一行时，我的表的“id”字段会自动增加。我想插入一行然后获取该 ID。

我会按照我说的那样做，但是有没有一种方法可以做到而不用担心插入行和获取 id 之间的时间？

我知道我可以在数据库中查询与输入的信息匹配的行，但是会有很大的变化，会有重复，唯一的区别是 id。

* * *

## 回答 #1

> 赞同：264
> 
> 时间：2009-05-22T11:09:30.263

```
$link = mysqli_connect('127.0.0.1', 'my_user', 'my_pass', 'my_db');
mysqli_query($link, "INSERT INTO mytable (1, 2, 3, 'blah')");
$id = mysqli_insert_id($link); 
```

见[`mysqli_insert_id()`](http://au.php.net/mysqli.insert_id)。

不管你做什么，不要插入然后做一个“ `SELECT MAX(id) FROM mytable`”。就像你说的，这是一个竞争条件，没有必要。`mysqli_insert_id()`已经有了这个功能。

* * *

另一种方法是一次运行两个查询，并使用`MySQL`'s`LAST_INSERT_ID()`方法，其中两个表都被同时修改（并且 PHP 不需要任何 ID），例如：

```
mysqli_query($link, "INSERT INTO my_user_table ...;
  INSERT INTO my_other_table (`user_id`) VALUES (LAST_INSERT_ID())"); 
```

> **请注意**，每个连接都单独跟踪 ID（因此，已经防止了冲突）。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2009-05-22T11:14:08.990

MySQL 函数[`LAST_INSERT_ID()`](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)可以满足您的需要：它检索在*此会话*期间插入的 id 。因此使用它是安全的，即使有其他进程（例如，其他人调用完全相同的脚本）将值插入到同一个表中。

PHP 函数[`mysql_insert_id()`](http://de.php.net/manual/en/function.mysql-insert-id.php)的作用与`SELECT LAST_INSERT_ID()`使用`mysql_query()`.

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-07-30T15:16:56.420

至于 PHP 的网站，mysql_insert_id 现在已弃用，我们必须使用[PDO](https://www.php.net/manual/en/book.pdo.php)或[MySQLi](https://www.php.net/manual/en/book.mysqli.php)（请参阅@Luke 对 MySQLi[的回答](https://stackoverflow.com/a/18425584/1046013)）。要使用 PDO 执行此操作，请执行以下操作：

```
$db = new PDO('mysql:dbname=database;host=localhost', 'user', 'pass');
$statement = $db->prepare('INSERT INTO people(name, city) VALUES(:name, :city)');
$statement->execute([':name' => 'Bob', ':city' => 'Montreal']);

echo $db->lastInsertId(); 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2013-08-25T04:05:37.757

正如@NaturalBornCamper 所说，[mysql_insert_id 现在已弃用](http://php.net/manual/en/function.mysql-insert-id.php)，不应*使用*。现在的选项是使用 PDO 或 mysqli。NaturalBornCamper 在他的回答中解释了 PDO，所以我将展示如何使用[mysqli_insert_id使用](http://php.net/manual/en/mysqli.insert-id.php)**MySQLi**（[MySQL 改进](http://www.php.net/manual/en/book.mysqli.php)）来做到这一点。

```
// First, connect to your database with the usual info...
$db = new mysqli($hostname, $username, $password, $databaseName);
// Let's assume we have a table called 'people' which has a column
// called 'people_id' which is the PK and is auto-incremented...
$db->query("INSERT INTO people (people_name) VALUES ('Mr. X')");
// We've now entered in a new row, which has automatically been 
// given a new people_id. We can get it simply with:
$lastInsertedPeopleId = $db->insert_id;
// OR
$lastInsertedPeopleId = mysqli_insert_id($db); 
```

查看 PHP 文档以获取更多示例： http: [//php.net/manual/en/mysqli.insert-id.php](http://php.net/manual/en/mysqli.insert-id.php)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-12-14T09:48:22.147

我只想添加一个关于的小细节`lastInsertId()`；

**当一次输入多行时，它不会返回最后一个 Id**，而是返回最后一个插入集合的第一个 Id。

考虑以下示例

```
$sql = 'INSERT INTO my_table (varNumb,userid) VALUES
     (1, :userid),
     (2, :userid)';
$sql->addNewNames = $db->prepare($sql);
addNewNames->execute(array(':userid' => $userid));

echo $db->lastInsertId(); 
```

这里发生的是我推入`my_table`两个新行。表的 id 是自动递增的。在这里，对于同一个用户，我添加了两行不同的`varNumb`.

最后的回显值将等于 where 的行的 id `varNumb=1`，这意味着不是*最后*一行的 id，而是在最后一个请求中添加的第一行的 id。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-21T07:40:26.903

一个例子。

```
 $query_new = "INSERT INTO students(courseid, coursename) VALUES ('', ?)";
    $query_new = $databaseConnection->prepare($query_new);
    $query_new->bind_param('s', $_POST['coursename']);
    $query_new->execute();
    $course_id = $query_new->insert_id;
    $query_new->close(); 
```

代码行将`$course_id = $query_new->insert_id;`显示最后插入的行的 ID。希望这可以帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-12T15:23:39.997

像这样尝试你可以得到答案：

```
<?php
$con=mysqli_connect("localhost","root","","new");
// Check connection
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

mysqli_query($con,"INSERT INTO new values('nameuser','2015-09-12')");

// Print auto-generated id
echo "New record has id: " . mysqli_insert_id($con);

mysqli_close($con);
?> 
```

看看以下链接：

[http://www.w3schools.com/php/func_mysqli_insert_id.asp](http://www.w3schools.com/php/func_mysqli_insert_id.asp)

[http://php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php)

另请注意，此扩展在 PHP 5.5 中已弃用并在 PHP 7.0 中删除

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-12-23T18:47:00.250

[我在上面的链接http://php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php)中找到了答案

答案是：

```
mysql_query("INSERT INTO tablename (columnname) values ('$value')");        
echo $Id=mysql_insert_id(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-11T11:47:11.003

试试这个……它对我有用！

```
$sql = "INSERT INTO tablename (row_name) VALUES('$row_value')";
    if (mysqli_query($conn, $sql)) {
    $last_id = mysqli_insert_id($conn);
    $msg1 = "New record created successfully. Last inserted ID is: " . $last_id;
} else {
    $msg_error = "Error: " . $sql . "<br>" . mysqli_error($conn);
    } 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-11-27T16:45:43.577

另一个可能的答案是：

当您定义表格时，它会包含列和数据。列 id 可以具有属性**AUTO_INCREMENT**。

通过这种方法，您不必担心**id**，它**会自动**生成。

例如（取自[w3schools](http://www.w3schools.com/SQl/sql_autoincrement.asp)）

```
CREATE TABLE Persons
(
ID int NOT NULL AUTO_INCREMENT,
LastName varchar(255) NOT NULL,
FirstName varchar(255),
Address varchar(255),
City varchar(255),
PRIMARY KEY (ID)
) 
```

希望这对某人有帮助。

**编辑：这只是您定义如何生成自动ID的部分，在创建后获取它，之前的答案是正确的。**

# delphi - 为什么 Delphi 2009 IDE 生成的可执行文件与命令行生成的不同？

> ID：897357
> 
> 赞同：10
> 
> 时间：2009-05-22T11:07:23.027
> 
> 标签：delphi, msbuild, delphi-2009

我正在使用 MSBuild 生成构建，并在命令行的 dproj 中设置构建配置。如此生成的可执行文件的大小与 IDE 构建生成的大小不同（差别不大，但仍然如此！），这有点令人不安。任何想法为什么？我会认为使用相同的编译器？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-22T11:39:03.493

从 Delphi 命令行编译器构建的主要功能是**标准化**- 您明确识别选项（在命令行、.cfg 文件等中），编译器遵循专门提供的选项。相比之下，IDE 有许多其他不明确和明确的行为 - 例如，它可能会搜索项目选项中未指定的库路径。我的猜测是在 IDE 构建中发生了一些你不完全了解的事情——这就是为什么标准化构建是从命令行完成的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-22T12:38:11.863

要查看 IDE 在做什么，请检查

工具 | 选项 | 环境选项 | 编译运行 | 显示命令行

您可以检查编译器消息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-22T18:39:52.713

使用命令行进行构建一致性的第一个答案是正确的，如果您依赖于生产文件始终来自控制台构建的构建系统，那么您可能不必担心这一点。

另一方面，如果你真的想弄清楚发生了什么，你应该打开地图文件（在完整的细节级别）并比较/比较它们。如果两者之间存在差异，它们将出现在那里。可能存在的任何其他差异都可能是命令行选项不同的结果（例如可能在 IDE 设置中设置的条件标志）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T13:21:52.850

如果您向命令行编译器提供完全相同的参数，则生成的可执行文件实际上将是相同的。

事实上，IDE 只是调用命令行编译器。在 IDE 中编译您的项目并查看消息窗口。您将看到完整的 dcc32.exe 调用...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-22T12:44:15.173

这种行为在我使用过的每个版本的 Delphi 中都存在。（5 - 2006 年）。我不会太担心它。当我第一次发现它时，我花了很多时间试图解决这个差异。我错过了编译器标志吗？IDE 和命令行编译器支持的选项之间是否存在差异？

最后我认为这不是什么大问题。两者都始终如一地生成功能等效的可执行文件。

# gnu - GNU 屏幕刷新问题

> ID：897358
> 
> 赞同：5
> 
> 时间：2009-05-22T11:07:34.417
> 
> 标签：gnu, flicker, gnu-screen

我最近开始使用 GNU Screen，但遇到了一个非常烦人的问题。

在任何屏幕窗口中，如果在提示符处没有输入任何内容时按左箭头键或退格键，屏幕似乎会刷新，导致轻微闪烁。在提示符处键入一些文本后，使用退格键或向左箭头不会导致闪烁（至少在到达提示符中的第一个字符之前）。

有人见过这个吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-22T11:20:27.137

这不是问题。这是一个特点。当您的终端中启用“可视铃”时，它的行为应该是这样的。我猜默认情况下它是什么。

看看[这个](http://magazine.redhat.com/2007/09/27/a-guide-to-gnu-screen/)文件。文件中有与可视铃相关的三个属性。您可以在**~/.screenrc中更改它**

```
vbell_msg "bell: window ~%"     # Message for visual bell
vbellwait 2                     # Seconds to pause the screen for visual bell
vbell off                       # Turns visual bell off 
```

尝试将**vbell**属性设置为**off**。

另外，我建议您在[ServerFault](http://serverfault.com)中提出相同的问题。我相信你会在那里得到更好的答案。要访问该网站，因为它处于私人测试阶段，请查看[此](https://blog.stackoverflow.com/2009/04/server-fault-private-beta-begins/)博客条目。

# python - 在 Python 中调用函数列表的惯用方式是什么？

> ID：897362
> 
> 赞同：4
> 
> 时间：2009-05-22T11:09:53.927
> 
> 标签：python

我有一个在触发事件时需要调用的回调函数列表。这是惯用的python吗？

```
def first_callback(m):
  print 'first ' + m

def second_callback(m):
  print 'second ' + m

lst = [first_callback, second_callback]

map(lambda x: x("event_info"),lst) #is this how you do it? 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-22T11:14:00.830

仅用于`map`没有副作用的函数（如`print`）。也就是说，仅将它用于仅返回某些内容的函数。在这种情况下，常规循环更为惯用：

```
for f in lst:
    f("event_info") 
```

**编辑**：同样，从 Python 3.0 开始，[`map`](http://docs.python.org/3.0/library/functions.html#map)返回一个迭代器而不是一个列表。因此，在 Python 3.0 中，问题中给出的代码不会调用*任何*函数，除非生成器中的所有元素都被显式评估（例如，通过封装对`map`inside的调用[`list`](http://docs.python.org/3.0/library/functions.html#list)）。幸运的是，[2to3](http://docs.python.org/library/2to3.html)工具会对此发出警告：

文件`map.py`：

```
map(lambda x: x, range(10)) 
```

`2to3-3.0 map.py`输出：

```
RefactoringTool: Skipping implicit fixer: buffer
RefactoringTool: Skipping implicit fixer: idioms
RefactoringTool: Skipping implicit fixer: set_literal
RefactoringTool: Skipping implicit fixer: ws_comma
--- map.py (original)
+++ map.py (refactored)
@@ -1,1 +1,1 @@
-map(lambda x: x, range(10))
+list(map(lambda x: x, list(range(10))))
RefactoringTool: Files that need to be modified:
RefactoringTool: map.py
RefactoringTool: Warnings/messages while refactoring:
RefactoringTool: ### In file map.py ###
RefactoringTool: Line 1: You should use a for loop here 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-22T11:15:11.047

你也可以写一个列表推导：

```
[f("event_info") for f in lst] 
```

但是，它确实具有返回结果列表的副作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-28T18:26:31.407

如果您已经动态创建了简单的函数列表，则很好：

对于 list_of_functions 中的函数：function(your_argument_here)

但是，如果您使用 OOP 并且某些类应该知道某些事件发生（通常会发生变化），请考虑引入观察者设计模式： [http](http://en.wikipedia.org/wiki/Observer_pattern) ://en.wikipedia.org/wiki/Observer_pattern ，

引入模式意味着将工作代码重构为该模式（并在代码看起来不错时停止，即使没有引入整个模式）在“重构为模式”Kerievsky 中阅读更多内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-11-29T01:10:55.063

我不得不问这是否真的是OP的意图。当我听到“调用函数列表”时，我假设只是循环遍历函数列表并调用每个函数是如此明显，以至于问题必须更多。例如，给定这两个字符串操纵器：

```
def reverse(s):
    return s[::-1]

import random
def randomcase(s):
    return ''.join(random.choice((str.upper, str.lower))(c) for c in s)

manips = [reverse, randomcase]
s = "Now is the time for all good men to come to."

# boring loop through list of manips
for fn in manips:
    print fn(s)

# more interesting chain through list of manips
s_out = s
for fn in manips:
    s_out = fn(s_out)
print s_out 
```

第一个循环打印：

```
.ot emoc ot nem doog lla rof emit eht si woN
NOW IS THe tIMe for aLL good meN TO COme To. 
```

第二个将第一个函数的输出链接到下一个函数的输入，打印：

```
.oT EMoC OT NeM DOog lla RoF emit EHt SI won 
```

第二种方法允许您从几个简单的函数中组合出更复杂的函数。

# apache - 如何使用mod重写

> ID：897364
> 
> 赞同：0
> 
> 时间：2009-05-22T11:10:19.903
> 
> 标签：apache, .htaccess, mod-rewrite

我已将我的网站从旧服务器转移到共享服务器。

我所有的代码都在`"lfdata/main/com"`共享`"public_html"`服务器上。

干净的 URL 如下所示：

```
http://ip-address/~name/how
```

重写后的 URL 应该是：

```
http://ip-address/~name/lfdata/main/com/how.php
```

那么任何人都可以建议创建上述 URL 的重写规则吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T11:28:09.867

试试这个规则：

```
RewriteCond %{REQUEST_URI} !^/~[^/]+/lfdata/main/com/
RewriteRule ^(~[^/]+)/(.+) $1/lfdata/main/com/$2.php [L] 
```

这会将内部的任何请求重写为.`/~`*`name`*`/`*`foobar`*`/~`*`name`*`/lfdata/main/com/`*`foobar`*`.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T11:21:20.130

这将执行您的重写，包括查询字符串参数

```
RewriteRule ^~name/how(.*)$ ~name/lfdata/main/com/how.php$1 
```

# c - 指针在 C 中是如何工作的？（你什么时候可以使用它们？）

> ID：897366
> 
> 赞同：190
> 
> 时间：2009-05-22T11:12:09.617
> 
> 标签：c, pointers

指向指针的指针在 C 中如何工作？
你什么时候可以使用它们？

* * *

## 回答 #1

> 赞同：378
> 
> 时间：2009-05-22T11:28:20.257

让我们假设一台具有 8 位地址的 8 位计算机（因此只有 256 字节的内存）。这是该内存的一部分（顶部的数字是地址）：

```
 54   55   56   57   58   59   60   61   62   63   64   65   66   67   68   69
+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+
|    | 58 |    |    | 63 |    | 55 |    |    | h  | e  | l  | l  | o  | \0 |    |
+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+ 
```

您可以在此处看到，在地址 63 处，字符串“hello”开始。所以在这种情况下，如果这是内存中唯一出现的“hello”，那么，

```
const char *c = "hello"; 
```

... 定义`c`为指向（只读）字符串“hello”的指针，因此包含值 63。`c`本身必须存储在某处：在上面的示例中，位置为 58。当然我们不能只指向字符，但也指向其他指针。例如：

```
const char **cp = &c; 
```

现在`cp`指向`c`，即它包含`c`（58）的地址。我们可以走得更远。考虑：

```
const char ***cpp = &cp; 
```

现在`cpp`存储 的地址`cp`。所以它的值是 55（基于上面的例子），你猜对了：它本身存储在地址 60。

* * *

至于*为什么*使用指向指针的指针：

*   数组的名称通常会产生其第一个元素的地址。因此，如果数组包含 type 的元素，则对该数组`t`的引用具有 type `t *`。现在考虑一个 type 数组的数组`t`：自然地，对该二维数组的引用将具有 type `(t *)*`= `t **`，因此是指向指针的指针。
*   尽管字符串数组听起来是一维的，但实际上它是二维的，因为字符串是字符数组。因此：`char **`。
*   如果要更改类型的变量，函数`f`将需要接受类型的参数。`t **``t *`
*   许多其他原因不胜枚举。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2009-05-22T11:21:40.847

**指向指针的指针如何在 C 中工作？**

首先，指针是一个变量，与任何其他变量一样，但它保存变量的地址。

指向指针的指针是变量，与任何其他变量一样，但它保存变量的地址。该变量恰好是一个指针。

**你什么时候使用它们？**

当您需要返回指向堆上某些内存的指针时可以使用它们，但不使用返回值。

例子：

```
int getValueOf5(int *p)
{
  *p = 5;
  return 1;//success
}

int get1024HeapMemory(int **p)
{
  *p = malloc(1024);
  if(*p == 0)
    return -1;//error
  else 
    return 0;//success
} 
```

你这样称呼它：

```
int x;
getValueOf5(&x);//I want to fill the int varaible, so I pass it's address in
//At this point x holds 5

int *p;    
get1024HeapMemory(&p);//I want to fill the int* variable, so I pass it's address in
//At this point p holds a memory address where 1024 bytes of memory is allocated on the heap 
```

还有其他用途，例如每个 C 程序的 main() 参数都有一个指向 argv 指针的指针，其中每个元素都包含一个字符数组，这些字符是命令行选项。您必须小心，但当您使用指针的指针指向二维数组时，最好使用指向二维数组的指针。

为什么很危险？

```
void test()
{
  double **a;
  int i1 = sizeof(a[0]);//i1 == 4 == sizeof(double*)

  double matrix[ROWS][COLUMNS];
  int i2 = sizeof(matrix[0]);//i2 == 240 == COLUMNS * sizeof(double)
} 
```

这是一个正确完成的指向二维数组的指针示例：

```
int (*myPointerTo2DimArray)[ROWS][COLUMNS] 
```

但是，如果要支持 ROWS 和 COLUMNS 的可变数量的元素，则不能使用指向二维数组的指针。但是，当您事先知道时，您将使用二维数组。

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2014-03-12T14:37:44.353

我喜欢这个在 Git 2.0 中使用指针的“真实世界”代码示例，[提交 7b1004b](https://github.com/git/git/commit/7b1004b0ba6637e8c299ee8f927de5426139495c)：

> 莱纳斯曾经说过：
> 
> > 我实际上希望更多的人了解真正核心的低级编码。不是大而复杂的东西，比如无锁名称查找，但只是很好地使用了指针到指针等
> > 。例如，我见过太多人通过跟踪“上一个”条目来删除单链表条目，然后删除条目，执行以下操作：
> > 
> > ```
> >  if (prev)
> >      prev->next = entry->next;
> >    else
> >      list_head = entry->next; 
> > ```
> > 
> > 每当我看到这样的代码时，我都会说“这个人不懂指针”。可悲的是，这很常见。
> 
> 了解指针的人只需使用“**指向入口指针的指针**”，并使用 list_head 的地址对其进行初始化。然后当他们遍历列表时，他们可以在不使用任何条件的情况下删除条目，只需执行
> 
> ```
> *pp =  entry->next 
> ```
> 
> [![指针](https://i.stack.imgur.com/bpfxT.gif)](https://i.stack.imgur.com/bpfxT.gif)
> 
> 即使在添加 2 行注释的情况下，应用这种简化也可以让我们从这个函数中减少 7 行。
> 
> ```
> - struct combine_diff_path *p, *pprev, *ptmp;
> + struct combine_diff_path *p, **tail = &curr; 
> ```

* * *

[Chris](https://stackoverflow.com/users/1198649/chris)在 2016 年视频“ [Linus Torvalds 的双指针问题”](https://youtu.be/o8NPllzkFhE?t=864)[的评论](https://stackoverflow.com/questions/897366/how-do-pointer-to-pointers-work-in-c#comment77036936_22354860)中指出。

* * *

[kumar](https://stackoverflow.com/users/124330/kumar)在博客文章“ [Linus on Understanding Pointers](http://grisha.org/blog/2013/04/02/linus-on-understanding-pointers/) ”[的评论](https://stackoverflow.com/questions/897366/how-do-pointer-to-pointers-work-in-c/22354860?noredirect=1#comment36251111_22354860)中指出， **[Grisha Trubetskoy](https://github.com/grisha)**解释说：

> 假设你有一个链表定义为：
> 
> ```
>  typedef struct list_entry {
>        int val;
>        struct list_entry *next;
>    } list_entry; 
> ```
> 
> 您需要从头到尾对其进行迭代并删除其值等于 to_remove 值的特定元素。
> 更明显的方法是：
> 
> ```
>  list_entry *entry = head; /* assuming head exists and is the first entry of the list */
>    list_entry *prev = NULL;
>    
>    while (entry) { /* line 4 */
>        if (entry->val == to_remove)     /* this is the one to remove ; line 5 */
>            if (prev)
>               prev->next = entry->next; /* remove the entry ; line 7 */
>            else
>                head = entry->next;      /* special case - first entry ; line 9 */
>    
>        /* move on to the next entry */
>        prev = entry;
>        entry = entry->next;
>    } 
> ```
> 
> 我们在上面做的是：
> 
> *   遍历列表直到 entry is `NULL`，这意味着我们已经到达列表的末尾（第 4 行）。
> *   当我们遇到一个我们想要删除的条目时（第 5 行），
> *   我们将当前下一个指针的值分配给前一个指针，
> *   从而消除当前元素（第 7 行）。
> 
> 上面有一个特殊情况 - 在迭代开始时没有前一个条目（`prev`is `NULL`），因此要删除列表中的第一个条目，您必须修改 head 本身（第 9 行）。
> 
> Linus 的意思是，**上面的代码可以通过使前一个元素成为指向指针的指针而不仅仅是一个指针来简化**。
> 然后代码如下所示：
> 
> ```
>  list_entry **pp = &head; /* pointer to a pointer */
>    list_entry *entry = head;
> 
>    while (entry) {
>        if (entry->val == to_remove)
>            *pp = entry->next;
>        else
>             pp = &entry->next;
>        entry = entry->next;
>    } 
> ```
> 
> 上面的代码与前面的变体非常相似，但请注意我们不再需要注意列表的第一个元素的特殊情况，因为`pp`不是`NULL`在开头。简单而聪明。
> 
> 此外，该线程中的某人评论说这更好的原因是因为`*pp = entry->next`是原子的。**它肯定不是原子**的。
> 上面的表达式包含两个解引用运算符 ( `*`and `->`) 和一个赋值，这三件事都不是原子的。
> **这是一个常见的误解，但遗憾的是，C 中几乎没有任何东西应该被认为是原子**的（包括`++`and`--`运算符）！

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2009-06-07T14:55:30.710

在介绍大学编程课程的指针时，我们得到了两个关于如何开始学习它们的提示。第一个是查看[Pointer Fun With Binky](http://cslibrary.stanford.edu/104/)。第二个是考虑刘易斯卡罗尔的《*穿过镜子》中*[黑线鳕的眼睛](http://en.wikipedia.org/wiki/Haddocks%27_Eyes)段落

 *> “你很难过，”骑士焦急地说：“让我给你唱一首歌来安慰你。”</p>
> 
> “很长吗？” 爱丽丝问，因为那天她听了很多诗。
> 
> “它很长，”骑士说，“但它非常非常漂亮。每个听到我唱歌的人——要么让他们热泪盈眶，要么——”</p>
> 
> “不然呢？” 爱丽丝说，因为骑士突然停顿了一下。
> 
> “否则它不会，你知道的。这首歌的名字叫做'Haddocks' Eyes。”</p>
> 
> “哦，这就是这首歌的名字，是吗？”爱丽丝说，试图让自己感兴趣。
> 
> “不，你不明白，”骑士说，看起来有点恼火。“这个名字就是这么叫的。这个名字真的是'The Aged Aged Man'。”</p>
> 
> “那我应该说‘这首歌就是这么叫的’？” 爱丽丝纠正了自己。
> 
> “不，你不应该：那完全是另一回事！这首歌叫“方法和手段”：但这只是它的名字，你知道的！”</p>
> 
> “那么，那首歌是什么？” 爱丽丝说，此时她已经完全不知所措了。
> 
> “我正要这么做，”骑士说。“这首歌真的是'A-sitting On A Gate'：这首歌是我自己发明的。”</p>

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2009-05-22T11:19:02.740

[指向指针的指针](https://web.archive.org/web/20180212053734/http://c-faq.com/%7Escs/cclass/int/sx8.html)

> 因为我们可以有指向 int 的指针，指向 char 的指针，以及指向我们定义的任何结构的指针，实际上指向 C 中任何类型的指针，所以我们可以拥有指向的指针也就不足为奇了。其他指针。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2016-09-01T11:02:04.037

**考虑下图和程序以更好地理解这个概念**。

[![双指针图](https://i.stack.imgur.com/aSoZ0.jpg)](https://i.stack.imgur.com/aSoZ0.jpg)

如图所示，**ptr1**是一个**单指针**，其地址为变量**num**。

```
ptr1 = &num; 
```

同样**ptr2**是**指向指针（双指针）**的指针，它具有指针**ptr1**的地址。

```
ptr2 = &ptr1; 
```

指向另一个指针的指针称为双指针。在这个例子中**ptr2**是一个双指针。

**上图中的值：**

```
Address of variable num has : 1000
Address of Pointer ptr1 is: 2000
Address of Pointer ptr2 is: 3000 
```

**例子：**

```
#include <stdio.h>

int main ()
{
   int  num = 10;
   int  *ptr1;
   int  **ptr2;

   // Take the address of var 
   ptr1 = &num;

   // Take the address of ptr1 using address of operator &
   ptr2 = &ptr1;

   // Print the value
   printf("Value of num = %d\n", num );
   printf("Value available at *ptr1 = %d\n", *ptr1 );
   printf("Value available at **ptr2 = %d\n", **ptr2);
} 
```

**输出：**

```
Value of num = 10
Value available at *ptr1 = 10
Value available at **ptr2 = 10 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2009-05-22T12:17:21.420

当需要对指针的引用时，使用指向指针的指针。例如，当您希望修改在被调用函数内的调用函数作用域中声明的指针变量的值（指向的地址）时。

如果您将单个指针作为参数传入，您将修改指针的本地副本，而不是调用范围内的原始指针。使用指向指针的指针，您可以修改后者。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2009-05-22T11:20:10.147

指向指针的指针也称为**句柄**。它的一种用法通常是当对象可以在内存中移动或删除时。一个人通常负责锁定和解锁*对象*的使用，以便在访问它时不会移动它。

它通常用于内存受限的环境，即Palm OS。

> [computer.howstuffworks.com 链接>>](http://computer.howstuffworks.com/c32.htm)
> 
> [www.flippinbits.com 链接>>](http://www.flippinbits.com/twiki/index.php?page=handle-vs-pointer)

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2009-05-22T11:17:14.817

它是指向指针地址值的指针。（我知道这很糟糕）

基本上，它允许您将指针传递给另一个指针的地址值，因此您可以修改另一个指针从子函数指向的位置，例如：

```
void changeptr(int** pp)
{
  *pp=&someval;
} 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2009-05-22T11:24:22.247

您有一个包含某物地址的变量。那是一个指针。

然后你有另一个变量包含第一个变量的地址。那是一个指向指针的指针。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2009-05-22T11:15:23.387

指向指针的指针是指向指针的指针。

someType** 的一个有意义的例子是一个二维数组：你有一个数组，里面填充了指向其他数组的指针，所以当你写

指针[5][6]

您访问包含指向第 5 个位置的其他数组的指针的数组，获取指针（让 fpointer 他的名字），然后访问引用该数组的数组的第 6 个元素（因此，fpointer[6]）。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-06-10T00:36:29.010

工作原理：它是一个可以存储另一个指针的变量。

你什么时候使用它们：如果你的函数想要构造一个数组并将它返回给调用者，许多使用其中之一。

```
//returns the array of roll nos {11, 12} through paramater
// return value is total number of  students
int fun( int **i )
{
    int *j;
    *i = (int*)malloc ( 2*sizeof(int) );
    **i = 11;  // e.g., newly allocated memory 0x2000 store 11
    j = *i;
    j++;
    *j = 12; ;  // e.g., newly allocated memory 0x2004 store 12

    return 2;
}

int main()
{
    int *i;
    int n = fun( &i ); // hey I don't know how many students are in your class please send all of their roll numbers.
    for ( int j=0; j<n; j++ )
        printf( "roll no = %d \n", i[j] );

    return 0;
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-02-22T05:42:24.220

一个[5 分钟的视频](https://www.youtube.com/watch?v=3X-ray3tDjQ)，解释指针的工作原理：

* * *

[![指针桶](https://i.stack.imgur.com/eaNS1.png)](https://www.youtube.com/watch?v=3X-ray3tDjQ)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-02-12T09:41:41.620

有很多有用的解释，但我没有找到一个简短的描述，所以..

基本上指针是变量的地址。简短摘要代码：

```
 int a, *p_a;//declaration of normal variable and int pointer variable
     a = 56;     //simply assign value
     p_a = &a;   //save address of "a" to pointer variable
     *p_a = 15;  //override the value of the variable

//print 0xfoo and 15 
//- first is address, 2nd is value stored at this address (that is called dereference)
     printf("pointer p_a is having value %d and targeting at variable value %d", p_a, *p_a); 
```

也可以在主题[什么是引用和取消引用中找到有用的信息](https://stackoverflow.com/questions/14224831/meaning-of-referencing-and-dereferencing/14224977)

而且我不太确定，指针什么时候有用，但通常在进行一些[手动/动态内存分配时使用它们是必要的——malloc、calloc 等。](https://www.programiz.com/c-programming/c-dynamic-memory-allocation)

所以我希望它也有助于澄清问题:)

# jquery - JQueryUI 对话框和 HTML 选择

> ID：897367
> 
> 赞同：1
> 
> 时间：2009-05-22T11:12:23.703
> 
> 标签：jquery, select, user-interface

我有一个 ASPX 页面，其中 jQuery UI 对话框将出现在屏幕上，单击按钮时，当 UI 对话框处于活动状态时，用户无法与任何其他控件交互。IT 运行良好。但是我在页面中有一个下拉列表（选择）。它仍然处于活动状态。用户可以从下拉列表中选择任何选项。我知道在 IE6 中，它考虑选择框作为一个新元素。我该如何解决这个问题？我想限制用户在 UI 对话框处于活动状态时更改下拉列表内容

有什么想法吗 ？提前致谢

在头部编辑我的样式标签

```
<style type="text/css">
    body { font-size: 62.5%; }
    label, input { display:block;
        width: 94px;
    }
    input.text { margin-bottom:12px; width:95%; padding: .4em; }
    fieldset { padding:0; border:0; margin-top:25px; }
    h1 { font-size: 1.2em; margin: .6em 0; }
    div#users-contain {  width: 350px; margin: 20px 0; }
    div#users-contain table { margin: 1em 0; border-collapse: collapse; width: 100%; }
    div#users-contain table td, div#users-contain table th { border: 1px solid #eee; padding: .6em 10px; text-align: left; }
    .ui-button { outline: 0; margin:0; padding: .4em 1em .5em; text-decoration:none;  !important; cursor:pointer; position: relative; text-align: center; }
    .ui-dialog .ui-state-highlight, .ui-dialog .ui-state-error { padding: .3em;  }
    #dialog{
     display: none;
    }

</style> 
```

我正在使用 dialog.open 方法来显示对话框

```
 $("#dialog").dialog("open"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-22T22:58:25.330

我目前正在使用 IE6 遇到同样的事情。我的 aspx 页面有几个 html 选择，它们通过出现在它们上面的 jQuery UI 1.7.1 对话框显示。我相信这是因为对话框没有在对话框下放置隐藏/零不透明度**iFrame。**我有点期待 UI 开发人员已经为我们这些 IE6 开发人员完成了这项工作，但它确实存在。

当我找到一个方便的解决方法时，我会发布它，或者如果其他一些善良的灵魂可以这样做，那就太好了。

**altCognito**提交的链接在 IE6 中也存在这个问题。

此页面引用了 iframe 修复，但并非专门针对 UI 对话框：ht tp://stackoverflow.com/questions/7937/solve-the-ie-select-overlap-bug

对不起，我是新用户，新用户不允许发布工作超链接

另外，您是否使用：

$('.selector').dialog({ modal: true });

使您的对话框模式化并阻止与父页面的交互？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T23:57:20.063

在对话框中您需要设置 bgiframe : true 并且还包括 bgiframe 插件

[看这里](http://docs.jquery.com/UI/Dialog#option-bgifr)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T11:28:48.773

基于以下示例：

[http://jsbin.com/ibeje](http://jsbin.com/ibeje)

我无法复制正在发生的事情。还有其他事情发生。您是自己设置选择框的 z 顺序吗？

# php - 从 php 读取重写的 (mod_rewrite) 文件

> ID：897368
> 
> 赞同：0
> 
> 时间：2009-05-22T11:12:59.630
> 
> 标签：php, mod-rewrite, readfile

假设您只有通过 mod_rewrite 规则重写的文件（与应用程序托管在同一台服务器上）的 URL。

在没有直接访问 .htaccess 文件或用于构建原始 URL 的重写规则的情况下，您将如何使用 PHP 读取该文件的内容？

我正在尝试提取所有设置了“src”属性的脚本标签，检索目标文件的内容，将它们全部合并到一个大的 javascript 文件中，将其缩小，然后提供该文件。

问题是通过 file_get_contents 读取所有文件似乎会减慢页面速度，所以我正在寻找替代方案，如果我能够以某种方式直接从文件系统读取文件而不必在后台生成其他请求，但要做到这一点，我必须找出文件的路径，并且有些是通过已重写的 URL 访问的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T11:29:59.847

你不能像原来的 PHP 一样包含它，只能[获取](http://www.php.net/manual/en/features.remote-files.php "远程文件")PHP 本身的执行结果。

如果你有 fopen 包装器，这就像在重写的 URL 上使用[require](http://www.php.net/function.require "要求")、[include](http://www.php.net/function.include "包括")或[file_get_contents一样简单。](http://www.php.net/manual/en/function.file-get-contents.php "文件获取内容")否则，您可以使用[fsockopen](http://www.php.net/manual/en/function.fsockopen.php "fsockopen")和[curl](http://www.php.net/manual/en/book.curl.php "卷曲")作为选项来为结果创建 HTTP 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T11:25:52.477

由于您无法说明如何处理请求，唯一可能的解决方案是将 HTTP 请求发送到该服务器。但这只会让您获得该文件/脚本的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T11:38:49.423

PHP 位于 apache 之后，并使用 fopen 或 include 等函数在文件系统级别进行文件访问。重写模块不适用于此访问，因为这些函数使用操作系统文件访问例程而不是 apache。

没有办法做到这一点，但是在 php-script 中实现与在 .htaccess 中相同的 URL 重写规则，因为 apache-rewriting 和 php 文件访问彼此一无所知，并且位于完全不同的 web 应用程序层上.

编辑后：唯一的方法 - 在 php 脚本中实施您的重写规则，并在通过 php 解析 URL（而不是重写模块）后使用文件系统 php 访问。

# .net - 大文件 (30Mb+) 通过 Internet 上传，有什么更好的选择？

> ID：897370
> 
> 赞同：9
> 
> 时间：2009-05-22T11:13:29.287
> 
> 标签：.net, file-upload

我和一个朋友一直在讨论通过 Internet 发送大文件的最佳方式是什么。FTP、单个 Web 服务、将字节分块到多个 Web 服务、HTTP 文件发布（多部分消息）、RIA 接口（SilverLight 或 Flash）。

是否缺少答案/解决方案？

让我告诉你更多我的具体情况。

我有一个 .NET 2.0 Windows 窗体“客户端”应用程序，它通过 Web 服务与 ASP.NET 应用程序进行交互。在客户端应用程序中，我需要能够上传大文件并将上传状态传达给用户。我正在做一个 Web 服务，但发现文件大小在 Internet 上存在问题，因此创建了多个 Web 服务来分块字节数组。现在，想考虑其他选择。

做了一些研究...

SilverLight 文件上传 www.codeplex.com/SilverlightFileUpld

ASP.NET 文件上传 www.brettle.com/neatupload

.NET 框架中的 FTP www.windowsdevcenter.com/pub/a/windows/2006/12/12/building-ftp-services-using-net-20.html

想听听别人的意见。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-22T11:14:47.460

我们遇到了这个问题，我们使用具有三个调用的 Web 服务解决方案，一个启动进程，第二个发送文件块，第三个结束进程，就像一个魅力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-23T18:38:03.153

我本人偏爱 Flash/Silverlight 选项（通常是 Silverlight，因为它与 .NET 完美集成。）这两个选项都提供了一种稳定、快速的文件上传机制，不会挂起您正在处理的页面，允许用户执行上传过程中的其他任务（假设这些任务不会将它们带到另一个页面）。

DeviantArt.com 的上传偏差页面是基于 Flash 的上传服务的一个非常棒的示例，它允许同时上传多个文件。您可以选择要上传的文件，然后通过适用于您的浏览器的任何内容在后台提交该文件（在某些情况下，我认为会创建一个隐藏的 iframe，如果 Flash 不可用，它会提交文件请求），然后您会得到当前上传的每个文件的带有异步进度指示器的文件图标。

Flash/Silverlight 的附加好处之一是您可以在提交文件之前在客户端与文件进行交互，从而允许您执行诸如验证数据不是恶意软件、脚本等操作。这可能非常困难或不可能由于现在网络浏览器中通常存在的权限限制，经典文件上传和 javascript（有充分的理由。）

对于您的应用程序，我会说 Silverlight 将是与您的 Web 服务交互的最佳选择（我假设是经典的 ASMX 服务，但如果它们是 WCF，Silverlight 也对 WCF 有很好的支持。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T19:32:29.483

有许多很棒的 Flash 上传脚本，它们具有令人印象深刻的功能。

我最喜欢的是[Solmetra Flash Uploader](http://www.solmetra.com/en/disp.php/en_products/flash_uploader/uploader_intro)，[在线演示](http://www.solmetra.com/en/disp.php/en_products/flash_uploader/uploader_demo)看起来令人印象深刻，您还可以将其设置为零宽度和高度并用 Javascript 编写脚本。

另一种选择是[SWFUpload](http://swfupload.org/)，它不那么华而不实，但可以根据您的需要更好地完成工作。它也有一个[在线演示](http://swfupload.org/)。

甚至 Gmail 也[使用 flash 来上传附件](http://googlesystem.blogspot.com/2009/02/better-interface-for-uploading-gmail.html)。

# delphi - 在 Delphi 2009 中，我需要释放变体数组吗？

> ID：897371
> 
> 赞同：7
> 
> 时间：2009-05-22T11:13:46.027
> 
> 标签：delphi, memory-management

如果我有一个只包含简单类型的变体数组，并且可能还有其他简单类型的变体数组，我是否需要做任何明确的事情来释放内存，或者这一切都为我处理好了。我一直以为没什么可做的，但我只是有点怀疑！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-22T11:39:45.520

变体是托管类型。它们归编译器的引用计数系统所有，不需要手动释放。

如果您执行一些复杂的操作，例如将对象类型转换为整数并将其存储在变体中，然后将其作为对对象的唯一引用，那么您需要在变体超出范围之前清理它，但是变体本身（包括变体数组）是安全的。

# html - 在网站上填充一定数量的空白

> ID：897372
> 
> 赞同：1
> 
> 时间：2009-05-22T11:13:54.403
> 
> 标签：html, css

在我的网络应用程序中，我使用以下 CSS 来提供通知/错误消息：

```
#notice { 
  border: 1px solid green; 
  padding: 1em; 
  margin: 1em; 
  margin-bottom: 2em; 
  background-color: lightgreen; 
  font: bold sans-serif;
  color: darkgreen 
} 
```

但是当不需要通知时，我希望空白空间等于该通知将占用的空间量。我想这样做，以便我的网页看起来一致，并且页面上的项目不会根据是否有通知而上下移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T11:19:53.347

我通过设置固定高度来做到这一点。

我还听说过这样的论点，即让页面向下颠簸是可以的（这就是 stackoverflow 的工作方式），因为它会引起人们对消息的注意，这是一件好事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T13:48:02.300

解决方案可能取决于您希望/必须如何实现此通知块。如果您使用 Ajax 更新页面（没有优雅降级，JS 退回到正常状态），我强烈建议您使用像 Facebook 这样的模态窗口来执行此操作 - 它既好用又方便。如果你没有机会使用模态窗口，它可能是这样的：

```
#notice{ height: 100px; margin: 1em 1em 2em } /* #notice can be a wrapper with basic dimensions */
.error{ border: 1px solid red; } /* reuse the same block */
.info{ border: 1px solid green; } /* reuse the same block */ 
```

和HTML分别：

```
<div id="notice"></div> 
```

错误状态：

```
<div id="notice" class="error"> Your error message </div> 
```

信息状态：

```
<div id="notice" class="info"> Your info message </div> 
```

当然，当消息太长时，您可能会遇到#notice div 高度问题，但这是另一个问题 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T23:49:57.753

我假设如果您不需要它，带有#notice 的 div 将不存在。为什么不使用这样的相邻选择器。它不适用于某些浏览器，例如 IE6。给它后面的元素一个“following”或类似的类。仍然会有一点不同，因为那里有距离边界 2px 的地方。

```
#notice {
  border: 1px solid green; 
  padding: 1em; 
  margin: 1em; 
  margin-bottom: 2em; 
  background-color: lightgreen; 
  font: bold sans-serif;
  color: darkgreen 
}
.following {
    margin-top:4em
}
#notice + .following {
    margin-top:2em;
}
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T11:19:03.817

您可以为 div 设置固定的高度和宽度。

```
＃注意 {
   ……
   高度：200px；
   宽度：100%；
}

```

或者，您可以使用最小高度和最小宽度。

# asp.net-ajax - .Net Microsoft Ajax Viewstate 问题

> ID：897398
> 
> 赞同：0
> 
> 时间：2009-05-22T11:21:31.097
> 
> 标签：asp.net-ajax, viewstate

一位前同事开发了一个几乎是可编辑网格的应用程序（想想时间表）。

MS Ajax 用于它，网格被包裹在一个更新面板中。

更糟糕的是，复杂的对象图被保存到`viewstate`每次刷新页面时，即更新单元格时，所有的网格`viewstate`都会在回传中从客户端传递到服务器，并且`viewstate`大小几乎是 meg 性能是裤子。

根据我对 Ajax 的理解，我们应该只传递最少量的数据，并且只传递需要的数据。这将需要重写并且成本很高。还有哪些其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T11:32:06.427

理想情况下，数据网格必须在禁用 ViewsState 的情况下使用。这意味着在每次回发时绑定网格。

当绝对需要保留任何控件的状态时，使用[ControlState代替 ViewState。](http://msdn.microsoft.com/en-us/library/1whwt1k7.aspx "ControlState")[您可以在此处](http://www.beansoftware.com/ASP.NET-Tutorials/ControlState-Property.aspx)阅读有关 ControlState的更多信息。

编辑：此外，还有许多轻量级的 ajax-y 数据网格可用。[Flexigrid](http://www.visual-blast.com/javascript/flexigrid-for-jquery-lightweight-and-rich-data-grid/ "弹性网格")就是其中之一。它是一个[jQuery](http://jquery.com/ "jQuery")实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T15:03:28.403

谢谢回复。即将进行重写，但我们需要同时修补应用程序以使客户满意并为我们争取时间来重写它。

我需要一个快速修复列表，我将研究的一个是将 ViewState 存储在 SQL 数据库中。

谢谢，乙

# ruby-on-rails - 使用 cookie 会话重放攻击：Rails 2.0

> ID：897405
> 
> 赞同：0
> 
> 时间：2009-05-22T11:24:01.903
> 
> 标签：ruby-on-rails, security, cookies

我正在使用带有 cookie 会话的 rails 2.0.5。

但是 cookie 会话存在严重的问题，即重放攻击的可能性。如何防止使用 cookie 存储重放攻击？

我希望使用 Rails 2.0 插件或具体的源示例代码。

你可以帮帮我吗？

[更多信息](http://izumi.plan99.net/blog/index.php/2007/11/25/rails-20-cookie-session-store-and-security/) [更多信息](http://osdir.com/ml/lang.ruby.rails.core/2007-03/msg00263.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T11:33:47.017

我认为阻止它们的唯一方法是使用 SSL 连接。

但我认为即使没有一个，你也会很安全，只要你不在会话中存储敏感数据（如密码）并确保为它们设置合理的到期时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-22T15:44:43.223

cookie 会话存储不会比其他 Rails 会话存储更容易受到重放攻击。虽然 cookie 存储在 cookie 中保存加密的会话数据，但其他存储保存会话 id - 对攻击者同样有价值。在大多数 Web 框架中也是如此。除了使用 SSL，我不相信有任何方法可以防止这些攻击。

# asp.net - ASP.NET 部分页面上传没有更新面板/使用 jQuery

> ID：897408
> 
> 赞同：0
> 
> 时间：2009-05-22T11:24:55.863
> 
> 标签：asp.net, jquery, partial

我有一个 ASPX 页面。在顶部我显示 5 个类别（例如：笔、书、鞋、手机、镜子）当我单击任何类别时，我想在标题下方显示该类别下的产品。我不想为此重新加载整个页面。我想在点击时保持我的页面原样（页眉、页脚和侧面板），除了图像的中心位置（可能是要显示的 DIV 或表格）产品）。最好的方法是什么？。我不想使用 ASP.NET Ajax 更新面板。我已经在我的项目中使用 jQuery。那么无论如何用 jQuery 来做这件事吗？请指教。在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T11:46:59.203

我建议阅读

*   [使用 jQuery 调用 Web 服务](http://encosia.com/2008/03/27/using-jquery-to-consume-aspnet-json-web-services/)

或者

*   [使用 jQuery 调用页面方法](http://encosia.com/2008/05/29/using-jquery-to-directly-call-aspnet-ajax-page-methods/)。

根据您的 Web 应用程序运行的位置（Intranet 而不是 Internet），使用 UpdatePanel 可能是实现 AJAX 样式功能的更快选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T11:40:55.970

据我说，使用包裹在Repeater/DataGrid/GridView 周围的UpdatePanel 将是一种更容易实现的方法。

它也可以用 jQuery 来完成。它包括`CateogryId`使用 ajax 向服务器发送请求，获取产品的[JSON](http://en.wikipedia.org/wiki/JSON "JSON")作为响应，以及使用 DOM 操作用 JSON 数据填充 div。

编辑：使用 JSON，可以以面向对象的方式以易于阅读的文本格式表示复杂数据。看看这个 -

```
var person = {
     "firstName": "John",
     "lastName": "Smith",
     "address": {
         "streetAddress": "21 2nd Street",
         "city": "New York",
         "state": "NY",
         "postalCode": 10021
     },
     "phoneNumbers": [
         "212 555-1234",
         "646 555-4567"
     ]
 }; 
```

`person`是一个 JSON 对象，包含以下属性：“firstName”、“lastName”等。您可以使用`person.firstName`、`person.lastName`等访问这些属性。

这是 JSON 的一个示例，您可以利用它创建自己的包含产品信息的 JSON 字符串，并将其以数组的形式发送给客户端。简而言之，它将是一个像这样的对象数组 -

```
var persons = [person1, person2, person3, ...]; //person1, person2, etc. are objects like the person object declared above. 
```

您可以使用[DataContractJsonSerializer](http://pietschsoft.com/post/2008/02/NET-35-JSON-Serialization-using-the-DataContractJsonSerializer.aspx)类（在 Framework 3.5 中）对 JSON 对象进行序列化/反序列化。如果您使用的是<3.5 的Framework，您可以使用[AjaxToolKit的](http://www.asp.net/ajax/AjaxControlToolkit/Samples/)[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)类来做同样的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T11:48:12.713

正如 Kirtan 提到的，最简单的答案**是**使用更新面板。

如果您不想走那条路，那么您可以使用 jQuery 对 IHttpHandler 进行 Ajax 调用，该 IHttpHandler 返回填充您要更新的面板所需的数据。

步骤如下：

*   使用 jQuery 调用“ `.ashx`”Ajax 处理程序。
*   让您的“ `.ashx`”文件以您选择的格式生成响应。这可以是 JSON 或 XML（如果您希望 JavaScript 解析出响应并生成列表），或者是要添加到页面的 HTML 内容本身。
*   jQuery 将接收来自您的处理程序的响应，并使用适当的数据填充您的面板。

网上有一些关于如何使用 IHttpHander 的教程。基本上它是一个非常简单的接口，ASP.NET 的 " `Page`" 类派生自。它比`Page`类轻得多，因此您可以获得比 UpdatePanel 更好的性能，但是，与大多数性能提升技术一样，您的代码稍微复杂一些。

这是[有关如何使用 IHttpHandler](http://www.brainbell.com/tutorials/ASP/Generic_Handlers_(ASHX_Files).html)类的教程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T12:45:35.250

您还可以考虑一个“快速而肮脏”的解决方案：在您的页面代码隐藏中，实现 ICallbackEventHandler，并返回一个 html 块，您将其填充到您的 div 或 table 中。

更新：请查看[http://msdn.microsoft.com/en-us/library/ms178208.aspx](http://msdn.microsoft.com/en-us/library/ms178208.aspx)，了解有关实现此功能所需的更多详细信息。

# internet-explorer-8 - 即使 IE=EmulateIE7 也会启用 IE8 兼容性视图按钮

> ID：897409
> 
> 赞同：4
> 
> 时间：2009-05-22T11:25:14.397
> 
> 标签：internet-explorer-8

对于我们的 Web 应用程序，我们为所有页面发送 X-UA-Compatible -> IE=EmulateIE7。但是，刷新按钮旁边的兼容性视图按钮仍会显示。

1）这是预期的行为吗？2) HTTP 标头不应该强制浏览器以 IE7 模式显示（启用 Quirks + IE7Standards），然后现在显示“兼容性视图”按钮吗？

如果一个站点没有 IE8 准备好，有没有办法强制 IE7 仿真，从而禁用这个按钮？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-22T15:56:29.743

根据[Just The Facts: Recap of Compatibility View](http://blogs.msdn.com/ie/archive/2009/02/16/just-the-facts-recap-of-compatibility-view.aspx)，您已*通过使用版本控制标签声明 [您的网站]“准备好”用于 Internet Explorer 8*。不应显示兼容性视图按钮：

> **网站所有者*始终*可以控制其内容。**默认情况下，Internet Explorer 使用 DOCTYPE 切换来确定 Quirks 与标准模式（同样，标准模式默认映射到 IE8 标准）。网站所有者可以选择使用 X-UA-Compatible 标签来绝对声明他们希望他们的网站如何显示并将标准模式页面映射到 IE7 标准。使用 X-UA-Compatible 标签会覆盖客户端上的兼容性视图。
> 
> **有时不显示兼容性视图按钮。**该按钮位于“停止”和“刷新”按钮旁边的地址栏上。在某些情况下，用户没有采取任何操作，因此“兼容性视图”按钮不会显示：
> 
> *   如果您正在查看内部到 Internet Explorer 页面（例如 about:InPrivate）
> *   如果您正在查看通过使用版本控制标记/HTTP 标头声明它已为 Internet Explorer 8“准备好”的页面（此标记是否触发 Quirks、IE7 标准或 IE8 标准无关紧要，按钮将不会不显示）
> *   如果您正在查看 Intranet 页面并且选中了“在兼容性视图中显示 Intranet 站点”复选框
> *   如果您正在查看任何网页并且选中了“在兼容性视图中显示所有网站”复选框
> *   如果您正在查看 Microsoft 提供的兼容性视图更新列表中包含的网页，并且您选中了“包括 Microsoft 更新的网站列表”复选框
> *   如果您通过开发者工具栏切换了“文档模式”或“浏览器模式”设置

如果您使用的是 HTTP 标头，您是否使用[Fiddler](http://www.fiddler2.com/fiddler2/)来验证`X-UA-Compatible`标头实际上是在每个页面上传递的？

如果您使用的是`META`标签，那么根据[META 标签和锁定未来兼容性](http://msdn.microsoft.com/en-us/library/cc817574.aspx)：

> X-UA-compatible header 不区分大小写；但是，除了 TITLE 元素和其他 META 元素之外，它必须出现在 Web 页面的标题（HEAD 部分）中的所有其他元素之前。

最后，当按钮出现时，IE8 是否真的*在*兼容性视图中？如果是这样，您的网站可能在 Microsoft 的 IE8 兼容性列表中，或者在本地客户端配置中：

*   `Tools`>`Compatibility View Settings`
*   确保您的网站未在*您添加到兼容性视图的网站下列出*
*   尝试取消选中*包括 Microsoft 更新的网站列表*并重新启动浏览器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-01-30T00:06:46.063

我在我们的工作服网站上遇到了一个问题，当 IE8 首次发布时，我们最初不得不使用 Meta EmulateIE7 来克服 CSS 问题。我们后来纠正了这个问题并添加了元标记 X-UA-Compatible IE=8

我们注意到的是，即使在清除浏览器缓存的情况下，IE8 仍然保留了用户设置的兼容性按钮的状态。克服这一点对我们来说很重要，因为它在以兼容模式运行时会导致脚本问题。

我们通过在所有页面的头部设置 X-UA-Compatible IE=8 并将其作为 HTTP Header 添加到 IIS 来解决问题。兼容性按钮不再显示在访问者浏览器上 =)

希望这可以帮助！

# javascript - 如何按需加载 Google API (UDS.JS)（使用 jQuery）？

> ID：897415
> 
> 赞同：1
> 
> 时间：2009-05-22T11:28:37.073
> 
> 标签：javascript, jquery, api

试过这个：

```
$('.link').click(function(e) {
 $.getScript('http://www.google.com/uds/api?file=uds.js&amp;v=1.0', function() {        
  $('body').append('<p>GOOGLE API (UDS) is loaded</p>');
 });
 return false;
}); 
```

是的，它会加载一个主要的“uds.js”文件，然后通过加载一个语言环境 JS 文件来锁定页面（“default+en.I.js”，参见“uds.js”中的第 48 行）。

[解决方法（@jsbin）](http://jsbin.com/epito)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T21:34:53.707

如果你想动态加载谷歌的库，你应该查看谷歌的自动加载器： [http ://code.google.com/apis/ajax/documentation/#AutoLoading](http://code.google.com/apis/ajax/documentation/#AutoLoading)

它工作得非常好，但如果您使用自动加载器向导，请小心。

[http://code.google.com/apis/ajax/documentation/autoloader-wizard.html](http://code.google.com/apis/ajax/documentation/autoloader-wizard.html)

c&p 代码有一个错误让我绊倒： [http ://code.google.com/p/google-ajax-apis/issues/detail?id=244](http://code.google.com/p/google-ajax-apis/issues/detail?id=244)

我还发现，对于谷歌的一些库，如果我尝试异步加载脚本（比如你的），如果我没有指定一些可选参数（语言、回调等——即使是空字符串），我'会看到你看到的行为。

编辑：继续测试它。您的解决方案：http: [//pastie.org/486925](http://pastie.org/486925)

# iphone - 在 iPhone-OS 中使用 SQLite3 的最简单方法是什么？

> ID：897417
> 
> 赞同：2
> 
> 时间：2009-05-22T11:28:56.883
> 
> 标签：iphone, cocoa-touch, uikit, sqlite

我听说在 iPhone 项目中使用普通的 SQLite3 是个坏主意。您使用哪些框架、库、包装器等？哪些值得一看？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-22T11:35:15.857

核心数据是要走的路。它仅在 iPhone OS 3.0 中可用。不过，这不太可能成为问题（对于新应用程序）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-22T11:42:24.800

我在 iPhone 上使用 C-API 到 SQLite 并且完全没有抱怨。相反，它工作得很好。

如果你打算使用 Core Data，你会被 iPhone OS 3.0 卡住。如果这不是您的问题，您可以继续使用它。但我想，很多人在 2009 年仍然会使用 iPhone OS 2。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-22T12:49:25.227

同样在这里，我最近有一个应用程序被 App Store 接受，使用 SQLite 来存储其数据。

我发现这个链接特别有用： [iPhone SDK 教程：从 SQLite 数据库中读取数据](http://dblog.com.au/iphone-development-tutorials/iphone-sdk-tutorial-reading-data-from-a-sqlite-database/)

第 (4) 节包含您需要进行的更改的详细信息，以便将 SQLite 框架包含到您的链接选项中。

（本教程的主要部分向您展示了要导入/包含哪些文件）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-22T12:52:52.160

如果您需要以 iPhone 2.0 为目标，或者如果您希望能够编写专门针对的 SQL 而无需使用 C API，我可以推荐[Gus Mueller 的 FMDB](http://gusmueller.com/blog/archives/2008/03/fmdb_for_iphone.html)。这（以及用于多线程访问支持的最新[SQLite 合并](http://www.sqlite.org/download.html)）是我在[Outpost](http://www.outpostapp.com/)中使用的。

# visual-studio - 在 Visual Studio 宏中使用 System.Windows.Forms

> ID：897420
> 
> 赞同：1
> 
> 时间：2009-05-22T11:30:29.520
> 
> 标签：visual-studio, winforms, visual-studio-2005, vbscript, macros

我已经开始在 Visual Studio 2005 中编写宏，如下所示：

```
Public Sub myMacro()
    Dim myListBox As New System.Windows.Forms.ListBox()
    For Each x As String In xs
        myListBox.Items.Add(x)
    Next 
```

但是我完全不知道如何显示`ListBox`，

我想要类似于此 InputBox 示例的行为：

```
Dim str As String = InputBox("title", "prompt") 
```

正如我们所看到的，`InputBox`可以立即构建并显示在屏幕上，`String`一旦盒子关闭就返回一个。

在用s in`myListBox`填充它后，我尝试调用以下方法，但屏幕仍然没有出现：`String``xs``ListBox`

```
myListBox.EndUpdate()
myListBox.Show() 
```

我还尝试按照与此处为按钮概述的方法类似的方法创建一个`System.Windows.Forms.Form`并将其添加到其中[（在示例下，Visual Basic 下）](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.aspx)。通话中再次没有出现任何内容。`ListBox``form.ShowDialog()`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-21T17:01:20.230

下面的代码在 Visual Studio 2008 中对我来说运行良好。`System.Windows.Forms`当我打开宏 IDE 时，对的引用已经到位，我只需`Imports System.Windows.Forms`在模块顶部添加一个。

```
Public Sub myMacro()

    Dim myListBox As New ListBox
    Dim xs As String() = New String() {"First", "Second", "Third", "Fourth"}

    For Each x As String In xs
        myListBox.Items.Add(x)
    Next

    Dim frm As New Form
    Dim btn As New Button

    btn.Text = "OK"
    btn.DialogResult = DialogResult.OK

    frm.Controls.Add(btn)
    btn.Dock = DockStyle.Bottom

    frm.Controls.Add(myListBox)
    myListBox.Dock = DockStyle.Fill

    If frm.ShowDialog() = DialogResult.OK Then
        MessageBox.Show(myListBox.SelectedItem)
    End If

End Sub 
```

# javascript - jQuery 如何处理点击事件？

> ID：897432
> 
> 赞同：1
> 
> 时间：2009-05-22T11:35:11.303
> 
> 标签：javascript, jquery, asp.net-mvc

我是 jQuery 新手，无法使用元素的 id 让选择器工作。下面的代码有效：

```
$(function() {  
  /* $("#ShowBox").onclick = ShowAccessible;  */  
  document.getElementById("ShowBox").onclick = ShowAccessible;  
  /* $(".searchcheck").click = ShowAccessible; */  
});

function ShowAccessible() {  
  $("tr.hide").fadeOut();  
} 
```

但是，这两条注释掉的行都不起作用，即它们没有将单击事件应用于名为“ShowBox”的复选框，该复选框具有“searchcheck”类。为什么是这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-22T11:36:57.320

jQuery 对象没有 onclick 属性；当您使用 时`$([selector])`，将返回一个 jQuery 对象，而不是一个元素。

使用任一

```
.click(function () { ...}); // can be an anonymous function or named function 
```

或者

```
.bind('click', function() { ... }); // can be an anonymous function or named function 
```

像这样

```
$("#ShowBox").click(ShowAccessible);
$("#ShowBox").bind('click', ShowAccessible); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-22T11:37:22.327

JQuery 使用函数而不是属性来设置处理程序。

```
$("#ShowBox").click(ShowAccessible); 

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T12:14:24.640

如果你真的必须完成任务的话，我想

$("#ShowBox")[0].onclick = ShowAccessible;

会工作。

# php - 使用 mysql 和 php 维护表单状态的问题

> ID：897445
> 
> 赞同：0
> 
> 时间：2009-05-22T11:39:43.180
> 
> 标签：php, mysql, html, ajax, forms

我有一个页面应该显示一个带有复选框的表单，如果它被选中则回发，将结果存储在数据库中，然后在下次加载页面时将复选框显示为选中，并根据需要将其更新为未选中。

我知道我的解决方案有浮动“检查”并不理想，但它工作正常，我想坚持下去。

我遇到的问题是，虽然可以将记录正确插入数据库，但在重新加载页面时它既没有显示为已检查，也没有正确更新记录。

这是我的代码：

```
<?php
error_reporting(E_ALL);
if (isset($_GET["cmd"]))
  $cmd = $_GET["cmd"]; else
if (isset($_POST["cmd"]))
  $cmd = $_POST["cmd"]; else
die("Invalid URL");
if (isset($_GET["pk"])) {
    $pk = $_GET["pk"];
}
$checkDeleted = "";
$checkNotice = "";
$checkWarrant = "";
$checkPromise = "";
$checkCompensation = "";
$checkBond = "";
$checkInjunction = "";
$checkActionpay = "";
$checkActionorder = "";
$checkCourtpayment = "";
$checkForeclosure = "";
$checkPenalty = "";
$checkboxes = $_POST['checkboxes'];
if (in_array('deleted', $checkboxes))
  $checkDeleted = 'checked';
$con = mysqli_connect("localhost","user","pass", "db");
if (!$con) {
    echo "Can't connect to MySQL Server. Errorcode: %s\n". mysqli_connect_error();
    exit;
}
$con->set_charset("utf8");
$getformdata = $con->query("select ARTICLE_NO, deleted from STATUS where ARTICLE_NO = '$pk'");
while ($row = mysqli_fetch_assoc($getformdata)) {
    $ARTICLE_NO = $row['ARTICLE_NO'];
    $checkDeleted = $row['deleted'];
}
if($cmd=="submitinfo") {
    if ($ARTICLE_NO == null) {
        $statusQuery = "INSERT INTO STATUS VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)";
        if ($statusInfo = $con->prepare($statusQuery)) {
            $statusInfo->bind_param("sssssssssssss", $pk, $checkDeleted, $checkNotice, $checkWarrant, $checkPromise, $checkCompensation, $checkBond, $checkInjunction, $checkActionpay, $checkActionorder, $checkCourtpayment, $checkForeclosure, $checkPenalty);
            $statusInfo->execute();
            $statusInfo->close();
            echo $pk;
            echo $checkDeleted;
        } else {
            print_r($con->error);
        }
    } else if ($ARTICLE_NO == $pk) {
        $statusQuery = "UPDATE STATUS SET deleted = ?, notice = ?, warrant = ?, promise = ?, compensation = ?, bond = ?, injunction = ?, actionpay = ?, actionorder = ?, courtpayment = ?, foreclosure = ?,penalty = ? WHERE ARTICLE_NO = ?";
        if ($statusInfo = $con->prepare($statusQuery)) {
            $statusInfo->bind_param("sssssssssssss", $checkDeleted, $checkNotice, $checkWarrant, $checkPromise, $checkCompensation, $checkBond, $checkInjunction, $checkActionpay, $checkActionorder, $checkCourtpayment, $checkForeclosure, $checkPenalty, $pk);
            $statusInfo->execute();
            $statusInfo->close();
        } else {
            print_r($con->error);
        }
    }
}
if($cmd=="EditStatusData") {
    echo '<link rel="stylesheet" href="style.css" type="text/css" />' . "\n";
    echo "<form name=\"statusForm\" action=\"test.php?pk=".$pk."\" method=\"post\" enctype=\"multipart/form-data\">
<h1>Editing information for Auction No: ".$pk."</h1>
<input type=\"checkbox\" name=\"checkboxes[]\" value=\"deleted\" ".$checkDeleted." />
<label for=\"deleted\">Löschung Ebay</label>
<br />
<input type=\"hidden\" name=\"cmd\" value=\"submitinfo\" />
<input name=\"Submit\" type=\"submit\" value=\"submit\" />
</form>";
} 
```

我已经尽可能地减少了这个，但不确定原因在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-22T15:38:43.003

如果我已经理解你的问题正确替换

`$checkboxes = $_POST['checkboxes'];`

和

`$checkboxes = (isset($_POST['checkboxes'])? $_POST['checkboxes'] : array());`

我想会解决你的问题。（我没有运行脚本进行测试，但希望没有错误）

完整示例：

```
<?php
error_reporting(E_ALL);

if (isset($_GET["cmd"]))
  $cmd = $_GET["cmd"]; 
    else
if (isset($_POST["cmd"]))
  $cmd = $_POST["cmd"]; 
        else die("Invalid URL");

if (isset($_GET["pk"])) { $pk = $_GET["pk"]; }

$checkDeleted = "";
$checkNotice = "";
$checkWarrant = "";
$checkPromise = "";
$checkCompensation = "";
$checkBond = "";
$checkInjunction = "";
$checkActionpay = "";
$checkActionorder = "";
$checkCourtpayment = "";
$checkForeclosure = "";
$checkPenalty = "";

$checkboxes = (isset($_POST['checkboxes'])? $_POST['checkboxes'] : array());

if (in_array('deleted', $checkboxes)) $checkDeleted = 'checked';

$con = mysqli_connect("localhost","user","pass", "db");
if (!$con) { echo "Can't connect to MySQL Server. Errorcode: %s\n". mysqli_connect_error(); exit; }

$con->set_charset("utf8");

$getformdata = $con->query("select ARTICLE_NO, deleted from STATUS where ARTICLE_NO = '$pk'");

while ($row = mysqli_fetch_assoc($getformdata)) {
    $ARTICLE_NO = $row['ARTICLE_NO'];
    $checkDeleted = $row['deleted'];
}

if($cmd=="submitinfo") {
    if ($ARTICLE_NO == null) {
       $statusQuery = "INSERT INTO STATUS VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)";
        if ($statusInfo = $con->prepare($statusQuery)) {
                $statusInfo->bind_param("sssssssssssss", $pk, $checkDeleted, $checkNotice, $checkWarrant, $checkPromise, $checkCompensation, $checkBond, $checkInjunction, $checkActionpay, $checkActionorder, $checkCourtpayment, $checkForeclosure, $checkPenalty);
                $statusInfo->execute();
                $statusInfo->close();
                echo $pk;
                echo $checkDeleted;
        } else {
                print_r($con->error);
        }
    } else if ($ARTICLE_NO == $pk) {
        $statusQuery = "UPDATE STATUS SET deleted = ?, notice = ?, warrant = ?, promise = ?, compensation = ?, bond = ?, injunction = ?, actionpay = ?, actionorder = ?, courtpayment = ?, foreclosure = ?,penalty = ? WHERE ARTICLE_NO = ?";
        if ($statusInfo = $con->prepare($statusQuery)) {
                $statusInfo->bind_param("sssssssssssss", $checkDeleted, $checkNotice, $checkWarrant, $checkPromise, $checkCompensation, $checkBond, $checkInjunction, $checkActionpay, $checkActionorder, $checkCourtpayment, $checkForeclosure, $checkPenalty, $pk);
                $statusInfo->execute();
                $statusInfo->close();
        } else {
                print_r($con->error);
     }  
    }
}
if($cmd=="EditStatusData") {
    echo '<link rel="stylesheet" href="style.css" type="text/css" />' . "\n";
    echo "<form name=\"statusForm\" action=\"test.php?pk=".$pk."\" method=\"post\" enctype=\"multipart/form-data\">
            <h1>Editing information for Auction No: ".$pk."</h1>
                <input type=\"checkbox\" name=\"checkboxes[]\" value=\"deleted\" ".$checkDeleted." />
                <label for=\"deleted\">Löschung Ebay</label>
                <br />
                <input type=\"hidden\" name=\"cmd\" value=\"submitinfo\" />
                <input name=\"Submit\" type=\"submit\" value=\"submit\" />
        </form>";
}
?> 
```

# c# - 在 C# 中实现这 3 个类的最佳方式：向量、方向（单位向量）、点

> ID：897455
> 
> 赞同：6
> 
> 时间：2009-05-22T11:42:25.143
> 
> 标签：c#, class, struct

*   所有的点都是向量，所有的向量都是点。
*   所有方向都是矢量，并非所有矢量都是方向（这不应该意味着不允许双向转换）。

我希望将运算符全部覆盖一次，因为它们都是完全相同的。在 C++ 中，我可以定义 class Vector { float x,y,z; }, 然后做 typedef Point = Vector, typedef Direction = Vector; 在 C# 中没有等效项（“使用 Point=Vector；”很糟糕，因为您必须将它放在您使用的每个文档中，并且编译器不会强制执行）。

我尝试定义 3 个不同的类并覆盖每个类的运算符，然后进行隐式类型转换，这会使代码运行速度变慢，等等。

我尝试只定义 Vector，然后定义 Point:Vector 和 Direction:Vector，这样我只编写一次运算符，但我不能执行隐式类型转换 Point <-> Vector 或 Direction <->Vector。

我可以简单地定义 Vector 类并在任何地方使用它，但这会产生歧义，因为变量应该是空间中的位置 (Point)、空间中的相对位置 (Vector) 或单位向量 (Direction)。例如函数：

```
Vector GetOrthogon(Vector a, Vector b) {
    // ....
} 
```

您不知道它是否需要任何向量或单位向量。在 C++ 中你可以做到这一点，那么为什么不能在 C# 中呢？

***注意****：如果可能的话，使用结构而不是类将是理想的。*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-22T12:40:33.963

在数学上，点是向量。空间中没有绝对的点。点被定义为来自某个任意原点的向量。因此，我将向量用于点和点之间的差异。

因为方向是单位向量，所以也不需要区分。这就像尝试为整数 1 和其他整数定义不同的静态类型。所以我使用向量来表示两个方向和点之间的差异。

因此，定义一个 Vector 类型。它会让你的生活更轻松，因为你将有更少的类和重载的运算符/函数来编写和测试，并且在数学上会更“纯粹”（如果这对你很重要的话）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-22T11:50:14.767

在纯粹主义者的层面上，我认为 a`Vector`和 a`Point`是*不*一样的，通过代数：

*   `Point`+ `Vector`=> `Point`（翻译）
*   `Vector`+ `Vector`=> `Vector`（加法）
*   `Point`+ `Point`（未定义）

我将有 2 个具有隐式（逻辑上等效）或显式（否则）转换运算符的不可变结构。不过，我可能没有`Direction`结构...我可能在 a`Direction`上有一个属性可以将`Vector`其缩放为单位，但仅此而已...

* * *

我已经删除了一个原语`Vector`并`Point`展示了交互；我没有填写所有`Point`（因为它更简单）：

```
public struct Point {
    public Point(double x, double y) : this() { X = x; Y = y; }
    public double X { get; private set; }
    public double Y { get; private set; }

    // and more ;-p
}

public struct Vector : IEquatable<Vector> {
    public Vector(double x, double y) : this() { X = x; Y = y; }
    public Vector AsUnit() {
        if (X == 0 && Y == 0) throw new InvalidOperationException();
        if (X == 0) return new Vector(0, X > 0 ? 1 : -1);
        if (Y == 0) return new Vector(Y > 0 ? 1 : -1, 0);
        double sqr = Math.Sqrt((X * X) + (Y * Y));
        return new Vector(X / sqr, Y / sqr);
    }
    public double X { get; private set; }
    public double Y { get; private set; }

    public static  explicit operator Point(Vector vector) {
        return new Point(vector.X, vector.Y);
    }
    public static explicit operator Vector(Point point) {
        return new Vector(point.X, point.Y);
    }
    public override string ToString() {
        return "(" + X.ToString() + "," + Y.ToString() + ")";
    }
    public override int GetHashCode() {
        return 17 * X.GetHashCode() + Y.GetHashCode();
    }
    public override bool Equals(object obj) {
        return obj == null ? false : Equals((Vector)obj);
    }
    public bool Equals(Vector vector) {
        return X == vector.X && Y == vector.Y;
    }
    public static bool operator ==(Vector a, Vector b) {
        return a.X == b.X && a.Y == b.Y;
    }
    public static bool operator !=(Vector a, Vector b) {
        return a.X != b.X || a.Y != b.Y;
    }
    public static Point operator +(Point point, Vector vector) {
        return new Point(point.X + vector.X, point.Y + vector.Y);
    }
    public static Point operator -(Point point, Vector vector) {
        return new Point(point.X - vector.X, point.Y - vector.Y);
    }
    public static Vector operator +(Vector a, Vector b) {
        return new Vector(a.X + b.X, a.Y + b.Y);
    }
    public static Vector operator -(Vector a, Vector b) {
        return new Vector(a.X - b.X, a.Y - b.Y);
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-22T12:10:52.340

.Net >= 3.0中已经有`Point`和`Vector`实现。不幸的是`System.Windows.Media.Media3D`，它们是 WPF 3D API 的一部分。

这些现有的类确实具有一些有用的属性，使它们值得研究（其他人已经提到了一些）：

*   `Point [+|-] Vector = Point`
*   `Vector [+|-] Vector = Vector`
*   `Point - Point = Vector`
*   `Vector`具有执行点积和叉积的静态方法
*   `Vector.Normalise()`做`vector.Negate()`他们在罐头上说的

也许您可以检查（甚至扩展）这些以供您自己使用？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-22T12:43:05.270

我建议不要同时拥有 a`Vector`和 a`Point`类型。尽管它们在数学上有些不同，但这种区别通常不会在编程环境中提供任何优势。此外，您可以将点视为从原点到点位置的向量。

我强烈建议使用值类型而不是引用类型，因为您通常使用向量，就像使用实数一样，因此您需要与浮点数（按值传递）相同的语义。如果您选择值类型，请记住将它们设置为不可变通常更好。

我还建议不要使用`Direction`类型，而是更喜欢使用归一化向量。而不是你的三个`Vector`,`Point`和`Direction`类型，`Vector`就足够了（如果它足够通用的话）。

至于实现参考，你可以看看[XNA 的 Vector3 structure](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.vector3.aspx)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-22T11:46:11.703

如果向量是点并且点是向量，那么它们可能应该是同一个类（或相同类型的结构）。

或者，如果您希望他们...

*   具有相同方法和运算符的相同实现
*   有不同的名称和不同的类型

...然后在具有受保护构造函数的基类中定义方法和运算符，并将 Point 和 Vector 定义为该基类的叶子类，以便它们继承其功能。

如果你不能使用继承等来做你想做的事，那么将运算符定义复制并粘贴到几个类中，因为a）这不是维护问题，因为它们不太可能改变 b）你说你有一个正当的理由，即“我正在做一个光线追踪器，所以速度很关键”。

> 你可能会说这无关紧要，因为它们都是向量，但在 C++ 中你可以轻松区分，那为什么不是 C#？

您也可以在 C# 中进行区分：C# 支持定义不同的类型等。您可以在 C++ 中做的两件事在 C# 中做不到，那就是鸭子类型模板和全局函数，这在这里可能会有所帮助，但不是必需的，如果相反，您愿意使用继承或复制粘贴通用功能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-22T13:15:26.763

我建议将其定义为：

```
public abstract class VectorBase {
    public int X { get; private set; }
    public int Y { get; private set; }

    public VectorBase(int x, int y) {
        this.X = x;
        this.Y = y;
    }

    public VectorBase(VectorBase copy) : this(copy.X, copy.Y) {
        // creates a vector with the same x, y
    }

    public static Vector operator +(VectorBase left, VectorBase right) {
        return new Vector(left.X + right.X, left.Y + right.Y);
    }

    public static Vector operator -(VectorBase left, VectorBase right) {
        return new Vector(left.X - right.X, left.Y - right.Y);
    }
}

public class Vector : VectorBase {
    public Vector(VectorBase v) : base(v) { }
    public Vector(int x, int y) : base(x, y) { }
}

public class Point : VectorBase {
    public Point(VectorBase v) : base(v) { }
    public Point(int x, int y) : base(x, y) { }

    public static implicit operator Vector(Point p) {
         return new Vector(p);
    }

    public static implicit operator Point(Vector v) {
         return new Point(v);
    }
}

public class Direction : VectorBase {
    public Direction(VectorBase v) : base(v) { }
    public Direction(int x, int y) : base(x, y) { }

    public static implicit operator Vector(Direction d) {
         return new Vector(d);
    }

    public static implicit operator Direction(Vector v) {
         return new Direction(v);
    }

    // implementation of *, any other stuff you need
} 
```

注意事项：

*   这个实现是[`immutable`](http://blogs.msdn.com/ericlippert/archive/2007/11/13/immutability-in-c-part-one-kinds-of-immutability.aspx).
*   任何类型 - `Vector`，`Point`或者`Direction`可以从任何其他类型中添加/减去，从而产生`Vector`.
*   A`Direction`可以与向量相乘。
*   它们是隐式可互换的 - 您可以通过将`implicit operator`s 更改为 s轻松地将其更改为显式可互换`explicit operator`。

# configuration - 从 Web 应用程序中读取 IIS7 配置？

> ID：897461
> 
> 赞同：1
> 
> 时间：2009-05-22T11:46:04.620
> 
> 标签：configuration, iis-7, web-config, port

这是我想要做的：

在预编译所有页面并填充缓存之前，我的 Web 应用程序一开始非常慢。我想通过触发一些对最慢页面的 HTTP 请求来“预热” Global.asax 中的应用程序。

问题是我不知道应用程序在哪个端口上运行。可能是 80（我的本地 IIS 或部署的服务器，我们测试服务器上的 8080 或一些使用 ASP.NET 开发服务器的同事的随机端口）

我认为读取合并的 Web 配置、提取绑定、创建 url 并使用 HttpWebRequest 触发请求会相当简单。

但是，我没有任何运气......（我主要尝试了WebConfigurationManager）

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-13T14:48:18.110

I think you should be able to get this info from the Request object.

That said, I would be leery about worrying about this without some hard evidence from production that it is in fact a problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T11:52:36.167

如果您可以访问 Page 对象（我不确定您是否在 global.asax 中这样做，因为我从不在我的应用程序中使用它），那么您可以使用它的 ResolveUrl(string path) 方法来获取正确的 URL，例如

```
string myurl = Page.ResolveUrl("~/MyPage.aspx"); 
```

其中 ~/ 指的是 ASP.Net 应用程序的根目录

# c# - 在 C#2.0 中不使用 foreach 循环过滤 List<> 对象

> ID：897466
> 
> 赞同：9
> 
> 时间：2009-05-22T11:47:12.137
> 
> 标签：c#, c#-2.0

我们如何在 C# 中过滤 List<> 中的对象？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-22T11:51:05.017

假设我们有一个`List<string>`并且您只想要字符串长度大于 5 的项目。

下面的代码将返回`List<string>`带有结果的 a：

```
List<string> myList = new List<string>();
myList.Add("hello");
myList.Add("world!");
myList.Add("one");
myList.Add("large!!");
List<string> resultList = myList.FindAll(delegate(string s) { return s.Length > 5; }); 
```

结果列表将包含“世界！” 和“大！！”。此示例使用[匿名方法](http://msdn.microsoft.com/en-us/library/0yw3tz5k(VS.80).aspx)。也可以写成：

```
List<string> myList = new List<string>();
// ..
List<string> resultList = myList.FindAll(OnlyLargerThanFive);

//..

private static bool OnlyLargerThanFive(string s)
{
  return s.Length > 5;
} 
```

上面的委托 OnlyLargerThanFive 也称为[Predicate](http://msdn.microsoft.com/en-us/library/bfcke1bz.aspx)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-22T12:04:06.847

最好的解决方案是使用 lambda：

```
List<Item> l;
l.FindAll(n => n.Something == SomethingElse); 
```

它可能在内部使用 foreach，但如果不迭代整个列表，您就无法真正进行过滤。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-22T12:09:44.197

List<>.Find （给出第一个匹配的出现）和 List.FindAll() 给出所有匹配的出现。具有复杂类型列表的示例如下：

我有一个班级报告：

```
public class Report
{
    public string ReportName;
    public ReportColumnList ReportColumnList;
} 
```

和报告清单

```
List<Report> reportList; 
```

要在 ReportName = 'MyReport' 的列表中查找项目，代码为：

```
string reportName = "MyReport";
List<Report> myReports = reportList.FindAll(delegate(Report obj) { return obj.ReportName == reportName; }); 
```

要获得第一份报告：

```
Report rc = reportList.Find(delegate(Report obj) { return obj.ReportName == reportName; }); 
```

请注意，传递给委托的对象应该**是填充列表的类型**。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-22T12:02:26.070

除了[@Razzie](https://stackoverflow.com/users/38889/razzie)告诉的方式之外，您还可以使用[LINQ](http://msdn.microsoft.com/en-us/netframework/aa904594.aspx)。

```
List<string> myList = new List<string>();
myList.Add("hello");
myList.Add("world!");
myList.Add("one");
myList.Add("large!!");

var filtered=from s in myList where s.Length > 5 select s; 
```

PS：-**仅适用于 .NET 3 及更高版本**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-22T12:05:26.547

你可以使用[LINQ](http://msdn.microsoft.com/en-us/netframework/aa904594.aspx)。我没有对此进行测试，但我相信它会过滤掉我的馅饼馅列表中的元素，只显示那些以“P”开头的元素：

```
List<string> list = new List<string>();

list.Add("Apple");
list.Add("Peach");
list.Add("Chocolate");
list.Add("Pear");
list.Add("Pumpkin");
list.Add("Cherry");
list.Add("Coconut");

var filteredOnes = from item in list
                   where item.StartsWith("P")
                   select item; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-14T17:04:43.240

您可以像这样使用[LINQ](http://msdn.microsoft.com/en-us/netframework/aa904594.aspx)。

`List<string> List = new List<string> { "i", "am", "using", "LINQ!" };` `List<string> result = myList.Where(s => s.Length > 3).ToList();`

**它仅适用于 .net 3 及更高版本。**

# git - 在 OS X 上安装 Git

> ID：897477
> 
> 赞同：14
> 
> 时间：2009-05-22T11:52:01.097
> 
> 标签：git, macos, version-control

我正在尝试在 Mac OS X Leopard 上安装 Git。我试图避开 MacPorts/Fink 路线。我也试图避免在谷歌上[安装安装程序](http://code.google.com/p/git-osx-installer/)，因为我自己已经走得很远了，但如果必须的话，我会继续下载安装程序。

无论如何，我已经安装了 Git。`/usr/local/bin/git`. 问题是没有安装任何文档，并且 Makefile 从来没有费心告诉我。所以现在我让 Git 坐在那里等待使用，因为我尝试为其安装手册页。

出于某种可怕的原因，手册页以文本文件的形式维护，由我及时安装的 AsciiDoc 程序处理。但是 AsciiDoc 将这些文本文件转换为 XML。

然后 Git 使用另一个名为 xmlto 的程序将 AsciiDoc 吐出的 XML 转换为联机帮助页（我认为 - 我还没有做到这一点）。问题是，每当它开始该步骤时，我都会收到此错误（第一行是 make 的输出，其余是错误）：

```
 XMLTO git-apply.1
I/O error : Attempt to load network entity http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd
/Users/chrislutz/prog/sources/git-1.6.3.1/Documentation/git-apply.xml:2: warning: failed to load external entity "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd"
D DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" 
```

所以基本上它只是遍历每个文件并给我所有的错误。

我确实尝试过一次下载文件`http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd`，将其放入目录中，然后将 XML 文件中的所有引用更改为目录中的文件，但这给了我更多更奇怪的错误。如果我有一个常规的解决方案来工作，它可能仍然会给我那些奇怪的错误，这意味着整个事情都搞砸了，我只会使用谷歌安装程序。

然而，我自己已经（绊倒）了这么远，我觉得这是在松一口气和有机会使用 Git 之前的最后一步。所以我想做出最后的努力来了解什么是错的。而“最后的努力”意味着“询问堆栈溢出”。

因此，如果有人可以让我了解该错误的含义以及它发生的原因（以及我可以做些什么来修复它），那就太棒了。如果没有，我会尝试谷歌安装程序。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-09-10T14:15:38.290

我最近在 CentOS 5.3 上安装了 git-1.6.4.2。构建 git 并不麻烦，但尝试安装随附的文档会在每一步都产生痛苦。yum repos的版本很旧`xmlto`，`asciidoc`所以我从源代码构建它们。然后`xmlto`（通过`xmllint`）抱怨缺少 DocBook 4.5，我终于设法手动获得了这些。

走到这一步，文档构建愉快地滚动，直到

```
    DB2TEXI 用户手册.texi
/bin/sh：第 1 行：docbook2x-texi：找不到命令
make[1]: *** [user-manual.texi] 错误 127
```

但是 docbook2x 已安装！啊，命令不同：

```
$ rpm -q --filesbypkg docbook2x | grep bin.\*texi
docbook2x /usr/bin/db2x_docbook2texi
docbook2x /usr/bin/db2x_texixml
```

即使尝试手动运行它，我仍然没有任何乐趣：

```
$ db2x_docbook2texi user-manual.xml --encoding=UTF-8 --to-stdout >user-manual.texi++
docbook2texi:/book: 没有目录条目的描述
/usr/bin/db2x_texixml:-::node: 致命错误：节点属于不同的文件
死于 /usr/bin/db2x_texixml 第 959 行。
```

[INSTALL](http://git.kernel.org/?p=git/git.git;a=blob;f=INSTALL;h=ae7f7508f8e8cffeb930c820e068ba70dabff7bd;hb=82c3e210002d452867a46a9d8806a8aee82ae9d0)的底部提到了几个方便的`make`目标：quick-install-man 和 quick-install-html。例如，事实证明

`$ make prefix=/usr/local quick-install-man`

相当于

`$ ./Documentation/install-doc-quick.sh origin/man /usr/local/share/man`

这有几个问题：我们需要一个 git repo 来使用这些目标，`man`并且`html`分支的头可能与您正在安装的版本不对应。

所以，一个快速而肮脏的引导程序：

```
tar xfz git-1.6.4.2.tar.gz
cd git-1.6.4.2
使前缀=/usr/local all
sudo make prefix=/usr/local install # (1)

光盘..
git clone git://git.kernel.org/pub/scm/git/git.git
cd 混帐
git checkout v1.6.4.2 #(2)

# (3)
./Documentation/install-doc-quick.sh \
  c8b9e605d51dd2f0c7ce6a363df31171af16534c \
  /usr/local/share/man

# (4)
./Documentation/install-doc-quick.sh \
  35b47ca5285a4059792ba937f8e09b2ab4a7adf4 \
  /usr/local/share/doc/git-doc

git init --help # (5)
```

笔记：

1.  此时，git 将存在于`/usr/local/bin`.
2.  [现在，您将在分离的头上](http://www.kernel.org/pub/software/scm/git/docs/user-manual.html#detached-head)拥有与上一步相同的树。
3.  SHA-1 来自于`git log origin/man`.
4.  与上述相同，除了来自`origin/html`。
5.  利润！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-23T12:09:26.270

也许不是你想要的答案，但你可以下载`git-manpages-*.tar.gz`和`git-html-*.tar.gz`源一起发布的。之所以发布它们，是因为众所周知 asciidoc 工具链有点脆弱，并且需要付出相当大的努力来安装和安排所有内容。

我相信，您可能需要一整套文档支持文件。也许还有一些样式表......虽然如果你安装了 xmlto 你应该得到所有这些。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-25T23:05:07.607

Wincent Colaiuta在[wincent.com/wiki](https://wincent.com/wiki)上维护了一个非常有用的[知识库](https://wincent.com/tags/git?type=article)，这是有关 Mac OS X的极好信息来源。`git`

具体看这两篇文章：

*   [在 Mac OS X Leopard 上设置 Git 文档构建链](https://wincent.com/wiki/Setting_up_the_Git_documentation_build_chain_on_Mac_OS_X_Leopard)
*   [从 Git 存储库安装预构建的 Git 文档](https://wincent.com/wiki/Installing_pre-built_Git_documentation_from_the_Git_repo)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-11T07:11:12.350

*当我在谷歌上搜索“ docbook2x-texi: command not found* ”时，我被驱使到这个问题，因为我在构建从 git 存储库获得的 git 1.8.2.1 时遇到了这个问题，其中：

```
make prefix=/my_prefix/git all doc info 
```

因此，按照[http://git-scm.com/book/en/Getting-Started-Installing-Git](http://git-scm.com/book/en/Getting-Started-Installing-Git)我启动了：

```
yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel 
```

但为了`make`完成我必须安装下一个包：

```
yum install asciidoc xmlto docbook2X 
```

正如阅读最多的答案所指出的那样，最后一个提供了`db2x_docbook2texi`命令，但没有提供所需的`docbook2x-texi`. 尽管如此，一个简单的符号链接解决了这个问题：

```
ln -s /usr/bin/db2x_docbook2texi /usr/bin/docbook2x-texi 
```

现在，`make`成功了，我必须安装*git*：

```
make prefix=/my_prefix/git install install-doc install-html install-info 
```

此解决方法已在 Scientific Linux 6.1 (Carbon) 下测试。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-01-18T19:04:57.837

我刚刚[在 OS X 上找到了解决 Git 联机帮助页链问题的](http://jeetworks.org/node/15)好方法。为方便起见，这里是（替换：`git-manpages-1.6.6.tar.bz2`使用您的 git 版本，以及`/usr/local/`安装 git 的位置）：

```
$ curl -O http://kernel.org/pub/software/scm/git/git-manpages-1.6.6.tar.bz2
$ sudo tar xvf git-manpages-1.6.6.tar.bz2 -C /usr/local/man 
```

然后，（正如 Boblet 指出的那样），检查 git manpath：

```
echo $MANPATH 
```

并在必要时进行调整：

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-11-08T09:22:07.203

随意的想法；你的 Git 手册页安装在哪里？我猜在`/usr/local/git/man`. 如果是这样，请检查它是否在您的 $MANPATH 中：

```
echo $MANPATH 
```

如果那里没有 git manpath，请通过 TextMate 或 vi 或其他方式将此文本添加到您拥有的任何位置`$PATH`（例如 in `~/.bash_profile`）；

```
export MANPATH=/usr/local/git/man:$MANPATH 
```

或者，只需从 shell 使用此命令：

```
echo 'export MANPATH=/usr/local/git/man:$MANPATH' >> ~/.bash_profile 
```

在安装 Hivelogic Snow Leopard 后我自己就遇到了这个问题，所以 HTH

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-04-07T19:37:22.483

如果您正在从 git 源存储库的克隆中工作，则可以执行以下操作：

```
git archive origin/man | sudo tar -x -C /usr/local/share/man 
```

可在[http://johnreilly.tumblr.com/post/41241198/installing-git-man-pages](http://johnreilly.tumblr.com/post/41241198/installing-git-man-pages)找到- 我已经使用了一段时间了，而且效果很好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-07-17T05:52:37.593

本周早些时候我在 Cygwin 上遇到了类似的构建问题（尝试加载网络实体失败），通过一些搜索，我发现问题是缺少 xml 目录。在 Cygwin 上有一个名为[`build-docbook-catalog`](http://cygwin.com/packages/build-docbook-catalog/build-docbook-catalog-1.5-1). 该工具可能试图自动运行，但是当我手动运行它时，由于`/etc/xml`目录不存在而失败。

的来源`build-docbook-catalog`可能[在这里](http://www.xmlsoft.org/buildDocBookCatalog)，但我现在无法确认，因为我没有可用的 Windows 或 Cygwin。

我意识到这个问题早已被回答，但我在寻找我的问题的答案时偶然发现了这个页面，所以希望这可以为其他人节省一些时间。

# python - 正则表达式子问题

> ID：897480
> 
> 赞同：3
> 
> 时间：2009-05-22T11:53:15.680
> 
> 标签：python, regex

好的，所以我对 re.sub 有一个半古怪的问题。

采取以下代码：

```
import re
str_to_be_subbed = r'somefile.exe -i <INPUT>'
some_str = r'C:\foobar'
s = re.sub(r'\<INPUT\>', some_str, str_to_be_subbed)
print s 
```

我认为它会给我：

```
somefile.exe -i C:\\foobar 
```

但相反，它给了我：

```
somefile.exe -i C:♀oobar 
```

我知道 \f 是一个转义字符，但即使我尝试这样做，也应该转义特殊字符。即使我这样做：

```
print r'%s' % s 
```

它仍然给了我这个：

```
somefile.exe -i C:♀oobar 
```

为什么这样做？避免这种情况的最佳方法是什么？

忍者编辑：

如果我查看 s 的值，它是：

```
'somefile.exe -i C:\x0coobar' 
```

为什么\f 变成\x0。啊。

编辑：

还有一个问题，如果我将代码修改为：

```
import re
import os
str_to_be_subbed = r'somefile.exe -i <INPUT>'
some_str = os.path.abspath(r'C:\foobar')
some_str
s = re.sub(r'\<INPUT\>', some_str, str_to_be_subbed)
print s 
```

给我：

```
>>> import re
>>> import os
>>> str_to_be_subbed = r'somefile.exe -i <INPUT>'
>>> some_str = os.path.abspath(r'C:\foobar')
>>> some_str
'C:\\foobar'
>>> s = re.sub(r'\<INPUT\>', some_str, str_to_be_subbed)
>>> print s
somefile.exe -i C:♀oobar 
```

现在为什么会这样。由于 os.path.abspath 转义了 \'s。为什么 re.sub 仍然搞砸了？

这也是一个非常小的例子，这个小问题只是在一个旧的应用程序中随机出现。我真的无法将其更改为 string.replace，因为它的设置方式无需花费一整天。

我真的很好奇它为什么这样做。针对上述问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T11:58:35.780

`\f`是*换页*符。逃脱它，它的工作原理：

```
some_str = r'C:\\foobar' 
```

另一种解决方案：

```
s = re.sub(r'<INPUT>', some_str.encode("string_escape"), str_to_be_subbed) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-22T11:58:57.573

不要使用正则表达式：

```
print str_to_be_subbed.replace("<INPUT>",some_str) 
```

正如[文档](http://docs.python.org/library/re.html#re.sub)所说：

> repl 可以是字符串或函数；如果它是一个字符串，则处理其中的任何反斜杠转义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T06:27:07.400

Python 文档说...

re.sub(pattern, repl, string, count=0, flags=0) 返回通过替换 repl 替换 string 中最左边的不重叠出现的模式获得的字符串。如果未找到该模式，则字符串原封不动地返回。repl 可以是字符串或函数；如果它是一个字符串，则处理其中的任何反斜杠转义。也就是说，\n 转换为单个换行符，\r 转换为回车符，等等。诸如 \j 之类的未知转义将被单独留下

这就是它给出“C:♀oobar”的原因。

但是如果我们给它一个函数作为第二个参数，它不会转换任何反斜杠转义。

所以尝试跟随..

```
>>>import re
>>>str_to_be_subbed = r'somefile.exe -i <INPUT>'
>>>some_str = r'C:\foobar'
>>>s = re.sub(r'\<INPUT\>', lambda _:some_str, str_to_be_subbed)
>>>print s
somefile.exe -i c:\foobar 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T12:03:14.553

您的示例不需要正则表达式，请使用[`str.replace()`](http://docs.python.org/library/stdtypes.html#str.replace)：

```
>>> str_to_be_subbed.replace('<INPUT>',some_str)
'somefile.exe -i C:\\foobar'
>>> 
```

# .net - 将 EPS/PDF 转换为 JPEG/PNG？

> ID：897481
> 
> 赞同：5
> 
> 时间：2009-05-22T11:53:21.733
> 
> 标签：.net, pdf, eps

我需要能够获取 EPS 和 PDF 并将它们即时转换为 JPEG/PNG 以显示在网站上 - 使用 .net 代码。

3 年前，我使用[了 WebSupergoo 的 ADC PDF ，它工作得很好——但从那时起，其他一些更好的选择很容易浮出水面。](http://www.websupergoo.com/products.htm#pd)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T15:35:24.143

你应该可以用[ImageMagick](http://www.imagemagick.org/script/index.php)做到这一点；您可以从代码中调用命令行工具进行转换。他们还有一个名为 MagickNet [http://www.codeproject.com/KB/dotnet/ImageMagick_in_VBNET.aspx的 .Net 包装器](http://www.codeproject.com/KB/dotnet/ImageMagick_in_VBNET.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-04-17T06:03:25.970

如果您想要简单的转换，您可以使用 ghostview... 例如：

```
gswin32c -sDEVICE=png16m -r300x300 -sOutputFile=junk.png -dBATCH -dNOPAUSE Figure_001-a.pdf 
```

将 300x300 DPI 的 PDF 转换为 png。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T15:57:08.057

Foxit Reader 是一款非常出色的 PDF 阅读器。他们有一个你可以使用的 SDK。如需更多成像操作，请尝试使用此工具包 www.atalasoft.com。他们还有一个很棒的网络查看器。[在http://www.atalasoft.com/ajaxannotations/default.aspx](http://www.atalasoft.com/ajaxannotations/default.aspx)查看他们的 domo

# visual-studio-2008 - Visual C# 2008 Express 连接到 SQL Server 2008 Express 问题

> ID：897482
> 
> 赞同：3
> 
> 时间：2009-05-22T11:53:30.643
> 
> 标签：visual-studio-2008, visual-studio-express, sql-server-2008-express

我在使用 Visual C# 2008 express (SP1) 连接到 SQL Server 2008 express 时遇到问题。“添加连接”窗口（无论在哪里启动）都没有列出现有的 sql server，并且除了紧凑版之外没有 sql server 的选项。

请注意，我在同一台机器上安装了 VWD 2008 express (SP1)，它定期显示窗口（列出了 SQL 服务器），并且 SQL Server Management Studio 也可以在服务器上正常工作。

我看过其他类似的帖子，确实接受了一些建议：重新安装了 VC#，服务运行正常，等等……但到目前为止，VC# 没有成功。

同样，在同一台机器上，VWD 定期显示带有 sql server 选项的对话框，但 VC# 在“更改数据源”对话框中仅显示 3 个选项（1\. Microsoft Access 数据库文件（OLE DB）2\. Microsoft SQL Server Compact 3.5， 3\. Microsoft SQL Server 数据库文件）

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-01-17T02:54:39.830

我在这个 Visual Web Developer 2008 Express Tools>Connect to Database... 上与 Phil 一起使用**服务器名称显示添加连接对话框：**

Visual C# 2008 Express 具有**数据库文件名（新的或现有的）：**

这意味着以编程方式使用 ado.net

如 SqlConnection db = new SqlConnection(); db.ConnectionString= ...

“数据源=.\SQLEXPRESS；初始目录=MyDatabase；集成安全=True；提供者名称=System.Data.SqlClient”；

[Data Source=server\SQLEXPRESS] 我似乎在我的项目区域中创建了 ASPNETDB.MDF 文件，但不要将它们与

C:\Program Files\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\DATA\master.mdf

MVS.NET 2003 需要 SQL Server 2000 之上的 Microsoft SQL Server 2000 桌面引擎。这让我想起了使用 Microsoft Access 通过 ODBC 附加到 SQL Server 作为在 Access Basic 中获取“绑定控件”的一种方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T11:59:30.723

SQL 2005 和 SQL 2008 Express Edition 将自身安装为命名实例。

您应该能够输入“.\SQLEXPRESS”进行连接。
这 ”。” 是“localhost”的快捷方式，“SQLEXPRESS”是 SQL Express 的实例名称。

您可以在服务控制面板中验证实例名称：

*   开始 -> 运行 -> services.msc
*   向下滚动到 SQL Server
*   实例名称应放在括号中。例如：“SQL Server (SQLEXPRESS)”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T12:21:35.563

您描述了选项 3 - Microsoft SQL Server 数据库文件，您应该能够使用它来指向您的 .mdf 文件，并且它将能够仅从该文件进行连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-05-08T02:25:05.680

会不会是快递产品因为符合“远程”条件而无法让您以正常方式连接？

请参阅响应中的表格：http: [//social.msdn.microsoft.com/Forums/en-US/vssetup/thread/51df3937-1f24-4131-80d6-486552660bad](http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/51df3937-1f24-4131-80d6-486552660bad)

# workflow - 比较 Windows Workflow Foundation 中的对象属性？

> ID：897484
> 
> 赞同：0
> 
> 时间：2009-05-22T11:54:17.957
> 
> 标签：workflow, workflow-foundation

我们正在开始一个相当复杂的新项目，需要某种规则引擎通过比较 2 个对象的值来做出决策。这是一个简单的场景：

一个帐户进来，并根据其属性（余额、到期付款等），它可以适合一个或多个不同的计划。每个计划都将定义一组特定的属性，直到运行时才知道其数量和值。我们需要一种方法来对照计划的属性检查帐户属性，以查看帐户是否适合每个特定计划。

我认为这里的一个明显选择是利用 Windows 工作流规则。我对工作流程完全陌生。我的场景是否可能仅使用工作流 API？

我什至走在正确的道路上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T12:22:46.947

是的，您可以使用[WF](http://msdn.microsoft.com/en-us/netframework/aa663328.aspx)。您将需要编写一个接口来定义应用程序将用于与工作流通信（从主机应用程序到工作流）以及工作流将调用以与您的应用程序通信（从工作流到主机应用程序）进行通信的事件。

您可以编写事件参数类（继承包含 Account 对象的[ExternalDataEventArgs 。当帐户到达时，您将引发工作流事件并传递包含帐户的事件参数对象。一旦它在工作流中可用，您可以将其属性与规则中的值进行比较。](http://msdn.microsoft.com/en-us/library/system.workflow.activities.externaldataeventargs.aspx)

PS：-我也是工作流程的新手。还没有深入研究*规则*的东西，但是一旦你掌握了 WF 的基础知识，它就可以相当容易地完成。我读过一[本 wrox 书](http://www.wrox.com/WileyCDA/WroxTitle/Professional-Windows-Workflow-Foundation.productCd-0470053860.html)并研究了 MSDN 中的代码示例/教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-22T04:32:50.550

您的问题听起来确实需要某种规则引擎，但我不确定您为什么猜测 WF 将是最好的使用 - 除非您已经专门针对工作流做了一些事情。如果不是这样，也许您还应该问一些更一般的问题，例如“什么是与 X 语言或 X 技术集成的简单规则引擎？”

# c# - C#：哪个使用更多的内存开销？包含单词序列的字符串或字符？

> ID：897485
> 
> 赞同：6
> 
> 时间：2009-05-22T11:55:12.370
> 
> 标签：c#, .net

C#：哪个使用更多的内存开销？包含单词序列的字符串或字符？

我知道一个 char 基本上是每个 char 组成一个单词的数组（如果超过一个 char），但这最终会导致你更多的内存开销，比如使用字符串与 char 来保存单词长度的东西?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-22T12:00:42.577

这取决于你使用了多少次有问题的东西。.Net 处理字符串的方式是，如果您有多个具有相同值的字符串，则该值仅存储在内存中一次，并且每个字符串变量都指向该值。但是，即使 char 数组的内容相同，使用的每个 char 数组也会有自己的内存分配。

例如

```
//.Net Framework allocates memory space for "word" only once, all the three variables refer to this chunk of memory
String s1, s2, s3;
s1 = "word";
s2 = "word";
s3 = "word";

//.Net Framework allocates memory for each array
char[] c1 = new char[] { 'w','o','r','d'};
char[] c2 = new char[] { 'w','o','r','d'};
char[] c3 = new char[] { 'w','o','r','d'}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-22T13:27:28.363

如果您比较 a`string`和 a的内存存储`char[]`，它们非常相似。它们都在堆上分配（除了在编译时创建的文字字符串）。它们都包含一些变量（用于长度等），以及一个包含字符数组的内存区域。

但是，根据`string`创建方式的不同，它的内存区域可能会大于其所需的长度，即在内存区域的末尾有一些未使用的字节。a 的内存区域`char[]`总是与数据所需的一样大。

例如，如果您使用 StringBuilder 创建一个字符串，并且容量大于它的长度（但不超过两倍），它会返回一个`string`最后包含未使用字节的对象。

例子：

```
// set capacity to 8
StringBuilder s = new StringBuilder(8);
// put four characters in it
s.Append("Ouch");
// get the string
string result = s.ToString(); 
```

该`result`变量现在指向一个字符串对象，该对象具有一个用于存储 16 字节长的字符数据的内存区域，但只使用了前 10 个字符（四个字符，加上`\x0`末尾的一个字符）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T12:13:23.363

一般来说，字符串会更有效，因为 RobV 指出具有相同值的多个字符串都引用内存中的相同字符串，这称为[字符串实习](http://en.wikipedia.org/wiki/String_intern_pool)。在比较字符串时，这可以带来很大的好处。

如果内存是一个大问题，那么您可能要小心处理字符串的方式，连接可能会变得非常昂贵。

# django - 如何制作动态表格

> ID：897494
> 
> 赞同：1
> 
> 时间：2009-05-22T11:58:49.943
> 
> 标签：django, django-admin, django-forms

我有一个状态字段，它有 3 个选项 1）已激活 2）已拒绝 3）待定。如果用户选择拒绝状态，那么他必须输入拒绝原因，否则该原因字段应该被隐藏。或者当用户选择被拒绝时，我应该重定向它到其他表格，以便我可以使用拒绝原因发送电子邮件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T13:50:33.760

这里有一些有用的链接

[B-list 关于它的帖子](http://www.b-list.org/weblog/2008/nov/09/dynamic-forms/)

[Uswaretech 关于它的帖子](http://uswaretech.com/blog/2008/10/dynamic-forms-with-django/)

# iphone - 如何在我们的应用程序中使用媒体库？

> ID：897503
> 
> 赞同：0
> 
> 时间：2009-05-22T12:01:03.700
> 
> 标签：iphone

我想在我的 iPhone 应用程序中使用用户媒体库中的任何媒体文件。就像我们从照片库中挑选一张图片一样。有没有这方面的API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-22T14:54:11.293

查看 UIImagePickerController 类。它允许您从照片库或相机中选择图像。

# wpf - 从 xaml 模板文件中获取流文档

> ID：897505
> 
> 赞同：5
> 
> 时间：2009-05-22T12:01:09.253
> 
> 标签：wpf, xaml, flowdocument

我有一个像这样开头的 Xaml 文件：

```
 <FlowDocument
       x:Name="flowDocument"
       xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
       xmlns:Drawing="clr-namespace:System.Drawing;assembly=System.Drawing" 
```

当前的解决方案使用 StremReader 通过使用流文档引用 xaml 文件的物理路径，然后将数据解析到模板中。

这不是一个有效的解决方案，所以我需要在不参考物理路径的情况下获取流文档。

我想在我的 C# 代码中使用 xmlns 命名空间或类似名称，并且喜欢

```
string result = XamlWriter.Save(flowDocument) 
```

并使用结果进行解析。

建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-22T12:48:31.450

如果我理解正确，您想从字符串中获取 FlowDocument 吗？你可以这样做`XamlReader.Parse`：

```
string result = XamlWriter.Save(flowDocument);
FlowDocument new_doc = (FlowDocument)XamlReader.Parse(result); 
```

**编辑：**如果 XAML 文件是您项目的一部分，您可以将其标记为 EmbeddedResource 并使用以下内容加载它：

```
Stream doc_stream = Assembly.GetExecutingAssembly()
                            .GetManifestResourceStream("YourNamespace.YourFile.xaml");
FlowDocument doc = (FlowDocument)XamlReader.Load(doc_stream); 
```

# php - 使用 php 和 curl 使用 POST (multipart/form-data) 将文本作为文件上传

> ID：897517
> 
> 赞同：2
> 
> 时间：2009-05-22T12:04:09.077
> 
> 标签：php, post, file-upload, curl

我正在尝试实现的 API 需要上传包含命令的 XML 文件。执行此操作的直接方法是生成文件的内容，将其写入文件系统并使用 curl 将其上传到 Web 服务器。

我想要完成的是通过使用 php 的临时协议处理程序来跳过编写部分。示例代码如下：

```
<?php
  $fp = fopen("php://temp", "r+");

  $request = 'some xml here';
  fwrite($fp, $request);

  rewind($fp);

  $input_stat = fstat($fp);
  $size = $input_stat['size'];

  $url = "http://example.com/script.php";
  $ch = curl_init();

  $filename = $_POST[cert_file] ;
  $data['file'] = "@xml.xml";

  curl_setopt($ch,CURLOPT_URL,$url);
  curl_setopt($ch,CURLOPT_POST,1);
  curl_setopt($ch,CURLOPT_POSTFIELDS,$data);
  curl_setopt($ch,CURLOPT_INFILESIZE,$size);
  curl_setopt($ch,CURLOPT_INFILE,$fp);
  curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);
  $result = curl_exec($ch);
  $error = curl_error($ch);

  echo 'result:'.$result."\n";
  echo 'error:'.$error."\n";

  curl_close($ch);
?> 
```

不幸的是，这不起作用。Tcpdump 显示没有发送请求。 **更新**：我得到的结果是：

> 结果：
> 
> 错误：创建表单数据失败

有谁知道如何使用 PHP 即时将文本上传为文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T12:59:38.903

在调用到 之后`fwrite`，添加调用到`rewind($fp)`。之后`fwrite`，文件指针位于临时流的末尾。如果您调用`rewind`它，则将其重置为开头。这是来自 PHP 会话的快速证明：

```
php > $fp = fopen("php://temp", "r+");
php > fputs($fp, "<xml>一些 xml</xml>\n");
php > echo stream_get_contents($fp);
php > 倒带($fp);
php > echo stream_get_contents($fp);
<xml>一些xml</xml>
php > 退出

```

在第一次 echo 之后`stream_get_contents`，没有任何回声。之后，显示 XML`rewind`的第二个回显。`stream_get_contents`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T13:02:38.803

可能是因为，在写入`$fp`文件句柄后，指针指向文件末尾。你试过先倒带吗？

```
fseek($fp, 0, SEEK_SET); 
```

# .net - 在项目控件中包含的环绕面板上放置一个 scoll 条

> ID：897518
> 
> 赞同：2
> 
> 时间：2009-05-22T12:04:27.797
> 
> 标签：.net, wpf, scrollbar, itemscontrol, wrappanel

有人知道如何将滚动条添加到包含在 itemscontrol 中的包装面板中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-06-15T14:32:23.693

在这里行不通

```
 <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <ScrollViewer>
                <WrapPanel Orientation="Horizontal"  />
            </ScrollViewer>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel> 
```

你得到一个讨厌的异常，ItemsPanelTemplate 的 VisualTree 必须包含一个面板。'System.Windows.Controls.ScrollViewer' 不是面板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T15:49:47.950

在它周围包裹一个 ScrollViewer 标签

```
<ScrollViewer>
   <WrapPanel>
      <!-- your other controls here -->
   </WrapPanel>
</ScrollViewer> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-03-03T06:55:36.383

此示例（从 Kaxaml 示例修改）应该可以帮助您：

```
 <Page
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
   <Grid>
    <Grid.Resources>
       <XmlDataProvider x:Key="flickrdata" Source="http://api.flickr.com/services/feeds/photos_public.gne?tags=flower&amp;lang=en-us&amp;format=rss_200">
          <XmlDataProvider.XmlNamespaceManager>
             <XmlNamespaceMappingCollection>
                <XmlNamespaceMapping Prefix="media" Uri="http://search.yahoo.com/mrss/"/>
             </XmlNamespaceMappingCollection>
          </XmlDataProvider.XmlNamespaceManager>
       </XmlDataProvider>
       <DataTemplate x:Key="itemTemplate">
          <Image Width="75" Height="75" Source="{Binding Mode=OneWay, XPath=media:thumbnail/@url}"/>
       </DataTemplate>
       <ControlTemplate x:Key="controlTemplate" TargetType="{x:Type ItemsControl}">
          <WrapPanel IsItemsHost="True" Orientation="Horizontal"/>
       </ControlTemplate>
    </Grid.Resources>
    <ScrollViewer Width="320" Height="225">
      <ItemsControl
         Width="300"
         ItemsSource="{Binding Mode=Default, Source={StaticResource flickrdata}, XPath=/rss/channel/item}"
         ItemTemplate="{StaticResource itemTemplate}"
         Template="{StaticResource controlTemplate}">
      </ItemsControl>
    </ScrollViewer>
 </Grid>
</Page> 
```

# jquery - 如何使用 jQuery 旋转图像，如 Photoshop 中的“自由变换”？

> ID：897519
> 
> 赞同：5
> 
> 时间：2009-05-22T12:04:42.880
> 
> 标签：jquery, jquery-ui

我到处搜索，但找不到如何使用图像边框旋转（度）或 jQuery 中的“可调整大小”之类的东西。我的意思是类似于 Photoshop 中的“自由变换”边框，它在图像的每个角落有 4 个位置可以旋转。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-22T13:35:47.363

我认为在 javascript 中执行此操作的唯一方法是使用 canvas 元素。

尝试使用以下插件： [http ://wilq32.googlepages.com/wilq32.rollimage222](http://wilq32.googlepages.com/wilq32.rollimage222)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-22T13:19:19.190

您可以使用 IE 的 DirectX 过滤器旋转图像，但我认为不会解决您的问题。您可能必须使用 Flash 或 Silverlight 之类的工具来完成这项工作。

我不知道有任何 JavaScript 具有这种功能。这是一个人的实验，但结果不是很好：

[http://www.walterzorn.com/rotate_img/rotate_img.htm](http://www.walterzorn.com/rotate_img/rotate_img.htm)

这也很酷，并且使用 Flash：

[http://www.swfir.com/examples/multiple/](http://www.swfir.com/examples/multiple/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-22T13:46:28.307

如果您使用的是 Javascript，为什么不让服务器完成工作并通过 ajax 调用获得结果？查看 ImageMagick 库 ( [http://www.imagemagick.org/script/index.php](http://www.imagemagick.org/script/index.php) )。如果最终用户是指定旋转参数的人，则在 javascript 中捕获这些输入，将其发送回服务器以供 ImageMagick（或其他库）处理，并更新图像客户端。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-22T13:32:10.257

[这](http://snippets.dzone.com/posts/show/5514)可能会有所帮助。我不是专家，但看起来你在 IE 中只能有 90 度增量。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-22T14:23:42.227

这是在 WebKit 中工作[的起点。](http://static.bwerp.net/~adam/20090522/rotate.html)（我使用的是 Safari 4。）我已经很久没有做过任何真正的数学运算了，所以你必须根据拖动的距离计算出正确的旋转角度。此外，当您开始旋转时，旋转框会稍微偏移。它们可能围绕不同的中心点旋转。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-22T17:42:05.113

CSS3 支持[旋转](http://www.w3.org/TR/css3-box/#rotating)，但目前只有 chrome 和 safari 支持使用 webkit 的 CSS3 旋转。这是 CSS3 中旋转的一个很好的[例子](http://css-tricks.com/css3-clock/)。如果您想查看它是否适用于您的浏览器，请尝试此[链接](http://css-tricks.com/examples/CSS3Clock/)。它应该是一个工作时钟。

现在 troynts的[答案](https://stackoverflow.com/questions/897519/how-to-rotate-image-with-jquery-like-free-transform-in-photoshop/897881#897881)看起来是你最好的选择。

将来或使用 safari 或 chrome 你可以做到这一点。

```
$(this).css('-webkit-transform','rotate(45deg)'); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-09-30T11:28:44.937

我正在使用 raphaeljs (raphaeljs.com)。它将允许您在画布上绘图。所以你可以先添加一个背景矩形，然后添加图像，最后旋转。从而显示出边界。据我所知，这对于 wilq32 的旋转是不可能的。

# javascript - 小书签以获取图像的完整路径

> ID：897521
> 
> 赞同：0
> 
> 时间：2009-05-22T12:05:06.797
> 
> 标签：javascript, path, bookmarklet

我正在开发一个小书签，当您单击网页上的任何图像时，它会提供图像的完整路径。然后将图像下载到我们的服务器上，我们对其进行业务处理。

目前，该脚本使用 jQuery 解析出`src`属性，然后有一些通常可以工作的愚蠢逻辑，但通常情况下它不起作用。

现在，我可以继续编写丑陋的代码来更好地使用正则表达式和其他东西来解析 url，但我觉得应该有一些更好的方法来做到这一点.. 找到一些模仿的方法（如在 firefox 中）“对-单击 => 复制图像位置”会很棒。

这是我目前拥有的相关 js 代码（有问题，但它通常可以工作）。关于如何更好地实现这一点的任何创新想法？

```
var imgsrc;
$("img").click(function() {
  imgsrc = $(this).attr("src");
  var url = document.URL;

  if (window.location.pathname != "/") {
    var pathLoc = url.indexOf(window.location.pathname);
    url = url.substr(0, pathLoc + 1);
  } else if (window.location.pathname.substr(0,1) == "/") {
    url = url.substr(0, url.length - 1);
  }

  if (imgsrc.toLowerCase().indexOf("http://") != 0) {
    imgsrc = url + imgsrc;
  }

  window.open("http://www.mycompany.com/whatever?imgsrc=" + imgsrc + "");
});

$("img").hover(function () {
  $(this).css({'border' : '4px solid #ff0000'});
  }, function () {$(this).css({'border' : ''});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T12:30:33.483

我相信大多数浏览器都会规范化该**`SRC`**属性（我的意思是 DOM 属性，而不是**`getAttribute('src')`**）。所以你可以尝试：

```
$("img").click(function() {
    window.open("http://www.mycompany.com/whatever?imgsrc=" + this.src + "");
}); 
```

如果这不起作用，那么我知道锚标签的**`HREF`**属性已标准化；这肯定会奏效：

```
$("img").click(function() {
    var fullSrc = $('<a/>').attr('href', this.src)[0].href;
    window.open("http://www.mycompany.com/whatever?imgsrc=" + fullSrc + "");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T12:25:04.057

要将菜单添加到上下文菜单，您必须为 firefox 创建一个扩展。我在[这里](http://plindenbaum.blogspot.com/2008/02/creating-xul-extension-for.html)为维基百科创建了一​​个扩展：您可能对代码感兴趣。

# javascript - 用转义反斜杠替换任何 (.) 句点，以便我可以选择元素

> ID：897524
> 
> 赞同：2
> 
> 时间：2009-05-22T12:05:57.123
> 
> 标签：javascript, jquery

我有一些带有 (.) 句点的元素，我需要选择它们，但我相信我需要一些转义字符才能这样做。我怎样才能确定我的字符串中可能有句点会被正确转义。我猜是这样的吗？

```
var title = "User1.Title";
var string = //replace any periods with escape sequence?
$('#'+string).show(); 
```

它可能有多个 (.) 句点，希望不会，但如果我可以替换所有 (.) 句点，这样我就可以进行选择，那就太好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-22T12:07:59.147

你是这个意思吗？

```
$('#'+string.replace(/\./g, "\\.")).show(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-22T13:33:20.800

你可以这样做...

```
$("[id="+string+"]").show(); 
```

...但是这个家伙的问题在于它并没有那么快，因为它会遍历整个 DOM 树，寻找具有该 ID 的每个人，而不仅仅是一个。

你也可以这样做...

```
$('#'+string.replace(".", "\\.")).show(); 
```

.. jQuery 将预先解析该选择器并在幕后使用*document.getElementById 。*

你也可以这样做

```
$(document.getElementById(string)).show(); 
```

... 产生相同的效果，您不必担心 CSS 特殊字符。请注意 IE（6 和 7）和 Opera，它不仅通过 ID 还通过名称来选择元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T12:52:09.243

这有效：

```
$("[id='"+string+"']").show() 
```

如果您将其指定为属性，则无需转义它——jquery 以不同方式解析它。

# performance - Haskell 风格/效率

> ID：897525
> 
> 赞同：6
> 
> 时间：2009-05-22T12:06:02.800
> 
> 标签：performance, haskell, lazy-evaluation, primes

所以我正在研究一种懒惰地生成素数的方法，我想出了这三个定义，它们都以等效的方式工作 - 只是检查每个新整数是否在所有前面的素数中都有一个因子：

```
primes1 :: [Integer]
primes1 = mkPrimes id [2..]
  where mkPrimes f (x:xs) = 
          if f (const True) x 
          then 
            let g h y = y `mod` x > 0 && h y in
            x : mkPrimes (f . g) xs
          else
            mkPrimes f xs

primes2 :: [Integer]
primes2 = mkPrimes id (const True) [2..]
  where mkPrimes f f_ (x:xs) = 
          if f_ x 
          then 
            let g h y = y `mod` x > 0 && h y in
            x : mkPrimes (f . g) ( f $ g $ const True) xs
          else
            mkPrimes f f_ xs

primes3 :: [Integer]
primes3 = mkPrimes [] [2..]
  where mkPrimes ps (x:xs) = 
          if all (\p -> x `mod` p > 0) ps
          then 
            x : mkPrimes (ps ++ [x]) xs
          else
            mkPrimes ps xs 
```

所以在我看来`primes2`应该比 快一点`primes1`，因为它避免了 `f_ = f (const True)`对每个整数重新计算（我*认为*这需要按照我们迄今为止找到的素数数量的顺序工作），并且只在遇到新的时更新它主要。

仅从不科学的测试（`take 1000`在 ghci 中运行）看来，它的运行速度似乎`primes3`比`primes2`.

我是否应该从中吸取教训，并假设如果我可以将函数表示为数组上的操作，我应该以后一种方式实现它以提高效率，还是这里发生了其他事情？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-22T16:29:01.643

的第二个参数是`f`什么？在我看来，这两种选择都更具可读性，并且不会显着影响性能......

```
...
            let g y = f y && y `mod` x > 0 in
            x : mkPrimes g xs
...

import Control.Arrow  -- instance Monad (-> r)
import Control.Monad  -- liftM2
(.&&.) = liftM2 (&&)
...
            let g y = y `mod` x > 0 in
            x : mkPrimes (f .&&. g) xs
... 
```

* * *

无论如何，回到问题。有时使用函数作为数据结构是特定任务的最佳表示，有时则不是。就易于编码而言的“最佳”和就性能而言的“最佳”并不总是一回事。“作为数据结构的函数”技术对于[运行时编译](http://www.haskell.org/haskellwiki/Runtime_compilation)是必不可少的，但正如该页面警告的那样，

> 运行时编译有时可以为您带来显着的效率提升，但通常会以增加压力和降低生产力为代价，让您几乎一无所获。

在您的情况下，构造 each 的开销可能`f :: Integer -> ... -> Bool`明显高于构造 each 的开销，`ps :: [Integer]`调用`f ... x`与`all ... ps`.

* * *

要从无限的素筛中挤出循环，请摆脱对`mod`! 整数乘法、除法和取模比整数加法和减法要慢得多。`-O2`在我的机器上，当计算前 1000 个素数（GHC 6.10.3 ）时，这个实现的时钟速度快了 40% 。

```
import qualified Data.Map as M
primes' :: [Integer]
primes' = mkPrimes 2 M.empty
  where
    mkPrimes n m = case (M.null m, M.findMin m) of
        (False, (n', skips)) | n == n' ->
            mkPrimes (succ n) (addSkips n (M.deleteMin m) skips)
        _ -> n : mkPrimes (succ n) (addSkip n m n)
    addSkip n m s = M.alter (Just . maybe [s] (s:)) (n+s) m
    addSkips = foldl' . addSkip 
```

在行动中（使用一点 JSON 风格的语法），

```
 mkPrimes 2 {}
=> 2 : mkPrimes 3 {4: [2]}
=> 2 : 3 : mkPrimes 4 {4: [2], 6: [3]}
=> 2 : 3 : mkPrimes 5 {6: [2, 3]}
=> 2 : 3 : 5 : mkPrimes 6 {6: [2, 3], 10: [5]}
=> 2 : 3 : 5 : mkPrimes 7 {8: [2], 9: [3], 10: [5]}
=> 2 : 3 : 5 : 7 : mkPrimes 8 {8: [2], 9: [3], 10: [5], 14: [7]}
=> 2 : 3 : 5 : 7 : mkPrimes 9 {9: [3], 10: [2, 5], 14: [7]}
=> 2 : 3 : 5 : 7 : mkPrimes 10 {10: [2, 5], 12: [3], 14: [7]}
=> 2 : 3 : 5 : 7 : mkPrimes 11 {12: [2, 3], 14: [7], 15: [5]}
... 
```

该地图只使用加法来跟踪未来的倍数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T19:52:46.157

请注意，`primes3`可以通过更改`ps++[x]`为 来提高效率`(x:ps)`。运行`(++)`在其左参数的长度上是线性的，但在右参数的长度上是恒定的。

# linux - 尝试修改 Linux 内核是否合理？

> ID：897528
> 
> 赞同：4
> 
> 时间：2009-05-22T12:06:44.953
> 
> 标签：linux, unix

所以我想尝试一个涉及对 Linux 内核进行深度修改的新概念，我想知道是否值得尝试，或者它是否太复杂？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-22T12:14:11.053

在没有进一步信息的情况下，听起来您的建议更好地描述为修改内核，而不是分叉。

你雄心的哪个方面需要分叉？分叉是一个本质上主要用政治术语定义的东西——即重命名项目、设定不同的战略方向等等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-22T15:57:30.320

我想坚持关于难度的问题。如果您只是想添加一个系统调用来提供有限的附加功能，例如调整文件描述符，那么这是任何训练有素的程序员都可以做的事情。如果你想玩实时、性能、进程处理，那么要注意这些可能非常困难，因为你深入内核。

许多本科操作系统课程需要添加系统调用或向构造添加一些琐碎的字段/参数。琐碎的事情大约需要 20 小时，简单但有用的事情需要 60 小时。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-22T12:17:16.383

与任何真正开放的软件一样，分叉内核就像从版本控制存储库中分支并开始在您自己的版本上工作一样简单。就像任何真正开放的软件一样，如果你要分叉它，最好有一个充分的理由来分叉。如果您最终计划合并回来，那么您实际上不是在分叉，而是在进行分支，然后要求将其合并。请记住在这种情况下定期更换。

不过，主要的一点是，这将是困难的……Linux 内核是一个非常庞大且复杂的软件。除非您删除所有无法获得更新到 GPLv3 许可的 GPLv2 代码，否则您将被 GPLv2 困住，因此许可必须保持不变。但是，如果您想对 Linux 内核进行大量修改，因为您认为自己可以做得更好，那么绝对没有人能阻止您。添加新驱动程序，修改图形工作方式，删除旧 API，随心所欲。一旦你有东西要证明，人们就会开始关注，特别是如果你做得比现在做得更好。最后你可能会得到最终的好结果：你的工作最终会合并回主线。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-22T12:25:09.160

分叉开源软件应该被视为最后的手段。您应该首先尝试做的是创建内核的一个分支并将其提交以进行合并。这将使每个人的生活更加轻松。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-22T16:05:27.340

“深度修改”会让您陷入两难境地：您是跟踪新的 Linux 内核并合并您的更改，还是坚持您最初针对的内核并返回补丁关键修复？

除非您的更改可以合并到主线内核中，否则您将面临上述情况。你能坚持这样的努力吗，值得吗？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-22T16:27:31.940

如果其他人已经在从事类似的工作，请前往[LKLM并检查档案。](http://lkml.org/)如果没有，请在此处宣布您计划做什么，并询问完成它的最简单方法（内核模块等）。创建您自己的 git 存储库以进行更改并允许有兴趣的其他人从您的存储库中提取。如果你的工作被证明是成功的，请让维护人员提取你的更改并将它们添加到主线。

这样做当然不是不合理的，但只有您知道是否值得您花时间进行这些*深度修改*。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-22T12:10:53.743

是的，这很复杂，但是如果您有一个新概念，并且您认为在内核之上构建它是一个好主意，那么它可能值得花时间。

如果您仍然对 Linux 内核感到厌烦，那么总会有[Minix](http://www.minix3.org/)内核......

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-22T14:39:30.837

IIRC 维护修改后的 Linux 内核的正确方法是像 Andrew Morton 的[mm中的](http://kernel.org/patchtypes/mm.html)**补丁集**。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-22T12:13:41.817

您可以完成的大部分工作都应该可以通过内核模块完成。如果你真的有什么大计划，那么你可以尝试分叉它。嘿，它是开源的，没有人会告诉你不 :) 只要确保你经常备份。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-22T18:31:08.013

您应该考虑您的想法是否真的需要在内核空间中完成，或者是否可以有效地在用户空间中完成。这本身就是一个合理的问题（当然还有这个想法的细节）。

我经常看到人们将与内核相关的想法发布到 LKML，这些想法实际上可以完全在用户空间中完成，有时更容易和更有效。

# asp.net-mvc - ASP.NET MVC 是否需要 WebServices 或 PageMethods？

> ID：897531
> 
> 赞同：0
> 
> 时间：2009-05-22T12:08:05.777
> 
> 标签：asp.net-mvc

在 Web 表单中，我曾经创建 WeebServices 和 PageMethods 以便能够使用 jquery 调用 JSON 结果，那么 MVC 是否需要这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T12:09:57.567

如果这就是您使用 WebService 的目的，那么不，它不再需要了。

# vb.net - Vb.net 我怎样才能从课堂的其余部分隐藏这个变量？

> ID：897532
> 
> 赞同：1
> 
> 时间：2009-05-22T12:08:45.057
> 
> 标签：vb.net, class-design

```
Public Class frmMain
    Private p_dlgAdd As frmAdd = Nothing
    Public ReadOnly Property _dlgAdd As frmAdd
        Get
            If p_dlgAdd Is Nothing Then
                p_dlgAdd = New frmAdd()
            End If
            Return p_dlgAdd
        End Get
    End Property

    Public Sub DoStuff()
       ''// Should not touch p_dlgAdd
    End Sub
End Class 
```

对于几种类型的对象，我宁愿只在需要时才初始化它们（sql 连接、大型机连接、大型表单），因为有些用户只使用程序的非常特定的部分（经理可能会使用一台大型机来做他们想做的事情，定期用户主要使用其他资源）。

为什么是 p_？我在想使用 p_ 将帮助我在智能感知中不使用或轻松找到该类中本地的变量而不是属性。然后在私有属性或不需要属性本地访问的私有变量前面单独使用 _ 。

什么是帮助防止我意外直接访问 p_dlgAdd 的好方法？这对 2008 年的匿名变量有用吗？（我还没有 2008 年可用，但他们认为我们很快就会有）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T23:46:51.730

您可以使用[EditorBrowseableAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.editorbrowsableattribute(VS.80).aspx)对 Intellisense 隐藏类成员。

```
<EditorBrowsable(System.ComponentModel.EditorBrowsableState.Never)> _
Private p_dlgAdd As frmAdd = Nothing 
```

想到的另一个选择是使用像[宪兵](http://www.mono-project.com/Gendarme)这样的静态分析工具来检查是否违反了“不要直接访问该字段”规则。不确定 Gendarme 是否已经有适当的规则，但它是可扩展的（但在您的情况下可能不值得付出努力）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T12:17:19.907

老实说，我不熟悉匿名变量。话虽如此，我所知道的确实没有任何机制可以阻止您编写代码以从同一类中访问私有变量。请注意您的代码。如果你想在变量上加上某种前缀来提醒自己，那是可以接受的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T12:22:30.193

你总是可以做的（但在你的情况下这可能是一个矫枉过正），将是以下内容：

```
public class Base
{
    private frmAdd p_dlgAdd = null;
    protected frmAdd _dlgAdd 
    {
        get
        {
            if(p_dlgAdd == null)
                p_dlgAdd = new frmAdd();
            return p_dlgAdd;
        }
    }
} 
```

这样，您的“p_dlgAdd”将无法访问，_dlgAdd 只能在派生类中访问。但这仅在您可以定义/更改基本类型时才有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-08-05T01:41:01.447

这就是**静态**的用途。

```
Public Class frmMain
    Public ReadOnly Property _dlgAdd As frmAdd
        Get
            Static dlgAdd As frmAdd = Nothing
            If dlgAdd Is Nothing Then
                dlgAdd = New frmAdd()
            End If
            Return dlgAdd
        End Get
    End Property

    Public Sub DoStuff()
       ' cannot touch dlgAdd
    End Sub
End Class 
```

[https://msdn.microsoft.com/en-us/library/z2cty7t8.aspx](https://msdn.microsoft.com/en-us/library/z2cty7t8.aspx)

# javascript - 如何使用 JavaScript 更改标签中的标题属性？

> ID：897541
> 
> 赞同：11
> 
> 时间：2009-05-22T12:10:57.410
> 
> 标签：javascript, html, dom

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-22T14:03:05.467

我假设这只是您想要做的一个简化示例，因为更改链接`onclick`可以内联完成：

```
 <a href="#" onclick="this.title='after click'" title="before click">...</a> 
```

无论哪种方式，最好的方法是完全避免进行任何查找。只需将对您的链接的引用作为参数传递给您的函数：

```
<script>
  function tool(link) {
    link.title = 'after click';
  }
</script>
<a href="#" onclick="tool(this)" title="before click">...</a> 
```

当然，正如格兰特所建议的那样，您也可以将 title 值传递给函数，但是您最好一直执行内联版本并跳过该函数。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-05-22T12:17:22.293

去掉 SCRIPT 元素中的 BR 标签，并将工具函数重写为：

```
function tool(){
    document.getElementsByName("link")[0].title = "after click";
} 
```

它会起作用。但是，这不是最佳方式。如果您为该字段分配一个 id 参数，您至少可以使用 document.getElementById(..)，或者更好的是，使用像 jQuery 这样的库。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-22T12:14:05.267

使用 jquery，您可以编写以下命令：

```
$("a#link").attr("title","after click"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-22T12:16:41.750

您可以在要更改的元素上使用 setAttribute(attributeName, value)。

```
document.getElementById('link').setAttribute('title', 'after click'); 
```

这也适用于自定义属性

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-22T13:23:29.057

更正 Jason 代码：

写 document.getElementById("link").title 而不是 document.getElementsByName("link").title。

我已经在 IE7 和 Firefox 3 上测试过了。

```
<html>
<head>
    <script>
            function tool(){
                    document.getElementById("link").title = "after click";
            }
    </script>
</head>
<body>
    <a href="javascript:tool()" id="link" title="before click">
            click here
    </a>
</body>
</html> 
```

您还可以浏览这篇文章以使用 javascript 创建漂亮的工具提示：http://devirtu.com/2008/08/14/how-to-make-tooltip-with-javascript/

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-22T12:16:38.443

```
document.getElementsByName("link").title = "after click"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-24T16:45:49.057

我在这里解决两个问题：

1.  鼠标悬停时更改标题，但代码中没有：
    ...
    <a class="a" href="#" name="home" title="Home">Home
    ...
    document.getElementsByName("home" )[0].title = "标题已更改"; // 在职的

2.  如何更改链接的类：

    FROM：<a class="a" href="#" name="home" title="Home">Home
    TO：<a class="current" href="#" name ="home" title="Home">首页
    document.getElementsByName("home")[0].class = "current"; // 不工作

    谢谢！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-22T13:03:51.780

您提供的代码有两个问题：

*   顾名思义，documentent.getElementById 通过 ID 而不是名称查找内容。您需要在该锚标记中提供一个 ID。将您的链接更改为`<a href="javascript:tool()" id="link" name="link" title="before click">click here</a>`

*   您正在为 documentent.getElementById 提供一个名为“link”的变量的内容，该变量可能不存在。您实际上想传递一个需要引号的文字字符串。将该调用更改为`document.getElementById("link").title = "after click";`

综上所述，您的代码如下所示：

```
<html>
<head>
    <script>
        function tool(){
            document.getElementById("link").title = "after click";
        }
    </script>
</head>
<body>
    <a href="javascript:tool()" id="link" name="link" title="before click">
        click here
    </a>
</body>
</html> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-22T12:17:37.643

我会使用[http://jquery.com/](http://jquery.com/)下载它并添加一个脚本引用

为您的标签提供一个 id，例如 myLink

然后使用 JQuery 你可以写

```
$(document).ready(function () {

    $("#myLink").click(function(){

        $("#myLink").attr("title","after click");

    });

}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-22T12:45:23.987

正如waxwing建议的那样，最好使用 getElementById()

```
<a id="aLink" href="http://www.bla.com" title="hello">link</a>
 <script>

function tool(){
document.getElementById('aLink').title = "after click";
}

</script> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-23T15:06:45.647

```
<html>
<head>
<script>
window.onload = function () {
    window.document.getElementById("link").onclick = function () {
        this.title = "after click";
        return false;
    };
};
</script>
</head>
<body>
    <a href="http://www.example.com" id="link" title="before click">Click Here</a>
</body>
</html> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-11-27T14:48:05.790

标题已更改，但仅在生成的代码中。这就是 JS 的工作方式——它只处理演示文稿。尝试使用 Firefox 的 Webdeveloper 工具栏，因为它可以选择显示生成的代码和原始代码。如果您需要任何其他方式，请考虑使用一些服务器端编程。

我的观察：

*   切勿将 JS 与 HTML 混合使用。如果你需要更新你的代码，它会容易得多——搜索“unobtrusive JS”来更好地掌握这个问题。`<a href="javascript:...">`或者`<a href="#" onclick="...">`因此是一种糟糕的编码习惯。

*   不要将大型 JS 包（如 JQuery）用于简单任务。只有充分发挥其潜力，它们才是好的。

*   您真的需要即时执行 HTML 操作吗？为什么？标题工具提示对您的代码那么重要吗？谁应该从中受益：最终用户还是管理员？可访问性如何？

*   第一个代码块的信息：

*   如果我们不知道使用哪个链接，我们必须收集所有链接
*   然后针对 onclick 事件测试集合
*   建议：
*   *   使用更好的事件处理程序；）
*   *   仅从页面的​​特定部分（主或导航 div）收集链接以提高速度
*   注意事项：
*   这可能会减慢页面呈现
*   标题属性是硬编码的，所有链接都相同

```
 function changeTitle1(){
// find the array of links inside the document
var a = document.getElementsByTagName('a');
// test the array against onclick event
for (var i = 0, j = a.length; i 
```

 `*   INFO on the second code block:
*   We know exactly what link to check
*   Suggestion:
*   *   use a better event handler ;)
*   CAVEATS:
*   this can only be used on a single element
*   title attribute is hardcoded and same for all links

```
 function changeTitle2(){
// find the link
var a = document.getElementById('action_link');
// onclick event
a.onclick = function() {
try{
// change title value
this.title = 'This unique click happened as well!';
// or use setAttribute() method like this
/* this.setAttribute('title', 'This unique click happened as well!'); */

// disable default link action
return false;
}
// clear memory leaks with try-finally block
finally{a = null;}
}
} 
```

```
 window.onload = function() {
        changeTitle1();
        //changeTitle2();
    } 
```

* * *

@spiro: Regarding your second question about links current state and changing their CSS... well, use CSS :)

Short version:` 

```
<style type="text/css" media="screen">
    #home #current-home a,
    #contact #current-contact a,
    #about #current-about a
    {/* declarations to style the current state */}
</style>
</head>
<body id="home"> <!-- OR body id="contact" OR body id="about" -->
    <a href="#" title="Home" class="current-home">Home</a>
    <a href="#" title="Contact" class="current-contact">Contact</a>
    <a href="#" title="About us" class="current-about">About us</a> 
```

长版：[http](http://www.456bereastreet.com/archive/200503/setting_the_current_menu_state_with_css/) ://www.456bereastreet.com/archive/200503/setting_the_current_menu_state_with_css/ （也请阅读评论）

注意：如果您已经在当前页面上，是否需要显示**链接？**

# c# - C# 中的“强制”覆盖

> ID：897543
> 
> 赞同：3
> 
> 时间：2009-05-22T12:12:07.623
> 
> 标签：c#

我有一个抽象的 C# 基类，其中包含几个必须重写的方法。我该如何执行？现在我抛出一个异常作为基本实现

> ```
>  public virtual string Description
>     {
>         get { throw new NotImplementedException(); }
>     }
> 
>     public virtual string ErrorMessage
>     {
>         get { throw new NotImplementedException(); }
>     } 
> ```

然而，该解决方案感觉有点错误并且非常不直观......在 C# 中还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-22T12:13:36.263

使属性（这些不是您的示例中的方法）[抽象](http://msdn.microsoft.com/en-us/library/sf985hc5(VS.71).aspx)。

```
public abstract string Description{ get; }

public abstract string ErrorMessage{ get; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-22T12:14:44.297

在方法的情况下，您应该使它们抽象

```
public abstract void Method(); 
```

# php - 通过 $_GET 进行位置标头注入的 php 安全性

> ID：897550
> 
> 赞同：3
> 
> 时间：2009-05-22T12:14:07.137
> 
> 标签：php, security

我的页面上有这段代码：

```
header("位置：$page");
```

$page 作为 GET 变量传递给脚本，我需要任何安全措施吗？（如果是的话）

我打算只使用 addlashes() 但这会填满 URL ......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-22T12:21:30.820

**如果我让他们单击链接，我**可以将**您的**用户转发到任何**我**喜欢的地方，这绝对是一个很大的安全漏洞（请登录 www.yoursite.com?page=badsite.com）。现在考虑一个场景，badsite.com 看起来与您的站点完全一样，只是它捕获了您的用户凭据。

您最好`$urls`在代码中定义一个数组并仅将索引传递给该数组中的条目，例如：

```
$urls = array(
    'pageName1' => '/link/to/page/number/1',
    'pageNumber2' => '/link/to/page/number/2',
    'fancyPageName3' => '/link/to/page/number/3',
);
# Now your URL can look like this:
# www.yoursite.com?page=pageName1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-22T12:30:28.743

这是本书的[代码注入漏洞](http://www.owasp.org/index.php/Code_Injection)。用户可以输入他想要的任何值，您的脚本将毫无怨言地服从。

但最重要的规则之一——即使不是*最*重要的规则——是：

> **永远不要相信用户数据！**

因此，您应该检查已传递的值并对其进行验证。即使[PHP 4.4.2 和 5.1.2 分别修复了标头注入漏洞](http://docs.php.net/header)，您仍然可以输入任何有效的 URI，并且调用它的用户将被重定向到它。甚至像`?page=%68%74%74%70%3a%2f%2f%65%76%69%6c%2e%65%78%61%6d%70%6c%65%2e%63%6f%6d%2f`URL 编码为`?page=http://evil.example.com/`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-22T12:22:47.027

是的你是。仅仅因为你或我不能立即想出利用那一点代码的方法并不意味着更聪明的人不能。您要做的是确保重定向到您认为可以访问的页面。即使是这个简单的验证也可以工作：

```
$safe_pages = array('index.php', 'login.php', 'signup.php');
if (in_array($page, $safe_pages)) {
  header("Location: $page");
}
else {
  echo 'That page is not accessible.';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T12:51:48.497

或者，至少，定义一个允许 URL 的白名单，并且仅当用户提供的 URL 在 GET 变量中时才转发用户。

# c# - 在 Visual Studio 2008 测试框架中断言数组是相等的

> ID：897552
> 
> 赞同：85
> 
> 时间：2009-05-22T12:14:22.300
> 
> 标签：c#, visual-studio-2008, unit-testing

是否有一种简单的方法可以在单元测试中检查两个数组是否相等（即具有相同数量的元素，并且每个元素都相同？）。

在 Java 中，我会使用`assertArrayEquals (foo, bar);`，但 C# 似乎没有等价物。我试过`Assert.AreEqual(new string[]{"a", "b"}, MyFunc("ab"));`了，但即使函数返回一个带有“a”、“b”的数组，检查仍然失败

这是使用带有内置单元测试框架的 Visual Studio 2008 Team Suite。

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2009-05-22T12:18:56.410

它是`CollectionAssert.AreEqual`，另请参阅[CollectionAssert 的文档](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.collectionassert(VS.80).aspx)。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2010-05-04T22:07:10.367

Class1.cs：

```
 namespace ClassLibrary1
{
    public class Class1
    {
        Array arr1 = new[] { 1, 2, 3, 4, 5 };
        public Array getArray()
        {
            return arr1;
        }
    }
} 
```

ArrayEqualTest.cs：

```
 [TestMethod()]
        public void getArrayTest()
        {
            Class1 target = new Class1(); 
            Array expected = new []{1,2,3,4,5}; 
            Array actual;
            actual = target.getArray();
            CollectionAssert.AreEqual(expected, actual);
            //Assert.IsTrue(expected.S actual, "is the test results");
        } 
```

测试成功，发现错误：

```
 CollectionAssert.AreEqual failed. (Element at index 3 do not match.) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-22T12:16:22.703

在 .NET 3.5 中，也许可以考虑一下`Assert.IsTrue(foo.SequenceEqual(bar));`——不过，它不会告诉你它在什么索引上有所不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-22T12:24:36.930

好的，这是一个稍长的方法......

```
static void Main(string[] args)
{
    var arr1 = new[] { 1, 2, 3, 4, 5 };
    var arr2 = new[] { 1, 2, 4, 4, 5 };

    Console.WriteLine("Arrays are equal: {0}", equals(arr1, arr2));
}

private static bool equals(IEnumerable arr1, IEnumerable arr2)
{

    var enumerable1 = arr1.OfType<object>();
    var enumerable2 = arr2.OfType<object>();

    if (enumerable1.Count() != enumerable2.Count())
        return false;

    var iter1 = enumerable1.GetEnumerator();
    var iter2 = enumerable2.GetEnumerator();

    while (iter1.MoveNext() && iter2.MoveNext())
    {
        if (!iter1.Current.Equals(iter2.Current))
            return false;
    }

    return true;
} 
```

# c# - 为什么在尝试抓取这个缩短的 URL 时 WebClient 会超时？

> ID：897561
> 
> 赞同：-1
> 
> 时间：2009-05-22T12:17:12.060
> 
> 标签：c#, webclient

我有一个小型网络爬虫，有时必须抓取 Twitter 并提取 URL。我使用 .net 框架中提供的 Webclient 类的修改版本。

通常这可以正常工作，即使是来自站点的缩短的 URL。

但是，当跟随一个缩短的 URL 时，webclient 会超时。

**你认为他们在过滤某些客户？**

我该如何解决这个问题或为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-22T12:21:41.210

您确定可以从您的网络中访问该 URL，而无需通过代理吗？

您的网络客户端控件是否遵循重定向？你可以通过创建一个[TinyURL](http://msdn.microsoft.com/en-us/library/sf985hc5(VS.71).aspx)来测试它，看看你的 webclient 是否可以浏览到它。

如果您在浏览器中通过代理，则需要在 WebClient 控件中进行设置。

测试他们是否正在过滤客户端应该很容易 - 例如，将 Request 对象上的 UserAgent 设置为与 FireFox 匹配。

# flash - 将 JSON 转换为自定义 ActionScript 对象？

> ID：897566
> 
> 赞同：6
> 
> 时间：2009-05-22T12:17:29.143
> 
> 标签：flash, actionscript-3, json, object, casting

您好我想知道是否可以将我的 JSON 字符串转换为自定义对象？

基本上 ：

```
var customObject:CustomObject = JSON.decode(evt.result as String) as CustomObject; 
```

问候阿德勒茨

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-22T20:22:54.490

在 AS3 中，您不能使用*as*或*CustomClass(customObject)*将动态对象转换为自定义类。

但是，您可以使用一些简单的技巧作为解决方法。例如，您可以为您的自定义类声明一个构造函数，接受一个对象并使用对象属性初始化它的成员。

然后，您将使用：

```
var customObject:CustomClass = new CustomClass(JSON.decode(evt.result as String)); 
```

* * *

PS。关于评论，并非每种语言都如此......我想这使它成为*特定的动作脚本*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-23T09:55:46.260

就其本身而言，这是不可能的。这与 ActionScript 无关。在大多数其他语言中，您也有同样的问题，因为在左侧您有一个匿名对象，如果该语言支持任何此类事物，或者是哈希。反正。有不同的解决方案，这将是一个，可以处理一些事情：

```
package  {
    public class ObjectUtils {
        public static function createInstance(constructor:Class):* {
            var ret:*;
            switch (describeType(to).factory.constructor.parameter.(@optional == "false").length()) {
                case 0: ret = new to(); break;
                case 1: ret = new to(null); break;
                case 2: ret = new to(null, null); break;
                case 3: ret = new to(null, null, null); break;
                case 4: ret = new to(null, null, null, null); break;
                case 5: ret = new to(null, null, null, null, null); break;
                case 6: ret = new to(null, null, null, null, null, null); break;
                case 7: ret = new to(null, null, null, null, null, null, null); break;
                case 8: ret = new to(null, null, null, null, null, null, null, null); break;
                case 9: ret = new to(null, null, null, null, null, null, null, null, null); break;          
                default: throw new Error("no implementation for instantiating classes that require more than 9 constructor arguments");
            }
            return ret;
        }
        public static function castAnonymous(obj:Object, to:Class):* {
            var ret = createInstance(obj);
            for (var name:String in obj)
                try {
                    ret[name] = obj[name];
                }
                catch (e:Error) {
                    throw new Error("error trying to assign value " + obj[name] + " to property " + name + " on " + ret + ". reason: " + e);
                }
            return ret;
        }               
    }   
} 
```

限制：

1.  如果你的类发生恐慌，如果它在构造时用空值发送垃圾邮件，或者构造函数需要超过 9 个参数，则会失败
2.  没有，也不能递归，所以它可以简单地将匿名对象或数组分配给返回实例的属性

无论如何希望它有所帮助；）

问候

back2dos

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-10T17:30:21.440

有一种方法

github上的as3-vanilla lib，非常好:)

[https://github.com/jonnyreeves/as3-vanilla](https://github.com/jonnyreeves/as3-vanilla)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-08T02:35:19.370

实际上-您可以使用内置解析器并覆盖该`JSON.parse`方法并利用匿名函数的范围来访问父函数中的对象来绕过此限制。

例如 - 看看这个代码片段

```
public dynamic class MutatorData extends Object
{
    public var DisplayName:String;
    public var PropertyName:String;
}

public function parseData( data:String )
{
    var mutator:MutatorData = new MutatorData();

    JSON.parse( data,
        function (k, v) {
        mutator[k] = v;
        });
} 
```

使用代码示例 - MutatorData 类必须声明为动态的，这几乎违背了为其创建类的目的。您将无法阻止其他编码人员向其添加属性，您的 JSON 字符串中的拼写错误将成为对象的属性。Evenso，您将在 IDE 中获得一些 RTTI 和代码提示 - 这有助于防止编码器错误。

但是编写一个可与​​最终（非动态）类一起使用的 parse 方法的自定义版本将是一件简单的事情。

在我目前正在进行的项目中 - 内存和运行时性能至关重要，我们更喜欢使用自定义解析器，原因如下：

1) 它允许我们一开始就更改严格类型的对象，并放弃将数据复制到临时通用对象中。

2）我们可以将验证器直接构建到解析器中，根据需要抛出运行时错误以通知程序我们收到了不正确的 JSON 数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-12-17T11:47:49.373

您不能从动态对象投射自定义对象。但是您可以从 as3corelib 扩展 JSON-Decoder。我这样做正是出于这个原因。当我解码一个 json-String 时，我传递了编码对象的类名。稍微使用反射，你就可以得到一个强类型的自定义对象。当然在解码之前你需要知道编码对象的类名...

# windows - 在交互式会话中启动 Windows 服务

> ID：897568
> 
> 赞同：11
> 
> 时间：2009-05-22T12:17:52.560
> 
> 标签：windows, service, batch-file

一位同事有一个批处理脚本程序，它需要在 Windows Server 上以控制台模式运行，以便可以访问 Windows 交互式会话。服务器会定期自动重启（有一个不相关的闭源应用程序在这台机器上运行，我们无法控制）。重新启动后，他希望自动启动 Windows 交互式会话并运行此脚本，此外该服务还需要访问网络资源（尤其是 CIFS 驱动器）。

到目前为止，这是我们尝试过的：

1.  作为 Windows 服务启动。这失败了，因为 Windows 服务可以*访问*交互式会话*或*网络资源，但不能同时访问两者。
2.  使用 Microsoft 管理控制台添加脚本以在启动时运行，但这不起作用。
3.  使用 HKLM 注册表项开始运行此脚本，但它仅在我们手动打开服务器上的远程桌面会话时才会启动。
4.  创建计划任务。调用的程序无权访问交互式 Windows 会话。

还有其他建议吗？（或者也许他在提出这些建议之一时错过了什么？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-24T14:12:47.433

如果服务上的“与桌面交互”还不够（我见过少数情况不满足），您可以将其与 AutoAdminLogon 结合使用。在 HKLM\Software\Microsoft\Windows NT\CurrentVersion\Winlogon 下创建三个（或四个域）REG_SZ 值：

*   默认用户名
*   默认密码
*   默认域
*   自动管理员登录

AutoAdminLogon 应设置为**字符串**“1”，其他不言自明。

显然，这存在足以让木星飞过的安全问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-24T14:10:11.650

您是否尝试过让脚本作为 Windows 服务运行，但允许它与桌面交互？

具体来说：

1.  转到服务属性页面
2.  单击“登录”选项卡
3.  选择“本地系统帐户”
4.  勾选“允许服务与桌面交互”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-11-29T11:06:59.767

请参阅我的类似问题及其真实答案：[如何从 Windows 服务启动进程到当前登录的用户会话](https://stackoverflow.com/questions/4278373/how-to-start-a-process-from-windows-service-into-currently-logged-in-users-sessi/4284420#4284420) 注意：“与桌面交互”复选框根本不够。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T12:33:04.463

我建议以另一种方式进行。您可以构建另一个通过 IPC 与 Windows 服务通信的 Windows 应用程序，这可能是处理封闭源应用程序的方法。但如果必须，您可以在服务中指定一个选项（您可以通过 MMC、注册表等执行此操作）。基本上，您可以通过转到计算机管理->服务和应用程序->服务->右键单击您的服务->将帐户更改为本地系统并选中“允许系统与桌面交互”来查看此选项。

但是，我再次建议选择另一条路径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-24T13:54:13.320

我最近不得不做类似的事情；我发现但由于安全问题而放弃的一条路线是将交互式服务设置为在交互模式下运行，然后在 win32 API 中运行 ImpersonateUser 函数，我*认为*这将提供用户和交互式会话的好处可从 LocalSystem 获得。

不用说，如果有人闯入这样做的服务，他们将完全控制机器。

# asp.net - 使用 Web 服务更新 SQL 数据库表

> ID：897572
> 
> 赞同：1
> 
> 时间：2009-05-22T12:19:24.100
> 
> 标签：asp.net, sql, dataset, bulkinsert

我有一个问题，我在互联网上寻找了很久很久的答案，但找不到任何东西。

我有一个吸纳网络服务的小应用程序。然后，它通过自己的 Web 服务将此 Web 服务结果传递给另一个应用程序，并将请求存储在一个表中。

我想要做的是快速将结果从数据集中导入到表中。

选项 1 是我遍历数据集中的所有行并在每个行上使用插入。这样做的问题是它很慢，并且会减慢小应用程序 Web 服务的响应速度。

选项2是将数据集批量上传到sql中。对我来说坏消息是我不知道该怎么做！！任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T12:22:54.763

您可以使用[SqlBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)。一个简单的 SqlBulkCopy 可能如下所示：

```
DataTable dtMyData = ... retrieve records from WebService
using (SqlBulkCopy bulkCopy = new SqlBulkCopy(connectionString)) {
    bulkCopy.BulkCopyTimeout = 120; // timeout in seconds, default is 30
    bulkCopy.DestinationTableName = "MyTable"; 
    bulkCopy.WriteToServer(dtMyData);
} 
```

如果您正在处理大量数据，您可能还需要设置[BatchSize](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.batchsize.aspx)属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T12:31:41.063

这听起来像是一个非常忙碌的小型 Web 服务。

您可以改为（甚至另外）考虑将其设为异步或多线程。否则，您刚刚建立了两个 Web 应用程序之间的耦合，您可能首先将它们拆分以避免。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T12:48:56.147

由于各种原因，使用批量加载可能会很痛苦，首先是您如何执行它是特定于特定 DBMS 的。（通常让您知道的下一件事是需要放置包含数据的文件的位置。）

`INSERT`但是，您通常可以通过在单个事务中完成所有 s 以可移植的方式显着提高性能：

```
BEGIN TRANSACTION
INSERT ...
INSERT ...
...
COMMIT TRANSACTION 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T12:49:34.773

如果时间对您有利，您可以考虑使用 SQL Server Service Broker 技术，但最初的学习曲线相当陡峭。

[http://msdn.microsoft.com/en-us/library/ms166043(SQL.90).aspx](http://msdn.microsoft.com/en-us/library/ms166043(SQL.90).aspx)

您可以创建一个 Web 服务，该服务会触发一个存储过程来插入您的过程结果。

# dependency-injection - 界面 在温莎城堡绑定

> ID：897584
> 
> 赞同：1
> 
> 时间：2009-05-22T12:23:17.133
> 
> 标签：dependency-injection, castle-windsor

我有一个通用的数据容器接口 IDataContainer

我将它用于不同类型的 T IPerson、ISuperMan 等

在城堡里，我注册了它

```
container.AddComponentWithLifestyle<IDataContainer<IPerson>, DataContainer<Person>>(LifestyleType.Transient);
container.AddComponentWithLifestyle<IDataContainer<ISuperMan>, DataContainer<SuperMan>>(LifestyleType.Transient); 
```

在运行时城堡使用例如创建依赖项。

```
IDataContainer<IPerson> test = container.GetService<IDataContainer<IPerson>>(); 
```

但它因无法转换而失败......类实现了接口并且命名空间是正确的等等。

通话

```
IPerson test = container.GetService<IPerson>(); 
```

作品（已注册`<IPerson,Person>`）

城堡无法解决`interface<T>`或？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-08-30T23:12:23.520

所以这已经很晚了，但我想我知道你在这里想要做什么。我能够通过：

```
IDataContainer<IPerson> test = container.GetService<IDataContainer<IPerson>>(); 
```

通过注册这样的组件：

```
public class IoC
{
    public static void SetUp()
    {
        container = new WindsorContainer();
        container.AddComponent<IPerson, Person>();
        //container.AddComponentWithLifestyle<IDataContainer<IPerson>, DataContainer<Person>>(LifestyleType.Transient);
        //container.AddComponentWithLifestyle<IDataContainer<ISuperMan>, DataContainer<SuperMan>>(LifestyleType.Transient);
        container.AddComponentWithLifestyle("DataContainers", typeof(IDataContainer<>), typeof(DataContainer<>), LifestyleType.Transient);
    }

    public void TestOne()
    {
        SetUp();
        var test = container.GetService<IDataContainer<IPerson>>();
        Assert.That(test, Is.Not.Null);
    }

    public void TestTwo()
    {
        SetUp();
        var test = container.GetService<IPerson>();
        Assert.That(test, Is.Not.Null);
    }
}

internal interface IDataContainer<T> { }
internal class DataContainer<T> : IDataContainer<T> { }

internal interface IPerson { }
class Person : IPerson { }

internal interface ISuperMan { }
class SuperMan : ISuperMan { } 
```

被注释掉的两行是问题中存在的两行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-23T00:56:30.287

这与温莎无关。由于 C# 2.0 和 3.0 不支持泛型协变，您会收到转换错误。您可能正在制作`DataContainer<T>`implement `IDataContainer<T>`，这意味着`DataContainer<Person>`implements`IDataContainer<Person>`而不是`IDataContainer<IPerson>`您从容器中请求的内容。

# git - Git 会公开我的电子邮件地址吗？

> ID：897586
> 
> 赞同：118
> 
> 时间：2009-05-22T12:24:19.910
> 
> 标签：git, privacy

到目前为止，我在 Git 上阅读的指南说我应该进入配置并指定我的姓名和电子邮件地址。他们没有详细说明；他们只是说去做。

为什么 Git 需要我的电子邮件地址？而且，更重要的是，如果我通过 GitHub 公开我的存储库，我的电子邮件地址是否对所有人（包括垃圾邮件机器人）可见？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-08-12T11:41:58.823

2017 年 4 月更新

请参阅“[私人电子邮件，现在更加私密](https://github.com/blog/2346-private-emails-now-more-private)”

> GitHub 支持使用备用“noreply”电子邮件地址来创作基于 Web 的提交已经有一段时间了。从今天开始，还有另一种方法可以确保您在通过命令行将提交推送到 GitHub 时不会无意中发布您的电子邮件地址。
> 
> Git 使用您的电子邮件地址将您的姓名与您撰写的任何提交相关联。将提交推送到 GitHub 上的公共存储库后，作者身份元数据也会发布。
> 
> 如果您想确保不会意外发布您的电子邮件地址，只需在您的[电子邮件设置](https://github.com/settings/emails)中选中“将我的电子邮件地址保密”和“阻止暴露我的电子邮件的命令行推送”选项。

[![https://cloud.githubusercontent.com/assets/33750/24673856/a995cb74-1947-11e7-8653-65bc604a4101.png](https://i.stack.imgur.com/oF4XH.png)](https://i.stack.imgur.com/oF4XH.png)

注意：正如orev[在](https://stackoverflow.com/users/1617907/orev)[下面评论](https://stackoverflow.com/questions/897586/does-git-publicly-expose-my-e-mail-address/18186072?noredirect=1#comment92293518_18186072)的那样，[Git](https://git-scm.com/)没有公开任何内容。[GitHub](https://github.com/)是一个 Git 存储库*托管*服务，可能会。 您推送本地 Git 存储库的地方可以公开元数据。

 ** * *

注意：从 [2013 年 8 月 9 日开始，您现在可以将您的电子邮件地址保密](https://github.com/blog/1580-keep-your-email-private)！

不过，这适用于基于 Web 的 GitHub 操作：提交仍然包含一个电子邮件地址，该地址可能与您用于 GitHub 帐户的电子邮件地址相同，也可能不同。
请参阅下文以“屏蔽”该（git commit）电子邮件。

> 直到今天，所有基于 Web 的 GitHub Flow 都使用您的主电子邮件地址。这包括创建、编辑和删除文件，以及合并拉取请求。
> 
> 但现在您可以将您的电子邮件地址保密。为此，请访问您的电子邮件设置页面：

![电子邮件设置](https://i.stack.imgur.com/A9GHz.jpg)

> 启用此功能后，基于 Web 的操作将使用 username@users.noreply.github.com 电子邮件地址。

* * *

如果您想隐藏从您的计算机发出的电子邮件，GitHub 现在允许您**注册不同的电子邮件地址**：请参阅**[本指南](https://help.github.com/articles/keeping-your-email-address-private)**。

如果您希望您的提交反映，您仍然需要在推回 GitHub 之前在本地存储库中配置您的（假）电子邮件

```
git config --global user.email "user@server.fake" # Set email to slightly changed value
git config --global user.email # Verify the setting
# user@server.fake 
```

然后：

*   转到电子邮件设置菜单
*   点击“添加另一个电子邮件地址”
*   输入假电子邮件（例如“ `user@server.fake`”）并点击“添加”

![添加新的电子邮件地址](https://i.stack.imgur.com/kNeJ8.png)

注意：

> **此设置仅影响未来的提交**。
> 如果您想从存储库的提交历史记录中删除您的真实电子邮件地址，则必须重写您的旧提交。最简单的方法是：
> 
> 用于[`git filter-branch`重写存储库历史记录](https://help.github.com/articles/changing-author-info)并强制向上推送新的历史记录。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2009-05-22T12:29:25.703

Git 使用您的电子邮件地址来识别您，以及执行其他任务（例如使用 GPG 密钥签署标签）。您的电子邮件地址与您指定的名称一起作为您的身份的一部分嵌入到提交日志等中。例如，提交日志中的“作者”字段将显示为：

```
Author: Joe White <joewhite@mysite.com> 
```

因此，任何拥有回购副本的人都可以使用该信息，因为它充当标识符。

但是，垃圾邮件机器人可能看不到您的电子邮件，除非您使用 Gitweb 或 GitHub 之类的服务通过*Web 界面*提供您的存储库（仅将其放在 Internet 上并不能做到这一点）。

我想你可以填写一个假的电子邮件地址或使用一个空字符串或空格或其他东西（我认为 Git 不会检查电子邮件的格式或有效性），但如果克隆 repo 的人需要发送电子邮件，那么电子邮件很有用你一个补丁或以某种方式联系你。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-05T17:54:29.477

GitHub 有一篇名为[Keeping your email address private](https://help.github.com/articles/keeping-your-email-address-private)的帮助文章，开头是：

> Git 要求您标识自己的身份才能进行提交，但您可以使用虚假地址隐藏您的联系信息。Git 本身并不关心电子邮件是否有效。
> 
> 很高兴知道：虽然 Git 不在乎，但如果您的提交没有有效的电子邮件地址，某些项目可能不会接受您的贡献，因此您需要在遵循这些说明之前研究您的项目的贡献政策。
> 
> GitHub 没有收到很多垃圾邮件被发送到 Git 提交电子邮件地址的报告，但如果您对此感到担心，本指南应该可以帮助您解决这些问题。

该指南包含如何配置 Git 和 GitHub 以使用假地址的步骤。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-05-22T20:52:31.077

是的，上面的答案是正确的......除非您通常希望所有项目都使用相同的电子邮件地址，然后您将使用以下命令：

```
git config --global user.email "me@email.com" 
```

您还可以在用户部分的主目录中编辑 .gitconfig 文件。

您可以通过执行不带全局选项的相同命令来为特定项目指定不同的电子邮件。

另外，我建议如果提交到公共区域，您可以混淆您的电子邮件：

```
briancolfer(at)comcast.net 
```

举个例子。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-09-08T11:21:54.693

**数百万 GitHub 提交电子邮件“泄露”**

[https://github.com/cirosantilli/all-github-commit-emails](https://github.com/cirosantilli/all-github-commit-emails)从 GitHub 档案中提取[https://www.githubarchive.org](https://www.githubarchive.org)导出提交。

GitHub Archive 从 GitHub 的事件 API 获取数据：[https](https://developer.github.com/v3/activity/events/types/#pushevent) ://developer.github.com/v3/activity/events/types/#pushevent并每小时将其导出到 Google BigQuery，这样更易​​于查询。

电子邮件曾经显示在 type 的事件上`PushEvent`，但在我这样做之后它们就停止了。

我认为提交电子邮件不会显示在 GitHub 的 Web 界面上的任何地方（除了您在 GitHub 个人资料中设置的电子邮件，并且仅显示 2022 年的登录用户），因此任何收集都受到 API 速率限制的限制。TODO：从头开始通过 API 收集 100 万封电子邮件需要多少时间。

**使用 API 获取某人的提交电子邮件的实用方法**

```
ghmail() { curl "https://api.github.com/users/$1/events/public" | grep email; }
ghmail cirosantilli 
```

或访问：[https ://api.github.com/users/cirosantilli/events/public](https://api.github.com/users/cirosantilli/events/public)

还有：

*   应用程序：[https ://github.com/mmautner/github-email-thief](https://github.com/mmautner/github-email-thief)
*   更高级的脚本：[https ://github.com/hodgesmr/FindGitHubEmail](https://github.com/hodgesmr/FindGitHubEmail)

**Git 提交数据结构具有明确的作者和提交者电子邮件字段**

如图所示：[git commit 对象数据结构的文件格式是什么？](https://stackoverflow.com/questions/22968856/what-is-the-file-format-of-a-git-commit-object-data-structure/37438460#37438460)

因此很明显，此信息默认添加到提交中。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-05-12T16:05:23.710

您可以追溯更改作者姓名、电子邮件等。请注意，执行以下操作可能会破坏您的历史记录。

```
#!/bin/sh

git filter-branch --env-filter '

an="$GIT_AUTHOR_NAME"
am="$GIT_AUTHOR_EMAIL"
cn="$GIT_COMMITTER_NAME"
cm="$GIT_COMMITTER_EMAIL"

if [ "$GIT_COMMITTER_EMAIL" = "your@email.to.match" ]
then
    cn="Your New Committer Name"
    cm="Your New Committer Email"
fi
if [ "$GIT_AUTHOR_EMAIL" = "your@email.to.match" ]
then
    an="Your New Author Name"
    am="Your New Author Email"
fi

export GIT_AUTHOR_NAME="$an"
export GIT_AUTHOR_EMAIL="$am"
export GIT_COMMITTER_NAME="$cn"
export GIT_COMMITTER_EMAIL="$cm"
' 
```

取自[这里](http://help.github.com/change-author-info/)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-01-16T14:48:22.813

GitHub 有一个关于[设置电子邮件地址的帮助部分。](https://help.github.com/articles/setting-your-email-in-git)

具体来说，它说：

> 很高兴知道：您不必提供有效的电子邮件。如果您担心垃圾邮件，请改用虚假电子邮件。user@example.com 是一种常见的做法。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-05-22T12:30:49.460

是的，您的电子邮件地址（如 中指定`git config user.email`）将在 GitWeb 等 Web 界面中可见。此外，每个人都可以通过克隆您的存储库来了解您的电子邮件地址，尽管这可能仍然远远超出垃圾邮件机器人。不过，没有人强迫您使用真实的电子邮件地址。如果没有给出，Git 将自动设置一个构造的电子邮件地址。在我的机器上，没有`user.email`它显示“Foo <foo@daughter.(none)>”的提交。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-04-16T22:54:14.623

> 如果我通过 GitHub 公开我的存储库，我的电子邮件地址是否对所有人可见

注意：您还可以通过本地**[gitweb](https://git-scm.com/docs/gitweb)**（Git 存储库的 Web 前端，与常规 Git 发行版一起打包，并且可以使用[安装）使您的存储库](https://stackoverflow.com/a/15106213/6309)*在本地*可用。[`git instaweb`](https://stackoverflow.com/a/15106213/6309)

在 Git 2.32（2021 年第 2 季度）中，`gitweb`“学习了”**电子邮件隐私**“功能来编辑在各个页面上看起来像电子邮件地址的字符串。

请参阅[Georgios Kontaxis ( ) 的](https://github.com/kontaxis)[提交 0996dd3](https://github.com/git/git/commit/0996dd3d6dbcc132cf212f3420b89947fd9cc2ba)（2021 年 3 月 28 日[）](https://github.com/kontaxis)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 a9414b8](https://github.com/git/git/commit/a9414b86ac31e21fa4d647cf1689935d5c56d279))^(中，2021 年 4 月 13 日）)[`kontaxis`](https://github.com/kontaxis)
^([`gitster`](https://github.com/gitster))

> ## [`gitweb`](https://github.com/git/git/commit/0996dd3d6dbcc132cf212f3420b89947fd9cc2ba)：添加“电子邮件隐私”功能以编辑电子邮件地址
> 
> ^(签字人：Georgios Kontaxis)
> ^(签字人：Eric Wong)
> ^(签字人：Ævar Arnfjörð Bjarmason)

> Gitweb 从 Git 日志中提取内容并使其可以通过 HTTP 访问。
> 因此，在提交中找到的电子邮件地址会暴露给网络爬虫，并且它们可能不尊重`robots.txt`.
> 这可能会导致不请自来的消息。
> 
> 引入“电子邮件隐私”功能，从生成的 HTML 内容中编辑电子邮件地址。
> 具体来说，从 Git 日志的作者/提交者和评论部分检索到的模糊地址。
> 该功能默认关闭。
> 
> 此功能不会阻止某人下载未经编辑的提交日志，例如，通过克隆存储库并从中提取信息。
> 它旨在阻止网络爬虫轻松、大量收集电子邮件地址。

`gitweb.conf`现在在其[手册页](https://github.com/git/git/blob/0996dd3d6dbcc132cf212f3420b89947fd9cc2ba/Documentation/gitweb.conf.txt#L754-L764)中包含：

> ## `email-privacy`
> 
> 从生成的 HTML 等内容中编辑电子邮件地址。这会掩盖从 Git 日志的作者/提交者和评论部分检索到的电子邮件地址。
> 它旨在阻止收集和滥用地址的网络爬虫。这样的爬虫可能不尊重`robots.txt`。
> 请注意，用户和用户工具也会将地址视为已编辑。如果 Gitweb 不是工作流中的最后一步，那么后续步骤可能会因为他们收到的编辑信息而行为不端。
> 默认禁用。

# c# - Visual Studio 2010 和 C# v.4

> ID：897593
> 
> 赞同：0
> 
> 时间：2009-05-22T12:26:13.353
> 
> 标签：c#, .net, visual-studio

几天前 VS 2010 进入 Beta 测试，通常使用新的 Visual Studio，我们得到新的 C#。

由于 VS 和 .NET 4 处于 Beta 阶段，这是否意味着 C# 版本 4 即将完成？

编辑：VS 2010 beta 中是否包含 C# v4 Beta？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-22T12:32:13.387

C# 4.0 包含在 VS2010 测试版中（您可以立即尝试；“动态”、方差等工作），并将在 VS2010 RTM 中发布，并且几乎可以肯定（我假设）在独立的 .NET 4.0 RTM 中发布 - 但是**当**那个时候完全取决于微软；特别是，[Soma 强调](http://blogs.msdn.com/somasegar/archive/2009/05/18/visual-studio-2010-and-net-fx-4-beta-1-ships.aspx)了确保质量和性能正确的必要性，我鼓励他们不要急于任何一点（我希望它快速稳定；-p）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-22T12:28:44.347

据我所知，Visual Studio 2010 的正式发布日期尚未公布。我们知道 .NET 4.0 和 C# 4.0 将同时发布，但无论何时发生。对发布日期的合理估计可能是 2010 年第一季度。（该团队似乎在按部就班，但不会早于明年年初发布。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T12:56:29.237

当前的 beta C# 4.0 大部分都可以工作，而且看起来几乎是最终产品，所以我预计正式发布时间是今年 10 月/11 月。

Microsoft 已经在任何可用的会议上积极展示 2010 年。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-23T16:07:50.347

没有明确的发布日期，这实际上取决于他们在测试版中发现了多少问题。但是，没有理由不使用测试版来开发将来发布的软件，因为从现在到最终版本之间 API 几乎没有变化。

# regex - 关于正则表达式的证明

> ID：897595
> 
> 赞同：22
> 
> 时间：2009-05-22T12:26:41.027
> 
> 标签：regex, types, proof, coq, agda

有谁知道以下任何例子？

1.  证明助手（例如[Coq](http://en.wikipedia.org/wiki/Coq) ）中关于[正则表达式](http://en.wikipedia.org/wiki/Regular_expression#Basic_concepts)（可能通过[反向引用](http://en.wikipedia.org/wiki/Regular_expression#Patterns_for_non-regular_languages)扩展）的证明开发。
2.  关于正则表达式的依赖类型语言（例如[Agda ）的程序。](http://wiki.portal.chalmers.se/agda/agda.php)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-08-14T14:48:05.840

[Certified Programming with Dependent Types](http://adam.chlipala.net/cpdt/html/MoreDep.html)有一节介绍如何创建经过验证的正则表达式匹配器。[Coq Contribs](https://coq.inria.fr/contribs)有一个可能有用的[自动机贡献。](http://www.lix.polytechnique.fr/coq/pylons/coq/pylons/contribs/view/Automata/trunk)[Jan-Oliver Kaiser 在他的学士论文](http://www.ps.uni-saarland.de/~jokaiser/bachelor.php)中将正则表达式、有限自动机和 Coq 中的 Myhill-Nerode 表征之间的等价形式化了。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-12-24T22:26:35.307

Moreira、Pereira 和 de Sousa，[关于 Coq 中 Kleene 代数的机械化，](http://www.ncc.up.pt/kat/mech_ka_in_coq.pdf)给出了 Coq 中正则表达式的 Antimirov 导数的良好验证构造。从这个结构中读取 CFA 并计算正则表达式的交集非常容易。

我不确定为什么要将 Coq 与依赖类型编程分开：Coq 本质上是在具有归纳类型的多态依赖类型 lambda 演算中编程（即 CIC，归纳构造的演算）。

我从来没有听说过在依赖类型语言中正则表达式的形式化，也没有听说过类似 Antimirov 的带有回溯的正则表达式的衍生物，但是 Becchi & Crowley, [Extending Finite Automata to Efficiently Match Perl-Compatible Regular Expressions](http://www.arl.wustl.edu/~pcrowley/a25-becchi.pdf)提供一个与 Perl 类似的正则表达式语言相匹配的有限状态自动机的概念。在不久的将来，这可能对形式化者有吸引力。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-06-14T07:40:00.783

请参阅[Perl 正则表达式匹配是 NP-Hard](http://perl.plover.com/NPC/)

> 当允许正则表达式具有反向引用时，正则表达式匹配是 NP-hard。
> 
> [减少 3-CNF-SAT 到 Perl 正则表达式匹配](http://perl.plover.com/NPC/NPC-3SAT.html)
> 
> [...] 3-CNF-SAT 是 NP 完全的。如果有一种有效的（多项式时间）算法来计算正则表达式是否匹配某个字符串，我们可以使用它来快速计算 3-CNF-SAT 问题的解决方案，并扩展为背包问题的解决方案，旅行商问题等

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-06-26T11:34:29.153

我不知道有任何自己处理正则表达式的开发。

然而，有限自动机是相关的，因为[NFA](http://en.wikipedia.org/wiki/Nondeterministic_finite_state_machine)是匹配这些正则表达式的标准方法，已在[NuPRL](http://www.cs.cornell.edu/Info/Projects/NuPRL/nuprl.html)中进行了研究。看看：[Robert L. Constable、Paul B. Jackson、Pavel Naumov、Juan Uribe。 *建设性地形式化自动机理论*](http://homepages.inf.ed.ac.uk/pbj/papers/auto.ps.gz)。

您是否有兴趣通过[代数](http://en.wikipedia.org/wiki/Semigroup#History)来处理这些形式语言，尤其是。在开发[有限半群理论](http://portal.acm.org/citation.cfm?id=576708)的过程中，您可以考虑使用各种定理证明中开发的[许多](http://coq.inria.fr/coq/distrib/current/contribs/Algebra.html)[代数库，其中](http://www.mizar.org/library/)[一个在有限设置中特别有效](http://www.msr-inria.inria.fr/Projects/math-components/math-components-index)。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-07-26T18:34:28.453

证明助手 Isabelle/HOL 提供了许多关于正则表达式的形式化证明（没有反向引用）： [http ://afp.sourceforge.net/browser_info/devel/HOL/Regular-Sets/](http://afp.sourceforge.net/browser_info/devel/HOL/Regular-Sets/)

（[这](http://www4.informatik.tu-muenchen.de/~krauss/papers/rexp.pdf)是作者关于他们到底做了什么的论文）。

另一种方法是通过[Myhill-Nerode Theorem](http://en.wikipedia.org/wiki/Myhill%E2%80%93Nerode_theorem)表征正则表达式： [http ://www.dcs.kcl.ac.uk/staff/urbanc/Publications/itp-11.pdf](http://www.dcs.kcl.ac.uk/staff/urbanc/Publications/itp-11.pdf)

# php - PHP手工序列化麻烦

> ID：897598
> 
> 赞同：0
> 
> 时间：2009-05-22T12:27:19.483
> 
> 标签：php, xml-serialization

在我的任务中编写一种对象序列化（用于 XML 输出）会非常好。我已经完成了，但不知道如何避免递归链接。

问题是某些对象必须具有公共（！）属性，并链接到它们的父母（这真的很必要）。当我尝试序列化一个聚合一些子对象的父对象时 - 链接到父对象的子对象会永远递归。

有没有解决方案来处理 print_r() 这样的递归而不需要黑客攻击？我不能使用诸如“if ($prop === 'parent')”之类的东西，因为有时有超过 1 个链接指向来自不同上下文的父母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T12:40:00.190

编写您自己的序列化函数，并始终将已处理项目的列表传递给它。由于 PHP5（我假设您使用的是 php5）总是复制对对象的引用，您可以执行以下操作：

```
public function __sleep() {
    return $this->serialize();
}
protected function serialize($processed = array()) {
    if (($position = array_search($this, $processed, true)) !== false) {
        # This object has already been processed, you can use the
        # $position of this object in the $processed array to reference it.
        return;
    }
    $processed[] = $this;
    # do your actual serialization here
    # ...
} 
```

# javascript - 学习 Javascript 与 jQuery

> ID：897603
> 
> 赞同：10
> 
> 时间：2009-05-22T12:29:20.150
> 
> 标签：javascript, jquery

我得到了 Wrox.Beginning.JavaScript.3rd.Edition 并想从头开始学习它，然后我的老板过来说为什么要麻烦，学习 jQuery。尽管我是新手并且在 ASP.net、vb.net、一些 C# 和基本 HTML 方面知识有限，但我能理解 jQuery 并使用它吗？！

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-05-22T12:32:02.263

jQuery*是*JavaScript。我认为你在正确的道路上。学好javascript，你就能更好地使用jQuery。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-22T12:33:22.653

那么你的问题是什么？JQuery 是一个建立在JavaScript*语言*之上的*框架。*要自信地使用 JQuery，您应该熟悉 JavaScript。JQuery 包含一堆有用的模式和实用程序，它们掩盖了浏览器的不兼容性。使用 JavaScript 框架是有意义的，因为它可以让您专注于您的问题，而不是浏览器的 JavaScript 实现问题。

 *有关 JavaScript 框架的更多详细信息，请参阅 SO 问题[»Which Javascript framework (jQuery vs Dojo vs ...)？«](https://stackoverflow.com/questions/394601/which-javascript-framework-jquery-vs-dojo-vs)。学习 JavaScript，[学习好的部分](http://oreilly.com/catalog/9780596517748/)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-22T17:40:48.597

如果你的经理要求你显示和隐藏一些元素，或者淡入和淡出几个图像，或者通过 ajax 请求一些数据并显示它，那么学习 jquery 及其 api 可能就是你所需要的。

但是，如果您（或您的经理）关心性能、可维护性、代码重用，并且通常了解 *ell 在“回到那里”发生了什么，那么学习语言本身是一个安全的选择。

我建议获取一份[JavaScript: The Definitive Guide](https://rads.stackoverflow.com/amzn/click/com/0596101996)的副本，它将让您大致了解它是什么以及如何使用它等等。当您使用它时，我还建议使用 John Resig 的 Pro Javascript 技术。这家伙真的很了解他的 javascript（适用于 mozilla、jQuery 的作者等）。

至于 jQuery，你真的不需要买书。只需浏览 API 并查看其源代码即可。也许你不会明白太多，但是有一些很酷的东西会让你思考。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-22T12:33:33.930

完全有可能学习 jQuery，而无需先学习所有的 javascript。但是，要提高效率并扩展插件等的功能，您将需要了解 javascript。

我建议你两者都做一点。继续学习 Javascript，但是当您想要实现功能时，请使用 jQuery 库。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-23T02:22:41.847

我会说这种说法类似于您阅读 C#/VB.Net 书籍并让您的老板说“不要打扰，只要学习 ASP.Net”。没有前者，你真的不会从后者中得到太多。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-22T18:23:22.583

也许你的老板正试图为你节省一些时间来学习 Javascript 的基础知识并让你立即开始学习 jQuery，但我认为这不是一个好主意。

了解 javascript 的基础知识是成功使用 jQuery 的关键。jQuery 为问题（跨浏览器问题等）提供了快捷方式和解决方案，但它本身并不是一门语言。

我的建议是，学习 javascript，了解如何在不同浏览器中处理事件，插入 DOM，然后开始使用 jQuery。你会更加欣赏它，并成为一个更好的编码器。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-22T18:27:35.977

如果您已经了解 C#，那么您将在学习 Javascript 方面处于领先地位，并且学习它应该不会太难。不过，我会坚持使用那本 Javascript 书，因为您需要了解 Javascript 才能使用 jQuery。一旦你熟悉了 Javascript，就继续学习 jQuery。jQuery 文档非常有用，几乎可以回答您的任何问题。

祝你学习顺利，这将是值得的。

[jQuery 文档](http://docs.jquery.com/Main_Page)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-22T12:34:05.553

jQuery 是由 javascript 制成的。:)

阅读 jQuery 的源代码以增强您对 javascript 的整体理解将是一个**非常好的主意...**

一定要同时学习 :)
***祝你好运，玩得开心。***

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-05-22T12:34:40.137

JQuery 为与 DOM 元素交互提供了一个很好的抽象层。你可以用它快速轻松地做很多有趣的事情。但是 JQuery 可能不会为您做很多事情。为此，您需要使用常规 JavaScript。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-05-22T12:38:23.000

jQuery 消除了对许多不良 Javascript 习惯的需要。但是，您经常需要了解的不仅仅是 jQuery，才能完成重要的工作。

您需要同时学习这两种方法，但请尝试养成基于 jQuery 的习惯。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-12-09T21:11:15.260

库总是包含不必要的复杂性，但如果它们不太臃肿或已经存在于最终用户的系统中，它们可以省去一些麻烦。最好的使用方法是在使用 jquery 的同时学习 javascript，然后慢慢卸下使用 jquery 的拐杖。虽然它很强大，但它确实会增加大量开销、不必要的复杂性和潜在的滥用机会，就像闪存一样。没有银弹。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-11-07T12:15:09.217

你在做什么？- 当然纯 JavaScript 更好 =)

# ruby-on-rails - Ruby on Rails：如何在后台运行？

> ID：897605
> 
> 赞同：31
> 
> 时间：2009-05-22T12:29:34.517
> 
> 标签：ruby-on-rails, ruby, background-process

当创建新资源并且需要在资源准备好之前进行一些**冗长的处理**时，我如何将该处理发送到*不会阻止*当前请求或其他流量到我的网络应用程序**的后台？**

 *在我的模型中：

```
class User < ActiveRecord::Base
 after_save :background_check

 protected
 def background_check
  # check through a list of 10000000000001 mil different
  # databases that takes approx one hour :)
  if( check_for_record_in_www( self.username ) )
    # code that is run after the 1 hour process is finished.
    user.update_attribute( :has_record )
  end
 end
end 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-05-22T14:38:27.423

您绝对应该查看以下 Railscast：

*   [http://railscasts.com/episodes/127-rake-in-background](http://railscasts.com/episodes/127-rake-in-background)
*   [http://railscasts.com/episodes/128-starling-and-workling](http://railscasts.com/episodes/128-starling-and-workling)
*   [http://railscasts.com/episodes/129-custom-daemon](http://railscasts.com/episodes/129-custom-daemon)
*   [http://railscasts.com/episodes/366-sidekiq](http://railscasts.com/episodes/366-sidekiq)

他们解释了如何以各种可能的方式在 Rails 中运行后台进程（有或没有队列......）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2011-03-11T03:08:51.920

我一直在尝试使用“delayed_job” gem，因为它可以与 Heroku 托管平台一起使用，而且设置起来非常容易！

将 gem 添加到 Gemfile, `bundle install`, `rails g delayed_job`,`rake db:migrate` 然后启动队列处理程序；

```
RAILS_ENV=production script/delayed_job start 
```

你有一个方法调用，这是你漫长的过程，即

```
company.send_mail_to_all_users 
```

你把它改成；

```
company.delay.send_mail_to_all_users 
```

查看 github 上的完整文档：[https ://github.com/collectiveidea/delayed_job](https://github.com/collectiveidea/delayed_job)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-22T12:44:31.710

启动一个单独的进程，这可能是最容易完成的`system`，在您传递的命令的末尾添加一个“nohup”并附加一个“&”。（确保命令只是一个字符串参数，而不是参数列表。）

您想这样做有几个原因，而不是尝试使用线程：

1.  在进行 I/O 时，Ruby 的线程可能有点棘手。您必须注意您所做的某些事情不会导致整个过程阻塞。

2.  如果你用不同的名字运行一个程序，它很容易在“ps”中识别出来，所以你不会意外地认为它是一个 FastCGI 后端失控或什么的，然后杀死它。

实际上，您启动的进程应该是“去魔化的”，请参阅[Daemonize](http://daemons.rubyforge.org/)类以寻求帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-22T12:57:44.350

理想情况下，您希望使用现有的后台作业服务器，而不是自己编写。这些通常会让你提交一份工作并给它一个唯一的密钥；然后，您可以使用该密钥定期向作业服务器查询您的作业状态，而不会阻止您的 web 应用程序。这是对各种选项的[一个很好的总结。](http://www.tobinharris.com/past/2009/3/9/6-ways-to-run-background-jobs-in-rubyonrails/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-22T16:26:14.450

我喜欢使用 backgroundrb，它很好，它可以让你在长时间的过程中与它进行通信。因此，您可以在 Rails 应用程序中获得状态更新

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-03-29T14:47:38.700

我认为[spawn](http://github.com/tra/spawn)是一种很好的方式来分叉你的进程，在后台进行一些处理，并向用户显示这个处理已经开始的一些确认。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-22T12:58:25.067

关于什么：

```
def background_check
   exec("script/runner check_for_record_in_www.rb #{self.username}") if fork == nil
end 
```

程序 " `check_for_record_in_www.rb`" 然后将在另一个进程中运行，并可以访问 ActiveRecord，从而能够访问数据库。

# c++ - 我如何知道一个线程是否在 Windows CE 下被挂起

> ID：897614
> 
> 赞同：7
> 
> 时间：2009-05-22T12:31:59.630
> 
> 标签：c++, c, multithreading, windows-mobile

我可以在 Windows CE 下使用 C 或 Visual C++ 获得线程挂起计数，而无需调用恢复或挂起函数吗？我能看到的唯一方法是

```
int Count = SuspendThread(ThreadHandle);  
ResumeThread(ThreadHandle); 
```

这有几个问题，首先，我宁愿不挂起线程，其次，如果线程正在运行内核代码，挂起可能会失败。我可以解决这个问题，但我觉得应该有一个更优雅的解决方案。我也可以使用反转它

```
int Count = ResumeThread(ThreadHandle);
SuspendThread(ThreadHandle); 
```

但这也有类似的问题。从句柄获取挂起计数的任何好的替代方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-22T13:22:31.413

我有一个组合解决方案。使用 WaitForSingleObject() 来确定线程是否被挂起。

如果没有挂起，那么挂起计数显然是0。

如果它被挂起，调用 SuspendThread() 来获取挂起计数是安全的。由于它已经暂停，您不会停止任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-23T16:47:15.500

**你永远不应该在任何平台上挂起任何线程。**

相反，您应该在线程代码中添加同步点，明确等待标志在允许继续之前发出信号。这样你就*知道*它会在哪里暂停，或者至少知道它会在安全点暂停。

任何程序员都应该在任何平台上彻底禁止以下线程操作：

*   暂停
*   恢复（因为如果你不能挂起线程就不需要它）
*   杀死/中止

你永远不应该从外部强行将你的意志强加于一根线上。你无法保证它在做什么，它当前锁定了什么样的资源。

始终以协作模式编写线程。你的线程应该知道它的周围环境，并屈服于外部世界的意愿，要么以一种有序的方式退出，要么暂停直到它可以安全地继续。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T13:17:17.913

可能使用[WaitForSingleObject](http://msdn.microsoft.com/en-us/library/aa450988.aspx)您可以检查线程是否已挂起，但您无法检索挂起计数器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-23T16:42:07.570

即使线程处于活动状态，您仍然会收到 WAIT_TIMEOUT 结果，这是因为线程仅在完成时发出信号，而不是在运行时发出信号。

也就是说 WaitForSingleObject(hThread,INFINITE) 一直等到线程完成。

# c# - 在 C# 中检查空值对象的最佳语法是什么

> ID：897620
> 
> 赞同：4
> 
> 时间：2009-05-22T12:32:59.440
> 
> 标签：c#

总觉得写的不对

```
if (MyObject)
    // do something 
```

或者反过来

```
if (!MyObject)
    // do something 
```

但是，您可以争辩说它没有那么冗长

```
if (MyObject != null)
    // do something

if (MyObject == null)
    // do something 
```

是否有任何**非主观的**理由使用其中一个？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-05-22T12:35:59.700

在 C# 中，你不能这样做

```
if (MyObject) 
```

检查`null`s。这是一个编译时错误（如果该类没有隐式布尔转换运算符）。

```
if (!MyObject) 
```

如果类没有重载`operator !`以返回布尔值（或可以隐式转换为布尔值的值），则也是无效的。

所以你必须坚持`obj == null`and `obj != null`。

总而言之，非主观原因是能够编译您的代码！

### 更新（故事）：

曾几何时，在古 C 语言中，没有`bool`类型。考虑了零，并且考虑`false`了每个非零值`true`。你可以写

```
while(1) { } 
```

创建一个无限循环。
你也可以做类似的事情

```
int n  = 10;
while (n--) { } 
```

有一个执行`n`时间的循环。这个策略的问题是：

```
int x = 10;
if (x = 0) { // bug: meant to be x == 0
} 
```

你错过了一个字符并且你创建了一个错误（大多数现代 C 编译器会在这个语句上发出警告，但它仍然是有效的 C）。

这就是为什么你会看到类似的代码

```
if (5 == variable) 

if (NULL == pObj) 
```

在许多地方，因为它不容易出现上述错误。

C# 设计者决定**要求***布尔*表达式作为 , 等的条件，`if`并且`while`不允许将类型（除非他们明确声明重载运算符，这是不鼓励的）强制转换为布尔值以减少出错的机会。所以像：

```
object x = null;
if (x) { }

int y = 10;
if (y) { }
while (y--) { } 
```

在 C 中有效的，**根本不要在 C# 中编译**。
无论如何，这不是风格或协议的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-22T12:43:41.367

> 是否有任何非主观的理由使用其中一个？

(1) 和 (2) 不编译的事实是一个足以不使用它们的非主观原因。

所以我们剩下（3）和（4）：

```
if (MyObject != null)
    // do something

if (MyObject == null)
    // do something 
```

这取决于您是否要在 MyObject 为 null (4) 或不为 null (3) 时执行某项操作。**显然，这不是一种风格选择。**总是采用相同的“风格”是荒谬的，因为如果你想要*其他*条件，你必须这样做：

```
 if (MyObject == null) // style policy
    {
        // nothing here
    }
    else
    {
        // do something
    } 
```

这不完全是我所说的可读代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-22T12:35:31.727

在我看来，在这种情况下有点冗长是一件*好事*。如果你被允许同时做这两件事，情况就是这样，这实际上是不可能的，正如 Mehrdad 指出的那样。“隐式”空值检查（即`if (MyObject)`）甚至不能在 C# 中编译。

```
if (MyObject == null)
    // do something 
```

然而，这与使用大于 0 的整数进行检查的情况非常相似。这里的两个等效选项（在 C 中编译和运行都很好，但在C# 中*不能*正常运行，除非我弄错了）是：

```
if (myInt)
    // do something 
```

和

```
if (myInt > 0)
    // do something 
```

我总是在这里选择第二个选项，纯粹是为了清楚起见（它不会被误认为是布尔值！），尽管您经常会在代码中看到前一个“隐式”检查。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-22T12:37:08.057

在 C# 中，if 语句需要一个布尔表达式。

因此，在上面的示例中，使用`if(myObject)`来测试 null 实际上是错误的。你需要做的更详细`if(myObject==null)`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-22T13:04:25.490

如果你只想为一个对象设置一个默认值，如果它是空的，你可以使用 c# 3.0 ?? 操作员。

编码：

```
MyType _myObject
if (SomeObject==null)
  _myObject = defaultObjectValue
else
  _myObject = SomeObject 
```

可以写成

```
_myObject = SomeObject ?? defaultObjectValue; 
```

这基本上意味着如果 SomeObject 存在，则使用它，如果不存在，则使用默认值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-22T12:36:21.117

这取决于个人喜好。理想情况下，在 C# 中，要检查`null`，使用以下语法 -

```
if (MyObject != null)
    //Do Something. 
```

# ruby - Ruby 中真正便宜的命令行选项解析

> ID：897630
> 
> 赞同：116
> 
> 时间：2009-05-22T12:35:30.213
> 
> 标签：ruby

编辑：请，*请*，**请**在回复之前阅读本文底部列出的两个要求。人们不断发布他们的新 gem 和库之类的东西，这些显然不符合要求。

有时我想非常便宜地将一些命令行选项破解成一个简单的脚本。一种有趣的方法是，无需处理 getopts 或解析或类似的事情：

```
...
$quiet       = ARGV.delete('-d')
$interactive = ARGV.delete('-i')
...
# Deal with ARGV as usual here, maybe using ARGF or whatever. 
```

这不是正常的 Unix 选项语法，因为它会接受选项非选项命令行参数，如“ `myprog -i foo bar -q`”，但我可以接受。（有些人，比如 Subversion 开发人员，更喜欢这个。有时我也喜欢。）

仅存在或不存在的选项不能比上述更简单地实现。（一个赋值，一个函数调用，一个副作用。）是否有同样简单的方法来处理带有参数的选项，例如“`-f` *文件名*”？

### 编辑：

我之前没有提出的一点，因为直到 Trollop 的作者提到该库适合“在一个 [800 行] 文件中”，我才明白我不仅要寻找干净语法，但对于具有以下特征的技术：

1.  整个代码可以包含在脚本文件中（不会压倒实际的脚本本身，可能只有几十行），因此可以`bin`在任何使用标准 Ruby 1.8 的系统上将单个文件放入目录中.[5-7]安装使用。如果你不能编写一个没有 require 语句的 Ruby 脚本，并且解析几个选项的代码不到十几行，那么你就达不到这个要求。

2.  代码小而简单，以至于人们可以记住足够多的内容，以便直接输入可以实现这一目的的代码，而不是从其他地方剪切和粘贴。考虑一下您在没有 Internet 访问权限的防火墙服务器的控制台上的情况，并且您想将一个快速脚本组合在一起供客户端使用。我不了解你，但是（除了不符合上述要求之外）即使是 45 行简化的 micro-optparse 也不是我想做的事情。

* * *

## 回答 #1

> 赞同：236
> 
> 时间：2009-06-18T14:22:34.967

作为[Trollop](https://rubygems.org/gems/trollop)的作者，我无法相信人们认为在选项解析器中合理的东西。严重地。它令人难以置信。

为什么我必须制作一个扩展其他模块来解析选项的模块？为什么我必须继承任何东西？为什么我必须订阅一些“框架”才能解析命令行？

这是上面的 Trollop 版本：

```
opts = Trollop::options do
  opt :quiet, "Use minimal output", :short => 'q'
  opt :interactive, "Be interactive"
  opt :filename, "File to process", :type => String
end 
```

就是这样。`opts`现在是带有键`:quiet`、`:interactive`和的哈希`:filename`。你可以用它做任何你想做的事。你会得到一个漂亮的帮助页面，格式适合你的屏幕宽度，自动短参数名称，类型检查......你需要的一切。

它是一个文件，因此如果您不想要正式的依赖关系，可以将它放在您的 lib/ 目录中。它有一个易于上手的最小 DSL。

LOC 每个选项的人。这很重要。

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2009-05-23T03:35:42.357

我和你一样厌恶`require 'getopts'`，主要是因为令人敬畏的是`OptionParser`：

```
% cat temp.rb                                                            
require 'optparse'
OptionParser.new do |o|
  o.on('-d') { |b| $quiet = b }
  o.on('-i') { |b| $interactive = b }
  o.on('-f FILENAME') { |filename| $filename = filename }
  o.on('-h') { puts o; exit }
  o.parse!
end
p :quiet => $quiet, :interactive => $interactive, :filename => $filename
% ruby temp.rb                                                           
{:interactive=>nil, :filename=>nil, :quiet=>nil}
% ruby temp.rb -h                                                        
Usage: temp [options]
    -d
    -i
    -f FILENAME
    -h
% ruby temp.rb -d                                                        
{:interactive=>nil, :filename=>nil, :quiet=>true}
% ruby temp.rb -i                                                        
{:interactive=>true, :filename=>nil, :quiet=>nil}
% ruby temp.rb -di                                                       
{:interactive=>true, :filename=>nil, :quiet=>true}
% ruby temp.rb -dif apelad                                               
{:interactive=>true, :filename=>"apelad", :quiet=>true}
% ruby temp.rb -f apelad -i                                              
{:interactive=>true, :filename=>"apelad", :quiet=>nil} 
```

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2009-06-19T10:47:39.543

这是我通常使用的标准技术：

```
#!/usr/bin/env ruby

def usage(s)
    $stderr.puts(s)
    $stderr.puts("Usage: #{File.basename($0)}: [-l <logfile] [-q] file ...")
    exit(2)
end

$quiet   = false
$logfile = nil

loop { case ARGV[0]
    when '-q' then  ARGV.shift; $quiet = true
    when '-l' then  ARGV.shift; $logfile = ARGV.shift
    when /^-/ then  usage("Unknown option: #{ARGV[0].inspect}")
    else break
end; }

# Program carries on here.
puts("quiet: #{$quiet} logfile: #{$logfile.inspect} args: #{ARGV.inspect}") 
```

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2013-11-21T16:33:13.393

既然似乎没有人提到它，而且标题*确实*提到了*廉价*的命令行解析，为什么不让 Ruby 解释器为您完成这项工作呢？如果您通过`-s`开关（例如在您的 shebang 中），您将免费获得非常简单的开关，分配给单字母全局变量。这是您使用该开关的示例：

```
#!/usr/bin/env ruby -s
puts "#$0: Quiet=#$q Interactive=#$i, ARGV=#{ARGV.inspect}" 
```

这是我将其另存为`./test`并对其进行 chmod时的输出`+x`：

```
$ ./test
./test: Quiet= Interactive=, ARGV=[]
$ ./test -q foo
./test: Quiet=true Interactive=, ARGV=["foo"]
$ ./test -q -i foo bar baz
./test: Quiet=true Interactive=true, ARGV=["foo", "bar", "baz"]
$ ./test -q=very foo
./test: Quiet=very Interactive=, ARGV=["foo"] 
```

详情请参阅`ruby -h`。

那*必须*尽可能便宜。如果您尝试使用类似的开关，它将引发 NameError `-:`，因此那里有一些验证。当然，在非开关参数之后不能有任何开关，但如果你需要一些花哨的东西，你真的应该至少使用 OptionParser。事实上，这种技术唯一让我恼火的是，当你访问一个未设置的全局变量时，你会得到一个警告（如果你启用了它们），但它仍然是错误的，所以它适用于一次性工具并且快速脚本。

FelipeC 在“[如何在 Ruby 中进行真正便宜的命令行选项解析](https://stackoverflow.com/questions/897630/really-cheap-command-line-option-parsing-in-ruby/20126651#comment83609042_20126651)”的评论中指出的一个警告是，您的 shell 可能不支持 3-token shebang；您可能需要替换`/usr/bin/env ruby -w`为您的 ruby​​ 的实际路径（如`/usr/local/bin/ruby -w`），或者从包装脚本或其他东西中运行它。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2011-03-19T20:51:11.280

我构建了[micro-optparse](http://florianpilz.github.com/micro-optparse/)来满足对简短但易于使用的选项解析器的明显需求。它的语法类似于 Trollop，并且只有 70 行。如果您不需要验证并且可以不使用空行，则可以将其减少到 45 行。我想这正是你要找的。

简短的例子：

```
options = Parser.new do |p|
  p.version = "fancy script version 1.0"
  p.option :verbose, "turn on verbose mode"
  p.option :number_of_chairs, "defines how many chairs are in the classroom", :default => 1
  p.option :room_number, "select room number", :default => 2, :value_in_set => [1,2,3,4]
end.process! 
```

`-h`使用or调用脚本`--help`将打印

```
Usage: micro-optparse-example [options]
    -v, --[no-]verbose               turn on verbose mode
    -n, --number-of-chairs 1         defines how many chairs are in the classroom
    -r, --room-number 2              select room number
    -h, --help                       Show this message
    -V, --version                    Print version 
```

它检查输入是否与默认值的类型相同，生成短访问器和长访问器，如果给出了无效参数，则打印描述性错误消息等等。

我通过使用每个选项解析器来[比较几个选项解析器来解决我遇到的问题。](https://github.com/florianpilz/CLI-Option-Parser-Examples)您可以使用这些示例和我的摘要来做出信息丰富的决定。随意将更多实现添加到列表中。:)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-05-22T14:51:20.923

我完全理解你为什么要避免 optparse - 它可能会得到太多。但是有一些更“轻量级”的解决方案（与 OptParse 相比）作为库提供，但足够简单，可以使单个 gem 安装变得有价值。

例如，查看[这个 OptiFlag 示例](http://optiflag.rubyforge.org/showMeTheLaughter.html)。只需几行即可进行处理。针对您的案例量身定制的略微截断的示例：

```
require 'optiflag'

module Whatever extend OptiFlagSet
  flag "f"
  and_process!
end 

ARGV.flags.f # => .. whatever .. 
```

也有[大量的定制示例](http://optiflag.rubyforge.org/examples.html)。我记得使用了另一个更简单的方法，但它现在已经逃脱了我，但如果我找到它，我会回来并在此处添加评论。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-07-11T17:37:24.970

这是我使用的非常非常便宜的参数：

```
def main
  ARGV.each { |a| eval a }
end

main 
```

所以如果你运行`programname foo bar`它调用 foo 然后是 bar。它对于一次性脚本很方便。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-02-19T03:04:43.047

这是我最喜欢的快速而肮脏的选项解析器：

```
case ARGV.join
when /-h/
  puts "help message"
  exit
when /-opt1/
  puts "running opt1"
end 
```

选项是正则表达式，因此“-h”也将匹配“--help”。

可读、易记、没有外部库和最少的代码。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-05-23T06:25:40.917

你有没有考虑过Wycats的[Thor ？](http://github.com/wycats/thor/tree/master)我认为它比 optparse 干净得多。如果您已经编写了一个脚本，则可能需要更多的工作来格式化它或为 thor 重构它，但它确实使处理选项非常简单。

这是自述文件中的示例片段：

```
class MyApp < Thor                                                # [1]
  map "-L" => :list                                               # [2]

  desc "install APP_NAME", "install one of the available apps"    # [3]
  method_options :force => :boolean, :alias => :optional          # [4]
  def install(name)
    user_alias = options[:alias]
    if options.force?
      # do something
    end
    # ... other code ...
  end

  desc "list [SEARCH]", "list all of the available apps, limited by SEARCH"
  def list(search = "")
    # list everything
  end
end 
```

Thor 自动映射命令如下：

```
app install myname --force 
```

这将转换为：

```
MyApp.new.install("myname")
# with {'force' => true} as options hash 
```

1.  从 Thor 继承以将类转换为选项映射器
2.  将其他无效标识符映射到特定方法。在这种情况下，将 -L 转换为 :list
3.  下面直接描述方法。第一个参数是使用信息，第二个参数是描述。
4.  提供任何其他选项。这些将从 - 和 - 参数编组。在这种情况下，添加了 --force 和 -f 选项。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-05-22T12:38:23.470

您可以尝试以下方法：

```
if( ARGV.include( '-f' ) )
  file = ARGV[ARGV.indexof( '-f' ) + 1 )]
  ARGV.delete('-f')
  ARGV.delete(file)
end 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-05-26T14:13:43.277

[特罗洛普](http://trollop.rubyforge.org/)很便宜。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-01-28T10:14:47.827

如果您想要一个简单的命令行解析器来处理键/值命令而不使用 gems：

但这**仅**在您始终拥有键/值对时才有效。

```
# example
# script.rb -u username -p mypass

# check if there are even set of params given
if ARGV.count.odd? 
    puts 'invalid number of arguments'
    exit 1
end

# holds key/value pair of cl params {key1 => value1, key2 => valye2, ...}
opts = {} 

(ARGV.count/2).times do |i|
    k,v = ARGV.shift(2)
    opts[k] = v # create k/v pair
end

# set defaults if no params are given
opts['-u'] ||= 'root'

# example use of opts
puts "username:#{opts['-u']} password:#{opts['-p']}" 
```

如果您不需要任何*检查*，您可以使用：

```
opts = {} 

(ARGV.count/2).times do |i|
    k,v = ARGV.shift(2)
    opts[k] = v # create k/v pair
end 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-07-13T18:40:05.570

这是我在大多数脚本顶部使用的代码片段：

```
arghash = Hash.new.tap { |h| # Parse ARGV into a hash
    i = -1                      
    ARGV.map{  |s| /(-[a-zA-Z_-])?([^=]+)?(=)?(.+)?/m.match(s).to_a }
     .each{ |(_,a,b,c,d)| h[ a ? "#{a}#{b}#{c}" : (i+=1) ] =
                             (a ? (c ? "#{d}" : true) : "#{b}#{c}#{d}") 
          }
    [[:argc,Proc.new  {|| h.count{|(k,_)| !k.is_a?(String)}}],
     [:switches, Proc.new {|| h.keys.select{|k| k[0] == '-' }}]
    ].each{|(n,p)| h.define_singleton_method(n,&p) }
} 
```

我也讨厌在我的快速而肮脏的脚本中需要额外的文件。我的解决方案非常接近您的要求。我在我的任何脚本的顶部粘贴了一个 10 行代码片段，它解析命令行并粘贴位置参数并切换到 Hash 对象（通常分配给我在下面的示例中命名为**arghash**的对象）。

这是您可能要解析的示例命令行...

> `./myexampleprog.rb -s -x=15 --longswitch arg1 --longswitch2=val1 arg2`

这将成为这样的哈希。

```
 { 
   '-s' => true, 
   '-x=' => '15', 
   '--longswitch' => true, 
   '--longswitch2=' => 'val1', 
   0 => 'arg1', 
   1 => 'arg2'
 } 
```

除此之外，Hash 中还添加了两个方便的方法：

*   `argc()` 将返回非开关参数的计数。
*   `switches()`将返回一个数组，其中包含存在的开关的键

这是为了允许一些快速而肮脏的东西，比如......

*   `arghash.argc == 2`验证无论传入 ( )中的开关如何，我都有正确数量的位置参数
*   通过它们的相对位置访问位置参数，无论开关是否出现在位置参数之前或穿插位置参数（例如，`arghash[1]`总是获取第二个非开关参数）。
*   支持命令行中的赋值开关，例如“--max=15”，可以通过`arghash['--max=']`它访问，给出示例命令行的值“15”。
*   使用非常简单的符号测试命令行中是否存在开关，例如`arghash['-s']`如果存在则评估为 true，如果不存在则评估为 nil。
*   使用设置操作测试是否存在开关或替代开关，例如

    `puts USAGETEXT if !(%w(-h --help) & arghash.switches()).empty?`

*   使用集合操作识别无效开关的使用，例如

    `puts "Invalid switch found!" if !(arghash.switches - %w(-valid1 -valid2)).empty?`

*   使用以下示例为缺少的参数指定默认值，`Hash.merge()`如果未设置，则为 -max= 填充一个值，如果未通过，则添加第四个位置参数。

    `with_defaults = {'-max=' => 20, 3 => 'default.txt'}.merge(arghash)`

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-01-17T23:45:22.143

这与接受的答案非常相似，但使用`ARGV.delete_if`which 是我在[简单的 parser](https://gist.github.com/felipec/6772110)中使用的。唯一真正的区别是带参数的选项必须在一起（例如`-lfile`）。

```
def usage
  "usage: #{File.basename($0)}: [-l<logfile>] [-q] file ..."
end

ARGV.delete_if do |cur|
  next false if cur[0] != '-'
  case cur
  when '-q'
    $quiet = true
  when /^-l(.+)$/
    $logfile = $1
  else
    $stderr.puts "Unknown option: #{cur}"
    $stderr.puts usage
    exit 1
  end
end 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-01-12T01:13:53.667

我正在开发[我自己的名为 Acclaim 的选项解析器 gem](https://rubygems.org/gems/acclaim)。

我写它是因为我想创建 git 风格的命令行界面，并且能够将每个命令的功能清晰地分离到单独的类中，但它也可以在没有整个命令框架的情况下使用：

```
(options = []) << Acclaim::Option.new(:verbose, '-v', '--verbose')
values = Acclaim::Option::Parser.new(ARGV, options).parse!
puts 'Verbose.' if values.verbose? 
```

目前还没有稳定的版本，但我已经实现了一些功能，例如：

*   自定义选项解析器
*   灵活解析选项的参数，允许最小和可选
*   支持多种选项样式
*   在同一选项的多个实例上替换、附加或引发
*   自定义选项处理程序
*   自定义类型处理程序
*   通用标准库类的预定义处理程序

非常强调命令，因此对于简单的命令行解析来说可能有点重，但它运行良好，我一直在我的所有项目中使用它。如果您对命令接口方面感兴趣，请查看[项目的 GitHub 页面](https://github.com/matheusmoreira/acclaim)以获取更多信息和示例。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-12-23T01:24:51.313

显然@WilliamMorgan 和我的想法是一样的。我昨晚刚刚在 Github 上发布了一个类似于 Trollop 的库（命名如何？），在 Github 上搜索了 OptionParser 后，请参阅[Switches](http://github.com/thoran/switches)

有一些差异，但哲学是相同的。一个明显的区别是 Switches 依赖于 OptionParser。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-07-07T08:49:47.210

假设一个命令最多有一个操作和任意数量的选项，如下所示：

```
cmd.rb
cmd.rb action
cmd.rb action -a -b ...
cmd.rb action -ab ... 
```

没有验证的解析可能是这样的：

```
ACTION = ARGV.shift
OPTIONS = ARGV.join.tr('-', '')

if ACTION == '***'
  ...
  if OPTIONS.include? '*'
    ...
  end
  ...
end 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-07-19T06:48:33.013

[https://github.com/soveran/clap](https://github.com/soveran/clap)

```
other_args = Clap.run ARGV,
  "-s" => lambda { |s| switch = s },
  "-o" => lambda { other = true } 
```

46LOC（在 1.0.0），不依赖于外部选项解析器。完成工作。可能没有其他功能那么全，但它是 46LOC。

如果你检查代码，你可以很容易地复制底层技术——如果你真的不想要一个外部库，分配 lambda 并使用 arity 来确保正确数量的 args 跟随标志。

简单的。便宜的。

* * *

**编辑**：基本概念归结为我想您可以将其复制/粘贴到脚本中以制作合理的命令行解析器。这绝对*不是*我要记住的东西，但是使用 lambda arity 作为廉价的解析器是一个新颖的想法：

```
flag = false
option = nil
opts = {
  "--flag" => ->() { flag = true },
  "--option" => ->(v) { option = v }
}

argv = ARGV
args = []

while argv.any?
  item = argv.shift
  flag = opts[item]

  if flag
    raise ArgumentError if argv.size < arity
    flag.call(*argv.shift(arity))
  else
    args << item
  end
end

# ...do stuff... 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2013-10-01T00:08:37.303

我创建了一个非常简单但有用的解析器：[parseopt](https://rubygems.org/gems/parseopt)。它使用 Git 的内部选项解析器作为灵感，以及 Ruby 的 OptionParser。

它看起来像这样：

```
opts = ParseOpt.new
opts.usage = 'git foo'

opts.on('b', 'bool', 'Boolean') do |v|
 $bool = v
end

opts.on('s', 'string', 'String') do |v|
 $str = v
end

opts.on('n', 'number', 'Number') do |v|
 $num = v.to_i
end

opts.parse 
```

# c# - 检查系统中是否安装了 MSWord

> ID：897633
> 
> 赞同：6
> 
> 时间：2009-05-22T12:35:56.063
> 
> 标签：c#, ms-word

完全重复：

> [**C#：如何知道是否安装了某些 Office 2003 或 2007 应用程序？**](https://stackoverflow.com/questions/531659/c-how-to-know-whether-certain-office-2003-or-2007-application-is-installed)

如何使用 C# 代码检查系统中是否安装了 MSWord 2003 0r 2007？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-22T12:50:53.287

[这段代码](http://www.devx.com/vb2themax/Tip/18725)表明一个简单的注册表检查就可以完成这项工作。

这是转换为 C# 的代码（并略微改进为使用`using`语句）。

```
using Microsoft.Win32;

// Check whether Microsoft Word is installed on this computer,
// by searching the HKEY_CLASSES_ROOT\Word.Application key.
using (var regWord = Registry.ClassesRoot.OpenSubKey("Word.Application"))
{
    if (regWord == null)
    {
        Console.WriteLine("Microsoft Word is not installed");
    }
    else
    {
        Console.WriteLine("Microsoft Word is installed");
    }
} 
```

`C:\Program Files\Microsoft Office\`请注意，检查EXE 文件还不够好`msword`，因为用户可能已将其安装在其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T12:50:40.637

解决方案之一，我认为如果你用谷歌搜索它应该会更好。要检查是否安装了 Excel，我使用这个 c# 代码

```
Excel.Application app = new Excel.ApplicationClass(); 
```

如果`app == null`这意味着机器上没有安装 excel。如果您查看 MSDN 文档，您应该能够获得打开单词 appln 的语法。

# objective-c - 在 Objective-C 中，我可以在浮点 c 数组上声明 @property 吗？

> ID：897639
> 
> 赞同：2
> 
> 时间：2009-05-22T12:37:52.127
> 
> 标签：objective-c

东西.h

```
@interface Thing : NSObject 
{
     float stuff[30];
}

@property float stuff;
@end 
```

东西.m

```
@implementation Thing
@synthesize stuff;
@end 
```

我收到**错误：属性“stuff”的类型与 ivar“stuff”的类型不匹配**

我不想使用 NSArray，因为我必须将浮点数转换为 NSNumbers（对吗？），用它来做数学很痛苦。

**更新**：我注意到类似的答案有猜测和试验答案。虽然我很欣赏非 Objective-C 人员的尝试，但我希望得到一个**明确**的答案，无论它是否可能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-23T04:34:08.653

好的，我已经编译了以下代码，它按预期工作。

**FloatHolder.h**

```
@interface FloatHolder : NSObject {
    int _count;
    float* _values;
}

- (id) initWithCount:(int)count;

// possibly look into this for making access shorter
// http://vgable.com/blog/2009/05/15/concise-nsdictionary-and-nsarray-lookup/
- (float)getValueAtIndex:(int)index;
- (void)setValue:(float)value atIndex:(int)index;

@property(readonly) int count;
@property(readonly) float* values; // allows direct unsafe access to the values

@end 
```

**FloatHolder.m**

```
#import "FloatHolder.h"

@implementation FloatHolder

@synthesize count = _count;
@synthesize values = _values;

- (id) initWithCount:(int)count {
    self = [super init];
    if (self != nil) {
        _count = count;
        _values = malloc(sizeof(float)*count);
    }
    return self;
}

- (void) dealloc
{
    free(_values);

    [super dealloc];
}

- (float)getValueAtIndex:(int)index {
    if(index<0 || index>=_count) {
        @throw [NSException exceptionWithName: @"Exception" reason: @"Index out of bounds" userInfo: nil];
    }

    return _values[index];
}

- (void)setValue:(float)value atIndex:(int)index {
    if(index<0 || index>=_count) {
        @throw [NSException exceptionWithName: @"Exception" reason: @"Index out of bounds" userInfo: nil];
    }

    _values[index] = value;
}

@end 
```

然后在您的其他应用程序代码中，您可以执行以下操作：

** FloatTestCode.h **

```
#import <Cocoa/Cocoa.h>
#import "FloatHolder.h"

@interface FloatTestCode : NSObject {
    FloatHolder* holder;
}

- (void) doIt:(id)sender;

@end 
```

** FloatTestCode.m **

```
#import "FloatTestCode.h"

@implementation FloatTestCode

- (id) init
{
    self = [super init];
    if (self != nil) {
        holder = [[[FloatHolder alloc] initWithCount: 10] retain];
    }
    return self;
}

- (void) dealloc
{
    [holder release];

    [super dealloc];
}

- (void) doIt:(id)sender {
    holder.values[1] = 10;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-22T12:50:43.897

属性的类型必须与将要存储的实例变量的类型相匹配，因此您可以执行类似的操作

```
 @interface Thing : NSObject 
  {
       float stuff[30];
  }

  @property float[30] stuff;
  @end 
```

它应该可以工作。我不会推荐它。我猜您正在寻找诸如 Delphi 的索引属性之类的东西。您将得到的最接近的是以下内容。

```
 @interface Thing : NSObject 
  {
       float stuff[30];
  }

  - (void) setStuff:(float)value atIndex:(int)index;
  - (float) getStuffAtIndex:(int)index;
  @end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-23T04:54:13.323

你不能按照你想要的方式去做。您可以跳过一些障碍并获得类似的东西，例如使用[Daniel 的解决方案](https://stackoverflow.com/questions/897639/in-objective-c-can-i-declare-property-on-a-c-array-of-floats/900855#900855)，但它并不完全相同。你不能这样做的原因是**数组不是 C 中的左**值。左值是可以出现在赋值左侧的东西。以下代码无效 C：

```
float stuff1[30], stuff2[30];
stuff1 = stuff2;  // ERROR: arrays are not lvalues 
```

因此，您不能声明类型不是左值的属性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-09-10T14:59:53.360

丹尼尔的 FloatHolder 答案有一个重大错误（编辑：他现在已修复它）。它只为一个浮点数分配内存，而不为整个数组分配内存。

该行：

> `_values = malloc(sizeof(float));`

应该：

> `_values = malloc(sizeof(float) * count);`

否则，这似乎是一个很好的答案。抱歉无法直接回复。（编辑：那时我对 stackoverflow 没有必要的特权。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-22T13:21:09.077

即使您可以编译它，它也不会表现良好。'stuff' 会返回一个浮点数*，而客户端将不知道数组的长度；'setStuff:' 只会改变指针，你要么指向堆栈分配的数据，这些数据会从你下面消失，要么指向堆分配的数据，因为它不知道释放它而泄漏。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-22T12:45:40.803

我不精通Objective-C 2.0，但我猜这个问题可能是由于C数组本质上只是*指向*数组第一个元素的指针，这意味着类型`float stuff[30]`是其实`float *`，不仅仅是一个`float`。

# javascript - 为表创建可编辑的新行

> ID：897653
> 
> 赞同：0
> 
> 时间：2009-05-22T12:41:52.043
> 
> 标签：javascript, jquery, html, ajax

我正在尝试使用 ajax 和表动态行向数据库添加详细信息。

例如

----

{客户：下拉菜单} | {描述：文本区域} | *删除*

**添加新客户**

---

当用户单击时，它会显示所有可用客户的下拉菜单。当您点击离开时，它只显示选择的客户名称（不是下拉菜单）

与我希望单击的描述类似，以允许他们编辑文本区域的描述，但是当您单击离开时，它仅显示您刚刚输入的文本。（不是文本区域轮廓）

添加新客户按钮创建一个新的空行。

哪些库或示例可以帮助我开始使用它？

我最近在一个应用程序中看到了这一点。在此应用程序中，可以通过 ajax 和动态 HTML 添加新项目/行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T14:08:49.713

您应该能够使用 jQuery 轻松地做到这一点（查看他们的文档中的选择器、事件和操作）。例如，对于下拉

```
<span id="customer-name"></span>
<select name="customer-list" id="customer-list">
    <option class="name" value="cust-1">Frank Frankson</option>
    <option class="name" value="cust-2">John Johnson</option>
</select> 
```

和 jQuery ：

```
$('.name').click(function(){        
    $('#customer-name').text($(this).text());
    $('#customer-list').hide();
}); 
```

在该函数中，如果需要（ajax 帖子或其他），您可以使用选项元素值做一些事情。

更改文本区域描述的原则是相同的（您可以从 textarea 中获取文本，将其添加到 div 并隐藏 textarea；如果他们需要再次编辑，只需显示 textarea 并隐藏 div）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T12:48:03.090

使用 jQuery。

使用[jQuery 的标记化自动完成插件](http://loopj.com/2009/04/25/jquery-plugin-tokenizing-autocomplete-text-entry/)

对于就地编辑，请使用[Jeditable](http://www.appelsiini.net/projects/jeditable)。

我会远离下拉菜单，它们几乎总是糟糕的设计，无论是在菜单中还是从一长串选项中进行选择。对于像客户列表这样可能很长的东西来说，这是一个糟糕的 UI 组件选择。

The only time that it really makes sense to use a drop down is when the list of options is short **and** well known. 因此，为了让它被接受，它可能必须是一个选项列表，这些选项很少更改，长度少于 10 个左右，并且经常使用（所以它是众所周知的）。下拉是痛苦的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T14:24:23.457

您看到此类功能的大多数网站都通过样式来完成它 - 您可以将文本输入框设置为看起来像纯文本（通过删除边框并将背景颜色设置为透明）。当输入被点击（聚焦）时，样式改变：

```
<style>
   .blurredText { border: none; background-color: transparent; }
</style>
. . .
<input type="text" class="blurredText" value="Click me to edit"
    onfocus="this.className=''" 
    onblur="this.className='blurredText'"/> 
```

然而，以相同的方式为选择设置样式可能会很困难，因为选择控件对 CSS 的抵抗力是出了名的。你仍然可以使用 Dave 提出的方法。

# java - Hibernate Annotations，指定组件的哪些成员要持久化

> ID：897678
> 
> 赞同：4
> 
> 时间：2009-05-22T12:50:42.990
> 
> 标签：java, hibernate, annotations

我有一个 Price 对象，它由两个 MonetaryValues 组成，其中一个 MonetaryValue 由金额和货币组成。

如果我以 XML 方式配置 OR 映射，我可以这样做

```
 <component name="baseAmount" lazy="false" class="MonetartyValue">
        <property name="amount" column="baseAmount" precision="20" scale="2" not-null="true" />
        <!-- <property name="currency" column="baseCurrency" not-null="true" /> -->
    </component>

    <component name="originalAmount" lazy="false" class="MonetaryValue">
        <property name="amount" column="originalAmount" precision="20" scale="2" not-null="true" />
        <property name="currency" column="originalCurrency" not-null="true" />
    </component> 
```

即选择不保留baseCurrency 元素（因为它是隐含的并且始终相同）。

是否有可能以注释配置方式实现这一点？

* * *

如果我只是这样做，并忽略 baseCurrency 属性，无论如何它都会以默认名称保留。

```
@Embedded
@AttributeOverrides ( {
    @AttributeOverride(name="amount", column= @Column(name="baseAmount"))
} )
private MonetaryValue baseAmount;

@Embedded
@AttributeOverrides ( { 
    @AttributeOverride(name="amount", column= @Column(name="originalAmount")),
    @AttributeOverride(name="currency", column= @Column(name="originalCurrency"))
} )
private MonetaryValue originalAmount; 
```

也不可能使 MonetaryValue 的属性货币瞬态，因为那样它将永远不会被保存。

那么，是否有可能通过注解来实现上述 XML 映射的功能？

* * *

正如 mtpettyp 建议的那样，我想将两个 MonetaryValue 存储在一个表中，只使用三列。正如 Autocracy 在他的评论中所建议的那样，您绝对可以通过继承来解决问题。但话又说回来，您也可以使用自定义 .hbm.xml 映射文件而不是使用注释来解决它。我不确定哪个更正确，但我仍然很好奇是否有可能解决...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T17:48:46.087

我仍然对您的问题感到困惑，但我会猜测您正在尝试阅读 baseCurrency 而不更新它？

```
// Use this in the override statement for your first baseCurrency
@Column(insertable=false,updatable=false) 
```

导致：

```
@Embedded
@AttributeOverrides ( {
        @AttributeOverride(name="amount", column= @Column(name="baseAmount"))
        @AttributeOverride(name="currency", column= @Column(name="baseCurrency", insertable=false,updatable=false))
} )
private MonetaryValue baseAmount;

@Embedded
@AttributeOverrides ( { 
        @AttributeOverride(name="amount", column= @Column(name="originalAmount")),
        @AttributeOverride(name="currency", column= @Column(name="originalCurrency"))
} )
private MonetaryValue originalAmount; 
```

但是，如果这不是您的意思，您应该澄清更多。我真的不知道你想在这里做什么。

# windows - Ruby 键盘事件处理

> ID：897687
> 
> 赞同：1
> 
> 时间：2009-05-22T12:52:54.750
> 
> 标签：windows, ruby, console-application, keyboard-events, curses

我正在使用 curses 开发一个小型控制台应用程序。

我有一个等待用户输入的主循环部分，它使用 getstr 函数，当然这等待用户按 Enter。

我想捕捉向上和向下和制表键的按键。我想这不能用getstr来完成。

任何人都知道如何做到这一点？

编辑：我试过使用 STDIN.getc 来阻止应用程序运行，而 getch 没有抓住箭头键。

编辑#2：我正在 Windows 上尝试此代码。似乎 Curses.getch 适用于 Linux，但在 Windows 上，我没有收到向上箭头的键。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-22T13:13:03.897

您需要设置 tty 的“cbreak”模式，以便立即获得按键。如果您不这样做，Unix 终端处理系统将缓冲输入，直到收到换行符（即，用户点击`ENTER`），并且输入将在此时全部交给进程。

这实际上不是 Ruby 或什至是特定于诅咒的；这是所有通过 Unix tty 运行的应用程序的工作方式。

尝试使用 curses 库`cbreak()`函数打开此模式。退出前别忘了打电话`nocbreak()`把它关掉！

对于读取单个字符，`STDIN.getc`将返回字符的 ASCII 码的 Fixnum。很可能您会发现`STDIN.read(1)`它更方便，因为它返回下一个字符的单字符字符串。

但是，您会发现“向上/向下”键（如果您指的是箭头键）实际上是一个字符序列。在当今大多数类似 ANSI 的终端仿真器（例如 xterm）上，例如，向上箭头将是“ `\e[A`”（即`\e`转义字符）。有 termcap（终端能力）数据库来处理这类事情，您可以通过 curses 访问它们，但最初您可能会发现直接尝试解释这些是最简单的；如今，您不太可能遇到使用 ANSI 代码以外的任何其他代码的终端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T13:32:05.153

你想要 getch 而不是 getstr。另请参阅 curt sampson 关于箭头键不是单个字符的评论。

# c# - 我的第一个扩展方法，能不能写得更好？

> ID：897698
> 
> 赞同：6
> 
> 时间：2009-05-22T12:57:44.477
> 
> 标签：c#, c#-3.0, extension-methods

因为这是我第一次尝试对我来说似乎非常有用的扩展方法，所以我只是想确保我走的是正确的路线

```
 public static bool EqualsAny(this string s, string[] tokens, StringComparison comparisonType)
    {
        foreach (string token in tokens)
        {
            if (s.Equals(token, comparisonType))
            {
                return true;
            }
        }

        return false;
    } 
```

调用者

```
if (queryString["secure"].EqualsAny(new string[] {"true","1"}, StringComparison.InvariantCultureIgnoreCase))
{
    parameters.Protocol = Protocol.https;
} 
```

**编辑：**一些很好的建议，正是我正在寻找的东西。谢谢

**编辑：**

我已决定以下实施

```
public static bool EqualsAny(this string s, StringComparison comparisonType, params string[] tokens)
{
    // for the scenario it is more suitable for the code to continue
    if (s == null) return false;

    return tokens.Any(x => s.Equals(x, comparisonType));
}

public static bool EqualsAny(this string s, params string[] tokens)
{
    return EqualsAny(s, StringComparison.OrdinalIgnoreCase, tokens);
} 
```

我更喜欢使用参数而不是 IEnumerable，因为它简化了调用代码

```
if (queryString["secure"].EqualsAny("true","1"))
{
    parameters.Protocol = Protocol.https;
} 
```

与前作相去甚远

```
if (queryString["secure"] != null)
{
    if (queryString["secure"] == "true" || queryString["secure"] == "1")
    {
        parameters.Protocal = Protocal.https;
    }
} 
```

再次感谢你！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-22T13:02:30.487

是的！首先，您需要检查 s 是否为空。此外，让它接受任何`IEnumerable<string>`for 令牌而不仅仅是一个数组，然后使用其他 linq 运算符进行检查：

```
public static bool EqualsAny(this string s, IEnumerable<string> tokens, StringComparison comparisonType)
{
    if (s== null) return false;
    return tokens.Any(t => s.Equals(t, comparisonType));
} 
```

* * *

考虑如何处理`null`s 的值，还有第三个选项还没有人使用：

```
 public static bool EqualsAny(this string s, IEnumerable<string> tokens, StringComparison comparisonType)
{
    if (s== null) return tokens.Any(t => t == null);
    return tokens.Any(t => s.Equals(t, comparisonType));
} 
```

* * *

最后，关于你选择的实现：如果你要重载，你也可以有 IEnumerable 重载，并让你的`params`代码调用它们。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-22T13:03:28.893

```
public static bool EqualsAny(
    this string s, 
    StringComparison comparisonType, 
    params string[] tokens)
{
    foreach (string token in tokens)
    {
        if (s.Equals(token, comparisonType))
        {
            return true;
        }
    }
    return false;
} 
```

使用参数，您不必先将字符串强制放入数组中。

```
var match = "loool".EqualsAny(StringComparison.Ordinal, "hurf", "Durf"); 
```

带有 NRE（框架标准）的 Linq-ified (JC + me)：

```
public static bool EqualsAny(
    this string s, 
    StringComparison comparisonType, 
    params string[] tokens)
{
   if(s == null) throw new NullReferenceException("s");
   return tokens.Any(x=> s.Equals(x, comparisonType));
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-22T13:09:49.787

另一种选择是。这将简化您的呼叫站点，因为如果您有几个字符串，您的匹配项就不必在代码中创建数组或列表。

```
 public static bool EqualsAny(this string s,StringComparison comparisonType, param string[] tokens )
{
   return EqualsAny(s,comparisonType,tokens);
}    

 public static bool EqualsAny(this string s,StringComparison comparisonType, IEnumerable<string>tokens )    
{ 
    //Throw nullReference to keep the semantics aligned with calling an instance member
    if (s==null) throw new NullReferenceException();       
    foreach (string token in tokens)        
    {            
         if (s.Equals(token, comparisonType))            
         {                
             return true;            
         }        
   }        
   return false;    

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-22T13:00:58.057

使您的`tokens`参数更通用 - 即使其成为`IEnumerable<string>`.

此外，已经存在扩展的等效方法`IEnumerable<>`，例如`Any`：

```
 public static bool EqualsAny(this string s, IEnumerable<string> tokens, StringComparison comparisonType)
 {
     return tokens.Any(t => s.Equals(t, comparisonType));
 } 
```

`null`此外，Joel 当然是对的：您可能希望在执行操作之前检查值（防御性编码）。这不是更安全，但它使错误更容易本地化。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-22T13:01:59.287

为了简化 EqualsAny 的使用，您可以使用可变参数和默认策略 `StringComparison`：

```
public static bool EqualsAny(this string s, params string[] tokens) {
    return EqualsAny(s, StringComparison.InvariantCultureIgnoreCase, tokens);
}

public static bool EqualsAny(this string s, 
                             StringComparison stringComparison, 
                             params string[] tokens) {
    // your method
} 
```

调用者

```
if (queryString["secure"].EqualsAny("true", "1")) {
    parameters.Protocol = Protocol.https;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-22T13:19:45.710

你正在做的事情本身并没有错。然而，这种类型的功能已经以几种不同的方式存在。

例子：

```
var candidates = List<SomeObject>(); 
if (candidates.Count(c=> string.Compare(c.PropertyValue, queryString["secure"], StringComparison.InvariantCultureIgnoreCase) == 0) > 0)
{
 parameters.Protocol = Protocol.https;
} 
```

# c# - 更改独立存储位置

> ID：897703
> 
> 赞同：2
> 
> 时间：2009-05-22T12:58:26.143
> 
> 标签：c#, isolatedstorage

有没有办法改变 IsolatedStorage 文件的位置？我正在使用 .NET 3.5sp1，我用 C# 编写我的应用程序

我想将其位置更改为`D:\TempDir`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T13:06:17.017

我不相信它不是。我认为它的操作系统+用户取决于您的文件最终的确切位置。

如果您可以开始将文件粘贴到任何地方，那么它就不会非常孤立，并且会破坏拥有应用程序本地存储的意义。

# django-models - 无法调用自定义方法

> ID：897704
> 
> 赞同：0
> 
> 时间：2009-05-22T12:58:59.417
> 
> 标签：django-models

我是 Django 的新手。我有一个自定义方法的模型。在视图中，我正在检索单个对象。

这是我的代码——我的模型

```
class Problem(models.Model): 
    problem = models.CharField(max_length=100) 
    solution=models.CharField(max_length=500) 
    def __unicode__(self): 
        return self.problem 
   def retrieve_rankdata(self): 
                return self.problem.split()[0].split('/') 
```

鉴于我正在这样做

```
def show(request): 
       problem = Problem.objects.all()[0] 
        t1=problem.retrieve_rankdata() 
```

但是，我得到这个错误'问题'对象没有属性'retrieve_rankdata'

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T13:05:35.863

这有点难说，但问题可能出在你的缩进上。您粘贴的代码中的缩进不一致，因此无论如何它都无法正常工作 - 我怀疑在您的实际代码`def retrieve_rankdata`中，左边还有几个空格。

不要忘记 Python 使用缩进来判断属性或方法是否是类的一部分。因此，如果您的`def retrieve_rankdata`行实际上没有缩进与该行相同的级别`def __unicode__`，则它不会被视为`Problem`该类的一部分。

# git - 如何使用 git “拆分”文件

> ID：897707
> 
> 赞同：10
> 
> 时间：2009-05-22T13:00:45.577
> 
> 标签：git

如果我必须在我的**开发**分支上关注文件：

```
# file.rb

class Code
 def methodA
  'aA1'
 end
 def methodB
  'bB2'
 end
end 
```

但是在我的**主**分支上，我想将这些方法分成不同的文件：

```
# in file.rb
class Code
  def methodA
    'aA1'
  end
end

# in extra.rb
class Code
  def methodB
    'bB2'
  end
end 
```

我可以简单地在**development**上创建文件，然后结帐到**master**， rebase 并手动分离文件，但是是否可以进行设置，以便当我对**development**进行更改时，它会转移到文件的正确“部分”上**师**？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-22T13:26:50.377

将拆分“转移到' `master`'”上文件的正确“部分”将意味着 Git 能够检测到拆分。

正如[最近的帖子](http://osdir.com/ml/git/2009-05/msg00200.html)（本月：2009 年 5 月）所说明的那样，Git 还没有完全实现。
这可能适用于其中一小部分拆分为另一个文件的大文件，但对于小文件，内容似乎“太不同”，以至于 git rename 检测器无法获取更改。

所以`rebase`' `master`' 之上的 ' `development`' 可能会起作用，前提是您没有发布 ( `push`) ' `master`' 因为 ' `development`' 已经进行了，因为这样的操作 ( `rebase`) 将重写 ' ' 分支上提交的 SHA-1 `master`（因为它们被重放在' `development`'分支的提交之上）

正如我在[rebase vs.merge](https://stackoverflow.com/questions/804115/git-rebase-vs-git-merge)中描述的那样，如果您的开发分支不是“太远”（就 master 的修改而言，另一种策略是在 master 之上 rebase 开发，进行拆分，然后将开发合并回 master （此时快进合并）

# actionscript-3 - 如何复制 NetStream 对象？

> ID：897714
> 
> 赞同：0
> 
> 时间：2009-05-22T13:01:31.737
> 
> 标签：actionscript-3, oop, netstream

我正在使用 BulkLoader 加载一个包含 10 个左右的 FLV 文件的数组。我希望能够在整个应用程序中独立使用和控制这些 FLV。因此，例如，FLV_1 可能会重复显示，但我想暂停一个实例并同时播放另一个。

我想将 NetStream 对象传递给其他 Video 对象并显示两者。这可能吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-23T00:58:32.967

**尚未对此进行测试，但从逻辑上讲，您不应该能够异步**播放多个包含同一 NetStream 实例的视频，这仅仅是因为暂停/播放/等。方法直接在 NetStream 实例上触发（而不是在 Video 容器上......）。

另一方面，您可能可以在不同的 Video 实例中**同步**播放 NetStream 的同一实例（要仔细检查！）。

可能最简单的破解方法是将相同的 FLV 加载到两个不同的项目中（如果您使用 BulkLoader），并使用唯一 ID 引用它们并希望最终用户启用他的浏览器缓存。此后，您将分别添加和控制每个 NetStream，就像您处理两部不同的电影一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T17:43:56.453

这绝对是可能的。BulkLoader 将向您公开 NetStream 对象，因此您可以将其传递给 Video 或其他任何东西，例如：

```
var videoItem : VideoItem = bulkLoader.get("my-video.flv");
var video : Video = new Video();
video.attachStream(videoItem.content);
// or the shortcut:
video.attachStream(bulkLoader.getNetStream("my-video.flv"); 
```

问候

# wcf - 在 IIS 5.0 下运行的 WCF 客户端与 Windows 2008 上的服务器出错

> ID：897718
> 
> 赞同：0
> 
> 时间：2009-05-22T13:02:16.463
> 
> 标签：wcf, wcf-security

我有一个在 Windows 2008 机器上的 IIS 7 下运行的 .Net 3.5 SP1 WCF 服务。当我尝试从在 IIS 5.0 (Windows XP) .Net 3.5 SP1 下运行的 IIS 托管 WCF 服务连接到此服务时，我收到以下错误：

*令牌提供程序无法获取目标令牌：[http://（](http://(URL) WCF 服务的 URL）*

我构建了一个简单的控制台应用程序，它可以使用完全相同的配置成功连接到 WCF 服务。我还在 WebDev 服务器（Visual Studio 2008 附带的 ASP.Net 服务器）下构建了一个简单的 Web 应用程序，它能够成功连接到 WCF 服务。当我在 IIS (Windows XP) 中配置一个虚拟目录以指向与 WebDev 服务器相同的目录时，我收到以下错误：

*安全包中没有可用的凭据*

但是，如果我将 web.config 设置为使用我的登录凭据打开模拟，它就可以正常工作。由于显而易见的原因，这不是一个好的长期解决方案。我注意到 IIS 和 WebDev 服务器之间的一个区别是每个进程在其下运行的用户。IIS 在 ASPNet 帐户下运行，WebDev 在我的帐户下运行。

这是客户端上 WCF 部分的配置：

```
<system.serviceModel>
<behaviors>
  <serviceBehaviors>
    <behavior name="mexBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
      <serviceThrottling maxConcurrentCalls="200" maxConcurrentSessions="200" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<bindings>
  <wsHttpBinding>
    <binding name="FABindings" maxReceivedMessageSize="2147483647">
      <readerQuotas maxStringContentLength="300000"/>
      <security mode="Message">
        <message clientCredentialType="Windows" negotiateServiceCredential="false" establishSecurityContext="false" />
      </security>
    </binding>
  </wsHttpBinding>
</bindings>
<client>
  <endpoint address="http://<server url>/FinancialAggregator/v3/Services/FAService.svc"
      binding="wsHttpBinding" bindingConfiguration="FABindings"
      contract="ServiceReference1.IFilteredService" name="FAServiceEndpoint">
    <identity>
      <servicePrincipalName value="<UsernameRunningTheAppPoolOnW2k8>" />
    </identity>
  </endpoint>
</client> 
```

这是服务器配置（根据要求）：

```
 <system.serviceModel>
<bindings>
  <wsHttpBinding>
    <binding name="wsHttpBinding" maxReceivedMessageSize="2147483647">
      <security mode="Message">
        <message establishSecurityContext="false" negotiateServiceCredential="false" />
      </security>
    </binding>
  </wsHttpBinding>
</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior name="mexBehavior">
      <serviceMetadata httpGetEnabled="true" httpsGetEnabled="false" />
      <serviceDebug includeExceptionDetailInFaults="true" />
      <serviceThrottling maxConcurrentCalls="200" maxConcurrentSessions="200" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<services>
  <service behaviorConfiguration="mexBehavior" name="FCSAmerica.Financial.Aggregator.Service.FilteredService">
    <endpoint name="FAServiceEndpoint" address="" binding="wsHttpBinding" bindingConfiguration="wsHttpBinding" contract="FCSAmerica.Financial.Aggregator.Service.IFilteredService">
    </endpoint>
  </service>
</services> 
```

关于这个错误的原因有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-24T11:03:10.493

当您通过 IIS 访问服务时，impersonate = false，则它是用于访问 Windows 2008 机器上的服务的 ASPnet 帐户。

ASPnet 帐户是本地帐户，因此在 2008 机器上没有权限。

有 3 种方法可以解决此问题：

*   允许匿名访问 Windows 2008 机器上的服务
*   使用 impersonate = true （正如你所拥有的）
*   将应用程序池的标识从 aspnet 更改为具有所需访问权限的域帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-08-19T13:07:45.697

我想这个问题的最终答案是简单地升级到一个允许您设置应用程序池身份的操作系统，这是我多年前所做的。

感谢您的考虑。

马特

# asp.net - asp.net gridview 链接似乎“过期” - 如何停止？

> ID：897724
> 
> 赞同：0
> 
> 时间：2009-05-22T13:03:31.047
> 
> 标签：asp.net, gridview

我有一个 ASP.NET 3.5 页面，其中`gridview`数据绑定到通用对象列表。此页面的目的是向用户显示他们负责的项目列表，以便他们可以选择一个并转到维护页面以查看该项目的详细信息。

我将`AutoGenerateSelectButton`属性设置为 True。当用户立即选择其中一项时我没有问题（触发`.SelectedIndexchanged`事件，我做了一些处理并将`Response.Redirect`它们放到适当的页面）。

但是，如果我等待几分钟，然后点击选择，我会得到**无法显示网页**，就好像我与网络断开连接一样。没有消息被发送到应用程序的日志文件（调试消息应该表明用户选择了一个特定的项目并且重定向即将发生）所以我没有什么可以捕获/调试/修复。

我尝试进入 web.config 并添加

```
"<sessionState timeout="60"></sessionState>" 
```

希望超时会达到一个小时（用户经常让应用程序在他们的屏幕上停留很长一段时间），但这似乎没有奏效。

我还能在哪里看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-22T13:36:41.010

我有一个非常相似的问题。您可能讨厌这个答案，因为它有点乏味，但我以编程方式在 Gridview_RowCreated 中添加了一个按钮，它允许更多功能。

在页面加载时向网格中添加一列。

```
 If Not IsPostBack Then
        Dim field As New TemplateField
        field.HeaderText = "Maintenance"
        Dim col As DataControlField = field
        GridView.Columns.Add(col) 
```

--在此处添加链接按钮

```
For i = 0 To GridView.Rows.Count - 1
            Dim alinkbutton As New Linkbutton
            GridViewCshr.Rows(i).Cells(3).Controls.Add(alinkbutton )
        Next
 End If 
```

（将按钮添加到网格中位于第三列，但无论您以编程方式添加新列的任何位置都将其添加）

---然后在GridView_rowcommand

```
Response.Redirect("url") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T14:20:25.697

我可以从您的 web.config 提取中看到您正在运行 sessionState（默认模式）。在这种模式下，会话状态有效地保存在 IIS 工作进程的进程中的内存中。这意味着当处理您的应用程序的 IIS Worker 进程终止时，例如因为 IIS 正在回收应用程序池，会话状态将被清除。

您可以尝试在应用程序池配置中增加工作进程的空闲时间（默认为 20 分钟）。

对于 IIS6

1.  在 IIS 管理器中，展开本地计算机，展开应用程序池，右键单击应用程序池，然后单击属性。
2.  在性能选项卡的空闲超时下，取消选中空闲后关闭工作进程复选框。-或者-
3.  在分钟框中，键入您希望在关闭空闲工作进程之前经过的空闲分钟数（没有处理请求）。默认值为 20 分钟
4.  单击确定。

对于 IIS7

1.  打开inetmgr
2.  展开相应的服务器
3.  单击“应用程序池”
4.  右键单击运行应用程序的应用程序池，然后从上下文菜单中选择“回收”
5.  取消选中所有复选框，单击“下一步”，然后单击“完成”
6.  右键单击运行应用程序的应用程序池，然后从上下文菜单中选择“高级设置...”
7.  在“流程模型”下，将“空闲超时（分钟）”设置为某个较大的值
8.  点击“确定”

但是，对于像您这样的长时间运行的应用程序，将会话状态移出进程会好得多。这是一个相当简单的过程，可以为您省去很多与会话相关的麻烦。[http://msdn.microsoft.com/en-us/library/ms178586.aspx](http://msdn.microsoft.com/en-us/library/ms178586.aspx)上的文章将为您提供有关如何完成此任务的很好的概述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T15:05:09.617

问候大卫，

这类问题在网上问是很难解决的，需要现场检查，所以我就不给你答案了，给你一些提示：

*   此应用程序是否使用身份验证和授权？如果是这样，身份验证 cookie 可能会在应用程序长时间处于非活动状态后过期，并且如果您单击“选择”按钮，您将被重定向到登录页面，但登录页面本身可能存在问题，导致发生重定向循环，这导致大多数浏览器在循环运行几次后显示“无法显示此页面”消息。循环可能是其他因素造成的，所以我建议使用[Fiddler](http://www.fiddler2.com/Fiddler2/version.asp)跟踪你的 http 交互，你就会知道服务器给出了什么响应，以及为什么浏览器会显示错误页面。
*   连接了提琴手后，我建议在调试模式下运行应用程序，然后从 Visual Studio 菜单中选择调试>异常，然后选中“抛出”和“用户未处理”列中的所有框，这将导致调试器中断每个异常，即使他们被处理。
*   最后一点无关紧要：我建议改变用户从网格中选择的方式。而不是“选择”链接按钮，放置一个带有另一个页面的 url 的链接，并将所选项目的 id 作为 url 参数传递。这将节省到服务器的往返行程和微小的会话存储开销。在另一个页面中，您必须注意不要有人使用 url 参数来操作他无权操作的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T21:40:36.080

尝试[在页面上将 EnableViewStateMac](http://msdn.microsoft.com/en-us/library/system.web.ui.page.enableviewstatemac.aspx)设置为 false以查看是否与此相关。

# asp.net - 添加 runat="server" 改变布局的行为

> ID：897738
> 
> 赞同：6
> 
> 时间：2009-05-22T13:06:19.090
> 
> 标签：asp.net, css, layout, html

我有一个包含一些控件、用户控件等的页面。

当我将 div 从普通更改`<div id="foo">`为`<div id="foo" runat="server">` 布局完全更改时。

为什么会这样，我该如何预防？

我正在使用 2.0 .NET 框架

是因为 .NET 更改了我的 id，而这显然是我不想要的吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-22T13:18:17.570

如果您在 CSS 中定位 div 控件的 ID，然后在服务器上运行该控件，您会发现它不再应用该样式。

这是因为 ASP.NET 有一个内置机制 (INamingContainer) 来确保您没有多个名称相同的控件。它通过添加容器前缀来做到这一点，因此您最终得到：

```
<div id="ctl00_ctl00_myDivName" runat="server" /> 
```

解决此问题的最简单方法是将其从处理 ID 更改为处理类：

```
<div class="myDiv" runat="server"></div> 
```

或者，我相信 XHTML 要求 Div 有结束标签，所以使用

```
<div runat="server">Some content</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T13:17:38.507

将 runat="server" 添加到 div 时，系统会自动为其生成 ID。它被称为 ID 修改。不幸的是，我知道在 2.0 框架中您可以为 div 做的事情并不多（无论如何都不会很痛苦），但是在 4.0 中，我们得到了一个覆盖......虽然在自定义控件上（在 2.0 ) 您可以覆盖 ClientID 和 UniqueID 字段。因此，如果您创建了一个使用 div 作为基础的 MyDiv 类，然后创建了 ClientID/UniqueID 字段，那么您应该没问题。

您的另一个选择是更新您的 CSS/javascript 以使用损坏的 ID。它基于页面内的位置是相当静态的，因为 ASP.Net 在回发期间使用它来查找控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-20T08:57:53.067

添加**ClientMode="static"**这将确保您的 id 不会更改为您的控件的客户端 id。

# python - 如何在 Python 中引用函数体之外的类方法？

> ID：897739
> 
> 赞同：1
> 
> 时间：2009-05-22T13:06:20.840
> 
> 标签：python

我想在 Observer 中进行一次回调注册。我不想在 init 或其他函数中进行注册。我不知道是否有等效于 init 的类级别

```
 class Observer:

        @classmethod
        def on_new_user_registration(new_user):
            #body of handler...

        # first I try

        NewUserRegistered().subscribe \
          (Observer.on_new_user_registration) #gives NameError for Observer

        #so I try

        NewUserRegistered().subscribe(on_new_user_registration) #says not callable

        #neither does this work

        NewUserRegistered().subscribe(__metaclass__.on_new_user_registration)

class BaseEvent(object):
    _subscriptions = {}

    def __init__(self, event_info = None):
        self.info = event_info

    def fire(self):
        for callback in self._subscriptions[event_type]:
            callback(event_info)

    def subscribe(self, callback):
        if not callable(callback):
            raise Exception(str(callback) + 'is not callable')
        existing = self._subscriptions.get(self.__class__, None)
        if not existing:
            existing = set()
            self._subscriptions[self.__class__] = existing
        existing.add(callback)

    class NewUserRegistered(BaseEvent):
        pass 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T15:36:08.043

我建议减少类的数量——记住 Python 不是 Java。每次你使用`@classmethod`或者`@staticmethod`你应该停下来想一想，因为这些关键字在 Python 中非常罕见。

这样做是有效的：

```
class BaseEvent(object):
    def __init__(self, event_info=None):
        self._subscriptions = set()
        self.info = event_info

    def fire(self, data):
        for callback in self._subscriptions:
            callback(self.info, data)

    def subscribe(self, callback):
        if not callable(callback):
            raise ValueError("%r is not callable" % callback)
        self._subscriptions.add(callback)
        return callback

new_user = BaseEvent()

@new_user.subscribe
def on_new_user_registration(info, username):
    print "new user: %s" % username

new_user.fire("Martin") 
```

如果你想要一个 Observer 类，那么你可以这样做：

班级观察员：

```
@staticmethod
@new_user.subscribe
def on_new_user_registration(info, username):
    print "new user: %s" % username 
```

但请注意，静态方法无法访问协议实例，因此这可能不是很有用。您不能像这样订阅绑定到对象实例的方法，因为执行类定义时该对象将不存在。

但你当然可以这样做：

```
class Observer:
    def on_new_user_registration(self, info, username):
        print "new user: %s" % username

o = Observer()
new_user.subscribe(o.on_new_user_registration) 
```

我们使用 bound`o.on_new_user_registration`作为参数来订阅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T13:23:50.880

当涉及到类定义中的函数式编程时，我已经开始接受 python 不是很直观。看到[这个问题](https://stackoverflow.com/questions/707090/decorators-and-in-class)。第一种方法的问题是 Observer 在构建类之前不作为命名空间存在。第二个问题是你创建了一个类方法，它在创建命名空间之前并没有真正做它应该做的事情。（我不知道你为什么要尝试第三个。）在这两种情况下，这些事情都不会发生，直到 Observer 的类定义被填充之后。

这可能听起来像是一个可悲的约束，但它真的不是那么糟糕。只需在类定义*后注册。*一旦您意识到在模块主体中但在类主体之外的类上执行某些初始化例程并不是一种糟糕的风格，python 就会变得更加友好。尝试：类观察者：

```
# Define the other classes first

class Observer:
    @classmethod
    def on_new_user_registration(new_user):
        #body of handler...
NewUserRegistered().subscribe(Observer.on_new_user_registration) 
```

由于模块在 python 中的工作方式，无论何时导入 Observer，都可以保证此注册将执行一次且仅执行一次（除非进程分叉和其他一些不相关的边界情况）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T13:25:06.777

哎呀。对于那个很抱歉。我所要做的就是将订阅移到类定义之外

```
class Observer:

        @classmethod
        def on_new_user_registration(new_user):
            #body of handler...

#after end of class

NewUserRegistered().subscribe(Observer.on_new_user_registration) 
```

猜想这是太多Java的副作用，人们不会立即想到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T13:27:09.160

你在做什么应该工作：

```
>>> class foo:
...     @classmethod
...     def func(cls):
...             print 'func called!'
...
>>> foo.func()
func called!
>>> class foo:
...     @classmethod
...     def func(cls):
...             print 'func called!'
...     foo.func()
...
func called! 
```

不过需要注意的一点是，类方法采用 cls 参数而不是 self 参数。因此，您的类定义应如下所示：

```
class Observer:

    @classmethod
    def on_new_user_registration(cls, new_user):
        #body of handler... 
```

# php - 如何使PHP上传的数据在传输过程中安全？

> ID：897740
> 
> 赞同：1
> 
> 时间：2009-05-22T13:06:31.977
> 
> 标签：php, security, http, file, https

我允许经过身份验证的用户使用我的 PHP 应用程序上传图像文件。假设我已经建立了必要的安全性来确保文件本身是有效的，是否有可能以某种方式拦截 http 传输的文件？如果是这样，我该如何保护文件的传输？HTTPS会是要走的路吗？

此外，应用程序所在的 Web 服务器只能由经过身份验证的用户访问。这是否意味着http数据流也受到保护？在我看来是这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T13:23:57.450

如果您使用 HTTPS，则建立连接后的整个通信将通过 SSL 加密传输。因此，文件上传也将被加密发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T13:24:02.957

[如果中间](http://en.wikipedia.org/wiki/Man-in-the-middle_attack)有Main ，他可以嗅探传输文件的内容。您必须使用安全连接来防止这种情况。所以 HTTPS 将是答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T13:24:21.783

是的，如果要确保数据不被截获，请使用 HTTPS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T13:31:44.063

另外，检查上传的文件是否真的是图像而不是脚本。

# dll - 如何找到给定 CLSID 的 DLL？

> ID：897743
> 
> 赞同：30
> 
> 时间：2009-05-22T13:07:23.457
> 
> 标签：dll, clsid

我有一个托管 DLL 调用一些非托管 DLL 的情况。我知道非托管 DLL 的 CLSID，有没有办法找出那个 CLSID 所在的二进制文件？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-05-22T13:13:19.547

Normaly，你可以去：

HKEY_LOCAL_MACHINE\SOFTWARE\Classes\CLSID\"GUID"

并找到一个名为“InProcServer32”的键，例如，将有具有 DLL 的默认值。这是一种简单的方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-22T13:11:32.373

你能不能只使用 regedit 在注册表中搜索它并查找二进制路径。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-08T09:05:55.337

根据 BobbyShaftoe 的回复，我们可以构建一个简单的 vbs 脚本来为我们读取该注册表：

```
Dll_RegPath = "HKEY_CLASSES_ROOT\CLSID\<GUID>\InProcServer32\" 
```

将以下内容粘贴到“test.vbs”

```
Sub Main

    ' used to find location of "System.Collections.ArrayList" progid dll
    Const csGUID = "{6896B49D-7AFB-34DC-934E-5ADD38EEEE39}"

    MsgBox srGetDllPathByGUID(csGUID)

End Sub

Function srGetDllPathByGUID( sGUID )
    Const csRegPath = "HKEY_CLASSES_ROOT\CLSID\<GUID>\InProcServer32\"

    Dim oShell: Set oShell = CreateObject("WScript.Shell")
    Dim sReg: sReg = Replace( csRegPath, "<GUID>", sGUID ) ' build str

    srGetDllPathByGUID = oShell.RegRead(sReg)

    Set oShell = Nothing ' clean up
End Function

Call Main 
```

您还可以通过以下方式找到 ProgId：

```
ProgID_RegPath = "HKEY_CLASSES_ROOT\CLSID\<GUID>\ProgID\" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-19T09:59:49.863

我发现了这个问题，因为我正在对一些安装不正确的应用程序进行故障排除，我的目标是找到并注册给定 CLSID（我从应用程序源获得）的 ActiveX dll。因此，我有点hacky的方法。

我已经在我认为 dll 所在的目录中进行了搜索，以查找文件内容中的 CLSID。这成功了，因为它以纯文本形式存储在资源中。我相信情况并非总是如此，但我的问题已经解决了。

# java - SAX 过早结束解析？

> ID：897744
> 
> 赞同：2
> 
> 时间：2009-05-22T13:08:08.823
> 
> 标签：java, xml, sax

我对使用 XML 比较陌生，并且正在使用`javax.xml.parsers.SAXParser`.

问题是：我需要的信息靠近 XML 文件的顶部，我*不需要*解析整个文档。-- 识别出相关信息后，停止解析文件的“最佳”方式是什么？

（到目前为止，我能想到的唯一方法是抛出异常。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T13:53:31.290

您可以使用 StAX。它实际上随时停止解析过程而不会引发任何异常。

查看：

http://www.xml.com/pub/a/2003/09/17/stax.html

http://jcp.org/en/jsr/detail?id=173

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-22T14:31:13.600

抛出异常是阻止它的唯一方法。有关示例，请参阅[此 IBM XML 技巧。](http://www.ibm.com/developerworks/xml/library/x-tipsaxstop/)

您可能应该实现自己的异常来表示打算停止进一步处理。这样，您将能够区分故意停止处理和无意停止（遇到一些意外情况等时）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-11-23T14:14:14.807

[正如Tom 所述，](https://stackoverflow.com/questions/1345293/how-to-stop-parsing-xml-document-with-sax-at-any-time/1345322#1345322)抛出异常似乎是解决此问题的最佳方法：

```
public class MySAXTerminatorException extends SAXException {
...
}

public void startElement (String namespaceUri, String localName,
                          String qualifiedName, Attributes attributes)
                        throws SAXException {
    if (someConditionOrOther) {
        throw new MySAXTerminatorException();
    }
    ...
} 
```

# c# - Linq To Sql 搜索多列多词

> ID：897750
> 
> 赞同：4
> 
> 时间：2009-05-22T13:10:06.183
> 
> 标签：c#, linq, linq-to-sql

我正在尝试使用 web 服务和 Linq To Sql 来访问数据库进行自动完成搜索。

这是我的代码。这将返回与任何搜索词匹配的结果，我想对此进行修改，以便每个结果都包含所有搜索词。

我知道 SQL 全文搜索可能是最优雅的解决方案，但我想看看这个功能是否可以在不修改数据库的情况下实现。

```
 string[] searchTerms = searchString.Split(new string[] { " " }, StringSplitOptions.RemoveEmptyEntries).ToArray();
        IQueryable<AccountResult> results = db.cdAccounts
            .Select(x =>
                new AccountResult()
                {
                    idAccount = x.id_Account,
                    AccountName = x.AccountNme,
                    AccountNumber = x.AccountNum
                }).Distinct().OrderBy(x => x.AccountName);
        foreach (string searchTerm in searchTerms)
            results = results.Where(x => x.AccountName.Contains(searchTerm) || x.AccountNumber.Contains(searchTerm));

        return results.OrderBy(x => x.AccountName).Take(40).ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-16T17:25:58.620

我最终使用 linq 搜索第一个术语，然后如果有多个术语。我对改进/优化持开放态度。

```
//...
if (searchTerms.Count() > 1)
{
    List<string> remainingSearchTerms = new List<string>();
    for (int x = 1; x < searchTerms.Count(); x++)
        remainingSearchTerms.Add(searchTerms[x]);
    List<SearchResult> matchingResults = new List<SearchResult>();

    foreach (SearchResult result in allResults)
        if (MatchSearchTerms(new string[] { result.Name, result.Number, result.id.ToString() }, remainingSearchTerms.ToArray()))
            matchingResults.Add(result);

    return matchingResults.OrderBy(x => x.Name).Take(MaxResults).ToList();
}
else
    return allResults.OrderBy(x => x.Name).Take(MaxResults).ToList();
//...

private bool MatchSearchTerms(string[] searchFields, string[] searchTerms)
{
    bool match = true;
    foreach (string searchTerm in searchTerms)
    {
        if (match)
        {
            bool fieldMatch = false;
            foreach (string field in searchFields)
            {
                if (field.ToLower().Contains(searchTerm.ToLower()))
                {
                    fieldMatch = true; //Only one field needs to match the term
                    break;
                }
            }
            match = fieldMatch;
        }
        else
            break;
    }
    return match;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T13:19:39.737

我不知道 linq to sql，但是当您应该附加到结果时，您似乎正在为每个循环重新分配结果。

# c# - 是否可以接受列表 作为 Asp.Net MVC 中复选框的参数？

> ID：897753
> 
> 赞同：0
> 
> 时间：2009-05-22T13:10:55.277
> 
> 标签：c#, asp.net-mvc, modelbinders

[由于haacked](http://haacked.com/archive/0001/01/01/model-binding-to-a-list.aspx)，我知道它可以接受对象列表作为参数，但是来自复选框的Guids列表呢？这有点不同，因为您获得的唯一名称必须是 ID。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T13:20:31.653

我不确定您是否可以通过这种方式执行 Guid，因为它们不会公开公共 setter 属性。我建议做一个列表，然后遍历列表并使用带有字符串的 Guid 重载：

```
public ActionResult Foo(IList<string> guidStrings) 
{
   var guids = new List<Guid>();
   foreach(var s in guidStrings)
   {
   guid.Add(new Guid(s));
   }

   return View(guidStrings);
} 
```

或类似的东西...

# visual-studio - 使用 MSBuild/Nant 与 Visual Studio 2005/2008 的开发经验

> ID：897754
> 
> 赞同：2
> 
> 时间：2009-05-22T13:10:56.743
> 
> 标签：visual-studio, msbuild, build-process, build-automation, nant

我与其他 4 名开发人员一起从事一个项目。我们目前使用 Visual Studio 通过一些 Pre 和 Post 构建事件来构建我们的解决方案。

我想转向更强大的构建系统，例如 Nant 或 MsBuild。

这两种方法的优缺点是什么？

使用 Nant/MsBuild 的开发人员体验如何？按 F5 可以轻松调试应用程序吗？解决方案资源管理器中是否还有一个不错的文件列表？还是每次需要将 .cs 文件添加到我的项目时都需要进入 XML 文件？

这一切如何与源代码控制集成？（我目前正在使用 SourceGear Vault。）

我正在尝试收集足够的信息，以便做出明智的决定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T13:14:35.173

需要注意的一件事。如果您使用的是 VS2005 或更高版本，除了 C++，您已经在使用 MsBuild。.csproj 和 .vbproj 文件实际上是幕后的 MsBuild 文件。VS 托管 MsBuild 以进行构建。

不过，我无法提供关于 Nant 的太多/任何反馈。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-22T13:47:40.333

我将 nant 用于构建脚本，发现它可靠且支持良好。在这一点上，msbuild 和 nant 似乎在很多方面都差不多。Msbuild 有一些优点，它是由 Visual Studio 使用的，因此它是平台的内置部分。然而，nant 有很多功能、插件任务和大型社区，因为它的存在时间更长。

[Nant 为大多数源代码控制提供程序（包括 Vault](http://download-us.sourcegear.com/Vault/4.1.4.18402/VaultNAntTasks_4_1_4_18402.zip) ）提供插件，并为大多数构建工具（如 CruiseControl.NET 和 TeamCity）提供挂钩。

开发人员的体验与仅按 F5 略有不同。通常，nant 或 msbuild 文件包含许多在正常快速编译期间通常不会运行的功能。这些脚本用于运行测试、运行构建工具（例如 FxCop 或 StyleCop）、更新/提交工作副本、标记源代码、创建/更新/填充数据库以及构建安装程序或包。并非所有这些事情都是在每次编译时完成的。这是构建脚本工具提供最大好处的地方，并且在 Visual Studio 的范围之外完成。

我想你会对其中任何一个感到满意。如果您主要使用 MS 工具，则 msbuild 可能更加无缝。另一方面，如果您使用许多开源工具，而这些工具经常使用 nant，则 nant 可能是一个不错的选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-22T13:57:22.453

背景：我在 Ant 上做了很多工作，`make`在此之前和之后的工作更多（在非常大的系统上——想想数百万行代码的数万行 makefile），并且倾向于破解专门的构建系统定期。而且，哦，是的，我讨厌大多数 MS 工具。

我不能推荐 Ant 类型的构建系统。这么说让我很痛苦，但你最好还是坚持使用 Visual Studio。Nant 会带走很多你习惯的整洁的 GUI 类型的东西，而且它不太可能给你带来太多回报。

问题的很大一部分，可能是大部分，是该死的 XML 问题。（嗯，它甚至不是真正的 XML；尝试为 Ant 构建脚本编写 DTD。） James Duncan Davidson（Ant 的创始人）曾多次[表示](http://weblogs.java.net/blog/duncan/archive/2003/06/ant_dotnext.html)，将 XML 用于 Ant 是一个错误，而 Ken Arnold 在他的讨论中与杜肯戴维森一起，似乎[在说](http://weblogs.java.net/blog/arnold/archive/2003/06/duncan_davidson.html)杜肯戴维森有点害羞而不敢说的话。

Arnold 解释 James Gosling：“每个配置文件都成为一种编程语言，所以你不妨这样想。”

我完全理解您现在的“编程语言”非常非常糟糕，就在 VS 下构建您的项目而言，我很高兴并且印象深刻的是您想要解决这个问题。不幸的是，南特不会在这条路上帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-22T13:27:36.707

使用 CruiseControl.NET 自动化您的构建过程。MSBuild 比 NANT 更容易连接，MSBuild 位于 .NET Framework 文件夹中。SGear 有 CruiseControl.NET 的插件，您可以为 MSBuild 编写和下载任务插件... .

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-23T02:40:08.893

我曾经使用 Nant，最近我开始使用 MSBuild。

像您一样，我也是 Vault Sourcegear 用户，您会发现 Vault 没有 MSBuild 任务....还是有吗？

我拥有一些用于 Vault 的 MSBuild 任务的源代码。它们工作得很好，并且基于 NANT 任务中的一个端口（我不完全知道此时/日期）。

它们是从一个完成移植并打算在 SourceForge/CodePlex 或类似的地方开源它们的人那里得到的。但可惜他结婚了，然后就无所谓了。

我向他求代码，然后他通过电子邮件将其发送给我……从那以后，我一直坐在代码上，没有空闲时间或不愿费心将它们归还给他们会被爱的公共领域。

如果有人对他们感兴趣，我很高兴看到他们去更好的家

:p

http ==> img269.imageshack.us/img269/4467/msbuildsourcegearvaultt.png

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-22T17:13:42.560

[在这里](http://social.msdn.microsoft.com/forums/en-US/msbuild/thread/994761a3-ea9d-40c7-8d4f-4c208b2023f6/)找到关于 Nant vs MsBuild 的有用线程。

# c# - AOP 脏跟踪

> ID：897756
> 
> 赞同：2
> 
> 时间：2009-05-22T13:11:34.073
> 
> 标签：c#, .net, aop

在过去，我使用了几种不同的方法对我的实体进行脏检查。我一直在考虑使用 AOP 在新项目中完成此任务的想法。这将要求我在我想要在设置属性时调用脏标志逻辑的类中的每个属性上添加一个属性。如果我必须为属性的每个属性添加一行额外的代码，那么仅在设置器中调用 SetDirty() 方法有什么好处。我想我在问使用 AOP 方法有什么好处（如果有的话）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T13:29:53.897

我想说的是，在这种情况下不仅没有任何优势：还有一点劣势。`dirty()`无论是调用还是使用 AOP，都使用相同数量的代码行，但就`dirty()`意图而言，调用更加简单明了。

老实说，我认为 AOP 有点超卖了。它增加了另一个层次的间接性，在阅读代码方面，它通常不会有回报。

这里要考虑的关键是，它是否有助于下一个阅读本文的人（可能是几个月后的你）更快、更清楚地理解我想要做什么。如果您无法弄清楚不太直接的方法有什么更好的地方，那么您可能不应该使用它。（我以 Haskell 程序员的身份这么说，这意味着我自己并不反对非直截了当的方法。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T13:16:11.507

优点是，如果您决定更改如何调用脏标志逻辑的实现，您只需要进行一次更改（在 AOP 方法的主体中），而不是 N 次更改（将所有`SetDirty`调用替换为其他内容）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T13:16:54.827

如果您必须用属性装饰您的实体，我看不到任何好处。特别是如果您所做的只是调用一个方法。如果逻辑更复杂，那么我可以为使用 AOP 提出一个论据。

如果假设每次修改属性时都希望将其作为版本进行跟踪，这可能是可以注入的更复杂的行为，那么将其从属性中抽象出来可能是有益的。同时，您可能希望一次更改多个属性的版本，所以我回到那里并没有太大的价值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T13:24:42.703

AOP 的使用是为了横切关注点。这意味着您希望拥有诸如日志记录、安全性等功能，但业务逻辑确实不属于您的课程。这可能用于脏标志逻辑，因为域对象不应该关心它已被更改。这取决于您的 DirtyLogicUtility 或它的名称。

例如，您希望在每次调用方法时记录每次您可以将其放置在每个函数中，但稍后您希望有逻辑以便在每个其他调用时记录它。

AOP 让你的类保持干净，做他们应该做的事情，同时不理会其他部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-22T13:35:50.560

一些 AOP 实现，特别是 PostSharp，允许您在程序集级别应用属性，并使用通配符来确定它适用于哪些类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-22T18:00:33.900

为什么您希望脏检查由实体负责？您可以在其他地方进行管理。该模式称为[工作单元](http://www.martinfowler.com/eaaCatalog/unitOfWork.html)

# c# - 我在从 http 请求中获取和请求 XML 数据时遇到问题

> ID：897758
> 
> 赞同：-1
> 
> 时间：2009-05-22T13:12:03.043
> 
> 标签：c#, asp.net-3.5

我对此有 2 个问题

*   当我尝试将数据发布到 http 链接时，我的代码似乎总是遇到 401 禁止错误
*   从我应该返回的流中拉回和显示 xml 数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-22T13:20:21.870

我对您的第一个问题的猜测：您的“401 Forbidden”实际上是“401 Unauthorized”（“Forbidden”将是一个致命错误，它的代码为 403）。此 401 响应是 NTLM（Windows 集成）质询/响应身份验证机制的正常部分。您的请求必须附加正确的凭据，以便它可以自行授权，然后此错误将消失。

关于你的第二个问题——这取决于。你得到什么 XML *？*显示原始 XML 字符串有用吗？

# ruby-on-rails - 轨道中的form_remote_for

> ID：897762
> 
> 赞同：0
> 
> 时间：2009-05-22T13:12:57.800
> 
> 标签：ruby-on-rails, form-for

嗨，我尝试在 form_remote_for 的提交标记中使用 javascript 函数调用，但它无法找到即时调用的函数。如果我从 form_remote_for 调用相同的函数，则 ajax 停止工作。当我使用 form_remote_for NOT FORM_REMOTE_TAG 时，任何人都可以帮助我如何调用 javascript 函数......？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-23T07:27:10.770

我认为 REMOTE_FORM_FOR 是你需要的。

例子：

在您看来：

```
<%- remote_form_for(comment, :url => topic_post_comments_path(@topic, post), 
           :after => "submitComment(self);$('input').disable()") do |f| %>
<%= f.text_field :body, :size => 70, :class => "comment_body" %><br />
<%= f.submit "Submit", :class => "comment_submit" %>
<%- end -%> 
```

注意： :after 中的 javascript 函数是我自定义的 javascript 函数。

在你的控制器中（这里是 comments_controller）

```
@comment = @post.comments.new params[:comment] # actually, it depends on your model :p

respond_to do |format|
  # remember to handle exception here. like if @comment.save or not
  format.html
  format.js { 
    render :update do |page|
      pagepage.visual_effect :highlight, "comments"
    end
  }
end 
```

无论如何，这只是一个简单的示例，您必须在对 remote_form_for 有所了解后处理更多细节。

祝你好运。

# .net - .NET 或基于 Java 的小型桌面应用程序

> ID：897770
> 
> 赞同：0
> 
> 时间：2009-05-22T13:14:04.647
> 
> 标签：.net, client, desktop, java

我正在尝试构建一个非常小的桌面应用程序——人们可以很快下载的东西。我正在尝试决定是否应该在 .NET 或 Java 中构建它。我知道 Java 将是跨平台的，但我想知道很多 Windows 用户是否没有在他们的计算机上安装 JRE，在这种情况下我被告知他们需要下载大约 15MB 的 JRE 软件才能运行这个应用程序，而.NET 将自动预装在大多数 Windows 机器中。有谁知道有多少百分比的 Windows 用户在他们的机器上没有 JRE？预装 .NET 的 Windows 用户的年龄百分比是多少？

PS。我们的决定是：如果大量 Windows 用户拥有 JRE，则选择 Java，如果没有，则选择 .NET。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-22T13:23:03.177

我会根据您的团队更擅长使用哪种语言来创建可靠的软件来做出决定。

无论用户是否需要安装 Java 运行时，都可以选择其中一个，这似乎不再是一个问题。

你能提供更好的软件吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-22T13:21:34.583

好吧，首先，跨平台支持对您来说有多重要？如果这非常重要，那么 Java 就是要走的路，因为 .NET 在您的情况下确实不是初学者。但是，如果您正在考虑使用 .NET，那么我假设跨平台并不重要，在这种情况下，.NET 将为您提供一条更简单的途径，让您的应用程序看起来和表现得像典型的 Windows 应用程序。

至于下载框架的问题是一个障碍；很多用户不会有 JRE。而且，许多用户也不会拥有*最新*版本的 .NET 框架。这真的取决于这些障碍对你来说有多严重，跨平台支持有多重要，以及你的目标受众是谁。

编辑：我应该提到这一点，但有可能使用“静态链接”之类的工具，如 Xenocode 的[PostBuild.NET](http://www.xenocode.com/Products/Postbuild-for-NET/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T13:20:27.923

我对你的问题有点困惑。尚不清楚跨平台对您是否重要。如果是，那么 Java 就是赢家，除非您也想使用 Mono。我的其余答案假设跨平台并不重要。

这在很大程度上取决于您认为您的客户群正在使用的操作系统。AFAIK，JRE 没有预装在任何 Windows 操作系统上，因此所有 JRE 安装都是由用户手动完成的，或者由另一个自行安装的程序完成。.Net 框架预装在多个版本的 Windows 上。

*   .Net 框架 1.1 W2K3
*   .Net Fraemwork 2.0 Vista 及以上

至于原始数字，我不知道它们是什么，或者是否有很好的统计数据可用于此类信息。我的**观点**是，给定 Windows 操作系统，与 JRE 相比，您更有可能安装 .Net。只是因为预装了一组操作系统版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-22T13:21:53.210

由于某些法律历史，Java 堆栈并未原生包含在 Windows 中，而 .Net 框架作为操作系统更新的一部分被推出。

这是桌面应用程序空间中一个平台优于另一个平台的最佳论据之一。（其中之一是使用 MS 堆栈在房子的 Windows 端制作“漂亮”的 UI 的简易性）。

Java 在 Windows 上的安装渗透（以及 JRE 是否合适的并发问题）倾向于模仿目标受众的精明，或玩决定依赖 Java 的游戏的愿望。

**底线：**您可以最好地判断您的目标受众；他们的人口统计数据将表明他们安装特定任一运行时的可能性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-22T13:24:40.800

还有一个因素需要考虑...人们或多或少习惯于安装 JRE，几乎每个人都必须安装它才能使用特定的小程序，并且该过程相当简单明了，但是在安装 . NET 运行时（至少在 ol'Windows 中，我不记得我是否曾经在 XP 或 Vista 中做过），以及它们所有的向后不兼容......这很讨厌！

（从我不得不用 .NET 和 Java 为大学做作业的时候起）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-22T20:54:08.373

请记住，.NET 目前*确实*是跨平台**的**，直到版本 2.x。这是 Mono 项目 afaik 支持的 .NET 版本。

上述任何内容仍将针对大量 PC（高达所有主流操作系统的 80-90%），但不会是真正的跨平台。除非 Microsoft 更改其同时向所有平台发布 .NET 框架的政策，否则不要指望采用最新的功能并仍然在各种操作系统中获得可移植性。

JVM 在这方面看起来更好。如果你愿意的话，你总是可以并行实现所有新的花哨的语言（Scala 等）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-22T20:43:21.797

如果您正在考虑使用 .NET，请查看[Silverlight](http://silverlight.net/)；看起来这将是一个很好的选择，并且是一个支持多种操作系统的*小型下载（尤其是对于单声道/linux 的“*[月光](http://www.mono-project.com/Moonlight)”）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-22T14:02:51.100

我在安装 .Net 框架时从来没有遇到过问题。事实上，如果没有安装，大多数部署会自动消失并为用户获取它。

另一方面，Java 既有小程序版本又有独立版本——Java 的 dl 和设置也存在浏览器兼容性问题。

我认为真正的重点是你最能开发什么......在一天结束时，30-40 mb dl 真的已经不多了......但这当然取决于你是什么样的应用程序发展。

至于单声道，我的实验发现它很好，但并不完全适用于有许多用户的应用程序 - .Net 框架有很多糖果，这使得这变得更容易 - 尽管我认为这将是有争议的由对单声道有更多经验的人。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-23T21:59:13.643

Flex 的人告诉我，通常超过 90% 的计算机都安装了 Java（他们吹嘘超过 95% 的计算机安装了 Flash）。我不知道 Windows 的 .NET 数字是什么，但不是每个人都知道。由于现在似乎至少有 10% 的用户没有使用 Windows（越来越多），因此您似乎无法一直取悦所有人。

我想知道：为什么不是网络应用程序？如果您正在操作本地文件，为什么不使用签名的小程序/Webstart 应用程序？

Curtisk 关于开发最佳应用程序的观点是恰当的，达到技术最佳点比达到用户群最佳点更容易。如果您可以在人们真正喜欢的任何平台上构建一些东西，那么您就会知道您做出了正确的决定。

# c# - 如何判断 IIS 何时在 ASP.NET (C#) 中应用“默认页面”设置

> ID：897771
> 
> 赞同：2
> 
> 时间：2009-05-22T13:14:14.973
> 
> 标签：c#, asp.net, iis

[当用户请求http://www.mysite.com/Default.aspx](http://www.mysite.com/Default.aspx)到[http://www.mysite.com/](http://www.mysite.com/)时，我试图发出 301 重定向

我遇到的问题是，我可以在 Request 中找到的每个属性（Request.Url、Request.RawUrl 等）对于这两个请求都是相同的。

编辑以进一步澄清：这是在共享网络主机上，我无法安装 ISAPI 扩展。

再编辑一次。显然，我在主机上与之交谈的第一个技术支持人员不知道他在说什么，他们安装了 ISAPI 重写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T13:25:59.830

[Steve Wortham 的博客](http://swortham.blogspot.com/2008/12/redirecting-default-page-defaultaspx-to.html)描述了他如何解决同样的问题。

他使用[了 Ionic 的免费 Isapi Rewrite Filter](http://www.codeplex.com/IIRF)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T13:21:35.130

只需使用 url 重写 ISAPI 过滤器。这是无痛的。[Scott Gu 博客上的这个页面](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)包含了您需要的几乎所有信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T13:59:37.610

虽然很多人引用 SEO 作为想要这样做的原因，但我只想做一个小观察：

> [在我的网站上搜索“欢迎”一词](http://www.google.co.uk/search?q=site%3Adoodle.co.uk+welcome&btnG=Search&meta=)

该词出现在主页 (default.aspx) 和博客文章中。目前，我看到此搜索的三个结果：

[![搜索结果](https://i.stack.imgur.com/Ldznu.png)](https://i.stack.imgur.com/Ldznu.png)

中间的一个是我的主页，您会注意到它只列出了一次 - 但您可以轻松访问，如果您浏览到它，就留在 /default.aspx（实际上，网站上的导航链接到 /Default.aspx）。 ASP）。

如果有的话，报告的问题就更大了，例如谷歌分析将 /default.aspx 和 /Default.aspx 视为**不同**的页面（但同样，搜索结果忽略了 Windows 服务器上的大小写）：

[![分析重复](https://i.stack.imgur.com/0gOFL.png)](https://i.stack.imgur.com/0gOFL.png)

所以，我要说的是，搜索引擎通常比 SEO 顾问给他们的功劳更聪明......

对于我的网站来说，一个更大的问题是我有三个域名指向它，但仍然没有为其他域名设置重定向。

# sql - MS-ACCESS：删除除 top 1 之外的所有行并从查询中更新表

> ID：897780
> 
> 赞同：1
> 
> 时间：2009-05-22T13:16:11.053
> 
> 标签：sql, ms-access, sql-update

我几乎完成了这个，只是最后的几个小问题。我现在需要从表中删除所有记录，除了前 1 个记录，其中 readings_miu_id 是“DISTINCT”列。换句话说，我需要从表中删除除第一个 DISTINCT readings_miu_id 之外的所有记录。我假设我需要做的就是修改基本的删除语句：

```
DELETE FROM analyzedCopy2
WHERE readings_miu_id = some_value 
```

但我不知道如何将 some_column=some_value 部分更改为：

```
where some_column notequal to (select top 1 from analyzedCopy2 as A 
where analyzedCopy2.readings_miu_id = A.readings_miu_id) 
```

然后我需要弄清楚如何使用 UPDATE 语句从查询中更新表（analyzedCopy2）（这是我想要存储到表analyzedCopy2 中的RSSI 列中的所有值当前所在的位置）。我试过这个：

```
UPDATE analyzedCopy2 from testQuery3 SET analyzedCopy2.RSSI = 
(select AvgOfRSSI from testQuery3 INNER JOIN  analyzedCopy2 on analyzedCopy2.readings_miu_id =  testQuery3.readings_miu_id where analyzedCopy2.readings_miu_id = testQuery3.readings_miu_id) 
where analyzedCopy2.readings_miu_id = testQuery3.readings_miu_id 
```

但显然我不能在更新语句中使用 FROM 。有什么想法吗？

我敢肯定我会以一种非常不标准的方式（如果不是完全错误的话，也可能是错误的），但我不允许使用 vb.net2008 来拉取和操作然后像我想要的那样存储数据所以我现在被困在 ms-access 中使用 sql 语句，这是一个很好的学习体验（即使尝试做我在 sql 语句中必须做的奇怪的事情也让我用我的头来*比喻我的甲板当然*）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-22T15:11:55.127

MS Access UPDATE sql 语句不能引用查询，但可以引用表。所以要做的就是将查询结果存储到一个表中。

```
SELECT YourQuery.* 
INTO TempTable1
FROM YourQuery 
```

现在您可以在 UPDATE 查询中使用 TempTable1：

```
UPDATE TargetTable
INNER JOIN TempTable1 ON TempTable1.TargetTableId = TargetTable.Id
SET TargetTable.TargetField = TempTable1.SourceField 
```

请参阅[我对这个问题的回答](https://stackoverflow.com/questions/871905/use-select-inside-a-update-query)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T13:40:49.740

我在这台机器上没有访问权限的副本，而且我已经有几年没有涉足访问权限了，所以我在这里进行了一次疯狂的尝试，但是你能做一个吗？

```
delete from analyzedCopy2
where readings_miu_id not in (select top 1 readings_miu_id from analyzedCopy2 order by...) 
```

（您需要 order by 才能获得正确的前 1 条记录，也许是按 id 排序？）

我没有希望在没有访问副本的情况下帮助您完成第二个。我知道我会如何在 TSQL 中做到这一点，但访问是一个完全不同的 wtf 水壶 :-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T12:19:21.900

我试图使过于复杂，因为我需要提取的所有记录在每个字段中都有相同的信息，我需要做的就是使用：

```
 SELECT DISTINCT readings_miu_id, DateRange, RSSI, ColRSSI, Firmware, CFGDate, FreqCorr, Active, OriginCol, ColID, Ownage, SiteID, PremID, prem_group1, prem_group2
FROM analyzedCopy2   
ORDER BY readings_miu_id; 
```

为了拉每个 readings_miu_id 的前 1 条记录。

# c# - 如何为使用 Axis 1.4 Web 服务的 C# Web 服务客户端添加自定义 Http 标头

> ID：897782
> 
> 赞同：53
> 
> 时间：2009-05-22T13:16:33.173
> 
> 标签：c#, web-services, wsdl, axis

我正在尝试用 c# 编写一个 Web 服务客户端，该 Web 服务是 Java Axis 1.4。Axis 服务需要 HTTP 标头中的**Authorization: Basic Base64EncodedToken**标头值。我找不到以标准方式在 Visual Studio.net 中使用 Web 服务的标准方式设置此标头的方法，例如普通 WSDL 生成的引用或 WSE3.0

我不能使用 WCF，因为该项目是使用 .net 2.0 开发的。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2010-05-06T10:08:45.220

似乎原作者已经找到了他们的解决方案，但是对于任何到这里来希望添加实际自定义标头的人来说，如果您有权访问 mod 生成的协议代码，您可以覆盖`GetWebRequest`：

```
protected override System.Net.WebRequest GetWebRequest(Uri uri)
{
  System.Net.WebRequest request = base.GetWebRequest(uri);
  request.Headers.Add("myheader", "myheader_value");
  return request;
} 
```

`DebuggerStepThroughAttribute`如果要进入该属性，请确保删除该属性。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2009-11-11T03:21:55.273

我们在这里谈论 WCF 吗？我遇到了服务调用未添加 http 授权标头的问题，将任何调用包装到此语句中解决了我的问题。

```
 using (OperationContextScope scope = new OperationContextScope(RefundClient.InnerChannel))
  {
            var httpRequestProperty = new HttpRequestMessageProperty();
            httpRequestProperty.Headers[System.Net.HttpRequestHeader.Authorization] = "Basic " +
            Convert.ToBase64String(Encoding.ASCII.GetBytes(RefundClient.ClientCredentials.UserName.UserName + ":" +
            RefundClient.ClientCredentials.UserName.Password));
            OperationContext.Current.OutgoingMessageProperties[HttpRequestMessageProperty.Name] = httpRequestProperty;

            PaymentResponse = RefundClient.Payment(PaymentRequest);
   } 
```

这是通过 .NET 使用 http 或 https 上的基本身份验证运行对 IBM ESB 的 SOAP 调用。

我希望这对某人有所帮助，因为我在网上寻找解决方案时遇到了很多问题。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2017-03-06T01:55:38.483

Instead of modding the auto-generated code or wrapping every call in duplicate code, you can inject your custom HTTP headers by adding a custom message inspector, it's easier than it sounds:

```
public class CustomMessageInspector : IClientMessageInspector
{
    readonly string _authToken;

    public CustomMessageInspector(string authToken)
    {
        _authToken = authToken;
    }

    public object BeforeSendRequest(ref Message request, IClientChannel channel)
    {
        var reqMsgProperty = new HttpRequestMessageProperty();
        reqMsgProperty.Headers.Add("Auth-Token", _authToken);
        request.Properties[HttpRequestMessageProperty.Name] = reqMsgProperty;
        return null;
    }

    public void AfterReceiveReply(ref Message reply, object correlationState)
    { }
}

public class CustomAuthenticationBehaviour : IEndpointBehavior
{
    readonly string _authToken;

    public CustomAuthenticationBehaviour (string authToken)
    {
        _authToken = authToken;
    }
    public void Validate(ServiceEndpoint endpoint)
    { }

    public void AddBindingParameters(ServiceEndpoint endpoint, BindingParameterCollection bindingParameters)
    { }

    public void ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher)
    { }

    public void ApplyClientBehavior(ServiceEndpoint endpoint, ClientRuntime clientRuntime)
    {
        clientRuntime.ClientMessageInspectors.Add(new CustomMessageInspector(_authToken));
    }
} 
```

And when instantiating your client class you can simply add it as a behavior:

```
this.Endpoint.EndpointBehaviors.Add(new CustomAuthenticationBehaviour("Auth Token")); 
```

This will make every outgoing service call to have your custom HTTP header.

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-05-22T13:43:19.047

如果要发送自定义 HTTP 标头（不是 SOAP 标头），则需要使用 HttpWebRequest 类，代码如下所示：

```
HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(url);
webRequest.Headers.Add("Authorization", token); 
```

您不能使用 Visual Studio 生成的代理添加 HTTP 标头，这可能会很痛苦。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2010-08-10T21:48:52.507

我找到了这段代码并解决了我的问题。

[http://arcware.net/setting-http-header-authorization-for-web-services/](http://arcware.net/setting-http-header-authorization-for-web-services/)

```
protected override WebRequest GetWebRequest(Uri uri)
{
    // Assuming authValue is set from somewhere, such as the config file
    HttpWebRequest request = (HttpWebRequest)base.GetWebRequest(uri);
    request.Headers.Add("Authorization", string.Format("Basic {0}", authValue));
    return request;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-19T16:11:59.623

user334291's answer was a life saver for me. Just want to add how you can add what the OP originally intended to do (what I ended up using):

Overriding the GetWebRequest function on the generated webservice code:

```
protected override System.Net.WebRequest GetWebRequest(Uri uri)
{
    System.Net.WebRequest request = base.GetWebRequest(uri);          
    string auth = "Basic " + Convert.ToBase64String(System.Text.Encoding.Default.GetBytes(this.Credentials.GetCredential(uri, "Basic").UserName + ":" + this.Credentials.GetCredential(uri, "Basic").Password));
    request.Headers.Add("Authorization", auth);
    return request;
} 
```

and setting the credentials before calling the webservice:

```
 client.Credentials = new NetworkCredential(user, password); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-01T23:14:04.297

这对我有用：

```
protected override System.Net.WebRequest GetWebRequest(Uri uri)
{
        HttpWebRequest request;
        request = (HttpWebRequest)base.GetWebRequest(uri);
        NetworkCredential networkCredentials =
        Credentials.GetCredential(uri, "Basic");
        if (networkCredentials != null)
        {
            byte[] credentialBuffer = new UTF8Encoding().GetBytes(
            networkCredentials.UserName + ":" +
            networkCredentials.Password);
            request.Headers["Authorization"] =
            "Basic " + Convert.ToBase64String(credentialBuffer);
            request.Headers["Cookie"] = "BCSI-CS-2rtyueru7546356=1";
            request.Headers["Cookie2"] = "$Version=1";
        }
        else
        {
            throw new ApplicationException("No network credentials");
        }
        return request;
} 
```

不要忘记设置此属性：

```
service.Credentials = new NetworkCredential("username", "password"); 
```

Cookie and Cookie2 are set in header because java service was not accepting the request and I was getting Unauthorized error.

# c# - Windows.Forms 和 gtk# 的互操作性？

> ID：897789
> 
> 赞同：0
> 
> 时间：2009-05-22T13:17:48.287
> 
> 标签：c#, winforms, interop, gtk#

我可以将使用 System.Drawing.Bitmap 的代码与使用 GTK# 的程序中的其他代码结合起来吗？我希望能够显示在 GTK# 窗口/小部件中处理的位图图像。

更一般地说，这两个工具包之间是否有任何互操作性？例如，是否有任何类（如 Rectangle）可以同时在两者上工作，或者可能是包装类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T14:38:58.390

System.Drawing 并不是真正特定于 WinForms，至少可以从Gtk# 中[的 Gdk.Drawables 获取 Graphics 实例。](http://www.go-mono.com/docs/index.aspx?link=T:Gtk.DotNet.Graphics)

# python - Python 的 sys.path 是从哪里初始化的？

> ID：897792
> 
> 赞同：124
> 
> 时间：2009-05-22T13:19:05.867
> 
> 标签：python, path, sys

Python 的 sys.path 是从哪里初始化的？

**UPD**：Python 在引用 PYTHONPATH 之前添加了一些路径：

```
 >>> import sys
    >>> from pprint import pprint as p
    >>> p(sys.path)
    ['',
     'C:\\Python25\\lib\\site-packages\\setuptools-0.6c9-py2.5.egg',
     'C:\\Python25\\lib\\site-packages\\orbited-0.7.8-py2.5.egg',
     'C:\\Python25\\lib\\site-packages\\morbid-0.8.6.1-py2.5.egg',
     'C:\\Python25\\lib\\site-packages\\demjson-1.4-py2.5.egg',
     'C:\\Python25\\lib\\site-packages\\stomper-0.2.2-py2.5.egg',
     'C:\\Python25\\lib\\site-packages\\uuid-1.30-py2.5.egg',
     'C:\\Python25\\lib\\site-packages\\stompservice-0.1.0-py2.5.egg',
     'C:\\Python25\\lib\\site-packages\\cherrypy-3.0.1-py2.5.egg',
     'C:\\Python25\\lib\\site-packages\\pyorbited-0.2.2-py2.5.egg',
     'C:\\Python25\\lib\\site-packages\\flup-1.0.1-py2.5.egg',
     'C:\\Python25\\lib\\site-packages\\wsgilog-0.1-py2.5.egg',
     'c:\\testdir',
     'C:\\Windows\\system32\\python25.zip',
     'C:\\Python25\\DLLs',
     'C:\\Python25\\lib',
     'C:\\Python25\\lib\\plat-win',
     'C:\\Python25\\lib\\lib-tk',
     'C:\\Python25',
     'C:\\Python25\\lib\\site-packages',
     'C:\\Python25\\lib\\site-packages\\PIL',
     'C:\\Python25\\lib\\site-packages\\win32',
     'C:\\Python25\\lib\\site-packages\\win32\\lib',
     'C:\\Python25\\lib\\site-packages\\Pythonwin'] 
```

我的 PythonPATH 是：

```
 PYTHONPATH=c:\testdir 
```

我想知道 PYTHONPATH 之前的那些路径来自哪里？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2016-07-15T19:19:54.580

Python 真的很努力地智能设置[`sys.path`](https://docs.python.org/2/library/sys.html#sys.path). 如何设置会变得[非常](https://github.com/python/cpython/blob/master/Modules/getpath.c) [复杂](https://github.com/python/cpython/blob/master/PC/getpathp.c)。以下指南是一个淡化的、有些不完整、有些错误但希望对普通 Python 程序员有用的指南，说明当 Python 确定将什么用作 、 、 和 的初始 值时*会*发生什么在*正常*的 python安装上。`sys.path``sys.executable``sys.exec_prefix``sys.prefix`

 *首先，python 尽其所能根据操作系统告诉它的信息来确定它在文件系统上的实际物理位置。如果操作系统只是说“python”正在运行，它会发现自己在 $PATH 中。它解析任何符号链接。完成此操作后，它找到的可执行文件的路径将用作 的值`sys.executable`，没有 ifs、ands 或 buts。

`sys.exec_prefix`接下来，它确定和 的初始值`sys.prefix`。

如果`pyvenv.cfg`在同一目录 `sys.executable`或上一个目录中有一个文件被调用，python 会查看它。不同的操作系统对这个文件做不同的事情。

python 在此配置文件中查找的值之一是配置选项`home = <DIRECTORY>`。Python 将使用这个目录而不是包含`sys.executable` 当它动态设置的初始值时的目录`sys.prefix`。如果`applocal = true`设置出现在 `pyvenv.cfg`Windows 上的文件中，但未出现在`home = <DIRECTORY>`设置中，`sys.prefix`则将设置为包含`sys.executable`.

接下来，`PYTHONHOME`检查环境变量。在 Linux 和 Mac 上， 并`sys.prefix`设置`sys.exec_prefix`为环境`PYTHONHOME`变量（如果存在），*取代*. 在 Windows 上，如果存在，则设置为环境变量，除非在*中*存在设置，否则将使用该设置。`home = <DIRECTORY>``pyvenv.cfg``sys.prefix``sys.exec_prefix``PYTHONHOME`*`home = <DIRECTORY>``pyvenv.cfg`*

 *否则，这些`sys.prefix`和`sys.exec_prefix`通过从 的位置`sys.executable`或由`home`给定的目录（`pyvenv.cfg`如果有）向后走来找到。

如果`lib/python<version>/dyn-load`在该目录或其任何父目录中找到该文件，则该目录设置为 `sys.exec_prefix`在 Linux 或 Mac 上。如果 `lib/python<version>/os.py`在目录或其任何子目录中找到该文件，则该目录将设置为`sys.prefix`Linux、Mac 和 Windows 上的目录，并`sys.exec_prefix`设置为与 Windows 上相同的值 `sys.prefix`。`applocal = true`如果已设置，则在 Windows 上跳过这整个步骤 。要么使用 的目录，要么`sys.executable`如果`home`在 中设置，则将`pyvenv.cfg`其用于 的初始值`sys.prefix`。

如果它找不到这些“地标”文件或`sys.prefix`尚未找到，则 python 设置`sys.prefix`为“后备”值。例如，Linux 和 Mac 使用预编译的默认值作为 和 的`sys.prefix`值`sys.exec_prefix`。Windows 等到`sys.path`完全确定为 `sys.prefix`.

然后，（你们都在等待什么，）python 确定要包含在`sys.path`.

1.  python 正在执行的脚本目录添加到`sys.path`. 在 Windows 上，这始终是空字符串，它告诉 python 使用脚本所在的完整路径。
2.  PYTHONPATH 环境变量的内容（如果已设置）将添加到`sys.path`，*除非*您在 Windows 上并且`applocal`在`pyvenv.cfg`.
3.  `<prefix>/lib/python35.zip`Linux/Mac 和 Windows 上 的 zip 文件路径`os.path.join(os.dirname(sys.executable), "python.zip")`添加到`sys.path`.
4.  如果在 Windows 上并且没有`applocal = true`在 中设置`pyvenv.cfg`，则添加注册表项的子项的内容（ `HK_CURRENT_USER\Software\Python\PythonCore\<DLLVersion>\PythonPath\`如果有）。
5.  如果在 Windows 上没有`applocal = true`设置`pyvenv.cfg`，并且`sys.prefix`找不到，则添加注册表项的*核心内容*`HK_CURRENT_USER\Software\Python\PythonCore\<DLLVersion>\PythonPath\`（如果存在）；
6.  如果在 Windows 上并且没有`applocal = true`在 中设置`pyvenv.cfg`，则添加注册表项的子项的内容（ `HK_LOCAL_MACHINE\Software\Python\PythonCore\<DLLVersion>\PythonPath\`如果有）。
7.  如果在 Windows 上没有`applocal = true`设置`pyvenv.cfg`，并且`sys.prefix`找不到，则添加注册表项的*核心内容*`HK_CURRENT_USER\Software\Python\PythonCore\<DLLVersion>\PythonPath\`（如果存在）；
8.  如果在 Windows 上，并且未设置 PYTHONPATH，未找到前缀，并且不存在注册表项，则添加 PYTHONPATH 的相对编译时值；否则，忽略此步骤。
9.  编译时宏 PYTHONPATH 中的路径是相对于动态找到的`sys.prefix`.
10.  在 Mac 和 Linux 上，`sys.exec_prefix`添加 的值。在 Windows 上，添加了用于（或将被用于）动态搜索的目录`sys.prefix`。

在 Windows 上的这个阶段，如果没有找到前缀，那么 python 将尝试通过在*所有*目录中搜索`sys.path`地标文件来确定它，就像它尝试使用`sys.executable`之前的目录一样，直到找到一些东西。如果没有，`sys.prefix`则留空。

最后，在这一切之后，Python 加载了`site`模块，它进一步添加了以下内容`sys.path`：

> 它首先从头部和尾部构建最多四个目录。对于头部，它使用`sys.prefix`and `sys.exec_prefix`; 空头被跳过。对于尾部，它使用空字符串然后`lib/site-packages`（在 Windows 上）或`lib/pythonX.Y/site-packages` 然后`lib/site-python`（在 Unix 和 Macintosh 上）。对于每个不同的头尾组合，它会查看它是否引用了现有目录，如果是，则将其添加到 sys.path 并检查新添加的配置文件路径。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2009-05-22T13:21:25.457

“从环境变量 PYTHONPATH 初始化，加上依赖于安装的默认值”

-- [http://docs.python.org/library/sys.html#sys.path](http://docs.python.org/library/sys.html#sys.path)

# user-interface - 仅在黑莓的文本框中更改特定文本的颜色

> ID：897793
> 
> 赞同：4
> 
> 时间：2009-05-22T13:19:12.840
> 
> 标签：user-interface, blackberry, java-me

如何仅在黑莓应用程序的文本框中更改特定文本的颜色？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-25T02:34:37.223

不幸的是，答案是你自己滚动 - 没有可编辑的文本字段控件可以让你改变字体颜色。@Mark Novakowski 的答案是解决此问题的标准方法，但会将所有文本更改为一种颜色。

如果您不担心支持珍珠风格的 SureType 键盘，那么您可以覆盖 ActiveRichTextField 上的 keyChar 并手动将字符添加到 ActiveRichTextField 中的文本中。

对于 SureType 字段，答案更糟糕 - 您没有对非 Qwerty 手机（Pearl 系列）的 SureType API（用于正确处理预测文本弹出窗口）的低级别访问权限，因此您必须求助于一些真实的使完全自定义的文本字段在这些设备上正常运行的技巧。它可能归结为必须在管理器中安排多个 EditField，例如一个 EditField 被覆盖以显示已读（如 Marks 的回答）。诀窍将是根据需要动态创建和添加文本字段。

是的，有时 RIM API 使简单的事情变得容易，而困难的事情几乎不可能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-22T21:14:21.907

你检查过 ActiveRichTextField 吗？我自己只使用过 RichTextField，但看起来 ActiveRichTextField 允许您为文本区域指定颜色以及字体和格式。需要进行一些设置才能使这些字段正常运行，但请查看 RichTextField 的 javadoc，它给出了很好的解释。

这是一些示例代码：

```
int offsets[] = new int[]{0, 5, 11};
Font[] fonts = new Font[]{Font.getDefault(), Font.getDefault()};
int bg[] = new int[]{Color.WHITE, Color.WHITE};
int fg[] = new int[]{Color.BLACK, Color.GREEN};
byte attributes[] = new byte[]{0, 1};

add(new ActiveRichTextField("Hello world", offsets, attributes, fonts, fg, bg, 0)); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-23T00:15:51.493

正如 Fostah 在他的评论中所说，TextBox 类在改变外观方面不是很灵活。甚至许多“Field”类的外观和感觉也很难改变。

但是，如果您有一定的灵活性并且可以使用诸如 EditField（或其变体）之类的字段而不是 TextBox，那么它应该只是覆盖paint方法的情况。就像是：

```
protected void paint(Graphics graphics) {
    graphics.setColor(Color.RED);
    super.paint(graphics);
} 
```

# .net - 如何使用 .net StreamReader 打开已打开的文件？

> ID：897796
> 
> 赞同：55
> 
> 时间：2009-05-22T13:19:33.777
> 
> 标签：.net, file, streamreader, readonly

我有一些 .csv 文件用作测试台的一部分。我可以毫无问题地打开它们并阅读它们，*除非*我已经在 Excel 中打开了文件，在这种情况下我会得到`IOException`：

> System.IO.IOException：该进程无法访问文件“TestData.csv”，因为它正被另一个进程使用。

这是来自测试台的片段：

```
using (CsvReader csv = new CsvReader(new StreamReader(new FileStream(fullFilePath, FileMode.Open, FileAccess.Read)), false))
{
    // Process the file
} 
```

这是 StreamReader 的限制吗？我可以在其他应用程序（例如 Notepad++）中打开该文件，因此它不会是操作系统问题。也许我需要使用其他课程？如果有人知道我如何解决这个问题（除了关闭 excel！），我将不胜感激。

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2009-05-22T14:05:09.143

正如 Jared 所说，除非打开文件的其他实体允许共享读取，否则您无法执行此操作。Excel 允许共享读取，即使对于它已打开以供写入的文件也是如此。因此，您必须使用**FileShare.ReadWrite**参数打开文件流。

FileShare 参数经常被误解。它指示文件的*其他*打开器可以做什么。它适用于过去和未来的开场白。不将 FileShare 视为对先前打开程序（例如 Excel）的追溯禁止，而是当前打开或任何未来打开不得违反的约束。

在当前尝试打开文件的情况下，FileShare.Read 表示“只有在任何先前的打开者*仅为*读取而打开此文件时，才能成功为我打开此文件。” 如果您在 Excel 为写入而打开的文件上指定 FileShare.Read，则*您的*打开将失败，因为它违反了约束，因为 Excel 将其打开*为写入*。

由于 Excel 已打开文件以进行写入，因此如果您希望打开成功，则必须使用*FileShare.ReadWrite打开文件。*考虑 FileShare 参数的另一种方式：它指定“其他人的文件访问权限”。

现在假设一个不同的场景，您正在打开一个当前未被任何其他应用程序打开的文件。FileShare.Read 说“未来的开启者只能通过读取权限打开文件”。

从逻辑上讲，这些语义是有意义的 - FileShare.Read 意味着，如果其他人已经在编写文件，您不想读取文件，如果您已经在读取文件，您也不希望其他人写入文件。FileShare.ReadWrite 意味着，即使其他人正在编写文件，您也愿意读取文件，并且在您读取文件时让其他打开者写入文件也没有问题。

在任何情况下，这都不允许多个作者。FileShare 类似于数据库 IsolationLevel。您在此处所需的设置取决于您需要的“一致性”保证。

例子：

```
using (Stream s = new FileStream(fullFilePath, 
                                 FileMode.Open,
                                 FileAccess.Read,
                                 FileShare.ReadWrite))
{
  ...
} 
```

或者，

```
using (Stream s = System.IO.File.Open(fullFilePath, 
                                      FileMode.Open, 
                                      FileAccess.Read, 
                                      FileShare.ReadWrite))
{
} 
```

* * *

**附录：**

[System.IO.FileShare](http://msdn.microsoft.com/en-us/library/system.io.fileshare.aspx)上的文档有点少。如果您想获得直接的事实，请转到[Win32 CreateFile 函数的文档](http://msdn.microsoft.com/en-us/library/aa363858(VS.85).aspx)，它更好地解释了 FileShare 概念。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-05-22T13:22:00.603

**编辑**

我仍然不能 100% 确定为什么这是答案，但您可以通过将 FileShare.ReadWrite 传递给 FileStream 构造函数来解决此问题。

```
using (CsvReader csv = new CsvReader(new StreamReader(new FileStream(fullFilePath, FileMode.Open, FileAccess.Read, FileShare.ReadWrite)), false)
{
  ...
} 
```

此刻我的好奇心控制住了我，我试图理解为什么这是特定的答案。如果我以后弄明白，我会用信息更新它。

最好的文档实际上似乎在[CreateFile](http://msdn.microsoft.com/en-us/library/aa363858.aspx)函数中。这是 .Net 将在后台调用以打开文件的函数（创建文件有点用词不当）。它对打开文件的共享方面的工作方式有更好的文档。另一种选择是只阅读 Cheeso 的答案

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-22T13:25:04.250

如果另一个进程打开了文件，您通常可以使用 File.Copy 然后打开副本。不是一个优雅的解决方案，而是一个务实的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T04:34:41.867

另一个问题是，如果您打开`FileStream`with `FileShare.ReadWrite`，该文件的后续打开还必须指定`FileShare.ReadWrite`，否则您将收到“另一个进程正在使用此文件”错误。

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2012-11-29T13:16:30.413

使用 System.Diagnostics；

您可以简单地调用 Process.Start(“filename&Path”)

不确定这是否有帮助，但这就是我刚刚用来在我们的 Intranet 上实现“预览 PDF”按钮的方法。

# c# - 用于扩展方法的 WCF 命名约定

> ID：897804
> 
> 赞同：2
> 
> 时间：2009-05-22T13:20:12.853
> 
> 标签：c#, .net, wcf

我有一个公开为我想要返工的 WCF 服务的 OperationContract 的方法。以前的程序员写过类似的东西：

```
public ReportResultObject GetReport(string stringContainingParameters) 
```

我想要一个更像这样的方法：

```
public ReportResultObject GetReport(int[] someIds, bool includeAdditionalInformation) 
```

由于 WCF 不允许在没有在 OperationContract 中指定 Name 属性的情况下使用重载方法，并且我不想破坏当前客户端，因此对于这种情况是否有命名约定？像 GetReportV2 或 GetReportHeyUseMeInstead 这样的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-22T13:45:26.860

通过再次做同样的事情，当您需要添加另一个参数时，您只是将自己设置为同样的“混乱”。我强烈建议您考虑使用单个参数，即数据合同；

```
public ReportResultObject GetReportTheSuperDooperWay(
    GetReportParameters parameters) 
```

这给了你什么？出色地

```
[DataContract]
public class GetReportParameters
{
 [DataMember(IsRequired=false)]
 public string parameters;

 [DataMember(IsRequired=false)]
 public int[] someIds;

 [DataMember(IsRequired=false)]
 bool includeAdditionalInformation
} 
```

因此，因为每个字段都是可选的，您可以添加新字段而不会破坏现有客户端。这是一个相当简单的示例，因为您还希望实现[IExtensibleDataObject](http://blogs.msdn.com/craigmcmurtry/archive/2006/07/23/676104.aspx)并且您应该在[服务](http://www.dasblonde.net/PermaLink,guid,a0b48932-4b7d-4d7b-9886-e7d0764d8908.aspx)和[数据](http://www.dasblonde.net/PermaLink,guid,a0b48932-4b7d-4d7b-9886-e7d0764d8908.aspx)合同级别通过命名空间进行版本控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T13:30:02.053

我会选择一些有意义的东西，让人们更有可能识别它并适当地使用它。

```
public ReportResultObject GetReportWithAdditionalInformation(...) 
```

不过可能有点太多了！

我当然会避免`GetReportV2`或类似。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T14:15:08.907

创建一个新的操作合同并向其添加命名空间。然后让使用新合约的客户通过命名空间调用它。这将模拟版本控制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T13:31:34.483

如果您的 WCF 服务是 RESTful 的，是否`bool includeAdditionalInformation`通过是否重要？

# c++ - 我无法构建需要 WOW64 Api 的库

> ID：897809
> 
> 赞同：1
> 
> 时间：2009-05-22T13:21:19.670
> 
> 标签：c++, winapi, wow64

我正在修复 32 位应用程序的 Windows Vista 64 位的错误，当我尝试使用函数 Wow64DisableWow64FsRedirection(...) 时，编译器会显示“未声明的标识符...”。

我包含了 Windows.h 头文件并将 _WIN32_WINNT 设置为 0x0501。

有任何想法吗？

谢谢。

编辑：我们正在使用 MS Visual Studio 2003

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T13:49:57.380

您的平台 SDK 文件可能太旧而无法使用该功能。该功能最早出现在 XP 64 位平台 SDK 中。您可以在这里获取最新的 SDK：http: [//www.microsoft.com/downloads/details.aspx? FamilyID=e6e1c3df-a74f-4207-8586-711ebe331cdc&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyID=e6e1c3df-a74f-4207-8586-711ebe331cdc&displaylang=en)

尽管它说它是“适用于 Windows Server® 2008 的 Windows SDK”，但它只是最新的 SDK，它将包含您需要的所有向后兼容的文件。

安装后，根据您的编译器，您可能必须将包含目录指向它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-22T13:34:52.450

你能在头文件中看到这个 API 吗？可能是您使用的 Visual Studio 没有更新头文件，在这种情况下，您需要为 Kernel32.dll 执行 LoadLibrary，然后为所需函数执行 GetProcAddress。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T15:22:42.623

如果您的应用程序需要在 Windows XP 32 位或 Windows 2000 上运行，您应该按照 Canopus 的建议使用`LoadLibrary()`and `GetProcAddress()`，因为直到 Windows XP 64 位`Wow64DisableWow64FsRedirection()`和`Wow64RevertWow64FsRedirection()`Server 2003 SP1（根据[文档](http://msdn.microsoft.com/en-us/library/aa365743.aspx)）才添加。

# asp.net - ASP.Net HtmlTable - 任何相当于？

> ID：897812
> 
> 赞同：0
> 
> 时间：2009-05-22T13:21:32.757
> 
> 标签：asp.net

ASP.Net Table 或 HtmlTable 中是否存在与 HTML 中设置的 <col></col> 元素等效的元素，以将样式或类应用于整个列？理想情况下，我希望以编程方式为 WebPart 而不是在 ASP.Net 设计器中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-22T14:22:56.143

一个 HtmlTable 可以包含[HtmlGenericControls](http://msdn.microsoft.com/en-us/library/7512d0d0(VS.71).aspx)，它给你一个 col：

```
var t = new HtmlTable();
t.Controls.Add(new HtmlGenericControl("col")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-01-04T02:23:12.213

根据[http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmltable(v=VS.100).aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmltable(v=VS.100).aspx)，`<col>`HtmlTable 不支持。因此，唯一的方法是重写该`RenderChildren()`方法。

```
Private Class MyHtmlTable
    Inherits HtmlTable

    Private _tableDefinitionCells As New ControlCollection(Me)
    Public ReadOnly Property TableDefinitionCells As ControlCollection
        Get
            Return Me._tableDefinitionCells
        End Get
    End Property

    Protected Overrides Sub RenderChildren(ByVal writer As System.Web.UI.HtmlTextWriter)
        For Each c In Me._tableDefinitionCells.OfType(Of Control)()
            c.RenderControl(writer)
        Next

        MyBase.RenderChildren(writer)
    End Sub

End Class 
```

你可以像这样使用它

```
Dim table = New MyHtmlTable()
table.TableDefinitionCells.Add(New HtmlGenericControl("col")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T10:59:31.313

这是 Table 的一个子类，它`<col />`为每一列呈现标签：

```
public sealed class ColTable : Table
{
    protected override void RenderContents(HtmlTextWriter writer)
    {
        for (int i = 0; i < GetColumnCount(); i++)
        {
            writer.RenderBeginTag(HtmlTextWriterTag.Col);
            writer.RenderEndTag();
        }
        base.RenderContents(writer);
    }

    private int GetColumnCount()
    {
        int maxCount = 0;
        foreach (TableRow row in Rows)
        {
            int count = 0;
            foreach (TableCell cell in row.Cells)
            {
                count += Math.Max(1, cell.ColumnSpan);
            }
            maxCount = Math.Max(count, maxCount);
        }
        return maxCount;
    }
} 
```

# apache-flex - 无法访问 datagrid 中 arrayCollection 的子项

> ID：897819
> 
> 赞同：0
> 
> 时间：2009-05-22T13:21:59.403
> 
> 标签：apache-flex, actionscript, datagrid

我有一个带有返回 Atom 提要的 HTTPService 的 Flex 3 应用程序。我从中捕获结果并将其存储在 arrayCollection 中，然后它是我的 Datagrid 的提供者。我从我的数组的“第一级”访问数据没有问题，但不能进入它。不是很清楚，所以这里有一些代码：

我的 XML [部分]：

```
<entry>
<title>Test 2</title>
<id>http://collaboration.*****.com/collaboration/messaging/feeds/****/todo//7D6637D3E86B3ED3C12575B***8479</id>
<link rel="alternate" href="notes:///C12575B4004***8/0/7D6637D3E86B3ED3C12575B6004E8479" type="application/vnd.lotus-notes"/>
<published>2009-05-14T16:17:37+02:00</published>
<updated>2009-05-14T16:17:56+02:00</updated>
<clb:todo>
<clb:uid>7D66***3ED3C12575B6004E8479</clb:uid>
<clb:due>2009-05-31T12:01:00+02:00</clb:due>
<clb:status>Not Started</clb:status>
</clb:todo>
</entry> 
```

我的数据网格代码：

```
 <mx:AdvancedDataGrid y="10" id="notesGrid" width="90%" height="243" designViewDataType="flat" x="10" selectionMode="multipleRows" dataProvider="{notesArray}" >
            <mx:columns>
                <mx:AdvancedDataGridColumn 
                    headerText="TITRE" 
                    dataField="title" 
                    fontWeight="bold"
                 />
                <mx:AdvancedDataGridColumn headerText="STATUT" dataField="todo.status"/>
            </mx:columns>
        </mx:AdvancedDataGrid> 
```

“标题”列正确显示数据，但状态列为空！当我在调试模式下启动我的应用程序时，我可以看到我的 notesArray 具有正确的格式，我可以使用值访问 todo -> status ...

我已经坚持了几天了，我会很感激任何帮助！谢谢和最好的问候！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-22T14:11:00.333

这可能与“状态”节点使用与您的标题不同的命名空间“clb”这一事实有关。您可能需要指定命名空间才能访问它的数据。

从 .NET WebService 检索 XML 数据时，我不得不做类似的事情。我花了几天时间才弄明白。

如果您的 XML 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<atomFeed xmlns:clb="CLB.data">
    <entry>
    <title>Test 2</title>
    <id>http://collaboration.*****.com/collaboration/messaging/feeds/****/todo//7D6637D3E86B3ED3C12575B***8479</id>
    <link rel="alternate" href="notes:///C12575B4004***8/0/7D6637D3E86B3ED3C12575B6004E8479" type="application/vnd.lotus-notes"/>
    <published>2009-05-14T16:17:37+02:00</published>
    <updated>2009-05-14T16:17:56+02:00</updated>
    <clb:todo>
    <clb:uid>7D66***3ED3C12575B6004E8479</clb:uid>
    <clb:due>2009-05-31T12:01:00+02:00</clb:due>
    <clb:status>Not Started</clb:status>
    </clb:todo>
    </entry>
</atomFeed> 
```

将此添加到处理 HTTPService 结果的 ActionScript 中：

```
private namespace clbNS = "CLB.data";

use namespace clbNS; 
```

例如：

包 { 导入 mx.rpc.events.ResultEvent;

```
public class handleAtomFeed
{
    private namespace clbNS = "CLB.data";

    use namespace clbNS;

    private function resultHandler(event:ResultEvent):void
    {
        // pares the XML and build your ArrayCollection
    }
} 
```

}

试一试，它可能会工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T16:34:34.573

我很确定 DataGridColumn / AdvancedDataGridColumn 的 dataField 属性不会自动解析嵌套属性，即“todo.status”；您可能想尝试编写一个 labelFunction 来为您访问嵌套的 XML 元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T16:58:47.930

当涉及到这类问题时，我遵循的一般规则是做这样的事情（只是为了确保你得到你正在寻找的一切）：

```
import flash.utils.getQualifiedClassName;

// As a general rule, I don't find it the best idea to access an object in 
// an IList (ArrayCollection, XMLListCollection, et al ) by a dynamic property.
// Especially when they are coming from XML, the best way to access everything 
// is through getItemAt.
var len:int = todo.length;
for( var i:int = 0; i < len; i++ )
{
    var item:* = todo.getItemAt( i );
    trace( item, getQualifiedClassName( item ) );
} 
```

在那之后，我的第一次尝试是替换这个：

```
<mx:AdvancedDataGridColumn headerText="STATUT" dataField="todo.status"/> 
```

有了这个：

```
<mx:AdvancedDataGridColumn headerText="STATUT" dataField="{ todo.status }"/> 
```

很多时候，Flex 根本无法很好地处理嵌套属性，但是当您使用方括号时，它会将在该位置找到的值作为更直接的参考。

我认为您最好使用 XMLListCollection 而不是 ArrayCollection。这样你就可以通过名字来调用孩子，而不是依赖他们在 IList 中的正常索引。

# iphone - iphone：在不同视图上管理计时器

> ID：897821
> 
> 赞同：0
> 
> 时间：2009-05-22T13:22:04.987
> 
> 标签：iphone, objective-c

实际上，当我继续下一个视图时，我想停止一个视图的计时器，那我该怎么办？这意味着当我打开一个视图时，计时器启动，当我进入下一个视图时，计时器仍在运行。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T13:26:51.717

```
[timer invalidate] 
```

# c# - 使用 OwnerDrawAll 时 windowsforms 中的 TreeView 错误

> ID：897824
> 
> 赞同：2
> 
> 时间：2009-05-22T13:22:29.963
> 
> 标签：c#, .net, winforms

当使用 OwnerDrawAll 在 TeeView 中单击一个节点时，它不会被选中，直到它收到一个鼠标，这是与标准模式不同的行为并且显然不正确。有人对此有解决方案吗？

运行以下代码以查看此行为：

```
public partial class Form1 : Form
{
    private System.Windows.Forms.TreeView treeView1;

    public Form1()
    {
        System.Windows.Forms.TreeNode treeNode1 = new System.Windows.Forms.TreeNode("Some Node");
        System.Windows.Forms.TreeNode treeNode2 = new System.Windows.Forms.TreeNode("Click Me Please!");
        this.treeView1 = new System.Windows.Forms.TreeView();

        this.treeView1.Dock = System.Windows.Forms.DockStyle.Fill;
        this.treeView1.DrawMode = System.Windows.Forms.TreeViewDrawMode.OwnerDrawAll;
        this.treeView1.FullRowSelect = true;
        this.treeView1.LabelEdit = true;
        treeNode1.Text = "Some Node";
        treeNode2.Text = "Click Me Please!";
        this.treeView1.Nodes.AddRange(new System.Windows.Forms.TreeNode[] {treeNode1, treeNode2});
        this.treeView1.DrawNode += new System.Windows.Forms.DrawTreeNodeEventHandler(this.treeView1_DrawNode);

        Controls.Add(treeView1);
    }

    private void treeView1_DrawNode(object sender, DrawTreeNodeEventArgs e)
    {
        Rectangle nodeRect = e.Bounds;
        Rectangle nodeBounds = e.Node.Bounds;

        if (e.Node.IsSelected) {
            e.Graphics.FillRectangle(Brushes.CornflowerBlue, nodeRect);
        }
        else  {
            e.Graphics.FillRectangle(Brushes.White, nodeRect);
        }
        TextRenderer.DrawText(e.Graphics, e.Node.Text, Font, nodeBounds, System.Drawing.Color.Black, Color.Transparent, TextFormatFlags.VerticalCenter | TextFormatFlags.NoClipping);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-22T13:49:32.950

[看看这个来自 Microsoft 的页面](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.drawnode(VS.80).aspx)。我在您的示例中添加了 mousedown 处理程序和 NodeBounds 方法，它似乎按预期工作。我想有点麻烦，但它似乎产生了预期的效果。

* * *

嗯，你可以试试这个。也许更好：

```
private void treeView1_MouseDown(object sender, MouseEventArgs e)
{
   TreeNode clickedNode = treeView1.GetNodeAt(e.X, e.Y);
   if (NodeBounds(clickedNode).Contains(e.X, e.Y))
   {
      if (treeView1.SelectedNode != clickedNode)
      {
         treeView1.SelectedNode = clickedNode;
         treeView1.LabelEdit = false;
      }
      else
      {
         treeView1.LabelEdit = true;
      }
   }
} 
```

我最初只是设置了 treeView1.LabelEdit = false 。它似乎更接近你想要的。

# ide - 查找复合词变量名拼写错误

> ID：897833
> 
> 赞同：3
> 
> 时间：2009-05-22T13:24:09.600
> 
> 标签：ide, variables, spell-checking

我刚刚发现了一个拼写错误的变量名。如果它隐藏在代码的深处，那会很好，但是这个变量名最终会存储在对客户可见的配置中。这真的没什么大不了，但我想知道有没有办法避免它？

在这种情况下，变量名称是一个复合词，由于 NDA，我不会在这里复制它，但可以想象它类似于“confirmationRecieved”（i 和 e 被翻转）。任何人都可以推荐一个可以捕捉到这样的东西的代码拼写检查器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T13:37:35.003

如果您使用的是 Visual Studio，则可以激活代码分析。

代码分析提供了多种验证代码的方法，不仅针对拼写错误或拼写错误，还针对设计和质量。

默认分析之一是 CA1704 ：标识符应该拼写正确。

如果您没有使用 Visual Studio，而是使用 .NET，您仍然可以使用 FxCop，它执行与代码分析相同的任务，而无需集成 IDE。

您可以在此处找到有关代码分析的更多信息，并在[此处](http://msdn.microsoft.com/en-us/library/3z0aeatx.aspx)找到有关 FxCop的更多[信息](http://blogs.msdn.com/fxcop/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T13:29:54.613

我最接近检测这些问题的是函数参数名称。我将[ReSharper](http://www.jetbrains.com/resharper/)与[AgentSmith 插件](http://www.agentsmithplugin.com/)一起使用。然后，我使用[GhostDoc](http://www.roland-weigelt.de/ghostdoc/)获得了文档的第一关。AgentSmith 插件将检测拼写错误。例如

```
void SomeFunction(int confirmationRecieved)
{
} 
```

变成

```
/// <summary>
/// Somes the function.
/// </summary>
/// <param name="confirmationRecieved">The confirmation recieved.</param>
void SomeFunction(int confirmationRecieved)
{
} 
```

在“已收到”下方带有红色波浪线

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T13:42:50.953

您还没有提到您使用的是什么 IDE 或平台。但是，如果你在 Windows 上使用 Visual Studio，有一个很棒的插件叫做[Visual Assist X](http://www.wholetomato.com/)，它内置了一个拼写检查器。据我所知，拼写检查器旨在纠正注释中的拼写错误和拼写错误的符号（假设你第一次正确拼写）。为了更正这些拼写错误，Visual Assist 有一个非常有用的功能，称为“重构”，它允许您更改变量/类/方法名称，它会自动更改其范围内所有其他出现的名称。当您拼写错误或需要全局更改名称时非常方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T13:26:01.797

Visual Studio 有他们的查找和替换工具，它可以很容易地用于在选定的文本部分、整个文档或项目的所有文件中搜索特定的搜索字符串。

至于能够以某种方式理解复合词的实际拼写检查器，我从未见过任何类似的非定制开发的东西。

# gcc - GCC——HP-UX 的目标三元组

> ID：897860
> 
> 赞同：2
> 
> 时间：2009-05-22T13:30:29.493
> 
> 标签：gcc, compilation, hp-ux

我想编译生成 64 位可执行文件的 GCC 和 binutils。从[GNU 文档](http://gcc.gnu.org/install/specific.html)中我发现它必须看起来像 ia64-*-hpux*。

对于 ia64-hp-hpux11*，默认输出类型为 32 位：

```
 % file ./a.out
 ./a.out:        ELF-32 executable object file - IA64 
```

这就是我所拥有的：

```
 % uname -s -r -v -m
 HP-UX B.11.31 U ia64 
```

那么 ia64-hpux 的 64 位目标三元组是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-22T13:47:56.260

从 GCC 手册：

```
-milp32
-mlp64
    Generate code for a 32-bit or 64-bit environment. The 32-bit environment
sets int, long and pointer to 32 bits. The 64-bit environment sets int to 32
bits and long and pointer to 64 bits. These are HP-UX specific flags. 
```

因此，您需要将“-mlp64”传递给 GCC。我不确定是否有一个单独的三元组会自动打开它，但你总是可以在编译时添加自己的 CFLAGS。

# grails - 在 IntelliJ 中使用插件依赖项设置 Grails 1.1 应用程序

> ID：897863
> 
> 赞同：1
> 
> 时间：2009-05-22T13:31:07.200
> 
> 标签：grails, intellij-idea

我在 Windows 上使用 IntelliJ 8.1.2 开发 Grails 1.1 项目，该项目依赖于内部开发的插件，这些插件在中央 Grails 插件存储库中不可用。在 Grails 1.1 中，安装插件的默认位置从 移动`$PROJECT_ROOT/plugins`到`$HOME/.grails/1.1/$PROJECT/plugins`

使用命令行，我已将插件安装到默认位置。我的 IntelliJ 项目包含作为模块的主 Grails 应用程序，为了让 IntelliJ 能够找到主应用程序所依赖的插件，我添加了`$HOME/.grails/1.1/$PROJECT/plugins`作为内容根目录并指定了哪些是此位置中的源文件夹。

项目构建，我可以使用 IDE 运行测试，但我遇到的问题是插件项目没有设置为项目中的模块 - 请记住，它是设置为内容根的插件的安装位置。因此，就目前的情况而言，如果我需要更改插件，我必须在 IDE 之外进行，然后通过命令行重新安装插件。我最理想的是将主 Grails 应用程序和插件设置为 IntelliJ 项目中的模块，但主 Grails 应用程序从其安装位置引用插件。这将使我能够更改 IDE 中的插件或主应用程序，但主应用程序在 IDE 中所依赖的插件版本与命令行上的版本相同（即 中的那些`$HOME/.grails/1.1/$PROJECT/plugins`）。有什么办法可以实现这个设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-25T14:07:02.457

您可以通过 2 个步骤实现此设置。

1）**在模块根目录中添加外部插件内容**

右键单击模块根目录并选择“模块设置”。您在“来源”选项卡上。单击“添加内容根”按钮并选择 $HOME/.grails/1.1/$PROJECT/plugins。现在在右侧的文件夹树上，选择带有 groovy 文件的常用文件夹，然后单击顶部按钮将它们标记为“源”。例如：/grails-app/[conf,services,domain...] 和 /src/[groovy,java..]。现在您的模块将在代码建议中识别此来源。

2）**在模块依赖中添加外部插件的JAR依赖**

现在切换到“依赖项”选项卡。选择“Grails 用户库”并单击“编辑”。然后，对于每个具有 jar 依赖项（lib 文件夹）的外部插件，您必须单击“附加 JAR 目录”并选择 HOME/.grails/1.1/$PROJECT/plugins/lib。现在您的模块可以识别 jar 依赖项，您可以使用 make 或其他检查依赖项的工具运行您的应用程序。

希望有帮助，万斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-25T14:12:25.347

我认为这将在 v8.1.3 中得到解决，如 EAP 构建所示。 [http://www.jetbrains.net/confluence/display/IDEADEV/Diana+EAP](http://www.jetbrains.net/confluence/display/IDEADEV/Diana+EAP)

# coldfusion - ColdFusion 报告

> ID：897864
> 
> 赞同：3
> 
> 时间：2009-05-22T13:31:23.893
> 
> 标签：coldfusion, coldfusion-8

是否可以在 CFMX7 上运行 ColdFusion Report builder 生成的报告？

更明确地说，是否可以将 CF7 中的报告生成引擎更改为 CF8？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-24T05:56:56.700

我的猜测是这可能很难做到。我记得 CF7 和 CF8 之间的报告发生了变化。这意味着库之间的接口也在发展。

我一直在使用报告生成器和做 html 报告之间来回走动，这对 CFRB 来说太复杂了。

您是否考虑过使用 Java 报告解决方案？那里有一些很棒的图书馆可以满足您的需求......免费。

这是我正在看的一个叫做 Jasper Reports

[http://java-source.net/open-source/charting-and-reporting](http://java-source.net/open-source/charting-and-reporting)

# asp.net-mvc - ASP.Net MVC - 使用添加链接将字段添加到创建表单（无 javascript）

> ID：897865
> 
> 赞同：1
> 
> 时间：2009-05-22T13:31:28.307
> 
> 标签：asp.net-mvc, forms

我有一个 MVC 应用程序，其中包含一组要为某人添加联系方式的字段（电子邮件、电话、传真、AIM 等）。最初，我提供了输入类型和相应数据的输入字段的下拉列表，以及用于添加更多字段集的链接。

完成后，我有一个提交按钮来提交表单。

我对使用添加链接和 javascript 添加更多字段的方法感到满意，但如果没有 javascript，我无法弄清楚如何做到这一点。

对于解决此问题的最佳方向，我将不胜感激。我对保留添加链接并不是特别珍惜，它可以是一个按钮，但我宁愿地址栏中的 url 不改变。

谢谢，理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T15:02:44.583

正如 Matthew 所说，如果您不想更改 URL 并且不想使用 javascript，那么最好的选择是向服务器发送 POST 请求。然而，在 ASP.Net MVC 中，这可以非常巧妙地完成。您需要修改**`View`**两个添加项，并添加一个新的**`ActionMethod`**.

**视图，第 1 部分**
向视图中添加一个额外的表单（这在 WebForms 中是不允许的，因此可能会感觉有点奇怪，但在 MVC 中完全没问题）。

```
<form action="/myController/myView/<%= (ViewData["fieldCount"]+ 1) %>">
    <input type="submit" value="Add custom field" />
</form> 
```

注意`fieldCount`变量 - 这应该从`Controller`如下所示的传递下来：

**控制器**
添加以下内容`ActionMethod`以重载您当前必须显示表单的内容：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult myView(int id) {
    ViewData["fieldCount"] = id;
    Return View();
} 
```

我使用了变量名`id`，这样您就不必添加另一条路线。

**视图，第 2 部分**
现在，由于您有一个已知的字段计数，因此您可以循环出视图上的字段：

```
<form action="/myController/SaveData/" method="post">
    ...
    <% for(i=0; i<int.TryParse(ViewData["fieldCount"]); i++) { %>
        <input type="text" name="customData" /><br />
    <% } %>
    ...
</form> 
```

请注意，这两个表单具有不同的操作 - 这样，您将永远不必担心单击一个提交按钮会意外发布错误的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T13:41:36.510

使用[jQuery](http://www.jquery.com)可以很容易地将 html 元素动态插入到 DOM 中，无需回发。它使用的是javascript，您在标题中说您不想要它，但您确实在问题中说没关系，所以告诉我您是否需要其他东西。
所以你真正需要弄清楚的是一种在发送到服务器时处理数据的方法......

...这也不必太难。如果我没记错（但我可能是）来自`input`相同元素的值`name`将作为值数组处理。因此，如果您插入所有具有通用名称的新元素，您应该能够通过迭代服务器上的数组来检索所有数据。

这个 html

```
<input type="text" name="customData" />
<input type="text" name="customData" /> 
```

将在服务器上发布您可以使用此 C# 代码获取的数据：

```
public ActionResult DoCoolStuff(FormCollection postedValues) {
    foreach(string data in postedValues.customData) {
         // This is where the cool stuff goes
    }
    Return RedirectToAction("Index");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T14:18:02.893

这基本上是答案的客户端。如果您必须在不使用 JavaScript 且不更改 URL 的情况下执行此操作，那么基本上会留下一个 POST。

```
<form action="" method="post">
<input name="field1"/>
<input name="field2"/>
...
<input name="add_field_submit" type="submit" value="Add Field"/>
...
<input name="done_submit" type="submit" value="Submit"/> 
```

在服务器上，您检测他们是否单击了添加字段（add_field_submit 存在）或提交（done_submit 存在）。如果他们单击添加字段，您将添加一个字段并提供视图。否则，就完成了。

# delphi - 是否有适用于 Delphi（非 OLE）的 OpenOffice.org 导出组件？

> ID：897873
> 
> 赞同：6
> 
> 时间：2009-05-22T13:32:51.767
> 
> 标签：delphi, components, openoffice.org, calc, writer

对于文档交换，我想生成 OpenOffice.org 文本和电子表格文档。到目前为止，我发现需要使用 OLE 安装 OpenOffice 的导出组件。

是否已经有可以为 OpenOffice.org Writer 或 OpenOffice.org Calc 编写本机文件的 Delphi 组件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T18:11:50.900

这取决于您的文件有多复杂，以及您要投入多少精力。

OpenOffice.org 文档（从 OO.org 版本 2 开始）是[OpenDocument 格式](http://www.oasis-open.org/committees/tc_home.php?wg_abbrev=office)的文件，基本上是具有文档结构的压缩目录，包含各种 XML 和支持文件。例如，您可以使用[7-Zip](http://www.7-zip.org/)的“Open Inside”命令来像目录一样导航文件。

这至少为您提供了以下选项：

*   自己写代码输出文档，Delphi流类和压缩支持应该够用了。这显然是最困难的方法，但你会控制一切。

*   将最少的文档保存为模板文件，并将它们作为外部支持文件甚至作为嵌入式资源添加到您的应用程序中。当需要写入文件时，您复制模板并编辑根目录中的*content.xml文件。*这应该会容易得多，我可能会用一种方法来创建一个简单的电子表格文件，例如一个包含多张数据表和多列数据的电子表格文件。

*   如果您已经拥有许可证或不介意付费，[FastReport VCL](http://www.fast-report.com/en/products/report-generator-for-delphi-fastreport-4.html)支持“Office 应用程序 (OASIS) 导出、电子表格 (ods) 和文本 (odt) 的开放文档格式”。也许还有其他报告解决方案，但我确信 FastReport 是一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-24T18:20:59.220

FPC/Lazarus 的 fpspreadsheet 组件可以直接写旧的 Excel 格式，OOO 可以打开。如果您需要电子表格而不是文本文档，则可以选择查看是否可以将其移植到 Delphi。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T14:34:35.263

在 Lazarus 中，我使用[zexmlss](http://avemey.com/zexmlss/index.php)组件导出到 ODS。该组件适用于 lazarus、delphi 和 builder。仅适用于电子表格。公式工作正常。

# php - php如何执行分配给变量的函数？

> ID：897879
> 
> 赞同：6
> 
> 时间：2009-05-22T13:35:30.937
> 
> 标签：php

好吧，我真的不知道如何表达这个问题，但让我解释一下。

假设我有一个变量：

```
$file = dirname(__FILE__); 
```

如果我分配`$file`给另一个变量会发生什么？

```
$anotherVariable = $file; 
```

`dirname`每次我分配时都会执行该功能吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-22T13:39:43.190

不。PHP 是命令式的，因此赋值表达式的右侧被*求值*，结果“存储在”左侧（在简单且几乎无处不在的情况下，变量命名在左侧）。

```
$a = $b;  // Find the value of $b, and copy it into the value of $a
$a = 5 + 2; // Evaulate 5 + 2 to get 7, and store this in $a
$a = funcName(); // Evaluate funcName, which is equivalent to executing the code and obtaining the return value. Copy this value into $a 
```

当你通过引用赋值时，这会变得有点复杂（$a = &$b），但我们现在不必担心这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-22T13:38:13.677

PHP 没有这样的闭包。

> 目录名（**文件**）

这个函数返回一个字符串。

> $anotherVariable = $文件；

给 $anotherVariable 相同的字符串值。

所以我相信你的问题的答案是“不”，它不会每次都被执行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-17T22:08:35.413

# 回答主要问题：

```
$a = function(){ echo "Hello!"; };
$a(); 
```

**小问题的回答：**

```
$file = dirname(__FILE__); 
//means: 
//"Evaluate/Execute function dirname() and store its return value in variable $file" 
```

> 如果我将 $file 分配给另一个变量会发生什么？

如果我们谈论的是常规赋值 ( `$anotherVariable = $file;`)，
它只是将值从两者**复制**`$file`到`$anotherVariable`都是自变量。

> 每次分配时都会执行 dirname 函数吗？

不，不是的。因为执行只用`()`. 否`()`= 不执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-22T14:09:42.240

在任何情况下都没有。

PHP 的函数不是指向类 Function 实例的标识符，正如您在 Java、ActionScript、JavaScript 等中看到的那样……这就是为什么您不能将函数本身的链接存储到变量的原因。这就是为什么每次调用该函数时，它与包含（）要执行的脚本相同。当然存在差异，但在这个问题的上下文中，包括 include() 和调用函数几乎是相同的。

不要与这个案例混淆

```
function myFunc() {return 'hello world';}
$func = 'myFunc';
$a = $func();
echo $a; // hello world 
```

[在此处](http://www.php.net/manual/en/functions.variable-functions.php)阅读有关此案例的信息此行为对于 PHP 来说是特殊的。不确定其他语言 - 也许在哪里有什么东西。类似的，但我从来没有遇到过。

# javascript - 将 javascript 添加到页面的 Html 时运行 javascript

> ID：897880
> 
> 赞同：1
> 
> 时间：2009-05-22T13:35:45.180
> 
> 标签：javascript, jquery, ajax

我在网页上有内容，这些内容都是在页面加载时从服务器发送的，并且通过 AJAX 经常更新。初始加载时，我使用 $( function () {} ) 根据来自服务器的消息进行绑定和更新。我希望能够在重新填充代码时运行代码，特别是重新绑定点击事件并使用来自服务器的消息进行更新。

有没有办法在不做 $.getScript separatley 的情况下做到这一点？我对通过 AJAX ( $('el').html( ... ) ) 填充屏幕时如何应用运行 javascript 感到有些困惑，因为我经常将它与包含的 javascript 一起使用并且它可以工作。有人可以弄清楚这是如何工作的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T13:40:03.937

[使用live](http://docs.jquery.com/Events/live)在新添加的 DOM 节点（Ajax 或其他）上绑定事件。

当您将它们添加到 DOM 时，您包含的脚本将运行。

请参阅此[示例](http://jsbin.com/uziwu)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-22T14:22:07.237

对于 jQuery 事件，如果您希望事件应用于新元素，您将使用[.live()](http://docs.jquery.com/Events/live)方法。

但是 jQuery 1.3 不支持将 blur、focus、mouseenter、mouseleave、change 和 submit 事件作为实时事件。（更改、提交和模糊/聚焦在jQuery 1.4的[路线图上）](http://docs.jquery.com/JQuery_1.4_Roadmap#Events)

如果你想绑定到 .live() 不支持的任何事件，你可以使用[liveQuery](http://plugins.jquery.com/project/livequery)插件。

# sql-server-2005 - 如何使用 SQL Server 2005 和 Visual Source Safe 2005 对存储过程进行源代码控制？

> ID：897885
> 
> 赞同：0
> 
> 时间：2009-05-22T13:36:16.347
> 
> 标签：sql-server-2005, visual-sourcesafe

我正在尝试按照以下网站上的步骤进行操作

[http://msdn.microsoft.com/en-us/library/ms181089(VS.80).aspx](http://msdn.microsoft.com/en-us/library/ms181089(VS.80).aspx)

但我在 SQL Managment Studio 中找不到“数据视图窗口和添加到源代码管理命令”。然后我尝试修改存储过程，然后单击“源代码管理工具栏”上的“更改源代码管理”按钮。除了 SQL Server 机器的 Visual Source Safe 客户端连接到我的 Visual Source Safe 存储库之外，由于以下错误消息，我无法更改存储过程的绑定：

```
Cannot change source control bindings. Ensure that each project has a valid binding. 
```

我不知道该怎么办了。任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T13:39:19.947

在脚本文件中编写存储过程并提交它们。当您进行更改时，编辑该文件并像普通源代码一样提交它。如果您想编写数据库脚本，将存储过程编写为脚本也可以节省您以后的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-22T13:40:48.880

就个人而言，我不直接将 Source Safe 与 SQL Server 一起使用来跟踪我的数据库工件，我创建了一个数据库项目并将其链接到 Source Control。

通过这种方式，您也可以保持 Source Safe 与 Visual Studio 和 SQL Server 的集成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T14:13:16.617

您是否检查过 SQL Management Studio 中的源代码管理设置？工具>选项然后源代码管理。确保 SourceSafe 设置为当前的源代码管理插件。我认为对于您的脚本，您可以创建一个脚本项目（文件>新建>项目>SQL Server 脚本），然后开始添加脚本。如果您右键单击脚本项目，您应该会看到“将解决方案添加到源代码管理”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T13:52:49.620

看看这个网站： [VBScript with SQLDMO](http://cwashington.netreach.net/depo/view.asp?Index=1071) 基本上我们在内部做的是我们编写了一个 vbscript 文件，它使用 SQLDMO 将所有 SQL 对象的内容输出到一个目录，然后我们使用 SourceSafe 对象通过 vbscript 来管理版本控制。不幸的是我不能发布代码，因为我的老板偶尔也会光顾这个网站；）

我们最近从 VSS 切换到 TFS，并在 .NET 中编写了一个进程来管理它，处理得更干净。

# performance - CPU 利用率

> ID：897886
> 
> 赞同：1
> 
> 时间：2009-05-22T13:36:26.783
> 
> 标签：performance, cpu-usage, cpu-speed

Q1。编写不消耗 CPU 但仍能实现出色性能的代码的最佳实践是什么？这个问题非常笼统。我在这里寻求的是列出用于不同环境的不同实践？进程监视器/任务管理器之外的调试技巧

编辑：我不是在说 IO 绑定进程。我说的是 CPU 绑定进程。但是，在这里我不希望我的进程继续占用 CPU。如果我有一个 4 核机器并且如果我在一个进程中运行四个简单的循环，CPU 消耗会飙升到 400%，直到应用程序/进程运行。

我在这里寻求一些关于这个话题的经验，每个人都会在一段时间内遇到过。例如，当应用程序在 Windows 上占用 CPU 时，我进行了调试，因为它不断循环以搜索不存在的文件。

如何以两种不同的 CPU 绑定应用程序平稳运行（给出良好响应）的方式编写我的程序？

**更新：** 建议：

1.  编写好的干净代码，然后分析您的应用程序，然后进行优化。（感谢泰德的提示）

2.  重写/重新设计/重构代码比分析和修复代码更容易。

3.  使用分析器调试您的应用程序

4.  不要对等待时间长的线程使用自旋锁

5.  算法选择

这些建议对初学者理解这些概念大有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-22T13:38:32.007

*   虔诚地使用分析器。在寻找瓶颈时不要依赖常识。
*   学习大 O 表示法，记住常用算法的大 O。
*   不惜一切代价避免繁忙的等待循环。
*   在嵌入式的情况下，学习如何使代码适合代码缓存，这有时可以在紧凑的循环中实现十倍的加速。
*   在进行高级分层开发时，学习如何有效地缓存数据（例如，尽量减少 DB 语句的数量）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-22T14:24:06.487

首先，编写好的干净代码。尽可能以最简单的方式做事。之后，重复执行以下操作，直到您对程序的速度感到满意：

1.  分析其执行情况。
2.  找到它花费最多时间的部分。
3.  加快这些部分。

不要陷入以优化的名义预先扭曲代码的陷阱**。**

记住[阿姆达尔定律](http://en.wikipedia.org/wiki/Amdahl's_law)。通过加速已经只消耗程序 1% 时间的东西，你不会得到明显的改进。通过加快程序花费最多时间的部分，您可以获得最大的优化收益。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-22T13:41:39.753

做尽可能少的工作。

* * *

由于您已经编辑了原始问题，因此我将在此处添加更多想法以解决您所描述的具体情况。

假设您不知道您的进程阻塞在哪里（因为您要求调试提示），您可以从暂停调试器开始，这将停止应用程序正在执行的任何操作，然后您可以从那里调查所有的当前位置线程，看看它们中的任何一个是否处于紧密循环中。

其次，任何体面的分析器都可以轻松帮助捕捉到这样的情况。附加分析器并将应用程序运行到阻塞点，看看那些显着占总运行时间百分比的调用。从那里您可以返回找到阻塞循环。

一旦你找到了理想的问题，重新考虑算法以完全避免这种情况。如果这不可能，那么在线程上引入睡眠命令。这将允许其他线程进入 CPU 并提高应用程序和整个操作系统的响应能力，但会增加操作运行时间。多核编程的诀窍是确保所有线程在性能和考虑其他等待任务之间做出妥协。

在不了解您的目标的特定语言或操作系统的情况下，我无法就问题的调试器/分析器组合提出建议，但我想对于大多数成熟的语言都有很好的解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-22T13:43:44.570

如果你追求的是纯粹的 CPU 使用率增益，那么它就是你需要的大 O 表示法。你需要弄清楚如何让你的算法在尽可能少的计算中工作。

但是，就一般性能而言，我发现 CPU 使用率是较小的瓶颈之一。

与性能有关的一些更重要的事情是

数据绑定，你是预先获取所有数据还是按需获取。选择其中一种方法可能是您的应用程序性能的关键。

你能减少你正在处理的数据吗？如果您可以轻松地将所有内容放入内存中，则可以在此处获得性能。附带说明一下，如果您在内存中投入过多，可能会产生相反的效果。

我想总结一下，性能没有通用的解决方案。编写你的代码（有一定的智慧），然后看看它在哪里挣扎。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-22T14:45:04.353

> 我说的是 CPU 绑定进程。但是，在这里我不希望我的进程继续占用 CPU。如果我有一个 4 核机器并且如果我在一个进程中运行四个简单的循环，CPU 消耗会飙升到 400%，直到应用程序/进程运行。

您可能需要研究节流机制以在空闲状态下降低 CPU 利用率：

在正常情况下，您的代码甚至会在不需要执行任何操作（即“忙等待”）时消耗 CPU 周期。

例如，一个空的无限循环将尽可能快地运行，如果它不需要做任何其他事情的话。

但是，在某些情况下，您不想忙于等待，或者在某些平台上您可能根本想避免它。

一种既定的方法是在空闲时使用睡眠调用，以便系统调度程序可以重新调度所有正在运行的线程。同样，您可以使用计时器来确定您的函数的实际更新率，并在不需要运行时简单地避免调用您的代码（这是游戏或模拟器有时使用的一种机制）。

通常，您会希望避免轮询，而是使用智能数据结构（例如作业队列），从而可以相应地自动调整运行时行为，而无需永久检查数据结构本身。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-22T13:38:03.723

*   使用惰性值和/或其他类型的缓存
*   谨慎选择算法

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-22T13:38:48.603

*   遵循代码优化技术。

*   计算您的操作的内存。

*   计算每个操作的时间。
    （大 o 符号）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-22T14:51:55.260

我不太清楚您是在寻找最有效地利用 CPU 的方法，还是在有大量 CPU 密集型工作要做时避免机器陷入困境的方法。

这些是不相容的。

对于前者，理想情况下，您需要一个操作系统，只要您愿意，您就可以完全接管 CPU，因此您不必在操作系统本身上浪费 CPU 周期，更不用说任何其他进程那可能正在运行。

对于后者，好吧，我最近一直在编写一些代码，这些代码使用了~~设计不佳~~的 CPU 绑定算法，而新的 Intel I7 处理器一直是我的救星。给定四个内核，每个内核可以运行两个线程，我只是尝试将我的操作系统线程使用限制为每个应用程序五个或六个，并且我仍然有可用的 CPU 来切换到另一个窗口来运行`kill`命令。至少在我驱动系统进入交换空间泄漏之前。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-22T15:52:21.817

这里有很好的建议。编写代码越简单，您节省的时间就越多。

我将性能调优视为[调试的延伸](https://stackoverflow.com/questions/890222/analyzing-code-for-efficiency/893272#893272)。人们说测量，测量，测量，但我没有。我只是让程序准确地告诉我问题出在哪里，如果需要的话，我会在不事先通知的情况下多次访问它。这通常是一个惊喜，而且永远不会出错。

根据程序的大小，通常会发现并修复一系列性能问题，每个问题都可以提高 10% 到 50% 的速度（如果出现严重问题，速度会更高）。这提供了大约 10 倍的整体加速。

然后样本准确地告诉我它在做什么，但我想不出如何在没有基本重新设计的情况下修复它，我意识到如果我一开始就以不同的方式进行设计，开始会快得多和。

假设我可以进行重新设计，那么我可以再进行几轮性能查找和修复。在此之后，当我达到收益递减点时，我知道它在物理上尽可能快，并且我可以在装配级别单步执行它，并观察每条指令“竭尽全力”获得答案。

达到这一点真的很满足。

# javascript - 测试 window.location.href 中是否存在单词的条件

> ID：897903
> 
> 赞同：0
> 
> 时间：2009-05-22T13:40:56.963
> 
> 标签：javascript

我想使用'if'条件测试页面的当前地址中是否存在单词[具体来说是“sublanguageid-all”]。我试过 /sublanguageid-all/g，但我不能把它放在 if 语句中

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-22T13:45:45.597

不

```
if(window.location.href.indexOf('sublanguageid-all') != -1) 
```

工作？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-22T13:44:44.897

```
if( location.href.match("sublanguageid-all") ) { 
  alert('present') 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-09T12:16:13.593

您可以简单地尝试包含（）。请参考以下代码。

```
if(window.location.href.includes('sublanguageid-all')) {
    // your code while it exists in the URL
} 
```

# versioning - JIRA如何有效管理分支机构？

> ID：897907
> 
> 赞同：2
> 
> 时间：2009-05-22T13:42:13.263
> 
> 标签：versioning, bug-tracking, branch, jira

我们开发的产品由跨产品（项目 1、项目 2、...）共享的核心运行时和项目/产品特定部分组成。对于这些“产品”中的每一个，我们维护多个分支，因为不同的版本被推出到该领域并需要维护，有时甚至是功能反向移植。

我们还使用 JIRA 作为问题跟踪系统，我无法找到正确的方法来为我们的产品类型/分支建模。在这种情况下似乎相关的 JIRA 元素是组件和版本：

*   我们使用组件来区分 CORE、PRO1、PRO2 等
*   我们还使用组件来确定所关注的分支
*   我们使用 Fix Version 来跟踪解决问题的迭代（迭代开发、双周迭代）

这或多或少有效，但使用 Component 分支类型是一种黑客行为，并且缺点是您不能“淘汰”组件，只能删除它们。我们选择这种方式是因为如果我们将迭代与修复版本字段中的分支混合在一起，我们将无法再查询“迭代 X 和分支 Y”（JIRA 不支持 AND 查询）。

在 JIRA 中维护分支和跟踪迭代有哪些最佳实践？

上下文的一些统计数据：我们正在谈论大约 4 种产品类型和每种产品类型大约 3 个主要分支来维护。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-11-20T13:22:25.770

我会对这个问题采取稍微不同的方法。我会为您的核心运行时和每个项目/产品特定部分设置组件，但不要使这些组件特定于分支。因此，您的 Jira 项目中可能包含以下组件：

*   核
*   产品X
*   产品Y
*   产品Z

然后，我会按版本区分不同的分支。我假设您有某种类型的版本编号系统，允许您将字段中的二进制文件绑定回特定的分支和版本。在 Jira 中为每个版本/分支设置一个版本。当您向 Jira 报告问题时，您可以选择一个或多个受影响的版本。

这个系统有几个优点：

1.  如果问题跨越多个版本/分支，您可以识别问题中所有受影响的版本。
2.  您可以将 Fix For Version 设置为一个或多个版本。有时，您可能只能修复主干或某个分支中的问题。也许这是一个主要问题，您必须跨分支移植修复程序。该系统使您可以灵活地查看所有内容并进行报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T17:01:38.677

我能想到的一种快速方法是让您的迭代名称包括分支名称（也可能包括项目名称）。然后您可以使用修复版本来表示迭代以及分支，名称如 branch1_iteration1、branch1_iteration2、branch2_iteration1 等。

这将允许您查询分支中特定迭代的问题，并且还具有您可以针对每个修复版本设置到期日期的优点，以便您可以跟踪您是否按计划进行。

顺便说一句，我不会使用 JIRA 组件字段来表示项目（CORE、PRO1 等），而是使用单独的 JIRA 项目；这样，您将获得更好的粒度和灵活性。

# iphone - 跨多个视图控制器使用对象

> ID：897909
> 
> 赞同：0
> 
> 时间：2009-05-22T13:42:47.800
> 
> 标签：iphone, cocoa-touch

我一直在尝试通过遵循此线程来拥有一个可以跨多个视图控制器使用的对象。

[Cocoa Touch 中跨多个视图的一个实例](https://stackoverflow.com/questions/851158/one-instance-across-multiple-views)

但这对我不起作用。所以我从基础开始，看看发生了什么。我创建了对象的本地实例。

```
PlayerData *playerOne   = [[PlayerData alloc] init];
playerOne.completedRound += 1; 
```

我可以在调试器中检查它，当我创建它时我看到所有值都为 0，然后它被适当的代码行更新，所以我觉得我的对象类写得正确。

当我尝试在头文件中定义对象时：

在我的 UIViewController.h 我添加了以下内容

```
#import "PlayerData.h"

PlayerData *playerOne;

@property (nonatomic, retain) PlayerData *playerOne; 
```

在我的 UIViewContoller.m 我添加了以下内容

```
#import "PlayerData.h"

@synthesize playerOne;

playerOne.completedRound += 1; 
```

我无法让它工作。代码编译得很好，但是在调试器中查看实例，变量没有被设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T13:53:41.163

几个可能很愚蠢的问题：

1.  是否`[PlayerData init]`将您的属性初始化为零？
2.  在您尝试增加它之前，您的`UIViewController` `alloc`/对象是否？`init``PlayerData`

# objective-c - NSSet 和 NSCountedSet，什么时候使用它们最好？

> ID：897912
> 
> 赞同：9
> 
> 时间：2009-05-22T13:43:29.937
> 
> 标签：objective-c, cocoa, cocoa-touch, foundation

我很少使用这两种集合类型，因为我通常使用它们的对应部分 ,`NSArray`和`NSDictionary`等效的可变对象。我有一种感觉，我错过了一个在某些情况下可以比其他两个更快的集合。何时是使用这些的理想时间以及如何使用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-22T13:46:25.967

`NSSet`当您经常希望测试对象的*成员资格*但不关心排序并且不需要集合包含重复对象时使用。An`NSSet`不按任何特定顺序存储其对象；相反，该类被明确设计为有效地测试对象是否*存在*于集合中。

也是如此`NSCountedSet`，尽管`NSCountedSet`也保留了重复对象的*计数*。

简而言之：当您关心测试*成员资格*时使用集合，而不仅仅是保留对象的集合（其中一些可能是重复的，由某种`isEqualTo`方法决定）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-22T14:06:03.993

继 midpadi 之后，NSArray 的许多用途应该被 NSSet 取代。NSSet 是唯一对象的集合。NSArray 是有序对象的集合。如果你的对象没有内在的顺序并且是唯一的，你应该使用 NSSet。

我经常在模型层保留一个 NSSet，让需要订单的 UI 组件创建自己的 NSArray。例如，考虑由“好友”组成的“好友列表”的情况。好友列表本身是无序的；这只是一个集合。并且对象必须是唯一的。然而，在 UI 层，您需要一个订单，您甚至可能希望将同一个好友放在多个组中（例如收藏夹和离线）。但这些都是 UI 问题，模型层不需要担心这些问题。

```
NSSet *buddies = [buddyList allBuddies];
BOOL isBuddy = [buddyList containsObject:buddy];

NSArray *buddyList = [[buddyList allBuddies] sortedAraryUsingSelector:[self buddySortSelector]]; 
```

当一个新好友出现时，BuddyList 将发布一个通知 ( `BuddyListDidAddBuddiesNotification`)，其中在其 userInfo 中包含一个添加好友的 NSSet。因此，观察这一点的 UI 元素可以以任何合适的排序顺序将好友插入到他们的列表中。这使得列表动画非常容易，如果您在模型层维护所有排序版本，这将更加困难。

当你有两个 NSSet 时，很容易找出它们之间的差异并构造一系列删除和添加以将一个变成另一个（同样，对动画很有用）。使用 NSArray 执行此操作要复杂得多。

所以我的建议是默认使用 NSSet。仅在实际需要订购时才应使用 NSArray。不幸的是，这与大多数人的做法相反。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-22T16:24:41.830

除了其他主要讨论集合但不涉及计数集合的答案之外，您可能想知道何时最好使用计数集合。计数集对于诸如加权或其他统计算法之类的东西很有用：最后，您最终可以创建一个使用存储的计数排序的内容的有序数组。

另一种选择是在唯一表中，或以引用计数器/垃圾收集器的形式。使用计数集将启用包含测试（即返回现有的相同对象而不是创建新对象——类似于 CoreData 内部所做的），同时还对其包含的值执行一种引用计数，因为对象只会一旦计数达到 0，由集合释放。

# sql-server - 非数字索引的性能

> ID：897922
> 
> 赞同：4
> 
> 时间：2009-05-22T13:45:44.283
> 
> 标签：sql-server, indexing, clustered-index

如果我在 SQL Server 数据库上使用 nvarchar(n) 列作为聚集索引，与数字 (int) 索引相比，我是否会遭受显着的性能影响？此外，复合索引的性能如何比较？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-22T14:08:59.260

Sql 并不真正关心您的索引是否为数字，但根据列中的内容以及使用表的方式，您需要考虑一些事项。

通常，您希望使索引尽可能小，因此 nvarchar(4000)（最多 8000 个字节）确实很糟糕，但 varchar(3)（最多 3 个字节）会小于 int（4 个字节）。此外，您希望（在可能的情况下）将索引插入插入索引的末尾，这可以防止索引碎片化并导致性能问题。

如果您对表运行的查询仅包含索引中的列，则复合索引可以大大提高性能。这意味着当索引满足查询时，甚至永远不会触及实际的表。

有关索引的概述，请参阅[Sql server index basics 。](http://www.simple-talk.com/sql/learn-sql-server/sql-server-index-basics/)

如果您提供有关表格本身以及您希望如何使用它的更具体的详细信息，可能会更有帮助？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-22T14:12:32.280

科林，

nvarchar 使用双倍的 varchar 列空间。如果 nvarchar 列是表上的唯一索引，那么命中可能不会那么多，但如果你在该表上也有非聚集索引，那么是的，你将受到性能影响。这是因为聚集索引也包含在非聚集索引的所有行中，并且您的非聚集索引将非常宽。另一方面，int 列仅占用 4 个字节，并且具有很大的范围来存储从 -2,147,483,648 到 2,147,483,647 的值，并且往往很窄。对于 4 个字节，nvarchar 列最多只能存储 varchar(2) 使用的空间，因为它使用的空间是 varchar 列的两倍。你知道你浪费了多少空间吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T14:09:56.857

几乎可以肯定是的。

窄的、数字的和严格单调的是一个很好的聚集键。nvarchar 不是这些。

每个非聚集索引条目都引用聚集索引，因此您也会膨胀 NC 索引。

这是在整理/比较问题之前。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T14:10:51.050

我认为这也取决于你的桌子的大小。对于较小的表，我怀疑您是否会注意到差异，但对于较大的表，例如 100 万行及以上，您可能会看到使用 nvarchar 的速度略有放缓。我想说它还取决于该字段实际包含的内容..即，它们是电子邮件等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-22T14:33:34.453

在谈论索引时，您必须将“性能”分为两个主题。

在插入、更新和删除时，索引会减慢您的数据库速度——集群索引比非集群索引更是如此，因为它可能必须在底层数据存储中移动数据。在这里，我同意 John 的观点，即顺序 int 将比 nvarchar 执行得更好。

但是，如果您无论如何都需要查询 nvarchar 字段，则该字段上的聚集索引将更能加快您的读取速度。

因此，您问题的答案实际上取决于您是否担心插入或读取的性能。

# java - Java 布局管理器垂直居中

> ID：897924
> 
> 赞同：15
> 
> 时间：2009-05-22T13:46:19.620
> 
> 标签：java, swing, layout

我有使用组布局来组织一些标签的面板。我想在调整大小时将此面板保持在屏幕中心。如果我使用流布局将面板放在另一个面板中，我可以保持标签水平居中但不能垂直居中。哪个布局管理器允许我将面板保持在屏幕中间？

我还尝试了边框布局并将其放置在中心，但它会调整为窗口大小。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-05-22T14:09:56.887

尝试使用 a[`GridBagLayout`](http://java.sun.com/javase/6/docs/api/java/awt/GridBagLayout.html)并添加带有空[`GridBagConstrants`](http://java.sun.com/javase/6/docs/api/java/awt/GridBagConstraints.html)对象的面板。
例如：

```
public static void main(String[] args) {
    JFrame frame = new JFrame();
    frame.setLayout(new GridBagLayout());
    JPanel panel = new JPanel();
    panel.add(new JLabel("This is a label"));
    panel.setBorder(new LineBorder(Color.BLACK)); // make it easy to see
    frame.add(panel, new GridBagConstraints());
    frame.setSize(400, 400);
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-22T14:11:23.127

首先，我应该提一下，阅读我关于布局的文章：http://web.archive.org/web/20120420154931/http: [//java.sun.com/developer/onlineTraining/GUI/AWTLayoutMgr/](http://web.archive.org/web/20120420154931/http://java.sun.com/developer/onlineTraining/GUI/AWTLayoutMgr/)。它很旧但很有帮助（不幸的是，这篇文章早于 BoxLayout。当我在 JavaOne 上发表演讲时，我有一些幻灯片，其中包括[http://javadude.com/articles/javaone](http://javadude.com/articles/javaone)上的 BoxLayout ）

试试 BoxLayout：

```
Box verticalBox = Box.createVerticalBox();
verticalBox.add(Box.createVerticalGlue());
verticalBox.add(stuffToCenterVertically);
verticalBox.add(Box.createVerticalGlue()); 
```

如果您想将这些东西居中，请使用 Horizo​​ntalBox 作为 stuffToCenterVertically：

```
Box horizontalBox = Box.createHorizontalBox();
horizontalBox.add(Box.createHorizontalGlue());
horizontalBox.add(stuffToCenter);
horizontalBox.add(Box.createHorizontalGlue()); 
```

比 gridbag 更容易在代码中“看到”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-23T00:05:27.270

面板本身上的 GroupLayout，带有`GroupLayout.Alignment.CENTER`, 用于垂直和水平，并将`setPreferredSize(new Dimension(yourChosenWidth,yourChosenHeight))`面板设置为不调整大小。

为了安全起见，您也可以在面板上执行 setMinimumSize 和 setMaximum size。

如果您觉得很时髦，您可以通过仔细选择并行/顺序组并对标签进行适当的分组，只为整个事情使用一个 GroupLayout。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-23T02:51:42.053

您可以构建自己的 LayoutManager 以使单个组件（两个轴或一个轴）居中。这是在两个轴上都执行此操作的一个，您可以轻松地将其更改为垂直或水平居中。

当前的实现布局第一个可见的孩子，你也可以改变它......

```
public class CentreLayout implements LayoutManager, java.io.Serializable {

public void addLayoutComponent(String name, Component comp) {
}

public void removeLayoutComponent(Component comp) {
}

public Dimension preferredLayoutSize(Container target) {
    return target.getPreferredSize();
}

public Dimension minimumLayoutSize(Container target) {
    return target.getMinimumSize();
}

public void layoutContainer(Container target) {
    synchronized (target.getTreeLock()) {
        Insets insets = target.getInsets();
        Dimension size = target.getSize();
        int w = size.width - (insets.left + insets.right);
        int h = size.height - (insets.top + insets.bottom);
        int count = target.getComponentCount();

        for (int i = 0; i < count; i++) {
            Component m = target.getComponent(i);
            if (m.isVisible()) {
                Dimension d = m.getPreferredSize();
                m.setBounds((w - d.width) / 2, (h - d.height) / 2, d.width, d.height);
                break;
            }
        }
    }
}

} 
```

# lua - 如何在lua中关闭？

> ID：897930
> 
> 赞同：2
> 
> 时间：2009-05-22T13:47:40.757
> 
> 标签：lua, closures

假设我有一个包含以下行的文件名“test.lua”：

```
--[[  test.lua --]]
local f = function()
  print"local function f in test.lua"
end

f_generate = function()
  local fun = loadstring(" f()")
-- local env = getfenv(1)
-- set(fun,env)
  return fun
end
f_generate()()
--[[ end of test.lua--]] 
```

因为 loadstring 在全局环境下做它的事情，所以当我调用 f_generate()() 时我会得到一个错误“尝试调用全局'f'（一个 nil 值）”

注释掉的代码表明函数环境不能处理这个问题。

因为表是lua中唯一的数据结构，（函数环境和其他很多东西都是通过表实现的），我认为假设闭包也是通过表实现是合理的，但是我怎么能得到它呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-22T20:56:05.220

`loadstring()`从提出的问题和提供的示例代码来看，当函数和闭包是语言中的一等值时，我认为没有必要使用。我会考虑这样做：

```
--test.lua
局部 f = 函数（）
  print"test.lua 中的局部函数 f"
结尾

f_generate = 函数（）
  local fun = function() return f() end
  回归乐趣
结尾
f_generate()()
-- test.lua 结束

```

如果 f_generate 有一个参数，动机就更清楚了：

```
--test.lua
局部 f = 函数（y）
  print("本地函数 f("..y..") in test.lua")
结尾

f_generate = 函数（名称）
  local fun = function() return f(name) end
  回归乐趣
结尾
f_generate("foo")()
f_generate("bar")()
-- test.lua 结束

```

显式地通过解析器`loadstring()`将代码带到调用范围之外`loadstring()`。局部变量不存储在任何环境表中。它们的实现方式与使用任何其他语言的方式大致相同：它们的存储空间由代码生成器分配，并且在编译之外无法访问。当然，调试模块（和 API）可以窥视它们，但绝不建议在调试器之外使用。

保留对局部变量的引用以在范围外使用的正确方法是作为闭包的真正上值。这就是`fun = function() return f() end`. 在这种情况下，该值`f`将保留为存储在中的函数的上值`fun`。请注意，在实践中，这种包装为上值是非常有效的。无需名称查找即可找到该值，而且由于我使用了尾调用，因此也不需要额外的堆栈帧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-24T02:58:36.347

看，您不能将函数/闭包视为表格。考虑以下代码：

```
local table = {
    baz = {
        blah = "bar"
    },
    foo = table.baz.blah
} 
```

在这种情况下，您执行的操作相当于从更广泛的范围访问更窄范围内的内容。这对于函数是不可能的，这意味着如果这是真的，那么您可以访问通常无法访问的局部变量。

现在，修复您的代码：

```
local __cmp__table = { 
    [">"] = function(a,b) return a>b end, 
    [">="] = function(a,b) return a>=b end, 
    ["<"] = function(a,b) return a<b end, 
    ["<="] = function(a,b) return a<=b end, 
    ["=="] = function(a,b) return a==b end, 
    ["~="] = function(a,b) return a~=b end, 
} 
cmp = function(a, op, b) 
    return __cmp__table[op](a,b) 
end 
```

这将允许您使用适当的比较函数对任何两个变量调用 cmp。如果我错过了关于您的代码的要点，请告诉我！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T14:03:12.440

我认为你混合了两种不同的东西：

1.  闭包：为此， f() 的定义应该在您想要包含的任何局部变量的范围内。

    *   将局部变量插入动态编译的函数中。这不是 Lua 正式支持的。这不是环境问题，而是范围问题。

请记住：范围是词法的，而环境是每个函数认为的“全局空间”。

从文本字符串构造的函数位于不同的词法空间中，就像它位于不同的文件中一样，因此它有自己的范围，与其他函数分开。

顺便说一句，“调试”接口让你可以处理函数的局部变量，所以可能有办法。我只是觉得没有必要这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T14:10:48.697

您必须删除“本地”，否则它将被垃圾收集。

```
--local f = function()
f = function()
  print"local function f in test.lua"
end 
```

# language-agnostic - 如何在解析器生成器（ANTLR、YACC 等）中解析名称=值对列表？

> ID：897934
> 
> 赞同：1
> 
> 时间：2009-05-22T13:48:39.177
> 
> 标签：language-agnostic, parsing, grammar

我想以以下形式解析（空格分隔）对的列表

```
name1=value1 name2=value2 ... 
```

在哪里：

*   NAME 可以包含除空格和等号以外的任何内容
*   VALUE 可以包含除空格以外的任何内容（包括等号！）

问题是让解析器匹配输入

```
name1=value1 
```

作为单独`'NAME EQUALS VALUE'`的令牌，而不是作为单个`'VALUE'`令牌。

PS。我知道这对于直接编码来说是微不足道的，但我需要在更大的解析器的上下文中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-19T11:39:56.613

这是 antlr 中的一些东西，它解析了这个；

```
a=b=c=d c=d e=f 
```

这可能不是你需要的一切，但它应该是核心。

```
grammar NameValuePairs;

pairs   :  namevaluepair (WS namevaluepair)*;

namevaluepair
  :  name '=' value;

name  :  ID;

value  :  ID ('=' ID)*;

WS  :  ' ' {skip()};

EQ  :  '=';

ID  :  ~(' ' | '=')*; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T13:59:53.710

如果 VALUE 可以包含等号，我认为您最终可能会遇到问题。如果可能的话，我认为最好将等号设为保留字符，或者切换到不同的保留字符来表示“=”。

我不确定这是否可以在您的较大解析器的上下文中工作，但您可以在空间上拆分，为您提供一个数组（或您的语言将使用的任何数据结构）“NAME=VALUE”对。然后循环遍历数组并在您用于“=”的保留字符上再次拆分。如果您无法更改或保留“=”，您可以使用正则表达式来匹配“=”的第一个实例。希望我不会偏离基地！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T14:04:19.083

对于名称值对，您不需要强大的解析器，正则表达式就足够了。除非你有一些上下文或嵌套结构，否则这个“工作”属于词法分析器，而不是解析器:)

# java - Java泛型什么时候需要而不是 切换有什么缺点吗？

> ID：897935
> 
> 赞同：234
> 
> 时间：2009-05-22T13:48:39.317
> 
> 标签：java, generics, junit

给定以下示例（将 JUnit 与 Hamcrest 匹配器一起使用）：

```
Map<String, Class<? extends Serializable>> expected = null;
Map<String, Class<java.util.Date>> result = null;
assertThat(result, is(expected)); 
```

这不与以下的 JUnit`assertThat`方法签名一起编译：

```
public static <T> void assertThat(T actual, Matcher<T> matcher) 
```

编译器错误信息是：

```
Error:Error:line (102)cannot find symbol method
assertThat(java.util.Map<java.lang.String,java.lang.Class<java.util.Date>>,
org.hamcrest.Matcher<java.util.Map<java.lang.String,java.lang.Class
    <? extends java.io.Serializable>>>) 
```

但是，如果我将`assertThat`方法签名更改为：

```
public static <T> void assertThat(T result, Matcher<? extends T> matcher) 
```

然后编译工作。

所以三个问题：

1.  为什么当前版本不能编译？虽然我对这里的协方差问题有模糊的了解，但如果必须要解释的话，我当然无法解释。
2.  `assertThat`将方法更改为 有什么缺点`Matcher<? extends T>`吗？如果您这样做，是否还有其他情况会中断？
3.  `assertThat`JUnit中方法的泛化有什么意义吗？该类`Matcher`似乎不需要它，因为 JUnit 调用了 match 方法，该方法没有使用任何泛型进行类型化，并且看起来像是在尝试强制不做任何事情的类型安全，因为`Matcher`实际上不会匹配，无论如何测试都会失败。不涉及不安全的操作（或者看起来如此）。

作为参考，这里是 JUnit 的实现`assertThat`：

```
public static <T> void assertThat(T actual, Matcher<T> matcher) {
    assertThat("", actual, matcher);
}

public static <T> void assertThat(String reason, T actual, Matcher<T> matcher) {
    if (!matcher.matches(actual)) {
        Description description = new StringDescription();
        description.appendText(reason);
        description.appendText("\nExpected: ");
        matcher.describeTo(description);
        description
            .appendText("\n     got: ")
            .appendValue(actual)
            .appendText("\n");

        throw new java.lang.AssertionError(description.toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2009-05-22T13:59:24.397

首先 - 我必须引导你访问[http://www.angelikalanger.com/GenericsFAQ/JavaGenericsFAQ.html](http://www.angelikalanger.com/GenericsFAQ/JavaGenericsFAQ.html) - 她做得很棒。

基本思想是你使用

```
<T extends SomeClass> 
```

当实际参数可以是`SomeClass`它的任何子类型时。

在你的例子中，

```
Map<String, Class<? extends Serializable>> expected = null;
Map<String, Class<java.util.Date>> result = null;
assertThat(result, is(expected)); 
```

您是说`expected`可以包含代表任何实现的类的 Class 对象`Serializable`。你的结果图说它只能保存`Date`类对象。

当您传递结果时，您将设置为`T`完全`Map`的类对象，这与任何.`String``Date``Map``String``Serializable`

要检查的一件事 - 你确定你想要`Class<Date>`而不是`Date`？`String`to的映射`Class<Date>`通常听起来不是很有用（它只能`Date.class`作为值而不是 的实例`Date`）

至于泛化`assertThat`，想法是方法可以确保`Matcher`传入适合结果类型的a。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2009-05-24T16:31:27.403

感谢所有回答这个问题的人，这真的帮助我澄清了一些事情。最后，Scott Stanchfield 的回答与我最终理解它的方式最接近，但由于他第一次写它时我不理解他，我试图重申这个问题，希望其他人能从中受益。

我将用 List 来重申这个问题，因为它只有一个通用参数，这样更容易理解。

参数化类（例如示例中的List`<Date>`或 Map ）的目的是**强制向下转换**并让编译器保证这是安全的（没有运行时异常）。`<K, V>`

 **考虑 List 的情况。我的问题的本质是为什么采用类型 T 和 List 的方法不会接受比 T 更远的继承链的 List。考虑这个人为的例子：

```
List<java.util.Date> dateList = new ArrayList<java.util.Date>();
Serializable s = new String();
addGeneric(s, dateList);

....
private <T> void addGeneric(T element, List<T> list) {
    list.add(element);
} 
```

这不会编译，因为 list 参数是日期列表，而不是字符串列表。如果确实编译，泛型将不是很有用。

同样的事情也适用于 Map`<String, Class<? extends Serializable>>`它与 Map 不同`<String, Class<java.util.Date>>`。它们不是协变的，所以如果我想从包含日期类的映射中获取一个值并将其放入包含可序列化元素的映射中，那很好，但是方法签名说：

```
private <T> void genericAdd(T value, List<T> list) 
```

希望能够做到这两点：

```
T x = list.get(0); 
```

和

```
list.add(value); 
```

在这种情况下，即使 junit 方法实际上并不关心这些事情，但方法签名需要协方差，它没有得到，因此它不会编译。

关于第二个问题，

```
Matcher<? extends T> 
```

当 T 是一个对象时，会真正接受任何东西的缺点，这不是 API 的意图。目的是静态地确保匹配器与实际对象匹配，并且无法从计算中排除对象。

第三个问题的答案是，就未经检查的功能而言，不会丢失任何东西（如果此方法未泛化，则 JUnit API 内不会有不安全的类型转换），但他们正在尝试完成其他事情 - 静态确保两个参数可能匹配。

编辑（经过进一步的思考和经验）：

assertThat 方法签名的一大问题是试图将变量 T 等同于 T 的泛型参数。这不起作用，因为它们不是协变的。因此，例如，您可能有一个 T ，它是 a`List<String>`但随后将编译器计算出来的匹配项传递给`Matcher<ArrayList<T>>`. 现在，如果它不是类型参数，一切都会好起来的，因为 List 和 ArrayList 是协变的，但是由于泛型，就编译器而言需要 ArrayList，它不能容忍 List，原因我希望很清楚从上面。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-05-22T17:29:55.940

它归结为：

```
Class<? extends Serializable> c1 = null;
Class<java.util.Date> d1 = null;
c1 = d1; // compiles
d1 = c1; // wont compile - would require cast to Date 
```

您可以看到类引用 c1 可能包含一个 Long 实例（因为在给定时间的基础对象可能是`List<Long>`），但显然不能转换为 Date，因为不能保证“未知”类是 Date。它不是类型安全的，所以编译器不允许它。

但是，如果我们引入其他对象，例如 List（在您的示例中，此对象是 Matcher），则以下情况变为 true：

```
List<Class<? extends Serializable>> l1 = null;
List<Class<java.util.Date>> l2 = null;
l1 = l2; // wont compile
l2 = l1; // wont compile 
```

...但是，如果 List 的类型变为 ? 扩展 T 而不是 T....

```
List<? extends Class<? extends Serializable>> l1 = null;
List<? extends Class<java.util.Date>> l2 = null;
l1 = l2; // compiles
l2 = l1; // won't compile 
```

我认为通过更改`Matcher<T> to Matcher<? extends T>`，您基本上是在引入类似于分配 l1 = l2; 的场景。

嵌套通配符仍然非常令人困惑，但希望通过查看如何将泛型引用相互分配来帮助理解泛型是有道理的。这也更加令人困惑，因为编译器在您进行函数调用时推断 T 的类型（您没有明确告诉它是 T 是）。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-05-22T15:06:27.413

您的原始代码无法编译的原因`<? extends Serializable>`并不*意味着*“任何扩展 Serializable 的类”，而是“一些未知但特定的扩展 Serializable 的类”。

例如，给定编写的代码，分配`new TreeMap<String, Long.class>()`给是完全有效的`expected`。如果编译器允许代码编译，则`assertThat()`可能会中断，因为它会期望`Date`对象而不是`Long`它在映射中找到的对象。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-05-22T15:58:17.730

我理解通配符的一种方法是认为通配符没有指定给定泛型引用可以“拥有”的可能对象的类型，而是它兼容的其他泛型引用的类型（这听起来可能令人困惑...）因此，第一个答案的措辞非常具有误导性。

换句话说，`List<? extends Serializable>`意味着您可以将该引用分配给其他列表，其中类型是某种未知类型，或者是 Serializable 的子类。不要认为 A SINGLE LIST 能够保存 Serializable 的子类（因为这是不正确的语义并导致对泛型的误解）。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-01-23T02:51:46.780

我知道这是一个老问题，但我想分享一个我认为可以很好地解释有界通配符的示例。`java.util.Collections`提供这种方法：

```
public static <T> void sort(List<T> list, Comparator<? super T> c) {
    list.sort(c);
} 
```

如果我们有一个 的列表`T`，那么列表当然可以包含扩展的类型的实例`T`。如果列表包含动物，则列表可以同时包含 Dogs 和 Cats（均为 Animals）。狗有一个属性“woofVolume”，猫有一个属性“meowVolume”。虽然我们可能希望根据 的子类特有的这些属性进行排序，但`T`我们怎么能期望这个方法做到这一点呢？Comparator 的一个限制是它只能比较一种类型的两个事物（`T`）。因此，只需要 a`Comparator<T>`将使此方法可用。但是，此方法的创建者认识到，如果某物是 a `T`，那么它也是 的超类的一个实例`T`。因此，他允许我们使用 Comparator`T`或 的任何超类`T`，即`? super T`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-22T17:30:03.680

如果你使用怎么办

```
Map<String, ? extends Class<? extends Serializable>> expected = null; 
```

# javascript - 如何让 YUI 更轻更快？

> ID：897940
> 
> 赞同：2
> 
> 时间：2009-05-22T13:49:34.060
> 
> 标签：javascript, yui

我见过很多基于 YUI 的网站，但都反应很慢。有什么好的解决方案可以让这些javascript文件更轻、更快吗？

我现在已经使用了一个 yuicompressor 和另一个 javascript 压缩器，但是还是太慢了。

似乎 YUI 考虑了太多的极端情况，以至于每个文件都非常大。如果尺寸可以缩小，我愿意接受一些极端案例。

关于 YAHOO.util.Event.addListener 的一件事，你知道它的实现是怎样的吗？此函数是否侦听全局文档然后在必要时触发事件？我觉得那样的话会很可怕。但我还没有深入到找出答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T14:29:47.877

您可以查看 YUI 的[34 个最佳实践](http://developer.yahoo.com/performance/)，看看您是否错过了其中的任何一个。

您还可以在您的站点中寻找 bootlenecks，那里有很多分析器。firebug 的分析器可以帮助您识别某些情况，还有 YSlow 插件。

希望这可以为您指明正确的方向，祝您好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-30T02:57:11.490

我所做的一件大大加快了我的 YUI 网站的事情是使用 Yahoo CDN。

G人

# python - Python 相当于 PHP 的 memory_get_usage()？

> ID：897941
> 
> 赞同：24
> 
> 时间：2009-05-22T13:49:41.797
> 
> 标签：python

我已经[找到了以下问题](https://stackoverflow.com/questions/110259/python-memory-profiler)，但我想知道是否有一种更快更脏的方法来估计 python 解释器当前为我的脚本使用了多少内存，而不依赖于外部库。

我来自 PHP，曾经为此目的经常使用[memory_get_usage()](http://au.php.net/memory_get_usage)和[memory_get_peak_usage()](http://au.php.net/memory_get_peak_usage)，我希望能找到一个等价物。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-05-22T15:14:38.443

Linux 和其他系统的一个简单解决方案`/proc/self/status`是以下代码，我在我的一个项目中使用它：

```
def memory_usage():
    """Memory usage of the current process in kilobytes."""
    status = None
    result = {'peak': 0, 'rss': 0}
    try:
        # This will only work on systems with a /proc file system
        # (like Linux).
        status = open('/proc/self/status')
        for line in status:
            parts = line.split()
            key = parts[0][2:-1].lower()
            if key in result:
                result[key] = int(parts[1])
    finally:
        if status is not None:
            status.close()
    return result 
```

它返回当前和峰值驻留内存大小（这可能是人们谈论应用程序正在使用多少 RAM 时的意思）。`/proc/self/status`很容易扩展它以从文件中获取其他信息。

对于好奇：完整的输出`cat /proc/self/status`看起来像这样：

```
% cat /proc/self/status
Name:   cat
State:  R (running)
Tgid:   4145
Pid:    4145
PPid:   4103
TracerPid:      0
Uid:    1000    1000    1000    1000
Gid:    1000    1000    1000    1000
FDSize: 32
Groups: 20 24 25 29 40 44 46 100 1000 
VmPeak:     3580 kB
VmSize:     3580 kB
VmLck:         0 kB
VmHWM:       472 kB
VmRSS:       472 kB
VmData:      160 kB
VmStk:        84 kB
VmExe:        44 kB
VmLib:      1496 kB
VmPTE:        16 kB
Threads:        1
SigQ:   0/16382
SigPnd: 0000000000000000
ShdPnd: 0000000000000000
SigBlk: 0000000000000000
SigIgn: 0000000000000000
SigCgt: 0000000000000000
CapInh: 0000000000000000
CapPrm: 0000000000000000
CapEff: 0000000000000000
CapBnd: ffffffffffffffff
Cpus_allowed:   03
Cpus_allowed_list:      0-1
Mems_allowed:   1
Mems_allowed_list:      0
voluntary_ctxt_switches:        0
nonvoluntary_ctxt_switches:     0 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2011-10-06T00:41:21.460

您还可以使用`getrusage()`标准库模块中的函数`resource`。结果对象具有属性`ru_maxrss`，它给出了调用进程的总峰值内存使用量：

```
>>> import resource
>>> resource.getrusage(resource.RUSAGE_SELF).ru_maxrss
2656 
```

[Python 文档](http://docs.python.org/library/resource.html#resource-usage)不清楚单位是什么，但[Mac OS X 手册页](http://developer.apple.com/library/mac/#documentation/darwin/reference/manpages/man2/getrusage.2.html)将单位描述 为`getrusage(2)`千字节。

Linux 手册页不清楚，但它似乎等同`/proc/self/status`于接受的答案中描述的信息（即千字节）。对于与上述相同的进程，在 Linux 上运行，接受的答案中列出的函数给出：

```
>>> memory_usage()                                    
{'peak': 6392, 'rss': 2656} 
```

这可能不像`/proc/self/status`解决方案那样容易使用，但它是标准库，因此（假设单元是标准的）它应该是跨平台的，并且可以在缺乏的系统上使用`/proc/`（例如 Mac OS X 和其他 Unix，也许视窗）。

此外，`getrusage()`还可以提供函数`resource.RUSAGE_CHILDREN`来获取子进程的使用情况，以及（在某些系统上）`resource.RUSAGE_BOTH`获取总（自身和子）进程使用情况。

这将涵盖这种`memory_get_usage()`情况，但不包括峰值使用量。我不确定`resource`模块中的任何其他功能是否可以提供高峰使用。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-16T10:26:49.280

[接受的答案规则，但使用psutil](https://github.com/giampaolo/psutil)可能更容易（并且更便携）。它的作用相同，而且更多。

更新：[muppy](http://packages.python.org/Pympler/muppy.html)也非常方便（并且比 guppy/heapy 有更好的文档记录）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-22T13:57:02.187

尝试[堆](http://guppy-pe.sourceforge.net/#Heapy)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-26T18:11:45.613

中的同种数据`/proc/self/status`也在`/proc/self/statm`. 但是，它更容易解析，因为它只是几个[统计信息](http://man7.org/linux/man-pages/man5/proc.5.html)的空格分隔列表。我无法判断这两个文件是否始终存在。

> /proc/[pid]/statm
> 
> 提供有关内存使用情况的信息，以页为单位。这些列是：
> 
> *   size (1) 总程序大小（与 /proc/[pid]/status 中的 VmSize 相同）
> *   resident (2) 驻留集大小（与 /proc/[pid]/status 中的 VmRSS 相同）
> *   shared (3) 常驻共享页面的数量（即，由文件支持）（与 /proc/[pid]/status 中的 RssFile+RssShmem 相同）
> *   文字（4）文字（代码）
> *   lib (5) 库（自 Linux 2.6 起未使用；始终为 0）
> *   数据（6）数据+堆栈
> *   dt (7) 脏页（自 Linux 2.6 起未使用；始终为 0）

这是一个简单的例子：

```
from pathlib import Path
from resource import getpagesize

PAGESIZE = getpagesize()
PATH = Path('/proc/self/statm')

def get_resident_set_size() -> int:
    """Return the current resident set size in bytes."""
    # statm columns are: size resident shared text lib data dt
    statm = PATH.read_text()
    fields = statm.split()
    return int(fields[1]) * PAGESIZE

data = []
start_memory = get_resident_set_size()
for _ in range(10):
    data.append('X' * 100000)
    print(get_resident_set_size() - start_memory) 
```

这会产生一个看起来像这样的列表：

```
0
0
368640
368640
368640
638976
638976
909312
909312
909312 
```

您可以看到它在大约 3 次分配 100,000 字节后跳跃了大约 300,000 字节。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-27T09:02:01.697

[`/proc/self/status`](http://man7.org/linux/man-pages/man5/proc.5.html)具有以下相关键：

*   *VmPeak*：峰值虚拟内存大小。
*   *VmSize*：虚拟内存大小。
*   *VmHWM*：峰值驻留集大小（“高水位线”）。
*   *VmRSS*：驻留集大小。

因此，如果关注的是常驻内存，我可以使用以下代码来检索它：

```
def get_proc_status(keys = None):
    with open('/proc/self/status') as f:
        data = dict(map(str.strip, line.split(':', 1)) for line in f)

    return tuple(data[k] for k in keys) if keys else data

peak, current = get_proc_status(('VmHWM', 'VmRSS'))
print(peak, current)  # outputs: 14280 kB 13696 kB 
```

这是[*memory_profiler*](http://fa.bianp.net/blog/2013/different-ways-to-get-memory-consumption-or-lessons-learned-from-memory_profiler/)[的作者的](http://fa.bianp.net/blog/2013/different-ways-to-get-memory-consumption-or-lessons-learned-from-memory_profiler/)[一篇文章](http://fa.bianp.net/blog/2013/different-ways-to-get-memory-consumption-or-lessons-learned-from-memory_profiler/)*，解释了`getrusage`'s`ru_maxrss`并不总是一种实际的措施。另请注意，`VmHWM`可能不同于`ru_maxrss`（我在某些情况下看到的`ru_maxrss`更大）。但在简单的情况下，它们是相同的：*

 *```
import resource

def report():
    maxrss = resource.getrusage(resource.RUSAGE_SELF).ru_maxrss
    peak, current = get_proc_status(('VmHWM', 'VmRSS'))
    print(current, peak, maxrss)

report()

s = ' ' * 2 ** 28  # 256MiB
report()

s = None
report() 
```

此外，这里有一个由[*顶级*](http://www.atoptool.nl/download/case_leakage.pdf)[作者撰写的非常易于理解但内容丰富的](http://www.atoptool.nl/download/case_leakage.pdf)[案例研究，](http://www.atoptool.nl/download/case_leakage.pdf)*它解释了什么是内核、虚拟和常驻内存，以及它们是如何相互依赖的。*

 *# php - 如何获得 mod-rewrites 和 php 301 重定向？

> ID：897943
> 
> 赞同：1
> 
> 时间：2009-05-22T13:50:13.480
> 
> 标签：php, .htaccess, mod-rewrite

我希望有人也可以指导我在 php 站点 pcs4cheap.ca 上设置重定向 ....我尝试通过 .htaccess 进行 mod 重写，工作正常但阻止任何其他登录或管理页面打开！

任何其他我可以实现这一点的方式将不胜感激=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T13:57:03.280

看看这个问题：

[如何在不使用 javascript 的情况下最好地重定向网页](https://stackoverflow.com/questions/875318/how-best-to-redirect-a-webpage-without-using-javascript/875328#875328)

在 PHP 中，它是通过使用 header() 函数来完成的。

```
<?php
header("HTTP/1.1 301 Moved Permanently");
header("Location: http://www.example.com/");
exit; 
```

# wpf - 在 Windows 窗体上使用 WPF 有什么好处？

> ID：897945
> 
> 赞同：8
> 
> 时间：2009-05-22T13:50:24.213
> 
> 标签：wpf, winforms

我以前使用 .NET 和 Windows 窗体编写过用户界面。

我即将开始开发一款新软件。该软件只是一个简单的实用程序，它将利用富文本字段、一些按钮、对话框等。

似乎 Windows 窗体非常适合这种情况。我不需要任何华而不实的东西。

但是，WPF 是新事物，我想学习它。

我在 WPF 中制作了一个 hello world 应用程序，但我并不高兴，因为运行该应用程序需要花费太多时间，而编译它需要加倍的时间。

我是 WPF 新手，所以我有不止一个问题：

1.  WPF 适合什么样的应用程序？
2.  Windows 窗体的未来是什么？
3.  WPF 的当前版本是什么？我猜它是 1.0，因为它带有 NET 框架 3.0。
4.  在创建我的第一个 Hello World WPF 应用程序时发现的东西在 WPF 的下一版本中是否会有任何重大改进？
5.  WPF 是否与 NET 4.0 一起更新（我的意思是，下一个版本将与 .NET v4 一起提供）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-22T13:51:49.000

请参阅：[https ://stackoverflow.com/questions/713193/wpf-vs-windows-forms/713249#713249](https://stackoverflow.com/questions/713193/wpf-v-s-winform/713249#713249)

要回答您的问题：

1.  WPF 可用于任何类型的应用程序，但它确实在广泛使用 3D、视频、动画、针对 XML 的数据绑定的应用程序中大放异彩
2.  没有人确切知道，但 Windows 窗体肯定会出现一段时间。Microsoft 没有构建 WPF 来*替换*Windows 窗体。
3.  当前版本是 WPF 3.5 SP1
4.  他们将引入新控件（类似于 Office 的功能区控件、DataGrid 等）、提高性能和更多增强功能。另请参阅：*[.NET 3.5 客户端产品路线图](http://weblogs.asp.net/scottgu/archive/2008/02/19/net-3-5-client-product-roadmap.aspx)*。
5.  是的，我相信是的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-22T14:30:32.930

我花了一段时间才进入 WPF，但我认为它真正闪耀的领域是数据绑定。不费吹灰之力，我就可以摆脱大量的显示逻辑，让 .NET 处理所有这些。如果您要显示大量数据，这是一个巨大的胜利。如果您所做的只是传递几个参数并按下按钮，我认为这不一定值得。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T14:03:51.923

几天前，我从一位 Microsoft 开发人员那里读到了一篇文章，他就 WPF 进行了几次讨论。在文章中，他说有人问他一个与你非常相似的问题。这个人正在创建一个简单的 Windows 应用程序，不需要 WPF 的任何华丽的 3D 功能，他问我为什么要使用 WPF 而不是 WinForms？

基本上，微软开发人员表示没有令人信服的理由让他这样做。就像 Razzie 提到的那样，创建 WPF 并不是为了取代 WinForms，这是一个经过验证的平台。相反，它旨在设计新的丰富 UI 应用程序，Microsoft 认为这些应用程序将在未来几年内被广泛使用。

编辑：找到博客条目的链接： [LINK](http://joshsmithonwpf.wordpress.com/2007/09/05/wpf-vs-windows-forms/)

# asp.net - 在 Vb.net 中传递隐藏变量

> ID：897952
> 
> 赞同：1
> 
> 时间：2009-05-22T13:51:57.360
> 
> 标签：asp.net, vb.net, hidden-variables

我想将一些变量传递到另一个页面。目前我正在使用 response.redirect 并在 url 中传递变量。我对使用会话变量并不感兴趣。有没有办法将 .NET 中的隐藏变量传递给完全不同的形式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T13:54:28.713

您可以使用

```
Server.Transfer("Your transfer page url") 
```

server.transfer 会将当前页面的所有变量转移到另一个转移的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-22T13:57:10.720

（您也可以使用**Server.Transfer()**而不会丢失**Request.Form**数据。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T14:01:48.730

将数据传递到下一页基本上有三种方式：

*   在查询字符串中

    这仅限于浏览器可以处理的 URL 大小，大约 1000 个字符被认为是安全的。

*   在表单数据中

    这需要您发布表单而不是使用`Response.Redirect`. 您可以在页面中放置隐藏字段。因此，这些值并未完全隐藏，因为它们可以在页面源中看到，并且它们在请求中发送，尽管不像在 URL 中那样立即可见。

*   在会话变量中

    这不会直接发送数据，而是仅在请求中发送会话 ID（作为 cookie），会话变量永远不会离开服务器。

当用户打开多个窗口显示您网站的页面时，应用的方法之间存在细微差别。在前两种方法中，每个窗口都有自己的数据集，但使用第三种方法意味着所有窗口都使用相同的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T14:02:20.040

您可以尝试 cookie，但您仍然可以看到它们是什么，而且它不是很可靠。我会使用会话变量，就像在 Syed 的示例中一样。

# visual-studio - 从 Visual Studio 文档缓存中恢复文件？

> ID：897956
> 
> 赞同：32
> 
> 时间：2009-05-22T13:53:26.173
> 
> 标签：visual-studio, recovery, file-recovery

我刚刚丢失了一些代码。我需要将几个方法从一个类移动到另一个类，所以我点击保存，剪切方法，VS 崩溃了。现在看来保存是在剪切之后发生的，因为没有这些方法就保存了代码，但代码不在我的剪贴板上。所以我没有代码，也没有简单的方法可以取回它！

我知道 Visual Studio 保留一个文档缓存，它在显示恢复文件对话框时使用它，但在 VS 启动备份时没有显示。我希望我的课程有一个版本，代码仍然在那里，所以我不必重新开始，但我不知道去哪里找。

谁能告诉我 VS 将这些文件保存在磁盘上的什么位置？

非常感谢您可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2009-05-22T14:10:08.963

对其进行排序。这些恢复文件位于 @MyDocuments\Visual Studio X\Backup Files\Project Name...

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2019-12-11T01:04:10.393

Visual Studio 2019.4.1 中有我的备份文件`%localappdata%\Microsoft\VisualStudio\BackupFiles`- MyDocuments 树中的文件夹是空的。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2011-06-16T15:04:40.933

如果您已将代码编译为 DLL，则可以使用 ILSpy 或 Reflector 将其反编译回代码。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-01-07T15:11:17.490

我来这里是为了寻找相同问题的答案，但这些东西都没有帮助 - 话虽如此，在 Visual Studio 2010 中删除的文件最终会进入 Windows 回收站。

这是另一篇谈论同一件事的帖子：[如何从 Visual Studio 2010 中恢复已删除的项目？](https://stackoverflow.com/questions/8076561/how-do-i-recover-a-deleted-item-from-visual-studio-2010)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-21T06:47:41.450

这是 VS 中的一个已知错误，并且一直被 Microsoft 忽略。结果，我失去了一整天的工作。对我有用的解决方案是将我的项目移动到 GoogleDrive 同步文件夹。现在，每次我保存文件时，Google Drive 都会将副本同步到云端。除了对 Git 的定期提交，我永远不必放松工作.. 叹息

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-05-03T15:05:39.327

对于 Linux，位置似乎是 ~/.config/Code/Backups/

（在这里找到信息：[https](https://github.com/Microsoft/vscode/issues/3884) ://github.com/Microsoft/vscode/issues/3884 ）

祝您恢复文件好运，未来的旅行者！我走运了！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-22T14:07:40.683

它现在对您没有帮助，但您可能需要安装[ClipX](http://www.bluemars.org/clipx/)，它有助于在剪贴板上保留任意数量的项目。它在崩溃发生时帮助了我，但不久前剪贴板上有一个版本。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-22T14:43:23.793

对于那些在删除文件并使用 Visual Studio（2019，在我的情况下为专业版）后发现此问题并且上述方法均无效的人，我设法在以下位置找到了一些智能感知备份：

`%appdata%\Local\Temp\VSFeedbackIntelliCodeLogs\Suggestions\XXX\output\versions`

其中 XXXX 是您处理已删除文件的最近时间。

我丢失的一个文件是完整的，另一个确实丢失了一些位，但它比其他文件要好得多。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-02T03:24:16.093

在 Ubuntu 18.04 上运行，VS 代码 1.51.0

我的 VS Code 删除的文件位于：**~/.local/share/Trash/files**

要搜索已删除的文件：

```
find ~/.local/share/Trash/files -name your_file_name 
```

希望我的案例有所帮助！

# windows-mobile - 在 Windows Mobile 中以编程方式设置 PEAP 连接

> ID：897961
> 
> 赞同：2
> 
> 时间：2009-05-22T13:54:33.643
> 
> 标签：windows-mobile, compact-framework, pinvoke, wifi

我已经为此工作了几天，这让我很头疼：

我们的应用程序使用 .NET Compact Framework 2.0 构建并在 Windows Mobile 5 和 6 设备上运行。我们可以使用无线零配置函数（在此处描述：msdn.microsoft.com/en-us/library/ms894771.aspx）以编程方式设置设备的 WLAN 连接，最值得注意的是我们从应用程序中调用的 WZCSetInterface 函数。这适用于 WEP 和 WPA-PSK 连接。

为了增加对 WPA2 网络的支持，我们决定修改代码。通过在调用 WZCSetInterface 之前设置正确的注册表设置，我们成功地添加了对 WPA2 的支持，该支持使用证书进行 802.1x 身份验证。现在我们希望使用 PEAP (MS-CHAPv2) 身份验证对 WPA2 执行相同的操作。在 Windows Mobile 中手动创建此类连接时，将提示用户输入域/用户/密码详细信息。在我们的应用程序中，我们将这些详细信息存储在本地，并希望以编程方式完成所有这些操作，而无需任何用户干预。

所以我想沿着与证书认证相同的路线，在调用 WZCSetInterface 之前设置正确的注册表项。

我们设置的注册表设置是：\HKCU\Comm\EAP\Config\[ssid name]

*   Enable8021x = 1 (DWORD)
*   LastAuthSuccessful = 1 (DWORD)
*   EapTypeId = 25 (DWORD)
*   身份 =“域\用户名”（字符串）
*   密码 = 包含使用
    CryptProtectData 函数加密的密码的二进制 blob（在此处描述：msdn.microsoft.com/en-us/library/ms938309.aspx）

但是，当设置了这些设置并且我使用正确的参数调用 WZCSetInterface 时，它​​仍然提示我使用“用户登录”对话框询问域/用户名/密码。

有没有人知道我需要做什么来防止密码对话框出现并立即与存储在注册表中的设置连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-02-25T10:56:57.900

经过一番调查，我最终放弃了注册表设置。似乎成功连接的关键是 HKCU\Comm\EAP\Config[SSID] 中的密码值。但是由于 CryptProtectData 使用未记录的熵值（出于明显的安全原因）来加密密码，因此似乎不可能以编程方式在注册表中重新创建有效条目。

然后我选择了第二个最佳解决方案，在调用后捕获用户登录对话框`WZCSetInterface`并在其中输入必填字段：

```
bool enteredPeapCred = false;
DateTime timePeapCredStarted = DateTime.Now.AddSeconds(10);

// wait for PEAP credentials window to appear (max. wait for 10 seconds)
while (!enteredPeapCred && timePeapCredStarted >= DateTime.Now)
{
  IntPtr hwndLogon = Win32.FindWindow(null, "User Logon");

  if (hwndLogon != IntPtr.Zero)
  {
    // move User Logon window offscreen to prevent screen flicker in app
    Win32.MoveWindow(hwndLogon, -600, 0, 320, 480, true);                               

    // "Network Log On" label   
    IntPtr hwndCtrl1 = Win32.GetWindow(hwndLogon, Win32.GW_CHILD); 
    // "Enter network info..." label
    IntPtr hwndCtrl2 = Win32.GetWindow(hwndCtrl1, Win32.GW_HWNDNEXT); 
    // "User name:" label
    IntPtr hwndCtrl3 = Win32.GetWindow(hwndCtrl2, Win32.GW_HWNDNEXT); 
    // username textbox
    IntPtr hwndCtrl4 = Win32.GetWindow(hwndCtrl3, Win32.GW_HWNDNEXT);
    // "Password:" label 
        IntPtr hwndCtrl5 = Win32.GetWindow(hwndCtrl4, Win32.GW_HWNDNEXT);
    // password textbox 
    IntPtr hwndCtrl6 = Win32.GetWindow(hwndCtrl5, Win32.GW_HWNDNEXT); 
    // enter password into textbox
    StringBuilder sbPassword = new StringBuilder();
    sbPassword.Append(eapPassword);
    Win32.SetWindowText(hwndCtrl6, sbPassword);
    // "Domain:" label
    IntPtr hwndCtrl7 = Win32.GetWindow(hwndCtrl6, Win32.GW_HWNDNEXT); 
    // domain textbox
    IntPtr hwndCtrl8 = Win32.GetWindow(hwndCtrl7, Win32.GW_HWNDNEXT);
    // "Save password" checkbox 
    IntPtr hwndCtrl9 = Win32.GetWindow(hwndCtrl8, Win32.GW_HWNDNEXT); 
    // send BST_CHECKED message to set checkbox
    Win32.SendMessage(hwndCtrl9, Win32.BM_SETCHECK, Win32.BST_CHECKED, 0);                                

    // send WM_COMMAND with left softkey to submit user dialog
    IntPtr hwndMenu = Win32.SHFindMenuBar(hwndLogon);
    Win32.SendMessage(hwndLogon, Win32.WM_COMMAND, 0x2F87, hwndMenu.ToInt32());

    enteredPeapCred = true;                                
  }
} 
```

请注意，我只设置密码字段，因为用户名和域字段已预先填充了已存储在注册表中的信息（我的原始问题中提到的 Identity 值）。

这很好用，因为它使用 PEAP 凭据创建 WLAN 连接。通过在找到用户登录对话框后立即将其移出屏幕，这一切对我们应用程序的用户来说都是不可见的（我们的应用程序在 kiosk 模式下运行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-01-14T13:49:11.723

用户登录对话框可能会提示，因为键基于

```
HKEY_LOCAL_MACHINE\Comm\EAP\Extension\25\. 
```

“InvokePasswordDialog”和“InvokeUserNameDialog”键的值为 1。

尝试将它们切换为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-01-21T18:22:36.170

我不知道这是否会对您有所帮助，但我遇到了同样的问题并不断添加注册表项，直到修复它为止。我不确定其中哪些修复了它，但这是我正在使用的条目（编辑以隐藏安全相关信息）：

Windows 注册表编辑器版本 5.00

```
[HKEY_LOCAL_MACHINE\Comm\SecurityProviders\SCHANNEL]
"RNG"=-

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WZCSVC\Parameters]
"ContextSettings"=hex:\[REMOVED]

[HKEY_LOCAL_MACHINE\System\DPAPIKeys\System]
@=hex:\[REMOVED]

[HKEY_LOCAL_MACHINE\System\DPAPIKeys\default]
@=hex:\[REMOVED]

[HKEY_LOCAL_MACHINE\init\BootVars]
"MasterKeysInRegistry"=dword:1

[HKEY_CURRENT_USER\Comm\EAPOL\Config\[REMOVED]]
"LastAuthSuccessful"=dword:00000001
"Password"=hex:\[REMOVED]
"Identity"=[REMOVED]
"EapTypeId"=dword:00000019
"Enable8021x"=dword:00000001

[HKEY_CURRENT_USER\Comm\EAPOL\Config\[REMOVED]\25]
"ConnectionData"=hex:[REMOVED]

[HKEY_LOCAL_MACHINE\Drivers\BuiltIn\Ethman\Popup]
"Enable"=dword:00000000
"Timeout"=dword:0000000F

[HKEY_CURRENT_USER\System\Credentials\Type\2]
@=hex:\[REMOVED] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-02-25T11:25:11.720

我们在 Windows CE 5.0 和 6.0 下使用[wpa_supplicant项目取得了积极的经验。](http://hostap.epitest.fi/wpa_supplicant/)我不知道它是否可以在 WM 下工作，但我想可以。

在我们的应用程序中集成需要一些努力（即围绕 wpa_supplicant 核心创建服务，禁用零配置驱动程序）。然而，付出努力是值得的：我们的应用程序可以完全控制整个配置/关联过程。

# c# - 公共变量的传递地址

> ID：897962
> 
> 赞同：3
> 
> 时间：2009-05-22T13:55:43.873
> 
> 标签：c#, pointers, unsafe, ref

当我尝试像这样传递公共变量的地址时：

```
ML.Register("Radius", &lBeacons[i].Radius, 0.0f, 200.0f, 10.0f); 
```

我收到此错误：

```
error CS0212: You can only take the address of an unfixed expression inside of a fixed statement initializer 
```

注册函数如下所示：

```
public unsafe void Register(string desc, float* val, float minimum, float maximum, float stepsize) 
```

信标是一个列表。它拥有一个具有公共半径的类。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-22T13:59:38.220

仅仅通过引用传递值没有意义吗？

```
public void Register(string desc, ref float val, float minimum,
         float maximum, float stepsize) {...} 
```

当然，使用公共变量（字段）也是一个坏主意......它会像这样工作：

```
ML.Register("Radius", ref lBeacons[i].Radius, 0.0f, 200.0f, 10.0f); 
```

但是，如果您创建财产，*它将*`Radius`不起作用-所以不要这样做。考虑传递信标（或类似的）本身，或其他一些基于对象（或可能基于事件）的机制。

* * *

就像是：

```
ML.Register("Radius", lBeacons[i], 0.0f, 200.0f, 10.0f); 
```

和：

```
private Beacon beacon;
public void Register(string desc, Beacon beacon, float minimum,
         float maximum, float stepsize) {
    this.beacon = beacon;
}
void Foo() {
    beacon.Radius++; // etc
} 
```

这里我们有一个对 Beacon 对象的*引用*，它没有`unsafe`指针的问题。如果您不想`Beacon`直接公开，请考虑使用接口。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-22T14:03:29.227

要获取指向变量的指针，请使用 fixed 关键字将其固定到位，例如：

```
fixed(float *radius=&lBeacons[i].Radius)
{
  ML.Register("Radius", radius, 0.0f, 200.0f, 10.0f);
} 
```

这个被放置的方法需要被声明为不安全的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-22T13:58:12.230

为什么要使用指针？您可以只使用“ref”关键字来传递变量的引用。

例子：

```
object blah = new object();

CallMethod(ref blah);

public void CallMethod(ref object param)
{

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T14:00:39.963

您可以尝试使用固定块。

```
fixed(float *rad = &(lBeacons[i].Radius))) {
    ML.Register("Radius", rad, 0f, 200f, 10f);
} 
```

我认为你无论如何都不想这样做。如果 ML 在固定块之外使用 rad，它很可能会失败。我认为你最好重新考虑你的 API。

# asp.net - 用一个字符串中的一个替换多个相同的字符

> ID：897969
> 
> 赞同：0
> 
> 时间：2009-05-22T13:58:08.473
> 
> 标签：asp.net, string

我有一个字符串如下；

```
dim str as string = "this       is    a string      .   " 
```

我想识别那些多个空格字符并用一个空格字符替换。使用替换功能将替换所有这些，那么执行此类任务的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T14:02:42.923

```
import System.Text.RegularExpressions            

dim str as string  = "This is a      test   ."
dim r as RegEx = new Regex("[ ]+")
str = r.Replace(str, " ") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-22T14:03:36.307

使用 Regex 类匹配“一个或多个空格”的模式，然后用一个空格替换所有这些实例。

这是执行此操作的 C# 代码：

```
Regex regex = new Regex(" +");
string oldString = "this       is    a string      .   ";
string newString = regex.Replace(oldString, " "); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T14:15:00.887

我会使用 \s+ 修饰符，它更容易阅读

```
public Regex MyRegex = new Regex(
      "\\s+",
    RegexOptions.Multiline
    | RegexOptions.CultureInvariant
    | RegexOptions.Compiled
    );

// This is the replacement string
public string MyRegexReplace =   " ";

string result = MyRegex.Replace(InputText,MyRegexReplace); 
```

或者在VB中

```
Public Dim MyRegex As Regex = New Regex( _
      "\s+", _
    RegexOptions.Multiline _
    Or RegexOptions.CultureInvariant _
    Or RegexOptions.Compiled _
    )

Public Dim MyRegexReplace As String =  " "

Dim result As String = MyRegex.Replace(InputText,MyRegexReplace) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T14:02:26.403

使用正则表达式。正如其他 SO 用户所建议的那样[`here`](https://stackoverflow.com/questions/206717/how-do-i-replace-multiple-spaces-with-a-single-space-in-c)

# paypal - Paypal 没有列出我的国家

> ID：897971
> 
> 赞同：0
> 
> 时间：2009-05-22T13:58:23.713
> 
> 标签：paypal, paypal-subscriptions

我想在网上卖。我尝试创建一个 Paypal 帐户，结果令人惊讶，惊喜：

贝宝不支持我的国家。

那我该怎么办？

我检查了 2checkout.com，它确实支持我的国家。和 2checkout 似乎提到他们接受来自 Paypal 帐户的付款。

你觉得我应该怎么做 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-22T14:06:49.250

不要使用 PayPal 进行销售。他们可以用你所有的钱冻结你的账户 6 个月。我也从未听说人们事后会拿回他们的钱。

看看这些无数的抱怨：

[贝宝恐怖故事](http://www.google.com/#hl=en&q=paypal+horror+stories&btnG=Google+Search&aq=0&oq=paypal+hor&fp=Dcgaj3zEt2M)

从个人经验来看，我可以说 eBay/PayPal 这对夫妇几乎肯定不会保护客户的私人数据安全。每当我搬迁和更新我的联系方式时，我很快就会收到每封蜗牛邮件的垃圾邮件，其中建议访问安道尔的一些 *.ar 网站。上次我搬家时，我把我现在的地址给了除了 eBay/PayPal 之外的所有地址，从那以后就没有收到垃圾邮件了。

他们是邪恶的。不惜一切代价避免它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-22T14:19:01.817

这个问题不属于这里，但无论如何......您可以等到 Paypal 决定支持您的国家，这可能最终会发生。否则，您几乎没有机会在不违反他们的规则的情况下接受 Paypal 付款（如果您决定不遵守，一旦他们发现，处罚可能会很昂贵）。您最好的选择是寻找其他地方 - 例如，在可以处理卡付款的银行中设置商家帐户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T14:20:37.960

美国银行经常封锁一些国家（IP 地址、ACH 和 ATM 交易等），理由是源自那里的欺诈比例较高。如果您想使用 PayPal，他们可能会接受在其他国家/地区开设账户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T14:00:35.050

联系他们的各种支持/服务地址，告诉他们他们未能支持您所在的国家/地区。

我想有一些极端情况，可能存在关于一个国家是否存在的某种政治冲突，但这些问题没有技术解决方案，所以我想它们有点离题，在这里。

# php - php 1 是字符串而不是整数

> ID：897974
> 
> 赞同：2
> 
> 时间：2009-05-22T13:59:26.503
> 
> 标签：php

我正在使用 GET 变量，人们通过以下 URL 访问它：

```
page?siteID=1 
```

我检查以确保 siteID 是一个整数，但 PHP 说它是一个字符串。

如何将其转换为整数？我注意到这`intval()`会将 0x1A 转换为 26，这是我不希望发生的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-22T14:06:49.047

如果您不想转换变量，而只是检查它是否代表数字，您也可以使用该[`is_numeric`](http://www.php.net/is_numeric)函数。要么，要么您可以使用其他答案中描述的转换方法，以最适合您的特定需求为准。

**编辑：**根据 James Socol 的评论，这个函数可能也值得一看[`ctype_digit`](http://www.php.net/ctype_digit)。对于您的特定应用程序（看起来您想要检查某些页面 ID 号），这可能比该`is_numeric`函数更适合。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-22T14:14:42.260

作为旁注，为了让您知道*为什么*会发生这种情况，这就是正在发生的事情。

当网络浏览器发送`GET`请求时，它都是文本。URL ` [http://example.com/page?siteID=1](http://example.com/page?siteID=1) ' 实际上是作为单个字符串发送的；在 HTTP 请求中，它将是这一行：

```
GET /page?siteID=1 HTTP/1.0 
```

（`http://example.com`Web 浏览器使用 " " 部分来确定要与哪个服务器通信，以及要使用什么网络协议。）

PHP 掌握了这一点，并为你做了大量的工作来解析它。`GET`它根据这些空格（方法“ ”，URI“ `/page?siteID=1`”和协议“ ”）将其分成三部分`HTTP/1.1`，并进一步将URI解析为路径（“ `/page`”）和查询参数（“siteID=1”），它进一步解析成名称/值对。甚至`GET`上面引用的整行只是作为请求传递给 HTTP 服务器的全文流的一部分。

因此，您看到了将较长的字符序列转换为许多不同部分的大量工作的结果。

如果您真的很好奇，您可以使用诸如 Wireshark 或 Firefox [Live HTTP Headers 插件](https://addons.mozilla.org/en-US/firefox/addon/3829)之类的工具来查看实际通过网络传递的文本字符串的详细信息。如果您是 Web 开发人员，则值得学习。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-22T14:19:18.320

要么转换为 int

```
$id = (int)$_GET['siteID']; 
```

了解[字符串到整数转换](http://us.php.net/manual/en/language.types.string.php#language.types.string.conversion)的规则。或使用

```
if (ctype_digit($_GET['siteID'])) { //... 
```

如果您想确保它只包含数字（字符 0-9）。如果您希望它是一个数字字符串，包括“-1.35e+105”，您可以使用`is_numeric()`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-22T14:01:36.220

您需要将其转换为 int

例如

$siteid = (int) $_GET['siteID'];

这样就可以了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-22T14:07:45.473

尝试[is_numeric() 函数](http://fr.php.net/manual/en/function.is-numeric.php)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-22T14:07:38.967

你能做什么；ctype_digit($_GET['siteID'])

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-22T14:19:47.117

PHP 是弱类型的。对他来说，integer 和 string 可以以同样的方式进行威胁，它会根据上下文尝试猜测如何。

不管怎样，当你用 GET 传递一个变量时，它总是一个字符串，因为 HTTP 协议都是关于文本的。

所以有两件事：

*   大多数时候，您不需要检查它是否是整数。使用鸭子类型：如果它是一个看起来像整数的字符串，请直接使用它。

*   如果您真的想检查，请使用 is_numeric()。

*   如果你需要一个条件语句，使用 == 来检查一个字符串是否是一个整数。如果要检查类型强制，请使用 ===。

管理变量的笨拙方式是使 PHP 成为 PHP 的一部分。喜欢它，或者讨厌它，但不要像在 JAVA 或 C# 中那样尝试 PHP 中的代码。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-22T21:11:29.570

我建议使用 mod_rewrite（如果可用）和正则表达式来混淆和保护您的 GET 变量，而不是在代码中强制转换它们。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-04-17T02:42:20.720

URI 路径`page?siteID=1`是一个字符串；的值`$_GET['siteID']`最初是一个字符串。

假设：该`siteID`值用于按`siteID`字段查看 dB 表，因此有效值`siteID`必须看起来像大于零的整数。

`is_numeric()`不幸的是，在这种情况下还不够，因为`is_numeric('7e2')`返回 true。

您希望将字符串值验证`siteID`为整数而不从 $_GET 转换任何值，将 $_GET 保留为原始值，因为您以后可能需要它们。

```
function is_valid_id($id) {
    return strval($id) === strval(intval($id)) && $id > 0;
}

if (is_valid_id($_GET['siteID']))
    $siteID = intval($_GET['siteID']);
    # Value is ready to be processed as integer
else
    # Refresh page with invalid id error message 
```

它呈现无效的'0'，'0.0'，'-0'，'07'，'-09'，'0y'，'7e2'，'-w'，'-b.9'，'G98'，' -h7'、'98R'、'98.7'、'98,8'、'0x1A'、'\x1A'、'5+5'、'5*5'等。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-22T14:09:29.900

所有参数值都是字符串。您必须将字符串显式转换为整数。您可以按照其他答案中的建议进行投射或使用[setType(var, type)](http://www.php.net/manual/en/function.settype.php)类型为“整数”

```
<?php
  $id = $_GET['siteID'];
  settype($id, "integer");
?> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-22T14:09:30.273

PHP 将所有 GET/POST/COOKIE 变量视为字符串，直到您对它们进行处理。

这是一个很好的 PHP.net 参考供您查看： [http ://ca.php.net/language.types.type-juggling](http://ca.php.net/language.types.type-juggling)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-05-22T16:37:48.580

更多想法：

```
$isInt = ($_GET['id'] == (int)$_GET['id']); // not strict comparing!
$isInt2 = preg_match('/\-?[0-9]+/', $_GET['id']); 
```

最后是获取 $id 的安全方法：

```
$id = (isset($_GET['id']) && ($_GET['id'] == (int)$_GET['id'])) 
    ? (int)$_GET['id'] 
    : 0; 
```

# javascript - JavaScript 中的 WITH 语句有什么问题？

> ID：897978
> 
> 赞同：2
> 
> 时间：2009-05-22T13:59:41.153
> 
> 标签：javascript, jquery

我似乎记得 WITH 有问题。我不会错过它；我更喜欢我的每一行代码都独立存在。

当我（在 SO）了解到人们考虑链接他们最喜欢的 jQuery 功能之一时，我开始对此感到疑惑。JavaScript 的 WITH 和 jQuery 的链接基本上是相同的功能，对吧？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-22T14:06:44.150

不，他们不是一回事……

*With*是引用类成员的简写，无需完全限定其名称。

```
with o 
{
   x = y;   // where x is a member of o. But how can you tell for sure?
} 
```

阅读 Douglas Crockford 对 With 的评价。他鼓励避免它——说它容易出错且模棱两可。我同意他的看法。

jQuery 链接是一种实现流畅接口的方法，它允许您将结果从一个方法直接传递到另一个方法。那就是给定方法的输出用作下一个方法的输入。如果您使用大量空格，jQuery 链接确实可以看起来像。下面的示例来自 John Resig，显示了这一点。

```
jQuery("div").hide("slow", function(){
  jQuery(this)
    .addClass("done")
    .find("span")
      .addClass("done")
    .end()
    .show("slow", function(){
      jQuery(this).removeClass("done");
    });
}); 
```

在此处和[此处](http://blog.pengoworks.com/index.cfm/2007/10/26/jQuery-Understanding-the-chain)[阅读有关 jQuery 链接的信息](http://www.aspcode.net/JQuery-and-function-chaining.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-22T14:06:24.727

with 和chaining 不太一样。With 影响范围，而链接不影响范围。考虑：

```
a.b.c = foo; 
```

或者：

```
with(a.b) { c = foo; } 
```

在第二种情况下，您不知道 c 是否存在于 with 块之外，因此您是否可能只是破坏了程序的另一部分所依赖的东西。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-22T14:57:01.707

fwiw，我强烈不同意克罗克福德和整个反同运动。是的，我也喜欢鞭打死去的骑手。

我同意反对意见的一点是，永远不应该将 with 用作对象创建/分配的拐杖，这实际上意味着永远不会直接使用：

坏的

```
with(a.b)
{
  c = x;
} 
```

好的

```
with(a)
{
  b.c = x;
} 
```

我相信第二种形式实际上增加了可读性，因为它既指示了一个块（本身），又删除了空格（更少的文本=更少的脑痛），而无需求助于冗余的声明/分配。我的论点是，只有当您不知道自己在做什么时， with 才是危险的，而我的后续行动是，如果您不知道自己在做什么，则不应该这样做。正如我所说，我意识到我在这里反对谷物。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-22T14:09:39.870

您应该阅读[Statement Considered Harmful](http://yuiblog.com/blog/2006/04/11/with-statement-considered-harmful/)以获得关于为什么应该避免的很好的解释`with`。

不，`with`与链接不同：

> JavaScript 的`with`声明旨在为编写对对象的重复访问提供简写。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-22T15:04:54.000

我想上面已经回答了这个问题，只是想在“与”这个话题上加两分钱。几乎所有人提出的示例都是模棱两可的类名和变量名，*无论*有无*with*都很难维护和理解。如果你用某种意义命名你的变量、类、对象，那*可能*是金色的。

 **```
var car = {
           wheels: {radius: 5, rim: 'gold', shape: 'circle'},
           body: {color: 'black', windows: 'tinted'}
           }; 
```

现在：

```
with (car){
    wheels.shape = square;
    body.color = blue;
} 
```

重点是，with 可以很强大，并为您之后的程序员节省大量时间。只有当你正确使用它并且已经养成了对变量进行冗长命名和足够注释的习惯时，它才能很好地工作。此外，有人说，如果你这样做：

```
with(a){
    x = 3;
} 
```

不知何故，一个不是类成员的变量会以某种方式被覆盖。如果我错了，请纠正我，但如果在*with*块中有一个全局变量**x**和一个属性**ax ，则只有****ax** get 被覆盖，因为那是当前范围。

 **** * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-06-07T05:58:33.477

您可以使用 with 语句进行以下操作

abcdefoo=某个值；abcdedoo=somevar;

作为

with(abcde) { foo=somevalue; doo=somevar; }

但你在 javascript 中有很好的选择

var v=abcde; v.foo=某个值；v.doo=somevar;

这将使程序简单:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-22T14:41:22.970

或者您可以从 Mozilla 参考[这里](https://developer.mozilla.org/En/Core_JavaScript_1.5_Reference:Statements:with)获取更多信息。

以下为文章片段

'with' 让​​人类读者或 JavaScript 编译器很难决定是否会在作用域链中找到非限定名称，如果是，则在哪个对象中找到。所以给出这个例子：

```
 function f(x, o) {
    with (o)
      print(x);
  } 
```

只有当 f 被调用时，才会找到 x，如果找到，要么在 o 中，要么在 f 的激活对象中（如果不存在这样的属性），其中 x 命名第一个形式参数。如果您忘记在作为第二个参数传递的对象中定义 x，或者如果有一些类似的错误或混淆，您将不会收到错误 - 只是意外的结果。

# javascript - 如何提取 HTML 文档中的 javascript 链接？

> ID：897980
> 
> 赞同：0
> 
> 时间：2009-05-22T14:00:01.293
> 
> 标签：javascript, html, hyperlink, web-crawler

我正在为一个使用大量 javascript 链接的网站编写一个小型 webspider：

```
<htmlTag onclick="someFunction();">Click here</htmlTag> 
```

函数如下所示：

```
function someFunction() {
  var _url;
  ...
  // _url constructed, maybe with reference to a value in the HTML doc
  // and/or a value passed as argument(s) to this function
  ...
  window.location.href = _url;
} 
```

在服务器端评估此功能的最佳方法是什么，以便我可以构造 _url 的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T14:14:17.037

您还可以使用[env.js](http://groups.google.com/group/envjs?pli=1)和[rhino](http://www.mozilla.org/rhino/)来实际评估 html 中的 JavaScript，并在手动触发点击事件后检测位置对象的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T14:02:55.280

不完全确定您要完成什么。

如果您需要将这些值发送到服务器进行处理，Ajax 将是您的最佳选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T14:04:52.203

这应该是一团糟。但这取决于很多参数：

1.  链接存储在哪里？在元素内部，在 javascript var 中，等等...
2.  javascript函数总是你自己的吗？

一些可以解决问题的提示，应该简单地解析您的 html 并使用正则表达式来捕获 onclick="someFunction();" 的 http 链接 属性存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T14:04:55.557

如果您需要服务器端处理，您需要：

1.  在内容交付给用户之前进行处理，并将其输出包含在响应中，或者
2.  使用 AJAX 之类的东西向服务器发出新请求

# outlook - 如何从 Outlook 复制整封电子邮件？

> ID：897981
> 
> 赞同：0
> 
> 时间：2009-05-22T14:00:06.673
> 
> 标签：outlook, copy

我们的网站允许访问者使用他们自己的电子邮件客户端向我们的销售人员发送销售问题。由于各种原因，我们不想切换到联系表。过去，这些电子邮件是我自己收到的，我只是将它们转发给我们办公室的各种销售代表。

我的最终目标是找出一种将电子邮件放入自定义数据库的方法。通过复制电子邮件并将内容粘贴到网页上，然后解析并提取发件人、主题和正文。或者可以将电子邮件转发到在我们的交换服务器上运行的应用程序，该应用程序执行此操作。

我认为第一个选项更符合我的专业知识，我的问题是我无法找到一种简单的方法来复制电子邮件的全部内容（包含发件人电子邮件地址等的标题）来自 Outlook，因此我可以将其粘贴到 Web 表单中进行解析。我希望有人可以将我指向可以执行此操作的 Outlook 插件。

最好的问候，瑞恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T14:19:58.147

您可以做的是创建一个电子邮件帐户帐户，该帐户将由某种自定义应用程序使用。您的应用程序将定期连接到服务器，下载电子邮件，然后对下载的电子邮件进行任何处理。

Outlook 根本不需要参与。

# sql-server - 存储过程维护

> ID：897988
> 
> 赞同：3
> 
> 时间：2009-05-22T14:01:22.647
> 
> 标签：sql-server

在 sql 服务器...

我应该通过查询分析器中的对象浏览器维护存储过程，还是作为外部文本文件维护存储过程，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-22T14:03:34.060

外部文本文件可以放在源代码管理中，因此这是一个更好的解决方案。版本控制数据库很困难，这是使数据库与所有依赖它的应用程序保持同步的重要步骤。

Microsoft 的 Visual Studio 2008 数据库版就是这样做的，它不仅允许对数据库脚本进行版本控制，而且还提供了单步部署、单元测试和其他有趣的功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-22T14:44:19.767

...对源代码管理中的文本文件进行另一次投票。

*   一个巨大的好处是修订历史。比较版本可以让您深入了解问题，并节省数小时的调试时间，尤其是“我想知道他们为什么这样做”的各种调试。
*   如果您在一个数据库实例中遇到了在其他数据库实例中没有看到的问题，您可以导出有问题的存储过程，将其与源代码控制中的内容进行比较，并确保您在各个实例中保持一致。
*   它使将代码部署到新的数据库实例中变得更容易控制。例如，您可以编写一个 Ant 任务来审核您的数据库模式，并拥有一个运行过程创建代码的任务作为该过程中的一个步骤。
*   您无需连接到数据库即可查看过程源。这在恢复场景中可能特别有价值。
*   它强制执行保持脚本可用的纪律，而不是让您的团队一次性更改 GUI 工具。GUI 工具更改工作，但如果没有在脚本中捕获，则会永远丢失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-22T14:09:10.087

很大程度上取决于您使用的 SQL Server 版本，以及回滚到以前版本的 SQL 的重要性。

我发现使用 SQL Server 2005+，在 SQL Server Management Studio 中更容易维护它们，因为它全部集成到 .NET Framework 中。

如果您定期备份数据库，我觉得将备份存储为外部文件是浪费时间。

当然，我完全理解人们希望使用 SourseSafe 之类的东西作为历史备份的额外外部来源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-22T14:05:22.687

一旦你的系统变得足够大，使用对象浏览器来查找你的存储过程可能会很痛苦（而且它不能很好地使它们变得非常可排序）。虽然我经常喜欢使用对象浏览器，但我可能会建议其他人从外部文件开始，这样您就可以从一开始就开始对它们进行源代码控制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-22T14:05:22.687

有一个工具可以定期提取存储过程的文本并将它们存储在源代码管理中。

这样，您就可以两全其美了。您的文本文件存在并且在源代码管理中，您可以保证它们是最新的。如果有人在您不知情的情况下更改了您的存储过程（作为我曾经倾向于这样做的老板），您会以“最近更改”的方式非常迅速地看到它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-22T14:07:00.577

任何一个。

源代码控制中的外部文件给人一种很好的感觉，但数据库对象不能像“正常”源文件那样被控制、锁定或检出。然而，这是很好的纪律。

如果您拥有强大的生产控制、良好的流程和代码差异工具，那么在对象浏览器中进行管理对于较小的项目是可行的，因为您始终可以检测差异并轻松重置它们。

我希望你不是指生产中的对象浏览器......

# fiddler - 使用 Fiddler 检查 IIS 压缩

> ID：897989
> 
> 赞同：18
> 
> 时间：2009-05-22T14:01:23.957
> 
> 标签：fiddler

如何查看 IIS 压缩是否正在使用[Fiddler](http://www.fiddler2.com/fiddler2/)工作？我有一个页面，当通过[Port80Software](http://www.port80software.com)或[GID Network 的工具](http://www.gidnetwork.com/tools/gzip-test.php)查看时，它似乎被压缩了。

但是，当我在 Fiddler 中观看调用时，我在请求标头中看到“Accept-Encoding: gzip, deflate”，但在响应标头中看不到“Content-Encoding: gzip”或“deflate”。此外，在 Transformer 部分中，选择了“No Compression”。

谢谢！

克里斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2010-07-28T20:01:18.207

我的提琴手版本有和 AutoDecode 按钮，使一切看起来都没有压缩。关闭此功能后，我的回复显示压缩

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-23T02:10:20.140

我直接找到了消息来源（Eric Lawrence），他是这么说的：

> 事实上，Fiddler 显示您的网站正在正确压缩。
> 
> 您的环境中是否有上游代理服务器？您是否从您的家庭网络而不是您的公司网络尝试此测试？
> 
> 在 Microsoft 的公司网络上，我们都在 ISA 代理服务器后面。它被配置为删除出站 Accept-Encoding 标头（它告诉服务器使用压缩），如果代理接收到压缩响应，则它由 ISA 服务器解压缩。这样做是为了让 ISA 代理服务器可以扫描内容以查找恶意数据。缺点是 Fiddler 只能看到从上游代理接收到的流量。
> 
> 通常，当我们需要测试压缩等时，我们会在家里或所谓的“DTAP”——不通过代理的直接连接到互联网的线路上进行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-22T14:12:37.833

在 Inspectors 选项卡中，有一组子选项卡。确保您选择了变压器。然后对于页面加载上的每个请求，查看它是使用 GZIP 还是无压缩发送的。

Fiddler 非常好，它允许您在加载文件时选择每个单独的请求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-22T16:33:22.313

`text/html`根据各种答案和评论，我将得出结论，也许页面本身`text/xml`（

正如我在评论中已经提到的，您通常想要压缩`text/*`（即 - `text/html`、`text/plain`、`text/css`等）和`application/javascript`& `application/ecmascript`（根据[rfc4329](http://www.ietf.org/rfc/rfc4329.txt)）。如果您`.js`使用其他 MIME 类型（例如`application/x-javascript`或`text/javascript`）交付文件，请改为压缩它，或将用于交付`.js`文件的 MIME 类型更改为 RFC 标准。

请参阅下面的相应链接以更新服务器上正在压缩的 MIME 类型：

*   [在 IIS 5.0 网站上使用 HTTP 压缩](http://technet.microsoft.com/en-us/library/bb742379.aspx#EAAA)
*   [自定义 IIS 压缩的文件类型 (IIS 6.0)](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/5bce429d-c4a7-4f9e-a619-5972497b932a.mspx)
*   [如何在 IIS 7.0 中为 HTTP 压缩添加内容类型](http://support.microsoft.com/kb/969062)

最后一点我应该指出，一些网络浏览器（特别是 Netscape 4 的某些版本，但可能还有其他版本）发送`Accept-Encoding: gzip,deflate`CSS 和 JavaScript 文件请求，但实际上无法解压缩内容。此外，某些版本的 Internet Explorer（[5.5](http://support.microsoft.com/default.aspx?scid=kb;en-us;Q313712)和[6](http://support.microsoft.com/default.aspx?scid=kb;en-us;Q312496)）存在压缩问题。

我知道我使用的默认 Apache 压缩配置可以处理这些问题，我不确定 IIS 如何（或是否）补偿它们。

# windows-vista - 在 Windows Vista 中，我在哪里可以写入所有用户都可以查看和修改的数据？

> ID：897993
> 
> 赞同：2
> 
> 时间：2009-05-22T14:01:57.170
> 
> 标签：windows-vista

我需要写入一些数据（用于试用/到期），并且我需要该应用程序能够从 Vista 上的非管理员帐户读取/写入该位置，并且 UAC “开启”。

此外，我希望能够查看和修改来自任何用户帐户的数据。

我最初考虑写入 KHEY_CURRENT_USER 注册表配置单元，但这对于每个用户来说都是唯一的。

还有其他位置吗？

我试过：%ALLUSERSPROFILE%\TestDirectory

但是，如果 NonAdmin1 创建和编辑文件，则 Admin1 在修改后无法保存文件（尽管它可以*读取*文件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-23T01:30:40.157

有一篇关于此的博客文章：blogs.msdn.com/cjacks/archive/2008/02/05/where-should-i-write-program-data-instead-of-program-files.aspx（我不是允许超链接，你必须剪切-粘贴直到它得到纠正）。

它实际上似乎围绕着一个特定的问题：如果您有应该由所有用户写入的文件，您是否希望用户在资源管理器中发现这些文件并能够双击它们，或者您是否希望这些文件被隐藏并且仅由您的应用程序在后台使用。

如果您希望所有用户都可以在资源管理器中发现这些文件，您可能希望将它们放在 c:\users\public 中。您所要做的就是将它们放在那个位置，并且默认的安全性应该可以工作。

如果您希望对用户隐藏文件，您可能希望将它们放在 c:\programdata 中。在这种情况下，当您创建文件时，默认安全性可能不正确，因此您需要让您的应用程序对文件进行 ACL。或者更好的方法可能是让您的安装程序在 c:\programdata 下为您的应用程序创建一个目录结构，并让安装程序在每个目录上设置好的默认 ACL - 这样您的应用程序就不必在实际设置 ACL 时感到抱歉创建文件，它只需要在正确的位置创建文件。

在所有情况下，您都应该调用适当的 Win32（或 .Net Framework）函数来获取 c:\programdata 或 c:\users\public 目录的路径。不要在您的应用程序中对这些路径进行硬编码 - 如果您进行硬编码，您将错过一些情况，即用户移动了目录或以某种不常见的方式安装了 Windows，并且您的应用程序将中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T14:16:46.657

当您创建文件或将其写出后，我认为您应该能够修改“用户”组的权限以获得更多访问权限。看起来“创建者所有者”获得了完全权限，而“用户”组只能读取和执行。

另一个选项可能是创建“TestDirectory”目录并将用户组设置为在安装期间具有完全访问权限。*******************