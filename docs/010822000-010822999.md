# StackOverflow 问答 10822000-10822999

# c# - 即使关闭 WPF 跟踪设置，输出窗口中也会出现奇怪的资源字典警告

> ID：10822003
> 
> 赞同：19
> 
> 时间：2012-05-30T18:18:45.190
> 
> 标签：c#, .net, wpf, warnings, trace

我正在使用安装了 2012 年 4 月更新的 Visual Studio 2011 测试版。我有我的调试选项 - > 输出窗口 > WPF 跟踪设置所有值，包括资源字典已关闭。但我仍然继续看到警告消息，如

```
System.Windows.ResourceDictionary Warning: 9 : Resource not found; 
     ResourceKey='CheckBoxCooperStyle1' 
```

如果它们不是误报，如何调试此类警告？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-01T04:20:07.190

微软支持团队回复“感谢更新。我很害怕，因为我的测试发现了类似的结果。似乎有一些内部 WPF 跟踪代码不符合指定的设置。同时，我们不除了查找资源字典（或相关类型）和更正跟踪输出警告的问题之外，还有其他建议。

如果附加了调试器，无论在 IDE（或 app.config）中指定的设置如何，总会发出一些 WPF 跟踪。不幸的是，您收到的输出似乎属于这一类。遗憾的是，没有办法关闭所有 WPF 跟踪输出的发出

我们当然可以为产品提交功能请求，以便在未来版本中考虑这一点，但除此之外，我看不出有办法让您避免当前版本中的问题。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-11-05T12:43:18.667

我在混合静态资源和动态资源时收到这些消息。将所有有问题的资源设置设置为 StaticResource 解决了该问题。代替：

```
Style="{DynamicResource CheckBoxCooperStyle1}" 
```

采用：

```
Style="{StaticResource CheckBoxCooperStyle1}" 
```

# java - 使用 SpringJunit4ClassRunner 在属性占位符之前设置系统属性或环境变量

> ID：10822010
> 
> 赞同：7
> 
> 时间：2012-05-30T18:19:20.283
> 
> 标签：java, spring, unit-testing, properties, junit

我有一个主 app-context.xml，它定义了一个具有两个位置的属性占位符：默认属性文件和一个可选的覆盖文件：

```
<context:property-placeholder
        location="classpath:config.properties,${configOverride}"
        ignore-resource-not-found="true" /> 
```

可选的覆盖位置允许指定另一个属性文件（例如“-DconfigOverride=file:/home/app/config.properties”），其中只包含应该被覆盖的属性。

对于我的单元测试，我使用了一个导入 app-context.xml 的测试上下文：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:test-context.xml"})
public class UserServiceTest {
    ...
} 
```

在加载应用程序上下文之前，如何在应用程序中设置系统属性或环境变量？如果可能的话，我想达到与在所有测试类中设置“-DconfigOverride=classpath:testConfig.properties”相同的效果，而不必指定命令行参数。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-07T01:43:21.907

另一种选择是在 @BeforeClass 注释方法中设置环境属性，该方法将在上下文配置发生之前调用。

```
@BeforeClass
public static void setSystemProps() {
    System.setProperty("configOverride", "yourVal");
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-30T18:38:52.240

想着，

1.  在其构造函数/初始化块中扩展`SpringJUnit4ClassRunner`和设置系统属性 `configOverride`
2.  然后传递`ExtendedSpringJUnit4ClassRunner`给`@RunWith`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-30T23:01:12.690

这就是我最终要做的——我不必更改任何单元测试类。不幸的是，我没有设置“configOverride”属性（请参阅 AhamedMustafaM 的回答以了解一种方法），而是覆盖原始属性占位符定义（在我最初的尝试失败后我再次尝试并让它工作）。

我将以下行添加到我的 testContext.xml：

```
<!-- import the main app context -->
<import resource="classpath:appContext.xml" />

<!-- this is the line i added -->
<context:property-placeholder order="-999"
        location="classpath:testConfig.properties"
        ignore-unresolvable="true" /> 
```

请注意 order="-999" 属性，该属性用于确保优先于原始属性占位符定义。此外，我将“ignore-unresolvable”设置为“true”，以将任何无法解析的属性委托给原始占位符配置器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-07T18:39:47.337

我的问题很相似，但我想设置`spring.profiles.active`环境变量，结果我只需要将[`@ActiveProfiles()`](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/context/ActiveProfiles.html)我想要的值扔给测试本身。

# ios5 - iPhone4 iOS5 有没有物理引擎可以将CMDeviceMotion事件转化为位移？

> ID：10822024
> 
> 赞同：2
> 
> 时间：2012-05-30T18:20:27.383
> 
> 标签：ios5, accelerometer, core-location, iphone-4, core-motion

我`CMDeviceMotion`在 iPhone 4 上运行一个处理队列，它为我提供了用户诱导的加速以及旋转速率。我可以自己过滤这些数据。

我想了解的是如何**将这些离散的加速度、设备姿态和旋转率样本转换为 3 维位移。**这对于直线的经典力学是可能的，但我正在考虑更高级的计算 - 例如曲线。这可以用 GPS 处理，但我正在寻找更好的分辨率 - 比如说在 10 英尺内。GPS 下晴空的平均精度约为 30 英尺。

**是否有某种物理引擎或物理处理器可以获取一组设备运动或加速度/转弯速率事件，并告诉我手机与原始位置的距离？**

我知道 iPhone 有各种计步器和自行车 GPS 追踪器。它们是基于 GPS 还是真的像我描述的那样进行加速集成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:45:26.767

不幸的是，您所描述的加速集成[本身不会起作用。](https://stackoverflow.com/a/7835988/341970)

但是，您可以通过融合 GPS 信号和/或做出特定领域的假设来提高准确性。有关详细信息，请参阅上面的链接。

# google-maps-api-3 - 每个位置的自定义 Google Map v3 标记

> ID：10822029
> 
> 赞同：0
> 
> 时间：2012-05-30T18:20:39.917
> 
> 标签：google-maps-api-3

我有一张正在开发的地图。基本的 Google RED DROPLET 图标显示为我的标记图像。如何获得我自己的自定义图像？我有几乎所有 50 个标记的单独图像（将是公司的徽标）。

有人可以帮忙吗？这是[链接](http://calwestcultural.com/sgs/example_map.html)。

使用我目前拥有的代码设置自定义标记的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:39:28.730

从实际代码：

```
var image = './beachflag.png';
[...]
var marker=new google.maps.Marker({
  position: myPosition,
  map: map,
  icon: image
}); 
```

你的代码：

```
var point = new google.maps.LatLng(37.984798,-121.312094);
var marker = createMarker(point,'<div style="width:205px"><center><img src="images/sampleuopsign.jpg" /></center><h2>University of the Pacific</h2>3601 Pacific Avenue<br>Stockton, California 95211<br>209.946.2011<br><small>On the web visit: <a href="http://www.pacific.edu">www.Pacific.edu<\/a></small><\/div>');
var image = 'icons/orange_arrow.png'; // this will be gmarkers[0] 
```

你需要做什么：

```
var point = new google.maps.LatLng(37.984798,-121.312094);
var image = 'icons/orange_arrow.png'; // this will be gmarkers[0]
var marker = createMarker(point,'<div style="width:205px"><center><img src="images/sampleuopsign.jpg" /></center><h2>University of the Pacific</h2>3601 Pacific Avenue<br>Stockton, California 95211<br>209.946.2011<br><small>On the web visit: <a href="http://www.pacific.edu">www.Pacific.edu<\/a></small><\/div>', image); 
```

并更改 CreateMarker：

```
function createMarker(latlng, html, img) { 
```

// 注意这里添加了**img**参数

```
 var contentString = html;
  var marker = new google.maps.Marker({
    position: latlng,
    map: map,
    ***icon: img,***
    zIndex: Math.round(latlng.lat()*-100000)<<5
  });
[...] 
```

**编辑** 使用您的代码和我的模组进行快速测试。![我为标志设置了一些标记](../Images/fc3d9b54833d0f611c86ddce68066350.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:55:33.420

您可以选择图像，然后将该图像与您的纬度和经度相关联，在这种情况下，有一个函数可以创建标记。

```
if(location.category=="TEAMNAME"){
    var image='img/blueMarker.png';
}
if(location.category=="TEAMNAME2"){
    var image='img/redMarker.png';
}
function displayLocation(location){
        var content = '<strong><p>Team: ' +location.category + '</strong>';
        var latLng = new google.maps.LatLng(parseFloat(location.latitud), parseFloat(location.longitud));
        var marker = new google.maps.Marker({
            position: latLng,
            map: map,
            draggable: true,
            visible: true,
            title: location.category,
            icon: image
        });
        /*Content window asociated to created markers*/
        google.maps.event.addListener(marker, 'click', function(){
            infowindow.setContent(content);
            infowindow.open(map, marker);
        });
        return marker;
    } 
```

# clojure - 使用不同的中间件组合路由

> ID：10822033
> 
> 赞同：42
> 
> 时间：2012-05-30T18:20:58.430
> 
> 标签：clojure, routes, middleware, compojure, ring

我目前正在使用 Compojure（以及 Ring 和相关中间件）在 Clojure 中编写 API。

我正在尝试根据路由应用不同的身份验证代码。考虑以下代码：

```
(defroutes public-routes
  (GET "/public-endpoint" [] ("PUBLIC ENDPOINT")))

(defroutes user-routes
  (GET "/user-endpoint1" [] ("USER ENDPOINT 1"))
  (GET "/user-endpoint2" [] ("USER ENDPOINT 1")))

(defroutes admin-routes
  (GET "/admin-endpoint" [] ("ADMIN ENDPOINT")))

(def app
  (handler/api
    (routes
      public-routes
      (-> user-routes
          (wrap-basic-authentication user-auth?)))))
      (-> admin-routes
          (wrap-basic-authentication admin-auth?))))) 
```

这不能按预期工作，因为`wrap-basic-authentication`确实包装了路由，因此无论包装的路由如何，它都会被尝试。具体来说，如果请求需要被路由到`admin-routes`,`user-auth?`仍然会被尝试（并且失败）。

我求助于在公共基本路径`context`下*根植*一些路由，但这是一个相当大的限制（下面的代码可能不起作用，它只是为了说明这个想法）：

```
(defroutes user-routes
  (GET "-endpoint1" [] ("USER ENDPOINT 1"))
  (GET "-endpoint2" [] ("USER ENDPOINT 1")))

(defroutes admin-routes
  (GET "-endpoint" [] ("ADMIN ENDPOINT")))

(def app
  (handler/api
    (routes
      public-routes
      (context "/user" []
        (-> user-routes
            (wrap-basic-authentication user-auth?)))
      (context "/admin" []
        (-> admin-routes
            (wrap-basic-authentication admin-auth?)))))) 
```

我想知道我是否遗漏了某些东西，或者是否有任何方法可以在不受限制且不使用通用基本路径的情况下实现我想要`defroutes`的（理想情况下，不会有）。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-30T18:43:58.860

```
(defroutes user-routes*
  (GET "-endpoint1" [] ("USER ENDPOINT 1"))
  (GET "-endpoint2" [] ("USER ENDPOINT 1")))

(def user-routes
     (-> #'user-routes*
         (wrap-basic-authentication user-auth?)))

(defroutes admin-routes*
  (GET "-endpoint" [] ("ADMIN ENDPOINT")))

(def admin-routes
     (-> #'admin-routes*
         (wrap-basic-authentication admin-auth?)))

(defroutes main-routes
  (ANY "*" [] admin-routes)
  (ANY "*" [] user-routes) 
```

这将首先通过 admin-routes 然后通过用户路由运行传入请求，在这两种情况下都应用正确的身份验证。`nil`这里的主要思想是，如果调用者无法访问路由而不是抛出错误，则您的身份验证函数应该返回。这样，如果 a) 路由实际上与定义的 admin-routes 不匹配或 b) 用户没有所需的身份验证，则 admin-routes 将返回 nil。如果 admin-routes 返回 nil，则 compojure 将尝试用户路由。

希望这可以帮助。

编辑：前段时间我写了一篇关于 Compojure 的帖子，您可能会觉得它很有用：[https ://vedang.me/techlog/2012-02-23-composability-and-compojure/](https://vedang.me/techlog/2012-02-23-composability-and-compojure/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-04-16T06:54:10.640

我偶然发现了这个问题，它似乎`wrap-routes`（compojure 1.3.2）优雅地解决了：

```
(def app
  (handler/api
    (routes
      public-routes
      (-> user-routes
          (wrap-routes wrap-basic-authentication user-auth?)))))
      (-> admin-routes
          (wrap-routes wrap-basic-authentication admin-auth?))))) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-07T03:38:25.190

这是一个合理的问题，当我自己遇到这个问题时，我发现它非常棘手。

我想你想要的是这样的：

```
(defroutes public-routes
  (GET "/public-endpoint" [] ("PUBLIC ENDPOINT")))

(defroutes user-routes
  (GET "/user-endpoint1" _
       (wrap-basic-authentication
        user-auth?
        (fn [req] (ring.util.response/response "USER ENDPOINT 1"))))

  (GET "/user-endpoint2" _
       (wrap-basic-authentication
        user-auth?
        (fn [req] (ring.util.response/response "USER ENDPOINT 1")))))

(defroutes admin-routes
  (GET "/admin-endpoint" _
       (wrap-basic-authentication
        admin-auth? (fn [req] (ring.util.response/response "ADMIN ENDPOINT")))))

(def app
  (handler/api
   (routes
    public-routes
    user-routes
    admin-routes))) 
```

需要注意两点：身份验证中间件位于路由表单内部，中间件调用一个匿名函数，该函数是一个真正的处理程序。为什么？

1.  如您所说，您需要在路由*后*应用身份验证中间件，否则请求将永远无法路由到身份验证中间件！换句话说，路由需要在认证环*之外的中间件环上。*

2.  如果您使用 Compojure 的路由表单（如 GET），并且您在表单的主体中应用中间件，则中间件函数需要一个真正的环响应处理程序（即接受请求并返回响应的函数）作为其参数，而不是像字符串或响应映射这样更简单的东西。

这是因为，根据定义，像 wrap-basic-authentication 这样的中间件函数只将处理程序作为参数，而不是裸字符串或响应映射或其他任何东西。

那么为什么这么容易错过呢？原因是像 (GET [path args & body] ...) 这样的 Compojure 路由运算符尝试通过对允许在 body 字段中传递的形式非常灵活来使事情变得容易。你可以传入一个真正的处理函数，或者只是一个字符串，或者一个响应映射，或者可能是我没有想到的其他东西。这一切都`render`在 Compojure 内部的多方法中进行了布局。

这种灵活性掩盖了 GET 表单实际上在做什么，因此当您尝试做一些不同的事情时很容易混淆。

在我看来，在大多数情况下，vedang 的主要答案的问题并不是一个好主意。它本质上使用复合机器来回答“路由是否匹配请求？”这个问题。（如果没有，则返回 nil）以回答“请求是否通过身份验证？”的问题。这是有问题的，因为根据 HTTP 规范，通常您希望身份验证失败的请求返回带有 401 状态代码的正确响应。在该答案中，请考虑如果您在该示例中添加了针对失败的管理员身份验证的错误响应，那么有效的用户身份验证请求会发生什么：所有有效的用户身份验证请求都将失败并在管理路由层出现错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T18:37:11.400

我刚刚发现以下不相关的页面解决了同样的问题：

[http://compojureongae.posterous.com/using-the-app-engine-users-api-from-clojure](http://compojureongae.posterous.com/using-the-app-engine-users-api-from-clojure)

我没有意识到可以使用这种类型的语法（我还没有测试过）：

```
(defroutes public-routes
  (GET "/public-endpoint" [] ("PUBLIC ENDPOINT")))

(defroutes user-routes
  (GET "/user-endpoint1" [] ("USER ENDPOINT 1"))
  (GET "/user-endpoint2" [] ("USER ENDPOINT 1")))

(defroutes admin-routes
  (GET "/admin-endpoint" [] ("ADMIN ENDPOINT")))

(def app
  (handler/api
    (routes
      public-routes
      (ANY "/user*" []
        (-> user-routes
            (wrap-basic-authentication user-auth?)))
      (ANY "/admin*" []
        (-> admin-routes
            (wrap-basic-authentication admin-auth?)))))) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T20:38:50.547

您是否考虑过使用[Sandbar](https://github.com/brentonashworth/sandbar)？它使用基于角色的授权，并允许您以声明方式指定访问特定资源所需的角色。查看 Sandbar 的文档以获取更多信息，但它可以像这样工作（注意对虚构的引用`my-auth-function`，这是您放置身份验证代码的地方）：

```
(def security-policy
     [#"/admin-endpoint.*"          :admin 
      #"/user-endpoint.*"           :user
      #"/public-endpoint.*"         :any])

(defroutes my-routes
  (GET "/public-endpoint" [] ("PUBLIC ENDPOINT"))
  (GET "/user-endpoint1"  [] ("USER ENDPOINT1"))
  (GET "/user-endpoint2"  [] ("USER ENDPOINT2"))
  (GET "/admin-endpoint"  [] ("ADMIN ENDPOINT"))

(def app
  (-> my-routes
      (with-security security-policy my-auth-function)
      wrap-stateful-session
      handler/api)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T03:20:59.450

我将改变您最终处理身份验证的方式，以拆分身份验证和过滤身份验证路由的过程。

而不仅仅是拥有管理员身份验证？和用户身份验证？返回布尔值或用户名，将其用作更多的“访问级别”键，您可以在更多每个路由级别上进行过滤，而无需为不同的路由“重新验证”。

```
(defn auth [user pass]
  (cond
    (admin-auth? user pass) :admin
    (user-auth? user pass) :user
    true :unauthenticated)) 
```

您还需要为此路径考虑现有基本身份验证中间件的替代方案。按照目前的设计，`{:status 401}`如果您不提供凭据，它将始终返回 a，因此您需要考虑到这一点并让它继续执行。

其结果被放入`:basic-authentication`请求映射中的键中，然后您可以在您想要的级别进行过滤。

想到的主要“过滤”案例是：

*   在上下文级别（例如您在答案中的内容），除了您可以过滤掉没有所需`:basic-authentication`密钥的请求
*   在每个路由级别上，您在本地检查其身份验证方式后返回 401 响应。请注意，这是区分 404 和 401 的唯一方法，除非您对各个路由进行上下文级别过滤。
*   页面的不同视图取决于身份验证级别

要记住的最重要的事情是，除非请求的 url 需要身份验证，否则您必须继续为无效路由反馈 nil。您需要通过返回 401 来确保您没有过滤掉超出您想要的范围，这将导致 ring 停止尝试任何其他路由/句柄。

# ios - 如何禁用 UISearchBar 的上下文菜单

> ID：10822037
> 
> 赞同：5
> 
> 时间：2012-05-30T18:21:05.433
> 
> 标签：ios, uisearchbar

我需要禁用 UISearchBar 中显示的上下文菜单

目前我尝试子分类 UISearchBar 并覆盖 canPerformAction:withSender: 如下，但没有成功。做同样事情的最佳方法是什么？

头文件：

```
#import <UIKit/UIKit.h>

@interface CustomSearchBar : UISearchBar

@end 
```

和实施

```
#import "CustomSearchBar.h"

@implementation CustomSearchBar

- (BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
    return NO;
}

@end 
```

# jquery - 使用 AJAX 加载时显示加载 GIF 图像

> ID：10822038
> 
> 赞同：1
> 
> 时间：2012-05-30T18:21:09.427
> 
> 标签：jquery, ajax, loading

```
 $.ajax({
        url: "/image/productImages.jpg",
        timeout:5000,

        beforeSend: function(){
    // Handle the beforeSend event
        $('##loading').show();
        },

        complete: function(){
        // Handle the complete event
        $('##loading').hide();
        },

        success: function (data) {
            alert("image was added successfully");
        },

        error: function () {
            alert("There was an error. Image could not be added, please try again");
        }
    }); 
```

我想在加载图像时显示显示加载 gif，然后在加载图像后将其删除。在这里，我有这段代码可以做到这一点，但是，这会直接出错。有谁知道为什么或如何解决这个问题。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T18:22:45.057

您的 id 选择器有两个哈希值，

试试这个：

```
 $('#loading').show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T18:39:53.943

如果您要访问错误处理程序，则错误将与服务器返回的数据有关。尝试将此作为错误处理程序以获取有关正在发生的事情的更多信息（在浏览器的控制台中查看结果）：

```
error: function (x,y,z) {
    alert("There was an error. Image could not be added, please try again");
    console.log(x,y,z);
    //alert(x + "\n" + y + "\n" + z);
} 
```

但是，有一种更简单的方法可以预加载图像。尝试这个：

```
$("#loading").show();
var img = new Image();
$(img).load(function(){
    $("#loading").hide();
});
img.src = "/image/productImages.jpg"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T20:42:18.090

所以我发现您无法在 .ajax 标记中将图像加载为 url。感谢您的回复，但##loading 仅适用于冷融合标签

.load() 建议如下：

```
 var img = $("<img />").attr('src', 'http://somedomain.com/image.jpg')
                  .load(function() {
                     if (!this.complete || typeof this.naturalWidth == "undefined" || this.naturalWidth == 0) {
                         alert('broken image!');
                     } else {
                         $("#something").append(img);
                     }
          }); 
```

但是，这也破坏了我已经实现的代码，并且在 IE 中不起作用......不幸的是。

# macos - 在 MAC 可可应用程序中显示通知编号

> ID：10822043
> 
> 赞同：0
> 
> 时间：2012-05-30T18:21:19.550
> 
> 标签：macos, cocoa

我想显示通知（例如在 utorrent 或 iTunes 中最小化应用程序时存在的数字（当您有一些更新时）或在 Outlook 中显示未读邮件的数量）。我将它用于消息传递应用程序，因此当应用程序最小化并且我收到一条消息时，它必须显示未读消息的数量。

我是否需要像 iPhone 应用程序一样使用苹果推送通知，如果有的话，还有其他方法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:36:50.807

您可以使用[NSDockTile](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSDockTile_Class/Reference/Reference.html)来做到这一点。另请参阅[Dock Tile 编程指南](https://developer.apple.com/library/mac/#documentation/Carbon/Conceptual/customizing_docktile/intro/dockintro.html#//apple_ref/doc/uid/TP30000986)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-24T09:59:15.697

如果您指的是应用程序停靠图标右上角的小红色徽章，那么这就是所谓的停靠徽章标签，您可以通过代码轻松设置它，因为我在 Cocoa Applescript / AppleScript Objective C 中进行所有编程C 所以我将使用一个简单的代码：

您应该可以使用以下方式设置 Dock 图标徽章：

```
[[NSApp dockTile] setBadgeLabel: @"1"];

// Sets the Dock Badge to "1" 
```

（PS 我只是猜到了这一点，因为我必须在精神上将其转换为 Objective C）但这应该可以工作

# excel - VLookup 抛出错误

> ID：10822050
> 
> 赞同：1
> 
> 时间：2012-05-30T18:22:12.283
> 
> 标签：excel, vlookup

所以我有一张类似的表格：

```
 A         B        C        D        E        F
1  Name      Age      Number   Gender   Player   player No.
2  Droid12   11                M        Droid12  F3
3  R2D2      13                M        C3P0     F12
4  C3P0      12                F        Bot13    Y7
5  YVH7707   11                F        J34      Z2
6  Bot13     15                M
7  Slim33    13                F
8  ABot43    14                F
9  DBo11     11                M
10 J34       12                M 
```

我正在尝试用玩家编号填写 C 列，如果有问题的人有一个（想象一下这张纸有几千倍这么大）。

我在 C 中的每个单元格中都有以下 VLookup 函数（当然是从 C1 复制下来的）：

```
=VLOOKUP(A2, $E$2:$F$5, 2,FALSE) 
```

我得到了结果：

```
#N/A 
```

当我尝试单步执行时，出现错误

> Sheet1!$A$2 = Droid12：当前正在评估的单元格包含一个常量

有人知道我做错了什么吗？

谢谢！

编辑

我已经尝试了其中一些修复，但没有积极的结果。我在 C1-C3 中试过这个：

C2 包含：

```
=IF(A2=E2, F2, FALSE) 
```

结果单元格 C2 包含值 Droid12

C3 包含：

```
=VLOOKUP(A2, $E$2:$F$3, 2, FALSE) 
```

并且收到 #N/A 错误（同样的错误：

> Sheet1!$A$2 = Droid12：当前正在评估的单元格包含一个常量

这些值都是标准化的（修剪等......），并且在我比较的范围内肯定有一个匹配，所以我真的看不出我做错了什么。有没有人经历过这种情况？

**编辑 2**

我修复了它，结果我在 E 列中有玩家编号，在 F 列中有玩家，所以由于某种原因比较没有正确运行。我切换了这两个实体，VLOOKUP 工作正常。很奇怪，但我没有抱怨。感谢所有试图提供帮助的人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:28:34.077

使用这个公式：-

```
=IF(ISERROR(VLOOKUP(A2,E:F,2,FALSE)), "",VLOOKUP(A2,E:F,2,FALSE)) 
```

在 Simple 中，公式为

```
=VLOOKUP(A2,E:F,2,FALSE) 
```

问题是由 Range 引起的，它被称为`$E$2:$F$5`.

当您尝试拖动其余单元格的公式时，范围会错误地更新。这引起了问题。

与实际值不匹配的 Cell 然后`VLOOKUP`返回`#N/A`。为了克服这个问题，我设置了一个`IF`条件来检查任何错误，如果失败则显示为空，否则显示该值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T18:39:02.247

如果没有完全匹配，通常会发生这种情况。尝试使用修剪和通配符来允许匹配以跳过空格。例如：

```
=VLOOKUP(CONCATENATE("*",TRIM(A2),"*"), $E$2:$F$5, 2,FALSE) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T20:45:57.180

有时，如果您在所有工作表的最左侧列上都有参考数据，则可以避免持续错误。

即 A1 列 = 描述加上信息 A2：等（表 1 和表 2）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T18:36:24.183

N/A 是您正在查找的名称不在列表中的结果。这是 VLOOKUP 函数的正常行为。

要消除显示的 NA，请尝试以下公式：

```
=IF(ISNA(VLOOKUP(A2,$E$2:$F$5, 2, FALSE)),"",VLOOKUP(A2,$E$2:$F$5, 2, FALSE)) 
```

这将检查查找的结果是否为 N/A。如果是，则显示空白 ("")。如果结果不是 NA，则显示查找值。

此解决方案的一个问题是，将对找到的每条记录执行两次查找（一次检查它是否为 N/A，然后再次显示该值（尽管 Excel 可能正在针对这种情况进行优化）。

# android - 上下文菜单不起作用

> ID：10822051
> 
> 赞同：1
> 
> 时间：2012-05-30T18:22:24.457
> 
> 标签：android

嘿伙计们，我正在查看 Android 市场上的“Diaro”和“我的日记”应用程序。这些项目显示在列表视图中，长按一个项目，一个带有各种选项（如编辑、删除等）的上下文菜单打开。我尝试在我的应用程序中实现相同的功能，这有些相似。但问题在于`onContextItemSelected(MenuItem item)`我无法获得点击的项目的内容。这是代码`onContextItemSelected(MenuItem item)`：

```
@Override
public boolean onContextItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item
            .getMenuInfo();
    switch (item.getItemId()) {
    case R.id.edit:

        break;v

          // rest of the codetion
    }

    return super.onContextItemSelected(item);
} 
```

有人可以告诉我如何从这个函数中获取在列表视图上单击的项目的 ID 吗？我真的可以在这里使用一些帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T18:32:53.083

您必须为 contextMenu 注册 yourView，如下所示：

```
list = getListView();
registerForContextMenu(list); 
```

你必须使用 onCreateContextMenu 来构建它

```
@Override
public void onCreateContextMenu(ContextMenu contextMenu,
                                View v,
                                ContextMenu.ContextMenuInfo menuInfo) {
    AdapterView.AdapterContextMenuInfo info =
            (AdapterView.AdapterContextMenuInfo) menuInfo;
    selectedWord = ((TextView) info.targetView).getText().toString();
    selectedWordId = info.id;

    contextMenu.setHeaderTitle(selectedWord);
    contextMenu.add(0, CONTEXT_MENU_EDIT_ITEM, 0, R.string.edit);
    contextMenu.add(0, CONTEXT_MENU_DELETE_ITEM, 1, R.string.delete);
} 
```

您的 contextMenu 标题中有 listView 项目，它的 id 在 selectedWordId 中

有关更多信息，请参阅此链接：[Detecting which selected item (in a ListView) spawned the ContextMenu (Android)](https://stackoverflow.com/q/2321332/1105277)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-23T16:55:54.550

我有一段时间遇到同样的问题，发现我的活动中有 onMenuitemselected() 并且这是在听上下文菜单项而不是在 contextitemselected() 上，希望这会有所帮助。

# ruby-on-rails - 选择具有隐藏输入类型的复选框

> ID：10822063
> 
> 赞同：0
> 
> 时间：2012-05-30T18:23:44.250
> 
> 标签：ruby-on-rails, watir-webdriver

伙计们，

我正在使用 watir-webdriver，我的 HTML DOM 中有一个片段，当我输入一些凭据时，它会即时生成，这个片段有一堆复选框，复选框的数量各不相同，我必须选择一个复选框，下面是一个这样的例子，在这里我想选择第二个复选框（对于隐藏的输入类型具有值“BS”但输入类型复选框的值对所有复选框都是相同的）：

```
 <li class="dir">
<input type="checkbox" value="1" onclick="$(this).next('.should_destroy').value = (this.checked?0:1)" name="should_not_destroy">
<input class="should_destroy" type="hidden" value="1" name="import[dir_attributes][][should_destroy]">
<input type="hidden" value="" name="import[dir_attributes][][id]">
<input type="hidden" value="Automation" name="import[dir_attributes][][path]">
<span class="dir_mode">Include</span>
Automation
</li>
<li class="dir">
<input type="checkbox" value="1" onclick="$(this).next('.should_destroy').value = (this.checked?0:1)" name="should_not_destroy">
<input class="should_destroy" type="hidden" value="1" name="import[dir_attributes][][should_destroy]">
<input type="hidden" value="" name="import[dir_attributes][][id]">
<input type="hidden" value="BS" name="import[dir_attributes][][path]">
<span class="dir_mode">Include</span>
BS
</li> 
```

我也许可以用 XPATH 做到这一点，但想尝试非 XPATH 解决方案。隐藏的输入类型具有我需要的适当值，例如，在第二个复选框上方，输入类型隐藏的值为“BS”。我尝试使用这样的隐藏方法：

```
h  = @@browser.hidden(:value, "BS")
h.select 
```

但我不知道这之后该怎么办。我正在尝试根据隐藏元素的值选择复选框。非常感谢任何反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:50:17.780

我建议改用可见元素。我认为它使阅读测试更容易，并且看起来更稳定。

尝试：

```
@@browser.li(:class => 'dir', :text => /BS/).checkbox.set 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T22:59:39.903

来吧，我想这会做到的

由于您必须根据隐藏来选择复选框，因此您必须将级别提升到包含 li，然后向下钻取到复选框

```
@browser.hidden(value: 'BS').parent.checkboxes.first.set 
```

# r - 从多个不同长度的向量中提取公共字符串

> ID：10822064
> 
> 赞同：9
> 
> 时间：2012-05-30T18:23:49.223
> 
> 标签：r

R 中是否有函数可以在多个向量（不同长度）中查找公共字符。例如，如果我有 3 个向量...

```
 a1 <- LETTERS[1:7]
 a2 <- LETTERS[4:8]
 a3 <- LETTERS[2:10]

a1
# [1] "A" "B" "C" "D" "E" "F" "G"
a2
# [1] "D" "E" "F" "G" "H"
a3
# [1] "B" "C" "D" "E" "F" "G" "H" "I" "J" 
```

我能想到一个混乱的解决方案......

```
intersect(intersect(a1,a2),a3)
# [1] "D" "E" "F" "G" 
```

问题是，我有大约 8 或 9 个向量。有更好的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T18:29:52.003

是的：

```
Reduce(intersect,list(a1,a2,a3)) 
```

# css - 为什么在 Firefox 和 IE 中，我的打印 .css 在“缩小以适合”中看起来正确，而不是 100% 缩放？

> ID：10822066
> 
> 赞同：1
> 
> 时间：2012-05-30T18:23:56.907
> 
> 标签：css, internet-explorer, firefox, printing

我一直在为我雇主的网站开发打印样式。在 Chrome 中，一切看起来都是正确的打印预览。然而，在 Firefox 和 Internet Explorer 中，为用户提供了缩放选项。如果用户放大到“Shrink to Fit”，打印预览就对了。但是在 100% 缩放时，所有内容的缩放比例都超过了样式表的规定，并从页面上剪掉了。

```
body {
  font-size:100%;
}
@media print {
   body {
     font-size:12pt;
   }
} 
```

IE 和 FF 如何确定元素大小为 100%？我能做些什么吗？至少，我可以在最合理的缩放级别上防止剪辑吗？

# 例子：

缩小以适应，看起来正确：

![Shrink to Fit 的 Firefox 打印预览截图](../Images/17fdbeafad639310990ecfb2232ff2f8.png)

100%，东西剪辑：

![Firefox 打印预览的 100% 缩放屏幕截图](../Images/55a3ae2b0bd443e6ddde65a6848a0911.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:49:09.800

`px`我错过了在包含元素上设置的一些宽度。在打印表中以百分比宽度设置所有包含元素的宽度达到了预期的结果。

# content-management-system - 将平面文件发布到远程 Web 服务器的 CMS

> ID：10822067
> 
> 赞同：0
> 
> 时间：2012-05-30T18:24:03.783
> 
> 标签：content-management-system

有没有可以在我的 MacBook 上运行的 CMS，它可以将平面文件发布到远程主机 Web 服务器？

我将在志愿者的基础上管理几个社区站点——这些站点存在于各种不同的网络主机中。托管 CWM（例如 WordPress）的价格超出了我对每个网站的预算。

我希望我可以在我的 Mac 或 Windows 上运行 CMS，并将各种网站的平面 HTML 文件推送到远程 Web 服务器。

根据研究，最接近满足要求的是[http://www.fogcreek.com/citydesk/](http://www.fogcreek.com/citydesk/)；不幸的是，这不再是受支持的产品 - 有人有替代解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:58:05.903

实际上不是 CMS，但您可以尝试[Markdoc](http://markdoc.org/)。

# wpf - 在 silverlight 中重用用户控件

> ID：10822068
> 
> 赞同：0
> 
> 时间：2012-05-30T18:24:13.473
> 
> 标签：wpf, silverlight

我对 wpf/mvvm 比较陌生，所以这可能是一些基本的东西，但是我有一个用户控件可以自己完美显示，但是当我尝试将它加载到不同用户控件的堆栈面板中时，它不会显示一点也不。有人知道我在这里做错了什么吗？我试过设置宽度/高度/最小宽度/最小高度，但没有任何区别。

这是可重用用户控件的 xaml：

```
<UserControl x:Class="BankProductControlLibrary.Views.IdentificationData"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:bpcl="clr-namespace:BankProductControlLibrary.UserControls"
    mc:Ignorable="d"
    d:DesignHeight="102" d:DesignWidth="535">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/BankProductSilverlightControl;component/Resources/Style.xaml"/>

                <ResourceDictionary>
                    <Style x:Key="textBlockStyle" TargetType="TextBlock">
                        <Setter Property="Height" Value="28"/>
                        <Setter Property="HorizontalAlignment" Value="Left" />
                        <Setter Property="VerticalAlignment" Value="Top" />
                        <Setter Property="Width" Value="409" />
                    </Style>

                    <Style x:Key="textBlockStyle2" TargetType="TextBlock">
                        <Setter Property="Height" Value="23"/>
                        <Setter Property="HorizontalAlignment" Value="Right" />
                        <Setter Property="VerticalAlignment" Value="Top" />
                        <Setter Property="Width" Value="Auto" />
                        <Setter Property="Margin" Value="0,0,0,0" />
                    </Style>

                    <Style x:Key="comboBoxStyle" TargetType="ComboBox">
                        <Setter Property="Height" Value="23"/>
                        <Setter Property="HorizontalAlignment" Value="Left" />
                        <Setter Property="VerticalAlignment" Value="Top" />
                        <Setter Property="Width" Value="180" />
                        <Setter Property="Margin" Value="0,0,0,0" />
                    </Style>

                    <Style x:Key="textBoxStyle" TargetType="TextBox">
                        <Setter Property="Height" Value="23"/>
                        <Setter Property="HorizontalAlignment" Value="Left" />
                        <Setter Property="Margin" Value="0,0,0,0" />
                        <Setter Property="VerticalAlignment" Value="Top" />
                        <Setter Property="Width" Value="132" />
                    </Style>

                    <Style x:Key="dateBoxStyle" TargetType="bpcl:DateBox">
                        <Setter Property="Height" Value="23"/>
                        <Setter Property="HorizontalAlignment" Value="Left" />
                        <Setter Property="Margin" Value="0,0,0,0" />
                        <Setter Property="VerticalAlignment" Value="Top" />
                        <Setter Property="Width" Value="75" />
                    </Style>

                    <Style x:Key="dateFormatingExplanationStyle" TargetType="TextBlock">
                        <Setter Property="FontSize" Value="9"/>
                        <Setter Property="FontStyle" Value="Italic" />
                        <Setter Property="Height" Value="23" />
                        <Setter Property="HorizontalAlignment" Value="Left" />
                        <Setter Property="VerticalAlignment" Value="Center" />
                        <Setter Property="Width" Value="75"/>
                        <Setter Property="Text" Value="(mm/dd/yyyy)" />
                    </Style>

                    <Style x:Key="placeOfIssuanceExplanationStyle" TargetType="TextBlock">
                        <Setter Property="FontSize" Value="9"/>
                        <Setter Property="FontStyle" Value="Normal" />
                        <Setter Property="Height" Value="23" />
                        <Setter Property="HorizontalAlignment" Value="Left" />
                        <Setter Property="VerticalAlignment" Value="Center" />
                        <Setter Property="Width" Value="Auto"/>
                    </Style>                    

                </ResourceDictionary>

            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <StackPanel MinHeight="102" MinWidth="535">
        <TextBlock Style="{StaticResource textBlockStyle}">
               Select the ID provided from the drop-down list.  ID must be a photo ID.
        </TextBlock>

        <Grid Style="{StaticResource ScreenStyle}" x:Name="LayoutRoot" >

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="110*" />
                <ColumnDefinition Width="180" />
                <ColumnDefinition Width="88*" />
                <ColumnDefinition Width="142*" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
            </Grid.RowDefinitions>

            <!--Column0-->
            <TextBlock Style="{StaticResource textBlockStyle2}"
                   Grid.Row="0" Grid.Column="0"
                   Text="Type:"                    
                   />
            <TextBlock Style="{StaticResource textBlockStyle2}"
                   Grid.Row="1" Grid.Column="0"
                   Text="Date of Issuance:" 
                   />
            <TextBlock Style="{StaticResource textBlockStyle2}"
                   Grid.Row="2" Grid.Column="0"
                   Text="Place of Issuance:" />

            <!--Column1-->
            <ComboBox Name="Ids" Style="{StaticResource comboBoxStyle}"    
                Grid.Row="0" Grid.Column="1"
            DisplayMemberPath="Value"
            SelectedValuePath="Key"                      
            SelectedValue="{Binding SelectedTaxpayerId, Mode=TwoWay}" 
            />

            <StackPanel Orientation="Horizontal"
                    Grid.Row="1" Grid.Column="1">
                <bpcl:DateBox x:Name="IssueDate" Style="{StaticResource dateBoxStyle}"/>
                <TextBlock Style="{StaticResource dateFormatingExplanationStyle}" />
            </StackPanel>

            <StackPanel Orientation="Horizontal" 
                    Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="2">
                <!--This should be bpcl:AlphaTextBox-->
                <TextBox Name="PlaceOfIssuance" Style="{StaticResource textBoxStyle}" 
                    MaxLength="2"
                    Width="40"/>
                <TextBlock Style="{StaticResource placeOfIssuanceExplanationStyle}"                               
                        Text="Enter state abbreviation or country code"    

                        />
            </StackPanel>

            <!--Column2-->
            <TextBlock Style="{StaticResource textBlockStyle2}"
                    Grid.Row="0" Grid.Column="2" 
                    Text="ID Number:"        
                    />
            <TextBlock Style="{StaticResource textBlockStyle2}"
                    Grid.Row="1" Grid.Column="2" 
                    Text="Expiration Date:"/>

            <!--Column3-->
            <TextBox Name="IdentificationNumber" Style="{StaticResource textBoxStyle}" 
                 Grid.Row="0" Grid.Column="3" />
            <StackPanel Orientation="Horizontal"
                    Grid.Row="1" Grid.Column="3" >
                <bpcl:DateBox x:Name="ExpirationDate" Style="{StaticResource dateBoxStyle}"/>
                <TextBlock Style="{StaticResource dateFormatingExplanationStyle}" />
            </StackPanel>
        </Grid>
    </StackPanel>
</UserControl> 
```

这是我尝试使用它的地方：

```
<UserControl x:Class="BankProductControlLibrary.Views.JTH.TaxpayerIdentificationView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ltsa="http://www.libtax.com/LibTax/BankApp"
    xmlns:bpcl="clr-namespace:BankProductControlLibrary.UserControls"
    xmlns:views="clr-namespace:BankProductControlLibrary.Views"
    mc:Ignorable="d ltsa"
    d:DesignHeight="102" d:DesignWidth="520">

    <UserControl.Resources>
        <Style x:Key="validationStyle" TargetType="TextBlock">
            <Setter Property="Height" Value="23" />
            <Setter Property="Width" Value="Auto"/>
            <Setter Property="Foreground" Value="Red" />
        </Style>
    </UserControl.Resources>

    <StackPanel>
        <views:IdentificationData x:Name="TPIdentification" />
        <TextBlock Name="ValidationErrorMessage" Style="{StaticResource validationStyle}" />
    </StackPanel>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:21:47.813

我认为您应该检查用户控件是否具有数据上下文。有一个很好的工具对 WPF 帮助很大： [http ://wpftutorial.net/Inspector.html](http://wpftutorial.net/Inspector.html)

# php - 千位分隔符与money_format？

> ID：10822069
> 
> 赞同：1
> 
> 时间：2012-05-30T18:24:13.893
> 
> 标签：php, number-formatting

`$numval = 12345.50;`

期望的输出：

`12 345,50`

逗号而不是点不是问题，但我怎样才能让千位分隔符成为空格？

我注意到[带有空格的 PHP 货币格式，](https://stackoverflow.com/questions/5322790/php-money-format-with-spaces)但这不是重复的帖子。使用`number_format`是毫无疑问的，因为它会四舍五入输入值。我不能让通过它的值被四舍五入。

是否有一种内置方法可以准确地执行该`number_format()`操作，但无需四舍五入，还是我必须编写自己的函数来执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T18:28:22.607

如果舍入是不可能的，那么浮点值也是如此。如果您不想舍入，则必须返回整数，因为浮点运算不精确。在这种情况下，您必须自己实现格式化功能。

如果您正在处理金钱，则*尤其如此。*例如，[为什么不使用 Double 或 Float 来表示货币？](https://stackoverflow.com/questions/3730019/why-not-use-double-or-float-to-represent-currency)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T18:33:04.350

从[number_format () 页面的](http://www.php.net/manual/en/function.number-format.php)[这个评论](http://www.php.net/manual/en/function.number-format.php#106560)中（我修改了函数以匹配 number_format 默认值）。

为防止舍入：

```
function fnumber_format($number, $decimals=0, $dec_point='.', $thousands_sep=',') {
        if (($number * pow(10 , $decimals + 1) % 10 ) == 5)  //if next not significant digit is 5
            $number -= pow(10 , -($decimals+1));

        return number_format($number, $decimals, $dec_point, $thousands_sep);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T18:27:22.567

这看起来像您要使用的函数的版本：

```
string number_format ( float $number , int $decimals = 0 , string $dec_point = '.' , string $thousands_sep = ',' ) 
```

例如：

```
$newNumber = number_format($oldNumber, 2, ",", " "); 
```

有关更多信息，请查看[http://php.net/manual/en/function.number-format.php](http://php.net/manual/en/function.number-format.php)

# ios - 为什么设置斜体时CTFramesetterCreateWithAttributedString会崩溃？

> ID：10822072
> 
> 赞同：2
> 
> 时间：2012-05-30T18:24:28.650
> 
> 标签：ios, fonts, core-text

我对核心文本相当陌生。我有两个属性字符串，它们只有一个区别，在第二个示例中，第一个字符设置为 Verdana-Italic 大小 22。

第一个通过 CTFramesetterCreateWithAttributedString((CFAttributedStringRef) attributesText); 没有问题 但第二个 noe 因 EXC_BAD_ACCESS 而崩溃。

知道为什么当我所做的只是将斜体 verdana 添加到第一个字符时第二个崩溃吗？

```
pCO{
    CTForegroundColor = "<CGColor 0x8664bb0> [<CGColorSpace 0x816eef0> (kCGColorSpaceDeviceGray)] ( 0 1 )";
    NSFont = "CTFont <name: Verdana, size: 22.000000, matrix: 0x0>\nCTFontDescriptor <attributes: <CFBasicHash 0x835a240 [0x13fab48]>{type = mutable dict, count = 1,\nentries =>\n\t1 : <CFString 0x278c40 [0x13fab48]>{contents = \"NSFontNameAttribute\"} = <CFString 0x86566e0 [0x13fab48]>{contents = \"Verdana\"}\n}\n>";
    NSParagraphStyle = "CTParagraphStyle:\nwriting direction = -1, alignment = 2, line break mode = 4, default tab interval = 0\nfirst line head indent = 0, head indent = 0, tail indent = 0\nline height multiple = 0, maximum line height = 0, minimum line height = 0\nline spacing adjustment = 0, paragraph spacing = 0, paragraph spacing before = 0\ntabs:\n<CFArray 0x8659590 [0x13fab48]>{type = immutable, count = 12, values = (\n\t0 : CTTextTab: location = 28, alignment = 0, options = (none)\n\n\t1 : CTTextTab: location = 56, alignment = 0, options = (none)\n\n\t2 : CTTextTab: location = 84, alignment = 0, options = (none)\n\n\t3 : CTTextTab: location = 112, alignment = 0, options = (none)\n\n\t4 : CTTextTab: location = 140, alignment = 0, options = (none)\n\n\t5 : CTTextTab: location = 168, alignment = 0, options = (none)\n\n\t6 : CTTextTab: location = 196, alignment = 0, options = (none)\n\n\t7 : CTTextTab: location = 224, alignment = 0, options = (none)\n\n\t8 : CTTextTab: location = 252, alignment = 0, options = (none)\n\n\t9 : CTTextTab: location = 280, alignment = 0, options = (none)\n\n\t10 : CTTextTab: location = 308, alignment = 0, options = (none)\n\n\t11 : CTTextTab: location = 336, alignment = 0, options = (none)\n\n)}";
}2{
    NSSuperScript = "-1";
} 
```

和

```
p{
    NSFont = "<UICFFont: 0x8484240> font-family: \"Verdana\"; font-weight: normal; font-style: italic; font-size: 22px";
}CO{
    CTForegroundColor = "<CGColor 0x847e820> [<CGColorSpace 0x8426810> (kCGColorSpaceDeviceGray)] ( 0 1 )";
    NSFont = "CTFont <name: Verdana, size: 22.000000, matrix: 0x0>\nCTFontDescriptor <attributes: <CFBasicHash 0x832ecb0 [0x13fab48]>{type = mutable dict, count = 1,\nentries =>\n\t1 : <CFString 0x278c40 [0x13fab48]>{contents = \"NSFontNameAttribute\"} = <CFString 0x847ccb0 [0x13fab48]>{contents = \"Verdana\"}\n}\n>";
    NSParagraphStyle = "CTParagraphStyle:\nwriting direction = -1, alignment = 2, line break mode = 4, default tab interval = 0\nfirst line head indent = 0, head indent = 0, tail indent = 0\nline height multiple = 0, maximum line height = 0, minimum line height = 0\nline spacing adjustment = 0, paragraph spacing = 0, paragraph spacing before = 0\ntabs:\n<CFArray 0x847ee20 [0x13fab48]>{type = immutable, count = 12, values = (\n\t0 : CTTextTab: location = 28, alignment = 0, options = (none)\n\n\t1 : CTTextTab: location = 56, alignment = 0, options = (none)\n\n\t2 : CTTextTab: location = 84, alignment = 0, options = (none)\n\n\t3 : CTTextTab: location = 112, alignment = 0, options = (none)\n\n\t4 : CTTextTab: location = 140, alignment = 0, options = (none)\n\n\t5 : CTTextTab: location = 168, alignment = 0, options = (none)\n\n\t6 : CTTextTab: location = 196, alignment = 0, options = (none)\n\n\t7 : CTTextTab: location = 224, alignment = 0, options = (none)\n\n\t8 : CTTextTab: location = 252, alignment = 0, options = (none)\n\n\t9 : CTTextTab: location = 280, alignment = 0, options = (none)\n\n\t10 : CTTextTab: location = 308, alignment = 0, options = (none)\n\n\t11 : CTTextTab: location = 336, alignment = 0, options = (none)\n\n)}";
}2{
    NSSuperScript = "-1";
} 
```

干杯

尼克

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T19:20:33.343

在这里仔细阅读了一些答案后，我注意到我使用了 UIFont 而不是 CTFont。像这样将您的 UIFont 转换为 CTFont：

```
CTFontRef CTFontCreateFromUIFont(UIFont *font)
{
    CTFontRef ctFont = CTFontCreateWithName((__bridge CFStringRef)font.fontName, 
                                            font.pointSize, 
                                            NULL);
    return ctFont;
} 
```

然后像这样将它添加到您的 NSAttributedString

```
CTFontRef italicFont = CTFontCreateFromUIFont(italicUIFont);
[aStr addAttribute:(NSString*)kCTFontAttributeName value:(__bridge id)italicFont range:NSMakeRange(0,5)]; 
```

瞧，它不会再崩溃了，并且会像我想要的那样显示。:-)

干杯

尼克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-07T12:19:32.470

[如果使用不正确， Niklassaers 的答案](https://stackoverflow.com/a/10822849/764822)可能会在 ARC 下泄漏，如下所示：

[仪器 http://goo.gl/xrxwdb](http://goo.gl/xrxwdb)

所以添加属性后，一定要：

```
CFRelease(italicFont); 
```

# c# - 在代码中创建数据库视图

> ID：10822079
> 
> 赞同：0
> 
> 时间：2012-05-30T18:25:17.420
> 
> 标签：c#, sql-server, sql-server-2005, ado.net

因此，我的任务是创建一个工具，允许我们的用户创建他们自己的“工作清单”，他们用这些“工作清单”来处理他们的数据。在我们的应用程序中，这些工作列表由 SQL 视图驱动，所以现在我的程序必须根据用户输入在我们的数据库中动态创建视图。我不喜欢这样，但现在我必须充分利用它，并集思广益解决这个问题的最佳方法。

基本上我创建的每个视图都有一个相似的骨架，它有几个总是被拉出的列和几个总是发生的连接。根据用户输入，我可以添加额外的 SELECT 列，如果需要访问添加的显示列，还可以添加额外的连接。

所以基本上现在我的代码看起来像这样......

```
string SQL = string.Format(@"CREATE VIEW {0}
                             AS
                             SELECT
                             Foo.A,
                             Bar.B,
                             {1}
                             FROM
                             Table
                             INNER JOIN Foo on Foo.ID = Table.FooID
                             INNER JOIN Bar on Bar.ID = Table.BarID
                             {2}", viewName, displayNames, extraJoins);
Database.ExecuteNonQuery(SQL); 
```

我真的不喜欢这个，原因很明显。但是，我似乎找不到与使用 ADO 创建视图的参数化查询的等效项。我也许可以创建一个存储过程来做到这一点，但即使这样似乎也很草率。有什么合理的方法可以做这样的事情不会让我感到恶心吗？此外，我们正在使用 MS SQL，并且必须支持早在 2005 年。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:33:03.867

与 DML（如`SELECT`/ `UPDATE`/ `INSERT`/ `DELETE`）相比[，DDL 中不支持参数](https://stackoverflow.com/a/3524055/847363)（也请参见[此处](http://social.msdn.microsoft.com/forums/en-US/sqlintegrationservices/thread/9b520fd1-53e5-4346-a041-8daff99ea6e8/)）。所以基本上你要么将它隐藏在带有动态 SQL 的存储过程中，要么按照你描述的方式来做......

# php - Magento 自定义支付网关未触发“授权”或“捕获”方法

> ID：10822081
> 
> 赞同：5
> 
> 时间：2012-05-30T18:25:23.377
> 
> 标签：php, magento

所以，万岁 - 我正在尝试创建一个新的自定义支付网关。它旨在通过第三方 API 进行身份验证/捕获，但不需要重定向到第三方站点。

据我了解，当在 Magento 中下订单/完成订单并且网关设置为“授权和捕获”时，它应该从网关模型中触发“捕获”方法。目前，它没有这样做。

当然，如果我专门从 Admin Order 视图捕获，它会尝试捕获，但这需要在结帐时立即发生（同样，我的理解是它已经应该）。

在我的网关模型中，我有以下内容（为了便于阅读而被截断）：

```
<?php
class Example_Gateway_Model_Payment extends Mage_Payment_Model_Method_Cc
{
    protected $_code = 'example';

    protected $_isGateway = true;
    protected $_canAuthorize = true;
    protected $_canCapture = true;
    protected $_canUseInternal = true;
    protected $_canUseCheckout = true;

    // This is an empty block class that extends Mage_Payment_Block_Form_Cc
    protected $_formBlockType = 'example/form_example';

    public function authorize(Varien_Object $payment, $amount)
    {
        Mage::log('Authorizing!');
    }

    public function capture(Varien_Object $payment, $amount)
    {
        Mage::log('** Capturing **');
        // Third-party API stuff would go here, with exceptions being thrown if the gateway determines they've provided an invalid card, etc.
    }

    public function assignData($data)
    {
        Mage::log('Assigning Data');
    }
} 
```

这个支付模型本身肯定有效 - 我得到 和 的日志输出`assignData()`，`validate()`以及`__construct()`如果我添加它。但无论我做什么，实际下订单时捕获或授权方法都不会触发。

我的 config.xml 有点像这样：

```
<?xml version="1.0"?>
<config>
    <modules>
        <Example_Gateway>
            <version>0.0.5</version>
        </Example_Gateway>
    </modules>
    <global>
        <blocks>
            <gateway>
                <class>Example_Gateway_Block</class>
            </gateway>
        </blocks>
        <models>
            <gateway>
                <class>Example_Gateway_Model</class>
            </gateway>
        </models>
        <helpers>
            <gateway>
                <class>Example_Gateway_Helper</class>
            </gateway>
        </helpers>
    </global>
    <frontend>
      <!-- Snip.. Nothing special here -->
    </frontend>
    <default>
        <payment>
            <gateway>
                <sort_order>0</sort_order>
                <model>gateway/payment</model>
                <enabled>1</enabled>
                <order_staus>processing</order_status>
                <payment_action>authorize_capture</payment_action>
                <cctypes>VI,MC,AE,DI</cctypes>
                <useccv>1</useccv>
            </gateway>
        </payment>
    </default>
</config> 
```

我认为不需要资源模型，因为我不需要任何额外的表；我的期望是它将简单地使用`sales_flat_order_payment`相关表来存储任何网关相关/提供的数据（txn id 等）

同样，我只是扩展默认的 CC 块以获取标准付款表单。

我错过了什么？它必须是我忽略的小而简单的东西。

提前致谢！

* * *

**更新：** 到目前为止，我已经实现了一个解决方法，它使用观察者来手动调用 capture() 方法的 checkout_type_onepage_save_order 事件 - 但我很确定这不是正确的方法。

`capture()`如果网关设置为 authorize_capture，我认为 Magento 应该自动调用初始订单保存并没有错，对吧..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:20:10.967

解决了！你需要这个：

```
protected $_isInitializeNeeded      = false; 
```

我不知道为什么这是必要的，但在这一点上，我已经放弃了试图找出 magento 的原因，转而支持实际完成工作。我遇到了和你完全相同的问题，当我通过源代码跟踪它时，我发现当 isInitializeNeeded 返回 true 时，Payment.php 没有调用 _authorize。所以，在你的模型中坚持这条线，它就会起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-13T16:08:55.403

我认为该方法应该是：“authorize_capture”而不是“capture”，如配置中所述

```
<payment_action>authorize_capture</payment_action> 
```

像那样：

```
public function authorize_capture(Varien_Object $payment, $amount)
{
    Mage::log('** Capturing **');
    // Third-party API stuff would go here, with exceptions being thrown if the gateway determines they've provided an invalid card, etc.
} 
```

我有一个类似的问题，“授权”方法根本没有被触发，因为“authorize_action”是空的。我能够通过在方法本身中对其进行硬编码来解决这个问题。调用“getConfigPaymentAction”获取授权方法。

```
public function getConfigPaymentAction() {
    return 'authorize';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T23:46:38.770

好吧，我使用了一个观察者来手动调用捕获方法。
不是最优雅的解决方案，但效果很好。

# networking - 基于传入数据包分析的网络逻辑结构

> ID：10822084
> 
> 赞同：1
> 
> 时间：2012-05-30T18:25:29.923
> 
> 标签：networking, ip, ttl

我需要确定这两者是否属于ip-address子网，知道ttl。

例如，我从两个 IP 地址中的每一个收到 200 个数据包。对于其中的每一个，我都保留了 ttl 的最大值和最小值。

xxx10 最小 ttl=68 最大 ttl=69
xxx110 最小 ttl=69 最大 ttl=70

是否可以根据这些数据确定是否属于单个 ip-address 子网？谢谢。

# jit - JIT 编译器 - 如何开始编写自己的编译器？

> ID：10822085
> 
> 赞同：1
> 
> 时间：2012-05-30T18:25:36.657
> 
> 标签：jit, cil

我想为 CIL 编写自己的 JIT 编译器，我不想使用库来生成编译器。您有任何教程、电子书或示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:28:16.147

来吧，[这](https://stackoverflow.com/questions/1669/learning-to-write-a-compiler)应该是一个很好的资源。

其中一些是特定于红宝石的，但也有很多不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T12:39:19.220

你可以从[转子](http://en.wikipedia.org/wiki/Shared_Source_Common_Language_Infrastructure)开始。代码库还附带一本免费书籍。

# windows - 对齐文本框

> ID：10822087
> 
> 赞同：4
> 
> 时间：2012-05-30T18:25:47.900
> 
> 标签：windows, delphi, themes, c++builder

我有一些[数据输出文本框](http://msdn.microsoft.com/en-us/library/windows/desktop/aa511494.aspx#dataOutput)（没有边框且与窗口其余部分具有相同背景的文本框），我试图与标准编辑控件 + 旋转按钮对齐，以表示一列数字，其中一个可以编辑：

![截屏](../Images/31bbd131330fa89cdb16e5c8b0076c6a.png)

我可以在 Delphi / C++Builder 表单设计器中手动对齐这些，但是当我在不同版本的 Windows 或不同 DPI 上查看表单时，文本不再右对齐，大概是因为旋转按钮间距、边框等。

我可以使用 EM_GETMARGINS 来确定旋转按钮的宽度，但是如何确定编辑控件的边距和边框的大小？我尝试了 EM_POSFROMCHAR、ClientToScreen、GetSystemMetrics(SM_CXBORDER)、GetSystemMetrics(SM_CXEDGE) 和 GetThemeMargins 的各种组合，但到目前为止，我找不到有效且有意义的组合。

更多细节：

*   环境是 Delphi / C++Builder XE2。
*   数据输出控件是带有 BorderStyle bsNone 的 TEdits。
*   编辑 + 旋转按钮是 TJvSpinEdit。从查看其源代码来看，它使用 EM_SETMARGINS 为其旋转按钮留出空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:54:44.750

使用 Win32 API`GetWindowRect()`和`GetClientRect()`方法。边界将是两个矩形之间的差异。不过，那只会给你边界。客户区内可能有额外的间距。

# javascript - Javascript删除特殊字符之前的所有内容？

> ID：10822089
> 
> 赞同：3
> 
> 时间：2012-05-30T18:26:21.693
> 
> 标签：javascript, regex

我正在尝试删除字符串之前的所有内容

`234234$12$34`

在第一次找到之前，所有东西都被删除了`$`？然后拆分`$12$34`到喜欢`$12,$34`？

我怎么能在正则表达式中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T18:28:08.867

```
 parts = "234234$12$34".match(/\$[^$]+/g) 
```

返回

```
 ["$12", "$34"] 
```

# windows - 应用程序不会从 Creator 启动

> ID：10822091
> 
> 赞同：1
> 
> 时间：2012-05-30T18:26:29.220
> 
> 标签：windows, qt

我的 Qt 应用程序不会从 Qt Creator 启动，但是我可以直接从发布文件夹运行 .exe。这是为什么 ？我完全迷失在这里。在 Qt Creator 中，我只收到一条消息，告诉我我的应用程序刚刚崩溃，代码为 -1073741515。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:40:27.173

Qt Creator 必须指向错误的 dll。您可以重新安装 QtSDK，它应该会修复在 IDE（Qt Creator）中查找运行时 dll 的问题。

[http://www.daniweb.com/.../ok-so-whats-error-1073741515-again](http://www.daniweb.com/software-development/cpp/threads/233908/ok-so-whats-error-1073741515-again)

在这篇文章中[，](http://www.qtcentre.org/threads/28535-exited-with-code-1073741515)他们说他们通过更新 Qt 中的 PATH 来修复它。这是添加到我的 PATH 变量之前的部分，如下图所示：

```
C:\QtSDK\mingw\bin;C:\QtSDK\Desktop\Qt\4.7.3\mingw\lib;C:\QtSDK\Desktop\Qt\4.7.3\mingw\bin; 
```

这是一个屏幕截图，显示了如何访问它：

![在此处输入图像描述](../Images/94626171c48f0ef1ef783905761ea487.png)

另一种选择是您可以进入 QtSDK 文件夹，找到您正在使用的编译器和平台的 bin 文件夹，并将其放入系统的路径中。那么Qt应该能够通过在系统路径中找到dll来运行程序。

![在此处输入图像描述](../Images/9939ae2f79ee2ec73b0983d36fbabda4.png)

可能是最短的选项，但最棘手的是进入 Qt Creator > Tools > Options > Qt4 并确保您有类似于此的内容：

![在此处输入图像描述](../Images/5175f7e612f0906571c1ed04b45c5c3b.png).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T18:35:50.753

按照[这个答案](https://stackoverflow.com/questions/3360888/qt-app-i-made-exited-with-code-1073741515)，它看起来好像找不到共享库。

在项目的运行设置中检查适当的路径环境变量，并确保它拥有所需的一切。

# c# - 在 C# 中将匿名对象作为参数传递

> ID：10822092
> 
> 赞同：17
> 
> 时间：2012-05-30T18:26:40.337
> 
> 标签：c#, object, dynamic, ienumerable, anonymous

我在将匿名对象作为方法中的参数传递时遇到问题。我想像在 JavaScript 中一样传递对象。例子：

```
function Test(obj) {
    return obj.txt;
}
console.log(Test({ txt: "test"})); 
```

但是在 C# 中，它会抛出许多异常：

```
class Test
{
    public static string TestMethod(IEnumerable<dynamic> obj)
    {
        return obj.txt;
    }
}
Console.WriteLine(Test.TestMethod(new { txt = "test" })); 
```

例外：

1.  参数 1：无法从 'AnonymousType#1' 转换为 'System.Collections.Generic.IEnumerable'
2.  'ConsoleApplication1.Test.TestMethod(System.Collections.Generic.IEnumerable)' 的最佳重载方法匹配有一些无效参数
3.  “System.Collections.Generic.IEnumerable”不包含“txt”的定义，并且找不到接受“System.Collections.Generic.IEnumerable”类型的第一个参数的扩展方法“txt”（您是否缺少 using 指令还是汇编参考？）

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-30T18:28:14.557

看起来你想要：

```
class Test
{
    public static string TestMethod(dynamic obj)
    {
        return obj.txt;
    }
} 
```

您使用它就好像它是一个单一的值，而不是一个序列。你真的想要一个序列吗？

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-30T18:41:49.400

这个应该做...

```
class Program
{
    static void Main(string[] args)
    {
        var test = new { Text = "test", Slab = "slab"};
        Console.WriteLine(test.Text); //outputs test
        Console.WriteLine(TestMethod(test));  //outputs test
    }

    static string TestMethod(dynamic obj)
    {
        return obj.Text;
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-30T18:33:37.540

这很好用:)

```
public class Program
{
    private static void Main(string[] args)
    {
        Console.WriteLine(Test.TestMethod(new[] {new {txt = "test"}}));
        Console.ReadLine();
    }
}

public class Test
{
    public static string TestMethod(IEnumerable<dynamic> obj)
    {
        return obj.Select(o => o.txt).FirstOrDefault();
    }
} 
```

# android - Android TextView 和 Button 并排，椭圆左侧 TextView

> ID：10822096
> 
> 赞同：7
> 
> 时间：2012-05-30T18:26:46.127
> 
> 标签：android, android-layout, android-relativelayout, android-linearlayout

我有一个左对齐的 TextView 和一个并排的右对齐按钮。我希望按钮在右侧占用尽可能多的空间（取决于其中的文本），左侧文本尽可能多地填充，并在任何溢出时椭圆化。

```
|Long title that may or may not ellipsi... <Button with text>| 
```

我已经阅读并尝试了许多其他似乎有类似问题的帖子，但没有一个对我有用。我已经尝试过使用带有权重的 LinearLayout 以及分配了 layout_toLeftOf 的 RelativeLayout，但这些都不是我需要的。

这是我的 LinearLayout 代码（去掉了不必要的部分），其中我给左侧 TextView 的 layout_weight 为 1，给按钮的 layout_weight 为 0。这应该为右侧按钮提供所需的所有空间，并为 TextView 提供其余的空间，但相反，左边的标题停止出现，右边的按钮被弄脏到一边并被切断。正如我所看到的那样，我已经尝试将 Text 和 button 的宽度都替换为 0dip ，这并没有改变任何东西。

```
<LinearLayout
    android:layout_height="@dimen/title_bar_height"
    android:layout_width="fill_parent"
    android:orientation="horizontal">
  <TextView
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_weight="1"
      android:ellipsize="end"
      android:layout_gravity="left|center_vertical"
      android:gravity="left|center_vertical"
      android:textSize="22sp"
      android:lines="1"/>
  <include layout="@layout/action_buttons"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_weight="0"/>
</LinearLayout> 
```

将 TextView 的 layout_weight 替换为 0 实际上允许右侧按钮完全适合屏幕，但左侧文本仍然不显示。如果我将 TextView 和按钮的 layout_weights 都设置为 0，然后将 TextView 的宽度从 0dip 更改为 wrap_content，则所有内容都会显示，但按钮会被挤压以填充剩余空间（并且里面的文本被截断）。

这是我对 RelativeLayout 的尝试：

```
<RelativeLayout
    android:layout_height="@dimen/title_bar_height"
    android:layout_width="wrap_content">
  <include layout="@layout/action_buttons"/>
  <TextView
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:layout_gravity="center_vertical"
      android:layout_alignParentLeft="true"
      android:layout_toLeftOf="@layout/action_buttons"
      android:gravity="center_vertical"
      android:scaleType="center"
      android:textSize="22sp"
      android:ellipsize="end"
      android:lines="1"/>
</RelativeLayout> 
```

一切都很好地对齐并显示出来，除了左边的 TextView（当它太长时）重叠并出现在按钮的顶部而不是截断和省略。android:layout_toLeftOf"@layout/action_buttons" 不应该指定 TextView 应该停留在按钮的左边界吗？

我已经尝试了似乎可以在此站点上找到的与此问题相关的所有内容，但仍然找不到解决方案。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-31T04:54:18.963

这将为您解决问题：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >
    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_gravity="left|center_vertical"
        android:layout_weight="1"
        android:ellipsize="end"
        android:gravity="left|center_vertical"
        android:singleLine="true"
        android:text="Some really long textttttttttt tooooooooooo make the ellipsize work in the preview"
        android:textSize="22sp" />
    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button Text" />
</LinearLayout> 
```

这是运行时的样子： ![较短的按钮](../Images/99cef6856d09e752d6e82e4102d60359.png)

再次使用带有更多文本的按钮： ![加长按钮](../Images/8498d49e2991e5c495295036a5157c4f.png)

# android - 双屏HDMI输出编程

> ID：10822097
> 
> 赞同：6
> 
> 时间：2012-05-30T18:26:46.117
> 
> 标签：android, android-service, android-hardware, hdmi

在我的搜索中，我发现到目前为止，Android SDK 不支持控制 HDMI 端口活动和处理 HDMI 输出。尽管像摩托罗拉这样的某些设备制造商（不知道是否有其他制造商也这样做）提供了 API 以获得更好的控制。以下是其中两个的链接，其中不推荐使用双屏（非常符合我的要求）。

[摩托罗拉 HDMI 状态 API](http://developer.motorola.com/docs/motorola-hdmi-status-api/)

[摩托罗拉hdmi双屏api](http://developer.motorola.com/docs/motorola-hdmi-dual-screen-api/)

镜像是连接 HDMI 的默认行为，但我希望我的应用程序在 HDMI 输出上运行绑定服务。这将允许手机同时执行任何其他任务，而不会干扰我在 HDMI 屏幕上运行的服务。

有人可以建议我该怎么做吗？或者是否有任何其他制造商提供与摩托罗拉类似的灵活性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-18T19:56:57.540

Create a Service class like so.

```
public class MultiDisplayService extends Service {
    @Override
    public void onCreate() {
        super.onCreate();
        DisplayManager dm = (DisplayManager)getApplicationContext().getSystemService(DISPLAY_SERVICE);
        if (dm != null){
            Display dispArray[] = dm.getDisplays(DisplayManager.DISPLAY_CATEGORY_PRESENTATION);

        if (dispArray.length>0){
            Display display = dispArray[0];
            Log.e(TAG,"Service using display:"+display.getName());
            Context displayContext = getApplicationContext().createDisplayContext(display);
            WindowManager wm = (WindowManager)displayContext.getSystemService(WINDOW_SERVICE);
            View view = LayoutInflater.from(displayContext).inflate(R.layout.fragment_main,null);
            final WindowManager.LayoutParams params = new WindowManager.LayoutParams(
                    WindowManager.LayoutParams.FLAG_FULLSCREEN,
                    WindowManager.LayoutParams.FLAG_FULLSCREEN,
                    WindowManager.LayoutParams.TYPE_TOAST,
                    WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN,
                    PixelFormat.TRANSLUCENT);
            wm.addView(view, params);
        }
    }
} 
```

Start the service, perhaps in your Application class.

```
public class MultiDisplayApplication extends Application {
    @Override
    public void onCreate() {
        super.onCreate();
        startService(new Intent(this, MultiDisplayService.class));
    }
} 
```

You will probably need more complex display add/remove logic based on `DisplayManager.DisplayListener`

```
mDisplayManager = (DisplayManager) this.getSystemService(Context.DISPLAY_SERVICE);
mDisplayManager.registerDisplayListener(this, null); 
```

Using `WindowManager.LayoutParams.TYPE_TOAST` requires no permissions but seems like a hack. `WindowManager.LayoutParams.TYPE_SYSTEM_ALERT` might be more reasonable, but requieres

```
<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" /> 
```

in your AndroidManifest.

# objective-c - UIPopoverController 的 contentViewController.viewDidUnload 没有被调用

> ID：10822099
> 
> 赞同：0
> 
> 时间：2012-05-30T18:26:50.100
> 
> 标签：objective-c, uipopovercontroller, viewdidunload

当我使用 a`UIPopoverController`并给它一个 contentViewController 时，我似乎无法正确释放 contentViewController（正如 contentViewController.viewDidUnload 永远不会被调用的事实所证明的那样）。

**创建和显示弹出窗口的代码：**

```
PopupTestViewController *popupTest = [[PopupTestViewController alloc] initWithNibName:@"PopupTestViewController" bundle:nil];
popupTest.mainViewController = self;
self.popoverController = [[UIPopoverController alloc] initWithContentViewController:popupTest];
self.popoverController.popoverContentSize = popupTest.view.frame.size;
self.popoverController.delegate = self;
[self.popoverController presentPopoverFromRect:button.frame inView:button.superview permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

现在我假设`contentViewController`（在上面的代码中，这是`PopoverTestViewController`）*应该*在关闭时被释放`UIPopoverController`（无论是通过单击它，还是显式地关闭它）。但`viewDidUnload`永远不会被调用。但是，我确实注意到，如果我为 定义了一个 dealloc 方法`PopoverTestViewController`，则该方法会被适当地调用。

所以我的问题是：为什么`viewDidUnload`永远不会被调用？（我正在使用ARC）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:44:22.163

这与我使用的有点不同`UIPopoverController`。由于您手动`alloc`'ed `popupTest`，您肯定需要手动操作`release`。该`UIPopoverController`实例将`popupTest`在`initWithContentViewController:`被调用时保留。

此外，如果您使用 定义`popoverController`属性`retain`，那么当您`self.popoverController`通过直接从`alloc`. 设置 a 的一般模式`@property`是：

```
@property (nonatomic, retain) Foo* foo;

...

Foo* aFoo = [[Foo alloc] init];
self.foo = aFoo;
[aFoo release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T20:03:20.580

`viewDidUnload`不保证会被调用。它仅在应用程序收到内存警告并且接收`ViewController`已`view`加载但不在屏幕上时才被调用。当`view`加载并且保留计数达到零时，`viewDidUnload`不调用。

[您可以在文档](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html#//apple_ref/doc/uid/TP40007457-CH10-SW2)中找到更多详细信息。说明何时释放可以在同一[文档](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html#//apple_ref/doc/uid/TP40007457-CH10-SW10)中找到哪些对象。

# javascript - 确定keydown中的“+”（加号）键是否来自小键盘？

> ID：10822100
> 
> 赞同：4
> 
> 时间：2012-05-30T18:26:50.600
> 
> 标签：javascript

我正在使用以下代码来确定用户按下了哪个键。

```
$(document).keydown(function(e){
    var code = (e.keyCode? e.keyCode : e.charCode);
    $("#keyCode").html("Key Code: " + code);
}); 
```

我的问题是 +/= 键的代码与小键盘加键的代码相同。两者都是 107。我怎么知道这两个键中的哪一个被按下了？

更新

看起来这个问题是 Firefox 特有的。Chrome 和 IE 给了我 107 和 187 的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:39:42.867

我能让它在 Firefox 中正常工作的唯一方法是使用 keypress 事件并获取 charCode。我还跟踪是否按住 Shift 键。

# asp.net - 如何在 SignalR ConfigurationManager 上设置 KeepAlive 属性

> ID：10822103
> 
> 赞同：2
> 
> 时间：2012-05-30T18:26:57.280
> 
> 标签：asp.net, web-config, signalr

我找到了关于在 SignalR 的 ConfigurationManager 上设置 KeepAlive 属性的链接：

[https://github.com/SignalR/SignalR/issues/168](https://github.com/SignalR/SignalR/issues/168)

问题是我很难理解应该在哪里设置。我应该在 webconfig 中设置 ConfigurationManager 还是在代码中可以选择这样做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T18:49:33.860

你可以在 global.asax 中设置：

```
protected void Application_Start()
{
   SignalR.GlobalHost.Configuration.KeepAlive = TimeSpan.FromSeconds(30);
} 
```

见[https://github.com/SignalR/SignalR/wiki/Configuring-SignalR](https://github.com/SignalR/SignalR/wiki/Configuring-SignalR)

# mysql - 如何组合这两个 MySQL 语句

> ID：10822107
> 
> 赞同：0
> 
> 时间：2012-05-30T18:27:07.853
> 
> 标签：mysql, wordpress, buddypress

我正在使用这两个语句来查询 BuddyPress 的友谊，但我想知道它们是否是一种更好的方法或组合这两个 MySQL 语句的方法：

```
 //Statement for friendship initiator
    $SQL1 = "SELECT wp_users.display_name AS'name', 
                    wp_users.user_login AS 'fname', 
                    wp_users.user_nicename AS 'surname' 
            FROM wp_users 
            INNER JOIN wp_bp_friends 
                  ON wp_users.id = wp_bp_friends.friend_user_id 
            WHERE 1=1 
               AND wp_bp_friends.initiator_user_id = " . $user_id . " 
               AND wp_bp_friends.is_confirmed = 1";

    //Statement for friendship non-initiator
    $SQL2 = "SELECT wp_users.display_name AS 'name', 
                    wp_users.user_login AS 'fname', 
                    wp_users.user_nicename AS 'surname' 
             FROM wp_users 
             INNER JOIN wp_bp_friends 
                   ON wp_users.id = wp_bp_friends.initiator_user_id 
             WHERE 1=1 
                   AND wp_bp_friends.friend_user_id = " . $user_id . " 
                   AND wp_bp_friends.is_confirmed = 1"; 
```

结果应该包含一个基于 $user_id 的友谊列表，无论他们是否发起了关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:33:52.697

```
$sql = "
  SELECT u.display_name  AS name,
         u.user_login    AS fname,
         u.user_nicename AS surname
  FROM   wp_users        AS u
    JOIN wp_bp_friends   AS f
      ON (u.id, $user_id) IN (
           (f.friend_user_id,    f.initiator_user_id),
           (f.initiator_user_id, f.friend_user_id)
         )
  WHERE  f.is_confirmed = 1
"; 
```

* * *

**编辑**

根据[@Quassnoi](https://stackoverflow.com/questions/10822107/how-to-combine-these-two-mysql-statements/10822183#comment14086928_10822183)下面的评论，与上面的答案一样优雅，它不会使用索引进行查找（由于 MySQL 实现缺陷）。相反，您可以这样做：

```
$sql = "
  SELECT u.display_name  AS name,
         u.user_login    AS fname,
         u.user_nicename AS surname
  FROM   wp_users        AS u
    JOIN wp_bp_friends   AS f
      ON (f.friend_user_id    = u.id AND f.initiator_user_id = $user_id)
      OR (f.initiator_user_id = u.id AND f.friend_user_id    = $user_id)
  WHERE  f.is_confirmed = 1
"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:33:12.387

如果您不关心哪个结果来自哪个查询，那么您可以轻松地将它们与 a 结合起来`UNION`，如下所示：

```
$sql = "SELECT 
   wp_users.display_name AS 'name', 
   wp_users.user_login AS 'fname', 
   wp_users.user_nicename AS 'surname' 
FROM wp_users 
INNER JOIN wp_bp_friends ON wp_users.id = wp_bp_friends.friend_user_id 
WHERE 1=1 
AND wp_bp_friends.initiator_user_id = " . $user_id . " 
AND wp_bp_friends.is_confirmed = 1
UNION
SELECT 
   wp_users.display_name AS 'name', 
   wp_users.user_login AS 'fname', 
   wp_users.user_nicename AS 'surname' 
FROM wp_users 
INNER JOIN wp_bp_friends ON wp_users.id = wp_bp_friends.initiator_user_id 
WHERE 1=1 
AND wp_bp_friends.friend_user_id = " . $user_id . " 
AND wp_bp_friends.is_confirmed = 1"; 
```

如果它们来自哪个查询确实很重要，那么您可以为每个查询添加一个静态 varchar 列，以后可以使用它来确定该行来自哪个查询：

```
$sql = "SELECT 'FIRST', 
   wp_users.display_name AS 'name', 
   wp_users.user_login AS 'fname', 
   wp_users.user_nicename AS 'surname' 
FROM wp_users 
INNER JOIN wp_bp_friends ON wp_users.id = wp_bp_friends.friend_user_id 
WHERE 1=1 
AND wp_bp_friends.initiator_user_id = " . $user_id . " 
AND wp_bp_friends.is_confirmed = 1
UNION
SELECT 'SECOND',
   wp_users.display_name AS 'name', 
   wp_users.user_login AS 'fname', 
   wp_users.user_nicename AS 'surname' 
FROM wp_users 
INNER JOIN wp_bp_friends ON wp_users.id = wp_bp_friends.initiator_user_id 
WHERE 1=1 
AND wp_bp_friends.friend_user_id = " . $user_id . " 
AND wp_bp_friends.is_confirmed = 1"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T18:37:39.987

```
SELECT  u.display_name, u.user_login, u.user_nicename
FROM    wp_bp_friends f
JOIN    wp_users u
ON      u.id =
        CASE @userId
        WHEN f.initiator_user_id THEN
                f.friend_user_id
        WHEN f.friend_user_id THEN
                f.initiator_user_id
        END
WHERE   (
        f.initiator_user_id = @userId
        OR
        f.friend_user_id = @userId
        )
        AND f.is_confirmed = 1 
```

`initiator_user_id`在和上创建索引`friend_user_id`。

这将使用`index_merge`which (with `InnoDB`) 比`UNION`两个结果集中的 a 稍微更有效，因为对`wp_bp_friends`.

# c# - 如何使用 inkPresenter 在不透明度的情况下相互绘制笔画？

> ID：10822108
> 
> 赞同：0
> 
> 时间：2012-05-30T18:27:10.757
> 
> 标签：c#, .net, wpf

我想使用一个 inkpresenter，以便每个新笔划都放在以前的笔划之上，从而产生变暗的效果。

我每次都尝试创建一个新的 inkpresenter 并将其添加到画布中，但不透明效果仅在我释放鼠标后才会出现。我希望它在您绘制时立即显示。如果我将 inkpresenter 直接设置为目标元素的内容（无混合），则笔画在您绘制时具有不透明度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:23:40.783

您尚未发布任何代码来显示您当前如何在应用程序中处理 InkPresenter。我在 WPf 中制作了一个快速测试程序，它似乎可以在不透明度下正常工作。

我将`InkPresenter`控件放在 xaml 中，并将`PreviewMouseDown`,`PreviewMouseMove`和`PreviewMouseUp`方法的处理程序添加到后面的代码中。我用来处理这些事件的代码如下所示：

```
System.Windows.Ink.Stroke newStroke = null;

    private void inkPresenterSample_PreviewMouseDown(object sender, MouseButtonEventArgs e)
    {
        inkPresenterSample.CaptureMouse();

        //get mouse position and add first point to a new line to be drawn
        var mousePosition = e.GetPosition(inkPresenterSample);
        var stylusStartPoint = new StylusPointCollection();
        stylusStartPoint.Add(new StylusPoint(mousePosition.X, mousePosition.Y));

        //set line's attributes, it real application this should be probably done outside this method
        var drawingAttributes = new System.Windows.Ink.DrawingAttributes();
        //IMPORTANT: semi-transparent color is used, so the opacity effect is visible
        drawingAttributes.Color = System.Windows.Media.Color.FromArgb(110, 0, 0, 0);
        drawingAttributes.Width = 10;

        //create a new stroke to be drawn
        newStroke = new System.Windows.Ink.Stroke(stylusStartPoint, drawingAttributes);
        newStroke.StylusPoints.Add(new StylusPoint(mousePosition.X, mousePosition.Y));

        //add reference to a new stroke to the InkPresenter control
        inkPresenterSample.Strokes.Add(newStroke);
    }

    private void inkPresenterSample_PreviewMouseUp(object sender, MouseButtonEventArgs e)
    {
        inkPresenterSample.ReleaseMouseCapture();

        if (newStroke != null)
        {
            newStroke = null;
        }
    }

    private void inkPresenterSample_PreviewMouseMove(object sender, MouseEventArgs e)
    {
        //if a stroke is currently drawn in the InkPresenter
        if (newStroke != null)
        {
            //add a new point to the stroke
            var mousePosition = e.GetPosition(inkPresenterSample);
            newStroke.StylusPoints.Add(new StylusPoint(mousePosition.X, mousePosition.Y));
        }
    } 
```

它似乎像你描述的那样工作，我可以看到线条的较暗部分，其中很少有重叠。

**更新**

建议解决方案中的重叠效果适用于多条重叠线，但如果单条线自身重叠则不起作用。如果你想让它在这种情况下也能工作，你可以尝试：

*   使用`Canvas`并在其上添加`Polyline`元素（**更新**：这似乎与建议的第一个解决方案一样工作，因此一条线重叠不会产生不透明效果）
*   take a look at drawing on `Image` element using `DrawingContext` described here, it may help: [Drawing with mouse causes gaps between pixels](https://stackoverflow.com/questions/8869668/drawing-with-mouse-causes-gaps-between-pixels/8869814#8869814)

# django - Django ModelForm ImageField

> ID：10822111
> 
> 赞同：4
> 
> 时间：2012-05-30T18:27:57.510
> 
> 标签：django, forms

我有一个模型和一个表单（forms.ModelForm），其中有一个 ImageField。该模型类似于：

```
class Business(models.Model):
    business_name = models.CharField(max_length=128)
    .
    .
    business_image = ImageField(
        max_length=128, 
        upload_to=upload_business_image_handler,
        height_field='business_image_height',
        width_field='business_image_width'
        )
    business_image_height = models.IntegerField(blank=True, null=True)
    business_image_width = models.IntegerField(blank=True, null=True)
    .
    . 
```

随附表格：

```
class BusinessForm(forms.ModelForm):
    def __init__(self, data=None, files=None, branch_list = None, country_list = None, *args, **kwargs):
        super(BusinessForm, self).__init__(data, *args, **kwargs)
        # create the MultipleChoiceField choice_list based on language
        self.fields['branch'].choices = branch_list
        self.fields['country'].choices = country_list
        self.postdata = data
        self.files = files

    business_name = forms.CharField(widget=forms.TextInput(attrs={'size':'50', 'class': 'address'}), required=True)

    #business_image = forms.ImageField(widget=forms.ClearableFileInput()) 
```

表单中的最后一行被注释掉，因为 forms.ClearableFileInput() 是 FileFields 和 ImageFields 的默认小部件。

现在，当使用此表单编辑现有记录时，模板中的图像如下所示：

```
Currently: <image_url>
Change: <browse_button> 
```

我想更改文本标签“当前”和“更改”，而不是显示 image_url 我想显示图像。

当然，我可以复制和修改在“site-packages/django/forms/widgets.py”中找到的“class ClearableFileInput(FileInput)”的代码，但我想知道这是否是实现此目的的方法。

任何帮助或建议表示赞赏。

现在我查看了'class ClearableFileInput(FileInput)'的代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T22:58:09.620

这是我对同一问题的解决方案。

```
from django.utils.safestring import mark_safe
from django.utils.html import escape, conditional_escape
from django.utils.encoding import force_unicode
from django.forms.widgets import ClearableFileInput, Input, CheckboxInput

class CustomClearableFileInput(ClearableFileInput):

    def render(self, name, value, attrs=None):
        substitutions = {
            #uncomment to get 'Currently'
            'initial_text': "", # self.initial_text, 
            'input_text': self.input_text,
            'clear_template': '',
            'clear_checkbox_label': self.clear_checkbox_label,
            }
        template = '%(input)s'
        substitutions['input'] = Input.render(self, name, value, attrs)

        if value and hasattr(value, "url"):
            template = self.template_with_initial
            substitutions['initial'] = ('<img src="%s" alt="%s"/>'
                                        % (escape(value.url),
                                           escape(force_unicode(value))))
            if not self.is_required:
                checkbox_name = self.clear_checkbox_name(name)
                checkbox_id = self.clear_checkbox_id(checkbox_name)
                substitutions['clear_checkbox_name'] = conditional_escape(checkbox_name)
                substitutions['clear_checkbox_id'] = conditional_escape(checkbox_id)
                substitutions['clear'] = CheckboxInput().render(checkbox_name, False, attrs={'id': checkbox_id})
                substitutions['clear_template'] = self.template_with_clear % substitutions

        return mark_safe(template % substitutions) 
```

然后只需使用扩展小部件：

```
business_image = forms.ImageField(widget=CustomClearableFileInput()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T18:38:37.630

我会把它放到模板表单中

```
{% if business.business_image %}
   <img src="{{ business.business_image.url }}" title="{{ business.business_name}}" />
{% endif %} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-21T08:48:19.073

这是我的 imageInput 版本，它显示图像并且不允许清除图像

只需在该字段具有的表单类中指定`widget=NonClearableImageInput()`

```
from django.forms.widgets import FileInput
from django.utils.html import conditional_escape
from django.utils.safestring import mark_safe

class NonClearableImageInput(FileInput):
    def render(self, name, value, attrs=None):
        template = '%(input)s'
        data = {'input': None, 'url': None}
        data['input'] = super(NonClearableImageInput, self).render(name, value, attrs)

        if hasattr(value, 'url'):
            data['url'] = conditional_escape(value.url)
            template = '%(input)s <img src="%(url)s">'

        return mark_safe(template % data) 
```

# vim - vim 映射噩梦

> ID：10822122
> 
> 赞同：1
> 
> 时间：2012-05-30T18:28:27.917
> 
> 标签：vim, macvim

我正在使用 MacVim，我正在尝试更改基本的默认键映射，但我失败得很惨。我不知道为什么这么复杂。这就是我想要做的：（请告诉我在我的 .gvimrc 中放什么）

*   将 Home 重新映射到 ^（在 imode 中使用并最终在 imode 中使用）
*   将 End 重新映射到 $（在 imode 中使用并在 imode 中结束）
*   将 Shift+anyArrowKey 重新映射到通常的选择内容（在 imode 中使用并最终在 imode 中使用）

基本上，我正在尝试为 macvim 提供常用的编辑功能。

请记住，首先需要进行某种取消映射。我已经尝试只添加映射，但它不起作用。

如果您可以粘贴一个我可以复制/粘贴到我的 .gvimrc 文件的部分，那就太好了。

这就是我的映射的样子：（来自运行：map）

```
 n  gx            <Plug>NetrwBrowseX
       <M-Down>      }
       <D-Down>    * <C-End>
       <M-Up>        {
       <D-Up>      * <C-Home>
       <M-Right>   * <C-Right>
       <D-Right>   * <End>
       <M-Left>    * <C-Left>
       <D-Left>    * <Home>
    n  <Plug>NetrwBrowseX * :call netrw#NetrwBrowseX(expand("<cWORD>"),0)<CR>
    v  <BS>          "-d
    v  <D-x>         "*d
    v  <D-c>         "*y
    v  <D-v>         "-d"*P
    n  <D-v>         "*P 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T19:54:48.010

你不应该这样做，而是学习 Vim：虽然你想要的很容易做到，但这也是**一个非常非常糟糕的主意**。

Vim 的很大一部分功能来自严格区分在*插入*模式下可以/应该做什么（插入文本）和在*正常*模式下可以/应该做什么（导航、拉拽、粘贴、删除……）。模态编辑一开始可能会很奇怪，但你很快就会习惯它，以后会发誓。这只是时间问题。

当我从 TextMate 切换到我意识到这是最适得其反的事情时，我已经完全按照您的要求完成了更多（尝试将所有 Vim 映射更改为 TM 映射）。

如果您真的不喜欢（或不想适应）模态编辑，那么有许多文本编辑器可以让您“正常”使用键盘*并*具有许多强大的功能。

也就是说，这里有一些指针：

```
:h key-notation
:h mapping 
```

而且您不需要任何取消映射。

# css - nivo滑块的定位

> ID：10822124
> 
> 赞同：2
> 
> 时间：2012-05-30T18:28:35.093
> 
> 标签：css, positioning, nivo-slider

[我在我的网站](http://www.popglitch.com)上更改了 Nivo 滑块和标题的大小，现在图像和滑块偏离中心并且偏左。我希望它以上面的导航栏为中心。有人可以帮助我吗？

目前，我有以下`CSS`滑块、图像和标题属性：

```
.nivoSlider {
  position:absolute;
  width:850px; 
  height:400px;  
  overflow:hidden;
}
.nivoSlider img {
  position:relative; 
  width:850px; 
  height:400px; 
  overflow:hidden; 
  top:0px; 
  display:none;
}
.nivoSlider a {
  border:0; 
  display:block;
}
.nivo-caption {
  position:absolute;  
  bottom:0; 
  background:#09dcc7; 
  padding:5px 5px 5px 5px; 
  z-index:8; 
  overflow:hidden;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T18:34:30.673

如果你只想让它居中，你可以`margin: 0 auto;`在滑块包装上使用：

**CSS**

```
#slider-wrapper-full {
    height: 400px;
    margin: 0 auto;      /* Add this line */
    overflow: hidden;
    padding-top: 10px;
    width: 850px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:44:30.717

当答案出现时，我正在尝试一种不同的不太优雅的方法。

在文件 style.css 中，搜索`#slider-wrapper-full`并替换

```
"padding-top:10px;" 
```

和

```
"padding: 10px 0px 0px 75px;" 
```

但是，正如@Zuul 所指出的那样，添加该行会更好，`margin: 0 auto;`它将使您对 nivo 滑块大小所做的其他更改保持居中。

# java - 是否有支持管理类加载器的 Java IoC 容器？

> ID：10822131
> 
> 赞同：1
> 
> 时间：2012-05-30T18:29:09.743
> 
> 标签：java, inversion-of-control, classloader, ioc-container

我正在寻找一种轻量级的 IoC 容器，它还允许我管理具有不同类路径的不同类加载器。然后可以在不同的类加载器/类路径中运行多个版本的代码，但都一起管理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:40:20.530

OSGi 可以**非常**轻量级，相信我！我已经看到它在 8 MB RAM 上运行 -[请参见此处](http://www.prosyst.com/media/prosyst_media/img_news/World%C2%B4s%20smallest%20OSGi%20solution%20-%20Technical%20Paper.pdf)

顺便说一句，根据规范，所有服务都是可选的，你可以去掉你不需要的一切——这就是 OSGi 的美妙之处，它是令人难以置信的模块化。

不同的类加载器当然没问题，反正每个包都有自己的类加载器；可以使用清单的语法详细控制依赖关系。

如果您想要 IoC 并且对经典的 BundleActivator 不满意，您可以使用 OSGi 声明式服务 - 请参阅 OSGi 规范中的编号 112。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T18:35:25.977

您可以查看 pico 容器[http://picocontainer.org](http://picocontainer.org)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T18:49:05.923

您可以将weld 或任何其他DI 框架与OSGI 一起使用。

如果你正在编写一个 web 应用程序，那么[jboss 现在](http://www.jboss.org/jbossas/osgi)无缝支持 OSGI 并且还提供了 WELD。

# javascript - 如果我有特定选项卡的 tabId，如何获取特定选项卡的窗口对象？

> ID：10822133
> 
> 赞同：6
> 
> 时间：2012-05-30T18:29:17.520
> 
> 标签：javascript, html, google-chrome, google-chrome-extension

我有一个选项卡的 tabId。我如何获得它的窗口对象？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T23:17:09.123

在 chrome 扩展中看到的 window 对象：

```
 chrome.tabs.get(YOUR_TAB_ID_HERE, function(tab){
      chrome.windows.get(tab.windowId, function(win){ 
           console.log(win); // THIS IS THE WINDOW OBJECT
      });
 }); 
```

但是，如果您需要特定选项卡中的 javascript 运行时，则需要使用内容脚本，这里有更好的解释：

[http://code.google.com/chrome/extensions/content_scripts.html](http://code.google.com/chrome/extensions/content_scripts.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-31T11:49:05.733

要从 tabId 获取 DOM 窗口对象，您应该在该选项卡中插入内容脚本：

```
chrome.tabs.executeScript(tabId, {code:'var w = window; console.log(w);'}); 
```

[https://developer.chrome.com/extensions/tabs#method-executeScript](https://developer.chrome.com/extensions/tabs#method-executeScript)

也许您需要与您的背景页面进行通信：

[https://developer.chrome.com/extensions/content_scripts#host-page-communication](https://developer.chrome.com/extensions/content_scripts#host-page-communication)

# vb.net - 未显示以供服务参考的类型

> ID：10822137
> 
> 赞同：8
> 
> 时间：2012-05-30T18:29:47.463
> 
> 标签：vb.net, web-services, web

我正在将我们的一个应用程序与第三方提供商的网络服务集成。我已经添加了服务引用，但是当我将 var 作为它们的类型之一时，类型并没有在 Intellisense 中显示给我。

我在 Windows 7 上使用 VB.NET/VS 2008 和在本地 IIS 上运行的 2.0 Framework 网站。我在我的代码隐藏中导入了 System.Web 和 System.Web.Service。我还确保选中“始终生成消息合同”复选框。

任何人都知道我需要做什么才能让类型出现？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T20:19:59.410

好吧，我终于找到了解决方案。首先，我必须将我的代码库从 2.0 更新到 3.5 才能让“添加服务引用”选项甚至出现在 VS 2008 或 2010 中。一旦我这样做了，我注意到 svcinfo 文件基本上是空的（只有结束标签）并且没有创建迪斯科文件。

我在网上找到了一篇文章，其中一位 Windows Phone 7 开发人员报告了同样的问题。那里建议取消选中“添加服务引用”对话框的“高级”页面上的“在引用的程序集中重用类型”选项。一旦我这样做了，一切都像魅力一样。

希望这些信息会在某些时候使其他人受益。

SteveDog，感谢所有的想法和帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:35:49.620

您需要导入由 Web 服务引用生成的命名空间。例如，如果您的客户项目的命名空间是`MyClient`并且您的网络引用被称为`MyWebReference`，您需要导入：

```
Imports MyClient.MyWebReference 
```

# c# - 如何使用 GeomFromGML 将转换后的 xml 数据保存到 sql

> ID：10822138
> 
> 赞同：0
> 
> 时间：2012-05-30T18:29:48.803
> 
> 标签：c#, xml, sql-server-2008

我已经使用 XSLT 成功地将 KML 文件转换为 GML 文件，现在我需要将 GML 数据保存到我的 SQL 数据库中的几何列中。不知道在这段代码后面放什么：

```
var doc = new XmlDocument();
var fileName = Path.GetFileName(Polygon.FileName);
var path = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName);
Polygon.SaveAs(path);
doc.Load(path);
var result = new XmlActionResult();
result.Document = doc;
result.TransformSource = Server.MapPath("~/App_Data/XSL/kml2gml.xsl");
return result; 
```

如果可以的话请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:58:32.370

一旦你有了 xml，你就可以像任何其他插入一样将它写入数据库。SQL Server 具有 xml 数据类型。使用它将您的 xml 存储在单个列中，这是最好的。但是，如果您需要分解层次结构并将其存储在不同的表中，那也很简单。

```
 static void Main(string[] args)
    {
        var doc = new XmlDocument();
        var fileName = @"C:\test.xml";
        doc.Load(fileName);
        var connection = new SqlConnection(@"Data Source=MyServer; 
             Initial Catalog=MyDatabase; Integrated Security=SSPI");
        connection.Open();
        var command = new SqlCommand(
             "INSERT INTO dbo.Shapes (shape, desc) VALUES (@a, @b)", connection);
        command.CommandType = CommandType.Text;
        command.Parameters.Add("@a", SqlDbType.Xml);
        command.Parameters["@a"].Value = doc.OuterXml;
        command.Parameters.Add("@b", SqlDbType.VarChar);
        command.Parameters["@b"].Value = doc.InnerXml;
        command.ExecuteNonQuery();
        connection.Close();
    } 
```

# r - 在 R 中建立稀疏矩阵的更快方法？

> ID：10822150
> 
> 赞同：4
> 
> 时间：2012-05-30T18:30:32.987
> 
> 标签：r

我正在尝试在 R 中设置一种特定类型的稀疏矩阵。以下代码给出了我想要的结果，但速度非常慢：

```
library(Matrix)

f <- function(x){

  out <- rbind(head(x, -1), tail(x, -1))
  out <- bdiag(split(out, col(out)))
  return(out)

}#END f 

x <- outer(1:250, (1:5)/10, '+')
do.call(rBind, apply(x, 1, f)) 
```

在我正在进行的模拟研究中，我需要这样做数千次，所以这是一个非常严重的瓶颈。在这种情况下，Rprof() 输出非常混乱。我很感激您对如何加快速度提出的任何建议。

感谢您的时间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T19:36:46.503

这段代码运行得更快（<0.01 秒，而我的机器上是 3.36 秒），因为它避免了所有这些极其缓慢`rBind`的操作。关键是首先准备非零单元格的行索引、列索引和值。然后一次调用`sparseMatrix(i,j,x)`将构造稀疏矩阵，甚至不需要调用`rBind()`.

```
library(Matrix)
A <- 1:250
B <- (1:5)/10
x <- outer(A, B, '+')

f2 <- function(x){
    n <- length(x)
    rep(x, each=2)[-c(1, 2*n)]
}

system.time({
  val <- as.vector(apply(x,1,f2))
  n <- length(val)
  i <- seq_len(n)
  j <- rep(rep(seq_len(length(B)-1), each=2), length.out=n)
  outVectorized <- sparseMatrix(i = i, j = j, x = val)
})
#    user  system elapsed 
#       0       0       0 
```

只是为了表明结果是相同的：

```
## Your approach
f <- function(x){
    out <- rbind(head(x, -1), tail(x, -1))
    out <- bdiag(split(out, col(out)))
    return(out)
}

system.time(outRBinded <- do.call(rBind, apply(x, 1, f)))
#    user  system elapsed 
#    3.36    0.00    3.36 

identical(outVectorized, outRBinded)
# [1] TRUE 
```

# ruby - 初始化被包含的模块覆盖时调用父构造函数

> ID：10822151
> 
> 赞同：1
> 
> 时间：2012-05-30T18:30:40.810
> 
> 标签：ruby, mongodb, mongoid

我有一个类层次结构如下：

```
class Tree
  def initialize(id, value)
    @id, @value = id, value
  end
end

class Entity < Tree

  include Mongoid::Document

  def initialize(id, value)
    # Do some stuff...
    super(id, value)
  end

end 
```

但是，在方法`super`内部调用会调用位于 中的方法，而不是父类中的方法。`Entity#initialize``initialize``Mongoid::Document``Tree`

包含模块后，如何`Tree#initialize`从 的主体调用该方法？`Entity#initialize``Mongoid::Document`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T19:41:45.563

这就是 Ruby 的工作原理。当您包含一个 Module 时，ruby 隐式创建一个匿名类并将其放在方法查找队列中的 current 之上。

呼叫`Entity.ancestors`也会显示`Mongoid::Document`在列表中。

我可以推荐一本好书：`Metaprogramming Ruby`by`Paolo Perotta`

另外这里是[一个类似主题的论坛帖子，解释了超级东西](http://railsforum.com/viewtopic.php?pid=25310#p25310)

更新：

如果避免调用模块构造函数是你想要的，这是一个可能的技巧

```
class Entity < Tree

  def initialize(id, value)
    # Do some stuff...
    # initialize first
    super(id, value)
    # and after that - extend
    extend Mongoid::Document
  end

end 
```

此方法未在模块上运行 self.included。如果您需要保留此功能，但仍不运行模块的初始化程序，则可以在 init 中使用 eigenclass：

```
class Entity < Tree

  def initialize(id, value)
    # Do some stuff...
    # initialize first
    super(id, value)
    # and after that - include into eigenclass
    class << self
      include Mongoid::Document
    end
  end

end 
```

# r - 在 asreml-R 中拟合模型时隐藏信息

> ID：10822153
> 
> 赞同：1
> 
> 时间：2012-05-30T18:30:51.793
> 
> 标签：r, asreml

我正在使用`asreml-R`包进行分析。每当我存储一个拟合模型对象时`asreml-R`，都会提供一些我想隐藏的额外信息。请参阅以下代码和信息：

```
library(asreml)
dat <- data.frame(y=rnorm(20),x=seq(1,20))
ex.asr <- asreml(y ~ x, data=dat)

asreml(): 3.0.1 Library: 3.01gl IA32  Run: Wed May 30 13:26:44 2012

     LogLik         S2      DF
    -11.3850      0.7691    18  13:26:44
    -11.3850      0.7691    18  13:26:44

Finished on: Wed May 30 13:26:44 2012

LogLikelihood Converged 
```

如果您帮助隐藏这些额外信息，我将不胜感激。请记住，这 `asreml-R`不是开源的。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-26T21:34:07.833

use asreml's controlling stuff - the `asreml.control()` function control many aspects of asreml call, you can provide its arguments directly to asreml call, in you case you want to have `trace=F`, so e.g.

```
library(asreml)
dat <- data.frame(y=rnorm(20), x=seq(1,20))
ex.asr <- asreml(y ~ x, data=dat, trace=F) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T18:44:00.450

如果（看起来）那是正在被`print()`编辑的东西，您可以使用`capture.output()`它来将其接收到临时文件。

这是一个例子：

```
plot(rnorm(99))

capture.output({
    lapply(1:4, function(X) abline(v=20*X))
}, file = tempfile())

## Here's the output that was sunk by `capture.output()`
## (wrapping the call in `suppressMessages()` won't get rid of those "NULL"s)
lapply(1:4, function(X) abline(v=20*x))
[[1]]
NULL

[[2]]
NULL

[[3]]
NULL

[[4]]
NULL 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T18:44:14.597

如果`asreml-R`设计得很好，那么`suppressMessages()`围绕命令应该可以工作。否则我会建议

```
sink("junk.txt")
## asreml command
sink() 
```

# python - 动态更改 __slots__

> ID：10822154
> 
> 赞同：3
> 
> 时间：2012-05-30T18:31:00.770
> 
> 标签：python, class, dictionary

我正在研究一个需要通过注入来赋予其`__dict__`属性的类，如下所示：`__init__`

```
class Torrent(Model):
    def __init__(self, d):
        super(Torrent, self).__init__('torrents')
        self.__dict__ = d 
```

并且需要确保不要更改对象的结构，因为实例最终会出现在 NOSQL 数据库中。我认为这`__slots__`可能会有所帮助，但我需要动态定义它。

有没有办法在没有元类的情况下使它成为可能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T18:41:51.803

使用工厂函数：

```
def GetTorrentClass(slots_iterable):
    class Torrent(object):
        __slots__ = slots_iterable
    return Torrent 
```

请注意，为了使用插槽：

*   `slots_iterable`必须是字符串的可迭代
*   你的课必须是新式的
*   您的类不能继承实现的类`__dict__`（即`__slots__`不仅如此）

现在，您说您“需要确保不更改对象的结构”， using`__slots__`不是解决问题的唯一（也可能不是最好的）解决方案：使用插槽会使您的类更难在代码中使用。

相反，您可以执行以下操作：

```
class Torrent(object):
    def __init__(self, fields):
        self.fields = fields #Fields could be ('field1', 'field2')

    def save(self):
        for field in self.fields:
            self.store_to_db(field, getattr(self, field)) 
```

这样，您可以确定只有您的实际字段会保存到您的数据库中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T18:42:05.210

这应该可以实现您需要的魔法。

```
def construct_slots(slots):
    class SlotClass(object):
        __slots__ = slots
        def __init__(self, *args, **kwargs):
            for slot, arg in zip(SlotClass.__slots__, args):
                setattr(self, slot, arg)
            for key, value in kwargs:
                setattr(self, key, value)
    return SlotClass

Torrent = construct_slots(("a",'b','c'))
a = Torrent(1,2,3)
print a.a
print a.b 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T18:41:40.017

`__slots__`并且`__dict__`通常是替代品。在这两种情况下，元类都不会帮助您为实例动态创建它们，除非自定义元类可以放宽对分配的限制`__dict__`（Django 已经这样做了）。

# java - Java 分组图像

> ID：10822157
> 
> 赞同：-2
> 
> 时间：2012-05-30T18:31:29.687
> 
> 标签：java

我正在开发一款游戏，有人向我提出了一个我无法解决的挑战，所以我现在正在向堆栈溢出社区寻求帮助。我正在尝试创建一个类似于坦克的游戏。我目前有两个基于两行代码移动的图像（坦克主体和坦克臂）。他们挑战我为坦克创建一个单独的类，我上传两个图像，但只需要将它绘制到我的游戏面板上一次。也就是说，我将在课堂上拥有坦克身体和坦克手臂，并且可以在那里对它们做任何我需要做的事情，但是当我将它绘制到我的游戏屏幕面板上时，我只需要写一行简单地利用该类的代码。

例如：

```
g.drawImage(tank1, nX1, nY1, null) 
```

而不是：

```
g.drawImage(tank1, nX1, nY1, null)
g.drawImage(tank1, nX1, nY1, null) 
```

任何有关做什么的链接或想法将不胜感激。示例代码会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:40:06.780

答案是微不足道的。让对象包含两个图像。让对象的“draw”函数依次为每个图像调用 g.drawImage 函数。完毕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T00:34:15.457

我认为这就是 Ben 所暗示的，但我不太明白他们的回答，所以：

将两个部分绘制为一个`tankImage`。在游戏中，画一个`tankImage`。

# c - 位编程

> ID：10822158
> 
> 赞同：3
> 
> 时间：2012-05-30T18:31:32.610
> 
> 标签：c, math

是否有任何针对不同数字的通用方法或特定方法，通过它们我们可以知道`n`其二进制表示中的给定数字可以被另一个数字整除`m`？

例如：

```
n=23 (00010111)
m=3 
```

如果设置在偶数和奇数位置的位数之差可被 3 整除，则该数字可被 3 整除。

*   位在偶数位置设置为 1 = 1
*   位在奇数位置设置为 1 = 3

所以`3 - 1 = 2`不能被 3 整除，因此 23 不能被 3 整除。

我想问是否有其他方法可以找到一个数字是否可以被 2、4、5、6、7 等整除？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T19:00:50.613

您无法为所有这些都找到一个简单的规则。以下是如何创建此类规则的想法。

让我们先谈谈以 10 为基数。想象一下这个数字`abcdefg`。这个数字实际上是：

```
g + 10*f + 10^2*e + 10^3*d + 10^4*c + 10^5*b + 10^6*a 
```

正如我们所知，`(a+b)%c`等于`(a%c+b%c)%c`和`(a*b)%c`等于`((a%c)*(b%c))%c`（您可以更好地了解这些具有已知[一致性](http://en.wikipedia.org/wiki/Modular_arithmetic)的属性）

因此，让我们通过以下方式查看我们的数字的其余部分：

*   2

    ```
    (g + 10*f + 10^2*e + 10^3*d + 10^4*c + 10^5*b + 10^6*a)%2 =
    (g%2 + 0 + 0 + 0 + 0 + 0 + 0)%2 =
    g%2 
    ```

    因此，一个数可以被 2 整除，如果它的最后一位数字可以被 2 整除

*   3

    ```
    (g + 10*f + 10^2*e + 10^3*d + 10^4*c + 10^5*b + 10^6*a)%3 =
    (g%3 + f%3 + e%3 + d%3 + c%3 + b%3 + a%3)%3 =
    ... repeat operation for this number 
    ```

    因此，一个数可以被3整除，它的数字之和可以被3整除

*   4

    ```
    (g + 10*f + 10^2*e + 10^3*d + 10^4*c + 10^5*b + 10^6*a)%4 =
    (g%4 + 2*f%4 + 0 + 0 + 0 + 0 + 0)%4 =
    ... repeat if bigger than 4 
    ```

    因此，一个数可以被 4 整除，如果它的最后一位数字加上它的前一位数字的两倍可以被 4 整除

*   5

    ```
    (g + 10*f + 10^2*e + 10^3*d + 10^4*c + 10^5*b + 10^6*a)%5 =
    (g%5 + 0 + 0 + 0 + 0 + 0 + 0)%5 =
    g%5 
    ```

    因此，一个数可以被 5 整除，如果它的最后一位是 0 或 5

*   ...

*   11

    ```
    (g + 10*f + 10^2*e + 10^3*d + 10^4*c + 10^5*b + 10^6*a)%11 =
    (g%11 - f%11 + e%11 - d%11 + c%11 - b%11 + a%11)%11 =
    (g - f + e - d + c - b + a)%11 =
    ... repeat operation for this number 
    ```

    （注意 10%11 可以看作 -1（它们是全等的））

*   等等！

如您所见，以 10 为底，11 的余数给出的公式与以 2 为底的 3 的余数相同。这不是巧合。

现在让我们假设我们的数字以 2 为底。因此`abcdefg`计算结果为：

```
g + 2*f + 2^2*e + 2^3*d + 2^4*c + 2^5*b + 2^6*a 
```

求公式的方法同上。唯一让这里变得更简单的是，如果除数大于 1，那么除数的所有数字的余数就是数字本身（因为数字只有 0 或 1），所以所有的`digit%divisor`s 都变成了简单的`digit`。这根本不会改变方法论。

让我们看看我们的数字的其余部分

*   2

    ```
    (g + 2*f + 2^2*e + 2^3*d + 2^4*c + 2^5*b + 2^6*a)%2 =
    (g + 0 + 0 + 0 + 0 + 0 + 0)%2 =
    g 
    ```

    因此，一个数可以被 2 整除，如果它的最后一位是 0

*   3

    ```
    (g + 2*f + 2^2*e + 2^3*d + 2^4*c + 2^5*b + 2^6*a)%3 =
    (g - f + e - d + c - b + a)%3 =
    ... repeat operation for this number 
    ```

*   4

    ```
    (g + 2*f + 2^2*e + 2^3*d + 2^4*c + 2^5*b + 2^6*a)%4 =
    (g + 2*f + 0 + 0 + 0 + 0 + 0)%4 = 
    ```

    因此，一个数可以被 4 整除，如果它的最后一位数字加上它的前一位数字的两倍可以被 4 整除

*   5

    ```
    (g + 2*f + 2^2*e + 2^3*d + 2^4*c + 2^5*b + 2^6*a)%5 =
    (g + 2*f - e - 2*d + c + 2*b - a)%5 =
    ... repeat operation for this number 
    ```

*   等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:43:08.160

由于没有一般方法可以确定一个数字是否可以被另一个数字整除（例如，请参见[此处](http://en.wikipedia.org/wiki/Divisibility_rule#Divisibility_rules_for_numbers_1.E2.80.9320)），因此显然无法以二进制表示形式找出它。

# php - 在 if 语句中重定向

> ID：10822159
> 
> 赞同：0
> 
> 时间：2012-05-30T18:31:56.713
> 
> 标签：php, codeigniter

我试图弄清楚如何在页面加载 5 秒后仅当 if ($this->usersmodel->activateUser($userID, $registrationKey)) 返回 TRUE 时才将该页面重定向到某个页面。我不能使用 jquery，因为问题是如果它返回 false 那么我不希望它重定向。

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); 

class Activate extends CI_Controller { 

public function __construct()
{
    parent::__construct();
    $this->load->model('users/usersmodel');
}

public function index()
{
    //Config Defaults Start
    $msgBoxMsgs = array();//msgType = dl, info, warn, note, msg
    $cssPageAddons = '';//If you have extra CSS for this view append it here
    $jsPageAddons =  '<script src='.base_url().'assets/peach/js/validate/activate.js></script>';//If you have extra JS for this view append it here
    $metaAddons = '';//Sometimes there is a need for additional Meta Data such in the case of Facebook addon's
    $siteTitle = '';//alter only if you need something other than the default for this view.
    //Config Defaults Start

    //examples of how to use the message box system (css not included).
    //$msgBoxMsgs[] = array('msgType' => 'dl', 'theMsg' => 'This is a Blank Message Box...');

    /**********************************************************Your Coding Logic Here, Start*/

    $userID     = $this->uri->segment(2);
    $registrationKey    = $this->uri->segment(3);

    if ( ((!is_numeric($userID)) || (is_null($userID))) || ((is_null($registrationKey)) || (!preg_match('/^[A-Za-z0-9]+$/', $registrationKey))) ) 
    {
        $bodyContent = $this->config->item('defaultTemplate') ."/404";//which view file  
    } 
    else 
    {
        $registrationDetails = $this->usersmodel->getRegistrationDetails($userID);
        if (!is_null($registrationDetails))
        {
            if ($this->usersmodel->activateUser($userID, $registrationKey))
            {
                $message = 'User was activated successfully! You may now login!';   
                $bodyContent = $this->config->item('defaultTemplate') ."/usermanagement/forms/activate";//which view file      
            }
            else
            {
                $message = 'User was not activated successfully! Please try again with the right credentials!';  
                $bodyContent = $this->config->item('defaultTemplate') ."/usermanagement/forms/activate";//which view file  

            }
            $this->data['message'] = $message;                                
        }
        else
        {
            $bodyContent = $this->config->item('defaultTemplate') ."/404";  
        }
    }

    $bodyType = "full";//type of template   

    /***********************************************************Your Coding Logic Here, End*/

    //Double checks if any default variables have been changed, Start.
    //If msgBoxMsgs array has anything in it, if so displays it in view, else does nothing.      
    if(count($msgBoxMsgs) !== 0)
    {
        $msgBoxes = $this->msgboxes->buildMsgBoxesOutput(array('display' => 'show', 'msgs' =>$msgBoxMsgs));
    }
    else
    {
        $msgBoxes = array('display' => 'none');
    }

    if($siteTitle == '')
    {
        $siteTitle = $this->metatags->SiteTitle(); //reads 
    }

    //Double checks if any default variables have been changed, End.

    $this->data['msgBoxes'] = $msgBoxes;
    $this->data['cssPageAddons'] = $cssPageAddons;//if there is any additional CSS to add from above Variable this will send it to the view.
    $this->data['jsPageAddons'] = $jsPageAddons;//if there is any addictional JS to add from the above variable this will send it to the view.
    $this->data['siteTitle'] = $siteTitle;//defaults can be changed via models/metatags.php
    $this->data['bodyType'] = $bodyType;
    $this->data['bodyContent'] = $bodyContent;
    $this->load->view($this->config->item('defaultTemplate') .'/usermanagement/index', $this->data);
}

}

/* End of file activate.php */ 
/* Location: ./application/controllers/activate.php */ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T18:37:34.427

2 种方式.. 一种您可以使用 jquery/javascript 和 post/get 来通过 JavaScript 完成某些事情，如果发布项目时返回 true，那么您就可以

```
setInterval(function(){window.location = 'http://urlYouWannaGoto.com/';}, 3000); 
```

另一个，如果您希望仅使用 php 路线并且也应该与 codeigniter 一起使用。如果您的情况属实，则将标头推出。

```
header('Refresh: 3; url=http://urlYouWannaGoto.com/'); 
```

就 PHP 路由而言，您还必须确保在其他任何内容之前输出标头，这样它才能真正起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:36:19.987

您可能可以通过设置刷新标题来实现。

`header('refresh:5; url=some_url')`

但我不喜欢这种解决方案。

编辑：

我只是查看了 CodeIgniter *redirect()*的来源。

```
if ( ! function_exists('redirect'))
{
  function redirect($uri = '', $method = 'location', $http_response_code = 302)
  {
    if ( ! preg_match('#^https?://#i', $uri))
    {
      $uri = site_url($uri);
    }

    switch($method)
    {
      case 'refresh' : header("Refresh:0;url=".$uri);
        break;
      default : header("Location: ".$uri, TRUE, $http_response_code);
        break;
    }
    exit;
  }
} 
```

在实践中，他们执行以下操作：

```
header("Refresh:0;url=".$uri);
exit; 
```

那么以下内容呢：

```
header("Refresh:5;url=".'your_path');
exit; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T18:36:48.987

在我看来你可以测试这个条件是否为真...如果 ($this->usersmodel->activateUser($userID, $registrationKey)) 返回 TRUE...如果为 TRUE，则初始化一个 5 秒的计时器 IF FALSE 返回错误的...

# php - 无法访问控制器上的登录过程功能

> ID：10822164
> 
> 赞同：0
> 
> 时间：2012-05-30T18:32:42.947
> 
> 标签：php, html, codeigniter

我在 login.php 控制器中创建了一个简单的 process_login 函数。代码：

```
<?php

Class Login extends Controller {

var $title = 'Login';

function __construct() {
    parent::__construct();
    $this->load->model('Login_Model');
}

function index() {
    $profile['_profile'] = $this->xProfile_Model->GetProfile();
    $this->load->view('login', array('title' => $this->title, '_profile' => $profile['_profile']));
}

function process_form() {
    $ret['command'] = "login process";
    if($this->input->post('username') == 'admin' && md5($this->input->post('pwd')) == 'e6d8b61d43b5a1c5e4727e92351681f6') {
        //EMERGENCY ONLY
        $data['id'] = '1';
        $data['name'] = 'admin';
        $data['group_id'] = '1';
        $this->session->set_userdata($data);
        $ret['msg'] = $this->lang->line('msg_success') . ', ' . $this->lang->line('msg_please_wait');
        $ret['status'] = "success";
    } 
```

和登录视图：

```
<form method="post" id="signin" action="<?php echo site_url('login/process_form')?>">
  <label for="username">Username</label>
  <input id="username" name="username" value="" class="required" tabindex="4" type="text" onkeypress="focusNext('pwd', 'login', this, event)" />
  </p>
  <p>
    <label for="password">Password</label>
    <input id="pwd" name="pwd" value="" class="required" tabindex="5" type="password">
  </p>
  <p class="clear"></p>
  <a href="#" class="forgot" style="display:none;" id="resend_password_link">Lupa password?</a>
  <p class="remember">
    <input id="signin_submit" value="Login" tabindex="6" type="submit"/>
    <input id="cancel_submit" value="Batal" tabindex="7" type="button"/>
    <input id="batal" value="TES" tabindex="7" type="button" onclick="<?php site_url('login/tes')?>"/>

  </p>
</form> 
```

当我按下登录按钮时，那里什么也没有发生。这段代码有什么问题？

我试图采取行动：

```
site_url('login/process_form'),site_url('login.php/process_form'),base_url;('process_form') 
```

但它仍然无法正常工作！

请帮帮我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:53:07.437

您没有在`process_form`函数中加载视图，也没有重定向到实际加载内容的页面。

此外，如果您的 if 语句的条件不满足，它现在的编写方式不应该做任何事情，实际上该函数没有关闭。

最后，html中有错误

1.  没有 html 输入类型的按钮，它的正确语法是

    `<button id="batal" tabindex="7">TES</button>`

此外，onclick 不正确，这可能是您的表单未提交的原因。现在它只会在`onclick="someurl..."`您需要提交表单时呈现。

# debugging - 如何在 Eclipse 内存视图中查看浮点数？

> ID：10822165
> 
> 赞同：0
> 
> 时间：2012-05-30T18:32:48.843
> 
> 标签：debugging, floating-point, eclipse-cdt

在 Eclipse CDT 中，我们有 Memory 视图，它允许检查内存的内容。但是，似乎可用的数字格式仅限于整数类型。有没有办法在内存视图中查看浮点数？

在表达式视图中，我可以`*((float *) (some-address))`将内容查看为浮点数，但这仅适用于少数内存位置，并且我需要查看数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T05:08:13.330

您是否尝试过“变量”视图？还要检查您是否启用了漂亮的打印。请参阅[http://wiki.eclipse.org/CDT/User/FAQ#How_can_I_inspect_the_contents_of_STL_containers.3F](http://wiki.eclipse.org/CDT/User/FAQ#How_can_I_inspect_the_contents_of_STL_containers.3F)

# windows - 当其中一个文件出现错误时，如何获取特定 Mercurial 修订版的内容？

> ID：10822169
> 
> 赞同：1
> 
> 时间：2012-05-30T18:32:55.590
> 
> 标签：windows, macos, version-control, mercurial, revision

所以我一直在与 Mercurial 协调我办公室的一些源代码。

长话短说，看起来我做错了什么，搞砸了，在一些修改中丢失了大量文件

无论如何，一些调查工作帮助我深入了解哪个版本出了问题，希望我能从中恢复一些文件。问题是由于错误，我似乎无法提取该特定修订：

```
C:\sourcefolder>hg update -r 147
abort: case-folding collision between Files/someStupidFile.png and Files/SomeStupidFile.png 
```

这个项目是在一台 Windows 机器和一台 Mac 上进行协调的，所以再加上一些粗心大意导致了外壳折叠问题。

我知道案例折叠问题，并且我知道如何解决它们 - 但这只会创建一个*新*的修订版，其中的问题是固定的。我不想要那个。在这种情况下，我想要**修订版 147 中的所有其他文件**。

我如何告诉 Mercurial“从 147 获取所有内容，忽略任何损坏的文件”？

我知道你可以得到一个文件列表，我曾经做过一次尝试构建一个批处理文件来获取我需要的一组文件，但我认为必须*有*一些更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T12:44:59.507

你可以只生成一个 tarball `hg archive`。

# php - php。写入文件

> ID：10822170
> 
> 赞同：0
> 
> 时间：2012-05-30T18:32:57.080
> 
> 标签：php

我正在学习php。我想将字符串写入文件，但没有任何反应。我该如何调试它？我有使用python的经验。在那里我可以使用终端来尝试小代码片段，但我不知道如何检查 php 中的代码。

```
$myFile = "testFile.txt";
$fh = fopen($myFile, 'w');
$stringData = "Bobby Bopper\n";
$myvar = fwrite($fh, $stringData);
$stringData = "Tracy Tanner\n";
fwrite($fh, $stringData);
fclose($fh); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T18:34:36.083

除非您真的需要使用文件处理程序，否则请执行以下操作：

```
$myFile = "testFile.txt";
$stringData = "Bobby Bopper\nTracy Tanner\n";
file_put_contents($myFile,$stringData); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T18:38:38.440

在 php 中调试总是从打开错误报告开始

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', true);

$myFile = "testFile.txt";
$fh = fopen($myFile, 'w');
$stringData = "Bobby Bopper\n";
$myvar = fwrite($fh, $stringData);
$stringData = "Tracy Tanner\n";
fwrite($fh, $stringData);
fclose($fh); 
```

您现在很有可能会看到一条描述性的错误消息。谷歌搜索 php 错误消息通常很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T18:43:52.007

这看起来像正确的代码。尝试检查以确保您拥有正确的文件路径。一个简单的方法是

```
$myFile = "testFile.txt";
$fh = fopen($myFile, 'w');
$stringData = "Tracy Tanner\n";
fwrite($fh, $stringData);
fclose($fh);

$fh = fopen($myFile, 'r');
$value = fgets($fh);
echo $value;
fclose($fh); 
```

# yesod - 解析 JSON 帖子

> ID：10822171
> 
> 赞同：3
> 
> 时间：2012-05-30T18:32:59.343
> 
> 标签：yesod

我有以下代码：

```
data Friend = Friend
              { friend_name :: Text
              , friend_inTwitter :: Bool
              , friend_twitterName :: Maybe Text
              }
$(deriveJSON (drop 6) ''Friend) 
```

这段 JSON 被发布到一个处理程序，我很难得到它。我尝试了不同的东西，但让我把其中一个放在这里以产生建议：

```
postTestR :: Handler RepPlain
postTestR = do
value <- parseJsonBody_
return $ RepPlain $ friend_name value 
```

这不起作用，我可以看到类型不匹配，但我不确定用什么替换它。我还想看看如何解析以 JSON 形式发布的好友列表。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T19:46:27.587

好吧，事实证明，我需要在其中添加一个“toContent”调用以将文本转换为内容。这是一段有效的代码：

```
data Person = Person
              { person_firstName :: Text
              , person_lastName :: Text
              , person_fullName :: Text
              , person_friends :: [Friend]
              }

data Friend = Friend
              { friend_name :: Text
              , friend_inTwitter :: Bool
              , friend_twitterName :: Text
              }

$(deriveJSON (drop 7) ''Person)              
$(deriveJSON (drop 7) ''Friend)   

postKnockoutR :: Handler RepPlain
postKnockoutR = do
  value <- parseJsonBody_
  let (f:fs) = person_friends value
  return $ RepPlain $ toContent $ friend_name f 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:55:29.017

我不是 Yesod 专家，但是如果您查看 的返回类型`parseJsonBody_`，您会发现它是`FromJSON a => GHandler sub master a`，而不仅仅是普通的`FromJSON a => a`。这是有道理的：您无法在请求可访问的 HTTP 上下文之外解析请求正文，并且由于 HTTP 上下文是作为 monad 实现的，因此您必须编写 monadic 代码来处理它。

因此，您可能希望从 Handler monad 中提取 JSON 值，而不是赋值：

```
value <- parseJsonBody_ 
```

在您的代码中，`value`是 type `GHandler sub master Friend`，这不是您想要的。

# c - 堆栈内存是在运行时还是编译时分配的？

> ID：10822176
> 
> 赞同：13
> 
> 时间：2012-05-30T18:33:21.843
> 
> 标签：c, stack-memory

堆栈是在运行时还是编译时分配的？
例子：

```
void main()
{
    int x;
    scanf("%d", &x);
    int arr[x];
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T18:36:49.263

堆栈在运行时*分配*；但是，每个堆栈帧的布局是在编译时决定的，可变大小数组除外。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T18:39:22.807

它必须在运行时分配。考虑以下：

```
void a( void )
{
    int x;
}

void b( void )
{
    int y;
    a();
}

int main( void )
{
    a();
    b();
} 
```

a() 中堆栈本地 x 的地址在其两次调用之间将不同。正如blinkenlights 所指出的，每个函数的堆栈帧的布局在很大程度上是在编译时确定的，但该帧的位置是在运行时确定的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T18:38:31.703

你将如何分配编译时间？如果我在我的机器上编译代码但在你的机器上执行它，编译器如何能够为你机器上的堆栈预分配内存？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-30T18:38:43.630

[这](https://stackoverflow.com/questions/7372024/allocation-of-memory-c-compile-time-run-time)应该会有所帮助。堆栈内存是在运行时分配的。

请记住，它必须在运行时分配，因为编译器无法知道函数被调用了多少次，或者 while 循环执行了多少次，等等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T18:46:22.213

为了补充所有其他答案（在一般情况下是正确的），理论上有时可以在编译时分配堆栈（取决于您对“分配”的定义）。

具体来说，如果您的程序没有函数指针或递归，那么可以使用静态分析来确定所需的最大堆栈大小。事实上，一些嵌入式编译器正是这样做的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-30T18:35:06.580

堆栈总是在运行时分配，您需要堆栈来执行方法而不是编译。

[在相似的线路上](https://stackoverflow.com/questions/959746/when-is-memory-allocated-during-compilation)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-30T19:47:21.267

看看这篇很棒的文章

[http://duartes.org/gustavo/blog/post/anatomy-of-a-program-in-memory](http://duartes.org/gustavo/blog/post/anatomy-of-a-program-in-memory)

这是一篇很棒的文章，解释了程序存储器。您还可以查看同一作者关于 s 系统中的内存行为的其他文章，这将使您深入了解内存中的实际工作。

如果您想了解有关内存的所有信息，请尝试阅读 Ulrich Draper 的这篇论文 [http://www.akkadia.org/drepper/cpumemory.pdf](http://www.akkadia.org/drepper/cpumemory.pdf)

希望这可以帮助！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-30T18:35:43.820

当然堆栈是在运行时分配的。您需要堆栈内存来执行 code.ec

检查讨论 C 程序的内存布局的此[链接。](http://www.geeksforgeeks.org/archives/14268)

# php - ffmpeg for php 以及如何降低噪音

> ID：10822178
> 
> 赞同：0
> 
> 时间：2012-05-30T18:33:31.733
> 
> 标签：php, ffmpeg

我有一个音频 wav 文件（1-7 秒），需要减少噪音或只是降低背景音量，在 PHP 中可能使用 ffmpeg。同样在减少 bg 之后，是否可以在音频开始和结束时修剪声音的自由空间？

这些东西有什么办法吗？

# magento - Magento：在管理部分添加自定义排序选项

> ID：10822185
> 
> 赞同：1
> 
> 时间：2012-05-30T18:34:07.347
> 
> 标签：magento

如何在 magento 的后端添加自定义排序选项？我希望能够在后端按公司名称对客户进行排序。我根本不知道如何添加排序选项。

我找到了一个[聪明的方法来获取可以在这里找到的公司名称。](https://stackoverflow.com/questions/3673533/magento-view-company-name-instead-of-first-last-name)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T16:56:52.750

您必须覆盖客户网格才能执行此操作，以在 config.xml 上声明覆盖：

```
<global>
     <adminhtml>
            <rewrite>
                <customer_grid>Namespace_Module_Block_Rewrite_Customergrid</customer_grid>
            </rewrite>
     </adminhtml>
</global> 
```

然后你必须在 app/code/local/Namespace/Module/Block/Rewrite/Customergrid.php 上创建你的类：

```
<?php
class Namespace_Module_Block_Rewrite_Customergrid extends Mage_Adminhtml_Block_Customer_Grid
{

protected function _prepareCollection()
{
    $collection = Mage::getResourceModel('customer/customer_collection')
        ->addNameToSelect()
        ->addAttributeToSelect('email')
        ->addAttributeToSelect('created_at')
        ->addAttributeToSelect('group_id')
        ->joinAttribute('billing_postcode', 'customer_address/postcode', 'default_billing', null, 'left')
        ->joinAttribute('billing_city', 'customer_address/city', 'default_billing', null, 'left')
        ->joinAttribute('billing_telephone', 'customer_address/telephone', 'default_billing', null, 'left')
        ->joinAttribute('billing_region', 'customer_address/region', 'default_billing', null, 'left')
        ->joinAttribute('billing_country_id', 'customer_address/country_id', 'default_billing', null, 'left')
        ->joinAttribute('company', 'customer_address/company', 'default_billing', null, 'left');

    $this->setCollection($collection);

    return parent::_prepareCollection();
}

protected function _prepareColumns()
{
    $this->addColumn('entity_id', array(
        'header'    => Mage::helper('customer')->__('ID'),
        'width'     => '50px',
        'index'     => 'entity_id',
        'type'  => 'number',
    ));
    /*$this->addColumn('firstname', array(
        'header'    => Mage::helper('customer')->__('First Name'),
        'index'     => 'firstname'
    ));
    $this->addColumn('lastname', array(
        'header'    => Mage::helper('customer')->__('Last Name'),
        'index'     => 'lastname'
    ));*/
    $this->addColumn('name', array(
        'header'    => Mage::helper('customer')->__('Name'),
        'index'     => 'name'
    ));
    $this->addColumn('email', array(
        'header'    => Mage::helper('customer')->__('Email'),
        'width'     => '150',
        'index'     => 'email'
    ));

    $groups = Mage::getResourceModel('customer/group_collection')
        ->addFieldToFilter('customer_group_id', array('gt'=> 0))
        ->load()
        ->toOptionHash();

    $this->addColumn('group', array(
        'header'    =>  Mage::helper('customer')->__('Group'),
        'width'     =>  '100',
        'index'     =>  'group_id',
        'type'      =>  'options',
        'options'   =>  $groups,
    ));

    $this->addColumn('Telephone', array(
        'header'    => Mage::helper('customer')->__('Telephone'),
        'width'     => '100',
        'index'     => 'billing_telephone'
    ));

    $this->addColumn('billing_postcode', array(
        'header'    => Mage::helper('customer')->__('ZIP'),
        'width'     => '90',
        'index'     => 'billing_postcode',
    ));

    $this->addColumn('billing_country_id', array(
        'header'    => Mage::helper('customer')->__('Country'),
        'width'     => '100',
        'type'      => 'country',
        'index'     => 'billing_country_id',
    ));

    $this->addColumn('billing_region', array(
        'header'    => Mage::helper('customer')->__('State/Province'),
        'width'     => '100',
        'index'     => 'billing_region',
    ));

    $this->addColumn('customer_since', array(
        'header'    => Mage::helper('customer')->__('Customer Since'),
        'type'      => 'datetime',
        'align'     => 'center',
        'index'     => 'created_at',
        'gmtoffset' => true
    ));
        $this->addColumn('company', array(
        'header'    => Mage::helper('customer')->__('Company'),
        'width'     => '150px',
        'index'     => 'company',
    ));

    if (!Mage::app()->isSingleStoreMode()) {
        $this->addColumn('website_id', array(
            'header'    => Mage::helper('customer')->__('Website'),
            'align'     => 'center',
            'width'     => '80px',
            'type'      => 'options',
            'options'   => Mage::getSingleton('adminhtml/system_store')->getWebsiteOptionHash(true),
            'index'     => 'website_id',
        ));
    }

    $this->addColumn('action',
        array(
            'header'    =>  Mage::helper('customer')->__('Action'),
            'width'     => '100',
            'type'      => 'action',
            'getter'    => 'getId',
            'actions'   => array(
                array(
                    'caption'   => Mage::helper('customer')->__('Edit'),
                    'url'       => array('base'=> '*/*/edit'),
                    'field'     => 'id'
                )
            ),
            'filter'    => false,
            'sortable'  => false,
            'index'     => 'stores',
            'is_system' => true,
    ));

    $this->addExportType('*/*/exportCsv', Mage::helper('customer')->__('CSV'));
    $this->addExportType('*/*/exportXml', Mage::helper('customer')->__('Excel XML'));
    return parent::_prepareColumns();
}
 } 
```

我们正在扩展 Mage_Adminhtml_Block_Customer_Grid 并复制函数 _prepareCollection() 和 _prepareColumns() 有两个关键区别。在 _prepareCollection() 我们添加：

```
->joinAttribute('company', 'customer_address/company', 'default_billing', null, 'left') 
```

要加载客户的公司，然后在 _prepareColumns() 我们添加您需要的列：

```
 $this->addColumn('company', array(
        'header'    => Mage::helper('customer')->__('Company'),
        'width'     => '150px',
        'index'     => 'company',
    )); 
```

# email - 在 SMTP 中，RCPT TO: 和 TO: 必须匹配吗？

> ID：10822190
> 
> 赞同：29
> 
> 时间：2012-05-30T18:34:41.100
> 
> 标签：email, smtp, protocols

发送电子邮件时，在 SMTP 对话期间通过 RCTP TO: 命令给出收件人列表。稍后，在 DATA 命令中，会指示诸如“To”、“Cc”、“bcc”之类的标头字段。此 RCPT TO 收件人列表是否必须与 DATA 命令中指示的标头匹配？

此外，如果收件人不在 RCPT TO 中，而是在电子邮件标头的 To 字段中，是否会发送给不在 RCPT TO 中的收件人？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-15T15:21:57.127

不，它们不必匹配。发送消息时，SMTP 服务器（又名消息传输代理或 MTA）正在创建一个所谓的 SMTP 信封，其中包含消息的收件人和发件人（请参阅[RFC5321](https://www.rfc-editor.org/rfc/rfc5321#section-2.3.1)）：

> > SMTP 传输一个邮件对象。一个邮件对象包含一个信封和内容。SMTP 信封作为一系列 SMTP 协议单元发送（在第 3 节中描述）。它由一个始发者地址（错误报告应发送到该地址）、一个或多个收件人地址和可选的协议扩展材料组成。

实际上，RCPT TO: 命令的收件人通常比消息的标头要多——一种常见的情况是使用“密件抄送”bcc：（参见[RFC5321](https://www.rfc-editor.org/rfc/rfc5321#section-2.3.1)）：

> 出于多种原因，未出现在邮件标题部分中的地址可能会出现在 SMTP 服务器的 RCPT 命令中。最常见的两个涉及使用邮寄地址作为“列表扩展器”（一个地址解析为多个地址）和“盲副本”的出现。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-23T15:06:38.360

> 此 RCPT TO 收件人列表是否必须与 DATA 命令中指示的标头匹配？

没有。

> 如果收件人不在 RCPT TO 中，但在电子邮件标头的 To 字段中，是否会发送给不在 RCPT TO 中的收件人？

RCPT。这是我自己的 SMTP 客户端的（修改后的）成绩单，我按照您的要求进行操作：

```
CLIENT: MAIL FROM:<myaccount@gmail.com>
SERVER: 250 2.1.0 OK 
CLIENT: RCPT TO:<myaccount@gmail.com>
SERVER: 250 2.1.5 OK 
CLIENT: DATA
SERVER: 354  Go ahead 
CLIENT: Subject: Test email
CLIENT: From:'John Doe'<fakeaccount@gmail.com>
CLIENT: To:'John Doe'<fakeaccount@gmail.com>
CLIENT: This is a test...
CLIENT: . 
```

消息已成功发送至“myaccount@gmail.com”。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-30T18:46:32.723

SMTP 协议 ( [RFC 2821](http://www.ietf.org/rfc/rfc2821.txt) ) 声明如下：

> 当使用 RFC 822 格式 [7, 32] 时，邮件数据包括
> 备注标题项，例如日期、主题、收件人、抄送、发件人。服务器 SMTP
> 系统不应拒绝基于
> RFC 822 或 MIME [12] 邮件头或邮件正文中的感知缺陷的邮件。

和这个：

> DATA 命令只能在协议交换中的两个点失败：
> 
> *   如果没有 MAIL，或者没有 RCPT，命令，或者所有这样的命令都被拒绝，服务器可以返回一个“命令乱序”（503）或“没有有效的接收者”（554）作为对 DATA 命令的响应。如果收到其中一个回复（或任何其他 5yz 回复），则客户端不得发送消息数据；更一般地说，除非收到 354 回复，否则不得发送消息数据。

从这些语句中，标题和 RCPT TO: 命令内容不必匹配（尽管它们应该匹配），并且不使用 RCPT TO: 可能会导致错误以阻止继续执行 DATA 命令。

# java - 当我打开 Eclipse 3.7.2 时，我收到此错误“初始化错误工具”Android

> ID：10822192
> 
> 赞同：0
> 
> 时间：2012-05-30T18:34:59.277
> 
> 标签：java, android, initializing, tooling

所以我使用 Eclipse 3.7.2 来编写 android 应用程序，但现在我打开它，我收到错误“初始化错误工具”它以前没有这样做，所以我不知道发生了什么。我只记得最近我将一些 SDK 的东西和 Eclipse 本身更新到了最新版本，所以这可能是导致问题的原因。因此，如果您知道这是什么，或者我应该担心它，请帮助我，谢谢。

我的问题的屏幕截图[http://i50.tinypic.com/106n9z9.png](http://i50.tinypic.com/106n9z9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:45:12.160

此错误通常表示工作区损坏。尝试使用新的工作区加载 Eclipse，看看是否可以修复它。

# c# - 选择 DataGridView 的行？

> ID：10822196
> 
> 赞同：0
> 
> 时间：2012-05-30T18:35:18.117
> 
> 标签：c#, visual-c#-express-2010

我如何拥有数据网格视图的整行。我不知道从哪里开始。我试过这个，但不知道把它放在哪里。：

```
dataGrid.Rows[index].Selected = true; 
```

我只是在寻找对我有帮助的代码！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:41:32.210

看来你想做这样的事情：

```
protected void Page_Load(object sender, EventArgs e)
{
    this.FillGrid();
}
protected void GridView1_SelectedIndexChanging(object sender, GridViewSelectEventArgs e)
{
    this.GridView1.SelectedIndex = e.NewSelectedIndex;
    this.FillGrid();
}

private void FillGrid()
{
    this.GridView1.DataSource = new[] { "Hello", "World" };
    this.GridView1.DataBind();
} 
```

在 aspx 文件中：

```
<asp:GridView ID="GridView1" runat="server" 
        onselectedindexchanging="GridView1_SelectedIndexChanging">
        <Columns>
            <asp:CommandField ShowSelectButton="True" />
        </Columns>
        <SelectedRowStyle BackColor="DarkSlateBlue" ForeColor="GhostWhite" />
    </asp:GridView> 
```

产生这个输出：

![在此处输入图像描述](../Images/9d7d3c56109dfcc4fdeddaee8556cbf7.png)

# php - 在php中解析xml文件

> ID：10822202
> 
> 赞同：0
> 
> 时间：2012-05-30T18:35:38.317
> 
> 标签：php, xml

如何在我尝试使用的php中解析这种类型的文件

```
<?php
$xml ="office.xml";

// get first book title
$title=$xml->featureMember->AA_OFFICE;
// show title
echo $title;
echo '<br/>';
?> 
```

如果 iam 使用 gml:featuremember 而不是 featuremember 我会收到语法错误如果我使用 featuremember iam getting ) 注意：尝试获取非对象的属性

```
<gml:boundedBy>
<gml:null>unknown</gml:null>
</gml:boundedBy>
<gml:featureMember>
<kgp:AA_OFFICE fid="AA_OFFICE.1">
<kgp:the_geom>
<gml:Point srsName="http://www.opengis.net/gml/srs/epsg.xml#32645">
<gml:coordinates xmlns:gml="http://www.opengis.net/gml" decimal="." cs="," ts=" ">643630.3815,2498825.0741</gml:coordinates>
</gml:Point>
</kgp:the_geom>
<kgp:Name>MANMARK EXPORT PVT LTD</kgp:Name>
<kgp:Type/>
<kgp:Plot_No>55</kgp:Plot_No>
<kgp:Block_Name>AA</kgp:Block_Name>
</kgp:AA_OFFICE>
</gml:featureMember> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:44:01.307

您正在尝试将字符串用作对象。您必须首先创建某种形式的 XML Parsing 对象。例如，

```
$xmlDoc = new DOMDocument();
$xmlDoc->load("office.xml"); 
```

[更多信息](http://w3schools.com/php/php_xml_dom.asp)

或者

```
$xml = simplexml_load_file("office.xml"); 
```

[更多信息](http://w3schools.com/php/php_xml_simplexml.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:57:45.810

尝试调试您的 xml

```
libxml_use_internal_errors(true);
$xml = simplexml_load_file("office.xml");
var_dump(libxml_get_errors()); 
```

# javascript - Javascript方法使用

> ID：10822204
> 
> 赞同：0
> 
> 时间：2012-05-30T18:35:41.913
> 
> 标签：javascript, knockout.js

在浏览 KnockoutJS 的示例时，我看到了以下[代码](http://learn.knockoutjs.com/#/?tutorial=webmail)。

```
function WebmailViewModel() {
    // Data
    var self = this;
    self.folders = ['Inbox', 'Archive', 'Sent', 'Spam'];
    self.chosenFolderId = ko.observable();

    // Behaviours    
    self.goToFolder = function(folder) { self.chosenFolderId(folder); };    
};

ko.applyBindings(new WebmailViewModel()); 
```

我不是 Javascript 专家，但对用法有点困惑`self.chosenFolderId(folder);`

`ko.observable();`selectedFolderId 是一个属性，并根据使用其他语言的经验分配，

1.  如何通过传递一个参数来调用它`self.chosenFolderId(folder);`
2.  文件夹定义在哪里？

如果你能指出一篇解释这一点的文章就行了。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:38:58.280

`chosenFolderId`是一个属性，但属性可能是函数（在这种情况下必须是函数）。

所以`ko.observable`返回一个接受单个参数（文件夹）的函数。

这与下一行没有什么不同：

```
self.goToFolder = function(folder) { ... }; 
```

将`goToFolder`属性设置为函数的位置。

`folder`本身被“定义”为作为参数`goToFolder`的参数。无论*调用* `goToFolder`什么都为`folder`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:38:51.227

javascript 中的函数是一流的对象。`ko.observable()`是一个函数调用，它的返回值本身就是一个函数。

基本上我可以做这样的事情：

```
var observable = function(some_param) {
  return function(some_other_param) {
    // do something useful here
  }
} 
```

然后我可以打电话：

```
observable(1)(2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T18:39:08.143

在 javascript 中，函数可以分配给变量，作为参数传递给函数，从函数返回等等。换句话说，the'yre [First-class](http://en.wikipedia.org/wiki/First-class_function)。

# php - 从mysql打印数据时循环循环

> ID：10822206
> 
> 赞同：0
> 
> 时间：2012-05-30T18:35:45.193
> 
> 标签：php, foreach

我想创建简单的投票系统。我有两个问题和两个答案。第一个问题有两个答案，但第二个问题没有任何答案。从某种意义上说，我想得到：

```
First question?
Answer1
Answer2

Second question? 
```

但我越来越

```
First question?
Answer1
Answer2

Second question?
Answer1 
Answer2 
```

第二个问题不需要有 Answer1 和 Answer2（与第一个问题的答案相同，但我在 mysql 中有两个答案）。

还有我的 foreach 循环。我需要如何更改循环？

```
foreach($questions->getQuestion($_GET["category"]) as $data) // Questions
{
    echo $data["question"] . "<br/>";
    foreach($questions->getAnswer($data["id"]) as $answers) // Answers
    {
        echo $answers["answer"] . "<br/>"; // This needn't print data to below of Second Question
    }
} 
```

职能：

```
public function getQuestion( $cat )
{
    if(empty($cat))
    {
        header("location:index.php");
    }

    $this->sql = "SELECT * FROM questions WHERE category='" . $cat . "'";
    $data = parent::getData();
    return $data;
}

public function getAnswer( $question )
{
    $this->sql = "SELECT * FROM answers WHERE questions='" . $question .  "'";
    $data = parent::getData();
    return $data;
} 
```

数据：

```
 Array
(
    [0] => Array
        (
            [id] => 1
            [soru] => First Question
            [kategori] => 1
        )

    [1] => Array
        (
            [id] => 2
            [soru] => Second Question
            [kategori] => 1
        )

)
Array
(
    [0] => Array
        (
            [id] => 1
            [soru] => First Question
            [kategori] => 1
        )

    [1] => Array
        (
            [id] => 2
            [soru] => Second Question
            [kategori] => 1
        )

    [2] => Array
        (
            [id] => 1
            [cevap] => Answer1
            [sorular] => 1
        )

    [3] => Array
        (
            [id] => 2
            [cevap] => Answer2
            [sorular] => 1
        )

    [4] => Array
        (
            [id] => 1
            [cevap] => Answer1
            [sorular] => 1
        )

    [5] => Array
        (
            [id] => 2
            [cevap] => Answer2
            [sorular] => 1
        )

) 
```

*注意：这些数据只是示例。这些是mysql中的数据。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:42:19.760

我能想到的最简单的方法是有两个查询：

1.  请求按顺序排列的问题表单数据库列表`question_id`
2.  要求丢失列表 1 中所有问题的所有答案。按顺序排列`question_id`

然后在 php 方面，您匹配每个问题的答案。这将是一个循环，因为问题和答案都已排序，无需“后退”。

你最终会得到这样的结构：

```
list = [
    {
       question: "Lorem ipsum",
       answers: [
          "answer number one",
          "answer number two"
       ]
    },
    {
       question: "Cogito ergo sum",
       answers: [
          "answer number one",
          "answer number two"
          "answer number three",
          "answer number four"
       ]
    }
] 
```

您应该避免分别向数据库查询每个问题的答案。有点浪费

# iphone - MPMediaPlayback currentPlaybackTime 以分钟为单位

> ID：10822207
> 
> 赞同：0
> 
> 时间：2012-05-30T18:35:47.537
> 
> 标签：iphone, ios, mpmovieplayercontroller

如何以分钟而不是秒显示`currentPlaybackTime`属性？`MPMediaPLayback`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:37:27.913

大概，你可以把它除以60？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T18:46:02.120

显示此字符串：

```
[NSString stringWithFormat:@"%d:%02d", (seconds / 60), (seconds % 60))]; 
```

这不就是它的全部吗？

# javascript - 如何在 Spine.js 中建模这种关系

> ID：10822211
> 
> 赞同：1
> 
> 时间：2012-05-30T18:36:09.580
> 
> 标签：javascript, model-view-controller, spine.js

在我的应用程序中，我需要对与文件系统非常相似的对象之间的关系进行建模。

我有`Image`，`Video`并且`Collection`

集合可以包含所有三种类型的对象。虽然图像和视频可以是多个集合的一部分，但集合只能包含在一 (1) 个集合中。

在脊柱中模拟这种关系的最佳方法是什么？

我想做的是从一个通用模型定义中创建所有子类，比如说资产，所以一切都是资产，我可以在该模型上实现类和实例方法，并且所有子类模型定义都继承这些方法。

我用这种方法遇到的问题是我需要/想把关系放在资产上，所以

```
资产类扩展 Spine.Model
    @configure '资产'、'标题'、'描述'

    @belongsTo '收藏'，收藏

```

除了我不确定这是否真的有效，如果我有Colletion子类资产并且资产设置了对Collection的引用......这里的问题是belongsTo是一种单向关系，我只需要这个对于Collections所以正确方法是拥有一个`@hasMany 'collections', Collection`并确保没有集合为此属性设置多个对象

另一个问题是：我可以使用 Asset.find(id) 来获取所有属于 Asset 子类的对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:26:58.480

除了尝试您的上述结构是否有效之外，我不确定您的问题是什么。

您所描述的被称为“复合设计模式”（[http://en.wikipedia.org/wiki/Composite_pattern](http://en.wikipedia.org/wiki/Composite_pattern)），其中“复合”是“复合” ，`Collection`两者都是“叶子”`Image``Video`

关于您的问题，除了您已经定义的代码之外，`@hasMany`您是否想要以下内容而不是`@hasMany 'collections', Collection`您的子类：`Collection``Asset`

`@hasMany 'assets', Asset`

鉴于您可以上下遍历树。

同样，我真的不确定这种递归遍历是否适用于 Spine（从未尝试过，尽管我广泛使用 Spine）

一些，Geert-Jan

# sql - 处理表中重复值的不同规则

> ID：10822212
> 
> 赞同：1
> 
> 时间：2012-05-30T18:36:17.787
> 
> 标签：sql, sql-server

中的重复`Table 1`项标识如下；

```
select quote_ref, count (*) 
from table 1 
group by quote_ref 
having count(*) > 1 
```

现在我想根据下面的 2 条规则消除重复项。

`Status= Complete` 取If none in complete 状态的条目，然后取带有`max([created_date ])` Else Flag 的条目查看？

假设我需要一个`CASE`带有删除的语句，但不确定如何构造？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T18:59:29.670

对于 SQL Server 2005+，您可以执行以下操作：

```
;WITH CTE AS
(
    SELECT  *, 
            ROW_NUMBER() 
            OVER(PARTITION BY quote_ref 
                 ORDER BY CASE WHEN [Status]='COMPLETE' THEN 1 ELSE 2 END, 
                 created_date DESC) RowNum
    FROM table1
)
DELETE FROM CTE
WHERE RowNum != 1 
```

在这种情况下，我假设您不想删除的行是具有最大值的行`status = 'COMPLETE'`或具有最大值的行`created_date`。如果是相反的方式，您可以简单地更改`WHERE`条件。

# java - Pig JVM java堆空间错误

> ID：10822213
> 
> 赞同：4
> 
> 时间：2012-05-30T18:36:18.973
> 
> 标签：java, hadoop, out-of-memory, apache-pig, heap-memory

我正在尝试运行一个调用用 java 编写的用户定义函数的 pig 脚本。我正在尝试使用一个非常小的 264 字节文件来测试这个脚本。我最终得到 java 堆空间错误并且作业失败。我尝试使用 -Xms1024M 选项运行该作业，它针对较小的文件运行，但对于较大的文件失败。即使这样，我的集群也足够强大，不会被这么小的文件绊倒，我想知道如何解决这个内存泄漏。有人可以帮忙吗，

```
import java.util.HashMap;
import java.lang.annotation.Annotation;
import java.lang.reflect.Array;
import java.lang.reflect.Method;
import java.io.IOException;
import java.util.Iterator;
import java.util.List;
import java.util.ArrayList;
import java.util.Map;
import java.util.Set;
import java.text.*;

import org.apache.pig.EvalFunc;
import org.apache.pig.data.*;

import com.tictactec.ta.lib.CoreAnnotated;
import com.tictactec.ta.lib.MAType;
import com.tictactec.ta.lib.MInteger;
import com.tictactec.ta.lib.RetCode;
import com.tictactec.ta.lib.meta.annotation.InputParameterInfo;
import com.tictactec.ta.lib.meta.annotation.InputParameterType;
import com.tictactec.ta.lib.meta.annotation.OptInputParameterInfo;
import com.tictactec.ta.lib.meta.annotation.OptInputParameterType;
import com.tictactec.ta.lib.meta.annotation.OutputParameterInfo;
import com.tictactec.ta.lib.meta.annotation.OutputParameterType;

public class taLib extends EvalFunc<DataBag> 
{

    private static final int MIN_ARGS = 3;

    public static CoreAnnotated core = new CoreAnnotated();
    private static Method func_ref = null;

    public DecimalFormat df = new DecimalFormat("#.###");

    public DataBag exec(Tuple args) throws IOException 
    {

        DataBag input=null;
        MInteger outStart = new MInteger();
        MInteger outLen = new MInteger();
        Map<String,Object>outputParams=new HashMap<String, Object>();
        String func_name;
        List<Integer> ip_colmns= new ArrayList<Integer>();
        List<double[]>ip_list=new ArrayList<double[]>();
        List<String>opt_type=new ArrayList<String>();
        List<Object>opt_params=new ArrayList<Object>();
        //////

        long m1=Runtime.getRuntime().freeMemory();
        System.out.println(m1);
        long m2=Runtime.getRuntime().totalMemory();
        System.out.println(m2);
        //////
        int ip_noofparams=0;
        int op_noofparams=0;
        int opt_noofparams=0;

        if (args == null || args.size() < MIN_ARGS)
            throw new IllegalArgumentException("talib: must have at least " +   
MIN_ARGS + "  args");

        if(args.get(0) instanceof DataBag)
        {input = (DataBag)args.get(0);}
        else{throw new IllegalArgumentException("Only a valid bag name can be 
passed");}

        // get no of fields in bag
        Tuple t0=input.iterator().next();
        int fields_in_bag=t0.getAll().size();

        if(args.get(1) instanceof String)
        {func_name = (String)args.get(1);}
        else{throw new IllegalArgumentException("Only valid function name can be 
passed at arg 1");}
        func_ref=methodChk(func_name);

        if (func_ref == null) {
            throw new IllegalArgumentException("talib: function " 
                               + func_name + " was not found");
        }

        for (Annotation[] annotations : func_ref.getParameterAnnotations()) 
             {
              for (Annotation annotation : annotations) 
               {
                if(annotation instanceof InputParameterInfo)
                {
                 InputParameterInfo inputParameterInfo = 
(InputParameterInfo)annotation;

if(inputParameterInfo.type().equals(InputParameterType.TA_Input_Price))
                   {

ip_noofparams=numberOfSetBits(inputParameterInfo.flags());
                   }
                    else
                    {
                    ip_noofparams++;
                    }
                }
                if(annotation instanceof OptInputParameterInfo)
                {
                    OptInputParameterInfo optinputParameterInfo=
(OptInputParameterInfo)annotation;
                    opt_noofparams++;
                    if 
(optinputParameterInfo.type().equals(OptInputParameterType.TA_OptInput_IntegerRange))
                    {
                        opt_type.add("Integer");
                    }
                    else 
 if(optinputParameterInfo.type().equals(OptInputParameterType.TA_OptInput_RealRange))
                    {
                        opt_type.add("Double");
                    }
                    else  
 if(optinputParameterInfo.type().equals(OptInputParameterType.TA_OptInput_IntegerList))
                    {
                        opt_type.add("String");
                    }
                    else{throw new IllegalArgumentException("whoopsie ...serious 
 mess in opt_annotations");}

                }
                if (annotation instanceof OutputParameterInfo) 
                {
                            OutputParameterInfo outputParameterInfo = 
 (OutputParameterInfo) annotation;
                            op_noofparams++;
                    if 
 (outputParameterInfo.type().equals(OutputParameterType.TA_Output_Real)) 
                    {
                              outputParams.put(outputParameterInfo.paramName(), new 
 double[(int) input.size()]);
                    }
                    else if    
 (outputParameterInfo.type().equals(OutputParameterType.TA_Output_Integer)) 
                    {
                              outputParams.put(outputParameterInfo.paramName(), new  
  int[(int)input.size()]);
                            }
                } 
               }
            }

        int total_params =ip_noofparams+opt_noofparams;
        if((args.size()-2)!=total_params){throw new IllegalArgumentException("Wrong   
 no of argumets passed to UDF");}

         // get the ip colmns no's 
        for(int i=2;i<(2+ip_noofparams);i++)
        {   
           if(args.get(i) instanceof Integer )
             {
              if((Integer)args.get(i)>=0 && (Integer)args.get(i)<fields_in_bag)
            {
            ip_colmns.add((Integer) args.get(i));
            }
            else{throw new IllegalArgumentException("The input colmn specified 
 is invalid..please enter a valid colmn no:0-"+(fields_in_bag-1));}     
             }  
               else{throw new IllegalArgumentException("Wrong arguments entered: 
 Only"+ip_noofparams+"field no's of type(integer) allowed for fn"+func_name ); }

         }

        // create a list of ip arrays 
        for(int i=0;i<ip_colmns.size();i++)
        {
         ip_list.add((double[]) Array.newInstance(double.class, (int)input.size()));
        }
        int z=0;
        int x=0;
        // fill up the arrays
        for(Tuple t1: input)
        {       

            Iterator<double[]> itr=ip_list.iterator();
            z=0;
            while(itr.hasNext())
            {

             if((Double)t1.get(ip_colmns.get(z)) instanceof Double)
             {
              ((double[])itr.next())[x]=(Double) t1.get(ip_colmns.get(z++));
             }
             else{throw new IllegalArgumentException("Illegal argument while 
 filling up array...only double typr allowed");}
            }
            x++;
        }

        //deal with opt params
        int s=0;
        for(int i=(2+ip_noofparams);i<(2+ip_noofparams+opt_noofparams);i++)
        {

 if(opt_type.get(s).equalsIgnoreCase(args.get(i).getClass().getSimpleName().toString()))
            {       
                if(opt_type.get(s).equalsIgnoreCase("String"))
                {
                    String m=args.get(i).toString().toLowerCase();
                    String ma=m.substring(0, 1).toUpperCase();
                    String mac=m.substring(1);
                    String macd=ma+mac;
                    MAType type =MAType.valueOf(macd);
                    opt_params.add(type);
                    s++;
                }

                else{
                    opt_params.add(args.get(i));
                    s++;
                    }

            }
            else if(opt_type.get(s).equalsIgnoreCase("Double"))
                    {

 if(args.get(i).getClass().getSimpleName().toString().equalsIgnoreCase("Integer"))
                     {
                    opt_params.add((Double)((Integer)args.get(i)+0.0));
                    s++;
                     } 
                  else{throw new IllegalArgumentException("Opt arguments do   
 not match for fn:"+func_name+", pls enter opt arguments in right order"); }
                    }
            else{throw new IllegalArgumentException("Opt arguments do not match 
 for fn:"+func_name+", pls enter opt arguments in right order");}

        } 

        List<Object> ta_argl = new ArrayList<Object>();
        ta_argl.add(new Integer(0));
        ta_argl.add(new Integer((int)input.size() - 1));
        for(double[]in: ip_list)
        {
         ta_argl.add(in);
        }

        if(opt_noofparams!=0)
        {ta_argl.addAll(opt_params);}
        ta_argl.add(outStart);
        ta_argl.add(outLen);

        for (Map.Entry<String, Object> entry : outputParams.entrySet()) 
            {
             ta_argl.add(entry.getValue());
            }

            RetCode rc = RetCode.Success;
        try {
            rc = (RetCode)func_ref.invoke(core, ta_argl.toArray());
            } catch (Exception e) 
                    {
            assert false : "I died in ta-lib, but Java made me a zombie...";
            }

        assert rc == RetCode.Success : "ret code from " + func_name;

        if (outLen.value == 0) return null;

        //////
        DataBag ret=null;
        ret =outTA(input,outputParams,outStart);
        outputParams.clear();
        ip_list.clear();
        opt_params.clear();
        opt_type.clear();
        ip_colmns.clear();
        Runtime.getRuntime().gc();
        return ret;

    }

    public DataBag outTA(DataBag bag,Map<String, Object> outputParams,MInteger outStart)
    {
        DataBag nbag=null;
        TupleFactory mTupleFactory=TupleFactory.getInstance();
        BagFactory mBagFactory=BagFactory.getInstance();
        nbag=mBagFactory.newDefaultBag();
        Tuple tw=bag.iterator().next();
        int fieldsintup=tw.getAll().size();

        for(Tuple t0: bag)
        {
            Tuple t1=mTupleFactory.newTuple();

            for(int z=0;z<fieldsintup;z++)
            {
                try {
                    t1.append(t0.get(z));
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    System.out.println("Ouch");
                }
            }
            nbag.add(t1);
        }

        int i = 0;
        int j=0;        
        for (Tuple t2: nbag) 
        {
         if(i>=outStart.value)
          {
            for(Map.Entry<String,Object>entry: outputParams.entrySet())
            {
            t2.append(entry.getKey().substring(3).toString());

             if(entry.getValue() instanceof double[])
              {
               t2.append( new Double 
(df.format(((double[])entry.getValue())[j])));
              }
             else if(entry.getValue() instanceof int[])
              {
               t2.append( ((int[])entry.getValue())[j]);
              }
             else{throw new 
IllegalArgumentException(entry.getValue().getClass()+"not supported");}
            }       
            i++;j++;
          }
          else
           {t2.append(0.0);
            i++;    
               }

        }

        return nbag;
    }

    public Method methodChk(String fn)
    {
        String fn_name=fn;
        Method tmp_fn=null;
        for (Method meth: core.getClass().getDeclaredMethods()) 
     {
      if (meth.getName().equalsIgnoreCase(fn_name)) 
       {
        tmp_fn = meth;
        break;
       }
     }
        return tmp_fn;
    }

    public int numberOfSetBits(int i) {
        i = i - ((i >> 1) & 0x55555555);
        i = (i & 0x33333333) + ((i >> 2) & 0x33333333);
        return ((i + (i >> 4) & 0xF0F0F0F) * 0x1010101) >> 24;
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T22:29:49.007

可能是 BZip 编解码器的问题 - API 确实注意到它相当占用内存：

*   [http://hadoop.apache.org/common/docs/r0.20.0/api/org/apache/hadoop/io/compress/bzip2/CBZip2OutputStream.html](http://hadoop.apache.org/common/docs/r0.20.0/api/org/apache/hadoop/io/compress/bzip2/CBZip2OutputStream.html)

    > *压缩需要大量内存*

当您增加内存时，`-Xms2048m`您是否设置了 pig grunt shell 或 map/reduce 作业的选项？

```
set mapred.child.java.opts=-Xmx2048m 
```

您可以通过查看 JobTracker 进行检查，找到失败的作业，打开 job.xml 并找到`mapred.child.java.opts`

# jsf-2 - 不调用方法时 被添加

> ID：10822218
> 
> 赞同：0
> 
> 时间：2012-05-30T18:36:27.710
> 
> 标签：jsf-2, primefaces

我有`<p:dialog>`a`<p:dataTable>`和 a `<p:commandButton>`。当我添加`<p:columm selectionMode="multiple">`到表中时，按钮不会调用动作侦听器方法。没有该列，它可以正常工作。这是如何引起的，我该如何解决？

这是我的看法：

```
<p:dialog id="CategoriasShowPadre" header="#{msgs['Categorias.BusquedaDeCategorias']}" widgetVar="CategoriasShowPadre" modal="true">
    <p:dataTable id="DTBusquedaCategoriasPadre" widgetVar="posiblesTablaP" var="BcatP" value="#{agregarCategorias.categoriasPosibles}"   
        emptyMessage="#{msgs['Categoria.SinRegistros']}" rowKey="#{BcatP.nombre}" selection="#{agregarCategorias.categoriasPosiblesSelecionadas}">
        <p:column selectionMode="multiple" style="width:18px" />     
        <p:column id="nombreCol" filterBy="#{BcatP.nombre}" filterMatchMode="contains">
            <f:facet name="header">  
                <h:outputText value="#{msgs['Categoria.ColunmnaNombre']}" />  
            </f:facet>  
            <h:outputText value="#{BcatP.nombre}" />  
        </p:column>  
        <p:column>  
            <f:facet name="header">  
                <h:outputText value="#{msgs['Categoria.ColunmnaDescripcion']}" />  
            </f:facet>  
            <h:outputText value="#{BcatP.descripcion}" />  
        </p:column>  
    </p:dataTable>    

    <p:commandButton id="AnadiraPadre" value="#{msgs['Categoria.Boton.AgregarCategorias']}" 
        immediate="true" actionListener="#{agregarCategorias.selecionadosElementosPadres()}" 
        onclick="CategoriasShowPadre.hide();" />
</p:dialog> 
```

这是支持bean：

```
@ManagedBean
@RequestScoped
public class AgregarCategorias { 

    private List<Categorias> CategoriasPosibles;
    private List<Categorias> CategoriasPosiblesSelecionadas;   

    @PostConstruct
    private void MiPostConstructor() {
        this.CategoriasPosibles = // ...
    }

    public List<Categorias> getCategoriasPosiblesSelecionadas() {
        return CategoriasPosiblesSelecionadas;
    }

    public void setCategoriasPosiblesSelecionadas(List<Categorias> CategoriasPosiblesSelecionadas) {
        this.CategoriasPosiblesSelecionadas = CategoriasPosiblesSelecionadas;
    }

    public List<Categorias> getCategoriasPosibles() {
        return CategoriasPosibles;
    }

    public void setCategoriasPosibles(List<Categorias> CategoriasPosibles) {
        this.CategoriasPosibles = CategoriasPosibles;
    }

    public void selecionadosElementosPadres(ActionEvent evento) {
         // my method code
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:38:56.730

数据表的“选择”属性应该引用域对象的数组。所以改变`private List<Categoria> CategoriasPosiblesSelecionadas`为`private Categoria[] CategoriasPosiblesSelecionadas`

# python - 使用 python 和 http 函数检查网络服务器中是否存在文件夹

> ID：10822223
> 
> 赞同：3
> 
> 时间：2012-05-30T18:37:09.113
> 
> 标签：python, http, file-exists

有没有办法使用 Python 检查 Web 服务器上是否存在文件夹？（类似于“os.path.isdir”，但如果未找到，则将 HTTP 响应读取为“HTTP/404”）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T18:39:46.157

您可以通过在 urllib 中请求文件并查看它是否成功并出现 200 错误或不成功来检查服务器是否正在提供文件。

我认为很难看出什么是目录，什么不是。什么是目录？使用现代 Web 框架，人们可以随心所欲地路由 url。您是否将 aa 目录定义为下面有网页的任何内容，即使它可能不是文件系统上的分层顺序？

```
import urllib

f = urllib.urlopen('http://stackoverflow.com/questions/10822223/check-if-folder-exists-in-a-webserver-using-python-and-http-functions/')
if f.code == 200:
  #success 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:42:48.013

```
import requests

r = requests.get('http://stackoverflow.com/questions/10822223/check-if-folder-exists-in-a-webserver-using-python-and-http-functions')

if r:
  print "Exists"
else:
  print "Doesn't exist" 
```

# windows - 如何检查我的 DirectShow Renderer 过滤器是否正在使用？

> ID：10822226
> 
> 赞同：0
> 
> 时间：2012-05-30T18:37:19.953
> 
> 标签：windows, c++-cli, directshow, multimedia

在我的 DirectShow 项目中，我创建了一个过滤器（从 派生`CBaseVideoRenderer`）来渲染到一块内存。这在大多数情况下都非常有效，我添加了过滤器

```
 mGraphBuilder->AddFilter(pInterfaceInfo, MemoryRendererName); 
```

并依靠 GraphBuilder 来完成其余的工作。但是在某些情况下，图形生成器和我的过滤器无法就通用格式达成一致，它会绕过我的过滤器创建一个新的 ActiveMovie 窗口。

我想检测何时发生这种情况，以便我知道我的过滤器没有被使用，但无法确定如何使用。

我使用以下方法枚举图表中的所有过滤器，寻找我的过滤器：

（编辑：当我调用它时，我将我的 GraphBuilder 对象作为 pGraph 参数传递）

```
HRESULT MediaPlayer::CheckFilterGraphFor(IFilterGraph *pGraph, IBaseFilter* pFilterToLookFor)
{
    IEnumFilters *pEnum = NULL;
    IBaseFilter *pFilter;
    ULONG cFetched;

    HRESULT enumeratedFilterCount = 0;

    FILTER_INFO pRefFilterInfo;
    pFilterToLookFor->QueryFilterInfo(&pRefFilterInfo);

    HRESULT hr = pGraph->EnumFilters(&pEnum);
    if (SUCCEEDED(hr))
    {
        while(pEnum->Next(1, &pFilter, &cFetched) == S_OK)
        {
            enumeratedFilterCount--;

            FILTER_INFO FilterInfo;
            hr = pFilter->QueryFilterInfo(&FilterInfo);
            if (SUCCEEDED(hr))
            {   
                if(wcscmp(FilterInfo.achName, pRefFilterInfo.achName) == 0)
                {
                    pRefFilterInfo.pGraph->Release();
                    return S_OK;    
                }

                // The FILTER_INFO structure holds a pointer to the Filter Graph
                // Manager, with a reference count that must be released.
                if (FilterInfo.pGraph != NULL)
                {
                    FilterInfo.pGraph->Release();
                }
                pFilter->Release();

            }
        }

        pEnum->Release();
    }

    pRefFilterInfo.pGraph->Release();
    return enumeratedFilterCount;
} 
```

但它并没有按预期工作，因为无论是否在使用我的过滤器总是能找到。

**如何判断我的过滤器何时用作 DirectShow 图形的视频渲染器，何时不使用？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T19:36:41.740

找到您的渲染器过滤器后，找到它的输入引脚并检查它是否已连接（IPin::ConnectedTo）

# drupal - 将备份文件上传到 PC 上的 Drupal 时出现错误 500

> ID：10822231
> 
> 赞同：1
> 
> 时间：2012-05-30T18:37:34.073
> 
> 标签：drupal, backup

我是 Drupal 的初学者，我已经使用 Git 从开发服务器下载了站点文件，而我正在尝试通过 localhost 在 htdocs(xampp) 中运行这些文件。我收到以下错误

> 服务器错误！
> 
> 服务器遇到内部错误，无法完成您的请求。服务器过载或 CGI 脚本中存在错误。
> 
> 如果您认为这是服务器错误，请联系网站管理员。
> 
> 错误 500
> 
> 本地主机 05/30/12 14:30:17 Apache/2.2.21 (Win32) mod_ssl/2.2.21 OpenSSL/1.0.0e PHP/5.3.8 mod_perl/2.0.4 Perl/v5.10.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:45:46.660

以下链接有更多详细信息，但基本上您需要先备份并下载您的 dev drupal 站点上使用的数据库，然后将其上传到您的 xampp 副本。之后，您需要为您的本地 PC 编辑您的配置，也许还有您的 .htacess（如果不使用 drupal 附带的默认配置）。

[http://learnbythedrop.com/drop/95](http://learnbythedrop.com/drop/95)

[http://drupal.org/node/350271](http://drupal.org/node/350271)

# html - HTML硬编码或css中的图像？

> ID：10822238
> 
> 赞同：1
> 
> 时间：2012-05-30T18:37:52.357
> 
> 标签：html, css

我怎样才能把图像代替文本“提交”..硬编码或css？什么是更好的选择。

```
 <ul>
     <li><span class="class1" onclick="func1()">Submit</span></li>
 </ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T18:40:21.437

将图像添加到您的班级：

```
<ul>
     <li><span class="class1" onclick="func1()"></span></li>
</ul>

.class1 {
    display: inline-block;
    height: 32px;
    width: 32px;
    background-image: url(myimage.png);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:45:30.850

当然，您所拥有的替代方案是

```
<a href="#" onclick="func1()"><img src="picture.png" /></a> 
```

并且您可以在 CSS 中将`a`（或`img`）样式设置为您心中的内容

# c# - 带有winforms c#的多选图片库

> ID：10822241
> 
> 赞同：0
> 
> 时间：2012-05-30T18:38:03.240
> 
> 标签：c#, winforms, picturegallery

我正在尝试使用 winforms 创建一个多选图片库。

目前我已经创建了一个将图像添加为可选图片框控件的流程控制面板。

selectablepicturebox 控件是一个客户用户控件，它是一个空白控件，带有一个图片框和一个位于图片框右上角的复选框。图片框略小，位于用户控件的中心。

单击 selectablepicturebox 控件将打开和关闭背景指示选择。

我想要做的是选择一堆 selectablepicturebox 控件并能够捕获空格键事件以选中和取消选中所选控件中的复选框。

问题是 flowlayoutpanel 永远不知道要捕获空格键事件。

有谁知道这样做或其他技术？我很乐意使用任何基于 .net 的技术。

谢谢

编辑：这是[代码的链接](https://github.com/slowmonkey/Blog-My-Flickr)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:42:04.337

你在尝试 KeyDown 事件吗？

> 根据 MSDN，此成员对此控件没有意义。

[在这里](http://msdn.microsoft.com/en-us/library/system.windows.forms.panel.keydown)和[这里](http://msdn.microsoft.com/en-us/library/system.windows.forms.flowlayoutpanel_events)阅读。相反，您可以尝试[PreviewKeyDown](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.previewkeydown.aspx)

**解决方案：[GitHub 代码库]**

![在此处输入图像描述](../Images/7a14acf772706c36288f3361d02a1565.png)

**[代码更改] 1\. SelectablePictureBox.cs** - 注意设置焦点

```
public void SetToSelected()
        {
            SelectedCheckBox.Checked = true;
            PictureHolder.Focus();
        }

private void PictureHolder_Click(object sender, EventArgs e)
        {
            BackColor = BackColor == Color.Black ? Color.Transparent : Color.Black;

            // TODO: Implement multi select features;

            if ((Control.ModifierKeys & Keys.Shift) != 0)
            {
                // Set the end selection index.
            }
            else
            {
                // Set the start selection index.
            }

            PictureHolder.Focus();
        }

// subscribe to picture box's PreviewKeyDown & expose a public event

 public event PreviewKeyDownEventHandler OnPicBoxKeyDown;
 private void OnPicBoxPrevKeyDown(object sender, PreviewKeyDownEventArgs e)
        {
            if (OnPicBoxKeyDown != null)
            {
                OnPicBoxKeyDown(sender, e);
            }
        } 
```

**【代码变更】1.FormMain.cs**

```
private void FormMain_Load(object sender, EventArgs e)
        {
            SensitiveInformation sensitiveInformation = new SensitiveInformation();
            int index = 0;
            //foreach (var photo in Flickr.LoadLatestPhotos(sensitiveInformation.ScreenName))
            for (int i = 0; i < 10; i++)
            {
                SelectablePictureBox pictureBox = new SelectablePictureBox(index);

                // subscribe to picture box's event
                pictureBox.OnPicBoxKeyDown += new PreviewKeyDownEventHandler(pictureBox_OnPicBoxKeyDown);
                PictureGallery.Controls.Add(pictureBox);
                index++;
            }
        }

// this code does the selection. Query the FLowLayout control which is the 1st one and select all the selected ones
void pictureBox_OnPicBoxKeyDown(object sender, PreviewKeyDownEventArgs e)
        {
            if (e.KeyCode != Keys.Space) return;
            foreach (SelectablePictureBox item in Controls[0].Controls)
            {
                if (item.IsHighlighted)
                {
                    item.SetToSelected();
                }
            }
        } 
```

# ruby-on-rails - 与常规 xml 文件相比，使用 Builder 有什么优势？

> ID：10822245
> 
> 赞同：0
> 
> 时间：2012-05-30T18:38:29.683
> 
> 标签：ruby-on-rails, ruby, xml, builder

我有一个 Rails 应用程序，它使用 Builder gem 来编写易于使用的 XML 文件。

我对 Builder gem 非常满意，但根据我的产品架构师的观点，我们应该始终使用简单的 .xml 文件，而不是使用第三方工具。

所以，我需要给他一个可靠的理由，向他解释在我们的 Rails 应用程序中使用 Builder 优于常规 XML 文件的优势。

任何人都可以给或指导我在 Rails 应用程序中使用 Builder 而不是常规 RXML/XML 文件的有效理由吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:25:06.570

如果您的 xml 文件是静态的，那么他是正确的，并且使用任何类型的 xml 模板来处理它们都没有好处。如果您将它用于动态内容，那么您将获得模板语言的所有好处，例如在模板之间共享代码、缓存等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:46:09.433

他可以随心所欲，但 Builder 3.0 附带任何全新的 rails 3 应用程序。它已经在您的 gem 包中，为什么不使用它呢？这就像说不应该使用 ActiveRecord 或 JQuery，因为我们不应该依赖第三方工具。既然您已经在使用 rails 和它附带的所有开源软件，那么 Builder 有什么问题？

话虽如此，正如 Yuiry 指出的那样，优点是构建器是动态的，而 .xml 是静态的。

# java - 在调整大小时缩放地址表单

> ID：10822246
> 
> 赞同：1
> 
> 时间：2012-05-30T18:38:31.010
> 
> 标签：java, forms, layout, swt, window-resize

我的申请有一张表格，用于填写捐赠者的姓名和地址。每个捐赠者都有一个可关闭的标签，每个标签都有一个地址表格。

问题是应用程序在常规应用程序窗口中运行，因此会缩放到所有不同的大小。如果我将文本字段的宽度和高度设置为静态，它们都会留在大屏幕上窗口的左上角。如果我让它们动态化，表格看起来很糟糕，因为相对少量的文本（即名字）有大量的框。如果我动态地将它们分开，我最终会在盒子之间留下很大的间隙。

处理这个问题的最佳方法是什么？是否有一个通常用于此的 UI 构造（到目前为止，我见过的唯一一个是将表单放在不可缩放的模式对话框中，由于基于选项卡的 UI，我不能这样做）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:47:33.023

只是一个建议 - 许多网页设计师采用的简单方法 *（我知道您的应用程序不是基于浏览器的）：

将内容限制为固定大小（例如 800 像素），并将该框水平居中。如果用户最大化他们的窗口，他们会看到 800px 的内容居中，左右两边有很大的空白。

恕我直言，这不是最好的，但它看起来不像被塞进左上角那么糟糕。

这是一个图形设计问题，与技术无关......

# forms - zend 框架：评论表单问题

> ID：10822252
> 
> 赞同：0
> 
> 时间：2012-05-30T18:38:40.853
> 
> 标签：forms, zend-framework, authentication, frameworks, comments

我有一个这样的表评论：

```
Com_ID | Com_Content | Com_Date | Book_ID| User_ID 
```

我可以得到一切，但`User_ID`. 我已经存储`User_ID`了`Zend_Auth`，我可以在屏幕上查看它，但我不知道如何把它拿到我的。

例如`Com_Date`，我可以`IndexController`像这样进入：

```
public function CommentAction()
{           
    $Com_Date = new Zend_Db_Expr('NOW()');
    ... 
```

那么我可以做同样的事情`User_ID`以及如何做吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:45:39.947

`Zend_Auth`可以通过以下方式检索已使用身份验证的身份：

```
$auth = Zend_Auth::getInstance();
if ($auth->hasIdentity()) {
    // Identity exists; get it
    $identity = $auth->getIdentity();
} 
```

希望这就是你的意思。

# jquery - jQuery中的clickOut事件

> ID：10822258
> 
> 赞同：1
> 
> 时间：2012-05-30T18:39:00.687
> 
> 标签：jquery, events, click

我为 jQuery 编写了一个`clickOut`事件。它适用于非常基本的东西。现在，我正在使用下拉菜单扩大测试规模。似乎`this`被卷入了封闭之中。我怎样才能在不改变`clickOut`调用方式的情况下解决这个问题？

[http://jsfiddle.net/QM6Bc/9/](http://jsfiddle.net/QM6Bc/9/)

```
(function ($) {
    'use strict';
    $.fn.clickOut = function (eventData, handler) {
        $('html').click($.proxy(function (event) {
            if (this.has(event.target).length === 0) {
                event.delegateTarget = this.get();
                console.log(this);
                if (handler === undefined) {
                    eventData(event);
                } else {
                    handler(event);
                }
            }
        }, this));
    };
}(jQuery));
jQuery('li').click(function (event) {
    jQuery(this).children().toggle('fast');
    console.log(this);
    event.stopPropagation();
});
jQuery('li li').clickOut(function () {
    console.log(this);
    jQuery(this).children().hide('fast');
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:47:30.090

您没有绑定`this`到回调中的任何内容，请尝试：

```
eventData.call(this, event);

handler.call(this, event); 
```

# ruby-on-rails - Rails，Devise：无效登录重定向到根页面而不是显示错误

> ID：10822260
> 
> 赞同：0
> 
> 时间：2012-05-30T18:39:03.730
> 
> 标签：ruby-on-rails, session, login, devise

出于某种原因，我的应用程序将失败的会话创建重定向到应用程序的根页面，而不是显示有关登录失败原因的错误，例如密码错误。

我捕获了http响应：

```
Request URL:http://localhost:3000/users/sign_in
Request Method:POST
Status Code:302 Moved Temporarily 
```

我的代码执行：

```
<%= form_for(resource, :as => resource_name, :url => session_path(resource_name)) do |f| %> 
```

如果我将 url 更改为 user_session_path - 我得到以下信息：

```
Invalid email or password. 
```

但是，它只是呈现为简单的文本。

```
Request URL:http://localhost:3000/users/sign_in.user
Request Method:POST
Status Code:401 Unauthorized 
```

我安装了omniauth 和cancan gem。不知道从哪里开始寻找 - 有什么想法吗？（另一方面，我在 rake 路由中看不到路由会话，但如果我执行正确的登录，它会登录。这怎么可能？）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:12:19.820

我发现我的应用在 lib 文件夹中有一个 CustomFailure 类。这总是在登录时重定向到根目录。删除此失败应用程序后，该应用程序在登录失败后将我重定向回登录屏幕。

根据[Rails - 设计 - 登录时出现错误消息？](https://stackoverflow.com/questions/4635986/rails-devise-error-messages-when-signing-in)，错误不是给表单域，而是给闪消息。因此，您需要将它们包含在默认的设计新会话视图中。

我仍然不明白为什么 session_path 有效，以及为什么 user_session_path 会产生我的问题中发布的结果。

# c# - 循环并将结果分配给文本框

> ID：10822263
> 
> 赞同：0
> 
> 时间：2012-05-30T18:39:08.980
> 
> 标签：c#

我有一个提取一些记录的 linq 查询。它可以是 1 条记录、2 条记录或 30 条记录。我有两个文本框，如果只有 1 条记录或只有 2 条记录，我希望记录进入，然后如果它超过它，它会将它放在下拉列表中。这就是我到目前为止所拥有的。

```
var getContacts = (from r in gServiceContext.CreateQuery("account")
join c in gServiceContext.CreateQuery("contact") on ((EntityReference) r["accountid"]).Id
equals c["accountid"]
where r["accountid"].Equals(ddlCustomer.SelectedValue)
select new
{
    FirstName = !c.Contains("firstname") ? string.Empty : c["firstname"],
    LastName = !c.Contains("lastname") ? string.Empty : c["lastname"],
});

foreach (var contact in getContacts)
{
    if (getContacts.ToList().Count() == 1)
    {
        txtContact1Name.Text = contact.FirstName + " " + contact.LastName;
    }
    else if (getContacts.ToList().Count() == 2)
    {
        txtContact2Name.Text = contact.FirstName + " " + contact.LastName;
    }
    else if (getContacts.ToList().Count() > 2)
    {
        ddlMultipleContacts.DataSource = getContacts;
        ddlMultipleContacts.DataTextField = "LastName";
        ddlMultipleContacts.DataValueField = "LastName";
        ddlMultipleContacts.DataBind();
    }
} 
```

但如果有两条记录，它会将相同的记录放在文本框 1 和文本框 2 中。难道我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:43:54.737

> 但如果有两条记录，它会将相同的记录放在文本框 1 和文本框 2 中。难道我做错了什么？

是的。看看你的代码：

```
if (getContacts.ToList().Count() == 2) 
```

您在每次迭代时都调用它 - 您没有使用您已经使用过多少联系人的计数。我怀疑你想要：

```
// Let's only materialize the results *once* instead of once per iteration...
var contacts = getContacts().ToList();
switch (contacts.Count)
{
    case 0: // What do you want to do here?
        break;
    case 1:
        txtContact1Name.Text = FormatName(contacts[0]);
        break;
    case 2:
        txtContact1Name.Text = FormatName(contacts[0]);
        txtContact2Name.Text = FormatName(contacts[1]);
        break;
    default:
        ddlMultipleContacts.DataSource = contacts;
        ddlMultipleContacts.DataTextField = "LastName";
        ddlMultipleContacts.DataValueField = "LastName";
        ddlMultipleContacts.DataBind();
        break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:50:58.327

```
var getContacts = (from r in gServiceContext.CreateQuery("account")
                           join c in gServiceContext.CreateQuery("contact") on ((EntityReference) r["accountid"]).Id
                               equals c["accountid"]
                           where r["accountid"].Equals(ddlCustomer.SelectedValue)
                           select new
                                      {
                                          FirstName = !c.Contains("firstname") ? string.Empty : c["firstname"],
                                          LastName = !c.Contains("lastname") ? string.Empty : c["lastname"],
                                      }).ToList();

        if (getContacts.Count > 2)
        {
            ddlMultipleContacts.DataSource = getContacts;
            ddlMultipleContacts.DataTextField = "LastName";
            ddlMultipleContacts.DataValueField = "LastName";
            ddlMultipleContacts.DataBind();
        }
        else if (getContacts.Count == 1)
        {
            txtContact1Name.Text = contact.FirstName + " " + contact.LastName;
        }
        else if (getContacts.Count == 2)
        {
            txtContact1Name.Text = contact[0].FirstName + " " + contact[0].LastName;
            txtContact2Name.Text = contact[1].FirstName + " " + contact[1].LastName;
        } 
```

# python - 为文本文件中的每个段落创建数组条目

> ID：10822265
> 
> 赞同：1
> 
> 时间：2012-05-30T18:39:16.350
> 
> 标签：python, arrays, text, paragraph

python中是否有一种简单的方法可以为文本文件中的每个段落创建一个数组条目，换行符是新条目的分界线？

这个想法是，如果我的文档有 5 个段落，每个段落之间有一个新行，那么数组中将有 5 个单独的条目。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T03:10:57.190

弄清楚了：

```
 f = open('sample_text.txt', 'r')

    data = f.read()
    paragraphs = data.split("\n\n")

    paragraphs[:] = (value for value in paragraphs if value != '\t') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:43:57.780

是的，有一个非常简单的方法可以做到这一点。您逐行解析文本文件。将每一行存储在一个临时对象中。如果一行只有一个字符长，并且是新行字符，则将该临时对象分配给适当的数组位置，然后开始将这些行附加到新的临时对象中。查找基本的 Python 语法以完成此操作，因为它应该相当容易。

# mysql - MySQL服务器安装配置失败

> ID：10822267
> 
> 赞同：3
> 
> 时间：2012-05-30T18:39:20.923
> 
> 标签：mysql

我试图在我的本地机器（Win7 32）上重新安装 MySQLServer，使用 Windows（x86，32 位），MSI 安装程序。

当向导配置服务器，安装后，给出错误“配置失败”，详细信息：

```
mysql-server-5.5-win32:6 - Looking for valid template
mysql-server-5.5-win32:13 - Found valid template.
mysql-server-5.5-win32:20 - Attempting to process template.
mysql-server-5.5-win32:26 - Processed template.
mysql-server-5.5-win32:33 - Attempting to configure service.
mysql-server-5.5-win32:40 - Configured service.
mysql-server-5.5-win32:46 - Attempting to start service.
mysql-server-5.5-win32:100 - Unable to configure service.
mysql-server-5.5-win32:100 - Product configuration controller finished configuration. 
```

为什么会这样？

会不会是因为我在安装向导中输入了错误的“旧”密码来设置新密码？如果是 - 如何清理 MySQL 服务器的所有先前设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T06:45:45.593

卸载 MySql 及其除 Oracle 安装程序外的所有组件，重新启动安装程序，正常进行，当您的错误出现时，完成安装过程。

下一步，在开始菜单搜索“服务”，执行服务管理工具，右键单击服务“MySql Server XX”，选择“Connexion”选项卡并在启动用户上选中“系统帐户”，启动该进程，它会工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-08T16:56:40.567

![在此处输入图像描述](../Images/52b48961bc21714b9f295fecb40979f8.png)

我在 3 天内一直在努力解决上面的问题，我认为当你想通过 .msi 安装程序使用本地连接（而不是勾选 TCP 连接）安装它时存在错误。在我选择此配置后，配置正确通过，没有失败配置。我的解决方案是在 TCP 连接上使用 set tick 运行它，然后在文件中的服务器文件夹中`my.ini`取消注释行`# skip-networking`。

其他提示：

*   关闭防火墙或为安装程序添加规则以接受公共/私人网络连接。
*   在管理员权限下使用`netstat -ab | more`命令检查端口使用情况
*   如果你在早期安装失败，运行`services.msc`命令找到你的服务（安装程序设置为默认值，如 MySQL56，MySQL56_1 - 取决于版本）获取此服务的名称并在管理员权限下运行 cmd 并键入`sc stop "coppiedServiceName"`该服务是否正在运行及更高版本`sc delete "coppiedServiceName"`
*   在某些论坛上说，如果打开 Windows Defender 或杀毒软件也可能有用
*   如果在重新安装后更改默认安装目录，请检查 C:\Program Files C:\ProgramData 上的旧安装文件并删除它们

希望有人觉得这很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-25T18:38:39.563

我在 Windows XP 上遇到了同样的问题。问题是由本地化引起的。我必须使用 regedit 更改所有用户的 AppData 文件夹的路径。原始路径包含非 ANSI 字符。

注册表项是这样的：“HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\User Shell Folders”

值名称是这样的：“Common AppData”

原始值为：“%ALLUSERSPROFILE%\Data aplikací”

我将其更改为：“%ALLUSERSPROFILE%\AppData”

然后安装成功。

注意：首先卸载 MySQL，然后更改路径，然后再次安装 MySQL。

# jquery - 基于下拉选择问题的jQuery交换图像

> ID：10822271
> 
> 赞同：0
> 
> 时间：2012-05-30T18:39:32.167
> 
> 标签：jquery

所以我正在编写一个脚本，当您更改下拉选择时，它会更改图像源。

我一切正常，但是我遇到的问题是在交换时，原始图像显示/闪烁，然后显示新图像。我想要的是平滑的淡出和淡入......我认为我的脚本就是这样做的，但不知何故它不起作用。你能找出原因吗？

```
image.fadeTo('fast',0, function() {
     image.attr("src", newImageSource).fadeTo('fast',1);
}); 
```

这同样有效，但它先闪烁原始图像，然后再显示交换的图像。我什至尝试过延迟，但没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:49:45.487

```
image.fadeTo('fast',0, function() {
     var tempImg = $('<img src="' + newImageSource + '">');
     $(tempImg).load(function(){
         image.attr("src", newImageSource).fadeTo('fast',1);
     });
}); 
```

我用新的图像源创建了一个临时图像，然后一旦它被加载（记住它不在 DOM 中，用户永远不会看到它）另一个图像会淡入。这确保新图像之前已经加载试图淡化它，这*可能*是导致你口吃的原因。

# trigger.io - 如何将另一个协作者添加到我的 trigger.io 项目？

> ID：10822272
> 
> 赞同：2
> 
> 时间：2012-05-30T18:39:32.647
> 
> 标签：trigger.io

现在我的合作者收到这样的错误：[错误] Forge API call to app/f7617c848[...]adcbe/should_rebuild 出错：应用匹配查询不存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T19:12:57.173

我们正在开发团队功能，但现在有点尴尬 - 您在共享项目上的工作方式是：

*   每个人都做一个“锻造创造”
*   保留在 src 子目录中创建的您自己的 identity.json
*   分享剩下的代码

# python - issubclass(C, Mapping) 未按预期运行

> ID：10822276
> 
> 赞同：2
> 
> 时间：2012-05-30T18:39:57.160
> 
> 标签：python, abstract-class

```
from collections import *
class C(object):
    def __iter__(self): pass
    def __contains__(self, i): pass
    def __len__(self): pass
    def __getitem__(self, i): pass
issubclass(C, Mapping) => False
[issubclass(C, cls) for cls in Mapping.__mro__] => [False, True, True, True, True] 
```

即C 确实实现了Sized、Iterable 和Container。

我本来希望，就像`issubclass(C, Sized)`检查`__len__`方法的存在一样，`issubclass(C, Mapping)`会检查每个直接超类所需的三个方法的存在吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T18:45:47.313

`collections.Mapping`是一个混合类，它提供方法`__contains__()`, `keys()`, `items()`, `values()`, `get()`,如果您提供方法的定义,`__eq__()`和. 但是，要使其正常工作，您需要从.`__ne__()``__len__()``__iter__()``__getitem__()``Mapping`

如果不想派生`Mapping`，也可以自己定义上述所有方法并使用

```
Mapping.register(C) 
```

使`issubclass(C, Mapping)`真实。

# jquery - Rails 3：如何使用选择框更改表单？

> ID：10822278
> 
> 赞同：0
> 
> 时间：2012-05-30T18:40:07.763
> 
> 标签：jquery, ruby-on-rails, forms

我有一个表单需要根据选择框中的不同选项进行更改。我需要的选择框有以下选项：Pay & Gifts（显示两个字段）、Pay Only（仅显示支付字段）、Gifts Only（仅显示礼物字段）。

这涉及 2 个属性，:pay 和:gifs。有没有办法让两个属性都有一个 f.collection 选择框？我知道我可能不得不使用 jquery 来显示和隐藏表单字段，并且这些字段是强制性的 (validates_presence_of) 基于选择...有关如何执行此操作的任何建议？

**_rewards_step.html.erb**

```
<h2>rewards</h2>

  <p>
<%= f.collection_select :pay, Upload::REWARDS, :to_s, :to_s %>
  </p>
  <p id="payfields">
    <%= f.label :pay %><br />
    <%= f.text_field :pay %>
  </p>
  <p id="giftsfields">
    <%= f.label :gifts %><br />
    <%= f.text_field :gifts %>
  </p> 
```

**上传.rb**

```
class Upload < ActiveRecord::Base
attr_accessible :pay, :gifts
attr_writer :current_step

validates_presence_of :pay, :if => lambda { |u| u.current_step == "rewards" }
validates_presence_of :gifts, :if => lambda { |u| u.current_step == "rewards" }

REWARDS = ['Pay & Gifts', 'Pay Only', 'Gifts Only'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:07:42.413

您将支付字段用于选择和输入作为文本。它可能不会很好，我建议您创建一个额外的字段供选择。如果它只是一个虚拟属性就足够了，不需要将其存储在数据库中，但您将需要它来进行验证。

隐藏字段的 jQuery 部分：

```
$("#rewards").change(function(){
  if ($("#rewards").val()=="Pay Only") {$("#gift_field").hide(); $("#pay_field").show(); }
  if ($("#rewards").val()=="Gift Only") {$("#gift_field").show(); $("#pay_field").hide(); }
  if ($("#rewards").val()=="Pay & Gift") {$("#gift_field").show(); $("#pay_field").show(); }
}) 
```

当然，您需要根据代码调整 id 和值。

验证部分可以被`:if`

```
attr_accessor :reward_type
validates_presence_of :pay, :if => lambda { |u| u.current_step == "rewards" && reward_type != "Gift Only" }
validates_presence_of :gifts, :if => lambda { |u| u.current_step == "rewards" && reward_type != "Pay Only" } 
```

这只是解决方案的骨架，请考虑一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:05:48.753

嗯，一般来说，你是对的，你将不得不使用 javascript 根据选择框中的选择来更新 DOM。您可以绑定到选择框本身的“更改”事件。就像是：

```
$('select#my_select_box_id').change(function(){ 
  //take a decision based on $(this).val()
  $('p#giftsfield').show()  //or hide based on what you want
}) 
```

但我不确定你的代码是否会像这样工作。您将选择框命名为“支付”，在下方有一个具有相同名称的文本字段。我认为第二个属性会覆盖第一个属性。此外，您的条件验证采用与条件相同的 lambda。因此，当满足该条件时，将验证这两个属性。但是我当然不知道完整的例子:-)。

# sharepoint-2010 - 连接 SharePoint 和 Microsoft Outlook

> ID：10822279
> 
> 赞同：0
> 
> 时间：2012-05-30T18:40:12.387
> 
> 标签：sharepoint-2010

我是 Microsoft SharePoint Server 2010 的新手。您能帮我完成这项任务吗：

> 用户希望通过 Microsoft Outlook 计划的缺勤输入，以便他们将它们输入到日历中，他们将直接从 Outlook 访问。进入预测缺席后，缺席是他们的上级，他们必须批准或拒绝缺席。不同的员工有不同的上级，所以对应该是“员工”->“上级”在SharePoint中输入一个单独的表格，管理员可以编辑，工作流验证必须在这个表格中找到合适的主管确认/认证。结果（确认/拒绝的缺席）必须通过电子邮件发送给员工，而上级必须在抄送中获得电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:36:49.247

听起来您有一个连接到 Outlook 的日历。当用户在 Outlook 中添加新条目时，该条目将添加到 SharePoint 日历中。在 SharePoint 中，您可以在日历列表中添加的项目上启动工作流。这个工作流将做逻辑来踢电子邮件，批准/拒绝。

# jquery - 在 iframe 中打开特定的 div #id

> ID：10822284
> 
> 赞同：0
> 
> 时间：2012-05-30T18:40:20.797
> 
> 标签：jquery, fancybox

如何使用带有 iframe 的 Fancybox v2.0 从另一个页面打开特定的 div #id？

我试过这个，但什么也没发生。

这是索引html：

```
<!DOCTYPE html>
<html>
<head>
<!-- Add jQuery library -->
<script src="lib/jquery-1.7.2.min.js" type="text/javascript" charset="utf-8">    </script>

<!-- Add fancyBox main JS and CSS files -->
<script type="text/javascript" src="source/jquery.fancybox.js?v=2.0.6"></script>
<link rel="stylesheet" type="text/css" href="source/jquery.fancybox.css?v=2.0.6" media="screen" />

<script type="text/javascript">
    $(document).ready(function() {

        $(".click").fancybox({
    type: 'ajax',
    'ajax': {
    dataFilter: function(data) {
    return $(data).find('#play')[0];
                           }
        }
    });
    });
</script>
  </head>
  <body>
  <a class="click fancybox.iframe" href="iframe.html">Iframe</a>
  </body>
  </html> 
```

这是 iframe.html

```
 <div id="play">Lorem ipsum dolor sit amet, consectetur adipiscing elit. </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:20:07.660

您可以使用以下代码实现相同的目的

```
$("#click").click(function(e){
    e.preventDefault();
    $.get($(this).attr('href'),function(data){
         var content = $(data).filter('#play').html();  
         $.fancybox({
        'padding'   : 20,
        'transitionIn'  : 'elastic',
        'transitionOut' : 'elastic',
        'content'   : content
        }); 
    }); 
```

});

它所做的是首先获取内容，`iframe.html`然后仅查找`#play`div 内容并使用 fancybox 显示它。

这是一个[工作演示](http://d.freelance.com/so/fancy-ajax/)

如果您想检查原始内容，这里是原始[iframe.html 。](http://d.freelance.com/so/fancy-ajax/iframe.html)

# c++ - std::equal 与 reverse_iterator

> ID：10822289
> 
> 赞同：8
> 
> 时间：2012-05-30T18:40:27.467
> 
> 标签：c++, stl

使用`reverse_iterator`with合法`std::equal`吗？

例如，这些是否合法？

```
std::equal(v.begin(), v.end(), w.rbegin())

std::equal(v.rbegin(), v.rend(), w.begin())

std::equal(v.rbegin(), v.rend(), w.rbegin()) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T18:55:21.687

所有都是有效的，因为反向迭代器*实际上*是*正向迭代器*。

“反向迭代器”不是迭代器类别。记住一些迭代器类别：

*   可以取消引用 ( `*`) 和递增 ( `++`) 的迭代器是前向迭代器。
*   也可以递减的前向迭代器是双向迭代器。
*   随机访问迭代器是一个双向迭代器，它也具有`+`和`-`运算符。

另一方面，反向迭代器是双向迭代器或随机访问迭代器，它反向查看集合。看着

[http://www.cplusplus.com/reference/std/iterator/reverse_iterator/](http://www.cplusplus.com/reference/std/iterator/reverse_iterator/)

...尤其是它在“成员类型”标题下对 iterator_category 的说明。

# java - 将请求映射到非标准 Web 服务

> ID：10822291
> 
> 赞同：0
> 
> 时间：2012-05-30T18:40:36.163
> 
> 标签：java, web-services, jakarta-ee, wsdl, jaxb

我正在我们网络上的两个旧应用程序之间架起一座桥梁。一个有一个 Web 服务，它接受 URL 编码参数 (GET) 并返回一个 XML 文档。像这样：

[http://mytest.com/getData/?format=xml&dateStart=2012-01-01](http://mytest.com/getData/?format=xml&dateStart=2012-01-01)

我的问题是这个 - 我可以将 XSD 用于返回的 xml 并将其编组为 Java 对象（xjc 定义）.. 但是有没有办法将请求/响应映射到 jax-ws webservice（或类似的？）它不是SOAP - 所以我不能走 WSDL、CXF/JAX-WS 路线，可以吗？

我真的希望有一个优雅的解决方案，而不必从头开始编写所有代码（URL 请求，返回流，然后编组）。是否有允许我配置请求的框架？我认为 WSDL 支持 verb="GET" 但遗憾的是，我似乎无法让它与 Apache CXF 和 WSDL2JAVA 一起使用。

我完全不在这儿吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:52:18.367

我想`JAX-RS`这里可能有用。只需创建 XSD 模式并将它们转换为 Java 类，然后为该站点使用 REST 客户端。

你也可以这样做`CXF`。见[这里](http://cxf.apache.org/docs/jax-rs-client-api.html#JAX-RSClientAPI-HTTPcentricclients)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:00:31.447

查看 WSGen，或者您可以将 ?WSDL 添加到 JAX-WS 端点的末尾以获取生成的 WSDL。这样，您所要做的就是创建类似于 JAX-RS 的 JAX-WS 注释类，并生成 WSDL，它应该能够毫无问题地处理 XJC 生成的对象。

[http://metro.java.net/guide/ch02.html#create-a-metro-web-services-endpoint](http://metro.java.net/guide/ch02.html#create-a-metro-web-services-endpoint)

# windows-7 - Windows 8 中触摸设备架构的变化

> ID：10822297
> 
> 赞同：1
> 
> 时间：2012-05-30T18:41:11.837
> 
> 标签：windows-7, driver, windows-8, wdk

Windows 8 中的触摸设备架构有什么变化吗？我有一个使用驱动程序套件 7 编写和编译的驱动程序，如果我尝试安装它，它是否可以在 Windows 中工作。或者如果它不会，那么我可以使用 Windows 驱动程序套件 8 编译它吗？

# actionscript-3 - 不使用 FileReference.browse() 将文件上传到服务器

> ID：10822302
> 
> 赞同：0
> 
> 时间：2012-05-30T18:41:23.370
> 
> 标签：actionscript-3

我正在尝试使用`FileReference`课程将文件上传到服务器。该文件是在运行时编码的 mp3，没有将他保存在本地硬盘上。

是否有可能以某种方式将 mp3Encoder 放入其中`FileReference`？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:44:20.217

假设您将 mp3 作为 ByteArray （如果您没有将它保存到磁盘，不确定它在运行时会如何存在），您可以使用 URLLoader 类，如下所示：

```
var scriptRequest:URLRequest = new URLRequest("PATH_TO_YOUR_UPLOAD_SCRIPT");
var scriptLoader:URLLoader = new URLLoader();
var scriptVars:URLVariables = new URLVariables();

scriptLoader.addEventListener(Event.COMPLETE, handleLoadSuccessful);
scriptLoader.addEventListener(IOErrorEvent.IO_ERROR, handleLoadError);

scriptVars.var1 = MP3_AS_BYTE_ARRAY;

scriptRequest.method = URLRequestMethod.POST;
scriptRequest.data = scriptVars;

scriptLoader.load(scriptRequest);

function handleLoadSuccessful($evt:Event):void
{
    trace("Message sent.");
}

function handleLoadError($evt:IOErrorEvent):void
{
    trace("Message failed.");
} 
```

然后在服务器上，您只需将流保存到文件并为其提供正确的 mp3 mime 类型。

有一个不错的教程，这个例子是从中改编的，在这里：[http ://evolve.reintroducing.com/2008/01/27/as2-to-as3/as2-%E2%86%92-as3-loadvars-as3 -相等的/](http://evolve.reintroducing.com/2008/01/27/as2-to-as3/as2-%E2%86%92-as3-loadvars-as3-equivalent/)

如果您需要将请求作为 multipart/form-data 发送（所以它似乎是一个附件），这里有一个很好的例子：http: [//marstonstudio.com/2007/10/19/how-to -采取-a-snapshot-of-a-flash-movie-and-automatically-upload-the-jpg-to-a-server-in-three-easy-steps/](http://marstonstudio.com/2007/10/19/how-to-take-a-snapshot-of-a-flash-movie-and-automatically-upload-the-jpg-to-a-server-in-three-easy-steps/)

# c# - 遍历数据集

> ID：10822304
> 
> 赞同：38
> 
> 时间：2012-05-30T18:41:38.813
> 
> 标签：c#, dataset

我有一个`DataSet`名为`DataSet1`. 它包含未知数量的表以及这些表中未知数量的列和行。我想遍历每个表并查看每一行中每一列的所有数据。我不确定如何编码。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-05-30T18:45:16.457

```
foreach (DataTable table in dataSet.Tables)
{
    foreach (DataRow row in table.Rows)
    {
        foreach (object item in row.ItemArray)
        {
            // read item
        }
    }
} 
```

或者，如果您需要列信息：

```
foreach (DataTable table in dataSet.Tables)
{
    foreach (DataRow row in table.Rows)
    {
        foreach (DataColumn column in table.Columns)
        {
            object item = row[column];
            // read column and item
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-30T18:43:18.203

只是循环...

```
foreach(var table in DataSet1.Tables) {
    foreach(var col in table.Columns) {
       ...
    }
    foreach(var row in table.Rows) {
        object[] values = row.ItemArray;
        ...
    }
} 
```

# python - 使用 pyodbc 在 accdb 文件中写入列注释

> ID：10822306
> 
> 赞同：1
> 
> 时间：2012-05-30T18:41:41.290
> 
> 标签：python, ms-access, pyodbc

我正在尝试将列备注（即注释、描述符）写入/更改访问数据库文件（accdb）中的现有列。

连接到数据库后，我可以看到注释（如果存在）：

```
cur = connection.cursor()
columnInfo = cur.columns( table='tableName' ).fetchall()

# to see the remark for the first column, for example:
print( columnInfo[0].remarks ) 
```

但是，我不知道如何通过 pyodbc （或通过其他任何方式）将我自己的评论写到专栏中。我也很想知道这个元数据在哪里。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:49:59.273

一种选择是直接执行查询来操作数据库。StackOverflow 上有[这种方法的示例。](https://stackoverflow.com/questions/1060035/using-pyodbc-on-ubuntu-to-insert-a-image-field-on-sql-server)

Google Code 也有[一些很好的例子](http://code.google.com/p/pyodbc/wiki/GettingStarted)。

# visual-studio-2010 - 带有 GUI 的 Visual Studio 2010 插件/项目

> ID：10822310
> 
> 赞同：0
> 
> 时间：2012-05-30T18:41:52.010
> 
> 标签：visual-studio-2010, visual-studio-addins

我正在试图弄清楚如何使用 gui 进行 VS2010 插件，（就像一个带有几个字段和一个输入按钮的简单弹出窗口）

我在堆栈上发现了一些东西，上面写着 Visual Studio（2010？）项目是我需要的（而不是插件），但我能找到的所有教程都是针对 VS2008 的，并不适用于 vs2010。答案是否已过时？我用什么？

谁能告诉我我需要使用什么技术？

我们有一些 powershell 脚本可以为我们获取参数并生成代码，我想单击工具（或工具栏按钮）弹出窗口下的菜单项并询问参数值，单击确定，然后运行 ​​powershell。（其他人写了powershell，我只想为他们创建一个内置的gui）

作为奖励，我想将生成的文件添加到项目中，但这是下线。

您可以指出我的任何提示或教程将是一个巨大的福音。

# .htaccess - 如何仅在到达网站时应用 htaccess？

> ID：10822311
> 
> 赞同：0
> 
> 时间：2012-05-30T18:41:56.800
> 
> 标签：.htaccess, redirect

让我解释一下这个问题。我们有 2 种语言的网站：fr & nl（荷兰语）。

当您到达我们的网站时，您将登陆 www.domain.be，如果您的浏览器语言设置为“nl”并且设置为“en”，它会将您（如以下代码中所见）重定向到荷兰语版本（因为荷兰人经常在他们的浏览器中使用这种语言）或将您留在 www.domain.be / fr.domain.be （这两个 url 都可以调用该网站 - fr...一个更多的是响应 nl ... 一）

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{HTTP:Accept-Language} ^nl [NC]
RewriteRule ^$ http://nl.domain.be/ [L,R] 
RewriteCond %{HTTP:Accept-Language} ^en [NC]
RewriteRule ^$ http://nl.domain.be/ [L,R]
</IfModule> 
```

在网站上，您可以通过单击 2 个链接（在右上角）来选择是否要访问 fr.domain.be 或 nl.domain.be。当您单击其中一个链接时，即使您想转到 fr 部分（在荷兰语部分导航时），htaccess 也会重定向您，并且在 nl 部分也是如此。

我该如何解决？我希望 htaccess 仅在您第一次访问该网站时重定向您，然后被停用并允许用户根据需要选择他的语言。

请你帮助我好吗？我在这两天...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:50:40.290

您只是重定向站点 base `/`，因此直接切换到另一个页面应该不是问题。

手动切换时不能只使用假索引页吗？像[http://nl.domain.be/index](http://nl.domain.be/index)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:15:12.023

您可以为规则集创建多个条件，这样您就可以添加一个附加检查，即重定向仅在您不将 HTTP_REFERER 与您的域匹配时发生。

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{HTTP:Accept-Language} ^nl [NC]
RewriteCond %{HTTP_REFERER} !^*\.domain\.be/ [NC] 
RewriteRule ^$ http://nl.domain.be/ [L,R] 
RewriteCond %{HTTP:Accept-Language} ^en [NC]
RewriteCond %{HTTP_REFERER} !^*\.domain\.be/ [NC] 
RewriteRule ^$ http://nl.domain.be/ [L,R]
</IfModule> 
```

这 ！当 HTTP_REFERER 不匹配 url 模式，即“（通配符）.domain.be”时，这意味着基本上你说的不是。

如果它们当前在您的站点上并尝试更改语言，这将阻止规则运行。

注意：我不在一个 apache 盒子附近来测试这个，所以我的语法可能是关闭的，但这应该会让你走上正确的道路。

# google-app-engine - Google AppEngine 上网站的 Squid 反向代理

> ID：10822322
> 
> 赞同：0
> 
> 时间：2012-05-30T18:42:51.717
> 
> 标签：google-app-engine, reverse-proxy, squid

我正在 Google AppEngine 上为我的网站设置 squid 3.1 反向代理服务器（加速器）。squid.conf 看起来像这样，

```
http_port 80 accel defaultsite=my.public.domain.name ignore-cc
cache_peer mysite.appspot.com parent 80 0 no-query originserver login=PASS name=gaeAccel
acl gae dstdomain my.public.domain.name
http_access allow gae
http_access deny all
cache_peer_access gaeAccel allow gae
cache_peer_access gaeAccel deny all 
```

Squid 将我重定向到 Google 的搜索主页。

一旦我更改`mysite.appspot.com`为`cache_peer`其他任何内容，例如`www.yahoo.com`，它就起作用了。

任何想法？

它在 Ubuntu Server 12.04、Squid 3.1 上。

提前致谢，

将要

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T07:50:55.043

如果您只想绕过 GFW，请使用[Cloudflare](http://www.cloudflare.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:11:11.290

使用您自己的代理服务器使其成为单点故障，有效地破坏了 GAE 的主要目的之一——可靠性。

App Engine 已经拥有自己的透明缓存服务器：

1.  对于静态内容，您可以通过[`expiration`属性](https://developers.google.com/appengine/docs/java/config/appconfig#Setting_the_Browser_Cache_Expiration)显式设置。

2.  对于动态内容，您可以设置`Cache-Control`http 标头，然后 Google 透明缓存将支持该标头：http: [//davepeck.org/2011/10/25/a-word-on-app-engine-caching/](http://davepeck.org/2011/10/25/a-word-on-app-engine-caching/)

注意：您仍需支付 0.12 美元/Gb 的带宽费用。但是OTOH，你代理和它的流量也不是免费的。

# c# - 将用户控件作为参数传递给 xaml 中的资源

> ID：10822323
> 
> 赞同：1
> 
> 时间：2012-05-30T18:42:52.227
> 
> 标签：c#, wpf, xaml, user-controls, parameters

我有一个应该是一个相对简单的问题，但我在任何地方都找不到答案。我在 xaml 的 UserControl 的资源部分中声明了一个转换器。该转换器有一个我已经设置的属性，我想在其中传递“this”，即名为 EventTagger 的 UserControl。在绑定中，您通常可以使用 ElementName="EventTagger" 访问至少主 UserControl 的属性，但我不知道如何将其作为转换器的属性，因为我不能在这里使用绑定。我也会在这里传递 DataContext 的内容，但也不知道如何传递它。想法？

```
<UserControl Name="EventTagger" ...>
    <UserControl.Resources>
        <TagFrameVerificationConverter x:Key="tagFrameVerificationConverter Tagger="?"/>
    </UserControl.Resources>
     ...
</UserControl> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:21:08.193

转换器不会有任何`DataContext`因此即使您`IValueConverter`派生自`DependencyObject`并且 Tagger 是`DependencyProperty`您将无法使用`DataContext`,`RelativeSource`或绑定它`ElementName`。只有`Source`会起作用（在你的情况下这不是很好）。

您可以[`x:Reference`](http://msdn.microsoft.com/en-us/library/ee795380.aspx)改用

```
<UserControl Name="EventTagger" ...>
    <UserControl.Resources>
        <TagFrameVerificationConverter x:Key="tagFrameVerificationConverter"
                                       Tagger="{x:Reference EventTagger}"/>
    </UserControl.Resources>
</UserControl> 
```

如果您使用的是 VS2010 设计器，您会收到一条错误消息

> 服务提供者缺少 INameResolver 服务

这只是一个设计器错误，可以按照此处在 connect:
[Visual Studio 2010 InvalidOperationException using x:Reference in WPF](http://connect.microsoft.com/VisualStudio/feedback/details/660141/visual-studio-2010-invalidoperationexception-using-x-reference-in-wpf)中的描述解决。
如果我们处于设计模式，我们会`ProvideValue`返回。`null`

```
[ContentProperty("Name")]
public class Reference : System.Windows.Markup.Reference
{
    private static DependencyObject _dependencyObject = new DependencyObject();
    public Reference()
        : base()
    { }

    public Reference(string name)
        : base(name)
    { }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        if (DesignerProperties.GetIsInDesignMode(_dependencyObject) == true)
        {
            return null;
        }
        return base.ProvideValue(serviceProvider);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:05:39.440

因此，根据评论，这样的工作是否可行：

```
<UserControl Name="EventTagger" ...>
    <UserControl.Resources>
        <TagFrameVerificationConverter x:Key="tagFrameVerificationConverter" Tagger="{Binding}"/>
    </UserControl.Resources>
     ...
</UserControl> 
```

您的`Tagger`属性应该是 a`DependencyProperty`以便它可以正确处理绑定，然后`"{Binding}"`仅表示“绑定到当前数据上下文”。

对您的问题的更一般的答案是，您可以在转换器上拥有公共属性，并且可以像在上面的示例中那样在 XAML 中设置这些属性。

# android - C2DM - 设备和第三方服务器电子邮件帐户查询

> ID：10822324
> 
> 赞同：0
> 
> 时间：2012-05-30T18:43:01.993
> 
> 标签：android, android-c2dm

完全从用户帐户的角度来看，C2DM 推送系统的工作需要遵循以下几点吗？

1.  [在https://developers.google.com/android/c2dm/signup](https://developers.google.com/android/c2dm/signup)上手动注册并提供我的 android 应用程序的包名称。考虑给出的 emailId 是：foo@gmail.com

2.  使用电子邮件 id 以编程方式从我的 android 应用程序注册，foo@gmail.com

3.  从第三方应用服务器发送推送通知。使用 foo@gmail.com 和密码生成身份验证令牌。

我的问题是，是否必须在上述所有地方提供相同的 emailId？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:58:30.740

是的，请通过链接

[https://developers.google.com/android/c2dm/](https://developers.google.com/android/c2dm/)

发件人 ID 与应用程序开发人员关联的电子邮件帐户。发送者 ID 在注册过程中用于识别允许向设备发送消息的 Android 应用程序。此 ID 通常基于角色而不是个人帐户，例如 my-app@gmail.com。

[http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html)

[http://android-developers.blogspot.in/2010/05/android-cloud-to-device-messaging.html](http://android-developers.blogspot.in/2010/05/android-cloud-to-device-messaging.html)

[http://www.abolkog.com/portal/java-programming/117-android-push-notifications](http://www.abolkog.com/portal/java-programming/117-android-push-notifications)

# package - 安装 Salesforce 包时如何播种数据或运行脚本

> ID：10822332
> 
> 赞同：1
> 
> 时间：2012-05-30T18:43:51.553
> 
> 标签：package, salesforce

我正在开发一个 Salesforce 包，它依赖于一些预先填充的数据才能正常工作（即：填充自定义设置的国家列表）。

1.  有没有办法在安装/升级时预填充这些对象？（例如上传带有我需要插入一些自定义对象的数据的csv）。
2.  有没有办法在安装/升级时运行自定义脚本？（例如，让脚本更新新字段的信息，或使现有数据适应修改后的对象结构）。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T03:57:52.143

这实际上是 Summer '12（API 版本 25.0）版本中的一项新功能。有两个新接口需要实现，InstallHandler 和 UninstallHandler，它们可以分别设置为在安装和卸载包时运行。您可以实现 InstallHandler 并填充该类中的对象/自定义设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:48:44.947

另一种方法是使用自定义设置值来了解安装过程是否已运行。然后，您可以使用包的入口点来检查它，如果值表明它需要运行，则执行该过程。如果你没有单一的入口点，那就有点复杂了。

# objective-c - 如何检测我的应用是否正在加载数据，如果是，则显示加载屏幕

> ID：10822343
> 
> 赞同：0
> 
> 时间：2012-05-30T18:44:04.350
> 
> 标签：objective-c, ipad, cocos2d-iphone, screen, loading

每当获取数据时，我想在我的 cocos2d 项目（ipad）中实现一个加载屏幕。有没有一种方便的方法来做到这一点而无需硬编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:57:40.090

添加标志/启动活动指示器/等。这表明加载在计算过程开始时已经开始，并在结束后停止。如果您打算添加进度条，请同时更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:59:16.407

[查看这个 github 项目。](https://github.com/jdg/MBProgressHUD)它为您提供了一个框架，用于检测您想要发生的任务何时正在进行。它还可以让您决定任务完成后会发生什么。

# macos - 使用 veclib 在 OS X 上进行频率分析

> ID：10822344
> 
> 赞同：3
> 
> 时间：2012-05-30T18:44:10.823
> 
> 标签：macos, cocoa, fft, foundation, accelerate-framework

我正在寻找任何关于 os x 的频率分析示例。我知道我应该计算音频样本的 FFT。我有来自苹果网站的用于执行 ffts 的代码示例：

[http://developer.apple.com/library/mac/#featuredarticles/AccelerateFrameworkData/_index.html](http://developer.apple.com/library/mac/#featuredarticles/AccelerateFrameworkData/_index.html)

但是，我正在寻找任何示例来解释实部和虚部如何转换为频率和幅度分量。我有一个非常简单的音调，我想计算它的频率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T04:49:43.987

Paul R 已经回答了每个 FFT bin 的中心频率。但是请注意，您希望分析的音频中的精确频率可能不在任何 FFT bin 的中心。因此，您可能正在寻找的可能是使用 FFT 的频率估计算法，或者，对于包含音乐或语音的音频，音高检测/估计方法，这与频率估计不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T19:49:44.237

在 FFT 之后，您需要获取每个复数输出 bin的*大小：*

```
magnitude = sqrt(re[i]*re[i] + im[i]*im[i]); 
```

*频率*与 bin 索引有关，i ：

```
freq = i * Fs / N; 
```

其中 Fs = 采样率 (Hz)，N = FFT 大小。

如果你只是在寻找一个单音，那么找到幅度最大的 bin 索引，然后使用上面的公式将该索引转换为频率。请注意，您只需要检查从 1 到 N/2-1 的 bin 索引。

# ssis - 覆盖 SSIS 环境变量

> ID：10822347
> 
> 赞同：2
> 
> 时间：2012-05-30T18:44:28.453
> 
> 标签：ssis

我已经设置了一个包配置，其中配置类型为（间接 XML 配置文件）。环境变量指向`C:\SSIS\MasterConfig\MasterConfig.dtsConfig`文件的位置。

这很好用，可以轻松地从测试迁移到 UAT 再到生产。

问题出在我们的开发环境中，每个开发人员都有自己的数据库。我正在尝试为代理作业将覆盖主配置文件的每个开发人员设置一个代理作业。代理作业命令行是“：

> /FILE "C:\SSIS\Packages\Developer1\LoadPackage.dtsx" /CONFIGFILE "C:\SSIS\Packages\Developer1\Developer1_Config.dtsConfig" /X86 /CHECKPOINTING OFF /REPORTING E

使用 2008 R2。

> 我期待使用 /CONFIGFILE "C:\SSIS\Packages\Developer1\Developer1_Config.dtsConfig" 代替 C:\SSIS\MasterConfig\MasterConfig.dtsConfig 文件。

仅使用主配置文件。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:05:41.653

[定义集成服务包的配置方法](http://msdn.microsoft.com/en-us/library/cc671625.aspx)中涵盖了您遇到的问题。基本上，命令行配置正在应用，但随后被设计时值覆盖。

我不确定你的解决方案是什么。除了我们必须处理多实例盒子（开发和测试共享一个物理主机）之外，这里的情况半相似。为了解决这个问题，我们跳过了环境变量位，并决定设计时值总是指向 dev。测试、UAT 和 PROD 将仅通过 SQL 代理运行包，因此我们的作业明确定义配置资源的连接字符串。不过，您的情况是倒退的，设计时值在任何地方都很好，但开发人员除外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T23:41:39.093

这就是我们所做的。

无论是指向生产、QA 还是开发（甚至是本地），所有变量的名称都相同。我们改变的是指向配置文件的变量值。

我们创建配置文件，其中包含每个盒子的所有适当连接信息。所以我们将为每个数据库至少有 3 个单独的配置文件。我们将它们命名为 DB_Prod.config、DB_QA.config、DB_Dev.config，然后是 DB_Joe_local.config（如果您想要一个指向本地 db.config 的文件）。

然后我们创建 .bat 文件，将我们的变量设置为正确的环境。我有 3 个不同的，一个用于 QA，一个用于开发，一个用于我的本地环境。

环境变量将命名为 DB1_adonet、DB1_ole、AS400 等。没有 QA、prod 等指示。

设置起来有点麻烦，但是一旦开始使用它，唯一的问题就是记住您为自己设置的环境。此外，您需要记住，当缓存值时，您需要在环境更改之间打开和关闭开发工作室。此外，如果您碰巧在本地运行包，它将使用您的环境变量值，而不是您运行它的框。

最后一点，我们已将所有配置文件签入 TFS。便于分发文件。

# wpf - WPF RibbonApplicationMenuItem 命令绑定

> ID：10822350
> 
> 赞同：1
> 
> 时间：2012-05-30T18:44:46.223
> 
> 标签：wpf, binding, mvvm, command

使用 WPF 功能区构建菜单。我的应用程序采用 MVVM 模式。要将 RibbonButton 连接到 ViewModel，请使用以下表单：

```
Command="{Binding Logoff}" 
```

它工作正常。现在，在 RibbonApplicationMenuItem 上使用相同的命令：

```
 Command="{Binding Logoff}" 
```

不会引发任何调用或事件。RibbonApplicationMenuItem 调用 ViewModel 中的方法需要什么？当我在代码隐藏中创建方法时，它可以工作。但这与我正在开发的 MVVM 架构背道而驰。有什么建议可以通过绑定到 ViewModel 来连接 RibbonApplicationMenuItem 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:59:33.533

经过多次搜索，我找到了问题的解决方案。包中的 Ribbon 有文件 MicrosoftRibbonForWPFSourceAndSamples，它有一个很好的例子来说明如何使用 RibbonApplicationMenuItem。我使用了 DelegateCommand 方法，该方法在此包中作为示例。

我在 View 的构造函数中使用了以下语法：

```
DelegateCommand  = new rbiEfetuarLogoff.Command(mainWindowViewModel.DoLogoff); 
```

我希望它对其他人有用。

最好的祝福

# c# - 静态初始化模式

> ID：10822354
> 
> 赞同：0
> 
> 时间：2012-05-30T18:45:21.337
> 
> 标签：c#, initialization

通过静态*init*方法初始化静态字段并确保不再调用该方法的最佳方法是什么？（在程序的生命周期内不超过一次）

这是我目前想到的一个例子，对我来说似乎很简单，但我找不到任何类似模式的例子来处理这个问题：

```
class Entity
{
    static Manager manager;
    static bool isInitialized;

    public static void Initialize(Manager manager)
    {
        if (isInitialized)
            throw Exception("Class Entity already initialized."
                 + "Do not call Entity.Initialize() twice.");
        isInitialized = true;
        Entity.manager = manager;

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T18:47:09.883

> 通过静态 init 方法初始化静态字段并确保不再调用该方法的最佳方法是什么？

你真的*必须*这样做吗？为什么您不想创建一个实例`Manager`并使其可用于通过依赖注入依赖它的代码？这将使您的代码更清洁：

*   您可以使用不同的初始化路径对其进行测试
*   您不需要对“坏”重复初始化进行任何检查
*   您不需要构造调用代码来为此类指定单个初始化点。（当然，您可能需要为 IoC 容器做类似的事情......）
*   您也可以让依赖于它的代码更具可测试性
*   依赖的代码`Manager`将以更清晰的方式表达该依赖

我怀疑你没有找到任何类似的例子，因为它是一种反模式。

如果您*确实*采用当前的方法，那么您也应该尝试使其成为线程安全的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T18:50:06.247

不要想太多，如果这种模式适合你，那就去吧。并不总是有一个“正确”的答案，仅仅为了坚持它们而试图坚持死板的模式和实践也不是一个好主意。恕我直言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T18:50:58.693

很抱歉说明了这一点，但您可以使用对象初始化程序或静态构造函数。除此之外，您可以*不调用该方法*。严重地。为什么有人会调用一个名为*initialize*的方法。

你能做的就是[这个](http://msdn.microsoft.com/en-us/library/system.componentmodel.editorbrowsableattribute.aspx)。您可以使用此属性从 IntelliSense 和类似的方法中隐藏该方法。也防止它弄乱下拉列表

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T18:51:39.067

你不能只使用静态构造函数吗？

当然，您无法控制何时调用此构造函数，但不知道这是否是必需的。

[http://msdn.microsoft.com/en-us/library/k9x6w0hc(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/k9x6w0hc(v=vs.80).aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T18:54:29.440

您可能希望使用带参数的单例模式来仅公开 Manager 变量的某些功能。

```
class Entity
{
    private Manager _manager = null;

    public Manager manager
    {
        get
        {
            return _manager;
        }
        set
        {
            if (manager == null)
            {
                _manager = value;
            }
        }
    }
    /* rest of class */
} 
```

现在您可以将 manager 对象用作任何变量，但重复设置不会修改值。

```
this.manager = new Manager(0); // sets the manager
this.manager = new Manager(1); // does nothing 
```

现在要在构造函数中的某个地方或某个重置函数中完成模式，您可能想要做一个

```
this._manager = null; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T18:51:09.543

您的实现不是线程安全的，但在其他方面是合理的。如果它打算在多线程环境中使用，请添加锁定。

在您的示例中，悬而未决的问题是如果多个调用者（可能来自多个线程）使用*不同*的参数调用初始化方法会发生什么。这就是使您的模式与众不同的原因，并阻止您使用明显的静态构造函数或对象初始化程序。

# algorithm - 如何将 RGB 代码转换为 8 个简单的间隔（可能？）

> ID：10822355
> 
> 赞同：4
> 
> 时间：2012-05-30T18:45:21.473
> 
> 标签：algorithm, colors, rgb, pseudocode

我正在从事计算机科学的最终学士项目，现在我陷入了死胡同。这是我遇到的问题：

我正在尝试以 8（八）种简单颜色中的任何一种对任何颜色（rgb 代码）进行分类。简而言之，我需要找到 8 个可以放置任何颜色并被视为基本颜色（红色、蓝色、绿色、黑色、黄色、紫色、灰色、棕色）的间隔。

*示例：*
(18,218,23) 被归类为“绿色”
(81,,214,85) 也是“绿色”
，但
(15,52,16) 需要为“黑色”
(110,117,110) 需要为“灰色”

所以有 256 x 256 x 256 种可能的颜色，我需要将它们分成 8 种（间隔）基本颜色。

我正在等待一些建议。

干杯！

* * *

为了清楚起见（正如我在评论中看到的那样），我正在寻找一组特定的 8 种颜色（红色、黑色、绿色、棕色、蓝色、紫色、灰色、黄色）。对不起上面的橙色！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T19:05:53.873

不要在 RGB 中执行此操作，转换为更方便的颜色空间[HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)可能是最简单的 - 然后 8 种“颜色”只是沿色调轴的 8 个间隔。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T18:49:50.480

一个简单的解决方案是从您标记为特定颜色的定义点计算距离。这不是一个完整的证明解决方案，但是它是一个简单的解决方案，并且应该可以正常工作。

长答案：色彩空间很烦人，不能很好地转化为标签。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-30T18:53:12.047

根据您的示例，我将首先确定所有组件是否大致相同，或者是否突出。如果它们大致相同，则确定这些值是否小到足以显示为黑色，则为灰色。如果一个值与其他两个不同，则很容易检查哪个不同并相应地选择六种可能的颜色之一。

或者，根据阈值将每个组件设置为 0 或 1，然后您将有 8 种组合映射到 8 种颜色。

```
threshold = 100:
(18,218,23)   -> (0, 1, 0) - to be classified as "green"
(81,214,85)   -> (0, 1, 0) - also "green"
(15,52,16)    -> (0, 0, 0) - to be "black"
(110,117,110) -> (1, 1, 1) - to be "grey" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T19:02:09.923

RGB 对于这种东西来说太可怕了，所以你的第一步应该是将颜色转换为[Lab 颜色空间](http://en.wikipedia.org/wiki/Lab_color)。您可以在线找到此转换的许多开放实现。一旦你有了 Lab 颜色，一切都变得非常简单。这三个值变成了三个维度的坐标，您可以根据颜色轻松地对其进行划分——查看维基百科链接中的图像。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T19:11:08.627

不太了解配色方案，但计算欧几里得距离将是一个很好的解决方案。

# vbscript - 使用 VBScript 读取 BIOS 环境变量

> ID：10822361
> 
> 赞同：0
> 
> 时间：2012-05-30T18:45:31.120
> 
> 标签：vbscript, bios

我正在寻找 BIOS 环境变量，而不是 OS 环境变量。有人知道如何在 VBScript 中做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:55:30.923

使用 WMI，并查询 Win32_BIOS 类。

# c# - 从纯文本构建表格

> ID：10822365
> 
> 赞同：0
> 
> 时间：2012-05-30T18:45:55.843
> 
> 标签：c#, .net, winforms, parsing, vtl

我正在尝试构建一个可以执行以下操作的 winforms 应用程序：

1.  获取 PDF 文件
2.  提取数据（基于某种模板或配置文件）
3.  建立数据表
4.  序列化数据表并将其上传到 Web 服务

截至目前，我已将 PDF 文件转换为文本字符串，但在为模板提供格式时遇到了麻烦。起初，我尝试制作自己的 XML 自定义配置文件——虽然这可以满足项目的要求，但我发现以足够通用的方式表达必要的指令非常困难。首先，我尝试逐行处理文本并为各种指令使用一系列标志。这个概念似乎会起作用，直到我意识到数据表通常跨越多个页面，中间有多余的文本。我最初的处理尝试是这样的：

1.  加载第一条指令（开始标志、结束标志、动作（例如创建表）和表结构）
2.  当到达结束标志时加载下一条指令

不幸的是，这并没有考虑到循环或对这一切的工作方式提供足够的控制。在某些情况下，我需要获取附加到每一行数据的信息。我想出了如何使用排队指令执行此操作，然后在构建表的其余部分时返回并再次处理它们。但循环问题仍然存在，因为每个表都是根据指​​令命名的。

现在我正在研究 VTL 并试图看看像 Vici 这样的项目是否能帮助我。它已经到了我创建一种伪脚本语言只是为了完成我需要的东西的地步，而且它变得太难了。

***TLDR 版本：*** **是否有任何库或项目可以帮助我使用某种模板或配置文件从纯文本构建数据表？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:10:56.097

您是否考虑过不使用模板或配置文件的前景？使用这样的文件有什么好处？例如，您不能创建一个即兴库并用 C# 编写实际的处理代码吗？我做了你现在正在做的同样的事情，一次，回想起来，这是我应该做的。

您自己说过，您正在开发某种脚本语言。这已经意味着代码更改。无论您使用什么，如果场景足够复杂，它必然会随着代码更改或类似工作而告终。您可以将处理代码与库代码分开打包，并单独更新包含它的程序集。

# vim - 根据已经输入的内容，对字母进行不同的映射

> ID：10822368
> 
> 赞同：2
> 
> 时间：2012-05-30T18:46:18.887
> 
> 标签：vim

我有一个自定义键盘布局。所以我有 vim 命令`h`,`j`和绑定到其他字母`k`，`l`例如我已经绑定`j`到`e`，像这样：`nmap e j`。

这样做的问题是，在操作员挂起模式下，我有时想`e`表示`j`，有时我希望它表示`e`。例如，当我按下时，`de`我想要它的意思`dj`，但是当我按下时，`te`我想要它的意思`te`。

有没有办法解决这个问题？

我可以这样做`omap de dj`，但如果我想通过键入来删除更多行，那将不起作用`d3e`。如果有（我不这么认为，或者有吗？）某种方式来匹配数字，例如使用 #，那么我可以使用`omap d#e d#j`. 或者也许有一些方法可以根据我已经在操作员挂起模式下输入的内容来更改映射。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T19:32:26.333

1.  你几乎不应该考虑用`*noremap`,不做这个`*map`。
2.  `nnoremap e j`不可能破坏`te`。也不能*: 不是*`onoremap e j`运算`t`符，也不会调用运算符挂起模式。
**   `omap de dj`*与普通*`de`模式下的按下无关，您应该按下来调用*此*映射。并且与改变: you need here的含义无关（operator-pending 模式由 operator 调用，但 operator 必须在正常模式下键入。它也不是调用模式的一部分）。*`dde`*`nnoremap e j``de``onoremap e j``d`*****   基本移动键的重新映射是您需要的极少数情况下的完美示例，`noremap`无需前导`n`,或其他内容。尝试做`o``v`

    ```
    noremap e j 
    ```

    对于您要重新映射的所有键，这应该足够了。

    *   重新映射不会在模式开始时发生，因此无需执行`onoremap 3e 3j`. `onoremap e j`也将启用做`d3e`-> `d3j`。并且`noremap e j`等价于

    ```
    nnoremap e j
    onoremap e j
    vnoremap e j 
    ```***

# actionscript-3 - 如何将文档类文件导入另一个 Flash 文件？

> ID：10822375
> 
> 赞同：-1
> 
> 时间：2012-05-30T18:46:49.680
> 
> 标签：actionscript-3, flash, class

我有 2 个 .fla 文件，其中一个与名为 DocumentMain 的类文件相关联，它是一个游戏。我想要的是当我在第一个 .fla 文件上单击“stat”时，它会将我带到游戏 swf 文件。

我做了 myLoad 函数，它看起来像这样：

```
btnstart.addEventListener(MouseEvent.CLICK,gamecontent);
function gamecontent(myevent:MouseEvent):void
{
   var myLoader:Loader = new Loader ();
   var myURL:URLRequest = new URLRequest("game.swf");
   myLoader.load(myURL);
   addChild(myLoader);
} 
```

但我得到一个错误是：

TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 DocumentMain()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:53:23.437

而不是`addChild(myLoader);`添加：

```
myLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onCompleteHandler); 
```

然后创建这个函数：

```
function onCompleteHandler(loadEvent:Event):void{
    addChild(loadEvent.currentTarget.content);
} 
```

或添加这个 inisde`DocumentMain()`类：

```
public function DocumentMain():void{
            addEventListener(Event.ADDED_TO_STAGE, init);
        }
        private function init(e:Event):void{... 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T18:55:46.223

将以下代码添加到您的`gameContent`函数中：

```
mLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onCompleteHandler); 
```

onComplete 处理程序如下所示：

```
function onCompleteHandler(loadEvent:Event)
{
    addChild(loadEvent.currentTarget.content);
} 
```

你能试试这个吗？:) 虽然你仍然有可能遇到错误......如果是这样：编译外部`SWF`并运行它`SWF`，是否像它应该运行的那样运行？还是外部`SWF`创建错误？

如果您仍然收到错误，请将您正在使用的代码发布到外部`SWF`.

# javascript - 如何使用 JavaScript 滚动到叠加层中的元素顶部？

> ID：10822376
> 
> 赞同：1
> 
> 时间：2012-05-30T18:46:57.153
> 
> 标签：javascript, ajax, scroll, scrollto

我有一个覆盖层，它有多个使用单独的 Ajax 调用的步骤。我使用的是纯 JavaScript，所以没有 jQuery。我遇到的问题是，如果我在第 1 步中位于可滚动 DIV 的底部，请转到第 2 步，然后单击“编辑”链接返回第 1 步，它会显示我上次查看的位置，而不是在可滚动区域的顶部。

有人可以告诉我如何解决这个问题吗？我已经尝试过 window.scroll 和 window.scrollTo，但都无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:02:39.390

我可以通过在每次在叠加层中更改视图时调用的方法中添加以下行来解决此问题。

```
div.scrollTop = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T20:07:40.343

jQuery 的`.scrollTop(value)`工作方法。

如果你想要视觉上吸引人的运动，请使用[这个 scrollTo 插件](http://demos.flesler.com/jquery/scrollTo/)以及非常著名的 easing 插件。

# html - CSS textarea 宽度与 Firefox 中的输入宽度不同

> ID：10822377
> 
> 赞同：3
> 
> 时间：2012-05-30T18:47:04.583
> 
> 标签：html, css, firefox, cross-browser

我正在使用 css 设置文本输入和文本区域的宽度：

```
input[type=text], 
input[type=file],
textarea {
    width: 305px;
} 
```

由于某种原因，在 Firefox 中，textarea 的宽度显得更短：

![在此处输入图像描述](../Images/4d07ea75387dc3bf2dd313588282191b.png)

在 safari 和 chrome 中运行良好。我怎样才能解决这个问题？

**解决方案：**

如此处所述： [无法使用 CSS](https://stackoverflow.com/questions/509529/unable-to-set-textarea-width-with-css) 添加设置 textarea 宽度：

```
padding: 0;
border: 1px solid #ccc; 
```

成功了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:53:49.543

我相信这是因为输入标签和 textarea 标签默认具有不同的边框。尝试在 CSS 中添加边框以实现相同的宽度。

```
input[type=text],
input[type=file],
textarea {
    width: 305px;
    border: 1px solid black;
} 
```

这是一个例子：http: [//jsfiddle.net/Das2q/](http://jsfiddle.net/Das2q/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:49:35.953

您可以将所有输入字段放入`<div>`给定宽度的 a 中，并使`<input>`和`<textarea>`字段的宽度为 100%。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T18:53:07.237

你用的是什么版本的FF？我用 12.0 尝试过，对我来说似乎很好。

试试这个简单的版本，看看它是否仍然被抛弃。您的 css 定义的另一部分可能存在问题。

```
<html>

<head>
<style type="text/css">
    input[type=text], 
    input[type=file],
    textarea {
        width: 305px;
    }   
</style>
</head>

<body>

<form>
    <input type="text" /><br/>
    <textarea></textarea>
</form>

</body>
</html> 
```

# jquery - jQuery中的spryassets点击事件

> ID：10822379
> 
> 赞同：0
> 
> 时间：2012-05-30T18:47:19.227
> 
> 标签：jquery, onclick, spry

我的页面中有以下内容，

这是一个spryasset。这有 3 个选项卡。![在此处输入图像描述](../Images/7c570a5499eb98f0bc79d0702a4b413e.png)

当我点击“评论”时，它会显示评论，如果“更多”则显示更多。

我的问题是，

## 如何在 jQuery 的 spryasset 选项卡上收听这个“CLICK”事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T18:50:25.490

假设 spryasset`li`为每个选项卡生成，您可以这样做：

```
$('#tabs li:eq(2)').on('click', function() {
  // your code here
}); 
```

更新：

将`:eq(2)`返回第 3 个（从 0 开始）列表元素，它是 id=tabs 的某个元素的子元素。有关 :eq 选择器的更多信息，请查看 jquery 文档 [http://api.jquery.com/eq-selector/](http://api.jquery.com/eq-selector/)

# javascript - 将变量传递给外部javascript？

> ID：10822388
> 
> 赞同：0
> 
> 时间：2012-05-30T18:47:48.717
> 
> 标签：javascript

我有一个插件可以显示来自某个城市的帖子：

```
<div id='banner-root' style="height: 50px; width: 385px;"></div>
<script src="http://lujanventas.com/plugins/banner.js" type="text/javascript"></script> 
```

我需要将 cityID 传递给外部 javascript。通过简单地检查banner-root 元素，我已经获得了外部.js 的高度和宽度。

我如何传递和ID？如果很明显您正在传递cityID，那就太好了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:00:45.557

根据您的评论，您并没有真正将宽度和高度传递给脚本。您可以使用与 cityId 相同的样式，如下所示：

```
<div id='banner-root' style="height: 50px; width: 385px;" data-cityId="32"></div> 
```

然后，您可以使用

```
document.getElementById("banner-root").getAttribute("data-cityId"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T18:56:10.493

当我不得不这样做时，我使用了这个：

```
<script type="text/javascript">var cityID = x;</script>
<script src="http://lujanventas.com/plugins/banner.js" type="text/javascript"></script> 
```

然后我可以在banner.js脚本中访问cityID

**编辑**

Javascript 缺陷之一是 - 默认情况下，所有内容都在全局范围内。

这意味着在上面的示例`cityID`中是在全局**命名空间**中定义的- `window`。这很好，例如，当我想从设计中达到这个值但设计不佳时，因为函数体中`banner.js`的遗漏语句可能会覆盖全局变量。`var`

# ruby-on-rails - Rails 样式表未加载

> ID：10822390
> 
> 赞同：1
> 
> 时间：2012-05-30T18:47:54.240
> 
> 标签：ruby-on-rails, stylesheet

我正在学习 Rails，但遇到了一个我找不到答案的问题。我有 2 个 css 文件 "print.css" 和 "screen.css" ，都在 "/public/stylesheets"

当我在布局中的“application.html.erb”中加载它们并启动服务器时，本地网站上的两个文件都丢失了。这是错误：

```
GET http://localhost:3000/assets/print.css 404 (Not Found)

GET http://localhost:3000/assets/screen.css 404 (Not Found) 
```

这是来自“application.html.erb”的代码：

```
<!DOCTYPE html>
<html>
<head>
    <title><%= title %></title>
    <%= csrf_meta_tag %>
    <%= stylesheet_link_tag "screen", "print" %>

</head>
<body>
    <%= yield %>
</body>
</html> 
```

此外，我添加了这个

> config.assets.compile = true

到我的“./config/environments/development.rb”并运行

> bundle exec rake assets:precompile RAILS_ENV=development

无济于事。

请指教！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T18:55:31.863

请阅读[资产管道](http://guides.rubyonrails.org/asset_pipeline.html)。`public/`将样式表（或 javascript/图像）放在目录中不再是常见的做法。相反，它们应该放在`app/assets/stylesheets/`可以预编译并包含在

```
<%= stylesheet_include_tag 'application' %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:54:40.040

你应该把它们放进去`app/assets/stylesheets`。

# iphone - 在 iPhone 中启动时相机视频显示方向不正确

> ID：10822391
> 
> 赞同：3
> 
> 时间：2012-05-30T18:47:58.133
> 
> 标签：iphone, video, camera, orientation, avcapturedevice

我有一个独立运行的 iPhone 应用程序，它以正确的方向（横向）正确打开相机视频源。但是，既然我将此应用程序添加到现有应用程序中，当我在集成应用程序中启动我的应用程序时，视频源在横向视图中的方向不正确。当 iphone 处于横向视图时，视频馈送处于倒置纵向视图。但是，当我旋转我的设备然后返回横向视图时，相机馈送现在是正确的（横向）。如何在启动时正确定位视频源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T03:45:09.833

如果您为相机应用程序使用故事板，请确保将初始视图控制器设置为继承其旋转属性。

如果不是，则该问题几乎肯定是由以下两种方法之一中的逻辑错误引起的：

*   (BOOL) 应该AutorotateToInterfaceOrientation：
*   (void)didRotateFromInterfaceOrientation:

查看这两种方法，无论是在您的相机应用程序中，还是在您将其放入的较大应用程序中。

如果问题不是很明显，请在此处发布这些方法的内容，我们可以看看。

# php - 在 CodeIgniter 控制器中拥有非常大的类有什么主要缺点吗？

> ID：10822393
> 
> 赞同：1
> 
> 时间：2012-05-30T18:48:12.383
> 
> 标签：php, codeigniter

我正在 CodeIgniter 中构建一个应用程序。我有一个控制器 API，然后它有大约 300 个函数。

我想知道这是否是性能方面的问题。任何机构都可以提供帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:51:52.220

一个非常大的控制器将需要更长的时间来解析。每次调用 Controller 中的任何方法时，都会调用并实例化控制器类，因此必须解析整个控制器（更准确地说，胖控制器需要在每个请求中解析一次）。解析较大的文件将花费更长的时间，但是额外的时间将非常短暂。

这是我在性能方面能想到的唯一缺点。

当然，还有很多维护问题。

**“每次调用其方法之一时实例化的类”的解释**

CodeIgniter 中的 URL 路由是这样工作的：

`example.com/controller/method`

所以当你访问

`example.com/user/create`

`create`是控制器类中的一个函数`user`。要调用`create`方法，`user`必须先实例化类，然后调用方法。

如果你的控制器类有 200 个其他函数，它们也需要被解析。

如果您现在将浏览器指向

`example.com/user/delete`

该类的先前实例化不再存在。整个类需要再次解析。

# android - Android proguard，设备上的 Nullpointer 异常

> ID：10822397
> 
> 赞同：3
> 
> 时间：2012-05-30T18:48:22.487
> 
> 标签：android, proguard

当我在手机上安装我的应用程序时出现异常。它可以在没有 proguard 的情况下工作。我的配置有什么问题？非常感谢你！该配置是我在某处找到的默认 android 配置。不知道怎么回事

```
D/AndroidRuntime(15388): Shutting down VM
W/dalvikvm(15388): threadid=1: thread exiting with uncaught exception (group=0x40c3a1f8)
E/AndroidRuntime(15388): FATAL EXCEPTION: main
E/AndroidRuntime(15388): java.lang.NullPointerException
E/AndroidRuntime(15388): at aV.setViewValue(SourceFile:163)
E/AndroidRuntime(15388): at android.widget.SimpleAdapter.bindView(SimpleAdapter.java:168)
E/AndroidRuntime(15388): at android.widget.SimpleAdapter.createViewFromResource(SimpleAdapter.java:126)
E/AndroidRuntime(15388): at android.widget.SimpleAdapter.getView(SimpleAdapter.java:114)
E/AndroidRuntime(15388): at android.widget.AbsListView.obtainView(AbsListView.java:2214)
E/AndroidRuntime(15388): at android.widget.ListView.makeAndAddView(ListView.java:1774)
E/AndroidRuntime(15388): at android.widget.ListView.fillDown(ListView.java:672)
E/AndroidRuntime(15388): at android.widget.ListView.fillFromTop(ListView.java:732)
E/AndroidRuntime(15388): at android.widget.ListView.layoutChildren(ListView.java:1625)
E/AndroidRuntime(15388): at android.widget.AbsListView.onLayout(AbsListView.java:2044)
E/AndroidRuntime(15388): at android.view.View.layout(View.java:11418)
E/AndroidRuntime(15388): at android.view.ViewGroup.layout(ViewGroup.java:4224)
E/AndroidRuntime(15388): at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
E/AndroidRuntime(15388): at android.view.View.layout(View.java:11418)
E/AndroidRuntime(15388): at android.view.ViewGroup.layout(ViewGroup.java:4224)
E/AndroidRuntime(15388): at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
E/AndroidRuntime(15388): at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
E/AndroidRuntime(15388): at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
E/AndroidRuntime(15388): at android.view.View.layout(View.java:11418)
E/AndroidRuntime(15388): at android.view.ViewGroup.layout(ViewGroup.java:4224)
E/AndroidRuntime(15388): at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
E/AndroidRuntime(15388): at android.view.View.layout(View.java:11418)
E/AndroidRuntime(15388): at android.view.ViewGroup.layout(ViewGroup.java:4224)
E/AndroidRuntime(15388): at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1628)
E/AndroidRuntime(15388): at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2585)
E/AndroidRuntime(15388): at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(15388): at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(15388): at android.app.ActivityThread.main(ActivityThread.java:4507)
E/AndroidRuntime(15388): at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(15388): at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(15388): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
E/AndroidRuntime(15388): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
E/AndroidRuntime(15388): at dalvik.system.NativeStart.main(Native Method) 
```

这是我的 proguard 配置

```
-injars      bin/classes
-injars      libs
-outjars     bin/classes-processed.jar

-libraryjars /libs/android-support-v13.jar

#
# This ProGuard configuration file illustrates how to process Android
# applications.
# Usage:
#     java -jar proguard.jar @android.pro
#
# If you're using the Android SDK (version 2.3 or higher), the android tool
# already creates a file like this in your project, called proguard.cfg.
# It should contain the settings of this file, minus the input and output paths
# (-injars, -outjars, -libraryjars, -printmapping, and -printseeds).
# The generated Ant build file automatically sets these paths.

# Specify the input jars, output jars, and library jars.
# Note that ProGuard works with Java bytecode (.class),
# before the dex compiler converts it into Dalvik code (.dex).

    # Save the obfuscation mapping to a file, so you can de-obfuscate any stack
    # traces later on.

    -printmapping bin/classes-processed.map

    # You can print out the seeds that are matching the keep options below.

    #-printseeds bin/classes-processed.seeds

    # Preverification is irrelevant for the dex compiler and the Dalvik VM.

    -dontpreverify

    # Reduce the size of the output some more.

    -repackageclasses ''
    -allowaccessmodification

    # Switch off some optimizations that trip older versions of the Dalvik VM.

    -optimizations !code/simplification/arithmetic

    # Keep a fixed source file attribute and all line number tables to get line
    # numbers in the stack traces.
    # You can comment this out if you're not interested in stack traces.

    -renamesourcefileattribute SourceFile
    -keepattributes SourceFile,LineNumberTable

    # RemoteViews might need annotations.

    -keepattributes *Annotation*

    # Preserve all fundamental application classes.

    -keep public class * extends android.app.Activity
    -keep public class * extends android.app.Application
    -keep public class * extends android.app.Service
    -keep public class * extends android.content.BroadcastReceiver
    -keep public class * extends android.content.ContentProvider

    # Preserve all View implementations, their special context constructors, and
    # their setters.

    -keep public class * extends android.view.View {
        public <init>(android.content.Context);
        public <init>(android.content.Context, android.util.AttributeSet);
        public <init>(android.content.Context, android.util.AttributeSet, int);
        public void set*(...);
    }

    # Preserve all classes that have special context constructors, and the
    # constructors themselves.

    -keepclasseswithmembers class * {
        public <init>(android.content.Context, android.util.AttributeSet);
    }

    # Preserve all classes that have special context constructors, and the
    # constructors themselves.

    -keepclasseswithmembers class * {
        public <init>(android.content.Context, android.util.AttributeSet, int);
    }

    # Preserve the special fields of all Parcelable implementations.

    -keepclassmembers class * implements android.os.Parcelable {
        static android.os.Parcelable$Creator CREATOR;
    }

    # Preserve static fields of inner classes of R classes that might be accessed
    # through introspection.

    -keepclassmembers class **.R$* {
      public static <fields>;
    }

    # Preserve the required interface from the License Verification Library
    # (but don't nag the developer if the library is not used at all).

    #-keep public interface com.android.vending.licensing.ILicensingService

    #-dontnote com.android.vending.licensing.ILicensingService

    # The Android Compatibility library references some classes that may not be
    # present in all versions of the API, but we know that's ok.

    -dontwarn android.support.**

    # Preserve all native method names and the names of their classes.

    -keepclasseswithmembernames class * {
        native <methods>;
    }

    # Preserve the special static methods that are required in all enumeration
    # classes.

    -keepclassmembers class * extends java.lang.Enum {
        public static **[] values();
        public static ** valueOf(java.lang.String);
    }

    # Explicitly preserve all serialization members. The Serializable interface
    # is only a marker interface, so it wouldn't save them.
    # You can comment this out if your application doesn't use serialization.
    # If your code contains serializable classes that have to be backward 
    # compatible, please refer to the manual.

    #-keepclassmembers class * implements java.io.Serializable {
    #    static final long serialVersionUID;
    #    static final java.io.ObjectStreamField[] serialPersistentFields;
    #    private void writeObject(java.io.ObjectOutputStream);
    #    private void readObject(java.io.ObjectInputStream);
    #    java.lang.Object writeReplace();
    #    java.lang.Object readResolve();
    #}

    # Your application may contain more items that need to be preserved; 
    # typically classes that are dynamically created using Class.forName:

    # -keep public class mypackage.MyClass
    # -keep public interface mypackage.MyInterface
    # -keep public class * implements mypackage.MyInterface

    # Needed by google-api-client to keep generic types and @Key annotations accessed via reflection
    -keepclassmembers class * {
      @com.google.api.client.util.Key <fields>;
    }

    -keepattributes Signature,RuntimeVisibleAnnotations,AnnotationDefault,*Annotation*

    -dontwarn sun.misc.Unsafe

    -keepattributes 
    -dontoptimize

    #-dontshrink 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-20T14:13:38.410

# 设置场景

我目前有完全相同的问题。`parent`我使用带有和`false`作为第二个和第三个参数的格式，使用带有布局充气器的自定义适配器完美地工作代码。

由于代码在没有混淆的情况下运行良好，我有足够的信心忽略 stackoverflow 上关于`null`由于错误使用 Android API 而返回视图的所有问题和响应。

**如果您也有没有混淆的问题，请忽略此答案和问题并继续前进！[检查这些问题](https://stackoverflow.com/questions/10204262/nullpointerexception-in-custom-adapter-getview)**

我会尽力在这个答案中报告我的发现。这个答案可能会随着时间的推移而增长。如果您渴望了解最新消息，请**跳至底部的结论。**

# 快速而肮脏的解决方案

这里直接的解决方案是更新您的 proguard 配置以排除您的代码在混淆后失败的类。

在你的 proguard 配置文件中应该是这样的：

```
-keep class * extends your.company.secret.package 
```

[有关 proguard 的更多信息，请从此处开始](http://developer.android.com/tools/help/proguard.html)。还要确保您至少拥有 Android 项目所需的最低限度的 proguard 配置文件。[检查这个例子](http://code.google.com/p/google-gson/source/browse/trunk/examples/android-proguard-example/proguard.cfg)。

# 映射回您的源代码

在研究这个时，您可能会对混淆之前该类的原始名称感兴趣。那应该会容易得多。您可以在项目的 bin 文件夹中的 mapping.txt 文件的 proguard 文件夹中找到此映射。

```
/bin/proguard/mapping.txt 
```

## 固定到以下代码行

就我而言，我能够确定以下代码行中的错误。这些行仅出现在失败的适配器中，而其他代码与工作适配器相同。以下所有代码都是该`getView(final int position, View convertView, final ViewGroup parent):View`方法的一部分

```
holder.layout.removeAllViews();
TextView tView;
for (final String text : mItems.getTextList()) {
    tView = new TextView(mContext);
    tView.setTextSize(14);
    tView.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    tView.setText(text);
    holder.layout.addView(tView);
} 
```

如果我只是删除`addView()`and`removeAllViews()`调用，那么一切都会顺利。

# 安卓源代码

我的第一个想法是检查那行代码的源代码。我在堆栈跟踪中找到了以下几点。

```
11-20 14:19:40.709: E/AndroidRuntime(22236): FATAL EXCEPTION: main
11-20 14:19:40.709: E/AndroidRuntime(22236): Process: your.company.secret.package, PID: 22236
11-20 14:19:40.709: E/AndroidRuntime(22236): java.lang.NullPointerException
11-20 14:19:40.709: E/AndroidRuntime(22236):    at android.widget.AbsListView.obtainView(AbsListView.java:2265) 
```

AbsListView的[源代码可以在 grepcode 上找到。](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.3_r2.1/android/widget/AbsListView.java#AbsListView.obtainView%28int,boolean%5B%5D%29)但是查看该代码并没有给我很大的勇气在那里找到解决方案。相反，我转向其他资源。以后可能会回到这个。

*我在 Android 4.4 设备上执行了这段代码，所以行号甚至不匹配。*

## 在 4.3 设备上测试

正确的代码行是 2177。与此行匹配：

```
child = mAdapter.getView(position, null, this); 
```

# 示例项目

有关示例项目，请参阅[https://github.com/hanscapelle/so-10822397](https://github.com/hanscappelle/so-10822397)。您需要 Android Studio (Beta) 0.8.2 和最新的构建工具。我还必须手动获取 proguard-android.txt 文件并将其放置到位。

您可以注释掉适配器中对静态 ViewHolder 类的布局字段起作用的行。一旦启用 proguard 并且应用程序在设备上运行，这些就会失败。

# 我接下来打算做的事情

*   （完成）我在代码中有其他适配器，即使在混淆后也能正常工作。我将检查这些与失败的差异

*   （完成）我真的必须检查 4.3 设备，这样我才能正确查看 Android 源代码。

*   (DONE) 创建示例项目

*   TODO 用样例项目完成分析

# 结论

似乎与`getView()`自定义适配器的方法中动态添加视图有关。结合代码混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:19:26.613

尝试关闭更多可能会破坏 Dalvik 的优化。经过进一步检查，您实际上似乎正在禁用所有优化。

```
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/* 
```

也试着保存这些..

```
-keep public class * extends android.app.backup.BackupAgentHelper
-keep public class * extends android.preference.Preference
-keep public class com.android.vending.licensing.ILicensingService 
```

编辑：这是我的 proguard 文件，想知道是否只是替换它会起作用。它是 ADT 生成的默认文件，所以这里没什么特别的。

```
-optimizationpasses 5
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.backup.BackupAgentHelper
-keep public class * extends android.preference.Preference
-keep public class com.android.vending.licensing.ILicensingService

-keepclasseswithmembernames class * {
    native <methods>;
}

-keepclasseswithmembernames class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembernames class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
} 
```

# optimization - 图中的最大边数使用

> ID：10822400
> 
> 赞同：0
> 
> 时间：2012-05-30T18:48:42.180
> 
> 标签：optimization, graph, graph-theory

如何仅使用有限数量的节点（例如 N 个节点）从图中找到最大边数。选定的边使用它的两侧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:49:32.693

**一个已知的问题。**听起来好像您的问题被称为[k 密集子图问题](http://en.wikipedia.org/wiki/Dense_subgraph)（您的 N 扮演 k 的角色）。

**坏消息**：这个问题被认为是 NP 难的，[即使你的 IP 都没有出现超过 3 次](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.37.9962)或者输入图是二分的。您是否知道图表的任何其他特殊属性？

**更多坏消息**：快速浏览最近的文献，似乎连具有良好误差界限的算法都没有现成的可用。在我看来，即使“只有”100 个输入节点，问题也可能很糟糕。

祝你好运！

# php - 关于 PHP 的良好深入的技术文档

> ID：10822401
> 
> 赞同：1
> 
> 时间：2012-05-30T18:48:50.397
> 
> 标签：php

> **可能重复：**
> [我在哪里可以学习 php 内部，它们是如何工作的？](https://stackoverflow.com/questions/4389738/where-can-i-learn-php-internals-how-they-work)

是否有任何关于 php 的真正深入技术细节的好资源，即它是如何工作的。

大多数资源并没有超出实际如何使用该语言。我有兴趣找出这一切下面发生的事情（从高层次的角度来看，即我不想坐下来阅读 c 代码:)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:53:28.880

我将从PHP 手册的[内部部分开始。](http://www.php.net/manual/en/internals2.php)

PHP Wiki 中还有一个[内部页面](https://wiki.php.net/internals)。

# iphone - 以编程方式用要动画的图像填充数组

> ID：10822407
> 
> 赞同：0
> 
> 时间：2012-05-30T18:49:22.517
> 
> 标签：iphone, objective-c, ios, arrays, animation

我的资源文件夹中有一个包含 50 张图像的文件夹（称为“beeanim”）。我想用这些图像填​​充一个数组，然后用这些图像运行动画。每个图像都被命名​​为`bee1`，`bee2`............。`bee50`

当我在 xcode 中运行该应用程序时，我在控制台中收到一条错误消息：

`Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil'`

这让我相信我可能没有正确引用文件名，但我不知道该怎么做，而不是我已经拥有的。我会很感激任何帮助。这是我的代码：

```
-(void) createBeeImage {

    NSString *fileName; 
    NSMutableArray *imageArray = [[NSMutableArray alloc] init];
    for(int i = 1; i <= 51; i++) {
        fileName = [NSString stringWithFormat:@"beeanim/bee%d.png", i];
        [imageArray addObject:[UIImage imageNamed:fileName]];
    }
    UIImageView * imgView = [[UIImageView alloc] initWithFrame:
                             CGRectMake(215, 250, 174, 80)];
    imgView.animationImages = imageArray;
    imgView.animationDuration = 2;
    imgView.animationRepeatCount = 0;
    imgView.contentMode = UIViewContentModeBottomLeft;
    [self.view addSubview:imgView];
    [imgView startAnimating];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T18:55:33.660

```
for(int i = 1; i <= 51; i++) 
```

i 的最后一个值为 51，根据您的描述，这样的图像不存在，因此

`[UIImage imageNamed:]`返回不能插入的 nil`NSMutableArray`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:51:22.370

如果图像已经与您的应用程序捆绑在一起，则不需要文件夹名称。试试：

```
for(int i = 1; i <= 51; i++) {
    fileName = [NSString stringWithFormat:@"bee%d.png", i];
    [imageArray addObject:[UIImage imageNamed:fileName]];
} 
```

# javascript - 调试 JavaScript VS 2008

> ID：10822410
> 
> 赞同：0
> 
> 时间：2012-05-30T18:49:39.277
> 
> 标签：javascript, visual-studio-2008

我正在调试 12K 行 JavaScript。当然，它是由离岸团队编写的。现在，我需要找出当我与 UI 交互时调用了哪个 js 函数。无论如何，我是否可以自动跳转到正在执行的功能？

我真的不能设置断点，因为我不知道在哪里设置断点？

应用程序仅在 IE7 上运行！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:15:01.540

将 Visual Studio 附加到 IE7 后，可以使用**Break All**选项终止任何正在运行的脚本。如果没有脚本正在运行，它将在脚本执行时中断，例如，如果您将鼠标悬停在具有`onmouseover`侦听器的元素上。

![在此处输入图像描述](../Images/0eb4ee913b6a5300cf3d44f4e53a8500.png)

如果您正在寻找一段特定的代码，这可能会有些麻烦。我认为除了跟踪代码直到找到相关的部分之外，真的没有办法解决这个问题。

例如，如果这是您单击按钮时发生的错误，请查看该按钮的 HTML 代码。如果它有`onclick`处理程序，则搜索该函数并在那里设置断点，或者将单词添加`debugger;`到函数的顶部。如果没有`onclick`处理程序，请在 Javascript 代码中搜索`ID`按钮的 并查看是否有任何侦听器绑定到该 DOM 元素。

12,000 行 Javascript 代码确实没有理由阻碍您查看正在发生的事情的努力。查找问题的重现，然后使用 Find 在您的 Javascript 文件中找到相关代码。另外，我意识到您的网站可能无法在 Firefox 或 Chrome 中运行，但它可能在 IE8 中运行，因为它相当向后兼容。IE8 具有更好的调试器，并且能够探索各种 DOM 元素，这些元素可以用来跟踪哪些代码在哪里运行。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:58:31.717

您可以将 VS 2008 附加到诸如 Internet Explorer 之类的脚本宿主进程。请注意，“脚本主机”特定于 Windows 脚本平台，其他浏览器不使用该平台。

Internet Explorer 应配置为“允许脚本调试”，以便 VS 可以附加到 iexplorer.exe*并*能够调试在其中运行的脚本。

请记住，这是非常令人沮丧的调试体验。如果您可以在更现代的浏览器中调试（包括具有不错的开发工具的 IE9），请这样做！

# html - css文本对齐被否决？

> ID：10822412
> 
> 赞同：0
> 
> 时间：2012-05-30T18:49:47.667
> 
> 标签：html, css, inline-styles

我有一个`<div>`with `text-align:left`- 在里面：一个`<p>`with `text-align:center`。
“最接近”的属性应该是 win = center - 但并不是所有`<p>`的 3 都是左对齐的？！？
Firefox 和 Chrome 的结果相同 - 这就是它在 Chrome 的“检查器”中的外观： ![在此处输入图像描述](../Images/829e7d814cb4966e4322888da1f0c244.png)
注意：我无法在简单的 html 文件中重现它。
知道这里发生了什么吗？

编辑：终于找到了：我把（那些该死的隐形害羞的）连字有点太彻底了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:45:21.927

问题是我的 CSS 中的“无声连字符”（& shy;）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:55:15.853

从您向我们展示的内容来看，这没有任何意义。但我猜想，在 CSS 文件的某个地方，有类似的东西：

```
p {text-align: left !important;} 
```

# javascript - CSS 类的命名空间/前缀，在 Javascript 和 (S)CSS 之间共享

> ID：10822414
> 
> 赞同：3
> 
> 时间：2012-05-30T18:49:50.947
> 
> 标签：javascript, css, namespaces, constants, sass

我正在编写一个涉及 DOM CSS 样式的可重用 Javascript 片段（jQuery 插件）。由于它应该可供任何人使用，我想避免它的 CSS 类名称与文档上其他现有类之间的冲突。这就是为什么我使用命名空间字符串作为其所有类名的前缀（例如，如果我的前缀是 ，则类`grid`变为）。为了尊重 DRY 并使其易于更改，我只想声明我的前缀一次，并从 CSS 电子表格（可能使用 Sass）和 Javascript 代码中访问它。如果可能的话，我还想只使用 2 个文件（我的 .js 和我的 .css）。`prfx-grid``prfx-`

有没有办法声明这样的前缀/命名空间常量，以便可以从 (S)CSS 和 Javascript 访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:30:40.360

我不知道有一种*简单*的方法可以只在一个地方定义它。不过，只需在两个地方定义它就足够简单了：一次在 javascript 中，一次在您的 SASS 中。在 javascript 中，您可以使用全局变量（或者存储常量值），在 SASS 中，您可以像这样定义前缀：

```
$prefix: 'prfx-';

.#{$prefix}grid {
    /* compiles to .prfx-grid */
}

.#{$prefix}other {
    /* and so on */
} 
```

它可能不如在 javascript 和 CSS 中使用单一定义那么好，但在两个地方进行更改肯定比全局查找替换要好。从理论上讲，您可能会向 SASS 添加一个 Ruby 扩展，该扩展将从 Javascript 代码可以通过 AJAX 访问的文件中读取前缀值，但在我看来，这样的系统不值得付出额外的努力来获得它设置并正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-18T10:34:37.217

您可以定义一个伪元素并使用`content`CSS 的属性将您的 SCSS 前缀传输到 JavaScript。我`<body>`在这个例子中使用，但它可以是任何伪元素：

```
$prefix: 'myPrefix';

body::after {
  // Value must be quoted, so we use
  // string interpolation to print variable
  content: '#{$prefix}';
} 
```

然后 JavaScript 可以在运行时查找此文本并将其用作前缀：

```
// pseudos can't be selected like normal DOM elements due to
// browser specs, but you can grab computed styles and remove
// the quotes yourself.
var prefix = window.getComputedStyle(document.body, '::after').getPropertyValue('content').replace(/"/g,'');
// result: 'myPrefix' 
```

计算样式的获取会导致重排/布局/绘制，但如果你只是这样做一次，那并不是世界末日。

# epub - 如何为 Kindle Fire 创建允许平移和缩放类似于报亭的书籍？

> ID：10822418
> 
> 赞同：0
> 
> 时间：2012-05-30T18:50:01.630
> 
> 标签：epub, kindle-fire

需要明确的是，这*是*一个编程问题。我想为 Kindle Fire 出版一本书，其中的图像可以像报亭的内容一样进行捏合、平移和缩放。我对此进行了很多研究，找不到有关如何执行此操作的任何信息，但是有关如何执行其他操作的信息很多。

*   有固定的布局示例展示了如何进行“漫画风格”的图像叠加，不允许平移和缩放。
*   有一些示例使用`<img>`标签显示，它允许您双击某种图像查看模式，允许捏合、平移和缩放，但您必须点击“X”才能退出该图像模式才能继续阅读。
*   但是，对于杂志内容，即。您从“报亭”购买的东西（几乎全部，如果需要，我可以提供视频样本），可以按照我希望我的书的方式导航。您可以查看整个页面，捏合放大，捏合缩小，平移和滑动以转到下一页。

对于“书籍”来说，这很可能是不可能的，只有当你与亚马逊签订了杂志出版合同时才有可能（并且它使用不同的格式），但我很难从任何来源确定这一点. 我已经在论坛上搜索并询问了没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T23:30:12.440

正如您所指出的，杂志是不同的格式......这就是不同之处。KF8 是 HTML，不允许您捏合和缩放。

# html - 将跨度底部浮动在 div 内

> ID：10822421
> 
> 赞同：5
> 
> 时间：2012-05-30T18:50:12.883
> 
> 标签：html, css

> **可能重复：**
> [如何让 div 浮动到其容器的底部？](https://stackoverflow.com/questions/311990/how-do-i-get-a-div-to-float-to-the-bottom-of-its-container)

我有这段代码可以将 div 浮动到 div 的右下角。但是跨度卡在左上角。

```
<div id="color_tile" class="select_tile" title="Choose color" style="background: grey; background-image: url(wallpaper/201_color_picker.jpg);" >    
  <span id="color_picker" style="visibility: visible; display: block; float: right; vertical-align: bottom;"></span>
</div> 
```

有没有不同的方法来放置跨度？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T18:54:37.567

您可能应该正确地将您的 HTML/CSS 彼此分开。

您的代码可能看起来像这样

HTML：

```
<div>
    <span>Absolute right bottom aligned to div...</span>
</div> 
```

CSS：

```
div { position: relative; }
div > span { position: absolute; right: 0; bottom: 0; } 
```

显然，您的 div 应该有一些超过跨度的高度/宽度，但通常这是一种非常可接受的方式。

这不会使 div 的内容围绕跨度“流动”，但没有明确指定。如前所述，您所拥有的应该在这种情况下工作，如果不是，它在您的其余代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:53:23.937

vartical-align 在开始工作时非常特别（这就是我几乎从不使用它的原因）

在跨度上： `position:absolute; bottom:0; right:0;`

并在父 div 上放置一个高度/宽度，你就准备好了

# java - jar可以双击，但不能在命令行中

> ID：10822423
> 
> 赞同：0
> 
> 时间：2012-05-30T18:50:17.620
> 
> 标签：java, maven, executable-jar

在[另一篇文章](https://stackoverflow.com/questions/10808209/classpath-is-set-but-still-getting-noclassdeffounderror)中跟进我的一个问题。

我将 jar 添加`maven-assembly-plugin`到我的`POM`中，现在 jar 可以工作，但前提是我双击文件系统中的 jar。如果我尝试从命令行运行 jar，我仍然会收到此错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: 
```

这让我很担心，因为这个 jar 似乎不是平台独立的。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:53:07.077

你如何启动它？

您需要使用`-jar`开关：

```
java -jar your_jarfile.jar 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T18:53:55.180

在 cmd 行上从 jar 启动应用程序的语法

```
 java -jar jarname 
```

鉴于您有 Manifest.txt 文件，其中 jar 具有 Main-Class:*package.class_name_containing_main_method*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T19:00:17.423

这不应该发生，因为通过命令行启动它与通过双击启动完全相同。也许您正试图让它通过命令行使用不同版本的 java，而这不起作用？澄清一下，启动 jar 的命令是`java -jar name.jar`

# iphone - 应用因数据存储而被拒绝 - 如何让它忽略文件夹中的所有文件？

> ID：10822429
> 
> 赞同：6
> 
> 时间：2012-05-30T18:50:34.547
> 
> 标签：iphone, ios, icloud

我有一个应用程序可以下载大量照片并将它们存储在 Documents 文件夹的子文件夹中，这在 iOS 5.1 之前显然很好

现在Apple告诉我我需要将它们存储在其他地方，或者以某种方式将它们标记为不用于备份。这是一个应用程序更新，因此对于我的大多数用户而言，这些子文件夹中已经存在数据。

如何让 iOS 跳过 Documents 子文件夹中的所有文件或跳过 Documents 文件夹中的特定文件？

像他们建议的那样将所有文件移动到缓存中将是一项艰巨的任务。

我读了这个，但我不确定我应该在哪里实现这个： [https ://developer.apple.com/library/ios/#qa/qa1719/_index.html](https://developer.apple.com/library/ios/#qa/qa1719/_index.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T19:04:00.883

您可以使用 NSFileNanager 列出所有文件，然后调用您喜欢的建议的函数。您的代码将类似于：

```
// From Apple FAQ
#import <sys/xattr.h>
- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
{
    assert([[NSFileManager defaultManager] fileExistsAtPath: [URL path]]);

    const char* filePath = [[URL path] fileSystemRepresentation];

    const char* attrName = "com.apple.MobileBackup";
    u_int8_t attrValue = 1;

    int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
    return result == 0;
}

- (void) addSkipBackupAttributeToItemsInFolder:(NSString*)folder
{
    NSFileManager *fm = [NSFileManager defaultManager];
    NSArray *dirContents = [fm contentsOfDirectoryAtPath:folder error:nil];

    for (int curFileIdx = 0; curFileIdx < [dirContents count]; ++curFileIdx)
    {
        NSString* curString = [folder stringByAppendingPathComponent:[dirContents objectAtIndex:curFileIdx]];
        NSURL* curFileUrl = [NSURL fileURLWithPath:curString];
        [self addSkipBackupAttributeToItemAtURL: curFileUrl];
    }
} 
```

你会这样使用它：

```
 NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    [self addSkipBackupAttributeToItemsInFolder:documentsDirectory]; 
```

# iphone - 如何将 Tiled 平铺地图导入 XCode 项目？

> ID：10822432
> 
> 赞同：1
> 
> 时间：2012-05-30T18:50:46.190
> 
> 标签：iphone, ios, xcode

我是 iOS 开发的新手，所以我正在尝试从头开始学习 iOS 游戏设计。我的第一个目标是制作一个 OpenGL ES 应用程序，它只做一件事：显示瓦片地图。我使用 Tiled 制作了一张地图，我一直在试图弄清楚如何将其导入我的 XCode 项目，但我找不到任何好的最新教程。有人能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:00:52.170

支持瓦片地图的最佳游戏引擎是 COCOS2D，可在此处找到：[http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGQQFjAA&url=http%3A%2F%2Fwww。 cocos2d-iphone.org%2F&ei=v23GT9H0BqnA2gXDwsTYAQ&usg=AFQjCNEUx9C3mwhsRRKQWFiepw3aHvrzwA&sig2=h84PTR8IQ1xghM1pnmmGWw](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGQQFjAA&url=http%3A%2F%2Fwww.cocos2d-iphone.org%2F&ei=v23GT9H0BqnA2gXDwsTYAQ&usg=AFQjCNEUx9C3mwhsRRKQWFiepw3aHvrzwA&sig2=h84PTR8IQ1xghM1pnmmGWw)
一个很好的教程是[http://www.raywenderlich.com/1163/how-to-make-a-tile-based-game-with-cocos2d](http://www.raywenderlich.com/1163/how-to-make-a-tile-based-game-with-cocos2d)
你开始使用cocos2d，瓦片图教程好找，实现也比较简单！希望这有帮助！

# c++ - 在子函数中实例化的类大小，即现在是使用 new 的好时机吗？

> ID：10822442
> 
> 赞同：1
> 
> 时间：2012-05-30T18:51:35.387
> 
> 标签：c++, pointers, new-operator

我想创建一个数据向量，但我想设置它的大小并在子函数中填充它的元素。现在是使用 new 运算符的合适时机吗？有更好的方法吗？这似乎是一个合适的时间，但我犹豫不决，因为[为什么 C++ 程序员应该尽量减少“新”的使用？](https://stackoverflow.com/questions/6500313/in-c-why-should-new-be-used-as-little-as-possible)

```
int main()
{
    vector<double> *array1;
    vector<double> *array2;
    OtherArgs otherArgs;
    FillArrays(array1,array2,otherArgs);
    //Do other stuff 
    delete array1;
    delete array2;
}

void FillArrays(vector<double> *&array1, vector<double> *&array2, OtherArgs &otherArgs)
{
    int size=GetSize(otherArgs);
    array1 = new vector<double>(size);
    array2 = new vector<double>(size);
    //Other code to fill the arrays
} 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T18:53:20.253

以下是原始样本麻烦的几个原因

*   代码在遇到异常时会泄漏内存，因为`delete`调用不受保护
*   如果`FillArrays`传递一个非 NULL`vectory<double>`值，它将泄漏内存，因为它没有删除以前的值。`delete`即使它想 调用它也不能可靠地调用，因为该值可能已被堆栈分配。

最简单的方法是在堆栈上声明值并以这种方式通过引用传递它们。

```
int main()
{
    vector<double> array1;
    vector<double> array2;
    OtherArgs otherArgs;
    FillArrays(array1,array2,otherArgs);
    //Do other stuff 
}

void FillArrays(vector<double> &array1, vector<double> &array2, OtherArgs &otherArgs)
{
    int size=GetSize(otherArgs);
    //Other code to fill the arrays
} 
```

当`vector<T>`以这种方式声明时，它们会将自己初始化为一个空列表。然后，该`FillArrays`方法可以根据需要填充它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T19:00:16.253

不，这是对`new`.

如果您必须使用`new`and `delete`¹，请将它们用作书挡。删除表达式应与新表达式处于逻辑一致的上下文中。

因此，如果您`new`在 c-tor 中，则应该`delete`在 d-tor 中。如果你`new`在一个分配函数中，你应该`delete`在一个释放函数中。这两个调用的排列方式应该使得一个开始一个操作，另一个完成它。

这意味着对`new`和的调用`delete`应该存在于功能或对象层次结构的同一层中。具体来说，`new`应该`delete`被视为实现细节，而不是 API 合同的一部分。²

在您的情况下， new 和 delete 处于完全不同的上下文中。`new`在实现内部，而`delete`在客户端中调用。这*将*导致编程错误。

除此之外，您的代码的非新版本（在 中创建空向量`main`，并通过引用传递它们）比该`new`版本更简单、更易于阅读且对异常更友好。

不，这不是什么时候使用的好例子`new`。然而，这是一个很好的例子，说明何时*不*这样做。

* * *

^(1 您几乎**不需要**使用`new`and `delete`。如果您需要动态分配，只需让容器保留对象的副本。)

^(2`std::shared_ptr`等人违反了这条规则—— `new`and`delete`是合同的具体部分。这可能没问题，因为指针操作是它们存在的原因。但是 SO 已经看到了关于将非`new`指针存储在`shared_ptr`.)

# android - 如何更改操作栏下拉列表中的文本大小 - 使用操作栏 Sherlock

> ID：10822444
> 
> 赞同：1
> 
> 时间：2012-05-30T18:51:42.693
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在尝试更改使用 Actionbar Sherlock 4.0 的下拉列表中的字体大小。

我从 [https://github.com/JakeWharton/ActionBarSherlock/issues/401] 中看到，您可以使用以下主题更改操作栏选项卡的文本大小：

```
<style name="Theme.MyTheme" parent="Theme.Sherlock">
    <item name="android:actionBarTabTextStyle">@style/Widget.MyTabText</item>
    <item name="actionBarTabTextStyle">@style/Widget.MyTabText</item>
</style>

<style name="Widget.MyTabText" parent="Widget.Sherlock.ActionBar.TabText">
    <item name="android:textSize">14sp</item>
</style> 
```

但我无法找到如何更改下拉列表中的文本大小（即标题和单个下拉列表项）。

有什么线索吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:15:11.243

如果您想在单击它时看到更大的微调器项目，您可以使用以下代码：

```
 String[] objects = { "Tehran", "Shiraz",
            "Esfehan" };
    ArrayAdapter<String> ap = new ArrayAdapter<String>(
            this,
            android.R.layout.simple_spinner_dropdown_item,
            objects);

    sp.setAdapter(ap); 
```

但是如果你想在微调器中增加文本的字体，你必须使用自定义 arrayadapter，使用这个链接获取更多信息并设置 textView 的 textSize 以查看更大的微调器项目：[Spinner ArrayAdapter crashing with custom layout](https://stackoverflow.com/q/5267808/1105277)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T01:50:46.750

我查看了 Actionbar Sherlock 的来源，spiner 文本的主题使用 spinnerItemStyle/actionDropDownStyle 但更改没有效果
但是，它可以在 spinerAdapter 中定义您的自定义布局，如下所示：

```
 Context context = getSupportActionBar().getThemedContext();
    ArrayAdapter<CharSequence> list = ArrayAdapter.createFromResource(
            context, R.array.orderstatus, R.layout.spinner_item);
    list.setDropDownViewResource(R.layout.spinner_dropdown_item);
    getSupportActionBar().setDisplayShowTitleEnabled(false);
    getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    getSupportActionBar().setListNavigationCallbacks(list, this); 
```

布局文件在哪里：

```
 <TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    style="@style/ActionBar.TitleText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ellipsize="marquee"
    android:singleLine="true" /> 
```

# mvvm - AutoCompleteBox Don't SelectedItem on Down/Up Key

> ID：10822445
> 
> 赞同：3
> 
> 时间：2012-05-30T18:51:43.470
> 
> 标签：mvvm, autocomplete, selecteditem

我在 MVVM 中使用 AutoCompleteBox，并且我只想在用户单击项目或用户按 Enter 时执行某些操作。

但是现在当我使用键盘上的 down\Up 键时， selectedItem 属性会发生变化......

我的控制：

```
<Controls:AutoCompleteBox ItemsSource="{Binding IndicationDtos, Mode=TwoWay}" 
                              Width="100" SelectedItem="{Binding IndicationSelected, Mode=TwoWay}" 
                              ValueMemberPath="Diagnosis" Text="{Binding Criteria, Mode=TwoWay}" MinimumPopulateDelay="250"/> 
```

我该怎么做才能使属性“SelectedItem”仅在 Enter 或单击时分配？

如果你有任何问题...

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:55:41.990

在您的 SelectedItem 绑定中，您可以使用：

```
SelectedItem="{Binding IndicationSelected, Mode=TwoWay, UpdateSourceTrigger=LostFocus}" 
```

这样选择的项目只有在你专注于其他事情时才会改变

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:39:57.797

我找到了创建新课程的解决方案。

像这样 ：

```
 public class AutoCompleteBoxEx : AutoCompleteBox
{
            public static readonly DependencyProperty SelectionBoxItemProperty =
        DependencyProperty.Register(
        "SelectionBoxItem",
        typeof(object),
        typeof(AutoCompleteBox),
        new PropertyMetadata(OnSelectionBoxItemPropertyChanged));

    public object SelectionBoxItem
    {
        get
        {
            return GetValue(SelectionBoxItemProperty);
        }

        set
        {
            SetValue(SelectionBoxItemProperty, value);
        }
    }

    protected override void OnDropDownClosing(RoutedPropertyChangingEventArgs<bool> e)
    {
        base.OnDropDownClosing(e);
        SelectionBoxItem = SelectionAdapter.SelectedItem;
    }

    private static void OnSelectionBoxItemPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
    }
} 
```

# asp.net - 缓存网页数据、数据库或文件

> ID：10822446
> 
> 赞同：0
> 
> 时间：2012-05-30T18:51:47.493
> 
> 标签：asp.net, database, file, caching

我正在创建一个从我的服务器请求 RSS 的 RSS 阅读器应用程序。我的意思是，RSS 首先下载到我的服务器，然后应用程序从我的服务器下载它。

我想为此创建 RSS 缓存。例如，每个 RSS 将每 1 分钟刷新一次。所以，如果 10 个用户在 1 分钟内请求 example.com 的 RSS，我的服务器只会第一次下载它，而在其他 9 个请求中，RSS 将从缓存中加载。

我的问题是，我应该为此使用数据库（MSSQL）吗？或者我应该使用文件？

我对数据库大小和文件大小没有限制......

**编辑：我使用 ASP.NET 作为服务器。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:58:47.657

您可以为此使用[Memcached](http://memcached.org)，并将缓存到期时间设置为 10 分钟或任何您想要的时间。我为你找到了[这个](http://www.infoq.com/news/2007/07/memcached)。

PS 谷歌是我们的朋友

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T19:04:13.800

[此处可能重复的问题](https://stackoverflow.com/questions/1059352/caching-moderate-amounts-of-data-in-a-web-app-db-or-flat-files)

使用内存缓存并避免文件访问，因为这会更慢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T19:19:07.910

asp.net 有一个内置缓存，这里是关于它的最佳实践的 msdn [http://msdn.microsoft.com/en-us/library/aa478965.aspx](http://msdn.microsoft.com/en-us/library/aa478965.aspx)

# excel - 在 Excel 中使用 VBA 在多页中将元素从一页复制到另一页

> ID：10822450
> 
> 赞同：5
> 
> 时间：2012-05-30T18:52:11.353
> 
> 标签：excel, vba, multipage

我在用户表单中有一个多页。在运行时，用户可以随时选择添加 x 个页面。每个页面的元素都是相同的。我想知道是否有办法复制这些元素，或者我是否需要为每个新页面重新创建这些相同的元素？如果是这样，我如何在页面上指定应该放置元素的位置？

![在此处输入图像描述](../Images/2af01de0bb358af765b19b33434432d5.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T19:21:26.020

诀窍是将所有控件放在第一页的一个框架中，然后其余的就变得容易了:)

此代码将在创建后将控件复制`Page1`到并相应地对齐它们。`Page2``Page2`

```
Option Explicit

Private Sub CommandButton2_Click()
    Dim l As Double, r As Double
    Dim ctl As Control

    MultiPage1.Pages.Add

    MultiPage1.Pages(0).Controls.Copy
    MultiPage1.Pages(1).Paste

     For Each ctl In MultiPage1.Pages(0).Controls
        If TypeOf ctl Is MSForms.Frame Then
            l = ctl.Left
            r = ctl.Top
            Exit For
        End If
    Next

    For Each ctl In MultiPage1.Pages(1).Controls
        If TypeOf ctl Is MSForms.Frame Then
            ctl.Left = l
            ctl.Top = r
            Exit For
        End If
    Next
End Sub 
```

**快照**

![在此处输入图像描述](../Images/2304115c61da10281b0fa55dda347081.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-08T10:25:37.430

“运行时错误 '-2147417949 (80010108)' 可能是由于窗体上的其他位置有一个框架。尝试删除任何其他框架并再次运行。

# autoit - AutoIt 中的 CLASS:wxWindowNR 是什么，如何单击控件？

> ID：10822454
> 
> 赞同：0
> 
> 时间：2012-05-30T18:52:21.580
> 
> 标签：autoit

我正在使用 AutoIt 来尝试自动使用一个名为 PhotoZoom 4 的程序。我遇到了一个问题，我需要在一个框中键入文本，其中这是类和实例：[CLASS:wxWindowNR; 实例：8]

我试过以下没有运气（每一行都是单独的尝试）：

```
ControlSetText($batchWindowTitle2, "", "[CLASS:wxWindowNR; INSTANCE:8]", '800')

ControlCommand($batchWindowTitle2, "", "[CLASS:wxWindowNR; INSTANCE:8]", "AddString", '800')

ControlClick($batchWindowTitle2, "", "[CLASS:wxWindowNR; INSTANCE:8]", "left", 1, 32, 12)
Send("800") 
```

我希望 ControlCommand 或 ControlSetText 至少可以工作，但他们没有。我也用谷歌搜索了这个问题，但我在网络上的任何地方都找不到任何“wxWindowNR”的引用。我将附上控件的照片。

如果您也不知道 wxWindowNR 是什么（我希望您可能不知道，因为我在网络上的其他任何地方都没有看到它），那么在框中自动单击和输入的最佳方法是什么？我以为 ControlClick 会做到的...

![我正在使用的控件](../Images/32b013f552113e1ba6ef0e9416f7ad96.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:34:10.173

“制表符循环”（例如，`send("{Tab 5}")`）遍历所有控件，直到您在 GUI 中到达那里，然后使用简单的`send()`.

# c - 在终端上运行和 o/p 重定向到文件时使用 fork 的代码的不同行为

> ID：10822455
> 
> 赞同：1
> 
> 时间：2012-05-30T18:52:25.403
> 
> 标签：c, linux, fork

我遇到了一些测试代码，这些代码在直接在终端上执行以及将其输出重定向到文件时会给出不同的输出：

```
# include <stdio.h>
# include <stdlib.h>
int main()
{
     printf("hello\n");
     if(fork() ==0)
     {
            printf("world\n");
     }
} 
```

在终端上的输出是：

```
abhi@ubuntu:~/Desktop/ad/A1/CC$ ./vb
hello
abhi@ubuntu:~/Desktop/ad/A1/CC$ world 
```

（打印世界后光标仍在闪烁，按回车后显示正常提示。）

在将输出重定向到文件时：

```
./vb >v.txt
 abhi@ubuntu:~/Desktop/ad/A1/CC$ cat v.txt 
 hello
 hello
 world 
```

据我了解，父母并没有等待它打印`hello`和返回的孩子。然后孩子应该打印`world`并且代码应该终止。

我无法理解的是为什么代码在其输出被重定向时表现不同。这是什么原因？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T18:54:58.667

当 stdout 被重定向到文件时，它不是行缓冲的。当它是一个 tty 时，它是。因此，当写入 tty 时，`printf`立即写入 stdout 并且“这就是她写的全部内容”。

但是当`stdout`被重定向到一个文件时`"hello\n"`仍保留在`stdio`缓冲区中。当 you 时`fork`，两个进程（子进程和父进程）最终都会得到`stdio`缓冲区的副本，它们会在退出时刷新。

* * *

题外话：在我看来`o/p`，写“输出”是一种非常糟糕的方式——我讨厌一千个太阳的白热强度。

# .net - 301 重定向 webconfig IIS7 中的特定页面

> ID：10822456
> 
> 赞同：1
> 
> 时间：2012-05-30T18:52:32.313
> 
> 标签：.net, redirect, iis-7, web-config, http-status-code-301

我正在尝试使用 web.config 文件重定向我网站上的几个特定页面。这些页面中的大多数不仅不再存在，而且文件夹结构也不再存在。例如 mysite.com/oldfolder/index.aspx 不再存在 oldfolder 不存在。所以我想在我的项目的 web.config 中说明“所有对 /oldfolder/index.aspx 的请求现在都转到 /newfolder/index.aspx”。我做了一些挖掘，这似乎是最有意义的：

```
 <location path="oldfolder/index.aspx">
    <system.webServer>
      <httpRedirect enabled="true" destination="newfolder/index.aspx" httpResponseStatus="Permanent" />
    </system.webServer>
  </location> 
```

但是当我尝试转到 oldfolder/index.aspx 时，它的行为就像它甚至不存在并且抛出和错误一样。我究竟做错了什么？还是我完全以错误的方式攻击这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:31:54.053

原来我没有在我的本地 IIS 中打开 HTTP 重定向。（我阅读的教程没有提到）。所以现在 IIS 可以让我重定向了！

# python - 如何删除 pyqt4 tablewidget 中的所有单元格？

> ID：10822459
> 
> 赞同：6
> 
> 时间：2012-05-30T18:52:48.547
> 
> 标签：python, pyqt4

假设我有一个 pyqt4 表格小部件，例如：

```
self.table = QtGui.QTableWidget(3,4) 
```

有了`self.table.clear()`我可以删除表格的所有内容。但是，我怎样才能删除表格的所有单元格，而不仅仅是内容？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-30T20:41:56.957

或者，您可以设置行数和列数：

```
self.table.setRowCount(0)
self.table.setColumnCount(0) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T19:15:40.247

没试过，但你可以试试：

```
for i in reversed(range(self.table.rowCount())):
    self.table.removeRow(i) 
```

# sql-server - 拒绝为管理员用户启用 xp_cmdshell 访问

> ID：10822464
> 
> 赞同：5
> 
> 时间：2012-05-30T18:53:10.160
> 
> 标签：sql-server, windows, sql-server-2008, permissions, xp-cmdshell

我在数据库触发器中使用 xp_cmdshell 来启动 exe 文件。

xp_cmdshell 已启用（它可以执行简单的 cmd 命令，例如“echo”）。但是当我尝试通过 xp_cmdshell 启动 exe 时，访问被拒绝。

我是数据库管理员。我可以直接通过cmd启动exe。有人知道我为什么被拒绝以及如何解决吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-30T19:36:17.667

使用 xp_cmdshell 运行“whoami”，然后检查指定用户对 exe 及其访问的任何资源的有效权限。奇怪的是，像 localsystem 这样的帐户被用于通过 xp_cmdshell 运行进程。

```
EXEC xp_cmdshell 'whoami' 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-30T19:01:43.070

NTFS 权限可能不足。确保运行 SQL Server 的“用户帐户”具有对 *.EXE（和任何相关文件）的权限（读取+执行）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T17:20:47.283

不确定，但我相信触发器是由运行“触发”触发器的 SQL 命令的用户运行的。

发出 SQL 命令的用户是 Windows 用户还是 SQL 用户？如果是 SQL 用户，则需要设置“SQL 代理”。SQL 代理用于告诉 SQL 将使用哪个 Windows 用户访问文件系统。

希望这可以帮助，

伊夫

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-09T19:52:30.320

尝试运行 BCP 然后复制时，我被拒绝访问。

我发现 xp_cmdshell 从 c:\windows\system32 开始

我修改了我的 CMD 文件以更改为我的工作文件夹

L: cd L:\myworkingfolder

这解决了我的问题，尽管我的 sqlagent 是本地管理员并且我已经完全路径了我的复制命令。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-23T03:07:21.087

现在是时候做出贡献了。我是系统管理员角色，致力于让两个公共访问用户执行 xp_cmdshell。我能够执行 xp_cmdshell 但不能执行两个用户。

我做了以下步骤：

1.  创建新角色：

    使用 master CREATE ROLE [CmdShell_Executor] AUTHORIZATION [dbo] GRANT EXEC ON xp_cmdshell TO [CmdShell_Executor]

2.  在 master 数据库中添加用户：安全性 --> 用户。成员资格仅检查刚刚创建的 [CmdShell_Executor]

3.  设置代理帐户：

    EXEC sp_xp_cmdshell_proxy_account 'domain\user1','users1 Windows 密码' EXEC sp_xp_cmdshell_proxy_account 'domain\user2','users2 Windows 密码'

然后两个用户都可以执行包含 xp_cmdshell 调用 R 脚本运行的存储过程。我让用户输入密码，执行一行代码，然后删除密码。都在我的电脑里。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-04T16:51:08.950

我有同样的问题，我是这样解决的：

1.  打开 SQL Server 配置管理器
2.  选择您的实例并右键单击 -> 属性
3.  选择登录选项卡
4.  并选择授权账户

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-02T22:36:34.233

`Access is denied.`当您没有正确指定可执行文件的路径时，您也可以获得。请注意，如果您的路径包含空格，则需要将可执行文件括在双引号中：

```
EXEC xp_cmdshell '"D:\My path\With spaces\runme.exe"' 
```

# facebook-apps - Facebook Scraper 无法检索图像

> ID：10822470
> 
> 赞同：0
> 
> 时间：2012-05-30T18:53:38.537
> 
> 标签：facebook-apps, scraper

在我的页面中，我有这个：

```
<meta property="og:image" content="<?php echo $picURL; ?>"/> 
```

执行时呈现如下：

```
<meta property="og:image" content="http://a3.sphotos.ak.fbcdn.net/hphotos-ak-ash3/556898_400257580012798_100000856787624_1059515_311974781_n.jpg"/> 
```

但 Facebook 刮板看到它是这样的：

```
<meta property="og:image" content=""> 
```

它似乎没有考虑来自 Facebook 的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:21:37.050

[请在此处](http://facebook.stackoverflow.com/a/7623986/265570)查看我的答案，但您不能将 Facebook 上托管的图像设置为元标记。它曾经给你一个更清晰的错误信息，你不能热链接 Facebook 图像。

# asp.net - 在本地 IIS 上发布 asp 网站

> ID：10822471
> 
> 赞同：0
> 
> 时间：2012-05-30T18:53:41.393
> 
> 标签：asp.net, mysql

我有一个使用 MySql 数据库的 Asp 网站，我想将它发布到我自己的 PC 上进行测试，这可能吗？我是否需要将一些参考资料与它结合起来，还是什么？我需要修改 web.config 文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:00:40.997

运行您的应用程序需要两个软件。

1.  您需要一个能够为 ASP 页面提供服务的 Web 服务器。安装完整的 IIS，或者如果它只是为了您自己的测试，您可以使用 IIS Express（包含在例如 WebMatrix 中）。

2.  您需要安装 MySql 服务器来运行数据库。如果站点的部署包中不包含 MySql 驱动程序，您还需要单独安装它们。

# c# - Azure 模拟器的部署问题

> ID：10822474
> 
> 赞同：0
> 
> 时间：2012-05-30T18:53:54.200
> 
> 标签：c#, deployment, azure, azure-worker-roles

我正在尝试运行 Azure Worker Role 的本地实例以进行调试和测试，但由于某种原因，我的 Role 不会在本地部署到 Emulator，它是说“计算模拟器出错：发现太多。 csdef 文件.."

问题是，我检查了项目目录，只有一个csdef文件...

我已经按照要求使用 CSPack 构建了文件，我的 CSRun 命令如下所示：

csrun.exe /run:C:\ODA T\WorkerRole\WorkerRole;C:\ODAT\WorkerRole\WorkerRole\ServiceDefinition.csdef

这正在以下目录中运行：C:\Program Files\Windows Azure Emulator\emulator

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:13:30.787

尝试使用 cscfg 文件而不是 csdef，并将 .csx 目录用于模拟器。

csrun C:\ODAT\WorkerRole\WorkerRole.csx C:\ODAT\WorkerRole\WorkerRole.cscfg

如果您没有 .cscfg 文件，您可以通过指定 /generateConfigurationFile:ServiceConfiguration.cscfg 让 cspack 为您创建它

# java - 获取 Google Play 应用内订阅的到期日期

> ID：10822478
> 
> 赞同：7
> 
> 时间：2012-05-30T18:54:17.913
> 
> 标签：java, android, in-app-purchase, subscriptions

Android 应用的新应用内订阅产品的实现似乎与常规托管/非托管产品相同，但 (afaik) 只能通过 Google Play Android Develope 基于 HTTP 的 API 获得订阅的到期日期。那部分让我一无所知。

任何使用 Google APIs Java Client Libraries 来获取到期日期的实现示例都会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:04:34.313

好吧，您始终可以使用 AIDL 计算订阅的到期日期。如果您请求`RESTORE_TRANSACTIONS`（假设您没有以前的本地数据），您将获得购买日期和订阅的当前状态以及一些其他数据。如果您有每月订阅并且远远超过第一个月，您必须检查当前状态（这可能是使用接收器自动`PURCHASE_STATE_CHANGE`从 Play 商店推送）。了解状态和购买日期，您可以计算到期日期。

# c# - 复制表格后无法更改名称

> ID：10822480
> 
> 赞同：0
> 
> 时间：2012-05-30T18:54:21.033
> 
> 标签：c#

我正在尝试使用 Visual Studio 在项目中复制和粘贴表单。

我已经成功地复制并粘贴了表单（在解决方案资源管理器中右键单击 > 复制；再次右键单击粘贴）我可以在解决方案资源管理器中更改新表单的名称。但是当我选择表单 [Design] 时，我无法在不更改原始表单中的名称属性的情况下更改名称属性。不知何故，这两者是联系在一起的。我究竟做错了什么？

我希望这一切都有意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:58:14.793

从项目中排除该表单的所有文件，然后再次包含。

您可以在重新打开项目后执行包含步骤。

# python - 雅虎 OAuth API 拒绝我的访问令牌时间戳（Python）

> ID：10822486
> 
> 赞同：2
> 
> 时间：2012-05-30T18:54:56.333
> 
> 标签：python, django, oauth, timestamp, yahoo

我正在从 Yahoo! 开发联系人导入器！和 GMail 到我们正在做的网络应用程序，使用 Python 和 DJango，我正面临 Yahoo! 的以下问题。

我可以请求我的授权令牌和我的 oauth 验证程序，但是，当我将其交换为访问令牌以便可以对 Yahoo 的 API 进行签名调用时，我得到以下响应：

```
'oauth_problem=timestamp_refused&oauth_acceptable_timestamps=1338401179-1338402379' 
```

而且，这是我生成的时间戳：

```
oauth_timestamp=1338401803 
```

如您所见，我的时间戳在您所要求的可接受的时间戳范围内。

这是我编写的生成 api 调用以获取我的访问令牌的函数：

```
def _yahoo_access_url(request, token, verifier):
    plain_url = settings.YAHOO_GET_ACCESS_URL
    signature = '&'.join((settings.YAHOO_SECRET + '%26', request.session['oauth_data']['oauth_token_secret']))
    nonce_charset = string.ascii_lowercase + string.ascii_uppercase + string.digits
    nonce = ''.join(random.sample(nonce_charset, 6)) 
    parameters = { 
            'oauth_consumer_key': settings.YAHOO_KEY,
            'oauth_signature_method': 'PLAINTEXT',
            'oauth_version': '1.0',
            'oauth_verifier': verifier,
            'oauth_token': token,
            'oauth_timestamp': int(time.time()),
            'oauth_nonce': nonce,
            'oauth_signature': signature,
        }   
    return settings.YAHOO_GET_ACCESS_URL % urllib.urlencode(parameters) 
```

然后，我正在做一些研究来解决我的问题，在 LinkedIn 开发者论坛上，我发现有人和我有同样的问题，他们给他的答案是他的服务器时间错误并且它产生了错误的时间戳，我发现了一个雅虎！Web服务来获取时间戳，所以，我这样修改了我的函数：

```
def _yahoo_access_url(request, token, verifier):
    plain_url = settings.YAHOO_GET_ACCESS_URL
    signature = '&'.join((settings.YAHOO_SECRET + '%26', request.session['oauth_data']['oauth_token_secret']))
    nonce_charset = string.ascii_lowercase + string.ascii_uppercase + string.digits
    nonce = ''.join(random.sample(nonce_charset, 6)) 
    timestamp = eval(urllib2.urlopen(settings.YAHOO_GET_TIME_URL, 'GET').read())
    parameters = { 
            'oauth_consumer_key': settings.YAHOO_KEY,
            'oauth_signature_method': 'PLAINTEXT',
            'oauth_version': '1.0',
            'oauth_verifier': verifier,
            'oauth_token': token,
            'oauth_timestamp': timestamp['Result']['Timestamp'],
            'oauth_nonce': nonce,
            'oauth_signature': signature,
        }   
    return settings.YAHOO_GET_ACCESS_URL % urllib.urlencode(parameters) 
```

这样，我直接从 Yahoo! 的服务器获得时间戳，但我仍然遇到同样的问题：

响应：'oauth_problem=timestamp_refused&oauth_acceptable_timestamps=1338401958-1338403158'

时间戳：oauth_timestamp=1338402557

它仍在范围内。

我究竟做错了什么？我错过了什么吗？，非常欢迎任何线索或建议，

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:39:03.137

我遇到了这个问题，我修复了它，只在服务器上设置了我的时间戳。例如：我来自巴西，我的服务器是 EUA，我的时间戳 = -7200 必须减少 2 小时。所以它工作得很好，我认为这是一个小错误，因为其他 API 没有相同的错误。

# java - 春天 3.0.5 不工作

> ID：10822488
> 
> 赞同：1
> 
> 时间：2012-05-30T18:55:11.887
> 
> 标签：java, spring, spring-mvc, interceptor

我正在尝试创建一个拦截器以在调用控制器之前记录 http 请求详细信息。我的春天 xml 是

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:tx="http://www.springframework.org/schema/tx"

xsi:schemaLocation="
    http://www.springframework.org/schema/beans     
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/mvc 
    http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
                http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd"
    >

<context:component-scan base-package="com.xxx.controller" />

<mvc:interceptors>
    <mvc:interceptor>
    <mvc:mapping path="/**" />
    <bean class="com.xxx.interceptor.LogBillingInterceptor">
</bean>
</mvc:interceptor>
</mvc:interceptors> 
```

我的拦截器类

```
public class LogBillingInterceptor extends HandlerInterceptorAdapter{

@Override
public boolean preHandle(HttpServletRequest request,
        HttpServletResponse response, Object handler) throws Exception {
    System.out.println("sdfsdfdsfd");
    return super.preHandle(request, response, handler);
}

@Override
public void postHandle(HttpServletRequest request,
        HttpServletResponse response, Object handler,
        ModelAndView modelAndView) throws Exception {
    System.out.println("aaaaaaaasdfsdfdsfd");
    super.postHandle(request, response, handler, modelAndView);
}

@Override
public void afterCompletion(HttpServletRequest request,
        HttpServletResponse response, Object handler, Exception ex)
        throws Exception {
    System.out.println("qqqqqqqqqqsdfsdfdsfd");
    super.afterCompletion(request, response, handler, ex);

} 
```

}

但它似乎不起作用。我正在使用弹簧 3.0.5

我刚刚看到我们正在使用 spring-oauth2 并使用以下内容。

```
<http access-denied-page="/error" access-decision-manager-ref="accessDecisionManager"  entry-point-ref="loginUrlAuthenticationEntryPoint" xmlns="http://www.springframework.org/schema/security">

    <intercept-url pattern="/oauth/token" access="IS_AUTHENTICATED_ANONYMOUSLY" />
    <intercept-url pattern="/oauth/**" access="ROLE_USER" />

    <intercept-url pattern="/store/**" access="ROLE_USER" />
    <intercept-url pattern="/balance/**" access="ROLE_USER" />
    <intercept-url pattern="/api/**" access="ROLE_USER" />
    <intercept-url pattern="/tapjoy" access="IS_AUTHENTICATED_ANONYMOUSLY" />

    <intercept-url pattern="/verify_credentials" access="ROLE_USER" />

    <intercept-url pattern="/welcome/**" access="ROLE_USER" />
    <intercept-url pattern="/logout/**" access="ROLE_USER" />

    <intercept-url pattern="/login" access="IS_AUTHENTICATED_ANONYMOUSLY" />
    <intercept-url pattern="/loginfailed" access="IS_AUTHENTICATED_ANONYMOUSLY" />

    <intercept-url pattern="/request_token_authorized.jsp" access="ROLE_USER,DENY_OAUTH" />

        <custom-filter position="FORM_LOGIN_FILTER" ref="tpAuthenticationFilter" />
</http> 
```

我们可以添加带有 Spring 安全性的拦截器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:01:13.473

可能是由于创建了 handlerMapping `mvc:annotation-driven`，我见过的最佳建议是删除`mvc:annotation-driven`，用适当的 HandlerAdapter 的显式 bean 定义替换（`AnnotationMethodHandlerAdapter`在 3.0 中），并显式指定 a`handlerMapping`作为属性，其中定义了拦截器。

[如何使用 spring mvc 3.0 注册处理程序拦截器？](https://stackoverflow.com/q/3230633/204788)

# java - 寻找 AspectJ 解析器

> ID：10822493
> 
> 赞同：1
> 
> 时间：2012-05-30T18:55:27.850
> 
> 标签：java, parsing, aspectj

我正在寻找一个解析器，它可以为我提供 AspectJ 源文件的信息。定义的切入点、建议等信息......

我在谷歌上搜索了一段时间，但没有找到任何有用的东西。似乎可以使用 AspectJ 编译器中包含的解析器，但我找不到有关如何使用它的任何信息。

我发现最有希望的是单元测试：[http ://eclipsesourcecode.appspot.com/jsrcs/org.eclipse.ajdt/AJDT_src/org.eclipse.ajdt.core.tests/src/org/eclipse/ajdt/core /tests/javaelements/AspectElementTests.java.html](http://eclipsesourcecode.appspot.com/jsrcs/org.eclipse.ajdt/AJDT_src/org.eclipse.ajdt.core.tests/src/org/eclipse/ajdt/core/tests/javaelements/AspectElementTests.java.html)

这些测试完全测试了我想要做的事情，但我找不到关于那里使用的 org.eclipse.ajdt.core.tests.javaelements.* 类的任何信息。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T20:00:11.433

您将需要访问 AspectJ git 存储库。可在此处获得：

[http://git.eclipse.org/c/aspectj/org.aspectj.git/](http://git.eclipse.org/c/aspectj/org.aspectj.git/)

在那里，查找 org.aspectj.org.eclipse.jdt.internal.compiler.parser.Parser 类。

这是解析器，并且只是解析器。如果您想做类似 AJDT 正在做的事情，这还远远不够。您必须从 org.aspectj.org.eclipse.jdt.internal.compiler.Compiler 开始。但是，你仍然需要做很多事情才能找到所有的交叉关系。

最好的方法是创建一个调用 AJDT 代码的 eclipse 插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:58:06.307

我认为作者最近提到它是一个手写解析器，所以我怀疑除了作为 AspectJ/AJDT 本身一部分的解析器之外，您不会找到其他解析器。

由于它是开源的，因此最好的办法是查看源代码。

您可能想在 AspectJ 邮件列表[https://dev.eclipse.org/mailman/listinfo/aspectj-users](https://dev.eclipse.org/mailman/listinfo/aspectj-users)上提问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T21:11:42.503

还有用于 AspectJ的[AspectBench 编译器 (abc) 。](http://www.sable.mcgill.ca/abc/)

# java - 用Java从PDF/A中提取文本

> ID：10822505
> 
> 赞同：2
> 
> 时间：2012-05-30T18:55:57.080
> 
> 标签：java, api, pdf, apache-tika

有没有可以从 PDF/A 中提取文本的 Java 框架？有许多 java PDF 框架，但它们没有指定是否支持该格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:33:45.490

Leonard Rosenthol 在 itext 峰会上就 PDF 标准和格式做了精彩的演讲。他解释了所有不同的子集。[您可以在http://www.parleys.com/#st=5&id=3188&sl=0](http://www.parleys.com/#st=5&id=3188&sl=0)在线观看视频

在[http://lowagie.com/summit2012presentations上有所有演示文稿的列表](http://lowagie.com/summit2012presentations)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:12:31.590

您应该查看[http://itextpdf.com/](http://itextpdf.com/)（特别是[本章](http://itextpdf.com/examples/iia.php?id=226)）。它是我用过的在 Java 中处理 PDF 文件的最佳开源框架。

# c# - 请求被中止：无法创建 SSL/TLS 安全通道

> ID：10822509
> 
> 赞同：78
> 
> 时间：2012-05-30T18:56:34.847
> 
> 标签：c#, asp.net, ssl, httpwebrequest

我的客户已告知我他们的 SSL 和 Internet Explorer 存在问题。他们说他们在访问 URL 时遇到了信任问题。

我正在通过 HTTPS 访问 JSON。该网站位于一台服务器上，我在本地计算机上使用控制台应用程序。我试图绕过 SSL 证书，但是，我的代码仍然失败。

我可以改变 HttpWebRequest 来解决这个问题吗？

我使用以下代码收到此错误：

```
 // You must change the URL to point to your Web server.
        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
        req.Method = "GET";
        req.AllowAutoRedirect = true;

        // allows for validation of SSL conversations
        ServicePointManager.ServerCertificateValidationCallback = delegate { return true; };

        WebResponse respon = req.GetResponse();
        Stream res = respon.GetResponseStream();

        string ret = "";
        byte[] buffer = new byte[1048];
        int read = 0;
        while ((read = res.Read(buffer, 0, buffer.Length)) > 0)
        {
            //Console.Write(Encoding.ASCII.GetString(buffer, 0, read));
            ret += Encoding.ASCII.GetString(buffer, 0, read);
        }
        return ret; 
```

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2014-11-05T16:37:11.637

我不得不启用其他安全协议版本来解决这个问题：

```
 ServicePointManager.SecurityProtocol = SecurityProtocolType.Tls
        | SecurityProtocolType.Tls11
        | SecurityProtocolType.Tls12
        | SecurityProtocolType.Ssl3; 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-31T16:09:36.390

我使用以下代码启用了日志记录：

[http://blogs.msdn.com/b/dgorti/archive/2005/09/18/471003.aspx](http://blogs.msdn.com/b/dgorti/archive/2005/09/18/471003.aspx)

日志位于 bin/debug 文件夹中（我的控制台应用程序处于调试模式）。您需要将安全协议类型添加为 SSL 3

我在日志中收到算法不匹配。这是我的新代码：

```
 // You must change the URL to point to your Web server.
        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
        req.Method = "GET";
        ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3;

        // Skip validation of SSL/TLS certificate
        ServicePointManager.ServerCertificateValidationCallback = delegate { return true; };

        WebResponse respon = req.GetResponse();
        Stream res = respon.GetResponseStream();

        string ret = "";
        byte[] buffer = new byte[1048];
        int read = 0;
        while ((read = res.Read(buffer, 0, buffer.Length)) > 0)
        {
            Console.Write(Encoding.ASCII.GetString(buffer, 0, read));
            ret += Encoding.ASCII.GetString(buffer, 0, read);
        }
        return ret; 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-02-17T21:12:19.370

与[现有答案](https://stackoverflow.com/a/26762357/4143285)类似，但在 PowerShell 中：

```
[System.Net.ServicePointManager]::SecurityProtocol = `
[System.Net.SecurityProtocolType]::Tls11 -bor 
[System.Net.SecurityProtocolType]::Tls12 -bor `   
[System.Net.SecurityProtocolType]::Tls -bor `
[System.Net.SecurityProtocolType]::Ssl3 
```

然后调用 Invoke-WebRequest 应该可以工作。

从匿名反馈中得到这个，很好的建议：写这个的更简单的方法是：

```
[System.Net.ServicePointManager]::SecurityProtocol = @("Tls12","Tls11","Tls","Ssl3") 
```

发现 Jaykul 的这篇精彩且相关的帖子：[Validating Self-Signed Certificates From .Net and PowerShell](https://huddledmasses.org/2014/07/validating-self-signed-certificates-properly-from-powershell/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-30T20:43:30.043

这可能是由几件事引起的（最有可能是最不可能的）：

1.  客户端不信任服务器的 SSL 证书。最简单的检查是将浏览器指向 URL 并查看是否有 SSL 锁定图标。如果你得到一个坏掉的锁，图标，点击它看看问题是什么：

    1.  过期日期 - 获取新的 SSL 证书
    2.  名称不匹配 - 确保您的 URL 使用与证书相同的服务器名称。
    3.  未由受信任的机构签署 - 从威瑞信等机构购买证书，或将证书添加到客户的受信任证书存储中。
    4.  在测试环境中，您可以更新您的证书验证器以跳过访问检查。不要在生产中这样做。
2.  服务器需要客户端 SSL 证书 - 在这种情况下，您必须更新代码以使用客户端证书签署请求。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-06-21T15:16:42.290

对于 .Net v4.0，我注意到，将 ServicePointManager.SecurityProtocol 的值设置为 (SecurityProtocolType)3072 但**在**创建 HttpWebRequest 对象之前有所帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-05-31T15:48:50.233

还收到“无法创建 SSL/TLS 安全通道”错误。这对我有用。System.Net.ServicePointManager.SecurityProtocol = (System.Net.SecurityProtocolType)3072;

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-11-24T09:07:11.153

请看下面的链接一次。SecurityProtocolType.SsL3 现在是旧的。

[http://codemust.com/poodle-vulnerability-fix-openssl/](http://codemust.com/poodle-vulnerability-fix-openssl/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-09-20T20:02:58.687

定义 SecurityProtocol 如下。这在我的情况下对问题进行了排序

ServicePointManager.SecurityProtocol = SecurityProtocolType.Tls12;

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-06-09T10:51:36.827

不幸的是，上面提到的答案都不适合我。下面列出的代码对我来说是个奇迹。以防万一它对某人有帮助。

```
ServicePointManager.Expect100Continue = true;
ServicePointManager.SecurityProtocol = SecurityProtocolType.Tls
        | SecurityProtocolType.Tls11
        | SecurityProtocolType.Tls12
        | SecurityProtocolType.Ssl3; 
```

这必须在创建 HttpWebRequest 之前设置。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-08T07:59:42.893

这对我有用：

```
ServicePointManager.ServerCertificateValidationCallback = (snder, cert, chain, error) => true; 
```

如果它不起作用，它可能适用于其他解决方案，例如：

```
ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3;
System.Net.ServicePointManager.SecurityProtocol = SecurityProtocolType.Tls | SecurityProtocolType.Tls11 | SecurityProtocolType.Tls12;
ServicePointManager.ServerCertificateValidationCallback = (snder, cert, chain, error) => true; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-09-13T17:21:46.660

我发现证书的类型也发挥了作用。

我有一个证书是：

（以下输出在 mmc ，证书属性中）

**数字签名、密钥加密 (a0)**

（下面的输出来自我下面的 C# 代码）

**X509Extension.X509KeyUsageExtension.KeyUsages='KeyEncipherment, DigitalSignature'** X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.CrlSign='False' X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.DataEncipherment='False' X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.DecipherOnly='False' X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags. DigitalSignature=' **True** ' X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.EncipherOnly='False' X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.KeyAgreement='False' X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.KeyCertSign='False' X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.KeyEncipherment=' **True**' X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.None='False' X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.NonRepudiation='False'

以上没有**奏效**。

================================

然后是另一个证书：

（以下输出在 mmc ，证书属性中）

**证书签名、离线 CRL 签名、CRL 签名 (06)**

（下面的输出来自我下面的 C# 代码）

**X509Extension.X509KeyUsageExtension.KeyUsages='CrlSign, KeyCertSign'** X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.CrlSign=' **True** ' X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.DataEncipherment='False' X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.DecipherOnly='False' X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags. DigitalSignature='False' X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.EncipherOnly='False' X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.KeyAgreement='False' X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.KeyCertSign=' **True** ' X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.KeyEncipherment='False' X509KeyUsageExtension .KeyUsages.X509KeyUsageFlags.None='假'X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.NonRepudiation='False'

它**确实有效**

下面的代码将允许您检查您的客户端证书

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Security.Cryptography;
using System.Security.Cryptography.X509Certificates;
using System.Text;

namespace MyNamespace
{
    public static class SecurityShower
    {
        public static void ShowHttpWebRequest(System.Net.HttpWebRequest hwr)
        {
            StringBuilder sb = new StringBuilder();
            if (null != hwr)
            {
                sb.Append("-----------------------------------------------HttpWebRequest" + System.Environment.NewLine);
                sb.Append(string.Format("HttpWebRequest.Address.AbsolutePath='{0}'", hwr.Address.AbsolutePath) + System.Environment.NewLine);
                sb.Append(string.Format("HttpWebRequest.Address.AbsoluteUri='{0}'", hwr.Address.AbsoluteUri) + System.Environment.NewLine);
                sb.Append(string.Format("HttpWebRequest.Address='{0}'", hwr.Address) + System.Environment.NewLine);

                sb.Append(string.Format("HttpWebRequest.RequestUri.AbsolutePath='{0}'", hwr.RequestUri.AbsolutePath) + System.Environment.NewLine);
                sb.Append(string.Format("HttpWebRequest.RequestUri.AbsoluteUri='{0}'", hwr.RequestUri.AbsoluteUri) + System.Environment.NewLine);
                sb.Append(string.Format("HttpWebRequest.RequestUri='{0}'", hwr.RequestUri) + System.Environment.NewLine);

                foreach (X509Certificate cert in hwr.ClientCertificates)
                {
                    sb.Append("START*************************************************");
                    ShowX509Certificate(sb, cert);
                    sb.Append("END*************************************************");
                }
            }

            string result = sb.ToString();
            Console.WriteLine(result);
        }

        public static void ShowCertAndChain(X509Certificate2 cert)
        {
            X509Chain chain = new X509Chain();
            chain.ChainPolicy.RevocationFlag = X509RevocationFlag.EntireChain;
            chain.ChainPolicy.RevocationMode = X509RevocationMode.Offline;
            chain.ChainPolicy.VerificationFlags = X509VerificationFlags.AllFlags;

            ////chain.ChainPolicy.VerificationFlags = X509VerificationFlags.IgnoreCtlSignerRevocationUnknown &&
            ////X509VerificationFlags.IgnoreRootRevocationUnknown &&
            ////X509VerificationFlags.IgnoreEndRevocationUnknown &&
            ////X509VerificationFlags.IgnoreCertificateAuthorityRevocationUnknown &&
            ////X509VerificationFlags.IgnoreCtlNotTimeValid;

            chain.Build(cert);

            ShowCertAndChain(cert, chain);
        }

        public static void ShowCertAndChain(X509Certificate cert, X509Chain chain)
        {
            StringBuilder sb = new StringBuilder();
            if (null != cert)
            {
                ShowX509Certificate(sb, cert);
            }

            if (null != chain)
            {
                sb.Append("-X509Chain(Start)-" + System.Environment.NewLine);
                ////sb.Append(string.Format("Cert.ChainStatus='{0}'", string.Join(",", chain.ChainStatus.ToList())) + System.Environment.NewLine);

                foreach (X509ChainStatus cstat in chain.ChainStatus)
                {
                    sb.Append(string.Format("X509ChainStatus::'{0}'-'{1}'", cstat.Status.ToString(), cstat.StatusInformation) + System.Environment.NewLine);
                }

                X509ChainElementCollection ces = chain.ChainElements;
                ShowX509ChainElementCollection(sb, ces);
                sb.Append("-X509Chain(End)-" + System.Environment.NewLine);
            }

            string result = sb.ToString();
            Console.WriteLine(result);
        }

        private static void ShowX509Extension(StringBuilder sb, int x509ExtensionCount, X509Extension ext)
        {
            sb.Append(string.Empty + System.Environment.NewLine);
            sb.Append(string.Format("--------X509ExtensionNumber(Start):{0}", x509ExtensionCount) + System.Environment.NewLine);
            sb.Append(string.Format("X509Extension.Critical='{0}'", ext.Critical) + System.Environment.NewLine);

            AsnEncodedData asndata = new AsnEncodedData(ext.Oid, ext.RawData);
            sb.Append(string.Format("Extension type: {0}", ext.Oid.FriendlyName) + System.Environment.NewLine);
            sb.Append(string.Format("Oid value: {0}", asndata.Oid.Value) + System.Environment.NewLine);
            sb.Append(string.Format("Raw data length: {0} {1}", asndata.RawData.Length, Environment.NewLine) + System.Environment.NewLine);
            sb.Append(asndata.Format(true) + System.Environment.NewLine);

            X509BasicConstraintsExtension basicEx = ext as X509BasicConstraintsExtension;
            if (null != basicEx)
            {
                sb.Append("-X509BasicConstraintsExtension-" + System.Environment.NewLine);
                sb.Append(string.Format("X509Extension.X509BasicConstraintsExtension.CertificateAuthority='{0}'", basicEx.CertificateAuthority) + System.Environment.NewLine);
            }

            X509EnhancedKeyUsageExtension keyEx = ext as X509EnhancedKeyUsageExtension;
            if (null != keyEx)
            {
                sb.Append("-X509EnhancedKeyUsageExtension-" + System.Environment.NewLine);
                sb.Append(string.Format("X509Extension.X509EnhancedKeyUsageExtension.EnhancedKeyUsages='{0}'", keyEx.EnhancedKeyUsages) + System.Environment.NewLine);
                foreach (Oid oi in keyEx.EnhancedKeyUsages)
                {
                    sb.Append(string.Format("------------EnhancedKeyUsages.Oid.FriendlyName='{0}'", oi.FriendlyName) + System.Environment.NewLine);
                    sb.Append(string.Format("------------EnhancedKeyUsages.Oid.Value='{0}'", oi.Value) + System.Environment.NewLine);
                }
            }

            X509KeyUsageExtension usageEx = ext as X509KeyUsageExtension;
            if (null != usageEx)
            {
                sb.Append("-X509KeyUsageExtension-" + System.Environment.NewLine);
                sb.Append(string.Format("X509Extension.X509KeyUsageExtension.KeyUsages='{0}'", usageEx.KeyUsages) + System.Environment.NewLine);
                sb.Append(string.Format("X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.CrlSign='{0}'", (usageEx.KeyUsages & X509KeyUsageFlags.CrlSign) != 0) + System.Environment.NewLine);
                sb.Append(string.Format("X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.DataEncipherment='{0}'", (usageEx.KeyUsages & X509KeyUsageFlags.DataEncipherment) != 0) + System.Environment.NewLine);
                sb.Append(string.Format("X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.DecipherOnly='{0}'", (usageEx.KeyUsages & X509KeyUsageFlags.DecipherOnly) != 0) + System.Environment.NewLine);
                sb.Append(string.Format("X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.DigitalSignature='{0}'", (usageEx.KeyUsages & X509KeyUsageFlags.DigitalSignature) != 0) + System.Environment.NewLine);
                sb.Append(string.Format("X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.EncipherOnly='{0}'", (usageEx.KeyUsages & X509KeyUsageFlags.EncipherOnly) != 0) + System.Environment.NewLine);
                sb.Append(string.Format("X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.KeyAgreement='{0}'", (usageEx.KeyUsages & X509KeyUsageFlags.KeyAgreement) != 0) + System.Environment.NewLine);
                sb.Append(string.Format("X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.KeyCertSign='{0}'", (usageEx.KeyUsages & X509KeyUsageFlags.KeyCertSign) != 0) + System.Environment.NewLine);
                sb.Append(string.Format("X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.KeyEncipherment='{0}'", (usageEx.KeyUsages & X509KeyUsageFlags.KeyEncipherment) != 0) + System.Environment.NewLine);
                sb.Append(string.Format("X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.None='{0}'", (usageEx.KeyUsages & X509KeyUsageFlags.None) != 0) + System.Environment.NewLine);
                sb.Append(string.Format("X509KeyUsageExtension.KeyUsages.X509KeyUsageFlags.NonRepudiation='{0}'", (usageEx.KeyUsages & X509KeyUsageFlags.NonRepudiation) != 0) + System.Environment.NewLine);
            }

            X509SubjectKeyIdentifierExtension skIdEx = ext as X509SubjectKeyIdentifierExtension;
            if (null != skIdEx)
            {
                sb.Append("-X509SubjectKeyIdentifierExtension-" + System.Environment.NewLine);
                sb.Append(string.Format("X509Extension.X509SubjectKeyIdentifierExtension.Oid='{0}'", skIdEx.Oid) + System.Environment.NewLine);
                sb.Append(string.Format("X509Extension.X509SubjectKeyIdentifierExtension.SubjectKeyIdentifier='{0}'", skIdEx.SubjectKeyIdentifier) + System.Environment.NewLine);
            }

            sb.Append(string.Format("--------X509ExtensionNumber(End):{0}", x509ExtensionCount) + System.Environment.NewLine);
        }

        private static void ShowX509Extensions(StringBuilder sb, string cert2SubjectName, X509ExtensionCollection extColl)
        {
            int x509ExtensionCount = 0;
            sb.Append(string.Format("--------ShowX509Extensions(Start):for:{0}", cert2SubjectName) + System.Environment.NewLine);
            foreach (X509Extension ext in extColl)
            {
                ShowX509Extension(sb, ++x509ExtensionCount, ext);
            }

            sb.Append(string.Format("--------ShowX509Extensions(End):for:{0}", cert2SubjectName) + System.Environment.NewLine);
        }

        private static void ShowX509Certificate2(StringBuilder sb, X509Certificate2 cert2)
        {
            if (null != cert2)
            {
                sb.Append(string.Format("X509Certificate2.SubjectName.Name='{0}'", cert2.SubjectName.Name) + System.Environment.NewLine);
                sb.Append(string.Format("X509Certificate2.Subject='{0}'", cert2.Subject) + System.Environment.NewLine);
                sb.Append(string.Format("X509Certificate2.Thumbprint='{0}'", cert2.Thumbprint) + System.Environment.NewLine);
                sb.Append(string.Format("X509Certificate2.HasPrivateKey='{0}'", cert2.HasPrivateKey) + System.Environment.NewLine);
                sb.Append(string.Format("X509Certificate2.Version='{0}'", cert2.Version) + System.Environment.NewLine);
                sb.Append(string.Format("X509Certificate2.NotBefore='{0}'", cert2.NotBefore) + System.Environment.NewLine);
                sb.Append(string.Format("X509Certificate2.NotAfter='{0}'", cert2.NotAfter) + System.Environment.NewLine);
                sb.Append(string.Format("X509Certificate2.PublicKey.Key.KeySize='{0}'", cert2.PublicKey.Key.KeySize) + System.Environment.NewLine);

                ////List<X509KeyUsageExtension> keyUsageExtensions = cert2.Extensions.OfType<X509KeyUsageExtension>().ToList();
                ////List<X509Extension> extensions = cert2.Extensions.OfType<X509Extension>().ToList();

                ShowX509Extensions(sb, cert2.Subject, cert2.Extensions);
            }
        }

        private static void ShowX509ChainElementCollection(StringBuilder sb, X509ChainElementCollection ces)
        {
            int x509ChainElementCount = 0;
            foreach (X509ChainElement ce in ces)
            {
                sb.Append(string.Empty + System.Environment.NewLine);
                sb.Append(string.Format("----X509ChainElementNumber:{0}", ++x509ChainElementCount) + System.Environment.NewLine);
                sb.Append(string.Format("X509ChainElement.Cert.SubjectName.Name='{0}'", ce.Certificate.SubjectName.Name) + System.Environment.NewLine);
                sb.Append(string.Format("X509ChainElement.Cert.Issuer='{0}'", ce.Certificate.Issuer) + System.Environment.NewLine);
                sb.Append(string.Format("X509ChainElement.Cert.Thumbprint='{0}'", ce.Certificate.Thumbprint) + System.Environment.NewLine);
                sb.Append(string.Format("X509ChainElement.Cert.HasPrivateKey='{0}'", ce.Certificate.HasPrivateKey) + System.Environment.NewLine);

                X509Certificate2 cert2 = ce.Certificate as X509Certificate2;
                ShowX509Certificate2(sb, cert2);

                ShowX509Extensions(sb, cert2.Subject, ce.Certificate.Extensions);
            }
        }

        private static void ShowX509Certificate(StringBuilder sb, X509Certificate cert)
        {
            sb.Append("-----------------------------------------------" + System.Environment.NewLine);
            sb.Append(string.Format("Cert.Subject='{0}'", cert.Subject) + System.Environment.NewLine);
            sb.Append(string.Format("Cert.Issuer='{0}'", cert.Issuer) + System.Environment.NewLine);

            sb.Append(string.Format("Cert.GetPublicKey().Length='{0}'", cert.GetPublicKey().Length) + System.Environment.NewLine);

            X509Certificate2 cert2 = cert as X509Certificate2;
            ShowX509Certificate2(sb, cert2);
        }
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-02-10T17:04:15.520

这对我有用：

```
ServicePointManager.Expect100Continue = true;
            ServicePointManager.SecurityProtocol = SecurityProtocolType.Tls
                   | SecurityProtocolType.Tls11
                   | SecurityProtocolType.Tls12
                   | SecurityProtocolType.Ssl3; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-12-15T09:46:48.987

来自@sameerfair 评论

“对于 .Net v4.0，我注意到，将 ServicePointManager.SecurityProtocol 的值设置为 (SecurityProtocolType)3072，但在创建 HttpWebRequest 对象之前有所帮助。”

上述建议对我有用。以下是对我有用的代码行

```
var securedwebserviceurl="https://somedomain.com/service";
ServicePointManager.Expect100Continue = true;
ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3 | SecurityProtocolType.Tls12 | SecurityProtocolType.Tls | SecurityProtocolType.Tls11;
// Skip validation of SSL/TLS certificate
ServicePointManager.ServerCertificateValidationCallback = delegate { return true; };
var httpWebRequest = (HttpWebRequest)WebRequest.Create(securedwebserviceurl);
httpWebRequest.ContentType = "application/json";
httpWebRequest.Method = "POST";
httpWebRequest.ProtocolVersion= HttpVersion.Version10;
var httpResponse = (HttpWebResponse)httpWebRequest.GetResponse();
using (var streamReader = new StreamReader(httpResponse.GetResponseStream())) {
string responseFromServer = streamReader.ReadToEnd();
} 
```

# nested - Drools - 规则层次结构和条件执行

> ID：10822512
> 
> 赞同：10
> 
> 时间：2012-05-30T18:56:40.000
> 
> 标签：nested, hierarchy, rules, drools

我想知道是否有一种方法可以定义规则之间的层次结构（不仅仅是执行顺序）并控制规则执行 - 即如果父规则被触发，那么下面的规则不应该被评估等等......

[此线程中的信息是一个选项，但它本质上是 IF/THEN/ELSE](https://stackoverflow.com/questions/9771396/drools-jboss-rule-nested-ifs)

有不同的选择吗？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-01T16:23:01.790

我不确定我是否理解您的问题，但结合使用激活组和传统的冲突解决策略可能会达到您的需要。例如，假设您有 3 条规则，A、B 和 C。您想使用，比如说，salience 按该顺序优先执行它们，并且一旦执行了一条规则，则该组中的其他规则都不应执行. 您可以像这样定义它们：

```
rule A
    salience 30
    activation-group "x"
...

rule B
    salience 20
    activation-group "x"
...

rule C
    salience 10
    activation-group "x"
... 
```

显着性保证如果 A 激活，它将首先触发，然后是 B，如果它们被激活，然后是 C。激活组保证一旦其中一个规则触发，该组中所有其他激活的规则都将被取消。因此，假设在您的会话中，规则 B 和 C 激活，但 A 没有激活，然后 B 将触发，C 将被取消。

请注意，激活组不会阻止以后重新激活规则。它只是在组中的规则之一触发时取消当前议程中的任何激活。

# jquery - XMLHttpRequest 无法加载 http://localhost:8080/exist/rest/db/.... Access-Control-Allow-Origin 不允许 Origin null

> ID：10822514
> 
> 赞同：6
> 
> 时间：2012-05-30T18:56:51.053
> 
> 标签：jquery, ajax, rest, exist-db

**我正在尝试使用对 eXist DB REST API(1) 的 ajax 调用来检索 XML 响应。**

谷歌浏览器为我提供了以下控制台错误：

```
XMLHttpRequest cannot load XMLHttpRequest cannot load http://localhost:8080/exist/rest/db/movies?_query=%2Fmovies. Origin null is not allowed by Access-Control-Allow-Origin Origin null is not allowed by Access-Control-Allow-Origin 
```

虽然 Firefox 中的 Firebug 提供以下控制台错误：

```
GET http://localhost:8080/exist/rest/db/movies?_query=%2Fmovies 200 OK X 35ms jquery.min.js(line 18) 
```

这是代码的ajax部分：

```
$.ajax({
                    type: 'GET',
                    dataType: 'xml',
                    url: 'http://localhost:8080/exist/rest/db/movies',
                    data: {
                        _query: _query_value,
                        _key: _key_value,
                        _indent: _indent_value,
                        _encoding: _encoding_value,
                        _howmany: _howmany_value,
                        _start: _start_value,
                        _wrap: _wrap_value,
                        _source: _source_value,
                        _cache: _cache_value
                    },
                    success: function(resp){
                        alert("Resp OK!");
                        console.log(resp);
                    },
                    error: function(hqXHR, textStatus, errorThrown){
                        var x=0;
                        alert("fail0 " + hqXHR + " " + textStatus + " " + errorThrown);
                    }
                }); 
```

我已经阅读了有关同一问题的一些相关问题，但我发现我尝试过的任何解决方案都没有运气。

从我的本地机器访问包含上述 ajax 代码段的 index.html，如下所示：

```
file:///.../index.html 
```

我尝试按如下方式执行 chrome：

```
chrome.exe --allow-file-access-from-files 
```

另外，我尝试将文件部署到在线主机，使其位于

```
http://www.<somedomain>.com/index.html 
```

我最接近的解决方案是将数据类型从 xml 更改为 jsonp。收到了响应，但由于它预计是 xml，因此我认为该错误与解析有关，Google Chrome 控制台返回了以下语句：

```
Uncaught SyntaxError: Unexpected token < 
```

和 Firebug 控制台：

```
XML can't be the whole program
[Break On This Error]   
</exist:result>
movies...3302057 (line 528, col 15) 
```

**回到我的问题，如何通过 eXist DB 正确检索 xml 文档？我究竟做错了什么？**

期待您的帮助。我对 Web 开发很陌生，而且我的想法已经不多了。

提前致谢！

**其他注意事项：**

我正在使用的 jquery.min.js 位于[http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js)

URI`http://localhost:8080/exist/rest/db/movies?_query=%2Fmovies`在直接键入任何浏览器时都有效。

**参考：**

```
(1) - http://www.exist-db.org/exist/devguide_rest.xml;jsessionid=e7096vtg4l7gmocouhe6zhle 
```

**更新** (1) 似乎我能够通过运行 eXist DB 作为服务器来解决 CORS 问题，如下所示：bin/server.sh（在 UNIX 中）或 bin\server.bat（在 Windows 中）。

不过，现在我遇到了另一种类型的问题。我在使用 jquery.js 的 Google Chrome 控制台中收到以下错误：

```
GET http://localhost:8080/exist/rest/db/movies?_query=%2Fmovies  jquery.js:8240
jQuery.ajaxTransport.send jquery.js:8240
jQuery.extend.ajax jquery.js:7719
(anonymous function) index.html:43
jQuery.event.dispatch jquery.js:3332
jQuery.event.add.elemData.handle.eventHandle jquery.js:2941 
```

并使用 jquery.min.js：

```
GET http://localhost:8080/exist/rest/db/movies?_query=%2Fmovies  jquery.min.js:18
f.support.ajax.f.ajaxTransport.send jquery.min.js:18
f.extend.ajax jquery.min.js:18
(anonymous function) index.html:43
f.event.handle jquery.min.js:17
f.event.add.i.handle.k jquery.min.js:16 
```

错误是什么意思？我的代码的哪一部分做错了？

(2) 更新 1 显然是我面临的一个不必要的问题。服务器模式不适用于我的机器，这就是出现上述错误的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T18:59:14.267

这是一个跨域请求，是不允许的。从 localhost 而不是 file:// 进行测试。此外，如果远程服务器打算使用 JSONP 以外的任何数据类型跨域工作，则远程服务器需要返回正确的[CORS标头。](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)JSONP 数据类型不适用于返回 XML。

# cassandra - Hector：如何删除行内的复合列

> ID：10822521
> 
> 赞同：3
> 
> 时间：2012-05-30T18:57:14.747
> 
> 标签：cassandra, hector

我在列族标签上有复合列

```
RowKey: A
=> (column=B:C, value=432b442b492b4b2b552b582b592b7465787433, timestamp=1338402672044003)
=> (column=C:D, value=442b492b4b2b552b582b592b7465787433, timestamp=1338402672044004)
=> (column=E:T, value=492b582b592b5a2b5a5a2b5a5a5a2b7465787434, timestamp=1338402672049002) 
```

例如，我如何在 A 行、列 (C:D) 中删除

它似乎：

```
Mutator<String> mutator = HFactory.createMutator(ks, se);
mutator.addDeletion(.. 
```

行和 CF 只需要 2 个参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T19:42:48.323

对于感兴趣的人来说，这就像他们的创作一样容易；

```
CompositeSerializer ce = new CompositeSerializer();
Composite c = new Composite();
c.add(0, "John");
c.add(1, "Connor");
mutator.addDeletion("key", "MyCF", c, ce); 
```

# c# - 聚合事件源和重新调度事件的最佳方式

> ID：10822531
> 
> 赞同：0
> 
> 时间：2012-05-30T18:58:35.230
> 
> 标签：c#, events, architecture, lambda

我正在尝试找到创建系统的最佳方法，在该系统中可以将事件源添加到管理器类中，然后将它们的事件重新分配给侦听器。具体来说，我有许多不同的输入源（键盘输入源、鼠标输入源、虚拟键盘输入源等），我希望开发人员能够监听键盘输入源和输入端的 KeyDown 事件manager 本身（从任何活动输入源中捕获此事件）。

暴力破解解决方案很容易，我最终创建了许多“调度”函数，当它们通过时简单地重新调度事件，但我最终有几十个单行函数，每当有新函数时我都必须创建新函数事件被添加到输入源接口。

我考虑过使用 lambda，但如果从管理器中删除了输入源，我需要一种方法来解开事件。我可以将 lambda 保存在字典中，由输入源键入，但是许多事件具有不同的 arg 类，并且为此创建多个字典开始变得丑陋。

我想知道我是否错过了一些简单的方法来保持清洁并保持我需要写下的额外代码量。

作为参考，这是我正在使用的对象的示例：

```
public interface IInputSource {}

public interface IKeyboardInputSource : IInputSource
{
    event EventHandler<KeyboardEventArgs> KeyDown;
    event EventHandler<KeyboardEventArgs> KeyUp;
}

public interface IMouseInputSource : IInputSource
{
    event EventHandler<MouseEventArgs> MouseDown;
    event EventHandler<MouseEventArgs> MouseUp;
}

public class InputManager : IKeyboardInputSource, IMouseInputSource
{
    private List<IInputSource> InputSources;

    //Event declarations from IKeyboardInputSource and IMouseInputSource

    public void AddSource(IInputSource source)
    {
        InputSources.Add(source);

        if (source is IKeyboardInputSource)
        {
            var keyboardSource = source as IKeyboardInputSource;
            keyboardSource.KeyDown += SendKeyDown;
            // Listen for other keyboard events...
        }
        if (source is IMouseInputSource)
        {
            // Listen for mouse events...
        }
    }

    public void RemoveSource(IInputSource source)
    {
        if (source is IKeyboardInputSource)
        {
            var keyboardSource = source as IKeyboardInputSource;
            keyboardSource.KeyDown -= SendKeyDown;
            // Remove other keyboard events...
        }
        if (source is IMouseInputSource)
        {
            // Remove mouse events...
        }

        InputSources.Remove(source);
    }

    private void SendKeyDown(object sender, KeyboardEventArgs e)
    {
        if (KeyDown != null) 
            KeyDown(sender, e);
    }

    //Other "send" functions
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:01:54.190

你看过[Reactive Extensions](http://msdn.microsoft.com/en-us/data/gg577609.aspx) (Rx) 框架吗？看起来它会满足您的要求，并为您提供丰富的功能/lambda，如 api 来管理和处理事件。

> Reactive Extensions (Rx) 是一个库，用于使用可观察序列和 LINQ 样式的查询运算符组合异步和基于事件的程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:55:15.633

可能这样的事情会有所帮助 - 这是一种通用方法，既可以直接订阅事件，也可以通过“接收器”接口

```
interface IInputSource<T> where T : EventArgs
{
    event EventHandler<T> InputEvent;
}
interface IInputSink<in T> where T : EventArgs
{
    void InputMessageHandler(object sender, T eventArgs);
}

internal class InputManager
{
    private Dictionary<Type, object> _inputSources;
    private Dictionary<Type, object> _inputSinks;
    private Dictionary<Type, object> _events;

    public void AddSource<T>(IInputSource<T> source) where T : EventArgs
    {
        _inputSources[typeof(T)] = _inputSources;      //add source
        _events[typeof(T)] = (EventHandler<T>)Dispatch; //register event for subscribers

        source.InputEvent += Dispatch;
        source.InputEvent += Dispatch2;
    }

    // Dispatch trough direct event subscriptions;
    private void Dispatch<T>(object sender, T e) where T : EventArgs
    {
        var handler = _events[typeof(T)] as EventHandler<T>;
        handler.Invoke(sender, e);
    }
    // Dispatch trough IInputSink subscriptions;
    private void Dispatch2<T>(object sender, T e) where T : EventArgs
    {
        var sink = _inputSinks[typeof(T)] as IInputSink<T>;
        sink.InputMessageHandler(sender, e);
    }

    //Subscription:  Client should provide handler into Subscribe()
    //or subscribe with IInputSink<MyEvent> implementation (Subscribe2())
    public void Subscribe<T>(EventHandler<T> handler) where T : EventArgs
    {
        var @event = _events[typeof(T)] as EventHandler<T>;
        _events[typeof(T)] = @event + handler;
    }

    public void Subscribe2<T>(IInputSink<T> sink) where T : EventArgs
    {
        _inputSinks[typeof(T)] = sink;
    }
}
class XXXX : EventArgs
{

}
public class Sink: IInputSink<XXXX>
{
    #region Implementation of IInputSink<in XXXX>

    public void InputMessageHandler(object sender, XXXX eventArgs)
    {
        throw new NotImplementedException();
    }

    #endregion

    public Sink() 
    {
        var v = new InputManager();
        v.Subscribe<XXXX>(GetInputEvent);
        v.Subscribe2(this);
    }

    private void GetInputEvent(object sender, XXXX xxxx)
    {
        throw new NotImplementedException();
    }
} 
```

# asp.net - 如何设置 ASP.NET 网站的默认页面

> ID：10822533
> 
> 赞同：1
> 
> 时间：2012-05-30T18:58:41.957
> 
> 标签：asp.net

我需要一些帮助，我已经购买了一个域，并且正在使用 Visual Studio 通过 FTP 发布网站。它发布成功，但是当我进入网站时，我收到目录列表被拒绝错误，我假设这是由于没有主页，因为当我进入地址并将 /Page.aspx 附加到地址时它工作正常。

有什么方法可以将我发布的网站的默认页面设置为指向默认页面？

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T19:07:56.387

简单的答案：将您的默认页面重命名为`Default.aspx`.

或者，如果您有权访问 IIS 配置设置，则可以指定[默认文档](http://learn.iis.net/page.aspx/203/default-documents/)。

![在此处输入图像描述](../Images/cd7765906799be19d6cde27d5142e336.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:01:10.623

您需要根据 iis 默认文档指定要用作默认页面的页面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T19:12:11.593

您应该有权访问 ISP 控制面板，您可以在其中指定默认页面。

在大多数 ISP 中，它们通常是相同的页面：

*   默认.aspx
*   索引.aspx

# javascript - 回发之前的表单标题

> ID：10822534
> 
> 赞同：1
> 
> 时间：2012-05-30T18:58:44.827
> 
> 标签：javascript, forms, post, submit

我有一个带有 onclick 方法的表单中的提交输入。onclick 方法正确地调整了表单的动作并允许表单提交（提交是自然处理的，而不是通过 javascript 提交）。我需要做的是添加一个 http 请求标头（确切地说是 X-Requested-With = XMLHttpRequest）。有没有办法确保表单帖子与该标题一起发送？无法使用 form.submit() 方法通过 javascript 提交帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:01:10.477

根据[这个答案](https://stackoverflow.com/questions/374885/can-i-change-the-headers-of-the-http-request-send-by-the-browser)，你所要求的在目前的形式下是不可能的。但是，您*也可以*修改表单提交的位置。例如 POST 到：

`www.mysite.com/XMLHttpRequest`或者`www.mysite.com/NormalRequest`

以便服务器了解请求的上下文。

# scheme - 作业：子列表？检查一个项目是否是第一个项目的子列表

> ID：10822537
> 
> 赞同：-1
> 
> 时间：2012-05-30T18:58:57.493
> 
> 标签：scheme, racket, atomic, sublist

所以我有这个程序需要使用具有以下属性的 Racket 在 Scheme 中编写，我很难过。`sublist?`使用两个输入调用该函数`S`，`L`这两个输入都是列表。它检查 S 是否是的子列表`L`并返回`#t`or `#f`。

示例类似于：

```
sublist? of (A A) and (A B C) is #f
sublist? of (A B C) and (A B D A B C D) is #t
sublist? of (A (B)) and (C ((A (B))) (C)) is #t 
```

`extractLists`需要创建一个名为的小函数来提取列表，并`(atomicSublist S L)`用于检查两个提取的列表是否每个元素`S`都在`L`.

到目前为止我有

```
(define (atomicSublist S L)
  (cond ((null? L) #f)
        ((equal? S (car L)) #t)
        (else (atomicSublist S (cdr L))))) 
```

第二部分并没有真正做任何事情，甚至不输出 S 的提取值。

*更新的代码：* 只是为了测试我`atomicSublist`现在用来检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:39:00.950

从一个更简单的问题开始，然后进行概括。

你将如何编写一个函数来检查一个符号是否`'a`是一个列表？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:01:05.040

这个问题有点模棱两可。这应该返回什么？（子列表？'（a（b））'（abcde））？？

无论如何，这是我写的：

```
(define (sublist? s l)  
  (cond ((null? s) true)
        ((atom? (car s))
         (cond ((exists? (car s) l) (sublist? (cdr s) (remove-elm (car s) l)))
               (else false)))
        (else 
         (cond ((sublist? (car s) l) (sublist? (cdr s) (remove-elm (car s) l)))
               (else false)))))

(define (exists? elm l)
  (cond ((null? l) false) 
        ((atom? (car l))
         (cond ((symbol=? elm (car l)) true)
               (else (exists? elm (cdr l)))))
        (else
         (cond ((exists? elm (car l)) true)
               (else (exists? elm (cdr l)))))))

(define (remove-elm elm l)
  (cond ((null? l) '())
        ((null? elm) l)
        ((atom? elm)
         (cond ((atom? (car l)) 
                (cond ((symbol=? elm (car l)) (cdr l))
                      (else (cons (car l) (remove-elm elm (cdr l))))))
               (else
                (cons (remove-elm elm (car l)) (remove-elm elm (cdr l))))))
        (else
         (remove-elm (cdr elm) (remove-elm (car elm) l)))))

(define (atom? elm)
  (and (not (null? elm)) (not (pair? elm)))) 
```

(sublist? '(aa) ('abcde)) 返回 #f。(sublist? '(abc) '(adbecf)) 返回 #t。(sublist? '(a (b)) '(c ((a (b)) ef))) 返回#t。(sublist? '(a (b) b) '(c ((a (b)) ef))) retrns #f。但是，(sublist? '(a (b)) '(abcd)) 返回 #t。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T20:51:47.123

我认为您不需要此检查`((equal? S (car L) ) #t)`，因为 L 的汽车永远不会等于列表 S。

这是我为 atomicSublist 想出的内容。

```
 (define (atomicSublist S L)
        (cond
            [(null? S) #t]
            [(member? (car S) L) (atomicSublist (cdr s) L)]
            [else #f])) 
```

# vb.net - 文本文件中的搜索字段

> ID：10822540
> 
> 赞同：-1
> 
> 时间：2012-05-30T18:59:13.637
> 
> 标签：vb.net, vb.net-2010

如果文本框的值与文本文件中每一行的任何第一个值匹配，我有一些编码会显示一个标签。

```
Dim sList As New List(Of String)(IO.File.ReadAllLines("Path"))
    Dim i As Integer
    For i = 0 To sList.Count - 1
        If sList(i).StartsWith(textbox1.Text) Then
            Label1.Visible = True
            Exit For
        Else
            Label1.Visible = False
        End If
    Next 
```

问题是如果文本框有 1 而文本文件有 11 它将显示标签，那么最好的方法是什么？

我试过 sList(i).Contains 等，但他们都没有做这项工作。

我在这里尝试了所有建议，但没有任何效果，我的文本文件有如下数字

```
11
15
18 
```

例如，如果我在文本框中有数字 1，那么标签是可见的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:48:45.857

试试这个：

```
Label1.Visible = IO.File.ReadAllLines("Path.txt").Any(Function(f) f = TextBox1.Text) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:04:57.000

我认为 LINQ 可以在这里使用：

```
Dim text = textbox1.Text
Dim textWithSpace = String.Format("{0} ", text)

Label1.Visible = IO.File.ReadAllLines("Path").Any(Function(line) line.StartsWith(textWithSpace) OrElse line = text) 
```

您需要导入`System.Linq`才能使其工作。

我假设空格结束文件中的每个单词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T19:05:00.840

如果您希望标签在至少有一行以 中的文本开头时可见`TextBox`，您可以使用 LINQ 和[`Enumerable.Any`](http://msdn.microsoft.com/en-us/library/bb534972.aspx)：

```
Dim matchingLines = From l In IO.File.ReadLines("Path")
                    Where l.StartsWith(textbox1.Text)
Label1.Visible = matchingLines.Any() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T19:05:43.700

尝试更改以下行，假设您正在从文本文件中读取并寻找整行的完全匹配，您可以尝试以下操作：

```
If sList(i).StartsWith(textbox1.Text + Environment.NewLine) Then 
```

那应该检查以确保它是该行上唯一的东西，因为它现在正在寻找新行并且不会匹配'11'

# sql-server - 为什么我不能将 TFS 附加到已正确还原到 SQL Server（我认为）的项目集合？

> ID：10822543
> 
> 赞同：7
> 
> 时间：2012-05-30T18:59:20.687
> 
> 标签：sql-server

我们尝试将 TFS 项目集合从一台 TFS 2010 服务器移动到另一台服务器。

1.  分离源服务器上 TFS 控制台中的集合
2.  在 SQL Server 2008 Standard Edition 中备份了集合 Tfs_DefaultCollection
3.  DBA 将集合还原到新数据库 Tfs_MyCollection 到目标 TFS 服务器使用的 SQL Server 2008 Enterprise R2 实例。
4.  TFS 管理员试图附加到目标服务器。

TFS 管理员收到以下错误消息。

> TF254078: 在以下 SQL Server 实例上未找到可附加的数据库：MyServerName。验证服务器名称和实例名称是否正确，以及使用 Team Foundation 管理控制台中的 detach 命令正确分离数据库。

我假设我们不需要在目标服务器中准备数据库实例，因为它已经包含一个 TFS 项目集合。我认为升级到 SQL Server 版本是可以接受的。

我的假设是否有效？无法连接到新的 TFS 服务器的原因可能是什么？

顺便说一句，我最初在 ServerFault 上创建了这篇文章[Mirror in Serverfault](https://serverfault.com/questions/392725/why-cant-i-attach-tfs-to-a-project-collection-that-was-restored-to-sql-server-c)，但它在那里产生的兴趣很小。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T21:23:44.313

确保 TFS 服务级别和 SQL 服务器版本都与以前的服务器匹配。*您可以使用SQL Management Studio* > >*或*> >
验证此信息*`Databases``Tfs_Configuration` *`Tfs_DefaultCollection``Properties``Extended Properties`**

 **注意这些属性：

```
TFS_PRODUCT_VERSION 10.0.40219.1
TFS_SCHEMA_VERSION Microsoft 团队基础服务器 2010 (SP1)
TFS_SERVICE_LEVEL Tfs2010.SP1.KB2182621.P#1

```

`<database instance name>`还要注意>>下的 SQL`Properties`版本`General`

```
版本 10.50.2500.0

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-21T18:35:19.940

这对我有用...

1.  在 TFS 2010 上执行的操作

    1.1 使用 TFS 控制台从“TFS 服务器”中“分离”集合
    1.2 使用 SQl 管理器“分离”相应 TFS 集合的数据库

2.  在 TFS 2012 上执行的操作

    2.1 使用 SQl 管理器为相应的 TFS 集合“附加”数据库
    2.2 确保授予 TFS 用户帐户对数据库的访问权限，否则 TFS 服务器将无法访问它。
    2.3 使用 TFS 控制台将集合“附加”到“TFS 服务器”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-02T20:33:53.697

就像附加信息一样...

如果是的话，KMoraz。TFS 和 SQL Server 都在同一版本（主要版本）上一起运行。

为了解释你可能如何到达那里：

*   您对 TFS 数据库进行了备份
*   您升级了 TFS 版本（TFS 迁移了您的数据库 - 它变成了另一个版本）
*   您恢复了备份（TFS 数据库版本现在比 TFS 版本本身旧）**

# ajax - 后退按钮不更新 IE 上 iframe 中的哈希

> ID：10822544
> 
> 赞同：0
> 
> 时间：2012-05-30T18:59:25.850
> 
> 标签：ajax, back-button

我有一个应用程序，它结合使用 onhashchange 事件（适用于新浏览器）和 Ben Alman 的 hashchange 插件（适用于旧浏览器）来跟踪历史记录，同时进行 ajax 调用或操作。在所有浏览器中都像魅力一样工作，后退和前进按钮让用户可以浏览通过更改哈希记录的操作。到目前为止，一切都很好。现在我们的页面将托管在差异域（跨域）中客户端页面的 iframe 中。Chrome 有点工作，但如果你对历史进行许多更改，它会在某个时候停止工作（我们可以忍受）。IE 根本不起作用。当我通过单击链接并更新哈希来导航我们的应用程序时，会在父页面中创建新的历史记录项，但是当我点击后退按钮时，嵌套页面中的哈希不会更新，因此 hashchange 事件永远不会触发。以前有人解决过这个问题吗？非常感谢

初始化哈希更改事件处理

```
if ("onhashchange" in window && !($j.browser.msie && $j.browser.version == '7.0')) {
    window.onhashchange = function() {
        var params = parseHash(location.hash)

        if (params.tabId) {
            if (getSelectedTabId() == params.tabId) return;
            reloadPage(params.tabId);
        }
    };
}
else {// Plugin for older browsers
    $j(window).bind('hashchange', function() {            
        var params = parseHash(location.hash)
        if (params.tabId) {
            if (getSelectedTabId() == params.tabId) return;
            reloadPage(params.tabId);
        }
    });
} 
```

# javascript - 如何在课堂上多次调用“动画”？

> ID：10822556
> 
> 赞同：0
> 
> 时间：2012-05-30T19:00:20.827
> 
> 标签：javascript, jquery

我在课堂上有方法：

```
function myClass(){

    this.showTab = function(){

        $('#tab-image').stop().animate(
            { left: 500 + 'px' },
            500 , function(){
                alert('end');
            }
        );

    }

} 
```

我调用了这个方法两次：

```
var obj = new myClass();
obj.showTab();
$('#tab-image').css({ left: -500 + 'px' });
obj.showTab(); 
```

此代码有效，但在第二次显示时没有动画。如何做好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:09:46.253

**animate 函数以***异步***模式运行***。这意味着第二个动画不会等到第一个动画完成，因此，两者都是并行执行的。这就是为什么动画有第二个参数：设置将在动画完成后执行的回调函数。*

 *这应该有效：

```
function myClass() {

    this.showTab = function(callback) {

        $('#tab-image').stop().animate({
            left: 500 + 'px'
        }, 500, callback);

    }

}

var obj = new myClass();
obj.showTab(function() {
    $('#tab-image').css({
        'left': -500 + 'px'
    });
    obj.showTab();
});​ 
```

或者，如果您需要在回调函数之前执行其他操作：

```
function myClass() {

    this.showTab = function(callback) {

        $('#tab-image').stop().animate({
            left: 500 + 'px'
        }, 500, function() {
            //Insert your code here
            if(typeof callback === "function") callback();
        });

    }

} 
```

希望这能解决您的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T20:54:35.810

我认为这是由动画效果的快速建立引起的。

为了防止这种情况，您应该做的是将两个参数传递给 stop() 方法；

```
 stop(true, true) 
```

这将导致效果队列被清除队列并跳转到最后。*

# macos - 在 OS X 登录窗口启动应用程序

> ID：10822557
> 
> 赞同：0
> 
> 时间：2012-05-30T19:00:30.273
> 
> 标签：macos, cocoa

我一直在尝试研究如何在登录屏幕上构建应用程序窗口。基本上以 Bootpicker 的工作方式。（参见：[http](http://www.myosxfreeware.com/wp-content/uploads/2008/01/bootpicker-1.jpg) ://www.myosxfreeware.com/wp-content/uploads/2008/01/bootpicker-1.jpg ） Bootpicker 项目已关闭，我一直在花费数小时寻找要研究的源代码。

有人对我需要做些什么来开始编写这样的东西有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:37:27.563

BootPicker 是（大部分）普通的 Mac OS X 应用程序；唯一真正神奇的部分是它使用的 LaunchAgent plist，其中包含一个特殊键：

```
 <key>LimitLoadToSessionType</key>
    <string>LoginWindow</string> 
```

我相信这就是让它在登录窗口启动所必需的一切。

# php - PHP Red Bean 未返回正确结果

> ID：10822562
> 
> 赞同：0
> 
> 时间：2012-05-30T19:00:47.790
> 
> 标签：php, mysql, orm, redbean

我有 3 张桌子。

剧集，季节，Episode_Season

我有这样的看法

```
"CREATE VIEW episode_season_view AS SELECT * FROM episode
INNER JOIN episode_season ON episode.id = episode_season.episode_id
INNER JOIN season ON season.id = episode_season.season_id"; 
```

顺便说一句，它就像一个魅力......现在当我在 MysqlWorkbench 中运行这个查询时

```
"SELECT * FROM season_episode_view
WHERE first_aired > CURDATE() AND season_id = 600"; 
```

它返回正确的结果。但是当我这样做时，

```
R::getRow("SELECT * FROM season_episode_view
WHERE first_aired > ? AND season_id = ?", array(date('Y-m-d'), $season_id)); 
```

它返回 0 行...我不明白为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:40:00.057

这只是一个猜测，但不是使用 PHP 的日期函数，而是使用 Redbean 的 MySQL 函数，并且可能`getAll()`：

```
$results=R::getAll("SELECT * FROM season_episode_view 
WHERE first_aired > ? AND season_id = ?", array(R::$f->curdate(), $season_id)); 
```

如果这不起作用，您可以尝试内置查询：

```
$row=R::$f->begin()
  ->select('*')->from('season_episode_view')
  ->where(' first_aired > ? AND season_id = ?')->put(R::$f->curdate(),$season_id)
  ->get('row'); 
```

我能想到的唯一另一件事是该`first_aired`列由于某种原因不喜欢 PHP `date()`，可能是由于字段类型？

# jquery - ios5 uiwebview 白色内容条纹错误

> ID：10822565
> 
> 赞同：0
> 
> 时间：2012-05-30T19:01:00.017
> 
> 标签：jquery, objective-c, ios, xcode, jquery-mobile

我正在将 jqueryMobile 文件正确加载到 android webview、所有已知的浏览器以及 safari mobile 中。所有这些都正确加载内容并在旋转设备时对其进行缩放。但是，当在 iOS uiwebview 上加载（在 iOS5 上测试）时，出现白色底部条纹......！我尝试了几种方法，但无法将其删除。我找到了一些关于这个 iOS 错误的信息，但还没有解决方案。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T18:59:37.490

我在顶部附近看到了一个类似的实例，它只需要将填充和边距设置为零

# sql - 插入错误 Oracle

> ID：10822570
> 
> 赞同：2
> 
> 时间：2012-05-30T19:01:12.857
> 
> 标签：sql, vb.net, oracle

我一直在尝试使用此脚本插入 Oracle 表：

```
 Try
            conn.Close()
            conn.Open()
            cmd.CommandText = "INSERT INTO PERSONAL(KODEPERSON) VALUES(:KODE)"
            cmd.Parameters.Add(":KODE", "AN001")
            cmd.Connection = conn
            cmd.ExecuteNonQuery()
            MessageBox.Show("SUCESS")
        Catch ex As Exception
            MessageBox.Show(ex.ToString)
        End Try 
```

但是当我在 VB.NET 中执行它时，它会在 EXECUTENONQUERY 中引发错误 ORA-01036

有人可以告诉我发生了什么事吗？

谢谢大家，我已经苦苦挣扎了大约 1 小时，现在我得到了解决方案，请注意，如果我们在任何声明中已经使用它时将 Oracle 命令声明为公共，请注意我们必须将其处理掉它将不再保留先前的语句缓存。上帝保佑每个人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:10:22.273

尝试将 cmd.Parameters.Add(":KODE", "AN001") 更改为 cmd.Parameters.Add("KODE", "AN001")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:11:26.533

如果您使用的是 Microsoft 的`OracleClient`，则不需要在 中使用冒号`Parameters.Add`：

```
cmd.Parameters.Add("KODE", "AN001") 
```

从[文档](http://msdn.microsoft.com/en-us/library/ebxy9a8b.aspx)：

> 对于`Oracle`，在`SQL`语句或存储过程中使用命名参数时，必须在参数名称前加上冒号 ( `:`)。但是，当在代码中的其他地方引用命名参数时（例如，调用 时`Add`），不要在命名参数前面加上冒号 ( `:`)。`.NET Framework Data Provider for Oracle`自动供应冒号。

**更新：**

采用

```
cmd.Parameters.AddWithValue("KODE", "AN001") 
```

# node.js - Node.js 中 path.normalize 和 path.resolve 的区别

> ID：10822574
> 
> 赞同：89
> 
> 时间：2012-05-30T19:01:30.990
> 
> 标签：node.js, path

`path.normalize(your_path)`和之间有什么区别（如果有的话）`path.resolve(your_path)`？

我知道`path.resolve(...)`可以接受多个参数，但是单个参数的行为与调用相同`path.normalize()`吗？

**编辑：**如果它们应该以相同的方式运行，那么`path.normalize(...)`当您可以简单地将路径传递给时，我不明白公开函数的目的，`path.resolve(...)`或者，也许它是出于文档目的。例如，他们在文档中说`path.resolve(...)`：

> ...生成的路径被规范化，并且...

暴露`path.normalize(...)`可以更容易地解释“规范化”是什么意思？我不知道。

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2012-05-30T20:34:47.520

`path.normalize`摆脱路径中多余的`.`,`..`等。`path.resolve`将路径解析为绝对路径。示例（我当前的工作目录是`/Users/mtilley/src/testing`）：

```
> path.normalize('../../src/../src/node')
'../../src/node'
> path.resolve('../../src/../src/node')
'/Users/mtilley/src/node' 
```

换句话说，`path.normalize`是“我能走的最短路径是什么，它将把我带到与输入相同的地方”，`path.resolve`而是“如果我走这条路，我的目的地是什么”。

但是请注意，**这**`path.normalize()`比. 已经依赖于上下文*（*即，如果它考虑了当前工作目录），上面示例中的结果将是，因为这是从到的最短路径。**`path.resolve()``path.normalize()`*`../node``/Users/mtilley/src/testing``/Users/mtilley/src/node`***

 ***具有讽刺意味的是，这意味着`path.resolve()`产生一个绝对路径的相对路径（你可以在任何地方执行它，它会产生相同的结果），而`path.normalize()`产生一个相对路径的绝对路径（你必须在你想要的相对路径中执行它计算绝对结果）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:28:55.537

从文档：

> 将resolve 理解为shell 中的一系列cd 命令的另一种方式。

[文档中指向path.resolve](http://nodejs.org/api/path.html#path_path_resolve_path)和[path.normalize](http://nodejs.org/api/path.html#path_path_normalize_path)的链接。我主要不想在答案中提供链接，但 Node.js 文档非常不错。***

# python - Selenium 中的无效 xPath 错误（使用有效的 xPath）

> ID：10822576
> 
> 赞同：2
> 
> 时间：2012-05-30T19:01:34.633
> 
> 标签：python, testing, xpath, selenium, pyccuracy

我正在使用具有 selenium 驱动程序的[pyccuracy测试 Python 应用程序。](https://github.com/heynemann/pyccuracy/wiki/)

我的测试结果显示 xPaths 存在一些不稳定问题。有时我会收到无效 xPath 错误，但 xPath 有效。如果我再次运行测试，它可能会起作用。我已经按照堆栈跟踪，但我找不到解决方案。

**堆栈跟踪：**

```
I do not see "top-search-tag-name" element - FAILED - Error executing action <bound method ElementIsNotVisibleAction.execute of <pyccuracy.actions.core.element_actions.ElementIsNotVisibleAction object at 0x2283b10>> - Traceback (most recent call last):
  File "/workspace/env_test/local/lib/python2.7/site-packages/pyccuracy/fixture_items.py", line 99, in execute
    self.execute_function(context, *self.args, **self.kwargs)
  File "/workspace/env_test/local/lib/python2.7/site-packages/pyccuracy/actions/core/element_actions.py", line 179, in execute
    self.assert_element_is_not_visible(context, element_key, error_message)
  File "/workspace/env_test/local/lib/python2.7/site-packages/pyccuracy/actions/__init__.py", line 147, in assert_element_is_not_visible
    if self.is_element_visible(context, selector):
  File "/workspace/env_test/local/lib/python2.7/site-packages/pyccuracy/actions/__init__.py", line 139, in is_element_visible
    is_visible = context.browser_driver.is_element_visible(selector)
  File "/workspace/env_test/local/lib/python2.7/site-packages/pyccuracy/drivers/core/selenium_driver.py", line 86, in is_element_visible
    is_present = self.selenium.is_element_present(element_selector)
  File "/workspace/env_test/local/lib/python2.7/site-packages/selenium/selenium.py", line 1369, in is_element_present
    return self.get_boolean("isElementPresent", [locator,])
  File "/workspace/env_test/local/lib/python2.7/site-packages/selenium/selenium.py", line 261, in get_boolean
    boolstr = self.get_string(verb, args)
  File "/workspace/env_test/local/lib/python2.7/site-packages/selenium/selenium.py", line 223, in get_string
    result = self.do_command(verb, args)
  File "/workspace/env_test/local/lib/python2.7/site-packages/selenium/selenium.py", line 217, in do_command
    raise Exception, data
Exception: ERROR: Invalid xpath [2]: //form[@id='searchtop']//ul[@class = 'tags block editing']//li/a[@class = 'tag'] 
```

**HTML 代码（已清理）**

```
<form id="searchtop">
  <ul class="tags block editing"> 
    <li class="tag"> 
      <a href="#" class="tag">Section Label</a>
      <a href="#" class="remove" title="Remove filter"></a> 
    </li> 
  </ul>
  ...  
</form> 
```

在此测试中，我单击了删除过滤器链接，然后检查该元素是否不存在。xPath 是正确的。例如，在 Chrome 中，我在删除标记之前使用 $x(...) 选择了元素，并在删除它后得到一个空列表。这就是测试的作用。有时，相同的测试在完全相同的环境中运行而不会出错。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-03T19:06:35.033

我在这里看到两个问题：

1.  即使出现错误，您的测试似乎仍在继续运行
2.  在执行下一个命令之前，您无需等待元素。

> 我没有看到“top-search-tag-name”元素 - 失败 - 错误执行

此错误意味着.. 元素“top-search-tag-name”不存在。通常发生在应用程序太慢或未完全加载时。要解决此问题，请尝试在继续之前等待元素

> 异常：错误：无效的xpath [2]：//form[@id='searchtop']//ul[@class = 'tags block editing']//li/a[@class = 'tag']

xpath 似乎是有效的。您介意将 xpath 更改为更短并试一试吗？ `//form[@id='searchtop']//[a.='Section Label']`

# javascript - 在一个页面上设置的 Javascript cookie 未在另一页面上设置

> ID：10822579
> 
> 赞同：1
> 
> 时间：2012-05-30T19:01:50.203
> 
> 标签：javascript, cookies

我尝试了两种使用 Javascript 设置和读取 cookie 的不同方法，但存在相同的问题。

我第一次在新的浏览器会话中访问该页面并浏览设置 cookie 的页面时，第一页报告它正在成功设置 cookie 并将用户重定向到下一页。下一页检查 cookie，没有检测到它，然后启动回到第一页。我再次浏览第一页，神奇地第二页检测到 cookie 设置正确。

这对于测试来说没问题，但它是可怕的最终用户体验。我使用了 Mozilla 建议的处理 cookie 的代码以及 Quirksmode 上的代码。无论哪种方式，我都有相同的结果。我在 cookie 中设置 JSON 以供稍后参考。

设置cookie的页面：/setCookie.php

读取cookie的页面：/readCookie.php

使用 Quirksmode 代码设置 cookie 的代码：

```
createCookie('userJSON',JSON.stringify(dat));
window.location="/readCookie.php"; 
```

使用 Quirksmode 代码读取 cookie 的代码：

```
if( !readCookie('userJSON') ){
    window.location="/setCookie.php";
} 
```

使用 Mozilla 代码设置 cookie 的代码：

```
docCookies.setItem("userJSON",JSON.stringify(dat),null,"/");
window.location="/readCookie.php"; 
```

使用 Mozilla 代码读取 cookie 的代码：

```
if( !docCookies.getItem('userJSON') ){
    window.location="/setCookie.php";
} 
```

JSON 存储在 cookie 中，使用 jsonlint.com 测试为有效：

```
{
    "first_name": "",
    "last_name": "",
    "email": "email@myDomain.test",
    "phone": "",
    "state": "CA",
    "barcode": "",
    "session_id": "1338398988873_4981",
    "guest_id": "",
    "event_id": "",
    "queue": "0",
    "SEND_MMS": false,
    "SEND_EMAIL": false,
    "location": "web"
} 
```

由于我没有更改 Mozilla 或 Quirksmode 代码，因此此处包含指向带有其代码的页面的链接。

Mozilla Cookie：[https ://developer.mozilla.org/en/DOM/document.cookie](https://developer.mozilla.org/en/DOM/document.cookie)

Quirksmode Cookie：[http ://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)

正如您从代码中看到的那样，路径被设置为“/”，因此它应该在域内的所有页面上都有效。对此问题的任何见解将不胜感激。

同样，这只是第一次在新的浏览器会话中访问页面时出现的问题（我可以通过退出浏览器，再次打开它并访问页面来轻松重现它），随后从同一个浏览器会话中运行这些页面流畅地浏览这些页面，而不会被引导回 setCookie.php 页面。

# c# - 比较 2 个字符串数组 C#

> ID：10822589
> 
> 赞同：0
> 
> 时间：2012-05-30T19:02:25.060
> 
> 标签：c#, arrays, string

我正在尝试编写一个简单的程序，该程序将从 2 个文本框中获取 2 个多行输入，将它们放入 2 个数组中并进行比较。

我想检查数组 1 中的条目（文本框 1 的每一行是数组 1 中的单独条目）是否在数组 2 中（文本框 2 的每一行都是数组 2 中的单独条目）。

然后将结果输出到文本框。

例如：

数组 1“一、二、三、四、六”

数组 2“一、三、五、四”

它应该输出：

```
one = found
two = not found
three = found
four = found
six = not found 
```

我到目前为止的代码如下：

```
 private void button1_Click(object sender, EventArgs e)
    {
         textBox3.Text = "";
         string[] New = textBox1.Text.Split('\n');
         string[] Existing = textBox2.Text.Split('\n');

       //for each line in textbox1's array
        foreach (string str in New)
        {

            //if the string is present in textbox2's array
            if (Existing.Contains(str))
            {
                textBox3.Text = "   ##" + textBox3.Text + str + "found";
            }
            /if the string is not present in textbox2's array
            else

            {
                textBox3.Text = "    ##" +textBox3.Text + str + "not found";
            }
        }

    } 
```

如果任一文本框中有不止一行，这将无法正常工作 - 我无法弄清楚为什么..在测试运行中发生以下情况：

```
Array 1 - "One"
Array 2 - "One"
Result = One Found

Array 1 - "One"
Array 2 - "One, Two"
Result = One Not Found

Array 1 - "One, Two"
Array 2 - "One, Two"
Result = One found, Two Found

Array 1 - "One, Two, Three"
Array 2 - "One, Two"
Result - One Found, Two Not Found, Three Not Found 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T19:07:28.023

> 如果任一文本框中有不止一行，这将无法正常工作 - 任何人都可以找出原因吗？

您应该自己诊断问题 - 我怀疑循环之前的一个简单断点，然后检查数组，会立即发现问题。

我很确定问题只是你应该分开`"\r\n"`而不是`'\n'`- 目前你最终会`\r`在除最后一行之外的所有行的末尾遇到一个流氓，这会弄乱结果。

您可以只使用该属性，而不是使用该`Text`属性然后拆分它`Lines`：

```
string[] newLines = textBox1.Lines;
string[] existingLines = textBox2.Lines;
... 
```

编辑：正如 Guffa 的回答中所述，您*还*希望避免`textBox3.Text`在每次迭代时进行替换。就个人而言，我可能会使用 create a `List<string>`，在每次迭代时添加它，然后在最终使用时：

```
textBox3.Lines = results.ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:07:17.107

使用武力，卢克：

```
char[] delimiterChars = { ' ', ',', '.', ':', '\t', '\n', '\r' };
string[] words = text.Split(delimiterChars); 
```

在分隔符中添加了 '\r'。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T19:28:32.533

您可以尝试此代码（只需将 更改`int`为`string`）：

```
var a = Enumerable.Range(1, 10);
var b = new[] { 7, 8, 11, 12 };

// mixing the two arrays, since it's a ISet, this will contain unique values
var c = new HashSet<int>(a);
b.ToList().ForEach(x => c.Add(x));

// just project the results, you can iterate through this collection to 
// present the results to the user
var d = c.Select(x => new { Number = x, FoundInA = a.Contains(x), FoundInB = b.Contains(x) }); 
```

产生：

![在此处输入图像描述](../Images/2d689a01a01de6a305b588a649197363.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T19:34:16.753

```
string[] New = textBox1.Text.Split(',').Select(t => t.Trim()).ToArray();
string[] Existing = textBox2.Text.Split(',').Select(t => t.Trim()).ToArray();
StringBuilder sb = new StringBuilder();
foreach (var str in New)
{
    sb.AppendLine(str + (Existing.Contains(str) ? " found" : " not found"));
}
textBox3.Text = sb.ToString(); 
```

# android - Getting feeds from Facebook in Android layout

> ID：10822591
> 
> 赞同：0
> 
> 时间：2012-05-30T19:02:26.533
> 
> 标签：android, facebook, facebook-graph-api

I am trying to integrate my application with social networks (facebook and twitter).

I want to have acess for exemple to a user wall or to a public wall and post it in my layout, like a scroll view or a item view (or any sugestions!!!), this is solved for twitter, but i can not put that work to facebook.

I use the Graph API.

To do a post in my wall i create the method **postTextOnMyWall**:

```
 public String postTextOnMyWall(String message) {

        Log.d("Tests", "Testing graph API wall post");
        try {
            Bundle parameters = new Bundle();
            parameters.putString("message", message);// key/value
            this.mAsyncRunner.request("me/feed", parameters, "POST",
                    new WallPostTextRequestListener(), null);

        } catch (Exception e) {
            e.printStackTrace();
        }
        return message;
    }

    public AsyncFacebookRunner getmAsyncRunner() {
        return this.mAsyncRunner;
    }

    public void setmAsyncRunner(AsyncFacebookRunner mAsyncRunner) {
        this.mAsyncRunner = mAsyncRunner;
    }
} 
```

This method as listener for posting text messages, **WallPostTextRequestListener**

```
 public class WallPostTextRequestListener implements RequestListener {

    public void showToast(String message) {
        Toast.makeText(getApplicationContext(), message, Toast.LENGTH_SHORT)
                .show();
    }

    // called on successful completion of the Request
    @Override
    public void onComplete(String response, Object state) {
        Log.d("WallPostTextRequestListener", "Got response: " + response);
        String message = "<empty>";
        try {
            JSONObject json = Util.parseJson(response);
            message = json.getString("message");
            showToast("Mensagem escrita no teu mural facebook!: " + message);
        } catch (JSONException e) {
            Log.e("WallPostTextRequestListener", "JSON Error in response");
        } catch (FacebookError e) {
            Log.e("WallPostTextRequestListener",
                    "Facebook Error: " + e.getMessage());
        }
        final String text = "Mensagem: " + message;
    }

    @Override
    public void onIOException(IOException e, Object state) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onFileNotFoundException(FileNotFoundException e,
            Object state) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onMalformedURLException(MalformedURLException e,
            Object state) {
        // TODO Auto-generated method stub

    }

    // called if there is an error
    @Override
    public void onFacebookError(FacebookError e, Object state) {
        // TODO Auto-generated method stub

    }

} 
```

And them i just use a object of the facebook login to do a post in an onClick button

```
// this is the editext where i write my post
                String messageFace = ((EditText) findViewById(R.id.message))
                        .getText().toString();
                lf.postTextOnMyWall(messageFace); 
```

How can i do the same to get the feed from my wall or a public page? Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:44:58.073

With some time around this problem, i and with a help of a coworker we had found the solution.

We will gonna create a HashMap pass it 2 two strings for example, one for the comments and another tothe author of the post. After we will gonna create a intent to another activity in the end of the method onComplete above, so this must look something like this:

```
public void onComplete(String response, Object state) {
        Log.d("getFeedfromWallRequestListener", "Got response: "
                + response);
        try {
            JSONObject json = Util.parseJson(response);
            Log.d("TESTE", "MY FEED EM JSON: " + json);

            String comments;
            String names;
        //Show all the comments and names
            JSONArray jArray=(JSONArray)json.get("data");
            for(int i=0;i<(jArray.length());i++)
            {
                 //jArray.getJSONObject(i).getJSONObject("from").get("name");   
                 //jArray.getJSONObject(i).get("message");
                HashMap<String, String> map = new HashMap<String, String>();

                 comments =   jArray.getJSONObject(i).get("message").toString();
                 names =   jArray.getJSONObject(i).getJSONObject("from").get("name").toString();
                    map.put("comments", comments);
                    map.put("names", names);
                    mylist.add(map);

                 Log.d("NAMES","Names: " + names);
                 Log.d("Comments","Comments: " + comments);

            }                       
            //showToast("Json com resposta do teu mural facebook!: " + json);
        } catch (JSONException e) {
            Log.w("getFeedfromWallRequestListener",
                    "JSON Error in response");
        } catch (FacebookError e) {
            Log.w("getFeedfromWallRequestListener", "Facebook Error: "
                    + e.getMessage());
        }
        Intent intent = new Intent("android.intent.action.FacebookList");
        intent.putExtra("arraylist", mylist);

        try {
            Log.i("TAG", "starting activity(android.intent.action.FacebookList)");
            /*
             * 
             */
            startActivity(intent);
        } catch (Exception e) {
            Log.e("TAG", "error when trying to start activity: " + e.getMessage());
            for (int n = 0; n < e.getStackTrace().length; n++) {
                Log.e("TAG", "stack: " + e.getStackTrace()[n].toString());
            }
        }

    } 
```

To the new activity, for example FacebookList we will create a following ItemList layout:

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">    

<ListView
    android:id="@id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:drawSelectorOnTop="false" />

<TextView
    android:id="@id/android:empty"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="No data"/> 
```

After that, we will gonna create the FacebookList Activity, create a array of the HashMap and a adapter:

```
import java.util.ArrayList;
import java.util.HashMap;

import android.app.ListActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.AdapterView.OnItemClickListener;

public class FacebookList extends ListActivity{

  /** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.listplaceholder);

    ArrayList<HashMap<String, String>> arl =(ArrayList<HashMap<String, String>>) getIntent().getSerializableExtra("arraylist");
    System.out.println("...serialized data.."+arl);

    ListAdapter adapter = new SimpleAdapter(this, arl , R.layout.list_main, 
            new String[] { "comments", "names" }, 
            new int[] { R.id.item_title, R.id.item_subtitle });

    ListView listView = getListView();
    listView.setAdapter(adapter);
    listView.setTextFilterEnabled(true);

    listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // When clicked, show a toast with the TextView text
            Toast.makeText(getApplicationContext(),
            ((TextView) view).getText(), Toast.LENGTH_SHORT).show();
        }
    });
}
} 
```

I don't know if is the best approach but it worked for me, i hope that i help someone!

Best Regards

# php - File Upload Ajax PHP

> ID：10822595
> 
> 赞同：1
> 
> 时间：2012-05-30T19:02:45.183
> 
> 标签：php, javascript, mysql, html, ajax

I have a piece of javascript that uses Ajax and PHP to upload an image.

I am using the javascript in the head section of a few html pages and was wondering if there was a way of passing a value from these pages to the Upload.php file, without having to create individual Upload.php files for each web page.

Section of the javascript:

```
<script type="text/javascript" >
        $(function(){
            var btnUpload=$('#me');
            var mestatus=$('#mestatus');
            var files=$('#files');
            new AjaxUpload(btnUpload, {
                action: '../UploadDoc/Upload.php',
                name: 'uploadfile', 
```

Section of the Upload.php file i would like to pass value to:

```
<?php
/* Set the location to upload the file to */
$uploaddir = '../documents/userdocs/'; 

/* Set the name and file extension of the file being saved */
$file = $uploaddir ."HtmlPage1_".basename($_FILES['uploadfile']['name']); 
$file_name= "HtmlPage1_".$_FILES['uploadfile']['name']; 
```

Where 'HtmlPage1_' will be the information i need to pass in, as it is the only part that changes.

Any help much appreciated.

Many thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:30:58.970

在你的 Javascript 中做

```
$(function(){
        var btnUpload=$('#me');
        var mestatus=$('#mestatus');
        var files=$('#files');
        new AjaxUpload(btnUpload, {
            action: '../UploadDoc/Upload.php',
            name: 'uploadfile',
            params: {
                  pageKey: 'HtmlPage1_'
            }
      ......ETC-CODE...................... 
```

或者你的javascript代码

```
$(function(){
        var btnUpload=$('#me');
        var mestatus=$('#mestatus');
        var files=$('#files');
        new AjaxUpload(btnUpload, {
            action: '../UploadDoc/Upload.php?pageKey=HtmlPage1_',
            name: 'uploadfile',
      ......ETC-CODE...................... 
```

在你的 PHP 中做：

```
<?php
/* Set the location to upload the file to */
$uploaddir = '../documents/userdocs/'; 

/* Set the name and file extension of the file being saved */
$file = $uploaddir .$_REQUEST['pageKey'].basename($_FILES['uploadfile']['name']); 
$file_name= $_REQUEST['pageKey'].$_FILES['uploadfile']['name']; 
......ETC-CODE...................... 
```

然后将每个页面中的 javascript 代码修改为“pageKey”参数。

# c# - Upload S3 directories to an FTP

> ID：10822599
> 
> 赞同：0
> 
> 时间：2012-05-30T19:03:16.703
> 
> 标签：c#, amazon-s3, amazon-web-services

I need a class that takes a folder on S3 and uploads all its content, including other folders and files to a FTP directory. What's the best optimized way to handle that?

```
var client = Amazon.AWSClientFactory.CreateAmazonS3Client();
var request = new ListObjectsRequest()
              .WithBucketName("My.SimpleBucket").WithMarker("MyFolder");

 using (ListObjectsResponse response = client.ListObjects(request))
 {
    // here I can get Key and Size and BucketName of each object, 
    // but to get the stream of each object I gotta
    // do again request for each...
    // and this doesn't sound very right to me 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-31T20:52:16.447

最简单的方法实际上只是使用协议适配器 - 尝试使用 SMEStorage 的 S3 到 FTP 存储协议。我将它用于我的 CPanel 备份。它位于：[http ://smestorage.com/?p=static&page=CloudFTP](http://smestorage.com/?p=static&page=CloudFTP)

# .htaccess - .htaccess pretty url issue

> ID：10822600
> 
> 赞同：0
> 
> 时间：2012-05-30T19:03:19.510
> 
> 标签：.htaccess, friendly-url, pretty-urls

I'm changing

```
mydomain.com/directory/?name=lorem&action=posts 
```

to

```
mydomain.com/directory/lorem/posts 
```

But I'm now trying to add one called "other"

so I would like to get

```
mydomain.com/directory/?name=lorem&action=posts&other=38291389 
```

to

```
mydomain.com/directory/lorem/post/38291389 
```

This is the .htaccess code I am using for the first example

```
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME} !-d 
RewriteCond %{SCRIPT_FILENAME} !-f

RewriteRule ^(\w+)(/(\w+))?$ /directory/?name=$1&action=$3 
```

and here's the one I tried to make for the second example, but it doesn't work

```
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME} !-d 
RewriteCond %{SCRIPT_FILENAME} !-f

RewriteRule ^(\w+)(/(\w+))?$ /directory/?name=$1&action=$3&other=$4 
```

Could somebody help me get this to work?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:08:23.153

把事情简单化：

```
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME} -d [OR] 
RewriteCond %{SCRIPT_FILENAME} -f [OR]
RewriteRule .* - [L]

RewriteRule ^(\w+)/(\w+)/(\w+)/?$ /directory/?name=$1&action=$2&other=$3
RewriteRule ^(\w+)/(\w+)/?$ /directory/?name=$1&action=$2
RewriteRule ^(\w+)/?$ /directory/?name=$1 
```

在单个正则表达式中组合多个效果并没有真正的好处（虽然它很聪明并且让你感觉很好）但是当正则表达式引擎完成它的工作时，聪明的正则表达式可能需要更多的时间来匹配 2 或 3 个更简单的规则（如以上）。

# html - Seo - 锚标签中 href 值的重要性？

> ID：10822605
> 
> 赞同：1
> 
> 时间：2012-05-30T19:04:03.470
> 
> 标签：html, seo, anchor, href

我正在建立一个类似于 facebook 的常见问题解答页面。问题被包裹在一个锚标签中，点击问题，答案就会出现。我有以下两种方法

**方法一：**

```
<a href="#"> Question1 </a>
<a href="#"> Question2 </a>
<a href="#"> Question3 </a> 
```

**方法二：**

```
<a href="http://example.com/faq"> Question1 </a>
<a href="http://example.com/faq"> Question2 </a>
<a href="http://example.com/faq"> Question3 </a> 
```

锚点标签返回 false onclick。那么方法2有什么seo优势吗？

**注意：** 我希望所有常见问题解答都在同一页面上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T09:21:15.513

使用方法一，但是让哈希链接指向对应答案元素的ID：

```
<a href="#ID-of-answer-1">Question1</a>
<a href="#ID-of-answer-2">Question2</a>
<a href="#ID-of-answer-3">Question3</a> 
```

单击这些链接将跳转到页面的该部分。不需要 JavaScript。

## 和...

如果您将答案元素的 ID 设为描述性的（例如“how-can-i-help”）：

```
<article class="answer" id="how-can-i-help">
</article> 
```

...那么链接将非常适合 SEO：

```
<a href="#how-can-i-help">Question3</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:09:05.483

您的第一种方法是一种糟糕的方法。您永远不应该将 hashbangs 作为`href`. 它应该有一个有效的 URL，指向您使用 JavaScript 显示的相同内容。它被称为渐进增强是可访问性的核心要求。（仅供参考，选项 1 也将搜索引擎拒之门外，这对 SEO 不利）。

无论如何，选项 2 更好，因为 URL 中的关键字（包括超链接）是积极的排名因素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T19:10:34.160

夏兰克25，

我可能建议将它们作为单独的页面，因为您可以根据一个特定问题自定义标题、元数据和内容。只要内容很重要，这将导致更高的页面排名，增加您网站内的页面，并允许自定义每个页面以专注于主要问题。

否则，这里的搜索引擎并没有太大的区别。锚标签和标题可能是最有影响力的两条信息，但如果它们都在同一个页面上，它们都将位于一个 url 下，并作为一个主 url 被索引。

# mysql - Eliminating extra step of creating temp table

> ID：10822610
> 
> 赞同：1
> 
> 时间：2012-05-30T19:04:36.337
> 
> 标签：mysql, sql

I have a query that I execute with CREATE TEMPORARY TABLE AS SELECT because for the life of me I can't figure out how to write it as one query, hoping someone can show me how to eliminate the CREATE TEMPORARY TABLE AS.

My data:

`monitor table:` `date | ip | webid | userid | compid`

SQL

`CREATE TEMPORARY TABLE temp AS SELECT webid, userid, COUNT(ip) AS total, COUNT(DISTINCT ip) AS uniq FROM monitor GROUP BY webid, userid;`

`SELECT SUM(total), SUM(uniq) FROM temp;`

The two sums for total/uniq after it's been grouped, are all I really need but as mentioned I'd like to eliminate the step of creating the table.

thanks in advance for any help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:06:32.617

您可以使用派生表：

```
SELECT SUM(total), SUM(uniq) 
FROM (  SELECT webid, userid, COUNT(ip) AS total, COUNT(DISTINCT ip) AS uniq 
        FROM `monitor table`
        GROUP BY webid, userid) AS A 
```

（我`FROM`在您对临时表的定义中添加了一个，因为它丢失了）

# sql-server - Adding one more join kills performance

> ID：10822611
> 
> 赞同：3
> 
> 时间：2012-05-30T19:04:43.800
> 
> 标签：sql-server, sql-server-2005

We have a fairly complex query on SQL Server 2005 with these characteristics:

*   11 table joins
*   8 view joins
*   7 non-correlated query joins

All of the joins have a common indexed column.

It normally runs in under 30 seconds, but when adding one more table join (the joined column indexed), it runs seemingly forever.

I noticed that if I remove one particular existing view join, it runs fast again even with the new join.

Below is a modified version of the query with most joins removed but it still demonstrates the performance issue.

```
--This runs super slow
SELECT 
    L.LoanID    
FROM  dbo.Loan L 
    JOIN dbo.Company C ON c.CompanyKey = l.CompanyKey
    JOIN dbo.Status S  on L.LoanID = S.LoanID
    JOIN dbo.Participation P on L.LoanID = P.LoanID
    JOIN dbo.Delinquent D on  L.LoanID = D.LoanID
    JOIN dbo.Property Pr on Pr.Loanid = L.Loanid
    JOIN dbo.MailingAddress ma ON ma.LoanID = L.LoanID  
    LEFT JOIN dbo.BorrowerPhonePivot bp ON bp.loanid = l.loanid
WHERE s.primstat=1 AND  DATEADD(d,16,L.DueDate) <= C.TransPostDate

--This runs fast
 SELECT 
    L.LoanID    
 FROM  dbo.Loan L 
    JOIN dbo.Company C ON c.CompanyKey = l.CompanyKey
    JOIN dbo.Status S  on L.LoanID = S.LoanID
    JOIN dbo.Participation P on L.LoanID = P.LoanID
    JOIN dbo.Delinquent D on  L.LoanID = D.LoanID
    JOIN dbo.Property Pr on Pr.Loanid = L.Loanid
    --JOIN dbo.MailingAddress ma ON ma.LoanID = L.LoanID    
    LEFT JOIN dbo.BorrowerPhonePivot bp ON bp.loanid = l.loanid
 WHERE s.primstat=1 AND  DATEADD(d,16,L.DueDate) <= C.TransPostDate

 --This runs fast
 SELECT 
    L.LoanID    
 FROM  dbo.Loan L 
    JOIN dbo.Company C ON c.CompanyKey = l.CompanyKey
    JOIN dbo.Status S  on L.LoanID = S.LoanID
    JOIN dbo.Participation P on L.LoanID = P.LoanID
    JOIN dbo.Delinquent D on  L.LoanID = D.LoanID
    JOIN dbo.Property Pr on Pr.Loanid = L.Loanid
    JOIN dbo.MailingAddress ma ON ma.LoanID = L.LoanID  
    --LEFT JOIN dbo.BorrowerPhonePivot bp ON bp.loanid = l.loanid
 WHERE s.primstat=1 AND  DATEADD(d,16,L.DueDate) <= C.TransPostDate 
```

This problem isn't specific to this query as I have encountered this bizarre behavior before in other queries and have never been able to fully solve it. My theory is that SQL Server is hitting an internal query plan limit and goes stupid.

I filtered the query to one state (returned one record but took 10 minutes) in order to generate recommendations via the DTA. I added some needed indexes without any difference.

I examined the execution plan results but didn't find anything out of the ordinary.

Any suggestions on what else to look for?

**This is what I have tried:**

*   DTA - added one needed index out of 4 generated recommendations. (others are already covered)
*   MAXDOP 1 to see if it is threading issue per @AaronBertrand
*   UPDATE STATISTICS on tables per @AaronBertrand
*   Ran sqlplan ([pastebin](http://pastebin.com/4k0mr9Sz)) in SQL sentry plan explorer per @AaronBertrand. The strange this is that the **Actual Rows column shows a number that is an order of magnitude larger** than reality. Somehow the query plan optimizer is getting confused.

**showplan of first query:**

```
 |--Nested Loops(Left Outer Join, OUTER REFERENCES:([L].[LoanID]))
   |--Nested Loops(Inner Join, WHERE:([Expr1056]<=[Service_Prod].[dbo].[Company].[TransPostDate] as [C].[TransPostDate]))
   |    |--Hash Match(Inner Join, HASH:([ma].[LoanID])=([D].[LoanID]), RESIDUAL:([Service_Prod].[dbo].[Delinquent].[LoanID] as [D].[LoanID]=[Service_Prod].[dbo].[MailingAddress].[LoanID] as [ma].[LoanID]))
   |    |    |--Hash Match(Inner Join, HASH:([ma].[LoanID])=([P].[LoanID]), RESIDUAL:([Service_Prod].[dbo].[Participation].[LoanID] as [P].[LoanID]=[Service_Prod].[dbo].[MailingAddress].[LoanID] as [ma].[LoanID]))
   |    |    |    |--Merge Join(Inner Join, MERGE:([Pr].[LoanID])=([ma].[LoanID]), RESIDUAL:([Service_Prod].[dbo].[Property].[LoanID] as [Pr].[LoanID]=[Service_Prod].[dbo].[MailingAddress].[LoanID] as [ma].[LoanID]))
   |    |    |    |    |--Merge Join(Inner Join, MERGE:([Pr].[LoanID])=([L].[LoanID]), RESIDUAL:([Service_Prod].[dbo].[Loan].[LoanID] as [L].[LoanID]=[Service_Prod].[dbo].[Property].[LoanID] as [Pr].[LoanID]))
   |    |    |    |    |    |--Merge Join(Inner Join, MERGE:([Pr].[LoanID])=([S].[LoanID]), RESIDUAL:([Service_Prod].[dbo].[Status].[LoanID] as [S].[LoanID]=[Service_Prod].[dbo].[Property].[LoanID] as [Pr].[LoanID]))
   |    |    |    |    |    |    |--Index Scan(OBJECT:([Service_Prod].[dbo].[Property].[aaaaaProperty_PK] AS [Pr]), ORDERED FORWARD)
   |    |    |    |    |    |    |--Index Seek(OBJECT:([Service_Prod].[dbo].[Status].[_dta_index_Status_114_1122103038__K13_K1_K2_K3] AS [S]), SEEK:([S].[PrimStat]=(1)) ORDERED FORWARD)
   |    |    |    |    |    |--Compute Scalar(DEFINE:([Expr1056]=dateadd(day,(16),[Service_Prod].[dbo].[Loan].[DueDate] as [L].[DueDate])))
   |    |    |    |    |         |--Index Scan(OBJECT:([Service_Prod].[dbo].[Loan].[_dta_index_Loan_K1_K66_K10_K23] AS [L]), ORDERED FORWARD)
   |    |    |    |    |--Index Scan(OBJECT:([Service_Prod].[dbo].[MailingAddress].[StatusMailingAddress] AS [ma]), ORDERED FORWARD)
   |    |    |    |--Index Scan(OBJECT:([Service_Prod].[dbo].[Participation].[Reference17] AS [P]))
   |    |    |--Index Scan(OBJECT:([Service_Prod].[dbo].[Delinquent].[aaaaaDelinquent_PK] AS [D]))
   |    |--Table Scan(OBJECT:([Service_Prod].[dbo].[Company] AS [C]))
   |--Stream Aggregate(GROUP BY:([l].[LoanID]))
        |--Filter(WHERE:([Service_Prod].[dbo].[Loan].[LoanID] as [l].[LoanID]=[Service_Prod].[dbo].[Loan].[LoanID] as [L].[LoanID]))
             |--Hash Match(Inner Join, HASH:([b].[LoanID], [b].[AssmRecCounter], [b].[BorrowerID])=([bp].[LoanID], [bp].[AssmRecCounter], [bp].[BorrowerID]), RESIDUAL:([Service_Prod].[dbo].[BorrowerPhone].[LoanID] as [bp].[LoanID]=[Service_Prod].[dbo].[Borrower].[LoanID] as [b].[LoanID] AND [Service_Prod].[dbo].[Borrower].[AssmRecCounter] as [b].[AssmRecCounter]=[Service_Prod].[dbo].[BorrowerPhone].[AssmRecCounter] as [bp].[AssmRecCounter] AND [Service_Prod].[dbo].[Borrower].[BorrowerID] as [b].[BorrowerID]=[Service_Prod].[dbo].[BorrowerPhone].[BorrowerID] as [bp].[BorrowerID]))
                  |--Hash Match(Inner Join, HASH:([Service_Prod].[dbo].[Company].[CompanyKey])=([l].[CompanyKey]))
                  |    |--Index Scan(OBJECT:([Service_Prod].[dbo].[Company].[aaaaaCompany_PK]))
                  |    |--Merge Join(Inner Join, MERGE:([s].[LoanID])=([b].[LoanID]), RESIDUAL:([Service_Prod].[dbo].[Status].[LoanID] as [s].[LoanID]=[Service_Prod].[dbo].[Borrower].[LoanID] as [b].[LoanID]))
                  |         |--Index Seek(OBJECT:([Service_Prod].[dbo].[Status].[_dta_index_Status_114_1122103038__K13_K1_K2_K3] AS [s]), SEEK:([s].[PrimStat]=(1)) ORDERED FORWARD)
                  |         |--Merge Join(Inner Join, MERGE:([l].[LoanID])=([b].[LoanID]), RESIDUAL:([Service_Prod].[dbo].[Loan].[LoanID] as [l].[LoanID]=[Service_Prod].[dbo].[Borrower].[LoanID] as [b].[LoanID] AND [Service_Prod].[dbo].[Loan].[AssmRecCounter] as [l].[AssmRecCounter]=[Service_Prod].[dbo].[Borrower].[AssmRecCounter] as [b].[AssmRecCounter]))
                  |              |--Index Scan(OBJECT:([Service_Prod].[dbo].[Loan].[_dta_index_Loan_K1_K66_K10_K23] AS [l]), ORDERED FORWARD)
                  |              |--Index Scan(OBJECT:([Service_Prod].[dbo].[Borrower].[aaaaaBorrower_PK] AS [b]), ORDERED FORWARD)
                  |--Index Seek(OBJECT:([Service_Prod].[dbo].[BorrowerPhone].[_dta_index_BorrowerPhone_K12_K1_K2_K3_K5] AS [bp]), SEEK:([bp].[ForeignPhone]=(0)),  WHERE:([Service_Prod].[dbo].[BorrowerPhone].[PhoneType] as [bp].[PhoneType]=(0) OR [Service_Prod].[dbo].[BorrowerPhone].[PhoneType] as [bp].[PhoneType]=(1)) ORDERED FORWARD) 
```

showplan of 2nd query:

```
 |--Parallelism(Gather Streams)
   |--Hash Match(Left Outer Join, HASH:([L].[LoanID])=([l].[LoanID]), RESIDUAL:([Service_Prod].[dbo].[Loan].[LoanID] as [l].[LoanID]=[Service_Prod].[dbo].[Loan].[LoanID] as [L].[LoanID]))
        |--Parallelism(Repartition Streams, Hash Partitioning, PARTITION COLUMNS:([L].[LoanID]))
        |    |--Hash Match(Inner Join, HASH:([Pr].[LoanID])=([D].[LoanID]), RESIDUAL:([Service_Prod].[dbo].[Delinquent].[LoanID] as [D].[LoanID]=[Service_Prod].[dbo].[Property].[LoanID] as [Pr].[LoanID]))
        |         |--Bitmap(HASH:([Pr].[LoanID]), DEFINE:([Bitmap1065]))
        |         |    |--Hash Match(Inner Join, HASH:([Pr].[LoanID])=([P].[LoanID]), RESIDUAL:([Service_Prod].[dbo].[Participation].[LoanID] as [P].[LoanID]=[Service_Prod].[dbo].[Property].[LoanID] as [Pr].[LoanID]))
        |         |         |--Bitmap(HASH:([Pr].[LoanID]), DEFINE:([Bitmap1064]))
        |         |         |    |--Hash Match(Inner Join, HASH:([S].[LoanID])=([Pr].[LoanID]), RESIDUAL:([Service_Prod].[dbo].[Status].[LoanID] as [S].[LoanID]=[Service_Prod].[dbo].[Property].[LoanID] as [Pr].[LoanID]))
        |         |         |         |--Bitmap(HASH:([S].[LoanID]), DEFINE:([Bitmap1063]))
        |         |         |         |    |--Hash Match(Inner Join, HASH:([S].[LoanID])=([L].[LoanID]), RESIDUAL:([Service_Prod].[dbo].[Loan].[LoanID] as [L].[LoanID]=[Service_Prod].[dbo].[Status].[LoanID] as [S].[LoanID]))
        |         |         |         |         |--Bitmap(HASH:([S].[LoanID]), DEFINE:([Bitmap1062]))
        |         |         |         |         |    |--Parallelism(Repartition Streams, Hash Partitioning, PARTITION COLUMNS:([S].[LoanID]))
        |         |         |         |         |         |--Index Seek(OBJECT:([Service_Prod].[dbo].[Status].[IDX_Status_PrimStat_INCLoanID] AS [S]), SEEK:([S].[PrimStat]=(1)) ORDERED FORWARD)
        |         |         |         |         |--Parallelism(Repartition Streams, Hash Partitioning, PARTITION COLUMNS:([L].[LoanID]), WHERE:(PROBE([Bitmap1062],[Service_Prod].[dbo].[Loan].[LoanID] as [L].[LoanID])))
        |         |         |         |              |--Nested Loops(Inner Join, WHERE:([Expr1053]<=[Service_Prod].[dbo].[Company].[TransPostDate] as [C].[TransPostDate]))
        |         |         |         |                   |--Parallelism(Distribute Streams, RoundRobin Partitioning)
        |         |         |         |                   |    |--Table Scan(OBJECT:([Service_Prod].[dbo].[Company] AS [C]))
        |         |         |         |                   |--Compute Scalar(DEFINE:([Expr1053]=dateadd(day,(16),[Service_Prod].[dbo].[Loan].[DueDate] as [L].[DueDate])))
        |         |         |         |                        |--Index Scan(OBJECT:([Service_Prod].[dbo].[Loan].[_dta_index_Loan_K1_K66_K10_K23] AS [L]))
        |         |         |         |--Parallelism(Repartition Streams, Hash Partitioning, PARTITION COLUMNS:([Pr].[LoanID]))
        |         |         |              |--Index Scan(OBJECT:([Service_Prod].[dbo].[Property].[aaaaaProperty_PK] AS [Pr]),  WHERE:(PROBE([Bitmap1063],[Service_Prod].[dbo].[Property].[LoanID] as [Pr].[LoanID])))
        |         |         |--Parallelism(Repartition Streams, Hash Partitioning, PARTITION COLUMNS:([P].[LoanID]))
        |         |              |--Index Scan(OBJECT:([Service_Prod].[dbo].[Participation].[Reference17] AS [P]),  WHERE:(PROBE([Bitmap1064],[Service_Prod].[dbo].[Participation].[LoanID] as [P].[LoanID])))
        |         |--Parallelism(Repartition Streams, Hash Partitioning, PARTITION COLUMNS:([D].[LoanID]))
        |              |--Index Scan(OBJECT:([Service_Prod].[dbo].[Delinquent].[aaaaaDelinquent_PK] AS [D]),  WHERE:(PROBE([Bitmap1065],[Service_Prod].[dbo].[Delinquent].[LoanID] as [D].[LoanID])))
        |--Stream Aggregate(GROUP BY:([l].[LoanID]))
             |--Sort(ORDER BY:([l].[LoanID] ASC))
                  |--Parallelism(Repartition Streams, Hash Partitioning, PARTITION COLUMNS:([l].[LoanID]))
                       |--Hash Match(Inner Join, HASH:([b].[LoanID], [b].[AssmRecCounter], [b].[BorrowerID])=([bp].[LoanID], [bp].[AssmRecCounter], [bp].[BorrowerID]), RESIDUAL:([Service_Prod].[dbo].[BorrowerPhone].[LoanID] as [bp].[LoanID]=[Service_Prod].[dbo].[Borrower].[LoanID] as [b].[LoanID] AND [Service_Prod].[dbo].[Borrower].[AssmRecCounter] as [b].[AssmRecCounter]=[Service_Prod].[dbo].[BorrowerPhone].[AssmRecCounter] as [bp].[AssmRecCounter] AND [Service_Prod].[dbo].[Borrower].[BorrowerID] as [b].[BorrowerID]=[Service_Prod].[dbo].[BorrowerPhone].[BorrowerID] as [bp].[BorrowerID]))
                            |--Bitmap(HASH:([b].[LoanID], [b].[AssmRecCounter], [b].[BorrowerID]), DEFINE:([Bitmap1068]))
                            |    |--Parallelism(Repartition Streams, Hash Partitioning, PARTITION COLUMNS:([b].[LoanID], [b].[AssmRecCounter], [b].[BorrowerID]))
                            |         |--Hash Match(Inner Join, HASH:([s].[LoanID], [l].[AssmRecCounter])=([b].[LoanID], [b].[AssmRecCounter]), RESIDUAL:([Service_Prod].[dbo].[Status].[LoanID] as [s].[LoanID]=[Service_Prod].[dbo].[Borrower].[LoanID] as [b].[LoanID] AND [Service_Prod].[dbo].[Loan].[AssmRecCounter] as [l].[AssmRecCounter]=[Service_Prod].[dbo].[Borrower].[AssmRecCounter] as [b].[AssmRecCounter]))
                            |              |--Bitmap(HASH:([s].[LoanID], [l].[AssmRecCounter]), DEFINE:([Bitmap1067]))
                            |              |    |--Parallelism(Repartition Streams, Hash Partitioning, PARTITION COLUMNS:([s].[LoanID], [l].[AssmRecCounter]))
                            |              |         |--Hash Match(Inner Join, HASH:([Service_Prod].[dbo].[Company].[CompanyKey])=([l].[CompanyKey]))
                            |              |              |--Parallelism(Distribute Streams, Broadcast Partitioning)
                            |              |              |    |--Index Scan(OBJECT:([Service_Prod].[dbo].[Company].[aaaaaCompany_PK]))
                            |              |              |--Hash Match(Inner Join, HASH:([s].[LoanID])=([l].[LoanID]), RESIDUAL:([Service_Prod].[dbo].[Loan].[LoanID] as [l].[LoanID]=[Service_Prod].[dbo].[Status].[LoanID] as [s].[LoanID]))
                            |              |                   |--Bitmap(HASH:([s].[LoanID]), DEFINE:([Bitmap1066]))
                            |              |                   |    |--Parallelism(Repartition Streams, Hash Partitioning, PARTITION COLUMNS:([s].[LoanID]))
                            |              |                   |         |--Index Seek(OBJECT:([Service_Prod].[dbo].[Status].[IDX_Status_PrimStat_INCLoanID] AS [s]), SEEK:([s].[PrimStat]=(1)) ORDERED FORWARD)
                            |              |                   |--Parallelism(Repartition Streams, Hash Partitioning, PARTITION COLUMNS:([l].[LoanID]))
                            |              |                        |--Index Scan(OBJECT:([Service_Prod].[dbo].[Loan].[_dta_index_Loan_K1_K66_K10_K23] AS [l]),  WHERE:(PROBE([Bitmap1066],[Service_Prod].[dbo].[Loan].[LoanID] as [l].[LoanID])))
                            |              |--Parallelism(Repartition Streams, Hash Partitioning, PARTITION COLUMNS:([b].[LoanID], [b].[AssmRecCounter]))
                            |                   |--Index Scan(OBJECT:([Service_Prod].[dbo].[Borrower].[aaaaaBorrower_PK] AS [b]),  WHERE:(PROBE([Bitmap1067],[Service_Prod].[dbo].[Borrower].[LoanID] as [b].[LoanID],[Service_Prod].[dbo].[Borrower].[AssmRecCounter] as [b].[AssmRecCounter])))
                            |--Parallelism(Repartition Streams, Hash Partitioning, PARTITION COLUMNS:([bp].[LoanID], [bp].[AssmRecCounter], [bp].[BorrowerID]))
                                 |--Index Seek(OBJECT:([Service_Prod].[dbo].[BorrowerPhone].[_dta_index_BorrowerPhone_K12_K1_K2_K3_K5] AS [bp]), SEEK:([bp].[ForeignPhone]=(0)),  WHERE:(([Service_Prod].[dbo].[BorrowerPhone].[PhoneType] as [bp].[PhoneType]=(0) OR [Service_Prod].[dbo].[BorrowerPhone].[PhoneType] as [bp].[PhoneType]=(1)) AND PROBE([Bitmap1068],[Service_Prod].[dbo].[BorrowerPhone].[LoanID] as [bp].[LoanID],[Service_Prod].[dbo].[BorrowerPhone].[AssmRecCounter] as [bp].[AssmRecCounter],[Service_Prod].[dbo].[BorrowerPhone].[BorrowerID] as [bp].[BorrowerID])) ORDERED FORWARD) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:07:45.243

这听起来很愚蠢，但是尝试各种组合并添加所有连接条件，以使优化器有最佳匹配机会。我已经看到这有助于优化器选择更好的计划，这仅仅是因为表的顺序和基数。

```
SELECT ac.AccountNum
    FROM dbo.Account AS ac
    INNER JOIN dbo.Address AS ad
      ON ad.AccountNum = ac.AccountNum
    INNER JOIN dbo.PhoneView AS p
      ON p.AccountNum = ac.AccountNum
      AND p.AccountNum = ad.AccountNum; -- extra help here 
```

也可以按相反的顺序尝试：

```
SELECT ac.AccountNum
    FROM dbo.Account AS ac
    INNER JOIN dbo.PhoneView AS p
      ON p.AccountNum = ac.AccountNum
    INNER JOIN dbo.Address AS ad
      ON ad.AccountNum = p.AccountNum
      AND ad.AccountNum = ac.AccountNum; -- extra help here 
```

我已经`dbo.`为每个表添加了前缀（您应该[养成这样做的习惯](https://sqlblog.org/2009/10/11/bad-habits-to-kick-avoiding-the-schema-prefix)），以查看是否明确指定这些前缀可以改善优化器的决策（或至少防止重复计划），并使用较短的别名来提高可读性。

也不要忘记检查执行计划——可能是因为其中一些表的大小/基数，你得到了错误的连接类型。

**编辑**现在我们有查询计划，我们可以看到坏计划到处都有并行性。您可以尝试添加`MAXDOP 1`到查询中，但这只是暂时的缓解，不应该是真正的解决方法。我怀疑您看到错误的基数估计和跨多个线程的工作分配不当（通常归咎于`CXPACKET`等待，但它们是症状而不是原因）。我会检查查询中各种表的统计信息。如果您在免费的[SQL Sentry Plan Explorer](http://sqlsentry.net/plan-explorer/sql-server-query-view.asp)中加载实际执行计划，在“计划树”选项卡上，您将立即能够看到估计的和实际的行数严重偏离的地方，这应该会指导您需要哪些表更新[统计信息](http://msdn.microsoft.com/en-us/library/ms187348.aspx). 至少，这可能是大约 90% 的时间执行可怕的并行性的原因。

几个建议。由于公司只有一行，因此绝对不需要在查询中包含公司。相反，将截止日期拉入一个变量，减去 16 天，现在您可以使用 Loan.DueDate 上的索引（如果存在）：

```
DECLARE @d SMALLDATETIME;

SELECT @d = DATEADD(DAY, -16, TransPostDate) FROM dbo.Company;

SELECT L.LoanID
FROM dbo.Loan AS L
  INNER JOIN dbo.[Status] AS S                 ON L.LoanID  = S.LoanID
  INNER JOIN dbo.Participation AS P            ON L.LoanID  = P.LoanID
  INNER JOIN dbo.Delinquent AS D               ON L.LoanID  = D.LoanID
  INNER JOIN dbo.Property AS Pr                ON Pr.LoanID = L.LoanID
  INNER JOIN dbo.MailingAddress AS ma          ON ma.LoanID = L.LoanID  
  LEFT OUTER JOIN dbo.BorrowerPhonePivot AS bp ON bp.loanid = L.loanid
WHERE 
  s.primstat = 1 
  AND L.DueDate <= @cutoff; 
```

由于您只返回 LoanID，这不是做同样的事情吗？

```
DECLARE @d SMALLDATETIME;

SELECT @d = DATEADD(DAY, -16, TransPostDate) FROM dbo.Company;

SELECT L.LoanID
FROM dbo.Loan AS L
  WHERE L.DueDate <= @cutoff
  AND EXISTS (SELECT 1 FROM dbo.Status         WHERE LoanID = L.LoanID AND primstat = 1)
  AND EXISTS (SELECT 1 FROM dbo.Participation  WHERE LoanID = L.LoanID)
  AND EXISTS (SELECT 1 FROM dbo.Delinquent     WHERE LoanID = L.LoanID)
  AND EXISTS (SELECT 1 FROM dbo.Property       WHERE LoanID = L.LoanID)
  AND EXISTS (SELECT 1 FROM dbo.MailingAddress WHERE LoanID = L.LoanID); 
```

这只是一个开始，当然不会解决你所有的问题。我必须相信您并不真正想要其中一些联接表中的所有行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T19:15:28.560

我有两个建议：

**第一种是使用[SQL Server 数据库引擎优化顾问](http://msdn.microsoft.com/en-us/library/ms174202.aspx)来检查建议。** 它可能会检测到需要添加的索引，这些索引会提高性能，并且不明显。

**第二个选项只有在您可以处理稍微陈旧的数据时才有效，或者您可以在数据更新时触发我将要描述的过程。** 它不适用于定期更新的数据（一小时左右几次）。在我们的例子中，如果数据在 24 小时内准确无误，那么我们可以每天运行一次我将要描述的过程。如果您没有那种奢侈，请忽略其余的。

我们遇到了类似的情况，无论我们做什么，我们都无法提高性能。在太多的大表上，连接太多了。从视图返回 431 行花了大约 5 分钟。

因此，我们借鉴了 BI（商业智能）团队的方法，并根据我们的规范化数据构建了非规范化表。我们基本上创建了一个小型[数据仓库](http://en.wikipedia.org/wiki/Data_warehouse)。

我们的视图（需要永远运行）被命名为“vw_StoreData”，我们使用语句导出它

```
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[tmpCompiledStoreData]') AND type in (N'U'))
DROP TABLE [dbo].[tmpCompiledStoreData]

Select * Into tmpCompiledStoreData FROM vw_StoreData

IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[CompiledStoreData]') AND type in (N'U'))
DROP TABLE [dbo].[CompiledStoreData]

exec sp_rename 'tmpCompiledStoreData', 'CompiledStoreData'

GRANT SELECT ON [dbo].[CompiledStoreData] TO [SomeUser]
GRANT SELECT ON [dbo].[CompiledStoreData] TO [SomeOtheruser]
...etc 
```

与视图相比，生成的表 CompiledStoreData 查询起来快如闪电。同样，从视图创建非规范化表仅在您的数据新鲜度需求不是实时的情况下才有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T21:59:18.213

我怀疑@AaronBertrand 关于统计数据已过时是正确的。

我要做的一件事是删除一个隐式连接。我注意到，当您混合隐式和显式连接时，可能会发生不稳定的事情（尽管在不良结果集中的情况下比性能更多，但它仍然可以通过使优化器选择不太理想的东西来提高复杂查询的性能）。

我还想警告您，视图可能会导致速度变慢，尤其是当它们是调用视图的视图时。通过查看视图并查看是否可以用查询中的直接代码替换它们，我发现查询速度大大加快。如果每个视图调用相同的基表并且视图调用视图时，这可能尤其如此。因此，如果更新统计信息没有帮助，请考虑替换视图。

# jquery - jQuery add row to table after specific index with multiple tables on the screen

> ID：10822613
> 
> 赞同：0
> 
> 时间：2012-05-30T19:04:53.130
> 
> 标签：jquery

I have 2 tables on a page at once. I want to only manipulate the bottom table through jQuery by adding a row below the row that is clicked. I've managed to figure out using `this.rowIndex` to add the extra row based on the `<tr>` tag being clicked. But when 2 tables are in the mix, it gets confusing.

I've tried using jQuery ID selectors based on the table ID's but it either doesn't work or only the top row of the table is clickable. I've tried `#tableID > thead > tr","tr#tableID", "#tableID > tr`, etc. The first one works but only for the top row.

I've dumbed it down to the simplest form I could get it in on my fiddle page. In it's current form here, only the top table works. How do I get it so only the bottom table works and have it also ignore the "header" row being clicked?

[Code is here](http://jsfiddle.net/chewywaffles/8meWj/)

JavaScript:

```
$('tr').click(function(){
    html = "<tr><td>Jquery</td><td>5</td><td>5</td><td>5</td><td>5</td><td>5</td><td>5</td>";
    $('tr').eq(this.rowIndex).after(html); 
});​ 
```

HTML:

```
<table  id="detail" border=1>
<thead>
  <tr>
    <td width="138px"><h5>Campaign Name</h5></td>
    <td width="5%"><h5>Invites Sent</h5></td>
    <td width="5%"><h5>Invites Opened</h5></td>
    <td><h5>Unique Visits</h5></td>
    <td><h5>Referrals Shared</h5></td>
    <td><h5>Inquiries</h5></td>
    <td><h5>Sales Generated</h5></td>
  </tr>
</thead>
    <tr>
        <td>Test1</td>
        <td>1</td>
        <td>1</td>
        <td>1</td>
        <td>1</td>
        <td>1</td>
        <td>1</td>
    </tr>
    <tr>
        <td>Test2</td>
        <td>2</td>
        <td>2</td>
        <td>2</td>
        <td>2</td>
        <td>2</td>
        <td>2</td>
    </tr>        
</table>

<br />

<table  id="detail2" border=1>
<thead>
  <tr>
    <td width="138px"><h5>Campaign Name</h5></td>
    <td width="5%"><h5>Invites Sent</h5></td>
    <td width="5%"><h5>Invites Opened</h5></td>
    <td><h5>Unique Visits</h5></td>
    <td><h5>Referrals Shared</h5></td>
    <td><h5>Inquiries</h5></td>
    <td><h5>Sales Generated</h5></td>
  </tr>
</thead>
    <tr>
        <td>Test3</td>
        <td>3</td>
        <td>3</td>
        <td>3</td>
        <td>3</td>
        <td>3</td>
        <td>3</td>
    </tr>
    <tr>
        <td>Test4</td>
        <td>4</td>
        <td>4</td>
        <td>4</td>
        <td>4</td>
        <td>4</td>
        <td>4</td>
    </tr>   
</table>​ 
```

Thanks everyone!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:08:56.570

将您的点击功能更改为：

```
$('#detail2 tr:not(:first)').click(function(){
    html = "<tr><td>Jquery</td><td>5</td><td>5</td><td>5</td><td>5</td><td>5</td><td>5</td>";
    $('#detail2 tr').eq(this.rowIndex).after(html);

});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:09:08.853

我叉了你的小提琴，试试这个：http: [//jsfiddle.net/hyNdC/1/](http://jsfiddle.net/hyNdC/1/)

如果分叉的 jsFiddle 不起作用，这里是新脚本：

```
$('tr').click(function(){
    html = "<tr><td>Jquery</td><td>5</td><td>5</td><td>5</td><td>5</td><td>5</td><td>5</td>";
    $(this).after(html);
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-30T19:13:17.970

[这是一个更新的示例](http://jsfiddle.net/8meWj/8/)：

```
$('#detail2 > tbody > tr').click(function() {
  html = "<tr><td>Jquery</td><td>5</td><td>5</td><td>5</td><td>5</td><td>5</td><td>5</td>";
  $(this).after(html);
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<table id="detail" border=1>
  <thead>
    <tr>
      <td width="138px">
        <h5>Campaign Name</h5>
      </td>
      <td width="5%">
        <h5>Invites Sent</h5>
      </td>
      <td width="5%">
        <h5>Invites Opened</h5>
      </td>
      <td>
        <h5>Unique Visits</h5>
      </td>
      <td>
        <h5>Referrals Shared</h5>
      </td>
      <td>
        <h5>Inquiries</h5>
      </td>
      <td>
        <h5>Sales Generated</h5>
      </td>
    </tr>
  </thead>
  <tr>
    <td>Test1</td>
    <td>1</td>
    <td>1</td>
    <td>1</td>
    <td>1</td>
    <td>1</td>
    <td>1</td>
  </tr>
  <tr>
    <td>Test2</td>
    <td>2</td>
    <td>2</td>
    <td>2</td>
    <td>2</td>
    <td>2</td>
    <td>2</td>
  </tr>
</table>

<br />

<table id="detail2" border=1>
  <thead>
    <tr>
      <td width="138px">
        <h5>Campaign Name</h5>
      </td>
      <td width="5%">
        <h5>Invites Sent</h5>
      </td>
      <td width="5%">
        <h5>Invites Opened</h5>
      </td>
      <td>
        <h5>Unique Visits</h5>
      </td>
      <td>
        <h5>Referrals Shared</h5>
      </td>
      <td>
        <h5>Inquiries</h5>
      </td>
      <td>
        <h5>Sales Generated</h5>
      </td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Test3</td>
      <td>3</td>
      <td>3</td>
      <td>3</td>
      <td>3</td>
      <td>3</td>
      <td>3</td>
    </tr>
    <tr>
      <td>Test4</td>
      <td>4</td>
      <td>4</td>
      <td>4</td>
      <td>4</td>
      <td>4</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
```

> 我如何得到它，所以只有底部的桌子有效

将 ID 添加到您用来附加点击事件的选择器，如下所示：`#detail2 > tbody > tr`

> 并让它也忽略被点击的“标题”行？

`tbody`用标签包裹非标题行

# entity-framework - Confusion over EF Auto Migrations and seeding - seeding every program start

> ID：10822618
> 
> 赞同：42
> 
> 时间：2012-05-30T19:05:10.840
> 
> 标签：entity-framework, ef-code-first, entity-framework-4.3, entity-framework-migrations

I recently changed an application from using the following for dev:

```
DropCreateDatabaseIfModelChanges<Context> 
```

To using:

```
public class MyDbMigrationsConfiguration: DbMigrationsConfiguration<GrsEntities>
{
    public MyDbMigrationsConfiguration()
    {
        AutomaticMigrationsEnabled = true;
        AutomaticMigrationDataLossAllowed = true;
    }
} 
```

In my db context I have:

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    // Tell Code First to ignore PluralizingTableName convention
    // If you keep this convention then the generated tables will have pluralized names.
    modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();

    //set the initializer to migration
    Database.SetInitializer(new MigrateDatabaseToLatestVersion<GrsEntities, MigrationConfig>());
} 
```

I have overridden Seed(context) in DbMigrationsConfiguration using the AddOrUpdate extension where I was just using Add before with seeding on the drop db (DropCreateDatabaseIfModelChanges).

My confusion is that the Migration runs with each start of the application regardless of there being any changes to the DbContext. Each and every time I start the application (library run through a service) the initializer runs as does the Seed. My expected behaviour is a check whether a migration is necessary (behind the scenes check to see if model matches physical db) then update any new/removed tables/columns and only run seed if something has changed.

In my testing seed runs every time, which is workable but seemingly inefficient and was not what I expected. Unfortunately the MSDN documentation is quite limited.

Am I completely misusing MigrateDatabaseToLatestVersion? Is there any way to get the behaviour I expect (i.e. only seed if there is a model change) or should I just change my seed method to expect to be run every application launch?

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-05-31T00:39:07.230

Seed 方法仅在数据库更改时才运行这一事实对于 EF 4.1 中附带的数据库初始化程序来说是非常有限的。这是有限制的，因为有时您需要在不更改数据库的情况下更新种子数据，但要做到这一点，您必须人为地让数据库看起来已经更改。

使用 Migrations 时，Seed 的使用变得有点不同，因为它不能再假设数据库开始为空——毕竟这就是 Migrations 的重点。因此，Migrations 中的 Seed 方法必须假设数据库存在并且其中可能已经有数据，但可能需要更新数据以考虑对迁移数据库所做的更改。因此使用了 AddOrUpdate。

所以现在我们遇到了必须编写 Seed 以考虑现有数据的情况，这意味着实际上没有必要延续 EF 4.1 Seed 方法的限制，这样您就必须让它看起来好像数据库已经改变了只是为了让 Seed 运行。因此，现在每次在应用程序域中首次使用上下文时都会运行 Seed。这不应该改变 Seed 的实现方式，因为它需要处理数据已经存在的情况。

如果由于您拥有大量 Seed 数据而导致性能问题，那么通常很容易将检查添加到查询数据库的 Seed 方法中，以确定在执行之前需要完成多少工作。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-01-16T19:23:50.627

我有点同意[Arthur Vickers](https://stackoverflow.com/users/2012410/arthur-vickers)的回应，但是 IMO Seed 用于 DbMigrations，我不希望 Seed 方法每次都检查所有内容，例如，如果我有 4 次迁移，那么我需要以某种方式测试必须播种哪些数据以及将至少再增加 4 次数据库命中。如果您仍然希望仅在应用迁移时运行 Seed 方法的行为，就像我一样，我提供了自己的`IDatabaseInitializer`策略实现

```
public class CheckAndMigrateDatabaseToLatestVersion<TContext, TMigrationsConfiguration>
    : IDatabaseInitializer<TContext>
    where TContext : DbContext
    where TMigrationsConfiguration : DbMigrationsConfiguration<TContext>, new()
{
    public virtual void InitializeDatabase(TContext context)
    {
        var migratorBase = ((MigratorBase)new DbMigrator(Activator.CreateInstance<TMigrationsConfiguration>()));
        if (migratorBase.GetPendingMigrations().Any())
            migratorBase.Update();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T12:41:03.680

另一种选择可能是在运行时在种子方法中加载自定义数据库初始化程序类。然后，生产应用程序可以加载一个虚拟初始化程序，而开发应用程序可以加载真正的初始化程序。你可以使用 Unity/MEF

```
 // Unity Dependency Injection Prop
    [Dependency]
    property IMyInitializer initializer;

    protected override Seed(YourContextClass context)
    {
       initializer.Seed(context);
    } 
```

类似的东西。一旦您在生产环境中设置了数据库，您就可以将初始化程序切换到虚拟的初始化程序，这将无济于事。

# jquery - jQuery 等待 AJAX 页面完全加载

> ID：10822619
> 
> 赞同：1
> 
> 时间：2012-05-30T19:05:15.703
> 
> 标签：jquery, ajax, image, load

我使用 AJAX 在页面 A 上显示页面 B 的内容。

如何让 jQuery 在显示内容之前等待所有内容（文本、图像等）加载？

```
$.ajax({
    url:"pageB.html",
    beforeSend: function() {
        //show loading animation here
    }
    success: function(data) {
        //hide loading animation here
        $("body").append(data);
    }
}); 
```

在处理 AJAX 请求时，我使用 beforeSend 向用户显示加载动画。现在我想“延长”等待时间，以便加载动画在加载所有图像之前不会消失。

我试图最初隐藏附加的数据，等待所有图像加载然后显示内容 - `$("body").on("load", "images class here", function() {//show content})`内部`success`但事件似乎没有触发。

有任何想法吗？

更新：

更新代码：

```
$.ajax({
    url:"pageB.html",
    beforeSend: function() {
        //show loading animation here
    }
    success: function(data) {
        //hide loading animation here
        $("body").append(data);
        $("body").on("onload", "img", function() {//display content});
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T21:03:48.147

您必须使用直接事件绑定：

```
$("body img").on("load", function () { });
$("body .image-class").on("load", function () { }); 
```

而不是委托绑定：

```
$("body").on("load", "img", function() { });
$("body").on("load", ".image-class", function () { }); 
```

委托绑定取决于事件冒泡，并非每个事件都如此。似乎`"load"`事件——至少，从一个`<img>`——是一个没有的事件。

示例：http: [//jsfiddle.net/DLy6j/](http://jsfiddle.net/DLy6j/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:07:16.990

如果是图像，您需要捕获所有图像的 onload 事件。所以一旦你得到成功回调，找到所有图像，添加“ **onload** ”事件，并在所有图像加载后计算。

# javascript - 哈希值未在 javascript 中更新

> ID：10822620
> 
> 赞同：1
> 
> 时间：2012-05-30T19:05:24.427
> 
> 标签：javascript, html, dojo

我在全局标题部分声明了一个哈希：

```
<script type="text/javascript">
require(["dijit/form/Form", "dijit/form/Button", "dojo/domReady!", "dijit/layout/TabContainer", "dijit/layout/ContentPane", "dijit/form/Select", "dojo/domReady", "dijit/TitlePane", "dijit/form/Textarea", "dojo", "dojox/xml/parser", "dijit/form/ValidationTextB

var dataHash = {}; 
```

然后我与它进行交互，并将值放入 for 循环中。但是，当最后一个 for 循环退出时，哈希仍然具有原始内容：

```
for (key in dataHash) {
    for (key2 in dataHash[key]) {
        match = null;
        contentStr = dataHash[key][key2];

        if ( contentStr.match(selEx) ) {

            if ( contentStr.match(rEx) ) {
                var test = contentStr.replace(rEx, replaceStr.value);
                /* here, i change the value at the location dataHash[key][key2] */
                dataHash[key][key2] = test;
                console.log(dataHash[key][key2]);
            }

        } else if ( selValStr == "all" ) {

            if ( contentStr.match(rEx) ) {
                 var test = contentStr.replace(rEx, replaceStr.value);
                 dataHash[key][key2] = test;
            }
        }
    }
}

console.log(JSON.stringify(dataHash)); /* Here, it prints the original content, and not the updated content */ 
```

# c++ - 带有#define 的新变量

> ID：10822630
> 
> 赞同：2
> 
> 时间：2012-05-30T19:06:01.457
> 
> 标签：c++, variables, c-preprocessor

我想用#declare“自动”创建变量。所以，我不想多次输入新变量的类定义（实际上我是在声明多维向量，而不是简单的整数......）

我有这个代码：

```
#define inti(aa)(int (aa)=3)

...

inti(a); 
```

但是编译器说：

> “错误：'a' 未在此范围内声明”

是否有可能在 C++ 中解决这个问题？请帮忙！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T19:07:40.973

~~采用：~~

```
 #define inti(aa) int aa=3 
```

那是因为

```
(int aa=3); 
```

是非法的，更何况你在那里。

实际上，擦掉它。**不要使用宏**。只需以老式的方式声明您的变量即可。

> 实际上我是在声明多维向量

+1 用于说明您的**实际**问题的问题。这就是 a`typedef`的用途。

```
typedef std::vector<std::vector<int> > MDVector;
MDVector multiDimensionalVector; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T19:09:54.660

您可以使用 a`typedef`而不是`#define`这样的：

```
typedef complexClassName<PossiblyWithManyTemplateParameters> Name
Name var1;
Name var2;
Name var3; 
```

如果您不想多次输入长名称。

# php - 表格的多个有效答案

> ID：10822631
> 
> 赞同：-2
> 
> 时间：2012-05-30T19:06:07.883
> 
> 标签：php, validation

我正在使用联系表格，我真的需要这个。我向开发人员发送了消息，但我不能再等了...

我尝试了很多方法来使它工作，但总是失败。无论我做什么，都不是有效答案，或者只有第一个或只有最后一个......所以请php程序员帮我解决这个问题。

```
$custom = new Quform_Element('custom_answer', 'Custom answer');
$custom->addFilter('trim');
$custom->addValidator('required');
$custom->addValidator('identical', array(
'token' => 'im-a-test',
'messages' => array(
'not_match' => 'Invalid Answer. Please try again!'
)
));
$custom->setIsHidden(true);
$form->addElement($custom); 
```

基本上它就像自定义验证器字段。所以有一种形式，人们可以输入一些东西......如何做出多个相同的有效答案？im-a-test 有效，但如何添加 im-a-test2 等等...我想要 20 个正确答案。

如果有人可以帮助我，我真的很感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:14:38.923

看起来 Quform_Element 是基于 Zend_Form_Element 的。如果是，并且 Zend Framework 的其余部分在那里，那么这可能会起作用：

```
$custom->addValidator(new Zend_Validate_InArray(array('im-a-test', 'im-a-test-2'))); 
```

# java - 刷新从数据库中检索到的数据

> ID：10822633
> 
> 赞同：0
> 
> 时间：2012-05-30T19:06:20.307
> 
> 标签：java, database, swing, reload

我有一个带有 JTabbedPane 的 JFrame。

例如，在其中一个窗格中`compose`，我将一些新数据保存在表中。另一个窗格，例如`drafts`，在同一个表中显示保存的数据。

当您第一次登录时，之前运行应用程序中保存的数据会显示在应用程序中，`drafts`但是如果在同一次运行中我保存了一些新数据`compose`然后切换到`draft`窗格，则从数据库中检索到的数据没有新保存的数据。

换句话说，我如何刷新检索到的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:32:11.843

当您更新 JComponent 时，需要告知它重新加载。因此，每当您调用更新`draft`窗格的数据时，您还应该调用`draft.revalidate()`.

# python - 使用 SQLAlchemy 获取表中的行数

> ID：10822635
> 
> 赞同：71
> 
> 时间：2012-05-30T19:06:22.100
> 
> 标签：python, sql, sqlalchemy

我在 Python 中使用 SQLAlchemy，我想知道如何获取列中的总行数。我定义了变量：

```
engine = sqlalchemy.create_engine(url, ehco=False)
Session = sqlalchemy.orm.sessionmaker(bind=engine)
Session = session()
metadata = sqlalchemy.MetaData(engine)
Base = declarative_base(metadata=metadata)

# A class representing the shape_congress_districts_2012 table
class Congress(Base):
    __tablename__ = 'shape_congress_districts_2012'
    id = geoalchemy.Column(sqlalchemy.Integer, primary_key=True)
    name = geoalchemy.Column(sqlalchemy.Unicode)
    geom = geoalchemy.GeometryColumn(geoalchemy.Polygon(2))
    geom_simple = geoalchemy.GeometryColumn(geoalchemy.Polygon(2))
    area = geoalchemy.Column(sqlalchemy.Float)
    state_id = geoalchemy.Column(sqlalchemy.Integer)
    census_year = geoalchemy.Column(sqlalchemy.Date)

geoalchemy.GeometryDDL(Congress.__table__) 
```

我想确定表中的总行数，而不必等待一大堆时间来查询数据库。目前，我有一些代码：

```
rows = session.query(Congress).all() 
```

然后我可以从列表中访问它们，但这需要我一次将所有内容加载到内存中。

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-05-30T19:20:16.927

这应该工作

```
rows = session.query(Congress).count() 
```

**编辑：**与我的第一次尝试有关的另一种方式

```
from sqlalchemy import func
rows = session.query(func.count(Congress.id)).scalar() 
```

# sass - 使用 Compass/sass 进行百分比宽度响应式布局？

> ID：10822637
> 
> 赞同：4
> 
> 时间：2012-05-30T19:06:28.300
> 
> 标签：sass, responsive-design, compass-sass

我正在尝试使用 Sass（和 Compass）来简化百分比宽度布局的创建。

使用 A List Apart of 中的公式`target/context=result`，其中上下文为 980 像素，设计宽度为 640 像素，我尝试执行以下规则

```
#leftcol {
width: ((640/980)*100%);
} 
```

编译为

```
#leftcol {
  width: 65.306%;
} 
```

有没有比不一遍又一遍地输入更简单的方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T00:09:34.560

不需要混合。Sass 有一个内置的百分比函数，可以接受多种单位。

```
width: percentage(640 / 980)
width: percentage(640px / 980px) 
```

两者都导致：

```
width: 65.30612% 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T19:11:59.980

我想通了，我做了一个mixin：

```
@mixin flex($target, $context){
width: (($target/$context)*100%);
} 
```

然后使用它

```
#leftcol {
@include flex(640, 980);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-23T01:02:41.423

sass 还允许函数定义（因此您可以使用例如 w/ min-width 以及宽度，或作为其他子表达式的一部分）：

```
@function flex-width($target, $context) {
    @return (($target/$context)*100%);
}

#leftcol {
    width: flex-width(640, 980);
} 
```

# php - 条件语句中的 PHP 页面重定向

> ID：10822641
> 
> 赞同：-1
> 
> 时间：2012-05-30T19:06:48.863
> 
> 标签：php, mysql, html, web-services

我目前在一个股票报价网站上工作，当我使用报价符号搜索报价信息时，我的页面中有这种情况。如果在数据库中找不到符号，我需要将用户重定向到“查找符号”页面。这是条件语句。

```
if($result)
{ }
else
{
//page redirect
} 
```

我需要知道如何将某人重定向到我的 else 语句中的页面，有什么建议吗？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:09:14.267

利用

```
header("Location: http://www.example.com/"); /* Redirect */
exit; // important to make sure nothing else gets executed after this line 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:08:20.850

```
header( "Location: http://your-target-site.com/yourpage" );
exit; 
```

重要的是要知道`header()`如果生成了任何其他输出，该语句将失败。确保您的页面在此语句之前不产生任何输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T19:09:05.953

输出位置[标头](http://php.net/manual/en/function.header.php)：

```
{
    header('Location: http://yourdomain.com/nextpage.php');
    exit;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T20:23:38.363

正如其他人所说，您在 php 中使用 header 函数，但这仅在之前没有输出的情况下才有效。如果您确实有输出，则唯一的选择是使用 javascript。

`echo "<script>window.location = 'http://www.example.com';</script>";`

这不是一个很好的解决方案，因为如果浏览器没有启用 javascript，它不会 100% 工作。所以只有在你绝对不能使用 header() 时才使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T19:08:41.630

[header()](http://php.net/manual/en/function.header.php)用于发送原始 HTTP 标头。有关 HTTP 标头的更多信息，请参阅[» HTTP/1.1 规范](http://www.faqs.org/rfcs/rfc2616)。

```
if($result)
{ }
else
{
    header("Location: http://google.com");
} 
```

在此处查看更多示例：http: [//ditio.net/2008/10/04/php-redirect-header-location/](http://ditio.net/2008/10/04/php-redirect-header-location/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T19:08:49.860

只要还没有一些输出，就使用 header() 函数。

```
header("Location: http://bleh.com"); 
```

# javascript - 将长文本拆分为字符串数组

> ID：10822647
> 
> 赞同：1
> 
> 时间：2012-05-30T19:07:19.493
> 
> 标签：javascript

我需要一种将字符串拆分为较小字符串数组的方法，并按字数进行拆分。是的，我正在寻找这样的功能：

```
function cut(long_string, number_of_words) { ... }

var str = "word1 word2 word3 word4 word5 word6 word7 word8 word9 word10 word11 word12";
var arr = cut(str, 3); 
```

在这种情况下，cut 应该返回 4 个数组，每个数组包含 3 个单词。我试图找出 String.match() 或 String.split() 的正则表达式，但我不知道该怎么做..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:11:44.917

首先用空格分割它，然后将数组分块在一起。

```
function cut(input,words) {
    input = input.split(" ");
    var l = input.length, i, ret = [];
    for( i=0; i<l; i+=words) {
        ret.push(input.splice(0,words));
    }
    return ret;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:15:43.450

创建一个将数组拆分为块的函数：

```
chunk = function(ary, len) {
    var i = 0, res = [];
    for (var i = 0; i < ary.length; i += len)
        res.push(ary.slice(i, i + len));
    return res;
} 
```

并将此函数应用于单词列表：

```
var str = "word1 word2 word3 word4 word5 word6 word7 word8 word9 word10 word11";
chunk(str.match(/\w+/g), 3) 
```

`str.match(/\w+/g)`也可以`str.split(/\s+/)`取决于您要如何处理非单词字符。

如果您只对创建子字符串数组（而不是问题所述的*单词*数组）感兴趣，这里有一个不会在子字符串中留下尾随空格的解决方案：

```
str.match(new RegExp("(\\S+\\s+){1," + (num - 1) + "}\\S+", "g")) 
```

返回

```
["word1 word2 word3", "word4 word5 word6", "word7 word8 word9", "word10 word11 word12"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T19:27:22.447

让我们做一些疯狂的事情：

```
function cut(str, num){
    return str.match(new RegExp("(?:(?:^|\\s)\\S+){1," + num + "}", "g"));
} 
```

这会在每次运行时创建一个新的 RegExp 并匹配字符串。在速度方面可能有更好的解决方案，但这是很棒的*Mad Science(TM)*。而且很短。

# git - 如何根据远程仓库的 URL 自动设置 git:username

> ID：10822648
> 
> 赞同：0
> 
> 时间：2012-05-30T19:07:19.567
> 
> 标签：git, templates, git-clone, git-config

我的本地机器上有一些 git 存储库，它们是业余项目（托管在 GitHub 上），还有一些与工作相关（托管在其他地方）。因为我*做错了*（不要问，这无关紧要），我必须定期`rm -rf`重新克隆一个 repo，这也会清除它的`.git/config`文件。

我想在我的工作项目中加入一些与我的爱好项目不同的`~/.gitconfig`东西。`user.email`（请记住，我不能使用`.git/config`，因为它会定期被清除。）这可能基于项目名称，或者基于我正在克隆的远程仓库的 URL。

作为一个单独但相关的问题，我希望能够指定一个应用于我*所有*`.git/hooks/pre-commit`存储库的全局预提交挂钩，而不是每次克隆存储库时都必须记住进行修改。（我知道`git clone --template`。）

我想我可以编写一个别名为的 Bash 脚本`git`，只要它注意到我在执行`git clone`. 那是唯一的答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:13:48.553

如果您使用任何在更改目录时更改提示的 Bash 扩展，您可能希望根据您所在的存储库连接到那些设置`GIT_AUTHOR_NAME`、、`GIT_COMMITTER_NAME`和关联的电子邮件环境变量。

在 .bashrc 中，您可以执行以下操作：

```
__git_ps1() {
   BRANCH=`git branch 2>/dev/null`
   if [ "$?" == "0" ]; then
      # Do something with your prompt
      if [[ `git remote -v` =~ $WORK_URL_REGEX ]]; then
         export GIT_AUTHOR_EMAIL="me.working@work.com"
      else
         export GIT_AUTHOR_EMAIL="me.playing@home.org"
      fi
   endif
} 
```

这显然很粗糙（我也没有测试过），但应该给你一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:25:38.753

不知道你为什么/必须/重新克隆..

```
git reset --hard && git clean -xdf 
```

足够好，会给你一个干净的工作目录。这将保留您的配置更改。

如果您的参考资料一团糟，您可以清理远程分支

```
git remote prune 
```

换句话说，我/我/问你为什么“做错了”:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T21:18:39.270

如果是我，我可能会`rm -rf`用一个脚本来包装原始调用，该脚本将我要保存的内容复制到某个临时位置，删除所有内容，克隆 repo，然后将内容复制回。

# wpf - WPF 绑定和数据模板

> ID：10822650
> 
> 赞同：0
> 
> 时间：2012-05-30T19:07:22.723
> 
> 标签：wpf, binding, datatemplate

我在我的应用程序中遇到了一个问题，我无法解决它。我创建了以下简单的 WPF 应用程序来说明这种情况。

MainWindow.xaml：

```
<Window x:Class="GlobalDataTemplate.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:my="clr-namespace:GlobalDataTemplate"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <DataTemplate DataType="{x:Type my:MyData}">
            <StackPanel Background="{Binding BgColor}">
                <TextBlock Text="{Binding Text}"/>
                <TextBlock Text="{Binding Number}"/>
            </StackPanel>
        </DataTemplate>
    </Window.Resources>
    <ItemsControl>
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <UniformGrid Columns="3" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <my:MyData x:Name="NW" Text="NW" Number="1" BgColor="#FFFF0000" />
        <my:MyData x:Name="N" Text="N"  Number="2" BgColor="#FF63FF00" />
        <my:MyData x:Name="NE" Text="NE" Number="3" BgColor="#FFFFCA00" />
        <my:MyData x:Name="W" Text="W" Number="4" BgColor="#FF0037FF" />
        <my:MyData x:Name="C" Text="C" Number="5" BgColor="#FF9E00FF" />
        <my:MyData x:Name="E" Text="E" Number="6" BgColor="#FF838383" />
        <my:MyData x:Name="SW" Text="SW" Number="7"
                   BgColor="{Binding ElementName=NW, Path=BgColor}" />
        <my:MyData x:Name="S" Text="S" Number="8"
                   BgColor="{Binding ElementName=N, Path=BgColor}" />
        <my:MyData x:Name="SE" Text="SE" Number="9"
                   BgColor="{Binding ElementName=NE, Path=BgColor}" />
    </ItemsControl>
</Window> 
```

我的数据.cs：

```
using System.Windows;
using System.Windows.Media;

namespace GlobalDataTemplate
{
    class MyData : DependencyObject
    {
        public string Text
        {
            get { return (string)GetValue(TextProperty); }
            set { SetValue(TextProperty, value); }
        }
        public static readonly DependencyProperty TextProperty =
            DependencyProperty.Register("Text", typeof(string), typeof(MyData), new UIPropertyMetadata(null));

        public int Number
        {
            get { return (int)GetValue(NumberProperty); }
            set { SetValue(NumberProperty, value); }
        }
        public static readonly DependencyProperty NumberProperty =
            DependencyProperty.Register("Number", typeof(int), typeof(MyData), new UIPropertyMetadata(0));

        public Brush BgColor
        {
            get { return (Brush)GetValue(BgColorProperty); }
            set { SetValue(BgColorProperty, value); }
        }
        // Using a DependencyProperty as the backing store for MyProperty.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty BgColorProperty =
            DependencyProperty.Register("BgColor", typeof(Brush), typeof(MyData), new UIPropertyMetadata(null));
    }
} 
```

在 XAML 中，您会看到一个 3x3 网格，其底部颜色与顶部显示的颜色相同。但底行的颜色根本不显示（您会看到窗口的白色背景）。如何让底部的颜色正确绑定到顶部的颜色？

我还尝试添加属性更改处理程序并设置断点。断点永远不会被击中。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:04:55.693

当我运行您的代码时，我在调试输出中收到以下错误消息：

> System.Windows.Data 错误：2：找不到目标元素的管理 FrameworkElement 或 FrameworkContentElement。绑定表达式：路径=BgColor；数据项=空；目标元素是“MyData”（HashCode=65325907）；目标属性是“BgColor”（类型“画笔”）

即，这意味着 WPF 不会将`MyData`项目视为逻辑树的一部分。因此，源自`MyData`，`Freezable`例如

```
class MyData : Freezable 
{
    protected override Freezable CreateInstanceCore()
    {
        throw new System.NotImplementedException();
    }

    ... put the dependency properties here ...

} 
```

“找不到管理 FrameworkElement...”问题与“继承上下文”有关；请在此处找到详细信息：http: [//blogs.msdn.com/b/nickkramer/archive/2006/08/18/705116.aspx](http://blogs.msdn.com/b/nickkramer/archive/2006/08/18/705116.aspx)。

# c - 定义二维字符数组时出错

> ID：10822651
> 
> 赞同：2
> 
> 时间：2012-05-30T19:07:27.453
> 
> 标签：c

我正在尝试定义一个类型的数组`char`

```
char data[][] 
```

我想用它来存储来自另一个数组的一些数据`strcpy()`

问题是我不知道确切的长度是多少，我无法指定数组中的长度，我收到了这个错误：

`Error array type has incomplete element type`

这是完整的代码：

```
int bit_to_ascii(const char core[], char data[])
{
      char char_data2[][];

      strcpy(char_data2, core);
      len1 = strlen(char_data2);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T19:12:44.640

您要么声明它为您的情况可能和可接受的最大大小，要么使用[`malloc(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/malloc.3.html)要求运行时为您动态分配确切的内存量（然后[`free(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/malloc.3.html)在完成时释放该内存）。

# php - 使用 PHP 代码更改标记类

> ID：10822655
> 
> 赞同：0
> 
> 时间：2012-05-30T19:07:44.893
> 
> 标签：php, syntax, conditional-statements

假设我有一个 tr

```
<tr class='condition1'> mysql db record </tr> 
```

如果该记录 id 也显示在其他表中，我希望它为 tr 着色

我的逻辑是这样的：

> 如果记录 id 在另一个表中，则将类更改为条件 2，并且 css 会将颜色放入其中。

希望我让自己清楚和理解。我只是不太确定我的 php 工具能否实现。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:43:46.780

例如，将所有 ID 存储在一个数组中，

```
$ids = array(); 
```

然后在每个循环上（我假设）

```
// If exists, add .color
    <tr class='condition1 <?php echo (isset($ids[$id]) ? 'color' : ''); ?>'> mysql db record </tr>

// Add to array
    $ids[$id] = TRUE; 
```

# c# - 实体框架 - 包括多个级别的属性

> ID：10822656
> 
> 赞同：453
> 
> 时间：2012-05-30T19:07:45.480
> 
> 标签：c#, entity-framework, eager-loading

Include() 方法非常适用于对象列表。但是，如果我需要深入两层怎么办？例如，下面的方法将返回具有此处显示的包含属性的 ApplicationServers。但是，ApplicationsWithOverrideGroup 是另一个包含其他复杂对象的容器。我也可以在该属性上执行 Include() 吗？或者我怎样才能让该属性完全加载？

**就目前而言，这种方法：**

```
public IEnumerable<ApplicationServer> GetAll()
{
    return this.Database.ApplicationServers
        .Include(x => x.ApplicationsWithOverrideGroup)                
        .Include(x => x.ApplicationWithGroupToForceInstallList)
        .Include(x => x.CustomVariableGroups)                
        .ToList();
} 
```

将仅填充 Enabled 属性（下），而不是 Application 或 CustomVariableGroup 属性（下）。我该如何做到这一点？

```
public class ApplicationWithOverrideVariableGroup : EntityBase
{
    public bool Enabled { get; set; }
    public Application Application { get; set; }
    public CustomVariableGroup CustomVariableGroup { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：861
> 
> 时间：2012-05-30T19:38:58.390

**对于 EF 6**

```
using System.Data.Entity;

query.Include(x => x.Collection.Select(y => y.Property)) 
```

确保添加`using System.Data.Entity;`以获取`Include`采用 lambda 的版本。

* * *

**对于 EF 核心**

使用新方法[`ThenInclude`](https://docs.microsoft.com/en-us/ef/core/querying/related-data#including-multiple-levels)

```
query.Include(x => x.Collection)
     .ThenInclude(x => x.Property); 
```

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2012-05-30T19:37:04.190

如果我理解正确，您是在询问是否包含嵌套属性。如果是这样的话 ：

```
.Include(x => x.ApplicationsWithOverrideGroup.NestedProp) 
```

或者

```
.Include("ApplicationsWithOverrideGroup.NestedProp") 
```

或者

```
.Include($"{nameof(ApplicationsWithOverrideGroup)}.{nameof(NestedProp)}") 
```

* * *

## 回答 #3

> 赞同：71
> 
> 时间：2016-07-10T03:13:36.337

**EF Core：**使用“ThenInclude”加载多个级别：例如：

```
var blogs = context.Blogs
    .Include(blog => blog.Posts)
        .ThenInclude(post => post.Author)
        .ThenInclude(author => author.Photo)
    .ToList(); 
```

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2018-01-16T08:48:42.833

MSDN 上的[EFCore 示例](https://docs.microsoft.com/en-us/aspnet/core/data/ef-mvc/read-related-data)表明您可以使用`Include`和做一些相当复杂的事情`ThenInclude`。

这是一个很好的例子，说明你可以得到多么复杂（这是一个链式语句！）：

```
viewModel.Instructors = await _context.Instructors

      .Include(i => i.OfficeAssignment)

      .Include(i => i.CourseAssignments)
        .ThenInclude(i => i.Course)
            .ThenInclude(i => i.Enrollments)
                .ThenInclude(i => i.Student)

      .Include(i => i.CourseAssignments)
        .ThenInclude(i => i.Course)
            .ThenInclude(i => i.Department)

      .AsNoTracking()
      .OrderBy(i => i.LastName)
      .ToListAsync(); 
```

您可以进行多次`Include`通话 - 即使在此之后`ThenInclude`，它也会将您“重置”回顶级实体（讲师）的级别。

您甚至可以多次重复相同的“第一级”集合（CourseAssignments），然后使用单独的`ThenIncludes`命令访问不同的子实体。

请注意，您的实际查询必须标记到`Include`or`ThenIncludes`链的末尾。以下不起作用：

```
var query = _context.Instructors.AsQueryable();
query.Include(i => i.OfficeAssignment);

var first10Instructors = query.Take(10).ToArray(); 
```

强烈建议您设置日志记录，并确保您的查询不会失控，如果您包含超过一两件事。了解它的实际工作原理很重要——您会注意到每个单独的“包含”通常是一个新查询，以避免大量连接返回冗余数据。

`AsNoTracking`如果您不打算实际编辑实体并重新保存，则可以大大加快速度。

* * *

EFCore 5 对多组实体的查询发送到服务器的方式进行了一些更改。[拆分查询](https://docs.microsoft.com/en-us/ef/core/querying/single-split-queries)有一些新选项，可以通过更少的连接使某些此类查询更加高效，但请确保了解限制 - 并启用日志记录以避免以后出现性能意外。

* * *

## 回答 #5

> 赞同：33
> 
> 时间：2017-03-17T10:51:51.040

我为 Entity Framework 6（.Net Core 风格）做了一个小帮手，以一种很好的方式包含子实体。

它现在在 NuGet 上：Install-Package ThenInclude.EF6

```
using System.Data.Entity;

var thenInclude = context.One.Include(x => x.Twoes)
    .ThenInclude(x=> x.Threes)
    .ThenInclude(x=> x.Fours)
    .ThenInclude(x=> x.Fives)
    .ThenInclude(x => x.Sixes)
    .Include(x=> x.Other)
    .ToList(); 
```

该软件包[在 GitHub 上可用](https://github.com/Lenny32/ThenInclude/)。

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2017-06-17T12:56:57.617

我还必须使用多个包含，在第三级我需要多个属性

```
(from e in context.JobCategorySet
                      where e.Id == id &&
                            e.AgencyId == agencyId
                      select e)
                      .Include(x => x.JobCategorySkillDetails)
                      .Include(x => x.Shifts.Select(r => r.Rate).Select(rt => rt.DurationType))
                      .Include(x => x.Shifts.Select(r => r.Rate).Select(rt => rt.RuleType))
                      .Include(x => x.Shifts.Select(r => r.Rate).Select(rt => rt.RateType))
                      .FirstOrDefaultAsync(); 
```

这可能对某人有帮助:)

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2018-07-29T05:32:36.227

让我清楚地说明，如果您不介意使用字符串文字，则可以使用字符串重载来包含嵌套级别，而不管对应关系的多重性：

```
query.Include("Collection.Property") 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-05T21:10:03.483

我将为我的特定问题添加我的解决方案。我需要包含两个相同级别的集合。最终的解决方案看起来像这样。

```
var recipe = _bartendoContext.Recipes
    .Include(r => r.Ingredients)
    .ThenInclude(r => r.Ingredient)
    .Include(r => r.Ingredients)
    .ThenInclude(r => r.MeasurementQuantity)
    .FirstOrDefault(r => r.Id == recipeId);
if (recipe?.Ingredients == null) return 0m;
var abv = recipe.Ingredients.Sum(ingredient => ingredient.Ingredient.AlcoholByVolume * ingredient.MeasurementQuantity.Quantity);
return abv; 
```

这是按给定饮料配方的体积计算酒精百分比。正如你所看到的，我只是将成分集合包含了两次，然后将成分和数量包含在其中。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-25T11:28:44.910

我想出了一个最简单的方法。您不需要安装包 ThenInclude.EF 或者您不需要对所有嵌套导航属性使用 ThenInclude。如下图所示，EF会为你照顾好休息。例子：

```
var thenInclude = context.One.Include(x => x.Twoes.Threes.Fours.Fives.Sixes)
.Include(x=> x.Other)
.ToList(); 
```

# xamarin.ios - 使用 XIB 创建自定义 UIView

> ID：10822660
> 
> 赞同：1
> 
> 时间：2012-05-30T19:08:08.447
> 
> 标签：xamarin.ios

我正在尝试创建一个自定义 UIView 控件（UIView 的基类），它在 Monotouch 中具有 XIB 和插座，然后能够从代码中使用此控件并在 XCode 中使用它。我正在为类上的不同构造函数以及如何连接它们而苦苦挣扎？在 XCode 中，当我添加它时，我将类更改为自定义视图的类，但运行时没有任何显示。

每当我创建自定义视图并在 XCode 或代码中使用时，视图中似乎都没有显示任何内容。我可以更改自定义视图的背景，并且可以看到自定义视图在屏幕上，但我添加到其中的 UI 视图元素都没有显示。只是想知道是否有任何例子可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:15:53.893

我在理解问题的某些部分时遇到了一些麻烦，而且我自己仍在为 MonoTouch 学习曲线，但我会试一试。如果我错过了标记，我会提前道歉。

首先，我认为你想要的是使用 UIViewController 作为基类，而不是 UIView。通过查看 MonoDevelop 在其通用视图控制器模板中使用的代码，我学到了很多东西。右键单击左侧列表中的项目名称（在解决方案下方），选择添加 > 新文件，然后选择通用视图控制器，如下所示...

![在此处输入图像描述](../Images/ab687e4163e8caef6d799a0be8687d41.png)

这将创建一个运行良好的视图控制器，并且很容易遵循它的源代码。

另一件事：我可能是在说显而易见的，但在切换回 MonoDevelop 之前，请务必在 Interface Builder 中保存对 XIB 的任何更改。

# c++ - 按位运算截断数字的最后两位数字

> ID：10822662
> 
> 赞同：4
> 
> 时间：2012-05-30T19:08:14.873
> 
> 标签：c++, debugging, math, bit-manipulation

我有一个 integer `n`，我想仅使用按位运算截断该数字的最后两位数字。

因此，在常规算术中，它就像`n /= 100`. 但是如何通过按位运算来完成呢？

谢谢，

（顺便说一下，这是在 C++ 中）

[编辑]：例如，给定数字`1234`，我想得到`12`。（截断最后两位数`34`）

[Edit2:] 让我重新表述一下这个问题。我试图理解为什么一个应该截断数字的最后两位数字的特定函数在给出负输入时会搞砸。（而且我没有这个功能的代码）

**这是一组输入及其相应的输出**

-200901 ==> 186113241

-200801 ==> 186113242

-200701 ==> 186113243

-200601 ==> 186113244

-190001 ==> 186113350

-190101 ==> 186113349

-190201 ==> 186113348

-190301 ==> 186113347

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:18:33.827

在这里你想除以一个常数：100

以下[如何仅使用位移和加法进行乘法和除法？](https://stackoverflow.com/questions/2776211/how-can-i-multiply-and-divide-with-only-using-bit-shifting-and-adding)这是 Suraj Chandran 在他的评论中给出的，

您可以将其重新解释为乘以 1/100。

在底数 2 中，1/100 可以近似为 1/2^7 * ( 1/2^0 + 1/2^2 + 1/2^6+ 1/2^7+ 1/2^8+ 1/ 2^9 + 1/2^11+ 1/2^13+ 1/2^14+ 1/2^15+ 1/2^20+ 1/2^22 + 1/2^26 + 1/2^ 27 + 1/2^28 1/2^29)

所以你有和近似值 (n >> 0 + n >> 2 + n >> 6 + n >> 7 + n >> 8 + n >> 9 + n >> 11 + n >> 13 + n >> 14 + n >> 15 + n >> 20 + n >> 22 + n >> 26 + n >> 27 + n >> 28 + n >> 29) >> 7

这或多或少是您在遗留代码中所拥有的吗？

我不敢说这总是会给你正确的答案，因为我没有仔细检查这里的近似值的影响，并且在某些情况下很可能存在舍入问题。

在java代码中

剩余 = (( n>>0 ) + (n >> 2) + (n >> 6) + (n >> 7) + (n >> 8) + (n >> 9) + (n >> 11 ) + (n >> 13) + (n >> 14) + (n >> 15) + (n >> 20) + (n >> 22) + (n >> 26) + (n >> 27) + (n >> 28) + (n >> 29)) >> 7;

[在http://ideone.com/8UlD7](http://ideone.com/8UlD7)上添加了一个示例

我找不到通过按位运算替换加法的方法+无法用负值重现您的结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:55:29.200

好的，另一种方法。

```
1234 : 100 = 12, remainder 34 
```

现在在二进制中，我希望我没有搞砸：

```
 100 1101 0010 : 110 0100 = 1100 Result
- 11 0010 0
-----------
   1 1011 00
  -1 1001 00
  ----------
     0010 001
    -       0
    ---------
      010 0010
     -       0
     ---------
       10 0010 remaining 
```

玩得开心将其转换为算法。与 相比`x /= 100`，无论您如何操作，它都会非常缓慢。

# jquery - jqGrid 客户端搜索，带有“in array”搜索运算符或自定义搜索功能

> ID：10822663
> 
> 赞同：1
> 
> 时间：2012-05-30T19:08:16.067
> 
> 标签：jquery, search, jqgrid, client-side

我正在将客户端搜索应用于没有搜索对话框的 jqGrid，但我需要使用自定义搜索功能或更聪明的搜索运算符执行搜索，其中一个基本上可以执行`$.inArray([searchString],[searchField])`.

我的网格有`datatype: 'json'`并且`loadonce: 'true'`不使用`multisearch`. 我要搜索的相关列有`colModel: [ {name: 'ancestorIds', hidden: true } ]`，它将包含一个 id 数组，例如`[1,2,26,42]`. 基于[这个答案](https://stackoverflow.com/questions/4492963/jqgrid-client-side-searching)，我正在从网格外的单击事件初始化单个字段搜索，如下所示：

```
var selectedId = $('#selectedId').val();
var $grid = $('#grid');
var postdata = $grid.jqGrid('getGridParam','postData');
$.extend(postdata, {
    filters: '',
    searchField: 'ancestorIds',
    searchOper: 'cn',
    searchString: selectedId
}); 
$grid.jqGrid('setGridParam', { search: true, postData: postdata });
$grid.trigger("reloadGrid", [{page: 1}]); 
```

这很好用，除非`selectedId`是 2，否则使用`searchOper: 'cn'`将错误地返回包含 26 或 42 的行。我的问题是，如何修改搜索以仅返回 selectedId 是数组实际值的行？

**编辑**：
给定几个具有以下值的示例行，`ancestorIds`值为`selectedId`2... `[1,2,26,42]`
`[2]`
`[2,42]`
`[42]`
`[22]`

...上面的代码是选择每一行，但我只希望它返回前三行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:26:15.570

我不完全理解你的例子。如果您想在“ancestorIds”列中的搜索中进行精确匹配，您应该只使用`'eq'`operation 而不是`'cn'`.

如果您真的需要实现非常自定义的本地搜索方法，您可以使用我在[答案](https://stackoverflow.com/a/5822685/315935)中描述的技术。

如果您不需要对本地过滤进行如此严格的定制，您应该更详细地描述您的确切要求。

# php - 直接从函数调用访问从函数返回的数组元素

> ID：10822666
> 
> 赞同：-1
> 
> 时间：2012-05-30T19:08:20.940
> 
> 标签：php, arrays, function

有没有办法直接从函数调用访问从 PHP 中的函数返回的数组的特定元素？假设我有一个调用函数`getMostRecentPost()`，它返回一个数组。我希望能够做这样的事情：

```
echo getMostRecentPost()['title']; 
```

那是行不通的。不过，其他语言似乎允许这种语法。现在我的解决方案是这样做：

```
$mostRecentPost = getMostRecentPost();
echo $mostRecentPost['title']; 
```

是否有任何快捷方式可以让我取消声明变量？我的语法错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:09:55.110

这在 PHP 5.4 中是**可能的，**[引用](http://php.net/manual/en/language.types.array.php)：

> **从 PHP 5.4 开始，可以直接对函数或方法调用的结果进行数组取消引用。以前只能使用临时变量。**

**来自 php.net 的示例：**

```
function getArray() {
    return array(1, 2, 3);
}

// on PHP 5.4
$secondElement = getArray()[1]; 
```

**更多信息：**

*   [http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:09:39.723

不，但你可以用对象来做。如果 getMostRecentPost() 返回一个你可以去的对象

```
echo getMostRecentPost()->title; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T19:14:44.137

这是 php 5.4 中的一个新特性

```
function arr(){return [5];}
echo arr()[0]; 
```

[http://codepad.viper-7.com/z6xPrL](http://codepad.viper-7.com/z6xPrL)

# maven - 在 Maven 构建期间构建 HTML 页面

> ID：10822667
> 
> 赞同：2
> 
> 时间：2012-05-30T19:08:22.097
> 
> 标签：maven

我正在使用 Maven 构建一个 HTML webapp。我有一个用于调试的配置文件和另一个用于发布的配置文件。在调试配置文件中，我希望在 HTML 页面中使用未压缩的 Javascript，但在发布配置文件中，我连接所有 Javascript 文件，然后使用 Googles Closure 编译器压缩它们。

所以基本上我有 2 个 Javascript 文件列表，我需要根据选择的配置文件将它们作为标签写到`<script>`HTML 页面中。

是否有一个 Maven 插件，我可以为不同的配置文件配置不同的列表，这些配置文件可以根据需要生成 HTML 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:57:32.527

经过大量调查，我确定最好的选择是编写我自己的 Maven 插件。我有一个简单的 .html 模板，其中包含有关将 CSS 和 JS 标记插入 HTML 的位置的指令：

```
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Fifa Social - Hello World</title>
  <meta name="description" content="Hello World app for Fifa Social">

  <meta name="viewport" content="width=device-width">

  $cssIncludes$
  $jsIncludes$

</head>
<body>
    <p>Page content</p>
</body>
</html> 
```

然后，我有一个在 Maven 生命周期的“生成源”阶段运行的 Maven 插件，它采用模板并用适当的和标签列表替换`$cssIncludes$`and 。（注意：我使用[antlr stringtemplate](http://www.stringtemplate.org/) Java 库作为插件的依赖项）。`$jsIncludes$``<script>``<link>`

我不能发布实际的插件，因为它是一个专有项目，但它是从 AbstractMojo 扩展的单个 Java 类

*   它具有从 POM `@parameter`中读取的属性`<configuratioon>`
    *   html模板的位置
    *   输出文件的位置
    *   JS文件列表
    *   CSS 文件列表
*   在执行期间
    *   从文件中读取 html 模板并将其存储为字符串
    *   `org.antlr.stringtemplate.StringTemplate`从 html 模板创建一个
    *   使用默认的`org.antlr.stringtemplate.language.DefaultTemplateLexer`.
    *   循环遍历配置中的 JS 和 CS 文件，将`<script>`and`<link>`标记创建为字符串
    *   用于`template.setAttribute`将构建的字符串绑定到 $cssIncludes$ 和 $jsIncludes$
    *   将模板写入文件系统

它工作得很好。我只是根据当前的 Maven 配置文件向插件发送不同的 JS 和 CSS 文件列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T18:01:54.960

如果 maven 资源插件（从[属性文件](http://www.avajava.com/tutorials/lessons/how-do-i-filter-resources-based-on-values-from-a-properties-file.html)[过滤](http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html)）还不够，也许您可​​以使用 freemaker 或[velocity maven 插件](http://code.google.com/p/velocity-maven-plugin/wiki/HowToUseThePlugin)之一来生成您的页面。

我使用velocity插件生成一个HTML页面来测试我的JS代码和maven jasmine插件，以及另一个用于生产的HTML页面。代码将很快发布。如果你需要它请ping，所以我会记得添加链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T21:55:53.177

基于通过 Google 进行的简短搜索，我发现了一个可用于压缩[的 Maven 插件。](http://code.google.com/p/closure-compiler/wiki/Maven)因此，基于此，正如您已经提到的那样，拥有不同的配置文件来压缩或不压缩或只保留文件而不压缩是没有问题的。

# c# - 如何调用已实现的接口函数

> ID：10822670
> 
> 赞同：0
> 
> 时间：2012-05-30T19:08:37.080
> 
> 标签：c#, asp.net, interface

我有一个实现我自己的“权限”接口的“页面”。

```
public interface PagePermissions{
      Dictionary<string, Permission> readPermissions();
}

public partial class myWebPage: System.Web.UI.Page, PagePermissions
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
     Dictionary<string, Permission> PagePermissions.readPermissions()
    {
        Dictionary<string, Permission> results = new Dictionary<string, Permission>();
        return results;
    }
} 
```

在我的母版页中，我获得了对当前 Page 对象的引用。

```
 Page myPage = HttpContext.Current.Handler as Page; 
```

但我不能调用我的函数 ReadPermission 因为它没有识别它：

```
 myPage.readPermissions(); 
```

如何调用我实现的函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T19:10:59.870

您需要转换`myPage`为`PagePermissions`.

```
PagePermissions myPage = HttpContext.Current.Handler as PagePermissions;
myPage.readPermissions(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:11:15.567

尝试投射`myPage`到您的界面。

```
PagePermissions myPagePermissions = (PagePermissions)myPage; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T19:22:11.703

为什么要使用接口函数的显式实现？考虑更改代码行

```
Dictionary<string, Permission> PagePermissions.readPermissions()
{ 
```

到

```
public Dictionary<string, Permission> readPermissions()
{ 
```

# xml - kenexa 网络服务 API

> ID：10822675
> 
> 赞同：8
> 
> 时间：2012-05-30T19:08:53.573
> 
> 标签：xml, web-services, soap

是否有人将 Kenexa Web 服务 api 集成到 sharepoint 或 .net 站点以用于招聘和人才管理？我将为我的新公司做这件事，它看起来像繁重的 xml 配置..任何人都可以分享他们的经验吗？

他们的技术术语包括 2x BrassRing、Talent Gateway 等。

看起来他们的 Web 服务允许客户端站点的 UI 传递查询参数并连接到他们的数据库和搜索 API，并最终产生一些搜索结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-18T18:53:46.233

这里有一些文档：

[http://www-01.ibm.com/support/docview.wss?uid=swg21995062](http://www-01.ibm.com/support/docview.wss?uid=swg21995062)

我仍在尝试弄清楚如何为跨域请求启用 CORS 标头，以便我们可以直接从用户的浏览器使用 AJAX 进行查询，但在文档中找不到它。

# xml - 在 XSL 中搜索文本元素并创建超链接

> ID：10822677
> 
> 赞同：1
> 
> 时间：2012-05-30T19:08:57.363
> 
> 标签：xml, xslt

我需要帮助以 XML 格式返回链接以显示在网站上。目前我正在使用

```
 <xsl:for-each select="Summary/text">
    <p>
    <xsl:value-of select="self::*"/>
    </p> 
```

这会抓住每个段落并正确缩进。这很好用，除了我们得到的链接。我对该怎么做有点困惑。我需要显示为超链接的文本显示为单独的段落，如下所示：

```
 <a href=http://www.google.com</a> 
```

所以我想我会调用一个模板来做到这一点。

```
 <xsl:template name="hyperlink">
    <xsl:param name="text"/>
    <xsl:choose>
        <xsl:when test="contains($text,'href=http://')">
            <a>
                <xsl:attribute name="href">
                    <xsl:value-of select="substring($text, 8, 500)"/>
                </xsl:attribute>
            </a>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="self::*"/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

我不知道 $text or`'href=http://'`是否正确。当我尝试使用`contains('<a href')`来测试时，我得到了错误。我很感激朝着正确的方向轻推。我认为我没有使用正确的陈述来完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T04:34:39.407

尝试使用*string-length选择**href*字符串的实际长度：

 *```
substring($text, 8, string-length($text) - 13) 
```*

# arrays - 数组为空，如何验证

> ID：10822678
> 
> 赞同：-1
> 
> 时间：2012-05-30T19:09:03.817
> 
> 标签：arrays, vb.net, ssis, filesystems

我正在开发一个程序，以在文件老化一定时间后从某个文件夹中删除文件，并通过正则表达式或扩展名匹配。我遇到了 files() 可能存在的问题

```
files(0) = Nothing 
files(1) = Nothing
files(2) = Nothing
ect.... 
```

现在它的写法，我可以放置

```
Else
                            log(1) = data(1)
                            log(3) = "Array field empty"
                            InsertLog(log) 
```

`file(i) = Nothing`并且该程序将记录与保留一样多的文件。这将创建冗余的数据库记录并且是不想要的。有没有办法确定是否全部`files(i) = Nothing`，然后将代码放入其中以插入数据库？

```
 'If log(3) is successful that means no files were old enough or deleted successfully
           If log(3) = "Success" And IsArray(files) Then 
                For Each file In files
                    If Not file.IsNullOrEmpty(file) Then
                        'If files is actually something insert into the log
                        log(1) = file
                        InsertLog(log)
                    'could place else here 
                    End If
                Next
                files = Nothing
            Else
                'If no files or error in directory perform this
                log(1) = data(1)
                InsertLog(log)
            End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:26:44.367

听起来你太复杂了。

1.  创建文件时在数据库中创建时间戳
2.  定期唤醒并检查是否需要删除任何内容
3.  删除任何需要删除的东西

有时，当事情变得过于复杂时，也许是时候重新考虑你的攻击计划了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:27:37.337

```
Public Function AllArrayElementsAreNull(arr() As Object) As Boolean
    Dim FoundNonNullItem As Boolean = False
    For Each item As Object In Arr
        If item IsNot Nothing Then
            FoundNonNullItem = True
            Exit For
        End If
    Next
    Return Not FoundNonNullItem
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T21:12:52.597

我添加了一个计数器来计算文件是否实际存在，简单的解决方案。

```
 If log(3) = "Success" And IsArray(files) Then
                j = 0
                For Each file In files
                    If Not file.IsNullOrEmpty(file) Then
                        log(1) = file
                        InsertLog(log)
                        j += 1
                    End If
                Next
                If j = 0 Then
                    log(3) = "Files not old enough"
                    InsertLog(log)
                End If
                files = Nothing
            Else
                log(1) = data(1)
                InsertLog(log)
            End If 
```

# batch-file - 文件重命名批处理脚本

> ID：10822683
> 
> 赞同：0
> 
> 时间：2012-05-30T19:09:29.520
> 
> 标签：batch-file, file-rename, batch-rename

我正在尝试重命名一堆文件，我可以手动完成，也可以通过批处理脚本完成。批处理脚本会非常容易。

我需要脚本将文件夹中的所有文件重命名为姓氏+索引。所以输出看起来像 sample1.exe 和 sample 是姓氏，索引为 1。我还需要在每个文件被命名后增加这个索引以避免重复。我搜索了谷歌，但不知道将其中之一放在一起。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:05:36.863

如果名称中不会包含任何文件`!`名，则

```
@echo off
setlocal enableDelayedExpansion
set "surname=surname"
set "index=0"
for %%F in (*) do (
  set /a "index+=1"
  ren "%%F" "!surname!!index!%%~xF"
) 
```

如果文件名可能包含`!`然后

```
@echo off
setlocal disableDelayedExpansion
set "surname=surname"
set "index=0"
for %%F in (*) do (
  set "old=%%F"
  set "ext=%%~xF"
  set /a "index+=1"
  setlocal enableDelayedExpansion
  ren "!old!" "!surname!!index!!ext!"
  endlocal
) 
```

# php - 从 mysql db 获取值并将其发布到 php 页面

> ID：10822692
> 
> 赞同：0
> 
> 时间：2012-05-30T19:10:06.253
> 
> 标签：php, mysql, html, sql

我从数据库中获取值并将其发布到另一个页面时遇到了一个小问题，这是我的代码。在 search.php 上，用户输入最低价格和最高价格，然后在页面 result.php 上，它从数据库中显示产品的名称和价格以及更多信息的链接。（info.php）这第三页将显示一些附加信息基于 result.php 上显示的产品 ID 的信息我试图从结果中隐藏 Id_product 的值并将其发布到第 3 种形式但不起作用。我收到错误通知：未定义索引：info.php 第 4 行中的 ID

```
//////search.php /////

<form  method="post" action="result.php" > 
<tr> <INPUT type=text size=20 name=pricemin ><BR>  </tr>  
<tr> <INPUT type=text size=20 name=pricemax ><BR>  </tr>
<tr> <input type="submit" class="Nom" id="button" value="Valider" /></tr></form>

///////result.php //////

<?php include 'includes/connection.php';
$pricemin = $_POST['pricemin'];
$pricemax = $_POST['pricemax'];
$query = "SELECT * FROM product where price between '$pricemin' and '$pricemax'";
$result = mysql_query($query);?>
<?php if(mysql_num_rows($result) > 0)
while($products = mysql_fetch_array($result)) {?>   
<?php echo $products['name_product'] ;echo $products['price_product'] ;
echo "<a href='http://localhost/mywebsite/info.php'>More infos</a>"
?>
<form method="post" action="info.php" >
<input type="hidden" name="id" value="<?php echo $products['id_product']; ?>" />
</form><?php } ?>...

///// info.php //////

<?php
include 'includes/connection.php';
$id_product = $_POST['id'];
$query = "SELECT * FROM product where id_product='$id_product'";
$result = mysql_query($query);   ?>
<html><head><title>.. </title></head><body>
<?php 
while($products = mysql_fetch_array($result)) {?>
<h1>Product ID : <?php echo  $products['id_product'] ; ?> </h1>
<h1>Product name : <?php echo  $products['name_product'] ; ?> </h1>
<h1>Product Qt : <?php echo  $products['quantity_product'] ; ?> </h1>
<h1>Product Spec : <?php echo  $products['spec_product'] ; ?> </h1>
<?php } ?></body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:27:43.483

试试这个：

```
//////search.php /////

<form  method="post" action="result.php" > 
<tr> <INPUT type=text size=20 name=pricemin ><BR>  </tr>  
<tr> <INPUT type=text size=20 name=pricemax ><BR>  </tr>
<tr> <input type="submit" class="Nom" id="button" value="Valider" /></tr></form>

///////result.php //////

<?php include 'includes/connection.php';
$pricemin = $_POST['pricemin '];
$pricemax = $_POST['pricemax '];
$query = "SELECT * FROM product where price between '".$pricemin."' and '".$pricemax."'";
$result = mysql_query($query);

if(mysql_num_rows($result) > 0)
while($products = mysql_fetch_array($result)) {
$id = $products['id_product'];
echo $products['name_product'] ;echo $products['price_product'] ;
echo "<a href='info.php?id=";
echo $id;
echo "'>More infos</a>"
?>

<?php } ?>...

///// info.php //////

<?php
include 'includes/connection.php';
$id_product = $_GET['id'];
$query = "SELECT * FROM bien where id_product= '".$id_product."'";
$result = mysql_query($query);   ?>
<html><head><title>.. </title></head><body>
<?php 
while($products = mysql_fetch_array($result)) {?>
<h1>Product ID : <?php echo  $products['id_product'] ; ?> </h1>
<h1>Product name : <?php echo  $products['name_product'] ; ?> </h1>
<h1>Product Qt : <?php echo  $products['quantity_product'] ; ?> </h1>
<h1>Product Spec : <?php echo  $products['spec_product'] ; ?> </h1>
<?php } ?></body></html> 
```

这应该将 ID 传递给 info.php

此外，表单仅在您提交按钮时才有效，因此如果您单击链接，除非您使用 JS onsubmit 函数，否则表单将不会提交。

# javascript - How do I handle this jquery loop?

> ID：10822693
> 
> 赞同：0
> 
> 时间：2012-05-30T19:10:06.623
> 
> 标签：javascript, jquery

I have an array of images that I want to loop through infinitely ie. 1, 2, 3, 1, 2, 3...

At first, I tried to do this using the following code:

```
var images = [
  "/images/image1.jpg",
  "/images/image2.jpg",
  "/images/image3.jpg"
];

var obj = { currentValue: 0 };
var maxValue = 2;            

//loop through the items
var infiniteLoop = setInterval(function() {
  if(obj.currentValue == maxValue) { 
    obj.currentValue = 0;                                           
  }

  // ... Code to fade in currentItem ...

  obj.currentValue++;
}, 5000); 
```

I'd read that this is correct method of passing in a variable by reference but for some reason, I'm never able to set the obj.currentValue back to 0 when all the images have been looped through.

I figured an alternative way would be to set the value of an html field:

```
var images = [
  "/images/image1.jpg",
  "/images/image2.jpg",
  "/images/image3.jpg"
];

var maxValue = 2;            

//loop through the items
var infiniteLoop = setInterval(function() {
  if(parseInt($('#currentItem').val()) == maxValue) { 
    $('#currentItem]').val('0');                                           
  }

  //... code to fade in currentItem ...

  var tmp = parseInt($('#currentItem').val());
  tmp++;                                  
  $('#currentItem').val(tmp);
}, 5000);

<input type="hidden" id="currentItem" name="currentItem" value="0" /> 
```

However I'm still having the same problem. For some reason, whenever I hit the end of the image list, I'm unable to set the value of the hidden field and my infinite loop never gets to restart.

Am I missing something obvious here? I can't seem to figure out how to get this working.

If anyone has a more efficient method of achieving this I'd also be very grateful if you could share it :-)

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:51:09.673

所以我稍微改写了你的js，并评论了如何/为什么做事

```
// Give your code a unique namespace using an immediately/self invoked annonymous function
(function (window) {

    // For better management we could use some more variables
    // slider.images.length replaces maxvalue
    var slider = { 
        images: [
          "/images/image1.jpg",
          "/images/image2.jpg",
          "/images/image3.jpg"
        ], 
        current: 0, // name your variables semantically, we know this is going to have a value so don't 'append' things to the name that are obvious
        time: 5000
    };

    // separated the function so we DRY
    function rotate() {
        // Remember that the images array is 0 indexed and length gives the total amount of 
        // items in the array which will be one more, if they're the same then we reset 
        // current to 0
        if(slider.current == slider.images.length)
            slider.current = 0;

        // Code to do w/e
        console.log(slider.images[slider.current], slider.current);

        slider.current++;
        window.loop = setTimeout(rotate, slider.time);
    }

    // only thing about intervals really, they never stop, and can never be stopped
    // so better thing to do is use a recursive timeout, and ideally it should be available 
    // somehow so you can stop it outside of the script itself, in this case we put the 
    // reference on window. (which is not ideal, anywhere else it makes sense is better)
    window.loop = setTimeout(rotate, slider.time);

}( window ));
​ 
```

在 jsFiddle 中：

[http://jsfiddle.net/sg3s/RGQxY/5/](http://jsfiddle.net/sg3s/RGQxY/5/)

您正在使用 jquery 来做事，这很好，但是您必须传递 jQuery 才能在包装器看起来像这样的立即调用的函数中使用它：`(function ($, window) { /* code goes here */ }( jQuery, window ));`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:25:10.500

可以只使用两个循环。

```
while (1==1) 
{ // infinite loop
    for (int i = 0; i < images.length; i++) 
    { // loop images array
        console.log(images[i]);
    }
} 
```

无限期打印三个图像路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T19:20:31.487

setInterval 有时无法正常工作。您是否尝试过 setTimeout ？您可以执行以下操作，看看它是否有效：

```
var images = [
  "/images/image1.jpg",
  "/images/image2.jpg",
  "/images/image3.jpg"
];

var obj = { currentValue: 0 };
var maxValue = 2;            

function fn() {
  if(obj.currentValue == maxValue) { 
    obj.currentValue = 0;                                           
  }

  // ... Code to fade in currentItem ...

  obj.currentValue++;
  setTimeout(fn,5000);

}

//loop through the items
var infiniteLoop = setTimeout(fn,5000); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T19:20:42.250

如果我理解正确，您想在计数器达到 maxValue 时循环遍历。尝试如下所示，

```
var images = [
  "/images/image1.jpg",
  "/images/image2.jpg",
  "/images/image3.jpg"
];

var maxValue = 2,
    counter = 0;

var infiniteLoop = setInterval(function() {
    var curIndex = (counter++ % (maxValue + 1));
}, 5000); 
```

[**演示**](http://jsfiddle.net/HpnE7/1/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T19:23:25.610

在您的第一个示例中，更改：

```
if(obj.currentValue == maxValue) { 
```

至

```
if(obj.currentValue > maxValue) { 
```

事实上，它无法处理索引 2，因为它被重置回 0。

# android - 用于跨平台开发的 OpenAL

> ID：10822694
> 
> 赞同：11
> 
> 时间：2012-05-30T19:10:14.383
> 
> 标签：android, ios, audio, cross-platform, openal

OpenAL 是一个令人困惑的项目，需要在其中提取相关信息。现在还有官方的 OpenAL 吗？creativelabs 对项目的控制是什么？

我正在寻找一个跨平台的音频库来支持 IOS（iPhone、Ipad）、Android、Windows 和 Linux。

OpenAL 能满足这个需求吗？OpenAL 的许可证是什么？尽管我们打算发布我们的一些源代码，但我们没有兴趣因为许可冲突而被迫发布。

有足够的证据让我假设它正在处理 Android 相关链接（[Android OpenAL？](https://stackoverflow.com/questions/2587295/android-openal)）加上谷歌搜索产生了积极的结果。

我意识到 Android 已经正式支持 OpenSL。然而，Android 似乎是目前唯一支持 OpenSL 的平台，所以这不是一个选项。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-09T21:05:57.757

我选择了 OpenAL-soft 和 OpenAL for windows。它们都是相同的接口，因此仍然是一个代码库。

安卓很简单。 [https://github.com/AerialX/openal-soft-android](https://github.com/AerialX/openal-soft-android)

IOS 更容易。您可以将 OpenAL.Framework 添加到您的 XCode 项目中。标头位置只是不同（OpenAL/al.h 与 AL/al.h）。

Linux 非常简单。为您的发行版安装 openal 开发包。

Windows 是 OpenAL 最大的痛点。最后，只需从 creative 安装原始的 OpenAL SDK。不过，OpenAL 在 Windows 上看起来确实很不稳定。我不时听到一些爆裂声和噼啪声，然后在每个其他平台上它都是完美的。我可能会在发布之前切换到 Windows 分发版的 OpenAL-soft。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-19T09:34:12.947

自 1.1 版以来，Open AL 显然不再是免费软件了。以前版本的 Open AL（我认为是 1.0 和以前的版本）具有 BSD 许可证，现在它已由 Creative 拥有版权。尽管它是“开放”前缀，但它不再是免费的。这是 1.1 许可证的第一部分，取自[此链接](http://www.openal.org/downloads/)的“SDK 安装程序” ：

```
 LICENSE
    1\.  Grant of License
        The Software is licensed, not sold, to you for use only under the
     terms of this Agreement.  This License Agreement is your proof of 
    license to exercise the rights granted herein and must be retained by 
    you.  As between you and Creative (and, to the extent applicable, its 
    licensors), Creative retains all title to and ownership of the Software 
    and reserves all rights not expressly granted to you.  The license under 
    this Section 1 is conditioned upon your compliance with all of your 
    obligations under this Agreement.  Creative grants to you the right to 
    use all or a portion of this Software provided that:

        (a) the Software is not distributed for profit;
        (b) the Software may NOT be modified;
        (c) all copyright notices are maintained on the Software;
        (d) the licensee/end-user agrees to be bound by the terms of this 
    agreement;
        (e) Creative's BBS/FTP/website are the only on-line sites where 
    Licensee may download electronic files containing the Software; and        
        (f) Licensee shall use the Software solely for the purpose of 
    developing Licensee applications compatible with Creative’s products, 
    unless otherwise agreed to by further written agreement from Creative. 
```

所以如果你想使用一个开源的免版税版本，你只能将它用于以前版本的 Open AL。我只能从 Quake 3 的引擎源代码中找到。

您可能想探索其他一些替代方案。

# html - 如何使用css对齐多个输入

> ID：10822695
> 
> 赞同：1
> 
> 时间：2012-05-30T19:10:15.110
> 
> 标签：html, css, alignment

我正在尝试实现一个简单的登录页面，我需要对齐一些输入文本：

这是我的CSS：

```
 body {
        background-image: url(image/bg.jpg); background-size: 100%;
    }

    .content{
        border: 1px solid gray;
        margin-top:180px;
        margin-left:380px;
        background-color: #464749;
        width:333px;
        height: 352px;
        padding: 58px 76px 0 76px;
        color: #ebebeb;
        font: 12px Arial, Helvetica, sans-serif;
    }
    span{
        display:block;  
        margin-left: 30px;
    }
    input{
        width: 205px;
        padding: 10px 4px 6px 3px;
        border: 1px solid #0d2c52;
        background-color:#1e4f8a;
        font-size: 16px;
    }
    .nameField{

        display:inline;
        width:80px;
        text-align: right;
        padding: 14px 10px 0 0;
        margin:0 0 7px 0;
    }
    .inputField{
        display:inline;
        width:230px;
        margin:0;
        margin:0 0 7px 0;
    } 
```

这是我的html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Login</title>
        <link rel="stylesheet" type="text/css" href="main.css" />
        <!-- Date: 2012-05-30 -->
    </head>
    <body>
        <div class="content">
            <h2>Login</h2>
            <span>
                <div class="nameField">
                Username: 
                </div>
                <div class="inputField">
                    <input type="text" name="username" size="30" maxlength="2048"/>
                </div>
            </span>
            <span><div class="nameField">
                Password: 
                </div>
                <div class="inputField"><input type="password" name="password" size="30" maxlength="2048"/>
                    </div>
            </span>
        </div>
    </body>
</html> 
```

我的输出是：

![在此处输入图像描述](../Images/5757d0beb7c883ef8591244ec82ce9e7.png)

我怎样才能对齐那个蓝色的输入文本？有人能帮我吗？？谢谢sss

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T19:16:08.920

删除 inputField 类的宽度，并将 nameField 和 inputField 类的显示从 inline 更改为 inline-block。

**[jsFiddle 示例](http://jsfiddle.net/j08691/eZmgy/)**。

CSS：

```
.nameField{
    display:inline-block;
    width:80px;
    text-align: right;
    padding: 14px 10px 0 0;
    margin:0 0 7px 0;
}
.inputField{
    display:inline-block;
    width:130px;
    margin:0;
    margin:0 0 7px 0;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:15:33.613

`display`将属性更改`.nameField`为`inline-block`。

此外，您不需要对所有内容都使用 div。有一个非常好的标签`label`用于标记表单字段。

# android - 我仍然无法找出带有 sqlite 结果的自定义光标适配器

> ID：10822700
> 
> 赞同：0
> 
> 时间：2012-05-30T19:10:41.917
> 
> 标签：android, sqlite, listview, android-cursoradapter

我有一个具有以下结构的 sqlite 表：

```
 String CREATE_ACHIEVEMENTS_TABLE = "CREATE TABLE achievements ("
             + "id INTEGER PRIMARY KEY,"
             + "name VARCHAR,"
             + "type VARCHAR,"
             + "value VARCHAR,"
             + "completed VARCHAR"
             + ")"; 
```

现在我要做的是拥有它，这样如果“完成”列设置为“是”，我希望列表视图中行的文本颜色为绿色。

我阅读了教程并查看了代码示例，但我无法弄清楚如何使用自定义光标适配器来实现这一点。现在要在列表视图中显示结果，我使用以下代码：

ShowAchievements.java（当单击菜单项“查看成就”时启动此活动）：

```
package com.dd.qsg;

import java.util.ArrayList;
import android.app.ListActivity;
import android.os.Bundle;
import android.widget.ArrayAdapter;

public class ShowAchievements extends ListActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.achievements);

        DatabaseHandler db = new DatabaseHandler(this);
        ArrayList<String> achievements = db.getAchievements(this);

        this.setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, achievements));
    } 

} 
```

在上述活动中调用的 getAchievements() 函数：

```
public ArrayList<String> getAchievements(Context context) {
    ArrayList<String> achievementList = new ArrayList<String>();
    String selectQuery = "SELECT * FROM achievements ORDER BY id asc";

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    if (cursor != null) {
        if (cursor.moveToFirst()) {
            do {
                if (cursor.getString(4).equals("yes")) {
                    achievementList.add(cursor.getString(1)+" (completed)");
                }
                else {
                    achievementList.add(cursor.getString(1));
                }
            } while (cursor.moveToNext());
        }
    }
    else {
        achievementList.add(context.getResources().getString(R.string.na));
    }

    cursor.close();
    db.close();
    return achievementList;
} 
```

就像我说的我想实现一个自定义 cursoradapter 以便当我从 ShowAchievements 活动中调用 getAchievements() 时，如果该行的“完成”设置为“是”，它将使列表视图行中的文本颜色变为绿色在数据库中。我希望这是有道理的。

在另一个问题中，我问别人帮了我，他们告诉我实施这样的事情：

```
private class MyCursorAdapter extends CursorAdapter {

    public MyCursorAdapter(Context context, Cursor c) {
        super(context, c);
    }

    @Override
    public void bindView(View v, Context context, Cursor cursor) {
        if(cursor.getString(cursor.getColumnIndex("completed").equals("yes")){
            TextView tv = (TextView) v.findViewById(R.id.NAMEOFTEXTVIEW);
            tv.setTextColor(Color.GREEN);
        }
    }

    @Override
    public View newView(Context arg0, Cursor arg1, ViewGroup arg2) {
        LayoutInflater inflater = (LayoutInflater)this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        row = inflater.inflate(R.layout.achievement_item, parent, false);
        return row;
    }
} 
```

我的问题是我如何实现它，以便在我的活动中调用 getAchievements() 时它可以工作？？？我必须添加哪些 XML 文件？我是否必须添加一个带有线性布局的xml文件，里面有一个listview，然后是一个单独的xml文件，里面有一个linearlayout和一个textview？还是我将文本视图放在与列表视图相同的布局中？我用 cursoradapter 代码替换我的整个 getAchievements() 函数吗？

如果有人可以帮助我，我非常感激。我真的不知道如何实现这一点。我试过阅读一些教程，但它们让我很困惑。如果我能得到一个完整的例子或其他东西来帮助我理解如何做到这一点，那将对我有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:17:25.833

由于我无法重现您的开发环境，因此我可以做的就是重构您的代码：

```
public class ShowAchievements extends ListActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        DatabaseHandler db = new DatabaseHandler(this);
        Cursor cursor = db.getAchievements(this);
        MyCursorAdapter cursorAdapter = new MyCursorAdapter(this, cursor);

        this.setListAdapter(cursorAdapter);
    } 

    private Cursor getAchievements(Context context) {
        String selectQuery = "SELECT * FROM achievements ORDER BY id asc";

        SQLiteDatabase db = this.getWritableDatabase();
        return db.rawQuery(selectQuery, null);
    }

    private class MyCursorAdapter extends CursorAdapter {

        public MyCursorAdapter(Context context, Cursor c) {
            super(context, c);
        }

        @Override
        public void bindView(View v, Context context, Cursor cursor) {
            if(cursor.getString(cursor.getColumnIndex("completed")).equals("yes"){
                TextView tv = (TextView) v.findViewById(R.id.NAMEOFTEXTVIEW);
                tv.setTextColor(Color.GREEN);
            }
        }

        @Override
        public View newView(Context arg0, Cursor arg1, ViewGroup arg2) {
            LayoutInflater inflater = (LayoutInflater)this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(R.layout.achievement_item, parent, false);
            return row;
        }
    }
} 
```

请尝试一下，修复语法错误（如果有），让我知道它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-25T08:04:08.090

只需在每个 (") 之前为您的 sqlite 代码占用空间，因为它们相互绑定并且代码无法执行。让它像这样：

```
String CREATE_ACHIEVEMENTS_TABLE = "CREATE TABLE achievements ("
         + " id INTEGER PRIMARY KEY,"
         + " name VARCHAR,"
         + " type VARCHAR,"
         + " value VARCHAR,"
         + " completed VARCHAR"
         + ")"; 
```

# java - Java多个按钮大小问题

> ID：10822701
> 
> 赞同：1
> 
> 时间：2012-05-30T19:10:42.070
> 
> 标签：java, swing, jframe, jbutton, layout-manager

我正在制作一个简单的爱好，它只包含两个按钮。当我尝试设置大小时，只设置了一个按钮，即工作按钮。即使我注释掉播放按钮代码也是如此。

这是按钮创建代码：

```
Container content = frame.getContentPane();
JButton workBtn = new JButton("Work");
JButton playBtn = new JButton("Play");
workBtn.setSize(100, 100);
playBtn.setSize(100, 100);
workBtn.setVisible(true);
playBtn.setVisible(true);
content.add(workBtn);
content.add(playBtn); 
```

我猜这很简单，但我就是看不到或找出来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T19:15:41.947

JFrame contentPanes 默认使用 BorderLayout。阅读布局管理器，了解如何最好地利用它们来发挥自己的优势。你可以在[这里](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)找到链接。

# c# - 从 ItemsSource 绑定时 ListBoxItems 未突出显示所选项目

> ID：10822703
> 
> 赞同：0
> 
> 时间：2012-05-30T19:10:50.447
> 
> 标签：c#, windows-phone-7, xaml

我一直在努力解决这个问题，同时我在互联网上搜索了高低我似乎无法找到适合我的代码制作方式的答案。我已经看到像[>here<](https://stackoverflow.com/questions/9287857/listbox-does-not-highlight-generated-itemsitemssource-works-fine-for-listboxit)和[>here<](https://stackoverflow.com/questions/8696443/how-to-programatically-select-an-item-in-a-data-bound-listbox-control)这样的页面的结果，但这些都不起作用。

我的代码与数据绑定应用程序的示例代码非常相似，如下所示：

```
<ListBox ItemsSource="{Binding Items}" Name="MyListBox">
      <ListBox.ItemTemplate>
            <DataTemplate>
                  <StackPanel>
                        <TextBlock Text="{Binding LineOne}"/>
                        <TextBlock Text="{Binding LineTwo}"/>
                  </StackPanel>
            </DataTemplate>
      </ListBox.ItemTemplate>
</ListBox> 
```

除了一个小的区别，那就是我在运行时而不是设计时绑定 ItemsSource，即：

```
MyListBox.ItemsSource = listCollection; 
```

在这种情况下，listCollection 是一个对象的 ObservableCollection，如下所示：

```
public class MyObject()
{
    public string LineOne { get; set; }
    public string LineTwo { get; set; }
} 
```

出于某种原因，我无法让列表突出显示列表中的选定项目。更改为不起作用，因为 Visual Studio 显然不允许 ItemTemplate 和 Resources 在我的代码中使用。

有什么帮助吗？

问候，乔文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-09T00:57:58.133

他们出于某种原因有问题的应用程序只是不想工作。我效仿并创建了一个新的基本应用程序，现在一切正常。（回答老问题）。

# vb.net-2010 - 每次单击按钮以在访问中保存数据时出现溢出错误

> ID：10822707
> 
> 赞同：0
> 
> 时间：2012-05-30T19:11:01.680
> 
> 标签：vb.net-2010

任何人都可以帮助我，我有一个表格，我通过它在我的 ms 访问数据库中保存日期。有时我单击保存按钮数据正确保存但有时它给我错误**“溢出”'ExecuteNonQuery'未声明。由于其保护级别，它可能无法访问。** 我正在使用这段代码：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    If MsgBox("Are you sure you want to Add Data?", MsgBoxStyle.Question + MsgBoxStyle.YesNo, "WARNING") = MsgBoxResult.Yes Then
        Dim OleDBC As New OleDbCommand
        With OleDBC

            .Connection = conn
            .CommandText = "Insert Into tblmaritlistBA_I (form_number,name_of_candidate,fathers_name,mothers_name,category,minority,date_of_birth,gender,mobile,address,board,passed_year,intermediate_marks_obtained,intermediate_total_marks,percentage,normalization_factor,total_percentage)  VALUES ('" & txtformnumber.Text & "','" & txtstuname.Text & "','" & txtfathname.Text & "','" & txtmothname.Text & "','" & cmbcategory.Text & "','" & cmbminority.Text & "','" & dobPicker1.Text & "','" & cmbgender.Text & "','" & txtmobile.Text & "','" & txtaddress.Text & "','" & cmbboard.Text & "','" & cmbpassedyear.Text & "','" & txtintermarks.Text & "','" & txtintertotalmarks.Text & "','" & txtpercentage.Text & "','" & Lblnormalization.Text & "','" & txtpercentageafterN.Text & "')"
            .ExecuteNonQuery()
        End With
        MsgBox("Data Added!", MsgBoxStyle.Information + MsgBoxStyle.OkOnly, "SUCCESS")
        Me.Hide()

        Call initgrid()
    End If
End Sub 
```

请帮助我（“_”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T03:23:42.750

根据您的代码，您从未打开过数据库连接。

您设置`conn`为`Command`对象的连接，但您从未先实例化它也没有打开它。

请参阅下面的代码。`Connection`创建对象（放入您自己的连接字符串），然后将其打开。

最后，必须在一个`Finally`块中关闭该连接，以便即使出现错误我们也可以关闭它

```
Private Sub Button1_Click_1(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button5.Click

    Dim conn As OleDbConnection
    Try
        If MsgBox("Are you sure you want to Add Data?", MsgBoxStyle.Question + MsgBoxStyle.YesNo, "WARNING") = MsgBoxResult.Yes Then

            conn = New OleDbConnection("YOUR_CONNECTIONSTRING_HERE")
            conn.Open()

            Dim OleDBC As New OleDbCommand

            With OleDBC
                .Connection = conn
                .CommandText = "Insert Into tblmaritlistBA_I (form_number,name_of_candidate,fathers_name,mothers_name,category,minority,date_of_birth,gender,mobile,address,board,passed_year,intermediate_marks_obtained,intermediate_total_marks,percentage,normalization_factor,total_percentage)  VALUES ('" & txtformnumber.Text & "','" & txtstuname.Text & "','" & txtfathname.Text & "','" & txtmothname.Text & "','" & cmbcategory.Text & "','" & cmbminority.Text & "','" & dobPicker1.Text & "','" & cmbgender.Text & "','" & txtmobile.Text & "','" & txtaddress.Text & "','" & cmbboard.Text & "','" & cmbpassedyear.Text & "','" & txtintermarks.Text & "','" & txtintertotalmarks.Text & "','" & txtpercentage.Text & "','" & Lblnormalization.Text & "','" & txtpercentageafterN.Text & "')"
                .ExecuteNonQuery()
            End With

            MsgBox("Data Added!", MsgBoxStyle.Information + MsgBoxStyle.OkOnly, "SUCCESS")
            Me.Hide()

            Call initgrid()
        End If

    Catch ex As Exception
        MsgBox("Error : " & ex.ToString)
    Finally
        If (conn.state and ConnectionState.Open) <>0 Then 
            conn.Close 
        End If
    End Try

End Sub 
```

# google-chrome - Chrome 扩展程序图标不见了

> ID：10822711
> 
> 赞同：1
> 
> 时间：2012-05-30T19:11:13.637
> 
> 标签：google-chrome, google-chrome-extension

*我刚刚添加了一个名为Chrome History X*的扩展程序，但它应该拥有的图标不会像任何其他图标一样出现在 url 框旁边的工具栏中。

扩展的作者可能打算从工具栏中隐藏图标，但我的问题是，我该如何运行扩展？看来我只能从*工具-> 扩展*页面中删除扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T23:00:30.177

网上商店在扩展详细信息选项卡上说：

> 覆盖默认的历史页面。

这意味着您需要访问`chrome://history`. 它放了一个斜体按钮说`Visualize this search`。

这就是扩展的工作方式。

# jquery - 为什么 .on('load', ...) 不触发脚本标签的回调？

> ID：10822715
> 
> 赞同：3
> 
> 时间：2012-05-30T19:11:27.767
> 
> 标签：jquery, onload

我有以下代码加载外部脚本并在加载时应该执行一些代码：

```
$('<script/>', {
    type: 'text/javascript',
    src: 'https://raw.github.com/einars/js-beautify/master/beautify.js'
}).on('load', function() {
    alert('jsb loaded' + typeof js_beautify);
}).appendTo('body'); 
```

但是，该事件永远不会触发 - 即使脚本*已*正确加载，如已验证

```
window.setTimeout(function() {
    alert(typeof js_beautify);
}, 1000); 
```

哪个警报`function`就好了。

演示：http: [//jsfiddle.net/ThiefMaster/x2b9x/](http://jsfiddle.net/ThiefMaster/x2b9x/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:12:58.423

您应该调用[`$.getScript()`](http://api.jquery.com/jQuery.getScript/)，它正是这样做的，并且可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-20T03:39:32.283

(jQuery:2.0.3) 通过appendTo()注入动态脚本标签时未触发加载事件的2个原因：

*   加载事件不是气泡事件。调用的处理程序将仅挂钩该特定元素
*   appendTo() 并没有按预期将代码提供的元素真正注入 DOM

getScript() 直接使用 DOM 函数

```
document.head.appendChild( script[ 0 ] ); 
```

注入脚本标签元素。这确保标签元素实际添加到 DOM 中。而 appendTo() 将尝试使用 Ajax 从源 URL 加载脚本。然后为窗口对象而不是脚本对象触发加载事件。

以下是对 jQuery.appendTo() 的详细测试以了解原因

```
 var $script = $("<script>", {
                    src: this.options.url_js,
                    "data-widget": this.widgetFullName,
                    type:"text/javascript"
                }).on(
                    "load error",
                    function( evt ) {
                        script.remove();
                        if ( evt ) {
                            alert( evt.type === "error" ? 404 : 200, evt.type );
                        }
                    }
                ).appendTo("head"); 
```

1.  jQuery.on() 将使用元素作为键将事件处理程序注册到“data_priv”中
2.  当事件发生时，jQuery 将使用“jQuery.event.dispatch.apply(eventHandle.elem, arguments)”来调用处理程序。

jQuery.appendTo() 是“追加”的别名。实际代码是

```
 append: function() {
    return this.domManip( arguments, function( elem ) {
        if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
            var target = manipulationTarget( this, elem );
            target.appendChild( elem );
        }
    });
} 
```

在将元素实际注入 DOM 之前，它会使用 domManip() 执行一些 ajax 操作。

```
 domManip: function( args, callback, allowIntersection ) { 
```

这个函数中有2个关键变量，1是“值”，2是“节点”。“值”是变量“$script”。实际注入的元素是“节点”，而不是“$script”

```
 callback.call( this[ i ], node, i ); //inject the element into the DOM 
```

![变量节点和值上的Firefox比较](../Images/e6fecba8f8d4c6208b4067ea5b9fe593.png)

**这就是为什么“$script”上的“load”事件处理程序根本不会被调用的原因。**

但是这个加载事件会触发两次，一次是针对加载的元素，（这里是节点），一次是针对window对象的。如果您的处理程序与窗口对象挂钩，它将被调用。

# c# - 向多个收件人发送短信

> ID：10822716
> 
> 赞同：-1
> 
> 时间：2012-05-30T19:11:28.750
> 
> 标签：c#, sms-gateway

我正在开发一个小型应用程序，通过 Ozeki NG - SMS Gateway 向多个用户发送 SMS。我找到了一个 Windows 应用程序向一个收件人发送短信。但我想使用 C# 和 MySQL 数据库向多个客户端发送短信。

我遵循以下网址。
[http://www.codeproject.com/Articles/20064/How-to-Send-SMS-Messages-from-C-using-an-SQL-Datab](http://www.codeproject.com/Articles/20064/How-to-Send-SMS-Messages-from-C-using-an-SQL-Datab)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:18:11.607

如果您有应用程序，有几种方法可以做到这一点。

我还希望使用移动聚合器和/或 SMS 网关。例如[txtNation 的短信网关](http://gateway.txtnation.com/ "短信网关")。

另外，我会首先考虑您需要 SMS 网关的用途，然后从那里开始。问问自己需要多少流量，要发送多少条消息以及每条短信的目标价格是多少。您需要什么类型的连接 - http、smpp？

# git - 我们如何利用 git 中的版本控制，同时仍然维护我们 API 数据的用户隐私？

> ID：10822717
> 
> 赞同：0
> 
> 时间：2012-05-30T19:11:36.970
> 
> 标签：git, api

Kiva 在[http://build.kiva.org提供了一个 API](http://build.kiva.org)

我们还偶尔会收到来自 API 的匿名（尽我们所能）数据的快照。我们现在正致力于定期更新这些快照，比如每周一次。它们总共很大，350MB 压缩，> 1GB 未压缩。但是，它们由数百个 JSON 文件组成，因此可以从 git 中受益，只需拉下更改即可。

我们想将我们的快照移动到 Git 和 Github 中，以利用它们的托管以及更快地获取快照的更新。事实上，我在这里提交了当前快照的一个提交：[https ://github.com/coderintherye/kivaloans](https://github.com/coderintherye/kivaloans)

但是，我们希望不保留 git 历史记录，因为我们不想让获取过去的历史记录变得容易，以便随着时间的推移拼凑数据。理由当然是我们有保护用户隐私的法律责任，并且我们有一个现实的期望，即无论我们如何尝试匿名数据，如果将足够多的数据放在一起，就有可能精确定位用户活动给团体或个人，例如 Netflix 比赛发生的事情：http: [//www.wired.com/threatlevel/2010/03/netflix-cancels-contest/](http://www.wired.com/threatlevel/2010/03/netflix-cancels-contest/)

有没有一种方法可以使用 Git 并提供数据，同时不保留历史记录？我们正在考虑的一个选项是使用 git，但使用 rebase -i 来破坏以前的提交。但是为了从 Git 中获得任何好处，我认为我们至少需要保留之前的提交，当然，任何不定期拉取的人根本不会获得太多好处，因为他们不会有旧承诺参考（或者我们认为？）

或者以这种方式试图成为拥有数据的好公民的期望是一种不合理的期望？如果是这样，我们可以完全放弃这个想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:22:09.907

GitHub 能够上传静态文件以供在源代码控制之外进行下载。这通常被项目用于提供预编译的二进制安装程序或其他大文件。

您可以使用他们的[Repo Downloads](http://developer.github.com/v3/repos/downloads/) API 来自动执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:05:19.047

另一种想法：使用具有完整历史记录的本地 git 存储库，并使用“构建过程”将特定快照发布到 GitHub。例子：

1.  您进行了一系列提交并将它们签入您的本地存储库
2.  您决定发布本地存储库，因此您首先标记它（为了更好地衡量）。
3.  您的“构建过程”可以访问 GitHub 存储库的克隆。在结帐时，它会删除所有本地文件并执行本地存储库的导出（*而不是*结帐） - 特别是最后一个标记版本。
4.  导出的文件被提交并推送到 GitHub。
5.  GitHub repo 有历史，但只有快照。

您可以使用某种标记或提交消息约定来轻松将公共提交与私人提交相关联，而不会暴露私人历史。

这个“构建过程”只是某种脚本，没什么特别的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T21:26:00.370

好吧，我们在这里决定的最终解决方案可能是非常规的，但应该对我们有用。

我们将仅以 json 文件形式保留最新的两个快照，如果数据有问题，我们会将存储库翻转为私有。然后，当数据被修复和/或清理到所需的程度时，我们会将其转回公开。

此外，虽然我们可能会按照 AlanBarber 的建议，通过 repo 下载 API 提供完整的快照。

# iis - 为什么 EWL 开发实用程序找不到 Microsoft.Web.Administration 程序集？

> ID：10822722
> 
> 赞同：0
> 
> 时间：2012-05-30T19:11:58.593
> 
> 标签：iis, iis-express, enterprise-web-library

这是错误：

> System.IO.FileNotFoundException：无法加载文件或程序集“Microsoft.Web.Administration，Version=7.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。

收到此错误的计算机安装了 Microsoft.Web.Administration 版本 7.9.0.0，但未安装版本 7.0.0.0。EWL 对此程序集的引用是版本 7.0.0.0，但特定版本 = False。

这可能是 IIS Express 问题吗？我知道 EWL 从未使用 IIS Express 进行过测试。

机器运行的是 Windows XP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T01:55:25.893

Visual Studio 中的“特定版本”仅在构建时使用，而不是在运行时使用，这就解释了为什么 7.9.0.0 版本的程序集没有自动加载。请参阅[https://stackoverflow.com/a/1232955/35349](https://stackoverflow.com/a/1232955/35349)。

计算机上不存在 Microsoft.Web.Administration 7.0.0.0 版本，因为它运行的是 Windows XP，它不包括甚至不支持 IIS 7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:05:25.703

就我而言，我在编写控制台应用程序时无法在 GAC 中找到 Microsoft.Web.Administration。环境：Windows 8、IIS 8、x64。

我浏览到 iis 文件夹，即“C:\Windows\System32\inetsrv”并找到它。

# php - Windows PHP计划任务重启服务不起作用

> ID：10822724
> 
> 赞同：1
> 
> 时间：2012-05-30T19:12:02.947
> 
> 标签：php, windows, scheduled-tasks

PHP 版本 5.2.2.6 操作系统：Windows Server 2003

我正在尝试编写一个 PHP 脚本，该脚本将定期检查几个 Windows 服务并重新启动任何未运行的服务。

1）当我从网络上运行时，脚本可以正常工作。

2）当我作为计划任务运行时，脚本运行但无法启动任何服务。我试图输出到日志文本文件。我看到它报告所有服务都已停止（即使有些不是），为每个服务启动但没有任何反应。当我从 DOS 提示符运行脚本时，结果相同。

我尝试了各种方法来启动服务，我得到了相同的结果。前任：

```
system('net start ApDSCService'); 
```

我也试过这个例子，但结果相同：http: [//hotware.wordpress.com/2008/08/26/restarting-windows-services-in-a-php-script/](http://hotware.wordpress.com/2008/08/26/restarting-windows-services-in-a-php-script/)

我没有升级 PHP 版本的选项，因为它会破坏服务器上托管的其他一些站点。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:21:00.127

更改计划任务中的用户（如果可以，请更改为管理员）

# .net - 正则表达式解析任何非 A \b

> ID：10822725
> 
> 赞同：1
> 
> 时间：2012-05-30T19:12:05.103
> 
> 标签：.net, regex

有一些我需要分解单个单词的文本文件。但是对单词的定义非常宽松。

`\b`似乎正确识别边界，但由于它是零宽度 ^\b 不做任何事情。

我知道 .NET string.parse 可能更快，但我也需要匹配位置。

我最终得到的结果如下所示。当我想打破非零时 ^ 。添加了希望忽略中断的日期、电子邮件和 URL。

我知道该解决方案与我最初的问题陈述不是很接近。它进化了。谢谢大家的帮助。

```
 String line;
pattern = @"\w+@\w+|[01]?\d\/[0123]?\d\/([12]\d)?\d\d|https?:\/\/(?:\w+\.){1,3}\w+|[^\s\.\\///?!()@,]{2,200}";
    while ((line = sr.ReadLine()) != null)
    {
        Debug.WriteLine(line);
        foreach (Match match in Regex.Matches(line, pattern, RegexOptions.IgnoreCase))
        {
            Debug.WriteLine(match.Index.ToString() + " " + match.Value);
        }
        break;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:16:43.957

您需要准确了解`\b`它的作用。请记住，正则表达式无法读取；“单词边界”中的“单词”任意定义为一个或多个字母、数字或下划线。如果你的定义不同，`\b`是没用的。

那么你到底*认为*一个词是什么？查看您更新的问题，我仍然看不到可用的模式。您只想拆分空格和句点吗？

```
pattern = @"(?<=^|[\s.])[^\s.]+(?=[\s.]|$)"; 
```

应用于您的测试字符串：

```
MSCFX package.propertiescu3u bin\exet[p"R`4~fd 
```

...它匹配：

```
MSCFX
package
propertiescu3u
bin\exet[p"R`4~fd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T20:21:30.380

根据[RegexHero](http://regexhero.net/tester/)

```
([^\\b]*) 
```

使用忽略大小写，单行`MSCFX package.propertiescu3u bin\exet[p"R``4~fd`。

![在此处输入图像描述](../Images/cf1a55a1c4a5d7880fbc1e2ab2055692.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T19:50:53.887

没有一个单词边界`\B`会指代相同同类的相邻项目，无论是单词还是非单词。

你似乎想要`\b(\w+|\W+)\b`，因为`((?:\B.\B)+)`会留下相同的结尾字符。

*编辑：*

你更新..

```
You could split with this [^\p{L}] *\p{Z} [^\p{L}]* or use  

(dosen't account for graphines) 
[\s\pP]* ([\pL\pN_-] (?: [\pL\pN_-] | \pP(?=[\pL\pN\pP_-]) )* )
  or
[\s[:punct:]]* (\w (?: \w | [[:punct:]](?=[\w[:punct:]]) )* ) 
```

两者都产

```
'hello'
'world'
'MSCFX'
'package.propertiescu3u'
'bin\exet[p"R4~fd'
'Would'
'like'
'MSCFX'
'package'
'propertiescu3u'
'bin'
'centra'
'exet[p"R4~fd' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T19:23:50.310

`\w`匹配字母、数字和`_`（下划线）。 匹配字符和（非单词字符，） `\b`之间的边界。一个边界（它总是零宽度），所以没有意义。`\w``\W``[^\w]``\B``\B+`

**编辑：** 我仍然无法准确理解您要在哪里拆分单词。

如果您想匹配除`.`（句点）和空格之外的任何内容，请尝试以下**排除**方法：

```
[^.\s]+ 
```

如果要包含特定字符，请尝试以下**包含**方法：

```
[-\w`~!@#$%^&*\[\]()\\\/]+ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T20:14:48.117

为什么不像您的示例那样将字符串拆分为空格、反斜杠和句点？

```
// C#
string str = "MSCFX package.propertiescu3u bin\\exet[p\"R`4~fd"; // note the necessary escapes for \ and " 
var words = Regex.Split(str,@"[ \.\\]"); // split on spaces, periods, and backslashes 
```

# c# - 每张打印多页

> ID：10822731
> 
> 赞同：2
> 
> 时间：2012-05-30T19:12:38.000
> 
> 标签：c#, printing

我试图弄清楚在打印文档时如何在每张纸上打印多个页面。例如，在 Microsoft Publisher 中，如果我有一个 8.5"x5.5" 的文档，我可以设置 Publisher 以每张 2 页打印多个副本，您将在一个 8.5"x11" 页面上看到两个文档。

有谁知道如何做到这一点？我已经查看了[这里](http://www.aspose.com/docs/display/wordsnet/How+to++print+multiple+pages+on+one+sheet)的 MSDN 论坛上也引用了这个[，](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/90e26033-eb5d-4460-ad51-75629724a460)但除非我使用 Aspose.Words Document 对象，否则该示例并没有真正的帮助。任何帮助，将不胜感激。

# arrays - 使用 JNA 将包含双精度数组的结构从 Java 传递到 C

> ID：10822733
> 
> 赞同：0
> 
> 时间：2012-05-30T19:12:51.240
> 
> 标签：arrays, struct, jna, primitive

我有一个 C 函数，它需要一个包含双精度数组的结构：

```
typedef struct ArrayHolder {
    int numVals;
    double* vals;
} ArrayHolder;

void putArrayHolder(ArrayHolder* holder); 
```

我试图在Java中处理这个

```
public interface CLibrary extends Library {
    public static class ArrayHolder extends Structure {
        public static class ByValue extends ArrayHolder implements Structure.ByValue {}
        public static class ByReference extends ArrayHolder implements Structure.ByReference {}

        public int numVals;
        public double[] vals;
    }

    void putArrayHolder(ArrayHolder.ByReference holder);
}

...

CLibrary.ArrayHolder.ByReference holderRef = new CLibrary.ArrayHolder.ByReference();
holderRef.numVals = 3;
holderRef.vals = new double[3];
holderRef[0] = 1;
holderRef[1] = 2;
holderRef[2] = 3;
clib.putArrayHolder(holderRef); 
```

不幸的是，上面的 Java 代码导致 C 函数接收到损坏的数据——“numVals”值似乎正常，但“vals”数组已损坏。

我在这里想念什么？在 Java 中设置这种结构（包含原始数组）以便通过 JNA 将其传递给 C 函数的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:52:03.023

您的结构不包含原始数组。它包含一个指向 double 的指针，该指针被分配了一个 double 数组的地址。

您的`vals`字段必须是指针类型（名义上`Pointer`）。然后，您可以使用您选择的 NIO 缓冲区或`com.sun.jna.Memory`为双精度数组分配空间。

# java - 格式化日期异常

> ID：10822734
> 
> 赞同：0
> 
> 时间：2012-05-30T19:12:52.540
> 
> 标签：java, date, simpledateformat

我不知道为什么会收到此异常：

> 05-30 12:51:58.490：E/AndroidRuntime(3098)：致命异常：主要 05-30 12:51:58.490：E/AndroidRuntime(3098)：java.lang.IllegalArgumentException 05-30 12:51:58.490： E/AndroidRuntime(3098): 在 java.text.DateFormat.format(DateFormat.java:365) 05-30 12:51:58.490: E/AndroidRuntime(3098): 在 java.text.Format.format(Format.java :93) 05-30 12:51:58.490: E/AndroidRuntime(3098): 在 it.bloomp.helper.DateHelper.getDay(DateHelper.java:49) 05-30 12:51:58.490: E/AndroidRuntime(3098 ): 在 it.bloomp.helper.DateHelper.formatListViewItemDate(DateHelper.java:16) 05-30 12:51:58.490: E/AndroidRuntime(3098): 在 it.bloomp.list.EventsListAdapter.getView(EventsListAdapter.java: 58) 05-30 12:51:58.490: E/AndroidRuntime(3098): 在 android.widget.AbsListView.obtainView(AbsListView.java:2033) 05-30 12:51:58.490:E/AndroidRuntime(3098): 在 android.widget.ListView.measureHeightOfChildren(ListView.java:1244) 05-30 12:51:58.490: E/AndroidRuntime(3098): 在 android.widget.ListView.onMeasure(ListView.java :1155) 05-30 12:51:58.490: E/AndroidRuntime(3098): 在 android.view.View.measure(View.java:12723) 05-30 12:51:58.490: E/AndroidRuntime(3098):在 android.widget.RelativeLayout.measureChild(RelativeLayout.java:579) 05-30 12:51:58.490: E/AndroidRuntime(3098): 在 android.widget.RelativeLayout.onMeasure(RelativeLayout.java:392) 05-30 12 :51:58.490: E/AndroidRuntime(3098): 在 android.view.View.measure(View.java:12723) 05-30 12:51:58.490: E/AndroidRuntime(3098): 在 android.view.ViewGroup。 measureChildWithMargins(ViewGroup.java:4698) 05-30 12:51:58.490: E/AndroidRuntime(3098): 在 android.widget.FrameLayout。onMeasure(FrameLayout.java:293) 05-30 12:51:58.490: E/AndroidRuntime(3098): 在 android.view.View.measure(View.java:12723) 05-30 12:51:58.490: E/ AndroidRuntime(3098): 在 android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698) 05-30 12:51:58.490: E/AndroidRuntime(3098): 在 android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369 ) 05-30 12:51:58.490: E/AndroidRuntime(3098): 在 android.widget.LinearLayout.measureVertical(LinearLayout.java:660) 05-30 12:51:58.490: E/AndroidRuntime(3098): 在 android .widget.LinearLayout.onMeasure(LinearLayout.java:553) 05-30 12:51:58.490: E/AndroidRuntime(3098): 在 android.view.View.measure(View.java:12723) 05-30 12:51 :58.490: E/AndroidRuntime(3098): 在 android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698) 05-30 12:51:58.490:E/AndroidRuntime(3098): 在 android.widget.FrameLayout.onMeasure(FrameLayout.java:293) 05-30 12:51:58.490: E/AndroidRuntime(3098): 在 com.android.internal.policy.impl.PhoneWindow $DecorView.onMeasure(PhoneWindow.java:2092) 05-30 12:51:58.490: E/AndroidRuntime(3098): 在 android.view.View.measure(View.java:12723) 05-30 12:51:58.490 : E/AndroidRuntime(3098): 在 android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1064) 05-30 12:51:58.490: E/AndroidRuntime(3098): 在 android.view.ViewRootImpl.handleMessage(ViewRootImpl. java:2442) 05-30 12:51:58.490: E/AndroidRuntime(3098): 在 android.os.Handler.dispatchMessage(Handler.java:99) 05-30 12:51:58.490: E/AndroidRuntime(3098) : 在 android.os.Looper.loop(Looper.java:137) 05-30 12:51:58.490: E/AndroidRuntime(3098): 在 android.app.ActivityThread。main(ActivityThread.java:4424) 05-30 12:51:58.490: E/AndroidRuntime(3098): at java.lang.reflect.Method.invokeNative(Native Method) 05-30 12:51:58.490: E/AndroidRuntime (3098): 在 java.lang.reflect.Method.invoke(Method.java:511) 05-30 12:51:58.490: E/AndroidRuntime(3098): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller。运行（ZygoteInit.java:784）05-30 12:51:58.490：E/AndroidRuntime（3098）：在 com.android.internal.os.ZygoteInit.main（ZygoteInit.java:551）05-30 12:51： 58.490：E/AndroidRuntime（3098）：在 dalvik.system.NativeStart.main（本机方法）E/AndroidRuntime(3098): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 05-30 12:51:58.490: E/AndroidRuntime(3098): 在 com.android.internal .os.ZygoteInit.main(ZygoteInit.java:551) 05-30 12:51:58.490: E/AndroidRuntime(3098): at dalvik.system.NativeStart.main(Native Method)E/AndroidRuntime(3098): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 05-30 12:51:58.490: E/AndroidRuntime(3098): 在 com.android.internal .os.ZygoteInit.main(ZygoteInit.java:551) 05-30 12:51:58.490: E/AndroidRuntime(3098): at dalvik.system.NativeStart.main(Native Method)

```
package it.bloomp.helper;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;

public class DateHelper {

    public String formatListViewItemDate(String dateString) {
        SimpleDateFormat simpleDateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        Calendar date = Calendar.getInstance();

        try {
            date.setTime(simpleDateFormat.parse(dateString));
            String day = getDay(date);
            String weekDay = getWeekDay(date);
            String month = getMonth(date);
            String year = getYear(date);

            Calendar now = Calendar.getInstance();

            if (date.get(Calendar.YEAR) == now.get(Calendar.YEAR)) {
                if (date.before(now)) {
                    return "agora";
                } else if (date.get(Calendar.DAY_OF_YEAR) == now.get(Calendar.DAY_OF_YEAR)) {
                    return "hoje";
                } else if (date.getTimeInMillis() - now.getTimeInMillis() < 86400000) {
                    return "amanhã";
                } else if (date.get(Calendar.WEEK_OF_YEAR) == now.get(Calendar.WEEK_OF_YEAR)) {
                    return weekDay;
                } else if (date.get(Calendar.MONTH) == now.get(Calendar.MONTH)) {
                    return weekDay + " " + day;
                } else {
                    return month + " " + day;
                }
            } else {
                return year + " " + month;
            }
        } catch (ParseException e) {
            e.printStackTrace();
        }

        return null;
    }

    public String getDay(Calendar date) {
        SimpleDateFormat simpleDateFormat = new SimpleDateFormat("dd");
        return simpleDateFormat.format(date);
    }

    public String getWeekDay(Calendar date) {
        if (date.get(Calendar.DAY_OF_WEEK) == 0) {
            return "dom";
        } else if (date.get(Calendar.DAY_OF_WEEK) == 1) {
            return "seg";
        } else if (date.get(Calendar.DAY_OF_WEEK) == 2) {
            return "ter";
        } else if (date.get(Calendar.DAY_OF_WEEK) == 3) {
            return "qua";
        } else if (date.get(Calendar.DAY_OF_WEEK) == 4) {
            return "qui";
        } else if (date.get(Calendar.DAY_OF_WEEK) == 5) {
            return "sex";
        } else if (date.get(Calendar.DAY_OF_WEEK) == 6) {
            return "sab";
        }

        return null;
    }

    public String getMonth(Calendar date) {
        if (date.get(Calendar.MONTH) == 0) {
            return "jan";
        } else if (date.get(Calendar.MONTH) == 1) {
            return "fev";
        } else if (date.get(Calendar.MONTH) == 2) {
            return "mar";
        } else if (date.get(Calendar.MONTH) == 3) {
            return "abr";
        } else if (date.get(Calendar.MONTH) == 4) {
            return "mai";
        } else if (date.get(Calendar.MONTH) == 5) {
            return "jun";
        } else if (date.get(Calendar.MONTH) == 6) {
            return "jul";
        } else if (date.get(Calendar.MONTH) == 7) {
            return "ago";
        } else if (date.get(Calendar.MONTH) == 8) {
            return "set";
        } else if (date.get(Calendar.MONTH) == 9) {
            return "out";
        } else if (date.get(Calendar.MONTH) == 10) {
            return "nov";
        } else if (date.get(Calendar.MONTH) == 11) {
            return "dez";
        }

        return null;
    }

    public String getYear(Calendar date) {
        SimpleDateFormat simpleDateFormat = new SimpleDateFormat("yyyy");
        return simpleDateFormat.format(date);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T19:24:05.870

该`DateFormat.format()`方法将`Date`对象作为参数，而不是`Calendar`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:30:25.670

正如@Michael 所说，您正在将一个 Calendar 对象传递给一个需要 Date 对象的方法。这是 java.text.Format 类设计的一个不幸的副作用。它有一个名为 format 的方法，它接受一个对象。这可能是您的编辑器/编译器不抱怨的原因。修改您的代码以通过调用 getTime() 从日历中获取 Date 对象。例如：

```
public String getDay(Calendar date) {
    SimpleDateFormat simpleDateFormat = new SimpleDateFormat("dd");
    return simpleDateFormat.format(date.getTime());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T19:30:28.640

`date.get(Calendar.DAY_OF_MONTH)`如果小于 10，您不认为只使用并在前面附加一个“0”会更容易吗？`SimpleDateFormat`有点贵。

# html - 我们可以在我的网站上阻止移动设备上的“横向”视图吗？

> ID：10822739
> 
> 赞同：0
> 
> 时间：2012-05-30T19:13:03.097
> 
> 标签：html, mobile

我希望访问者只能在手机上以纵向视图查看网站，这样即使他们翻转手机，页面也不会翻转。

那可能吗 ？

下面的这篇文章似乎问了同样的事情，但他想要一个切换它的选项，但我没有。仅纵向视图

[如何在 HTML5 的移动浏览器上将浏览器视图限制为横向？](https://stackoverflow.com/questions/8292520/how-to-restrict-browser-view-to-landscape-on-a-mobile-browser-in-html5)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:32:19.267

抱歉不行。页面的翻转是本机处理的，不能被覆盖。根据您的目标设备，研究如何响应`window.orientation`.

# c# - 尝试 pinvoke 和 sxs。上下文被忽略并使用第一个 dll

> ID：10822740
> 
> 赞同：0
> 
> 时间：2012-05-30T19:13:06.287
> 
> 标签：c#, pinvoke, winsxs, sxs

我有两个不同版本的非托管 dll 和每个版本的清单。在我的 C# 代码中，我使用激活上下文来控制使用哪一个。然后我使用 P Invoke 进行实际调用。看来激活上下文的创建和激活是成功的。但是，上下文似乎被忽略了，无论哪个 dll 首先被调用，两者都使用。

P Invoke 可以与 SxS 一起使用吗？还是我设置不正确？

我在 C# 代码中对 C 函数的定义是：

```
[DllImport("MyMath.dll")]
private static extern double Add(double a, double b); 
```

我的清单只有我添加的程序集标识，以及 Visual Studio 2010 生成的 trustInfo。

```
<?xml version='1.0' encoding='UTF-8' standalone='yes'?>
<assembly xmlns='urn:schemas-microsoft-com:asm.v1' manifestVersion='1.0'>
    <assemblyIdentity name="MyMath.dll"
                   version="1.1.0.0"
                   type="win32"
                   processorArchitecture="x86"/>
    <trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
      <security>
        <requestedPrivileges>
          <requestedExecutionLevel level='asInvoker' uiAccess='false' />
        </requestedPrivileges>
      </security>
    </trustInfo>
</assembly> 
```

谢谢您的帮助。

-缺口

# python - 未处理的异常 Django

> ID：10822741
> 
> 赞同：0
> 
> 时间：2012-05-30T19:13:09.500
> 
> 标签：python, django, settings, unhandled-exception

尝试使用 FastCGI 在 Hostgator 上设置 django 应用程序 ( [Snapboard](https://github.com/johnboxall/snapboard)`Unhandled Exception` )，但在运行 syncdb 后出现错误。

非常感谢任何关于为什么会导致此问题或如何解决此问题的想法

* * *

警告：

该应用程序设置为在 Django 1.0 上运行，但 Django 1.3 已经安装，因此尝试使用它。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:34:32.203

实际上，事实证明我的问题是尝试使用 Hostgator 来设置 django。如果您有经销商帐户，则不会授予您 ssh 的 root 访问权限，因此我无法成功运行`install`并为应用程序创建依赖项。

我只是要去另一条路。只是让大家知道使用 hostgator 的“经销商”帐户存在这些困难。显然，他们托管在专用服务器上的计划结构不同，但我在尝试在“经销商”帐户结构下工作时遇到了很多问题。

# grails - 为什么 Grails Spring Security 通道安全性将我的控制器名称替换为“grails”？

> ID：10822744
> 
> 赞同：1
> 
> 时间：2012-05-30T19:13:13.407
> 
> 标签：grails, https, spring-security, grails-plugin

注意我使用的是 Grails 2.0.4 和 spring security core plugin 1.2.7.2

这似乎是一个错误，但我想确保我首先正确地做事。基本上，我希望某些 URL 使用 HTTPS 保护，而其余的则不是，这似乎很标准。如果用户访问非安全 URL，我不希望他们停留在 HTTPS 上。一切正常，直到我添加这一行来完成最后一点：

```
 '/**':          'REQUIRES_INSECURE_CHANNEL' 
```

此时由于某种原因，我所有的安全控制器名称都被“grails”重写，事情变得非常糟糕。例如，如果我去

```
http://localhost:8080/login/index 
```

它成为了

```
http://localhost:8080/grails/auth/index.dispatch 
```

（“grails”不是我的应用程序的名称，我也没有任何名为“grails”的控制器 - 我的应用程序在根目录下运行）

如果我删除根通配符的那个条目，一切正常，我不再在我的 URL 中得到那个奇怪的“grails”，尽管我在我想要保护的页面之外的 https 上停留。

这是我的完整配置。请注意，安全页面不会尝试加载我可以看到的任何不安全资源，只会加载在“ANY_CHANNEL”下定义的内容

```
grails.plugins.springsecurity.secureChannel.definition = [
        '/login/**':         'REQUIRES_SECURE_CHANNEL',
        '/register/**':         'REQUIRES_SECURE_CHANNEL',
        '/changePassword/**':         'REQUIRES_SECURE_CHANNEL',
        '/userAccountManagement/**':    'REQUIRES_SECURE_CHANNEL',

        '/simpleCaptcha/**': 'ANY_CHANNEL',
        '/img/**':        'ANY_CHANNEL',
        '/images/**':        'ANY_CHANNEL',
        '/static/**':        'ANY_CHANNEL',

        '/**':          'REQUIRES_INSECURE_CHANNEL'  //remove this, everything OK

] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T23:26:13.310

URI来自`/grails/controller/action.dispatch`Grails URL 映射机制。Grails 中的 URL 映射由 servlet 过滤器实现，该过滤器将请求（在 RequestDispatcher 意义上）转发到`/grails`URI，而正是这些过滤器驱动 DispatcherServlet。

我怀疑这里发生的事情`/**`是导致通道安全过滤器在这些转发的请求 URI 以及原始的预映射 URI 上触发。`/grails/**`如果您在规则前面放置一个明确的 ANY_CHANNEL 是否有效`/**`？

# ruby - 为什么在 Ruby 中使用负位置值进行切片不能按预期工作？

> ID：10822748
> 
> 赞同：0
> 
> 时间：2012-05-30T19:13:28.713
> 
> 标签：ruby

我正在学习 Ruby 教程（只是为了欢呼和咯咯笑），在尝试其中一个示例时，这种行为让我感到意外：

```
s = "hello"
s[1, 2]          # => "el"
s[1 .. 2]        # => "el"
s[-4 .. -3]      # => "el"
s[-4, -3]        # => nil ... but why? 
```

我原以为最后一行会产生与前一行相同的结果。毕竟它以正切片值的方式工作。我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T19:20:02.693

因为切片的负长度没有意义。slice 方法采用索引，或索引范围，或开始和长度。

```
s[-4 .. -3] # here you're passing the slice method a range of numbers
s[-4, -3]   # here you're passing the slice method: start = -4, length = -3

s[-4, 2] => "el" 
```

[String 类的 slice 方法的文档](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-slice)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T19:21:05.803

`a[x, y]`是“`y`元素来自`a`，开始于`x`”

`a[x..y]`是“元素从`x`到`y`从`a`”

如果你试试这个，你会发现正数也不匹配——你只是巧合了：

```
a = [1, 2, 3, 4, 5, 6]
a[3, 2]   # [4, 5] (i.e. two elements from a, starting from the third)
a[3..2]   # []     (i.e. elements from third to second, from a) 
```

# objective-c - for 循环通过 fetchedResultsController

> ID：10822749
> 
> 赞同：0
> 
> 时间：2012-05-30T19:13:29.473
> 
> 标签：objective-c, core-data, nsfetchedresultscontroller, nsfetchrequest

我需要遍历一个 fetchedResultsController 但有一些问题。这是代码；

```
for (NSFetchedResultsController *singleResult in _fetchedResultsController) {
    //For logic
} 
```

警告是；

```
Collection expression type 'NSFetchedResultsController *' may not respond to 'countByEnumeratingWithState:objects:count:' 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T19:15:40.527

您需要访问可`_fetchedResultsController`迭代类型的成员，例如`NSArray`or `NSSet`。例如，`NSFetchedResultsController`有一个名为的属性`fetchedObjects`是`NSArray`. 我怀疑这是您要访问的数组。我不是很熟悉`NSFetchedResultsController`，但[这里](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html)有一个指向类参考的链接，它应该可以帮助你完成剩下的工作

# google-maps - 带有谷歌地图的jquery mobile没有高度

> ID：10822751
> 
> 赞同：1
> 
> 时间：2012-05-30T19:13:33.150
> 
> 标签：google-maps, jquery-mobile

我正在尝试将谷歌地图合并到一个简单的 jquery 移动应用程序中。我可以使用 jqm 中的 pageinit 事件创建地图。html 像应有的那样附加到我的容器 div 中，但高度结果为 0。我希望地图是屏幕区域的 100%。

```
<!DOCTYPE html> 
<html> 
<head> 
<title>Page Title</title> 

<meta name="viewport" content="width=device-width, initial-scale=1"> 

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js">    </script>

<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
</head> 
<body> 

<div data-role="page" id="indexPage" data-add-back-btn="true">

<div data-role="header">
    <a href='#' class='ui-btn-left ui-btn-back' data-icon='arrow-l'>Back</a>
    <h1>Page Title</h1>
    <a href="index.html" data-icon="gear" class="ui-btn-right">Refine</a>
</div>

    <div id="map_canvas" style="width:100%;height:100%;"></div> 

<div data-role="footer" data-position="fixed">
    <h4>Page Footer</h4>
</div>
</div>

<script>
$( '#indexPage' ).live( 'pageinit',function(event){
    var myOptions = {
        zoom: 11,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var mapElement = $("#map_canvas");      

    var map = new google.maps.Map(mapElement[0], myOptions);
});
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T19:43:27.683

我建议您在页面加载时添加一个函数来计算它：

```
<script  type="text/javascript">
$(document).delegate('#indexPage', 'pageshow', function () {
    var height = ($(window).height() - $("#indexPage").find('[data-role="header"]').outerHeight() - $("#indexPage").find('[data-role="footer"]').outerHeight());
    $("#map_canvas").height(height);
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-16T08:44:45.993

计算并设置如下： `$("#map_canvas").height(screen.height);`

或者

确保每个祖先的 DOM 父级`#map_canvas`都设置了高度，因为这`height:100%`意味着 100% 的父级。

JQM 1.3 的 CSS 示例：

```
#page-id,
#page-id .ui-panel-content-wrap,    
#page-id #content-id,
#map-canvas{
  width: 100%;
  height: 100%;      
} 
```

JQM 1.4 alpha2 的 css 示例：

```
#page-id,
#page-id #content-id,
#page-id .ui-panel-wrapper,
#map-canvas{
  width: 100%;
  height: 100%;      
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T22:25:59.697

它非常简单 - 只需添加这个 css

```
<style>
    #indexPage {
        height: 0;
    }

    #map_canvas {
        height: 100%;
        padding: 0;
        text-shadow: none;
    }
</style> 
```

# vhdl - 相同位的串联

> ID：10822753
> 
> 赞同：1
> 
> 时间：2012-05-30T19:13:42.970
> 
> 标签：vhdl

我正在编写一个简单的 vga 控制器，我发现自己一次又一次地重复相同的模式。我怎样才能避免这种情况。

```
red_out <= zero(x-106,y-63)&zero(x-106,y-63)&zero(x-106,y63)&zero(x-106,y-63);
green_out <= zero(x-106,y-63)&zero(x-106,y-63)&zero(x-106,y-63)&zero(x-106,y-63);
blue_out <= zero(x-106,y-63)&zero(x-106,y-63)&zero(x-106,y-63)&zero(x-106,y-63); 
```

也许一个命令可以帮助我避免重复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:57:57.363

*   要替换表达式`zero(x-106,y-63)&zero(x-106,y-63)&zero(x-106,y63)&zero(x-106,y-63)`，请使用**函数**。然后代码看起来像`red_out<=f(zero, x, y);`等。
*   要替换所有三个语句，请使用**procedure**。然后代码看起来像`p(red_out, green_out, blue_out, zero, x, y)`.

检查[http://www.csee.umbc.edu/portal/help/VHDL/design.html](http://www.csee.umbc.edu/portal/help/VHDL/design.html)的语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T08:41:10.377

如果您的向量接收到一个相同的单个位的副本，那么以下代码将执行此操作，并且比诉诸函数更简单：

```
red_out   <= (others => zero(x-106,y-63));
green_out <= (others => zero(x-106,y-63));
blue_out  <= (others => zero(x-106,y-63)); 
```

甚至

```
my_bit    <= zero(x-106,y-63);
red_out   <= (others => my_bit);
green_out <= (others => my_bit);
blue_out  <= (others => my_bit); 
```

# jquery - jQuery 使一个 div 出现在一个对象后面并返回到它的效果

> ID：10822756
> 
> 赞同：2
> 
> 时间：2012-05-30T19:13:55.413
> 
> 标签：jquery

我有一个包含一堆句子的 div 和另一个包含图像的 div。当盘旋在太阳上时，我想让词从太阳后面出来，盘旋出去，回到太阳里。我没有得到预期的效果`.show()`and `.hide()`。当太阳盘旋时，这些词将继续旋转。

这是图片。

![在此处输入图像描述](../Images/42b4e3d6426339e866bad9499b23d7cf.png)

我正在尝试使用工具，而当悬停时，单词会从太阳中心从后面出现，反之亦然。

知道如何实现上述效果吗？这是我当前的代码。非常感谢！

```
$sun.hover(function(e) {
    $txt.show('slow');

    // text rotation
    var counter = 0;
    clearInterval(interval);
    interval = setInterval(function() {
        if (counter != -360) {
            counter -= 1;
            $txt.css({
                MozTransform: 'rotate(-' + -counter + 'deg)',
                WebkitTransform: 'rotate(-' + -counter + 'deg)',
                transform: 'rotate(-' + -counter + 'deg)',
            });
        }
    }, 20);

}, function(e) {
    clearInterval(interval);
    $txt.hide('slow');

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:54:05.770

使用 css3 `background-size`：

## *[jsBin 演示](http://jsbin.com/imehum/edit#javascript,html,live)*

```
var $sun = $('#sun');
var $txt = $('#text');
var intvl;
var c = 0;

    $sun.hover(function(e){

        clearInterval(intvl);
        intvl = setInterval(function() {
            if (c != -360) {
                c += 1;
                $txt.css({
                    MozTransform: 'rotate(-'+c+'deg)',
                    WebkitTransform: 'rotate(-'+c+'deg)',
                    transform: 'rotate(-'+c+'deg)'
                });
            }
        }, 20);
      $txt.stop().animate({backgroundSize:'100%', opacity:'1'},700);
    }, function(){
        clearInterval(intvl);
        $txt.stop().animate({backgroundSize:'60%', opacity:'0.1'},400);
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:56:14.947

**z-index**属性在这里可能很有用。

在下面的简单示例中，文本最初设置在图像后面。当鼠标悬停在图像上时，文本的 z-index 值会*向上移动*。

```
<html>
<head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script> 
    <script type="text/javascript">
       function showCaption(){
          $(".caption").css("z-index","3");
       }
       function hideCaption(){
          $(".caption").css("z-index","1");
       }
    </script>

    <style type="text/css">
        #container{ position:relative; }
        .image{ position:fixed; top:0px; left:0px; z-index:2; }
        .caption{ position:fixed; top:0px; left:0px; z-index:1; }
    </style>
</head>

<body>
    <div id="container">
        <div class="image" onmouseover="showCaption();" onmouseout="hideCaption();">
            <img src="bill-gates-ms.jpg" />
        </div>
        <div class="caption">
            Some text here and here.
        </div>
    </div>

</body>
</html> 
```

# python - 使用reportlab将图形和表格列表添加到目录

> ID：10822757
> 
> 赞同：0
> 
> 时间：2012-05-30T19:14:03.923
> 
> 标签：python, reportlab, tableofcontents

我是最新的 reportlab 和 django，带有通知“TOCEntry”的标准鸭嘴兽 TOC 非常适合我的文档。

我现在正尝试在目录中再添加 2 个部分：“图表列表”和“表格列表”。由于文档中的 flowables h1、h2、表格、图像等可以按任何顺序出现，我似乎无法将这两个列表与主 TOC 分开。理想情况下，我想要类似的东西：

```
Table of Content:

Heading1
  Sub1
  Sub2
Heading2
  Sub3
  Sub4
  Sub5

List of Figures:
  Figure1
  Figure2

List of Tables:
  Table1
  Table2 
```

据我了解，“TOCEntry”是查找的标签，使用 AfterFlowable 最终会将所有可流动对象按照实际文档中所示的顺序放置。这不是我想要的。任何让 TOC 看起来有点像上面描述的指针都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T21:47:17.733

I figured that the simplest approach was to subclass TOCs, and add afterFlowable catchers for them in the docTemplate.

```
class MyDocTemplate(BaseDocTemplate):  
     def __init__(self, filename, **kw):  
         self.allowSplitting = 0  
         apply(BaseDocTemplate.__init__, (self, filename), kw)  
         template = PageTemplate('normal', [Frame(1*inch, 1*inch, 6.5*inch, 9.5*inch, id='F1')])
         self.addPageTemplates(template)  

     def afterFlowable(self, flowable):  
         "Registers TOC entries."  
         if flowable.__class__.__name__ == 'Paragraph':  
             text = flowable.getPlainText()  
             style = flowable.style.name  

             if style == 'reportHeading1':
                 toc_el = [ 0, text, self.page ] # basic elements
                 toc_bm = getattr(flowable, '_bookmarkName', None) # bookmark for links
                 if toc_bm: 
                     toc_el.append( toc_bm )
                 self.notify('TOCEntry', tuple(toc_el) )

             elif style == 'reportHeading2':  
                 toc_el = [ 1, text, self.page ] # basic elements
                 toc_bm = getattr(flowable, '_bookmarkName', None) # bookmark for links
                 if toc_bm: 
                     toc_el.append( toc_bm )
                 self.notify('TOCEntry', tuple(toc_el) )

             elif style == 'TableTitleStyle':
                 toc_el = [ 1, text, self.page ] # basic elements
                 toc_bm = getattr(flowable, '_bookmarkName', None) # bookmark for links
                 if toc_bm: 
                     toc_el.append( toc_bm )
                 self.notify('TOCTable', tuple(toc_el) )

             elif style == 'GraphicTitleStyle':
                 toc_el = [ 1, text, self.page ] # basic elements
                 toc_bm = getattr(flowable, '_bookmarkName', None) # bookmark for links
                 if toc_bm: 
                     toc_el.append( toc_bm )
                 self.notify('TOCFigure', tuple(toc_el) ) 
```

Secondary Tables of Content for Figures and Tables:

```
class ListOfFigures(TableOfContents):
    def notify(self, kind, stuff):
        """ The notification hook called to register all kinds of events.
            Here we are interested in 'Figure' events only.
        """
        if kind == 'TOCFigure':
            self.addEntry(*stuff)

class ListOfTables(TableOfContents):
    def notify(self, kind, stuff):
        """ The notification hook called to register all kinds of events.
            Here we are interested in 'Table' events only.
        """
        if kind == 'TOCTable':
            self.addEntry(*stuff) 
```

And then finally in the doc generation process. I would add the instances of ListOfTables and ListOfFigures after the standard TOC to have it look like they are somewhat related in the actual pdf.

# javascript - Android - 文本输入未使用自定义验证插件进行验证

> ID：10822758
> 
> 赞同：5
> 
> 时间：2012-05-30T19:14:08.573
> 
> 标签：javascript, jquery, android, input

我正在开发[这个插件](https://github.com/elclanrs/jq-idealforms)，我收到了一个错误报告，说 Android 2.3 存在一些问题。

我下载了 Android SDK，并在 2.3 中尝试了该插件，但似乎发生的情况是文本输入未验证并且错误未显示或出现错误。其他输入验证良好。我在 Android 4.0+ 中尝试过，似乎工作正常。我不知道从哪里开始，因为我不知道问题出在哪里，而且我没有真正的 Android 手机来调试这些东西，而且模拟器缺乏开发工具和东西。

我怀疑在这里发布代码转储会有所帮助，但这是`validate()`可以在`js/idealforms.js`. “错误”必须来自此处或该文件中的其他位置，除非与 CSS 相关，我不这么认为。

```
/** Validates an input
 * @memberOf Actions
 * @param {object} input Object that contains the jQuery input object [input.input]
 * and the user options of that input [input.userOptions]
 * @param {string} value The value of the given input
 * @returns {object} Returns [isValid] plus [error] if it fails
 */
validate: function (input, value) {

  var isValid = true,
      error = '',
      $input = input.input,
      userOptions = input.userOptions,
      userFilters = userOptions.filters

  if (userFilters) {

    // Required
    if (!value && /required/.test(userFilters)) {
      error = (
        userOptions.errors && userOptions.errors.required
          ? userOptions.errors.required
          : 'This field is required.'
      )
      isValid = false
    }

    // All other filters
    if (value) {
      userFilters = userFilters.split(/\s/)
      for (var i = 0, len = userFilters.length; i < len; i++) {
        var uf = userFilters[i],
            theFilter = typeof Filters[uf] === 'undefined' ? '' : Filters[uf],
            isFunction = typeof theFilter.regex === 'function',
            isRegex = theFilter.regex instanceof RegExp
        if (
          theFilter && (
            isFunction && !theFilter.regex(input, value) ||
            isRegex && !theFilter.regex.test(value)
          )
        ) {
          isValid = false
          error = (
            userOptions.errors && userOptions.errors[uf] ||
            theFilter.error
          )
          break
        }
      }
    }

  }

  return {
    isValid: isValid,
    error: error
  }
} 
```

有人可以帮我吗？我想让这个插件在尽可能多的平台上工作，但如果没有真正的 Android 手机就很难做到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T00:08:23.353

那是当前的代码吗？

我无法指出任何会导致您的问题的具体内容，但有时这些类型的错误是由特定浏览器版本中的怪癖引起的，所以我会检查一些事情：

(1) 我知道分号在 Javascript 中被认为是“可选的”，但如果你不包括它们，我已经看到一些浏览器（尤其是移动浏览器 - 这是从经验中学到的）古怪的行为。我会在每条语句之后添加它们。

(2) 我看到你在这里引用了一个 Filters 变量：

```
 theFilter = typeof Filters[uf] === 'undefined' ? '' : Filters[uf], 
```

您的意思是 userFilters ... 还是 Filters 是此处未显示的全局变量？

(3) 本变量声明：

```
$input = input.input, 
```

您真的要调用变量 $input 吗？它不在任何地方使用。

(4) 当你使用 && 和 || 我将一起通过括号明确指出分组：

```
if (
      theFilter && (
        isFunction && !theFilter.regex(input, value) ||
        isRegex && !theFilter.regex.test(value)
      )
    )

  error = (
    userOptions.errors && userOptions.errors[uf] ||
    theFilter.error
  ) 
```

希望这可以帮助。

# javascript - Android Emulator 上的 Titanium 上下文问题

> ID：10822764
> 
> 赞同：0
> 
> 时间：2012-05-30T19:14:33.153
> 
> 标签：javascript, android-emulator, titanium, titanium-mobile

我正在运行一个在我的 iOS 模拟器中运行良好的应用程序，但是它在我的 Android 模拟器上崩溃了，因为它说我没有定义一个变体。

这是我的示例代码：

```
/*app.js*/
var myApp = {};
myApp.ui = require("ui");
myApp.ui.createAppTabGroup.open();

/*ui.js*/
function createAppTabGroup() {
    var tabGroup = Titanium.UI.createTabGroup();
    myApp.fugitivesTab = Titanium.UI.createTab({
    title: L('fugitives'),
        window: fugitives
    });
}; 
```

我在创建 require("ui") 之前声明了“var myApp”，所以它应该可以正常工作，事实上，它可以在 iOS 模拟器上运行，但在 Android 中说“myApp 未在行中定义`xx myApp.fugitivesTab = Titanium.UI.createTab({"`

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:20:33.387

问题（或优势）`require()`是，它失去了它的背景。

为此，您必须在 ui.js 中再次重新定义 myApp，或者将其传递给函数

你能做的最好的就是只使用 require ，当它不需要任何来自外部的东西时，否则你将不得不像这样给函数本身提供任何东西：

```
myApp.ui.createAppTabGroup.open(myApp);

function createAppTabGroup(myApp) { 
```

但这可能不是您想要的。

尝试这样做：

```
/* ui.js */
myApp.ui.createAppTabGroup = function() {

/*app.js*/ 
Ti.include('ui.js');
/* CODE HERE */
myApp.ui.createAppTabGroup.open 
```

# c++ - 如何将 IcmpSendEcho2 与 PIO_APC_ROUTINE 一起使用？

> ID：10822771
> 
> 赞同：0
> 
> 时间：2012-05-30T19:15:11.360
> 
> 标签：c++, winapi, asynchronous, ping, icmp

我是一个 c++ 新手，我正在尝试用[IcmpSendEcho2](http://msdn.microsoft.com/en-us/library/aa366051%28v=vs.85%29)制作一个“ping 工具”，但我无法让它与 APC 一起使用。

我遇到了这个编译错误：

```
>error C2220: warning treated as error - no 'object' file generated
>warning C4191: 'type cast' : unsafe conversion from 'PIO_APC_ROUTINE (__cdecl *)(PVOID,PIO_STATUS_BLOCK,ULONG)' to 'PIO_APC_ROUTINE'
>          Calling this function through the result pointer may cause your program to fail 
```

这是我的 APC 声明：

```
PIO_APC_ROUTINE GotIt(PVOID param, PIO_STATUS_BLOCK IoStatusBlock, ULONG Reserved); 
```

这是我的 APC 定义：

```
PIO_APC_ROUTINE GotIt(PVOID param, PIO_STATUS_BLOCK IoStatusBlock, ULONG Reserved)
{
    printf("GOT IT!\n");
    return NULL;
} 
```

这就是我制作 IcmpSendEcho2 的方式：

```
DWORD dwRetVal = IcmpSendEcho2(hIcmpFile, NULL, (PIO_APC_ROUTINE) GotIt, NULL,
                     ipaddr, SendData, sizeof (SendData), NULL,
                     ReplyBuffer, ReplySize, 1000); 
```

我以为 '(PIO_APC_Rountine) GotIt' 会这样做，因为我找到[了这个](http://social.msdn.microsoft.com/Forums/zh/vcgeneral/thread/a2239425-fef4-45ed-b188-59a9c5f4a58e)，但显然我错过了一些东西。

如果您需要任何其他信息，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T19:21:56.227

首先，[不要强制转换回调函数](http://blogs.msdn.com/b/oldnewthing/archive/2011/05/06/10161590.aspx)。**曾经**。

二、`PIO_APC_ROUTINE`声明为：

```
typedef
VOID
(NTAPI *PIO_APC_ROUTINE) (
    IN PVOID ApcContext,
    IN PIO_STATUS_BLOCK IoStatusBlock,
    IN ULONG Reserved
    ); 
```

所以你的`GotIt`功能应该是：

```
VOID NTAPI GotIt(
    IN PVOID ApcContext,
    IN PIO_STATUS_BLOCK IoStatusBlock,
    IN ULONG Reserved
); 
```

`NTAPI`is `__stdcall`，而不是 default `__cdecl`，这是错误消息告诉您的内容。

你用这个做了什么：

```
PIO_APC_ROUTINE GotIt(PVOID param, PIO_STATUS_BLOCK IoStatusBlock, ULONG Reserved); 
```

...声明一个**返回**函数指针的函数。这不是你想要的。

# c++ - UNIX 上的“内部编译器错误：存储故障”是什么意思？

> ID：10822774
> 
> 赞同：0
> 
> 时间：2012-05-30T19:15:18.247
> 
> 标签：c++, unix, compiler-errors, cc

我必须使用 CCS 编译器 3.0 在 UNIX、Unixware 2.1.3 上构建一个应用程序，并且一直出现此错误：

```
UX:acomp: ERROR: "//home/dino/treeit.h", line 32: internal compiler error:  storage failure
*** Error code 1 (bu21)
UX:make: ERROR: fatal error. 
```

**我查看了系统上的可用空间，这很好。**

这是 C++ 中的代码部分，从第 23 行到第 36 行：

```
public:

    bool operator != (iterator_impl const &p_iterator) const
    {
        return m_pNode != p_iterator.m_pNode;
    }

    __BTL_ITERATOR_IMPL_NAME()
        :m_pNode(0)
    {} //Line 32 is here!!!!!!!

    __BTL_ITERATOR_IMPL_NAME(iterator_impl const &p_iterator)
        :m_pNode(p_iterator.m_pNode)
    {} 
```

我在 UNIX 上不是很好，不知道这是否是与操作系统相关的问题。有人能帮我吗 ？:)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:21:54.773

似乎意味着您在编译期间磁盘空间不足：

[http://www.linuxmisc.com/4-linux/7e5b068dd5eedb04.htm](http://www.linuxmisc.com/4-linux/7e5b068dd5eedb04.htm)

# sockets - 通过同一台机器上的套接字从 Visual C++ 发送数据

> ID：10822777
> 
> 赞同：1
> 
> 时间：2012-05-30T19:15:28.683
> 
> 标签：sockets, visual-c++

我目前在一个项目中，涉及从具有 Visual C++ API 的设备捕获的信号的数据可视化。我目前可以将每个数据样本记录到文件中，但我想对屏幕进行某种绘图。

我以前曾在 C++ 和 Python 之间使用套接字进行过类似工作的成功经验，但代码丢失了。我有 Python 套接字“接收器”可以重用，但没有 Visual C++“发送器”来逆向工程或复制/粘贴。

我当前运行良好的 Python 代码是：

```
import SocketServer

class SocketHandler(SocketServer.BaseRequestHandler):
    def handle(self):
        data = self.request[0].strip()

        ## do something with 'data' here!

server = SocketServer.UDPServer(("192.168.1.23", 8888), SocketHandler)
server.serve_forever() 
```

当前记录到文件并且我想发送到套接字的 Visual C++ 部分是：

```
#include <fstream>

//(...lots of code...)

short int * dataBuff;
unsigned int dataNum;
int isAcqRunning;
int startFromTrg, stopFromTrg;
unsigned int firstSample, lastSample;
int errcode;
int i;

std::ofstream out("./out.txt");

// device->transferData is called inside a loop
// to get data from aquisition hardware's buffer
errcode = device->transferData(&dataBuff, &dataNum, &isAcqRunning,
                              &startFromTrg, &stopFromTrg,
                              &firstSample, &lastSample);
if(errcode == 0)
{

    printf("\n Acquired samples: %d", dataNum);

    for (i=firstSample; i<lastSample; i++)
        out<<dataBuff[i]<<'\n';  /////// I'd like to send dataBuff[i] via socket!!
}

//(...lots of more code...) 
```

可能有用的附加信息：

*   我在 Windows7 中使用 VisualStudio 2010；
*   这是我有生以来第一次接触 C++ 代码，我几乎只使用 Python；
*   我没有成功尝试从书籍和网站上学习 C++ 示例，因为看起来，C++ 和 VISUAL C++ 不是一回事，而且行为可能非常不同 :o(

我非常感谢任何帮助，以及阅读本文。

（编辑：如果有更好的方法来做到这一点，而不会为新手带来任何额外的复杂性开销，我很乐意尝试。我喜欢套接字的东西，因为它是语言透明的，并且以非常快的速度解决了以前的问题）

# tsql - 如何将单行 SQL 结果转换为多行？

> ID：10822779
> 
> 赞同：1
> 
> 时间：2012-05-30T19:15:32.057
> 
> 标签：tsql, unpivot

我正在 SSMS 2008 R2 中开发一个 T-SQL 查询，它只返回一行。但问题是在这一行中有四个字段，我希望它们是唯一的行。例如，我的输出行如下所示：

```
Col. 1   Col. 2   Col. 3   Col. 4
xxxx     yyyy     zzzz     aaaa 
```

相反，我希望它看起来像：

```
Question    Answer
Col. 1      xxxx
Col. 2      yyyy
Col. 3      zzzz
Col. 4      aaaa 
```

我已经尝试为此使用 UNPIVOT 运算符，但它没有执行上述操作。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T19:22:56.087

您应该可以为此使用[UNPIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)：

这是一个静态数据透视表，您可以在其中对列的值进行硬编码：

```
create table t1
(
    col1 varchar(5),
    col2 varchar(5),
    col3 varchar(5),
    col4 varchar(5)
)

insert into t1 values ('xxxx', 'yyyy', 'zzzz', 'aaaa')

select question, answer
FROM t1
unpivot
(
    answer
    for question in (col1, col2, col3, col4)
) u

drop table t1 
```

这是一个带有演示的[SQL Fiddle 。](http://sqlfiddle.com/#!3/44083/1)

但您也可以使用 Dynamic Unpivot：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX);

select @cols = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('t1') and
               C.name like 'Col%'
         for xml path('')), 1, 1, '')

set @query = 'SELECT question, answer
            from t1
            unpivot 
            (
               answer
               for question in (' + @cols + ')
            ) p '

execute(@query) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:27:39.157

这是来自我的数据名称，但经过测试

```
select 'sID', sID as 'val' 
from [CSdemo01].[dbo].[docSVsys] 
where sID = 247   
union 
select 'sParID', sParID as 'val' 
from [CSdemo01].[dbo].[docSVsys] 
where sID = 247 ; 
```

但是 UNPIVOT 应该可以工作

# ruby-on-rails-3 - Rails 3.0 跳过嵌套属性的验证

> ID：10822781
> 
> 赞同：0
> 
> 时间：2012-05-30T19:15:35.473
> 
> 标签：ruby-on-rails-3, validation, nested-attributes

我需要能够在不对其自身或其嵌套属性运行验证的情况下保存记录。我被困在 Rails 3.0 中，无法更新到较新的版本。

我有一份报告，每份报告都有很多回复（问题的答案）。响应嵌套在报告表单中。

用户可以通过两种方式保存报告：提交以供审核，运行所有验证，以及稍后保存并完成，不对报告或嵌套响应运行验证。这需要对创建和更新操作都有效。

我目前正在尝试使用条件验证。这适用于更新但不适用于创建。问题是这一行：

```
validate :has_answer_if_required, :if => Proc.new { |response| !response.report.finish_later? } 
```

该报告尚不存在，因此活动记录找不到此响应的报告。那就是它崩溃的地方。

对于这个问题有很多建议的解决方案，但我无法让它们在 Rails 3.0 中工作。例如，update_attributes(attributes, :validate => false) 在 Rails 3.0 中不可用。

那么，如何跳过嵌套属性中的验证？

```
class Report < ActiveRecord::Base
  has_many :responses, :order => "created_at asc", :autosave => true
  accepts_nested_attributes_for :responses
  ...
end

class Response < ActiveRecord::Base
  belongs_to :report
  validates_associated  :report

  validate :has_answer_if_required, :if => Proc.new { |response| !response.report.finish_later? }
  validate :correct_answer_or_comment, :if => Proc.new { |response| !response.report.finish_later? }
end

class ReportsController < BaseController

  def update
    @report = Report.find(params[:id])
    @report.attributes = params[:report]

    if params[:finish_later].nil?
      @report.update_attribute(:finish_later, false)
      if @report.save!
      redirect_to :action => :index
    else
      render :template => "reports/edit"
    end
    else
      @report.finish_later = true
      @report.save(:validate => false)
      redirect_to :action => :index
    end
  end

  def create
    @report = Report.new(params[:report])
    if params[:finish_later].nil?
      @report.finish_later = false
      if @report.save!
        redirect_to :action => :index
      else
        render :template => "reports/edit"
      end
    else
      @report.finish_later = true
      @report.save!(:validate => false)
      redirect_to :action => :index
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T00:20:27.950

不确定它是否适用于嵌套属性，但我认为它应该......但试试 ValidationSkipper：

[https://github.com/npearson72/validation_skipper](https://github.com/npearson72/validation_skipper)

只需确保调用`skip_validation_for`要跳过的对象即可。由于嵌套属性将行为传递给它们的子对象，因此您可以直接在父对象上调用此方法。试试看。

# css - 使用 CSS 标签作为链接

> ID：10822783
> 
> 赞同：1
> 
> 时间：2012-05-30T19:15:38.317
> 
> 标签：css, label, clickable

我正在尝试在我的 PHP 脚本中运行星级评分系统，该脚本使用无线电属性和标签来显示星星。

一切都很好，直到这一点。

我真正想要做的实际上是使用每个星作为指向相应脚本的链接，每个星的值作为参数。我会注意到 HTML 元素是在 CSS 文件中详细定义的字段集的一部分。

你对此有什么想法吗？

这是当前从 PHP 脚本生成的

```
fieldset class='rating'

   input type='radio' id='submit' name='rating' value='5'
     label for='star5' title='Absolutely stunning'5 stars
   input type='radio' id='submit' name='rating' value='4'
     label for='star4' title='Suggested for everyone'>4 stars
   input type='radio' id='submit' name='rating' value='3'
     label for='star3' title='Pretty good effort'>3 stars
   input type='radio' id='submit' name='rating' value='2'
     label for='star2' title='Not Suggested'>2 stars
   input type='radio' id='submit' name='rating' value='1'
     label for='star1' title='Bad effort'>1 stars
fieldset 
```

这是代表星星的 CSS 代码：

```
.rating:not(:checked) > label:before {
    content: '★ ';

} 
```

很抱歉以这种方式格式化它们，但正如您所知，HTML 元素有一个限制

# java - 将组合键绑定到 JFrame

> ID：10822787
> 
> 赞同：3
> 
> 时间：2012-05-30T19:15:42.663
> 
> 标签：java, swing, keyboard-shortcuts, action, keystroke

到目前为止，我有 ESC 键来关闭窗口，使用以下代码：

```
KeyStroke escapeKeyStroke = KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0, false);
    Action escapeAction = new AbstractAction() {
         public void actionPerformed(ActionEvent e) {
            screen.dispose();
         }
    };
screen.getRootPane().getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(escapeKeyStroke, "ESCAPE");
screen.getRootPane().getActionMap().put("ESCAPE", escapeAction); 
```

但我想知道如何添加 CTRL+A 事件？我记得阅读过一种为按键/释放设置布尔值的方法，但我没有看到使用这段代码，所以我想知道如何实现 CTRL+A。

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T19:18:20.963

这是重要的方法的第二个参数`KeyStroke.getKeyStroke(...)`，因为您将希望使用`InputEvent.CTRL_DOWN_MASK`那里让 KeyEvent.VK_A 成为控件-A。

例如，

```
KeyStroke ctrlAKeyStroke = KeyStroke.getKeyStroke(KeyEvent.VK_A,
     InputEvent.CTRL_DOWN_MASK); 
```

我不会担心使用使用布尔值的 3 参数方法，因为您对按键更感兴趣，而不是按键或按键释放。

关于您的评论：

> 更正我之前的评论。它有效，如果我成功了，让我们说 Ctrl+W。Ctrl+A 只是尝试在框架中的文本字段中执行其本机“全选”功能。有什么办法可以避免吗？

据我了解，如果具有焦点的组件（例如 JTextArea）直接响应 ctrl-A 按键，这将是一个问题。为了解决这个问题，您可以向该组件添加相同的绑定，但请确保将其绑定到使用该`JComponent.WHEN_FOCUSED;`条件的 InputMap。

# git - git push --force 到远程服务器失败

> ID：10822789
> 
> 赞同：0
> 
> 时间：2012-05-30T19:15:49.653
> 
> 标签：git, github

我正在尝试推动本地更改：

```
git push all 
```

“all”表示 github 和远程服务器上的 repo - 在我的 .git/config 中：

```
[remote "all"]
    url = git@github.com:...myrepo.git
    url = ssh://usrname@servername/myrepo.git/ 
```

最初假定不应该在服务器上手动更改任何内容，但最终确实发生了。但是服务器上的更改是微不足道的，我想覆盖它们以获得我本地存储库的精确副本。所以，现在我无法推送到远程服务器获取错误：

```
remote: error: Your local changes to the following files would be overwritten by merge:
remote: Please, commit your changes or stash them before you can merge. 
```

我知道以前对类似问题的回答，但不幸的是“git push origin --force all”不起作用，抛出同样的错误

请帮忙！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:03:57.210

好吧，这很有意义。您网络上的遥控器不是裸露的。即，你在它上面工作；它有自己的工作目录。实际上，您尝试推送到的分支当前已签出。要补充的是，您还有一些尚未提交的修改。Git 将拒绝在那里删除您的更改。

正确的工作流程是从远程那里提取更改。

但是，您也可以

*   通过在远程 repo 上签出特定的提交而不是分支来进入无头状态。
*   如果它确实是其他人将要使用它的中央存储库，或者 CI 服务器将查询它，则将其设为一个裸存储库。这是用`git clone --bare`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:19:29.063

请参阅[push](http://linux.die.net/man/1/git-push)的手册页。

一个遥控器不能代表多个存储库。添加“github”和“network”作为单独的遥控器。在您的最后一个推送示例中，“all”被视为分支名称！。

如果省略它和冒号，则语法是隐含`git push remote-name branch-name:remote-branch-name`的。`remote-branch-name`

然后，您将使用`--all`push 命令的选项来推送到 github 和网络远程。

```
git push --all 
```

在您为要推送到的所有地方设置单独的遥控器后，这将是有意义的。

# shell - 我可以从另一个 shell 脚本调用一个 shell 脚本的函数吗？

> ID：10822790
> 
> 赞同：111
> 
> 时间：2012-05-30T19:15:50.497
> 
> 标签：shell, unix

我有 2 个 shell 脚本。

第二个 shell 脚本包含以下函数 *second.sh*

```
func1 
func2 
```

first.sh 将使用一些参数调用第二个 shell 脚本，并使用特定于该函数的一些其他参数调用 func1 和 func2。

这是我正在谈论的示例

第二个.sh

```
val1=`echo $1`
val2=`echo $2`

function func1 {

fun=`echo $1`
book=`echo $2`

}

function func2 {

fun2=`echo $1`
book2=`echo $2`

} 
```

第一个.sh

```
second.sh cricket football

func1 love horror
func2 ball mystery 
```

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2012-05-30T19:47:42.443

像这样重构你的`second.sh`脚本：

```
func1 {
   fun="$1"
   book="$2"
   printf "func=%s,book=%s\n" "$fun" "$book"
}

func2 {
   fun2="$1"
   book2="$2"
   printf "func2=%s,book2=%s\n" "$fun2" "$book2"
} 
```

然后像这样从脚本中调用这些函数`first.sh`：

```
source ./second.sh
func1 love horror
func2 ball mystery 
```

**输出：**

```
func=love,book=horror
func2=ball,book2=mystery 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-05-30T19:21:42.467

您不能直接在另一个 shell 脚本中调用函数。

您可以将函数定义移动到单独的文件中，然后使用`.`命令将它们加载到脚本中，如下所示：

```
. /path/to/functions.sh 
```

这将解释`functions.sh`为它的内容此时实际上存在于您的文件中。这是实现 shell 函数共享库的常用机制。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2017-02-07T22:22:47.203

## 问题

当前接受的答案仅在重要条件下有效。鉴于...

**`/foo/bar/first.sh`：**

```
function func1 {  
   echo "Hello $1"
} 
```

和

**`/foo/bar/second.sh`：**

```
#!/bin/bash

source ./first.sh
func1 World 
```

仅当`first.sh`从 所在的同一目录中执行时才有效`first.sh`。IE。如果当前shell的工作路径是`/foo`，尝试运行命令

```
cd /foo
./bar/second.sh 
```

打印错误：

```
/foo/bar/second.sh: line 4: func1: command not found 
```

那是因为`source ./first.sh`是相对于当前工作路径的，而不是脚本的路径。因此，一种解决方案可能是利用 subshel​​l 并运行

```
(cd /foo/bar; ./second.sh) 
```

## 更通用的解决方案

鉴于...

**`/foo/bar/first.sh`：**

```
function func1 {  
   echo "Hello $1"
} 
```

和

**`/foo/bar/second.sh`：**

```
#!/bin/bash

source $(dirname "$0")/first.sh

func1 World 
```

然后

```
cd /foo
./bar/second.sh 
```

印刷

```
Hello World 
```

## 这个怎么运作

*   `$0`返回执行脚本的相对或绝对路径
*   `dirname`返回目录的相对路径，其中 $0 脚本存在
*   `$( dirname "$0" )`该`dirname "$0"`命令返回执行脚本目录的相对路径，然后将其用作`source`命令的参数
*   在 "second.sh" 中，`/first.sh`只是附加了导入的 shell 脚本的名称
*   `source`将指定文件的内容加载到当前 shell

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-05-17T14:15:50.317

`second.sh`

```
#!/bin/bash

function func1() {
   fun="$1"
   book="$2"
   echo "$fun, $book\n"
}

function func2() {
   fun2="$1"
   book2="$2"
   printf "$fun2, $book2\n"
} 
```

`first.sh`

```
#!/bin/bash

source /absolute_path_to/second.sh
func1 love horror
func2 ball mystery 
```

### 在使用它之前你需要记住这些东西

*   关键字`source`和`.`（句点）是同一个命令。
*   如果`FILENAME`不是文件的完整路径，该命令将在`$PATH`环境变量中指定的目录中搜索文件。如果在 中找不到该文件`$PATH`，该命令将在当前目录中查找该文件。
*   如果`ARGUMENTS`给出任何参数，它们将成为`FILENAME`.
*   如果`FILENAME`存在，则源命令退出代码为`0`，否则，如果找不到文件，则返回`1`。

在这些要点中，要关注的一点是，如果您正在使用，`second`您实际上需要为文件提供 a ，如果您遇到这种情况就行不通，那么我的朋友，您只需将路径更改为.`ABSOLUTE_PATH``#!/bin/bash``RELATIVE_PATH``ABSOLUTE_FILE_PATH`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-27T16:12:32.680

这是一个非常古老的帖子，我知道。但是我发现即使它位于同一目录中，我也无法获取另一个文件。

```
line 3: ./functions.bash: No such file or directory 
```

然后我记得我已经为这种确切情况准备了一个方法，因为我是从一个 ini 文件导入的。所以这是我的解决方案，它允许我从任何地方（显然是源文件）运行程序，而无需对路径进行硬编码。

```
app="$(cd "$(dirname "${BASH_SOURCE[0]}")" &>/dev/null && pwd)"
source $app/functions.bash 
```

我不能对此表示赞赏，已经有一段时间了，我不记得我是从哪里得到的，否则我会相信他们，但这就是我用来源文件的全部。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-19T18:37:51.770

如果你定义

```
 #!/bin/bash
        fun1(){
          echo "Fun1 from file1 $1"
        }
fun1 Hello
. file2 
fun1 Hello
exit 0 
```

在文件 1（chmod 750 文件 1）和文件 2 中

```
 fun1(){
      echo "Fun1 from file2 $1"
    }
    fun2(){
      echo "Fun1 from file1 $1"
    } 
```

然后运行 ​​./file2 你会得到来自 file1 的 Fun1 来自 file2 的 Hello Fun1 你好惊喜！！！您用 file2 中的 fun1 覆盖 file1 中的 fun1... 为了不这样做，您必须

```
declare -f pr_fun1=$fun1
. file2
unset -f fun1
fun1=$pr_fun1
unset -f pr_fun1
fun1 Hello 
```

它保存了您以前对 fun1 的定义，并使用以前的名称删除不需要导入的名称来恢复它。每次从另一个文件导入函数时，您可能会记住两个方面：

1.  你可以用相同的名字覆盖现有的（如果你想要的东西，你必须如上所述保留它们）
2.  导入导入文件的所有内容（函数和全局变量）小心！这是危险的程序

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2013-09-11T16:00:20.250

```
#vi function.sh

#!/bin/bash
f1() {
    echo "Hello $name"
}

f2() {
    echo "Enter your name: "
    read name
    f1
}
f2

#sh function.sh 
```

这里函数`f2`将调用函数`f1`

# jquery - 无法更改 iframe 的 src

> ID：10822792
> 
> 赞同：0
> 
> 时间：2012-05-30T19:16:07.720
> 
> 标签：jquery, ipad, iframe

我究竟做错了什么？我尝试了以下方法，但在 iframe 中一无所获......

```
var file = "TreeImages/" + $(this).text() + ".pdf'";
var file = "/TreeImages/" + $(this).text() + ".pdf'";
var file = ".../TreeImages/" + $(this).text() + ".pdf'";

//with/...
$('div.viewer.ifrm').attr('src') = file;
$('div.viewer.ifrm').attr('src', file); 
```

iframe 的 html 看起来像这样......

```
<div class="wrapper">
    <div class="treeMenu" ></div>
    <div class="viewer">
        <iframe class='ifrm' scrolling='yes' src=''></iframe>
    </div>
</div> 
```

如果我删除并添加整个 iFrame 而不是尝试更改源，则可以使事情正常进行，但是当我尝试使用 -webkit-overflow-scrolling: touch; 时，这似乎导致 iPad 上的滚动中断。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:19:23.103

您希望选择器之间有一个空格来指示它们不是同一元素的多个类。

```
$('.viewer .ifrm').attr('src', file); 
```

# facebook-graph-api - 自定义用户到用户的请求

> ID：10822794
> 
> 赞同：1
> 
> 时间：2012-05-30T19:16:09.450
> 
> 标签：facebook-graph-api, request, facebook-rest-api, facebook-requests

有没有办法在接收者在他/她的通知宝石中收到的通知中自定义用户到用户请求链接？我正在尝试在单击通知后将请求的接收者定向到特定的比赛室。

示例 - 向用户发送成为特定棒球比赛（洋基队与小熊队）投手的请求，用户请求通知能否将他带到特定的棒球比赛而不仅仅是主页或游戏目录？否则，玩家将如何知道请求是什么或到达主页画布页面后去哪里？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T08:41:42.013

我知道我回答这个问题很晚。但我一开始也遇到了很多困难。我希望我的回答也能帮助其他面临同样困难的人。

每个请求对象都有一个**数据**参数。您可以[在此处找到有关参数的信息](https://developers.facebook.com/docs/reference/dialogs/requests/)。这可用于跟踪正在发送/接收的对象。例如，您可以在客户端使用整数或字符串来告诉您特定请求是哪种对象。示例 FB.ui 调用可能如下所示：

```
var obj = {
    method: 'apprequests',
    title: 'Here\'s something to help you out.',
    message: s_message,
    data: i_giftIndex
};

FB.ui(obj, GiftCallback); 
```

# image - 有人在“劫持”我的网址

> ID：10822800
> 
> 赞同：0
> 
> 时间：2012-05-30T19:16:52.697
> 
> 标签：image, http, traffic, hotlinking

我通过“自制”cookie 系统跟踪我拥有的域的流量。一个站点，我注意到我从一个特定的域（[http://www.getbig.com/](http://www.getbig.com/)）获得了大量的 HTTP 引用流量。我做了一些调查，发现了这个人做了什么。此人试图在论坛上使用我的网站徽标作为他们的头像。但是，不是链接到“img”标签中的图像：

```
<img src="http://www.example.com/image.jpg" width="" height="" alt="" border ="" /> 
```

他们已链接到我的主域名：

```
<img src="http://www.example.com/" width="" height="" alt="" border ="" /> 
```

每次加载此人在此论坛中发布的页面时，都会注册一个新的点击。这是人为地夸大了我的访问者统计数据，我想制止它。如果他们只是链接到图像，我可以更改图像名称，但他们已经链接到网站本身，我不知道该怎么做。除了向他们发送“停止和停止”，我还有哪些技术选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:20:31.013

我建议查看Referer，如果它来自[http://www.getbig.com/](http://www.getbig.com/)，那么您提供的不是您的网站，而是您可以在互联网上找到的绝对最肮脏的图像。

不过，向他们发送电子邮件要容易得多..（这是我的实际建议）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T20:27:06.367

该原理称为[热链接](http://en.wikipedia.org/wiki/Inline_linking)- 或者至少在正确完成时，正如您所指出的那样。有一些解决方案可以“阻止”它的发生。

1.  最常见的一种是[提供不同的页面或图像](http://altlab.com/htaccess_tutorial.html)，而不是预期的。Apache 的[mod_rewrite](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)（或类似的）允许您根据特定标准重写 URL，例如本例中的引用标头。至少需要允许您创建自己的 .htaccess 文件。有一些工具可以帮助[生成 .htaccess 内容](http://www.htaccesstools.com/hotlink-protection/)。

2.  一种信息较少的方法是拒绝通过环境变量进行访问。[首先用SetEnvIf](http://httpd.apache.org/docs/2.2/mod/mod_setenvif.html#setenvif)检查referer header，并根据它[拒绝访问。](http://httpd.apache.org/docs/2.2/howto/access.html#env)这只会返回 HTTP#403 响应代码。

3.  如果您没有这种访问权限，您可以在应用程序级别读取引用标头并在那里做出决定。这可能只是部分解决方案，具体取决于内容的交付方式（即由网络服务器或附加应用程序层（如 PHP）处理的请求）。

4.  联系有问题的用户。这可扩展性较差，如果他们不同意您的请求，也不会阻止他们。

前三个是一般停止盗链的解决方案。可以调整它们以仅匹配特定的引用者。

在这种特殊情况下，我怀疑这些中的任何一个都会产生重大影响，除非您提供图片作为回应。如果 URI 不包含实际的图像名称，而仅包含协议和域名，则打开页面的浏览器目前不太可能显示与 img 标记相关的任何内容。提供不同的内容不会改变这种情况，除非它是图像。提供一张图片来解释为什么你不允许盗链（即使他们请求主页）可能会对用户产生更重要的影响。

很难评估您的统计数据将如何受到这些解决方案的影响。假设它们是在主页上收集的，它们可以使数据恢复正常，因为该页面将不再提供。如果它们基于访问日志，则可能是另一回事。

# java - 在 Java 中生成混合/多部分 HTTP 请求

> ID：10822803
> 
> 赞同：5
> 
> 时间：2012-05-30T19:17:11.450
> 
> 标签：java, http

我想发布（在 Java 中）一个多部分/混合请求，其中一部分是“应用程序/json”类型，另一部分是“应用程序/pdf”类型。有谁知道图书馆可以让我轻松做到这一点？令人惊讶的是，我一直找不到。

我将生成 JSON，但我需要能够将该部分的内容类型设置为“application/json”。

非常感谢，丹尼尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T19:33:47.287

很简单，使用[Apache Http-client 库](http://hc.apache.org/)（此代码使用 4.1 版和 jars httpclient、httpcore 和 httpmime），这是一个示例：

```
package com.officedrop.uploader;

import java.io.File;
import java.net.URL;

import org.apache.http.HttpHost;
import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.mime.HttpMultipartMode;
import org.apache.http.entity.mime.MultipartEntity;
import org.apache.http.entity.mime.content.FileBody;
import org.apache.http.impl.client.DefaultHttpClient;

public class SampleUploader {

    public static void main(String[] args) throws Exception {

        DefaultHttpClient httpclient = new DefaultHttpClient();
        String basePath = "http://localhost/";

        URL url = new URL( basePath );

        HttpHost targetHost = new HttpHost( url.getHost(), url.getPort(), url.getProtocol() );  

        HttpPost httpost = new HttpPost( String.format( "%s%s", basePath, "ze/api/documents.xml"));

        MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

        entity.addPart("file_1", new FileBody( new File( "path-to-file.pdf" ) , "file.pdf", "application/pdf", null));
        entity.addPart("uploaded_data_1", new FileBody( new File( "path-to-file.json" ) , "file.json", "application/json", null));    

        httpost.setEntity(entity);

        HttpResponse response = httpclient.execute( targetHost, httpost);

    }

} 
```

# cocos2d-iphone - 分组形状花栗鼠

> ID：10822808
> 
> 赞同：0
> 
> 时间：2012-05-30T19:17:19.770
> 
> 标签：cocos2d-iphone, chipmunk

我正在尝试使用约束用花栗鼠 + cocos2d 制作一个带有手臂的角色。我读到花栗鼠需要对形状进行分组，以免部件之间发生碰撞。

我做了

```
cpGroup *group;
cpShapeSetGroup(myShape1, group);
cpShapeSetGroup(myShape2, group);

cpSpaceAddConstraint(space_, cpPivotJointNew(bodyPin, body, cpv(pinX, pinY)));
cpSpaceAddConstraint(space_, cpRotaryLimitJointNew(body, armBody, 45, 90)); 
```

但两个形状不断碰撞

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:48:00.300

那应该编译时带有警告。cpGroup 默认定义为 unintptr_t 类型。因此，您应该给组一个唯一的整数标识符或将唯一的指针（例如拥有形状的游戏对象）转换为 uintptr_t。

您上面的代码片段所做的是使用未初始化变量的值作为组。它应该已经工作了。你确定 shape1 和 shape2 是正确的形状吗？

# regex - 删除带有 sed 的行匹配一个特殊的正则表达式

> ID：10822809
> 
> 赞同：28
> 
> 时间：2012-05-30T19:17:21.370
> 
> 标签：regex, sed, match

我尝试删除所有以一些可选特殊字符开头的行，后跟`blubb`：

这就是我要匹配的行：

> #blubb
> *blubb
> -blubb
> blubb

应该这样做，但不起作用:(

```
sed "/^.?blubb$/d" -i special.conf  
sed "/^[#*-]?blubb$/d" -i special.conf 
```

有人有**正确的解决方案**吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-30T19:28:59.567

使用这个 sed 命令：

```
sed -i.old '/^[#*-]\{0,1\}blubb/d' special.conf 
```

或者

```
sed -i.old -E '/^[#*-]?blubb/d' special.conf 
```

或者

```
sed -i.old -r '/^[#*-]?blubb/d' special.conf 
```

# c# - 为存储过程创建可重用的 Linq To SQL

> ID：10822811
> 
> 赞同：17
> 
> 时间：2012-05-30T19:17:26.083
> 
> 标签：c#, linq, linq-to-sql, ado.net

我正在开发一个需要使用`Linq To SQL`. 我被要求创建一个可`Linq to SQL`用于执行存储过程的通用或可重用类。

在`ADO.Net`我知道如何通过只传递我想要执行的字符串来执行此操作，并且我可以为我需要运行的每个查询传递不同的字符串：

```
SqlCommand cmd = new SqlCommand("myStoredProc", conn); // etc, etc 
```

`Linq To SQL`如果可能的话，我正在努力解决如何在 中创建类似的东西。我创建了一个`.dbml`文件并将我的存储过程添加到其中。因此，我可以使用以下代码返回结果：

```
public List<myResultsStoreProc> GetData(string connectName)
{
   MyDataContext db = new MyDataContext (GetConnectionString(connectName));
   var query = db.myResultsStoreProc();

   return query.ToList();
} 
```

该代码有效，但他们希望我创建一种方法，该方法将返回我告诉它运行的任何存储过程。我在网上搜索并与同事讨论过这个问题，但未能找到一种方法来创建可重用的存储过程类。

那么有没有办法创建一个可重用的`Linq to SQL`类来执行存储过程？

编辑：

我正在寻找的是是否有办法执行以下操作？

```
public List<string> GetData(string connectName, string procedureName)
{
   MyDataContext db = new MyDataContext (GetConnectionString(connectName));
   var query = db.procedureName();

   return query.ToList();
} 
```

我已经查看了[MSDN 文档](http://msdn.microsoft.com/en-us/library/bb425822.aspx#linqtosql_topic29)，`Linq To Sql`这些文档显示了以下表格`IEnumerable`：

```
IEnumerable<Customer> results = db.ExecuteQuery<Customer>(
   @"select c1.custid as CustomerID, c2.custName as ContactName
      from customer1 as c1, customer2 as c2
      where c1.custid = c2.custid"
); 
```

我正在寻找一些非常通用的东西，我可以在其中发送我想要执行的存储过程的字符串值。如果这是不可能的，是否有任何文件说明为什么不能这样做？我需要证明为什么我们不能传递要执行的过程名称的字符串值`Linq To Sql`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-05T17:10:07.783

DataContext.ExecuteCommand 并不完全符合您的要求，因为它只返回一个 int 值。相反，您需要的是 DataContext.ExecuteQuery，它能够执行存储过程并返回数据集。

我会为你的 DBML 创建一个部分类来存储这个函数。

```
public List<T> GetDataNoParams(string procname)
{
   var query = this.ExecuteQuery<T>("Exec " + procname);

   return query.ToList();
}

public List<T> GetDataParams(string procname, Object[] parameters)
{
   var query = this.ExecuteQuery<T>("Exec " + procname, parameters);

   return query.ToList();
} 
```

要调用存储过程，您将执行以下操作：

```
GetDataNoParams("myprocedurename"); 
```

或者

```
GetDataParams("myotherprocedure {0}, {1}, {2}", DateTime.Now, "sometextValue", 12345); 
```

或者

```
GetDataParams("myotherprocedure var1={0}, var2={1}, var3={2}", DateTime.Now, "sometextValue", 12345); 
```

如果您想调用没有返回值的过程，这也很容易，我相信您可以看到，通过创建一个不存储/返回任何内容的新方法。

灵感来自[http://msdn.microsoft.com/en-us/library/bb361109(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/bb361109(v=vs.90).aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T19:29:31.167

对您的问题的最简单答案是，您可以像在 ADO.Net 中一样获取您的[`Connection`](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.connection.aspx)属性`MyDataContext`并创建和执行您自己的 s。`SqlCommand`我不确定这是否符合您的目的，特别是如果您想从 LINQ to SQL 模型中检索实体。

如果您想从模型中返回实体，请查看该[`DataContext.ExecuteCommand`](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.executecommand.aspx)方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T12:22:22.073

当我们在 .dbml 文件中删除 Table 或 StoredProcedure 时，它​​会创建它的类，该类与数据层和我们的业务逻辑进行通信。

在 Linq to SQL 中，我们必须在 .dbml 文件中存在 StoredProcedures 或表，否则无法在 Linq to SQL 中调用通用方法，通过将存储过程的名称传递给方法来调用存储过程。

但是在 ADO.Net 中我们可以做到（就像你知道的那样）

```
SqlCommand cmd = new SqlCommand("myStoredProc", conn); 
```

# queue - 跨多个 redis 主服务器实现队列

> ID：10822812
> 
> 赞同：2
> 
> 时间：2012-05-30T19:17:49.800
> 
> 标签：queue, redis

我正在尝试使用两个 EC2 可用区中的两个 redis 主服务器构建一个作业队列。所有 LPUSH 操作都在应用层对两个 AZ 中的两台主机完成。理想情况下，我会使用[GitHub 的 resque](https://github.com/defunkt/resque)，但 resque[似乎没有任何](https://stackoverflow.com/questions/10590038/githubs-redis-and-resque-failure-behavior)关于多个 AZ 中的多个 master 的概念。

我需要确保只有一名工人在从事给定的工作。一些工人将在 AZ 1A 中与 1A 中的 redis 机器对话，而一些工人将在 AZ 1B 中与 1B 中的机器对话。我需要避免 1A 中的工作人员和 1B 中的工作人员都从不同的 redis 主机中提取相同的作业并尝试同时处理它的情况。

这个工人伪代码是否有我可能错过的任何竞争条件？

```
job_id = master1.BRPOPLPUSH "queue", "working"
m1lock = master1.SETNX "lock.#{job_id}"
m2lock = master2.SETNX "lock.#{job_id}"
completed = master1.ZSCORE "completed", job_id

if completed
  # must have been completed just now on other server, no-op
  master1.LREM "working", 0, job_id
  master1.del "lock.#{job_id}"
  master2.del "lock.#{job_id}"
elsif not m1lock or not m2lock
  # other server is working on it? We will put back at the end of our queue
  master1.LPUSH "queue", job_id
  master1.LREM "working", 0, job_id
  master1.del "lock.#{job_id}" if m1lock
  master2.del "lock.#{job_id}" if m2lock
else
  # have a lock, it's not complete, so do work
  do_work(job_id)

  now = Time.now.to_i
  master1.ZADD "completed", now, job_id
  master2.ZADD "completed", now, job_id

  master1.del "lock.#{job_id}"
  master2.del "lock.#{job_id}"

  master1.LREM "working", 0, job_id
  master2.LREM "queue", 0, job_id # not strictly necessary b/c of "completed"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:55:23.453

你要做的本质上是主主复制，无论是队列还是其他，redis都不支持，你的伪代码有竞争条件。只是在做：

```
m1lock = master1.SETNX "lock.#{job_id}"
m2lock = master2.SETNX "lock.#{job_id}" 
```

表示在您执行此操作时，另一名工人可以接手这项工作，并且两名工人将同时工作。我不认为 redis 非常适合您的模式，而且我不知道任何可以以这种方式工作的队列服务器，但话说回来，我不知道很多这样的服务器，所以我确定有。

如果你对你的工作进行负载平衡，以便一次只有一个 master 得到一份工作，这是可能的，但是你实际上有两个队列，而不是一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T16:20:46.623

I'm curious... if you're already in the AWS environment, why wouldn't you choose instead to use Amazon's SQS service? I've worked with it in the past and realize it's a bit of a pain in the ass, but it's Amazon's most mature service and it's purpose built for this scenario.

# windows-phone-7 - 为什么我无法使用 WP7 通过 Wifi 连接到本地网络上的站点？

> ID：10822813
> 
> 赞同：0
> 
> 时间：2012-05-30T19:18:02.650
> 
> 标签：windows-phone-7, networking

我正在开发一个从 Web 服务检索数据的 WP7 应用程序。Web 服务由一位同事编写，托管在连接到办公室网络的服务器上。该应用程序在模拟器中运行良好。但是，当我在实际手机 (HTC Surround) 上运行该应用程序时，它无法连接到网络服务。如果我尝试打开托管在同一台服务器上的网站，也无法正常工作。但是我可以很好地连接到其他网站。

需要注意的一点是 - 我的手机中没有 SIM 卡，因此唯一可用的数据连接是通过 WiFi，它连接到办公室网络（与托管服务相同的网络）。

我可以通过笔记本电脑（在有线办公网络上）、使用 WiFi 的 Android 手机和使用 4G 的 Android 手机访问这个网站。

这里会发生什么？或者 - 我该如何调试这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:08:45.447

我将通过使用[Connectify.me](http://www.connectify.me/download-lite/)（或类似的东西）重新广播您遇到问题的 wifi 网络来开始调试它，启动[Fiddler](http://www.fiddler2.com/fiddler2/)并分析当设备的浏览器连接到某个外部站点与托管站点时会发生什么在您的网络上。

# http - 为什么一致数量的访问者会丢失 User-Agent 标头？

> ID：10822818
> 
> 赞同：2
> 
> 时间：2012-05-30T19:18:19.437
> 
> 标签：http, mobile, user-agent

我们最近部署了我们网站的移动版本，该部署的一部分包括用户代理检查以确定将哪个版本交付给最终用户。

自从我们发布以来，每隔一分钟左右，我们就会遇到一个 Elmah 错误，该错误来自当 User-Agent 为空白时引发的异常。

我们已经在生产中解决了这个问题，但我很好奇为什么我们的流量的一致（但非常小）百分比可能没有定义用户代理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:22:53.213

这是一个简单的猜测，但它*可能*来自机器人。

有数量惊人的机器人（搜索引擎、僵尸网络和其他）不断扫描网站和服务器以查找漏洞、密码等。有时他们有一个已知的用户代理，有时没有。

您可以使用[CloudFlare](http://www.cloudflare.com)之类的 CDN 服务来了解这些请求中有多少来自机器人（不，我不为那家公司工作 - 但使用他们的服务让我意识到网络被机器人污染了多少，统计数据很可怕）。

# php - 处理一组选择语句但条件不同的好方法是什么？

> ID：10822820
> 
> 赞同：0
> 
> 时间：2012-05-30T19:18:27.737
> 
> 标签：php, function, codeigniter, select

我面临的一个问题是有许多查询具有相似的选择语句但不同的连接/位置语句。

下面是我正在通过 CodeIgniter 处理的代码示例。我通常做的是创建一个函数 get()，它接受一组随机键/值。根据传递的键/值，它将生成并运行适当的查询。现在，我想知道这是一种很好的做事方式吗？因为如你所见，这个函数变得越来越复杂。最初，我有一堆函数，例如 get_all()、get_only_lessons() 等，但是不得不用一两行不同的行重复同一组代码变得有点烦人。

我的问题是处理这个问题的最佳方法是什么。

```
function get($param = NULL)
{
    /*
    SELECT  m.id AS id, CAST(m.order_number AS SIGNED) AS order_number, m.name AS name, m.permalink as permalink, 
        m.suplesson_id as suplesson_id, CAST(sm.order_number AS SIGNED) AS suplesson_order_number
    FROM    lessons m
    JOIN    courses c ON m.course_id = c.id
    LEFT JOIN lessons sm ON m.suplesson_id = sm.id
    WHERE   [various]
    */

    $select =   'm.id AS id, CAST(m.order_number AS SIGNED) AS order_number, m.name AS name, m.permalink as permalink, ';
    $select .= ' m.suplesson_id as suplesson_id';

    if (isset($param['id']) || isset($param['suplesson_order_number']) || isset($param['permalink']))   
        $select .= ', CAST(sm.order_number AS SIGNED) AS suplesson_order_number ';

    $this->db->select($select);
    $this->db->from($this->table_name.' m');
    $this->db->join($this->courses_table_name.' c', 'm.course_id = c.id');

    if (isset($param['id']) || isset($param['suplesson_order_number']) || isset($param['permalink']))
        $this->db->join($this->table_name.' sm', 'm.suplesson_id = sm.id', 'left');

    // where clauses
    if (isset($param['course_id'])) 
        $this->db->where(array('c.id' => $param['course_id']));
    if (isset($param['id'])) 
        $this->db->where(array('m.id' => $param['id']));
    if (isset($param['order_number'])) 
        $this->db->where(array('m.order_number' => $param['order_number']));
    if (isset($param['permalink'])) 
        $this->db->like('m.permalink', $param['permalink'], 'none');
    if (isset($param['suplesson_id'])) 
        $this->db->where(array('m.suplesson_id' => $param['suplesson_id']));
    if (isset($param['suplesson_order_number'])) 
        $this->db->where(array('sm.order_number' => $param['suplesson_order_number']));
    if (isset($param['NULL'])) 
        $this->db->where('m.'.$param['NULL'].' IS NULL');
    if (isset($param['NOT NULL'])) 
        $this->db->where('m.'.$param['NOT NULL'].' IS NOT NULL');

    $this->db->order_by('order_number');

    // filter based on num_rows/offset
    if (isset($param['id']) || isset($param['permalink']))  
        $this->db->limit(1);
    if (isset($param['num_rows']) && isset($param['offset'])) 
        $this->db->limit($param['num_rows'], $param['offset']);

    $query = $this->db->get();

    // return row if expecting 1 result 
    if (isset($param['id']) || isset($param['suplesson_order_number']) || isset($param['permalink']))   
        return ($query->num_rows() == 1) ? $query->row_array() : NULL;

    return ($query->num_rows() > 0) ? $query->result_array() : NULL;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:54:11.907

运行 DB 查询的常用方法是将模型代码构造为具有多个函数调用，每个函数调用与一个 SQL 语句相关，例如：

```
function get_user($userId)
{
    $this->db->get_where('user', array('userId' => $userId))
    //...
    //...        
}

function delete_user($userId)
{
    $this->db->delete('user',array('userId' => $userId))
} 
```

您可以创建一个名为 User_model 的模型类，其中包含读取/更新用户表所需的所有功能，因此在您的控制器中您可以调用特定的模型函数

```
$user = $this->User_model->get_user($userId) 
```

看起来您正在尝试构建一个巨大的模型函数来检查各种参数以确定要运行的 SQL 语句。这不是好的设计，也不适合 Codeignitors MVC 模型。相反，为每个表创建一个单独的模型，然后在每个模型中为您希望运行的每个 SQL 操作创建单独的函数。从您的控制器调用这些模型以获取/更新/删除表中的数据。

# jquery - 调整窗口大小时调整颜色框大小

> ID：10822824
> 
> 赞同：10
> 
> 时间：2012-05-30T19:19:09.753
> 
> 标签：jquery, resize, window, colorbox

Colorbox 似乎非常适合“开箱即用”的响应式设计。我用百分比覆盖默认尺寸设置，然后设置最大值，这样事情就不会在大屏幕上失控：

```
$.colorbox.settings.width = "92%";
$.colorbox.settings.height = "90%";
$.colorbox.settings.maxHeight = 850;
$.colorbox.settings.maxWidth = 1200; 
```

这样可行。我还将 cboxTitle 元素的大小调整为正好是它上面的 img 的宽度，这样我有时很长的标题总是可以很好地排列。

```
$(document).bind('cbox_complete', function(){
    var photoWidth = $(".cboxPhoto").innerWidth();
    var photoContainer = $("#cboxContent").outerWidth();
    var leftPix = (photoContainer - photoWidth) / 2;    
    $("#cboxTitle").css({'left' : leftPix, 'width' : photoWidth});
}); 
```

这似乎也有效。这留下了可怕的部分：处理窗口调整大小事件。我正在尝试以下

```
$(window).on("resize", function(){
    $.fn.colorbox.resize({
        height: "90%",
        width: "92%"
    });
}); 
```

（我实际上使用自定义[debouncedresize](https://github.com/louisremi/jquery-smartresize)事件而不是标准 jquery 调整大小，以限制 Webkit 中调整大小事件的流，但我将这部分排除在外，因为它不相关。另外，我在重复在调整大小选项中使用相同的宽度和高度百分比值，否则不会发生调整大小。:()

最后一部分根本不起作用。我将尝试分解问题：

1) 当用户以标准的 destop 大小加载颜色框，然后将视口缩放得更窄时，`cboxPhoto`元素的高度无法正确缩放。宽度正确缩小，但高度保持不变，产生“挤压”。所以我尝试添加`height:auto`到 css for `cboxPhoto`. 这恢复了纵横比，但现在`cboxPhoto`元素太大了，并且被剪裁了。我以前没有在模态框内获得滚动条。如果我关闭颜色框并以新的浏览器视口宽度重新打开它，照片的大小将不会如此。

`cboxTitle`2）没有重新计算css 。颜色框调整大小功能似乎不会触发`cbox_complete`事件。不应该吗？

我很想解决这些问题，但我也感觉到，考虑到插件的当前状态，解决这个用例的最简单方法可能是在调整窗口大小时关闭并重新加载整个颜色框，但回到与用户在调整大小事件之前查看的画廊中的内容完全相同。但我不清楚如何编码。提前感谢您的帮助！

PS大家，请不要说只有设计师才能调整窗口大小。对不起，我只是不买那个。当屏幕上出现令人惊叹的照片时，人们会放大，尤其是平板电脑一直在旋转......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-14T09:20:41.540

我会阻止`$.resize`在这种情况下使用。我认为这是`CSS Media Queries`响应式设计的动力。那么为什么不使用媒体查询。

我从未`colorbox`在实践中尝试过，但我想这会为元素`$.colorbox.settings.width = "92%";`插入一个内联`CSS`。

删除这些设置。防止颜色框元素中的任何内联 CSS。然后简单地使用 CSS 来为更大`width`的`height`桌面提供初始缩放。

并用于`Media Queries`在窗口调整大小时放大模态大小。

```
#colorbox{
   height: 90%;
   width: 92%;
}

@media (max-width: 992px) { 
   #colorbox{
       height: 90%;
       width: 92%;
   }
} 
```

**多重查询也是完全合法的。**因此，您可以在更小的尺寸上设置模态尺寸。

```
@media (max-width: 430px) { 
   #colorbox{
       height: 96%;
       width: 98%;
   }
} 
```

您可能会使用`px`而不是`%`，但在这种情况下，当从一种尺寸移动到另一种尺寸时，您的颜色框模态宽度/高度会稍微跳跃。但是在这种情况下，您可以使用 CSS 的`transition`属性使调整大小的过程更加顺畅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T16:33:01.453

你能简单地在调整大小时设置颜色框窗口的 CSS 高度和宽度吗？

```
$(window).on("resize", function(){
    //check if colorbox is open. This 'if' is from stackoverflow, I haven't tested
    if($('#colorbox').length && $('#colorbox').css('display') != 'none') {
        //replace colorboxID with the correct ID colorbox uses
        document.getElementById('coloboxID').style.width='92%';
        document.getElementById('coloboxID').style.height='90%';
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T21:03:46.590

你有没有尝试过这样的事情：

```
 if($('#colorbox').length && $('#colorbox').css('display') != 'none') { 
        setTimeout(function(){
                $.colorbox.resize({
                    width: '100%',
                    height: '80%'
                });
            }, 1500);
    } 
```

尝试不使用“.fn”并且也有一些延迟......

# asp.net-mvc - 远程验证适用于文本框失去焦点，但 ModelState.IsValid 始终为真

> ID：10822825
> 
> 赞同：2
> 
> 时间：2012-05-30T19:19:12.277
> 
> 标签：asp.net-mvc, jquery-validate, remote-validation

我有一个具有 RemoteValidation 属性的模型。

当我输入数据库中已经存在的“测试”并单击除“确定”按钮以外的区域时，我会看到红色：“测试已经存在”。到现在为止还挺好。当我点击然后 OK buttona 发布到我要求的 Create 操作

ModelState.IsValid 总是正确的？？？

因此数据被输入数据库，我得到一个重复的异常......

我知道这以前在我的网站上有效，我只是改变了一些东西，而颠覆不是

激活啊啊啊...

我错了什么？

```
[HttpPost]
        public ActionResult Create(Release release)
        {
            if (ModelState.IsValid)
            {
                _releaseDataProvider.AddRelease(release);
                return Json(new { success = true });
            }
            return PartialView(release);            
        }

public JsonResult ReleaseExists(string Name)
        {
            bool releaseExists = _releaseDataProvider.ReleaseExists(Name);
            if (!releaseExists)
            {
                return Json(true, JsonRequestBehavior.AllowGet);
            }
            else
            {
                return Json(false, JsonRequestBehavior.AllowGet);
            }
        }

$.ajaxSetup({ cache: false });

     $(document).ready(function () {
         $('#CreateRelease').click(function (event) { loadDialog(this, event, createRelease); });        
     });

     function loadDialog(link, e, ajaxRequest) {

         e.preventDefault();        
         var $title = link.innerHTML;
         var $contenturl = $(link).attr('href');
         var $dialog = $('<div></div>');
         var $height = $(link).attr('data-dialog-height');
         var $width = $(link).attr('data-dialog-width');

         $dialog.load($contenturl).dialog({
             title: $title,
             autoOpen: true,
             modal: true,
             show: 'fade',
             hide: 'fade',
             width: $width,
             height: $height,
             buttons: {
                 "OK": function () {
                     ajaxRequest($(this), $('form', this));
                 },
                 "Cancel": function () {
                     $dialog.dialog("close");
                 }
             }
         });        
     } 

     function createRelease(dlg, form) { 
         $.ajax({
             url: $(form).attr('action'),
             type: 'POST',
             data: form.serialize(),
             success: function (response) {
                 if (response.success) {
                     dlg.dialog("close"); 
                     // Update UI                    
                 }
                 else {
                     // Reload the dialog with the form to show model/validation errors 
                     dlg.html(response);
                 }
             },
             error: function (XMLHttpRequest, textStatus, errorThrown) {              
                 alert(textStatus + '-' + XMLHttpRequest.responseText);
             }
         });
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T19:30:31.167

> ModelState.IsValid 总是正确的？？？

这很正常，只有当您通过 AJAX 调用控制器操作时才会应用远程验证规则。正常提交表单时**不会**调用相同的操作。因此，您可以在 POST 操作中调用相应的验证方法：

```
[HttpPost]
public ActionResult Create(Release release)
{
    if (ModelState.IsValid && !_releaseDataProvider.ReleaseExists(release.Name))
    {
        _releaseDataProvider.AddRelease(release);
        return Json(new { success = true });
    }
    return PartialView(release);            
} 
```

# .net - 是否有用于编码和解码 google vp8 视频的 .NET 库？

> ID：10822826
> 
> 赞同：0
> 
> 时间：2012-05-30T19:19:13.623
> 
> 标签：.net, video-encoding, decoding, vp8

我需要一个 .NET 库来编码和解码 google vp8 视频。我有哪些选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:33:35.870

[http://code.google.com/p/ffmpeg-sharp/source/browse/#svn%2Ftrunk%2Fffmpeg-sharp%2Fsrc](http://code.google.com/p/ffmpeg-sharp/source/browse/#svn%2Ftrunk%2Fffmpeg-sharp%2Fsrc)

但是您可能会注意到它处于 alpha 版本。但是 0.6 的 ffmpeg 支持 vp8

# solr - 带有嵌入式 ZooKeeper 服务器的 SolrCloud 说：“ZooKeeperServer 未运行”

> ID：10822827
> 
> 赞同：2
> 
> 时间：2012-05-30T19:19:19.703
> 
> 标签：solr, apache-zookeeper, solrcloud

当我启动我的 SolrCloud 服务器时，Solr 打开一个到嵌入式 ZooKeeper 服务器的套接字连接，但显示：“ZooKeeperServer 未运行”。

它没有说明原因。

我怎样才能弄清楚为什么 ZooKeeper 服务器实际上没有运行？

```
2012-05-30 15:02:36.538 [main] INFO  org.apache.solr.cloud.SolrZkServer - STARTING EMBEDDED STANDALONE ZOOKEEPER SERVER at port 9983
2012-05-30 15:02:36.545 [Thread-14] INFO  o.a.z.server.ZooKeeperServerMain - Starting server
2012-05-30 15:02:36.552 [Thread-14] INFO  o.a.zookeeper.server.ZooKeeperServer - Server environment:zookeeper.version=3.3.3-1203054, built on 11/17/2011 05:47 GMT
... [snip] ...
2012-05-30 15:02:37.092 [main-SendThread()] INFO  org.apache.zookeeper.ClientCnxn - Opening socket connection to server localhost/127.0.0.1:9983
2012-05-30 15:02:37.097 [main-SendThread(localhost:9983)] INFO  org.apache.zookeeper.ClientCnxn - Socket connection established to localhost/127.0.0.1:9983, initiating session
2012-05-30 15:02:37.097 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:9983] INFO  o.a.zookeeper.server.NIOServerCnxn - Accepted socket connection from /127.0.0.1:43635
2012-05-30 15:02:37.100 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:9983] WARN  o.a.zookeeper.server.NIOServerCnxn - Exception causing close of session 0x0 due to java.io.IOException: ZooKeeperServer not running
2012-05-30 15:02:37.100 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:9983] INFO  o.a.zookeeper.server.NIOServerCnxn - Closed socket connection for client /127.0.0.1:43635 (no session established for client)
2012-05-30 15:02:37.101 [main-SendThread(localhost:9983)] INFO  org.apache.zookeeper.ClientCnxn - Unable to read additional data from server sessionid 0x0, likely server has closed socket, closing socket connection and attempting reconnect 
```

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-06-21T17:51:15.983

具体就我而言，似乎在我的目录中有一堆额外的文件`conf/`会导致问题。尽量减少该目录中所需的文件数量，以确保嵌入式 Zookeeper 正常运行。

# java - onChat() 没有被调用

> ID：10822832
> 
> 赞同：-1
> 
> 时间：2012-05-30T19:19:35.337
> 
> 标签：java, bukkit

此代码应该等待`.help`在聊天中输入，然后发送一条消息说`"Help text."`。什么都没发生。

```
package testplugin.HelpMe;
import java.util.logging.Logger;
import org.bukkit.plugin.java.JavaPlugin;
import org.bukkit.command.Command;
import org.bukkit.command.CommandSender;
import org.bukkit.event.player.PlayerChatEvent;

public class HelpMe extends JavaPlugin implements {

    Logger log;

    public void onEnable(){
        log = this.getLogger();
        log.info("Your plugin has been enabled!");
    }

    public void onDisable(){
        log.info("Your plugin has been disabled.");
    }

    public boolean onCommand(CommandSender sender, Command command, String label, String[] args) {
        return false;

      }
      public void onChat(PlayerChatEvent event) {
            if (event.getMessage().startsWith(".help"))
            {
              event.getPlayer().sendMessage("Help text.");
              event.setCancelled(true);
            }
      }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T19:25:24.600

我想你想要`@EventHandler`注释：

```
@EventHandler public void onChat(PlayerChatEvent event) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-05T15:30:52.597

你错过了 3 件事：

*   `implements Listener`（您在提供的代码中错过了，复制粘贴错误？）
*   方法上的`@EventHandler`注解`onChat`
*   实际注册您的插件以侦听事件的代码，`getServer().getPluginManager().registerEvents(this, this);`位于您的`onEnable`

因此，最终结果将如下所示：

```
package testplugin.HelpMe;
import java.util.logging.Logger;
import org.bukkit.plugin.java.JavaPlugin;
import org.bukkit.command.Command;
import org.bukkit.command.CommandSender;
import org.bukkit.event.player.PlayerChatEvent;
import org.bukkit.event.Listener;
import org.bukkit.event.EventHandler;

public class HelpMe extends JavaPlugin implements Listener {

    Logger log;

    public void onEnable(){
        log = this.getLogger();
        log.info("Your plugin has been enabled!");
        //Tell the server that this plugin provides an event listener (which is this class), and to invoke event handlers in that class
        getServer().getPluginManager().registerEvents(this, this);
    }

    public void onDisable(){
        log.info("Your plugin has been disabled.");
    }

    public boolean onCommand(CommandSender sender, Command command, String label, String[] args) {
        return false;
    }

    //Marks that this method handles the PlayerChatEvent
    @EventHandler
    public void onChat(PlayerChatEvent event) {
        if (event.getMessage().startsWith(".help"))
        {
          event.getPlayer().sendMessage("Help text.");
          event.setCancelled(true);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T00:37:06.460

我只需要添加到我的代码中，它就完美运行了！

```
public void onEnable() {
    getServer().getPluginManager().registerEvents(this, this);
} 
```

并且`@EventHandler`在前面`onChat()`。

完成的代码：

```
package testplugin.HelpMe;
import java.util.logging.Logger;
import org.bukkit.plugin.java.JavaPlugin;
import org.bukkit.command.Command;
import org.bukkit.command.CommandSender;
import org.bukkit.event.player.PlayerChatEvent;

public class HelpMe extends JavaPlugin implements {

Logger log;

public void onEnable(){
    log = this.getLogger();
    log.info("Your plugin has been enabled!");
    getServer().getPluginManager().registerEvents(this, this);
}

public void onDisable(){
    log.info("Your plugin has been disabled.");
}

public boolean onCommand(CommandSender sender, Command command, String label, String[] args) {
    return false;

  }
  @EventHandler public void onChat(PlayerChatEvent event) {
        if (event.getMessage().startsWith(".help"))
        {
          event.getPlayer().sendMessage("Help text.");
          event.setCancelled(true);
        }
  }
} 
```

# mysql - PHP/MYSQL 匹配查询

> ID：10822834
> 
> 赞同：1
> 
> 时间：2012-05-30T19:19:39.550
> 
> 标签：mysql, match, against

我正在尝试对查询进行匹配，但它不起作用。我在这两个字段上创建了一个全文索引。但是在“关系”这个词之前出现了 sql 错误。这是 sql：

```
"SELECT * FROM pages WHERE MATCH (shdescript,ldescript) AGAINST (romance, relationship)"; 
```

我也尝试过仅搜索 shdescript 并仅搜索 ldescript 但得到相同的错误。我也试过不带空格的搜索字符串。据我所知，您应该在括号中用逗号分隔搜索字符串的单词。我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T19:24:13.323

在搜索字符串周围添加引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:29:02.373

```
"SELECT * FROM pages WHERE MATCH (shdescript,ldescript) AGAINST ('romance', 'relationship')"; 
```

还要确保保护自己免受讨厌的 SQL 注入威胁，请[在此处](http://phptutorial.info/?mysql-real-escape-string)阅读更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T19:30:07.547

尝试引用您的字符串（即“浪漫”和“关系”）

```
SELECT * FROM pages WHERE MATCH (shdescript,ldescript) AGAINST ('romance', 'relationship') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T19:30:21.467

我相信你`AGAINST`必须在引号中。从：

[http://dev.mysql.com/doc/refman/4.1/en/fulltext-search.html#function_match](http://dev.mysql.com/doc/refman/4.1/en/fulltext-search.html#function_match)

> AGAINST 接受一个要搜索的字符串和一个可选的修饰符，指示要执行的搜索类型。搜索字符串必须是文字字符串，而不是变量或列名。

# node.js - Nodejs检测浏览器pushState

> ID：10822837
> 
> 赞同：1
> 
> 时间：2012-05-30T19:19:53.430
> 
> 标签：node.js

我目前有`res.redirect('/login')`，但这不适用于不支持 pushState 的浏览器。所以我需要一种方法来检测用户浏览器，以便我可以重定向`res.redirect('/#login')`不支持 pushState 的浏览器。
如何在 Nodejs 中检测用户浏览器是否支持 pushState？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:32:35.680

您可以实现[ua-parser](https://github.com/tobie/ua-parser)，然后使用[Can I use... 矩阵](http://caniuse.com/#search=pushs)来构建支持它的浏览器版本。这不是很理想，但我想不出另一种从节点进行特征检测的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:37:41.210

您可以使用 cookie 将该值传输到服务器。否则，将很难区分客户端（例如，如果您想发送包含相关数据的 HTTP 请求）。要接收 cookie，您需要在设置后发送 HTTP 请求。

使用用户代理来检测功能不是面向未来的，不要那样做。

附带说明：在 Twitter 最近取消了对 hash-bangs 的支持之后，您可以继续支持这种在网页上显示用户位置的**好方法。**（说真的，不要那样做。）

# vbscript - 用vbs搜索数组

> ID：10822855
> 
> 赞同：0
> 
> 时间：2012-05-30T19:20:42.403
> 
> 标签：vbscript

我正在尝试在数组中搜索打印机，如果打印机存在，则在 HTA 中显示名称。该位工作正常，但是当在阵列中找不到打印机时，将显示设备上所有已安装的打印机。有没有办法只显示找到的打印机

```
Set objFSO = CreateObject("Scripting.FileSystemObject")
arrPrinters = Split(objFSO.OpenTextFile("C:\Windows\DEW\denied-printers.txt" ,ForReading).ReadAll(), VbCrLf)

Set objWMIService = GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")

Set colInstalledPrinters =  objWMIService.ExecQuery("Select * from Win32_Printer")
For Each objPrinter in colInstalledPrinters
    localprinter = objPrinter.Name
    For Each strLine in arrPrinters
        If inStr(localprinter,strLine) > 0 Then 
            strHTML = strHTML & "<tr><td>" & localprinter & "</td></tr>"
    End If 
Next
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:42:50.470

试试这个

```
If inStr(localprinter,strLine) > 0 OR inStr(localprinter,strLine) = NULL Then 

End If 
```

问题是如果数组为空，strline 为 NULL，当你在 inStr 中使用它时，它返回 NULL 而不是 '0'。这是一种可能性 – tunmise fasipe 3 分钟前 编辑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T22:10:31.550

你的主要问题 - 我猜不知道 yoyr 文件的内容 - 是 instr(textToSearch, searchString) 你切换了两个参数。无论如何，这是我测试过的代码版本。

```
const ForReading = 1
strComputer = "."
set objFSO = createObject("Scripting.FileSystemObject")
printers = objFSO.OpenTextFile("denied-printers.txt" ,ForReading).ReadAll()
set objWMIService = GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")
set colInstalledPrinters =  objWMIService.ExecQuery("Select * from Win32_Printer")
for Each objPrinter in colInstalledPrinters
   localprinter = objPrinter.Name
   if instr(printers, localprinter) then
     strHTML = strHTML & "<tr><td>" & localprinter & "</td></tr>"
   end if
next 
```

编辑：这里是独立的 vbscript 版本，将其保存到 .vbs 文件并运行以进行测试

```
on error resume next
const ForReading = 1 
strComputer = "." 
file = "denied-printers.txt"
set objFSO = createObject("Scripting.FileSystemObject")
set objWMIService = GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2") 
set colInstalledPrinters =  objWMIService.ExecQuery("Select * from Win32_Printer")
if err.number=0 then
  printers = objFSO.OpenTextFile(file ,ForReading).ReadAll()
  if err.number=0 then
    set objWMIService = GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2") 
    set colInstalledPrinters =  objWMIService.ExecQuery("Select * from Win32_Printer") 
    for Each objPrinter in colInstalledPrinters 
       localprinter = objPrinter.Name 
       if instr(printers, localprinter) then 
         wscript.echo localprinter & " found in " & file
       end if 
    next 
  else
    wscript.echo "file " & file & " not found, showing all printers"
    for Each objPrinter in colInstalledPrinters 
      wscript.echo objPrinter.Name
    next 
  end if
else
  wscript.echo "Error" & err.description
end if 
```

# ios - 是否可以将 UINavigationController 弹出两次？

> ID：10822857
> 
> 赞同：12
> 
> 时间：2012-05-30T19:20:57.023
> 
> 标签：ios, uinavigationcontroller

是否可以弹出导航控制器两次？我有这个导航结构：

查看一---->查看二----->查看三

我想要完成的是，通过点击视图三上的一行，直接返回视图一。我已经通过协议委托从三到二完成了它，但是在视图一中设置委托不起作用并且设置两个连续的委托协议都弹出导航控制器，给我错误：嵌套导航控制器活动（或类似的东西）。

任何帮助，将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-30T19:28:21.310

有几个弹出选项

```
- (UIViewController *)popViewControllerAnimated:(BOOL)animated
- (NSArray *)popToRootViewControllerAnimated:(BOOL)animated
- (NSArray *)popToViewController:(UIViewController *)viewController animated:(BOOL)animated 
```

*   第一个弹出顶部控制器。
*   第二个允许您弹出整个堆栈以到达根目录。
*   第三个允许您弹出到您引用的任何 viewController。您可以获取 viewController ，`self.navigationController.viewControllers`然后使用数组来获取您想要弹出的特定 viewController

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-06-11T11:08:35.063

使用以下代码。您可以使用任何数字而不是`-3`弹出到不同的级别。

对象-C：

```
ViewController *View = [self.navigationController.viewControllers objectAtIndex:self.navigationController.viewControllers.count-3];
    [self.navigationController popToViewController:View animated:YES]; 
```

斯威夫特 3.0*：

```
let controller = self.navigationController?.viewControllers[(self.navigationController?.viewControllers.count)! - 3]        
self.navigationController?.popToViewController(controller!, animated: true) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-08-07T12:13:57.060

你可以试试这个

```
[self.navigationController popToViewController:[[self.navigationController viewControllers] objectAtIndex:1] animated:YES]; 
```

希望能帮助到你！！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-24T09:26:54.817

'self' 似乎在第一次流行之后被释放

```
UINavigationController *navigationController = self.navigationController;
[navigationController popViewControllerAnimated:NO];
[navigationController popViewControllerAnimated:YES]; 
```

# javascript - Javascript从中获取标题值

> ID：10822862
> 
> 赞同：2
> 
> 时间：2012-05-30T19:21:15.340
> 
> 标签：javascript, ajax, dom

一般来说：我想要的是让 PHP 输出一个带有书籍的无序列表。当用户单击其中一个标题时，将从数据库中提取详细信息并使用 AJAX 将其插入页面。

我似乎无法弄清楚如何使用 javascript 从 <li> 中提取标题值，因此我可以将其传递给 AJAX。

（为了简化示例代码，我省略了 AJAX 部分，而是使用了警报。）

```
<html>
<head>
<script type="text/javascript">

window.onload = function()
{

      var shelve = document.getElementById( 'books' );
      var books = shelve.getElementsByTagName( 'li' );
      for( var i=0; i < books.length; i++ ){
         books[i].onclick = function(){
        alert(books[i].title); //I know this doesn't work
         };
      }
}

</script>
</head>
<body>

<div id="txtHint"><b>Book info will be listed here using AJAX.</b></div>

<?php show_allBooks(); ?>

</body>
</html>

<?php

function show_allBooks(){

    db_connect();
    $query = "Select * from tblBooks order by title";
    $result = mysql_query($query);
    echo "<ul id='books'>";
    while ($row = mysql_fetch_array($result))
    {
        echo "<li title='" . $row['id'] . "'>" . $row['title'] . "</li>";
    }
    echo "</ul>";
    db_close();
}
?> 
```

我尝试过使用以下代码的变体，但这似乎也不起作用。

```
books[i].getAttribute("title") 
```

谁能指出我正确的方向？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T19:24:21.250

到您的`onclick`处理程序被调用时，`i`已增加到`books.length`. 相反，您可以参考`this`来获取元素。

```
var shelve = document.getElementById('books');
var books = shelve.getElementsByTagName('li');
for(var i = 0; i < books.length; i++) {
    books[i].onclick = function () {
        alert(this.title); 
    };
} 
```

[http://jsfiddle.net/gilly3/cPMAU/](http://jsfiddle.net/gilly3/cPMAU/)

但是，如果您*确实*需要知道`i`点击处理程序中的值，您可以通过在工厂中创建处理程序来完成，这是一个返回函数的函数：

```
function createBookHandler(books, i) {
    return function() {
        alert(books[i].title);
    };
}
var shelve = document.getElementById('books');
var books = shelve.getElementsByTagName('li');
for(var i = 0; i < books.length; i++) {
    books[i].onclick = createBookHandler(books, i);
} 
```

[http://jsfiddle.net/gilly3/cPMAU/1/](http://jsfiddle.net/gilly3/cPMAU/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:27:41.780

从...开始

```
books.item(i) 
```

然后它取决于标题如何存储在列表中。如果它是

```
<li title=""> 
```

然后是books.item(i).getAttribute("title")

但是关闭相关的答案可能更重要。

# c# - XML 到 SelectList 使用 LINQ

> ID：10822865
> 
> 赞同：1
> 
> 时间：2012-05-30T19:21:35.377
> 
> 标签：c#, .net, linq, selectlistitem

我正在尝试从 XML 字符串中获取选择列表...

```
<?xml version="1.0" encoding="utf-8"?>
<selectListItemDefinition id="UPMCTypes">
  <item key="bla1" value="bla" />
  <item key="bla2" value="bla" />
  <item key="bla3" value="bla" />
  <item key="bla4" value="bla" />
  <item key="bla5" value="bla" />
  <item key="bla6" value="bla" />
  <item key="bla7" value="bla" />
  <item key="bla8" value="bla" />
  <item key="bla9" value="bla" />
  <item key="bla10" value="bla" />
  <item key="bla11" value="bla" />
</selectListItemDefinition> 
```

那将是我试图将其转换为 SelectList 的 XML 字符串。这就是我正在尝试的方式...

```
List<SelectListItem> SListItem =
(
    from xmlSList in xDoc.Descendants("selectListItemDefinition")
    let listItem = xmlSList.Elements("item")
    select new SelectListItem
    {
        Key = xmlSList.Attribute("key").Value,
        Value = xmlSList.Attribute("value").Value
    }
).ToList(); 
```

这只会为我获得第一个键值对。

```
Key    "blah1"  string
Value  "blah"   string 
```

现在我想这是因为我在这里只得到一个元素？但我不确定我会做些什么来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T19:47:44.567

我认为您的查询有问题，因为您应该遇到异常。

您正在尝试选择 的属性“键”和“值” `<selectListItemDefinition>`，但它们不存在。而且您实际上并没有`listItem`在您的选择子句中使用。

您的第一行返回一个`IEnumerable<XElement>`名为“selectListItemDefinition”的所有节点。您的第二行只是将其`IEnumerable<>`分配给名为“item”的子元素并将其分配给名为的变量`listItem`。

当你应该做的是第二个查询来迭代`<selectListItemDefinition>`元素而不是分配它。

所以替换`let listItem = xmlSList.Elements("item")`为`from listItem in xmlSList.Elements("item")`它应该像你期望的那样运行。

完整的查询将是：

```
var SListItem = 
                (
                    from xmlSList in xDoc.Descendants("selectListItemDefinition")
                    from listItem in xmlSList.Elements("item")
                    select new SelectListItem
                    {
                        Key = listItem .Attribute("key").Value,
                        Value = listItem .Attribute("value").Value
                    }
                ).ToList(); 
```

如果您 100% 确定`<item>`您的 XML 文档中调用的唯一元素是您想要的，您可以将第一行和第二行替换为单个行`from listItem in xDoc.Descendants("item")`，您将获得相同的行为。

# javascript - 在 Knockout JS 中将值传递给 ko.computed

> ID：10822873
> 
> 赞同：15
> 
> 时间：2012-05-30T19:22:07.747
> 
> 标签：javascript, knockout.js, asp.net-mvc-4

我一直在使用 MVC4 SPA 和 knockoutJs，

我的问题是我想将一个值传递给 ko.computed。这是我的代码。

```
<div data-bind="foreach: firms">
<fieldset>
    <legend><span data-bind="text: Name"></span></legend>
    <div data-bind="foreach: $parent.getClients">
        <p>
            <span data-bind="text: Name"></span>
        </p>
    </div>
</fieldset>
</div>

self.getClients = ko.computed(function (Id) {
    var filter = Id;
    return ko.utils.arrayFilter(self.Clients(), function (item) {
        var fId = item.FirmId();
        return (fId === filter);
    });
}); 
```

我只想将公司名称显示为标题，然后在其下方显示客户端。正在调用该函数，但 Id 未定义（我也尝试过使用“Firm”），如果我更改：

```
var filter = id;     TO      var filter = 1; 
```

它工作正常，

所以...你如何将值传递给 ko.computed？它不需要是 Id，也可以是 Firm 对象等。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-31T04:18:06.207

每个公司确实应该包含一个客户列表，但是您可以使用我认为的常规函数​​并将其传递给公司：

```
self.getClientsForFirm = function (firm) {
    return ko.utils.arrayFilter(self.Clients(), function (item) {
        var fId = item.FirmId();
        return (fId === firm.Id());
    });
}); 
```

然后在 html 中， $data 是当前模型，在您的情况下是公司：

```
<div data-bind="foreach: $root.getClientsForFirm($data)"> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-30T19:25:36.883

Knockout 不允许您将任何内容传递给计算函数。那不是它的用途。如果您愿意，您可以在那里使用常规功能。

另一种选择是让数据已经在您执行第一次 foreach 的数据集中。这样，你就不用`$parent.getClients`了，而更像`$data.clients`.

# redis - 使用redis cli执行批量命令

> ID：10822877
> 
> 赞同：75
> 
> 时间：2012-05-30T19:22:18.147
> 
> 标签：redis

我有一个长文本文件，其中包含我需要使用 redis 命令行界面执行的 redis 命令：

例如

```
DEL 9012012
DEL 1212
DEL 12214314 
```

等等

我似乎想不出一种方法来比一次输入命令更快。有几十万行，所以我不想把它们全部堆成一个 DEL 命令，它们也不需要一次全部运行。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-05-30T21:02:38.397

以下代码适用于我在 mac 上使用 redis 2.4.7

```
./redis-cli < temp.redisCmds 
```

这能满足你的要求吗？或者您是否想看看是否有办法以编程方式更快地做到这一点？

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2015-03-11T08:27:12.017

如果您不想制作文件，请使用`echo`和`\n`

```
echo "DEL 9012012\nDEL 1212" | redis-cli 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-09-29T20:49:18.460

可`redis-cli --pipe`用于批量插入。它从 2.6-RC4 和 Redis 2.4.14 开始可用。例如：

```
cat data.txt | redis-cli --pipe 
```

更多信息：[http ://redis.io/topics/mass-insert](http://redis.io/topics/mass-insert)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-10-08T16:58:44.963

我知道这是一个旧线程，但添加这个是因为它似乎错过了其他答案，而且对我来说效果很好。

如果您不想使用 echo 或显式添加或创建新文件，则使用[heredoc在这里效果很好 -](https://tldp.org/LDP/abs/html/here-docs.html)`\n`

```
redis-cli <<EOF
select 15
get a
EOF 
```

# javascript - 将超链接放入脚本

> ID：10822879
> 
> 赞同：0
> 
> 时间：2012-05-30T19:22:43.650
> 
> 标签：javascript, php, mysql, dom-events

我不知道这里到底是什么问题，但我需要将电话号码、网站和电子邮件变成超链接，我真的不知道从哪里开始。

我在使用锚标记之前尝试了一些方法，但没有成功。该信息存储在我的 SQL 表中，并由一个 PHP 脚本访问，该脚本允许该脚本使用数据，只需要建立必要的链接。

```
function geo() {
    var id = $.QueryString("id"),
        id = (!id) ? "null" : id; // Passing the value null to string
    var loadUrl = 'http://localhost/test/detail.php';
    $.getJSON('http://localhost/test/detail.php?id=' + id, function (data) {
        $.each(data, function (key, val) {
            if (val.Image != "" && val.Image != null) {
                $('#placePic').attr('src', 'images/' + val.Image);
            } else {
                $('#placePic').attr('src', 'images/default_image2.jpg');
            }
            if (val.Name != "" && val.Name != null) {
                $('#placeName').text(val.Name);
            }
            $("#list_All").html("");
            if (val.PhoneNumber != "" && val.PhoneNumber != null) {
                $("#list_All").append("<li><h3>Phone Number :</h3>" + val.PhoneNumber + "</li>");
            } else {
                $("#list_All").append("<li><h3>Phone Number :</h3>No Data Found</li>");
            }
            if (val.Address != "" && val.Address != null) {
                $("#list_All").append("<li><h3>Address :</h3>" + val.Address + "</li>");
            } else {
                $("#list_All").append("<li><h3>Address :</h3>No Data Found</li>");
            }
            if (val.Email != "" && val.Email != null) {
                $("#list_All").append("<li><h3>Email ID :</h3>" + val.Email + "</li>");
            } else {
                $("#list_All").append("<li><h3>Email ID :</h3>No Data Found</li>");
            }
            if (val.Website != "" && val.Website != null) {
                $("#list_All").append("<li><h3>Website :</h3>" + val.Website + "</li>");
            } else {
                $("#list_All").append("<li><h3>Website :</h3>No Data Found</li>");
            }
            $("#pom_btn").attr("href", "http://localhost/test/on_map.html?id=" + val.userId + "&lat=" + val.Lat + "&lon=" + val.Lon);
        });
    });
}
window.onload = function () {
    geo();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:33:54.087

试试这个：

```
function geo() {
    var id = $.QueryString("id"),
        id = (!id) ? "null" : id; // Passing the value null to string
    var loadUrl = 'http://localhost/test/detail.php';
    $.getJSON('http://localhost/test/detail.php?id=' + id, function (data) {
        $.each(data, function (key, val) {
            if (val.Image != "" && val.Image != null) {
                $('#placePic').attr('src', 'images/' + val.Image);
            } else {
                $('#placePic').attr('src', 'images/default_image2.jpg');
            }
            if (val.Name != "" && val.Name != null) {
                $('#placeName').text(val.Name);
            }
            $("#list_All").html("");
            if (val.PhoneNumber != "" && val.PhoneNumber != null) {
                $("#list_All").append("<li><h3>Phone Number :</h3>" + 
                    "<a href='tel:" + val.PhoneNumber + "'>" + val.PhoneNumber + "</a></li>");
            } else {
                $("#list_All").append("<li><h3>Phone Number :</h3>No Data Found</li>");
            }
            if (val.Address != "" && val.Address != null) {
                $("#list_All").append("<li><h3>Address :</h3>" + val.Address + "</li>");
            } else {
                $("#list_All").append("<li><h3>Address :</h3>No Data Found</li>");
            }
            if (val.Email != "" && val.Email != null) {
                $("#list_All").append("<li><h3>Email ID :</h3>" 
                    "<a href='mailto:" + val.Email + "'>" + val.Email + "</a></li>");
            } else {
                $("#list_All").append("<li><h3>Email ID :</h3>No Data Found</li>");
            }
            if (val.Website != "" && val.Website != null) {
                $("#list_All").append("<li><h3>Website :</h3>" + 
                    "<a href='" + ((val.Website.indexOf("http")!=0)?"http://":"") + val.Website +
                    "'>" + val.Website + "</a></li>");
            } else {
                $("#list_All").append("<li><h3>Website :</h3>No Data Found</li>");
            }
            $("#pom_btn").attr("href", "http://localhost/test/on_map.html?id=" + val.userId + "&lat=" + val.Lat + "&lon=" + val.Lon);
        });
    });
}
window.onload = function () {
    geo();
} 
```

对于网站链接，您需要在其前面添加“http://”或“https://”。我做了一个简单的测试，但根据您的情况可能需要更完整的测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:34:13.337

```
 $("#list_All").append("<li><a href='" + val.Website + "'>Website</a></li>"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T19:34:13.537

仅打印地址不会使其成为超链接。您必须在其周围包裹一个锚标记。

例如：

```
$("#list_All").append("<li><h3>Website :</h3><a href='" + val.Website + "'>" + val.Website + "</a></li>"); 
```

# php - WordPress 未来页面问题（未显示）

> ID：10822880
> 
> 赞同：0
> 
> 时间：2012-05-30T19:22:47.767
> 
> 标签：php, wordpress, wordpress-theming

我被要求解决 wordpress 网站上的问题。问题是由于应该使用帖子而不是页面这一事实引起的。但是，该站点已启动并正在运行，最快的选择是使用各种 hack 来解决问题。

该网站有一个事件部分，每个事件都是一个页面（这是问题，应该是一个帖子）。为了有即将发生和过去的事件，使用发布日期，因此即将发生的事件具有“未来”的发布状态。

有一个事件列表页面，通过使用正确的 query_post() 可以很好地显示它们。尽管当您单击实际事件（这是未来页面）时会出现问题。如果您以管理员身份登录，则会显示该页面，但如果您未登录，则会显示 404 页面。

现在，如果他们在哪里发帖，那么“未来就是现在！” 插件可以解决这个问题。我有一种感觉，解决这个问题的唯一方法是重写部分核心 Wordpress 文件。

任何建议都会很棒，我对 Wordpress 有很多经验，所以即使你能指出我正确的方向。

干杯，杰森

**[更新]**

感谢 maiorano84 的详细回复。从长远来看，我打算将它们移至帖子，但同时他们要求我们尽快修复它而不更改任何网址（今天他们发送了一封包含事件列表的大量电子邮件，但没有检查任何链接）

在这种情况下，您包含 post_status 未来的解决方案不起作用，因为 wordpress 没有进入加载模板的阶段。wordpress 核心中的某些东西阻止了它走得那么远。理想情况下，如果它们是一个钩子，我可以同时使用它来覆盖此行为，但如果涉及到它，我将暂时编辑核心文件。

**[更新 2]**

我现在知道需要编辑或使用与它们相关的钩子的两个函数。

首先我们`is_404()`需要更改为不将未来页面添加为 404

其次，如果页面是未来的，我们`is_page()`需要返回 true

**[更新 3]**

我已经在核心中找到了如何做到这一点。如果您转到`wp-includes/query.php`第 2682 行。将其复制而不是旧功能，它可以正常工作。如果你有更好的方法请告诉我。谢谢。

```
 /** Future Pages **/
    // Check post status to determine if post should be displayed.
    if ( !empty($this->posts) && ($this->is_single || $this->is_page) ) {
        $status = get_post_status($this->posts[0]);
        $post_status_obj = get_post_status_object($status);;
        if ( !$post_status_obj->public ) {
                if  ( $post_status_obj->protected ) {
                        $this->is_preview = true;
                        print_r($status);
                        if ( 'draft' != $status ) {
                            $this->posts[0]->post_date = current_time('mysql');
                            } else {
                            $this->posts = array();
                        }
                } elseif ( $post_status_obj->private ) {
                    if ( ! current_user_can($read_cap, $this->posts[0]->ID) )
                        $this->posts = array();
                } else {
                    $this->posts = array();
                }
        }
        /** END **/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:19:22.257

您实际上可以在您的页面查询中添加一个“未来”的 post_status 参数。你真的不应该为了做你想做的事而修改你的核心文件。因此，在您的 page.php 和 archive.php 模板（或控制您的事件显示的其他相关模板）上，您可以执行以下操作：

```
<?php
$params = array('posts_per_page'=>-1, 'post_status'=>'publish,future');
$query = new WP_Query($params);
if($query->have_posts()) : while($query->have_posts()) : $query->the_post();
?>
<!-- YOUR PAGE HTML HERE -->
<?php
endwhile;endif;
wp_reset_postdata();
?> 
```

这是一种过度简化，但在相应文件中使用正确的查询将允许您以您喜欢的方式显示您的页面。

更多信息在这里：[http ://codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)

另一件值得考虑的事情，我意识到这不是您问题的一部分，但很可能会解决您的问题：

为什么不在您的客户端服务器上创建一个子域，您可以在其中修复所有内容而不会中断用户体验？您可以轻松地将现有数据库导入您的开发环境，并在不影响实时版本的情况下进行所需的所有更改。

深思熟虑。我的建议是将其扼杀在萌芽状态，并尽快将页面转换为帖子，否则网站将很快变成一团糟，但这是你的决定。

希望这可以帮助。

**更新：**

我仍然建议不要更改核心文件，但如果这是最后的手段，直到一切都得到修复，那就去吧。这是我认为可能有帮助的“WP 友好”解决方案：

```
add_action('wp','future_redirect', 0);
function future_redirect($WP_Object)
{
    $page = is_page() ? get_page(get_the_ID()) : false;
    if($page && $page->post_status == 'future')
    {
        wp_redirect(/*YOUR REDIRECT URL*/);
        exit();
    }
    return $WP_Object;
} 
```

# php - json_encode 在输入中想要什么？

> ID：10822881
> 
> 赞同：0
> 
> 时间：2012-05-30T19:22:48.643
> 
> 标签：php, mysql

来自 php.net[参考](http://us2.php.net/manual/en/function.json-encode.php)：

> 被编码的值。可以是除资源之外的任何类型。此函数仅适用于 UTF-8 编码数据。

但是，我在一种工作正常的情况下使用这样的函数：

```
$result_array = $this->DatabaseObject->_pdoQuery( 'multiple', 'bookmark_model', array( $this->SessionObject->get( 'id' ) ) );
$result_string =  json_encode( $result_array );
$html_string = "<div id='bookmark_data'>" . $result_string . "</div>";
echo $html_string; 
```

但在这种情况下，它不会：

```
$result_array = $this->DatabaseObject->_pdoQuery( 'multiple', 'tweet_model' );
// $tweet_object = new MarkTweet();
$result_string = json_encode( $result_array );
$html_string = "<div id='tweet_data'>" . $result_string . "</div>";
echo $html_string; 
```

在这两种情况下，我都使用 PDO 库来查询数据库。我知道我得到了本质上应该是一个数组数组的东西......但我不知道这是否是资源......或者它是如何在内部构造的。

我可以看到的查询之间没有重大区别……但它们在这里。因为这两种情况非常相似，所以我不知道是什么导致了失败。

以下是查询

```
"bookmark_model" =>         "SELECT * FROM bookmarks WHERE id=? ORDER BY tag, title",

"tweet_model" =>            "SELECT * FROM tweets ORDER BY time DESC LIMIT 7", 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:31:46.750

看起来您的 _pdoQuery() 函数在不同情况下返回不同类型。在尝试对其进行编码之前，您可能需要检查以确保您获得了成功的结果。

# google-chrome - Nppexec 如何将选定的链接从 npp 编辑器传递到外部浏览器

> ID：10822883
> 
> 赞同：0
> 
> 时间：2012-05-30T19:22:53.370
> 
> 标签：google-chrome, notepad++, external-process, nppexec

是否可以将选定的文本从记事本 ++ 传递到浏览器（chrome）？如何传递不是 TEMP_FILE 的路径而是内容？

```
//—need a correction—
set ChromeRun = C:\Documents and Settings\My\Local Settings\Application Data\Google\Chrome\Application\chrome.exe
set TEMP_FILE = $(SYS.TEMP)\npp_sel.txt
// save current selection as ANSI text file
SEL_SAVETO $(TEMP_FILE) :a
// run Chrome.exe for this file
$(ChromeRun) –-homepage $(TEMP_FILE) 
```

你能帮我写这个脚本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T03:22:38.333

NppExec 可以使用 . 直接引用突出显示的单词`$(CURRENT_WORD)`。所以你不需要 sel_saveto 或临时文件。

下面的代码片段适用于 Firefox。您应该能够以明显的方式为 Chrome 修改它。

在 NppExec 控制台窗口中：

```
 `npp_run firefox $(CURRENT_WORD)`, 
```

`$(CURRENT_WORD)`例如，您在 Notepad++ 的当前文件中突出显示的 URL (http://google.com)在哪里。

# c# - 如何有条件地部署程序集

> ID：10822884
> 
> 赞同：1
> 
> 时间：2012-05-30T19:22:55.963
> 
> 标签：c#, visual-studio-2010, msbuild

我为第 3 方应用程序构建扩展。我们无权访问源代码。Visual Studio 有一个后期构建命令，用于将文件复制到所述程序的程序集目录。

```
copy $(TargetDir)$(TargetName).pdb "$(ProgramDropDir)"
copy $(TargetDir)$(TargetName).dll "$(ProgramDropDir)" 
```

当程序启动时，它会加载程序集（实际上它们是在需要时加载的，我认为这是因为 JIT 编译）。我们的应用程序由 49 个程序集组成。部署它们非常慢。我可以通过在项目级别构建来绕过缓慢的构建。这仅构建引用的程序集。这在 95% 的情况下仍然存在问题。通常，实际上只有 1 个程序集发生了变化……但所有程序集都被复制了。

如何改进这个过程？理想情况下...

> A. 仅在程序集发生更改时才部署它们。
> B. 仅在项目文件发生更改时构建。
> C. 仅在我计划运行主应用程序时复制。EG 运行单元测试时不要复制。
> D. 运行 3rd 方应用程序时构建失败。我必须关闭应用程序。这意味着我必须重新登录应用程序并等待它加载（它是一个加载缓慢的野兽）。

我拥有 TFS2010。如果绝对有必要，我愿意接受新工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:12:05.893

**A.**您可以使用[RoboCopy](http://technet.microsoft.com/en-us/library/cc733145%28v=ws.10%29.aspx)来执行此操作。默认情况下，如果源和目标具有不同的时间戳或不同的文件大小，RoboCopy 只会复制文件。

如果您想使用 MSBuild 执行此操作，还可以使用[MSBuild 扩展包](http://msbuildextensionpack.codeplex.com/)中的 RoboCopy 任务。

**B.**如果您使用 CI 服务器，您可以使用轮询 SCM 机制，该机制在 SCM 中发生更改时启动构建。

我不确定你对最后一个的意思。当您“运行”应用程序或某些单元测试时，不会触发任何构建。

# iphone - 在配置时立即使用属性或使用临时变量？

> ID：10822887
> 
> 赞同：4
> 
> 时间：2012-05-30T19:23:11.080
> 
> 标签：iphone, objective-c, ios

如果我有这样的财产：

```
@property (nonatomic, retain) UILabel* lblUsername; 
```

我应该`viewDidLoad`这样做：

```
self.lblUsername = [[[UILabel alloc] init...] autorelease];
self.lblUsername.text = @"A label";
self.lblUsername.... 
```

或者我应该这样做：

```
UILabel* usernameLabel = [[UILabel alloc] init...];
usernameLabel.text = @"A label";
usernameLabel....
self.lblUsername = usernameLabel;
[usernameLabel release]; 
```

我都看过了，但我不确定我应该使用哪个，使用一个比另一个有什么好处？（我知道两者在语法上都是“正确的”并且都有效，但哪个是首选？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T19:43:56.580

我更喜欢第二种方法。唯一真正的好处是减少自动释放池的压力，如果只初始化一些这样的对象，这是最小的。如果使用第一种方法，您不太可能在另一个线程上修改该属性，这可能会导致意外行为，但我认为这是一种风险。对我来说，构建组件然后安装它与安装未完成的组件然后将其构建到位似乎也是不同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T19:56:03.773

我每次都会去第二个。除了在公共接口中粘贴半构建对象没有什么意义（即使您还没有可能暴露错误的代码路径）这一重要事实之外*，*第二种方法更有效且成本为零。对于每个`self.thing.otherThing =`，您至少要发送两条消息，如果有一天您参与了 KVO，还会发送更多消息。这种间接性绝对没有任何好处——它不会让你的代码读起来更清晰，不会让它更简洁，不会让它更安全，什么都没有。

# c# - 使用 UrlRewriter.NET 重定向到 Flash 部分

> ID：10822888
> 
> 赞同：1
> 
> 时间：2012-05-30T19:23:12.167
> 
> 标签：c#, asp.net, urlrewriter.net

我正在使用 UrlRewriter.NET 进行 URL 重写。但我的网站是用 Flash 制作的。所有 Flash 部分都加载到 Default.aspx 中。加载部分后，URL 将更改为，并且可以从**mysite.com/Default.aspx#SectionName访问**

**我的目标是只需键入mysite.com/SectionName**即可访问

 **所以我在我的 web.config 中使用它：

```
<rewrite url="~/Quiniela" to="~/Default.aspx#/Quiniela"/> 
```

我得到一个 404 错误。

如果我使用：

```
<rewrite url="~/Quiniela" to="~/Default.aspx"/> 
```

我得到一个成功的重定向。

所以我的问题是¿我需要在 to="" 参数中写入什么值才能实现重定向到我的闪存部分？**

# c# - 在 UserControl 中包含形状

> ID：10822889
> 
> 赞同：1
> 
> 时间：2012-05-30T19:23:13.840
> 
> 标签：c#, wpf, user-controls

我有一个用户控件。在这个控件中，我希望绘制椭圆。我遇到的问题是我似乎无法阻止椭圆在 UserControl 之外绘制。我希望通过将椭圆添加到视图框内的网格中，它们不会在它之外绘制。

下面你会找到一个截图链接，浅灰色的矩形是自定义控件。我不希望戒指出现在外面。我可以以某种方式裁剪顶部和底部吗？

![用户控件的屏幕截图](../Images/a18f0aeafe77f350a7784d2c2781e5ff.png)

这些线被添加为“GridlinesGrid”的子级。

![对象面板的屏幕截图](../Images/8b7916b69e6b891ba7dcb5f9f413d9e0.png)

任何建议将不胜感激。

问候斯科特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:28:37.143

使用该`ClipToBounds`物业。

这是它的文档：

[http://msdn.microsoft.com/en-us/library/system.windows.uielement.cliptobounds.aspx](http://msdn.microsoft.com/en-us/library/system.windows.uielement.cliptobounds.aspx)

# mysql - 为什么我的慢查询日志中有这么多扩展表？

> ID：10822893
> 
> 赞同：0
> 
> 时间：2012-05-30T19:23:28.317
> 
> 标签：mysql, typo3, mysql-slow-query-log

我想优化我的 mysql 数据库，因此在 my.cnf 中启用了 mysql 慢查询开关。我看到的是许多 sys_log 查询，其中包含来自我的扩展或其他扩展的许多表。这是一个慢查询吗？我怎样才能超越它？

```
# Query_time: 0  Lock_time: 0  Rows_sent: 538  Rows_examined: 23611
SELECT sys_log.event_pid, sys_log.recuid, sys_log.tablename, sys_log.userid,    
sys_log.tstamp, be_users.realName, be_users.email FROM sys_log, be_users WHERE  
sys_log.tablename IN  
('tx_templavoila_datastructure','tx_templavoila_tmplobj','tx_chsystemrecherche_mo','tx_chsystemrecherche_s2','tx_chsystemrecherche_s3','tx_chsystemrecherche_s1','tx_chsystemreche che_da','tx_chsystemrecherche_de','tx_chsystemrecherche_wa','tx_chsystemrecherche_tb','tx_chsffoeag_fund','tx_charbeitsbeispiele_maxmedia','tx_chsammelstellen_plz','tx_chtreeview_example','tx_chspeditionsliste_route','tx_chspeditionsliste_k','tx_chhaendlersuche_plz','tx_veguestbook_entries','tx_lastupdate_custom','tt_content') AND sys_log.details_nr != 0 AND sys_log.userid = be_users.uid ORDER BY tstamp DESC LIMIT 0,1000; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:29:42.417

很久以前有人建议`sys_log`不时裁剪您的表格（即离开过去 30 天），以保持对最近用户活动的预览。

编辑：Jochen Weiland有一个[众所周知的介绍](http://www.slideshare.net/jweiland/spark-plugs-oil-change-filter-how-to-keep-your-typo3-site-running-with-regular-maintenance)`oil changing`- 典型`must-read`位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:31:52.117

您始终可以刷新参考索引，因此如果您想记录长查询设置时间参数为 2 秒或类似的东西，如果您无法清除 sys_log 顺便说一句，它会更快

# c++ - 这个 operator< 语法是什么？

> ID：10822897
> 
> 赞同：0
> 
> 时间：2012-05-30T19:23:53.447
> 
> 标签：c++

我看到了以下代码：

```
struct Point
{
    int x,y;
    bool operator <(const Point &p) const {
        return x<p.x||(x==p.x&&y<p.y);
    }
}; 
```

我不明白这是什么东西：

```
 bool operator <(const Point &p) const {
      return x<p.x||(x==p.x&&y<p.y);
 } 
```

它是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T19:27:56.430

看，很简单。

您已经定义了一个表示点的结构。假设你有两个这样的结构，有问题的代码为它们定义了一个*比较运算符*，这样你就可以编写类似的东西

```
if (pt1 < pt2) { ... 
```

编译器如何处理`<`符号？在 C++ 中，它执行以下操作：表达式`pt1 < pt2`被解释为`pt1.operator < (pt2)`. 即调用具有特殊名称对象的*方法*，参数等于。`operator <``pt1``pt2`

让我们看看它在做什么。`const Point &p`在其参数中表示正在比较的另一个操作数。`const`表示我们不会修改操作数（这允许编译器生成更有效的代码），并且`&`意味着我们不是复制`struct`传递的，而是使用实际`Point`实例（这再次更快，因为没有为比较）。

现在，表达式`x<p.x`检查`x`左侧操作数的值（它是`this`对象，即方法正在运行的上下文中的对象）* 与`x`右侧操作数的值是否相符。接下来，代码检查左手`x`等于右手的情况，因此`y`比较 's。

* * *

**对于语言纯粹主义者：措辞不准确，但对于面向初学者的解释应该没问题。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T19:27:01.170

`operator`在这种特殊情况下，它是 , 的定义`operator <`。当有人这样做时，它会被调用：

```
Point a, b;
if( a < b )
{ 
    //...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T19:27:23.700

`<`它是一个重载运算符的成员函数

```
Point a,b;
a < b; // the member function is used here. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T19:29:05.027

在 C++ 中，结构与类非常相似。您看到的是作为实例方法的运算符定义。`const`它将“this”点与作为参数“p”引用的（不可修改的）点进行比较，并且由于参数列表之后的原因，不允许修改“this”点。

# django - 如何在 django 视图中使用哨兵/乌鸦

> ID：10822898
> 
> 赞同：7
> 
> 时间：2012-05-30T19:24:02.807
> 
> 标签：django, logging, sentry, raven

我设法成功安装哨兵，我可以在本地主机上看到哨兵接口 web 服务并执行

```
raven test http://jsifslkdjfklsdfjklsdjfklMYCODE 
```

工作，测试显示在界面中。

问题是我找不到任何示例或文档来说明我应该在我的视图和设置中添加什么。

我知道我必须添加到我的`INSTALLED_APPS`

'哨兵'，'raven.contrib.django'，

我还添加了

```
SENTRY_DNS = 'http://jsifslkdjfklsdfjklsdjfklMYCODE' 
```

接下来的两行出现在文档中，但没有说明它们去哪里

```
from raven.contrib.django.models import client
client.captureException() 
```

我试过了，`settings.py`但我仍然无法让我的观点记录任何内容。我还添加了这个

```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': True,
    'root': {
        'level': 'WARNING',
        'handlers': ['sentry'],
    },
    'formatters': {
        'verbose': {
            'format': '%(levelname)s %(asctime)s %(module)s %(process)d %(thread)d %(message)s'
        },
    },
    'handlers': {
        'sentry': {
            'level': 'ERROR',
            'class': 'raven.contrib.django.handlers.SentryHandler',
        },
        'console': {
            'level': 'DEBUG',
            'class': 'logging.StreamHandler',
            'formatter': 'verbose'
        }
    },
    'loggers': {
        'django.db.backends': {
            'level': 'ERROR',
            'handlers': ['console'],
            'propagate': False,
        },
        'raven': {
            'level': 'DEBUG',
            'handlers': ['console'],
            'propagate': False,
        },
        'sentry.errors': {
            'level': 'DEBUG',
            'handlers': ['console'],
            'propagate': False,
        },
    },
} 
```

在我看来，我添加了这个：

```
import logging
logger = logging.getLogger()

def home(request,template_name): 
    logger.error('There was some crazy error lol', exc_info=True, extra={'request': request, })
    return render_to_response(template_name,context, context_instance=RequestContext(request)) 
```

除了您在此处看到的内容外，我没有其他与日志记录相关的代码，我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T10:10:57.277

您的“乌鸦”记录器实际上并未使用哨兵处理程序，而只是写入“控制台”。有同样的问题。raven/sentry 的文档缺少一个好的作者。

将您的 raven 记录器更改为：

```
'raven': {
            'level': 'DEBUG',
            'handlers': ['console', 'sentry'],
            'propagate': False,
         }, 
```

并确保将其用作记录器：

```
logger = logging.getLogger('raven') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T02:11:13.270

我不得不在我的 settings.py 上使用这个怪物：

```
import logging
# from raven.contrib.django.handlers import SentryHandler 
from raven.handlers.logging import SentryHandler

logging.getLogger().setLevel(logging.INFO)
logger = logging.getLogger()# ensure we havent already registered the handler
handler = SentryHandler('http://13d06dad246d4fe6a180ef9b15151a13:eb46a6d724df4327a8cc04d9d3cfad37@sentry.bandtastic.pagekite.me/1')
logger.addHandler(handler)
# Add StreamHandler to sentry's default so you can catch missed exceptions
logger = logging.getLogger('sentry.errors')
logger.propagate = False
logger.addHandler(logging.StreamHandler())

from raven.conf import setup_logging
setup_logging(handler) 
```

在我看来，我可以使用一个简单的

```
import logging
logger = logging.getLogger(__name__)
def home(request,context={},template_name=None):
    logger.info(str(request), exc_info=True)
    return render_to_response(template_name,context, context_instance=RequestContext(request)) 
```

我尝试了很多设置。

# jquery - IE9上的jQuery ajax问题

> ID：10822906
> 
> 赞同：3
> 
> 时间：2012-05-30T19:24:44.437
> 
> 标签：jquery, ajax, asp.net-mvc, internet-explorer-9

我正在使用[这个](http://valums.com/ajax-upload/)插件让用户通过 ajax 上传图像。

要创建上传器并触发帖子，请使用此 jQuery 函数：

```
function createUploader() {
        var uploader = new qq.FileUploader({
             element: document.getElementById('file-uploader'),
             allowedExtensions: ['pdf'],
             multiple: false,
             action: '@Url.Action("AjaxUpload", "Upload")',
             onComplete: function(id, fileName, responseJSON){
               window.location.href = responseJSON.message;
            }
        });
    } 
```

好吧，在`responseJSON.message`我返回文件上传（实际转换）的路径时，我正在做一个技巧`window.location.href`来强制浏览器显示该文件的用户下载框。

这在 FF 和 Chrome 上效果很好，但在 IE 上它说：

`Do you want to open or save AjaxUpload from localhost?`

如果您按打开，而不是从指定位置获取文件，您实际上会得到一个包含 responseJSON 消息的文件。

任何 jQuery 大师谁可以给我这个问题的线索？

**更新**：我可以确认的是问题不存在，`window.location.href = responseJSON.message;`因为即使我删除了这一行并`alert('something')`出现了同样的问题......所以不是解析`onComplete`，而是 IE 尝试打开 JSON 响应......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T20:15:53.007

尝试

```
return Json(new { Data = new { message = outputFilePathResponse } }, "text/html"); 
```

参考： [IE 尝试在 ASP 中下载 JSON。网络 MVC 3](https://stackoverflow.com/questions/8591998/ie-tries-to-download-json-in-asp-net-mvc-3)

# python - 为什么 zope.interface.Interface 的子类的子类不继承其父类名称？

> ID：10822909
> 
> 赞同：1
> 
> 时间：2012-05-30T19:24:55.370
> 
> 标签：python, zope.interface

例子：

```
>>> from zope.interface import Interface, Attribute
>>> class IA(Interface):
...   foo = Attribute("foo")
... 
>>> IA.names()
['foo']
>>> class IB(IA):
...   bar = Attribute("bar")
... 
>>> IB.names()
['bar'] 
```

如何让 IB.names() 也返回 IA 中定义的属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T22:58:40.213

如果你看一下这个[`zope.interface.interfaces`模块](http://apidoc.zope.org/++apidoc++/Code/zope/interface/interfaces/index.html)，你会发现这个`Interface`类有一个[`IInterface`接口定义](http://apidoc.zope.org/++apidoc++/Interface/zope.interface.interfaces.IInterface/index.html)！它记录了`names`方法如下：

```
def names(all=False):
    """Get the interface attribute names

    Return a sequence of the names of the attributes, including
    methods, included in the interface definition.

    Normally, only directly defined attributes are included. If
    a true positional or keyword argument is given, then
    attributes defined by base classes will be included.
    """ 
```

因此扩展您的示例：

```
>>> from zope.interface import Interface, Attribute
>>> class IA(Interface):
...     foo = Attribute("foo")
... 
>>> IA.names()
['foo']
>>> class IB(IA):
...     bar = Attribute("bar")
... 
>>> IB.names()
['bar']
>>> IB.names(all=True)
['foo', 'bar'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T19:39:00.243

知道了：

```
IB.names(all=True) 
```

我想我将来应该更多地检查方法签名。

# sql-server - 如何使用 dd-MMM-yyyy 格式将日期时间格式化为 varchar？

> ID：10822912
> 
> 赞同：6
> 
> 时间：2012-05-30T19:25:08.943
> 
> 标签：sql-server, tsql, sql-server-2005

我觉得这应该是一个简单的解决方案，但我在上面找不到任何东西......

那么：如何使用 dd-MMM-yyyy 格式从 a`datetime`到 a ？`varchar`

```
Eg: my_date --> '29-May-2012' 
```

我设法完成的关闭是

```
convert(varchar(20),my_date,105) --> '29-05-2012' 
```

是的，我确实需要在 T-SQL 中正确执行此操作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T19:37:56.700

此格式本身不受支持，但从[Build a cheat sheet for SQL Server date and time formats 开始](https://www.mssqltips.com/sqlservertip/4052/build-a-cheat-sheet-for-sql-server-date-and-time-formats/?utm_source=AaronBertrand)，最接近的可能是：

```
SELECT REPLACE(CONVERT(CHAR(11), GETDATE(), 106), ' ', '-'); 
```

*建议使用此答案的先前版本`FORMAT()`，但此后我进行了试验，并认为[这是一个大规模的坏主意，](https://sqlperformance.com/2015/06/t-sql-queries/format-is-nice-and-all-but)除非您只想让所有查询花费两倍的时间。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T19:29:28.333

你可以使用：

```
SELECT replace(convert(char(11), getdate(), 113), ' ', '-') 
```

或者

```
SELECT replace(convert(char(11), getdate(), 106), ' ', '-') 
```

# java - Primefaces日历弹出窗口不起作用

> ID：10822915
> 
> 赞同：0
> 
> 时间：2012-05-30T19:25:10.897
> 
> 标签：java, calendar, primefaces

我已将 primefaces 升级到 3.3 版。我现在意识到日历日期选择器不再弹出。我试图降级它，但它没有工作。这是代码。

```
<p:calendar value="#{transaction.startDate}" effect="fadeIn" pattern="dd-MMM-yyyy" /> 
```

在 java 中，我使用 java.util.date 并在 startDate 上设置一个值。它显示了我为 startDate 输入的值，但是当我单击输入字段时它不会弹出日期选择器。有人知道问题是什么吗？这是 javaScript 堆栈跟踪：

```
Uncaught TypeError: Cannot call method 'getDate' of null jquery.js:56
$.extend._setDateFromField jquery.js:56
$.extend._showDatepicker jquery.js:56
b.event.dispatch jquery.js:16
b.event.add.bD.handle.bB jquery.js:16
b.event.trigger jquery.js:16
b.fn.extend.trigger jquery.js:16
bF.extend.each jquery.js:16
bF.fn.bF.each jquery.js:16
b.fn.extend.trigger jquery.js:16
b.each.b.fn.(anonymous function) jquery.js:16
a.fn.extend.focus jquery.js:33
PrimeFaces.widget.Dialog.PrimeFaces.widget.BaseWidget.extend.focusFirstInput primefaces.js:12
PrimeFaces.widget.Dialog.PrimeFaces.widget.BaseWidget.extend._show primefaces.js:12
PrimeFaces.widget.Dialog.PrimeFaces.widget.BaseWidget.extend.show primefaces.js:12
b.oncomplete primefaces.js:12
i.complete primefaces.js:1
b.Callbacks.e jquery.js:16
b.Callbacks.bD.fireWith jquery.js:16
bF jquery.js:23
b.ajaxTransport.send.bv jquery.js:23 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:31:42.950

尝试 mode="popup" 而不是 effect="fadeIn"

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-31T06:36:09.620

我发现问题出在Java中。当我将 java 降级到 1.6 时，我使用了 java 1.7。有效。

# linux - SSH隧道进入拱盒

> ID：10822916
> 
> 赞同：5
> 
> 时间：2012-05-30T19:25:15.740
> 
> 标签：linux, ssh, ssh-tunnel, x11-forwarding, raspberry-pi

我有一个运行 arch linux 的树莓派连接到电视，并希望通过 SSH 从我的 Ubuntu 机器在其他地方运行该屏幕上的命令。

我尝试运行命令 SSH -Y root@ 并启动 xclock 作为测试。但是我收到以下错误：

未指定协议错误：无法打开显示：：0

然后我尝试在拱形机器上运行“export DISPLAY=:0”，但这并不能解决问题。

我的 X 运行良好，可以在电视上看到它，并且我编辑了文件 /etc/ssh/ssh_config 以允许 X11 转发。

有人知道我在做什么错吗？

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T20:42:24.793

ArchLinux wiki 有[一些](https://wiki.archlinux.org/index.php/Ssh#X11_Forwarding)关于设置的很好的说明。我挣扎了一段时间才找到它们，但对我来说，关键是在 sshd_config 中设置 SSH 转发（大多数发行版似乎默认启用此功能，但 Arch 没有）。

在 SSHD 中启用 X 转发后，我还发现为 Xorg 安装虚拟视频驱动程序（“pacman -S xf86-video-dummy”）很有帮助，它消除了因缺少 RANDR 扩展而导致的恼人错误。如果您已经让它在 Pi 上本地运行真正的 X 服务器，这可能没有必要 - 就个人而言，我完全无头运行我的服务器。

我发现在 iMac 上使用 'ssh -X' 运行时，我不必担心设置 DISPLAY 变量或 xhost。我希望 Ubuntu 表现相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:32:54.057

看起来像一个身份验证问题。曾经的答案是

```
xhost + 
```

在 X 显示器的控制台上。可能有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T19:37:09.373

你可能想设置

导出显示=[IP_ADDRESS_OF_ARCH_BOX]:0

在你的 Ubuntu 机器上，然后当你从你的 Ubuntu 机器运行 xclock 时，它会将屏幕转发到 Arch 机器。

# javascript - 为什么我不能在 HTML5 画布上触摸绘制正方形？

> ID：10822922
> 
> 赞同：-2
> 
> 时间：2012-05-30T19:25:54.403
> 
> 标签：javascript, html, canvas

我正在尝试使用 html5、js 和触摸事件绘制一个正方形，但是当我尝试在画布上绘制时没有任何显示。我究竟做错了什么？

* * *

这是我的代码...

Javascript：

* * *

```
function square()
{   
    var can = document.getElementById('canvasSignature');
var ctx = can.getContext('2d');

can.addEventListener( 'touchstart', onTouchStart, false);

function onTouchStart(e) {
 ctx.fillRect(0,0,300,300);   

}
} 
```

HTML5：

* * *

```
<div id="canvasDiv">
    <canvas id="canvasSignature" width="580px" height="788px" style="border:2px solid #000; background: #FFF;"></canvas>
</div>

<div id="Square">  
    <p><button onclick="square();">Square</button></p>
</div> 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:23:31.657

实际上，我复制并粘贴了您的代码并对其进行了测试。它似乎在我的 Android 手机上运行良好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T19:58:30.810

可能你有两个函数相互内部导致某种解释错误，因为我的错误控制台说它找不到函数 square()。

[http://jsfiddle.net/GkL7P/4/](http://jsfiddle.net/GkL7P/4/)

我通过将变量移到外部并将两个函数分开来对其进行了一些编辑...

# amazon-s3 - 通过 torrent 上传 Amazon S3 文件

> ID：10822923
> 
> 赞同：5
> 
> 时间：2012-05-30T19:26:02.593
> 
> 标签：amazon-s3, amazon-ec2

我知道 amazon-S3 支持 BitTorrent，我们可以使用 torrent 客户端下载文件。我的问题是，

是否可以通过种子直接或使用 ec2 将文件从我的电脑上传到 s3？

**注意：** 我有一个网站，用户上传存储在 S3 中的大尺寸视频文件。如果他们可以只上传一个 torrent 文件，这样他们就可以随时播种，并且为同一个文件设置多个播种器，这会减少他们的上传时间......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T19:30:46.680

您必须在 EC2（或您自己的系统）上安装 BitTorrent 客户端，下载 torrent 文件，然后将其上传到 S3。S3 本身不支持从其他来源获取 BitTorrent 文件并将它们存储在存储桶中。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-06-17T17:22:58.910

如果您在 url 末尾添加 ?torrent，您可以将 PUBLIC s3 文件设置为可通过 torrent 下载。

例如，我刚刚上传了以下文件：

`http://mybucket.s3.amazonaws.com/Install/hexagon4.png`

如果您将链接设置为

`http://mybucket.s3.amazonaws.com/Install/hexagon4.png?torrent`

它将作为洪流下载。

我不知道这是否可以用于关闭的文件

# c# - 银行系统 CMD 模拟的层次建模

> ID：10822924
> 
> 赞同：0
> 
> 时间：2012-05-30T19:26:04.553
> 
> 标签：c#, oop, inheritance, polymorphism

我正在为银行系统的想法寻找一些帮助。

这东西是给大学的，老师放了一些烦人的限制，比如：

*   在控制台、C# 中制作程序。
*   使用面向对象的基础（类、继承、封装和多态）
*   不要使用课堂上没有讲过的东西。到目前为止涵盖的内容是循环、条件、数组（仅是简单的）、类、继承、封装、类对象、多态性、方法、构造函数。不允许使用列表、属性（Get、Set）、foreach 循环、无工作函数等。

有了所有这些 eemm，让我们离开他们“烦人”的限制，我需要做到这一点：

模拟其用户帐户的银行系统，具有为每个用户退休和存款的能力。必须使用以下五个类完成，并使用这些各自的字段：

类个人数据：

```
 string userCode;
    string userIdentification;
    string INSSNumber;
    string userName;
    string userLastName;
    int    age;
    string address;
    string phone; 
```

班级帐号：

```
 string accountNumber;
    string accountType;
    string accountOpenDate; 
```

班级押金：

```
 string dateDeposit;
 double depositTotal;
 double interest; 
```

班级退休：

```
 string dateRetire;
 double retireTotal;
 double interest; 
```

类FinancieryState

```
 double interest;
 double accountTotal; 
```

继承必须应用于每个类。如果一个类不使用继承，它将无效。

Retire and Deposit 类有两种利息计算方法，一种是知道所有存款（或退休）的总利息，另一种会调用 FincieryState 类并扩展它的兴趣字段。这必须使用多态性来完成。

好的，基本上这些就是所有要求，可能是我错过了几个，只要我记得它们，我就会写它们。

到目前为止我所做的：

将 PersonalData 设为“超级父”类。Account 继承自 PersonalData。FinancieryState 继承自 Account。存款继承自 FinancieryState。从 FinancieryState 退休。

使用它们各自的方法和构造函数填充每个类，以填充字段并更新/计算数字字段。

菜单的主条目，例如特定客户的存款、客户帐户的查看状态等。

现在，我必须将新用户的所有数据存储在任何类型的单个对象中。

最后，问题：

我可以在单个对象中对用户做些什么，并能够查看其存款和退休信息，将多态部分应用于这两个类，并能够在 FinancieryState 类的帮助下计算 accountTotal 字段存款和退休课程提供的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T01:23:24.447

得到这个工作。一个铸件就足够了。

我已将继承顺序更改为：

将 PersonalData 设为“超级父”类。Account 继承自 PersonalData。FinancieryState 继承自 Account。存款继承自 FinancieryState。从存款中退休。

然后，将数据存储在一个`Retire`对象中，要获取退休信息，只需执行`myObject.GetRetireTotal()`.

如果它用于存款信息，它将更改为`((Deposit)myObject).GetDepositTotal()`.

等等...

# iphone - 实例化 nib 对象以显示在视图中

> ID：10822925
> 
> 赞同：0
> 
> 时间：2012-05-30T19:26:12.423
> 
> 标签：iphone

我有一个显示图例的 LegendViewController。最初，我只是在那里放了一个 UIImageView 。但是现在，我们需要一些图例，我想重用 LegendViewController。所以我创建了一个新的初始化程序：

```
- (id)initWithView:(UIView *)view withNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    [self initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        [self.view addSubview:view];
    }
    return self;
} 
```

所以现在假设我传入一个 UIView 对象，这可以工作。对于我的一个传说，我想知道是否可以在没有图像或 UIView 对象的情况下将 .xib 加载到我的视图控制器中。我有一个非常简单的图例，我只想要一些颜色编码的正方形（带有颜色的 UIViews）和一些文本（UILabels）。我可以在独立的 .xib 文件中创建它，但我不确定如何将它加载到我的 LegendViewController 中。我到目前为止：

```
UINib *nib = [UINib nibWithNibName:@"HealthLegend" bundle:nil]; 
```

其中 HealthLegend 是我的独立 .xib 文件，其中包含我的数据。还是不能这样做，我需要在某些绘图程序中创建图像，或者在 drawRect 中手动绘制代码？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:43:04.313

你可以像这样加载一个笔尖

```
NSArray *topLevelObjects = [[NSBundle bundleForClass:[self class]] loadNibNamed:@"HealthLegend"
                                                                          owner:nil
                                                                        options:nil];
// Assuming you only have one root object in your nib
[self.view addSubview:[topLevelObjects objectAtIndex:0]; 
```

根据您`File's Owner`在笔尖中设置的内容将所有者更改为适当的对象（如果甚至需要 - 听起来您有一个静态视图，所以它可能不是）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:44:21.457

从参考指南

> 当您使用 nib 文件的内容创建 UINib 对象时，该对象会在引用的 nib 文件中加载对象图，但它尚未取消归档它。要取消归档所有 nib 数据，从而真正实例化 nib，您的应用程序调用 UINib 对象上的 instantiateWithOwner:options: 方法
> 
> UINib 对象可以提供显着的性能改进

所以我猜你想要这样的东西：

```
UINib *nib = [UINib nibWithNibName:@"HealthLegend" bundle:nil];
NSArray *views = [nib instantiateWithOwner:nil options:nil];
UIView *view = [views objectAtIndex:0]; 
```

# javascript - 自动更新对网页上其他标题的引用

> ID：10822927
> 
> 赞同：3
> 
> 时间：2012-05-30T19:26:21.657
> 
> 标签：javascript, html, css

我一直在寻找这样做的方法很长一段时间，我开始认为这是不可行的。我不能说我是 html 或 CSS 方面的专家，但我做了很多研究，没有找到针对这个特定问题的教程。

我正在编写要在线发布的软件用户指南。该指南将包括软件的屏幕截图和数字。原始代码（我不是这个项目的第一个）只是硬编码每个图像的数字，随着更多信息的添加，这变得越来越乏味。

我知道有一种方法可以简单地添加新图像，然后标记标题以包含自动递增的数字。这将非常有帮助，因为如果添加了新数字，则新数字之后的所有数字中的数字都会自动更改。

如果这是问题的唯一方面，我会简单地使用 CSS 计数器并完成它。但是，我也希望能够参考指南文本中的具体数字。我的问题是：有没有办法在 CSS 中做到这一点？

指南中的文本示例是“**图 n**显示了自定义 x 的对话框”。有没有办法在不对数字进行硬编码的情况下引用指南中的第 n 个数字？

如果这在 CSS 中是不可能的，是否有另一种语言可以做到这一点？

**编辑：** 澄清：数字本身将被连续标记。但是，如果我想在我的文本中参考图 3，例如，它可以在任何地方。

**编辑 2：** 我尝试了使用数组的 javascript 实现。但是，现在似乎某些版本的 Internet Explorer 拒绝显示我的代码的脚本部分。

我正在使用`<script></script>`文档正文中的标签，调用位于头部的 javascript 函数。我知道语法一定是正确的，因为 firefox 和 google chrome 都可以很好地加载页面。这仅仅是 IE 对某些事情的挑剔吗？（我检查了，这不是我的安全设置）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T14:13:03.603

问题是，通过页面索引（递增）和您维护的某个数字编号（也递增）来引用事物是**两个相同的解决方案**。

实际问题：文档越长，使用有序数字标识符序列维护图形列表就越困难。

解决方案：给数字命名，而不是数字，并生成一个数字显示给用户。这为用户提供了有序编号，并允许您引用具有易记名称的图形，但不需要您在每次编辑后重新排序或修改图形编号。这是一个使用 jQuery 的快速示例：

```
<h2>How to add a contact</h2>
<img id="add-contact" class="figure" src="figures/add-contact.png" />
<p><a href="#add-contact">This screenshot</a> shows the location of the Add Contact button.</p>

<script type="text/javascript">
   $(function() {
     var figNum = 0;
     $(".figure").each(function() {
       figNum++;
       $("a[href='#"+$(this).attr("id")+"']").append(" (figure "+figNum+")");
     });
   });
</script> 
```

# c# - 如何引用具有相对路径的 WSDL 文件？

> ID：10822931
> 
> 赞同：6
> 
> 时间：2012-05-30T19:26:42.713
> 
> 标签：c#, visual-studio-2010, web-services, wsdl

我在磁盘上有一个 WSDL 文件并作为 Web 参考加载。问题是 Web 引用本身正在我的机器上寻找 WSDL（使用绝对路径），这显然不适用于队友的机器。

是否可以让 Web 参考使用相对路径或从资源文件中查找 WSDL？WSDL 用于第三方服务，我们已对其进行了修改以添加一些额外的字段（根据他们的建议）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T21:07:24.730

当您向机器上的 WSDL 文件添加服务引用时，它会被复制到项目中的“服务引用”文件夹中。此时，您的服务的 API 已确定。有一个创建的“Reference.svcmap”(XML) 保存 WSDL 文件的原始位置。这样您就可以*更新*如果 API 更改，则在您的项目中的服务引用。但是，即使没有原始 WSDL 文件，您也可以签入代码，并且您的团队可以毫无问题地使用它。但是，如果您希望他们能够在 API 更改时更新服务，那么您需要将 WSDL 文件实际托管在可公开访问的位置。通常，Web 服务本身提供 WSDL 文件，而您的文件系统中不会有它。如果您计划更新和更改 Web 服务，您应该连接到托管在开发 Web 服务器上的 WSDL。那确实是它所属的地方，而不是本地文件。但是，在有人尝试更新它之前，您的本地文件引用没有理由不能正常工作。如果您的网络服务从不改变，那么您就没有问题。如果它可以更改，则将其托管在某个地方并引用一个真实的 URL。

我在 Reference.svcmap 文件中调整 XML 以尝试获取相对路径引用的初步测试没有奏效，但如果您决定确实希望按照您的问题描述的那样工作，那么这里就是您尝试的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T19:31:09.600

我的建议是使用命令行工具 wsdl.exe 或 svcutil.exe 创建一个编程代理来创建 .cs 或 .vb 代理，然后您可以将其添加到解决方案中。

这允许根本不需要 wsdl 文件。在此处查看有关 .NET 2.0 的更多信息[http://msdn.microsoft.com/en-us/library/7h3ystb6(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/7h3ystb6%28v=vs.80%29.aspx)

对于 .NET 3.5 或更高版本和 svcutil 看这里：http: [//msdn.microsoft.com/en-us/library/aa751905.aspx](http://msdn.microsoft.com/en-us/library/aa751905.aspx)

# .net - 如何使用 FluentMigrator 设置 ROWVERSION/TIMESTAMP 数据类型列？

> ID：10822935
> 
> 赞同：6
> 
> 时间：2012-05-30T19:27:07.583
> 
> 标签：.net, sql, nhibernate, fluent-nhibernate, fluent-migrator

我正在尝试在 SQL Server 表上使用`ROWVERSION`(or `TIMESTAMP`) 数据类型进行乐观并发控制。

我的表是使用 FluentMigrator 设置的，我不知道如何获取我需要的数据类型。根据[微软关于 的文章`ROWVERSION`](http://msdn.microsoft.com/en-us/library/ms182776.aspx)，不可为**空`ROWVERSION`**的列在语义上等同于**binary(8)**列；可**空`ROWVERSION`**数据类型等效于**varbinary(8)**。

这是一个示例，并且尽可能接近...

```
public override void Up()
    {
        Create.Table("Test")
            .WithColumn("Id").AsInt32().Identity().PrimaryKey()
            .WithColumn("Description").AsAnsiString(255)
            .WithColumn("RowVersion").AsBinary(8).NotNullable(); 
    } 
```

**`.WithColumn("RowVersion").AsBinary(8).NotNullable();`**是我无法弄清楚的线......没有**`.AsRowversion`**或**`.AsTimestamp`**选项。

提前致谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-30T20:32:24.170

哇！事情怎么会如此简单，以至于我一眼就看穿了显而易见的……

```
.WithColumn("Version").AsCustom("rowversion").NotNullable(); 
```

# .net - .NET 中 32 位进程如何与 64 位进程通信？

> ID：10822937
> 
> 赞同：9
> 
> 时间：2012-05-30T19:27:17.050
> 
> 标签：.net, 64-bit, ipc, remoting, 32-bit

Windows 无法让 32 位进程加载 64 位 dll，因此我尝试使用远程处理以允许 32 位进程与 64 位进程交互。

问题是：虽然这两个应用程序位于同一台机器上，一个是 32 位，另一个是 64 位，而且它们必须是这样的：同时使用 32 位或 64 位会破坏这些应用程序构建在上面的一切的。

我正在使用.NET 的`System.Runtime.Remoting.RemotingConfiguration`类并调用它的`Configure()`方法并将引用传递给一个`App.config`文件，该文件引用`MarshalByRefObject`我将通过远程访问访问的类。

我让它工作，但只要 Client、Host、MarshalByRefObject 类是 32 位或 64 位。如果我把它们混合起来，这将不起作用：我最终会得到`BadImageFormatException`：

> 无法加载文件或程序集“ `MyRemotingObject`”或其依赖项之一。试图加载格式不正确的程序。

一旦我将两个应用程序都设为 32 位或 64 位，异常就会消失，但同样，其中一个必须是 32 位，另一个必须是 64 位。

有人能告诉我如何启用 32 位 .NET 应用程序和 .64 位 .NET 应用程序之间的进程间通信吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T19:30:41.593

随机猜测：.NET 远程处理需要将程序集加载到两个进程中以获取元数据。您的数据协定（使用 WCF 术语）应位于单独的程序集中，并且应编译为“AnyCPU”，以便可以将其加载到任一进程中。您已将其明确设置为 32 位或 64 位。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T19:29:20.777

您可以通过命名管道使用 WCF。

这里有一个简单的例子：http: [//msdn.microsoft.com/en-us/library/system.servicemodel.netnamedpipebinding.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.netnamedpipebinding.aspx)

# asp.net - 使用浏览器开发工具查看导致 500 内部服务器错误的原因

> ID：10822938
> 
> 赞同：0
> 
> 时间：2012-05-30T19:27:19.780
> 
> 标签：asp.net, google-chrome, browser

我在 MVC3 应用程序中使用 Telerik 控件。时不时地，我会收到 500 内部服务器错误或 404 错误。当我单击 Telerik tabstrip 控件上的选项卡时，我收到 500 错误。我在做什么非常非常简单。这是我的标签将加载的部分视图：

```
 @model MyModel

      @foreach (var item in Model.Names) 
```

当我运行它时，我收到 500 错误。但我可以做到这一点，它会工作

```
 @model MyModel
     <div>@Model.Names[0].First</div> 
```

在标签条中使用网格时，我也会得到 404。我知道 chrome 有一些很棒的工具，我只是不知道该使用哪些。但我不在乎使用哪个浏览器、如何以及使用什么开发工具来找出导致这些错误的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:30:11.453

尝试改用 FireFox firebug。它允许您查看来自服务器的错误响应。评论中的@Tomas Voracek 也有一个关闭customErrors 的好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:28:48.613

按照设计，您会发现很难从浏览器中获取任何服务器信息/错误。

有一些服务器端工具可以帮助您调试这些问题，但这完全取决于您的服务器。您使用的是 IIS7+ 吗？

# android - Android：在一行上带有搜索文本和切换按钮的线性布局

> ID：10822941
> 
> 赞同：0
> 
> 时间：2012-05-30T19:27:26.307
> 
> 标签：android, android-linearlayout

我有一个`LinearLayout`包含文本框（搜索）和切换按钮的水平。如何让搜索框填充所有宽度减去切换框的宽度？

视觉上：[宽搜索框][切换]

```
 <LinearLayout
        android:orientation="horizontal"
        android:minWidth="25px"
        android:minHeight="25px"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/linearLayout1">
        <EditText
            android:id="@+id/search_box"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="type to search titles"
            android:inputType="text"
            android:maxLines="1"
            android:visibility="gone"
            android:capitalize="none"
            android:linksClickable="false"
            android:autoLink="none"
            android:autoText="true"
            android:singleLine="true" />
        <ToggleButton
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/toggleButton1"
            android:textOff="ABC"
            android:textOn="KMs" />
    </LinearLayout 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:31:00.203

向 中添加一个`layout_weight`属性`EditText`，例如：

```
<LinearLayout
    android:orientation="horizontal"
    android:minWidth="25px"
    android:minHeight="25px"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/linearLayout1">
    <EditText
        android:id="@+id/search_box"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:hint="type to search titles"
        android:inputType="text"
        android:maxLines="1"
        android:visibility="gone"
        android:capitalize="none"
        android:linksClickable="false"
        android:autoLink="none"
        android:autoText="true"
        android:singleLine="true" />
    <ToggleButton
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/toggleButton1"
        android:textOff="ABC"
        android:textOn="KMs" />
</LinearLayout 
```

我还修改了`layout_width`属性，所以按钮换成了它的内容，文本字段填充了行上的剩余空间。向 a 中的子项添加权重会`LinearLayout`告诉它占用剩余空间，权重的值决定了它将如何执行此操作。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:42:05.263

只需将您的 EditText **layout_width**更改为 0dp 并添加**layout_weight**属性：

```
android:layout_weight="1" 
```

并且您的 ToggleButton 的**layout_width**必须设置为**wrap_content**

```
android:layout_width="wrap_content" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T19:30:37.147

您可以通过使用来实现`layout:weight`：

```
<LinearLayout
    android:orientation="horizontal"
    android:minWidth="25px"
    android:minHeight="25px"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/linearLayout1">
    <EditText
        android:id="@+id/search_box"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:hint="type to search titles"
        android:inputType="text"
        android:maxLines="1"
        android:visibility="gone"
        android:capitalize="none"
        android:linksClickable="false"
        android:autoLink="none"
        android:autoText="true"
        android:singleLine="true" />
    <ToggleButton
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/toggleButton1"
        android:textOff="ABC"
        android:textOn="KMs" />
</LinearLayout 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T19:32:11.983

尝试将`android:layout_width`ToggleButton 设置为`wrap_content`

# php - facebook JSON解码用php？

> ID：10822947
> 
> 赞同：-1
> 
> 时间：2012-05-30T19:27:49.033
> 
> 标签：php, json, facebook-graph-api

所以我终于能够从 facebook 上的图形 API 中提取数据，这就是我得到的 JSON 数组。我想知道您是否可以为使用 php 将其写入数据库提供任何建议。字段名称需要干净地进入数据库而不是序列化。我有一个将提取生日信息的 ajax 日历。

```
 Array
    (
        [0] => Array
            (
                [uid] => 111222333
                [name] => Noah J 
                [birthday_date] => 11/21/1982
            )

        [1] => Array
            (
                [uid] => 111222333
                [name] => Ana B 
                [birthday_date] => 04/07/1981
            )

        [2] => Array
            (
                [uid] => 111222333
                [name] => Ric C
                [birthday_date] => 10/01/1982
            ) 
```

先谢谢了！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T19:31:11.680

您应该使用 PHP 函数`json_decode()`（[文档链接](http://pt2.php.net/manual/function.json-decode.php)）。这是最好的选择。它会将您的 JSON 数组转换为易于使用的 PHP 数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:32:03.060

```
<?php $a = json_decode($a); ?> 
```

# django - 各种“auth”模型的使用

> ID：10822949
> 
> 赞同：1
> 
> 时间：2012-05-30T19:27:56.660
> 
> 标签：django, django-models

除此之外`auth_user`，我从未使用过`auth_group`, `auth_group_permissions`, `auth_permission`,`auth_user_user_permissions`和`auth_user_user_permissions`. 这些模型的具体用途是什么？一个人不需要这些是否常见？如果是这样，摆脱它们的最佳方法是什么（做顺子`DROP TABLE`或在 django 级别）？删除这些会有不利影响吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:05:17.537

我建议阅读[Django 文档中的用户身份验证部分](https://docs.djangoproject.com/en/dev/topics/auth/)。它将身份验证系统的组件描述为：

> *   用户
> *   权限：指定用户是否可以执行特定任务的二进制（是/否）标志。
> *   组：将标签和权限应用于多个用户的通用方式。

**权限**的最简单用途是控制某个用户可以在[Django 管理站点](https://docs.djangoproject.com/en/dev/ref/contrib/admin/)中执行的操作。[`django.contrib.auth.decorators.permission_required`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.decorators.permission_required)您还可以使用权限来使用装饰器限制对您自己的视图的访问。

当这与**组**结合使用时，您可以轻松地将相同的权限分配给整个用户组。

您提到的其他数据库表（`auth_group_permissions`等）存储用户与权限或组与权限之间的关系。

虽然您可能没有直接使用身份验证系统的这些部分，但您几乎可以肯定是在使用`django.contrib.auth`依赖于它们的其他代码。如果您使用的应用程序不是您编写的（无论它是否是 Django 的一部分），那么删除应用程序创建的数据库表可能是个坏主意。

# spring - 如何从 ApplicationContext 对象中获取属性值？（不使用注释）

> ID：10822951
> 
> 赞同：56
> 
> 时间：2012-05-30T19:28:28.193
> 
> 标签：spring, spring-el

如果我有：

```
@Autowired private ApplicationContext ctx; 
```

我可以使用其中一种 getBean 方法来获取 bean 和资源。但是，我不知道如何获取属性值。

显然，我可以创建一个具有 @Value 属性的新 bean，例如：

```
private @Value("${someProp}") String somePropValue; 
```

我在 ApplicationContext 对象上调用什么方法来获取该值而不自动装配 bean？

我通常使用@Value，但是有一种情况是SPeL表达式需要是动态的，所以我不能只使用注解。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2014-04-19T05:06:25.727

In the case where SPeL expression needs to be dynamic, get the property value manually:

```
somePropValue = ctx.getEnvironment().getProperty("someProp"); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-03-07T22:10:13.833

如果你被困在 Spring pre 3.1 上，你可以使用

```
somePropValue = ctx.getBeanFactory().resolveEmbeddedValue("${someProp}"); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-05-30T19:56:06.663

假设该`${someProp}`属性来自 PropertyPlaceHolderConfigurer，这会使事情变得困难。PropertyPlaceholderConfigurer 是一个 BeanFactoryPostProcessor，因此仅在容器启动时可用。所以这些属性在运行时对 bean 不可用。

一种解决方案是创建某种值持有者 bean，您可以使用所需的属性/属性对其进行初始化。

```
@Component
public class PropertyHolder{

    @Value("${props.foo}") private String foo;
    @Value("${props.bar}") private String bar;

    // + getter methods
} 
```

现在在需要属性的地方注入这个 PropertyHolder 并通过 getter 方法访问属性

# c# - WP7 - 根据用户输入的信息向服务器发出动态信息请求

> ID：10822963
> 
> 赞同：0
> 
> 时间：2012-05-30T19:29:16.350
> 
> 标签：c#, silverlight, windows-phone-7, httprequest

这一次，我来这里只是为了看一些意见/观点。

我有一个从我的服务器获取的“自动完成”组件，即我所在国家/地区的城市名称。在这个组件上输入的每个城市名称，它应该去我的服务器获取一些信息。

其实，我是怎么做到的？

在此组件上键入的每个字母，它都会请求以该字母开头的城市列表。显然，这不是一个好方法，因为每个仅基于一封信的请求都会给我非常相似的列表。

你能想出更好的方法吗？

有什么更好的方法？不要提出不必要的要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:52:44.447

您可以在本地预加载所有城市名称（一个拥有 10,000 个城市且平均名称长度为 11 字节 [10 个单字节字符 + NUL] 的国家/地区将需要不超过 110KB 的空间，具体取决于存储方法 [可能接近 200KB 的东西？]，所以如果您在加载页面时可以接受 [相当可能非常] 小的延迟并且不太担心电话数据限制，我建议您这样做），或者您可以拥有城市名称被缓存在本地机器上，因此虽然唯一的键组合会导致服务器获取，但在以后的组件中重复的键组合不会。

不过，我对编程的这方面并没有真正的经验，所以我可能不是提供这种建议的最佳人选。

# javascript - Z-indexing，只是不会很好玩

> ID：10822965
> 
> 赞同：0
> 
> 时间：2012-05-30T19:29:21.233
> 
> 标签：javascript, css, twitter-bootstrap

对于我的生活，我无法弄清楚如何防止下拉菜单（如下所示）出现在其他按钮后面。我已经更改了所有相关元素的 z 索引，但似乎没有任何效果。

我设置了一个 jsfiddle 来演示：http: [//jsfiddle.net/theoryshaw/44HPM/3/](http://jsfiddle.net/theoryshaw/44HPM/3/)

*（将弹出 4 个 jsFiddle 警报...请关闭它们）*

![在此处输入图像描述](../Images/51c07d5a054a9179bff98273b24ce55c.png)

任何线索将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:57:59.740

将 css 中的 .dropdown-menu 类更改为：

```
.dropdown-menu {
background-clip: padding-box;
background-color: #FFFFFF;
border: 1px solid rgba(0, 0, 0, 0.2);
border-radius: 5px 5px 5px 5px;
box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
display: none;
float: left;
left: 0;
list-style: none outside none;
margin: 1px 0 0;
min-width: 160px;
padding: 4px 0;
position: relative;
top: 100%;
z-index: 1000000;
} 
```

这解决了 z-index 问题，但是您会被按钮弄乱，但这可能有助于您更接近问题:)

# javascript - 如何检查 Javascript 对象是否具有给定键的值？

> ID：10822971
> 
> 赞同：26
> 
> 时间：2012-05-30T19:29:34.390
> 
> 标签：javascript, dictionary, key

> **可能重复：**
> [如何检查对象是否具有 Javascript 中的属性？](https://stackoverflow.com/questions/135448/how-do-i-check-to-see-if-an-object-has-an-attribute-in-javascript)

我有一个定义如下的Javascript对象：

```
var mmap = new Object();

mmap['Q'] = 1;
mmap['Z'] = 0;
mmap['L'] = 7;
... 
```

如何检查此映射是否具有给定键的值（例如“X”）？`.hasOwnProperty()`上场了吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-30T19:31:52.590

```
if ('X' in mmap)
{
    // ...
} 
```

[这](http://jsfiddle.net/38Xpz/)是关于 JSFiddle 的示例。

`hasOwnProperty`也是有效的，但使用`in`起来更轻松。唯一的区别是`in`返回原型属性，而`hasOwnProperty`没有。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-30T19:32:10.813

您可以使用：

```
(mmap['X'] === undefined) 
```

小提琴：http: [//jsfiddle.net/eDTrY/](http://jsfiddle.net/eDTrY/)

# java - JAX-WS 的 WebFault 注释如何工作？

> ID：10822972
> 
> 赞同：0
> 
> 时间：2012-05-30T19:29:36.293
> 
> 标签：java, web-services

我已经实现了在 Java Web 服务中抛出异常。我的班级如下：

```
@WebFault(faultBean = "com.au.ex.FaultBean", targetNamespace =
"something_here") public class Ex extends Exception {
  ... 
} 
```

如果我没有定义*targetNamespace*它会在**Soap UI**抛出**空指针异常**。

 **我的问题是：***我应该定义 targetNamespace 以及如何检索默认 targetNamespace***？

**PS：**如果我使用 Web 服务的名称空间定义相同的名称空间，它仍然会引发异常。如果我定义其他任何东西，它会起作用吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:56:28.783

targetNamespace：指定从 Web 服务生成的 WSDL 和 XML 元素的 XML 名称空间。默认值是从包含 Web 服务的包名称映射的名称空间。（细绳）

听起来你*不需要*命名空间，除非处理 XML 或 WSDL ......**

# java - 在 eventStartTime 前三天发送电子邮件

> ID：10822975
> 
> 赞同：0
> 
> 时间：2012-05-30T19:29:46.767
> 
> 标签：java, mysql, sql, jakarta-ee

我有一个mysql表如下。

```
CREATE TABLE `events` (
  `event_id` int(11) NOT NULL AUTO_INCREMENT,
  `eventName` varchar(45) DEFAULT NULL,
  `eventType` varchar(45) DEFAULT NULL,
  `user_id` varchar(45) DEFAULT NULL,
  `eventStartDate` date DEFAULT NULL,
  `eventStartTime` time DEFAULT NULL,
  `eventEndDate` date DEFAULT NULL,
  `eventEndTime` time DEFAULT NULL,
  `eventoptions` varchar(1000) DEFAULT NULL,
  PRIMARY KEY (`event_id`)
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=latin1; 
```

我需要在 eventStartTime 前三天发送电子邮件。我需要查询来获取事件，我希望通过事件获取用户并发送电子邮件。我可以使用 DATE_SUB() 来做到这一点，但我该怎么做呢？我很不擅长 sql。

我使用 Mysql 连接器 Java。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:41:45.437

```
 SELECT * from events where date_add(curdate(),INTERVAL 3 days)=eventStartTime 
```

这将为您提供 3 天后的所有事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:36:53.023

不要在 sql 中执行此操作

[http://www.theserverside.com/news/1364726/Job-Scheduling-in-J2EE-Applications](http://www.theserverside.com/news/1364726/Job-Scheduling-in-J2EE-Applications)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T19:42:18.993

您可以从 eventStartDate 和 eventStartTime 派生电子邮件时间，如下所示：

```
SELECT CONCAT(eventStartDate - INTERVAL 3 DAY, ' ', eventStartTime) 
```

但是，这并不能解决发送电子邮件的问题。您需要一个脚本而不是每隔一段时间运行一次，或者需要一些调度程序来在电子邮件日期到达时发送电子邮件。您可以考虑将电子邮件发送日期/时间存储为表中的另一个字段，例如 emailSendDate

考虑使用日期时间字段而不是单独的日期和时间字段。您始终可以使用 MySQL 函数解析出各个部分（日期、时间、小时、年份等）。

# api - 使用 Spotify App API 更改音量

> ID：10822979
> 
> 赞同：4
> 
> 时间：2012-05-30T19:29:59.380
> 
> 标签：api, spotify

我想知道是否有人成功地使用[spotify 应用程序 API更改了音量](https://developer.spotify.com/technologies/apps/docs/beta/4f52ebf870.html)

我可以毫不费力地改变游戏状态，`player.playing = true;`但`player.volume=0.5`不会工作。我必须为此添加观察者吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:58:54.163

Player 对象的文档确实说您可以将其设置`volume`为从 0.0 到 1.0 的浮点数。

[https://developer.spotify.com/technologies/apps/docs/beta/f19ff300f8.html](https://developer.spotify.com/technologies/apps/docs/beta/f19ff300f8.html)

如果您的应用程序启动了正在发生的播放，您可能只被允许更改音量。