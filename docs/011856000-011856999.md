# StackOverflow 问答 11856000-11856999

# javascript - 下拉列表 SelectedIndex 不适用于 javascript 中的 getElementById

> ID：11856000
> 
> 赞同：1
> 
> 时间：2012-08-08T00:24:24.287
> 
> 标签：javascript, html-select

我有一个名为批次的下拉列表。如果我选择了第二个选项，则 OnChange 函数内的 dropdown.selectedIndex 始终显示所选索引。但是 document.getElementById("batches").selectedIndex 总是显示第一个索引。
为什么是这样？
实际上，我想在另一个函数中读取正确的 selectedIndex 批次，这就是为什么我需要一种方法来以两种方式获取正确的选定索引。

```
function OnChange(dropdown){
   var myindex  = dropdown.selectedIndex;// This prints correctly
   alert("Index : "+document.getElementById("batches").selectedIndex);// This is always 0 no metter what selects        
}

<select name='batches' id='batches' onchange='OnChange(this);'>
<option value = "1">1</option>
<option value = "2">2</option>
<option value = "3">3</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T03:07:12.867

我不知道您正在测试什么浏览器，但在我测试的所有浏览器中，以下内容始终显示为 true：

```
<select id="batches" onchange="
  alert(this.selectedIndex == document.getElementById('batches').selectedIndex);
">
  <option value = "1">1
  <option value = "2">2
  <option value = "3">3
</select>

<!-- and to confirm... -->
<button onclick="
  alert(document.getElementById('batches').selectedIndex);
">Show selected index</button> 
```

我希望您不会因为选项值 1、2 和 3 与 selectedIndexes 0、1 和 2 相关而感到困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T00:36:47.083

因为你调用函数 onChange 事件即不是过去。尝试在没有onchange事件的情况下触发函数并且属性被选中过去

```
 <select name='batches' id='batches' onchange='someFunc();'>
<option value = "1">1</option>
<option value = "2">2</option>
<option value = "3">3</option>
</select>
<a href="javascript:someFunc()">Test</a>

<script>
function someFunc(){
   //var myindex  = dropdown.selectedIndex;// This prints correctly
   alert("Index : "+document.getElementById("batches").selectedIndex);// This is always 0 no metter what selects        
}
</script> 
```

它会起作用的。只需将此代码复制并粘贴到您的文本编辑器中并进行测试

# java - 使用 Jackson 通过 AJAX 从 Spring MVC 控制器返回 java.util.List

> ID：11856005
> 
> 赞同：9
> 
> 时间：2012-08-08T00:24:42.533
> 
> 标签：java, json, ajax, spring-mvc, jackson

根据[我](https://stackoverflow.com/q/11777153/1391249)几天前发布的问题，我意识到这[`SimpleFormController`](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/servlet/mvc/SimpleFormController.html)不适合处理 Ajax 请求。因此，我正在将我的应用程序迁移到带注释的控制器。

我正在尝试使用[Jackson 1.9.8](http://jackson.codehaus.org/1.9.8/jackson-all-1.9.8.jar)（其下载[页面](http://wiki.fasterxml.com/JacksonDownload)`java.util.List`）通过 Ajax 使用 Spring MVC 3.0.2 和 Hibernate 从 Oracle 数据库返回一个，但我还没有在任何技术中使用 JSON。我已经阅读了一些教程/文章，但我不知道如何在 Spring 中返回如此复杂的数据结构并使用 JSON 解析它们。我正在尝试首先学习类似 JSON 的概念。

基本上我正在尝试的是，当从国家/地区选择框中选择一个国家/地区时，应通过 Ajax 从数据库中填充与该国家/地区对应的州。我不知道如何`java.util.List`通过 Ajax 响应返回，如何解析它并再次在 Java 代码中使用它。我只达到以下水平。

JS 代码。

```
function getStates(countryId)
{
    $.ajax({
        datatype:"json",
        type: "POST",
        url: "/wagafashion/ajax/TempAjax.htm",
        data: "countryId=" + countryId,

        success: function(response)
        {
            $('#msg').html(response);
            $('#stateList').val('');
        },
        error: function(e)
        {
            alert('Error: ' + e);
        }
    });
} 
```

`onchange`Spring 控制器类中的方法，当在国家选择框的事件上发出 Ajax 请求时调用。

```
@RequestMapping(method=RequestMethod.POST, value="ajax/TempAjax")
public @ResponseBody List<StateTable> getStateList(@ModelAttribute("tempBean") TempBean tempBean, BindingResult error, Map model, HttpServletRequest request, HttpServletResponse response)
{
    Session session=NewHibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();
    List<StateTable>list=session.createQuery("from StateTable where country.countryId=:countryId order by stateId").setParameter("countryId", new BigDecimal(request.getParameter("countryId"))).list();

    session.flush();
    session.getTransaction().commit();
    return list;
} 
```

`<c:forEach></c:forEach>`我需要使用EL 循环使用 Ajax 响应返回的状态列表填充状态选择框。

```
<form:select path="cmbState" class="validate[required] text-input tooltip" title="Mandatory select field.">
    <form:option value="">Select</form:option>

    <c:forEach items="${stateList}" var="row">
        <c:choose>
            <c:when test="${row.stateId==param['stateId'] and deselectCombo!=1}">
                <form:option value="${row.stateId}" selected="selected">${row.stateName}</form:option>
            </c:when>
            <c:otherwise>
                <form:option value="${row.stateId}">${row.stateName}</form:option>
            </c:otherwise>
        </c:choose>
    </c:forEach>
</form:select>

<font style="color: red"><form:errors path="stateId"/></font><br/> 
```

我只能成功地发出 Ajax 请求和响应。从互联网上找到的那些教程中，我无法理解更多内容。更准确地说，如何`items`在前面`<c:forEach><c:forEach>`循环的属性中使用 Ajax 响应，例如`items="${stateList}"`？

你能给我一些提示/想法我如何返回数据列表并在前面的循环中使用它来填充状态选择框？你能从这里带我走几步吗？

我使用的是 NetBeans 6.9.1（不是 Eclipse）。在一些关于 Eclipse 中 Marvan 项目的教程中，提到该`pom.xml`文件需要配置为包含`<dependencies></dependencies>`（Jackson 依赖项）。`pom.xml`在我的 NetBeans 项目中没有这样的东西。是否需要在 NetBeans 中的某个 xml 文件中的某个位置进行配置，例如[此处](http://www.mkyong.com/spring-mvc/spring-3-mvc-and-json-example/)提到的那个？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-14T16:38:36.290

您应该使用的策略是从 jQuery 进行 AJAX 调用，获取 JSON 响应并使用它从 jQuery 而不是 java 动态更新表单。我可以看到 JSP 标记的唯一用途是在页面加载时呈现页面。这是我将如何处理这个...

1.  更改您的控制器以使用 GET 而不是 POST。一方面，在 REST 中在这里使用 POST 是不正确的（您只是在检索数据，而不是更改它）。但是，更重要的是，只需将 URL 放入浏览器以查看 JSON 响应，您就可以更轻松地测试控制器。使用`@ResponseBody`注释并在类路径中包含 Jackson 应该会在此处产生 JSON 响应（除非您有一些 Hibernate 延迟加载问题）。

2.  验证控制器返回 JSON 后，更新 jQuery 成功处理程序以动态填充下拉列表。这应该相对容易。在浏览器中测试这个。

3.  编写一个新的控制器来处理这个表单提交。在这个控制器中，只需包含一个方法来返回列表并将其注释为`@ModelAttribute("stateList")`. 这将使列表可用于您的`<c:forEach>`循环以在加载时呈现页面。您将有另一种方法来处理同一控制器中的实际表单提交。

要考虑的另一件事是通过将数据库代码放在自己的服务或存储库中来更好地分离关注点。在 MVC 架构中的控制器中进行数据访问是一种不好的做法。作为奖励，您无需复制任何代码即可将列表加载到两个不同的控制器中。

另外，请查看 Spring 的`@Transactional`声明式事务处理。这样您就不需要为事务处理编写任何代码。您也可以简单地注入`SessionFactory`而不是编写自己的`HibernateUtils`.

希望有帮助

**编辑：**在 REST 中，这里是映射到其相应 CRUD 操作的 HTTP 方法。

*   **发布**- 创建
*   **GET** - 检索
*   **PUT** - 更新
*   **删除**- 删除

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T12:24:18.743

您应该尝试在 ajax 响应中使用您的选项列表，而不是像下面这样的 json

```
<option value="1">Mumbai</option>
<option value="2">Delhi</option>
<option value="3">Kerala</option>
<option value="4">Rajasthan</option> 
```

然后你应该将它添加到你的选择框下面一个

```
function getStates(countryId)
{
    $.ajax({
    datatype:"html",
    type: "POST",
    url: "/wagafashion/ajax/TempAjax.htm",
    data: "countryId=" + countryId,

    success: function(response)
    {
        $('#stateList').html(response);
    },
    error: function(e)
    {
        alert('Error: ' + e);
    }
  });
} 
```

或者您可以在服务器端创建 json，如下所示

```
[{"key":1, "value": "Mumbai"}, {"key":2, "value":"Delhi"}....] 
```

并在 javascript 代码中

```
function getStates(countryId)
{
    $.ajax({
    datatype:"html",
    type: "POST",
    url: "/wagafashion/ajax/TempAjax.htm",
    data: "countryId=" + countryId,

    success: function(response)
    {
         if(response !=''){
              jQuery("#stateList").html("");
              jQuery.each(response, function(index,item) {
                jQuery("#stateList").append(jQuery("<option />")
                .attr("value",item.value)
                .text(item.key)); 
            });
         }

    },
    error: function(e)
    {
        alert('Error: ' + e);
    }
  });
} 
```

# ios - 在保持 NSFetchedResultController 功能的同时保存单个 CoreData 实体（不是整个上下文）

> ID：11856007
> 
> 赞同：9
> 
> 时间：2012-08-08T00:25:09.323
> 
> 标签：ios, core-data, nsfetchedresultscontroller, nsmanagedobject, nsmanagedobjectcontext

呸，抱歉标题太长了。

我有一个托管对象上下文，我在其中存储来自两个不同位置的歌曲。我从手机上的持久存储中获取一些歌曲（使用 Core Data），然后从在线数据库中提取一些歌曲。两首歌曲都属于同一个 ManagedObject 子类。我希望这两首歌都在一个上下文中，因为我希望它们都显示在与 NSFetchedResultsController 连接的表格视图中。

当我想保存其中一首歌曲时会出现问题。我不想将我从在线数据库中提取的所有歌曲保存到手机中。我只想保存单曲，所以简单的 [moc save] 不起作用。另一个问题是，在我保存了一首歌曲后，我仍然希望从网上提取的歌曲在上下文中（但同样，没有保存）。我相信我有几个不同的选择：

1) 是否可以将 NSFetchedResults 控制器连接到多个上下文？

2）我可以将所有从在线数据库中提取的歌曲移动到一个单独的临时上下文中，保存在原始上下文中，然后将所有歌曲移回。（请参阅：[如何将 NSManagedObject 从一个上下文复制或移动到另一个上下文？](https://stackoverflow.com/questions/2998613/how-do-i-copy-or-move-an-nsmanagedobject-from-one-context-to-another)）

3）记住在线歌曲的所有键值对，从上下文中删除在线歌曲，保存原始上下文，根据保存的键值对将所有在线歌曲插入原始上下文中。

4）我是一个巨大的n00b，并且缺少一些更容易的东西。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T00:56:12.787

I think the easiest thing to do would be to have a second `NSPersistentStore` attached to your persistent store coordinator. You can have that store be an in-memory store, and store all your "online" results in that (temporary) store. You can specify which store a newly-inserted object should be saved in with `assignObject:toPersistentStore:`. Once you've done this, you can save freely, since the "save" will only happen to memory for your online songs.

Then, when you want to move a song from the online set to the permanent set, just delete it and re-insert it, assigning the new object to your permanent persistent store with the same method.

This will let you use a single `NSManagedObjectContext` attached to your `NSPersistentStoreCoordinator`, which will see objects from both of the `NSPersistentStore`s.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T02:28:30.820

Jesse 的解决方案可以正常工作。

但是，作为另一种选择，您可以简单地使用嵌套上下文，就像使用详细检查器一样。

该上下文可以保存您所有的“临时”项目，但由于它是您的“保存”上下文的子项，因此所有提取都可以正常工作。

```
NSManagedContext *tempContext = [[NSManagedContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
tempContext.parentContext = mainManagedObjectContext; 
```

您的所有保存都将插入到 mainManagedObjectContext 中，并使用 save: 保存。您所有的临时项目都将进入 tempContext。

将获取的结果控制器也附加到 tempContext。

当您准备好摆脱临时项目时，只需将 tempContext 设置为 nil。

# cocos2d-iphone - Cocos2D 如何保持新的Scale Size

> ID：11856008
> 
> 赞同：0
> 
> 时间：2012-08-08T00:25:17.437
> 
> 标签：cocos2d-iphone, scale

这就是我想要做的。

我有一个在 60 秒内不断缩小的精灵*。*当发生碰撞时，这个精灵会放大*1.5*。

```
 -(void) update: (ccTime) deltaTime 

        {if(CGRectIntersectsRect([randomSprite boundingBox], [other boundingBox]))  {

        [SAE playEffect:@"collisionSoundEffect.mp3"];
        [randomSprite runAction:[CCScaleBy actionWithDuration:3 scaleX:1.5 scaleY:1.5]]; 
```

问题是当 3 秒后它“*弹出*”回到它本来的大小，就好像没有发生碰撞一样。

当然哪个更小。

我想要精灵做的是在碰撞后**保持**newSize 。然后让精灵继续按原样缩小。

非常感谢任何帮助或指导。

谢谢你。

```
[thisSpriteIsConstatnlyScalingDown runAction:[CCScaleBy actionWithDuration:60 scaleX:.01 scaleY:.01]]; 
```

我正在尝试保持新的缩放大小并再次开始缩小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:39:10.960

如果要缩放到绝对比例因子，请不要使用 CCScaleBy。改用 CCScaleTo。

CCScaleBy 的问题在于，如果您的比例为 1.5，然后按比例缩小 0.5，您最终会得到比例 1.0。但是，如果由于某种原因，当节点缩放到 1.2 时缩放被中断并再次执行，您最终会从 1.2 缩放到 0.7。

最后，如果您想确保在缩放完成后使用特定的比例因子，请创建一个 CCSequence，其末尾带有 CCCallFunc 或 CCCallBlock，并手动强制将比例因子设置为特定值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:23:25.060

我认为这是因为你有两个动作同时运行。放大操作完成后，缩小操作仍在运行。

```
#define kScaleDownActionTag 1
#define kScaleUpActionTag 2

    ...

    // start downscale action
    CCAction *action = /* your scale down action */;
    action.tag = kScaleDownActionTag;
    [sprite runAction:action];

    ...

    if(CGRectIntersectsRect([randomSprite boundingBox], [other boundingBox]))  
    {
        // if scale up action isn't running already
        if (![randomSprite getActionByTag:kScaleUpActionTag])
        {
            // stop downscale action and run upscale action
            [randomSprite stopActionByTag:kScaleDownActionTag];
            CCAction *action = /* your scale up action */
            action.tag = kScaleUpActionTag;
            [randomSprite runAction:action];
        }
    } 
```

# jquery - 使用 jquery 独立于 knockoutjs 绑定添加事件处理程序

> ID：11856009
> 
> 赞同：1
> 
> 时间：2012-08-08T00:25:24.833
> 
> 标签：jquery, knockout.js

我有一个`<ul>`填充有`foreach`绑定的元素。`<ul>`随着嵌入它的模板被重新渲染，这反过来又在不同的时间重新创建。这工作正常。

然而，在某些情况下，我想在此列表中添加额外的行为（例如，记录滚动事件）在 knockoutjs 之外。我不希望这段代码成为绑定的一部分，因为它只是有条件地注入（例如，在运行实验时）。我以为我可以做类似的事情

```
$('ul.doclist').scroll(function() { 
    // log scrolling here
}); 
```

在我的 DOM 初始化之后，但这不起作用，因为`knockoutjs`绑定替换了我绑定滚动事件的元素。是否有等效`.live()`于滚动的 a ？或者，是否有另一种方法可以将我的事件处理程序动态注入不依赖于静态编码属性的淘汰绑定机制？

**编辑**：2012 年 8 月 7 日下午 5:41：我尝试使用该`delegate()`方法，但无法弄清楚如何指定选择器以找到我的深度嵌套`ul`。

**编辑**：2012 年 8 月 7 日下午 6:31：我正在使用 jquery 1.4.4 并在 Chrome 中进行测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T01:49:14.417

我最终实现了以下模式：

在我的模板中：

```
<ul class="doclist" data-bind='foreach: rows, event: {scroll: window.viewModel.notifyOfScrollEvent}'>
</ul> 
```

在我的视图模型中：

```
this.documentScrolled = ko.observable();
this.notifyOfScrollEvent = function() {
    self.documentScrolled.valueHasMutated();
} 
```

在我的条件代码中：

```
viewModel.documentScrolled.subscribe(function() {
    console.log('scrolling');
}); 
```

不像我想要的那样解耦，但比显式引用更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T00:49:30.943

您可以尝试将事件处理委托给敲除不会弄乱的静态容器。在最顶层，所选容器可以是`document`.

`.live()`自 jQuery 1.7.1 起已弃用，但使用`on()`.

```
$(document).on('scroll', 'ul.doclist', function() { 
    // log scrolling here
}); 
```

有了这个，任何`<ul class="doclist">`元素都将具有日志记录操作，无论它是在附加处理程序时到位，还是稍后到位。

我承认我从来不需要委派`scroll`，但原则上这应该有效，提供一个“滚动”事件实际发生（*编辑 - 并且它冒泡*）。

## 编辑

以下是等效的：

```
$(selector).live(events, data, handler);                // jQuery 1.3+
$(document).delegate(selector, events, data, handler);  // jQuery 1.4.3+
$(document).on(events, selector, data, handler);        // jQuery 1.7+ 
```

因此，上面的表达式将转换为：

```
$(document).delegate('ul.doclist', 'scroll', function() { 
    // log scrolling here
}); 
```

如果可能，请替换`document`为更多本地化容器的选择器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T01:24:38.957

从[quirksmode](http://www.quirksmode.org/dom/events/scroll.html)看来，“滚动”事件没有冒泡，所以我认为事件委托不会起作用。

您可以使用 foreach 绑定的淘汰“afterAdd”和“afterRender”回调（在[foreach 文档页面](http://knockoutjs.com/documentation/foreach-binding.html)的注释 5 中记录）根据您是否要进行日志记录有条件地绑定到滚动事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T00:49:58.967

如果要进行委托注册，请选择一个始终存在的元素（我将`body`在示例中使用，但请选择最接近目标元素的元素）并执行以下操作：

```
$( "body" ).on( 'scroll', 'ul.doclist', handler ); 
```

对于 jQuery 1.4.4

```
$( "body" ).delegate( 'ul.doclist', 'scroll', handler ); 
```

# python - BeautifulSoup'没有属性'HTML_ENTITIES

> ID：11856011
> 
> 赞同：5
> 
> 时间：2012-08-08T00:25:41.330
> 
> 标签：python, beautifulsoup

我最近在 Windows 机器上将 BeautifulSoup 从 3.0 版升级到 4.1 版。

我现在收到一个奇怪的错误：

```
File "C:\path\to\myscript.py", line 23
0, in soupify
    return BeautifulSoup(html, convertEntities=BeautifulSoup.HTML_ENTITIES)
AttributeError: type object 'BeautifulSoup' has no attribute 'HTML_ENTITIES' 
```

这是导致抛出异常的代码片段：

```
def soupify(html):
    return BeautifulSoup(html, convertEntities=BeautifulSoup.HTML_ENTITIES) 
```

BS 的文档没有提到构造函数签名如何从 v3 更改为 v4。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T00:29:45.787

> 传入的 HTML 或 XML 实体总是被转换为相应的 Unicode 字符。Beautiful Soup 3 有许多处理实体的重叠方式，这些方式已被删除。 **BeautifulSoup 构造函数不再识别 smartQuotesTo 或 convertEntities 参数。**（Unicode，Dammit 仍然有 smart_quotes_to，但现在它的默认设置是将智能引号转换为 Unicode。）
> 
> 如果您想在输出时将这些 Unicode 字符转换回 HTML 实体，而不是将它们转换为 UTF-8 字符，则需要使用[输出格式化程序](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#output-formatters)。

资料来源：[http ://www.crummy.com/software/BeautifulSoup/bs4/doc/#entities](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#entities)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T04:41:08.433

Theron 的答案可能是最好的，但请确保命名空间没有被摆弄。如果我没记错的话，`HTML_ENTITIES`是名称空间的一部分，`BeautifulStoneSoup`而不是名称空间的一部分`BS`。`from BeatifulSoup import *`由于您调用的方式`BeautifulSoup(html, etc)`没有提及它来自的模块，因此看起来您已经完成了。

所以试着`return BeautifulSoup(html, convertEntities=BeautifulStoneSoup.HTML_ENTITIES)`看看这是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-30T21:18:50.497

您正在导入 BeautifulSoup，错误。偷偷做：

```
from BeautifulSoup import * 
```

做就是了：

```
 import BeautifulSoup 
```

# python - django 中是否有 get_form 辅助方法/如何调用表单的实例？

> ID：11856013
> 
> 赞同：0
> 
> 时间：2012-08-08T00:26:07.577
> 
> 标签：python, django, django-models, django-forms

Django 有一个名为“get_model”的辅助方法，它可以在给定应用程序名称和模型名称的情况下为您获取模型的实例。有没有类似的获取表格的方法？

原因是我正在尝试实现以下代码

```
def create(request):
  if request.method == 'POST':
    blank_form= request.session['form'] 
    form_request = blank_form(request.POST) 
```

这段代码试图做的事情如下：它检查会话以查看用户当前正在查看的表单并将该表单存储在变量“blank_form”中。我正在尝试创建由用户输入的数据绑定的表单的另一个实例（在另一个名为“form_request”的变量中）——但是，我收到一个错误，即blank_form 不可调用。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:43:27.383

像这样的东西：

```
blank_form = request.session['form'] 
new_form = blank_form.__class__(...) 
```

我从未尝试过以这种方式做任何事情，所以不能保证！

# mongoid - Mongoid 3 - 检查复合键的唯一性

> ID：11856015
> 
> 赞同：3
> 
> 时间：2012-08-08T00:26:10.303
> 
> 标签：mongoid, composite, validates-uniqueness-of

我切换到 Mongoid 3，这使得一些事情有所不同:) 目前我尝试检查复合字段是否是唯一的：

```
class Host
  include Mongoid::Document

  field :ip, :type => String
  field :port, :type => Integer
  field :username, :type => String
  field :password, :type => String

  validates_presence_of :ip
  validates_presence_of :port
end 
```

如何在其中获得一个 validates_uniqueness_of ，它应该检查 ip 和 port 作为复合字段是否是唯一的？AFAIK 在 Mongoid 2 中有一种方法可以基于多个字段创建一个新的 _id，但似乎在 Mongoid 3 中已将其删除：

```
 key :ip, :port 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T07:18:19.533

在 3 中删除了复合键支持，因为您现在可以轻松地覆盖默认 _id 字段并使用 lambda 设置默认值。尝试类似：

```
class Host
  include Mongoid::Document
  field :_id, type: String, default: -> { ip + ":" + port }
  ...
end 
```

然后，您可以验证此 _id 字段的唯一性。

有关更多信息，请参阅 Mongoid[文档](http://mongoid.org/en/mongoid/docs/documents.html)。

# python - 使用 Python 实现基本的 Google Place Add

> ID：11856018
> 
> 赞同：2
> 
> 时间：2012-08-08T00:26:58.347
> 
> 标签：python, google-maps-api-3, urllib2

我想允许用户使用我的应用向 Google 地图添加地点。本教程展示了如何实现地点搜索[https://developers.google.com/academy/apis/maps/places/basic-place-search](https://developers.google.com/academy/apis/maps/places/basic-place-search)我理解代码，但地点搜索和地点添加是不同的。在 Place Add 中，我们必须使用 POST URL 和 POST 正文[https://developers.google.com/places/documentation/?hl=fr#adding_a_place](https://developers.google.com/places/documentation/?hl=fr#adding_a_place)。我不知道如何在我的代码中插入 POST 正文。我想使用此代码，但要使其适应 Place Add：

```
import urllib2
import json

AUTH_KEY = 'Your API Key'

LOCATION = '37.787930,-122.4074990'

RADIUS = 5000

url = ('https://maps.googleapis.com/maps/api/place/search/json?location=%s'
     '&radius=%s&sensor=false&key=%s') % (LOCATION, RADIUS, AUTH_KEY)

response = urllib2.urlopen(url)

json_raw = response.read()
json_data = json.loads(json_raw)

if json_data[‘status’] == ‘OK’:
    for place in json_data['results']:
        print ‘%s: %s\n’ % (place['name'], place['reference'])' 
```

**编辑**

感谢您的帮助@codegeek 我终于找到了基于此库的解决方案[https://github.com/slimkrazy/python-google-places](https://github.com/slimkrazy/python-google-places)

```
url = 'https://maps.googleapis.com/maps/api/place/add/json?sensor=false&key=%s' % AUTH_KEY
data = {
    "location": {
        "lat": 37.787930,
        "lng": -122.4074990
     },
     "accuracy": 50,
     "name": "Google Shoes!",
     "types": ["shoe_store"]
}
request = urllib2.Request(url, data=json.dumps(data))
response = urllib2.urlopen(request)
add_response = json.load(response)
if add_response['status'] != 'OK':
    # there is some error 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T01:21:21.870

如果您阅读[http://docs.python.org/library/urllib2](http://docs.python.org/library/urllib2)上的 urllib2 文档，它清楚地说明了以下内容：

“urllib2.urlopen（url [，数据] [，超时]）

> data 可以是一个字符串，指定要发送到服务器的附加数据，或者如果不需要此类数据，则为 None。目前 HTTP 请求是唯一使用数据的请求；当提供数据参数时，HTTP 请求将是 POST 而不是 GET。data 应该是标准 application/x-www-form-urlencoded 格式的缓冲区。urllib.urlencode() 函数采用 2 元组的映射或序列，并以这种格式返回一个字符串”

So, you need to call the urlopen function with data parameter which will then send the request through POST. Also. looking through the Google Places Add API page, you need to prepare the data which includes location, accruracy etc. urlencode() it and you should be good. If you want an example, see this gist at: [https://gist.github.com/1841962#file_http_post_httplib.py](https://gist.github.com/1841962#file_http_post_httplib.py)

# database-design - 在数据库中存在“外键冗余”是不是很糟糕？

> ID：11856022
> 
> 赞同：11
> 
> 时间：2012-08-08T00:28:04.667
> 
> 标签：database-design

我正在使用以下简化示例设计数据库结构：

```
Team has many members
Member has many clients
Client has many projects 
```

假设我的对象有这些参数：

```
Team: id, type
Member: id, team_id, name
Client: id, member_id, email
Project: id, client_id 
```

找到项目的客户、客户的成员或成员的团队非常简单。

但是，假设我要找到一个项目的团队，例如，我必须先找到一个项目的客户，然后是客户的成员，然后是成员的团队。

我可以直接将 team_id 添加到项目中，如下所示：

```
Project: id, client_id, team_id 
```

然而，我意识到这增加了一定程度的冗余，因为这些信息*可以*通过“向上关系树”获得。这是个坏主意吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T00:34:53.763

这是否是一个坏主意取决于数据库的典型用例。

添加额外的外键会增加修改结构的成本（INSERT，如果修改关系则更新，DELETE）。

*没有*额外的外键会增加查询的成本，否则它们会从它们的存在中受益。

如果项目结构没有太大变化，但您确实经常查询结构，则额外的外键可能是净正数。如果有疑问，请使用合理的测试数据创建结构，并对您认为典型的一些查询进行基准测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T00:39:04.180

这不像你必须在这里做 4 个查询。您只需在单个查询中连接所有表即可。这不会增加很多复杂性，但确实增加了一点。我会选择你所拥有的。

# actionscript-3 - AS3 超类变量和子类错误

> ID：11856023
> 
> 赞同：1
> 
> 时间：2012-08-08T00:28:13.797
> 
> 标签：actionscript-3, variables, subclass, superclass

我正在创建两个定义对象一般结构的类，以及许多作为父类变体的子类。变量在超类中具有类型声明，在子类中具有值声明。然而：

[Body_Part_Armor.as]

```
package  {
    import flash.display.*;
    public class Body_Part_Armor extends MovieClip
    {
        var agility_malus;
        var hp_total;
        var defense;
        var armor_extra_height;
        var armor_extra_width;  
        var hp_left;
        public function Body_Part_Armor()
        {
            hp_left = hp_total;
        }
    }
} 
```

[Chest_Armor_1.as]

```
package
{
    public class Chest_Armor_1 extends Body_Part_Armor
    {
        agility_malus = 2;
        hp_total = 20;
        defense = 7;
        armor_extra_height = 10;
        armor_extra_width = 6;

        public function Chest_Armor_1()
        {
        }
    }   
} 
```

对于编译器调试测试 Body_Part_Armor 和 Chest_Armor_1 完全没问题，而

[武器.as]

```
package
{
    import flash.display.*;
    public class Weapon extends MovieClip {
        var weapon_type:Number;
        var n_attacks:Number;
        var damage:Number;
        var precision:Number;
        // some other variables in here
        var is_empty_weapon:Boolean;
        public function Weapon()
        {   
        }           
    }
} 
```

[Empty_Arm_Weapon.as]

```
package
{
    public class Empty_Arm_Weapon extends Weapon
    {
        is_empty_weapon = true;
        public function Empty_Arm_Weapon() {
        }
    }   
} 
```

给我以下错误：1120：访问未定义的属性 is_empty_weapon（但如果我写 var is_empty_weapon = true; 在 Empty_Arm_Weapon 中，它会抱怨与命名空间 public 中变量的继承定义发生冲突）。

但是，如果我在构造函数 Empty_Arm_Weapon() 中定义变量值 is_empty_weapon = true，则不会出现任何错误。

我想我错过了一些非常明显的东西，但我无法区分这两种情况，但一种有效，另一种无效。你能帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T00:33:18.870

您应该将变量的赋值移动到构造函数中，例如：

```
package
{
    public class Empty_Arm_Weapon extends Weapon
    {
        public function Empty_Arm_Weapon()
        {
            is_empty_weapon = true;
        }
    }   
} 
```

或者，如果您希望所有继承类都使用此值，则可以使用默认值 true 声明它

```
package
{
    import flash.display.*;
    public class Weapon extends MovieClip {
        protected var weapon_type:Number;
        protected var n_attacks:Number;
        protected var damage:Number;
        protected var precision:Number;
        // some other variables in here
        protected var is_empty_weapon:Boolean=true;
        public function Weapon()
        {   
        }           
    }
} 
```

还要确保限定变量的范围，以便子类可以访问它们（如果这是您想要的），将它们标记为受保护（可通过此和子类访问）或公共（可访问此，使用此对象的子类和实例） .

**编辑**

我相信您在行为之间的差异中看到的具体问题可能与您在第二种情况下有一个类型化变量而在第一种情况下未声明类型这一事实有关。这意味着它们将默认为 undefined 而不是 false 或 null 或 0 这可能会产生一些奇怪的行为，无论哪种方式这都不是我学到的正确方法，在定义或子类中设置默认值覆盖默认值在构造函数中。

[http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f9d.html](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f9d.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T19:47:17.623

另外一个相关问题是，如果您从子类的实例中加载超类的实例，则被覆盖的受保护函数将引发“不是函数”错误，即使在编译器中它显示同一函数的自动完成。

原因是虽然类的继承允许访问此函数，但子对象在运行时不是父对象的扩展，而是一个子对象，只是巧合地是创建者的超类。

要解决这个问题，只需将有问题的函数标记为“公共函数”并且用户“覆盖公共”而不是“覆盖受保护”以从父类（子类）访问它，就像您通常那样。如果类成员必须是私有的或受保护的，则需要以另一种方式访问​​它。

# mysql - 这个查询有什么问题？

> ID：11856026
> 
> 赞同：1
> 
> 时间：2012-08-08T00:28:44.277
> 
> 标签：mysql

我有一个包含以下字段的表：id | 域名 | domain_certificate_no | 核心价值

select 语句的输出示例如下：

```
'57092', '02a1fae.netsolstores.com', '02a1fae.netsolstores.com_1', '55525772666'
'57093', '02a1fae.netsolstores.com', '02a1fae.netsolstores.com_2', '22225554186'
'57094', '02a1fae.netsolstores.com', '02a1fae.netsolstores.com_3', '22444356259'
'97168', '02aa6aa.netsolstores.com', '02aa6aa.netsolstores.com_1', '55525772666'
'97169', '02aa6aa.netsolstores.com', '02aa6aa.netsolstores.com_2', '22225554186'
'97170', '02aa6aa.netsolstores.com', '02aa6aa.netsolstores.com_3', '22444356259’ 
```

我想编写一个查询来检索重复的数量`keyvalue`，并且它与证书_1`keyvalue`的多个相关联。`domain_certificate_no`所以我写了这个：

```
select count(keyvalue), keyvalue from db.table group by (keyvalue) 
having count(keyvalue)>1 and domain_certificate_no like '%_1'; 
```

我收到一个错误号 1054 说 unknown column `domain_certificate_no`。你能告诉我有什么问题吗？如何编写查询以实现我的目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:32:55.407

只是关于逻辑：

```
SELECT COUNT(domain_certificate_no), keyvalue
FROM db.table 
WHERE domain_certificate_no LIKE '%_1'
GROUP BY keyvalue
HAVING COUNT(keyvalue)>1; 
```

如果仍然存在未知列错误，请显示结果`DESC db.table;`

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T00:37:50.127

`LIKE`关键字应该在您的`WHERE`子句中

```
 SELECT domain_certificate_no, COUNT(keyvalue) 
     FROM db.table 
    WHERE domain_certificate_no LIKE '%_1'
 GROUP BY domain_certificate_no
   HAVING COUNT(keyvalue) > 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T00:39:37.443

```
SELECT
    COUNT(keyvalue) AS keyvaluecount, keyvalue 
FROM 
    db.table 
HAVING
    keyvaluecount > 1 AND domain_certificate_no LIKE '%_1' 
GROUP BY 
    (keyvalue) 
```

# java - Java 背景 JFrame 与 Jpanel 在网格中排列图像

> ID：11856027
> 
> 赞同：2
> 
> 时间：2012-08-08T00:29:06.857
> 
> 标签：java, swing, jframe, jpanel, background-image

**所以我一直在研究我的程序，但我无法使用网络地图的背景图像设置 JFrame，然后在 JFrame顶部**使用 MigLayout 设置 JPanel ，这将允许我按照网络地图。我已经看到了几种关于如何设置背景图像的不同方法，并尝试使用我在本网站其他地方找到的示例，但效果不太好。此外，我对此进行了更多研究，发现在 JFrame 上放置 JPanel 可能会阻止看到 JFrame 背景图像。我希望有人可以查看我的代码并让我知道是否是这种情况。

这是我设置背景的课程：

```
public class bwMonBackground extends JFrame {
    Image img;
    public bwMonBackground() {
        try {
            img = ImageIO.read(new File("/Users/pwopperer/workspace/BWmon/src/customer_vlans.jpg"));
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
public void paintComponent(Graphics g)
{
    super.paintComponents(g);
    g.drawImage(img, 0, 0, getWidth(), getHeight(), this);
}

} 
```

这是我的主要内容：

```
public class bwMonBackgroundMain {

    public static void main( String[] args )
        {
            bwMonBackground frame = new bwMonBackground();
            frame.setLayout(new FlowLayout(FlowLayout.LEFT,10,20));
            migLayout testing = new migLayout();
            frame.add(testing.createLayout());
            frame.setVisible(true);
            frame.setResizable(false);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.pack();

        }
} 
```

编辑：当我这样运行它时，我只得到一个 JPanel，其中包含我添加到其中的 6 个 JLabel

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T01:47:28.787

这有点挑剔，但你应该总是打电话`super.paintComponent`，除非你有一个非常非常好的理由不这样做。

此外，您应该尽可能`Graphics.drawImage`提供`ImageObserver`。基本上这意味着如果图像处理发生在另一个线程中，ImageObserver 将不会通知更改并自动更新；）

```
public void paintComponent(Graphics g)
{
    super.paintComponent(g);
    g.drawImage(img, 0, 0, this);
} 
```

将组件放置到地图上时，您需要确保它们是透明的 ( `JComponent.setOpaque(false)`)。这将允许背景显示出来。

显然，您可以选择一些不透明的组件，以便它们更易于阅读或提供`AlphaComposite`s 以提供半透明效果。

**其他想法**

我不会`JFrame`以这种方式覆盖。框架具有内容窗格，负责核心内容。

此外，根据记忆，`JFrame`没有`paintComponent`方法：P

我会改为覆盖`JPanel`(or `JComponent`) 和 user there`paintComponent`方法，然后将此面板添加到框架内容窗格或将其设置为内容窗格本身（`frame.setContentPane(...)`- 请注意，在将任何其他组件添加到框架之前执行此操作，因为这样将有效地将它们从 UI 中删除；))

# field - 返回一个自定义字段，其中值取决于弹性搜索中的查询

> ID：11856029
> 
> 赞同：1
> 
> 时间：2012-08-08T00:29:26.370
> 
> 标签：field, elasticsearch

我在elasticsearch中有一些类似的数据：

```
account (http://localhost:9200/myapp/account/1)
========
name
state
groups //groups is an array containing objects like so {id: 1, starred: true}
       //the id is the id of the group type

email (http://localhost:9200/myapp/email/1?parent=1)
========
email
primary //just a boolean to denote whether this email is primary or not

group
========
name
description 
```

`email`s 是 的孩子`account`。

基于[imotov 的优秀答案](https://stackoverflow.com/questions/11806584/treat-child-as-field-of-parent-in-elastic-search-query/11819361#11819361)，我能够运行搜索`account.name`并`email.email`返回`account`搜索前缀与上述 2 个字段匹配的 ALL：

```
{
  "query": {
    "bool": {
      "must": [
        {
          "term": {
            "statuses": "active"
          }
        }
      ],
      "should": [
        {
          "prefix": {
            "name": "a"
          }
        },
        {
          "has_child": {
            "type": "email",
            "query": {
              "prefix": {
                "email": "a"
              }
            }
          }
        }
      ],
      "minimum_number_should_match" : 1
    }
  }
} 
```

我现在想做的是为每个结果返回 2 个自定义字段：

*   对于每个结果返回一个名为 的字段`email`，如果搜索与`email`类型（它的子类型）匹配，则`account`返回该电子邮件，否则返回`primary`链接到该帐户的电子邮件，如果没有，`null`则可以返回。

*   对于每个结果，返回一个名为`group`. 该字段的值应包含`group`其 id 存储在`groups`数组中的星号的名称。本质上：在 each 中查找 true 的`group.id`位置，然后根据我们找到的 id从类型返回匹配项。`group.starred``account.groups``group.name``group`

我一直在查看[脚本字段](http://www.elasticsearch.org/guide/reference/api/search/script-fields.html)，但我不确定它是否能够为每次点击返回字段。我也不确定上述是否真的可以在 ES 中完成。

有人可以提供一些关于这是否可能以及如何开始的指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:42:51.847

目前，根本无法访问`has_child`or`nested`子句中的数据。

唯一的解决方案是获取一些数据，在客户端上做出一些决策，然后获取更多数据。

这是我为实现它所做的事情：

*   运行上面的查询并取回数据。

*   要处理显示匹配电子邮件或主电子邮件（在电子邮件类型上运行）：

    ```
    {"query":
        {"bool":{
           "should":{
            {
               "prefix":{
                  "email" : "the query"
               }
            },
            {
               "terms":{
                  "_parent" : ["list", "of", "account", "ids"]
              }
           }
          }
        }
      }
    } 
    ```

根据上面的查询，我们可以得到任何与搜索词匹配的电子邮件地址。请记住将上述查询中的字段设置为 include `_parent`。

然后，我们可以使用`array_diff()`PHP 以外的语言中的类似函数来区分上面的父 ID 和原始查询。这应该会给我们一个没有电子邮件匹配的帐户列表。然后只需发送另一个请求以获取这些帐户的主要电子邮件。

对于组，发送查询以键入`account`并：

*   限制`_id`为帐户 ID 列表。
*   约束`group.starred`为`true`。

这应该会为您提供已加星标的组列表。要获取更多信息（名称等），请发送查询以键入`group`并：

*   限制`_id`到上面的组 ID。

最后，进行一些客户端处理将其组合在一起，以便程序的下一部分更容易使用。

# javascript - jQuery 如果选中复选框，请执行此操作

> ID：11856035
> 
> 赞同：1
> 
> 时间：2012-08-08T00:30:36.570
> 
> 标签：javascript, jquery, forms, checkbox

我有两个隐藏的 div 元素，`$(document).ready(function(){}`如果它们的特定复选框被选中，它们应该出现，如果它被选中然后未选中，它们就会消失。我可以在使用非常容易地选择复选框时显示元素，`show()`或者`slideDown()`当我使用`if else`语句时，它每次都返回为 false 并且表单保持隐藏...

```
$(document).ready(function(){
        if($("#upload_yes").is(':checked')) {
            $("#upload_form").show();
        } else {
            $("#upload_form").hide();
        }

        if($("#new_info_yes").is(':checked')) {
                $("#new_info_form").slideDown(500);
        } else {
                $("#new_info_form").hide();
        }   
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T00:34:08.047

您没有将此代码绑定到正确的事件：

```
$(document).ready(function() {
  $("#upload_yes").on('change', function() {
    if ($(this).is(':checked')) {
      $("#upload_form").show();
      $("#new_info_form").slideDown(500);
    } else {
      $("#upload_form, #new_info_form").hide();
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T00:40:38.830

看到[这个小提琴](http://jsfiddle.net/94RuA/2/)

您必须在`change`活动中完成工作。

然后调用`.trigger('change')`复选框使 div 在初始页面加载时显示/隐藏。

编码 ：

```
$(document).ready(function(){

    $('input#upload_yes').change(function(){
        if($(this).is(':checked')) {
            $("#upload_form").show();
        } else {
            $("#upload_form").hide();
        }
    });

    $('input#new_info_yes').change(function(){
         if($(this).is(':checked')) {
                $("#new_info_form").slideDown(500);
        } else {
                $("#new_info_form").hide();
        }   
    });

    //Trigger the change event so the divs are initially shown or hidden.
    $('input[type=checkbox]').trigger('change');

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T00:42:12.480

要评估是否发生了变化，您需要在事件中执行代码！（在这种情况下：）`change`因为你正在做的是获取`is(':checked')`just at的值，`$(document).ready`它总是会返回`false`，因为在第一刻你的元素没有被检查。

* * *

好吧，这是正确的方法:-)

*（我试图减少代码）*

**现场演示：**

[http://jsfiddle.net/oscarj24/RSDRg/](http://jsfiddle.net/oscarj24/RSDRg/)

**代码：**

```
$(document).ready(function() {
  $('#upload_yes').on('change', function() {
     var done = $(this).is(':checked');
     if(done) {
       $('#upload_form').show();
       $('#new_info_form').slideDown(500);
     } else {
       var frm = $('#upload_form').add('#new_info_form');
       frm.hide();
     }
  });
}); 
```

# android - 将样式应用于整个应用程序或活动

> ID：11856036
> 
> 赞同：-1
> 
> 时间：2012-08-08T00:30:54.287
> 
> 标签：android, android-styles

在一本 Android 书籍中，我说主题可以应用于整个活动或整个应用程序。它没有显示如何，但 Android 文档说只需将主题语句放入 androidmanifest.xml 文件中，就像这样......

```
<application android:icon="@drawable/ic_launcher">
    <activity android:theme="@style/bigred"  . . . . 
```

但它不起作用。只有应用程序栏使用大红色字体样式，其他小部件中的文本根本没有样式。这应该怎么做？

文档还说要查看Android可以使用哪些样式来阅读代码！还有比这更好的文档吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T03:03:46.903

请查看以下内容：[`How to Apply Styles to the all UI in Android`](https://sites.google.com/site/ramkiranworks/customization/Themes.zip?attredirects=0&d=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T00:35:33.087

遵循这些教程，它也对我有所帮助。[自定义标题](http://www.londatiga.net/it/how-to-create-custom-window-title-in-android/)和[自定义标题](http://www.helloandroid.com/tutorials/how-create-custom-titlebar)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T00:35:42.613

尝试使用**actionbarsherlock**。从[这个](http://actionbarsherlock.com/)网站浏览他们的示例代码。

# cakephp - CakePHP 的 Google Authenticator Multi-part (TOTP) 登录实现

> ID：11856040
> 
> 赞同：1
> 
> 时间：2012-08-08T00:31:03.230
> 
> 标签：cakephp, authentication, google-authenticator

我希望将 Google Authenticator 实现到 CakePHP 应用程序中。诀窍是用户可以确定他们是否要使用它。这意味着如果用户使用多部分登录，他们将使用他们的用户名和密码正常登录。一旦他们成功提交了正确的用户名/密码组合，他们需要被重定向到向 Google Authenticator 询问密码的页面。

在他们输入密码之前，您如何限制身份验证成功？我可以进行重定向，一切都很好，但是如果他们退出密码表单并进入该站点，他们已经使用他们的用户名/密码进行了身份验证，他们可以很好地浏览该站点。

在密码确认成功之前，我需要一些关于如何关闭身份验证的指导。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:31:04.217

我注意到这个问题很老而且没有答案，我也在做类似的事情，所以我会分享我的两分钱。希望你现在已经解决了这个问题。

您的用户管理系统应仅在完成整个登录过程后才提供会话密钥，这意味着您应仅在用户通过所有步骤提供所有身份验证数据后才允许用户进入。

1.  接收用户名和密码
2.  检查凭据和身份验证选项
3.  如果凭据正常且未启用 Google 身份验证，请给他会话密钥，否则重试
4.  如果凭据正常并且启用了 Google 身份验证，则将 $_POST['user'] 传递给质询表单
5.  如果 TOTP 密码匹配服务器端检查，则返回会话密钥，否则重试

> ```
> $_POST[] ----> loginCheck() ----> if(GAuth) ----> checkTotp() ----> sessionKey
>                                       |                                 |
>                                       *---------------------------------* 
> ```

loginCheck() 应该检查用户和密码是否正确，否则拒绝访问

if(GAuth) 应该返回 true 或 false，取决于您的用户是否使用 GAuth

checkTotp 应该是一种在客户端和服务器上检查 TOTP 密码的方法

sessionKey 应该是用来访问受保护内容的令牌，在服务器端和客户端存储一段时间

**或者**根据您的需要调整这个想法......在我看来，当他通过所有身份验证试验时，您应该接受系统中的用户。

您可以制作一个包含用户/密码和密码的用户表单，并一次处理所有数据并避免两页。

阅读更多关于[https://www.rfc-editor.org/rfc/rfc6238](https://www.rfc-editor.org/rfc/rfc6238)

# c# - 编辑资源中的字符串

> ID：11856043
> 
> 赞同：0
> 
> 时间：2012-08-08T00:31:43.153
> 
> 标签：c#, .net, winforms

我将如何编辑项目资源中的字符串？尝试时出现此错误：

> 无法将属性或索引器“Project.Properties.Resources.ExternalIp”分配给 - 它是只读的

这就是我所做的：

```
Resources.ExternalIp = utf8.GetString(webClient.DownloadData("http://automation.whatismyip.com/n09230945.asp")); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T00:55:19.023

`Properties.Ressources` are readonly ("compiled"), you have to use `Properties.Settings` & put the Scope to "User" so it will be 'ReadWrite'

```
Project.Properties.Settings.Default.ExternalIp = utf8.GetString(webClient.DownloadData("http://automation.whatismyip.com/n09230945.asp"));
Project.Properties.Settings.Default.Save(); 
```

![enter image description here](../Images/e14b37e23dd1ea734c5ca75eba5496ff.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T00:48:01.210

资源不应该被写入；它们嵌入在可执行文件中，因此更改它们将涉及修改可执行文件。

从您的代码看来，您实际上需要[应用程序设置](http://msdn.microsoft.com/en-us/library/k4s6c3a0.aspx)，而不是资源。

# java - 我用什么类来扩展 SwingWorker？

> ID：11856046
> 
> 赞同：2
> 
> 时间：2012-08-08T00:31:58.440
> 
> 标签：java, multithreading, swing, swingworker

我有一个 Java Swing 应用程序。我想将信息上传到 Web 端点，该过程需要足够的时间来证明将工作转移到另一个线程是合理的。我想使用 Swing SwingWorker 范例来做到这一点。我对应该在哪里扩展 SwingWorker 感到困惑。

现在，我为每个 Web 端点都有一个类，该类存储发往该端点的所有数据，以及与端点交互所需的代码（位于名为 upload() 的方法下）。这些类是否应该实现 SwingWorker，因为它需要执行其任务的所有数据都在那里？或者我应该有一个辅助类 FooWorker 实现 SwingWorker，它将从内部 Site 对象调用 Upload()？

如果我创建了一个辅助 FooWorker 类，那么似乎我必须费力地将对站点的引用填充到我实例化的每个 FooWorker 对象中（每个 Web 端点一个线程/工作者），但站点不会被一堆 SwingWorker 方法和代码污染。

如果我使用 Site 类扩展 SwingWorker，那么我可以直接从每个站点的 EDT 调用 .execute() ，这对我来说比为每个站点创建一个工作人员，然后让该工作人员调用 upload()离开网站。

只是寻找关于哪种方法更好的意见和想法。Site 类已经相当复杂，如果我扩展 SwingWorker 类，我怕会在其中放入一堆与领域无关的东西。但是 FooWorker 类，如果我走那条路，基本上只是对 Site 类的一个薄包装。这个包装器是否值得让 Site 类只关注它自己的域方法/数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:01:09.897

在有意义的地方引入抽象总是一个好主意。在这种情况下，我会说这是有道理的，因为您最终可能会创建多个 SwingWorker 类。

您可以考虑创建一个名为 SiteWorker 的单个 SwingWorker 类。然后，我将创建实现方法upload() 的站点接口。每个代表与站点端点连接的类都将实现此站点接口。然后，您可以简单地让 SiteWorker 处理 Site 接口，而不必处理实现 SwingWorker 的所有不同类型的 Site 类。

请记住，编程到接口而不是实现。如果您可以只创建一个 SiteWorker，然后专注于各种站点实施，那么您的生活会更轻松。

因此，您可以将 Site 实例（可以是任何实现 Site 的类）作为参数传递给 SiteWorker 类，然后它会在其 doInBackground() 方法中简单地调用实现 Site 的实例的 upload() 方法。

# lua - 如何从表成员中引用 lua 表成员？

> ID：11856047
> 
> 赞同：6
> 
> 时间：2012-08-08T00:32:26.580
> 
> 标签：lua

我在lua中有一张桌子：

```
enUS = {
   LOCALE_STHOUSANDS = ",",  --Thousands separator e.g. comma

   patNumber = "%d+["..LOCALE_STHOUSANDS.."%d]*", --regex to find a number

   ["PreScanPatterns"] = {
      ["^("..patNumber..") Armor$"] = "ARMOR",
   }
} 
```

所以你会看到这个表中有一个完整的自引用链：

*   `LOCAL_STHOUSANDS`
    *   `patNumber`
        *   `["^("..patNumber..") Armor$"]`

如何在 lua 表中执行自引用？

* * *

我不想做的是必须硬替换这些值；有数百个参考：

```
enUS = {
   LOCALE_STHOUSANDS = ",",  --Thousands separator e.g. comma

   patNumber = "%d+[,%d]*", --regex to find a number

   ["PreScanPatterns"] = {
      ["^(%d+[,%d]*) Armor$"] = "ARMOR",
   }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T00:43:13.080

> 如何在 lua 表中执行自引用？

你没有。

Lua 不是 C。在构建表之前，表项都不存在。因为表本身还不存在。因此，您不能让表构造函数中的一个条目引用表中不存在的另一个条目。

如果你想减少重复输入，那么你应该使用局部变量和`do/end`块：

```
do
  local temp_thousands_separator = ","
  local temp_number_pattern = "%d+["..LOCALE_STHOUSANDS.."%d]*"

  enUS = {
   LOCALE_STHOUSANDS = temp_thousands_separator,  --Thousands separator e.g. comma

   patNumber = "%d+["..temp_thousands_separator.."%d]*", --regex to find a number

   ["PreScanPatterns"] = {
      ["^("..temp_number_pattern..") Armor$"] = "ARMOR",
   }
  }
end 
```

该`do/end`块在那里，因此临时变量不存在于表创建代码之外。

或者，您可以分阶段进行构建：

```
 enUS = {}
  enUS.LOCALE_STHOUSANDS = ",",  --Thousands separator e.g. comma

  enUS.patNumber = "%d+["..enUS.LOCALE_STHOUSANDS.."%d]*", --regex to find a number

  enUS["PreScanPatterns"] = {
      ["^("..enUS.patNumber..") Armor$"] = "ARMOR",
   } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T00:43:30.157

在构造函数本身内没有办法这样做，但你可以在创建表之后这样做：

```
enUS = {
   LOCALE_STHOUSANDS = ","
}

enUS.patNumber = "%d+["..enUS.LOCALE_STHOUSANDS.."%d]*"
enUS.PreScanPatterns = {
  ["^("..enUS.patNumber..") Armor$"] = "ARMOR",
} 
```

如果你特别需要引用当前表，Lua 提供了一个“self”参数，但它只能在函数中访问。

```
local t = {
  x = 1,
  y = function(self) return self.x end
} 

-- this is functionally identical to t.y
function t:z() return self.x end

-- these are identical and interchangeable
print(t:y(), t.z(t))
-- 1, 1 
```

# php - 服务器无法确定此原始 HTTP 消息的长度

> ID：11856048
> 
> 赞同：0
> 
> 时间：2012-08-08T00:32:46.523
> 
> 标签：php, http, post, chunked-encoding

我正在尝试使用 PHP 中的套接字将分块的 POST 数据流式传输到本地服务器进行测试。如果我不分块请求实体主体并提供 Content-Length 标头，这可以正常工作。

但是，当我按如下方式对传输进行分块时，服务器无法识别消息的结尾。下面的原始消息有什么问题导致服务器无法正确识别消息已完成？

```
POST / HTTP/1.1
HOST: localhost
CONTENT-TYPE: text/plain
USER-AGENT: testing
ACCEPT-ENCODING: gzip,deflate,identity
TRANSFER-ENCODING: chunked

36
When in the chronicle of wasted time
0 
```

在最后一个 '0' 之后有 2x `CRLF`，所以最后 5 个字节是：`0x30, 0x0D, 0x0A, 0x0D, 0x0A`.

我已经尝试将此请求发送到本地 Apache 服务器和 PHP5.4 的内置测试服务器。两者都无法确定请求已完成并且执行挂起，直到套接字超时。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T00:41:01.677

该值应为十六进制 36 → 24

# bash - 有没有一种简单的方法可以将“原始”字符串传递给 grep？

> ID：11856054
> 
> 赞同：60
> 
> 时间：2012-08-08T00:33:08.807
> 
> 标签：bash, escaping, grep, command-line-interface

`grep`从命令行使用时不能输入“原始”字符串，因为某些字符需要转义才能不被视为文字。例如：

```
$ grep '(hello|bye)' # WON'T MATCH 'hello'
$ grep '\(hello\|bye\)' # GOOD, BUT QUICKLY BECOMES UNREADABLE 
```

我`printf`用来自动转义字符串：

```
$ printf '%q' '(some|group)\n'
\(some\|group\)\\n 
```

这会生成字符串的 bash 转义版本，并且使用反引号，可以轻松地将其传递给 grep 调用：

```
$ grep `printf '%q' '(a|b|c)'` 
```

然而，这显然不是为了这个：输出中的某些字符没有被转义，而有些则不必要地转义。例如：

```
$ printf '%q' '(^#)'
\(\^#\) 
```

传递给时`^`不应转义字符。`grep`

是否有一个 cli 工具接受原始字符串并返回**可以直接用作 grep 模式的字符串的 bash 转义版本**？如果不是，我怎样才能在纯 bash 中实现这一点？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-08-08T00:41:25.163

如果要搜索确切的字符串，

```
grep -F '(some|group)\n' ... 
```

`-F`告诉`grep`按原样处理模式，不解释为正则表达式。

（这通常也可用`fgrep`。）

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-08-08T04:57:13.513

如果您尝试`grep`使用扩展正则表达式语法，则可以使用`grep -E`(aka `egrep`)。您还应该了解`grep -F`(aka `fgrep`)，并且在较新版本的 GNU Coreutils 中，`grep -P`.

背景：原版`grep`有一组相当少的正则表达式运算符；这是 Ken Thompson 最初的正则表达式实现。后来开发了一个具有扩展曲目的新版本，出于兼容性原因，获得了不同的名称。在 GNU`grep`中，只有一个二进制文件可以理解传统的基本 RE 语法（如果调用为`grep`），以及 ERE （如果调用为 ）`egrep`。通过使用反斜杠转义来引入特殊含义，`egrep`可以使用 from 的一些构造。`grep`

随后，Perl 编程语言进一步扩展了形式主义；这种正则表达式方言似乎也是大多数新手错误地期望`grep`支持的。，`grep -P`它确实；但这尚未在所有平台上得到广泛支持。

因此，在 中`grep`，以下字符具有特殊含义：`^$[]*.\`

在`egrep`中，下列字符也有特殊含义：`()|+?{}`。（用于重复的大括号不在原来的. 中`egrep`。）分组括号还可以使用 、 等进行反向`\1`引用`\2`。

在许多版本中`grep`，您可以通过在特价`egrep`之前放置反斜杠来获得该行为。`egrep`还有一些特殊的序列，如`\<\>`.

在 Perl 中，引入了大量额外的转义，例如`\w` `\s` `\d`。在 Perl 5 中，正则表达式功能得到了显着扩展，具有非贪婪匹配`*?` `+?`等、非分组括号`(?:...)`、前瞻、后瞻等。

...话虽如此，如果您确实想在*不调用任何外部进程*`egrep`的情况下将正则表达式转换为`grep`正则表达式，请尝试每个特殊字符；但要认识到这不能正确处理字符类、否定字符类或反斜杠转义。*`${regex/pattern/substitution}``egrep`*

 ** * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-06-06T00:26:25.623

当我将 grep -E 与用户提供的字符串一起使用时，我用这个转义它们

```
ere_quote() {
    sed 's/[][\.|$(){}?+*^]/\\&/g' <<< "$*"
} 
```

示例运行

```
ere_quote ' \ $ [ ] ( ) { } | ^ . ? + *'
# output
# \\ \$ \[ \] \( \) \{ \} \| \^ \. \? \+ \* 
```

这样您就可以安全地在正则表达式中插入带引号的字符串。

例如，如果您想查找以用户内容开头的每一行，用户提供有趣的字符串为 .*

```
userdata=".*"
grep -E -- "^$(ere_quote "$userdata")" <<< ".*hello"
# if you have colors in grep you'll see only ".*" in red 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-04-26T17:33:52.340

我认为以前的答案并不完整，因为他们错过了一件重要的事情，即以破折号（-）开头的字符串。所以虽然这**不起作用**：

```
echo "A-B-C" | grep -F "-B-" 
```

这个将：

```
echo "A-B-C" | grep -F -- "-B-" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-19T09:18:54.447

```
quote() {
    sed 's/[^\^]/[&]/g;s/[\^]/\\&/g' <<< "$*"
} 
```

用法：`grep [OPTIONS] "$(quote [STRING])"`

这个功能有一些实质性的好处：

*   `quote`独立于正**则表达式的味道**。您可以`quote`在
    *   `grep` ( `-G`)`（BRE，默认值）
    *   `grep -E`(ERE)
    *   `grep -P`(PCRE)
    *   `sed` ( `-E`) `"s/$(quote [STRING])/.../"`（只要您不使用`\`,`[`或`]`代替`/`）。
*   `quote`甚至**可以在**不直接引用相关的极端情况下工作，例如
    *   [前导`-`](https://stackoverflow.com/a/43640965/6770384)被引用，以免它们被误解为选项`grep`。
    *   尾随空格被引用，以便不被删除`$(...)`。

`quote`只有在`[STRING]`包含换行符时才会失败。但一般来说，这个问题没有解决办法，因为像这样的工具`grep`并且`sed`可能不支持其搜索模式中的换行符（即使它们被写为`\n`）。

此外，还有一个缺点，即引用的输出通常比未引用的输入长三倍。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-06T08:20:58.427

只想评论下面的示例，该示例显示子字符串“-B”被 grep 解释为命令行选项并且命令失败。

```
echo "A-B-C" | grep -F "-B-" 
```

*grep*对于这种情况有一个特殊的选项：

> **-e PATTERNS, --regexp=PATTERNS** 使用 PATTERNS 作为模式。如果此选项被多次使用或与 -f (--file) 选项结合使用，则搜索所有给定的模式。此选项可用于保护以“-”开头的模式。

因此，该问题的解决方法是：

```
echo "A-B-C" | grep -F -e "-B-" - 
```*

# python - 如何增加龙卷风的超时时间

> ID：11856055
> 
> 赞同：0
> 
> 时间：2012-08-08T00:33:09.750
> 
> 标签：python, tornado, stress-testing

我正在尝试龙卷风框架。但是我发现在压力测试（使用多机械）中，龙卷风经常在 30 秒后失败。我在多机械化中使用 10 个线程并运行 100 秒，大约 500 个请求/秒。30秒后故障率约为15%。整个测试时间约为 100 秒。从统计中，我意识到，失败可能是由于 0.2 秒后超时。我搜索了几种增加网络超时的方法，但没有任何效果。

以下是我的龙卷风代码：

```
import tornado.ioloop
import tornado.web

class MainHandler(tornado.web.RequestHandler):
    @tornado.web.asynchronous
    def get(self):
        self.write("Hello, world")
        self.finish()

application = tornado.web.Application([
    (r"/", MainHandler),
])

if __name__ == "__main__":
    application.listen(8000)
    tornado.ioloop.IOLoop.instance().start() 
```

这是我的多机械测试脚本：

```
import requests
import random
import time

class Transaction(object):
    def __init__(self):
        pass
    def run(self):
        r = requests.get('http://127.0.0.1:8000')
        output = r.raw.read()
        assert(r.status_code == 200)
        return output

if __name__ == '__main__':
    trans = Transaction()
    trans.run()
    print trans.custom_timers 
```

以下是我从 multimech-run 得到的错误信息

```
Traceback (most recent call last):
  File "././test_scripts/v_user.py", line 12, in run
    r = requests.get('http://127.0.0.1:8000')
  File "/Library/Python/2.7/site-packages/requests/api.py", line 54, in get
    return request('get', url, **kwargs)
  File "/Library/Python/2.7/site-packages/requests/safe_mode.py", line 37, in wrapped
    return function(method, url, **kwargs)
  File "/Library/Python/2.7/site-packages/requests/api.py", line 42, in request
    return s.request(method=method, url=url, **kwargs)
  File "/Library/Python/2.7/site-packages/requests/sessions.py", line 230, in request
    r.send(prefetch=prefetch)
  File "/Library/Python/2.7/site-packages/requests/models.py", line 603, in send
    timeout=self.timeout,
  File "/Library/Python/2.7/site-packages/requests/packages/urllib3/connectionpool.py", line 415, in urlopen
    body=body, headers=headers)
  File "/Library/Python/2.7/site-packages/requests/packages/urllib3/connectionpool.py", line 267, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 941, in request
    self._send_request(method, url, body, headers)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 975, in _send_request
    self.endheaders(body)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 937, in endheaders
    self._send_output(message_body)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 797, in _send_output
    self.send(msg)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 759, in send
    self.connect()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 740, in connect
        self.timeout, self.source_address)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 571, in create_connection
    raise err
error: [Errno 49] Can't assign requested address 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:16:52.320

要回答您关于如何更改龙卷风超时的问题，您需要修改龙卷风的 bind_socket 函数来设置超时：[http ://www.tornadoweb.org/documentation/_modules/tornado/netutil.html](http://www.tornadoweb.org/documentation/_modules/tornado/netutil.html)

```
sock.setblocking(0)
sock.bind(sockaddr)
sock.listen(backlog)
sockets.append(sock) 
```

将第一行更改为 sock.setblocking(1)。根据文档：[http://docs.python.org/library/socket.html#socket.socket.settimeout](http://docs.python.org/library/socket.html#socket.socket.settimeout)：

> 将超时设置为 None 会禁用套接字操作的超时 s.settimeout(None) 等效于 s.setblocking(1)。

但是，正如评论中所建议的，我认为您应该考虑分配负载。

# php - 为什么我的课不工作？

> ID：11856068
> 
> 赞同：-3
> 
> 时间：2012-08-08T00:34:31.463
> 
> 标签：php, class

有谁知道为什么我的代码不起作用，我尝试运行它但它不起作用，当我把它放到网上时，它说页面无法加载。有什么我需要添加的吗？由于某种原因，我无法让它工作。

```
class Network {
    public $LastLocate = 0;
    public $LastLocate2 = 0;
    public $ipSet = false;
    public $Sock = array();
    public $Sock2 = array();
    public $xSock = array("174.36.242.24", "174.36.242.25", "174.36.242.26", "174.36.242.27", "174.36.242.32", "174.36.242.33", "174.36.242.34", "174.36.242.35", "174.36.242.40", "174.36.242.41", "174.36.242.42", "174.36.242.43", "69.4.231.248", "69.4.231.249", "69.4.231.250", "69.4.231.251");
    public $xSock2 = array("208.43.218.80", "208.43.218.81", "208.43.218.82", "208.43.218.83", "174.36.56.200", "174.36.56.201", "174.36.56.202", "174.36.56.203", "174.36.4.144", "174.36.4.145", "174.36.4.146", "174.36.4.147", "174.36.56.184", "174.36.56.185", "174.36.56.186", "174.36.56.187");
    public $SockStatus = array(400, 401, 402, 403, 410, 411, 412, 413, 420, 421, 422, 423, 430, 431, 432, 433);

    public function GetDom($arg1){
        if ($arg1 == 8){
            return (0);
        }
        return ((($arg1)<8) ? 3 : (($arg1 & 96) >> 5));
    }

    public function GetPort($arg1){
        if ((integer)$arg1 == 8){
            return (10000);
        }
        return ((((integer)$arg1)<8) ? ((10000 - 1) + (integer)$arg1) : ((10000 + 7) + ((integer)$arg1 % 32)));
    }

    public function randomFloat(){
        $n = "0.".rand(0,9);
        return $n;
    }
    public function setIps(){
        $local2 = array();
        $local3 = 0;
        $local1 = 0;
        while ($local1 < $this->xservers){
            $local2 = array();
            $local3 = 0;
            while ($local3 < $this->xips)
            {
                $v = (($local1 * $this->xips) + $local3);
                if ($this->SockStatus[$v] != 0){
                    array_push($local2, $this->xSock[(($local1 * $this->xips) + $local3)]);
                }
                $local3++;
            }
            if (count($local2) > 0){
                $this->Sock[$local1] = $local2[round($this->randomFloat() * count($local2))];
            }
            $local1++;
        }
    }
    echo $this->Sock[$this->GetDom(5)];
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T00:40:41.807

在你的类的最后，你有这个 echo 语句位于类内（不是在任何类型的函数内）：

```
echo $this->Sock[$this->GetDom(5)]; 
```

你应该把它移到它自己的函数中：

```
function output()
{
    return $this->Sock[$this->GetDom(5)];
} 
```

然后从课堂外调用它：

```
$class = new Network();
$output = $class->output();

echo $output; 
```

# c++ - 基于请求的协议实现的更好结构

> ID：11856074
> 
> 赞同：27
> 
> 时间：2012-08-08T00:35:36.727
> 
> 标签：c++, design-patterns

我正在使用一种协议，它基本上是基于 TCP 的请求和响应协议，类似于其他基于行的协议（SMTP、HTTP 等）。

该协议有大约 130 种不同的请求方法（例如登录、用户添加、用户更新、日志获取、文件信息、文件信息……）。所有这些方法都不能很好地映射到 HTTP 中使用的广泛方法（GET、POST、PUT、...）。如此宽泛的方法会引入一些对实际含义的不相关的曲解。

但是协议方法可以按类型分组（例如，用户管理、文件管理、会话管理……）。

当前的服务器端实现使用`class Worker`with 方法`ReadRequest()`（读取请求，由方法和参数列表组成），`HandleRequest()`（见下文）和`WriteResponse()`（写入响应代码和实际响应数据）。

`HandleRequest()`将调用实际请求方法的函数 - 使用方法名称的哈希映射到指向实际处理程序的成员函数指针。

实际的处理程序是一个普通的成员函数，每个协议方法都有一个：每个方法验证其输入参数，执行它必须做的任何事情并设置响应代码（成功是/否）和响应数据。

示例代码：

```
class Worker {
    typedef bool (Worker::*CommandHandler)();
    typedef std::map<UTF8String,CommandHandler> CommandHandlerMap;

    // handlers will be initialized once
    //   e.g. m_CommandHandlers["login"] = &Worker::Handle_LOGIN;
    static CommandHandlerMap m_CommandHandlers;

    bool HandleRequest() {
        CommandHandlerMap::const_iterator ihandler;
        if( (ihandler=m_CommandHandlers.find(m_CurRequest.instruction)) != m_CommandHandler.end() ) {
            // call actual handler
            return (this->*(ihandler->second))();
        }
        // error case:
        m_CurResponse.success = false;
        m_CurResponse.info = "unknown or invalid instruction";
        return true;
    }

    //...

    bool Handle_LOGIN() {
        const UTF8String username = m_CurRequest.parameters["username"];
        const UTF8String password = m_CurRequest.parameters["password"];

        // ....

        if( success ) {

            // initialize some state...
            m_Session.Init(...);
            m_LogHandle.Init(...);
            m_AuthHandle.Init(...);

            // set response data
            m_CurResponse.success = true;
            m_CurResponse.Write( "last_login", ... );
            m_CurResponse.Write( "whatever", ... );
        } else {
            m_CurResponse.Write( "error", "failed, because ..." );
        }
        return true;
    }

}; 
```

所以。问题是：我的工人班现在有大约 130 个“命令处理程序方法”。每个人都需要访问：

1.  请求参数
2.  响应对象（写入响应数据）
3.  不同的其他会话本地对象（如数据库句柄、授权/权限查询句柄、日志记录、服务器各种子系统的句柄等）

什么是更好地构造这些命令处理程序方法的好策略？

一个想法是每个命令处理程序有一个类，并使用对请求、响应对象等的引用对其进行初始化-但恕我直言，开销是不可接受的（实际上，它会为**对处理程序所需的所有内容的**任何单一访问添加间接性：请求，响应，会话对象，...）。如果它能够提供实际优势，它是可以接受的。但是，这听起来不太合理：

```
class HandlerBase {
protected:
    Request &request;
    Response &response;
    Session &session;
    DBHandle &db;
    FooHandle &foo;
    // ...
public:
    HandlerBase( Request &req, Response &rsp, Session &s, ... )
    : request(req), response(rsp), session(s), ...
    {}
    //...
    virtual bool Handle() = 0;
};

class LoginHandler : public HandlerBase {
public:
    LoginHandler( Request &req, Response &rsp, Session &s, ... )
    : HandlerBase(req,rsp,s,..)
    {}
    //...
    virtual bool Handle() {
        // actual code for handling "login" request ...
    }
}; 
```

好的，HandlerBase 可以只获取对工作对象本身的引用（或指针）（而不是对请求、响应等的引用）。但这也会增加另一个间接性（this->worker->session 而不是 this->session）。这种间接性是可以的，如果它毕竟能买到一些优势的话。

**关于整体架构的一些信息**

worker 对象代表一个工作线程，用于与某个客户端的实际 TCP 连接。每个线程（因此，每个工作人员）都需要自己的数据库句柄、授权句柄等。这些“句柄”是每个线程的对象，允许访问服务器的某些子系统。

整个架构基于某种依赖注入：例如，要创建会话对象，必须为会话构造函数提供“数据库句柄”。然后会话对象使用这个数据库句柄来访问数据库。它永远不会调用全局代码或使用单例。因此，每个线程都可以不受干扰地独立运行。

但代价是——而不是仅仅调用单例对象——worker 及其命令处理程序必须通过这种特定于线程的句柄访问系统的任何数据或其他代码。这些句柄定义了它的执行上下文。

**摘要和澄清：我的实际问题**

我正在寻找一个优雅的替代当前（“具有大量处理程序方法列表的工作对象”）解决方案：它应该是可维护的，具有低开销并且不需要编写太多的胶水代码。此外，它必须仍然允许每个方法控制其执行的非常不同的方面（这意味着：如果方法“superflurry foo”想要在满月时失败，那么该实现必须有可能这样做） . 这也意味着，我不希望在我的代码的这个架构层（它存在于我的代码中的不同层）有任何类型的实体抽象（创建/读取/更新/删除 XFoo 类型）。这个架构层是纯协议，没有别的。

最后，肯定会妥协，但我对任何想法都感兴趣！

AAA 奖励：具有可互换协议实现的解决方案（而不仅仅是`class Worker`负责解析请求和编写响应的 current ）。*可能*有一个可互换的`class ProtocolSyntax`，它处理那些协议语法细节，但仍然使用我们新的闪亮的结构化命令处理程序。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-12T17:36:44.563

你已经有了大部分正确的想法，这就是我将如何进行。

让我们从您的第二个问题开始：可互换协议。如果你有通用的请求和响应对象，你可以有一个读取请求和写入响应的接口：

```
class Protocol {
  virtual Request *readRequest() = 0;
  virtual void writeResponse(Response *response) = 0;
} 
```

例如，您可以有一个实现`HttpProtocol`。

至于您的命令处理程序，“每个命令处理程序一个类”是正确的方法：

```
class Command {
  virtual void execute(Request *request, Response *response, Session *session) = 0;
} 
```

请注意，我将所有常见的会话句柄（DB、Foo 等）汇总到一个对象中，而不是传递一大堆参数。同样，使用这些方法参数而不是构造函数参数意味着您只需要每个命令的一个实例。

接下来，您将拥有一个`CommandFactory`包含命令名称到命令对象的映射：

```
class CommandFactory {
  std::map<UTF8String, Command *> handlers;

  Command *getCommand(const UTF8String &name) {
    return handlers[name];
  }
} 
```

如果你已经完成了所有这些，`Worker`就会变得非常薄，并且可以简单地协调所有内容：

```
class Worker {
  Protocol *protocol;
  CommandFactory *commandFactory;
  Session *session;

  void handleRequest() {
    Request *request = protocol->readRequest();
    Response response;

    Command *command = commandFactory->getCommand(request->getCommandName());
    command->execute(request, &response, session);

    protocol->writeResponse(&response);
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T05:41:51.953

如果是我，我可能会在您的问题中使用两者的混合解决方案。
有一个可以处理多个相关命令的工作基类，并且可以允许您的主“调度”类探测支持的命令。对于胶水，您只需要告诉调度类每个工人类。

```
class HandlerBase
{
public:
    HandlerBase(HandlerDispatch & dispatch) : m_dispatch(dispatch) {
        PopulateCommands();
    }
    virtual ~HandlerBase();

    bool CommandSupported(UTF8String & cmdName);

    virtual bool HandleCommand(UTF8String & cmdName, Request & req, Response & res);
    virtual void PopulateCommands();

protected:
    CommandHandlerMap m_CommandHandlers; 
    HandlerDispatch & m_dispatch;
};

class AuthenticationHandler : public HandlerBase
{
public:
    AuthenticationHandler(HandlerDispatch & dispatch) : HandlerBase(dispatch) {}

    bool HandleCommand(UTF8String & cmdName, Request & req, Response & res) {
        CommandHandlerMap::const_iterator ihandler;                     
        if( (ihandler=m_CommandHandlers.find(req.instruction)) != m_CommandHandler.end() ) {                     
            // call actual handler                     
            return (this->*(ihandler->second))(req,res);                     
        }                     
        // error case:                     
        res.success = false;                     
        res.info = "unknown or invalid instruction";                     
        return true; 
    }

    void PopulateCommands() {
        m_CommandHandlers["login"]=Handle_LOGIN;
        m_CommandHandlers["logout"]=Handle_LOGOUT;
    }

    void Handle_LOGIN(Request & req, Response & res) {
        Session & session = m_dispatch.GetSessionForRequest(req);
        // ...
    }
};

class HandlerDispatch
{
public:
    HandlerDispatch();
    virtual ~HandlerDispatch() {  
        // delete all handlers 
    }

    void AddHandler(HandlerBase * pHandler);
    bool HandleRequest() {
        vector<HandlerBase *>::iterator i;
        for ( i=m_handlers.begin() ; i < m_handlers.end(); i++ ) {
            if ((*i)->CommandSupported(m_CurRequest.instruction)) {
                return (*i)->HandleCommand(m_CurRequest.instruction,m_CurRequest,m_CurResponse);
            }
        }
        // error case:                                                            
        m_CurResponse.success = false;
        m_CurResponse.info = "unknown or invalid instruction";

        return true; 
    }
protected:
    std::vector<HandlerBase*> m_handlers;
} 
```

然后将它们粘合在一起，您将执行以下操作：

```
// Init
m_handlerDispatch.AddHandler(new AuthenticationHandler(m_handlerDispatch)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T17:31:03.247

至于传输（TCP）特定部分，您是否看过通过消息传递套接字/队列支持各种分布式计算模式的[ZMQ库？](http://www.zeromq.org/)[恕我直言，您应该在他们的指南](http://zguide.zeromq.org/page%3aall)文档中找到满足您需求的适当模式。

对于协议消息实现的选择，我个人最喜欢与 C++ 配合得很好的[google 协议缓冲区](https://developers.google.com/protocol-buffers/)，我们现在将它用于几个项目。

至少您将归结为特定请求及其参数 + 必要返回参数的调度程序和处理程序实现。Google protobuf 消息扩展允许以通用方式实现这一点。

**编辑：**

更具体一点，使用 protobuf 消息，调度程序模型与您的主要区别在于您不需要在调度之前进行完整的消息解析，但是您可以注册处理程序来告诉自己它们是否可以处理特定的消息与否取决于消息的扩展名。（主）调度程序类不需要知道要处理的具体扩展，只需询问已注册的处理程序类。您可以轻松地扩展此机制以使某些子调度程序覆盖更深的消息类别层次结构。

因为 protobuf 编译器已经可以完全看到您的消息传递数据模型，所以您不需要任何类型的反射或动态类多态性测试来确定具体的消息内容。您的 C++ 代码可以静态地请求消息的可能扩展，如果不存在则不会编译。

我不知道如何以更好的方式解释这一点，或者展示一个具体示例如何使用这种方法改进现有代码。恐怕您已经在消息格式的反序列化代码上花费了一些精力，这本可以使用 google protobuf 消息（或什么样的类`Request`和`Response`？）来避免。

[ZMQ](http://www.zeromq.org/)库可能有助于实现您的`Session`上下文以通过基础架构分派请求。

当然，您不应该以处理各种可能请求的单个接口结束，而应以多个专门处理消息类别（扩展点）的接口结束。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-10T14:54:32.280

我认为这是类 REST 实现的理想案例。另一种方法也可以是根据类别/任何其他标准将处理程序方法分组到几个工作类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-12T13:47:26.417

如果协议方法只能按类型分组，但同一组的方法在其实现中没有任何共同点，那么您可以做的唯一提高可维护性的事情就是在不同文件之间分配方法，一个文件一组。

但很可能同一组的方法具有以下一些共同特征：

1.  类中可能有一些数据字段`Worker`仅由一组方法或几个（但不是每个）组使用。例如，if`m_AuthHandle`只能由用户管理和会话管理方法使用。
2.  可能有一些输入参数组，被某个组的每个方法使用。
3.  可能有一些公共数据，由某个组的每个方法写入响应。
4.  可能有一些常用的方法，被某个组的几个方法调用。

如果其中一些事实是真实的，那么就有充分的理由将这些特征分为不同的类别。不是每个命令处理程序一个类，而是每个事件组一个类。或者，如果有几个组共有的特征，则为类的层次结构。

将所有这些组类的实例分组到一个位置可能很方便：

```
classe UserManagement: public IManagement {...};
classe FileManagement: public IManagement {...};
classe SessionManagement: public IManagement {...};
struct Handlers {
  smartptr<IManagement> userManagement;
  smartptr<IManagement> fileManagement;
  smartptr<IManagement> sessionManagement;
  ...
  Handlers():
    userManagement(new UserManagement),
    fileManagement(new FileManagement),
    sessionManagement(new SessionManagement),
    ...
  {}
}; 
```

可以使用[make_unique](https://stackoverflow.com/q/7038357/1009831)`new SomeClass`之类的模板来代替。或者，如果需要“可互换的协议实现”，其中一种可能性是使用工厂而不是一些（或全部）运算符。`new SomeClass`

`m_CommandHandlers.find()`应该分成两个映射搜索：一个 - 在这个结构中找到适当的处理程序，另一个（在适当的实现中`IManagement`） - 找到一个指向实际处理程序的成员函数指针。

除了查找成员函数指针之外，`HandleRequest`任何`IManagement`实现的方法都可以为其事件组提取公共参数并将它们传递给事件处理程序（如果只有几个，则一个接一个，如果有很多，则在一个结构中分组）。

实现也`IManagement`可能包含`WriteCommonResponce`简化编写响应字段的方法，所有事件处理程序都通用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-14T10:08:14.840

命令模式是您解决这个问题的两个方面的方法。

使用它来使用通用的 IProtocol 接口（和/或抽象基类）实现您的协议处理程序，并使用针对每个协议专门的不同类来实现协议处理程序的不同实现。

然后使用 ICommand 接口以相同的方式实现您的命令，并在单独的类中实现每个命令方法。你快到了。将您现有的方法拆分为新的专业类。

将您的请求和响应包装为 Mememento 对象

# php - PHP 返回语法

> ID：11856076
> 
> 赞同：1
> 
> 时间：2012-08-08T00:35:45.320
> 
> 标签：php, syntax, return

> **可能重复：**
> [什么是 PHP ？: 操作员叫它做什么？](https://stackoverflow.com/questions/1080247/what-is-the-php-operator-called-and-what-does-it-do)

有人可以告诉我这个'return' php代码是什么意思/做什么：

```
return ($status=='SUCCESS' && $blocked=='YES') ? $reason : false; 
```

我熟悉`return $variable`php 中的常规语句类型，但我不知道具体的括号 ( ) 和 ? 问号和“：假”确实如此。

（这是 php 函数末尾的 return 语句）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T00:38:12.660

这是一个[三元语句](http://php.net/manual/en/language.operators.comparison.php)。它基本上是 if/else 的简写符号。

在您的示例中，它将如下所示：如果`$status`等于“成功”并且`$blocked`等于“是”返回`$reason`，否则返回`false`；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T00:38:28.503

这是一个三元或条件运算符，就像你有一样：

```
if($status=='SUCCESS' && $blocked=='YES'){
return $reason;}
else{
return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T00:41:58.243

它的含义与此相同：

```
if($status == 'SUCCESS' && $blocked == 'YES')
{
    return $reason;
}
else
{
    return false;
} 
```

# clojure - 枚举和 Clojure

> ID：11856077
> 
> 赞同：21
> 
> 时间：2012-08-08T00:35:47.197
> 
> 标签：clojure, enums

在 Java/C 世界中，人们经常使用枚举。如果我使用的是使用枚举的 Java 库，我可以在它们和关键字之间进行转换，例如 using`(. java.lang.Enum valueOf e..., (aget ^"[Ljava.lang.Enum;" (. e (getEnumConstants)) i)`和一些反射。但是在 Clojure 世界中，人们是否需要像枚举（命名整数）这样的东西？如果不是，他们的代码是如何构建他们不需要它们的？如果是，等价物是什么？我觉得我真的在问索引（用于循环），它在函数式编程中很少使用（到目前为止我只使用过一次 map-indexed）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-08T00:55:49.770

对于我见过的几乎所有 Clojure 代码，都**倾向于使用关键字而不是枚举**，它们是名称空间的，并且具有关键字的所有其他有用属性，同时更容易编写。它们不是一个精确的代表，因为它们比 Java 枚举更动态（如在动态类型中）

至于索引和循环，我发现映射一系列关键字更惯用：

```
(map do-stuff [:a :b :c :d] (range)) 
```

而不是循环枚举中的值，我还没有在 Clojure 代码中找到一个例子，尽管一个例子很可能存在;-)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-08T05:24:16.770

正如[Arthur 指出的那样](https://stackoverflow.com/a/11856228/214010)- Clojure 中通常使用**关键字**代替枚举。

你不会看到编号索引被大量使用——它们在 Clojure（或大多数其他函数式编程语言）中并不是特别惯用的

其他一些值得注意的选项：

*   直接使用 Java 枚举 - 例如`java.util.concurrent.TimeUnit/SECONDS`
*   如果您需要数值，请使用 vars 定义您自己的常量 - 例如`(def ^:const PURPLE 1)`
*   `defenum`如果您想要使用简单语法的更高级枚举功能，您甚至可以实现宏。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-08T07:00:44.717

是的，在 Java 程序员使用枚举的大多数地方都使用关键字。在极少数情况下，您需要为它们中的每一个设置一个数字，您可以简单地定义一个用于转换的映射：`{:dog 0, :rabbit 1, ...}`。

另一方面，我编写的第一个 Clojure 库就是这样：一个`defenum`为符号分配数字并创建来回转换系统的宏。这是一个糟糕的想法，实施得相当好，所以随意[看看](https://github.com/amalloy/enum/blob/master/src/enum/core.clj)，但我不建议你使用它。

# javascript - 本站如何实现响应式布局

> ID：11856079
> 
> 赞同：1
> 
> 时间：2012-08-08T00:36:06.787
> 
> 标签：javascript, html, css, twitter-bootstrap, responsive-design

有人可以说明本网站用于响应的各种方式。特别是当您调整浏览器大小时，顶部和左侧导航如何变为下拉。

[http://www.smashingmagazine.com](http://www.smashingmagazine.com)

我确信这不使用 twitter 引导程序。他们有没有更好的方法来响应而不利用 twitter 引导程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T00:39:39.670

响应式设计在名义上比 Twitter Bootstrap 存在的时间更长，而且原则上它存在的时间更长。

> 他们有没有更好的方法来响应而不利用 twitter 引导程序。

“更好”是主观的，但有很多方法：

*   另一个开箱即用的框架
*   [媒体查询](http://www.w3.org/TR/css3-mediaqueries/)
*   JavaScript 来调整页面布局（你自己的，或者类似[Masonry](http://masonry.desandro.com/)的东西）
*   基于宽度换行的浮动元素
*   基于百分比的布局
*   上述所有的

您链接到的网站实际上有很好的响应式设计信息：[http ://www.smashingmagazine.com/responsive-web-design-guidelines-tutorials/](http://www.smashingmagazine.com/responsive-web-design-guidelines-tutorials/)

这些框架看起来很有趣：

*   [http://framelessgrid.com/](http://framelessgrid.com/)
*   [http://webexpedition18.com/articles/responsive-css-frameworks/](http://webexpedition18.com/articles/responsive-css-frameworks/)
*   [http://foundation.zurb.com/](http://foundation.zurb.com/)

# jquery - 可拖动的 JQuery UI 很慢

> ID：11856080
> 
> 赞同：2
> 
> 时间：2012-08-08T00:36:10.387
> 
> 标签：jquery, jquery-ui

我刚开始使用 JQuery UI 创建一个可拖动的 div。当用户拖动 div 时，页面上另一个 div 的 css 会发生变化。但是，当我在拖动函数中放入 .css 函数时，我注意到拖动有很大的延迟。下面的代码：

```
$( "#drag-box" ).bind( "drag", function(event, ui) {
          $(this).stop().css('left',event.offsetX);
          $.carousel.limit = $.carousel.len - $(window).width();
          var margin = $.carousel.currentMargin;
          var ratio = ui.position.left / 200;
          var new_margin = $.carousel.limit * ratio;

          $('#storyboard-container').css({'margin-left': -new_margin + 'px'});
      }); 
```

#drag-box 滞后很多，尤其是当用户非常快速地拖动框时。任何帮助，将不胜感激！谢谢！

# c# - 链接不同项目中的 Jira 问题

> ID：11856098
> 
> 赞同：1
> 
> 时间：2012-08-08T00:38:51.220
> 
> 标签：c#, api, soap, jira

JIRA SOAP API 是否允许我链接不同项目中的两个问题？我在网上查了一下，没有找到方法来做到这一点。我见过的最接近的东西是 createIssueWithParent 方法，它创建子问题（我希望链接两个问题，而不是子问题）并且要求问题在同一个项目中（也不是我想要的）。

有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:48:34.807

[我不认为可以](https://answers.atlassian.com/questions/68925/nullpointerexception-when-trying-to-link-jira-4-2-issues#comment-68997)通过 SOAP API 进行链接。我已经使用[XML-RPC API](https://developer.atlassian.com/display/JIRADEV/JIRA+XML-RPC+Overview)完成了这项工作，其[`createIssueLink`](http://docs.atlassian.com/jira/5.1/com/atlassian/jira/issue/link/IssueLinkManager.html#createIssueLink%28java.lang.Long,%20java.lang.Long,%20java.lang.Long,%20java.lang.Long,%20com.atlassian.crowd.embedded.api.User%29)功能是：

```
from com.atlassian.jira import ComponentManager
# get issue objects
authenticationContext = ComponentManager.getInstance().getJiraAuthenticationContext()
issueLinkManager = ComponentManager.getInstance().getIssueLinkManager()
# Link parent issue to subtask
issueLinkManager.createIssueLink(issue.getId(),otherIssue.getId(),10003,1,authenticationContext.getUser()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T22:14:27.770

在 SOAP 中没有简单的方法，但我使用 RESTful 方法和 JIRA 4.4 完成了这项工作，例如

```
#
# Add links to JIRA issues
#
# Matt Doar
# CustomWare
# 
# usage: create_links.sh issue_id issue_key
# where the issue_id is the unique id for a JIRA issue, not it's issue key.
# You can see the issue id in the XML view of an issue.
# and issue_key is the other issue to be linked to.

USERNAME=admin
PASSWORD=secret
SERVER_URL="http://localhost:8080"

DASHBOARD_PAGE_URL=$SERVER_URL/secure/Dashboard.jspa
COOKIE_FILE_LOCATION=jiracoookie

# Get the authentication cookie
curl -u $USERNAME:$PASSWORD --cookie-jar $COOKIE_FILE_LOCATION -sS --output /dev/null $DASHBOARD_PAGE_URL

issueid=$1
issuekey=$2
#echo "Linking issue: $issueid and $issuekey"
curl --cookie $COOKIE_FILE_LOCATION --header "X-Atlassian-Token: no-check" -sS --output /dev/null -d "id=$issueid" -d "linkDesc=relates to" -d "linkKey=$issuekey" "$SERVER_URL/secure/LinkExistingIssue.jspa"

rm -f $COOKIE_FILE_LOCATION 
```

# c# - 网络接口子类型 .Net Framework 4.0

> ID：11856099
> 
> 赞同：2
> 
> 时间：2012-08-08T00:38:58.527
> 
> 标签：c#, .net, networking, adapter, 3g

我可以通过使用检测 C# 4.0 中的网络适配器类型

```
NetworkInterface[] interfaces = NetworkInterface.GetAllNetworkInterfaces();
foreach (NetworkInterface adapter in interfaces)
{
    Console.WriteLine(adapter.NetworkInterfaceType)       
} 
```

但是我找不到枚举器或正确的方法（适配器名称除外）来检测 Wifi、3g 等适配器子类型。Windows 手机有一个名为 NetworkInterfaceSubType 的属性可以完成此操作，但是 .Net Framework 4.0 上没有这样的 API .

我真的很想避免使用名称作为标识符（例如“无线网络”、“蓝牙网络”），这不能在系统之间进行验证。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:59:02.277

查看基于[Native Wifi API的](http://msdn.microsoft.com/en-us/library/ms705969.aspx)[Managed Wifi API](http://managedwifi.codeplex.com/)，根据代码示例，它很容易做到

```
using NativeWifi;
using System;
using System.Text;

namespace WifiExample
{
    class Program
    {
        /// <summary>
        /// Converts a 802.11 SSID to a string.
        /// </summary>
        static string GetStringForSSID(Wlan.Dot11Ssid ssid)
        {
            return Encoding.ASCII.GetString( ssid.SSID, 0, (int) ssid.SSIDLength );
        }

        static void Main( string[] args )
        {
            WlanClient client = new WlanClient();
            foreach ( WlanClient.WlanInterface wlanIface in client.Interfaces )
            {
                // Lists all networks with WEP security
                Wlan.WlanAvailableNetwork[] networks = wlanIface.GetAvailableNetworkList( 0 );
                foreach ( Wlan.WlanAvailableNetwork network in networks )
                {
                    if ( network.dot11DefaultCipherAlgorithm == Wlan.Dot11CipherAlgorithm.WEP )
                    {
                        Console.WriteLine( "Found WEP network with SSID {0}.", GetStringForSSID(network.dot11Ssid));
                    }
                }

                // Retrieves XML configurations of existing profiles.
                // This can assist you in constructing your own XML configuration
                // (that is, it will give you an example to follow).
                foreach ( Wlan.WlanProfileInfo profileInfo in wlanIface.GetProfiles() )
                {
                    string name = profileInfo.profileName; // this is typically the network's SSID
                    string xml = wlanIface.GetProfileXml( profileInfo.profileName );
                }

                // Connects to a known network with WEP security
                string profileName = "Cheesecake"; // this is also the SSID
                string mac = "52544131303235572D454137443638";
                string key = "hello";
                string profileXml = string.Format("<?xml version=\"1.0\"?><WLANProfile xmlns=\"http://www.microsoft.com/networking/WLAN/profile/v1\"><name>{0}</name><SSIDConfig><SSID><hex>{1}</hex><name>{0}</name></SSID></SSIDConfig><connectionType>ESS</connectionType><MSM><security><authEncryption><authentication>open</authentication><encryption>WEP</encryption><useOneX>false</useOneX></authEncryption><sharedKey><keyType>networkKey</keyType><protected>false</protected><keyMaterial>{2}</keyMaterial></sharedKey><keyIndex>0</keyIndex></security></MSM></WLANProfile>", profileName, mac, key);
                wlanIface.SetProfile( Wlan.WlanProfileFlags.AllUser, profileXml, true );
                wlanIface.Connect( Wlan.WlanConnectionMode.Profile, Wlan.Dot11BssType.Any, profileName );
            }
        }
    }
} 
```

# java - 取消注册监听器的成本是多少（就电池寿命而言）？

> ID：11856101
> 
> 赞同：2
> 
> 时间：2012-08-08T00:39:14.147
> 
> 标签：java, android, accelerometer, sensors

我正在收集加速度数据，我只想要每 10 秒大约 250 个数据样本（用计时器安排）。250 个样本通常在大约 5 秒左右完成，然后我处理数据并存储它。当我收集了 250 个样本时，我取消了监听器的注册。然后当整个十秒结束时，任务告诉程序再次注册监听器并重新收集 250 个样本。这有效率吗？还是在 250 个样本后进行布尔检查以停止收集数据，让侦听器保持开启状态会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T01:03:15.420

注册和注销会更好。听传感器会耗尽电池电量，而您正在谈论每 10 秒忽略 250 个样本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T10:58:26.967

您应该只在您确实需要数据时注册监听器，并尽快取消注册。那是因为当您不听加速度计时，它处于空闲或关闭状态，对电池的影响最小。但是，当您确实从中获取数据时，传感器会开启并以全功率工作

# r - 为 R 中数据框中的某些情况添加价值

> ID：11856103
> 
> 赞同：0
> 
> 时间：2012-08-08T00:39:28.580
> 
> 标签：r

我有一个数据框，其中包含一个名为 store 的数字列，其中包含一些负值。我想将 1440 添加到负数，但遇到了麻烦。我的数据如下所示：

```
 score
  1  816
  2 -200
  3  976
  4 -376
  5    1
  6  121
  7 -331 
```

我可以使用`temp[temp$score< 0] <-8888`.

但是，当我尝试使用 : 为变量添加值时`temp[temp$score < 0] <- temp$score + 1440`，我收到一条警告：

```
Warning message: In temp$score[temp$score < 0] <- temp$score + 1440 
:number of items to replace is not a multiple of replacement length 
```

然后我得到一些奇数返回：

```
 score
1   816
2  2256
3   976
4  1240
5     1
6   121
7  2416 
```

我是在调用函数错误还是选择错误的案例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T00:51:37.530

从您的警告消息中，您似乎正在尝试执行以下操作：

```
temp$score[temp$score < 0] <- temp$score + 1440 
```

这里的问题是，正如警告消息所暗示的那样，您正在用不同长度的向量替换向量。您缩短了作业的左侧，但没有缩短右侧 - 解决方案也是缩短右侧，如下所示：

```
score <- c(816,-200,976,-376,1,121,-331)
temp <- data.frame(score)
temp$score[temp$score < 0] <- temp$score[temp$score < 0] + 1440 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T07:27:30.943

如评论中所述，如果有 NA 数据，则下标将失败：

```
> temp
   score z
1    123 1
2     NA 2
3    345 3
4 -10783 4
5   1095 5
6    873 6
> temp$score[temp$score < 0] <- temp$score[temp$score < 0] + 1440
Error in temp$score[temp$score < 0] <- temp$score[temp$score < 0] + 1440 :  
  NAs are not allowed in subscripted assignments 
```

所以使用`which`：

```
> temp$score[which(temp$score < 0)] <- temp$score[which(temp$score < 0)] + 1440
> temp
  score z
1   123 1
2    NA 2
3   345 3
4 -9343 4
5  1095 5
6   873 6 
```

# java - 使用 maven 发布具有多个长寿命分支的版本

> ID：11856110
> 
> 赞同：5
> 
> 时间：2012-08-08T00:40:13.120
> 
> 标签：java, maven, version-control, jenkins, release-management

所以这里是 Subversion、Jenkins、Beanstalk 设置：

*   trunk/ -> 开发主线
    *   CI 建立在签到之上
    *   成功的 CI 构建产生 CD 构建，该构建推送到“测试”Beanstalk 环境
*   分支/qa/ -> 当前候选版本
    *   CI 建立在签到之上
    *   成功的 CI 构建产生 CD 构建，该构建推送到“QA”Beanstalk 环境
*   分支/产品/ -> 当前版本
    *   CI 建立在签到之上
    *   成功的 CI 构建会产生 CD 构建，该构建会推送到“Prod”Beanstalk 环境

基本上我想做的是：

*   开发周期从主干开始（主干：0.1-SNAPSHOT）
*   当开发周期完成时，分支到 qa 并成为 qa 周期。同时在主干中开始下一个开发周期（主干 0.2-SNAPSHOT，qa：0.1-SNAPSHOT）
*   当 qa 周期完成时，分支到 prod 并执行 maven 发布。也开始下一个 qa 周期（主干 0.2-SNAPSHOT，qa：0.2-SNAPSHOT，prod：0.1）

想法是进行短冲刺，在每个冲刺结束时，开发周期结束，质量保证周期开始。当 qa 周期完成时，它会被推送到生产环境。

我想保留分支并从分支合并到\而不是删除并重新创建。这个想法是在 qa 中所做的任何修复都将合并回 intro trunk，并且在 prod 中所做的任何更改都将合并回 qa（并返回到主干）。

prod 因此是一个“热”分支，代表生产环境的当前状态。

这是为一小群从事为期一周的冲刺的开发人员准备的。

问题：

1.  这个设置听起来如何？
2.  我可以让 maven 正确行事，还是需要编写脚本？
3.  谁是你爸爸？他是做什么的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T15:59:30.913

我不推荐 qa 和 prod 分支。阅读颠覆最佳实践。我推荐[The SVN Book](http://svnbook.red-bean.com/en/1.6/)，特别是关于分支/合并的第 4 章。

即使是 QA（通过标签），您也应该对每个版本进行版本控制。主干用于当前的开发工作，标签用于发布版本（定义为“功能完整”，而不是它所处的环境），分支用于缺陷修复（除其他外）。

**示例场景：**

1.0 版正在生产中，您的团队刚刚将 2.0 版发布给 QA 进行测试，现在正在开发 3.0 版。此时您将拥有：

*   /trunk（开发 3.0 的开发人员）
*   /tags/2.0（用于质量检查）
*   /tags/1.0（生产中的历史）

如果您的 QA 团队在 2.0 中发现问题，您将从 2.0 标记创建一个分支。进行修复，合并到主干，然后将分支发布为 2.0.1（另一个标签）。然后你会留下：

*   /trunk（开发 3.0 的开发人员，+ 2.0 缺陷修复）
*   /branches/2.0.*（使用 * 字符表示这是所有 2.0.* 修复将提交的位置。如果在 2.0 代码中发现另一个缺陷，您可以重用同一分支）
*   /tags/2.0（原始标签 QA 正在测试该缺陷）
*   /tags/2.0.1（2.0 代码库，只有缺陷修复）
*   /tags/1.0（生产中的历史）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:07:53.893

我之前围绕分支和发布做过一些类似的工作，根据我的经验，你所描述的设置很快就会变得非常笨拙和官僚主义。

Domenic D. 的答案非常接近我喜欢的那种设置，特别是对于少数开发人员。你拥有的分支越多，代码库的管理就越复杂，你就越有可能通过不良的合并实践引入错误。

在我看来，你没有提到的一件事很重要，一开始就做好是你的入住政策。SCM 不是未完成工作的备份，您应该努力确保主线至少始终在构建。严格这一点，最终会让每个人的生活更轻松。

不过，重要的是，无论您提出何种发布程序，请确保您得到团队的支持，并且不必“强迫”他们到位。这表明你想出的东西可能有问题，是不正确的，很可能会很快被忽视或颠覆。

# java - android椭圆形对话框

> ID：11856114
> 
> 赞同：1
> 
> 时间：2012-08-08T00:40:55.563
> 
> 标签：java, android

我有一个应用程序，它有一个按钮，按下它会触发一个具有默认对话框形状的对话框，我想知道我是否可以将对话框的默认形状更改为椭圆形并对其应用特殊样式，

如下图所示：

**1-默认对话框形状：**

![在此处输入图像描述](../Images/14c9d7ca5ebd3849396e6e8faafd94e9.png)

**2-椭圆形对话框形状（我试图实现）：**

![在此处输入图像描述](../Images/7283d40cf9b558d4615abc62d7ccf978.png)

**我的对话代码：**

```
 final Dialog dialog = new Dialog(context);
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);           
        dialog.setContentView(R.layout.custom_dialog);

 TextView text = (TextView) dialog.findViewById(R.id.dialog_text);
 text.setText(Html.fromHtml(getString(R.string.text_4)));

 ImageView image = (ImageView) dialog.findViewById(R.id.image);
 image.setImageResource(R.drawable.pic);

 Button dialogButton = (Button) dialog.findViewById(R.id.dialog_Button);

 dialogButton.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        dialog.dismiss();
                }
            });

    dialog.show();
             }
        });

    } 
```

**默认对话框的样式代码：**

```
 <?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android"
      android:shape="rectangle">
     <stroke android:width="2dp" android:height="2dp" android:color="#B22222" /> 
       <solid android:color="#FCE6C9" /> 
        <padding android:left="2dp" android:top="2dp" android:right="2dp"
         android:bottom="2dp" /> 
     <corners android:radius="5dp" /> 
    </shape> 
```

我希望通过代码而不是使用 9-patch 图像来完成此操作，这样可以轻松控制 dilaoge 尺寸并根据需要调整其中的文本，

**任何建议将不胜感激，谢谢。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T01:05:07.743

不完全确定如何在 android 上执行此操作，但我在 java 中使用的方法是使**JFrame**或**JDialog**渲染的表面**透明**，然后在里面绘制我自己的自定义形状。为了使它们透明，我使用*AWTUtilities.setWindowOpacity*

在这篇文章中，您会发现另一种想法，例如在渲染框架或对话框之前**捕获桌面**并使用它来修补您的框架：

[http://today.java.net/pub/a/today/2008/03/18/translucent-and-shape-swing-windows.html](http://today.java.net/pub/a/today/2008/03/18/translucent-and-shaped-swing-windows.html)

更多信息：

[http://java.sun.com/developer/technicalArticles/GUI/translucent_shape_windows/](http://java.sun.com/developer/technicalArticles/GUI/translucent_shaped_windows/)

在这里，您有一个实现，不适用于 android，但它可能会有所帮助：

[http://www.codeproject.com/KB/java/shape-transparent-jframe.aspx](http://www.codeproject.com/KB/java/shaped-transparent-jframe.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:29:18.247

看看这个[快速操作菜单教程](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)。尝试使用 shape = 椭圆形背景应用本教程。我想你会得到你想要达到的。

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T01:12:07.287

好主意。在 Android 上，要为活动提供透明背景，请将其放入清单文件中：

```
<activity android:name=".MyActivity" android:theme="@android:style/Theme.Translucent.NoTitleBar" /> 
```

然后，在该活动的布局文件中，添加这个

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<ImageView
android:id="@+id/myImageView"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:src="@drawable/myRoundBackground" />

<TextView
android:id="@+id/myImageViewText"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignLeft="@+id/myImageView"
android:layout_alignTop="@+id/myImageView"
android:layout_alignRight="@+id/myImageView"
android:layout_alignBottom="@+id/myImageView"
android:layout_margin="1dp"
android:gravity="center"
android:text="Hello"
android:textColor="#000000" />

</RelativeLayout> 
```

然后，您可以使用 id myImageViewText 以编程方式在 TextView 上设置文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T21:38:01.813

此方法类似于您当前正在尝试的方法：在您的 custom_dialog.xml 中为相对布局提供 android:background="@drawable/ovaldialog" 。

并在ovaldialog.xml 中尝试通过给android:shape="oval" 给出相同的参数来编辑样式，并将参数给角，例如android:topLeftRadius="8dp" 和android:bottomRightRadius="10dp "并使用这些值，直到获得所需的形状。为了给对话框赋予红色，给它一个宽度为 2/3dp 的描边和一个 android:color 值。

希望这可以帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T05:44:48.320

我认为带有椭圆形图像的透明背景对您有用。并将按钮放在椭圆形图像的左侧。

# android - Android XML 中的 id 之间奇怪的无法解释的“切换”

> ID：11856119
> 
> 赞同：0
> 
> 时间：2012-08-08T00:42:03.993
> 
> 标签：android, android-layout, android-xml

我有一个非常奇怪的问题。

这是我的完整 XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:orientation="vertical">

    <TextView android:id="@+id/disp_nums" android:textSize="64sp"
        android:layout_width="200dp" android:layout_height="100dp"
        android:layout_gravity="center" android:gravity="center" android:text="1111" />

    <LinearLayout android:layout_width="fill_parent" 
        android:layout_height="wrap_content" android:orientation="horizontal">

        <EditText android:id="@+id/ent_nums" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:hint="Entered numbers" />

        <Button android:id="@+id/enter" android:layout_width="fill_parent"
            android:layout_height="wrap_content" android:layout_weight="0.37"
            android:text="Enter" />

    </LinearLayout>

    <LinearLayout 
        android:layout_width="fill_parent" android:layout_height="wrap_content"
        android:orientation="horizontal" android:layout_marginTop="15dp"
        android:weightSum="90">

        <Button android:id="@+id/button7" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textSize="40sp"
            android:text="7" android:layout_weight="30"/>
        <Button android:id="@+id/button8" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textSize="40sp"
            android:text="8" android:layout_weight="30"/>
        <Button android:id="@+id/button9" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textSize="40sp"
            android:text="9" android:layout_weight="30"/>

    </LinearLayout>
    <LinearLayout 
        android:layout_width="fill_parent" android:layout_height="wrap_content"
        android:orientation="horizontal" android:weightSum="90">

        <Button android:id="@+id/button4" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textSize="40sp"
            android:text="4" android:layout_weight="30"/>
        <Button android:id="@+id/button5" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textSize="40sp"
            android:text="5" android:layout_weight="30"/>
        <Button android:id="@+id/button6" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textSize="40sp"
            android:text="6" android:layout_weight="30"/>

    </LinearLayout>

    <LinearLayout android:weightSum="90"
        android:layout_width="fill_parent" android:layout_height="wrap_content"
        android:orientation="horizontal">

        <Button android:id="@+id/button1" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textSize="40sp"
            android:text="1" android:layout_weight="30"/>
        <Button android:id="@+id/button2" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textSize="40sp"
            android:text="2" android:layout_weight="30"/>
        <Button android:id="@+id/button3" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textSize="40sp"
            android:text="3" android:layout_weight="30"/>

    </LinearLayout>

<LinearLayout android:layout_width="fill_parent" 
        android:layout_height="wrap_content" android:weightSum="90">

        <Button android:id="@+id/button0" android:layout_width="90dp"
            android:layout_height="wrap_content" android:layout_weight="60"
            android:text="0" android:textSize="30sp" />
    <Button android:id="@+id/delete" android:layout_width="40dp" 
        android:layout_height="fill_parent" android:layout_weight="30"
         android:text="Del" android:textSize="24sp"/>

    </LinearLayout>

</LinearLayout> 
```

我的“0”和“Del”按钮的动作似乎相反。这意味着当我单击“0”时，它实际上会删除所有内容，而当我单击“Del”时，它会键入“0”字符。但是，当我只是在他们的物理位置之间切换（参见第二个代码）时，他们都会做正确的事情。

```
<LinearLayout android:layout_width="fill_parent" 
        android:layout_height="wrap_content" android:weightSum="90">

    <Button android:id="@+id/delete" android:layout_width="40dp" 
        android:layout_height="fill_parent" android:layout_weight="30"
         android:text="Del" android:textSize="24sp"/>

    <Button android:id="@+id/button0" android:layout_width="90dp"
            android:layout_height="wrap_content" android:layout_weight="60"
            android:text="0" android:textSize="30sp" />

    </LinearLayout> 
```

这可能是什么原因造成的？

# c# - 在 Sharepoint 文件夹中运行一个 aspx 页面

> ID：11856121
> 
> 赞同：0
> 
> 时间：2012-08-08T00:42:29.220
> 
> 标签：c#, asp.net, sqlite, sharepoint

我有一个 aspx 页面，我想将它运行到一个共享点文件夹中。有没有办法像 html 页面一样执行这个页面？我真正需要的是运行 ac# 代码，该代码与 aspx 页面（后面的代码）一起读取 SQLite 数据库并在良好的界面（html-css-javascript）中显示结果。

Obs.：我有一个 SQLite 的程序集参考。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:51:34.963

不确定“将其运行到 sharepoint 文件夹中”意味着......您不能在常规 SharePoint 文件夹中拥有包含代码的页面。

您可以将 ASPX 页面（即使使用代码隐藏）放在服务器磁盘上的 Layouts 文件夹中，它们将通过 ....\layouts\your_page.aspx url 可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T03:36:47.420

您需要在 sharepoint 中创建一个应用程序页面并将您的代码移动到该应用程序页面中。它非常简单，请参阅此链接。

[http://www.c-sharpcorner.com/uploadfile/anavijai/how-to-create-custom-sharepoint-2010-application-page-using-visual-studio-2010/](http://www.c-sharpcorner.com/uploadfile/anavijai/how-to-create-custom-sharepoint-2010-application-page-using-visual-studio-2010/)

请注意，应用程序页面仅支持 Web 表单，不支持 MVC

# c# - 使用 XmlDocument 和 XmlDocumentFragment 附加新子节点的不良结果

> ID：11856125
> 
> 赞同：1
> 
> 时间：2012-08-08T00:43:02.073
> 
> 标签：c#, xml, automation

我计划`<image>@matchedFilePathToAnImageHere</image>`只附加到那些标签`<item></item>`之间的值`<name></name>`，当转换为小写，用下划线等替换空格时，将与单独文件夹中的实际图像文件名匹配的节点。

该代码将大约 95% 的图像与项目正确匹配，**但**最终将每个匹配的图像文件名附加`<image></image>`到第一个`<item></item>`.

*我将如何将每个附加`<image></image>`到他们的适当位置`<item></item>`？*每个项目只需要一个图像。

**图片文件夹**：

名称1.jpg

name_2.jpg

名称3.jpg

...

名称 998.jpg

**XML（解析前）**：

```
<items>
 <item>
  <name>Name1</name>
  <price>Price1</price>
  <description>Description1</description>
 </item>
 <item>
  <name>Name2</name>
  <price>Price2</price>
  <description>Description2</description>
 </item>
 <item>
  <name>Name3</name>
  <price>Price3</price>
  <description>Description3</description>
 </item>
</items> 
```

**XML（解析后的期望结果）**：

```
<items>
 <item>
  <name>name1</name>
  <price>Price1</price>
  <description>Description1</description>
  <image>C:\path\to\name1.jpg</image>
 </item>
 <item>
  <name>Name2</name>
  <price>Price2</price>
  <description>Description2</description>
      <!-- no image file name matched `name2`(command line notice), so skip appending image tags here BUT I add the image tag here later by hand, because I find out that there's an image `name_2.jpg` -->
 </item>
     <item>
  <name>Name3</name>
  <price>Price3</price>
  <description>Description3</description>
  <image>C:\path\to\name3.jpg</image>
 </item>
</items> 
```

**代码**：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;
using System.Xml.Linq;
using System.IO;

namespace myXmlParser
{
    class Program
    {
        static void Main(string[] args)
        {
            // load the xml
            XmlDocument doc = new XmlDocument();
            doc.Load(@"C:\items.xml");

            // retrieve the values between <name></name> for the every item element
            XmlNodeList nodes = doc.SelectNodes("//item/name/text()");

            // convert every extracted name value to lower case
            // replace spaces with underscores
            // remove the ' symbols
            // to have higher chance of matching images' file names
            // ",_the" and "_,a" replaces don't seem to work( oh well )
            for (int i = 0; i < nodes.Count; i++)
            {

                // do the magic!
                string searchKeyword = nodes.Item(i).Value.Replace(" ", "_").Replace("'","").Replace(",_the",(string)"").Replace(",_a","").ToLower();

                //Console.WriteLine(searchKeyword);

                // Now find me any images whose filenames match the searchKeyword minus the extensions
                string[] filePaths = Directory.GetFiles(@"C:\images", searchKeyword + "*", SearchOption.TopDirectoryOnly);

                // if something was found/matched then append <image>@pathToImageHere</image> to the current
                // item node, otherwise log any item nodes that didn't have a match to an image
                // ! Doesn't APPEND properly !
                if (filePaths.Length > 0)
                {
                    XmlDocumentFragment frag = doc.CreateDocumentFragment();
                    frag.InnerXml = @"<image>" + filePaths[0] + @"</image>";
                    doc.DocumentElement.FirstChild.AppendChild(frag);
                }
                else
                {
                    Console.WriteLine("NO IMAGE WAS FOUND!!! {0}", searchKeyword);
                }

                //Console.WriteLine(filePaths[j]);
                //foreach (string filePath in filePaths)
                //{
                    //blah  
                //}
            }

            // now save the new parsed xml somewhere
            doc.Save("items_with_images.xml");

            Console.ReadKey();

        }// main
    }// class
}// namespace 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:59:53.767

```
doc.DocumentElement.FirstChild.AppendChild(frag); 
```

为什么要附加到文档的第一个孩子。您不希望附加到当前节点吗？

```
 nodes.Item(i).ParentNode.ParentNode.AppendChild(frag); 
```

# linux - 变量作为bash数组索引？

> ID：11856132
> 
> 赞同：26
> 
> 时间：2012-08-08T00:43:36.047
> 
> 标签：linux, bash

```
#!/bin/bash

set -x

array_counter=0
array_value=1

array=(0 0 0)

for number in ${array[@]}
do
    array[$array_counter]="$array_value"
    array_counter=$(($array_counter + 1))
done 
```

运行上面的脚本时，我得到以下调试输出：

```
+ array_counter=0
+ array_value=1
+ array=(0 0 0)
+ for number in '${array[@]}'
+ array[$array_counter]=1
+ array_counter=1
+ for number in '${array[@]}'
+ array[$array_counter]=1
+ array_counter=2
+ for number in '${array[@]}'
+ array[$array_counter]=1
+ array_counter=3 
```

为什么变量**$array_counter**在用作数组 [] 中的索引时不展开？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-08T00:59:56.153

Bash 似乎对变量作为数组索引非常满意：

```
$ array=(a b c)
$ arrayindex=2
$ echo ${array[$arrayindex]}
c
$ array[$arrayindex]=MONKEY
$ echo ${array[$arrayindex]}
MONKEY 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-01T11:11:19.577

你的例子确实有效。

```
echo ${array[@]} 
```

证实了这一点。

您可以尝试更有效的方法来增加索引：

```
((array_counter++)) 
```

# ocaml - Lwt 是指“轻量级线程”吗？

> ID：11856133
> 
> 赞同：8
> 
> 时间：2012-08-08T00:43:39.083
> 
> 标签：ocaml, ocsigen

我一直在测试使用 Lwt 的 ocsigen。我猜 Lwt 的意思是“轻量级线程”，对吧？如果是这样，我们怎么能称它为“轻量级”？

似乎 Lwt 正在使用不轻量级的操作系统线程（与 Erlang 和 Haskell 相比）。

请大神指点一下，谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-08T01:26:52.073

是的，Lwt 是指轻量级线程，Lwt 的线程是轻量级的。Lwt 有一个协作线程模型，只有一个 lwt 线程在单个系统线程上同时运行，直到它明确地让出控制权。你有责任确保你的计算最终产生，否则其他 lwt 线程可能永远不会运行。

然而，Lwt 也有一个[系统线程池，](http://ocsigen.org/lwt/api/Lwt_preemptive)用于执行阻塞系统调用或委托长时间运行的函数，这样它们就不会阻塞整个系统并阻止其他 lwt 线程运行。

[你可以在这篇](http://dl.acm.org/citation.cfm?doid=1411304.1411307)论文中找到更多关于 Lwt 的模型和实现的信息（你可以在原作者的网页上找到，[这里](http://www.pps.univ-paris-diderot.fr/~vouillon/lwt/)）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-08T01:33:41.847

[Lwt](http://ocsigen.org/lwt/manual/)的文档页面说：

> [Lwt] 提供非常轻量级的协作线程；“启动”一个线程是一个非常快速的操作，它不需要一个新的堆栈、一个新的进程或其他任何东西。此外，上下文切换非常快。事实上，这很容易，我们将为每个系统调用启动一个线程。组合协作线程将使我们能够编写高度异步的程序。

# scala - scala调用linux lsof命令搜索目录？

> ID：11856134
> 
> 赞同：0
> 
> 时间：2012-08-08T00:43:39.743
> 
> 标签：scala, process

如何正确使用 scala 在目录上调用 lsoft +d？

例子：

```
import scala.sys.process._

("lsof +d /home/brad") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:22:24.863

理论上它只是

```
import sys.process._
"lsof +d /home/brad".!! 
```

或者

```
Seq("lsof", "+d", "/home/brad").!! 
```

问题是这个过程可能有一个非零的退出值，然后该`!!`方法只是抛出一个异常而你没有得到结果字符串。

作为一种解决方法，即使存在退出值 1，以下内容似乎也有效：

```
Seq("lsof", "+d", "/home/brad").lines_!.mkString("\n") 
```

如果您也希望检查退出值，您可以在进程记录器中捕获输出：

```
var lines = Vector.empty[String]
val log = ProcessLogger(lines :+= _)
val p   = Seq("lsof", "+d", "/home/brad").run(log)
val res = p.exitValue // blocks until process is finished and returns the exit value
val s   = lines.mkString("\n") // the resulting output 
```

# haskell - 如何在一个简单的猜谜游戏中跟踪猜测的次数（Haskell）

> ID：11856135
> 
> 赞同：7
> 
> 时间：2012-08-08T00:43:41.887
> 
> 标签：haskell, random, state

在过去的几周里，我一直在尝试独立学习 Haskell。目前，我正在尝试实现一个愚蠢的小猜谜游戏，其中计算机选择一个随机数，用户尝试猜测它。如果用户错了，程序会告诉用户答案更高或更低，并允许用户猜测，直到他们猜对为止。我已经让它工作了，但我想添加一个功能，以跟踪用户在每场游戏中的猜测次数，并在用户猜对后将该数字报告给用户。

来自命令式背景，自然要做的事情是有一个计数器，每次用户进行猜测时都会增加一个计数器，但在 Haskell 中你不能真正做到这一点（至少它看起来像一切的无状态和不变性会阻止这种情况）。

我玩弄了让 getGuess 和 giveHints 函数接受一个额外参数的想法，该参数表示到目前为止的猜测次数（我们称之为 numGuesses），并且在每次调用这些方法时，传递 (numGuesses+1)。但我无法让它发挥作用（更不用说我什至不知道这是否会奏效）。

我的代码如下。任何建议将不胜感激。我主要是在寻找想法，但也可以随意发布实际代码。另外，如果我的代码很糟糕，请随时告诉我，如果你发现任何令人发指的事情，我该如何改进它（我只在功能上编程了几个星期！）

```
 import System.Random
    import System.IO
    import Control.Monad

    main = do
        gen <- getStdGen
        let (ans,_) = randomR (1,100) gen :: (Int,StdGen)
        putStrLn $ "I'm thinking of a number between 1 and 100..."
        getGuess ans
        putStrLn "You guessed it in __ guesses!"
        putStr "Play again? "
        hFlush stdout
        desire <- getLine
        when ((desire !! 0) `elem` ['y','Y']) $ do
            putStrLn ""
            newStdGen
            main

    getGuess ans = do   
        putStr "Your guess? "
        hFlush stdout
        guessStr <- getLine
        giveHints ans (read guessStr)

    giveHints ans guess = do
        when (ans /= guess) $ do
           if ans > guess 
               then putStrLn "It's higher." 
               else putStrLn "It's lower."
           getGuess ans 
```

注意：我使用的是 hFlush 标准输出，因为我使用的是行缓冲，没有它，一些交互的顺序就不是人们所期望的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T02:23:46.510

您实际上可以实现您正在考虑的计数方法，但您仍然必须显式地传递状态。但在这种情况下，这根本不是一件麻烦事。事实上，这是一种在辅助函数中经常看到的模式，在这种情况下，实际使用`State`monad 将是多余的。

我所指的模式通常是这样的：

```
doStuff xs' = go xs' 0
  where
    go (x:xs) n = .. etc .. 
```

这是代码。

```
import System.Random       (randomRIO)
import Control.Applicative ((<$>))
import Control.Monad       (when)
import Text.Printf         (printf)  

playGame :: Int -> Int -> IO ()
playGame answer curGuesses = do
    putStrLn "What is your guess?"
    putStr   ">"
    guess <- getGuessFromUser
    when (guess /= answer) $ do
        giveHints answer guess
        playGame answer (curGuesses + 1)
    when (guess == answer) $ do
        putStrLn "You guessed it!"
        printf   "You guessed %d times!\n" (curGuesses + 1)

giveHints :: Int -> Int -> IO ()
giveHints answer guess 
    | answer > guess = putStrLn "It's higher!"
    | otherwise      = putStrLn "It's lower!"

getGuessFromUser :: IO Int
getGuessFromUser = do
    read <$> getLine

main :: IO ()
main = do
    answer <- randomRIO (1, 100)
    putStrLn "I'm thinking of a number between 1 and 100."
    playGame answer 0 
```

**笔记**

*   `<$>`是`fmap`
*   我`randomRIO`像丹尼尔提到的那样使用，因为我们已经在 IO monad 中。
*   我不必在 Windows 上使用`hSetBuffering`或`hFlush`使用命令提示符来获得正确的输出。然而，YMMV。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T06:15:19.407

为猜测的数量添加一个额外的参数正是你在功能上做这种事情的方式。

基本的函数式思维模式是，如果您有一个函数需要根据“某物”的不同值表现出不同的行为，那么该某物就是该函数的参数。这是纯洁的一个简单结果；对于相同的输入，函数必须始终返回相同的内容。

当您使用更高级的技术时，有多种方法可以“隐藏”额外参数，从而使您不必显式地编写/传递它们；这基本上正是`State`monad 所做的，而考虑`IO`monad 的一种方式是它正在做类似的事情。但是，虽然您是函数式编程的新手，但习惯这种思维模式可能会更有帮助；您通过其参数将信息传递给您正在调用的函数，并通过其参数接收信息。您不能求助于将信息留在某个外部位置（例如计数器的值）的命令技巧，您知道调用的函数将查找它（甚至修改它）。

# javascript - 在javascript中可以使用css3线夹吗？

> ID：11856136
> 
> 赞同：4
> 
> 时间：2012-08-08T00:43:52.657
> 
> 标签：javascript, css, webkit

目前要垂直限制文本框并添加省略号，只有使用 line-clamp 和 box-orient 的 webkit css3 解决方案。

演示（Safari 或 chrome）：http: [//jsfiddle.net/ArKeu/136/](http://jsfiddle.net/ArKeu/136/)

现在这在其他任何地方都不支持，甚至不使用前缀。所以我的问题是是否可以在纯javascript中轻松做到这一点。简而言之，让一个句子在多行上流动，并在添加省略号的同时在几行之后添加停止。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T02:31:34.863

我将[这个答案](https://stackoverflow.com/a/3880955/219118)的代码修改为纯JS。您不指定行数，而是指定框的高度。您可以通过将行数乘以 轻松从行数计算高度`line-height`。

**HTML**

```
<div id="fos">
    <p>text here</p>
</div>​ 
```

**JavaScript**

```
var container = document.getElementById("fos");
var containerHeight = container.clientHeight;
var para = container.children[0];

while (para.clientHeight > containerHeight) {
    para.innerText = para.innerText.replace(/\W*\s(\S)*$/, '...');
} 
```

[**演示**](http://jsfiddle.net/k5VET/382/)

# html - HTML输入不隐藏

> ID：11856137
> 
> 赞同：0
> 
> 时间：2012-08-08T00:43:53.960
> 
> 标签：html, types, input

我不确定为什么这不起作用我认为它应该是但在 chrome 中它没有隐藏输入框

```
<input type="hidden" name="_id" id="_id" value="<?=$fetchretailer[0]['_id'];?>" readonly="readonly"> 
```

有人可以告诉我这是一个错误，还是我做错了什么。

这是上面的代码

```
<div class="content">
    <div class="leadform">
    <form name="lead" id="lead">
        <input type="hidden" name="_id" id="_id" value="<?=$fetchretailer[0]['_id'];?>" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:46:57.497

它上面的标签中可能缺少引号。

此外，请尝试从名称和 ID 属性中删除下划线。这不是有效的语法。HTML 属性不能以下划线开头。

# gmail - phpmailer不向gmail发送邮件

> ID：11856139
> 
> 赞同：0
> 
> 时间：2012-08-08T00:44:03.947
> 
> 标签：gmail, phpmailer

我有一个电子邮件程序，它从一个正常工作的 cron 运行，但现在它没有。好吧，它仍然有效，但它不会向 gmail 发送任何电子邮件。我在 gmail 的过滤器中设置了过滤器，以将来自“我的域”的所有电子邮件发送到我的收件箱而不是垃圾邮件文件夹，但现在他们甚至不去垃圾邮件文件夹。它适用于 yahoo 和 textfree.us。

这是代码：

```
$alerttarget = $usersemail;
$subject = "A bill is OVERDUE!";
$body = "You have an overdue bill, in the amount of $" . $amount . ".";
$from = $userId . date("YmdHis") . $billdetailId . "b@mydomain.com";

sendemail($alerttarget, $body, $from, $subject);

function sendemail($target, $body, $from, $subject)
{

    $mail = new PHPMailer();

    $email = $target;

    $mail->IsSMTP(); // telling the class to use SMTP
    $mail->Host       = "localhost"; // SMTP server
    $mail->SMTPDebug  = 2; // enables SMTP debug information (for testing)
    $mail->SetFrom($from, "my domain");
    $mail->AddReplyTo($from, "my domain");

    $mail->Subject    = $subject;

    $mail->MsgHTML($body);

    $address = $email;
    $mail->AddAddress($address, "me");

    if(!$mail->Send()) {
        echo "Mailer Error: " . $mail->ErrorInfo;
    } else {
        echo "Message sent!";
    }
} 
```

我最近购买了一个新域，并将主机设置为指向我的 IP 地址。我用godaddy的DNS管理器做到了这一点。但是，我只将主机设置为指向我的 IP 地址；没有其他的。然而，在我做这一切之前，它就停止了工作。

# git - 如何 git commit -- 修改作为分支基础的提交

> ID：11856141
> 
> 赞同：16
> 
> 时间：2012-08-08T00:44:13.573
> 
> 标签：git, rebase, git-amend

我有 master/head 的分支 foo 。我想修改 master/head 并在分支 foo 上获取这些更改。我做了以下事情：

```
git checkout master
git add ...
git commit --amend
git checkout foo
git rebase master 
```

问题是旧的未修改提交在修改后显示为分支 foo 的一部分，并且它被重新定位到 master 上。我做了一个 git rebase -i 并删除了旧的提交并且有效，但是有没有更简单/更安全的方法来修改作为分支基础的提交？是的，所有未推送的本地提交..

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-08T03:57:42.163

你需要做的就是告诉 git 从哪里开始变基：你可以这样做

```
git rebase --onto master SOMESHA foo 
```

其中 SOMESHA 是旧主 SHA。那就是如果你的树现在看起来像这样

```
* aaaaaa - (master)
| * bbbbbb - (foo)
| * cccccc - (old master)
|/  
* ffffff 
```

你也是

```
git rebase --onto master cccccc foo 
```

然后，您的树将如下所示。

```
* dddddd - (foo)
|
* aaaaaa - (master)
|
* ffffff 
```

**旁白：**`cccccc`如果您不喜欢使用 SHA 值，我们可以为提交使用不同的名称。

```
> git reflog master

aaaaaa master@{0}: reset: moving to something
cccccc master@{1}: commit: change the froozle
ffffff master@{2}: commit: snarf the froozle 
```

这意味着我们可以引用`cccccc`为`master@{1}`（AKA，master 的先前位置）

所以我们可以把这个变基写成

```
git rebase --onto master master@{1} foo 
```

提交的另一个描述`cccccc`是`foo^`（AKA，foo 的父提交），所以我们也可以把它写成

```
git rebase --onto master foo^ foo 
```

他们都做同样的事情，你可能更喜欢在不同的情况下使用不同的。我通常发现 SHA 使用起来很简单，因为我经常会在执行此类操作之前拉出我的存储库的图表。

# php - 用ajax检查是否有新消息

> ID：11856144
> 
> 赞同：1
> 
> 时间：2012-08-08T00:44:34.183
> 
> 标签：php, jquery, ajax

我已经提供了一些代码来实时进行 ajax、php、mysql 聊天......这是我的代码：

-jQuery/Ajax

```
$(function(){
    setInterval(function() {
    $('#chMsgCont').load('./ajax/msg.php');
       var div = $('#chMsgCont');
         var o = div.offset().top;  

   div.scrollTop( o + 12302012 );
    }
    ,1000);
}); 
```

“./ajax/msg.php”

```
<?php
include("../system/config.site.php");
$query = mysql_query("SELECT * FROM chat_msg ORDER BY timestamp ASC");
while($p = mysql_fetch_assoc($query)) {
    $auth = mysql_fetch_assoc(mysql_query("SELECT * FROM chat_users WHERE id = '".$p['auth_id']."'"));
?>
<div class="chatMsg">
<p id="chatPMsg">
<span class="chatTime"><?php echo date("H:i", $p['timestamp']); ?></span>
<b><?php echo $auth['name']." ".$auth['surname']; ?></b><br />
<?php echo stripslashes($p['msg']); ?>
</p>
<p id="chatImg">
<img src="./images/thumb<?php echo $p['auth_id']; ?>.png" />
</p>
<div style="clear:both;"><!– –&gt; </div>
</div>
<?php
}
?> 
```

我还没有找到任何不每秒加载“msg.php”文件的方法...我想：是否可以首先加载消息，然后使用 setIntervall 检查要附加到#chMsgCont 的新消息？我认为这是可能的，但我不知道如何编码：/，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:53:49.003

是的，可以在初始页面加载时加载所有消息；然后随后用新消息更新聊天窗口（您有没有想过 Gmail 如何在不刷新页面的情况下自动将新邮件填充到您的收件箱中？大量的 AJAX 请求）。

你在正确的轨道上。只需确保您的 MySQL 数据库中有一个列，该列包含关于它是否是新消息的“是/否”值。然后每次使用 ajax/msg.php 获取新消息时，除了获取和输出内容外，还执行 SQL 更新以更新获取的数据。

一旦你有了这个工作，你可以通过创建一个更简单的 MySQL SELECT 语句来进一步优化你的聊天应用程序，该语句只检查“新”行的计数（SELECT COUNT(new_message) FROM 消息）。然后在尝试追加内容之前检查返回的值以及它是否大于 0。我还会检查 JavaScript 中的空返回数据，以防止不必要地操作 DOM 元素。

# javascript - Jquery .click 不会触发跨越多个元素的用户选择事件

> ID：11856146
> 
> 赞同：1
> 
> 时间：2012-08-08T00:45:03.790
> 
> 标签：javascript, jquery, javascript-events

我有一个功能（仍在开发中），需要在 div 中捕获用户选择的文本（不是文本区域和输入框，因此 .select 不起作用。）。Using .click and selection and range objects works great when the selection is contained within a single element in that div but fails to trigger if the user selection spans multiple elements within the div (like multiple p's).

```
 $('.relevantDivClass').click(function(){
        console.log('Got here');
        SelObj = window.getSelection();
        Range = SelObj.getRangeAt(0);
        if (SelObj.anchorNode == SelObj.focusNode){
            console.log('executing same node branch');
            string = SelObj.toString();
            console.log(string)
        }
        else{
            console.log('executing multiple node branch');
            //code...
        }
    }); 
```

关于如何在这种情况下触发该事件的任何想法？它仍然在relatedDivClass 中，所以我对为什么.click 不会触发感到困惑。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:56:41.413

希望使用最新的 jQuery 版本，改用这个：

`$(".relevantDivClass").on("click", function() { /* code */ });`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T01:13:50.127

使用`.mouseup()`而不是`.click()`. 当跨多个段落突出显示文本时，不会在触发 'mousedown' 的同一元素上触发 'mouseup' 事件——这是 'click' 事件的定义。`.click()`适用于单个段落，因为您在`<p>`元素上同时触发了“mousedown”和“mouseup”，并且它会冒泡到其父级，`<div>`.

[**工作演示**](http://jsfiddle.net/rcbHC/)

```
$(function() {
    $('.relevantDivClass').mouseup( function() {
        alert('Got here');
        SelObj = window.getSelection();
        Range = SelObj.getRangeAt(0);
        if (SelObj.anchorNode == SelObj.focusNode){
            alert('executing same node branch');
            string = SelObj.toString();
            alert(string)
        }
        else{
            alert('executing multiple node branch');
            //code...
        }
    });
});
​ 
```

# android - 无法获取 GPS 位置

> ID：11856149
> 
> 赞同：-2
> 
> 时间：2012-08-08T00:45:47.747
> 
> 标签：android, eclipse, android-emulator, android-location

我正在尝试访问用户设备的 GPS 位置，但似乎无处可去。

在我的课堂上，我有以下代码，它检查是否启用了 GPS 提供程序，然后尝试获取用户最后一个已知位置。

它承认 GPS 提供商是`enabled`，但是当我尝试获取最后一个已知位置时，我什么也没得到，`myLocation`总是以`null`.

```
// try to get GPS location
LocationManager locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
final boolean gpsEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);

if (gpsEnabled) {

    //request for location updates
    LocationListener locationListener = new MyLocationListener();
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 100, 0, locationListener);

    Location myLocation;
    myLocation = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

    if (myLocation != null) {
        //we have a location!!
    }

} // end if gps enabled 
```

这是来自的代码`LocationListener`

```
public class MyLocationListener implements LocationListener
{
    public void onLocationChanged(Location location) {
        location.getLatitude();
        location.getLongitude();
        // TODO get accuracy, direction and speed.
        // this method is unfinished...
    }
} 
```

这是清单文件中的权限

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

显然，我忽略了一些东西来获取设备位置。为什么最后一个已知位置总是返回 null？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T05:28:01.873

几件事：

1.  在您的 LocationListener 中，您没有对位置做任何事情。例如，您可以将位置保存在变量中并稍后使用。
2.  如果提供程序被禁用或设备没有任何已知位置，LocationManager.getLastKnownLocation 可以返回 null。
3.  使用模拟器时，您可以模拟位置。阅读[http://developer.android.com/guide/topics/location/strategies.html#MockData](http://developer.android.com/guide/topics/location/strategies.html#MockData)
4.  要在设备上进行模拟，您可以使用“假 GPS”应用并在设置中允许模拟位置

希望能帮助到你。

# html - 使用 CSS 将图像水平居中

> ID：11856150
> 
> 赞同：65
> 
> 时间：2012-08-08T00:45:50.077
> 
> 标签：html, css

我正在尝试使用 css 将图像水平居中。

我正在使用以下 HTML 代码在屏幕上显示我的图像：

```
<div id="loading" class="loading-invisible">  
    <img class="loading" src="logo.png">
</div> 
```

我正在裁剪我的图像，因为我只想显示一些图像并且我正在使用以下 css：

```
img.loading 
{
position:absolute;
clip:rect(0px,681px,75px,180px);
} 
```

但是，一旦图像被裁剪，我无法弄清楚如何使图像居中。

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-08-08T05:20:30.330

为你的 CSS 试试这个：

```
.center img {        
  display:block;
  margin-left:auto;
  margin-right:auto;
} 
```

然后添加到您的图像以使其居中：

```
class="center" 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-08-08T00:58:36.717

像这样使用绝对位置和边距

```
img.loading{
  position: absolute;
  left: 50%;
  margin-left: -(half ot the image width)px
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-06-19T06:44:07.057

您可以使用不同的方法：

**方法一：**

它是一个简单的方法，使用“ `text-align: center;`”作为你的父 div。

```
#loading {
  text-align: center;
}
```

```
<div id="loading" class="loading-invisible">  
    <img class="loading" src="https://dummyimage.com/200x100/000/fff.png&text=Logo">
</div>
```

[小提琴](https://jsfiddle.net/shuozj31/)

**方法二：**

请检查代码：

```
#loading img {
  margin: 0 auto;
  display: block;
  float: none; 
  /*width: 200px; if its a large image, it need a width for align center*/
}
```

```
<div id="loading" class="loading-invisible">  
    <img class="loading" src="https://dummyimage.com/200x100/000/fff.png&text=Logo">
</div>
```

[小提琴](https://jsfiddle.net/12o5d608/4/)

**方法三：**

使用“ `display: flex;`”

```
#loading {
  display: flex;
  align-items: center;
  justify-content: center;
}
```

```
<div id="loading" class="loading-invisible">  
    <img class="loading" src="https://dummyimage.com/200x100/000/fff.png&text=Logo">
</div>
```

[小提琴](https://jsfiddle.net/ch18knuz/)

**方法四：**

您可以使用“ `position: absolute;`”，

```
#loading {
        position: relative;
        }
#loading img{
        position: absolute;
        top: 0;
        left: 50%;
        margin-right: -50%;
        transform: translate(-50%, 0%);
        -ms-transform: translate(-50%, 0%);
        -webkit-transform: translate(-50%, 0%);
        -moz-transform: translate(-50%, 0%);
        -o-transform: translate(-50%, 0%);
}
```

```
<div id="loading" class="loading-invisible">  
    <img class="loading" src="https://dummyimage.com/200x100/000/fff.png&text=Logo">
</div>
```

[小提琴](https://jsfiddle.net/uazr2ox6/1/)

希望这会帮助你。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-08T00:49:04.287

采用`margin`

```
margin-left:auto;
margin-right:auto; 
```

# php - 两个数组的差异

> ID：11856152
> 
> 赞同：0
> 
> 时间：2012-08-08T00:46:26.303
> 
> 标签：php, arrays, diff

我想得到两个数组不同的数组，但`array_diff()`不能按我的意愿工作。

我有这样的事情：

```
Array ( [0] => dog [1] => cat [2] => cow [3] => bird [4] => wolf )
Array ( [0] => dog [1] => cat [2] => cow ) 
```

我想得到这个：

```
Array ( [0] => bird [1] => wolf ) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T00:49:55.600

试试这个代码：

```
$array1 = array ( 'dog','cat','cow','bird','wolf' );
$array2 = array ( 'dog','cat','cow' );

$diff = array_values(array_diff($array1,$array2));

print_r($diff); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:09:46.537

*您可以避免内置功能*

```
$a1 = array ('dog','cat','cow','bird','wolf' );
$a2 = array ('dog','cat','cow' );

foreach($a1 as $key=>$value){
    if(!in_array($value, $a2))
        $s3[] = $value;
} 
```

如果您在两个输入数组中都需要反之亦然差异，则添加以下内容：

```
foreach($a2 as $key=>$value){
    if(!in_array($value, $a1))
        $s3[] = $value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T00:50:07.183

```
array_values(array_diff($array1, $array2)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T03:12:45.180

问我读了你的例子，你有两个问题： - 数组可以是相同的键相同的值，所以你只想找到参考键和参考值？- 仅排列相同的键，但您只想找到参考值？

# field - 如果在 elasticsearch 查询中使用 script_fields，则不再使用 _source

> ID：11856155
> 
> 赞同：25
> 
> 时间：2012-08-08T00:46:52.613
> 
> 标签：field, elasticsearch

我正在运行一个简单的查询，如下所示：

```
{
  "query": {
    "term": {
      "statuses": "active"
    }
  },
  "script_fields": {
    "test": {
      "script": "_source.name"
    }
  }
} 
```

问题是，一旦我引入`script_fields`，我就不再得到`_source`我的结果。

我试过了：

```
{
  "fields": [
    "_all"
  ],
  "query": {
    "term": {
      "statuses": "active"
    }
  },
  "script_fields": {
    "email": {
      "script": "_source.name"
    }
  }
} 
```

和

```
{
  "fields": [
    "*"
  ],
  "query": {
    "term": {
      "statuses": "active"
    }
  },
  "script_fields": {
    "email": {
      "script": "_source.name"
    }
  }
} 
```

但他们没有任何区别。除了 有没有办法`_source`退换货`script_fields`？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-08T00:54:03.887

在`fields`数组中，使其加载`_source`：

```
{
  "stored_fields": [
    "_source"
  ],
  "query": {
    "term": {
      "statuses": "active"
    }
  },
  "script_fields": {
    "email": {
      "script": "_source.name"
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-27T09:16:40.683

这对我有用：

```
curl -X DELETE localhost:9200/a

curl -X POST localhost:9200/a/b/c -d '{"title" : "foo"}'

curl -X POST localhost:9200/a/_refresh

echo;

curl localhost:9200/a/_search?pretty -d '{
  "fields": [
    "_source"
  ],
  "query": {
    "match_all": {}
  },
  "script_fields": {
    "title_script": {
      "script": "_source.title"
    }
  }
}' 
```

输出：

```
"hits" : {
  # ...
  "hits" : [ {
    # ...
    "_source" : {"title" : "foo"},
    "fields" : {
      "title_script" : "foo"
    }
  } ]
} 
```

# ios5 - 用于捕获 iPhone 流量的 charles 在 iOS5 上不起作用

> ID：11856157
> 
> 赞同：3
> 
> 时间：2012-08-08T00:47:33.840
> 
> 标签：ios5, charles-proxy

我们按照下一页中的说明进行操作。

```
http://www.charlesproxy.com/documentation/faqs/using-charles-from-an-iphone/ 
```

但这似乎不起作用。之后放入 Safari 移动设备中的简单网址最终会收到错误消息“无法打开页面 - Safari 无法打开页面，因为服务器停止响应”。无法找到解决此问题的方法，有人尝试过吗？Safari Mobile 上是否有任何特殊设置可能导致此问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T02:22:08.200

从 4.3 更新到 5.1 后，我也遇到了这个问题。我找到的解决方案是进入 Proxy->Access Controls，然后删除列表中的所有现有 IP。当我下一次尝试从设备连接时，我得到了权限弹出窗口，一切都很好。

# jquery - jQuery 每次相同的事件点 击一次

> ID：11856159
> 
> 赞同：0
> 
> 时间：2012-08-08T00:47:45.863
> 
> 标签：jquery

我试图让 jQuery 甚至每次单击该事件只触发一次，但是如果用户单击另一个元素然后返回到同一个元素，它将再次触发。

例如：

```
$( '.summary' ).on( "touchstart mousedown", function(event) {
    var data_summary = $(this).attr('data-summary');
    $('#info').empty().stop(true, true).fadeOut().html('<p>'+data_summary+'</p>').fadeIn();
}); 
```

我知道 one()，但这将永久禁用它。这段代码的作用是在气泡中淡出，但如果用户多次单击它，我不希望它继续这样做。但是，如果用户单击另一个元素，它将淡入一个新元素，从而使前一个元素在单击后再次有效。

**更新：**

淡入和淡出也关闭了，这是下面答案中的最终工作代码，如果其他人需要，可以进行调整。

```
var prev = null;
$( '.summary' ).on( "touchstart mousedown", function(event) {
    if(this !== prev) {
        prev = this;
        var data_summary = $(this).attr('data-summary');
        $('#info').stop(true, true).fadeOut('fast', function() {
            $(this).html('<p>'+data_summary+'</p>').fadeIn();
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T00:49:44.080

只需跟踪先前单击的元素：

```
var prev = null;
$( '.summary' ).on( "touchstart mousedown", function(event) {
    if(this !== prev) {
        prev = this;
        var data_summary = $(this).attr('data-summary');
        $('#info').empty().stop(true, true).fadeOut().html('<p>'+data_summary+'</p>').fadeIn();
    }
}); 
```

有多种方法可以做到这一点。另一种方法是向元素添加（和删除）一个类（如果需要，您还可以使用它来设置它的样式）。

# html - 使用 SVG 作为带有缩放的 CSS3 背景图像

> ID：11856161
> 
> 赞同：12
> 
> 时间：2012-08-08T00:47:53.883
> 
> 标签：html, css, svg

当我在这样的背景属性中使用 SVG 时：

```
.svg-button {
    -webkit-transform: scale(3.0) // root of the problem!
    background: url(Button.svg) no-repeat;
    width: 32px;
    height: 32px;
} 
```

结果我得到了模糊的图像。同时这种风格的标签中的文字是清晰的。此外，如果我使用 CTRL++（浏览器缩放）而不是转换属性来缩放页面，那么一切都很清楚。

如果我在以下位置替换 CSS 背景属性：

```
<object type="image/svg+xml" data="Button.svg" width="32" height="32"></object> 
```

无论如何，图像在任何情况下都是清晰的。

哪里有问题？

**[jsfiddle](http://jsfiddle.net/Re6Cf/)上的示例**

**更新：** 我发现了有关此问题的更多信息：

1.  [StackOverflow 问题](https://stackoverflow.com/questions/9562330/svg-pixelation-in-chrome)
2.  [Chrome 的错误票](http://code.google.com/p/chromium/issues/detail?id=119471)（我在 Safari/Chrome/IE9/10 下尝试了我的测试，行为是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:10:39.100

前段时间我在“玩”这个，也注意到了字体。虽然它现在似乎已修复（至少对于字体）。

据我了解内部工作原理，缩放元素的内容被映射到纹理，而纹理又被缩放。

作为一种解决方法，尝试使用 3d 平移并在 z 轴上移动元素以实现大小更改。但是，这不会对最终结果产生太多控制。

```
.svg-button {
    -webkit-transform: perspective(800px) translateZ(-300px);
    background: url(Button.svg) no-repeat;
    width: 32px;
    height: 32px;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-12T14:57:31.600

对于 Chrome/Safari IE9/10，我决定使用 CSS 缩放属性而不是缩放属性。

```
.svg-button {
    zoom: 300%;
    background: url(Button.svg) no-repeat;
    width: 32px;
    height: 32px;
} 
```

对于 Firefox，我仍然使用 CSS 缩放属性，因为 Firefox 不支持缩放属性。同时 Firefox 很好地缩放了 SVG 背景。[见结果](http://jsfiddle.net/5N8mq/)。

对于 IE9，我编写了临时修改 CSS 宽度属性的 javascript，并在小延迟后将其返回。通过这种方式，我强制重绘 CSS 背景。

# php - 如何在标题中分隔元标记

> ID：11856167
> 
> 赞同：0
> 
> 时间：2012-08-08T00:48:34.923
> 
> 标签：php, html, newline

在我的标题中，html 标签没有用新行分隔。

例如：

```
<? if(){
     echo 'meta title';
   }
   if(something){
     echo 'meta desc';
   } ?> 
```

Mozilla 浏览器不会在 meta 之间换行

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T00:50:40.443

您需要在每行的末尾放置换行符以明确结束该行。换行符是`\n`. 请注意，我将您的单引号更改为双引号，因为单引号会导致`\`不转义`n`并从字面上打印`\n`到页面而不是换行符。

```
 <? if(){
     echo "<title>Website Title</title>\n";
   }
   if(something){
     echo "<meta description=\"desciption\" />\n";
   } ?> 
```

有关特殊字符的更多信息，请参阅[PHP 手册](http://php.net/manual/en/language.types.string.php)

# python - 仅删除 match1 到 match2 之后的行

> ID：11856169
> 
> 赞同：0
> 
> 时间：2012-08-08T00:48:44.657
> 
> 标签：python

我已经检查并使用了各种示例，看来我的问题比我能找到的要复杂一些。我需要做的是搜索特定字符串，然后删除以下行并继续删除行，直到找到另一个字符串。所以一个例子如下：

```
a
b
color [
0 0 0,
1 1 1,
3 3 3,
] #color
y
z 
```

这里，`"color ["`是match1，`"] #color"`是match2。那么需要的是以下内容：

```
a
b
color [
] #color
y
z 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T00:56:42.973

这个“简单易懂”的代码示例将帮助您入门……您可以根据需要对其进行调整。请注意，它逐行处理文件，因此这适用于任何大小的文件。

```
start_marker = 'startdel'
end_marker = 'enddel'

with open('data.txt') as inf:
    ignoreLines = False
    for line in inf:
        if start_marker in line:
            print line,
            ignoreLines = True
        if end_marker in line:
            ignoreLines = False            
        if not ignoreLines:
            print line, 
```

它使用`startdel`和`enddel`作为开始和结束忽略数据的“标记”。

*更新*：

根据评论中的请求修改了代码，现在*将*包括/打印包含“标记”的行。

鉴于此输入数据（借自@drewk）：

```
Beginning of the file...
stuff
startdel
   delete this line
   delete this line also
enddel
stuff as well
the rest of the file... 
```

它产生：

```
Beginning of the file...
stuff
startdel
enddel
stuff as well
the rest of the file... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T00:57:26.063

您可以使用 nongreedy 使用单个正则表达式来执行此操作`*`。例如，假设您想同时保留 the`"look for this line"`和`"until this line is found"`线条，并且只丢弃中间的线条，您可以这样做：

```
>>> my_regex = re.compile("(look for this line)"+
...                       ".*?"+ # match as few chars as possible
...                       "(until this line is found)",
...                       re.DOTALL)
>>> new_str = my_regex.sub("\1\2", old_str) 
```

几点注意事项：

*   该`re.DOTALL`标志告诉 Python “.”。可以匹配换行符——默认匹配除换行符以外的任何字符
*   括号定义了“编号匹配组”，然后在我说“\1\2”时使用它，以确保我们*不会*丢弃第一行和最后一行。如果您确实想丢弃其中一个或两个，那么只需去掉 \1 和/或 \2。例如，保留第一次但不是最后一次使用`my_regex.sub("\1", old_str)`；或摆脱两者的使用`my_regex.sub("", old_str)`

如需进一步解释，请参阅：[http](http://docs.python.org/library/re.html) ://docs.python.org/library/re.html或在您喜欢的搜索引擎中搜索“非贪婪正则表达式”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T01:11:31.627

这有效：

```
s="""Beginning of the file...
stuff
look for this line
   delete this line
   delete this line also
until this line is found
stuff as well
the rest of the file...  """

import re

print re.sub(r'(^look for this line$).*?(^until this line is found$)',
            r'\1\n\2',s,count=1,flags=re.DOTALL | re.MULTILINE) 
```

印刷：

```
Beginning of the file...
stuff
look for this line
until this line is found
stuff as well
the rest of the file... 
```

您还可以使用列表切片来执行此操作：

```
mStart='look for this line'
mStop='until this line is found'
li=s.split('\n')
print '\n'.join(li[0:li.index(mStart)+1]+li[li.index(mStop):]) 
```

相同的输出。

我喜欢`re`这个（本质上是一个 Perl 人......）

# javascript - 切换

> ID：11856170
> 
> 赞同：0
> 
> 时间：2012-08-08T00:48:49.273
> 
> 标签：javascript, jquery

我正在尝试隐藏所属行。例如，如果您单击“Sub Title 1”，它将仅隐藏 Item 1、Item 2 和 Item 3 行。

例子：

```
<table border="1">
 <tbody>
  <tr class="head">
   <td> title </td>
  </tr>
  <tr class="sub-title">
     <td>Sub Title 1</td>
  </tr>
   <tr> <td>Item 1</td> </tr>
   <tr> <td>Item 2</td> </tr>
   <tr> <td>Item 3</td> </tr>
   <tr class="sub-title">
     <td>Sub Title 2</td>
   </tr>
   <tr> <td>Item 4</td> </tr>
   <tr> <td>Item 5</td> </tr>
   <tr> <td>Item 6</td> </tr>
  </tbody>
</table> 
```

-

```
$('.sub-title').click( function() {
    $(this).parent().nextUntil('.sub-title').toggle();
}) 
```

它似乎不起作用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:13:41.903

您必须手动切换：

```
$(".sub-title").on("click",function() {
    $(this).nextUntil(".sub-title").each(function() {
        this.style.display = this.style.display == "none" ? "" : "none";
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T01:15:32.730

nextUntil 选择兄弟姐妹，而不是孩子。从您的通话中删除“父母”。

编辑以回答有关基于类排除某些行的进一步问题。显然，您还可以适应 Kolink 关于防止切换的“显示：块”覆盖默认的“显示：表行”的响应，但只要您在所有支持的浏览器中进行测试，我认为使用切换没有任何问题。

```
$('.sub-title').click( function() {
   $(this).nextUntil('.sub-title').each(function() {
        if (!$(this).hasClass('order')) 
            $(this).toggle();
    });
}); 
```

# xna - XNA - 如何确定哪个窗口有焦点？

> ID：11856171
> 
> 赞同：4
> 
> 时间：2012-08-08T00:49:00.003
> 
> 标签：xna

我正在考虑为 Windows 编写一个 XNA 游戏。它将具有主游戏窗口和另一个 WPF 表单，其中包含一些聊天控件或调试信息。当我在这个辅助表单中输入内容时，显然我不想让 XNA 主窗口看到我输入的内容。

做这个的最好方式是什么？我想如果我能确定辅助窗口是否有焦点，我可以忽略游戏循环中的任何击键。但在 XNA 中做出这样的决定并不明显。这是怎么做到的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T10:10:47.083

在响应任何输入更改之前检查`Game.IsActive`( [MSDN )。](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.game.isactive.aspx)

# wcf - 身份验证：通过 API 进行 facebook 身份验证

> ID：11856175
> 
> 赞同：0
> 
> 时间：2012-08-08T00:49:41.277
> 
> 标签：wcf, facebook-graph-api, facebook-c#-sdk

我们可以通过 API 向 facebook 进行身份验证，而不是通过提示输入凭据的用户界面吗？

由于 facebook 正在关闭/删除 Offline_Access 权限，有什么方法可以使用 App 登录吗？我打算使用 Facebook C# SDK v 6.0。

换句话说，如何使用 Facebook C# SDK V 6 作为应用程序进行身份验证。

我在 facebook [http://developers.facebook.com/docs/authentication/applications/上找到了这个文档](http://developers.facebook.com/docs/authentication/applications/)

我想使用应用程序身份验证，然后使用图形 api explorer 发布到已经授予应用程序“manage_pages，publish_Stream”权限的页面。

# android - 如何在团队开发环境中使 Android SDK 保持最新？

> ID：11856184
> 
> 赞同：2
> 
> 时间：2012-08-08T00:50:09.710
> 
> 标签：android, sdk

我在一个使用 Android 的开发人员团队中工作。

我们每个人都通过 Android SDK Manager 手动更新我们的 SDK。

对我来说，这似乎有点矫枉过正。我们每个人都通过将更新下载到我们自己的本地计算机来更新 SDK。

有一个更好的方法吗？有人谈到在本地服务器上存储最新版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T01:06:02.750

```
android update sdk --no-ui -s --filter platform,tool,platform-tool 
```

每次启动机器时，您都可以执行这样的命令；该`android`命令还有其他几个选项，请随时运行`android --help`以查看所有可用选项。

# html - Color not changing during :hover

> ID：11856186
> 
> 赞同：0
> 
> 时间：2012-08-08T00:50:19.123
> 
> 标签：html, css, colors, hover

The color doesn't change when I hover. I don't get what is wrong! I tried changing the hover code to underline and it worked. It just does not work for color. I also don't think it is the main css of the page because link color changes work fine in other links.

CSS:

```
.cssmenu{
    border:0px;
    padding:0px;
    font-size:16px;
    font-weight:bold;
    position:absolute;
    top: 7px;
    width:100%;
}
.cssmenu ul{
    position:relative;
    left: 50%;
    height:35px;
    list-style:none;
    margin:0;
    padding:0;
    text-align: right;
}
.cssmenu li{
    float:left;
    padding:0px;
    }
.cssmenu li a{
    font-weight:normal;
    line-height:35px;
    text-decoration:none;
    margin:0px;
    padding:0px 25px;
    text-align:center;
    font-size: 18px;
    transition:color 0.5s;
    -moz-transition:color 0.5s; /* Firefox 4 */
    -webkit-transition:color 0.5s; /* Safari and Chrome */
    -o-transition:color 0.5s; /* Opera */
    }
.cssmenu li a:hover {
    color:#39F;
    } 
```

HTML:

```
<div class="cssmenu">
<ul>
   <li><a href='index.html'><span>Home</span></a></li>
   <li><a href='about.html'><span>About</span></a></li>
   <li><a href='products.html'><span>Products</span></a></li>
   <li><a href='contact.html'><span>Contact Us</span></a></li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T00:57:15.240

同意格雷格。适用于 Safari、FF 和 chrome。代码看起来不错。问题可能与颜色选择有关。还打开 FF 并使用 Firebug 检查悬停是否以您知道的方式应用。由于这是一段代码，您可能有另一个 css 规则冲突。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T01:00:40.570

如评论中所述，颜色太接近原始颜色。

如果你想要那种特定的颜色，你可以让字体加粗，或者增加字体的大小。您还可以添加背景。

[http://jsfiddle.net/thundercracker/4Q8qu/5/](http://jsfiddle.net/thundercracker/4Q8qu/5/)

编辑：还有一件事，由于淡入淡出过渡，颜色的变化甚至比平时更不明显。人类被设计为捕捉对比和快速变化。如果你想让它引人注目，你想增加对比度。动画的速度，使颜色差异更大，或者添加另一种效果，例如有人悬停时出现的下划线或背景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T06:59:43.283

```
.cssmenu li a{} 
```

在这个类中没有定义颜色属性，所以可能只是因为其他一些类的 a 和 a:hover 的颜色相似。因此，如果您想使用颜色过渡，请为 a 和 a:hover 选择两种不同的颜色

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T00:24:11.417

感谢大家的帮助。我意识到这是因为我将网页中的所有文字都更改为白色。我不知道为什么这会阻止链接改变颜色，但至少我的问题得到了解决。

# django - MEDIA_URL 在 Django 1.4 中为空

> ID：11856188
> 
> 赞同：1
> 
> 时间：2012-08-08T00:50:43.853
> 
> 标签：django

我已阅读[Django {{ MEDIA_URL }} 空白](https://stackoverflow.com/questions/3756841/django-media-url-blank)以及[如何在 Django 模板中包含图像文件？](https://stackoverflow.com/questions/901551/how-do-i-include-image-files-in-django-templates)问题但错误仍然存​​在：MEDIA_URL 在模板中为空。

我的代码：settings.py：

```
MEDIA_ROOT = "D:/blizzard/Projects/Python/Web/moz455/app/media" # or os.path.join(SiteDir, "app/media")
MEDIA_URL = '/media/'
STATIC_ROOT = 'F:/Soft/Python26/Lib/site-packages/django/contrib/admin/static'
STATIC_URL = '/static/' 
```

视图.py：

```
def gallery(request):
    ResponseDict = {}
    return render_to_response('gallery.html', ResponseDict, 
    context_instance = RequestContext(request)) 
```

网址.py：

```
urlpatterns = patterns('',
    (r'^gallery/', gallery),
    (r'^media/(?P<path>.*)$', 'django.views.static.serve',
                 {'document_root': settings.MEDIA_ROOT}),
) + static(settings.MEDIA_URL, document_root = settings.MEDIA_ROOT) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T10:34:09.820

确保您已包含`django.core.context_processors.media`在您的`TEMPLATE_CONTEXT_PROCESSORS`：

```
TEMPLATE_CONTEXT_PROCESSORS = (
...
"django.core.context_processors.media",
...
) 
```

# ruby-on-rails - Rails 服务器在使用工头启动时挂起

> ID：11856189
> 
> 赞同：1
> 
> 时间：2012-08-08T00:50:46.503
> 
> 标签：ruby-on-rails, ruby-on-rails-3, delayed-job, foreman

这是我的 Procfile 的样子：

```
web: bundle exec rails server thin -p $PORT -e $RACK_ENV
worker: bundle exec rake jobs:work 
```

我打算添加一个工作进程，因为我希望运行一些后台作业。我正在遵循[这些](https://devcenter.heroku.com/articles/delayed-job)说明

这是我注意到的：

*   如果单独启动worker，则不会遇到任何问题。
*   当我在 Procfile 中保留第二行并且不更改任何其他内容时，rails 服务器会处理几个请求并在此之后挂起
*   如前所述[，](https://github.com/ddollar/foreman/wiki/Missing-Output)我已添加`STDOUT.sync = true`到 config/environments/development.rb 并在 rails 控制台中验证了相同的内容。不工作。
*   跟踪 log/development.log 并将其与 foreman 输出到 shell 的内容进行比较，发现两者都匹配了几个请求，然后 foreman 停止将内容打印到 shell - 然后下一个请求将挂起
*   [我使用这里](https://github.com/ddollar/foreman)提到的 foreman.pkg 更新了工头，并使用 [6] 进行了相同的验证
*   [这里](https://stackoverflow.com/a/11360806/724516)提到这可能是由于一个杂散的调试语句引起的。我没有使用调试器，并且我的 Gemfile.lock 中没有 pry gem 或 ruby​​-debug gem
*   我相信这些症状类似于这个相关的未回答[问题](https://stackoverflow.com/questions/11359940/rails-foreman-worker-hangs-server)

请帮忙！

[6]：

```
which foreman
/usr/bin/foreman
ls -lah /usr/bin/foreman  # checked the updated date 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:27:33.067

在这里跟踪和解决：

[https://github.com/ddollar/foreman/issues/244](https://github.com/ddollar/foreman/issues/244)

TL;DR：安装 gem，不要使用 foreman.pkg

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T16:09:15.023

如果你使用 Heroku，我会补充一点，heroku 工具带中包含的工头版本也有同样的问题。

改用你能得到的那个`gem install foreman`。

# matlab - 图像中的邻域半径

> ID：11856192
> 
> 赞同：3
> 
> 时间：2012-08-08T00:51:26.513
> 
> 标签：matlab, image-processing

我有一张图像 (200x200) 并希望在具有预定义半径的特定点中找到邻域位置。例如，半径为 5，我在一个点周围有 25 个点。MATLAB能做到吗？问题在于图像的边缘并不总是 25 个点，程序应该只找到该半径内的点。这些点可以从 1（角落）到 25（图像中心）变化

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T01:17:52.447

这是一个例子：

```
%# sample grayscale image
img = imread('cameraman.tif');
[imgH,imgW,~] = size(img);

%# circle params
t = linspace(0, 2*pi, 50);   %# approximate circle with 50 points
r = 80;                      %# radius
c = [100 130];               %# center

%# get circular mask
BW = poly2mask(r*cos(t)+c(1), r*sin(t)+c(2), imgH, imgW);

%# show cropped image
imshow( immultiply(img,BW) )
axis on 
```

![截屏](../Images/f99a57a106f265ff1c32a9e7e9bad4b3.png)

这将很好地处理边缘情况。使用 POLY2MASK 的优点是它以亚像素精度计算掩码（请阅读函数文档中的算法部分），前提是您使用了足够多的点来逼近圆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T16:52:54.067

在评论中的讨论之后，我正在添加另一个解决方案。对于给定的点，我们计算指定步数内的相邻点（半径，如果你愿意的话）。这在 2D 和 3D 情况下都显示。

# 二维矩阵

```
siz = [10 15];                         %# matrix size
p = [5 10];                            %# 2D point location

%# neighboring points
k = 2;                                 %# radius size
[sx,sy] = ndgrid(-k:k,-k:k);           %# steps to get to neighbors
xy = bsxfun(@plus, p, [sx(:) sy(:)]);  %# add shift
xy = bsxfun(@min, max(xy,1), siz);     %# clamp coordinates within range
xy = unique(xy,'rows');                %# remove duplicates
xy(ismember(xy,p,'rows'),:) = [];      %# remove point itself

%# show solution
figure
line(p(1), p(2), 'Color','r', ...
    'LineStyle','none', 'Marker','.', 'MarkerSize',50)
line(xy(:,1), xy(:,2), 'Color','b', ...
    'LineStyle','none', 'Marker','.', 'MarkerSize',20)
grid on, box on, axis equal
axis([1 siz(1) 1 siz(2)])
xlabel x, ylabel y 
```

![screenshot_2D_matrix](../Images/ad416142964fef2916dfcf08b34006b2.png)

* * *

# 3D矩阵

```
siz = [10 15 8];                              %# matrix size
p = [5 10 4];                                 %# 3D point location

%# neighboring points
k = 2;                                        %# radius size
[sx,sy,sz] = ndgrid(-k:k,-k:k,-k:k);          %# steps to get to neighbors
xyz = bsxfun(@plus, p, [sx(:) sy(:) sz(:)]);  %# add shift
xyz = bsxfun(@min, max(xyz,1), siz);          %# clamp coordinates within range
xyz = unique(xyz,'rows');                     %# remove duplicates
xyz(ismember(xyz,p,'rows'),:) = [];           %# remove point itself

%# show solution
figure
line(p(1), p(2), p(3), 'Color','r', ...
    'LineStyle','none', 'Marker','.', 'MarkerSize',50)
line(xyz(:,1), xyz(:,2), xyz(:,3), 'Color','b', ...
    'LineStyle','none', 'Marker','.', 'MarkerSize',20)
view(3), grid on, box on, axis equal
axis([1 siz(1) 1 siz(2) 1 siz(3)])
xlabel x, ylabel y, zlabel z 
```

![screenshot_3D_matrix](../Images/94a3432f3bbb9b3279ecf98ae767a122.png)

高温高压

# zend-framework - 基于会话的表zend框架

> ID：11856203
> 
> 赞同：2
> 
> 时间：2012-08-08T00:52:56.233
> 
> 标签：zend-framework

我可以知道如何使用 Zend Framework 创建基于会话的表吗？这是因为我需要为我的大学项目开发​​一个购物车。

谁能帮我解决这个问题？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:11:02.243

ZF 中有一个组件用于在数据库中存储会话，参见： http: [//framework.zend.com/manual/en/zend.session.savehandler.dbtable.html](http://framework.zend.com/manual/en/zend.session.savehandler.dbtable.html)

完成该设置后，您只需`Zend_Session_Namespace`像往常一样将购物车数据存储在会话中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:29:36.240

您可能想要拥有“虚拟桌子”，理想情况下我们将其用于购物车。将会话结构化为表格，这有点混乱吗？

无论如何，代码应该是：

```
$DBconfig = $this->getAdapter()->getConfig();
$db = Zend_Db::factory('PDO_MYSQL', $DBconfig);
$sql = "CREATE TEMPORARY TABLE virtual_table ("`id` INT(11) NOT NULL AUTO_INCREMENT,
`product` VARCHAR(255), `productQty` INT(5) )";
// Setting values
$sql = "INSERT INTO virtual_table "...... 
```

等等...

结果可以使用[Zend_Session_Namespace存储在 Sessions 中](http://framework.zend.com/manual/en/zend.session.advanced_usage.html)

[这是一篇](http://morgandavison.com/2011/06/temporary-tables-in-zend-framework/)精彩文章的链接，作为 ZF 的初学者，您可能想参考这篇文章？

# debugging - 能够从进程 ID 识别进程身份的最佳 erlang 方法是什么？

> ID：11856204
> 
> 赞同：5
> 
> 时间：2012-08-08T00:52:58.273
> 
> 标签：debugging, erlang, process, ets, process-dictionary

当我调试时，我通常会查看大约 5000 个进程，每个进程可能是大约 100 个 gen_servers、fsms 等中的一个。如果我想知道 erlang 进程是什么，我可以这样做：

```
process_info(pid(0,1,0), initial_call). 
```

并得到如下结果：

```
{initial_call,{proc_lib,init_p,5}} 
```

...这几乎是无用的。

最近，我想到了一个想法（振作起来），用一个名字来注册每个进程，这个名字告诉我这个进程代表了谁。例如，player_1150 是代表玩家 1150 的玩家进程。是的，我最终在一周的运行过程中生成了几百万个原子。（当我的系统在未使用大约 8GB 的​​实际内存的情况下运行时，我很想听到关于将限制提高到 10,000,000 个原子的缺点的评论，如果有的话。）这样做意味着我可以在实时系统的控制台上，查询所有进程的消息队列有多长时间，找到最严重的违规者，然后检查这些进程是否已注册并打印出它们注册的原子。

我遇到了一个障碍：我正在将进程从一个节点移动到另一个节点。现在一个玩家进程可以有3个不同的名字；player_1158、player_1158_deprecating、player_1158_replacement。而且我必须确保我以精确的时间注册和取消注册这些名称，以确保始终命名一个进程并且始终存在适当的名称，并且我不会尝试注册某个垂死的进程已经拥有的名称. 有一些空间，因为这仅用于实时系统的控制台调试尽管如此，当我开始感觉这种机制正在影响我开发系统的方式（移动进程的系统）的那一刻，我觉得是时候了做点别的。

我现在有两个想法。将进程 ID 与其描述相关联的 ets 表：

```
ets:insert(self(), {player, 1158}). 
```

我不太喜欢那个，因为我必须手动保持桌子清洁。当玩家退出（或崩溃）时，有人负责确保从 ets 表中删除他的数据。

第二种选择是使用进程字典，存储类似的信息。当我对实时系统的探索让我想知道进程是谁时，我可以使用 process_info 查看他的进程字典。

我意识到这些解决方案中没有一个在功能上是干净的，但鉴于系统本身从来都不是这些数据的消费者，我并不太担心。我需要某些调试工具来快速轻松地工作，因此所描述的行为不值得商榷。是否有任何令人信服的论点可以采用这种或另一种方式（除了学术上的“不要使用*_*，这是邪恶的”罐头垃圾？）我很乐意听到其他建议和他们的理由。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:53:14.417

你应该试试[gproc](https://github.com/uwiger/gproc/)，它是一个非常方便的保存进程元数据的应用程序。

一个进程可以用多个名称注册，您可以将任意属性关联到一个进程（其中键和值可以是任何 erlang 术语）。gproc 还会监视已注册的进程，并在它们崩溃时自动取消注册它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T02:07:16.123

如果您在`gen_server`s 和`gen_fsm`s 仍在运行时对其进行调试，我将为`handle_info`这些行为实现功能。当您向每个进程发送一个`{get_info, ReplyPid}`元组时，所讨论的进程可以发回一个描述其自身状态、状态等的术语。这样您就不必在进程本身之外跟踪这些信息。

* * *

Isac 提到已经[有一种内置的方法可以做到这一点](https://stackoverflow.com/questions/4254070/getting-gen-server-gen-fsm-state-for-debugging)

# python - python中的多元（多项式）最佳拟合曲线？

> ID：11856206
> 
> 赞同：21
> 
> 时间：2012-08-08T00:53:07.157
> 
> 标签：python, matplotlib, machine-learning, regression, scatter-plot

如何在 python 中计算最佳拟合线，然后将其绘制在 matplotlib 的散点图上？

我是我使用普通最小二乘回归计算线性最佳拟合线，如下所示：

```
from sklearn import linear_model
clf = linear_model.LinearRegression()
x = [[t.x1,t.x2,t.x3,t.x4,t.x5] for t in self.trainingTexts]
y = [t.human_rating for t in self.trainingTexts]
clf.fit(x,y)
regress_coefs = clf.coef_
regress_intercept = clf.intercept_ 
```

这是多变量的（每种情况都有许多 x 值）。因此，X 是列表列表，y 是单个列表。例如：

```
x = [[1,2,3,4,5], [2,2,4,4,5], [2,2,4,4,1]] 
y = [1,2,3,4,5] 
```

但是如何使用高阶多项式函数来做到这一点。例如，不仅是线性的（x 的 M=1 次方），还有二项式（x 的 M=2 次方）、二次方（x 的 M=4 次方）等等。例如，如何从以下获得最佳拟合曲线？

*摘自 Christopher Bishops 的《模式识别与机器学习》，第 7 页：*

![摘自克里斯托弗·毕晓普斯的](../Images/356d5676d3c5b5c96cc2b34383dabb2d.png)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-08T01:26:40.323

[这个问题](https://stackoverflow.com/questions/10988082/multivariate-polynomial-regression-with-numpy)的公认答案 提供**[了一个小的多多边形拟合库](https://github.com/mrocklin/multipolyfit)**，它将完全满足您使用 numpy 的需要，您可以将结果插入到绘图中，如下所述。

您只需将 x 和 y 点数组以及所需的拟合度（顺序）传入`multipolyfit`. 这将返回您可以使用 numpy 的 polyval 进行绘图的系数。

**注意：**下面的代码已被修改为进行多元拟合，但绘图图像是早期非多元答案的一部分。

```
import numpy
import matplotlib.pyplot as plt
import multipolyfit as mpf

data = [[1,1],[4,3],[8,3],[11,4],[10,7],[15,11],[16,12]]
x, y = zip(*data)
plt.plot(x, y, 'kx')

stacked_x = numpy.array([x,x+1,x-1])
coeffs = mpf(stacked_x, y, deg) 
x2 = numpy.arange(min(x)-1, max(x)+1, .01) #use more points for a smoother plot
y2 = numpy.polyval(coeffs, x2) #Evaluates the polynomial for each x2 value
plt.plot(x2, y2, label="deg=3") 
```

![在此处输入图像描述](../Images/bcc53c01f9169bd59f552b2a3d447226.png)

* * *

**注意：**这是前面答案的一部分，如果您没有多变量数据，它仍然是相关的。而不是`coeffs = mpf(...`，使用`coeffs = numpy.polyfit(x,y,3)`

对于非多元数据集，最简单的方法可能是使用 numpy's [`polyfit`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.polyfit.html)：

> `numpy.polyfit(x, y, deg, rcond=None, full=False, w=None, cov=False)`
> 
> 最小二乘多项式拟合。
> 
> `p(x) = p[0] * x**deg + ... + p[deg]`将一个多项式拟合`deg`到 points `(x, y)`。返回最小化平方误差的系数 p 向量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-26T08:17:48.493

稍微脱离上下文，因为结果函数不是多项式，但也许仍然很有趣。多项式拟合的一个主要问题是[龙格现象](https://en.wikipedia.org/wiki/Runge%27s_phenomenon)：次数越高，发生的振荡就越剧烈。这也不仅仅是构建的，而且它会回来咬你。

作为补救措施，我不久前创建了[Smoothfit](https://github.com/nschloe/smoothfit)。它解决了一个适当的最小二乘问题并给出了很好的结果，例如：

```
import numpy as np
import matplotlib.pyplot as plt
import smoothfit

x = [1, 4, 8, 11, 10, 15, 16]
y = [1, 3, 3, 4, 7, 11, 12]
a = 0.0
b = 17.0
plt.plot(x, y, 'kx')

lmbda = 3.0  # controls the smoothness
n = 100
u =  smoothfit.fit1d(x, y, a, b, n, lmbda)

x = np.linspace(a, b, n)
vals = [u(xx) for xx in x]
plt.plot(x, vals, "-")
plt.show() 
```

[![在此处输入图像描述](../Images/5eb40ef5e8f0be31911e492b654822e0.png)](https://i.stack.imgur.com/PJjrM.png)

# ruby - 使用正则表达式匹配可变长度字符串

> ID：11856209
> 
> 赞同：1
> 
> 时间：2012-08-08T00:53:16.920
> 
> 标签：ruby, regex

我正在尝试编写一个匹配可变长度字符串的正则表达式，删除某些文本。以下是一些尝试实现的示例：

```
Equipment Changes: 2 - Mon Rose - Blinkers On;7 - Queen's Harbor - Blinkers On 
```

## 会产生

```
2 - Mon Rose - Blinkers On;7 - Queen's Harbor - Blinkers On 
```

上面的示例包括 2 次设备更改，但是可能有 1 到 12 次设备更改。我希望一个正则表达式可以处理所有情况。马的名字总是会随着设备类型的变化而变化（Blinkers On、Blinkers Off、Bar Shoe 等）

我可以匹配一个，但我对可变要求有困难。

我匹配一项设备更改的代码如下：

```
(Equipment Changes:)\s[\dA-Z]{1,2}\s-\s[A-Za-z\d]{1,18}\s-\s[A-Z]\s?[a-z]+\s[A-Za-z]+\s?[A-Za-z] 
```

这匹配一个设备更改。我希望能够 + 或 {1,12} 使其处理多个更改。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:11:31.490

如果您不想分离设备更改，这应该可行。（在冒号之前传递所有内容，然后获取字符串的其余部分。）

```
 .*:(.*\z) 
```

如果您试图将它们分开，您可以使用分号进行拆分。（在冒号之前传递所有内容，然后获取由分号分隔的字符串片段，最后一个片段在字符串结束时结束。）

```
 .*:(.*;)*(.*)\z 
```

# .net - Trying to iterate over the frames in a System.Drawing.Image, throws invalid parameter exception

> ID：11856210
> 
> 赞同：2
> 
> 时间：2012-08-08T00:53:35.363
> 
> 标签：.net, system.drawing

I'm trying to use Bar Code Recognition software and need to iterate over all the frames in a tiff file. I am confused on several points: 1) What is a frame, why does it have a guid and why do I need to iterate over frames? I can't seem to find a lot of documentation.

2) The code throws an invalid parameter exception after one iteration. I'm not sure why; logically, i cannot exceed the frame count, so not sure how it could be an invalid parameter, assuming that is the problem.

```
System.Drawing.Image img = System.Drawing.Image.FromStream(mems);
Guid guid = img.FrameDimensionsList[0];
FrameDimension dimension = new FrameDimension(guid);
int totalFrame = img.GetFrameCount(dimension);

foreach(int i =0; i < totalFrame; i++)
{   
    img.SelectActiveFrame(dimension, i);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T01:06:18.790

帧通常表示同一图像文件中的多个图像。例如，动画 GIF 在时间维度上有几个帧。一个图标在分辨率维度上可能有几个帧（即不同分辨率的不同图像）。

例如，此代码显示动画 GIF 中的所有帧（在 LinqPad 中）：

```
var image = Image.FromFile(path);
int frames = image.GetFrameCount(FrameDimension.Time);
for (int i = 0; i < frames; i++)
{
    image.SelectActiveFrame(FrameDimension.Time, i);
    image.Dump();
} 
```

在您的代码中，您从 中获取第一个元素`FrameDimensionList`，但不知道它代表哪个维度。尝试`FrameDimension.Page`改用（假设您需要遍历“页面”维度）。

# svn - 设置本地颠覆存储库的问题

> ID：11856211
> 
> 赞同：0
> 
> 时间：2012-08-08T00:53:47.297
> 
> 标签：svn, windows-7

我通过本[教程](http://www.codinghorror.com/blog/2008/04/setting-up-subversion-on-windows.html)在我的 Windows 7 笔记本电脑上设置颠覆，我成功地做到了。但是，我尝试为 Eclipse Indigo 添加 subclipse 客户端插件，但遇到了无法连接到存储库的问题。

因此，我卸载了所有内容，然后尝试重新安装。作为卸载过程的一部分，我使用“sc delete svnserver and sc delete SVNService”来删除 Windows 服务。

我成功运行了这个创建服务器命令： sc create svnserver binpath= "c:\svn\bin\svnserve.exe --service -rc:\svn\repository" displayname= "Subversion" depend= Tcpip start =自动

但是，现在当我尝试启动服务器时出现此错误： C:>net start svnserver**系统错误 2 发生**在命令行或尝试从 Windows 服务控制台启动时。

有谁知道如何解决这个问题？

后果：我认为根本问题是如何在安装失败后清理所有内容，但要使用不同的 svn 版本来解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:08:11.877

根据此链接，系统错误 2 错误是找不到文件错误。验证您的存储库路径。[http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382(v=vs.85).aspx)

这就是我的服务器创建语句的样子

```
sc create svnserve binpath= "\"C:\svn\bin\svnserve.exe\" --service -r C:\svn\fruvyRepository" displayname= "Subversion Server" depend= Tcpip start= auto 
```

注意 binpath。我不得不对路径周围的引号进行字符转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T17:14:00.490

我最终做的是删除硬盘驱动器上的所有 svn 文件，删除 subclipse、tortise、sillsvn，然后使用[此处](http://czetsuya-tech.blogspot.com/2009/10/setting-up-eclipse-subclipse-and-visual.html)的说明重新安装 VisualSVN 。

我先安装了 subclipse，然后安装了 VisualSVN，它对我有用，并且避免了我必须对原始教程中引用的其他 SVN 包执行的所有配置步骤。

# python - Python .exe 脚本需要 Windows GUI

> ID：11856219
> 
> 赞同：0
> 
> 时间：2012-08-08T00:54:51.093
> 
> 标签：python, windows, user-interface, button, exe

我编写了一个 py .exe 脚本，需要为它创建一个带有文件路径输入字段、“取消”和“确定”按钮的 GUI。我怎样才能最好地完成它？我需要将它与任何 C 库绑定吗？我知道我可以轻松创建基于 Web 的界面，但我不想要 Web 应用程序，我需要一个 .exe 应用程序。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:57:27.230

[wxPython](http://wxpython.org/)是我能想到的最好的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T00:58:01.673

对于这样一个简单的 GUI，Python 附带了一个内置库：[TkInter](http://wiki.python.org/moin/TkInter)。它有点难看，但它可能适合您的目的 - 不需要任何第三方，因此无需额外安装。如果您想要功能更全的东西，我建议您使用[PyQt](http://www.riverbankcomputing.co.uk/software/pyqt/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T01:46:12.403

查看窗口的easydialogs [http://www.averdevelopment.com/python/EasyDialogs.html](http://www.averdevelopment.com/python/EasyDialogs.html)

# web-services - Restful web service in java to power turn-based iOS and Android games

> ID：11856220
> 
> 赞同：3
> 
> 时间：2012-08-08T00:55:02.583
> 
> 标签：web-services, rest, multiplayer

I'm getting started with creating the back-end architecture to support a turn-based mobile game. Most of my research tells me that a stateless web server should work just fine, because the client is not always connected to the server.

My question is, how would I write the logic for GET requests. If I need a user to be updated when his or her opponent has made a move...do I keep doing GET requests every few seconds? Isn't it a big problem that the server is one-directional, as in the server can't notify the user when it is his/her move? Or am I overestimating it, and doing a GET requests every other second is perfectly fine?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:33:19.287

我认为你应该考虑使用 WebSockets：

[http://en.wikipedia.org/wiki/WebSocket](http://en.wikipedia.org/wiki/WebSocket)

即使您不使用浏览器，也可以使用 iOS 打开到使用端口 80 的套接字的连接（您不需要任何额外的规则）。WenSockets 为服务器提供了一种标准化的方式来向浏览器发送内容而无需客户端请求，并允许在保持连接打开的同时来回传递消息。

# iphone - Core-Data One-to-One Relationship, Save Not Working

> ID：11856221
> 
> 赞同：0
> 
> 时间：2012-08-08T00:55:10.427
> 
> 标签：iphone, ios, core-data, one-to-one

I’m missing the boat on something that I thought I had the hang of and was hoping someone here could help.

I’m using Xcode version 4.4 and my project is using Core Data, Storyboards and ARC.

My project has the following 3 entities.

![enter image description here](../Images/db8ba640e94863d278a1d9211a2b357a.png)

All works well with the Livestock and Notes entities. But when I try to save data to the Taxonomy entity nothing happens. I get no error but the data is not saved.

Is it ok that I not use an array for the fetched results? Based on my predicate, I’m expecting only one object to be returned so I thought I didn’t need an array. Below is my code that does the saving. I have verified that data is being passed in from the view's text variables.

```
AppDelegate *appDelegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];
NSManagedObjectContext *managedObjectContext = [appDelegate managedObjectContext];

NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

fetchRequest.entity = [NSEntityDescription entityForName:@"Livestock" inManagedObjectContext:managedObjectContext];

fetchRequest.predicate = [NSPredicate predicateWithFormat:@"tank == %@ AND type == %@ AND name == %@", self.detailTank, self.detailType, self.detailName];

NSError *error = nil;
Livestock *livestock = [[managedObjectContext executeFetchRequest:fetchRequest error:&error] lastObject];
if (error) {
    NSLog(@"TaxonViewController: saveTaxonomy: Retrieving Livestock Record for saving: error = %@", error);
}

Taxonomy *taxonomy = livestock.taxonChildren;

taxonomy.kingdom = self.kingdom.text;
taxonomy.phylum  = self.phylum.text;
taxonomy.classs  = self.classs.text;
taxonomy.order   = self.order.text;
taxonomy.family  = self.family.text;
taxonomy.genus   = self.genus.text;
taxonomy.species = self.species.text;
taxonomy.common  = self.common.text;
taxonomy.livestockParent = livestock;

error = nil;
if (![managedObjectContext save:&error]) {
    NSLog(@"Taxonomy save error. error = %@, userInfo = %@", error, [error userInfo]);
} 
```

Any insight is greatly appreciated! Thanks!

**UPDATE 1:**

Modified code to test for NULL taxonChildren value. This solved it for me. Thanks Jesse!

```
if (livestock.taxonChildren == NULL) {

    Taxonomy *taxonomy = [NSEntityDescription insertNewObjectForEntityForName:@"Taxonomy" inManagedObjectContext:managedObjectContext];

    taxonomy.kingdom = self.kingdom.text;
    taxonomy.phylum  = self.phylum.text;
    taxonomy.classs  = self.classs.text;
    taxonomy.order   = self.order.text;
    taxonomy.family  = self.family.text;
    taxonomy.genus   = self.genus.text;
    taxonomy.species = self.species.text;
    taxonomy.common  = self.common.text;
    taxonomy.livestockParent = livestock;
}
else {

    Taxonomy *taxonomy = livestock.taxonChildren;

    taxonomy.kingdom = self.kingdom.text;
    taxonomy.phylum  = self.phylum.text;
    taxonomy.classs  = self.classs.text;
    taxonomy.order   = self.order.text;
    taxonomy.family  = self.family.text;
    taxonomy.genus   = self.genus.text;
    taxonomy.species = self.species.text;
    taxonomy.common  = self.common.text;
    taxonomy.livestockParent = livestock;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:03:44.203

你的`livestock.taxonChildren`零吗？您必须先将该对象的一个​​实例插入到您的上下文中；它不会自动创建一个，即使是一对一的关系。

请注意，您不应该测试这样的错误：

```
if (error) { ... } 
```

因为`error`当获取请求成功时可能是垃圾。您应该改为测试返回值：

```
NSArray *results = [managedObjectContext executeFetchRequest...]
if (!results) { ... } 
```

# php - PHP函数后不显示HTML

> ID：11856227
> 
> 赞同：1
> 
> 时间：2012-08-08T00:55:41.717
> 
> 标签：php, html, function

我有一个页面在我的 PHP 代码之后不会显示我的 HTML 的下半部分。我可以让它显示的唯一方法是在*WHILE*循环的末尾放置一个*RETURN*，这也结束了循环。我知道这可能很简单，只需要找出它是什么。在此先感谢您的帮助。

 *的HTML：

```
<table border='0'>
 <thead>
     <tr>
        <th scope="cols">Select</th>
        <th scope="cols">Name</th>
        <th scope="cols">Units</th>
        <th scope="cols">Amounts</th>
        <th scope="cols">Calories</th>
        <th scope="cols">Sugars</th>
   </tr>
 </thead>
 <tbody>
    <?php 
         //Establishs the DB connection
         $sql = new Mysql();

         //Queries the Foods
         $sql->food();
      ?> <!--NOTHING SHOWS FROM HERE DOWN-->
  </tbody>    
</table>
<h2>Training Plan</h2>
<table id="dairy">
 <thead>
     <tr>
        <th scope="cols">Select</th>
        <th scope="cols">Name</th>
        <th scope="cols">Units</th>
        <th scope="cols">Amounts</th>
        <th scope="cols">Calories</th>
        <th scope="cols">Sugars</th>
     </tr>
     ...more HTML.... 
```

PHP函数：

```
function food() {
   //Query's the DB
   $result = $this->conn->query("SELECT * FROM ingredient")  or die(mysql_error());

   //Display's all of the Contents in the DB
   while ($row = $result->fetch_assoc() or die(mysql_error()))
   {
       echo'<tr class="normal" id="row'.$row['id'].'" onclick="onRow(this.id);">'."\n\t\t\t\t\t\t\t".'<td><input type="checkbox" value="'.$row['id'].'" id="checkbox" /></td>'."\n\t\t\t\t\t\t\t";
       echo'<td>'.$row['Name'].'</td>'."\n\t\t\t\t\t\t\t";
       echo'<td>'.$row['Units'].'</td>'."\n\t\t\t\t\t\t\t";
       echo'<td>'.$row['Amount'].'</td>'."\n\t\t\t\t\t\t\t";
       echo'<td>'.$row['Calories'].'</td>'."\n\t\t\t\t\t\t\t";
       echo'<td>'.$row['Sugar'].'</td>'."\n\t\t\t\t\t\t";
       echo'</tr>'."\n\t\t\t\t\t\t";
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:03:39.333

```
while ($row = $result->fetch_assoc() or die(mysql_error())) 
```

问题出在这一行，如果`$result->fetch_assoc()`在没有更多行时返回错误（我怀疑它确实如此），您的脚本将被停止。省略模具部分

```
while ($row = $result->fetch_assoc()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T00:57:06.120

它没有显示，因为你有一个错误。food 是 $sql 类的成员吗？*

# hadoop - Hadoop 基准测试：TestDFSIO

> ID：11856236
> 
> 赞同：0
> 
> 时间：2012-08-08T00:57:22.910
> 
> 标签：hadoop, hdfs

我正在使用 apache 提供的基准文件 TestDFSIO 测试我的 hadoop 配置。我正在根据本教程（资源 1）运行它：

[http://www.michael-noll.com/blog/2011/04/09/benchmarking-and-stress-testing-an-hadoop-cluster-with-terasort-testdfsio-nnbench-mrbench/#testdfsio](http://www.michael-noll.com/blog/2011/04/09/benchmarking-and-stress-testing-an-hadoop-cluster-with-terasort-testdfsio-nnbench-mrbench/#testdfsio)

测试的用法如下：

```
TestDFSIO.0.0.4
Usage: hadoop jar $HADOOP_HOME/hadoop-*test*.jar TestDFSIO 
           -read | -write | -clean 
           [-nrFiles N] [-fileSize MB]
           [-resFile resultFileName] [-bufferSize Bytes] 
```

我对一些标志有点困惑，具体来说，**缓冲区大小标志的用途是什么？**此外，在作业成功完成时导航 hdfs（我首先执行了写入 TestDFSIO），我找不到我应该通过选择 resultFileName 创建的文件名。**为什么我使用的 resultFileName 找不到文件？**

我也看过这个页面（资源 2）（特别是**第 25 页**）：

[http://wr.informatik.uni-hamburg.de/_media/research/labs/2009/2009-12-tien_duc_dinh-evaluierung_von_hadoop-report.pdf](http://wr.informatik.uni-hamburg.de/_media/research/labs/2009/2009-12-tien_duc_dinh-evaluierung_von_hadoop-report.pdf)

作为他们测试的参数之一，他们使用了 64MB 和 128MB 的块大小。我尝试在 bufferSize 标志之后放置“64MB”（转换为字节），但这导致工作失败，这让我相信我不明白 buffersize 标志的用途，以及如何使用不同的块大小进行测试。**您如何更改测试的块大小（根据资源 2）？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T21:10:47.707

**缓冲区大小标志有什么用？**

缓冲区大小标志以字节为单位描述写缓冲区的长度。[请参阅 TestDFSIO.java 中的WriteMapper](https://github.com/apache/hadoop-mapreduce/blob/trunk/src/test/mapred/org/apache/hadoop/fs/TestDFSIO.java)构造函数：

```
public WriteMapper() {
  for(int i=0; i < bufferSize; i++)
    buffer[i] = (byte)('0' + i % 50);
} 
```

在这里，数据在写入磁盘之前生成并写入内存中的缓冲区。稍后将其写入磁盘时，所有内容都是一步写入的，而不是每字节一步。更少的写入通常意味着更好的性能，因此更大的缓冲区可能会提高性能。

**为什么我使用的 resultFileName 找不到文件？**

结果通常会自动写入 /benchmarks/TestDFSIO。如果在那里找不到，请在工作日志中搜索 mapred.output.dir。

**您如何更改测试的块大小（根据资源 2）？**

块大小可以作为参数作为[通用选项](http://hadoop.apache.org/docs/r1.0.3/commands_manual.html#Generic+Options)传递。尝试类似：

```
hadoop jar $HADOOP_HOME/hadoop-*test*.jar TestDFSIO -D dfs.block.size=134217728 -write 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:42:48.777

**为什么我使用的 resultFileName 找不到文件？** 您可能应该在作业执行日志的末尾看到这样的一行：

```
java.io.FileNotFoundException: File does not exist: /benchmarks/TestDFSIO/io_write/part-00000 
```

在处理 TestDFSIO 时，它通常意味着使用 lzo 或其他压缩（因此文件名附加了额外的内容）。

所以不想找

```
/benchmarking/TestDFSIO/io_write/part-00000 
```

试试这个（见最后的 * 通配符）：

```
hadoop fs -ls /benchmarking/TestDFSIO/io_write/part-00000* 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-19T17:03:44.520

**试试这个问题（如何更改测试的块大小（根据资源 2）？**

`hadoop jar $_HADOOP_HOME/share/hadoop/mapreduce/hadoop-*test*.jar.jar TestDFSIO -write -nrFiles 4 -fileSize 250GB -resFile /tmp/TestDFSIOwrite.txt`

# objective-c - iOS/Objective C-来自 NSMutableURLRequest 的空响应

> ID：11856243
> 
> 赞同：0
> 
> 时间：2012-08-08T00:58:03.050
> 
> 标签：objective-c, ios

这段代码：

```
NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://www.cnn.com"]];

[req setHTTPMethod:@"GET"];

NSURLResponse *res;
NSError *err;
NSData *data = [NSURLConnection sendSynchronousRequest:req returningResponse:&res error:&err];
NSString *html  = [NSString stringWithUTF8String:[data bytes]];

NSLog(@"email adress is %@ and password is %@, response is %@, length is %i", self.boxEmail.text, self.boxPassword.text, html, data.length); 
```

为 显示空值`html`。出了什么问题？

NSLog'ing`data.description`产生：

```
<3c21444f 43545950 45204854 4d4c3e0a 3c68746d 6c206c61 6e673d22 656e2d55 53223e0a 3c686561 643e0a3c 
```

等等

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T01:19:03.843

您不能假设数据将被 NUL 终止，因此您不应该调用`stringWithUTF8String`. 使用以下内容：

```
NSString *html  = [[NSString alloc] initWithData:data 
                                        encoding:NSUTF8StringEncoding]; 
```

如果您使用 ARC 或：

```
NSString *html  = [[[NSString alloc] initWithData:data 
                                         encoding:NSUTF8StringEncoding] autorelease]; 
```

除此以外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T00:59:39.897

我通过复制和粘贴您的 html 代码得到以下信息：

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
<title>CNN.com - Breaking News, U.S., World, Weather, Entertainment &amp; Video News</title>
<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
<meta http-equiv="last-modified" content="2012-08-08T00:48:58Z"/>
<meta http-equiv="refresh" content="1800;url=http://www.cnn.com/?refresh=1"/>
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8"/>
<meta name="robots" content="index,follow"/>
<meta name="googlebot" content="noarchive"/>
<meta name="description" content="CNN.com delivers the latest breaking news and information on the latest top stories, weather, business, entertainment, politics, and more. For in-depth coverage, CNN.com provides special reports, video, audio, photo galleries, and interactive guides."/>
<meta name="keywords" content="CNN,CNN news,CNN.com,CNN TV,news,news online,breaking news,U.S. news,world news,weather,business,CNN Money,sports,politics,law,technology,entertainment,education,travel,health,special reports,autos,developing story,news video,CNN Intl"/>
<meta name="application-name" content="CNN"/>
<meta name="msapplication-tooltip" content="Breaking News, U.S., World, Weather, Entertainment and Video News"/>
<meta name="msapplication-task" content="name=News Pulse;action-uri=http://newspulse.cnn.com/;icon-uri=http://www.cnn.com/favicon.ie9.ico"/>
<meta name="msapplication-task" content="name=iReport;action-uri=http://ireport.cnn.com;icon-uri=http://ireport.cnn.com/favicon.ico"/>
<meta name="viewport" content="width=1024"/>
<meta property="fb:app_id" content="80401312489"/>
<meta property="fb:page_id" content="129343697106537"/>
<link href="http://www.cnn.com/" rel="canonical"/>
<link href="http://www.cnn.com/favicon.ie9.ico" rel="Shortcut Icon" type="image/x-icon"/>
<link href="/tools/search/cnncom.xml" rel="search" title="CNN.com" 
.
.
. 
```

# c# - Double.Parse("NaN") 是否正确解析？

> ID：11856245
> 
> 赞同：3
> 
> 时间：2012-08-08T00:58:19.103
> 
> 标签：c#, .net, double, nan

C# 是否`Double`正确解析“NaN”，即。有`Double.Parse("NaN").ToString() == "NaN"`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T00:59:40.693

尝试一下：

```
PS> $ic = [Globalization.CultureInfo]::InvariantCulture
PS> [double]::parse('NaN', $ic).ToString($ic)
NaN 
```

但是，此字符串的解析和输出取决于区域设置，因此要么确保您始终传递文化，要么不要对格式做出太多假设。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-08T01:03:58.867

```
var d = Double.Parse("NaN");
Console.WriteLine(d); // prints "NaN" 
```

我在 en-US 语言环境下运行。正如乔伊所说，要小心这个。当我指定不变的文化时，我得到了相同的结果（在这些情况下通常应该这样做）：

```
var d = Double.Parse("NaN", CultureInfo.InvariantCulture);
Console.WriteLine(d.ToString(CultureInfo.InvariantCulture)); // prints "NaN" 
```

# php - 程序 php/mysql 到面向对象的问题

> ID：11856248
> 
> 赞同：0
> 
> 时间：2012-08-08T00:58:49.477
> 
> 标签：php, mysql, oop

这是我试图以面向对象的形式编写的原始代码..

```
$posResult = mysql_query("SELECT MAX(position)+1 FROM todo");

        if(mysql_num_rows($posResult))
            list($position) = mysql_fetch_array($posResult); 
```

这就是我所在的位置......我想我需要 bind_result 吗？另外，我对 mysql_fetch_array 有疑问...

```
if($stmt = $this->HH->Database->prepare("SELECT MAX(position)+1 FROM todo")) {
        $stmt->execute();
        $stmt->store_result();

        if($stmt->num_rows != FALSE) {
            list($position) = mysql_fetch_array($posResult);
        }
    } 
```

有人可以建议如何纠正这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:08:59.960

看起来您正在转向 PDO，这很棒，它是一种更好的连接方式，但您仍在尝试使用一些`mysql_*`不起作用的旧命令。虽然有很多方法可以获取数据，但这是我最常用的方法：

```
if($stmt = $this->HH->Database->prepare("SELECT MAX(position)+1 FROM todo")) {
    $stmt->execute();

    $stmt->setFetchMode(PDO::FETCH_INTO, new yourClassName);
    foreach($stmt as $yourClassObject)
    {
        $someVar=$yourClassObject->QueryColumnName;
        // or
        $this->someProperty=$yourClassObject->QueryColumnName;
    }
    } 
```

我通常有一个与查询结果匹配的类，所以我使用`FETCH_INTO`但您可以使用不同的方法，例如返回索引数组、关联数组或其他方法。

# objective-c - 如果类名很长，则委托方法命名约定？

> ID：11856254
> 
> 赞同：0
> 
> 时间：2012-08-08T00:59:11.940
> 
> 标签：objective-c, methods, delegates, naming-conventions

我在方法命名方面遇到问题。我想遵循如下所示的方法命名格式`UITableViewDataSource`：

```
- (int)numberOfSectionsInTableView:(UITableView *)tableView; 
```

但我的类名比“UITableView”长得多——它`XYPagedContentScrollView`是`XY`项目的类前缀。我有一个委托协议：

```
@protocol XYPagedContentScrollViewDelegate <NSObject>
- (CGFloat)defaultPageHeightForPagedContentScrollView:(XYPagedContentScrollView *)pagedContentScrollView;
@end 
```

这个方法名看起来长得离谱。我知道这不是一个严格的规则，但我只是想知道有什么办法可以处理长名称并且仍然符合 Apple 的命名约定？就像是：

```
@protocol XYPagedContentScrollViewDelegate <NSObject>
- (CGFloat)defaultPageHeightForPagedContentScrollView:(XYPagedContentScrollView *)pagedContentSV;
@end 
```

甚至：

```
@protocol XYPagedContentScrollViewDelegate <NSObject>
- (CGFloat)defaultPageHeightForPCScrollView:(XYPagedContentScrollView *)pagedContentSV;
@end 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:07:20.740

方法的长度不受语言的任何限制，因此可以随意延长。

一开始它可能看起来很糟糕，但它越冗长，你以后发生冲突的可能性就越小。

我的规则是，如果它看起来可能与另一个方法冲突（特别是如果它是委托方法），它需要一个更长的名称。

现在，话虽如此，不要让名字长得离谱，这样它们的长度就是 100 个字符，就像这样：

```
-(void) fooBarViewController:(FooBarViewController *) controller didTapRightMarginAtPoint:(CGPoint point) ofPage:(NSUInteger) page lengthHeld:(NSTimeInterval) tapLength fingers:(NSUInteger) fingerCount; 
```

相反，请考虑将其包装在事件详细信息的字典中：

```
-(void fooBarViewController:(FooBarViewController *) controller didTapMargin:(NSDictionary *) eventDetails; 

/* eventDetails should contain the following information:
    which margin?
    touch location
    page index
    touch length
    finger count
 */ 
```

这简化了方法签名，并允许接收者只提取他们需要的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T01:13:51.233

就个人而言，我会选择长格式：这就是自动完成的用途。话虽如此，如果您确实想缩短它，我会放弃形容词。就像是：

```
@protocol XYPagedContentScrollViewDelegate <NSObject>
- (CGFloat)defaultPageHeightForScrollView:(XYPagedContentScrollView *)pagedContentSV;
@end 
```

我不会担心与委托方法的名称冲突，因为如果一个对象曾经是具有相同委托方法的两个不同对象的委托，那么它将使用传递的（即调用）对象来区分它们。（例如，如果您是两个滚动视图的代表，您只需测试传递的视图以找出它正在谈论的滚动视图。）

# java - 运行本地代码时强制 Java 具有只读权限

> ID：11856255
> 
> 赞同：3
> 
> 时间：2012-08-08T00:59:23.967
> 
> 标签：java, permissions, active-directory

我最近被提升为管理员，这意味着我的活动目录用户名获得了更多权限。因此，我现在有权读取/写入我们的服务器，这有点令人不安。

以前，如果我运行任何运行类似 的本地代码`my_remote_file.delete()`，那么它将忽略该方法。（嗯，从技术上讲，它会返回 false。）但是，由于我的活动目录用户名现在被授予我们服务器上的所有权限，Java 运行该本地代码没有问题，它实际上会影响我们的服务器。

我不想假设我在运行本地代码时总是小心翼翼，我想知道你们是否有任何想法可以仅在我在 Eclipse 中运行本地代码的情况下降低我的权限。换句话说，当我在 Eclipse 中运行任何本地代码时，我希望对所有服务器目录具有只读权限。

我想到的一个解决方案是简单地创建另一个用户，在活动目录中具有只读权限，但我认为维护两个帐户将来不会很好地扩展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T01:35:08.567

这不会完全“忽略”类似的方法`my_remote_file.delete()`，但如果您使用策略文件，它会让您更改一些权限。这将使您无法删除文件`/local/file`：

```
grant {
    permission java.io.FilePermission
    "/local/file", "read";
}; 
```

然后像这样调用它：

```
java -Djava.security.manager=default -Djava.security.policy=polfile YourEntryPointClass 
```

（你会在 Eclipse 中做类似的事情，可能在 VM 参数下）

或者，您可以创建自定义[SecurityManager](http://docs.oracle.com/javase/6/docs/api/java/lang/SecurityManager.html)并实现抛出 SecurityExceptions`checkDelete()`的`checkWrite()`方法。它可能会为您提供与在本地文件系统上物理更改权限类似的结果，而无需创建非特权用户。

# android - IndexOutOfBoundsException 使用 Robotium 设置 DatePicker

> ID：11856258
> 
> 赞同：1
> 
> 时间：2012-08-08T00:59:42.690
> 
> 标签：android, dialog, datepicker, robotium, indexoutofboundsexception

我确信有一个简单的解决方案，但我很难用它。我正在尝试使用 setDatePicker 方法更改 DateDialog 上的日期，但我不断收到索引越界错误

```
solo.clickOnButton(0);
solo.setDatePicker(0, year, month, day);
solo.clickOnButton("Set"); 
```

日期选择器是在 onCreateDialog 方法中创建的

```
 @Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case START_DATE_ID:
        return new DatePickerDialog(this, bDateSetListener, bYear, bMonth,
                bDay);
    case END_DATE_ID:
        return new DatePickerDialog(this, eDateSetListener, eYear, eMonth,
                eDay);
    }
    return null;
} 
```

我不断收到的错误是“无效的索引 0，大小 0”。我看不到一种可以存储 DatePickerDialog 并仅设置/获取值的方法。看来你只需要继续创建一个新的。我敢肯定有人有这个工作。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T02:56:28.347

你有没有初始化过bYear、bMonth、bDay？像这样，在调用 DIALOG_ID 之前

```
 final Calendar c = Calendar.getInstance();
    bYear = c.get(Calendar.YEAR);
    bMonth = c.get(Calendar.MONTH);
    bDay = c.get(Calendar.DAY_OF_MONTH); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:23:36.657

现在我一直在使用robotium，我发现它给你的错误并没有真正的帮助（或者在这种情况下，真正的问题）。我得到的错误实际上与设置 DatePicker 无关。在我的测试代码中，我结束了一个不是测试用例开始活动的活动，它在测试之外工作。在我注意到这一点后，我只是回到了开始活动和过去的测试......这个故事的寓意是 Robotium 错误不是很清楚，您应该寻找其他可能在您的应用程序或流程中出错的事情以减轻奇怪的错误。

# google-app-engine - 在 Appengine Datastore 中跟踪“跟踪”每日统计信息

> ID：11856261
> 
> 赞同：1
> 
> 时间：2012-08-08T00:59:54.733
> 
> 标签：google-app-engine

我正在尝试提供来自某个 Appengine 数据存储字段的 7 天跟踪统计信息。如果我的模型有一个整数字段“Foo”，我希望能够通过过去 7 天 Foo 的增加找到前 N 个模型。

我认为最好举例说明。假设我们有两个具有 Foo 字段的实体，并且我们每天在午夜对 Foo 的值进行采样：

```
Day       01 02 03 04 05 06 07 08 09 10 11 12 13
User1.Foo  1  2  3  4  5  6  7  8  9  8  7  6  5
User2.Foo 50 55 50 45 50 55 50 45 50 55 50 45 50 
```

我希望能够（每天）构建 7 天的增量：

```
Day       01 02 03 04 05 06 07 08 09 10 11 12 13
User1.FooDelta7d            6  6  6  4  2  0 -2
User2.FooDelta7d            0 -10 0  10 0 -10  0 
```

并且能够查询用户ORDER BY FooDelta7d。

我可以通过在每个用户上保留 7 个额外条目来解决这个问题，比如 Foo1 Foo2 Foo3 ... Foo7 并以一年中的一天为模 7 来决定在午夜写入哪个条目：

```
Day       01 02 03 04 05 06 07 08 09 10 11 12 13
User1.Foo  1  2  3  4  5  6  7  8  9  8  7  6  5
User1.Foo1 1  1  1  1  1  1  1  8  8  8  8  8  8
User1.Foo2    2  2  2  2  2  2  2  9  9  9  9  9
User1.Foo3       3  3  3  3  3  3  3  8  8  8  8
User1.Foo4          4  4  4  4  4  4  4  7  7  7
User1.Foo5             5  5  5  5  5  5  5  6  6
User1.Foo6                6  6  6  6  6  6  6  5
User1.Foo7                   7  7  7  7  7  7  7 
```

所以在（比如说）第 10 天，增量是 User1.Foo3 - User1.Foo4 = 8 - 4 = 4。这可行，但对我来说似乎真的很恶心，特别是因为这意味着我要跟踪的每个字段有 8 倍的存储空间。

有没有人有更好的主意？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:24:16.637

由于您需要每天滚动 7 天增量，因此您需要保留过去 7 天的所有数据。所以看起来你已经在做的是正确的方法。

为了减少“严重性”，您可能希望将 Foo1..Foo7 设为[列表属性](https://developers.google.com/appengine/docs/python/datastore/typesandpropertyclasses#ListPropertyhttp://)。

# android - 如何将可绘制对象缩放/剪辑到最大轴？

> ID：11856263
> 
> 赞同：0
> 
> 时间：2012-08-08T01:00:17.127
> 
> 标签：android, android-layout

我有一个方形可绘制图像（drawable-l 为 1280x1280），我希望它根据设备所在的方向（横向、纵向）进行裁剪。我希望图像始终居中，缩放以填充最大的一侧，并剪掉较小的一侧。

这可能吗？

编辑：

添加到下面的 Pramod J George 的回答中，如果您使用带有 scaleType:centerCrop 的 ImageView 并将其放在 FrameLayout 内的主布局旁边，这将完美地工作！

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="@string/background"
        android:scaleType="centerCrop"
        android:src="@drawable/background" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/logo"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:contentDescription="@string/logo"
            android:src="@drawable/logo" />

    </LinearLayout>

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T01:30:24.713

我认为这会有所帮助

[http://blog.andresteingress.com/2011/09/22/to-scale-or-not-to-scale/](http://blog.andresteingress.com/2011/09/22/to-scale-or-not-to-scale/)

# vb.net - 将时间转换为字符串格式 VB.net

> ID：11856267
> 
> 赞同：0
> 
> 时间：2012-08-08T01:00:47.493
> 
> 标签：vb.net

我正在尝试将日期格式化为特定字符串，并且代码返回不正确的结果。

`CDate(RDate).ToString("ddMMy")`

将年份返回为 2 位数字有没有办法让它返回正确的最后一位数字？我知道我可以使用子字符串来获得结果，但我想使用格式字符串来允许客户创建自己的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T01:28:07.327

只需将它们与 String.Format() 粘合在一起即可：

```
 Dim dt = CDate(RDate)
    Dim s = String.Format("{0}{1}", dt.ToString("ddMM"), dt.Year Mod 10) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T01:06:42.887

'y' 只是表示如果年份介于 0 和 9 之间，则要删除前导 0。没有格式可以仅获取年份的最后一位。

有关可用的自定义格式，请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T01:07:43.307

自定义格式年份格式仅限于返回至少 2 位数的年份，除非 Compentent_tech 提到您使用 y 并且年份以 00 到 09 结尾。您可以查看[MSDN 文档](http://msdn.microsoft.com/en-us/library/8kb3ddd4)。您将需要使用字符串操作来实现您想要的。

* * *

利用这个事实，你可以尝试这样的事情。

```
Dim RDate As Date = Now.Date
Dim NDate As Date = New Date((RDate.Year Mod 10), RDate.Month, RDate.Day)
CDate(NDate).ToString("ddMMy") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T04:03:50.770

试试这个代码：

```
Dim dt As DateTime = DateTime.Now

CDate(dt).ToString("ddMMyy").Remove(4, 1) 
```

此代码删除 2 位数年份值中的第一个。

# asp.net-mvc-3 - ASP.NET MVC 3 序列化为 JSON

> ID：11856268
> 
> 赞同：0
> 
> 时间：2012-08-08T01:00:56.763
> 
> 标签：asp.net-mvc-3, razor, json

我有一个`ICollection<T>`这样的 POCO：

```
public class SearchJsonModel
{
   public string label { get; set; }
   public string category { get; }
} 
```

在我的 Razor 视图中，我将其序列化如下：

```
<script type="text/javascript">
   var jsonArray = @Html.Raw(Json.Encode(Model));
</script> 
```

但输出是这样的：

```
var jsonArray = [
   {"category":"Names","label":"Joe"},
   {"category":"Names","label":"John"}
]; 
```

由于属性周围的引号引起了问题。

我需要访问每个 JSON 对象的属性，所以我希望它是这样的：

```
var jsonArray = [
   {category:"Names",label:"Joe"},
   {category:"Names",label:"John"}
]; 
```

这样我可以做这样的事情：

```
$.each(jsonArray, function(index, item) {
   var x = item.category;
}); 
```

我究竟做错了什么？我是否使用错误的方法进行编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T01:13:38.420

此 JSON 有效（在[JSONLINT](http://jsonlint.com/)中检查）。引号应该在那里。

您可以毫无问题地获得这样的类别值

```
$(function(){
   var data=[
   {"category":"Names","label":"Joe"},
   {"category":"Names","label":"John"}
];

    $.each(data,function(index,item){
          alert(item.category);
    });        

});​ 
```

示例[http://jsfiddle.net/DKnBh/](http://jsfiddle.net/DKnBh/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T01:08:36.743

这是标准 JSON，应该不会造成问题。

有关更多信息，请参见此处：[在 JSON 中，为什么要引用每个名称？](https://stackoverflow.com/questions/2067974/in-json-why-is-each-name-quoted).

# c# - 如果语句在提供警告消息框时效果不佳

> ID：11856269
> 
> 赞同：0
> 
> 时间：2012-08-08T01:01:18.620
> 
> 标签：c#, winforms

我对 C# 非常陌生，并且正在使用 Winforms 进行我的研究项目。下面的代码没有做它的工作。当我的richComResults (richTextBox) 为空时，我希望出现一个消息框并说“没有什么要清除的！”，但它没有说出来，它显示的是/否对话框。

请你能指出我的错误吗？您的意见将不胜感激。谢谢你。

```
private void btnComClearAll_Click(object sender, EventArgs e)
    {
        if (richComResults == null)
        {
            MessageBox.Show("There is nothing to be cleared!");
        }
        if (richComResults != null)
        {
            DialogResult dialogResult = MessageBox.Show("Are you sure you want to clear the results?", "Warning", MessageBoxButtons.YesNo);
            if (dialogResult == DialogResult.Yes)
            {
                richComResults.Clear();
            }
            else if (dialogResult == DialogResult.No)
            {
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T01:12:20.693

`richComResults`是你的`RichTextBox`控制，所以它可能不为空......你需要检查的是它的`Text`属性。它也可能不是 null，但它可能是空的（请记住，空字符串与 null 不同）。`string.IsNullOrEmpty`无论如何，您都可以用来测试这两种情况：

```
 if (string.IsNullOrEmpty(richComResults.Text))
    {
        MessageBox.Show("There is nothing to be cleared!");
    }
    else
    {
        ...
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T01:27:35.293

检查richtextbox是否为空的另一种方法

```
if (richComResults.Text== "")
            {
                MessageBox.Show("rich text box is empty");

            }
            else
            {
                MessageBox.Show("rich text box is not empty");
            } 
```

# javascript - 如何更改 Angular.js 中 $resource 返回的数据？

> ID：11856272
> 
> 赞同：18
> 
> 时间：2012-08-08T01:02:10.787
> 
> 标签：javascript, angularjs

我正在使用以这种格式返回 JSON 数据的 API：

```
{
    paging: {
        previous: null,
        next: null
},
    data: [
        { title: 'First Item' },
        { title: 'Second Item' },
        ...
    ]
} 
```

我正在使用 Angular 的[$resource](http://docs.angularjs.org/api/ngResource.$resource)服务来获取这些数据。
我的代码 - 位于控制器中 - 如下所示：

```
var Entity = $resource('/api/entities');
var entities = $scope.entities = Entity.get(); 
```

然后，在视图中，我可以像这样显示数据：

```
<ul>
  <li ng-repeat="entity in entities.data">{{entity.title}}</<li>
</ul> 
```

一切正常，但是：

*   我宁愿只`entities.data`向视图公开内容，而不是整个`entities`对象。如何拦截 GET 请求返回的数据以在填充**之前**`$scope.entities`对其进行修改？
*   相关问题：由于我正在获取一**组**数据，因此使用它`Entity.query()`而不是`Entity.get()`. 但是如果我`Entity.query()`在上面的代码中使用，我会收到一个错误“TypeError: Object # has no method 'push'”。这是有道理的，因为 API 返回的是对象而不是数组（因此，对象上没有“推送”方法）。同样，如果我可以`.data`从响应中提取属性，我将有一个数组。

根据Dan Boyon 的[这些指示](https://stackoverflow.com/a/11835877/1153681)，我设法自定义默认`$resource`服务并覆盖 .get() 或 .query() 方法，但我不确定从那里去哪里。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-08T02:07:05.763

我认为您不需要修改 get 或 query 默认值。只需使用成功回调来做你想做的事。它也应该更健壮。

```
Entity.get(
    {}, //params
    function (data) {   //success
        $scope.entities = data.data;
    },
    function (data) {   //failure
        //error handling goes here
    }); 
```

Html 也会更干净：

```
 <ul>
      <li ng-repeat="entity in entities">{{entity.title}}</<li>
 </ul> 
```

顺便说一句，我通常为我的资源声明服务，然后在需要时将它们注入到我的控制器中。

```
 myServices.factory('Entity', ['$resource', function ($resource) {
     return $resource('/api/entities', {}, {
     });
 }]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-06T18:24:51.307

您可以像这样使用响应转换器 (transformResponse)：

```
$resource('/api/entities', {}, {
        query: {
            method: 'GET',
            responseType: 'json',
            isArray: true,
            transformResponse: function (response) {
                return response.data;
            }
        }
    }); 
```

这段代码修改了“查询”方法的行为，你可以对“获取”做同样的事情......！

# sql - 使用 Python 正则表达式解析斜线和撇号

> ID：11856275
> 
> 赞同：0
> 
> 时间：2012-08-08T01:02:45.107
> 
> 标签：sql, regex

我正在尝试使用 Python 正则表达式库解析 Wikipedia SQL 转储。最终目标是将这个转储导入 PostgreSQL，但我知道字符串中的撇号需要事先加倍。

但是，此转储中字符串中的每个撇号前面都有一个反斜杠，我宁愿不删除反斜杠。

> (42,'Thirty_Years\'_War',33,5,0,0)

使用命令

```
re.match(".*?([\w]+?'[\w\s]+?).*?", line) 
```

当从文本文件中解析 'line' 时，我无法识别 'Thirty_Years\'_War' 中间的撇号。

作为比较，这些行在解析时工作正常（没有最后一行）。

> 该人的车
> 
> 人的车的汽油
> 
> 霍奇斯的哈布雷斯手册
> 
> '霍奇斯'哈布雷斯手册'
> 
> 港口人',1475,29,0,0),(42,'Thirty_Years\'_War',33,5,0,0)

正确和预期的输出（没有最后一行）：

> 人的车
> 
> 人的车的汽油
> 
> 霍奇斯的哈布雷斯手册
> 
> （'霍奇斯''哈布雷斯手册'）
> 
> 港口人',1475,29,0,0),(42,'Thirty_Years\'_War',33,5,0,0)

使用命令

```
re.match(".*?([\w\\]+?'[\w\s]+?).*?", line) 
```

打破它。

> 人的车
> 
> 人''''车''''汽油
> 
> 霍奇斯的哈布雷斯手册
> 
> (''''''''霍奇斯''''''''哈布雷斯手册'''''''')
> 
> 港口人''''''''''''''',1475,29,0,0),(42,''''''''''''''''Thirty_Years\'' ''''''''''''''_War''''''''''''''',33,5,0,0)

它是否陷入某种循环？要使用的正确正则表达式代码是什么？

我没有考虑 SQL 注入攻击，因为该脚本仅用于解析维基百科文章的转储（不包含 SQL 注入攻击的示例）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:10:06.243

如果转储包含您提供的字符串之类的内容，您可以尝试以下操作：

```
re.findall(r"[^,\(\)]+") 
```

其中字符类包含所有已知的分隔符。

编辑：只有在没有更好的方法时才使用正则表达式进行解析:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T01:08:24.003

大多数 Python 数据库接口都会为您处理引用 SQL 语句。例如，使用[psycopg](http://initd.org/psycopg/)驱动程序，您可以编写如下内容：

```
mystring="""This is 'a string' that contains single quotes."""
c.execute('INSERT INTO mytable (mycolumn) VALUES (%s)', mystring) 
```

...并且数据库驱动程序将负责为您正确引用值。查看[文档中的](http://initd.org/psycopg/docs/usage.html#passing-parameters-to-sql-queries)一些示例。事实上，他们的第一个例子与这个非常相似。

# html - 旋转锚文本？

> ID：11856286
> 
> 赞同：1
> 
> 时间：2012-08-08T01:04:48.943
> 
> 标签：html, css

我正在尝试旋转箭头使其面朝下，但不确定这是否可能

HTML

```
<a href="/test/">test <span id="rotate">&raquo;</span></a> 
```

CSS

```
span#rotate{ 
-webkit-transform: rotate(-90deg);
-moz-transform: rotate(-90deg);
-ms-transform: rotate(-90deg);
-o-transform: rotate(-90deg);
filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T01:50:39.953

如果你想保持元素的行为像它的内联跨度，但也想旋转它，那么你需要使用`display: inline-block;`它。这不会像`display: block;`自然那样强迫它换行。

这是正确的代码（jsFiddle：http: [//jsfiddle.net/joshnh/wZpP9/](http://jsfiddle.net/joshnh/wZpP9/)）：

```
span#rotate{
    display: inline-block;
    *display: inline; /* Used to get IE 6 & 7 to behave */
    zoom: 1; /* Used to get IE 6 & 7 to behave */
    -webkit-transform: rotate(90deg); 
       -moz-transform: rotate(90deg); 
        -ms-transform: rotate(90deg); 
         -o-transform: rotate(90deg);  
            transform: rotate(90deg);
               filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=0); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T01:25:34.440

您需要元素成为工作的`block`元素`rotate`。

尝试添加：

```
display:block;
width:10px;
height:10px; 
```

# java - 如何在 Java 中安全地停止和恢复线程？

> ID：11856287
> 
> 赞同：1
> 
> 时间：2012-08-08T01:04:54.313
> 
> 标签：java, multithreading, thread-safety

我有正在运行的线程，我想停止并稍后在某个时候恢复。我学会了不使用 stop() 等，因为这些已被弃用，并且在下面的代码中似乎成功地停止了线程。它只是退出运行方法。现在，我该如何重新启动它？如果我调用 start() 方法，它表示线程仍在运行，那么在这种情况下直接调用 run() 会做吗？它会引起任何问题吗？顺便说一句，这适用于 Android 应用程序，如果这有什么不同的话。

```
private volatile stopThread;

public void stopButton() {
    // this is called when button is clicked
    // and thread is already started and running
    stopThread= true;
}

public void run() {

    while (!stopThread) {
        // do something here
    }

    stopThread=false;
} 
```

编辑：它是一个在线程启动时启动的计时器，然后可以暂停并再次启动。所以 timer 是一个包含 Thread 对象的类（我已经用 SurfaceView 扩展了这个类）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T01:22:54.023

安全地停止和恢复线程的唯一安全方法是在线程主体的相关点添加代码来处理它。（不要使用已弃用的线程停止/暂停/恢复，因为它们根本不安全。）

停止而不恢复相对简单，使用特定于应用程序的标志或`Thread.interrupt()`机制。后者可能更好，因为 Java 的一些同步和 IO API 可以感知中断。但是，您确实遇到了许多现有库无法感知中断或无法`InterruptedException` 正确处理的问题。

停止恢复更棘手。您需要创建自己的类，如下所示：

```
public class PauseControl {
    private boolean needToPause;

    public synchronized void pausePoint() {
        while (needToPause) {
            wait();
        }
    }

    public synchronized void pause() {
        needToPause = true;
    }

    public synchronized void unpause() {
        needToPause = false;
        this.notifyAll();
    }
} 
```

`myPauseControl.pausePoint()`并在整个线程代码的相关点添加调用。请注意，这将不允许您暂停 IO 或“子”线程中的活动，并且它只会在您调用该`pausePoint`方法的代码中的点处暂停。此外，您还需要注意在线程锁定其他东西或其他东西等待它响应时暂停线程会造成问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T01:11:21.577

Java 1.4 文档解释了原因，并提供了各种已弃用的 Thread 方法的替代方案，包括使用`suspend()`and来代替。`resume()``wait()``notify()`

查找标题[我应该使用什么来代替 Thread.suspend 和 Thread.resume？](http://docs.oracle.com/javase/1.5.0/docs/guide/misc/threadPrimitiveDeprecation.html)大约在页面的一半。 

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-17T04:59:51.013

Thread 类的 stop() 方法已弃用且使用不安全，因为停止 Thread 会导致它解锁所有已锁定的监视器。这会产生破坏性后果，因为任何处于不一致状态的对象（以前受监视器保护）现在都可能被处于不一致状态的其他线程查看。这种行为可能很微妙且难以检测。

你永远不会直接调用 run() 方法，如果你使用 volatile 变量方法停止线程，线程就会终止。为了启动线程，再次执行 new Thread().start()。

# jquery - 费舍尔-耶茨洗牌。jQuery 包装的对象。

> ID：11856290
> 
> 赞同：0
> 
> 时间：2012-08-08T01:05:04.530
> 
> 标签：jquery, each, shuffle

抱歉，如果这个问题很愚蠢，我认为这不是因为我找不到直接的答案。我正在尝试实现标准的 Fisher-Yates shuffle，但是在**jQuery 包装的 DOM 元素数组上。** 即通常的“交换”算法。

这个想法是实施洗牌一副牌。

我最初的简单（但 hacky）解决方案：

1）为每个DOM元素分配一个索引属性，同时创建一个索引列表。

```
indices = [];
deck.each(function(i){
    $(this).attr('index',i);
    indices[i] = i;        
}); 
```

2) 打乱索引数组，

```
for(i=0;i<indices.length;i++){
    temp = indices[i]; 
    j = Math.floor((Math.random()*i));
    indices[i]=indices[j];
    indices[j]=temp; 
} 
```

并遍历它们，使用类似的东西，我不知道，说：

```
for(i=0;i<indices.length;i++){
     randomCard = $('[index='+indices[i]+']');
     //do amazing game-like things
} 
```

* * *

**但是......我讨厌这个解决方案，感觉非常hacky。我宁愿操纵包装好的套装。**

* * *

所以...

再一次，这里是 Fisher-Yates shuffle 的伪代码。

```
deck.each(function(i){ 
    temp = deck[i]; //except that I want deck[i] to be a **wrapped object**

    j = Math.floor((Math.random()*i));

    deck[i]=deck[j]; //and deck[j] should find a wrapped object in the 'elements' set with index j

    deck[j]=temp; //and this should perform the swap.

    alert("I can haz swapburgers!!!");  //yay.
}); 
```

我不明白如何做的部分是通过其索引设置 jQuery 包装对象中元素的值。我应该将索引和父元素传递给交换函数吗？就像是

```
swap($(this).parent(),i,j); 
```

如果有人可以帮我解决这个问题，我将不胜感激。我希望这一切都清楚。请让我知道它是否令人困惑，我会尽力澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:17:27.000

就交换而言，您似乎可以将 jquery 选择视为普通数组。

```
function swap(obj, index1, index2) {
    var temp = obj[index1];
    obj[index1] = obj[index2];
    obj[index2] = temp;
} 
```

# python - 使用整数的 Numpy 点积非常慢

> ID：11856293
> 
> 赞同：16
> 
> 时间：2012-08-08T01:05:16.493
> 
> 标签：python, floating-point, numpy, int, dot-product

抱歉这么多问题。我在 Intel core 2 Duo 上运行 Mac OSX 10.6。我正在为我的研究运行一些基准测试，但我遇到了另一件让我困惑的事情。

如果我跑

`python -mtimeit -s 'import numpy as np; a = np.random.randn(1e3,1e3)' 'np.dot(a,a)'`

我得到以下输出：`10 loops, best of 3: 142 msec per loop`

但是，如果我运行

`python -mtimeit -s 'import numpy as np; a = np.random.randint(10,size=1e6).reshape(1e3,1e3)' 'np.dot(a,a)'`

我得到以下输出：`10 loops, best of 3: 7.57 sec per loop`

然后我跑了

`python -mtimeit -s 'import numpy as np; a = np.random.randn(1e3,1e3)' 'a*a'`接着

`python -mtimeit -s 'import numpy as np; a = np.random.randint(10,size=1e6).reshape(1e3,1e3)' 'a*a'`

两者都以每个循环约 7.6 毫秒的速度运行，因此它不是乘法。添加也有相似的速度，所以这些都不应该影响点积，对吧？那么为什么使用整数计算点积比使用浮点数慢 50 倍以上呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-08T02:00:59.113

非常有趣，我很好奇它是如何实现的，所以我做了：

```
>>> import inspect
>>> import numpy as np
>>> inspect.getmodule(np.dot)
<module 'numpy.core._dotblas' from '/Library/Python/2.6/site-packages/numpy-1.6.1-py2.6-macosx-10.6-universal.egg/numpy/core/_dotblas.so'>
>>> 
```

所以它看起来像是在使用`BLAS`图书馆。

所以：

```
>>> help(np.core._dotblas) 
```

我从中找到了这个：

> 当 Numpy 使用 ATLAS 等加速 BLAS 构建时，这些函数将被替换以利用更快的实现。更快的实现只影响 float32、float64、complex64 和 complex128 数组。此外，BLAS API 仅包括矩阵-矩阵、矩阵-向量和向量-向量乘积。具有较大维度的数组的产品使用内置函数并且不加速。

所以看起来 ATLAS 微调了某些功能，但它只适用于某些数据类型，非常有趣。

所以是的，看起来我会更频繁地使用花车......

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-08T01:55:31.743

使用 int vs float 数据类型会导致执行不同的代码路径：

float 的堆栈跟踪如下所示：

```
(gdb) backtr
#0  0x007865a0 in dgemm_ () from /usr/lib/libblas.so.3gf
#1  0x007559d5 in cblas_dgemm () from /usr/lib/libblas.so.3gf
#2  0x00744108 in dotblas_matrixproduct (__NPY_UNUSED_TAGGEDdummy=0x0, args=(<numpy.ndarray at remote 0x85d9090>, <numpy.ndarray at remote 0x85d9090>), 
kwargs=0x0) at numpy/core/blasdot/_dotblas.c:798
#3  0x08088ba1 in PyEval_EvalFrameEx ()
... 
```

..而 int 的堆栈跟踪如下所示：

```
(gdb) backtr
#0  LONG_dot (ip1=0xb700a280 "\t", is1=4, ip2=0xb737dc64 "\a", is2=4000, op=0xb6496fc4 "", n=1000, __NPY_UNUSED_TAGGEDignore=0x85fa960)
at numpy/core/src/multiarray/arraytypes.c.src:3076
#1  0x00659d9d in PyArray_MatrixProduct2 (op1=<numpy.ndarray at remote 0x85dd628>, op2=<numpy.ndarray at remote 0x85dd628>, out=0x0)
at numpy/core/src/multiarray/multiarraymodule.c:847
#2  0x00742b93 in dotblas_matrixproduct (__NPY_UNUSED_TAGGEDdummy=0x0, args=(<numpy.ndarray at remote 0x85dd628>, <numpy.ndarray at remote 0x85dd628>), 
kwargs=0x0) at numpy/core/blasdot/_dotblas.c:254
#3  0x08088ba1 in PyEval_EvalFrameEx ()
... 
```

这两个调用都导致了 dotblas_matrixproduct，但似乎 float 调用保留在 BLAS 库中（可能访问一些优化良好的代码），而 int 调用被踢回 numpy 的 PyArray_MatrixProduct2。

所以这要么是一个错误，要么是 BLAS 只是不支持 matrixproduct 中的整数类型（这似乎不太可能）。

这是一个简单且便宜的解决方法：

```
af = a.astype(float)
np.dot(af, af).astype(int) 
```

# c# - Quartz .NET 作业执行以调用现有的类方法

> ID：11856294
> 
> 赞同：1
> 
> 时间：2012-08-08T01:05:19.663
> 
> 标签：c#, quartz.net

我有一个现有的 C# ASP.NET 应用程序，它带有一个用户界面和各种按钮来启动操作。这些动作对一个单例类进行同步方法调用，我将调用这个类ServiceLayer。该层还初始化数据模型。

我想安排 UI 中的一些操作在一天中的特定时间发生。我相信 Quartz.NET 提供了我需要的所有必要功能。我可以从每个 Job 类（即实现 IJob 接口的类）的 Execute(IJobExecutionContext context) 中成功调用单例类 ServiceLayer 上的方法。但是，出于以下几个原因，我不喜欢使用这种方法：

*   难以进行单元测试（例如，我必须确保在做任何事情之前初始化单例）
*   如果调用许多作业，则扩大规模
*   与同时在单例类上调用多个方法相关的线程安全问题。

我的问题是处理这种情况而不是直接在单例上调用方法的最佳设计模式是什么？我相信我需要以某种方式使用 JobDataMap 但我不确定如何。我应该关注生产者-消费者还是排队方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:23:10.300

您可能需要考虑实现一个自定义作业工厂，将您的服务层对象注入到作业中。已经为最流行的 DI 容器实现了自定义工厂，因此您可以使用其中之一或构建自己的工厂。这将允许您在每次创建作业时传递对服务层对象的引用，并且应该有助于单元测试。它还将解决单例问题。

就扩展而言，您可以使用 JobDataMap 传递连接字符串或服务器名称等内容，从而允许您在服务器之间进行负载平衡或分配工作。

如果您最终走这条路，这里有一些描述自定义作业工厂方法的[帖子。](http://jayvilalta.com/blog/tag/ijobfactory/)

# batch-file - 使用批处理文件查找具有部分匹配的完整文件名，然后移动它们

> ID：11856295
> 
> 赞同：1
> 
> 时间：2012-08-08T01:05:20.987
> 
> 标签：batch-file, windows-xp, find, dos, move

我需要一个批处理文件，它会在一个文件夹中找到一个名称中有一个设置变量的所有文件，然后将它们移动到另一个文件夹。这必须在 Windows XP 计算机上工作。

例子：

该文件夹有这些文件

```
abc123abc.pdf
efg123eft.pdf
hig456hig.pdf 
```

如果我们搜索包含“123”的文件名，那么它会将 abc123abc.pdf 和 efg123eft.pdf 移动到一个设置的文件夹中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T01:24:10.843

如果您想要其中包含`123`任何位置的名称：

```
move *123*.* c:\newfolder 
```

如果您希望`123`始终是第 4、第 5 和第 6 个字符：

```
move ???123*.* c:\newfolder 
```

如果您只想要`.pdf`具有`123`（上述任何一个匹配项）的文件：

```
move *123*.pdf c:\newfolder 
```

从批处理文件或直接从命令提示符工作。

`?`匹配单个字符，匹配`*`一个或多个。这些被称为`wildcard operators`或简称`wildcards`。

要查看通配符运算符的工作原理，请在您要使用的文件夹中打开一个命令（“DOS”）窗口，然后尝试（`dir`用于目录列表，并且不会损害任何尝试）：

```
dir *.*

dir *123*

dir *123*.pdf

dir ???123*.pdf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T01:23:38.267

不需要批处理文件 - 带有通配符的移动命令将自行完成：

```
move *123* c:\where\ever 
```

# cakephp - cakephp 视图从数据库中打印出相同的值

> ID：11856300
> 
> 赞同：0
> 
> 时间：2012-08-08T01:05:49.087
> 
> 标签：cakephp

创建了一个视图函数，每当我单击链接查看 a时，页面顶部的 url 是正确的，但它会在数据库中`template`吐出相同的列表。`fields`

字段是

```
accounts - id, company name, abn
template - id, name, description, account_id
field - id, name, field type, template_id

function view(){

    $accounts=$this->User->AccountsUser->find('list',
    array('fields'=>array('id', 'account_id'),
    'conditions' =>array('user_id' => 
    $this->Auth->user('id'))));

    $templates=$this->Template->find('first', 
    array('conditions' => array(
    'Template.account_id' => $accounts)));

    $fields=$this->Field->find('all', 
    array('conditions' => array(
    'Field.template_id' => Set::extract('/Template/id', $templates))));

    $this->set('template', $templates);
    $this->set('account', $accounts);
    $this->set('field', $fields);

} 
```

这是视图

```
 <div class = "conlinks">
    </br></br></br></br></br><h2>Here is your template fields</h2></br>
                    <?php foreach($field as $fields): ?>
                    <tr>
                    <td align='center'><?php echo $fields['Field']['name']; ?>
                    </tr></br>
                    <?php endforeach; ?>
</div> 
```

所以问题是它抓取完全相同的字段列表，而不是在`template_id`打印出字段时正确

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:29:15.497

您应该能够自己调试它。只需逐步缩小错误范围即可。

对于初学者，在您的视图函数中，对以下变量执行 print_r，并确保每个变量都包含一个逻辑结果：

*   $accounts

*   $模板

*   $字段

如果你在那里发现了意想不到的结果，我会查看你传递给每个发现的参数，并确保它们没问题。您将 $accounts 作为数组传递给您的查找条件 - 确保它与 cake 期望的格式相匹配。对 Set::extract('/Template/id', $templates) 执行相同的操作。

还请查看 Cake 正在生成的 SQL。

如果您还没有使用它，我强烈建议您安装 Cake 的调试工具栏 - [https://github.com/cakephp/debug_kit/](https://github.com/cakephp/debug_kit/)，因为它使调试变量和 SQL 变得更加容易。

如果您执行了上述步骤并且无法解决您的问题，您至少应该能够将其缩小到一两行代码。更新您的答案以显示导致问题的一两行，并包括您正在使用的一些变量的 print_r。这应该可以帮助 StackOverflow 上的其他人给你一个具体的答案。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T01:51:53.383

the issue was I wasn't getting the parameters when click the link

```
function view($name){

$fields = $this->Template->Field->find('list',array( 
          'fields'=> array('name'),
          'conditions' => array(
          'template_id'=> $name)));
$this->set('field', $fields);

} 
```

and the view

```
<div class = "conlinks">
        </br><h2>Here is your template fields</h2>

                        <?php foreach($field as $name): ?>
                        <tr>
                        <td align='center'>
                        <?php echo $name; ?>
                        </tr></br>
                        <?php endforeach; ?>
                        </br>

<?php
echo $this->Html->link('Back', '/templates/view', array('class' => 'button'));?>
    </div> 
```

# python - 在 distutils 中使用 F2py

> ID：11856302
> 
> 赞同：0
> 
> 时间：2012-08-08T01:05:56.400
> 
> 标签：python, fortran, f2py

我在 python 脚本中使用 fortran 程序，并尝试使用`setup.py`脚本构建和安装它，使用`numpy.distutils`. 但是，我不擅长知道如何链接各种代码文件，所以我想我会在这里问这个问题，希望有人能清楚地解释如何处理每种类型的文件。

让我解释一个假设的情况，它恰好与我自己的情况非常相似。我有两个包含一个模块的文件，每个文件都希望成为`.so`可在 python 中导入的文件。假设它们是`read.f90`（包含模块`read`）和`analyse.f90`（包含模块`analyse`）这两个模块都使用在另一个文件中定义的子例程，`subs.f90`我不断添加和更新。该模块`analyse`还依赖于`produce`文件中的另一个模块`produce.f90`，我可能会在开始时对其进行调整，但基本上我很可能会让它在此之后。此外，`analyse`还依赖于外部库`libfoo.a`。

完成这项工作有两层 - 首先，f90 文件中的`use`and`include`语句必须正确。其次，`setup.py`文件中的 Extension 配置必须正确。到目前为止，我知道如何让外部库工作 - 在模块`analyse`中 put`use foo`和 setup.py 中的 Extension 函数中，使用关键字

```
library_dirs = ["path/to/library"],
libraries = ["foo"],
include_dirs = ["path/to/directory/with/mod/files"] 
```

但是，对于其余部分，我不确定。我有一些工作，但它似乎不是最佳方式。其他部分根本不工作。我只是想知道是否有人可以清楚地解释该怎么做？

# html - IE9 和 Blogger 的 CSS 分层问题

> ID：11856308
> 
> 赞同：0
> 
> 时间：2012-08-08T01:06:15.417
> 
> 标签：html, css, z-index, blogger

我不确定这是否是我正在破解的 Blogger 模板的问题，或者我只是忘记了一个简单的 CSS 属性。

我正在为朋友制作一个模板，并试图在菜单栏 div 的右上角显示徽标，它在 Firefox 和 Chrome 中运行良好，但它在 IE9 中呈现在 div 后面。

这是演示的链接： [演示博客](http://thisisademoblogspot.blogspot.com/)

本质上，我所做的是创建了一个绝对定位的 div，其中包含一个内部图像：

```
<div id="logo2">
  <a href="">
    <img border="0" src="http://1.bp.blogspot.com/-lpZjzviYzAo/T7mNUvXY6QI/AAAAAAAAAcM/XwQS-bO0Hy4/s1600/lovek-hdr.png">
  </a>
</div> 
```

和相关的CSS：

```
#logo2 {
  position:absolute;
  top: -25px;
  right: -50px;
  z-index: 999;
} 
```

我认为绝对位置加上高 Z-index 的组合可以克服 IE 处理 z-index 的任何问题，但我错了。

我还尝试为菜单栏 div 添加位置（相对）和 z-index (1)，但无济于事。

* * *

根据@Dubious 的建议，我添加了以下内容但没有成功（图像仍被剪裁）：

```
.tabs-outer, .tabs-inner {
    <!-- [if ie 9]>
      z-index: -1;
    <![endif]>
    position: relative;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T01:18:12.617

*旧答案“尝试在菜单栏 div 中添加 -1 而不是 1 的 z-index”*

**编辑：**

好的，在 IE9 开发人员工具中进行了一些摆弄之后，我注意到您的源代码告诉 IE 以文档模式呈现页面：IE7 标准。如您所见，在打开开发工具（并确保开发工具框架处于活动状态）之后，您可以按 alt + 9 来渲染 css，因为它应该在 IE9 中渲染。发生这种情况后，内容将在任何当前浏览器中显示。

那么为什么使用 IE7 文档标准加载页面呢？那么您需要为每个页面使用正确的符合标准的 !DOCTYPE 指令。为此，只需阅读[此页面](http://msdn.microsoft.com/en-us/library/gg699338%28v=vs.85%29.aspx)并确保您的 html 文件遵循第一个示例。

**有条件的评论**

我应该给你一个更好的 IE 条件注释的例子，所以我会在这里更深入一点。IE 条件注释只能在 html 中定义，因为它使用`<!-->`的是 html 特定代码。因此，为了添加 ie7/ie9/ie 特定的 css，您需要`<link>`在注释字段中添加一个新的样式表，该样式表将具有 ie 特定的代码。进一步阅读[这里](http://www.quirksmode.org/css/condcom.html)。另请注意，由于您遇到的此问题是因为该页面正在呈现 IE7 怪癖模式 css，因此您可能需要使用 ie7 注释而不是 ie9。

我真的希望这能解决你的问题，祝你好运！

# ios - UISplitViewController 不会在横向模式下隐藏 masterViewController

> ID：11856312
> 
> 赞同：1
> 
> 时间：2012-08-08T01:06:38.410
> 
> 标签：ios, hide, uisplitviewcontroller

注意：在阅读这个问题之前，请注意我已经阅读了前面的问题，这些问题解释了苹果实现 UISplitViewController 的缺陷以及我应该如何使用开源的“MGSplitViewController”，因为简单地隐藏主视图控制器并不容易横向模式下的拆分视图控制器。请记住，我仅限于在 iOS 5.1 中使用普通的 UISplitViewController。

现在进入问题：

我有一个拆分视图控制器，左侧有表格视图（主视图），右侧有一个详细视图控制器。我正在使用导航控制器来控制左侧，这是一个表格视图，可以转换到另一个表格视图（“DataTableViewController”）。为了隐藏这个左侧，我在详细视图控制器的导航工具栏上放置了一个“隐藏”按钮。当按下隐藏按钮时，我更改了“_hideMaster”属性：

```
-(IBAction)hidePressed
{
    _hideMaster = !_hideMaster;
    // Must manually reset the delegate back to self in order to force call "shouldHideViewController"
    self.splitViewController.delegate = nil;
    self.spliteViewController.delegate = self;

} 
```

然后在 SplitViewController 委托中自动调用此方法：

```
// This is called when I change the delegate from nil back to self.
- (BOOL)splitViewController: (UISplitViewController*)svc shouldHideViewController: (UIViewController *)vc inOrientation:(UIInterfaceOrientation)orientation 
{
    return _hideMaster;
} 
```

当我调试它时，我可以看到一切都按计划进行，并且属性在进入方法时具有正确的值`splitViewController:shouldHideViewController:inOrientation:`

唯一的问题是什么都没有发生。我最左边的表格视图 ( `DataTableViewController`) 没有消失。仔细看，`(UIViewController *)vc`委托方法中的参数不是我要隐藏的表视图控制器，而是与此表视图关联的导航控制器。所以本质上它是在试图隐藏导航控制器——这显然不是我想要的......

如何使自动调用的委托方法 ( `shouldHideViewController:`) 中的 UIViewController 参数调用与该导航控制器关联的最顶层视图控制器？（毕竟，我想隐藏`DataTableViewController`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:58:27.910

这是我的处理方式。如果在返回的路上没有实例化 MasterViewController，可能需要做更多的工作才能重新出现。

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.30f];
[[self.splitViewController.viewControllers lastObject] view].frame = self.splitViewController.view.frame;
[UIView commitAnimations]; 
```

# windows - 行尾在编码中有何影响？

> ID：11856315
> 
> 赞同：0
> 
> 时间：2012-08-08T01:07:02.217
> 
> 标签：windows, linux, macos, unix, line-endings

为什么不同平台的行尾不同？甚至为什么编程中会有像行尾这样的术语？

我更喜欢以 Unix/Linux 格式保存我的代码，即使我在 Windows 上。我是否因为不以 Windows 或 MacOS 格式保存而遗漏了什么？行尾在编码中的效果如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:15:38.693

在早期，当打字机几乎是从计算机获取输出的唯一方式时，CR 和 LF 做了不同的事情。Unix 开始使用单个字符来标记行尾的传统，可能是因为它使流水线更容易；如果需要，他们的驱动程序可以轻松地将单个 LF 转换为 CR/LF。Linux 主要是一个 Unix 克隆，所以它保持这个约定。其他人出于历史原因坚持使用 CR/LF 约定，尽管这并不是绝对必要的。

某些语言（例如 C、C++ 和 Python）允许您在打开文件时指定文件的类型，二进制或文本。对于文本文件，执行翻译，以便将单个 LF 翻译成操作系统所需的行结束约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T01:10:48.573

基本上每个人在创建操作系统时都希望与众不同——Un*x 以 LF 开头，然后 VMS 和 DOS 想要 CR/LF（就像打字机），当然 MAC 想要与众不同，所以他们只选择 CR。

他们只是想让操作系统之间的转移变得更加困难，以便您“购买”到一个

**由于评论而添加**

取决于程序员 - 如果您需要支持不同的行尾，那么您必须为它们编写代码。例如，您可以为行尾创建一个#define，然后根据编译选项进行此更改

# c++ - 为什么将字符类型的常量指针作为函数？

> ID：11856316
> 
> 赞同：0
> 
> 时间：2012-08-08T01:07:06.667
> 
> 标签：c++

我正在学习 C++，我遇到过这个，我不明白这个小东西。为什么 GetName() 函数是一个字符类型的指针，为什么它是常量？

```
class Derived: public Base
{
public:
    Derived(int nValue)
        : Base(nValue)
    {
    }

    const char* GetName() { return "Derived"; }
    int GetValueDoubled() { return m_nValue * 2; }
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T01:08:16.543

`"Derived"`是一个**字符串文字**（查找它）。如果您尝试修改字符串文字，您会得到未定义的行为，因此会标记返回类型，`const`以免您意外修改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T01:09:00.413

您正在查看的是[C-String](http://en.wikipedia.org/wiki/C_string)。它是指向 数组的第一个元素的指针，`chars`因为`const`您不应该编辑字符文字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T01:15:27.027

请记住，在 C++ 中，您不能从函数返回一堆值。正如他们所说，这将返回一个指向保存一组连续字符的位置的指针。指针是对内存中地址的引用。当您在类中编写 getValue 方法时，大多数时候您只想让知道值之外的任何人，但只是只读的，因为您作为类是该值的唯一所有者，如果值被更改从随机位置而不是从 setValue 方法可能会导致问题。

# php - 下拉所选项目未打印

> ID：11856317
> 
> 赞同：0
> 
> 时间：2012-08-08T01:07:09.190
> 
> 标签：php, mysql, html

我正在尝试打印下拉选定的项目。我已经很好地展示了 dropdwon 列表菜单。但是当我选择一个选项时，它不会打印该选项。我已经尝试了很多方法。但是还没拿到！请帮助我，这是我的以下代码。

```
<form name="choose" method="get" action="<?php echo $_SERVER['PHP_SELF']; ?>">

<?php 
$query="SELECT id_cat,name FROM `fs01_metier_cat` ORDER BY `fs01_metier_cat`.`id_cat`";
$result = mysql_query($query);
?>

<?php
echo "<select name=category></option>";
while($nt=mysql_fetch_array($result)) {
    echo "<option value='".$nt['name']."'>".$nt['name']."</option>";
}
echo "</select>";
?>

<input type="submit" name="submit" value="save category" />
</form>

<?php
if($_GET){
   echo 'The year selected is'.$_GET['category'];
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T01:08:04.393

```
$_GET['category'] 
```

应该

```
$_POST['category'] 
```

javascript 示例：

```
<html>
 <head>
  <script type="text/javascript">
    window.onload = function() {
        var eSelect = document.getElementById('cat');
        eSelect.onchange = function() {

      document.getElementById("displaytext").innerHTML = "Selected Value: "+this.value;
      document.getElementById("displaytext").style.display= 'block';

        }
    }
  </script>
 </head>
 <body>
    <select id="cat" name="cat">
        <option value="x">X</option>
        <option value="y">Y</option>
        <option value="other">Other</option>
    </select>
    <div id="displaytext" style="display: none;" ></div>

</body>
</html> 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T01:12:33.630

你的代码有问题，试试这个：

```
<form name="choose" method="get" action="<?php echo $_SERVER['PHP_SELF']; ?>">

<?php 
$query="SELECT id_cat,name FROM `fs01_metier_cat` ORDER BY `fs01_metier_cat`.`id_cat`";
$result = mysql_query($query);
?>

<select name=category>
<?php
while($nt=mysql_fetch_array($result)) {
    echo "<option value='".$nt['name']."'>".$nt['name']."</option>";
}
?>
</select>

<input type="submit" name="submit" value="save category" />
</form>

<?php
if($_GET){
   echo 'The year selected is'.$_GET['category'];
}
?> 
```

# php - mysql隐形进程？

> ID：11856328
> 
> 赞同：1
> 
> 时间：2012-08-08T01:08:30.350
> 
> 标签：php, mysql, sql, ajax, xmlhttprequest

这是一张桌子

```
Id   Date   Name     vendor
1   | 123  |  jungle     |  qwe
2   | 43   |  jungle     |  qwe
3   | 678  |  jungle     |  ewq
4   | 678  |  jungle     |  ewq
5   | 678  |  jungle     |  ewq
6   | 678  |  jungle     |  hgjghj 
```

此脚本从表中删除名称列中具有重复值且供应商值相同的行。只留下一个独特的行。该脚本也通过 XHR ajax call 执行`$.post()`，在单击前端的按钮后。

```
$sql = DELETE x
FROM $table x
JOIN 
 ( SELECT vendors
        , email
        , MIN(lead_id) min_lead_id 
     FROM $table
    WHERE vendors = $vendor
    GROUP BY vendors
           , email
 ) y 
ON y.vendors = x.vendors 
AND y.email = x.email
AND y.min_lead_id <> x.lead_id;

mysql_query($sql, $conn);
echo json_encode($foo); 
```

和结果

```
Id   Date   Name     vendor
1   | 123  |  jungle     |  qwe
3   | 678  |  jungle     |  ewq
6   | 678  |  jungle     |  hgjghj 
```

现在有了一张 50k 的桌子，它在两秒钟内完成。或者更确切地说，它通过`echo json_encode($result);`. 现在，我假设该过程已完成，但是在进入我的 mysql 表并一次又一次地刷新之后，我发现 mysql 仍在运行，因为表中报告的总行数不断变化，就好像它仍在运行查询一样。

如何`echo json_encode($result);`等待数据库完成更新？或者有没有更好的方法来解决这个问题？谢谢。

```
$("#complete_dedupe").live("click", function(e) {
    e.preventDefault();
    table_name = $('#IMEXp_import-selectTable-select option:selected').val();
    $.post("dedupevendor.php", {"table": table_name}, function(data) {
        count_dedupe = 0;
        count_dedupe = data;
        $("#dupe_vendor").append(count_dedupe);
        $("#tr2").fadeIn("slow");
        vendor = $("#vendor_hidden").val();
        $("#edit_par4").append(vendor);
    }, "json")
}); 
```

通过不断刷新 phpmyadmin，圈出的数字会在大约不到一分钟的时间内发生变化。这只发生在我运行重复数据删除脚本之后并且脚本已经从 ajax 调用返回之后。图片如下

![在此处输入图像描述](../Images/dab2495485ae370ca42683886184bdd3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T03:01:30.947

您在 phpMyAdmin 中没有看到变化的原因是它`Innodb`没有像这样保持运行的行数`MyISAM`。

与其查看表格摘要，不如运行它；当您运行重复数据删除脚本时，它应该会改变。

```
SELECT COUNT(*) FROM auto; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T02:42:15.883

试试这个：

```
if(mysql_query($sql, $conn))
{
  echo json_encode($foo);
} 
```

这样，只有在`mysql_query()`返回值后才会将数据返回给调用 ajax 脚本，这应该仅在函数完成处理后发生

# java - 在android中创建JSON

> ID：11856329
> 
> 赞同：-1
> 
> 时间：2012-08-08T01:08:31.143
> 
> 标签：java, android, json, creation

我想在java中创建一个这样的json。

```
{
    "contacts": [
        {
            "id": "c200",
            "name": "Ravi Tamada",
            "email": "ravi@gmail.com",
            "address": "xx-xx-xxxx,x - street, x - country",
            "gender" : "male",
            "phone": {
                "mobile": "+91 0000000000",
                "home": "00 000000",
                "office": "00 000000"
            }
    },
    {
            "id": "c201",
            "name": "Johnny Depp",
            "email": "johnny_depp@gmail.com",
            "address": "xx-xx-xxxx,x - street, x - country",
            "gender" : "male",
            "phone": {
                "mobile": "+91 0000000000",
                "home": "00 000000",
                "office": "00 000000"
            }
    },
    {
            "id": "c202",
            "name": "Leonardo Dicaprio",
            "email": "leonardo_dicaprio@gmail.com",
            "address": "xx-xx-xxxx,x - street, x - country",
            "gender" : "male",
            "phone": {
                "mobile": "+91 0000000000",
                "home": "00 000000",
                "office": "00 000000"
            }
    },
    {
            "id": "c203",
            "name": "John Wayne",
            "email": "john_wayne@gmail.com",
            "address": "xx-xx-xxxx,x - street, x - country",
            "gender" : "male",
            "phone": {
                "mobile": "+91 0000000000",
                "home": "00 000000",
                "office": "00 000000"
            }
    },
    {
            "id": "c204",
            "name": "Angelina Jolie",
            "email": "angelina_jolie@gmail.com",
            "address": "xx-xx-xxxx,x - street, x - country",
            "gender" : "female",
            "phone": {
                "mobile": "+91 0000000000",
                "home": "00 000000",
                "office": "00 000000"
            }
    },
    {
            "id": "c205",
            "name": "Dido",
            "email": "dido@gmail.com",
            "address": "xx-xx-xxxx,x - street, x - country",
            "gender" : "female",
            "phone": {
                "mobile": "+91 0000000000",
                "home": "00 000000",
                "office": "00 000000"
            }
    },
    {
            "id": "c206",
            "name": "Adele",
            "email": "adele@gmail.com",
            "address": "xx-xx-xxxx,x - street, x - country",
            "gender" : "female",
            "phone": {
                "mobile": "+91 0000000000",
                "home": "00 000000",
                "office": "00 000000"
            }
    },
    {
            "id": "c207",
            "name": "Hugh Jackman",
            "email": "hugh_jackman@gmail.com",
            "address": "xx-xx-xxxx,x - street, x - country",
            "gender" : "male",
            "phone": {
                "mobile": "+91 0000000000",
                "home": "00 000000",
                "office": "00 000000"
            }
    },
    {
            "id": "c208",
            "name": "Will Smith",
            "email": "will_smith@gmail.com",
            "address": "xx-xx-xxxx,x - street, x - country",
            "gender" : "male",
            "phone": {
                "mobile": "+91 0000000000",
                "home": "00 000000",
                "office": "00 000000"
            }
    },
    {
            "id": "c209",
            "name": "Clint Eastwood",
            "email": "clint_eastwood@gmail.com",
            "address": "xx-xx-xxxx,x - street, x - country",
            "gender" : "male",
            "phone": {
                "mobile": "+91 0000000000",
                "home": "00 000000",
                "office": "00 000000"
            }
    },
    {
            "id": "c2010",
            "name": "Barack Obama",
            "email": "barack_obama@gmail.com",
            "address": "xx-xx-xxxx,x - street, x - country",
            "gender" : "male",
            "phone": {
                "mobile": "+91 0000000000",
                "home": "00 000000",
                "office": "00 000000"
            }
    },
    {
            "id": "c2011",
            "name": "Kate Winslet",
            "email": "kate_winslet@gmail.com",
            "address": "xx-xx-xxxx,x - street, x - country",
            "gender" : "female",
            "phone": {
                "mobile": "+91 0000000000",
                "home": "00 000000",
                "office": "00 000000"
            }
    },
    {
            "id": "c2012",
            "name": "Eminem",
            "email": "eminem@gmail.com",
            "address": "xx-xx-xxxx,x - street, x - country",
            "gender" : "male",
            "phone": {
                "mobile": "+91 0000000000",
                "home": "00 000000",
                "office": "00 000000"
            }
    }
]
} 
```

我正在使用库 org.json。

但是当我将 json 转换为字符串时，会出现很多斜杠。

像这样：

```
 {
            \"id\": \"c200\",
            \"name\": \"Ravi Tamada\",
            \"email\": \"ravi@gmail.com\",
            \"address\": \"xx-xx-xxxx,x - street, x - country\",
            \"gender\" : \"male\",
            \"phone\": {
                \"mobile\": \"+91 0000000000\",
                \"home\": \"00 000000\",
                \"office\": \"00 000000\"
            }
        } 
```

如何摆脱斜线。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T01:18:15.427

我记得，\ 字符正在转义“。它应该在那里。你想如何使用 JSON 数据？如果你能提供你正在做什么的示例代码会很好。在我的应用程序中，我请执行下列操作，

```
BufferedReader reader = new BufferedReader(new 
    InputStreamReader(response.getEntity().getContent(), "UTF-8"));
String json = reader.readLine();
JSONTokener tokener = new JSONTokener(json);
JSONObject JSONParams = new JSONObject(tokener);
String param1 = eventParams.getString("param1");
... 
```

如果您使用这些对象，他们应该为您删除转义字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T01:27:50.663

****如果您要将 POJO 转换为JSON**表示形式， **Flexjson**也是一种非常方便的方法。**

 **JSONSerializer 将序列化，而 JSONDeserializer 将执行相反的操作。

我自己用过。

[链接到 Flexjson 网站 - http://flexjson.sourceforge.net/](http://flexjson.sourceforge.net/)

```
public String doSomething( Object arg1, ... ) {

    Person p = ...load a person...;

    JSONSerializer serializer = new JSONSerializer();
    return serializer.serialize( p );
}

{
    "class": "Person",
    "name": "William Shakespeare",
    "birthday": -12802392000000,
    "nickname": "Bill"
} 
```**

# postgresql - 创造新角色？

> ID：11856331
> 
> 赞同：1
> 
> 时间：2012-08-08T01:08:50.783
> 
> 标签：postgresql

我是 PostgreSQL 的新手。

我正在尝试创建一个新角色`pgdba`，如下所示...

```
localhost.localdomain:[/home/postgres]createuser -d -i -l -P -r -s pgdba
new role's password : pgdba
retype password : pgdba
password : postgres

localhost.localdomain:[/home/postgres]psql
Password: postgres
psql (9.0.1)
Type "help" for help.
postgres=# select * from pg_shadow;
 usename  | usesysid | usecreatedb | usesuper | usecatupd |               passwd                | valuntil | useconfig 
----------+----------+-------------+----------+-----------+-------------------------------------+----------+-----------
 postgres |       10 | t           | t        | t         | md53175bce1d3201d16594cebf9d7eb3f9d |          | 
 pgdba    |    16385 | t           | t        | t         | md53cd688326933adcdedd77097c95d131d |          | 
(2 rows)

postgres=# \q

localhost.localdomain:[/home/postgres]psql -U pgdba
Password for user pgdba: pgdba
FATAL:  database "pgdba" does not exist

psql: FATAL:  database "pgdba" does not exist 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T01:49:19.873

看看消息是如何显示*数据库*pgdba 不存在？

默认情况下，PostgreSQL 将连接到以当前用户命名的数据库（请参阅[psql 文档](http://www.postgresql.org/docs/current/static/app-psql.html)。由于您没有指定要连接的数据库，因此它正在尝试连接到名为`pgdba`- 的数据库，但该数据库不存在。

尝试：

```
psql -U pgdba postgres 
```

`postgres`使用角色连接到数据库`pgdba`。

您可能还需要检查`pg_hba.conf`（如果您希望调整身份验证规则，请参阅[文档。](http://www.postgresql.org/docs/current/static/auth-pg-hba-conf.html)

顺便说一句，您正在运行具有已知错误的过时 PostgreSQL 版本。请更新到 9.0.8，这是 9.0 系列中的最新补丁版本。您不需要转储和重新加载您的数据库或使用`pg_upgrade`它，它是一个简单的替代品。有关您缺少的所有修复，请参阅[发行说明。](http://www.postgresql.org/docs/current/static/release.html)

此外，考虑使用 psql 的用户信息函数和，而不是`SELECT`ing from ，这会产生更好的格式化和集成信息。`pg_shadow``\du``\dg`

# sql - SQL：使用引用多个潜在嵌套行的行为单个表创建人行横道

> ID：11856336
> 
> 赞同：0
> 
> 时间：2012-08-08T01:09:18.463
> 
> 标签：sql, mariadb, heidisql

我将从正在使用的表开始（注意：我无法更改此表）：

```
ID      LN_0    LN_1    LN_2    isParent
4508    14883   14884   0       Y
7164    14128   0       0       Y
7169    9021    0       0       Y
9021    4508    0       0       N
14128   14137   14169   0       Y
14137   0       0       0       N
14169   0       0       0       N
14883   0       0       0       N
14884   0       0       0       N 
```

LN_0-2 列包含其他行的 ID #。我想要做的是创建一个包含 2 列的人行横道表，该表具有父 ID（其中 isParent=Y 的 ID）和父 ID 在其行中引用的 ID 的每个唯一组合，这是困难的部分，参考文献的所有潜在参考文献等。

上述数据的结果如下所示：

```
ParentID References
4508     4058
4508     14883
4508     14884
7164     7164
7164     14128
7164     14137
7164     14169
7169     9021
7169     4508
7169     14883
7169     14884
14128    14128
14128    14137
14128    14169 
```

我正在使用 HeidiSQL 连接到 MariaDB。

# javascript - 如何动态创建变量名？

> ID：11856337
> 
> 赞同：1
> 
> 时间：2012-08-08T01:09:37.730
> 
> 标签：javascript

我需要创建基于用户定义数字的 javascript 对象。所以如果用户定义了 20 个，那么我需要创建 20 个变量。

```
var interval_1=0, interval_2=0, interval_3=0, interval_4=0, interval_5=0... interval_20=0; 
```

我该怎么做才能动态创建对象的名称？

```
for (i=0; i<=interval; i++){
    var interval_ + i.toString() = i;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T01:11:20.987

呃，使用数组？

```
for( i=0; i<=count; i++) array[i] = i; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T01:49:15.143

使用数组：

```
var i, count, interval = [];

// user defines count, 20 for example
count = 20;

for (i = 0; i < count; i++) {
    interval.push(i);
}

// interval[0] === 0
// interval[19] === 19
// interval.length === 20 
```

请注意，这会将索引从 0 开始并上升到 count - 1。除非您从 1 开始，否则不要使用 i <= count。

这是一个 jsFiddle 来说明。在大多数浏览器中按 F12 打开开发工具并查看控制台，或将 console.log() 更改为 alert()。

链接：http: [//jsfiddle.net/willslab/CapBN/1/](http://jsfiddle.net/willslab/CapBN/1/)

或者，您可以为每个值设置一个具有属性的对象：

```
var i, count, intervals = {};

count = 20;

for (i = 0; i < count; i++) {
    intervals["interval_" + i] = i;
}

//intervals.interval_0 === 0
//intervals.interval_19 === 19) 
```

链接：http: [//jsfiddle.net/willslab/EBjx7/2/](http://jsfiddle.net/willslab/EBjx7/2/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T01:16:59.530

```
for (i=0; i<=20; i++){
    window["interval_" + i.toString()] = i;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T01:21:42.057

Javascript变量可以通过以下方式创建：

1.  变量声明，例如`var x;`
2.  为未声明的变量赋值，例如`y = 'foo'`；
3.  形式参数列表中的标识符，例如`function bar(x, y, z);`
4.  使用*eval*，例如`eval( 'var x = 4');`

如果所有其他方法都失败并且您想要说 5 个变量，您可以这样做：

```
var s = [];
var i = 5;
while (i--) {
  s[i] = 'a' + i;
}

eval('var ' + s.join(',') + ';');

alert(a0); // shows undefined 
```

如果未定义*a0 ，则最后一步将引发引用错误。*

当然，您现在遇到的问题是如何访问它们。如果它们被创建为全局变量，您可以使用：

```
globalObj['a' + i]; 
```

其中*globalObj*通常是*window*，但是没有等效的访问函数变量，因为您无法访问它们的变量对象。

因此，通常的解决方案是将事物放入数组或对象中，您可以在其中迭代属性以查找您不知道名称的事物。

# javascript - 跨不同计算机的实时js

> ID：11856338
> 
> 赞同：0
> 
> 时间：2012-08-08T01:09:59.607
> 
> 标签：javascript, jquery, django, websocket, real-time

我正在制作一款需要跨移动和非移动设备实时同步的游戏。用例是这样的，将有 1-3 个人使用他们的手机在他们的每个手机屏幕上移动他们的角色。然后会有一个桌面屏幕显示每个人如何移动他们的角色。

只需要单向同步，即手机只需要将主屏幕更新到新的位置。主屏幕永远不必与手机通信。我希望能够在 javascript 中执行此操作。另外，我正在使用 Django 作为服务器。

是否有任何库或预先存在的工具可以帮助做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:12:34.650

我认为这就是[Meteor](http://meteor.com/)的用途。

# node.js - 在 OS X 上安装和保持 Node.js 和软件包最新的最佳方式？

> ID：11856344
> 
> 赞同：0
> 
> 时间：2012-08-08T01:11:17.327
> 
> 标签：node.js

在 OS X 上保持最新安装的 Node 及其随附软件包的最干净或最佳方式是什么？Homebrew 似乎总是有点落后（除了`head`）。

[此外，来自Node.js wiki](https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager)的一个有趣观察说：

> **警告：**已知 brew 安装有问题

此外，是否还有更新已安装软件包的首选方法（跨节点更新并通常更新它们）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T01:46:33.667

我使用一个名为 NVM 的工具来管理 Node.js 的安装；您可以使用单个命令安装并切换到各种版本的 Node.js。[您可以在https://github.com/creationix/nvm](https://github.com/creationix/nvm)找到 NVM 。

您可能[对此截屏视频](http://nodecasts.net/episodes/2-nodejs-first-steps)的前半部分感兴趣，其中包括安装和使用 NVM（完整披露：我制作了截屏视频）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T01:14:13.403

我个人切换回自制软件，因为安装官方软件包会弄乱我的路径以及我使用的节点版本。

并且节点包不应全局安装，因此`npm install`如果要求，每个新版本都会获取最新版本。

# c# - 在检索存储在某个字节的值之前，您是否需要屏蔽一个数字？

> ID：11856348
> 
> 赞同：2
> 
> 时间：2012-08-08T01:11:23.797
> 
> 标签：c#, bit-manipulation, bit-shift

我想知道在进行位移时是否需要在检索存储在某个字节处的值之前屏蔽一个数字。

举个例子，这段代码：

```
short b1 = 1;
short b2 = 2;
short b0 = (short)((b1 << 8) | b2);         //store two values in one variable

Console.WriteLine(b0);                      //b1 and b2 combined
Console.WriteLine((b0 & (255 << 8)) >> 8);  //gets the value of b1 
```

就我而言，进行右移会丢弃所有小于您移动的位数的位。因此，右移`b0`8 位将删除 的 8 位`b2`，只留下`b1`。

```
Console.WriteLine(b0 >> 8);  //this also gets b1!! 
```

我想知道，在转移之前是否需要掩蔽`b0`以`255 << 8`获得 的值`b1`？

**注意：**
在检索值之前，我唯一能想到的屏蔽是是否有其他内容存储在更高的字节中，例如尝试取回 的值`b2`，其中将使用以下代码：

```
Console.WriteLine(b0 & 255);  //gets the value of b2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T01:16:53.243

> 我想知道，在转移以获得 b1 的值之前，是否需要用 255 << 8 屏蔽 b0？

不，没有必要。所以编译器会省略屏蔽。有些人认为它使代码更容易理解或保护他们免受一些想象中的失败场景。它是完全无害的。

# curl - 使用 curl 下载时如何跳过现有文件？

> ID：11856351
> 
> 赞同：29
> 
> 时间：2012-08-08T01:11:56.387
> 
> 标签：curl, command-line, download

我想`curl`下载一个链接，但我希望它跳过已经存在的文件。现在，无论如何，我拥有的代码行将继续覆盖它：

```
curl '$url' -o /home/$outputfile &>/dev/null & 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-08T01:25:43.267

你可以把你的电话`curl`放在一个`if`块内：

```
if ! [ -f /home/$outputfile ]; then
  curl -o /home/$outputfile "url"
fi 
```

另请注意，在您的示例中，您有`$url`单引号，这不会做您想要的。相比：

```
echo '$HOME' 
```

至：

```
echo "$HOME" 
```

此外，`curl`还有一个`--silent`在脚本中很有用的选项。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2017-11-10T16:14:51.060

您可以使用 curl 选项`-C -`。此选项用于恢复中断的下载，但如果文件已经完成，则会跳过下载。请注意，参数 to`-C`是一个破折号。一个缺点可能是 curl 仍然会短暂地联系远程服务器以询问文件大小。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-08-08T01:15:48.877

使用 wget`--no-clobber`代替：

> `-nc`, `--no-clobber`: 跳过将下载到现有文件的下载。

例子：

```
wget -nc -q -O "/home/$outputfile" "$url" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-17T02:02:18.433

与和一起使用`curl`时可能支持跳过文件，但其行为不一致。`-O``-J`

( ) 基本上告诉`-J`( )选项使用服务器指定的文件名，而不是从 URL 中提取文件名。这样一来，服务器并不真正知道服务器将返回什么文件名，因此它可能会忽略现有文件以进行安全预防。`--remote-header-name``-O``--remote-name``Content-Disposition``curl`

^(资料来源：[回复：-J“拒绝覆盖……”](https://curl.haxx.se/mail/archive-2014-05/0042.html))

例如：

```
$ curl -LJO -H 'Accept: application/octet-stream' 'https://api.github.com/repos/x/y/releases/assets/12345
Warning: Refusing to overwrite my_file.bin: File 
Warning: exists
curl: (23) Failed writing body (0 != 16384) 
```

然而，正如已经提到的，它的行为是不可预测的，并且不适用于所有文件。

# php - 正确处理外来字符/表情符号

> ID：11856356
> 
> 赞同：0
> 
> 时间：2012-08-08T01:13:10.080
> 
> 标签：php, javascript, mysql, unicode, emoji

无法显示外来字符和表情符号。

**编辑澄清**

用户在文本字段中键入表情符号字符，然后将其发送到服务器 (php) 并保存到数据库 (mysql) 中。当显示文本时，我们从服务器获取一个 JSON 编码的字符串，该字符串在客户端被解析并显示。

问题：数据库中保存的“奖杯”表情符号的字符读取为

```
%uD83C%uDFC6 
```

当它被发送回客户端时，我们看不到表情符号图片，我们实际上看到了原始编码文本。

我们如何让客户端将该文本作为表情符号字符读取并显示图像？

（全部在 iphone / 移动 safari 上）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:13:49.203

检查客户端、Web 服务器和数据库表使用的编码。确保它们都使用可以处理您关心的字符的编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T23:27:29.270

看起来问题是我的 MySql 编码...... utf8mb4 会允许它 - 不幸的是它在 MySQL v5.5 之前不可用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T11:17:29.970

> 保存在数据库中的“奖杯”表情符号的字符读取为 %uD83C%uDFC6

那么你的数据已经被破坏了。`%u`转义是 JavaScript 函数特有的`escape()`，通常不应该使用。确保您的 textarea->PHP 处理使用符合标准的编码，例如，`encodeURIComponent`如果您需要将 JS 变量放入 URL 查询中。

然后，在您的 PHP 层中有适当的原始 UTF-8 字符串，您可以担心让 MySQL 存储基本多语言平面之外的字符，例如表情符号。最好的方法是带有`utf8mb4`排序规则的列；如果这不可用，请尝试二进制列，这将允许您存储任何字节序列（当它返回时将其视为 UTF-8）。但是，这样一来，您将不会进行不区分大小写的比较。

# json - JSON 将字典转换为键值对列表

> ID：11856357
> 
> 赞同：2
> 
> 时间：2012-08-08T01:13:17.100
> 
> 标签：json

我有一个字典 <string, string>

如果我 Json.Encode 这个我得到`{"Apple":"Apples","Orange":"Oranges"}`

我怎么能得到这个： -

```
[{ value: "Apples", key: "Apple" }, { value: "Oranges", key: "Orange"}] 
```

最好使用 Newtonsoft.Json 或 jQuery

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T01:21:32.087

在传递给 JSON 序列化程序之前将其转换为键值对列表：

```
JsonConvert.SerializeObject(new List<KeyValuePair<string,string>>(dictionary)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T17:15:41.750

重申我的评论，将数据类型从 IEnumerable>（或 IDictionary）更改为 IList> 也会导致序列化“正确”工作，也就是将数据序列化为 JavaScript 数组。在我目前的情况下，我的 JavaScript 被隔离在 Razor 无法遵循的单独 .js 文件中，因此无法选择使用 JsonConvert.SerializeObject。

这里绝对是一个奇怪的功能。如果有人对 JSON 序列化为什么默认以这种方式做出反应有一些见解，那就太好了；错误还是故意的？

# javascript - div鼠标悬停问题

> ID：11856363
> 
> 赞同：0
> 
> 时间：2012-08-08T01:14:02.427
> 
> 标签：javascript, jquery, html

我试图`text`在我将 img 悬停时显示我的班级，并在用户将鼠标移出`div`而不是`img`.

使用以下代码，一旦鼠标离开 img，文本类就会被隐藏。任何人都可以帮助我吗？非常感谢。

我的代码：

**HTML**

```
<div id='container'>
    <div class='imgDiv'>
        <img src='a.jpg' />
        <br>
        <p class='text'> picutre text!!! </p>
    </div>
</div> 
```

**CSS**

```
.imgDiv{
    height:500px; //way higher than the image
} 
```

**jQuery**

```
//I want to show text only when mouse hover to img
$('#container').on('mouseover','img',function(){                 
    $(this).closest('div').css('background-color','grey');
        $(this).parent().siblings('.text').fadeIn('fast');
    });

//I want to hide text when mouse out of imgDiv but it doesn't work with my following codes
//the text will be hidden right after mouse out of image
$('#container').on('mouseout','.imgDiv',function(){
    //hide text
    $(this).children('.text').fadeOut('fast');             
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T01:17:14.773

用干净的方式来做，给图像一个类，比如 text_trigger 并改用它。

```
$('.text_trigger').hover(function() {                 

   $(this).closest('div').css('background-color','grey');
   $(this).parent().siblings('.text').fadeIn('fast');
}, function() {
  $(this).parent().siblings('.text').fadeOut('fast');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T01:17:47.830

为什么不直接使用 CSS？

```
.imgDiv p {display:none}
.imgDiv:hover p {display:block} 
```

# ruby-on-rails - Ruby 可读的用户代理？

> ID：11856367
> 
> 赞同：2
> 
> 时间：2012-08-08T01:14:32.107
> 
> 标签：ruby-on-rails, ruby, gem, user-agent

是否有一个宝石可以将用户代理字符串转换为“人类”格式......更容易识别的东西？

例子：

```
Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8) AppleWebKit/536.25 (KHTML, like Gecko) Version/6.0 Safari/536.25 
```

会翻译成`OS X Safari`……或类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T02:22:19.827

[用户代理](https://github.com/josh/useragent)呢？

```
string = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5'
user_agent = UserAgent.parse(string)    
user_agent.browser
# => 'Chrome'
user_agent.version
# => '19.0.1084.56'
user_agent.platform
# => 'Macintosh'
user_agent.mobile?
# => false 
```

# android - 有效率问题。需要在类之间传递数据

> ID：11856368
> 
> 赞同：0
> 
> 时间：2012-08-08T01:15:01.177
> 
> 标签：android, gridview, android-intent, bitmap

所以我有一个 Gridview 和 ImageAdapter 类。所有图像都从文件夹中获取，然后填充到网格视图中。然后我有另一个类在单击时显示完整图像。但是，每当有人单击图像时，必须再次调用 ImageAdapter，并且所有图像都需要重新填充到我的变量中，然后我只需挑选出我需要的那个。这是非常低效的，但我不知道该怎么做。

这是我的代码。

带有网格视图的主类（在本例中为收藏夹）

```
public class Favorites extends Activity {    

public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.favorites);

    GridView gridview = (GridView) findViewById(R.id.favgridview);
    gridview.setAdapter(new ImageAdapter(this));

    gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent,View v, int position, long id){
            Intent i = new Intent(getApplicationContext(), FullImageActivity.class);

            i.putExtra("id", position);
            startActivity(i);

        }       
    }); 
}   
} 
```

我的 ImageAdapter 类，您可以看到我将所有图像作为位图加载到数组中。

```
 public class ImageAdapter extends BaseAdapter{
private Context mContext;
private Bitmap[]mis_fotos;

public ImageAdapter(Context c){
    mContext = c;
}

public int getCount(){
    get_images();
    return mis_fotos.length;
}

public Bitmap getItem(int position){
    get_images();
    return mis_fotos[position];
}

public long getItemId(int position){
    return 0;
}

public View getView(int position, View convertView, ViewGroup parent){
    ImageView imageView;

    if (convertView == null){
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(85,85));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(8, 8, 8, 8);   
    } else {
        imageView = (ImageView) convertView;
    }   

    imageView.setImageBitmap(mis_fotos[position]);
    return imageView;
}

private void get_images(){

    String dirPath = mContext.getFilesDir().getAbsolutePath() + File.separator + "favorites";

    File directory = new File(dirPath);

    File[] archivos = directory.listFiles();
    mis_fotos = new Bitmap[archivos.length];

    for (int cont=0; cont<archivos.length;cont++){
        File imgFile = new File(archivos[cont].toString());
        mis_fotos[cont] = BitmapFactory.decodeFile(imgFile.getAbsolutePath());
    }
}

 } 
```

最后是我的完整图像类

```
 public class FullImageActivity extends Activity {

public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.full_image);

    Intent i = getIntent();

    int position = i.getExtras().getInt("id");
    ImageAdapter imageAdapter = new ImageAdapter(this);

    ImageView imageView = (ImageView) findViewById(R.id.full_image_view);
    imageView.setImageBitmap(imageAdapter.getItem(position));   
}

 } 
```

所以你可以看到，当我使用完整图像时，我只能传递来自 gridview 类的位置整数。然后我必须在 ImageAdapter 类中再次调用 get_images() 并重新填充一个数组。

当单击图像时，我需要将单个图像从 gridview 传递到 fullimage 类。我知道有一种更简单、更有效的方法来做到这一点。我希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T05:26:37.650

需要解决，您`get_images()`在 Adapter 类中多次调用，这是一种不好的方法。更好的解决方案是将其从 Adapter 类中删除并保留在 MainActivity 中，然后在设置 Adapter 之前调用它，例如，

```
GridView gridview = (GridView) findViewById(R.id.gridView);
get_images();
gridview.setAdapter(new ImageAdapter(this)); 
```

然后你的 Adapter 类的方法应该是这样的，

```
public int getCount() {
   return mis_fotos.length;
}

public Object getItem(int position) {
    return mis_fotos[position];
} 
```

现在，我来解决您的问题，即您想将图像显示为全屏到下一个活动。那么，为什么不从单击的 ListView 项目中获取位图并将其传递给 Next Activity？那么，你怎么能这样做呢？这里是，

```
gridview.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
       Bitmap bitmap = (Bitmap) parent.getAdapter().getItem(position);
       Intent i = new Intent(getApplicationContext(), FullImageActivity.class);
       Bundle bundle = new Bundle();
       bundle.putParcelable("bitmap", bitmap);
      i.putExtras(bundle);
      startActivity(i);
}); 
```

因此，没有什么棘手的，只需使用 Bitmap`getItem(position);`并使用 Bundle 将其发送到 Next Activity。现在您可以使用轻松获取位图

```
Bundle bundle = getIntent().getExtras();
Bitmap bitmap = bundle.getParcelable("bitmap");
// create new Bitmap with any height, width required by you.
Bitmap newBitmap = Bitmap.createScaledBitmap(bitmap, 200, 200, true); 
```

并显示给 ImageView。

# ruby-on-rails-3 - 我的 has_many 模型导致 ActiveAdmin 在 has_on 端查找外键

> ID：11856376
> 
> 赞同：0
> 
> 时间：2012-08-08T01:15:40.067
> 
> 标签：ruby-on-rails-3, activerecord, associations, activeadmin

我是 ruby​​ on rails（和 ruby​​）的新手，我正在尝试让 ActiveAdmin 使用我的模型。我有很多简单的东西在工作，但是 ActiveAdmin（在 ActiveRecord 上）给了我以下错误，我不知道为什么（我确定我配置错误，但我不知道是什么）：

> Mysql2::Error：'where 子句'中的未知列'assessment_styles.assessment_definition_id'：SELECT `assessment_styles`.* FROM `assessment_styles` WHERE `assessment_styles`。`assessment_definition_id`= 1 限制 1

评估定义模型

```
class AssessmentDefinition < ActiveRecord::Base
  attr_accessible :active, :endDOW, :endDate, :isForResearch, :name, :startDOW, :startDa>
  has_one :assessmentStyle, :inverse_of => :assessment_definitions
  has_one :consentForm

  validates :name, :endDOW, :startDOW, :endDate, :startDate, :presence => true

  has_and_belongs_to_many :courses
  has_and_belongs_to_many :groups
  has_and_belongs_to_many :behaviours

end 
```

评估风格模型

```
class AssessmentStyle < ActiveRecord::Base
  attr_accessible :name
  has_many :assessment_definitions, :inverse_of => :assessmentStyle
end 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T02:21:40.603

哎呀！我想通了（在[Duane's Brain](http://duanesbrain.blogspot.com/2006/05/ruby-on-rails-hasone-versus-belongsto.html "来自杜安的大脑")的帮助下）。我误解了 has_one vs. belongs_to，将它与这个词的简单英语含义混淆了，并且没有意识到它在引擎盖下做了什么。

# debugging - 如何避免在 Java 中使用“isDebugEnabled()”？

> ID：11856379
> 
> 赞同：3
> 
> 时间：2012-08-08T01:16:37.050
> 
> 标签：debugging

在java中编程时，调试日志是非常重要的。但是到处输入 isDebugEnabled 就麻烦了。有什么办法可以避免使用这个同时又不影响系统的性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T09:58:42.737

有点。

使用 slf4j 你可以做到

```
log.debug("{}",someObject); 
```

如果启用了调试，它只会连接 someObject.toString() 。同样对于像

```
log.debug("Hello {}, i am {} years old",name,age); 
```

查看[此链接](http://www.slf4j.org/faq.html#logging_performance)了解更多信息：

# hadoop - 如何更改 HDFS 中的文件时间戳？

> ID：11856385
> 
> 赞同：1
> 
> 时间：2012-08-08T01:17:14.543
> 
> 标签：hadoop

在 linux 中，您可以使用 touch 更改文件的时间戳。但是，当文件已经存在时，HDFS touchz 不会更改文件时间戳。在不删除文件的情况下更改 HDFS 时间戳的简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T06:22:12.200

您可以使用[FileSystem#setTimes](https://hadoop.apache.org/docs/current/api/org/apache/hadoop/fs/FileSystem.html#setTimes%28org.apache.hadoop.fs.Path,%20long,%20long%29)方法。

# ruby-on-rails - 使用屏幕截图和元标记在 Rails 中搜索

> ID：11856386
> 
> 赞同：0
> 
> 时间：2012-08-08T01:17:24.410
> 
> 标签：ruby-on-rails, search

这是这种情况...

在 Rails 应用程序中，您在文本框中键入 URL，结果应该会附带，该 URL 页面的屏幕截图为 JPG，一些元标记，如标题、URL、图标、描述……或 rails 可以做的任何事情或我可以得到。

轨道如何做到这一点？或者我如何获取 URL 的屏幕截图？？？

详细的答案会很有帮助，我对 Rails 很陌生。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:01:15.190

您可以使用 IMGKit 为特定 URL 生成缩略图/屏幕截图

[https://github.com/csquared/IMGKit](https://github.com/csquared/IMGKit)

# java - 发现错误：DMI_ENTRY_SETS_MAY_REUSE_ENTRY_OBJECTS

> ID：11856391
> 
> 赞同：1
> 
> 时间：2012-08-08T01:17:49.960
> 
> 标签：java, findbugs

[我实现了在这里](https://stackoverflow.com/questions/2864840/treemap-sort-by-value)找到的非常好的排序解决方案：

```
static <K,V extends Comparable<? super V>> SortedSet<Map.Entry<K,V>>
entriesSortedByValues(Map<K,V> map) {

    SortedSet<Map.Entry<K,V>> sortedEntries = new TreeSet<Map.Entry<K,V>>(

        new Comparator<Map.Entry<K,V>>() {
            @Override
            public int compare(Map.Entry<K,V> e1, Map.Entry<K,V> e2) {
                int res = e1.getValue().compareTo(e2.getValue());
                return res != 0 ? res : 1;
            }
        }
    );

    sortedEntries.addAll(map.entrySet());
    return sortedEntries;
} 
```

该代码似乎工作得很好。然而，FindBugs 抱怨这一行：

```
sortedEntries.addAll(map.entrySet()); 
```

投诉是：

> **错误**：添加条目集的元素可能会由于在 com.local.sem.util.MapUtil.entriesSortedByValues(Map) 中重用 Map.Entry 对象而失败
> 
> entrySet() 方法允许返回底层 Map 的视图，其中单个 Entry 对象在迭代期间被重用并返回。从 Java 1.6 开始，IdentityHashMap 和 EnumMap 都这样做了。在遍历这样的 Map 时，Entry 值仅在您进行下一次迭代之前有效。例如，如果您尝试将这样的 entrySet 传递给 addAll 方法，那么事情就会大错特错。
> 
> **信心**：正常，**等级**：麻烦（14）
> **模式**：DMI_ENTRY_SETS_MAY_REUSE_ENTRY_OBJECTS
> **类型**：DMI，**类别**：BAD_PRACTICE（不良做法）

谁能告诉我这意味着什么，或者它是否真的与这个特定的代码相关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T17:59:23.643

这是问题的一个简单示例：

```
Map<String,String> map = new IdentityHashMap<String,String>();
map.put("a", "1");
map.put("b", "2");
Iterator<Entry<String,String>> i = map.entrySet().iterator();
Entry<String,String> e1 = i.next();
System.out.println("first key is: " + e1.getKey());
Entry<String,String> e2 = i.next();
System.out.println("first key is now: " + e1.getKey()); 
```

使用 Java 6，这将打印：

```
first key is: a
first key is now: b 
```

这是因为对 i.next() 的第二次调用返回与第一次相同的条目，但它更改了存储在该条目中的值。

如果我将 IdentityHashMap 更改为 HashMap，则返回的每个条目都是不同的，因此 e1.getKey() 不会更改。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-08T01:56:31.650

entrySet() 方法允许返回底层 Map 的视图，其中单个 Entry 对象在迭代期间被重用并返回。从 Java 1.6 开始，IdentityHashMap 和 EnumMap 都这样做了。在遍历这样的 Map 时，Entry 值仅在您进行下一次迭代之前有效。例如，如果您尝试将这样的 entrySet 传递给 addAll 方法，那么事情就会大错特错。

请阅读链接了解更多详情。[http://findbugs.sourceforge.net/bugDescriptions.html#DMI_ENTRY_SETS_MAY_REUSE_ENTRY_OBJECTS](http://findbugs.sourceforge.net/bugDescriptions.html#DMI_ENTRY_SETS_MAY_REUSE_ENTRY_OBJECTS)

# html - CSS - 按钮不填充表格单元格

> ID：11856396
> 
> 赞同：0
> 
> 时间：2012-08-08T01:18:41.120
> 
> 标签：html, css

我正在使用 a`<table>`来布局标准的 HTML 联系表单。我们不讨论使用表格的优点，因为 HTML 不应该是关于表示的，而是关于结构的（这就是为什么我认为无论如何它是合理的）。

尽管如此，这是我正在使用的标记和 CSS（由 ASP.NET MVC 生成）：

```
 <table class="fieldTable">
                <tbody>
                    <tr>
                        <th><label for="Name">Your name</label></th>
                        <td><input id="Name" name="Name" type="text" value="" /></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                    </tr>

                    <tr>
                        <th><label for="EmailAddress">Your e-mail address</label></th>
                        <td><input id="EmailAddress" name="EmailAddress" type="text" value="" /></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                    </tr>

                    <tr>
                        <th><label for="MessageBody">Message</label></th>
                        <td><textarea cols="30" id="MessageBody" name="MessageBody" rows="6"></textarea></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                    </tr>

                    <tr>
                        <td></td>
                        <td><button type="submit"><span>Send Message</span></button></td>
                    </tr>
                </tbody>
            </table> 
```

还有我的 CSS：

```
.fieldTable th {
    text-align: right;
    font-weight: normal;
    vertical-align: top;
    padding: 0.25em;
    padding-right: 0.5em; }

.fieldTable input,
.fieldTable textarea,
.fieldTable button {
    width: 100%; }

input, textarea, button {
    border: 1px solid #999;
    padding: 0.5em;

    border-radius: 5px;
    -webkit-box-shadow: 0px 0px 7px 3px #c4c4c4;
    box-shadow: 0px 0px 7px 3px #c4c4c4; }

button        { background: #DDD; position: relative; }
button:hover  { background: #FFF; }
button:active span { position: relative; top: 2px; left: 2px; }

tr { outline: 1px solid blue; }
td { outline: 1px solid red; } 
```

然而，它似乎呈现如下：

![正常渲染](../Images/1ed7ad50b605f34a66ac554f25f29e60.png) ![使用 tr/td 轮廓渲染](../Images/34400079c6b354a1d39960be04fa44d8.png)

为什么`<button>`元素没有水平填充单元格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T01:26:08.080

我认为您可能正在寻找[box-sizing](http://css-tricks.com/box-sizing/)，它决定了在计算宽度/高度时是否添加或排除边距/填充。

> box-sizing：边框框；

这应该允许您设置百分比宽度/高度，并且它将填充而不会溢出。

编辑：默认情况下它在按钮上（如果您检查元素，您会看到浏览器已经添加了它）。它可以添加到您的文本区域和输入字段中，以使它们与您的按钮匹配。

如果你看你的屏幕截图。输入字段超出了 TD 并且按钮似乎是唯一真正起作用的按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T01:33:17.300

大卫我看了你的 html 并基于它创建了一个[jsFiddle 。](http://jsfiddle.net/CBn4b/)然后我修改了您的 css 以使用您正在寻找的[box-sizing 属性。](http://www.w3schools.com/cssref/css3_pr_box-sizing.asp)尽管它应用于 DOM 上的其他对象，但您可能希望将其提取到它自己的类中，仅用于文本区域。

# xcode - 在 App Delegate 中使用自定义类作为类型时遇到问题

> ID：11856402
> 
> 赞同：0
> 
> 时间：2012-08-08T01:19:09.577
> 
> 标签：xcode, class, types, singleton, iad

我正在尝试为整个 ios 应用程序中的视图控制器制作一个共享的 iAd 横幅视图。为了做到这一点，我一直试图在我的应用程序委托中创建一个单例类，但我一直收到错误消息，“接口类型'iAdClass'不能按值返回。” 我不知道如何解决这个问题，我对单例的设置也可能不正确，所以任何帮助也将不胜感激。

```
#import <UIKit/UIKit.h>

@class ViewController;
@class iAdClass;

@interface AppDelegate : UIResponder <UIApplicationDelegate>
@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) ViewController *viewController;

@property (assign) iAdClass*iADObject;
+ (AppDelegate*) sharedApplication;
+ (iAdClass)sharedAd;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:53:30.560

嗨，我这样做了，但如果没有互联网连接，我找不到如何删除添加

[如何为 iAd 创建全局引用并在多个 Viewcontroller 中实现](https://stackoverflow.com/questions/10499703/how-to-create-a-global-reference-for-iad-and-implement-in-multiple-viewcontrolle)

# php - MySQL 显示从和到的行

> ID：11856404
> 
> 赞同：0
> 
> 时间：2012-08-08T01:19:38.517
> 
> 标签：php, mysql, rows

我在数据库中有一本书，我想显示来自和去往的页面。例如

从第 5 页到第 7 页..

我该怎么做？现在我只能从以下位置获取页面：

例如；

```
$getPages = mysql_query("SELECT * FROM  book WHERE pags='5'") or die(mysql_error());

while($rowPages = mysql_fetch_array($getPages)) {

$page = $rowAR['pageText'];
echo $page;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T01:23:44.823

```
$getPages = mysql_query("SELECT * FROM  book WHERE pags>='5' AND pags<='7'") or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T01:23:48.500

假设您的数据库表每行包含一页：

```
SELECT * FROM book WHERE page BETWEEN 5 AND 7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T01:25:34.993

您可以使用 MYSQL 的 LIMIT 命令返回某些行：

前任。

SELECT * FROM books LIMIT 15, 30

此脚本返回 books 表中第 15 行之后的前 30 行。

其他示例：SELECT * FROM tbl LIMIT 5,10；# 检索第 6-15 行

# ruby-on-rails - Rails 将哈希数组映射到单个哈希

> ID：11856407
> 
> 赞同：98
> 
> 时间：2012-08-08T01:20:49.187
> 
> 标签：ruby-on-rails, ruby, arrays, hash

我有一个像这样的哈希数组：

```
 [{"testPARAM1"=>"testVAL1"}, {"testPARAM2"=>"testVAL2"}] 
```

我正在尝试将其映射到单个哈希上，如下所示：

```
{"testPARAM2"=>"testVAL2", "testPARAM1"=>"testVAL1"} 
```

我已经使用

```
 par={}
  mitem["params"].each { |h| h.each {|k,v| par[k]=v} } 
```

但我想知道是否有可能以更惯用的方式来做到这一点（最好不使用局部变量）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2012-08-08T01:54:19.013

你可以创作`Enumerable#reduce`并`Hash#merge`完成你想要的。

```
input = [{"testPARAM1"=>"testVAL1"}, {"testPARAM2"=>"testVAL2"}]
input.reduce({}, :merge)
  is {"testPARAM2"=>"testVAL2", "testPARAM1"=>"testVAL1"} 
```

减少数组有点像在它的每个元素之间粘贴一个方法调用。

例如`[1, 2, 3].reduce(0, :+)`就像说`0 + 1 + 2 + 3`和给予`6`。

在我们的例子中，我们做了类似的事情，但是使用了合并两个哈希的合并函数。

```
[{:a => 1}, {:b => 2}, {:c => 3}].reduce({}, :merge)
  is {}.merge({:a => 1}.merge({:b => 2}.merge({:c => 3})))
  is {:a => 1, :b => 2, :c => 3} 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-08-08T01:51:51.090

怎么样：

```
h = [{"testPARAM1"=>"testVAL1"}, {"testPARAM2"=>"testVAL2"}]
r = h.inject(:merge) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-08T01:51:09.853

使用[#inject](http://rdoc.info/stdlib/core/Enumerable%3ainject)

```
hashes = [{"testPARAM1"=>"testVAL1"}, {"testPARAM2"=>"testVAL2"}]
merged = hashes.inject({}) { |aggregate, hash| aggregate.merge hash }
merged # => {"testPARAM1"=>"testVAL1", "testPARAM2"=>"testVAL2"} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2021-08-11T15:36:00.213

到目前为止，每个答案都建议使用`Enumerable#reduce`（或`inject`别名）+ `Hash#merge`，但要注意，虽然干净、简洁且易于阅读，但该解决方案将非常耗时，并且在大型数组上占用大量内存。

我已经编译了不同的解决方案并对其进行了基准测试。

## 一些选项

```
a = [{'a' => {'x' => 1}}, {'b' => {'x' => 2}}]

# to_h
a.to_h { |h| [h.keys.first, h.values.first] }

# each_with_object
a.each_with_object({}) { |x, h| h.store(x.keys.first, x.values.first) }
# each_with_object (nested)
a.each_with_object({}) { |x, h| x.each { |k, v| h.store(k, v) } }
# map.with_object
a.map.with_object({}) { |x, h| h.store(x.keys.first, x.values.first) }
# map.with_object (nested)
a.map.with_object({}) { |x, h| x.each { |k, v| h.store(k, v) } }

# reduce + merge
a.reduce(:merge) # take wayyyyyy to much time on large arrays because Hash#merge creates a new hash on each iteration
# reduce + merge!
a.reduce(:merge!) # will modify a in an unexpected way 
```

## 基准脚本

使用[bmbm](https://ruby-doc.org/stdlib-2.5.3/libdoc/benchmark/rdoc/Benchmark.html#method-c-bmbm)很重要，而不是`bm`因为内存分配和垃圾收集的成本而避免差异。

```
require 'benchmark'

a = (1..50_000).map { |x| { "a#{x}" => { 'x' => x } } }

Benchmark.bmbm do |x|
  x.report('to_h:') { a.to_h { |h| [h.keys.first, h.values.first] } }
  x.report('each_with_object:') { a.each_with_object({}) { |x, h| h.store(x.keys.first, x.values.first) } }
  x.report('each_with_object (nested):') { a.each_with_object({}) { |x, h| x.each { |k, v| h.store(k, v) } } }
  x.report('map.with_object:') { a.map.with_object({}) { |x, h| h.store(x.keys.first, x.values.first) } }
  x.report('map.with_object (nested):') { a.map.with_object({}) { |x, h| x.each { |k, v| h.store(k, v) } } }
  x.report('reduce + merge:') { a.reduce(:merge) }
  x.report('reduce + merge!:') { a.reduce(:merge!) }
end 
```

注意：我最初使用 1_000_000 个项目数组进行了测试，但是由于`reduce + merge`花费了成倍的时间，因此需要很长时间才能结束。

## 基准测试结果

### 50k 项数组

```
Rehearsal --------------------------------------------------------------
to_h:                        0.031464   0.004003   0.035467 (  0.035644)
each_with_object:            0.018782   0.003025   0.021807 (  0.021978)
each_with_object (nested):   0.018848   0.000000   0.018848 (  0.018973)
map.with_object:             0.022634   0.000000   0.022634 (  0.022777)
map.with_object (nested):    0.020958   0.000222   0.021180 (  0.021325)
reduce + merge:              9.409533   0.222870   9.632403 (  9.713789)
reduce + merge!:             0.008547   0.000000   0.008547 (  0.008627)
----------------------------------------------------- total: 9.760886sec

                                 user     system      total        real
to_h:                        0.019744   0.000000   0.019744 (  0.019851)
each_with_object:            0.018324   0.000000   0.018324 (  0.018395)
each_with_object (nested):   0.029053   0.000000   0.029053 (  0.029251)
map.with_object:             0.021635   0.000000   0.021635 (  0.021782)
map.with_object (nested):    0.028842   0.000005   0.028847 (  0.029046)
reduce + merge:             17.331742   6.387505  23.719247 ( 23.925125)
reduce + merge!:             0.008255   0.000395   0.008650 (  0.008681) 
```

### 2M 个项目数组（不包括`reduce + merge`）

```
Rehearsal --------------------------------------------------------------
to_h:                        2.036005   0.062571   2.098576 (  2.116110)
each_with_object:            1.241308   0.023036   1.264344 (  1.273338)
each_with_object (nested):   1.126841   0.039636   1.166477 (  1.173382)
map.with_object:             2.208696   0.026286   2.234982 (  2.252559)
map.with_object (nested):    1.238949   0.023128   1.262077 (  1.270945)
reduce + merge!:             0.777382   0.013279   0.790661 (  0.797180)
----------------------------------------------------- total: 8.817117sec

                                 user     system      total        real
to_h:                        1.237030   0.000000   1.237030 (  1.247476)
each_with_object:            1.361288   0.016369   1.377657 (  1.388984)
each_with_object (nested):   1.765759   0.000000   1.765759 (  1.776274)
map.with_object:             1.439949   0.029580   1.469529 (  1.481832)
map.with_object (nested):    2.016688   0.019809   2.036497 (  2.051029)
reduce + merge!:             0.788528   0.000000   0.788528 (  0.794186) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-24T16:57:10.827

在这里，您可以使用[Enumerable类中的](https://apidock.com/ruby/Enumerable)[注入](https://apidock.com/ruby/Enumerable/inject)或[减少](https://apidock.com/ruby/Enumerable/reduce)，因为它们都是彼此的别名，因此两者都没有性能优势。

```
 sample = [{"testPARAM1"=>"testVAL1"}, {"testPARAM2"=>"testVAL2"}]

 result1 = sample.reduce(:merge)
 # {"testPARAM1"=>"testVAL1", "testPARAM2"=>"testVAL2"}

 result2 = sample.inject(:merge)
 # {"testPARAM1"=>"testVAL1", "testPARAM2"=>"testVAL2"} 
```

# ajax - rails ajax请求不起作用

> ID：11856408
> 
> 赞同：0
> 
> 时间：2012-08-08T01:21:10.857
> 
> 标签：ajax, ruby-on-rails-3

我对ajax有一些问题

此请求**GET`http://localhost:3000/projects/new`** (304 Not Modified) 确实有效，它从响应中执行 javascript：

```
$('#add-project-button').hide();
$('#project-form').append("<form accept-charset=\"UTF-8\" action=\"/projects\" class=\"new_project\" data-remote=\"true\" id=\"new_project\" method=\"post\"><div style=\"margin:0;padding:0;display:inline\"><input name=\"utf8\" type=\"hidden\" value=\"&#x2713;\" /><input name=\"authenticity_token\" type=\"hidden\" value=\"gzu9DETiVV8N+OtRnkdYpD6aa0/RbM7i2H+nkQ0yXGc=\" /><\/div>\n  <div class=\"field\">\n    <label for=\"project_name\">Name<\/label><br />\n    <input id=\"project_name\" name=\"project[name]\" size=\"30\" type=\"text\" />\n  <\/div>\n  <div class=\"actions\"><input name=\"commit\" type=\"submit\" value=\"Create Project\" /><\/div>\n<\/form>"); 
```

但另一个请求**POST`http://localhost:3000/projects`** (200 OK) 似乎没问题，但响应为空，没有 javascript 正在执行，但服务器回答没问题：

```
Rendered tasks/_task.html.erb (0.0ms)
  Rendered projects/_project.html.erb (4.5ms)
  Rendered shared/_create.js.erb (5.4ms)
  Rendered projects/create.js.erb (6.1ms)
Completed 200 OK in 96ms (Views: 8.6ms | ActiveRecord: 84.9ms) 
```

所以我猜在这种情况下浏览器不应该从服务器执行javascript。

可能是什么问题？如何让浏览器接收到 javascript 并执行它？谢谢。

更新：发出ajax请求的表单：

```
<%= form_for(@project, :remote => true) do |f| %>
  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="actions"><%= f.submit %></div>
<% end %> 
```

控制器动作：

```
def create
  @project = current_user.projects.build(params[:project])
  respond_with(@project.tap(&:save))
end 
```

也许问题是由于使用 partial 作为布局，**projects/create.js.erb 引起**的：

```
<% render :layout => '/shared/create', locals: { obj: @project } do %>
  $('#project-container').append("<%= escape_javascript render(@project) %>");
  $('#add-project-button').show('fast');
  $('#project-form').hide('fast', function(){ $('#project-form').empty(); });
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:10:41.160

问题很简单，我忘记在erb中输入<%=，所以应该是：

```
<%= render :layout => '/shared/create', locals: { obj: @project } do %>
  $('#project-container').append("<%= escape_javascript render(@project) %>");
  $('#add-project-button').show('fast');
  $('#project-form').hide('fast', function(){ $('#project-form').empty(); });
<% end %> 
```

# c - sparkfun 2x16 LCD 上的 Arduino 滚动

> ID：11856409
> 
> 赞同：0
> 
> 时间：2012-08-08T01:21:17.033
> 
> 标签：c, scroll, arduino, lcd

当我想显示大于 32 个字符的内容时。我想让 LCD 滚动，我已经尝试过命令标志`0x10`，有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:01:19.307

您还没有指出您是尝试水平滚动还是垂直滚动。

水平滚动在 lcd 库中是原生的。使用自动滚动或 scrollDisplayLeft/Right

```
// include the library code:
#include <LiquidCrystal.h>

// initialize the library with the numbers of the interface pins
LiquidCrystal lcd(12, 11, 5, 4, 3, 2);

void setup() {
  // set up the LCD's number of columns and rows: 
  lcd.begin(16,2);
 }

void loop() {

// set the cursor to (16,1):
lcd.setCursor(16,1);
// set the display to automatically scroll:
lcd.autoscroll();
// print from 0 to 9:
for (int thisChar = 0; thisChar < 10; thisChar++) {
 lcd.print(thisChar);
 delay(500);
}
// turn off automatic scrolling
lcd.noAutoscroll();

// clear screen for the next loop:
lcd.clear();
} 
```

对于垂直滚动，您需要手动创建一个操作，将文本从第 2 行复制到第 1 行，并用新文本填充第 2 行。

# ruby - Ruby 等于 vs 比较；

> ID：11856410
> 
> 赞同：1
> 
> 时间：2012-08-08T01:21:21.383
> 
> 标签：ruby, ruby-1.9.3

`Equal to`我需要帮助来理解 -和有什么区别`Comparison`？

这是案例

```
 x == y means `Equal to`

    x = 10 and y = 10

    puts "X and Y are equal" if x == y

    puts "X and Y are equal" if x <=> y 
```

我知道何时何地可以使用等于，但**何时何地可以使用比较 <=>**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T01:27:52.993

什么时候比较？它返回 -1, 0, 1。例如，按名字对用户进行排序：

```
users_by_first = users.sort { |u1, u2| u1.fname <=> u2.fname } 
```

这是[另一个关于宇宙飞船操作员的问题](https://stackoverflow.com/questions/827649/ruby-spaceship-operator)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T01:28:07.840

> <=> 通用比较运算符。返回 -1、0 或 +1，具体取决于其接收者是小于、等于还是大于其参数。

[http://ruby-doc.org/docs/ProgrammingRuby/html/tut_expressions.html](http://ruby-doc.org/docs/ProgrammingRuby/html/tut_expressions.html)

一方面，这对于排序很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-29T16:54:47.550

## 等式运算符：== 和 !=

== 运算符，也称为相等或双重相等，如果两个对象相等则返回 true，否则返回 false。

```
"koan" == "koan" # Output: => true 
```

!= 运算符，AKA 不等式或 bang-tilde，与 == 相反。如果两个对象不相等，它将返回 true，如果它们相等，则返回 false。

```
"koan" != "discursive thought" # Output: => true 
```

请注意，具有不同顺序的相同元素的两个数组不相等，相同字母的大写和小写版本不相等等等。

在比较不同类型的数字（例如，整数和浮点数）时，如果它们的数值相同，== 将返回 true。

```
2 == 2.0 # Output: => true 
```

## 比较运算符

诸如数字和字符串之类的对象可以（在它们自身之间）根据是否大于或小于其他对象进行比较，它们提供了 <=> 方法，也称为 spaceship 方法。比较两个对象时，如果第一个对象小于第二个对象 (a < b)，<=> 返回 -1，如果它们相等 (a == b)，则返回 0，如果第一个对象大于第二个对象，则返回 1 ( a > b)。

```
5 <=> 8  # Output:  => -1
5 <=> 5  # Output: => 0
8 <=> 5  # Output: => 1 
```

大多数可比较或可排序的对象类，例如 Integer、Float、Time 和 String，都包含一个名为 Comparable 的 mixin，它提供以下比较运算符：<（小于）、<=（小于或等于）、==（等于） , >（大于），>=（大于或等于）。这些方法在引擎盖下使用了宇宙飞船操作符。

比较运算符可用于上述所有类的对象，如下例所示。

```
# String
"a" < "b" # Output: => true
"a" > "b" # Output: => false

# Symbol
:a < :b  # Output: => true
:a > :b  # Output: => false

# Fixnum (subclass of Integer)
1 < 2  # Output: => true
2 >= 2  # Output: => true

# Float
1.0 < 2.0 # Output: => true
2.0 >= 2.0 # Output: => true

# Time
Time.local(2016, 5, 28) < Time.local(2016, 5, 29) # Output: => true 
```

在比较不同类的数量时，比较运算符将隐式执行简单的类型转换。

```
# Fixnum vs. Float
2 < 3.0  # Output: => true
2.0 > 3  # Output: => false 
```

有关 Ruby 运算符的更多信息，请参阅[此博客文章](http://www.zenruby.info/2016/05/ruby-operators-equality-comparison.html)。

# java - 停止 Http 方法之一 Online

> ID：11856417
> 
> 赞同：1
> 
> 时间：2012-08-08T01:22:07.173
> 
> 标签：java, jboss

我的应用程序中有几个 http 方法托管在 JBoss 中。现在我正在尝试找到某种热方式来禁用其中一个，例如单击某个页面中的按钮或调用某个 http 方法。我所说的“禁用它”的意思是使任何打算向其发送 get/post 请求的 Web 客户端都将失败。也许我们可以说 Web 客户端会得到一个 http 404 响应。谁能给我一些解决方案？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:00:02.740

我认为[JMX](http://java.sun.com/developer/technicalArticles/J2SE/jmx.html)适合这种情况。

您可以非常轻松地创建一个 MBean（托管 Bean，JMX 的一个组件），其托管属性对应于`boolean`您希望禁用的每个端点的 's。注册它是困难的部分，但是有一些库可以让 JMX 的使用变得更容易。 [Spring](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jmx.html)对设置和使用 MBean 有很好的支持。

就 JMX 客户端而言，我通常使用 JDK 附带的 VisualVM。通过它，您可以在运行时调用 MBean 上的方法，甚至可以更改它们的属性。

# c# - 偶数的斐波那契数列和

> ID：11856419
> 
> 赞同：2
> 
> 时间：2012-08-08T01:22:36.447
> 
> 标签：c#, .net, fibonacci

我在stackoverflow上遇到了这个问题：

> “我在[Project Euler](https://projecteuler.net)中遇到了这个问题。问题是这样的：斐波那契数列中的每个新项都是通过添加前两项来生成的。从 1 和 2 开始，前 10 个项将是： 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ... 求序列中所有不超过四百万的偶数项之和。”

最佳答案是这个（在 VS2010 中没有为我编译......为什么？）：

```
 IEnumerable<int> Fibonacci()
    {
        int n1 = 0;
        int n2 = 1;

        yield return 1;
        while (true)
        {
          int n = n1 + n2;
          n1 = n2;
          n2 = n;
          yield return n;
        }
    }

    long result=0;

    foreach (int i in Fibonacci().TakeWhile(i => i<4000000).Where(i % 2 == 0))
    {
        result+=i;
    }
    Console.WriteLine(result); 
```

我决定在寻找答案之前自己尝试一下并想出了这个（请告诉我为什么或为什么不是解决这个问题的好方法或坏方法）：

我在课堂上写了它，因为将来我可以在课堂上添加更多内容，而不仅仅是解决单个斐波那契问题。

```
class Fibonacci
{
    private int prevNum1 = 1;
    private int prevNum2 = 2;
    private int sum = 0;

    public int GetSum(int min, int max)
    {
        prevNum1 = min;
        prevNum2 = prevNum1 + prevNum1;
        if (prevNum1 % 2 == 0)
        {
            sum += prevNum1;
        }
        if (prevNum2 % 2 == 0)
        {
            sum += prevNum2;
        }
        int fNum = 0;
        while (prevNum2 <= max)
        {
            fNum = prevNum1 + prevNum2;
            if (fNum % 2 == 0)
            {
                //is an even number...add to total
                sum += fNum;
            }
            prevNum1 = prevNum2;
            prevNum2 = fNum;

        }

        return sum;
    }

}

        Fibonacci Fib = new Fibonacci();
        int sum = Fib.GetSum(1, 4000000);

        Console.WriteLine("Sum of all even Fibonacci numbers 1-4,000,000 = {0}", sum); 
```

同样，我正在寻找关于为什么这是解决此问题的好方法或坏方法的答案。还有为什么第一个解决方案无法编译。我是一个初级程序员，正在努力学习。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T01:29:12.493

有了这个，它必须编译：

```
foreach (int i in Fibonacci().TakeWhile(i => i < 4000000).Where(i => i % 2 == 0))
{
    result += i;
} 
```

代码没有编译的问题是糟糕的 lambda 表达式，它是：

```
.Where(i % 2 == 0) 
```

但必须是

```
.Where(i => i % 2 == 0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T01:38:48.383

由于这一行，代码无法编译：

```
foreach (int i in Fibonacci().TakeWhile(i => i<4000000).Where(i % 2 == 0)) 
```

首先， .Where() 是一种扩展方法（google it），可以在集合上调用（如本例中的整数 IEnumerable）。它返回另一个集合，其中包含满足某些条件的任何元素。

注意 .Where() 的参数是一个产生布尔值的表达式，真或假。

```
i % 2 == 0 
```

.Where() 不接受 bool 作为参数，在这种情况下，适当的参数是类型

```
Func<int,bool> 
```

这基本上意味着一个以 int 作为参数并返回 bool 的函数。你可以很简单地定义这些

```
// defines a function taking an int, returning true if that int is even
Func<int,bool> foo = i => i % 2 == 0 
```

所以在这种情况下使用 .Where() 的正确方法是

```
foreach (int i in Fibonacci().TakeWhile(i => i<4000000).Where(i => i % 2 == 0)) 
```

所以你可以看到 .Where() 接受我们提供的函数并将其应用于每个数字，返回一个偶数集合。

yield 关键字还有一些其他的神奇之处，请随时用谷歌搜索，但它更像是一个高级主题。

# c# - 在c#中检索xml文件中具有相同关键字的其他数据

> ID：11856421
> 
> 赞同：1
> 
> 时间：2012-08-08T01:23:02.270
> 
> 标签：c#, xml

我将所有数据保存在 xml 文件中。

```
<myself>
  <name>sara</name>
  <age>20</age>
  <gender>female</gender>
</myself>
<myself>
   <name>bob</name>
   <age>29</age>
   <gender>male</gender>
</myself> 
```

并有搜索框，用户可以根据类型和关键字搜索所有数据。为此，我输入了两种类型；按名称和按性别。

因此，一旦用户选择姓名并输入关键字`sara`，输出将显示有关她的所有信息。

输出示例应为 display

```
sara
20
female 
```

对于这个输出，我让它与每个自己的文本框一起显示。有 3 个文本框标题名称、年龄和性别。

```
XmlDocument xml = new XmlDocument();            
        xml.Load("C:\\Users\\HDAdmin\\Documents\\Fatty\\SliceEngine\\SliceEngine\\bin\\Debug\\saya.xml");
        XmlNodeList xnList = xml.SelectNodes("/myself");            
        foreach (XmlNode xn in xnList)
        {                
            string name = xn.InnerText;                
            nameBox.Text = nameBox.Text + " " + name;
            string age = xn.InnerText;                
            ageBox.Text = ageBox.Text + " " + age;
            string gender = xn.InnerText;                
            genderBox.Text = genderBox.Text + " " + gender;
        } 
```

我试过使用`XmlNodeList xnList = xml.SelectNodes("/myself");`，但它会打印出关于 sara 和 bob 的所有信息。

所以我猜我可以让xml文件像

```
<name>sara
   <gender>female
       <age>20</age>
   </gender>
</name> 
```

但我认为这行不通。有办法吗？

这是保存数据的方法。

```
XmlDocument xmlDoc = new XmlDocument();
                xmlDoc.Load("C:\\Users\\HDAdmin\\Documents\\SliceEngine\\SliceEngine\\bin\\Debug\\saya.xml");
                XmlElement contentElement = xmlDoc.CreateElement("myself");

                XmlElement nameEl = xmlDoc.CreateElement("name");
                XmlText xmlText = xmlDoc.CreateTextNode(berjaya[1]);
                nameEl.AppendChild(xmlText);
                contentElement.AppendChild(nameEl);
                xmlDoc.DocumentElement.AppendChild(contentElement);

                XmlElement ageEl = xmlDoc.CreateElement("age");
                ageEl.InnerText = berjaya[3];
                contentElement.AppendChild(ageEl);
                xmlDoc.DocumentElement.AppendChild(contentElement);

                XmlElement genEl = xmlDoc.CreateElement("gender");
                genEl.InnerText = berjaya[39];
                contentElement.AppendChild(genEl);
                xmlDoc.DocumentElement.AppendChild(contentElement); 
```

++++++++++++====问题已解决====++++++++++++++++++++++

谢谢您的帮助。这已经解决了。我正在使用@horgh 给出的答案。

所以这就是我学到的。

> 1-在我的 xml 文件中，我需要有主标签。
> 
> 2- 使用 if 循环从关键字中检索数据。
> 
> 并查看其他数据，它将是这样的：

```
string name = xn.OfType<XmlNode>().FirstOrDefault(n => n.Name == "name").FirstChild.Value;
            if (name == "sara")
            {
                nameBox.Text = nameBox.Text + " " + name;
                string age = xn.OfType<XmlNode>().FirstOrDefault(n => n.Name == "age").FirstChild.Value;
                ageBox.Text = ageBox.Text + " " + age;
                string gender = xn.OfType<XmlNode>().FirstOrDefault(n => n.Name == "gender").FirstChild.Value;
                genderBox.Text = genderBox.Text + " " + gender; 

            } 
```

有关更多信息，您可以在下面看到。再次感谢您提供的所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T01:53:39.873

这是示例

```
 [Test]
    public void Test()
    {
        XElement root = XElement.Load(@"C:\Data.xml");
        XElement person = FindByName(root, "sara");
        if (person == null)
        {
            return;
        }
        Console.WriteLine("Name: {0}, Age: {1}, Gender: {2}",
                          person.Element("name").Value,
                          person.Element("age").Value,
                          person.Element("age").Value);
    }

    private static XElement FindByName(XContainer root, string name)
    {
        return root.Descendants()
            .Where(x => x.Name.LocalName == "name" && x.Value == name)
            .Select(x => x.Parent)
            .FirstOrDefault();
    } 
```

XML 文件：已添加根元素

```
<root>
  <myself>
    <name>sara</name>
    <age>20</age>
    <gender>female</gender>
  </myself>
  <myself>
    <name>bob</name>
    <age>29</age>
    <gender>male</gender>
  </myself>
</root> 
```

控制台输出：

```
Name: sara, Age: 20, Gender: 20 
```

建议：

*   FindByName 可能应该返回超过 1 个元素，即`List<XElement>`
*   添加具有 Name、Age、Gender 属性的 Person 类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T01:44:26.290

一开始报错​​，说xml没有根元素，所以加了根标签：

```
<main>
 <myself>
  <name>sara</name>
  <age>20</age>
  <gender>female</gender>
</myself>
<myself>
  <name>bob</name>
  <age>29</age>
  <gender>male</gender>
</myself> 
```

比我添加了对请求名称的检查，即“sara”：

```
if (name == "sara") 
```

因此，生成的代码是：

```
 XmlDocument xml = new XmlDocument();
        xml.Load("1.xml");
        XmlNodeList xnList = xml.SelectNodes("/main/myself");
        foreach (XmlNode xn in xnList)
        {
            string name = xn.OfType<XmlNode>().FirstOrDefault(n => n.Name == "name").FirstChild.Value;
            if (name == "sara")
            {
                nameBox.Text = nameBox.Text + " " + name;
                string age = xn.OfType<XmlNode>().FirstOrDefault(n => n.Name == "age").FirstChild.Value;
                ageBox.Text = ageBox.Text + " " + age;
                string gender = xn.OfType<XmlNode>().FirstOrDefault(n => n.Name == "gender").FirstChild.Value;
                genderBox.Text = genderBox.Text + " " + gender;                                        
            }
        } 
```

输出是：

```
sara
20
female 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T01:45:52.950

怎么样

```
XmlDocument xml = new XmlDocument();            
xml.Load("YourFilePath");        
foreach(var xml in doc.Elements("rootelement").Elements("myself").Elements("name")) 
{
     //Do what you want.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T01:48:09.880

您指定的 XPath 将选择所有名为“myself”的元素，它会正确返回 sara 和 bob 的数据。

尝试在您的 SelectNodes 调用中使用“//myself[name=sara]”。它应该只返回名称为 sara 的自己的元素。

PS：我还建议将您自己的元素重命名为 Person 或类似的东西。:)

# hadoop - 使用 Hadoop 和相关项目分析不断变化的使用模式

> ID：11856428
> 
> 赞同：0
> 
> 时间：2012-08-08T01:23:46.323
> 
> 标签：hadoop, cassandra, hive, bigdata

我们正在制定策略，分析用户对我们网站上超过 100 万件商品的“兴趣”（点击、喜欢等），以生成“相似商品”列表。

为了处理大量原始数据，我们正在学习 Hadoop、Hive 和相关项目。

我的问题是关于这个问题：Hadoop/Hive 等似乎更倾向于数据转储，其次是处理周期。据推测，处理周期的结束是对相关项目之间链接的索引图的扩展。

如果我到目前为止一切正常，在这些情况下通常如何处理数据：即

*   是否每隔一段时间重新分析原始用户数据以重新构建链接的索引图？
*   我们是否在数据进入时对其进行流式传输、分析并更新数据存储？
*   随着分析的结果数据发生变化，我们通常是逐个更新还是批量重新处理？
*   Cassandra 是否比 Hive/HDFS 更好地解决了这个用例？

我希望更好地理解这种大数据处理的常用方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:32:20.850

我认为这是 Hadoop 系列工具的一个很好的用例。在我看来，HDFS 和 Flume 可能是显而易见的选择，我会根据您感兴趣的分析类型、组织数据和查询数据的灵活性来研究 HBase 或 Hive。

> 是否每隔一段时间重新分析原始用户数据以重新构建链接的索引图？

答：Hadoop 非常适合这一点。我会为此使用 HBase，但还有其他选择。

> 我们是否在数据进入时对其进行流式传输、分析并更新数据存储？

答：Flume 对此有好处。

> 随着分析的结果数据发生变化，我们通常是逐个更新还是批量重新处理？

答：您可以选择两者都做。Bulk 可能是 HDFS 上的 MapReduce 作业，其中可以通过 HBase 列族值或 Hive 行逐个管理。如果您提供更多详细信息，我可能会更准确。

> Cassandra 是否比 Hive/HDFS 更好地解决了这个用例？

答：Cassandra 和 HBase 都是 Google BigTable 的实现。我认为这种选择取决于您需要如何组织、访问、分析和更新数据。如果需要，我可以提供更多指导。HBase 通常更适合半结构化、高 R/W 处理。

DHFS 通常是灵活、可扩展的数据转储存储的好选择，正如您所说的那样。 [Flume](https://cwiki.apache.org/FLUME/)适用于移动流数据。

如果您正在考虑图表，我也会考虑研究 Titan 和 HBase。

如果您对面向表格的数据和使用类似 SQL 的查询感兴趣，Hive 将适用。

# entity-framework - EF 缓存对 SQL Server CE 3.5 的工作方式是否不同？

> ID：11856429
> 
> 赞同：0
> 
> 时间：2012-08-08T01:23:46.710
> 
> 标签：entity-framework

我一直在使用 Entity Framework 和 SQL Server 3.5 开发一些单用户桌面应用程序。我以为我在某处读过，一旦记录在一个上下文的 EF 缓存中，如果使用不同的上下文删除它们，即使执行新查询，它们也不会从第一个上下文的缓存中删除。因此，我一直在编写非常低效且令人困惑的代码，因此每当另一种方法使用其自己的上下文修改数据库时，我就可以处理上下文并实例化一个新的。

我最近发现了一些代码，我没有在这些条件下重新实例化第一个上下文，但它仍然有效。我写了一个简单的测试方法来看看发生了什么：

```
 using (UnitsDefinitionEntities context1 = new UnitsDefinitionEntities())
        {
            List<RealmDef> rdl1 = (from RealmDef rd in context1.RealmDefs
                                   select rd).ToList();
            RealmDef rd1 = RealmDef.CreateRealmDef(100, "TestRealm1", MeasurementSystem.Unknown, 0);
            context1.RealmDefs.AddObject(rd1);
            context1.SaveChanges();
            int rd1ID = rd1.RealmID;

            using (UnitsDefinitionEntities context2
                = new UnitsDefinitionEntities())
            {
                RealmDef rd2 = (from RealmDef r in context2.RealmDefs
                                where r.RealmID == rd1ID select r).Single();
                context2.RealmDefs.DeleteObject(rd2);
                context2.SaveChanges();
                rd2 = null;
            }

            rdl1 = (from RealmDef rd in context1.RealmDefs select rd).ToList(); 
```

在最后一行设置断点我惊讶地发现添加和删除的实体实际上**并没有**被第一个上下文的第二个查询返回！

我有几种可能的解释：

1.  我完全错误地理解，缓存记录在重新查询时不会被删除。
2.  EF 在缓存方面反复无常，这是一个运气问题。
3.  EF 4.1 中的缓存已更改。
4.  当两个上下文在同一进程中实例化时，不会出现此问题。
5.  SQL CE 3.5 的缓存工作方式与其他版本的 SQL Server 不同。

我怀疑答案可能是最后两个选项之一。如果我不必这样做，我真的宁愿不必处理不断为单用户桌面应用程序重新实例化上下文的所有麻烦。

对于使用 SQL CE（3.5 和 4）的单用户桌面应用程序，我可以依赖这种发现的行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T01:56:25.323

当您在 ObjectSet 上运行第二个查询时，它正在重新查询数据库，这就是为什么它反映了您的第二个上下文所公开的更改。在我们深入讨论之前，您确定要像您解释的那样拥有 2 个上下文吗？上下文应该是短暂的，因此如果您将列表缓存在内存中或做其他类似的事情可能会更好。

话虽如此，您可以通过调用`ObjectStateManager.GetObjectStateEntries`并查看那里的商店来访问本地商店。但是，您可能正在寻找的是 .Local 存储，它由 EF 4.2 及更高版本中的 DbSets 提供。有关这方面的更多信息，请参阅[此博客文章。](http://msdn.microsoft.com/en-us/magazine/hh781018.aspx)

从您的类名来看，您似乎正在使用 edmx，因此您需要对文件进行一些更改，以使您的上下文从 DbSet 继承到对象集。 [这篇文章](https://stackoverflow.com/questions/9075887/why-can-i-not-see-the-property-local-when-using-entity-framework)可以告诉你如何

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:50:51.523

显然，解释#1 更接近事实。在示例末尾插入以下语句：

```
var cached = context1.ObjectStateManager.GetObjectStateEntries(System.Data.EntityState.Unchanged); 
```

显示该记录实际上仍在缓存中。Mark Oreta 基本上是正确的，因为在上面的示例中实际上重新查询了数据库。

但是，导航属性显然表现不同，例如：

```
 RealmDef distance = (from RealmDef rd in context1.RealmDefs
                             where rd.Name == "Distance"
                             select rd).Single();
        SystemDef metric = (from SystemDef sd in context1.SystemDefs
                            where sd.Name == "Metric"
                            select sd).Single();
        RealmSystem rs1 = (from RealmSystem rs in distance.RealmSystems
                           where rs.SystemID == metric.SystemID
                           select rs).Single();

        UnitDef ud1 = UnitDef.CreateUnitDef(distance.RealmID, metric.SystemID, 100, "testunit");
        rs1.UnitDefs.Add(ud1);
        context1.SaveChanges();

        using (UnitsDefinitionEntities context2 = new UnitsDefinitionEntities())
        {
            UnitDef ud2 = (from UnitDef ud in context2.UnitDefs
                           where ud.Name == "testunit"
                           select ud).Single();
            context2.UnitDefs.DeleteObject(ud2);
            context2.SaveChanges();
        }

        udList = (from UnitDef ud in rs1.UnitDefs select ud).ToList(); 
```

在这种情况下，在最后一个语句之后中断表明最后一个查询从缓存中返回已删除的条目。这是我困惑的根源。

我想我现在对 Julia Lerman 所说的“查询模型，而不是数据库”的含义有了更好的理解。据我了解，在前面的示例中，我正在查询数据库。在这种情况下，我正在查询模型。在前一种情况下查询数据库恰好可以达到我想要的效果，而在后一种情况下查询模型不会达到预期的效果。（这显然是我理解的问题，而不是 Julia 的建议。）

# javascript - twitter 引导按钮切换不起作用

> ID：11856430
> 
> 赞同：0
> 
> 时间：2012-08-08T01:23:47.110
> 
> 标签：javascript, jquery, twitter-bootstrap

我有 bootstrap-button.js 并有这个标记，但是当我点击按钮时，它不会切换它以显示它已被点击。关于缺少什么的任何提示？

```
<div class="control-group">
  <div class="btn-group" data-toggle="buttons-checkbox" data-toggle-name="checkbox_group">
    <button class="btn" id="chkbox1"  type="button" value="1Fail" data-toggle="button"> 1 Failure </button>
    <button class="btn" id="chkbox2"  type="button" value="2Fail" data-toggle="button"> 2 Failure </button>
    <button class="btn" id="chkbox3" type="button" value="OtherFail" data-toggle="button"> Other Failure </button>
  </div>
  <input type="hidden" name="checkbox_group" value="1"/>
</div> 
```

问题的第二部分是如何将数据输入 javascript，以了解单击了哪个按钮？如果点击了 1Fail，它应该切换和 js 代码来检测点击了 1Fail。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:30:59.873

问题似乎是您添加`data-toggle="button"`了每个检查按钮，这不是必需的。因为你已经`data-toggle="buttons-checkbox"`在外部`div`元素了。

所以把它改成这样：

```
 <div class="control-group">
      <div class="btn-group" data-toggle="buttons-checkbox" data-toggle-name="checkbox_group">
        <button class="btn" id="chkbox1"  type="button" value="1Fail" > 1 Failure </button>
        <button class="btn" id="chkbox2"  type="button" value="2Fail" > 2 Failure </button>
        <button class="btn" id="chkbox3" type="button" value="OtherFail" > Other Failure </button>
      </div>
      <input type="hidden" name="checkbox_group" value="1"/>
</div> 
```

**编辑**：

对不起，我没有注意到你的第二个问题。当一个按钮被点击时，一个`active`类会被添加到它上面，所以你可以用 jQuery 的`hasClass`方法来检测它。

# android - 用户取消广告

> ID：11856437
> 
> 赞同：0
> 
> 时间：2012-08-08T01:24:54.387
> 
> 标签：android, admob

嘿，我只是好奇 admob 库或其他广告类型中是否内置了一些东西，我可以将 adview 设置为“可取消”并弹出一个受支持的按钮？目前，我只是将我的 adview 放在相对布局中，上面覆盖有一张小图片，上面有一个 onClickListener，然后它会动画并破坏广告。但是，理想情况下，内置按钮会注册用户交互，但我认为这要求太多了......

提前致谢！问候，-皮特

这是我目前的“广告布局”

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:id="@+id/adView"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="#959595"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/ad_Layout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@id/adView"
    android:layout_alignTop="@id/adView" />

<ImageView
    android:id="@+id/cancelbutton"
    android:layout_width="20dp"
    android:layout_height="20dp"
    android:paddingLeft="5dp"
    android:paddingTop="5dp"
    android:layout_alignLeft="@id/adView"
    android:layout_alignTop="@id/adView"
    android:src="@drawable/cancelbutton" />

</RelativeLayout> 
```

# java - 根据条件更改 ActionBar 中的图标

> ID：11856440
> 
> 赞同：2
> 
> 时间：2012-08-08T01:25:13.487
> 
> 标签：java, android, boolean, logic, android-actionbar

当用户按下`ActionBar`. 正在更新的信息是将记录添加到收藏夹页面的标志。

问题

当用户将记录添加或删除到收藏夹时，我希望`ActionBar`更改中的图标。我有一个完整的星形图标和一个空的星形图标。

如果记录是最喜欢的，则该`setIcon`方法显示完整的星形图标，如果记录不是最喜欢的，则显示空的星形图标。

在下面的代码中，您将看到我正在使用 a `boolean isInFavourite`，即`true`when `String fav = "y"`。

输入时`Activity`，`icon`显示正确。

当用户单击`icon`调用该`onMenuItemClick()`方法时，记录已成功更新，但`icon`不会更改。

我无法更改`boolean isInFavourite`记录的更新时间，因为 Eclipse 希望将所有变量设置为`final`

任何人都可以帮我将图标更改为记录更新后。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {

    db = new DBHelper(this);
    db.createDataBase();
    db.openDataBase();

    Bundle bundle = getIntent().getExtras();
    final String rowid = bundle.getString("id");
    final String fav = bundle.getString("fav");

    //Boolean to check if record is a favourite
    final boolean isInFavourite = fav.contentEquals("y");

    menu.add("Add to Favourites")
            .setOnMenuItemClickListener(new OnMenuItemClickListener() {

                public boolean onMenuItemClick(MenuItem item) {

                    String toggle;
                    String message;

                    //Logic to add or remove row from recording.
                    if (isInFavourite) {
                        toggle = "n";
                        message = "Recipe removed from Favourites";
                    } else {
                        toggle = "y";
                        message = "Recipe added to Favourites";
                    }

                    //Update favourite record in database
                    db.updateFavourite(rowid, toggle);
                    db.close();

                    Toast.makeText(getApplicationContext(), message,
                            Toast.LENGTH_LONG).show();

                    return true;
                }

            })

            //Set icon depending on whether record is a favourite or not.
            .setIcon(isInFavourite ? R.drawable.fav_true : R.drawable.fav_false)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

    return true;

} 
```

感谢@dmon 的解决方案

解决方案

```
private DBHelper db = null;

public String fav = null;
public String rowid = null;
public boolean isFav;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ...

    Bundle bundle = getIntent().getExtras();
    rowid = bundle.getString("id");
    fav = bundle.getString("fav");

    if (fav.contentEquals("y")) {
        isFav = true;
    } else {
        isFav = false;
    }

    try {
        db = new DBHelper(this);
        db.createDataBase();
    } catch (IOException e) {
        e.printStackTrace();
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {

    getSupportMenuInflater().inflate(R.menu.menu_settings, menu);

    return true;
}

@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    MenuItem fave = menu.findItem(R.id.add);
    MenuItem unfave = menu.findItem(R.id.remove);

    fave.setVisible(isFav);
    unfave.setVisible(!isFav);

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        onBackPressed();
        return true;
    case R.id.add:
        fav = "n";
        isFav = false;
        updateFav();
        supportInvalidateOptionsMenu();
        Toast("Removed from Favourites");
        return true;
    case R.id.remove:
        fav = "y";
        isFav = true;
        updateFav();
        supportInvalidateOptionsMenu();
        Toast("Added to Favourites");
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
}

public void updateFav (){
        db.openDataBase();
        db.updateFavourite(rowid, fav);
        db.close();
} 
```

XML 文件：res/menu/menu_settings.xml

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
<item
    android:id="@+id/add"
    android:icon="@drawable/good"
    android:showAsAction="always"
    />
<item
    android:id="@+id/remove"
    android:icon="@drawable/bad"
    android:showAsAction="always"/> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T01:46:16.243

最简单的方法是只提供两个不同的按钮并相应地隐藏/显示它们：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
  MenuInflater inf = new MenuInflater(this);
  inf.inflate(R.menu.menu_xml, menu);
  return true;
}

@Override
public boolean onPrepareOptionsMenu(Menu menu) {
  MenuItem fave = menu.findItem(R.id.favorite);
  MenuItem unfave = menu.findItem(R.id.unfavorite);

  fave.setVisible(!isFave);
  unfave.setVisible(isFave);
  return true;
} 
```

然后，当状态更改时，您使选项菜单无效。请注意，您必须有一个具有项目当前状态的全局变量（`isFave`来自哪里）

```
invalidateOptionsMenu(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T01:44:43.040

使 isInFavourite 变量成为全局字段（在方法之外声明它，就在类中）。任何局部变量都必须是 final 的，它们下面的范围才能使用它们。但是，如果您将其设为全局并在上面声明，则它不需要是最终的。

# javascript - 了解正在更新的列

> ID：11856441
> 
> 赞同：0
> 
> 时间：2012-08-08T01:25:32.707
> 
> 标签：javascript, jquery, handsontable

我正在尝试让我了解正在更新的列，但无法找到合适的解决方案。我知道他们正在使用 textarea 来获取输入，然后将值放入表中，但我只是不知道如何找出正在更新的列。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:17:20.380

此方法将告诉您选择了哪些行/列：

```
$('#example1grid').handsontable('getSelected') 
```

这将返回与当前编辑的单元格相同的坐标，除非选择了多个单元格（但即使这样，当前编辑的单元格始终位于选定的单元格内）。

我正在考虑创建一个新方法`getCurrent`或回调`onBeginEditing`来返回当前编辑的单元格。哪个更适合你？我认为回调会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T18:01:49.817

```
onChange: function (data) {
    for (i in data) {
        if(data[i][2] != data[i][3]) {
                var column = $('#dataTableLoc td:nth-child(' + (data[i][1] + 1) + ')')[0].innerText;
        }
    }
} 
```

这显然远非优雅。它将与 button.html 中的“removeRow”示例等任何扩展名冲突，但显然可以进行相应调整。当从 SQL 表中提取数据并尝试使用查询进行更新时，它是必需的。

# objective-c - Objective-C：UILabel 在我看来“卡住”了

> ID：11856446
> 
> 赞同：0
> 
> 时间：2012-08-08T01:26:06.957
> 
> 标签：objective-c, ios

我正在开发一个选项卡式应用程序，该应用程序（除其他外）创建一个简单的 Facebook 提要。Facebook 部分是`UINavigationController`一个主表视图和一个详细视图。当我单击主表视图中的某一行时，它会按预期显示详细视图（以及适当填充的标签）。但是，如果我回到主视图并选择另一行，就会发生一些奇怪的事情。如果“detailLab”标签（即`sizeToFit`'d）在 Detail View 第一次出现时为四行，而在 Detail View 第二次出现时“detailLab”标签为 2 行，那么在第二次出现时在 Detail View 中，“detailLab”将正确显示前两行，但在它们下方将是第一次出现的 Detail View 的最后两行。

[发生这种情况的照片](http://i.imgur.com/7tNcR.png)。

还有一些（希望）相关的代码：

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    CGRect labelFrame = CGRectMake(100, 40, 220, 150);
    detailLab = [[UILabel alloc] initWithFrame:labelFrame];
    [detailLab setTextColor:[UIColor darkGrayColor]];
    detailLab.font = [UIFont systemFontOfSize:14];

    [detailLab setText:detail];
    [detailLab setNumberOfLines:0];
    [detailLab sizeToFit];

    [self.view addSubview:detailLab];

    NSURL *url = [NSURL URLWithString:pictureString];
    NSData *imageData = [[NSData alloc] initWithContentsOfURL:url];
    picture = [UIImage imageWithData:imageData];
    bigImage.image = picture;
    NSLog(@"dateString: %@", dateString);
    dateLabel.text = dateString;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    bigImage = nil;
    detailLab = nil;
    detailLab.hidden = YES;
    // Release any retained subviews of the main view.
    self.detailDescriptionLabel = nil;
} 
```

如果您需要任何其他代码或详细信息，请询问；我很乐意提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:30:10.473

问题是每次`viewWillAppear`被调用时，您都在创建一个新标签，而我假设没有在`viewWillDisappear`. 所以标签堆积起来，一个在另一个之上。

请记住，您可能会被这样调用（忽略不相关的调用）：

```
viewDidLoad

viewWillAppear
viewWillDisappear

viewWillAppear        <- Whoops! Two labels
viweWillDisappear

viewDidUnload 
```

一个更简洁的解决方案是将您的标签视图添加`viewDidLoad`到`viewWillAppear`. 您仍然需要记住在`viewDidUnLoad`.

这就是我的意思（请注意，这只是编译的眼球，因此您可能需要更正一些错别字）：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    detailLab = [[UILabel alloc] initWithFrame:CGRectZero];
    [detailLab setTextColor:[UIColor darkGrayColor]];
    detailLab.font = [UIFont systemFontOfSize:14];
    [self.view addSubview:detailLab];
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    CGRect labelFrame = CGRectMake(100, 40, 220, 150);
    [detailLab setFrame:labelFrame];
    [detailLab setText:detail];
    [detailLab setNumberOfLines:0];
    [detailLab sizeToFit];

    NSURL *url = [NSURL URLWithString:pictureString];
    NSData *imageData = [[NSData alloc] initWithContentsOfURL:url];
    picture = [UIImage imageWithData:imageData];
    bigImage.image = picture;
    NSLog(@"dateString: %@", dateString);
    dateLabel.text = dateString;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    bigImage = nil;
    detailLab = nil;
    detailLab.hidden = YES;
    // Release any retained subviews of the main view.
    self.detailDescriptionLabel = nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T01:43:15.967

这对于主视图到详细视图是正常的 - 令人沮丧，但正常。我遇到问题时找到的解决方案是重置每个 -ViewDidLoad 顶部的标签。

一种选择是在 viewDidUnload 中删除它。另一种方法是每次都重置标签，使用如下所示的一段代码，位于代码实际加载到内容中的部分上方

detailLab = [NSString stringWithFormat:@""];

问题在于，对于大多数主/详细视图的设置，每次添加视图时实际上并没有创建新的详细视图，它只是在主视图部分创建另一个指向同一视图的链接。这很好，但您只需要记住使用 viewDidUnload 批次

希望能帮助到你

# c++ - Opengl，画一个大方块会减慢游戏速度

> ID：11856449
> 
> 赞同：-1
> 
> 时间：2012-08-08T01:26:11.013
> 
> 标签：c++, opengl, glsl, shader

我一直在做一个游戏，遇到了一个非常奇怪的问题。游戏在我的设置中以大约 4k fps 的速度渲染，但在绘制了一个覆盖整个屏幕的彩色正方形 + 稍微多一点作为背景之后，它会下降到 3k fps。将正方形的大小更改为较小的可以使问题消失。

我已经画了 40k 个三角形和粒子系统。

正方形是加载在 VBO 中的三角形条带。

```
GLfloat vBackground[4][3] = {
        { 0.0f, 0.0f, 0.0f },
        { 16.0f, 0.0f, 0.0f },

        { 0.0f, 16.0f, 0.0f },
        { 16.0f, 16.0f, 0.0f }
}; 
```

我使用最简单的着色器：

顶点#版本 140

```
#extension GL_ARB_explicit_attrib_location : enable

layout (location = 0) in vec4 vVertex;

uniform mat4 mvpMatrix;
uniform vec4 inColor;

varying vec4 color;

void main(void)
{
    color = inColor;
    gl_Position = mvpMatrix * vVertex;
} 
```

片段#版本 140

```
out vec4 vFragColor;

varying vec4 color;

void main(void) 
{
    vFragColor = color;
} 
```

显卡的像素填充率是不是太慢了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T01:34:51.037

4000 FPS 意味着渲染一帧需要 0.25**毫秒。**3000 FPS 意味着渲染需要 0.33**毫秒。**总差异为 0.08**毫秒**，或 80**微秒**。

我不会担心的。你的卡不是“太慢”；你对微小的时差太敏感了。

# jquery - 为什么没有检测到布尔变量？

> ID：11856457
> 
> 赞同：1
> 
> 时间：2012-08-08T01:28:03.940
> 
> 标签：jquery

控制台最后没有检测`overExpand`为真。难道我做错了什么？

```
var transLayer = $('.transparentBg');
var overExpand = false;
var overUl = false;

$(transLayer).hide();
console.log('transLayer hide'); // this is being logged

$('#header .nav .wrapper > ul > li.expand').hover(function(){ 
    overExpand = true;  
    console.log(overExpand);// this works = true    
}, function(){ 
    overUl = true;
});

console.log(overExpand); // this shows false 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T01:32:25.257

该值为 false，因为将值设置为的代码`true`从未运行。

你有`overExpand = true`一个悬停事件处理程序。在触发事件之前，该代码不会运行。肯定会在事件触发之前执行，`console.log(overExpand)`因此 overExpand 仍然是错误的。

如果要在设置为 后查看该值`true`，则应从处理程序内部登录：

```
$('header .nav .wrapper > ul > li.expand').hover(function(){
    overExpand = true;
    console.log(overExpand);
}, function(){
    overUl = true;
}); 
```

如果您真的希望它与当前编写的方式一致，那么您将不得不大量重组代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T01:32:51.140

添加你`console.log()`的悬停功能。

```
$('#header .nav .wrapper > ul > li.expand').hover(function(){ 
    overExpand = true;    
    console.log(overExpand);   
}, function(){ 
    overUl = true;
}); 
```

每次将鼠标悬停在元素上时，都会在控制台中创建一个新日志，因为这是执行函数的时间。在您之前的代码中，调用`console.log()`发生在触发悬停功能之前。

# c# - 调用“更新”后 XNA 游戏堆栈溢出错误

> ID：11856463
> 
> 赞同：0
> 
> 时间：2012-08-08T01:28:30.027
> 
> 标签：c#, xna, stack-overflow, game-loop

今天是个好日子，

我一直在构建一个跨平台框架/抽象层，以利用适当平台上的 Mono 和 XNA 框架来定位 Android、iOS 和 Windows Phone 7。我没有使用 ExEn、MonoGame 或类似的框架，尽管我从研究他们的方法中学到了很多东西。

框架的 XNA 部分扩展了 XNA Game 类，我很确定这就是问题所在。但是，我在追踪它时遇到了一些困难，对 XNA Game 类有更好了解的人可能会提供很大帮助。我不会为类的整个继承层次结构发布代码，因为它会占用一些空间，但我会请求有关 XNA Game 类中问题的可能来源的信息，这可能会导致我发现我的错误.

我在运行测试游戏时收到堆栈溢出异常。完整的例外是：

```
An unhandled exception of type 'System.StackOverflowException' occurred in Microsoft.Xna.Framework.Game.dll 
```

为了追查罪魁祸首，我一直在向控制台输出一些简单的调试语句。我得到的输出是：

```
Started init.
Started linear load.
Loading a texture...
Finished loading a texture...
Finished linear load.
Finished init.
Begin run called.
Begin run ended successfully.
Started update.
Ended update.

Process is terminated due to StackOverflowException. 
```

如您所见，它已成功完成更新，但未继续 BeginDraw 或 EndRun。我一直无法确定此时可能会发生哪些进程以导致堆栈溢出异常。

如果有人可以帮助确定此时可能发生的过程，那么无疑将有助于找到问题的根源。如果您更愿意检查代码，我当然可以提供它，我会犹豫这样做，因为我相信我可以通过更多信息来确定问题，并且理解问题所需的代码库可能会非常大。

感谢您的时间和帮助，如果我能提供更多有用的信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T01:38:08.553

**解决方案**

事实证明 OnActivated 被反复调用是由于我相当愚蠢的一步，显然，将事件处理方法与事件本身联系起来，从而创建了一个无限循环的自切换。

**谢谢**

感谢 Illian Pinzon 提供的这个有用的建议，如果显而易见的话，它让我的大脑从任何 Android 开发引发的昏迷状态中解脱出来。

# asp.net-mvc - 如何在客户端使用模型将新行绑定到 ASP.NET MVC 4 WebGrid 并在客户端启用 WebGrid 的验证（DataAnnotations）

> ID：11856470
> 
> 赞同：4
> 
> 时间：2012-08-08T01:31:52.877
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我正在使用 ASP.NET WebGrid 来显示对象集合并允许将新对象添加到集合中。

在使用 Webgrid 的视图中，我有一个添加按钮，使用该按钮我可以根据模板动态添加新行并附加到网格中。

我需要帮助，

> 1）如何在客户端将新行与WebGrid模型绑定。2) 如何使用模型上定义的 DataAnnotations 验证在 WebGrid 上启用验证。

以下是代码，

```
public class TestObject
    {
        public virtual int Id
        {
            get;
            set;
        }

        [Required(ErrorMessageResourceName = "Required")]
        [Display( Name = "Codee")]
        public virtual string Code
        {
            get;
            set;
        }

        [Required(ErrorMessageResourceName = "Required")]
        [Display( Name = "Description")]
        public virtual string Description
        {
            get;
            set;
        }       
    } 
```

索引.html

```
@using (Html.BeginForm("Index", "Test", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.ValidationSummary()

    <div class="body-container">
    <table class="form-grid">
        <tr>
            <td>
                <input type="button"  onclick="AddRow(); return false;">
            </td>
        </tr>
    </table>
    <table class="form-grid">
        <tr>
            <td>
                <div id="partialregion">
                    @Html.Partial("_ListView", Model)
                </div>
            </td>
        </tr>
    </table>
    <table id="newTemplate" style="display: none;">
        <tr class="item">
            <td>
                <input type="hidden" id="cId" /></td>
            <td>
                <input type="text" id="code" />
            </td>
            <td>
                <input type="text" id="description" />
            </td>
        </tr>
    </table>
</div> 
```

_ListView.HTML

```
@model IEnumerable<TestObject>
<div id="testGrid">
    @{

        var grid = new WebGrid(null, ajaxUpdateContainerId: "testGrid" , canSort: false);
        grid.Bind(Model);

        @MvcHtmlString.Create(
        @grid.GetHtml(
        tableStyle: "grid-table",
          columns: grid.Columns(
                    grid.Column("",header:"",format : @<input id="hiddenId" type="hidden" value="@item.Id" />),
                    grid.Column("Code", header: "Code", format: @<input type="text" id="mCode" value="@item.Code" />),        
                    grid.Column("Description", header: "Description", format: @<input type="text" id="mDesc" value="@item.Description" />)
        )).ToString())
    }
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T18:04:17.013

我会尝试回答：

`1) How to bind the new rows with the WebGrid Model on the Client side.`

我建议您将其保留在服务器端并重新加载您的网格，使用带有 jquery`load`方法的 PartialView。

`2) How to enable validations on the WebGrid with DataAnnotations validations defined on the Model.`

DataAnnotations 验证您的模型，但当它在表单上时，而不是在网格中。要在表单上启用客户端验证，您必须更改 yoru web.config 文件添加这些 appSettings：

```
<appSettings>
    <!-- others -->

    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />

</appSettings> 
```

还要记住在您的布局（或视图）中包含 jquery 验证和不显眼的 javascript 文件：

```
<script src='@Url.Content("~/scripts/jquery-1.7.1.js")'></script>
<script src='@Url.Content("~/scripts/jquery.validate.js")'></script>
<script src='@Url.Content("~/scripts/jquery.validate.unobtrusive.js")'></script> 
```

# ruby-on-rails - Rails 防止 HAML 转义链接（使用 helper haml_tag）

> ID：11856471
> 
> 赞同：0
> 
> 时间：2012-08-08T01:31:54.850
> 
> 标签：ruby-on-rails, ruby, haml

我正在尝试创建一个简单的菜单，但遇到了这个问题：HAML 不断转义我到 html 实体的链接。我有一个应该生成菜单的助手：

```
def buildMainMenu(file=Rails.root.join("config","menu.yaml"))
    ... some operations ...

    link = url_for par.merge({:controller=>mitem["controller"], :action=>mitem["action"]})

    ... some more operations yay ...

    haml_tag :a, mitem["label"], :href=>link 
end 
```

面值是`{"testPARAM1"=>"testVAL1","testPARAM2"=>"testVAL2"}`

可悲的是输出是

`<a href='/test/test1?testPARAM1=testVAL1&amp;testPARAM2=testVAL2'>Test2</a>`

我已经找了一段时间了，我似乎找不到如何强制 HAML**不**逃避我的字符串:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:50:05.680

我知道这不是 100% 您正在寻找的东西，但我个人会重构它 - 这会让您头疼，无论如何，在帮助程序中呈现 html 一点也不理想。

我会更改辅助函数以获取您的 YAML 文件，或者那里发生的任何事情，并输出一个包含正确项目的最终数组。

制作一个 _header.html.haml 部分（将其放在“共享”目录中），部分将调用辅助函数，获取数组，并且由于您在视图中，您可以使用普通技术循环，并使用 link_to 等，你所有的问题都解决了。

这是一种更清洁的做事方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T03:00:05.157

刚刚想通了（我希望我在花了一个多小时之前就找到了它，但是嘿）。对于任何有兴趣的人：

有两个功能可以解决`html_safe`问题`raw`。使用如下：

*   haml_tag :a, mitem["label"], :href=>link.html_safe
*   haml_tag :a, mitem["label"], :href=>raw(link)

# objective-c - 如何使用 Facebook iOS SDK 在照片中标记用户？

> ID：11856474
> 
> 赞同：1
> 
> 时间：2012-08-08T01:32:28.020
> 
> 标签：objective-c, ios, facebook-graph-api

我似乎无法弄清楚如何在 Facebook 照片上传中标记用户。

文档似乎建议您使用数组，但以下代码无法正确解析（导致应用程序崩溃）

```
- (void)uploadImage:(UIImage *)img
           withTags:(NSArray *)tags
{
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"msgstring", @"message",
                                   img, @"picture",  
                                   nil];
    if (tags) {
        [params setObject:tags
                   forKey:@"tags"];
    }

    self.requestType = FBAssistantRequestImageUpload;

    [self.facebook requestWithGraphPath:@"me/photos"
                              andParams:params
                          andHttpMethod:@"POST"
                            andDelegate:self];
} 
```

没有标签它工作正常。目前的数组包含一个字符串，其中包含我希望标记的朋友的标识符。

我假设我错误地添加了标签。我希望避免使用此处概述的三步方法：[在 Facebook 照片上传中标记朋友](https://stackoverflow.com/questions/8360353/tag-friends-in-facebook-photo-upload)，因为我认为这需要照片权限，而仅发布照片不需要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-01T15:34:41.503

这是我用来在照片上标记朋友的代码：

```
NSMutableArray *tags = [[NSMutableArray alloc] init];
NSString *tag  = nil;
        if(self.selectedFriends != nil){
            for (NSDictionary *user in self.selectedFriends) {
                tag = [[NSString alloc] initWithFormat:@"{\"tag_uid\":\"%@\"}",[user objectForKey:@"id"] ];
                [tags addObject:tag];
            }
            NSString *friendIdsSeparation=[tags componentsJoinedByString:@","];
            NSString *friendIds = [[NSString alloc] initWithFormat:@"[%@]",friendIdsSeparation ];
    [params setObject:friendIds forKey:@"tags"];
    } 
```

# android - 启用按钮的Android任务

> ID：11856476
> 
> 赞同：0
> 
> 时间：2012-08-08T01:33:00.973
> 
> 标签：android, audio, button, bitmap, imageview

早上好，我有一个名为 next 的按钮，我希望当用户单击它并导入/捕获图像时，它会将他带到下一个活动。但是当用户点击它并且他没有选择/捕获图像时，它不会带他，它会显示一条吐司消息，他需要先获取图像。

这是我的下一个按钮代码

```
 final Button btnNext = (Button) findViewById(R.id.btnNext);
    btnNext.setEnabled(false); 
```

这些是我的相机和画廊代码

```
 btnGallery.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            Intent i = new Intent(
                    Intent.ACTION_PICK,
            android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
            startActivityForResult(i, RESULT_LOAD_IMAGE);
            btnNext.setEnabled(true);
        }
    });

    btnCamera.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
            startActivityForResult(intent, RESULT_LOAD_IMAGE);
            btnNext.setEnabled(true);
        }
    }); 
```

这是下一个按钮 OnClick 代码

```
 btnNext.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {      
            MpClick.start();
            if (btnNext.isEnabled() == false)
            { 
                   Toast.makeText(StartActivity.this,
                            "Please get an image first.", Toast.LENGTH_LONG)
                            .show();
            }
            else
            {
                Intent next = new Intent(StartActivity.this, Option.class);
                startActivity(next);
            }
        }
        });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:34:02.080

您应该启用按钮：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {} 
```

如果结果 = OK，则启用，如果结果 = false，则禁用。这样就可以了。

# c++ - 为什么我们需要 RAII 来解决异常安全问题

> ID：11856479
> 
> 赞同：-2
> 
> 时间：2012-08-08T01:33:12.403
> 
> 标签：c++, exception, c++11, raii

```
unique_ptr<X> f()
{
    unique_ptr<X> p(new X);     // or {new X} but not = new X
    // do something - maybe throw an exception
    return p;   // the ownership is transferred out of f()
} 
```

抛出异常时，为什么要关心对象 X 的存在，为什么要关心它占用的内存？

处理完异常，进程很快就会终止，内存也会被释放，我们为什么要关心这个呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T01:36:39.163

因为在大多数应用程序中，进程不会立即终止，并且您不想泄漏内存。你可能会问为什么你应该关心内存泄漏。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T02:02:24.743

> 处理异常后，进程将很快终止

谁说的？

如果您在出现异常时所做的只是终止，那么是的，您可以忽略它。但是，您*应该*捕获许多例外情况。使您的代码在特殊情况下相对防弹并不是一件坏事。

一旦您决定真正开始尝试捕获异常而不是忽略它们，您就需要 RAII。

# c++ - 从数据成员中获取非 POD 对象的地址，这是一个一次性嵌套类

> ID：11856480
> 
> 赞同：1
> 
> 时间：2012-08-08T01:33:14.750
> 
> 标签：c++, nested-class, offsetof, outer-classes

我将从一些代码开始：

```
class myNonPODClass
{
public:
    virtual ~myNonPODClass() {}
    class
    {
    public:
        myNonPODClass* GetContainer()
        {
            return (myNonPODClass*)((int8_t*)(this) - offsetof(myNonPODClass, member));
        }
    } member;
}; 
```

显然，这是一个人为的例子。代码编译得很好，但我担心“非 POD 类型'myNonPODClass'的偏移量”。有没有更好的方法来做本质上相同的事情而不必将 myNonPODClass 指针传递给嵌套的匿名类构造函数（或类似的构造函数）？“成员”必须准备好无需任何初始化。可能吗？谢谢！

如果你想知道我到底想要什么，我的 PROPERTY 宏和 pastebin 上的注释示例（是的，它很棒 ^^）： http: [//pastebin.com/xnknf39m](http://pastebin.com/xnknf39m)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:44:41.447

根据 C++ 规范，此代码不起作用，原因如下：

1.  `offsetof`需要 POD 类型（在 C++11 中，它需要标准布局类型）。您的类型不是，因此调用它会导致未定义的行为。
2.  根据 C++ 规范，转换为`int8_t*`然后转换为另一种类型是未定义的行为。您需要使用 a `char*`，它具有某些宽松的强制转换规则。

# iphone - 选择器场景没有已知的类方法？

> ID：11856483
> 
> 赞同：0
> 
> 时间：2012-08-08T01:33:25.163
> 
> 标签：iphone, xcode, selector, scene, kobold2d

> **可能重复：**
> [自定义框架中的错误“选择器'Hello：'没有已知的类方法”](https://stackoverflow.com/questions/6361704/error-no-known-class-method-for-selector-hello-in-custom-made-framework)

我在这里为我的游戏创建一个主菜单它无法编译但我不明白为什么

```
//  Main Menu.m
//
//
//

#import "MainMenu.h"
#import "CCTouchDispatcher.h"
#import "Instructions.h"

CCSprite *seeker1;
CCSprite *cocosGuy;

@implementation MainMenu

+ (CCScene *) scene
{
    CCScene * scene = [CCScene node]; // scene is an autorelease object
    MainMenu * layer =  [MainMenu node]; // later is an autorelease object
    [scene addChild: layer]; // add layer as a child to scene
    return scene; // return the scene
}

- (id) init
{
    if ( ( self = [super init] ) )
    {
        [ self setUpMenus ];
    }
    return self;
}

- (void) setUpMenus
{

    // create menu items

    CCMenuItemImage * startButton = [CCMenuItemImage itemFromNormalImage:@"startbutton.png"
                                                           selectedImage:@"startbutton_selected.png"
                                                                  target: self
                                                                selector: @selector (doSomethingOne:)];

    CCMenuItemImage * instructionsButton = [CCMenuItemImage itemFromNormalImage:@"instructionsbutton.png"
                                                                  selectedImage:@"instructionbutton_selected.png"
                                                                         target: self
                                                                       selector: @selector(doSomethingTwo:)];

    CCMenuItemImage * unlockList = [CCMenuItemImage itemFromNormalImage: @"unlocklist.png"
                                                          selectedImage:@"unlocklist_selected.png"
                                                                 target: self
                                                               selector: @selector(doSomethingThree:)];

    // create the menu and add the items to it
    CCMenu * myMenu = [CCMenu menuWithItems: startButton, instructionsButton, unlockList,nil];

    // arrange the items vertically
    [myMenu alignItemsVertically];

    // add the menu to the scene
    [self addChild:myMenu];

}

- (void) doSomethingOne: (CCMenuItem *) menuItem
{

}

- (void) doSomethingTwo: (CCMenuItem  *) menuItem
{
    [[CCDirector sharedDirector] replaceScene:
     [CCTransitionFade transitionWithDuration:0.5f scene:[Instructions scene] ]];
}

- (void) doSomethingThree: (CCMenuItem  *) menuItem
{

}

@end 
```

为什么我会收到选择器场景没有已知类方法的错误？关于doSomethingTwo。我必须在 .h 文件中导入一些东西吗？还是一个实现？感谢您为我提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:35:57.233

Instructions 类是否实现了这个选择器？

```
+(id) scene
{
   id scene = [CCScene node];
   return scene;
} 
```

指令类的接口是否声明了这个选择器以便其他类可以引用它？

```
@interface Instructions : CCLayer
{
}

+(id) scene;

@end 
```

你需要两者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T01:55:06.293

从您发布的代码中`+ (CCScene *) scene`是`MainMenu`类方法，您正在调用它`Instructions`，可能没有具有相同签名的方法。

# rabbitmq - Pika/RabbitMQ：正确使用 add_backpressure_callback

> ID：11856487
> 
> 赞同：2
> 
> 时间：2012-08-08T01:34:03.797
> 
> 标签：rabbitmq, pika

我是使用 RabbitMQ 和 Pika 的新手，所以如果答案很明显，请原谅......

我们正在输入一些数据并将结果传递到我们的 rabbitmq 消息队列中。该队列正在被将数据写入弹性搜索的进程使用。

数据的生成速度比它可以输入弹性搜索的速度要快，因此队列会增长并且几乎不会缩小。

我们正在使用 pika 并收到警告：

```
UserWarning: Pika: Write buffer exceeded warning threshold at X bytes and an estimated X frames behind. 
```

这会持续一段时间，直到 Pika 简单地崩溃并出现一条奇怪的错误消息：

```
NameError: global name 'log' is not defined 
```

我们正在使用 Pika BlockingConnection 对象 (http://pika.github.com/connecting.html#blockingconnection)。

我解决此问题的计划是使用 add_backpressure_callback 函数来创建一个函数，该函数将在`time.sleep(0.5)`每次我们需要应用背压时调用。但是，这似乎是一个过于简单的解决方案，并且必须有一种更合适的方式来处理这样的事情。

我猜想队列的填充速度比消耗的速度快是一种常见的情况。我正在寻找一个例子，甚至是一些关于什么是减缓队列速度的最佳方法的建议。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:43:34.070

有趣的问题，正如您正确指出的那样，这可能很常见。我在 Stack Overflow 上看到了另一个相关问题，其中包含一些提示

[Pika：写缓冲区超出警告](https://stackoverflow.com/questions/11210693/pika-write-buffer-exceeded-warning)

此外，您可能想考虑扩大您的弹性搜索，这可能是您想要解决的根本瓶颈。在 elasticsearch.org 网站上快速浏览一下

“分散式

Elastic Search 的主要特点之一是其分布式特性。索引被分解成碎片，每个碎片都有 0 个或更多副本。集群中的每个数据节点都托管一个或多个分片，并充当协调者将操作委托给正确的分片。重新平衡和路由是在幕后自动完成的。"

（......虽然不确定插入是否也是分布式和可扩展的）

毕竟，RabbitMQ 不应该无限增长队列。还可能希望查看扩展 RabbitMQ 本身，例如通过在 RabbitMQ 配置中使用每个队列进程等。

干杯!

# asp.net - 如何在c#中获取发布的数据

> ID：11856488
> 
> 赞同：1
> 
> 时间：2012-08-08T01:34:05.740
> 
> 标签：asp.net, post, webmethod

我在我的应用程序中使用了ajax，我必须使用该`$.post`方法。

通常，发送到服务器的数据是键值对。我可以让他们通过：

```
HttpContext.Current.Request.QueryPara['name'];
.... 
```

但在某些情况下，要发送到服务器的数据不包含名称。

它只是一个 xml 段。

像这样：

```
var data='<data>xxxxx<data>';
$.post('http://server/service.asmx/test',data,function(){
  //callback
},'xml'); 
```

那么如何在我的 webmethod 中获取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T01:39:58.590

您应该必须使用 'json' dataType 将数据传递给 web 方法。

看看样本：

服务.asmx

* * *

```
[ScriptService]
[WebService(Namespace = "http://localhost/testapp/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
public class Service : System.Web.Services.WebService{
   [WebMethod]
   public int Square(int no){ return no * no;}
} 
```

和 JavaScript 代码来请求这个*webmethod*

```
<script type="text/javascript">
$(function () {
    $("#button1").click(function () {
        $.ajax({
            type: "post",
            url: "service.asmx/Square",
            data: "{no: 10}",
            dataType: "json",
            contentType: "application/json",
            success: function (data) {
                alert("Result :" + data.d);
            },
            error: function (src,type,msg) {
                alert(msg); //open JavaScript console for detailed exception cause
            }
        });
    });
});
</script>

<body>
  <input type="button" id="button1" value="Square" />
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T03:34:20.590

我不确定 asp.net 是否可以做到这一点。但你总是可以提供这样的名称：

```
var data= { data: '<data>xxxxx<data>'};
$.post('http://server/service.asmx/test',data,function(){
  //callback
},'xml'); 
```

然后在服务器上，您可以通过

```
var data = Request.Params("data"); 
```

# c# - RichTextBox 滚动条不断跳回顶部/闪烁

> ID：11856490
> 
> 赞同：0
> 
> 时间：2012-08-08T01:34:30.577
> 
> 标签：c#, .net, winforms

我希望滚动条始终位于底部，但是每当我尝试这样做时，就像跳回顶部然后又跳到底部一样，我该如何停止或防止这种情况？
这是我到目前为止的代码：

```
rtbOutputText.SelectionStart = rtbOutputText.Text.Length;
rtbOutputText.ScrollToCaret(); 
```

另外，当我在richtextbox中选择文本时，间距，上下，选择我没有选择的东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T01:37:54.950

您还应该在 SelectionStart 之前添加 rtbOutputText.SelectionLength = 0。

# javascript - 用于根据另一个单元格的值对一个单元格进行条件颜色格式化的谷歌应用脚 本

> ID：11856491
> 
> 赞同：4
> 
> 时间：2012-08-08T01:34:36.823
> 
> 标签：javascript, google-apps-script, google-sheets

我正在尝试组合一个谷歌应用程序脚本，该脚本根据另一个单元格的值更改单元格的字体颜色。如果单元格 B2 > D2，将 B2 的字体颜色更改为红色。问题是我没有使用javascript的经验......所以我复制粘贴和编辑的小脚本不起作用。

```
function formatting() {
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Sheet1');
  var columnO = sheet.getRange(2, 2, sheet.getLastRow()-1, 1);
  var oValues = columnO.getValues();
  var column1 = sheet.getRange(2, 4, sheet.getLastRow()-1, 1);
  var oValues1 = columnO.getValues();

  for (var i = 0; i < oValues.length; i++) {
    if (oValues[i][0] > oValues1[i][0]) {
      sheet.getRange(i, 1, 1, 1).setFontColors('red');
    }
  }
} 
```

我想扩展这个脚本能够做到：如果 B2 > D2 颜色为红色，如果 B2 < C2 颜色为蓝色，否则为绿色。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T03:06:41.870

我看到的第一件事是第 6 行的错误/错字：`column0.getValues()`应该是`column1.getValues()`.

另一个错误是在 for 循环中，你`getRange(i, 1, 1, 1)`. 在您写的问题上，您想更改`B2`单元格颜色，并且此语句正在更改 column `A`。此外，行索引应该从 2 开始，而不是 0。

像这样的脚本要考虑的另一件重要事情是使用批处理功能，因为它会大大加快速度，例如

```
function formatting() {
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Sheet1');
  var values = sheet.getRange(2, 2, sheet.getLastRow()-1, 3).getValues(); //B, C and D
  var colors = [];  

  for (var i = 0; i < values.length; i++)
    colors.push([values[i][0] > values[i][2] ? 'red' :
                 values[i][0] < values[i][2] ? 'blue' : 'green']);
  sheet.getRange(2, 2, colors.length, 1).setFontColors(colors);
} 
```

# python - Numpy`ValueError：操作数无法与形状一起广播......`

> ID：11856493
> 
> 赞同：24
> 
> 时间：2012-08-08T01:34:55.790
> 
> 标签：python, arrays, numpy, array-broadcasting

我使用 python 2.7 并尝试预测从 1.00000000 到 3.0000000008 的一些随机数据。我的数组中有大约 196 个项目，我得到了错误

```
ValueError: operands could not be broadcast together with shape (2) (50) 
```

我似乎无法自己解决这个问题。任何帮助或相关文档的链接将不胜感激。

这是我正在使用的生成此错误的代码

```
nsample = 50
sig = 0.25
x1 = np.linspace(0,20, nsample)
X = np.c_[x1, np.sin(x1), (x1-5)**2, np.ones(nsample)]
beta = masterAverageList
y_true = ((X, beta))
y = y_true + sig * np.random.normal(size=nsample) 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-08T01:48:40.240

如果`X`和`beta`不具有与您最后一行的 rhs 中的第二项相同的形状（即`nsample`），那么您将收到此类错误。要将数组添加到数组元组中，它们都必须是相同的形状。

我建议查看[numpy 广播规则](http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html)。

# actionscript-3 - Flash CS6 错误 #1009 - 按钮消失

> ID：11856500
> 
> 赞同：0
> 
> 时间：2012-08-08T01:36:13.210
> 
> 标签：actionscript-3, flash, flash-cs6

我第一次开始使用 Flash CS6 来尝试为 UDK 制作 Scaleform UI。我正在关注这个简单的教程：http: [//goo.gl/yedMU](http://goo.gl/yedMU)。我已经按照信函进行了操作，但似乎无法使其正常工作。我什至在一个新项目中再次尝试过，但最终还是出现了同样的错误。我已经三次检查了每个名称和实例，但它只是拒绝工作。这是文件中两个框架的非常简单的代码：

```
import flash.events.MouseEvent;
import flash.system.fscommand;
import flash.display.MovieClip;

subMenu_btn.addEventListener(MouseEvent.CLICK, subMenu);
exit_btn.addEventListener(MouseEvent.CLICK, exitGame);

var cursor:cursor_mc = new cursor_mc();
addChild(cursor);
     cursor.x = mouseX;
     cursor.y = mouseY;
cursor.startDrag();

stop();

function subMenu(event:MouseEvent):void
{
     gotoAndStop('Sub Menu');
}
function exitGame(event:MouseEvent):void
{
     fscommand('ExitGame');
} 
```

和

```
play_btn.addEventListener(MouseEvent.CLICK, playGame);
back_btn.addEventListener(MouseEvent.CLICK, backBtn);

function playGame(event:MouseEvent):void
{
     fscommand('PlayMap');
}
function backBtn(event:MouseEvent):void
{
     gotoAndStop('Main Menu');
} 
```

我使用了调试器，代码在

```
exit_btn.addEventListener(MouseEvent.CLICK, exitGame); 
```

有任何想法吗？整个过程一直有效，直到我使用“返回”按钮返回第一帧，当“退出”按钮消失并且我收到该错误时。然而，“子菜单”按钮仍然存在，并且菜单仍然可以操作。

这是使用调试器的错误：

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
at Menu_fla::MainTimeline/frame1()[Menu_fla.MainTimeline::frame1:6]
at flash.display::MovieClip/gotoAndStop()
at Menu_fla::MainTimeline/backBtn()[Menu_fla.MainTimeline::frame2:10] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T02:57:33.353

好的，所以我在上面的评论中所说的可能是错误的，解决方案是：

**对于您的第一帧的 AS3：**

```
import flash.events.MouseEvent;
import flash.system.fscommand;
import flash.display.MovieClip;

var cursor:cursor_mc = new cursor_mc();

subMenu_btn.addEventListener(MouseEvent.CLICK, subMenu);
exit_btn.addEventListener(MouseEvent.CLICK, exitGame);

addChild(cursor);
     cursor.x = mouseX;
     cursor.y = mouseY;
cursor.startDrag();
Mouse.hide();

stop();

function subMenu(event:MouseEvent):void
{
    subMenu_btn.removeEventListener(MouseEvent.CLICK, subMenu);
    exit_btn.removeEventListener(MouseEvent.CLICK, exitGame);
    removeChild(cursor);
     gotoAndStop('Sub Menu');
}
function exitGame(event:MouseEvent):void
{
     fscommand('ExitGame');
} 
```

**对于第二帧的 AS3：**

```
play_btn.addEventListener(MouseEvent.CLICK, playGame);
back_btn.addEventListener(MouseEvent.CLICK, backBtn);

cursor = new cursor_mc();
addChild(cursor);
     cursor.x = mouseX;
     cursor.y = mouseY;
cursor.startDrag();
Mouse.hide();

function playGame(event:MouseEvent):void
{
     fscommand('PlayMap');
}
function backBtn(event:MouseEvent):void
{
    removeChild(cursor);
     gotoAndStop('Main Menu');
} 
```

每次点击第 1 帧时，您都在实例化光标，我相信这会产生命名空间问题。解决方案是从舞台上移除光标，然后将其重新添加到每一帧。可能有一个更优雅的解决方案，但由于我从不使用 AS 的多个帧（出于这个原因），这是我能做的最好的。我还隐藏了鼠标光标以使您的 cursor_mc 更加集中。

如果您还有其他问题，请告诉我。快乐编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T21:06:30.143

另一种解决方案是创建一个新层，并将光标代码仅放在该层上。该层将有一个关键帧，并扩展到覆盖整个时间轴，因此它始终处于活动状态。

或者，创建一个存在于第 1 帧上的菜单影片剪辑。在该影片剪辑中，为菜单的每个部分（选项等）设置不同的帧。并且光标将与菜单影片剪辑存在于同一级别。所以它总是存在并且只被初始化一次。

# simple.data - 从 Simple.Data 获取列的 IS_NULLABLE 值

> ID：11856509
> 
> 赞同：0
> 
> 时间：2012-08-08T01:38:36.143
> 
> 标签：simple.data

我正在使用`Simple.Data.Ado.Schema.Column`获取 SQL Server 数据库中列的架构。但是从浏览类并进入[源代码](https://github.com/markrendle/Simple.Data/blob/master/Simple.Data.SqlServer/SqlSchemaProvider.cs)，似乎`Simple.Data`没有查询该`IS_NULLABLE`值。

如果列是否可以为空，有什么方法可以检索`Simple.Data`？如果没有，那么我可能需要修改源代码以包含该信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:00:54.750

不，Simple.Data 没有任何需要可空信息的功能，所以它不存在。

# javascript - 我可以信任javascript声明中的执行顺序吗？

> ID：11856516
> 
> 赞同：-3
> 
> 时间：2012-08-08T01:40:30.113
> 
> 标签：javascript, declaration

我想知道其中任何一个是否依赖于未定义的行为，和/或是否可以对其进行调整以使其不：

**示例 1**：

```
var str = {
  ver: '1.01',
  verdesc: 'WIP',
  composite: {
    version_block: str.ver + str.verdesc
  }
} 
```

**示例 2**：

```
var str = {
  ver: '1.01',
  verdesc: 'WIP',
},
composite: {
  version_block: str.ver + str.verdesc
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T01:46:13.057

您正在尝试从对象文字本身中引用通过对象文字定义的属性。这是不可能的。*只有在*评估整个对象字面量之后，才会将属性分配给`str`变量。因此，在对象字面量中，您不能引用.*`str`*

 *因此，当您将对象文字分配给变量时，

```
var obj = { ... }; 
```

然后，在该对象文字中，您**根本无法**使用该`obj`引用。在评估对象字面量时，`obj`仍然是`undefined`，并且只有*在*对象字面量被完全解析和评估后，才会创建相应的*Object*值并将其分配给`obj`。

```
var obj = {
    a: 123,
    b: obj.a // this will throw, "obj" is undefined
};
obj.b = obj.a; // this works 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T01:49:39.910

[http://jsfiddle.net/kendfrey/XwVFt/](http://jsfiddle.net/kendfrey/XwVFt/)

错误消息说明了一切。

你不能那样做。在分配变量之前，变量的属性是不可访问的，这发生*在*创建整个对象之后。

您可以通过分配对象，*然后*设置其属性来解决此问题。

```
var str = { };
str.ver = '1.01';
str.verdesc = 'WIP';
str.composite = {
  version_block: str.ver + str.verdesc
} 
```*

# clojure - 如何在 Clojure 中获取参数名称？

> ID：11856517
> 
> 赞同：3
> 
> 时间：2012-08-08T01:40:44.767
> 
> 标签：clojure, macros, var

我想从函数内部获取在函数外部定义的 var 的名称。该名称应该是我在原始定义范围内使用的名称，而不是我实际尝试使用该名称的任何嵌套绑定。

所以我想做一些类似（学术例子）的事情：

```
(defn f1 [x1] (println "hello, you passed var name >>" (get-var-name x1) "<<")
(defn f2 [x2] (f1 x2))
(defn f3 [x3] (let [zzz x3] (f2 zzz))
(def my-var 3.1414926)
(f3 my-var)
user> hello, you passed var name >>my-var<< 
```

我可以根据我发现的一些东西来做这个宏：

```
(defmacro get-var-name [x]
  `(:name (meta (var ~x)))) 
```

这在例如从 REPL 调用时有效，但是当从“内部”范围调用时编译器会阻塞，例如

```
(defn another-func [y]
  (get-var-name y)) 
```

编译器说“说无法解析 var y”。 `(macroexpand...)`表明它试图在当前命名空间中查找局部变量 y，而不是当前命名空间中的原始变量。我认为`(var...`) 仅查找命名空间变量，因此这会阻止宏在函数或其他绑定（例如`let`.

我*想*我不得不从定义变量的同一范围手动获取变量名称并将其作为额外参数传递。有没有更优雅的方法通过绑定链将变量名称信息传递到使用它的位置？那将是坏事。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T03:52:43.260

无法在函数内获取在外部范围*内*使用的 var 的名称- 该函数仅接收在运行时作为参数传递的*值，而不是 var 本身。*

您唯一可能做的就是在每个级别使用宏而不是函数。这允许您在编译时通过不同的宏传递 var 本身：

```
(defmacro f1 [x1] `(println "hello, you passed var name >>" ~(str x1) "<<"))
(defmacro f2 [x2] `(f1 ~x2))
(defmacro f3 [x3] (let [zzz x3] `(f2 ~zzz)))

(f3 my-var)
=> hello, you passed var name >> my-var << 
```

这很丑 - 你当然不想为了获得这个功能而用宏编写所有代码！尽管在某些特殊情况下它可能是有意义的，例如，如果您正在创建某种基于宏的 DSL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T04:23:31.313

您可以使用 reader 宏将实际 var 传递给函数，而不是 var 解析的值`#'`，如下所示：

```
user=> (defn f1 [x1] (println "hello, you passed var name >>" (:name (meta x1)) "<<"))
#'user/f1
user=> (defn f2 [x2] (f1 x2))
#'user/f2
user=> (defn f3 [x3] (let [zzz x3] (f2 zzz)))  
#'user/f3
user=> (def my-var 3.1414926)
#'user/my-var
user=> (f3 #'my-var)
hello, you passed var name >> my-var << 
```

如果您希望将值绑定到 var，则可以使用`var-get`函数来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T03:35:13.333

为什么不直接传递`(get-var-name _symbol-here_)`给您想要在正文中使用 var 名称的函数呢？例如，使用与您在上面给出的完全相同的定义`get-var-name`（但`f2`略有变化）：`f3``my-var``f1`

```
(defmacro get-var-name [x]
  `(:name (meta (var ~x))))
(defn f1 [x1] (println "hello, you passed var name >>" x1 "<<"))
(defn f2 [x2] (f1 x2))
(defn f3 [x3] (let [zzz x3] (f2 zzz)))
(def my-var 3.1414926)
=> (f3 (get-var-name my-var))
hello, you passed var name >> my-var <<
=> nil 
```

也许有时，您*还想*在函数体中引用符号所引用的值。例如，假设`f1`您还想打印出该 var 名称引用的值。您可以这样做：

```
(defn f1 [x1] (println "hello, you passed var name >>" x1 "<<"
                       "\nwhich refers to value >>" @(resolve x1) "<<"))
=> (f3 (get-var-name my-var))
hello, you passed var name >> my-var << 
which refers to value >> 3.1414926 <<
=> nil 
```

注意`@(resolve x1)`--this 是返回`my-var`引用的值（反过来又`my-var`是 引用的值`x1`）的东西。

另外，我想提一下，`get-var-name`当传递给它的参数不是符号或者是符号但当前未绑定到值时，您当前的实现将抛出异常。这是你想要的行为吗？

*如果我的建议不能回答您的问题，那么您似乎*不想传递`(get-var-name _symbol-here_)`给最终可能使用 var 名称的函数，而是出于某种原因确实希望能够`(get-var-name ...)`从内部执行函数体。如果是这种情况，为什么您希望能够那样做？或者，如果您觉得我出于其他原因没有回答您的问题，那是什么原因？

# sql-server-2008 - SQL Server 2008 关于创建游标以循环记录的请求示例

> ID：11856518
> 
> 赞同：17
> 
> 时间：2012-08-08T01:41:27.117
> 
> 标签：sql-server-2008

有没有人有创建游标以遍历一堆记录的经验？如果你这样做，你能给我一个基本的例子。谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-08T03:11:54.187

```
declare cur cursor for 
select id from tbl 
open cur
declare @id int
fetch next from cur into @id
while (@@FETCH_STATUS = 0)
begin
    print(@id)
    fetch next from cur into @id
end
close cur
deallocate cur

-- just replace "tbl" with your table name and "id" with your field name
-- and do whatever you want in begin-end block (now it simply prints the id of each record) 
```

# python - Django：按用户配置文件或外键过滤

> ID：11856519
> 
> 赞同：1
> 
> 时间：2012-08-08T01:41:38.973
> 
> 标签：python, django

对于一个帐户的简单激活密钥，我必须从随机数创建密钥，同时确保我没有使用与另一个帐户相同的密钥。现在，这就是我所拥有的：

```
def get_random_word():
    word = ''
    i = 0
    while i in range(10) and User.objects.filter(activation_key = word).exists():
        word += random.choice('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789')
        i+=1
    return word 
```

我现在意识到的问题是我使用 django 的内置`User`类和这样的用户配置文件：

```
def create_user_info(sender, instance, created, **kwargs):
    if created:
        UserInfo.objects.create(user=instance)

post_save.connect(create_user_info, sender=User)

class UserInfo(models.Model):
    user = models.OneToOneField(User)
    pen_name = models.CharField(max_length=30)
    activated = models.BooleanField()
    activation_key = models.CharField(max_length=40)
    def __unicode__(self):
        return self.email + '-' + self.pen_name 
```

我需要按用户配置文件过滤。所以，简而言之，我如何通过键或更具体地说，用户配置文件进行过滤。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T01:53:47.713

首先，在您的 UserInfo 中添加一个 related_name：

```
class UserInfo(models.Model):
    user = models.OneToOneField(User, related_name='profile')
    ... 
```

[https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.related_name](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.related_name)

然后你可以做这样的事情：

```
User.objects.filter(profile__activation_key=word).exists() 
```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T01:54:20.997

我不是 100% 确定您到底想达到什么目标，但这里有两个可能适合您需求的答案：

**一般来说**

首先，您需要将 Django 内置用户模型与您的`UserProfile`模型连接起来。这是在`settings.py`设置`AUTH_PROFILE_MODULE`设置中完成的

```
AUTH_PROFILE_MODULE = 'myapp.UserProfile'    # replace `myapp` with your application name 
```

**答案 1**

您可以通过`user.get_profile()`假设`user`已经存在的`django.contrib.auth.User`.

**答案 2**

您可以`UserProfile`先通过要查询的任何键查询您的模型，然后将结果集直接映射回您的用户，例如：

```
from myapp.models import UserProfile

profiles = UserProfile.objects.filter(activation_key='abcdef')
for profile in profiles:
    print profile.user    # this is the profiles connected user instance 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T02:03:10.163

首先，您并不关心两个用户是否拥有相同的激活密钥。这种情况非常罕见，不能成为任何攻击的目标。

其次，为什么不在激活 URL 中包含用户名？这样您就可以确保每个用户都有一个唯一的激活 URL。 `ex: yourwebsite.com/users/activate/{username}/{activationcode}`.

第三，您可以使用 UUID 而不是随机的。UUID 被授予是唯一的（不完全是，但 99.99% 的时间）。 [http://docs.python.org/library/uuid.html](http://docs.python.org/library/uuid.html)

第四，您真的需要在个人资料信息中保留激活码吗？为什么不创建一个独立的激活表，你甚至可以将主键设置为激活码。大多数时候，最好将不会经常使用的信息与您经常使用的信息分开。

第五，您根本不需要查询 User 表。您只需要查询 UserProfile 表并检查激活密钥是否存在。只有这样，您才能使用 OneToOne 关系映射到原始用户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-08T23:24:23.460

您甚至不需要将related_name 值添加到用户关系中。以下查询适用于您的配置文件模型。

```
User.objects.filter(userinfo__activation_key=word).exists() 
```

# java - Tomcat：在日志中获取“字符解码失败”；可能的恶意攻击？

> ID：11856521
> 
> 赞同：1
> 
> 时间：2012-08-08T01:41:50.313
> 
> 标签：java, tomcat, filter, tomcat-valve

我刚刚让一个 Tomcat 实例停止响应（它在被杀死并重新启动后开始正常工作），并且在日志消息中，它看起来就像在它停止响应之前有人正在向它发送无效请求的垃圾邮件。以下是日志文件的摘录：

```
[WARNING] [talledLocalContainer] WARNING: Parameters: Character decoding failed. Parameter 'ì°ÅM©2a
                                                                                                      7)ýúVßiPÑUÙvPÏB%<kNíR¹YÃÁéIÿ4^ØsZ' with value '' has been ignored. Note that the name and value quoted here may corrupted due to the failed decoding. Use debug level logging to see the original, non-corrupted values.
[WARNING] [talledLocalContainer] Aug 6, 2012 5:23:16 PM org.apache.tomcat.util.http.Parameters processParameters
[WARNING] [talledLocalContainer] WARNING: Parameters: Character decoding failed. Parameter 'ì°ÅM©2a
                                                                                                      7)ýúVßiPÑUÙvPÏB%<kNíR¹YÃÁéIÿ4^ØsZ' with value '' has been ignored. Note that the name and value quoted here may corrupted due to the failed decoding. Use debug level logging to see the original, non-corrupted values.
[INFO] [talledLocalContainer] 19:58:04 [InputSanitizerFilter] WARN:  Removing potentially malicious parameter from request:  batch
[WARNING] [talledLocalContainer] Aug 6, 2012 9:11:39 PM org.apache.tomcat.util.http.Parameters processParameters
[WARNING] [talledLocalContainer] WARNING: Parameters: Character decoding failed. Parameter 'ì°ëñÉÞ
[WARNING] [talledLocalContainer] 8Rû£QÜPÖ◆D)ç£<%E◆&lt;ìS
[WARNING] [├▒┌┌␊␍L⎺␌▒┌C⎺┼├▒␋┼␊⎼] ÎS·Éä:ìAQØRÜ]' ┬␋├␤ ┴▒┌┤␊ '' ␤▒⎽ ␉␊␊┼ ␋±┼⎺⎼␊␍. N⎺├␊ ├␤▒├ ├␤␊ ┼▒└␊ ▒┼␍ ┴▒┌┤␊ ─┤⎺├␊␍ ␤␊⎼␊ └▒≤ ␌⎺⎼⎼┤⎻├␊␍ ␍┤␊ ├⎺ ├␤␊ °▒␋┌␊␍ ␍␊␌⎺␍␋┼±. U⎽␊ ␍␊␉┤± ┌␊┴␊┌ ┌⎺±±␋┼± ├⎺ ⎽␊␊ ├␤␊ ⎺⎼␋±␋┼▒┌, ┼⎺┼-␌⎺⎼⎼┤⎻├␊␍ ┴▒┌┤␊⎽.A┤± 6, 2012 9:11:39 PM ⎺⎼±.▒⎻▒␌␤␊.├⎺└␌▒├.┤├␋┌.␤├├⎻.P▒⎼▒└␊├␊⎼⎽ ⎻⎼⎺␌␊⎽⎽P▒⎼▒└␊├␊⎼⎽ 
```

日志中有相当多的内容。有没有人见过类似的东西？这是一次恶意攻击，还是 Tomcat 实例只是翻转/发疯了？

更实际的是，我可以做些什么，例如在 a `Valve`or`Filter`中，检测此类请求并暂时禁止原始 IP 地址？我假设因为 Tomcat 无法解码乱码参数，所以我不能只寻找无意义的参数名称，如果找到就拒绝请求。

**编辑**

同样的问题再次发生，这次我捕获了一个线程转储。它很长（实际上太长了，无法完整包含在内）：

```
[INFO] [talledLocalContainer] 2012-08-08 12:00:27
[INFO] [talledLocalContainer] Full thread dump Java HotSpot(TM) 64-Bit Server VM (20.1-b02 mixed mode):
[INFO] [talledLocalContainer] 
[INFO] [talledLocalContainer] "http-80-44" daemon prio=10 tid=0x00007f789c0b7800 nid=0x2d6a in Object.wait() [0x00007f78972f1000]
[INFO] [talledLocalContainer]    java.lang.Thread.State: WAITING (on object monitor)
[INFO] [talledLocalContainer]   at java.lang.Object.wait(Native Method)
[INFO] [talledLocalContainer]   - waiting on <0x00000000f55f8da0> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
[INFO] [talledLocalContainer]   at java.lang.Object.wait(Object.java:485)
[INFO] [talledLocalContainer]   at org.apache.tomcat.util.net.JIoEndpoint$Worker.await(JIoEndpoint.java:458)
[INFO] [talledLocalContainer]   - locked <0x00000000f55f8da0> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
[INFO] [talledLocalContainer]   at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:484)
[INFO] [talledLocalContainer]   at java.lang.Thread.run(Thread.java:662)
[INFO] [talledLocalContainer] 
[INFO] [talledLocalContainer] "http-80-43" daemon prio=10 tid=0x00007f789c0b5800 nid=0x2d09 in Object.wait() [0x00007f78973f0000]
[INFO] [talledLocalContainer]    java.lang.Thread.State: WAITING (on object monitor)
[INFO] [talledLocalContainer]   at java.lang.Object.wait(Native Method)
[INFO] [talledLocalContainer]   - waiting on <0x00000000e07e96b8> (a com.mchange.v2.resourcepool.BasicResourcePool)
[INFO] [talledLocalContainer]   at com.mchange.v2.resourcepool.BasicResourcePool.awaitAvailable(BasicResourcePool.java:1315)
[INFO] [talledLocalContainer]   at com.mchange.v2.resourcepool.BasicResourcePool.prelimCheckoutResource(BasicResourcePool.java:557)
[INFO] [talledLocalContainer]   - locked <0x00000000e07e96b8> (a com.mchange.v2.resourcepool.BasicResourcePool)
[INFO] [talledLocalContainer]   at com.mchange.v2.resourcepool.BasicResourcePool.checkoutResource(BasicResourcePool.java:477)
[INFO] [talledLocalContainer]   at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:525)
[INFO] [talledLocalContainer]   at com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource.getConnection(AbstractPoolBackedDataSource.java:128)
[INFO] [talledLocalContainer]   at org.hibernate.connection.C3P0ConnectionProvider.getConnection(C3P0ConnectionProvider.java:35)
[INFO] [talledLocalContainer]   at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:417)
[INFO] [talledLocalContainer]   at org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:144)
[INFO] [talledLocalContainer]   at org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:139)
[INFO] [talledLocalContainer]   at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1538)
[INFO] [talledLocalContainer]   at org.hibernate.loader.Loader.doQuery(Loader.java:661)
[INFO] [talledLocalContainer]   at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:224)
[INFO] [talledLocalContainer]   at org.hibernate.loader.Loader.doList(Loader.java:2211)
[INFO] [talledLocalContainer]   at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2095)
[INFO] [talledLocalContainer]   at org.hibernate.loader.Loader.list(Loader.java:2090)
[INFO] [talledLocalContainer]   at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:388)
[INFO] [talledLocalContainer]   at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:338)
[INFO] [talledLocalContainer]   at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:172)
[INFO] [talledLocalContainer]   at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1121)
[INFO] [talledLocalContainer]   at org.hibernate.impl.QueryImpl.list(QueryImpl.java:79)
[INFO] [talledLocalContainer]   at org.hibernate.ejb.QueryImpl.getSingleResult(QueryImpl.java:80)
[INFO] [talledLocalContainer] 
[INFO] [talledLocalContainer] "http-80-42" daemon prio=10 tid=0x00007f789c0cb800 nid=0x2d08 in Object.wait() [0x00007f78974f3000]
[INFO] [talledLocalContainer]    java.lang.Thread.State: WAITING (on object monitor)
[INFO] [talledLocalContainer]   at java.lang.Object.wait(Native Method)
[INFO] [talledLocalContainer]   - waiting on <0x00000000f93e8070> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
[INFO] [talledLocalContainer]   at java.lang.Object.wait(Object.java:485)
[INFO] [talledLocalContainer]   at org.apache.tomcat.util.net.JIoEndpoint$Worker.await(JIoEndpoint.java:458)
[INFO] [talledLocalContainer]   - locked <0x00000000f93e8070> (a org.apache.tomcat.util.net.JIoEndpoint$Worker)
[INFO] [talledLocalContainer]   at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:484)
[INFO] [talledLocalContainer]   at java.lang.Thread.run(Thread.java:662)
[INFO] [talledLocalContainer] 
[INFO] [talledLocalContainer] "http-80-41" daemon prio=10 tid=0x00007f789c0c9800 nid=0x2d07 in Object.wait() [0x00007f78975f2000]
[INFO] [talledLocalContainer]    java.lang.Thread.State: WAITING (on object monitor)
[INFO] [talledLocalContainer]   at java.lang.Object.wait(Native Method)
[INFO] [talledLocalContainer]   - waiting on <0x00000000e07e96b8> (a com.mchange.v2.resourcepool.BasicResourcePool)
[INFO] [talledLocalContainer]   at com.mchange.v2.resourcepool.BasicResourcePool.awaitAvailable(BasicResourcePool.java:1315)
[INFO] [talledLocalContainer]   at com.mchange.v2.resourcepool.BasicResourcePool.prelimCheckoutResource(BasicResourcePool.java:557)
[INFO] [talledLocalContainer]   - locked <0x00000000e07e96b8> (a com.mchange.v2.resourcepool.BasicResourcePool)
[INFO] [talledLocalContainer]   at com.mchange.v2.resourcepool.BasicResourcePool.checkoutResource(BasicResourcePool.java:477)
[INFO] [talledLocalContainer]   at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:525)
[INFO] [talledLocalContainer]   at com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource.getConnection(AbstractPoolBackedDataSource.java:128)
[INFO] [talledLocalContainer]   at org.hibernate.connection.C3P0ConnectionProvider.getConnection(C3P0ConnectionProvider.java:35)
[INFO] [talledLocalContainer]   at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:417)
[INFO] [talledLocalContainer]   at org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:144)
[INFO] [talledLocalContainer]   at org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:139)
[INFO] [talledLocalContainer]   at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1538)
[INFO] [talledLocalContainer]   at org.hibernate.loader.Loader.doQuery(Loader.java:661)
[INFO] [talledLocalContainer]   at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:224)
[INFO] [talledLocalContainer]   at org.hibernate.loader.Loader.loadEntity(Loader.java:1851)
[INFO] [talledLocalContainer]   at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:48)
[INFO] [talledLocalContainer]   at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:42)
[INFO] [talledLocalContainer]   at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:2992)
[INFO] [talledLocalContainer]   at org.hibernate.event.def.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:395)
[INFO] [talledLocalContainer]   at org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:375)
[INFO] [talledLocalContainer]   at org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:139)
[INFO] [talledLocalContainer]   at org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:195)
[INFO] [talledLocalContainer]   at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:103)
[INFO] [talledLocalContainer]   at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:878)
[INFO] [talledLocalContainer]   at org.hibernate.impl.SessionImpl.get(SessionImpl.java:815)
[INFO] [talledLocalContainer]   at org.hibernate.impl.SessionImpl.get(SessionImpl.java:808)
[INFO] [talledLocalContainer]   at org.hibernate.ejb.AbstractEntityManagerImpl.find(AbstractEntityManagerImpl.java:174)
[INFO] [talledLocalContainer]   at java.lang.Thread.run(Thread.java:662)
[INFO] [talledLocalContainer] 

...

2012-08-08 12:00:31
Full thread dump Java HotSpot(TM) 64-Bit Server VM (20.1-b02 mixed mode):

"Thread-18" daemon prio=10 tid=0x000000004217d000 nid=0x22ff runnable [0x00007f594d4f6000]
   java.lang.Thread.State: RUNNABLE
    at java.io.FileInputStream.readBytes(Native Method)
    at java.io.FileInputStream.read(FileInputStream.java:198)
    at org.apache.tools.ant.taskdefs.StreamPumper.run(StreamPumper.java:92)
    at java.lang.Thread.run(Thread.java:662)

"Thread-17" daemon prio=10 tid=0x00000000430fd800 nid=0x22fe runnable [0x00007f594d899000]
   java.lang.Thread.State: RUNNABLE
    at java.io.FileInputStream.readBytes(Native Method)
    at java.io.FileInputStream.read(FileInputStream.java:220)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
    at java.io.BufferedInputStream.read1(BufferedInputStream.java:258)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:317)
    - locked <0x00000007da0b1be0> (a java.io.BufferedInputStream)
    at java.io.FilterInputStream.read(FilterInputStream.java:90)
    at org.apache.tools.ant.taskdefs.StreamPumper.run(StreamPumper.java:92)
    at java.lang.Thread.run(Thread.java:662)

"process reaper" daemon prio=10 tid=0x00000000436ba800 nid=0x22fc runnable [0x00007f594d697000]
   java.lang.Thread.State: RUNNABLE
    at java.lang.UNIXProcess.waitForProcessExit(Native Method)
    at java.lang.UNIXProcess.access$900(UNIXProcess.java:20)
    at java.lang.UNIXProcess$1$1.run(UNIXProcess.java:132)

"Thread-16" prio=10 tid=0x0000000042297000 nid=0x22fb in Object.wait() [0x00007f594d798000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000007da016138> (a java.lang.UNIXProcess)
    at java.lang.Object.wait(Object.java:485)
    at java.lang.UNIXProcess.waitFor(UNIXProcess.java:165)
    - locked <0x00000007da016138> (a java.lang.UNIXProcess)
    at org.apache.tools.ant.taskdefs.Execute.waitFor(Execute.java:551)
    at org.apache.tools.ant.taskdefs.Execute.execute(Execute.java:482)
    at org.apache.tools.ant.taskdefs.Java.fork(Java.java:784)
    at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:211)
    at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:132)
    at org.apache.tools.ant.taskdefs.Java.execute(Java.java:105)
    at org.codehaus.cargo.container.internal.AntContainerExecutorThread.run(AntContainerExecutorThread.java:103)

"pool-1-thread-5" prio=10 tid=0x00007f5948665000 nid=0x22d1 in Object.wait() [0x00007f594db6e000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000007847f3058> (a hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
    at java.lang.Object.wait(Object.java:485)
    at hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:316)
    - locked <0x00000007847f3058> (a hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
    at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:994)
    at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1054)
    at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:575)
    at java.lang.Thread.run(Thread.java:662)

"pool-1-thread-4" prio=10 tid=0x0000000042987800 nid=0x22cc in Object.wait() [0x00007f594dc6f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000007847f3058> (a hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
    at java.lang.Object.wait(Object.java:485)
    at hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:316)
    - locked <0x00000007847f3058> (a hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
    at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:994)
    at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1054)
    at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:575)
    at java.lang.Thread.run(Thread.java:662)

"pool-1-thread-3" prio=10 tid=0x00007f5948a6e000 nid=0x22cb in Object.wait() [0x00007f594dd70000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000007847f3058> (a hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
    at java.lang.Object.wait(Object.java:485)
    at hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:316)
    - locked <0x00000007847f3058> (a hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
    at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:994)
    at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1054)
    at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:575)
    at java.lang.Thread.run(Thread.java:662)

"pool-1-thread-2" prio=10 tid=0x00007f5948918800 nid=0x22ca in Object.wait() [0x00007f594de71000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000007847f3058> (a hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
    at java.lang.Object.wait(Object.java:485)
    at hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:316)
    - locked <0x00000007847f3058> (a hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
    at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:994)
    at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1054)
    at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:575)
    at java.lang.Thread.run(Thread.java:662)

"pool-1-thread-1" prio=10 tid=0x0000000042b4a000 nid=0x22c9 in Object.wait() [0x00007f594df72000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000007847f3058> (a hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
    at java.lang.Object.wait(Object.java:485)
    at hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:316)
    - locked <0x00000007847f3058> (a hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
    at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:994)
    at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1054)
    at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:575)
    at java.lang.Thread.run(Thread.java:662)

"Low Memory Detector" daemon prio=10 tid=0x00007f5948001800 nid=0x22c3 runnable [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread1" daemon prio=10 tid=0x0000000041fc4800 nid=0x22c2 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread0" daemon prio=10 tid=0x0000000041fc1000 nid=0x22c1 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Signal Dispatcher" daemon prio=10 tid=0x0000000041fbf000 nid=0x22c0 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Finalizer" daemon prio=10 tid=0x0000000041f9d000 nid=0x22bf in Object.wait() [0x00007f594e732000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000007848dd390> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118)
    - locked <0x00000007848dd390> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134)
    at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)

"Reference Handler" daemon prio=10 tid=0x0000000041f9b000 nid=0x22be in Object.wait() [0x00007f594e833000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000007848dd350> (a java.lang.ref.Reference$Lock)
    at java.lang.Object.wait(Object.java:485)
    at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)
    - locked <0x00000007848dd350> (a java.lang.ref.Reference$Lock)

"main" prio=10 tid=0x0000000041f2e800 nid=0x22b4 waiting on condition [0x00007f59541a7000]
   java.lang.Thread.State: TIMED_WAITING (sleeping)
    at java.lang.Thread.sleep(Native Method)
    at org.codehaus.cargo.container.spi.util.ContainerUtils.waitTillContainerIsStopped(ContainerUtils.java:88)
    at org.codehaus.cargo.maven2.ContainerStartMojo.doExecute(ContainerStartMojo.java:59)
    at org.codehaus.cargo.maven2.AbstractCargoMojo.execute(AbstractCargoMojo.java:279)
    at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:569)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:539)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
    at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
    at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
    at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
    at org.codehaus.classworlds.Launcher.main(Launcher.java:375)

"VM Thread" prio=10 tid=0x0000000041f94000 nid=0x22bd runnable 

"GC task thread#0 (ParallelGC)" prio=10 tid=0x0000000041f41800 nid=0x22b5 runnable 

"GC task thread#1 (ParallelGC)" prio=10 tid=0x0000000041f43800 nid=0x22b6 runnable 

"GC task thread#2 (ParallelGC)" prio=10 tid=0x0000000041f45800 nid=0x22b7 runnable 

"GC task thread#3 (ParallelGC)" prio=10 tid=0x0000000041f47000 nid=0x22b8 runnable 

"GC task thread#4 (ParallelGC)" prio=10 tid=0x0000000041f49000 nid=0x22b9 runnable 

"GC task thread#5 (ParallelGC)" prio=10 tid=0x0000000041f4b000 nid=0x22ba runnable 

"GC task thread#6 (ParallelGC)" prio=10 tid=0x0000000041f4c800 nid=0x22bb runnable 

"GC task thread#7 (ParallelGC)" prio=10 tid=0x0000000041f4e800 nid=0x22bc runnable 

"VM Periodic Task Thread" prio=10 tid=0x00007f594800c000 nid=0x22c4 waiting on condition 

JNI global references: 1299

Heap
 PSYoungGen      total 276160K, used 141490K [0x00000007d64b0000, 0x00000007f7e30000, 0x0000000800000000)
  eden space 256512K, 51% used [0x00000007d64b0000,0x00000007de6d88f8,0x00000007e5f30000)
  from space 19648K, 41% used [0x00000007e5f30000,0x00000007e6734020,0x00000007e7260000)
  to   space 18688K, 0% used [0x00000007f6bf0000,0x00000007f6bf0000,0x00000007f7e30000)
 PSOldGen        total 85376K, used 28607K [0x0000000782e00000, 0x0000000788160000, 0x00000007d64b0000)
  object space 85376K, 33% used [0x0000000782e00000,0x00000007849efdf0,0x0000000788160000)
 PSPermGen       total 21248K, used 20127K [0x000000077dc00000, 0x000000077f0c0000, 0x0000000782e00000)
  object space 21248K, 94% used [0x000000077dc00000,0x000000077efa7ca0,0x000000077f0c0000) 
```

在我的脑海中，看起来等待 HTTP 守护线程的数量异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T04:23:13.730

尝试以下步骤；

编辑 conf/server.xml 并找到定义标签 HTTP 连接器的行。它看起来像这样，可能带有更多参数：

```
 <Connector port="8080"/> 
```

向连接器添加 URIEncoding="UTF-8" 属性：

```
 <Connector port="8080" URIEncoding="UTF-8"/> 
```

重启Tomcat

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T23:45:08.233

You could try using the javascript function `escape(parameter)`, before you send the request. I hope my answer is not very late and it are useful to someone.

# php - jquery checkall 复选框加重置

> ID：11856524
> 
> 赞同：0
> 
> 时间：2012-08-08T01:42:31.530
> 
> 标签：php, javascript, jquery

我正在使用以下 jquery 来实现检查 php 页面中的所有效果：-

```
<script>
$(function(){
    $("#checkall").click(function(){
        if($("#checkall").attr('checked')){
            $(".department").attr('checked', true);
        }else{
            $(".department").attr('checked', false);
        }
    });
});
</script>

<input type="checkbox" id="checkall" name="check_all" />

<input type="checkbox" name="department[]" class="department" value=""  checked = "checked"/> 
```

并且全部选中并取消选中所有效果都可以正常工作。但是，它不适用于表单中的重置按钮。我该如何修改jquery？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:46:31.760

试试这个演示：http: [//jsfiddle.net/JCWaT/](http://jsfiddle.net/JCWaT/)

我在这里的旧回复：[复选框选中所有选项](https://stackoverflow.com/questions/11380555/checkbox-check-all-option)

希望符合需要`:)`

**或满足您的需要** [http://jsfiddle.net/kJCcP/](http://jsfiddle.net/kJCcP/)

**代码**

```
$('input[name="Company"],input[name="Country"]').click(function(){

          $(this).nextAll('input[name="'+this.name+'Sub"]').prop('checked',this.checked);

});
​ 
```

**或者**

```
$('#checkall').click(function() {

    $(this).nextAll('.department').prop('checked', this.checked);

});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T01:47:57.660

`.prop`改为使用`.attr`，请参阅***[工作演示](http://jsfiddle.net/52xLA/)***。

```
$(function(){
    $("#checkall").click(function(){
        if($(this).prop('checked')){
            $(".department").prop('checked', true);
        }else{
            $(".department").prop('checked', false);
        }
    });
});​ 
```

你的代码甚至可能很短：

```
$(function(){
    $("#checkall").click(function(){
        $(".department").prop('checked', $(this).prop('checked'));
    });
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T01:48:25.290

```
$("#checkall").click(function(){
    $(".department").prop('checked', $(this).is(':checked') ); 
}); 
```

[jQuery`.prop()`文档](http://api.jquery.com/prop/)有一个部分描述了为什么应该使用它而不是操作属性。

# mysql - 类似系统的数据库模式

> ID：11856526
> 
> 赞同：6
> 
> 时间：2012-08-08T01:42:59.317
> 
> 标签：mysql, sql, database

我一直在考虑为我的网站设置一个点赞系统，但我无法确定最好的方法。我正在使用 MySQL，现在，我有一个活动表，用于文本、图片、视频等的帖子，还有一个评论表，用于评论。评论和活动帖子都可以点赞，那么点赞表的列应该怎么处理呢？我愿意接受将整个架构一起更改以获得更连贯的设计的建议。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-08T02:06:28.820

只需创建一个表`likes`，其结构如下：

```
`id` int(11) NOT NULL AUTO_INCREMENT,
`userid` int(11) NOT NULL,
`post_type` varchar(10) NOT NULL,
`post_id` int(11) NOT NULL,
`date` datetime NOT NULL,
 PRIMARY KEY (`id`) 
```

然后，每当有人喜欢活动帖子时，您将插入该用户的 ID，即`post_type`作为*活动*，然后`post_id`将是帖子 ID（显然）。

如果有人喜欢评论，您会做同样的事情，但会为帖子类型添加*评论*。

然后获得喜欢的活动帖子：

```
SELECT * FROM `likes` WHERE post_id = 'id' AND post_type = 'activity' 
```

您只需要替换`'id'`为 ID 变量。

评论也是如此（当然，除非您需要更改`post_type`）。

我希望这可以帮助您了解如何为您的网站制作类似的系统:)

# android - Android NFC 手机自动模拟多个标签

> ID：11856530
> 
> 赞同：1
> 
> 时间：2012-08-08T01:43:19.630
> 
> 标签：android, tags, nfc, emulation

所以我知道，在 Android 中，可以将智能手机配置为模拟模式以模拟给定的 NFC 标签。我很好奇的是是否有一种方法可以在 NFC 握手期间通过某种唯一 ID 来识别 NFC 阅读器。

例如，假设我每天使用一些与 NFC 兼容的标签……比如说燃料奖励卡、我的工作安全徽章和我的主要品牌信用卡。是否可以根据手机检测到的阅读器自动模拟正确的标签，这样当我点击燃油泵时，我的燃料津贴标签会被模拟，当我在工作中点击传感器时，我的徽章会被模拟，当我点击时在模拟我的信用卡的任何零售店？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:02:46.957

简短的回答：可能不是。读者没有唯一的 ID。它们发出轮询命令，这些命令是标准化和固定的。

然而，非接触式智能卡系统通常与 ISO 7816-4 兼容。它们支持一张卡上的多个应用程序。读者选择他们想要与之交互的应用程序的应用程序 ID。因此，如果您所有的卡都是与 ISO 7816-4 兼容的 ISO 14443-4 卡，那么（理论上）可以将它们组合成一张卡，例如在 NFC 手机的安全元件中。

另一个流行的非接触式系统是 MIFARE Classic。NFC 手机中的安全元件也很可能模拟 MIFARE Classic 卡。这些卡不符合 ISO 7816-4 标准，但仍然可以在一张卡上组合多个应用程序（使用所谓的 MIFARE 应用程序目录）。因此，如果您的卡是符合 ISO 7816-4 的卡和 MIFARE Classic 卡的集合，理论上可以将它们组合在安全元件中。但是，MIFARE 卡的内存有限，并且使用密钥进行读写访问，因此您无法读取其内容。因此，即使理论上可以组合多个应用程序，但在实践中可能仍然是不可能的。

很可能，您的一张或多张卡不符合 ISO 7816-4 标准且不符合 MIFARE Classic，例如 MIFARE Ultralight、DESFire 或 ICODE（仅举几例）。[您可以使用TagInfo](https://play.google.com/store/apps/details?id=com.nxp.taginfolite)等 Android 应用程序检查内部的芯片。

# r - 按值和顺序比较向量

> ID：11856531
> 
> 赞同：0
> 
> 时间：2012-08-08T01:43:47.053
> 
> 标签：r, vector, comparison

我以字符向量的形式提取了一些棒球击球阵容，例如

```
[1] "Yunel Escobar"     "Kelly Johnson"     "Jose Bautista"     "Adam Lind"        
[5] "Edwin Encarnacion" "Brett Lawrie"      "Eric Thames"       "Colby Rasmus"     
[9] "Jeff Mathis" 
```

并在 R 中创建了一个数据框 allLineups，其中列出了 162 场比赛赛季中每场比赛的击球顺序

头（所有阵容）

```
player          order game
 Yunel Escobar     1    1
 Kelly Johnson     2    1
 Jose Bautista     3    1
 Adam Lind         4    1
 Edwin Encarnacion 5    1
 Brett Lawrie      6    1 
```

我现在想做一些分析，其中包括以下内容

a) 在本赛季中，任何特定的 9 名球员在击球阵容中出现的频率

b) 完全相同的阵容（包括顺序）出现多少次

c) 两个指定玩家一起出现的频率

d) 对于任何指定的游戏，它的阵容与第一场比赛的阵容相比如何

我很感激有关如何回答这些查询的一些指导

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:16:01.623

在下面的评论中添加`sort`调用以交付 OP 所要求的内容；

```
player <- c("Yunel Escobar"  ,   "Kelly Johnson"  ,   "Jose Bautista"   ,  "Adam Lind"   ,     
"Edwin Encarnacion", "Brett Lawrie"   ,   "Eric Thames"   ,    "Colby Rasmus"    , 
"Jeff Mathis")

# create two games with different lineups
allLineups <- data.frame(player=c(player, rev(player)) , order=1:9, game=rep(1:2, each=9))

#construct a lineup
with(allLineups, tapply(player, game, function(x) paste0(sort(x), collapse="/") ) )

# tabulate the values for lineups
table( with(allLineups, tapply(player, game, function(x) paste0(sort(x), collapse="/") ) ) ) 
```

您可以通过以下方式缩短阵容列表：

```
allLineups$shortplyr <- sub("^(.).+\\ (.{4}).*$", '\\1_\\2', allLineups$player)
# ------------
table( with(allLineups, tapply(shortplyr, game, function(x) paste0(sort(x), collapse="/") ) ) )

A_Lind/B_Lawr/C_Rasm/E_Enca/E_Tham/J_Baut/J_Math/K_John/Y_Esco 
                                                             2 
```

OP 显然不希望这样：

如果阵容没有排序，你应该排序：

```
allLineups <- with( allLinups, allLineups[ order(game, order) , ] 
```

# c++ - 使用此指针时出现 C++ 析构函数错误的原因？

> ID：11856532
> 
> 赞同：0
> 
> 时间：2012-08-08T01:43:59.000
> 
> 标签：c++, class, memory-management, memory-leaks, unhandled-exception

我一直在编写一个代码，其中有很多类。我在构造函数中为不同的对象数组分配内存。但是，当我认为一切正常时，我遇到了一个奇怪的错误。例如，假设我有一个名为 Points 的类，它有一个名为 data 的双点数组。

好的，我现在发布所有代码：

```
class Points
{
      double *data;

      Points::Points()
      { 
           data = new double [C_NUMBER_OF_POINTS];
      }

      Points::~Points()
      {
           delete [] this->data;
      }
}; 
```

调试后发现错误出在this指针上，不知道是什么原因？析构函数被调用来删除数据，而对象正在被销毁，但它仍在内存中。我的问题是为什么会这样？

我得到的错误基本上是由于内存处理不当

> HandTracker.exe 中 0x778f15de 处未处理的异常：0x00000000：操作成功完成。块引用

如果我删除此指针意味着如果我使用以下析构函数，则错误已修复

```
 Points::~Points()
      {
           delete []data;
      } 
```

我的问题不完全是关于如何处理内存泄漏，而是与这个指针相关的这个特定问题。这个指针背后的机制是什么使它给出这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:37:57.447

最有可能的是，您在代码中的某处复制了一个实例，`Points`或者从对另一个的引用中构造了一个实例。这创建了具有相同`data`指针的类的两个实例。当第一个被销毁时，它销毁了两个实例都有指针的对象。当第二个被访问或销毁时，它会导致问题，因为该对象已经消失了。

最好的解决方法是通过使用经过良好测试的具有自己的析构函数的类来避免使用析构函数。例如，在这种情况下， [std::array](http://www.cplusplus.com/reference/stl/array/)（或[std::vector ）。](http://www.cplusplus.com/reference/stl/vector/)这将使一切“神奇地工作”，因为这些类已经具有适当的析构函数、复制构造函数和复制赋值运算符。

否则，请确保您具有正确的复制构造函数和复制赋值运算符，因为默认值（按成员复制/重复）在您的情况下不起作用。请参阅 James McNellis 关于三规则的评论。

试试这个：

```
Points::Points(const Points &a)
{
    data = new double[C_NUMBER_OF_POINTS];
    for (int i = 0; i < C_NUMBER_OF_POINTS; ++i)
          data[i] = a.data[i];
}

Points& operator=(const Points& a)
{ // The key is that this overrides the catastrophic default -- data=a.data;
     for (int i = 0; i < C_NUMBER_OF_POINTS; ++i)
           data[i] = a.data[i];
     return *this;
} 
```

# c# - 在 Windows 窗体 C# 中使用 TableLayoutPanel 和动态组合框

> ID：11856536
> 
> 赞同：0
> 
> 时间：2012-08-08T01:44:15.780
> 
> 标签：c#

我需要一些认真的帮助。我已经在论坛上搜索，谷歌搜索，并尽可能多地进行实验......一切都无济于事。

这就是问题所在。

我正在使用 TableLayoutPanel 根据数据库中的值动态配置表单。在 TableLayoutPanel 中，我动态添加 -

*   1 个标签，
*   1个文本框，
*   1 个按钮，
*   1 个组合框

**这是问题的根源 -**

> 如果我在 TableLayoutPanel 中有 2 行或更多行，则所有 Comboboxes 都会同时更改。

*我该怎么做才能一次只更改 1 个 Combobox ？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-04T23:45:30.527

数据源是相同的，因此它将连接到数据源的一个组合框的任何更改视为对任何其他连接的组合框的更改。要解决这个问题，只需制作一个临时字符串数组并将信息从原始源复制到该数组，然后将其作为组合框的数据源。

# android - 在android中使用多个视图

> ID：11856542
> 
> 赞同：0
> 
> 时间：2012-08-08T01:45:05.507
> 
> 标签：android, android-layout, views

所以我有以下 onCreate 函数

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);

       mylocation = new MyLocation(this);

       double distance = distance (mylocation.lat, mylocation.lng, messagelat, messagelong);
       Log.d("Distance",Double.toString(distance));
       mSensorManager = (SensorManager)getSystemService(Context.SENSOR_SERVICE);
       mSensor = mSensorManager.getDefaultSensor(Sensor.TYPE_ORIENTATION);
       mView = new SampleView(this,Double.toString(distance));
       **this.setContentView(R.layout.activity_clouds);**
       this.button = (Button)this.findViewById(R.id.close);
       this.button.setOnClickListener(new OnClickListener() {
         public void onClick(View v) {
             Intent myIntent = new Intent(Activity1.this, CameraPreview.class);
             Activity1.this.startActivity(myIntent);
         }
       });

       **setContentView(mView);**

   } 
```

我的问题是我想同时使用来自 activity_cloud.xml 和 SampleView 的视图，但是如果我这样做，我只会得到示例视图！我想在 SampleView 类中添加一个按钮和覆盖层......非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T03:46:11.930

您可以在常规 xml 布局中使用自定义视图。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:orientation="vertical">
<com.something.something.SampleView
        android:id="@+id/sample_view"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent" />
<Button android:layout_height="0dp"
                                   android:layout_width="fill_parent"
                                   android:layout_weight="1"
                                   android:id="@+id/close"/> 
```

# html - 不要将 div 用于按钮功能

> ID：11856543
> 
> 赞同：1
> 
> 时间：2012-08-08T01:45:10.223
> 
> 标签：html, css

我现在在移动设备上，我找不到我最近阅读的建议不要使用 div 来实现按钮功能的帖子。也许哲学已经得到了足够的认同，这并不重要。

似乎 div 的样式比`<button>`类型更容易（不幸的是，在我无法参考的答案中推荐了这一点）。即使这不是真的，使用 div 作为按钮有什么缺点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T02:28:49.530

`<div>`几乎没有或没有语义意义。它只是一个通用容器。

`<a>`, `<button>`, 或`<input type=button>`全部使事情变得更清楚，它应该做什么，等等。

这有几个优点：

*   可访问性：屏幕阅读器或任何知道如何处理的机会`<a>`比它设法弄清楚您`<div>`实际上是一种与 Web 服务器或其他东西进行通信的方式要大得多。

*   用户界面优势：如果用户习惯于在可点击元素或其他内容之间切换，如果您使用的元素清楚地表明用户可以点击/按下/任何内容，他们的浏览器更有可能做正确的事情。如果您使用`<div>`，则浏览器可能不会突出显示它或执行通常所做的任何事情来告诉人们他们可以单击它。

*   您可以免费获得可点击性，而不必附加 onclick 或其他任何东西。使用 a `<div>`，没有 JavaScript 可能无法使其工作。对于其他元素，至少还有希望（尤其是`<a>`）。

我可能会遗漏很多我从未想过的其他事情，也许以上不是最好的例子，但我怀疑你明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T02:37:43.197

`<div>`不支持该`tabindex`属性。所以键盘用户处于劣势。

此外，网页优化器（例如移动设备上的 Google）不太可能去除`<input>`.

# c++ - 在 HLSL 中获取顶点的颜色？

> ID：11856547
> 
> 赞同：0
> 
> 时间：2012-08-08T01:45:50.567
> 
> 标签：c++, shader, direct3d, hlsl

我有以下顶点和像素着色器：

```
 struct VS_INPUT
   {
      float4 Position  : POSITION0;
      float2 TexCoord  : TEXCOORD0;
      float4 Color     : TEXCOORD1;
   };
   struct VS_OUTPUT
   {
      float4 Position  : POSITION0;
      float4 Color     : COLOR0;
      float2 TexCoord  : TEXCOORD0;
   };

   float4x4 projview_matrix;

   VS_OUTPUT vs_main(VS_INPUT Input)
   {
      VS_OUTPUT Output;
      Output.Position = mul(Input.Position, projview_matrix);
      Output.Color = Input.Color;
      Output.TexCoord = Input.TexCoord;
      return Output;
   } 
```

像素

```
 texture tex;
   sampler2D s = sampler_state {
      texture = <tex>;
   };
   float4 ps_main(VS_OUTPUT Input) : COLOR0
   {
      float4 pixel = tex2D(s, Input.TexCoord.xy);
      return pixel;
   } 
```

这是一个 2d 游戏。四边形的顶点包含我想用来为位图着色的着色颜色。如何获得当前顶点的颜色，以便在像素着色器中将其乘以当前像素颜色？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T03:34:25.847

在您的像素着色器中，执行以下操作：

```
float4 pixel = tex2D(s, Input.TexCoord.xy) * Input.Color; 
```

Input.Color 值将在您的平面上为您线性解释，就像 Input.TexCoord 一样。要将两个颜色向量混合在一起，只需将它们相乘即可。也可能建议这样做：

```
float4 pixel = tex2D(s, Input.TexCoord.xy) * Input.Color;
pixel = saturate(pixel); 
```

saturate() 函数将在 0.0 到 1.0 的范围内裁剪颜色中的每个 RGB 值，这可以避免任何可能的显示伪影。

# android - Android：如何设置AlertDialog的宽度和高度，以及AlertDialog风格的按钮？

> ID：11856550
> 
> 赞同：7
> 
> 时间：2012-08-08T01:46:08.300
> 
> 标签：android, layout, styles, android-alertdialog

我有一个任务是通过 xml 更改 AlertDialog 的宽度和高度，我想让它变成样式，所以我可以轻松使用它。而且，我还需要更改 AlertDialog 样式的按钮。你能告诉我实现的方法吗目标。谢谢 非常感谢。PS，我最好通过更改xml来实现目标。</p>

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-08T02:53:48.363

有两种方法 1) 以编程方式 2) 通过使用 xml 布局

```
1)=======>

AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setView(layout);
builder.setTitle("Title");
alertDialog = builder.create();
alertDialog.show();
alertDialog.getWindow().setLayout(600, 400); //Controlling width and height.

                         ( or )

alertDialog.show();
WindowManager.LayoutParams lp = new WindowManager.LayoutParams();

lp.copyFrom(alertDialog.getWindow().getAttributes());
lp.width = 150;
lp.height = 500;
lp.x=-170;
lp.y=100;
alertDialog.getWindow().setAttributes(lp); 
```

如果要显示要显示的布局，`Alert dialog`请参见[this](http://blog.stylingandroid.com/archives/271)

```
2)========> 
```

选择.xml

```
<TextView
    android:id="@+id/img"
    android:layout_width="wrap_content"
    android:text="@string/choose"
    android:textSize="25dp"
    android:textColor="#fff"
    android:layout_height="50dp"/>

<TableLayout android:id="@+id/table"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#fff"
    android:orientation="vertical">

    <TableRow
        android:id="@+id/tr1" 
        android:orientation="horizontal"
        android:layout_margin="10dp">
        <ImageView 
            android:contentDescription="@string/phone"
            android:src="@drawable/phone"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>
        <TextView
            android:id="@+id/phnText"
            android:layout_width="wrap_content"
            android:text="@string/phone"
            android:gravity="left|center_vertical"
            android:layout_marginLeft="10dp"
            android:textSize="25dp"
            android:textColor="#000"
            android:layout_height="50dp"/>
    </TableRow>
    <View
            android:layout_width="fill_parent"
            android:layout_height="1dip"
            android:background="#FF000000" />

    <TableRow
        android:id="@+id/tr2" 
        android:orientation="horizontal"
        android:layout_margin="10dp">
        <ImageView 
            android:contentDescription="@string/sms"
            android:src="@drawable/sms"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>
        <TextView
            android:id="@+id/smsText"
            android:layout_width="wrap_content"
            android:text="@string/sms"
            android:gravity="left|center_vertical"
            android:layout_marginLeft="10dp"
            android:textSize="25dp"
            android:textColor="#000"
            android:layout_height="50dp"/>
    </TableRow>

</TableLayout>
</LinearLayout> 
```

将其显示为弹出窗口，如下所示

```
 private void showPopUp()
{
    final AlertDialog.Builder helpBuilder = new AlertDialog.Builder(this);
    helpBuilder.setTitle("");

    LayoutInflater inflater = getLayoutInflater();
    final View checkboxLayout = inflater.inflate(R.layout.choose, null);
    helpBuilder.setView(checkboxLayout);

    final AlertDialog helpDialog = helpBuilder.create();
    helpDialog.show();

    TableRow tablerowPhone  =    (TableRow)checkboxLayout.findViewById(R.id.tr1);
    TableRow tablerowSms    =    (TableRow)checkboxLayout.findViewById(R.id.tr2);

    tablerowPhone.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            helpDialog.dismiss();

            Uri callUri = Uri.parse("tel:" + listview_array[4]);  
            Intent intent = new Intent(Intent.ACTION_CALL, callUri); 
            startActivity(intent);
        }
    });

    tablerowSms.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            helpDialog.dismiss();

            Uri smsUri = Uri.parse("sms:" + listview_array[4]);  
            Intent intent = new Intent(Intent.ACTION_VIEW, smsUri); 
            startActivity(intent);
        }
    });
} 
```

`showPopUp()`在你想要的地方调用这个方法。这样您就可以在 xml 文件中为布局设置高度和宽度

# python - Python语法

> ID：11856553
> 
> 赞同：0
> 
> 时间：2012-08-08T01:46:15.633
> 
> 标签：python

我是python编程的新手。我在 Linux 上构建了 Beremiz 程序，我得到了这个错误。

```
File "Beremiz.py", line 164, in <module>
    from ProjectController import ProjectController, MATIEC_ERROR_MODEL, ITEM_CONFNODE
  File "/DATA1/UTILITY/Beremiz/beremiz/ProjectController.py", line 16, in <module>
    import connectors
  File "/DATA1/UTILITY/Beremiz/beremiz/connectors/__init__.py", line 34
    for name in listdir(_base_path) 
      ^

connectors = {name:_GetLocalConnectorClassFactory(name)
                  for name in listdir(_base_path)
                      if path.isdir(path.join(_base_path, name))
                          and not name.startswith("__")} 
```

此语法不是 python 构建的。什么是问题？谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T03:54:11.267

您需要确保您的 Python 版本支持字典理解语法。这需要 Python >= 2.7 或 Python >= 3。

否则，您可以像这样修改代码：

```
connectors = dict((name, _GetLocalConnectorClassFactory(name))
                  for name in listdir(_base_path)
                      if path.isdir(path.join(_base_path, name))
                          and not name.startswith("__")) 
```

# regex - 用于制表的 Perl 程序

> ID：11856555
> 
> 赞同：2
> 
> 时间：2012-08-08T01:46:17.727
> 
> 标签：regex, perl

**F1.txt**

```
tom
x
a=1 b=2 c=3 d=4 e=5 
y
b=11 r=12
bob

a=6 b=7 c=8 e=10 
```

***结果***

**F2.txt**

```
.            X         Y
name  a  b  c  d  e  b   r

tom   1  2  3  4  5  11  12

bob   6  7  8  -  10 -   - 
```

你能帮我解决我的这个问题吗？我有一个文件 F1.txt。我的工作是将该文件转换为示例 F2.txt 中所示的格式。我尝试通过删除 Tom 和 Bob 之后的所有字符串值来执行此操作，但 F1.txt 中的数值除外，然后进行连接。这是代码：

```
use strict;

open (file100,"< data.txt");
open (file101,">>F3.txt");

my @array = < file100>;

print file101 "name    a    b      c      d     e\n\n";
print file101 "tom @array[1]\n\n";
print file101 "bob @array[3]\n\n"; 
```

这里data.txt：

```
tom

1 2 3 4 5

bob 

6 7 8 10 
```

我用这段代码得到的输出是：

F3.txt

```
name  a  b  c  d  e

tom   1  2  3  4  5

bob   6  7  8  10 
```

预期的输出应该像 F2.txt 中显示的那样，但不像 F3.txt

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T02:17:18.017

```
#!/usr/bin/env perl

my $pr = "%-12s";
my @headers = qw/name a b c d e/;
my %names;
while (<DATA>) {
    chomp;
    s/^\s+//g;
    s/\s+$//g;
    my $line = <DATA>;
    $line =~ s/^\s+//g;
    $line =~ s/\s+$//g;
    %{$names{$_}} = split /\s*=\s*|\s+/, $line;
}

printf $pr x @headers . "\n", @headers;
for (keys %names) {
    my @ds = ($_);
    for my $k (@headers[1..$#headers])
    {
        my $v = $names{$_}->{$k};
        push @ds, $v ? $v : '-';
    }
    printf $pr x @ds . "\n", @ds;
}

__DATA__
 tom
 a = 10.1 b = 2 c = 300.89 d=4145 e=55
bobby
 a= 60 b = 74.2 c = 8 e = 10.25 
```

输出：

```
name    a       b       c       d       e       
tom     1       2       3       4       5       
bob     6       7       8       -       10 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T03:31:43.090

这将满足您的要求

```
use strict;
use warnings;

my %data;
my @names;

while (<DATA>) {
  next unless /\S/;
  if (/=/) {
    %{ $data{$names[-1]} } = /[^\s=]+/g;
  }
  else {
    push @names, /(\S+)/;
  }
}

my %keys = map %$_, values %data;
my @keys = sort keys %keys;

printf "%-6s %s\n\n", 'name', join '  ', @keys;
printf "%-6s %s\n\n", $_, join '  ', map $_ // '-', @{$data{$_}}{@keys} for @names;

__DATA__
tom

a=1 b=2 c=3 d=4 e=5

bob

a=6 b=7 c=8 e=10 
```

**输出**

```
name   a  b  c  d  e

tom    1  2  3  4  5

bob    6  7  8  -  10 
```

**更新**

对于旧版本（v5.10 之前），Perl 会将定义或运算符`//`视为放错位置的正则表达式匹配。对于这些平台，第二个`printf`语句可以这样写

```
printf "%-6s %s\n\n", $_, join '  ', map { defined $_ ? $_ : '-' } @{$data{$_}}{@keys} for @names; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T02:29:40.663

为了您的理解，我对此采取了长期措施：

```
use strict;
use warnings;

my %hash;
my @vals;
my $key;
my $val;
my $name;
my @headings;
my $file100;

open ($file100, "<", "data.txt");

while (<$file100>)
{
        chomp;
        next if (! m/\S/);
        if (m/=/)
        {
            @vals = $_ =~  /(.+)=(.+)\b/g;
            while (@vals)
            {
                $key = shift @vals;
                if (!grep(/^$key$/, @headings))
                {
                    push (@headings, $key);
                }

                $val = shift @vals;
                $hash{$name}{$key} = $val;
            }
        } else {
           $name = $_;
}

print "name\t" . join ("\t", @headings) . "\n\n";
for my $key1 (keys %hash)
{
    print $key1;
    for (@headings)
    {
        if (defined $hash{$key1}{$_})
        {
            print "\t" . $hash{$key1}{$_};
        } else
        {
            print "\t-";
        }
    }
    print "\n\n";
} 
```

**你需要拿起一本 Perl 书并学习它。**

# html - 锚定位浏览器

> ID：11856564
> 
> 赞同：0
> 
> 时间：2012-08-08T01:47:52.527
> 
> 标签：html, css

我正在使用以下 html 在固定菜单下定位锚点：

```
<a style="position: relative; top: -150px;" name="services"></a> 
```

这在 Firefox 中运行良好，但 chrome 和 safari 都将锚点加载到稍微不同的位置，从而掩盖了固定菜单“下方”的文本。

有没有人对我如何解决这个问题有任何想法。

wip 网站是[http://mattangel.com.au](http://mattangel.com.au)

提前谢谢了，

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T03:22:54.407

当我制作这样的网站时，我喜欢确保每个“页面”都有一个相似的类，但不同的 id。在为类设置样式时，请确保提供以下属性。

```
.page {
    overflow: hidden;
    margin-bottom: 1000px;
} 
```

添加 margin-bottom 将阻止您看到额外的页面。

我还注意到您正在使用 jQuery 来实现幻灯片效果，我不确定您为什么要使用 a 名称的样式。只需执行以下操作：

```
<h1 class="page_title" id="services"><a name="services">Services</a></h1> 
```

并确保将所有内容都包含在页面 DIV 中。

# python - 转到文件并仅打印其中没有任何数字的单词

> ID：11856566
> 
> 赞同：0
> 
> 时间：2012-08-08T01:48:07.490
> 
> 标签：python, python-3.2

我还需要让程序分别显示在你的数字中确实有数字的单词

```
f = open("lolpa.txt", "r")

list1 = (f)
temp = []

for item in list1:
    if "1" "2" "3" "4" "5" "6" "7" "8" "9" "0"  in item:
        temp.append(item)
    else:
        print(item) 
```

是我到目前为止所拥有的，但由于某种原因它显示了所有的单词。

编辑： lolpa.txt 只是一个用于比较的文件

编辑：如果那会改变什么，我正在使用 python 3.2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T01:54:48.063

这样的事情会让你开始，问题不是很清楚。

```
with open("lolpa.txt") as f:
    for word in f.readline().split(): # assuming all words are on the first line
        digits = [c for c in word if c.isdigit()]
        if digits: # digits list is not empty
            print(' '.join(digits)) # shows digits with space in between
        else:
            print(word) # prints word normally 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T02:57:22.497

下面将把有数字的整个单词放在一个文件中，而将没有数字的单词放在另一个文件中。

```
f = open('lolpa.txt', 'r')
d = open('lolpa_with_digit.txt', 'w')
nd = open('lolpa_without_digit.txt', 'w')
rowlist = (f)
temp = []

for line in rowlist:
    words = line.split(' ')
    for word in words:
        word = word.strip()
        has_digit = False
        for char in word:
            if char.isdigit():
                has_digit = True
        if has_digit:
            d.write(word + '\n')
        else:
            nd.write(word +'\n') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T02:23:26.753

我不是正则表达式专家，但这应该可以工作（当然你必须遍历每一行 yadayada）：

```
import re
prog = re.comile(r'\b[a-zA-Z]+\b')
result = prog.findall(your_line_here) 
```

结果将是所有单词的列表

# mysql - 删除多列唯一键而不删除外键？

> ID：11856568
> 
> 赞同：2
> 
> 时间：2012-08-08T01:48:15.710
> 
> 标签：mysql

我正在尝试从也具有外键的表中删除多列唯一键。我不断收到“errno 150”，除非我先删除外键。

例如，如果我创建表：

```
CREATE TABLE `testtable` (
    `testtable_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
    `testtable_value` char(255) DEFAULT NULL,
    `othertable_id` int(10) unsigned NOT NULL,
    PRIMARY KEY (`testtable_id`),
    UNIQUE KEY `tt_unique_key` (`othertable_id`,`testtable_value`),
    CONSTRAINT `tt_foreign_key` FOREIGN KEY (`othertable_id`) REFERENCES `othertable` (`othertable_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

我尝试像这样删除唯一键：

```
ALTER TABLE `testtable` DROP KEY `tt_unique_key`; 
```

它会产生错误：

```
Error Code: 1025
Error on rename of './testdb/#sql-374_27' to './testdb/testtable' (errno: 150) 
```

我尝试设置 FOREIGN_KEY_CHECKS = 0，但我得到了同样的错误：

```
SET FOREIGN_KEY_CHECKS = 0;
ALTER TABLE `testtable` DROP KEY `tt_unique_key`;
SET FOREIGN_KEY_CHECKS = 1; 
```

这会生成与上面相同的错误消息。

但是，如果我先删除外键，然后删除唯一键，然后重新创建外键，一切正常：

```
ALTER TABLE `testtable` DROP FOREIGN KEY `tt_foreign_key`;
ALTER TABLE `testtable` DROP KEY `tt_unique_key`;
ALTER TABLE `testtable` ADD CONSTRAINT `tt_foreign_key` FOREIGN KEY (`othertable_id`) REFERENCES `othertable` (`othertable_id`); 
```

这似乎真的很低效。谁能解释发生了什么？有没有办法在不先删除外键的情况下删除唯一键？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T06:46:10.027

一个 FOREIGN KEY REFERENCES，需要一个密钥，
唯一可以使用的密钥是 t_unique_key，这就是你不能删除它的原因。
所以首先添加另一个匹配键，然后删除旧键，在你的情况下是 othertable_id 字段

```
ALTER TABLE `testtable`
ADD KEY (othertable_id),
DROP KEY `tt_unique_key`; 
```

# xcode - 在 Xcode 中运行 Objective-C 而无需启动模拟器

> ID：11856571
> 
> 赞同：2
> 
> 时间：2012-08-08T01:48:38.030
> 
> 标签：xcode

我想在 Xcode 中运行我的 Objective-C 代码，但不适用于 iPhone 或 Mac。我想编写程序来解决[Project Euler](http://projecteuler.net/problem=5)的挑战，而无需启动模拟器。我`NSLog()`用来显示我的结果，这就是我所需要的。

我怎样才能做到这一点？我到处检查，但我发现的只是关于如何在 Xcode 之外运行 Objective-C 等问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T01:53:03.987

如果我理解正确，您想创建一个“命令行工具”，这是 Mac OS X 模板下的选项之一： ![在此处输入图像描述](../Images/1313f248f0da051b26b3ea83e8563fa7.png)

这将为您提供一个仅包含一个代码文件 main.m 的项目：

```
//  main.m
//  Project Euler Puzzle #N
//
//  Created by pnizzle on 8/7/12.

#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {

    }
    return 0;
} 
```

它与 Foundation 链接并编译为 ObjC，因此您几乎可以在 GUI 应用程序中做任何事情（当然，除了 GUI 部分），包括创建自己的类。`main()`是您的程序的入口点；只需将您想做的任何事情放在该`@autoreleasepool`块内即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T02:00:25.650

**在 Xcode 中使用命令行工具**选项的替代方法是**CodeRunner**应用程序，该应用程序可在 Mac App Store 中获得。CodeRunner 允许您在没有 Xcode 开销的情况下运行 Objective-C 代码的简短片段。

CodeRunner 还支持许多其他语言：C、Java、JavaScript、Lua、Perl、PHP 等

CodeRunner 目前的成本约为 10 美元，我发现它对于快速测试多种语言的短代码片段非常有用。

我相信您需要安装**命令行工具**包`Xcode -> Preferences -> Downloads`以供 CodeRunner 使用。

[http://krillapps.com/coderunner/](http://krillapps.com/coderunner/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T01:56:57.890

选择“命令行工具”将为您完成这项工作。运行代码时，您将在底部看到输出。

# java - 如何将扩展的jpanel添加到jframe

> ID：11856573
> 
> 赞同：1
> 
> 时间：2012-08-08T01:48:51.837
> 
> 标签：java, swing, jframe, jpanel

我写了一个扩展 JPanel 的类。这是代码：

```
public class MedicalMonitorPanel extends JPanel{
    public MedicalMonitorPanel() {
        super();
        initComponents();
    }
    public void initComponents(){
        //layout settings
    }
} 
```

现在我想将我的面板添加到 jframe：

```
public class MedicalMonitorDisplay extends JFrame{
    MedicalMonitorPanel panel;

    public MedicalMonitorDisplay(){
    panel = new MedicalMonitorPanel();
    initComponents();
}
    private void initComponents(){
    setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    setLayout(new BoxLayout(getContentPane(), BoxLayout.PAGE_AXIS));
    getContentPane().add(panel);
    getContentPane().validate();
}
    public static void main(String[] args){
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            new MedicalMonitorDisplay().setVisible(true);
        }
    });
}
} 
```

但我得到了这个例外：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at java.awt.Container.addImpl(Unknown Source)
    at java.awt.Container.add(Unknown Source)
    at javax.swing.JFrame.addImpl(Unknown Source)
    at java.awt.Container.add(Unknown Source)
    at MedicalMonitorDisplay.initComponents(MedicalMonitorDisplay.java:53)
    at MedicalMonitorDisplay.<init>(MedicalMonitorDisplay.java:40)
    at MedicalMonitorDisplay$1.run(MedicalMonitorDisplay.java:63)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source)
    at java.awt.EventQueue$1.run(Unknown Source) 
```

报告 add() 方法有问题。怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T02:47:37.627

这没有任何意义：

```
add(panel, getContentPane()); 
```

删除此行并重新开始。

相反，您应该通过以下方式将面板添加到 contentPane：

```
getContentPane().add(panel); 
```

如果这仍然不起作用，那么请告诉详细信息 - 如果您尝试这样做会出现什么问题？

此外，您不能在 contentPane 上调用 revalidate，除非您先将其强制转换为 JPanel。但是您无论如何都不需要重新验证 contentPane，因为您将`pack()`在添加所有组件后调用 JFrame，这就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T02:40:52.087

尝试使用`SwingUtilities`而不是`EventQueue`.

```
public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            new MedicalMonitorDisplay().setVisible(true);
        }
    });
} 
```

我也会按照*Hovercraft Full Of Eels*的建议修改你的代码以添加`panel`到`JFrame`他指示的方式中。

* * *

**编辑**

该问题是由于`MedicalMonitorPanel`在使用`MedicalMonitorPanel`数组时缺少类的实例化引起的。

# perl - 关闭回显 IO::Socket::INET

> ID：11856583
> 
> 赞同：1
> 
> 时间：2012-08-08T01:49:40.360
> 
> 标签：perl, sockets

我正在尝试使用 perl 创建一个远程登录脚本。我目前正在使用

```
$var = <$client>; 
chomp $var; 
```

但是，我试图让客户端输入密码，并且我想通过不回显输入的内容来以 linux 方式与客户端隐藏密码。有什么办法可以做到这一点吗？

编辑：

```
$serv = IO::Socket::INET->new ( 
Proto => 'tcp',
LocalPort => $port,
Listen => 10,
Reuse => 1)
|| die "Can't create server: $!";

while ($client = $serv->accept()) {
eval {
$client->autoflush(1); # Always remember to flush!
$who = $client->peerhost;
print STDERR "Connection from $who\n";
print $client hostname . " login: ";
$usr = <$client>;
chomp $usr;
$usr =~ s/\W//g;
print STDERR "User $usr\n";
die unless (length $usr < 20 && length $usr > 1);
print $client "Encrypted Password: ";
$pass = <$client>;
chomp $pass;
die unless (length $pass < 20 && length $pass > 1);
print STDERR "$who: Pass $pass\n";
};
close $client;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-12T00:59:10.707

这是本地控制台回显，与您的套接字无关。

有很多方法可以使用 Perl 关闭控制台回显，但我最喜欢的是`IO::Termios`（也许我有偏见，因为我写了它；））

```
use IO::Termios;
my $stdin = IO::Termios->new(\*STDIN);
$stdin->setflag_echo(0); 
```

# c# - NopCommerce / Entity Framework：产品表的迁移错误

> ID：11856584
> 
> 赞同：0
> 
> 时间：2012-08-08T01:49:42.437
> 
> 标签：c#, entity-framework, nopcommerce

我目前在从实体框架更新 NopCommerce 数据库时遇到了一个非常烦人的问题。

**背景：**

我正在编写一个小工具来将一种过时的电子商务应用程序迁移到 nopCommerce。

**错误：**

```
The conversion of a datetime2 data type to a datetime data type resulted in an out-of-range value.
The statement has been terminated. 
```

**我做了什么来尝试解决它**

过去，当我有一个未初始化的 DateTime 属性（0001 年）时，就会出现这种错误。但在这种情况下，这不是问题所在。我查看并确保正在设置所有 DateTime 属性。由于那不起作用，我也尝试制作 db 列`datetime2(7)`，但没有运气。最后我将它设置为`NULLABLE`但它仍然给了我同样的错误。因此，显然这里发生了其他事情，EF 抛出了一些无用的错误。我想知道表上是否可能有一个插入触发器（或任何触发器）试图在产品变体表或另一个表中创建一个条目，然后日期时间错误来自该表，但这不是案子。

**编码：**

```
foreach (var piloProduct in piloProducts)
{
    var product = new Models.Nop.Product
    {
        Name = piloProduct.Name,
        ShortDescription = piloProduct.ShortDescription,
        FullDescription = piloProduct.FullDescription,
        ProductTemplateId = 1,
        ShowOnHomePage = false,
        MetaKeywords = piloProduct.MetaKeywords,
        MetaDescription = piloProduct.MetaDescription,
        MetaTitle = piloProduct.MetaTitle,
        SeName = piloProduct.SeName,
        AllowCustomerReviews = false,
        ApprovedRatingSum = 0,
        NotApprovedRatingSum = 0,
        ApprovedTotalReviews = 0,
        NotApprovedTotalReviews = 0,
        Published = true,
        Deleted = false,
        CreatedOnUtc = DateTime.UtcNow,
        UpdatedOnUtc = DateTime.UtcNow
    };
    nopDb.Products.AddObject(product);
}
nopDb.SaveChanges(); 
```

我对这个完全不知所措，因为上面的代码非常简单明了。非常感谢任何帮助。

**更新**

我刚刚尝试使用 Linq-To-SQL 类而不是实体框架 EDMX，但遇到了完全相同的问题。奇怪的是，我直接从 SQL Management Studio 在表上运行了一个“INSERT INTO”语句，但它起作用了.. 去看看......有什么方法可以准确地查看 EF 或生成的“INSERT”语句Linq 到 SQL？

这是 Mark Oreta 要求的 EDMX 生成模型：

```
[EdmEntityTypeAttribute(NamespaceName="eSalesModel", Name="Product")]
[Serializable()]
[DataContractAttribute(IsReference=true)]
public partial class Product : EntityObject
{
    public static Product CreateProduct(global::System.Int32 id, global::System.String name, global::System.Int32 productTemplateId, global::System.Boolean showOnHomePage, global::System.Boolean allowCustomerReviews, global::System.Int32 approvedRatingSum, global::System.Int32 notApprovedRatingSum, global::System.Int32 approvedTotalReviews, global::System.Int32 notApprovedTotalReviews, global::System.Boolean published, global::System.Boolean deleted)
    {
        Product product = new Product();
        product.Id = id;
        product.Name = name;
        product.ProductTemplateId = productTemplateId;
        product.ShowOnHomePage = showOnHomePage;
        product.AllowCustomerReviews = allowCustomerReviews;
        product.ApprovedRatingSum = approvedRatingSum;
        product.NotApprovedRatingSum = notApprovedRatingSum;
        product.ApprovedTotalReviews = approvedTotalReviews;
        product.NotApprovedTotalReviews = notApprovedTotalReviews;
        product.Published = published;
        product.Deleted = deleted;
        return product;
    }
[EdmScalarPropertyAttribute(EntityKeyProperty=true, IsNullable=false)]
[DataMemberAttribute()]
public global::System.Int32 Id
{
    get
    {
        return _Id;
    }
    set
    {
        if (_Id != value)
        {
            OnIdChanging(value);
            ReportPropertyChanging("Id");
            _Id = StructuralObject.SetValidValue(value);
            ReportPropertyChanged("Id");
            OnIdChanged();
        }
    }
}
private global::System.Int32 _Id;
partial void OnIdChanging(global::System.Int32 value);
partial void OnIdChanged();

[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
[DataMemberAttribute()]
public Nullable<global::System.Int32> PiloId
{
    get
    {
        return _PiloId;
    }
    set
    {
        OnPiloIdChanging(value);
        ReportPropertyChanging("PiloId");
        _PiloId = StructuralObject.SetValidValue(value);
        ReportPropertyChanged("PiloId");
        OnPiloIdChanged();
    }
}
private Nullable<global::System.Int32> _PiloId;
partial void OnPiloIdChanging(Nullable<global::System.Int32> value);
partial void OnPiloIdChanged();

[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
[DataMemberAttribute()]
public global::System.String Name
{
    get
    {
        return _Name;
    }
    set
    {
        OnNameChanging(value);
        ReportPropertyChanging("Name");
        _Name = StructuralObject.SetValidValue(value, false);
        ReportPropertyChanged("Name");
        OnNameChanged();
    }
}
private global::System.String _Name;
partial void OnNameChanging(global::System.String value);
partial void OnNameChanged();

[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
[DataMemberAttribute()]
public global::System.String ShortDescription
{
    get
    {
        return _ShortDescription;
    }
    set
    {
        OnShortDescriptionChanging(value);
        ReportPropertyChanging("ShortDescription");
        _ShortDescription = StructuralObject.SetValidValue(value, true);
        ReportPropertyChanged("ShortDescription");
        OnShortDescriptionChanged();
    }
}
private global::System.String _ShortDescription;
partial void OnShortDescriptionChanging(global::System.String value);
partial void OnShortDescriptionChanged();

[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
[DataMemberAttribute()]
public global::System.String FullDescription
{
    get
    {
        return _FullDescription;
    }
    set
    {
        OnFullDescriptionChanging(value);
        ReportPropertyChanging("FullDescription");
        _FullDescription = StructuralObject.SetValidValue(value, true);
        ReportPropertyChanged("FullDescription");
        OnFullDescriptionChanged();
    }
}
private global::System.String _FullDescription;
partial void OnFullDescriptionChanging(global::System.String value);
partial void OnFullDescriptionChanged();

[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
[DataMemberAttribute()]
public global::System.String AdminComment
{
    get
    {
        return _AdminComment;
    }
    set
    {
        OnAdminCommentChanging(value);
        ReportPropertyChanging("AdminComment");
        _AdminComment = StructuralObject.SetValidValue(value, true);
        ReportPropertyChanged("AdminComment");
        OnAdminCommentChanged();
    }
}
private global::System.String _AdminComment;
partial void OnAdminCommentChanging(global::System.String value);
partial void OnAdminCommentChanged();

[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
[DataMemberAttribute()]
public global::System.Int32 ProductTemplateId
{
    get
    {
        return _ProductTemplateId;
    }
    set
    {
        OnProductTemplateIdChanging(value);
        ReportPropertyChanging("ProductTemplateId");
        _ProductTemplateId = StructuralObject.SetValidValue(value);
        ReportPropertyChanged("ProductTemplateId");
        OnProductTemplateIdChanged();
    }
}
private global::System.Int32 _ProductTemplateId;
partial void OnProductTemplateIdChanging(global::System.Int32 value);
partial void OnProductTemplateIdChanged();

[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
[DataMemberAttribute()]
public global::System.Boolean ShowOnHomePage
{
    get
    {
        return _ShowOnHomePage;
    }
    set
    {
        OnShowOnHomePageChanging(value);
        ReportPropertyChanging("ShowOnHomePage");
        _ShowOnHomePage = StructuralObject.SetValidValue(value);
        ReportPropertyChanged("ShowOnHomePage");
        OnShowOnHomePageChanged();
    }
}
private global::System.Boolean _ShowOnHomePage;
partial void OnShowOnHomePageChanging(global::System.Boolean value);
partial void OnShowOnHomePageChanged();

[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
[DataMemberAttribute()]
public global::System.String MetaKeywords
{
    get
    {
        return _MetaKeywords;
    }
    set
    {
        OnMetaKeywordsChanging(value);
        ReportPropertyChanging("MetaKeywords");
        _MetaKeywords = StructuralObject.SetValidValue(value, true);
        ReportPropertyChanged("MetaKeywords");
        OnMetaKeywordsChanged();
    }
}
private global::System.String _MetaKeywords;
partial void OnMetaKeywordsChanging(global::System.String value);
partial void OnMetaKeywordsChanged();

[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
[DataMemberAttribute()]
public global::System.String MetaDescription
{
    get
    {
        return _MetaDescription;
    }
    set
    {
        OnMetaDescriptionChanging(value);
        ReportPropertyChanging("MetaDescription");
        _MetaDescription = StructuralObject.SetValidValue(value, true);
        ReportPropertyChanged("MetaDescription");
        OnMetaDescriptionChanged();
    }
}
private global::System.String _MetaDescription;
partial void OnMetaDescriptionChanging(global::System.String value);
partial void OnMetaDescriptionChanged();

[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
[DataMemberAttribute()]
public global::System.String MetaTitle
{
    get
    {
        return _MetaTitle;
    }
    set
    {
        OnMetaTitleChanging(value);
        ReportPropertyChanging("MetaTitle");
        _MetaTitle = StructuralObject.SetValidValue(value, true);
        ReportPropertyChanged("MetaTitle");
        OnMetaTitleChanged();
    }
}
private global::System.String _MetaTitle;
partial void OnMetaTitleChanging(global::System.String value);
partial void OnMetaTitleChanged();

[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
[DataMemberAttribute()]
public global::System.String SeName
{
    get
    {
        return _SeName;
    }
    set
    {
        OnSeNameChanging(value);
        ReportPropertyChanging("SeName");
        _SeName = StructuralObject.SetValidValue(value, true);
        ReportPropertyChanged("SeName");
        OnSeNameChanged();
    }
}
private global::System.String _SeName;
partial void OnSeNameChanging(global::System.String value);
partial void OnSeNameChanged();

[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
[DataMemberAttribute()]
public global::System.Boolean AllowCustomerReviews
{
    get
    {
        return _AllowCustomerReviews;
    }
    set
    {
        OnAllowCustomerReviewsChanging(value);
        ReportPropertyChanging("AllowCustomerReviews");
        _AllowCustomerReviews = StructuralObject.SetValidValue(value);
        ReportPropertyChanged("AllowCustomerReviews");
        OnAllowCustomerReviewsChanged();
    }
}
private global::System.Boolean _AllowCustomerReviews;
partial void OnAllowCustomerReviewsChanging(global::System.Boolean value);
partial void OnAllowCustomerReviewsChanged();

[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
[DataMemberAttribute()]
public global::System.Int32 ApprovedRatingSum
{
    get
    {
        return _ApprovedRatingSum;
    }
    set
    {
        OnApprovedRatingSumChanging(value);
        ReportPropertyChanging("ApprovedRatingSum");
        _ApprovedRatingSum = StructuralObject.SetValidValue(value);
        ReportPropertyChanged("ApprovedRatingSum");
        OnApprovedRatingSumChanged();
    }
}
private global::System.Int32 _ApprovedRatingSum;
partial void OnApprovedRatingSumChanging(global::System.Int32 value);
partial void OnApprovedRatingSumChanged();

[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
[DataMemberAttribute()]
public global::System.Int32 NotApprovedRatingSum
{
    get
    {
        return _NotApprovedRatingSum;
    }
    set
    {
        OnNotApprovedRatingSumChanging(value);
        ReportPropertyChanging("NotApprovedRatingSum");
        _NotApprovedRatingSum = StructuralObject.SetValidValue(value);
        ReportPropertyChanged("NotApprovedRatingSum");
        OnNotApprovedRatingSumChanged();
    }
}
private global::System.Int32 _NotApprovedRatingSum;
partial void OnNotApprovedRatingSumChanging(global::System.Int32 value);
partial void OnNotApprovedRatingSumChanged();

[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
[DataMemberAttribute()]
public global::System.Int32 ApprovedTotalReviews
{
    get
    {
        return _ApprovedTotalReviews;
    }
    set
    {
        OnApprovedTotalReviewsChanging(value);
        ReportPropertyChanging("ApprovedTotalReviews");
        _ApprovedTotalReviews = StructuralObject.SetValidValue(value);
        ReportPropertyChanged("ApprovedTotalReviews");
        OnApprovedTotalReviewsChanged();
    }
}
private global::System.Int32 _ApprovedTotalReviews;
partial void OnApprovedTotalReviewsChanging(global::System.Int32 value);
partial void OnApprovedTotalReviewsChanged();

[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
[DataMemberAttribute()]
public global::System.Int32 NotApprovedTotalReviews
{
    get
    {
        return _NotApprovedTotalReviews;
    }
    set
    {
        OnNotApprovedTotalReviewsChanging(value);
        ReportPropertyChanging("NotApprovedTotalReviews");
        _NotApprovedTotalReviews = StructuralObject.SetValidValue(value);
        ReportPropertyChanged("NotApprovedTotalReviews");
        OnNotApprovedTotalReviewsChanged();
    }
}
private global::System.Int32 _NotApprovedTotalReviews;
partial void OnNotApprovedTotalReviewsChanging(global::System.Int32 value);
partial void OnNotApprovedTotalReviewsChanged();

[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
[DataMemberAttribute()]
public global::System.Boolean Published
{
    get
    {
        return _Published;
    }
    set
    {
        OnPublishedChanging(value);
        ReportPropertyChanging("Published");
        _Published = StructuralObject.SetValidValue(value);
        ReportPropertyChanged("Published");
        OnPublishedChanged();
    }
}
private global::System.Boolean _Published;
partial void OnPublishedChanging(global::System.Boolean value);
partial void OnPublishedChanged();

[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
[DataMemberAttribute()]
public global::System.Boolean Deleted
{
    get
    {
        return _Deleted;
    }
    set
    {
        OnDeletedChanging(value);
        ReportPropertyChanging("Deleted");
        _Deleted = StructuralObject.SetValidValue(value);
        ReportPropertyChanged("Deleted");
        OnDeletedChanged();
    }
}
private global::System.Boolean _Deleted;
partial void OnDeletedChanging(global::System.Boolean value);
partial void OnDeletedChanged();

[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
[DataMemberAttribute()]
public Nullable<global::System.DateTime> CreatedOnUtc
{
    get
    {
        return _CreatedOnUtc;
    }
    set
    {
        OnCreatedOnUtcChanging(value);
        ReportPropertyChanging("CreatedOnUtc");
        _CreatedOnUtc = StructuralObject.SetValidValue(value);
        ReportPropertyChanged("CreatedOnUtc");
        OnCreatedOnUtcChanged();
    }
}
private Nullable<global::System.DateTime> _CreatedOnUtc;
partial void OnCreatedOnUtcChanging(Nullable<global::System.DateTime> value);
partial void OnCreatedOnUtcChanged();

[EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
[DataMemberAttribute()]
public Nullable<global::System.DateTime> UpdatedOnUtc
{
    get
    {
        return _UpdatedOnUtc;
    }
    set
    {
        OnUpdatedOnUtcChanging(value);
        ReportPropertyChanging("UpdatedOnUtc");
        _UpdatedOnUtc = StructuralObject.SetValidValue(value);
        ReportPropertyChanged("UpdatedOnUtc");
        OnUpdatedOnUtcChanged();
    }
}
private Nullable<global::System.DateTime> _UpdatedOnUtc;
partial void OnUpdatedOnUtcChanging(Nullable<global::System.DateTime> value);
partial void OnUpdatedOnUtcChanged();

[XmlIgnoreAttribute()]
[SoapIgnoreAttribute()]
[DataMemberAttribute()]
[EdmRelationshipNavigationPropertyAttribute("eSalesModel", "ProductCategory_Product", "Product_Category_Mapping")]
public EntityCollection<Product_Category_Mapping> Product_Category_Mapping
{
    get
    {
        return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedCollection<Product_Category_Mapping>("eSalesModel.ProductCategory_Product", "Product_Category_Mapping");
    }
    set
    {
        if ((value != null))
        {
            ((IEntityWithRelationships)this).RelationshipManager.InitializeRelatedCollection<Product_Category_Mapping>("eSalesModel.ProductCategory_Product", "Product_Category_Mapping", value);
        }
    }
}

[XmlIgnoreAttribute()]
[SoapIgnoreAttribute()]
[DataMemberAttribute()]
[EdmRelationshipNavigationPropertyAttribute("eSalesModel", "ProductManufacturer_Product", "Product_Manufacturer_Mapping")]
public EntityCollection<Product_Manufacturer_Mapping> Product_Manufacturer_Mapping
{
    get
    {
        return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedCollection<Product_Manufacturer_Mapping>("eSalesModel.ProductManufacturer_Product", "Product_Manufacturer_Mapping");
    }
    set
    {
        if ((value != null))
        {
            ((IEntityWithRelationships)this).RelationshipManager.InitializeRelatedCollection<Product_Manufacturer_Mapping>("eSalesModel.ProductManufacturer_Product", "Product_Manufacturer_Mapping", value);
        }
    }
}

[XmlIgnoreAttribute()]
[SoapIgnoreAttribute()]
[DataMemberAttribute()]
[EdmRelationshipNavigationPropertyAttribute("eSalesModel", "ProductPicture_Product", "Product_Picture_Mapping")]
public EntityCollection<Product_Picture_Mapping> Product_Picture_Mapping
{
    get
    {
        return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedCollection<Product_Picture_Mapping>("eSalesModel.ProductPicture_Product", "Product_Picture_Mapping");
    }
    set
    {
        if ((value != null))
        {
            ((IEntityWithRelationships)this).RelationshipManager.InitializeRelatedCollection<Product_Picture_Mapping>("eSalesModel.ProductPicture_Product", "Product_Picture_Mapping", value);
        }
    }
}
[XmlIgnoreAttribute()]
[SoapIgnoreAttribute()]
[DataMemberAttribute()]
[EdmRelationshipNavigationPropertyAttribute("eSalesModel", "ProductReview_Product1", "ProductReview")]
public EntityCollection<ProductReview> ProductReviews
{
    get
    {
        return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedCollection<ProductReview>("eSalesModel.ProductReview_Product1", "ProductReview");
    }
    set
    {
        if ((value != null))
        {
            ((IEntityWithRelationships)this).RelationshipManager.InitializeRelatedCollection<ProductReview>("eSalesModel.ProductReview_Product1", "ProductReview", value);
        }
    }
}
[XmlIgnoreAttribute()]
[SoapIgnoreAttribute()]
[DataMemberAttribute()]
[EdmRelationshipNavigationPropertyAttribute("eSalesModel", "ProductSpecificationAttribute_Product", "Product_SpecificationAttribute_Mapping")]
public EntityCollection<Product_SpecificationAttribute_Mapping> Product_SpecificationAttribute_Mapping
{
    get
    {
        return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedCollection<Product_SpecificationAttribute_Mapping>("eSalesModel.ProductSpecificationAttribute_Product", "Product_SpecificationAttribute_Mapping");
    }
    set
    {
        if ((value != null))
        {
            ((IEntityWithRelationships)this).RelationshipManager.InitializeRelatedCollection<Product_SpecificationAttribute_Mapping>("eSalesModel.ProductSpecificationAttribute_Product", "Product_SpecificationAttribute_Mapping", value);
        }
    }
}
[XmlIgnoreAttribute()]
[SoapIgnoreAttribute()]
[DataMemberAttribute()]
[EdmRelationshipNavigationPropertyAttribute("eSalesModel", "ProductVariant_Product", "ProductVariant")]
public EntityCollection<ProductVariant> ProductVariants
{
    get
    {
        return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedCollection<ProductVariant>("eSalesModel.ProductVariant_Product", "ProductVariant");
    }
    set
    {
        if ((value != null))
        {
            ((IEntityWithRelationships)this).RelationshipManager.InitializeRelatedCollection<ProductVariant>("eSalesModel.ProductVariant_Product", "ProductVariant", value);
        }
    }
}
[XmlIgnoreAttribute()]
[SoapIgnoreAttribute()]
[DataMemberAttribute()]
[EdmRelationshipNavigationPropertyAttribute("eSalesModel", "Product_ProductTag_Mapping", "ProductTag")]
public EntityCollection<ProductTag> ProductTags
{
    get
    {
        return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedCollection<ProductTag>("eSalesModel.Product_ProductTag_Mapping", "ProductTag");
    }
    set
    {
        if ((value != null))
        {
            ((IEntityWithRelationships)this).RelationshipManager.InitializeRelatedCollection<ProductTag>("eSalesModel.Product_ProductTag_Mapping", "ProductTag", value);
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T03:06:25.007

是的，我知道发生了什么......基本上，我在事务中运行这一切，并且在产品之前导出其他实体（类别）。问题是我在添加所有类别后没有打电话`SaveChanges()`......所以出现的错误是关于类别表而不是产品表，但我只有`SaveChanges()`在我添加后才收到消息产品也是如此..非常令人困惑..我希望将来他们会通过说明错误来自哪个表来更清楚地说明..这将节省大量时间。

这是我的情况，你看不到为什么我没有立即发现问题所在：

```
using (var transactionScope = new TransactionScope(TransactionScopeOption.Required, TimeSpan.FromMinutes(30)))
            using (var piloDB = new PiloEntities())
            using (var eSalesDB = new ESalesEntities())
            {
                ExportCategories(piloDB, eSalesDB); //SaveChanges() not called in here
                ExportProducts(piloDB, eSalesDB); //SaveChanges() is called in here
                //export other... 
```

# azure-table-storage - Azure 存储表 UpdateObject - 请求输入之一无效

> ID：11856585
> 
> 赞同：0
> 
> 时间：2012-08-08T01:49:53.590
> 
> 标签：azure-table-storage

任何帮助，非常感谢。

我正在为 Azure 存储表使用 1.6 SDK。在 UpdateObject() 我收到以下错误：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<error xmlns="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">
  <code>InvalidInput</code>
  <message xml:lang="en-US">One of the request inputs is not valid.
RequestId:b78bc343-f93c-4ec7-8991-24386131de43
Time:2012-08-08T01:25:32.4366914Z</message>
</error> 
```

这是请求（来自 Fiddler）：

```
MERGE https://foo.table.core.windows.net/foo('87a23657-9206-4450-a7ca-09d599b41b9f') HTTP/1.1
User-Agent: Microsoft ADO.NET Data Services
DataServiceVersion: 1.0;NetFx
MaxDataServiceVersion: 2.0;NetFx
x-ms-version: 2011-08-18
x-ms-date: Wed, 08 Aug 2012 01:24:56 GMT
Authorization: SharedKeyLite <foo>
Accept: application/atom+xml,application/xml
Accept-Charset: UTF-8
Content-Type: application/atom+xml
If-Match: *
Host: foo.table.core.windows.net
Content-Length: 1047

<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<entry xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" xmlns="http://www.w3.org/2005/Atom">
  <title />
  <author>
    <name />
  </author>
  <updated>2012-08-08T01:24:56.9434703Z</updated>
  <id>https://foo.table.core.windows.net/foo('87a23657-9206-4450-a7ca-09d599b41b9f')</id>
  <content type="application/xml">
    <m:properties>
      <d:EmailAddress>foo</d:EmailAddress>
      <d:Enabled m:type="Edm.Boolean">false</d:Enabled>
      <d:Id>87a23657-9206-4450-a7ca-09d599b41b9f</d:Id>
      <d:LastSignIn m:null="true" />
      <d:Name>new</d:Name>
      <d:PIN>0000</d:PIN>
      <d:PartitionKey>sandbox</d:PartitionKey>
      <d:RowKey>87a23657-9206-4450-a7ca-09d599b41b9f</d:RowKey>
      <d:SignupDate m:null="true" />
      <d:Timestamp m:type="Edm.DateTime">0001-01-01T00:00:00</d:Timestamp>
    </m:properties>
  </content>
</entry> 
```

这是对 UpdateObject() 的调用：

```
Public Sub Update(existingItem As UserDataModel)
    _ServiceContext.AttachTo(UserDataServiceContext.UserTableName, existingItem, "*")
    _ServiceContext.UpdateObject(existingItem)
    _ServiceContext.SaveChanges()
End Sub 
```

下面是初始化服务上下文的代码：

```
Public Sub New()
    Try
        Dim storageAccount = CloudStorageAccount.FromConfigurationSetting("DataConnectionString")
        _ServiceContext = New UserDataServiceContext(storageAccount.TableEndpoint.ToString(), storageAccount.Credentials)
        _ServiceContext.IgnoreResourceNotFoundException = True
        ' Create the tables
        ' In this case, just a single table.  
        storageAccount.CreateCloudTableClient().CreateTableIfNotExist(UserDataServiceContext.UserTableName)
    Catch ex As Exception
        Debug.WriteLine("Problem with New() UserDataSource. Error: " & ex.Message)
    End Try
End Sub 
```

如果还有什么我可以提供的，请告诉我...

干杯，

托马斯

编辑 1：这是 Fiddler 中成功插入的样子：

```
POST https://foo.table.core.windows.net/<tablename> HTTP/1.1
User-Agent: Microsoft ADO.NET Data Services
DataServiceVersion: 1.0;NetFx
MaxDataServiceVersion: 2.0;NetFx
x-ms-version: 2011-08-18
x-ms-date: Wed, 08 Aug 2012 15:41:36 GMT
Authorization: SharedKeyLite <key>
Accept: application/atom+xml,application/xml
Accept-Charset: UTF-8
Content-Type: application/atom+xml
Host: <tablename>.table.core.windows.net
Content-Length: 990

<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<entry xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" xmlns="http://www.w3.org/2005/Atom">
  <title />
  <author>
    <name />
  </author>
  <updated>2012-08-08T15:41:36.3923506Z</updated>
  <id />
  <content type="application/xml">
    <m:properties>
      <d:EmailAddress>foo@gmail.com</d:EmailAddress>
      <d:Enabled m:type="Edm.Boolean">false</d:Enabled>
      <d:Id>74cdf74d-4eea-40b8-93c4-a7f8bc01c387</d:Id>
      <d:LastSignIn>634800372963013454</d:LastSignIn>
      <d:Name>(test)</d:Name>
      <d:PIN>0000</d:PIN>
      <d:PartitionKey>sandbox</d:PartitionKey>
      <d:RowKey>74cdf74d-4eea-40b8-93c4-a7f8bc01c387</d:RowKey>
      <d:SignupDate>634800372963013454</d:SignupDate>
      <d:Timestamp m:type="Edm.DateTime">0001-01-01T00:00:00</d:Timestamp>
    </m:properties>
  </content>
</entry> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T04:37:02.520

The URL looks wrong, but I'm not sure how it got that way... it should normally be something like `https://<account>.table.core.windows.net/<table>(PartitionKey='<pkey>',RowKey='<rkey>')`. But I have no explanation for why yours doesn't look right. (The code looks fairly straightforward.)

Are you able to perform other operations, like an insert? Do the URLs look right in Fiddler when you do that?

# c# - 在页面加载 RadButton Onclientclicked 触发

> ID：11856587
> 
> 赞同：3
> 
> 时间：2012-08-08T01:50:11.700
> 
> 标签：c#, asp.net, telerik

当我使用 Telerik radbutton

```
<telerik:RadButton ID="RadButton1" runat="server" Text="Stackoverflow" 
Skin="Default" OnClientClicked="SaveIt()" CommandArgument="Edit">
</telerik:RadButton> 
```

刷新页面后，总是 SaveIt() 函数开始工作。但; 当我使用按钮时，它仅在用户单击它时才起作用。

```
<button type="button" onclick="SaveIt()">Stackoverflow</button> 
```

它们之间有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T06:35:27.063

这里有几件事。RadButton 和普通 HTML 按钮的区别如下：

使用 RadButton 时，生成的客户端 HTML 如下：

```
<a id="btnStandard" class="RadButton RadButton_Office2010Silver rbSkinnedButton"
  href="javascript:void(0)">
    <input class="rbDecorated" type="submit" name="btnStandard_input" 
      id="btnStandard_input" value="Standard Button" />
    <input id="btnStandard_ClientState" name="btnStandard_ClientState"
      type="hidden" />
</a> 
```

如您所见，生成的类型是“提交” - 这意味着它将提交表单到服务器。因此，如果您刷新它将尝试再次重新发送表单。我不明白的是 - 你用过 ajax 面板吗？因为如果您使用过 ajax 面板，单击按钮会触发 ajax 发布到服务器，当您刷新页面时，它就像是第一次而不是回发一样。

普通的 html 不适用于表单提交。它只是用来触发客户端的点击事件。

话虽如此 - OnClientChecked 的签名如下：

```
OnClientChecked="<js function name>" 
```

注意：您应该只提供不带括号的函数名称，即 ( 和 )。

在您的情况下，因为您提供了括号 - 当按钮被初始化时，与其关联的客户端函数正在执行，并且您的 Javascript 代码在运行时运行。

所以这是正确的代码：

```
<telerik:RadButton runat="server" Text="test" OnClientClicked="func" />

<script>
    function func() {
        alert("clicked");
    }
</script> 
```

希望这能回答你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T05:23:40.587

RadButton 没有 onClick 方法而不是 OnClientClicked 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T18:59:44.257

实际上，我也遇到过这种行为。刷新页面确实意味着回发作为发布此声明的所谓答案的人。为 onclientclicked 事件指定的 js 函数在页面加载时触发。我注意到答案只是简单地重新陈述了显而易见的内容以及原始发布者发布的代码不起作用并声称它可以在没有解决加载时触发函数的问题的情况下简单地假设“刷新”相当于回发。

我只是想我会提出有效的分析，并简单地指出，如果有人发布了某些内容并且他们的朋友将其作为答案进行宣传，这并不意味着它是正确的。

# html - 如何让 CSS 菜单保持在顶部

> ID：11856591
> 
> 赞同：0
> 
> 时间：2012-08-08T01:51:16.193
> 
> 标签：html, css

我修改了一些我发现的现有 CSS 代码来开发菜单。一切正常，除非我点击下拉菜单。如果页面上有另一个 HTML 组件，则菜单会留在组件后面而不是位于顶部（我希望我的描述有意义）。

这是CSS：

```
#navMenu{
    /*font-family: 'Tenor sans', Calibri, Times, Times, serif;*/
    margin-left:2px;
    /*width: 944px;*/
    width:100%;
    font-weight:normal;
    font-size:15px;
}

#navMenu ul{
    margin:0;
    padding:0;
    line-height:30px;
}

#navMenu li {
    margin:0;
    padding:0;
    /*removes the bullet point*/
    list-style:none;
    float:left;
    position:relative;
    background-color:  #F9F9F9;
}

/*for top level */
#navMenu ul li a{
    text-align:center;
    font-weight:bold;
    font-size:0.8em;
    line-height:height;
    font-family:Arial,Helvetica,sans-serif;
    text-decoration:none; /*remove underline*/

    margin:-1px;
    /*height width for all links*/
    height:30px;
    width:150px;
    display:block;
    /*border-bottom: 1px solid #ccc;*/
    color: #00611C;
}

/* hiding inner ul*/
#navMenu ul ul{
    position:absolute;
    visibility:hidden;
    /*must match height of ul li a*/
    top:28px;
}

/*selecting top menu to display the submenu*/
#navMenu ul li:hover ul{
    visibility:visible;
}

#navMenu li:hover {
    /*background-color: #F9F9F9;*/
    background-color: #DBDB70;  
    border-radius: 5px;
}

#navMenu ul li:hover ul li a:hover{    
   /* color: E2144A;*/
   color:#E2144A;
}
#navMenu ul li a:hover{
    /*color: E2144A;*/
    color:#E2144A;
} 
```

有人能告诉我缺少什么以使下拉菜单保持在顶部吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T01:55:33.033

使用`z-index`.

```
#navMenu{
    /*font-family: 'Tenor sans', Calibri, Times, Times, serif;*/
    margin-left:2px;
    /*width: 944px;*/
    width:100%;
    font-weight:normal;
    font-size:15px;
    z-index:1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T01:55:35.413

使用 HTML 代码（而不仅仅是 CSS）来解决此问题会很有用。但是仅使用您发布的 CSS，请考虑在从您想要的方式向后分层的元素上设置 z-index。

[http://coding.smashingmagazine.com/2009/09/15/the-z-index-css-property-a-comprehensive-look/](http://coding.smashingmagazine.com/2009/09/15/the-z-index-css-property-a-comprehensive-look/)

[https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index?redirectlocale=en-US&redirectslug=Understanding_CSS_z-index](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index?redirectlocale=en-US&redirectslug=Understanding_CSS_z-index)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T01:57:00.163

试着给你的菜单一个 z-index: 1; （或更高）。您还可以降低覆盖菜单的任何内容的 z-index。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T01:59:39.293

您需要将包装菜单的父项设置在适当的位置：相对，这可能是一个主体，也可能是一个外包装。然后您可以使用绝对位置将其始终放在顶部并指定一些 z-index：

有关更多信息：请参阅此处的 z-index 属性信息： [https ://bytutorial.com/tutorials/css/css-z-index](https://bytutorial.com/tutorials/css/css-z-index)

# mysql - 如果从数据库中删除了某些行，如何更改模型字段？django

> ID：11856595
> 
> 赞同：0
> 
> 时间：2012-08-08T01:51:47.710
> 
> 标签：mysql, sql, django, django-models

我想检查行是否被删除，而不是为具有相同“名称”的其余行更新一个字段

添加新行时，我编写了一种方法来更新具有相同“名称”的所有行的字段，但无法为此提出解决方案

例如：

```
mysql> SELECT * FROM school_subjects;
  +----+-------------+---------+------------+---------------------+------------------+
    | id | name        | user_id | created_by | created_time        | num_of_followers |
    +----+-------------+---------+------------+---------------------+------------------+
    |  1 | Math 140    |       1 |            | 2012-08-06 20:21:38 |                5 |
    |  2 | Math 140    |       2 |            | 2012-08-06 20:22:15 |                5 |
    |  6 | Math 140    |       3 |            | 2012-08-07 20:05:48 |                5 |
    |  4 | Math 140    |       7 |            | 2012-08-07 18:58:14 |                5 |
    |  5 | lalala      |       7 |            | 2012-08-07 18:58:20 |                1 |
    |  7 | Math 140    |       8 |            | 2012-08-07 20:08:03 |                5 |
     ...................................... 
```

现在，如果我删除一行，我希望更改 num_of_followers 的结果：

```
+----+-------------+---------+------------+---------------------+------------------+
| id | name        | user_id | created_by | created_time        | num_of_followers |
+----+-------------+---------+------------+---------------------+------------------+
|  1 | Math 140    |       1 |            | 2012-08-06 20:21:38 |                4 |
 ------------------------------DELETED---------------------------------------------
|  6 | Math 140    |       3 |            | 2012-08-07 20:05:48 |                4 |
|  4 | Math 140    |       7 |            | 2012-08-07 18:58:14 |                4 |
|  5 | lalala      |       7 |            | 2012-08-07 18:58:20 |                1 |
|  7 | Math 140    |       8 |            | 2012-08-07 20:08:03 |                4 |
 ......................................

#models.py
class Subjects(models.Model):
    """ Subject Database """
    name = models.CharField(max_length=64, unique=False) #Subject Names on left-menu 
    user = models.ForeignKey(User, unique=False)
    created_by = models.CharField(max_length=64, unique=False)
    created_time = models.DateTimeField(editable=False)
  #  updated_time = models.ForeignKey()
    num_of_followers = models.IntegerField()
  #  num_of_documents = models.IntegerField()

    def __unicode__(self):
        return '%s %s' %(self.name, self.user.username)

    def update_followers(self):
        number = Subjects.objects.filter(name = self.name).count()+1
        Subjects.objects.filter(name= self.name).update(num_of_followers=number)
        return number

    def save(self, *args, **kwargs):
        self.num_of_followers = Subjects.update_followers(self)
        if not self.id:
            self.created_time = datetime.now()
        self.updated_time= datetime.now()
        super(Subjects, self).save(*args, **kwargs) 
```

# php - 计算每个文档中的逆文档频率 (idf)

> ID：11856599
> 
> 赞同：1
> 
> 时间：2012-08-08T01:52:16.910
> 
> 标签：php

我想计算 idf，公式是`IDF=log(D/df)`总`D`数据，`df`是包含搜索词的许多数据。从表中：1。`tb_stemming`

```
 ===========================================================================
 |stem_id | stem_before | stem_after | stem_freq | sentence_id |document_id|
 ===========================================================================
 |    1   |    Data     |    Data    |     1      |      0     |     1     |
 |    2   |   Discuss   |   Discuss  |     1      |      1     |     1     |
 |    3   |   Mining    |    Min     |     1      |      0     |     2     |
 =========================================================================== 
```

这是代码：

```
countIDF($total_sentence,$doc_id); 
```

那`$total_sentence`就是 `Array ( [0] => 644 [1] => 79 [2] => 264 [3] => 441 [4] => 502 [5] => 18 [6] => 352 [7] => 219 [8] => 219 )`

```
function countIDF($total_sentence, $doc_id) {
    foreach ($total_sentence as $doc_id => $total_sentences){
       $idf = 0;
       $query1 = mysql_query("SELECT document_id, DISTINCT(stem_after) AS unique_token FROM tb_stemming group by stem_after where document_id='$doc_id'  ' ");
       while ($row = mysql_fetch_array($query)) {
           $token  = $row['unique_token'];
           $doc_id = $row['document_id'];
           $ndw    = countNDW($token);

           $idf = log($total_sentences / $ndw)+1;
           $q   = mysql_query("INSERT INTO tb_idf VALUES ('','$doc_id','$token','$ndw','$idf') ");
        }
     }
} 
```

countNDW 的功能是：

```
function countNDW ($word) {
    $query = mysql_query("SELECT stem_after, COUNT( DISTINCT sentence_id ) AS ndw FROM `tb_stemming` WHERE stem_after = '$word' GROUP BY stem_after");
    while ($row = mysql_fetch_array($query)) {
        $ndw = $row['ndw'];
    }
    return $ndw;
} 
```

它不能很好地工作，尤其是在从数据库调用时。我需要的只是计算每个`document_id`. 如何在我的代码中定义它？请帮帮我..非常感谢你:)

# mysql - 如何使用 MySQL 列出所有重复值？

> ID：11856601
> 
> 赞同：0
> 
> 时间：2012-08-08T01:52:53.003
> 
> 标签：mysql

我有一个包含以下字段的表：

```
 id | domainname | domain_certificate_no | keyvalue 
```

select 语句的输出示例如下：

```
 id    |  domainname               |  domain_certificate_no      |  keyvalue
 ===============================================================================
'57092', '02a1fae.netsolstores.com', '02a1fae.netsolstores.com_1', '55525772666'
'57093', '02a1fae.netsolstores.com', '02a1fae.netsolstores.com_2', '22225554186'
'57094', '02a1fae.netsolstores.com', '02a1fae.netsolstores.com_3', '22444356259'
'97168', '02aa6aa.netsolstores.com', '02aa6aa.netsolstores.com_1', '55525772666'
'97169', '02aa6aa.netsolstores.com', '02aa6aa.netsolstores.com_2', '22225554186'
'97170', '02aa6aa.netsolstores.com', '02aa6aa.netsolstores.com_3', '22444356259’ 
```

该领域`domain_certificate_no`是独一无二的。我曾经`group by`找到重复的`keyvalue`，但我真正需要的不仅是出现了多少次，`keyvalue`而且我需要将重复的值与每个记录中的其他字段一一列出该值出现。我无法做到的事情`group by`。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:56:32.480

其他人的答案的另一种选择是`INNER JOIN`来自派生查询。

```
SELECT  a.*
FROM    myTable a
            INNER JOIN
            (
                SELECT keyValue
                FROM myTable
                GROUP BY keyValue
                HAVING COUNT(keyValue) > 1
            ) b 
                ON a.keyValue = b.keyValue 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T01:57:30.070

未经测试，但我认为这会在我的脑海中起作用

```
SELECT * FROM table 
    WHERE keyvalue IN (
      SELECT keyvalue FROM table GROUP BY keyvalue HAVING COUNT(*) > 1
    ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T02:00:07.403

没有测试代码，但它应该可以帮助你更多;）

```
select group_concat(id) as all_id, group_concat(domainname) as all_domains, group_concat(domain_certificate_no) as all_certificats , keyvalue, count(keyvalue) from table x
group by keyvalue
order by count(keyvalue) 
```

# javascript - 用javascript聚焦输入字段？

> ID：11856602
> 
> 赞同：1
> 
> 时间：2012-08-08T01:53:00.403
> 
> 标签：javascript, jquery, html

在我想到之前，我已经看过几次了，但没有想到任何明确的例子。

我想要做的是使用 javascript 来切换当前选择的表单域。例如，我有一个用于输入出生日期的表单域和一个用于电子邮件的表单域。验证出生日期后，光标将自动切换到电子邮件输入字段。

我将使用 jQuery 的`change()`事件绑定器来监视字段更改并在本地验证，然后继续执行，我只是不确定如何选择表单字段。

我可能是错的，这可能是不可能的，但如果是这样，任何帮助将不胜感激，因为我还没有使用我认为最合适的搜索查询找到任何东西。

谢谢 ：）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T01:54:17.050

您可以触发`focus`事件。

```
$("#email").focus(); 
```

但是您可能会发现，`change`在输入字段失去焦点之前，该事件实际上不会触发，因此您可能需要改为监听`keyup`/`paste`事件

[阅读更多关于`.focus()`](http://api.jquery.com/focus)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T01:54:32.020

您正在寻找 .focus() 函数。它将给定元素设置为选中（聚焦）。

# php - 基于数据库设计是否可以预测要在应用程序中使用的查询？

> ID：11856603
> 
> 赞同：3
> 
> 时间：2012-08-08T01:53:03.117
> 
> 标签：php, mysql, database-design, rdbms

假设我有这个 mysql 数据库，数据库中的所有表都相互关联，主键、外键等都已设置。现在是否有可能仅从数据库设计中预测应用程序将使用哪些查询？由于数据库确实决定了应用程序的功能，因此从设计中，我们可以预测将在应用程序中使用哪些查询，对吗？

如果可能，是否有策略或自动方式来生成可能的查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T02:09:36.730

我写了一本关于使用 SQL 和 Excel 分析数据的书，并且花了很多年的时间与数据库打交道。

是的，从数据库结构中，您可以弄清楚表将如何连接在一起。您不会想出用户需要的更难（通常更与业务相关）的东西。这里有些例子：

您可以拥有一个数据库，其中主表是电话呼叫以及相关信息。从这个数据库中，您可能需要知道一次活动呼叫的最大数量。或者，您可能需要知道某人在一个月内呼叫了多少不同的人。

您可以拥有一个订户记录数据库。您可能需要计算出某人在给定时间后停止的概率。

您可以拥有一个产品和购买数据库。您可能需要找出同时出现的三种产品的最常见组合。

您可以拥有一个信用卡购买数据库。您可能需要弄清楚谁在距离账单地址 50 英里以外的餐厅消费超过 200 美元。

重点是。数据库不代表“应用程序能力”。数据库代表实体和它们之间的关系，大概是在现实世界中。认为您可以查看数据库并知道业务问题是什么，这是一种狂妄自大的想法。

相反，数据库的目的是支持数据，而数据又支持应用程序。应用程序的需求会随着时间而改变。与许多其他数据存储技术相比，数据库的美妙之处在于该技术随着数据的增加而扩展，支持对结构的更改，并允许将新的实体和关系添加到系统中，而无需完全重写。

随着时间的推移，随着经验的积累，你可能会对重要的事情产生直觉。即使你这样做了，你也会不断地对用户的不同需求感到惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T02:00:48.620

我真诚地不想在这里变得聪明，但答案是 - 是和不是。

是的，因为[3NF](http://en.wikipedia.org/wiki/Third_normal_form)设计通常很好地概述了其背后的业务规则，因此您可以在一定程度上了解其背后的业务逻辑是什么，您可以从中创建对象或图形模型并很好地了解可以提出哪些类型的问题根据连接/关系和可访问属性询问。

不，因为组合起来，您可能会从图表中获得难以处理的问题组合。因此，您无法真正说出一个人在合理的、非指数的时间内可能会问什么问题。

一般来说，如果设计很好并且表的命名很有意义，那么您可以很好地了解发生了什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T02:07:19.800

理论上这是可能的，但由于 N 行 X 列 Z 表 W 可能函数 Q 每列/行上的可能值的组合爆炸，这是一个惊人的大数字。

这里的问题是您还需要考虑数据。某些查询仅在有特定数据时才有意义，而其他查询则没有。所以你本质上是在考虑大型超立方体。

我使用多维数据库（非规范化多维数据集），这本质上是非规范化数据库。阅读一下 OLAP 理论，您就会明白为什么。

所以简而言之，不，因为它**实际上是不可能**的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T10:24:00.980

> 现在是否有可能仅从数据库设计中预测应用程序将使用哪些查询？

至少在原则上，您可以预测哪些查询**可以**得到有效回答。应用程序实际尝试执行哪些查询是另一回事。

在理想的世界中，数据库模型将考虑所有应用程序的所有查询需求，现在和将来。我们还没有生活在那个世界里；）

> 如果可能，是否有策略或自动方式来生成可能的查询？

不，这需要人类理解模型的实际含义。不幸的是，没有好的方法可以教一个工具具有这种理解水平。

*对于在数据库建模和*建模领域有经验的人来说，一个好的模型会立即变得有意义。这样的人通常能够预测实际使用的查询的相当一部分，但很少是全部，因此数据库模型本身旁边的文档是可取的。当然，并不是所有的模型都很好……

# php - 从数据库中直接输出 html

> ID：11856615
> 
> 赞同：1
> 
> 时间：2012-08-08T01:54:46.180
> 
> 标签：php, html, mysql, html-encode

我在数据库中格式化了 HTML 标签（`<`成为`&lt;`等）。

我遇到的问题是 HTML 标签是按字面输出的；而不是`<b>Text</b>`使文本加粗，而是显示为`&lt;b&gt;`

有人知道这是为什么吗？或者请问如何解决？

网站上的输出： ![网站](../Images/7565fb45155d0042a32a9a5da3e9428b.png)

数据库中的 HTML 代码： ![数据库中数据的部分图像。](../Images/afee6d9dbe5a42551c55f11ef2588ea2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T01:57:08.800

采用[`html_entity_decode()`](http://us3.php.net/manual/en/function.htmlentities.php)

```
echo html_entity_decode("&lt;b&gt;"); // <b> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T04:54:26.970

我认为您打算在将 HTML 存储在数据库中时`<`用等替换所有内容。`&lt;`但我发现在你的数据库中，`<script ...`标签看起来像`&amp;lt;script ...`. 尝试用类似的东西替换它`&lt;script ...`。还要确保设置了正确的 MIME 类型。对于 HTML 页面，使用：

```
header('Content-type: text/html'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T06:26:48.110

与其进行解码，不如确保您没有对它进行双重编码。如果您在数据库中对数据进行了编码，然后在打印出来时再次对其进行编码，则应将其呈现为 < 等。

# c# - 令人困惑的 NullReferenceException

> ID：11856626
> 
> 赞同：0
> 
> 时间：2012-08-08T01:55:45.947
> 
> 标签：c#, .net, wpf, nullreferenceexception

我创建了两个组合框，一个用于最小值，一个用于最大值。我的代码应确保用户不会使用此代码选择大于最大值的最小值或小于最小值的最大值。

```
private void MaxRating_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            switch (MaxRating.SelectedIndex)
            {
                case 0:
                    if (MinRating.SelectedIndex > 0)
                        MinRating.SelectedIndex = 0;
                    break;
                case 1:
                    if (MinRating.SelectedIndex > 1)
                        MinRating.SelectedIndex = 1;
                    break;
                case 2:
                    if (MinRating.SelectedIndex > 2)
                        MinRating.SelectedIndex = 2;
                    break;
                case 3:
                    if (MinRating.SelectedIndex > 3)
                        MinRating.SelectedIndex = 3;
                    break;
                case 4:
                    if (MinRating.SelectedIndex > 4)
                        MinRating.SelectedIndex = 4;
                    break;
            }
        } 
```

但是，在显示“if (MinRating.SelectedIndex > 0)”的行进行调试时，我得到“NullReferenceException 未被用户代码处理”。

我不知道为什么，我也有 MinRating_SelectionChanged 的​​功能，我似乎没有得到类似的东西。

如果我从这个函数中删除 case:0 ，似乎没有错误。也不是来自其他功能。我也尝试用 == 替换 > 但它似乎只是做同样的事情。任何帮助都会受到赞赏，因为我只是感到困惑。

编辑：如果我只放置这两行

```
int minrating = MinRating.SelectedIndex;
int maxrating = MaxRating.SelectedIndex; 
```

它在第二行给出错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:18:29.353

你不能就这么说吗？

```
if (MinRating.SelectedIndex > MaxRating.SelectedIndex)
{
    MinRating.SelectedIndex = MaxRating.SelectedIndex;
} 
```

然后你不要尝试读取尚未设置的值。它也短了很多。

在侧节点上：您不应使用 SelectedIndex 属性。使用对象的值而不是它们在集合中的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T02:58:51.880

如果仔细分析，您会发现即使在控件初始化期间也可能调用此方法，其中`MaxRating`刚刚构造但`MinRating`尚未构造。你不能假设它们都是在调用此方法时构造的。

您可以在此方法开始时检查它们是否为 null 作为解决方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T02:02:07.613

我对 C# 的经验不是很丰富，但是当 MaxRating.SelectedIndex 为 null 时，可能会执行 case 0（0 相当于 null），因此它正在输入带有 null MaxRating.SelectedIndex 的 case。

# java - 一键调用 MenuItem

> ID：11856628
> 
> 赞同：1
> 
> 时间：2012-08-08T01:55:48.500
> 
> 标签：java, swing, keystroke, jmenu, jmenuitem

我们知道我们可以在 setaccelerator() 方法的帮助下调用菜单项，其中需要两次击键的组合。如果我只想通过一个按键来调用菜单项怎么办...这是我遇到一点问题的地方

```
menuitem=new JMenuItem("Delete");
menuitem.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_DELETE);        
menu.add(menuitem); 
```

请帮忙....！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T01:59:15.690

查看[如何使用菜单](http://docs.oracle.com/javase/tutorial/uiswing/components/menu.html)了解详细信息。下面是一个使用`Action`, 定义加速器的例子。您还可以在菜单项上设置加速键，即：`item.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_DELETE, 0));`.

```
import java.awt.Component;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;

import javax.swing.*;

public class MenuDemo {

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                final JFrame frame = new JFrame("Demo");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                JMenuBar menuBar = new JMenuBar();
                JMenu menu = new JMenu("Menu");
                menuBar.add(menu);

                JMenuItem item = new JMenuItem(new TestAction(frame));

                menu.add(item);

                frame.setJMenuBar(menuBar);

                frame.setSize(new Dimension(300, 300));
                frame.setLocationByPlatform(true);
                frame.setVisible(true);
            }
        });
    }

    static class TestAction extends AbstractAction {
        private Component parent;

        public TestAction(Component parent) {
            super("Test");
            this.parent = parent;
            putValue(Action.ACCELERATOR_KEY,
                    KeyStroke.getKeyStroke(KeyEvent.VK_DELETE, 0));
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            JOptionPane.showMessageDialog(parent, "Test");
        }
    }
} 
```

# git - 在多个存储库上运行 git gc

> ID：11856632
> 
> 赞同：16
> 
> 时间：2012-08-08T01:56:48.483
> 
> 标签：git, bash

我有一个 git 存储库根目录`/git`

有不同深度的路径，例如：

```
/git/project/project1/module1.git
/git/project/project1/module2.git
/git/project/project2/dev/module1.git
/git/library/libgit2.git
/git/library/jquery/jquery.git 
```

如何`git gc`在里面的所有 repos 中递归运行`/git`？

我更喜欢使用 shell 脚本来遍历存储库：如果该目录不是有效的 git 存储库，请不要运行`git gc`.

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-08T02:32:41.853

您可以尝试以下方法：

```
find /git -name '*.git' -execdir sh -c 'cd {} && git gc' \; 
```

`*.git`这将在 下找到每个匹配的目录`/git`，`cd`进入它，然后运行`git gc`​​.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:28:02.063

在某些系统（即 OSX）上，`for`循环将空格视为分隔符，破坏包含空格的目录名称。设置`IFS`为仅使用换行符`\n`以使其正常工作，并在完成后重置为默认值：

```
oldIFS=$IFS; IFS=$'\n'; for line in $(find /git -name '*.git'); do (echo $line; cd $line; git gc); done; IFS=$oldIFS 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T03:50:36.357

由于`find`来自 msysgit 的（4.1 版）太旧，`-execdir`因此不支持该选项。

我们必须编写一个 for 循环。

```
for line in $(find /git -name '*.git'); do (cd $line && git gc); done 
```

# jquery - jQuery - 如何在不重新加载的情况下更改 url？

> ID：11856633
> 
> 赞同：2
> 
> 时间：2012-08-08T01:56:48.007
> 
> 标签：jquery

> **可能重复：**
> [修改 URL 而不重新加载页面](https://stackoverflow.com/questions/824349/modify-the-url-without-reloading-the-page)

jQuery 有没有办法在不重新加载的情况下更改 url？

尝试更改`window.location`，每次更改时，它都会自动重新加载页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:01:47.230

您可以在不重新加载的情况下更改的唯一部分网址是在哈希之后，`#`. 在此之前对 url 的任何更改都将被视为不同的页面，并将触发重新加载。

# c++ - 从封闭的模板类推导出返回类型时，函数解析失败

> ID：11856637
> 
> 赞同：3
> 
> 时间：2012-08-08T01:57:06.167
> 
> 标签：c++, function, templates, overloading, sfinae

我一直在尝试为定点类型实现一个复数类，其中乘法运算的结果类型将是输入类型的函数。我需要具有可以将复数乘以复数以及复数乘以实数的功能。

这本质上是代码的简化版本。其中 A 是我的复杂类型。

```
template<typename T1, typename T2> struct rt {};

template<> struct rt<double, double> { 
    typedef double type;
};
//forward declaration
template<typename T> struct A;

template<typename T1, typename T2>
struct a_rt {
    typedef A<typename rt<T1,T2>::type> type;
};

template <typename T>
struct A {
    template<typename T2>
    typename a_rt<T,T2>::type operator*(const T2& val) const {
        typename a_rt<T,T2>::type ret;
        cout << "T2& called" << endl;
        return ret;
    }
    template<typename T2>
    typename a_rt<T,T2>::type operator*(const A<T2>& val) const {
        typename a_rt<T,T2>::type ret;
        cout << "A<T2>& called" << endl;
        return ret;
    }
};

TEST(TmplClassFnOverload, Test) {
    A<double> a;
    A<double> b;
    double c;
    a * b;
    a * c;
} 
```

代码无法编译，因为编译器试图用and实例化`a_rt`模板。我不知道幕后发生了什么，因为我想编译器应该选择更专业的，所以只会作为参数实例化。`double``A<double>``operator*(A<double>&)``a_rt``<double, double>`

请您向我解释为什么这不起作用？如果这是一个限制，我应该如何解决这个问题。

谢谢一吨！

```
unittest.cpp: In instantiation of 'a_rt<double, A<double> >':
unittest.cpp:198:   instantiated from here 
unittest.cpp:174: error: no type named 'type' in 'struct rt<double, A<double> >' 
```

**更新**

编译器似乎对以下更改感到满意。我在这里缺少一些微妙之处。感谢能够引导我了解编译器在这两种情况下所做的事情的人。

```
 template<typename T2>
    A<typename rt<T,T2>::type> operator*(const T2& val) const {
        A<typename rt<T,T2>::type> ret;
        cout << "T2& called" << endl;
        return ret;
    }
    template<typename T2>
    A<typename rt<T,T2>::type> operator*(const A<T2>& val) const {
        A<typename rt<T,T2>::type> ret;
        cout << "A<T2>& called" << endl;
        return ret;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T06:53:41.990

在 C++ 中解析函数调用分为五个阶段：

1.  **名称查找**：这会找到两个版本 `operator*`
2.  **模板参数推导**：这将应用于步骤 1 中找到的所有函数）
3.  **重载决议**：将选择最佳匹配
4.  **访问控制**：实际上是否可以调用最佳匹配（即它不是私有成员）
5.  **virtuality**：如果涉及虚函数，可能需要在 vtable 中查找

首先请注意，永远不会推断出返回类型。您根本**无法重载返回类型**。模板参数`operator*`被推导出来，然后**替换**到返回类型模板中。

那么通话中会发生什么`a * b;`？首先，***这两个***版本`operator*`都推导出了它们的论点。对于第一个重载，`T2`推断为存在`A<double>`，而对于第二个重载，则`T2`解析为`double`。如果有多个重载，标准说：

> **14.7.1 隐式实例化 [temp.inst] 第 9 条**
> 
> 如果以涉及重载解析的方式使用函数模板或成员函数模板特化，则将隐式实例化特化的声明 (14.8.3)。

因此，在生成候选函数集时，在参数推导结束时（因此在重载决议之前）模板被实例化，并且由于`rt`没有嵌套的`type`. 这就是为什么不会选择更专业的第二个模板的原因：重载决议不会发生。您可能已经预料到这种替换失败不会是错误。然而，标准说：

> **14.8.2 模板参数推导[temp.deduct]第8条**
> 
> 如果替换导致无效的类型或表达式，则类型推导失败。无效类型或表达式是如果使用替换参数编写的格式错误的类型或表达式。只有函数类型及其模板参数类型的直接上下文中的无效类型和表达式会导致推导失败。[注意：替换类型和表达式的求值可能会导致副作用，例如类模板特化和/或函数模板特化的实例化，隐式定义函数的生成等。这些副作用不在“立即上下文”，并可能导致程序格式错误。——尾注]

在您的原始代码中，`typename a_rt<T,T2>::type`返回类型不是**直接上下文**。只有在模板实例化期间才会对其进行评估，然后缺少嵌套`type`是`rt`一个错误。

在您更新的代码`A<typename rt<T,T2>::type>`中，返回类型是即时上下文，并且适用**替换失败不是错误**（SFINAE）：简单地从重载解决方案集中删除非推导函数模板，并调用剩余的函数模板。

使用您更新的代码，输出将是：

```
> A<T2>& called     
> T2& called 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T05:10:56.710

您的前向声明使用**class**：

```
template<typename T> class A; 
```

但是您的定义使用**struct**：

```
template <typename T>
struct A { 
```

除此之外，我看不到任何问题...

# java - Java 线程 - 需要注意的事项？

> ID：11856643
> 
> 赞同：0
> 
> 时间：2012-08-08T01:57:54.330
> 
> 标签：java, android, thread-safety

在我的应用程序中，我有`MainThread`并且我有`SeperateThread`

我的线程工作几乎完美。唯一的问题是我无法关闭`SeperateThread`。

```
public void run()
{
    isRunning = true;
    while(isRunning)
    {
        Log.d(TAG, "Running...");
        long currentTime = SystemClock.uptimeMillis();
    }
}

public void StopThread()
{
    isRunning = false;
}

seperateThread.StopThread(); 
```

然后在线程中我有一个方法可以`volatile boolean isRunning`关闭。即使我在调试器中单步执行，注意到线程将布尔值切换为关闭。

*   什么会导致这种类型的问题？
*   这是关闭线程的最干净的方法吗？
*   关闭线程的任何其他步骤？
*   他们在 Android 多线程方面有什么挫折吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:39:56.230

您肯定希望为此使用新的并发包，并获取[Java Concurrency in Practice](https://rads.stackoverflow.com/amzn/click/com/0321349601)的副本，并了解有关此的更多信息。线程看似简单。

为什么您的代码无法正常工作可能与您没有按照预期的方式将 isRunning 设置为 false 有关。但是，java.util.concurrency 包无论如何都会为您执行此操作。

在您的情况下，您应该查看 Executor 框架。所以你的代码可能看起来像这样：

```
 ExecutorService exec = Executors.newFixedThreadPool(1);//A field somewhere
    //Start your thread
    exec.submit(new Runnable(){
        @Override
        public void run() {
            while (!exec.isShutdown()) {
                Log.d(TAG, "Running...");
                //Do stuff
            }
        }
    });
    //when done
    exec.shutdown(); 
```

* * *

一夜之间想了想，这可能是一个更好的方法：

```
 ScheduledExecutorService exec = Executors.newScheduledThreadPool(1);
    exec.scheduleWithFixedDelay(new Runnable() {
        @Override
        public void run() {
           //Do stuff
        }
    }, 0, 1, TimeUnit.MILLISECONDS);
    //when done
    exec.shutdown(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T02:27:41.337

```
isRunning = true;
while(isRunning)
{
    Log.d(TAG, "Running...");
    ...//Do something
} 
```

你的while循环有中断吗？还是您在其他地方设置 isRunning = false？

# search - Chrome Omnibox 扩展将表单数据发布到网站？

> ID：11856645
> 
> 赞同：1
> 
> 时间：2012-08-08T01:58:13.427
> 
> 标签：search, post, google-chrome-extension

Omnibox 扩展如何创建表单数据并将其发布到网站，然后显示结果？

这是我想做的一个例子。当您`lookup bieber`在多功能框中输入内容时，我希望我的扩展程序可以发布看起来像的表单数据

```
searchtype: all
searchterm: bieber
searchcount: 20 
```

到网址`http://lookup.com/search`

这样浏览器将最终加载`http://lookup.com/search`搜索结果。

如果我可以在 GET 中发送数据，这将是微不足道的，但 lookup.com 需要一个 HTTP POST。我能想到的唯一方法是将表单注入当前页面然后提交，但是（a）仅在存在*当前*页面时才有效，并且（b）它似乎无论如何都不起作用（也许是权限需要设置）。

在沿着那条路线走之前，我想至少其他人之前一定尝试过这样做。你？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:56:29.057

您可以使用多功能框 api 来做到这一点：

```
chrome.omnibox.onInputChanged.addListener(
  function(text, suggest) {
    doYourLogic...
  }); 
```

一旦由于您键入的某个关键字而将扩展程序“激活”，您可以调用如下内容：

```
var q = the params you wish to pass
var url = "http://yourSite.com";

var req = new XMLHttpRequest();
req.open("POST", url, true);
req.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
 req.onreadystatechange = function() {
  if (req.readyState == 4) {
    callback(req.responseXML);
  }
}
req.send(q); 
```

# php - 重新加载 div 以重新加载 XML

> ID：11856647
> 
> 赞同：0
> 
> 时间：2012-08-08T01:58:30.553
> 
> 标签：php, javascript, ajax, timer

在*div#weather*内部，我有一些 PHP 正在调用 Google 的天气 XML。它工作得很好，除了它变得陈旧。我想每 600000 毫秒重新加载一次 div 以获得新的 XML。

我正在使用 javascript 计时器的路径，但这似乎需要一个外部 URL。

如果我需要将 PHP 放在一个外部文件中，这没什么大不了的，只是不理想。

```
<div id="weather">
<?php
    $URL = "http://www.google.com/ig/api?weather=60618";
    $dataInISO = file_get_contents($URL);
    $dataInUTF = mb_convert_encoding($dataInISO, "UTF-8", "ISO-8859-2");
    $xml = simplexml_load_string($dataInUTF);
    $current = $xml->xpath("/xml_api_reply/weather/current_conditions");
?>
    <div class="weather-<?php $weather =  $current[0]->condition['data']; $weatherclass = str_replace(' ','-',$weather); $weatherclass = strtolower($weatherclass); echo $weatherclass; ?>">&nbsp;</div>
    <div id="temp"><?= $current[0]->temp_f['data'] ?>&deg;</div>
    <div id="condition"><?= $current[0]->condition['data'] ?></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T02:16:05.490

如果你想保留你的单个文件，你可以使用 ajax 来调用自己，然后抓住里面的 html`<div id="weather">`来替换你当前的 div。

```
$.get('your current page.php', function(data){
   var a = $(data);
   var weather = $(a).find('#weather').html();
   $('#weather').html(weather);
}); 
```

# javascript - 如何使悬停的图像在其他元素之上

> ID：11856648
> 
> 赞同：0
> 
> 时间：2012-08-08T01:58:29.877
> 
> 标签：javascript, jquery, html, css

我正在尝试`hover`图像并放大图像和图像信息。我希望将悬停的图像`div`放在其他图像之上，`div`而不是被`div` 我使用的其他图像覆盖，`z-index`但它似乎不起作用。有人有好的想法吗？非常感谢。

```
<div class='imgDiv'>
    <img src='a.jpg' />
    <p>hahaha</p>
</div>

<div class='imgDiv'>
    <img src='b.jpg' />
    <p>hahaha</p>
</div>

<div class='imgDiv'>
    <img src='c.jpg' />
    <p>hahaha</p>
</div>

<div class='imgDiv'>
    <img src='d.jpg' />
    <p>hahaha</p>
</div>

......
.....I have so many images divs.... 
```

CSS

```
.imgDiv{
float:left;
}

.imgDiv:hover{

//part of the enlarge div will be covered by other image divs...
-webkit-transform:scale(1.45, 1.45);
-moz-transform:scale(1.45, 1.45);
-o-transform:scale(1.45, 1.45);
-ms-transform:scale(1.45, 1.45);
transform:scale(1.45, 1.45)

} 
```

jQuery

```
$('.imgDiv').hover(function(){

  //not working...
  $(this).css('z-index','999');       

}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:17:38.667

为了`z-index`工作，`position`必须是`absolute`. 您可能必须在悬停时切换绝对定位，并设置`top`和`left`属性以使 div 保持原位。

如果你没有让你的 div 浮动，它会更容易。

请记住，绝对位置是相对于第*一个定位元素*的。不一定是body元素。它相对于第一个将其`position`设置为某物的父级。

**编辑**
正如@ahren 在他的评论中指出的那样，我`z-index`只使用`position: absolute;`.

也就是说，除了 javascript 部分之外，我用你的代码设置了一个[小提琴](http://jsfiddle.net/Y5E7e/2/)，它似乎按预期工作。行为与 chrome / firefox / ie9 相同。也许你的 html/css 的其他部分导致了这个问题？还是我误解了这个问题？

# c++ - Makefile，循环依赖被删除，需要澄清

> ID：11856649
> 
> 赞同：1
> 
> 时间：2012-08-08T01:58:32.023
> 
> 标签：c++, makefile, circular-dependency

在一个makefile中

```
 1 SHELL=/bin/zsh
  2 CC=g++
  3 
  4 TARGET  = target/jj
  5 SOURCES = $(shell echo src/*.cpp)
  6 HEADERS = $(shell echo include/*.h)
  7 OBJECTS = $(SOURCES:.c=.o)
  8 FLAGS   = -Wall -c
  9 
 10 all: $(TARGET)
 11 
 12 # Create final executable from .o
 13 $(TARGET): $(OBJECTS)
 14   $(CC) $(OBJECTS)
 15 
 16 # Create .o from .cpp
 17 $(OBJECTS): $(SOURCES)              # <------------------------------
 18   $(CC) $(FLAGS) -c $(SOURCES)
 19 
 20 # Remove objects  
 21 clean:
 22   rm -rf $(OBJECTS) 
```

所以 .. 在第 17 行，`$(OBJECTS)`创建确实取决于`$(SOURCES)`.o 创建中使用的内容。为什么这条线会产生循环依赖？（改为`$(TARGET):`改为，工作正常）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:10:18.670

问题出在第 7 行——您的源文件是`.cpp`文件，但您使用的是替换`.c -> .o`. 尝试将其更改为`.cpp`.

# c - 执行解释器文件时出错

> ID：11856650
> 
> 赞同：-1
> 
> 时间：2012-08-08T01:58:42.030
> 
> 标签：c, exec, executable, interpreter

我试图通过解释器文件执行程序。我在 C 中使用了 fork() 和 execl() 函数。这是我的代码：

```
 if ((pid = fork()) < 0)
        printf("fork error");
    else if (pid == 0) {     /* child */
        if (execl( "/home/alien/testinterp",         /* the interpreter file */
                   "testinterp", "arg1", (char *)0) < 0)
            printf("execl error"); 
```

在文件“/home/alien/testinterp”中，有：

```
#!/bin/sh 
```

我可以在 shell 中运行 /bin/sh 。我使用 Emacs 编辑了解释器文件。

当我运行我的程序时，我遇到了错误。（“execl 错误”）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:25:09.293

借助问题帖子的评论，**答案**是：

`/home/alien/testinterp`是不可执行的，因此向该文件添加可执行位将解决问题：`chmod +x /home/alien/testinterp`

**PS1**：我怎么猜的？

> 我使用 Emacs 编辑了解释器文件

我猜这个文件可能是新创建的，没有可执行位。

**PS2**：猜测并不能真正解决问题，有什么更好的方法？

1.  打印`errno`,`perror()`很有用。

2.  这个错误是从哪里来的`exec*()`，你可以尝试直接通过shell执行来看看会发生什么

    $ /home/alien/testinterp arg1

3.  一些函数，如`exec*()`，`fork()`是系统调用的包装器，您可以`strace`在调用系统调用时显示信息。

    strace -ff path_to_your_program

# ios - iPad SplitViewController 以编程方式显示弹出框

> ID：11856651
> 
> 赞同：4
> 
> 时间：2012-08-08T01:58:51.397
> 
> 标签：ios, ipad, uisplitviewcontroller, uipopovercontroller

我有一个 iPad SplitViewController 应用程序，我在其中以纵向和横向模式隐藏左窗格。当应用程序收到某个通知时，我需要在其弹出窗口中显示左窗格。尽管尝试了许多不同的建议解决方案，但我仍在努力解决如何实现这一目标。

我正在使用包含以下代码的 MultipleMasterDetailManager 实现：

```
/* forward the message to the current detail view
 * all detail views must implement UISplitViewControllerDelegate
 */
-(void)splitViewController:(UISplitViewController *)svc willHideViewController:(UIViewController *)aViewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)pc
{
    self.masterBarButtonItem = barButtonItem;
    self.masterPopoverController = pc;

    barButtonItem.title = NSLocalizedString(@"Show Sidebar", @"Show Sidebar");

    [self.currentDetailController.navigationItem setLeftBarButtonItem:self.masterBarButtonItem animated:YES];
}

/* forward the message to the current detail view
 * all detail views must implement UISplitViewControllerDelegate
 */
-(void)splitViewController:(UISplitViewController *)svc willShowViewController:(UIViewController *)aViewController invalidatingBarButtonItem:(UIBarButtonItem *)barButtonItem
{
    //if (![self.currentDetailController isKindOfClass:[SyncSourceDetailViewController class]])
    //{
        self.masterBarButtonItem = nil;
        self.masterPopoverController = nil;

        [self.currentDetailController.navigationItem setLeftBarButtonItem:nil animated:YES];    
    //}    
} 
```

详细视图控制器本身也存在类似的方法。

我收到通知时调用的方法如下：

```
- (void)navigateToLatest 
{   
        [self navigateToDocumentsTab];  
        [[self dataLoader] navigateToLatest];  // populates data for the left table view 
        UISplitViewController *splitViewController = (UISplitViewController *)self.window.rootViewController;
        UIView *view = [[[[[splitViewController viewControllers] objectAtIndex:1] viewControllers] objectAtIndex:0] view];  

        [self.masterDetailManager.masterPopoverController presentPopoverFromRect:CGRectMake(0, 0, 100, 100) inView:view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
} 
```

这不起作用。我也尝试过使用 presentPopoverFromBarButtonItem 方法，但我似乎无法在代码中找到 leftBarButtonItem。

也许我正在以完全错误的方式解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T03:19:52.263

我最终通过在 navigateToLatest 方法中将我的应用程序委托中的“showSidebar”变量设置为 true 来解决这个问题。然后在 DetailViewController 的 ViewDidAppear 事件中检查此变量的值，如果为真，则使用以下代码显示侧边栏：

```
UIPopoverController *masterPopoverController= [[theAppDelegate masterDetailManager] masterPopoverController];
        [masterPopoverController presentPopoverFromBarButtonItem:[self.navigationItem leftBarButtonItem] permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
        [theAppDelegate setShowSidebar:NO]; 
```

# c# - 主页和 SSL 上的登录控制

> ID：11856652
> 
> 赞同：0
> 
> 时间：2012-08-08T01:58:52.863
> 
> 标签：c#, asp.net

我正在使用 asp.net 登录控件，现在该功能位于其自己的单独页面上，最终将在 SSL 中工作。但是，我认为尝试像现在许多网站一样将登录控件放在主页上也会很有趣。

如何设置功能以使主页通过常规 HTTP 工作但登录本身使用 HTTPS？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:18:33.357

您可以按如下方式创建表单：

```
<form action="https://www.yoursite.com/dedicated_login_page.aspx" method="post">
Username: <input type="text" name="username" /><br />
Password: <input type="password" name="password" /><br />
<input type="submit" value="Login" />
</form> 
```

请注意`runat="server"`缺少该属性，并且该`action`属性还指定了 HTTPS。`username`和参数将`password`被加密发送到服务器。

在专用登录页面上，检查`Request.Form["username"]`和`Request.Form["password"]`。如果指定，请根据您的用户数据库验证凭据。

如果登录不成功，让他们使用您的登录控件重试。

# java - 生成 Jar 的 Ant 脚本 - 未找到参考错误

> ID：11856656
> 
> 赞同：5
> 
> 时间：2012-08-08T01:59:08.490
> 
> 标签：java, ant

我有以下 ant 脚本来生成 jar 文件

```
<project name="myProject" basedir="." default="jar">
<property name="src" value="Java Source"/>
<property name="output" value="bin"/>

<target name="compile" depends="create">
    <javac destdir="bin">
        <src path="${src}"/>
        <classpath refid="myProject.classpath"/>
    </javac>
</target>

<target name="jar" depends="compile">
    <jar destfile="myProject.jar">
        <fileset dir="bin"/>
    </jar>
</target>

<target name="clean">
    <delete dir="${output}"/>
</target>

<target name="create" depends="clean">
    <mkdir dir="${output}"/>
</target> 
```

当我运行 ant 脚本时，出现以下错误

> 未找到引用 myProject.classpath。

我不知道如何解决这个错误。它需要 .classpath 文件的路径？我也试过

> refid="类路径"

它没有用。

任何人都可以帮忙吗！谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T02:04:22.193

您需要先定义类似的东西，因为现在 MyProject.classpath 没有定义：

```
<classpath>
  <pathelement path="${classpath}"/>
</classpath> 
```

假设你的类路径有你需要的。

如果没有，请在 classpath 元素下创建另一个条目，该条目具有对 jar 或您需要的任何内容的引用，或者您需要自定义指定路径：

```
 <path id="MyProject.classpath">
   <pathelement location="lib/"/>
   <pathelement path="${classpath}/"/>
   <pathelement path="${additional.path}"/>
  </path> 
```

[http://ant.apache.org/manual/using.html#path](http://ant.apache.org/manual/using.html#path)

# android - 安卓触摸事件

> ID：11856663
> 
> 赞同：0
> 
> 时间：2012-08-08T02:00:07.107
> 
> 标签：android

我有两个视图，视图 A 和 B。

当我在视图 A 上触发触摸事件“移动”时，视图 B 将显示并覆盖在视图 A 上。同时，我希望视图 B 可以从视图 A 接收相同的触摸事件“移动”。是否可以从系统向视图 B 发送相同的触摸事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T02:45:28.287

是的，您可以调用 viewB 的`onTouchEvent()`方法并将其传递给 viewA 的 MotionEvent 如下所示：

```
viewA.setOnTouchListener(new OnTouchListener() {
    @Override
    public onTouch(View v, MotionEvent me){
        viewB.onTouchEvent(me);
    }
}); 
```

这应该将所有到达 viewA 的事件传递给 viewB。

# objective-c - 基于文档的 Cocoa 应用程序的多个上下文？

> ID：11856671
> 
> 赞同：0
> 
> 时间：2012-08-08T02:01:28.783
> 
> 标签：objective-c, cocoa, nsmanagedobjectcontext

所以我在 Cocoa 中构建了一个基于文档的应用程序并试图理解 NSManagedObjectContext。我已经阅读了 Apple 的“核心数据基础”，但无法理解它。在我的应用程序中，我创建了一个自定义 CoreDataUtility 类，以便我的所有类都可以通过以下代码行获取上下文：

```
MyCoreDataUtility *coreData = [MyCoreDataUtility sharedCoreDataUtility];
NSManagedObjectContext *context = [coreData context]; 
```

我从“可可是我的女朋友”这个网站得到了这个想法。我感到困惑的是，当我运行我的应用程序并创建一个新窗口（我的文件所有者类是 NSPersistentDocument 的子类）时，如果我对新窗口上的上下文进行更改，则视图会反映旧窗口上的更改，并且以及新的。基于此，我假设两个窗口都以某种方式引用相同的上下文或至少相同的数据。

所以我的问题是：

1.  我假设每次创建新窗口时都会创建一个新上下文，这是正确的吗？
2.  如果创建了一个新的上下文并且它们不同（我实际上打印出两个上下文的内存地址并且它们的地址不同）这是否与持久存储协调器或持久对象存储有关（这两个概念也是在我的脑海中模糊不清）？
3.  如果所有文档都引用相同的上下文，我是否有责任在每次创建文档时创建一个新的上下文？

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:58:53.433

> 我假设每次创建新窗口时都会创建一个新上下文，这是正确的吗？

不，是的。创建一个新窗口不会创建一个新的上下文，但我想你所看到的“一个新窗口”实际上是你“创建一个新文档”的动作。在具有 CoreDate 的基于文档的应用程序中，您可能有一个持久存储，它为每个文档自己创建一个新的上下文。

这也是你第二个问题的答案。存储协调器只是管理应用程序所有文档的中心点。它负责一些与菜单相关的操作，例如打开、保存和所有副作用。

> 如果所有文档都引用相同的上下文，我是否有责任在每次创建文档时创建一个新的上下文？

这是不可能的。一个上下文只能与一个文件（或“存储”）相关，因此每个文档都必须“至少”具有一个上下文。如果您将模板用于基于 CoreData 和多文档的应用程序，则不必担心创建新上下文。正如我之前所说，商店协调员会处理这个问题。但是，当您了解更多有关 CoreData 的信息时，特别是如果您使用多线程，您将不得不创建多个上下文，因为上下文不能跨线程。

您能否提供来自 Cocoa 的链接是我的女朋友您获取该代码的地方？看起来你想要一个单例来存储你的上下文，这在基于文档的应用程序中通常是一个坏主意，因为给一个函数提供不同文档的上下文非常容易搞砸事情。您的应用程序在传递上下文的地方应该有一个良好的流程。但是，如果我的应用程序不是基于文档的，我总是使用单例。

# objective-c - ObjC：在 init 和/或 initWithFrame 中使用“self”：

> ID：11856672
> 
> 赞同：1
> 
> 时间：2012-08-08T02:01:35.727
> 
> 标签：objective-c, class, init, alloc

我从某人那里听说类的状态在 -(id)init 内部还不稳定，因此不建议在 init 内部使用“self.something”，但是我有一个 UIView 子类需要在类被创建，所以我必须在 init 中使用 [self addSubview: subview]，或者我必须有另一个初始化方法，并且在我创建视图之后使用：

```
MyView *myView = [[MyView alloc] initWithFrame:frame]; 
```

我需要调用该方法。它是否正确？initWithFrame 是否与 init 有相同的情况，即该类尚未稳定（因为它在 alloc 之后调用）？如果是，那么我应该如何初始化子视图？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T02:22:57.270

使用`self`in没有任何问题`init`。脆弱的一点是，如果您使用 setter 方法`[self setFoo:...]`或`self.foo = ...`，那么您可能会触发类或子类中可能未为部分初始化状态准备的任何 setter 逻辑。

`[self addView:someView];`不是问题。但是，您*可能*需要考虑延迟加载视图，而不是从实例化中卸载。它*可能*使以后的重构更容易。

*强调*，因为如果您的视图确实总是需要那些其他视图，那么尝试延迟加载是没有意义的。

# ios - 如何多次显示游戏中心验证登录警报？

> ID：11856673
> 
> 赞同：0
> 
> 时间：2012-08-08T02:01:44.370
> 
> 标签：ios, game-center

我正在开发一款游戏，我想让游戏中心类似于应用程序 High Moon。即在认证时，当苹果的游戏中心登录提示出现时，如果用户点击取消，我会显示提示，当我的提示消失时，我想再次显示苹果的游戏中心登录。这意味着如果用户没有登录游戏中心，他就不能玩游戏。问题是，当我调用 authenticate 方法再次显示登录警报时，Apple 的游戏中心登录警报没有显示。有人知道如何再次显示它吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T03:59:28.867

其实你不能。

其中有趣的部分是，如果用户连续按三次取消，对话框将不会再次出现。曾经。即使您调用了验证码，用户也必须去游戏中心应用程序，登录，然后再回来。

资料来源：GameKit 文档。

# ruby - 将 heroku 数据库从一个竹应用程序转移到另一个雪松应用程序

> ID：11856676
> 
> 赞同：2
> 
> 时间：2012-08-08T02:01:56.717
> 
> 标签：ruby, database, heroku, bamboo, cedar

有没有一种更快的方法可以将一个应用程序上的数据库传输到另一个应用程序，而无需使用捕获和恢复过程，这在我的情况下需要 3 小时。

我们正在尝试迁移到 Cedar 应用程序，但无法承受 3 小时的停机时间。

是否有可能：1.在当前的产品应用程序上创建一个追随者 2.允许赶上。3\. 维护 4\. 取消关注我在步骤 1 中创建的当前产品应用程序上的关注者 5\. 将该关注者提升到另一个应用程序。6.维护关

与此链接类似：[https](https://devcenter.heroku.com/articles/fast-database-changeovers) ://devcenter.heroku.com/articles/fast-database-changeovers 但试图将其推广到另一个应用程序。

可能吗？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T19:43:13.850

如果您正在制定数据库的生产计划之一，那么您很幸运。您可以使用一个秘密标志。它不适用于开发计划，仅适用于起重机及以上。如果您的 Bamboo 应用程序有一个起重机或更好的数据库，您可以通过获取 DATABASE_URL 创建它的一个分支，然后运行：

```
heroku addons:add heroku-postgresql:crane --fork="<PASTE DATABASE_URL HERE>" --app your-cedar-app 
```

或者，如果您愿意，可以使用类似于我们的[快速转换](https://devcenter.heroku.com/articles/fast-database-changeovers)的程序来缩短停机时间：

```
heroku addons:add heroku-postgresql:crane --follow="<PASTE DATABASE_URL HERE>" --app your-cedar-app
heroku pg:wait --app your-cedar-app # let the new database boot
heroku pg:info --app your-cedar-app # Make sure it's caught up, Behind By should be =~ 0.
heroku maintenance:on --app your-cedar-app
heroku pg:unfollow HEROKU_POSTGRESQL_<color of new database> --app your-cedar-app
heroku pg:promote HEROKU_POSTGRESQL_<color of new database> --app your-cedar-app # make it the primary
heroku maintenance:off --app your-cedar-app 
```

# ruby-on-rails - ActionController::RoutingError 没有路由匹配 [GET] "/stories"

> ID：11856680
> 
> 赞同：1
> 
> 时间：2012-08-08T02:02:23.993
> 
> 标签：ruby-on-rails, rails-routing

操作系统：openSUSE 11.4 Rails 3.2.0

我刚刚创建了一个非常简单的应用程序“koko”。这是我运行的命令的顺序

```
rails new koko
rails generate model Story name:string description:string
rake db:migrate
rails generate controller Stories index 
```

以上所有命令均已成功执行。然后我运行 =>rails server 来启动服务器。localhost:3000/ 工作正常。

当我尝试执行 localhost:3000/stores 时，我收到以下错误：（浏览器显示第一行关于无路由匹配）

```
Started GET "/stories" for 127.0.0.1 at Sat Aug 04 12:52:02 -0400 2012
ActionController::RoutingError (No route matches [GET] "/stories"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'
  rack (1.4.1) lib/rack/handler/webrick.rb:13:in `run'
  rack (1.4.1) lib/rack/server.rb:265:in `start'
  railties (3.2.0) lib/rails/commands/server.rb:70:in `start'
  railties (3.2.0) lib/rails/commands.rb:55
  railties (3.2.0) lib/rails/commands.rb:50:in `tap'
  railties (3.2.0) lib/rails/commands.rb:50
  script/rails:6:in `require'
  script/rails:6

Rendered /usr/lib/ruby/gems/1.8/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.9ms) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T03:31:53.570

您的问题是您正在尝试对非 RESTful 资源使用 RESTful 接口。您制作了一个模型，并制作了一个带有索引操作的控制器 ( `/controller_name/action`)。

如果您对使用感到满意`/stories/index`，那么我们就完成了！如果您更喜欢更传统的 RESTful 界面`/stories`，那么我建议您使用：

`rails generate resource ModelName fields:types`.

这将创建一个模型和一个控制器，并且应该开箱即用地工作。这将设置评论中提到的路线。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T05:54:35.560

您可能只是有一些命名问题。通常，在创建控制器时，它应该是

```
rails g controller stories index 
```

或者

```
rails g controller Story index 
```

然后将您自动生成的路线更改为

```
match "/stories" => "stories#index", :as => "stories" 
```

# python - pyschools-tictactoe

> ID：11856682
> 
> 赞同：-1
> 
> 时间：2012-08-08T02:02:29.370
> 
> 标签：python, tic-tac-toe

在纸笔游戏中，井字游戏中，2 名玩家轮流在 3x3 方格的棋盘上标记“X”和“O”。成功在垂直、水平或斜条纹上连续标记 3 个“X”或“O”的玩家获胜。编写一个函数来确定井字游戏的结果。

例子

```
>>> tictactoe([('X', ' ', 'O'), 
               (' ', 'O', 'O'), 
               ('X', 'X', 'X') ])
"'X' wins (horizontal)."
>>> tictactoe([('X', 'O', 'X'), 
...            ('O', 'X', 'O'), 
...            ('O', 'X', 'O') ])
'Draw.'
>>> tictactoe([('X', 'O', 'O'), 
...            ('X', 'O', ' '), 
...            ('O', 'X', ' ') ])
"'O' wins (diagonal)."
>>> tictactoe([('X', 'O', 'X'), 
...            ('O', 'O', 'X'), 
...            ('O', 'X', 'X') ])
"'X' wins (vertical)."

def tictactoe(moves):
for r in range(len(moves)):
    for c in range(len(moves[r])):      
        if moves[0][c]==moves[1][c]==moves[2][c]:
            a="'%s' wins (%s)."%((moves[0][c]),'vertical')
        elif moves[r][0]==moves[r][1]==moves[r][2]:
            a="'%s' wins (%s)."%((moves[r][0]),'horizontal')
        elif moves[0][0]==moves[1][1]==moves[2][2]:
            a="'%s' wins (%s)."%((moves[0][0]),'diagonal')
        elif moves[0][2]==moves[1][1]==moves[2][0]:
            a="'%s' wins (%s)."%((moves[0][2]),'diagonal')
        else:
            a='Draw.'
print(a) 
```

我写了这样的代码，但我的范围不起作用（我认为）。因为，它将 r 和 c 的值设为 3，而不是 0、1、2、3。那么，请任何人都可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T02:12:19.653

当玩家获胜时，您的循环不会退出。我会尝试这样的事情：

```
def tictactoe_state(moves):
  for r in range(len(moves)):
    for c in range(len(moves[r])):
      if moves[0][c] == moves[1][c] == moves[2][c]:
        return "'%s' wins (%s)." % (moves[0][c], 'vertical')
      elif moves[r][0] == moves[r][1] == moves[r][2]:
        return "'%s' wins (%s)." % (moves[r][0], 'horizontal')
      elif moves[0][0] == moves[1][1] == moves[2][2]:
        return "'%s' wins (%s)." % (moves[0][0], 'diagonal')
      elif moves[0][2] == moves[1][1] == moves[2][0]:
        return "'%s' wins (%s)." % (moves[0][2], 'diagonal')

  # You still have to make sure the game isn't a draw.
  # To do that, see if there are any blank squares.

  return 'Still playing' 
```

另外，我会将`if`检查对角线的语句移出循环。它们不依赖于`r`and `c`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-14T03:46:33.197

试试这个..

```
def tictactoe(moves):
    for r in range(len(moves)):
        for c in range(len(moves[r])):      
            if moves[0][c]==moves[1][c]==moves[2][c]:
                return "\'%s\' wins (%s)." % ((moves[0][c]),'vertical')
            elif moves[r][0]==moves[r][1]==moves[r][2]:
                return "\'%s\' wins (%s)."%((moves[r][0]),'horizontal')
            elif moves[0][0]==moves[1][1]==moves[2][2]:
                return "\'%s\' wins (%s)."%((moves[0][0]),'diagonal')
            elif moves[0][2]==moves[1][1]==moves[2][0]:
                return "\'%s\' wins (%s)."%((moves[0][2]),'diagonal')
    return 'Draw.' 
```

# actionscript-3 - AS3 碰撞检测鼠标移动

> ID：11856683
> 
> 赞同：1
> 
> 时间：2012-08-08T02:03:03.473
> 
> 标签：actionscript-3, flash, collision-detection

我正在制作一个使用鼠标碰撞检测的游戏。

当鼠标撞到一个物体时，鼠标移动到坐标X0，Y0，播放器就是一个自定义鼠标光标。我用来实现这一点的代码如下。但是，当鼠标移动到碰撞后将鼠标移动到 X0,Y0 时，它会从发生碰撞的位置开始返回，而不是从屏幕顶部移动。

```
import flash.events.Event;

var cursor:MovieClip;

function initializeMovie ():void {

cursor = new Cursor();
addChild (cursor);
cursor.enabled = false;
Mouse.hide ();
stage.addEventListener (MouseEvent.MOUSE_MOVE, dragCursor);
}

function dragCursor (event:MouseEvent):void{

cursor.x = this.mouseX;
cursor.y = this.mouseY;
}

initializeMovie ();

this.addEventListener( Event.ENTER_FRAME, handleCollision)

function handleCollision( e:Event ):void{

if(cursor.hitTestObject( wall )){
cursor.x = 0
cursor.y = 0
     }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:06:23.090

当您重置光标对象的位置时，您并没有移动实际的鼠标位置，我不相信您可以实际做您想做的事情（即写入鼠标位置以移动用户光标，我相信这一点将需要系统特定的代码，例如 C#，或者我相信 Mac 端的 Objective C 和 Cocoa 或 Carbon）。

[http://www.kirupa.com/forum/showthread.php?354641-Possible-to-set-mouse-position-in-flash](http://www.kirupa.com/forum/showthread.php?354641-Possible-to-set-mouse-position-in-flash)

这是您在Mac上显然可以做到的一种方式 [https://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/c/func/CGWarpMouseCursorPosition](https://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/c/func/CGWarpMouseCursorPosition)

[以及在 WPF 中设置鼠标位置的](https://stackoverflow.com/questions/8512651/set-mouseposition-in-wpf)Windows 方法

以及Linux上的一种方式（虽然这个只有AIR支持到2.6） [X11（linux桌面）下如何设置鼠标位置？](https://stackoverflow.com/questions/578804/how-to-set-the-mouse-position-under-x11-linux-desktop)

因此，如果您实现了这两种解决方案并将其打包为 AIR 应用程序，您就可以完成这项工作，但否则我很确定这是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T03:09:51.613

Create a button at the 0, 0 coord that is required to click to continue again. Then your user will have to move the mouse to to that spot where you can continue to have the custom cursor track your mouse.

# php - 使用 php 和我的 sql 取消订阅 html 表单

> ID：11856685
> 
> 赞同：0
> 
> 时间：2012-08-08T02:03:59.250
> 
> 标签：php, mysql, forms, formmail

我有一个 html 表单，人们可以在其中订阅邮件列表。表单包括表单验证，提交表单时，数据使用 My SQL 存储在数据库中。

这是表单所在的 index.html 页面上的代码

```
 <form id="subscribe-form" action="send.php" method="post">
    <p id="status"></p>
    <div>
      <label for="title">Title:</label>
      <select class="uniform" name="title" id="title">
        <option>Please Choose</option>
        <option>Mr</option>
        <option>Mrs</option>
        <option>Miss</option>
        <option>Ms</option>
      </select>
    </div>
    <div>
      <label for="firstName">First name:</label>
      <input type="text" id="firstName" name="firstName" />
    </div>
    <div>
      <label for="surname">Surname:</label>
      <input type="text" id="surname" name="surname" />
    </div>
    <div>
      <label for="email">Email:</label>
      <input type="text" id="email" name="email" />
    </div>
    <div>
      <label for="phone">Contact Number:</label>
      <input type="text" id="phone" name="phone" />
    </div>
    <div>
      <label for="title">How did you hear about us?</label>
      <select class="uniform" name="refer" id="refer">
        <option>Please Choose</option>
        <option>Google</option>
        <option>Yahoo</option>
        <option>Word of Mouth</option>
        <option>Others</option>
      </select>
    </div>
    <div>
      <input type="checkbox" name="news_updates" value="1" />
      I'd like to hear about the latest news and events updates</div>
    <div>
      <input class="button" type="submit" value=""/>
    </div>
  </form> 
```

这是 send.php 的代码

```
<?php 

    include ('connection.php');

    $sql="INSERT INTO form_data (title,firstName, surname, email, phone, refer, news_updates)
    VALUES
    ('$_POST[title]', '$_POST[firstName]','$_POST[surname]','$_POST[email]','$_POST[phone]','$_POST[refer]','$_POST[news_updates]')";

    if (!mysql_query($sql, $connected))
      { 
        die('Error: ' . mysql_error());
      }

    mysql_close($connected);    
?> 
```

我想创建另一个 html (unsubscribe.html) 页面，人们可以通过输入他们的电子邮件地址来取消订阅，以便他们的电子邮件地址与数据库中已经存在的相应电子邮件匹配，并将其从 My Sql 数据库中删除。我发现这个教程很有帮助 - [http://www.phpsuperblog.com/php/delete-records-from-mysql-database-with-html-form-and-php/](http://www.phpsuperblog.com/php/delete-records-from-mysql-database-with-html-form-and-php/)

这是我的 unsubscribe.html 页面上的表格。

```
 <form  id="unsubscribe_form" action="delete.php" method="post">
  <div>
    <label for="email_remove">Email:</label>
    <input type="text" id="email_remove" name="email_remove" />
  </div>
  <div>
    <input name="delete" type="submit" id="delete" value="" class="unsubscribe_btn">
  </div>
</form> 
```

但是当我在退订表单中输入 method="post" 时。subscribe / index.html 上表单中的数据不会存储在 My Sql 中，而是显示为空白。所以我猜我可能不能有两个“发布”方法？

如果有人能引导我朝着正确的方向前进，那将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:14:06.800

我猜你正处于学习阶段。因此，我建议您检查接收帖子的页面上是否调用了 POST 方法。

示例：在您的 subscribe.php 中，您应该有：

```
<input class = "button" type = "submit" value = "Subscribe" name = "subscribe" /> 
```

在发送.php

你必须这样做：

```
if(!isset($_POST['subscribe'])
{
 header('location: subscribe.html');
} 
```

您必须为您的页面使用[isset](http://php.net/manual/en/function.isset.php)。

如果您可以显示您的 delete.php，也许我可以编辑这篇文章并进一步为您提供帮助，但是，到目前为止...需要检查，您可以使用任意数量的表格（甚至在一页上）但是，请确保它们都有不同的 ID/名称。

您的 delete.php 脚本应该是：

```
<?php
require ('connection.php');  // User require for important functions so that if not found, it throws fatal error
$email = $_POST['email_remove'];
// Check for isset POST
$query = "DELETE from form_data WHERE email = '".$email."'";
if(mysql_query($query)){ echo "deleted";} else{ echo "fail";} 
?> 
```

你的 delete.php 对我来说似乎没问题。

可以将以下内容添加到第 2 行 echo ""; print_r($_POST);

并在评论中发布数组？

# c++ - Android NDK r8 的 Openssl 构建问题

> ID：11856688
> 
> 赞同：3
> 
> 时间：2012-08-08T02:04:18.790
> 
> 标签：c++, android-ndk, openssl

我正在尝试在我的 NDK 应用程序中构建 Openssl。即使遵循了 Android ndk build 所期望的所有必要步骤，我也经常遇到链接错误。我正在将 ndk-build 命令与 ndk 支持的库一起使用。我可以看到 libcrypto.So bieng 编译和链接成功

```
Compile thumb  : crypto <= sha512-armv4.S
SharedLibrary  : libcrypto.so
Install        : libcrypto.so => /Users/<me>/Downloads/paddybyers-openssl-android-2b40b8b/libs/armeabi/libcrypto.so 
```

但是在此之后启动的**openssl**由于某种原因失败了。我尝试了所有可能的方式，包括在eclipse和命令行上构建。我什至尝试将openssl单独构建为一个独立的项目。但它总是停在同一水平线上。

*   **我的配置：**

使用 mac OS x NDK r8 Openssl 源来自：[https](https://github.com/eighthave/openssl-android.git) ://github.com/eighthave/openssl-android.git （我尝试在guardproject [https://github.com/guardianproject/openssl-android.git](https://github.com/guardianproject/openssl-android.git)上构建）

它在创建 libcrypto.So 后开始编译 openssl 之前抛出错误

```
****Compile thumb  : ssl <= ssl_algs.c
Compile thumb  : ssl <= bio_ssl.c
Compile thumb  : ssl <= ssl_err.c
Compile thumb  : ssl <= kssl.c
SharedLibrary  : libssl.so
Executable     : openssl
/Users/me/Documents/android/android-ndk/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6.x-google/../../../../arm-linux-androideabi/bin/ld: warning: libz.so, needed by ./obj/local/armeabi/libcrypto.so, not found (try using -rpath or -rpath-link)
./obj/local/armeabi/libcrypto.so: undefined reference to `zError'
./obj/local/armeabi/libcrypto.so: undefined reference to `inflateEnd'
./obj/local/armeabi/libcrypto.so: undefined reference to `deflate'
./obj/local/armeabi/libcrypto.so: undefined reference to `deflateInit_'
./obj/local/armeabi/libcrypto.so: undefined reference to `inflate'
./obj/local/armeabi/libcrypto.so: undefined reference to `deflateEnd'
./obj/local/armeabi/libcrypto.so: undefined reference to `inflateInit_'
collect2: ld returned 1 exit status
make: *** [obj/local/armeabi/openssl] Error 1**** } 
```

如果有人帮助我解决这个问题，我将不胜感激？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T00:47:02.260

我遇到了同样的问题并通过修改 OpenSSL1.0.1cForAndroid/crypto/Android.mk 来修复它，将 libzib 添加到导出列表中：

```
crypto/Android.mk
LOCAL_EXPORT_LDLIBS := -lz 
```

Crypto/Android.mk 确实具有“LOCAL_LDLIBS += -lz”，因此它在构建 libcrypto 时成功链接它，但显然在 ssl 中链接时传播它是不够的（？）。

我正在使用 ndk r8b，gcc 4.6

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T07:24:07.907

***尝试在您的OpenSSL1.0.1cForAndroid\jni\Application.mk***中添加以下行

 *```
NDK_TOOLCHAIN_VERSION=4.4.3 
```

我只是通过这样做解决了同样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T01:42:30.160

我也面临着与 android ndk r8e 相同的问题。然后我下载了openssl-static-android form git。这就像魅力一样。并且您使用的 openssl 版本已在 android ndk r7e 中成功构建。还有一件事，如果您想将此 .so 文件链接到另一个库文件或制作 .apk，我建议您使用 .a 文件而不是 .so。因为 .so 文件有时会导致链接器问题。如果您打算使用 .a 文件，您可以使用 git 中的 openssl-static-android。它适用于所有版本的ndk。

注意：如果您使用的是 android ndk r8e，建议您检查二进制文件以检查它是否已清理。因为android ndk r8e有一个bug。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T02:07:36.730

很可能您有与链接相关的问题，请尝试阅读此问题的答案

[如何在 ndk 应用程序中链接任何库](https://stackoverflow.com/questions/10106965/how-to-link-any-libarary-in-ndk-application)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T02:38:01.603

看起来您还需要链接 zlib（或在 OpenSSL 中禁用 zlib 支持）。您可以使用 -lz 执行此操作（它是 Android 的一部分）*

# git - 设置每个裸仓库的工作树

> ID：11856690
> 
> 赞同：12
> 
> 时间：2012-08-08T02:04:51.880
> 
> 标签：git

正如你在下面看到的，我必须设置一个裸仓库的工作树：

```
cd barerepo
git status
fatal: This operation must be run in a work tree

git --work-tree=/var/www/mywork/ status
# On branch master
nothing to commit (working directory clean) 
```

如何为该仓库设置工作树，这样我就不必每次都指定它？

我尝试`barerepo/config`用这个进行修改，但它不起作用。

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = true
    worktree = /var/www/mywork 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-08T02:34:07.320

裸仓库不应该有工作树，因此 git 会打印“致命：core.bare 和 core.worktree 没有意义”错误消息。因此，您需要`bare = false`在 repo 的配置文件中进行设置。

```
user@host:~$ cd barerepo
user@host:~/barerepo$ git config --bool core.bare false
user@host:~/barerepo$ git config --path core.worktree /var/www/mywork 
```

但是，如果以前不存在 barerepo，则应使用此命令：

```
git init --separate-git-dir=. /var/www/mywork 
```

此命令还将`.git`在工作树中创建一个指向 git 目录的文件：

```
gitdir: /home/user/barerepo 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-18T23:07:07.727

请注意，建议的解决方案（2012 年，预 Git 2.5，将于 2015 年 7 月发布）*不能*直接使用`git config`命令。
它会继续死亡：

```
fatal: core.bare and core.worktree do not make sense. 
```

这就是 Git 2.5（2015 年 7 月）将解决的问题：

请参阅[Jeff King (](https://github.com/peff) [)的](https://github.com/peff)[commit fada767](https://github.com/git/git/commit/fada767463b599951b37bd544379a1d18dcf9370)（2015 年 5 月 29 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 103b6f9](https://github.com/git/git/commit/103b6f9c2b2bbafdbde694f9390fb203f70977f0))^(中，2015 年 6 月 16 日）)[`peff`](https://github.com/peff)
^([`gitster`](https://github.com/gitster))

> ## `setup_git_directory`：延迟`core.bare`/`core.worktree`错误
> 
> 如果两者`core.bare`都`core.worktree`设置了，我们会抱怨虚假配置并死掉。
> 死是好的，因为它可以避免命令运行并在可能不正确的设置中造成损坏。
> 但是死*在那里*是不好的，因为这意味着甚至不关心工作树的命令无法运行。
> **这会使修复情况变得更加困难**：

```
 [setup]
  $ git config core.bare true
  $ git config core.worktree /some/path

  [OK, expected.]
  $ git status
  fatal: core.bare and core.worktree do not make sense

  [Hrm...]
  $ git config --unset core.worktree
  fatal: core.bare and core.worktree do not make sense

  [Nope...]
  $ git config --edit
  fatal: core.bare and core.worktree do not make sense

  [Gaaah.]
  $ git help config
  fatal: core.bare and core.worktree do not make sense 
```

> 取而代之的是，**当我们注意到虚假配置时（即，对于所有命令），让我们发出关于虚假配置的警告，但仅在命令尝试使用工作树时（通过调用 setup_work_tree）死亡。**
> 
> 所以我们现在得到：

```
$ git status
warning: core.bare and core.worktree do not make sense
fatal: unable to set up work tree using invalid config

$ git config --unset core.worktree
warning: core.bare and core.worktree do not make sense 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-09-26T18:25:25.633

请注意，问题和答案来自 2012 年，但从 git 2.5 开始，即使使用裸存储库，您也可以使用以下命令创建单独的工作树：

```
$ git worktree add /var/www/mywork/ master
$ git worktree add /var/www/workdev/ devel 
```

请参阅[git-worktree(1)](https://git-scm.com/docs/git-worktree)。

它不会更改，但会在您的 git 存储库中`core.worktree`创建一个目录。`worktrees`

`extensions.worktreeConfig`如果您不希望所有工作树和裸存储库共享相同的配置，您可能需要将配置选项更改为 true。

# ruby - 将正则表达式全局变量与 Ruby gsub 一起使用

> ID：11856691
> 
> 赞同：2
> 
> 时间：2012-08-08T02:04:51.507
> 
> 标签：ruby, regex

我正在尝试将正则表达式全局变量与 ruby​​ gsub 一起使用！方法。

我的想法是这样的：

```
MyTextString.gsub!(/regex expression/,$1) 
```

这就是我接近它的方式，但它不起作用。这是可能的还是我的正则表达式不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T02:21:06.677

使用`'\1'`而不是`$1`（`$1`引用一个尚不存在的变量，因为您尚未匹配正则表达式）

此外，“我的正则表达式不起作用”很难提供帮助。一个更好的短语是解释为什么它不起作用（之后字符串相同，或引发错误，或其他），并提供重现问题所需的数据（字符串和正则表达式）。

```
str = "abcdefg"
str.gsub!(/a(.)c/, '\1')
str # => "bdefg" 
```

# javascript - .load() 和 $(window).bind('load') 之间的延迟

> ID：11856692
> 
> 赞同：0
> 
> 时间：2012-08-08T02:04:58.880
> 
> 标签：javascript, jquery, dom, dynamically-generated, delayed-execution

我遇到了在完成之间造成的延迟问题：

```
var href = $('.mainNav').data('href');
$('#slideshow').load(href); 
```

这会调用一个仅包含未排序列表的文件并将其放置为#slideshow 的内容。那部分在 $(document).ready 函数中。

下一段代码调用插件 jCarousel 来设置 #slideshow 内容的样式，并且位于 $(document).ready 函数之外：

```
$(window).bind('load', function () {
  $('#mycarousel').jcarousel();
}); 
```

我遇到的问题是，在加载列表和格式化完全没有样式的列表之间存在轻微延迟。有没有办法让第二段代码在列表本身显示之前运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T02:17:00.033

你可以用 CSS 隐藏它：

```
#mycarousel {
  display: none;
} 
```

然后在设置 jcarousel 后显示它：

```
$(window).bind('load', function () {
  $('#mycarousel').jcarousel();
  $('#mycarousel').show();
}); 
```

另外，我认为您使用`$(window).bind('load', ...)`with很奇怪`.load()`，因为`.load()`不会在`window`. 也许你应该使用回调`.load()`来做类似的事情：

```
$('#slideshow').load(href, function () {
  $('#mycarousel').jcarousel();
  $('#mycarousel').show();
}); 
```

# php - 使用 exit() 和 header() 以单行方式重定向

> ID：11856693
> 
> 赞同：2
> 
> 时间：2012-08-08T02:05:04.153
> 
> 标签：php

我的问题是关于将以下内容写成单行：

```
header('Location: www.somesite.com');
exit(0); 
```

PHP文档说你也可以写`exit('some string');`，它会输出那个字符串。我认为该`header()`函数只是创建了一些原始 HTTP 标头，这应该是一串文本，对吧？所以上面两行的等价物可能是：

```
exit(header('Location: www.somesite.com')); 
```

我对其进行了一些测试，并且它可以正常工作（即正确退出并重定向..还没有看到任何恶作剧）。

但是，我在 google 上找不到任何关于此的信息，我也不能 100% 确定它`header()`会创建`exit()`函数期望的实际字符串。

**那么这是一个很酷的技巧还是错误使用 PHP 函数，如果错误，为什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:08:41.157

header() 不向 exit() 函数返回任何内容 - 它发送原始 http 标头并返回类型为 void。exit() 函数不需要强制参数，所以是的，我认为你所做的会起作用:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T02:17:15.510

即使您可以这样做，但两行代码更具可读性和简洁性。

```
header('Location: www.somesite.com');
exit(0); 
```

如果你想要一条线，你可以做一个函数。

```
function redirect($url) {
    header("Location: $url");
    exit(0);
} 
```

# c# - Json.NET 在 DateTime 上禁用反序列化

> ID：11856694
> 
> 赞同：63
> 
> 时间：2012-08-08T02:05:08.173
> 
> 标签：c#, datetime, json.net, deserialization

这是代码：

```
 string s = "2012-08-08T01:54:45.3042880+00:00";

        JObject j1 = JObject.FromObject(new
        {
            time=s
        });

        Object o = j1["time"]; 
```

我们可以检查 o 是字符串并且等于“2012-08-08T01:54:45.3042880+00:00”

现在我们将 j1.ToString() 转移到另一个程序，即

```
 {
          "time": "2012-08-08T01:54:45.3042880+00:00"
       } 
```

然后在另一个程序中，尝试将其解析回 JObject，即

```
 JObject j2 = JObject.Parse(j1.ToString());

       Object o2 = j2["time"]; 
```

现在，如果我们检查 o2，o2 的类型是 Date，o2.ToString() 是 8/7/2012 9:54:45 PM。

我的问题是：

**有没有办法禁用 JObject.Parse 的日期反序列化，只获取原始字符串？**

提前致谢

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-08-08T02:25:34.320

从一个`object`到解析时，`JObject`您可以指定一个`JsonSerializer`指示如何处理日期的。

```
JObject.FromObject(new { time = s },
                   new JsonSerializer {
                          DateParseHandling = DateParseHandling.None
                   }); 
```

不幸`Parse`的是没有这个选项，尽管拥有它是有意义的。查看源代码`Parse`我们可以看到它所做的只是实例化 a`JsonReader`然后将其传递给`Load`. `JsonReader`确实有解析选项。

您可以像这样实现您想要的结果：

```
 using(JsonReader reader = new JsonTextReader(new StringReader(j1.ToString()))) {
    reader.DateParseHandling = DateParseHandling.None;
    JObject o = JObject.Load(reader);
  } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-05-23T14:05:56.630

您也可以使用以下方法完成此`JsonConvert.DeserializeObject`操作`JsonSerializerSettings`：

```
string s = "2012-08-08T01:54:45.3042880+00:00";
string jsonStr = $@"{{""time"":""{s}""}}";

JObject j1 = JsonConvert.DeserializeObject<JObject>(jsonStr, new JsonSerializerSettings {DateParseHandling = DateParseHandling.None}); 
```

# c# - 如何将新添加的数据行从datagridview插入数据库？

> ID：11856695
> 
> 赞同：3
> 
> 时间：2012-08-08T02:05:08.800
> 
> 标签：c#, database, datagridview

我有一个datagridview，表中有一些数据。datagridview 允许用户输入新的数据行

这里的问题：

我想知道如何在不添加将被复制的现有数据的情况下将新插入的数据行（无论添加了多少行）放入数据库。

任何人？

编辑：我使用 sql 数据库，这是我的 datagridview。

![在此处输入图像描述](../Images/b19df60917e917b634f0960fa161198c.png)

显示的数据已经在数据库中，现在，如果用户在 datagridview 中插入新的多行数据怎么办？我应该输入什么代码？

我的代码如下：

```
private void button1_Click(object sender, EventArgs e)
        {
            con = new System.Data.SqlClient.SqlConnection();
            con.ConnectionString = "Data Source=tcp:SHEN-PC,49172\\SQLEXPRESS;Initial Catalog=LSEStock;Integrated Security=True";
            con.Open();
            SqlDataAdapter da = new SqlDataAdapter();

            for (int i = 0; i<dataGridView1.Rows.Count; i++ )
            {

                String insertData = "INSERT INTO CostList(SupplierName, CostPrice, PartsID) VALUES (@SupplierName, @CostPrice, @PartsID)" ;
                SqlCommand cmd = new SqlCommand(insertData, con);
                cmd.Parameters.AddWithValue("@SupplierName", dataGridView1.Rows[i].Cells[0].Value);
                cmd.Parameters.AddWithValue("@CostPrice", dataGridView1.Rows[i].Cells[1].Value);
                cmd.Parameters.AddWithValue("@PartsID", textBox1.Text);
                da.InsertCommand = cmd;
                cmd.ExecuteNonQuery();
            }

            con.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T04:30:57.193

这是我的插入、取消和删除语句：

```
 protected void gv_RowCommand(object sender, GridViewCommandEventArgs e)
        {

            if (e.CommandName == "Insert") //- this is needed to explain that the INSERT command will only work when INSERT is clicked
            {
                gv.DataBind();

                DataTable d = dbcon.GetDataTable("SELECT * FROM CIS.CIS_TRANS ORDER BY ID DESC", "ProjectCISConnectionString");

                string transCode = "", fundCode = "", BSA_CD = "", DP_TYPE = "";

                if (d.Rows.Count > 0)
                {
                    transCode = d.Rows[0]["TRANS_CD"].ToString();
                    fundCode = d.Rows[0]["FUND_CD"].ToString();
                    BSA_CD = d.Rows[0]["BSA_CD"].ToString();
                    DP_TYPE = d.Rows[0]["DP_TYPE"].ToString();

                    if (transCode.Trim().Length > 0)
                    {
                        dbcon.Execute("INSERT INTO CIS.CIS_TRANS (ID,TRANS_CD) VALUES(CIS.S_CIS_TRANS.nextval,'')", "ProjectCISConnectionString");

                        gv.DataBind();
                    }
                }
gv.EditIndex = gv.Rows.Count - 1;

        }
        else if (e.CommandName == "Cancel")
        {
            DataTable d = dbcon.GetDataTable("SELECT * FROM CIS.CIS_TRANS ORDER BY ID DESC", "ProjectCISConnectionString");

            string transCode = "";

            if (d.Rows.Count > 0)
            {
                transCode = d.Rows[0]["TRANS_CD"].ToString();

                if (transCode.Trim().Length == 0)
                {
                    dbcon.Execute(string.Format("DELETE CIS.CIS_TRANS WHERE ID = '{0}'", d.Rows[0]["ID"]), "ProjectCISConnectionString");

                    gv.DataBind();
                }
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-29T14:46:50.650

是否声明了 sqlcommandbuilder、dataAdapter 和 dataTable？

例如：

```
SQLConnection con = (your connection);
SQLDataAdapter = sda;
SQLCommandBuilder = scb;
DataTable = dt;
private void btnEnter_Click(object sender, EventArgs e)

da = new SqlDataAdapter("SELECT * FROM [table] WHERE [columnA]='" + txtData.Text + "' OR [columnB]='" + txtData.Text + "' OR [ColumnC]='" + txtData.Text + "' OR [ColumnD]='" + txtData.Text + "'", con);
            ds = new DataSet();
            dt = new DataTable();
            ds.Clear();
            da.Fill(dt);
            dg.DataSource = dt;

            con.Open();
            con.Close();

private void btnUpdate_Click(object sender, EventArgs e)
    {
        //when button is clicked, the SQL Database gets updated with the data that is plugged into the datagridview.
        scb = new SqlCommandBuilder(da);
        da.Update(dt);

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T02:29:40.963

你有什么样的数据库？这是我的 oracle 数据库的源代码。如果它是一个 SQL 数据库，请将 : 替换为 @。

源代码：

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:ProjectCISConnectionString %>" ProviderName="<%$ConnectionStrings:ProjectCISConnectionString.ProviderName %>"
            SelectCommand="SELECT * FROM CIS.CIS_TRANS ORDER BY ID ASC" 
            DeleteCommand="DELETE FROM CIS.CIS_TRANS WHERE ID = :ID"
            InsertCommand="INSERT INTO CIS.CIS_TRANS (TRANS_CD,FUND_CD,BSA_CD,DP_TYPE,TRANS_CD_DESC) VALUES (:TRANS_CD,:FUND_CD,:BSA_CD,:DP_TYPE,:TRANS_CD_DESC)"
            UpdateCommand="UPDATE CIS.CIS_TRANS SET TRANS_CD = :TRANS_CD, FUND_CD = :FUND_CD, BSA_CD = :BSA_CD, DP_TYPE = :DP_TYPE, TRANS_CD_DESC =:TRANS_CD_DESC WHERE ID = :ID">

        </asp:SqlDataSource> 
```

您还需要一个查询页面和其他一些东西，请让我知道更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T16:37:29.290

I do something like this. Quick easy and seems to work fine :

```
cmd1.Connection = this.sqlConnection1;
this.sqlConnection1.Open();

 foreach (GridViewRow row in your_grid.Rows)
        {
            Label id = (Label)row.FindControl("your_control"); //what ever control you are using

            SqlCommand cmd1 = new SqlCommand();

            cmd1.CommandText = "insert into your_table values (@p,@p1,@p2)";

            cmd1.Parameters.Add("@p", SqlDbType.VarChar).Value = your_control.Text;
            cmd1.Parameters.Add("@p1", SqlDbType.VarChar).Value = your_control.Text;
            cmd1.Parameters.Add("@p2", SqlDbType.VarChar).Value = your_control.Text;

            cmd1.CommandType = CommandType.Text;

            cmd1.ExecuteNonQuery();

        }
            this.sqlConnection1.Close(); 
```

# c# - C# httplistener begingetcontext 不会使用 msdn 示例调用回调

> ID：11856697
> 
> 赞同：0
> 
> 时间：2012-08-08T02:05:39.883
> 
> 标签：c#, multithreading, http, networking

我基本上在这里运行示例：http: [//msdn.microsoft.com/en-us/library/system.net.httplistener.begingetcontext.aspx](http://msdn.microsoft.com/en-us/library/system.net.httplistener.begingetcontext.aspx)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;

namespace Servertest
{
    class Program
    {
        static string msg;
        public static void Main(string[] prefixes)
        {
            if (!HttpListener.IsSupported)
            {
                Console.WriteLine("Windows XP SP2 or Server 2003 is required to use the HttpListener class.");
                Console.ReadLine();
                return;
            }
            // URI prefixes are required,
            // for example "http://contoso.com:8080/index/".

            //if (prefixes == null || prefixes.Length == 0)
              //  throw new ArgumentException("prefixes");

            // Create a listener.
            HttpListener listener = new HttpListener();
            // Add the prefixes.
            //foreach (string s in prefixes)
            //{
            listener.Prefixes.Add("http://*:2999/");
            //}
            listener.Start();
            Console.WriteLine("Listening...");
            // Note: The GetContext method blocks while waiting for a request.
            IAsyncResult result = listener.BeginGetContext(new AsyncCallback(ListenerCallback), listener);
            // Applications can do some work here while waiting for the 
            // request. If no work can be done until you have processed a request,
            // use a wait handle to prevent this thread from terminating
            // while the asynchronous operation completes.
            Console.WriteLine("Waiting for request to be processed asyncronously.");
            result.AsyncWaitHandle.WaitOne();
            Console.WriteLine("Request processed asyncronously.");
            Console.WriteLine(msg);
            listener.Close();
        }
        public static void ListenerCallback(IAsyncResult result)
        {
            HttpListener listener = (HttpListener)result.AsyncState;
            // Call EndGetContext to complete the asynchronous operation.
            HttpListenerContext context = listener.EndGetContext(result);
            HttpListenerRequest request = context.Request;
            // Obtain a response object.
            //Break point here doesnt even get stopped
            //Console.WriteLine(request.RawUrl) doesn't show anything either
            msg = new string(request.RawUrl.ToCharArray());
            HttpListenerResponse response = context.Response;
            // Construct a response.
            string responseString = "<HTML><BODY> Hello world!</BODY></HTML>";
            byte[] buffer = System.Text.Encoding.UTF8.GetBytes(responseString);
            // Get a response stream and write the response to it.
            response.ContentLength64 = buffer.Length;
            System.IO.Stream output = response.OutputStream;
            output.Write(buffer, 0, buffer.Length);
            // You must close the output stream.
            output.Close();

        }
    }
} 
```

RawUrl 没有被打印出来，而且 msg 也是空白的。我在回调函数中放置的断点甚至不会停止执行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T01:47:36.530

明白了，问题是 listener.Close() 是当 WaitOne() 返回时正在执行的主要函数，所以在 ListenerCallback 中它说资源已经被处理掉了。

在回调结束时也需要这个 IAsyncResult result = listener.BeginGetContext(new AsyncCallback(ListenerCallback), listener);

接受下一个请求

# javascript - 查找特定类上方列表项的第一次出现 - JQuery

> ID：11856698
> 
> 赞同：0
> 
> 时间：2012-08-08T02:05:46.013
> 
> 标签：javascript, jquery, twitter-bootstrap

所以我有一个列表，我试图在列表中选择最后一次出现的“nav-header”类，上面的唯一列表项是“活动”类。

```
<li class="nav-header"><a href="#" class="slide" id="general">Main</a></li>
<li class="general"><a href="index.php">Home</a></li>
<li class="general"><a href="faq.php">FAQ</a></li>
<li class="general"><a href="wiki.php">Wiki</a></li>
<li class="general"><a href="tos.php">TOS</a></li>
<li class="general"><a href="helpdesk.php">Help Desk</a></li>
<li class="general"><a href="development.php">Changelog</a></li>
<li class="general"><a href="tokens.php">Tokens</a></li>
<li class="general"><a href="stats.php">Stats</a></li>
<li class="nav-header"><a href="#" class="slide" id="community">Community</a></li>
<li class="community"><a href="notepad.php">Notepad</a></li>
<li class="community"><a href="messaging.php">Messaging</a></li>
<li class="community"><a href="forums/vforum.php?page=1">Main Forum</a></li>
<li class="community"><a href="cforum/vforum.php?page=1">Network Forum</a></li>
<li class="community"><a href="online.php">Currently Online</a></li>
<li class="community active"><a href="find.php">Search</a></li>
<li class="community"><a href="gm.php">Global Market</a></li>
<li class="community"><a href="bm.php">Black Market</a></li>
<li class="community"><a href="mostwanted.php">Most Wanted</a></li> 
```

例如，当“搜索”列表项处于活动状态时，我只想查找并返回社区列表项。我可以让它通过 .prevAll 函数返回 Community 和 Main ，但我一生都无法弄清楚如何只返回一个。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T02:09:56.557

尝试`:first`选择器，查看[演示](http://jsfiddle.net/4eyhJ/)。

```
$('li.active').prevAll('.nav-header:first') 
```

# c++ - 什么是 MaxDetect 1-wire 总线？

> ID：11856699
> 
> 赞同：0
> 
> 时间：2012-08-08T02:05:47.650
> 
> 标签：c++, arduino, sensors, bus, 1wire

我买了这个传感器：

[http://dlnmh9ip6v2uc.cloudfront.net/datasheets/Sensors/Weather/RHT03.pdf](http://dlnmh9ip6v2uc.cloudfront.net/datasheets/Sensors/Weather/RHT03.pdf)

并且输出是“MaxDetect 1-wire bus”，这是什么意思以及如何使用它？我试图将它连接到 arduino 并对其进行编程，但它无法正常工作，我不断收到 1 位的数据。我想我的代码是错误的。我需要为 arduino 使用 Wire-1 库吗？

```
int SensorVccPin = 8; 
int datapin = 6;
int bitcheck1;
int bitcheck2;
int temp[16];
int humidity[16];
int sensorcheck[8];

void setup()
{
  pinMode(SensorVccPin, OUTPUT);  
    pinMode(datapin, INPUT);
    Serial.begin(9600); 
}

void loop()
{
    // This is the STEP #1
    digitalWrite(SensorVccPin, HIGH);  
  delay(5000); 

    digitalWrite(SensorVccPin, LOW);
     delay(15);

  digitalWrite(SensorVccPin, HIGH);  

  delayMicroseconds(30);   

  digitalWrite(SensorVccPin, LOW);  

while(digitalRead(datapin) == 0){

      delayMicroseconds(2);   }

   while(digitalRead(datapin) == HIGH)
{
delayMicroseconds(2);   }

  // STEP #2
  for (int i = 0; i<16; i++)
  {
    while(digitalRead(datapin) == LOW)
    {
      delayMicroseconds(2); }  

    delayMicroseconds(10);

  bitcheck1 = digitalRead(datapin);   // maybe store as an array
     delayMicroseconds(17);      // 50 sec pause  // 27us = 0 bit, 70us is 1 bit data
  delayMicroseconds(15); 
  bitcheck2 = digitalRead(datapin);

  if (bitcheck1==bitcheck2)
  {temp[i]=1;
  delayMicroseconds(28); 
  }
  else
  {temp[i]=0;

  }

    }

    for (int i = 0; i<16; i++)
  {
    while(digitalRead(datapin) == LOW)
    {
      delayMicroseconds(2); }  

    delayMicroseconds(10);

  bitcheck1 = digitalRead(datapin);   // maybe store as an array
     delayMicroseconds(17);      // 50 sec pause  // 27us = 0 bit, 70us is 1 bit data
  delayMicroseconds(15); 
  bitcheck2 = digitalRead(datapin);

  if (bitcheck1==bitcheck2)
  {humidity[i]=1;
  delayMicroseconds(28); 
  }
  else
  {humidity[i]=0;

  }

    }

    for (int i = 0; i<8; i++)
  {
    while(digitalRead(datapin) == LOW)
    {
      delayMicroseconds(2); }  

    delayMicroseconds(10);

  bitcheck1 = digitalRead(datapin);   // maybe store as an array
     delayMicroseconds(17);      // 50 sec pause  // 27us = 0 bit, 70us is 1 bit data
  delayMicroseconds(15); 
  bitcheck2 = digitalRead(datapin);

  if (bitcheck1==bitcheck2)
  {sensorcheck[i]=1;
  delayMicroseconds(28); 
  }
  else
  {sensorcheck[i]=0;

  }

  delayMicroseconds(80); 

  for(int i=0; i<16; i++)
  {
   Serial.print(temp[i]); 

  }
     Serial.print("  temp  "); 

  for(int i=0; i<16; i++)
  {
   Serial.print(humidity[i]); 

  }
       Serial.print("  hum  "); 

  for(int i=0; i<8; i++)
  {
   Serial.print(sensorcheck[i]); 

  }
       Serial.print(" check   "); 

    }

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T03:08:08.263

您应该始终保持 VCC 引脚（引脚 1）为高电平。事实上，理想情况下，它应该连接到电源。您应该将**数据**引脚（引脚 2）拉高和拉低以与传感器通信，并且您应该读取**数据引脚。**您将不得不在输入和输出模式之间切换数据引脚。确保数据引脚上有一个上拉电阻，因为传感器只能将其拉低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:54:27.960

MaxDetect 1-wire 总线是MaxDetect Technology Co., Ltd. 专门设计的，它不同于Maxim/Dallas 1-wire 总线，因此不兼容Dallas 1-wire 总线。

你可以看看这个：

[http://tienda.tdrobotica.co/download/RHT03_programa.pdf](http://tienda.tdrobotica.co/download/RHT03_programa.pdf)

此致。

# ajax - CakePHP MilesJ Uploader 插件 - 通过 AJAX 上传

> ID：11856703
> 
> 赞同：1
> 
> 时间：2012-08-08T02:06:30.617
> 
> 标签：ajax, cakephp, file-upload

我正在尝试使用[MilesJ 的 CakePHP 上传插件](http://milesj.me/code/cakephp/uploader)通过 AJAX 上传文件。

```
$this->Uploader = new Uploader();
$this->Uploader->setup(array('ajaxField' => 'qqfile'));
$data = $this->Uploader->upload($this->Uploader->ajaxField); 
```

但它正在回归`false`。

我没有在常见问题解答中找到任何关于如何使用 AJAX 的内容。[从这张票](https://github.com/milesj/cake-uploader/issues/60)中阅读后，我才得到了那个代码。但我不确定这就是我应该如何使用插件来处理 AJAX。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T03:02:48.030

问题解决了。`ajaxField`必须在创建对象时传递，而不是稍后使用 setup()。

```
$this->Uploader = new Uploader(array('ajaxField' => 'qqfile'));
$data = $this->Uploader->upload($this->Uploader->ajaxField); 
```

这工作得很好。

# c# - 如何为 Activator.CreateInstance 设置字典大小？

> ID：11856708
> 
> 赞同：1
> 
> 时间：2012-08-08T02:06:50.487
> 
> 标签：c#

我想使用 Activator.CreateInstance 设置字典的初始大小，请问语法是什么？

```
var collection = Activator.CreateInstance(someDictionaryType) as IDictionary; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T02:10:02.230

如果您想[`Dictionary`使用表示容量的 int 参数调用构造函数](http://msdn.microsoft.com/en-us/library/tk84bxf4.aspx)，请传递一个`object`包含单个元素的数组 - 大小：

```
var collection = Activator.CreateInstance(someDictionaryType, new object[] {123}) as IDictionary; 
```

# ios - iOS 自定义字体限制

> ID：11856712
> 
> 赞同：4
> 
> 时间：2012-08-08T02:07:11.807
> 
> 标签：ios, fonts, limit, max

我正在创建一个应用程序，并注意到当我在手机上运行它时，在应用程序开始崩溃之前我不能添加超过 125 种字体，它在模拟器中总是运行良好。它抱怨它找不到图像、xib 文件等资源。我创建了一个具有完全不同字体集的测试应用程序，当字体计数达到 124 时它崩溃了。我查看了应用程序的内存使用情况电话，它很好。可以在应用程序中放置的自定义字体数量是否有限制？有任何想法吗？

# regex - 正则表达式：需要帮助才能满足 3 个标准

> ID：11856714
> 
> 赞同：0
> 
> 时间：2012-08-08T02:07:17.390
> 
> 标签：regex

有人可以帮我建立一个正则表达式吗？用于用户名检查

要求是

1.  字母数字
2.  任何情况
3.  On - 或 _ 允许来自非字母数字集

谢谢，维杜！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T02:11:31.550

\w 为您提供任何“单词”字符（数字、字母、任何大小写的下划线）并且 - 只是一个破折号。

```
[\w-]* 
```

[http://www.rubular.com](http://www.rubular.com)是一个测试正则表达式的好网站。它也有很好的参考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T02:12:26.183

我认为以下实现了所有三个：

```
[A-Za-z0-9\-_]* 
```

或者更好：

```
[\w\-]* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T02:12:25.737

我认为这应该满足您的要求。

```
 ([a-zA-Z-_\d]*) 
```

# php - 缺少 USPS API 尺寸

> ID：11856719
> 
> 赞同：0
> 
> 时间：2012-08-08T02:07:41.103
> 
> 标签：php, usps

我有一个小问题。我有一个从 USPS 获取费率的脚本，但问题是当我尝试输入包裹类型“LARGE”时，出现错误：

“警告！包裹缺少尺寸；无法计算邮资。附加信息：所有尺寸必须大于 0。”

有趣的是，我发送了包裹的尺寸。xml 请求如下：

```
<RateV4Request USERID="XXXXXXXXXX" PASSWORD="XXXXXXXXXXXX"> 
    <Revision>2</Revision> 
    <Package ID="0"> 
        <Service>Parcel</Service> 
        <ZipOrigination>92008</ZipOrigination> 
        <ZipDestination>92056</ZipDestination> 
        <Pounds>14</Pounds> 
        <Ounces>3</Ounces> 
        <Container>VARIABLE</Container> 
        <Size>Large</Size> 
        <Width>2.0</Width> 
        <Length>10.0</Length> 
        <Height>1.0</Height> 
        <Value>60.00</Value> 
        <Machinable>FALSE</Machinable> 
    </Package> 
</RateV4Request> 
```

我在那里想念什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:14:53.990

自从我使用 USPS API 以来已经有一段时间了，但我认为这是当你将尺寸设置为大但没有提到周长作为尺寸的一部分时。检查它有帮助..

# ios - NSMutableArray 线程安全问题 - iOS

> ID：11856723
> 
> 赞同：1
> 
> 时间：2012-08-08T02:08:31.217
> 
> 标签：ios, xcode, thread-safety, nsmutablearray

我有一个在 ASIHTTPRequest 进程中使用的 NSMutableArray。数据加载完成后，NSMutableArray 存储信息。当我将数据添加为

```
[MyArray addObject]; 
```

我没有任何错误。但是，当我将数据插入为

```
[MyArray insertObject:[UIImage imageWithData:data] atIndex:buttonTag]; 
```

我有 malloc 错误或索引超出范围异常问题。我认为这是线程安全故障。有什么解决办法吗？

编辑：在 appdelegate.h

```
 @interface{
  NSMutableArray *imageArray;
 } 
```

在 appdelegate.m

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
// Override point for customization after application launch.
imageArray = [[NSMutableArray alloc] init];
return YES;
} 
```

在 AsyncImageView.h

```
@interface{
  AppDelegate *delegate
} 
```

AsyncImageView.m

```
- (void)connectionDidFinishLoading:(NSURLConnection*)theConnection {

  delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
  [delegate.imageArray insertObject:[UIImage imageWithData:data] atIndex:buttonTag];

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T03:04:42.753

没有看到你的代码很难说，但我怀疑这是一个线程问题。当你打电话时，`insertObject:atIndex:`你必须能够保证数组中至少有那么多对象。查看您的代码并查看添加对象的位置，并确保每个场景都会导致您添加足够的`insertObject:atIndex`不会失败的对象。

希望下一个事实对您来说是显而易见的，但为了以防万一，我会指出它**不会**`initWithCapacity:`向数组添加任何元素。许多人认为确实如此，从而导致了您描述的确切问题。

 **根据您的评论，解决方案可能是使用一堆 NSNull 对象预先填充您的数组，或者使用 NSDictionary 而不是数组。

**编辑** 这是一个快速的 NSDictionary 示例：

经过进一步审查，您实际上需要一个 NSMutableDictionary，因为您正在动态更新其内容。您不能使用整数作为键，因此您必须将整数“包装”在 NSNumber 对象中。（请注意，您可以使用任何对象作为键，而不仅仅是 NSNumbers。）

像这样存储一个对象：

```
[myDictionary setObject:[UIImage imageWithData:data] forKey:[NSNumber numberWithInt:buttonTag]]; 
```

以后像这样访问它：

```
myImage = [myDictionary objectForKey:[NSNumber numberWithInt:buttonTag]]; 
```

当然，更多信息可在 Apple 的文档中或通过快速搜索“NSDictionary 示例”获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T03:29:28.053

您必须在数组边界内插入数组。您正试图插入末尾。

苹果文档：

> 如果一个数组包含两个对象，其大小为 2，因此您可以在索引 0、1 或 2 处添加对象。索引 3 是非法的且超出范围；如果您尝试在索引 3 处添加对象（当数组的大小为 2 时），NSMutableArray 会引发异常。**

# c - 在 Linux 中选择并接受延迟

> ID：11856727
> 
> 赞同：4
> 
> 时间：2012-08-08T02:09:11.873
> 
> 标签：c, linux, sockets, select

我创建了一个简单的应用程序来使用 select() 和 accept() 接受 IPv4 TCP 连接。

我使用 python 脚本来测试它。它依次打开 100 个连接。IE：

```
for i in range(100):
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    print s.connect((IP, PORT))
    s.send("Test\r\n") 
```

我观察到我的应用程序在第一个 X 连接后卡在 select() 中 2 秒。来自 strace 的输出：

```
1344391414.452208 select(30, [3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29], NULL, NULL, NULL) = 1 (in [3])
1344391416.742843 accept(3, 0, NULL)    = 30 
```

我的代码如下。知道我做错了什么吗？

```
#include <assert.h>
#include <errno.h>
#include <netinet/in.h>
#include <sys/socket.h>
#include <stdbool.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <syslog.h>
#include <unistd.h>
#include <fcntl.h>
#include <sys/select.h>

int
fd_create (void)
{
    int fd;
    int set = true;
    struct sockaddr_in addr;

    fd = socket(AF_INET, SOCK_STREAM, 0);

    setsockopt(fd, SOL_SOCKET, SO_REUSEADDR, &set, sizeof(set));

    memset(&addr, 0, sizeof(addr));
    addr.sin_family = AF_INET;
    addr.sin_port = htons(1999);
    addr.sin_addr.s_addr = INADDR_ANY;

    bind(fd, (struct sockaddr *)&addr, sizeof(addr));

    listen(fd, 1024);

    return (fd);
}

int
fd_echo (int fd)
{
    int n;
    char buffer[128 + 1];

    while ((n = recv(fd, buffer, 128, 0)) > 0);

    return (n);
}

int
main (void)
{
    int listen_fd;
    fd_set working;
    fd_set master;
    int max_fd;
    int i;
    int new_fd;
    int rc;
    int con;

    FD_ZERO(&master);
    listen_fd = fd_create();
    fcntl(listen_fd, F_SETFL, fcntl(listen_fd, F_GETFL) | O_NONBLOCK);

    max_fd = listen_fd;
    printf("%d\n", listen_fd);
    FD_SET(listen_fd, &master);
    con = 0;
    for (;;) {
    memcpy(&working, &master, sizeof(fd_set));
    select(max_fd + 1, &working, NULL, NULL, NULL);

    for (i = 0; i <= max_fd; i++) {
        if (FD_ISSET(i, &working)) {
        if (i == listen_fd) {
            while ((new_fd = accept(i, NULL, NULL)) >= 0) {
            fcntl(new_fd, F_SETFL, fcntl(new_fd, F_GETFL) | O_NONBLOCK);
            FD_SET(new_fd, &master);
            if (max_fd < new_fd) {
                max_fd = new_fd;
            }
            printf("New connection %d (%d)\n", new_fd, ++con);
            }
            if ((new_fd == -1) && (errno != EAGAIN && errno != EWOULDBLOCK)) {
            return(0);
            }
        } else {
            rc = fd_echo(i);
            if ((rc == 0) ||
            ((rc == -1) && ((errno != EAGAIN && errno != EWOULDBLOCK)))) {
            close(i);
            FD_CLR(i, &master);
            }
        }
        }
    }
    }
    return (0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T07:18:48.133

**更新/警告：**在试图证明这个答案适用时，我发现它可能不适用。我运行了测试并得到了延迟，而 max_fd 没有超过 300。我也得到了 poll() 的延迟。所以我尝试了 tcpdump 并且有重传。看起来即使 127.0.0.1 这么快就可以丢包了。在这里留下答案，因为这是一个真正的问题，即使它不是最紧迫的问题。

所以这涉及到很多文件描述符，它适用于 poll 而不是 select。有了这些线索，我可以看到解释：你已经超过了`FD_SETSIZE`极限。

来自 POSIX 的官方声明是（指`FD_ZERO`/ `FD_SET`/ `FD_CLR`/ `FD_ISSET`）：

> 如果 fd 参数小于 0 或大于或等于 FD_SETSIZE，或者 fd 不是有效的文件描述符，或者任何参数是具有副作用的表达式，则这些宏的行为是未定义的。

（来自 [http://pubs.opengroup.org/onlinepubs/9699919799/functions/select.html](http://pubs.opengroup.org/onlinepubs/9699919799/functions/select.html)）

要真正了解发生了什么，您必须比官方规范更深入地了解`fd_set`类型的实际实现。它有一个分裂的人格。在内核中， where`select`被实现，它被视为可变长度的位数组。第一个参数 to`select`用于决定数组的结束位置。如果您调用`select(2048, ...)`内核，将期望每个非 NULL`fd_set *`指向一个 256 字节（2048 位）的数组。

但是在用户空间中，`fd_set`是一个固定大小的结构。大小是`FD_SETSIZE`位，在我的系统上是 1024，可能你也是。`FD_SET`而其他宏基本上只是对数组元素进行赋值，只是它们稍微复杂一点，因为它们必须处理作为单个位的概念数组元素。因此，如果您的文件描述符之一是 1024 并且您尝试使用`FD_SET`它，那么您已经完成了相当于

```
int array[1024];
array[1024] = 1; 
```

换句话说，您破坏了 之后的内存中的任何内容`fd_set`，导致后来发生了奇怪的事情。

有办法解决这个问题。我见过旧代码`#define FD_SETSIZE somebignumber`在包含定义`fd_set`. 我不知道在哪些操作系统上有效；我刚刚尝试过，glibc 似乎忽略了它。

更好的可能性是执行类似旧的“struct hack”之类的操作，在这种情况下，您分配的 struct 具有比它更多的内存`sizeof`，并且额外的内存可用作数组中的额外元素，该数组是该结构的最后一个成员。

```
fd_set *rfds = malloc(128+sizeof *foo); /* can hold fds up to FD_SETSIZE+128*8-1 */ 
```

现在你当然需要记住当你完成它时释放它，并传递`rfds`而不是`&rfds`to`select`和`FD_*`宏，并做你自己的`memset`而不是`FD_ZERO`，并希望内核实现不会改变，因为你现在是*真实的*和它很亲密。但它工作......现在。

使用 poll 实际上可能是正确的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T04:07:38.983

所以进一步调试内核......

数据包在“tcp_v4_syn_recv_sock()”中被丢弃，因为“sk_acceptq_is_full(sk)”返回真。

"sk->sk_ack_backlog" 为 11，配置的 "sk->sk_max_ack_backlog" 为 10。（我们在 listen() 命令中设置。）

（根据 EJP 注释更新。）所以我猜发生了什么：

connect() 上的客户端阻塞。一个 SYN 被发送到服务器。内核获取 SYN 发送 SYN/ACK。客户端取回 SYN/ACK 并解除阻塞，然后 a) 发送 ACK 和 b) 一个新的 SYN/ACK。

服务器收到 ACK 并将连接放入 backlog。

这样做 10 次，我们就被卡住了。

好家伙。没有你的帮助是不会理解的。谢谢！！

# data-binding - SharePoint 中的 ASPX WebForms 扩展方法

> ID：11856728
> 
> 赞同：0
> 
> 时间：2012-08-08T02:09:13.557
> 
> 标签：data-binding, mvvm, sharepoint-2010, webforms

在 SharePoint Visual WebPart 中使用[MVVM 4 ASP](http://www.sharepointblues.com/2010/09/23/sharepoint-2010-dynamic-compilation-of-aspx-and-ascx-files-with-net-3-5/)我遇到了编译器向我显示错误的问题：

`'object' does not contain a definition for 'Bind'`

我已将包含方法的 DLL 放入 GAC（由 SP 包完成），在标记中引用程序集，并按如下方式导入命名空间：

```
<%@ Assembly Name="ASPBinding, Version=1.0.0.0, Culture=neutral, PublicKeyToken=b36aef9f99d7a844" %>
<%@ Assembly Name="Binding, Version=1.0.0.0, Culture=neutral, PublicKeyToken=b36aef9f99d7a844" %> 

<%@ Import Namespace="Binding" %> 
```

并且 IntelliSense 显示页面标记正在查看扩展方法： ![ASPX 标记视图](../Images/f312888bb95ee5942c0320ac0c6ec4f7.png)

页面编译器看到不同的东西是有原因的吗？当它位于 SharePoint 外部的普通 ASPX 页面中时，此方法有效。

* * *

**更新：**好的 - 似乎是 SharePoint 的“问题”。

开箱即用，SP2010 不使用 .Net 3.5 编译 ASPX 页面 - 它使用 .Net 2.0 编译器。谁曾想到？！..

更改 web.config 以使用 3.5 编译器允许我们调用扩展方法 ok。

[这是一篇关于如何让它工作的好帖子](http://www.sharepointblues.com/2010/09/23/sharepoint-2010-dynamic-compilation-of-aspx-and-ascx-files-with-net-3-5/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:55:18.527

好的 - 似乎是 SharePoint 的“问题”。

开箱即用，SP2010 不使用 .Net 3.5 编译 ASPX 页面 - 它使用 .Net 2.0 编译器。谁曾想到？！..

[这是一篇关于如何让它工作的好帖子](http://www.sharepointblues.com/2010/09/23/sharepoint-2010-dynamic-compilation-of-aspx-and-ascx-files-with-net-3-5/)。

# java - 当对象不在持久性上下文中时，休眠合并不查询数据库

> ID：11856731
> 
> 赞同：4
> 
> 时间：2012-08-08T02:09:36.520
> 
> 标签：java, spring, hibernate, spring-data, spring-data-jpa

我在用着：

1.  春天 3.1
2.  春季数据 JPA 1.1
3.  休眠 4.1

我有个问题。我有一个标准的 Spring Data JPA DAO：

```
public interface DnarDao extends JpaRepository<Dnar, Long> {
  // insert Spring Data magic here!
} 
```

这是`Dnar`代码：

```
@Entity
@Table(name="req_dnar", schema=SCHEMA)
@Inheritance(strategy=JOINED)
@DiscriminatorColumn(name="form_type", discriminatorType=STRING, length=64)
public abstract class Dnar {

  @Id
  @GeneratedValue(strategy=SEQUENCE, generator="dnar_gen_seq")
  @SequenceGenerator(name="dnar_gen_seq", sequenceName="req_dnar_seq")
  @Column(name=C_DNAR_ID, nullable=false)
  private Long dnarId;

  @Column(name="form_type", nullable=false, length=64)
  @Enumerated(EnumType.STRING)
  private FormType formType;
  // remainder omitted
} 
```

还有一个实现类的例子：

```
@Entity
@Table(name="req_dnar_general_lv")
@DiscriminatorValue("GENERAL_LV")
public class GeneralLvDnar extends Dnar {
  //remainder omitted
} 
```

另外，这是我的 Hibernate 的 Spring 配置：

```
<bean id="dataSource" class="oracle.jdbc.pool.OracleDataSource" destroy-method="close">
  <property name="uRL" value="${JDBC_URL}"/>
  <property name="user" value="${USER_ID}"/>
  <property name="password" value="${PASSWORD}"/>
</bean>

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
  <property name="dataSource" ref="dataSource" />
  <property name="packagesToScan">
    <list><value>com/mycomp/domain</value></list>
  </property>
  <property name="jpaVendorAdapter">
     <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
        <property name="database" value="ORACLE" />
        <property name="generateDdl" value="true" />
        <property name="showSql" value="true" />
     </bean>
  </property>
  <property name="jpaProperties">
    <props>
      <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
      <prop key="hibernate.id.new_generator_mappings">true</prop>
    </props>
  </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
  <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

<jpa:repositories base-package="com.mycomp.dao" />

<tx:annotation-driven /> 
```

**第一轮 - 问题**

DAO 的客户端是`DnarManagerImpl`类：

```
@Transactional
@Override
public Dnar save(final Dnar dnar) {

  Dnar managedDnar = dnarDao.save(dnar);
  return managedDnar;
} 
```

上面的代码有效，但它**总是**在数据库中创建一个新`dnar`行。我已经调试了 Spring Data JPA 代码，它似乎工作正常。例如，如果我保存同一个对象 3 次，那么 Hibernate 调用是：

1.  `getSession().persist(entity);`
2.  `getSession().merge(entity);`
3.  `getSession().merge(entity);`

Hibernate 为上述输出的 SQL 是：

1.  插入 ...
2.  插入 ...
3.  插入 ...

**第 2 轮 - 黑客修复**

通过一些实验，我发现我可以通过使用来告诉当前会话该实体存在`dnarDao.findOne(id);`。这解决了我的问题：

```
@Transactional
@Override
public Dnar save(final Dnar dnar) {

  // Hack to get the Dnar in the current persistence context
  if (dnar.getDnarId() != null) {
    dnarDao.findOne(dnar.getDnarId());
  }
  Dnar managedDnar = dnarDao.save(dnar);
  return managedDnar;
} 
```

Hibernate 会话调用再次是：

1.  `getSession().persist(entity);`
2.  `getSession().merge(entity);`
3.  `getSession().merge(entity);`

Hibernate 输出的 SQL 现在是正确的：

1.  插入 ...
2.  更新 ...
3.  更新 ...

**问题**

根据[Hibernate docs](http://docs.jboss.org/hibernate/entitymanager/3.6/reference/en/html_single/#d0e1356 "休眠文档")，这是如何`merge()`工作的：

1.  如果存在与当前与持久性上下文关联的具有相同标识符的托管实例，则将给定对象的状态复制到托管实例上
2.  如果当前没有与持久性上下文关联的托管实例，请尝试从数据库中加载它，或者创建一个新的托管实例
3.  返回托管实例
4.  给定的实例没有与持久化上下文相关联，它保持分离并且通常被丢弃

显然，在我的示例中，第 2 项没有发生。Hibernate 不会尝试从数据库中加载此实体。Hibernate**从不**输出选择（我的 hack 修复中的例外）。Sooo....我哪里错了？我确信 Hibernate 确实按照文档工作，只是我做了一些愚蠢的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:01:29.693

我认为问题在于您确实保存而不是 saveAndFlush。save 不保证对象被插入到数据库中，因此 Hibernate 做了 3 次插入。

**编辑**。

好的，所以来自 JPA 存储库的保存方法：它不称为创建或更新，因为它根据主键的存在更新或创建 - 查看源代码。此外，无论对象处于何种状态，save 都应该保存一个对象，这就是为什么它被称为**save**的原因，因为它不关心它是合并还是持久化，它会保存对象而不管它所处的状态。

您正在处理的另一件事是对象“平等”，它在 JPA 中是在主键级别实现的。如果在您尝试存储的对象内部有一个匹配的 ID，那么您传入的 ID => 合并，否则 => 持久。

因此，您的逻辑（几乎）完全合理。在第一种情况下 save 做了 3 次插入，因为对象的 ID（主键）还不存在。

在第二种情况下，只需将 ID 带入持久上下文中即可！第一个插入，然后是更新。

我无法完全复制您的测试用例，因为我没有时间 :(，但是，对我来说，您所看到的东西是完全有效的。

我希望一些有经验的 JPA 开发人员也能对这个问题发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:34:54.563

看这段代码：

```
@Transactional
@Override
public Dnar save(final Dnar dnar) {
  Dnar managedDnar = dnarDao.save(dnar);
  return managedDnar;
} 
```

如果您想保存新创建的对象，我认为您实际上是在做正确的事情。但是，如果您只是修改现有的，则应使用更新。如果您从会话中获得了该 dnar 实例，您就知道它存在（至少在会话范围内），因此您可以对其使用更新。如果您自己创建了对象并希望将其保存在 db 中，则应使用 save。

有一个重要的方法调用可以为您处理这个问题，称为“saveOrUpdate”，它将尝试通过调用之前不在 db 中的 save 来持久化一个实体（基于没有标识符）或调用 update如果您的实体有 id。然后，假设您的 dao 中有 saveOrupdate，您的代码将更改为此。这是 SO 中描述行为的一个很好的答案：

[休眠保存或更新行为](https://stackoverflow.com/questions/6443672/hibernate-saveorupdate-behavior)

```
@Transactional
@Override
public Dnar save(final Dnar dnar) {
   Dnar managedDnar = dnarDao.saveOrUpdate(dnar);
   return managedDnar;
} 
```

# xml - 如何通过分析 XSD 开始理解 KML

> ID：11856735
> 
> 赞同：0
> 
> 时间：2012-08-08T02:10:11.893
> 
> 标签：xml, google-maps, map, xsd

我没有使用 KML 或 XSD 的经验。我了解 KML 是什么。它是用于生成谷歌地图的 XML。

此站点提供 KML 的 XSD 信息。

我打开了 XSD 文件，我将只发布其中的一小部分，因为它很大：

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema"
  xmlns:kml="http://www.opengis.net/kml/2.2"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:xal="urn:oasis:names:tc:ciq:xsdschema:xAL:2.0"
  targetNamespace="http://www.opengis.net/kml/2.2"
  elementFormDefault="qualified"
  version="2.2.0">

  <annotation>
    <appinfo>ogckml22.xsd 2008-01-23</appinfo>
    <documentation>XML Schema Document for OGC KML version 2.2\. Copyright (c)
      2008 Open Geospatial Consortium, Inc. All Rights Reserved.
    </documentation>
  </annotation>  

  <!-- import atom:author and atom:link -->
  <import namespace="http://www.w3.org/2005/Atom"
    schemaLocation="atom-author-link.xsd"/>

  <!-- import xAL:Address -->
  <import namespace="urn:oasis:names:tc:ciq:xsdschema:xAL:2.0"
    schemaLocation="http://docs.oasis-open.org/election/external/xAL.xsd"/>

  <!-- KML field types (simple content) -->

  <simpleType name="anglepos90Type">
    <restriction base="double">
      <minInclusive value="0.0"/>
      <maxInclusive value="90.0"/>
    </restriction>
  </simpleType>

  <simpleType name="angle90Type">
    <restriction base="double">
      <minInclusive value="-90"/>
      <maxInclusive value="90.0"/>
    </restriction>
  </simpleType>

  <simpleType name="anglepos180Type">
    <restriction base="double">
      <minInclusive value="0.0"/>
      <maxInclusive value="180.0"/>
    </restriction>
  </simpleType>

  <simpleType name="angle180Type">
    <restriction base="double">
      <minInclusive value="-180.0"/>
      <maxInclusive value="180.0"/>
    </restriction>
  </simpleType>

  <simpleType name="angle360Type">
    <restriction base="double">
      <minInclusive value="-360.0"/>
      <maxInclusive value="360.0"/>
    </restriction>
  </simpleType>

  <simpleType name="altitudeModeEnumType">
    <restriction base="string">
      <enumeration value="clampToGround"/>
      <enumeration value="relativeToGround"/>
      <enumeration value="absolute"/>
    </restriction>
  </simpleType>

  <simpleType name="colorType">
    <annotation>
      <documentation><![CDATA[

        aabbggrr

        ffffffff: opaque white
        ff000000: opaque black

        ]]></documentation>
    </annotation>
    <restriction base="hexBinary">
      <length value="4"/>
    </restriction>
  </simpleType>

  <simpleType name="coordinatesType">
    <list itemType="string"/>
  </simpleType>

  <simpleType name="colorModeEnumType">
    <restriction base="string">
      <enumeration value="normal"/>
      <enumeration value="random"/>
    </restriction>
  </simpleType>

  <simpleType name="dateTimeType">
    <union memberTypes="dateTime date gYearMonth gYear"/>
  </simpleType>

  <simpleType name="displayModeEnumType">
    <restriction base="string">
      <enumeration value="default"/>
      <enumeration value="hide"/>
    </restriction>
  </simpleType>

  <simpleType name="gridOriginEnumType">
    <restriction base="string">
      <enumeration value="lowerLeft"/>
      <enumeration value="upperLeft"/>
    </restriction>
  </simpleType>
  <simpleType name="itemIconStateType">
    <list itemType="kml:itemIconStateEnumType"/>
  </simpleType>

  <simpleType name="itemIconStateEnumType">
    <restriction base="string">
      <enumeration value="open"/>
      <enumeration value="closed"/>
      <enumeration value="error"/>
      <enumeration value="fetching0"/>
      <enumeration value="fetching1"/>
      <enumeration value="fetching2"/> 
```

我真的不明白如何使用这些东西来生成地图。

我想知道您能否指出 XSD 到底是什么的正确方向，以及如何使用此文档生成漂亮的 KML 文件以显示有效的谷歌地图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:26:02.530

艰难的一个。没错，像 KML 这样的词汇表的模式往往很大，而且它们通常难以消化（以文学编程风格编写的例外情况很少见）。我不会从架构开始。网上似乎有一个 KML 教程 - 你用完了吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T13:32:00.963

我之前也遇到过同样的情况，Google 提供的[KML 教程](https://developers.google.com/kml/documentation/kml_tut)和参考文档对我帮助很大。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T14:48:27.360

@Артём，一旦您开始开发一些 KML 示例，您可以使用 Galdos 慷慨提供的 KML 验证器来检查它们的正确性：[http](http://www.kmlvalidator.com/home.htm) ://www.kmlvalidator.com/home.htm 。当验证器发现问题时，它会给你有用的提示来解决问题。（验证器部分使用[KML 2.2.0 XSD 模式](http://schemas.opengis.net/kml/2.2.0/ogckml22.xsd)来完成其工作。）

# regex - htaccess reg ex 将斜杠添加到目录，但不添加一些 drupal 别名

> ID：11856743
> 
> 赞同：1
> 
> 时间：2012-08-08T02:11:10.817
> 
> 标签：regex, .htaccess, drupal, mod-rewrite

我对 reg ex 非常陌生，并且有许多 drupal 别名，包括出于 SEO 原因我想保留的一些遗留 .html 文件（别名）。我需要在虚拟目录上强制使用斜线，并且在 .html 别名上强制不使用斜线。

到目前为止，我有这段代码将斜杠添加到目录而不是 .html，但它仍然允许用户或代理转到 .html/ - 非常感谢重写此斜杠的删除或 404 的任何帮助。

```
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
#is not an htm/l file
RewriteCond %{REQUEST_URI} !\.html?$ [NC]
#does not end with a slash
RewriteCond %{REQUEST_URI} !/$ 
RewriteRule ^(.+)$ http://www.example.com/$1/ [L,R=301] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:00:08.107

尝试在下面添加这个`RewriteBase`：

```
RewriteRule ^(.*)(\.html?)/$ /$1$2 [R=301,L] 
```

# castle-windsor - 遇到 Castle Windsor 和 Web API RC 的问题

> ID：11856746
> 
> 赞同：1
> 
> 时间：2012-08-08T02:11:44.590
> 
> 标签：castle-windsor, asp.net-mvc-4

好的，所以我看了很多关于如何让 DI 使用 Web API 的帖子。尝试做简单的ctor注入。我在此处粘贴的内容有效，但这并不意味着我对此感到满意。如果有人有什么建议，请发出声音。

看来我们不必控制 WEB API 中的控制器创建，这让我质疑依赖关系的正确释放。我将事物设置为范围，您将通过查看代码来了解。我们被迫使用 IDependencyResolver，我认为这很糟糕，但这是我能找到的唯一解决方法，因为我尝试使用 IControllerActivator 的其他钩子似乎都不起作用。

见代码。

```
public class WindsorWeApiResolver:WindsorWebApiDependencyScope,IDependencyResolver
{
    private readonly IWindsorContainer _container;

    public WindsorWeApiResolver(IWindsorContainer container) : base(container)
    {
        _container = container;
    }

    public IDependencyScope BeginScope()
    {
        return new WindsorWebApiDependencyScope(_container);
    }
}
public class WindsorWebApiDependencyScope:IDependencyScope
{
    private readonly IWindsorContainer _container;
    private readonly IDisposable _scope;

    public WindsorWebApiDependencyScope(IWindsorContainer container)
    {
        _container = container;
        _scope = _container.BeginScope();
    }

    public void Dispose()
    {
        _scope.Dispose();
    }

    public object GetService(Type serviceType)
    {
        return _container.Kernel.HasComponent(serviceType) ? _container.Resolve(serviceType) : null;

    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        return _container.ResolveAll(serviceType).Cast<object>().ToArray();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T22:04:46.457

我同意 IDependencyResolver 并不理想。我试图通过使用 Typed Factory Facility 作为范围来否定缺少发布方法，而不与 MVC 抗争。在这里查看[我的帖子](https://stackoverflow.com/questions/11639169/asp-net-mvc-4-rc-with-castle-windsor)。您的控制器可以像往常一样采用构造函数参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:14:54.403

您可以找到构造函数注入实现示例：

[http://nikosbaxevanis.com/2012/07/16/using-the-web-api-dependency-resolver-with-castle-windsor-scoped-lifetime/](http://nikosbaxevanis.com/2012/07/16/using-the-web-api-dependency-resolver-with-castle-windsor-scoped-lifetime/)

# c++ - g++ makefile，包含错误，没有这样的文件或目录

> ID：11856753
> 
> 赞同：0
> 
> 时间：2012-08-08T02:12:53.167
> 
> 标签：c++, include, makefile, g++, include-path

我正在尝试包含以下标题：

```
#include <libs/serialization/example/portable_binary_iarchive.hpp>
#include <libs/serialization/example/portable_binary_oarchive.hpp> 
```

这些文件位于如下路径中：

```
/home/nobody/boost_1_45_0/libs/serialization/example/portable_binary_iarchive.hpp 
```

在我的 Makefile 中，我添加了：

```
-I/home/nobody/boost_1_45_0/libs 
```

但是，当我编译时，我收到如下错误消息：

```
error: libs/serialization/example/portable_binary_iarchive.hpp: No such file or directory 
```

谁能告诉我我在这里做错了什么？我还包括提升库，如

```
#include <boost/archive/binary_oarchive.hpp> 
```

但是，要获得这些，在我的 Makefile 中就足够了：

```
-I/usr/include/boost 
```

为什么这不适用于其他位置的标题？我应该如何更改我的 Makefile？当前的第一条语句如下所示：

```
test: test.o 
    g++ -O3 -ffast-math -funroll-loops -ansi -pedantic-errors -L/usr/lib -lboost_filesystem -lboost_serialization -lboost_iostreams -lz -I/usr/include/boost -I/home/nobody/boost_1_45_0/libs -o test test.o 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:26:32.493

要得到

```
#include <libs/serialization/example/portable_binary_iarchive.hpp> 
```

从目录

```
/home/nobody/boost_1_45_0/libs/serialization/example/portable_binary_iarchive.hpp 
```

你的 Makefile 需要

```
-I/home/nobody/boost_1_45_0 
```

请注意，我从最后省略了`/libs`。那是因为您的`#include`指令已经列出了该目录。

* * *

至于你的第二个例子，是你想要在这个位置的文件：

```
/usr/include/boost/boost/archive/binary_oarchive.hpp
                   ^^^^^ (repeated boost here) 
```

如果不是，g++ 可能会默认`/usr/include`为

```
#include <boost/archive/binary_oarchive.hpp> 
```

即，你的

```
-I/usr/include/boost 
```

对编译器没用。

# windows - unix / windows上的keepalive超时

> ID：11856756
> 
> 赞同：2
> 
> 时间：2012-08-08T02:13:19.497
> 
> 标签：windows, unix, tcp

当连接由于保活活动而中断时，aix/linux 上返回的错误是什么？它是可以与其他套接字错误区分开来的唯一错误代码吗？

在 Windows 上，这可以是[WSAECONNRESET 或 WSAENETRESET](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740668%28v=vs.85%29.aspx)。

当返回 WSAECONNRESET 时，有没有办法区分由于保活活动引起的错误？

> WSAECONNRESET 10054 连接被对等方重置。现有连接被远程主机强行关闭。如果远程主机上的对等应用程序突然停止，主机重新启动，主机或远程网络接口被禁用，或者远程主机使用硬关闭，这通常会导致（有关远程主机上 SO_LINGER 选项的更多信息，请参阅 setsockopt插座）。如果在一个或多个操作正在进行时，由于保活活动检测到故障而导致连接中断，则也可能导致此错误。正在进行的操作因 WSAENETRESET 而失败。后续操作因 WSAECONNRESET 而失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:36:29.307

> 当返回 WSAECONNRESET 时，有没有办法区分由于保活活动引起的错误？

否。在所有情况下，基本条件都是“连接重置”。

# c# - 如何为绑定的枚举值添加空间？

> ID：11856757
> 
> 赞同：0
> 
> 时间：2012-08-08T02:13:19.817
> 
> 标签：c#, wpf, data-binding, combobox, typeconverter

在帖子[中，我如何使用枚举值的自定义字符串格式设置枚举绑定组合框？](https://stackoverflow.com/questions/796607/how-do-i-override-tostring-in-c-sharp-enums)和[How to set space on Enum](https://stackoverflow.com/questions/1101872/how-to-set-space-on-enum)展示了如何向 Enum 值添加描述，以便能够添加在将组合框绑定到字符串值时可用的空格。我的情况是这个组合框的选定项也绑定到另一个控件。使用我通过该链接找到的解决方案，我得到的所选项目的值仍然是没有空格的 Enum 的值。

我的枚举如下所示

```
[TypeConverter(typeof(EnumToStringUsingDescription))]
public enum SCSRequestType {       
   [Description ("Change Request")]
   ChangeRequest = 4,

   [Description("Documentation")]
   Documentation = 9,....
} 
```

而且我正在使用下面的类型转换器。

```
public class EnumToStringUsingDescription : TypeConverter
{
    public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
    {
        return (sourceType.Equals(typeof(Enum)));
    }

    public override bool CanConvertTo(ITypeDescriptorContext context, Type destinationType)
    {
        return (destinationType.Equals(typeof(String)));
    }

    public override object ConvertFrom(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value)
    {
        return base.ConvertFrom(context, culture, value);
    }

    public override object ConvertTo(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value, Type destinationType)
    {
        if (!destinationType.Equals(typeof(String)))
        {
            throw new ArgumentException("Can only convert to string.", "destinationType");
        }

        if (!value.GetType().BaseType.Equals(typeof(Enum)))
        {
            throw new ArgumentException("Can only convert an instance of enum.", "value");
        }

        string name = value.ToString();
        object[] attrs =
            value.GetType().GetField(name).GetCustomAttributes(typeof(DescriptionAttribute), false);
        return (attrs.Length > 0) ? ((DescriptionAttribute)attrs[0]).Description : name;
    }
} 
```

我在这里遗漏了什么，我如何强制组合框的选定项目成为枚举值描述的值。我也对替代品持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T02:30:30.560

或者你可以设置一个扩展。在命名空间的顶层创建`public static class Extensions`。在那里你创建这个方法：

```
public static string getDescription(this SCSRequestType scs)
{
    switch (scs)
    {
        case SCSRequestType.ChangeRequest:
            return "Change Request";
        case SCSRequestType.Documentation:
            return "Documentation";
        default:
            return null;
    }
} 
```

最后，您调用`string description = SCSRequestType.ChangeRequest.getDescription();`以访问描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T02:16:10.923

我发现的最好方法是在这篇[文章](https://stackoverflow.com/questions/58743/databinding-an-enum-property-to-a-combobox-in-wpf)中。它创建一个标记扩展，然后您只需绑定到您的组合框。

# c# - 我们应该使用 ICollection 在接口和集合中 在课堂里？

> ID：11856762
> 
> 赞同：5
> 
> 时间：2012-08-08T02:15:03.810
> 
> 标签：c#, collections

我有一个接口和一个实现它的类。现在我想在这个类中收集一些东西。Sholud 我在其**接口**部分使用**ICollection**并在具体**类部分使用****Collection**吗？

 ******在这两个部分中使用 ICollection 是更好的做法和更灵活的做法吗？

另外：我说的“东西”我想在我的课堂上保留它们的集合，它们也是我拥有的其他一些类的对象，这些类再次有自己的接口。那么最好的做法是什么？当我想将它们保存在集合中时，我什至应该使用这些类的接口类型吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:19:53.150

如果你可以暴露一个接口而不是一个类，那么就暴露接口；仅在必须这样做时才公开类，例如，公开接口上不可用的方法。你应该在你的界面和课堂上都这样做。

基本原理是信息隐藏是一件*“好事”*，所以如果你能做到而不失一般性，你应该这样做。******

# macos - OSX 通知中心图标

> ID：11856766
> 
> 赞同：25
> 
> 时间：2012-08-08T02:15:35.243
> 
> 标签：macos, nsnotificationcenter, osx-mountain-lion

我第一次使用 OSX 的通知中心 API，似乎无法弄清楚如何让我的应用程序图标显示在通知徽章中。

默认的“您的应用没有图标”图标不断出现：
![](../Images/fb54c7633daa9ba632b5d2776912f4e9.png)

这是我到目前为止所做的

*   我创建了一个包含 512、256、128、32 和 16px 版本的 icns 文件
*   将图标拖到目标摘要的“应用程序图标”部分
*   我确保选中该框以将图标复制到项目中
*   plist 的“图标文件”部分引用了正确的图标名称（减去 .icns）部分

有任何想法吗？当我通过 Xcode 运行应用程序或导出存档时，该图标不会显示。

我还从 Sparrow.app 中提取了 Sparrow.icns 文件，并尝试使用该文件而不是我制作的文件。那也没有用。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-12-16T06:37:56.627

我能够通过增加构建目标的常规部分中的内部版本号来解决此问题。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-11T06:21:47.227

您可以强制通知中心刷新所有图标，方法是删除通知中心数据库文件 ( `~/Library/Application Support/NotificationCenter/SOME_UUID.db`)，然后终止通知中心进程（例如，从活动监视器）。

不幸的是，这具有删除您的通知历史记录的副作用，但这对我来说并不是什么大问题。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-08T03:11:38.557

实际上，Apple 的开发者论坛（[链接](https://devforums.apple.com/message/691390#691390)，有访问权限的人的[链接](https://devforums.apple.com/message/705991#705991)）上一直在讨论这个问题。据我所知，目前还没有真正的解决方案，但您可以尝试以下方法：

*   更改您应用的捆绑包 ID，然后重试。如果你改变它，清理你的应用程序，然后改回来，有些人报告说他们的图标显示成功了。
*   以其他用户身份登录。通知中心使用的缓存可能是每个用户的，因此您可能能够以不同的人的身份获得正确图标的通知。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-08-31T19:56:25.647

OSX 10.10+ 的文件夹位置已移动。

以下命令将您带到其新位置：

```
$ cd `getconf DARWIN_USER_DIR`/com.apple.notificationcenter/db 
```

进而

```
$ open . 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-29T18:10:44.777

我设法让图标显示的最简单方法是更改​​项目中的捆绑标识符。这适用于 OSX 10.10.5 和 XCode 7.2

（一旦通知中心接收到更改，如果您已经有与之关联的配置文件，您可以将其更改回您的原始捆绑标识符）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-26T06:56:07.940

我通过归档我的应用程序并将副本添加到我的应用程序文件夹解决了这个问题。当应用程序位于应用程序文件夹中时，即使您从 XCode 运行应用程序，该图标也始终可见...

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-09-20T12:37:08.873

我尝试了上述所有建议，但在 10.14 上唯一对我有用的是删除 DerivedData：

`rm -rf ~/Library/Developer/Xcode/DerivedData`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-05-12T11:15:20.823

如果有人仍然有这个问题，并且上述方法都没有奏效，我是这样解决的：

1.  `Notifications`从以下打开`System Preference`（最简单的方法是打开`Alfred`or`spotlight`并输入`Notifications`）
2.  找到您的应用程序并将其删除（按`backspace`/`delete`按钮）

注意：这可能会删除所有通知

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-03T09:58:59.450

我正在使用 Xcode 11.5，我遇到了同样的问题。在我的情况下，清理构建输出、关闭并重新打开项目就足够了。然后重新构建并让它再次运行。之后图标就在那里。

旁注：`assets.xcassets`除了 1024 x 1024 像素外，我已经在文件中放置了每个大小的应用程序图标。不知道这是否相关。希望有帮助。

# php - PHP 下拉菜单请选择选项

> ID：11856772
> 
> 赞同：0
> 
> 时间：2012-08-08T02:16:45.033
> 
> 标签：php, html

如果选择了这个特定值，我如何使用 PHP 来引发错误？

`<option>Please Select</option>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:24:01.120

检查是否`$_POST`为空
Html：

```
<select name="category">
     <option value="">Please Select</option>
     <option value="1">Category 1</option>
     <option value="2">Category 2</option>
</select> 
```

和 php：

```
if (empty($_POST['category']) && isset($_POST['category'])) {
        echo 'Error, select category';
        exit;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T03:53:17.360

你可以试试这个：

***HTML***

```
<select name="selectoption">
     <option value="">Please Select</option>
</select> 
```

***PHP***

```
if (isset($_POST['selectoption']) && $_POST['selectoption'] == '' ) {
   echo 'Error, select an options';
   exit;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T02:21:30.810

也给它一个值，并检查你的php中的值`$_POST['foo']`

```
<select name="foo">
<option value="0">Please Select</option>
...
</select> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T03:03:27.513

对我来说这是更好的方法：

```
if (isset($_POST['category']) && $_POST['category'] == '' ) {
       echo 'Error, select category';
       exit;
} 
```

# javascript - 异步构造函数

> ID：11856778
> 
> 赞同：52
> 
> 时间：2012-08-08T02:17:23.170
> 
> 标签：javascript, node.js, asynchronous, constructor

我怎样才能最好地处理如下情况？

我有一个需要一段时间才能完成的构造函数。

```
var Element = function Element(name){
   this.name = name;
   this.nucleus = {};

   this.load_nucleus(name); // This might take a second.
}

var oxygen = new Element('oxygen');
console.log(oxygen.nucleus); // Returns {}, because load_nucleus hasn't finished. 
```

我看到三个选项，每个选项看起来都不寻常。

**一**、给构造函数添加回调。

```
var Element = function Element(name, fn){
   this.name = name;
   this.nucleus = {};

   this.load_nucleus(name, function(){
      fn(); // Now continue.
   });
}

Element.prototype.load_nucleus(name, fn){
   fs.readFile(name+'.json', function(err, data) {
      this.nucleus = JSON.parse(data); 
      fn();
   });
}

var oxygen = new Element('oxygen', function(){  
   console.log(oxygen.nucleus);
}); 
```

**二**，使用 EventEmitter 来发出一个 'loaded' 事件。

```
var Element = function Element(name){
   this.name = name;
   this.nucleus = {};

   this.load_nucleus(name); // This might take a second.
}

Element.prototype.load_nucleus(name){
   var self = this;
   fs.readFile(name+'.json', function(err, data) {
      self.nucleus = JSON.parse(data); 
      self.emit('loaded');
   });
}

util.inherits(Element, events.EventEmitter);

var oxygen = new Element('oxygen');
oxygen.once('loaded', function(){
   console.log(this.nucleus);
}); 
```

**或者三**，阻塞构造函数。

```
var Element = function Element(name){
   this.name = name;
   this.nucleus = {};

   this.load_nucleus(name); // This might take a second.
}

Element.prototype.load_nucleus(name, fn){
   this.nucleus = JSON.parse(fs.readFileSync(name+'.json'));
}

var oxygen = new Element('oxygen');
console.log(oxygen.nucleus) 
```

但我以前从未见过这样做过。

我还有什么其他选择？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-07-07T12:18:05.403

更新 2：这是一个使用异步工厂方法的更新示例。注意，如果在浏览器中运行，这需要 Node 8 或 Babel。

```
class Element {
    constructor(nucleus){
        this.nucleus = nucleus;
    }

    static async createElement(){
        const nucleus = await this.loadNucleus();
        return new Element(nucleus);
    }

    static async loadNucleus(){
        // do something async here and return it
        return 10;
    }
}

async function main(){
    const element = await Element.createElement();
    // use your element
}

main(); 
```

更新：下面的代码得到了几次投票。但是我发现这种方法使用静态方法要好得多： [https ://stackoverflow.com/a/24686979/2124586](https://stackoverflow.com/a/24686979/2124586)

使用 Promise 的 ES6 版本

```
class Element{
    constructor(){
        this.some_property = 5;
        this.nucleus;

        return new Promise((resolve) => {
            this.load_nucleus().then((nucleus) => {
                this.nucleus = nucleus;
                resolve(this);
            });
        });
    }

    load_nucleus(){
        return new Promise((resolve) => {
            setTimeout(() => resolve(10), 1000)
        });
    }
}

//Usage
new Element().then(function(instance){
    // do stuff with your instance
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-08T02:54:48.643

鉴于在 Node 中避免阻塞的必要性，事件或回调的使用并不奇怪^((1))。

稍加编辑二，您可以将其与一合并：

```
var Element = function Element(name, fn){
    this.name = name;
    this.nucleus = {};

    if (fn) this.on('loaded', fn);

    this.load_nucleus(name); // This might take a second.
}

... 
```

虽然，就像`fs.readFile`在您的示例中一样，核心 Node API（至少）通常遵循静态函数的模式，这些函数在数据准备好时公开实例：

```
var Element = function Element(name, nucleus) {
    this.name = name;
    this.nucleus = nucleus;
};

Element.create = function (name, fn) {
    fs.readFile(name+'.json', function(err, data) {
        var nucleus = err ? null : JSON.parse(data);
        fn(err, new Element(name, nucleus));
    });
};

Element.create('oxygen', function (err, elem) {
    if (!err) {
        console.log(elem.name, elem.nucleus);
    }
}); 
```

* * *

(1) 读取 JSON 文件应该不会花费很长时间。如果是这样，也许存储系统的更改是为了数据。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-24T23:59:34.533

我开发了一个异步构造函数：

```
function Myclass(){
 return (async () => {
     ... code here ...
     return this;
 })();
}

(async function() { 
 let s=await new Myclass();
 console.log("s",s)
})(); 
```

*   [异步返回一个承诺](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function "异步关键字")
*   [箭头函数按原样传递“this”](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions "更多关于箭头函数")
*   执行 new 时可能会返回其他内容（您仍然会在此变量中获得一个新的空对象。如果您在没有 new 的情况下调用该函数。您会得到原始的 this。可能是 window 或 global 或其持有对象）。
*   可以使用 await 返回被调用的异步函数的返回值。
*   要在普通代码中使用 await，需要使用异步匿名函数包装调用，该函数会立即调用。（被调用的函数返回承诺并且代码继续）

**我的第一次迭代是：**

也许只是添加一个回调

调用匿名异步函数，然后调用回调。

```
function Myclass(cb){
 var asynccode=(async () => { 
     await this.something1();
     console.log(this.result)
 })();

 if(cb)
    asynccode.then(cb.bind(this))
} 
```

**我的第二次迭代是：**

让我们尝试使用 Promise 而不是回调。我心想：奇怪的承诺回报了承诺，它奏效了。..所以下一个版本只是一个承诺。

```
function Myclass(){
 this.result=false;
 var asynccode=(async () => {
     await new Promise (resolve => setTimeout (()=>{this.result="ok";resolve()}, 1000))
     console.log(this.result)
     return this;
 })();
 return asynccode;
}

(async function() { 
 let s=await new Myclass();
 console.log("s",s)
})(); 
```

**基于回调的旧 javascript**

```
function Myclass(cb){
 var that=this;
 var cb_wrap=function(data){that.data=data;cb(that)}
 getdata(cb_wrap)
}

new Myclass(function(s){

}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-08T02:54:01.340

您可以做的一件事是预加载所有核（可能效率低；我不知道它有多少数据）。如果预加载不是一个选项，我会推荐另一个，它将涉及带有缓存的回调以保存加载的核。这是这种方法：

```
Element.nuclei = {};

Element.prototype.load_nucleus = function(name, fn){
   if ( name in Element.nuclei ) {
       this.nucleus = Element.nuclei[name];
       return fn();
   }
   fs.readFile(name+'.json', function(err, data) {
      this.nucleus = Element.nuclei[name] = JSON.parse(data); 
      fn();
   });
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-17T11:33:31.280

这是一个糟糕的代码设计。

主要问题是在你的实例的回调中它还没有执行“返回”，这就是我的意思

```
var MyClass = function(cb) {
  doAsync(function(err) {
    cb(err)
  }

  return {
    method1: function() { },
    method2: function() { }
  }
}

var _my = new MyClass(function(err) {
  console.log('instance', _my) // < _my is still undefined
  // _my.method1() can't run any methods from _my instance
})
_my.method1() // < it run the function, but it's not yet inited 
```

因此，好的代码设计是在实例化类之后显式调用“init”方法（或在您的情况下为“load_nucleus”）

```
var MyClass = function() {
  return {
    init: function(cb) {
      doAsync(function(err) {
        cb(err)
      }
    },
    method1: function() { },
    method2: function() { }
  }
}

var _my = new MyClass()
_my.init(function(err) { 
   if(err) {
     console.error('init error', err)
     return
   } 
   console.log('inited')
  // _my.method1()
}) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-05T09:32:43.250

我将异步部分提取为流利的方法。按照惯例，我将它们称为一起。

```
class FooBar {
  constructor() {
    this.foo = "foo";
  }

  async create() {
    this.bar = await bar();

    return this;
  }
}

async function bar() {
  return "bar";
}

async function main() {
  const foobar = await new FooBar().create(); // two-part constructor
  console.log(foobar.foo, foobar.bar);
}

main(); // foo bar
```

我尝试了一种静态工厂方法包装`new FooBar()`，例如`FooBar.create()`，但它在继承方面表现不佳。如果你扩展`FooBar`到`FooBarChild`，`FooBarChild.create()`仍然会返回一个`FooBar`。而我的方法`new FooBarChild().create()`将返回 a`FooBarChild`并且很容易使用`create()`.

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-05-26T18:40:44.600

[您可以通过nsynjs](https://github.com/amaksr/nsynjs)同步运行带有异步函数的构造函数。下面是一个例子来说明：

index.js（主应用逻辑）：

```
var nsynjs = require('nsynjs');
var modules = {
    MyObject: require('./MyObject')
};

function synchronousApp(modules) {
    try {
        var myObjectInstance1 = new modules.MyObject('data1.json');
        var myObjectInstance2 = new modules.MyObject('data2.json');

        console.log(myObjectInstance1.getData());
        console.log(myObjectInstance2.getData());
    }
    catch (e) {
        console.log("Error",e);
    }
}

nsynjs.run(synchronousApp,null,modules,function () {
        console.log('done');
}); 
```

MyObject.js（具有慢构造函数的类定义）：

```
var nsynjs = require('nsynjs');

var synchronousCode = function (wrappers) {
    var config;

    // constructor of MyObject
    var MyObject = function(fileName) {
        this.data = JSON.parse(wrappers.readFile(nsynjsCtx, fileName).data);
    };
    MyObject.prototype.getData = function () {
        return this.data;
    };
    return MyObject;
};

var wrappers = require('./wrappers');
nsynjs.run(synchronousCode,{},wrappers,function (m) {
    module.exports = m;
}); 
```

wrappers.js（带有回调的慢函数周围的 nsynjs 感知包装器）：

```
var fs=require('fs');
exports.readFile = function (ctx,name) {
    var res={};
    fs.readFile( name, "utf8", function( error , configText ){
        if( error ) res.error = error;
        res.data = configText;
        ctx.resume(error);
    } );
    return res;
};
exports.readFile.nsynjsHasCallback = true; 
```

可以在此处找到此示例的完整文件集：[https ://github.com/amaksr/nsynjs/tree/master/examples/node-async-constructor](https://github.com/amaksr/nsynjs/tree/master/examples/node-async-constructor)

# python - python的便携式GAE bigtable抽象？

> ID：11856779
> 
> 赞同：2
> 
> 时间：2012-08-08T02:17:28.563
> 
> 标签：python, google-app-engine, bigtable

我正在设计一个新的 GAE python 应用程序，并希望以允许自托管的方式设计它。

很多 Web 框架都是平台中立的，但是当涉及到数据库时，我很难找到任何适用于 GAE 和其他东西（任何东西）的 NoSql 抽象。

我看到的唯一解决方案：

AppScale [http://code.google.com/p/appscale/](http://code.google.com/p/appscale/)：
模拟数据存储 API 的虚拟机。最大的问题是需要虚拟机，所以只适合超大企业级开发。虽然这可能是最好的解决方案......

Django-norel [http://www.allbuttonspressed.com/projects/django-nonrel](http://www.allbuttonspressed.com/projects/django-nonrel)：
一些 GAE 特有的怪异，但似乎可以管理。主要缺点是被迫使用 django，（我倾向于金字塔）

**所以我的问题是：**还有其他潜在的解决方案吗？允许从 bigtable 重新定位到 couchdb 或另一个 nosql 数据库的“轻量级”抽象将是理想的。

PS：我知道我可以使用 Google cloud-sql（托管 mysql 实例），但我希望专注于 nosql。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:02:50.780

[TyphoonAE](http://code.google.com/p/typhoonae/)包含一个用于数据存储的[MongoDB 存根](http://code.google.com/p/typhoonae/source/browse/src/typhoonae/mongodb/datastore_mongo_stub.py)，官方 SDK 包含一个[SQLlite 存根](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/datastore/datastore_sqlite_stub.py)

# python - Django抱怨用户名字段不是唯一的

> ID：11856780
> 
> 赞同：0
> 
> 时间：2012-08-08T02:17:34.963
> 
> 标签：python, django

我有一个使用不使用 JSON 的 ajax 调用的网站（因为该网站太小了）。它首先检查用户是否通过他们的电子邮件注册，如果没有，JS 会在他们登录之前提示他们提供更多信息。这应该在某种程度上确保用户名始终是唯一的，因为如果没有，它会重定向你要另当别论。不知何故，我输入来测试它的每个用户名最终都会出现以下错误`column username is not unique`

```
def log_in_pass_match(form):
    cleaned = form.cleaned_data
    if cleaned['password'] == cleaned['password2']:
        return True
    else:
        return False

def log_in_is_bbn(form):
    email_bbn = form.cleaned_data['username'].split("@")
    if 'bbns.org' == email_bbn[1]:
        return True
    else:
        return False

def log_in_is_new_form(r):
    if "TN" in r:
        return True
    else:
        return False

def log_in_already_user(form):
    form.is_valid
    user_object = User.objects.filter(email = form.cleaned_data['username'])
    if user_object.exists():
        return True
    else:
        return False

def log_in_send_act(form):
    cleaned = form.cleaned_data
    msg = "To activate your account, please click the following link:<a href='"+get_random_word()+"'>Click Here</a>"
    send_mail('Activate', msg, '****@gmail.com', [cleaned['username']], fail_silently=False)
    new_user_object = User.objects.create_user(
        username=cleaned['username'],
        password=cleaned['password'],
        email=cleaned['username']
    )

def log_in_form_check(form, error):
    if form.is_valid():
        return True
    else:
        for n in form._errors:
            for e in form._errors[n]:
                error.append(e)
        return False    
def user_log_in(request):
    error = []
    form = log_in(request.POST)
    form_check = log_in_form_check(form, error)
    if form_check:
        if not log_in_already_user(form):
            form = new_user(request.POST)
            if log_in_is_new_form(request.POST):
                form_is_valid = True
                other_is_valid = True
                if form.is_valid():
                    if log_in_is_bbn(form = form) and log_in_pass_match(form = form):
                        other_is_valid = True
                    else:
                        other_is_valid = False
                else:
                    form_is_valid = False

                if form_is_valid and other_is_valid:
                    msg = "In order to activate your account at Knights of the Round Table, please click on this link:"
                    #try:
                    log_in_send_act(form = form)
                    print form.cleaned_data['username']
                    user_object = User.objects.create_user(
                        username=form.cleaned_data['username'],
                        password=form.cleaned_data['password'],
                        email=form.cleaned_data['username']
                    )
                    new_user_profile = user_object.get_profile()
                    new_user_profile.pen_name = form.cleaned_data['pen_name']
                    new_user_profile.activated = False;
                    new_user_profile.save()
                    return HttpResponse("not_act")
                    #except:
                    #    error.append("Error sending email")
                else:
                    if not other_is_valid and log_in_is_new_form(request.POST):
                        if not log_in_is_bbn(form = form):
                            error.append('BBN email addresses only.')
                        if not log_in_pass_match(form = form):
                            error.append('Passwords do not match')
                    for n in form._errors:
                        for e in form._errors[n]:
                            error.append(e)
            else:
                return HttpResponse("n_usr")
        elif form_check:
            logged_in_user = auth.authenticate(username=form.cleaned_data['username'], password=form.cleaned_data['password'])
            if logged_in_user is not None:
                if logged_in_user.get_profile().activated:
                    auth.login(request, logged_in_user)
                    return HttpResponseRedirect("")
                else:
                    return HttpResponse("not_act")
            else:
                error.append('Password Incorrect')
    errors_template = Template("{% for e in errors %}<li>{{ e }}</li> {% endfor %}")
    errors_html = errors_template.render(Context({'errors':error}))
    return HttpResponse(errors_html) 
```

模型.py：

```
def create_user_info(sender, instance, created, **kwargs):
    if created:
        UserInfo.objects.create(user=instance)

post_save.connect(create_user_info, sender=User)

class UserInfo(models.Model):
    user = models.OneToOneField(User, related_name='info')
    pen_name = models.CharField(max_length=30)
    activated = models.BooleanField()
    activation_key = models.CharField(max_length=40)
    def __unicode__(self):
        return self.email + '-' + self.pen_name 
```

这是完整的错误：

```
 IntegrityError at /ajax/login
column username is not unique

Request Method: POST
Request URL: http://127.0.0.1:8000/ajax/login
Django Version: 1.4
Python Executable: /Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python
Python Version: 2.7.3
Python Path: ['/Users/Mike/Desktop/Main/Django-Development/BBN', '/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages', '/Library/Python/2.7/site-packages']
Server time: Tue, 7 Aug 2012 22:34:35 -0400
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'Knights',
 'django.contrib.admin')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Users/Mike/Desktop/Main/Django-Development/BBN/Knights/views.py" in user_log_in
  109\.                         email=form.cleaned_data['username']
File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/contrib/auth/models.py" in create_user
  160\.         user.save(using=self._db)
File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/db/models/base.py" in save
  463\.         self.save_base(using=using, force_insert=force_insert, force_update=force_update)
File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/db/models/base.py" in save_base
  551\.                 result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/db/models/manager.py" in _insert
  203\.         return insert_query(self.model, objs, fields, **kwargs)
File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/db/models/query.py" in insert_query
  1576\.     return query.get_compiler(using=using).execute_sql(return_id)
File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/db/models/sql/compiler.py" in execute_sql
  910\.             cursor.execute(sql, params)
File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/db/backends/util.py" in execute
  40\.             return self.cursor.execute(sql, params)
File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/db/backends/sqlite3/base.py" in execute
  337\.             return Database.Cursor.execute(self, query, params)

Exception Type: IntegrityError at /ajax/login
Exception Value: column username is not unique
Request information:
GET: No GET data

POST:
username = u'mgodfd@bbns.org'
TN = u'TN'
password2 = u'fff'
password = u'fff'
pen_name = u'fff'

FILES: No FILES data

COOKIES:
csrftoken = 'Df1jB3708JUgretV8PSmRQ6NFQGI3wzL'
sessionid = 'c5eab78e2c73ff493056044d4e4362ba'

META:
RUN_MAIN = 'true'
HTTP_REFERER = 'http://127.0.0.1:8000/login/'
SERVER_PROTOCOL = 'HTTP/1.1'
SERVER_SOFTWARE = 'WSGIServer/0.1 Python/2.7.3'
TERM_PROGRAM_VERSION = '309'
REQUEST_METHOD = 'POST'
LOGNAME = 'Mike'
USER = 'Mike'
HTTP_ORIGIN = 'http://127.0.0.1:8000'
PATH = '/Library/Frameworks/Python.framework/Versions/3.2/bin:/Library/Frameworks/Python.framework/Versions/2.7/bin:/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin'
QUERY_STRING = ''
HOME = '/Users/Mike'
wsgi.errors = <open file '<stderr>', mode 'w' at 0x100284270>
TERM_PROGRAM = 'Apple_Terminal'
LANG = 'en_US.UTF-8'
HTTP_ACCEPT_CHARSET = 'ISO-8859-1,utf-8;q=0.7,*;q=0.3'
TERM = 'xterm-256color'
SHELL = '/bin/bash'
TZ = 'America/New_York'
HTTP_COOKIE = 'csrftoken=Df1jB3708JUgretV8PSmRQ6NFQGI3wzL; sessionid=c5eab78e2c73ff493056044d4e4362ba'
SERVER_NAME = '1.0.0.127.in-addr.arpa'
REMOTE_ADDR = '127.0.0.1'
SHLVL = '1'
wsgi.url_scheme = 'http'
_ = '/Library/Frameworks/Python.framework/Versions/2.7/bin/python'
SERVER_PORT = '8000'
PATH_INFO = u'/ajax/login'
CONTENT_LENGTH = '72'
TERM_SESSION_ID = '37C63610-0B15-480A-A5C3-1619ECABE279'
HTTP_X_REQUESTED_WITH = 'XMLHttpRequest'
SSH_AUTH_SOCK = '/tmp/launch-elZmdg/Listeners'
wsgi.input = <socket._fileobject object at 0x101be8cd0>
Apple_PubSub_Socket_Render = '/tmp/launch-nMejuv/Render'
HTTP_HOST = '127.0.0.1:8000'
SCRIPT_NAME = u''
wsgi.multithread = True
HTTP_CONNECTION = 'keep-alive'
TMPDIR = '/var/folders/98/m4rlvgtx0d19gbmh824m8jt80000gn/T/'
HTTP_ACCEPT = '*/*'
wsgi.version = 
HTTP_USER_AGENT = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_0) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.57 Safari/537.1'
GATEWAY_INTERFACE = 'CGI/1.1'
wsgi.run_once = False
OLDPWD = '/Users/Mike'
wsgi.multiprocess = False
HTTP_ACCEPT_LANGUAGE = 'en-US,en;q=0.8'
__CF_USER_TEXT_ENCODING = '0x1F5:0:0'
Apple_Ubiquity_Message = '/tmp/launch-8Ck6J2/Apple_Ubiquity_Message'
PWD = '/Users/Mike/Desktop/Main/Django-Development/BBN'
DJANGO_SETTINGS_MODULE = 'BBN.settings'
CONTENT_TYPE = 'application/x-www-form-urlencoded; charset=UTF-8'
wsgi.file_wrapper = ''
REMOTE_HOST = ''
HTTP_ACCEPT_ENCODING = 'gzip,deflate,sdch'
COMMAND_MODE = 'unix2003'

Settings:
Using settings module BBN.settings
USE_L10N = True
USE_THOUSAND_SEPARATOR = False
CSRF_COOKIE_SECURE = False
LANGUAGE_CODE = 'en-us'
ROOT_URLCONF = 'BBN.urls'
MANAGERS = 
DEFAULT_CHARSET = 'utf-8'
STATIC_ROOT = ''
MESSAGE_STORAGE = 'django.contrib.messages.storage.fallback.FallbackStorage'
EMAIL_SUBJECT_PREFIX = '[Django] '
FILE_UPLOAD_PERMISSIONS = None
URL_VALIDATOR_USER_AGENT = 'Django/1.4 (https://www.djangoproject.com)'
STATICFILES_FINDERS = 
SESSION_COOKIE_DOMAIN = None
SESSION_COOKIE_NAME = 'sessionid'
ADMIN_FOR = 
TIME_INPUT_FORMATS = 
DATABASES = {'default': {'ENGINE': 'django.db.backends.sqlite3', 'TEST_MIRROR': None, 'NAME': 'database', 'TEST_CHARSET': None, 'TIME_ZONE': 'UTC', 'TEST_COLLATION': None, 'PORT': '', 'HOST': '', 'USER': '', 'TEST_NAME': None, 'PASSWORD': u'********************', 'OPTIONS': {}}}
SERVER_EMAIL = 'root@localhost'
FILE_UPLOAD_HANDLERS = 
DEFAULT_CONTENT_TYPE = 'text/html'
APPEND_SLASH = True
FIRST_DAY_OF_WEEK = 0
DATABASE_ROUTERS = []
YEAR_MONTH_FORMAT = 'F Y'
STATICFILES_STORAGE = 'django.contrib.staticfiles.storage.StaticFilesStorage'
CACHES = {'default': {'LOCATION': '', 'BACKEND': 'django.core.cache.backends.locmem.LocMemCache'}}
SESSION_COOKIE_PATH = '/'
USE_X_FORWARDED_HOST = False
' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T02:51:00.533

仅通过查看代码很难判断，但是：

```
 log_in_send_act(form = form)
 print form.cleaned_data['username']
     user_object = User.objects.create_user(
     username=form.cleaned_data['username'],
     password=form.cleaned_data['password'],
     email=form.cleaned_data['username']
 ) 
```

如果我用它的代码替换 log_in_send_act，这将变成：

```
 cleaned = form.cleaned_data
 msg = "To activate your account, please click the following link:<a ref='"+get_random_word()+"'>Click Here</a>"
 send_mail('Activate', msg, '****@gmail.com', [cleaned['username']], fail_silently=False)

 new_user_object = User.objects.create_user(
    username=cleaned['username'],
    password=cleaned['password'],
    email=cleaned['username']
)

print form.cleaned_data['username']
     user_object = User.objects.create_user(
     username=form.cleaned_data['username'],
     password=form.cleaned_data['password'],
     email=form.cleaned_data['username']
 ) 
```

使用完全相同的参数连续调用 2 次 User.create_user 函数。即使数据没有提交到数据库，如果 Django 执行类似数据库的内存检查，这也可能引发错误。

# c# - 我可以在 C# 中为串行端口通信执行定时器循环和超时吗？

> ID：11856783
> 
> 赞同：2
> 
> 时间：2012-08-08T02:17:51.213
> 
> 标签：c#

我更熟悉 C 语言，最近有人要求我用 C# 进行串行通信。下面是我从 COM 端口接收数据的代码：

```
public void RxData()
{
    int i = 0;
    int Data;
    bool StartRx = false;
    int timer;

    while (true)
    {
        Data = sp.ReadByte();
        if (Data == 0x01)
        {
            StartRx = true;
        }
        if (StartRx == true)
        {
            RxBuffer[i++] = Data;
        }
        if (Data == 0x04)
        {
            RxChkSum = RxBuffer[i - 2];
            break;
        }
        timer++;
        if(timer>100) 
        {
            timer = 0;
            break;
        }
    } 
} 
```

以上是我接收以 0x01 开始并以 0x04 结束的数据的方式。

我正在增加一个计时器以计数到 100 并退出 while 循环，以防我没有收到任何数据。有点像超时。

但似乎计时器不起作用。当我没有收到任何数据时，我的程序就永远停留在 while 循环中。

我知道这是我们在嵌入式 c 编程中编写的方式。但这是用 C# 编写的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:42:26.900

我认为您可能对使用事件处理程序处理来自串行端口的数据感兴趣。在 .net`SerialPort`类中，您可以为接收到的数据注册一个事件处理程序：

```
var sp = new SerialPort("COM1") {
    BaudRate = 9600,
    Parity = Parity.None,
    StopBits = StopBits.One,
    DataBits = 8,
    Handshake = Handshake.None
};

sp.DataReceived += new SerialDataReceivedEventHandler(DataReceivedHandler); 
```

您还可以在`ReceivedBytesThreshold`上设置属性，该属性`SerialPort`确定您的事件处理程序何时被触发。

然后，您只需设置事件处理程序以读取数据并使用它执行您需要的操作：

```
private static void DataReceivedHandler(object sender, SerialDataReceivedEventArgs e)
{
    SerialPort sp = (SerialPort)sender;
    string data = sp.ReadExisting();
} 
```

使用这种类型的模式，您不必循环，只需设置所需的阈值，并在串行端口为您准备好那么多字节时让框架调用您的事件处理程序。

希望这会有所帮助，我并没有完全错过你的观点。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:41:57.590

`ReadByte`是同步调用。它只会在有字节读取时返回。

为了让您尝试开始工作，您可以在阅读之前检查可用数据：

```
if(sp.BytesToRead > 0)
{
    Data = sp.ReadByte();
} 
```

除此之外，我更喜欢[hmqcnoesy](https://stackoverflow.com/a/11856932/128886)建议的异步阅读。

# html - 我怎样才能把这两个div放在一起？

> ID：11856788
> 
> 赞同：0
> 
> 时间：2012-08-08T02:18:34.977
> 
> 标签：html, css

如图所示，我有 3 个 div，[这里](http://a3.sphotos.ak.fbcdn.net/hphotos-ak-ash3/576130_415256775187749_281643650_n.jpg)：

我怎样才能确保绿色低于红色？

我的代码是：

```
<div id='black' style='float: left'></div>
<div id='red' style='float: left'></div>
<div id='green' style='float: left'></div> 
```

提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T02:28:19.733

试试这个
将红色和绿色 div 组合成一个新的 float:left div
创建一个名为 clr 的新 css 类。

```
div.clr{clear: both} 
```

并尝试这个标记

```
<div id='black' style='float: left'></div>
<div style='float: left'>
  <div id='red' style='float: left'></div>
  <div class="clr"></div>
  <div id='green' style='float: left'></div>
<div>​​​​​​​​​​ 
```

[在这里](http://jsfiddle.net/unloco/Hpepy/1/)测试

# jquery - jQuery为相同的类创建点击功能

> ID：11856789
> 
> 赞同：1
> 
> 时间：2012-08-08T02:18:39.300
> 
> 标签：jquery

例如，如果我想在单击时为 css 类“more-link”创建一个 jQuery 函数，但是页面上有多个“more-link”实例，我如何强制 jQuery 只在点击类，而不是其他类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:19:57.503

```
$('element').click(function(){
  $(this).animate({
  //scope is ONLY the element clicked
  });
  $('element').animate({
    //this wi ll animate ALL elements matching the selector. Not what you want.
  });
}); 
```

[对于找到此答案的任何人，作者实际上都想要这个。](http://jsfiddle.net/3c7Gy/28/)

```
$('.read-more').click(function(){
  var me = $(this);
  $(this).prev('p').animate({
     height: '100%'
  }, function(){
     //lost $(this) scope...me still holds it, we use it below for a reason.
     $(me).fadeOut(400);
     $(me).next('.hide_post-content').delay(400).fadeIn();
  });  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T02:20:06.457

在 jQuery 中，`$(this)`指的是被点击的元素：

```
$('.more-link').on('click', function() {
  $(this).animate(...);
}); 
```

你`$('.more-link')`是不小心使用的吗？

# java - 我怎样才能在java中得到总和？

> ID：11856790
> 
> 赞同：0
> 
> 时间：2012-08-08T02:18:45.833
> 
> 标签：java, sum

我想在java中求和。

所以，

> 例如，
> 
> > 1.123 + 1.123E-4 = 0.0123411234

那么，我如何在java中处理“E”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:22:41.730

使用[`BigDecimal`](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html)：

```
public static void main( String[] args ) {
    BigDecimal bigDecimal1 = new BigDecimal( "1.123" );
    BigDecimal bigDecimal2 = new BigDecimal( "1.123E-4" );
    BigDecimal sum = bigDecimal1.add( bigDecimal2 );
    System.out.println( sum );
} 
```

输出：

```
1.1231123 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T02:22:32.400

使用`BigDecimal`类。有关将采用类似“ [1.123E-](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html#BigDecimal(java.lang.String) 4"。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T02:22:13.087

你的意思是这样的？

```
String a = "1.123";
String b = "1.123E-4";

double d1 = Double.valueOf(a);
double d2 = Double.valueOf(b);

System.out.println("sum = " + (d1 + d2)); 
```

Double 的`valueOf()`方法可以为您解析 te **E**符号。

实际上，结果是：1.1231123

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T02:27:15.117

好吧，你试过了吗？

```
final class SciNotationTest {

  public static void main(final String[] argv) {
    final double sum = 1.123 + 1.123E-4;
    System.out.println(sum);
    assert 1.1231123 == sum;
  }
}

C:\dev\scrap>javac SciNotationTest.java

C:\dev\scrap>java -ea SciNotationTest
1.1231123 
```

在使用和测试没有容差的相等性时应该小心`double`，因为浮点数通常不精确。如果高精度是您追求的目标，请确实使用[`BigDecimal`](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T05:07:34.153

用来`Double.parseDouble()`做这个...

```
String n1 = "1.123";
String n2 = "1.123E-4";

double dn1 = Double.parseDouble(n1);
double dn2 = Double.parseDouble(n2);

System.out.println("Total : " + (dn1 + dn2)); 
```

**输出：**

```
1.1231123 
```

# visual-studio-2010 - 项目文件不能指定多个闪屏元素

> ID：11856791
> 
> 赞同：0
> 
> 时间：2012-08-08T02:18:47.207
> 
> 标签：visual-studio-2010, c#-4.0

我无法相信这一点。我尝试按照 MSDN 的指南添加启动画面，但我的 WPF 应用程序项目因此中断。现在我不能再调试和运行应用程序了。

我得到的唯一信息是：

`Project file cannot specify more than one Splash Screen element`

没有发生它的位置。当我查看输出窗口时，它看起来像这样..

`------ Build started: Project: MPCS Line Off, Configuration: Debug x86 ------ C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.WinFX.targets(269,9): error MC1004: Project file cannot specify more than one SplashScreen element. C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.WinFX.targets(269,9): error BG1003: The project file contains a property value that is not valid.`

我搜索了高低，但没有运气。仅供参考，这是在 VS2010 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:57:46.817

“Build Action = SplashScreen”的文件不止一个

# android - android dropbox api - 应用程序密钥混淆

> ID：11856792
> 
> 赞同：0
> 
> 时间：2012-08-08T02:19:00.967
> 
> 标签：android, api, dropbox

在我的 android 应用程序上，我使用 Dropbox API。我对应用程序密钥和秘密进行了硬编码。但要进行身份验证，我需要使用 Dropbox 帐户登录。

但是，如果您必须输入用户名和密码，那么使用应用程序密钥和密码有什么意义。

此外，如果您希望其他人能够在不使用帐户用户名和密码的情况下上传到您的保管箱，该怎么办。他们是否可以使用应用程序密钥和秘密仅上传到帐户而不输入帐户用户名/密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:37:25.183

您对应用程序密钥/秘密曾经做什么感到有些困惑。简而言之，一对应用程序密钥/秘密用于识别应用程序。它是一个有效的应用程序吗？是用户授权的吗？它是否超出了 API 调用限制/限制？因此，只有密钥/秘密，应用程序无权访问未经授权的用户的私人数据。很抱歉，但我不得不说允许人们将数据上传到您自己的云不是一个好主意。至少，Dropbox 不是为了这个目的。相反，为什么不尝试一些其他的云存储服务，比如 Amazon S3？

# css - WordPress中的选定菜单突出显示问题

> ID：11856793
> 
> 赞同：0
> 
> 时间：2012-08-08T02:19:01.403
> 
> 标签：css

下面的代码行做了所有它被要求做的事情，除了一件事，它不会改变所选链接的颜色，但它会根据要求为其分配背景。它是 WordPress 主题的一部分。

```
#rack #header #nabar ul li a {
    color: #FFC;
}

#rack #header #mainNav ul li.current-menu-item {
    height: 21px;
    width: auto;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    border-radius: 4px;
    border: 4px solid #EBF3EE;
    background-color: #EBF3EE;
    float: left;
    position: relative;
    padding-bottom: 19px;
    color: #000;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:59:25.817

假设选定的节点标记有一个`a`标签，我建议将`a`标签定位在选定的 li 内。这应该足以覆盖您的基本`a`标记属性。

```
#rack #header #mainNav ul li.current-menu-item a {
    color: #000;
} 
```

# android - JQuery not working with android browser

> ID：11856794
> 
> 赞同：9
> 
> 时间：2012-08-08T02:19:15.817
> 
> 标签：android, jquery

I have been using jquery for my web development for a while, and when i use android browser to view my work, i find out that all the jquery function like hide() show() doesn't seems to work.

Can anyone validate this for me, I wonder why jquery is not working for android browser, I am using 2.3.1 right now. Does anyone come across with this problem before?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T02:23:19.733

jQuery works just fine in Android browser. The problem isn't that jQuery doesn't work in Android. The problem is something else.

It's hard to say what that problem might be without any code, but you can try to get more hints as to what might be going wrong by looking in the JS error console (or whatever the equivalent is in Android or an Android emulator--basically, where JS errors are logged).

If you want to get super ambitious, you can try debugging it with Weinre or something like that.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-04T12:12:31.783

Since you did not post code, we do not know if you were loading your JS assets from the same domain or not. After putting jQuery on the same server instead of using a CDN it resolved my issue. I also had other random JS errors and then I cleared all the data/cache for Chrome and that fully resolved it.

If the issue is something else, you can follow the instructions here to do remote debugging on any of the JavaScript errors:

[https://developer.chrome.com/devtools/docs/remote-debugging](https://developer.chrome.com/devtools/docs/remote-debugging)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-22T12:28:26.977

Jquery current browser support on desktop and mobile: [https://jquery.com/browser-support/](https://jquery.com/browser-support/)

So seems the problem is not with jquery support for native android emulation, since Stock browser on Android 4.0+ is supported by. Any problem with jQuery in the above browsers should be reported as a bug in jQuery.

# jquery - jQuery：使用委托时链接 on()

> ID：11856795
> 
> 赞同：34
> 
> 时间：2012-08-08T02:19:18.970
> 
> 标签：jquery

在过去，我曾经`live()`非常成功地链接调用，例如：

```
$(".something")
    .live("click", function(e) { ... })
    .live("change", function(e) { ... })
    .live("submit", function(e) { ... }); 
```

这些天来，`live()`，`bind()`并`delegate()`已被闪亮的新`on()`.

我尝试简单地替换`live()`为`on()`看起来很明显的：

```
$(".something")
    .on("click", function(e) { ... })
    .on("change", function(e) { ... })
    .on("submit", function(e) { ... }); 
```

但是，当您考虑如何工作时，这几乎同样明显地行不通`on()`。这来自[http://api.jquery.com/on/](http://api.jquery.com/on/)：

> “事件处理程序仅绑定到当前选定的元素；它们必须在您的代码调用 .on() 时存在于页面上。”

根据 jQuery 文档，我需要绑定`document`并委托`.something`来处理实时事件。`.document`不幸的是，这意味着如果我想复制上面的内容，我最终会重复我的委托选择器（ ） `on()`：

```
$(document)
    .on("click", ".something", function(e) { ... })
    .on("change", ".something", function(e) { ... })
    .on("submit", ".something", function(e) { ... }); 
```

这可以按预期工作，但我真的很希望能够像使用`live()`. 我错过了什么吗？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-08-08T02:32:11.913

我相信你可以做到这一点：

```
$(document).on({
    "click" : function(e) { ... },
    "change" : function(e) { ... },
    "submit" : function(e) { ... }
}, ".something"); 
```

也就是说，使用“events-map”语法来指定事件及其处理程序，然后指定用于委托样式行为的选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T02:25:51.077

`.live()`有一堆问题。其中之一是`".something"`当您运行代码时它正在评估选择器，但随后不使用结果（例如浪费），然后在事件发生时在运行时重新评估（就像它需要正常工作一样）。

此外，如果您有很多动态事件处理程序，则`.live()`强制所有动态事件都在`document`对象上，这可能会真正减慢事件处理速度。 `.on()`另一方面，允许您选择一个更接近实际对象的静态父对象并将事件处理程序附加到该对象，以便可以将不同的动态事件处理程序附加到更靠近源和不同的对象，从而提高它们的运行时性能当有很多事件处理程序时，好多了。

因此，您只需要使用有效的新方法即可`.on()`。`.on()`如果您使用现在使用的相同表单，或者您可以将映射作为第一个参数传递给并处理多个事件，那么对您来说应该没什么大不了的`.on()`来电。有关更多信息，请参阅[jQuery 文档](http://api.jquery.com/on/)`.on()`中的第二种形式。`.on()`

这是使用动态行为的[简单解释。](https://stackoverflow.com/questions/8752321/jquery-live-vs-on-method-for-adding-a-click-event-after-loading-dynamic-ht/8752376#8752376)`.on()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T02:34:10.430

据我了解你的问题，你想要的东西像`live()`. 使用`on()`你必须多写一点，但如果`.something`是动态添加的，那么你还有另一个选项可以委托事件。

```
var $div = $('<div/>', {
  'class': 'something',
   click: function () { ... },
   change: function () { ... }
})

// Already has events attached
// no need to delegate
$div.appendTo('body') 
```

# objective-c - MPMoviePlayerController 不适用于 remoteControlReceivedWithEvent

> ID：11856796
> 
> 赞同：0
> 
> 时间：2012-08-08T02:19:37.113
> 
> 标签：objective-c, ios, mpmovieplayercontroller

我想让键盘上的控件在我的应用程序中工作。控件使用 Apple 的远程控制事件（`beginReceivingRemoteControlEvents`、`endReceivingRemoteControlEvents`和`remoteControlReceivedWithEvent`）；但是我似乎无法使用它`MPMoviePlayerController`。

我在程序开始时没有看到任何事件，即使`beginReceivingRemoteControlEvents`在开始时被调用。在播放视频期间我没有看到任何事件。关闭视频后，我确实看到了事件。

从上面可以看出，音频流似乎`MPMoviePlayerController`禁用了控件。但是我不知道如何改变这一点。我尝试使用`[moviePlayer setUseApplicationAudioSession:NO];`更改音频以使用系统会话，但它什么也没做。

这是我的设置。我的应用程序委托是一个`UIViewController`. 我将主窗口的根视图控制器设置为应用程序委托，将视图添加到视图控制器并在视图控制器中添加与视频有关的部分。

```
- (BOOL)canBecomeFirstResponder {
    return YES;
}
- (void)tableView:(UITableView *)theTableView didSelectRowAtIndexPath:(NSIndexPath *)theIndexPath {
    NSString *file = [[MGMFilesPath stringByExpandingTildeInPath] stringByAppendingPathComponent:[files objectAtIndex:[theIndexPath indexAtPosition:1]]];
    AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    [audioSession setCategory:AVAudioSessionCategoryPlayback error:nil];
    [audioSession setActive:YES error:nil];
    NSLog(@"%d", [self isFirstResponder]);

    moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL fileURLWithPath:file]];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(exitedFullscreen:) name:MPMoviePlayerDidExitFullscreenNotification object:moviePlayer];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(playbackFinished:) name:MPMoviePlayerPlaybackDidFinishNotification object:moviePlayer];

    if ([moviePlayer respondsToSelector:@selector(setFullscreen:animated:)]) {
        [[self view] addSubview:[moviePlayer view]];
        [moviePlayer setFullscreen:YES animated:YES];
        [moviePlayer play];
    } else {
        [moviePlayer play];
    }
    [fileView deselectRowAtIndexPath:theIndexPath animated:NO];
}

- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
    [self becomeFirstResponder];
}

- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];
    [[UIApplication sharedApplication] endReceivingRemoteControlEvents];
    [self resignFirstResponder];
}

- (void)remoteControlReceivedWithEvent:(UIEvent *)event {
    NSLog(@"remoteControlReceivedWithEvent: %@", event);
    if (event.type==UIEventTypeRemoteControl) {
        if (event.subtype==UIEventSubtypeRemoteControlPlay) {
            NSLog(@"Play");
        } else if (event.subtype==UIEventSubtypeRemoteControlPause) {
            NSLog(@"Pause");
        } else if (event.subtype==UIEventSubtypeRemoteControlTogglePlayPause) {
            NSLog(@"Play Pause");
        }
    }
}

- (void)exitedFullscreen:(NSNotification*)notification {
    [[moviePlayer view] removeFromSuperview];
    [moviePlayer stop];
    [moviePlayer release];
    moviePlayer = nil;
    [[AVAudioSession sharedInstance] setActive:NO error:nil];
}

- (void)playbackFinished:(NSNotification*)theNotification {
    [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerDidExitFullscreenNotification object:moviePlayer];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification object:moviePlayer];
    NSNumber *reason = [[theNotification userInfo] objectForKey:MPMoviePlayerPlaybackDidFinishReasonUserInfoKey];
    if ([reason intValue]!=MPMovieFinishReasonUserExited) {
        [moviePlayer setFullscreen:NO animated:YES];
        [[moviePlayer view] removeFromSuperview];
        [moviePlayer stop];
        [moviePlayer release];
        moviePlayer = nil;
        [[AVAudioSession sharedInstance] setActive:NO error:nil];
    }
    NSLog(@"%d", [self isFirstResponder]);
} 
```

正如您在上面的代码中看到的那样，我验证了它是第一响应者并且确实是，所以我知道这不是第一响应者的问题。

有人可以帮我完成这项工作吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:38:52.923

显然， MPMoviePlayerController 不是解决这个问题的方法。我最终做的是使用MPMoviePlayerViewController**并**覆盖**remoteControlReceivedWithEvent****来**自定义控件。以下是我正在使用的当前代码。

```
@interface MGMMoviePlayerViewController : MPMoviePlayerViewController
- (void)remoteControlReceivedWithEvent:(UIEvent *)event;
@end

@implementation MGMMoviePlayerViewController
- (void)remoteControlReceivedWithEvent:(UIEvent *)theEvent {
    if (theEvent.type==UIEventTypeRemoteControl) {
        if (theEvent.subtype==UIEventSubtypeRemoteControlPlay) {
            [[self moviePlayer] play];
        } else if (theEvent.subtype==UIEventSubtypeRemoteControlPause) {
            [[self moviePlayer] pause];
        } else if (theEvent.subtype==UIEventSubtypeRemoteControlTogglePlayPause) {
            if ([[self moviePlayer] playbackState]==MPMoviePlaybackStatePlaying) {
                [[self moviePlayer] pause];
            } else {
                [[self moviePlayer] play];
            }
        } else if (theEvent.subtype==UIEventSubtypeRemoteControlStop) {
            [[self moviePlayer] stop];
        } else if (theEvent.subtype==UIEventSubtypeRemoteControlNextTrack) {
            NSTimeInterval currentTime = [[self moviePlayer] currentPlaybackTime];
            currentTime += 10;
            if (currentTime>[[self moviePlayer] duration])
                currentTime = [[self moviePlayer] duration];
            [[self moviePlayer] setCurrentPlaybackTime:currentTime];
        } else if (theEvent.subtype==UIEventSubtypeRemoteControlPreviousTrack) {
            NSTimeInterval currentTime = [[self moviePlayer] currentPlaybackTime];
            currentTime -= 10;
            if (currentTime<0)
                currentTime = 0;
            [[self moviePlayer] setCurrentPlaybackTime:currentTime];
        } else if (theEvent.subtype==UIEventSubtypeRemoteControlBeginSeekingBackward) {
            [[self moviePlayer] beginSeekingBackward];
        } else if (theEvent.subtype==UIEventSubtypeRemoteControlBeginSeekingForward) {
            [[self moviePlayer] beginSeekingForward];
        } else if (theEvent.subtype==UIEventSubtypeRemoteControlEndSeekingBackward || theEvent.subtype==UIEventSubtypeRemoteControlEndSeekingForward) {
            [[self moviePlayer] endSeeking];
        }
    }
}
@end

- (void)tableView:(UITableView *)theTableView didSelectRowAtIndexPath:(NSIndexPath *)theIndexPath {
    NSString *file = [[MGMFilesPath stringByExpandingTildeInPath] stringByAppendingPathComponent:[files objectAtIndex:[theIndexPath indexAtPosition:1]]];

    moviePlayerView = [[MGMMoviePlayerViewController alloc] initWithContentURL:[NSURL fileURLWithPath:file]];

    [self presentMoviePlayerViewControllerAnimated:moviePlayerView];
    [[moviePlayerView moviePlayer] play];

    [fileView deselectRowAtIndexPath:theIndexPath animated:NO];
} 
```

# lotusscript - 创建一个视图以在 lotusscript 中列出代理及其上次运行日期和时间

> ID：11856800
> 
> 赞同：1
> 
> 时间：2012-08-08T02:20:11.893
> 
> 标签：lotusscript

我有 6 个代理、1 个表单（“代理状态”）、1 个视图（“代理状态列表”）和 1 个脚本库（“进程代理”）。

表单字段：AgentName（存储代理的名称），LastDate（代理的上次运行日期和时间）

视图：基于表格。AgentName 是第一列。

每个代理命名如下（带括号）：（Agent01），（Agent02），（Agent03），（Agent04），（Agent05），＆（Agent06）

## 脚本库代码

```
Option Public
Option Declare

Dim vw As NotesView, doc As NotesDocument

Sub Initialize
End Sub

Sub setLastRun(db As NotesDatabase, a As NotesAgent, dte)   
    Set vw=db.Getview("Agent Status List")
    Set doc=vw.Getdocumentbykey(a.Name, True)
    If doc Is Nothing Then
        Set doc=New NotesDocument(db)
        doc.form="Agent Status"
        doc.AgentName=a.Name
        doc.LastDate=CDat(dte)
        Call doc.save(True, True)
        Call vw.Refresh()
    Else
        Call doc.Replaceitemvalue("LastDate", CDat(dte))
        Call doc.Save(True, True)
        Call vw.Refresh()
    End If  
End Sub

Function getLastRun(db As NotesDatabase, a As NotesAgent)
    Set vw=db.Getview("Agent Status List")
    Set doc=vw.Getdocumentbykey(a.Name, True)
    If Not doc Is Nothing Then
        getLastRun=doc.LastDate(0)
    Else
        Call setLastRun(db, a, Now)
        getLastRun=CDat(Now)
    End If
End Function 
```

在每个代理的代码中，我包括以下内容：

在顶部：`Use "Process Agent"`

在代码的开头（从“代理状态列表”视图中获取此代理的最后运行日期）：

```
Dim s As New NotesSession, db As NotesDatabase
Dim a As NotesAgent, lastdate
Set db=s.Currentdatabase
Set a=s.Currentagent
lastdate=getLastRun(db, a) 
```

在代码末尾（为此代理设置新的上次运行日期）：`Call setLastRun(db, a, now)`

现在的问题是它似乎无法在“代理状态列表”视图中查找代理名称。

代理名称 Lotus 帮助文件的描述为： *只读。代理的名称。在数据库中，代理的名称可能不是唯一的。*

当我查看视图时，它每次都会创建一个新文档，而不是引用和更新现有文档。视图中的名称仅显示为“Agent01”，不带括号。是这个原因吗？或者由于名称不是唯一的描述，因此无法查找。我不明白这一点。如果一切正常，视图中应该只有 6 个文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:33:12.130

GetDocumentByKey 不返回任何内容。最可能的原因是您忘记在“代理状态列表”的第一列设置排序属性。

# pointers - 为什么我的测试代码中的 parentPid 是 0x1？

> ID：11856801
> 
> 赞同：0
> 
> 时间：2012-08-08T02:20:26.723
> 
> 标签：pointers, process

我想使用指针来获取父进程的pid及其子进程：

```
int main(void){
  pid_t childPid,*parentPid,pid;
  childPid = fork();
  if(childPid == 0 ){
    printf("[Child] the parent pid is 0x%u\n", *parentPid);
  }else if(childPid < 0){
    printf("there is something wrong");
  }else{
    pid = getpid();
    printf("[Parent] the pid is 0x%u\n",pid);
    parentPid = &pid;
  }
  return (EXIT_SUCCESS);
} 
```

输出是：

```
[Parent] the pid is 0x5756
[Child] the parent pid is 0x1 
```

我的代码一定有问题，知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:29:45.270

孩子从不修改`*parentPid`，所以它只包含随机垃圾。如果您想要您的父 PID，请调用`getppid`.

即使您修复了竞争条件，代码仍然无法正常工作。除非共享内存，否则更改父项中的内存不会更改子项中的内存。如果默认共享所有内存，孩子和父母会立即抹掉彼此的数据并导致完全混乱。

# python - 在 Linux 上使用 python 3 启动 IDLE（同时安装了 python 2.7）

> ID：11856802
> 
> 赞同：12
> 
> 时间：2012-08-08T02:20:44.290
> 
> 标签：python, python-3.2, python-idle

我最初有 python 2.7，它通常与操作系统捆绑在一起（目前使用 Linux Mint 12）。我想尝试 python 3，所以我将它与 python 2 一起安装。一切都很好，我可以通过调用`python`或来在终端中运行这两个版本`python3`。但是，似乎没有办法用 python 3 启动 IDLE。当我启动它时，是否有一些标志可以传递给 IDLE，以便我可以选择我希望它运行的 python 版本？

例如（这些不起作用） `idle3`或`idle --shell=python3`类似的东西。希望你明白我的意思。[我在这个关于 IDLE for Python 3 (on Vista) 的问题](https://stackoverflow.com/questions/1630728/no-idle-for-python-3)中读到了指向不同的可执行文件。但是，我似乎无法在 Linux 上做类似的事情。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T02:46:22.437

只需输入`sudo apt-get install idle3`您的终端，就会安装您之前安装的**Python 3版本的****空闲**版本。那么两者都是兼容的。您只需键入即可从终端运行 2.7 idle 。您只需在终端中输入即可运行空闲 3 版本。这对我有用。**`idle``idle3`**

 *** * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T02:24:22.823

您必须安装适当的包 - Python 2.x 和 3.x 彼此不兼容。

你可以在[这里](http://community.linuxmint.com/software/view/idle-python3.1)找到链接。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-09T16:20:13.480

我必须安装 python3-tools 才能获得 idle3（使用 Fedora 18）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T23:49:11.613

我使用以下命令安装了空闲：

```
sudo yum install python-tools.x86_64 
```

我可以同时运行命令并分别给我 python2 或 3 shell：

```
idle
idle3 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-09T17:54:27.630

克里斯蒂 说：

> “我必须安装 python3-tools 才能获得 idle3（使用 Fedora 18）。”

sudo yum install python3-tools

这也适用于 Fedora 19。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-21T03:04:18.520

在 pf python2 的情况下，您可以通过运行此命令来安装它

```
sudo apt-get install idle 
```

在 python3 的情况下，您可以通过运行此命令来安装它

```
sudo apt-get install idle3 
```

这对我来说很好**

# python - 如何使用IOS访问在线mongoDB数据

> ID：11856803
> 
> 赞同：0
> 
> 时间：2012-08-08T02:20:55.350
> 
> 标签：python, ios, mongodb, pyramid, database

我的朋友有一个使用 Pyramid 框架构建的网站，并使用 MongoDB 来存储数据。如果我想构建一个 iPhone 应用程序，我如何访问该数据库中的数据？

我知道 Obj-C 并且构建了简单的 iOS 应用程序，但它们都没有使用非本地数据。我用谷歌搜索但没有返回好的结果。我只是不知道从哪里开始。任何有关相关问题的好的教程或示例代码将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T05:29:54.560

就最佳实践而言，如果没有适当的安全考虑，您不会希望直接通过 Internet 访问 MongoDB（或任何数据库）。

iOS 最直接的选择可能是向您自己的应用程序添加[RESTful](http://www.mongodb.org/display/DOCS/Http+Interface)接口，或者使用提供 API 的第三方托管解决方案。无论哪种情况，我都建议在身份验证之外使用 https，因为[MongoDB 有线协议](http://www.mongodb.org/display/DOCS/Mongo+Wire+Protocol)当前未加密。

对于 iOS，我会考虑使用[RestKit](http://restkit.org/)框架作为一个方便的助手。它包括合理的文档和示例，以帮助您入门。

# android - Android 的 MulticastLock 可以用来监控来自其他设备的 802.11 探测请求吗？

> ID：11856804
> 
> 赞同：4
> 
> 时间：2012-08-08T02:20:56.473
> 
> 标签：android, wifi, multicast, android-wifi

我对 Android 使用`WifiManager.MulticastLock`. 从[文档](http://developer.android.com/reference/android/net/wifi/WifiManager.MulticastLock.html)中：

> 类概述
> 
> 允许应用程序接收 Wifi 多播数据包。通常，Wifi 堆栈会过滤掉未明确寻址到此设备的数据包。获取 MulticastLock 将导致堆栈接收寻址到多播地址的数据包。处理这些额外的数据包会导致明显的电池消耗，不需要时应禁用。

802.11 Probe Request帧是客户端在范围内寻找无线网络时发出的，一般使用广播MAC地址作为目的地。这是否意味着已获得多播锁定的 Android 应用程序能够接收这些探测请求，或者我对`MulticastLock`错误的理解？我怀疑*多播*一词可能是指第 3 层（与第 2 层*广播*相反），但由于类概述状态*Allows an application to receive **Wifi** Multicast packet*，我有点不确定，想澄清一下。

# mysql - 在 MySql“order by”子句中有效地做数学？

> ID：11856806
> 
> 赞同：5
> 
> 时间：2012-08-08T02:21:23.623
> 
> 标签：mysql, sql-order-by

我曾多次被告知，使用数学 SELECT 非常有效，而在 WHERE 子句中使用数学不是很有效。这些情绪是否正确？这如何适用于 ORDER BY 子句？

谢谢！！

例子：

```
SELECT a.* FROM a ORDER BY (a.field_1*a.field_2) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T06:01:37.103

如果结果大于 sort_buffer_size，您的查询将不得不使用磁盘上的临时文件对整个表进行排序。

您可能希望在表中添加一个包含 field1*field2 值的列。这当然会使您的数据稍微反规范化，但是您可以在字段上创建一个索引。

如果在新字段上有索引，那么 MySQL 可以读取使用索引预先排序的数据，因为 MySQL 索引是 b*tree 结构，b*tree 结构是按预先排序的顺序存储的。这不会为排序产生额外的磁盘 IO 或 CPU 活动，您只需扫描表一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T05:51:40.780

这是个好主意，但我从不认为在`ORDER BY`子句中使用数学函数有任何意义。

您可以通过别名使用它：-

```
select *,(intId * intId)as xalias from m_xxx_list order by xalias; 
```

或者

```
select * from m_xxx_list order by (intId + intId); 
```

是的，如果您使用的是 MYSQL 的数学聚合函数，请对其进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T02:39:23.610

为了让 MySQL 按计算值对结果进行排序，它实际上需要在根据`WHERE`子句过滤掉行之后即时计算值。如果结果集非常大，那么 MySQL 将需要计算所有行的结果。

对于一个小的结果集，这应该没问题。但是，您的结果集越大（在应用 之前`LIMIT`），那么服务器要做的计算就越多，只需找出对行进行排序的值。如果计算是确定性的，那么您应该将其缓存在结果集中的列，然后对其进行索引。如果它在运行中，那么您需要确保您的 CPU 能够胜任这项任务。

在提供的情况下，我建议创建一个列，`a.field_3`并将结果存储`(a.field_1*a.field_2)`在其中。每当`a.field_1`或的值发生`a.field_2`变化时，您都需要重新计算结果。

# c# - 将 C# 全局变量的值发送到 cshtml 文件

> ID：11856807
> 
> 赞同：2
> 
> 时间：2012-08-08T02:21:26.973
> 
> 标签：c#, razor, asp.net-mvc-4

我有一个 C# 类，在这个类中我有一个字符串变量（全局），它的值在 cshtml 文件中是必需的。我该怎么做才能找回它？首先十分感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-09T12:58:38.337

如果你有这样的事情：

```
namespace Site.Controllers 
{
    public class Globals
    {
        public static String title = "foobar";
    }
} 
```

然后你可以像这样在 cshtml 文件中访问它：

```
<div>@Site.Controllers.Globals.title</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T02:23:11.387

如果它是一个实例变量，您可以将它作为模型的一部分向下传递。如果它是一个静态变量，那么您可以像使用任何其他变量一样显式访问它。

# unix - 环境变量中的 SSH 密钥

> ID：11856808
> 
> 赞同：12
> 
> 时间：2012-08-08T02:21:29.673
> 
> 标签：unix, heroku, ssh, private-key

因此，我正在设置一个非常棒的 hubot 设置，它将通过免费的 heroku nodejs 应用程序自动将代码从 github 部署到 heroku。我无法在 AWS 上正确签出 repo。我在远程机器上创建了 SSH 密钥，让它们工作并验证了它。然后，我将它们添加为 Heroku 环境变量，如下所示：

```
~$ heroku config:add PRIVATE_KEY="...
aoijsdfasoidjfasodijfasodifjaodsifjasdofija" 
```

然后我尝试将公钥和私钥回显到它们在 中的正常位置`.ssh/id_rsa`，但他们要求我输入密码，我没有设置，并且总是失败。

知道如何成功地将密钥写入环境变量吗？我认为这与换行符没有正确显示有关。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-08T02:29:33.037

啊！当然。

如果你这样做`echo "$VAR"`，它会保留它的格式。现在更新我的脚本。

（我整天都在做这个。谢谢橡皮鸭。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-28T00:44:28.737

如果您想从密钥文件中读取，则可以：

```
heroku config:set PRIVATE_KEY="$(cat id_rsa)" 
```

# c# - DependencyProperty 绑定不会更新到集合 CurrentItem

> ID：11856810
> 
> 赞同：1
> 
> 时间：2012-08-08T02:21:33.040
> 
> 标签：c#, .net, wpf, xaml, binding

我正在尝试将依赖属性绑定到集合的当前选择，并且由于我似乎无法理解的原因，当集合更改时绑定不会更新。

在下面的示例中，我展示了两个示例。一种是正确更新（在文本块/运行上），另一种仅显示初始元素，并且在数据网格选择更改时不会更改。

```
<Grid>
    <Grid.Resources>
        <CollectionViewSource Source="{Binding Path=List}" x:Key="myViewModel"/>
        <my:UpdateNotWorking MyObjModel="{Binding Source={StaticResource myViewModel}, Path=CurrentItem}" x:Key="updateNotWorking" />
    </Grid.Resources>

    <DataGrid ItemsSource="{Binding Source={StaticResource myViewModel}}" Name="mylistbox"/>
    <TextBlock TextWrapping="Wrap" FontWeight="Bold" Foreground="#FF50CEFF" FontSize="24" TextAlignment="Center" Height="75">
            <Run Text="{Binding Source={StaticResource myViewModel}, Path=text}" Foreground="#FF00E200" />
    </TextBlock>
    <TextBox Text="{Binding Source={StaticResource updateNotWorking}, Path=MyObjModel.text}" Height="22"/>

</Grid> 
```

在此示例中，我的依赖属性是“UpdateNotWorking”依赖对象上的“MyObjModel”，它是从 xaml 代码实例化的。

我将不胜感激有关为什么我的财产没有正确更新的任何信息。

[示例项目](https://skydrive.live.com/redir?resid=100AF80ACE896AA0!6327&authkey=!AGK5kaxS6cpFtEg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:19:11.493

将此 XAML 粘贴到您的 MainWindow 中。

```
 <Grid>
    <Grid.Resources>
      <CollectionViewSource Source="{Binding Path=List}" x:Key="myViewModel" />
      <my:UpdateNotWorking x:Key="updateNotWorking" />
    </Grid.Resources>

    <DataGrid ItemsSource="{Binding Source={StaticResource myViewModel}}" Name="mylistbox"
              SelectedItem="{Binding Source={StaticResource updateNotWorking}, Path=MyObjModel, UpdateSourceTrigger=PropertyChanged}" />
    <TextBlock TextWrapping="Wrap" FontWeight="Bold" Foreground="#FF50CEFF" FontSize="24" TextAlignment="Center"
               Height="75">
      <Run Text="{Binding Source={StaticResource myViewModel}, Path=text}" Foreground="#FF00E200" />
    </TextBlock>
    <TextBox Text="{Binding Source={StaticResource updateNotWorking}, Path=MyObjModel.text, UpdateSourceTrigger=PropertyChanged}"
             Height="22" />

  </Grid> 
```

它现在所做的是根据 DataGrid 的设置`updateNotWorking`的属性，设置为立即查看更改。我们不再需要通过 List 的 CurrentItem 定义 ' 属性，因为它不会仅通过使用 DataGrid 选择它来改变。您*可以*保持设置，但这不是必需的，因为我们正在使用.`MyObjModel``SelectedValue``UpdatePropertyTrigger``PropertyChanged``updateNotWorking`*`DataGrid SelectedValue`*

# python - 在实时推文流中跟踪关键字

> ID：11856815
> 
> 赞同：0
> 
> 时间：2012-08-08T02:22:20.000
> 
> 标签：python, twitter, tweepy

我安装并试用了 tweepy，我现在正在使用以下功能：

来自[API 参考](http://packages.python.org/tweepy/html/api.html#api-reference)

> API.public_timeline()
> 
> 返回已设置自定义用户图标的非受保护用户的 20 个最新状态。公共时间线被缓存了 60 秒，因此更频繁地请求它是一种资源浪费。

但是，我想从完整的直播流中提取与某个正则表达式匹配的所有推文。我可以放入`public_timeline()`一个`while True`循环中，但这可能会遇到速率限制问题。无论哪种方式，我都不认为它可以涵盖所有当前的推文。

那怎么可能呢？如果不是所有推文，那么我想提取与某个关键字匹配的尽可能多的推文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:47:11.183

流式 API 是您想要的。我使用了一个名为 tweetstream 的库。这是我的基本聆听功能：

```
def retrieve_tweets(numtweets=10, *args):
"""
This function optionally takes one or more arguments as keywords to filter tweets.
It iterates through tweets from the stream that meet the given criteria and sends them 
to the database population function on a per-instance basis, so as to avoid disaster 
if the stream is disconnected.

Both SampleStream and FilterStream methods access Twitter's stream of status elements.
For status element documentation, (including proper arguments for tweet['arg'] as seen
below) see https://dev.twitter.com/docs/api/1/get/statuses/show/%3Aid.
"""   
filters = []
for key in args:
    filters.append(str(key))
if len(filters) == 0:
    stream = tweetstream.SampleStream(username, password)  
else:
    stream = tweetstream.FilterStream(username, password, track=filters)
try:
    count = 0
    while count < numtweets:       
        for tweet in stream:
            # a check is needed on text as some "tweets" are actually just API operations
            # the language selection doesn't really work but it's better than nothing(?)
            if tweet.get('text') and tweet['user']['lang'] == 'en':   
                if tweet['retweet_count'] == 0:
                    # bundle up the features I want and send them to the db population function
                    bundle = (tweet['id'], tweet['user']['screen_name'], tweet['retweet_count'], tweet['text'])
                    db_initpop(bundle)
                    break
                else:
                    # a RT has a different structure.  This bundles the original tweet.  Getting  the
                    # retweets comes later, after the stream is de-accessed.
                    bundle = (tweet['retweeted_status']['id'], tweet['retweeted_status']['user']['screen_name'], \
                              tweet['retweet_count'], tweet['retweeted_status']['text'])
                    db_initpop(bundle)
                    break
        count += 1
except tweetstream.ConnectionError, e:
    print 'Disconnected from Twitter at '+time.strftime("%d %b %Y %H:%M:%S", time.localtime()) \
    +'.  Reason: ', e.reason 
```

我有一段时间没看，但我很确定这个库只是在访问示例流（而不是 firehose）。HTH。

编辑添加：您说您想要“完整的直播”，也就是消防软管。这在财政和技术上都很昂贵，而且只有非常大的公司才能拥有它。查看文档，您会发现该示例基本上具有代表性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T02:26:38.203

看看[流式 API](https://dev.twitter.com/docs/streaming-apis)。您甚至可以订阅您定义的单词列表，并且只返回与这些单词匹配的推文。

流式 API 速率限制的工作方式不同：每个 IP 获得 1 个连接，每秒最多事件数。如果发生的事件多于该事件，那么无论如何您只会获得最大值，并会通知您由于速率限制而错过了多少事件。

我的理解是流式 API 最适合根据需要将内容重新分发给您的用户的服务器，而不是由您的用户直接访问 - 常设连接很昂贵，并且 Twitter 在太多失败的连接后开始将 IP 列入黑名单并重新连接，之后可能还有您的 API 密钥。

# asp.net-mvc - 带有jquery getjson的mvc c#没有关闭模式弹出窗口，而是重定向到带有json结果的另一个页面

> ID：11856818
> 
> 赞同：0
> 
> 时间：2012-08-08T02:22:51.233
> 
> 标签：asp.net-mvc, jquery-ui, jquery, jquery-ui-dialog

所以我不确定这里发生了什么。我有这个从动作加载部分视图的模式弹出窗口（这可能是问题？？）。部分视图加载完美并且处理良好，但是一旦帖子结束并且应该返回一个 json，而不是模式只是关闭然后发布结果，它将我重定向到显示 json 结果的另一个页面（而不是部分视图）。我不完全确定我接近这个的方式是否正确。我只需要在操作成功处理后关闭对话框，然后如果它保存了事务或抛出错误，则返回一条消息。

任何建议表示赞赏。谢谢！！！

```
<script type="text/javascript">
    $(function () {
        $('#modal-link').click(function () {
            var href = this.href;
            $('#load-modal-dialog').dialog({
                modal: true,
                open: function (event, ui) {
                    $(this).load(href, function (result) {
                        $('#new-registration').submit(function () {
                            $.getJSON(href, function (data) {
                                if (data.success == true) {
                                    $('#messages').html('woo!');
                                } else {
                                    $('#messages').html('dafuq');
                                }
                                this.dialog('close');
                            });
                        });
                    });
                }
            });
            return false;
        });
    });
</script> 
```

我在弹出窗口中加载的部分视图

```
<% using (Html.BeginForm("New", "Registration",  FormMethod.Post, new { id = "new-registration" })){ %>
    <h2>Register Participant:</h2>
    <div class="">
        <%: Html.ValidationSummary(null, new { @class = "" })%>
        <div class="">
            <div class="">Email Address:</div>
            <div class="">
                <%: Html.TextBox("Email", null, new { @class = "" })%>
            </div>
        </div>
        <button type="submit" value="Submit">Register</button>
    </div>
<% } %> 
```

那个行动

```
public ActionResult New(){
            return PartialView(context.Contest.FirstOrDefault(e => e.Id == 1));
        }

[HttpPost]
public ActionResult New(FormCollection formCollection)
        {
            string email = formCollection["Email"].ToString();

            try
            {
                if (email == "")
                    throw new Exception("Please provide an email address.");

                Registration registration = new Registration
                {
                    ContestId = 1,
                    Email = email
                };

                context.Registration.Add(registration);
                context.SaveChanges();
                return Json(new { success = "true", message = "User succesfully registered to Contest." });
            }
            catch (Exception ex)
            {
                //throw ex;
                return Json(new { success = "false", message = ex.Message });
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:29:00.373

您需要阻止链接的默认操作（打开一个新窗口）。将这些行添加到您的代码中，

```
 $('#modal-link').click(function (event) {
           //....All content..

           event.preventDefault();// this will stop the opening new page
           event.stopPropergation();
           return false;
   }); 
```

# iphone - UIAlertView 按钮到另一个 ViewController

> ID：11856825
> 
> 赞同：0
> 
> 时间：2012-08-08T02:23:45.973
> 
> 标签：iphone, objective-c, xcode4.3, uialertview

我有两个按钮`UIAlertView`。其中一个回去，`TableViewController`而另一个不得不去另一个`ViewController`。去罐头的按钮`TableViewController`可以工作。但是当我单击按钮时，转到的按钮向`ViewController`我显示了一个空白视图。

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
if (buttonIndex == 0)
{
    QuizTableViewController *quizTable = [self.storyboard instantiateViewControllerWithIdentifier:@"quizTable"];

    UINavigationController *quizController = [[UINavigationController alloc] initWithRootViewController:quizTable];
    [quizController setModalTransitionStyle:UIModalTransitionStyleCoverVertical];

    [self presentViewController:quizController animated:YES completion:nil];
}

if (buttonIndex == 1)
{
    QuizAnsViewController *quizAns = [[QuizAnsViewController alloc] initWithNibName:nil bundle:nil]; 

    [self presentViewController:quizAns animated:YES completion:nil];
}

} 
```

代码的第二部分是让按钮转到另一个`ViewController`。

有人可以帮忙吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T04:51:17.420

看来您正在使用故事板，所以这可能有效

```
if (buttonIndex == 1){

   QuizAnsViewController *quizAns = [self.storyboard instantiateViewControllerWithIdentifier:@"Identifier_of_that_view_controller"]; 
   [self presentViewController:quizAns animated:YES completion:nil];
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T04:41:16.763

你使用 NavigationController 比我认为这段代码是解决你的问题。你可以试试。

```
if (buttonIndex == 1)
{

        QuizAnsViewController * quizAns = [[[QuizAnsViewController alloc] initWithNibName:@"QuizAnsViewController" bundle:nil] autorelease];

    [self.navigationController quizAns animated:YES];

} 
```

# du - 针对 netapp 数据 ontap 后端的 du 警告

> ID：11856829
> 
> 赞同：2
> 
> 时间：2012-08-08T02:24:00.780
> 
> 标签：du, netapp

我运行了以下命令 du --apparent-size --block-size=1 --summarize /mnt2/nfspools/_root_root_p1 PS：/mnt2/nfspools/_root_root_p1 是数据 ONTAP 文件管理器中卷的挂载点。

我得到以下输出：

du：警告：循环目录结构。这几乎可以肯定意味着您的文件系统已损坏。通知您的系统经理。以下目录是循环的一部分：`/mnt2/nfspools/_root_root_p1/.snapshot/hourly.0'

du：警告：循环目录结构。这几乎可以肯定意味着您的文件系统已损坏。通知您的系统经理。以下目录是循环的一部分：`/mnt2/nfspools/_root_root_p1/.snapshot/nightly.0'

du：警告：循环目录结构。这几乎可以肯定意味着您的文件系统已损坏。通知您的系统经理。以下目录是循环的一部分：`/mnt2/nfspools/_root_root_p1/.snapshot/hourly.1'

du：警告：循环目录结构。这几乎可以肯定意味着您的文件系统已损坏。通知您的系统经理。以下目录是循环的一部分：`/mnt2/nfspools/_root_root_p1/.snapshot/hourly.2'

du：警告：循环目录结构。这几乎可以肯定意味着您的文件系统已损坏。通知您的系统经理。以下目录是循环的一部分：`/mnt2/nfspools/_root_root_p1/.snapshot/hourly.3'

16384 /mnt2/nfspools/_root_root_p1

当我运行 du 命令时，是否有任何设置我可以执行 netapp data ontap 以避免出现此警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:59:21.473

我想出了如何避免这个警告信息。

在文件管理器卷上，我运行了以下命令：

```
vol options perf_test_pool2 nosnapdir on 
```

上面的命令在访问卷内容时隐藏了 .snapshot 目录。

# c# - 使用 C# 打印 PDF 文件和 Doc 文件

> ID：11856833
> 
> 赞同：0
> 
> 时间：2012-08-08T02:25:12.303
> 
> 标签：c#, pdf, printing, doc

在我的应用程序中，我正在尝试创建一个功能来打印现有的 PDF 或 Doc。如何在 C# 中执行此操作并提供一种机制，以便用户可以选择不同的打印机或其他属性。

我查看了 PrintDialog 但不确定它正在尝试打印什么文件，如果有的话，b/c 输出始终是空白页。也许我只是在那里遗漏了一些东西。

任何建议、示例或示例代码都会很棒！

以下是我的代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
         public Form1()
         {
              InitializeComponent();
         }

         private void button1_Click(object sender, EventArgs e)
         {
              string printPath = 
                   System.Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
              System.IO.StreamReader fileToPrint;
              fileToPrint= new System.IO.StreamReader(printPath + @"\myFile.txt");
              System.Drawing.Font printFont;
              printPDF(e);
              printDocument1.Print();
              fileToPrint.Close();
         }

         private void button2_Click(object sender, EventArgs e)
         {
              //printDoc(e);
         }

         public void printPDF(object sender ,  
                              System.Drawing.Printing.PrintPageEventArgs e))
         {       
              printFont = new System.Drawing.Font("Arial", 10);
              float yPos = 0f;
              int count = 0;
              float leftMargin = e.MarginBounds.Left;
              float topMargin = e.MarginBounds.Top;
              string line = null;
              float linesPerPage = e.MarginBounds.Height /     
                                   printFont.GetHeight(e.Graphics);
              while (count < linesPerPage)
              {
                    line = fileToPrint.ReadLine();
                    if (line == null)
                    {
                         break;
                    }
              yPos = topMargin + count * printFont.GetHeight(e.Graphics);
              e.Graphics.DrawString(line, printFont, Brushes.Black, leftMargin, yPos,
                                  new StringFormat());
              count++;
              }

              if (line != null)
              {
                   e.HasMorePages = true;
              }

              fileToPrint.Close();        
         }

         public void printDoc()
         {
         }
     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:46:34.360

这在过去是有效的：

```
using System.Diagnostics.Process;

...

Process process = new Process();

process.StartInfo.FileName = pathToPdfOrDocFile; 
process.UseShellExecute = true;
process.StartInfo.Verb = "printto";
process.StartInfo.Arguments = "\"" + printerName + "\""; 
process.Start();

process.WaitForInputIdle();
process.Kill(); 
```

要打印到默认打印机，请替换`printto`为`print`，并离开该`Arguments`行。

# c++ - 更改 Visual C++ 编译

> ID：11856839
> 
> 赞同：0
> 
> 时间：2012-08-08T02:26:59.517
> 
> 标签：c++, visual-studio-2010, visual-c++

我一直在环顾四周，可能只是无法在搜索中输入正确的术语，因为我不知道这会被称为什么。我浏览了构建口译员，但我认为这不是我想要的。

假设我想在 Visual C++（2010，如果它真的很重要）中使用 C++ 的基本语法，但将它编译成我自己的格式。所以我会采取：

```
if(myVar == 1) 
```

而不是让 VC++ 组装它，我可以以某种方式将它（无需构建我自己该死的编译器）覆盖到我自己的字节码中，如下所示：

```
1F00EE01 
```

在我想象的字节码语言中，1F 代表 IF，00 是变量号（以某种确定的变量顺序），EE 是运算符“等于”，而 01 则扮演了它的自然角色。

显然它会比这更复杂一些，但现在我只是推测。只是寻找任何方法来使用 VC++ 对已经构建良好的语言的解析，而不是创建我自己的语言并更改编译结果。现在我把它写下来了，这个想法似乎很荒谬，尽管如此，但希望任何回应仍然足够有趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T02:43:28.810

MSVC 有一个内置的编译器，没有办法改变它。

它有一个不可扩展的可能目标平台列表。

# php - Magento：可以从 shell ssh 运行导出配置文件

> ID：11856841
> 
> 赞同：5
> 
> 时间：2012-08-08T02:27:12.527
> 
> 标签：php, magento, export

我正在尝试从 Magento 出口 18,000 种产品，但它卡在了

```
 Warning: Please do not close the window during importing/exporting data 
```

阶段。

我发现可以通过使用快速重新索引这么多产品`php indexer.php --reindex <code>`

是否可以使用类似的东西来强制导出所有产品，或者通过其 ID 运行数据流配置文件？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-08T03:34:41.190

这将按 ID 运行导出配置文件，然后清理 dataflow_batch_? 之后的表。请注意，它以命令行用户身份运行，并且可以以该用户身份创建缓存文件，这在某些 Web 服务器配置下可能会很不方便。运行后清除缓存不会有什么坏处。

有一段时间，在 1.4.1.1 上，这是导出大量产品的唯一方法，直到我们发现内存泄漏并修复它。

```
<?php

/***********************
 * Import/Export Script to run Import/Export profile 
 * from command line or cron. Cleans entries from dataflow_batch_(import|export) table
 ***********************/

$mageconf = './app/etc/local.xml';  // Mage local.xml config
$mageapp  = './app/Mage.php';       // Mage app location
$logfile  = 'export_data.log';      // Import/Export log file

/* uncomment following block when moved to server - to ensure this page is 
 * not accessed from anywhere else 
 */

//if ($_SERVER['REMOTE_ADDR'] !== '<your server ip address>') {
//   die("You are not a cron job!");
//}

/* System -> Import/Export -> Profiles get profile ID from 
 * Magento Import/Export Profiles
 */

$profileId = 9;

/* Post run housekeeping table bloat removal
 * imports use "dataflow_batch_import" table
 * exports use "dataflow_batch_export" table
 */

$table = 'dataflow_batch_export';

/* Scan Magento local.xml file for connection information */

if (file_exists($mageconf)) {

$xml = simplexml_load_file($mageconf, NULL, LIBXML_NOCDATA);

$db['host'] = $xml->global->resources->default_setup->connection->host;
$db['name'] = $xml->global->resources->default_setup->connection->dbname;
$db['user'] = $xml->global->resources->default_setup->connection->username;
$db['pass'] = $xml->global->resources->default_setup->connection->password;
$db['pref'] = $xml->global->resources->db->table_prefix;

} 

else {
    Mage::log('Export script failed to open Mage local.xml', null, $logfile);
    exit('Failed to open Mage local.xml');
}

/* Initialize profile to be run as Magento Admin and log start of export */

require_once $mageapp;
umask(0);
Mage::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID);

$profile = Mage::getModel('dataflow/profile');
$userModel = Mage::getModel('admin/user');
$userModel->setUserId(0);
Mage::getSingleton('admin/session')->setUser($userModel);
$profile->load($profileId);
if (!$profile->getId()) {
    Mage::getSingleton('adminhtml/session')->addError('ERROR: Incorrect profile id');
}

Mage::log('Export ' . $profileId . ' Started.', null, $logfile);

Mage::register('current_convert_profile', $profile);
$profile->run();
$recordCount = 0;
$batchModel = Mage::getSingleton('dataflow/batch');

Mage::log('Export '.$profileId.' Complete. BatchID: '.$batchModel->getId(), null, $logfile);

echo "Export Complete. BatchID: " . $batchModel->getId() . "\n";

/* Connect to Magento database */

sleep(30);

mysql_connect($db['host'], $db['user'], $db['pass']) or die(mysql_error());
mysql_select_db($db['name']) or die(mysql_error());

/* Truncate dataflow_batch_(import|export) table for housecleaning */

$querystring = "TRUNCATE ".$db['pref'].$table;

mysql_query($querystring) or die(mysql_error());

?> 
```

# ios - IOS - 恢复应用内购买

> ID：11856844
> 
> 赞同：2
> 
> 时间：2012-08-08T02:27:43.463
> 
> 标签：ios, in-app

应用内购买的新手。我正在添加一个按钮，允许用户恢复以前购买的产品。当我使用这个时，首先提示用户购买=>输入登录信息->说已经购买->下载产品。我不希望用户确认购买，即使他们没有为同一产品收费。我已阅读有关使用 restoreCompletedTransactions 的信息，有人可以帮我解决我需要用什么替换下面的代码片段。万分感谢！

```
- (IBAction) OnAlreadyBtnClick:(id)sender
{
     /* code to get the in-app product id*/
     SKPayment *payment = [SKPayment paymentWithProductIdentifier:strIAP_Name];
     [[SKPaymentQueue defaultQueue] addPayment:payment];
     /* code to download the product */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T06:21:44.097

只需用这两行替换您的代码

```
[[SKPaymentQueue defaultQueue] addTransactionObserver:self];
[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T10:29:55.297

首先调用这个方法

```
- (void)restoreCompletedTransactions;

- (void)restoreCompletedTransactions {
[[SKPaymentQueue defaultQueue] restoreCompletedTransactions];
 }

 - (IBAction) OnAlreadyBtnClick:(id)sender
 {
 [[RageIAPHelper sharedInstance] restoreCompletedTransactions];
 } 
```

# facebook - 了解 Facebook 注册插件

> ID：11856845
> 
> 赞同：-1
> 
> 时间：2012-08-08T02:28:05.597
> 
> 标签：facebook, facebook-graph-api

我已经在我的网站上成功安装了 Facebook 注册插件，但我还有一些未解决的问题。

1.  通过 Facebook 对用户进行身份验证后，我是否应该将 Facebook 的 UID 存储在我的数据库中，以便将我的应用程序中的记录与 Facebook 用户相关联？

2.  如果我理解正确，Facebook 应该发回一个“访问令牌”到底应该怎么做？应用程序中的每个必需页面是否应该检查此访问令牌，以某种方式验证用户是否已通过身份验证，而不是在每次要验证用户是否仍登录时调用类似 FB.getSession 之类的东西？

3.  如果用户在没有 Facebook 帐户的情况下通过 Facebook 注册进行注册，然后返回是否完全由我来处理用户名和密码的身份验证和存储，或者 Facebook 仍然在这里插话？

4.  App Secret 的用途和用途是什么？

5.  据说 Facebook 会返回一个“签名请求”。这与返回的数据是分开的吗？从 Facebook 返回的每个请求都需要验证签名请求吗？

我还有更多问题要问，但我现在先从这些开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T02:47:41.553

1.  是的。
2.  一旦 API 授予您的应用程序权限，oauth_token 可用于向 API 发出请求。
3.  我没有使用这个工具来保存密码，但是注册流程可以在[这里找到](https://developers.facebook.com/docs/user_registration/flows/)
4.  signed_request 参数使用只有您和 Facebook 知道的应用程序密码进行签名，以确保您收到的数据是 Facebook 发送的实际数据。
5.  Facebook 返回的数据是 signed_request，它是一个编码的 JSON 字符串。如果没有您的应用程序机密，您将无法对其进行解码。您通过解码 signed_request 来验证返回数据。

# c# - CRM 工作流配置文件

> ID：11856849
> 
> 赞同：0
> 
> 时间：2012-08-08T02:28:38.813
> 
> 标签：c#, workflow, dynamics-crm-2011, crm

我在 Dynamics CRM 2011 中创建了一个自定义工作流。我想将我的配置（连接字符串、url 等）存储在 app.config 中。
是否可以从自定义工作流代码中的配置文件（app.config / web.config）中检索该值？
有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:27:55.073

据我所知，你真的不能使用，因为没有可用的。我想你也许可以将它添加到异步服务的 app.config 中，但那可能不受支持，我不确定你会如何阅读它。

我建议改为：

1.  在 Crm 本身中使用设置记录
2.  将它们作为工作流活动的输入（来自 Crm Ui）
3.  使用网络资源

# android - 安卓公开简历

> ID：11856850
> 
> 赞同：1
> 
> 时间：2012-08-08T02:28:48.373
> 
> 标签：android

嗨，我是 Android 新手。我正在使用开放式 CV 开发一个相机应用程序。在某些网站中“并非所有 Android 手机都支持 opencv”。谁能告诉“open cv 将适用于所有 Android 手机”。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:37:37.403

不，OpenCV 不会在所有安卓手机上运行良好 OpenCV Java API 支持的最小平台是 Android 2.2 (API 8)。

如果您想完全访问 OpenCV 库，您必须使用本机代码 (C)，并且您需要具有良好规格的 Android 手机 我正在使用索尼 xperia p、三星 Galaxy S、三星 Galaxy gio、三星 Galaxy S2和三星 Galaxy Note 进行测试

只有 samsung galaxy S2 和 samsung galaxy note 可以顺利运行我的 facedetection 其他参考您可以查看 OpenCV for Android 官方页面 -> [http://opencv.org/platforms/android.html](http://opencv.org/platforms/android.html)

# c# - c#：如何删除 IEnumerable 中的项目

> ID：11856853
> 
> 赞同：0
> 
> 时间：2012-08-08T02:28:59.420
> 
> 标签：c#

我正在制作一个接受 IEnumerable 作为 Itemsource 的自定义网格。但是，在删除方法期间，我无法删除 itemsource 中的项目。你们能帮助我使用下面的代码吗？

```
static void Main(string[] args)
{
    List<MyData> source = new List<MyData>();
    int itemsCount = 20;
    for (int i = 0; i < itemsCount; i++)
    {
       source.Add(new MyData() { Data = "mydata" + i });
    }

    IEnumerable mItemsource = source;
    //Remove Sample of an mItemSource
    //goes here ..
}

public class MyData { public string Data { get; set; } } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T02:30:15.317

你不能。 [`IEnumerable`](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx)（和它的通用对应物[`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)）就是为了这个——枚举一些集合的内容。它不提供修改集合的工具。

如果您正在寻找一个提供修改集合的所有典型方法（例如添加、删除）的接口，那么请查看[`ICollection<T>`](http://msdn.microsoft.com/en-us/library/92t2ye13)或者[`IList<T>`](http://msdn.microsoft.com/en-us/library/5y536ey6)如果您需要按索引访问元素。

或者，如果您的目标是提供`IEnumerable`一些东西，但删除了一些项目，请考虑[`Enumerable.Except()`](http://msdn.microsoft.com/en-us/library/bb300779.aspx)将它们过滤掉（*因为它是枚举的*）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-08T06:22:52.573

我能够使用动态从 Itemsource 中删除 Item

```
 static void Main(string[] args)
    {

        List<MyData> source = new List<MyData>();
        int itemsCount = 20;
        for (int i = 0; i < itemsCount; i++)
        {
            source.Add(new MyData() { Data = "mydata" + i });
        }

        IEnumerable mItemsource = source;

        //Remove Sample of an mItemSource

        dynamic d = mItemsource;
        d.RemoveAt(0);

        //check data
        string s = source[0].Data;
    }
    public class MyData { public string Data { get; set; } } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-08T02:39:49.990

使用 while 循环在删除时遍历列表。

```
int i = 0;
while(i < source.Count){
    if(canBeRemoved(source[i])){
        source.RemoveAt(i);
    }else{
        i++;    
    }
} 
```

# makefile - 关于 Makefile 的几个问题

> ID：11856854
> 
> 赞同：0
> 
> 时间：2012-08-08T02:29:02.553
> 
> 标签：makefile

**问题 1** 如果您定义步骤

```
 22 clean:
  23   rm $(OBJECTS) 
```

如果有什么方法可以优雅地“*什么都不做，如果没有什么要删除*”？

**问题2** 再次假设以下行，当处理行时找不到文件时，是否有办法优雅退出

```
 6 SOURCES = $(shell echo src/*.cpp) 
```

**问题 3** 如何对最终产品进行最终后处理，例如`mv $(PRODUCT) someDir`？这个指令在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:34:39.453

1）只需使用`rm -f`，`rm`如果文件丢失，则忽略它。

3) 这可能只是实际构建产品的目标的最后一步，或者您可以创建一个名为`install`（例如）的目标，该目标取决于您的构建目标，然后包含此`mv`命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:42:20.177

回答**问题 #2**：

```
SOURCES := $(or $(wildcard src/*.cpp), $(warning No source found in 'src')) 
```

当没有匹配`src/*.cpp`模式的文件时，这将发出警告。`SOURCES`变量保持为空。

请参阅 GNU Make 手册中的相应[章节](http://www.gnu.org/software/make/manual/make.html#Make-Control-Functions)。

# httpwebrequest - 使用 httpwebrequest 登录

> ID：11856857
> 
> 赞同：0
> 
> 时间：2012-08-08T02:29:25.363
> 
> 标签：httpwebrequest

我正在尝试通过 httpwebrequest 登录此网站[https://www.bewickedcostumes.com/login.php](https://www.bewickedcostumes.com/login.php)。

//这里是获取

```
https://www.bewickedcostumes.com/login.php?open_in_layer=Y&is_ajax_request=Y&keep_https=Y

GET /login.php?open_in_layer=Y&is_ajax_request=Y&keep_https=Y HTTP/1.1
主持人：www.bewickedcostumes.com
用户代理：Mozilla/5.0 (Windows NT 6.1; rv:14.0) Gecko/20100101 Firefox/14.0.1
接受： */*
接受语言：en-us,en;q=0.5
接受编码：gzip，放气
连接：保持活动
X-Requested-With: XMLHttpRequest
推荐人：https://www.bewickedcostumes.com/login.php
Cookie：store_language=en；__atuvc=22%7C31%2C14%7C32; RefererCookie=http%3A%2F%2Fwww.bewickedcostumes.com%2Fproduct.php%3Fproductid%3D18078%26cat%3D%26bestseller%3DY; GreetingCookie=Sammy+Chan; xid_d9db5C_remember=schan%40dropshipinc.com; xid_d9db5=21e18e3615c5ed2ef0597789bcd74746
If-Modified-Since: 2012 年 8 月 8 日星期三 01:49:39 GMT

```

```
HTTP/1.1 200 正常
日期：格林威治标准时间 2012 年 8 月 8 日星期三 02:10:57
服务器：阿帕奇
过期：1997 年 7 月 26 日星期一 05:00:00 GMT
缓存控制：私有，必须重新验证
P3P: CP="NON CURa ADMa DEVa TAIa CONi OUR DELa BUS IND PHY ONL UNI PUR COM NAV DEM STA"
设置 Cookie：xid_d9db5=21e18e3615c5ed2ef0597789bcd74746；路径=/; 域名=www.bewickedcostumes.com；httponly
最后修改时间：2012 年 8 月 8 日星期三 02:10:57 GMT
变化：接受编码，用户代理
内容编码：gzip
内容长度：1220
保活：超时=5，最大值=99
连接：保持活动
内容类型：文本/html；字符集=iso-8859-1

```

* * *

//这里是POST

```
https://www.bewickedcostumes.com/login.php?open_in_layer=Y&is_ajax_request=Y&keep_https=Y

POST /login.php?open_in_layer=Y&is_ajax_request=Y&keep_https=Y HTTP/1.1
主持人：www.bewickedcostumes.com
用户代理：Mozilla/5.0 (Windows NT 6.1; rv:14.0) Gecko/20100101 Firefox/14.0.1
接受： */*
接受语言：en-us,en;q=0.5
接受编码：gzip，放气
连接：保持活动
内容类型：application/x-www-form-urlencoded；字符集=UTF-8
X-Requested-With: XMLHttpRequest
推荐人：https://www.bewickedcostumes.com/login.php
内容长度：119
Cookie：store_language=en；__atuvc=22%7C31%2C14%7C32; RefererCookie=http%3A%2F%2Fwww.bewickedcostumes.com%2Fproduct.php%3Fproductid%3D18078%26cat%3D%26bestseller%3DY; GreetingCookie=Sammy+Chan; xid_d9db5C_remember=schan%40dropshipinc.com; xid_d9db5=21e18e3615c5ed2ef0597789bcd74746
Pragma：无缓存
缓存控制：无缓存
xid_d9db5=21e18e3615c5ed2ef0597789bcd74746&is_remember=&mode=login&username=schan%40dropshipinc.com&password=4700Miller

```

```
HTTP/1.1 200 正常
日期：格林威治标准时间 2012 年 8 月 8 日星期三 02:11:06
服务器：阿帕奇
过期：1997 年 7 月 26 日星期一 05:00:00 GMT
缓存控制：私有，必须重新验证
P3P: CP="NON CURa ADMa DEVa TAIa CONi OUR DELa BUS IND PHY ONL UNI PUR COM NAV DEM STA"
设置 Cookie：xid_d9db5=21e7b58ed5b06ad7d5897ad641186f8b；路径=/; 域名=www.bewickedcostumes.com；httponly
Set-Cookie: GreetingCookie=Sammy+Chan; expires=周一，2013 年 2 月 4 日 02:11:06 GMT；路径=/; 域名=www.bewickedcostumes.com；httponly
最后修改时间：格林威治标准时间 2012 年 8 月 8 日星期三 02:11:06
变化：接受编码，用户代理
内容编码：gzip
内容长度：193
保活：超时=5，最大值=100
连接：保持活动
内容类型：文本/html；字符集=iso-8859-1

```

我的代码可以登录许多网站，但在这个网站上它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:45:58.483

这部分是在登录页面上生成的唯一代码：xid_d9db5=21e18e3615c5ed2ef0597789bcd74746

刮掉上面的字段和值并将其添加到 POST 请求中，而不是将上面的确切代码添加到您的请求中。

（您可能还想更小心地隐藏您的 POST 数据，以防您在其他地方使用它们的详细信息！）

# php - 如果不在 HTML 标记中，则 php 正则表达式匹配字符串

> ID：11856858
> 
> 赞同：1
> 
> 时间：2012-08-08T02:29:31.123
> 
> 标签：php, regex, drupal, drupal-modules

我正在尝试解决 Drupal 的 Hashtags 模块中的这个错误：http: [//drupal.org/node/1718154](http://drupal.org/node/1718154)

我有这个函数可以匹配文本中以“#”为前缀的每个单词，例如#tag：

```
function hashtags_get_tags($text) {
    $tags_list = array();
    $pattern = "/#[0-9A-Za-z_]+/";
    preg_match_all($pattern, $text, $tags_list);
    $result = implode(',', $tags_list[0]);
    return $result;
    } 
```

我需要**忽略**页面中的内部链接，例如`<a href="#reference">link</a>`，或者更一般地说，任何以 # 为前缀的出现在 HTML 标记内的单词（所以前面是 <，后面是 >）。

知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:41:23.350

您可以先剥离标签，因为匹配（使用[strip_tags](http://php.net/manual/en/function.strip-tags.php)功能）？

```
function hashtags_get_tags($text) {

    $text = strip_tags($text);

    $tags_list = array();
    $pattern = "/#[0-9A-Za-z_]+/";
    preg_match_all($pattern, $text, $tags_list);
    $result = implode(',', $tags_list[0]);
    return $result;
} 
```

如果您只想匹配*不在*HTML 标签内的主题标签，那么正则表达式将会很棘手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T02:50:53.640

[您可以使用preg_replace](http://www.php.net/manual/en/function.preg-replace.php)事先丢弃标签

```
function hashtags_get_tags($text) {
$tags_list = array();
$pattern = "/#[0-9A-Za-z_]+/";
$text=preg_replace("/<[^>]*>/","",$text);
preg_match_all($pattern, $text, $tags_list);
$result = implode(',', $tags_list[0]);
return $result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T04:42:55.937

我使用[PHP DOM](http://php.net/manual/en/book.dom.php)制作了这个函数。

它返回所有`#`在`href`.

如果您希望它仅删除内部哈希标签，请替换此行：

```
if(strpos($link->getAttribute('href'), '#') === false) { 
```

有了这个：

```
if(strpos($link->getAttribute('href'), '#') !== 0) { 
```

这是功能：

```
function no_hashtags($text) {
    $doc = new DOMDocument();
    $doc->loadHTML($text);
    $links = $doc->getElementsByTagName('a');
    $nohashes = array();
    foreach($links as $link) {
        if(strpos($link->getAttribute('href'), '#') === false) {
            $temp = new DOMDocument();
            $elem = $temp->importNode($link->cloneNode(true), true);
            $temp->appendChild($elem);
            $nohashes[] = $temp->saveHTML();
        }
    }
    // return $nohashes;
    return implode('', $nohashes);
    // return implode(',', $nohashes);
} 
```

# c# - 将 XML 数据解析为 RichTextBox 但结果中仅出现一项

> ID：11856868
> 
> 赞同：0
> 
> 时间：2012-08-08T02:30:45.860
> 
> 标签：c#, winforms, xml-parsing

我正在做我的项目，我对 C# 完全陌生，我需要使用 C# 来完成我的工作。我真的希望你们能在下面的问题中帮助我。您的帮助将不胜感激！！谢谢。

我有一个 XML 文件，其中有两个`<item>...</item>`parent `<channel>`。我执行了我的代码，我得到的只是如下 -`<item>`出现了一个数据：

> 标题：回复：我对 Tesco 的看法
> 
> 说明：当它进入市场时，请远离 iii IPO。3个季度是倍数，三倍，四极，WTF。就像 ebay 那里有很多竞价一样，也是假的。
> 
> 今天的想法：奇怪的是，德勤似乎逃脱了头条新闻。指控它与渣打勾结监管报告 cd 被安然时刻 还记得那些老会计师德勤、海曼先生（RBS）吗？通过 铁杆骚动
> 
> 日期：格林威治标准时间 2012 年 8 月 7 日星期二 14:03:00
> 
> ## 作者：铁杆骚动

我的代码如下：

```
 private void btnComSearch_Click(object sender, EventArgs e)
        {
        XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.Load("tsco.xml");

        XmlElement root = xmlDoc.DocumentElement;
        XmlNodeList nodes = root.SelectNodes("item"); 
        foreach (XmlNode node in nodes)
        {
            XmlNodeList comTitle = xmlDoc.GetElementsByTagName("title");
            XmlNodeList comDesc = xmlDoc.GetElementsByTagName("description");
            XmlNodeList comDate = xmlDoc.GetElementsByTagName("pubDate");
            XmlNodeList comAuthor = xmlDoc.GetElementsByTagName("creator");

            StringBuilder sb = new StringBuilder();

            sb.AppendLine("Title: " + comTitle[0].InnerText + "\n");
            sb.AppendLine("Desciption: " + comDesc[0].InnerText + "\n");
            sb.AppendLine("Date: " + comDate[0].InnerText + "\n");
            sb.AppendLine("Author: " + comAuthor[0].InnerText + "\n" + "---------------" + "\n");

            richComResults.Text = sb.ToString();
        }
    } 
```

我的 XML 文件：

```
<channel>
<item>
      <title>Re: My view of Tesco</title>
      <description>
         <![CDATA[ Stay clear of the iii IPO when it comes onto the market.  3 quarters are multiples, triples, quadrupole, W-T-F.  It´s like ebay a lot bidding there, is fake too.Today´s thought of the day:  Odd is that Deloitte seems to have escaped headlines. Accusation it colluded with Standard Chartered on regulatory report cd be Enron moment  Remember those old accountants Deloitte, Mr. Hyman (RBS)? By Hardcore Uproar ]]>
      </description> 
      <pubDate>Tue, 07 Aug 2012 14:03:00 GMT</pubDate>
      <creator>Hardcore Uproar</creator>
</item>
<item>
      <title></title>
      <description>
         <![CDATA[ Raw material inflation;
         Rising (relative) 
         wealth outside of EU.
         Increased global demand for agri-commodities due to increasing population and relative wealth of Eastern countries.
         Decoupling of subsidy from agri-production = bad for supermarkets.
         Weather problems, diminished /(ing) resources and a general plateau reached in agriculture in terms of yield achievable = limited supply.
         Over supply of supermarkets/ retailers (too much choice= supply>demand)
         Diminished disposable income; 
         General recession.
         Poor pension performance.
         Over indebtidness in UK (further compounded by any increases in interest rates required to curb inflation).

         All this is bad news for supermarkets.. in my locality in a farily small town of 14,000 people we have a large ASDA, huge TESCO and M and S and numerous discounters.. they must be counting on all 14000 of those people visiting ALL of their local supermarkets at least 9 times a week IMHO!!
          By t8vet ]]>
       </description>
      <pubDate>Mon, 06 Aug 2012 18:47:00 GMT</pubDate>
      <creator>t8vet</creator>
</item>
</channel> 
```

应用您的（horgh）代码后我的编辑代码：

```
private void btnComSearch_Click(object sender, EventArgs e)
        {
            XmlDocument xmlDoc = new XmlDocument(); //* create an xml document object.
            xmlDoc.Load("tsco.xml"); //* load the XML document from the specified file.

            XmlElement root = xmlDoc.DocumentElement;
            XmlNodeList nodes = root.SelectNodes("item"); // You can also use XPath here
            foreach (XmlNode node in nodes)
            {
                StringBuilder sb = new StringBuilder();
                foreach (XmlNode child in node.ChildNodes)
                    sb.AppendLine(string.Format("{0}:\t{1}", child.Name, child.FirstChild == null ? string.Empty : child.FirstChild.Value));
                richComResults.Text = sb.ToString();
            }
            Console.ReadLine();
        } 
```

我完全迷路了。我尝试浏览网站，也有人问类似的问题，但我不太明白，我试过它们在我的情况下不起作用。我不确定我做错了什么。非常感谢您的帮助:) 非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:42:49.270

您正在观看 xmlDoc，同时您应该观看每个节点。尝试这个：

```
 XmlDocument xmlDoc = new XmlDocument(); //* create an xml document object.
        xmlDoc.Load("tsco.xml"); //* load the XML document from the specified file.

        richComResults.Text = string.Empty;

        XmlElement root = xmlDoc.DocumentElement;
        XmlNodeList nodes = root.SelectNodes("item"); // You can also use XPath here
        StringBuilder sb = new StringBuilder();

        foreach (XmlNode node in nodes)
        {                
            foreach (XmlNode child in node.ChildNodes)
                sb.AppendLine(string.Format("{0}:\t{1}", child.Name,  child.FirstChild == null ? string.Empty : child.FirstChild.Value));                
        }
        richComResults.Text = sb.ToString(); 
```

# android - 如何在android中播放网站上的视频？

> ID：11856870
> 
> 赞同：-2
> 
> 时间：2012-08-08T02:30:52.260
> 
> 标签：android, android-emulator, android-widget, android-video-player

如何在 android 中播放来自 URL 的视频？没有新的意图？可用吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T04:17:41.957

尝试这个

```
String url="your video url";
VideoView videoView = new VideoView(this);
videoView.setVideoURI(Uri.parse(url));
setContentView(videoView);
videoView.setMediaController(new MediaController(this)); 
```

希望帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T06:01:40.597

试试这个代码......它应该可以正常工作。

```
VideoView videoView = (VideoView) findViewById(R.id.video_view);
MediaController mediaController = new MediaController(this);
mediaController.setAnchorView(videoView);
String link = "http://www.youtube.com/watch?v=lEbxLDuecHU&playnext=1&list=PL040F3034C69B1674";
Uri videoLink = Uri.parse(link);
videoView.setMediaController(mediaController);
videoView.setVideoURI(videoLink);
videoView.start(); 
```

# ios - 使用 arc4random iOS 设置坐标范围

> ID：11856872
> 
> 赞同：0
> 
> 时间：2012-08-08T02:31:05.533
> 
> 标签：ios, coordinates, arc4random

按下按钮时，我需要在 iPhone 屏幕周围随机放置一个 UIButton。我可以成功地做到这一点，但我的 UIButton 有时会出现在边缘被切断。所以我的问题是，如何为 arc4random 设置坐标范围？（例如，仅从 x:75 y:75 到 x:345 y:405。）如果有任何帮助，这是我的 IBAction：

```
- (IBAction) stackOverflowExampleButtonPressed
{  
    CGPoint position;
    position.x = (arc4random() % (75)) + 345;
    position.y = (arc4random() % (75)) + 405;

    anExampleButton.center = position;
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:59:36.393

```
- (IBAction) stackOverflowExampleButtonPressed
{  
CGPoint position;
position.x = arc4random()%346 + 75;
position.y = arc4random()%406 + 75;

//it's random from 0 to 345 + 75 so when it's 0 coord= 75..when it's 345 coord =420

anExampleButton.center = position;
} 
```

如果您在按钮中间有原点，请执行以下操作：

```
position.x=arc4random()%(view.width-button.width)+button.width/2
position.x=arc4random()%(view.height-button.height)+button.height/2 
```

你明白了……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T02:39:35.600

像这样的东西：

```
float x = 75 + rand() % (345 - 75 - anExampleButton.frame.width);
float y = 75 + rand() % (405 - 75 - anExampleButton.frame.height);
anExampleButton.frame = CGRectMake(x, y, anExampleButton.frame.width, anExampleButton.frame.height); 
```

# android - 更改同一 LinearLayout 中的另一个 TextView 时，TextView 重新启动 Marquee

> ID：11856875
> 
> 赞同：8
> 
> 时间：2012-08-08T02:31:50.637
> 
> 标签：android, android-linearlayout, marquee

我有 LinearLayout 并且在 2 TextView 里面都有选取框，当我在第一个更新文本时，第二个 TextView 重新启动选取框。

```
 <LinearLayout
                android:id="@+id/panel"
                android:layout_width="320dp"
                android:layout_height="match_parent"
                android:layout_marginLeft="2dp"
                android:layout_marginRight="2dp"
                android:gravity="center_vertical"
                android:orientation="vertical" >

                <TextView
                    android:id="@+id/first"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:ellipsize="marquee"
                    android:gravity="bottom|center_horizontal"
                    android:marqueeRepeatLimit="marquee_forever"
                    android:singleLine="true" />

                <TextView
                    android:id="@+id/second"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:ellipsize="marquee"
                    android:gravity="top|center_horizontal"
                    android:marqueeRepeatLimit="marquee_forever"
                    android:singleLine="true"
                      />
            </LinearLayout> 
```

我发现 if for `R.id.first`and `R.id.second`i set`layout_width="320dp"`效果不会发生。但是我想设置`android:layout_width="match_parent"`有一些解决方法吗？

我发现了类似的问题但没有解决方案： [Android, RelativeLayout restarts Marquee-TextView when changed ImageView in same RelativeLayout](https://stackoverflow.com/questions/8203286/android-relativelayout-restarts-marquee-textview-when-changing-imageview-in-sam)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-12T14:35:19.050

我有一个类似的问题，解决方案是为 Textview 设置固定大小。

那么为什么不以编程方式进行呢？就我而言，它解决了问题。这是我的详细解决方案：

布局有点复杂，有很多变化的值。这是有趣的部分：

布局.xml：

```
<!-- The height and visibility values change programatically -->
<RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="30dp" 
    android:layout_alignParentBottom="true"
    android:visibility="gone" >

    <FrameLayout>
        ...
        // some code
        ...
    </FrameLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="fill_parent" />

        <!-- My scrolling textview. see below. -->
        <!-- The size will be set when -->
        <!-- the layout will be draw, -->
        <!-- after the Activity.onCreate(). -->
        <!-- I removed ALL THE UNECESSARY (I mean  -->
        <!-- scrollHorizontally, focusable and focusableInTouchMode. -->
        <!-- You don't need it !!!!) -->
        <fr.cmoatoto.android.widget.ScrollingTextView 
            android:id="@+id/text"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:singleLine="true"
            android:ellipsize="marquee"
            android:marqueeRepeatLimit="marquee_forever" />

        <ImageView
            ...
            // some code
            ... />
    </LinearLayout>
</RelativeLayout> 
```

ScrollingTextView 已在此[答案中定义](https://stackoverflow.com/a/2504840/1823503)

又来了：

ScrollingTextView.java：

```
public class ScrollingTextView extends TextView {

    public ScrollingTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public ScrollingTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public ScrollingTextView(Context context) {
        super(context);
    }

    @Override
    protected void onFocusChanged(boolean focused, int direction, Rect previouslyFocusedRect) {
        if(focused)
            super.onFocusChanged(focused, direction, previouslyFocusedRect);
    }

    @Override
    public void onWindowFocusChanged(boolean focused) {
        if(focused)
            super.onWindowFocusChanged(focused);
    }

    @Override
    public boolean isFocused() {
        return true;
    }
} 
```

最后是活动。正如我之前所说，您需要设置固定的宽度和高度，因此我们将使用 onCreate() 中的侦听器以编程方式进行：

我的活动.java：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.layout);

    TextView textView = ((TextView) findViewById(R.id.home_trafic_text));
    textView.setText(getString(R.string.loading));
    textView.setEnabled(true); // Thanks to Romain Guy
    textView.addOnLayoutChangeListener(new OnLayoutChangeListener() {
        @Override
        public void onLayoutChange(View v, int left, int top, int right,
                int bottom, int oldLeft, int oldTop, int oldRight, int oldBottom) {
            LayoutParams params = v.getLayoutParams();
            params.width = right - left;
            params.height = bottom - top;
            params.weight = 0;
            v.removeOnLayoutChangeListener(this);
            v.setLayoutParams(params);
        }
    });
} 
```

如果你需要改变方向或类似的事情要小心，但这对我来说效果很好！

**----为 PRE-API-11 编辑---**

因为`OnLayoutChangeListener`只存在于 Api v11，所以有一个解决方法（它有效，但我认为它不太好）：

`OnLayoutChangeListener`从您的活动中删除：

我的活动.java：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.layout);

    TextView textView = ((TextView) findViewById(R.id.home_trafic_text));
    textView.setText(getString(R.string.loading));
    textView.setEnabled(true); // Thanks to Romain Guy
} 
```

`onSizeChanged`并在您的 ScrollingTextView添加一个：

ScrollingTextView.java：

```
public class ScrollingTextView extends TextView {

    ...
    // Same code as before
    ...

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
    LayoutParams params = (LayoutParams) getLayoutParams();
        params.width = w;
        params.height = h;
        params.weight = 0;
        setLayoutParams(params);
    }
} 
```

我希望它有帮助！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-02-05T06:58:30.500

您应该防止将两个选取框放在同一个 ViewGroup 中。在您的情况下，您可以使用 LinearLayout 包装每个选取框 TextView（如果使用 RelativeLayout，这将不起作用）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-25T17:47:10.437

只是一个简单的修复..:) 无需担心...只需将 textview 的宽度固定为 800dp 或更高的宽度。它将解决重置问题

# javascript - 如何使用Javascript根据html文件中的下拉值过滤xsl文件？

> ID：11856879
> 
> 赞同：1
> 
> 时间：2012-08-08T02:32:12.430
> 
> 标签：javascript, xslt, dom-events, xslt-1.0

这是我的 htm 文件，包括 Javascript 函数。

```
<html>
<head>
<title>Personal Info</title>
<script type="text/javascript" src="library.js"></script>
<script type="text/javascript">
   var IE= window.ActiveXObject ? true:false;
   var MOZ= document.implementation.createDocument ? true: false;

   var xmlFile="person.xml";
   var xsltFile="person.xsl";

   var xmlDoc;  <!--//Source XML document-->
   var xsltDoc; <!--//XSLT style sheet document for person.xsl-->

   function createXDoc(xFile, PID)
   {
    if (IE) {
    xDoc=new ActiveXObject(getPID(PID));
    }
    else if (MOZ) {
    xDoc= document.implementation.createDocument("", "", null);
    }

    loadDoc(xDoc, xFile);
    return xDoc;
    }

function runTransform(xDoc, xsltDoc) {
    if (IE) {
    var resultStr=xDoc.transformNode(xsltDoc);
         }
    }               
function init() 
           {
           var myElem= document.getElementById("persontable");
           xmlDoc=createXDoc(xmlFile, DOMPID);
           xsltDoc= createXDoc(xsltFile, DOMPID);
           myElem.innerHTML=runTransform(xmlDoc, xsltDoc);
     }
</script>
</head>
<body>
<div>
<h1 class="title">
  PERSONAL INFO
</h1> 
     <select id="statedropdown" name="statedropdown"> 
        <option value="MI">MI</option>
        <option value="MN">MN</option>
     </select>  
</div>
<div id="persontable">
   <!--Contents goes here-->
</div>
</body>
</html> 
```

这是我的 XML 文件。

```
<person>
  <first_name>Jane</first_name>
  <last_name>Whitney</last_name>
  <state>MI</state>
</person>
<person>
  <first_name>Jack</first_name>
  <last_name>Nicholson</last_name>
  <state>MI</state>
</person>
<person>
  <first_name>Jane</first_name>
  <last_name>Eyre</last_name>
  <state>MN</state>
</person>
<person>
  <first_name>Michael</first_name>
  <last_name>Johnson</last_name>
  <state>MN</state>
</person> 
```

这是我的 XSL 文件

```
<xsl:stylesheet version='1.0' xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" version="4.0" omit-xml-declaration="yes" />
<xsl:param name="group" select="//person" />
<xsl:template match="/">
<table>
  <tr>
    <th>First_Name</th>
    <th>Last_Name</th> 
  </tr>   
<xsl:apply-templates select="$group">
  <xsl:sort select="Last_Name" data-type="text" order="descending" />
</xsl:apply-templates> 
</table>
</xsl:template>

<xsl:template match="person">
<tr>
  <td><xsl:value-of select="First_Name" /></td>
  <td><xsl:value-of select="Last_Name" /> </td>
</tr>
</xsl:template>
</xsl:stylesheet> 
```

我可以使用下拉菜单查看页面，但无法让下拉菜单与页面交互。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-08T23:58:18.917

我知道这是旧的，对某些人来说微不足道。我已经 5 年多没有使用 XSLT 了，并且已经忘记了其中的大部分内容。我已经扩展了 Sean B. Durkin 的答案以显示更多代码（至少我如何实现缺失的部分）。我只在 FireFox 中测试过，不确定它是否可以在其他浏览器中运行。

使用 XML 文件中的第二行将 XSL 绑定到 XML：

```
<?xml-stylesheet type="text/xsl" href="test.xsl" ?> 
```

XML (test.xml):

```
<?xml version='1.0' encoding='UTF-8' standalone='yes' ?>
<?xml-stylesheet type="text/xsl" href="test.xsl" ?>
<data>
    <person>
      <first_name>Jane</first_name>
      <last_name>Whitney</last_name>
      <state>MI</state>
    </person>
    <person>
      <first_name>Jack</first_name>
      <last_name>Nicholson</last_name>
      <state>MI</state>
    </person>
    <person>
      <first_name>Jane</first_name>
      <last_name>Eyre</last_name>
      <state>MN</state>
    </person>
    <person>
      <first_name>Michael</first_name>
      <last_name>Johnson</last_name>
      <state>MN</state>
    </person>
</data> 
```

XSL (test.xsl):

```
<?xml version="1.0" ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:key name="key_state" match="data/person" use="state"/>

<xsl:template match="/">

  <html>
      <head>
          <style type="text/css">
              body 
              {
                font-family:arial,sans-serif;
                color:#000;
                font-size:13px;
                color:#333;
              }
              table 
              {
                font-size:1em;
                margin:0 0 1em;
                border-collapse:collapse;
                border-width:0;
                empty-cells:show;
              }
              td,th 
              {
                border:1px solid #ccc;
                padding:6px 12px;
                text-align:left;
                vertical-align:top;
                background-color:inherit;
              }
              th 
              {
                background-color:#dee8f1;
              }
          </style>

          <script type="text/javascript">

                window.onload = function() {
                    var statedropdown = document.getElementById("state_filter");
                    statedropdown.onchange("Show All");
                }

                function showHideRows(selectedState) {
                    // alert( "showHideRows selectedState: " + selectedState );
                    var table = document.getElementById('display_table');
                    for (var r = 1; r &lt; table.rows.length; r++) {
                            if ( selectedState == "Show All" || selectedState == "undefined" || table.rows[r].getAttribute('data-state') == selectedState)
                        table.rows[r].style.display = '';
                      else
                          table.rows[r].style.display = 'none';
                }
                    }
            </script>    

      </head>
      <body>
      <h2>Test XML/XSL Droprdown</h2>

        <table id="display_table">
          <tr>
            <th>First Name</th>
            <th>Last Name</th>
            <th>State <br />
                <select  name="state_filter" id="state_filter" onChange="showHideRows(this.value);">
                    <option>Show All</option>
                    <xsl:for-each select="data/person[generate-id() = generate-id(key('key_state', state)[1])]">
                        <xsl:sort select="state" />
                <option><xsl:value-of select="state"/></option>
                    </xsl:for-each>"
                </select>

            </th> 

          </tr>   

            <xsl:for-each select="data/person">
                    <xsl:sort select="last_name" />
                <tr>
                    <xsl:attribute name="data-state"><xsl:value-of select="state"/></xsl:attribute>
                  <td><xsl:value-of select="first_name" /></td>
                  <td><xsl:value-of select="last_name" /></td>
                  <td><xsl:value-of select="state" /></td>
                </tr>     
        </xsl:for-each>
      </table>
      </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T00:07:52.863

如果您只有两种状态，请按原样使用样式表，为整个表格呈现 HTML，然后使用 JavaScript 和 OnClick 事件隐藏所有表格行，选定状态除外。通过使用 Javascript，而不是重新构建整个页面，您的页面将对用户输入的响应速度更快。

* * *

## 更新

这是转换后的示例输出文档的示例。我没有包含实际的（**单个**）样式表，因为：

1.  这是微不足道的。
2.  我建议你改成服务器端的转换，而不是客户端。如果在服务器端，实际的样式表会有所不同。

    ```
    <!DOCTYPE html>
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Personal Info</title>

    <script type="text/javascript">

        window.onload = function(){
        var statedropdown = document.getElementById("statedropdown");
        statedropdown.onchange();
        }

      function showHideRows( selectedState){
        var table = document.getElementById('persontable');
        for (var r = 0, n = table.rows.length; r < n; r++) {
                if (table.rows[r].getAttribute('data-state') == selectedState)
                 table.rows[r].style.display = 'none';
                else
                 table.rows[r].style.display = ''
            }
        }
    </script>    
    </head>

    <body>
    <h1 class="title">PERSONAL INFO</h1> 
    <select id="statedropdown" name="statedropdown"
                 onChange="showHideRows(this.value)"> 
            <option value="MI">MI</option>
            <option value="MN">MN</option>
    </select>  

    <table id="persontable">
    <tr>
      <th>First_Name</th>
      <th>Last_Name</th> 
    </tr>   
    <tr data-state="MI">
      <td>Jane</td>
      <td>Whitney</tde>
    </tr>
    <tr state="MI">
      <td>Jack</td>
      <td>Nicholson</td>
    </tr>
    <tr data-state="MN">
      <td>Jane</td>
      <td>Eyre</td>
    </tr>
    <tr data-state="MN">
      <td>Michael</td>
      <td>Johnson</td>
    </tr>
    </table>  
    </body>
    </html> 
    ```

# android - 安卓开发——手机通话状态

> ID：11856884
> 
> 赞同：-1
> 
> 时间：2012-08-08T02:32:52.600
> 
> 标签：android

我是 Android 新手，我需要读取手机的通话状态。应用程序运行（停止）时收到错误消息：

```
package com.example.droid1;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.telephony.PhoneStateListener;
import android.telephony.TelephonyManager;
import android.widget.TextView;
import android.widget.Toast;

public class DroidActivity extends Activity {
    private TextView text0;
    private TelephonyManager telephoneM;
    private PhoneStateListener listner;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_droid);
        text0 = (TextView) findViewById(R.id.textout);
        telephoneM = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
        listner = new PhoneStateListener()
        {
            public void onCallStateChanged(int state, String incomingnumber) {
                String stateS = "N/A";
                switch(state) {
                case TelephonyManager.CALL_STATE_IDLE:
                    stateS = "Oscioso";
                    Toast.makeText(DroidActivity.this, ""+stateS,Toast.LENGTH_SHORT).show();
                    break;
                case TelephonyManager.CALL_STATE_RINGING:
                    stateS = "Sonando";
                    Toast.makeText(DroidActivity.this, ""+stateS,Toast.LENGTH_SHORT).show();
                    break;
                case TelephonyManager.CALL_STATE_OFFHOOK:
                    stateS = "Ocupado";
                    Toast.makeText(DroidActivity.this, ""+stateS,Toast.LENGTH_SHORT).show();
                    break;  
                }
                text0.append (String.format("\nonCallStateChanged: %s",stateS));

            }
        };
        telephoneM.listen(listner, PhoneStateListener.LISTEN_CALL_STATE);
    }
} 
```

我在 Eclipse 中没有任何错误消息，该应用程序在虚拟设备上安装没有问题，但是当它运行时，我收到错误消息“不幸的是 Droid1 已停止”任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T11:17:09.423

检查你的清单。

你有没有把这个权限

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

?

# django - 导入passenger_wsgi.py 文件时出错

> ID：11856885
> 
> 赞同：2
> 
> 时间：2012-08-08T02:32:54.177
> 
> 标签：django, passenger, wsgi, dreamhost

我目前正在尝试使用乘客 wsgi 建立一个 Django 项目。我按照这篇文章中的说明进行操作：

[在 Dreamhost 上使用 virtualenv 更新新的 Django 和 Python 2.7.*（带乘客）](https://stackoverflow.com/questions/10953695/update-django-1-4-and-python-2-7-3-with-virtualenv-on-dreamhost-with-passenger)

但是，我收到一条错误消息“导入您的乘客wsgi.py 时出错”

如果我把它作为我的passenger_wsgi.py，我就能够成功地收到一条你好消息：

```
def application(environ, start_response):
    start_response('200 OK', [('Content-type', 'text/plain')])
    return ["Hello, world!"] 
```

但由于某种原因，如果我使用以下内容（在上面的帖子中概述），我无法克服错误。我在 path.append 和 os.environ 行上用我命名的项目替换了单词“project”，在 path.insert 行上用 subdomain.domain.com 替换。我错过了什么吗？我对这些东西很陌生，如果我能得到任何帮助，我将不胜感激！谢谢。

以下是在导入时收到错误的当前乘客wsgi.py。

```
import sys, os
cwd = os.getcwd()
sys.path.append(cwd)
sys.path.append(cwd + '/project')

if sys.version < "2.7.3": os.execl("$HOME/<site>/env/bin/python",
"python2.7.3", *sys.argv)

sys.path.insert(0,'$HOME/<site>/env/bin')
sys.path.insert(0,'$HOME/<site>/env/lib/python2.7/site-packages/django')
sys.path.insert(0,'$HOME/<site>/env/lib/python2.7/site-packages')

os.environ['DJANGO_SETTINGS_MODULE'] = "project.settings"
import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

* * *

**更新**我能够获得一个导入的乘客 wsgi，但现在我收到 500 错误。这是我现在坐的：

```
import sys, os
sys.path.append(os.getcwd())
sys.path.append(os.path.join(os.getcwd(), 'project'))

sys.path.insert(0, 'home/<site>/env/bin')
sys.path.insert(0, 'home/<site>/env/lib/python2.7/site- packages/django')
sys.path.insert(0, 'home/<site>/env/lib/python2.7/site-packages')
sys.path.insert(0, 'home/<site>/roommates')

os.environ['DJANGO_SETTINGS_MODULE'] = "project.settings"
import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

我又一次被困住了。我似乎无法找到我收到此错误的原因。每次尝试显示在错误日志中的当前错误如下：

```
Premature end of script headers:
Premature end of script headers: internal_error.html 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T21:01:48.867

你应该改变这一行：

```
sys.path.append(os.path.join(os.getcwd(), 'project')) 
```

进入

```
sys.path.append(os.path.join(os.getcwd() + 'project')) 
```

并确保您使用真实项目（或 django 应用程序）的名称更改*项目*

# java - 当设备面向横向时隐藏标题栏/通知栏

> ID：11856886
> 
> 赞同：10
> 
> 时间：2012-08-08T02:33:08.340
> 
> 标签：java, android, titlebar, device-orientation

当我将设备转为横向时，我希望隐藏我的标题栏。我已经看到了隐藏标题栏的 XML 选项，以及以下以编程方式执行此操作的示例：

```
//Remove title bar
this.requestWindowFeature(Window.FEATURE_NO_TITLE);
//Remove notification bar
this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

但是，我正在使用`configChanges`参数 for `orientation`and `screenSize`，因此当我的活动面向横向时，它不会再次重新创建（我这样做是出于某些原因）。所以我不能使用上述方法，因为这些调用需要在之前进行`setContentView()`。

那么有什么想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-05-07T00:44:28.497

正在寻找答案，最终来到这里，把这些碎片放在一起，它们就在这里：

```
if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {
  getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
}
else {
  getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-09T14:36:18.303

假设您已经在清单中定义`configChanges`了，那么您可以实现您的问题覆盖方法：`Activity``onConfigurationChanged`

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
     super.onConfigurationChanged(newConfig);
     if(newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
          getActionBar().hide();
     } else {
          getActionBar().show();
     }
} 
```

如果使用支持库，则必须使用`getSupportActionBar()`而不是。`getActionBar()`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T04:31:47.643

first check your device orientation by using following code

**The current configuration, as used to determine which resources to retrieve etc, as available from the Resources' Configuration object as:**

```
getResources().getConfiguration().orientation 
```

Then do the necessary coding related to hide title bar and notification bar.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-06T04:33:30.207

```
@Override
public void onConfigurationChanged(Configuration config) {
     super.onConfigurationChanged(config);
     if(config.orientation == Configuration.ORIENTATION_LANDSCAPE) {
          getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
          getActionBar().hide();
     } else {
          getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
          getActionBar().show();
     }
} 
```

**您可以使用我自己尝试过的这个。**

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-09-22T21:38:14.097

在“AndroidManifest.xml”的活动标签中，您可以在主题属性中指定“NoTitleBar”，以便它始终隐藏标题：

```
<activity
    android:name="com.my_package.MyActivity" 
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
    android:configChanges="navigation|orientation|screenLayout|layoutDirection"> 
```

# facebook - 从身份验证对话框登录后重定向到 Facebook 应用程序

> ID：11856887
> 
> 赞同：0
> 
> 时间：2012-08-08T02:33:36.250
> 
> 标签：facebook, authentication, login, dialog

我的测试应用程序有问题

```
$params = array(
  'scope' => 'read_stream, publish_stream'
);

$loginUrl = $facebook->getLoginUrl($params);
echo "<script type='text/javascript'>top.location.href = '$loginUrl';</script>"; 
```

这是我用来发送尚未登录的用户通过 facebook auth 对话框登录的代码。问题是使用 facebook auth dialog 登录后，用户将被重定向到我不在 facebook 应用程序中的网站。

使用身份验证对话框登录后如何将用户发送回 Facebook 应用程序？

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T06:11:37.077

您可以使用[getLoginUrl()](http://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)`redirect_uri`的参数告诉 facebook 在授权结束后您要将用户发送到哪里（让它成功或失败）。

你可以在那里使用的东西有很多限制，基本上你有三个选择：

1.  应用程序域下的 URL。
2.  应用程序的画布路径（如果有的话）：`https://apps.facebook.com/YOUR_APP_NAMESPACE`
3.  安装了您的应用程序的任何页面网址：`https://www.facebook.com/PAGE_USERNAME/app_YOUR_APP_ID`

默认情况下，php sdk 将当前 url 作为`redirect_uri`. 有关这些的文档位于同一参数的[oauth 对话框的文档中。](http://developers.facebook.com/docs/reference/dialogs/oauth/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T11:24:11.610

正在谷歌搜索同样的问题并找到了解决方案，所以不妨回答她。

只需在主页中添加以下代码。

```
$config['appBaseUrl'] = "http://apps.facebook.com/your_app_name/";

if(isset($_GET['code']))
{
     header("location:" . $config['appBaseUrl']);
     exit;
} 
```

$config 是我在创建 facebook 对象时传递的数组。在这种情况下，虽然没有必要创建一个数组。

# excel - 在 Excel 中进行编程有多少种方法。除了 VBA

> ID：11856888
> 
> 赞同：0
> 
> 时间：2012-08-08T02:33:39.330
> 
> 标签：excel, vba

我想用一些复杂的函数来操作excel中的数据。看来我必须使用VBA。

不过我不想学。有没有其他方法可以在excel中进行编程？像C#这样的语言？

我不想使用 Excel 提供的某些接口创建独立的 C# 应用程序。仅在 excel 中编程，如 VBA，但使用不同的语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:45:58.117

> 我不想使用 Excel 提供的某些接口创建独立的 C# 应用程序。仅在 excel 中编程，如 VBA，但使用不同的语言。

不幸的是，你**不能。**要**在**Excel 中使用 Excel 编程，您必须学习 VBA。

要为 Excel 编程，无论是 VBA、VSTO(C#, VB.Net)，您都需要了解 Excel 对象模型 ( **EOM** )，没有它就无法进行 Excel 编程。

如果你想从 C# 开发 Office 解决方案，你不需要学习 VBA 本身，但是当你熟悉 EOM 时，你会发现你会自动理解 VBA。

**编辑**

[Excel 视角下的 Excel 对象模型](http://msdn.microsoft.com/en-us/library/office/ff194068.aspx)

[VS 视角下的 Excel 对象模型概述](http://msdn.microsoft.com/en-us/library/wss56bz7%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T02:37:24.283

[您可以使用 VSTO - Visual Studio Tools for Office（ MSDN 链接](http://msdn.microsoft.com/en-us/office/hh133430.aspx)）在 C# 中开发 Excel“加载项” 。

这不是真正的“在 Excel 中”，但是一旦安装，您的加载项就可以运行，而无需启动任何外部应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T02:44:40.293

Excel 有一个内置的 VBA 编辑器，只能使用 VBA。如果你想使用另一种语言，它需要是外部的。

虽然您可以添加 C# 插件，但这不是您所描述的内置编辑器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T02:46:36.730

据我所知，您现在根本无法做到这一点。在 Office 15 中，您似乎可以使用 JS：

[http://www.zdnet.com/blog/microsoft/microsoft-to-focus-on-html5-and-javascript-for-office-15-extensions/10266](http://www.zdnet.com/blog/microsoft/microsoft-to-focus-on-html5-and-javascript-for-office-15-extensions/10266)

# c++ - c ++ g ++ & boost，在标记“（”之前缺少二元运算符

> ID：11856889
> 
> 赞同：0
> 
> 时间：2012-08-08T02:33:42.120
> 
> 标签：c++, boost, compiler-errors, g++

g++ 抱怨的代码行是：

```
#if BOOST_WORKAROUND(__MWERKS__, BOOST_TESTED_AT(0x3205)) 
```

我不明白为什么它在这里抱怨二元运算符，这是 g++ 还是 boost 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:03:49.627

如果未定义，您将收到该错误`BOOST_WORKAROUND`，因此我猜您正在使用宏而实际上并未包含任何 Boost 标头。这显然行不通。

通常最安全的做法是假设它*不是*世界上使用最广泛的编译器和使用最广泛的库之一中的错误，而您只是做错了事。

# bootloader - 插入新的可引导 Linux 驱动器后，为什么我的 Windows 7 安装失败？

> ID：11856890
> 
> 赞同：0
> 
> 时间：2012-08-08T02:33:45.713
> 
> 标签：bootloader, bios, mbr

好的，所以我刚为我的笔记本电脑买了一个新的 SSD。我已经在 SSD 上安装了 Windows 7，并且可以成功启动到 Windows 7。

我将 SSD 取出并放入普通硬盘驱动器并在其上安装 Ubuntu。因此，现在当我将另一个 SSD 添加回笔记本电脑时，我会进入 BIOS 并引导覆盖到 SSD 以尝试进入我的 Windows 7 安装。

我至少会进入“正在启动 Windows”屏幕大约一秒钟。然后它开始说“正在加载文件”，就像它在进行恢复一样。它打开恢复并尝试永久修复，但 5 分钟后会说它无法修复。

如果我尝试将覆盖引导到 Ubuntu 硬盘驱动器中，它工作得很好。

如果我取出 Ubuntu 硬盘，我就可以启动到 Windows 7。

预期的行为是我将能够使用 BIOS 引导到任一硬盘驱动器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:54:06.317

您应该将两个硬盘驱动器之一的主引导记录配置为指向两个操作系统，然后将其用作引导的主驱动器。

我建议在带有 linux 的 SSD 上使用 grub2，主要是因为它比修改 Windows 硬盘驱动器的引导分区更容易配置且风险更小。

这是 grub 的文档：[https ://wiki.archlinux.org/index.php/GRUB2](https://wiki.archlinux.org/index.php/GRUB2)

我曾经遇到过一个问题，两个硬盘驱动器之间存在竞争，因为它们处于主/从配置中，并且 Windows 未配置为将自己识别为主引导，即使在 bios 中指定，如果它在从属中位置。

但是，可以相对容易地从从属位置引导 linux。

此外，每当您插入两个硬盘驱动器时，都希望启动，它会更改分区和硬盘驱动器编号：请参阅[此处](http://www.dedoimedo.com/computers/grub.html)标题为“GRUB Notation”的段落。请注意这一点，因为这也会影响操作系统的启动方式。

我的猜测是 Windows 无法加载的原因是因为 MBR 的安装和配置假设将在不更改其硬盘驱动器号的情况下启动。因此，Windows 可能会尝试加载，但在搜索启动时加载的任何核心文件时实际上指向了错误的硬盘驱动器。但是，在我看来，这似乎比主/从问题更不可能。

# c - 如果不同的进程有自己的内存空间，那么局部变量的地址怎么可能相同呢？

> ID：11856901
> 
> 赞同：0
> 
> 时间：2012-08-08T02:37:15.410
> 
> 标签：c, process

从现在开始，我认为在`fork()`被调用之后，局部变量被复制到父进程和子进程中，它们是分开的。但是我尝试在不同的进程中获取每个局部变量的地址，结果它们是相同的：

```
int main(void){
  int local = 10;
  pid_t childPid;
  childPid = fork();
  if(childPid == 0 ){
    printf("[Child] the local value address is %p\n",&local);
  }else if(childPid < 0){
    printf("there is something wrong");
  }else{
    printf("[Parent] the local value address is %p\n",&local);
  }
  return (EXIT_SUCCESS);
} 
```

输出是：

[Parent] 本地值地址为 0x7fff5277baa8 [Child] 本地值地址为 0x7fff5277baa8

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:39:13.033

因为进程获得的内存空间是**虚拟**的。这意味着内存芯片上的实际物理地址可能不同。在您提到的情况下，两个不同进程中的本地对象地址保证在内存芯片上具有不同的私有物理地址。
话虽如此，在某些情况下，来自不同进程的两个非本地对象地址映射到相同的物理地址。最常见的可能是`shared library`或`shared memory`。如果您在编译时
没有指定，那么当两个并发进程使用它时，您实际上可能会最终将相同的虚拟地址映射到相同的物理地址。`position-indepedent-code``shared library``shared library`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T02:41:45.840

在不同的“空间”中意味着不同空间中的“相同”索引点并不指向同一事物。把“空间”想象成一张纸。第 1 页上的“第 3 行的第 4 个字符”与第 2 页上的含义不同。

# c# - 如何“直接”从 Zip 文件中打开媒体文件（无需解压）？

> ID：11856904
> 
> 赞同：1
> 
> 时间：2012-08-08T02:37:28.697
> 
> 标签：c#, media-player, dotnetzip

在 C# 中，我同时使用**DotNetZip**和**System.Windows.Media** 我有一个包含一些歌曲的 zip 文件，我想直接从 zip 文件中播放它们而无需解压缩它们..

现在我设法获得声音文件的流：

```
Stream stream = zip["Songs\\IronMaiden\\Song1.mp3"].OpenReader(); 
```

但问题是，**MediaPlayer.Open**方法只接受**Uri**作为参数，它不接受流..

我怎样才能解决这个问题？知道我无法切换到任何其他媒体选项，例如 fmod.dll 或其他任何内容。我也再说一遍，我不想提取它们。

任何帮助将不胜感激..在此先感谢.. :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:55:57.417

如果您要使用的媒体播放器不带流，则没有办法。如前所述，您必须保存文件并使用保存文件位置的 URL。否则，请找到另一个支持流的媒体播放器。

# c++ - BSP 和 MPI 有什么区别？

> ID：11856910
> 
> 赞同：1
> 
> 时间：2012-08-08T02:38:41.920
> 
> 标签：c++, parallel-processing, mpi, graph-algorithm

BSP 和 MPI 有什么区别？

我知道[Pregel 的](http://googleresearch.blogspot.com/2009/06/large-scale-graph-computing-at-google.html)图计算框架是基于 BSP 的。为什么他们不直接使用 MPI 或者基于 MPI 开发框架？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T02:51:14.837

[Bulk Synchronous Parallel](http://en.wikipedia.org/wiki/Bulk_synchronous_parallel) (BSP) 是一种抽象机器，类似于 PRAM。BSP 中的动作是“超级步骤”，它将通信和计算与跨所有进程的屏障同步混合在一起。BSP 还有一个著名的成本模型。

[消息传递接口](http://en.wikipedia.org/wiki/Message_Passing_Interface)(MPI) 是分布式内存并行应用程序中用于通信的标准 API 。这个 API 有很多实现，包括商业和开源的。

有[一些库](http://www.bsp-worldwide.org/)支持*BSP*模型通信，但没有 BSP 标准 API。因此，当 Pregel 的创建者说他们正在使用 BSP 时，他们的意思是他们正在使用异步通信来调度消息，然后是某种障碍。在 MPI-2 中使用远程内存访问（“单向通信”）功能（如`MPI_Put()`.

# batch-file - CVS 导出在两个日期之间更改的所有文件

> ID：11856915
> 
> 赞同：0
> 
> 时间：2012-08-08T02:39:26.680
> 
> 标签：batch-file, cvs

如何从 CVS 仅导出在特定时间段内已更改（提交）的文件？我想这样做，以便我可以将仅包含已更改文件（保留目录结构）的“补丁”发送给客户端，而不是整个代码库。

我发现了这个答案（http://stackoverflow.com/a/2343054/421243），它给了我一个列表，但是有没有办法导出以便我可以在批处理文件中编写脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T23:32:44.650

好吧，我不能让这个撒谎，所以这里有一个 Windows 批处理文件解决方案。基本上：

*   使用 cvs diff 获取已更改的文件列表
*   对于每个列出的文件，从 cvs 导出（-N 保持目录结构）

**代码：**

```
REM Exports only files changed between %DATEFROM% and %DATETO%
REM See CVS -D switch for details on date/time input: http://docs.freebsd.org/info/cvs/cvs.info.Common_options.html

cvs -Q -d %CVSROOT% diff -N -c -D %DATEFROM% -D %DATETO% | grep "Index:" > diff.tmp

echo Extracting changed source files from CVS
for /f "tokens=2*" %%f in (diff.tmp) do (
    echo %MODULE%/%%f
    cvs -Q -d %CVSROOT% export -r HEAD -d %TARGETDIR% -N %MODULE%/%%f  > NUL 2> NUL
)
del diff.tmp 
```

# c++ - 将部分字符串向量二维数组放入另一个指针向量数组

> ID：11856920
> 
> 赞同：0
> 
> 时间：2012-08-08T02:40:21.730
> 
> 标签：c++, string, vector, multidimensional-array

我正在构建一个 CSVParser 库（使用类似于 Excel OLE 对象），以使用 Vectors 实现

元胞数组在主类 CCSVParser 中保存为多维字符串数组

```
static vector< vector< string> > CellArray; 
```

和 CRange 类中的另一个指针数组

```
vector< vector< string> >* RangeCells; 
```

**编辑：使用指针数组的目的是节省分配的空间，因为库可能处理大量数据**

在 CRows 类的 GetItem 方法中，我需要返回一个 Range 对象，其指针数组指向主 CellArray 的寻址行

```
CRange* CRows::GetItem(int idxRow)
{
    CRange* retRange = new CRange ;

    retRange->RangeCells = (vector< vector<string> >*)&CCSVParser::CellArray[idxRow] ;

    return retRange;
} 
```

指向整个数组时，向量数组指针工作正常

```
retRange->RangeCells = (vector< vector<string> >*)&CCSVParser::CellArray ; 
```

但未能解决 CellArray 中的一行

**注意：** RangeCells 指针数组需要是多维的，因为在其他操作中它可能会返回一组行

任何想法如何实现这一点？？？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:12:29.673

如果`CellArray`是（字符串的）向量的向量，那么`CellArray[i]`是（字符串的）向量。但是，您尝试将其地址分配给指向向量（字符串）向量的指针，这是不可能的。

向量的地址与向量的向量的地址不同。

`RangeCells`应声明为

```
vector<string> *RangeCells; 
```

我猜它会工作得更好。

# git - 我可以推送从标签创建的分支吗？

> ID：11856923
> 
> 赞同：2
> 
> 时间：2012-08-08T02:40:49.427
> 
> 标签：git

我来自 SVN 世界，所以我可能无法理解 GIT 中所有细微的概念差异。

我有一个起源/主分支。一段时间以来，我一直在标记大师。然后在生产中发生了一些事情。我们需要修复一个令人讨厌的错误。

所以，我努力地将（结帐）切换到一个标签（我们称之为 prod-1.0）。然后我创建了一个分支。我修改了我的代码，在 origin/prod-1.0-hotfix 中提交。然后我继续将该分支推送到我的遥控器。

现在在 prod 中发现了一个新错误。我以为我可以检查分支“prod-1.0-hotfix”，但事实证明，这不是来自“prod-1.0-hotfix”的代码，而是在我将分支推送到远程时位于 origin/master 中的代码.

有人可以发光吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:57:43.210

分支标签将使用标签当前所在的分支。 [https://stackoverflow.com/a/5582368/1354978](https://stackoverflow.com/a/5582368/1354978)

[https://stackoverflow.com/a/792027/1354978](https://stackoverflow.com/a/792027/1354978) 对该帖子的评论说明了一切。

> 是的。git 在这方面与颠覆不同。svn 标签基本上将文件复制到一个新文件夹，因此您可以 svn 签出特定的一堆文件，而 git 标签只是指向特定修订的指针。– dbr 2009 年 4 月 27 日 2:17

我认为你应该做的是......从 master 分支到 prod-1.0-hotfix

```
git reset -—hard  prod-1.0 bad_tag_tag_name
git push origin prod-1.0-hotfix 
```

这将使用 HEAD @ prod-1.0-hotfix 创建一个远程分支

我喜欢这个网站 gitready.com [http://gitready.com/advanced/2009/02/16/convert-git-svn-tag-branches-to-real-tags.html](http://gitready.com/advanced/2009/02/16/convert-git-svn-tag-branches-to-real-tags.html)

Thnx 和 +1 给 Erik Petersen，以及 dbr 寻求帮助。

# jquery - 如何在 jQuery 中使用选中的单选按钮执行功能

> ID：11856927
> 
> 赞同：0
> 
> 时间：2012-08-08T02:41:40.147
> 
> 标签：jquery, function, radio-button, checked

我想在 jQuery 中使用选中的单选按钮执行一些操作，但是我不太确定如何执行此操作。

我有一组单选按钮，我使用以下代码获得选中的单选按钮：

```
var solid_checked = ($('#solidcolor input[name=asw_options[box_background_color]]:checked').val()); 
```

我现在怎么能说向那个选中的单选按钮添加一个 CSS 类。我只想将 CSS 类添加到选中的单选按钮而不是其他单选按钮。

试图做这样的事情：

```
$(this).addClass('selected').siblings().removeClass('selected'); 
```

编辑

我正在做的是使用图像作为使用 CSS 和 jQuery 的单选按钮。您单击图像以选择它，最终会在其周围出现橙色边框。然后保存设置。

当页面重新加载时，我希望选中的单选按钮（图像）保持橙色边框，但我无法让它工作。

这是我最初用来突出显示单选按钮的 jQuery（图片）

```
$('#solidcolor input:radio').addClass('input_hidden');
$('#solidcolor label').click(function() {
    $(this).addClass('selected').siblings().removeClass('selected');
}); 
```

我现在如何添加：

```
$(this).addClass('selected'); 
```

类到脚本，以便它突出显示选中的单选按钮？

想尝试实现这样的目标：

```
if($("input[name='asw_options[box_background_color]']").is(':checked')) {
$(this).css("border", "solid 3px orange");
} 
```

或者

```
if($("input[name='asw_options[box_background_color]']").is(':checked')) {
$(this).addClass('selected');
} 
```

但这些都不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T02:43:59.070

要将类添加到单选组的选中元素，请使用仅选择选中元素`:checked`，然后添加类：

```
$('input[name=radiogroup]:checked').addClass('classname'); 
```

[http://api.jquery.com/checked-selector/](http://api.jquery.com/checked-selector/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T02:47:27.387

你可以试试这个`change`事件：

```
$('#solidcolor input[name^="asw_options"]').change(function(){
    $(this).addClass('selected').siblings().removeClass('selected');
}) 
```

# iphone - coredata 作为前端，文本文件作为后端

> ID：11856929
> 
> 赞同：1
> 
> 时间：2012-08-08T02:41:48.663
> 
> 标签：iphone, ios, core-data, dropbox, icloud

这在概念上听起来如何。

我想存储一些文本并向其中添加易于检索的标签。Coredata 是显而易见的解决方案，但我还需要跨云的数据，而不仅仅是**iCloud**之类的 Dropbox。所以我想我会使用 Coredata + textFiles。

### 明显的方法

将 coredata 与两个实体一起使用。一种用于文本，一种用于标签。效果很棒，但还没有准备好同步。1\. 使用 icloud coredata 组合对我伤害很大，它仍然不可靠，我无法继续稳定它。2.我不只是有ios设备，我的电脑也需要它。

### 解决方案

1.  在简单的文本视图中添加文本。
2.  也可以使用一些定界符将标签添加到文本中。
3.  将文档另存为文本文件（包括标签）并为文档指定一个唯一的名称
4.  将该文件作为文档放入**Dropbox**或**icloud**或其他任何文件中，但另外，在 iOS 应用程序中本地解析它，以便将文件中的文本分隔为文本和标记，每个文本都在 coredata 中输入其实体。

### 解决方案的优势

我可以在本地（在 iphone 中）以一种有用的方式使用文本，如果需要，我会从云中获取这些文本文件。

### 解决方案的问题

1.  云中的数据（作为文本文件）非常有用。但尽管如此，它在那里，我可以忍受这个。
2.  同步：我如何确保每个文件都正确同步。我不确定我应该使用 UIManagedDocument 吗？我已经在本地使用 coredata，不知道如果我使用 UIManagedDocument 会使事情复杂化。

我的问题是，我对同步和保存部分感到困惑，我应该怎么做才能保持整洁。

在写这个问题时，我觉得我把整个想法搞砸了。

# php - 页面显示正常，但 Nginx 日志显示“找不到文件”

> ID：11856933
> 
> 赞同：0
> 
> 时间：2012-08-08T02:42:48.617
> 
> 标签：php, codeigniter, url-rewriting, nginx, webserver

我在 php5-fpm 旁边使用 Nginx 和 Codeigniter。一切“似乎”都可以正常工作，显示页面并且一切看起来都很棒。当然这不是我在这里问这个问题的原因，我实际上有一个问题。

我面临的问题是页面抛出 404 错误，即使页面渲染正确，我仍然得到 404（在日志中）。

我得到 404 的原因（在查看 Nginx 的错误日志之后），是 Nginx 无法打开我请求的文件，因为 Nginx 尝试直接打开 PHP 文件，而不是参考`controller/method` 和不幸的是 Codeigniter 工作那样。

**例如：**
在Nginx日志中 请求`http://website.com/<controller>/<function>/<other_params>`结果为404，这背后的原因是`open()`无法打开指定的目录，因为它不存在，而不是引用`controller/method`.

**一些重要的日志：**
Nginx 错误日志：

```
[error] 4172#0: *482 open() "/var/www/<domain>/public/site/section/main" failed
(2: No such file or directory), client: <client_ip>, server: <domain>, request: "GET   
/site/section/main HTTP/1.1", host: "<domain>" 
```

正如我之前所说，Nginx 试图直接访问该文件，而不是让 Codeigniter 处理它。

我的`sites-enabled/ci`配置：

```
server
{
    server_name <domain> *.<domain>;

    access_log /var/www/<domain>/access.log;
    error_log /var/www/<domain>/error.log;
    root /var/www/<domain>/public;

    index index.php index.html index.htm;

   location ~* \.(jpg|jpeg|gif|png|css|js|ico|xml)$ {
    access_log        off;
    log_not_found     off;
    expires           360d;
}
    # enforce www (exclude certain subdomains)
#   if ($host !~* ^(www|subdomain))
#   {
#       rewrite ^/(.*)$ $scheme://www.$host/$1 permanent;
#   }

    # enforce NO www
    if ($host ~* ^www\.(.*))
    {
        set $host_without_www $1;
        rewrite ^/(.*)$ $scheme://$host_without_www/$1 permanent;
    }

    # canonicalize codeigniter url end points
    # if your default controller is something other than "welcome" you should change the following
    if ($request_uri ~* ^(/site(/index)?|/index(.php)?)/?$)
    {
        rewrite ^(.*)$ / permanent;
    }

    # removes trailing "index" from all controllers
    if ($request_uri ~* index/?$)
    {
        rewrite ^/(.*)/index/?$ /$1 permanent;
    }

    # removes trailing slashes (prevents SEO duplicate content issues)
   # if (!-d $request_filename)
   # {
   #     rewrite ^/(.+)/$ /$1 permanent;
   # }

    # removes access to "system" folder, also allows a "System.php" controller
    if ($request_uri ~* ^/(system|application))
    {
        rewrite ^/(.*)$ /index.php?/$1 last;
        break;
    }

    # unless the request is for a valid file (image, js, css, etc.), send to bootstrap
    #if (!-e $request_filename)
    #{
     #   rewrite ^/(.*)$ /index.php?/$1 last;
     #   break;
    #}

    # catch all
    error_page 404 /index.php;

    # use fastcgi for all php files
      location ~ \.php($|/)
    {
     #if (!-e $request_filename) {
           #         return 404;
           # }
        fastcgi_pass 127.0.0.1:9000;
    #fastcgi_pass php5-fpm-sock;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
    }
#      location / {
    #       try_files $uri $uri/ @codeigniter;
    #}

  # location @codeigniter {
  #         rewrite ^(.*) /index.php?$1 last;
  #  }

    # deny access to apache .htaccess files
    location ~ /\.ht
    {
        deny all;
    }
} 
```

那么，Nginx 和 Codeigniter 之间的这种误解背后的原因是什么？
*提前致谢。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T06:30:44.100

您的配置中似乎没有规则告诉 nginx 在找不到文件时尝试向 php 发送请求。有一个注释掉的块`try_files`，`@codeigniter`几乎看起来像它。从理论上讲，这就是您希望 nginx 做的事情：

1.  检查 url 是否存在，如果确实提供它。
2.  将其他所有内容发送到 codeigniter 并让它解决。

为此，这两个块应该足够了：

```
location / {
    # Check if a file exists, or route it to index.php.
    try_files $uri $uri/ /index.php;
}

location ~ \.php$ {     
   # for security, see http://forum.nginx.org/read.php?2,88845,page=3
   try_files $uri =404;
   fastcgi_split_path_info ^(.+\.php)(.*)$;

   fastcgi_pass 127.0.0.1:9000;
   fastcgi_index index.php;
   include fastcgi_params;
   fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
} 
```

另一个受`if`保护的块不应该在这些地方破坏。

# python - 创建一个python模块

> ID：11856938
> 
> 赞同：6
> 
> 时间：2012-08-08T02:43:55.663
> 
> 标签：python, module

我创建了两个文件：*test.py*和*test1234.py*

*test.py*包含：

```
import test1234
t = test1234.test() 
```

*test1234.py*包含：

```
class test():
    def __init__(self): 
```

当放在同一目录中时，`python test.py`运行没有错误。

但是，如果我创建一个目录*test1234*并将*test1234.py*和一个空白的***init** .py*放在此目录中，则会`python test.py`出现错误：

> AttributeError：“模块”对象没有属性“测试”

我需要做什么*test.py*才能看到*test1234.py*`test`中的类？

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:45:46.510

您必须通过包导入它，或者将其放入`__init__.py`.

```
import test1234.test1234
t = test1234.test1234.test() 
```*

# python - 我需要使输出在一行中

> ID：11856945
> 
> 赞同：0
> 
> 时间：2012-08-08T02:45:10.300
> 
> 标签：python, python-3.x

所以，我已经有了从文本中取出所有带数字的单词的代码，现在我需要做的就是将文本全部放在一行中。

```
with open("lolpa.txt") as f:
    for word in f.readline().split():
        digits = [c for c in word if c.isdigit()]
        if not digits:
            print(word) 
```

拆分使单词都在不同的列中。如果我取出`.split()`，它会输入不带数字的单词，实际上只是从单词中取出数字，并使每个字母位于不同的列中。

**编辑**：是的，`print(word,end=" ")`工作，谢谢。但我也希望脚本现在只读取一行。它无法读取第 2 行或第 3 行等上的任何内容。

第二个问题是脚本只读取第一行。所以如果第一行的输入是

```
i li4ke l0ke like p0tatoes potatoes
300 bla-bla-bla 00bla-bla-0211 
```

输出将是

```
i like potatoes 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T02:48:10.380

在 Python v 3.x 中，您将使用

```
print(word, end='') 
```

避免换行符。

在 Python v 2.x 中

```
print word, 
```

您将在要打印的项目末尾使用逗号。请注意，与 v3 不同，您会在连续打印之间得到*一个空格*

请注意，这`print(word),`不会阻止 v 3.x 中的换行符。

--

***基于原始帖子重新代码问题中的编辑进行**更新：*****

 **有输入：

```
i li4ke l0ke like p0tatoes potatoes
300 bla-bla-bla 00bla-bla-0211 
```

这段代码：

```
def hasDigit(w):
   for c in w:
      if c.isdigit():
         return True
   return False

with open("data.txt") as f:
    for line in f:
        digits = [w for w in line.split() if not hasDigit(w)]
        if digits:
            print ' '.join(digits)
#   break  # uncomment the "break" if you ONLY want to process the first line 
```

将产生所有不包含数字的“单词”：

```
i like potatoes
bla-bla-bla    <-- this line won't show if the "break" is uncommented above 
```

*注意*：

*如果您只想*处理文件的第一行，**或者**问题是您的脚本*只*处理了第一行，这篇文章有点不清楚。根据`break`语句是否被注释掉，此解决方案可以以任何一种方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T02:47:52.263

如果您使用的是 python 3.x，您可以执行以下操作：

```
 print (word,end="") 
```

禁止换行——python 2.x 使用了有点奇怪的语法：

```
 print word,  #trailing comma 
```

或者，使用`sys.stdout.write(str(word))`. （这适用于 python 2.x 和 3.x）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T02:47:58.243

```
with open("lolpa.txt") as f:
    for word in f.readline().split():
        digits = [c for c in word if c.isdigit()]
        if not digits:
            print word,
    print 
```

不是`,`在结尾`print`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T03:03:18.077

你可以使用`join()`：

```
with open("lolpa.txt") as f:
    print ' '.join(str(x.split()) for x in f if not [c for c in x.split() if c.isdigit()]) 
```

使用一个简单的 for 循环：

```
import sys
with open("data.txt") as f: 
    for x in f:                #loop over f not f.readline()
        word=x.split()
        digits = [c for c in word if c.isdigit()]
        if not digits:
            sys.stdout.write(str(word))  #from mgilson's solution 
```**

# java - Android FPS 触摸视图时增加，不触摸时降低

> ID：11856946
> 
> 赞同：1
> 
> 时间：2012-08-08T02:45:16.057
> 
> 标签：java, android, opengl-es

我知道这是一个非常奇怪的问题。但在我的 Nexus S 和 Galaxy Tab 上都发生了。

当我拖动视图时，FPS 会增加到 MAX FPS，但是如果我不这样做，它将开始从 45-60 波动。我已经尝试过经过测试的模拟，但不是批处理。我正在使用 Open GL，并且没有内存泄漏。有任何想法吗？

这发生在所有项目上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T03:03:42.630

你在用果冻豆吗？他们添加了一个新功能，作为 Project Butter 的一部分，可以解释这一点。

> Jelly Bean 具有更灵敏和统一的触摸响应，通过在您触摸屏幕时立即提升设备的 CPU 并在您不需要它时将其关闭以延长电池寿命，从而使您的设备更加灵敏。

[http://www.android.com/about/jelly-bean/](http://www.android.com/about/jelly-bean/)

# jquery-ui - 如何在 jQueryUi 的内联日期选择器上添加按钮

> ID：11856948
> 
> 赞同：0
> 
> 时间：2012-08-08T02:45:26.820
> 
> 标签：jquery-ui, jquery-ui-datepicker

功能 beforeShow 不适用于内联日期选择器。如何在面板上添加附加按钮？

```
beforeShow: function(input) {  
                setTimeout(function() {  
                var buttonPane = $(input).datepicker("widget").find( ".ui-datepicker-buttonpane" );  
                var btn = $('<button class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" type="button">Clear</button>');  
                btn.unbind("click").bind("click", function () {  
                    $.datepicker._clearDate( input );  
                });  

                btn.appendTo( buttonPane );  

                }, 1 );  
            } , 
```

感谢您的任何回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T05:05:09.097

你可以在这里找到一个例子。我希望对你的情况有用

[http://csharptechies.blogspot.ca/2010/12/adding-custom-buttons-to-jquery.html](http://csharptechies.blogspot.ca/2010/12/adding-custom-buttons-to-jquery.html)

你也可以这样做......

在你的日期选择器声明中：

```
 jQuery("#to").datepicker({
              dateFormat: 'yy-mm-dd',
              inline: true,
              changeMonth: true,
              showButtonPanel: true,            
              numberOfMonths: 2,
              minDate: -20,

                          beforeShow: buttonClear,

/* Function button Clear */
  function buttonClear( input ) {
           setTimeout(function() {
             var buttonPane = jQuery( input )
                .datepicker( "widget" )
                .find( ".ui-datepicker-buttonpane" );

             jQuery( "<button>", {
                 text: "Clear",
                 class: "ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all",
                 click: function() {
                   jQuery.datepicker._clearDate( input );

                 }
             }).appendTo( buttonPane );
           }, 1 );
  } 
```

问候

# c# - 有没有更好的方法使用泛型来做到这一点？

> ID：11856951
> 
> 赞同：1
> 
> 时间：2012-08-08T02:45:48.200
> 
> 标签：c#, generics

这是我的代码。我是泛型的新手，所以只是想知道是否有更好的方法来做我所做的事情。

```
public interface IMessageHandler<T>  where T : IMessage
{
    void Handle(T message);
}

public class MessageANotificationHandler : IMessageHandler<MessageA>
{
    public void Handle(MessageA message)
    {
        // do something;
    }

} 
```

现在我希望我的应用程序接收所有实现 IMessage 的消息，但会自动找出用于特定消息的处理程序。我已经完成了以下操作，但感觉必须有更好的方法

```
public class MessageHandlerFactory
{
    public Type GetMessageHandlerType(IMessage message)
    {
        if (message.GetType() == typeof(MessageA))
            return typeof(MessageANotificationHandler);

        return null;
    }
} 
```

然后在我的应用程序中，我使用反射来创建工厂返回的类型的实例并调用 Handle 方法。

如果您知道任何使此代码更好的方法，请提供帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T03:01:23.210

我会删除工厂和`IMessageHandler`界面..它们不是必需的。

我会将`Handle`方法添加到`IMessage`接口中，而不是这样：

```
public void HandleMessageFor(IMessage msg) {
    Type t = new MessageHandlerFactory().GetMessageHandlerType(msg);
    // Activator.CreateInstance.. etc etc..
} 
```

你可以简单地拥有..

```
public void HandleMessageFor(IMessage msg) {
    msg.Handle();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T02:50:39.560

您可以`IMessage`改为创建一个抽象基类，并拥有一个方法：

```
public abstract class MessageBase {
    public abstract IMessageHandler GetHandler();
} 
```

这将需要`IMessageHandler`是非通用的。

# javascript - .each() 行为怪异

> ID：11856958
> 
> 赞同：2
> 
> 时间：2012-08-08T02:47:00.410
> 
> 标签：javascript, jquery, html, foreach, each

我有 6 个列表项

```
$('.favorite-tag-group li').each(function(){
  console.log("hi"); 
}); 
```

但是，此代码在控制台中显示“hi”24 次。

我能想到的唯一可能导致它出错的是因为我的列表项并不都在同一个列表中。

例如，`.favorite-tag-group`是一个始终包含 ul 的 div。在某些情况下，该 ul 将只有 1 li。有时它可能有 2 个。

这是一个可能看起来像的示例

```
div.favorite-tag-group
  ul
    li
    li
    li 
div.favorite-tag-group
  ul
    li
div.favorite-tag-group
  ul
    li
div.favorite-tag-group
  ul
    li
    li 
```

我要做的就是运行 .each() li 以便我可以删除重复项；/

一些真正的html：

```
<div class="favorite-tag-group">
  <h4>gobty</h4>

  <ul class="resources led-view">
    <li class="clearfix r-tutorial" data-id="22">

    </li>
  </ul>
</div>
<div class="favorite-tag-group">
  <h4>javascript</h4>

  <ul class="resources led-view">
    <li class="clearfix r-tutorial" data-id="24">

    </li>
  </ul>
</div>
<div class="favorite-tag-group">
  <h4>macvim</h4>

  <ul class="resources led-view">
    <li class="clearfix r-tool" data-id="21">

    </li>
  </ul>
</div> 
```

这是真正的功能。当我将 .each() 直接粘贴到控制台时它可以工作，但在这个函数内部它不起作用：

```
 // collapse tags functionality
    $('.collapse-tags').click(function(e){
        e.preventDefault();
        $('.favorites-helpers, .favorite-tag-group h4').slideUp(200, function(){
            var seen = {};
            $('.favorite-tag-group li').each(function(){
                //console.log("hi");
                var currentId = $(this).data('id');
                if (seen[currentId]) {
                    $(this).slideUp(200);
                } else {
                    seen[currentId] = true;
                }
            });
        });
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T04:03:40.667

正如我上面的评论......还有一些进一步的解释。

这是因为`$('.favorites-helpers, .favorite-tag-group h4')`将导致多个元素`slideUp()`，因此回调被执行多次。移动`var seen = {}`到回调内部会将变量重置为每个回调中的空对象。您仍然会多次迭代您的列表项（如多个`console.log()`s 所见），但您`li`每次都会以这种方式向上滑动相同的副本。

你问：“我仍然困惑的一件事是，如果它在回调之外，为什么它看不到 see 的范围？变量范围不会说它可以看到它，因为它在函数之外？

是的，你是对的 - 回调可以看到`seen`，但`seen`从未清空/重置，因此在你的回调的第二次迭代之后，你所有的`li`' 都会`.slideUp()`调用它们。

考虑一下：因为它要么向上滑动副本，要么在第二个回调中添加`id`to `seen`，`.each()`再次运行，但它已经充满了你的所有列表项`id`。

希望这足够清楚，如果不只是在下面发表评论，我会尝试提出一些例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T02:56:55.613

你来了，先生……

```
$(document).ready(function(){
    $("div.favorite-tag-group>ul").children("li").each(function(index,element){
         //code here
        //refer to element as $(element)
         //to get the id of the element use: $(element).attr("id");
      });
});​ 
```

演示：http: [//jsfiddle.net/9uz8k/11/](http://jsfiddle.net/9uz8k/11/)

关联：

[http://api.jquery.com/each](http://api.jquery.com/each)

# c# - 如何将“将此程序固定到任务栏”添加到 Windows 7 的跳转列表中？

> ID：11856966
> 
> 赞同：3
> 
> 时间：2012-08-08T02:47:45.897
> 
> 标签：c#, .net, wpf, windows-7, jump-list

我有一个使用 WPF 用 .Net 4.0 编写的应用程序。我正在尝试找出如何添加功能“将此程序固定到任务栏”，当您右键单击 Windows 7 应用程序图标时，您经常会看到这种功能。

我知道我需要使用跳转列表（请参阅： http: [//www.wpftutorial.net/Jumplists.html](http://www.wpftutorial.net/Jumplists.html)），但我无法找到如何创建（或引用）此特定功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:50:27.380

这是由系统提供的，因此您无需执行任何操作即可将其添加到应用程序的跳转列表中。即使您没有为您的应用程序初始化自定义跳转列表，它也应该始终存在于系统使用的默认跳转列表中。

请注意，有时在调试模式下（使用 vshost.exe）运行应用程序时，系统似乎对跳转列表很挑剔。如果您没有看到跳转列表，您可以尝试重新启动调试器、IDE 或系统，或者重新构建您的应用程序。但是，这不应该影响发布可执行文件。

# java - 为什么我们必须使用私有？在 C++ 和 Java 中？

> ID：11856970
> 
> 赞同：0
> 
> 时间：2012-08-08T02:48:00.760
> 
> 标签：java

为什么我们使用 private 关键字？我知道它限制了对 var 或方法的访问，但为什么我们必须限制访问？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T02:52:03.303

如果您公开所有方法和变量，当另一个程序员尝试对您编写的类做某事时，这将非常困难，因为他不知道哪些方法负责您的类的内部行为，哪些是他的方法不应该使用，因为他会弄乱对象的内部状态并导致错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T02:52:10.713

你不必“必须”做任何事情。只公开绝对必须公开的内容是一种很好的做法，尤其是当您创建一个连接呈指数增长的大型程序时，副作用的风险也会随之增加。这实际上是关于管理复杂性。阅读封装和信息隐藏以及这如何帮助降低大型系统的复杂性。一本好书是 Grady Booch 的面向对象设计，以了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T02:59:49.577

在 OO 世界中，要实现封装，了解您想要公开的对象的功能或行为非常重要，并且每个访问标识符在其中起着重要作用。在 Code Complete 书中，McConnell 强烈鼓励将所有变量设为私有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T03:01:47.797

假设您正在构建一个实用程序库，并且您将把方法作为实用程序公开给外部世界。但是这些方法可能会调用一些私有的方法。所以直接调用这些私有方法可能没有任何意义，在最坏的情况下，它们甚至可能会损害对象的状态。即使在 jdk 中，也有很多例子可以解释 private 的用法。在`String`类中，有一个私有方法`checkBounds`，它只检查有效的构造函数参数，以防万一`public String(byte bytes[], int offset, int length, String charsetName)`

公开此方法（使其公开）对 String 类没有意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T03:10:47.370

**顾名思义，它是私​​有的/无法从外部类访问的东西**。**面向对象的编程语言有一个重要的概念，称为**封装**，这意味着限制对某些对象组件的访问。在开发代码时，您需要对其他类隐藏一些对象，在这种情况下，将这些对象/变量删除为私有。私有访问仅对定义它的类。**

# mongodb - Play-jongo 未解决的依赖

> ID：11856971
> 
> 赞同：0
> 
> 时间：2012-08-08T02:48:01.510
> 
> 标签：mongodb, playframework, playframework-2.0, jongo

我正在尝试将 Play-jongo [https://github.com/alexanderjarvis/play-jongo](https://github.com/alexanderjarvis/play-jongo)与 Play 2.0 一起使用。Build.scala 看起来像这样。

```
val appDependencies = Seq(
  "uk.co.panaxiom" %% "play-jongo" % "0.2"
)

val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
  resolvers += ("GitHub Play Repository" at "http://alexanderjarvis.github.com/releases/")     
) 
```

但是，Play 似乎找不到依赖项。

```
[warn] ==== GitHub Play Repository: tried
[warn]   http://alexanderjarvis.github.com/releases/uk/co/panaxiom/play-jongo_2.9.1/0.2/play-jongo_2.9.1-0.2.pom 
```

...

```
[error] {file:/home/steven/Projects/project-escape/server_play2/}Perk/*:update: sbt.ResolveException: unresolved dependency: uk.co.panaxiom#play-jongo_2.9.1;0.2: not found 
```

有谁知道仓库在哪里？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:17:55.207

根据模块的作者将其用于解析器。

```
resolvers += Resolver.url("My GitHub Play Repository", url("http://alexanderjarvis.github.com/releases/"))(Resolver.ivyStylePatterns) 
```

# vba - Outlook 2010 VBA ThisOutlookSession 替换

> ID：11856974
> 
> 赞同：0
> 
> 时间：2012-08-08T02:48:25.780
> 
> 标签：vba, outlook, outlook-2010

在开发代码时，我删除了我正在处理的代码。

ThisOutlookSession 以某种方式被删除并替换为“Module2”。现在每次启动 VBA 时，我都会收到一条警告说程序不信任 Module2。

我可以将 ThisOutlookSession 作为单独的类模块返回，但与以前的类型不同。

有没有办法将 ThisOutlookSession 恢复为默认状态？

我在 XP 系统上运行带有 VBA 的 Outlook 2010。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:25:42.403

复制您拥有的代码并将其**保存**在某处。

在 Windows 文件夹中搜索 VbaProject.OTM。**将其重命名**为 VbaProjectOld.OTM。在你看到这个作品之前不要删除。

重新启动 Outlook。应该重新生成 VbaProject.OTM，并且您应该获得一个新的 ThisOutlookSession。将您抢救的代码粘贴到相应的模块中。

# ruby - 参考方法？

> ID：11856978
> 
> 赞同：3
> 
> 时间：2012-08-08T02:49:18.893
> 
> 标签：ruby

我想替换这个：

```
[[1,'a'],[2,'b'],[3,'c']].map {|p| p.first} 
```

`first`通过将 Array 的方法的引用发送到 来获得更简洁的版本`map`，但它给了我错误：

```
[[1,'a'],[2,'b'],[3,'c']].map Array.method(:first) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T02:52:08.677

试试这个：

```
[[1,'a'],[2,'b'],[3,'c']].map(&:first) 
```

# jquery - 如何使我的 flexslider 标签兼容

> ID：11856981
> 
> 赞同：1
> 
> 时间：2012-08-08T02:50:31.723
> 
> 标签：jquery, hashtag, flexslider

有没有人可以共享 mypage.com/#slide1 或 mypage.com/#slide2 之类的链接并调用我的滑块的特定幻灯片？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:39:35.620

我想我有一个想法：

首先，您需要创建一个带有导航控件的 flexslider

然后，使用名为 slide1、slide2、slideX 的井号标签，您知道要使用 (X-1) 元素，所以这里有一个示例：

```
(jQuery.noConflict())(function($) {
    //Get your hash tag
    var loc = $(location).attr('href');
    var idx = 1;
    if(loc.lastIndexOf('#') != -1)
    {
        idx = loc.substr(loc.lastIndexOf('#')+1).replace('slide', '');
    }

    //verify that idx is really a number
    if(isNaN(idx-0))
    {
        idx = 1;
    }

    //Click on your nav (idx starts at 0)
    $('.flex-control-nav li:eq('+(idx-1)+') a').trigger('click');
    }); 
```

另一种方法是像这样使用 startAt 参数：

```
(jQuery.noConflict())(function($) {
    //Get your hash tag
    var loc = $(location).attr('href');
    var idx = 1;
    if(loc.lastIndexOf('#') != -1)
    {
        idx = loc.substr(loc.lastIndexOf('#')+1).replace('slide', '');
    }

    //verify that idx is really a number
    if(isNaN(idx-0))
    {
        idx = 1;
    }

    $('#yourFlexSlider').flexslider ({
        startAt: idx
    });
}); 
```

# git - 为什么 git AuthorDate 与 CommitDate 不同？

> ID：11856983
> 
> 赞同：131
> 
> 时间：2012-08-08T02:50:43.137
> 
> 标签：git

我查找我的 git 日志，发现我的一些提交的 AuthorDate 和 CommitDate 略有不同：

```
commit 3a5912f90dc5227f308e99f95152fbee2301c59a
Author:     <hidden>
AuthorDate: Fri Jun 15 10:57:22 2012 +0800
Commit:     <hidden>
CommitDate: Fri Jun 15 11:14:37 2012 +0800 
```

作者和提交者和我一样。

这是怎么发生的？我困惑了好几天。

还有更多（发生在 341 次提交中的 17 次）：

```
+------------------------------+-------------------------------+
| from_unixtime(authored_date) | from_unixtime(committed_date) |
+------------------------------+-------------------------------+
| 2012-06-15 10:57:22          | 2012-06-15 11:14:37           |
| 2012-06-15 14:39:54          | 2012-06-15 14:48:57           |
| 2012-06-19 12:28:21          | 2012-06-19 12:29:41           |
| 2012-06-21 18:16:25          | 2012-06-21 18:28:48           |
| 2012-06-26 17:30:54          | 2012-06-26 17:33:55           |
| 2012-07-13 11:41:43          | 2012-07-13 11:42:17           |
| 2012-07-13 11:56:02          | 2012-07-13 12:13:22           |
| 2012-07-13 12:05:09          | 2012-07-13 12:12:24           |
| 2012-07-12 18:38:49          | 2012-07-13 12:26:35           |
| 2012-07-13 11:00:47          | 2012-07-13 12:25:15           |
| 2012-07-16 14:10:54          | 2012-07-16 14:15:01           |
| 2012-07-13 12:56:51          | 2012-07-16 13:49:48           |
| 2012-07-16 14:10:54          | 2012-07-16 14:19:46           |
| 2012-07-24 16:05:05          | 2012-07-24 16:05:48           |
| 2012-07-24 17:42:58          | 2012-07-24 17:43:33           |
| 2012-07-24 17:42:58          | 2012-07-24 17:45:18           |
| 2012-07-26 16:55:40          | 2012-07-26 16:55:53           |
+------------------------------+-------------------------------+ 
```

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2012-08-08T03:55:22.933

作者**日期**说明了最初提交的时间（即完成的时间`git commit`）。根据 的文档[`git commit`](http://www.kernel.org/pub/software/scm/git/docs/git-commit.html)，可以使用`--date`开关覆盖作者日期。

每次修改提交时，**提交日期**都会更改，例如，将提交所在的分支重新定位到另一个分支（[更多](https://gist.github.com/x-yuri/ec13ea740f766e72430ed8b9a9a72884)）时。

如果您进行提交并将补丁发送给另一个人以便在另一个仓库中应用补丁，也会发生同样的情况：作者日期将是您的日期`git commit`，提交日期将设置为应用补丁时的日期另一个回购。

如果您将补丁发送给两位同事，则会有一个作者日期，但有两个不同的提交日期。

[Git Book](http://git-scm.com/book/ch2-3.html)中也提到了这一点：

> 您可能想知道*author*和*committer*之间有什么区别。作者是最初编写补丁的人，而*提交**者*是最后应用补丁的人。因此，如果您向项目发送补丁并且其中一个核心成员应用了该补丁，那么你们俩都会获得荣誉——您是作者，核心成员是提交者

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-08-08T03:50:13.993

提交的作者日期保留在 rebase / cherry-pick 等上。但提交日期已更改。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-12-19T15:15:22.103

我碰巧遇到了 github 显示不同的提交时间的情况`git log`，我认为这是 Github 的一个错误。

原来github显示`CommitDate`并`git log`显示`AuthorDate`（没有`fuller`标志）。

发生这种情况是因为我从不同的分支中挑选了两个提交。虽然樱桃采摘提交时间戳的变化就像在做`commit --append`.

在我的情况下， Git`rebase`保留了提交日期。

还要检查 git log 中的 AuthorDate 和 CommitDate 使用`--format=fuller` [Docs](https://git-scm.com/docs/git-log#_commit_formatting)

# php - 获取ajax POST php

> ID：11856985
> 
> 赞同：0
> 
> 时间：2012-08-08T02:50:46.750
> 
> 标签：php, ajax

我试图让一个 ajax 文件上传器工作，并将一些额外的表单数据传递给 php。php 脚本能够获取 $_FILES['fileToUpload'] 但我得到了 $_POST["fname"]; 的未定义索引；

PHP

```
if(isset($_FILES['fileToUpload'])){

$fname = $_POST["fname"];

$name = htmlentities($_FILES['fileToUpload']['name']);
} 
```

JAVASCRIPT

```
var fd = new FormData();
fd.append("fileToUpload", document.getElementById('fileToUpload').files[0]);
var xhr = new XMLHttpRequest();
xhr.upload.addEventListener("progress", uploadProgress, false);
xhr.addEventListener("load", uploadComplete, false);
xhr.addEventListener("error", uploadFailed, false);
xhr.addEventListener("abort", uploadCanceled, false);
xhr.open("POST", "uploader.php");
xhr.send(fd); 
```

HTML

```
<form id="form1" name="form1" enctype="multipart/form-data">
                <div id="user">
                    <input type="text" id="fname" name="fname" />
                </div>
                <div id="fileInfo">
                    <div id="fileName"></div>
                    <div id="fileSize"></div>
                    <div id="fileType"></div>
                </div>
                <div class="row"></div>
                <div class="row">
                    <input type="file" name="fileToUpload" id="fileToUpload" onchange="fileSelected();"/>
                </div>
                <div class="row">
                    <input type="button" onclick="uploadFile()" value="Upload" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T03:00:33.147

因为您使用 ajax 发送帖子，所以您需要执行类似的操作

```
fd.append("fname", document.getElementById('fname').value); 
```

否则，没有什么可以告诉“onclick”发送您的 fname 输入字段。

仅当您使用提交按钮时才会发送输入字段。

# android - 在一个 SQLite 数据库中存储多个表的问题

> ID：11856990
> 
> 赞同：0
> 
> 时间：2012-08-08T02:51:09.137
> 
> 标签：android, database, sqlite, store

我在 Android 中关注这个示例[多表 SQLite DB 适配器？](https://stackoverflow.com/questions/4063510/multiple-table-sqlite-db-adapters-in-android)关于在一个数据库中存储多个表。

我创建了 4 个 DBAdapter（DBAdapter、CarsDBAdapter、BoatsDBAdapter 和 CyclesDBAdapter）。但是在其中一个 DBAdapter 中，我在 db 适配器中创建了 3 个表。然后我为其他 3 个数据库适配器创建了 3 个非 DBadaper 类。这些表没有插入到数据库中，而且我不确定我应该在非 dbadapter 类中声明哪个 DBAdapter。

我需要帮助。我将不胜感激提供的任何帮助。

以下是我输入的代码。

DBAdapter.java

```
public class DBAdapter
{
    public static final String DATABASE_NAME = "stuffIOwn";
    public static final int DATABASE_VERSION = 2;

    private static final String CREATE_TABLE_CARS = "create table cars(_id integer primary key autoincrement, " //$NON-NLS-1$
            +CarsDBAdapter.NAME+ " TEXT," //$NON-NLS-1$
            +CarsDBAdapter.MODEL+ " TEXT," //$NON-NLS-1$
            +CarsDBAdapter.YEAR+ " TEXT" +");"; //$NON-NLS-1$

    private static final String CREATE_TABLE_BOATS = "create table boats(_id integer primary key autoincrement, " //$NON-NLS-1$
            +BoatsDBAdapter.NAME+ " TEXT," //$NON-NLS-1$
            +BoatsDBAdapter.MODEL+ " TEXT," //$NON-NLS-1$
            +BoatsDBAdapter.YEAR+ " TEXT" +");"; //$NON-NLS-1$

    private static final String CREATE_TABLE_CYCLES = "create table cycles(_id integer primary key autoincrement, " //$NON-NLS-1$
            +CyclesDBAdapter.NAME+ " TEXT," //$NON-NLS-1$
            +CyclesDBAdapter.MODEL+ " TEXT," //$NON-NLS-1$
            +CyclesDBAdapter.YEAR+ " TEXT" +");"; //$NON-NLS-1$

    private final Context context;
    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public DBAdapter(Context ctx)     
    {         
        this.context = ctx;         
        this.DBHelper = new DatabaseHelper(this.context);     
    }

    private static class DatabaseHelper extends SQLiteOpenHelper      
    {         
        DatabaseHelper(Context context)          
        {             
            super(context, DATABASE_NAME, null, DATABASE_VERSION);         
            }          
        @Override         
        public void onCreate(SQLiteDatabase db)          
        {             
            db.execSQL(CREATE_TABLE_CARS);             
            db.execSQL(CREATE_TABLE_BOATS);             
            db.execSQL(CREATE_TABLE_CYCLES);                   
        }          
        @Override         
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)          
        {                            
            // Adding any table mods to this guy here         
        }     
    }//end DatabaseHelper class

    public DBAdapter open() throws SQLException      
    {         
    this.db = this.DBHelper.getWritableDatabase();         
    return this;     
    }      
    /**      
     * close the db 
     *return type: void      
     */    
    public void close()      
    {        
        this.DBHelper.close();     
    }

} 
```

CarsDBAdapter.java

```
public class CarsDBAdapter
{
    public static final String ROW_ID = "_id";
    public static final String NAME = "name";
    public static final String MODEL = "model";
    public static final String YEAR = "year";

    private static final String DATABASE_TABLE = "cars";

    private DatabaseHelper mDbHelper;
    private SQLiteDatabase mDb;

    private final Context mCtx;

    private static class DatabaseHelper extends SQLiteOpenHelper
    {
        DatabaseHelper(Context context)
        {
            super(context, DBAdapter.DATABASE_NAME, null, DBAdapter.DATABASE_VERSION);          
        }

        @Override
        public void onCreate(SQLiteDatabase db)
        {           
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
        {           
        }
    }// end DatabaseHelper class

    public CarsDBAdapter(Context ctx)
    {
        this.mCtx = ctx;
    }

    public CarsDBAdapter open() throws SQLException
    {
        this.mDbHelper = new DatabaseHelper(this.mCtx);
        this.mDb = this.mDbHelper.getWritableDatabase();
        return this;
    }

    public void close()
    {
        this.mDbHelper.close();
    }

    public long insertCars(String name, String model, String year)
    {
        ContentValues initialValues = new ContentValues();
        initialValues.put(NAME, name);
        initialValues.put(MODEL, model);
        initialValues.put(YEAR, year);
        return mDb.insert(DATABASE_TABLE, null, initialValues);
    }

    public long create(String name, String model, String year)
    {
        ContentValues initialValues = new ContentValues();

        initialValues.put(NAME, name);
        initialValues.put(MODEL, model);
        initialValues.put(YEAR, year);
        return this.mDb.insert(DATABASE_TABLE, null, initialValues); 
    }

    public boolean deleteCar(long rowId) 
    {          
        return this.mDb.delete(DATABASE_TABLE, ROW_ID + "=" + rowId, null) > 0; //$NON-NLS-1$     
    }

     public Cursor getAllCars() 
     {          
         return this.mDb.query(DATABASE_TABLE, new String[] { ROW_ID, NAME, MODEL, YEAR }, null, null, null, null, null);       
     }

     public Cursor getCar(long rowId) throws SQLException
     {
         Cursor mCursor = this.mDb.query(true, DATABASE_TABLE, new String[] {ROW_ID, NAME, MODEL, YEAR}, ROW_ID + "=" + rowId,
                 null, null, null, null, null);

         if(mCursor != null)
         {
             mCursor.moveToFirst();
         }

         return mCursor;
     }

     public boolean updateCar(long rowId, String name, String model, String year)
     {
         ContentValues args = new ContentValues();

         args.put(NAME, name);
         args.put(MODEL, model);
         args.put(YEAR, year);
         return this.mDb.update(DATABASE_TABLE, args, ROW_ID + "=" + rowId, null) >0;  
     }

}//end CarsDBAdapter class 
```

对 BoatsDBAdapter 和 CyclesDBAdapter 类做了同样的事情，但插入、更新、删除方法名称不同。这些是非 DBAdapter 类

汽车.java

```
public class Cars extends Activity
{
    final Context context = this;

     /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.cars);

        CarsDBAdapter carsDB = new CarsDBAdapter(this);

        //DBAdapter dbA = new DBAdapter(this);

        carsDB.open();
        long id;
        id = carsDB.insertCars("Mercedes", "MERCDS", "2000");
        id = carsDB.insertCars("BMW", "BMWTO", "1999");
        carsDB.close();

        carsDB.open();

        Cursor c = carsDB.getAllCars();
        if (c.moveToFirst())
        {
            do
            {
                DisplayContact(c);
            } while (c.moveToNext());
        }

        carsDB.close();

        Button btnMenu = (Button) findViewById(R.id.btnMenu);
        btnMenu.setOnClickListener(new View.OnClickListener()
            {

                @Override
                public void onClick(View v)
                {
                    Intent menuIntent = new Intent(context, VehiclesMenu.class);
                    startActivity(menuIntent);

                }
            });
    }//end onCreate()

    public void DisplayContact(Cursor c)
    {
        Toast.makeText(
                this,
                "id: " + c.getString(0) + "\n" + "Name: " + c.getString(1)
                        + "\n" + "Model:  " + c.getString(2) + "\n" + "Year: " + c.getString(3),  Toast.LENGTH_LONG)
                .show();
    }
} 
```

我对 Boats.java 和 Cycles.java 做了同样的事情，只是我在 Boats.java 中声明了 BoatsDBAdapter，在 Cycles.java 中声明了 CyclesDBAdapter

在 Boats.java 中

```
BoatsDBAdapter boatsDB = new BoatsDBAdapter(this);

        boatsDB.open();
        long id;
        id = boatsDB.insertBoats("Jet-ski", "ERTYU", "2002");
        id = boatsDB.insertBoats("Motor-boat", "MBCTY", "2003");
        boatsDB.close();

        boatsDB.open();

        Cursor c = boatsDB.getAllBoats();
        if (c.moveToFirst())
        {
            do
            {
                DisplayContact(c);
            } while (c.moveToNext());
        }

        boatsDB.close(); 
```

在 Cycles.java 中

```
CyclesDBAdapter cyclesDB = new CyclesDBAdapter(this);

        cyclesDB.open();
        long id;
        id = cyclesDB.insertCycles("Mountain-bike", "ADCFG", "2004");
        id = cyclesDB.insertCycles("Dirt-bike", "VBNGH", "2006");
        cyclesDB.close();

        cyclesDB.open();
        Cursor c = cyclesDB.getAllCycles();
        if (c.moveToFirst())
        {
            do
            {
                DisplayContact(c);
            } while (c.moveToNext());
        }
        cyclesDB.close(); 
```

**更新！** 我对我的代码进行了一些更新。我已将插入代码添加到 CarsDBAdapter 中。但是插入代码不在上面链接中的示例中。我删除了 BoatsDBAdapter、CyclesDBAdapter、Boats 和 Cycles 类，因为代码类似于 CarsDBAdapter 和 Cars 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T04:27:25.947

**我将拥有三个看起来类似于以下的适配器（我只是将其中一个作为演示，但每个适配器的想法都是相同的**

```
public class CarsDBAdapter {
    public static final String ROW_ID = "_id";
    public static final String NAME = "name";
    public static final String MODEL = "model";
    public static final String YEAR = "year";

    private static final String DATABASE_TABLE = "cars";

    private DatabaseHelper mDbHelper;
    private SQLiteDatabase mDb;

    private final Context mCtx;

    private static class DatabaseHelper extends SQLiteOpenHelper {

        DatabaseHelper(Context context) {
            super(context, DBAdapter.DATABASE_NAME, null, DBAdapter.DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        }
    }

    /**
     * Constructor - takes the context to allow the database to be
     * opened/created
     * 
     * @param ctx
     *            the Context within which to work
     */
    public CarsDBAdapter(Context ctx) {
        this.mCtx = ctx;
    }

    /**
     * Open the cars database. If it cannot be opened, try to create a new
     * instance of the database. If it cannot be created, throw an exception to
     * signal the failure
     * 
     * @return this (self reference, allowing this to be chained in an
     *         initialization call)
     * @throws SQLException
     *             if the database could be neither opened or created
     */
    public CarsDBAdapter open() throws SQLException {
        this.mDbHelper = new DatabaseHelper(this.mCtx);
        this.mDb = this.mDbHelper.getWritableDatabase();
        return this;
    }

    /**
     * close return type: void
     */
    public void close() {
        this.mDbHelper.close();
    }

    /**
     * Create a new car. If the car is successfully created return the new
     * rowId for that car, otherwise return a -1 to indicate failure.
     * 
     * @param name
     * @param model
     * @param year
     * @return rowId or -1 if failed
     */
    public long createCar(String name, String model, String year){
        ContentValues initialValues = new ContentValues();
        initialValues.put(NAME, name);
        initialValues.put(MODEL, model);
        initialValues.put(YEAR, year);
        return this.mDb.insert(DATABASE_TABLE, null, initialValues);
    }

    /**
     * Delete the car with the given rowId
     * 
     * @param rowId
     * @return true if deleted, false otherwise
     */
    public boolean deleteCar(long rowId) {

        return this.mDb.delete(DATABASE_TABLE, ROW_ID + "=" + rowId, null) > 0; //$NON-NLS-1$
    }

    /**
     * Return a Cursor over the list of all cars in the database
     * 
     * @return Cursor over all cars
     */
    public Cursor getAllCars() {

        return this.mDb.query(DATABASE_TABLE, new String[] { ROW_ID,
                NAME, MODEL, YEAR }, null, null, null, null, null);
    }

    /**
     * Return a Cursor positioned at the car that matches the given rowId
     * @param rowId
     * @return Cursor positioned to matching car, if found
     * @throws SQLException if car could not be found/retrieved
     */
    public Cursor getCar(long rowId) throws SQLException {

        Cursor mCursor =

        this.mDb.query(true, DATABASE_TABLE, new String[] { ROW_ID, NAME,
                MODEL, YEAR}, ROW_ID + "=" + rowId, null, null, null, null, null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    /**
     * Update the car.
     * 
     * @param rowId
     * @param name
     * @param model
     * @param year
     * @return true if the note was successfully updated, false otherwise
     */
    public boolean updateCar(long rowId, String name, String model,
            String year){
        ContentValues args = new ContentValues();
        args.put(NAME, name);
        args.put(MODEL, model);
        args.put(YEAR, year);

        return this.mDb.update(DATABASE_TABLE, args, ROW_ID + "=" + rowId, null) >0; 
    }

} 
```

**所以我的主要 DBAdapter（负责在单个数据库中创建我的所有表）看起来像这样**

```
public class DBAdapter {

    public static final String DATABASE_NAME = "stuffIOwn"; //$NON-NLS-1$

    public static final int DATABASE_VERSION = 1;

    private static final String CREATE_TABLE_CARS =
       "create table cars (_id integer primary key autoincrement, " //$NON-NLS-1$
    + CarsDBAdapter.NAME+ " TEXT," //$NON-NLS-1$
    + CarsDBAdapter.MODEL+ " TEXT," //$NON-NLS-1$
    + CarsDBAdapter.YEAR+ " TEXT" + ");"; //$NON-NLS-1$ //$NON-NLS-2$

    private static final String CREATE_TABLE_BOATS = "create table boats (_id integer primary key autoincrement, " //$NON-NLS-1$
    +BoatsDBAdapter.NAME+" TEXT," //$NON-NLS-1$
    +BoatsDBAdapter.MODEL+" TEXT," //$NON-NLS-1$
    +BoatsDBAdapter.YEAR+" TEXT"+ ");"; //$NON-NLS-1$  //$NON-NLS-2$

        private static final String CREATE_TABLE_CYCLES = "create table cycles (_id integer primary key autoincrement, " //$NON-NLS-1$
    +CyclesDBAdapter.NAME+" TEXT," //$NON-NLS-1$
    +CyclesDBAdapter.MODEL+" TEXT," //$NON-NLS-1$
    +CyclesDBAdapter.YEAR+" TEXT"+ ");"; //$NON-NLS-1$  //$NON-NLS-2$

    private final Context context; 
    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    /**
     * Constructor
     * @param ctx
     */
    public DBAdapter(Context ctx)
    {
        this.context = ctx;
        this.DBHelper = new DatabaseHelper(this.context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper 
    {
        DatabaseHelper(Context context) 
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) 
        {
            db.execSQL(CREATE_TABLE_CARS);
            db.execSQL(CREATE_TABLE_BOATS);
            db.execSQL(CREATE_TABLE_CYCLES);           
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, 
        int newVersion) 
        {               
            // Adding any table mods to this guy here
        }
    } 

   /**
     * open the db
     * @return this
     * @throws SQLException
     * return type: DBAdapter
     */
    public DBAdapter open() throws SQLException 
    {
        this.db = this.DBHelper.getWritableDatabase();
        return this;
    }

    /**
     * close the db 
     * return type: void
     */
    public void close() 
    {
        this.DBHelper.close();
    }
} 
```

DBAdapter 类仅在应用程序首次启动时被调用，其唯一职责是创建/升级表。所有其他对数据的访问都是通过单独的“适配器”类完成的。我发现这可以完美运行，并且不会产生我之前提到的版本控制问题。

# char - Java中的字符范围

> ID：11856992
> 
> 赞同：2
> 
> 时间：2012-08-08T02:51:18.743
> 
> 标签：char

我在一本书中读到：

> ..characters 只是底层的 16 位无符号整数。这意味着您可以分配一个数字文字，假设它适合无符号的 16 位范围（65535 或更小）。

它给我的印象是我可以将整数分配给字符，只要它在 16 位范围内。

但我怎么能这样做：

```
char c = (char) 80000; //80000 is beyond 65535. 
```

我知道演员们施展了魔法。但幕后究竟发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T03:01:55.160

看起来它正在使用 int 值 mod 65536。以下代码：

```
int i = 97 + 65536;
char c = (char)i;
System.out.println(c);
System.out.println(i % 65536);
char d = 'a';
int n = (int)d;
System.out.println(n); 
```

打印出 'a' 然后 '97' 两次（a 是[ascii](http://www.ascii-code.com/)中的 char 97 ）。

# android - Android 自动拍摄照片并每隔 X 秒上传一次的方法

> ID：11856993
> 
> 赞同：2
> 
> 时间：2012-08-08T02:51:27.230
> 
> 标签：android, photography

我有以下任务：

本月晚些时候，我将在太阳能气球上推出一款 Android 智能手机（htc droid 不可思议），就像我[去年 5 月所做的那样。](http://glossarch.wordpress.com/2012/05/26/jake-iii-the-successful-launch-of-a-20-ft-solar-balloon/)

我想将 Android 配置为每 X 秒拍摄一张照片并将其上传到 Google+。我有自动上传工作，但我还没有找到一个可以在使用很少系统资源的情况下自动拍照的应用程序（希望让手机长时间保持传输）。

哪些应用程序或简单脚本能够做到这一点？

我们无法将照片保存在硬盘上，因为我们永远无法取回它。它必须传送。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T03:15:54.763

我用过这个python脚本：

```
import android
import time

droid = android.Android()
for i in range(5): 
    temp = str(i)
    path = '/sdcard/picscript/'
    path += time.strftime("%B-%_e-%_I-%M-")
    path += temp
    path += '.png'
    droid.cameraCapturePicture(path, True) 
```

配合[SL4A](http://code.google.com/p/android-scripting/)循环拍照。现在它将拍摄 5 张图像并将它们保存到 SD 卡上名为 picscript 的文件夹中，文件名将是照片拍摄时间的时间戳。保存它们后，您可以从那里上传它们，如果您喜欢冒险，您甚至可以弄清楚如何从 python 脚本本身上传它们。

您可以更改脚本以使其成为无限（ish）循环，并根据需要在每张照片之间添加时间延迟。

如果您同意在设备上安装 sl4a，您可以从 python 文件运行它。如果您不想安装 sl4a，则可以将其包装在 android [apk 中，如本 pdf 中所述。](http://code.google.com/p/android-scripting/downloads/detail?name=Pro_Android_Python_with_SL4A_Ch10_Packaging_and_Distributing.pdf&can=2&q=) 不管你走哪条路，你都必须在你的设备上[安装 python](http://code.google.com/p/android-scripting/downloads/detail?name=python_for_android_r1.apk&can=2&q=)。

注意：我不知道这个脚本的电池使用情况，但我怀疑它会很耗电。在更新的 sl4a 版本中，API 发生了一些变化，现在屏幕上显示了相机预览。我不认为它曾经显示预览，因此如果您返回并获取旧版本，您可能能够从中获得更好的电池性能。`droid.cameraTakePicture(path,True)`是旧版本中使用的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T03:30:07.280

首先，主要思想是使用 IntentService 进行捕获。

这将非常简单，只需覆盖 onCommand 方法并在此处使用示例代码进行拍摄

[http://developer.android.com/guide/topics/media/camera.html#access-camera](http://developer.android.com/guide/topics/media/camera.html#access-camera)

您不必设置预览视图，或者如果它在您的设备上不起作用，则可能只需设置一个虚拟预览。

要触发 IntentService，您应该有一个 AlarmManager 来触发每 X 次并触发 Intent。还有一个 BroadcastReceiver 在启动时启动 AlarmManagers。

# python - 需要将所有模块放在一个文件夹中 - 在 Mac 上安装 2 套 Python“框架”？（系统/库/框架和库/框架）

> ID：11856995
> 
> 赞同：1
> 
> 时间：2012-08-08T02:51:55.710
> 
> 标签：python

我的 Mac 上安装了两组 Python。

“系统/库/框架”和“库/框架”

我试图将我所有的 Python 模块放在一个文件夹中。目前，这是我转储 sys.path 时显示的内容：

> /Library/Python/2.7/site-packages/distribute-0.6.21-py2.7.egg /Library/Python/2.7/site-packages/pip-1.0-py2.7.egg /Library/Python/2.7/site -packages/pymongo-2.0.1_-py2.7-macosx-10.7-intel.egg /Library/Python/2.7/site-packages/pytz-2011k-py2.7.egg /Library/Python/2.7/site-packages /ipython-0.13-py2.7.egg /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7 /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac /System /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages /System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python /System/Library /框架/Python。framework/Versions/2.7/lib/python2.7/lib-tk /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old /System/Library/Frameworks/Python.framework/版本/2.7/lib/python2.7/lib-dynload /System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/PyObjC /Library/Python/2.7/site-packages /Library/Python/ 2.7/站点包/PIL

我可以删除 Python“框架”的一个“副本”吗？并且会在工作中复制所有模块文件吗？

我已经使用这台电脑几年了，所以我可能无意中做了一些导致这种情况的事情。

# jquery - 星级 int

> ID：11856997
> 
> 赞同：0
> 
> 时间：2012-08-08T02:51:58.420
> 
> 标签：jquery, initialization, rating, rating-system

我让星星从选定的值初始化。

问题是当我点击星星时，整个星星的初始化都搞砸了。

如果有人可以帮助我以更好和更一致的方式初始化星星，我将不胜感激。

星星的代码可以在这里找到[http://jsfiddle.net/wSMEc/6/](http://jsfiddle.net/wSMEc/6/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:09:14.750

我真的没有看到初始化发生在哪里，因为焦点更改仅在用户单击星号时才起作用。我认为最好将值从焦点更改功能中提取出来并将其设置在就绪功能中。

以下工作虽然可以在几个地方进一步清理。就像您可能不想将插槽设置​​为 5，以防您想将评级系统从 1 到 5 星更改为 1 到 10 星以及其他硬编码避免。

```
function init(value, slots) {
   vstring = value.toString();
   vlength = vstring.length;
   for (var i = 0; i < vlength; i++)
   {
      character = vstring.charAt(i);
      charNumber = slots - Number(character);
      rgroup = 'rating' + i;               
      $('input:radio[name='+rgroup+']')[charNumber].checked = true;  
   }
}

jQuery(document).ready(function() {
   var value   = 2123;
   var slots = 5;
   $('.rating').focus();
   init(value, slots);

   $('.rating').bind('focus change', function(event) {
   changed = event.target.id;
   var id_number = changed.split("star")[1] - 1;
   var row = Math.floor(id_number / slots);
   var col = id_number % slots;
   var stringValue = value.toString();

   stringValue = stringValue.substr(0, row) + col + stringValue.substr(row + 1);
   value = Number(stringValue);

   var rgroup = $(this).find("input:last").attr('name');
    alert(rgroup);

   $('input:radio[name='+rgroup+']')[value].checked = true;
}); 
```