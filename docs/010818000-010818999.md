# StackOverflow 问答 10818000-10818999

# javascript - .serialize() Javascript 中的变量数组

> ID：10818000
> 
> 赞同：1
> 
> 时间：2012-05-30T14:09:46.443
> 
> 标签：javascript, jquery, serialization

我有一个可用的变量列表，我想通过 $.ajax post 发送它。我必须以什么格式保存这些文件才能使用 .serialize 函数？我不断收到此错误：

对象“空白”没有“序列化”方法

我试图让它们成为一个数组，并尝试了 jQuery.param()。我觉得这很简单，但我似乎无法理解。谢谢！

```
var $data = jQuery.makeArray(attachmentId = attachmentID, action = 'rename', oldName = filename, newName, bucketName, oldFolderName, newFolderName, projectId = PID, businessId = BID);
var serializedData = $data.serializeArray();
//alert(theurl);

$.ajax({ type: "post", url: theurl, data: serializedData, dataType: 'json', success:  reCreateTree }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:24:41.153

[`.serialize`用于表单元素](http://api.jquery.com/serialize/)：

> 将一组表单元素编码为字符串以进行提交。

[`$.ajax`文档](http://api.jquery.com/jQuery.ajax/)说明了该选项`data`：

> 要发送到服务器的数据。如果还不是字符串，则将其转换为查询字符串。它附加到 GET 请求的 url。请参阅`processData`阻止此自动处理的选项。对象必须是键/值对。如果 value 是一个数组，jQuery 会根据传统设置的值（如下所述）序列化具有相同键的多个值。

所以你需要做的就是传递一个对象。例如：

```
$.ajax({ 
    type: "post", 
    url: theurl, 
    data: {                             // <-- just pass an object
          attachmentId: attachmentID,
          action: 'rename',
          // ...
    },
    dataType: 'json', 
    success:  reCreateTree 
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T14:24:55.317

看来您已经习惯了数组（关联数组）的 PHP 风格。在 Javascript 中，对象基本上是相同的东西（尽管可能要复杂得多）。

因此，如果您尝试在 php 中创建这样的数组，它将是

```
$array = array(
    "foo" => "bar",
    "bar" => "foo",
); 
```

在 Javascript 中使用对象而不是数组

```
var arr = {
    foo: "bar",
    bar: "foo"
} 
```

# xml - 使用 OpenSSL 验证签名的 XML

> ID：10818001
> 
> 赞同：0
> 
> 时间：2012-05-30T14:09:52.090
> 
> 标签：xml, openssl

如何使用 OpenSSL 验证签名？公钥嵌入 XML 文档。由 xmldsig 方法签名的 XML

# c# - 当我们单击 DataGrid 行时，在 wpf 功能区窗口中加载另一个用户控件

> ID：10818005
> 
> 赞同：0
> 
> 时间：2012-05-30T14:10:16.463
> 
> 标签：c#, .net, wpf, oop, events

请耐心阅读此内容...简要地说，我想要的是“当我单击 DataGrid 行时，这些值必须以另一种形式显示（此处为 userControl）..”

我正在使用一个 Wpf 功能区窗口。该窗口分为两行。在第一行中，我填充了 Wpf 功能区，在第二行中，我填充了一个 Dock 面板以填充基于操作的用户控件。

功能区有两个按钮

1.  显示所有员工
2.  添加员工

我创建了两个用户控件表单，一个是输入员工详细信息，第二个是显示 DataGrid 中的所有记录。

现在我首先单击功能区按钮 1 以显示所有员工详细信息，然后将用户控件“CtlGridDisplay”加载到 DockPanel（位于功能区窗口中）并在 DataGrid 中显示所有详细信息。

现在我双击行并获取选定的行employeeId 然后我希望在另一个用户控件“CtlAddEmployee”中显示该详细信息并且该用户控件必须仅显示在该DockPanel中..为此我试图清除Dockpanel并创建控件“CtlAddEmployee”的对象并将该控件添加到 DockPanel.. 但是 DockPanel 仍然只填充 DataGRid，即填充有“CtlGridDisplay”......我不明白为什么......

为此，我还使用了事件和委托，它很好地执行了所有代码，但 Dockpanel 没有被清除，也没有加载新控件。

但是，当我单击一个功能区按钮 1 时，它会加载“CtlGridDisplay”，当我单击功能区按钮 2 时，它会在 Dock 面板中加载“CtlAddEmployee”...

但是当我尝试显示数据时，我在一个用户控件中单击 DataGrid 以显示在另一个控件中不起作用..

事件委托方法代码如下...

在用户控件“CtlDisplayEmployeeList”中，代码​​是

```
public event MyOrganizationDetails.MainRibbonWinodw.DisplayEmployeeHandler DisplayemployeeEvent;

private void GridList_MouseDoubleClick(object sender, MouseButtonEventArgs e)
{
    MainRibbonWinodw mainRibbonobj = new MainRibbonWinodw();
    this.DisplayemployeeEvent += new MainRibbonWinodw.DisplayEmployeeHandler(mainRibbonobj.fnDisplayEmployeeDetails);
    if (GridList.SelectionUnit == DataGridSelectionUnit.FullRow)
    {
        if (GridList.SelectedItems.Count > 0)
        {
            for (int i = 0; i < GridList.SelectedItems.Count; i++)
            {
                DataGrid dg = sender as DataGrid;
                EmployeeDetail detail = dg.SelectedItem as EmployeeDetail;
                string selectedEmp = detail.EmpId; //it gives Employee Id

                if (DisplayemployeeEvent != null)
                    DisplayemployeeEvent(selectedEmp);
            } 
        }
    }
} 
```

在功能区窗口中......代码将......在这里处理事件......

```
public partial class MainRibbonWinodw : RibbonWindow
{
    public delegate void DisplayEmployeeHandler(string str);

    public void fnDisplayEmployeeDetails(string str)
    {
        CtlAddEmployee frm2 = new CtlAddEmployee(str);
        DockPanelInRibbon.Children.Clear();
        DockPanelInRibbon.Children.Add(frm2);    
    }
} 
```

在另一个用户控件中..

构造函数...

```
public CtlAddEmployee(string str)
{
    InitializeComponent();
    fnDisplayingEmployee(str);
} 
```

当我调试所有代码时，所有代码都被很好地触发但“CtlAddEmployee”表单没有加载到 DockPanel ...... Dock 面板仍然带有那个 DataGRid ......我不知道为什么请告诉我解决方案......

感谢您的耐心等待...阅读本文...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T19:12:36.523

您也必须为停靠面板调用事件。例如 leftMouseButtonUp 和停靠你的用户控件。

# graph - 用于平均多个文件的 Gnuplot 脚本

> ID：10818012
> 
> 赞同：4
> 
> 时间：2012-05-30T14:10:39.303
> 
> 标签：graph, visualization, gnuplot

我在几个文件中有一系列测量。每个文件看起来像这样：

```
1 151.973938 144.745789 152.21991 17:57:14
2 151.995697 144.755737 152.21991 17:57:14
3 152.015747 144.765076 152.21991 17:57:14
.
.
. 
```

我正在寻找一种可能性来计算多个文件中同一字段的平均值。在这个过程结束时，我想要一个平均测量值的图表。

gnuplot 可以吗？我自己无法在 gnuplot 中找到合适的选项。如果没有，您会推荐哪种不同的方式来实现这一目标？

最好的问候， Juuro

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T15:03:24.830

你不能在 gnuplot 中做到这一切。Gnuplot 仅限于一次处理一个文件中的列。您需要一些其他实用程序来预处理您的数据。假设数据采用您演示的格式（使用空格而不是分号），此脚本将取第二、第三和第四列的平均值，并输出一个第一列和第五列相同的文件，中间取平均值。在只有`.txt`您要处理的文件的目录中运行此 bash 脚本。

```
#!/bin/bash

sum=$(ls -l *.txt | wc -l)
paste -d" " *.txt | nawk -v s="$sum" '{
    for(i=0;i<=s-1;i++)
    {
        t1 = 2+(i*5)
        temp1 = temp1 + $t1
        t2 = 3+(i*5)
        temp2 = temp2 + $t2
        t3 = 4+(i*5)
        temp3 = temp3 + $t3
    }
    print $1" "temp1/s" "temp2/s" "temp3/s" "$5
    temp1=0
    temp2=0
    temp3=0
}' 
```

从 gnuplot 内部，您可以像这样运行脚本：

```
!myscript.sh > output.out
plot 'output.out' u 1:2 # orwhatever 
```

或像这样：

```
plot '<myscript.sh' u 1:2 
```

（代码灵感来自我在[这里](http://www.unix.com/shell-programming-scripting/78313-help-extracting-multiple-files-taking-average-same-time.html)找到的内容。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T14:42:19.187

我认为gnuplot是不可能的。我会首先制作一个脚本来进行平均并将结果打印到标准输出。假设这个脚本叫做average.py：

```
plot '<average.py FILE1 FILE2 FILE3' w l 
```

例如，脚本 average.py 可能看起来像这样。

```
#!/usr/bin/python
from numpy import loadtxt,mean,ones
import sys 

#number of files:
nrfiles=len(sys.argv[1:])

#just to get the dimensions of the files
data=loadtxt(str(sys.argv[1]))
rows=data.shape[0]
cols=data.shape[1]

#initialize array
all=ones((int(nrfiles),int(rows),int(10)))

#load all files:
n=0
for file in sys.argv[1:]:
      data=loadtxt(str(file))
      all[n,:,0:cols]=data
      n=n+1

#calculate mean:
mean_all=mean(all,axis=0)

#print to stdout
for i in range(rows):
      a=''
      for j in range(cols):
         a=a+str('%010.5f   ' % mean_all[i,j])
      print str(a) 
```

此脚本的限制是所有文件必须具有相同的数据结构

# facebook-graph-api - 如何获得短期访问令牌？

> ID：10818014
> 
> 赞同：3
> 
> 时间：2012-05-30T14:10:50.763
> 
> 标签：facebook-graph-api, access-token

我看到有关“删除离线访问权限”的页面[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/) 但我找不到让访问令牌过期以测试我的桌面应用程序的方法。当我登录时，我只能获得 2 个月的访问令牌。如何让访问令牌在短时间内过期？如何获得短期访问令牌？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:44:37.537

我想，如果您将使用 Graph API Explorer：[https](https://developers.facebook.com/tools/explorer) ://developers.facebook.com/tools/explorer ，您将获得短期令牌（应在 1 -2 小时内到期）。然后复制它并在您的应用程序中使用它进行测试。

我还找到了这个链接，您可以在其中测试访问令牌并找出谁颁发、何时到期等等：[https ://developers.facebook.com/tools/debug/access_token](https://developers.facebook.com/tools/debug/access_token)

# c# - 平台独立性：与将源代码从一个操作系统移动到另一个操作系统有何不同？

> ID：10818015
> 
> 赞同：-2
> 
> 时间：2012-05-30T14:10:51.450
> 
> 标签：c#, java, php, c++, c

平台无关的确切定义是什么。我读过Java是一种独立于平台的语言，因为它将源代码转换为字节码并且该字节码可以在任何安装了Java虚拟机的操作系统上运行。

我很困惑，如果我有任何其他语言的源代码，比如 C、PHP、VB、C#、C++、RubyOnRails 等，并且该源代码可以在任何具有相应编译器/解释器的操作系统上运行。那么我们为什么不说 C 或其他语言也是平台无关的语言。

*Java 实际上非常依赖于 Java 平台。此外，C 可以说是一种非常便携的语言。– 尼克拉斯*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T14:13:32.583

旨在直接与操作系统交互的编程语言（例如 C）往往被视为平台*相关*的，因为一个系统可能提供一组系统调用，而另一个系统可能提供另一组系统调用。因此，应用程序可能*取决于*它在哪个平台上执行。

从某种意义上说，编译的 Java 程序肯定依赖于平台，因为它依赖于 JVM 的存在。然而，与编译后的 C 程序不同，它独立于底层操作系统并遵循[*编译一次，随处运行*](http://en.wikipedia.org/wiki/Write_once,_run_anywhere)的原则。

[这是此网页](http://code.wikia.com/wiki/Platform-independent_programming)的引述

> *当一个程序在多个平台上运行时，就实现了平台无关编程。独立于平台的应用程序在任何操作系统、任何处理器架构等上都应该以相同的方式工作。Java 是用于创建此类应用程序的众所周知的语言。*

* * *

正式地说（我喜欢正式地说）任何用具有*明确定义的语义*（涵盖所有语言的 99%）的语言编写的程序当然可以在任何平台上执行。

**相关问题：**

*   [Java是跨平台的吗？](https://stackoverflow.com/questions/5978005/is-java-cross-platform)
*   [.NET 平台是否独立？](https://stackoverflow.com/questions/3656721/is-net-platform-independent)
*   [为什么Java平台独立](http://wiki.answers.com/Q/Why_java_is_platform_independent)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T14:13:20.587

理想情况下，这意味着编写一次而无需担心特定平台的事情，一次编译并在任何地方运行。但这真的很难实现。

# c++ - 代码块打开空文件并引发链接错误

> ID：10818016
> 
> 赞同：0
> 
> 时间：2012-05-30T14:10:51.457
> 
> 标签：c++, linker, codeblocks

每次我通过 Codeblocks 10.05 和 MinGWs GNU-CPP-Compiler 编译一些东西。一切正常。然后我得到链接错误，没有对“MyNamespace::MyClass”的引用。当我单击错误时，它会打开一个空文件。所以它似乎试图编译空文件。这个 bug 存在 2 或 3 天，并且只发生在 GUI-projects oder Console-Applications-projects 上。这个错误已经被报告了，我尝试了最新的每晚。它没有帮助。我该如何解决这个问题或以其他方式链接？

Edit1：经过提示/备注后，我尝试重新创建此错误，但简单的项目有效。那么有人知道它是如何生产的吗？这次我将尝试查找创建此行为的文件。

Edit2：我非常失败。样本：

```
// hpp
namespace MyNamespace
{
    class MyClass;
    extern MyClass globalMyClass;
}

// cpp
MyNamespace::MyClass globalMyClass; 
```

# jpa-2.0 - 没有可用于的持久性提供程序

> ID：10818025
> 
> 赞同：3
> 
> 时间：2012-05-30T14:11:16.580
> 
> 标签：jpa-2.0, provider, openjpa

我的文件`src / main / resources / META-INF / persistence.xml`是：

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0" xmlns="http://java.sun.com/xml/ns/persistence">
    <persistence-unit name="todo" transaction-type="RESOURCE_LOCAL">
        <class>com.testJPA.classes.Voiture</class>
        <properties>

            <property name="javax.persistence.jdbc.driver" value="org.hsqldb.jdbcDriver" />
            <property name="javax.persistence.jdbc.url" value="jdbc:hsqldb:mem:todos" />
            <property name="javax.persistence.jdbc.user" value="sa" />
            <property name="javax.persistence.jdbc.password" value="" />

            <property name="openjpa.jdbc.SynchronizeMappings" value="buildSchema(ForeignKeys=true)"/>
            <property name="openjpa.RuntimeUnenhancedClasses" value="supported"/>
        </properties>

    </persistence-unit> 
```

我的主要课程是：

```
package com.testJPA.classes;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;
import javax.persistence.Query;

public class Main {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        System.out.print("Hello");
        EntityManagerFactory emf = Persistence
                .createEntityManagerFactory("todo");
        EntityManager em = emf.createEntityManager();

        for (int i = 0; i < 10; i++) {
            Voiture car = new Voiture("a", "b", "c");
            em.persist(car);

        }

        em.getTransaction().commit();

        // Find the number of Point objects in the database:
        Query q1 = em.createQuery("SELECT COUNT(v) FROM Voiture v");
        System.out.println("Le nombre d'enregistrement: "
                + q1.getSingleResult());

    }

} 
```

我的课“Voiture”是：

```
package com.testJPA.classes;

import javax.persistence.Entity;
import javax.persistence.Id;

@Entity
public class Voiture {

@Id private String matricule;
    String position;
    String vitesse;

    public Voiture(String matricule, String position, String vitesse) {
        this.matricule = matricule;
        this.position = position;
        this.vitesse = vitesse;

    }

    public Voiture() {
        this.matricule = "";
        this.position = "";
        this.vitesse = "";

    }

    public String getMatricule() {
        return matricule;
    }

    public void setMatricule(String matricule) {
        this.matricule = matricule;
    }

    public String getPosition() {
        return position;
    }

    public void setPosition(String position) {
        this.position = position;
    }

    public String getVitesse() {
        return vitesse;
    }

    public void setVitesse(String vitesse) {
        this.vitesse = vitesse;
    }

} 
```

我有这个错误：尝试以下发现的实现后，没有可用于“todo”的持久性提供程序

对不起，我是 JAva EE 的初学者

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T22:33:18.417

这是一个类路径问题。您需要在编译的类目录的根目录中有 META-INF 目录。

```
target / classes /
    / com / testJPA / classes / Main.class
    / META-INF / persistence.xml 
```

解决此问题后，您需要摆脱 openjpa.RuntimeUnenhancedClasses 属性。那是一个邪恶的属性，会让你头疼不已。请阅读[本文档](http://openjpa.apache.org/entity-enhancement.html)和[本文档](http://webspherepersistence.blogspot.com/2009/02/openjpa-enhancement.html)以了解如何正确增强您的实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:26:09.047

如果 JPA 是独立使用的，你必须根据你使用`<provider>`的`persistence.xml`JPA 实现来指定

对于 OpenJPA，它是`org.apache.openjpa.persistence.PersistenceProviderImpl`：

```
 <persistence-unit name="todo" transaction-type="RESOURCE_LOCAL">
        <class>com.testJPA.classes.Voiture</class>
        <provider>org.apache.openjpa.persistence.PersistenceProviderImpl/provider>   
         .......................................................
    </persistence-unit> 
```

# android - Android：如何让键盘一直保持打开状态

> ID：10818029
> 
> 赞同：6
> 
> 时间：2012-05-30T14:11:34.530
> 
> 标签：android, keyboard, back-button

我一直在努力让键盘保持正常。我不希望后退按钮隐藏它。我不想有任何隐瞒。

我已经在清单中转储了 android:windowSoftInputMode="stateAlwaysVisible"，但似乎构建此功能的团队应该在谷歌上搜索“始终”的定义

当我按下应用程序上的后退按钮时，它会隐藏键盘。

有没有办法捕捉并杀死第一个后退按钮单击，或者将其传递给活动而不隐藏键盘？

编辑

* * *

覆盖其中任何一个并在每一行上放置断点向我展示了一件事，这些都没有被调用。键盘是隐藏的，我的活动没有线索。

```
 public boolean onKeyLongPress(int keyCode, KeyEvent event){
 public boolean onKeyMultiple(int keyCode, int repeatCount, KeyEvent event){
 public boolean onKeyUp(int keyCode, KeyEvent event){
 public boolean onKeyDown(int keyCode, KeyEvent event) {
 public void onBackPressed() { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:16:43.490

*有没有办法捕捉并杀死第一个后退按钮单击，或者将其传递给活动而不隐藏键盘？*

是的。只需使用以下代码：

```
@Override
    public void onBackPressed() {
       //do nothing,hence avoiding the soft keyboard from hiding
       return;
    } 
```

# magento - magento 登录页面，在 magento 1.6.1 的 CMS 主页上的灯箱中的注册表单

> ID：10818030
> 
> 赞同：0
> 
> 时间：2012-05-30T14:11:37.923
> 
> 标签：magento

这是第二次发这个问题，我的客户想在CMS主页的灯箱中显示登录表单、注册表单、欢迎折扣，就像这个网站[http://www.myntra.com/](http://www.myntra.com/)，

我尝试通过在 CMS 主页中粘贴以下代码来将 lytebox 模块用于 lighbox

`<script type="text/javascript">// <![CDATA[ $lb.launch({ url: 'test.html', // the url to the page you want to load, or image.jpg options: 'width:800 height:600', // optional title: 'My Title', // optional }) ]]></script>`

一切都很好，但是这个 lytebox 脚本只接受 html 页面而不是 php 或 phtml 文件。有没有其他方法可以在灯箱中显示登录表单，请逐步建议我，因为我是编程领域的新手......

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:55:56.327

将此代码添加到 cms/homepage

```
{{block type="core/template" template="quicklogin/quicklogin.phtml"}} 
```

这一行是 quicklogin/quicklogin.phtml 文件的第一行

```
<?php if(!$this->helper('customer')->isLoggedIn()): ?> 
```

并在上述文件的最后一个条件下完成此操作

# c# - 提示用户在 ASP.NET C# 中保存/打开文件

> ID：10818031
> 
> 赞同：13
> 
> 时间：2012-05-30T14:11:49.093
> 
> 标签：c#, asp.net

找出如何做到这一点应该不难。基本上我正在尝试获取一个字符串并让客户端在单击按钮时保存它。它应该弹出一个保存/打开对话框。没有额外的花里胡哨或任何东西。这不是火箭科学，（或者我会这么认为）。

似乎有很多不同的方式（StreamWriter、HttpResponse 等），但我找不到的示例都无法正常工作或解释发生了什么。提前致谢。

我发现的许多代码块中的一个示例......

（这只是一个例子，请随意不要以此为基础回答。）

```
String FileName = "FileName.txt";
String FilePath = "C:/...."; //Replace this
System.Web.HttpResponse response = System.Web.HttpContext.Current.Response;
response.ClearContent();
response.Clear();
response.ContentType = "text/plain";
response.AddHeader("Content-Disposition", "attachment; filename=" + FileName + ";");
response.TransmitFile(FilePath);
response.Flush();
response.End(); 
```

第 2 行表示替换该字符串。如何？这段代码被宣传为会弹出一个对话框。我不应该在代码中设置路径，对吧？

编辑：最终结果（再次编辑，删除必须在 End() 之前；）

```
 string FilePath = Server.MapPath("~/Temp/");
        string FileName = "test.txt";

        // Creates the file on server
        File.WriteAllText(FilePath + FileName, "hello");

        // Prompts user to save file
        System.Web.HttpResponse response = System.Web.HttpContext.Current.Response;
        response.ClearContent();
        response.Clear();
        response.ContentType = "text/plain";
        response.AddHeader("Content-Disposition", "attachment; filename=" + FileName + ";");
        response.TransmitFile(FilePath + FileName);
        response.Flush();

        // Deletes the file on server
        File.Delete(FilePath + FileName);

        response.End(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T14:18:20.707

**第 2 行（FilePath）表示服务器上**文件的路径

 **第 8 行：

```
response.TransmitFile(FilePath); 
```

将该特定文件传输到客户端，这就是弹出保存对话框的内容。

如果您不传输文件，我不确定是否会弹出对话框（即使您设置了标题）

无论如何，我认为第 8 行应该是：

```
 response.TransmitFile(FilePath + FileName); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T14:39:41.327

如果浏览器将响应作为某个文件找到，则会有一个默认对话框。如果您希望浏览器显示该默认对话框，您需要做的就是将响应作为文件发送到浏览器，您可以通过多种方式执行此操作：

1.  如果是静态文件，

    *   最好的方法是在锚标签的 href 中提及文件路径。（显然，如果您没有安全问题）
    *   与您的回答一起出来，就像您的示例中所做的那样。
    *   您可以参考此处的其他方法[4 从 asp.net 发送 pdf 的方法](http://www.dotnetscraps.com/dotnetscraps/post/4-ways-to-send-a-PDF-file-to-the-IE-Client-in-ASPNET-20.aspx)
2.  如果它是您需要在运行时生成的动态文件，您可以做一个技巧，从文件流生成文件，将其放在服务器的某个临时文件夹中，如上所述将其作为静态文件读回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T14:14:06.843

`FilePath`应该指向您要发送给客户端的文件。*这是服务器上*的路径。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-22T20:06:11.903

只需使用此代码，它应该可以提示用户打开一个对话框以在系统上打开或保存文件....

```
byte[] bytesPDF = System.IO.File.ReadAllBytes(@"C:\sample.pdf");

        if (bytesPDF != null)
        {

            Response.AddHeader("content-disposition", "attachment;filename= DownloadSample.pdf");
            Response.ContentType = "application/octectstream";
            Response.BinaryWrite(bytesPDF);
            Response.End();
        } 
```**

# java - 创建服务器，保持服务运行（或阻止？）的技术

> ID：10818032
> 
> 赞同：0
> 
> 时间：2012-05-30T14:11:49.387
> 
> 标签：java, serversocket

在 Java 中创建独立服务器时（不使用像 tomcat/jetty 这样的容器），保持服务运行而不结束的各种技术是什么？

我已经看到人们在哪里使用 ServerSocket（因为您可能会与服务进行通信），并且他们使用 ServerSocket.accept() 阻塞直到它收到消息。这通常在一个while循环中完成：

```
while(...) {
   serverSocket.accept();
} 
```

（[http://docs.oracle.com/javase/6/docs/api/java/net/ServerSocket.html#accept()](http://docs.oracle.com/javase/6/docs/api/java/net/ServerSocket.html#accept())）

这是唯一的方法吗？如果没有，还有哪些其他方法以及它的优点/缺点？

是否有任何库可以帮助您构建自己的服务，或者它几乎是您自己的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:25:01.163

有各种库可以帮助您在 Java 中推出自己的 Windows/Unix 服务：

*   [Apache Commons 守护进程](http://commons.apache.org/daemon/)
*   [隈](http://akuma.kohsuke.org/)
*   [Java 服务包装器](http://wrapper.tanukisoftware.com/doc/english/download.jsp)

如何保持应用程序运行取决于应用程序的实际需求。如果您的应用程序是服务器，您通常会想要监听传入连接，这通常涉及某种阻塞/轮询。您如何再次执行此操作取决于您要构建的服务器类型。在通用解决方案中，您已经提到了 ServerSocket 类及其方法 accept()。另一种可能性是使用 java.nio 并实现一个反应器，它提供一个可以一次处理多个连接的单线程服务器（有关详细信息，请参见[http://gee.cs.oswego.edu/dl/cpjslides/nio.pdf](http://gee.cs.oswego.edu/dl/cpjslides/nio.pdf)） ，但可能有点难以掌握和调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:35:37.137

您可能想要的是多线程服务器。每次服务器接受连接时，服务器都会创建一个线程来处理向该客户端发送/接收。如果您不在服务器中使用线程，它一次只能处理一个连接。因此，正如您的意思，服务器无限循环并侦听传入连接：

```
while(true){
    serverSocket.accept();
    ClientHandler c = new ClientHandler(serverSocket); 
```

每次接受连接时，都会创建一个 ClientHandler 类的实例。此类实现 Runnable，并在该套接字上使用 getInputStream 和 getOutputStream 循环传入消息：

```
public class ClientHandler implements Runnable{
DataInputStream in;
DataOutputStream out;

//ClientHandler constructor
   public ClientHandler(Socket s) throws IOException{
        in= new DataInputStream(socket.getInputStream());
        out=new DataOutputStream(socket.getOutputStream());
        thread.start();
} 
```

运行方法：

```
public void run() { 
   while(true){
       String temp="";
       while ((temp = (String) in.readUTF()) != null){ // Read from the input stream each iteration. When temp is not null a message is recived             
            System.out.println(temp); 
```

请注意，上面的代码没有考虑到可能发生的不同异常，而且非常基础。但它应该让您对如何实现使用 Sockets 的服务器有一个基本的了解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-26T14:15:39.803

对于快速解决方案（仅在测试环境中！），您可以使用通常被称为“企业循环”的东西（因为它在生产系统中经常出现）：

```
while (true) 
    try {
        // do something
    } catch (Throwable t) {
        // maybe log
    } 
```

但是，这在生产代码中不是很好的风格。（参见 [1] 对该成语的模仿）

要创建服务，您需要[此 answer](https://stackoverflow.com/a/10819366/3888050)中的库之一。

如果您“只需要多线程”，请查看 Java 并发框架。我强烈建议阅读[Java Concurrency in Practice](http://jcip.net/)，因为多线程不仅仅是启动另一个线程，而且错误很难调试。

[1] [http://blog.antiblau.de/2016/01/26/java-enterprise-loop/](http://blog.antiblau.de/2016/01/26/java-enterprise-loop/)

# c# - 如何使用 C# 解析出现在文件中某个位置的值

> ID：10818033
> 
> 赞同：0
> 
> 时间：2012-05-30T14:11:50.503
> 
> 标签：c#

我有**字符串**，每个字符串都包含一个 RowKey 值，如下所示：

```
data-RowKey=029 
```

这在每个文件中只发生一次。有什么方法可以通过 C# 函数获取数字，还是我必须自己编写某种选择。我有一个队友建议使用 linq，但我不确定这是否适用于字符串，我不知道如何使用它。

**更新：**

抱歉，我将其从文件更改为字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:19:40.063

Linq 在这里并不能真正帮助您。使用正则表达式提取数字：

```
data-Rowkey=(\d+) 
```

**更新：**

```
Regex r = new Regex(@"data-Rowkey=(\d+)");

string abc =  //;
Match match = r.Match(abc);
if (match.Success) 
{
  string rowKey = match.Groups[1].Value;
} 
```

**代码：**

```
public string ExtractRowKey(string filePath)
{
  Regex r = new Regex(@"data-Rowkey=(\d+)");

  using (StreamReader reader = new StreamReader(filePath))
  {
    string line; 
    while ((line = reader.ReadLine()) != null)
    {
      Match match = r.Match(line);
      if (match.Success) return match.Groups[1].Value;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:21:24.253

```
Regex g = new Regex(@"data-RowKey=(?<Value>\d+)");

using (StreamReader r = new StreamReader("myFile.txt"))
{
    string line;
    while ((line = r.ReadLine()) != null)
    {
        Match m = g.Match(line);
        if (m.Success)
        {
            string v = m.Groups["Value"].Value;
            // ...
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T14:28:55.497

假设以下

1.  文件必须包含数据行（完全匹配，包括大小写）
2.  数字长度为 3

以下是代码片段

```
 var fileNames = Directory.GetFiles("rootDirPath");

        var tuples = new List<Tuple<String, int>>();
        foreach(String fileName in fileNames)
        {
            String fileData =File.ReadAllText(fileName) ;
            int index = fileData.IndexOf("data-RowKey=");
            if(index >=0)
            {
                String numberStr = fileData.Substring(index+12,3);// ASSUMING data-RowKey is always found, and number length is always 3
                int number = 0;
                int.TryParse(numberStr, out number);
                tuples.Add(Tuple.Create(fileName, number));
            }
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T14:33:25.587

假设它在文件中只存在一次，否则我什至会抛出异常：

```
String rowKey = null;
try
{
    rowKey = File.ReadLines(path)
                .Where(l => l.IndexOf("data-RowKey=") > -1)
                .Select(l => l.Substring(12 + l.IndexOf("data-RowKey=")))
                .Single();
}
catch (InvalidOperationException) {
    // you might want to log this exception instead
    throw;
} 
```

**编辑**：使用字符串的简单方法，第一次出现的长度始终为 3：

```
rowKey = text.Substring(12 + text.IndexOf("data-RowKey="), 3); 
```

# c# - 一直报错，不知道为什么

> ID：10818040
> 
> 赞同：1
> 
> 时间：2012-05-30T14:12:24.683
> 
> 标签：c#, linq

我正在尝试在数据表中搜索非唯一值，但我不断收到此错误

> 过滤器表达式“PROV_NEW”不计算为布尔项。

当我运行它时。

这是我的代码：

```
public class GetData
{
    datalogiclayer.TableSetup dal;
    DataSet ds;

    public delegate void InvalidTableDataDelegate(string ErrorMessage);
    public event InvalidTableDataDelegate InvalidTableData;

    public delegate void SetupDataLoadedDelegate(System.Data.DataSet dv, string TableName);
    public event SetupDataLoadedDelegate SetupDataLoaded;

    public GetData()
    {
        dal = new datalogiclayer.TableSetup();
    }

    public void Update(DataSets.Setup ds)
    {
        try
        {
            string errMsg = string.Empty;

            if (ValidateTable(ds.SETUP_MWPROV, out errMsg))
            {
                dal.UpdateDatabase(ds);
            }
            else
            {
                if (InvalidTableData != null)
                    InvalidTableData(errMsg);
            }
        }
        catch (Exception)
        {
            throw;
        }
    }

    private bool ValidateTable(DataSets.Setup.SETUP_MWPROVDataTable dt, out string TableIssues)
    {
        try
        {
            //NewCode not used for other row
            DataRow[] result = dt.Select("PROV_NEW = ''");
            DataRow[] dupresults = dt.Select("PROV_NEW");
            TableIssues = string.Empty;
            DataTable dtTemp = dt.DefaultView.ToTable(true, "NEW_PROV");

            if (dupresults.Length == 0)
            {
                return true;
            }
            else
            {
                IEnumerable<DataRow> uniqueCodes = dupresults.AsEnumerable().Distinct(DataRowComparer.Default);

                Console.WriteLine("Unique Provider Codes:");

                foreach (DataRow NEW_PROV in uniqueCodes)
                {
                    Console.WriteLine(NEW_PROV.Field<Int32>("PROV_NEW"));
                }

                return false;
            }          
        }
        catch (Exception)
        {
            throw;
        }
    }
} 
```

所以你可以看到我让它在数据表中搜索唯一的行，当抛出异常的时候是我真正去保存数据的时候。它给出了上面的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T14:18:24.083

```
 DataRow[] dupresults = dt.Select("PROV_NEW"); 
```

for 的参数`dt.Select`是一个过滤器。`"PROV_NEW"`不是有效的过滤器，因为表达式不会产生布尔值。我相信您将此与 SQL 混淆了，您可以在其中要求它选择单个列。但是您不需要这样做，因为稍后您需要从 PROV_NEW 列中选择 distinct。如果你想确保整行是不同的，那么这就是你需要做的。

如果您只想比较 PROV_NEW 列，您可以编写一个自定义相等比较器，它只查看您的 PROV_NEW 列。`distinct`当您使用 > **[this version](http://msdn.microsoft.com/en-us/library/bb338049.aspx)** <调用时，您可以引用您的自定义比较器。

或者， [Grant Winney](https://stackoverflow.com/users/301857/grant-winney)建议您可以在使用 distinct 之前使用 Linq 仅选择单个列。[请参阅他们答案](https://stackoverflow.com/a/10818110/491837)中的评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T14:16:59.200

检查代码中的以下行：

```
DataRow[] dupresults = dt.Select("PROV_NEW"); 
```

您的意思是在 PROV_NEW 之后添加另一个值吗？您在上面的行中正确地做到了，所以我假设这只是一个错误。有时第二双眼睛会有所帮助。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T14:18:02.290

看起来这条线是错误的：

```
DataRow[] dupresults = dt.Select("PROV_NEW"); 
```

DataTable 需要过滤表达式作为参数，“PROV_NEW”不是过滤表达式。有关详细信息，请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/det4aw50.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T14:21:18.583

检查表达式“PROV_NEW”的结果。在某处，某些方法正在寻找结果布尔类型，而您的表达式正在产生其他结果。我的 2 美分:)

# html - 在窗口调整大小时制作一组带有背景图像的按钮？

> ID：10818041
> 
> 赞同：0
> 
> 时间：2012-05-30T14:12:34.663
> 
> 标签：html, css, responsive-design

我有 3 个带有背景图像的列表项，它们包含在一个具有最大宽度的 div 中，我想做的是在调整窗口大小时缩放列表项的尺寸，但到目前为止我还没有运气这个。我试过设置百分比高度和宽度也试过使用背景大小。谁能建议我如何实现这一目标？

CSS

```
​#test{max-width:302px;width:100%;}
#test li{background:url('http://www.dummyimage.com/100/000/fff') no-repeat 0 0;max-width:100px;width:100%;height:100%;background-size:100% auto;float:left;margin-left:1px;}
#test li:first-child{margin-left:0;} 
```

HTML

```
​&lt;ul id="test">
    <li></li>
    <li></li>
    <li></li>
</ul>​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:17:35.793

将#test li 的宽度更改为百分比值！ [http://jsfiddle.net/baGuZ/](http://jsfiddle.net/baGuZ/)

# mysql - 难以跨多个表构建连接查询

> ID：10818042
> 
> 赞同：3
> 
> 时间：2012-05-30T14:12:47.440
> 
> 标签：mysql

我目前正在尝试解决我想做的 MySQL 查询。很可能是因为我没有睡觉，所以我只是想不清楚，但我已经有一段时间陷入了困境。

我正在尝试构建一个查询以返回我网站上的用户可以访问的所有附件。每个附件都有一个`owner_id`关联，并且还有一些组`attachments`通过表格链接到`groups_attachments`表格。

所以我的桌子是：

```
+--------------------+
| attachments        |
| groups             |
| groups_attachments |
| users              |
| users_attachments  |
| users_groups       |
+--------------------+ 
```

附件、组和用户都有自己的 id，链接表包含被链接的每个表的 id。

我想从附件中选择所有字段，如果`attachment.owner_id`匹配 a`users.user_id`或如果`users.user_id`在`users_attachments`（当所有者特别授予权限时）或者如果`users.user_id`在`users_groups`与附件相关的组中通过`users_attachments`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:27:11.120

不要试图用一个神奇的查询来做这一切——使用一系列联合在一起的查询：

```
select *
from attachments
where owner_id = $userid
union
select a.*
from users_attachments ua
join attachments a on a.attachment_id = ua.attachment_id
where ua.user_id = $userid
union
select a.*
from users u
join groups_attachments ga on ga.group_id = u.group_id
join attachments a on a.attachment_id = ga.attachment_id
where users.user_id = $userid 
```

替换`$userid`目标用户 id（您必须在三个地方执行此操作）。

这个查询应该执行得很好。我已经对表格选择顺序进行了编码并仔细连接以提供良好的性能。

你还没有说你的列名是什么，所以我做了合理的猜测。

# css - 为什么我不能准确地打印网页？

> ID：10818043
> 
> 赞同：3
> 
> 时间：2012-05-30T14:12:48.137
> 
> 标签：css, html, printing

给定下面的 HTML 代码，为什么当这个文档在不同的浏览器中打印时会得到完全不同的结果呢？我想要的只是能够从一个打印到已知比例的javascript网络应用程序生成一个“页面”！看起来很简单，但到目前为止几乎不可能实现。

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
    <svg width="210mm" height="297mm"
        xmlns="http://www.w3.org/2000/svg" version="1.2">

        <rect x="300" y="300" width="1in" height="1in" fill="red"/>
        <text x="100" y="100" font-size="1in">Hello</text>

    </svg>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:14:09.263

应用样式进行打印时，不同的浏览器可能会有所不同。

如果您希望跨浏览器获得一致的结果，请定义您自己的打印样式。

像这样：

```
<link rel="stylesheet" type="text/css" href="print.css" media="print" /> 
```

*编辑：*有关如何获得良好打印效果的一些链接：

[什么是最有用的 media="print" 特定的，跨浏览器兼容的 css 属性？](https://stackoverflow.com/questions/2226939/what-are-most-useful-media-print-specfic-cross-browser-compatible-css-propert) -> 链接到 A List Apart 通常有非常好的文章

[如何在所有浏览器的页面打印中获得跨浏览器兼容性？](https://stackoverflow.com/questions/3697444/how-to-get-cross-browser-compatibility-in-print-on-page-from-all-browsers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:14:46.517

您可能需要为打印创建不同的样式，具体取决于您的浏览器。（`media="print"`在你的 CSS 声明中）

看看这里：

[http://www.css-help.com/css-mediaprint.htm](http://www.css-help.com/css-mediaprint.htm)

[http://www.w3.org/TR/CSS2/media.html](http://www.w3.org/TR/CSS2/media.html)

# linux - 使用 wc 时文件名打印两次

> ID：10818046
> 
> 赞同：0
> 
> 时间：2012-05-30T14:12:54.597
> 
> 标签：linux, shell, wc

为了打印当前文件夹的所有“.txt”文件中的行数，我使用以下脚本：

```
for f in *.txt;
do l="$(wc -l "$f")";
echo "$f" has "$l" lines;
done 
```

但在输出中我得到：

```
lol.txt has 2 lol.txt lines 
```

为什么要`lol.txt`打印两次（尤其是在 2 次之后）？我想需要某种流刷新，但在这种情况下我不知道如何实现。所以我应该在脚本中进行哪些更改以获取输出：

```
lol.txt has 2 lines 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:14:52.663

文件名被打印两次，因为`wc -l "$f"`也在行数之后打印文件名。尝试将其更改为`cat "$f" | wc -l`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:19:53.867

`wc`打印文件名，因此您可以将脚本编写为：

```
ls *.txt | while read f; do wc -l "$f"; done 
```

或者，如果您真的想要详细的输出，请尝试

```
ls *.txt | while read f; do wc -l "$f" | awk '{print $2, "has", $1, "lines"}'; done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T14:27:09.247

您可以使用 'cut' 删除文件名：

```
for f in *.txt;
do l="$(wc -l "$f" | cut -f1 -d' ')";
echo "$f" has "$l" lines;
done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T22:34:40.067

这里有个窍门。让 wc 读取标准输入，它不会打印文件名：

```
for f in *.txt; do
    l=$(wc -l < "$f")
    echo "$f" has "$l" lines
done 
```

# hibernate - 与属性休眠注释的多对多关系（重复列？）

> ID：10818047
> 
> 赞同：1
> 
> 时间：2012-05-30T14:13:00.200
> 
> 标签：hibernate, jpa, annotations, many-to-many

我试图弄清楚如何使用 JPA 注释和 Hibernate 配置多对多关系，我阅读了许多文章和论坛讨论，但最终出现错误。

我想知道的第一件事是如何： **配置与属性的多对多关系**

我有两个表**Equipements**和**Maintenance_Companies**以及关系**Reparation**

当我为关系添加一个实体并在其他实体中创建一些 @OneToMany 时，我遇到了组合主键的问题，所以我使用了 Collection 方法，但我有这个例外：

`org.hibernate.MappingException: Repeated column in mapping for collection: mmapp.domain.Equipement.reparations column: EQUIPEMENT_FK`

设备：

```
@Entity
@Table( name = "EQUIPEMENTS" )
public class Equipement implements Serializable{

private int id ;
private String marque ;
private int isbn ;
private Date purchaseDate ;
private double price ;
private int warrantyPeriod ;

public Equipement(){
}

public Equipement( String marque ) {
    this.marque = marque ;
}

@Id
@GeneratedValue( strategy = GenerationType.AUTO )
@Column( name = "EQUIPEMENT_ID" )
public int getId(){
    return this.id ;
}

public void setId(int id){
    this.id = id ;
}

@Column( name = "EQUIPEMENT_MARQUE" )
public String getMarque(){
    return this.marque ;
}

public void setMarque(String marque){
    this.marque = marque ;
}

@Column( name = "EQUIPEMENT_PUR_DATE" )
public Date getPurchaseDate(){
    return this.purchaseDate ;
}

public void setPurchaseDate(Date purchaseDate){
    this.purchaseDate = purchaseDate ;
}

@Column( name = "EQUIPEMENT_PRICE" )
public double getPrice(){
    return this.price ;
}

public void setPrice(double price){
    this.price = price ;
}

@ElementCollection
@JoinTable(
    name= "EQUIPEMENT_MAINTENANCE_COMPANY" ,
    joinColumns=@JoinColumn( name= "EQUIPEMENT_FK" ))
public Collection<Reparation> getReparations() {
    return reparations ;
}

public void setReparations(Collection<Reparation> reparations) {
    this.reparations = reparations ;
}

private Collection<Reparation> reparations ;

} 
```

维修公司：

```
@Entity
@Table( name = "MAINTENANCE_COMPANIES" )
public class MaintenanceCompany implements Serializable{

private int id ;
private String name ;
private String adress ;
private String telephone ;

public MaintenanceCompany(){}

public MaintenanceCompany( String name ) {
    this.name = name ;
}

public void setId(int id){
    this.id = id ;
}

@Id
@GeneratedValue( strategy = GenerationType.AUTO )
public int getId(){
    return this.id ;
}

public void setName(String name){
    this.name = name ;
}

public String getName(){
    return this.name ;
}

public void setAdress(String adress){
    this.adress = adress ;
}

public String getAdress(){
    return this.adress ;
}

public void setTelephone(String telephone){
    this.telephone = telephone ;
}

public String getTelephone(){
    return this.telephone ;
}

@ElementCollection
@JoinTable(
    name= "EQUIPEMENT_MAINTENANCE_COMPANY" ,
    joinColumns=@JoinColumn( name= "COMPANY_FK" ))
public Collection<Reparation> getReparations(){
    return reparations ;
}

public void setReparations(Collection<Reparation> reparations){
    this.reparations = reparations ;
}

private Collection<Reparation> reparations ;

} 
```

赔偿

```
@Embeddable
public class Reparation implements Serializable{

private int delay ;
private double price ;
private Date date ;

public Reparation() {} 

public Reparation(int delay, double price, Date date) {
    this.delay = delay ;
    this.price = price ;
    this.date = date ;
}

public int getDelay() {
    return delay ;
}

public void setDelay( int delay ) {
    this.delay = delay ;
}

public double getPrice() {
    return price ;
}

public void setPrice( double price ) {
    this.price = price ;
}

public Date getDate() {
    return date ;
}

public void setDate( Date date ) {
    this.date = date ;
}

@ManyToOne( fetch = FetchType.LAZY )
@JoinColumn( name = "EQUIPEMENT_FK" )
public Equipement getEquipementRepared(){
    return equipementRepared ;
}

public void setEquipementRepared(Equipement equipementRepared) {
    this.equipementRepared = equipementRepared ;
}

private Equipement equipementRepared ;

@ManyToOne( fetch = FetchType.LAZY )
@JoinColumn( name = "COMPANY_FK" )
public MaintenanceCompany getMaintenanceCompany() {
    return maintenanceCompany ;
}

public void setMaintenanceCompany( MaintenanceCompany maintenanceCompany ) {
    this.maintenanceCompany = maintenanceCompany ;
}

private MaintenanceCompany maintenanceCompany ;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:07:49.933

这种映射没有多大意义，并且与您最初所说的想要的相去甚远：与属性的多对多关系。

多对多在两个实体之间使用连接表。如果这个连接表中有两个以上的ID，那么它就不再是一个连接表，而是一个功能实体，它应该被映射为任何其他实体，并且有自己的自动生成的ID。

因此，您应该有 3 个实体，每个实体都有自己生成的 ID：

*   设备
*   赔偿
*   维修公司

一台设备有许多修理。一家MaintenanceCompany 有许多Reparations。一个维修有一个设备和一个维修公司。

```
@Entity
public class Equipment
    @OneToMany(mappedBy = "equipment")
    private Set<Reparation> reparations;

    // ID, fields, methods
}

@Entity
public class MaintenanceCompany
    @OneToMany(mappedBy = "maintenanceCompany")
    private Set<Reparation> reparations;

    // ID, fields, methods
}

@Entity
public class Reparation
    @ManyToOne
    @JoinColumn(name = "equipment_id")
    private Equipment equipment;

    @ManyToOne
    @JoinColumn(name = "maintenance_company_id")
    private MaintenanceCompany maintenanceCompany;

    // ID, fields, methods
} 
```

就如此容易。

# macos - 如何创建 bash 脚本来启动 CoffeeScript？

> ID：10818049
> 
> 赞同：0
> 
> 时间：2012-05-30T14:13:03.147
> 
> 标签：macos, bash, coffeescript

这是我的compile.sh：

```
#!/bin/bash
coffee -o public/app/ -cwb public/src/ 
```

当我通过双击打开脚本时：

```
File not found: public/src/.coffee 
```

它只能从终端工作：./compile.sh

可能有在 Mac OS X 上编译 CoffeScript 的最佳方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T15:03:29.427

如果您试图通过“运行它”来执行咖啡脚本“脚本”，类似于 unix 环境中的其他脚本，您可以在脚本中尝试以下内容，并确保将其设置为可执行（`chmod a+x scriptname.coffee`）：

```
#!/usr/bin/env coffee
path = require 'path'
fs = require 'fs'
... 
```

至少这就是我在最后启动可执行的咖啡脚本“脚本”的方式（一个 Linux 系统，但仍然......）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:11:32.940

乔罗巴是正确的。

但是，除了使用完整目录路径之外，您还可以通过编程方式获取当前目录，因此您不必对任何路径进行硬编码。

```
#!/bin/bash
DIR="$( cd "$( dirname "$0" )" && pwd )"
coffee -o $DIR/public/app/ -cwb $DIR/public/src/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:20:50.913

单击后，脚本可能会在不同的文件夹中启动。在脚本中使用完整路径以使其通用。

# asp.net - 如何使我的网页部分在 ASP.Net 中可编辑？

> ID：10818050
> 
> 赞同：0
> 
> 时间：2012-05-30T14:13:05.807
> 
> 标签：asp.net, content-management-system, dotnetnuke

**我需要制作包含页眉**、**页脚**、**菜单**、**内容**和**按钮**的动态网页的一部分。一旦我从管理员端打开/关闭编辑，我要求它们都是可编辑/不可编辑的。

我已经知道**DotNetNuke**已经为开发人员做到了这一点。我想知道如果我们在不使用 DNN 的情况下这样做有什么优点和缺点。我喜欢讨论这个。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:23:03.227

实际上，这种动态编辑是在客户端使用 javascript 完成的。

我可以建议一个不错的 jQuery 代码，只需单击一下即可使页面成为可编辑的一部分。剩下的就是使用一些 ajax 调用来处理这个编辑的保存。非常好和简单

看这里的工作演示：

[http://www.appelsiini.net/projects/jeditable/custom.html](http://www.appelsiini.net/projects/jeditable/custom.html)

并从以下位置获取代码：

[http://www.appelsiini.net/projects/jeditable](http://www.appelsiini.net/projects/jeditable)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:41:32.190

看看[ASP.NET Web 部件](http://msdn.microsoft.com/en-us/library/hhy9ewf1.aspx)。MSDN 报价：

*在 Web 应用程序场景中，您可以为最终用户提供完整的解决方案来管理和个性化应用程序。这可能包括一组为网站提供所需功能的 Web 部件控件、一组一致的主题和样式（允许最终用户以一致的方式个性化 UI）、用户可以从中选择的 Web 部件控件的目录他们希望出现在页面上、身份验证服务和基于角色的管理（例如，允许管理用户为所有用户个性化 Web 部件控件和站点设置）。*

# ruby-on-rails - 将字符串转换为 ActiveRecord 查询

> ID：10818055
> 
> 赞同：4
> 
> 时间：2012-05-30T14:13:29.920
> 
> 标签：ruby-on-rails, ruby, activerecord

我有字符串`"User.first"`，有什么方法可以将该字符串转换为 ActiveRecord 查询：

```
User.first 
```

这个字符串可以是任何东西，我想让它可执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:29:23.827

你可以试试

```
Kernel.const_get("User").send('first') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:51:21.863

从[kernel#eval](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-eval)文档：

> eval(string [, binding [, filename [,lineno]]]) → obj click to toggle source
> 
> 评估字符串中的 Ruby 表达式。如果给出了绑定，它必须是一个 Binding 对象，则在其上下文中执行评估。如果存在可选的 filename 和 lineno 参数，它们将在报告语法错误时使用。

但是，正如@andrew-marshall 正确指出的那样，如果您使用任何类型的未经验证的输入，这将是一个巨大的安全漏洞。有关受污染数据和 $SAFE 级别的更多信息，请参阅[将 Ruby 锁定在保险箱](http://www.ruby-doc.org/docs/ProgrammingRuby/html/taint.html)中作为起点。

# c# - 文本框或单选按钮值不支持版本 4.1.605010 中的 Ajax 文件上传

> ID：10818057
> 
> 赞同：0
> 
> 时间：2012-05-30T14:13:46.733
> 
> 标签：c#, asp.net, ajaxcontroltoolkit, componentone

```
protected void AjaxFileUpload_img_UploadComplete(object sender, AjaxFileUploadEventArgs e)
    {

        try
        {
            if (radbtn_select.SelectedItem.Text == "Sample")
            {

                var s = e.FileName;
                int length = e.FileSize;
                byte[] imgbyte = new byte[e.FileSize];
                if (sample_code == "")
                {
                    ErrorMsg.Visible = true;
                    ErrorMsg.Text = "Sample not found.Please enter the sample code..";
                }

                cmd = new SqlCommand("sp_pdm_shopping_upload", con);
                cmd.CommandType = CommandType.StoredProcedure;
                con.Open();
                cmd.Parameters.Add(new SqlParameter("@sample", SqlDbType.Char, 15));
                SqlParameter contentparameter = null;
                contentparameter = (new SqlParameter("@image", SqlDbType.Image));
                contentparameter.Direction = ParameterDirection.Input;
                cmd.Parameters.Add(contentparameter);
                cmd.Parameters.Add(new SqlParameter("@type", SqlDbType.Char, 10));
                cmd.Parameters["@sample"].Value = txt_code.Text;
                cmd.Parameters["@image"].Value = imgbyte;
                cmd.Parameters["@type"].Value = "IMG";
                cmd.ExecuteNonQuery();
                con.Close();
                ErrorMsg.Visible = true;
                ErrorMsg.Text = "The image has been uploaded successfully.";
            }

        }
        catch
        {
            return;
        }
    } 
```

在上传时不获取文本框值和单选按钮值。

我该如何解决这个问题？

# php - 禁用水平滚动

> ID：10818058
> 
> 赞同：2
> 
> 时间：2012-05-30T14:13:50.167
> 
> 标签：php, javascript, jquery, html, css

我正在寻找一种方法/技巧来禁用（不仅仅是隐藏）水平滚动条。我到处搜索，我发现的只是“溢出-x：隐藏”。问题是我必须将一个元素从一个 div 拖到另一个

我在一个基于 jquery ui 的页面上工作，用户可以将一个 div 从一个容器拖到另一个容器。第一面由数据库中的 div 动态填充。我需要垂直滚动，因为它是一个动态填充的列表，但是启用水平滚动可以防止 div 被拖到可放置区域。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:15:31.873

你还没有说，所以我假设你正在使用 jQuery 进行拖动。在[Draggable 上的 jQuery 文档中](http://docs.jquery.com/UI/Draggable)，有一个名为“滚动”的选项。如果将其设置为 false，可拖动对象将不会滚动窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:04:12.163

这是一个相当普遍的问题。看看[这个页面](http://ccnmtl.columbia.edu/compiled/projects/clone_wars_jquery_ui_draggable.html)。`ondragstart`它通过将可拖动元素附加到不同的元素并将其重新附加到其原始容器来描述解决此问题的方法`ondragend`。

# ios - 使用 Mono Touch 在循环中使用 CGImage.ScreenImage 时的内存问题

> ID：10818061
> 
> 赞同：2
> 
> 时间：2012-05-30T14:13:53.247
> 
> 标签：ios, memory, xamarin.ios, zxing

我正在尝试使用 Monotouch 和 Zxing 的 C# 端口创建一个应用程序来读取 QR 码，但我遇到了内存问题。当应用程序处理捕获的屏幕帧时，应用程序会收到内存警告，然后关闭。我已经删除了对 Zxing 的调用，以追踪内存问题的根源，并且可以通过循环捕获屏幕图像来重现问题。

这是代码：

```
using System;
using System.Drawing;
using System.Collections.Generic;
using System.Threading;
using MonoTouch.UIKit;
using MonoTouch.Foundation;
using MonoTouch.CoreGraphics;
using com.google.zxing;
using com.google.zxing.common;
using System.Collections;
using MonoTouch.AudioToolbox;
using iOS_Client.Utilities;

namespace iOS_Client.Controllers
{

    public class CameraOverLayView : UIView
    {

        private Thread _thread;
        private CameraViewController _parentViewController; 
        private Hashtable hints;
        private static com.google.zxing.MultiFormatReader _multiFormatReader = null;
        private static RectangleF picFrame = new RectangleF(0, 146, 320, 157);
        private static UIImage _theScreenImage = null;

        public CameraOverLayView(CameraViewController parentController) : base()
        {
            Initialize();
            _parentViewController = parentController;
        }

        private void Initialize()
        {              

        }

        private bool Worker()
        {

            Result resultb = null;

            if(DeviceHardware.Version == DeviceHardware.HardwareVersion.iPhone4
               || DeviceHardware.Version == DeviceHardware.HardwareVersion.iPhone4S)
            {
                picFrame = new RectangleF(0, 146*2, 320*2, 157*2);

            }

                if(hints==null)
                {
                    var list = new ArrayList();

                    list.Add (com.google.zxing.BarcodeFormat.QR_CODE);

                    hints = new Hashtable();
                    hints.Add(com.google.zxing.DecodeHintType.POSSIBLE_FORMATS, list);
                    hints.Add (com.google.zxing.DecodeHintType.TRY_HARDER, true);
                }

                if(_multiFormatReader == null)
                {
                    _multiFormatReader = new com.google.zxing.MultiFormatReader();
                }

                using (var screenImage = CGImage.ScreenImage.WithImageInRect(picFrame))
                {
                    using (_theScreenImage = UIImage.FromImage(screenImage))
                    {
                        Bitmap srcbitmap = new System.Drawing.Bitmap(_theScreenImage);
                        LuminanceSource source = null;
                        BinaryBitmap bitmap = null;
                        try {
                            source = new RGBLuminanceSource(srcbitmap, screenImage.Width, screenImage.Height);
                            bitmap = new BinaryBitmap(new HybridBinarizer(source));

                            try {
                                    _multiFormatReader.Hints = hints;
                                    resultb = null;

                                    //_multiFormatReader.decodeWithState(bitmap);

                                    if(resultb != null && resultb.Text!=null)
                                    {

                                        InvokeOnMainThread( () => _parentViewController.BarCodeScanned(resultb));

                                    }
                                }
                            catch (ReaderException re)
                            {
                                //continue;
                            }

                        } catch (Exception ex) {
                            Console.WriteLine(ex.Message);
                        }

                        finally {
                            if(bitmap!=null)
                                bitmap = null;

                             if(source!=null)
                                source = null;

                            if(srcbitmap!=null)
                            {
                                srcbitmap.Dispose();
                                    srcbitmap = null;
                            }

                        }   

                    }
                }

            return resultb != null;
        }

        public void StartWorker()
        {
            if(_thread==null)
            {
                _thread = new Thread(()=> { 

                        bool result = false;
                        while (result == false)
                        {
                            result = Worker();
                            Thread.Sleep (67);
                        }               

                }); 

            }

            _thread.Start();            

        }

        public void StopWorker()
        {

            if(_thread!=null)
            {

                _thread.Abort();
                _thread = null;

            }

            //Just in case
            _multiFormatReader = null;
            hints = null;
        }

        protected override void Dispose(bool disposing)
        {
            StopWorker();   
            base.Dispose(disposing);
        }

    }
} 
```

有趣的是，我查看了[http://blog.reinforce-lab.com/2010/02/monotouchvideocapturinghowto.html](http://blog.reinforce-lab.com/2010/02/monotouchvideocapturinghowto.html)以尝试了解其他人如何捕获和处理视频，并且此代码与我的代码相同，大约 40 岁后退出带有内存警告的秒数。

希望 QR 码将在 40 秒内被扫描，但我不确定内存是否会被释放，因此在扫描许多代码后可能会出现问题。无论哪种方式，都应该可以连续捕获视频馈送而不会出现内存问题，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T21:39:50.797

这有点违反直觉，但 ScreenImage 属性会在您每次调用它时创建一个新的 CGImage 实例，因此您也必须在该对象上调用 Dispose：

```
using (var img = CGImage.ScreenImage) {
    using (var screenImage = img.WithImageInRect(picFrame))
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T09:27:38.257

我将添加对我有用的实际解决方案，它结合了以前答案中的信息。循环内的代码如下所示：

```
using (var pool = new NSAutoreleasePool ())
{
    using (var img = CGImage.ScreenImage)
    {       
        using (var screenImage = img.WithImageInRect(picFrame))
        {
            using (_theScreenImage = UIImage.FromImage(screenImage))
            {
            }
        }
    }
}

GC.Collect(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T15:05:51.320

`System.Drawing.Bitmap`zxing.MonoTouch的原始版本缺少`Dispose`它，因此它永远不会释放它分配的非托管内存。

较新的（来自您的链接）在`Dispose`调用时确实释放了非托管内存（更好）。然而，它创建了一个位图上下文（在它的构造函数中）并且不会手动处理它（例如使用 a `using`）。所以它依赖垃圾收集器（GC）稍后来做......

在许多情况下，这不是一个大问题，因为 GC 最终会释放这个上下文实例并回收相关的内存。但是**，如果您在循环中执行此**操作，则可能会在 GC 启动之前耗尽（非托管）内存。这会给您带来*内存警告*，iOS 可以决定终止您的应用程序（或者它可能会自行崩溃） .

> 但我不确定内存是否会被释放

是的，它应该是——但可能不如你需要的内存那么快。正确实施（和使用）`IDisposable`将解决这个问题。

> 无论哪种方式，都应该可以连续捕获视频馈送而不会出现内存问题，对吗？

是的。确保您尽快释放内存，例如使用`using (var ...) { }`，并确保您使用的第 3 方代码也这样做。

# sql-server - SQL - 根据列（相交）查找公共行

> ID：10818067
> 
> 赞同：3
> 
> 时间：2012-05-30T14:14:17.670
> 
> 标签：sql-server, sql-server-2008, tsql

给定下表：

**已安装的应用程序**

```
MachineName | AppName | Version
-------------------------------
machine01   | App01   | 1.1
machine01   | App02   | 1.0
machine01   | App03   | 1.5
machine02   | App04   | 2.0
machine02   | App02   | 1.0
machine02   | App01   | 1.1
machine03   | App06   | 7.9.9
machine03   | App01   | 1.1
machine03   | App07   | 11.5
machine03   | App02   | 1.0 
```

我需要选择`Apps`给定的“n”台机器所共有的。它是“n”个集合之间的交集。但是，我很难提出一个体面的查询。

我知道我可以做这样的事情：

```
SELECT AppName, Version 
FROM InstalledApps 
WHERE MachineName = 'machine01'

INTERSECT

SELECT AppName, Version 
FROM InstalledApps 
WHERE MachineName = 'machine02' 
```

那会给我

```
AppName | Version
------------------
App01   | 1.1
App02   | 1.0 
```

但是，有没有一种方法可以做到，而无需预先知道机器的数量？就像是

```
SELECT...... 
FROM InstalledApps 
WHERE MachineName IN ('machine01',...'machine99') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T14:20:13.743

我认为这应该适用于一般情况：

```
SELECT AppName, Version, COUNT(DISTINCT(MachineName)) AS MachineCount
FROM InstalledApps
GROUP BY
  AppName, Version
HAVING
  COUNT(DISTINCT(MachineName)) > 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T16:41:53.967

您可以使用`Row_Number`函数和`Partition`带有机器名称的数据

```
Select AppName, [Version] From 
(
    Select Row_Number() Over(Partition By MachineName Order by AppName) RowId, * 
    From InstalledApps
)K
Where K.RowId = 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T19:45:17.463

您可以通过 group by 执行此操作。假设 InstalledApps 表中的给定应用没有重复的机器：

```
select apps
from InstalledApps
group by apps
having sum(case when machine in (<list of machines>) then 1 else 0 end) = <number of machines> 
```

如果您的机器上有重复的应用程序：

```
select apps
from (select distinct apps, machine from InstalledApps) ia
group by apps
having sum(case when machine in (<list of machines>) then 1 else 0 end) = <number of machines> 
```

而且，我在想​​，如果您不想计算机器数量，那么您可能需要使用动态 SQL 或将机器名称存储在临时表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T14:21:32.837

您可以参数化 IN 查询

```
Declare @value varchar(max)
Declare @sql varchar(max)
select @value = 'machine1,machine2,machine3'
SELECT @sql = 'SELECT * FROM InstalledApps  WHERE MachineName in (' + @value+ ')'

 exec sp_executeSQL @sql 
```

或者您甚至可以使用子查询来获取所有值

```
SELECT * FROM InstalledApps WHERE MachineName in (SELECT MachineName FROM InstalledApps    group by MachineName HAVING COUNT(DISTINCT(MachineName)) > 1) 
```

# mysql - 相同的查询，相同的系统，不同的执行时间

> ID：10818068
> 
> 赞同：4
> 
> 时间：2012-05-30T14:14:25.113
> 
> 标签：mysql, sql, doctrine

下面的所有查询都会在我们的开发服务器上立即执行，因为它们最多可能需要 2 分 20 秒。

查询执行时间似乎受到 LIKE 字符串的模糊不清的影响。如果他们与一个匹配很少的国家/地区紧密匹配，则需要更少的时间，如果您对德国使用“ge”之类的东西，则执行时间会更长。但这并不总是这样，有时它非常不稳定。

发送数据似乎是罪魁祸首，但这是为什么以及这意味着什么。生产中的内存看起来也很低（可用内存）？

**生产：**
Intel Quad Xeon E3-1220 3.1GHz
4GB DDR3
2x 1TB SATA in RAID1
网络速度 100Mb
Ubuntu

**开发**
Intel Core i3-2100, 2C/4T, 3.10GHz
500 GB SATA - 无 RAID
4GB DDR3

此查询不是有问题的查询，但相关，因此请发布它。

```
SELECT 
    f.form_question_has_answer_id 
FROM 
    form_question_has_answer f 
INNER JOIN 
    project_company_has_user p ON f.form_question_has_answer_user_id = p.project_company_has_user_user_id 
INNER JOIN 
    company c ON p.project_company_has_user_company_id = c.company_id 
INNER JOIN 
    project p2 ON p.project_company_has_user_project_id = p2.project_id 
INNER JOIN 
    user u ON p.project_company_has_user_user_id = u.user_id 
INNER JOIN 
    form f2 ON p.project_company_has_user_project_id = f2.form_project_id 
WHERE 
    (f2.form_template_name = 'custom' AND p.project_company_has_user_garbage_collection = 0 AND p.project_company_has_user_project_id = '29') AND (LCASE(c.company_country) LIKE '%ge%' OR LCASE(c.company_country) LIKE '%abcde%') AND f.form_question_has_answer_form_id = '174' 
```

上述查询的解释计划是，在开发和生产上运行产生相同的计划。

```
+----+-------------+-------+--------+----------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------+---------+----------------------------------------------------+------+-------------+
| id | select_type | table | type   | possible_keys                                                                                                                                | key                              | key_len | ref                                                | rows | Extra       |
+----+-------------+-------+--------+----------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------+---------+----------------------------------------------------+------+-------------+
|  1 | SIMPLE      | p2    | const  | PRIMARY                                                                                                                                      | PRIMARY                          | 4       | const                                              |    1 | Using index |
|  1 | SIMPLE      | f     | ref    | form_question_has_answer_form_id,form_question_has_answer_user_id                                                                            | form_question_has_answer_form_id | 4       | const                                              |  796 | Using where |
|  1 | SIMPLE      | u     | eq_ref | PRIMARY                                                                                                                                      | PRIMARY                          | 4       | new_klarents.f.form_question_has_answer_user_id    |    1 | Using index |
|  1 | SIMPLE      | p     | ref    | project_company_has_user_unique_key,project_company_has_user_user_id,project_company_has_user_company_id,project_company_has_user_project_id | project_company_has_user_user_id | 4       | new_klarents.f.form_question_has_answer_user_id    |    1 | Using where |
|  1 | SIMPLE      | f2    | ref    | form_project_id                                                                                                                              | form_project_id                  | 4       | const                                              |   15 | Using where |
|  1 | SIMPLE      | c     | eq_ref | PRIMARY                                                                                                                                      | PRIMARY                          | 4       | new_klarents.p.project_company_has_user_company_id |    1 | Using where |
+----+-------------+-------+--------+----------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------+---------+----------------------------------------------------+------+-------------+ 
```

此查询需要 2 分钟 ~20 秒来执行。

实际在服务器上运行的查询是这个：

```
SELECT 
    COUNT(*) AS num_results 
FROM (SELECT 
        f.form_question_has_answer_id 
    FROM 
        form_question_has_answer f 
    INNER JOIN 
        project_company_has_user p ON f.form_question_has_answer_user_id = p.project_company_has_user_user_id 
    INNER JOIN 
        company c ON p.project_company_has_user_company_id = c.company_id 
    INNER JOIN 
        project p2 ON p.project_company_has_user_project_id = p2.project_id 
    INNER JOIN 
        user u ON p.project_company_has_user_user_id = u.user_id 
    INNER JOIN 
        form f2 ON p.project_company_has_user_project_id = f2.form_project_id 
    WHERE 
        (f2.form_template_name = 'custom' AND p.project_company_has_user_garbage_collection = 0 AND p.project_company_has_user_project_id = '29') AND (LCASE(c.company_country) LIKE '%ge%' OR LCASE(c.company_country) LIKE '%abcde%') AND f.form_question_has_answer_form_id = '174' 
    GROUP BY 
        f.form_question_has_answer_id;) dctrn_count_query; 
```

使用解释计划（在开发和生产上也一样）：

```
+----+-------------+-------+--------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------+---------+----------------------------------------------------+------+------------------------------+
    | id | select_type | table | type   | possible_keys                                                                                                                                                                            | key                              | key_len | ref                                                | rows | Extra                        |
    +----+-------------+-------+--------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------+---------+----------------------------------------------------+------+------------------------------+
    |  1 | PRIMARY     | NULL  | NULL   | NULL                                                                                                                                                                                     | NULL                             | NULL    | NULL                                               | NULL | Select tables optimized away |
    |  2 | DERIVED     | p2    | const  | PRIMARY                                                                                                                                                                                  | PRIMARY                          | 4       |                                                    |    1 | Using index                  |
    |  2 | DERIVED     | f     | ref    | form_question_has_answer_form_id,form_question_has_answer_user_id                                                                                                                        | form_question_has_answer_form_id | 4       |                                                    |  797 | Using where                  |
    |  2 | DERIVED     | p     | ref    | project_company_has_user_unique_key,project_company_has_user_user_id,project_company_has_user_company_id,project_company_has_user_project_id,project_company_has_user_garbage_collection | project_company_has_user_user_id | 4       | new_klarents.f.form_question_has_answer_user_id    |    1 | Using where                  |
    |  2 | DERIVED     | f2    | ref    | form_project_id                                                                                                                                                                          | form_project_id                  | 4       |                                                    |   15 | Using where                  |
    |  2 | DERIVED     | c     | eq_ref | PRIMARY                                                                                                                                                                                  | PRIMARY                          | 4       | new_klarents.p.project_company_has_user_company_id |    1 | Using where                  |
    |  2 | DERIVED     | u     | eq_ref | PRIMARY                                                                                                                                                                                  | PRIMARY                          | 4       | new_klarents.p.project_company_has_user_user_id    |    1 | Using where; Using index     |
    +----+-------------+-------+--------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------+---------+----------------------------------------------------+------+------------------------------+ 
```

在生产服务器上，我拥有的信息如下。

执行时：

```
+-------------+
| num_results |
+-------------+
|           3 |
+-------------+
1 row in set (2 min 14.28 sec) 
```

显示简介：

```
+--------------------------------+------------+
| Status                         | Duration   |
+--------------------------------+------------+
| starting                       |   0.000016 |
| checking query cache for query |   0.000057 |
| Opening tables                 |   0.004388 |
| System lock                    |   0.000003 |
| Table lock                     |   0.000036 |
| init                           |   0.000030 |
| optimizing                     |   0.000016 |
| statistics                     |   0.000111 |
| preparing                      |   0.000022 |
| executing                      |   0.000004 |
| Sorting result                 |   0.000002 |
| Sending data                   | 136.213836 |
| end                            |   0.000007 |
| query end                      |   0.000002 |
| freeing items                  |   0.004273 |
| storing result in query cache  |   0.000010 |
| logging slow query             |   0.000001 |
| logging slow query             |   0.000002 |
| cleaning up                    |   0.000002 |
+--------------------------------+------------+ 
```

在开发中，结果如下。

```
+-------------+
| num_results |
+-------------+
|           3 |
+-------------+
1 row in set (0.08 sec) 
```

此查询的配置文件再次：

```
+--------------------------------+----------+
| Status                         | Duration |
+--------------------------------+----------+
| starting                       | 0.000022 |
| checking query cache for query | 0.000148 |
| Opening tables                 | 0.000025 |
| System lock                    | 0.000008 |
| Table lock                     | 0.000101 |
| optimizing                     | 0.000035 |
| statistics                     | 0.001019 |
| preparing                      | 0.000047 |
| executing                      | 0.000008 |
| Sorting result                 | 0.000005 |
| Sending data                   | 0.086565 |
| init                           | 0.000015 |
| optimizing                     | 0.000006 |
| executing                      | 0.000020 |
| end                            | 0.000004 |
| query end                      | 0.000004 |
| freeing items                  | 0.000028 |
| storing result in query cache  | 0.000005 |
| removing tmp table             | 0.000008 |
| closing tables                 | 0.000008 |
| logging slow query             | 0.000002 |
| cleaning up                    | 0.000005 |
+--------------------------------+----------+ 
```

如果我删除用户和/或项目内部连接，则查询将减少到 30 秒。

我掌握的最后一点信息：

Mysqlserver 和 Apache 在同一个盒子里，只有一个盒子用于生产。

顶部的生产输出：之前和之后。

```
top - 15:43:25 up 78 days, 12:11,  4 users,  load average: 1.42, 0.99, 0.78
Tasks: 162 total,   2 running, 160 sleeping,   0 stopped,   0 zombie
Cpu(s):  0.1%us, 50.4%sy,  0.0%ni, 49.5%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:   4037868k total,  3772580k used,   265288k free,   243704k buffers
Swap:  3905528k total,   265384k used,  3640144k free,  1207944k cached

top - 15:44:31 up 78 days, 12:13,  4 users,  load average: 1.94, 1.23, 0.87
Tasks: 160 total,   2 running, 157 sleeping,   0 stopped,   1 zombie
Cpu(s):  0.2%us, 50.6%sy,  0.0%ni, 49.3%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:   4037868k total,  3834300k used,   203568k free,   243736k buffers
Swap:  3905528k total,   265384k used,  3640144k free,  1207804k cached 
```

但这并不能很好地代表生产的正常状态，所以这里是从今天开始执行查询之外的一个抓取。

```
top - 11:04:58 up 79 days,  7:33,  4 users,  load average: 0.39, 0.58, 0.76
Tasks: 156 total,   1 running, 155 sleeping,   0 stopped,   0 zombie
Cpu(s):  3.3%us,  2.8%sy,  0.0%ni, 93.9%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:   4037868k total,  3676136k used,   361732k free,   271480k buffers
Swap:  3905528k total,   268736k used,  3636792k free,  1063432k cached 
```

发展：这个在期间或之后不会改变。

```
top - 15:47:07 up 110 days, 22:11,  7 users,  load average: 0.17, 0.07, 0.06
Tasks: 210 total,   2 running, 208 sleeping,   0 stopped,   0 zombie
Cpu(s):  0.1%us,  0.2%sy,  0.0%ni, 99.7%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:   4111972k total,  1821100k used,  2290872k free,   238860k buffers
Swap:  4183036k total,    66472k used,  4116564k free,   921072k cached 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:59:26.560

如果缓慢是间歇性的，则可能是服务器负载或其他资源争用（在您的情况下，很可能是内存）。您的系统需要有足够的 RAM 来一次将所有索引存储在内存中，否则，如果所需的索引尚未加载到 RAM 中，它将不得不换出内存。

您的 TOP 结果表明可用的 RAM 量很少。

使用[innodb_buffer_pool_size](http://dev.mysql.com/doc/refman/5.5/en/innodb-buffer-pool.html)设置为 InnoDB 配置缓冲池的大小，为 MyISAM 配置[key_buffer_size](http://dev.mysql.com/doc/refman/5.5/en/myisam-key-cache.html)。确保您将其设置得足够高以同时在 RAM 中保存所有索引，并且您的系统有足够的 RAM 来完成此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:16:01.400

发送数据 | 136.213836

显然：D

这一定是某种基础设施问题...网络或其他东西，尝试从您的 sql/plus 终端 ping 您的服务器，您将得到答案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:19:26.090

每当您的查询速度较慢时，解释计划通常是最好的起点。要得到一个，运行

```
DESCRIBE SELECT 
    COUNT(*) AS num_results 
FROM (SELECT 
        f.form_question_has_answer_id 
    FROM 
        form_question_has_answer f 
    INNER JOIN 
        project_company_has_user p ON f.form_question_has_answer_user_id = p.project_company_has_user_user_id 
    INNER JOIN 
        company c ON p.project_company_has_user_company_id = c.company_id 
    INNER JOIN 
        project p2 ON p.project_company_has_user_project_id = p2.project_id 
    INNER JOIN 
        user u ON p.project_company_has_user_user_id = u.user_id 
    INNER JOIN 
        form f2 ON p.project_company_has_user_project_id = f2.form_project_id 
    WHERE 
        (f2.form_template_name = 'custom' AND p.project_company_has_user_garbage_collection = 0 AND p.project_company_has_user_project_id = '29') AND (LCASE(c.company_country) LIKE '%finland%' OR LCASE(c.company_country) LIKE '%finnland%') AND f.form_question_has_answer_form_id = '174' 
    GROUP BY 
        f.form_question_has_answer_id;) dctrn_count_query; 
```

这将向您显示一个表格，其中列出了执行查询所需的步骤。如果您在 'rows' 列中看到一个大值而在 'key' 列中看到 NULL，则表明您的查询必须扫描大量行以确定要返回哪些行。

在这种情况下，在destination_id 上添加索引应该会显着加快您的查询速度，但会以插入和删除速度为代价（因为索引也需要更新）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T14:30:01.273

如果此[链接](http://forums.mysql.com/read.php?24,241461,242012#msg-242012)正确，则“发送数据”后面的数字不是发送数据所需的时间，而是“排序结果”所需的时间。

这反过来可能暗示生产服务器上的内存或 CPU 问题。您可能想查看机器上的相关统计信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T14:40:46.480

在开发和生产中运行查询并比较查询计划。如果它们不同，请尝试更新查询中涉及的表的统计信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T14:41:35.537

我唯一想到的是两个 MySQL 服务器之间的配置差异。两台服务器之间的内存设置是否有显着差异？是虚拟服务器吗？

另外，生产服务器上的负载是否很高？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-30T14:42:07.817

我对mysql中的优化器并不熟悉。

在查询结束时会出现此问题。一种可能性是生产系统上出现的外观。例如，元数据上可能存在某种锁定，阻止创建新表。

此外，查询运行的环境*确实*会影响优化器。至少，多个线程/处理器会对查询计划产生影响。Mysql 可以根据可用资源生成不同的查询优化。我知道 SQL Server 会根据可用内存生成不同的查询计划——当内存足够时使用哈希表，而当可用内存较少时使用嵌套循环连接。两个系统上的内存分配是否完全相同？

# apache - Apache Commons JCS 1.4-SNAPSHOT Maven 存储库

> ID：10818075
> 
> 赞同：0
> 
> 时间：2012-05-30T14:14:49.300
> 
> 标签：apache, maven, jcs

是否有 JCS 1.4-SNAPSHOT 的 Maven 存储库。我已经搜索了 Apache 存储库，但似乎找不到它。JCS 是否仍在积极开发中？邮件列表似乎已关闭。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:49:11.647

我已经检查了[Maven Central](http://search.maven.org/#search%7Cga%7C1%7Corg.apache.jcs)，你会发现一个 1.3 版本，但我重新检查了[项目的 SNAPSHOT 存储库，但](https://repository.apache.org/content/repositories/snapshots)找不到最新版本。当前站点是 2012 年 2 月 19 日的 .. 所以不是那么旧。但是，如果您在邮件列表上没有得到答复，嗯...

# google-chrome-extension - 首次点击时 Chrome 扩展弹出窗口太高

> ID：10818078
> 
> 赞同：3
> 
> 时间：2012-05-30T14:14:56.250
> 
> 标签：google-chrome-extension

正如我几天前发现的那样，当您单击扩展按钮并显示弹出窗口时，如果您需要高度小于 350 像素，它的高度远高于所需的高度。当弹出窗口中发生某些事情（例如动画）时，高度会根据内容进行适当调整。将高度设置为 html、body 和一般包装元素没有帮助。这可能是 Chrome 最新更新中的一些错误，由于自动更新，我无法在早期版本中对其进行测试。

我会感谢任何想法和建议。

伦敦银行同业拆借利率

**更新：**我开始检查可能导致这种行为的原因，并发现这是由于 Twitter 和 Google Plus 共享按钮而发生的。他们都修改了 DOM 结构，添加了添加 iframe 的脚本标签。评论时，弹出气泡以正确的大小出现。奇怪的是 facebook 之类的按钮脚本或多或少是相同的，但它根本不会弄乱布局。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T16:25:27.160

就像[这里](https://stackoverflow.com/questions/10360525/how-do-i-remove-the-space-at-the-bottom-of-the-pagechrome-extension/10360784#10360784)所说的，解决这个问题的好方法正在改变`<html> to <!doctype html>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T18:21:33.760

我的扩展程序和 Windows 7 上的 Chrome 19 也是如此。我必须注意，以前版本的 Chrome 没有问题。正如您所说，问题仅在弹出窗口的第一次出现时出现 - 之后它会正确缩小）。

我在我的扩展中使用 jQuery，我想我已经通过添加部分解决了它

```
 $("body").fadeOut(10).fadeIn(50); 
```

虽然它并不总是有效（如果你增加淡入淡出延迟，它可能会但是！）。希望有人可以为此提供更好的解决方案。

**编辑。**这*应该*保证始终有效（使用您的提示），尽管用户可能会在几分之一秒内看到调整大小：

```
 $(window).load(function() { 
        $("body").fadeOut(10, function() { $(this).show(); }); 
    }); 
```

# java - 如何将 Java 对象序列化为转义的 JSON 字符串？

> ID：10818081
> 
> 赞同：1
> 
> 时间：2012-05-30T14:15:00.543
> 
> 标签：java, json

有没有办法将 Java 对象转换为如下所示的字符串？请注意，所有文件名都应转义，并`"\n"`用于分隔记录。

```
{

"content":"{\"field1\":123, \"field2\":1, \"field3\":0, \"field4\":{\"sub1\":\"abc\", \"sub2\":\"xyz\"}}\n
{\"field1\":234, \"field2\":9, \"field3\":1, \"field4\":{\"sub1\":\"xyz\", \"sub2\":\"abc\"}}"

} 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:17:36.140

您可以使用[GSON](http://code.google.com/p/google-gson/)来完成该任务。

> Gson 是一个 Java 库，可用于将 Java 对象转换为其 JSON 表示形式。它还可用于将 JSON 字符串转换为等效的 Java 对象。Gson 可以处理任意 Java 对象，包括您没有源代码的预先存在的对象。

如果您需要更好的可读性表示，您可以使用漂亮打印功能。

```
Gson gson = new GsonBuilder().setPrettyPrinting().create(); 
```

要实现类似于您的示例的内容，您可以在第一步中序列化您的内容类，将生成的字符串作为属性放在另一个类中，然后再次序列化。

这样，GSON 负责`"`.

如果您将字符串收集在一个数组中并使用上面显示的漂亮打印选项，您会得到类似于您的换行要求的东西，但并不完全相同。

上述过程的结果可能如下所示：

```
{
  "content": [ 
    "{\"field1\":123, \"field2\":1, \"field3\":0, \"field4\":{\"sub1\":\"abc\", \"sub2\":\"xyz\"}}",
    "{\"field1\":234, \"field2\":9, \"field3\":1, \"field4\":{\"sub1\":\"xyz\", \"sub2\":\"abc\"}}"
  ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:52:21.990

另一种选择是使用 Json-lib 库[http://json-lib.sourceforge.net](http://json-lib.sourceforge.net/)

```
String jsonStrData = " ....... ";
JSONObject jsonObj = JSONObject.fromObject(jsonStrData);
System.out.println(jsonObj); 
```

像 GSON 一样，json-lib 为您处理转义，有关如何在此处使用它的更多信息[http://json-lib.sourceforge.net/usage.html](http://json-lib.sourceforge.net/usage.html)

# java - QueryDSL/APT 和静态导入生成的类

> ID：10818084
> 
> 赞同：1
> 
> 时间：2012-05-30T14:15:14.610
> 
> 标签：java, maven, apt, querydsl

显然我不能在使用静态导入的单元测试中使用用 APT 生成的类。（Maven示例项目可以在[这里](http://www.file-upload.net/download-4402735/apt-bug.tar.gz.html)下载）

如果以下示例类

```
import com.mysema.query.jpa.impl.JPAQuery;

public class UserStore {

    public void something() {
        new JPAQuery(null).from(QUser.user).list(QUser.user.login);
    }

} 
```

改为

```
import static something.QUser.user;
import com.mysema.query.jpa.impl.JPAQuery;

public class UserStore {

    public void something() {
        new JPAQuery(null).from(user).list(user.login);
    }

} 
```

构建过程（mvn clean install）将失败：

```
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 3.466s
[INFO] Finished at: Wed May 30 16:05:40 CEST 2012
[INFO] Final Memory: 18M/150M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project apt-bug: Compilation failure: Compilation failure:
... 
```

（[完整的错误信息](http://pastebin.com/z4CZ2PLn)）

这是否意味着我不能在单元测试中将这些生成的类与静态导入一起使用，或者 pom.xml 文件中是否存在问题？

编辑：

POM 文件： http: [//pastebin.com/gvycZmXD](http://pastebin.com/gvycZmXD)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T06:29:54.143

这可能与[https://github.com/mysema/querydsl/issues/158有关](https://github.com/mysema/querydsl/issues/158)

我还没有时间对此进行调查。

**编辑**

这显然已在 Java 7 中得到修复

*   [http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7174857](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7174857)
*   [http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7159016](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7159016)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:41:16.223

我假设问题出在静态导入中，因为错误消息说导入的 QUser.user 既不是类也不是接口。这看起来用户只是 QUser 类的一个属性，它可以解释错误消息。

```
/home/xxx/apt-bug/src/main/java/something/UserStore.java:3: cannot find symbol
symbol  : class QUser
location: package something
import static something.QUser.user;
                       ^
/home/xxx/apt-bug/src/main/java/something/UserStore.java:3: static import only from classes and interfaces
import static something.QUser.user;
^ 
```

# oracle - Oracle：在没有数据库链接的两个数据库之间传输数据

> ID：10818085
> 
> 赞同：3
> 
> 时间：2012-05-30T14:15:17.303
> 
> 标签：oracle, toad

我在不同的网络上有两个数据库。他们看不见对方。所以我不能使用 Db Link。

蟾蜍或任何其他工具是否允许我将数据从一个数据库复制到另一个模拟数据库链接（只需在第一个数据库上执行选择并在第二个数据库上执行插入非常简单）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-05T16:42:25.673

Toad 可以轻松完成 - 说明适用于版本 11。首先，使用 Toad 连接到两个数据库。然后，在模式浏览器中找到有问题的表。右键单击表名，单击“将数据复制到另一个模式”。选择正确的源/目标模式，并设置副本的选项（触发器/约束启用/禁用等）。然后点击绿色的播放按钮，观看记录飞扬！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T14:20:37.310

如果您的工作站可以同时看到这两个数据库，您也许可以使用SQL Developer 中的[数据库复制工具](http://docs.oracle.com/cd/E14072_01/doc.112/e12152/dialogs.htm#BACDECCG)

SQL*PLus 也有一个[复制命令](http://docs.oracle.com/cd/B19306_01/server.102/b14357/apb.htm)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-17T16:58:47.747

Toad 或任何其他客户端都不是大表的好解决方案，客户端 PC 可能会出现故障或速度变慢，网络链接可能不够可靠，或者带宽不够。如果我们谈论的是大型环境，我会推荐 Oracle 10 及更高版本中的 Oracle Data Pump (expdp,impdp)，或者之前的工具 (exp/imp)、sqlloader 等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T14:16:52.840

转储一个文本文件，FTP 或移动它，然后在另一端使用 SQL*Loader？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T14:19:05.850

从源数据库导出，然后导入目标数据库

# mysql - 查询在 Codeigniter 中比在 Phpmyadmin 中花费的时间长

> ID：10818088
> 
> 赞同：0
> 
> 时间：2012-05-30T14:15:27.360
> 
> 标签：mysql, debugging, codeigniter

我有以下查询，在 phpmyadmin 中需要 0.055 秒，但在 CodeIgniter 中完全相同的查询需要 2 秒以上。有人知道问题可能是什么吗？

该查询仅提供大约 25 个结果，因此应该没有任何问题...

这是查询

```
SELECT `Qty`, `Invt`, `ClassNr`, `SubPartCode`, `Description`, `DesignCode`, `Measure`, `Remark`, `PartMnem`
FROM (`loodvrij_receptuur` lr)
JOIN `loodvrij_artikel` la ON `la`.`PartCode` = `lr`.`SubPartCode`
WHERE `lr`.`PartCode` =  'M2430A'
ORDER BY `SubPartCode`, `Qty` desc 
```

**编辑**

这是我尝试在 CodeIgniter 中执行查询的方式

```
$this->db->query("SELECT `Qty`, `Invt`, `ClassNr`, `SubPartCode`, `Description`, `DesignCode`, `Measure`, `Remark`, `PartMnem`
                  FROM (`loodvrij_receptuur` lr)
                  JOIN `loodvrij_artikel` la ON `la`.`PartCode` = `lr`.`SubPartCode`
                  WHERE `lr`.`PartCode` =  'M2425B'
                  ORDER BY `SubPartCode`, `Qty` desc"); 
```

和

```
$this->db->select('Qty, Invt, ClassNr, SubPartCode, Description, DesignCode, Measure, Remark, PartMnem');
$this->db->from('loodvrij_receptuur lr');
$this->db->join('loodvrij_artikel la', 'la.PartCode = lr.SubPartCode');
$this->db->where('lr.PartCode', 'M2425B');
$this->db->order_by('SubPartCode');
$this->db->order_by('Qty', 'desc'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T07:08:54.270

你说查询只给出 25 个结果？该表是否只有 25 个或更多结果？Phpmyadmin 自动添加了一个限制子句，所以它只给你 20 个结果。如果您的表有超过 25 条记录，那可能是罪魁祸首，因为我在您的 ci 查询中没有看到限制子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:26:38.467

可能是 PHPMyAdmin 从更直接的路径访问您的数据库。

# html - Internet Explorer 8 规模问题

> ID：10818089
> 
> 赞同：0
> 
> 时间：2012-05-30T14:15:27.740
> 
> 标签：html, css, internet-explorer, internet-explorer-8

我正在尝试在 Internet Explorer 8 中使用锚标记缩放 div。该 div 是：

```
<div class="toScale">
    <a href="http://www.google.com">Google</a>
</div> 
```

为了实现这一点，我对 div 使用以下样式：

```
.toScale {
    filter: progid:DXImageTransform.Microsoft.Matrix(M11=2, M12=0, M21=0, M22=2, SizingMethod='auto expand');
} 
```

缩放正确完成（它是两倍大），但有效边界框保持不变，就好像缩放没有完成一样。因此，为了单击锚点，我必须单击未缩放的锚点所在的区域，而不是缩放的文本。

我为 div 尝试了不同的定位样式，甚至为过滤器使用了不同的语法（带有 的那个`-ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=2, M12=0, M21=0, M22=2, SizingMethod='auto expand')"`），但没有解决这个问题。

在 Internet Explorer 7 中，相同的代码可以正常工作而不会出现此问题。

有谁知道什么可以解决 Internet Explorer 8 中的这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:19:54.400

```
this mayfix 

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
<meta http-equiv="X-UA-Compatible" content="IE=9;IE=8" /> 
```

# javascript - 可选择的限制

> ID：10818092
> 
> 赞同：0
> 
> 时间：2012-05-30T14:15:36.470
> 
> 标签：javascript, jquery, jquery-ui

我正在尝试添加 6 个可选行的限制，但我无法使其工作。任何帮助！

```
<script>
$(function() {
  $(".selectable").selectable({
      filter: "td.cs",

      stop: function() {
          var result = $("#select-result").empty();
          var result2 = $("#result2");
          $(".ui-selected", this).each(function() {

              var cabbage = this.id + ', ';
              result.append(cabbage);
          });

          var newInputResult = $('#select-result').text();
          newInputResult = newInputResult.substring(0, newInputResult.length - 1);
          result2.val(newInputResult);
      }
  });
 });​
 </script> 
```

我正在尝试将下面的源代码添加到上面的源代码中

```
$( "#selectable" ).selectable({
   selecting: function(event, ui) { 
     if ($(".ui-selected, .ui-selecting").length > 4) {
       $(ui.selecting).removeClass("ui-selecting");
     }
   }
}); 
```

​</p>

任何人？？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:22:07.797

```
$("#selectable").selectable({
    filter: 'li:lt(4)',
    selecting: function(event, ui) {
        $('ui.selecting')
        $('.ui-selecting:gt(3)').removeClass("ui-selecting");
    }
}); 
```

有关更多信息`:lt()`，请[点击此处](http://api.jquery.com/lt-selector/)

您不会在帖子中提供您的 html 代码。但你可以试试这个：

```
 filter: "table.selectable > tr > td.cs:lt(4)" 
```

**[演示](http://jsfiddle.net/thecodeparadox/dw6Hf/4/)**

# macos - Xcode 之上的 osx-gcc-installer

> ID：10818093
> 
> 赞同：1
> 
> 时间：2012-05-30T14:15:39.043
> 
> 标签：macos, gcc, rbenv

运行时`rbenv install 1.9.2-p320`，我得到以下输出：

> 错误：这个包必须用 GCC 编译，但是 ruby​​-build 在你的系统上找不到合适的`gcc`可执行文件。请安装 GCC 并重试。
> 
> 详细信息：Apple 不再在 4.2 版中包含带有 Xcode 的官方 GCC 编译器。相反，`gcc`可执行文件是一个符号链接 `llvm-gcc`，它是 GCC 的修改版本，它输出 LLVM 字节码。
> 
> 对于大多数程序，`llvm-gcc`编译器工作正常。但是，早于 1.9.3-p125 的 Ruby 版本与 `llvm-gcc`. 要构建旧版本的 Ruby，您必须在系统上安装官方 GCC 编译器。
> 
> 解决问题：使用这些包安装官方 GCC 编译器：[https ://github.com/kennethreitz/osx-gcc-installer/downloads](https://github.com/kennethreitz/osx-gcc-installer/downloads)
> 
> 即使您已经安装了 Apple 的 Xcode 命令行工具包，您也需要安装官方的 GCC 编译器来构建旧版本的 Ruby。Xcode 软件包的命令行工具仅包括`llvm-gcc`.

我已经安装了 Xcode 4.3.2。我是否可以安全地在顶部安装 osx-gcc-installer - 这既可以解决上述问题，又可以让 Xcode 在 iOS 开发中顺利运行？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T00:04:25.593

在 Xcode 之上安装这个包通常是不安全的。它是为那些想要编译器及其依赖项而无需安装 Xcode 的人设计的。如果你安装了 Xcode 的命令行工具，它会覆盖很多文件，并且可能会破坏各种东西。

如果您只关心 iOS 开发，则根本不需要 Xcode 的命令行工具，因此即使它们完全损坏也没关系。但在这种情况下，最好不要安装这些命令行工具，而不是尝试同时安装这两个工具。

一个更安全的替代方法是在 /usr 以外的地方安装编译器。您显然可以通过自己构建它来做到这一点，但这是很多工作。您可能需要查看 Brew apple-gcc42 软件包，该软件包专门设计用于通过添加缺少的工具来补充 Xcode 4.2+ 的命令行工具（全部在 /usr/local/bin 中而不是 /usr/bin 中，并且后缀-4.2)。或者，如果您已经在使用 MacPorts 或 Fink，请尝试使用它们的软件包。（如果你需要帮助告诉不同的包使用 /usr/local/bin/gcc-4.2 而不是 /usr/bin/gcc 等，你可能应该问一个新问题。）

另一个明显的替代方法是使用没有这个问题的 Ruby 1.9.3，而不是 1.9.2。（如果您不想深入了解自己构建东西的繁琐细节，Brew 也为此提供了一个包……）

# c# - 浏览器关闭时匿名标识消失

> ID：10818096
> 
> 赞同：1
> 
> 时间：2012-05-30T14:15:52.263
> 
> 标签：c#, asp.net, session, cookies, formsauthentication

我正在尝试使用 aspx 匿名标识，但遇到了问题。

当浏览器关闭时，如何使 cookie 消失、消失、消失？

我知道我可以使用一些代码手动摆脱它（用户单击注销或浏览器关闭事件），但这还不够。

任何帮助，将不胜感激。这是 web.config 文件中的标记：

```
<anonymousIdentification enabled="true" cookieName=".Blahblah" cookieTimeout="99999" cookiePath="/" cookieRequireSSL="false" cookieSlidingExpiration="true" cookieProtection="All" cookieless="UseCookies" domain=".domain.com" /> 
```

谢谢！

# playframework - 带有 xml 的 REST api 播放框架

> ID：10818101
> 
> 赞同：0
> 
> 时间：2012-05-30T14:16:18.013
> 
> 标签：playframework, playframework-1.x

我正在阅读以下示例

[RESTful 畅玩！框架](https://stackoverflow.com/questions/4379485/restful-on-play-framework)

我不确定的一件事是这里的代码和 http POST

```
<user>
   <name>${user.name}</name>
   <dob>${user.dob}</dob>
   <somethign>${user.something}</something>
   <another>${user.another}</another>
   .... etc etc
</user> 
```

如果 playframework 在 http POST 期间只给出这个 xml 怎么办？（在这种情况下播放框架会中断）

院长 asdf

请注意，有两个字段是可选的，没有给出。在这种情况下，playframework 是否仍然有效？

谢谢，院长

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:29:05.917

很高兴我们找到了基本的协议:)

我认为[Coffee Bean 的帖子](http://coffeebean.loicdescotte.com/2010/05/how-to-write-restxml-api-with-play.html)正是您正在寻找的。

# java - ScrollTable 不使用值标签

> ID：10818104
> 
> 赞同：0
> 
> 时间：2012-05-30T14:16:32.757
> 
> 标签：java, jsf, richfaces, seam, richdatatable

在`ScrollTable`我需要从特定对象中检索数据并将数据设置为另一个。我怎样才能做到这一点？

现在我发现：

```
Illegal Syntax for Set Operation 
```

h:inputText 有值 tag = myBean.castData(getTopdata(par1))

该死！我只需要获取一个值来显示而不是设置修改（因为修改是使用 valueChangeListener 进行的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:58:48.263

解决了自己在真实数据和显示数据之间放置哈希图的问题。

# java - 包括 clojure 中的罐子

> ID：10818111
> 
> 赞同：5
> 
> 时间：2012-05-30T14:17:02.087
> 
> 标签：java, jar, clojure, classpath

我已经下载并安装了一个带有 Maven 的 jar（如此处所回答），但[现在](https://stackoverflow.com/questions/10808898/install-jar-from-remote-repo-clojar)我需要在项目中使用它。我按照[git README](https://github.com/dakrone/clj-http) ( `(require '[clj-http.client :as client])`) 上的说明进行操作，但仍然收到此错误：

```
FileNotFoundException Could not locate clj_http/client__init.class or clj_http/client.clj on classpath:   clojure.lang.RT.load (RT.java:430) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T14:44:40.690

当您启动 java 进程时，您需要执行以下操作：

```
java -cp ./lib/clj-http.jar ./lib/clojure.jar clojure.main 
```

基本上，您需要类路径中的 clojure.jar（REPL 所在的位置）和 clj-http.jar。

假设 clj-http.jar 在 ./lib/ 目录中。或者您可以使用 lein（构建工具，类似于 maven）构建您的项目并让它构建一个 uberjar，这就是我会做的。这里有一个很好的设置 lein 和构建 uberjar 的演练：http: [//zef.me/2470/building-clojure-projects-with-leiningen](http://zef.me/2470/building-clojure-projects-with-leiningen)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T17:54:35.320

该线程上的其他答案肯定会起作用....但是直接在机器的 CLASSPATH 或命令行上添加 jar 可能是一个非常困难的开发策略。. .

**在 clojure 应用程序中包含 jar 的最常见、惯用的方法是[Leiningen](http://leiningen.org/)（简单，一步安装在 github 上——初学者应该在这个答案的末尾检查注释以获取警告）...... Leiningen 还可以安装 clojure 环境和为您启动您的 repl，预装正确的 jar 环境。**

它本质上是一个 java 依赖管理器和构建工具合二为一 - 即像 ivy 或我们用于 java 开发的 maven Pom.xml。

**几个如何使用 Leiningen 以简单且可扩展的方式与多个库交互的示例：**

要启动 repl，使 project.clj 文件中的 jar 位于 classpath 上：

```
lein repl 
```

要在 project.clj 指定的 maven 存储库中更新 jars：

```
lein deps 
```

最后，lein 让您导出类似于“fatjars”的“uberjars”，即它们为您捆绑了所有依赖项。

**关于新 Lein 版本的小更新：初学者注意。**

您可以运行两个脚本来安装 Leiningan，运行这个可能更安全：

[https://github.com/jayunit100/leiningen/blob/stable/bin/lein](https://github.com/jayunit100/leiningen/blob/stable/bin/lein)（**稳定**版）

而不是这个：

[https://raw.github.com/technomancy/leiningen/preview/bin/lein](https://raw.github.com/technomancy/leiningen/preview/bin/lein)（**最新更新**，预览）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T14:27:31.490

在启动 clojure repl 之前将 clj-http.jar 添加到 CLASSPATH 或 CP。

# jira - 如何在自定义发布说明模板中获取 JIRA 问题的评论

> ID：10818112
> 
> 赞同：0
> 
> 时间：2012-05-30T14:17:08.950
> 
> 标签：jira

在我们运行 4.2.4 版之前，我们今天将我们的 jira 升级到了 5.0.5 版。在那个版本中，我们制作了一个自定义发布说明模板，该模板还将显示对某个问题的所有评论。为此，我们必须能够获得一个`CommentManager`对象。我们这样做是这样的：

```
#foreach ($issue in $issueType.issues)
#if($issueType.issues.size() > 0)
    #set ($comments = $action.ComponentManager.CommentManager.getComments($issue))
    #if ($comments) 
       #foreach ($comment in $comments)
... 
```

这在 JIRA 4.2.4 中运行良好，但在 jira 5.0.5 中不再运行，有谁知道在 JIRA 5.0.5 中创建自定义发行说明模板或如何获取 CommentManager 时如何再次获取 CommentManager 对象以其他方式反对，而不使用`$action`例如？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-24T16:40:20.450

在你的 vm 模板中，这样写：

```
#set ($componentAccessorClass        = $constantsManager.getClass().getClassLoader().findClass('com.atlassian.jira.component.ComponentAccessor'))
#set ($componentAccessorConstructor  = $componentAccessorClass.getConstructor())
#set ($componentAccessor             = $componentAccessorConstructor.newInstance()) 
```

现在您可以访问[组件](https://docs.atlassian.com/jira/latest/com/atlassian/jira/component/ComponentAccessor.html)访问器，它可以为您提供几乎任何您想要的东西，包括评论管理器。

现在，您所要做的就是在您的 Component Accessor 变量上调用 getCommentManager()。

```
#set($commentManager = $componentAccessor.getCommentManager() ) 
```

希望有帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:08:04.920

这是我在jira中用来获取componentmanager对象的方式，一旦你有了componentmanager对象，剩下的就很容易了：

```
#set ($componentManagerClass = $constantsManager.getClass().getClassLoader().findClass('com.atlassian.jira.ComponentManager'))
#set ($method = $componentManagerClass.getDeclaredMethod('getInstance', null))
#set ($componentManager = $method.invoke(null, null)) 
```

我现在正在使用这个解决方案，对于其他人来说，使用 constantsmanager 获得几乎任何类型的类都会很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T19:00:12.833

JiraWebActionSupport 具有以下提供组件管理器对象的已弃用方法。

`@Deprecated public ComponentManager getComponentManager() { return ComponentManager.getInstance(); }`

和[https://developer.atlassian.com/display/JIRADEV/Creating+a+Custom+Release+Notes+Template+Containing+Release+Comments](https://developer.atlassian.com/display/JIRADEV/Creating+a+Custom+Release+Notes+Template+Containing+Release+Comments) 有一些 Velocity 代码，但查看 5.0.1 源代码看起来 Velocity 没有使用时间更长？

我将在[https://jira.atlassian.com/browse/JRA](https://jira.atlassian.com/browse/JRA)提交改进，以向 JiraWebActionSupport.java 添加 getCommentManager 方法

# php - 如何更新数据库中产品的价格？

> ID：10818113
> 
> 赞同：-1
> 
> 时间：2012-05-30T14:17:10.730
> 
> 标签：php, mysql

我正在用 php 和 mysql 制作购物车。我在更新产品价格时遇到问题。我的代码如下。请告诉我我哪里错了。我的回声语句也不起作用，只显示带有产品价格的框。

```
<?php
include("includes/db.php");
include("includes/functions.php");

if(isset($_POST['update_price'])){
//print_r($_POST['price']);

    foreach($_POST['price'] as $priceup => $prvalue){ 

    echo $sql = "Update products SET price='$prvalue' where serial = '".     $_POST['product_data'][$priceup] ."'";
    echo $result=mysql_query($sql);}    }   

            ?>
   <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
         <html xmlns="http://www.w3.org/1999/xhtml">
            <head>
          <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
                <title>Products Prices Management</title>
                  <script language="javascript">
                        function update_cart(){
             document.form1.command.value='update';
                            document.form1.submit();
              }
                 </script>

          <style type="text/css">
             <!--
            .style3 {
        font-family: Georgia, "Times New Roman", Times, serif;
font-weight: bold;
font-style: italic;
color: #FF0000;
        }
        -->
            </style>
        </head>
       <body>
        <h1 class="style3">Products Price Management</h1>
         <table border="2" cellpadding="2px" width="473">
            <?php
        $result=mysql_query("select * from products");
        while($row=mysql_fetch_array($result)){
    ?>
            <tr>
         <input type="hidden" name="product_data[]"  value="<?php echo $row['serial']; ?>" />
         <td width="205"><b><?php echo $row['name']?></b></td>

        <td width="246"><input type="text" name="price[]" value="<?php echo  $row['price']?>"maxlength="3" size="2" />
             </td>

             </tr>
             <?php
                }
               ?>
           </table>
              <div>
    <input type="submit" name="update_price" value="Update Prices" >
           </div>

             </body>
            </html> 
```

请告诉我我在哪里做错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:36:27.957

我认为您缺少页面中的表单标签和方法 POST。

```
<form method="POST" action="script.php">
...

</form> 
```

# xml - 从 XML 调用 x 文本元素

> ID：10818114
> 
> 赞同：0
> 
> 时间：2012-05-30T14:17:21.713
> 
> 标签：xml, flash, actionscript-2

我有一个从 AS2 中的 XML 文件调用文本的 flash 文件。这是XML

```
<goals1>
    <minute>32</minute>
    <name>Name</name>
    <minute>35</minute>
    <name>Name2</name>
</goals1> 
```

所以这很简单，但这段代码可能更大或更小，例如：

```
<minute>32</minute>
<name>Name</name> 
```

可以重复4次或更多。这些将是进球的那一刻和球员的名字，这将在瑞士法郎中列出，所以我的问题是在这里做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:03:09.170

在 AS2 中解析 XML 是世界上最痛苦的事情。使用有助于在对象中转换 XML 的外部库。

Greensock的[XMLParser](http://www.greensock.com/xmlparseras2/)非常好。

将 XML 转换为对象后，您可以使用标准`for...each`或`for...in`循环。

关于您的 XML：它的设计不正确 - 最终结果不应取决于节点的顺序。我是说：

```
<goals1>
    <minute>32</minute>
    <minute>35</minute>
    <name>Name</name>
    <name>Name2</name>
</goals1> 
```

理论上，也应该在您的应用程序中工作。但是，显然，它不会。如果我是你，我会做这样的事情：

```
<goals1>
    <goal>
        <minute>32</minute>
        <name>Name</name>
    </goal>
    <goal>
        <minute>35</minute>
        <name>Name2</name>
    </goal> 
</goals1> 
```

这样，更改节点的顺序不应破坏您的应用程序。

# sql - Sql Server中的单元格比较？

> ID：10818115
> 
> 赞同：3
> 
> 时间：2012-05-30T14:17:29.107
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我有`tbl1`：

```
 Id  | c1  |  c2  |  c3   |
   ____|_____|______|_______|_
    1     a     b       c 
   ____|_____|______|_______|_
    2     h     j       k
   ____|_____|______|_______|_
    3     t     y       u
   ____|_____|______|_______|_ 
```

我有`tbl2`：

```
 Id  | c1  |  c2  |  c3   |
   ____|_____|______|_______|_
    1     a     b       D 
   ____|_____|______|_______|_
    2     c     c       c
   ____|_____|______|_______|_
    3     k     l       k
   ____|_____|______|_______|_ 
```

我需要将每个单元格`tbl1`与其适当的位置进行比较`tbl2`：

所需的输出是：

```
 Id  |tbl1 | tbl2 | 
   ____|_____|______| 
    1     a     a     
   ____|_____|______| 
    1     b     b      
   ____|_____|______| 
    1     c     d      
   ____|_____|______| 
    2     h     c     
   ____|_____|______| 
    2     j     c      
   ____|_____|______| 
    2     k     c      
   ____|_____|______| 
          ...
          ...
          ...
          ... 
```

**视觉表现 ：**

![在此处输入图像描述](../Images/b601bcc6142f8d7d09254ad062eee81b.png)

我尝试了很多查询...但没有成功...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:22:37.610

首先，您应该取消透视数据：

```
 select Id, C1, 'C1' as C from tbl1 union all
   select Id, C2, 'C2' as C from tbl1 union all
   select Id, C3, 'C2' as C from tbl1 union all 
```

然后你可以比较数据：

```
 select coalesce( uTbl1.Id,uTbl2.Id) as Id, uTbl1.C, uTbl2.C
   from (
     select Id, C1 as C, 'C1' as T from tbl1 union all
     select Id, C2 as C, 'C2' as T from tbl1 union all
     select Id, C3 as C, 'C3' as T from tbl1 ) uTbl1
   full outer join (
     select Id, C1 as C, 'C1' as T from tbl2 union all
     select Id, C2 as C, 'C2' as T from tbl2 union all
     select Id, C3 as C, 'C3' as T from tbl2 ) uTbl2
        on uTbl1.Id = uTbl2.Id and  uTbl1.T = uTbl2.T 
```

免责声明： - 未经测试。

**用 CTE**编辑：****

 **```
 ; with 
    uTbl1 as (
     select Id, C1 as C, 'C1' as T from tbl1 union all
     select Id, C2 as C, 'C2' as T from tbl1 union all
     select Id, C3 as C, 'C3' as T from tbl1 ) 
   ,uTbl2 as (
     select Id, C1 as C, 'C1' as T from tbl2 union all
     select Id, C2 as C, 'C2' as T from tbl2 union all
     select Id, C3 as C, 'C3' as T from tbl2 ) 
   select coalesce( uTbl1.Id,uTbl2.Id) as Id, uTbl1.C, uTbl2.C
   from 
      uTbl1
   full outer join 
      uTbl2
         on uTbl1.Id = uTbl2.Id and  uTbl1.T = uTbl2.T 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T05:19:43.293

```
select T1.id, T1.tbl1, T2.tbl2
from (
       select U.id, U.tbl1, U.col
       from tbl1
         unpivot (tbl1 for col in (c1, c2, c3)) U
     ) T1
  inner join 
     (
       select U.id, U.tbl2, U.Col
       from tbl2
         unpivot (tbl2 for col in (c1, c2, c3)) U
     ) T2
    on T1.id = T2.id and
       T1.col = T2.col
order by T1.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T14:24:37.610

执行 3 个原子子查询，然后使用 with`UNION ALL`得到最终结果：

```
SELECT tbl1.id, tbl1.c1, tbl2.c1 FROM tbl1
INNER JOIN tbl2 on tbl1.id = tbl2.id

UNION ALL

SELECT tbl1.id, tbl1.c2, tbl2.c2 FROM tbl1
INNER JOIN tbl2 on tbl1.id = tbl2.id

UNION ALL

SELECT tbl1.id, tbl1.c3, tbl2.c3 FROM tbl1
INNER JOIN tbl2 on tbl1.id = tbl2.id

ORDER BY 1  --sort by column 1 (the IDs) 
```**

# php - 如何在 div 中提交表单之前使用 jquery 显示上传图像预览

> ID：10818120
> 
> 赞同：2
> 
> 时间：2012-05-30T14:17:39.560
> 
> 标签：php, javascript, jquery, image, file-upload

我正在处理一个包含各种表单元素的表单，并可以选择上传多个图像（最多 6 个）。现在，我`preview`在单击该 div 时有一个 div，我使用 jquery 获取所有表单字段（此时仍没有提交表单，因为它是一个多表单步骤 1、2 和 3）。现在的问题是我正在使用此代码获取所有表单数据 -

```
var allFormData = $("#myform").serializeArray(); 
```

使用这个另一个代码，我可以在 div 中显示其余数据，但图像不会出现。

```
$.each(adtitletoshow, function(i, field){
    if( field.name == 'desc'){ 
        $(".add_desc").text(field.value);
    }
}); 
```

这是JS创建的上传图片的文件。

```
<script type="text/javascript">
    var total_images = 1 ;
    function add_file_field () {
        total_images++ ;
        if ( total_images > 6 ) return ;
        var str_to_embed = '<input name="fileImage[]" size="40" style="width: 500px;" type="file" onChange="add_file_field()"><br>' ;
        $("#image_stack").append ( str_to_embed ) ;
    }
</script> 
```

所有事情都在单页上进行，所以我需要一个解决方案，我如何在我的预览 div 下加载图像。让我知道 thr 是否仍然存在一些歧义。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T16:18:16.057

您需要遍历来自多个输入的文件数组，并在每个输入上使用 FileReader API。

我已经像这样设置了 HTML：

```
​&lt;input type="file" multiple="true" id="files" />
<input type="submit" id="go"/>
<div id="images"></div>​​​​​​​​​​​​​​​​​​​​​​ 
```

然后javascript如下：

```
// set up variables
var reader = new FileReader(),
    i=0,
    numFiles = 0,
    imageFiles;

// use the FileReader to read image i
function readFile() {
    reader.readAsDataURL(imageFiles[i])
}

// define function to be run when the File
// reader has finished reading the file
reader.onloadend = function(e) {

    // make an image and append it to the div
    var image = $('<img>').attr('src', e.target.result);
    $(image).appendTo('#images');

    // if there are more files run the file reader again
    if (i < numFiles) {
        i++;
        readFile();
    }
};

$('#go').click(function() {

    imageFiles = document.getElementById('files').files
    // get the number of files
    numFiles = imageFiles.length;
    readFile();           

}); 
```

我已经设置了一个 JSFiddle 来演示[http://jsfiddle.net/3LB72/](http://jsfiddle.net/3LB72/)

您可能需要对用户使用的浏览器是否具有 FileReader 以及他们选择的文件是否为图像文件进行更多检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T16:49:31.127

[JSFiddle 演示](http://jsfiddle.net/3LB72/555/)

这好多了，无需单击任何按钮：D

**HTML：**

```
<input type="file" multiple="true" id="files" />
<input type="submit" id="go"/>
<div id="images"></div> 
```

**JavaScript：**

```
// set up variables
var reader = new FileReader(),
    i=0,
    numFiles = 0,
    imageFiles;

// use the FileReader to read image i
function readFile() {
    reader.readAsDataURL(imageFiles[i])
}

// define function to be run when the File
// reader has finished reading the file
reader.onloadend = function(e) {

// make an image and append it to the div
$("#images").css({'background-image':'url('+e.target.result+')'});    
    // if there are more files run the file reader again
    if (i < numFiles) {
        i++;
        readFile();
    }
};

$('#files').live('change', function(){
    imageFiles = document.getElementById('files').files
    // get the number of files
    numFiles = imageFiles.length;
    readFile();           
}); 
```

# arrays - Excel VBA 全局变量

> ID：10818124
> 
> 赞同：0
> 
> 时间：2012-05-30T14:17:51.063
> 
> 标签：arrays, vba, variables, global

我找不到任何文件来支持我的发现，但这就是我在这里的原因。在我的模块中，我声明了多个全局数组，这本身不是问题，但似乎正在发生的事情是，如果我尝试在一个语句中声明多个数组，则只有第一个被初始化。任何人都可以确认这是行为和/或指向支持此行为的文档吗？

非工作语句示例

```
Global arr1, arr2, arr3 
```

当我进入代码时，如果我查找 a​​rr1 的定义，就可以找到它。如果我查找 a​​rr2 或 arr3，我会收到一条消息“无法识别 cusor 下的标识符”。如果我将 arr3 移动到新行并像这样贴花：

```
Global arr1, arr2
Global arr3 
```

现在已经被认可了。所以我不知道这是已知的行为、错误还是其他。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T11:13:55.173

我不确定使用“全球”而不是“公共”。我认为前者实际上没有记录。但无论如何， arrX 都是类型变体。在被强制之前，它们不是专门的数组。正如前面评论中提到的，数组可以这样声明： Dim arr1() as myType Dim arr2(1 to 10) as myType

在代码的某处，您还需要初始化 arr1 Redim arr1(i to j) 的结构

这比纠结于变体更安全、更有效。变体可以有效地读取和写入数据块，但如果您要大量使用它们，最好将它们转换为数组。

以下是一些参考资料，除了 MSDN：

[http://www.cpearson.com/excel/topic.aspx](http://www.cpearson.com/excel/topic.aspx)

[http://fastexcel.wordpress.com/2011/05/25/writing-efficient-vba-udfs-part-1/](http://fastexcel.wordpress.com/2011/05/25/writing-efficient-vba-udfs-part-1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T20:13:13.443

这有效

```
Global arr1, arr2, arr3

Sub test()

    Debug.Print CLng(arr1)
    Debug.Print CLng(arr2)
    Debug.Print CLng(arr3)

End Sub 
```

因为它打印三个零。你说“如果我寻找”的定义，但我不确定那是什么意思。如果我在代码中放置断点并将鼠标悬停在变量上，它们都会返回“空”。

# iphone - 如何从苹果开发者会员帐户禁用测试设备上的 iPhone 应用程序

> ID：10818125
> 
> 赞同：1
> 
> 时间：2012-05-30T14:17:52.523
> 
> 标签：iphone, ios

如何禁用在测试设备上运行的 iPhone 应用程序而不删除它，该应用程序的 ipa 文件已使用测试设备的配置文件生成。假设我可以访问付费会员帐户。

如果我使配置文件无效，该应用程序是否仍可在设备上运行？

我对 iPhone 的开发很幼稚。对不起，如果我的问题不恰当。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:38:01.703

我猜当您使用配置中心的配置文件制作 IPA 时，它会嵌入到 IPA 中。因此，理论上，如果您从配置中心移除设备，更改将不会反映在以前安装的设备上。

*只是一个猜测。*

如果这是正确的，我认为动态执行此操作的唯一方法是，如果您自己为应用程序测试人员创建一个身份验证系统，需要密码或任何将在线验证的应用程序才能运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:22:47.097

我认为您要问的是是否可以远程禁用/擦除您之前发送给测试人员的应用程序。

我认为这是不可能的，因为假设测试人员设法使其至少运行一个，他/她已经拥有配置文件和匹配该配置文件的应用程序。因此，除非测试人员更改该设置，否则您无法撤消访问权限。

另一方面，我相信在企业开发者计划下远程擦除是可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:20:19.283

在苹果开发者配置中心，当您创建配置文件时，它会要求您从列表中为该配置文件选择设备。应用程序将仅在列出的设备上运行，您可以通过修改该配置文件然后下载配置文件并使用该配置文件制作 IPA 来删除/添加设备。

# android - Android 开发 - 日历的事件获取/放置

> ID：10818135
> 
> 赞同：1
> 
> 时间：2012-05-30T14:18:45.237
> 
> 标签：android, android-calendar

我想在 SDK 14 之前以编程方式从设备的日历中获取/放置事件。

我发现了这个： [http ://code.google.com/p/android-calendar-provider-tests/source/browse/trunk/src/com/androidbook/androidcalendar/CalendarActivity.java](http://code.google.com/p/android-calendar-provider-tests/source/browse/trunk/src/com/androidbook/androidcalendar/CalendarActivity.java)

但这仅适用于 Activity 的 onCreate 方法。我尝试了从外部 onCreate 调用方法，但它不起作用。

我有一个扩展 ArrayAdapter 的类，我想从这个（onClick 一个元素）调用另一个自己的类方法，将事件放入日历。

我在几个小时内尝试了搜索解决方案，但毫无意义......

# python - Django：Tweepy API 不工作

> ID：10818136
> 
> 赞同：0
> 
> 时间：2012-05-30T14:18:45.407
> 
> 标签：python, django

我正在尝试通过 Tweepy 查看我的 Twitter 列表中的成员列表。当我尝试访问我的 django 应用程序中的页面时，我收到以下错误。但是当我尝试通过 shell 终端（manage.py shell）检查时，它会显示我列表中的成员。

我该如何解决这个问题？

```
 TweepError at /list/
       [{u'message': u'Sorry, that page does not exist', u'code': 34}]
       Request Method:  GET
       Request URL: http://127.0.0.1:8000/list/
       Django Version:  1.4
       Exception Type:  TweepError
       Exception Value: [{u'message': u'Sorry, that page does not exist', u'code': 34}]
       Exception Location:  build\bdist.win32\egg\tweepy\binder.py in execute, line 168
       Python Executable:   C:\Python27\python.exe
       Python Version:  2.7.3
       Python Path: ['C:\\Python27\\Scripts\\crack',
                     'C:\\Python27\\lib\\site-packages\\django_social_auth-0.6.9-py2.7.egg',
                     'C:\\Python27\\lib\\site-packages\\python_openid-2.2.5-py2.7.egg',
                     'C:\\Python27\\lib\\site-packages\\oauth2-1.5.211-py2.7.egg',
                     'C:\\Python27\\lib\\site-packages\\httplib2-0.7.4-py2.7.egg',
                     'C:\\Python27\\lib\\site-packages\\tweepy-1.9-py2.7.egg',
                     'C:\\Python27\\lib\\site-packages\\django_pagination-1.0.7-py2.7.egg',
                     'C:\\Python27\\lib\\site-packages\\django_imagekit-2.0.1-py2.7.egg',
                     'C:\\Windows\\system32\\python27.zip',
                     'C:\\Python27\\DLLs',
                     'C:\\Python27\\lib',
                     'C:\\Python27\\lib\\plat-win',
                     'C:\\Python27\\lib\\lib-tk',
                     'C:\\Python27\\lib\\site-packages\\PIL']
         Server time:   Wed, 30 May 2012 10:07:07 +0100 
```

意见

```
 def listmem(request):
            Users= api.list_members(owner=request.user, slug='map')
            for User in Users:
                print User
            return render_to_response('listmember.html',{'Users': Users},context_instance=RequestContext(request)) 
```

模板

```
 {% block content %}
             {% for User in Users %} 

                 <p> <img src={{ User.profile_image_url }} /> {{ User.screen_name}}<a>   </p> 
          {% endfor %} 

           {% endblock %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:37:11.520

您确定所有者（取自`request.user`）和蛞蝓是正确的吗？

Twitter 响应告诉您找不到资源（在本例中为列表），因此其中之一不正确。

# java - 在没有可用源代码的情况下编译 GWT 项目

> ID：10818138
> 
> 赞同：2
> 
> 时间：2012-05-30T14:18:51.710
> 
> 标签：java, gwt

是否可以使用我没有可用源代码的继承模块来编译 GWT 项目？我的类路径中有包含继承模块类的 JAR 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T14:30:52.870

不，GWT 仅适用于 Java**源**，而不适用于类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T00:21:43.533

如果您引用的库是流行/开源库，那么您可以使用 codehaus 的 gwt-maven-plugin 在编译时为您自动下载和提供源 jar。

[http://mojo.codehaus.org/gwt-maven-plugin/compile-mojo.html](http://mojo.codehaus.org/gwt-maven-plugin/compile-mojo.html)

您要查找的参数是 compileSourcesArtifacts。

如果您可以扩展您尝试使用的确切库（无论它们是专有的还是开源的），我可以为您提供更好的反馈，了解如何使用 gwt-maven-plugin 来绕过在类路径上拥有源代码的需要。

# android - 裁剪图像保持纵横比

> ID：10818139
> 
> 赞同：1
> 
> 时间：2012-05-30T14:18:51.997
> 
> 标签：android, crop, aspect-ratio

这是以下代码来裁剪我正在使用的图像：

```
Display display = getWindowManager().getDefaultDisplay();
    mOutputX = display.getWidth();  
    mOutputY = display.getHeight();

    chooseImage.setOnPreferenceClickListener(new OnPreferenceClickListener() {

        @Override
        public boolean onPreferenceClick(Preference preference) {
            Intent intent = new Intent(Intent.ACTION_PICK);
            intent.setType("image/*");
            intent.putExtra("crop", "true");
            intent.putExtra("scale", true);
            intent.putExtra("outputX", mOutputX);
            intent.putExtra("outputY", mOutputY);
            intent.putExtra("aspectX", mOutputX);
            intent.putExtra("aspectY", mOutputY);
            intent.putExtra(MediaStore.EXTRA_OUTPUT, Utils.newImageFile(getApplicationContext()));
            intent.putExtra("outputFormat", Bitmap.CompressFormat.PNG.toString());
            intent.putExtra("setWallpaper", true);
            startActivityForResult(intent, REQ_CODE_PICK_IMAGE);                
            return false;
        }
    }); 
```

此代码在我的 ICS 设备（Nexus S）上完美运行；覆盖矩形保持显示比例（intent.putExtra（“aspectX”，mOutputX）；intent.putExtra（“aspectY”，mOutputY）；）并且图像的输出格式被调整为显示分辨率以减小尺寸。

但在 android 2.3.3 设备 (Wildfire S) 上，裁剪矩形是一个正方形，并且不保持与/高度比例的显示。另一方面，输出格式是正确的（320x480）。

# javascript - 淡入淡出功能完成后运行ajax代码

> ID：10818142
> 
> 赞同：0
> 
> 时间：2012-05-30T14:19:00.250
> 
> 标签：javascript, prototypejs

我需要在淡入淡出完成后运行我的 ajax 函数。我怎样才能做到这一点？谢谢。

```
$$('.loading').invoke("fade", "from: 0, to: 1");

new Ajax.Request(ajaxUrl,
    {
     method:'post',
     onSuccess: function(data){
     var tmp=data.responseText;
     $$('.content').invoke('insert',tmp);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:30:22.000

首先，由于该`fade`方法需要一个对象作为参数，因此您需要传递一个对象`invoke`而不是字符串。然后，您可以将该属性添加到该对象（正如我在[上一个问题](https://stackoverflow.com/questions/10815334/jquery-fadein-function-in-prototypejs)`afterFinish`中已经向您展示了如何操作）：

```
$$('.loading').invoke("fade", {
    from: 0, 
    to: 1,
    afterFinish: function() {
        //Do stuff
    }
}); 
```

但是，请注意，由于`invoke`基本上迭代元素数组，因此`afterFinish`将为每个元素调用一次回调。我不知道您是否要触发多个 AJAX 请求，但请记住这一点。

# zend-framework - Zend 上的每个链接都找不到 404

> ID：10818143
> 
> 赞同：1
> 
> 时间：2012-05-30T14:19:01.850
> 
> 标签：zend-framework, zend-server-ce, file-not-found

我是zend框架的新手。我已经在 Windows 7 上安装了 zend 服务器 CE。我无法浏览到任何链接，例如..`http://myproject/signup` 虽然`http://myproject/`运行良好并显示主页。

请提出可能是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:15:45.913

整理好了！

```
<Directory "E:\Zend\apache2/htdocs/myproject/public">
    Options Indexes FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory> 
```

如果有多个依赖的zend项目，这需要按照它们相关的顺序排列！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:27:32.253

您是否设置`.htaccess`正确（使用`mod_rewrite`）？

ZF的基本`.htaccess`情况如下所示：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

该文件应位于`public`项目的目录中。

# java - hibernate4.LocalSessionFactoryBean 不能转换为 org.hibernate.cfg.Configuration

> ID：10818152
> 
> 赞同：1
> 
> 时间：2012-05-30T14:19:36.070
> 
> 标签：java, spring, hibernate

这似乎是一个常见问题，但我无法解决它。我的 Spring 3.1.1 配置是

```
<bean id="sessionFactoryEditSolution" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="editSolutions-pool"/>
        <property name="mappingResources">
            <list>
                <value>/editsolutions.hibernate.cfg.xml</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.SQLServerDialect</prop>
                <prop key="hibernate.cache.use_second_level_cache">true</prop>
                <prop key="hibernate.cache.provider_class">net.sf.ehcache.hibernate.SingletonEhCacheProvider</prop>
                <prop key="net.sf.ehcache.configurationResourceName">/ehcache.xml</prop>
                <prop key="hibernate.max_fetch_depth">6</prop>
                <prop key="hibernate.default_schema">dbo</prop>
            </props>
        </property>
    </bean> 
```

这就是我试图获取配置对象的方式

```
Configuration editSolutionsConfiguration = `(Configuration)AppContext.getBean("&sessionFactoryEditSolution");` 
```

最初我的应用程序有**Hibernate 3**，但为了将它与 Spring 3.1.1 集成，我已将其升级到**Hibernate 4。**这就是为什么我必须将 hibernate3.jar 保留在我的 lib 文件夹中以支持很少的 hibernate 3 特定代码行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:44:07.897

几点注意事项：

*   您不能在类路径上使用两个版本的休眠。您的旧代码应该更新
*   `&x`返回工厂 bean，它不返回生产的对象。即使没有与号，这也会返回`SessionFactory`, 而不是`Configuration`.
*   使用 spring 你实际上不需要`Configuration`，它是在幕后处理的
*   我们正在使用hibernate 3和spring 3.1。3.1.1 可能不同，但要么保留两者的较低版本，要么升级两者（包括代码）

# excel - Excel - 自调整图表标记

> ID：10818153
> 
> 赞同：0
> 
> 时间：2012-05-30T14:19:39.110
> 
> 标签：excel, charts

我在 excel 中有一系列折线图，它们是随时间变化的数据。图表中有几个日期里程碑（IE 11 月 24 日：黑色星期五）

在图表上，我试图在图表上放置一个箭头，并将标签放在日期附近的图表上方。（见附件，下面）

问题是这些是手动添加的，当我扩展图表中的数据（添加另一个月份的数据）时，图表会压缩，我的里程碑标记必须全部手动重新定位。

我怎样才能做这些里程碑标记，这样我每次展开图表时都不必手动编辑表格？可以在[此链接](http://www.lordandrei.com/Media/Sample_Issue.xlsx)中找到包含所需标签列的示例图表。

作为补充说明，我正在使用适用于 Mac 的 Office (Excel) 11。

![图表上的里程碑标记示例](../Images/fc0b6e7e6c5cbbe79a47a8f13349ad6f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:37:04.327

是否可以为里程碑使用数据标签？有一篇关于使用公式制作自定义数据标签的好文章：http: [//chandoo.org/wp/2010/05/05/change-data-labels-in-charts/](http://chandoo.org/wp/2010/05/05/change-data-labels-in-charts/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T18:48:55.870

在图表之外制作箭头和标签。用一个点绘制一个新系列，X 对应于日期，Y 适当确定（稍后我将描述）。

复制要用作里程碑的形状，选择上面添加的点，然后粘贴 (Ctrl+V)。

现在调整该点的 Y 值，使里程碑位于您想要的位置。

本教程展示了类似的方法： [使用箭头指示特殊点](http://peltiertech.com/Excel/Charts/PointAtPoints.html)

# shell - 如何在 korn shell 中转义逗号？

> ID：10818157
> 
> 赞同：2
> 
> 时间：2012-05-30T14:19:42.080
> 
> 标签：shell, ksh

以下：

```
#!/bin/sh

FOX="{ab,cd}"
echo $FOX 
```

输出我所期望的 ({ab,cd}) 但是：

```
#!/bin/ksh

FOX="{ab,cd}"
echo $FOX 
```

把逗号变成空格。为什么是这样？我似乎也无法用“\”转义逗号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T14:39:29.243

`$FOX`评估时，您将获得大括号扩展。

从 ksh 手册页：

对于表格`{*,*}`：

> 为 { 和 ,, between , and , 和 between , and } 之间的每个字符串创建一个字段。

因此，shell 正在获取您的逗号分隔列表并对其进行扩展，以便可以在例如 for 循环中使用它。

正如 shellter 在评论中所建议的那样，这可以通过`"$FOX"`在评估时双引号来解决。

# json - WebClient.DownLoadString 在我的 JSON 数据元素前面添加了 \"。如何在没有 \" 的情况下将其解析为普通 JSON？

> ID：10818160
> 
> 赞同：0
> 
> 时间：2012-05-30T14:19:56.577
> 
> 标签：json, asp.net-mvc-3, c#-4.0, getjson, restful-url

我正在尝试在我的 MVC 应用程序中访问 REST 服务。我正在调用`getJSON`方法以从控制器获取数据，该控制器在内部调用 REST 服务，该服务以**json**格式返回数据。但是我在方法`"\`的输出中得到了很多`DownLoadString`并且我的返回 Json 没有返回正确的 JSON 数据，因此我的客户端脚本无法访问 JSON 属性。

我认为我的脚本是

```
$.getJSON("@Url.Action("GetManufacturers", "Home")",function(data){
     console.debug("Status is : "+data.Status)
}); 
```

我的 Action 方法看起来像这样

```
public ActionResult GetManufacturers()
{          
        string restURL ="http://mytestserver/myapi/Manufacturers";
        using (var client = new WebClient())
        {               
            var data = client.DownloadString(restURL); 

           //data variable gets "\" everywhere
            return Json(data,JsonRequestBehavior.AllowGet);                      
        }   
} 
```

我在我的操作方法中使用了 Visual Studio 断点，我看到了很多`\"` ![在此处输入图像描述](../Images/5573f685f38283a9e0cf0d6a193e8907.png)

我检查了我的`getJSON`回调中出现的内容，并且 JSON 选项卡为空。 ![在此处输入图像描述](../Images/56628c283d00603b259d967350a894a2.png) 但是我的回复标签有这样的内容

![在此处输入图像描述](../Images/7b25abbb331da49af9907e7cab8a6422.png)

我相信如果没有\"，我将能够很好地解析它。

我使用 fiddler 来查看我是否从我的 REST 服务中获取了正确的（JSON 格式）数据，看起来还不错。

![在此处输入图像描述](../Images/b01b50868f6e8154de4dfabc7e902915.png)

谁能帮我解决这个问题？我想从我的操作方法中返回正确的 JSON。有时我可能想读取 C# 代码本身中的 json 属性。我看到了一些使用`DataContractJsonSerializer`. 但这需要一个具体的类型来转换。我不想那样做。因为其他客户端也将访问我的 RESTService 以及如何期望他们为此编写一个假实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:37:33.747

您需要按原样返回数据：

```
public ActionResult GetManufacturers()
{          
    string restURL ="http://mytestserver/myapi/Manufacturers";
    using (var client = new WebClient())
    {               
        var data = client.DownloadString(restURL); 
        return Content(data, "application/json");                      
    }   
} 
```

# php - 用于向文本链接添加类的正则表达式

> ID：10818169
> 
> 赞同：1
> 
> 时间：2012-05-30T14:20:29.670
> 
> 标签：php, regex

这是我从 stackoverflow 的其他地方获取的一段代码，并对其进行了一些修改。它为字符串中的所有链接添加一个类：

```
// adds class of ah_link to outbound links,
// This is intended as for use with tracking clicks on outbound links
private function add_tracking_link($html) {
    // no extra class on these websites!
    $follow_list = array($_SERVER['HTTP_HOST']);
    return preg_replace('%(<a\s*(?!.*\brel=)[^>]*)(href="https?://)((?!(?:(?:www\.)?'.implode('|(?:www\.)?',$follow_list).'))[^"]+)"((?!.*\brel=)[^>]*)(?:[^>]*)>%', '$1$2$3"$4 class="ah_link ">',
        $html);
} 
```

它工作得很好，但是如果已经有一个类，在这种情况下它只是使属性加倍，就会出现问题。

我想知道是否有一种方法可以将新的类值添加到已经存在的类属性中？这超出了我的正则表达式安全区。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:06:19.090

首先从 $html 中删除类属性以确保没有其他类属性，然后执行您的正则表达式，如下所示：

```
$out = preg_replace('/(<a[^>]*?)(class\s*\=\s*\"[^\"]*?\")([^>]*?>)/','$1$3',$html);
$return = preg_replace(<your regex here>,'<your replacement class here>',$out); 
```

IE：

```
$out = preg_replace('/(<a[^>]*?)(class\s*\=\s*\"[^\"]*?\")([^>]*?>)/','$1$3',$html);
return preg_replace('%(<a\s*(?!.*\brel=)[^>]*)(href="https?://)((?!(?:(?:www.)?'.implode('|(?:www\.)?',$follow_list).'))[^"]+)"((?!.*\brel=)[^>]*)(?:[^>]*)>%',
'$1$2$3"$4 class="ah_link ">',$out); 
```

# python - 未找到 Python 模块（目录问题）

> ID：10818170
> 
> 赞同：1
> 
> 时间：2012-05-30T14:20:32.103
> 
> 标签：python, python-2.5

我有一个具有以下目录结构的 Python 2.5 项目：

```
database/__init__.py
database/createDBConnection.py
gui/mainwindow.py 
```

当我尝试跑步时

```
python gui/mainwindow.py 
```

我得到错误

```
C:\PopGen>python gui/mainwindow.py
Traceback (most recent call last):
  File "gui/mainwindow.py", line 12, in <module>
    from database.createDBConnection import createDBC
ImportError: No module named database.createDBConnection 
```

在 mainwindow.py 中，第 12 行有以下语句

```
from database.createDBConnection import createDBC 
```

出现问题是因为 Python 找不到数据库模块。

问题：我该怎么做才能修复此错误？

这是项目的代码：[https ://www.dropbox.com/sh/edfutlba960atp9/MwFpaepEpl](https://www.dropbox.com/sh/edfutlba960atp9/MwFpaepEpl)

我试着用

```
C:\PopGen>python -m gui.mainwindow 
```

但得到了这些错误

```
Traceback (most recent call last):
  File "C:\Python25\lib\runpy.py", line 95, in run_module
    filename, loader, alter_sys)
  File "C:\Python25\lib\runpy.py", line 52, in _run_module_code
    mod_name, mod_fname, mod_loader)
  File "C:\Python25\lib\runpy.py", line 32, in _run_code
    exec code in run_globals
  File "C:\PopGen\gui\mainwindow.py", line 13, in <module>
    from file_menu.wizard_window_validate import Wizard
ImportError: No module named file_menu.wizard_window_validate 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:48:13.367

有几种方法可以解决这个问题，但这可能是最简单的一种。

尝试在导入失败之前将其添加到 mainwindow.py 中：

```
import sys
sys.path.append("C:/path/to/database/module") 
```

# java - 如何在 Spring 中使用 JDBCDaoSupport 使用内部 bean 将连接表数据提取到 bean 中

> ID：10818172
> 
> 赞同：1
> 
> 时间：2012-05-30T14:20:34.943
> 
> 标签：java, spring-jdbc

我有父子表。

我创建了一个父类的 bean 来保存父表数据，并且作为父类的满足，我创建了 List/Map 来保存子表数据。

我想使用连接来获取这些数据。

我可以在 spring 中使用 JDBCDaoSupport 类或 Hibernate / JPA 的干预来完成此操作吗？

提前致谢。

# android - 如何在 Android 上通过 GPS 跟踪距离？

> ID：10818178
> 
> 赞同：2
> 
> 时间：2012-05-30T14:20:45.070
> 
> 标签：android, gps, location, tracking, distance

我将如何跟踪用户行进的距离？我不一定关心存储航路点，尽管无论如何这可能是计算距离所必需的。到目前为止，我正在创建一个*LocationManager*并注册一个*onLocationChanged*侦听器，然后在侦听器触发时计算两点之间的原始距离。

这里的问题是，如果我让应用程序在桌子上静坐 10 到 15 分钟，它会说我已经旅行了 0.5 英里。我应该如何检查准确性并确定要使用的点？

或者，甚至更好 - 是否有一个 SDK 或 .jar 我可以包含在我的项目中并调用它们的函数来使整个事情变得更容易？

感谢您的时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T11:28:34.813

我不是 Android 程序员，但在我自己的嵌入式处理器中实现了这个功能，其处理能力远低于运行 Andriod 的任何东西。

这与 GPS 确定的定位精度无关。如果你有一个固定的 GPS 接收器，它可以“完美”地看到天空，并随着时间的推移绘制它报告的位置，那么你会看到它在真实位置周围徘徊，向任何方向移动几米。如果您以非常小的步长累积行进的距离，围绕真实位置，您最终会得到显然将您带到月球并返回的距离。

您需要设置一个大于 GPS 定位精度的移动阈值，然后仅在您确定已从上一个移动步骤中添加的点移动时才添加行进距离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:31:19.870

您可以在 Location 对象上调用 getAccuracy() 来检查准确性。如果您的应用程序需要真正准确，您只能对具有高精度的值进行计数。

您还可以在 LocationManager 上调用 getProviders() 来检查您是否从 wifi、gps 或两者获取坐标，如果当前未打开，请用户使用他们的 gps，以便获得更准确的点。

# hibernate - Hibernate @Embeddable 行为辅助表

> ID：10818179
> 
> 赞同：1
> 
> 时间：2012-05-30T14:20:45.177
> 
> 标签：hibernate, hibernate-mapping

我有一个非常简单的项目，有 3 个类：

```
@Entity
@Table(name = "A", uniqueConstraints = {})
@org.hibernate.annotations.Table(appliesTo = "A", indexes = {})
@SecondaryTable(name = "C", pkJoinColumns {@PrimaryKeyJoinColumn(columnDefinition = "A_ID", name = "A_ID")})
public class Machine
{
    @Id
    @GeneratedValue
    @Column(name = "A_ID", nullable = false)
    private Integer id;

    @Column(name = "a1", nullable = false)
    private Integer a1;

    @Column(name = "c1", table = "C", nullable = false)
    private Integer c1;

    @ManyToMany(fetch = FetchType.LAZY)
    @JoinTable(name = "A_B", joinColumns = {@JoinColumn(name = "A_ID")}, inverseJoinColumns = {@JoinColumn(name = "B_ID")})
    private List<B> bs = new ArrayList<B>();

}

@Entity
@Table(name = "B")
@SecondaryTable(name = "A_B", pkJoinColumns = {@PrimaryKeyJoinColumn(columnDefinition = "B_ID", name = "B_ID")})
@org.hibernate.annotations.Table(appliesTo = "B")
public class B {

    @Id
    @GeneratedValue
    @Column(name = "B_ID", nullable = false)
    private Integer id;

    @Column(name = "B_1", nullable = false)
    private Integer b1;

    @Embedded
    @AttributeOverrides({
@AttributeOverride(name = "d1", column = @Column(name = "D_1", table = "A_B")),
@AttributeOverride(name = "d2", column = @Column(name = "D_2", table = "datastore_assignment"))})
    private final D d = new D();

    }

@Embeddable
public class D
{
    private long d1;

    private long d2;
} 
```

将一个具有两个 BI 的 A 实例插入到会话中时，会期望这样：

```
A_B table
A_ID   B_ID   D_1   D_2
   1      1     1     1
   1      2     1     1 
```

但事情是这样的：

```
A_B table
A_ID   B_ID   D_1   D_2
   1      1     0     0
   1      2     0     0
   1   NULL     1     1
   1   NULL     1     1 
```

任何的想法？

谢谢！

问候。

塞达诺。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:06:03.890

问题是 A 不知道 D_1 和 D_2 并且不插入它们。并且hibernate不关心链接表和辅助表是否相同，并在保存B时将D_1 / D_2插入其中。要解决这个问题：

添加 inverse 告诉 A 它不应该插入 A_B 因为它不知道 D_1 和 D_2

```
@ManyToMany(fetch = FetchType.LAZY, mappedBy = ...)
@JoinTable(name = "A_B", joinColumns = {@JoinColumn(name = "A_ID")}, inverseJoinColumns = {@JoinColumn(name = "B_ID")})
private List<B> bs = new ArrayList<B>(); 
```

并在 B 中映射对 A 的引用

```
@ManyToOne(name = "B_1", nullable = false, table = "A_B")
private A a; 
```

确保你设置

```
a.getBs().Add(b);
b.setA(a); 
```

# asp.net-mvc - DropdownListFor中的MVC3 Razor SelectedValue

> ID：10818182
> 
> 赞同：1
> 
> 时间：2012-05-30T14:20:47.780
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, razor, html.dropdownlistfor

我有以下代码 a`DropDownListFor`并且工作正常

```
@Html.DropDownListFor(Function(model) model.Habilitacoes, New SelectList(ViewBag.Habilitacoes, "KeyHL", "DescricaoHL"), New With {.class = "FillHSpace"}) 
```

是`ViewBag.Habilitacoes`一个`List(Of T)`

但是知道我想添加`SelectedValue`到 中`DropDownListFor`，所以我使用了以下代码但不起作用。

```
@Html.DropDownListFor(Function(model) model.Habilitacoes, New SelectList(ViewBag.Habilitacoes, "KeyHL", "DescricaoHL", model.Habilitacoes), New With {.class = "FillHSpace"}) 
```

我该如何申报`SelectedValue`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:32:43.207

您不应使用与 DropDownListFor 帮助器的第一个和第二个参数相同的属性。第一个参数是标量属性，第二个参数是集合：

```
@Html.DropDownListFor(Function(model) model.SelectedHabilitacoes, New SelectList(ViewBag.Habilitacoes, "KeyHL", "DescricaoHL"), New With {.class = "FillHSpace"}) 
```

然后在你的控制器中：

```
model.SelectedHabilitacoes = "123" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:34:03.187

DropdownListFor 有重载来完成这个

```
DropDownListFor([SelectedValue], [SelectList], optional HTML Attributes) 
```

通常你会去

```
DropDownListFor(model => model.ID, (SelectList)ViewsBag.MySelectList, optional HTML Attributes) 
```

选中的值会自动绑定到下拉列表，并且会自动贴出model.ID的值

如果这没有帮助，请您发布您的模型。

# html - 如何正确应用css位置：绝对？

> ID：10818183
> 
> 赞同：0
> 
> 时间：2012-05-30T14:20:50.513
> 
> 标签：html, css, position, absolute

问题是 div，称为“dragger_container”的行为不像我预期的那样，并且从父 div 中出来。这是不可接受的，因为它是一个显示用户滚动进度的元素（它是一个 jquery 插件 mCustomScrollBar）并与用户交互。
向任何人寻求帮助。
提前致谢

ps 无法附加信誉的屏幕原因，在此处上传： [screen_url](http://imageshack.us/f/651/60357048.jpg/)

```
.mcs_my_container
{
width: 100%;
height: 100%;
}

.mcs_my_container .customScrollBox
{
margin-top: 10px;
position: relative;
height: 80%;
width: 100%;
overflow:hidden;
border: 1px solid green;
display: block;
}

.mcs_my_container .customScrollBox .container
{
position: absolute;
width: 70%;
top: 0;
float: left;
margin-left: 20px;
}

.mcs_my_container .customScrollBox .content
{
clear: both;
}

.mcs_my_container .dragger_container
{
position: absolute;
/*top: 10px !important;*/
width: 2px;
/*height: 50px;50px
height: 100%;*/
height: 110px;
top: 0px;
right: 20px;
float: right;
background: #000;
cursor: s-resize;
-moz-border-radius: 2px;
-khtml-border-radius: 2px;
-webkit-border-radius: 2px;
border-radius: 2px;
cursor: s-resize;
}

.mcs_my_container .dragger
{
position: absolute;
width: 4px;
/*height: 100%;*/
height: 10px;/* !important;*/
background: #999;
text-align: center;
line-height: 10px;
color: #666;
overflow: hidden;
cursor: pointer;
-moz-border-radius: 2px;
-khtml-border-radius: 2px;
-webkit-border-radius: 2px;
border-radius: 2px;
margin-left: -1px;
}

.mcs_my_container .dragger_pressed
{
position: absolute;
width: 6px;
margin-left: -2px;
height: 10px;
background: #999;
text-align: center;
line-height: 10px;
color: #666;
overflow: hidden;
-moz-border-radius: 4px;
-khtml-border-radius: 4px;
-webkit-border-radius: 4px;
border-radius: 4px;
cursor: s-resize;
}

.divNoteText
{
position: static;
border: 1px solid red;
word-wrap: break-word;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:55:27.123

您需要添加到您希望将其定位在其中`position: relative`的父容器中。`dragger_container`

如果你不这样做，那么`dragger_container`将绝对定位到最近的相对定位的父元素，或者如果没有，那么它将定位在`body`.

# datetime - 获取 PHP DatePeriod 对象的开始和结束日期？

> ID：10818187
> 
> 赞同：5
> 
> 时间：2012-05-30T14:21:06.957
> 
> 标签：datetime, date, php

如何获取`DatePeriod`对象的开始和结束日期？

```
$today  = new \DateTime(date('Y-m-d')); // 2012-05-30
$period = new \DatePeriod($today, new \DateInterval('P1M'), 1);

$stats = new UsageStatistics($period);

class UsageStatistics
{

    protected $period, $sentEmailCount, $autoSentEmailCount;

    public function __construct(\DatePeriod $period)
    {
        $this->period = $period;

        // Current logged in user and email repository
        $user = $this->getUser();
        $repo = $this->getEmailRepository();

        // Get the start and end date for the given period
        $startDate = ...
        $endDate   = ...

        $result = $repo->getAllSentCount($user, $startDate, $endDate);

        // Assigning object properties
    }

    public function getSentEmailCount() { return $this->sentEmailCount; }

    public function getAutoSentEmailCount() { return $this->autoSentEmailCount; }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T15:03:59.957

[`DatePeriod`](http://php.net/DatePeriod)仅实现 Traversable 接口，没有其他方法可以访问或检索元素。

您可以做一些简单的事情来获取开始/结束日期：

```
$periodArray = iterator_to_array($period);
$startDate = reset($periodArray);
$endDate = end($periodArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-08T19:50:24.323

我正在使用 PHP 5.6.9，您似乎可以使用这些属性`end`并`start`访问您的开始和结束`DateTime`对象：

```
$p = new DatePeriod($s, $i, $e);
$startTime = $p->start; //returns $s
$endTime = $p->end; //returns $e 
```

PHP 文档似乎没有反映这一点。我做了`print_r`一个 DatePeriod 对象并得到以下输出：

```
DatePeriod Object
(
    [start] => DateTime Object
        (
            [date] => 2015-06-01 00:00:00.000000
            [timezone_type] => 3
            [timezone] => America/Los_Angeles
        )

    [current] => DateTime Object
        (
            [date] => 2015-06-08 00:00:00.000000
            [timezone_type] => 3
            [timezone] => America/Los_Angeles
        )

    [end] => DateTime Object
        (
            [date] => 2015-06-08 00:00:00.000000
            [timezone_type] => 3
            [timezone] => America/Los_Angeles
        )

    [interval] => DateInterval Object
        (
            [y] => 0
            [m] => 0
            [d] => 7
            [h] => 0
            [i] => 0
            [s] => 0
            [weekday] => 0
            [weekday_behavior] => 0
            [first_last_day_of] => 0
            [invert] => 0
            [days] => 
            [special_type] => 0
            [special_amount] => 0
            [have_weekday_relative] => 0
            [have_special_relative] => 0
        )

    [recurrences] => 1
    [include_start_date] => 1
) 
```

似乎属性`current`和`interval`也是可见的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T21:21:44.637

@hakre 和 @Boby 发布的解决方案不正确。

是期间的`$endDate`结束`PERIOD % INTERVAL = 0`。

所有其他情况`$endDate`都是`END - PERIOD`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-28T20:22:56.123

```
$startingDate = new DateTime($startingDay);
$startingDate->modify('previous day');
$startingDate->modify('next Sunday');

$endingDate   = new DateTime($endingDay);
$endingDate->modify('next day');

$period = new DatePeriod($startingDate, new DateInterval('P1W'), $endingDate); 
```

# .htaccess - 移动网站格式

> ID：10818189
> 
> 赞同：1
> 
> 时间：2012-05-30T14:21:13.930
> 
> 标签：.htaccess, mobile, subdomain, cname

我正在为我当前的网站构建一个移动网站，需要一些指导：

1.  是否可以将我所有的移动文件放在一个名为 mobile 的文件夹中，然后设置 .htaccess 以重定向带有前缀 m 的 url。到文件夹？
2.  是否也可以从 url 中隐藏子文件夹名称，而不是 www.website.com/folder/index.php 来拥有 m.website.com/index.php？
3.  过度使用 .htaccess 是否有任何处理器故障？

如果有人能解释这些指针，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:15:17.637

1.  是的，这是可能的 - 您可以将 %{HTTP_USER_AGENT} 与移动浏览器匹配并将它们重定向到 m.website.com 。
2.  是的，可以隐藏文件夹 - 只需重写并添加文件夹名称
3.  不是真的，至少对于这两个规则来说不是。如果您有几十条规则，则可能会放缓。

要隐藏文件夹，您可以使用以下内容：

```
RewriteCond %{HTTP_HOST} ^m\.website\.com$
RewriteRule ^(.*)$ folder/$1 [L,QSA] 
```

# php - CodeIgniter 文件输入未被拾取

> ID：10818197
> 
> 赞同：2
> 
> 时间：2012-05-30T14:21:21.703
> 
> 标签：php, codeigniter

我有一个简单的图片上传表单，它没有检测到正在发布的图片。我确定我缺少某些东西，但我似乎无法找到它。下面的代码：

表格文件：

```
<?php echo form_open_multipart( 'account/uploadimage' ) ?>

    <?php echo form_label('Image', 'userfile'); ?>

    <input name="userfile" type="file" />                   

    <div class="formSubmit clearfix">
        <?php echo form_submit('submit', 'Update'); ?>
    </div>

<?php echo form_close(); ?> 
```

控制器“/account/uploadimage”

```
var_dump( $this->input->post('userfile') ); // bool(false)
echo "<hr>";
var_dump( $_FILES['userfile']['name'] ); // The info I'm after 
```

我想使用 Codeigniter 工具，所以需要 $this->input->post('userfile') 才能工作。

关于为什么它给我错误的任何想法？

谢谢

保罗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T14:23:26.083

这不起作用：

```
var_dump( $this->input->post('userfile') ); 
```

因为用户上传的文件存储在 $_FILES 变量中，而不是 $_POST

只需使用 codeigniter 的上传库

[http://codeigniter.com/user_guide/libraries/file_uploading.html](http://codeigniter.com/user_guide/libraries/file_uploading.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:25:59.057

使用这样的东西---

```
 if( ! is_dir(UPLOAD_PATH.'folder') ){mkdir(UPLOAD_PATH.'folder',0777,TRUE); };      
    $path=UPLOAD_PATH.'folder/';        
    $imgtmpname=$_FILES['eposter']['tmp_name'];
    $fullpath= $path .$imgname;
    $filename = $imgname;

    move_uploaded_file($imgtmpname,$fullpath); 
```

# mysql - 在sql查询中将列数据类型从varchar转换为Date

> ID：10818203
> 
> 赞同：0
> 
> 时间：2012-05-30T14:21:34.237
> 
> 标签：mysql, sql, jdbc

我有一个数据类型为 Varchar 的列，我使用一个选择查询，它根据该列从给定范围中获取数据。现在我想将此列从 varchar 转换为日期，以便我的查询正常工作。我使用 Mysql 作为后端数据库。我不想在 Mysql Schema 中将列数据类型更改为 Date 但在运行时通过一些 sql 函数进行更改

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:29:39.580

使用 CAST()

[http://forums.devshed.com/firebird-sql-development-61/casting-a-varchar-to-date-477361.html](http://forums.devshed.com/firebird-sql-development-61/casting-a-varchar-to-date-477361.html) http://dev.mysql.com/doc/refman/5.5/en/cast -functions.html#function_cast

# iphone - 在 iOS 上创建 Excel XLS 文件

> ID：10818207
> 
> 赞同：9
> 
> 时间：2012-05-30T14:21:44.953
> 
> 标签：iphone, objective-c, ios, xml, xls

我正在尝试创建 Excel 格式的报告，准备通过电子邮件发送。到目前为止，我发现最好和最简单的方法是如下创建一个xml文档并将其保存为xls。

```
<?xml version="1.0"?>
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:html="http://www.w3.org/TR/REC-html40"> 
    <Worksheet ss:Name="Sheet1"> 
        <Table ss:ExpandedColumnCount="2" ss:ExpandedRowCount="2" x:FullColumns="1" x:FullRows="1"> 
            <Row> 
                <Cell><Data ss:Type="String">Name</Data></Cell>
                <Cell><Data ss:Type="String">Example</Data></Cell>
            </Row>
            <Row>
                <Cell><Data ss:Type="String">Value</Data></Cell>
                <Cell><Data ss:Type="Number">123</Data></Cell>
            </Row> 
        </Table>
    </Worksheet> 
</Workbook> 
```

然后我可以使用

```
NSArray *documentDirectoryPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *docDir = [NSString stringWithFormat:@"%@/Report.xls", [documentDirectoryPath objectAtIndex:0]];
        [xmlString writeToFile:docDir atomically:YES encoding:NSUTF8StringEncoding error:NULL];
        [serializedData writeToFile:docDir atomically:YES]; 
```

但是，在我发送电子邮件并尝试打开 xls 文件后，xml 会显示在电子表格中。谁能引导我找到正确的方向来创建这个 xls 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-04T16:14:41.363

我尝试了与OP相同的东西，然后放弃了。我最终使用 libxls 打开和读取 xls 文件，并使用 csv 写出文件。（libxls 不能写 xls，只能读）。

[http://libxls.sourceforge.net](http://libxls.sourceforge.net)

我还没有尝试过，但是 xlslib 声称可以编写 excel 文件。它在 2014 年 1 月 6 日有更新说它可以在 iOS 中运行：

[http://sourceforge.net/projects/xlslib/files/](http://sourceforge.net/projects/xlslib/files/)

另外，请阅读为什么编写 excel 文件如此困难，因为它既真实又有趣： [http ://www.joelonsoftware.com/items/2008/02/19.html](http://www.joelonsoftware.com/items/2008/02/19.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T21:27:28.187

尝试在文档顶部添加以下特殊标签：

```
<?xml version="1.0"?>
<?mso-application progid="Excel.Sheet"?>
[...] 
```

我刚刚用你的 XML 尝试了这个标签，它在我的 Windows7 机器上运行——我将你的文档保存为“test.excel.xml”——这个`<?mso...>`标签足以让 Windows 将格式识别为 Excel。

这里也有一个例子：[http ://en.wikipedia.org/wiki/Microsoft_Office_XML_formats](http://en.wikipedia.org/wiki/Microsoft_Office_XML_formats)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-29T12:52:22.423

# 这是创建 XLS 文件的代码

```
 NSMutableString *stringToWrite = [[NSMutableString alloc] init];
 [stringToWrite appendString:[NSString stringWithFormat:@"First Name /t Last Name /t Full Name /tPhone Number /tEmail /t Job/t organizationName /tNote\n\n"]];
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
      for(int i = 0 ;i<[Contact count];i++)     {
           [stringToWrite appendString:[NSString stringWithFormat:@"%@/t",[[Contact objectAtIndex:i] valueForKey:@"firstName"] ]];
           [stringToWrite appendString:[NSString stringWithFormat:@"%@/t",[[Contact objectAtIndex:i] valueForKey:@"lastName"] ]];
           [stringToWrite appendString:[NSString stringWithFormat:@"%@/t",[[Contact valueForKey:@"userName"] objectAtIndex:i]]];
           [stringToWrite appendString:[NSString stringWithFormat:@"%@/t",[[Contact objectAtIndex:i] valueForKey:@"phoneNumber"] ]];
           [stringToWrite appendString:[NSString stringWithFormat:@"%@/t",[[Contact objectAtIndex:i] valueForKey:@"emailAddress"] ]];
           [stringToWrite appendString:[NSString stringWithFormat:@"%@/t",[[Contact objectAtIndex:i] valueForKey:@"jobTitle"] ]];
           [stringToWrite appendString:[NSString stringWithFormat:@"%@/t",[[Contact  objectAtIndex:i] valueForKey:@"organizationName"] ]];
           [stringToWrite appendString:[NSString stringWithFormat:@"%@\n",[[Contact objectAtIndex:i] valueForKey:@"note"] ]];
      }
      dispatch_async(dispatch_get_main_queue(), ^(void) {
           NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);
           NSString *documentDirectory=[paths objectAtIndex:0];
           NSString *strBackupFileLocation = [NSString stringWithFormat:@"%@/%@", documentDirectory,@"ContactList.xls"];
           [stringToWrite writeToFile:strBackupFileLocation atomically:YES encoding:NSUTF8StringEncoding error:nil];
      });
 }); 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-02-12T09:12:02.443

尝试创建 CSV 文件格式，这将是最好的方法

# c# - 实体框架中的长连接呢？

> ID：10818210
> 
> 赞同：-3
> 
> 时间：2012-05-30T14:21:55.380
> 
> 标签：c#, entity-framework

看起来非常乏味！我有一个九表连接来连接在一起，其中两个表是内连接，其余 6 个是左外连接。

它在实体中可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:26:55.653

这不完全是一个问题，但可以说是。使用 Entity Framework 一切都是可行的，但请先在这里查看[http://www.sqlmag.com/article/entity-framework/microsofts-entity-framework-dbas-141208](http://www.sqlmag.com/article/entity-framework/microsofts-entity-framework-dbas-141208)以获得性能建议。

# .net - 反应式扩展是开源的吗？

> ID：10818214
> 
> 赞同：6
> 
> 时间：2012-05-30T14:22:11.183
> 
> 标签：.net, system.reactive

反应式扩展是开源的吗？微软会开源吗？

我正在寻找阅读源代码以更好地了解它是如何实现的。我想看看单元测试，所以我可以针对我自己的一些代码运行它们，重新实现一些`Reactive.Linq`.

我知道 Microsoft 开源 F#，这对开发人员来说很方便[https://github.com/fsharp/fsharp](https://github.com/fsharp/fsharp)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T13:59:13.157

如果你错过了，Rx 现在是开源的：http: [//blogs.msdn.com/b/interoperability/archive/2012/11/06/ms-open-tech-open-sources-rx-reactive -extensions-a-cure-for-asynchronous-data-streams-in-cloud-programming.aspx](http://blogs.msdn.com/b/interoperability/archive/2012/11/06/ms-open-tech-open-sources-rx-reactive-extensions-a-cure-for-asynchronous-data-streams-in-cloud-programming.aspx)

1.  [http://rx.codeplex.com/](http://rx.codeplex.com/)
2.  [https://github.com/Reactive-Extensions/Rx.NET](https://github.com/Reactive-Extensions/Rx.NET)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T14:26:37.417

**2012 年7 月 11 日更新：**忘了这个，它现在是开源的，耶！

[https://rx.codeplex.com/](https://rx.codeplex.com/)

[https://github.com/Reactive-Extensions/Rx.NET](https://github.com/Reactive-Extensions/Rx.NET)

这还包括交互式扩展。

* * *

快速搜索不会抛出任何 CodePlex 链接，所以我要说它不是开源的。

Bart De Smet 制作了大量关于 Rx 及其工作原理和使用方法的视频：

[http://channel9.msdn.com/Tags/reactive+extensions](http://channel9.msdn.com/Tags/reactive+extensions)

要查看内部结构，如果您知道存储它的程序集，唯一剩下的选择是使用[ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)或[dotPeek](http://www.jetbrains.com/decompiler/)之类的工具对其进行反汇编。

微软会开源吗？他们不久前发布了 .NET 源代码，也许他们也会这样做。这与开源不同，但您至少可以进入代码并了解它的全部内容。我没有去寻找，但 Rx 的东西可能已经在那里了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T06:25:51.347

只有 Rx 的 JavaScript 实现是开源的。[https://github.com/Reactive-Extensions](https://github.com/Reactive-Extensions)

# html - 奇怪的锚行为

> ID：10818215
> 
> 赞同：0
> 
> 时间：2012-05-30T14:22:15.520
> 
> 标签：html

我在“http://test.com/mypage”页面上有一个带有“#myanchor”的链接。它会让我转到“http://test.com/mypage#myanchor”，对吗？但我对这个锚点有疑问，将我移至索引页面“http://test.com#myanchor”。

你能解释一下为什么吗？

谢谢。

**编辑**

哈，我在页面上发现了一些奇怪的代码：

```
var base = document.domain;
var port = window.location.port
document.write('<base href="http://' + base + (port?':':'') + port + '" />'); 
```

问题已解决。

@Surreal Dreams，如果你愿意，你可以解释它是什么，我会选择你的答案:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:26:31.900

原因，test.com 默认加载 index.html。所以 test.com/#myanchor 和 test.com/index.html#myanchor 是一样的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:25:10.513

你确定你的链接没有设置为`href="/#myanchor"`？这将导致您定位到`http://test.com#myanchor`.

如果您可以显示实际的 HTML，我可以给您一个更明确的答案，但这是可能的原因。

# javascript - 从 DOM 中删除不在元素中的文本

> ID：10818216
> 
> 赞同：1
> 
> 时间：2012-05-30T14:22:25.367
> 
> 标签：javascript, jquery, asp.net-mvc

我遇到了一种情况（有点失控），在渲染 HTML 时，调试文本被插入到我的 DOM 中。文本如下所示：

```
, NameSpace.ClassName, Version=x.x.x.x, Culture=neutral, PublicKeyToken=null 
```

文本只是内联呈现，而不是在元素中。如果它至少放在 a`div`或 a中`span`，我可以做点什么，但它只是`body`加载模块的地方的一部分。所以首先我尝试了以下方法：

```
var goodText = $('body').html();
goodText = goodText.replace(/, Plugin.[a-zA-Z0-9]*, Version=\d\.\d\.\d\.\d, Culture=neutral, PublicKeyToken=null/g, '');
$('body').html(goodText); 
```

虽然这将文本从混合中删除，但它正在替换整个`body`文档，因此 jQuery 的文档准备就绪再次触发。我的其他脚本开始像北极的小骆驼一样哭泣，页面分崩离析。

页面的典型块如下所示，作为模块的输出：

```
<div class="row">
  , NameSpace.ClassName, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null 
  <div> some stuff</div>
  <script> $(function(){ // some script }); </script>
</div> 
```

因此，即使我将目标`.row`替换为上面的 regex/string.replace 文本并在元素上设置 HTML，该 jQuery 块也会再次执行。说白了就是一大堆胡闹的涂鸦。

另一方面，我正在使用 RazorGenerator 加载模块，以在 Asp.Net MVC4 项目中构建 DLL 和 BoC 的预编译视图。

我还尝试使用自定义 ActionFilterAttribute 的类级实现，但其中没有任何内容可以捕获/覆盖实际生成/渲染此文本的位置。

我在这里有什么选择？我可以用另一种方式清除该文本吗？我可以再次阻止该脚本块的执行吗？我在 ASP.NET 请求管道中是否有任何其他选项可以让我使用该恶魔文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:41:03.110

```
$("body").contents().filter( function(){
    return this.nodeType === 3 && /Version=\d\.\d\.\d\.\d/.test(this.nodeValue);
}).remove(); 
```

编辑：由于看起来文本可能不在正文的正下方，我们需要遍历整个 dom：

```
function walk( root ) {

    $( root ).contents().each( function() {

        if( this.nodeType === 1 && this.nodeName.toLowerCase() !== "iframe" ) {
            walk( this );
        }
        else if( this.nodeType === 3  && /Version=\d\.\d\.\d\.\d/.test(this.nodeValue)) {
            $(this).remove();
        }
    });
}

walk( "body" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:44:05.013

[这是一个](http://jsfiddle.net/9YQ7h/)基于@Pointy 建议的工作jsfiddle。根据您的具体细节调整您的正则表达式。

```
//This is from http://stackoverflow.com/a/4399718/266795
var getTextNodesIn = function(el) {
    return $(el).find(":not(iframe)").andSelf().contents().filter(function() {
        return this.nodeType == 3;
    });
};

$(function () {
  getTextNodesIn("body").each(function (index, node) {
      if (/.*, NameSpace/.test(node.textContent)) {
         $(node).remove();              
      }
  });
});​ 
```

# android - 用于图形可视化的 Android 2D 框架

> ID：10818217
> 
> 赞同：2
> 
> 时间：2012-05-30T14:22:35.203
> 
> 标签：android, graphics, frameworks, 2d, visualization

我将在接下来的几周内从事一个关于安卓平板电脑和移动设备的可视化项目。这是一种有 web 服务调用、数据库和少量处理但有大量数据可视化和操作的项目。主要是 2D（高级图表和高级图表）。像[http://max-planck-research-networks.net/](http://max-planck-research-networks.net/)。

我想知道 android 上是否有一些框架可以加速我的开发。我听说过游戏引擎（如 AndEnine 和 cocos），但我正在寻找更像 processing.org 的东西。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:37:14.843

您也许可以使用像[http://code.google.com/p/achartengine/](http://code.google.com/p/achartengine/)或[http://code.google.com/p/chartdroid/这样的图形库](http://code.google.com/p/chartdroid/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T14:46:51.367

我目前也在寻找可以做到这一点的框架。到目前为止，我能找到的最好的是 JUNG (http://jung.sourceforge.net/)。JUNG 在其渲染器中使用了 swing，因此要在 android 中使用它，需要构建一个新的渲染器。

# liferay - PortletURLListener 是做什么用的？我可以在钩子中使用它吗？

> ID：10818219
> 
> 赞同：4
> 
> 时间：2012-05-30T14:22:37.487
> 
> 标签：liferay, liferay-6

有人可以给我一个关于如何使用的用例`PortletURLListener`吗？如果它可以使用吗？

像我们有`ModelListener`我们也可以使用`PortletURLListener`吗？

就像`ModelListener`我们可以在创建模型、更新模型或删除等时注入功能一样。

1.  那么我们是否可以像调用特定 URL 时一样使用`PortletURLListener`相同的方式`ModelListener`来做某事？如果没有，还有其他方法`PortletURLListener`吗？由于这个名字是这样的，我认为这可能会有所帮助。
2.  我们可以在钩子中使用它吗？或者它只是被Liferay使用？您通过扩展或使用此类看到或实现的任何其他实际用例？

提前致谢。

感谢马克的提示:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:56:54.433

例如`PortletURLListener`，Liferay 核心用于部署和取消部署。有关更多详细信息，请参阅 Liferay 来源`PortletHotDeployListener`：

[https://github.com/liferay/liferay-portal/blob/master/portal-impl/src/com/liferay/portal/deploy/hot/PortletHotDeployListener.java](https://github.com/liferay/liferay-portal/blob/master/portal-impl/src/com/liferay/portal/deploy/hot/PortletHotDeployListener.java)

更新后回复：

您可以创建钩子并将`servlet.service.events.post=com.my.MyAfterChangeAction`属性放入`portal.properties`. MyAfterChangeAction 类必须实现`com.liferay.portal.kernel.events.Action`。

# jmeter - JMeter - CSV 数据集配置未能找到 CSV

> ID：10818221
> 
> 赞同：0
> 
> 时间：2012-05-30T14:22:44.813
> 
> 标签：jmeter

我正在尝试在 JMeter 中加载我的 CSV 文件，但我不断收到以下错误。我将文件结构设置为

> c:\claimstest\claimsload.jmx
> 
> c:\claimstest\policies.csv

任何帮助将不胜感激。我还附上了 CSV 数据集配置的屏幕截图![在此处输入图像描述](../Images/017d904c13bb1767d92331381d8cf26b.png)

```
2012/05/30 10:09:20 INFO  - jmeter.threads.JMeterThread: Thread finished: Thread Group 1-1 
2012/05/30 10:09:20 INFO  - jmeter.engine.StandardJMeterEngine: Ending thread Thread Group 1-1 
2012/05/30 10:09:20 INFO  - jmeter.engine.StandardJMeterEngine: Notifying test listeners of end of test 
2012/05/30 10:09:20 INFO  - jmeter.services.FileServer: Close: policies.csv 
2012/05/30 10:09:20 INFO  - jmeter.gui.util.JMeterMenuBar: setRunning(false,*local*) 
2012/05/30 10:09:20 INFO  - jmeter.engine.StandardJMeterEngine: Test has ended on host null 
2012/05/30 10:15:17 INFO  - jmeter.engine.StandardJMeterEngine: Running the test! 
2012/05/30 10:15:17 INFO  - jmeter.gui.util.JMeterMenuBar: setRunning(true,*local*) 
2012/05/30 10:15:17 INFO  - jmeter.engine.StandardJMeterEngine: Starting 1 threads for group Thread Group. 
2012/05/30 10:15:17 INFO  - jmeter.engine.StandardJMeterEngine: Thread will continue on error 
2012/05/30 10:15:18 INFO  - jmeter.engine.StandardJMeterEngine: All threads have been started 
2012/05/30 10:15:18 INFO  - jmeter.threads.JMeterThread: Thread started: Thread Group 1-1 
2012/05/30 10:15:18 INFO  - jmeter.services.FileServer: Stored: policies.csv 
2012/05/30 10:15:18 INFO  - jmeter.services.FileServer: Stored:  
2012/05/30 10:15:18 ERROR - jmeter.threads.JMeterThread: Test failed! java.lang.IllegalArgumentException: Could not read file header line
    at org.apache.jmeter.services.FileServer.reserveFile(FileServer.java:275)
    at org.apache.jmeter.config.CSVDataSet.iterationStart(CSVDataSet.java:132)
    at org.apache.jmeter.control.GenericController.fireIterationStart(GenericController.java:387)
    at org.apache.jmeter.control.GenericController.fireIterEvents(GenericController.java:379)
    at org.apache.jmeter.control.GenericController.next(GenericController.java:144)
    at org.apache.jmeter.control.GenericController.nextIsAController(GenericController.java:200)
    at org.apache.jmeter.control.GenericController.next(GenericController.java:162)
    at org.apache.jmeter.control.LoopController.next(LoopController.java:108)
    at org.apache.jmeter.threads.AbstractThreadGroup.next(AbstractThreadGroup.java:75)
    at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:268)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.io.FileNotFoundException: C:\claimstest (Access is denied)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(Unknown Source)
    at org.apache.jmeter.services.FileServer.createBufferedReader(FileServer.java:341)
    at org.apache.jmeter.services.FileServer.readLine(FileServer.java:318)
    at org.apache.jmeter.services.FileServer.readLine(FileServer.java:302)
    at org.apache.jmeter.services.FileServer.reserveFile(FileServer.java:273)
    ... 10 more

2012/05/30 10:15:18 INFO  - jmeter.threads.JMeterThread: Thread finished: Thread Group 1-1 
2012/05/30 10:15:18 INFO  - jmeter.engine.StandardJMeterEngine: Ending thread Thread Group 1-1 
2012/05/30 10:15:18 INFO  - jmeter.engine.StandardJMeterEngine: Notifying test listeners of end of test 
2012/05/30 10:15:18 INFO  - jmeter.services.FileServer: Close: policies.csv 
2012/05/30 10:15:18 INFO  - jmeter.gui.util.JMeterMenuBar: setRunning(false,*local*) 
2012/05/30 10:15:18 INFO  - jmeter.engine.StandardJMeterEngine: Test has ended on host null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-23T06:40:43.740

如果有人遇到这样的错误，请尝试以管理员权限启动 apache J-meter。您只需要说“以管理员身份运行”就可以了，它接受 bin 目录或系统中任何地方提供的 csv 路径。这个对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-03T10:32:49.847

您使用带有空**文件名**("")的**CSV 数据集配置。**JMeter 尝试从路径读取 CSV 文件。但是“ ”是目录。**`{current directory} + "" = "C:\claimstest"``C:\claimstest`**

 **JMeter 写入错误：

> 原因：java.io.FileNotFoundException: C:\claimstest（访问被拒绝）

使用`Ctrl+F`并找到“ `CSV`”。您发现**CSV Data Set Config的****Filename**为空，将其删除。**

# regex - htaccess：将所有路径重定向到不同的结构

> ID：10818223
> 
> 赞同：0
> 
> 时间：2012-05-30T14:22:54.150
> 
> 标签：regex, apache, .htaccess, mod-rewrite

我希望将我所有的图像、css 路径更改为正确的文件夹结构。我使用了下面的代码。不幸的是，什么也没发生。我已经搜索并尝试了不同的解决方案，但没有一个对我有用。有任何想法吗？

```
RewriteEngine On
RewriteBase /
RewriteRule ^/example/$ /singlepage/folder.sub/example/$1 [L] 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:46:26.463

将重写规则更改为：

```
RewriteRule ^(example/.*)$ singlepage/folder.sub/$1 [L,NC] 
```

并记住 RewriteRule 开始匹配时没有`/`来自 REQUEST_URI 的前导斜杠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:24:45.047

您可能需要更改`^/example/$`为`^/example/(.*)`，否则您的规则仅匹配路径`/example/`而不匹配`/example/somethingelse`，并且您没有捕获`$1`规则中的替换。

# iphone - 如何将 uiimage 从其框架中取出？

> ID：10818224
> 
> 赞同：0
> 
> 时间：2012-05-30T14:22:56.477
> 
> 标签：iphone, uiimage, frame, uipangesturerecognizer

如何使用 UIPanGestureRecognizer 将图像带出其框架。一旦出框架仍然收到触摸？如果它没有收到触摸，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:27:38.163

您可以使用另一个视图（不可见的）来获取手势，然后更改图像的框架或大小

# c++ - CUDA：获取 3D 表面的子集

> ID：10818225
> 
> 赞同：0
> 
> 时间：2012-05-30T14:22:57.100
> 
> 标签：c++, c, 3d, cuda, geometry-surface

我想渲染一些 3d 表面的切片。

```
cudaArray* surfArray;
cudaChannelFormatDesc channelDesc = cudaCreateChannelDesc(8, 8, 8, 8, cudaChannelFormatKindUnsigned);
cudaExtent surfSize = make_cudaExtent(640,480,2);
cudaMalloc3DArray(&surfArray,&channelDesc,surfSize,cudaArraySurfaceLoadStore); 
```

因此，我尝试通过 MemcpyArrayToArray() 和偏移量获取子集。

```
cudaGraphicsSubResourceGetMappedArray(&cu_rgbArray,tex_rgb,0,0);
cudaMemcpyArrayToArray(cu_rgbArray,0,0,surfArray,0,0,640*480*sizeof(uchar4),cudaMemcpyDeviceToDevice);

cudaGraphicsSubResourceGetMappedArray(&cu_depthArray,tex_depth,0,0);
cudaMemcpyArrayToArray(cu_depthArray,0,0,surfArray,640,480,640*480*sizeof(uchar4),cudaMemcpyDeviceToDevice); 
```

然而，当第一个 memcpy 成功时，第二个失败了。（如果偏移量为 0,0，它确实会成功）。

任何想法如何在没有额外内核的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T02:55:25.160

我相信你应该使用`cudaMemcpy3D`，而不是`cudaMemcpyArrayToArray`。

# c# - 如何检查网络上的计算机是否在线？

> ID：10818229
> 
> 赞同：9
> 
> 时间：2012-05-30T14:23:10.497
> 
> 标签：c#, .net

我想知道如何检查我网络上的机器是否在线，只使用 C#。

我网络上的所有机器都使用相同的操作系统（Windows 7），并且我在所有机器上都以相同的用户身份登录。

我的目标是检查它们是否处于活动状态或打开状态。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-30T14:31:30.937

简单的：

```
Ping ping = new Ping();
PingReply pingReply = ping.Send("ip address here");

if(pingReply.Status == IPStatus.Success)
{
   //Machine is alive
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T14:30:59.400

如果不在目标机器上安装一些自定义软件，您可能希望的最好的方法是[使用 Ping 类。](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.ping.aspx)

一个快速而肮脏的实现可能如下所示：

```
var p = new Ping();
if(p.Send("HostNameOrIP").Status != Success) return; 
```

如果您对什么是“活动和打开”机器有非常具体的要求，并且只能在本地检测状态，则需要编写一个将公开 WCF 服务的 Windows 服务。此服务将在目标计算机上运行，​​并在源计算机请求时报告本地状态。

# python - make 不运行 .py 文件

> ID：10818231
> 
> 赞同：2
> 
> 时间：2012-05-30T14:23:11.323
> 
> 标签：python, numpy, makefile, f2py

我正在尝试使用 Fortran 代码创建一个 Python 模块`f2py`。我已经为我的项目设置了一个 Makefile。我在 Windows 7 上使用 MinGW 和 Python 3.2.2。当我运行

```
f2py.py -c --compiler=mingw32 -m itf itimes-f.f 
```

一切都编译并运行良好。但是，当我在 Makefile 中创建目标并运行它时，它会执行以下操作：

```
> make compilef
f2py.py -c --compiler=mingw32 -m itf itimes-f.f
process_begin: CreateProcess(NULL, env python.exe C:\Python32\Scripts\f2py.py -c
 --compiler=mingw32 -m itf itimes-f.f, ...) failed.
make (e=2): The system cannot find the file specified.
make: *** [compilef] Error 2 
```

为什么不`make`运行命令，我该如何解决？

**编辑：**运行输出中显示的命令不起作用：

```
> env python.exe C:\Python32\Scripts\f2py.py -c --compiler=mingw32 -m itf itimes-f.f
'env' is not recognized as an internal or external command,
operable program or batch file. 
```

但是，以下方法确实有效：

```
> python.exe C:\Python32\Scripts\f2py.py -c --compiler=mingw32 -m itf itimes-f.f 
```

**编辑 2：**这引发了另一个问题 - 什么是`env`以及为什么要`make`添加它？

**编辑 3：**根据 Florian 的评论，似乎是`env`由于`make`f2py.py 中存在 shebang 行而添加的。`#`我编辑了 f2py.py，在 shebang 前面添加了一个附加项。我现在有以下问题：

```
>make compilef
f2py.py -c --compiler=mingw32 -m itf itimes-f.f
process_begin: CreateProcess(C:\Python32\Scripts\f2py.py, f2py.py -c --compiler=
mingw32 -m itf itimes-f.f, ...) failed.
make (e=193): Error 193
make: *** [compilef] Error 193 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:23:48.770

好的，这只是编写 makefile 的[惯例](http://www.gnu.org/software/make/manual/make.html#Utilities-in-Makefiles)，因此它们可以在标准的 unix 环境中运行。尽管如此，make 来自 *nix，如果你已经安装了 make，那么你可能拥有提供基本工具的 msys，并且脚本以 unix 方式执行，不像 windows 那样......

在 Windows 上使用 mingw-make 为我工作的示例 makefile：

```
all:
    ./test.py 
```

有`test.py`一个shebang`#!C:\\Python27\\python.exe`

或者如果 python 在 PATH`#!python`中就足够了，如下所示：

```
all:
    python test.py 
```

# java - Java：字符串索引超出范围：-1

> ID：10818232
> 
> 赞同：0
> 
> 时间：2012-05-30T14:23:13.057
> 
> 标签：java, string, range, out

新代码：

我不知道这里发生了什么，我收到了这个错误：

```
Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: -1
    at java.lang.String.substring(String.java:1949)
    at client0_0_2.loginToClient(client0_0_2.java:98)
    at client0_0_2.general(client0_0_2.java:196)
    at client0_0_2.<init>(client0_0_2.java:208)
    at client0_0_2.main(client0_0_2.java:215) 
```

这是导致错误的方法的内容：

```
public String loginToClient() throws FileNotFoundException, IOException {
    //decryptUsers();
    int tries;
    tries = 5;
    while (tries > 0) {
        System.out.println("LOGIN");
        String usnm = c.readLine("Username: ");
        char [] passwd = c.readPassword("Password: ");
        users = new FileInputStream("users.fra");
        DataInputStream dis = new DataInputStream(users);
        BufferedReader br = new BufferedReader(new InputStreamReader(dis));
        String logindat = br.readLine();
        System.out.println(logindat);
        int startUsnm = logindat.indexOf(usnm);
        String logdat = logindat.substring(startUsnm, logindat.indexOf("."));
        if (startUsnm == -1) {
            System.err.println("Username not recognised, please try another or create user.");
            usnm = "INV";
            return usnm;
        }
        else {
            int tendUsnm = logdat.indexOf(':'); 
            int startPass = endUsnm + 1;
            int tendPass = logdat.indexOf('.');
            String Usnm = logdat.substring("0", tendUsnm);
            String Pass = logdat.substring(startPass, endPass);
            char [] Passwd = Pass.toCharArray();
            if (usnm.equals(Usnm)) {
                if (Arrays.equals(passwd,Passwd)) {
                    System.out.println ("Logged in. Welcome, " + usnm + ".");
                    String data = "LOGIN: " + usnm;
                    printLog(data);
                    //encryptUsers();
                    return usnm;
                }
                else {
                    System.out.println ("Incorrect password, please try again.");
                    String data = "PASWFAIL: " + usnm;
                    printLog(data);
                    tries -= 1;
                }
            }
            else {
                System.out.println ("Username not recognised.");
                printLog("USNAMFAIL");
                usnm = "INV";
                return usnm;
                //encrytUsers();
            }
        }
    }
    //encryptUsers();
    System.exit(2);
    return usnm;
} 
```

它看起来有点像它试图访问某些东西的最后一个字符，这让它感到不安，但我不知道为什么。对新手有什么帮助吗？

编辑：

`users.fra`包含`username:password`在执行时。

注意：第 98 行是

```
char [] Passwd = Pass.toCharArray(); 
```

nb 不是功课，个人项目。

将添加一个方法来处理用户名不在的事件`users.fra`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:26:21.107

`indexOf()`找不到参数时返回 -1。我敢打赌，您正在搜索的字符串没有您正在搜索的字符之一，当您尝试获取子字符串时，它会导致无效索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T14:27:45.293

尝试将`contains()`before`indexOf()`用于 yor 字符串以避免`indexOf()`返回 -1 并尝试获取具有 -1 位置的子字符串的情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T14:28:39.793

`String().indexOf`如果没有匹配将返回 -1

`String().substring``StringIndexOutOfBoundsException`如果你给它一个负值，会抛出一个`begin`。

这一切都记录在[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)

因此，我会看这行代码：

```
String logdat = logindat.substring(startUsnm, logindat.indexOf(".")); 
```

如果`usnm`不在，这将失败`logindat`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T14:43:42.730

你真的应该看看这些行：

```
 int startUsnm = logindat.indexOf(usnm);
        int tendUsnm = logdat.indexOf(':');
        int endUsnm = startUsnm + tendUsnm;
        int startPass = endUsnm + 1;
        int tendPass = logdat.indexOf('.');
        int endPass = startPass + tendPass;
        String Usnm = logindat.substring(startUsnm, endUsnm);
        String Pass = logindat.substring(startPass, endPass); 
```

假设你有这样的文件：

* * *

用户：通过。

* * *

所以：

*   startUsnm = 0 //第一个字符
*   趋向Usnm = 4 //`:`字符索引
*   endUsnm = 4 // 总和？这可能不是你打算做的
*   startPass = 5 //`p`字符
*   tenPass = 9 //`.`字符
*   endPass = 14 // 再次求和？这些整数是索引 - 将抛出 IndexOutOfBounds

并考虑如果在给定中没有这样的匹配，这`indexOf`将返回值。`-1``String`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T14:26:51.787

很多事情都可能是错误的。您必须检查打印的内容。

一个例子：

```
int startUsnm = logindat.indexOf(usnm);
String logdat = logindat.substring(startUsnm, logindat.indexOf(".")); 
```

如果您在 logindat 中没有“用户名：”，则会产生您看到的异常。

编辑：请注意，如果您想允许“用户名：”（而不仅仅是“用户名：”），您可以这样做：

```
 int startUsnm = logindat.toLowerCase().indexOf("username:"); 
```

并测试 startUsnm >= 0。

# java - 使用国外maven模块的资源？

> ID：10818233
> 
> 赞同：0
> 
> 时间：2012-05-30T14:23:21.250
> 
> 标签：java, maven

我正在尝试使用来自另一个模块的资源来导入文件。我的目标是通过每个自定义类传递文件名，并让另一个模块的基类获取文件。

但我总是得到一个空指针异常。我究竟做错了什么？

模块 A：

```
src/main/java/foo/bar/MyBaseClass.java
src/main/resources/foo/bar/test.xml 
```

模块 B：

```
src/main/java/other/path/MyCustomClass extends MyBaseClass 
```

类：

```
abstract class MyBaseClass {
    public static String TESTFILE = "foo/bar/test.xml";
    getData(String filename) {
        InputStream inputStream = MyBaseClass.class.getResourceAsStream(String filename); //NPE
    }
}

class MyCustomClass extends MyBaseClass() {
    doSomething() {
        getData(TESTFILE);
    }
} 
```

/编辑：我应该使用这样的东西吗？

```
super.getClass().getResourceAsStream(..) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T02:42:27.970

您很可能应该使用[ClassLoader.getResourceAsStream()](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)

例如

```
Thread.currentThread().getContextClassLoader().getResourceAsStream() 
```

（可能更安全，可能更正确地在不同的环境中工作，即使用特殊的类加载器，Java EE？）

或者至少

```
aClass.getClassLoader().getResourceAsStream() 
```

这就是您应该如何在类路径上加载资源的方式，该类路径可能位于与您调用 getResourceXXX 的给定类不同的 JAR（或类路径条目）中。

如果您正在使用模块 B 中的类，并且想要从模块 A 加载资源，则需要使用 ClassLoader.getResourceXXX。

所以在Java中你通常应该使用这种方法（除非你关心将资源加载限制在更小的区域......）

另一件需要注意的事情：注意需要一个前导“/”，总是仔细检查你正在使用的任何方法的javadocs

另见：[http ://www.xyzws.com/servletfaq/what-is-different-between-classloadergetresourceasstream-and-classgetresourceasstream/21](http://www.xyzws.com/servletfaq/what-is-different-between-classloadergetresourceasstream-and-classgetresourceasstream/21)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:37:17.473

[getResourcesAsStream()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassLoader.html#getSystemResourceAsStream%28java.lang.String%29)需要一个**不是**文件名的名称，因为它是资源名称。此外，您似乎正在尝试从其他 Maven 模块访问资源。不要忘记您正在尝试通过相对路径访问资源，该路径应更改为绝对资源路径，例如*/foo/bar/test.xml*而不是*foo/bar/test.xml*。

# c# - 异步 webrequest 超时 => 使 IIS 崩溃

> ID：10818239
> 
> 赞同：6
> 
> 时间：2012-05-30T14:23:44.040
> 
> 标签：c#, .net-4.0, asynchronous, webrequest

我有一个网络应用程序，它从外部服务获取数据。请求本身就像下面的代码一样发生——据我所知非常简单。创建一个请求，异步触发它并让回调处理响应。在我的开发环境中运行良好。

```
public static void MakeRequest(Uri uri, Action<Stream> responseCallback)
        {
            WebRequest request = WebRequest.Create(uri);
            request.Proxy = null;
            request.Timeout = 8000;
            try
            {
                Task.Factory.FromAsync<WebResponse>(request.BeginGetResponse, request.EndGetResponse, null)
                    .ContinueWith(task =>
                                      {
                                          WebResponse response = task.Result;
                                          Stream responseStream = response.GetResponseStream();
                                          responseCallback(response.GetResponseStream());
                                          responseStream.Close();
                                          response.Close();
                                      });
            } catch (Exception ex)
            {
                _log.Error("MakeRequest to " + uri + " went wrong.", ex);
            }
        } 
```

但是，由于我以外的原因，外部测试环境和生产环境可能无法到达目标 URL。好吧，我想——请求超时不会真正伤害任何人。但是，似乎每次此请求超时时，ASP.NET 都会崩溃并重新启动 IIS。除其他外，事件日志向我显示了此堆栈跟踪：

```
StackTrace:    at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.get_Result()
   at MyApp.AsyncWebClient.<>c__DisplayClass2.<MakeRequest>b__0(Task`1 task)
   at System.Threading.Tasks.Task`1.<>c__DisplayClass17.<ContinueWith>b__16(Object obj)
   at System.Threading.Tasks.Task.InnerInvoke()
   at System.Threading.Tasks.Task.Execute()

InnerException: System.Net.WebException

Message: Unable to connect to the remote server

StackTrace:    at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endMethod, TaskCompletionSource`1 tcs)

InnerException: System.Net.Sockets.SocketException

Message: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond

StackTrace:    at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Int32 timeout, Exception& exception) 
```

..所以这一切都归结为一个SocketException，在我看来。之后（在同一秒内）另一个事件（我猜是相关的）被记录下来：

```
Exception Info: System.AggregateException
Stack:
   at System.Threading.Tasks.TaskExceptionHolder.Finalize() 
```

这有点超出我的理解，因为我不是异步代码和线程的大师，但是 Web 请求的超时导致 IIS 崩溃似乎很奇怪。我重新实现 `MakeRequest`了同步执行请求，效果很好。在这些环境中，请求仍然超时，但没有造成任何损坏，并且应用程序在之后继续愉快地运行。

所以我已经解决了我的问题，但为什么会发生这种情况？任何人都可以启发我吗？:-)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T14:26:03.440

`.Result`您的延续需要处理可能反映异常的事实。否则你有一个未处理的异常。未处理的异常会杀死进程。

```
.ContinueWith(task =>
{
    try {
        WebResponse response = task.Result;
        Stream responseStream = response.GetResponseStream();
        responseCallback(responseStream);
        responseStream.Close();
        response.Close();
    } catch(Exception ex) {
        // TODO: log ex, etc
    }
}); 
```

您的*旧*异常处理程序仅涵盖任务的*创建*- 而不是回调。

# c++ - 按值传递的函数参数的 const 正确性

> ID：10818240
> 
> 赞同：0
> 
> 时间：2012-05-30T14:23:47.003
> 
> 标签：c++, c, arguments, constants

> **可能重复：**
> [值参数的常量正确性](https://stackoverflow.com/questions/1724051/const-correctness-for-value-parameters)

我认为以下是一个很好的编码实践。当参数通过值传递给函数时，它应该只被读取，而不能在函数体中修改（或重用）。但这真的是一个好习惯吗？

示例（我避免做的事情）：

```
int foo(int x){
    //do lots of cool stuff
    x = 69;
    //do even cooler stuff
} 
```

从这里开始，我们得到了 const 的正确性。假设我的实践很好，那么几乎每个函数的每个参数都应该以“const”开头。实际上“a”是乐观的：

```
class A{
    const int gnoo(const int *const, const double) const;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:29:19.980

问题有两个方面，*声明*和*定义*。在声明点，函数参数的顶级限定符被删除，因此`const`编译器将删除。另一方面，在*定义*中，编译器确保如果参数是`const`，则不会在内部修改。

返回类型是另一回事，其中`const`没有从*声明*中删除，但在这种情况下，您很可能不想制作返回的对象（如果它是按值）`const`，因为这可能会限制优化的机会你的编译器有几种不同的方式。第一个，C++11 中的全新内容是你不能*移出*一个`const`对象，这意味着通过返回一个`const`对象你禁止从它*移出*。在 C++03 中，这种影响的情况越来越少，但返回`const`对象的优势有限。

有些人建议`const`到处添加。我没有，我读过的大多数代码也没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:28:47.780

你的观点很好。并且根据语言的不同，编译器/解释器在看到像您的第一个示例这样的代码时可能会抛出错误或警告。

但是，在某些时候，您必须选择是否要尝试保护“开发人员”免于做一些愚蠢的事情，或者只是假设他们这样做并在代码审查期间发现这种事情。

恕我直言，利用句法机制使代码更安全是一件好事。不幸的是，它可能会阻碍开发流程。

# c# - 将委托传递给构造函数不起作用

> ID：10818242
> 
> 赞同：0
> 
> 时间：2012-05-30T14:23:53.550
> 
> 标签：c#

我正在尝试将委托作为参数传递给这样的类的 ctor

```
class Foo
{
   protected delegate void CreateResource(object parameter);

   protected Foo(CreateResource res)
   {
   }

   public Foo(string resourceName)
     : this(CreateStreamRes)  // Compiler error
   {
   }

   protected void CreateStreamRes(object o)
   {
   }
} 
```

但我在注释行中收到以下编译器错误：“非静态字段、方法或属性‘CreateStreamRes(object)’需要对象引用”。

但是，如果我像这样在构造函数中添加一个变量

```
 public Foo(string resourceName)
     : this(CreateStreamRes)  // Compiler error
   {
      CreateResource cr = CreateStreamRes; // OK
   } 
```

它成功地编译了该行。

似乎 C# 将构造函数视为静态方法。因为如果我将**static**关键字添加到 CreateStreamRes(object o) 方法，它编译得很好。

有人可以解释一下为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:26:06.997

你不能在那里使用非静态方法，因为对象还没有被构造！只需定义`CreateStreamRes`为静态并完成它！

现在，我确信 Eric Lippert 可以正确解释为什么会出现这种情况，但我认为它是这样的：使用`:this()`语法将被转换为*首先*调用该构造函数，然后执行构造函数主体中的任何操作. 所以你不能真正在一个还不存在的对象上使用实例方法，对吧？

您可以分解构造函数的部分主体并调用它：

```
class Foo
{
   protected delegate void CreateResource(object parameter);

   protected Foo(CreateResource res)
   {
       Initialize(res);
   }

   protected void Initialize(CreateResource res)
   {
   }

   public Foo(string resourceName)        
   {
       Initialize(CreateStreamRes(res));
   }

   protected void CreateStreamRes(object o)
   {
   }
} 
```

这是可行的，因为在您调用 时`Initialize`，该对象已被分配。*在*构造函数内部，您可以自由使用实例方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T14:26:39.837

`:this()`调用关键字时不能调用实例方法。那是因为尚未创建该类的实例。如果您需要在那里调用某些方法，则它必须是静态的。

# c++ - linux上的学习线程

> ID：10818254
> 
> 赞同：4
> 
> 时间：2012-05-30T14:24:53.557
> 
> 标签：c++, linux, c++11, pthreads, stdthread

Linux 对我来说是一个新平台。我已经用 C++ 在 Windows 上编码多年，并且已经习惯了该平台上的多线程。

当我需要在 linux 平台上学习 c++ 时，C++11 出现了。

Linux 似乎在大多数情况下使用 pthreads - 好吧还有 boost::threads 和 QT 也有自己的线程。但是随着 C++11 的出现，std::thread 是一种全新的（跨平台和 C++ 标准）处理线程的方法。

所以我想我必须学习 pthreads 和 std::threads。最终，std::thread 似乎更重要，但是那里有很多遗留代码，所以我必须知道两者。

对于 Windows 上的线程同步，我会使用[WaitForMultipleObjects](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025%28v=vs.85%29.aspx)来等待一些任务完成，然后再继续进一步的工作。

pthread 是否存在类似的同步机制？标准::线程？

我看过[pthread_join](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_join.3.html)，它似乎可以一次只等待一个线程。我是否错过了另一个 pthread 调用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T14:36:25.273

`std::thread`被[`boost::thread`C++11 接受](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2320.html)，并带有一些附加功能。我的理解是，如果`boost::thread`在代码中被替换为`std::thread`它应该仍然可以编译和工作。

`boost::thread`基于`pthreads`设计，在线程、互斥体和条件变量上提供精简的 C++ 包装器。线程取消虽然不在 C++11 的范围之内，因为在 C++ 中它应该如何工作没有达成一致。

因此，通过学习，`pthreads`您还可以学习`std::thread`概念。在C API`std::thread`之上添加了大部分语法糖和便利功能。`pthreads`

关于`WaitForMultipleObjects()`，既不`pthreads`也不`std::thread`提供与其`bWaitAll=FALSE`模式类似的任何东西，但是，它通常使用管道和`select()`在 UNIX 上进行模拟，或者更现代`eventfd()`的`epoll()`在 Linux 上进行模拟。`bWaitAll=TRUE`可以通过依次等待所有任务来模拟模式，因为它在所有对象都准备好之前不会继续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:43:44.200

不，pthreads 和 C++11 都没有直接等价于`WaitForMultipleObjects`（即等待任何可等待的“句柄”类型。） `pthread_join`只能用于连接线程，并且只能用于单个特定线程。

在 posix 平台上最接近的等价物是使用系统调用来等待多个文件描述符，例如[`select()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/select.html),[`poll()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/poll.html)或 linux-specific [`epoll()`](http://www.kernel.org/doc/man-pages/online/pages/man4/epoll.4.html)，但它们要求您有一个文件描述符来等待，这对于 I/O 事件来说很好，但需要额外的工作您可以使用它们等待互斥锁、条件变量或其他同步对象。在这些系统调用之上构建了更通用的事件库，例如[libevent](http://software.schmorp.de/pkg/libev.html)和[libev](http://software.schmorp.de/pkg/libev.html)和[Boost ASIO](http://www.boost.org/libs/asio)，它们支持等待计时器以及 I/O，但仍然不支持线程完成、互斥锁等，只有一个函数，比如`WaitForMultipleObjects`

The alternatives you do have for pthreads and C++11 threads are to wait on different synchronisation types separately. You can wait for timers, wait for threads to complete, wait for mutexes, wait on condition variables, wait for asynchronous results to be ready (`std::async` in C++11, no direct equivalent in pthreads) ... but there's no call that will allow you to wait a heterogeneous set of those types all at once.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:34:31.677

我可以给你一个非常花哨的答案，但是唉，这是我学习它们的地方，这是一个很好的介绍：

[http://www.yolinux.com/TUTORIALS/LinuxTutorialPosixThreads.html](http://www.yolinux.com/TUTORIALS/LinuxTutorialPosixThreads.html)

您`pthread_mutex_t`用于同步并`pthread_join`可能处理等待多个任务的问题。它完全按照您的预期工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T14:35:16.357

关于`WaitForMultipleObjects`，这通常称为屏障同步。Boost 有一个称为屏障的实现。它使用条件变量来实现它，在 posix 它的一个`pthread_cond_t`

[这](https://stackoverflow.com/a/10739712/1158895)是我最近留下的解释屏障同步的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T14:38:08.457

基于[此](https://computing.llnl.gov/tutorials/pthreads/#PthreadsAPI)，您必须`pthread_join`为您创建的每个线程调用。或者使用互斥锁，如果需要同步你的线程。

# c# - 使用附属程序集进行本地化

> ID：10818258
> 
> 赞同：0
> 
> 时间：2012-05-30T14:24:59.460
> 
> 标签：c#, .net, localization, satellite-assembly

我正在尝试在 WinForms 应用程序中使用卫星程序集进行本地化。目录结构如下：

*   斌
    *   程序.exe
    *   德
        *   程序.resources.dll

在 Program.exe 中，此代码在`Main`方法中执行：

```
Application.EnableVisualStyles();
Application.SetCompatibleTextRenderingDefault(false);

Thread.CurrentThread.CurrentUICulture = new CultureInfo("de");

Application.Run(new Form()); 
```

我检查了 FUSLOGVW.exe 输出：

```
*** 装配活页夹日志条目（5/30/2012 @ 5:19:37 PM）***

操作失败。
绑定结果：hr = 0x80070002。该系统找不到指定的文件。

从以下位置加载程序集管理器：C:\Windows\Microsoft.NET\Framework64\v4.0.30319\clr.dll
在可执行文件 D:\tmp\bin\Program.exe 下运行
--- 详细的错误日志如下。

=== 预绑定状态信息 ===
日志：用户 = paulius_l
日志：DisplayName = Program.resources，Version=1.0.0.0，Culture=de，PublicKeyToken=...
 （完全指定）
日志：Appbase = file:///D:/tmp/bin/
日志：初始 PrivatePath = NULL
日志：动态基础 = NULL
日志：缓存基础 = NULL
日志：AppName = Program.exe
调用程序集：程序，版本=1.0.0.0，文化=中性，PublicKeyToken=....
===
LOG: 开始绑定原生镜像 Program.resources, Version=1.0.0.0, Culture=de, PublicKeyToken=....
警告：未找到匹配的本机图像。
LOG：从 D:\tmp\bin\de\Program.resources.dll 加载的 IL 程序集。

```

这看起来不错，但是字符串并没有被本地化——仍然使用 Program.exe 中的默认字符串。

要获取字符串，我使用 Visual Studio 生成的`Res`类从`Res.resx`.

我在这里想念什么？

编辑：为那些比我更了解它的人添加了完整的 FUSLOGVW 输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:22:54.763

这是我在编写会在外部生成附属程序集的自动构建脚本时犯的巨大错误。问题是，在卫星程序集中生成类时，我错过了`Res`课程。难怪它不起作用。

经过长时间的努力，我今天早上发现了问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T14:45:16.253

我相信你的文化标识符在这条线上是错误的：

```
Thread.CurrentThread.CurrentUICulture = new CultureInfo("de"); 
```

CultureInfo 的文化标识符采用“语言代码-国家代码”的形式。例如，“en-US”表示美国英语，“en-GB”表示英国/英国英语。

试试“de-DE”。

在[http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.name%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.name%28v=vs.95%29.aspx)和[http://msdn.microsoft.com/上有一些进一步的阅读en-us/goglobal/bb896001.aspx](http://msdn.microsoft.com/en-us/goglobal/bb896001.aspx)获取文化标识符列表。

# html - CSS3Pie v1.0 - 在 IE9 中没有渐变，在 IE8 中有效

> ID：10818260
> 
> 赞同：0
> 
> 时间：2012-05-30T14:25:02.393
> 
> 标签：html, css, css3pie

我正在尝试让线性渐变与 CSS3Pie (v1.0) 和 IE9 一起使用。

奇怪的是，该演示在带有 IE9 的[CSS3Pie 站点](http://css3pie.com/)上工作，但使用演示中使用的相同 CSS 在我的站点上不起作用。它适用于 IE8，所以我知道 PIE 正在工作并且在正确的位置（为了测试，如果我注释掉它就会停止工作`behavior: url(/css/PIE.htc);`）。

这是我正在使用的 CSS：

```
.test {
padding: 20px;
text-align: center;
width: 200px;
height:100px;
-webkit-border-radius: 8px;
-moz-border-radius: 8px;
border-radius: 8px;
-webkit-box-shadow: #666 0px 2px 3px;
-moz-box-shadow: #666 0px 2px 3px;
box-shadow: #666 0px 2px 3px;
background: #FF7777;
position:relative;
background: -webkit-gradient(linear, 0 0, 0 bottom, from(#FF7777), to(#c40808));
background: -webkit-linear-gradient(#FF7777, #c40808);
background: -moz-linear-gradient(#FF7777, #c40808);
background: -ms-linear-gradient(#FF7777, #c40808);
background: -o-linear-gradient(#FF7777, #c40808);
background: linear-gradient(#FF7777, #c40808);
-pie-background: linear-gradient(#FF7777, #c40808);
behavior: url(/css/PIE.htc);
} 
```

![在此处输入图像描述](../Images/e9f4d59421ea4a93704fc2e15b5a3374.png)

我不想使用 IE 过滤器，因为演示似乎没有它们也能工作。

我已经阅读[了这个问题](https://stackoverflow.com/questions/6500956/ie9-css3-linear-gradients-why-does-pie-css-gradients-not-work-in-ie9)，但是由于演示有效，而且这个问题已经有一年了，而且 PIE 现在是 1.0 版，我一定做错了。

关于从这里去哪里的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:39:37.740

IE9 中的失败通常是由于不正确的内容类型标头。其他 IE 版本也有这个问题，但 IE9 似乎对此更严格。有关详细信息，请参阅[http://css3pie.com/documentation/known-issues/#content-type](http://css3pie.com/documentation/known-issues/#content-type)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:51:17.563

我非常头疼，因为即使使用正确的内容类型标题（文本/x 组件），线性渐变在 IE9 上也不起作用。

升级到 PIE 2.0 解决了这个问题。

[http://css3pie.com/2013/01/28/pie-2-0-beta-1-released](http://css3pie.com/2013/01/28/pie-2-0-beta-1-released)

（我在这个问题中给出的相同的遮阳篷：[linear-gradient using CSS3 PIE in IE9 not working, IE8 does](https://stackoverflow.com/questions/10457519/linear-gradient-using-css3-pie-in-ie9-not-working-ie8-does/15796651#15796651)）

# ios - 带有 SSL 身份验证的 iOS 中的 HTTPS POST：cURL？

> ID：10818265
> 
> 赞同：1
> 
> 时间：2012-05-30T14:25:20.723
> 
> 标签：ios, object, curl, libcurl

我想使用两个 PEM 文件对服务器进行 HTTPS POST，其中包含我的私钥和证书，以及服务器的 CACertificate。我已经在 Windows 应用程序中这样做了一段时间，而且效果很好。现在我必须在 iPad 上的 iOS 应用程序中做同样的事情。似乎 Cocoa 框架没有针对此类请求的功能......任何关于如何执行此操作或如何在 iOS 设备上引入 cURL 的想法将不胜感激。

更新：我最终使用了为 iOS 5.1 编译的带有 openSSL 的 cURL。完美运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:28:41.353

也许[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/How-to-use)可以帮助

[客户端证书](http://allseeing-i.com/ASIHTTPRequest/How-to-use#client_certificates)方法

```
 If your server requires the use of client certificates, as of v1.8 it
 is now possible to send them with your request.

    // Will send the certificate attached to the identity (identity is a SecIdentityRef)
    [request setClientCertificateIdentity:identity];

    // Add an additional certificate (where cert is a SecCertificateRef)
    [request setClientCertificates:[NSArray arrayWithObject:(id)cert]];

 There is a helper function in ClientCertificateTests.m in the iPhone /
 iPad sample app that can create a SecIdentityRef from PKCS12 data
 (this function only works on iOS). 
```

# java - 查找集合中是否存在值（小集合，每秒进行几次检查）

> ID：10818268
> 
> 赞同：1
> 
> 时间：2012-05-30T14:25:30.123
> 
> 标签：java, collections, lookup

我需要实现一种非常有效的方法来检查某个键（长值）是否存在于 java 中的一小部分项目（少于 100 个，通常约为 10 个）中。

此检查必须尽可能高效，因为它将每秒进行多次（超过 1000 次，我正在处理多播提要并且我想丢弃不需要处理的消息）。

需要检查的项目在应用程序生命周期中几乎没有变化，而且在性能方面可能会很昂贵。

谢谢

> 感谢所有及时回复。我担心的是我的长键可能非常集中在长的一个小范围内，我很担心。如果你们认为这不会是一个问题，我会试一试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:32:04.033

使用 a -返回[`HashSet<Long>`](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)需要几纳秒（字面意思） 。`contains()`

代码如下：

```
private static Set<Long> keys = new HashSet<Long>();
// populate keys

if (keys.contains(requestKey)) { // this call is super fast!
    // ignore request
} 
```

### 编辑：

不要担心你的渴望是“密切”在一起的。`hashCode()`of足够“`Long`分散”，以至于对于所有实际目的都没有模式 - 也就是说，“接近”的 Long 没有“接近”的哈希码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:28:34.103

如果效率优先于多功能性，您可以考虑使用 Trove's [`TLongHashSet`](http://www.jarvana.com/jarvana/view/net/sf/trove4j/trove4j/2.0.2/trove4j-2.0.2-javadoc.jar!/gnu/trove/TLongHashSet.html)：

> 长原语的开放寻址集实现。

这会给你 O(1) 并完全避免自动装箱。但这对于这么小的收藏可能是一个极端的选择。

# javascript - 不使用时如何自动关闭弹出窗口？

> ID：10818272
> 
> 赞同：0
> 
> 时间：2012-05-30T14:25:39.523
> 
> 标签：javascript

我希望用户最小化窗口后弹出窗口会自动关闭。我的代码如下：

```
<a href="#" onclick="Popup=window.open('fb.html','Popup','toolbar=no,location=no,status=yes,menubar=no,scrollbars=no,resizable=no,width=620,height=400,left=230,top=23'); return false;"> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:35:42.613

请参阅有关以编程方式打开和关闭弹出窗口的[帖子。](http://www.javascript-coder.com/window-popup/javascript-window-close.phtml)

对于浏览器窗口或选项卡，我认为您需要用户单击确认框（确认是浏览器创建的安全功能）。

**添加**了想想你的 UX（用户体验）——用户通常不会考虑最小化窗口。也许您应该提供一个“关闭”按钮。

此外，调查各种库，例如[Boostrap modal popups](http://twitter.github.com/bootstrap/javascript.html#modals)。他们已经解决了用户体验问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:39:35.263

窗口最小化时不会触发任何事件。您可以做的最好的事情是按设定的时间间隔检查高度和宽度。关闭浏览器窗口`Popup.close()`应该是微不足道的。

# php - XPath - 选择不属于列表的空元素

> ID：10818275
> 
> 赞同：2
> 
> 时间：2012-05-30T14:25:46.300
> 
> 标签：php, xpath, domxpath

`$list = array('br', 'hr', 'link', 'meta', 'title');`

使用 DOMXpath，我如何选择空节点并且它们的 tagName 不在 $list 中？（我想在它们中添加一个空格，`textContent`这样它们就不会自动关闭）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:40:56.417

您没有给我们任何可使用的 XML，这不是很好，但是您可以这样做：

```
$xml = <<<XML
<div>
   <a>
   </a>
   <p>some text</p>
   <p></p>
   <span>no text
      <hr/>
      <ul></ul>
   </span>
   <br/>
</div>
XML;

$dom = new DOMDocument;
$dom->loadXML($xml);
$xpath = new DOMXPath($dom);
$list = array('br', 'hr', 'link', 'meta', 'title');
$expr = array();
foreach ($list as $l) {
   $expr[] = "not(self::$l)";
}
$expr = implode(' and ', $expr);

foreach ($xpath->query("//*[$expr and not(normalize-space())]") as $elem) {
   echo "$elem->nodeName\n";
} 
```

这输出

```
a
p
ul 
```

正如预期的那样。现在你有了节点——添加空间由你决定。IMO 使用它会更容易`not(normalize-space())`，然后查看它`nodeName`是否不在您的列表中，但是您要求使用 XPath 表达式，所以这就是您所得到的。

请注意，`normalize-space()`使用它是因为纯空格仍可能导致节点自动关闭。如果这不是问题，您可以`node()`改用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T02:37:22.810

**这是一个选择所需节点的单行 XPath 表达式：**

```
//*[not(node()[not(self::text())]) 
  and not(normalize-space) 
  and contains('|br|hr|link|meta|title|', concat('|', name(), '|'))
   ] 
```

这将选择 XML 文档中只有一个文本节点子节点（如果有的话）并且其规范化（所有前导和尾随空白字符被删除并且所有中间相邻空白字符被单个空格替换）字符串的任何元素value 是空字符串，其名称是`br`、或之一。`hr``meta``title`

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

  <xsl:template match="/">
   <xsl:copy-of select=
   "//*[not(node()[not(self::text())])
      and not(normalize-space)
      and contains('|br|hr|link|meta|title|', concat('|', name(), '|'))
       ]
   "/>
  </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<html lang='en'>
    <head>
        <meta charset='utf-8'/>
        <title></title>
        <link rel='stylesheet' href='/assets/index.css'/>
    </head>
    <body>
        <div>
            <header>
                <h1></h1>
            </header>
            <section>
                <article></article>
                <aside></aside>
            </section>
            <br />
            <footer>
                <small>
                 Copyright &#169;
                    <span></span>
                </small>
            </footer>
        </div>
        <script src='//code.jquery.com/jquery-latest.min.js'></script>
        <script src='/assets/index.js'></script>
    </body>
</html> 
```

**计算 XPath 表达式并将（正确）选择的节点复制到输出：**

```
<meta charset="utf-8"/>
<title/>
<link rel="stylesheet" href="/assets/index.css"/>
<br/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T14:38:55.157

```
$doc = new DOMDocument();
$doc->loadHTMLFile($file);
$xpath = new DOMXpath($doc);

$list = array('br', 'hr', 'link', 'meta', 'title');
$empty_items = $xpath->query("//*[not(text())]");
foreach($empty_items as $key=>$element){
    if(is_object($element) &&
       get_class($element) == 'DOMElement' &&
       in_array($element->nodeName,$list)){
        unset($empty_items[$key]);
    }
} 
```

**注意：**我没有测试它。它可能有拼写错误或错误的对象属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T14:46:13.740

Xpath 引擎无权访问 PHP 变量。您必须将该列表引用为有效的 Xpath 表达式，或者您必须在 PHP 中过滤 dom 节点。PHP 手册解释了如何实现过滤器：[http ://www.php.net/manual/en/book.filter.php](http://www.php.net/manual/en/book.filter.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-31T00:04:50.147

我使用这样的东西来完成类似的任务：

```
<?php
$xml = <<<XML
<html lang='en'>
  <head>
    <meta charset='utf-8'/>
    <title></title>
    <link rel='stylesheet' href='/assets/index.css'/>
  </head>
  <body>
    <div>
      <header>
        <h1></h1>
      </header>
      <section>
        <article></article>
        <aside></aside>
      </section>
      <footer>
        <small>
          Copyright &#169;
          <span></span>
        </small>
      </footer>
    </div>
    <script src='//code.jquery.com/jquery-latest.min.js'></script>
    <script src='/assets/index.js'></script>
  </body>
</html>
XML;
$dom = new DOMDocument;
$dom->loadXML($xml);
$xpath = new DOMXPath($dom);
$null = array( 'br','hr','meta','link','base','link','meta','img'
             , 'embed','param','area','col','input' );
array_walk($null, function(&$v){$v = "not(self::{$v})";});
array_unshift($null, 'not(normalize-space())');
$null = implode(' and ', $null);
$node = $xpath->query("//*[{$null}]");

$collapsed = htmlspecialchars($dom->saveXML($dom->documentElement));
foreach ($node as $n) $n->appendChild($dom->createTextNode(''));
$separated = htmlspecialchars($dom->saveXML($dom->documentElement));

echo '<pre>', $collapsed, '<hr/>', $separated, '</pre>';
?> 
```

# c++ - C++ 返回一个对象副本

> ID：10818278
> 
> 赞同：6
> 
> 时间：2012-05-30T14:26:03.993
> 
> 标签：c++, optimization, copy, copy-constructor, rvo

*我写了以下代码：*

```
class MyObjectHolder {
public:
    std::vector<int> getMyObject() const {
        return myObject;
    }

private:
    std::vector<int> myObject;
}; 
```

在我的程序的某个时刻，我尝试使用该`getMyObject`方法并仅`const`在检索到的对象上使用方法：

```
const std::vector<int> myObject = myObjectHolder.getMyObject();
myObject.size();
int a = myObject.front(); 
```

*   现在，编译器是否有可能优化此代码以便不完成**任何副本`std::vector<int>`**？

    > 编译器是否有可能确定我只使用`const`检索到的对象上的方法*（假设`mutable`它背后没有发生废话）*并且它**不会制作对象的任何副本**并对成员执行这些`const`操作`private`相反`MyObjectHolder`？

*   如果是，如果我没有明确声明`const std::vector<int> myObject`as是否有可能`const`？

*   如果不是，不这样做的原因是什么？在哪些情况下，这种优化将难以实施/推断它是可能的并且在这里/等等......？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T14:31:26.163

> 现在，编译器是否有可能优化此代码以便不`std::vector<int>`完成任何副本？

不，编译器不知道调用者将对该对象做什么，除非您对使用该对象的所有代码使用全局优化（编译器通常不能对其使用做出假设；此外，如果对象是从dll 它根本无法做出任何假设）。

> 如果是，如果我没有明确地将 const std::vector myObject 声明为 const，是否有可能？

不，无论如何，从非常量到常量的转换可能是隐式的。

> 如果不是，不这样做的原因是什么？在哪些情况下，这种优化将难以实施/推断它是可能的并且在这里/等等......？

这是一个应该在内部完成的优化，`getMyObject()`但编译器不能确定调用者不会丢弃 const。实际上，这是一个关于使用的非常古老的辩论`const`，通常我认为始终将`const`其视为程序员而不是编译器会更清楚。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T14:31:16.930

我建议使用

```
const std::vector<int>& getMyObject() const {
    return myObject;
} 
```

它将返回 myObject 的常量引用而不复制它。

并将结果与

```
const std::vector<int>& myObject = myObjectHolder.getMyObject(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T09:33:45.110

[复制省略](http://en.wikipedia.org/wiki/Copy_elision)和[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)可能会启动。如果您使用支持[C++11](http://en.wikipedia.org/wiki/C++11)的 C++ 编译器，那么您可以通过[移动语义](http://en.wikipedia.org/wiki/C++11#Rvalue_references_and_move_constructors)对其进行优化。

我建议阅读优秀的文章[想要速度？Dave Abrahams通过价值传递，](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)并在下面的评论中进行讨论。

但是，有关详细信息，您应该参考 C++ 编译器的文档。

# python - 如何覆盖模块中函数所需的默认值？

> ID：10818285
> 
> 赞同：2
> 
> 时间：2012-05-30T14:26:24.297
> 
> 标签：python

我试图弄清楚如何覆盖在某些模块中定义的函数的默认值。考虑这段代码（`program.py`）：

```
# import the default & user defined settings
from default_settings import *
from my_settings import *

# import some functions, which might be dependent on the settings above
from functions import *

# call dummy_function from 'functions' - prints '1'
dummy_function()

# output SOME_DEFAULT - will be '1'
print SOME_DEFAULT

# re-import 'my_settings' - SOME_DEFAULT will now be '2'
from my_settings import *
print SOME_DEFAULT 
```

这是`default_settings.py`：

```
DO_DEBUG = False
SOME_DEFAULT = 1 
```

这是`my_settings.py`，我想在里面使用谁的价值观`functions.py`：

```
DO_DEBUG = True
SOME_DEFAULT = 2 
```

这是`functions.py`我需要导入的地方`default_settings`，否则我会收到 NameError。我不想在`my_settings`这里导入，因为`functions.py`应该更像是一个通用库。

```
# if I leave this line out, then I get a 
# "NameError: name 'SOME_DEFAULT' is not defined"
from default_settings import *

# I don't want to add "from my_settings import *" here, because 'functions.py' 
# is supposed to be a generic library of functions.

# dummy decorator.
def do_profile(cond):
    def resdec(f):
        if cond:
            print "profiling!"
        return f
    return resdec

# dummy function depending on both 'DO_DEBUG' and 'SOME_DEFAULT'
@do_profile(DO_DEBUG)
def dummy_function(bla=SOME_DEFAULT):
    print bla 
```

如果我运行，`python program.py`我会得到以下输出：

```
1
1
2 
```

这是意料之中的。第一个`1`来自`dummy_function`，第二个`1`来自`default_settings`inside的导入`functions`，`2`是我重新导入的结果`my_settings`。

`dummy_function`有没有一种方法可以通过简单地使用来覆盖所需的默认设置`my_settings`？我想把`from default_settings import *`线路省掉`functions`，但后来我遇到了`NameError`。有没有办法导入`functions`并同时将所有变量传递到`functions`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T15:14:10.097

您需要以不同的方式封装您的设置。现在，您正在使用两个不同的模块作为两组不同设置的容器。然后，您从这些模块中导入所有名称，并指望`from my_settings import *`覆盖由`from default_settings import *`. 那是滥用`import`.

一般来说，我会说不应该隐式地重新定义模块时定义*的*名称`import`。已经很糟糕了，因为它在全局命名空间中隐式定义了一堆名称；使用*另一个*导入来隐式*重新定义*这些名称只是可怕的。*`from module import *` *`*`**

 ***我的建议是要么使用字典来存储设置，要么使用设置类。在第一种情况下，您可以执行以下操作：

```
# settings.py
default_settings = {'foo': True, 'bar': False}
my_settings = {'foo': False}
current_settings = default_settings.copy()
current_settings.update(my_settings) 
```

现在任何模块都可以`import settings`像这样访问它们：

```
foo = settings.default_settings['foo']
bar = settings.current_settings['bar']
settings.current_settings['bar'] = True 
```

所有已导入的模块都可以看到对这些设置的任何更改`settings`。

更复杂的方法可能是使用`Settings`类。`Settings`将定义一些默认值：

```
class Settings(object):
    def __init__(self, foo=None, bar=None):
        self.foo = foo if foo is not None else True
        self.bar = bar if bar is not None else False 
```

现在您可以创建各种自定义设置：

```
# settings.py
default_settings = Settings()
my_settings = Settings(foo=False)
current_settings = my_settings.copy()
current_settings.foo = False    # pointless example 
```

同样，如上所述，我们`import settings`访问它们或进行更改：

```
# foo.py
import settings
bar = settings.current_settings.bar
settings.current_settings.foo = True 
```

你甚至可以继承`Settings`来创建新的默认值：

```
class LocalSettings(Settings):
    def __init__(self, foo=None, bar=None):             # in Python 3, 
        super(LocalSettings, self).__init__(foo, bar)   # super().__... works
        self.foo = foo if foo is not None else True 
```

等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T14:45:09.310

你的函数是`functions.py`在导入时定义的——所以，如果（在 program.py 中）你

```
#start of file DO NOT "import functions" YET!!!
import default_settings
import my_settings

default_settings.DO_DEBUG=my_settings.DO_DEBUG
default_settings.SOME_DEFAULT=my_settings.SOME_DEFAULT

import functions 
```

然后`my_settings`应该接管的设置。我不知道这是否是您正在寻找的解决方案（它不适合我），但我看不到此代码结构的任何其他选项。

**编辑**

为了减轻手动重置所有设置的痛苦，您可以使用该`inspect`模块：

```
#start of file DO NOT "import functions" YET!!!
import default_settings
import my_settings
import inspect

#pull out all of "my_settings" and apply them to "default_settings",
# but only if they don't start with an underscore (reserved)
members=inspect.getmembers(my_settings)
for k,v in members:
    if( not k.startswith('_') ):
        setattr(default_settings,k,getattr(my_settings,k))

import functions 
```

但是，这仍然不适合我——我不喜欢的是，它的行为`functions`取决于您何时导入它，这不是您通常在 python 中看到的。我认为您的代码可以从某种重组中受益。***

# objective-c - Objective-C NSLog 变体：没有完整路径的 __FILE__ 和没有日期时间的输出

> ID：10818288
> 
> 赞同：1
> 
> 时间：2012-05-30T14:26:30.420
> 
> 标签：objective-c, c-preprocessor, nslog, pch

出于调试目的，我已将此代码添加到我的`.pch`. 虽然我对输出非常满意，但我想改进`__FILE__`在`DLog`定义中使用时打印文件名（没有完整路径）的方式。

我在用着`[[NSString stringWithUTF8String:__FILE__] lastPathComponent]`

也许您能建议一种更清洁/更短的方法吗？

```
#ifdef DEBUG
    #define DLog(...) NSLog(@"%@ %d %s %s", [[NSString stringWithUTF8String:__FILE__] lastPathComponent], __LINE__, __PRETTY_FUNCTION__, __FUNCTION__)
    #define ALog(...) [[NSAssertionHandler currentHandler] handleFailureInFunction:[NSString stringWithCString:__PRETTY_FUNCTION__ encoding:NSUTF8StringEncoding] file:[NSString stringWithCString:__FILE__ encoding:NSUTF8StringEncoding] lineNumber:__LINE__ description:__VA_ARGS__]
#else
    #define DLog(...) do { } while (0)
    #ifndef NS_BLOCK_ASSERTIONS
        #define NS_BLOCK_ASSERTIONS
    #endif
    #define ALog(...) NSLog(@"%s %@", __PRETTY_FUNCTION__, [NSString stringWithFormat:__VA_ARGS__])
#endif 
```

**更新** 如果可能的话，我还想摆脱 datetime 和 app name `(i.e. 2012-05-30 16:23:29.795 AppName[11746:12203]`。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-28T03:30:21.247

考虑到您提出这个问题后引入的字面语法，我认为`[[NSString stringWithUTF8String:__FILE__] lastPathComponent]`可能会变成。`@(__FILE__).lastPathComponent`

# spring - Spring 3.1 + Hibernate 4 - HibernateTemplate

> ID：10818291
> 
> 赞同：14
> 
> 时间：2012-05-30T14:26:39.043
> 
> 标签：spring, hibernate

Spring 的[hibernate4 包](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/orm/hibernate4/package-summary.html)似乎已经取消了 HibernateTemplate 和 HibernateDaoSupport。我正在将我的 Spring 应用程序中的 Hibernate 从 3 升级到 4，并且我有一些 Spring 的 HibernateDaoSupport 子类和几个通过 HibernateTemplate 的 Hibernate 回调。也许我没有使用正确的搜索词，但我在参考文档中找不到任何关于我应该如何重构这些以[“使用参考指南中解释的普通休眠 daos”的信息](http://forum.springsource.org/showthread.php?124677-Is-there-a-class-to-replace-o-s-o-hibernate3-HibernateTemplate-with-Hibernate-4&p=406779#post406779)。谁能帮我指出正确的方向？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-30T14:35:41.343

HibernateTemplate的[javadoc 对此进行](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/orm/hibernate3/HibernateTemplate.html)了解释。您应该使用`sessionFactory.getCurrentSession()`来获取会话，并直接使用本机 Hibernate Session API。

# salesforce - 您能否自动在所有配置文件的页面布局上放置一个字段？

> ID：10818298
> 
> 赞同：0
> 
> 时间：2012-05-30T14:26:52.040
> 
> 标签：salesforce, apex-code, visualforce

我在 Salesforce 中工作，需要将货币字段添加到我的联系人对象并放在所有配置文件的同一部分中。

有没有办法在不手动调整每个配置文件的页面布局的情况下做到这一点？每个配置文件和记录类型都有许多页面布局，希望有更好的方法

谢谢，

-新人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:01:48.287

创建字段时，您可以选择将字段添加到每个页面布局和每个配置文件。您必须浏览每个*页面布局*才能将字段移动到适当的部分，但在初始创建后，无需返回每个配置文件。

您可能想探索使用 Force.com IDE 来管理您的页面布局。页面布局的一部分可能如下所示：

```
<layoutSections>
    <customLabel>true</customLabel>
    <detailHeading>false</detailHeading>
    <editHeading>true</editHeading>
    <label>Contact Information</label>
    <layoutColumns>
        <layoutItems>
            <behavior>Required</behavior>
            <field>Name</field>
        </layoutItems>
        <layoutItems>
            <behavior>Edit</behavior>
            <field>AccountId</field>
        </layoutItems>
     </layoutColumns>
</layoutSections> 
```

一旦你弄清楚如何改变一个布局，在多个布局中复制粘贴你的更新应该是一件简单的事情。

# javascript - 使用 LAB JS 在页面加载时显示警报

> ID：10818304
> 
> 赞同：0
> 
> 时间：2012-05-30T14:27:12.290
> 
> 标签：javascript, jquery, labjs

我继承了一些代码，我想做的就是运行一些 jQuery 代码，特别是一个警报。

我知道如何使用 jQuery/JavaScript 做到这一点，但现在确定我是否可以使用我已经拥有的内容，如下所示：

```
<script>
  $LAB
  .script("js/lib/jquery-1.7.1.min.js").wait()
  .script("js/lib/jquery.mobile-1.1.0.min.js").wait()
  .script("../js/mobile/config/buildfile.js").wait()
  .script("js/init.js")
  .wait(function () {
    $(function() {
    setupHelpers();
    loadApp(true,
      function () {
      },
      function () {
      });
    });
  });
</script> 
```

我是否还需要使用 document.ready 或者我可以将警报放在上面代码中的某个位置？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T15:26:40.470

是否需要等待 DOMready 的答案与 LABjs 是否在图中是分开的。将“DOMready”与“脚本已完成并准备就绪”混为一谈是一种常见的误解，而实际上它们是两个独立的事件，应该根据您的需要单独处理。

因此，要回答您的具体问题，您是否应该等待 DOMready ......答案是，这取决于您是否需要 DOM 来显示警报。如果您使用普通`alert()`对话框弹出窗口向用户发出警报，那么您不会。如果您正在使用某些插件通过将 <div> 注入 DOM 以显示警报来“提醒”用户，那么是的，您肯定需要等待 DOM。

无论您做什么，都不要误以为“脚本加载”事件（这是您在最终`wait(..)`调用中得到的）意味着 DOM 已准备好。这不一定是真的。

* * *

规则 1：如果您需要 DOM 执行某些任务，请*始终*使用 DOMready 事件处理程序等待，不要假设。

规则 2：如果您需要等待部分或全部脚本完成加载，请使用脚本加载事件，就像 LABjs 等脚本加载器为您提供的那样。

规则 3：如果您需要 DOM 和脚本来完成加载，则通过在脚本加载的处理程序中嵌入一个 DOMready 处理程序来*组合*这两个事件，就像您在上面所做的那样。

# mysql - SQL 连接和 MySQL

> ID：10818305
> 
> 赞同：0
> 
> 时间：2012-05-30T14:27:16.417
> 
> 标签：mysql, sql

在我的数据库中，我有这些表

```
products
-------------
id | title  | 
-------------
1    Cheese  
2    Milk
3    Water 
```

ETC .....

```
products_to_city

    -----------------------
    city_id | product_id   | 
    -----------------------
    1         1
    1         2
    2         3
    3         1
    3         1 
```

我正在使用这个 sql 查询来获取结果

```
SELECT
 p.id,
 p.title
 FROM products p
 LEFT JOIN products_to_city ptc ON ptc.id = 1 
```

问题是上面的查询从表中获取所有数据，而不仅仅是城市为 1 的地方

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:32:03.723

您没有告诉查询要加入什么`products`以及`products_to_city`继续。特别是使用which`LEFT JOIN`将强制结果集包含. 我想你想要这个：`products``products_to_city`

```
SELECT p.id, p.title
FROM products p
INNER JOIN products_to_city ptc
  ON p.id = ptc.product_id
WHERE
  ptc.city_id = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T14:30:36.417

用这个：

```
SELECT
 p.id,
 p.title
 FROM products p
 INNER JOIN products_to_city ptc ON ptc.id = p.id
 where ptc.id = 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T14:31:03.810

您没有将产品加入城市，您将获得所有产品和城市的匹配。

```
SELECT
 p.id,
 p.title
 FROM products p
 LEFT JOIN products_to_city ptc ON ptc.product_id = p.id
 where ptc.city_id = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T14:29:59.060

您正在执行外部联接，因此在没有匹配的情况下，无论如何都会返回该行。考虑一个内部连接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T14:30:20.527

当你这样做时

```
LEFT JOIN products_to_city ptc 
```

您是在告诉 MySQL（实际上是所有 SQL dbms）返回产品中的所有行，即使它们与连接条件不匹配。

要仅返回与连接条件匹配的行，请使用

```
INNER JOIN products_to_city ptc ON ptc.product_id = p.id AND (something else) 
```

请注意，您需要使用正确的列名连接表。

我不确定你在那个“其他”子句中想要什么，因为你写的东西——pct.id = 1——通常是你可能在 WHERE 子句中表达的东西。问题是 products_to_city 表没有任何名为“id”的列。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T14:30:31.680

替换`LEFT JOIN`为`JOIN`

那是因为`LEFT JOIN`甚至将没有对应键的行（在连接的左侧）放入右表中。

`JOIN`只取满足*pk*和*fk*匹配的“左”和“右”表中的列

所以这将是你的解决方案

```
SELECT
p.id,
p.title
FROM products p
JOIN products_to_city ptc ON ptc.id = 1 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-30T14:30:52.817

请参阅基本问题：LEFT OUTER JOIN vs Left Join，（http://stackoverflow.com/questions/2809594/basic-question-left-outer-join-vs-left-join）它们是相同的。你想要左内连接。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-30T14:32:38.443

```
LEFT JOIN products_to_city ptc ON p.id = ptc.id 
```

# filesystems - 向 NFS 服务器添加功能 - 压缩/解压缩存储/检索的文件

> ID：10818310
> 
> 赞同：2
> 
> 时间：2012-05-30T14:27:33.240
> 
> 标签：filesystems, nfs

我需要构建一个自定义的 Suse Linux NFS 服务器，它对存储在磁盘上的某些文件进行压缩，并在从磁盘读取文件时解压缩文件。这需要对文件系统的远程用户透明，这意味着如果用户在 /archiveDirectoryOnNFSServer 上保存一个名为 XYZZY.tif 的 10MB 文件，当他们在该挂载目录上执行 ls -l 时，他们将看到一个 10MB 文件称为 XYZZY.tif，即使存储在 NFS 服务器磁盘上的实际文件将是 XYZZY.tif.compressed，并且大小为 2MB。

我希望我需要将其构建为位于 NFS 服务器软件堆栈下方的驱动程序，但是，我很难找到从哪里开始。是否存在通过 API 提供此级别自定义的现有 NFS 服务器？我是否需要修改开源 NFS 服务器的源代码，如果需要，是否有一个最容易开始的，并且它们是模块化结构的，这样这将是直截了当的吗？我很难在互联网上找到相关内容，任何指针都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:36:33.433

IMO 这种功能绝对不是 NFS 服务器的责任（nfs 服务器应该通过 nfs 提供文件），而是底层文件系统的责任。但是，在 Linuxland 中没有太多选择，但您可以从检查[fusecompress](http://code.google.com/p/fusecompress/)和[btrfs](https://btrfs.wiki.kernel.org/index.php/Main_Page)开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-12T06:44:30.513

这篇文章有点老了，所以你可能已经知道这里有一些选项，但还有一些其他选项（都用于服务器端）。

[http://zfsonlinux.org/](http://zfsonlinux.org/) zfs 文件系统具有内置压缩功能。我通常使用 lzjb，因为它是最快的压缩算法并且做得很合理（MySQL DB 的压缩率为 2-4 倍，具有非压缩数据的文件系统大约为 4 倍）。您可以根据希望提供压缩的 CPU 时间来选择算法。

如果您想要压缩不同的文件类型，那么您可以考虑在一组 zfs 文件系统之上放置 gluster。gluster 将允许您将某些文件类型（通过扩展名）存储在不同的底层文件系统上。在这种情况下，您将底层文件系统指定为带有您需要的特定选项的 zfs 卷（例如，.zip 和 .png 继续使用未压缩的文件系统，而您编写一次并多次读取的内容（如静态 html 文件）可能会继续使用更高的压缩率——写入时您只需支付一次费用，但读取速度应该非常快，因为它扫描的磁盘块更少并且解压缩速度非常快）

如果您将 zfs 用作您的 nfs 服务器，zfs 将管理 nfs 挂载 - 如果您将 gluster 放在顶部，您将不会想要这个。

很容易动态地指定每个文件系统的其他属性（atime/noatime，如果您想要除普通 RAID 之外的冗余，您可以添加 SSD 作为缓存设备以获得更高的性能）。

在这些解决方案中，您仍然通过网络发送完整的未压缩文件，因此它不能弥补网络性能，但如果您试图加快磁盘 IO 或从驱动器中获得更多利用率，它会提供很多选择。

# android - Android：如何安排即使我的应用程序关闭也会调用的警报管理器广播事件？

> ID：10818313
> 
> 赞同：2
> 
> 时间：2012-05-30T14:27:45.097
> 
> 标签：android, service, alarmmanager

我的应用程序需要每小时执行一项特定任务。应用程序是否正在运行、暂停甚至关闭都没有关系。

当应用程序正在运行或暂停时，我可以通过调度一个 AlarmManager 广播接收器来做到这一点。但是当应用程序关闭时，我必须调用“unregisterReceiver”来不泄露意图，并且应用程序永远不会被唤醒（或其他东西）来处理任务。

那么，问题来了：**如何安排一个我不需要注销的alarmmanager任务，这样即使我的应用程序关闭也会调用它？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:15:16.597

用于`AlarmManager.setRepeating(int type, long triggerAtTime, long interval, PendingIntent operation)`此。将类型设置为`AlarmManager.RTC_WAKEUP`以确保设备在睡眠时被唤醒（如果这是您的要求）。

像这样的东西：

```
 Intent intent = new Intent("com.foo.android.MY_TIMER");
    PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0, intent, 0);
    AlarmManager manager = (AlarmManager) getSystemService(ALARM_SERVICE);
    long now = System.currentTimeMillis();
    long interval = 60 * 60 * 1000; // 1 hour
    manager.setRepeating(AlarmManager.RTC_WAKEUP, now + interval, interval,
        pendingIntent); // Schedule timer for one hour from now and every hour after that 
```

您将 PendingIntent 传递给此方法。您无需担心 Intent 泄漏。

`AlarmManager.cancel()`当您不再需要它时，请记住通过调用来关闭警报。

不要为此在代码中注册接收器。只需在`<intent-filter>`您的 BroadcastReceiver 的清单条目中添加一个标签，如下所示：

```
 <receiver android:name=".MyReceiver">
        <intent-filter>
            <action
                    android:name="com.foo.android.MY_TIMER"/>
        </intent-filter>
    </receiver> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:07:18.677

您需要为此调用一个 Android 组件`Service`。从服务代码中，您可以使用具有 PendingIntent 类的 AlarmManager 每小时安排您的任务。由于您的 AlarmManger 在服务组件中声明，它不需要任何 GUI，并且会在后台执行，直到您的设备中有电池。

# android - android2.3.3中开发或定制软键盘

> ID：10818317
> 
> 赞同：0
> 
> 时间：2012-05-30T14:28:01.800
> 
> 标签：android

我需要为屏幕中的一个 EditText 字段开发或自定义软键盘，键盘只有数字键，'，'（逗号），''（空格），'。'（点），' /' 。

注意：我使用的版本是android2.3.3。

感谢和问候，

小型的。

# c# - 如何直接使用存储过程值制作条形图？

> ID：10818318
> 
> 赞同：0
> 
> 时间：2012-05-30T14:28:02.533
> 
> 标签：c#, asp.net, sql-server-2005, crystal-reports

[查询选择当月周末和公共假期的月份和编号](https://stackoverflow.com/questions/10810642/query-to-select-the-month-and-nos-of-weekend-and-public-holiday-in-that-month)

通过使用上面链接中的选择查询，我在 SQL Server 2005 中创建了一个存储过程。

现在我得到这样的输出（例如）：

```
year      Month   count(weekendholiday)   count(publicholiday)
----      -----   --------------   -------------
2012      April      2               1
2012      May        1               1
2013      April      0               1 
```

我可以直接在 Crystal Reports (asp.net C#) 中使用这些值来制作条形图吗？

我想要 X 轴的特定年份和 Y 轴的计数。

应该有 2 条显示 1.nos。周末 2\. 没有。公共假期的

我怎样才能做到这一点？

像这样的东西：

```
 |
 3|  
  |          Weekend
  |            -----
 2|            |   |
  |            |   |
  |            |   |public
 1|            |   |---    
  |            |   |   |
--|-----|---------|---------|----------|-------
       3/2012   4/2012    5/2012      6/2012 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:56:47.400

如果我理解正确，那就很简单了：http: [//speedy.sh/PwCWn/sample-report.rpt](http://speedy.sh/PwCWn/sample-report.rpt)

# ios - 我什么时候需要在 iOS 中调用 setNeedsDisplay？

> ID：10818319
> 
> 赞同：67
> 
> 时间：2012-05-30T14:28:04.103
> 
> 标签：ios, objective-c, swift, uiview, setneedsdisplay

在创建 iOS 应用程序时，我对何时需要调用感到困惑`setNeedsDisplay`？我知道这与更新/重绘 UI 有关；但是，每次我改变任何观点时都需要调用它吗？

例如，我是否需要调用它：

*   以编程方式更改文本字段中的文本后
*   更改视图的背景时？
*   当我在 viewDidLoad 中进行更改时？
*   在 viewDidAppear 中怎么样？

有人可以给我一些关于何时使用此方法的一般准则吗？

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-05-30T14:32:23.950

只有在 UIView 的子类中重写 drawRect 时，才应该调用 setNeedsDisplay，UIView 基本上是在屏幕上绘制某些东西的自定义视图，例如线条、图像或矩形等形状。

因此，当您更改此绘图所依赖的几个变量并让视图表示该更改时，您应该调用 setNeedsDisplay ，您需要调用此方法，该方法在内部将调用 drawRect 并重绘组件。

当您将 imageView 或 UIButton 添加为子视图或对任何子视图进行更改时，您无需调用此方法。

**例子：**

您有一个显示移动圆圈的视图，您可以触摸并移动它，或者可能是基于计时器的动画。现在为此，您将需要一个自定义视图，该视图在给定的中心和给定的半径处绘制一个圆。这些被保存为实例变量，它们被修改为通过改变圆的中心来移动圆，或者通过增加圆的半径来使其变大。

现在在这种情况下，您将在循环和计时器中修改这些变量（中心或半径），或者可能在 touchesEnded 和 touchesMoved 方法中由您的手指修改。要反映此属性的更改，您需要重绘此视图，您将为其调用 setNeedsDisplay。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-30T14:33:15.323

你只需要调用`-setNeedsDisplay`UIView 子类来绘制它们的内容`-drawRect:`。

对于标签和其他标准控件，更改文本会自动导致标签重绘，因此您无需自己执行此操作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-30T14:40:24.757

`setNeedsDisplay:`当您想显式刷新视图时应该调用。它只是设置了一个内部标志，iOS UI 系统将`drawRect:`在稍后的适当时间调用。

当您更新任何可能更改演示文稿的属性时，听起来应该始终调用它。但事实并非如此。几乎所有的标准 UI 控件都已经处理了这个问题。我相信每当您修改标准 UI 组件（视图）的属性时，`setNeedsDisplay:`都会在内部触发，并且将重绘受影响的区域。（在您列出的所有情况下）

但是，如果您创建自己的视图，实现自己的视图，`drawRect:`并希望在某些内容发生更改时更新它，则必须`setNeedsDisplay:`显式调用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-29T04:08:15.020

我认为@Amogh Talpallikar 说得很清楚。我只想再讨论一件事。

事实上，`drawRect`除非你真的需要它，否则你应该避免覆盖，因为它会导致性能下降。你可以参考这个[https://yalantis.com/blog/mastering-uikit-performance/](https://yalantis.com/blog/mastering-uikit-performance/)

如果你只想改变框架、按钮的位置、标签……你可以打电话`setNeedLayout`或`layoutIfNeeded`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-01T11:26:01.370

当您更改视图自定义绘图所依赖的属性时，您将调用 setNeedDisplay。它将显式调用 drawRect: 方法。

# java - 使用编程计时器服务 (@Timeout) 会引发“内部异常：java.sql.SQLException”

> ID：10818321
> 
> 赞同：1
> 
> 时间：2012-05-30T14:28:28.653
> 
> 标签：java, service, timer, glassfish

我正在使用 Programmatic Timer Service (@Timeout) 并使用 Glassfish，但我不断收到以下错误：

内部异常：java.sql.SQLException：只读连接、用户或数据库不允许更改 SQL 数据。

我的代码很简单，我同时使用了 Programmatic Timer Service 和 Automatic Timer Service，并且错误只出现在 Programmatic Timer Service 中：

我的代码是：

```
@Timeout
public void programmaticTimeout(Timer timer) {
    sendMessages();
}

// run every minute

@Schedule(hour = "*", minute = "*/1", persistent = false)
@TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED)
public void automaticTimeout() {
    sendMessages();
} 
```

@schedule 任务运行良好，而 @Timout 抛出此异常。@schedule 有一个变量表示是否保留数据，而 @Timout 没有。

知道这里有什么问题吗？如何禁用持久性？谢谢。

# java - 如何使用 javascript 从 HTML 调用服务器端 java 方法？

> ID：10818333
> 
> 赞同：1
> 
> 时间：2012-05-30T14:28:44.170
> 
> 标签：java, javascript, html, ajax

我想知道如何使用 java 脚本从 HTML（我使用 HTML5）调用 java 方法。我尝试使用小程序，但这没有用。我必须在 html 文件中获取下拉框的值并将其带到 java 方法中进行处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:30:15.160

您正在寻找的是 AJAX。[使用jQuery](http://jquery.com)之类的库非常容易

```
$.get('your/servlet').done(function(data) {
    // data is the data returned by the request
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:31:32.923

Jabsorb 实现了这一点：[http ://code.google.com/p/jabsorb/](http://code.google.com/p/jabsorb/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:32:08.973

您将希望通过对 servlet 的请求来执行此操作。就像 ThiefMaster 说的，Ajax 是个好方法

这是一篇帮助您入门的快速文章：http: [//javapapers.com/ajax/getting-started-with-ajax-using-java/](http://javapapers.com/ajax/getting-started-with-ajax-using-java/)

# android - Android Surfaceview Crash没有错误输出

> ID：10818335
> 
> 赞同：4
> 
> 时间：2012-05-30T14:28:51.230
> 
> 标签：android, opengl-es, crash, java-native-interface, surfaceview

我有两个活动（A 和 B）A 只是一个列表视图，在 B 中有一个表面视图，我在 JNI 代码 opengl-es 中使用它进行绘图，以及一个用于声音的 java 线程。它第一次运行良好，我可以从 A 到 B 做三到四个动作，然后他们按下返回按钮返回到 A。但是在三个或四个这样的动作之后，活动 B 崩溃并且它没有给出任何错误唯一的输出是：

```
05-30 15:12:12.535: D/libEGL(10296): loaded /system/lib/egl/libGLES_android.so
05-30 15:12:12.558: D/libEGL(10296): loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
05-30 15:12:12.687: D/libEGL(10296): loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
05-30 15:12:12.695: D/libEGL(10296): loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so 
```

并尝试在活动 A 中执行 oncreate 方法。在 JNI 代码中，我清理了所有数据，删除了所有使用的内存，停止了所有线程。我可以看到周围没有线程或额外的内存。但是我无法检测到崩溃，因为它不会发生在特定位置，它确实是随机且令人讨厌的，因为它不会给出任何错误。在活动 B 中，我删除了与表面视图相关的所有操作。

这是否曾经发生在某人身上？

# c - 查询mongodb C

> ID：10818341
> 
> 赞同：0
> 
> 时间：2012-05-30T14:29:16.353
> 
> 标签：c, mongodb, mongodb-query, mongodb-c

我正在尝试进行查询，该查询必须从我的 mongodb 数据库中检索一些数据，请按照我的代码：

```
 72     mongo conn[1];
 73     mongo_cursor cursor[1];
 74 
 75     //Parameters (connection, IP, port);
 76     int status = mongo_connect(conn, "127.0.0.1", 27017);
 77     if(status != MONGO_OK){
 78         switch(conn->err){
 79             case MONGO_CONN_NO_SOCKET: printf("Socket not found\n"); return 1;
 80             case MONGO_CONN_FAIL: printf("Connection Failed\n"); return 1;
 81             case MONGO_CONN_NOT_MASTER: printf("Not master\n"); return 1;
 82         }
 83     }
 84 
 85     //add_new_service(conn, 55, 75,"java","7");
 86     bson query[1];
 87     bson_init(query);
 88     bson_append_start_object(query, "$query");
 89         bson_append_int(query,"cpu",75);
 90     bson_append_finish_object(query);
 91     bson_finish(query);
 92 
 93     bson fields[1];
 94     bson_init(fields);
 95     bson_append_null(fields,"machine");
 96     bson_finish(fields);
 97 
 98     mongo_cursor_init(cursor, conn, "db.services");
 99 
100     cursor = mongo_find(conn,"db.services", query, fields, 9999, 0, 0);
101 
102     while(mongo_cursor_next(ptr_cursor) == MONGO_OK){
103         bson_print(&ptr_cursor->current);
104     }
105 
106     mongo_cursor_destroy(cursor);
107     mongo_destroy(conn);
108     return 0; 
```

我不知道如何使用方法“mongo_find”（第 100 行），它返回一个指向 mongo_cursor 的指针，但我无法操纵这个指针，有一些想法可以帮助我实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T19:44:21.103

下面是我认为你想要的工作代码。请注意以下事项：

1.  $query 作为运算符或命令不存在，只需使用 BSON 的内部部分
2.  查询使用“machine.cpu”，因为“cpu”在“machine”的子文档中
3.  对于字段，我已更改为 bson_append_bool 而不是 bson_append_null 以便您获得以下 bson_find 的结果
4.  对于您的 bson_find，您必须导航到机器，因为它是包含“cpu”的子文档

希望这能让你前进。

```
#include "mongo.h"
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

main(int argc, char** argv)
{
    mongo conn[1];
    mongo_cursor* cursor;

    //Parameters (connection, IP, port);
    int status = mongo_connect(conn, "127.0.0.1", 27017);
    if(status != MONGO_OK){
        switch(conn->err){
            case MONGO_CONN_NO_SOCKET: printf("Socket not found\n"); return 1;
            case MONGO_CONN_FAIL: printf("Connection Failed\n"); return 1;
            case MONGO_CONN_NOT_MASTER: printf("Not master\n"); return 1;
        }
    }

    //add_new_service(conn, 55, 75,"java","7");
    bson query[1];
    bson_init(query);
    bson_append_int(query,"machine.cpu",75);
    bson_finish(query);

    bson fields[1];
    bson_init(fields);
    bson_append_bool(fields,"machine",1);
    bson_finish(fields);

    //mongo_cursor_init(cursor, conn, "db.services");

    cursor = mongo_find(conn,"db.services", query, fields, 9999, 0, 0);

    while(mongo_cursor_next(cursor) == MONGO_OK){
        bson_print(mongo_cursor_bson( cursor ));
        bson_iterator it;
        if (bson_find(&it, &cursor->current, "machine")){
            bson sub;
            bson_iterator_subobject( &it, &sub );
            if (bson_find(&it, &sub, "cpu")){
                printf("bson find cpu: %d\n", bson_iterator_int(&it));
            }
        }
    }

    mongo_cursor_destroy(cursor);
    mongo_destroy(conn);
    return 0;
} 
```

输出

```
 _id : 7      4fc51ba2db00e4ba36334713
    machine : 3
        cpu : 16     75
        ram : 16     55

bson find cpu: 75 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T16:14:25.147

你的 ptr_cursor 声明在哪里？你可以使用这个：

```
while( mongo_cursor_next( &cursor ) ) 
{
    bson_print(cursor.current);

    bson_iterator iter;

    if ( bson_find( &iter, &cursor.current, "***table attribute***" )
    {
        printf("%s", bson_iterator_string(&iter));
    }
} 
```

# c# - 具有长度前缀的文字字符串的 ANTLR 语法

> ID：10818342
> 
> 赞同：0
> 
> 时间：2012-05-30T14:29:17.130
> 
> 标签：c#, antlr, grammar, antlr3

如何在 ANTLR 中编写以下 BNF 语法？

```
literal = "{" number "}" CRLF *CHAR8
        ; Number represents the number of CHAR8s 
```

例如`{6}\r\nLENGTH`应该映射到`"LENGTH"`字符串。

跟随工作吗？

```
literal: 
   | '{' ('0'..'9')+ '}\r\n'  
        {  
            // C# Code for Lexer
            Text = Text.Trim();
            int n = int.Parse(Text.Substring(1,Text.Length-2));
            Text = "";
            for(int i=0;i<n;i++){
               input.Consume();
            }            
        }
  ; 
```

我将其作为 Lexer 规则工作，但问题是我得到的令牌不匹配，我没有得到令牌作为文字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:47:29.357

此解决方案正常工作，

```
literal: 
   | '{' ('0'..'9')+ '}\r\n'  
        {  
            // C# Code for Lexer
            Text = Text.Trim();
            int n = int.Parse(Text.Substring(1,Text.Length-2));
            Text = "";
            for(int i=0;i<n+1;i++){
               Text += (char) input.LA(1);
               input.Consume();
            }            
        }
  ; 
```

`Text += (char)input.LA(1);`丢失了，由于某种原因，我们必须将 i 从 0 计数到 n+1。

# php - 使用 PHP，如何检查十进制数是大于还是小于 50？

> ID：10818347
> 
> 赞同：-4
> 
> 时间：2012-05-30T14:29:33.670
> 
> 标签：php, format, rounding, decimal, ceil

我正在尝试检查变量内的数字是否具有大于 50 或小于 50 的十进制数。然后根据它是否为 50 或更高，将十进制数四舍五入为 99 ，如果小于，将其四舍五入为 00 .

这是我的一段代码：

```
public function roundPrice($price)
{
return round( (ceil($price) - 0.01), 2);
} 
```

它使所有十进制数四舍五入到 99 。我只需要将 50 或更高的小数四舍五入为 99，而 49 或更少的小数变为 00。

我怎么能在 PHP 中实现这一点？非常感谢，我被困在这里，不知道该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T14:41:12.247

在偶然的情况下，OP 实际上意味着 1.36 变为 1.00 和 1.60 变为 1.99 的小数位。

可能更优雅的解决方案，但这里有一个：

```
function roundPrice($price)
{
    $intVal = intval($price);
    if ($price - $intVal < .50) return (float)$intVal;
    return $intVal + 0.99;
} 
```

[http://codepad.org/5hIdQh4w](http://codepad.org/5hIdQh4w)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:33:35.090

> 我只需要 50 或更高的小数在**99**中四舍五入，并且 49 或更少变为**00**。

***奇怪的***要求，但是：

```
public function roundPrice($price)
{
  return $price >= 50 ? 99 : sprintf("%02s", 0);
} 
```

对于大于或等于 的数字`50`，它将返回`99`，对于小于 的数字`50`，它将返回`00`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:34:23.823

你不是真的四舍五入，所以直接说吧。

```
public function roundPrice($price)
{
    if($price >= 50)
    {
        return 99;
    }
    else
    {
        return 0;
    }
} 
```

您陈述的问题不处理等于 50 的 $price。我假设 50 的值正好四舍五入为 99。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T14:35:11.187

如果它是 50 或更高，这会修改您的函数以返回十进制值，否则返回 0。

```
public function roundPrice($price)
{
   $decValue = round( (ceil($price) - 0.01), 2);

   if ($decValue >= 50) return $decValue;
   else return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T14:43:28.180

我想你想要这个：

```
public function roundPrice($price) {
    $p = round($price, 0);
    if( ceil($price) == $p) {
        return $p - 0.01;
    }
    return $p;
} 
```

对于 >= X.5 的值，这将返回 X.99，对于所有其他值，将返回 X.00。

# informix - 错误 -206 表（aus_command）不在数据库中

> ID：10818351
> 
> 赞同：1
> 
> 时间：2012-05-30T14:29:50.547
> 
> 标签：informix

Windows Vista SP2、i7 双核、8GB RAM 上的 Informix 11.70.TC4DE：

我搜索了（aus_command）表，它在数据库中。知道为什么它说找不到吗？

```
Tue May 15 22:07:21 2012

22:07:21  Booting Language <c> from module <>
22:07:21  Loading Module <CNULL>
22:07:21  Booting Language <builtin> from module <>
22:07:21  Loading Module <BUILTINNULL>
22:07:28  DR: DRAUTO is 0 (Off)
22:07:28  DR: ENCRYPT_HDR is 0 (HDR encryption Disabled)
22:07:28  IBM Informix Dynamic Server Version 11.70.TC4DE Software Serial Number AAA#B000000
22:07:29  Performance Advisory: The physical log size is smaller than the recommended size for a
server configured with RTO_SERVER_RESTART.
22:07:29   Results: Fast recovery performance might not be optimal.
22:07:29   Action: For best fast recovery performance when RTO_SERVER_RESTART is enabled,
increase the physical log size to at least 242000 KB. For servers
configured with a large buffer pool, this might not be necessary. 
22:07:29  IBM Informix Dynamic Server Initialized -- Shared Memory Initialized.

22:07:29  Started 1 B-tree scanners.
22:07:29  B-tree scanner threshold set at 5000.
22:07:29  B-tree scanner range scan size set to -1.
22:07:29  B-tree scanner ALICE mode set to 6.
22:07:29  B-tree scanner index compression level set to med.
22:07:29  Physical Recovery Started at Page (2:5459).
22:07:29  Physical Recovery Complete: 0 Pages Examined, 0 Pages Restored.
22:07:29  Logical Recovery Started.
22:07:29  5 recovery worker threads will be started.
22:07:30  Logical Recovery has reached the transaction cleanup phase.
22:07:30  Logical Recovery Complete.
      6 Committed, 0 Rolled Back, 0 Open, 0 Bad Locks

22:07:31  Onconfig parameter STORAGE_FULL_ALARM modified from 0 to 3.
22:07:31  Dataskip is now OFF for all dbspaces
22:07:31  Init operation complete - Mode Online
22:07:31  Checkpoint Completed:  duration was 0 seconds.
22:07:31  Tue May 15 - loguniq 21, logpos 0x500b4, timestamp: 0xa252b Interval: 62

22:07:31  Maximum server connections 0 
22:07:31  Checkpoint Statistics - Avg. Txn Block Time 0.000, # Txns blocked 0, Plog used 16, Llog used 1

22:07:31  On-Line Mode
22:07:34  SCHAPI: Started dbScheduler thread.
22:07:36  Defragmenter cleaner thread now running
22:07:36  Defragmenter cleaner thread cleaned:0 partitions
22:07:36  Booting Language <spl> from module <>
22:07:36  Loading Module <SPLNULL>
22:07:36  Auto Registration is synced
22:07:36  SCHAPI: Started 2 dbWorker threads.
22:07:38  SCHAPI: [Auto Update Statistics Refresh 33-4] Error -206 The specified table (aus_command) is not in the database.

22:07:38  SCHAPI: [Auto Update Statistics Refresh 33-4] Error -111 ISAM error:  no record found.

22:07:38  SCHAPI: [Auto Update Statistics Refresh 33-4] Error -206 The specified table (aus_command) is not in the database.

22:07:38  SCHAPI: [Auto Update Statistics Refresh 33-4] Error -111 ISAM error:  no record found.

22:07:40  SCHAPI: [Auto Update Statistics Evaluation 32-8] Error -242 Could not open database table (informix.aus_command).

22:07:40  SCHAPI: [Auto Update Statistics Evaluation 32-8] Error -106 ISAM error:  non-exclusive access.

22:07:45  Logical Log 21 Complete, timestamp: 0xae6d3.
22:23:40  Explain file for session 31 : C:\PROGRA~1\IBM\Informix\11.70\sqexpln\cost.out
22:24:07  Explain file for session 31 : C:\PROGRA~1\IBM\Informix\11.70\sqexpln\cost.out
22:24:24  Explain file for session 31 : C:\PROGRA~1\IBM\Informix\11.70\sqexpln\cost.out
22:27:10  Checkpoint Completed:  duration was 0 seconds.
22:27:10  Tue May 15 - loguniq 22, logpos 0x545018, timestamp: 0xb4f29 Interval: 63

22:27:10  Maximum server connections 1 
22:27:10  Checkpoint Statistics - Avg. Txn Block Time 0.000, # Txns blocked 0, Plog used 657, Llog used 3573

22:27:11  IBM Informix Dynamic Server Stopped. 
```

# wpf - 如何以编程方式将控件添加到 XAML 中定义的 DataTemplate？

> ID：10818352
> 
> 赞同：0
> 
> 时间：2012-05-30T14:29:53.057
> 
> 标签：wpf, datatemplate, add

我有一个简单的 DataTemplateSelector 设置：

```
 public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        FrameworkElement element = container as FrameworkElement;

        if (element != null && item != null && item is ParameterViewModel)
        {
            ParameterViewModel paramItem = item as ParameterViewModel;

            if (paramItem.ControlInfo.Type == "slider")
            {
                return element.FindResource("sliderParam") as DataTemplate;
            }
            else if (paramItem.ControlInfo.Type == "button")
            {
                return element.FindResource("buttonParam") as DataTemplate;
            }
                            ...... etc 
```

这一切都很好，我已将它添加到我的 XAML 中并且它按预期工作。

现在，我要做的是：如果满足条件，则在返回之前向 DataTemplate 添加一些额外的控件。我的第一次尝试是创建一个 StackPanel FrameworkElementFactory，并将 DataTemplate 的 VisualTree 以及我希望添加的额外控件添加到其中，然后返回一个 DataTemplate，并将 VisualTree 设置为 FrameWorkElementFactory。

例如

```
 FrameworkElementFactory spFactory = new FrameworkElementFactory(typeof(StackPanel));

                if (paramItem.ControlInfo.Type == "slider")
                {
                    spFactory.AppendChild((element.FindResource("sliderParam") as DataTemplate).VisualTree);
                }

  ...

                //add my extra controls 
                if(condition..)
                {
                    spFactory.AppendChild(extraControl);
                }

               return new DataTemplate { VisualTree = spFactory }; 
```

但是，由于 DataTemplate 是在 XAML 中定义的，因此 VisualTree 属性将始终返回 null。

如何向 DataTemplate 添加控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:40:51.280

尝试这个

```
...
if (paramItem.ControlInfo.Type == "slider")
{
   spFactory.AppendChild(FactoryFromResource("sliderParam"));
}
...

private FrameworkElementFactory FactoryFromResource(string resource)
{
    DataTemplate dataTemplate = FindResource(resource) as DataTemplate;
    FrameworkElementFactory factory = new FrameworkElementFactory(typeof(ContentControl));
    factory.SetValue(ContentControl.ContentTemplateProperty, dataTemplate);
    return factory;
} 
```

# jquery - 如何将此 jQuery 函数仅应用于某个类

> ID：10818353
> 
> 赞同：0
> 
> 时间：2012-05-30T14:29:53.100
> 
> 标签：jquery, html

```
$('a').each(function() {
    var clicked = false;
    $(this).bind('click', function() {
        if(!clicked) return !(clicked = true);
    });
}); 
```

大家好。我试图弄清楚如何将此函数应用于仅`<a>`包含一个名为`touch`. 换句话说：

函数**适用**于此：

```
<a href="#" class="touch"> 
```

函数**不**适用于此：

```
<a href="#"> 
```

抱歉，我是 jQuery 新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T14:31:14.747

您需要一个[类选择器](http://api.jquery.com/class-selector/)（结合您当前的[元素选择器](http://api.jquery.com/element-selector/)）：

```
$('a.touch').each(function() {
    var clicked = false;
    $(this).bind('click', function() {
        if(!clicked) return !(clicked = true);
    });
}); 
```

值得一读 jQuery API（尤其是[选择器部分](http://api.jquery.com/category/selectors/)）。以后会为你节省很多时间！

还值得记住的是，大多数 jQuery 选择器与 CSS 选择器相同。如果你对 CSS 有所了解，你也可以将这些知识应用到 jQuery 中。

* * *

另外，由于大多数 jQuery 方法适用于匹配集中的每个元素，因此您可能可以摆脱`each`循环。如果我理解正确，那么您试图阻止每个`a.touch`元素在第一次单击链接时跟随它。如果这是正确的，那么你可以这样做：

```
$('a.touch').one("click", function() {
    return false; 
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T14:33:20.587

jQuery 使用[CSS 选择器](http://api.jquery.com/category/selectors/)。将您的选择器更改为`$('a.touch')`用于带有类的锚标记`touch`或仅`$('.touch')`用于具有该类的任何元素`touch`。

# cron - Email_cron：以下标签有语法错误：{exp:cron}

> ID：10818354
> 
> 赞同：0
> 
> 时间：2012-05-30T14:29:57.737
> 
> 标签：cron, expressionengine

我已安装 cron_email 插件，但在模板中收到此错误消息

```
Error

The following tag has a syntax error:

{exp:cron}

Please correct the syntax in your template. 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:49:35.767

正如[Cron 发送电子邮件页面](http://expressionengine.com/downloads/details/cron_send_email)中指定的那样，“要求：ExpressionEngine Cron 插件”。所以请确保它也已安装：[http ://expressionengine.com/downloads/details/expressionengine_cron](http://expressionengine.com/downloads/details/expressionengine_cron)

# java - Java 进程内存远大于指定的限制

> ID：10818356
> 
> 赞同：9
> 
> 时间：2012-05-30T14:29:59.697
> 
> 标签：java, linux, memory, process

我已经研究了大多数可用的方法来找出一个java进程真正使用了多少内存。到目前为止，我可以说我知道分配的总内存可能是以下一项或多项：

*   堆内存（据说由我的 -XX:MaxHeapSize=4096m 控制）
*   永久内存（据说由我的 -XX:MaxPermSize=1024m 控制）
*   保留代码缓存（应该由我的 -XX:ReservedCodeCacheSize=256m 控制）
*   N of Threads * Thread Size (应该由我的 -XX:ThreadStackSize=1024 控制)

但是结果与 linux 告诉我的差别太大了，我发现任何一种方法都可以用来获取 java 进程的内存消耗。

在我的情况下，它是在 Ubuntu 11.10 x86_64 机器、JVM 1.6_u26 64 位上运行的 Tomcat 实例，它`ps -ALcf | grep org.apache.catalina.startup.Bootstrap | wc -l`告诉我我有 145 个线程或进程正在运行，它们都链接到同一个根进程 (Tomcat)。

总而言之，总最大内存为 (4096MB) + (1024MB) + (256MB) + 145 * (1024KB) = 5521MB。`jmap -heap PID`告诉我的，告诉`ManagementFactory.memoryMXBean.(heapMemoryUsage + nonHeapMemoryUsage).getCommitted()`我的，和上面的理论值都是对的。

现在到 linux 端，`top`两者`nmon`都告诉我这个进程分配的 ResidentMemory 是 5.8GB -> 大约 5939,2MB。但我也知道这只是内存的一部分，是实时 RAM 内存中的一部分。VIRT by`top`和 Size by `nmon`（两者应该代表相同）告诉我进程是 7530MB（或者确切地说是 7710952KB by `nmon`）。这与预期**的最大值相差太大：高于最大值 2009MB**，并且根据 jmap 和 jstat 堆内存分配甚至没有达到峰值（2048-OldSpace + 1534-Eden_+_Survivors）。

`top`还告诉我代码堆栈是 36KB（公平，对于初始 catalina 启动器），数据堆栈是 7.​​3GB（代表其余部分）。

这个 tomcat 服务器实例是唯一在这台机器上运行的实例，并且一直处于不稳定状态。需要每三天左右重新启动一次，因为机器有 7647544k RAM 可用，并且没有交换（出于性能原因）。我对限制进行了数学计算，并期望进程遵循它们，我发现为机器上运行的所有其他服务留出相当好的安全余量（除了 ssh 和 top 本身之外，没有一个应该打扰）：7468 - 5521 = 1947。这对于“安全边际”来说几乎是太多了。

所以，我想了解所有这些内存从哪里使用，以及为什么不遵守限制。如果缺少任何信息，我很乐意提供。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T15:11:07.860

[简单明了，JVM 使用的内存比`-Xms`和`-Xmx`和其他命令行参数中提供的更多。](https://stackoverflow.com/a/9146775/177800)

这是[一篇关于 JVM 如何分配和管理内存的非常详细的文章](http://www.ibm.com/developerworks/java/library/j-nativememory-linux/)，它并不像您在问题中的假设所期望的那么简单，值得全面阅读。

许多实现中的 ThreadStack 大小都有最小限制，这些限制因操作系统和有时 JVM 版本而异；如果您将限制设置为低于 JVM 或操作系统的本机操作系统限制，则忽略线程堆栈设置（有时必须设置 *nix 上的 ulimit）。其他命令行选项的工作方式相同，当提供的值太小时，默认为更高的值。不要假设传入的所有值都代表实际使用的值。

类加载器和 Tomcat 不止一个，它们会占用大量不易记录的内存。JIT 会占用大量内存，以空间换时间，这在大多数情况下是一个很好的权衡。

您引用的数字非常接近我的预期。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T15:13:30.610

虚拟内存是使用的地址空间量，我不会太在意，因为您有一个 64 位应用程序。驻留是实际使用的主内存量。

您可以添加到您的列表

*   包括 JVM 在内的共享库。~ 0.5 克
*   direct memory (0 to 4G) 最大值默认与堆最大值相同。
*   内存映射文件。没有限制。

你可以做一个`pmap`告诉你有多少地址空间被用于什么目的。

顺便说一句：由于内存映射文件，我有一个进程在顶部显示 640G VIRT。它可以比居民的大小高很多。;)

# model-view-controller - 如何解耦存储库和实体

> ID：10818359
> 
> 赞同：3
> 
> 时间：2012-05-30T14:30:05.480
> 
> 标签：model-view-controller, model, ddd-repositories

这是一个关于领域模型设计的问题。

假设对于涉及用户和组的域设计，我们有以下接口要实现：

```
interface IUser
{
    string Name{get;}
    DateTime DOB {get;}
}

interface IGroup
{
    string Name {get;}
    bool IsUserInGroup(IUser user); // #1
    void IncludeUser(IUser user);   // #2
    void ExcludeUser(IUser user);   // #3
}

interface IUserRepository
{
    IUser Create(string name);
    IUser GetByName(string name);
    void Remove(IUser user);
    void Save(IUser user);
}

interface IGroupRepository
{
    IGroup Create(string name);
    IGroup GetByName(string name);
    void Remove(IGroup group);
    void Save(IGroup group);
} 
```

棘手的一点是实现 #1 #2 和 #3，同时保持实体类（用户、组）与存储库类（用户存储库、组存储库）分离。

另一个需要考虑的技术问题是大多数 RMDB 系统不实现多对多关系，并且在实践中总是有一个单独的表（例如，UserGroupAssociation）来记录每个记录通过外键关联一个用户和一个组。我想从域接口中隐藏这个实现细节，并通过成员 #1 #2 和 #3 公开等效逻辑。

调用#2 和#3 的效果不应该持续到有问题的组对象被保存（即传递给存储库对象的 Save() 方法）

你通常是怎么做的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:08:39.527

我不这样做。我的`Repository`对象与它们相关的聚合的根紧密耦合，并且（顺便说一句）我不会费心为我的域模型对象创建接口，除非我发现我有充分的理由这样做 - 你呢有特别的理由这样做吗？

我没有遇到任何`Repository`不使用存储库类中的实体实现类型的示例（例如[this](https://stackoverflow.com/questions/9601057/class-derived-from-generic-repository)），并且想不出使用接口的任何真正优势。接口通过在测试时更容易模拟系统的整个层来赢得基础设施组件（如 a ）的保留，`Repository`但使用域对象的接口不会获得相同类型的优势。

**也许要真正回答这个问题......**

我从来没有一个域对象访问 a `Repository`- 毕竟域对象应该代表现实生活中域中的某些东西，而存储库是现实生活中不存在的基础设施组件，那么为什么域对象会知道一个呢？

对于将 a 添加`User`到 a的具体示例`Group`，我将使用[服务层](http://martinfowler.com/eaaCatalog/serviceLayer.html)类，并执行以下操作：

```
public class UserService
{
    private readonly IGroupRepository _groupRepository;
    private readonly IUserRepository _userRepository;

    public UserService(
        IGroupRepository groupRepository,
        IUserRepository userRepository)
    {
        this._groupRepository = groupRepository;
        this._userRepository = userRepository;
    }

    public void IncludeUserInGroup(string groupName, string userName)
    {
        var group = this._groupRepository.FindByName(groupName);
        var user = this._userRepository.FindByName(userName);

        group.IncludeUser(user);

        this._userRepository.SaveChanges();
    }
}

public class User
{
    public void AddToGroup(Group group)
    {
        this.Groups.Add(group);
    }

    public void RemoveFromGroup(Group group)
    {
        this.Groups.Remove(group);
    }
} 
```

需要注意的几点：

1.  为了避免在将 a 添加到 a时延迟加载大量`User`s，我将管理方法移到了- 根据您实际拥有的行为数量，您甚至可以考虑将其转换为枚举而不是类。请注意，如果您使用带有s 的实体框架 POCO T4 模板，这仍然会延迟加载a 中的所有 s ，但您可以通过一种或另一种方式解决这个问题:)`User``Group``Group``User``Group``FixupCollection``User``Group`

2.  服务层类将实现一个`Create()`方法，就像您在存储库中拥有的那样。存储库将有一个`Add`方法，`Find`方法和一个`SaveChanges()`方法。`Add`将由服务层创建的对象添加到对象上下文中。

3.  所有`Repository`类都将设置为使用相同的底层、请求范围的对象上下文，因此调用哪个类并不重要`SaveChanges()`。

4.  `SaveChanges()`将导致在该请求期间发生在对象上的所有更改都被保存，例如`User`将新`Group`的 ' 添加到其`Groups`集合中。

最后，将实体与 Repositories 和其他基础设施组件分离的另一种好技术是[Domain Events](http://www.udidahan.com/2009/06/14/domain-events-salvation/)。

# php - Doctrine 2 DQL 查询返回过滤的关联

> ID：10818362
> 
> 赞同：1
> 
> 时间：2012-05-30T14:30:10.347
> 
> 标签：php, doctrine, doctrine-orm

我有一个与 PartyContact 具有一对多双向关联的实体 Party。我正在尝试编写 DQL 语句以在使用对象水合时返回过滤的 PartyContact 集合。我可以使用数组水合返回所需的结果，但是当我尝试返回纯对象水合时，我会收到整个集合。

总共有 5 个 PartyContact 实例与 Party（id 为 1）关联，并且与此 Party 实例关联的 5 个 PartyContact 实例中有 3 个具有名为 type 的属性，其值为`PartyContact::TYPE_HOME;` 所以我应该能够返回一个 Party具有 3 个 PartyContact 实例的过滤集合的实例。

过去，我使用事件侦听器、闭包和/或过滤器迭代器来处理对实体集合的过滤。性能方面，这似乎有点多。我知道带有 Doctrine 2.2 的新过滤器，但希望能够在我的存储库中的 DQL 中处理这个问题。

仅供参考，我正在使用 2.2.0-BETA2（注意：刚刚检查过这个，我知道已经发布了 2.2.2，所以我现在就试试）

我有以下dql：

```
$query = $this->_em->createQuery("SELECT p, c FROM Test\Party p LEFT JOIN p.contactMechanisms c WITH c.type = :type WHERE p.id = :id");
$query->setParameter('type', PartyContact::TYPE_HOME);
$query->setParameter('id', 1);
$query->setFetchMode("Test\Party", "contactMechanisms", "EAGER");
$results = $query->getResult(Query::HYDRATE_ARRAY);
$party = $results[0]; 
```

我的结果如下：

*   使用 Query::getResult(Query::HYDRATE_ARRAY) 时：

```
count($party['contactMechanisms']) = 3 
```

*   使用 Query::getResult(Query::HYDRATE_ARRAY) 时：

```
$party->getContactMechanisms()->count() = 5 
```

# java - 如何在 Netbeans 中从 maven 安装 PrimeFaces？我收到标签库 http://primefaces.org/ui 不存在的警告

> ID：10818367
> 
> 赞同：10
> 
> 时间：2012-05-30T14:30:17.010
> 
> 标签：java, jsf, maven, netbeans, primefaces

我测试了从 PrimeFaces部署这个[示例。](http://www.primefaces.org/showcase-labs/ui/areaChart.jsf)

我不知道为什么它不起作用。我收到此错误消息：

警告：此页面要求使用前缀 p 声明的 xml 命名空间[http://primefaces.org/ui](http://primefaces.org/ui)但该命名空间不存在 taglibtrary

我按照本[教程](http://primefaces.org/gettingStarted.html)正确安装 jar。我下载了 Primefaces jar 文件并将其添加到`resources`目录中的 WAR 文件中。

```
 <dependency>
        <groupId>org.primefaces</groupId>
        <artifactId>primefaces</artifactId>
        <version>3.3</version>
        <type>jar</type>
    </dependency> 
```

我还将 Primefaces.jar 文件添加到 Glassfish 的 /modules 目录中，并将模块的名称添加到 default-web.xml 文件中。它不工作。

我错过了什么？

**编辑2** 我是正确的POM文件是问题：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.DX_57</groupId>
    <artifactId>History-Module-57</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>war</packaging>

    <name>History-Module-57</name>

    <properties>
        <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>       
        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-web-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>
        </dependency>

        <dependency>  
            <groupId>org.primefaces</groupId>  
            <artifactId>primefaces</artifactId>  
            <version>3.3</version>  
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.2</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.osgi</groupId>
            <artifactId>org.osgi.core</artifactId>
            <version>4.2.0</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.osgi</groupId>
            <artifactId>org.osgi.compendium</artifactId>
            <version>4.2.0</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.glassfish</groupId>
            <artifactId>osgi-cdi-api</artifactId>
            <version>3.1-b41</version>
            <type>jar</type>
            <scope>provided</scope>
        </dependency>
    </dependencies>

    <build>
        <pluginManagement>

            <plugins>
                <plugin>
                    <groupId>org.apache.felix</groupId>
                    <artifactId>maven-bundle-plugin</artifactId>
                    <version>2.1.0</version>
                    <extensions>true</extensions>
                    <configuration>
                        <supportedProjectTypes>
                            <supportedProjectType>ejb</supportedProjectType>
                            <supportedProjectType>war</supportedProjectType>
                            <supportedProjectType>bundle</supportedProjectType>
                            <supportedProjectType>jar</supportedProjectType>
                        </supportedProjectTypes>
                        <instructions>
                            <!-- Read all OSGi configuration info from this optional file -->
                            <_include>-osgi.properties</_include>
                            <!-- By default, we don't export anything -->
                            <Export-Package>!*.impl.*, *</Export-Package>
                            <DynamicImport-Package>javax.*, org.*, com.sun.faces.*</DynamicImport-Package>
                            <Import-Package>*;resolution:=optional</Import-Package>
                            <Embed-Dependency>*;scope=compile|runtime;inline=false</Embed-Dependency>
                            <Embed-Transitive>true</Embed-Transitive>
                            <Embed-Directory>WEB-INF/lib</Embed-Directory>
                            <Embed-StripVersion>false</Embed-StripVersion>
                            <Embed-StripGroup>true</Embed-StripGroup>
                            <Bundle-ClassPath>.,WEB-INF/classes</Bundle-ClassPath>
                        </instructions>
                    </configuration>
                    <executions>
                        <execution>
                            <id>bundle-manifest</id>
                            <phase>process-classes</phase>
                            <goals>
                                <goal>manifest</goal>
                            </goals>
                        </execution>
                        <execution>
                            <id>bundle-install</id>
                            <phase>install</phase>
                            <goals>
                                <goal>install</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin> 

                <plugin> <!-- Need to use this plugin to build war files -->
                    <artifactId>maven-war-plugin</artifactId>
                    <groupId>org.apache.maven.plugins</groupId>
                    <!-- Use version 2.1-beta-1, as it supports the new property failOnMissingWebXml -->
                    <version>2.1-beta-1</version>
                    <configuration>
                        <archive>
                            <!-- add bundle plugin generated manifest to the war -->
                            <manifestFile>
                                ${project.build.outputDirectory}/META-INF/MANIFEST.MF
                            </manifestFile>
                            <!-- For some reason, adding Bundle-ClassPath in maven-bundle-plugin
                            confuses that plugin and it generates wrong Import-Package, etc.
                            So, we generate it here.
                            -->
                            <manifestEntries>
                                <Bundle-ClassPath>WEB-INF/classes/
                                </Bundle-ClassPath>
                            </manifestEntries>
                        </archive>
                    <!-- We don't have a web.xml -->
                        <failOnMissingWebXml>false</failOnMissingWebXml>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>2.1</version>
                <executions>
                    <execution>
                        <phase>validate</phase>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${endorsed.dir}</outputDirectory>
                            <silent>true</silent>
                            <artifactItems>
                                <artifactItem>
                                    <groupId>javax</groupId>
                                    <artifactId>javaee-endorsed-api</artifactId>
                                    <version>6.0</version>
                                    <type>jar</type>
                                </artifactItem>
                            </artifactItems>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                    <compilerArguments>
                        <endorseddirs>${endorsed.dir}</endorseddirs>
                    </compilerArguments>
                </configuration>
            </plugin>
            <plugin>
                <!-- Enable this plugin for all modules -->
                <groupId>org.apache.felix</groupId>
                <artifactId>maven-bundle-plugin</artifactId>
            </plugin>
        </plugins>
    </build>
    <repositories>
        <repository>
            <id>glassfish-repo</id>
            <name>The Glassfish repository</name>
            <url>http://download.java.net/maven/glassfish/</url>
        </repository>
        <repository>  
            <id>prime-repo</id>  
            <name>PrimeFaces Maven Repository</name>  
            <url>http://repository.primefaces.org</url>  
            <layout>default</layout>  
        </repository>  
    </repositories>
    <description>Module History Module</description>
</project> 
```

必须添加这些行才能使 Primefaces 正常工作：

```
<instructions>
    <!-- Read all OSGi configuration info from this optional file -->
    <_include>-osgi.properties</_include>
    <!-- By default, we don't export anything -->
    <Export-Package>!*.impl.*, *</Export-Package>
    <DynamicImport-Package>javax.*, org.*, com.sun.faces.*</DynamicImport-Package>
    <Import-Package>*;resolution:=optional</Import-Package>
    <Embed-Dependency>*;scope=compile|runtime;inline=false</Embed-Dependency>
    <Embed-Transitive>true</Embed-Transitive>
    <Embed-Directory>WEB-INF/lib</Embed-Directory>
    <Embed-StripVersion>false</Embed-StripVersion>
    <Embed-StripGroup>true</Embed-StripGroup>
    <Bundle-ClassPath>.,WEB-INF/classes</Bundle-ClassPath>
</instructions> 
```

但我注意到一个非常奇怪的问题。例如，我可以使用没有 managedbeans 的简单 PrimeFaces 标签，`<p:spinner>`但是如果我想使用带有托管 bean 的标签，则找不到 bean。也许他们不可见？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-05T14:23:51.920

我只是按照 Primefaces 下载指南中的步骤进行操作：

[http://primefaces.org/downloads.html](http://primefaces.org/downloads.html)

**使用 Maven 下载**

PrimeFaces 发行版部署在 PrimeFaces 存储库中，为了让 maven 了解此存储库，请将以下存储库定义添加到存储库部分的 pom.xml 中。

```
<repository>  
  <id>prime-repo</id>  
  <name>PrimeFaces Maven Repository</name>  
  <url>http://repository.primefaces.org</url>  
  <layout>default</layout>  
</repository> 
```

并将依赖配置添加为；

```
<dependency>
  <groupId>org.primefaces</groupId>
  <artifactId>primefaces</artifactId>
  <version>3.3</version>
</dependency> 
```

之后，我将 Primefaces 存储库添加到我的 Nexus 安装中，它按预期工作。

我希望它对你有帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-21T08:48:36.977

Step1：在netbeans中创建一个maven web应用项目

Step2：在项目资源管理器中右键单击项目。

第三步：选择属性

Step4：选择框架

第五步：点击添加

Step6：选择java server faces

Step7：从组件选项卡中选择primeface

第八步：点击确定

# java - Java 7，尝试并发现问题？Ubuntu Eclipse IDE

> ID：10818372
> 
> 赞同：0
> 
> 时间：2012-05-30T14:30:29.247
> 
> 标签：java, ubuntu

您好，我对下面的代码有一些问题。try 和 catch 块在我的 IDE 中的 try 行有一个红色的 X，告诉我遇到了“（”，但预期的是“{”。我错过了什么吗？我的问题可能是什么？

```
import java.io.IOException;
import java.net.InetSocketAddress;
import java.net.StandardSocketOptions;
import java.nio.ByteBuffer;
import java.nio.channels.AsynchronousServerSocketChannel;
import java.nio.channels.AsynchronousSocketChannel;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.Future;
/** * * @author Apress */

public class FutureForm 
{
public static void main(String[] args) 
{
    final int DEFAULT_PORT = 5555;
    final String IP = "127.0.0.1";
    // v-This parenthesis should be a bracket it says??
    try( AsynchronousServerSocketChannel asynchronousServerSocketChannel = AsynchronousServerSocketChannel.open()) 
    {
        if (asynchronousServerSocketChannel.isOpen()) 
        {
            asynchronousServerSocketChannel.bind(new InetSocketAddress(IP, DEFAULT_PORT));
            System.out.println("Waiting for connections ...");
            while (true) 
            {
                Future<AsynchronousSocketChannel> asynchronousSocketChannelFuture = asynchronousServerSocketChannel.accept();
                try (AsynchronousSocketChannel asynchronousSocketChannel = asynchronousSocketChannelFuture.get()) 
                {
                    System.out.println("Incoming connection from: " + asynchronousSocketChannel.getRemoteAddress());
                    final ByteBuffer buffer = ByteBuffer.allocateDirect(1024);
                    while (asynchronousSocketChannel.read(buffer).get() != -1) 
                    {
                        buffer.flip();
                        asynchronousSocketChannel.write(buffer).get();
                        if (buffer.hasRemaining()) 
                            buffer.compact();
                        else 
                            buffer.clear();
                    }
                    System.out.println(asynchronousSocketChannel.getRemoteAddress() + " was successfully served!");
                } 
                catch (IOException || InterruptedException || ExecutionException ex) 
                {
                    System.err.println(ex);
                }
            }
        } 
        else 
        {
            System.out.println("The asynchronous server-socket channel cannot be opened!");
        }
    } 
    catch (IOException ex) 
    {
        System.err.println(ex);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T14:32:23.723

不确定这是否是警告的原因，但您的 multicatch 中有语法错误：您只需要使用单个管道。

```
catch (IOException | InterruptedException | ExecutionException ex) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:34:43.707

在 Java>Compiler 下的 Preferences 中验证您是否已为 Java 1.7 配置了工作区：“Compiler compliance level”。

如果这没有帮助，请检查 Java Compiler 下的项目属性，它应该没有特定于项目的设置，或者配置了 1.7。

# c# - 在winRT中将2个图像合并在一起

> ID：10818374
> 
> 赞同：0
> 
> 时间：2012-05-30T14:30:30.340
> 
> 标签：c#, windows-8, winrt-xaml

有人知道如何在一张大图像中合并 2 个矩形图像吗？自然地跟踪边界，因此它们并排并且不重叠......

这是一个很好的起点[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/490b9c01-db4b-434f-8aff-d5c495e67e55](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/490b9c01-db4b-434f-8aff-d5c495e67e55)关于如何裁剪图像并将其设置为另一个，但不是如何合并多个图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T14:30:30.533

看来 WriteableBitmapEx 的 1.0 版终于可以工作了！所以您现在可以使用 Blit 命令来执行此操作！

[http://writeablebitmapex.codeplex.com/](http://writeablebitmapex.codeplex.com/) [http://writeablebitmapex.codeplex.com/discussions/357603](http://writeablebitmapex.codeplex.com/discussions/357603)

# eclipse - Eclipse 产品配置：为“arch”设置 launcherArgs

> ID：10818376
> 
> 赞同：0
> 
> 时间：2012-05-30T14:30:34.530
> 
> 标签：eclipse, eclipse-rcp, p2, tycho

eclipse 产品配置有“launcherArgs”部分，可以全局指定或为任何支持的平台指定。我们为`win32`as构建产品`x86`，`x86_64`我希望根据 arch 属性生成不同的 .ini。具体来说：这是一个内部应用程序，JVM 被部署到每个客户端的同一个目录中，但在 32 位和 64 位机器之间有所不同。

我们使用 maven/tycho 构建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:14:43.923

恐怕这是第谷重复使用的 PDE 产品文件格式的限制/错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:50:54.180

可以使用以下关键字在 p2.inf 建议文件中实现：

`filter=(&(osgi.os=win32)(osgi.arch=x86_64)) instructions.configure=setProgramProperty(propName:-vm,propValue:64bitVM)`

这实际上并不容易，p2.inf 文件的正确语法对我来说仍然是一个奇迹。但不知何故，我得到了这个工作。如果有人还想在 p2.inf 文件中做一些事情，那么查看 content.xml 文件会很有帮助......

# ios - 如何从 iOS 中的 GLKVector2 获取 vectorLeft 值？

> ID：10818378
> 
> 赞同：4
> 
> 时间：2012-05-30T14:30:36.600
> 
> 标签：ios

现在我正在开发一个简单的游戏。我使用 GLKVector2 来添加两个向量值，例如 A 和 B。向量结果，例如 (58.8717, 156)。然后，我想获得 58.8717 中的第一个值，但我不知道如何获得它。

```
GLKVector2 position = GLKVector2Add(A, B);  
NSLog(@"Position:%@",NSStringFromGLKVector2(position));
//NSLog value - Position:{58.8717, 156} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:01:55.890

如果你想获得第一个值，你必须寻找`position.x`.

```
NSLog(@"Position:%f",position.x); 
```

上面的行将记录预期的结果。

# java - 读取文件并提供多个参数进行搜索

> ID：10818382
> 
> 赞同：0
> 
> 时间：2012-05-30T14:30:42.927
> 
> 标签：java, search, arguments

我正在尝试了解如何为我正在尝试的项目搜索某些关键字。我正在使用由其他人创建的程序，并尝试对其进行修改以接受两个参数。到目前为止，我一直试图在“搜索”+ args[0] 之后添加 args[1]，希望它会搜索第二个参数，但是这没有奏效，并导致程序报告该位置是在 -第 2 行的第 1 行。我正在读取的文本文件显示为：

```
one
two
three 
```

任何人都可以为我如何传递两个参数提供帮助。

谢谢

```
// Import io so we can use file objects
import java.io.*;

public class searchfile {
public static void main(String args[]) {
    try {
        // Open the file c:\test.txt as a buffered reader
        BufferedReader bf = new BufferedReader(new FileReader("C:/Users/Sean/Desktop/Java/MyText.txt"));

        // Start a line count and declare a string to hold our current line.
        int linecount = 0;
            String line;

        // Let the user know what we are searching for
        System.out.println("Searching for " + args[0] + " in file...");

        // Loop through each line, stashing the line into our line variable.
        while (( line = bf.readLine()) != null)
        {
                // Increment the count and find the index of the word
                linecount++;
                int indexfound = line.indexOf(args[0]);

                // If greater than -1, means we found the word
                if (indexfound > -1) {
                     System.out.println("Word was found at position " + indexfound +" on line " + linecount);
                }
        }

        // Close the file after done searching
        bf.close();
    }
    catch (IOException e) {
        System.out.println("IO Error Occurred: " + e.toString());
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:41:55.373

```
// Import io so we can use file objects
import java.io.*;

public class searchfile {
public static void main(String args[]) {
    try {
        // Open the file c:\test.txt as a buffered reader
        BufferedReader bf = new BufferedReader(new FileReader("C:/Users/Sean/Desktop/Java/MyText.txt"));

        // Start a line count and declare a string to hold our current line.
        int linecount = 0;
            String line;

        // Let the user know what we are searching for
        // i.e. just printing to the console, not actually searching.
        System.out.println("Searching for " + args[0] + " in file...");

        // Loop through each line, stashing the line into our line variable.
        while (( line = bf.readLine()) != null)
        {
                // Count lines. We read a line this variable (linecount) increments by one
                linecount++; 
                // the indexOf function returns the index (i.e. the place of) the parameter, in this case args[0]. If it doesn't find the parameter, it returns -1, an impossible value, so we know it wasn't found.
                // Here is the actual searching done, till...
                int indexfound = line.indexOf(args[0]);

                // If greater than -1, means we found the word
                if (indexfound > -1) {
                     System.out.println("Word was found at position " + indexfound +" on line " + linecount);
                }
                // ...here.
        }

        // Close the file after done searching
        bf.close();
    }
    catch (IOException e) {
        System.out.println("IO Error Occurred: " + e.toString());
    }
}

} 
```

我在评论中说搜索完成。我认为您可以复制其中的大部分内容，然后为 args[1] 再次执行此操作。

有关更多参数（不确定它是否是最佳/最快的解决方案）：

```
// Import io so we can use file objects
import java.io.*;

public class searchfile {
public static void main(String args[]) {
    try {
        // Open the file c:\test.txt as a buffered reader
        BufferedReader bf = new BufferedReader(new FileReader("C:/Users/Sean/Desktop/Java/MyText.txt"));

        // Start a line count and declare a string to hold our current line.
        int linecount = 0;
            String line;

        // Let the user know what we are searching for
        // i.e. just printing to the console, not actually searching.
        System.out.println("Searching for " + args[0] + " in file...");

        // Loop through each line, stashing the line into our line variable.
        while (( line = bf.readLine()) != null)
        {
                // Count lines. We read a line this variable (linecount) increments by one
                linecount++; 
                // the indexOf function returns the index (i.e. the place of) the parameter, in this case args[0]. If it doesn't find the parameter, it returns -1, an impossible value, so we know it wasn't found.
                // Here is the actual searching done, till...
                for(int index = 0; true; index++) {
                try {
                int indexfound = line.indexOf(args[index]);

                // If greater than -1, means we found the word
                if (indexfound > -1) {
                     System.out.println("Word was found at position " + indexfound +" on line " + linecount);
                }
                }
                catch(ArrayIndexOutOfBoundsException ex) {
                    break;
                }
                // ...here.
                }
        }

        // Close the file after done searching
        bf.close();
    }
    catch (IOException e) {
        System.out.println("IO Error Occurred: " + e.toString());
    }
}

} 
```

我不确定这是否有效，可能不是，但我只是在脑海中写下这个（未经测试）。

# excel - 比较 2 个型号以查看价格是否匹配

> ID：10818388
> 
> 赞同：0
> 
> 时间：2012-05-30T14:30:59.833
> 
> 标签：excel, excel-formula

我有 2 张带有产品型号和价格的 Excel 表格，一张来自我们的在线商店，一张来自我们的会计软件。

并非所有在线模型都在会计软件中，反之亦然。

我希望能够比较型号，如果它们匹配来比较另一列中的价格（寻找价格差异）。

我相信这可以用 a 来写`VLOOKUP`，但我在尝试时不断得到循环引用。为了使这更容易，我将所有列复制到一张纸上。所以它是 1 张 4 列

> A：型号
> B：价格
> C：型号
> D：价格

这是我到目前为止所拥有的：`=VLOOKUP(A2,$C$2:$C$1192,D2,FALSE)`

我得到的主要是`#N/A`，但也有一堆`#REF!`。很确定`#REF`数组中有匹配项，但由于某种原因，我得到了循环引用？

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:39:25.950

*   的第二个参数`VLOOKUP`必须包含一个范围，其中第一列是您要查找的键以及相应值所在的列。在您的情况下，它应该包括列 C（键）和 D（值）。
*   的第三个参数`VLOOKUP`是列**号**。在这种情况下，为 2，（C 为 1，D 为 2）。

因此，在您的情况下，公式如下所示：

```
=VLOOKUP(A2,$C$2:$D$1192,2,FALSE) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:41:47.783

The vlookup requires that you use the index of the column you want to return, so instead of D2, you'd have to put a number. Also, the column you want to return has to be part of the range. The best way to do this is to use: =VLOOKUP(A2, $C$2:$D$1992, 2, false).

# java - EJB 查询语言与 HQL

> ID：10818389
> 
> 赞同：1
> 
> 时间：2012-05-30T14:31:02.407
> 
> 标签：java, hibernate, ejb, hql

EJB 查询语言 (EQL) 是否与 Hibernate 查询语言 (HQL) 相同？

我正在阅读 Bill Burke 的名为 Enterprise Java Beans 3.0 的书，它把它称为 EQL。

它们实际上是一样的吗，只有一个用于 EJB，一个用于 Hibernate？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:38:58.957

HQL 是 EQL（或 JPQL）的超集。它包含其他功能和构造，但它们基本相同。Hibernate 还没有实现 JPQL 的一些特性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T14:49:44.987

EJB 查询语言是为 JPA 实现（也称为 JPQL）而构建的标准查询语言，如果您使用的 ORM 符合 JPA，那么将支持该查询语言，因此其背后的想法是您应该能够更改您的 JPA 实现，而无需更改您的查询。

另一方面，HQL 是特定于休眠的，如果您不使用休眠作为 JPA 实现，那么您的查询可能无法正常工作。

# c# - 将大数据从 WCF 服务器发送到 Delphi 客户端

> ID：10818391
> 
> 赞同：0
> 
> 时间：2012-05-30T14:31:04.003
> 
> 标签：c#, wcf, delphi, delphi-2010

我需要创建一个具有下载文件功能的 WCF 服务。此 WCF 将由 Delphi 应用程序使用。

问题：将要下载的文件非常大，可能会导致Delphi端出现内存问题。到目前为止，我有这个代码：

```
[OperationContract]
byte[] DownloadFile(string filePath); 
```

但是此代码将导致客户端应用程序将所有数据保存在内存中，这可能是一个问题。

我已经读到 WCF 能够流式传输数据，您可以在以下位置阅读：[如何：启用流式传输](http://msdn.microsoft.com/en-us/library/ms789010.aspx)

但我对从 MSDN 截取的这段代码有疑问：

```
[OperationContract]
Stream GetStream(string data); 
```

在客户端，我想将 a 传递`TFileStream`给函数。通过使用`TFileStream`每个字节读取将直接进入磁盘。但是函数返回一个流，而我想要的将是不可能的，因为流不是函数的参数。

如何将文件从 WCF 服务直接下载到磁盘？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T14:57:37.603

我发现在使用其他（非.NET）客户端时依赖 WCF 中的“内置”流功能是奇怪问题的一大来源......

基本上我们通过定义来解决这种情况：

```
[OperationContract]
string DownloadFile(string filePath); 
```

该方法生成一个 HTTP(S) url 并返回它......

这样，任何支持 http 的客户端都可以以稳健的方式处理数据......

请注意，这会使服务器变得更加复杂，因为您现在需要一些机制来生成（并在其上提供 HTTP GET）URL（安全性、“全局”唯一性、只能在有限的时间内使用等）。

BUT the big advantage is that any client out there (mobile or some strange embedded device or whatever you might encounter) will be able to implement this scheme as long as it has http-support available (Delphi has some very good http-client options).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T14:43:48.517

首先，我不确定您是否可以在 Delphi 2010 中使用流式 WCF 服务。如果可以，那么它的工作原理如下：

WCF 服务*必须*是流式服务，这意味着您需要将`transferMode`绑定的 设置为`Streamed`或`StreamedResponse`。如果你想传入一个字符串作为参数，它必须是`StreamedResponse`，否则，参数也必须是一个流。

拥有流式服务还意味着没有方法不返回流或`void`. 例如，当它是流式服务时，不可能在同一服务中具有以下两种方法。

```
Stream GetStream(string s);
int GetInteger(string s); 
```

也不可能拥有：

```
Stream GetStream(string s); 
```

在配置为 的服务中`Streamed`，因为参数也必须是流。

不可能使用将被“填充”的流调用该方法，即使您使该方法带有一个参数 - 不是在该点来回传递`Stream`的真实实例，而是内容实际上被复制回来和`Stream`向前。

在 Delphi 中，您将通过方法调用获得一个流。然后，您可以将该流的内容复制到 a`TFileStream`中，就像源是 Delphi 中的另一个流一样。可以用谷歌搜索代码。基本上阿德里亚诺已经发布了一些应该工作的东西。基本上：从源流读取，写入目标流，直到所有内容都被读取和写入，或者您可以尝试类似的操作：

```
stream1 := wcfServiceClient.GetTheStream();
try
    stream2:= TFileStream.Create('to.txt', fmCreate);
    try
        stream2.CopyFrom(stream1, stream1.Size);
    finally
        stream2.Free;
    end;
finally
    stream1.Free;
end; 
```

同样：这仅在您可以从 Delphi 访问 WCF 流服务的假设下有效，就像您从 C# 或 VB.NET 访问它一样。

# matlab - matlab：将带圆圈的数字放在图形上

> ID：10818392
> 
> 赞同：6
> 
> 时间：2012-05-30T14:31:09.987
> 
> 标签：matlab, annotations, graphing

我想在图表上放一个带圆圈的数字作为*靠近*（但不在）一个点的标记。听起来很简单，但我也想保持缩放/纵横比变化不变。

由于这个不变量，我不能画一个圆作为线对象（在重新缩放时不重新绘制它）；如果我使用圆形标记，我必须在重新缩放时调整它的偏移量。

`text()`我能想到的最简单的方法是在函数的字符串中使用 Unicode 或 Wingdings 字符①②③等。但是 unicode 似乎无法正常工作，以下示例仅适用于 ① 而不适用于其他数字（产生矩形框）：

作品：

```
clf; text(0.5,0.5,char(129),'FontName','WingDings') 
```

不起作用（应该是带圆圈的 2）：

```
clf; text(0.5,0.5,char(130),'FontName','WingDings') 
```

什么给出了，任何人都可以提出解决方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T14:43:12.470

这似乎对我有用，使用 Matlab 的乳胶解释器，并且`\textcircled`：

```
clf; text(0.5, 0.5, '$\textcircled{2}$', 'Interpreter', 'latex') 
```

该`\textcircled`命令似乎有一些[偏移问题](https://tex.stackexchange.com/questions/7032/good-way-to-make-textcircled-numbers)，也许您可​​以尝试改进使用过的 latex 命令并告诉我们:)

例如，按照上面的链接，我得到了更好的结果：

```
clf; text(0.5, 0.5, '$\raisebox{.5pt}{\textcircled{\raisebox{-.9pt} {2}}}$', 'Interpreter', 'latex') 
```

尽管如此，两位数看起来还是很糟糕。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-31T16:35:29.460

这是一个示例，其中标记（文本+圆圈）对于缩放/调整大小是不变的：

```
%# some graph in 2D
[adj,XY] = bucky;
N = 30;
adj = adj(1:N,1:N);
XY = XY(1:N,1:2);

%# plot edges
[xx yy] = gplot(adj, XY);
hFig = figure(); axis equal
line(xx, yy, 'LineStyle','-', 'Color','b', 'Marker','s', 'MarkerFaceColor','g')

%# draw text near vertices
xoff = 0; yoff = 0;     %# optional offsets
str = strtrim(cellstr(num2str((1:N)')));
hTxt = text(XY(:,1)+xoff, XY(:,2)+yoff, str, ...
    'FontSize',12, 'FontWeight','bold', ...
    'HorizontalAlign','right', 'VerticalAlign','bottom');

%# draw circles around text
e = cell2mat(get(hTxt, {'Extent'}));
p = e(:,1:2) + e(:,3:4)./2;
hLine = line('XData',p(:,1), 'YData',p(:,2), ...
    'LineStyle','none', 'Marker','o', 'MarkerSize',18, ...
    'MarkerFaceColor','none', 'MarkerEdgeColor','k');

%# link circles position to text (on zoom and figure resize)
callbackFcn = @(o,e) set(hLine, ...
    'XData',cellfun(@(x)x(1)+x(3)/2,get(hTxt,{'Extent'})), ...
    'YData',cellfun(@(x)x(2)+x(4)/2,get(hTxt,{'Extent'})) );
set(zoom(hFig), 'ActionPostCallback',callbackFcn)
set(hFig, 'ResizeFcn',callbackFcn) 
```

![截屏](../Images/cbc3368bb794ba1dc5cb14e1bd52edda.png)

[与@catchmeifyoutry](https://stackoverflow.com/a/10818610/97160)提出的基于 LaTeX 的解决方案进行比较（注意两位数）：

```
%# use LaTeX to draw circled text at vertices
%#str = num2str((1:N)', '$\\textcircled{%d}$');
str = num2str((1:N)', '$\\raisebox{.5pt}{\\textcircled{\\raisebox{-.9pt} {%d}}}$');
text(XY(:,1), XY(:,2), str, ...
    'HorizontalAlign','right', 'VerticalAlign','bottom', ...
    'Interpreter','latex', 'FontSize',18) 
```

![screenshot_latex](../Images/3a02d57f90fc430627de37aa730c2520.png)

# javascript - 如何在 ExtJS 列表 itemTpl 中显示星级小部件？

> ID：10818401
> 
> 赞同：4
> 
> 时间：2012-05-30T14:31:36.093
> 
> 标签：javascript, extjs4, extjs, sencha-touch-2

[我正在开发 Sencha Touch 2 应用程序并使用来自http://podlipensky.com/post/2012/03/20/Sencha-Touch-2-ExtuxtouchRating.aspx](http://podlipensky.com/post/2012/03/20/Sencha-Touch-2-ExtuxtouchRating.aspx)的星级小部件

我想在配置如下的列表中显示每个项目的评分：

```
Ext.define('Schneehoehen.view.LoipenUebersicht', {
extend: 'Ext.navigation.View',
xtype: 'loipenuebersicht',

config: {
    items: [{
        xtype: 'list',
        title: 'Loipen Übersicht',
        itemTpl: '{label}', // I would like to show the widget next to the label
        onItemDisclosure: true,

        store: Ext.create('Schneehoehen.store.LoipenUebersichtStore')
    }]
}
}) 
```

现在我想知道如何在 itemTpl 中包含我的星级小部件。

小部件使用以下代码显示在另一个视图的表单中：

```
new Ext.ux.touch.Rating({
   itemsCount: 5, 
   label: 'Image less', 
   cls: 'x-imageless-rating', 
   itemCls: 'x-imageless-star', 
   itemHoverCls: 'x-imageless-hover'
}) 
```

提前致谢！约翰内斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T20:45:15.033

您需要的是如何在列表的 itemTpl 模板中获取 XTypes 或其他组件。我不知道直接方法，但即使您确实设法使用模板方法编写自己的方法，也很难将它们放在列表项中。除了为什么有这么多的组件占用 dom。

如果您可以在此处稍微修改您的方法，swarm online 上有这个漂亮的插件可能会帮助您解决这个问题。[http://www.swarmonline.com/2011/03/ext-ux-touch-listoptions-demo/](http://www.swarmonline.com/2011/03/ext-ux-touch-listoptions-demo/)

这个插件在列表行的滑动上添加了 twitter 应用程序样式菜单。您可以在该区域添加星级。我记得我曾在 POC 中使用过它，并将 Sencha 按钮添加到显示的菜单中。我不确定他们是否更新了代码以与 Sencha Touch 2 兼容，但如果您仔细查看源代码，那里并没有太多内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T15:14:38.587

如果您热衷于在那里使用 sencha 组件，那么最简单的方法是使用组件数据视图。有关详细信息，请参阅[http://www.sencha.com/blog/dive-into-dataview-with-sencha-touch-2-beta-2/ 。](http://www.sencha.com/blog/dive-into-dataview-with-sencha-touch-2-beta-2/)

# actionscript-3 - AS3 多点触控输入模式 GESTURE & TOUCH_POINT

> ID：10818403
> 
> 赞同：0
> 
> 时间：2012-05-30T14:31:39.947
> 
> 标签：actionscript-3, flash, multi-touch

如何使用 Multitouch.inputMode=MultitouchInputMode.GESTURE & Multitouch.inputMode=MultitouchInputMode.TOUCH_POINT; 一起？

我所有的按钮都需要 TOUCH_TAP，但是像画廊这样的一些对象我需要一些手势，比如滑动/轻弹。

我尝试将 GESTURE 和 TOUCH_POINT 都放在我的 Main 构造函数中，但似乎多点触控不再起作用。

任何解决方案/建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:49:09.463

您可以使用常规鼠标事件进行点击。

# javascript - CSS / HTML Internet Explorer 设置跨度宽度？

> ID：10818404
> 
> 赞同：0
> 
> 时间：2012-05-30T14:31:44.853
> 
> 标签：javascript, html, css, internet-explorer, firefox

只是一个简短的问题...

我有一个跨度容器，它在 FF 中正确设置，具有以下选项：

```
<span id="qmmenue" style="left: 0px; top: 2852px; color: #777777; line-height: 12px; font-family: Calibri; font-size: 12px; display: inline-block; filter: progid:DXImageTransform.Microsoft.Shadow(color="#0000ff", Direction=0, Strength=3) progid:DXImageTransform.Microsoft.Shadow(color="#0000ff", Direction=45, Strength=3) progid:DXImageTransform.Microsoft.Shadow(color="#0000ff", Direction=135, Strength=3); position: absolute; zoom: 1; max-width: 500px; background-color: white;" jQuery17207240081996974917="9"> 
```

在这个跨度中，有一个图像和两个 p 元素。

我的问题是，在 Firefox 中，盒子只有最小宽度。Internet Explorer 在大约 80% 的屏幕中显示该框，并且大部分是空的。

这是FF和IE的截图：

[http://s16.postimage.org/i2ak9xj1x/firefox.png](http://s16.postimage.org/i2ak9xj1x/firefox.png) http://s16.postimage.org/fmdc9tqd1/internetexplorer.png

有什么想法吗？

它应该在 InternetExplorer 的最小宽度上保持一致，但如果可能的话跨浏览器;-)

// 编辑：我在 IE9 中对其进行了测试，它必须适用于 >IE8，这似乎不是块或内联块的问题。两个版本的结果相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:38:44.887

您正在测试哪个版本的 IE。您需要为 IE 设置条件样式`display:block`（旧 IE 版本不支持 inline-block）

[http://www.quirksmode.org/css/display.html](http://www.quirksmode.org/css/display.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:51:53.100

当某些东西在其他浏览器中有效但在 IE9 中无效时，可能是您的标题不正确。检查这个：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

请注意，它不会让它神奇地与 IE8 兼容。

说真的……使用 Word 生成直接提供的 HTML 不是一个可行的长期解决方案……

# deployment - capistrano 部署到具有不同子域变量的多个服务器

> ID：10818405
> 
> 赞同：1
> 
> 时间：2012-05-30T14:31:50.977
> 
> 标签：deployment, nginx, capistrano

[我用这个 railscast 作为基础](http://railscasts.com/episodes/337-capistrano-recipes)

```
# nginx_unicorn.erb
upstream unicorn-<%= application %> {
  server unix:/tmp/unicorn.<%= application %>.sock fail_timeout=0;
}

server {
  listen <%= subdomain ? subdomain : application %>.example.com:443 ssl;
  server_name <%= subdomain ? subdomain : application %>.example.com;
  root <%= current_path %>/public;
  ssl                  on;
  ssl_certificate      /opt/nginx/ssl/example.com.pem;
  ssl_certificate_key  /opt/nginx/ssl/example.com.key;
  ssl_protocols SSLv3 TLSv1;
  ssl_ciphers ALL:-ADH:+HIGH:+MEDIUM:-LOW:-SSLv2:-EXP;
  ssl_session_cache shared:SSL:10m;
  try_files $uri/index.html $uri @unicorn;

  location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }
  location @unicorn {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_set_header X-Forwarded-Proto https;
    proxy_redirect off;
    proxy_pass http://unicorn-<%= application %>;
  }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
} 
```

我在 deploy.rb 中为子域设置了一个变量

```
# deploy.rb
...
role :web, "avps.example.com", "bvps.example.com", "cvps.example.com"
role :app, "avps.example.com", "bvps.example.com", "cvps.example.com"
role :db, "avps.example.com", "bvps.example.com", "cvps.example.com", :primary => true
set :subdomain, "atsp"
... 
```

当我只部署到一台服务器时，这很有效，但我希望能够基于它正在部署到的当前服务器，所以如果它是 avps.example.com，它将：

```
set :subdomain, "atsp" 
```

或者如果它是 bvps.example.com，它会：

```
set :subdomain, "btsp" 
```

有没有简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:03:04.410

我认为您正在寻找的是 Capistrano 多阶段部署。[您可以在此处](https://github.com/capistrano/capistrano/wiki/2.x-Multistage-Extension)找到 wiki 页面。您所要做的就是移动

```
set :subdomain, "atsp" 
```

放入包含服务器信息的文件（即 config/deploy/atsp.rb）中，然后您可以使用

```
cap atsp deploy 
```

希望这可以帮助。

# sql-server - 添加时间间隔 SQL

> ID：10818407
> 
> 赞同：-1
> 
> 时间：2012-05-30T14:31:51.757
> 
> 标签：sql-server, sql-server-2008

我需要从表中添加时间条目。时间条目存储为

P2H30M（2 小时 30 分钟）

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:38:55.867

您是否将时间间隔添加到其他时间间隔？或者定义为日期时间的另一列的时间间隔？

无论哪种方式，您都希望创建一个函数将这些值转换为整数（分钟），然后将整数相加并使用另一个函数将它们转换回您的专有字符格式。

如果您想将它们添加到日期时间列，则可以使用：

```
UPDATE YourTable 
SET YourDateTimeCol = DATEADD(MI, YourDateTimeCol, <yourminuteinteger>) 
WHERE <whatever your where clause would be> 
```

# cuda - 是否可以在 GPU 上的一个时钟周期内添加 1,000,000 个双精度？

> ID：10818410
> 
> 赞同：2
> 
> 时间：2012-05-30T14:31:54.003
> 
> 标签：cuda, gpu, nvidia

我很好奇：在 GPU 上，是否可以在几个时钟周期内并行添加数百万个数字 - 或者这个操作在理论上是不可能并行化的？

GPU 是指来自 nVidia 或 AMD 的任何产品，例如 Tesla M2050。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T14:38:27.833

只有一个时钟周期，还是“几个”？如果是前者，那就不行，任何 GPU 中的硬件资源都远不足以在同一时钟周期内添加数百万个双精度数。如果您的意思是“相对于典型的 CPU，时钟周期相对较少”，那么可以。您希望执行的添加类型也是一个因素。例如，您是否对数组元素进行归约和？还是将两个向量相加？或者在向量中添加一个常数？这些都在 GPU 上具有不同的性能特征。

# c# - 需要有关密码算法的建议

> ID：10818411
> 
> 赞同：7
> 
> 时间：2012-05-30T14:32:02.217
> 
> 标签：c#, security, cryptography, smartcard

为这个问题的论文性质道歉。我一直在努力解决这个问题，并试图总结我对需要什么的理解，以及我遇到的具体问题。

在[这个](https://stackoverflow.com/questions/10704647/reading-data-from-european-dtco-company-card)与从欧洲 DTCO 公司卡读取数据有关的问题中，我得到的建议涉及遵循以下屏幕截图中的算法（来自[本文档](http://eur-lex.europa.eu/LexUriServ/LexUriServ.do?uri=OJ%3aL:2002:207:0001:0252%3aEN%3aPDF)的附录 11 ），但我不清楚如何执行两个突出显示的步骤。

1.  我看到*Sign*是包含证书的数组的一部分，但是用公钥打开它是什么意思？*我可以通过从卡中读取 CA_Certificate 并使用 CAR´ （参见算法的第一步）*从中发出**MANAGE SECURITY ENVIRONMENT** APDU 来成功执行之前的步骤。但是以这种方式选择了公钥，我在*打开签名*步骤中使用什么公钥。MSE选择了一个，但我没有；我只有 ERCA 的欧洲公钥，但那是我在卡中选择的相同密钥吗？我没有任何私钥，但我需要它们。

***   在检查*Hash(C´) = H´*的步骤中，我应该如何计算哈希？似乎有很多不同的方式（格式是正确的词吗？）进行加密/解密/散列，我很困惑。** 

 **![在此处输入图像描述](../Images/964c32cb74268dae4da0021d48d31439.png)

为了读取我需要的数据，我真正需要做的就是在返回 8 字节质询的**GET CHALLENGE**之后立即使用**EXTERNAL AUTHENTICATE进行身份验证。**我想我需要用它来计算**EXTERNAL AUTHENTICATE**的密码。我在下面找到了示例代码（[请参阅完整的帖子](http://www.opensc-project.org/pipermail/opensc-devel/2007-April/009755.html)），虽然它似乎使用了一些类似 C 的脚本语言（我使用的是 C#），并且对于不同类型的智能卡，它似乎与我必须使用的非常相似。

 ****```
//
// Authenticate against CardOS card
//

var card = new Card(_scsh3.reader);
var crypto = new Crypto();

var key = new Key();
key.setComponent(Key.DES,
    new ByteString("01010101010101010101010101010101", HEX));

// Get challenge
var challenge = card.sendApdu(0x00, 0x84, 0x00, 0x00, 8, [0x9000]);

// Crypto.DES_MAC_EMV is a CBC generated Retail-MAC
var cipher = crypto.sign(key, Crypto.DES_MAC_EMV, challenge);

card.sendApdu(0x00, 0x82, 0x00, 0x81, cipher);

print("Card returns " + card.SW.toString(16) + " - " + card.SWMSG); 
```

差异是

1.  附加的 P2 参数表明 MANAGE SECURITY ENVIRONMENT 已经完成，大概是使用*Card_Certificate*中的 CAR´，这对我不起作用，尽管它适用于*CA_Certificate*中的 CAR´。

2.  *Lc*为 0x80，而不是示例代码中的 0x81。

3.  我计算在这里使用的任何密码都必须是 128 字节长，而样本中的密码长度尚不清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T16:47:05.453

不要自己这样做，很多事情都会出错。充气城堡加密库确实支持 ISO 9706-2 签名。它适用于 c# 和 java。

[本文](http://eprint.iacr.org/2009/203.pdf)的一开始就清楚地说明了发生了什么。原来你从卡里得到的是

```
x_c = sign || c_n || c_ar 
```

Sign 是您的消息上的编码/填充/散列函数的输出上的 RSA 签名（在这种情况下，消息似乎是证书）。c_n 是消息的其余部分，c_ar 是创建签名签名的证书颁发机构的标识符。

使用的编码函数是 µ(m) = 6A || 米[1] || 哈希(m) ||BC

在哪里 || 是连接，6A 只是字节 0x6A，同样适用于 0xBC。散列是一些散列函数，m [1](http://eprint.iacr.org/2009/203.pdf)是第一个 k - 散列函数的长度 - 消息的 16 位。m[2] 然后是消息的其余部分，存储为 c_n。

这里不涉及 DES。

你应该在这里做的是

1.  通过连接 \m [1](http://eprint.iacr.org/2009/203.pdf)和 c_n获取消息/证书
2.  计算 µ(m[1] || c_n)
3.  验证签名是 c_ar 中指示的证书颁发机构在 µ(m[1] || c_n) 上的 rsa 签名

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T18:28:28.960

这个回答也有点冗长，因为有个误会要解释一下。上面的文本摘录涉及通过非对称密钥对进行的身份验证。由于除了拥有公钥的私有对应物之外无法证明任何事情，因此需要额外的凭据。证书的颁发者通常声称已经验证了您的身份，并通过证书的签名记录了这一点（该签名仅在颁发者的公钥在互联网上广为人知或因为它已经存储在卡上时才有用）。通常，智能卡在“验证证书”模式下提供“执行安全操作”命令，用于此目的：它验证发行者的签名，

您的代码片段通过对称密钥（也称为密钥）处理身份验证。假设这个秘密只有被授权的人知道。您认为 LC 的 0x81 实际上是 P2，意思是“请使用本地密钥 #1”以使用此密钥验证 MAC 计算。事实上，将 8 字节随机数作为计算（零售或其他）MAC 的输入通常会（即应用标准填充方案）导致 16 字节结果。顺便说一句，示例中的 DES 密钥很糟糕。每个字节的最低有效位是奇偶校验位，因此密钥仅包含零字节。

除了以某种方式进行身份验证之外，这两种方案没有任何共同点。

有关详细信息，请参阅 ISO 7816-8（用于执行安全操作）、ISO 7816-4（用于外部验证、获取质询和大多数其他智能卡命令）。不花钱就很难买到这些东西——旧版本可以在 www 上找到——而且读起来很枯燥，很难理解。更多解释见 Rankl/Effing "Handbuch der Chipkarten"，但据报道英文翻译 "Smart Card Handbook" 有时比较特殊。对于证书的东西，我推荐 Schneier，Applied Cryptography，它还有数百个进一步的参考资料。******

# sql-server - SQL Server 中的匿名存储过程

> ID：10818419
> 
> 赞同：3
> 
> 时间：2012-05-30T14:32:35.703
> 
> 标签：sql-server, stored-procedures

在 Oracle 中，我们可以编写匿名块来快速测试逻辑，而无需将对象存储在数据库中。

SQL Server 是否支持匿名块？我试过google，但它主要返回oracle的链接。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T14:36:48.443

您可以使用 SSMS 测试 T-SQL 的任何“块”，而无需创建任何类型的对象（存储过程或函数）。只需声明您的变量，如果您需要的话，然后编写您的代码。

例如，如果这是您要测试的存储

```
USE [MyDatabase]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [MySchema].[proc_modifySomething]
      @ID int
    , @Language char(2) = NULL
AS
BEGIN

    SET NOCOUNT ON;

    DECLARE @ITEMTYPE_EVENT varchar(2)      = 'J';  
    DECLARE @CURRENTDATE datetime           = GETDATE(); 
```

你应该写：

```
DECLARE
      @ID int
    , @Language char(2) = NULL
BEGIN

    SET NOCOUNT ON;

    DECLARE @ITEMTYPE_EVENT varchar(2)      = 'J';  
    DECLARE @CURRENTDATE datetime           = GETDATE(); 
```

# c - 如果我有一个真值表，有没有办法确定该真值表所需的按位表达式？

> ID：10818422
> 
> 赞同：3
> 
> 时间：2012-05-30T14:32:41.913
> 
> 标签：c, binary, bit-manipulation

我正在尝试在 c 中执行以下操作：

```
unsigned int mask;
unsigned int previous;
unsigned int new;
unsigned int out;

for( int i = 0; i < 8; ++i )
{
    bool bit_set = GET_BIT( mask, i );

    // If the mask bit is true, use the new bit, otherwise use the previous bit
    SET_BIT( out, i, GET_BIT( bit_set ? new : previous, i ) );
} 
```

但是我认为使用按位运算可能会有一种更简单快捷的方法。我有真值表，但我不知道如何获得我需要的表达式。

真值表是：

```
m | p | n | o
0 | 0 | 0 | 0
1 | 0 | 0 | 0
0 | 1 | 0 | 1
1 | 1 | 0 | 0
0 | 0 | 1 | 0
1 | 0 | 1 | 1
0 | 1 | 1 | 1
1 | 1 | 1 | 1 
```

我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T14:34:07.117

使用[卡诺图](http://en.wikipedia.org/wiki/Karnaugh_map)- 有一个在线[求解器](http://www.ee.calpoly.edu/media/uploads/resources/KarnaughExplorer_1.html)。选择“三个值”，输入所有八种组合的预期结果，并使用求解器生成的表达式：

```
F(m, p, n) = (p & !n) | (m & n) 
```

**编辑：**`~`您可以使用按位 NOT 运算符扩展此解决方案以一次执行整个字节，而不是一次执行一位：

```
result = (mask & new) | (~mask & previous); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T15:02:28.637

> 如果掩码位为真，则使用新位，否则使用前一位

（对我来说）表达这一点的自然方式是`(mask & new) | (~mask & previous)`. 也就是说，从`new`和中屏蔽相应的位`previous`，并使用 OR 将它们相加。

# sql - 如何获得学科先决条件的名称？

> ID：10818426
> 
> 赞同：-2
> 
> 时间：2012-05-30T14:32:58.190
> 
> 标签：sql, sql-server

这是一个粗略的草图。我有一个先决条件表和主题表。我有一个粗略的想法，我可以列出主题代码。但我真的不确定如何获得可以列出主题名称和详细信息的查询，这是先决条件。

例如，我想编写一个查询，列出主题名称及其先决条件名称。所以结果会是（好吧，我稍后会做连接文本）：“计算机简介是操作系统的先决条件”。

我只是想知道如何从这两个表中提取主题名称？

```
CREATE TABLE subjects (
subject_code VARCHAR(7) NOT NULL CONSTRAINT subject_pk PRIMARY KEY,
subject_name VARCHAR(50) NOT NULL,
subject_details TEXT NOT NULL
);

CREATE TABLE SubjectPrerequisite
(   Primary_Subject_Code        VARCHAR(7) NOT NULL,
    Prerequisite_Subject_Code   VARCHAR(7) NOT NULL,
    CONSTRAINT PK_SubjectPrerequisite PRIMARY KEY (Primary_Subject_Code, Prerequisite_Subject_Code),
    CONSTRAINT FK_SubjectPrerequisite_Primary_Subject_Code FOREIGN KEY (Primary_Subject_Code) REFERENCES Subject (Subject_Code),
    CONSTRAINT FK_SubjectPrerequisite_Prerequisite_Subject_Code FOREIGN KEY (Prerequisite_Subject_Code) REFERENCES Subject (Subject_Code)
) 
```

//编辑：这是我到目前为止所拥有的

```
SELECT  subject_name
FROM SubjectPreRequisite t0
INNER JOIN subjects t1
ON t0.subject_code = s1.prerequisite_subject_code 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:43:34.460

我假设（可能是错误的）您希望将先决条件的主题名称连接成一行。下面是一个 SQL Server 示例，说明如何做到这一点：

```
;WITH Prerequisites AS
(   SELECT  Primary_Subject_Code, Subject_Name
    FROM    SubjectPrerequisite
            INNER JOIN Subjects
                ON Subject_Code = Prerequisite_Subject_Code
)           
SELECT  Subject_Code,
        Subject_Name,
        Subject_Details,
        STUFF(  (   SELECT  ',' + Subject_Name
                    FROM    Prerequisites
                    WHERE   Primary_Subject_Code = Subject_Code
                    FOR XML PATH(''), TYPE
                ).value('.', 'VARCHAR(MAX)'), 1, 1, '') AS PrerequisiteList
FROM    Subjects 
```

我之前已经完整解释了 XML PATH 方法是如何工作[的](https://stackoverflow.com/questions/10381512/what-this-query-does-to-create-comma-delimited-list-sql-server/10381975#10381975)。[随着对我的回答的进一步改进，这里](https://stackoverflow.com/questions/5031204/does-t-sql-have-an-aggregate-function-to-concatenate-strings/5031297#5031297)指出

另请参阅[SQL Server - 可能的 Pivot 解决方案？](https://stackoverflow.com/questions/10791247/sql-server-possible-pivot-solution/10796492#10796492)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:40:38.333

假设您想要主题名称的总列表，请执行以下查询：

```
select subject_name from subjects 
```

* * *

假设您希望主题先决条件和 subject_code 与 Primary_Subject_Code 有关系，请执行以下查询：

```
select s.subject_name, r.Prerequisite_Subject_Code
from subjects s
inner join SubjectPrerequisite r on s.subject_code = r.Primary_Subject_Code 
```

* * *

并与您的连接：

```
select r.Prerequisite_Subject_Code ' + is a pre-requisite of ' + s.subject_name as 'Pre-Requisites'
from subjects s
inner join SubjectPrerequisite r on s.subject_code = r.Primary_Subject_Code 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T15:09:18.020

如果您只想将 pre-prequsite 关系提取到 1 级递归，您可以这样做

```
SELECT
              [original].[subject_code] [OriginalCode]
            , [prereq].[subject_code] [Pre-RequisiteCode]
    FROM
            [subject] [orginal]
        LEFT JOIN
            [SubjectPrerequisite] [spr]
                ON [spr].[Primary_Subject_Code] = [original].[subject_code]
        JOIN
            [subject] [prereq]
                ON [prereq].[subject_code] = [spr].[Prerequisite_Subject_Code]
    ORDER BY
             [OriginalCode]
           , [Pre-RequisiteCode] 
```

如果您想显示递归链并以某种方式连接主题，那么像[GarethD 的答案](https://stackoverflow.com/a/10818621/659190)这样的 CTE 就是要走的路。但是，我建议使用 SQL 执行此操作对于 n 层应用程序是错误的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T15:38:13.843

认为我解决了它：

```
 SELECT t.subject_name + 'is a pre-requisite of' + s.subject_name
 FROM subjects s
 INNER JOIN pre_requisites r ON s.subject_code = r.subject_code
 INNER JOIN subjects t ON t.subject_code = r.pre_requisite_code 
```

# scala - 是否等同于检查的异常？

> ID：10818427
> 
> 赞同：15
> 
> 时间：2012-05-30T14:33:10.890
> 
> 标签：scala, functional-programming

从 Scala 开始并阅读有关`Either`我自然地将新概念与我所知道的东西（在本例中来自 Java）进行比较的文章。与检查异常的**概念**有什么区别`Either`吗？

在这两种情况下

*   失败的可能性在方法中明确注释（`throws`或返回`Either`）
*   程序员可以在错误发生时直接处理错误情况或将其向上移动（再次返回`Either`）
*   有一种方法可以通知调用者错误的原因

我想有人使用 for-comprehensions on`Either`来编写代码，因为不会出现类似于检查异常的错误。

我想知道我是否是唯一一个在看到差异时遇到问题的初学者。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-30T14:54:35.017

`Either`不仅可以用于异常。例如，如果您要让用户为您键入输入或指定包含该输入的文件，您可以将其表示为`Either[String, File]`.

`Either`经常用于异常处理。`Either`和受检异常的主要区别在于控制流`Either`总是显式的。编译器真的不会让你忘记你正在处理一个`Either`; 它不会在您不知道的情况下从多个地方收集`Either`s，返回的所有内容都必须是`Either`，等等。因此，您`Either`不要在可能出现异常情况时使用，而是作为控制程序的正常部分执行。此外，`Either`不捕获堆栈跟踪，使其比典型异常更有效。

另一个区别是异常可用于控制流。需要跳出三个嵌套循环？没问题——抛出异常（没有堆栈跟踪）并在外部捕获它。需要跳出五个嵌套的方法调用？没问题！要么不提供这样的东西。

也就是说，正如您所指出的，有许多相似之处。你可以传回信息（虽然`Either`这很简单，而检查异常让你编写自己的类来存储你想要的任何额外信息）；你可以把它传递`Either`下去，或者你可以把它折叠成别的东西，等等。

因此，总而言之：尽管您可以在`Either`显式错误处理方面使用检查异常来完成相同的事情，但它们在实践中是相对不同的。特别是，`Either`使创建和传回不同的状态变得非常容易，而受检异常擅长绕过所有正常的控制流，希望返回到可以明智地处理异常情况的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T02:38:15.493

就返回签名形成[排他性析取](http://en.wikipedia.org/wiki/Exclusive_disjunction)而言，要么等效于已检查异常。结果可以是抛出的异常 X 或 A。但是，抛出异常并不等同于返回一个异常——第一个异常不是引用透明的。

Scala 的 Either 不是（从 2.9 开始）等价的地方是返回类型是正偏的，并且需要努力提取/解构异常， Either 是无偏的；您需要明确要求左值或右值。这是[一些讨论的话题](https://groups.google.com/d/topic/scala-debate/K6wv6KphJK0/discussion)，在实践中有点痛苦——考虑以下三个对 Either 生产方法的调用

```
for {
  a <- eitherA("input").right
  b <- eitherB(a).right
  c <- eitherC(b).right
} yield c // Either[Exception, C] 
```

您需要手动穿过 RHS。这可能看起来不那么繁重，但实际上对于新手来说是一种痛苦并且有些令人惊讶。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T16:28:46.633

是的，`Either`是一种在语言中嵌入异常的方法；其中一组可能失败的操作可能会向某些非本地站点抛出错误值。

除了 Rex 提到的实际问题之外，您还可以从 a 的简单语义中获得一些额外的东西`Either`：

*   `Either`形成一个单子；因此您可以对计算结果为 的表达式集使用一元操作`Either`。例如，无需测试结果即可进行短路评估
*   `Either`在类型中——所以类型检查器本身就足以跟踪对值的错误处理

一旦您能够返回错误消息`(Left s)`或成功的值`Right v`，您就可以将异常分层，就像[在 Haskell中所做](http://hackage.haskell.org/packages/archive/mtl/1.1.0.2/doc/html/Control-Monad-Error-Class.html)[的](http://hackage.haskell.org/packages/archive/mtl/1.1.0.2/doc/html/Control-Monad-Error-Class.html)`Either`那样加上错误处理程序。[`MonadError`](http://hackage.haskell.org/packages/archive/mtl/1.1.0.2/doc/html/Control-Monad-Error-Class.html)

# javascript - Javascript对象数组比较

> ID：10818429
> 
> 赞同：0
> 
> 时间：2012-05-30T14:33:18.027
> 
> 标签：javascript, jquery

我在 javascripts 中有两个对象数组。就像`arr1[] = {emp1,emp2,emp3}`inturn`emp1`拥有`emp1.name`和`emp1.address`作为财产一样。

就像是

```
arr1={object {name='a',address='b'} {name='c',address='d'} {name='e',address='f'} }. 
arr2={object {name='a',address='b'}}. 
```

我想比较`name`两个数组对象的属性并将丢失的项目填充到另一个数组中。所以结果将是 result[]={'c','e'}

实现这一目标的有效方法是什么？我不期望代码，请指导我正确的方向。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:49:38.177

该`Array.filter`方法可能会有所帮助。[在这里](http://www.diveintojavascript.com/core-javascript-reference/the-array-object/array-filter)查看更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:02:09.110

该功能可能看起来像

```
 function foo(arr1,arr2){
    var arr3 = new Array();
    var x=0;
    for (var j =0; j<arr1.length; j++)
         for(var i=0; i<arr2.length; i++)
            if(arr1[j].name != arr2[i].name){
               arr3[x]=arr1[i];
               x++;
    }
 return(arr3); 
  } 
```

这将遍历 2 个数组，如果元素不相同，则它们将被放入第三个数组。这是检查 aarr1 中的任何名称是否与 arr2 中的相同。它不检查其他方式。（即，如果 arr2 有一个在 arr1 中不存在的元素，它将不会被放入 arr3）但至少它应该让你开始。该函数将接受 2 个数组并返回第三个.

# android - Ksoap2 发送数据不起作用“request.addProperty("Lat", "21233232");" 不工作

> ID：10818431
> 
> 赞同：0
> 
> 时间：2012-05-30T14:33:22.303
> 
> 标签：android, sql-server, web-services, ksoap2

我尝试使用此代码将数据发送到 MsSql 使用 web 服务。当我尝试手动发送数据时，它工作得很好，但是当我尝试通过此代码发送时，它不起作用。返回值始终是正确的值，但不发送到 mydatabase

```
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

        PropertyInfo pi = new PropertyInfo();
        pi.setName("DeviceId");
        pi.setValue("mumin burak");
        pi.setType(String.class);
        pi.setNamespace(NAMESPACE);
        request.addProperty(pi);

    request.addProperty("Lat", "21233232");

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);

    AndroidHttpTransport httpTransport = new AndroidHttpTransport(URL);

    SoapPrimitive result = null;
    try {
        httpTransport.call(SOAP_ACTION, envelope);
        result = (SoapPrimitive) envelope.getResponse();
        twMsg.setText(result.toString());
    } catch (IOException e) {
        // TODO Auto-generated catch block
        twMsg.setText(e.getMessage());
    } catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        twMsg.setText(e.getMessage());
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:29:40.723

我已经遇到了与 SOAP WS 相同的问题 .... 经纬度和任何双精度数据类型值...我必须更喜欢“MarshalFloat 类”
[http://seesharpgears.blogspot.in/2010/11/implementing- ksoap-marshal-interface.html](http://seesharpgears.blogspot.in/2010/11/implementing-ksoap-marshal-interface.html)。

最后......无需改变整个逻辑。但只需创建 MarshalFloat 的实例并用信封注册它，它在我的情况下完成..

MarshalFloat md = new MarshalFloat();

md.register（信封）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:46:55.723

要发送`double`值，您应该实现 ksoap Marshal 接口。有关更多信息，请访问此处：[实现 KSOAP Marshal 接口](http://seesharpgears.blogspot.com/2010/11/implementing-ksoap-marshal-interface.html)

# c# - 是否有可能知道一个类是否已使用扩展方法进行了扩展？

> ID：10818436
> 
> 赞同：0
> 
> 时间：2012-05-30T14:33:44.750
> 
> 标签：c#, vb.net, extension-methods

在 VB.NET 或 C# 中，有没有办法确定一个类是否已使用[扩展方法](http://msdn.microsoft.com/en-us/library/bb384936.aspx)进行扩展？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T14:35:13.313

编辑：现在问题已更改为引用扩展方法（这可能是也可能不是 OP 的意图） - 不，您无法判断一个类型是否是扩展方法的目标，除非它是一个静态类（在这种情况下它不能那样使用），除非您知道所有相关的潜在程序集。

扩展方法只是静态非泛型顶级类型中的静态方法，用属性修饰。您实际上是在询问是否存在这种方法。您可以遍历您关心的所有程序集中的所有方法，以尝试找到针对该类型的扩展方法，但仅此而已。

* * *

**原始答案，当问题没有提到扩展方法时**

如果您知道它*可能*在其中扩展的所有程序集，您可以使用[`Assembly.GetTypes`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.gettypes.aspx)and来检查它们中的每一个[`Type.IsSubclassOf`](http://msdn.microsoft.com/en-us/library/system.type.issubclassof.aspx)。

如果该类是未密封的并且不包含内部抽象成员（即它*可以*扩展），那么您无法判断某个其他未加载的程序集是否包含子类，不。每个类都“知道”它的父类，但不知道它的子类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T14:42:53.010

如果一个类是受保护的或公共的，实际上没有办法确定它是否被扩展。

如果要确定在程序集中还是在进程中（所有加载的程序集），可以使用[`Type.IsSubclassOf`](http://msdn.microsoft.com/en-us/library/system.type.issubclassof.aspx)或进行检查[`Type.IsAssignableForm`](http://msdn.microsoft.com/en-us/library/system.type.isassignablefrom.aspx)。

如果您想在解决方案中在编译时确定（而不实际执行），只需将构造函数设为私有，或将类标记为密封，编译解决方案，并检查所有相关错误。完成后，还原更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T21:12:21.393

不可能知道一个类是否已经使用扩展方法进行了扩展。将扩展方法视为静态过程，仅在不同项目中以微弱且不同的方式附加到类。

扩展方法不会创建任何新类型，也永远不会覆盖真正的成员方法（因此在您开始直接调用它们之前，它们无法以任何方式改变对象的行为）。因此，您可能*不需要*检测它们的存在。

可以确定特定方法是扩展方法还是真正的成员方法。也可以使用反射列出特定加载程序集中的所有扩展方法。这是解释[here](https://stackoverflow.com/questions/299515/c-sharp-reflection-to-identify-extension-methods)。

# c++ - 如何链接和使用 OpenCV 标头？

> ID：10818437
> 
> 赞同：2
> 
> 时间：2012-05-30T14:33:45.657
> 
> 标签：c++, opencv

是的，我知道这是一个非常愚蠢的问题，但我对我正在尝试做的事情没有运气。

我正在尝试使用 objdetect.hpp 头文件，所以我包含了文件夹 C:\OpenCV2.1\include\opencv2\ 以及 C:\OpenCV2.1\include\opencv 和一大堆其他库和 dll 当我按照[http://opencv.willowgarage.com/wiki/VisualC%2B%2B_VS2010上的说明进行操作时](http://opencv.willowgarage.com/wiki/VisualC%2B%2B_VS2010)

但是该教程中的 openCV 版本已经过时，甚至没有 objdetect.hpp 文件。所以我去下载了最新的（OpenCV 2.4.0），但是现在当我编译它时，它给了我一个错误C1083：无法打开包含文件：“opencv2/core/core.hpp”没有这样的文件目录。

我是否应该将所有 OpenCV 文件夹/文件与我的 C++ 项目放在同一目录中？或者我该如何解决？我试过把它和我的 C++ 项目放在同一个地方，但是当我这样做时`#include "../"`，文件夹没有出现。

同样，我知道这是一个愚蠢的问题，但请帮忙。

如果有人需要更多信息，请告诉我，因为我不太确定该放什么。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:46:31.807

管理包含文件更改目录的最佳方法是使用编译器选项。我更擅长 linux 和 g++，您只需使用`-I`属性指定不同的包含路径位置。

`#include`在语句中使用相对路径和绝对路径通常被认为是不好的做法。模块路径没问题`#include <sys/time.h>`，哪里`sys`可以考虑模块。仅包含文件名和可能的模块，然后使用编译器选项处理位置。

# facebook - 像 URL “http://www.facebook.com/apps/application.php?id=APP_ID”上的按钮损坏

> ID：10818440
> 
> 赞同：0
> 
> 时间：2012-05-30T14:33:56.103
> 
> 标签：facebook, facebook-like, lint

我们 Facebook 应用程序的点赞按钮（iframe / like.php 插件）已经损坏了几天。

我们已经选择使用“http://www.facebook.com/apps/application.php?id=APP_ID”网址而不是“http://apps.facebook.com/APP_NAME/”格式（可能不是一个好主意）。

单击它会导致失败（弹出窗口告诉“喜欢该页面时出错。如果您是页面所有者，请尝试通过 Facebook devsite 上的 linter 运行您的页面（https://developers.facebook.com/ tools/lint/) 并修复任何错误。")

Linter 能够发现[http://www.facebook.com/apps/application.php?id=APP_ID](http://www.facebook.com/apps/application.php?id=APP_ID)必须转换为“Final URL : [http://apps.facebook.com/APP_NAME/](http://apps.facebook.com/APP_NAME/) ”

重定向路径部分显示“最终 URL 以粗体显示（这是我们尝试从中提取元数据的 URL）”并且最终 URL 正确（http://apps.facebook.com/APP_NAME）

但在这种情况下，linter 无法删除包含在“http://apps.facebook.com/APP_NAME”中的开放标签，尽管如果最终 URL “http://apps.facebook.com”可以很好地识别开放标签， /APP_NAME" 直接提交给 linter。

似乎不再使用最终 url 的开放图形标签。

有人可以向我确认这是一个新的行为/错误并告诉我如何解决它吗？我可以将我们的喜欢从一个网址 (.../apps/application.php?id=APP_ID) 迁移到一个新的有效的网址 (.../APP_NAME/) 吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:16:51.483

这些 /apps/application.php URL[在 2011 年 12 月被弃用，](https://developers.facebook.com/blog/post/611/)并在 2012 年 2 月被删除 - 你不应该仍然使用它们，它们会自动重定向到应用程序的画布或网站 URL。点赞按钮可能会在几个月后看起来仍然在处理这些 URL，但实际上任何点击它们的人都会变成什么都没有的粉丝

如果你有一个，你的赞按钮或赞框应该指向你的应用的页面。如果您未在 2011 年 12 月至 2011 年 2 月之间迁移，该博文包含创建一个的说明

如果您的应用没有页面，则无法通过“赞”按钮来积累粉丝，因为您无法将广告定位到他们或向他们发送更新。

[在我上面链接的博客文章或与您的用户沟通](https://developers.facebook.com/docs/guides/policy/examples_and_explanations/Communicating_With_Users/)文档中有创建页面的说明。

# java - 如何从 Mailchimp 的 url 中提取 access_token

> ID：10818441
> 
> 赞同：0
> 
> 时间：2012-05-30T14:33:58.363
> 
> 标签：java, jsp, servlets, mailchimp

```
http://127.0.0.1:8080/Mailchimp/Access#access_token=^^^^^^^^^^^^^^^^^^^^^^^^^&expires_in=0 
```

这是我的 mailchimp url，如何通过 java 提取 access_token

还有另一种获取访问令牌的方法，但这里得到响应消息 - 错误请求

```
URL siteUrl = new URL("https://login.mailchimp.com/oauth2/token");
        HttpURLConnection conn = (HttpURLConnection) siteUrl.openConnection();
        conn.setRequestMethod("POST");
        conn.setDoOutput(true);
        conn.setDoInput(true);

        DataOutputStream out = new DataOutputStream(conn.getOutputStream());

        String content = "?grant_type=authorization_code&client_id=^^^^^^^^^^&client_secret=^^^^^^^^^^^^^^^^^^^^^^^^&code="+auth_code+"&redirect_uri=http://127.0.0.1:8080/Mailchimp/Access";

        out.writeBytes(content);
        System.out.println(content);
        out.flush();
        out.close();
        System.out.println(conn.getResponseMessage()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:13:58.867

# 之后的部分称为“片段”或“参考”。这是提取相关部分的基本方法：

```
public static String getAccessToken(String uriString) {
    URI uri = URI.create(uriString);
    String[] parameters = uri.getFragment().split("\\&");
    for (String parameter : parameters) {
        String[] parts = parameter.split("\\=");
        if (parts[0].equals("access_token")) {
            if (parts.length == 1) {
                throw new RuntimeException("missing access token");
            }
            return parts[1];
        }
    }
    throw new RuntimeException("no access token");
} 
```

# bash - 带有选项参数的短/长选项 - 这是某种约定吗？

> ID：10818443
> 
> 赞同：24
> 
> 时间：2012-05-30T14:34:05.400
> 
> 标签：bash, coding-style

似乎大多数（很多）命令都实现了这样的选项参数：

1.  如果短选项需要选项参数，则选项与选项参数用空格分隔，例如

    ```
    $ head -n 10 
    ```

2.  如果长选项需要选项参数，则选项与`=`选项参数用 a 分隔，例如

    ```
    $ head --lines=10 
    ```

这是某种约定吗？是的，我在哪里可以找到它？此外，这是什么道理？

为什么例如不是

```
 $ head --lines 10 
```

?

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-30T14:48:08.390

短选项基本原理在 POSIX [Utility Conventions](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap12.html)中记录。大多数选项解析器允许将值“附加”到字母 ( `-n10`)，这主要是因为广泛的历史先例。

长选项的基本原理由 GNU 在其[编码标准](http://www.gnu.org/prep/standards/)和[`getopt_long()`](http://www.gnu.org/software/libc/manual/html_node/Getopt.html).

* * *

很久以前，在很久以前的一个 StackOverflow 中，有一个关于[命令选项样式](https://stackoverflow.com/questions/367309/which-command-line-commands-style-do-you-prefer/)的问题。也许不是一个好问题，但我认为答案拯救了它（但我承认有偏见）。无论如何，它已被删除，所以我将在这里恢复我的答案，因为（a）重新发现答案是一个痛苦的过程，并且（b）它包含与选项相关的有用信息。

您认识多少种不同类型的选项？我能想到很多，包括：

*   单字母选项前面有单破折号，没有参数时可分组，参数可以附加到选项字母或下一个参数（许多，许多 Unix 命令；大多数 POSIX 命令）。
*   单字母选项前面有单破折号，不允许分组，必须附加参数 (RCS)。
*   单个破折号前面的单字母选项，不允许分组，参数必须是单独的（POSIX SCCS，IIRC 之前）。
*   前面有单破折号的多字母选项，可以附加参数或在下一个参数中（X11 程序）。
*   以单破折号开头的多字母选项可以缩写（Atria Clearcase）。
*   前面有单加号的多字母选项（已过时）。
*   前面有双破折号的多字母选项；参数可以跟在 '=' 之后或分开（GNU 实用程序）。
*   没有前缀/后缀的选项，一些名称有缩写或隐含，参数必须分开。（[AmigaOS Shell](http://www.amigahistory.co.uk/command.html)，由[porneL](https://stackoverflow.com/users/27009/pornel)添加）

有时必须附加带有可选参数的选项，有时必须遵循“=”符号。POSIX 不支持有意义的可选参数（POSIX getopt() 只允许它们用于命令行上的最后一个选项）。

所有明智的选项系统都使用由双破折号 (' `--`') 组成的选项来表示“选项结束” - 以下参数是“非选项参数”（通常是文件名），即使它们以破折号开头。（我认为支持这种表示法是必要的。）请注意，如果您有一个带有需要参数的选项的命令，`cmd`那么`-f`如果您调用它`--`来代替参数 ( `cmd -f -- -other`，许多版本的`getopt()`将把然后解析为常规选项。也就是说，如果必须将其解释为另一个选项的参数，则不会终止选项。`--``-f``-other``--`

许多但不是所有程序都接受单破折号作为文件名来表示标准输入（通常）或标准输出（偶尔）。有时，与 GNU ' `tar`' 一样，两者都可以在单个命令行中使用：

```
tar -cf - -F - | ... 
```

第一个单独的破折号表示“写入标准输出”；第二个意思是“从标准输入读取文件名”。

一些程序使用其他约定——也就是说，选项前面没有破折号。其中许多来自最古老的 Unix。例如，'tar' 和 'ar' 都接受不带破折号的选项，所以：

```
tar cvzf /tmp/somefile.tgz some/directory 
```

该`dd`命令`opt=value`专门使用：

```
dd if=/some/file of=/another/file bs=16k count=200 
```

有些程序允许您完全交错选项和其他参数；C 编译器、make 和 GNU 实用程序在环境中没有 POSIXLY_CORRECT 的情况下运行就是示例。许多程序期望选项优先于其他参数。

* * *

现代程序，例如`git`越来越多地使用基本命令名称 ( `git`) 后跟子命令 ( `commit`) 后跟选项 ( `-m "Commit message"`)。这是由 SCCS 命令的接口所预示的`sccs`，然后是`cvs`, 并且也被使用`svn`（它们都是版本控制系统）。但是，其他大型命令套件会在合适的时候采用类似的样式。

* * *

我在不同系统之间没有强烈的偏好。当几乎没有足够的选项时，则具有助记符值的单个字母很方便。GNU 支持这一点，但建议使用前面带有双破折号的多字母选项来支持它。

有些事情我确实反对。最糟糕的情况之一是相同的选项字母使用不同的含义，具体取决于它之前的其他选项字母。在我的书中，这是一个禁忌，但我知道在哪里完成它的软件。

另一个令人反感的行为是处理参数的风格不一致（特别是对于单个程序，但也在一组程序中）。要么需要附加参数，要么需要分离参数（或允许任何一个），但没有一些选项需要附加参数而其他选项需要分离参数。并且对于是否`=`可以使用''来分隔选项和参数保持一致。

与许多（与软件相关的）事物一样，一致性比个人决策更重要。

* * *

无论您做什么，请阅读[TAOUP 的命令行选项](http://catb.org/~esr/writings/taoup/html/ch10s05.html)并考虑[命令行接口标准](http://www.gnu.org/prep/standards/html_node/Command_002dLine-Interfaces.html)。（*由[JF Sebastian](https://stackoverflow.com/users/4279/j-f-sebastian)添加——谢谢；我同意。*）

# python - 如何在 Selenium Python 中编写功能/集成测试

> ID：10818445
> 
> 赞同：4
> 
> 时间：2012-05-30T14:34:07.857
> 
> 标签：python, selenium, integration-testing, functional-testing

我是测试新手，我想

1) 测试登录

2) 创建文件夹

3）将内容（一页）添加到文件夹中

我编写了每个测试并且它们可以工作，但显然我想建立在彼此之上，例如，为了做 3 我需要先做 1 然后 2。为了做 2 我需要做 1。这是我的基本测试结构：

```
class TestSelenium(unittest.TestCase):
    def setUp(self):
        # Create a new instance of the Firefox driver
        self.driver = webdriver.Firefox()

    def testLogin(self):
        print '1'
        ...

    def testFolderCreation(self):
        print '2'
        ...

    def testContentCreation(self):
        print '3'
        ...

    def tearDown(self):
        self.driver.quit()

if __name__ == '__main__':
    unittest.main() 
```

起初，我以为测试会按顺序运行，第二个函数会从第一个函数停止的地方继续，但我发现情况并非如此，似乎每次测试都重新开始。我也意识到它们以相反的顺序执行。我在终端中得到 3,2,1 的输出。我应该如何实现我想要的？如果我在运行我想要的函数之前调用前面的函数，我觉得它是在一遍又一遍地重复测试同一件事，因为每个都是一个测试（例如，在 中`testContentCreation`，我会调用 'testLogin' 然后调用`testFolderCreation`和内部`testFolderCreation`调用`testLogin`。如果我要做的更多，`testLogin`会被多次调用！）。我是否应该将前面的步骤变成常规的非测试函数，并在最后一个（测试函数）中按顺序调用前面的步骤？如果我这样做，那么我猜如果任何步骤失败，最后一个失败，就会有一个大的测试功能。

关于如何编写此类测试的任何建议？另外，为什么测试以相反的顺序运行？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:47:27.710

我认为，您正在看到您所看到的，因为您对所做的假设做出了一些不正确的假设`unittest`。每个测试用例都被假定为一个独立的实体，因此没有强加运行顺序。此外，`SetUp()`并`TearDown()`在每个个案之前和之后进行操作。如果您想要全局设置/拆卸，您需要将类方法命名为`SetUpClass()`and `TearDownClass()`。您可能还想查看`TestSuite`课程。更多信息：http: [//docs.python.org/library/unittest.html](http://docs.python.org/library/unittest.html)

请记住，当 unittest 库进行测试发现（反映您的测试用例类以查找要运行的测试用例）时，它本质上仅限于查看对象的`.__dict__`和`dir()`值，它们本质上是无序的。

# spring - Gradle：不解析来自 Maven 存储库的 Spring 依赖项

> ID：10818450
> 
> 赞同：2
> 
> 时间：2012-05-30T14:34:28.900
> 
> 标签：spring, gradle

我正在尝试使用 Gradle 作为构建工具来设置一个新的 Java 项目。对于这篇文章，我们假设项目需要使用 Hibernate`[hibernate-core]`和 Spring `[spring-core]`。

构建.gradle

```
def localMavenRepo = "file://opt/m2/repository"

allprojects {
    apply plugin: "java"

    repositories {
        maven {
           url localMavenRepo
        }
    }

    dependencies {
        compile     "org.hibernate:hibernate-core:3.5.0-CR-2"
        compile     "org.springframework:spring-core:3.0.5-RELEASE"
    }
} 
```

当我运行时，`gradle-build`我得到以下信息：

> FAILURE：构建失败并出现异常。
> 
> *   什么地方出了错：
>     
>     
>     
>     无法解析配置“：testRuntime”的所有依赖项。
>     
>     
>     
>     找不到组：org.springframework，模块：spring-core，版本：3.0.5-RELEASE。
>     
>     
>     
>     要求：：gradle_spring_bug：未指定

令人费解的部分是它`hibernate-core`在存储库中找到了工件，但没有找到`spring-core`。

我在想也许 Spring jar 本身应该受到责备。

这是我到目前为止所尝试的：

1.  更改 Maven 存储库。我现在正在工作，我们使用 Maven 代理存储库。我已经尝试过本地和远程存储库。问题依然存在。

2.  更改 Spring 版本。我尝试了不同版本的`spring-core`依赖项（`3.0.1-RELEASE, 3.0.3-RELEASE`）。问题依然存在。

3.  更改 Spring 工件。我也尝试过`org.springframework.spring-jdbc`and`org.springframework.security.spring-security-cas-client`工件。问题依然存在。

4.  通过尝试不同的工件来验证它是否是 Spring。我试过'junit'、'hibernate-core'、'hibernate-validator'、'javaee-web-api'。有些有不同的版本。将它们指向本地或远程存储库，它们都可以工作。

我还没有尝试过的：

1.  更改 Gradle 的版本 我使用的是最新版本的 Gradle`1.0-rc-3`

2.  尝试 Maven 中央存储库 需要配置我的代理，但这是我的下一步。但是，我不太乐观它会起作用。

如果有最新版本的 Gradle 的人可以尝试一下并让我知道他们是否遇到同样的问题，那就太好了。

编辑

已解决：仔细检查版本声明。Spring 3.0.5-RELEASE 不存在。它是 3.0.5.RELEASE。

PS - 在不到 8 小时内没有足够的分数来回答我自己的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:38:26.147

仔细检查版本声明。Spring 3.0.5-RELEASE 不存在。这是 3.0.5.RELEASE

# java - 如何对 ArrayList 进行排序 基于 myobject 的属性

> ID：10818455
> 
> 赞同：0
> 
> 时间：2012-05-30T14:35:07.227
> 
> 标签：java, sorting, collections, arraylist

我想根据对象属性对 ArrayList 中的一些对象进行排序。该对象具有：

```
public class Minterm

{
    String minTerm;
    char flagTick;
    String minTermDerive;
    int groupNo;
    String adjGroup;
    static int MaxLiterals; 
```

然后我在主要方法中有这个：

```
ArrayList<Minterm> column =new  ArrayList<Minterm>(); 
```

`Minterm`然后我在列表中添加一些类型的对象。但最后我想组织它们并按成员变量`groupNo`（升序）对它们进行排序。

我搜索并想出了我尝试但没有成功的可比较和比较器界面。有没有其他方法可以做到这一点？还是我做的比较器是错误的。

**编辑：** 以下是我为 Comparator 编写的代码。请确认它是否会按升序排序？

```
package backEnd;

import java.util.Comparator;

public class Comp implements Comparator<Minterm>
{
        @Override
        public int compare(Minterm a, Minterm b) 
        {
            return a.getgroupOne().compareTo(b.getgroupOne());
        }
} 
```

我运行它：

```
Collections.sort(column , new Comp()); 
```

似乎工作正常。但我对它没有很好的理解。请确认它是否会按升序排序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T14:36:10.173

您应该让`Minterm`实现`Comparable<MinTerm>`或编写自定义`Comparator`，`MinTerm`然后使用`Collections.sort`.

使用比较器，它看起来像这样：

```
Collections.sort(column, new Comparator<Minterm>() {
    @Override
    public int compare(Minterm o1, Minterm o2) {
        return Integer.valueOf(o1.groupNo).compareTo(o2.groupNo);
    }
}); 
```

**关于您的编辑：**

是的。它`Minterm`根据组的*升序*对 s 进行排序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T14:36:49.020

[`Collections.sort()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)[`Comparator`](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)界面正是这项工作的正确工具。

应该按照以下方式进行操作（未经测试）：

```
 Collections.sort(column, new Comparator<Minterm>() {
     public int compare(Minterm o1, Minterm o2) {
       return Integer.valueOf(o1.groupNo).compareTo(o2.groupNo);
     }
  }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T14:36:38.667

两种方式，使用`Collections.sort(..)`：

*   让你的对象实现`Comparable`。涉及更改原始类，这可能是不可能的
*   供应定制`Comparator`。它需要您的对象的实例并比较它们。不需要更改类。

无论哪种方式，请确保您遵守接口的合同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T11:23:39.397

这是示例代码（更多示例请参阅[http://java2novice.com/java-collections-and-util/arraylist/sort-comparator/](http://java2novice.com/java-collections-and-util/arraylist/sort-comparator/)）：

```
public class MyArrayListSort {

    public static void main(String a[]){

        List<Empl> list = new ArrayList<Empl>();
        list.add(new Empl("Ram",3000));
        list.add(new Empl("John",6000));
        list.add(new Empl("Crish",2000));
        list.add(new Empl("Tom",2400));
        Collections.sort(list,new MySalaryComp());
        System.out.println("Sorted list entries: ");
        for(Empl e:list){
            System.out.println(e);
        }
    }
}

class MySalaryComp implements Comparator<Empl> {

    @Override
    public int compare(Empl e1, Empl e2) {
        if(e1.getSalary() < e2.getSalary()){
            return 1;
        } else {
            return -1;
        }
    }
}

class Empl{

    private String name;
    private int salary;

    public Empl(String n, int s){
        this.name = n;
        this.salary = s;
    }

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public int getSalary() {
        return salary;
    }
    public void setSalary(int salary) {
        this.salary = salary;
    }
    public String toString(){
        return "Name: "+this.name+"-- Salary: "+this.salary;
    }
} 
```

# webserver - Angstrom Linux (BeagleBoard | BeagleBone) 上的 Web 服务器根目录在哪里？

> ID：10818459
> 
> 赞同：6
> 
> 时间：2012-05-30T14:35:15.623
> 
> 标签：webserver, port, beagleboard, angstrom-linux

我正在尝试使用 Angstrom Linux 在我的 BeagleBone 上找到默认的 Web 服务器目录。也就是说，我去的时候文件在哪里：

```
http://beaglebone.local:80 
```

另一种方法是回答这个问题：如何使用 Angstrom Linux 在我的 BeagleBone 上找出端口号指向的目录？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T18:06:27.890

BeagleBone|BeagleBoard Angstrom Linux 发行版附带一个套接字服务器，该服务器使用 node.js 和 bonescript 作为服务运行：

```
/var/lib/cloud9/bonescript/ 
```

并且可以访问：[http://beaglebone.local:80](http://beaglebone.local:80)

你也可以安装[lighttpd](http://www.lighttpd.net/)

```
opkg install lighttpd 
```

并将配置文件安装到

```
/etc/lighttpd.conf 
```

可以更改以在任何您喜欢的地方设置默认的 Web 目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T20:42:11.520

我发现以下工作，最终：

```
systemctl disable bonescript.service
systemctl disable bonescript-autorun.service
systemctl disable cloud9.service
systemctl disable bonescript.socket 
```

使用“systemctl list-units”检查它们是否已停止。可能，您必须按照正确的顺序执行这些操作，我不得不在他们都死之前摆弄并重复这些操作。您可能只需核对 /etc/systemd/system/multi-user.target.wants 中的符号链接并重新启动。

# asp.net - 使用 Workflow Foundation 定义 asp.net 页面的流程

> ID：10818463
> 
> 赞同：0
> 
> 时间：2012-05-30T14:35:27.230
> 
> 标签：asp.net, workflow, workflow-foundation

我有几个 ASP.net 网页。我想使用 Workflow Foundation 来定义不同的 BPM 工作流来运行我的页面。如何使用 Windows Workflow Foundation 做到这一点？在我看来，工作流基础不适用于 Web 应用程序。我对么？

# php - 在复选框中显示 JSON 数组的机制

> ID：10818466
> 
> 赞同：0
> 
> 时间：2012-05-30T14:35:33.263
> 
> 标签：php, arrays, json, checkbox

我使用 JSON 创建了一个多维数组。现在我的问题是如何制作复选框组（放入表格或任何可以将它们分开的东西，例如通过水平条）。

这是文件行的示例：

```
{"id": "v0", "namegroup": "Table rules create OR insert", "rule": "All classes give origin to a table.", "value": 0} 
```

这就是我创建数组的方式：

```
<?php 
$file = fopen("rules.txt", "r") or exit("Unable to open file!"); 
$arrayRules = array();
$i = 0;
while(!feof($file))
{
    $line = fgets($file);
    $content = json_decode(utf8_encode($line), true);
    $arrayRules[$i]['id'] = $content["id"];
    $arrayRules[$i][0] = utf8_decode($content["rule"]);
    $arrayRules[$i]['namegroup'] = $content["namegroup"];
    $arrayRules[$i][1] = $content["value"];
    $i = $i + 1;
}
fclose($file);
?> 
```

这就是我创建复选框的方式：

```
echo "<input name=\"regra[]\"  value=\"" . $arrayRules[$i]["id"] . "\" type=\"checkbox\"  /> " . $arrayRules[$i][0] . "<br/> "  ; 
```

请记住，用户可以编辑组的名称和所有其他点。如您所见，我的问题不是如何回显复选框，而是如何按组创建和组织复选框的机制。

更新1

现在我有这个：

```
for($i=0; $i < count($arrayRules); $i++)
{
    if ($arrayRules[$i]['idgroup'] == 1)
    {
        if  ($arrayRules[$i][1] == 1)
            echo  "<input name=\"regra[]\"  value=\"" . $arrayRules[$i]["id"] . "\" type=\"checkbox\" checked onclick=\"this.checked='checked'\"/> " . $arrayRules[$i][0] . "<br/> "  ;

        if ($arrayRules[$i][1] == 0)
            echo "<input name=\"regra[]\"  value=\"" . $arrayRules[$i]["id"] . "\" type=\"checkbox\"  /> " . $arrayRules[$i][0] . "<br/> "  ;
    }
}
?> 
```

问题是 in`if ($arrayRules[$i]['idgroup'] == 1)`不应该是 1 而是应该是一个变量，或者当它每次在 idgroup 上的文件中找到一个新的或不同的名称时，它会添加或创建一个新的表/复选框组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:50:59.243

将 group_id 参数添加到您的 json 对象并像

```
 $arrayRules[$group_id][$i] 
```

之后，您可以执行以下操作：

```
foreach($arrayRules as $group_id=>$objects) {
   // start group html
   foreach($objects as $i=>$params) {
       echo "<input name=\"regra[]\"  value=\"" . $params[$i]["id"] . "\" type=\"checkbox\"  /> " . $params[$i][0] . "<br/> "  ;
   }
   // end group html
} 
```

# javascript - 自调用函数未定义

> ID：10818472
> 
> 赞同：4
> 
> 时间：2012-05-30T14:35:44.917
> 
> 标签：javascript, function

如果我声明一个函数文字：

```
var x = function(){
        alert('hi');
    };
    console.log(x); // returns the function code. 
```

然而：

```
var x = (function(){
    alert('hi');
})();

console.log(x); // returns undefined? 
```

我不明白为什么会这样。将函数编写为文字的目的不是仍然能够通过其变量引用名称访问它吗？我知道这可能很愚蠢，但我只是在学习 javascript，所以不要太苛刻地判断。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T14:36:20.930

您的函数不返回任何内容，因此它的返回值为`undefined`.

执行自执行函数并且该函数不存储在任何地方 - 只有它的返回值存在（以及函数设置/修改的任何外部变量）。

例如，此代码将等效于`var x = 'hi';`：

```
var x = (function(){
    return 'hi';
})(); 
```

自调用函数的目的通常是创建一个新范围，例如在循环中创建回调函数时：

```
for(var i = 0; i < 5; i++) {
    window.setTimeout(function(){ alert('i = ' + i); }, 1000 * i);
} 
```

这将`i`在所有回调中使用相同的，因此它会警告`i = 5`5 次。

```
for(var i = 0; i < 5; i++) {
    (function(i) {
        window.setTimeout(function(){ alert('i = ' + i); }, 1000 * i);
    })(i);
} 
```

通过使用自执行函数，我们创建了一个新范围，因此`i`在每个循环中都创建了一个新范围。

自执行函数的另一个用途是创建一个新作用域，其中确保某些变量可用并设置为正确的值：

```
(function($, window, undefined) {
    // here the following always applies:
    // $ === jQuery
    // window === the global object [assuming the function was executed in the global scope]
    // undefined is well, undefined - in some js engines someone could have redefined it
})(jQuery, this); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T14:37:48.963

如果你：

```
var foo = somefunction; 
```

...然后您将功能分配给`foo`.

如果你：

```
var foo = somefunction(); 
```

…然后将函数*调用*的返回值分配给`foo`

你的功能：

```
function(){
    alert('hi');
} 
```

... 没有`return`声明，所以它会返回`undefined`.

# java - 如何在 Web 应用程序中实现自动注销？

> ID：10818473
> 
> 赞同：3
> 
> 时间：2012-05-30T14:35:49.993
> 
> 标签：java, jsf, jsf-2, richfaces, jboss7.x

我们的 Web 应用程序使用 JBoss 7.1.1 和 Java（JPA2 和 RichFaces4）运行。目前的问题是，如果用户登录但在一段时间内没有在应用程序内执行任何操作（可能是由于会话超时引起的），应用程序就会卡住。然后用户必须再次加载Web应用程序，这看起来不太专业。

您能否给我一个提示，如何使用上述技术实现自动注销？

**[更新]**
我尝试了很多可能性，但没有一个能正常工作。我的想法是实现一个知道会话何时过期的 SessionTimeoutListener：

```
@Logged
@WebListener
@Named
public class SessionTimeoutListener implements HttpSessionListener
{
    @Inject
    private Logger logger;

    @Override
    public void sessionCreated(HttpSessionEvent event)
    {
        // not used.
    }

    @Override
    public void sessionDestroyed(HttpSessionEvent event)
    {
        logger.info("Session destroyed.");

        ApplicationContext.setAutoLoggedOut(true);
    }
} 
```

这行得通。但是随后出现了所有问题：我无法从中重定向，因为 FacesContext 在那里为空。我无法触发[推送事件](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=push&sample=pushCdi&skin=blueSky)，因为我遇到了一些异常，例如 NameNotFoundException 或类似的（我尝试了很多，但似乎触发事件也无法解决这个问题）。然后我在 ApplicationContext.isAutoLoggedOut() 上尝试了 a4j:poll 但这也不起作用，因为如果我执行轮询事件，会话将永远不会过期。我总是走入死胡同。如果我可以从 SessionTimeoutListener 以某种方式重定向，这将是解决方案。

**[可能的解决方案]**
我现在对在会话过期后单击视图内的任何按钮时执行的注销感到满意。当前的解决方案只是初步的，尚不适用于生产，但此解决方案有效，我将在此基础上进行构建：我使用上层 SessionTimeoutListener。此外，我使用了在 SessionTimeoutListener 之后调用的 PhaseListener，因此如果会话到期，将调用 SessionTimeoutListener 并销毁会话，但 SessionTimeoutPhaseListener 仍然具有 FacesContext。所以我可以在那里重定向到注销页面：

```
public class SessionTimeoutPhaseListener implements PhaseListener
{
    private static final long serialVersionUID = -8603272654541248512L;

    @Override
    public void beforePhase(PhaseEvent event)
    {
        //not used.
    }

    @Override
    public void afterPhase(PhaseEvent event)
    {
        FacesContext facesContext = event.getFacesContext();

        if (ApplicationContext.isAutoLoggedOut())
        {
            ApplicationContext.setAutoLoggedOut(false);

            try
            {
                facesContext.getExternalContext().redirect("./logout.xhtml");
            }
            catch (IOException e)
            {
            }
        }
    }

    @Override
    public PhaseId getPhaseId()
    {
        return PhaseId.RESTORE_VIEW;
    }
} 
```

ApplicationContext 是一个带有 @ApplicationScoped 的类，它存储布尔变量，但这必须更改，因为它会影响当前使用该应用程序的每个用户。我想一些“ThreadLocal context”来解决这个问题。我仍然必须区分自动注销和手动注销。在这两种情况下都会调用侦听器。虽然这个解决方案目前有效，但 PhaseListener 中的重定向也很棘手，因为如果我不将“autoLoggedOut”设置为 false，JSF 会一遍又一遍地调用它（这会导致浏览器中的重定向循环错误）。 .. 正如我所说，只是初步的，但使用 PhaseListener 可能是唯一合适的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:47:12.687

有两种方法可以做到这一点：

1 使用拉机制 每5秒左右，不断询问服务器会话是否有效，如果服务器说是有效，则休眠指定时间段，如果服务器说无效，则向用户显示消息，然后注销。

2 使用推送机制 使用`a4j:push`，因此在您的服务器中，您有一个`TimerTask`每 5 秒运行一次检查会话是否有效，如果看到会话有效，则休眠，如果无效，则向用户发送消息然后注销。

看起来 RichFaces4 在线演示不起作用，但请查看此[链接](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=push&skin=blueSky)

我不确定 RichFaces 是否有[Primefaces Idle Monitor 之类的东西](https://www.primefaces.org/showcase/ui/misc/idleMonitor.xhtml)

另一种解决方案是使用[自定义 HttpSessionListener](http://techieexchange.blogspot.com/2008/02/jsf-session-expiry-timeout-solution.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T17:21:32.033

由于它是网络，您可以使用一些 javascript：

```
var timeout;
var timeoutTime = 294000;
$().ready(function() {
    $(".loading").bind("ajaxSend", function() {
        timeout = setTimeout("TimedOut()", timeoutTime);
    }
});

function TimedOut() {
    //here I do an async call to test if a user is timed out
    var isTimedOut = yourMethodToTest();

    if(isTimedOut) { //do whatever you need to do here;
        alert("session timed out");
    }
    else { //restart the checker
        timeout = setTimeout("TimedOut()",timeoutTime);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T14:48:09.673

如果要处理 ViewExpiredException，可以将以下设置添加到 web.xml

```
<error-page>
    <exception-type>javax.faces.application.ViewExpiredException</exception-type>
    <location>/login.jsf</location>
</error-page> 
```

更好的是，使用[PhaseListener](http://docs.oracle.com/cd/E17824_01/dsc_docs/docs/jscreator/apis/jsf/javax/faces/event/PhaseListener.html) tio 检查用户是否在会话中仍然可用。

```
FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("User") 
```

如果没有 - 导航到登录页面。

```
FacesContext.getCurrentInstance().getApplication().getNavigationHandler().handleNavigation(FacesContext.getCurrentInstance(), null, "login"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T15:02:41.143

您必须在 web.xml 中配置会话超时，该值以分钟为单位且不能小于 1：

```
<session-config>
    <!-- The application will have 15 minutes for session timeout -->
    <session-timeout>15</session-timeout>
</session-config> 
```

您应该添加一个过滤器来检查会话是否已过期：

```
<filter>
    <filter-name>SessionTimeoutFilter</filter-name>
    <filter-class>edu.home.TimeoutFilter</filter-class>
</filter> 
```

过滤器将如下所示：

```
public class TimeoutFilter implements Filter {
    private String startPage = "index.xhtml";

    public void init(FilterConfig filterConfig) throws ServletException {}
    public void destroy() {}

    public void doFilter(ServletRequest request, ServletResponse response,
        FilterChain filterChain) throws IOException, ServletException {
        if ((request instanceof HttpServletRequest) &&
            (response instanceof HttpServletResponse)) {
            HttpServletRequest httpServletRequest = (HttpServletRequest) request;
            HttpServletResponse httpServletResponse = (HttpServletResponse) response;
            if (!isValidSession(httpServletRequest)) {
                String timeoutUrl = httpServletRequest.getContextPath() + "/"
                    + startPage;
                //redirects to the first page
                httpServletResponse.sendRedirect(timeoutUrl);
            }
            filterChain.doFilter(request, response);
        }
    }

    private boolean isValidSession(HttpServletRequest httpServletRequest) {
        return (httpServletRequest.getRequestedSessionId() != null) &&
               httpServletRequest.isRequestedSessionIdValid();
    }
} 
```

# c# - 进程未正确超时

> ID：10818477
> 
> 赞同：0
> 
> 时间：2012-05-30T14:36:05.220
> 
> 标签：c#, .net, wcf

我正在为我们的程序构建一个 IP 扫描仪。它目前可以工作，但运行速度非常慢。超时似乎无法正常工作。代码如下所示：

```
 public Tracker Discover(Uri hostUri, string organizationTrackerId)
    {
        var binding = new NetTcpBinding();
        binding.ReceiveTimeout = TimeSpan.FromSeconds(2);
        binding.SendTimeout = TimeSpan.FromSeconds(2);
        binding.OpenTimeout = TimeSpan.FromSeconds(2);
        var endpointAddress = new EndpointAddress(hostUri);
        using (var factory = new ChannelFactory<ITrackerService>(binding, endpointAddress))
        {
            try
            {
                factory.Open(TimeSpan.FromSeconds(2));
                var channel = factory.CreateChannel();
                Tracker tracker = channel.Discover(organizationTrackerId);
                factory.Close();
                return tracker;
            }
            catch (Exception)
            {
                factory.Abort();
            }
        }
        return null;
    } 
```

这段代码是从循环 255 个 IP 的 for 循环中调用的。调用此函数时，即使我已尝试将超时设置为 2，目前仍需要约 16 秒才能完成。有什么想法吗？

# java - Swing GUI 工厂方法模式

> ID：10818480
> 
> 赞同：0
> 
> 时间：2012-05-30T14:36:22.280
> 
> 标签：java, swing, design-patterns, methods, factory

我希望使用工厂方法模式来使 Swing UI 的开发更快、更易于管理。

一般来说，它是一个使用 JInternalFrames 的 MDI 应用程序。我在系统中有很多设置、我称之为类型的类型（例如 userTypes、accountTypes 等）。我有一个我决定使用的固定 UI。问题是，系统中有超过 50 种此类类型，因此工厂方法模式似乎是最易于管理的解决方案。下面是一个工作应用程序的两个屏幕截图。

![记录的主要部分](../Images/f212e9002e20ecccb4e6b7e20053e75e.png) ![在此处输入图像描述](../Images/abb9ea3ee9ff10477df8b3201e7c22fd.png)

我正在查看 [this example][3] 但由于我无法估计将所有信息存储在记录中所需的选项卡数量，因此我需要能够添加多个选项卡和控件（标签、文本框、表格、组合框等）在这些选项卡中。

根据示例，是否可以在抽象类中创建 JTabbedPane 并在子类中对其进行修改和添加？我尝试了以下方法，有点迷失：

```
public AbstractTypeInternalFrame(String title) {
        setBounds(100, 100, 808, 589);

        JToolBar toolBar = new JToolBar();
        getContentPane().add(toolBar, BorderLayout.NORTH);

        JButton btnAdd = new JButton("Add");
        toolBar.add(btnAdd);

        JButton btnSave = new JButton("Save");
        btnSave.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
            }
        });
        toolBar.add(btnSave);

        JButton btnDelete = new JButton("Delete");
        toolBar.add(btnDelete);

        JButton btnCancel = new JButton("Cancel");
        btnCancel.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
            }
        });
        toolBar.add(btnCancel);

        JTabbedPane recordTabs = new JTabbedPane(makeRecordTabPane());
        getContentPane().add(recordTabs, BorderLayout.NORTH);

        JSeparator recordSearchSeparator = new JSeparator();
        getContentPane().add(recordSearchSeparator, BorderLayout.NORTH);

    }

    protected abstract int makeRecordTabPane(); 
```

使用 makeRecordTabPane() 方法需要返回一个 int。

如您所见，我有点迷茫，只需要一些指导来了解如何继续使用这种模式。如果有任何建议甚至示例/链接，将不胜感激。

我意识到我的问题很模糊，所以如果我需要任何澄清，请随时提问。

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:40:38.987

这是更详细的问题。

因此，我希望为系统记录上的 CRUD 操作构建一个简单的 JInternalFrame。诸如用户、用户类型、帐户、帐户类型等记录。系统中有超过 50 种类型，所以我认为使用工厂方法模式会使所有这些 JInternalFrames 更易于管理。

以下是用户记录的示例：

[链接](https://www.dropbox.com/s/g7073z70fyq8w47/jInternalFrame1.jpeg) [1 链接2](https://www.dropbox.com/s/yjdy29o8llrudrr/jInternalFrame2.jpeg)

上半部分构成记录的详细信息，根据记录的内容分为选项卡。有些记录可能只有一个选项卡，而其他较大的记录可能有多个。因此，JTabbedPane 的内容应该在子类级别和[本示例中进行实例化。](http://www.javaspecialists.eu/archive/Issue074.html)

底部是我们搜索该类型记录的地方。例如，在发布的链接中，打开了用户管理器 JInternalFrame。然后我们将根据用户名和/或用户 ID 搜索用户。结果显示在下表中，双击搜索结果时，记录显示在 JTabbedPane 上方。

然后使用添加、保存、删除和取消按钮对输入到记录中的任何内容执行 CRUD 操作。

由此，我们可以说设计中需要由子类实例化的方面是：

1) JInternaFrame 的大小 2) JTabbedPane 的所有内容：标签、表格、标签、文本框等的数量。 3) 搜索结果 JTable 中的列数：我们可以通过实例化 JTable Header 来更改。

作为开始，我试图只创建一个带有 JTabbedPane 的 Abstract 类，然后将组件添加到 JTabbedPane 以了解如何去做。这是我之前发布的代码。该文件是使用 WindowBuilder 生成的，后来我对其进行了修改：

```
package zm.co.freight.fpsManagementGUI.view;

import java.awt.EventQueue;

public abstract class AbstractTypeInternalFrame extends JInternalFrame {

    /**
     * Launch the application.
     */
//  public static void main(String[] args) {
//      EventQueue.invokeLater(new Runnable() {
//          public void run() {
//              try {
//                  AbstractTypeInternalFrame frame = new AbstractTypeInternalFrame();
//                  frame.setVisible(true);
//              } catch (Exception e) {
//                  e.printStackTrace();
//              }
//          }
//      });
//  }

    /**
     * Create the frame.
     */
    public AbstractTypeInternalFrame(String title) {
        setBounds(100, 100, 808, 589);

        JToolBar toolBar = new JToolBar();
        getContentPane().add(toolBar, BorderLayout.NORTH);

        JButton btnAdd = new JButton("Add");
        toolBar.add(btnAdd);

        JButton btnSave = new JButton("Save");
        btnSave.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
            }
        });
        toolBar.add(btnSave);

        JButton btnDelete = new JButton("Delete");
        toolBar.add(btnDelete);

        JButton btnCancel = new JButton("Cancel");
        btnCancel.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
            }
        });
        toolBar.add(btnCancel);

        JTabbedPane recordTabs = new JTabbedPane(makeRecordTabPane());
        getContentPane().add(recordTabs, BorderLayout.NORTH);

        JSeparator recordSearchSeparator = new JSeparator();
        getContentPane().add(recordSearchSeparator, BorderLayout.NORTH);

    }

    protected abstract int makeRecordTabPane();

} 
```

问题是，我在正确的轨道上吗？我应该如何使用工厂方法模式来处理它，因为我似乎不太了解它。我见过更简单的例子，包括形状和绘图，但对 Swing 接口有点迷失。有没有一个很好的例子可以指导我，或者一个简单的例子只是为了给我指出正确的方向......这就是我所要求的。对不起，如果它是模糊的......

# jakarta-ee - 为 JBOSS 和 Tomcat6 加密数据源密码

> ID：10818484
> 
> 赞同：0
> 
> 时间：2012-05-30T14:36:33.580
> 
> 标签：jakarta-ee, tomcat, jboss, datasource

有没有办法加密提供给 Tomcat6 的 context.xml 和 JBoss 的 mssql-ds.xml 的数据源密码？

我可以在属性文件中将数据源信息外部化，并使用 Jasypt 加密那里的密码。但是 Tomcat 和 JBoss 将如何访问这个属性文件呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:48:03.490

原来这是 Tomcat Wiki 中的常见问题解答。

[http://wiki.apache.org/tomcat/FAQ/Password](http://wiki.apache.org/tomcat/FAQ/Password)

如果您希望您的服务能够在无人值守的情况下启动，则没有可靠的方法来真正保护自己。所有允许无人值守的创业公司的技术都只是默默无闻的安全。

# jquery - Jquery 自动完成 UI - 多个字段没有结果

> ID：10818488
> 
> 赞同：0
> 
> 时间：2012-05-30T14:36:39.150
> 
> 标签：jquery, jquery-ui

[安德鲁对我的评论的回答](https://stackoverflow.com/questions/4718968/detecting-no-results-on-jquery-ui-autocomplete/4719848#comment14076993_4719848)引发了这个问题。

根据他在上面链接中的精彩回答，问题底部的代码仅适用于 ONE 小部件。但它是杀手级的好代码，而且很有意义......我想我想要两全其美。很好的 JS，（如果可能的话）并且`show()`只有我们当时使用的元素才能得到零结果。

如我所见，此代码段是我的问题的主要症结：

```
        来源：功能（请求，响应）{
        jQuery.ajax({
            url: "/autocomplete.json",
            数据： {
            术语：request.term
            },
            成功：函数（数据）{
            如果（数据长度 == 0）{
        jQuery('span.guest_investor_email').show();
                jQuery('span.investor_field_delete_button').show();
            }
            响应（数据）；
            }
        });

```

目前：

我的页面上有一个按钮，上面写着“添加更多信息”，每次单击它时，都会出现一个自动完成文本字段的新实例，其中包含一些隐藏字段和一个`display:none;`on `guest_investor_email`。如果我使用自动完成文本字段，比如说 3 次，我在页面上有 3 个自动完成实例，第三个找到 0 个结果：代码将显示（）`guest_investor_email`文本字段的所有 3 个实例，而不是`this`一个空白.

问题：

我怎样才能得到类似 `jQuery(this).siblings(('span.guest_investor_email').show();`工作的东西？

`this`是一个对象，而不是要选择的元素数组。如果不是`this`我不介意，只要我知道如何去做。谢谢。

* * *

完整代码：

```
     jQuery(".auto_search_complete").live("点击", function() {
     jQuery(this).autocomplete({
        最小长度：3，

        来源：功能（请求，响应）{
        jQuery.ajax({
            url: "/autocomplete.json",
            数据： {
            术语：request.term
            },
            成功：函数（数据）{
            如果（数据长度 == 0）{
        jQuery('span.guest_investor_email').show();
                jQuery('span.investor_field_delete_button').show();
            }
            响应（数据）；
            }
        });
        },

        焦点：函数（事件，用户界面）{
        jQuery(this).val(ui.item.user ? ui.item.user.name : ui.item.pitch.name);
        返回假；
        },
        选择：函数（事件，用户界面）{
        jQuery(this).val(ui.item.user ? ui.item.user.name : ui.item.pitch.name);
        jQuery(this).siblings('div.hidden_​​fields').children('.poly_id').val(ui.item.user ? ui.item.user.id : ui.item.pitch.id);
        jQuery(this).siblings('div.hidden_​​fields').children('.poly_type').val(ui.item.user ? "User" : "Pitch");
        jQuery(this).siblings('span.guest_investor_email').hide();
                jQuery(this).siblings('span.investor_field_delete_button').show();
                jQuery(this).attr('readonly','readonly');
                jQuery(this).attr('id', "investor-selected");

        返回假；
        }
    }).每个（函数（）{
        jQuery(this).data("自动完成")._renderItem = function(ul, item) {
        返回 jQuery("
```

*   ") .data("item.autocomplete", item) 。附加（”

    " + (item.user ? item.user.name : item.pitch.name) + "
    " + (item.user ? item.user.investor_type : item.pitch.investor_type) + " - " + (item.user ? item.user.city : item.pitch.city) + "

    ") .appendTo(ul); }; }); });

    * * *

    ## 回答 #1

    > 赞同：1
    > 
    > 时间：2012-05-30T14:47:07.570

    我不完全理解您想要实现的目标，但我认为您想获得绑定`.live`事件的元素，对吗？

    ```
    jQuery(".auto_search_complete").live("click", function() {
        var $this = $(this);
        jQuery(this).autocomplete({
            minLength: 3,
            ...
            success: function (data) {
            if (data.length == 0) {
        jQuery('span.guest_investor_email').show();
                $this.siblings('span.investor_field_delete_button').show();
            }
        ... 
    ```

# java - hibernate - 保存实体，其中包含一个实体（已存在于数据库中）

> ID：10818489
> 
> 赞同：1
> 
> 时间：2012-05-30T14:36:40.427
> 
> 标签：java, hibernate, entity

为简单起见，这是我的简化模型：

我有 2 个实体：

```
@entity
public class Student {
int id;
School school
...
} 
```

学校也是一个实体

```
@entity
public class School {
int id;
...
} 
```

我试图从文本文件中提取大量数据。有些学生有相同的学校实例，我不希望我的数据库中有多个同名学校，所以我的目标是将每个学生保存在学生数据库中，同时确保同一学校的 2 个不同学生不会创建我的学校数据库中有 2 个条目。

问题是当我尝试坚持学生时，它给了我一个错误：“分离的实体传递给坚持”，我如何告诉休眠，学生班级中的学校已经存在于数据库中，并且应该使用它反而？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:39:32.707

映射它`@ManyToOne(cascade=ALL)`。

但是，“同名”是不够的，您应该有相同的 ID。为此，您需要确保您的`School`对象是从数据库中获取的，然后再将其设置为 Student

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:38:43.247

会话中有一个名为 merge() 的方法。使用它而不是 saveOrUpdate();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:48:35.497

假设关联已经设置：

确保您正在使用持久的 Student 实体。搜索学生实体，并将学校 -> 学生设置为搜索返回的学生实体。

entity.find (Student.class, student_id)

否则，请确保在执行上述操作之前对关联进行注释。

# ruby-on-rails - 是否可以将错误添加到 ActiveRecord 对象而不将它们与特定属性相关联？

> ID：10818491
> 
> 赞同：23
> 
> 时间：2012-05-30T14:36:49.163
> 
> 标签：ruby-on-rails

如果您需要编写相当复杂的验证代码，则错误有时不在于特定属性，而在于其中几个属性的组合。

例如，如果我想验证 :start_date 和 :end_date 之间的时间段不包含任何星期天，则错误不属于这些字段中的任何一个，但错误添加方法需要指定它。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-30T14:46:40.637

尝试做这样的事情：

```
# Your Model.rb
validate :my_own_validation_method

...

private

def my_own_validation_method
    if there_is_no_sunday_in_the_range
        self.errors[:base] << "You must have a Sunday in the time range!"
    end
end 
```

基本上，您可以将自己的复杂验证添加到模型中，当您发现发生了错误时，您可以在错误数组中添加错误字符串。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-30T14:51:59.430

```
model_instance.errors[:base] << "msg" 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-11-07T14:02:06.713

上面的答案已经过时了。对于 Rails 5 及更高版本，您需要调用[ActiveModel::Errors add](http://api.rubyonrails.org/classes/ActiveModel/Errors.html#method-i-add)方法并将其`:base`作为第一个参数。请参见下面的示例。

```
model_instance.errors.add(
  :base, 
  :name_or_email_blank, 
  message: "either name or email must be present"
) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-30T14:46:32.650

您可以使用`errors[:base]`添加与一个属性无关的一般错误 - [rails guide link](http://guides.rubyonrails.org/active_record_validations.html#errors-base)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-15T03:32:34.460

实际上，您可以随意命名散列键：

```
instance.errors[:case_of_the_sundays] << "Error, son." 
```

只是描述性强一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-24T22:14:18.100

更新：不推荐使用用于添加错误的消息数组。

现在我们做类似的事情。

```
self.errors.add(:some_key, "Some Error!") 
```

# knockout.js - 如何在使用 Knockout 删除拖动元素时删除

> ID：10818493
> 
> 赞同：1
> 
> 时间：2012-05-30T14:37:00.190
> 
> 标签：knockout.js, drag-and-drop, custom-binding

我有两个自定义绑定要拖放，并且有一个需要放入可放置区域的元素列表，但是当发生这种情况时，我需要从源列表中删除拖动的元素，我正在做如下方式，但是当从源列表中删除拖动的元素时，我收到以下错误“无法获取属性'选项'的值：对象为空或未定义”，并且调试器在我的 jquery-ui.1.8.17 中中断.min.js 文件，在这一行`var d=a(this).data("draggable").options`。问题出现在拖动绑定中。

这是我的代码：

```
 var viewModelInstance = new ViewModel();
$(document).ready(function () {
    $(window).load(
        function () {
            var _dragged;
            ko.bindingHandlers.drag = {
                init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
                    var dragElement = $(element);
                    var dragOptions = {
                        helper: 'clone',
                        revert: true,
                       start: function () {
                           _dragged = ko.utils.unwrapObservable(valueAccessor().value);
                           },
                        cursor: 'default'
                    };
                    dragElement.draggable(dragOptions).disableSelection();

                }
            };

            ko.bindingHandlers.drop = 
            {
                init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
                    var dropElement = $(element);
                    var dropOptions = {
                        drop: function (event, ui) {
                            var folder = dropElement[0].innerText;
                            viewModelInstance.UpdateCandidate(_dragged, viewModel, folder);
                           viewModelInstance.candidates.remove(_dragged);
                        }
                    };
                    dropElement.droppable(dropOptions);
                }
            };
            ko.applyBindings(viewModelInstance);

    });
        }
    );
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:02:11.877

我设法通过添加一个“setTimeout”来解决这个错误，让拖动操作在敲除从列表中删除元素之前完成。

在您的情况下，代码更改应类似于：

```
drop: function (event, ui) {
    var folder = dropElement[0].innerText;
    setTimeout( function(){
        viewModelInstance.UpdateCandidate(_dragged, viewModel, folder);
        viewModelInstance.candidates.remove(_dragged);
    },10);
} 
```

希望这对你有用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:56:40.353

尝试使用 detach() 而不是 remove()。

# c# - 如何在 C# 中将 CSHTML 读取为 XML 文件

> ID：10818494
> 
> 赞同：2
> 
> 时间：2012-05-30T14:37:08.707
> 
> 标签：c#, xml, asp.net-mvc, razor

我在这个文件中有一个 cshtml 文件我有一个隐藏字段和静态值。我想将其作为 XML 文件读取以查找隐藏字段。事实上，我不喜欢将它作为文本文件打开并搜索它。

这是我文件的一部分，我想读取隐藏文件：

```
 <!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" content="Soha Application" />
    <title>@ViewBag.MeetingTitle</title>    
    <link href="@Url.Content("~/Content/themes/Default/main.css")" rel="stylesheet" type="text/css" />    
    <link href="@Url.Content("~/Content/themes/Default/fa-IR.css")" rel="stylesheet" type="text/css" />    
    <script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
</head>
<body>
    <div class="page">
        <header>
            **<input id="SkinId" type="hidden" value="008BBF4768861284321640F895D68DA1" /> <!-- Please dont change this Code -->**
            <div id="title">
                <h1>@ViewBag.MeetingTitle</h1>
            </div>
            <nav>
            </nav>
        </header> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:58:56.450

我在这里使用 XPath 扩展：[https ://github.com/ChuckSavage/XmlLib/](https://github.com/ChuckSavage/XmlLib/)

这应该适合你。它将返回所有具有属性的元素`type="hidden"`

```
XElement root = XElement.Load(file); // or XElement.Parse(string);
var hidden = root.XPath("//*[@type='hidden']"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:51:56.450

你可以像普通的 xml 一样阅读它，因为它是一个 xhtml

例如 [http://sticklebackplastic.com/post/2007/06/28/How-to-use-XmlResolver-Or-reading-an-xhtml-file-in-net.aspx](http://sticklebackplastic.com/post/2007/06/28/How-to-use-XmlResolver-Or-reading-an-xhtml-file-in-net.aspx)

或将 linq 与 html 敏捷包一起使用

[http://web.archive.org/web/20080719181517/http://vijay.screamingpens.com/archive/2008/05/26/linq-amp-lambda-part-3-html-agility-pack-to- linq.aspx](http://web.archive.org/web/20080719181517/http://vijay.screamingpens.com/archive/2008/05/26/linq-amp-lambda-part-3-html-agility-pack-to-linq.aspx)

# redirect - actionforward 的重定向属性在基于 struts portlet 桥的 portlet 中不起作用 (JSR-168)

> ID：10818497
> 
> 赞同：0
> 
> 时间：2012-05-30T14:37:16.153
> 
> 标签：redirect, struts, portlet

我对此事做了很多研究，但似乎找不到我的问题的答案，所以我希望你们能帮助我。

我们有一个 struts 1.2.7 Web 应用程序，我们使用 Apache Struts Portlet Bridge 将其转换为 JSR-168 portlet。

这一切都很好，除了一件事：指定重定向的动作转发实际上并不重定向到指定的动作。当将应用程序作为普通的 struts Web 应用程序运行时，这些重定向确实有效。因此，我们在 portlet 变体中存在双重提交问题。

我们使用以动作转发到图块定义结束的动作链。例如：

```
<action path="/CreateIdmAccountSubmit"  validate="true"   input="catalog.createaccount.page" type="com.konakart.actions.login.CreateIdmAccountSubmitAction" name="CreateIdmAccountForm">
        <forward name="FillRegistrationData" path="/FillRegistrationData.do" redirect="true"/>
    </action>

<action path="/FillRegistrationData" validate="false" type="com.konakart.actions.registration.FillRegistrationDataAction" name="FillRegistrationDataForm">
        <forward name="FillRegistrationDataPage" path="/FillRegistrationDataPage.do" redirect="false"/>
    </action>

<action path="/FillRegistrationDataPage" forward="order.registrationdata.page"/> (tiles-def) 
```

在此示例中，操作*/CreateIdmAccountSubmit*处理提交的表单 (POST) 并在数据库中创建一个帐户。成功创建后，用户被重定向到另一个动作（*/FillRegistrationData*），该动作初始化一个订单对象，然后转发到在tiles-defs.xml 中定义的布局的订单注册页面。

正如我所说，这一切都很好，从功能角度来看，但是当用户在呈现的订单注册页面上点击 f5 时，再次调用操作 /CreateIdmAccountSubmit 导致帐户被创建双倍。正如我所说，在将应用程序作为普通 Web 应用程序运行时也不会发生这种情况。在这里，该机制完美运行:)

我认为问题是由于重定向是在错误的阶段完成的，但我真的不确定为什么这不起作用:)

根据我阅读的内容，我尝试了以下方法来解决重定向问题： * 在 struts-portlet-config.xml 中将表单提交的操作指定为“actionUrl”（希望重定向是在错误的阶段完成的？） * 替换struts-portlet 变体的普通 html 标记库（希望我的 html:form 生成了一个有效的 url actionUrl，以某种方式使重定向成为可能？）

这两个步骤似乎没有帮助，我不知道如何在 portlet 中完成一个简单的重定向，以便我们可以防止双重提交问题。

希望你们能帮帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:01:52.407

我找到了答案：机制依赖于门户实现。我们使用默认情况下不支持重定向的 Liferay。

但是，您可以通过在 liferay-portlet.xml 中声明一个名为

```
<action-url-redirect>true</action-url-redirect> 
```

这为我们解决了问题！

# c# - 使用c#从coldfusion解密加密字符串

> ID：10818504
> 
> 赞同：2
> 
> 时间：2012-05-30T14:37:31.313
> 
> 标签：c#, asp.net, coldfusion, coldfusion-8

我在 ColdFusion 中使用`encrypt(string,key)`and`decrypt(string,key)`进行加密。现在我想做的是在 ColdFusion 中加密，但在 asp.net C# 中*解密。*有人可以告诉我如何做到这一点吗？

如果这是我的 ColdFusion 代码：

```
encrypt("hello","abcdefgh")
decrypt(".....","abcdefgh" 
```

asp.net 中的等效代码是什么样的？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:07:01.757

根据 Coldfusion 的[文档](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_e-g_01.html)，

> ColdFusion 标准版安装了一个具有以下算法的密码库：
> 
> CFMX_COMPAT：ColdFusion MX 和之前版本中使用的算法。此算法是最不安全的选项（默认）。

除非在 C# 中实现 CF 解密算法，否则无法解密。您必须指定不同的加密算法，如 3DES，才能对其进行解密。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T18:32:13.313

正如 Josh 指出的那样，如果您不指定算法 CF 使用默认算法`cfmx_compat`。与 AES、Blowfish 等标准算法不同，.NET 中没有它的库。要解密 C# 中的值，.NET 端需要使用自定义类。（请参阅此处了解我[对 Railo 的 cfmx_compat 类的 C# 端口](https://stackoverflow.com/a/4627069/104223)。）

也就是说，我建议不要`cfmx_compat`仅仅因为它是一个非常弱的算法而使用它。它仅包含在 CF 中是为了向后兼容。在 ColdFusion 中使用更强大的算法之一（如 AES、Blowfish 等）会好得多。由于这些算法是标准的，因此与 C#（或任何其他语言）的互操作性会容易得多。有关一些示例，请参阅上面评论中发布的链接 Al。

# mysql - MySQL 报告数据库性能缓慢

> ID：10818518
> 
> 赞同：0
> 
> 时间：2012-05-30T14:38:20.470
> 
> 标签：mysql, performance, database-performance

目前我有 3 台服务器正在运行，2 台远程，主服务器运行`MySQL 5.5.24`和备份运行`MySQL 5.1.63`，1 台本地运行`MySQL 5.5.20`用于开发。主服务器用于报告目的；目前有 144 个表（`MyISAM`和`InnoDB`），大约 80GB 的数据，较大的表每个大约有 1300 万行。

在远程服务器上，我通过 webmin 的访问权限非常有限，因此我无法直接进行更改，我需要向 IT 部门询问。

自从我们上个月发生 MySQL 崩溃以来，我在主服务器上遇到了一些严重的性能问题。服务器正在运行一个有一些磁盘写入错误的开发版本，在恢复之后我们安装了该`MySQL 5.5.23`版本，这就是性能问题开始的时候。我们最近安装了`MySQL 5.5.24`（最新的稳定版本），但仍然存在性能问题

以下是服务器配置，都是专用服务器：

**主要**：

```
Operating system: Gentoo Linux
Kernel and CPU: Linux 2.6.31-gentoo-r6 on x86_64 
Processor information: Intel(R) Xeon(TM) CPU 2.66GHz, 8 cores
Real memory (ram): 23.55 GB total
Virtual memory: 3.74 GB total
Local disk space: 463.38 GB total (about 30% free) 
```

**备份**：

```
Operating system: Gentoo Linux
Kernel and CPU: Linux 2.6.31-gentoo-r6 on x86_64
Processor information: Intel(R) Core(TM)2 Duo CPU E6405 @ 2.13GHz, 2 cores
Real memory (ram): 15.68 GB total
Virtual memory: 16.01 GB total
Local disk space: 4.73 TB total (about 80% free) 
```

**发展**：

```
Operating system: Ubuntu Linux 9.04
Kernel and CPU: Linux 2.6.32-33-server on x86_64
Processor information: Intel(R) Core(TM)2 Duo CPU E6550  @ 2.33GHz, 2 cores
Real memory (ram): 1.95 GB total
Virtual memory: 5.65 GB total
Local disk space: 141.15 GB total (about 5% free) 
```

所有服务器都具有相同的 my.cnf 配置，除了`innodb_buffer_pool_size`

**我的.cnf**

```
[mysqld]
back_log = 50
max_connections = 100
max_connect_errors = 10
table_open_cache = 2048
max_allowed_packet = 16M
binlog_cache_size = 1M
max_heap_table_size = 64M
read_buffer_size = 2M
read_rnd_buffer_size = 16M
sort_buffer_size = 8M
join_buffer_size = 8M
thread_cache_size = 8
thread_concurrency = 8
query_cache_size = 64M
query_cache_limit = 2M
ft_min_word_len = 4
default-storage-engine = MYISAM
thread_stack = 262K
stored_program_cache= 1024
transaction_isolation = REPEATABLE-READ
tmp_table_size = 64M
binlog_format=mixed
slow_query_log
long_query_time = 2
key_buffer_size = 512M
bulk_insert_buffer_size = 64M
myisam_sort_buffer_size = 128M
myisam_max_sort_file_size = 10G
myisam_repair_threads = 1
myisam_recover
innodb_additional_mem_pool_size = 16M
innodb_buffer_pool_size = 8G
innodb_data_file_path = ibdata1:10M:autoextend
innodb_write_io_threads = 8
innodb_read_io_threads = 8
innodb_thread_concurrency = 16
innodb_flush_log_at_trx_commit = 1
innodb_log_buffer_size = 8M
innodb_log_file_size = 256M
innodb_log_files_in_group = 3
innodb_max_dirty_pages_pct = 90
innodb_lock_wait_timeout = 240
server-id = 1
event_scheduler = 1
[mysqldump]
quick
max_allowed_packet = 16M
[mysql]
no-auto-rehash
[myisamchk]
key_buffer_size = 512M
sort_buffer_size = 512M
read_buffer = 8M
write_buffer = 8M
[mysqlhotcopy]
interactive-timeout
[mysqld_safe]
open-files-limit = 8192 
```

我已经尝试了几个`Stored Procedures`具有大量列和数据的大型服务器，备份服务器比主服务器快 10 倍，在开发服务器上运行它们比主服务器快 5 倍。

由于主服务器和备份服务器位于同一个远程位置并且通过 VPN，我知道没有连接速度问题。

我无法发布`Stored Procedures`代码，但我知道问题出在最后`SELECT`，因为所有临时表的创建速度都非常快，而且我可以在 MySQL 监视器（使用`SHOW FULL PROCESSLIST`）中看到`SELECT`它占用了 95% 的时间。大多数`Stored Procedures`工作都处理大量数据，并带有多个连接。

任何想法为什么主服务器的性能可能如此糟糕，即使它是最强大的？

我们一直在寻找最新版本的报告性能错误，但我们发现根本没有帮助[http://bugs.mysql.com/bug.php?id=44585](http://bugs.mysql.com/bug.php?id=44585)

我真的很感激任何帮助

在服务器故障时会更好地问这个问题吗？这是我的第一个问题

对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:06:54.970

您尝试的存储过程中的所有有问题的 SELECT 语句是否都涉及相同的表？也许需要在其中一些上重建索引统计信息 - 查看[OPTIMIZE TABLE](http://dev.mysql.com/doc/refman/5.5/en/optimize-table.html)命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:49:54.720

最后我们将数据库移到另一台服务器上，新版本的 MySQL

# css - 内部 div 填充屏幕的其余部分（受包装边距和填充限制）

> ID：10818522
> 
> 赞同：0
> 
> 时间：2012-05-30T14:38:31.623
> 
> 标签：css, html

我需要内容 div 来“填充”标题后剩余的屏幕。我想保留包装填充和边距。使用绝对位置不起作用，因为内容 div 停止在视觉上嵌套在包装器中。（如果绝对必要，标题 div 可以是固定高度，但我希望它是动态的。）非常感谢。

```
* { 
   margin:0px;
   padding:0px;
}

html, 
body { 
height: 100%;
}

#wrapper {
    background-color:#eee; 
    margin:20px; padding:20px;
    border: solid 1px #333;
}

#header {

}

#content {
     background-color:red;
} 
```

.

```
<body>
<div id="wrapper">
    <div id="header">header</div>
    <div id="content">content</div>

</div>

</body> 
```

在这里小提琴：http: [//jsfiddle.net/jHLhK/](http://jsfiddle.net/jHLhK/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:40:55.553

将宽度和高度设置为`100%`您的内容 div。

```
#content {
     background-color:red;
     width:100%;
     height:100%;
} 
```

这`100%`意味着它将与周围元素的可用空间一样多。

或者您可能只想`height`或仅`width`取决于`100%`您的要求。

# javascript - 在 HTML 锚点中指定“语言”属性会改变事件行为吗？

> ID：10818535
> 
> 赞同：0
> 
> 时间：2012-05-30T14:39:04.183
> 
> 标签：javascript, html

我的网站上有以下 JS 代码：

```
function foo(link) {
    alert('ID=' + link.DocumentID + '; Lang=' + link.Language);
} 
```

每次单击以下链接时都应调用它：

```
<a href='http://www.example.com' DocumentID='someDocId' Language='en' onclick='foo(this);'>Example page</a> 
```

（这只是我实际代码的简化版本，但它的工作原理完全相同；我需要一些非标准属性，例如`DocumentID`和`Language`用于跟踪目的）。

问题是该`foo()`函数不会在点击事件时触发。当我将`Language`属性名称更改为 ie`Lng`函数时，一切正常。我已经在 IE7/8 和 FF（最新版本）上对其进行了测试。

根据[W3C HTML4 标准](http://www.w3.org/TR/html401/struct/links.html#edef-A) `Language`属性对锚标记无效。我知道它对`<script>`标签有效，但我没有看到任何关系。

有谁知道为什么设置`Language`属性会阻止触发`onclick`事件（我没有尝试过其他事件类型，但它们也可能受到影响）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:15:51.713

只有 IE 7/8 同步自定义属性和属性。

```
link.href; // 'http://www.example.com'
link.language; // undefined (except in IE 7/8) 
```

最好使用*getAttribute*：

```
link.getAttribute('href'); // 'http://www.example.com'
link.getAttribute('language'); // 'en' 
```

属性在 HTML 中不区分大小写，在 XML 文档（包括 XHTML）中区分大小写。

不要将*HTMLScriptElement上已弃用的**语言*属性与*HTMLElement上的**lang*属性混淆。

 ***PS 就像有人已经说过的，最好使用 HTML5 *data-* 属性*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:26:51.633

如果你想指定链接的语言，那么使用这个属性怎么样？

[http://www.w3.org/TR/html401/struct/links.html#adef-hreflang](http://www.w3.org/TR/html401/struct/links.html#adef-hreflang)***

# php - 用php显示时钟

> ID：10818536
> 
> 赞同：-7
> 
> 时间：2012-05-30T14:39:04.587
> 
> 标签：php, javascript, jquery, ajax

我想在我的网页上显示服务器时间。我用 javascript 代码完成了客户端时间，但我如何显示服务器时间？

是否有任何 zendFramework 类可以做到这一点？

我正在使用下面的 javascript 代码来显示客户端时间：

```
<head>
<script language="javascript" type="text/javascript">
function startTime()
{
        var today=new Date();

        var h=today.getHours();
        var m=today.getMinutes();
        var s=today.getSeconds();

        // add a zero in front of numbers<10
        m=checkTime(m);
        s=checkTime(s);

        document.getElementById("time_section").innerHTML=h+":"+m+":"+s;
        t=setTimeout('startTime()',500);

}

function checkTime(i)
{
        if (i<10)
         {
              i="0" + i;
         }
        return i;
}
</script>

</head>

<body onload="startTime()">
</body> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T14:41:17.990

要显示服务器时间，请使用 date 函数：

```
<?php echo date('Y-m-d H:i:s'); ?> 
```

如果你的意思是实时时钟，你不能用 php 做到这一点，坚持使用 javascript

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T14:54:15.833

修改您的代码，setTimeout 函数仅每分钟增加客户端的时钟，然后`today`使用 php 使用服务器时间初始化 javascript 变量，如下所示：

```
// time() returns seconds, multiply by 1000 to get millisenconds
var today = new Date(<?php echo time() * 1000?>); 
```

然后javascript时钟应该与客户端中的服务器时间保持一致

或者，您可以通过每隔一定时间（每小时）执行一次 ajax 请求来与服务器时间同步

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T14:43:45.697

通过 AJAX 向服务器询问时间，作为 UNIX 时间戳（PHP 函数`time()`）。到达时，获取与本地时间戳的差值（`var timeDiff = new Date() - serverTime * 1000`）；修改您不太相关的代码以显示`new Date() + timeDiff`而不是`new Date()`.

让我们尝试一些代码：

```
var timeDiff;
$.ajax('time.php', {      
  success: function(serverTime) {
    timeDiff = new Date() - serverTime * 1000;
    startTime();
  }
}); 
```

替换`newDate()`为`newDate() + timeDiff`您的`startTime`. 在服务器端，这很简单，在`time.php`：

```
header('Content-Type: text-json');
echo time(); 
```

没查，可能有bug。买者自负。

h3nr1x 的解决方案也可以，但这样您就不必担心会不同步。

一个小故障是客户端的时间计算都是在本地时区完成的；如果您在与服务器不同的时间跨过 DST 时间，这将影响您，同时显示的时间将不正确。我不知道如何设置 JavaScript`Date`对象的时区，或者是否可能。:(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T14:44:11.997

**设置服务器时区**

```
date_default_timezone_set('America/Los_Angeles'); 
```

**将显示 17:16:18**

```
$currentTime = date("H:i:s"); 
```

有关确认选项，请参见[date_default_timezone_set()](http://php.net/manual/en/function.date-default-timezone-set.php)和[date()](http://php.net/manual/en/function.date.php)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T14:58:05.633

您可以使用 AJAX 来实现。有一个 php 页面，它回显当前时间并每秒更新一次或使用 ajax 进行更新。

# python - 在 x 和 y 坐标的 numpy 数组中查找最近点的索引

> ID：10818546
> 
> 赞同：97
> 
> 时间：2012-05-30T14:39:27.893
> 
> 标签：python, algorithm, numpy

我有两个 2d numpy 数组： x_array 包含 x 方向的位置信息， y_array 包含 y 方向的位置。

然后，我有一长串 x,y 点。

对于列表中的每个点，我需要找到最接近该点的位置（在数组中指定）的数组索引。

基于这个问题，我天真地制作了一些有效的代码： [Find nearest value in numpy array](https://stackoverflow.com/questions/2566412/find-nearest-value-in-numpy-array)

IE

```
import time
import numpy

def find_index_of_nearest_xy(y_array, x_array, y_point, x_point):
    distance = (y_array-y_point)**2 + (x_array-x_point)**2
    idy,idx = numpy.where(distance==distance.min())
    return idy[0],idx[0]

def do_all(y_array, x_array, points):
    store = []
    for i in xrange(points.shape[1]):
        store.append(find_index_of_nearest_xy(y_array,x_array,points[0,i],points[1,i]))
    return store

# Create some dummy data
y_array = numpy.random.random(10000).reshape(100,100)
x_array = numpy.random.random(10000).reshape(100,100)

points = numpy.random.random(10000).reshape(2,5000)

# Time how long it takes to run
start = time.time()
results = do_all(y_array, x_array, points)
end = time.time()
print 'Completed in: ',end-start 
```

我正在对一个大型数据集执行此操作，并且真的很想加快速度。任何人都可以优化这个吗？

谢谢。

* * *

更新：解决方案遵循@silvado 和@justin 的建议（下）

```
# Shoe-horn existing data for entry into KDTree routines
combined_x_y_arrays = numpy.dstack([y_array.ravel(),x_array.ravel()])[0]
points_list = list(points.transpose())

def do_kdtree(combined_x_y_arrays,points):
    mytree = scipy.spatial.cKDTree(combined_x_y_arrays)
    dist, indexes = mytree.query(points)
    return indexes

start = time.time()
results2 = do_kdtree(combined_x_y_arrays,points_list)
end = time.time()
print 'Completed in: ',end-start 
```

上面的代码将我的代码（在 100x100 矩阵中搜索 5000 个点）加快了 100 倍。有趣的是，使用[scipy.spatial.KDTree](https://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.KDTree.html)（而不是[scipy.spatial.cKDTree](https://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.cKDTree.html)）为我的幼稚解决方案提供了相当的时间，所以绝对值得使用 cKDTree 版本......

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2015-09-25T11:59:48.923

这是一个`scipy.spatial.KDTree`例子

```
In [1]: from scipy import spatial

In [2]: import numpy as np

In [3]: A = np.random.random((10,2))*100

In [4]: A
Out[4]:
array([[ 68.83402637,  38.07632221],
       [ 76.84704074,  24.9395109 ],
       [ 16.26715795,  98.52763827],
       [ 70.99411985,  67.31740151],
       [ 71.72452181,  24.13516764],
       [ 17.22707611,  20.65425362],
       [ 43.85122458,  21.50624882],
       [ 76.71987125,  44.95031274],
       [ 63.77341073,  78.87417774],
       [  8.45828909,  30.18426696]])

In [5]: pt = [6, 30]  # <-- the point to find

In [6]: A[spatial.KDTree(A).query(pt)[1]] # <-- the nearest point 
Out[6]: array([  8.45828909,  30.18426696])

#how it works!
In [7]: distance,index = spatial.KDTree(A).query(pt)

In [8]: distance # <-- The distances to the nearest neighbors
Out[8]: 2.4651855048258393

In [9]: index # <-- The locations of the neighbors
Out[9]: 9

#then 
In [10]: A[index]
Out[10]: array([  8.45828909,  30.18426696]) 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-05-30T15:03:48.890

`scipy.spatial`还有一个 kd 树实现：[`scipy.spatial.KDTree`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.KDTree.html#scipy.spatial.KDTree).

做法一般是先用点数据建立kd树。其计算复杂度约为 N log N，其中 N 是数据点的数量。然后可以使用 log N 复杂度来完成范围查询和最近邻搜索。这比简单地循环遍历所有点（复杂度 N）要有效得多。

因此，如果您有重复的范围或最近邻查询，强烈建议使用 kd 树。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-30T14:51:48.320

如果您可以将数据转换为正确的格式，那么一种快速的方法是使用以下方法`scipy.spatial.distance`：

[http://docs.scipy.org/doc/scipy/reference/spatial.distance.html](http://docs.scipy.org/doc/scipy/reference/spatial.distance.html)

特别是`pdist`提供`cdist`计算成对距离的快速方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-19T12:04:35.120

搜索方法有两个阶段：

1.  `npt`从数据点（您的`x y`）构建搜索结构，例如 KDTree
2.  查找`nq`查询点。

不同的方法有不同的构建时间和不同的查询时间。您的选择在很大程度上取决于：[scipy cdist](https://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.cdist.html)`npt`的 构建时间为 0，但查询时间为 ~ 。[KDTree](https://en.wikipedia.org/wiki/K-d_tree#Complexity)构建时间很复杂，查找速度*非常*快，~ 。`nq`
`npt * nq`
*`ln npt * nq`*

 *在常规（曼哈顿）网格上，您可以做得更好：请参阅 (ahem) [find-nearest-value-in-numpy-array](https://stackoverflow.com/questions/2566412/find-nearest-value-in-numpy-array/69479668#69479668)。

一个小 [测试](https://stackoverflow.com/questions/58758480/xarray-select-nearest-lat-lon-with-multi-dimension-coordinates/69195135#69195135)台: : 构建一个 5000 × 5000 2d 点的 KDTree 大约需要 30 秒，然后查询需要微秒； [在我的旧 iMac 上， scipy cdist](https://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.cdist.html) 2500 万×20 点（所有对，4G）大约需要 5 秒。*

# c++ - 在构造函数的右括号处无法访问代码

> ID：10818551
> 
> 赞同：7
> 
> 时间：2012-05-30T14:39:43.717
> 
> 标签：c++, visual-c++, constructor, visual-c++-2008, unreachable-code

我正在开发一个使用 VC9 构建的应用程序，但我遇到了一个我不完全理解的警告：**为什么在构造函数的右括号上有一个“无法访问的代码”警告？**

重现该问题的最小测试用例是：

```
__declspec(noreturn) void foo() {
  // Do something, then terminate the program
}
struct A {
  A() {
    foo();
  } // d:\foo.cpp(7) : warning C4702: unreachable code
};
int main() {
  A a;
} 
```

这必须用 /W4 编译以触发警告。或者，您可以使用 /we4702 进行编译，以在检测到此警告时强制出错。

```
d:\>cl /c /W4 foo.cpp
Microsoft (R) C/C++ Optimizing Compiler Version 15.00.21022.08 for x64
Copyright (C) Microsoft Corporation.  All rights reserved.

foo.cpp
d:\foo.cpp(7) : warning C4702: unreachable code 
```

**有人可以准确地解释一下这里无法到达的地方吗？** 我最好的理论是它是析构函数，但我想要一个明确的答案。

**如果我想让这段代码警告干净，我该如何实现呢？** 我能想到的最好的方法是将其转换为编译时错误。

```
struct A {
private:
  A(); // No, you can't construct this!
};
int main() {
  A a;
} 
```

* * *

**编辑：**为澄清起见，使用 noreturn 函数终止程序通常不会在包含该函数调用的右大括号上导致无法访问的代码警告。

```
__declspec(noreturn) void foo() {
  // Do something, then terminate the program
}
struct A {
  A() {
  }
  ~A() {
    foo();
  }
};
int main() {
  A a;
} 
```

结果是：

```
d:\>cl /c /W4 foo3.cpp
Microsoft (R) C/C++ Optimizing Compiler Version 15.00.21022.08 for x64
Copyright (C) Microsoft Corporation.  All rights reserved.

foo3.cpp 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:25:40.967

Gorpik 走在正确的轨道上。我已经创建了两个类似的测试用例，编译它们并反汇编它们，我想我已经理解了根本原因：构造函数总是隐式地生成一个 return 语句，并且由于 noreturn 函数，这个 return 语句是不可访问的。

**noreturn_constructor.cpp**

```
__declspec(noreturn) void foo() {
  // Do something, then terminate the program
}
struct A {
  A() {
    foo();
  }
  ~A() {
  }
};
int main() {
  A a;
} 
```

**noreturn_destructor.cpp**

```
__declspec(noreturn) void foo() {
  // Do something, then terminate the program
}
struct A {
  A() {
  }
  ~A() {
    foo();
  }
};
int main() {
  A a;
} 
```

**差异 -u *.disasm**

```
--- noreturn_constructor.disasm 2012-05-30 11:15:02.000000000 -0400
+++ noreturn_destructor.disasm  2012-05-30 11:15:08.000000000 -0400
@@ -2,7 +2,7 @@
 Copyright (C) Microsoft Corporation.  All rights reserved.

-Dump of file noreturn_constructor.obj
+Dump of file noreturn_destructor.obj

 File Type: COFF OBJECT

@@ -35,15 +35,15 @@

 ??0A@@QEAA@XZ (public: __cdecl A::A(void)):
   0000000000000000: 48 89 4C 24 08     mov         qword ptr [rsp+8],rcx
-  0000000000000005: 48 83 EC 28        sub         rsp,28h
-  0000000000000009: E8 00 00 00 00     call        ?foo@@YAXXZ
-  000000000000000E: 48 8B 44 24 30     mov         rax,qword ptr [rsp+30h]
-  0000000000000013: 48 83 C4 28        add         rsp,28h
-  0000000000000017: C3                 ret
+  0000000000000005: 48 8B 44 24 08     mov         rax,qword ptr [rsp+8]
+  000000000000000A: C3                 ret

 ??1A@@QEAA@XZ (public: __cdecl A::~A(void)):
   0000000000000000: 48 89 4C 24 08     mov         qword ptr [rsp+8],rcx
-  0000000000000005: C3                 ret
+  0000000000000005: 48 83 EC 28        sub         rsp,28h
+  0000000000000009: E8 00 00 00 00     call        ?foo@@YAXXZ
+  000000000000000E: 48 83 C4 28        add         rsp,28h
+  0000000000000012: C3                 ret

   Summary 
```

无法访问的代码是这个隐式返回语句，它是在构造函数中生成而不是在析构函数中生成的：

```
-  000000000000000E: 48 8B 44 24 30     mov         rax,qword ptr [rsp+30h]
+  0000000000000005: 48 8B 44 24 08     mov         rax,qword ptr [rsp+8] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T14:54:59.423

在 的末尾没有要调用的析构函数`A::A()`，所以这不是问题。无法达到的是对象的实际构造，它发生在构造函数完成执行之后。由于它永远无法完成，因此编译器生成的代码是无法访问的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T14:45:26.643

foo 上的 declspec(noreturn) 正在产生此警告。你告诉编译器这个函数不会返回。所以编译器会发出一个警告，你的构造函数永远不会完成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T14:45:46.160

见[http://msdn.microsoft.com/en-us/library/k6ktzx3s(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/k6ktzx3s(v=vs.80).aspx)

“这个 __declspec 属性告诉编译器一个函数没有返回。因此，编译器知道调用 __declspec(noreturn) 函数之后的代码是不可访问的。”

右大括号可能会生成无法到达的代码（如调用析构函数）。

# android - TextView 中的长文本

> ID：10818557
> 
> 赞同：0
> 
> 时间：2012-05-30T14:40:10.240
> 
> 标签：android, textview

我想在 TextView 中显示长文本。这是我的 XML：

```
<TableLayout
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="1" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:padding="5dip"
            android:text="@string/text" />

        <TextView
            android:id="@+id/gender"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="right"
            android:text="@string/lorem" />
    </TableRow>
</TableLayout> 
```

这就是它的样子：
![在此处输入图像描述](../Images/7d92d8ca50c69528e3889e279aa725c5.png)
长文本不合适。我必须改变什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:49:45.173

```
<TableLayout
        android:layout_width="fill_parent"
        android:layout_height="100dip"
        android:layout_weight="1" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="0.5"
                android:padding="5dip"
                android:text="@string/text" />

            <TextView
                android:id="@+id/gender"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="0.5"
                android:gravity="right"
                android:text="@string/lorem" />
        </TableRow>
    </TableLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:50:46.850

取决于您想要实现的样式：如果可以拥有多行，您可以在 xml 中添加

```
android:singleLine="false" 
```

或者

```
android:lines="2" 
```

如果没有，你可以允许水平滚动它

```
 android:scrollHorizontally="true" 
```

# perl - MongoDB 和 Perl：维护插入顺序

> ID：10818558
> 
> 赞同：0
> 
> 时间：2012-05-30T14:40:18.400
> 
> 标签：perl, mongodb

我一直在玩 Perl MongoDB 库，并且很难弄清楚如何做一些非常简单的事情。

如何在插入时维护数据字段的顺序？我的代码如下：

```
use MongoDB;
use MongoDB::Database;
use MongoDB::OID;

my $conn = MongoDB::Connection->new;
my $db = $conn->test;
my $users = $db->testlogwiki;

$users->insert
(
   {
     "product" => "WooHoo",
     "errcode" => "WM2001_89873",
     "solution1" => "Hit the computer.",
     "line_text" => "Inserted in Perl too"
   }
); 
```

当我返回并在我的 MongoDB 中查找记录的插入方式时，它看起来像这样：

db.testlogwiki.find([找到它的标准]).pretty();

```
"_id" : ObjectId("4fc62c2900ece6040c000000"),
"solution1" : "Hit the computer.",
"product" : "WooHoo",
"errcode" : "WM2001_89873",
"line_text" : "Inserted in Perl too" 
```

这不是我想要的顺序......我如何使它成为我想要的顺序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T15:23:00.733

Perl 和 Mongo 的 BSON 散列在定义上都是无序的。如果您需要以某种方式订购属性，您必须自己跟踪它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:15:56.410

MongoDB 不一定与此有关 - Perl 哈希首先不会保留顺序：

```
$ perl -MData::Dumper -E 'my $foo = { one => 1, two => 2, three => 3 }; print Dumper($foo);'
$VAR1 = {
          'three' => 3,
          'one' => 1,
          'two' => 2
        }; 
```

您可以使用[Tie::IxHash](https://metacpan.org/module/Tie%3a%3aIxHash)来创建将保留它们在内存中的顺序的哈希，但我不能说它是否也会使它们在插入 MongoDB 和从 MongoDB 中检索时保持它们的顺序。

# iphone - 错误：此端点已被弃用

> ID：10818568
> 
> 赞同：6
> 
> 时间：2012-05-30T14:40:51.077
> 
> 标签：iphone, facebook, sdk, oauth

我的应用程序不再允许人们从它发布到 facebook，当我尝试时它会抛出这个错误 -

“错误：此端点已被弃用。要暂时启用它，您可以禁用“2012 年 8 月”平台迁移。它将在 2012 年 8 月 1 日永久禁用。”

我阅读了其他一些有相同问题的人的帖子，并尝试通过禁用 2012 年 8 月的重大更改来修复它。虽然它已经被禁用，但我无法找到任何其他方法来解决这个问题。

知道如何解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:07:52.090

当 Facebook 对其 API 进行更改时，他们会[提供 90 天的迁移期](http://developers.facebook.com/roadmap/change-policy/)供开发人员[迁移](http://developers.facebook.com/roadmap/migrations/)。

但是，如果您在那段宽限期之后还没有迁移，那您就完蛋了。

这些是[2012 年 8 月以来的重大变化](http://developers.facebook.com/roadmap/completed-changes/)：

> **禁用 FB.Canvas.setAutoResize** - 原定于 2011 年 1 月 1 日我们已将 FB.Canvas.setAutoResize 重命名为 FB.Canvas.setAutoGrow，以便该方法更准确地表示其功能。FB.Canvas.setAutoResize 将于 8 月 1 日停止工作。我们将在 9 月 5 日彻底删除该功能。
> 
> **来自 Graph API/FQL 的页面帖子 GET 将需要访问令牌**
> 从 Graph API 或 FQL 对 GET 页面帖子的所有调用现在都需要使用访问令牌。
> 
> **删除 prompt_permissions.php 和 prompt_feed.php** 我们将删除一个非常旧版本的提要对话框 (/connect/prompt_feed.php) 以及一个非常旧版本的身份验证对话框 (/connect/prompt_permissions(s).php) . 如果您是少数仍在使用这些旧端点的开发人员之一，您应该升级到当前的 Feed Dialog 和/或 OAuth Dialog。
> 
> **删除添加到时间线插件**
> 我们将删除添加到时间线插件。如果您要嵌入 Add to Timeline 插件，我们将在其位置呈现登录按钮，并自动将 publish_actions 权限添加到 scope 参数。

我不知道哪个更改破坏了您的应用程序（尽管我猜它正在**删除 prompt_permissions.php 和 prompt_feed.php**），但您应该确保更新到任何 Facebook 框架的最新版本（即[更新 ShareKit](http://getsharekit.com/install/#download)）你'重新使用和/或确保尽快使用新的 Facebook API。

为避免将来出现类似问题，请务必查看[路线图](http://developers.facebook.com/roadmap/)，甚至更好地关注[开发者博客](http://developers.facebook.com/blog/)。

# excel - 如何让我的公式计算数据列表中的唯一值？

> ID：10818573
> 
> 赞同：2
> 
> 时间：2012-05-30T14:41:10.470
> 
> 标签：excel, excel-formula

我目前正在维护一份公司休假员工的数据列表。由于员工每个月可以休多个休假，因此在休假记录列表中存在重复姓名的情况。

每个员工还拥有自己的等级，例如新兵、私人、下士。这也会在整个数据列表中重复。

该表类似于：

```
 A       B
1 NAME    RANK 
2 AAA     Recruit
3 BBB     Private
4 CCC     Corporal
5 AAA     Recruit
6 CCC     Corporal
7 DDD     Recruit
8 FFF     Recruit 
```

如何计算数据列表中具有“Recruit”级别的员工的唯一数量？

我了解您可以通过以下公式计算 UNIQUE 员工的数量

```
=SUM(IF(FREQUENCY(MATCH(A2:A8,A2:A8,0),MATCH(A2:A8,A2:A8,0))>0,1)) 
```

在上述情况下，我计算的唯一员工级别“招聘”数量的预期结果应该是三，因为有 3 名员工级别为“招聘”的唯一人员

任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:00:01.180

尝试在您的公式中为 RANK 添加一个额外的条件，类似于：

```
=SUM(IF(FREQUENCY(IF(B2:B8=D2,MATCH(A2:A8,A2:A8,0)),MATCH(A2:A8,A2:A8,0))>0,1)) 
```

这里数据范围是A2:B8，D2="Recruit"，公式在E2中用CTRL+SHIFT+ENTER输入。

# iphone - 数组（c 风格）单元格内容在发布变量内容时丢失其值

> ID：10818576
> 
> 赞同：0
> 
> 时间：2012-05-30T14:41:16.947
> 
> 标签：iphone, objective-c, xcode

在 .h 文件中：

```
double var1;
NSString *Items[90]; 
```

在 .m 文件中：

```
var1 = 1000;
NSString  *j = [NSString stringWithFormat:@"%g", var1 ];
Items[42] = [@" Per each " stringByAppendingString: j ]; 
```

请参阅上面的代码，问题是通过运行的应用程序我有一个需要此 Items[42] 值的过程，但是该值不再存在（我没有删除它）但单元格完全为空，没有 null 或空格，就像释放了单元格值一样。

另一方面，如果我只是在 Items[42] 中放置一些没有附加变量的字符串（如 var1）（即 Items[42] = @"hello there"; ），那么一切正常，并且 Items[42] 的值为被保存。

知道为什么单元格在呈现可变内容（如 var1 ）时会丢失内容吗？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:44:59.037

您需要更加小心`NSString`对象的生命周期。这些`[NSString stringWithBlah]`方法返回`autorelease`d 个实例（所以指针会晃动——我很惊讶你没有崩溃）。

您需要改为使用`[[NSString alloc] initWithBlah]`（或任何地方）`release`中的实例。`dealloc`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:49:00.807

临时字符串的引用计数器为零。随时都会被摧毁。有三个选项可以解决这个问题：

1.  `Items[42] = [[@" Per each " stringByAppendingString: var1 ] retain];`
    在非 ARC 环境中，记得`[Items[42] release]`稍后再调用。
2.  将项目声明为`NSMutableArray*`或`NSArray*`，即`NSMutableArray*` 项目。它将自动管理其对象的引用计数
3.  转换程序以使用 ARC

For global (static) constant strings, they have an infinite reference counter, and would never be destroyed.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:46:08.250

你的意思是（最后一行）

```
Items[42] = [@" Per each " stringByAppendingString: j ]; 
```

代替：

```
Items[42] = [@" Per each " stringByAppendingString: var1 ]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T14:46:08.267

你试过这个吗？

```
 Items[42] = [@" Per each " stringByAppendingString: j ]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T14:48:06.627

不要在头文件中声明裸变量。你会得到意想不到的结果。

在.h中：

```
extern double var1;
extern NSString *Items[90]; 
```

以 .m 为单位：

```
double var1;
NSString *Items[90]; 
```

# vb.net - VB.NET - 是否可以从文本文件打开/运行 webrequest？

> ID：10818579
> 
> 赞同：0
> 
> 时间：2012-05-30T14:41:28.610
> 
> 标签：vb.net, httpwebrequest

我有大约 50 个 Web 请求保存在我桌面上的 .txt 文件中。是否可以在我的程序编译后从文件夹中打开并运行每个 Web 请求，还是必须事先编译它们？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:43:18.553

是的，有可能。创建一个读取文件并打开 URL 的 EXE。将此添加为后期构建步骤。

# performance - postgresql 获取 100 个随机行

> ID：10818586
> 
> 赞同：2
> 
> 时间：2012-05-30T14:41:39.610
> 
> 标签：performance, random, postgresql-9.1

以下查询在 postgresql 9.1 上大约需要 300-400 毫秒。该表包含约 2M 行。这种表现是否合理？可以改进吗？

```
SELECT "Products"."Id"
      , "Products"."Title"
      , "Products"."ThumbHeight"
      , "Products"."LargeImageWidth"
      , "Products"."LargeImageHeight"
      , "Products"."Url"
      , "Products"."BrowseNodeId"
FROM "Products"
WHERE  "Products"."Id" = ANY(ARRAY(SELECT (random()*2233071)::int
                FROM generate_series(1, 100))); 
```

这是解释计划：

```
--------------------------------------------------------------------------------
 Bitmap Heap Scan on "Products"  (cost=60.48..100.46 rows=10 width=268)
   Recheck Cond: ("Id" = ANY ($0))
   InitPlan 1 (returns $0)
     ->  Function Scan on generate_series  (cost=0.00..17.50 rows=1000 width=0)
   ->  Bitmap Index Scan on "Products_pkey"  (cost=0.00..42.97 rows=10 width=0)
     Index Cond: ("Id" = ANY ($0)) 
```

解释分析：

```
Bitmap Heap Scan on "Products"  (cost=60.48..100.46 rows=10 width=268) (actual time=77.702..80.944 rows=100 loops=1)
   Recheck Cond: ("Id" = ANY ($0))
   InitPlan 1 (returns $0)
     ->  Function Scan on generate_series  (cost=0.00..17.50 rows=1000 width=0) (actual time=0.097..0.348 rows=100 loops=1)
   ->  Bitmap Index Scan on "Products_pkey"  (cost=0.00..42.97 rows=10 width=0) (actual time=77.601..77.601 rows=104 loops=1)
         Index Cond: ("Id" = ANY ($0))
 Total runtime: 81.409 ms 
```

id 是主键： `"Products_pkey" PRIMARY KEY, btree ("Id")`

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:48:28.303

与您的查询相比，试试这个：

```
SELECT "Products"."Id"
      , "Products"."Title"
      , "Products"."ThumbHeight"
      , "Products"."LargeImageWidth"
      , "Products"."LargeImageHeight"
      , "Products"."Url"
      , "Products"."BrowseNodeId"
FROM "Products"
ORDER BY random()
LIMIT 100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:15:52.400

这是一个适用于我的用例的解决方案（为网页选择 100 个随机产品）：

1.  复制表格
2.  随机播放表格行
3.  添加自动增量列
4.  从随机范围中选择（例如 100-200、1567000-1567100）

查询时间下降到**2ms**以下。

这是我使用的一组命令：

```
create table RandProducts as select * from "Products" order by random();
alter table RandProducts add column RandId serial8;
create index on RandProducts(randid); 
```

然后为了获得 100 个随机行，我只需执行以下操作：

```
select * from Products where RandId between 8000 and 8100; 
```

# vim - VIM：如何在 ex 模式下在当前行的引号中提取文本？

> ID：10818588
> 
> 赞同：3
> 
> 时间：2012-05-30T14:41:44.250
> 
> 标签：vim

假设光标位于第 10 行：

> foo 酒吧“嘶嘶”的嗡嗡声

第一个字符。

我怎样才能`fizz`使用 ex 模式来拉动（做同样的`f"yi"`事情）？

能够指定注册的奖励积分。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T15:04:06.687

您可以通过执行任何正常模式命令`:normal`（添加`!`以忽略任何映射；编写插件时的一个好习惯）。

```
:normal! f"yi" 
```

对于特殊键，将命令括在 中`:execute`，如下所示：

```
:execute "normal! aText\<Esc>" 
```

# html - Ember.js 身份验证、推送状态和路由

> ID：10818589
> 
> 赞同：3
> 
> 时间：2012-05-30T14:41:45.677
> 
> 标签：html, ember.js

我想知道是否有人对 Ember.js 以及路由和 pushstate 有任何想法。

用于身份验证的典型 Ember 示例是：

```
aStateManager = Em.StateManager.create({
    initialState: 'unauthenticated',
    authenticated: Em.State.create({}),
    unauthenticated: Em.State.create({
      authenticate: function(stateManager, context){
        stateManager.goToState('authenticated')
      }
    })
  })

  aStateManager.send('authenticate') 
```

如果始终将用户发送到根 url，这将起作用。但是，如果用户在地址栏中键入 url，例如“/api/resource/1”，有没有办法判断用户是否在每个状态下都经过身份验证？

我想我正在寻找的是像 before_filter 这样的导轨。

有没有人为这种常见情况提出解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:17:23.847

对于任何类型的身份验证，我们将面临的问题是用户可以完全访问所有模型，并且可以更改其中的数据并赋予自己以前没有的权限。每次联系服务器都会很痛苦。

我能想到的一种解决方案是使用 freezable mixin 和对象的 isDirty 标志。我们可以将用户的权限作为 DS 模型（如果我们使用 ember 数据），然后将其定义为冻结。现在我们创建一个权限检查 mixin 来检查模型是否脏（即它已被更改）。并且还要尊重所有其他代码部分的冻结状态。

当然，我还没有想到其他各种用例，但这应该是一个有价值的起点。

# php - .htaccess 给我一些目录的麻烦

> ID：10818593
> 
> 赞同：1
> 
> 时间：2012-05-30T14:42:00.927
> 
> 标签：php, redirect

我有这个网站：[http](http://www.rolfgerard.com) : //www.rolfgerard.com 和这个 htaccess：

```
RewriteEngine On
Options +FollowSymlinks
RewriteBase /
RewriteRule ^it/mostre.html exhibition.php [L]
RewriteRule ^it/rolf_gerard.html rolf_gerard.php [L]
RewriteRule ^it index.php [L]
RewriteRule ^de/ausstellungen.html de/exhibition.php [L]
RewriteRule ^de/rolf_gerard.html de/rolf_gerard.php [L]
RewriteRule ^de de/index.php [L] 
```

当我进入网站的“IT”部分时，一切正常，当我进入“DE”部分时，我的 htaccess 不会将我重定向到正确的文件中，但它仍然是 index.php 文件。

我该如何解决？:(

完整的 .htaccess 文件：

```
RewriteEngine On
Options +FollowSymlinks
RewriteBase /

#RewriteRule ^([^/]+).html $1.php
#RewriteRule ^([^/]+)/([^/]+).html $2.php?lang=$1

# ITALIANO
RewriteRule ^it/thanks.html thanks.php [L]
RewriteRule ^it/credits.html credits.php [L]
RewriteRule ^it/privacy_policy.html privacy_policy.php [L]
RewriteRule ^it/link_media.html link_media.php [L]
RewriteRule ^it/visitaci.html contact.php [L]
RewriteRule ^it/contatto.html contact.php [L]
RewriteRule ^it/chi_siamo.html about.php [L]
RewriteRule ^it/pubblicazioni.html books.php [L]
RewriteRule ^it/opere.html works.php [L]
RewriteRule ^it/mostre.html exhibition.php [L]
RewriteRule ^it/rolf_gerard.html rolf_gerard.php [L]
RewriteRule ^it index.php [L]

# DEUTSCH
RewriteRule ^de/thanks.html de/thanks.php [L]
RewriteRule ^de/credits.html de/credits.php [L]
RewriteRule ^de/privacy_policy.html de/privacy_policy.php [L]
RewriteRule ^de/link_media.html de/link_media.php [L]
RewriteRule ^de/besuchen.html de/contact.php [L]
RewriteRule ^de/kontakt.html de/contact.php [L]
RewriteRule ^de/uber_uns.html de/about.php [L]
RewriteRule ^de/publikationen.html de/books.php [L]
RewriteRule ^de/works.html de/works.php [L]
RewriteRule ^de/ausstellungen.html /de/exhibition.php [L]
RewriteRule ^de/rolf_gerard.html de/rolf_gerard.php [L]
RewriteRule ^de de/index.php [L]

# ENGLISH
RewriteRule ^en/thanks.html en/thanks.php [L]
RewriteRule ^en/credits.html en/credits.php [L]
RewriteRule ^en/privacy_policy.html en/privacy_policy.php [L]
RewriteRule ^en/link_media.html en/link_media.php [L]
RewriteRule ^en/visit_us.html en/contact.php [L]
RewriteRule ^en/contact.html en/contact.php [L]
RewriteRule ^en/about_us.html en/about.php [L]
RewriteRule ^en/books.html en/books.php [L]
RewriteRule ^en/works.html en/works.php [L]
RewriteRule ^en/exhibitions.html en/exhibition.php [L]
RewriteRule ^en/rolf_gerard.html en/rolf_gerard.php [L]
RewriteRule ^en en/index.php [L]

# ONLINE SHOP
RewriteRule ^online_shop/index_de.html online_shop/index_de.php [L]
RewriteRule ^online_shop/index_en.html online_shop/index_en.php [L]

# PRESS
RewriteRule ^press/index_de.html press/index_de.php [L]
RewriteRule ^press/index_en.html press/index_en.php [L]
enter code here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:45:30.527

在 de 规则的开头添加“/”

```
RewriteRule ^de/ausstellungen.html /de/exhibition.php [L]
RewriteRule ^de/rolf_gerard.html /de/rolf_gerard.php [L]
RewriteRule ^de$ /de/index.php [L]

...
RewriteRule ^en$ en/index.php [L]
RewriteRule ^it$ index.php [L] 
```

# java - jackson 序列化器：获取序列化对象

> ID：10818598
> 
> 赞同：0
> 
> 时间：2012-05-30T14:42:13.763
> 
> 标签：java, json, jackson, jsonserializer

我的序列化程序有问题，这是我的问题：

我有一个这样的 bean 类：

```
@JsonSerialize(using = MyObjectSerializer.class)
public class MyObject {
    public int a;
    public boolean b;
} 
```

当通过杰克逊进行序列化时，没有 @JsonSerialize 注释，我显然得到：

```
{ "a": 42, "b": true} 
```

但我需要添加一个属性，以便它给出：

```
{ "a": 42, "b": true, "version": "0.1-beta" } 
```

*（这是一个例子，在现实世界中，我添加的属性取决于对象的几个属性）*

所以我需要编写一个自定义序列化程序。但是，在我的真实代码中，该类包含的属性远不止 2 个。所以我不想手动为 json 对象创建这些属性......

如果我使用这个：

```
public static class MyObjectSerializer extends JsonSerializer<MyObject> {
    @Override public void serialize(MyObject obj, JsonGenerator json, SerializerProvider provider) throws IOException, JsonProcessingException {
        json.writeObject(obj);
    }
} 
```

我显然得到了 StackOverflowError。

所以问题可以是：

*   **如何从 JsonSerializer 内部序列化对象而不重新调用序列化程序本身？**

或者

*   **如何动态地将属性添加到正在序列化的对象。**

我过去一直使用 GSon 来做这件事，但杰克逊提供了很多我喜欢使用的功能；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:17:45.960

我很确定，在您的示例`getVersion()`中，没有支持属性的 getter 就足够了，您将在其中生成`0.1-beta`. （或根据您描述的几个属性的值生成值）。

因此，无需为此目的而使用自定义序列化程序

# owl - 是否有任何库可以轻松更改和更新 OWL 文件？

> ID：10818602
> 
> 赞同：0
> 
> 时间：2012-05-30T14:42:19.990
> 
> 标签：owl

我是OWL的初学者。是否有任何库可以轻松更改和更新 OWL 文件？图书馆使用哪种语言？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:00:06.037

[OWL API](http://owlapi.sourceforge.net/)怎么样？它是一个 Java 库。

[Apache Jena](http://jena.apache.org/)是一个用于执行各种语义 Web 内容的 Java 框架，它不仅可以做 OWL，而且还可以做 OWL。

# objective-c - Facebook不尊重AVMutableCompositionTrack上的preferredTransform标志

> ID：10818604
> 
> 赞同：0
> 
> 时间：2012-05-30T14:42:28.877
> 
> 标签：objective-c, facebook, rotation, cgaffinetransform, avmutablecomposition

我有一个 AVMutableComposition 轨道，我正在旋转 180 度，如下所示：

```
if (shouldRotate) {

    //Code to rotate original main video 180 degrees if required.
    CGAffineTransform transform = CGAffineTransformMakeRotation(M_PI);
    a_compositionVideoTrack.preferredTransform = transform;

} 
```

这很好用，当我查看视频或上传到 YouTube 时，它​​会正确旋转。但是，当我将视频上传到 Facebook 时，视频是颠倒的——Facebook 似乎并不关心/阅读 preferredTransform 标志。

谁能建议我如何解决这个问题？只是为了获得更多信息，我正在使用适用于 iOS 的 Facebook SDK 来上传视频。

先感谢您 ！

编辑实际上，这似乎是 Facebook 或 Facebook sdk 上的一个错误。如果我旋转 90 度，它就可以工作。如果有人可以阐明任何问题，请这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T13:28:50.830

这似乎是一个错误 - 唯一的解决方案是在 Facebook 本身上传后旋转视频。

# c# - asp.NET jqueryUI 自动完成

> ID：10818606
> 
> 赞同：1
> 
> 时间：2012-05-30T14:42:39.973
> 
> 标签：c#, jquery, asp.net, .net, jquery-ui

就像标题中描述的那样，我在让 jqueryUI 自动完成小部件工作时遇到了一点问题。

这听起来很傻，但它`m hanging the whole day getting that thing solved, but i didn`。我已经开发了几年 C#，现在尝试从一个月左右的时间开始使用 asp 和 jquery 进行开发。只是为了展示，我搜索了网络，尤其是 stackoverflow，并尝试了很多让它运行。

好的，这是代码。

**定义文本框：**

```
 <asp:TextBox ID="txtSearchbox"
                    style="float:left;padding:5px 1px 5px 1px;" runat="server" >
 </asp:TextBox> 
```

**自动完成 Jquery 脚本部分：**

```
<script type="text/javascript">

    $(document).ready(function () {
        $('#txtSearchbox').autocomplete( {
         source: function (request, response) {
                    //console.log(request.term);
             $.ajax
             ({
                 url: "AutoComplete.asmx/GetSearchInfo",
                 data: "{ 'prefixText': '" + request.term + "' }",
                 dataType: "json",
                 type: "POST",
                 contentType: "application/json; charset=utf-8",
                 dataFilter: function (data) {
                     //console.log(data.toString());
                     //alert(data.toString());
                     return data;
                 },
                 success: function (data) {
                     // console.log(data.d.toString());
                     response($.map(data.d, function (item) {
                         // console.log(item.Isin)
                         // console.log(item.Name)
                         return
                         {
                             label: item.Name.toString()
                             value: item.Name.toString()
                         }
                     }));
                },
                 error: function (XMLHttpRequest, textStatus, errorThrown) {
                     alert(textStatus);
                 }
             });
         },
         minLength: 2
         });
    });

</script> 
```

**AutoComplet.asmx：**

```
[WebMethod]
public List<SearchObject> GetSearchInfo(string prefixText) 
{
    var seo = new SearchObject();
    var getSeo = staticList.getSEOlist().Where(str => str.SearchString.ToLower().Contains(prefixText.ToLower()));

    return getSeo.ToList();
} 
```

**为了完整起见，CSS：**

```
 /*AutoComplete flyout */
.autocomplete_completionListElement
{
    margin:0px!important;
    background-color:#ffffff;
    color:windowtext;
    border:buttonshadow;
    border-width:1px;
    border-style:solid;
    cursor:'default';
    overflow:auto;
    height:200px;
    font-family:Tahoma;
    font-size:small;
    text-align:left;
    list-style-type:none;
    padding: 5px 5px 5px 5px;
    }

/* AutoComplete highlighted item */
.autocomplete_highlightedListItem
{
    background-color:#ffff99 ;
    color:black;
    padding:0px;
    }

    /* AutoComplete item */
.autocomplete_listItem
{
    background-color:window;
    color:windowtext;
    padding:0px;
   } 
```

如果您需要更多，请告诉我。

调试行已被注释掉。

如果我检查 jquery 部分，我会得到我想要的数据，但它不会显示在 txtsearch 中。而且我真的不明白 AutoComplete jquerUI 方法将如何显示该列表，但编码应该是正确的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T02:15:06.860

实际上，您可能会成为一个非常讨厌的 JavaScript 功能的受害者，该功能称为自动分号插入。您的成功回调/jQuery map 函数中的 return 语句写错了。

```
return
{
    label: item.Name.toString()
    value: item.Name.toString()
} 
```

这应该是正确的语法：

```
return {
    label: item.Name.toString()
    value: item.Name.toString()
} 
```

JavaScript 编译器在第一种情况下的 return 语句后面添加了一个自动分号，导致它不返回任何内容/未定义。

[这个 SO question](https://stackoverflow.com/questions/2846283/what-are-the-rules-for-javascripts-automatic-semicolon-insertion)很好地概述了这种行为的规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:05:23.350

我在 .net 4 上使用 asp.net、c# 运行自动完成功能。我就是这样做的。

// 对于 .aspx 页面，

```
 <asp:ScriptManager ID="ScriptManager1" runat="server">
    <Services>
        <asp:ServiceReference Path="/PathToServiceHere/AutoComplete.svc" />            
    </Services>
</asp:ScriptManager> 
```

// 文本框，我在这里不使用服务器端文本框，但我认为这不是 JQuery 的问题

```
 <input id="ModelBox" type="text" style="width: 158px;" /> 
```

// jQuery

```
 $(function () {
            $("#ModelBox").autocomplete({
                minLength: 0,
                delay: 0,
                cache: true,
                source: function (req, addToList) {

                    var popList = new GetAutoCompleteService.GetAutoComplete();
                    popList.GetModels(req.term, function (model) {

                        var listItems = [];
                        if (model.length > 0) {
                            for (var key = 0; key < model.length; key++) {
                                listItems.push(model[key].Model);
                            }
                        } else {
                            listItems.push("No Matching Model.");
                        }
                        addToList(listItems);
                    }, function onError() {
                    });
                }
            });

            $("#ModelBox").click(function () {
                // close if already visible
                if ($("#ModelBox").autocomplete("widget").is(":visible")) {
                    $("#ModelBox").autocomplete("close");
                    return;
                }

                // work around a bug (likely same cause as #5265)
                $(this).blur();

                // pass empty string as value to search for, displaying all results
                $("#ModelBox").autocomplete("search", "");
                $("#ModelBox").focus();
            });
        }); 
```

// 自动完成.svc

```
 namespace autocomplete.Service
    {
        using System.Collections.Generic;
        using System.Linq;

        using System.ServiceModel;
        using System.ServiceModel.Activation;

        using System.Data;

        [ServiceContract(Namespace = "GetAutoCompleteService")]
        [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
        public class GetAutoComplete
        {

            [OperationContract]
            public List<Models> GetModels(string model)
            {

               // Data access here to retrieve data for autocomplete box then convert to list

    // or however you get the data into list format
                List<Models> List = dataJustPulled.ToList(); 
                return List;
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T07:04:35.587

**问题解决了。**

它工作，在 Miroslav Popovic 的帮助下，我得到了工作，这是真正无用的 JavaScript 功能“自动分号插入”。

稍微改变一下代码结构，一切正常。

这是更正的部分：

```
return{
       label: item.Name.toString(),
       value: item.Name.toString()
} 
```

THX - 对所有帮助过的人

# java - 如何在 SWT 表中获取多条记录

> ID：10818608
> 
> 赞同：-2
> 
> 时间：2012-05-30T14:43:06.613
> 
> 标签：java, swt

我想使用 SWT 创建一个表，并想添加一个带有复选框的列，然后我想删除被选中的行（复选框被选中）。

我知道如何添加带有复选框的列，如下所示：

```
TableEditor editor = new TableEditor(table);
final Button checkButton = new Button(table, SWT.CHECK); 
```

但我不知道如何获取选定的行（复选框已选中）。我用谷歌研究了它，但还没有找到演示，谁能告诉我如何获取选定的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:59:02.503

首先，使用`SWT.CHECK`标志创建表格，因此您不需要创建按钮。

其次，当你这样做时，你可以使用 TableItem 的`getChecked()`方法来检索检查状态。

# android - 无法实例化活动 ComponentInfo{...}：java.lang.NullPointerException

> ID：10818609
> 
> 赞同：0
> 
> 时间：2012-05-30T14:43:12.453
> 
> 标签：android

在学习android时，我正在制作一个ICMP ping程序。我添加了一个 AsyncTask 线程来防止“主网络中的网络”，现在我的编程正在抛出这个运行时异常（标题中的那个）。我是安卓新手；如果你们能帮助我，那就太好了。这里有问题的 logcat 错误：

```
05-30 13:52:49.644: E/AndroidRuntime(620): FATAL EXCEPTION: main
05-30 13:52:49.644: E/AndroidRuntime(620): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.icmpping.Joe/com.icmpping.Joe.PingAppActivity}: java.lang.NullPointerException
05-30 13:52:49.644: E/AndroidRuntime(620):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
05-30 13:52:49.644: E/AndroidRuntime(620):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-30 13:52:49.644: E/AndroidRuntime(620):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-30 13:52:49.644: E/AndroidRuntime(620):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-30 13:52:49.644: E/AndroidRuntime(620):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-30 13:52:49.644: E/AndroidRuntime(620):  at android.os.Looper.loop(Looper.java:137)
05-30 13:52:49.644: E/AndroidRuntime(620):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-30 13:52:49.644: E/AndroidRuntime(620):  at java.lang.reflect.Method.invokeNative(Native Method)
05-30 13:52:49.644: E/AndroidRuntime(620):  at java.lang.reflect.Method.invoke(Method.java:511)
05-30 13:52:49.644: E/AndroidRuntime(620):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-30 13:52:49.644: E/AndroidRuntime(620):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-30 13:52:49.644: E/AndroidRuntime(620):  at dalvik.system.NativeStart.main(Native Method)
05-30 13:52:49.644: E/AndroidRuntime(620): Caused by: java.lang.NullPointerException
05-30 13:52:49.644: E/AndroidRuntime(620):  at android.app.Activity.findViewById(Activity.java:1794)
05-30 13:52:49.644: E/AndroidRuntime(620):  at com.icmpping.Joe.PingAppActivity.<init>(PingAppActivity.java:15)
05-30 13:52:49.644: E/AndroidRuntime(620):  at java.lang.Class.newInstanceImpl(Native Method)
05-30 13:52:49.644: E/AndroidRuntime(620):  at java.lang.Class.newInstance(Class.java:1319)
05-30 13:52:49.644: E/AndroidRuntime(620):  at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
05-30 13:52:49.644: E/AndroidRuntime(620):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
05-30 13:52:49.644: E/AndroidRuntime(620):  ... 11 more 
```

我很确定这与 AsyncTask 有关。ICMP_Ping.ping 方法来自另一个类，它返回一个字符串对象并接受一个字符串参数。它使用 java.net.InetAddress 和 System.currentTimeMillis()。无论如何，这是我的主要课程：

////

```
package com.icmpping.Joe;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class PingAppActivity extends Activity {

private TextView console = (TextView) findViewById(R.id.TEXT_STATUS_ID);

private OnClickListener listener = new OnClickListener() {
    public void onClick(View v) {

        Log.d("pingactivity", "Hey LOGCAT2");

        EditText urlbox = (EditText) findViewById(R.id.url_edittext);
        String url = urlbox.getText().toString();

        Log.d("pingactivity", "Hey LOGCAT3");
        new AsyncPing().execute(url);

        Log.d("pingactivity", "Hey LOGCAT4");
    }
};

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Log.d("pingactivity", "Hey LOGCAT0");

    Button pingbutton = (Button) findViewById(R.id.ping_button);

    pingbutton.setOnClickListener(listener);
    Log.d("pingactivity", "Hey LOGCAT1");

}

private class AsyncPing extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... url) {
        return ICMP_Ping.ping(url[0]);
    }

    //protected void onProgressUpdate(Integer... progress) {}

    protected void onPostExecute(String pingresult) {
        console.append(pingresult);

    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:45:30.823

这条线 `TextView console = (TextView) findViewById(R.id.yourtextid);`

放在后面`setContentView(R.layout.main);`

```
 TextView console;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Log.d("pingactivity", "Hey LOGCAT0");

        Button pingbutton = (Button) findViewById(R.id.ping_button);
        console = (TextView) findViewById(R.id.yourtextid);
    } 
```

# ios - 为什么我的视图在缩放之前旋转了 90 度？

> ID：10818617
> 
> 赞同：1
> 
> 时间：2012-05-30T14:43:29.313
> 
> 标签：ios

我有一个 UIView，当用户点击它时，我想自动缩放到屏幕的大小。

我从[http://cocoawithlove.com/2010/09/zoomingviewcontroller-to-animate-uiview.html获取代码](http://cocoawithlove.com/2010/09/zoomingviewcontroller-to-animate-uiview.html)

并且缩放有效，除了在缩放开始之前视图旋转 90 度。为什么会这样？

（视图在轮播中。在用户点击视图之前，设备被旋转到横向，此时轮播的视图控制器被推送到导航堆栈并显示轮播。）

代码是：

```
- (void)buttonTapped:(UIButton *) sender
{
    NSInteger index = [self.carousel indexOfItemView:sender];

    UIView *currentView = [self.carousel itemViewAtIndex: index];
    UIView *proxyView = [[UIView alloc] initWithFrame:currentView.frame];
    proxyView.hidden = YES;
    proxyView.autoresizingMask = currentView.autoresizingMask;
    [currentView.superview addSubview: proxyView];

    CGRect frame = [currentView.window convertRect:currentView.frame fromView:proxyView.superview];
    [currentView.window addSubview:currentView];
    currentView.frame = frame;

    [UIView
     animateWithDuration:2.4
     animations:^{
         currentView.frame = currentView.window.bounds;
     }]; 
```

（carousel 是 UIView 派生的对象，来自[https://github.com/nicklockwood/iCarousel](https://github.com/nicklockwood/iCarousel)）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:50:31.680

我怀疑问题是：

```
currentView.frame = frame; 
```

或者：

```
currentView.frame = currentView.window.bounds; 
```

在横向模式下，您的视图或其中一个封闭视图具有将所有内容旋转 90° 的变换。正如[UIView 文档所指出](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/frame)的那样，如果视图的属性不是身份转换，则该`frame`属性是未定义的。`transform`可能是设置您的视图`frame`隐式地将其设置`transform`回身份，这会导致它旋转回纵向。

上面链接中的文档都警告不要在发生转换`frame`时进行更改，并提供解决方案：

> 对此属性的更改可以设置动画。但是，如果 transform 属性包含非恒等变换，则 frame 属性的值是未定义的，不应修改。在这种情况下，您可以使用 center 属性重新定位视图并使用 bounds 属性调整大小。

# javascript - 只需通过带有基本 html 的 url 发布到 facebook

> ID：10818618
> 
> 赞同：0
> 
> 时间：2012-05-30T14:43:30.347
> 
> 标签：javascript, html, facebook, facebook-graph-api

我有 3 个按钮可以与社交服务分享一些新闻。我想要一些非常简单的东西，基本上可以在 html 中工作（......东西是动态的）：

```
<a target="_blank" href="?">
    <div class="fb-button button"></div>
</a>
<a target="_blank" href="https://twitter.com/intent/tweet?url=...">
    <div class="tw-button button"></div>
</a>
<a target="_blank" href="http://pinterest.com/pin/create/button/?url=...&media=...">
    <div class="pi-button button"></div>
</a> 
```

facebook中有一些东西可以用作href，一个帖子界面的url或其他东西？我想答案可能是“不”，那么正确的解决方案是什么？我不想要一个标准的like按钮，我不想用css自定义like按钮，我不想用javascript开发一个post call，因为我真的希望用户收到一个窗口（或弹出窗口或其他东西）他可以在接受之前自定义帖子的内容。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:00:46.933

当我单击 Wordpress 中的共享按钮以通过 Facebook 共享我的博客时，它打开了一个带有以下 URL 的窗口：

> [http://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwp.me%2Fpz9a5-dO&t=Training+Bulletin+180](http://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwp.me%2Fpz9a5-dO&t=Training+Bulletin+180)

所以，我猜你可以简单地使用sharer.php并将你的网站设置为你创建的href中“u”的值。所以第一行代码可能是：

> 一个目标="_blank" href="http://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fmylink.com%2Fpage.htm"

# asp.net - 服务器错误，WCF 服务已禁用

> ID：10818619
> 
> 赞同：1
> 
> 时间：2012-05-30T14:43:31.470
> 
> 标签：asp.net, wcf, visual-studio-2010, authentication, iis

我正在使用 Visual Studio 2010 在 ASP.NET 中实现一个基本的身份验证 WCF 服务。我通过大致遵循[本指南](http://msdn.microsoft.com/en-us/library/bb515342.aspx)的前几部分来完成此操作。

我有默认的 ASP.NET 网站（在 VS2010 中）登录页面设置为使用我的 WCF 服务来验证用户，使用这个代码隐藏和一个`<asp: Login>`属性：

```
protected void Login_Authenticate(object sender, AuthenticateEventArgs e)
{
    bool isAuthenticated = false;

    string customCredential = "Not used by the default membership provider.";
    bool isPersistent = LoginUser.RememberMeSet; // Authentication ticket remains valid across sessions?

    AuthenticationServiceClient authClient = new AuthenticationServiceClient();

    isAuthenticated = authClient.Login(LoginUser.UserName, LoginUser.Password, customCredential, isPersistent);

    e.Authenticated = isAuthenticated;
    authClient.Close();
} 
```

此外，当我使用 IIS Express 时，我已经完成了这项工作，但后来我转移到了 IIS 7.5。

当上述函数被调用时，调用`authClient.Login(...)`.

通常的错误页面会弹出这样说：

> “/AuthClientSite”应用程序中的服务器错误。
> 
> AuthenticationService 被禁用。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.ServiceModel.FaultException`1[[System.ServiceModel.ExceptionDetail, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]：AuthenticationService 已禁用。

由于此代码与 IIS Express 上的代码几乎相同，并且鉴于我的服务似乎刚刚被禁用，我猜测它是 IIS 中某个需要修复的设置。

我正在包装`System.Web.ApplicationServices.AuthenticationService`服务，如[上面的链接所示](http://msdn.microsoft.com/en-us/library/bb515342.aspx)。

任何关于正在发生的事情的想法都会有很大的帮助。在过去的几天里，我尝试了很多不同的事情，我不记得和/或将它们全部列出，但我会尽力回答你所有的问题/意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:52:01.507

所以我想出了我的问题。我需要将这些行添加到运行服务的网站中的 Web.config 文件中：

```
<system.web.extensions>
    <scripting>
        <webServices>
            <authenticationService enabled="true"
                requireSSL = "false"/>
        </webServices>
    </scripting>
</system.web.extensions> 
```

希望这对将来遇到此问题的任何人有所帮助。

# visual-studio-2008 - 如何摆脱水晶报表中的空白页？

> ID：10818627
> 
> 赞同：0
> 
> 时间：2012-05-30T14:43:45.900
> 
> 标签：visual-studio-2008, crystal-reports, crystal-reports-2008

在我的 .rpt 文件中，我选择了“多列格式”选项并在“布局”选项卡中使用以下设置进行了编辑。

我的打印方向是“向下然后穿过”宽度：2.500 水平：1.000 垂直：0.230

使用上述设置，我在最后得到一个空白页如何摆脱那个空白页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T03:47:18.520

是的，我找到了答案我有一个我删除的没有用的报告页脚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-08T10:48:32.130

只要抑制`Report Footer`一切都会好的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T15:05:53.553

要删除此空白页面，您可以为“新页面之后”选项添加一个公式，而不是简单地检查它。单击公式按钮并添加以下内容：

不是最后一个记录

保存并关闭，您就完成了。现在除了最后一组之外的所有内容都将在它之后获得一个新页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-08T05:49:28.807

除了确定它们出现的原因并解决问题之外，没有其他方法可以删除空白页。

空白的最后一页通常是由于`NEW PAGE AFTER`选择了类似 the`DETAILS`或 a`enter code here`

CR 8 指令。打开报告 点击`FORMAT`-->`SECTION` 选择详细信息部分 如果`NEW PAGE AFTER`选中，取消选中并点击`FORMULA BUTTON`右侧的 输入公式 Not OnLastRecord

如果有组检查每个组页脚（它可能是第 1 组页脚）如果`NEW PAGE AFTER`选中，取消选中并单击`FORMULA BUTTON`右侧输入公式

```
Not OnLastRecord 
```

如果 balnk 页面贯穿您可能拥有`NEW PAGE AFTER`或`NEW PAGE BEFORE`选择的报告，那么两者都会生成一个新页面。例如，如果您`NEW PAGE AFTER` 在组页脚和`NEW PAGE BEFORE`组页眉上。

报告中出现空白页的另一个原因是字段太宽而无法放在页面上，然后您会打印页面以完成可能为空白的字段的右手端。确保整个字段适合页面

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-18T08:53:00.047

我知道这是延迟响应。

认为其他人会发现这很有用。

在水晶报表设计器中打开报表。

报告中的某些控制/控制可能超出了报告区域

请右键单击空白报告区域并选择页面设置。

尝试将**左上右下**边距设置为低得多的值。通常，我将值设置为**0.00 MM**并检查这是否解决了问题。

如果这会删除空白页，请尝试通过逐个输入边距值来找到真正的边距。

如果每页后面都有**空白**页。这可能是您的解决方案。

如果在“详细信息”的“部分专家”中未勾选“保持在一起”选项，同样的问题将导致在报告页面的顶部逐页添加**空白区域。**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-21T02:11:22.143

这对我的报告有效：

我取消选中每个部分中的“在页面底部打印”选项。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-26T04:43:44.297

在我的情况下，我打开`section Expert`对话框并从`sections`选项卡中选择空白页，然后单击`delete`对话框顶部的按钮。这删除了我的空白页。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-15T17:30:20.050

我遇到了同样的问题，导致它的原因是我的一张图片被延伸到页面之外。一旦我裁剪掉空白边缘，它就修复了它。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-03-16T11:03:03.010

要删除水晶报表中的第一个空白页，请点击链接

右键单击组部分->转到更改组->然后取消选中将组保持在一起

# templates - Mustache - 将数组发送到 js 函数

> ID：10818635
> 
> 赞同：0
> 
> 时间：2012-05-30T14:44:16.847
> 
> 标签：templates, mustache

我有以下问题

数据：

```
var json = {'data': [{'id': '1', 'members': [{'name':'First member', 'age': '23'},{'name':'Second member', 'age': '31'}] }]} 
```

JSON 是从我的脑海中写出来的，所以它可能是无效的，不是那么重要。

小胡子.tmpl

```
{{#data}}
{{#members}}
<script>myJsFunction( all_members_attributes_as_json )</script>
{{/members}}
{{/data}} 
```

所以总的来说，我想将整个 mustache 数组传递给我的 JS 函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T16:38:50.473

大约是这样的：

添加一个用于将您的成员映射到 JSON 字符串的函数：

```
_.each(json.data, function(el) {
    el.jsonMembers = function() {
        return _.map(this.members, function(member) {
            return JSON.stringify(member);
        });
    };
}); 
```

请注意，我在这里使用了`_.each`和`_.map`...如果您不使用下划线，请替换为您最喜欢的迭代器或香草 for 循环。或者只使用下划线，因为它让生活更美好。

然后您将访问字符串化版本而不是普通版本：

```
{{#data}}
{{#jsonMembers}}
<script>myJsFunction({{{ . }}})</script>
{{/jsonMembers}}
{{/data}} 
```

# mysql - 使用 socket.io 在 Node.js 中使用 MySql 数据库进行 HTML5 页面日志记录

> ID：10818636
> 
> 赞同：3
> 
> 时间：2012-05-30T14:44:19.903
> 
> 标签：mysql, html, node.js, socket.io

我尝试使用 HTML5+MySQL+Node.js+socket.io 登录数据库，但失败了。请帮忙。我想使用 Node.js 和 socket.io 从 HTML5 页面登录到 MySQL 数据库

我有一个带有 2 个文本框用户名和密码以及一个登录按钮的 HTML5 页面。用户想从 HTML5 页面登录，用户/密码发送到服务器，服务器接收用户/密码并使用 mysql 数据库验证并返回结果。

**我的代码：server_test.js**

```
var io = require('C:/Program Files (x86)/nodejs/node_modules/socket.io/lib/socket.io');
var socket = io.listen(8124);
socket.sockets.on('connection',function(socket){
    socket.on('login', function(data, usr, pass){
        var mysql = require('mysql');
        var TEST_DATABASE = 'employee';
        var TEST_TABLE = 'tblusers';
        var client = mysql.createClient({
          user: 'root',
          password: 'secret10',
        });

        client.query('USE '+TEST_DATABASE);

        client.query(
          'SELECT name FROM '+TEST_TABLE+' WHERE user = '+usr+' AND password = '+pass,
          function selectCb(err, results) {
            if (err) {
              throw err;
            }
            //Emit a message to client
            socket.emit('retuLogIn',{username: results[0]['name']});
            client.end();
          }
        );
    });
        socket.on('disconnect', function(){
            console.log('Server has disconnected');
        });
}); 
```

**client_test.html**

```
<!doctype html>
<html>
    <title>WebSocket Client Demo [socket.io]</title>
    <script src="/json.js"></script> <!-- for ie -->
    <script src="http://localhost:8124/socket.io/socket.io.js"></script>
    <script>
    function connect() {

        try
        {
            var socket = io.connect('http://localhost:8124/');
            socket.on("connect",function(){
                document.getElementById('status').innerHTML ="Browser has connected to the app server";
            });
            socket.on('login', function (data, document.getElementById('txtUser').value, document.getElementById('txtPass').value) {
                //alert(data.hello);
                document.getElementById('status').innerHTML = 'Welcome '+data.username;
            });
        }
        catch(err)
        {
            document.getElementById('status').innerHTML = err.message;
        }
    }
    </script>
    <body>
        <h1>WebSocket Client Demo</h1>
        <div><p id="status">Enter user and password to Log-In</p></div>
        <label>User :</label>
        <input id="txtUser" type="text" maxlength="10" />
        <label>Password :</label>
        <input id="txtPass" type="text" maxlength="10" />
        <button id="connect" onClick='connect()'/>Log-In</button>
    </body>
</html> 
```

注意：我尝试使用上述代码但没有成功。我试图使用socket.send（'abcd'，'ab12'）从客户端将用户名/密码发送到服务器。可以发送但无法在服务器中接收。

请帮助我如何解决这个问题。我正在使用 MySQL 数据库。

作为更新，当我应用 Joel 的建议时，当我尝试在 Node.js 中运行 app.js 时仍然看到错误：

```
C:\Program Files (x86)\nodejs>node "C:\Program Files (x86)\nodejs\app.js"    info  - socket.io started

C:\Program Files (x86)\nodejs\app.js:6
    var client = mysql.createConnection({
                       ^ TypeError: Object #<Object> has no method 'createConnection'
    at Object.<anonymous> (C:\Program Files (x86)\nodejs\app.js:6:24)
    at Module._compile (module.js:449:26)
    at Object..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function._load (module.js:312:12)
    at module.js:487:10
    at EventEmitter._tickCallback (node.js:238:9)

C:\Program Files (x86)\nodejs> 
```

现在这有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:17:22.467

我刚刚修复了脚本，因为我需要类似的东西，给你：

应用程序.js：

```
 var app = require('http').createServer(handler)
      , io = require('socket.io').listen(app)
      , fs = require('fs')
      , mysql = require('mysql')

    var client = mysql.createConnection({
              host: 'localhost',
              user: 'root',
              password: '',
    });

    client.connect();

    app.listen(3232);

    function handler (req, res) {
      fs.readFile(__dirname + '/index.html',
      function (err, data) {
        if (err) {
          res.writeHead(500);
          return res.end('Error loading index.html');
        }

        res.writeHead(200);
        res.end(data);
      });
    }

    io.sockets.on('connection', function (socket) {
        socket.on('login', function(usr, pass){
            var TEST_DATABASE = 'mysqltest';
            var TEST_TABLE = 'users';

            client.query('USE '+TEST_DATABASE);

            client.query('SELECT name FROM '+TEST_TABLE+' WHERE user = "'+usr+'" AND password = "'+pass+'"', function(err, results) {
              if (err) throw err;
              console.log(results[0]); // [{1: 1}]
              socket.emit('retuLogIn',results[0]['name']);
            });

        });
        socket.on('disconnect', function(){
            console.log('Server has disconnected');
        });
    }); 
```

和 index.html：

```
<html>
    <title>WebSocket Client Demo [socket.io]</title>
    <script src="http://localhost:3232/socket.io/socket.io.js"></script>
    <script>
    function connect() {

        try
        {
            var socket = io.connect('http://localhost:3232/');
            socket.on("connect",function(){
                document.getElementById('status').innerHTML ="Browser has connected to the app server";
                socket.emit('login', document.getElementById('txtUser').value, document.getElementById('txtPass').value);

            });
            socket.on('retuLogIn', function (data) {
                document.getElementById('status').innerHTML = 'Welcome '+data;
            });
        }
        catch(err)
        {
            document.getElementById('status').innerHTML = err.message;
        }
    }
    </script>
    <body>
        <h1>WebSocket Client Demo</h1>
        <div><p id="status">Enter user and password to Log-In</p></div>
        <label>User :</label>
        <input id="txtUser" type="text" maxlength="10" />
        <label>Password :</label>
        <input id="txtPass" type="text" maxlength="10" />
        <button id="connect" onClick='connect()'/>Log-In</button>
    </body>
</html> 
```

如果需要，您需要更改 mysql 数据库名称、用户名、密码和可能的端口等内容。

我使用了 node.js、socket.io 和 node-mysql

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-23T17:04:57.283

Chandan Dey 你失踪了

```
mysql = require('mysql') 
```

在你的代码中，干杯

# c# - 在 ContextMenuStrip 中复制 ContextMenu 构造函数

> ID：10818638
> 
> 赞同：0
> 
> 时间：2012-05-30T14:44:20.863
> 
> 标签：c#, winforms, contextmenu, contextmenustrip

根据我的研究和理解，ContextMenuStrip 应该是 ContextMenu 的继承者，并且本着保持我的代码更新和健全的精神，我着手替换一个这样的 ContextMenu 实例。

以前，为了给 MenuItem 一个带有点击处理程序的项目子菜单，我正在做类似的事情：

```
 MenuItem[] clearMenu = {    
                                new MenuItem("All", clear_all_click),
                                new MenuItem("Text", clear_text_click),
                                new MenuItem("Images", clear_images_click),
                                new MenuItem("Audio", clear_audio_click) 
                           };

    notifyIcon.ContextMenu.MenuItems.Add(new MenuItem("Clear", clearMenu)); 
```

![在此处输入图像描述](../Images/ef11f605cc3d64146e71c813b167625e.png)

我不确定我是否遗漏了一些简单的东西，但是如何使用 ContextMenuStrip 实现类似的功能？ToolStripMenuItem 没有重载的构造函数，可让您添加自身的数组以形成子菜单。也没有一种方法可以根据从 ContextMenuStrip 中选择特定项目索引来添加项目，例如：

```
 notifyIcon.ContextMenuStrip.Items["Clear"].Add 
```

有一个构造函数可以让您实例化一个带有 ToolStripItem(s) 数组的子菜单，但它是一个抽象类，因此您不能直接调用它。

想法？还是我不是透过树木看到森林。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:42:14.847

你可以做你想做的事。但要通过 keyname 访问，您必须设置名称：

```
ToolStripItem[] newItems = {
                    new ToolStripMenuItem("All", null, DoThis),
                    new ToolStripMenuItem("Text", null, DoThis)
                };

this.contextMenuStrip1.Items.Add(new ToolStripMenuItem("Clear", null, newItems) {Name="Clear"});

var clearItem = this.contextMenuStrip1.Items["Clear"] as ToolStripMenuItem; 
```

# php - 将变量从客户端发送到服务器 | JSON 与 POST

> ID：10818639
> 
> 赞同：4
> 
> 时间：2012-05-30T14:44:26.120
> 
> 标签：php, javascript, ajax

如果我在客户端说服务器端需要 1-5 个变量，并且我通过 ajax（Post 方法）处理我的通信，那么我可以通过两种主要方式来获取它们。

*   使用 JSON 编码（然后解码它们）并在 POST 变量中作为 JSON 字符串发送

或者

*   只需为我需要发送的每个变量创建一个 POST 变量。

重要还是只是偏好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:56:16.633

我认为这一切都归结为 json 将增加的开销。如果您要发布 2,3 或大约 5 个字段，则只需使用普通 POST。否则，如果您尝试发送大量有意义的数据，那么使用 JSON 总是一个好主意。

基本上对于需要在服务器上计算的大量数据，最好使用 JSON，因为解码它会给出一个数组数组，而且它会更简单，而不是循环遍历 $_POST 数组。

此外，在 JSON 中编码并将信息发送到服务器是有意义的，尤其是当服务器将执行计算/检查并发送回一些响应时。虽然这样做总是更好地发送以 JSON 编码而不是纯文本编码的响应。使用 JSON 时，在 POSTED 数据中添加/编辑数据变得更加容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:58:33.210

反序列化 JSON 肯定会有开销，但不会太多。我发现 JSON 比为您要发送的每个值创建新变量要好得多。另外，我发现一旦您的 JSON 实现到位，缩放就容易得多（即，当您以后出于任何原因必须添加新值时）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T14:53:31.940

我想这只是个人喜好。

我没有听到任何关于性能或最佳实践的特别之处，比如将 JSON 与 POST 一起使用。从 AJAX 调用中发布表单时，我更喜欢使用普通的 POST 参数，除非它们的计数对我来说非常不舒服，我把每个都写下来——然后我使用 JSON...

但是每个项目都应该统一 - 一旦您决定使用 JSON，请始终使用它...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T14:53:56.483

json 的好处是它提供的封装和 api。但是，与仅按原样发布值相比，序列化/反序列化可能会有一些开销。

它最终不会产生相关的差异。

# android - Toast.show 比移动到另一个 Activity -> 致命异常：没有通过 Activity#showDialog 显示 id X 的对话框

> ID：10818640
> 
> 赞同：0
> 
> 时间：2012-05-30T14:44:31.840
> 
> 标签：android, android-activity, dialog, toast

```
E/AndroidRuntime(16172): FATAL EXCEPTION: main
E/AndroidRuntime(16172): java.lang.IllegalArgumentException: no dialog with id 2 was ever shown via Activity#showDialog
E/AndroidRuntime(16172):        at android.app.Activity.missingDialog(Activity.java:2600)
E/AndroidRuntime(16172):        at android.app.Activity.dismissDialog(Activity.java:2585)
E/AndroidRuntime(16172):        at com.proapps.eng.android.client.meeting_screen$1.handleMessage(meeting_screen.java:196)
E/AndroidRuntime(16172):        at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(16172):        at android.os.Looper.loop(Looper.java:130)
E/AndroidRuntime(16172):        at android.app.ActivityThread.main(ActivityThread.java:3701)
E/AndroidRuntime(16172):        at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(16172):        at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime(16172):        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
E/AndroidRuntime(16172):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
E/AndroidRuntime(16172):        at dalvik.system.NativeStart.main(Native Method)
W/ActivityManager(  238):   Force finishing activity com.proapps.eng.android.client/.MainScreenActivity
W/ActivityManager(  238): Activity pause timeout for HistoryRecord{2b54bd38 com.proapps.eng.android.client/.MainScreenActivity} 
```

在 Toast.show() 之后抛出此异常，然后立即开始一个新活动（主要活动）而不是当前的 finish()。

```
final Handler handler = new Handler() {
    public void handleMessage(Message msg) {
        // Get the current value of the variable total from the message data
        // and update the progress bar.
        int total = msg.getData().getInt("total");
        progDialog.setProgress(total);
        if (total <= 0){
            dismissDialog(typeBar);
            progThread.setState(ProgressThread.DONE);
            mail_sent_popup.show(); // mail sent popup
            startActivity(new Intent(cntx,MainScreenActivity.class));      
        // start the main instead of finishing this one.
        }
    }
}; 
```

当传递给新活动时，它“忘记”对话框是在以前的活动中引入的。我应该怎么办？

顺便说一句，它并不总是抛出，只是不时抛出。谢谢！！！

编辑：更多代码（对话线程）

```
private class ProgressThread extends Thread {

    // Class constants defining state of the thread
    final static int DONE = 0;
    final static int RUNNING = 1;

    Handler mHandler;
    int mState;
    int total;

    EditText name_text = (EditText)findViewById(R.id.editText1);
    EditText phone_text = (EditText)findViewById(R.id.editText2);
    EditText free_text = (EditText)findViewById(R.id.editText3);

    // Constructor with an argument that specifies Handler on main thread
    // to which messages will be sent by this thread.

    ProgressThread(Handler h) {
        mHandler = h;
    }

    // Override the run() method that will be invoked automatically when 
    // the Thread starts.  Do the work required to update the progress bar on this
    // thread but send a message to the Handler on the main UI thread to actually
    // change the visual representation of the progress. In this example we count
    // the index total down to zero, so the horizontal progress bar will start full and
    // count down.

    @Override
    public void run() {
        mState = RUNNING;   
        total = maxBarValue;
        while (mState == RUNNING) {

                // LONG JOB HERE

                }

            Message msg = mHandler.obtainMessage();
            Bundle b = new Bundle();
            b.putInt("total", 0);
            msg.setData(b);
            mHandler.sendMessage(msg);

        }
    }

    // Set current state of thread (use state=ProgressThread.DONE to stop thread)
    public void setState(int state) {
        mState = state;
    }
} 
```

我猜dismissDialog(typeBar); 是停止此线程的错误方法。我不知道我应该把 state=ProgressThread.DONE 放在代码中的哪个位置

编辑2：

我添加了声明对话框和部分活动 onCreate 的代码：

```
public void onCreate(Bundle savedInstanceState) {
    ...
    ...
    showDialog(2);
    ...
}

    @Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DATE_DIALOG_ID:
        return new DatePickerDialog(this, mDateSetListener, mYear, mMonth,mDay);
    case TIME_DIALOG_ID:
        return new TimePickerDialog(this, mTimeSetListener, mHour, mMinute,false);
    case 2:
        progDialog = new ProgressDialog(this);
        progDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        progDialog.setMessage("Sending...");
        progThread = new ProgressThread(handler);
        progThread.start();
        return progDialog;
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:20:55.410

通常，一个 Dialog 由一个 Activity 拥有。您不能在 ActivityA 中显示对话框，然后在 ActivityB 中将其关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T09:05:45.237

这就是我解决这个问题的方法：

```
 final Handler handler = new Handler() {
    public void handleMessage(Message msg) {
        // Get the current value of the variable total from the message data
        // and update the progress bar.
        int total = msg.getData().getInt("total");
        progDialog.setProgress(total);
        if (total <= 0){
            progThread.setState(ProgressThread.DONE);
//          dismissDialog(typeBar);     // PROBLEMATIC
            mail_sent_popup.show(); // mail sent popup
            startActivity(new Intent(cntx,MainScreenActivity.class));
// start the main instead of finishing this one.
        }
    }
}; 
```

刚刚注释了手动dismissDialog，让线程用 progThread.setState(ProgressThread.DONE); 希望这可以帮助某人。

# ios - SQL插入中的单引号和双引号问题

> ID：10818645
> 
> 赞同：-1
> 
> 时间：2012-05-30T14:44:58.110
> 
> 标签：ios, sql, database, sqlite

请参阅下面的查询。

```
INSERT INTO pro VALUES ("260915",'Peel and Stick Floral Wall Art','Transform your tot's bedroom into a bright, burgeoning meadow with this set of oh-so-colorful wall art. Each unique flower, bird, butterfly, and swirly sun is a colorful creation of multilayered vinyl brimming with life and energy. How best to arrange them is entirely up to you--and your 12.2" x 15.4"','','Shipping',"790","110-m4jlgu36n",1.00,0,0,"0.00","70.00","http://.com/peel-and-stick-floral-wall-art.html","622") 
```

在这里，我想在列中插入相同值的单引号和双引号：

```
eg a) 12.2" x 15.4"
   b) Transform your tot's 
```

请提出最佳解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:49:17.077

构建时`INSERT`，在外面使用单引号，双引号的问题就解决了。

要使用单引号解决问题，请替换`'`为`''`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:47:18.773

为什么你不逃避你的报价？`12.2\"`?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:49:11.743

将所有内容放在单引号内`'`

```
'12.2" x 15.4"<br>' 
```

对于这样的字符串，`Transform your tot's`您将不得不像这样逃避它

```
'Transform your tot\'s' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T14:49:23.107

对于 T-SQL，要在数据中获得单引号，您只需将其转义为另一个（例如，使用两个相邻的单引号） 您无需担心字符串文字中的双引号。

```
INSERT INTO foo VALUES ('qwerty''s: 25" sq.') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T14:53:14.477

仅使用单引号 (') 将值括起来。如果单引号是值的一部分，请输入两次（这是转义它的方法）。

例如

```
INSERT INTO TABLE VALUES ('12.2" x 15.4"', 'Transform your tot''s bedroom...'); 
```

# php - 将 URL 中的“&”作为值传递

> ID：10818648
> 
> 赞同：0
> 
> 时间：2012-05-30T14:44:59.170
> 
> 标签：php, forms, get, ampersand

我正在开发一个提交标准表单的搜索功能，当我在“&azerty”上搜索时，网址变为“index.php/search?q=%26azerty”

不幸的是，值`$_GET['q']`is only`%26amp%3B`而不是`%26amp%3Bazerty`

有人知道我如何才能访问变量的完整值吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T14:47:20.143

我相信您正在寻找[URL 解码](http://www.php.net/manual/en/function.urldecode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:56:28.537

如果使用 javascript，您也可以使用**转义关键字。**

obj_win = window.open('testpage.aspx?Parameter1=' + escape(Parameter1) + '&ParentId=testpage', 'new', sFeatures);

# signalr - 是否可以让信号器使用 javascript 和本地页面（不是从服务器加载）

> ID：10818649
> 
> 赞同：0
> 
> 时间：2012-05-30T14:45:02.280
> 
> 标签：signalr

我尝试让 signalR 在 webview 中工作，但为了从 JS 获取事件以显示在我的应用程序中，我无法从服务器加载源 html 文件。所以我需要将 hubs.js、jquery 和 signalr.js 保存在本地。但是，我如何指定与服务器的连接？我可以以某种方式指定服务器的地址吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:46:07.103

你是说网络地址吗？或网址地址？

```
$.connection.hub.url = 'http://[insert url address here]/signalr;
$.connection.hub.start(); 
```

# java - Gradle + Sonar：未收集覆盖信息

> ID：10818650
> 
> 赞同：0
> 
> 时间：2012-05-30T14:45:05.800
> 
> 标签：java, gradle, sonarqube

我有一个项目，它的包直接在 src 下。

我有一个简单的 build.gradle 看起来完全像[这样](https://github.com/SonarSource/sonar-examples/blob/master/projects/gradle/build.gradle)。

现在当我运行`gradle build sonar`它给我以下错误：

```
Coverage information was not collected. Perhaps you forget to include debug information into compiled classes? 
```

我知道你可以在 gradle 中设置 java 文件的 src 路径，但我怀疑问题是声纳找错了地方？也许对它的工作原理有更好理解的人可以对此有所了解。

# javascript - 删除用于打印的 JavaScript CSS 覆盖

> ID：10818653
> 
> 赞同：0
> 
> 时间：2012-05-30T14:45:11.650
> 
> 标签：javascript, jquery, css, wordpress, slideshow

我面临以下问题：我正在尝试调整 WordPress 主题的打印版本。该主题包含一个 jQuery 图像幻灯片，它是从一些包含的脚本生成的，我不应该更改它。

在 HTML 中，幻灯片是一个 ul，每个 li 包含一个图像。li 元素具有类“featured”和“slide_number_n”，其中 n 是幻灯片的编号（即 slide_number_1、slide_number_2 等）。

所以幻灯片看起来像这样：

```
<ul class="slideshow_container">
  <li class="featured slide_number_1" style="display:block"><img src="foo.jpg" /></li>
  <li class="featured slide_number_2" style="display:none"><img src="bar.jpg" /></li>
</ul> 
```

如果我查看页面的打印版本（当然），它包含幻灯片中的所有图像，但我们的客户只想要显示的第一个显示，所以我尝试更改它来做到这一点。但是，如果我在幻灯片中显示第一张图像之后打开打印版本，我根本看不到任何图像，因为 JS 已经覆盖了所有内联显示值。我无法逆转这些 JS 更改，甚至在我的 print.css 中也没有使用`!important`and 。`li[style]`

有没有办法扭转 JS 在 print.css 中所做的更改？

谢谢你和问候，朱利安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:52:13.447

`!important`应该管用。

看我的例子：http: [//jsfiddle.net/CqAXu/](http://jsfiddle.net/CqAXu/)

如果它不起作用，那么我们需要查看更多您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:49:19.307

只打印第一个：

```
<style media="print">
    #slideshow_container .feature {
        display: none!important;
    }

    #slideshow_container :first-child {
        display: list-item!important;
    }
</style>

<ul id="slideshow_container">
    <li class="feature" style="display: none">Print</li>
    <li class="feature" style="display: list-item">Noprint, Current</li>
    <li class="feature" style="display: none">Noprint</li>
    <li class="feature" style="display: none">Noprint</li>
    <li class="feature" style="display: none">Noprint</li>
</ul> 
```

# c - C程序中的并行执行

> ID：10818658
> 
> 赞同：3
> 
> 时间：2012-05-30T14:45:26.673
> 
> 标签：c, parallel-processing

我有一个关于在 C 程序中实现并行执行的可能性的问题。我的代码如下所示：

```
struct str {
   field;
   field2;
   struct name * ptrNext;
}

// something others

int main() {
    struct str *pHead = malloc((...)sizeof(struct str));
    struct str *ptr;
    // other.....
    /* Generation of dynamic list*/

    ptr=pHead;

    while(... ... ...) {
          someFunctionOnNode(ptr);
          ptr=ptr->ptrNext;
    }
} 
```

为了提高程序的速度并利用处理器中的多个内核，我想并行启动 function `someFunctionOnNode`。

有没有办法在C中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T15:01:34.320

最简单的方法是使用几乎所有现代 C 和 C++ 编译器都支持的 OpenMP 指令。如果你的足够现代（即支持 OpenMP 3.0），那么你可以简单地使用任务：

```
#pragma omp parallel
{
    #pragma omp single
    while(... ... ...) {
        #pragma omp task
        someFunctionOnNode(ptr); // This function call becomes a task
        ptr=ptr->ptrNext;
    }
    #pragma omp taskwait
} 
```

这个单一指令使得只有一个线程会遍历列表并产生任务，否则所有线程都会选择一个任务来执行。该`taskwait`指令等待所有任务完成。这不是绝对必要的，因为在区域末尾存在隐式屏障同步`parallel`。

如果您的编译器不支持 OpenMP 3.0，您可以通过将所有可能的值`ptr`放在一个平面数组中，然后对其执行并行 for 循环来解决：

```
datatype *ptrs[NUM_PTRS]; // Or allocate with new
int i = 0;
while (... ... ...) {
    ptrs[i++] = ptr;
    ptr = ptr->ptrNext;
}

#omp parallel for
for (i = 0; i < NUM_PTRS; i++)
{
    someFunctionOnNode(ptrs[i]);
} 
```

您还应该启用 OpenMP 支持，但它的完成方式是特定于编译器的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:47:51.423

在单独的线程中启动每个函数。线程 API 取决于您正在开发的系统，但如果它类似于 UNIX，请查看 pthreads：

[https://computing.llnl.gov/tutorials/pthreads/](https://computing.llnl.gov/tutorials/pthreads/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:48:39.123

就在这里。查看[MPI 框架](http://en.wikipedia.org/wiki/Message_Passing_Interface)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T14:49:28.450

标准 C 没有任何并行处理功能。您最好的选择是使用平台相关的多线程函数或其他一些更便携的多处理 API。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T15:01:18.450

如果处理器剪切内存，如果您有集群 MPI，[OpenMP可能是最好的解决方案。](https://en.wikipedia.org/wiki/OpenMP)在 OpenMP 中，您只需向希望代码并行运行的编译器提供[编译指示](https://en.wikipedia.org/wiki/Preprocessor_directive)，因此很容易调整现有代码。

# wifi - Scapy - 从 WiFi 数据包中检索 RSSI

> ID：10818661
> 
> 赞同：6
> 
> 时间：2012-05-30T14:45:34.260
> 
> 标签：wifi, scapy, rssi

我正在尝试从 WiFi 数据包中获取 RSSI 或信号强度。我还想要来自“WiFi 探测请求”的 RSSI（当有人在搜索 WiFi 热点时）。

我设法从 kismet 日志中看到它，但这只是为了确保它是可能的——我不想一直使用 kismet。

对于“全时扫描”，我使用的是 scapy。有谁知道我在哪里可以从用 scapy 嗅探的数据包中找到 RSSI 或信号强度（以 dBm 为单位）？我不知道整个数据包是如何构建的——而且有很多我不知道如何解析/解释的“十六进制”值。

我正在嗅探这两个接口 - wlan0（检测何时有人连接到我的热点）和 mon.wlan0（检测何时有人搜索热点）。我使用的硬件（WiFi 卡）基于 Prism 芯片组（ISL3886）。然而，Kismet 的测试是在 Atheros (AR2413) 和 Intel iwl4965 上运行的。

编辑1：

看起来我需要以某种方式访问​​存储在 PrismHeader 中的信息： [http](http://trac.secdev.org/scapy/browser/scapy/layers/dot11.py) ://trac.secdev.org/scapy/browser/scapy/layers/dot11.py 第 92 行？

有人知道如何输入这些信息吗？packet.show() 和 packet.show2() 不显示该类/层中的任何内容

编辑2：

经过更多挖掘后，似乎接口设置不正确，这就是它没有收集所有必要标题的原因。如果我运行 kismet 然后使用 scapy 从该接口嗅探数据包，则数据包中会包含更多信息：

```
###[ RadioTap dummy ]###
  version= 0
  pad= 0
  len= 26
  present= TSFT+Flags+Rate+Channel+dBm_AntSignal+Antenna+b14
  notdecoded= '8`/\x08\x00\x00\x00\x00\x10\x02\x94\t\xa0\x00\xdb\x01\x00\x00'
  ... 
```

现在我只需要正确设置界面而不使用kismet。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T21:58:31.953

总结一下：

*   信号强度不可见，因为设置“监控模式”的方式有问题（并非所有标头都由嗅探器传递/解析）。这个监控界面是由 hostapd 创建的。

*   现在我在与 airmon-ng 的接口上设置监控模式 - tcpdump，scapy 显示这些额外的标题。

**编辑：使用 scapy 2.4.1+（或 github 开发版本）。最新版本现在可以正确解码«未解码»部分**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-25T21:22:54.580

这是一个有价值的 scapy 扩展，它改进了`scapy.layers.dot11.Packet`对当前未解码字段的解析。

[https://github.com/ivanlei/airodump-iv/blob/master/airoiv/scapy_ex.py](https://github.com/ivanlei/airodump-iv/blob/master/airoiv/scapy_ex.py)

只需使用：

```
import scapy_ex 
```

和：

```
packet.show() 
```

它看起来像这样：

```
###[ 802.11 RadioTap ]###
  version   = 0
  pad       = 0
  RadioTap_len= 18
  present   = Flags+Rate+Channel+dBm_AntSignal+Antenna+b14
  Flags     = 0
  Rate      = 2
  Channel   = 1
  Channel_flags= 160
  dBm_AntSignal= -87
  Antenna   = 1
  RX_Flags  = 0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-15T15:01:00.873

由于某种原因，数据包结构发生了变化。现在 dBm_AntSignal 是 notdecoded 中的第一个元素。

我不是 100% 确定这个解决方案，但我曾经`sig_str = -(256 - ord(packet.notdecoded[-2:-1]))`到达第一个元素，我得到的值似乎是`dBm_AntSignal`.

我`OpenWRT`在一个`TP-Link MR3020`带有 extroot 和 Edward Keeble Passive Wifi Monitoring 的项目中使用了一些修改。

我使用 scapy_ex.py 并且我有以下信息：

```
802.11 RadioTap

  version   = 0

  pad       = 0

  RadioTap_len= 36

  present   = dBm_AntSignal+Lock_Quality+b22+b24+b25+b26+b27+b29

  dBm_AntSignal= 32

  Lock_Quality= 8 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-28T14:58:38.710

如果有人仍然有同样的问题，我想我已经找到了解决方案：

我相信这是 RSSI 值的正确削减：

```
sig_str = -(256-ord(packet.notdecoded[-3:-2])) 
```

这个是针对噪音水平的：

```
noise_str = -(256-ord(packet.notdecoded[-2:-1])) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-20T09:45:41.153

它说“RadioTap”的事实表明该设备可能提供[Radiotap 接头](http://www.radiotap.org)，而不是 Prism 接头，即使它具有 Prism 芯片组。 [p54 驱动程序](http://wireless.kernel.org/en/users/Drivers/p54)似乎是“SoftMAC 驱动程序”，在这种情况下，它可能会提供 Radiotap 标头；您使用的是 p54 驱动程序还是旧的 prism54 驱动程序？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-06T14:01:39.930

我有类似的问题，我用 airmon-ng 设置了监控模式，我可以在 tcpdump 中看到 dBm 级别，但是每当我尝试时，`sig_str = -(256-ord(packet.notdecoded[-4:-3]))`我得到 -256，因为从未解码的返回值在 0 中。数据包结构看起来像这样。

```
 version   = 0
 pad       = 0
 len       = 36
 present   = TSFT+Flags+Rate+Channel+dBm_AntSignal+b14+b29+Ext
 notdecoded= ' \x08\x00\x00\x00\x00\x00\x00\x1f\x02\xed\x07\x05 
 ....... 
```

# java - 如何使 webmethod 参数强制

> ID：10818671
> 
> 赞同：1
> 
> 时间：2012-05-30T14:46:17.633
> 
> 标签：java, web-services, jax-ws

我想让我的 webmethods 的一些参数是强制性的。

我尝试使用 XmlElement 如下

```
@XmlElement(required=true) @WebParam(name = "orderReference") String orderReference 
```

我也将 jaxws-api-2.2.jar 复制到 jdk-jre-lib 中，但我的 wsdl 片段仍然显示

在soapUI中它被显示为“可选”。

如何将此参数设为强制？我错过了什么吗？

# javascript - jQuery 购物车 - 简单的请求

> ID：10818678
> 
> 赞同：1
> 
> 时间：2012-05-30T14:46:52.367
> 
> 标签：javascript, jquery, html

我有一个刚刚购买的 jQuery 购物车脚本。很棒，但我需要稍微修改一下。

如您所见，在 JS 代码中设置了自定义属性。现在，“minimum”和“price”是自定义属性，但我会添加“gap”属性。所以我需要的是：

```
1- To be able to set the "quantity gap". By that I mean :
if (custom attribute of the product ul)gap="1"...then when add more of this item, go up by 1 in the shoppping cart

if gap="2"...then go up by 2
if gap="3"...then go up by 3...
and so on. You get the idea. 
```

这是 JSFiddle：http: [//jsfiddle.net/dSj5U/](http://jsfiddle.net/dSj5U/)

我已经复制了整个 Javascript 部分和 HTML 的一部分。所以不要看 HTML 渲染......它只是让你看看它是如何工作的。

这对我们来说非常重要，因为我们正在使用这个购物车进行一个大项目。如果有人可以提供帮助，我们将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:00:17.000

我自己找到了。

我添加了“gap”自定义属性，然后添加：

```
 if(v < settings.productBuyLimit) v += g; 
```

"g" 是 "gap: parseFloat(product.attr('gap'+option))

"v" 是 cart_item.quantity

# html - 地址栏中没有出现挂锁

> ID：10818683
> 
> 赞同：0
> 
> 时间：2012-05-30T14:47:10.503
> 
> 标签：html, https

我已将我的网站（索引页除外）移至根目录上名为 /mcc 的安全文件夹。当我打开页面时，我以为 baddress 栏会更改为 http: 并且会出现一个挂锁，有谁知道为什么不这样做。

谢谢罗斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:48:51.937

当通过 HTTPS 检索页面时会显示挂锁项（并且证书没有任何问题）。

无论您为保护文件夹所做的一切（您没有指定），它似乎都没有包括使用 HTTPS 加载页面。

# ruby-on-rails - Rails 3\. 验证错误时渲染

> ID：10818688
> 
> 赞同：0
> 
> 时间：2012-05-30T14:47:27.070
> 
> 标签：ruby-on-rails, ruby

我有一个表单，用户可以在其中输入发票付款。所以...

```
invoice has_many   :payments
payment belongs_to :invoice 
```

问题是，当出现验证错误时，假设用户没有输入所需的付款日期，我收到此错误...

```
undefined method invoice_number for nil:NilClass
Extracted source (around line #10):
7: 
8: <div class="content-box-content">
9:   <div class="tab-content default-tab" style="display: block; ">     
10:   <h4>Invoice #<%= @invoice.invoice_number %> for <%= @invoice.company.name %></h4>
11:     <p>Invoice Balance $<%= sprintf("%.2f", @invoice.balance) %></p>
12:   </div>
13: </div>

payments_controller.rb
----------------------
def new
  @invoice = Invoice.find(params[:invoice_id])
  @payment = @invoice.payments.build

  respond_to do |format|
    format.html
  end
end

def create
  @payment = Payment.new(params[:payment])
  respond_to do |format|
    if @payment.save
      format.html { redirect_to payments_path, notice: 'Payment was successfully created.' }
    else
      format.html { render action: "new" }
    end
  end
end 
```

所以我知道我必须将@invoice 添加到创建操作中，在`render action: "new"`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T14:55:24.553

只需`@invoice = @payment.invoice`在你做之前添加`format.html { render action: "new" }`，一切都应该工作

```
def create
  @payment = Payment.new(params[:payment])
  respond_to do |format|
    if @payment.save
      format.html { redirect_to payments_path, notice: 'Payment was successfully created.' }
    else
      @invoice = @payment.invoice
      format.html { render action: "new" }
    end
  end
end 
```

为与所管理的操作不同的操作调用渲染只会渲染该操作的*视图*。它不*调用*正在呈现的操作的方法。

换句话说：使用*创建* 操作中指定的变量的`format.html { render action: "new" }`简单加载，甚至从未被触及。结果，该参数不存在，因为您从未在创建操作中定义它。`new.html.erb`*`def new``@invoice`*

# c++ - std::setw() 在我的数组末尾插入一个 \0

> ID：10818690
> 
> 赞同：0
> 
> 时间：2012-05-30T14:47:41.330
> 
> 标签：c++, std, setw

```
input = new char[64]();
std::cout << "wait for cin" << std::endl;
while (std::cin >> std::setw(64) >> input)
{
    std::cout << "input : " << input << std::endl;
    ... 
```

好吧，我向您保证将`setw()`63 个字符复制到`char * input`而不是 64 个，并且我看到第 64 个字符显示在下一次 while(cin) 迭代中。可以覆盖此行为吗？我想要`nul`我的数组中的所有 64 个字符和 NO。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T14:54:49.630

`operator>>(istraem&, char*)`将*始终*写入 nul 字节。

C++2003, 27.6.1.2.3/7（强调添加）：

> 字符被提取和存储，直到发生以下任何情况：
> 
> *   存储 n-1 个字符；
> *   文件结尾发生在输入序列上；
> *   对于下一个可用的输入字符 c，ct.is(ct.space,c) 为真，其中 ct 是 use_facet >(in.getloc())。
> 
> **`Operator>>`然后在下一个位置存储一个空字节**(charT())，如果没有提取字符，这可能是第一个位置。operator>> 然后调用 width(0)。

你几乎可以得到你想要的行为

*   分配一个 65 字节的数组并调用`setw(65)`，或
*   打电话`std::cin.read(input, 64)`。

请注意，这两种解决方案并不相同。Using`std::cin >> input`对待空白的方式与对待空白的方式不同`std::cin.read()`。

# r - 从数据框中删除只有零值的时间序列

> ID：10818701
> 
> 赞同：4
> 
> 时间：2012-05-30T14:48:17.320
> 
> 标签：r, dataframe, data.table, time-series

我有一个数据框，其中包含由唯一 ID 标识的多个时间序列。我想删除任何只有 0 值的时间序列。

数据框如下所示，

```
id   date          value
AAA  2010/01/01    9
AAA  2010/01/02    10
AAA  2010/01/03    8
AAA  2010/01/04    4
AAA  2010/01/05    12
B    2010/01/01    0
B    2010/01/02    0
B    2010/01/03    0
B    2010/01/04    0
B    2010/01/05    0
CCC  2010/01/01    45
CCC  2010/01/02    46
CCC  2010/01/03    0
CCC  2010/01/04    0
CCC  2010/01/05    40 
```

我希望删除任何只有 0 个值的时间序列，以便数据框如下所示，

```
id   date          value
AAA  2010/01/01    9
AAA  2010/01/02    10
AAA  2010/01/03    8
AAA  2010/01/04    4
AAA  2010/01/05    12
CCC  2010/01/01    45
CCC  2010/01/02    46
CCC  2010/01/03    0
CCC  2010/01/04    0
CCC  2010/01/05    40 
```

这是对上一个问题的跟进，该问题使用[data.tables](http://cran.r-project.org/web/packages/data.table/index.html)包得到了非常好的解决方案。

[R有效地从1个数据帧中多个时间序列的开始和结束删除缺失值](https://stackoverflow.com/questions/10811357/r-efficiently-removing-missing-values-from-the-start-and-end-of-multiple-time-se)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T15:48:37.417

如果`dat`是 a `data.table`，那么这很容易写和读：

```
dat[,.SD[any(value!=0)],by=id] 
```

`.SD`代表数据子集。 [这个答案](https://stackoverflow.com/questions/8508482/what-does-sd-stand-for-in-data-table-in-r)解释`.SD`得很好。

了解 Gabor 对 的很好使用`ave`，但不要重复相同的变量名 ( `DF`) 三次，如果您有很多长或相似的变量名，这可能是拼写错误的根源，请尝试：

```
dat[ ave(value!=0,id,FUN=any) ] 
```

这两者之间的速度差异可能取决于几个因素，包括：i）组数 ii）每组的大小和 iii）实数中的列数`dat`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T15:31:44.927

试试这个。不使用任何包。

```
DF[ ave(DF$value != 0, DF$id, FUN = any), ] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T14:57:23.997

一个简单的 `plyr`解决方案是

```
ddply(mydat,"id",function(x) if (all(x$value==0)) NULL else x) 
```

（似乎工作正常）但可能有一个更快的解决方案`data.table`......

# service - c#/.net服务总线使用sql server

> ID：10818704
> 
> 赞同：0
> 
> 时间：2012-05-30T14:48:26.897
> 
> 标签：service, bus

我知道有像 nservicebus 这样的成熟框架，但我想要一个使用 sql server 而不是 msmq/rabbit 的队列。

外面有吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T09:15:26.833

你看过 SQL Server[服务代理](http://msdn.microsoft.com/en-us/library/bb522893%28v=sql.105%29)吗？

我意识到在某个中心位置运行的 SQL 服务器实例永远不会是服务总线。但是，如果不知道您要使用它做什么，就很难推荐任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-05T17:34:40.517

由于我对 DDD、CQRS 和事件溯源感兴趣，因此我从 Microsoft 模式和实践中学习了[CQRS 之旅。](http://msdn.microsoft.com/en-us/library/jj554200.aspx "CQRS之旅")请检查链接。如果您下载 RI（Reference Implementation，基本上是 Demo App）并阅读文章，您将找到完整的“教程”，这实际上是一本书。他们在 Windows Azure 中实现，但幸运的是，他们还包括一个带有自定义 Sql Server 总线的应用程序版本。实现非常酷，即使他们说它不应该在生产中使用我也做到了。并且工作完美。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-17T14:21:02.297

你应该看看 ReBus。我已经将它与 SQL Server 一起使用并且工作正常。

[https://github.com/rebus-org/Rebus](https://github.com/rebus-org/Rebus)

# ruby-on-rails-3 - 在 Rails3/Heroku Cedar 部署中重复运行后台脚本

> ID：10818709
> 
> 赞同：0
> 
> 时间：2012-05-30T14:48:43.840
> 
> 标签：ruby-on-rails-3, heroku

我正在开发一个 Rails3 应用程序，它将在 Heroku Cedar 堆栈上运行，并且需要不断检查某个主题标签下的新推文。我有执行此操作的逻辑，但我想在后台运行此任务，以免干扰主应用程序的性能。我还需要将找到的任何新推文写入数据库，因此我需要访问 Active Record。我正在寻找实现这一目标的最佳方法的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:54:14.267

我做了类似的事情，如果推文稍微过时对我来说并不重要 - 我们使用调度程序执行 10 分钟的 rake 任务，该任务正在观看主题标签。如果我们觉得 10 分钟太频繁，我们可以将执行频率更改为每小时/每天。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T21:57:45.547

您可以使用[Heroku 调度程序](https://devcenter.heroku.com/articles/scheduler)定期执行 Rake 任务（或其他脚本）。

或者，如果您正在检查 Tweets 以响应某个用户操作或其他事件，您可以使用像[Delayed Job](https://devcenter.heroku.com/articles/delayed-job)这样的任务队列。

# c++ - 如何找出特定 Boost 库需要哪些依赖项（即其他 Boost 库）？

> ID：10818717
> 
> 赞同：13
> 
> 时间：2012-05-30T14:49:03.677
> 
> 标签：c++, boost

对于任何 C++ Boost 库，如何找出它需要哪个 Boost 库？

示例（虽然不一定是工作示例）：Boost 库“test”需要 Boost 库“date_time”。

问候，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T15:04:32.967

boost 附带了一个工具来收集库的依赖项。

它被称为[bcp](http://www.boost.org/doc/libs/1_49_0/tools/bcp/doc/html/index.html)。如果您只需要文件列表，则必须使用 --list 选项。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-30T15:08:34.213

如果您想找出这些依赖项以隔离您的软件所需的组件，您可以使用[bcp](http://www.boost.org/doc/libs/1_49_0/tools/bcp/doc/html/index.html) (Boost Copy)

它将选定的 boost 库及其所有依赖项复制到目标位置。

例如

```
bcp regex /foo 
```

`regex`将完整的库及其依赖项复制到`/foo`

免责声明：我对 bcp 没有任何实际经验。

编辑：如果您只想检查编译库依赖于哪个编译库，您可以`ldd <boost_library_filename>.so`在 Linux 上使用或在 Windows 上使用[Dependency Walker 。](http://dependencywalker.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-02T11:02:17.670

现代解决方案是使用[boost Dependency Report](https://pdimov.github.io/boostdep-report/)（从 boost v1.66.0 开始提供）。

# matlab - 主成分分析

> ID：10818718
> 
> 赞同：5
> 
> 时间：2012-05-30T14:49:05.750
> 
> 标签：matlab, pca, princomp

我必须编写一个用于人类动作识别的分类器（高斯混合模型）。我有 4 个视频数据集。我选择其中 3 个作为训练集，其中 1 个作为测试集。在我将 gm 模型应用于训练集之前，我在其上运行 pca。

```
pca_coeff=princomp(trainig_data);
score = training_data * pca_coeff;
training_data = score(:,1:min(size(score,2),numDimension)); 
```

在测试步骤中我应该做什么？我应该对测试数据执行新的 princomp

```
new_pca_coeff=princomp(testing_data);
score = testing_data * new_pca_coeff;
testing_data = score(:,1:min(size(score,2),numDimension)); 
```

或者我应该使用我为训练数据计算的 pca_coeff？

```
score = testing_data * pca_coeff;
testing_data = score(:,1:min(size(score,2),numDimension)); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T15:50:15.560

分类器正在由训练数据的主要组成部分定义的空间中的数据上进行训练。在不同的空间中评估它是没有意义的 - 因此，您应该对测试数据应用相同的转换，就像对训练数据所做的那样，所以不要计算不同的`pca_coef`.

顺便说一句，如果您的测试数据是从与训练数据相同的分布中独立提取的，那么对于足够大的训练和测试集，主成分应该大致相同。

选择使用多少主成分的一种方法是检查 PCA 分解中的特征值。您可以像这样从 princomp 函数中获取这些：

```
[pca_coeff score eigenvalues] = princomp(data); 
```

然后，该`eigenvalues`变量将是一个数组，其中每个元素都描述了相应主成分所解释的方差量。如果你这样做：

```
plot(eigenvalues); 
```

您应该看到第一个特征值将是最大的，并且它们会迅速减小（这称为“Scree Plot”，应该如下所示：http: [//www.ats.ucla.edu/stat/SPSS/output /spss_output_pca_5.gif](http://www.ats.ucla.edu/stat/SPSS/output/spss_output_pca_5.gif)，虽然你的可能有多达 800 分而不是 12）。

具有较小相应特征值的主成分不太可能有用，因为这些维度中数据的方差非常小。许多人选择一个阈值，然后选择特征值高于该阈值的所有主成分。选择阈值的一种非正式方法是查看 Scree 图并选择阈值就在“水平”线之后 - 在我之前链接的图像中，一个好的值可能是 ~0.8，选择 3 或 4 个主成分.

IIRC，您可以执行以下操作：

```
proportion_of_variance = sum(eigenvalues(1:k)) ./ sum(eigenvalues); 
```

计算“低维数据描述的方差比例”。

但是，由于您将主要组件用于分类任务，因此您无法确定任何特定数量的 PC 是最优的；一个特征的方差并不一定能告诉你它对分类有多大用处。使用 Scree 图选择 PC 的另一种方法是尝试使用不同数量的主成分进行分类，并根据经验查看最佳数量。

# iphone - ARC奇怪的行为

> ID：10818720
> 
> 赞同：0
> 
> 时间：2012-05-30T14:49:15.487
> 
> 标签：iphone, objective-c, ios, automatic-ref-counting

启用 ARC 后，我有一个属性

```
 @property (strong, nonatomic) NSMutableArray *arr; 
```

我将其分配为

```
 self.arr = [NSMutableArray array]; 
```

我有一个自定义对象 ERSearchView，我分配它并将其添加到 arr

```
 ERSearchView *SV = [[ERSearchView alloc] initWithDelegate:nil];
  [arr addObject:SV]; 
```

在我的搜索视图中，我已经覆盖了该`dealloc`方法，因为似乎搜索视图没有被释放：

```
- (void)dealloc {
  self.delegate = nil;
  NSLog(@"deallocated search view");
} 
```

当我弹出视图控制器时，它不会被调用。但是，如果我在视图控制器中将 arr 变量设为 nil，`dealloc`我会看到搜索视图已被删除的日志消息。

任何人都可以解释为什么内部`arr`的对象没有被释放，尽管视图控制器是 100% 释放的，因为我在其中有“dealloc”消息`dealloc`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:52:10.637

基础集合类，如`NSArray`,`NSDictionary`等，保留（或对 ARC 语言中的强引用）它们包含的对象。所以只要数组没有被释放，它引用的对象，包括你的视图实例，应该仍然在内存中。

听起来好像您之前通过未`nil`在控制器的`dealloc`方法中设置属性来泄漏数组。当一个对象将一个属性声明为`strong`时，它负责在其`dealloc`实现中取消引用以避免这种泄漏。

# javascript - KML 图层无法正确切换，谷歌地图

> ID：10818727
> 
> 赞同：0
> 
> 时间：2012-05-30T14:49:32.997
> 
> 标签：javascript, google-maps-api-3, toggle, kml, layer

我正在使用 Google Maps API 和 KML 创建交互式校园地图。我有一张带有地面叠加层和一层 KML 标记的地图。我试图弄清楚如何让 KML 层切换。我目前将其设置为通过复选框进行切换，但仅在您第一次单击复选框时才会关闭。任何后续点击都不会执行任何操作。KML 层就消失了。我有一种感觉，这可能是一个简单的 javascript 修复程序，但我是 javascript 新手，我无法弄清楚。有人知道我在做什么错吗？在此先感谢您的帮助。

这是我的所有代码：

```
<script type="text/javascript">
  function initialize() {

  var map;
  var omaha = new google.maps.LatLng(41.265437, -95.947405);

  var MY_MAPTYPE_ID = 'blue';

  var stylez = [
    {
      featureType: "all",
      stylers: [
        { hue: "#004A96" },
      ]
    },
    {
      featureType: "all",
      elementType: "labels",
      stylers: [
        { hue: "#000000" },
      ]
    },
        {
      featureType: "road",
      elementType: "local",
      stylers: [
        { hue: "#24356B" },
        { saturation: 55 },
        { lightness: 20 }
      ]
    },
    {
      featureType: "poi.school",
      elementType: "geometry",
      stylers: [
        { hue: "#24356B" },
        { saturation: 55 },
        { lightness: 20 }
      ]
    }
  ];

  var imageBounds = new google.maps.LatLngBounds(
      new google.maps.LatLng(41.2599,-95.9601),
      new google.maps.LatLng(41.2718,-95.9367));

  var mapOptions = {
    zoom: 15,
    center: omaha,
    mapTypeControlOptions: {
        mapTypeIds: [google.maps.MapTypeId.ROADMAP, MY_MAPTYPE_ID]
    },
    mapTypeId: MY_MAPTYPE_ID
  };

  var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

  var styledMapOptions = {
    name: "Blue"
  };

  var jayzMapType = new google.maps.StyledMapType(stylez, styledMapOptions);

  map.mapTypes.set(MY_MAPTYPE_ID, jayzMapType);

  var oldmap = new google.maps.GroundOverlay(
      "http://www.mcography.com/beta/CampusMap.png",
      imageBounds);
  oldmap.setMap(map);

  var kmlLayer01URL = 'http://www.mcography.com/beta/CUADA.kml';
  var kmlOptions = {
            preserveViewport: 1
    };
    kmlLayer01 = new google.maps.KmlLayer(kmlLayer01URL, kmlOptions);
    kmlLayer01.setMap(map); 
    // initially show KML Layer 01
    document.getElementById('show_hide_KML_Layer_01').checked = true; 

}

function toggleKMLLayer01() {
    if (!document.getElementById('show_hide_KML_Layer_01').checked)
      kmlLayer01.setMap(null);
    else
      kmlLayer01.setMap(map); }

</script>
</head>

<body onload="initialize()">

    <p><input type="checkbox" id="show_hide_KML_Layer_01" onclick="toggleKMLLayer01();" />ADA Layer</p> 
    <div id="map_canvas"></div>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:02:26.947

如果没有你的代码的顶部，我不能完全确定，但我的直觉是你需要使变量`map`全局，否则`toggle`不会。我写了以下内容，它有效：`setMap``map`

```
 var map;

  function initialize() {
    var mapOptions = { center: new google.maps.LatLng(0.0, 0.0), zoom: 2,
      mapTypeId: google.maps.MapTypeId.ROADMAP };

    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    var kmlLayer01URL = 'http://www.mcography.com/beta/CUADA.kml';
    var kmlOptions = {
      preserveViewport: 1
    };
    kmlLayer01 = new google.maps.KmlLayer(kmlLayer01URL, kmlOptions);
    kmlLayer01.setMap(map); 
    // initially show KML Layer 01
    document.getElementById('show_hide_KML_Layer_01').checked = true; 
  }

  function toggleKMLLayer01() {
    if (!document.getElementById('show_hide_KML_Layer_01').checked)
      kmlLayer01.setMap(null);
    else
      kmlLayer01.setMap(map); 
  } 
```

# asp.net-mvc - 元数据集合中不存在身份为“ ”的成员。\r\n参数名称: 身份

> ID：10818730
> 
> 赞同：12
> 
> 时间：2012-05-30T14:49:37.827
> 
> 标签：asp.net-mvc, linq, ado.net

我在尝试调试时简化了代码：

```
[HttpPost]
    public ActionResult Register(User model)
    {
        DateTime bla = new DateTime(2012, 12, 12);
        try
        {
            User user = new User
            {
                gid = 1,
                cid = 1,
                firstName = model.firstName,
                lastName = model.lastName,
                email = model.email,
                username = model.username,
                password = model.password,
                creationDate = bla,
                active = 1
            };
            myContext.Users.AddObject(user);
            myContext.SaveChanges();

        }
        catch (Exception ex)
        {
            throw ex;
        }

        return View();               
    } 
```

相应地传输这些值。用户表：

```
[id] [int] IDENTITY(1,1) NOT NULL,
[cid] [int] NULL,
[gid] [int] NULL,
[firstName] [nvarchar](100) NOT NULL,
[lastName] [nvarchar](100) NOT NULL,
[email] [nvarchar](max) NOT NULL,
[username] [nvarchar](100) NOT NULL,
[password] [nvarchar](100) NOT NULL,
[creationDate] [datetime] NOT NULL,
[active] [int] NOT NULL, 
```

约束 [PK_*用户*_3213E83F0AD2A005] 主键集群

我删除了所有外键以确保没有任何影响。我很确定它在前一刻可以正常工作，但现在我无法弄清楚问题出在哪里。它在执行 savechanges 时崩溃：

```
{"An error occurred while updating the entries. See the inner exception for details."}
{"The member with identity '' does not exist in the metadata collection.\r\nParameter name: identity"} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-02-15T23:34:49.617

当我尝试使用 EF 插入时，我遇到了同样的错误，错误是

`The member with identity 'Id' does not exist in the metadata collection.\r\nParameter name: identity`

一开始并不明显，但异常消息非常简洁，因为我的数据库知道该列`Id int`，但在我的代码上为对象创建的属性`int ID`如此回到命名映射，Id 未映射到 ID。

所以当一个带有属性的对象`ID`被发送到只知道你的数据库时，`Id`你会得到上述错误。

我希望这会有所帮助，谢谢

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-31T08:49:01.017

由于用户表上的触发器，问题正在重现。删除它，问题不再重现。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-08-17T22:39:01.160

正在更新的表上可能有一个触发器并返回输出。输出被丢弃，但与 EF 冲突。此类输出通常用于调试触发器（后来忘记删除）：

```
select 'trigger called, i am here' 
```

或者可能缺少变量：

```
select column 
```

代替

```
select @variable=column 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-07-28T09:27:22.433

我认为最好的解决方案在[这篇](http://social.msdn.microsoft.com/Forums/fr-FR/feafbddc-4fda-4191-a3c1-0890226aec0c/the-member-with-identity-does-not-exist-in-the-metadata-collection?forum=adodotnetentityframework)文章中。我使用了第三个选项并且有效。在这里，我报告了链接中的回复：

> 该问题可能与您的一张表上的“而不是插入”触发器有关。
> 
> EF 框架通过调用 scope_identity() 对插入的数据行执行验证。但是，“代替插入”触发器将更改插入的上下文，以使 EF 系统对 scope_identity 的调用将返回 null。
> 
> 解决这个问题的几种方法：
> 
> 1.  使用存储过程插入数据（未测试）
> 2.  删除而不是插入触发器（触发器可能会导致其他问题，因此有些人认为不要使用它们）（经过测试，有效！）
> 3.  关闭 EF 框架中的验证，因此： context.Configuration.ValidateOnSaveEnabled = false （已测试，有效！）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-31T03:47:31.327

我今天遇到了同样的错误，花了几个令人沮丧的时间试图弄清楚。

我正在使用 Entity Framework 将带有标识列的记录插入到 SQL Server 数据库表中。很简单。

该表上有一个触发器，该触发器又运行一个存储过程。存储过程中有一行：

```
select newid() 
```

这是破坏实体框架的线。

对于具有标识列的表，Entity Framework 期望返回具有单个字段的单行，即标识列。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-31T23:19:28.170

有时候，我讨厌 M$。

*元数据集合中不存在身份为“ChangeID”的成员。参数名称：身份*

我花了两天时间试图解决这个问题。

我正在使用 MVC。

为了一举获得我需要的所有数据，我为此应用程序创建了数据库中表的视图，以及其他数据库中的表。（您可以更新视图，但有一些限制。）

我做了一个获取，我的所有数据都存在于记录、键、描述、外键等中。

我在视图上创建了触发器，以更新来自本地表的视图部分。

而不是删除工作正常。而不是更新工作正常。

这个错误一直引起人们的注意，而不是插入。我无法让插入触发器成功插入到我的表中。如果我在视图上运行插入，并使用 SQL Management Studio 中提供的所有字段，它工作正常。我知道传递的确切值，因为我运行 SQL Server Profiler 来查看传递的代码。

但是当应用程序尝试更新时，它失败了*身份为“ChangeID”的成员在元数据集合中不存在。*

上面的线索，有人说，“MVC期望表键是***ID*** ”

在我看来，我将 ChangeID 重命名为 ID，在 App 中进行了更改，然后 BAM！现在它起作用了。

什么没有奏效：

*   db.Configuration.ValidateOnSaveEnabled = false;
*   向触发器添加选择以获取范围标识

为什么我必须修改我的数据库或视图以满足一些隐藏的 M$ 假设？

尽管如此，在令人沮丧的两天之后，代码现在可以工作了。也许这也会为其他人节省一些时间。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-30T15:46:47.690

试试这个

```
[HttpPost]
public ActionResult Register(User model)
{
    DateTime bla = new DateTime(2012, 12, 12);
    try
    {
        model.gid = 1;
        model.cid = 1;
        model.creationDate = bla;
        model.active = 1;

        myContext.Users.AddObject(model);
        myContext.SaveChanges();

    }
    catch (Exception ex)
    {
        Console.WriteLine(ex);
        throw;
    }

    return View();               
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-23T14:01:57.110

我遇到了这个问题，我的解决方法是在我的连接字符串元数据中我没有以 .msl 格式指定我的模型。

[在此处查看更多信息](https://msdn.microsoft.com/en-us/library/bb399604(v=vs.100).aspx)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-11-05T19:10:27.323

这是因为如果您使用触发器，则触发器将值传回给 EF。在我的问题中，我必须通过从其他表中选择来检查一个值，并在 EF 中使用“选择”导致错误，因此您必须将“选择”替换为“设置”。你不能使用这个代码。

```
select @any= any from tablename 
```

**你应该使用 set 而不是 select**

```
set @any= (select any from tablename) 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-11-24T19:08:52.490

这是当我搜索产生此错误消息的问题版本的解释时，Google 返回的第一页，因此我将在此处提及它，以及解决方案对我来说是什么。

在我的问题版本中，有问题的代码如下所示：

```
 foreach (var comp in colorstyle.Companions)
        comp.LinkCS = db.ColorStyles.Find(comp.LinkColorStyleId); 
```

我继承了维护和支持包含此代码的应用程序的工作。此代码将导航属性设置为已经相关的实体，使用同一对象的关联外键属性作为查找。这是完全没有必要的，有时似乎......并不总是......产生这个错误：

“元数据集合中不存在身份为'Customization_ColorStyleCustomizations_Source'的成员。参数名称：身份”

这是一个相当错误的信息，不是吗。

两年来，这段代码一直没有抛出任何错误，然后突然有一天，它开始为某些颜色样式产生这个错误。/摇。我不明白。但这不是必须的，拿出来解决问题，所以。以防万一其他人遇到同样的一般问题，就在这里。

（如果不清楚 - 在这种情况下，解决方案只是删除代码。）

# c# - 绑定到 DropDownList 时出错

> ID：10818731
> 
> 赞同：0
> 
> 时间：2012-05-30T14:49:38.077
> 
> 标签：c#, asp.net

我有一个查询 CRM 2011 然后将结果绑定到 DropDownList 的方法，这是我的代码：

```
 public void CheckRsmPopulateAccounts()
    {

            string rsmFirstName = _currentUser.FirstName;
            string rsmLastName = _currentUser.LastName;

            ddlCustomer.DataSource = (from r in gServiceContext.CreateQuery("opportunity")
                             join c in gServiceContext.CreateQuery("account") on ((EntityReference)r["accountid"]).Id equals c["accountid"]
                             join u in gServiceContext.CreateQuery("systemuser") on ((EntityReference)r["ownerid"]).Id equals u["systemuserid"]
                             where u["firstname"].Equals(rsmFirstName) && u["lastname"].Equals(rsmLastName)
                             select new
                             {
                                 AccountId = !r.Contains("accountid") ? string.Empty : r["accountid"],
                                 Account = !c.Contains("name") ? string.Empty : r["name"]
                             });

            ddlCustomer.DataValueField = "AccountId";
            ddlCustomer.DataTextField = "Account";
            ddlCustomer.DataBind();

    } 
```

但由于某种原因，它一直给我一个`Exception has been thrown by the target of an invocation.`错误，它看起来像`DataBind`命令。我似乎无法弄清楚这个问题，这个错误似乎很笼统。知道是什么原因造成的吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:50:53.323

`select new {}`创建一个匿名类型。您不能枚举匿名类型化对象。

`.ToList()`在您的 linq 末尾添加

还要检查你的 Linq 是否真的在返回一些东西，并确保你没有任何返回的列`null`

# .net - 是否使用 .net 需要的 Oracle 持久连接来维护会话？

> ID：10818733
> 
> 赞同：2
> 
> 时间：2012-05-30T14:49:40.727
> 
> 标签：.net, oracle, connection-pooling, odp.net

我正在使用 ODP.NET 使用 Oracle 编写 ASP.NET 应用程序来执行任何 DML，打开一个新连接并执行一个查询，这些都可以正常工作。我的问题是我正在编写包并且需要保存一些类似于以下内容的记录：

```
pkg_name.putdata(param1,param2,......)
pkg_name.save() 
```

使用`pkg_name.putdata(param1,param2,......)`，这个方法是用Oracle编写的，我需要初始化包属性并用于`pkg_name.save()`在Oracle数据库中插入数据，

当我调用`save()`after`putdata()`时，我无法在我的包变量中找到任何数据。

使用持久连接会解决这个问题吗？我还想使用 Oracle 临时表来存储会话信息，直到用户注销。

请建议我如何完成这项任务或让我参考指南。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T22:09:36.177

您要么需要使用相同的连接而不关闭它，要么需要将两个语句作为一个批处理一起执行： [http ://www.brothersincode.com/post/executing-SQL-Plus-Batches-from-Net .aspx](http://www.brothersincode.com/post/executing-SQL-Plus-Batches-from-Net.aspx)

# javascript - 如何开始使用 jQuery Mobile？（程序员背景）

> ID：10818734
> 
> 赞同：0
> 
> 时间：2012-05-30T14:49:40.790
> 
> 标签：javascript, jquery, mobile

我有 C++/C# 和 Java (Android) 的背景。现在，我想选择在我看来是移动 Web 应用程序的最佳解决方案：jQuery Mobile。

我知道 HTML/DOM/CSS 的一些非常基础的知识，但不是以结构化/彻底的方式。Javascript 方面，这似乎是一种与我习惯的编程方法截然不同的编程方法。

你建议我从哪里开始？Javascript（可能还有 Ajax）或 jQuery，或者我是否可以立即开始使用 jQuery mobile？另外，你能推荐我一些好的学习/示例资源吗？

先感谢您。

-托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:17:48.553

jQuery mobile 是一个使用 jQuery 编写的插件，用于增强 html5 元素的外观和行为以匹配 iPhone 设计模式的应用程序行为（渐进增强）。

虽然开始填充 jQMobile 作为 C# 开发人员提供的模板相当容易，但您需要了解使用 JavaScript 和 jQuery 有一些显着差异。

jQuery 是社区必需品，基本上只是 JavaScript 之上的一个抽象层，用于解决程序员面临的困难，这主要与不同浏览器中 JavaScript 实现的差异以及 DOM 的弱点有关允许 JavaScript 访问文档中的元素。

jQ 基本上所做的是它为您处理这些差异并向您公开方法，这些方法几乎可以保证在受支持的浏览器中提供相同的结果。

这将极大地帮助您入门，但不会让您了解您来自的世界和您正在进入的世界之间的根本差异。

JS 没有类只有函数。然而，函数可以有方法并被实例化。js中的继承是Prototypal Inheritance。

```
new f() 
```

产生一个继承自的新对象

```
f.prototype 
```

[更多信息在这里](http://javascript.crockford.com/prototypal.html)

在使用它之前学习基础知识并了解更多关于这种语言的信息！[也请看这个](http://www.youtube.com/watch?v=hQVTIJBZook)

# silverlight - 如何使用 VML SimpleIoc 实例化视图模型？

> ID：10818735
> 
> 赞同：0
> 
> 时间：2012-05-30T14:49:43.770
> 
> 标签：silverlight, windows-phone-7, mvvm, ioc-container, mvvm-light

所以基本上我需要直接从另一个 viewmodel 实例化一个 viewmodel，我正在使用 MVVMLight，人们说我可以使用 MVVMLight ViewModelLocator 来做到这一点，我在我的源 ViewModel A 上尝试了这行代码，以实例化目标 ViewModel B

```
SimpleIoc.Default.GetInstance<BViewModel>(); 
```

没有用，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:22:48.473

如果我理解正确，您需要在 View B 的构造函数中使用您的代码，如下所示：

```
this.DataContext = SimpleIoc.Default.GetInstance<BViewModel>(); 
```

这样，您的视图与 BViewModel 的实例相结合，在您的示例中，您只是在实例化它。

您可以在此处找到有关构建 ViewModel 和 View 的更多信息：

[http://msdn.microsoft.com/en-us/library/gg405484(v=pandp.40).aspx#sec17](http://msdn.microsoft.com/en-us/library/gg405484(v=pandp.40).aspx#sec17)

但我确实对 WP7 编程有一些经验，并建议从 View 的构造函数中使用 IOC Container。这是因为您传递的参数将使用 WP7 页面的标准导航方法推送到您的视图中。

# jquery - 为什么我使用 jQuery hasClass() 的代码不起作用？

> ID：10818739
> 
> 赞同：0
> 
> 时间：2012-05-30T14:49:48.140
> 
> 标签：jquery

我在我的脚本中使用 hasClass 方法，但它没有按我想要的方式工作。我的 HTML 表格看起来像这样

```
<table id="sort">
            <tr class="nodrag nodrop">
                <td colspan=3><strong><a style="cursor:pointer;" class="toggle">Group 1</a></strong></td>
                <td style="text-align: right;"><a class="button3" href="#" ><span> Edit </span></a> <a class="button3" href="#" ><span> Delete </span></a></td>
            </tr>
            <tr id="1" class="tr_group" style='display:none;'>
                <td style="width:10px;" class="dragHandle">&nbsp;</td>
                <td><a href=# style="margin-left: 20px;">Umair Iqbal</a></td>
                <td><span style="font-size: 12px; color: #999; line-height: 100%;">A Student at TUM</span></td>
                <td style="text-align: right;"><a class="button3" href="#" ><span> Edit </span></a> <a class="button3" href="#" ><span> Delete </span></a></td>
            </tr>
            <tr id="2" class="tr_group" style='display:none;'>
                <td style="width:10px;" class="dragHandle">&nbsp;</td>
                <td><a href=# style="margin-left: 20px;">Faryal Khan</a></td>
                <td><span style="font-size: 12px; color: #999; line-height: 100%;">A Doctor at KMC</span></td>
                <td style="text-align: right;"><a class="button3" href="#" ><span> Edit </span></a> <a class="button3" href="#" ><span> Delete </span></a></td>
            </tr> 
</table> 
```

我的脚本如下

```
 <script type="text/javascript">
        $(document).ready(function() {
            // $('#sort tr:even').addClass('alt');
            $('#sort').tableDnD({
                onDrop: function(table, row) {
                  alert(row.id);
                },
                dragHandle: ".dragHandle"
            });
            $("#sort tr").hover(function() {
                if($('#tr').hasClass('tr_group')) 
                {
                    $(this.cells[0]).addClass('showDragHandle');
                    }, function() {
                    $(this.cells[0]).removeClass('showDragHandle');
                }
            });
        });
 </script> 
```

它没有将类 showDragHandle 添加到悬停效果具有类“tr_group”的行中

我做错了什么有什么建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:51:24.227

您的选择器不正确，您使用哈希来指示和**id**。此外，您还使用不正确的元素表示法为您的类添加前缀。

这个

```
if($('#tr').hasClass('tr_group')) 
```

应该：

```
if($('tr').hasClass('group')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:52:45.767

代替：

```
$(this.cells[0]) 
```

利用：

```
$('.dragHandle', $(this)) 
```

也改变：

```
$('#tr') 
```

至：

```
$('tr') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:53:41.413

改变

`if($('#tr').hasClass('tr_group'))`

至

`if($(this).hasClass('tr_group'))`

因为您已经在遍历 trs 列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T14:52:01.640

在 内`.hover`，您应该问：

```
if ( $(this).hasClass("tr_group") ) 
```

或者您可以仅响应`tr`具有该类的那些元素：

```
$("#sort").on({
    mouseenter: function(){
        $("td:first", this).addClass("showDragHandle");
    },
    mouseleave: function(){
        $("td:first", this).removeClass("showDragHandle");
    }
}, "tr.tr_group"); 
```

`tr`当您只能响应您要定位的元素时，无需执行 if 语句。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T14:52:10.057

没有 ID 为的元素`tr`

你可能想要：

```
if ($(this).hasClass('group')) 
```

# c - 使用 MPI 优雅退出

> ID：10818740
> 
> 赞同：3
> 
> 时间：2012-05-30T14:49:49.213
> 
> 标签：c, mpi, abort

如果 Rdinput 返回错误，我正试图优雅地退出我的程序。

```
#include <mpi.h>
#include <stdio.h>
#include <stdlib.h>

#define MASTER 0
#define Abort(x) MPI_Abort(MPI_COMM_WORLD, x)
#define Bcast(send_data, count, type) MPI_Bcast(send_data, count, type, MASTER, GROUP) //root --> MASTER
#define Finalize() MPI_Finalize()

int main(int argc, char **argv){

  //Code

  if( rank == MASTER ) {
    time (&start);
    printf("Initialized at %s\n", ctime (&start) );      
    //Read file
    error = RdInput();
  }

  Bcast(&error, 1, INT); Wait();

  if( error = 1 ) MPI_Abort(1);

  //Code

  Finalize();
} 
```

程序输出：

```
mpirun -np 2 code.x 
--------------------------------------------------------------------------
MPI_ABORT was invoked on rank 0 in communicator MPI_COMM_WORLD 
with errorcode 1.

NOTE: invoking MPI_ABORT causes Open MPI to kill all MPI processes.
You may or may not see output from other processes, depending on
exactly when Open MPI kills them.
--------------------------------------------------------------------------
Initialized at Wed May 30 11:34:46 2012
Error [RdInput]: The file "input.mga" is not available!
--------------------------------------------------------------------------
mpirun has exited due to process rank 0 with PID 7369 on
node einstein exiting improperly. There are two reasons this could occur:

//More error message. 
```

我可以做些什么来优雅地退出 MPI 程序而不打印这个巨大的错误消息？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-30T15:53:28.647

如果您的代码中有此逻辑：

```
Bcast(&error, 1, INT);
if( error = 1 ) MPI_Abort(1); 
```

那么你就完成了（尽管在广播之后你不需要任何等待）。正如您所发现的那样，诀窍是*不*`MPI_Abort()`“优雅”。当出现严重错误时，它基本上可以以任何可能的方式关闭事物。

 *在这种情况下，既然现在每个人都同意广播后的错误代码，只需优雅地结束您的程序：

```
 MPI_Bcast(&error, 1, MPI_INT, MASTER, MPI_COMM_WORLD);
   if (error != 0) {
       if (rank == 0) {
           fprintf(stderr, "Error: Program terminated with error code %d\n", error);
       }
       MPI_Finalize();
       exit(error);
   } 
```

调用`MPI_Finalize()`并继续使用更多 MPI 内容是错误的，但这不是你在这里所做的，所以你很好。*

# java - 确定给定 IP 是否为 Web 主机

> ID：10818741
> 
> 赞同：1
> 
> 时间：2012-05-30T14:49:49.823
> 
> 标签：java, networking, ip

我目前正在为大学更新一个项目。有问题的程序访问 IP 地址并确定 IP 是否托管网站。该系统的目标是确定网络的大小（分布在可用系统中，上次运行耗时 2.5 个月）。

当前的目标是尝试减少为 IP 做出准确决策所需的时间，但我无法改进这一点。目前，以下是主要的测试来源（当然还有额外的逻辑）：

```
Socket s = new Socket();
s.connect(new InetSocketAddress(address, 80), timeout); 
```

我主要寻求/寻求帮助的是，是否有更快的方法来确定 IP 是否托管网站，同时保持准确。当前系统使用 30 秒的超时值，因此大量 IP 地址检查需要这 30 秒，因为许多 IP 不托管网站。任何指向 Java 库或算法论文的帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:53:16.397

当然，您是在并行执行此操作，即在尝试另一个套接字之前不阻塞 30 秒？

您可以同时打开的套接字数量是有限制的，但您应该能够同时打开至少 100 个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:01:28.527

确定主机是否愿意在给定端口上为您提供网页的唯一可靠方法是请求它，这总是会导致打开 TCP 套接字并发送 HTTP GET-Request。但是，您可以使用 NMAP [http://nmap.org/](http://nmap.org/)中的技术（和 c 库）来有效地检测 :80 处是否存在 TCP-Endpoint。当然，您可以调整您的程序以同时检查数千个主机，每个公共 IP ...

但是请注意，您的整个方法只能在端口 80 上提供*非常*模糊的网络服务器数量，仅此而已。每个 http 主机还有其他端口、加密 (SSL) 和多个网站会影响您的测量。并且不要忘记有 IPv4 和 IPv6。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T16:47:46.467

正如昨天建议的那样，Nmap 绝对是一个不错的选择。如果您选择走这条路，sourceforge.net 上有一个名为 Nmap4j 的 Java 包装库，它应该可以更容易地集成到 Java 程序中。

干杯!

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-30T15:06:06.477

这里是所有端口的列表：

```
http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers 
```

我做的第一件事是限制端口搜索范围。
然后我尝试使用“正常”端口（80、8080、443，...）。等待秒数无法限制。

# jquery - div之间的IE8空间正在缩小

> ID：10818744
> 
> 赞同：0
> 
> 时间：2012-05-30T14:50:16.507
> 
> 标签：jquery, css, internet-explorer-8

我有一个使用 div 构建的菜单，每个部分由 2 个 div（标题和内容）组成。单击标题时内容会折叠或展开，但在 IE8 上，在展开和折叠部分后，部分 div 之间的空间正在缩小。IE9、Chrome 和 Firefox 正确显示所有内容

[这](http://snag.gy/Lcvhb.jpg)就是它的外观，第一部分正确显示，其下方的空间，但在其余部分空间被缩小

奇怪的是，如果我调整窗口大小，一切看起来又好[了](http://snag.gy/TLTwF.jpg)

[这](http://pastebin.com/YLD4ZgvA)是我正在使用的代码示例，[这](http://jsfiddle.net/pollirrata/YUGST/3/)是 jsfiddle

我希望有人解决了同样的问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:03:32.270

试试这个代码：

这里有一个问题的解释：

[http://jqueryfordesigners.com/animation-jump-quick-tip/](http://jqueryfordesigners.com/animation-jump-quick-tip/)

实际上，将每对标题和内容元素包装在一个包含的 div 中，然后将填充应用到它的底部。在 IE7、IE8、FF 和 Chrome 中测试

```
 <!doctype html>
<html>
    <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
    $(document).ready(function(){
        $(".menu-section-content").hide();
        $(".menu-section-title").click(function() {
            var theHeight = $(this).height();
            $(this).css('height', theHeight);
            $(this).next(".menu-section-content").slideToggle(600);
            $(this).toggleClass('collapse');
        });
    });
    </script>

    <style>
        div.menu-section-content
        {
            border: 1px solid #777;
            border-top: none;
            padding: 10px;
            margin-left: 5px;
            background-color: #ffffff;
        }
        div.menu-section-title
        {
            font-size: 100%;
            border: solid 1px #777777; /*border-radius: 5px 0px 0 0;*/
            background-color: #A9C3C4;
            color: #fff;
            font-weight: 500;
            margin-left: 5px;
            cursor: pointer;
            clear: both;
            padding: 5px;

        }
        .expand
        {
            background-image: url('http://upload.wikimedia.org/wikipedia/commons/1/1a/Silk_bullet_arrow_up.png');
            background-repeat: no-repeat;
            background-position: right center;
        }
        .collapse
        {
            background-image: url('http://souper-spices.com/wp-content/themes/shopperpress/template_shopperpress/images/langs/arrow.png');
            background-repeat: no-repeat;
            background-position: right center;
        }

        .container {
            padding-bottom: 10px;
        }

    </style>
    </head>

    <body>
    <div class="container">
    <div class="menu-section-title expand">
    title
    </div>

    <div class="menu-section-content">
        options
    </div>

    </div>

    <div class="container">
    <div class="menu-section-title expand">
    title
    </div>

    <div class="menu-section-content">
        options
    </div>
    </div>

    <div class="container">
    <div class="menu-section-title expand">
    title
    </div>

    <div class="menu-section-content">
        options
    </div>
    </div>

    <div class="container"> 
    <div class="menu-section-title expand">
    title
    </div>

    <div class="menu-section-content">
        options
    </div>
    </div>

    </body>
</html> 
```

# c# - 正则表达式转义问号和双引号

> ID：10818745
> 
> 赞同：2
> 
> 时间：2012-05-30T14:50:20.800
> 
> 标签：c#, regex, escaping

我有几个出现以下字符串的数据：

```
<a href="default.asp?itemID=987"> 
```

其中 itemID 总是不同的。我正在使用 C#，我想用正则表达式获取所有这些 itemID。

起初我试过这个

```
"<a href=\"default.asp?itemID=([0-9]*)\">" 
```

但问号是保留字符。我考虑使用 @ 运算符来禁用字符转义。但是仍然有一些双引号确实需要转义。所以我会去

```
"<a href=\"default.asp\\?itemID=([0-9]*)\">" 
```

应将其翻译（作为字符串）为

```
<a href="default.asp\?itemID=([0-9]*)"> 
```

但是 Regex.Match 方法没有成功。[我在这里](http://www.regular-expressions.info/javascriptexample.html)尝试了相同的正则表达式并且它有效。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T15:00:44.327

`?`并且`.`是正则表达式的特殊字符，但不能在字符串中“按原样”转义。所以如果你放 one `\`，那对于一个字符串是错误的，如果你不放`\\`，它会被当作正则表达式的“特殊字符”。所以 ：

```
"@<a href=\"default\\.asp\\?itemID=([0-9]*)\">"; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-30T14:54:11.350

使用@operator 时，您可以使用“”重新获得双引号。

您还需要转义正则表达式中的某些特殊字符，在这种情况下，字符 .\?

试试这个：

```
@"<a href=""default\.asp\?itemID=([0-9]*)"">" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T14:53:58.477

尝试转义点 '.' 性格与`\.`

# gwt - GWTQuery 是否支持 CSS 选择器 [attr*="some_val"]？

> ID：10818747
> 
> 赞同：1
> 
> 时间：2012-05-30T14:50:27.437
> 
> 标签：gwt, css-selectors, gwtquery

我已经使用 GQuery 一段时间了。我最近遇到了一些意想不到的行为。

我有两种不同的情况：

a）我想选择一个元素说

```
<a href="http://example.com?p=site:helloworld.com">Link</a> 
```

我用了

```
GQuery.$("a[href*=site:helloworld.com]") 
```

这似乎不起作用。

b）我想选择的另一件事是

```
<h1 data-title="SampleTitle">Title</h1> 
```

我需要提取数据标题的值。我使用了以下内容：

```
GQuery.$("h1").attr("data-title"); 
```

现在，这不会返回错误，但也不会返回值。它只返回一个空白字符串。这与'-'没有任何关系，是吗？

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T16:03:34.470

a) 我做了一个快速测试，选择器工作正常！（但您必须引用另一个答案中提到的值`GQuery.$("a[href*=\"site:helloworld.com\"]")`：）

[*注意：* “*=”选择器是在 CSS 3 中定义的。Gwtquery 目前通常只支持 CSS 2，参见[http://code.google.com/p/gwtquery/wiki/CssGuide#CSS_scope](http://code.google.com/p/gwtquery/wiki/CssGuide#CSS_scope)]

b)对我有用：它返回文档中**第一个**“h1”元素`GQuery.$("h1").attr("data-title");`的完整属性字符串值

 **我正在使用 gwtquery 1.1.0 + GWT 2.4.0。如果可能，请尝试升级到这些（或更高）版本。**

# jquery - 从另一个页面直接链接到 jQuery 选项卡？

> ID：10818754
> 
> 赞同：4
> 
> 时间：2012-05-30T14:51:19.760
> 
> 标签：jquery, html, css, tabs

让我们先说我精通 HTML 和 CSS，但是这个 jQuery 的东西对我来说有点新鲜。所以这可能真的很容易解决，我已经查看了其他答案，但我无法掌握它。

我有一个设置有四个选项卡的 jQuery 选项卡表，如下所示：

```
<ul class="tabs">
    <li>
        <a rel="tab_1">Education Insurance</a>
    </li>
    <li>
        <a rel="tab_2">Home Insurance</a>
    </li>
    <li>
        <a rel="tab_3">Car Insurance</a>
    </li>
    <li>
        <a rel="tab_4">Business Insurance</a>
    </li>
</ul> 
```

每个选项卡的内容位于其下方的单独 div 标签中，如下所示：

```
<div class="panes">
    <div id="tab_1" class="tab-content">
        <p>Tab content goes here.</p>
    </div> 
```

我要做的是在主页上创建一个链接，该链接可以直接链接到选项卡 2 或选项卡 3，它们位于单独的页面上。有人能帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T14:59:10.900

您可以使用 jQuery UI 选项卡，这是自动执行的。

这是一个[工作小提琴](http://jsfiddle.net/joycse06/v3eFa/3/)

标签链接

[第一个标签](http://fiddle.jshell.net/joycse06/v3eFa/2/show/#tabs-1)

[第二个选项卡](http://fiddle.jshell.net/joycse06/v3eFa/2/show/#tabs-2)

[第三个标签](http://fiddle.jshell.net/joycse06/v3eFa/2/show/#tabs-3)

参考：[JQuery UI 选项卡](http://jqueryui.com/demos/tabs/)

更好的是，您可以更改 select 上的哈希，以便用户可以像这样自己复制 url

```
$('#tabs').tabs({
    select: function(event, ui) {
        window.location.hash = ui.tab.hash;
    }
});

​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:58:15.020

我假设所有内容 div 都是可见的，并且当用户单击它时，您需要滚动到该特定 div。您只需要将按钮绑定到滚动事件。

```
 $(document).ready(function() {
 $('button2').click = function (){
 $(document).scrollTo('#tab2');
 } 
 });

 $(document).ready(function() {
 $('button3').click = function (){
 $(document).scrollTo('#tab3');
 } 
 }); 
```

现在创建两个 id 为“button1”和“button2”的按钮。例如。

```
<div id='button2'>Tab2</div>
or
<a href='#' id='button2'>Tab2</a> 
```

当用户点击它们时，他会被带到内容 div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T14:57:12.113

它在[文档](http://jqueryui.com/demos/tabs/#...select_a_tab_from_a_text_link_instead_of_clicking_a_tab_itself)中:) 一个非常简单的片段，我自己用过。

```
var $tabs = $('#example').tabs(); // first tab selected

$('#my-text-link').click(function() { // bind click event to link
    $tabs.tabs('select', 2); // switch to third tab
    return false;
}); 
```

如果您想在页面“加载”时执行此操作（即主页上的链接将您带到不同的选项卡式屏幕），您只需在请求中传递一些文件加载​​可以解密并使用 . tabs("select", tabNo) 如上图所示。同样，我已经在生产代码中完成了这项工作，而且它是可靠的。

# symfony - Symfony2 + 学说2：切换到元数据驱动程序“yml”

> ID：10818757
> 
> 赞同：2
> 
> 时间：2012-05-30T14:51:24.610
> 
> 标签：symfony, doctrine-orm

一个简短的问题：如何切换到另一个元数据驱动程序而不是注释。如何在 config.yml 中设置元数据驱动程序“yml”？

我搜索了谷歌和 symfony2 文档，但没有找到任何东西:(

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T19:18:17.613

你应该可以用`doctrine:mapping:convert`命令做到这一点

```
php app/console doctrine:mapping:convert --force yml ./src/ 
```

不过，在运行命令之前仔细检查所有可用的选项

```
php app/console help doctrine:mapping:convert 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-27T16:16:46.710

我意识到这是一个较老的问题，但您可以明确要求该学说将 yml 驱动程序用于元数据，如下所示：

```
doctrine:
  orm:
    entity_managers:
      mappings:
        MyBundleName:
          type: yml
          dir: path/to/ymlmetadata 
```

请注意，如果您使用此配置样式，则必须将“默认”配置节点放在 entity_managers 下，而不是通常的位置。

# android - repo 初始化一个特定的提交

> ID：10818758
> 
> 赞同：7
> 
> 时间：2012-05-30T14:51:29.357
> 
> 标签：android, git, github, repository, cyanogenmod

我正在为 Nexus S 手机（三星 crespo）构建 Cyanogenmod 9（Android ICS）系统。问题是，如果我这样做：

```
repo init -u git://github.com/CyanogenMod/android.git -b ics 
```

repo 指向 ICS 的最新提交，其中清单不包括我需要的一些 device/samsung/ 项目（特别是[https://github.com/CyanogenMod/android_device_samsung_crespo](https://github.com/CyanogenMod/android_device_samsung_crespo)）。

如何将 init 回购到特定的提交？就我而言，我希望使用 google android-4.0.3_r1 分支进行最后一次提交。是这个吗：

*   [https://github.com/CyanogenMod/android/commit/5f5da775f570f2995c8ff2db98e6c8b40852911c](https://github.com/CyanogenMod/android/commit/5f5da775f570f2995c8ff2db98e6c8b40852911c)

如果我做

> repo init -u git://github.com/CyanogenMod/android.git -b commit-hash

不起作用，似乎 repo init -b 只支持分支的 HEAD。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-28T14:04:36.547

我想到了。如果清单文件中有标签（例如 version.xml）。您可以使用以下命令将初始化 repo 到特定标签：

```
repo init -u <addres> -b refs/tags/<tagname> -m version.xml 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T16:33:17.430

**长答案：**

您不能为 指定分支名称（或 SHA 或其他任何名称）`repo`，它将不起作用。原因如下：

`repo`是一个处理存储库项目（实际上是独立的 git）集合的脚本。项目列表位于`.repo`git 中，并包含一个清单文件，该文件基本上是所有存储库 git 及其分支的列表。`-b`仅与`repo`git 期间有关`repo init`。

这是一个例子`.repo/manifests/default.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<manifest>
  <remote fetch="git://address.com/" name="origin"
          review="review.address.com"/>
  <default remote="origin" revision="ics-something" sync-j="4"/>
  <manifest-server url="http://manifests.address.com:8000"/>
  <!-- sniff -->
  <project name="platform/external/libxml2" path="external/libxml2"
           revision="ics-common"/>
  <project name="platform/external/zlib" path="external/zlib"
           revision="ics-common"/>
  <project name="platform/frameworks/base" path="frameworks/base"
           revision="ics-something"/>
  <project name="platform/packages/apps/Bluetooth" path="packages/apps/Bluetooth"
           revision="ics-common"/>
  <!-- sniff -->
</manifest> 
```

***因此，获取特定构建的存储库源的正确方法是获取它的清单。***
即清单，它将包含 SHA（或标签，如果它们存在，它们实际上是相同的）而不是分支名称。这样，您的存储库中的每个 git 项目都将指向某个提交，该提交在清单文件中指定：

```
<?xml version="1.0" encoding="UTF-8"?>
<manifest>
  <remote fetch="git://address.com/" name="origin"
          review="review.address.com"/>
  <default remote="origin" revision="ics-something" sync-j="4"/>
  <manifest-server url="http://manifests.address.com:8000"/>
  <!-- sniff -->
  <project name="platform/external/libxml2" path="external/libxml2"
           revision="refs/tags/android-4.0.4_r1.1"/>
  <project name="platform/external/zlib" path="external/zlib"
           revision="refs/tags/android-4.0.4_r1.1"/>
  <project name="platform/frameworks/base" path="frameworks/base"
           revision="ecb41a77411358d385e3fde5b4e98a5f3d9cfdd5"/>
  <project name="platform/packages/apps/Bluetooth" path="packages/apps/Bluetooth"
           revision="621bae79f1a250e443eb83d1f473c533bea493dc"/>
  <!-- sniff -->
</manifest> 
```

如您所见，这两个清单之间的唯一区别是存储库 git 的修订值。

**简短的回答：**

您需要获取`manifest_static.xml`特定版本。

或者，如果您只是缺少一些项目 git，那么您可以`local_manifest.xml`在 git 中创建文件，在`.repo`其中添加缺少的 git，然后`repo sync`从存储库的根目录中添加。更多关于`local_manifest.xml`使用的信息在[这里](https://android.googlesource.com/tools/repo/+/refs/heads/master/docs/manifest-format.md#Local-Manifests)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-25T00:42:38.320

我没有足够的权限提交评论，但我只是想澄清 Andrejs Cainikovs 的回答。

除了分支 ref 作为 -b 选项的参数之外，repo**确实接受 commit-id SHA 。**

正如答案所暗示的那样，此参数指定了 repo 应使用的清单的修订版，而不是清单所引用的任何项目中的修订版。

# html - 在网站上嵌入“上瘾游戏”Flash 游戏

> ID：10818760
> 
> 赞同：0
> 
> 时间：2012-05-30T14:51:35.680
> 
> 标签：html, flash, web, embed

当我在我的网站上嵌入“令人上瘾的游戏”Flash 游戏时，它们只是出现白色并说电影未加载。Addicting Games 提供了一个简单的嵌入链接，只需复制到您的网站，但它不适用于我的任何计算机、浏览器等...

这是链接[http://www.zentenialgames.com/infectionator.html](http://www.zentenialgames.com/infectionator.html)。

```
<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0"
id="gameObject" width="700" height="500"><param name="movie"
value="/newGames/strategy-games/infectionator/infectionator_w.swf"/><param
name="menu" value="false"/><param name="allowscriptaccess"
value="samedomain"/><param name="allownetworking" value="all"/><embed
src="/newGames/strategy-games/infectionator/infectionator_w.swf"
width="700" height="500" menu="false"  allowscriptaccess="samedomain"
allownetworking="all" name="gameObject"
type="application/x-shockwave-flash"
pluginspage="http://www.macromedia.com/go/getflashplayer"></embed></object><span
style="font-size:11px;"><br/><a href=""
style="font-size:11px;">Games</a>:<a
href="http://www.addictinggames.com/strategy-games/index.jsp"
style="font-size:11px;">Play Strategy Games on
AddictingGames</a><br/><a
href="http://www.addictinggames.com/legal/terms-use.jsp"
style="font-size:11px;">Terms of Use</a> | <a
href="http://www.addictinggames.com/legal/copyright.jsp"
style="font-size:11px;">© 2012 Atom Entertainment, Inc., a subsidiary
of Viacom International Inc. All Rights Reserved.</a></span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:21:10.373

用以下代码替换您的代码

```
<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" id="gameObject" width="700" height="500"><param name="movie" value="/newGames/strategy-games/infectionator/infectionator_w.swf"/><param name="menu" value="false"/><param name="allowscriptaccess" value="samedomain"/><param name="allownetworking" value="all"/><embed src="/newGames/strategy-games/infectionator/infectionator_w.swf" width="700" height="500" menu="false"  allowscriptaccess="samedomain" allownetworking="all" name="gameObject" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer"></embed></object><span style="font-size:11px;"><br/><a href="" style="font-size:11px;">Games</a>:<a href="http://www.addictinggames.com/strategy-games/index.jsp" style="font-size:11px;">Play Strategy Games on AddictingGames</a><br/><a href="http://www.addictinggames.com/legal/terms-use.jsp" style="font-size:11px;">Terms of Use</a> | <a href="http://www.addictinggames.com/legal/copyright.jsp" style="font-size:11px;">&copy; 2012 Atom Entertainment, Inc., a subsidiary of Viacom International Inc. All Rights Reserved.</a></span> 
```

您在代码中的 2 个位置缺少“ [http://addictinggames.com/](http://addictinggames.com/) ”。

一个是'value="/newGames/strategy-games/infectionator/infectionator_w.swf"'

另一个地方是 'src="/newGames/strategy-games/infectionator/infectionator_w.swf"'

# c - GCC：为什么常量变量没有放在 .rodata 中

> ID：10818761
> 
> 赞同：34
> 
> 时间：2012-05-30T14:51:39.870
> 
> 标签：c, memory, gcc, constants, readonly

我一直相信 GCC 会在 ELF 或此类文件的段（或用于优化的段）中放置一个`static const`变量。但似乎并非如此。`.rodata``.text`

我目前正在`gcc (GCC) 4.7.0 20120505 (prerelease)`一台装有 GNU/Linux 的笔记本电脑上使用。它确实放置了一个静态常量变量来`.bss`分段：

```
/*
 * this is a.c, and in its generated asm file a.s, the following line gives:
 *   .comm a,4,4 
 * which would place variable a in .bss but not .rodata(or .text)
 */
static const int a;

int main()
{
    int *p = (int*)&a;
    *p = 0;  /* since a is in .data, write access to that region */
             /* won't trigger an exception */
    return 0;
} 
```

那么，这是一个错误还是一个功能？我决定将此作为 bug 提交给 bugzilla，但最好先寻求帮助。

GCC 是否有任何原因不能将 const 变量放入`.rodata`？

**更新：**

经测试， GCC`const int a = 0;`将放入一个具有显式初始化（​​如 ）的常量变量，而我未初始化该变量。`.rodata`因此，这个问题可能会在以后关闭——我可能没有提出正确的问题。

另外，在我之前的话中，我写道变量 a 放在“.data”部分，这是不正确的。`.bss`由于未初始化，它实际上已放入部分中。上面的文字现在已更正。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T15:53:32.773

编译器使它成为一个通用的，它可以与其他兼容的符号合并，如果它最终没有显式初始化定义，它可以进入 bss（不占用磁盘空间）。将其放入 rodata 将是一种权衡；你会在运行时节省内存（提交费用），但会使用更多的磁盘空间（对于一个巨大的数组来说可能很多）。

如果您希望它进入 rodata，请使用`-fno-common`GCC 选项。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-05-15T02:51:30.683

为什么*GCC 会这样做*？如果不问开发人员自己，就无法真正回答这个问题。如果允许我推测，我敢打赌它与优化有关——编译器不必*强制*执行 const。

也就是说，我认为最好还是看看语言本身，尤其是未定义的行为。有*一些*关于未定义行为的提及，但没有一个是深入的。

修改常量*是*未定义的行为。[Const 是一个 contract](https://quuxplusone.github.io/blog/2019/01/03/const-is-a-contract/)，在 C（和 C++）中尤其如此。

> “但是如果我`const_cast`去掉 const 并修改 y 怎么办？” 然后你有未定义的行为。

*未定义的行为* **意味着**编译器可以按字面意思做它想做的任何事情，并且无论编译器决定做什么都不会被视为违反 ISO 9899 标准。

> **3.4.3**
> 
> 1 未定义的行为
> 
> 使用不可移植或错误程序结构或错误数据时**的行为，本国际标准对此没有要求**
> 
> 2 注 可能的未定义行为范围从完全忽略具有不可预测结果的情况，到在翻译或程序执行期间以环境特征的记录方式表现（有或没有发出诊断消息），到终止翻译或执行（有发出诊断消息）。
> 
> *ISO/IEC 9899:1999, §3.4.3*

这意味着，因为您调用了未定义的行为，所以编译器所做的任何事情在技术上都是正确的，而*不是*不*正确*的。因此，GCC 采取是正确的...

```
static const int a = 0; 
```

...并把它变成一个`.rodata`符号，同时拿...

```
static const int a; // guaranteed to be zero 
```

...并把它变成一个`.bss`符号。

在前一种情况下，任何修改的尝试`a`——即使是通过代理——通常都会导致分段违规，导致内核强制终止正在运行的程序。在后一种情况下，程序可能会运行而不会崩溃。

也就是说，猜测编译器会做哪一个是不合理的。*Const 是一个合约*，程序员可以通过不修改本应为常量的数据来维护该合约。违反该合同意味着未定义的行为，以及随之而来的所有可移植性问题和程序错误。

所以 GCC 可以做几件事。

**它可能会将**符号写入 .rodata，在操作系统内核下为其提供保护

**它可能会将**对象写入无法保证内存保护的地方，在这种情况下......

**它可能会**改变价值

**它可能会**更改值并立即将其更改回

**它可能会**完全删除有问题的代码，理由是值没有改变（`0 -> 0`），本质上是优化......

```
int main(){
    int *p = &a;
    *p = 0;
    return 0;
} 
```

...至...

```
int main(void){
    return 0;
} 
```

**它**甚至可能会及时送回 T-800 型号，以便在您出生之前终止您的父母。

所有这些行为都是合法的（嗯，在遵守标准的意义上是合法的），因此错误报告是没有保证的*。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-30T15:08:02.757

写入已声明为`const`合格的对象是未定义的行为：任何事情都可能发生，即使那样。

在 C 中没有办法声明对象本身是不可变的，您只能通过您对它的特定访问权限来禁止它是可变的。在这里，您有一个`int*`, 因此修改是“允许的”，因为编译器不会被迫发出诊断。在 C 中进行强制转换意味着您应该知道自己在做什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T15:19:12.497

> GCC 是否有任何原因不能在 .rodata 中放置 const 变量？

您的程序已由编译器优化（即使在`-O0`某些优化中也已完成）。持续传播完成：[http ://en.wikipedia.org/wiki/Constant_folding](http://en.wikipedia.org/wiki/Constant_folding)

试着像这样欺骗编译器（注意这个程序在技术上仍然是未定义的行为）：

```
#include <stdio.h>

static const int a;

int main(void)
{
    *(int *) &a = printf("");  // compiler cannot assume it is 0

    printf("%d\n", a);

    return 0;
} 
```

# php - PHP is_readable() 在可读的 samba 目录上失败

> ID：10818770
> 
> 赞同：5
> 
> 时间：2012-05-30T14:52:03.733
> 
> 标签：php, samba, cifs

对 PHP 的 is_readable() 函数的调用在可从命令提示符读取的目录上返回 false。我已将权限更改为最允许的，但仍然没有运气。

```
ls -lad /remote/samba_share
drwxrwxr-x 13 me users 0 May 29 15:49 /remote/samba_share

ls -la /remote/samba_share
drwxr-xr-x  4 me users 0 May  8 14:19 /remote/samba_share/local_dir
drwxr-xr-x 16 me users 0 May 14 19:49 /remote/samba_share/second_drive
drwxrwxrwx 12 me users 0 May 30 09:42 /remote/samba_share/ext_raid 
```

运行以下代码...

```
if (is_readable('/remote/samba_share'              )){ echo "share ok\n";  } else { echo "share BAD\n";  }
if (is_readable('/remote/samba_share/local_dir'    )){ echo "local ok\n";  } else { echo "local BAD\n";  }
if (is_readable('/remote/samba_share/second_drive' )){ echo "second ok\n"; } else { echo "second BAD\n"; }
if (is_readable('/remote/samba_share/ext_raid'     )){ echo "raid ok\n";   } else { echo "raid BAD\n";   } 
```

...结果是...

```
share ok
local ok
second BAD
raid BAD 
```

samba 共享下不在物理主分区上的任何目录似乎都失败了。

调用 is_readable() 的机器的配置详细信息：

```
php -v
PHP 5.3.11-pl0-gentoo (cli) (built: May  5 2012 16:48:35)

php.ini:
    safe_mode = Off
    safe_mode_gid = On # (tried either way, shouldn't matter)
    ;open_basedir =

/etc/fstab entry:
    //remote_machine/samba_share /remote/samba_share cifs iocharset=utf8,credentials=/blahblah/samba_credentials,uid=me,gid=users,file_mode=0777,dir_mode=0777,auto   0 0

eix samba
[I] net-fs/samba
     Installed versions:  3.5.15!t 
```

远程机器的配置细节：

```
eix samba
[I] net-fs/samba
     Installed versions:  3.5.15!t

/etc/samba/smb.conf:

    [samba_share]
       path = /samba_share/
       public = yes
       writable = yes
    ;  printable = yes
       browseable = yes
       create mask = 0777
       create mode = 0777
       directory mode = 0777 
```

我已经尝试了我能想到的一切来让这个工作，现在我觉得很愚蠢。:-) 如果这似乎与任何人相关，我也可以提供内核配置。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:39:29.420

`is_readable()`只是包装[访问](http://www.kernel.org/doc/man-pages/online/pages/man2/access.2.html)系统调用以确定文件权限，所以它很可能不是 php 问题。

根据 samba 配置和文件权限，很可能是 SELINUX。PHP 可能以不同的用户身份运行（无论 CLI 是否是 apache mod），因此 selinux 可能拒绝该用户的访问。

因此，请检查 selinux 是否已启用和禁用或适当配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T02:28:42.587

我没有找到一个简单的答案，所以我创建了一个新的[PHP bug 票](https://bugs.php.net/bug.php?id=62199) 来更好地追踪问题。感谢所有的投入！

# haskell - 我可以映射一对没有箭头的第一个元素吗？

> ID：10818779
> 
> 赞同：7
> 
> 时间：2012-05-30T14:52:53.867
> 
> 标签：haskell, arrows

我正在关注函子，应用函子……我不确定如何到达我想要的地方，但我觉得遵循这些类型应该让我更接近。

有没有一种简单的方法来制作`map`仅适用于 2 元组的第一个元素的 -alike？从`first`和`Control.Arrow`使用`Arrow (->)`，这很好地解决了问题：

```
map . first :: (b -> c) -> [(b, d)] -> [(c, d)] 
```

我唯一担心的是我还没有对箭有真正的直觉，所以如果我继续这样做，我可能迟早会发现自己陷入困境。另外，这似乎是一个相当方便的案例，不能一概而论。

我可以通过使用仿函数、单子或其他任何东西来获得相同的功能，同时达到我想要的核心吗？我在玩弄

```
\f -> map (f `on` fst) 
```

- 类似的想法，但无法完全实现。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T14:55:49.040

箭头有很好的组合器来操作元组。您几乎可以将它们视为缺失的元组函数！

所以例如

```
> :t \f -> map (f *** id)
  :: (b -> c) -> [(b, c')] -> [(c, c')] 
```

是映射第一个组件的有用方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T15:03:18.823

可以做这种事情的另一个抽象是双函子。Edward Kmett 有一个名为[bifunctors](http://hackage.haskell.org/package/bifunctors)的包。 [Data.Bifunctor](http://hackage.haskell.org/packages/archive/bifunctors/0.1.3.3/doc/html/Data-Bifunctor.html)有一个完全用于此功能的类型类，它包括 2 元组的实例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T20:08:26.677

因此，您正在寻找 type 的功能`(a -> b) -> (a,c) -> (b,c)`。如果你能写就太好了

```
{-# LANGUAGE TupleSections #-}
instance Functor (,c) where
    fmap f (x,c) = (f x, c) 
```

但不幸的是，元组部分仅适用于值级别。我不知道这是否有理论上的原因；我想它会破坏高阶类型统一。

Hayoo 提出了调用该函数的包[Data.Tuple.HT](http://hackage.haskell.org/packages/archive/utility-ht/latest/doc/html/Data-Tuple-HT.html)`mapFst`。

如果不使用双函子（BiFunctor 实例`(,)`真的做你想要的，仅此而已）或箭头，就没有办法得到你想要的，至少我知道。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-30T21:15:38.127

我认为问题在于方法太多了——我想我会接受 Daniel Wagner 的建议——但这里有另一个供你娱乐的方法：

```
{-#LANGUAGE DeriveFunctor, MultiParamTypeClasses  #-}
import Control.Newtype

newtype P a b = P {p:: (b, a)} deriving (Show,Eq,Ord,Functor)
instance Newtype (P a b) (b,a) where pack = P; unpack = p

 -- *Main> fmap even ("Hi",4)
 -- ("Hi",True)
 -- *Main> map (fmap even) [("Hi",4),("Bye",5)]
 -- [("Hi",True),("Bye",False)]
 -- *Main> under P (fmap even) (4,"Hi")
 -- (True,"Hi")
 -- *Main> map (under P (fmap even) ) [(4,"Hi"),(5,"Bye")]
 -- [(True,"Hi"),(False,"Bye")] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T15:13:06.783

嗯，有[BiFunctor](http://hackage.haskell.org/package/bifunctors)包。

或者您可以使用反向配对类型：

```
data Flip a b = Flip b a

instance Functor (Flip a) where
  fmap f (Flip x y) = Flip (f x) y 
```

# java - 单击关闭按钮时关闭 cmd + frame

> ID：10818780
> 
> 赞同：0
> 
> 时间：2012-05-30T14:52:57.153
> 
> 标签：java, cmd, frame

你好，我有一个代码，运行时会打开 cmd，然后打开框架。我希望在打开框架后立即关闭 cmd，或者在用户关闭框架的同时关闭 cmd。这是我关闭框架时的代码。

```
frame = new JFrame("BrainSla");
frame.setLayout(new BorderLayout());
frame.setResizable(false);
frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE); 
```

这是主要代码：

```
public static void main(String args[]) {
    try {
        System.out.println("BrainSla - By Jannes Braet, Steven Brain, Wout Slabbinck.");
        nodeID = 10;
        portOff = 0;
        setHighMem();
        isMembers = true;
        signlink.storeid = 32;
        signlink.startpriv(InetAddress.getLocalHost());
        new Jframe(args);
        //instance = new client();
        //instance.createClientFrame(503, 765);
    } catch(Exception e) {
        e.printStackTrace();
    }
} 
```

有人能告诉我我怎么能做这样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:57:57.637

如果通过“cmd”，您指的是“命令行”或 CLI。选项：

1.  `javaw`使用而不是从 bat 文件（或每个操作系统的类似文件）启动它`java`
    *   学习曲线低。
    *   不是很专业的样子。
2.  使其成为可运行的 Jar（双击打开）
    *   中等学习曲线。
    *   中等专业外观。
3.  [使用JWS](https://stackoverflow.com/tags/java-web-start/info)启动它
    *   高学习曲线。
    *   很专业的样子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T14:56:03.680

更改`frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);`为

```
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

这将在您关闭框架后立即退出应用程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T15:38:01.580

如果您从命令行运行，关闭命令行窗口将过早关闭您的应用程序。不确定在 Windows 上执行此操作的任何方法，但在 Linux 上，您可以在后台处理该进程并使用以下命令执行此操作：

```
nohup java -jar myprogram.jar & 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-21T10:06:24.747

如果您在 Java 应用程序中从 with 启动进程（例如，通过调用 Runtime.exec() 或 ProcessBuilder.start()），那么您拥有对它的有效 Process 引用，您可以在 Process 类中调用 destroy() 方法杀死那个特定的进程。

但请注意，如果您调用的进程创建了新的子进程，这些子进程可能不会被终止（参见[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4770092](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4770092)）。

另一方面，如果您想杀死外部进程（不是从 Java 应用程序产生的），那么您可以做的一件事是调用允许您执行此操作的 O/S 实用程序。例如，您可以在 Unix / Linux 下尝试 Runtime.exec() on kill 命令并检查返回值以确保应用程序被杀死（0 表示成功，-1 表示错误）。但这当然会使您的应用程序平台依赖。

# shell - 无法从脚本中调用脚本

> ID：10818781
> 
> 赞同：1
> 
> 时间：2012-05-30T14:53:05.147
> 
> 标签：shell, path, stdin, library-path

我正在尝试从另一个脚本中调用一个脚本。这个想法是程序应该接收直接从 unix 邮件作为标准输入发送给它的电子邮件，然后解析一些内容并将其发送到新脚本。

我无法到达新脚本。但是，仅当脚本直接接受电子邮件时才会出现此问题。如果我将文件放入其中，则没有问题，它会找到新脚本。

IE：如果我有一个名为“ `email.txt`”的测试文件并且我执行以下命令：

```
cat email.txt | ./receiveEmail.sh 
```

然后脚本调用工作正常。

但如果`receiveEmail.sh`直接收到邮件，则调用新脚本失败。我知道这是它失败的地方，因为我得到了脚本一直工作到它试图调用新脚本的日志。

```
--------receiveEmail.sh----------
#!/bin/bash
###do some stuff to parse the stdin coming in and get variable $subject and $body

issue=`. /home/dlaf/bin/makeissue.sh` ->>>> this is the line that doesn't seem to work when the input is straight from the email rather than from a txt file i send it. 
```

我很困惑为什么。我想可能是因为我错过了路径的某些部分？也许进来的电子邮件不知道我的完整路径实际上是什么？我不确定，因为当我输入命令行时`echo $LD_LIBRARY_PATH`，我只是得到一个空行，所以我认为它甚至没有设置，所以我不知道这怎么可能是一个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:13:28.253

使用 Bash 将输出保存到变量时，我通常会这样做

```
read issue < <(~/bin/makeissue.sh)
echo "$issue" 
```

如果输出是多行，你可以这样做

```
read -d'' issue < <(~/bin/makeissue.sh)
echo "$issue" 
```

或这个

```
mapfile issue < <(~/bin/makeissue.sh)
echo "${issue[@]}" 
```

# c# - Quartz.NET 连接-事务对不能为空

> ID：10818791
> 
> 赞同：3
> 
> 时间：2012-05-30T14:53:45.267
> 
> 标签：c#, windows-services, quartz.net

当我查看基于 Windows 服务的 Quartz.NET 项目的事件日志时，我得到：

`Connection-Transaction Pair cannot be null`

`parameter name: cth`

当然，我用谷歌搜索，但没有找到任何关于异常的文档。有谁知道这意味着什么或如何解决它？

提前致谢。

编辑：这是扩展（但仍不完整）异常/堆栈跟踪：

`Service cannot be started. Parameters: refire = False, unscheduleFiringTrigger = False, unscheduleAllTriggers = False Quartz.JobExecutionException: System.ArgumentNullException: Connnection-transaction pair cannot be null Parameter name: cth at Quartz.Impl.AdoJobStore.JobStoreSupport.CheckNotZombied(ConnectionAndTransactionHolder cth) in c:\Work\OpenSource\quartznet\src\Quartz\Impl\AdoJobStore\JobStoreSupport.cs:line 3487 at Quartz.Impl.AdoJobStore.JobStoreSupport.RollbackConnection(ConnectionAndTransactionHolder cth) in c:\Work\OpenSource\quartznet\src\Quartz\Impl\AdoJobStore\JobStoreSupport.cs:line 3300 at Quartz.Impl.AdoJobStore.JobStoreSupport.ExecuteInNonManagedTXLock(String lockName, Func2 txCallback) in c:\Work\OpenSource\quartznet\src\Quartz\Impl\AdoJobStore\JobStoreSupport.cs:line 3467 at Quartz.Impl.AdoJobStore.JobStoreTX.ExecuteInLock(String lockName, Func2 txCallback) in c:\Work\OpenSource\quartznet\src\Quartz\Impl\AdoJobStore\JobStoreTX.cs:line 76 at Quartz.Impl.AdoJobStore.JobStoreSupport.Store...`

另外，有没有办法获得完整的堆栈跟踪？我无法以编程方式执行此操作，因为它甚至在服务启动之前就失败了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T09:54:09.800

我有同样的问题，也尝试了 Sanjay10 提出的错误修复，但没有奏效。这只是将问题推迟到另一个位置。

如果 Quartz 尝试回滚连接，则会出现此错误，因为在尝试创建与数据库的有效连接时发生了一些错误。我的情况是这不起作用，因为我的数据库未配置为允许远程连接（是本地仓促设置的测试数据库）。切换到另一个（经过充分测试的）数据库为我解决了这个问题。

**所以我的建议是，它要么与我遇到的问题相同，要么与其他一些与数据库相关的问题（比如分配的用户缺少一些权限）。可能尝试另一个数据库或给分配的用户更多权限**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T20:10:51.900

放置`Debugger.Launch();`在 Windows 服务代码的第一行上方，这样当您启动服务时，您将能够单步执行代码并找到引发异常的确切代码行...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T18:59:36.670

获取最新的 Quartz.net 库。他们已经修复了这个错误。

这是为此设置的更改

[https://github.com/quartznet/quartznet/commit/e1a136cf5ac5c525cf0b9514e190e6b1132ffe48#src/Quartz/Impl/AdoJobStore/JobStoreSupport.cs](https://github.com/quartznet/quartznet/commit/e1a136cf5ac5c525cf0b9514e190e6b1132ffe48#src/Quartz/Impl/AdoJobStore/JobStoreSupport.cs)

# php - cakePHP isAuthorized 不工作

> ID：10818792
> 
> 赞同：5
> 
> 时间：2012-05-30T14:53:50.130
> 
> 标签：php, cakephp, authentication, controller

我有一个表，它将我的用户 (user_levels) 链接到用户表 (user_level_id)。5 级是管理员。

我想限制某些操作被查看并理解我可以使用 isAuthorized 做到这一点。我按照书本去做了，我很确定我做对了，但它不起作用。它允许任何登录的用户仍然可以访问任何操作，尽管我在 isAuthorized 中拒绝它。

这是我的代码：

```
 App Controller:public $components = array(
    'Session',

    'Auth' => array(
        'loginAction' => array(
            'controller' => 'users',
            'action' => 'login',
        ),
        'authError' => "Your username and password is incorrect, please try again.",
        'authenticate' => array(
            'Form' => array(
                'scope' => array('User.user_status_id' => 1)
            )
        ),
        'redirect' => array("controller" => "users", "action" => "profile"),
        'loginRedirect' => array("controller" => "users", "action" => "profile")
    )
);

public function isAuthorized($user = null) {
    if($this->Auth->user("user_level_id") == 5) {
        return true;
    }
    // Default deny
    return false;
}

public function beforeFilter() {
    $this->Auth->allow("display");
   if($this->Auth->loggedIn() == true) {
       $this->set("user_name",$this->Auth->user("first_name")." ".$this->Auth->user("last_name"));
       $this->set("loggedIn",true);
       if($this->Auth->user("user_type_id") == 5) {
           $this->set("navigation","navigation_admin");
       } else {
           $this->set("navigation","navigation_loggedin");
       }
   } else {
       $this->set("loggedIn",false);
       $this->set("navigation","navigation_notloggedin");
   }

}

 }

 // Users Controller:

 public function beforeFilter() {
    $this->Auth->allow("login");
    parent::beforeFilter();
}

public function isAuthorized($user = null) {
    if($this->Auth->user("user_level_id") == 5) {

        return true;
    }
    // Default deny
    return parent::isAuthorized($user);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T14:57:14.047

看起来您只是缺少配置来告诉 AuthComponent 使用`isAuthorized()`.

```
'Auth' => array(
        'loginAction' => array(
            'controller' => 'users',
            'action' => 'login',
        ),
        'authError' => "Your username and password is incorrect, please try again.",
        'authenticate' => array(
            'Form' => array(
                'scope' => array('User.user_status_id' => 1)
            )
        ),
        'authorize' => array('Controller'), // <- here
        'redirect' => array("controller" => "users", "action" => "profile"),
        'loginRedirect' => array("controller" => "users", "action" => "profile")
    ) 
```

# sql-server - 由于语言环境，将字符串转换为日期时间时出错

> ID：10818796
> 
> 赞同：6
> 
> 时间：2012-05-30T14:54:03.463
> 
> 标签：sql-server, datetime, date

在 SQL Server 2008 R2 Express 的特定实例中，我在语言环境方面遇到了很多困难。

我在英国，以下失败：

```
SELECT CAST('2012-12-31' AS DATETIME) 
```

错误信息：

> 将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。

Windows 服务器语言环境是英式英语。我的登录语言环境是英式英语。排序规则“如果这很重要”是 Latin1_General_CI_AS。

数据库“语言”是英语（美国），但这与不同服务器上的另一个实例相同，并且上述 SQL 不会失败。

有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T15:00:10.647

对于建立数据库连接的用户——SQL 用户——将语言设置为英语。

这是特定于发出查询的连接的 SQL 用户的设置

检查这是否是问题的一种方法...在 Management Studio 中运行它并以发出查询的 SQL 用户身份登录

```
SET LANGUAGE English
SELECT CAST('2012-12-31' AS DATETIME) 
```

如果可行，请适当设置 SQL 用户的默认语言

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-30T15:00:30.850

不要`YYYY-MM-DD`用于日期文字，始终使用`YYYYMMDD`. 无论语言环境、日期格式设置、语言设置、区域设置等如何，这都不会失败：

```
SELECT CAST('20121231' AS DATETIME); 
```

也许值得一读：

*   [要改掉的坏习惯：错误处理日期/范围查询](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-30T14:57:52.520

您应该明确定义转换的日期格式，在本例中为 120：

```
SELECT CONVERT(DATETIME,'2012-12-31',120) 
```

您可以查看此页面以查看更多日期格式：http: [//msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

# apache-flex - 在 Flex 中创建浮动滚动条

> ID：10818802
> 
> 赞同：0
> 
> 时间：2012-05-30T14:54:32.630
> 
> 标签：apache-flex

我正在尝试创建一个浮动的水平滚动条，当用户垂直滚动时它会跟随屏幕。我有一个不能垂直滚动但水平滚动的数据网格（有很多列）。网格所在的容器可以垂直滚动。现在，当用户想要水平滚动时，他们必须一直向下到页面底部，向左/向右滚动，然后回到原来的位置。

我想做的是让网格上的水平滚动条在上下滚动时沿着网格浮动，因此它始终可见。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:03:49.677

这种事情在 Halo 的约束系统中有些常见，所以如果在各个地方仍然有这种遗留物，我不会感到惊讶。本质上，所发生的事情是有问题的控件并不真正理解它是受约束容器的一部分并且它应该适合这些界限，而是最大化容器以使容器适合自身（这就是为什么你必须滚动到最大垂直 - 通常是容器以查看控件的水平滚动）。

在这种情况下，一个常见的解决方法是将违规度量（即宽度、高度）设置为百分比布局，我们通常会将其绑定到它的直接父级或类似的东西。

前（伪代码）：

```
<HGroup id="hgroup" width="100%" height="100%">
    <DataGrid height="{hgroup.height}" .... />
</HGroup> 
```

不过，我会先尝试修复有问题的部分，要尝试的一件事是关闭容器的滚动，并允许控件滚动。

# delphi - 如何让 Delphi XE2 通过 SSL 与 Google Calendar API 通信？

> ID：10818806
> 
> 赞同：14
> 
> 时间：2012-05-30T14:54:43.763
> 
> 标签：delphi, openssl, delphi-xe2, indy

[又到了这个问题](https://stackoverflow.com/questions/1874677/indy-10-1-5-which-ssl-dlls-work)的时候了，但这次是 Delphi XE2。

我正在使用 XE2 附带的 Indy 版本 10.5.8.0，并且我尝试了四种不同版本的 SSL dll。我尝试了最新的 1.0.x，以及大约 3 个不同的 0.9.8 版本（e、h、x、....）。

在与 calendar.google.com 上的 https:// url 通信时，它们都不起作用。“ [Sync-components.com](http://www.sync-components.com/) ”上的 Delphi Google Calendar 组件的作者提供了他自己的二进制 openssl DLL 运行时，其中没有版本信息，但它似乎是一个非常小的、非常旧的 SSL 库版本，早于 0.9。 8\. 该组件的作者说只有他的私有未版本化 DLL 可以工作。我不敢相信。当然，至少有一个版本的 openSSL dll 可以与 Delphi XE2 很好地连接到 Google 日历。

为了让他自定义的古老 DLL 在 Delphi XE2 中加载到 Indy 10 中，他在最后修改了 IdSSLOpenHeaders.pas 方法 Load，如下所示：

```
 function Load: Boolean;
 begin
   /// ... lots of stuff
   //Result := (FFailedFunctionLoadList.Count = 0); // original.
   Result := (FFailedFunctionLoadList.Count <= 18); // changed to.
 end; 
```

当然，我正在评估的组件在 XE2 中不起作用，但我怀疑这是（a）XE2 附带的 Indy 10 的这个特定快照的损坏，或者（b）SSL DLL 世界的事实是一个名副其实的“为你破碎，但为我工作”的不同版本。

在 Delphi XE2 中使用 Indy（或任何其他支持 SSL 的 delphi 组件库）获得与 Google Calendar 的 SSL 连接，我必须做些什么？

或者，如果有人有一个谷歌日历 API 实现，它可以与 Indy 以外的任何东西一起使用，我可以用来测试，我会很感激链接和指针。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T19:51:26.703

XE2 附带的 Indy10 快照存在问题，因为 idHTTP 对象似乎无法与我发现的任何 OpenSSL dll 一起工作，因为我无法与任何 Google 日历服务器服务进行通信。

问题的实际本质似乎是 Indy 没有像我们希望的那样透明地处理 HTTP 重定向。操纵 Indy（第三方组件）的代码使用 Indy“http 重定向”处理逻辑做了一些非常难以理解的事情，这些逻辑似乎是一组解决方法，但不起作用。更令人困惑的是，代码中发生 HTTP 重定向的确切位置因测试 Google 日历的人而异，因此这些重定向故障并不总是出现在每个测试它的人的相同位置。

请注意登录方法和获取日历的方法。但是用于读取事件的方法和代码似乎不起作用。我无法弄清楚两者之间的区别，但我使用的代码是商业代码，我不能发布任何代码。如果我弄清楚 HTTP get 请求在其对这样的 url 的响应中返回“0 字节”的实际技术原因，我将更新此消息：

```
https://www.google.com/calendar/feeds/firstname.lastname%40gmail.com/private/full?max-results=100000 
```

那些零字节结果实际上是 HTTP 302 重定向响应代码，我使用的代码没有检查或预期。它期望 Indy 自动处理重定向。

问题可能是 Indy10 版本非常具体，仅适用于我今天在搜索中没有找到的 openSSL dll 版本，或者 XE2 附带的 Indy10 版本不适用于任何版本的我可以找到的 OpenSSL dll，至少当它正在与之交谈的目标是谷歌的 HTTPS 日历服务器时。

我正在运行的代码使用 TIdSSLIOHandlerSocketOpenSSL 创建了一个 IdHTTP 对象。

这适用于包括 XE 在内的所有 Delphi 版本，但由于 XE2 附带的 Indy 版本，因此与工厂 XE2 系统中断。

我发现的唯一解决方法是安装一个新的夜间版本的 Indy，我选择了 4760，当与 OpenSSL dll 版本 1.0.1 结合使用时，它似乎工作正常。

在我看来，使用 OpenSSL 和 Delphi XE2 开箱即用有点困难。非常感谢 Indy 团队的辛勤工作......但是有人可以帮助他们吗？这确实是一个伟大的项目和一个伟大的产品，但是当它崩溃时，并且当你必须遵循一个不断变化的标准（如 openSSL 实现）时，也许更多的文档、测试和眼球会有所帮助。如果有人可以告诉我我可以如何提供帮助，我随时准备提供帮助。SSL 的问题并非特定于 indy，因为我注意到其他组件供应商和开源人员具有他们支持或不支持的特定版本的 OpenSSL dll。

我今天学到的另一件可悲的事情：OpenSSL 的一些安装程序默认（没有警告）将他们的 DLL 安装到您的 Windows System32 目录中，这不仅会导致您的应用程序，而且会导致其他应用程序（如 TortoiseHG 和 TortoiseSVN）可能中断。[如果您在开始使用 SSL 之前没有遇到大问题，那么如果您从OpenSSL 网站](http://www.openssl.org/related/binaries.html)安装一堆安装程序版本，您很容易让情况变得更糟。

# javascript - 图像悬停在几个图像上不起作用

> ID：10818811
> 
> 赞同：0
> 
> 时间：2012-05-30T14:54:50.147
> 
> 标签：javascript, jquery, html, css

[我在http://www.innexdesign.co.uk](http://www.innexdesign.co.uk)有一个完整的工作站点。在主页上，当您将鼠标悬停在它们上方时，您会注意到一些显示为黑色的悬停词。我已经在基于 .net 的 CMS 的 Umbraco 上实施了这个在 Dreamweaver 中制作的现有站点。

无论如何，我已经启动并运行了该站点，但由于某种原因，“建筑”和“能源评估”中的两个图像不再是黑色的。其余的仍然可以正常工作。

```
 <div id="content">
<div id="homeleft">
    <ul class="menu">
    <li class="first"><a href="home.aspx">HOME</a></li>
    <li><a href="profile.aspx">PROFILE</a></li>
    <li><a href="designs.aspx">DESIGNS</a></li>
    <li><a href="testimonials.aspx">TESTIMONIALS</a></li>    
    <li class="last"><a href="contact.aspx">CONTACT</a></li>
    </ul>
    <p style="text-align:center; font-weight:bold;">CELEBRATING<br /><span style="font-size:22px">21</span><br />YEARS<br />1991-2012</p>
    </div>
<div id="homeright">
  <a class="various1" href="#architecture" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Architecture','',/Images/architectureBLACK.png',1)"><img src="/Images/architecture.png" alt="Architecture" width="195" height="31" id="Architecture" style="padding:0px 20px;float:left;"/></a>
  <a class="various1" href="#idesign" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('interiordesign','','/Images/interior-designBLACK.png',1)"><img src="/Images/interior-design.png" alt="Interior Design" width="195" height="31" id="interiordesign" style="padding:0px 0px 5px 20px; float:right;"/></a>
  <a class="various1" href="#pmanage" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Projman','','/Images/project-managementBLACK.png',1)"><img src="/Images/project-management.png" alt="Project Managment" width="195" height="31" id="Projman" style="padding:20px 42px 5px 20px;float:left;"/></a>
  <a class="various1" href="#planning" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Planning','','/Images/PlanningBLACK.png',1)"><img src="/Images/Planning.png" alt="Planning" width="195" height="31" id="Planning" style="padding:10px 12px 5px 0px;float:right;"/></a>
  <a class="various1" href="#energy" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Energy Assessment','','/Images/energy-assessmentsBLACK.png',1)"><img src="/Images/energy-assessments.png" alt="Energy Assessments" width="195" height="31" id="EnergyAssessment" style="padding:0px 42px 0px 20px;float:right;"/></a>
  <a class="various1" href="#surveying" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Surveying','','/Images/SurveyingBLACK.png',1)"><img src="/Images/Surveying.png" alt="Surveying" width="195" height="31" id="Surveying" style="padding:10px;float:left;" /></a>
  <a class="various1" href="#cost" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('CostManagement','','/Images/cost-managementBLACK.png',1)"><img src="/Images/cost-management.png" alt="Cost Management" width="195" height="31" id="CostManagement" style="padding:0px 12px 0px 20px; float:left;"/></a>
  <a class="various1" href="#land" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('landscape','','/Images/landscape-architectureBLACK.png',1)"><img src="images/Landscape-Architecture.png" alt="Landscape Architecture" width="195" height="31" id="landscape" style="padding:20px 0px 0px 20px; float:right;" /></a>
  <div id="various1"> <a href="http://www.innexdevelopments.co.uk" target="_blank"  onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('DesignBuild','','/Images/DESIGNANDBUILDBLACK.png',1)"><img src="/Images/DESIGNANDBUILD.png" alt="Design and Build" width="195" height="31" id="DesignBuild" style="padding:10px 0 0 0px;float:left;"/></a>
</div>
<div style="display:none"><div id="architecture">
<img src="/media/52/architecture.png" width="195" height="31" alt="Architecture" />
<p style="padding:0px 0px 5px 0px; width:500px;">From a house extension or housing estate, to commercial warehouses’, leisure centres and bars, Innex Design can help develop any idea into a practical, ethical, sustainable reality.</p>    
</div></div>

<div style="display:none"><div id="idesign">
<img src="/media/441/interior-design.png" width="195" height="31" alt="Interior Design" />
<p style="padding:0px 0px 5px 0px; width:500px;">Innex Design’s Interior and brand development designers are experts in spatial design, brand development and awareness, signage and menu design all of which is complimented with the interior design package delivered.</p>    
</div></div>
<div style="display:none"><div id="pmanage">
<img src="/media/727/project-management.png" width="195" height="31" alt="Project Management" />
<p style="padding:0px 0px 5px 0px; width:500px;">Many of our architectural and interior design developments are project managed ensuring the brief and end aim is delivered on time and on budget. Only with project management can we ensure our clients that the specification and quality is to the highest standard.</p>
</div></div>
<div style="display:none"><div id="planning">
<img src="/media/709/Planning.png" width="195" height="31" alt="Planning" />
<p style="padding:0px 0px 5px 0px; width:500px;">Innex Design undertake all planning application submissions from residential, commercial, listed and conservation area consents, national park along with Display of Advertisement applications. We also work with planning consultants to add value for developers and lenders by assessing land and building use potential.</p>
</div></div>
<div style="display:none"><div id="energy">
<img src="/media/328/energy-assessments.png" width="195" height="31" alt="Energy Assessments" />
<p style="padding:0px 0px 5px 0px; width:500px;">Innex Design can assist with providing full building services design and energy consultancy, and through one of our partners BREEAM assessment, Commercial EPC, Domestic EPC, Display energy certificates, New Build SAP or SBEM reports and Sustainability statements.</p>
</div></div>
<div style="display:none"><div id="surveying">
<img src="/media/917/Surveying.png" width="195" height="31" alt="Surveying" />
<p style="padding:0px 0px 5px 0px; width:500px;">Innex Design can provide a wide variety of surveys from measured and condition surveys of buildings, Topographical surveys, Structural surveys, Party Wall surveys, and provide assistance with Asbestos surveys, Land/Probate surveys, certification and many more.</p>
</div></div>

<div style="display:none"><div id="cost">
<img src="/media/248/cost-management.png" width="195" height="31" alt="Cost Management" />
<p style="padding:0px 0px 5px 0px; width:500px;">Innex Design offer all clients a comprehensive service that removes the burden of day to day costs-related issues.</p>
</div></div>
<div style="display:none"><div id="land">
<img src="/media/501/Landscape-Architecture.png" width="195" height="31" alt="Landscape Architecture" />
<p style="padding:0px 0px 5px 0px; width:500px;">We undertake all aspects of landscape architecture, from landscape master planning, conceptual design through to detailed planting schemes. We adopt a fresh approach to the design of each project where a high degree of design flair and innovation comes as standard. </p>
</div></div>
<div style="display:none"><div id="build">
<img src="/Images/DESIGNANDBUILD.png" width="195" height="31" alt="Design and Build" />
<p style="padding:0px 0px 5px 0px; width:500px;">In today’s industry and marketplace some clients prefer a one point of contact approach to projects, with this in mind we have developed a nationwide network of partnering contractors to enable clients to have the one point contact, whilst ensuring delivery of excellent quality and standards of workmanship.</p>
</div></div>
  </div>
</div><!-- end content -->
</div><!-- end wrapper --> 
```

知道为什么它会突然这样做吗？

所以这两行：

```
<a class="various1" href="#architecture" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Architecture','',/Images/architectureBLACK.png',1)"><img src="/Images/architecture.png" alt="Architecture" width="195" height="31" id="Architecture" style="padding:0px 20px;float:left;"/></a>

<a class="various1" href="#energy" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Energy Assessment','','/Images/energy-assessmentsBLACK.png',1)"><img src="/Images/energy-assessments.png" alt="Energy Assessments" width="195" height="31" id="EnergyAssessment" style="padding:0px 42px 0px 20px;float:right;"/>< 
```

/一>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:59:14.313

由于文件夹结构区分大小写，因此您的图像路径有误。代替

```
MM_swapImage('Energy Assessment','','/Images/energy-assessmentsBLACK.png',1) 
```

请试试

```
MM_swapImage('Energy Assessment','','/images/energy-assessmentsBLACK.png',1) 
```

（注意“图像”中未大写的“i”）

编辑：

此外，您在通话中提供的 ID 是错误的，IMG 元素的 ID 是“EnergyAssessment”而不是“Energy Assessment”：

```
MM_swapImage('EnergyAssessment','','/images/energy-assessmentsBLACK.png',1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:05:29.837

DiViS0R 关于能量评估错误是正确的，因为对于“架构”，您在第二个逗号后的函数调用中缺少语音标记

```
MM_swapImage('Architecture','',/Images/architectureBLACK.png',1) 
```

从您的其他代码的外观来看应该是这样

```
MM_swapImage('Architecture','','/Images/architectureBLACK.png',1) 
```

希望有帮助

# python - Python使用标准输出和文件输入写入文件

> ID：10818812
> 
> 赞同：6
> 
> 时间：2012-05-30T14:54:57.277
> 
> 标签：python, file-io

我有以下代码，它通过进行正则表达式替换来修改文件 test.tex 的每一行。

```
import re
import fileinput

regex=re.compile(r'^([^&]*)(&)([^&]*)(&)([^&]*)')

for line in fileinput.input('test.tex',inplace=1):
    print regex.sub(r'\3\2\1\4\5',line), 
```

唯一的问题是我只希望替换应用于文件中的某些行，并且无法定义模式来选择正确的行。所以，我想显示每一行并在命令行提示用户，询问是否在当前行进行替换。如果用户输入“y”，则进行替换。如果用户不输入任何内容，**则不**进行替换。

当然，问题在于通过使用`inplace=1`我已经有效地将标准输出重定向到打开的文件的代码。因此，没有办法向未发送到文件的命令行显示输出（例如询问是否进行替换）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T15:22:21.027

文件输入模块实际上是用于处理多个输入文件。您可以改用常规的 open() 函数。

像这样的东西应该工作。

通过读取文件然后使用 seek() 重置指针，我们可以覆盖文件而不是追加到末尾，因此就地编辑文件

```
import re

regex = re.compile(r'^([^&]*)(&)([^&]*)(&)([^&]*)')

with open('test.tex', 'r+') as f:
    old = f.readlines() # Pull the file contents to a list
    f.seek(0) # Jump to start, so we overwrite instead of appending
    for line in old:
        s = raw_input(line)
        if s == 'y':
            f.write(regex.sub(r'\3\2\1\4\5',line))
        else:
            f.write(line) 
```

[http://docs.python.org/tutorial/inputoutput.html](http://docs.python.org/tutorial/inputoutput.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T16:15:13.073

根据每个人提供的帮助，这就是我最终的结果：

```
#!/usr/bin/python

import re
import sys
import os

# regular expression
regex = re.compile(r'^([^&]*)(&)([^&]*)(&)([^&]*)')

# name of input and output files
if len(sys.argv)==1:
    print 'No file specified. Exiting.'
    sys.exit()
ifilename = sys.argv[1]
ofilename = ifilename+'.MODIFIED'

# read input file
ifile = open(ifilename)
lines = ifile.readlines()

ofile = open(ofilename,'w')

# prompt to make substitutions wherever a regex match occurs
for line in lines:
    match = regex.search(line)    
    if match is not None:
        print ''
        print '***CANDIDATE FOR SUBSTITUTION***'
        print '--:  '+line,
        print '++:  '+regex.sub(r'\3\2\1\4\5',line),
        print '********************************'
        input = raw_input('Make subsitution (enter y for yes)? ')
        if input == 'y':
            ofile.write(regex.sub(r'\3\2\1\4\5',line))
        else:
            ofile.write(line)
    else:
        ofile.write(line)

# replace original file with modified file
os.remove(ifilename)
os.rename(ofilename, ifilename) 
```

非常感谢！

# python - 如何在python中设置文件所有者？

> ID：10818824
> 
> 赞同：30
> 
> 时间：2012-05-30T14:55:35.850
> 
> 标签：python, file-permissions

首先可以用python设置文件的所有者吗？如果是这样，您如何使用 python 设置文件的所有者？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-05-30T14:56:37.467

```
os.chown(path, uid, gid) 
```

[http://docs.python.org/library/os.html](http://docs.python.org/library/os.html)

uid 和 gid 可以通过以下方式从字符串中检索

```
import pwd
import grp
import os

uid = pwd.getpwnam("nobody").pw_uid
gid = grp.getgrnam("nogroup").gr_gid 
```

参考：[如何按名称更改目录的用户和组权限？](https://stackoverflow.com/questions/5994840/how-to-change-the-user-and-group-permissions-for-a-directory-by-name)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-05T17:32:18.447

旧的，但将来可能对那些希望在 Windows 中设置文件所有者的人有所帮助。

*我还没有找到一个纯粹的“pythonic”方法，这是另一种选择：

Windows 提供了以下我们将利用的 takeown.exe 实用程序：

takeown /f folder_path /r /d Y（'r' 用于递归获取树中所有文件和文件夹的所有权，'d' 用于默认输入参数，允许获取所有文件\文件夹的所有权）。更多文档：[msdn docs](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/takeown#remarks)

代码示例：

```
from subprocess import STDOUT, check_output
check_output(["takeown", "/f", path_, "/r", "/d", "Y"], stderr=STDOUT) 
```

# memory-leaks - tcmalloc 不生成堆栈跟踪

> ID：10818825
> 
> 赞同：3
> 
> 时间：2012-05-30T14:55:39.517
> 
> 标签：memory-leaks, tcmalloc

我正在运行一个与 tcmalloc 链接的二进制文件，它没有为它正在检测的泄漏生成堆栈跟踪。

```
The output says:
The 1 largest leaks:
Leak of 1401231 bytes in 82093 objects allocated from:

If the preceding stack traces are not enough to find the leaks, try running THIS shell command:

pprof ../../prog "/tmp/prog.15062.prog-end.heap" --inuse_objects --lines --heapcheck  --edgefraction=1e-10 --nodefraction=1e-10 --gv 
```

当我运行 pprof 时，我收到一条消息，指出没有要打印的节点。

我附上了可疑内存泄漏的代码

```
HeapLeakChecker checker("prog");
....
assert(checker.NoLeaks()); 
```

关于如何调试的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:49:06.563

我建议尝试使用 -fno-omit-frame-pointer (gcc) 构建程序，因为在某些设置中可能需要帧指针来获取堆栈跟踪。

tcmalloc 通常使用 libunwind 来获取堆栈跟踪，但由于死锁问题，这并非在任何地方都可用。

一个有趣的信息是生成的文件（在这种情况下是 /tmp/prog.15062.prog-end.heap）是否包含一些地址。

# ruby - 如何在不使用自定义函数的情况下更改 Puppet 中的哈希键？

> ID：10818826
> 
> 赞同：1
> 
> 时间：2012-05-30T14:55:48.023
> 
> 标签：ruby, puppet, hash

在 Puppet 中是否可以在不调用类或自定义类型中的自定义函数的情况下更改哈希键？

几乎调用了常规的 ruby​​ 函数。

```
$myHash.keys.each { |k| $myHash[k + "_toto"] = $myHash[k]; $myHash.delete(k) } 
```

# php - 如何 - 如果满足条件，则将选择写入文件

> ID：10818828
> 
> 赞同：1
> 
> 时间：2012-05-30T14:55:50.920
> 
> 标签：php, forms, file, conditional-statements

我有以下 PHP 代码，它检查从单选按钮中选择了哪个选项，然后写入同名文件。

例如，来自名为“instrument”的单选按钮组，其中 4 个选项是

1.  风
2.  字符串
3.  打击乐器
4.  声乐

**如果用户选择“Wind”**，那么它将创建并写入一个名为“ **wind_instrument.txt** ”的文件。如果选择“strings”，它将创建文件“string_instrument.txt”等等。

这是我的PHP代码：

```
if ($_POST['instrument'] == "wind")
{

$lines = file('wind_instrument.txt');
$fopen = fopen("wind_instrument.txt", "w+");

}

elseif ($_POST['instrument'] == "strings")
{

$lines = file('strings_instrument.txt');
$fopen = fopen("strings_instrument.txt", "w+");

}

elseif ($_POST['instrument'] == "percussion")
{

$lines = file('percussion_instrument.txt');
$fopen = fopen("percussion_instrument.txt", "w+");

}

elseif ($_POST['instrument'] == "vocal")
{

$lines = file('vocal_instrument.txt');
$fopen = fopen("vocal_instrument.txt", "w+");

} 
```

**现在，如果满足其中一个条件，那么将继续我的代码中的下一步，即：**

```
fwrite($fopen, ("Instrument: ")."");
fwrite($fopen, $_POST["instrument"]."\n");
fwrite($fopen, ("<br>")."\n"); 
```

**我遇到的问题**是它没有创建文件，而且我确实设置了权限。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:12:31.893

您实际上可以进行一些重构以使其更易于维护，但这不是您的问题，但我会尽力帮助您。

```
<?php
  $instruments = array('wind', 'strings', 'percussion', 'vocal');

  if (in_array($_POST['instrument'], $instruments))
  {
    $instrument = $_POST['instrument'];
    $file_handle = fopen($instrument.'_instrument.txt', 'a+');
    $line = 'Instrument: '.$instrument."\n";
    fwrite($file_handle, $line);
  }
?> 
```

**重要**的是要知道我如何打开文件。我使用模式**a+**。文件说

> 开放阅读和写作；将文件指针放在文件末尾。如果该文件不存在，请尝试创建它。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T15:09:13.063

如果您已验证您有权打开和写入文件，那么根据条件执行此操作应该没有问题。我建议检查内容`$_POST`并确保其`instrument`存在并满足您的条件之一。或者，您可以添加一个`else`子句，如果未收到有效工具，则将提交写入错误文件。如果可行，它将确认问题出在 POSTed 变量上，而不是 fopen/fwrite。

如果您在项目符号列表中提供的选项是单选按钮的文字值，那么您的问题是它们是大写的，而您在`if`语句中测试的值不是。要么一致地将它们大写，要么`strtolower()`在比较之前将所有内容转换为一致的大小写。

# ms-access - 如何在关闭事件中取消表单关闭？

> ID：10818836
> 
> 赞同：9
> 
> 时间：2012-05-30T14:56:18.190
> 
> 标签：ms-access, vba

我确定这很简单，但我找不到。在访问表单的关闭事件中，如何取消关闭表单？我有一个计算表中记录的测试。如果该表有记录，我想询问用户是否要关闭或返回并使用它们。那么如何取消关闭事件呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T15:00:04.780

您可以使用 Unload 事件：

```
GlobalVar ButtonClicked

Private Sub Form_Open(Cancel As Integer)
     ButtonClicked = False
End Sub

Private ClickMe_Click(Cancel As Integer)
     ButtonClicked = True
End Sub

Private Sub Form_Unload(Cancel As Integer)
     If Not ButtonClicked Then
         Cancel = True
     End if
End Sub 
```

[数据库对象的事件顺序](https://support.office.com/en-us/article/Order-of-events-for-database-objects-e76fbbfe-6180-4a52-8787-ce86553682f9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:12:57.933

研究并尝试这段代码，它对我有用。用您选择的名称替换必要的变量名称。将代码粘贴到表单的 form_unload 事件中。警告!!!：执行此操作后，您会发现很难在设计和布局视图中访问您的表单

```
 Private Sub Form_Unload(Cancel As Integer)
        userresponse = MsgBox("Are you sure you want close? All your work wouldn't be saved", vbYesNo, "Database Information")
        Select Case userresponse
        Case 6
            Cancel = False
            'this line opens another form in my own case
            DoCmd.OpenForm "EngMenu"  

        Case 7
            Cancel = True
            'this line keeps my own form open in my own case
            DoCmd.OpenForm "UpdateForm"

        Case Else:

            MsgBox "You are not allowed to perform this operation", vbInformation, "Database Information"
        End Select
    End Subenter code here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-16T18:08:21.923

使用“Form_BeforeUpdate（取消为整数）”事件并将取消设置为 True。

请注意，除非您添加一些逻辑以实际允许更新数据库，否则您根本无法关闭。

# image - image() 修改 MATLAB 中的实际图像内容

> ID：10818837
> 
> 赞同：0
> 
> 时间：2012-05-30T14:56:22.393
> 
> 标签：image, matlab, plot, matlab-figure

我正在使用以下代码在 MATLAB 的图形窗口中显示图像。

```
im = imread('Image02.tif');
processAndDisplayImage(im);
hImage = image(im);
set(hImage,'ButtonDownFcn',@clickInImage); 
```

但问题是上面的第三行由于某种我不知道的原因使图像发生了变化。有没有办法在不修改的情况下获得图像句柄？

更新：解决了问题。请参考我下面的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:01:32.563

`image`图形命令无法更改图像。我只能猜测它以您不想要的方式显示图像。检查图像的范围 -

```
 max(im(:)); 
```

还有类型：

```
 class(im); 
```

并尝试找出问题所在

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:26:27.053

代替

```
 hImage = image(im); 
```

我用以下来解决我的问题。

```
 [hImage hfig ha] = imhandles(gcf); 
```

但我仍然不明白 image 命令对图中显示的实际图像的作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T15:28:15.827

也许您可以进行修改`processAndDisplayImage`，使其将显示图像的句柄作为输出变量返回？

# javascript - 自定义 PHP/JS 分析解决方案问题

> ID：10818839
> 
> 赞同：0
> 
> 时间：2012-05-30T14:56:27.673
> 
> 标签：javascript, ajax

好的，这是 Google Analytics（分析）代码的示例：

```
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'userIDhere']);
_gaq.push(['_trackPageview']);
_gaq.push(['_trackPageLoadTime']);

(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); 
```

我的问题是这个。我正在构建一个系统，以允许将基本分析样式脚本放置在不同的站点上，例如上面的 Google Analytics 代码，但我不确定如何检索发送的值并查询数据库。我什至应该查询数据库吗？也许基于文本的解决方案更好？任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:11:00.577

我将采取的第一步是深入了解不同的分析解决方案如何完成访客跟踪。需要解决的第一个问题是从访问者浏览器获取使用数据到您的服务器。

Google Analytics 通过请求“不可见的 .gif”并将所有数据作为查询参数附加到该请求中来实现这一点。您可以在此处阅读详细信息： [https ://developers.google.com/analytics/resources/concepts/gaConceptsTrackingOverview](https://developers.google.com/analytics/resources/concepts/gaConceptsTrackingOverview)

要解决的第二个问题是访问者身份：作为单个访问者跟踪多次访问和综合浏览量。同样，谷歌分析通过第一方 cookie 来实现这一点，您可以在此处详细了解：[https ://developers.google.com/analytics/resources/concepts/gaConceptsCookies](https://developers.google.com/analytics/resources/concepts/gaConceptsCookies)

当然，这些考虑因素都没有解决收集数据后您将如何处理数据，简短的回答是，是的，我相信您将需要一个数据库，作为基于文本的解决方案（我认为您的意思是服务器日志）将不足以进行数据检索。

# c - x86 E8 和 FF 调用，如何“即时”找到 E8 移位地址？基本的 x86 ASM 调用

> ID：10818841
> 
> 赞同：1
> 
> 时间：2012-05-30T14:56:32.723
> 
> 标签：c, assembly, x86, machine-code

我在这里使用二进制混淆，所以有一个充满操作码的缓冲区，而且我使用的是 Linux，所以，所有函数调用都使用相同的调用者/被调用者约定，这里没有问题。

我的问题是关于 E8 操作码，此操作码使用相对地址进行近距离调用。

我的问题是：我知道呼叫来自的地址，我知道我必须呼叫的地址，那么，我怎样才能找到我必须在 E8 呼叫中输入的班次地址？这是：

```
signed long src = (signed long)buffer + shift; //get the position where E8 instruction is
signed long dst = (signed long)srand;          //get the destination position where i want to call (yes, srand(long) function in this case.) 
```

所以在我的缓冲区中，我有：

```
buffer[] = "[....]\xE8\xFF\xFA\xFE\x54[.....]"; //example 
```

我需要用一个有效的指向 srand 的指针替换，我怎样才能从我拥有的东西中获取相对地址？

我只是认为我可以使用 FF 指令直接调用，但我不知道如何做到这一点。我无法将地址复制到（比如说）$eax，因为我不能在替换中放置超过 5 个的操作码（它会使上面的所有 jmp 调用都变成香蕉），而且我不明白是否有办法直接调用 5 个字节。

因此，如果有人知道如何获得正确的值来替换 E8 相对移位地址，或者如果有办法进行某种直接调用，保持与 E8 调用相同的功能属性并且只使用 5 个字节......

（在询问之前，我尝试将 FF XX XX XX XX 设置为 XX 作为真实地址，但它不起作用，x86 看起来不像是一个调用，它解释为一个 INC（？？？）和一些随机之后的事情我尝试以这种方式替换：

```
inline void endian_swap(long& x) {
      x = (x>>24) |
          ((x<<8) & 0x00FF0000) |
          ((x>>8) & 0x0000FF00) |
          (x<<24);
}

endian_swap(dst);
endian_swap(src);
unsigned int p = dst - src;
endian_swap(p); 
```

并将我找到的地址放入 E8 呼叫。无论如何它都没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T14:15:22.503

`near call`and `jxx`/指令中的相对地址`near jmp`等于您要转移控制的目标地址减去紧跟`call`or`jump`指令之后的指令地址。相对地址是相对于下一条指令的地址，而不是转移控制的地址。IOW，如果它的地址操作数是相对的，你必须考虑你的`call`or指令的长度。`jump`

通常没有相当于5 个字节或更短的`call`or指令。`jump`

您可以模拟`jmp`为`push target address`+ `ret`，但在具有任意目标地址的 32 位模式下，对于这 2 条指令，您至少可以获得 1+4+1=6 个字节。您可以以相同的方式进行模拟`call`，但您将添加另一个`push`或`call`指令以将返回地址放在堆栈上。因此，在这 6 个字节中，您再添加 5 个字节。

有一个“绝对”版本的“jmp”（以及 IIRC“调用”），它将地址操作数作为由目标偏移量和目标段组成的立即数。这样的指令至少有 1+4+2=7 个字节长（4 个字节用于偏移，2 个字节用于段选择器）。

如果您使用`call`or`jmp`从指定内存位置获取目标地址的变体（例如`call [ebx]`），则该指令将至少为 1+1=2 字节长（操作码 + ModR/M 字节），但您将拥有用包含目标地址的内存位置的地址加载一个寄存器，这将花费你一些其他的 1+4=5 个字节，给你至少 7 个字节。还有一个变体允许您在寄存器中指定目标地址（例如`jmp ebx`），但同样，由于必须加载寄存器，您至少需要 7 个字节。

您可以缩短`call`/`jump`指令的唯一方法是当目标地址非常接近该指令的地址时（在这种情况下，您可以使用任何一种`rel16`形式（使用适当的操作数或地址（我不记得是哪一个）覆盖前缀）或`rel8`表单（如果可用）或当目标地址较小时（在这种情况下`push target address`可以是更短`push Ib`的或更短的`operand size prefix + push Iw`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T13:54:40.577

我通过这样做解决了它：

```
long dst = (long)srand;
long src = ((long)buffer) + shift + 5; //begin of buffer + actual position + this instruction size
long p = dst - src;
p = htonl(p); 
```

比我替换缓冲区上的调用，一切正常。

# jquery - 加载外部内容并附加它

> ID：10818845
> 
> 赞同：0
> 
> 时间：2012-05-30T14:56:47.887
> 
> 标签：jquery, ajax, load, append

我正在尝试从外部文件加载一些文本，将其附加，然后将其传递给 div 容器，但无法使附加工作

```
$.get('gallery-lightbox.html', function (data) {
    var lb_content = data;
    $(lb_content).append('<p>some text</p>');    
    $('#lightbox').load(lb_content);
    positionLightboxImage();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:59:07.303

试试这个

```
$.get('gallery-lightbox.html', function (data) {
     var lb_content = data+'<p>some text</p>';    
       $('#lightbox').html(lb_content);
       positionLightboxImage();
}); 
```

**或者**

```
 $.get('gallery-lightbox.html', function (data) {
           $('#lightbox').append(data).append('<p>some text</p>');
           positionLightboxImage();
    }); 
```

并确保您的`gallery-lightbox.html`文件没有`<html>`或`<body>`标记等。它应该只具有`<div>`或您可以实际放入您的元素`#lightbox`

# facebook-graph-api - Facebook 应用程序，错误的访问令牌

> ID：10818847
> 
> 赞同：0
> 
> 时间：2012-05-30T14:56:53.050
> 
> 标签：facebook-graph-api, facebook-access-token

我正在使用图形资源管理器，并从应用程序下拉列表中选择我的应用程序。

我必须访问这张照片[https://graph.facebook.com/399744030064153](https://graph.facebook.com/399744030064153)。

当我选择应用程序时，facebook 会自动获取应用程序的访问令牌，我可以查看照片详细信息。

但是，在我的 php 应用程序中，当我这样做时

```
$access_token=$facebook->getAccessToken();
$photoObj=$facebook->api("https://graph.facebook.com/399744030064153?access_token=$access_token"); 
```

它不起作用，据我所知，访问令牌是错误的，因为我试图回显访问令牌并检查它。因此，问题是访问令牌

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:42:24.840

Graph API 浏览器会自动生成用户访问令牌，这使应用程序能够代表用户执行操作。- 在这种情况下，您自己的帐户。

SDK 中的 getAccessToken() 方法，如果单独使用（即不作为[记录的 Auth 流程](https://developers.facebook.com/docs/authentication/)的一部分）将返回一个 App Access Token，虽然它可以与 API 一起使用，但无法查看任何内容，除非它是公开可见的

# android - Android：如何将 Path 对象放入 Bundle？

> ID：10818851
> 
> 赞同：2
> 
> 时间：2012-05-30T14:57:05.077
> 
> 标签：android, path, bundle, parcelable

我想放入 Bundle 例如 Path 对象。我知道，我可以使用 putParcelable()，但是这个函数的参数应该实现 Parcelable 接口。我试图创建另一个继承 Path 并实现 Parcelable 的类，但我不知道如何实现 Parcelable 的功能。

您知道如何将 Path 对象放入 Bundle 中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:10:53.373

只是让你的课`extend Path`和`implement serializable`。然后你可以调用`putSerializable()`传递`Path`对象。

# java - Maven - 不要在最终 WAR 中包含 src/main/webapp 的某个子目录

> ID：10818853
> 
> 赞同：2
> 
> 时间：2012-05-30T14:57:09.520
> 
> 标签：java, maven, maven-war-plugin

(**行家 2.2.1** )

你好，我有这个目录树：

```
.
├── pom.xml
├── src
│   ├── main
│   │   └── webapp
│   │       ├── META-INF
│   │       ├── **resources**
│   │       │   ├── **bootstrap**
│   │       │   │   ├── **bootstrap**
│   │       │   │   │   ├── css
│   │       │   │   │   ├── img
│   │       │   │   │   └── js
│   │       │   │   ├── docs
│   │       │   │   ├── img
│   │       │   │   ├── js
│   │       │   │   ├── less
│   │       │   │   ├── LICENSE
│   │       │   │   ├── Makefile
│   │       │   │   ├── package.json
│   │       │   │   └── README.md
│   │       │   ├── cms
│   │       │   └── **static**
│   │       │       ├── css
│   │       │       ├── feeds
│   │       │       ├── img
│   │       │       ├── js
│   │       │       └── less
│   │       ├── WEB-INF 
```

我用双 * 突出显示有趣的目录...

在打包时，我试图`resources/bootstrap`从最终的 WAR中排除**并**复制`resources/bootstrap/boostrap`到`resources/static`.

换句话说，我需要获得以下内容：

```
.
│   │       ├── META-INF
│   │       ├── **resources**
│   │       │   ├── cms
│   │       │   └── **static**
│   │       │       ├── **bootstrap**
│   │       │       │   ├── css
│   │       │       │   ├── img
│   │       │       │   └── js
│   │       │       ├── css
│   │       │       ├── feeds
│   │       │       ├── img
│   │       │       ├── js
│   │       │       └── less
│   │       ├── WEB-INF 
```

我很不幸地搞砸了，`maven-war-plugin`但我仍然无法获得想要的结果。

这是我的 pom 相关部分的最新版本：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.2</version>
    <configuration>
        <packagingExcludes>WEB-INF/**.tld</packagingExcludes>
        <warSourceExcludes>resources/bootstrap</warSourceExcludes>
        <webResources>
            <resource>
                <!-- this is relative to the pom.xml directory -->
                <directory>src/main/webapp/resources/bootstrap</directory>
                <!-- override the destination directory for this resource -->
                <targetPath>resources/static</targetPath>
                <includes>
                    <include>bootstrap/**</include>
                </includes>
            </resource>
        </webResources>                 
    </configuration>
</plugin> 
```

预先感谢您提供任何后续提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:20:01.337

你很亲近；您需要指定`resources/bootstrap/**`参数`warSourcesExcludes`以省略整个树（目录及其所有子目录）。仅排除`resources/bootstrap`目录不会做任何事情，因为它仍然包含该目录的所有子目录，当它复制子目录并且父目录不存在时会自动创建目录。

所以你的配置应该有：

```
 <configuration>
        ...
        <warSourceExcludes>resources/bootstrap/**</warSourceExcludes>
        ...
    </configuration> 
```

并且不要忘记`clean`在再次打包战争之前运行一个 Maven。

# visual-studio-2010 - 如何在 Visual Web Developer 2010 中查看两个文件之间的区别？

> ID：10818855
> 
> 赞同：1
> 
> 时间：2012-05-30T14:57:10.507
> 
> 标签：visual-studio-2010, diff

我见过一些 SVN 工具使用“diff”命令来突出两个文件之间的差异。但是，我不明白如何在 Visual Web developer 2010 (Express) 中执行此操作。发现此方法的任何帮助将不胜感激。

谢谢，

PS：我在标签中包含了 visual-studio-2010，因为我认为它是最接近 web developer 2010 的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:04:41.133

我不确定 VWD 是否有自己的文件比较功能，但您可以使用 Windows SDK 中的 WinDiff。这是 7.1 版的链接 - [http://www.microsoft.com/en-us/download/details.aspx?id=8279](http://www.microsoft.com/en-us/download/details.aspx?id=8279)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:05:40.720

取自[http://msdn.microsoft.com/en-us/library/bb385990.aspx](http://msdn.microsoft.com/en-us/library/bb385990.aspx)

> 比较两个文件
> 
> ```
> On the View menu, click Other Windows, and then click Source Control Explorer.
> 
> In Source Control Explorer, right-click the version of the file that you want to 
>   compare, and then click Compare.
> NoteNote
> 
> As an option, you can right-click a file in Solution Explorer and then click Compare.
> 
> The Compare dialog box appears and the local path of the file that you selected is 
>   in the Source Path box.
> 
> Enter the Target Path or click Browse and locate the target folder.
> 
> Under Target Version, select the Type you want to use for comparison: Changeset,
>    Date, Label, Latest Version, or Workspace Version.
> 
> Click OK.
> 
> If the files have no differences, the Microsoft Visual Studio dialog box appears,
>   informing you that the files are identical. Click OK.
> 
> Otherwise, a difference window displays the files side by side. 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:00:27.287

我使用 devart 的代码比较工具，它对我来说非常有用。你可以在这里下载。

[http://www.devart.com/codecompare/](http://www.devart.com/codecompare/)

# gimp - 在索引图像上的 Script-Fu Gimp 中调整画布大小和更改分辨率

> ID：10818857
> 
> 赞同：2
> 
> 时间：2012-05-30T14:57:12.167
> 
> 标签：gimp, script-fu

我对 Script-Fu 有点陌生，需要将分辨率从 600DPI 更改为 300DPI，然后将画布大小调整为 1000px W x 2000px H，同时保持实际图像大小不变。否则我的照片会被拉长。

我确信脚本应该与我找到的这个类似。但是这个特别抱怨我的图像被索引并且它想要一个 RGB 图像。我不想做的...

```
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
;
; File = script-fu-grow-canvas.scm
; function name script-fu-grow-canvas
;
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
;
( define
  ( script-fu-grow-canvas
    theImage
    theDrawable
  )
  ;
  (gimp-image-undo-group-start theImage)

  ( let*
    (
      ; Define local variables
      ;    imageWidth, imageHeight, centerX, centerY
      ; Measure the height and width of the image.
      ; Calculate the center
      ( imageWidth ( car ( gimp-drawable-width theDrawable )))
      ( imageHeight ( car ( gimp-drawable-height theDrawable )))
      ( centerX ( / imageWidth 2 ))
      ( centerY ( / imageHeight 2 ))
      ( tenthWidth ( / imageWidth 8 ))
      ( tenthHeight ( / imageHeight 8 ))
      ( borderx tenthWidth )
      ( bordery tenthHeight )
      ( newWidth 0 )
      ( newHeight 0 )
      ( dummyLayer 0 )
      ( layername "DummyLayer" )
      ;
    ) ; End of Variable Declaration
    ; if Aspect ratio widget is unchecked make X and Y
    ;   length the greater of the two.
    ( set! newWidth ( + imageWidth ( * borderx 2 )))
    ( set! newHeight ( + imageHeight ( * bordery 2 )))
    ;
    ( set! dummyLayer (car ( gimp-layer-new
                theImage
                imageWidth
                imageHeight
                0
                layername
                10
                0 ))
    )
    ( gimp-image-add-layer theImage dummyLayer 1 )
    ( gimp-layer-resize dummyLayer
                newWidth
                newHeight
                borderx
                bordery )
    ( script-fu-para-tat-layer
          theImage
          dummyLayer
          layername )

    ( gimp-image-resize-to-layers theImage )
    ;
    ( gimp-drawable-set-visible dummyLayer FALSE )
    ( gimp-image-set-active-layer theImage theDrawable )

  ) ; END let*
  (gimp-image-undo-group-end theImage)

) ; END define

( script-fu-register "script-fu-grow-canvas"  ; Function Name
  "02 Expand Canvas"    ; Menu Label
  "Expand the image canvas based on image
   size"        ; Function Description
  "Stephen Kiel"         ; Author
  "2011, Stephen Kiel"   ; Copyright
  "December 2011"        ; Creation Date
  "*"                    ; Valid Image Type
  SF-IMAGE "theImage"  0
  SF-DRAWABLE "theDrawable" 0
) ; End script-fu-register
( script-fu-menu-register
     "script-fu-grow-canvas" "<Image>/Flowzilla/Flow - Standard") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:03:28.203

您正在使用 gimp-layer-new 创建一个新的 RGB 类型图层 - 这种类型的图层不能添加到索引图像中。

许多其他 script-fu 调用可能会被限制为索引图像 - 并且有一些方法可以解决它们 - 但这里不是这种情况

图层类型的值是您在“layername”参数之前放置的“0”。根据文档（使用 GIMP 帮助菜单中的“Procdure Browser”可见），有一个图层类型的枚举，您应该将 INDEXEDA-IMAGE 传递给它，用于索引图像（0 表示 RGB-IMAGE）。

重要的是使用文档中显示的命名常量，而不是它们所代表的数字，因为这些数字不能保证在不同版本中保持不变，并且由于使用名称会增加上下文和可读性代码。

同样，您不应将“10”用于图层模式，而应使用适合您的适当常量名称（GIMP 2.6 中的 LIGHTEN-ONLY-MODE）

# objective-c - UITextField - 为 leftView 添加 UIView - 无法获得焦点

> ID：10818861
> 
> 赞同：3
> 
> 时间：2012-05-30T14:57:28.323
> 
> 标签：objective-c, ios, interface-builder, uitextfield

我的应用程序中的 UITextFields 定义了占位符文本（在 Interface Builder 中），当我点击占位符文本占用的区域时，我无法使这些字段获得焦点（即显示键盘并允许编辑）。如果我在占位符文本之外的区域中点击文本字段（尽管仍在文本文件本身的范围内），它会正常工作（即弹出键盘，我可以编辑文本字段的内容）。我怎样才能解决这个问题？

谢谢。

**编辑 1**

好的，我想我明白了。我还为这些 UITextFields 的“leftView”属性设置了一个空白视图。如果我删除它，您可以触摸占位符文本区域中的 UITextFields，它会按预期做出反应；我需要这个左视图的视图。如果你把这个 spacer view 的背景颜色改成红色，你可以看到它根本没有碍事，所以我不知道出了什么问题。

为什么这段代码会导致这个问题？

谢谢。

```
+(UIView*)getTextFieldLeftSpacerViewWithBackgroundColor:(UIColor*)backgroundColor andHeight:(CGFloat)height
{
    UIView *leftWrapper = [[UIView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 8.0f, height)];
    leftWrapper.autoresizingMask = UIViewAutoresizingNone;
    [leftWrapper setOpaque:YES];
    if(backgroundColor){leftWrapper.backgroundColor = backgroundColor;}
    else{leftWrapper.backgroundColor = [UIColor clearColor];}
    return [leftWrapper autorelease];
}

+(void)setTextFieldLeftSpacerForTextFieled:(UITextField*)textField
{
    if(textField)
    {
        UIView *spacer = [MYViewController getTextFieldLeftSpacerViewWithBackgroundColor:nil andHeight:textField.bounds.size.height];
        textField.leftView = spacer;
        textField.leftViewMode = UITextFieldViewModeAlways;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T15:31:57.990

只是遇到了同样的问题，不想子类化，只需要使用：

```
leftWrapper.userInteractionEnabled = NO; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:27:08.537

我放弃了这种方法。我没有使用不可见的视图来偏移文本，而是选择了 UITextField 的子类，并为 UITextField 中的文本边界提供偏移 CGRect。以下 SO 帖子非常有帮助：

[缩进 UITextField 中的文本](https://stackoverflow.com/questions/7565645/can-i-indent-the-text-in-a-uitextfield)

# c# - 从 SqlDataAdapter 扩展 DataSet 类填充

> ID：10818865
> 
> 赞同：1
> 
> 时间：2012-05-30T14:57:40.773
> 
> 标签：c#, asp.net

```
class InspectionEquip : DataSet
{
    private readonly SqlConnection CPEC = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ToString());

    public InspectionEquip(string store)
    {
        CPEC.Open();
        SqlCommand comm = new SqlCommand("Select * From Equip3 Where Store = '" + store + "'", CPEC);
        SqlDataAdapter da = new SqlDataAdapter(comm);
        da.Fill(/* What to Put Here? Tried "this" and it just returns blank */);    
        CPEC.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:06:34.450

您的 SQL 查询有问题（*没有匹配的数据，错误的参数*）。`da.Fill(this)`工作正常。

如果你想要证据 -[`SqlCommand`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx)用你的交换这条线......

```
SqlCommand comm = new SqlCommand("select * from INFORMATION_SCHEMA.COLUMNS", CPEC); 
```

如果您只计划存储单个表结果[`DataTable`](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx)，您也应该可以扩展。[`DataSet`](http://msdn.microsoft.com/en-us/library/system.data.dataset.aspx)

# javascript - Flexscroll 在显示/隐藏 div 中不起作用

> ID：10818866
> 
> 赞同：0
> 
> 时间：2012-05-30T14:57:42.363
> 
> 标签：javascript, jquery

```
<div class="right_tab_content_part1_s">
        <a href="javascript:void(0)" class="active" id="classtabnew1" onclick="showHideDivforTabbingBeforeaward(1)">View Provider</a>
        <a href="javascript:void(0)" class="" id="classtabnew2" onclick="showHideDivforTabbingBeforeaward(2)">View Message</a>
    </div>

    <div style="display:block;" id="divtabnewBeforeaward1"></div>

    <div style="display:none;" id="divtabnewBeforeaward2"><div id="scroll2_msg" class="flexcroll"></div></div>

   <script type="text/javascript">
    function showHideDivforTabbingBeforeaward(id)
    {
        for(j=1;j<3;j++)
        {
            if(id==j)
            {
                document.getElementById('divtabnewBeforeaward'+j).style.display = 'block';
                document.getElementById('classtabnew'+j).className = 'active';
            }
            else
            {
                document.getElementById('divtabnewBeforeaward'+j).style.display = 'none';
                document.getElementById('classtabnew'+j).className = '';
            }
        }
    }
</script> 
```

Flexscroll 不起作用，即使我使用 enter`fleXenv.initByClass ("a-class-name-of-your-choice");`或`fleXenv.fleXcrollMain (yourDivElement);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:45:25.363

在关闭 body 标签之前使用它：

```
<div id='flexcroll-init'></div> 
```

# c# - 将 SQL 数据集保存到本地 MDB 文件

> ID：10818874
> 
> 赞同：2
> 
> 时间：2012-05-30T14:58:05.337
> 
> 标签：c#, sql, winforms, ms-access, oledb

*语境*

我的应用程序使用一个 SQL 数据库，它在我的应用程序开始时从该数据库中读取我的数据表。如果应用程序无法连接到 SQL DB，我有一个本地 Ms Access .MDB 文件。我有一个单独的线程来检查本地数据库是否已过时。

我有一个从我的 SQL 连接获得的 DataTable --> 已验证并且可以工作 我可以在本地连接到我的 Access 数据库并从中读取 --> 已验证并且可以工作

*问题/问题*

我正在尝试通过使用从 SQL 连接获得的 DataTable 更新本地数据库来更新它。

```
public static void UpdateLocalDatabase(string strTableName, OleDbConnection MyConnection, DataTable MyTable)
{
    try
    {
        if (CreateDatabaseConnection() != null)
        {
            string strQuery = "SELECT * FROM " + strTableName;
            OleDbDataAdapter MyAdapter = new OleDbDataAdapter();
            OleDbCommandBuilder MyCommandBuilder = new OleDbCommandBuilder(MyAdapter);
            MyAdapter.SelectCommand = new OleDbCommand(strQuery, odcConnection);
            MyAdapter.UpdateCommand = MyCommandBuilder.GetUpdateCommand();
            MyConn.Open();
            MyAdapter.Update(MyTable);
            MyConn.Close();
        }
    }
    catch { }
} 
```

如果我调试这个片段，所有变量都是它们应该是的：

*   strTableName = 我的表的正确名称
*   MyConn = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=MyLocation;Persist Security Info=True;JET OLEDB:Database Password=MyPassword;"
*   MyTable = 是我的应用程序进一步使用的正确表

这个过程没有错误地运行，也没有使用catch，但它没有触及我的数据库，它只是没有做任何事情。

我是在这里丢球还是只是错过了明显的东西，我不知道，但我浏览了很多文章，除了展示 MyAdapter.Update() 之外，似乎没有更多内容。

欢迎任何帮助。

谢谢，

凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:09:09.263

您的备份数据库是否必须处于访问状态？因为如果您使用 SQL Compact Edition，那么在两者之间进行复制会更容易吗？

是的，这意味着将它与您的安装程序一起附加，或者只是确保所有客户端计算机都预安装了它，但是它是免费的。

如果这是一个问题，那么您需要做的所有事情（我认为，不是自己做的）就是转到您的安装程序项目属性，单击先决条件，然后勾选 SQL compact，以便在您的应用程序可以使用之前安装它， iv 之前使用其他框架完成了此操作，它只是弹出一个带有安装屏蔽的框，询问他们是否要下载必要的软件，只需单击一下，就应该为他们完成。

您还需要使用紧凑型数据库吗？

顺便说一下，一个负面因素是它确实缺乏一些高端功能，但不应该影响平均数据库工作

*编辑*

如果您将使用 sql CE，您可以通过单击数据和新数据源轻松地在 VS 中创建数据库，然后按照步骤确保在询问时放置 sql CE

如果它有效，你最终会得到一个 .sdf 数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:02:44.200

我在这里提供了一个代码片段来解决我的相关问题：[Export SQL DataBase to WinForm DataSet and then to MDB Database using DataSet](https://stackoverflow.com/questions/10786458/export-sql-database-to-winform-dataset-and-then-to-mdb-database-using-dataset)

# database - 用于计划的数据库 - 使用 cron 根据重复计划来计划单个任务？

> ID：10818898
> 
> 赞同：0
> 
> 时间：2012-05-30T14:59:52.410
> 
> 标签：database, database-design

我目前正在设计一个数据库：

1) 有一个任务列表，例如：

```
Clean the floor.
Wipe the sink.
Take swabs. 
```

2) 有一个区域列表，例如：

```
Kitchen.
Servery. 
```

3) 针对一个区域安排任务，可以是“每小时”、“每天”、“每周”、“每月”或“每年”。我将称之为 AreaTask（区域、任务、频率）：-

```
Kitchen, Clean the floor, Daily 
```

4) AreaTask 将在工作日开始时到期（如果是每日、每周、每月或每年），或者如果是每小时，则在小时开始时到期 - 根据时间表。例如，如果“清洁地板”安排在星期三“每周”，那么在每个星期三开始时，它将变为到期，并在当天保持到期，直到完成（工作、签字等） - 或超过一定时间就会变成OverDue。

5) 当针对 AreaTask 完成工作时，它会记录在数据库中（区域、任务、用户 [工作人员]、日期时间 [工作完成]）：-

```
Kitchen, Clean the floor, Joe Bloggs, 2012-05-23 10:50:00 
```

这是我要决定的：

我可以在任何特定时间仅通过查询来*确定*AreaTask 的各种状态，因为所有数据都在那里（即我可以确定 AreaTask 将在星期三到期，如果没有工作，我可以确定它过期在设定的时间之前针对该 AreaTask 完成）。但是，我想知道是否应该有一个由 CRON 作业或其他方式填充的 AreaTaskDue 表。

这样我在数据库中有一个正式的条目来查询和存储数据，例如：

ScheduledTask (Area, Task, ScheduledDateTime) 厨房, 清洁地板, 2012-05-23 06:00:00

如果需要，这也将允许手动安排任务。

然后，当针对 ScheduledTask 完成工作时，可以针对 ScheduledTask 本身记录它：

ScheduledTaskWork (Area,Task,ScheduledDateTime,User,DateTime) Kitchen, Clean the floor, 2012-05-23 06:00:00, Joe Bloggs, 2012-05-23 11:30:00

我希望这有点道理。

PS这是基于RDBMS的数据库-不是OO。我倾向于使用视图从不同的角度查看数据。

谢谢。

PS也许CRON作业也会将ScheduledTask标记为OverDue而不是确定它。我想问题是关于这些正式状态是否应该存储在数据库中，或者确定。我可以存储它们的唯一方法是运行某种 CRON 作业（这很好，只要我知道没有更好的方法）。

编辑：反对派生状态的一个论点是时间表可能会改变 - 但是我确实将历史记录保存在数据库中，所以我仍然可以派生 - 但我想得越多，我就越倾向于使用 CRON 作业来安排基于计划的任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:15:17.930

看看这个模型：

![在此处输入图像描述](../Images/9ccd8def80202040d016c68a0f5e1fdd.png)

每次启动任务时，都会在 WORK 表中插入一个新行。完成后，设置 WORK.COMPLETED_AT。

您可以像这样找到今天尚未完成的日常任务（及其区域）：

```
SELECT *
FROM SCHEDULE
WHERE
    FREQUENCY = 'daily'
    AND NOT EXIST (
        SELECT * FROM WORK
        WHERE
            SCHEDULE.AREA_ID = WORK.AREA_ID
            AND SCHEDULE.TASK_ID = WORK.TASK_ID
            AND DAY(COMPLETED_AT) = TODAY
    ) 
```

将 DAY 和 TODAY 替换为特定于您的数据库的任何内容，并且您可能希望对 FREQUENCY 使用整数而不是字符串。

可以为其他频率设计类似的查询。

手动计划任务可以通过类似于 SCHEDULE 的表建模，但 FREQUENCY 被显式时间替换。

# android - Android：飞行模式开启时的LocationManager

> ID：10818900
> 
> 赞同：1
> 
> 时间：2012-05-30T14:59:55.097
> 
> 标签：android, geolocation, xamarin.android, locationmanager, airplane

我正在`location`使用各种配置测试我的应用程序的一部分。在`AirPlane`模式下，我没有收到任何来自Android 2.2 上`ILocationListener`的以下消息的消息，无论好坏。`LocationManager`在这种情况下，bestProvider 是“network”。

如何确定是否根本无法获取位置以便通知用户？当有网络或 GPS 时，一切正常。

我使用的代码（**Android** C# 的 Mono）是：

```
 var cr = new Criteria ();
            cr.Accuracy = Accuracy.Coarse;
            cr.PowerRequirement = Power.Low;
            cr.AltitudeRequired = false;
            cr.BearingRequired = false;
            cr.SpeedRequired = false;
            cr.CostAllowed = true;
            string serviceString = Context.LocationService;
            locationManager = (LocationManager)GetSystemService (serviceString);
            var bestProvider = locationManager.GetBestProvider (cr, false);
            locationManager.RequestLocationUpdates (bestProvider, 5000, 500f, this); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:18:09.880

就像您的位置侦听器一样，您可以在或`this`中看到状态。阅读此[API](http://developer.android.com/reference/android/location/LocationListener.html)以获取更多信息，每个状态的含义`onProviderEnabled (String provider)``onProviderDisabled (String provider)``onStatusChanged (String provider, int status, Bundle extras)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:23:51.040

您不能在 AirPlane 模式下使用任何类型的通信，如 GPS、GPRS。飞行模式是大多数手机、智能手机和其他电子设备上可用的一种设置，当使用它时，会暂停设备的许多信号传输功能——从而禁用设备拨打或接听电话或短信的能力——同时仍允许使用其他不需要信号传输的功能（例如，游戏、内置摄像头、MP3 播放器）。

# r - R 全局安装包

> ID：10818903
> 
> 赞同：13
> 
> 时间：2012-05-30T15:00:02.820
> 
> 标签：r, windows, package-managers

如何在全局范围内安装 R 包，以便所有用户都可以使用它？目前我正在做

```
R.exe CMD INSTALL *.zip 
```

但它确实

```
* installing to library 'C:/Users/Matt/Documents/R/win-library/2.15' 
```

我想将这些软件包与 R 一起安装在 Windows 的“程序文件”中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T15:40:55.920

您的大问题是安装到`C:\Program Files\`. 这意味着在具有文件权限的 Windows 版本上，您需要管理员权限才能写入该文件夹。由于 R 通常不请求管理员权限，因此它将默认安装到用户子目录，除非您以管理员身份运行 R（通过右键单击快捷方式）。在这种情况下，您可以使用 GUI 安装软件包，默认情况下它将全局安装它们。要在命令行上工作，您还可以`cmd`以管理员身份运行会话。

将来，建议您安装 R`C:\R\`来避免这种情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-07T15:17:10.037

对我有用的是运行：

```
install.packages("MyPackage", lib="C:\\Program Files\\R\\R-3.0.1\\library") 
```

安装它对`Program Files`我来说不是问题 - 问题是默认安装目录在`C:\\Users\\Mike\\Documents\\R\\...`

最终，您只想将其安装到`.libPaths()`默认情况下的任何位置，并且在我最常见的环境中`C:\\Program Files\\R\\R-3.0.1\\library`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T15:19:40.123

这是一种指定在何处查找或安装库的方法。您可以将库放在一个公共目录中。

[http://cran.r-project.org/doc/manuals/R-admin.html#Managing-libraries](http://cran.r-project.org/doc/manuals/R-admin.html#Managing-libraries)

# google-maps - 如何将谷歌地图链接到一个div？

> ID：10818910
> 
> 赞同：4
> 
> 时间：2012-05-30T15:00:13.680
> 
> 标签：google-maps, google-maps-api-3

我在 div 上设置了谷歌地图（api v3）。然后我想通过 div 检索地图。

做类似的事情

```
theMap = $('.myDiv').theGoogleMap; 
```

我找不到这个简单的信息。感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-19T14:13:09.193

也许这对于原始海报来说为时已晚，但可能对其他人有所帮助。在自己解决之前，我也花了一些时间搜索。结果真的很简单。

假设保存地图的 div 如下所示：

```
<div id="myMap"></div> 
```

创建地图时，将对地图对象的引用作为属性添加到保存地图的文档元素中：

```
// Create the map
originalMapObject = new google.maps.Map('myMap', map_options);

// Get the DOM Element
var element = document.getElementById('myMap');

// Create a random property that reference the map object
element.gMap = originalMapObject; 
```

当您再次需要地图对象时，只需执行以下操作

```
gmap = document.getElementById('myMap').gMap 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T15:09:41.717

好吧，你不能这样做，你可以声明一个全局变量并将对地图对象的引用保存在该变量中。查看 google 文档中的示例。

```
 var map;
      function initialize() {
        var myOptions = {
          zoom: 8,
          center: new google.maps.LatLng(-34.397, 150.644),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map_canvas'),
            myOptions);
      }

      google.maps.event.addDomListener(window, 'load', initialize); 
```

这里还有一个 Javascript 教程：

[https://developer.mozilla.org/en/JavaScript/Guide](https://developer.mozilla.org/en/JavaScript/Guide)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T15:10:25.450

API 不能朝那个方向工作。创建对象时，您必须在 javascript 中保留对对象的引用。您无法从 DOM 引用中查找地图对象。

# excel - matlab在GUI中生成excel文件

> ID：10818912
> 
> 赞同：1
> 
> 时间：2012-05-30T15:00:25.143
> 
> 标签：excel, matlab, activex, matlab-guide

我有`example.xlsx`包含一些数据的文件。

我想在 GUI 中显示数据，并且希望有一个选项可以在 GUI 中编辑 xlsx 文件。

有没有办法做到这一点？有人知道吗？

我试图通过 ActiveX 控件找到 xls，但我没有看到该选项：/

我有 matlab 2010a，当我按下“ActiveX 控件”时，这些是我的选项：

![在此处输入图像描述](../Images/0bb8804092c10920f841210abfcaa3e6.png)

谢谢你 ：]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T18:23:42.390

你不需要 activeX，matlab 有内置函数**xlswrite**和**xlsread**：

帮助文件：

> **xlswrite** (filename,A) 将数组 A 写入 Excel 文件文件名中的第一个工作表，从单元格 A1 开始。
> 
> xlswrite(filename,A,sheet) 写入指定的工作表。
> 
> xlswrite(filename,A,range) 写入文件第一个工作表中由 range 指定的矩形区域。使用语法“C1:C2”指定范围，其中 C1 和 C2 是定义区域的两个相对角。
> 
> xlswrite(filename,A,sheet,range) 写入指定的工作表和范围。
> 
> status = xlswrite(filename,A,sheet,range) 返回写操作的完成状态：true（逻辑1）表示成功，false（逻辑0）表示失败。输入表和范围是可选的。
> 
> [status,msg] = xlswrite(filename,A,sheet,range) 返回结构消息中写入操作生成的任何警告或错误消息。输入表和范围是可选的。

和：

> [num,txt,raw] = **xlsread** (filename) 从名为 filename 的 Microsoft Excel 电子表格文件中的第一个工作表中读取数据，并返回数组 num 中的数值数据。（可选）返回元胞数组 txt 中的文本字段，以及元胞数组 raw 中的未处理数据（数字和文本）。如果您的系统没有 Excel for Windows，则 xlsread 在基本导入模式下运行，并且仅读取 XLS 或 XLSX 文件。
> 
> [num,txt,raw] = xlsread(filename,sheet) 读取指定的工作表。
> 
> [num,txt,raw] = xlsread(filename,range) 从文件中第一个工作表的指定范围读取数据。使用语法“C1:C2”指定范围，其中 C1 和 C2 是定义区域的两个相对角。
> 
> [num,txt,raw] = xlsread(filename,sheet,range) 从指定的工作表和范围读取。
> 
> [num,txt,raw] = xlsread(filename,-1) 打开 Excel 窗口以交互方式选择数据。仅在装有 Excel 软件的 Windows 系统上受支持。
> 
> [num,txt,raw] = xlsread(filename,sheet,range,'basic') 以基本模式从电子表格中读取数据，在没有 Excel for Windows 的系统上是默认模式。
> 
> [num,txt,raw,custom] = xlsread(filename,sheet,range,'',functionHandle) 从电子表格中读取数据，对数据执行与 functionHandle 关联的函数，并返回最终结果。（可选）返回额外的自定义输出，这是函数的第二个输出。xlsread 不会更改电子表格中存储的数据。仅在装有 Excel 软件的 Windows 系统上受支持。

[http://www.mathworks.com/help/techdoc/ref/xlswrite.html](http://www.mathworks.com/help/techdoc/ref/xlswrite.html)

通过您选择的用户交互和显示样式（不确定是否需要绘图或表格、按钮或滑块），这允许您与 xls 文档进行交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:06:48.053

在 GUIDE 中尝试 activeX 控件。其中之一是 Excel 控件。

# c# - 合并可能为空的 LINQ 查询结果

> ID：10818913
> 
> 赞同：2
> 
> 时间：2012-05-30T15:00:27.290
> 
> 标签：c#, linq, coalesce, null-coalescing-operator

我使用 Linq 从 4 个级联下拉菜单中返回 ID。

用户可能已经从 1 个或所有菜单中选择了 1 个或多个值。然后从用户的选择中查询代表 ID 的 DataTable 的文本列。

如果用户从第 4 个（也是最低级别）下拉列表中进行选择，那么他们会从上述所有下拉列表中进行选择。

如果用户从菜单 1 中选择“X”，从菜单 2 中选择“Y”，而在其他人中没有任何内容，我希望`results1`在 [Col_1] 中存在“X”的 10 行中看到，然后会向下查询说`results2`[Col_2] 中存在“Y”的5 行。

**编辑** 代码（基本形式）

```
var results1 = 
    from a in dt.AsEnumerable()
    where stringArray1.Contains([Col1])
    select a;

var results2 = 
    from a in results1
    where stringArray2.Contains([Col2])
    select a;

var results3 = 
    from a in results2
    where stringArray3.Contains([Col3])
    select a;

var results4 = 
    from a in results3
    where stringArray4.Contains([Col4])
    select a;

var results = results4 ?? results3 ?? results2 ?? results1; 
```

`results4`取决于`results3`、`results3`on`results2`和`results2`on的结果`results1`。

可能`results4 - 2`是空的，因此我想知道是否可以将它们合并为最终变量，例如：

```
var results = results4 ?? results3 ?? results2 ?? results1; 
```

这是抛出错误：

```
Operator '??' cannot be applied to operands of type 'System.Collections.Generic.IEnumerable<AnonymousType#4>' 
```

有没有人有任何狡猾的想法如何解决这个问题？我尽量不写冗长的代码，处理所有可能的结果。

提前谢谢大家（希望这个问题是有道理的！）

厘米

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T15:06:53.403

因此，根据您使用的查询，任何结果都不会是`null`. 其中一些可能是空的，但它们不会是`null`。这意味着`??`操作员永远不会做任何有用的事情。

你希望这个行为如何？你想说“如果这个结果是空的，就用这个另一个？” 为此，请使用我在下面编写的方法。

```
public static IEnumerable<T> Coalesce<T>(IEnumerable<T> first, IEnumerable<T> second)
{
  if(first == null || !first.Any())
  {
    return second;
  }
  else
  {
    return first;
  }
} 
```

这可以用作：

```
Coalesce(results4, Coalesce(results3, Coalesce(results2, results1))); 
```

这样做的结果是，“return `result4`，除非它是空的。如果它是空的 return `results3`。如果`results3`是空的 return `results2`，如果`results2`是空的 return `results1`。”

如果您认为自己会使用它，可以将其作为扩展方法。它会使它更漂亮，但也会使所有其他`IEnumerable`s 的智能感知变得混乱，因此它可能不值得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:43:09.110

如果您不想编写冗长的代码，您可以这样做

```
public static IEnumerable<T> SomeOrAll<T>(
    this IEnumerable<T> source, 
    Predicate<T> where)
{
    var results = source.Where(where)
    return results.Any() ? results : source;
}

var results = dt.AsEnumerable()
    .SomeOrAll(a => a.stringArray4.Contains([Col4]))
    .SomeOrAll(a => a.stringArray3.Contains([Col3]))
    .SomeOrAll(a => a.stringArray2.Contains([Col2]))
    .SomeOrAll(a => a.stringArray1.Contains([Col1])); 
```

但是，我怀疑，如果你退后一点，你可以做点别的。如果人们经常需要这个扩展，它已经存在（也许。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T16:13:10.990

我会重写查询来解决问题，而不是事后处理它。

```
public List<string> FilterResults(string first, string second, string third, string fourth)
{
    var query = from a in dt.AsEnumerable()
                let firsts = first != null ? a.Where( x => x.stringArray1.Contains( first ) ) : null,
                let seconds = second != null ? firsts.Where( x => x.stringArray2.Contains( second ) ) : null,
                let thirds = third != null ? seconds.Where( x => x.stringArray3.Contains( third ) ) : null,
                let fourths = fourth != null ? thirds.Where( x => x.stringArray4.Contains( fourth ) ) : null
                select fourths ?? thirds ?? seconds ?? firsts;
    return query.ToList();
} 
```

我没有通过 VS 运行它，但应该会遇到一般的想法。

# wix - Wix 引导程序卸载快捷方式

> ID：10818914
> 
> 赞同：4
> 
> 时间：2012-05-30T15:00:28.933
> 
> 标签：wix, installation, burn

我正在尝试创建快捷方式来卸载引导程序已安装的任何内容。因此，我只想在添加和删除程序时执行与卸载相同的操作。

我发现 de bootstrapper 安装在 package cache{guid}[bootstrappername].exe

它安装的其中一个 msi 软件包还安装了此引导程序 /uninstall 调用的快捷方式。但是问题是包的 GUID 在每次构建时都会重新生成。所以我有些如何将其设置为 msi 属性。但我无法弄清楚如何做到这一点，在我看来，GUID 在构建过程中是未知的，但只有在构建完成后才知道？

还有另一种方法来确定缓存引导程序的位置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T10:20:18.007

如果您使用托管 BA，您可以尝试以下操作：

在与 MsiPackage 链接的 Bundle.wxs 中，添加 MsiProperty，如：

`<MsiPackage SourceFile="Setup.msi"> <MsiProperty Name="UNINSTALLER_PATH" Value="[UNINSTALLER_PATH]"/> </MsiPackage>`

在代码中的某处（在调用安装操作之前），您需要为此变量设置值，如下所示： `Engine.StringVariables["UNINSTALLER_PATH"] = string.Format(@"{0}\{1}\{2}\{3}.exe", Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData), "Package Cache", Engine.StringVariables["WixBundleProviderKey"], ProductName);`

Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData) – %systemdir%:\ProgramData 的路径

Package Cache- 安装包缓存的 ProgramData 中的文件夹名称

Engine.StringVariables["WixBundleProviderKey"] – 缓存包创建的文件夹名称 (guid)

ProductName – 引导程序“exe”的名称</p>

最后，在您的 Product.wxs 中，您可以创建快捷方式，但在“Target”属性中，您需要传递 UNINSTALLER_PATH 值和“Arguments”设置 =“/uninstall”：

`<Shortcut Id="Shortcut1" Name="Uninstall" Description="Uninstall" Target="[UNINSTALLER_PATH]" Arguments="/uninstall" WorkingDirectory="Programmenufolder" />`

对不起我的英语不好 ：）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-23T19:06:47.680

您可以使用您在 bundle.wxs 中定义的包升级代码来确定位置。

使用注册表路径到您的捆绑包的 Windows 卸载位置

HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall{你的包的升级代码}

或 64 位操作系统

HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall{你的包的升级代码}

值**BundleCachePath**包含完整路径，包括您的 bootstrapper.exe 文件名到缓存包的包缓存。

您还可以使用包含完全安静卸载命令或**UninstallString的值****QuietUninstallString**以非安静模式启动卸载。

# php - wordpress登录问题

> ID：10818920
> 
> 赞同：0
> 
> 时间：2012-05-30T15:00:42.223
> 
> 标签：php, wordpress

我创建了一个自定义弹出登录框。并使用这样的表单设置

```
<form action="<?php bloginfo('url'); ?>/wp-login.php?redirect_to=<?php echo urlencode($_SERVER['REQUEST_URI']); ?>" method="post" autocomplete="off"> 
```

我使用这样的输入字段

```
<input id="login_username" name="user_name" type="text" value="" class="pop-input surfix" /><span id="placeholder_user_login">Username</span>

<input id="login_password" name="user_password" type="password" value="" class="pop-input" /><span id="placeholder_user_pass">Password</span>

<input id="register" type="submit" value="Login" class="popup-login-btn" /> 
```

但它重定向到 wp-login.php，除了它应该处理登录并重定向到用户开始登录的页面。

请指导我如何解决这个问题。

谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T05:26:05.850

实际上问题在于输入字段的名称元素。

当我检查 wp-login.php 页面时，我发现 wordpress 更改了输入字段的名称。

```
<input id="login_username" name="user_name"
<input id="login_password" name="user_password" 
```

至

```
<input id="login_username" name="log"
<input id="login_password" name="pass" 
```

所以我只是简单地替换名称，所有问题都解决了。

谢谢你们

# android - 在 Android 应用程序中保存 LinkedList 的简单方法？

> ID：10818922
> 
> 赞同：2
> 
> 时间：2012-05-30T15:00:45.793
> 
> 标签：android

在 android 应用程序中保存对象列表的最简单或本地方法是什么？

我需要保存它，然后在应用程序再次启动时加载它。

会很好，也许有人有一个随时可用的库，它为我制作了一切。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T15:10:29.553

让您的物品存放在`LinkedList`工具中，[`Parcelable`](http://developer.android.com/reference/android/os/Parcelable.html)这样您就可以将它们放入您的`bundle`. 在`onSaveInstance`你可以把你的对象在`bundle`使用中：

```
bundle.putParcelableArrayList ("key", list); 
```

并使用以下`onRestoreInstanceState`方法`Activity`从中获取数据`bundle`：

```
bundle.getParcelableArrayList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T15:06:26.453

我通常不提供完整的答案，但因为它在我的剪贴板中......

这应该适用于任何 List 实现。

此外，您需要定义/交换`Constants.EXTERNAL_CACHE_DIR`，并且可能希望使用 UI-Thread 以外的其他东西进行生产。

```
 public static void persistList(final List<String> listToPersist, final String fileName) {
    FileWriter writer = null;
    BufferedWriter bufferedWriter = null;
    File outFile = new File(Constants.EXTERNAL_CACHE_DIR, fileName);
    try {
      if (outFile.createNewFile()) {
        writer = new FileWriter(outFile);
        bufferedWriter = new BufferedWriter(writer);
        for (String item : listToPersist) {
          bufferedWriter.write(item + "\n");
        }
        bufferedWriter.close();
        writer.close();
      }
    } catch (IOException ioe) {
      Log.w(TAG, "Exception while writing to file", ioe);
    }
  }

  public static List<String> readList(final String fileName) {
    List<String> readList = new ArrayList<String>();
    try {
      FileReader reader = new FileReader(new File(Constants.EXTERNAL_CACHE_DIR, fileName));
      BufferedReader bufferedReader = new BufferedReader(reader);
      String current = null;
      while ((current = bufferedReader.readLine()) != null) {
        readList.add(current);
      }
    } catch (FileNotFoundException e) {
      Log.w(TAG, "Didn't find file", e);
    } catch (IOException e) {
      Log.w(TAG, "Error while reading file", e);
    }
    return readList;
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T15:07:32.420

你有没有试过共享偏好..？当您的应用程序即将退出时，使用共享首选项保存它，并在应用程序启动时再次加载该首选项。

# javascript - 使用 javascript 设置的文本缩进在 Firefox 中具有双重值

> ID：10818927
> 
> 赞同：0
> 
> 时间：2012-05-30T15:00:55.627
> 
> 标签：javascript, firefox, text-indent

我有一些 javascript 计算一个值并将其作为文本缩进应用于选择列表。除了在 Firefox 上（我使用最新版本）外，这可以跨浏览器和设备正常工作。

使用 firebug，我可以看到正确的文本缩进像素值被应用为内联样式，但结果是缩进宽度的两倍。

如果我禁用文本缩进并应用与左填充相同的像素值，我可以看到它是正确的。如果我禁用 javascript 并使用普通 CSS 应用相同的文本缩进，它也可以正常工作。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:19:19.380

出于某种原因，将文本缩进应用于包含选择列表的 div 可以正常工作。

# c# - C# SQLCommand 不起作用

> ID：10818933
> 
> 赞同：0
> 
> 时间：2012-05-30T15:01:13.233
> 
> 标签：c#, sql, sqlcommand

我有一个使用以下方法的 WebService：

```
 [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    [WebMethod]
    public string Login(string passwort, string email, string firma)
    {
        return LoginHelper.Login(passwort, email, firma);
    } 
```

我的 LoginHelper 代码：

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data;
using System.Data.SqlClient;

namespace WebService1
{
    public class LoginHelper
    {
        public static string Login(string passwort, string email, string firma)
        {
            string userName = "";

            SqlConnection con = new SqlConnection(@"Data Source=Yeah-PC\SQLEXPRESS;Initial Catalog=works;Integrated Security=true;");

        SqlCommand cmd = new SqlCommand(@"SELECT firma FROM TestData 
                                  WHERE email = @email", con);
        cmd.Parameters.AddWithValue("@email", email);

        con.Open();

        SqlDataReader dr = cmd.ExecuteReader();
                while (dr.Read())
      {
   //userName += dr["email"].ToString();
   //userName += dr["passwort"].ToString();
   userName += dr["firma"].ToString();
     }
    dr.Close();
    con.Close();
    return userName;
        }

    }
} 
```

谢谢你们的帮助

我已经编辑了我的问题。该解决方案现在安全吗？我的意思是反对 SQL 注入。还有什么我可以做得更好的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T15:07:15.343

你在打电话 `LoginHelper.Login(passwort, email, firma);`

但在你的方法

`public static string Login(string email, string passwort, string firma)`

email 是第一个参数。

实际上在电子邮件参数中您有密码，这就是它不返回任何结果的原因

改变你的`login`方法`LoginHelper`如下

```
public static string Login(string passwort, string email, string firma)
{
    string userName = "";

    using (SqlConnection con = new SqlConnection(@"Data Source=Yeah-PC\SQLEXPRESS;Initial Catalog=works;Integrated Security=true;"))
    using(SqlCommand cmd = new SqlCommand(@"SELECT firma FROM TestData WHERE email = @email", con))
    {
        cmd.Parameters.AddWithValue("@email", email);
        con.Open();
        using (SqlDataReader rdr = cmd.ExecuteReader())
        {
            while (rdr.Read())
            {
                if (rdr["firma"]  != DBNull.Value)
                {
                    userName += rdr["firma"].ToString();
                }

            }
        }
    }

    return userName;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T15:12:19.653

如果您的电子邮件地址包含 @ 字符，那可能是您的问题。@ 是 SQLCommand 的参数标记。它会认为您的电子邮件地址的后半部分是一个 sql 参数。您将需要使用参数传递电子邮件地址。这也可以保护您免受 SQL 注入。Akatakritos 的答案有一个如何将电子邮件作为参数传递的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T15:11:18.223

此外，出于安全和性能原因，您应该使用 SqlParameters。阅读 SQL 注入攻击。

```
string userName = "";

SqlConnection con = new SqlConnection(@"Data Source=Yeah-PC\SQLEXPRESS;Initial Catalog=works;Integrated Security=true;");

SqlCommand cmd = new SqlCommand(@"SELECT firma FROM TestData 
                                  WHERE email = @email" con);
cmd.Parameters.AddWithValue("@email", email);

con.Open();

SqlDataReader dr = cmd.ExecuteReader();
while (dr.Read())
{
   //userName += dr["email"].ToString();
   //userName += dr["passwort"].ToString();
   userName += dr["firma"].ToString();
}
dr.Close();
con.Close();
return userName; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T15:09:05.173

根据其他答案和评论。

> 您有一个安全问题，如果您不打算使用 ORM（实体框架/NHibernate/等...），请使用参数化查询

解决您的问题：

*   你的数据库中有数据吗？
*   您是否指向正确的数据库？
*   你的 SQL 是否正确？
*   您的 SQL 正在运行吗？
*   运行 SQL Profiler 并查看正在运行的 SQL，然后在 SQL Management Studio 中进行测试

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T15:11:51.373

不要在代码中传递参数，而是尝试使用 Sqlparameter 添加参数。最佳实践是使用 SQL 参数添加参数。 **您还可以通过调试来检查电子邮件的值......无论您传递的信息是否正确。**

```
 SqlConnection conn = new SqlConnection(connectionString);
        conn.Open();
        SqlCommand cmd = new SqlCommand(@"SELECT firma FROM TestData 
                              WHERE email = @email" conn);
        cmd.Parameters.AddWithValue("@email", email);                     
        cmd.Prepare();
        cmd.ExecuteNonQuery();
        SqlDataReader dr = cmd.ExecuteReader();
        while (dr.Read())
            {                  
               userName += dr["firma"].ToString();

            }
        dr.Close();
        conn.Close(); 
```

# c# - 通用返回类型和不可为空的对象

> ID：10818943
> 
> 赞同：0
> 
> 时间：2012-05-30T15:01:36.120
> 
> 标签：c#, .net, generics, non-nullable

我有一个 Sql Utility 类，其中包含很多关于 Sql 查询的方便方法。该类包含以下方法：

```
public static T ExecuteScalar<T>(
    string query, 
    SqlConnection connection, 
    params SqlParameter[] parameters) 
    where T : class, new()
{
    SqlCommand command =
        CreateCommand(query, connection, parameters);

    return command.ExecuteScalar() as T;
} 
```

**是否可以返回例如`Guid`对象或其他不可为空的类。**

像这样的东西：

```
Guid result = 
    SqlUtils.ExecuteScalar<Guid>(
        @"SELECT [Id] FROM [dbo].[MyTable]
            WHERE [Column1] = @Param1", 
        connection, 
        new SqlParameter("@Param1", "someValue")); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T15:06:58.333

您可以使用`default(T)`（并且您应该删除泛型类型约束）：

```
SqlCommand command = 
    CreateCommand(query, connection, parameters);

object value = command.ExecuteScalar();

if (value == null || value is DbNull)
{
    return default(T)'
}

return (T)value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:07:09.487

不是你写的那样。如果转换失败，`as`运算符可能会返回，因此必须是引用类型。`null``T`

对于值类型，您需要使用传统的强制转换运算符`(T)`。您还需要删除`T`作为方法定义上的引用类型的约束。

```
public static T ExecuteScalar<T>(string query, 
                             SqlConnection connection, 
                             params SqlParameter[] parameters) 
{
    SqlCommand command = CreateCommand(query, connection, parameters);
    var result = command.ExecuteScalar();
    if (result is T) return (T)result;
    return default(T);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T15:06:18.537

由于此方法的约束返回类类型，因此您可以返回任何与类类型（非原始）匹配的对象。不过，鉴于您的方法的性质，我认为不需要约束。您应该能够删除此约束并返回您可以生成的任何类型。

# jquery - 计算（客户和服务）

> ID：10818945
> 
> 赞同：0
> 
> 时间：2012-05-30T15:02:04.600
> 
> 标签：jquery, calculator, jquery-calculation

这整天都在绞尽脑汁，我不知道该怎么做……有人能帮忙吗？

我想使用[jQuery Calculation 插件](http://www.pengoworks.com/workshop/jquery/calculation/calculation.plugin.htm)从我网站上的输入框执行计算...

例如：

**输入框：** 客人人数和份数

```
100 or less guests: £180
+
£1 per each additional guest (101+)
+
£0.60 per each additional guest serving 
```

**计算：**将是 180 英镑+（额外客人 x 1 英镑）+（总客人 x 服务 @ 0.60 英镑）

**示例：** 112 位客人 2 份将是 180 英镑+12 英镑+67.20 英镑=259.20 英镑

任何人都可以提供帮助吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:11:56.950

不需要插件 - 它的简单数学：

```
$('#numguests,#numservings').change(function() {
    // get value of input - parse to int
    var numguests = parseInt($('#numguests').val(), 10); 
    // base guest price
    var guestprice = 180; 
    if (numguests > 100) {
        // add cost of extra guests
        guestprice = guestprice + (numguests - 100); 
    }
    var servingsprice = 0;
    // get value of input - parse to int
    var numservings = parseInt($('#numservings').val(), 10); 
    if (numservings > 1) {
        // add cost of extra servings
        servingsprice = numguests * 0.60; 
    }
    // round to 2 places and output
    $('#total').html(parseFloat(guestprice + servingsprice).toFixed(2)); 
});​ 
```

[这里的工作示例](http://jsfiddle.net/manseuk/QcgRs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:21:05.977

最终代码：

```
<script type="text/javascript">

$(document).ready(function() {

$('#numguests,#numservings').change(function() {
var numguests = parseInt($('#numguests').val(), 10);
var guestprice = 180;
if (numguests > 100) {
guestprice = guestprice + (numguests - 100);
}
var servingsprice = 0;
var numservings = parseInt($('#numservings').val(), 10);
if (numservings > 1) {
servingsprice = numguests * 0.60 * (numservings-1);
}
$('#total').html(parseFloat(guestprice + servingsprice).toFixed(2));
});

});
</script>

<div id="calculator">
<p><strong>Use our Cost Calculator to work out a price:</strong></p>
<p>Number of guests <input id="numguests" value="100"><br>
Number of 4oz servings per guest<input id="numservings" value="1"><br>
Total price : &amp;<span id="total"></span></p>
</div>

</div> 
```

# php - 当我们使用 fopen() 命令时 php 会加载整个文件吗

> ID：10818946
> 
> 赞同：0
> 
> 时间：2012-05-30T15:02:06.183
> 
> 标签：php, fopen

我编写了一个 php 脚本来帮助限制下载文件的速度和连接。我用过这样`fopen()`的`fseek()`东西：

```
$f = fopen($file, 'rb');
if($f){
    fseek($f,$start);//$start extracted from $_SERVER['HTTP_RANGE']
    while(!feof($f)){
        echo fread($f,$speed);//$speed is bytes per second
        flush();
        ob_flush();
        sleep(1);
    }
    fclose($f);
} 
```

下载过程可能需要几个小时才能完成，整个文件是否在内存中直到下载结束？以及如何优化它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T15:05:02.080

不，`fread`使用内部缓冲区来流式传输数据（默认为 8KB），因此文件中只有很小的一部分实际驻留在内存中。

# c# - 在修改光标的代码中重定向标准输出

> ID：10818953
> 
> 赞同：2
> 
> 时间：2012-05-30T15:02:49.703
> 
> 标签：c#, .net, stdout, io-redirection

我有一个程序（无源），我想重定向 stdout 和 strerr 以便我可以解析进度指示器并在调用它的应用程序中显示进度。

问题是这个应用程序调用了 Console.Clear()、SetWindowSize、Cursor.Top 等。

这些似乎破坏了重定向并使应用程序崩溃。我已经设法通过在 il 代码中对这些调用进行 NOP 来使其工作，但这当然比其他任何东西都更像是一种 hack。

我想知道是否有办法让我在不删除这些调用的情况下重定向 STD。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:05:09.840

不，你被卡住了。

您不能在重定向端口中使用任何这些花哨的功能。

# perl - HTML::TagFilter 根据类删除 div

> ID：10818954
> 
> 赞同：1
> 
> 时间：2012-05-30T15:02:53.050
> 
> 标签：perl, html-parsing, html-tree

我正在尝试使用 perl 脚本从服务器上的静态 html 文件中提取内容。我想提取特定 div 的内容。我通过类名（“getme”）知道 div。我可以使用 HTML::TreeBuilder->look_down 访问 div。如何删除 div 标签并仅获取其中的内容？

示例 HTML

```
<body>
<div class="getme">
    <h2>Some Header</h2>
    <div class="another"><p>More text</p></div>
    <div class="yetanother">text text text</div>
</div>
<div class="second">...</div>
</body> 
```

到目前为止的 Perl

```
use strict;
use warnings;
use HTML::TreeBuilder;
use HTML::TagFilter;

my $unique_filename = '/path/to/saved/files/extracted_divs/' . get_timestamp();
my $guid_counter = 0;
my $field_sep = "|";

open FILEOUT, ">>", $unique_filename or die $!;

print FILEOUT "guid|published|url|title|body\n";
foreach my $file_name (@ARGV) {
    my $tree = HTML::TreeBuilder->new;
    my $filter = HTML::TagFilter->new(deny => { div => {class => ["getme"]} });
    $tree->parse_file($file_name);
    for my $subtree ($tree->look_down(_tag => "div", class => "getme")) {
        #my $html = $filter->filter($subtree->as_HTML);
        my $html = $subtree->as_HTML;
        #steamline HTML
        $html =~ s/(?<!\n)\z/\n/;
        #echo file name to screen so we know something is happening
        print $file_name . "\n";

        #replace slashes with spaces
        my $file_url = $file_name;
        $file_name =~ s/\//-/g;
        #remove ".html"
        $file_name =~ s/.html//g;

        #echo info to output file
        print FILEOUT $guid_counter++ . $field_sep . time . $field_sep;
        print FILEOUT $file_url . $field_sep . $file_name . $field_sep;
        print FILEOUT $html;
    }
    $tree = $tree->delete;
}
close (FILEOUT); 
```

过滤器只是删除类属性。可以制定规则来删除整个标签，还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:20:21.813

```
use Web::Query qw();
join '', Web::Query->new_from_html($html)->find('.getme > *')->html 
```

返回字符串

```
<h2>Some Header</h2><div class="another"><p>More text</div><div class="yetanother">text text text</div> 
```

# jquery - Notepad++ jQuery 语法高亮

> ID：10818955
> 
> 赞同：0
> 
> 时间：2012-05-30T15:02:54.893
> 
> 标签：jquery, syntax-highlighting, notepad++

我正在寻找一个用于 Notepad++ 的 jQuery 语法高亮插件，或者至少是一些我可以放入 lang.xml 文件中的 XML，这样我的 jQuery 就更具可读性。

[这里](https://stackoverflow.com/questions/2274947/where-can-i-find-a-jquery-syntax-highlighting-plugin-for-notepad)有一个关于这个的问题，但它已关闭并且没有正确回答。[这里](https://stackoverflow.com/questions/713889/what-is-your-favourite-javascript-jquery-code-editor)也提到了，但同样没有明确的答案。

我知道 Notepad++ 不适合开发 AJAX 应用程序等，但我对它的使用感到满意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:10:50.983

我经常使用 Notepad++，我知道没有专门的 jquery 插件。

取自 jQuery 网站

> jQuery 是一个快速而简洁的 JavaScript 库，它简化了 HTML 文档遍历、事件处理、动画和 Ajax 交互，以实现快速的 Web 开发。jQuery 旨在改变您编写 JavaScript 的方式。

JavaScript 模式应该适合你，我知道它适合我。语法是相同的，因为它只是一个库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T15:13:10.997

这个人为在记事本++中编写 JQuery 做了一个附加组件，我认为它会有所帮助： [https ://github.com/jamesallardice/notepadplus-jQuery](https://github.com/jamesallardice/notepadplus-jQuery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T11:06:03.133

我为 php、javascript 和 jquery 开发了突出显示的“langs.xml”。下载：[langs.xml](https://hotfile.com/dl/199054466/f10b17c/langs.xml.html)

Windows 的“langs.xml”文件在这里：C:\Users\YourUserName\AppData\Roaming\Notepad++\langs.xml

我还想说一件不同的事情。我的 Dreamweaver 主题（使用 Notepad++ 后使用 Dreamweaver 的用户）。下载[Dreamweaver.xml](https://hotfile.com/dl/199056455/b4d5264/Dreamweaver.xml.html)

Windows 的“Dreamweaver.xml”文件在这里：C:\Program Files\Notepad++\themes\Dreamweaver.xml

# facebook - 新闻。阅读 Facebook Opengraph

> ID：10818960
> 
> 赞同：1
> 
> 时间：2012-05-30T15:03:09.403
> 
> 标签：facebook, wordpress, facebook-opengraph

我在这里遇到了一些麻烦，你知道 Yahoo! 消息？我想创建一个这样的小部件（当您阅读一篇文章时，它会发布在您的 Facebook 上）。

我刚刚创建了 Facebook 应用程序和 Open Graph，但我不明白如何将其插入我的网站，我正在使用 Wordpress，我在 Google 上搜索但我仍然不明白，希望你能帮助我。

* * *

我还是不明白，我刚刚创建了应用程序和opengraph，还在我的标题和函数上插入了opengraph标签，但是当我尝试打开帖子页面时，我得到“发生错误”怎么办？你能帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T17:13:05.097

您需要通过阅读文档来了解这些概念的工作原理

1.  用户在应用程序中执行操作，例如阅读文章
2.  应用程序调用到 Graph API 端点 /me/action:object=Object_URL 的 HTTP POST
3.  Facebook 将抓取对象网页（您的 WordPress 页面），读取其元标记并通过操作将对象连接到用户。

您的操作是 news.reads，因此您可以按如下方式调用

`POST https://graph.facebook.com/me/news.reads?article=[article object URL in your Wordpress Blog]`

为了完成这项工作，您需要`read`在应用设置中设置内置操作类型：`https://developers.facebook.com/apps/YOUR_APP_ID/opengraph`

![news.read 在应用程序设置](../Images/555ef0211523d67accc4c563eb1ddcf9.png)

然后您必须具有`article`对象集的类型。

![文章对象](../Images/9e086b45318f1ab2b6289a82795439b7.png)

然后您必须在您的 WordPress 博客上设置一个对象 url，这些是通过插入元标记来完成的

```
<html>
    <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# 
                  article: http://ogp.me/ns/article#">
     <meta property="fb:app_id"               content="YOUR_APP_ID"> 
     <meta property="og:type"                 content="article"> 
     <meta property="og:url"                  content="URL of this object">
     <meta property="og:site_name"            content="Name of site hosting article">
     <meta property="og:image"                content="URL to an image">
     <meta property="og:title"                content="Name of article">
     <meta property="og:description"          content="Description of object"> 
     <meta property="article:published_time"  content="DateTime"> 
     <meta property="article:modified_time"   content="DateTime"> 
     <meta property="article:expiration_time" content="DateTime">
     <meta property="article:author"          content="URL to Author object">
     <meta property="article:section"         content="Section of article">
     <meta property="article:tag"             content="Keyword">
    </head>
<body>
    <!-- main article body -->
</body>
</html> 
```

因此，您可以根据主题设置将它们放在 header.php 或 index.php 文件中。然后您必须根据您的主题设置插入函数和 if 语句，例如

帖子的网址

```
<meta property="og:url" content="<?php the_permalink() ?>"/> 
```

单个帖子标题

```
<meta property="og:title" content="<?php single_post_title(''); ?>" /> 
```

然后你需要 lint 这个 url 以确保你已经正确设置，你可以通过

```
http://developers.facebook.com/tools/debug 
```

一旦您确定元标记设置正确，您需要测试前面提到的操作

`POST https://graph.facebook.com/me/news.reads?article=[article object URL in your Wordpress Blog]`

如果一切都设置好了，这应该返回操作的 id。

然后你必须使用 JS SDK 实现认证逻辑

```
<div id="fb-root"></div>
  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : '[YOUR_APP_ID]', // App ID
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
      });
    };

    // Load the SDK Asynchronously
    (function(d){
      var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
      js = d.createElement('script'); js.id = id; js.async = true;
      js.src = "//connect.facebook.net/en_US/all.js";
      d.getElementsByTagName('head')[0].appendChild(js);
    }(document));
  </script> 
```

和登录按钮插件

`<fb:login-button show-faces="true" width="200" max-rows="1" scope="publish_actions"> </fb:login-button>`

在 functions.php 文件中或直接在 single.php 和 index.php 页面中

从那里您必须创建一个函数来在页面加载时调用以下操作

```
<script type="text/javascript">
  function readArticle()
  {
      FB.api(
        '/me/news.reads',
        'post',
        { article: 'http://yourwordpress.com/site/' },
        function(response) {
           if (!response || response.error) {
              alert('Error occured');
           } else {
              alert('Article read was successful! Action ID: ' + response.id);
           }
        });
  }
  </script> 
```

# sql - Sql Azure CompatibleWithModel 不起作用

> ID：10818962
> 
> 赞同：0
> 
> 时间：2012-05-30T15:03:16.207
> 
> 标签：sql, azure, code-first, azure-sql-database

在我的代码中，我试图通过使用“mycontext.Database.CompatibleWithModel(true)”检查我的实体框架 Code First 模型和 Sql Azure 数据库是否同步。但是，当存在不兼容时，这条线会出现以下异常。

“支持 'MyContext' 上下文的模型自创建数据库以来已更改。手动删除/更新数据库，或使用 IDatabaseInitializer 实例调用 Database.SetInitializer。例如，DropCreateDatabaseIfModelChanges 策略将自动删除并重新创建数据库，并且可选择用新数据播种它。”

这似乎违背了检查的目的，因为检查本身由于不兼容而倒下。

由于各种原因，我不想使用 Database.SetInitializer 方法。

有什么建议么？

这是一个特定的 Sql Azure 问题吗？

谢谢马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:22:02.147

请查看下面的 ScottGu 博客：

[http://weblogs.asp.net/scottgu/archive/2010/08/03/using-ef-code-first-with-an-existing-database.aspx](http://weblogs.asp.net/scottgu/archive/2010/08/03/using-ef-code-first-with-an-existing-database.aspx)

这是正在发生的事情以及如何处理它：

首次创建模型时，我们运行 DatabaseInitializer 来执行诸如创建数据库（如果数据库不存在）或添加种子数据之类的事情。默认的 DatabaseInitializer 尝试将使用模型所需的数据库架构与存储在使用数据库创建的 EdmMetadata 表中的架构哈希进行比较（当 Code First 是创建数据库的人时）。现有的数据库将没有 EdmMetadata 表，因此不会有哈希……如果该表丢失，今天的实现将抛出。在我们发布最终版本之前，我们将努力改变这种行为，因为它是默认的。在此之前，现有数据库通常不需要任何数据库初始化程序，因此可以通过调用以下方法为您的上下文类型关闭它：

```
Database.SetInitializer<Production>(null); 
```

使用上面的代码，您不会重新创建数据库，而是使用现有的数据库，所以我不认为使用 Database.SetInitializer 是一个问题，除非您对使用它有一些认真的想法。

更多信息：[仅实体框架代码错误：支持上下文的模型自创建数据库以来已更改](https://stackoverflow.com/questions/3552000/entity-framework-code-only-error-the-model-backing-the-context-has-changed-sinc)

# ruby-on-rails - 活动管理员：将表单添加到新页面

> ID：10818965
> 
> 赞同：0
> 
> 时间：2012-05-30T15:03:23.147
> 
> 标签：ruby-on-rails, forms, activeadmin

我使用 Active Admin 创建了一个新页面。它目前只显示一个表格，其中列出了当前日期模型“HotelRoom”的所有条目。

现在我想添加一个表单，我可以在其中为表中显示的数据选择日期。但我不知道如何添加表单。

表格通常如下所示：

```
<% form_for @hotel_rooms do |f| %>
  <p>
    <%= f.label :date %><br />
    <%= f.text_field :date %>
  </p>
  <p><%= f.submit "Submit" %></p>
<% end %> 
```

然后我想像这里描述的那样向文本字段添加一个日期选择器[http://railscasts.com/episodes/213-calendars](http://railscasts.com/episodes/213-calendars) 但我总是得到错误：

```
undefined method `model_name' for NilClass:Class 
```

我究竟做错了什么？

编辑：我尝试在自定义页面文件中像这样将变量添加到控制器

```
 controller do
  def index
    @hotel_rooms = HotelRoom.all
  end
 end 
```

但仍然没有运气。同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:14:52.610

像往常一样 - 您的 @hotel_rooms 变量根本没有在 Controller 中设置（或者在 DB 中找不到提供条件的项目）。

**更新：**

否则 - 尝试使用：

```
form_for :hotel_room ... 
```

# magento - 自定义通讯模板？

> ID：10818968
> 
> 赞同：0
> 
> 时间：2012-05-30T15:03:26.610
> 
> 标签：magento, customization, newsletter

我正在使用 Magento 1.5.1.0。我已经更改了我的 Magento 项目中的所有交易电子邮件。但我有最后一个问题。我还没有找到更改时事通讯模板的方法？有没有办法像其他交易电子邮件一样更改使用的模板？

问候，伯蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T16:03:24.623

我有 1.7 但我认为菜单是一样的 从选项字段（标记为模板）中选择 Newsletter ...（有三个模板），加载每个模板并更改它们。对于实际的时事通讯，从管理仪表板中选择时事通讯 > 时事通讯模板并添加新电子邮件。

# scala - 从 flatMap 返回多个集合

> ID：10818973
> 
> 赞同：1
> 
> 时间：2012-05-30T15:03:35.983
> 
> 标签：scala, collections, iteration

我正在研究一种方法，该方法对多个项目有 3 种可能的结果：错误、无效和成功。对于其中的每一个，我需要返回一个 json 列表，标识哪些项目是错误的、无效的和成功的。

我目前的尝试如下。我曾经用来`Object`表示我的对象的类，因为完全解释需要太长时间。该类`Object`有一个方法，该方法`process`返回一个布尔值以指示成功或错误，并在对象无效时引发异常：

```
def process(list: List[Objects]) = {
    val successIds = new ListBuffer[Int]();
    val errorIds = new ListBuffer[Int]();
    val invalidIds = new ListBuffer[Int]();

    list.foreach( item => {
        try {
            if (item.process) {
                successIds ++ item.id
            } else {
                errorIds ++ item.id
            }
        } catch {
            case e: Exception => invalidIds ++ item.id
        }
    })

    JsonResult(
        Map("success" -> successIds, 
            "failed" -> errorIds, 
            "invalid" -> invalidIds)
    ) 
} 
```

问题是使用可变数据结构不是很“Scala-y”。我更愿意以更实用的方式构建这些列表，但我对 scala 还是很陌生。关于如何做到这一点的任何想法或提示？

我的想法是使用类似 flatMap 方法的方法，该方法采用集合元组并以与 flatMap 方法对单个集合相同的方式对它们进行整理：

```
def process(list: List[Objects]) = {

    val (success, error, invalid) = list.flatMap( item => {
        try {
            if (item.process) {
                (List(item.id), List.empty, List.empty)
            } else {
                (List.empty, List(item.id), List.empty)
            }
        } catch {
            case e: Exception => 
                (List.empty, List.empty, List(item.id))
        }
    })

    JsonResult(
        Map("success" -> success, 
            "failed" -> error, 
            "invalid" -> invalid)
    ) 
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T15:19:30.263

`flatMap`不是你在这里需要的 - 你需要`groupBy`：

```
def process(list: List[Objects]) = {

  def result(x: Objects) =  
    try if (x.process) "success" else "failed"
    catch {case _ => "invalid"}     

  JsonResult(list groupBy result mapValues (_ map (_.id)))
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:22:58.263

总是有递归：

```
class Ob(val id: Int) { def okay: Boolean = id < 5 }

@annotation.tailrec def process(
  xs: List[Ob], 
  succ: List[Int] = Nil,
  fail: List[Int] = Nil,
  invalid: List[Int] = Nil
): (List[Int], List[Int], List[Int]) = xs match {
  case Nil => (succ.reverse, fail.reverse, invalid.reverse)
  case x :: more =>
    val maybeOkay = try { Some(x.okay) } catch { case e: Exception => None }
    if (!maybeOkay.isDefined) process(more, succ, fail, x.id :: invalid)
    else if (maybeOkay.get)   process(more, x.id :: succ, fail, invalid)
    else                      process(more, succ, x.id :: fail, invalid)
} 
```

正如人们所希望的那样（如果您不关心订单，请跳过反向操作）：

```
scala> process(List(new Ob(1), new Ob(7), new Ob(2), 
   new Ob(4) { override def okay = throw new Exception("Broken") }))

res2: (List[Int], List[Int], List[Int]) = (List(1,2),List(7),List(4)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T15:51:52.633

适应使其在没有“对象”的情况下编译

```
def procex (item: String): Boolean = ((9 / item.toInt) < 1)

def process (list: List[String]) = {
    val li: List[(Option[String], Option[String], Option[String])] = list.map (item => {
        try {
            if (procex (item)) {
                (Some (item), None, None)
            } else {
                (None, Some (item), None)
            }
        } catch {
            case e: Exception => 
                (None, None, Some (item))
        }
    })
    li
}
// below 10 => failure
val in = (5 to 15).map (""+_).toList
// 0 to throw a little exception
val ps = process ("0" :: in)

val succeeders = ps.filter (p=> p._1 != None).map (p=>p._1)
val errors     = ps.filter (p=> p._2 != None).map (p=>p._2)
val invalides  = ps.filter (p=> p._3 != None).map (p=>p._3) 
```

什么不起作用：

```
(1 to 3).map (i=> ps.filter (p=> p._i != None).map (p=>p._i)) 
```

_i 不工作。

# silverlight - MVVM-light 和 Windows Phone 工具包 - RelayCommand 失败

> ID：10818979
> 
> 赞同：0
> 
> 时间：2012-05-30T15:03:51.580
> 
> 标签：silverlight, mvvm, toolkit

我正在尝试遵循 mvvm 模式。使用 galasoft EventToCommand 时出现以下错误：“GalaSoft.MvvmLight.Command.RelayCommand.RelayCommand(System.Action)”的最佳重载方法匹配有一些无效参数...

我的 XAML 中的代码：

```
<toolkit:DatePicker Header="Select Date" 
     ValueStringFormat="{}{0:D}"                                    
     HorizontalAlignment="Left" Margin="0,126,0,0" 
     Name="datePicker1" 
     VerticalAlignment="Top" FontFamily="Verdana"  
     FontSize="22" Width="450">
     <i:Interaction.Triggers>
          <i:EventTrigger EventName="ValueChanged">
               <cmd:EventToCommand PassEventArgsToCommand="True"
                     Command="{Binding DateSelection}"/>
          </i:EventTrigger>
     </i:Interaction.Triggers>
</toolkit:DatePicker> 
```

在模型视图中：

```
 public MainViewModel()
    {
        DateSelection = new RelayCommand<DateTimeValueChangedEventArgs>(time_Call);
    }

    public RelayCommand<DateTimeValueChangedEventArgs> DateSelection
    {
        get;
        set;
    }
    void time_Call(object sender, DateTimeValueChangedEventArgs e)
    {

    } 
```

我是空白！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:56:31.477

你可以双向绑定到 Value 属性吗？这将简化事情并让您使用 XAML 和 MVVM... 绑定的真正力量。

```
<toolkit:DatePicker Header="Select Date" 
     ValueStringFormat="{}{0:D}"                                    
     HorizontalAlignment="Left" Margin="0,126,0,0" 
     Name="datePicker1" 
     VerticalAlignment="Top" FontFamily="Verdana"  
     FontSize="22" Width="450"
Value={Binding SelectedDate, Mode=TwoWay}" /> 
```

视图模型

```
 private DateTime selectedDate;
    public DateTime SelectedDate
    {
        get
        {
          return this.selectedDate;
        }

        set
        {
          if (this.selectedDate != value)
          {
            this.selectedDate = value;
            this.RaisePropertyChanged("SelectedDate");
          }
        }
    }

    public MainViewModel()
    {
// initialize to today being selected
this.SelectedDate = DateTime.Now;
// the property changed might not be necessary if you are just trying to get the new value
    this.PropertyChanged += new System.ComponentModel.PropertyChangedEventHandler(MainViewModel_PropertyChanged);
    }

    void MainViewModel_PropertyChanged(object sender, System.ComponentModel.PropertyChangedEventArgs e)
    {
      if(e.PropertyName="SelectedDate")
    {
    // do something if needed
    }
    } 
```

# objective-c - 自定义 UINavigationBar 使其不可见，但保持按钮可见

> ID：10818985
> 
> 赞同：0
> 
> 时间：2012-05-30T15:04:08.030
> 
> 标签：objective-c, ios, uinavigationcontroller, uinavigationbar

我知道 iOS 5 允许 UINavigationBar 自定义，但我不确定它是否满足我的需要。我想完全删除栏，或者至少让它不可见，但保留按钮（backButton、rightBarButton 等）并用我自己的图像替换它们。我可以实现实际的按钮，但保留导航栏要方便得多，因为我想使用它的行为。这可能吗？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:35:00.863

您可以将导航栏设置为隐藏并自己处理所有导航。导航控制器仍然存在，但导航被您的自定义按钮覆盖。

# iphone - 无法打开 StoryBoard xcode

> ID：10818991
> 
> 赞同：1
> 
> 时间：2012-05-30T15:04:47.960
> 
> 标签：iphone, xcode

昨天在我关闭我的mac之前，一切都很好。直到我今天打开它，StoryBoard 似乎有一个错误。

无法打开，XMLparse 注释：无效的 XMLchar 值 16

任何想法为什么我会收到此错误以及如何更好地解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:15:45.257

我不能说为什么会发生这个错误。但是，如果您一直在使用版本控制系统或系统备份（最好同时使用两者），则应该可以恢复文件的先前“良好”副本。诚然，您可能会失去一点工作，但这总比失去一切要好。

如果您还不知道：

Xcode 4 支持 git 和 Subversion 进行版本控制。Xcode 甚至会在您创建项目时询问您是否要创建本地 git 存储库。仍然可以使用其他系统，例如 Mercurial；它们只是不会与 Xcode 集成，您需要使用单独的应用程序签入和签出。

在 OS X 上，确实没有不使用 Time Machine 的好借口。

不要在没有安全网的情况下工作！

# ios - 如何在 iOS 中旋转 iCarousel

> ID：10818996
> 
> 赞同：0
> 
> 时间：2012-05-30T15:05:06.860
> 
> 标签：ios, objective-c, rotation, icarousel

我正在使用 iCarousel 和`type = carousel.type = iCarouselTypeLinear;`

它在我的应用程序中工作，但我想旋转另一个视图。

看我的图片：

![旋转木马](../Images/09f887890613cf8aa92d568b46b15c2e.png)

# accessibility - 用于浏览应用程序的可访问性树的工具

> ID：10818999
> 
> 赞同：2
> 
> 时间：2012-05-30T15:05:16.743
> 
> 标签：accessibility, msaa

我一直在为屏幕阅读器（例如 JAWS）制作脚本，并且经常需要深入研究它的窗口层次结构（MSAA、UIA 等）。我通常使用旧的 AccExplorer32 应用程序，但它不是最佳的（层次结构通常与屏幕阅读器生成的不对应，加上树中的搜索非常有限）。是否有更好的应用程序来浏览可访问性层次结构？它应该：

*   具有良好的搜索功能（理想情况下，您可以搜索所有可访问性字段）
*   生成尽可能接近屏幕阅读器，尤其是 JAWS 使用的窗口树
*   拥有 AccExplorer 的大部分其他功能，尤其是突出显示选定对象的选项很重要

这些应用程序不够好（就我的目的而言，不如 AccExplorer）：AccChecker、Process Monitor、uiaverify、spyxx。我找不到更好的东西，这似乎很奇怪，因为这样的应用程序肯定有空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T16:53:56.567

我没用过，但是你看过 Inspect 工具了吗？有关它的更多信息，请参阅 [http://msdn.microsoft.com/en-us/library/windows/desktop/dd318521%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318521%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T21:05:18.697

您是否尝试过[Paciello Group 的 aViewer？](http://www.paciellogroup.com/resources/aviewer)（仅限 Windows）

还是[Firefox 的 DOM 检查器](https://addons.mozilla.org/en-US/firefox/addon/dom-inspector-6622/)？（所有平台）

这两个工具都会向您显示呈现的可访问性树。