# StackOverflow 问答 11965000-11965999

# wcf - 如果抛出异常，如何防止 WCF 多次调用服务方法？

> ID：11965003
> 
> 赞同：0
> 
> 时间：2012-08-15T06:33:13.777
> 
> 标签：wcf

这是一个情况。我们有一个接收超时等于 30 秒的 WCF 服务调用。30 秒后，连接被中止，但呼叫被重复。结果，服务器执行了两次所需的操作，这不是我们想要的。

绑定配置：

```
<netTcpBinding>
            <binding name="DefaultTcpBinding"
                        maxReceivedMessageSize="901048576"
                        closeTimeout="00:00:30"
                        openTimeout="00:00:30"
                        receiveTimeout="00:00:30"
                        sendTimeout="00:00:30"
                        portSharingEnabled="false"
                        hostNameComparisonMode="StrongWildcard"
                        transactionFlow="true"
                        transactionProtocol="OleTransactions"
                        transferMode="Buffered"
                        maxConnections="50"
                        listenBacklog="50">

                <reliableSession enabled="false"/>
                <security mode="None">
                    <transport clientCredentialType="Windows" />
                </security>
                <readerQuotas maxDepth="32" maxStringContentLength="5242880"maxArrayLength="2147483646" maxBytesPerRead="4096" maxNameTableCharCount="5242880"/>
            </binding>
        </netTcpBinding> 
```

提前致谢。

# javascript - 设置身体高度宽度 css 表达式

> ID：11965004
> 
> 赞同：2
> 
> 时间：2012-08-15T06:33:22.827
> 
> 标签：javascript, html, css, css-expressions

我想使用 css 表达式动态更改身体高度。我的代码是

**HTML**

```
<body >
 <div class="tall_top" >

 </div>
</body> 
```

**CSS**

```
body {
     width:      100px;
     height:     expression(document.documentElement.clientHeight);
     background: red;
   }
 .tall_top { 
   background:#f1f1f1; 
   width:50%; 
   height:50%
  } 
```

但它在谷歌浏览器中不起作用.....内部 div 没有显示。检查元素中显示的body高度为0px；

**JS小提琴**

[http://jsfiddle.net/3x6fh/](http://jsfiddle.net/3x6fh/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T06:46:13.740

`div.tall_top`没有出现，因为你`body,html`没有身高。

将高度设置为`100%`

```
 html,body {
        margin:0;
        width:100%;
        height:100%;
        background:blue;
    } 
```

演示：http: [//jsfiddle.net/codef0rmer/3x6fh/2/](http://jsfiddle.net/codef0rmer/3x6fh/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T06:38:21.573

您`expression`基本上评估窗口的高度，通常是`<html>`元素的高度。

添加这个 CSS 应该可以工作：

```
html, body {
  height: 100%;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T06:38:24.007

css 表达式不再值得学习。使用 JavaScript 或[css 媒体查询](http://www.w3.org/TR/css3-mediaqueries/)。而且它还会产生浏览器兼容性问题，因为它只支持 IE6/7（也许）5。

[高性能网站：规则——避免使用 CSS 表达式](http://developer.yahoo.com/blogs/ydn/posts/2007/07/high_performanc_6/)

# python - 如何在pyparsing中匹配括号/方括号

> ID：11965009
> 
> 赞同：3
> 
> 时间：2012-08-15T06:33:34.547
> 
> 标签：python, grammar, pyparsing

我有一个语法标记指定为：

```
list_value = Suppress(oneOf("[ (")) + Group(
    delimitedList(string_value | int_value))("list") + Suppress(oneOf("] )")) 
```

然而，这显然允许`(foo, bar]`

如何强制列表开始和结束字符必须匹配？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T07:39:11.863

您可以在两个规则之间选择一个列表：一个用于括号，一个用于方括号。感谢您提出 pyparsing。我喜欢。我对你的问题的回答是：

```
delim_value = Group(delimitedList(string_value | int_value))("list")
list_value = Or( (Suppress("[") + delim_value + Suppress("]"),
                  Suppress("(") + delim_value + Suppress(")")) ) 
```

# .net - Intellisense 告诉我 Element 'a' 不能嵌套在 Element 'a button' 中。但它不是

> ID：11965017
> 
> 赞同：2
> 
> 时间：2012-08-15T06:34:35.640
> 
> 标签：.net, visual-studio, html, intellisense

我的`a`元素下方不断出现绿色波浪线（不是全部），这真的让我很恼火，因为它告诉我我正在做一些我没有做的事情。

* * *

![在此处输入图像描述](../Images/0f691b1072fa8326f08c6540c7548c93.png)

为什么它认为我将`<a>`'s 嵌套在 a 中`button`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T06:37:05.333

我认为该`'a button'`位是标签列表。你不能`a`在另一个标签内有一个`a`标签，这就是你在这里所拥有的。

# iis - 我们应该多久回收一次应用程序池？

> ID：11965018
> 
> 赞同：9
> 
> 时间：2012-08-15T06:34:46.187
> 
> 标签：iis, application-pool

我们应该多久回收一次应用程序池？

有人告诉我，我应该每 24 小时回收一次应用程序池？

为什么我需要回收应用程序池？

我们会得到什么样的好处？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T16:15:43.480

除非有一些压倒一切的原因，否则我建议不要进行任何基于时间的回收（也就是说，没有像每天凌晨 3 点这样的时间表，也没有每 29 小时循环一次的类型回收）。我认为这更像是从事情不太稳定时的保留（考虑回收必须定期重新启动服务器的较轻版本）。

为了保护自己免受内存泄漏等的影响，您可以对虚拟和已用内存设置限制，以在进程失控时强制回收。您将获得确保您不会使用太多内存的所有价值，而无需进行不必要的回收。

绝对有需要回收的时候，但这些主要存在于更改周围（即，如果您要放入新的 DLL，或进行某些配置更改）。就“定期维护”类型的回收而言，使用正确编写和测试的代码，这应该是没有必要的。（额外的警告，适当的监控也有帮助，因为我想你也可能有一个进程与 CPU 一起运行，并且没有回收限制）

回收的好处是你“重新开始”。您清理内存并重新加载 DLL。任何长时间运行的线程（阅读：不做任何事情的挂起线程）都会被清除。缺点是您必须花时间将内容加载回内存（尽管新的热身内容会为您处理很多事情）。

# android - 关于通过 Android AIDL 强制停止包

> ID：11965020
> 
> 赞同：0
> 
> 时间：2012-08-15T06:34:59.447
> 
> 标签：android, aidl

缓存可以通过 AIDL 清理，forcestop 功能呢？

我试过了，但失败了。以前有人这样做过吗？

在我的包中添加aidl文件：

```
IActivityManager.aidl
package android.app; 
oneway interface IActivityManager { 
     void forceStopPackage(String packageName);
} 
```

实现 IActivityManager，但我无法获取它的对象：

```
import android.app.IActivityManager;
class ActivityManagerProxy implements IActivityManager
{

    public ActivityManagerProxy(IBinder remote)
    {
        mRemote = remote;
    }

    public IBinder asBinder()
    {
        return mRemote;
    }

    public void forceStopPackage(String packageName) throws RemoteException
    {
        Parcel data = Parcel.obtain();
        Parcel reply = Parcel.obtain();
        data.writeInterfaceToken(descriptor);
        data.writeString(packageName);
        mRemote.transact(FORCE_STOP_PACKAGE_TRANSACTION, data, reply, 0);
        reply.readException();
        data.recycle();
        reply.recycle();
    }

    private IBinder mRemote;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:44:56.183

这是不可能的，因为在自己的进程中运行的 ActivityManagerService 只是检查了 IPC 调用者的权限。您必须拥有`FORCE_STOP_PACKAGES`调用此方法的权限。

# jquery - jquery在iframe中搜索文本

> ID：11965025
> 
> 赞同：3
> 
> 时间：2012-08-15T06:35:34.323
> 
> 标签：jquery, string, search, iframe

任何人都可以帮忙吗？

我想在 iframe 中搜索一个字符串，例如。我有一个名为 main.html 的页面，它有一个 iframe，并且 iframe(somesite.com) 的内容里面有一个字符串，可以说“Home”。我想要发生的是有一个脚本，它将在 iframe“#com”中搜索字符串“home”，并会提醒一条消息，说明该字符串已找到。我希望用 jquery 而不是服务器端脚本来完成。请注意 somesite.com 是一个外部站点，我无法控制它。

**主要.html**：

```
<html>
<body>
<input type="button" id="search" value="search">
<iframe id="com" src="http://somesite.com"></iframe>
</body>
</html> 
```

**somesite.com**

```
<html>
<body>
Home
</body>
</html> 
```

抱歉英语不好，如果您有一些澄清，请发表评论。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T06:40:26.630

你可以试试：

```
$("#com").contents(); 
```

请注意，由于[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)`$.contents()` ，只能在**源自同一域**的 iframe 上执行。

这样您就可以使用它来显示警报：

```
if($("#com").contents().text()search("someText")!=-1){
    alert("found");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T06:42:26.897

这样的事情可能会有所帮助：

```
var text = $('#com').contents().find('body').html();
alert(text); 
```

**或者**

```
$("body", $("#com").contents()).each(function(){
  if ($(this).text() == "Home") {
    alert('content found');
  }
}); 
```

# c# - 实体框架 - 在 exec 存储过程中将字符串转换为日期时间失败

> ID：11965034
> 
> 赞同：0
> 
> 时间：2012-08-15T06:36:54.470
> 
> 标签：c#, entity-framework, stored-procedures

所以，我对 EF 真的很陌生，这个问题对我来说有点复杂。

这是我的存储过程返回的数据：

```
[Date]     [Name]
8/31/2012  John Doe
8/12/2011  John Meyer 
```

我的实体是：

```
public class UserEntity
{
   public DateTime Date {get; set;}
   public string Name {get; set;}
} 
```

当我换上`Date`它时`string`，它工作正常。

我用了

```
Database.SqlQuery<UserEntity>("exec sp_name", /*params*/) 
```

获取列表。

另一个使它变得更复杂的问题：存储过程和实体是遗留代码，用于不同的项目，因此无法更改。

我有机会破案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:38:48.050

一种方法是定义另一个类来检索结果：

```
public class Result
{
   public string Date {get; set;}
   public string Name {get; set;}
} 
```

然后将其转换为`UserEntity`：

```
var users = Database.SqlQuery<Result>("exec sp_name", /*params*/)
    .Select(x=> new UserEntity
    {
        Date = DateTime.Parse(x.Date),
        Name = x.Name
    }); 
```

# macos - Typesafe Stack play-scala Example Unresolved Dependencies OSX Homebrew Install

> ID：11965039
> 
> 赞同：2
> 
> 时间：2012-08-15T06:37:32.977
> 
> 标签：macos, scala, playframework, typesafe-stack

安装了 scala、giter8、sbt (0.11.3) 和 maven 的全新 Homebrew，并且大部分内容都已检查完毕。brew doctor 显示了我通过手动安装 pcre 和 python 2.7 制作的已知模块。当我获得 play-scala 模板然后第一次运行它时，我在 slf4j 上得到以下未解决的依赖项

```
# sudo sbt run
...
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::                                 
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: org.slf4j#slf4j-api;1.6.1: configuration not found in org.slf4j#slf4j-api;1.6.1: 'compile'. It was required from org.hibernate#hibernate-validator;4.2.0.Final compile
[warn]  :: commons-codec#commons-codec;1.4: configuration not found in commons-codec#commons-codec;1.4: 'compile'. It was required from org.apache.httpcomponents#httpclient;4.1.2 compile
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[error] {file:/Users/homedir/typesafe/my_app/}my_app/:update: sbt.ResolveException: unresolved dependency: org.slf4j#slf4j-api;1.6.1: configuration not found in org.slf4j#slf4j-api;1.6.1: 'compile'. It was required from org.hibernate#hibernate-validator;4.2.0.Final compile
[error] unresolved dependency: commons-codec#commons-codec;1.4: configuration not found in commons-codec#commons-codec;1.4: 'compile'. It was required from org.apache.httpcomponents#httpclient;4.1.2 compile
[warn] some of the dependencies were not recompiled properly, so classloader is not avaialable
[info] Updating {file:/Users/homedir/typesafe/my_app/}my_app...
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::                                 
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: org.slf4j#slf4j-api;1.6.1: configuration not found in org.slf4j#slf4j-api;1.6.1: 'compile'. It was required from org.hibernate#hibernate-validator;4.2.0.Final compile
[warn]  :: commons-codec#commons-codec;1.4: configuration not found in commons-codec#commons-codec;1.4: 'compile'. It was required from org.apache.httpcomponents#httpclient;4.1.2 compile
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[error] {file:/Users/homedir/typesafe/my_app/}my_app/:update: sbt.ResolveException: unresolved dependency: org.slf4j#slf4j-api;1.6.1: configuration not found in org.slf4j#slf4j-api;1.6.1: 'compile'. It was required from org.hibernate#hibernate-validator;4.2.0.Final compile
[error] unresolved dependency: commons-codec#commons-codec;1.4: configuration not found in commons-codec#commons-codec;1.4: 'compile'. It was required from org.apache.httpcomponents#httpclient;4.1.2 compile 
```

手动运行清理、重新加载、更新：

```
# sudo sbt
[info] Loading project definition from /Users/homedir/typesafe/my_app/project
[info] Set current project to my_app (in build file:/Users/homedir/typesafe/my_app/)
[my_app] $ clean
[success] Total time: 0 s, completed Aug 15, 2012 7:23:10 AM
[my_app] $ reload
[info] Loading project definition from /Users/homedir/typesafe/my_app/project
[info] Set current project to my_app (in build file:/Users/homedir/typesafe/my_app/)
[my_app] $ update
[info] Updating {file:/Users/homedir/typesafe/my_app/}my_app...
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::                                 
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: org.slf4j#slf4j-api;1.6.1: configuration not found in org.slf4j#slf4j-api;1.6.1: 'compile'. It was required from org.hibernate#hibernate-validator;4.2.0.Final compile
[warn]  :: commons-codec#commons-codec;1.4: configuration not found in commons-codec#commons-codec;1.4: 'compile'. It was required from org.apache.httpcomponents#httpclient;4.1.2 compile
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[error] {file:/Users/homedir/typesafe/my_app/}my_app/:update: sbt.ResolveException: unresolved dependency: org.slf4j#slf4j-api;1.6.1: configuration not found in org.slf4j#slf4j-api;1.6.1: 'compile'. It was required from org.hibernate#hibernate-validator;4.2.0.Final compile
[error] unresolved dependency: commons-codec#commons-codec;1.4: configuration not found in commons-codec#commons-codec;1.4: 'compile'. It was required from org.apache.httpcomponents#httpclient;4.1.2 compile
[error] Total time: 7 s, completed Aug 15, 2012 7:23:23 AM 
```

防止这种情况的正确方法是什么？这些dep不应该在初始化期间下载吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:15:04.100

由于[这个问题](https://stackoverflow.com/questions/9989449/unresolved-dependencies-for-a-new-play-2-0-scala-project?rq=1)，我最终**删除了 ~/.m2 和 ~/.ivy2，然后进行了清理、更新、重新加载**。随后一切正常。更新命令成功检索到 slf4j：

```
[my_app] $ update
[info] Updating {file:/Users/homedir/typesafe/my_app/}my_app...
[info] downloading http://repo.typesafe.com/typesafe/releases/org/slf4j/slf4j-api/1.6.1/slf4j-api-1.6.1.jar ...
[info]  [SUCCESSFUL ] org.slf4j#slf4j-api;1.6.1!slf4j-api.jar (1481ms) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T20:05:52.860

阅读这篇文章让我在推动/解决之前完成任务。

# workspace - Xcodebuild'ing 工作区并设置自定义构建路径

> ID：11965040
> 
> 赞同：39
> 
> 时间：2012-08-15T06:37:37.240
> 
> 标签：workspace, xcodebuild

我正在尝试使用`xcodebuild`在工作区中构建多项目项目。当 XCode 构建工作空间时，它会自动将所有构建工件放在 DerivedData 的公共目录中，以便每个项目都可以访问它的依赖项。

如果我使用这个命令：

```
xcodebuild -workspace myWorkspace.xcworkspace -schema builtIt -configuration Release 
```

一切正常，但工件放置在通常的派生数据目录中。然后我想出现在我可以从 CI 构建访问的特定目录中。所以我尝试了这个

```
xcodebuild -workspace myWorkspace.xcworkspace -schema builtIt -configuration Release SYMROOT=build/products OBJROOT=build/intermediates 
```

但是 xcodebuild 因这句话而失败

```
Details:  Failed to load dependencies output contents from ``/Users/d4rkf1br3/projects/dNodi/build/intermediates/dNodi.build/Debug-iphoneos/dNodi.build/StaticAnalyzer/normal/armv7/DNRootSelector.d''. 
Error: Error Domain=NSCocoaErrorDomain Code=260 "The file “DNRootSelector.d” couldn’t be opened because there is no such file." 
UserInfo=0x4012fea40 {NSFilePath=/Users/d4rkf1br3/projects/dNodi/build/intermediates/dNodi.build/Debug-iphoneos/dNodi.build/StaticAnalyzer/normal/armv7/DNRootSelector.d, NSUnderlyingError=0x4012fc240 "The operation couldn’t be completed. No such file or directory"}. 
User info: {
    NSFilePath = "/Users/d4rkf1br3/projects/dNodi/build/intermediates/dNodi.build/Debug-iphoneos/dNodi.build/StaticAnalyzer/normal/armv7/DNRootSelector.d";
    NSUnderlyingError = "Error Domain=NSPOSIXErrorDomain Code=2 \"The operation couldn\U2019t be completed. No such file or directory\"";
} 
```

问题似乎是 xcodebuild 不再为工作区中的所有项目使用中央目录，而是将工件存储在每个项目中。因此，它无法定位正在编译的代码与其他项目中生成的工件之间的依赖关系。

有谁知道在命令行上设置的正确参数？

Xcode 的 Build Setting Reference 已经两年没有更新了，所以我不知道是否有新的构建设置可以应用。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2014-04-29T00:41:20.780

我不确定这是否是一个新选项，但 5.0 版本`xcodebuild`有一个选项`-derivedDataPath`，允许您指定您希望所有构建产品所在的目录。

例如，传递`-derivedDataPath build`会创建`build`相对于您运行的位置的文件夹`xcodebuild`，并且您可以在子文件夹（如`build/Build/Products/Release-iphoneos`.

文档：[https ://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/xcodebuild.1.html](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/xcodebuild.1.html)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-09-04T07:58:02.627

到目前为止，我发现的最佳解决方案是将`CONFIGURATION_BUILD_DIR`参数与绝对路径（例如 /tmp/$PROJECT/build）一起使用。像这样：

```
xcodebuild -scheme "scheme" -configuration Debug -sdk iphoneos clean build CONFIGURATION_BUILD_DIR=$ABSOLUTE_BUILD_PATH 
```

我使用 Jenkins，我有一个名为`$WORKSPACE`. `$WORKSPACE/build`我有`CONFIGURATION_BUILD_DIR`一个我很满意的解决方案。

相对路径似乎没有按预期工作。我们应该提交一份错误报告。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-08-20T05:00:35.560

当我从 Jenkins CI 工具构建我的项目时，我也遇到了这个问题。我的主项目依赖于一个子项目。我曾尝试像这样构建遵循@Chilloutman 的解决方案：

```
xcodebuild -target TravelGuideMdd -sdk iphoneos -configuration DailyBuild clean build CONFIGURATION_BUILD_DIR=/Users/mobileserver/jenkins_home/jobs/TravelGuide-Buid-For-Me/workspace/build BUILD_DIR =/Users/mobileserver/jenkins_home/jobs/TravelGuide-Buid-For-Me/workspace/build 
```

或者

```
xcodebuild -target TravelGuideMdd -sdk iphoneos -configuration DailyBuild clean build CONFIGURATION_BUILD_DIR=/Users/mobileserver/jenkins_home/jobs/TravelGuide-Buid-For-Me/workspace/build 
```

两者都出现错误`Could not find iphoneos in /Users/mobileserver/jenkins_home/jobs/TravelGuide-Buid-For-Me/workspace/build`

但我最终使用这个获得了成功：

```
xcodebuild -target TravelGuideMdd -sdk iphoneos6.1 -configuration DailyBuild clean build SYMROOT=/Users/mobileserver/jenkins_home/jobs/TravelGuide-Buid-For-Me/workspace/build 
```

即：用绝对路径设置SYMROOT。

# android - Error implementing async task in this class

> ID：11965046
> 
> 赞同：1
> 
> 时间：2012-08-15T06:38:26.303
> 
> 标签：android, eclipse, android-asynctask

I am doing a login application ([taken from here](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)) and basically, i want login using the nric and password which will connect to a online database, however there the program crash after i added the async task into the codes.

```
public class LoginActivity extends Activity {
Button btnLogin;
Button btnLinkToRegister;
EditText inputNric;
EditText inputPassword;
TextView loginErrorMsg;

// Progress Dialog
private ProgressDialog pDialog;

// JSON Response node names
//success is the column name of the database - KEY_SUCCESS is we create the name 
private static String KEY_SUCCESS = "success";
private static String KEY_ERROR = "error";
private static String KEY_ERROR_MSG = "error_msg";
private static String KEY_NAME = "name";
private static String KEY_NRIC = "nric";
private static String KEY_CREATED_AT = "created_at";

    @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    // Importing all assets like buttons, text fields
    inputNric = (EditText) findViewById(R.id.loginNric);
    inputPassword = (EditText) findViewById(R.id.loginPassword);
    btnLogin = (Button) findViewById(R.id.buttonLogin);
    btnLinkToRegister = (Button) findViewById(R.id.btnLinkToRegisterScreen);
    loginErrorMsg = (TextView) findViewById(R.id.login_error);

    // login button click event
    btnLogin.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            // starting background task to update case
            new LoginUser().execute();
        }
    });

    // Link to Register Screen
    btnLinkToRegister.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            Intent i = new Intent(getApplicationContext(),
            RegisterActivity.class);
            startActivity(i);
            finish();
        }
    });
}

/**
 * Background Async Task to  Login User
 * */
class LoginUser extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */        
    protected void onPreExecute() {
    super.onPreExecute();
    pDialog = new ProgressDialog(LoginActivity.this);
    pDialog.setMessage("Logging In ...");
    pDialog.setIndeterminate(false);
    pDialog.setCancelable(true);
    pDialog.show();
    }

    /**
    * Logging in
    * */
    protected String doInBackground(String... params) {

            String nric = inputNric.getText().toString();
            String password = inputPassword.getText().toString();
            UserFunctions userFunction = new UserFunctions();
            Log.d("Button", "Login");
            JSONObject json = userFunction.loginUser(nric, password);

            // check for login response
            try {
                if (json.getString(KEY_SUCCESS) != null) {
                    loginErrorMsg.setText("");
                    String res = json.getString(KEY_SUCCESS); 
                    if(Integer.parseInt(res) == 1){
                        // user successfully logged in
                        // Store user details in SQLite Database
                        DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                        JSONObject json_user = json.getJSONObject("user");

                        // Clear all previous data in database
                        userFunction.logoutUser(getApplicationContext());
                        db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_NRIC), json_user.getString(KEY_CREATED_AT));                      

                        // Launch home Screen
                        Intent home = new Intent(getApplicationContext(), HomeActivity.class);

                        // Close all views before launching home
                        home.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(home);

                        // Close Login Screen
                        finish();
                    }else{
                        // Error in login
                        loginErrorMsg.setText("Incorrect username/password");
                    }
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }
            return null;
    }

     /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once case deleted
        pDialog.dismiss();

    }
}

} 
```

Logcat Errors:

```
08-15 06:20:26.254: E/AndroidRuntime(302): FATAL EXCEPTION: AsyncTask #1
08-15 06:20:26.254: E/AndroidRuntime(302): java.lang.RuntimeException: An error occured      while executing doInBackground()
08-15 06:20:26.254: E/AndroidRuntime(302):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
08-15 06:20:26.254: E/AndroidRuntime(302):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
08-15 06:20:26.254: E/AndroidRuntime(302):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
08-15 06:20:26.254: E/AndroidRuntime(302):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
08-15 06:20:26.254: E/AndroidRuntime(302):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-15 06:20:26.254: E/AndroidRuntime(302):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
08-15 06:20:26.254: E/AndroidRuntime(302):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
08-15 06:20:26.254: E/AndroidRuntime(302):  at java.lang.Thread.run(Thread.java:1096)
08-15 06:20:26.254: E/AndroidRuntime(302): Caused by: android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
08-15 06:20:26.254: E/AndroidRuntime(302):  at android.view.ViewRoot.checkThread(ViewRoot.java:2802)
08-15 06:20:26.254: E/AndroidRuntime(302):  at      android.view.ViewRoot.requestLayout(ViewRoot.java:594)
08-15 06:20:26.254: E/AndroidRuntime(302):  at android.view.View.requestLayout(View.java:8125)
08-15 06:20:26.254: E/AndroidRuntime(302):  at android.view.View.requestLayout(View.java:8125)
08-15 06:20:26.254: E/AndroidRuntime(302):  at android.view.View.requestLayout(View.java:8125)
08-15 06:20:26.254: E/AndroidRuntime(302):  at android.view.View.requestLayout(View.java:8125)
08-15 06:20:26.254: E/AndroidRuntime(302):  at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:254)
08-15 06:20:26.254: E/AndroidRuntime(302):  at android.view.View.requestLayout(View.java:8125)
08-15 06:20:26.254: E/AndroidRuntime(302):  at android.widget.TextView.checkForRelayout(TextView.java:5378)
08-15 06:20:26.254: E/AndroidRuntime(302):  at android.widget.TextView.setText(TextView.java:2688)
08-15 06:20:26.254: E/AndroidRuntime(302):  at android.widget.TextView.setText(TextView.java:2556)
08-15 06:20:26.254: E/AndroidRuntime(302):  at android.widget.TextView.setText(TextView.java:2531)
08-15 06:20:26.254: E/AndroidRuntime(302):  at com.pivestigator.LoginActivity$LoginUser.doInBackground(LoginActivity.java:107)
08-15 06:20:26.254: E/AndroidRuntime(302):  at com.pivestigator.LoginActivity$LoginUser.doInBackground(LoginActivity.java:1)
08-15 06:20:26.254: E/AndroidRuntime(302):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
08-15 06:20:26.254: E/AndroidRuntime(302):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
08-15 06:20:26.254: E/AndroidRuntime(302):  ... 4 more
08-15 06:20:26.344: W/ActivityManager(75):   Force finishing activity com.pivestigator/.LoginActivity
08-15 06:20:28.554: E/WindowManager(302): Activity com.pivestigator.LoginActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f33188 that was originally added here
08-15 06:20:28.554: E/WindowManager(302): android.view.WindowLeaked: Activity com.pivestigator.LoginActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f33188 that was originally added here
08-15 06:20:28.554: E/WindowManager(302):   at android.view.ViewRoot.<init>(ViewRoot.java:247)
08-15 06:20:28.554: E/WindowManager(302):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
08-15 06:20:28.554: E/WindowManager(302):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
08-15 06:20:28.554: E/WindowManager(302):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
08-15 06:20:28.554: E/WindowManager(302):   at android.app.Dialog.show(Dialog.java:241)
08-15 06:20:28.554: E/WindowManager(302):   at com.pivestigator.LoginActivity$LoginUser.onPreExecute(LoginActivity.java:90)
08-15 06:20:28.554: E/WindowManager(302):   at android.os.AsyncTask.execute(AsyncTask.java:391)
08-15 06:20:28.554: E/WindowManager(302):   at com.pivestigator.LoginActivity$1.onClick(LoginActivity.java:60)
08-15 06:20:28.554: E/WindowManager(302):   at android.view.View.performClick(View.java:2408)
08-15 06:20:28.554: E/WindowManager(302):   at android.view.View$PerformClick.run(View.java:8816)
08-15 06:20:28.554: E/WindowManager(302):   at android.os.Handler.handleCallback(Handler.java:587)
08-15 06:20:28.554: E/WindowManager(302):   at android.os.Handler.dispatchMessage(Handler.java:92)
08-15 06:20:28.554: E/WindowManager(302):   at android.os.Looper.loop(Looper.java:123)
08-15 06:20:28.554: E/WindowManager(302):   at android.app.ActivityThread.main(ActivityThread.java:4627)
08-15 06:20:28.554: E/WindowManager(302):   at java.lang.reflect.Method.invokeNative(Native Method)
08-15 06:20:28.554: E/WindowManager(302):   at java.lang.reflect.Method.invoke(Method.java:521)
08-15 06:20:28.554: E/WindowManager(302):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-15 06:20:28.554: E/WindowManager(302):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-15 06:20:28.554: E/WindowManager(302):   at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:43:19.377

The error itself described you are trying to update or access Activity's Main UI Thread in other Thread which is not allowed.

Actually you are trying to update Activity's View from AsyncTask's `doInBackground()` (As doInBAckground() runs in worker thread) method. in Android its not allowed.

I think these lines,

```
String nric = inputNric.getText().toString();
String password = inputPassword.getText().toString(); 
```

and

```
loginErrorMsg.setText("Incorrect username/password"); 
```

cause error.. So remove these lines from `doInBackground()` of **AsyncTask** and put those code lines in `onPreExecute()` and `onPostExecute()` of **AsyncTask**.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T06:58:25.320

Move `loginErrorMsg.setText("Incorrect username/password");` to the `AsyncTask's` `onProgressUpdate(..)` method, and call `publishProgress(..)` instead in the `doInBackground()` thread.

The other problem is (wich in my opinion caused the crash) is that you are trying to start a new `Activity` from the worker thread. Move the following code to the `onPostExecute(..)` method, just after `pDialog.dismiss()` and check there if the login was successful through the `doInBackground()` return value, and the argument of `onPostExecute()`.

The leaked window exception means, that the `ProgressDialog` is still visible, when you try to finish your acttivity.

```
class LoginUser extends AsyncTask<Void, String, Boolean> {

    /**
     * Before starting background thread Show Progress Dialog
     * */        
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(LoginActivity.this);
        pDialog.setMessage("Logging In ...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

    /**
    * Logging in
    * */
    protected Boolean doInBackground(Void... params) {

        String nric = inputNric.getText().toString();
        String password = inputPassword.getText().toString();
        UserFunctions userFunction = new UserFunctions();
        Log.d("Button", "Login");
        JSONObject json = userFunction.loginUser(nric, password);

        boolean isSuccess = false;

        // check for login response
        try {
            if (json.getString(KEY_SUCCESS) != null) {
                // Set the error TextField on the UI thread
                publishProgress("");

                String res = json.getString(KEY_SUCCESS); 
                if(Integer.parseInt(res) == 1){
                    // user successfully logged in
                    // Store user details in SQLite Database
                    DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                    JSONObject json_user = json.getJSONObject("user");

                    // Clear all previous data in database
                    userFunction.logoutUser(getApplicationContext());
                    db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_NRIC), json_user.getString(KEY_CREATED_AT));                      

                    // We logged in successfully
                    isSuccess = true;
                }else{
                    // Error in login
                    // Set the error TextField on the UI thread
                    publishProgress("Incorrect username/password");
                }
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }
        return isSuccess;
    }

    @Override
    protected void onProgressUpdate(String... values) {
        loginErrorMsg.setText(values[0]);
    }

     /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(Boolean result) {
        // dismiss the dialog once case deleted
        pDialog.dismiss();

        if(result.booleanValue()){
            // Launch home Screen
                Intent home = new Intent(getApplicationContext(), HomeActivity.class);

                // Close all views before launching home
                home.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(home);

                // Close Login Screen
                finish();
        }
    }
} 
```

# eclipse - Jface TreeViewer 节点 与文件链接

> ID：11965050
> 
> 赞同：0
> 
> 时间：2012-08-15T06:38:43.120
> 
> 标签：eclipse, sdk, jface, treeviewer

我编写了一个 eclipse 插件来分析文件中的一些缺陷，我在 jface 树视图中获取了 java 文件的列表、它们的类和方法，当我双击树的文件节点时，我需要在编辑器中打开文件看法。

请帮我解决一下这个。

谢谢，
沙辛达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:52:30.850

使用[IDE.openEditor](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/ide/IDE.html#openEditor%28org.eclipse.ui.IWorkbenchPage,%20org.eclipse.core.resources.IFile%29)打开编辑器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:17:09.513

您应该使用带有相应过滤器的通用导航器框架，该过滤器已经为 Eclipse 资源内置了链接和打开功能，但是，设置起来要复杂得多 - 请参阅以[http://cvalcarcel.wordpress](http://cvalcarcel.wordpress.com/2009/07/08/writing-an-eclipse-plug-in-part-1-what-im-going-to-do/)开头的博客文章*系列。* [com/2009/07/08/writing-an-eclipse-plug-in-part-1-what-im-going-to-do/](http://cvalcarcel.wordpress.com/2009/07/08/writing-an-eclipse-plug-in-part-1-what-im-going-to-do/)

或者，您可以添加一个双击侦听器，通过查看打开的编辑器来打开编辑器（或检查当前工作台页面的现有编辑器）。有关基本思想，请参阅[相应的 Eclipse FAQ 条目](http://wiki.eclipse.org/FAQ_How_do_I_open_an_editor_programmatically?)。

# codeigniter - Pyrocms 问题：如何使用标签在页面中显示表中的单个记录

> ID：11965052
> 
> 赞同：1
> 
> 时间：2012-08-15T06:38:54.463
> 
> 标签：codeigniter, html-table, record, pyrocms

我创建了一个插件，它从 db 表中获取记录。现在我想将记录显示到页面中。我正在尝试使用标签，但无法使其正常工作。我怎样才能做到这一点？
这是详细信息：

插入

```
class Plugin_News extends Plugin  
{  
   function getNewsDetails()  
   {  
    $this->load->model('news/news_m');
    $result =   $this->news_m->getNews();

    return $this->attribute('result',$result);
   }       
} 
```

模型

```
public function getNews()
{       
    $id =   isset($_REQUEST['id']) ? $_REQUEST['id'] : 0;

    if($id > 0 )
    {
        $where  =   "WHERE id = $id"; 
    }else{
        $where  =   " ";
    }

    $sql_query  ="    SELECT 
                        id,
                        news_title , 
                        news_description ,
                    FROM default_news 
                    $where";
    $query  =   $this->db->query($sql_query);
    return  $query->row();
} 
```

这就是我试图称呼它的方式

```
{{ News:getNews }}  
<li><a href  = "http://localhost/lc/index.php/newsdetail?id={{ id }}">{{ news_title }}</a></li>
{{ /News:getNews }} 
```

并在页面newsdetails中显示单条记录

```
<tbody>
    <tr>
        <td>{{ News:getNewsDetails news_title}}  </td>
    </tr>
    <tr>
        <td>{{ News:getNewsDetails description }}</td>
    </tr>
</tbody> 
```

它不起作用，我无法理解正确的语法，并且在文档中找不到任何内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:55:07.250

好吧，经过一番研究，我找到了这个替代方案。
在模型中返回这个

```
return  $query->result(); 
```

但是查询应该限制为1

```
SELECT id,news_title , news_description ,FROM default_news $where limit 1 
```

并在页面中简单地创建一个循环来显示东西

```
{{ News:getNewsDetails}} 
<tbody>
    <tr>
        <td>{{ title }}</td>
    </tr>
    <tr>
        <td>{{ description }}</td>
    </tr>
</tbody>
{{ /News:getNewsDetails}} 
```

我知道这并不完美，但这符合我的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:53:18.390

只是模型中的一种更快的方法

你可以在你的模型中使用这条线

```
public function getNews()
{       
    $id =   isset($_REQUEST['id']) ? $_REQUEST['id'] : 0;
    if($id > 0 )
    {
        $where  =   "id = $id"; 
    }else{
        $where  =   "";
    }
    return $this->db->select('id, news_title , news_description')
           ->from('news')->where($where)->get()->row();
} 
```

# .net - 将委托传递给静态类会导致泄漏吗？

> ID：11965054
> 
> 赞同：3
> 
> 时间：2012-08-15T06:39:27.000
> 
> 标签：.net, memory-leaks, static, delegates

在 .Net 2.0 中工作，很快将代码库迁移到 4.0

最近我一直在使用事件序列化类，并且找到我的事件订阅者（即表单）也会尝试序列化（我现在使用 [field:NonSerializable] 来阻止这种情况）。

这让我想到，如果我将委托传递给静态类的方法（仅用于方法范围），静态类是否根植于委托的所有者，导致它无法被 GC 收集？

我有一个静态 ListUtilities 类来处理 lambda 表达式以及静态缓存，我定期传递委托，并且想知道这是否会泄漏内存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T06:46:58.687

不，那里没什么好担心的。将委托传递给方法很好，（除非该方法将委托无限期地存储在某处）。

*有*问题的是静态事件（或长寿命对象上的事件，例如单例）。如果您不取消订阅这些，则该事件可以使对象永远保持活动状态。例如：

```
// this object is meant to be short-lived
var obj = new SomeType();

// some static event
MyUtility.SomeEvent += { obj.Foo(); }; 
```

现在静态事件`MyUtility`阻止收集新`SomeType`实例，直到该事件订阅被删除......它可能永远不会，因为它是一个匿名方法（需要巫术来取消订阅）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T06:46:22.653

这不会导致内存泄漏。只要您不将委托引用保存在静态变量中，那么在方法完成后就可以收集委托所有者。

# ios - 带有 NSUserDefaults 的文本字段 setEnabled

> ID：11965058
> 
> 赞同：1
> 
> 时间：2012-08-15T06:39:47.800
> 
> 标签：ios, uitextfield, nsuserdefaults

我有一个 UISwitch，除其他外，女巫禁用了 UITextfield。使用 NSUserDefaults 时，我管理开关以记住其当前状态（开/关）

```
 [[NSUserDefaults standardUserDefaults]
     setBool:[sender isOn]
     forKey:MyPrefKey]; 
```

但是如何记住启用了文本文件？使用“setBool”是不可能的，我不知道如何使用 setObject。

```
 [[NSUserDefaults standardUserDefaults]
         setObject:[textField setEnabled:NO]
         forKey:MyPrefKey]; 
```

不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:44:51.340

为什么`setBool`用不了？

两者都应该工作，但您应该记住同步用户默认值：

```
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

同样在您的第二个示例中存在错误，您应该将标志设置为`[textField isEnabled]`而不是`setEnabled:NO`，因为这将返回 void。您还试图传入一个原语`BOOL`，它应该被包装在一个`NSNumber`中以存储为一个对象

```
[[NSUserDefaults standardUserDefaults]
         setObject:[NSNumber numberWithBool:[textField isEnabled]]
         forKey:MyPrefKey];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

# ruby - 用包含它的字符串替换手动写入的日期

> ID：11965073
> 
> 赞同：3
> 
> 时间：2012-08-15T06:40:39.357
> 
> 标签：ruby

我正在使用以下两件事：

```
CSV.foreach('datafile.csv','r') {|row| D_Location << row[0]}

puts Date.new(2003,05,02).cwday 
```

在第一行中，我想将 datafile.csv 更改为类似字符串的内容，这样我就可以更改一个字符串，并且它会针对所有这些代码进行更改。我有很多，每个控制 1 个 csv 列。

在第二个中，我想替换实际写入的日期，并将其替换为字符串。这样可以自动进行，因为字符串将根据其他标准生成。

我相信如果我太菜鸟了，模组会禁止我，呵呵。然后我会坚强起来，最终自己找到这些答案。但到目前为止我已经解决了很多，但不是这个。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:49:02.777

制作一个函数，它接受一个代表工作日的字符串，并返回一个数字。稍后在您的代码中调用此函数：

```
Date.new(2003, 05, yourfun('Tuesday')).cwday 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T06:58:49.253

对于问题的第一部分，您已经在使用字符串。我认为你的意思是你希望它在一个变量中：

```
csv_file = 'datafile.csv'
CSV.foreach(csv_file,'r') {|row| D_Location << row[0]} 
```

对于您问题的第二部分，`Date.parse()`可以使用字符串，但它们需要采用可以识别的格式。如果您的日期字符串使用逗号，您可以用连字符替换它们：

```
date_str = "2003,05,02"
Date.parse(date_str.gsub(",", "-")).cwday # => 5 
```

目前尚不清楚您的日期字符串将来自何处或它们将采用何种格式，但您需要了解的一般概念是您可以使用变量，并且您可以转换字符串。

# perl - 没有 ID/名称的 Perl HTML::Treebuilder XPATH 表标签

> ID：11965075
> 
> 赞同：1
> 
> 时间：2012-08-15T06:40:52.170
> 
> 标签：perl, xpath

我想提取 HTML 页面中特定表格单元格中存在的一些文本。

现在，问题是，这个单元格存在于一个没有 ID/名称的表格标签中。

我正在使用 HTML::TreeBuilder::XPath 来使用 XPATH 表达式提取值。

HTML 内容如下所示：

```
<table border="0">
<tr>
<td>Some Text</td>
<td>The Text I want comes here</td>
</tr> 
```

这就是我的 XPATH 表达式的样子：

```
@nodes=$tree->findnodes(q{//table[8]/tr/td[2]/text()});
print $_->string_value."\n" foreach(@nodes); # corrected, thanks mirod. 
```

它不显示输出。

我已经使用了上面的 table[8]，因为这是 HTML 页面中的八个 table 标记（假设索引从 1 开始）。

另外，我使用了 td[2] 因为我想要第二个 td 标签之间的 innerHTML。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T09:21:05.950

如果删除`text()`XPath 查询末尾的 会发生什么？我认为调用`string_value`td 本身就足够了。

此外，方法调用不会插入到字符串中，因此您需要编写`print $_->string_value, "\n"`.

这将为您提供内容的文本，而不是标记。为此，您需要使用`as_HTML`, 并去除外部标签（HTML::Element 中没有提供内部 HTML 的方法）：

```
#!/usr/bin/perl

use strict;
use warnings;

use HTML::TreeBuilder::XPath;

my $tree= HTML::TreeBuilder::XPath->new_from_content( <DATA>);

my @nodes=$tree->findnodes(q{//table[1]/tr/td[2]});
print $_->string_value, "\n" foreach(@nodes); # text
print $_->as_HTML, "\n" foreach(@nodes);      # outerHTML

__DATA__
<html>
<body>
<table border="0">
<tr>
<td>Some Text</td>
<td>The Text I want comes here with <b>nested</b> content</td>
</tr>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:45:31.200

mirod 方法应该适合您。

但如果您需要文本内容，我建议使用`findvalues`而不是。`findnodes`

尝试运行此代码并显示输出：

```
my @values=$tree->findvalues(q{//table[8]//tr[1]//td});
print $_, "\n" foreach(@values); 
```

# api - 获取 Clojure 库的 API 文档

> ID：11965078
> 
> 赞同：2
> 
> 时间：2012-08-15T06:41:25.383
> 
> 标签：api, clojure, documentation, libraries

我是 Clojure 的新手，我想知道所有库的所有文档（例如在[clojars.org](https://clojars.org/)上找到的那些）在哪里？

例如使用 lein 我对 project.clj 执行以下操作

```
(defproject Program-name "1.0.0-SNAPSHOT"
  :description "FIXME: write description"
  :dependencies [[org.clojure/clojure "1.3.0"]
   [facts/speech-synthesis "1.0.0"]
[org.clojars.jeffsigmon/maryclient "4.3.0"]
[speech-synthesis "1.0.0"]
[clarity "0.5.6"]]) 
```

然后用于`lein deps`安装所有库

核心.clj

```
(ns Program-name.core
(:use [speech-synthesis.say :as say])(use [clarity.component]))
(use 'clarity.form) 
```

那么我将如何导入和获取 org.clojars.jeffsigmon/maryclient 的 API 信息？

> 注意：我读到 API 文档存储在库中，您必须导入它们才能访问它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T07:36:24.893

API 文档以文档字符串的形式存在于代码中

例如

```
(defn my-func
 "This is the doc string"
 [a b c]
   ...) 
```

您可以访问 REPL 中的文档字符串：

```
$ lein repl
user> (doc println)
-------------------------
clojure.core/println
([& more])
  Same as print followed by (newline)

user> (apropos "print")
(*print-radix* *print-miser-width* *print-pprint-dispatch* print-table 
  print-length-loop pprint-indent pprint *print-suppress-namespaces* 
  *print-right-margin* *print-pretty* with-pprint-dispatch ...)

user> (find-doc "print")
... lots of functions related to print with docs... 
```

各种 IDE 还提供对文档的访问权限。例如在 emacs 中，您可以使用`slime-describe-symbol`swank 通过快捷方式访问`C-c C-d d`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T07:30:49.247

在 REPL 上使用`doc`, `find-doc`,函数，使用启动 repl。 顺便说一句：如果库 jar 不包含 .clj 文件，则不能使用它们。`apropos``lein repl`

# google-apps-script - 谷歌应用脚 本 html 服务锚标签

> ID：11965080
> 
> 赞同：0
> 
> 时间：2012-08-15T06:41:41.190
> 
> 标签：google-apps-script, google-apps

使用 HtmlService 构建用户界面时，如何在自己的项目中放置引用页面的锚标记？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:45:54.133

看[我对这个问题的回答](https://stackoverflow.com/questions/11280978/href-in-htmlservice/11295895#11295895)

基本技术，复制到这里：

```
function doGet(requestInfo) {
  var url = ScriptApp.getService().getUrl();
  if (requestInfo.parameter && requestInfo.parameter['page'] == '2') {
    return HtmlService.createHtmlOutput(
      "This is Page 2\. <a href='" + url + "?page=1'>Page 1</a>");
  }
  return HtmlService.createHtmlOutput(
     "This is Page 1\. <a href='" + url + "?page=2'>Page 2</a>");
} 
```

# animation - 在 Metro 风格应用程序中滑入的页面项目

> ID：11965083
> 
> 赞同：0
> 
> 时间：2012-08-15T06:42:19.110
> 
> 标签：animation, microsoft-metro, slide, items

我正在尝试使用 Visual Studio 2012 创建 Metro 风格的应用程序，我不是最有经验的设计师，但我的应用程序的一件事让我感到困惑。

为了设计一致性，我一直在为我的应用程序中的不同页面使用“基本页面”而不是空白页面，但是这些“基本页面”似乎有一种奇怪的行为。当页面打开时，我放置在页面上的每个项目（按钮、文本框等）都会一个接一个地滑入。例如，如果我运行应用程序并导航到具有 10 个按钮的页面，它将执行一个简短的动画，其中每个按钮将从右侧滑入左侧。当处理一个页面上的大量项目时，这可能会花费大量时间，因为每个项目都以单独的方式滑动。

查看每个项目的属性，我已经能够通过更改流向来更改它在加载页面时的滑动方向。此外，通过一些研究，我认为这可能是由于 Metro 风格的“enterPage”或“enterContent”动画，但我不能确定。

我试图尝试并弄清楚这一点，并搜索以找出导致此问题的原因，以便我可以对其进行修改（理想情况下，我只想将项目组合在一起以相互滑入）但是搜索起来有点困难模糊的词，所以我在这里问。

是什么原因造成的，我该如何修改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:42:58.523

EnterPage 不应该对动画进行排序。它们确实抵消了许多元素的一些动画，但它不应该是每个元素的顺序。

你在使用 WinJS 导航吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:27:29.400

好吧，经过一些实验后，我发现将我所有的页面内容放在一个网格中可以让它们像我想要的那样一次进入。我可能应该早点尝试过，但一切都已经在页面的外部网格内，所以我认为会处理它。

我不太了解它，但目前有效。

# javascript - 打开一个新选项卡/窗口并向其写入内容？

> ID：11965087
> 
> 赞同：23
> 
> 时间：2012-08-15T06:42:23.037
> 
> 标签：javascript, firefox, firefox-addon, xpcom

我正在使用[Execute JS](https://addons.mozilla.org/vi/firefox/addon/execute-js/?src=search)在 Firefox 中编写和测试 Javascript 代码。我想打开一个新的标签/窗口并写一些东西，我试过了

```
var wm = Components.classes["@mozilla.org/appshell/window-mediator;1"].getService(Components.interfaces.nsIWindowMediator);
var win = wm.getMostRecentWindow("navigator:browser");
printWindow = win.open("about:blank");
printWindow = wm.getMostRecentWindow("navigator:browser");
printWindow.gBrowser.selectedBrowser.contentDocument.write('hello'); 
```

和

```
myWindow=window.open('','','width=200,height=100')
myWindow.document.write("<p>This is 'myWindow'</p>")
myWindow.focus() 
```

但是我总是收到这个错误

> [例外……“操作不安全。” 代码：“18” nsresult：“0x80530012（安全错误）”

有什么办法可以通过这个异常？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2018-02-27T23:19:12.347

在 Chrome、Firefox（有一些例外）、IE 和 Edge（以及可能启动的其他浏览器）中，对数据 URL 的顶级导航已被阻止。它们显然通常用于网络钓鱼攻击，主要浏览器供应商认为危险超过了合法用例提供的价值。

这篇[Mozilla 安全博客文章](https://blog.mozilla.org/security/2017/11/27/blocking-top-level-navigations-data-urls-firefox-58/)解释说 Firefox 将阻止

> *   使用以下命令导航到新的顶级数据 URL 文档的网页：
>     *   `window.open("data:…");`
>     *   `window.location = "data:…"`
>     *   点击`<a href="data:…">`（包括 ctrl+click、'open-link-in-*' 等）。
> *   使用以下命令重定向到新的顶级数据 URL 文档的网页：
>     *   302重定向到`"data:…"`
>     *   元刷新到`"data:…"`
> *   在浏览器中打开数据 URL 的外部应用程序（例如 ThunderBird）

但不会阻塞

> *   用户明确输入/粘贴`"data:…"`到地址栏
> *   打开所有纯文本数据文件
> *   `"data:image/*"`在顶级窗口中打开，除非它是`"data:image/svg+xml"`
> *   开幕式`"data:application/pdf"`和`"data:application/json"`
> *   下载数据：URL，例如 'save-link-as'`"data:…"`

您还可以阅读[关于在 Chrome 中弃用和删除顶部框架导航到数据 URL](https://groups.google.com/a/chromium.org/forum/#!topic/blink-dev/GbVcuwg_QjM%5B1-25%5D)的建议，并查看[当前的 Chrome 状态，表明已被删除](https://www.chromestatus.com/feature/5669602927312896)。

至于如何在新选项卡或窗口中实际打开 HTML，这应该足够了：

```
var tab = window.open('about:blank', '_blank');
tab.document.write(html); // where 'html' is a variable containing your HTML
tab.document.close(); // to finish loading the page 
```

请注意，至少在 Chrome 中，[通过 document.write 注入的外部脚本可能不会在较慢的连接上加载](https://developers.google.com/web/updates/2016/08/removing-document-write)。这可能与这里无关，但需要注意。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-08-15T10:20:09.347

**编辑**：截至 2018 年，此解决方案[不再有效](https://blog.mozilla.org/security/2017/11/27/blocking-top-level-navigations-data-urls-firefox-58/)。因此，您将返回`about:blank`在新窗口中打开并向其中添加内容。

不要“写入”窗口，只需使用您需要的内容打开它：

```
var data = "<p>This is 'myWindow'</p>";
myWindow = window.open("data:text/html," + encodeURIComponent(data),
                       "_blank", "width=200,height=100");
myWindow.focus(); 
```

供参考：[数据 URI](https://developer.mozilla.org/en-US/docs/data_URIs)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-02-27T18:51:43.220

```
var winPrint = window.open('', '', 'left=0,top=0,width=800,height=600,toolbar=0,scrollbars=0,status=0');
winPrint.document.write('<title>Print  Report</title><br /><br /> 
Hellow World');
winPrint.document.close(); 
```

自 2018 年起，window.open(uri) 在 chrome 中不起作用

# xml - jQuery >> 关于如何解析、过滤和排序所需 XML 数据的建议

> ID：11965090
> 
> 赞同：1
> 
> 时间：2012-08-15T06:42:54.200
> 
> 标签：xml, ajax, jquery, jquery-plugins

使用 jQuery 解析、过滤和排序 XML 数据的最佳起点是什么，类似于 XPath？

背景：我是 jQuery 新手，搜索这个主题导致了数百个不同的插件和教程。但是，我在 jQuery-API 中找不到用于过滤和排序的解决方案。现在，我对一个函数的许多不同解决方法感到非常困惑，我认为这将是 ajax 库的核心部分？！

那么，您能否分享您的意见：最好/标准的方法是什么？我应该使用插件吗？如果有，是哪一个？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:57:55.567

您很幸运，无需使用任何插件，执行此操作的方法内置于库中

这些链接很好地解释了如何使用它们

[http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

[http://api.jquery.com/jQuery.parseXML/](http://api.jquery.com/jQuery.parseXML/)

# security - 是否可以针对暴力攻击加强 aes 加密？

> ID：11965095
> 
> 赞同：2
> 
> 时间：2012-08-15T06:43:48.603
> 
> 标签：security, encryption, aes, password-protection, brute-force

有没有办法在不加强密码的情况下强化 aes 加密以防止暴力攻击。我的意思是用户通常选择简单的密码。我不想强迫用户选择越来越复杂的密码。（这是正确的解决方案，但是当他们不断忘记密码并且无法使用密码时，它是无用的）他们从大写，小写和数字中选择密码. 密码长度为 8。我想在不更改这些密码属性的情况下使暴力攻击变得困难。

编辑：密码长度正好是 8。不可接受的长度太短。还有一个关于回复的问题，将加密文本保存在内存中（使用加盐和密钥拉伸）是一个安全问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T06:54:11.153

我很想说：*不，这是不可能的。*为了使蛮力攻击更难，你需要更多的熵。

话虽如此，如果您进行[按键拉伸](http://en.wikipedia.org/wiki/Key_stretching)，您实际上可以使猜测过程变慢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T07:00:03.383

如果不知道如何使用它的确切性质，就很难对问题发表评论。（例如，密码只能存储为 8 个字符吗？）。

也就是说，选择好的[盐](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)会使暴力破解更加困难。今天被盗的大多数密码都是由于未能实施适当的加盐造成的。

为了提高安全性，您可以使用[一致的散列](http://en.wikipedia.org/wiki/Consistent_hashing)将盐分片到一系列值上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T01:23:01.660

如果您想保护您的用户免受使用“密码”、“12345678”或类似密码之类的密码，那么就**没有**办法强化它们。

您必须能够在合理的时间内（即平均硬件不到 1 秒）检查提供的密码是否与您拥有的哈希值匹配。即使检查哈希和密码之间的相等性，暴力破解简单密码也需要 1 秒，在普通 PC 上只需不到一天的时间。

如果您想保护平均质量的密码（不在前 1000 个最常见的密码或少数最常用语言中的单个单词），那么密码/密钥拉伸是您的最佳选择：scrypt、bcrypt 或标准 PBKDF2 是不错的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T14:42:37.543

使用多轮会减慢尝试密码的过程，但这就是我能想到的。

# asp.net - 在哪里存储相册的图像？

> ID：11965097
> 
> 赞同：2
> 
> 时间：2012-08-15T06:44:02.600
> 
> 标签：asp.net, asp.net-mvc-3, security

我正在创建我的网站模块，我可以在“相册”中显示图像，就像 facebook 一样。

为了存储/分组图像，我计划将它们`~/Images`放在我的应用程序结构内的文件夹中。这被认为是不好的做法，还是会使我的应用程序面临任何安全漏洞？我读到你不应该在你的网站结构中放置这样的东西，但我不太明白为什么（或者如果这是相同的场景）。

因此，专辑将被归类为...

`~/Images/album1`,`~/Images/album2`等。

这是放在里面的合适的东西`App_Data`，还是有这样的东西更“首选”的位置？

对不起，如果这是一个微不足道的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:36:43.613

根据服务器的性能，您可能需要考虑使用 BLOB 将图像存储到数据库中

[https://dev.mysql.com/doc/refman/5.0/en/blob.html](https://dev.mysql.com/doc/refman/5.0/en/blob.html)

图像可以轻松排序、组织、分类，而无需担心文件夹结构和文件夹权限。只需使用您选择的 PHP/AJAX/语言来提供身份验证并选择您希望显示的文件。

这样，每张图片都可以拥有自己的字段（任意数量），例如发布它的用户、原始文件名、标题、它所属的专辑等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:39:56.013

这里的三个答案都很好。上传的图像没有首选存储，这完全取决于您的要求。

正如[Henhealg 所说](https://stackoverflow.com/a/11965147/304832)，不要将它们存储在 App_Data 中。如果您将它们放在这里，它们将无法从 Web 访问。例如，即使路径正确，以下内容也不会渲染图像：

```
<img src="/App_Data/album1/image1.png" alt="" /> 
```

一种选择是将您的本地 ~/Albums 目录映射到 Web 服务器可访问的不同文件夹，[如 sylon 所说](https://stackoverflow.com/a/11965685/304832)。这会将图像保留在提供 MVC 应用程序的目录之外，但会“假装”它们在那里。如果您控制 IIS 并且可以设置文件共享，那么这可能是您的一个选择。

此外，[就像 XToro 所说](https://stackoverflow.com/a/11965624/304832)，将它们存储在 SQL 数据库中是一种选择。在这里存储很灵活，因为您不必担心文件夹或文件名冲突。多个用户可以各自拥有同名的专辑和文件，但它们不会发生冲突，因为它们不像普通文件那样占用文件系统空间。如果安全性对您的应用程序很重要（不向未经授权的用户显示照片或相册），将它们放在 SQL 表中会使这变得相当容易。

但是，如果您不担心安全性或文件命名冲突，则可以轻松地将它们存储在 MVC 应用程序的 ~/Images 或 ~/Albums 目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T06:49:57.130

由于您可以在应用程序投入生产后轻松地作为用户检查图像的存储位置，因此存储图像的位置与您为存储图像的文件夹设置的权限无关紧要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T07:44:24.903

正如您所说，我会使用文件系统，但将其存储在应用程序文件夹之外，因为您说这是不好的做法。我同意这一点 - 当我进行部署时，我更喜欢删除所有内容并放入新代码并保持 web.config 文件这样我总是有一个干净的环境，而且从头开始更容易而不必担心我需要备份或从以前的安装中带来什么。

我会使用 IIS 将目录映射到我的解决方案中，无论我希望从网络共享存储中获得什么，或者您想要安全地保存您的相册。

例如 ， 当您的网站在时`D:\MySafeStorage\Albums\` 映射到您的网站 `~\Albums\``C:\inetpub\MyWebSite\`

# windows-phone-7 - 在为 WindowsPhone 设置 specflow 1.9 时遇到 LoaderExceptions

> ID：11965100
> 
> 赞同：1
> 
> 时间：2012-08-15T06:44:21.423
> 
> 标签：windows-phone-7, nuget, specflow, wp7test

我尝试关注 [https://github.com/Expensify/WindowsPhoneTestFramework/wiki/Setting-up-a-new-BDD-machine](https://github.com/Expensify/WindowsPhoneTestFramework/wiki/Setting-up-a-new-BDD-machine)

在 WindowsPhone 上设置 Specflow。

我安装了 Specflow 1.8.1。所以我先卸载 1.8.1 并在 VS2010 上安装 Specflow 1.9 插件。运行 Specflow 时。我仍然有以下异常。

[错误] 添加两个数字：无法加载一种或多种请求的类型。检索 LoaderExceptions 属性以获取更多信息。System.Reflection.ReflectionTypeLoadException：无法加载一种或多种请求的类型。检索 LoaderExceptions 属性以获取更多信息。在 System.Reflection.RuntimeModule.GetTypes(RuntimeModule 模块) 在 System.Reflection.RuntimeModule.GetTypes() 在 System.Reflection.Assembly.GetTypes() 在 TechTalk.SpecFlow.Bindings.Discovery.RuntimeBindingRegistryBuilder.BuildBindingsFromAssembly(Assembly assembly) 在 TechTalk .SpecFlow.Infrastructure.TestExecutionEngine.Initialize(Assembly[] bindingAssemblies) 在 TechTalk.SpecFlow.TestRunner.InitializeTestRunner(Assembly[] bindingAssemblies) 在 TechTalk.SpecFlow.Infrastructure.TestRunnerFactory。

内部异常是 LoaderExceptions include {"Could not load file or assembly 'TechTalk.SpecFlow, Version=1.8.1.0, Culture=neutral, PublicKeyToken=0778194805d6db41' 或其依赖项之一。定位的程序集的清单定义与程序集引用不匹配.（HRESULT 异常：0x80131040）“：”TechTalk.SpecFlow，版本=1.8.1.0，文化=中性，PublicKeyToken=0778194805d6db41”}

我不知道为什么它仍然加载 1.8.1 SpecFlow 程序集。我已经卸载了 SpecFlow 1.8.1。我还有其他地方需要手动更改吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:09:41.567

WP7Test 包似乎依赖于 SpecFlow 1.8.1。据我在 github 项目上看到的，它还没有更新到 SpecFlow 1.9。

SpecRun.SpecFlow 1.1 需要 SpecFlow 1.9。（如果您安装过时的 SpecRun (1.0) 软件包，将使用此功能。）

我认为最好的办法是在 github 上分叉 WP7Test 项目并将其更新为使用 SpecFlow 1.9。完成此操作后，它也应该可以与最新的 SpecRun 一起正常工作。

（另一种方法是使用 SpecRun.SpecFlow 1.0 包，该包可与 SpecFlow 1.8.1 一起使用，并且也受 SpecFlow 1.9 IDE 集成的支持。）

# ivy - 常春藤和服务器访问错误

> ID：11965101
> 
> 赞同：1
> 
> 时间：2012-08-15T06:44:26.833
> 
> 标签：ivy

我们有一个可通过 HTTP 访问的 Ivy 存储库。它可以被多台机器毫无问题地访问，但在 Windows 机器上，我们会收到服务器访问错误。

```
[ivy:retrieve] Loading jar:file:/C:/Users/moserma/.ant/lib/ivy-2.3.0-rc1.jar!/org/apache/ivy/core/settings/ivy.properties
[ivy:retrieve] :: Apache Ivy 2.3.0-rc1 - 20120416000235 :: http://ant.apache.org/ivy/ ::
[ivy:retrieve] jakarta commons httpclient not found: using jdk url handling
[ivy:retrieve] :: loading settings :: file = D:\moserma\newWorkspace\Lakshmi\ivy\ivysettings.xml
[ivy:retrieve] no default ivy user dir defined: set to C:\Users\moserma\.ivy2
[ivy:retrieve] settings loaded (66ms)
[ivy:retrieve]  default cache: D:\moserma\newWorkspace\Lakshmi\ivy\ivy-cache
[ivy:retrieve]  default resolver: ETHZ-HTTP
[ivy:retrieve]  -- 1 resolvers:
[ivy:retrieve]  ETHZ-HTTP [url]
[ivy:retrieve] no resolved descriptor found: launching default resolve
Overriding previous definition of property "ivy.version"
[ivy:retrieve] using ivy parser to parse file:/D:/moserma/newWorkspace/Lakshmi/ivy.xml
[ivy:retrieve] :: resolving dependencies :: ch.ethz.wai#Lakshmi;1.0
[ivy:retrieve]  confs: [default]
[ivy:retrieve]  validate = true
[ivy:retrieve]  refresh = false
[ivy:retrieve] resolving dependencies for configuration 'default'
[ivy:retrieve] == resolving dependencies for ch.ethz.wai#Lakshmi;1.0 [default]
[ivy:retrieve] == resolving dependencies ch.ethz.wai#Lakshmi;1.0->checkstyle#checkstyle-all;5.5 [default->*]
[ivy:retrieve]          tried http://ivy.ethz.ch/checkstyle/checkstyle-all/5.5/ivy-5.5.xml
[ivy:retrieve] ERROR: Server access Error: Connection reset url=http://ivy.ethz.ch/checkstyle/checkstyle-all/5.5/ivy-5.5.xml
[ivy:retrieve]          tried http://ivy.ethz.ch/checkstyle/checkstyle-all/5.5/checkstyle-all-5.5.jar
[ivy:retrieve] ERROR: Server access Error: Connection reset url=http://ivy.ethz.ch/checkstyle/checkstyle-all/5.5/checkstyle-all-5.5.jar
[ivy:retrieve]  ETHZ-HTTP: no ivy file nor artifact found for checkstyle#checkstyle-all;5.5
[ivy:retrieve] WARN:    module not found: checkstyle#checkstyle-all;5.5
[ivy:retrieve] WARN: ==== ETHZ-HTTP: tried
[ivy:retrieve] WARN:   http://ivy.ethz.ch/checkstyle/checkstyle-all/5.5/ivy-5.5.xml
[ivy:retrieve] WARN:   -- artifact checkstyle#checkstyle-all;5.5!checkstyle-all.jar:
[ivy:retrieve] WARN:   http://ivy.ethz.ch/checkstyle/checkstyle-all/5.5/checkstyle-all-5.5.jar 
```

现在**没有**涉及防火墙或代理，并且可以使用其他工具（例如，浏览器、curl、wget ......）毫无问题地访问 URL。例如：

```
$ curl http://ivy.ethz.ch/checkstyle/checkstyle-all/5.5/ivy-5.5.xml
<ivy-module version="2.0">
    <info organisation="checkstyle" module="checkstyle-all" revision="5.5" status="integration" publication="20120806133612"/>
        <publications>
                <artifact name="checkstyle-all" type="jar" ext="jar"/>
        </publications>
</ivy-module> 
```

在服务器端，日志什么也没有显示：没有错误，甚至没有连接

**编辑** `ivysettings.xml`应该没问题，因为它们可以在 Mac OS X 和 Linux 上毫无问题地使用：

```
<ivysettings>
    <settings  defaultResolver = "ETHZ-HTTP" >
        <caches defaultCacheDir = "${ivy.settings.dir}/ivy-cache" />
    </settings>
    <resolvers>
        <url name="ETHZ-HTTP">
            <ivy      pattern="http://ivy.ethz.ch/[organisation]/[module]/[revision]/[artifact]-[revision].xml" />
            <artifact pattern="http://ivy.ethz.ch/[organisation]/[module]/[revision]/[artifact]-[revision].[ext]" />
        </url>
    </resolvers>
</ivysettings> 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T14:14:00.177

也许你的 Windows 机器上有一个防火墙阻止 Java 做任何网络？

试试这个简单的 ant build.xml 文件来测试它：

```
<project>
    <get src="http://ivy.ethz.ch/checkstyle/checkstyle-all/5.5/ivy-5.5.xml" dest="ivy-5.5.xml" />
</project> 
```

# c# - 如何在 SQL Server 中计算 ID 之前的行数

> ID：11965103
> 
> 赞同：1
> 
> 时间：2012-08-15T06:44:37.857
> 
> 标签：c#, asp.net, sql-server-2008, linq-to-sql

我需要在某个行 ID 之前计算表中的总行数。

我有这个查询

```
select count (ClientID) 
FROM [Seek].[dbo].[seekClient] 
where ClientID < '12' 
```

这适用于整数主键的情况，但我不知道如何在 GUID 的情况下做到这一点？

在这种情况下请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:49:42.873

简短的回答，这是不可能的，请参阅[此链接](http://www.ostyn.com/standards/docs/guids.htm)。最具体的：

> 全局唯一标识符通常不是人类可读的，并且它们不打算由人类阅读或解释

长答案 - 你的表结构的其余部分是什么？可能有一种不同的方式来做你想做的事情（我想如果你有一个创建日期的字段是可能的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T06:49:25.337

您应该使用不同的列（不是 id）来定义“之前”的含义。例如，它可能是“DateOfCreation”、“creation_date”等列。

# android - 将 LinerLayout 添加到另一个 LinearLayout 时不遵守上边距属性

> ID：11965111
> 
> 赞同：0
> 
> 时间：2012-08-15T06:45:27.637
> 
> 标签：android

我正在尝试添加这个孩子`LinearLayout`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginTop="50dp"
    android:background="#FFFFFF"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="50dp"
        android:layout_marginTop="10dp"
        android:text="Beautiful star-shaped spillway, Kechut Reservoir, Jermuk, Armenia"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

进入这个父母`LinearLayout`：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#F1F1F1" >

    <LinearLayout
        android:id="@+id/tiles"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:orientation="vertical" >
    </LinearLayout>

</ScrollView> 
```

我使用 动态添加它，`Inflater`因此我的 parent 中可以有多个项目`LinearLayout`。我想在孩子之间有间距，所以我添加了属性`android:layout_marginTop="50dp"`，但这个属性没有得到尊重。

我的孩子们出现了，他们之间没有任何间隔。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:50:50.460

`LinearLayout`除了将孩子嵌套在另一个内部`LinearLayout`并将`marginTop`属性添加到其中之外，我找不到另一种方法。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
         android:layout_marginTop="10dp"
         android:layout_height="wrap_content"
         android:layout_width="wrap_content"
        android:background="#FFFFFF"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/description"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="50dp"
            android:layout_marginTop="10dp"
            android:text=""
            android:textAppearance="?android:attr/textAppearanceSmall" />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:26:08.877

在这种情况下，使用填充可能会更好。我经历过，当您不限制布局填充的高度或宽度时，往往会产生更好的结果（有时）。

# python-2.7 - Python版本，“2.7.2+”，加号是什么意思？

> ID：11965112
> 
> 赞同：5
> 
> 时间：2012-08-15T06:45:38.503
> 
> 标签：python-2.7, virtualenv

我有一个前段时间安装的虚拟环境。当我激活它并运行 python 时，我被告知版本号是

```
Python 2.7.2+ (default, Oct  4 2011, 20:03:08) 
```

版本号后面的加号是什么意思？

这能否以某种方式解释为什么`os.urandom`没有定义该函数，即使（根据[文档](http://docs.python.org/library/os#os.urandom)）它自 2.4 版以来就已经存在。

```
>>> from os import urandom
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: cannot import name urandom 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T06:59:41.697

从[Python 常见问题解答](https://docs.python.org/3/faq/general.html#how-does-the-python-version-numbering-scheme-work)：

> 您还可以找到带有“+”后缀的版本号，例如“2.2+”。这些是未发布的版本，直接从 CPython 开发存储库构建。在实践中，在最终的次要版本发布后，版本会递增到下一个次要版本，即“a0”版本，例如“2.4a0”。

* * *

对于您的第二个问题，无法在 virtualenv 中导入 urandom 是一个已知问题。

[这个](https://stackoverflow.com/a/10366919/815632)对类似问题的回答应该会有所帮助。

# asp.net-mvc - 重定向和白页

> ID：11965120
> 
> 赞同：0
> 
> 时间：2012-08-15T06:46:35.297
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有以下js代码：

```
$.get('/desk/AddTicketToCart', { clientId: clientId}, function(data) {           
}); 
```

和控制器的动作：

```
public ActionResult AddTicketToCart(int clientId)
{
   // do work
   return new RedirectResult("/", true);    
} 
```

但是，我在地址栏中得到白页和 url 没有改变。我还尝试了以下方法：

```
return RedirectToAction("Index", "Home") 
```

但是，我也得到白页。
如何正确进行重定向？
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:57:11.690

由于您正在进行 ajax 调用，因此服务器中的重定向对您没有帮助。需要在回调的js中设置新的url。

```
$.get('/desk/AddTicketToCart', { clientId: clientId}, function(data) { 
   window.location = // the url          
}); 
```

# wpf - 为什么我的 UI 没有更新以反映我绑定的数据？

> ID：11965122
> 
> 赞同：0
> 
> 时间：2012-08-15T06:47:09.997
> 
> 标签：wpf, c#-4.0

我已经将一些按钮的可见性绑定到一个布尔值，但是当布尔值改变时，按钮的可见性不会改变。为什么会这样？

布尔值设置如下：

```
public static readonly DependencyProperty editModeToggle = DependencyProperty.Register("editMode", typeof(bool), typeof(Window));
public bool EditMode
{
    get { return(bool)GetValue(editModeToggle); }
    set { SetValue(editModeToggle, value); }
} 
```

我很确定绑定没有错。

[注意：我已经设置了一个可以工作的转换器并且绑定工作。当我从 true 更改为 false 时，可见性不会改变，反之亦然]

捆绑：

```
<Button Content="Test" Visibility="{Binding ElementName=mainWindow, Path=EditMode, Converter={StaticResource BooltoVisibilityConverter}/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:06:36.853

当绑定无法按预期工作时，您需要检查一些事项：

1.  bool 属性是否使用 INotifyPropertyChanged 通知更改？
2.  您是否使用转换器将布尔值转换为可见性？
3.  您在输出窗口中看到任何绑定错误吗？
4.  您是否尝试在 xaml 中的绑定或 bool 属性中的 setter 中设置断点？

正如您在评论中提到的，您尚未实现*INotifyPropertyChanged*接口。

实现接口的需要是每当 ViewModel 中的属性值发生变化时，都有一种方法可以让绑定知道这一点。因此，在实现*INotifyPropertyChanged*之后，对于每个属性，您都会引发带有属性名称的*PropertyChanged*事件。这样，绑定就知道属性的值已更改。

网上有很多文章。这是一个帮助您入门的方法：[INotifyPropertyChanged 和 WPF](http://japikse.blogspot.in/2009/07/inotifypropertychanged-and-wpf.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:29:44.163

在这种情况下，您不需要 decyclone 列表中的第 1 点，因为您使用的是依赖项属性。我认为如果你没有它，你应该在绑定中添加 Mode=TwoWay ，这将解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T07:38:31.693

依赖属性注册不正确 -

```
 public static readonly DependencyProperty editModeToggle = 
DependencyProperty.Register("editMode", typeof(bool), typeof(Window)); 
```

它应该是-

```
public static readonly DependencyProperty editModeToggle = 
    DependencyProperty.Register("EditMode", typeof(bool), typeof(Window)); 
```

注意属性的拼写 -`'E'`应该是大写，因为它区分大小写，而您的属性名称`EditMode`不是`editMode`。

# jquery-ui - jQuery Mobile 弹出窗口和对话框

> ID：11965123
> 
> 赞同：9
> 
> 时间：2012-08-15T06:47:30.447
> 
> 标签：jquery-ui, jquery-mobile, popup

jQuery mobile 1.2 alpha 引入了 Popups，而它已经有一个类似的小部件，称为 Dialogs。它们在性质上看起来非常相似。

弹出窗口和对话框之间的技术差异是什么？

弹出窗口可以做什么（任何实际用例作为首选示例）对话框是不可能的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T07:30:09.827

他们是完全不同的野兽。以下是我基于我有限的经验的看法。

**[对话](http://jquerymobile.com/test/docs/pages/page-dialogs.html)**

*   对话接管页面，它们包含全屏深色背景，以使“对话”看起来已经取代了页面。

*   `data-rel="dialog"`通过将属性添加到页面锚链接，可以将任何页面呈现为对话框。

*   与页面一样，您可以通过将`data-transition`属性添加到链接来在对话框中指定所需的任何页面转换。

*   可以上链。

**[弹出窗口](http://jquerymobile.com/test/docs/pages/popup/index.html)**

*   在当前页面中显示，可能更类似于通常称为模式或灯箱的功能。

*   不能上链。

弹出窗口可能更适合警报、工具提示、小的是/否确定/取消消息、将缩略图弹出到更大的图像、小的 ajax 表单（时事通讯、登录、发表评论）等。当您不想这样做时很有用信息超载页面，并且只想在用户需要或请求时向他们显示某些功能。

另一方面，对话可用于需要传达大量信息（条款和条件接受屏幕等）的情况，或者当您确实想要强调警报、菜单、用户的选择等时。对话有点破坏页面的流动，所以应该更谨慎地使用。

弹出窗口的一个巧妙功能是它们可以用作覆盖面板，可以用来创建从屏幕一侧滑入的菜单，与 Facebook 的 iphone 应用程序中的菜单不太相似。

归根结底，任何一种都可以使用，也没有对错，很大程度上取决于个人喜好，以及您希望应用程序如何运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T07:55:03.057

一个重要的区别是弹出窗口与元素出现在同一页面中，而对话是完全不同的页面并且背景是空白的。

# asp.net - 单击按钮后视图应显示在同一页面上

> ID：11965125
> 
> 赞同：0
> 
> 时间：2012-08-15T06:47:39.883
> 
> 标签：asp.net, ajax, asp.net-mvc-partialview

单击此按钮后，我使用它来显示视图，但不显示部分视图。

看法：

```
<%=Ajax.ActionLink("See List", "List of Cakes", new AjaxOptions { UpdateTargetId = "theList" })%>
<div id="theList"></div> 
```

我添加了不显眼的脚本，在 web.config 中确认了它，缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:12:34.543

从一位同事那里得知，我不需要从 web.config 中检查某些内容，因为 IDE 会自动添加/删除添加的脚本。

以下是添加的脚本：

```
<script src="../../Scripts/MicrosoftAjax.js" type="text/javascript"></script>
<script src="../../Scripts/MicrosoftMvcAjax.js" type="text/javascript"></script> 
```

# erlang - 为什么变量可以在 List Comprehensions 中可变？

> ID：11965127
> 
> 赞同：0
> 
> 时间：2012-08-15T06:48:06.667
> 
> 标签：erlang

正如我们所知，变量在 erlang 中不能是变量。但是考虑这段代码，为什么 [1,2,3,4] 的每个值都按顺序与 N 模式匹配，并且不抛出异常？

```
1> [2*N || N <- [1,2,3,4]].
[2,4,6,8] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T06:55:22.330

说变量不能是变量并不完全正确。更重要的是，一个变量只能分配一次。所以下面的伪代码是非法的：

```
N = 4;
foo(N);
N = N + 1;
foo(N); 
```

但是，以下是合法的：

```
fact(0) -> 1,
fact(N) -> N * fact(N-1). 
```

当我们调用 fact(4) 时，对于每个不同的函数调用，N 将取值 4，然后是 3，然后是 2，然后是 1。您在上面显示的代码是相似的。对于列表 N 中的每个项目，N 具有不同的值。但是您从未多次分配 N 的值。

# java - Java中名称的正则表达式不起作用

> ID：11965128
> 
> 赞同：-5
> 
> 时间：2012-08-15T06:48:22.263
> 
> 标签：java, regex

我需要帮助在 Java 中为以下名称编写正则表达式：

```
name
name`s
name name
name-name
name`s name
name`s-name 
```

我尝试编写以下正则表达式，但它不起作用:(

```
String  nameRegex = "[A-Za-z]+(-|,|\\s)?[A-Za-z]*"; 
```

我写了以下函数

```
 public static boolean validateName(String val) {
    logger.info("in validate number");
    String  numberRegex = "^[A-Za-z]+(-\\s)?[A-Za-z]+$";

    if (val.matches(numberRegex)) {
        logger.info("in validate name of method validate");
        return true;
    } else {
        logger.info("in else  of method validate");
        return false;
    }
} 
```

它的验证是：

1.  名称假 *它应该是真的*
2.  123 真的 *应该是假的*
3.  abc022 true *它应该是 false*
4.  abc dsf 真
5.  abc-dsf 真
6.  abc'-dsf true *它应该是 false*

我给定的模式不满意。

如果我使用这个`"^\p{L}+(?:[-,\s`]\p{L}+)*$"`没有空格的模式结束名称，它会返回 false。它也接受带有数字的名称。例如 abc123

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:30:56.267

1.  您的替代列表中缺少“`”。

2.  如果您的交替中只有单个字符，请使用字符类。

3.  您应该使完整的最后一部分匹配 0 次或更多次。

4.  `[a-zA-Z]`匹配名称是一个非常糟糕的选择。那些名字中包含非 ASCII 字符的穷人是怎么回事？**改用`\p{L}`**. **_**

所以你的正则表达式可能看起来像

```
^\\p{L}+(?:[-,\\s`]\\p{L}+)*$ 
```

`\p{L}`是一个[Unicode 代码属性](http://www.regular-expressions.info/unicode.html#prop)，它匹配具有属性 "letter" ==> 的单个 Unicode 代码点，**它匹配来自任何语言的任何类型的字母**。

我也使用了锚点`^`，`$`在我的解决方案中，它在 Java 中取决于你使用的方法，如果你需要它们。请显示代码，您如何调用正则表达式。

# c# - 创建 Excel 工作表时出现 NullReferenceException

> ID：11965131
> 
> 赞同：8
> 
> 时间：2012-08-15T06:48:28.450
> 
> 标签：c#, asp.net, visual-studio-2010, nullreferenceexception, excelpackage

我想填写一个 excel 文件，所以我使用 ExcelPackage: Office Open XML Format 。但我有一个错误。我的代码：

```
string fileName = "DBE_BAKIM_FORMU" + ".xlsx";
FileInfo fi = new FileInfo(HttpContext.Current.Server.MapPath("~/") + fileName);

using (ExcelPackage xlPackage = new ExcelPackage(fi))
{
    ExcelWorksheet worksheet = xlPackage.Workbook.Worksheets[1];
    dbeDataContext db = new dbeDataContext();
    CAGRI c = (from x in db.CAGRIs where x.CagriID == ID select x).SingleOrDefault();
    USER u = (from x in db.USERs where x.UserID == Convert.ToInt32(Session["user"]) select x).SingleOrDefault();

    worksheet.Cell(6, 3).Value = c.TalepTarihi.ToShortDateString();
    worksheet.Cell(7, 3).Value = c.TalepTuru;
    worksheet.Cell(8, 3).Value = c.ModulAdi;
    worksheet.Cell(9, 3).Value = c.EkranRaporAdi;
    worksheet.Cell(10, 3).Value = c.VerilenSure;
    worksheet.Cell(11, 4).Value = c.USER.UserName + " " + c.USER.UserSurname;
    worksheet.Cell(12, 4).Value = Convert.ToString(c.USER.UserTel);
    worksheet.Cell(13, 3).Value = c.Aciklama;
    worksheet.Cell(16, 4).Value = u.UserName + " " + u.UserSurname;
    worksheet.Cell(18, 3).Value = Convert.ToString(c.DegerlendirmeTarih);
    worksheet.Cell(19, 3).Value = c.Degerlendirme;
    xlPackage.Save();
} 
```

我在这里有这个错误：`xlPackage.Save();`

我的错误说`Object reference not set to an instance of an object.`

当我取出时`xlPackage.Save();`，它可以工作并填写 excel 文件，但不保存。为什么我会犯这个错误？

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-27T20:31:24.370

将 ExcelWorksheet.cs 的第 562 行更改为：

```
XmlNode pageSetup = _worksheetXml.SelectSingleNode("//d:pageSetup", NameSpaceManager); 
```

至：

```
XmlNode pageSetup = WorksheetXml.SelectSingleNode("//d:pageSetup", NameSpaceManager); 
```

如果尚未访问工作表，则调用公共访问器 WorksheetXml 而不是私有类变量会正确初始化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T06:27:34.423

我建议查看 Microsoft.Office.Interop.Excel 参考。我希望有更多的智能感知，但这很容易弄清楚。

我将我的使用设置为：

```
using Excel = Microsoft.Office.Interop.Excel; 
```

我猜你会希望应用程序不可见：

```
Excel.Application application = new Excel.Application();
application.Visible = false; 
```

我没有使用过 HttpContext，但如果它是路径，那么我建议使用 Path 类：

```
string filename = "DBE_BAKIM_FORMU.xlsx";
Excel.Workbook book = application.Workbooks.Open(Path.Combine(HttpContext.Current.Server.MapPath("~/"), filename)); 
```

代码应该是类似的，这里是如何抓取一张表并填充单元格：

```
Excel.Worksheet sheet = book.Worksheets[1];
sheet.Cells[6, 3].Value2 = "Something"; 
```

保存和关闭：

```
book.Save();
book.Close(); 
```

Microsoft.Office.Interop.Excel 参考包含在 Visual Studio 2012 和 2010 中（如果您仍在使用该版本）。具有可执行文件的机器上需要 Excel。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T08:00:25.327

捕获由 xlPackage.Save() 方法引发的空引用异常，并转储堆栈跟踪，问题似乎是由 ExcelWorksheet.cs:line 561 引起的，它对应于源代码中的这一行：

```
XmlNode pageSetup = _worksheetXml.SelectSingleNode("//d:pageSetup", NameSpaceManager); 
```

有趣的是，如果你捕捉到异常，xlsx 文件似乎仍然可以保存（至少对我来说确实如此，可能会有一些意想不到的行为，但我无法产生任何行为）。

我会尝试处理异常并查看您的文件是否实际保存。如果这是一个你会经常使用的库，那么在 ExcelPackage 网站上提出一个问题可能是值得的（我不这样做）

编辑：

似乎 ExcelPackage 库很旧并且没有维护。我会看一下基于 ExcelPackage 的 EPPlus 库。您需要调整一些代码，但没什么大不了的。保存作品没有问题。

[http://epplus.codeplex.com/](http://epplus.codeplex.com/)

# grails - 将 namedQueries 与 multi-tenant-single-db 插件一起使用

> ID：11965133
> 
> 赞同：0
> 
> 时间：2012-08-15T06:48:39.703
> 
> 标签：grails, grails-plugin

我有一个域类让我们说

```
class ListItem {
  Long tenantId
} 
```

我想创建一个这样的命名查询

```
active {
   Long currentTenantId = ?????????;
   or {             
      isNull('tenantId')
      eq ('tenantId', currentTenantId);
  }
} 
```

换句话说，我希望有 ListItem 记录每个人都可以访问的内容，而 listItem 记录只有租户可以访问。

浏览插件的源代码，我看不到如何在不添加服务引用的情况下找到当前租户。

这可能吗？

编辑：目的是 currentTentantId 不作为参数传递。也许我太理想化了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:28:48.633

像这样？

```
active { Long currentTenantId ->
   or {             
      isNull 'tenantId'
      eq 'tenantId', currentTenantId
  }
} 
```

# javascript - jQuery 选择器中的简单 jQuery 语法和连接

> ID：11965134
> 
> 赞同：1
> 
> 时间：2012-08-15T06:48:40.197
> 
> 标签：javascript, jquery

快速提问，这个代码可能吗？

```
function respond (primary_id) {
var answer = $('id_of_' + primary_id).val();    
} 
```

我已经对其进行了测试，但产生的错误并不直接指向这行代码，而是另一个使用这个变量答案的错误，所以我无法确定这是导致问题还是其他原因。如果这行不通，那么还有什么替代方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T06:51:07.333

```
$('id_of_' + primary_id) 
```

将指向所有元素：

```
<id_of_xxx> 
```

在我见过的任何版本的 HTML 中都不存在...

如果您正在寻找具有该 ID 的元素，

```
$('#id_of_' + primary_id) 
```

将是要走的路。

另外，不要忘记返回值：

```
function respond (primary_id) {
     var answer = $('id_of_' + primary_id).val();    
     return answer;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T07:01:03.553

[您可以在http://api.jquery.com/id-selector/](http://api.jquery.com/id-selector/)上轻松找到它

在这里，您应该像这样在元素 ID 之前使用“#”。

```
function respond (primary_id) {
      var answer = $('#id_of_' + primary_id).val();    
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T06:53:09.237

好吧，如果您要根据 id 选择元素，则它应该在前面加上 # 所以您的代码应该是

```
var answer = $('#id_of_' + primary_id).val(); 
```

# mysql - 联接，一个表的所有行和另一个表的第一行

> ID：11965137
> 
> 赞同：1
> 
> 时间：2012-08-15T06:48:55.210
> 
> 标签：mysql

我有两个表属性和 property_images

```
where properties.pid = property_images.pid 
```

一个属性可以有多个图像，我必须选择所有属性和第一个属性图像

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:53:25.980

```
select 
    t1.* ,
    t2.image
from properties as t1 
left join (
           select 
               min(id), 
               pid, 
               image 
           from property_images  
           group by pid) as t2 
on t2.pid = t1.pid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T06:55:46.493

```
select * from property a 
left join ( select * from property_Images b group by pid) s on s.pid=a.pid ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T07:21:20.340

```
select 
    pro.* 
from properties as pro 
left join (
           select 
               min(id),
               pid,
               image 
           from property_images  
           group by pid) as pro_img 
on pro.pid = pro_img.pid 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T11:05:23.837

```
select *  
from properties as t1 
left join property_images t2 on (t1.pid=t2.pid) 
where t2.id in
           (select min(id) from property_images where property_images.pid=t2.pid) 
```

**或者**假设 property_images 中有一个唯一的键 ID：

```
select *  
from properties as t1 
left join (select min(id) minID, pid from property_images group by pid) t2
   on (t1.pid=t2.pid)  
left join property_images t3 on (t2.minID=t3.id) 
```

选择哪一个在您的数据库上更快。

# c++ - 大 N 的字符串容器

> ID：11965139
> 
> 赞同：0
> 
> 时间：2012-08-15T06:49:02.917
> 
> 标签：c++, c, algorithm, data-structures, data-mining

我正在寻找适合大量字符串 (> 10^9) 的字符串容器。字符串具有可变长度。它必须是快速的插入和查找，并且具有节俭的内存使用。填充容器时，字符串是无序的。平均字符串长度约为 10 个字节。对确切的字符串值进行查找。可擦除性 - 可选。N 事先是未知的。对于 64 位架构。用例 - 考虑 AWK 的关联数组。

`map<string>`每个字符串大约有 20-40 位开销，每次插入调用一个 malloc（或两个）。所以它不快也不节俭。

有人可以给我指点 C/C++ 库、数据结构或论文吗？

Relavant——[哈希表库的比较](http://attractivechaos.wordpress.com/2008/08/28/comparison-of-hash-table-libraries/)

**编辑** 我已经删除了“大数据”，将 N 提高到更大的值，明确了要求。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T06:51:49.430

没有灵丹妙药，但[基数树](http://en.wikipedia.org/wiki/Radix_tree)具有[trie](http://en.wikipedia.org/wiki/Trie)的优点（快速查找和插入，至少渐近） - 具有更好的空间消耗。

但是 - 两者都被认为不是“缓存效率” - 这可能很重要，特别是如果在某些时候需要对数据进行迭代。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T09:00:40.227

对于您的问题，64 位机器上的指针几乎与您的数据长度匹配。因此，在您的问题中使用每个字符串的多个指针（平均长度小于 10 个字节）将使数据结构的大小支配您的输入大小。

处理该问题的一种通用方法是不使用指针来表示您的字符串。使用 32 位偏移量到存储所有字符串的大页面中的专门表示将使您的指针内存需求减半，但代价是需要对指针进行添加以检索您的字符串。

**编辑：**下面是这种表示的示例（未经测试）实现（`struct`为了简单起见，实际实现当然只会公开用户界面）。该表示假设一个哈希表插入，因此为`next_`. 请注意，偏移量按大小缩放，`hash_node`以允许以 32 位偏移量表示。

```
struct hash_node {
    uint32_t next_;
    char * str () { return (const char *)(&next+1); }
    const char * str () const { return (const char *)(&next+1); }
};

struct hash_node_store {
    std::vector<hash_node> page_; /* holds the allocated memory for nodes */
    uint32_t free_;

    hash_node * ptr (uint32_t offset) {
        if (offset == 0) return 0;
        return &page_[offset-1];
    }

    uint32_t allocate (const char *str) {
        hash_node *hn = ptr(free_);
        uint32_t len = strlen(str) + 1;
        uint32_t node_size =
            1 + (len / sizeof(hash_node)) + !!(len % sizeof(hash_node));
        strcpy(hn->str(), str);
        free_ += node_size;
        return 1 + (hn - &page_[0]);
    }
}; 
```

哈希表将包含一个节点存储和一个哈希桶向量。

```
struct hash_table {
    hash_node_store store_;
    std::vector<uint32_t> table_; /* holds allocated memory for buckets */

    uint32_t hash_func (const char *s) { /* ... */ }

    uint32_t find_at (uint32_t node_offset, const char *str);
    bool insert_at (uint32_t &node_offset, const char *str);

    bool insert (const char *str) {
        uint32_t bucket = hash_func(s) % table_.size();
        return insert_at(table_[bucket], str);
    }

    bool find (const char *str) {
        uint32_t bucket = hash_func(s) % table_.size();
        return find_at(table_[bucket], str);
    }
}; 
```

Where`find_at`和`insert_at`只是以预期方式实现的简单功能。

```
uint32_t hash_table::find_at (uint32_t node_offset, const char *str) {
    hash_node *hn = store_.ptr(node_offset);
    while (hn) {
        if (strcmp(hn->str(), str) == 0) break;
        node_offset = hn->next_;
        hn = store_.ptr(node_offset);
    }
    return node_offset;
}

bool hash_table::insert_at (uint32_t &node_offset, const char *str) {
    if (! find_at(node_offset, str)) {
        uint32_t new_node = store_.allocate(str);
        store_.ptr(new_node)->next_ = node_offset;
        node_offset = new_node;
        return true;
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T16:27:24.627

（低）误报率是否可以接受？如果是这样，那么[布隆过滤器](http://en.wikipedia.org/wiki/Bloom_filter)将是一种选择。如果您对百万分之一或 2^(-20) 的误报率感到满意，您会希望使用大约是您期望的字符串数量的 30 倍或 3* 的缓冲区大小10^10 位。那小于4GB。您还需要大约 20 个独立的哈希函数。

如果你不能接受误报，你应该考虑在你构建的任何其他解决方案之前放置一个 Bloom 过滤器，以快速清除大多数否定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T10:45:50.537

由于您只插入值，因此字符串数据本身可以在插入时连接 - 每个都带有分隔符，例如 NUL。该单个缓冲区中的字符偏移量唯一地标识了该字符串。这意味着共享公共子字符串的字符串集将分别完全冗余地单独指定，但要反驳的是，不会花费任何精力来尝试查找或编码此类因式分解：对于高度不相关的字符串值（例如随机文本），这可能会适得其反。

要查找字符串，可以使用哈希表。鉴于您的目标是避免频繁的动态内存分配，为了有效地处理冲突，您需要使用置换列表：这个想法是，在将散列到已使用的存储桶的字符串插入时，您添加一个偏移量（必要时环绕表) 并尝试另一个存储桶，继续直到找到一个空存储桶。这意味着您需要一个位移列表来尝试：您可以手动编写一个有限列表来帮助您开始，甚至可能在“大位移”列表上嵌套循环，该列表的值被添加到来自“小位移”的列表中" 列表，直到找到一个空桶，例如，两个 10 个位移的手动编码列表产生 100 个组合。（可以使用替代散列算法代替置换列表或与置换列表结合使用。

所以，空间要求是：

```
total_bytes_of_string_data + N delimiters + total_buckets * sizeof(string_offset) 
```

其中 sizeof(string_offset) 可能需要 8 个字节，因为 10^9 * 10 已经超过 2^32。

对于约 10 个字符的 10^9 个字符串和 1.2*10^9 个桶，这大约是 10^9 * (10+1) + 1.2*10^9 * 8 字节 = 20.6^10^9 字节或 19.1 GB。

值得注意的是，64 位虚拟地址空间意味着您可以安全地为连接的字符串数据和哈希表分配比实际需要更多的空间，并且只有那些实际访问的页面才需要虚拟内存（最初是物理内存，但以后可能通过正常的虚拟内存机制交换到磁盘）。

讨论

如果没有关于所使用的字符串数据或字符集中重复的假设/见解，就无法保证减少字符串内存使用量。

如果所有插入之后都进行大量搜索，那么对字符串数据进行排序并使用二进制搜索将是一个理想的解决方案。但是，对于穿插搜索的快速插入，上述方法是合理的。

您也可以有一个基于平衡二叉树的索引，但是为了避免每次插入的内存分配，您需要将大量节点分组到一个内存页面中，并在较小的粒度级别上手动管理其排序和拆分：痛苦实施。可能已经有一个图书馆在做，但我还没有听说过。

您已经添加了“AWK 中的关联数组”作为可用于此用途的示例。您可以简单地将每个映射到的值直接嵌入到连接数据中的字符串键之后。

# c# - 使用 getter setter 时的 double 值

> ID：11965141
> 
> 赞同：-1
> 
> 时间：2012-08-15T06:49:18.957
> 
> 标签：c#, getter-setter

让我们假设我有一个短定义的 getter setter 字段，如下所示：

```
public double MyDouble { get; set; } 
```

我想检查这个 MyDouble 值是否已设置。我不能这样检查：

```
if(MyDouble == null) .... else .... 
```

因为双变量不能得到空值。那么我如何检查这个值是否已设置？我是否必须使用第二个保持 isSet 状态的变量，或者 double 类型是否有任何默认值？
谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T06:52:15.353

*System.Double*是一个*结构*（*值类型*）。

它不能为*null*。

您需要使其可以为*空*：

```
double? MyDouble { get; set; } 
```

更多关于可空类型：[可空类型（C# 编程指南）](http://msdn.microsoft.com/en-us/library/1t3y8s4s.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T06:53:55.897

我建议您使用可空值类型。可以为 null 的值类型可以设置为 null，因此您可以检查 double 是否具有 null 值：

```
double? myVal = null;
if(myVal==null)
   Console.WriteLine("NULL DOUBLE ENCOUNTERED !"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T06:57:19.967

double 的默认值为 0，但您可能希望在稍后阶段将此值设置为 0，因此检查 0 似乎不好。您可以做的是将其构造函数中的值设置为 -

```
MyDouble = Double.MinValue; 
```

并检查你的二传手

```
if(MyDouble == Double.MinValue) .... else .... 
```

`Double.MinValue is -1.7976931348623157E+308`你不太可能在课堂上进行设置。

# python - python，mac - 在“command v”中存储一个字符串

> ID：11965146
> 
> 赞同：1
> 
> 时间：2012-08-15T06:49:52.433
> 
> 标签：python, macos

我在 python 中有一个非常简单的脚本，可以生成一个句子。
为简单起见，假设我有：

```
var = "hello world" 
```

我希望能够`cmd``V`在运行脚本后直接粘贴（）字符串。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T06:55:03.267

您可以使用 AppKit 中的 NSPasteboard

```
def sendToClipBoard(string):
    from AppKit import NSPasteboard,NSObject,NSStringPboardType
    pasteboard = NSPasteboard.generalPasteboard()
    emptyOwner = NSObject.alloc().init()
    pasteboard.declareTypes_owner_([NSStringPboardType], emptyOwner)
    pasteboard.setString_forType_(string, NSStringPboardType) 
```

从[Notestoself复制的代码](http://lnotestoself.blogspot.be/2010/04/send-text-to-mac-clipboard-from-python.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T06:51:34.713

`pbcopy`您可以从脚本中调用该命令。例如：

```
from subprocess import call
var = "Hello world!"
cmd = 'echo "%s" | pbcopy' % var
call([cmd], shell=True) 
```

# actionscript-3 - hitTestObject(Actionscript)后如何获取命中区域

> ID：11965152
> 
> 赞同：0
> 
> 时间：2012-08-15T06:50:28.043
> 
> 标签：actionscript-3, flash, actionscript

例如，如果两个对象（一个 - 圆形，第二个 - 正方形）被击中，我怎样才能获得以像素为单位的击中区域，然后将该区域绘制为其他颜色？

ps：我发现了类似 object.hitArea 的东西——但是在这种情况下如何使用它呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:45:22.790

hitArea 属性用于定义精灵的可点击区域，而不是在命中测试中重叠的区域。

要获得重叠区域，您需要获取每个对象相对于其共同父对象的边界，然后使用交集函数。使用舞台可能是最简单的，因为它是所有显示对象的父级，并且可以轻松使用 localToGlobal 和 globalToLocal 函数。

这里有一些示例代码可以帮助您入门。假设 sprite1 和 sprite2 是重叠的，并且您想将重叠的矩形绘制到 sprite1 中：

```
var bounds1:Rectangle = sprite1.getBounds(stage);
var bounds2:Rectangle = sprite2.getBounds(stage);

var overlapping:Rectangle = bounds1.intersection(bounds2);
var localPoint:Point = sprite1.globalToLocal(new Point(overlapping.x, overlapping.y));

overlapping.x = localPoint.x;
overlapping.y = localPoint.y;

var shape:Shape = new Shape();
shape.graphics.beginFill(0xff0000);
shape.graphics.drawRect(overlapping.x, overlapping.y, overlapping.width, overlapping.height);
shape.graphics.endFill();
sprite1.addChild(shape); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T07:18:11.017

hittest 是检测对象的常用方法。下面的代码示例是在 hittest 与否时更改 alpha 值。如果你想改变对象的颜色。您在矩阵 colorTransform 中设置了属性。但是，一般来说，在 FlashGames 中`Pixel Perfect Collision Detection`而不是`hitTestObject`使用。因为它更准确。更多关于PPCD的信息是谷歌吧。

这是代码：[HitTest_Object](http://www.datafilehost.com/download-b1fb31fb.html)

```
sun_mc.startDrag( true );

stage.addEventListener( Event.ENTER_FRAME, onEnter );

function  onEnter( e: Event ): void
{
    if( sun_mc.hitTestObject( snowman_mc ) == true )
    {
        snowman_mc.alpha = 0.5;
    }
    else
    {
        snowman_mc.alpha = 1;
    } 
} 
```

# eclipselink - EclipseLink MOXy @XmlPath 支持具有不同值的元素，例如

> ID：11965153
> 
> 赞同：1
> 
> 时间：2012-08-15T06:50:38.303
> 
> 标签：eclipselink, moxy

有人可以帮我生成`<Pty ID="ID1" Src="6" R="1">`标签吗

EclipseLink MOXy`@XmlPath`在单个注释中。

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:08:47.647

我不确定我是否满足您的要求，但这是我认为您正在尝试做的事情的答案。

**适配器**

您可以编写一个`XmlAdapter`将单个 id 值转换为具有多个属性的对象。这些其他属性将设置为默认值。

```
package forum11965153;

import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.adapters.XmlAdapter;

public class IdAdapter extends XmlAdapter<IdAdapter.AdaptedId, String> {

    public static class AdaptedId {
        @XmlAttribute(name="ID") public String id;
        @XmlAttribute(name="Src") public String src = "6";
        @XmlAttribute(name="R") public String r = "1";
    }

    @Override
    public AdaptedId marshal(String string) throws Exception {
        AdaptedId adaptedId = new AdaptedId();
        adaptedId.id = string;
        return adaptedId;
    }

    @Override
    public String unmarshal(AdaptedId adaptedId) throws Exception {
        return adaptedId.id;
    }
} 
```

**私人有限公司**

注解`@XmlJavaTypeAdapter`用于指定. `XmlAdapter`要将值折叠到根元素中，`@XmlPath(".")`请使用 MOXy 的注释（请参阅：[http](http://blog.bdoughan.com/2010/07/xpath-based-mapping.html) ://blog.bdoughan.com/2010/07/xpath-based-mapping.html ）。

```
package forum11965153;

import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlRootElement(name="Pty")
@XmlAccessorType(XmlAccessType.FIELD)
public class Pty {

    @XmlJavaTypeAdapter(IdAdapter.class)
    @XmlPath(".")
    String id;

} 
```

**jaxb.properties**

如您所知，要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅： [http](http://blog.bdoughan.com/search/label/jaxb.properties) ://blog.bdoughan.com/search/label/jaxb.properties )

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

以下演示代码可用于证明一切正常：

```
package forum11965153;

import java.io.StringReader;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Pty.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        StringReader xml = new StringReader("<Pty ID='ID1' Src='6' R='1'/>");
        Pty pty = (Pty) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.marshal(pty, System.out);
    }

} 
```

**输出**

下面是运行演示代码的输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<Pty ID="ID1" Src="6" R="1"/> 
```

# android - Android - 避免在设备旋转后关闭对话框的最佳方法

> ID：11965154
> 
> 赞同：5
> 
> 时间：2012-08-15T06:50:38.097
> 
> 标签：android, android-activity, dialog, rotation

在这个论坛上进行了长时间的搜索后，我找到了很多答案，人们建议使用解决方案来避免对话在轮换后关闭，就像：

```
android:configChanges="keyboardHidden|orientation" 
```

或者覆盖以下方法，这似乎是最推荐的：

```
protected Dialog onCreateDialog(int id) 
```

但是，在查看 Android 参考文档后，我注意到这些 Dialog 方法已被弃用。

所以，显而易见的问题是：

*今天，在设备旋转后避免对话框关闭的最佳方法是什么？*

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T06:53:18.147

您现在应该使用来自新 Fragments API 的[DialogFragment 。](http://developer.android.com/reference/android/app/DialogFragment.html)要在低于 3.0 的平台上使用它，请使用[兼容性包](http://developer.android.com/tools/extras/support-library.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T08:14:39.523

我要回答的是仅基于对话框（而不是完全不同的游戏的对话框片段）。

对话框是活动的一部分，因此，它们在轮换期间被销毁。您过去对对话框的引用现在将指向一个不再出现在屏幕上的对话框，并且可能会给您带来问题。

不幸的是，没有简单的解决方案。`android:configChanges="keyboardHidden|orientation"`你会为自己制造一系列其他问题。

这样做的方法是保存对话框的任何配置，将其关闭，并且每当重新创建活动时，重新创建对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T07:01:57.747

试试这个....

```
onOrientationChanged(int x)
{
 dialogobject.dismissDialog();
} 
```

# jsf - ui:include 不能包含具有不同服务器上下文的页面

> ID：11965157
> 
> 赞同：2
> 
> 时间：2012-08-15T06:50:47.707
> 
> 标签：jsf, include

在我的 tomcat 中，我定义了两个上下文。

一个是我的应用程序 URL，即

`http://localhost:8080/mysite/faces/abc.xhtml`

另一个用于放置我所有可能被其他应用程序使用的静态文件。

`http://localhost:8080/files/myfile.html`

例如，在我的应用程序 .xhtml 文件中，我想包含来自其他上下文的页面

`<ui:include src="/files/myfile.html">`

但我总是出错

`javax.faces.view.facelets.TagAttributeException:.....Invalid path : /files/myfile.html`

看起来 ui:include 不适合在这里使用，因为它只查找与上下文相关的路径。那我应该用什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T10:50:38.393

有几种选择：

1.  改为使用`<iframe>`。

2.  将共享文件重构为一个单独的 Web 片段项目，该项目最终应为`/WEB-INF/lib`两个 Web 应用程序的 JAR。将 Facelets 资源放在`/META-INF/resources`单独的 Web 片段项目的文件夹中。它将以`<ui:include>`通常的方式提供：[使用共享代码的多个 JSF 项目的结构](https://stackoverflow.com/questions/8320486/structure-for-multiple-jsf-projects-with-shared-code)。

3.  在 JSF 1.x 上，使用自定义`com.sun.facelets.impl.DefaultResourceResolver`：[如何将 Facelets 组合与来自另一个上下文的文件一起使用](https://stackoverflow.com/questions/5587808/how-to-use-facelets-composition-with-files-from-another-context)。

4.  在 JSF 2.x 上，使用自定义`javax.faces.view.facelets.ResourceResolver`：[如何在多个战争之间共享 jsf 错误页面](https://stackoverflow.com/questions/5379995/how-to-share-a-jsf-error-page-between-multiple-wars)。

5.  在 JSF 2.2+ 上，使用自定义`javax.faces.application.ResourceHandler`：[从外部文件系统或数据库获取 Facelets 模板/文件](https://stackoverflow.com/questions/13292272/obtaining-facelets-templates-files-from-an-external-filesystem-or-database)。

# nunit - 如何通过 nunit2report 每次创建具有不同名称的报告？

> ID：11965160
> 
> 赞同：1
> 
> 时间：2012-08-15T06:51:20.163
> 
> 标签：nunit, report, nant

我使用 nunit2report 的 Nant 生成 Nunit 报告。

并且每天构建它都会替换旧的。

如何生成不同的报告，例如：

```
TestReport_0815.html
TestReport_0816.html
.... 
```

这是我的构建文件：

```
<?xml version="1.0"?>
<project name="dotNet_Login" default="build" basedir=".">
  <property name="nant.settings.currentframework" value="net-4.0"/>

  <target name="build">
    <solution configuration="debug" solutionfile="Test_Login\Test_Login.sln" />
  </target>

  <target name="run" depends="build">
    <exec program="Nunit\NUnit-2.6.0.12051\bin\nunit-console.exe">
       <arg value="dotNet_Login\dotNet_Login\bin\debug\dotNet_Login.dll" />
    </exec>

    <nunit2report out="NUnitReport.html">
      <fileset>
        <includes name="TestResult.xml" />
      </fileset>
    </nunit2report>

    <echo message="NUnit report generated."/>
  </target>

</project> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T07:05:23.227

你可以尝试这样的事情：

```
<tstamp property="revision" pattern="yyMMdd" />

<nunit2report out="TestReport_${revision}.html">
   ...
</nunit2report> 
```

这将导致文件名如下：

```
TestReport_120815.html
TestReport_120816.html
TestReport_120817.html
... 
```

您可以使用[`<tstamp/>`](http://nant.sourceforge.net/release/latest/help/tasks/tstamp.html)任务来获取您想要的输出文件名。

# digg - Digg 紧凑型按钮

> ID：11965161
> 
> 赞同：-1
> 
> 时间：2012-08-15T06:51:22.217
> 
> 标签：digg

是否有人对 digg 社交书签按钮也有问题？我用的是紧凑型的。它不显示标签和 digg 计数。它只显示不是我想要的图标。有没有人也遇到过这种情况？我使用了来自不同站点的不同代码，但它仍然显示相同的内容

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-21T13:57:39.903

他们将在未来几周内进行重大重新启动。但是，该 API 目前似乎无法正常工作。

# iphone - 使用 UITapGestureRecognizer 计算点击次数

> ID：11965163
> 
> 赞同：0
> 
> 时间：2012-08-15T06:51:39.113
> 
> 标签：iphone, ios, uibutton, uitapgesturerecognizer

我有一个增加数量的按钮，当我点击它时，我会拨打服务电话。问题是，如果我多次点击它，我只想在完成点击后拨打服务电话。我尝试使用 UITapGestureRecognizer 但我不知道如何计算点击次数。

任何帮助，将不胜感激。

这是示例代码

```
- (void)quantityChanged:(UITapGestureRecognizer *)tapRecognizer {
    static NSUInteger numberOfTaps;
    if (tapRecognizer.state == UIGestureRecognizerStateBegan) {
       numberOfTaps = 0;
    }
    if (tapRecognizer.state == UIGestureRecognizerStateEnded)
        NSLog(@"%d",numberOfTaps);
    if (tapRecognizer.state == UIGestureRecognizerStateChanged)
        numberOfTaps++; 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T06:56:39.630

四种可能的解决方案

我认为你的方法很好

```
- (void)quantityChanged:(UITapGestureRecognizer *)tapRecognizer {

    static NSUInteger numberOfTaps;

   if (tapRecognizer.state == UIGestureRecognizerStateEnded) {

        numberOfTaps ++;

        NSLog(@"web service call with %d",numberOfTaps);
    }

} 
```

查看日志

```
web service call with 1
web service call with 2
web service call with 3
web service call with 4 
```

或者

触发后删除 quantityChanged UITapGestureRecognizer

我的意思是，从发件人对象中删除 UITapGestureRecognizer（在您的第一个 Web 服务之后的 quantityChanged 方法内）

然后在您收到第一个 Web 服务响应后，再次将 UITapGestureRecognizer 添加到发件人。

或者

使用 UILongPressGestureRecognizer 。这是一个漫长的事件过程。请检查事件状态，无论是开始、完成等，然后编写您的代码。

```
- (IBAction)longPressDetected:(UIGestureRecognizer *)gestureRecognizer {        

    if (gestureRecognizer.state == UIGestureRecognizerStateBegan){

        NSLog(@"Long press began");

    } else if ( gestureRecognizer.state == UIGestureRecognizerStateRecognized ) {

            NSLog(@"Long press UIGestureRecognizerStateRecognized");
    }
    else if (gestureRecognizer.state == UIGestureRecognizerStateEnded) {

        NSLog(@"Long press Ended");
    }
    else {

        NSLog(@"Long press detected.");
    }       
} 
```

或者

为 UITapGestureRecognizer设置**numberOfTapsRequired**

```
UITapGestureRecognizer *doubleTapRecognizer = [[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(beginComicTransitions:)] autorelease];    
doubleTapRecognizer.numberOfTapsRequired = 2;
doubleTapRecognizer.numberOfTouchesRequired = 1;
doubleTapRecognizer.delegate = self; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T07:39:58.110

即使我怀疑这会导致实用的用户界面......如果您知道用户可以“放入”的最大计数，您可以使用几个相互依赖的轻击手势侦听器`- (void)requireGestureRecognizerToFail:(UIGestureRecognizer *)otherGestureRecognizer`（[文档在这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/cl/UIGestureRecognizer)）。

代码可能如下所示：

```
-(void)addGestureRecognizers
{
  int maxCount = 10;
  UITapGestureRecognizer *other = nil;
  for(int i = maxCount; i < 0; i--)
  {
    UITapGestureRecognizer *tapper = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(tapped:)];
    tapper.numberOfTapsRequired = i;
    if(other)
    {
      [tapper requireGestureRecognizerToFail:other]; 
    }
    [self.view addGestureRecognizer:tapper];
    other = tapper;
  }
}

-(void)tapped:(UITapGestureRecognizer *)tapper
{
  [self callWebservice:tapper.numberOfTapsRequired];
} 
```

我没有对其进行测试，也从未使用过它，但这就是我从文档中了解到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T07:34:55.470

好的。所以我找到了解决我的问题的方法。我将以 0.5 秒的延迟执行我的 Web 服务调用，每次按下按钮时，我都会取消所有等待执行的选择器并再次调用 performSelector: withDelay。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-21T09:36:13.177

没有 UITapGestureOrganizer 就更容易了。

```
button.addTarget(self, action: #selector(multipleTap(_:event:)), for: UIControlEvents.touchDownRepeat) 
```

接着：

```
func multipleTap(_ sender: UIButton, event: UIEvent) {
    let touch: UITouch = event.allTouches!.first!
    if touch.tapCount == 3 {
        print("triple tap")
    }
} 
```

# jquery - jquery切换隐藏或显示div

> ID：11965167
> 
> 赞同：0
> 
> 时间：2012-08-15T06:52:00.227
> 
> 标签：jquery

我编写了一个代码来检查 div 是否设置为`display:none;`or `display: block;`，但我认为也可以制作更好的短代码。这是我的代码，任何人都可以帮助我提供更灵活的代码吗？

```
$(".msgstreplylarge").toggle(
    function () {
        if($('.view_quick_reply').css('display') === 'none')
            $('.view_quick_reply').show();
        else
            $('.view_quick_reply').hide();
    },
    function () {
        if($('.stg_gall_cro_cnt').css('display') === 'block')
            $('.view_quick_reply').hide();
        else
            $('.view_quick_reply').show();
    }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:55:56.287

`$('#foo').toggle(showOrHide);`会做同样的工作。如需进一步参考，[请查看此链接](http://api.jquery.com/toggle/)

# python - Numpy 数组、花式索引、复数

> ID：11965170
> 
> 赞同：3
> 
> 时间：2012-08-15T06:52:37.837
> 
> 标签：python, numpy

以下代码将数组的一部分乘以一个数字

```
def mul_by_num(a,b):
    a[0:2] *= b

import numpy as np
a = np.ones(5,dtype=np.float64)
mul_by_num(a,1.0)
mul_by_num(a,1j) #Generates a warning (and casts to float!) 
```

第二次调用产生警告

```
-c:2: ComplexWarning: Casting complex values to real discards the imaginary part 
```

问题是，将 numpy 数组的一部分乘以复数/实数而不弄乱 dtype 的最 Pythonic 方法是什么？我真的不想从一开始就将数组转换为复数，但程序原则上可以获得复数输入。

**编辑：**

我不关心复制整个数组，将其转换为复杂的；但我想避免检查 dtypes（即 np.float32、np.float64、np.complex、np.int 等）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T07:22:34.320

您将需要在某些时候将数组转换为复数，否则它将无法保存复数。

将数组转换为复数的最简单方法是添加`0j`：

```
if (np.iscomplexobj(b)):
    a = a + 0j
a[0:2] *= b 
```

注意：*不是* `a += 0j`因为它会尝试就地修改数组，如果它还不复杂，这将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:31:28.030

由于提高了计算速度，numpy 数组确保具有相同的类型。也许您可以尝试使用 python 列表或强制转换它。

# c# - 通过与服务器不同的用户帐户使用兑换

> ID：11965172
> 
> 赞同：4
> 
> 时间：2012-08-15T06:52:41.957
> 
> 标签：c#, outlook-redemption

我正在尝试使用一个小程序从 Exchange 服务器发送电子邮件并保存所有附件。根据建议，我决定使用 Redemption 库。

我已经在服务器上安装了[Microsoft Exchange Server MAPI 客户端和协作数据对象 1.2.1](http://www.microsoft.com/en-us/download/details.aspx?id=1004)，因此它应该可以在没有 Outlook 的情况下工作。当我在本地机器上运行程序时，它可以毫无问题地浏览我自己的收件箱。但是，当我尝试在服务器上执行它时，我遇到了问题。

即使我在代码中提供了登录信息，我也会收到登录提示。我使用与我尝试访问的帐户不同的帐户登录服务器。我最简单的尝试是这样的：

```
// Get session
RDOSession session = RedemptionLoader.new_RDOSession();

// Attempt login
session.Credentials.Add("outlook.server.local", 
                        "user", 
                        "password", 
                        rdoCredentialType.ctGeneric,
                        rdoCredentialPersist.cpLocalMachine);

session.LogonExchangeMailboxEx("user",
                               "outlook.server.local",
                               false, 
                               true, 
                               "", 
                               "");

// Access mailbox
RDOFolder folder = session.GetDefaultFolder(rdoDefaultFolders.olFolderInbox); 
```

当我尝试访问邮箱或任何其他项目时出现错误：

```
Unhandled Exception: System.Runtime.InteropServices.COMException: 
  Error in IMAPI Session::OpenMsgStore: MAPI_E_LOGON_FAILED
Make sure your code runs under the Windows user identity that has MAPI profiles. 
```

即使以其他用户身份登录，我如何才能访问我的邮箱？如果我使用“运行方式...”执行程序并提供我的用户登录名，它也可以在服务器中运行。但我需要它与不同的用户一起工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T08:41:23.317

确保您的用户具有默认 MAPI 配置文件（只需启动 Outlook 并连接到*任何*邮箱）。

然后使用登录到“默认配置文件”`session.logon`并使用连接到您的邮箱`session.GetSharedMailbox()`。

# html - 为什么css类被覆盖？

> ID：11965173
> 
> 赞同：0
> 
> 时间：2012-08-15T06:52:58.753
> 
> 标签：html, css

我有一张桌子。我只希望第一列左对齐，其他列右对齐。我使用以下样式：

```
<style>
    table{ width:100%;}
    .1col{ text-align:left;}
    .othercols{width:100px;}
    table>tbody>tr>td, table>tbody>tr>th { text-align:center;} 
</style> 
```

然后我有我的桌子：

```
<table>
    <tr>
        <th class="1col">Category</th>
        <th class="othercols">Some text</th>
        <th class="othercols">Some text</th>
        <th class="othercols">Some text</th>
    </tr>
    <tr >
        <td class="1col">Some text</td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
</table> 
```

结果是我的 1col 类被忽略了。任何的想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T06:55:01.767

CSS Class 不能以整数开头，所以试试吧`col1`。

工作示例：http: [//jsfiddle.net/9X7kz/8/](http://jsfiddle.net/9X7kz/8/)

如果您有兴趣，这是完整的语法：

[http://www.w3.org/TR/CSS21/grammar.html#scanner](http://www.w3.org/TR/CSS21/grammar.html#scanner)

这是特定的规则规范：

[http://www.w3.org/TR/CSS21/syndata.html#characters](http://www.w3.org/TR/CSS21/syndata.html#characters)

> 在 CSS 中，标识符（包括选择器中的元素名称、类和 ID）只能包含字符 [a-zA-Z0-9] 和 ISO 10646 字符 U+00A0 及更高，加上连字符 (-) 和下划线 ( _); **它们不能以数字、两个连字符或一个连字符后跟一个数字开头。**标识符还可以包含转义字符和任何 ISO 10646 字符作为数字代码（请参阅下一项）。例如，标识符“B&W？” 可以写成“B\&W\?” 或“B\26 W\3F”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T06:55:45.023

CSS 中的任何降序选择器（即从父级选择的任何内容，例如`table>tbody>tr>th`）都比不降序的选择器（例如任何花园品种`div`，或`.class`）更具体。

一般来说，您应该避免这种特殊性，因为它会导致很多问题（就像您现在遇到的问题一样）。

“直接子选择器”只选择直接后代，所以在这里它对你没有任何好处，因为 a`th`只能从 a 下降，而 a*只能*从 a 下降。`tbody``th``tr`

您应该给表格一个类，并从该类中继承与该元素或子元素有关的所有样式。

此外，在 CSS 中，样式表中更靠后的样式会覆盖上面的样式，这也取决于其他一些加权因素（链接在下面的 steveax 评论中）。

您需要将`.1col`声明放在更下方以使其优先...并且，根据 SiGanteng 的回答...不要以数字开头的类名。

```
.table{ width:100%;}
.table .othercols{width:100px;}
.table td, .table th { text-align:center;} 
.table .col1{ text-align:left;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T06:58:55.917

更改`1col`为`acol`. ***[这](http://jsfiddle.net/blasteralfred/QBf7u/)***是一个有效的现场演示。这是你想要的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T08:55:11.693

工作代码：

```
<style>
    table{ width:100%;}
    .col1{ text-align:left;}
    .othercols{width:100px;}
    table>tbody>tr>td, table>tbody>tr>th { text-align:center;} 
</style>

<table>
<tr>
    <th class="col1">Category</th>
    <th class="othercols">Some text</th>
    <th class="othercols">Some text</th>
    <th class="othercols">Some text</th>
</tr>
<tr >
    <td class="col1">Some text</td>
    <td></td>
    <td></td>
    <td></td>
</tr> 
```

# c - 我无法理解这个程序的输出

> ID：11965178
> 
> 赞同：1
> 
> 时间：2012-08-15T06:53:12.830
> 
> 标签：c, pointers

我的程序如下：

```
#include<stdio.h>
main()
{
  int x=30,*y,*z;
  y=&x;
  z=y;
  *y++=*z++;  //what does this mean?
  x++;          
  printf("%d %d",y,z);  
  return 0;
} 
```

这句话的含义是什么：`*y++=*z++`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T06:57:06.393

`y`and`z`是指针，而表达式`y++`and`z++`使用后缀运算符，因此这两个增量都将在赋值*之后发生。*

这条语句做了 3 件事：

1.  分配给 : 所指向`y`的相同值所指向的`z`值`*y = *z`。
2.  增加`y`指针。现在`y`指向内存中的*下一个* `int`。
3.  增加`z`指针。现在`z`指向内存中的*下一个* `int`。

`y`如果和`z`在语句之后使用，最后两个将是不好的：`y`现在`z`指向不属于代码的未初始化内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T06:54:53.930

它相当于：

```
*y = *z;
y++;
z++; 
```

> 我无法理解这个程序的输出

您正在打印指针，没有太多要理解的。

* * *

*   您应该在打印指针时使用`%p`而不是`%d`
*   当您增加这些指针时，您正在超越已知的宇宙

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T07:08:24.173

`*y++=*z++;`- 这只是将存储在指针中的值分配`z`给`*y`. 在此之后，它的`y`和`z`指针都递增。在此声明后取消引用两者`z`并`y`可能导致崩溃（未定义的行为）。

这种语句用于字符串复制实现

```
void my_strcpy(char *dest, char* src)
{
   while((*dest++ = *src++));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T07:07:02.113

变量`y`和`z`是指向整数的指针，在这种情况下，指向变量 x 的地址。

以下几行将 的值设置`y`为的地址`x`（即为`&x`您提供 `x 的地址）。

```
y=&x;
z=y 
```

下一行`*y++=*z++;`并不完全有意义，可能会也可能不会编译，具体取决于使用的编译器。在 GCC 4.3.2 的情况下，它给出了以下错误。

```
foo.c:7: error: invalid operands to binary * (have ‘int *’ and ‘int *’) 
```

看起来您正在尝试进行指针运算，但操作符的优先级有点混乱。您是否尝试`z`在将预增量值分配给某个位置后增加指向的值？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T06:55:22.790

这只是将 指向的对象的值分配给 指向的对象的值`y`，`z`然后递增两个指针。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T06:56:15.497

它将简单地将 y 指向的对象的值分配给 z 指向的对象的值，最后它递增两个指针。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-15T06:55:11.683

这与以下内容相同：

```
*y = *z;
++z;
++y; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-15T11:58:34.020

```
*y++=*z++;  //wat  does this mean? 
```

以上导致未定义的行为（在下一个序列点之前进行多次修改）。

# javascript - 如果输入包含数组中的任何单词

> ID：11965183
> 
> 赞同：2
> 
> 时间：2012-08-15T06:53:30.263
> 
> 标签：javascript, jquery, arrays, indexof

我有一个输入，我想知道我的数组中是否存在任何值。举个简单的例子，我的数组是

```
var _array = ["sun", "mon", "tue", "wed", "thu", "fri", "sat"]; 
```

例如，如果我只输入“sun”，我已经知道如何触发它，但我想知道是否也存在“hhsun”或“sunee”。

```
$('input').keyup(function() {
    var _val = $(this).val();
    $('p').text(_val);

    var _array = ["sun", "mon", "tue", "wed", "thu", "fri", "sat"];

    if (_array.indexOf(_val) != -1) {
        $('span').text('it worked');
    } else {
        $('span').text(_array.indexOf(_val));
    } 
}); 
```

[小提琴](http://jsfiddle.net/nosfan1019/WLacb/1/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T06:58:33.810

检查一个元素`_array`是否是文本框文本的子字符串：

```
var _array = ["sun", "mon", "tue", "wed", "thu", "fri", "sat"];

for (var i = 0; i < _array.length; i++) {
    if (_val.indexOf(_array[i]) != -1) {
        $('span').text('it worked');
        return;
    }
}

$('span').text('nothing'); 
```

**演示：http: [//jsfiddle.net/WLacb/3/](http://jsfiddle.net/WLacb/3/)**

* * *

一个稍微模糊的解决方案是使用正则表达式：

```
if (/sun|mon|tue|wed|thu|fri|sat/ig.test(_val)) {
    $('span').text('it worked');
} else {
    $('span').text('nothing');
} 
```

**演示：http: [//jsfiddle.net/WLacb/9/](http://jsfiddle.net/WLacb/9/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T07:04:22.103

一个简单的方法是使用内置的[jquery.each](http://api.jquery.com/jQuery.each/)命令循环遍历数组的每个元素并检查它是否在文本框值中。

[http://jsfiddle.net/WLacb/10/](http://jsfiddle.net/WLacb/10/)

```
$('span').text(-1);
$.each(_array, function(key, value) {
    if (_val.indexOf(value) != -1) {
        $('span').text('it worked');
    }
}); 
```

# r - 为什么 RUnit 会改变我的随机数？

> ID：11965191
> 
> 赞同：9
> 
> 时间：2012-08-15T06:54:05.963
> 
> 标签：r, random, runit

在单元测试中，我启动了一个辅助函数（生成测试数据）：

```
set.seed(1) 
```

我正在交互式开发单元测试，如下所示：

```
source('tests/runit.functions.R');test.something() 
```

但是当我去运行我的测试时，`run_tests.R`他们失败了。`set.seed(1)`尽管有命令，我还是把它缩小到不同的随机数！我在 set.seed(1) 之后添加了这一行：

```
print(sessionInfo());print("RANDOM SEED:");print(.Random.seed) 
```

真正有趣的部分是随机种子完全不同。在批处理脚本中只有三个数字：

```
501 1280795612 -169270483 
```

而在我的交互式 R 会话中，它是一个 626 元素的怪物：

```
[1]         403         624  -169270483  -442010614 ...
 ...
[617]   197184543    -2095148  ... -689249108 
```

第一个数字，501 与 403，显然是随机数生成器的类型，但我无法在主列表中找到这些数字的含义。

我认为我的问题的核心是确保我的单元测试具有可靠的随机数生成的最佳方法是什么？第二个问题是故障排除建议：我如何跟踪正在使用哪个随机数生成器（更重要的是）哪个代码/包/设置决定使用它？

`sessionInfo`看起来不是很有帮助，但它显示了一些小的差异。例如，包含 TTR 包是由于正在运行其他单元测试。这是`sessionInfo`批处理脚本的输出，其中第一行是`#!/usr/bin/Rscript --slave`：

```
R version 2.15.1 (2012-06-22)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.utf8       LC_NUMERIC=C              LC_TIME=en_US.utf8        LC_COLLATE=en_US.utf8     LC_MONETARY=en_US.utf8    LC_MESSAGES=en_US.utf8   
 [7] LC_PAPER=C                LC_NAME=C                 LC_ADDRESS=C              LC_TELEPHONE=C            LC_MEASUREMENT=en_US.utf8 LC_IDENTIFICATION=C      

attached base packages:
[1] methods   stats     graphics  grDevices utils     datasets  base     

other attached packages:
[1] TTR_0.21-1   xts_0.8-6    zoo_1.7-7    RUnit_0.4.26

loaded via a namespace (and not attached):
[1] grid_2.15.1    lattice_0.20-6 
```

这是我的交互式 R 会话的输出，它是从命令行启动的`R --no-save`：

```
R version 2.15.1 (2012-06-22)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.utf8       LC_NUMERIC=C              LC_TIME=en_US.utf8        LC_COLLATE=en_US.utf8     LC_MONETARY=en_US.utf8    LC_MESSAGES=en_US.utf8   
 [7] LC_PAPER=C                LC_NAME=C                 LC_ADDRESS=C              LC_TELEPHONE=C            LC_MEASUREMENT=en_US.utf8 LC_IDENTIFICATION=C      

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] xts_0.8-6    zoo_1.7-7    RUnit_0.4.26

loaded via a namespace (and not attached):
[1] grid_2.15.1    lattice_0.20-6 tools_2.15.1 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-15T07:15:35.147

看来您正在使用该`RUnit`包进行单元测试。*在这种*情况下，您需要注意对随机数生成器 ( )`RUnit`使用不同的默认值。*`RNGkind`*

 *从[RUnit 手册](http://cran.r-project.org/web/packages/RUnit/RUnit.pdf)和帮助`?defineTestSuite`：

```
defineTestSuite(name, dirs, testFileRegexp = "^runit.+\\.[rR]$",
  testFuncRegexp = "^test.+",  
  rngKind = "Marsaglia-Multicarry",
  rngNormalKind = "Kinderman-Ramage") 
```

请注意，默认`rngKind`值为`RUnit`" **Marsaglia-Multicarry"**。

但是，在基础 R 中，默认`RNGkind`值为**"Mersenne-Twister"**。来自`?RNGkind`：

> *目前可用的 RNG 类型如下所示。kind 与此列表部分匹配。默认值为“Mersenne-Twister”。*

* * *

因此，要将交互式结果与 的结果相匹配`RUnit`，您需要`RNGkind`在交互式会话中或在对 的初始调用中设置不同的`defineTestSuite`.*

# mysql - 使用 mysql db 运行 Ruby On Rails 项目在第一次运行时显示错误

> ID：11965194
> 
> 赞同：0
> 
> 时间：2012-08-15T06:54:14.967
> 
> 标签：mysql, ruby-on-rails

我有 Ruby 版本 1.9.3p125 和 Rails 版本 3.2.1。我使用了 railsinstaller.org 的安装程序，我从其官方网站安装了 MySQL。

使用 gem update --system gem 版本更新 gem 是 1.8.24

我做了以下任务

```
$ gem install mysql
$ gem install mysql2 
```

我所做的一切都没有任何问题。我使用的是 64 位 Win-7

我创建了新项目没有任何错误

```
C:\Sites> rails new mytestsite -d mysql 
```

我将 libmysql.dll 复制到 Ruby bin 文件夹

现在

```
C:\Sites\mytestsite> rails s 
```

显示此问题，如图所示

请帮助，我不能更进一步！

![](../Images/866ff7bdbaabb34bca4e57947a3a2046.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T08:15:19.620

当 rails 尝试连接到您的 SQL 数据库时，您会收到加载错误。因此，您可能没有创建所需的数据库。在您的数据库配置文件中应该有一个数据库名称，以及 rails 将用于连接的用户名和密码。确保在您的 SQL 数据库中创建数据库。

```
CREATE DATABASE databasename 
```

然后确保 rails 用来连接的用户存在。

```
CREATE USER username@localhost 
```

然后授予用户在新数据库中的读写权限

```
grant usage on *.databasename to username@localhost identified by 'password'; 
```

完成此操作后，您的 rails 应该能够连接到您的 mysql

# javascript - 将 JavaScript 对象添加到 DOM

> ID：11965201
> 
> 赞同：0
> 
> 时间：2012-08-15T06:55:17.557
> 
> 标签：javascript, javascript-objects, dom

我正在寻找一种在不重新定义对象的情况下将 javascript 对象添加到 DOM 的方法。

我创建了一个函数，它将所有对象方法放入一个新对象中，将对象重新定义为一个新的 DOM 元素，并将所有对象放回它上面，但这并不是我想要的。我需要在不使用任何返回语句的情况下更新对象。

我在这里有一个例子：http: [//jsfiddle.net/y56wS/](http://jsfiddle.net/y56wS/)

```
function addToDOM(obj) {
    temp = {};
    for (p in obj) {
        temp[p] = obj[p];
    }
    obj = document.createElement('prop');
    document.body.appendChild(obj);
    for (p in temp) {
        obj[p] = temp[p];
    }
    return obj;
}

var obj = {var1:123};
obj = addToDOM(obj); 
```

生成的代码模板应该是这样的：

```
function addToDOM(obj) {
    //Code for method
    //No return statement
}

var obj = {var1:123};
//No obj=
addToDOM(obj); 
```

要做到这一点，函数`obj =`内必须有 no `addToDOM`，这样它就不会被重新定义，也不需要 return 语句。有没有办法简单地将 javascript 对象扩展到 DOM 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:10:19.330

不，JavaScript 对象不能像那样添加到文档中 - 该`appendChild()`方法需要某种类型的对象，通常使用`document.createElement()`方法创建。

因此，您必须每次都创建新的 DOM 元素，或者克隆现有的元素。

假设您想要某种“模板”元素，我建议使用全局变量来保存该元素，创建一次然后每次克隆它并放置新属性。

代码是：

```
var _globalDOMobj = 0;
function addToDOM(obj) {
    temp = {};
    for (p in obj) {
        temp[p] = obj[p];
    }
    if (!_globalDOMobj) {
        _globalDOMobj = document.createElement('prop');
        _globalDOMobj.className = "myprop";
    }
    obj = _globalDOMobj.cloneNode(true);
    obj.innerHTML = "I am dynamic element";
    document.body.appendChild(obj);
    for (p in temp) {
        obj.setAttribute(p, temp[p]);
    }
    return obj;
}

addToDOM({"var1": "123", "style": "color: red;"});
addToDOM({"var2": "789", "style": "color: blue;"}); 
```

如您所见，您可以将对象直接传递给函数，而无需先将其分配给变量。

此外，要在 DOM 元素中应用对象属性，您必须使用，`setAttribute()`否则这些属性将不会成为 DOM 的一部分。

在上面的代码中，模板对所有实例都有相同的类，所以你可以应用一些 CSS 来影响它们，例如

```
.myprop { font-weight: bold; }​ 
```

[​现场测试用例](http://jsfiddle.net/7Fjja/2/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T07:30:31.340

“将 JS 对象添加到 DOM”的概念确实没有任何意义，实际上您的代码并*没有*这样做，它正在创建一个新`<prop>`元素并从您的对象中为其分配属性。我不明白这一点：您希望浏览器对`<prop>`元素做什么？

无论如何，继续讨论关于如何不必从函数返回对象并将其分配回变量的问题，你不能。JavaScript 按值传递参数 - 在这种情况下，“值”是对对象的引用。您可以更改对象的属性，但不能使传入的变量指向其他对象。（显然，您*可以*使声明的参数`obj`指向其他对象，就像您正在做的那样。）

但这会导致一种可能对您有所帮助的解决方法：您只需将属性添加到现有对象，新属性引用 DOM 对象 -

```
function addToDOM(obj) {
    var temp = document.createElement('prop');
    document.body.appendChild(temp);
    for (var p in obj) {
        temp[p] = obj[p];
    }
    obj.myDOMElement = temp;
}

var obj = {var1:123};
//No obj=
addToDOM(obj);
// obj now has a property myDOMElement that references the DOM element 
```

请注意，我已经稍微简化了您的功能：您不需要将所有`obj`属性复制到，然后在重新分配给新的 DOM 元素后将`temp`所有属性复制回。（即使您决定保留当前代码返回新对象的想法，您也可以使用我的简化形式，只需.）`obj``obj``return temp`

请注意，您应该声明您的变量，`var`否则它们将是全局的。

# ssis - 我们如何在 SSIS 中更改运行时的配置信息？

> ID：11965203
> 
> 赞同：3
> 
> 时间：2012-08-15T06:55:21.263
> 
> 标签：ssis, sql-server-2008-r2

配置文件是在开始时加载的，我想知道它们在内存中的存储位置和方式，因为根据我的理解，文件加载一次并且其中的信息存储在一些变量中，我想知道我怎么能在运行时更改这些变量的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T08:41:04.213

就像你会改变任何变量的值一样。您的配置文件只会告诉您设置为从中加载的变量的初始值。包启动后，您可以使用脚本任务操作变量，例如：

```
 Dts.Variables("YourVar").Value = True 
```

# java - 类扩展抽象类可以接受哪个名称？

> ID：11965211
> 
> 赞同：2
> 
> 时间：2012-08-15T06:55:57.563
> 
> 标签：java

我有三个班级：

1.  `ZookeeperAccess`是接口
2.  `AbstractZookeeperAccess`实现 ZookeeperAccess
3.  是一个扩展的类`AbstractZookeeperAccess`

三等舱的好名字是什么？

我使用`ZookeeperAccessImpl`，但我想这不是最好的名字，它暗示只实现了 `ZookeeperAccess`，而不是 extends `AbstractZookeeperAccess`。

ps:`ZookeeperAccessImpl`是现在唯一扩展的类`AbstractZookeeperAccess`。

我使用抽象类来实现一些接口代码，并提供一些抽象代码供 ZookeeperAccessImpl 扩展。

我再次更新问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T07:23:15.950

您拥有的事实`AbstractZookeeperAccess`意味着有多个子类可以实现每种类型`ZookeeperAccess`，因此请在子类名称前加上类型的前缀。

例如，给定：

```
interface ZookeeperAccess
AbstractZookeeperAccess implements ZookeeperAccess 
```

你可能有

```
FullTimeZookeeperAccess extends AbstractZookeeperAccess
PartTimeZookeeperAccess extends AbstractZookeeperAccess
TemporaryZookeeperAccess extends AbstractZookeeperAccess 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T07:20:26.223

名称应该解释实现的作用。这个实现可以通过扩展一个抽象类，委托给另一个......

例如 in `java.util`, `LinkedList`and `ArrayList`implentents`List`和 ... extends `AbstractList`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T07:23:18.860

为什么你认为类名需要暗示它扩展了抽象类？

对于适当的类名，我通常使用一个*前缀*来显示每个类的*特定实现。*

例如**EmployeeDao**的一个接口，

**带有BaseEmployeeDao**的抽象类

 **并且实现的名称可能是这样的：

*   PostgresEmployeeDao
*   OracleEmployeeDao
*   MongodbEmployeeDao
*   序列化EmployeeDao

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T07:59:15.297

类名应该清楚地说明类的作用，所以当你需要一个-prefix `I`（用于接口）或一个`Impl`-suffix 时，你可能做错了什么。

接口名称应说明如何使用它（例如。`Map`）。如果一个类的主要目的是实现一个接口，它应该说明一些**具体**的实现（例如。`HashMap`）。在这种情况下，所有变量和成员都应该声明为接口类型，并且该类仅用于实例化（除非具体实现很重要，它不应该）

`Impl`表明只有一种有意义的实现。如果是这样，你为什么需要一个接口呢？（一个可能的答案可能是：我想对 API 的用户隐藏实现，~~Sun~~ Oracle 经常这样做。）

如果您只想提供默认实现（因为您希望 API 用户提出更有效的解决方案），那么`Default`,`Simple`或`Direct`-`ZookeeperAccess`呢？

对于抽象类，我更喜欢使用`Base`-suffix（例如 . `ZookeeperAccessBase`），它更适合大多数 IDE 的自动完成。**

# c++ - 常量对象和函数的问题

> ID：11965214
> 
> 赞同：8
> 
> 时间：2012-08-15T06:56:20.873
> 
> 标签：c++, constants

我正在尝试学习如何使用常量函数和对象，但是，我有一些错误让我坚持了一个多小时，我似乎无法弄清楚。我正在遵循一个简单的例子，我想我在途中迷路了。这是我的代码。

主文件

```
#include <iostream>
#include "ExampleClass.h"

int main(){
    ExampleClass exampleObj; // object used to call members of ExampleClass.
    exampleObj.printText(); // calls printVar from the ExampleClass.

    const ExampleClass constantObject; // object used to call constant members of ExampleClass.
    constantObject.printConstText(); // calls printConstVar from the ExampleClass.

    return 0;
} 
```

ExampleClass.h

```
#ifndef EXAMPLECLASS_H
#define EXAMPLECLASS_H

class ExampleClass
{
    public:
        void printText();
        void printConstText() const;
};

#endif // EXAMPLECLASS_H 
```

示例类.cpp

```
#include <iostream>
#include "ExampleClass.h"

void ExampleClass::printText(){
    std::cout << "The code works!" << "\n";
}

void ExampleClass::printConstText() const{
    std::cout << "The code works!" << "\n";
} 
```

我得到了错误：

```
C:\Documents and Settings\Me\My Documents\ConstObjects\main.cpp||In function 'int main()':|
C:\Documents and Settings\Me\My Documents\ConstObjects\main.cpp|8|error: uninitialized const 'constantObject'|
||=== Build finished: 1 errors, 0 warnings ===| 
```

如果我在 ExampleClass 之前取出 const，则代码可以正常执行。但它仍然是一个常量对象吗？感谢您的帮助，我希望我提供了足够的信息。如果这很重要，我正在使用代码块。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T06:57:45.900

const 对象 "constantObject" 需要一个初始化器或需要 "class ExampleClass" 具有用户声明的默认构造函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T07:01:28.647

您`ExampleClass`是一个[POD（普通旧数据）](https://stackoverflow.com/questions/146452/what-are-pod-types-in-c)结构。当它被声明为像这样的局部变量时，`ExampleClass exampleObj`不会调用默认构造函数并且它保持未初始化状态。

您需要创建自己的默认构造函数或使用以下语法 - `ExampleClass exampleObj = ExampleClass();`. 这将创建一个临时`ExampleClass`对象并初始化您的`exampoleObj`.

**更新：**

这是 C++03 标准 8.5.9 的摘录。

> 如果没有为对象指定初始化程序，并且该对象是（可能是 cv 限定的）非 POD 类类型（或其数组），则该对象应默认初始化；
> 
> **如果对象是 const 限定类型，则基础类类型应具有用户声明的默认构造函数**。[这个适用于 const 对象]
> 
> **否则，如果没有为非静态对象指定初始化器，则该对象及其子对象（如果有）具有不确定的初始值）；如果对象或其任何子对象是 const 限定类型，则该程序是非良构的。**[这个适用于 const 和 POD 类型]

这意味着`constantObject`应该有用户定义的默认构造函数，否则程序是错误的，应该被诊断出来。如果我们删除 const，对象将保持未初始化状态（将具有*不确定的初始值*）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T07:35:43.663

至少在较新版本的 GCC 中，并且可能在 C++11 标准中，这种行为已被考虑和问题并且似乎已得到修复。有关问题报告，请参见[此处](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#253)。

# linux - shell find - 控制文件路径

> ID：11965216
> 
> 赞同：0
> 
> 时间：2012-08-15T06:56:34.810
> 
> 标签：linux, find

我在我的 makefile 中使用以下命令：

```
LOCAL_FILES = $(shell find $(COMMON_PATH)/ -type f -name '*.cpp') 
```

结果为以下形式：

```
someDirectory/Common/... 
```

我希望结果不包括该`someDirectory/`部分。

那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T07:04:16.147

说明`%P`符 to将在搜索目录*之后*`-printf`打印路径名的一部分。

 *```
find ... -printf '%P\n' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:02:06.173

管道到例如`sed`并让它移除它怎么样？

就像是：

```
LOCAL_FILES = $(shell find $(COMMON_PATH)/ -type f -name '*.cpp' | sed 's@someDirectory/@@') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T07:08:06.973

如果您像这样使用 sed，您可以将其通过管道传输到 sed

```
$(shell find $(COMMON_PATH)/ -type f -name '*.cpp') | sed -e 's/.*\///g 
```

我认为这应该可以不确定我的语法是否正确，但我认为是这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T07:12:34.967

`-printf '%P\n'`解决方案很优雅。如果您不使用 GNU `find`，那么您可以使用以下`$(subst from,to,text)` `make`函数解决您的问题：

```
LOCAL_FILES = $(subst $(COMMON_PATH)/,,$(shell find $(COMMON_PATH) -type f -name '*.cpp')) 
```

`$(COMMON_PATH)/`这用空字符串替换任何出现的。请注意，如果`$(COMMON_PATH)/`字符串在文件路径中出现两次这种不太可能发生的情况，这将删除字符串两次。*

# node.js - 如何在开源项目中隐藏 Twitter Oauth 的消费者秘密？

> ID：11965219
> 
> 赞同：0
> 
> 时间：2012-08-15T06:56:42.573
> 
> 标签：node.js, open-source, twitter-oauth, everyauth

你如何隐藏`consumer secret`在你的开源项目中使用 Oauth 的 Twitter？您是否在生产部署之前将密码添加到代码中？

这通常也适用于您的开源代码中的秘密/密码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T04:58:48.460

您也可以将它们存储在环境变量中。

`everyauth.twitter.consumerKey(process.env.TWITTER_CONSUMER_KEY) .consumerSecret(process.env.TWITTER_CONSUMER_SECRET)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T07:00:03.320

标准解决方案是将其存储在配置文件中。因此，每个想要安装和运行软件的人都需要注册自己的密码才能使用您的软件。

通常，对于基于服务器的软件，每次安装都是一个单独的服务。例如，NBC Universal、NPR 和 Huffington Post 都使用相同的软件，但被视为不同的实体。因此，这通常是有道理的。

但是，对于基于桌面的软件，情况并非如此。NBC、NPR 和 Huffington Post 使用的文字处理器不被认为是不同的软件，而只是 Microsoft Word。因此，对于基于桌面的软件（或移动应用程序），解决方案是类似的，只是您在构建过程中包含了必要的私钥/秘密代码。同样，将这一切保存在配置文件中会使生活更轻松。只需确保您上传到公共存储库的示例/默认配置文件不包含任何机密。

# php - imap_open 使用哪个端口

> ID：11965222
> 
> 赞同：0
> 
> 时间：2012-08-15T06:57:10.050
> 
> 标签：php, imap

这是我的代码：

```
 $server = '{imap.gmail.com:993/ssl/novalidate-cert}';
  $imap_connection = imap_open($server, $login, $password);
  $mailboxinfo = imap_mailboxmsginfo($imap_connection);
  $messageCount = $mailboxinfo->Nmsgs; 
```

它抛出一些错误。

```
Warning: imap_open() [function.imap-open]: Couldn't open stream {imap.gmail.com:993/ssl/novalidate-cert} in /home2/booksby/public_html/anonymousemail.php on line 13 
```

谷歌搜索表明问题是由于某些防火墙问题造成的。我的托管服务提供商问我我的 php 脚本使用哪个端口。

那么有人可以告诉我需要打开哪个端口才能使上述工作正常吗？是 993 吗？有什么办法可以确定吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:59:33.537

正如 IBM 在[其文档](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=/com.ibm.help.domino.admin.doc/DOC/H_CHANGING_THE_DEFAULT_IMAP_PORT_STEPS.html)中所述：

> 选择 143（默认）以使用行业标准端口通过 TCP/IP 进行 IMAP 连接。您可以指定不同的端口，但 143 在大多数情况下都有效。指定非标准端口时，请确保该端口未为其他服务保留。端口号可以是 1 到 65535 之间的任何数字。

```
// To connect to an IMAP server running on port 143 on the local machine,
// do the following:
$mbox = imap_open("{localhost:143}INBOX", "user_id", "password"); 
```

如需进一步参考， [请参阅 php 手册的此链接](http://php.net/manual/en/function.imap-open.php)

正如@max

143 是 IMAP 的默认 /insecure/ 端口。在野外，大多数服务器都需要 SSL，它位于端口 993 上。

# c# - 循环遍历主键并检索相应的数据？

> ID：11965227
> 
> 赞同：1
> 
> 时间：2012-08-15T06:57:20.940
> 
> 标签：c#, sqlite, windows-8

我正在尝试遍历 SQLite 查询，并且对于找到的每个 pk，我都想获取 column 的相应值`date`。这是我到目前为止所拥有的。我的 dynamictextbox1 充满了代码而不是日期。

```
 public void createEntry()
    {
        var dbPath = Path.Combine(Windows.Storage.ApplicationData.Current.LocalFolder.Path, "data.db");

        /*using (var db = new SQLiteConnection(dbPath))
        {
            db.CreateTable<LogEntry>();
            db.RunInTransaction(() =>
            {
                db.Insert(new LogEntry() { date = dateBox.SelectedItem.ToString(), 
                                           startTime = startTimeBox.SelectedItem.ToString(),
                                           endTime = endTimeBox.SelectedItem.ToString(),
                                           activity = activityBox.SelectedItem.ToString(),
                                           type = typeBox.SelectedItem.ToString()
                });
            });
        }*/

        //If the database is empty then don't set the listview itemssource to it otherwise you will get an error.
        using (var db = new SQLiteConnection(dbPath))
        {
            if (db.Table<LogEntry>().Count() > 0)
            {
                var query0 = db.Table<LogEntry>().Select(v => v.ID);
                var query1 = db.Table<LogEntry>().Select(v => v.date.ToString());
                var query2 = db.Table<LogEntry>().Select(v => v.startTime.ToString());
                var query3 = db.Table<LogEntry>().Select(v => v.endTime.ToString());
                var query4 = db.Table<LogEntry>().Select(v => v.activity.ToString());
                var query5 = db.Table<LogEntry>().Select(v => v.type.ToString());
                foreach (var item0 in query0)
                {

                    //var dateID = db.Table<LogEntry>().Where(v => v.ID = query0);

                    //Create the controls and populate them.
                    StackPanel dynamicStackPanel0 = new StackPanel();
                    dynamicStackPanel0.Orientation = Orientation.Horizontal;

                    StackPanel dynamicStackPanel1 = new StackPanel();
                    StackPanel dynamicStackPanel2 = new StackPanel();
                    StackPanel dynamicStackPanel3 = new StackPanel();

                    TextBlock dynamicTextBlock1 = new TextBlock();
                    var dataID = db.Table<LogEntry>().Where( v => v.ID.Equals(item0)).Select(v => v.date);
                    dynamicTextBlock1.Text = dataID.ToString();

                    TextBlock dynamicTextBlock2 = new TextBlock();
                    foreach (var item2 in query2)
                    {
                        dynamicTextBlock2.Text = item2.ToString();
                    }

                    TextBlock dynamicTextBlock3 = new TextBlock();
                    foreach (var item3 in query3)
                    {
                        dynamicTextBlock3.Text = item3.ToString();
                    }

                    TextBlock dynamicTextBlock4 = new TextBlock();
                    foreach (var item4 in query4)
                    {
                        dynamicTextBlock4.Text = item4.ToString();
                    }

                    TextBlock dynamicTextBlock5 = new TextBlock();
                    foreach (var item5 in query5)
                    {
                        dynamicTextBlock5.Text = item5.ToString();
                    }

                    TextBlock dynamicTextBlock6 = new TextBlock();
                    dynamicTextBlock6.Text = "Rating 1";

                    TextBlock dynamicTextBlock7 = new TextBlock();
                    dynamicTextBlock7.Text = "Rating 2";

                    TextBlock dynamicTextBlock8 = new TextBlock();
                    dynamicTextBlock8.Text = "Rating 3";

                    //Create the entries.
                    dynamicStackPanel1.Children.Add(dynamicTextBlock1);
                    dynamicStackPanel1.Children.Add(dynamicTextBlock2);
                    dynamicStackPanel1.Children.Add(dynamicTextBlock3);

                    dynamicStackPanel2.Children.Add(dynamicTextBlock4);
                    dynamicStackPanel2.Children.Add(dynamicTextBlock5);

                    dynamicStackPanel3.Children.Add(dynamicTextBlock6);
                    dynamicStackPanel3.Children.Add(dynamicTextBlock7);
                    dynamicStackPanel3.Children.Add(dynamicTextBlock8);

                    dynamicStackPanel0.Children.Add(dynamicStackPanel1);
                    dynamicStackPanel0.Children.Add(dynamicStackPanel2);
                    dynamicStackPanel0.Children.Add(dynamicStackPanel3);

                    entryPanel.Items.Add(dynamicStackPanel0);
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T07:35:36.100

`Select`给你一个可枚举的日期。你需要`FirstOrDefault`.

```
var dataID = db.Table<LogEntry>().Where( v => v.ID == item0)
               .Select(v => v.date).FirstOrDefault();
dynamicTextBlock1.Text = dataID.ToString(); 
```

# php - PHP如何同时实现多个Web服务？

> ID：11965229
> 
> 赞同：5
> 
> 时间：2012-08-15T06:57:40.403
> 
> 标签：php, cakephp, cakephp-2.0

我正在做一个能源项目。在我的网站中，可能有能源服务通过网络服务在注册过程中注册。最初是 1 开始，现在又有 3 开始整合。

在第一页上，我必须根据邮政编码显示计划。现在在这个页面上，我要求所有 4 家能源供应商列出能源计划。

以顺序方式一次请求每个服务肯定会花费更多时间，因为我必须从外部源获取数据，这是第一页，所以我不想让它只在第一个实例时变慢。

如何同时向所有服务发出请求并从每个服务收集数据并将其列在最后一页上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T07:22:34.333

在 Web 服务器上执行时，实际上只有一种不讨厌的方法可以使用 PHP 执行此操作。您需要将 cURL 模块编译到 PHP 中。它具有对执行并行请求的内置支持。查看[www.php.net](http://www.php.net/)上的评论和文档以获取使用示例。

试试：[http ://www.php.net/manual/en/function.curl-multi-init.php](http://www.php.net/manual/en/function.curl-multi-init.php)

其他选项，例如分叉后台进程或调用 UNIX shell，维护起来很糟糕，而且很少跨平台。在几乎所有常见的 PHP 环境中，多线程都不是一个有效的选项。

我应该提一下，尽管不一定建议，可以使用 AJAX 方法。它并非在所有情况下都那么轻巧，但应该称重。

# javascript - 捕获来自客户端的 HTTP 请求（包括 ajax）

> ID：11965240
> 
> 赞同：1
> 
> 时间：2012-08-15T06:58:56.100
> 
> 标签：javascript, ajax, http, browser

我想编写可以捕获的代码：

*   (1) 单击链接或以编程方式更改 window.location
*   (2) 用户通过地址栏修改url
*   (3) AJAX 请求

甚至可能吗？我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:08:44.233

1.  是的，这是一个简单的步骤。只需给按钮一个通过 AJAX 访问服务器的操作。
2.  你到底是什么意思？您想知道用户在地址栏上执行此操作时的去向吗？
3.  您想跟踪每个 AJAX 请求还是您的目标是通过 AJAX 发送它们？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:14:45.833

我没有完全了解您想要实现的目标以及您想要在什么时候检测代码。但万一这有帮助，这可以通过 HTTP 代理来实现。在网络上，您可以通过代理服务器重定向流量，您可以在其中插入可以扫描传出请求并采取一些操作的模块（操作可能会报告给其他服务器）。当然，您不需要在这里检测任何东西。我猜大多数互联网防火墙都与此挂钩。

# sql-server-2005 - 不允许从数据类型 varchar 到 varbinary(max) 的隐式转换。使用 CONVERT 函数运行此查询

> ID：11965241
> 
> 赞同：1
> 
> 时间：2012-08-15T06:58:59.643
> 
> 标签：sql-server-2005, vb6

这是表单中我的“保存”按钮中的代码。我正在使用 VB6.0 和 MSSQL Server 2005。

CommonDialog1 & 2 保存插入图片框中的图像的文件名。

```
Set rs = con.Execute("insert into table1   
values('" & txtbox1.Text & "' , "_  
& " '" & txtbox2.Text & "' , "_     
& " '" & CommonDialog1.FileName & "' , "_    
& " '" & CommonDialog2.FileName & "' , "_  
& " '" & txtbox3.Text & "' )") 
```

“**不允许从数据类型 varchar 到 varbinary(max) 的隐式转换。使用 CONVERT 函数运行此查询。”** - 在运行时弹出错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:08:04.127

由于 SQL 的“INSERT”函数不接受子查询，我尝试使用**CAST**转换 CommonDialog1 & 2 的文件名，并成功。

Set rs = con.Execute("insert into table1 values('" & txtbox1.Text & "' , "_
& " '" & txtbox2.Text & "' , "_
**& " cast('" & CommonDialog1.FileName & "' as varbinary(max)) , "_
& " cast('" & CommonDialog2.FileName & "' as varbinary(max)), "_**
& " '" & txtbox3.Text & "' )")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:32:49.330

1.  使用下面列出的参数创建自己的存储过程（可以不用，但我更喜欢这种方法）（我建议重命名它们）
2.  将行 mCmd.CommandText 替换为您的存储过程名称
3.  替换连接字符串
4.  如果任何文本大小错误，请更正参数大小

> ```
> Dim mConn As New ADODB.Connection
> Dim mCmd As New ADODB.Command
> Dim mStreamCD1 As New ADODB.Stream
> Dim mStreamCD2 As New ADODB.Stream
> 
> mStreamCD1.Type = adTypeBinary
> mStreamCD1.Open
> mStreamCD1.LoadFromFile (CommonDialog1.FileName)
> 
> mStreamCD2.Type = adTypeBinary
> mStreamCD2.Open
> mStreamCD2.LoadFromFile (CommonDialog2.FileName)
> 
> mConn.Open "Insert your Connection String"
> Set mCmd.ActiveConnection = mConn
> mCmd.CommandType = adCmdText
> 
> mCmd.CommandText = "InsertIntoTable1"
> mCmd.Parameters.Append mCmd.CreateParameter("@txtbox1Text", adVarChar, adParamInput, 250, txtbox1.Text)
> mCmd.Parameters.Append mCmd.CreateParameter("@txtbox2Text", adVarChar, adParamInput, 250, txtbox2.Text)
> mCmd.Parameters.Append mCmd.CreateParameter("@CD1", adVarBinary, adParamInput, mStreamCD1.Size, mStreamCD1.Read)
> mCmd.Parameters.Append mCmd.CreateParameter("@CD2", adVarBinary, adParamInput, mStreamCD2.Size, mStreamCD2.Read)
> mCmd.Parameters.Append mCmd.CreateParameter("@txtbox3Text", adVarChar, adParamInput, 250, txtbox3.Text)
> 
> mCmd.Execute , , adExecuteNoRecords 
> ```

# php - CakePHP，一键发布到两个网址

> ID：11965242
> 
> 赞同：0
> 
> 时间：2012-08-15T06:59:11.457
> 
> 标签：php, javascript, jquery, cakephp, http-post

我想知道我是否可以通过单击按钮发布到两个不同的 URL？我想要完成的是为我的朋友制作一个生日网站。人们可以到现场写一些关于他的事情。为了使事情井井有条，我制作了两个模型，用户和消息。现在，如果能够提供一个包含用户数据（姓名和电子邮件）和消息（描述）并更新两个表的表单，我想要完成的工作。提前致谢。

我也愿意用javascript做东西！但是我还没有研究过任何 javascript，所以如果可以使用 JavaScript，也请提供明确的说明。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T07:21:13.460

您可以在其他控制器中使用模型，在控制器`uses`数组上定义它

```
class controller extends AppController {

  public $uses = array('Model1', 'Model2');

  public function doSomething() {

       debug($this->Model1);
       debug($this->Model2);

  } 
```

}

或者如果模型是相关的，最好通过关系像

```
 $this->Model1->Model2->save(); 
```

您应该阅读文档[模型协会](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)以了解基本模型的工作原理。

要回答您的问题如何调用另一个 url，请使用[requestAction](http://book.cakephp.org/2.0/en/controllers.html#Controller::requestAction)但请谨慎使用，因为它需要一直通过 bootsrap 过程，所以速度很慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T07:52:33.117

使用单个表单，包含两个模型的数据，并使用`$this->User->saveAssociated($this->request->data)`

它将一次性保存用户和消息数据，无需提交 2 次。

# php - 有没有最好的方法在 MySQL 中存储推文？

> ID：11965246
> 
> 赞同：3
> 
> 时间：2012-08-15T06:59:40.470
> 
> 标签：php, mysql, twitter, field

从这里可以看到（[https://dev.twitter.com/docs/api/1/get/statuses/home_timeline](https://dev.twitter.com/docs/api/1/get/statuses/home_timeline)），一条推文有很多信息（字段），因此存储推文并不容易MySQL 中的信息。

如果我把这个 JSON 做成数组，它就不是 1-depth 数组。例如，就像这个 JSON 中的 URL 实体一样，它可能在一个“实体”字段中有很多 URL。

我是否应该将此信息存储为一个字段中的“urls[{"aa": a, "bb": b}, {"aa": c, "bb": d}]" 之类的字符串？或者有没有最好的存储方式？

```
{
    "coordinates": null,
    "favorited": false,
    "created_at": "Fri Jul 16 16:58:46 +0000 2010",
    "truncated": false,
    "entities": {
      "urls": [
        {
          "expanded_url": null,
          "url": "http://www.flickr.com/photos/cindyli/4799054041/",
          "indices": [
            75,
            123
          ]
        }
      ],
      "hashtags": [

      ],
      "user_mentions": [
        {
          "name": "Stephanie",
          "id": 15473839,
          "indices": [
            27,
            39
          ],
          "screen_name": "craftybeans"
        }
      ]
    },
    "text": "got a lovely surprise from @craftybeans. She sent me the best tshirt ever. http://www.flickr.com/photos/cindyli/4799054041/ ::giggles::",
    "annotations": null,
    "contributors": null,
    "id": 18700887835,
    "geo": null,
    "in_reply_to_user_id": null,
    "place": null,
    "in_reply_to_screen_name": null,
    "user": {
      "name": "cindy li",
      "profile_sidebar_border_color": "AD0066",
      "profile_background_tile": false,
      "profile_sidebar_fill_color": "AD0066",
      "created_at": "Wed Nov 29 06:08:08 +0000 2006",
      "profile_image_url": "http://a1.twimg.com/profile_images/553508996/43082001_N00_normal.jpg",
      "location": "San Francisco, CA",
      "profile_link_color": "FF8500",
      "follow_request_sent": false,
      "url": "http://www.cindyli.com",
      "favourites_count": 465,
      "contributors_enabled": false,
      "utc_offset": -28800,
      "id": 29733,
      "profile_use_background_image": true,
      "profile_text_color": "000000",
      "protected": false,
      "followers_count": 3395,
      "lang": "en",
      "notifications": true,
      "time_zone": "Pacific Time (US & Canada)",
      "verified": false,
      "profile_background_color": "cfe8f6",
      "geo_enabled": true,
      "description": "Just me, Cindy Li.Giving cute substance since 1997.\r\nMarried to @themattharris.\r\nProduct designer for Yahoo! ",
      "friends_count": 542,
      "statuses_count": 4847,
      "profile_background_image_url": "http://a3.twimg.com/profile_background_images/3368753/twitter_flowerbig.gif",
      "following": true,
      "screen_name": "cindyli"
    },
    "source": "web",
    "in_reply_to_status_id": null
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T07:02:48.977

将其存储在列中。然后，您可以将索引放在您想快速找到的东西上——而不是仅仅提到能够搜索所有内容。以您建议的格式搜索特定内容将是一场噩梦。

如果您想继续使用其中的位，请编写一个对象来处理它的数据库方面，或者至少是一个将它们弹出或取出的函数。现在可能看起来更多的工作，但从长远来看，它会在以后为您节省*更多的*精力。

编辑：是的，我会将每一位数据保留在它自己的列中。话虽如此，您可能不需要存储*每一个*信息。例如，如果您不想保留有关“用户提及”的信息，请完全跳过它。

编辑 2L 以透视这一点，假设您要搜索“Bob”。如果您有这样的列结构：

```
+------+-----------+-----------+-----+
| user | favorited | truncated | url |
+------+-----------+-----------+-----+
| Bob  | true      | false     | ... |
| Sue  | true      | true      | ... |
| Tom  | true      | false     | ... |
+------+-----------+-----------+-----+ 
```

你可以只写一个死的简单查询。

与这样的东西：

```
+--------------------------------------------------------------+
| tweetData                                                    |
+--------------------------------------------------------------+
| user:Bob;favorited:true;truncated:false;url:www.example.com  |
| user:Sue;favorited:true;truncated:true;url:www.example2.com  |
| user:Tom;favorited:true;truncated:false;url:www.example2.com |
+--------------------------------------------------------------+ 
```

想象一下，试图找出 Bob 被收藏了多少次。您每次都必须提取整行，进行一些操作/正则表达式/技巧来获取该字段，然后手动对其进行计数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T05:04:07.960

苛刻但真实的答案是阅读数据库设计基础知识。看起来你在想你必须把它存储在一张桌子上。您希望将其拆分为多个表并将它们连接在一起。

# ruby-on-rails - 在 ruby on rails 中选择复选框传递数组

> ID：11965248
> 
> 赞同：4
> 
> 时间：2012-08-15T06:59:48.187
> 
> 标签：ruby-on-rails, ruby, controller

如何传递数组的值？选中的复选框。

在视图中：

```
= check_box_tag 'user_message_ids[]', user_message.id, false

= link_to "<button>Bulk Delete</button>".html_safe, profile_message_path(user_message), :id => 'user_message_ids', :confirm => "Are you sure?", :method => :delete 
```

我可以将提交按钮放在这个区域的任何地方吗？

像这个：

```
= form_tag checked_messages_path do
  = check_box_tag 'user_message_ids[]', user_message.id, false
--------objects---------------------------------------------
--------objects---------------------------------------------
--------objects---------------------------------------------
--------objects---------------------------------------------
= submit_tag "Delete Checked" 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-15T07:07:54.573

使用`form_tag`块

```
<% form_tag delete_mutiple_items_path do %>
  <table>
    <thead>
      <tr>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% @items.each do |item| %>
      <tr>
        <td><%= check_box_tag "items[]", item.id %></td>
      </tr>
      <% end %>
    </tbody>
  </table>
  <%= submit_tag "delete Checked" %>
<% end %> 
```

它将一个 id 数组传递给控制器​​，例如 {"item_ids[]" => ["1", "2", "3"]}

所以你可以用这些 id 做任何事情

仅供参考：[http: //railscasts.com/episodes/165-edit-multiple?view=asciicast](http://railscasts.com/episodes/165-edit-multiple?view=asciicast)

### 更新（一个小问题）

从这里：[http ://railscasts.com/episodes/17-habtm-checkboxes?view=asciicast](http://railscasts.com/episodes/17-habtm-checkboxes?view=asciicast)

> 我们的更新方法还有一个小问题。**如果我们取消选中所有复选框以从所有类别中删除产品，则更新无法**删除该产品所在的任何类别。这是因为如果未选中 HTML 表单上的复选框，则不会将其值发回，因此不会`category_ids`将出现在产品的参数散列中，表示`category_ids`没有更新。
> 
> 为了解决这个问题，**我们必须修改我们的产品控制器**以将`category_ids`参数设置为一个空数组，如果它没有传递给更新操作。我们可以使用`Ruby's ||=`运算符来执行此操作，并在更新操作的顶部添加以下内容。
> 
> `params[:product][:category_ids] ||= []`
> 
> 这将确保如果未选中任何复选框，则产品会正确更新，使其不属于任何类别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T07:02:59.273

您需要在表单标签周围添加按钮标签。您不能使用`link_to`.

# javascript - ExtJs 继承行为

> ID：11965251
> 
> 赞同：6
> 
> 时间：2012-08-15T07:00:21.437
> 
> 标签：javascript, inheritance, extjs

有人可以向我解释这种行为吗？让我们声明一个类：

```
Ext.define('baseClass',{
    a:null,
    ar:[],

    add:function(v) {
        this.ar.push(v);
    },
    sayAr:function() {
        console.log(this.ar);
    },

    setA:function(v) {
        this.a= v;
    },
    sayA:function() {
        console.log(this.a);
    }
}); 
```

现在我创建两个对象

```
var a = Ext.create('baseClass');
var b = Ext.create('baseClass'); 
```

测试属性

```
a.setA(1);
b.setA(2);

a.sayA();
b.sayA(); 
```

这输出

```
1
2 
```

一切正常，但是

```
a.add(1);
b.add(2);

a.sayAr();
b.sayAr(); 
```

我们得到

```
[1,2]
[1,2] 
```

这个我不明白。为什么它对两个对象使用单独的“a”属性但一个“ar”数组。“ar”未声明为静态！我完全不明白。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T07:13:47.460

当你在类声明中放入一些东西时，这意味着它被推送到对象原型上（阅读：它被所有实例共享）。对于字符串/数字/布尔值，这并不是真正的问题，但对于对象和数组，您会看到这种行为生效。

如果您希望每个实例都有一个数组/对象，那么您需要在实例中显式添加它：

```
Ext.define('baseClass',{
    a:null,

    constructor: function(){
        this.ar = [];
    }

    add:function(v) {
        this.ar.push(v);
    },
    sayAr:function() {
        console.log(this.ar);
    },

    setA:function(v) {
        this.a= v;
    },
    sayA:function() {
        console.log(this.a);
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T07:19:16.350

那是因为这里有一点：

```
Ext.define('baseClass',{
   a:null,
   ar:[], <--------------------------- you're instantiating an array object! 
```

为了更清楚，上面的代码等价于：

```
Ext.define('baseClass',{
   a:null,
   ar:new Array(), 
```

所以两个对象共享同一个数组，因为对象构造函数只复制对数组的引用而不是完整的数组对象。

不确定 Ext.js 如何处理构造函数/初始化器，但您需要在对象构造期间创建数组，而不是在声明它时创建....

好的，谷歌搜索给了我这个：

```
Ext.define('baseClass',{
    constructor: function () {
        this.ar = [];
    }, 
```

那应该可以解决您的问题。

# jquery - 我怎样才能做到这一点，以便当我将鼠标悬停在下拉菜单中的选项上时，使用 Ajax 填充标题？

> ID：11965257
> 
> 赞同：0
> 
> 时间：2012-08-15T07:01:14.197
> 
> 标签：jquery

我在网格中有很多下拉菜单。当用户将鼠标悬停在我的选择列表中的文本值上时，有没有一种方法可以让 jQuery 调用 Ajax 来获取标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:30:03.283

是的，当用户将鼠标悬停在文本值上时，您可以使用 jQuery 进行调用以获取标题，但您可能不需要使用 ajax。查看 .hover() 函数。这应该是一个很好的起点。

# sql - 在口渴表的条件下连接三个表

> ID：11965259
> 
> 赞同：0
> 
> 时间：2012-08-15T07:01:33.887
> 
> 标签：sql, join

我有一个快速的问题

我有一个带有 openid 的表和另外两个表连接它们的是用户 ID

但是我必须开始在 de openid 表中查找用户 ID 这可以在一个 select 语句中完成还是需要两个

我试过这个，但显然没有用

SELECT op `*`,g `*`,gp `*`FROM `openid`AS op INNERJOIN `users`AS g ON( g. `userid`= op. `userid`) INNERJOIN `profiles`AS gp ON( gp. `userid`= op. `userid`) WHERE op. `openid`=`2`

谢谢，理查德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T07:02:43.813

尝试

```
SELECT op.*, g.*, gp.* 
FROM openid AS op 
INNER JOIN users AS g ON g.userid = op.userid
INNER JOIN profiles AS gp ON gp.userid = op.userid
WHERE op.openid = 2 
```

# php - 在安卓中播放视频

> ID：11965264
> 
> 赞同：0
> 
> 时间：2012-08-15T07:02:06.753
> 
> 标签：php, android, android-layout, android-intent

我想播放 youtube 视频。我正在使用以下代码

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.youtube.com/watch?v=cxLG2wtE7TM"))); 
```

这是作品。它播放来自 youtube 网站的视频。但我想在我的布局中播放视频

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:24:11.680

`WebView`我认为您可能希望使用`<iframe>`标签将 YouTube 视频嵌入到 a中，然后将其`WebView`放入父布局中，例如`RelativeLayout`or `LinearLayout`。这是一个与您的问题类似的问题，其答案已被接受，以及一些有关如何执行此操作的示例代码：[Android 视频嵌入](https://stackoverflow.com/questions/7674469/android-video-embedding)

# xslt - 设置 html 复选框值

> ID：11965265
> 
> 赞同：0
> 
> 时间：2012-08-15T07:02:20.873
> 
> 标签：xslt

我正在尝试使用解析简单 xml 文件的 xsl 设计一个表单；像这样：

```
<tests>
    <agent ID="1" Name="Name 1"  />
    <agent ID="2" Name="Name 2"  />
    <agent ID="3" Name="Name 3"  />
</tests> 
```

和 xsl 文件：

```
<form action="." method="post"  >
        <xsl:for-each select="tests">
        <table >
            <tr>
                <th></th>
                <th>ID</th>
                <th>Name</th>
            </tr>
            <xsl:for-each select="agent">
                <tr>
                    <td><input type="checkbox" name="checkbox1" value="" /> </td>
                    <td><xsl:value-of select="@ID"/></td>
                    <td><xsl:value-of select="@Name"/></td>
                </tr>
            </xsl:for-each>
        </table>
            <input type="submit" value="Delete"/>
        </xsl:for-each>
        </form> 
```

我希望复选框的值是 ID 值。（`<xsl:value-of select="@ID"/>`）。但我不能在复选框标签内使用这个标签。我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T07:50:48.067

与其他地方提到的元素一样，[属性值模板](http://www.w3.org/TR/xslt#dt-attribute-value-template)`<xsl:attribute>`也值得学习，因为它们通常可以帮助简化您的 XSLT 代码。这些允许您将表达式直接放在属性中

```
<input type="checkbox" name="checkbox1" value="{@Value}" /> 
```

花括号 { } 表示这是一个“AVT”并包含一个要计算的表达式。

`<xsl:attribute>`如果您想要基于 XML 中的某些值的动态属性名称，您甚至可以在其中使用它们。

```
<xsl:attribute name="{$attrname}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:09:16.987

[`<xsl:attribute>`](http://www.w3.org/TR/xslt#creating-attributes)将允许您向标签添加任意属性。

> 该`xsl:attribute`元素可用于向结果元素添加属性，无论是由样式表中的文字结果元素还是由诸如`xsl:element`.

```
<picture>
  <xsl:attribute name="source">foo</xsl:attribute>
</picture> 
```

# objective-c - 将属性分配给 sudzc 中的对象

> ID：11965267
> 
> 赞同：2
> 
> 时间：2012-08-15T07:02:28.777
> 
> 标签：objective-c, ios, wcf, sudzc

我正在从目标 c 调用 .Net WCF 服务我必须将“类别”类型的对象传递给函数。在传递对象之前，我必须初始化它的“id”。这是代码：

```
SDZiPadDocSyncService *service = [[SDZiPadDocSyncService alloc]init];
service.logging = YES;
SDZCategory *cat = [[SDZCategory alloc]init];
cat.categoryId = [catId intValue];
[service getDocsByCatId:self action:@selector(getDocsByCatIdHandler:) category:cat]; 
```

当调用到达 SQL Server 时，categoryId 为 0。由于没有任何 Id=0 的类别，服务返回 0 条记录。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:14:18.027

WCF 服务可能没有正确反序列化请求。若要验证 sudzc 正在生成 WCF 服务所需的 soap XML，请使用[Visual Studio 附带的 WcfTestClient.exe 应用程序](http://msdn.microsoft.com/en-us/library/bb552364.aspx)调用该`getDocsByCatId`方法。在请求/响应面板中，您会看到一个 XML 选项卡。将 sudzc XML 与该选项卡中的 XML 进行比较。

有时 WCF 期望 XML 命名空间在肥皂正文中显式使用。例如，您的 soap 显示该`categoryId`元素位于`xmlns="http://tempuri.org/"` **XML**命名空间中，因为这是默认命名空间。确保来自 WcfTestClient 的 soap XML 也放在`categoryId`XML`http://tempuri.org/`命名空间中。如果不这样做，不知道如何配置 sudzc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T01:47:40.447

我终于找到了命名空间问题的解决方法。我必须在我的服务`Namespace="http://tempuri.org"`属性中添加一个属性。`DataContract`可以在[此处找到此解决方法的详细说明](http://johnrossitter.wordpress.com/2011/07/13/sending-complex-soap-objects-to-wcf-services-from-ios-using-sudzc/)

# sql - 如何将存储过程的输出返回到sql server中的变量中

> ID：11965269
> 
> 赞同：80
> 
> 时间：2012-08-15T07:02:35.823
> 
> 标签：sql, sql-server, variables, stored-procedures

我想在 SQL Server 中执行一个存储过程并将输出分配给一个变量（它返回一个值）？

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-08-15T07:52:36.727

这取决于您要返回的信息的性质。

如果是单个整数值，可以使用`return`语句

```
 create proc myproc
 as 
 begin
     return 1
 end
 go
 declare @i int
 exec @i = myproc 
```

如果你有一个非整数值，或者多个标量值，你可以使用输出参数

```
create proc myproc
  @a int output,
  @b varchar(50) output
as
begin
  select @a = 1, @b='hello'
end
go
declare @i int, @j varchar(50)
exec myproc @i output, @j output 
```

如果要返回数据集，可以使用`insert exec`

```
create proc myproc
as 
begin
     select name from sysobjects
end
go

declare @t table (name varchar(100))
insert @t (name)
exec myproc 
```

你甚至可以返回一个光标，但这太可怕了，所以我不会举个例子:)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-15T07:35:24.253

您可以使用`return`存储过程中的语句来返回整数状态代码（并且仅是整数类型）。按照惯例，返回值为零表示成功。

如果`return`显式设置 no，则存储过程返回零。

```
 CREATE PROCEDURE GetImmediateManager
      @employeeID INT,
      @managerID INT OUTPUT
   AS
   BEGIN
     SELECT @managerID = ManagerID 
     FROM HumanResources.Employee 
     WHERE EmployeeID = @employeeID

     if @@rowcount = 0 -- manager not found?
       return 1;
   END 
```

你这样称呼它：

```
DECLARE @return_status int;
DECLARE @managerID int;

EXEC @return_status = GetImmediateManager 2, @managerID output;
if @return_status = 1
  print N'Immediate manager not found!';
else 
  print N'ManagerID is ' + @managerID;
go 
```

您应该仅将返回值用于状态代码。要返回数据，您应该使用输出参数。

如果要返回数据集，请使用类型的输出参数`cursor`。

[更多关于 RETURN 声明](http://msdn.microsoft.com/en-us/library/ms174998.aspx)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-02-18T09:56:38.237

使用此代码，正常工作

```
CREATE PROCEDURE [dbo].[sp_delete_item]
@ItemId int = 0
@status bit OUT

AS
Begin
 DECLARE @cnt int;
 DECLARE @status int =0;
 SET NOCOUNT OFF
 SELECT @cnt =COUNT(Id) from ItemTransaction where ItemId = @ItemId
 if(@cnt = 1)
   Begin
     return @status;
   End
 else
  Begin
   SET @status =1;
    return @status;
 End
END 
```

**执行 SP**

```
DECLARE @statuss bit;
EXECUTE  [dbo].[sp_delete_item] 6, @statuss output;
PRINT @statuss; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-30T19:04:08.613

使用 proc 中的 Return 语句，我需要分配 temp 变量并将其传递给另一个存储过程。该值被正确分配，但是当将其作为参数传递时，它丢失了该值。我必须创建一个临时表并从表中设置变量（SQL 2008）

```
From this: 
declare @anID int
exec @anID = dbo.StoredProc_Fetch @ID, @anotherID, @finalID
exec dbo.ADifferentStoredProc @anID (no value here)

To this:
declare @t table(id int) 
declare @anID int
insert into @t exec dbo.StoredProc_Fetch @ID, @anotherID, @finalID
set @anID= (select Top 1 * from @t) 
```

# xcode - 如何从 xcode 中 sqlight 中的图像更新 blob 数据

> ID：11965273
> 
> 赞同：0
> 
> 时间：2012-08-15T07:02:51.310
> 
> 标签：xcode, ios4

如何在 sqlite 中更新图像

我有一个来自 imagePickerView 的图像，我想将它以 blob 格式保存在我的 sql 中，我的 sorce 代码怎么能听到

```
NSString *item = str_Name;
sqlite3_stmt    *statement;

NSString *databasePath = [[NSBundle mainBundle] pathForResource:@"SLAMEBOOK" ofType:@"sql"];
if(sqlite3_open([databasePath UTF8String], &SLAMEBOOK) == SQLITE_OK)
{
    NSString *insertSQL = [NSString stringWithFormat: @"UPDATE SlammyDetail SET Name= \"%@\", BDate=\"%@\"  WHERE Name = \"%@\"", txt_Name.text ,lbl_date.text, item];

    const char *insert_stmt = [insertSQL UTF8String];

    sqlite3_prepare_v2(SLAMEBOOK, insert_stmt, -1, &statement, NULL);
    if (sqlite3_step(statement) == SQLITE_DONE)
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Success" 
                                                        message:@"REMINDER Updated" 
                                                       delegate:nil
                                              cancelButtonTitle:@"Ok" 
                                              otherButtonTitles:nil];
        [alert show];
        [alert release];
    }
    else 
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" 
                                                        message:@"Failed to add Task" 
                                                       delegate:nil
                                              cancelButtonTitle:@"Ok" 
                                              otherButtonTitles:nil];
        [alert show];
        [alert release];
    }
    sqlite3_finalize(statement);
    sqlite3_close(SLAMEBOOK);

}

[txt_Name resignFirstResponder];
[[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

# algorithm - 在组间匹配集之前优先考虑组内匹配集的算法

> ID：11965275
> 
> 赞同：2
> 
> 时间：2012-08-15T07:02:59.093
> 
> 标签：algorithm, permutation, combinations, matching, combinatorics

我正在尝试建立一个类似于快速约会的社交活动，但每个人都可以认识每个人。人们配对并互相提问 5 分钟，然后轮流进行。我有多组对网络感兴趣的人（互相见面）。假设现在我有 A 组和 B 组。（组可能基于年龄、兴趣、行业等）这些组的大小不同，可能没有足够的时间让每个人都使用这个典型的算法来认识每个人：

[http://www.slideshare.net/MarkRodefer/easy-speed-networking-method-2814054](http://www.slideshare.net/MarkRodeffer/easy-speed-networking-method-2814054)

所以我需要一种方法来优先考虑谁会见谁。A 组的成员最有兴趣与 A 组的其他人会面。B 组的成员最有兴趣与 B 组的其他人会面。在他们的群体之外。

问题是，什么是一种有效/简单的算法来确定匹配的优先级，以便在组开始混合之前，A 组彼此相遇，B 组彼此相遇？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:29:10.563

好吧，鉴于您对我的评论的回答，即有一个功能可以订购群体间偏好，那么我会将人们分成中间，称一半“男人”和一半“女人”，然后将问题视为稳定的[婚姻问题](http://rosettacode.org/wiki/Stable_marriage_problem)第一次，根据他们各自的组以及他们之前是否配对过以及多久前配对过，为所有“女性”排序“男性”偏好（反之亦然）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:47:16.603

我可能会遗漏一些复杂的情况，但是一个组的成员总是更愿意在另一个组的成员之前遇到他自己组的成员，你不能从每个组内只举行一个循环赛开始，只配对小组完成后，小组之间？

# mysql - Linux 从 Webmin 执行 MySQL 备份到基于时间的路径

> ID：11965278
> 
> 赞同：8
> 
> 时间：2012-08-15T07:03:13.587
> 
> 标签：mysql, backup, ubuntu-server, cron-task, webmin

我试图在 Linux Ubuntu Server 12.04 (CronJob) 中设置计划任务，以便在午夜执行我所有 MySQL 数据库的每日备份。

我已经安装了已知的[Webmin](http://www.webmin.com/)（一个很好的用于管理 Web 服务器的 Web 界面）。

所以我的问题是：无论何时执行备份，文件都会被覆盖！

也就是说：前天的备份丢失了，只保存了“昨天”的备份！

我尝试过设置动态文件路径，例如：

**/var/www/mysqlbackups/%d-%m-%y**

但我没有成功:(

有谁能够帮助我。

非常感谢你们。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-01-21T10:13:48.393

> MySQL 数据库服务器 > 模块配置 > 在“是否使用 strftime 替换备份目标？”上选择是

它对我有用！:)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-11T22:30:29.017

您可以使用动态路径，但必须在模块配置中启用它之前：

```
System > Filesystem Backup > Module Config > Do strftime substitution of backup destinations? > Yes 
```

（如果您不确定占位符，只需单击配置中的文本“Do strftime replacement of backup destinations?”，帮助将显示给您。）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-13T18:37:13.297

我有同样的问题并像这样解决：

从**服务器**中选择**MySQL 数据库服务器**。转到**模块配置**（左上角），然后选择**Do strftime 替换备份目标？**是**的**。

我使用 db_%d-%m-%Y.sql 格式进行备份。(db_13-03-2013.sql)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-15T07:55:58.387

我制作了一个 shell 脚本（不适用于 webmin）。把它放在 /etc/cron.daily 中。

脚本会备份数据库（将其存储为 .gz），然后通过 ssh 将其上传到另一台服务器。对于授权。我设置了 ssh 密钥，所以不需要密码。备份文件具有唯一的名称，因此您不会覆盖备份文件。

这是在脚本中创建文件名的方法：

```
now=`date  +%Y%m%d_%H%M`
dst_path=/var/local/backups
filename="$dst_path/$database.$now.sql.gz" 
```

然后你应该编写一个小脚本来删除所有早于 x 天的备份文件。

```
#!/bin/sh

#
# Creates a backup of a MySQL databases and uses ssh (sFTP) to send if  to another server
# This script shouldbe called from the crontab

PATH=/usr/sbin:/usr/bin:/sbin:/bin

# MySQL user and password
mysql_cmd=/opt/bitnami/mysql/bin/mysqldump
mysql_usr=user_name
mysql_pass=password

# destination ssh
dst_user=user_name
dst_hostname=192.168.1.1

# Database to backup
database=test

# create timestamp
now=`date  +%Y%m%d_%H%M`

# where we store the files
dst_path=/var/local/backups

# backup filename
filename="$dst_path/$database.$now.sql.gz"
dst_filename="$database.$now.sql.gz"

# run backup
$mysql_cmd -u $mysql_usr --password=$mysql_pass  $database | gzip > $filename

# upload to sever (ssh)
scp $filename $dst_user@$dst_hostname: 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-25T11:13:05.730

您可以通过以下方式进行

Webmin > MySQL 数据库服务器 > 选择数据库 > 备份数据库 > 可以使用的其他备份选项中的文件路径 > 备份后运行的命令 Enter ======> mv 文件路径/文件名文件路径/文件名`date +"%Y%m%d%H%M%S"`_ .sql

# windows - 在 TortoiseSVN 中为提交自动生成文档

> ID：11965283
> 
> 赞同：1
> 
> 时间：2012-08-15T07:04:09.413
> 
> 标签：windows, svn, documentation, tortoisesvn, documentation-generation

我想找到一种自动生成提交文档的方法。我们使用的是 SVN，我们都使用 TortoiseSVN 作为客户端软件。（大部分代码是C++，我们使用的是windows）

如果我们可以在每次提交时提取以下提交相关数据就足够了，

*   修订号
*   日志消息
*   受影响的文件（修改/添加/删除..等）列表
*   更改（可能很难识别，但至少我们可以得到受影响文件的新旧副本）

我们需要将所有这些信息放在一个文本文件中。（每个提交的文件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:32:56.037

使用日志对话框（右键单击“ `Show Log`”）。

选择自上次发布以来的所有修订，然后点击`Ctrl+C`或者如果您不需要受影响的文件，请点击`Ctrl+Shift+C`。之后，您在剪贴板中拥有所需的所有信息，可以将其粘贴到您喜欢的任何编辑器中。

# php - 这个 security.yml 是什么意思？

> ID：11965289
> 
> 赞同：0
> 
> 时间：2012-08-15T07:04:56.827
> 
> 标签：php, symfony

我有一个 symfony security.yml 文件

```
# app/config/security.yml
security:
    firewalls:
        secured_area:
            pattern:    ^/
            anonymous: ~
            http_basic:
                realm: "Secured Demo Area"

    access_control:
        - { path: ^/admin, roles: ROLE_ADMIN }

    providers:
        in_memory:
            users:
                ryan:  { password: ryanpass, roles: 'ROLE_USER' }
                admin: { password: kitten, roles: 'ROLE_ADMIN' }

    encoders:
        Symfony\Component\Security\Core\User\User: plaintext 
```

我想要一些关于这个文件的细节..

1.  我可以有自己的防火墙设置，比如用其他名称替换secured_area吗？
2.  pattern 和 path 和有什么不一样？
3.  如果我访问网址“myhost/Symfony/web/app_dev.php/admin”，应该会发生什么？
4.  我的控制器中需要路径 /admin 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T07:15:16.510

> 我可以有自己的防火墙设置，比如用其他名称替换secured_area吗？

是的，您可以拥有自己的防火墙。

> pattern 和 path 和有什么不一样？

模式用于防火墙，路径 - 用于访问控制。两者的定义方式相同

> 如果我访问网址“myhost/Symfony/web/app_dev.php/admin”，应该会发生什么？

您将被重定向到登录表单

> 我的控制器中需要路径 /admin 吗？

所有匹配模式的路由都将使用安全令牌进行丰富。这不是必须的`/admin`，也可以是`/admin/somepage`

我建议你阅读Symfony2 文档中的[安全章节](http://symfony.com/doc/current/book/security.html)。

# html - HTML5 行无法使用 svg

> ID：11965290
> 
> 赞同：4
> 
> 时间：2012-08-15T07:05:06.283
> 
> 标签：html, svg, line

我试图学习 HTML5，所以我得到了代码并尝试了它，但我有问题，我能够正确地得到圆圈但线条没有显示。我尝试在 Chrome Firefox 和 IE 上打开它，但在圆圈正常时没有浏览器显示线！

代码是 -

```
<svg xmlns="http://www.w3.org/2000/svg" height="200" id="ls">
<line id="ls" x1="0" y1="0" x2="200" y2="100" style="stroke"red; stroke-width:100" />
</svg> 
```

有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T07:07:08.490

你有一个错字：**style="stroke"red;**

正确的代码是（注意（半）冒号）：

```
<svg xmlns="http://www.w3.org/2000/svg" height="200" id="ls">
<line id="ls" x1="0" y1="0" x2="200" y2="100" style="stroke:red; stroke-width:100" />
</svg>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

在这里小提琴：http: [//jsfiddle.net/s9sat/](http://jsfiddle.net/s9sat/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:08:02.163

`style`您在属性中有一个额外的双引号：

```
style="stroke"red; stroke-width:100" 
```

# javascript - 如何截断关于 div 高度的文本？

> ID：11965291
> 
> 赞同：8
> 
> 时间：2012-08-15T07:05:09.890
> 
> 标签：javascript, jquery, html

我有一个高度为 192px 的 div。我想截断 div 中的文本并希望`...`在最后显示。现在由于大文本，按钮被剪裁，如快照所示。当我在其中添加 html 标签时会发生这种情况。

![在此处输入图像描述](../Images/f9497ab630a042b0f5c740d86b80e047.png)

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T07:09:09.277

试试下面的 CSS：

```
text-overflow: ellipsis;
overflow: hidden;
whitespace: no-wrap; 
```

这仅适用于单行。对于多行，您需要[JavaScript](http://dotdotdot.frebsite.nl/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T07:07:00.450

使用`overflow: hidden`...如果您发布更多代码，我可以更具体。– j-man86 刚刚编辑

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T07:09:02.160

要隐藏文本，有一个简单的解决方案，在 div 中添加 overflow:hidden css 属性，如下所示

```
<div style="overflow:hidden">your code</div> 
```

但是要显示 ... 最后，您需要在 javascript 中获取 div 的内容并在那里使用 substr 函数。这将是试验和错误解决方案，以确定 div 中可以显示多少个字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T07:31:14.030

如前所述，解决问题的最简单方法是添加`overflow:hidden`到您的 div 的 CSS 样式。

但是，这不会帮助您在换行末尾添加省略号（点），而且我不知道仅使用 CSS 进行多行文本换行（以 3 个点结尾）。

更简单的方法是使用 jQuery（或类似的 JavaScript 库）来包装文本并在末尾添加 3 个点。例子：

[参考另一篇关于使用 CSS 和 jQuery 为单行和多行文本包装内容的 StackOverflow 帖子。](https://stackoverflow.com/questions/536814/insert-ellipsis-into-html-tag-if-content-too-wide)

有时还建议在服务器端处理内容，然后将其显示在页面上，但有时只使用 JavaScript 更方便（或更快/更容易）。

这是一个可以解决问题的 jQuery 插件：[jQuery DotDotDot](http://dotdotdot.frebsite.nl/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-13T01:46:37.810

这个问题用 javascript 标记，所以这里是缺少的答案。

您可以遍历每个字符或单词（如本例所示），同时检查高度是否低于您想要的高度。在每个真实的步骤中，您可以使用其文本覆盖元素内容，但没有最后一个单词/字符。

在转换这种情况下，我将字符串转换为数组，`pop`并在每次迭代时进行转换。这将删除我们文本的最后一部分，并确保循环不会无限循环......

```
/**
 * Truncates the text of an element depending its height.
 *
 * @param {Element} element
 * @param {Number} height
 */
function truncateByHeight(element, height) {
  var textContent = typeof element.textContent === 'undefined' ? 'innerText' : 'textContent';
  var parts = element[textContent].split(' ');

  while (parts.pop() && element.clientHeight > height) {
    element[textContent] = parts.join(' ');
  }
}

var element = document.querySelector('.box');

truncateByHeight(element, 120);
```

```
<div class="box">Cornua naturae fulgura uno coegit quisquis ad margine? Pluvialibus umentia vultus nulli nunc pendebat speciem emicuit! Margine tonitrua caecoque iapeto. Origine levius nam. Silvas valles temperiemque forma? Ignotas tegit. Hunc ligavit: summaque freta illas invasit deerat proximus. Caelo calidis securae mentes pronaque traxit.

Caligine omnia gentes. Posset aere certis eurus titan verba unus homini ora. Sed volucres. Campos effervescere flamina illi pondus umor. Cinxit obstabatque secrevit. Ligavit: natus aberant. Indigestaque regio rapidisque carmen coegit erat discordia liquidas. Ripis nix horrifer terrae dei tepescunt ad vos regio.

Nabataeaque fronde pluviaque vos terra tellure flexi. Neu habendum poena locoque ne. Dedit locoque nunc nebulas. Mentisque liquidum summaque porrexerat cepit. Litem mare. Surgere adhuc ipsa. Orbem hanc volucres iapeto habentem. Dissociata otia inminet nubibus passim erant iners. Semina praecipites reparabat spectent fuerat.</div>
```

# java - 如何使超类中的某些方法在子类中不可用

> ID：11965297
> 
> 赞同：1
> 
> 时间：2012-08-15T07:05:47.930
> 
> 标签：java, inheritance, polymorphism

假设我有一堂课

```
public class Base {} 
```

和一个儿童班

```
public class Derived extends Base {

    public void Foo(Object i){
        System.out.println("derived - object");
    }
} 
```

和主班

```
public class Main {
    public static void main(String[] args) {
        Derived d = new Derived();
        int i = 5;
        d.Foo(i);
    }
} 
```

在控制台中，我们将看到 **派生对象**

一段时间后，我想像这样修改我的超类：

```
public class Base {

    public void Foo(int i) {
        System.out.println("base - int");
    }
} 
```

现在，如果我运行我的程序，我会看到：

```
base - int 
```

那么我可以在我的子类中创建一个在超类中不可用的方法吗？结果我想看到**派生对象**。

我看到有些人不明白我想要什么，所以我会尝试解释：

我只想修改超类，我不想修改我的子类..例如，如果我将用我的超类制作 jar 并用我的孩子制作 jar。我不想更改所有的罐子..我想将方法​​添加到超类中并使其可用于超类..以及这样的代码

```
 public class Main {
    public static void main(String[] args) {
        Derived d = new Derived();
        int i = 5;
        d.Foo(i);
        Base b = new Base();
        b.Foo(i);
    }
} 
```

给我吗

**派生 - 对象** 基础 - int

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T07:09:17.083

`Foo`您应该对基类中的方法使用以下签名：

```
public void Foo(Object i) {
    System.out.println("base - int");
} 
```

这样您就可以覆盖`Foo`基类中的方法。现在您不覆盖此方法，而是重载它。

如果要`public void Foo(int i)`在基类中使用签名，则可以将`Foo`基类中的方法定义为`private`.

**PS：**希望我能理解你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T07:14:39.420

*   **私有**成员仅限于类范围。
*   *默认*（这个没有关键字）仅限于同一包的其他成员。
*   **protected**仅限于层次结构。
*   **公众**不受限制。

因此，如果您不希望您的子类访问超类的成员（成员意味着方法、枚举、变量......），您应该像这样声明您的 foo：

```
public class Base {

    private void Foo(int i) {
        System.out.println("base - int");
    }
} 
```

从我的评论中编辑：如果您不希望子类在编译时访问父类的成员，我看不到任何仍然允许外部类访问它的方法。您希望阻止近距离范围的访问，同时允许更广泛的范围。这只能通过覆盖该方法并为访问违规或不是在编译时而是在运行时抛出异常来完成。尽管您可以使用自定义注释使其工作，但我不知道该怎么做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T07:09:51.550

您可以将方法设为最终方法，这意味着子类不能覆盖它。

如果您不这样做并且子类覆盖了该方法，则您不能从您的主类调用超类方法。

约定注意事项：请在 java 中使用小写的方法名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T07:22:57.823

```
package com.abc;

public class TestParentChild {

    public static void main(String[] asd) {
        Base b = new ChildB();
        b.foo(5);
    }
}

class Base {
    public void foo(int i) {
        System.out.println("derived - int");
    }

}

class ChildB extends Base {
    public void foo(int i) {
        System.out.println("derived - object");
    }
} 
```

这可能会帮助你

# javascript - Javascript MVVM 设计模式 - 如何跟踪脏状态以及谁应该做 Ajaxing？

> ID：11965300
> 
> 赞同：2
> 
> 时间：2012-08-15T07:06:09.673
> 
> 标签：javascript, ajax, design-patterns, mvvm, knockout.js

我正在使用映射插件处理一个非常复杂的 Knockout.js 应用程序，以使用紧密反映服务器端域对象的深层对象图。我一直在改进我的模式，因为我去一些对我自己有点尴尬的环境来说效果很好的东西，但我想知道它是否是处理 MVVM Javascript 的一种好/坏的整体方法。

本质上，我的页面模式是有一个显示模块功能，它的作用有点像控制器 - 它拥有视图模型的层次结构并负责检测更改、对服务器进行 Ajaxing 更改并使用映射插件更新其视图模型图任何可能以 JSON 形式在响应中返回的后续变化。我这样做是因为我的域是这样的，当在服务器上验证时，图表的某个部分的微小变化可能会导致图表远处部分的更改/删除。发生这种情况时，我需要一个共同点来重新映射更改、向用户显示消息对话框等。

我所有的视图模型都是可实例化的函数，我已经设计了它，以便它们对所使用的页面或服务器一无所知（即它们不执行自己的 Ajaxing）。每个视图模型的构造函数通过映射选项创建其子级，并且每个级别都传递一个对其父级的引用。我已经实现了一个大多数视图模型使用的通用脏标志，并且当发生更改时，它们会将对自身的引用传递到链上的顶部可观察到的“脏视图模型”，该模块已订阅该模块。我知道这听起来有点奇怪，但这似乎是处理它的最佳方法，因为每个级别的项目都在不断地添加和删除，所以我不能在初始化时静态订阅属性。我不

从纯粹的效率角度来看，这并不是最好的。最简单的方法是每个视图模型在需要时直接调用模块中的函数，但这种耦合类型肯定是错误的。或者我可以将模块（或其相关函数）的引用传递给每个视图模型构造函数，然后视图模型调用它，有点像 Javascript 依赖注入。但这似乎太抽象了。这已经足够复杂了。

我是否应该寻找更高级别的框架（例如 Backbone）来处理这一切？注入模块引用真的太抽象了吗？或者这种构造事物的方式基本上是有意义的？我很想听听任何在类似具有挑战性的场景中工作过的人关于你是如何进步和改进你的模式的。

编辑：我应该澄清一下，由于各种原因，这个应用程序在“随用随存”模式下工作，其中给定级别的更改会导致一个视图模型（不包括其子视图）的即时离散 Ajax 帖子成为发送到服务器（这可能会返回一个结果，该结果表示对其他任何内容的更改）。尽管与纯粹的客户端操作相比，需要持续的 Ajaxing，但 Knockout.js 仍然使我的应用程序比我的 Olde 的 MVC 应用程序更优雅、可维护和可扩展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T00:41:33.800

可以使用 pub/sub 模型来解耦视图模型并减少引用，就像 Ryan Niemeyer[在此处讨论](http://knockmeout.net/2012/05/using-ko-native-pubsub.html)的那样。

Ryan 还为视图模型制作了一个 Dirty 标志，可以在[这里找到](http://www.knockmeout.net/2011/05/creating-smart-dirty-flag-in-knockoutjs.html)。

# c# - “作为”演员意外失败

> ID：11965303
> 
> 赞同：0
> 
> 时间：2012-08-15T07:06:37.617
> 
> 标签：c#, casting, delegates

我正在做一堆奇怪的通用东西，包括做很多委托类型的转换，并且在大多数情况下它工作得很好。
但是，我遇到了我找不到原因的演员表失败。
这是我的方法，以及以下调试数据。

```
 public static T GetInvokableDelegate<T>(string name) where T : class
    {
        return DelRegistry[name].GetSelectedMethod() as T;
        //DelRegistry[name].GetSelectedMethod() returns System.Object, 
        //which may be any flavor of Func<> or Action<>
    }
    //These two pairs represent the values from the Debug view, 
      //of T and GetSelectedMethod() respectively

    //This is when DelRegistry is returning the initial result from GetSelectedMethod():  This cast As T works fine.

    //System.Action<string,AIDECore.Controller>   
    //{Method = {Void HAL_TestMethod(System.String, AIDECore.Controller)}}    

    //This is after the second call,  GetSelectedMethod() is returning a different delegate, but with identical signature:  This one fails

    //System.Action<string,AIDECore.Controller>
    //{Method = {Void HAL_TestMethod(System.String, AIDECore.Controller)}} 
```

在运行时检查这些值表明它们看起来是相同的。指定的演员第一次工作，第二次失败。注意：这不是它被调用的次数导致它失败。在其他测试用例中，我向 DelRegistry 添加了几十个委托版本，没有任何问题。

我的问题是，你能得到关于为什么“As”演员失败的错误输出吗？（失败意味着返回 null）

**投射异常数据：**

```
[A]System.Action`2[System.String,AIDECore.Controller] cannot be cast to [B]System.Action`2[System.String,AIDECore.Controller].
Type A originates from 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' in the context 'LoadNeither' at location 'C:\Windows\Microsoft.Net\assembly\GAC_32\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll'.
Type B originates from 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' in the context 'LoadNeither' at location 'C:\Windows\Microsoft.Net\assembly\GAC_32\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll'. 
```

所以这基本上说它不能施放。

作为记录，从 GetSelectedMethod() 返回的所有版本在第一个之后，都来自动态加载的程序集。

**那么，为什么这个铸件到现在已经成功了数百次呢？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:21:22.693

代表分配基于签名，但演员表不是。因此，如果在第二种情况下 T 委托类型不同，则强制转换“失败”是预期的行为。

要转换委托类型，请使用这样的[代码](http://code.logos.com/blog/2008/07/casting_delegates.html)。

编辑：在使用转换异常数据阅读您的编辑后，我敢打赌，您的代码以某种方式加载了持有 AIDECore.Controller 类型的程序集的多个不同版本 - 检查这些类型。

# c# - C# 可互换属性

> ID：11965305
> 
> 赞同：2
> 
> 时间：2012-08-15T07:06:54.773
> 
> 标签：c#, types, properties, weakly-typed

我正在尝试创建一种属性的替代品，它接受多种类型作为输入/输出。

这是一个丑陋的解决方案的一些伪代码：

[http://pastebin.com/gbh4SrZX](http://pastebin.com/gbh4SrZX)

基本上我有一段数据，我需要能够为其分配多种类型，并做出相应的反应。我有一些要操作的数据，我需要有效的方法来管理在需要时从文件名加载它们，同时保持相同的代码，如果我正在处理已经加载的数据。

这太棒了：

```
SomeDataClass data1 = new SomeDataClass();
SomeDataClass data2 = new SomeDataClass();

data1.Data = "somefile.dat";
data2.Data = data1.Data; 
```

而 SomeDataClass.Data 不是字符串类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:12:22.227

你考虑过使用`dynamic`吗？

```
class A {
    public dynamic property1 { get; set; }
    public dynamic property2 { get; set; }
}

class Program {

    static void Main(string[] args) {

        A a = new A();
        A b = new A();

        a.property1 = "hello world!";
        b.property2 = a.property1;

        Console.WriteLine(b.property2); // writes "hello world!"
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:16:06.210

您可以使用隐式转换运算符完成大部分操作，即

```
class SomeDataClass {
    public SomeData Data {get;set;}
}
class SomeData {
    static SomeData Load(string path) {
        return new SomeData(); // TODO
    }
    public static implicit operator SomeData(string path)
    {
        return Load(path);
    }
}
static class Program {
    static void Main()
    {
        SomeDataClass data1 = new SomeDataClass();
        SomeDataClass data2 = new SomeDataClass();

        data1.Data = "somefile.dat"; // this is a load
        data2.Data = data1.Data; // this is not a load
    }
} 
```

然而！坦率地说，我认为将操作明确化更可取：

```
class SomeDataClass {
    public SomeData Data {get;set;}
}
class SomeData {
    public static SomeData Load(string path) {
        return new SomeData(); // TODO
    }
}
static class Program {
    static void Main()
    {
        SomeDataClass data1 = new SomeDataClass();
        SomeDataClass data2 = new SomeDataClass();

        data1.Data = SomeData.Load("somefile.dat");
        data2.Data = data1.Data;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T07:22:20.667

不确定您要解决的问题到底是什么，但在我看来，您最好使用 byte[]，处理从磁盘或其他地方加载的数据流。

还可以考虑仅对通用接口进行编码，而不是使用动态和对象。

# quickfix - 为什么在通过 FIX 请求市场数据时需要重复组？

> ID：11965306
> 
> 赞同：2
> 
> 时间：2012-08-15T07:06:55.397
> 
> 标签：quickfix, fix-protocol

谁能告诉我，为什么我们需要在市场数据请求中使用重复组。以及我们应该从接受者那里收到针对市场数据请求的响应/回复。请告诉我们如何在接受方接收市场数据请求？

**发送市场数据请求**

```
public void sendMarketDataRequest(SessionID sessionId, String request, int ord){ // request new or old
        String bankName = "HBL";
        String mdReqCcyPair = "EURUSD";
        String mkdreqId = "010qwerty";

        SubscriptionRequestType type = new SubscriptionRequestType('1');
        if(request.equals("new")){
            reqId.put(mkdreqId, mkdreqId);
        }else{
            type.setValue('2');
        }

        quickfix.fix44.MarketDataRequest mdRequest = new quickfix.fix44.MarketDataRequest(new MDReqID(mkdreqId), type, new MarketDepth(1));
        mdRequest.setField(new quickfix.field.Symbol(mdReqCcyPair));
        mdRequest.setField(new Product(2));
        mdRequest.setField(new NoRelatedSym(1));
        mdRequest.setField(new MDUpdateType(0));
        mdRequest.setField(new NoMDEntryTypes(3));
        mdRequest.setField(new StringField(582, "1"));

        quickfix.fix44.MarketDataSnapshotFullRefresh.NoMDEntries group = new quickfix.fix44.MarketDataSnapshotFullRefresh.NoMDEntries();
            group.set(new MDEntryType('0'));
            group.set(new MDEntryPx(12.32));
            group.set(new MDEntrySize(10));
            group.set(new OrderID("OrderId"));
            mdRequest.addGroup(group);

            group.set(new MDEntryType('1'));
            group.set(new MDEntryPx(12.32));
            group.set(new MDEntrySize(10));
            group.set(new OrderID("OrderId"));
            mdRequest.addGroup(group);

        qCcyPair.substring(0, 3);
        mdRequest.setField(new Currency(mdReqDealtCcy));
        mdRequest.setField(new NoPartyIDs(1));
        mdRequest.setField(new PartyID(bankName));

        try{
            boolean re = Session.sendToTarget(mdRequest, sessionId);
            System.out.println(mdRequest);
            System.out.println(re);
        }catch(Exception e){e.printStackTrace();}
    } 
```

**接收端代码**

```
public void onMessage( quickfix.fix44.MarketDataRequest message,  SessionID sessionID )
                  throws FieldNotFound, UnsupportedMessageType, IncorrectTagValue {

                  System.out.println("On Message:   "+message);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T08:05:36.240

市场数据请求通常不用于单一工具；您通常需要一组工具的市场数据。重复组集中的每个组代表您需要数据的仪器。响应将取决于您的交易对手以及您上次进行完整市场数据刷新的时间（通常是每天）。根据您的初始请求，然后按照固定时间表，您将收到完整的市场数据刷新消息。如果您的交易对手支持日内更新模型，您将收到快照刷新消息，这些消息是部分数据刷新。快照消息仅提供自上次刷新（全部或部分）以来已更改的市场数据的更新，并且旨在成为较小的消息，因此希望降低延迟。并非所有交易对手都支持部分刷新。如果您在接收市场数据请求的接受方（显然通常在卖方），您应该首先提供完整的市场数据刷新，涵盖所有请求的工具详细信息。是否支持增量更新是一项业务决策。

# django - 如何在 Django-CMS 中向具有子项（嵌套页面）的菜单项添加类

> ID：11965310
> 
> 赞同：1
> 
> 时间：2012-08-15T07:07:06.917
> 
> 标签：django, django-cms

我正在开发一个项目，其中包含嵌套子项的菜单项上有一些特定的样式。菜单结构看起来像这样

```
Home
|
About
|
Services
|_ web design
|_ social marketing
|_ traditional marketing 
```

我在模板中使用 {% show_menu 0 100 100 100 "menu.html" %} 并且在 menu.html 中有以下内容：

```
{% load menu_tags %}
{% for child in children %}
<li class="{% if child.selected %}active{% endif %}{% if child.sibling %}dropdown{% endif %}">
    <a href="{{ child.attr.redirect_url|default:child.get_absolute_url }}">{{ child.get_menu_title }}</a>
    {% if child.children %}
    <ul>
        {% show_menu from_level to_level extra_inactive extra_active template "" "" child %}
    </ul>
    {% endif %}
</li>
{% endfor %} 
```

我将 {% if child.sibling %}dropdown{% endif %} 放在那里以说明我希望将类添加到何处，但将其定位为 child.sibling 并不是正确的做法。有没有办法像 {% if child.has_children %}dropdown{% endif %} 这样定位特定的下拉菜单？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T16:56:14.003

`{% if child.children %}...{% endif %}`

# linq - 在linq中从数据集转换为列表

> ID：11965312
> 
> 赞同：0
> 
> 时间：2012-08-15T07:07:11.617
> 
> 标签：linq, dataset

我有如下数据集功能，

```
 public DataSet GetUpodBrandList(string criteria, string locationId)
    {
        using (SqlConnection conn = new SqlConnection(this.ConnectionString))
        {
            string query;
            if (criteria == "")
                query = "select distinct brandDesc " +
                        "from arabia_upod_item_master " +
                        "where locationId = '" + locationId + 
                        "' order by brandDesc";
            else
                query = "select distinct brandDesc " +
                        "from arabia_upod_item_master " +
                        "where brandDesc like '%" + criteria + "%' " +
                        "and locationId = '" + locationId + "' 
                        order by brandDesc";
            conn.Open();
            SqlCommand command = new SqlCommand(query, conn);
            return this.ExecuteDatasetStoredProc(command);
        }
    } 
```

我正在尝试将其转换为 linq，如下所示，

```
 public static List<DataContext.arabia_upod_item_master> GetUpodBrandList(
                                                               string criteria,
                                                               string locationId)
    {
        List<DataContext.arabia_upod_item_master> m = 
            new List<DataContext.arabia_upod_item_master>();
        using (var db = UpodDatabaseHelper.GetUpodDataContext())
        {
            db.ObjectTrackingEnabled = false;
            if (criteria == "")
                m = db.arabia_upod_item_masters.Where(
                          i => i.locationId == Convert.ToInt32(locationId))
                    .OrderBy(i => i.brandDesc)
                    .Distinct()
                    .ToList();
            else
                m = db.arabia_upod_item_masters.Where(
                        i => i.brandDesc.Contains(criteria) && 
                        i.locationId == Convert.ToInt32(locationId))
                    .OrderBy(i => i.brandDesc)
                    .Distinct()
                    .ToList();
            return m;
        }
    } 
```

但是我不知道如何在上面的函数中选择不同的brandDesc（和前面的函数一样）。我只是使用 Distinct()。这样对吗？还是有其他方法可以实现它？此外，如果在我的旧函数（即上面的第一个函数）中的查询中有“case”，那么我将如何在第二个函数中将其转换为 linq。转换为 linq 时还有其他需要担心的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:11:40.263

在每次通话`.Select(i => i.brandDesc)`之前放一个。`Distinct`你还需要改变你的`List<x>`所以`x`是什么类型`brandDesc`。

如果我要重构你的整个方法，我会做如下的事情。我提取了两种形式的查询共有的代码，并在其他几个地方进行了调整。

```
public static IList<string/* I assume*/>GetUpodBrandList(
    string criteria, string locationId)
 {
     // only do this once, not once per item.
     int locatId = Convert.ToInt32(locationId);

     using (var db = UpodDatabaseHelper.GetUpodDataContext())
     {
         db.ObjectTrackingEnabled = false;

         // This is a common start to both versions of the query.
         var query = db.arabia_upod_item_masters
             .Where(i => i.locationId == locatId);

         // This only applies to one version of the query.
         if (criteria != "")
         {
             query = query.Where(i => i.brandDesc.Contains(criteria));
         }

         // This is a common end to both version of the query.           
         return query
             .Select(i => i.brandDesc)
             .Distinct()
             // Do the ordering after the distinct as it will
             // presumably take less effort?
             .OrderBy(i => i.brandDesc)
             .ToList();
     }
 } 
```

# android - 如何创建以 EAN 作为输入的 EAN13 条码生成器？

> ID：11965315
> 
> 赞同：1
> 
> 时间：2012-08-15T07:07:54.713
> 
> 标签：android, generator, barcode, zxing, encode

我必须使用 ZXing 库或任何其他 apache2（开源）的库。我创建了 core.jar 库。但我不想将原始 ZXing 项目中的所有源代码复制到我的项目中。我应该在我的项目中使用原始 ZXing 中的什么，以便我可以编码和生成 EAN 条形码以供之后使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T07:30:28.953

这段代码使它成为可能：

```
Intent intent = new Intent("com.google.zxing.client.android.ENCODE");
intent.putExtra("ENCODE_FORMAT", "EAN_13");
intent.putExtra("ENCODE_DATA", "3800065711135");
startActivity(intent); 
```

# objective-c - 输出格式化的 NSString

> ID：11965321
> 
> 赞同：0
> 
> 时间：2012-08-15T07:08:11.443
> 
> 标签：objective-c, nsstring, formatting

```
UIAlertView *message = [[UIAlertView alloc] initWithTitle:[[LanguageManager sharedLanguageManager] get:@"Notice"]
                                                  message:[NSString stringWithFormat:[[LanguageManager sharedLanguageManager] get:@"Notice_Text"]]
                                                 delegate:nil
                                        cancelButtonTitle:[[LanguageManager sharedLanguageManager] get:@"Close"]
                                        otherButtonTitles:nil]; 
```

嗨，让我解释一下我上面的代码。基本上，它通过我的 LanguageManager 单例类调用`UIAlertView`从 a 读取的数据。`.plist`LanguageManager 的 get 函数基本上返回一个`NSString*`. 我知道我应该使用这个`NSLocalizedString`类，但我已经使用这个类有一段时间了，所以我决定坚持下去。

我的问题在于“消息：”参数。我试图读取的字符串包含格式字符，`\n`但它不能正确输出，并且`\n`在打印时显示为而不是换行符。我还收到“格式字符串不是字符串文字”警告。应用程序的其他部分使用类似的方法返回包含`%d`或`%f`正常工作的字符串，只是`'\n'`字符不起作用。

有谁知道我可以如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T08:47:33.820

“\n”*不是*“格式化字符”：编译器将其转换为适当的代码；字符串从不包含“\”和“n”字符。

因此，如果您的字符串来自不是由 (Objective-)C(++) 编译器编译的源，“\n”将只是两个字符。没有什么能把它们变成换行符，除非你自己用类似的东西做

```
NewString=[MyString stringByReplacingOccurrencesOfString:@"\\n" withString:@"\n"]; 
```

注意两个不同的字符串：在第一种情况下，“\”阻止编译器进行 \n -> 换行符转换，而第二个字符串将是一个实际的换行符。

关于非文字格式字符串的警告有点毫无意义。我还没有找到摆脱那个的好方法（现在，我只是完全禁用它，在 clang++ >= 4.0 上使用 -Wno-format-nonliteral）。

# sitecore - Sitecore 安装两个独立的 Visual Studio 解决方案

> ID：11965323
> 
> 赞同：0
> 
> 时间：2012-08-15T07:08:34.700
> 
> 标签：sitecore

我目前正在审查现有的 Sitecore 安装，其中两个网站具有单独的 Visual Studio 解决方案。我以前从未见过这种情况，而且这似乎不是一个很好的方法。将它们分开是否有任何优势，还是应该将它们合并到一个解决方案中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T09:33:07.527

如果您的项目计划涉及的不仅仅是编辑 xslt/css/js，那么我认为您应该合并到一个解决方案中。Sitecore 有一个用于 CMS 核心的大型代码库，当您编写子布局、创建 xslt 扩展、扩展管道、创建自定义字段类型等时，您将需要使用 VS 来构建项目。有两种解决方案只会混淆这一点。

祝你好运！亚当

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T12:23:33.783

在大多数情况下，正如亚当所建议的那样，多个 SLN 文件只会增加混乱，但根据使用这些 SLN 文件的具体设置，在特定情况下会有好处。

例如，如果您开始参与大量项目，特别是如果并非所有项目都适用于两个网站，则多个 SLN 文件非常有用。

假设您有一个通用的业务逻辑层来处理与所有网站的后端系统的集成。这将是站点 1 和站点 2 SLN 文件中引用的单个项目。但是，您可能具有站点 2 的站点特定逻辑，该逻辑位于单独的项目中，并且不需要对站点 1 上的团队可见。该其他项目只会在站点 2 SLN 文件中被引用。

# c - 使用 gdb 调试 ncurses 应用程序

> ID：11965328
> 
> 赞同：12
> 
> 时间：2012-08-15T07:08:59.430
> 
> 标签：c, input, gdb, ncurses

我正在尝试使用 gdb 调试我的 ncurses 应用程序。我使用*tty*命令将程序的 I/O 重定向到另一个终端。输出就像一个魅力，但我遇到了输入问题。我正在使用 getch() 函数来检索我的应用程序中的符号。因此，例如，如果我在我的 gdb 会话中这样做：

```
tty /dev/pts/5 
```

我在终端窗口的另一个选项卡（gnome-terminal）中得到我的输出。我的 gdb 会话卡住了，等待输入，但是当我按下 /dev/pts/5 中的任何键时，我将其打印出来，但应用程序本身并没有将它作为输入符号。在没有 gdb 的情况下运行一切正常，我也在使用 noecho()，因此不应显示符号。所以有什么问题？是否有可能以某种方式处理来自重定向终端的输入？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-15T07:17:20.867

您可以附加到您的进程以从不同的终端进行调试，而不是尝试从内部运行应用程序`gdb`。

正常运行您的流程。当它被阻止用户输入时，找到它的进程 ID，然后`gdb`从另一个窗口附加到它：

```
gdb -p <PID> 
```

您的问题是由于程序仍希望其交互式输入来自您的`gdb`会话。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-11-12T23:35:41.137

也许回答有点晚了，但希望这会有所帮助：花了一些时间来弄清楚如何调试 ncurses 应用程序，最后我在*gdbserver*和*tmux*的帮助下做了一个非常舒适的方法。

这样 gdb 的 I/O 和应用程序就完全分离了：

debug.sh（开始调试的脚本）：

```
#!/bin/bash
tmux splitw -h -p 50 "gdbserver :12345 ./yourapplication"
tmux selectp -t 0
gdb -x debug.gdb 
```

debug.gdb（单行 gdb 脚本文件，方便起见）：

```
target remote localhost:12345 
```

所以这样，应用程序在右侧启动，gdb 在左侧等待点击继续或任何其他常见的 gdb 东西:)

退出后，tmux 会自动关闭 gdbserver（因此也是右侧面板），仅此而已:)

# objective-c - 使用来自另一个类的方法的数据更新视图

> ID：11965329
> 
> 赞同：0
> 
> 时间：2012-08-15T07:09:00.103
> 
> 标签：objective-c, ios, xcode

我正在尝试`UIProgressView`使用我的实用程序类的方法中的一些数据来更新我的。现在，仅仅因为更新我的`UIProgressView`，我在我的视图控制器类中持有该方法并且一切正常。因为我可以使用全局变量到达该方法中的循环，所以我可以更新我的进度。但是，如果我想将此方法移动到我的实用程序类中，我应该怎么做才能随时了解我的`UIProgressView`. 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:31:33.810

我建议将您的实用程序类重新设计为[单例](http://en.wikipedia.org/wiki/Singleton_pattern)

这是您的实用程序类的代码示例：

UtilityClass.h 文件：

```
@interface UtilityClass : NSObject

+ (UtilityClass *)sharedInstance;

- (CGFloat)awesomeMehod;

@end 
```

实用程序类.m

```
@implementation UtilityClass

+ (id)sharedInstance
{
    static UtilityClass *_instance;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        _instance = [[UtilityClass alloc] init];
    });
    return _instance;
}

- (id)init
{
    self = [super init];
    if (!self) return nil;

    // Regular initialization, however keep in mind that it will be executed just once

    return self;
}

- (CGFloat)awesomeMethod
{
    return 42.0f
}

@end 
```

现在从您的视图控制器中，您将调用

```
CGFloat progress = [[UtilityClass sharedInstance] awesomeMethod];
[self.progressView setProgress:progress]; 
```

请记住几件事：

*   这是一种可能的方法，我会去阅读 可能有一天会派上用场的各种[设计模式](http://en.wikipedia.org/wiki/Software_design_pattern)

*   刷新有关[视图控制器及其交互方式的知识可能是一个好主意](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html)

*   为了使类成为正确的单例，您还应该覆盖诸如`alloc`, `init`, `initWithZone`, 等方法（如果使用 ARC，要覆盖的方法列表会有所不同），`dealloc`这[是一个这样做的示例](https://stackoverflow.com/questions/145154/what-does-your-objective-c-singleton-look-like#answer-145221)，尽管需要注意 调用。现在，只要你只通过调用类方法“实例化”你的类，你就可以了。`release``dispatch_once``@synchronize()``sharedInstance`

# sql - 如何计算不同的记录

> ID：11965336
> 
> 赞同：9
> 
> 时间：2012-08-15T07:09:17.367
> 
> 标签：sql, ms-access

有人可以帮我处理 SQL 命令吗？

我有一个包含以下数据的表（tbl_sActivity）：

> 用户 ID | 客户 ID | 行为状态 |
> 1 | 7 | 冷 |
> 1 | 7 | 成交|
> 22 | 5 | 冷 |
> 1 | 6 | 冷 |
> 1 | 6 | 温暖 |
> 1 | 6 | 热 |
> 1 | 6 | 成交|
> 1 | 8 | 温暖 |
> 1 | 8 | 成交|
> 21 | 4 | 温暖 |
> 21 | 4 | 成交|

输出应该是

> 用户 ID | Count_C_id |
>  1 | 3 |
>  21 | 1 |
>  22 | 1 |

我从网上搜索并了解到 MS ACCESS 不能使用 COUNT(DISTINCT) 函数。所以我被困在这个阶段好几天了。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-15T07:17:01.977

试试这个。“技巧”是首先有一个子查询来获取用户和客户端 ID 的所有不同组合，然后对每个用户进行分组：

```
SELECT
    user_id
  , COUNT(*) AS count_distinct_clients
FROM
    ( SELECT DISTINCT
          user_id, 
          client_id
      FROM tbl_sActivity
    ) AS tmp
GROUP BY
    user_id ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-06T06:08:53.213

建议不使用子查询进行查询。

请找到下面的代码，它会比子查询更快更准确。

// 临时表

```
CREATE TABLE #TempStudent(userId  int, c_id int , Name  varchar(MAX) )

SELECT max(userid) as UserId, count(c_id) as C_ID from #TempStudent 
GROUP BY userId 
```

# java - 带有 jsf 1.2 的 css 文件版本

> ID：11965338
> 
> 赞同：0
> 
> 时间：2012-08-15T07:09:38.690
> 
> 标签：java, css, jsf-1.2

参考[带有版本附加的问题css文件](https://stackoverflow.com/questions/10591449/css-file-with-version-appending)，有没有办法在JSF 1.2中使用JSF内置资源库版本控制？

标记`<h:outputStylesheet>`和`<h:outputScript>`在 JSF 1.2 中不可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:31:19.070

AFAIK jsf1.2 不支持版本附加。

对于我们的应用程序，我们通过系统属性手动实现了这种机制。

```
<link href="/gcdm/style/basic_#{g:getSystemProperty('cssVersion','1.0')}.css" rel="stylesheet" type="text/css" media="all" /> 
```

有关`g:`详细信息，您可以参考此[链接](https://stackoverflow.com/questions/11965432/parameterize-hcommandbutton/11966845#11966845)

现在，在每个版本中，我们只需更新系统属性并放入新的 css 文件。

希望这可以帮助！！！

# java - 使用 or 的 Python 赋值

> ID：11965339
> 
> 赞同：0
> 
> 时间：2012-08-15T07:09:45.780
> 
> 标签：java, python, jython

我见过一些类似的代码：

```
nodeIds = Framework.getDataAsList(key) or [] 
```

它翻译成的完整代码片段是什么？是检查函数输出还是检查`False`结果`None`？有一些类似的Java语法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T07:27:23.327

`or`短路。如果左边的表达式为“True”，则计算结果为，否则计算为右边的表达式（即使它是“False”）

如果左边的表达式是“真”，右边的表达式甚至不会被计算。如果它有副作用，这很重要

“真”意味着`bool(expression) == True`
“假”意味着`bool(expression) == False`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T07:19:20.617

有伪代码：

```
def nonZero(var):
   if isinstance(var,collection): 
     if len(collection) == 0 : return False
     else: return True
   if isinstance(var, number):
     if number == 0 : return False
     else: return True
   if isinstance(var, boolean): return var
   if isinstance(var, NoneType): return False
   if hasattr(var,'__nonzero__'): return var.__nonzero__()

nodeIds = Framework.getDataAsList(key)
if not nonZero(nodeIds) : nodeIds = [] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T07:26:30.100

更长的版本（在 Python 中）可能是：

```
nodeIds = Framework.getDataAsList(key)
if not nodeIds:
    nodeIds = [] 
```

这可能几乎相同地翻译成Java：

```
Vector<foo> nodeIds = Framework.getDataAsList(key);
if(nodeIds == null) {
    nodeIds = new Vector<foo>();
} 
```

（虽然我的 Java 很生锈；）

'not' 表达式中的某些值的计算结果为 False。您可以从交互式 Python 命令行自己尝试：

```
>>> not 0
... True
>>> not 1
... False
>>> not []
... True
>>> not ()
... True
>>> not True
... False
>>> not False
... True 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T07:12:56.973

假设`Framework.getDataAsList(key)`后续调用返回相同的结果，则等价于：

```
nodeIds = Framework.getDataAsList(key) if Framework.getDataAsList(key) else [] 
```

和：

```
if Framework.getDataAsList(key):
    nodeIds = Framework.getDataAsList(key)
else:
    nodeIds = [] 
```

但是请注意，这两个示例都需要两次调用`Framework.getDataAsList(key)`而不是一次。所以，也许更准确地说：

```
nodeIds = Framework.getDataAsList(key)
if not nodeIds:
    nodeIds = [] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T07:15:03.320

```
>>> 0 or "yes"
'yes'
>>> None or "yes"
'yes'
>>> False or "yes"
'yes'
>>> [] or "yes"
'yes'
>>> "no" or "yes"
'no' 
```

因此，如果函数返回任何不是的值，[`__nonzero__()`](http://docs.python.org/reference/datamodel.html#object.__nonzero__)则分配一个空列表。另请参阅有关布尔运算符的短路行为的[官方教程的这一部分](http://docs.python.org/tutorial/datastructures.html#more-on-conditions)`and`和`or`. 有关 Python 中对象真值测试的更多信息，另请参阅[此答案](https://stackoverflow.com/a/1452500/1025391)。

注意：从 Python 3.0 开始，它[`__bool__()`](http://docs.python.org/release/3.1.5/reference/datamodel.html#object.__bool__)正在被测试。

* * *

对于 Java，这可能会使用三元运算符进行翻译：

```
result = Framework.getDataAsList(key);
nodeIds = result ? result : someEmptyList(); 
```

[提供结果对象的等效布尔转换](https://stackoverflow.com/q/2206598/1025391)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T07:13:23.830

检查它`False`。因此，如果`Framework.getDataAsList(key)`返回`[]`、`{}`、`0`、`""`、 或任何其他计算结果为 的值，则将分配给。`()``None``False``[]``nodeIDs`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-15T07:35:37.630

这个 Python 习语很常见，并且在赋值中使用很像其他类 c 语言中的三元运算符。

```
# python
var = value or fallback 
```

相当于：

```
/* c-like */
var = value ? value : fallback 
```

两者都等效于以下伪代码：

```
if value is true:
    var = value
else:
    var = fallback 
```

# wcf - WCF 通用服务合同和 WS-Interoperability 合规性

> ID：11965342
> 
> 赞同：1
> 
> 时间：2012-08-15T07:10:06.130
> 
> 标签：wcf, wcf-interoperability, ws-i

Microsoft MSDN 将请求回复操作的最通用服务合同描述为

```
[ServiceContract]
public interface IUniversalRequestReply
{
    [OperationContract(Action="*", ReplyAction="*")]
    Message ProcessMessage(Message msg);
} 
```

如果我使用 basicHttp 绑定来制定如下合同，它将不符合 WS-I（使用 SOAPUI 合规性检查）。

```
[OperationContract]
Message SomeOperation(Message msg); 
```

我认为最通用的合约也将是最具互操作性的。

谁能解释为什么它不符合 WS-I？更重要的是 - 使用 Message 类会降低 Java 客户端对服务的消耗吗？

任何使用 Message 类的经验都值得赞赏。

编辑第一次回答后：

这是显示服务契约和操作契约的完整 WSDL。

```
<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" 
xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" 
xmlns:tns="http://tempuri.org/" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" 
xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" 
xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" 
xmlns:wsa10="http://www.w3.org/2005/08/addressing" xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex" 
xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" name="UniversalRequestReply" targetNamespace="http://tempuri.org/">
<wsdl:types>
<xsd:schema targetNamespace="http://tempuri.org/Imports">
<xsd:import schemaLocation="http://localhost:52437/UniversalRequestReply.svc?xsd=xsd0" namespace="http://schemas.microsoft.com/Message"/>
</xsd:schema>
</wsdl:types>
<wsdl:message name="IUniversalRequestReply_SomeOperation_InputMessage">
<wsdl:part xmlns:q1="http://schemas.microsoft.com/Message" name="msg" type="q1:MessageBody"/>
</wsdl:message>
<wsdl:message name="IUniversalRequestReply_SomeOperation_OutputMessage">
<wsdl:part xmlns:q2="http://schemas.microsoft.com/Message" name="SomeOperationResult" type="q2:MessageBody"/>
</wsdl:message>
<wsdl:portType name="IUniversalRequestReply">
<wsdl:operation name="SomeOperation">
<wsdl:input wsaw:Action="http://tempuri.org/IUniversalRequestReply/SomeOperation" message="tns:IUniversalRequestReply_SomeOperation_InputMessage"/>
<wsdl:output wsaw:Action="http://tempuri.org/IUniversalRequestReply/SomeOperationResponse" message="tns:IUniversalRequestReply_SomeOperation_OutputMessage"/>
</wsdl:operation>
</wsdl:portType>
<wsdl:binding name="BasicHttpBinding_IUniversalRequestReply" type="tns:IUniversalRequestReply">
<soap:binding transport="http://schemas.xmlsoap.org/soap/http"/>
<wsdl:operation name="SomeOperation">
<soap:operation soapAction="http://tempuri.org/IUniversalRequestReply/SomeOperation" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:service name="UniversalRequestReply">
<wsdl:port name="BasicHttpBinding_IUniversalRequestReply" binding="tns:BasicHttpBinding_IUniversalRequestReply">
<soap:address location="http://localhost:52437/UniversalRequestReply.svc/basic"/>
</wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

WSI 合规性测试失败的不是缺少服务合同，而是消息输入本身：

```
Name of message that failed: {http://tempuri.org/}IUniversalRequestReply_SomeOperation_InputMessage
Message: name={http://tempuri.org/}IUniversalRequestReply_SomeOperation_InputMessage
Part: name=msg
typeName={http://schemas.microsoft.com/Message}MessageBody 
```

因此，出于某种原因，使用这个 Message 类不符合 WS-I。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:49:03.900

服务不是投诉的原因是因为它没有定义**任何**服务合同。通用意味着此服务可以使用*任何*调用它的客户端生成的肥皂消息。它不会尝试反序列化soap 消息，因为它从未定义自己的合约。WS-I 遵从性要求服务定义一个可以用 WSDL 表示的静态契约。

# android - 无法获得在 android 中设置的特定日期和时间的通知

> ID：11965345
> 
> 赞同：3
> 
> 时间：2012-08-15T07:10:16.327
> 
> 标签：android, calendar, notifications

无法获取使用日历类设置的特定日期的通知。

我已经使用日历类设置了年份、日期时间、月份、秒，但无法获得通知。

任何帮助将不胜感激，以下是代码片段。

```
public class CalActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final Intent chartNotifier = new Intent(CalActivity.this,
                CRT.class);

        PendingIntent pendingIntent = PendingIntent
                .getBroadcast(
                        CalActivity.this,
                        234324243,
                        chartNotifier,
                        PendingIntent.FLAG_UPDATE_CURRENT);
        Calendar calendar = Calendar.getInstance();
        //calendar.set(year, month, day, hour, min, 0);
        //calendar.set(2012, 8, 15, 12, 18,0);
        calendar.set(Calendar.YEAR,2012);
        calendar.set(Calendar.MONTH, 8-1);
        calendar.set(Calendar.DAY_OF_MONTH,15);
        calendar.set(Calendar.HOUR, 12);
        calendar.set(Calendar.MINUTE,32);
        calendar.set(Calendar.SECOND, 15);

        long when =calendar.getTimeInMillis();

        AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
        alarmManager.set(AlarmManager.RTC_WAKEUP,when,
                pendingIntent);

    }
}

Receiver Class

public class CRT extends BroadcastReceiver {

    String trainNo, journeyDate;

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub

        System.out.println("Has arrived inside Receiver");
        // Call Service
        Intent service = new Intent(context, ChartNotifierService.class);

        context.startService(service);

    }

}

Service class is

package com.cal;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.os.IBinder;

public class ChartNotifierService extends Service {

    String trainNo;
    String journeyDate;

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onStart(Intent intent, int startId) {
        // TODO Auto-generated method stub
        super.onStart(intent, startId);

        String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager notificationManager = (NotificationManager) ChartNotifierService.this
                .getSystemService(ns);

        long when = System.currentTimeMillis();
        Notification notification = new Notification(R.drawable.ic_launcher, "Time",
                when);

        notification.flags |= Notification.FLAG_INSISTENT
                | Notification.FLAG_AUTO_CANCEL;

        Intent enterPnr = new Intent(ChartNotifierService.this, CalActivity.class);
        enterPnr.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

        PendingIntent enterIntent = PendingIntent.getActivity(
                ChartNotifierService.this, 0, enterPnr, 0);
        notification.setLatestEventInfo(ChartNotifierService.this, "Date",
                "time", enterIntent);

        notificationManager.notify(0, notification);

    }

    @Override
    public void onCreate() {
        // TODO Auto-generated method stub
        super.onCreate();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:32:39.550

改变

`Calendar.setField(Calendar.HOUR, xx)`

到

`Calendar.setField(Calendar.HOUR_OF_DAY, xx)`

# xml - XML 格式缩进标签匹配 - Linux

> ID：11965347
> 
> 赞同：14
> 
> 时间：2012-08-15T07:10:28.300
> 
> 标签：xml, linux, bash, ubuntu, xml-formatting

我有一个 XML 文件，其格式非常压缩，所有标签都像

```
<PersonalData><IndividualDetails><Title>Mr</Title><Gender>Male</Gender><FirstName>Hae</FirstName><Surname>JONES</Surname><Occupation>Banker</Occupation><DateofBirth>4/6/76</DateofBirth><LastKnownAddress></LastKnownAddress><LastKnownPostCode>00145</LastKnownPostCode><OtherNames></OtherNames></IndividualDetails><OccupationDetails><Company>SD Bank</Company><CompanyAddress>Sunset Boulevard NY</CompanyAddress><ContactNo>335698457</ContactNo></OccupationDetails></PersonalData> 
```

shell中是否有任何命令可以正确格式化标签。如果不缩进，仅将标签添加到自己的行也可以解决我的问题。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-15T07:14:00.280

```
xmllint --format <your-xml-file> 
```

例子

```
$ cat test.xml
<a><b>c</b></a>
$ xmllint --format test.xml
<a>
  <b>c</b>
</a>
$ xmllint --format test.xml > test.formatted.xml
$ cat test.formatted.xml
<a>
  <b>c</b>
</a>
$ 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-15T07:22:33.480

```
tidy -xml -i -q 
```

-xml - 指定输入是格式良好的 XML

-q - 抑制不必要的输出

-i - 缩进元素内容

tidy 可以处理文件和标准输入/标准输出

```
echo '<a><b>c</b></a>' | tidy -xml -i -q 
```

会产生

```
    <一个>
      <b>c</b>
    </a>
```

# .net - 无法通过 MySQL 连接连接到 Sphinx

> ID：11965350
> 
> 赞同：0
> 
> 时间：2012-08-15T07:11:04.773
> 
> 标签：.net, mysql, sphinx, mysql-connector

我试图使用其 MySQL 接口连接到 Sphinx 搜索服务器。但是，一旦我尝试连接，MySQL .NET 连接器就会引发以下异常：**Connector/Net 不再支持 5.0 之前的服务器版本**

我可以在服务器上使用命令行 mysql 命令成功连接到 MySQL 接口。如何使用 .NET 连接器连接到 Sphinx MySQL 接口>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T07:11:04.773

问题是默认情况下，Sphinx 返回 MySQL 2.0.4 版本，而最新的 MySQL .NET 连接器需要 MySQL 5.0+ 版本。但是，可以通过修改*sphinx.conf*文件使 Sphinx 返回不同的 MySQL 版本。只需将以下行添加到*sphinx.conf*文件的**searchd**配置部分：

 *`mysql_version_string = 5.0.37`

当然，您可以使用任何您喜欢的版本。编辑配置后，重新启动 sphinx：

`searchd --stop
searchd`

再次尝试连接，.NET 连接器将看到 Sphinx 返回的兼容 MySQL 版本，一切正常！*

# java - 如何在java中将字符串视为变量？

> ID：11965352
> 
> 赞同：0
> 
> 时间：2012-08-15T07:11:13.330
> 
> 标签：java

还记得你在玩游戏时索引你名字的每个单词并将它们加在一起形成一个秘密数字吗？就像`aay`会`1+1+25=27`

我试图用java中的各种方法做同样的事情，但我失败了。让我先分享我的脚本，然后告诉我我尝试了什么。

```
class test{
    public static void main(String args[]){
        int c = 3;
            String s = "c";
        ///now this is what all i tried:

        int value1 = (int)(s);
        ///i tried a cast, but that failed.

        String d = "4";
        int value2 = Integer.parseInt(d);
        ///when i try this, it correctly converts the string to an integer.

        Integer.parseInt(s);
        ///but when i try the above, it fails to do the same.
    }
} 
```

在这段代码中，我尝试了 2 种不同的方法，这两种方法都以我想要但不准确的方式工作。

问题是它无法重新组织 c 是一个具有整数值的变量。

那么，有什么捷径可以做到吗？此外，现在字符串只有 1 位长，一旦用户输入他或她的姓名，我将使用 for 循环将所有字母完全循环。

如果没有任何捷径，我唯一的选择是做一个 if 语句，如：

```
if(letter=a;){
    value=1;
} 
```

或类似的东西？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T07:15:29.910

您不能将 String 直接转换为整数，您需要一次取一个字符并减去 char 的值，`'a'`然后加 1 ：

```
public static void main(String[] a) {
    String s = "test";
    for (char c : s.toLowerCase().toCharArray()){
        System.out.println(charToInt(c));
    }
}
private static int charToInt(char c){
    return c - 'a' + 1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T07:15:10.320

在 Java 中，与大多数其他 C-eqsue 语言一样，`char`是 Number 类型。

> **char：** char 数据类型是单个 16 位 Unicode 字符。它的最小值为“\u0000”（或 0），最大值为“\uffff”（或 65,535，包括在内）。

### 只是字母字符

所以你需要做的就是将每个字符转换成它的等价字符，`char`然后你就有了它的 ASCII/Unicode 值；我不会在这里讨论 Unicode，因为 ASCII 会通过 Unicode 映射到正确的位置。

```
// this will give you a Zero based int of the 
// UPPPERCASE alphabet which starts at `65` and
// ends at `90`. 
// See where the lowercases starts and ends?

char c = "My Name".charAt(0) - 65; 
// c = 'M' in this case which is 77 - 65 = 12 
```

### [ASCII 码](https://www.asciitable.com/)很容易翻译。

[![ASCII 表](../Images/29b1362bef88f032c264b633d27c4536.png)](https://i.stack.imgur.com/CokrK.gif)
[（来源：[asciitable.com](http://www.asciitable.com/index/asciifull.gif)）]

对于`UPPERCASE`字母来说，这只是一个循环`char`a 的所有 s`String`并获取它们的代码并减去`65`以获得`0`基值的练习。排除其他字符和过程也变得有点复杂`lowercase`，但你从表格中得到了这个想法。

### 可打印字符

请注意， *“可打印”*字符开始`32`并贯穿`126`这通常是您所做的，是减去`32`而不是`65`将所有*“可打印”*字符转换为零基数。

### 例子

以下将打印出所有*“可打印”*字符。

```
public class Main
{
    public static void main(final String[] args)
    {
        for (char i = 32; i <= 126; i++)
        {
            System.out.println(new Character(i));
        }
    }
} 
```

### 解决方案

这是一个完整的解决方案，它将创建一个密码，所有可能的 *“可打印”字符。

```
public class Main
{
    public static void main(final String[] args)
    {
        int hash = 0;
        final String s = args[0];
        for (int c = 0; c < s.length(); c++)
        {
            hash = hash + s.charAt(c) - 32;
        }
        System.out.printf("Secret code for %s is %d", s, hash);
    }
} 
```

我的名字的结果是

```
Secret code for Jarrod is 418 
```

# jquery - 类不包含“禁用”时的jquery触发器

> ID：11965356
> 
> 赞同：0
> 
> 时间：2012-08-15T07:11:52.853
> 
> 标签：jquery

这是我的代码，它似乎不起作用！

```
$('a#welcome').not("[class*='disabled']").click( function() { 
```

当类中不包含“禁用”时，尝试触发 ID 为“欢迎”的对象。

感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T07:13:50.363

```
$('a#welcome').not('.disabled').click(function(){}); 
```

或者

```
$('a#welcome:not(.disabled)').click(function(){}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T07:18:16.280

除了其他答案之外，如果您的类是动态添加/删除的，则普通的 jQuery 选择器将不起作用。

您需要动态绑定事件：

```
$(document).on('click', '#welcome:not(.disabled)', function() {
  // ...
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T07:13:44.553

```
$('a#welcome').not(".disabled").click( function() { ... 
```

period `.`，表示类，所以你不需要使用`[class=]`选择器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T07:18:21.337

它不起作用的原因是因为类正在动态更改。

已将代码升级为此有效：

```
$(document).on("click", "a#welcome:not(.disabled)", function() { 
```

# c# - 异步运行.net事件？

> ID：11965357
> 
> 赞同：4
> 
> 时间：2012-08-15T07:11:59.853
> 
> 标签：c#, .net, events, .net-4.0

我遇到了这个有趣的问题：

如果我有一个事件和 2 个长计算函数订阅了这个事件：

似乎它的工作是同步的：（*方法 2 必须等待方法 1 完成*）

```
public class A
{
    public event Action f;
    public void Start()
    {
        f();
    }
}
void Main()
{
    A a = new A();
    a.f += Work1;
    a.f += Work2;
    a.Start();
}
public void Work1()
{
    "w1 started".Dump();
    decimal k = 0;
    for(decimal i = 0; i < (99999999); i++)
    {
        k++;
    }
    "w1 ended".Dump();
}
public void Work2()
{
    "w2 started".Dump();
    decimal k = 0;
    for(decimal i = 0; i < 99999999; i++)
    {
        k++;
    }
    "w2 ended".Dump();
} 
```

*结果 ：*

![在此处输入图像描述](../Images/0cb51cd9e5cb40e592a3fc3648a47bb2.png)

问题 ：

*恕我直言*，它有一个调用列表，这就是它同步运行的原因。

我怎样才能让它运行`A-synchronously`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T07:19:25.827

事件本身总是会一个接一个地运行它的订阅者。

但是你总是可以用例如包装你的方法[`Task`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)

```
void Main()
{
    A a = new A();
    a.f += () => Task.Factory.StartNew(Work1);
    a.f += () => Task.Factory.StartNew(Work2);
    a.Start();
} 
```

或使用其他类型的多线程。

# c# - foreach 还有其他的吗？

> ID：11965361
> 
> 赞同：2
> 
> 时间：2012-08-15T07:12:24.397
> 
> 标签：c#, foreach, if-statement, dbnull

我有 foreach 来显示来自 myquery 的结果，当结果不为空时它可以工作。我想知道foreach还有其他吗？当 myquery 的结果为空时采取措施？

```
var rs = from cs in db.CsCustomers
                      from ai in db.ArInvoices
                      where cs.CustomerID == ai.CustomerID &&
                      ai.Kategori != null
                      orderby cs.Unit
                      select new
                      {
                          cs.CustomerID,
                          cs.Unit,
                          cs.Name
                      };

foreach (var r in rs)
{
     c = new TableCell();
     c.Text = r.CustomerID;
     c.RowSpan = jk;
     tr.Cells.Add(c);

     c = new TableCell();
     c.Text = r.Unit;
     c.RowSpan = jk;
     tr.Cells.Add(c);

     c = new TableCell();
     c.Text = r.Name;
     c.RowSpan = jk;
     tr.Cells.Add(c);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T07:14:52.827

为什么不先检查 -

```
if(rs == null)
{}
else
{
  foreach.....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T07:16:01.307

不，它没有 else 运算符。你可以把它包在一个`if else`

```
var rs = from cs in db.CsCustomers
                      from ai in db.ArInvoices
                      where cs.CustomerID == ai.CustomerID &&
                      ai.Kategori != null
                      orderby cs.Unit
                      select new
                      {
                          cs.CustomerID,
                          cs.Unit,
                          cs.Name
                      };
if(rs != null && rs.Any()) //for the .Count you have to add using System.Linq;
     foreach (var r in rs)
     {
          c = new TableCell();
          c.Text = r.CustomerID;
          c.RowSpan = jk;
          tr.Cells.Add(c);

          c = new TableCell();
          c.Text = r.Unit;
          c.RowSpan = jk;
          tr.Cells.Add(c);

          c = new TableCell();
          c.Text = r.Name;
          c.RowSpan = jk;
          tr.Cells.Add(c);
     }
}else{
     //the else part 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T08:04:04.113

也许你会需要这个。无论如何，如果您经常需要空列表的默认行为，您可以创建下一个扩展方法。

```
void Main()
{
    var elements = Enumerable.Range(0,20);
    elements.ForEachWithElse(x=>Console.WriteLine (x),
                            ()=>Console.WriteLine ("no elements at all"));

    elements.Take(0).ForEachWithElse(x=>Console.WriteLine (x),
                            ()=>Console.WriteLine ("no elements at all"));
}

public static class MyExtensions
{    
    public static void ForEachWithDefault<T>(this IEnumerable<T> values, Action<T> function, Action emptyBehaviour)
    {
        if(values.Any())
            values.ToList().ForEach(function);
        else 
            emptyBehaviour();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T07:15:49.437

不，没有 foreach-else 循环...如果您需要该功能，请使用不同类型的循环（for-loop 或 do-while-loop）或先测试元素的数量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T07:17:44.933

[这是一篇](http://www-jo.se/f.pfleger/.net-for-else)关于如何实现某些东西的文章。

> 这是您每天在 IEnumerable 上进行的常规 foreach，但允许您指定“循环动作”和“其他动作”，后者在循环之后执行，除非您通过从前者返回 false 来中断循环。它比 Python 有点笨拙，但仍然有用

相反，您可以做的是通过`if`测试检查它是否为空/空，然后在该`else`部分中执行某些操作。但是，在做 DB 的事情时，最好在没有结果时返回一个空列表，而不是返回 null。

# php - 撇号验证

> ID：11965367
> 
> 赞同：-4
> 
> 时间：2012-08-15T07:13:03.110
> 
> 标签：php, javascript, jquery

我正在实现一个 Web 应用程序。在这里，我正在努力进行表单验证。我只想知道如何允许用户使用 jQuery 表单验证方法在文本字段中键入字母、数字和撇号字符。带着这个问题，我放了一个我已经实现的验证的示例代码。

```
jQuery.validator.addMethod("business_name", function(value, element) {
    return this.optional(element) || /^[a-zA-Z0-9\']+$/i.test(jQuery.trim(value));
}, ""); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T10:53:58.557

很简单，你需要通过

```
^[a-zA-Z0-9!\']+$ 
```

作为正则表达式，它将解决您的问题

# python - EDP python山狮升级导致sklearn模块丢失

> ID：11965372
> 
> 赞同：1
> 
> 时间：2012-08-15T07:13:29.750
> 
> 标签：python, upgrade, osx-mountain-lion, enthought

从狮子升级到山狮后，我的 Enthought Python Distribution EDP FREE 32 bits 附带的 sklearn 模块丢失了。

```
$ python ASAP_bag_of_words_benchmark_3.py 
Traceback (most recent call last): File "ASAP_bag_of_words_benchmark_3.py", line 4, 
in <module> import features
File "/Users/joseberengueres/Documents/3 - kaggle/ASAP2/Benchmarks/features.py", 
line 14, in <module>
import length_benchmark
File "/Users/joseberengueres/Documents/3 - kaggle/ASAP2/Benchmarks/length_benchmark.py",
line 5, in <module>
from sklearn.ensemble import RandomForestRegressor
ImportError: No module named sklearn.ensemble 
```

我相信一定有一些快速的工作。由于类似的原因，EDP 附带的其他演示停止工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:45:18.710

升级到10.8后就可以了，可以重试。

1.  删除旧的并重新安装。
2.  导出路径并使用epd的python执行文件。

# sql - cakephp 数组和 find 语句

> ID：11965374
> 
> 赞同：0
> 
> 时间：2012-08-15T07:13:37.727
> 
> 标签：sql, cakephp, find

我有两个 find 语句，需要一个 find 语句的结果在第二个 find 语句中使用，但是我尝试使用的两种方法都返回错误

这是第一个 find 语句，它列出了 sender_id 的

```
$sender=$this->Invoice->Find('list', array('fields'=>('sender_id'))); 
```

这是第二个 find 语句，它采用`sender_id`'s 列表并返回相应的`company_name`

```
$senderName=$this->Account->Find('all', array(
        'conditions' => array(
        $sender=>'account.id'))); 
```

这会返回正确的信息，但会返回此错误`Warning (2): Illegal offset type [APP\Controller\InvoicesController.php, line 185]`

所以我试着这样做

```
$senderName=$this->Account->Find('all', array(
        'conditions' => array(
        'id'=>$sender['Invoice']['sender_id']))); 
```

并在发票上获得未定义的索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:25:18.747

```
$senderName=$this->Account->Find('all', array(
        'conditions' => array(
            'Account.id' => array_values($sender),
        ),
)); 
```

键是字段，值是值。

# c# - VirtualizingStackPanel 和 TextWrapping 错误？视窗电话

> ID：11965378
> 
> 赞同：10
> 
> 时间：2012-08-15T07:13:45.747
> 
> 标签：c#, silverlight, windows-phone-7, xaml, virtualizingstackpanel

我有一个奇怪的行为`VirtualizingStackPanel`。我有一个包含`TextBlock`with的项目列表`TextWrap="Wrap"`。这是代码：

```
<ListBox x:Name="messagesList" ItemsSource="{Binding Messages}" >
    <ListBox.ItemContainerStyle>
        <Style TargetType="ListBoxItem">
            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        </Style>
    </ListBox.ItemContainerStyle>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <toolkit:ContextMenuService.ContextMenu>
                    <toolkit:ContextMenu>
                    ...
                    </toolkit:ContextMenu>
                </toolkit:ContextMenuService.ContextMenu>
                <CheckBox Style="{Binding Own, Converter={StaticResource MsgTypeToStyle}}"
                          Tag="{Binding TimeString}"
                          IsEnabled="True">
                    <TextBlock Text="{Binding Content}" TextWrapping="Wrap"/>
                </CheckBox>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

它工作得很好，但是如果我尝试非常快地滚动（在模拟器上使用鼠标，而不是使用鼠标）滚动会有一些滞后，`HorizontallOffset`有时可能计算错误，并且在底部以非常奇怪的结果结束（见图，右图演示正常行为）。

![滚动错误](../Images/90f1178b9311f42070ad6b4c7af8b537.png)

经过研究，我发现了这个问题`VirtualizingStackPanel`，`TextBlock.TextWrap="Wrap"`如果我从这对夫妇中删除一个元素，所有的工作都正常。

但是我需要虚拟化，因为项目数量很大，并且`TextWrap`要正确显示文本。

所以我想自己实现虚拟化面板，请你指导我，如何做到这一点，或者如何解决当前的问题？

**UPD：问题：
前两个图像`ListBox`已经（！）滚动到底部（不能再向下滚动），但元素放置不正确，正确放置显示在右侧图像上。仅当您滚动非常快时才会发生这种情况。**

**UPD2：感谢米兰阿加瓦尔。[他在这里](http://blog.rsuter.com/?p=258)为我的问题提供了一个很好的案例。看来这确实是`ListBox`. 提供的解决方法不适合我的场景，因为我需要与`ListBox`item 内部的控件进行交互。现在我正在尝试捕获`ManipulationCompleted`事件并检查它是否是`Inertial`，如果是，则意味着滚动，我将焦点设置为页面：**

```
 void messagesList_ManipulationCompleted(object sender, ManipulationCompletedEventArgs e)
    {
        if (e.IsInertial)
            this.Focus();
    } 
```

PS感谢祝你好运；）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T13:06:41.317

为了克服滚动时出现的黑色，您需要虚拟化滚动控件。为此，您应该继承`IList`并创建`Collection`自己的类似`ObservableCollection`内容，您必须根据缓存要求覆盖默认索引器，同时为您的项目维护缓存。我觉得这可能是您正在寻找的：http: [//blogs.msdn.com/b/ptorr/archive/2010/08/16/virtualizing-data-in-windows-phone-7-silverlight-applications.aspx](http://blogs.msdn.com/b/ptorr/archive/2010/08/16/virtualizing-data-in-windows-phone-7-silverlight-applications.aspx)

该页面上有一个示例项目。试试看。

我也觉得你正面临这个问题[http://blog.rsuter.com/?p=258](http://blog.rsuter.com/?p=258)。我想这将使用虚拟化本身来解决。希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T09:08:25.990

第二屏有什么问题？你的意思是最后一条消息后有很大的空白空间？最后一条消息没有放在页面底部？我做对了吗？

实际上我并没有尝试重现您的代码和错误，但我的观点是，既然您在应用程序中使用了 3rd 方库（Silverlight Toolkit），为什么不也使用**[Coding4Fun 工具](http://coding4fun.codeplex.com/)**呢？

我写了这个虚拟类：

```
public class Message
{
    public string Time { get; private set; }
    public string Content { get; private set; }

    public Message(string time, string content)
    {
        Time = time;
        Content = content;
    }
} 
```

然后我把这个虚拟代码放在主页构造函数中：

```
var _messages = new ObservableCollection<Message>();

for (int i = 0; i < 50; i++)
{
    _messages.Add(new Message("12:40", "Teh very long string which should be wrapped. Pavel Durov gives WP7 Contest winners less money than he did for Android/iOS winners. FFFUUUUUUUUUUUUUU "));
}

this.ListBox.ItemsSource = _messages; 
```

在 xaml 中，我放置了一个带有工具包聊天气泡控制的列表框：

```
<ListBox x:Name="ListBox">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <c4fToolkit:ChatBubble>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <TextBlock Grid.Row="0"
                               Text="{Binding Content}"
                               TextWrapping="Wrap"/>
                    <TextBlock Grid.Row="1"
                               Text="{Binding Time}"
                               HorizontalAlignment="Right"/>
                </Grid>
            </c4fToolkit:ChatBubble>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

我运行它并没有看到任何奇怪的行为，也许有点滞后。结果是：

![dat图片很大](../Images/a955bb449f8587cb739733d76f1c9008.png)

希望我能帮上忙。

* * *

Удачи с конкурсом, я б сам поучаствовал, но не верю, что за 1,5 месяца удастся сделать приличный клиент。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T13:32:30.583

第二张图有什么问题？是 BlackArea 完全出现了，还是 ScrollView 在滚动结束后没有“反弹”以填充黑色区域的内容？

了解这一点至关重要，因为......这种效果对于 WPF/WP7 来说是很自然的......顺便说一句。滚动条在过度滚动后应该“反弹”，但它似乎有一个错误，有时会忘记这样做。

我之所以问，是因为黑/白区域不仅在 WP7 上，而且在任何有带有惯性滚动的 XAMLish ScrollViewer 的地方。您会看到，当滚动速度快于平台提供新项目时，您只需滚动到预先计算的项目之外，一旦您“过度”滚动很远，缓慢进入的项目突然发现没有更多项目，因此 -回空区..

这主要发生在某些情况同时发生时：您快速滚动（耶），您的绑定很慢（过于复杂的表达式），您的模板渲染很慢（复杂的不可重用的 UI 模板），绑定不知道有多少项目有（必然`IEnumerable`没有`IList`-> 没有 .Count 信息！），或者渲染器不知道要为一个项目保留多少高度（该项目不是恒定高度，但必须计算每个项目以确定其自己的确切高度）。

如果你想纠正它，你必须首先解决这些原因，或者你必须实现自己的滚动或侵入虚拟化堆栈面板并将来自 bindingsource 的项目的馈送与滚动同步，以让滚动条更好地猜测总高度：例如，一次只显示一个小项目，监听滚动事件并从列表的头部/尾部动态添加/删除下一包项目。这将通过不允许快速滚动来解决问题:)))))

我相信限制项目高度是最简单的方法。你不能做一些聪明的事情来让这些物品实际上是恒定大小的吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T21:49:00.580

我建议您创建最简单的函数来计算包装文本块的高度并绑定到它。这样，您可以在列表框中获得可变高度项目的好处，但可以继续使用虚拟化堆栈面板。

# spotify - libspotify 和本地 MP3 文件

> ID：11965386
> 
> 赞同：2
> 
> 时间：2012-08-15T07:14:06.713
> 
> 标签：spotify, cocoalibspotify-2.0

使用 Spotify 的桌面版本，可以将本地 MP3 文件添加到播放列表并播放它们。这也可以使用 libspotify 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T07:47:50.457

并非如此 - libSpotify 只能解码 Spotify 自己的服务提供的音频。如果要实现本地文件的播放，就得自己动手了。但是，一旦播放完毕，您就可以集成 Spotify 的本地文件列表。

默认情况下，Spotify 客户端中的本地文件不会添加到用户的帐户中 - 您无法从其他地方访问该列表（我们自己的客户端也是如此 - 如果您将本地文件添加到在计算机 A 上运行的客户端，计算机B 的本地文件列表将为空）。

但是，只要用户为本地曲目加注星标或将其添加到播放列表，*就*可以从任何地方访问。

本地文件具有不同的 URI，例如：( `spotify:local:Coldplay:Mylo+Xyloto:Paradise:277`) `spotify:local:ARTIST:ALBUM:TRACK:LENGTH_IN_SECONDS`。如果您遇到具有此类 URI 的曲目，请搜索已知的本地文件以找到与给定数据匹配的曲目，如果存在则播放。

[Viva](https://github.com/iKenndac/Viva)是一个用于 Mac OS X 的开源桌面客户端，它实现了本地文件。根据您的用例，它可能是一个很好的参考。

# java - Hibernate 看不到映射 xml 文件

> ID：11965397
> 
> 赞同：0
> 
> 时间：2012-08-15T07:15:17.200
> 
> 标签：java, hibernate

我是休眠的新手，并尝试在数据库中写入数据。我的代码

`hibernate.cfg.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
    "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
<session-factory name="postsess">
    <property name="hibernate.connection.driver_class">org.postgresql.Driver</property>
    <property name="hibernate.connection.password">123456</property>
    <property name="hibernate.connection.url">jdbc:postgresql://localhost:5432/postgis</property>
    <property name="hibernate.connection.username">postgres</property>
    <property name="hibernate.default_schema">public</property>
    <property name="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</property>
            <!-- Mapping files -->
    <mapping resource="net.sf.hibernate.examples.quickstart.Cat.hbm.xml"/>
</session-factory>
</hibernate-configuration> 
```

`HibernateUtin`

```
package net.sf.hibernate.examples.quickstart;

 import org.hibernate.HibernateException;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;

import net.sf.hibernate.*;
//import net.sf.hibernate.examples.quickstart.hibernate.cfg.xml;

public class HibernateUtil {

private static final SessionFactory sessionFactory;

static {
    try {
        // Create the SessionFactory
        sessionFactory = new Configuration().configure().buildSessionFactory();
    } catch (HibernateException ex) {
        throw new RuntimeException("Configuration problem: " + ex.getMessage(), ex);
    }
}

public static final ThreadLocal session = new ThreadLocal();

public static Session currentSession() throws HibernateException {
    Session s = (Session) session.get();
    // Open a new Session, if this Thread has none yet
    if (s == null) {
        s = sessionFactory.openSession();
        session.set(s);
    }
    return s;
}

public static void closeSession() throws HibernateException {
    Session s = (Session) session.get();
    session.set(null);
    if (s != null)
        s.close();
}
} 
```

并获得例外

```
log4j:WARN No appenders could be found for logger (org.hibernate.cfg.Environment).
log4j:WARN Please initialize the log4j system properly.
Exception in thread "main" java.lang.ExceptionInInitializerError
at net.sf.hibernate.examples.quickstart.hib_main.main(hib_main.java:14)
Caused by: java.lang.RuntimeException: Configuration problem: Resource: net.sf.hibernate.examples.quickstart.Cat.hbm.xml not found
at net.sf.hibernate.examples.quickstart.HibernateUtil.<clinit>  (HibernateUtil.java:20)
... 1 more
 Caused by: org.hibernate.MappingException: Resource: net.sf.hibernate.examples.quickstart.Cat.hbm.xml not found
at org.hibernate.cfg.Configuration.addResource(Configuration.java:444)
at org.hibernate.cfg.Configuration.parseMappingElement(Configuration.java:1313)
at org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:1285)
at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1267)
at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1234)
at org.hibernate.cfg.Configuration.configure(Configuration.java:1162)
at org.hibernate.cfg.Configuration.configure(Configuration.java:1148)
at net.sf.hibernate.examples.quickstart.HibernateUtil.<clinit>(HibernateUtil.java:18)
... 1 more 
```

我做错了什么。它再次尝试执行简单的示例并再次执行相同的异常。

**更新**

在更改映射文件的路径后，`hibernate.cfg.xml`我得到了另一个例外`session.save(princess);`

```
 log4j:WARN No appenders could be found for logger (org.hibernate.cfg.Environment).
log4j:WARN Please initialize the log4j system properly.
Exception in thread "main" org.hibernate.id.IdentifierGenerationException: ids for  this class must be manually assigned before calling save(): net.sf.hibernate.examples.quickstart.Cat
at org.hibernate.id.Assigned.generate(Assigned.java:32)
at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:85)
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:184)
at org.hibernate.event.def.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:33)
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:173)
at org.hibernate.event.def.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:27)
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:69)
at org.hibernate.impl.SessionImpl.save(SessionImpl.java:477)
at org.hibernate.impl.SessionImpl.save(SessionImpl.java:472)
at net.sf.hibernate.examples.quickstart.hib_main.main(hib_main.java:23) 
```

`Cat.hbm.xml`

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 15.08.2012 12:46:22 by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
<class name="net.sf.hibernate.examples.quickstart.Cat" table="CAT">
    <id name="id" type="java.lang.String">
        <column name="cat_id" />
        <generator class="assigned" />
    </id>
    <property name="name" type="java.lang.String">
        <column name="name" />
    </property>
    <property name="sex" type="char">
        <column name="sex" />
    </property>
    <property name="weight" type="float">
        <column name="weight" />
    </property>
</class>
</hibernate-mapping> 
```

和主课。

```
package net.sf.hibernate.examples.quickstart;

import org.hibernate.Session;
import org.hibernate.Transaction;

public class hib_main
{

/**
 * @param args
 */
public static void main(String[] args)
{
    Session session = HibernateUtil.currentSession();

    Transaction tx= session.beginTransaction();

    Cat princess = new Cat();
    princess.setName("Princess");
    princess.setSex('F');
    princess.setWeight(7.4f);

    session.save(princess);
    tx.commit();

    HibernateUtil.closeSession();

}

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T07:32:44.193

尝试以这种方式定义映射资源（使用“/”而不是“.”）：

```
<mapping resource="net/sf/hibernate/examples/quickstart/Cat.hbm.xml"/> 
```

我认为这是您的问题的原因。

**更新：**

关于您的第二个问题-我认为您忘记在 Cat.hbm.sql 中定义 id 生成策略。例如：

```
<id name="id" column="CREDIT_CARD_ID" type="long">
    <generator class="native"></generator>
</id> 
```

**更新 2：**

Hibernate 使用它自己的类型。所以在 id 类型的声明中，你不应该使用 java.lang.String 或 java.lang.Integer，而应该使用简单的字符串和整数。例如，如果您想使用字符串 id，您应该将其定义为：

```
<id name="id" column="cat_id" type="integer">
    <generator class="native"/>
</id> 
```

[在这里](http://www.tutorialspoint.com/hibernate/hibernate_mapping_types.htm)你可以找到hibernate的映射类型列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T07:46:47.307

你有两个hibernate.cfg.xml。所以删除一个hibernate.cfg.xml。尝试用下面的结构进行测试。资源映射对你来说并不麻烦。你只能这样声明

```
 <mapping resource="Cat.hbm.xml"/> 
```

![在此处输入图像描述](../Images/dba7cc3bafe3e6f56bcef38f6a4de292.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T07:34:40.357

您应该`/`在路径前使用：

```
<mapping resource="/net/sf/hibernate/examples/quickstart/Cat.hbm.xml"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T07:38:11.717

我会将 Cat.hbm.xml 重命名**为**Cat_hbm_xml**作为**每个 ' **。**' 指的是一个[子包](http://en.wikipedia.org/wiki/Java_package#Package_naming_conventions)。

# c++ - 内存中的 C++ 文字常量存储在哪里？

> ID：11965402
> 
> 赞同：1
> 
> 时间：2012-08-15T07:15:48.350
> 
> 标签：c++, pointers, literals

内存中的 C++ 文字常量存储在哪里？堆栈还是堆？

`int *p = &2`

是错的。我想知道为什么？谢谢

-------------------------------------------------

我的问题是“C++ 文字常量存储在内存中的位置”，“`int *p = &2`

错了”，不是我的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T07:42:46.713

细节取决于机器，但假设最常见的机器和操作系统......每个可执行文件都包含几个“段” - CODE、BSS、DATA 和其他一些。

CODE 保存所有可执行的操作码。实际上，它通常被命名为 TEXT，因为不知何故这对几十年前的人们来说是有意义的。通常它是只读的。

BSS 是未初始化的数据——它实际上不需要存在于可执行文件中，而是在程序开始运行时由操作系统的加载器分配。

DATA 保存文字常量 - int8、int16、int32 等以及浮点数、字符串文字，以及编译器和链接器想要产生的任何奇怪的东西。这就是你要问的。但是，它只包含定义为用作变量的常量，如

```
const long x = 2; 
```

但不太可能保存源代码中使用但与变量不紧密关联的文字常量。编译器直接处理一个单独的“2”。例如在 C 中，

```
print("%d", 2); 
```

将导致编译器构建对 print() 的子例程调用，编写操作码以将指针推送到字符串字面量“%d”和值 2，两者都是 64 位机器上的 64 位整数（你不是那些仍然使用 32 位硬件的落后者之一，是吗？:) 后跟操作码以跳转到子程序（'print' 子程序的标识符）。

"%d" 文字进入 DATA。2没有；它内置在将整数塞入堆栈的操作码中。这实际上可能是“加载寄存器 RAX 立即数”，然后是值 2，然后是“推送寄存器 RAX”，或者单个操作码可以完成这项工作。所以在最终的可执行文件中，2 将在 CODE（又名 TEXT）段中找到。

通常不可能创建指向该值或任何操作码的指针。就 C 之类的高级语言所做的事情而言，它只是没有意义（当您谈论操作码和段时，C 是“高级”。）“&2”只能是一个错误。

现在，拥有指向操作码的指针并非完全不可能。每当您在 C 中定义函数，或在 C++ 中定义对象方法、构造函数或析构函数时，函数的名称都可以被认为是指向从该函数编译的机器代码的第一个操作码的指针。例如，不带括号的 print() 是指向函数的指针。也许如果您的示例代码在一个函数中并且您猜到了正确的偏移量，则可以使用指针算术来指向位于操作码中的那个“立即”值 2，但这对于任何当代 CPU 来说都不容易，当然不适合初学者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:41:51.953

让我引用C++03标准的相关条款。5.3.1/2

> 一元 & 运算符的结果是指向其操作数的指针。操作数应为左值。

整数文字是一个右值（但是，我在 C++03 标准中没有找到直接引用，但 C++11 在 3.10/1 中作为旁注提到了这一点）。因此，不可能采用整数文字的地址。

存储的确切位置如何`2`，这取决于使用情况。它可能是机器指令的一部分，也可能被优化掉，例如`j=i*2`可能变成`j=i+i`. 你不应该依赖它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T09:23:11.860

你有两个问题：

文字常量存储在哪里？除了字符串文字（它们是实际的对象）之外，几乎可以在实现所需的任何地方进行。它通常取决于你对它们做什么，但在很多架构上，整数常量（通常还有一些特殊的浮点常量，比如`0.0`）最终会成为机器指令的一部分。当这不可能时，它们通常会被放置在与代码相同的逻辑段中。

至于为什么取一个右值的地址是非法的，主要是因为标准是这么说的。从历史上看，这是被禁止的，因为这样的常量通常永远不会作为单独的对象存在于内存中，因此没有地址。今天......人们可以想象其他解决方案：编译器足够聪明，如果您获取它们的地址，则可以将它们放入内存中，否则不会；并且类类型的右值*确实*有一个内存地址。这些规则有些武断（无论它们是什么）——希望任何允许获取文字地址的规则都会使其成为 type `int const*`，而不是`int*`。

# silverlight - 属性设置器中的强制值 - Silverlight 5

> ID：11965408
> 
> 赞同：6
> 
> 时间：2012-08-15T07:16:32.883
> 
> 标签：silverlight, data-binding

在下面的示例中，我们将 ViewModel 绑定到具有称为 Message 的单个属性的视图。此属性通过双向绑定绑定到 TextBox。对于这个测试，我们在 setter 中进行了一些值强制，并再次提高了属性的变化。

在 Silverlight 4 中，这非常有效。如果消息属性在属性设置器中发生更改，则文本框将看到新值。例如，在文本框中键入“A”并失去焦点将导致 Aaaaaaaaaaa 出现在值更改时。

然而，在 Silverlight 5 中，这似乎被打破/改变了。在 setter 中修改值后，getter 永远不会被命中。在两者之间添加一个 IValueConverter 表明永远不会命中 Convert/ConvertBack 方法。似乎第 4 版和第 5 版之间发生了一些根本性的变化。有什么变化吗？这是一个错误吗？

```
public class ViewModel : INotifyPropertyChanged
{
    private string _message;

    public event PropertyChangedEventHandler PropertyChanged;

    public string Message
    {
        get
        {
            return _message; 
        }
        set
        {
            _message = value;
            this.RaisePropertyChanged();

            if (_message.Length < 10)
            {
                _message = _message.PadRight(10, 'a');
                this.RaisePropertyChanged();
            }
        }
    }

    private void RaisePropertyChanged()
    {
        var handler = this.PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs("Message"));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T10:00:41.250

这个问题有几个解决方法，这似乎是 Silverlight 5 的绑定调试功能中的一个错误（请参阅@Ray Booysen 的回答）。

首先，重要的是要知道这不是生产中的问题，而是仅在调试应用程序时发生。因此，解决方法实际上只是为了在调试环境中重现生产行为（尽管禁用了一些调试功能）。

[第一个解决方法是使用Binding](http://msdn.microsoft.com/en-us/library/system.windows.data.binding%28v=vs.95%29.aspx)类中名为[IsDebuggingEnabled](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.isdebuggingenabled%28v=VS.95%29.aspx)的静态（在 VB.Net 中共享）字段禁用绑定调试。那里的文档提供了以下建议。

> 在您的应用程序类构造函数中将此字段设置为 false

**注意：**此更改不能仅限于单个绑定，而是会影响应用程序中的所有绑定。

第二个是在托管 Silverlight 应用程序的 Web 项目的项目属性中禁用 Silverlight 调试器。使用以下步骤进行此更改。

1.  在解决方案资源管理器中右键单击 Web 项目并选择属性。
2.  选择 Web 选项卡。
3.  向下滚动到调试器部分。
4.  取消选中标记为 Silverlight 的复选框。

**注意：**此更改不仅会禁用应用程序的绑定调试，还会禁用常规 Silverlight 调试。但是，可以启用其他调试器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:44:56.567

这已被 Microsoft 确认为 Silverlight 5 中的一个错误。它仅在调试模式下发生，因此适用于发布模式。

如果禁用 XAML 绑定调试，问题就消失了。

```
Binding.IsDebuggingEnabled = false; 
```

# c - createprocess 功能的艰难时期

> ID：11965413
> 
> 赞同：1
> 
> 时间：2012-08-15T07:16:53.467
> 
> 标签：c, winapi

首先，我已经在网上阅读了几天与此功能相关的所有内容，但仍然无法正确理解。我在这里使用 msdn 页面中使用的相同示例：

[http://msdn.microsoft.com/en-us/library/ms682512(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms682512(VS.85).aspx)

我的代码：

```
#include <windows.h>
#include <stdio.h>
#include <tchar.h>

void _tmain( int argc, TCHAR *argv[] )
{
    STARTUPINFO si;
    PROCESS_INFORMATION pi;

    SecureZeroMemory( &si, sizeof(si) );
    si.cb = sizeof(si);
    SecureZeroMemory( &pi, sizeof(pi) );

    if( argc != 2 )
    {
        printf("Usage: %s [cmdline]\n", argv[0]);
        return;
    }

    // Start the child process. 
    if( !CreateProcess( NULL,   // No module name (use command line)
        "C:\\Users\\user\\Desktop\\FreeCell.lnk",        // Command line
        NULL,           // Process handle not inheritable
        NULL,           // Thread handle not inheritable
        FALSE,          // Set handle inheritance to FALSE
        0,              // No creation flags
        NULL,           // Use parent's environment block
        NULL,           // Use parent's starting directory 
        &si,            // Pointer to STARTUPINFO structure
        &pi )           // Pointer to PROCESS_INFORMATION structure
    ) 
    {
        printf( "CreateProcess failed (%d).\n", GetLastError() );
        return;
    }

    // Wait until child process exits.
    WaitForSingleObject( pi.hProcess, INFINITE );

    // Close process and thread handles. 
    CloseHandle( pi.hProcess );
    CloseHandle( pi.hThread );
} 
```

如您所见，我只更改了目录部分。当我运行它不会给出任何错误，但它也无法正常工作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T07:21:09.643

CreateProcess 只能启动可执行程序。对于 .lnk 文件，您需要 shell 的帮助。使用带有“open”动词的[ShellExecuteEx() 。](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762154%28v=vs.85%29.aspx)

# xml-parsing - XML 序列化 VS XML 解析

> ID：11965419
> 
> 赞同：10
> 
> 时间：2012-08-15T07:17:33.717
> 
> 标签：xml-parsing, xml-serialization

XML序列化和XML解析有什么区别？我们什么时候应该使用每一个？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-17T15:38:10.180

一般来说，解析是将输入流处理成有意义的数据结构；在 XML 上下文中，解析是将符合 XML 规范的语法和其他约束的字符序列读取为程序使用的任何 XML 内部表示的过程。

序列化是相反的过程：处理程序的内部数据结构（在此上下文中，您的 XML 文档的内部表示）并创建符合尖括号语法的字符序列（通常写入输出流）规格。

使用解析器将 XML 从字符流中读取到数据结构中；使用序列化程序将数据结构写入字符流。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-25T00:04:43.667

我对 XML 了解不多，但这里是我对序列化和解析的了解。

解析 - 从存储读取数据（解析入），并将数据（解析出）写入存储…… *“例如文本文件”*

序列化-（序列化）将数据转换为可读格式，并（反序列化）将该格式转换回数据...... *“即您希望将结构转换为可读内容，通过网络流式传输该内容，并将其转换回代码。”*

这是一个新的……</p>

编组 - （编组和解组）类似于序列化，除了编组用于将数据转换为不同的格式...... *“即你想将字节流转换为 32 位结构（一个字节到四个字节）”*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-29T13:52:55.790

# 简单来说（对于初学者）

## TL;博士

XML 解析（或 XML 反序列化）==>**输入**：有效 XML，**输出**：数据结构

XML 序列化 ==>**输入**：数据结构，**输出**：有效 XML

## XML 解析（又名 XML 反序列化）

您将**.xml 文件**(example.xml) 作为**输入**，以使用您选择的编程语言对其进行处理，以便您的程序可以对该文件中的数据执行一些有用的操作。您的程序会将文件中的信息转换为您的编程语言可以处理的数据结构（即列表、数组、对象等）。

## XML 序列化

您的程序（使用任何编程语言）将表示为数据结构（列表、数组、对象等）的信息转换为有效的 XML**输出**，该输出可以保存到文件中或传输到另一个程序。

注意：从技术上讲，输入（当我们讨论解析时）和输出（当我们讨论序列化时）不一定是文件。正如上面更专业的答案所述，它也可以是任何输入/输出流。并且文件不必具有 .xml 扩展名，它们可以具有代表有效 XML 格式的任何文件扩展名（即 .svg 也是基于 XML 的格式）。理解的关键是，当我们进行**XML 解析时，****输入**端有**有效的 XML**，输出端有数据结构，而当我们进行**XML 序列化**时，输入端有数据结构，输出端有有效**的****XML**。

 ******举一个 Python 世界的例子：您可以使用内置包（如[xml.etree.ElementTree](https://docs.python.org/3/library/xml.etree.elementtree.html)）或第三方库（如[lxml](https://github.com/lxml/lxml)（推荐）或[xmltodict](https://github.com/martinblech/xmltodict)）来做这两者 - 解析（反序列化）或创建（序列化）XML数据.******

# c# - 使用 jquery ajax 上传文件

> ID：11965422
> 
> 赞同：1
> 
> 时间：2012-08-15T07:17:38.660
> 
> 标签：c#, json, jquery, generic-handler

我想上传一张带有如下描述的图片：

```
data = '{"filename":"' + myfilename + '", "file":"' + file + '", "description":"' +
    description + '"}';

$.ajax({
    type: "POST",
    url: "filehandler.ashx",
    data: data,
    success: function (result) {
        alert(result);
    },
    error: function () {
        alert("There was error uploading file!");
    }
}); 
```

我该怎么做？我无法像`HttpPostedFile`在通用处理程序中那样读取文件。 `context.Request.Form`也没有任何钥匙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T10:31:54.153

对不起，如果我没有完全发布我所做的事情。无论如何，我让它工作。

```
var data = new FormData();

data.append("name", filename);
data.append("file", file); 
```

在通用处理程序中

```
HttpPostedFile file = context.Request.Files["file"];
string fileName = context.Request.Form["filename"]; 
```

[使用 FormData 对象](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T08:35:37.593

您不能使用 ajax 发布文件，您必须将其发布在 iframe 中才能获得相同的结果

这就是我所做的

```
var form = "#myform";
var url = "http://post.it/";
var iframeName = 'iframePost' + (new Date()).getTime(); 
$('<iframe id="'+iframeName+'" name="' + iframeName + '" style="display:none;"/>').appendTo('body');
$(form).attr('target',iframeName)
    .attr('action',url)
    .attr('enctype','multipart/form-data')
    .append('<input type="hidden" name="_iframe" value="' + iframeName + '" />');
    form.submit(); 
```

有一个回调让 iframe 返回一个类似的脚本

```
window.parent.callBack(data); 
```

# c# - 使用 Agility 进行 Html 解析

> ID：11965428
> 
> 赞同：0
> 
> 时间：2012-08-15T07:18:14.597
> 
> 标签：c#, html, parsing

有人可以帮助解决在 C# 中通过 Agility 解析 Html 的顺序标签的问题吗？我有 2 个问题，如下所示。

在这种情况下，我想解析 Html 并将它们存储到一个结构（列表、堆栈等）中，以便我可以有效地使用这些数据。

```
<h3> header </h3>
<p> paragraph 1</p>
<p>
<a href="www.google.com">Google</a>
<a href="www.gizmodo.com">Gizmodo</a>
</p>
<ul> 
<li> something is here with a download
<a href="www.google.com">link</a>
</li>
<li> hello 
<img src="www.imagesource.com"/>
</li>
</ul> 
```

1.  如何按顺序解析这些数据？

    如果我使用`var ParaTags = HtmlDocument.DocumentNode.Descendants("p");`，那么我只能获得所有“p”标签。但我不知道如何依次获得“h3”和“p”，因为“p”不在“h3”内。

以下代码将返回所有超链接，

```
var links =
    from paras in document.DocumentNode.Descendants("p")
    from hyperLinks in paras.Descendants("a").Where(x => x.Attributes["href"].Value != "")
    select hyperLinks; 
```

1.  用字符串、超链接和图像解析和存储这些混合内容的最佳方法是什么？所以我可以稍后以有效的方式输出它们？列表，堆栈？换句话说，我想从 html 中存储所有可能的内容，并尽可能保留其格式。因此，一旦我将内容重新加载到应用程序上，我就可以以正确的格式模拟内容。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T07:29:19.957

如果你想提取所有`href`和`src`属性，你可以试试这个：

```
using System;
using System.Linq;
using HtmlAgilityPack;

public class Program
{
    static void Main()
    {
        var document = new HtmlDocument();
        document.Load("test.html");
        var links =
            from element in document.DocumentNode.Descendants()
            let href = element.Attributes["href"]
            let src = element.Attributes["src"]
            where href != null || src != null
            select href != null ? href.Value : src.Value;

        foreach (var link in links)
        {
            Console.WriteLine(link);
        }
    }
} 
```

输出：

```
www.google.com
www.gizmodo.com
www.google.com
www.imagesource.com 
```

# java - 如何在 Android 的网格视图中仅列出不包括小部件和服务的应用程序？

> ID：11965431
> 
> 赞同：-1
> 
> 时间：2012-08-15T07:18:31.460
> 
> 标签：java, android

我能够使用[该页面上](http://xjaphx.wordpress.com/2011/06/12/create-application-launcher-as-a-list/)提到的代码列出所有应用程序。

我想过滤它并仅列出网格视图中安装的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:08:08.090

你的概念有点错误。

小部件和服务是应用程序的一部分，就像活动一样。某些活动旨在显示在启动器中，即当您使用意图过滤器 MAIN 和 DEFAULT 在清单上声明它们时。

您可能想要的是获得声明此类意图过滤器的活动。如何做到这一点是在您提供的链接的实用程序类中。

# java - 参数化 h:commandButton

> ID：11965432
> 
> 赞同：2
> 
> 时间：2012-08-15T07:18:33.787
> 
> 标签：java, jsf, internationalization

我正在使用 JSF，我想参数化命令按钮的文本，类似于`h:outputFormat`.

就像是

```
<h:commandButton value="Text {0} some more text" [...] > 
```

此刻我在

```
<h:commandButton value="Text #{bean.value()} some more text" [...] > 
```

但这使我每次有参数时都将存储为属性的所有文本一分为二

```
<h:commandButton value="#{msg.textbefore} #{bean.value()} #{msg.textafter}" [...] > 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:22:16.987

我们使用 JSF 1.2 并在我们自己的自定义中定义了一个方法`taglib`。

```
<h:commandButton value="#{g:formatMessage('Text {0} some more text', bean.value)}" > 
```

`g:`我们定义的名称空间在哪里。

```
xmlns:g="http://www.client.com/product" 
```

taglib 注册在`web.xml`

```
<context-param>
    <param-name>facelets.LIBRARIES</param-name>
    <param-value>
        PATH_TO_CUSTOM_TAGLIB;/WEB-INF/tomahawk.taglib.xml;
    </param-value>
</context-param> 
```

并且该方法在 taglib 中定义为：

```
<function>
    <function-name>formatMessage</function-name>
    <function-class>com.XXX.XXX.XXX.JavaClass</function-class>
    <function-signature>java.lang.String formatMessage(java.lang.String, java.lang.String)</function-signature>
</function> 
```

# html - bash：使 cgi 脚本不打开新页面

> ID：11965440
> 
> 赞同：0
> 
> 时间：2012-08-15T07:19:41.993
> 
> 标签：html, bash, cgi

初始化 cgi 脚本时有没有办法留在现有页面上？脚本是使用 bash 编写的。页面本身非常大，只能呼应他的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:22:36.580

如果我理解正确，您想从 wbe 页面运行服务器端 CGI 脚本而不重新加载页面？您可以使用 AJAX 执行此操作 - 您将编写一些 JavaScript 来调用服务器端脚本，这不需要在浏览器中加载新页面。

像[这样](http://www.w3schools.com/ajax/tryit.asp?filename=tryajax_first)的事情应该这样做

# ruby-on-rails - 更快的保存方法？

> ID：11965444
> 
> 赞同：3
> 
> 时间：2012-08-15T07:20:22.490
> 
> 标签：ruby-on-rails, ruby, performance, activerecord

我必须在我的数据库中转换 ~ 1.300.000 条记录。你知道比这更快的方法吗？

```
Article.find_each(&:save) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T07:29:00.060

如果您要更新表中的单个字段，可以`update_all`在 ActiveRecord 模型上使用。

```
Post.update_all(:published=>true)
# UPDATE "posts" SET "published" = 't' 
```

这也适用于 ActiveRecord 范围。

```
Post.where(:published=>true).update_all(:published=>false) 
# SQL (3.3ms)  UPDATE "posts" SET "published" = 'f' WHERE "posts"."published" = 't' 
```

通过使用它，您可以使用条件语句（例如`where`）来挑选表中的常见行并对其执行`update_all`。这是假设您想在保存记录之前进行某种形式的属性更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T07:31:40.073

您可以批量增加记录数（默认为 1000），这个数字取决于您的服务器中有多少内存：

```
Article.find_each(:batch_size => 5000) { |r| r.save } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T07:30:01.457

如果您正在创建，则需要使用像[activerecord-import](https://github.com/zdennis/activerecord-import)这样的 gem 批量插入。如果您正在更新，只需使用[update_all](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-update_all)。

# c#-4.0 - 通过 DI 和 Unity 进行层分离会破坏 N-Tier 中的层分离

> ID：11965448
> 
> 赞同：1
> 
> 时间：2012-08-15T07:20:37.943
> 
> 标签：c#-4.0, architecture, dependency-injection, unity-container, n-tier-architecture

这是一个新手问题，我正在使用 DI 通过配置在运行时解析接口对象。

```
<unity>
  <containers>
    <container>
      <types>
        <type
          type="BusinessLayer.IBAL, BusinessLayer, Version=1.0.0.0, Culture=neutral"
          mapTo="BusinessLayer.BAL, BusinessLayer, Version=1.0.0.0, Culture=neutral" />
        <type
          type="DataAccessLayer.IDAL, DataAccessLayer"
          mapTo="DataAccessLayer.DAL, DataAccessLayer, Version=1.0.0.0, Culture=neutral" />
        <type
          type="DataAccessLayer.IDbContext, DataAccessLayer, Version=1.0.0.0, Culture=neutral"
          mapTo="DataAccessLayer.DbContext, DataAccessLayer, Version=1.0.0.0, Culture=neutral" />
      </types>
    </container>
  </containers>
</unity> 
```

这里在上面的配置是在 UI 层 web.config 中。

在 UI 层 web.config 中指定要创建的 DAL 实例是否违反层分离概念？

既然所有的层都应该是独立的......如果在UI层web.config中提到了DAL，BAL依赖关系会不会违反分离原则？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T07:53:30.947

您需要在某处引导您的容器。在某个地方通常是主要网络项目的网络应用程序中。如果您使用的是 n 层架构，那么您（希望）不是直接从 UI 中使用 DAL 类，而是从 BL 类中使用。

简单地在 web.config 中引用您的 DAL 类并不违反分层架构。

您可能想阅读这篇关于[Composition Roots 概念的](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)文章以获得进一步的解释。

# php - Onmouseover 数据保持自动刷新

> ID：11965449
> 
> 赞同：0
> 
> 时间：2012-08-15T07:20:40.027
> 
> 标签：php, javascript, jquery

我在下面有这样的代码：

```
$(document).ready(function() {
    $("#content2").load("post_rf.php");
    // set your initial interval to kick it off
    var refreshInterval = setInterval(function() {
        $("#content2").load('post_rf.php?randval='+ Math.random());
    }, 1500);
    // bind an event to mouseout of your DIV to kickstart the interval again
    $("#content2").bind("mouseout", function() {
        refreshInterval = setInterval(function() {
            $("#content2").load('post_rf.php?randval='+ Math.random());
        }, 1500);
    });
    // clear the interval on mouseover of your DIV to stop the refresh
    $("#content2").bind("mouseover", function() {
        clearInterval(refreshInterval);
    });
    $.ajaxSetup({
        cache: false
    });
}); 
```

我想做的是什么时候`mouseover`，数据保持自动刷新。在这种情况下，如果我将鼠标拖到 的区域`mouseover`，它会停止自动刷新，直到我拖出`mouseout`的区域`mouseover`。

那么是否可以设置`onmouseover`，数据将保持自动刷新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:37:31.780

我认为你想要的是相反的方式，

```
 $("#content2").bind("mouseover", function() {
        refreshInterval = setInterval(function() {
            $("#content2").load('post_rf.php?randval='+ Math.random());
        }, 1500);
    });
    // clear the interval on mouseover of your DIV to stop the refresh
    $("#content2").bind("mouseout", function() {
        clearInterval(refreshInterval);
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:37:58.370

我对你的问题有点困惑，下面的代码负责在你停止自动刷新时`mouseover`

```
$("#content2").bind("mouseover", function() {
    clearInterval(refreshInterval); // it's clearing the setInterval
}); 
```

如果您只是删除/禁用该行或整个功能，那么当您在该元素上移动鼠标时它不会停止自动刷新。

但是，如果您只想发生自动刷新，`mouseover`并且再次想要停止自动刷新，`mouseout`那么您可以执行以下操作

```
$("#content2").bind("mouseover", function() {
    refreshInterval = setInterval(function() {
        $("#content2").load('post_rf.php?randval='+ Math.random());
    }, 1500);
});

$("#content2").bind("mouseout", function() {
    clearInterval(refreshInterval);
}); 
```

并且最初不应使用以下代码启动自动刷新，只需禁用代码如下

```
/*
var refreshInterval = setInterval(function() {
    $("#content2").load('post_rf.php?randval='+ Math.random());
}, 1500);
*/ 
```

但是您可以将声明的变量保留为`var refreshInterval=0;`

# jquery - jQuery Masonry 在 IE 中不起作用，但在 chrome 和 mozilla 中可以正常工作

> ID：11965450
> 
> 赞同：0
> 
> 时间：2012-08-15T07:20:47.390
> 
> 标签：jquery

也许 jQuery Masonry 在 IE6-9 中不起作用。任何 DIV 或标签都不会显示在页面中。Pages 至少在最新的 Chrome 和 Mozilla 浏览器中运行良好。

IE 浏览器显示：“错误：页面上未找到 ID 为“包装器”的 DIV。”

即使是在那里成立！

你可以看到我的页面： http: [//www.downrigger.pages.fi/](http://www.downrigger.pages.fi/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:31:38.673

让 jQuery 在 IE 中工作应该没有问题（即使在旧版本中它可能会更慢）。

根据我在 Firefox 中遇到的错误，您的页面不应该在任何浏览器中运行。

我可以从您提供的链接中看到，找不到您的 jQuery Masonry 插件的路径：

```
<script src="/path/to/jquery.masonry.min.js"></script> 
```

# mysql - 如何找到超过 2 个用户的匹配时间间隔

> ID：11965455
> 
> 赞同：5
> 
> 时间：2012-08-15T07:21:10.123
> 
> 标签：mysql, computational-geometry

从不同用户的给定时间间隔中找到最合适的时间。

```
Rows: 5
fid  userid  FromDateTime           ToDateTime          flag
62   1   2012-07-18 01:48:20    2012-07-18 02:55:20     1
63   1   2012-07-18 10:30:46    2012-07-18 12:54:46     1
64   1   2012-07-18 18:50:24    2012-07-18 20:35:24     1
67   1   2012-07-18 15:03:36    2012-07-18 16:03:36     1
68   2   2012-07-18 21:10:47    2012-07-18 23:10:47     1 
```

上表显示了不同用户可用的不同空闲时间段，例如：

`user1`是免费的

```
2012-07-18 01:48:20   to   2012-07-18 02:55:20 , 
2012-07-18 10:30:46   to   2012-07-18 12:54:46 
...... 
```

`user 2`仅在此时间段之间免费：

```
2012-07-18 21:10:47   to   2012-07-18 23:10:47 
```

现在我想找出两个用户都可以安排会议的最佳时间间隔。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T08:44:58.850

要查找 user1 和 user2 何时空闲，请尝试以下操作：

```
select 
a.datetime_start as user1start,a.datetime_end as user1end,
b.datetime_start as user2start,b.datetime_end as user2end ,
case when a.datetime_start > b.datetime_start then a.datetime_start 
   else b.datetime_start end as avail_start,
case when a.datetime_end>b.datetime_end then b.datetime_end 
   else a.datetime_end end as avail_end
from users a inner join users b on
a.datetime_start<=b.datetime_end and a.datetime_end>=b.datetime_start     
and  a.userid={user1} and b.userid={user2} 
```

[SQL 小提琴在这里。](http://sqlfiddle.com/#!2/07247/4)

已编辑：要比较 2 个以上的用户，请尝试以下操作：

```
select max(datetime_start) as avail_start,min(datetime_end) as avail_end
from(
        select *,
        @rn := CASE WHEN @prev_start <=datetime_end and @prev_end >=datetime_start THEN @rn ELSE @rn+1 END AS rn,
        @prev_start := datetime_start,
        @prev_end := datetime_end 
        from(
          select * from users2 m
          where exists ( select null 
                          from users2 o 
                           where o.datetime_start <= m.datetime_end and o.datetime_end >= m.datetime_start
                           and o.id <> m.id 
                        ) 
             and m.userid in (2,4,3,5)
           order by m.datetime_start) t,
           (SELECT @prev_start := -1, @rn := 1, @prev_end=-1) AS vars 
) c 
group by rn 
having count(rn)=4 ; 
```

需要根据用户数量`m.userid in (2,4,3,5)`进行更改。`having count(rn)=4`

[SQL 小提琴在这里](http://sqlfiddle.com/#!2/c0ba2/2)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-26T11:58:46.583

您可以使用此解决方案找到符合您的条件（例如1-5）的***所有***`userids`用户可以满足的“最佳”时间窗口。“最佳”时间窗口是通过最大的秒数来衡量的。

```
SELECT   MAX(b.FromDateTime) FromDateTime, 
         a.ToDateTime
FROM     (
         SELECT   DISTINCT a.ToDateTime
         FROM     tbl a
         JOIN     tbl b ON a.userid     <> b.userid
                       AND a.userid     IN (1,2,3,4,5)
                       AND b.userid     IN (1,2,3,4,5)
                       AND a.ToDateTime >  b.FromDateTime 
                       AND a.ToDateTime <= b.ToDateTime
         GROUP BY a.userid,
                  a.FromDateTime,
                  a.ToDateTime
         HAVING   COUNT(DISTINCT b.userid) = 4
         ) a
JOIN     (
         SELECT   DISTINCT a.FromDateTime
         FROM     tbl a
         JOIN     tbl b ON a.userid       <> b.userid
                       AND a.userid       IN (1,2,3,4,5)
                       AND b.userid       IN (1,2,3,4,5)
                       AND a.FromDateTime >= b.FromDateTime 
                       AND a.FromDateTime <  b.ToDateTime
         GROUP BY a.userid,
                  a.FromDateTime,
                  a.ToDateTime
         HAVING   COUNT(DISTINCT b.userid) = 4
         ) b ON b.FromDateTime < a.ToDateTime
GROUP BY a.ToDateTime
ORDER BY TIMESTAMPDIFF(SECOND, MAX(b.FromDateTime), a.ToDateTime) DESC
LIMIT    1 
```

`4`后面只是您的`COUNT(DISTINCT...`标准中的用户数减一（因为用户被阻止加入自己）。相应调整。

我们应该返回的是所有用户都可以参加的会议的开始和结束时间。

* * *

# 查询细分

* * *

给定以下数据：

```
(62, 1, '2012-07-18 00:00:00', '2012-07-18 12:00:00', 1),

(63, 2, '2012-07-18 00:00:00', '2012-07-18 02:00:00', 1),
(64, 2, '2012-07-18 03:00:00', '2012-07-18 05:00:00', 1),
(65, 2, '2012-07-18 05:30:00', '2012-07-18 06:00:00', 1),

(66, 3, '2012-07-18 00:30:00', '2012-07-18 02:30:00', 1),
(67, 3, '2012-07-18 03:10:00', '2012-07-18 07:30:00', 1),

(68, 4, '2012-07-18 01:10:00', '2012-07-18 03:20:00', 1),
(69, 4, '2012-07-18 03:50:00', '2012-07-18 06:00:00', 1),

(70, 5, '2012-07-18 01:10:00', '2012-07-18 03:20:00', 1),
(71, 5, '2012-07-18 04:30:00', '2012-07-18 07:10:00', 1),

(72, 1, '2012-07-18 13:00:00', '2012-07-18 14:00:00', 1),
(73, 2, '2012-07-18 13:30:00', '2012-07-18 14:30:00', 1),
(74, 3, '2012-07-18 14:00:00', '2012-07-18 15:00:00', 1),
(75, 4, '2012-07-18 14:30:00', '2012-07-18 15:30:00', 1),
(76, 5, '2012-07-18 18:00:00', '2012-07-18 19:00:00', 1); 
```

相对时间间隔位置应如下图所示（必须横向滚动才能看到全部内容）：

```
uid 1   <--------------------------------------------------------------------------------------...-------->      <-------------------->
uid 2   <----------------------->          <----------------------->    <---->                                          <-------------------->
uid 3       <----------------------->       <------------------------------------------->                                       <-------------------->
uid 4                 <----------------------->      <----------------------->                                                         <-------------------->
uid 5                 <----------------------->              <----------------------->                                                                                              <-------------------->
                      [    1    ]           [2]              [  3  ]    [ 4  ]
                           ^
       We want the start and end times of this overlap 
```

括号中的数字`[` `]`代表所有用户空闲时间重叠的时间窗口。我们想要重叠#1，因为它是最长的。重叠 #1 应该是`2012-07-18 1:10:00`to `2012-07-18 2:00:00`，所以我们的预期结果应该是：

```
FromDateTime       | ToDateTime
----------------------------------------
2012-07-18 1:10:00 | 2012-07-18 2:00:00 
```

* * *

## 步骤1：

我们必须做的第一件事是弄清楚所有潜在会议窗口的结束时间。我们通过选择其结束时间在所有其他用户的空闲时间间隔之间的特定间隔来做到这一点。

返回的结束时间表示上面文字插图中指出的每个重叠的结束时间。如果返回了两个相同的结束时间，我们只选择一个，因为我们不需要知道关于该结束时间的任何其他信息，除了这是该特定会议可以进行到的最晚时间这一事实：

```
SELECT   DISTINCT a.ToDateTime
FROM     tbl a
JOIN     tbl b ON a.userid     <> b.userid
              AND a.userid     IN (1,2,3,4,5)
              AND b.userid     IN (1,2,3,4,5)
              AND a.ToDateTime >  b.FromDateTime 
              AND a.ToDateTime <= b.ToDateTime
GROUP BY a.userid,
         a.FromDateTime,
         a.ToDateTime
HAVING   COUNT(DISTINCT b.userid) = 4 
```

*渲染：*

```
TODATETIME
-------------------
2012-07-18 02:00:00
2012-07-18 05:00:00
2012-07-18 06:00:00
2012-07-18 03:20:00 
```

[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/e37fa/23)

* * *

## 第2步：

接下来我们要做的是与上一步相反，找出每个潜在会议窗口的所有***开始***时间，并将此查询的结果与上一步的结果连接起来，条件是开始时间小于上一步的结束时间：

```
SELECT   b.FromDateTime,
         a.ToDateTime
FROM     (
         SELECT   DISTINCT a.ToDateTime
         FROM     tbl a
         JOIN     tbl b ON a.userid     <> b.userid
                       AND a.userid     IN (1,2,3,4,5)
                       AND b.userid     IN (1,2,3,4,5)
                       AND a.ToDateTime >  b.FromDateTime 
                       AND a.ToDateTime <= b.ToDateTime
         GROUP BY a.userid,
                  a.FromDateTime,
                  a.ToDateTime
         HAVING   COUNT(DISTINCT b.userid) = 4
         ) a
JOIN     (
         SELECT   DISTINCT a.FromDateTime
         FROM     tbl a
         JOIN     tbl b ON a.userid       <> b.userid
                       AND a.userid       IN (1,2,3,4,5)
                       AND b.userid       IN (1,2,3,4,5)
                       AND a.FromDateTime >= b.FromDateTime 
                       AND a.FromDateTime <  b.ToDateTime
         GROUP BY a.userid,
                  a.FromDateTime,
                  a.ToDateTime
         HAVING   COUNT(DISTINCT b.userid) = 4
         ) b ON b.FromDateTime < a.ToDateTime
ORDER BY a.ToDateTime, b.FromDateTime --Ordered for display purposes 
```

*渲染：*

```
TODATETIME          | FROMDATETIME        
------------------------------------------
2012-07-18 02:00:00 | 2012-07-18 01:10:00  <-- Most recent FromDateTime
2012-07-18 03:20:00 | 2012-07-18 01:10:00 
2012-07-18 03:20:00 | 2012-07-18 03:10:00  <-- Most recent FromDateTime
2012-07-18 05:00:00 | 2012-07-18 01:10:00 
2012-07-18 05:00:00 | 2012-07-18 03:10:00 
2012-07-18 05:00:00 | 2012-07-18 04:30:00  <-- Most recent FromDateTime 
2012-07-18 06:00:00 | 2012-07-18 01:10:00 
2012-07-18 06:00:00 | 2012-07-18 03:10:00 
2012-07-18 06:00:00 | 2012-07-18 04:30:00 
2012-07-18 06:00:00 | 2012-07-18 05:30:00  <-- Most recent FromDateTime 
```

最近`FromDateTimes`的代表每个潜在会议窗口的开始。我们只想拉取`FromDateTime`最近的每行`ToDateTime`。我们在下一步`GROUP BY`中与`MAX()`聚合函数一起使用。

[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/e37fa/28)

* * *

## 第 3 步：

接下来，我们使用`GROUP BY`on`ToDateTime`和`MAX()`on`FromDateTime`仅拉取最新的`FromDateTimes`：

```
SELECT   MAX(b.FromDateTime) FromDateTime, 
         a.ToDateTime
FROM     (
         SELECT   DISTINCT a.ToDateTime
         FROM     tbl a
         JOIN     tbl b ON a.userid     <> b.userid
                       AND a.userid     IN (1,2,3,4,5)
                       AND b.userid     IN (1,2,3,4,5)
                       AND a.ToDateTime >  b.FromDateTime 
                       AND a.ToDateTime <= b.ToDateTime
         GROUP BY a.userid,
                  a.FromDateTime,
                  a.ToDateTime
         HAVING   COUNT(DISTINCT b.userid) = 4
         ) a
JOIN     (
         SELECT   DISTINCT a.FromDateTime
         FROM     tbl a
         JOIN     tbl b ON a.userid       <> b.userid
                       AND a.userid       IN (1,2,3,4,5)
                       AND b.userid       IN (1,2,3,4,5)
                       AND a.FromDateTime >= b.FromDateTime 
                       AND a.FromDateTime <  b.ToDateTime
         GROUP BY a.userid,
                  a.FromDateTime,
                  a.ToDateTime
         HAVING   COUNT(DISTINCT b.userid) = 4
         ) b ON b.FromDateTime < a.ToDateTime
GROUP BY a.ToDateTime 
```

*渲染：*

```
FROMDATETIME        | TODATETIME
-----------------------------------------
2012-07-18 01:10:00 | 2012-07-18 02:00:00
2012-07-18 03:10:00 | 2012-07-18 03:20:00
2012-07-18 04:30:00 | 2012-07-18 05:00:00
2012-07-18 05:30:00 | 2012-07-18 06:00:00 
```

这些基本上是我们潜在的时间窗口。现在只需选择最长的一个即可。

* * *

## 第4步：

我们使用`ORDER BY`/ `LIMIT 1`max/min 选择技术，因为我们只需要一行。我们根据每次会议的结束时间和开始时间之间的秒差进行排序，然后选择秒数最多的一个（通过`LIMIT 1`），得到我们最终想要的结果：

```
SELECT   MAX(b.FromDateTime) FromDateTime, 
         a.ToDateTime
FROM     (
         SELECT   DISTINCT a.ToDateTime
         FROM     tbl a
         JOIN     tbl b ON a.userid     <> b.userid
                       AND a.userid     IN (1,2,3,4,5)
                       AND b.userid     IN (1,2,3,4,5)
                       AND a.ToDateTime >  b.FromDateTime 
                       AND a.ToDateTime <= b.ToDateTime
         GROUP BY a.userid,
                  a.FromDateTime,
                  a.ToDateTime
         HAVING   COUNT(DISTINCT b.userid) = 4
         ) a
JOIN     (
         SELECT   DISTINCT a.FromDateTime
         FROM     tbl a
         JOIN     tbl b ON a.userid       <> b.userid
                       AND a.userid       IN (1,2,3,4,5)
                       AND b.userid       IN (1,2,3,4,5)
                       AND a.FromDateTime >= b.FromDateTime 
                       AND a.FromDateTime <  b.ToDateTime
         GROUP BY a.userid,
                  a.FromDateTime,
                  a.ToDateTime
         HAVING   COUNT(DISTINCT b.userid) = 4
         ) b ON b.FromDateTime < a.ToDateTime
GROUP BY a.ToDateTime
ORDER BY TIMESTAMPDIFF(SECOND, MAX(b.FromDateTime), a.ToDateTime) DESC
LIMIT    1 
```

[*最终结果的 SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/e37fa/30)

[*带有其他示例数据的 SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/3b2a6/2)

* * *

# 获取表中所有用户之间的会议时间（无条件）：

如果您不想指定要检查哪些用户的会议时间（只需为表中的所有用户执行此操作），您可以使用：

```
SELECT   MAX(b.FromDateTime) FromDateTime, 
         a.ToDateTime
FROM     (
         SELECT     DISTINCT a.ToDateTime
         FROM       tbl a
         JOIN       tbl b ON a.userid     <> b.userid
                         AND a.ToDateTime >  b.FromDateTime 
                         AND a.ToDateTime <= b.ToDateTime
         CROSS JOIN (SELECT COUNT(DISTINCT userid) totalusers FROM tbl) c
         GROUP BY   a.userid,
                    a.FromDateTime,
                    a.ToDateTime,
                    c.totalusers
         HAVING     COUNT(DISTINCT b.userid) = c.totalusers-1
         ) a
JOIN     (
         SELECT   DISTINCT a.FromDateTime
         FROM     tbl a
         JOIN     tbl b ON a.userid       <> b.userid
                       AND a.FromDateTime >= b.FromDateTime 
                       AND a.FromDateTime <  b.ToDateTime
         CROSS JOIN (SELECT COUNT(DISTINCT userid) totalusers FROM tbl) c
         GROUP BY a.userid,
                  a.FromDateTime,
                  a.ToDateTime,
                  c.totalusers
         HAVING   COUNT(DISTINCT b.userid) = c.totalusers-1
         ) b ON b.FromDateTime < a.ToDateTime
GROUP BY a.ToDateTime
ORDER BY TIMESTAMPDIFF(SECOND, MAX(b.FromDateTime), a.ToDateTime) DESC
LIMIT    1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T02:20:28.157

[我使用扫描线（维基百科](http://en.wikipedia.org/wiki/Sweep_line_algorithm)）在 PHP 中创建了一个一维线段相交算法。它之所以有效，是因为日期时间可以映射到数字线：例如使用“自纪元以来的毫秒数”。

请参阅此处的实现：http: [//pastebin.com/iLwJQEF0](http://pastebin.com/iLwJQEF0)

该算法输出一组线段交叉点（也是线段），其中还包含在该持续时间内可用的所有用户的列表。您可以按照“最佳”的定义对交叉点进行排序（并将其反转为降序）：首先按可用用户的数量，然后按他们的持续时间。（已经实施！）

它在 中运行`O(n * log n)`，其中`n`是时间段数。

笔记：

*   如果您不想搞乱日期时间到毫秒的转换，可以替换减法和大于/小于运算符。（我给你留下了一些评论。）
*   注意在同一位置开始/结束的线段很重要：
    *   扫描线必须在相同值的起点*之前*遇到终点。
    *   另请注意，当两个线段以相同的值结束时，它不会产生无关的结果。
*   我确信这可以在数据库引擎中重新实现（如果您认为值得的话）。许多数据库供应商都有几何扩展。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-26T20:39:19.317

我找到了一个*hacky*方法来做到这一点：

Perl 有一些叫做的东西`Set::IntSpan`，它有一个`intersect`函数（或方法），可以找到两个数字间隔的公共范围。这个想法是利用它。

您可以使用 php.ini 将日期时间字符串转换为时间戳（数字）`strtotime("2012-08-27 02:02:02")`。一旦你有两对时间戳，你可以使用下面的示例 perl 代码来找到你可以从中找到时间的交集间隔。

```
use Set::IntSpan;

my $r1 = Set::IntSpan->new([ 5 .. 15 ]);
my $r2 = Set::IntSpan->new([ 2 .. 20 ]);

my $i = $r1->intersect($r2);

if ( !$i->empty and ( $i->max - $i->min ) >= 5 ) # criteria
{
print "hit\n"; # $i->max, $i->min are the timestamps you need
}
else
{
print "miss\n";
} 
```

一旦有了相交间隔，就可以使用时间戳（如果需要）取回日期时间`date("Y-m-d H:i:s", $timestamp);`

以下是一些相关链接和参考资料：

[计算2个数字范围之间的重叠](http://www.perlmonks.org/?node_id=933106)

[从 PHP 调用 Perl 脚本并传入变量，同时还使用可变的 perl 脚本名称](https://stackoverflow.com/questions/3438626/calling-perl-script-from-php-and-passing-in-variables-while-also-using-variabli)

ps也许perl专业人士可以将代码包装成一个有4个参数的函数？另外，我知道这不是问题的完美答案，但 imo 这个想法很酷。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-26T22:24:53.630

使用小提琴中的 sel 模式（10x sel）......

最简单的方法也是：

```
SELECT
    MAX(GREATEST(u1.datetime_start, u2.datetime_start)) AS MeetingStart,
    MIN(LEAST(u1.datetime_end, u2.datetime_end)) AS MeetingEnd
FROM users2 u1
INNER JOIN users2 u2
    ON (u1.datetime_end >= u2.datetime_start AND u1.datetime_start <= u2.datetime_end)
    AND u2.userid != u1.userid
    AND u2.userid IN (3,4,5)
WHERE u1.userid=2
GROUP BY u1.id
HAVING COUNT(DISTINCT u2.userid) = 3 AND MeetingStart < MeetingEnd 
```

根据你的情况改变：

在我的示例中，我们有 4 个参与者。n=4，参与者（2,3,4,5）

IN (3,4,5) --> 参加会议的最后 n-1 个 id

WHERE u1.userid=2 --> 会议第一个参与者的 id

有 COUNT(DISTINCT u2.userid) = 3 --> n - 1

可以在[sqlfiddle上测试](http://sqlfiddle.com/#!2/c0ba2/9)

# c++ - 使用 >> 运算符设置对象

> ID：11965463
> 
> 赞同：1
> 
> 时间：2012-08-15T07:22:28.473
> 
> 标签：c++, operator-overloading

我为许多类重载了 >> 运算符，但在这种情况下有所不同。我一般不能在 operator's function 中设置类成员。我需要使用 char*-argument 构造函数来设置对象，但是当我这样做时，程序停止工作。你可以看到下面的功能：

```
istream & operator >>(istream &stream ,Big& b)
{
    char *str;
    stream>>str;
    b=Big(str);
    return stream;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T07:24:43.290

您尝试将输入读入未初始化的指针。改为使用`std::string`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T07:24:51.040

```
char *str;
stream>>str; 
```

调用未定义的行为，因为您没有为`str`. 要么分配内存，要么使用 a`std::string`代替（首选）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T07:25:11.807

`char *str`无法保存流式传输的结果`stream`（除非您正在读取指针，但我怀疑这是您的意图）。你可能想要`std::string str`.

# c# - 在 C# 中表示未实现方法的惯用方式

> ID：11965470
> 
> 赞同：15
> 
> 时间：2012-08-15T07:22:56.080
> 
> 标签：c#, idioms

我正在为 C# 应用程序构建框架，并打算留下一堆没有实现的方法 - 返回虚拟值。我打算回到他们身边，但不想不小心忘记实施其中的任何一个。

我想在遇到未实现的方法时发出信号，并使用虚拟值**继续执行。**

这样做的惯用方式是什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-15T07:27:45.483

执行此操作的*经典*方法是：

```
throw new NotImplementedException(); 
```

这对调用者来说很清楚，以后很容易找到修复（事实上，它会自动显示在某些任务列表中）。但是，如果这不是一个选项，也许：

```
return 0; // TODO 
```

再次，这将自动显示在任务列表中，并且很容易找到。

如果你想要更明显的东西：

```
[Obsolete("not implemented")]
public int Foo() {
    return 0;
} 
```

**这将在调用者处**显示为编译器警告，或者：

```
public int Foo() {
    #warning Foo not implemented
    return 0;
} 
```

这将在该方法中显示为编译器警告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T07:26:33.407

传统上你会抛出一个`NotImplementedException`存根，但这当然会终止该路径的执行。其他选项包括：

只是记录它。在您的日志或控制台输出中添加一行。

或者，根据弹出窗口让您烦恼的程度，您可以使用[`Debug.Assert`](http://msdn.microsoft.com/en-us/library/system.diagnostics.debug.assert.aspx)/[`Debug.Fail`](http://msdn.microsoft.com/en-us/library/6z60kt1f.aspx)在这些方法被命中时弹出一条消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T07:29:51.763

也可以使用 TODO，这将显示在 Visual Studio 的任务列表中。

```
//TODO: Finish this method
public int dummy()
{
return 0;
} 
```

否则

```
throw new NotImplementedException() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T07:26:13.300

也许通过在没有实现的情况下在每个方法中抛出 NotImplementedException ？

要返回一个值，也许您可​​以使用模拟框架

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T07:38:40.460

由于您希望能够继续执行，因此`TODO:`如果方法具有返回类型，我将使用 a 并返回默认值。

默认值是可以的，只要它是会导致单元测试失败的值，但 TODO 在任务列表中非常明显，特别是如果您使用 Resharper。

# python - 如何使用德威从遥控器拉出？

> ID：11965471
> 
> 赞同：6
> 
> 时间：2012-08-15T07:22:55.383
> 
> 标签：python, git, dulwich

`git pull`如何在 python dulwich 库中做类似的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T07:42:13.443

我没有使用德威，但从[这些文档中](http://www.samba.org/~jelmer/dulwich/docs/tutorial/remote.html#fetching-objects-into-a-local-repository)，可能是这样的：

```
from dulwich.repo import Repo
from dulwich.client import HttpGitClient
local = Repo.init("local", mkdir=True)
client = HttpGitClient('http://github.com/adammorris/')
remote_refs = client.fetch("history.js.git",local)
local["HEAD"] = remote_refs["refs/heads/master"] 
```

此时，它没有加载文件，但我可以从本地路径执行“git checkout”，它会更新文件。

另外，看到了这些：

*   [https://lists.launchpad.net/dulwich-users/msg00118.html](https://lists.launchpad.net/dulwich-users/msg00118.html)
*   [以编程方式 `git checkout .` 与德威](https://stackoverflow.com/questions/6640546/programmatically-git-checkout-with-dulwich)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-23T17:19:35.550

完整的例子。与`Bitbucket`.

```
from dulwich import index
from dulwich.client import HttpGitClient
from dulwich.repo import Repo

local_repo = Repo.init(LOCAL_FOLDER, mkdir=True)
remote_repo = HttpGitClient(REMOTE_URL, username=USERNAME, password=PASSWORD)
remote_refs = remote_repo.fetch(REMOTE_URL, local_repo)
local_repo[b"HEAD"] = remote_refs[b"refs/heads/master"]

index_file = local_repo.index_path()
tree = local_repo[b"HEAD"].tree
index.build_index_from_tree(local_repo.path, index_file, local_repo.object_store, tree) 
```

用您的数据替换 LOCAL_FOLDER、REMOTE_URL、USERNAME、PASSWORD。

# python - 关于 Python 匹配对象

> ID：11965476
> 
> 赞同：1
> 
> 时间：2012-08-15T07:23:21.463
> 
> 标签：python

我正在学习 Python 正则表达式，我有一个问题：我读过的所有书籍和 Python 文档都告诉我`re.search`返回 a `MatchObject`or `None`。

我的问题是 的定义在`MatchObject`哪里？`MatchObject`属于什么类？当我使用`help(matchObj)`时，它会打印出来`<'_sre.SRE_Match'>`。这是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T07:24:27.947

它是在 C 中定义的类型，特别是在[`_sre.{so,pyd,dylib}`](http://hg.python.org/releasing/2.7.3/file/7bb96963d067/Modules/_sre.c#l3612).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T07:25:47.837

[这是来自官方文档的定义](http://docs.python.org/library/re.html#match-objects)

# java - Tomcat 服务器信任库根证书

> ID：11965477
> 
> 赞同：1
> 
> 时间：2012-08-15T07:23:30.407
> 
> 标签：java, ssl, tomcat6, keystore

我需要信任我的 tomcat 上的客户端证书，我已将根 (verisign) 和客户域证书添加到服务器信任库，它工作正常并接受客户端连接。

现在的问题是，将根威瑞信证书添加到信任库是否接受由该威瑞信证书签名的任何内容？或者只有当我将它添加到 cacerts 时才会出现这种情况？将其留在信任库中是否安全？

我在 Linux 上使用 tomcat 6 和 java 1.6

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:37:19.977

> 将根威瑞信证书添加到信任库是否接受由该威瑞信证书签名的任何内容？

是的，它确实。您的应用程序仍需要根据分配给证书标识的用户的角色执行授权步骤。您不应该尝试仅使用信任库和证书来执行此操作，这不是该机制的目的。它在那里进行身份验证。你在谈论授权。

注意您使用的是本地信任库*而不是*JRE 的 cacerts 文件。

# extjs - extjs 4.1 我什么时候在商店和模型上使用代理？

> ID：11965488
> 
> 赞同：19
> 
> 时间：2012-08-15T07:24:30.807
> 
> 标签：extjs, extjs4.1

在 extjs 4.1 中使用代理有两种方法（在我的例子中是服务器代理），一种可以将其绑定到模型或将其绑定到商店。

我对用法有点困惑：将代理绑定到商店和将其绑定到模型有什么区别？

什么情况下会使用一种方式或另一种方式？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-15T07:55:32.620

好的，我在 sencha [App Architecture Part 2的文档中找到了它](http://www.sencha.com/learn/architecting-your-app-in-ext-js-4-part-2/)

**为模型使用代理：**

> 这样做通常是一种很好的做法，因为它允许您在不需要存储的情况下加载和保存此模型的实例。此外，当多个商店使用相同的模型时，您不必在每个商店上重新定义您的代理。

**为商店使用代理：**

> 在 Ext JS 4 中，多个商店可以使用相同的数据模型，即使这些商店会从不同的来源加载它们的数据。在我们的示例中，SearchResults 和 Stations 存储将使用 Station 模型，它们都从不同的位置加载数据。一个返回搜索结果，另一个返回用户最喜欢的电台。为了实现这一点，我们的商店之一将需要覆盖模型上定义的代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:49:56.137

我总是在商店而不是模型上使用代理。您是否有要将代理附加到模型的示例/用例？通常我总是声明一个商店并将代理附加到它。

关于 sencha 文档中的示例，我想说这就是它的本意（我猜 ;-)）

# sql - 在 SQL 中更新图形数据

> ID：11965492
> 
> 赞同：4
> 
> 时间：2012-08-15T07:24:43.350
> 
> 标签：sql, database, postgresql, graph, common-table-expression

我需要遍历并更新 SQL 中的图形。

为了将其纳入预期，我将举一个例子：

*   每个公司都可以在特定主题上代表其他公司。
*   公司可以相互代表，但不能代表同一主题

这假设表格如下：

`companies(id)`, `representations(source_id, destination_id, subject)`.

但规则是，当我的公司不再代表您的公司处理特定主题时，我的下游公司就不能代表我的公司处理同一主题。

我希望你明白我的意思。

因此，使用简单的数据，例如：

```
C1:
--sell--> C2
--pay--> C3

C2:
--sell--> C3
--pay--> C1

C3:
--mail--> C1
--sell--> C4

C4:
--deliver-->C1 
```

现在，我们删除表示（我应该称之为关系）`C2--sell-->C3`我们应该最终得到以下结构（`[X]`- 删除）：

```
C1:
--sell--> C2
--pay--> C3

C2:
[X]--sell--> C3
--pay--> C1

C3:
--mail--> C1
[X]--sell--> C4

C4:
--deliver-->C1 
```

所以问题是如何才能选择所有的公司，这些公司在我的链下为一个给定的主题？

我想递归 CTE 表达式是唯一的方法。

**笔记：**

*   该结构不是一棵树，它是一个有序循环图。
*   图形数据库现在不是一个选项（这只是系统的一小部分）
*   更新不需要立即进行，它们最终保持一致是可以的（大约几秒钟到几分钟）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T07:34:55.907

听起来您需要为每个主题维护图形的传递闭包。看[一篇关于如何使用 SQL 实现增量评估系统 (IES) 的论文](http://homepages.inf.ed.ac.uk/libkin/papers/tc-sql.pdf)，似乎能够做到这一点。该论文包含有向无环、无向和任意有向图的大量 SQL 示例。

看来，对于您的每个主题，图表都是无环的，幸运的是，这是最简单的情况。

# windows-7 - Aptana 在哪里存储临时 FTP 文件？

> ID：11965493
> 
> 赞同：1
> 
> 时间：2012-08-15T07:24:46.997
> 
> 标签：windows-7, ftp, aptana, aptana3

我正在使用 Aptana Studio 3 FTP 连接（在 Win7 上）直接编辑我的服务器上的文件，而无需本地副本。保存时，Aptana 似乎存储了一个临时文件 ( `home.php._tmp_uploadphp`)，然后将其上传到服务器并`home.php`在删除过时的远程副本后将其重命名为正确的文件 ( )。

我试图在上传之前找到 Aptana 保存临时文件的本地文件夹。有谁知道这些文件是否保存到本地文件系统，然后在上传后立即删除，或者它们是否可能只是存储在内存中并直接更新。

我检查了整个驱动器，但找不到它，所以它似乎正在创建然后立即删除它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T16:55:29.640

在 Aptana Studio 3.1.3 及更高版本中，本地副本保存在系统临时目录的 aptanavfs/ 下，或者“java.io.tmpdir”变量指向的位置（例如，在 Linux 上，它是 /tmp/aptanavfs /); 在 3.1.2 及之前的版本中，所有文件都直接保存在 temp 目录下。当您退出 Studio 时，这些文件将被删除。

这是参考[票](https://jira.appcelerator.org/browse/APSTUD-3565)。

# c# - 如何在 Windows XP 上成功关闭 TextWriter 流？

> ID：11965495
> 
> 赞同：0
> 
> 时间：2012-08-15T07:24:56.183
> 
> 标签：c#, .net, io, try-catch-finally

我有如下代码用于处理 TextWriter 流。

```
TextWriter TR = new StreamWriter(@"")

try
{

    //Logic

}
catch (Exception exception)
{

    //Error Reporting

}
finally
{

    if (TR != null)
        TR.Close();

} 
```

我的 .Net 版本是 4.0，此代码在 Windows 7 上正常运行，但在 Windows XP 中无法正常运行！！似乎流没有关闭，并且许多缓冲区没有写入文件！我不知道！谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:11:42.497

听起来问题不在于流尚未关闭，而在于流可能在写入之前已关闭。对于大多数流输出，您需要刷新输出流以确保在关闭之前已写入更改。如果您不这样做，那么未刷新的数据将会丢失，这听起来很像您所看到的。

正如杰拉德建议的那样，我也会推荐

```
using(var writer = new StreamWriter(@"")
{
    // ...

    writer.Flush();
} 
```

格式，因为虽然它的实现与 try{...}finally{...} 大致相同，但它更优雅，更容易正确处理。

# php - Selenium Server - 为正在测试的应用程序预定义常量？

> ID：11965496
> 
> 赞同：1
> 
> 时间：2012-08-15T07:25:09.273
> 
> 标签：php, cakephp, testing, selenium

使用 Selenium 服务器，有没有办法为通过 Selenium 测试的应用程序定义一个常量？更具体地说，我正在使用基于 CakePHP 的应用程序。我想让 Selenium 定义一个 PHP 常量供应用程序在应用程序运行之前使用，这样这个常量只会在应用程序通过 Selenium 运行时定义。有没有办法可以实现这样的事情？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:26:18.007

如果您使用 phpunit [http://www.phpunit.de/manual/3.7/en/selenium.html](http://www.phpunit.de/manual/3.7/en/selenium.html)来执行您的硒测试，那么您可以在 setUp() 方法中定义一个常量。然后为每个测试设置这个常数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:59:15.077

我最终只是检查了 Selenium 服务器是否在我的程序中运行。为此，我检查了服务器运行的端口是否打开。我使用以下代码做到了这一点：

```
if(!defined('SELENIUM_TEST')){
    $fp = @fsockopen('localhost', 4444);
    if ($fp !== false) {
        define('SELENIUM_TEST', true);
        fclose($fp);
    }
} 
```

只要在您需要检查常量之前完成此操作，那么它应该可以正常工作。

警告：如果 Selenium 服务器没有运行，这将导致应用程序在尝试联系套接字时停止。

# http-headers - 在 CloudFoundry 上，HTTP 请求标头似乎已被过滤。有没有办法接收它们？

> ID：11965501
> 
> 赞同：1
> 
> 时间：2012-08-15T07:25:36.790
> 
> 标签：http-headers, cloud-foundry

我正在 CloudFoundry 上运行一个 NodeJS 应用程序，该应用程序旨在与我无法影响的现有 HTTP 客户端结合使用。

此 HTTP 客户端发送我的应用程序所依赖的请求标头，但遍历标头列表会使它们丢失。相反，在开发机器上运行 NodeJS 应用程序会按预期列出这些标头。

有问题的标头是特定于应用程序的，不是由 RFC 文档定义的，也不是以“X-”开头的。准确地说，有问题的客户端是游戏“EVE Online”的游戏内浏览器。客户端的标头以前缀“eve_”命名，因此“eve_trusted”将是一个真实的示例。

下面我们确定下划线字符 ('_') 是一个可能的问题 - 其他不带下划线的未知标头会被传递。

有没有办法获取请求的原始标头，这是对 Cloud Foundry 的功能请求，还是我在一般云服务的负载均衡器后面迷路了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T08:32:50.293

只是为了帮助理解您的问题，我部署了一个简单的节点应用程序，该应用程序将输出客户端设置的标头，以便我可以使用 curl 发送任意值，代码如下；

```
var http = require('http');
var util = require('util');

http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end(util.inspect(req.headers));
}).listen(3000); 
```

我将它部署到[http://node-headers.cloudfoundry.com](http://node-headers.cloudfoundry.com)，请自行测试，我会暂时保留它。然后我使用以下语法和 curl 发送了一个请求；

```
curl --header "CustomHeader: Hello" node-headers.cloudfoundry.com 
```

这产生了以下输出；

```
{ host: 'node-headers.cloudfoundry.com',
'x-forwarded-for': '80.175.199.28, 172.30.8.253',
connection: 'close',
'user-agent': 'curl/7.21.4 (universal-apple-darwin11.0) libcurl/7.21.4 OpenSSL/0.9.8r zlib/1.2.5',
accept: '*/*',
customheader: 'Hello',
'x-cluster-client-ip': '80.175.199.28' } 
```

您可以看到我使用 curl 发送的自定义标头。我还用多个实例对此进行了测试，结果相同。

如果我在这里遗漏了什么，请告诉我，我将非常乐意与您一起解决问题。

# sql - 使用 SQL 在 MS Access 中检查约束的持续错误

> ID：11965502
> 
> 赞同：3
> 
> 时间：2012-08-15T07:25:41.810
> 
> 标签：sql, ms-access

我正在使用以下命令创建表：

```
CREATE TABLE Comp (
SerialNumber Number Primary Key Not Null,
Make Text(12) Not Null,
Model Text(24) Not Null,
ProcessorType Text(24) Null,
ProcessorSpeed Int Not Null,
MainMemory Text(15) Not Null,
DiskSize Text(15) Not Null
); 
```

哪个有效，然后我尝试添加约束：

```
ALTER TABLE Comp
ADD CONSTRAINT CheckSpeed
CHECK (ProcessorSpeed > 0); 
```

返回错误：“约束子句中的语法错误”。我试过添加：

```
CHECK (ProcessorSpeed > 0) 
```

到表创建命令，但它返回相同的错误。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T09:22:34.257

您需要针对连接运行，并且 Comp 是保留字。

```
ss = "ALTER TABLE [Comp] ADD CONSTRAINT CheckSpeed CHECK (ProcessorSpeed > 0)"
CurrentProject.Connection.Execute ss 
```

信息：[约束](http://msdn.microsoft.com/en-us/library/aa140015%28office.10%29.aspx#acintsql_ddlconst)

[Jet/Access pre 2007](http://support.microsoft.com/kb/248738)和[ACE/Access 2007-](http://msdn.microsoft.com/en-us/library/bb208875%28v=office.12%29.aspx)中的保留字

# wordpress - Wordpress wp_head() 自动读取 CSS 问题

> ID：11965503
> 
> 赞同：1
> 
> 时间：2012-08-15T07:25:45.287
> 
> 标签：wordpress

我已经添加`wp_head()`到头部，因为插件需要它但是当我更新博客中博客的任何部分时，`wp-admin`它会自动在里面添加以下新`css`部分`head`

```
<style type="text/css" media="screen">
    html { margin-top: 28px !important; }
    * html body { margin-top: 28px !important; }
</style> 
```

当我删除路径 cookie 时，它​​会消失。为什么会发生这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T09:16:27.270

这是管理栏。如果您愿意，可以将其删除。在你的functions.php中，放置：

```
show_admin_bar(false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T07:53:28.637

`admin bar`实际上`style`这是为`functions.php`

```
add_filter( 'show_admin_bar', '__return_false' ); 
```

但是当您登录时，上面的行也会`admin bar`从前端删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T06:14:17.040

我发现删除该空白的最佳方法（它不是由管理栏引起的）是在 style.css 中搜索此 css：

```
#page {
margin: 2em auto;
max-width: 1000px;
} 
```

并切换`2em`到`0em`或相同的一些变体。这将删除空白。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-18T05:52:41.787

这是因为管理栏，您必须在页脚部分添加对 wp_footer 的调用来解决此问题

```
<?php wp_footer();?> 
```

# jsf - 如何使用 JavaServer Faces 根据目标 URL 修改登录页面？

> ID：11965506
> 
> 赞同：1
> 
> 时间：2012-08-15T07:26:11.467
> 
> 标签：jsf, authentication, jakarta-ee, jsf-2

在我的 JSF 2 中，我使用基于表单的身份验证。web.xml 包含一个 login.html 条目。

```
<login-config>
    <auth-method>FORM</auth-method>
    <realm-name>testDB</realm-name>
    <form-login-config>
        <form-login-page>/login.html</form-login-page>
        <form-error-page>/loginError.html</form-error-page>
    </form-login-config>
</login-config> 
```

Web 应用程序有一个主页 (/app/index.html) 和一个 /app/mobile/index.html 以支持手机。

我想根据目标 URL 在 login.html 中使用不同的布局。

*   如果目标 URL 是 /app/mobile/index.html，请使用针对小型浏览器尺寸优化的登录页面

*   否则使用默认登录页面

登录页面 (login.html) 页面是一个 JSF 页面。

是否可以使用 JSF 在登录页面中获取“目标”页面，也许使用 FacesContext 中的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:27:28.520

[我在https://stackoverflow.com/a/5820573/80901](https://stackoverflow.com/a/5820573/80901)找到了一种获取目标请求 URI 的方法

表达方式

```
#{requestScope['javax.servlet.forward.request_uri']} 
```

包含值 /app/index.html 或 /app/mobile/index.html

代码示例：

```
 <h:panelGroup rendered="#{requestScope['javax.servlet.forward.request_uri'] eq '/app/mobile/index.html'}">
        <h2>
            Welcome to the MOBILE login page.
        </h2>
    </h:panelGroup>
    <h:panelGroup rendered="#{requestScope['javax.servlet.forward.request_uri'] ne '/app/mobile/index.html'}">
        <h2>
            Welcome to the NON-MOBILE login page.
        </h2>
    </h:panelGroup> 
```

# ruby-on-rails - rake db:create & rails 服务器

> ID：11965507
> 
> 赞同：0
> 
> 时间：2012-08-15T07:26:11.993
> 
> 标签：ruby-on-rails

我是 RoR 的新手，一直在尝试完成入门链接

> [http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)

我遇到了几个问题：

1.  我不能跑`rake db:create`
2.  我不能跑`rake server`

工作站是 Ubuntu 12.04、Rails 3.2.8、Ruby 1.9.3p194。

```
mukeshk@ubuntu:~/NetBeansProjects/rails_work/blog/config$ rake db:create
(in /home/mukeshk/NetBeansProjects/rails_work/blog)
rake aborted!
undefined method `active_record' for #<Rails::Application::Configuration:0x00000002080410>

(See full trace by running task with --trace)

mukeshk@ubuntu:~/NetBeansProjects/rails_work/blog/config$ rails server
/home/mukeshk/.rvm/gems/ruby-1.9.3-p194@rails32/gems/railties-3.2.8/lib/rails/railtie/configuration.rb:85:in `method_missing': undefined method `active_record' for #<Rails::Application::Configuration:0x00000002a02f60> (NoMethodError)
    from /home/mukeshk/NetBeansProjects/rails_work/blog/config/application.rb:54:in `<class:Application>'
    from /home/mukeshk/NetBeansProjects/rails_work/blog/config/application.rb:13:in `<module:Blog>'
    from /home/mukeshk/NetBeansProjects/rails_work/blog/config/application.rb:12:in `<top (required)>'
    from /home/mukeshk/.rvm/gems/ruby-1.9.3-p194@rails32/gems/railties-3.2.8/lib/rails/commands.rb:53:in `require'
    from /home/mukeshk/.rvm/gems/ruby-1.9.3-p194@rails32/gems/railties-3.2.8/lib/rails/commands.rb:53:in `block in <top (required)>'
    from /home/mukeshk/.rvm/gems/ruby-1.9.3-p194@rails32/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
    from /home/mukeshk/.rvm/gems/ruby-1.9.3-p194@rails32/gems/railties-3.2.8/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'
mukeshk@ubuntu:~/NetBeansProjects/rails_work/blog/config$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:52:53.873

将此添加到您的 config/application.rb：

```
require "active_record/railtie" 
```

# sql - 如何在一个总和为 1 sql 的表中创建行

> ID：11965511
> 
> 赞同：4
> 
> 时间：2012-08-15T07:26:28.413
> 
> 标签：sql, oracle, oracle-sqldeveloper

我正在尝试创建具有除法可能性的表格，并且我希望一行中所有单元格的总和为 1。例如：

```
0.1, 0.2, 0.3, 0.3, 0.1 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T07:33:09.783

您可以在表上创建一个约束，要求每行满足某些条件，在这种情况下，列总数为 1：

```
create table my_table (
  col1 number,
  col2 number,
  col3 number,
  col4 number,
  constraint assert_sum_is_one check (col1 + col2 + col3 + col4 = 1)
) 
```

任何插入或更新行*不*总计为 1 的尝试都将导致约束违反异常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T07:31:58.717

如果您使用的是 11g，则可以使用 Oracle 虚拟列：

[http://www.oracle-base.com/articles/11g/virtual-columns-11gr1.php](http://www.oracle-base.com/articles/11g/virtual-columns-11gr1.php)

结合检查约束。

```
CREATE TABLE myTable (
  id          NUMBER,
  col1        NUMBER(3),
  col1        NUMBER(3),
  col3        NUMBER(3),
  colsum      NUMBER GENERATED ALWAYS AS (col1 + col2 + col3) VIRTUAL,
  CONSTRAINT pk_mytable PRIMARY KEY (id)
); 
```

然后添加一个约束来检查 colsum 是否始终为 1。

**编辑：**波西米亚人的回答更简单更好。在这种情况下，使用虚拟列的唯一优点是总和始终保持/可见，但如果约束阻止总和为 1 以外的任何值，则没有必要。为了完成，我将留下这个答案。

# php - MDB2 批处理查询是否有 INSERT IGNORE 等效项 autoPrepare & executeMultiple MDB2_AUTOQUERY_INSERT

> ID：11965514
> 
> 赞同：0
> 
> 时间：2012-08-15T07:26:36.083
> 
> 标签：php, mysql, mdb2

我的 MYSQL 数据库表上有一个跨两个字段的索引。我使用 PHP MDB2 MYSQL 扩展提供的 autoPrepare 和 executeMultiple 对 INSERTS 进行批处理。如果我的索引上有重复命中，但它会引发错误并停止批量插入。我正在寻找 INSERT IGNORE 等效项，这是一个 MYSQL 命令，如果尝试重复，它只会忽略错误。

批量插入允许您指定数组中的表字段，指定字段类型，然后指定要在数组中输入的所有值。你最终会得到类似的东西：

```
$sth = $db->extended->autoPrepare($table_name, $table_fields,MDB2_AUTOQUERY_INSERT, null, $types);
$res = $db->extended->executeMultiple($sth, $table_values); 
```

所以没有发送特定的查询。我需要以某种方式发送一个选项，以便它知道不会在重复项上抛出错误，而只是忽略该条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:54:47.777

放弃在 MDB2 中使用批量插入。而是使用带有 ignore 的普通插入：

```
INSERT IGNORE into TABLENAME (field1, field2) VALUES (1,2), (a,b) ... 
```

索引在 field1 和 field2 上。如果对索引值的重复尝试，IGNORE 将跳过该条目，但与 MDB2 批处理命令不同，IGNORE 选项允许查询在遇到重复条目场景时继续。

# r - 如何在 R 中定义向量化函数

> ID：11965515
> 
> 赞同：39
> 
> 时间：2012-08-15T07:26:42.447
> 
> 标签：r

作为标题，我想知道如何在 R 中定义矢量化函数。

*   只是在函数中使用循环吗？
*   这种方法有效吗？
*   什么是最佳做法？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-15T07:47:52.033

R 级别的循环未*矢量化*。R 循环将为向量的每个元素调用相同的 R 代码，这将是低效的。向量化函数通常是指那些采用向量并以有效方式对整个向量进行操作的函数。最终，这将涉及一些 for of 循环，但由于该循环是用 C 等低级语言执行的，因此它可以非常高效并针对特定任务进行定制。

考虑这个愚蠢的函数来成对添加两个向量的元素

```
sillyplus <- function(x, y) {
    out <- numeric(length = length(x))
    for(i in seq_along(x)) {
        out[i] <- x[i] + y[i]
    }
    out
} 
```

它给出了正确的结果

```
R> sillyplus(1:10, 1:10)
 [1]  2  4  6  8 10 12 14 16 18 20 
```

并且是向量化的，因为它可以一次对整个向量进行操作，但它不是我上面描述的意义上的向*量化*，因为它非常低效。`+`在 R 中的 C 级别向量化，所以我们真的只需要`1:10 + 1:10`，而不是 R 中的显式循环。

编写向量化函数的常用方法是使用已经向量化的现有 R 函数。如果您想从头开始，并且您想要对函数执行的操作在 R 中不作为矢量化函数存在（奇怪，但可能），那么您将需要亲自动手并将函数的内容写入C 并在 R 中准备一个小包装器，以使用您希望它处理的数据向量调用您编写的 C 函数。有一些方法可以`Vectorize()`为未矢量化的 R 函数伪造矢量化。

C 不是这里唯一的选择，FORTRAN 和 C++ 一样是可能的，并且感谢 Dirk Eddelbuettel 和 Romain Francois，后者现在使用**rcpp**包更容易实现。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-15T07:46:05.097

向量化函数将返回与其参数之一长度相同的向量。通常，可以通过使用诸如“+”之类的内置函数的组合来获得这样的函数，`cos`或者`exp`也可以使用向量化的函数。

```
vecexpcos <- function(x) exp(cos(x))
vecexpcos( (1:10)*pi )
>    vecexpcos( (1:10)*pi )
# [1] 0.3678794 2.7182818 0.3678794 2.7182818 0.3678794 2.7182818 0.3678794 2.7182818 0.3678794 2.7182818 
```

如果您需要使用非矢量化函数，例如`sum`，您可能需要调用`mapply`或`Vectorize`以获得所需的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-15T09:50:18.970

派对迟到了，但我认为这个问题仍然高度相关，并且最近有一些新方法受到欢迎。因此，还有另一种使用方法对 R 中的函数进行矢量化的`tidyverse`方法。

首先，定义一些数据：

```
x <- c(1,2,3)
y <- c(1,2,4) 
```

现在，假设，我们想对这两个向量执行一些*元素*计算，使得`f(x,y)`.

例如，计算 x 和 y 的每个（一对）元素的总和应该得到：2,4,7。

让我们使用`map2_dbl`from `purrr`（来自 tidyverse 生态系统的一个包）：

```
x <- c(1,2,3)
y <- c(1,2,4)

library(tidyverse)
map2_dbl(.x = x,
         .y = y,
         .f = sum)
#> [1] 2 4 7 
```

可以看出，从 x 和 y 的每对元素计算总和的意义上来说，结果是矢量化的。

总之，`map()`至少在某些情况下，使用及其变体是向量化函数的便捷方式。

# actionscript-3 - AS3 - 从另一个类访问对象

> ID：11965516
> 
> 赞同：0
> 
> 时间：2012-08-15T07:26:54.750
> 
> 标签：actionscript-3, reference, null, typeerror

我有三个班级：Main、Player 和 Car。

主程序创建了一个 Car 和一个 Player。Car 需要追踪玩家的 x 位置。但是下面的代码不起作用。我已经研究并发现将其声明为静态应该可以解决问题，尽管这不是最好的方法吗？

主要的：

```
package { 

import flash.display.MovieClip;
import flash.events.Event;
import flash.events.MouseEvent;

public class Main extends MovieClip
{       
    public static var _player:Player;
    public static var _car:Car;

    public function Main() 
    {
        createPlayer();
    }

    public function createPlayer():void
    {

        _player= new Player();
        _car = new Car();

        _player.x = stage.stageWidth / 2;
        _player.y = stage.stageHeight / 2;

        stage.addChild(_player);
        stage.addChild(_car);
    }

} 
```

}

车：

```
package { 

import flash.display.MovieClip;
import Main;

public class Player extends MovieClip
{
    public function Player()
    {
        trace(Main._car.x);

    }
} 
```

}

但这会导致错误：TypeError：错误＃1009：无法访问空对象引用的属性或方法。在 Player() 在 Main/createPlayer() 在 Main()

我想知道为什么这给了我一个错误，还有什么其他的好方法可以做到这一点？

//编辑：对不起 _hero 是我的错误，它实际上是 _car。非常感谢您...........

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T08:18:52.767

首先：这不是正确的编程方式！您不应该在任何地方都使用静态属性。其次：您的 _player 实例是在您分配`new Car()`给您的 _car 实例之前创建的，这就是它仍然为空的原因。尝试更改他们的线路，以便您拥有：

```
_car = new Car();
_player = new Player(); 
```

同样，这将解决您的问题，但您的编码方式不正确。如果您想引用您的 _car 对象，请将其传递给 Player 类的构造函数。

PS如果对您有帮助，请不要忘记将此帖子标记为答案。

编辑：

以下是一些帮助您入门的代码：

在您的 Player 类中添加一个私有属性，用于存储对 Car 对象的引用。然后为你的 Player 的构造函数添加一个参数，你将在创建新 Player 时传递该参数。请注意，仅当您也想在 Main 类中存储对 Car 对象的引用时才使用它。

```
package { 

import flash.display.MovieClip;
import Main;

public class Player extends MovieClip
{
    private var _car:Car; // add a property to store a reference to the Car object

    public function Player(car:Car) //add a parameter to your Player constructor to pass in a Car object
    {
        _car = car; //assign passed Car object to your property _car
        trace(_car.x) //now you can use _car as you wish
    }
}
} 
```

定义 Player 对象时，您现在需要将 Car 对象传递给它的构造函数。所以这样做：

```
_player = new Player(_car); 
```

如果您不需要在 Main 类中引用 Car 对象，或者最好说是否将 Car 分配给 Player，以便每个 Player 都有自己的 Car，则最好在 Player 中定义一个属性类，像这样：

```
 package { 

import flash.display.MovieClip;
import Main;

public class Player extends MovieClip
{
    public var car:Car; // add a property to store a reference to the Car object, note that now we made the car a public property, so that it can be accessed from outside.

    public function Player() //add a parameter to your Player constructor to pass in a Car object
    {
        car = new Car(); // initialize your variable
        trace(car.x) //now you can use car as you wish from this class
    }
}
} 
```

另请注意，我们在 Player 类中初始化的这个 Car 对象可以从您的 Main 类中访问，如下所示：

```
_player = new Player();
trace(_player.car.x); 
```

我建议您阅读 OOP（面向对象编程）的基本概念，例如封装、继承和多态。在谷歌上搜索一些可以帮助你站起来的好书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:29:56.627

我在类中看不到`Main`对象，`Player`我也看不到. 所以，是NULL。`hero``Main``Main._hero.x`

# jquery - 单击按钮时选择最近的特定类

> ID：11965520
> 
> 赞同：2
> 
> 时间：2012-08-15T07:27:12.997
> 
> 标签：jquery, dom-traversal

我最近问了差不多同样的问题，但是这个问题有点扭曲，所以我上一个问题的答案不起作用，我的评论没有得到任何答案。

正如标题所说，我想在单击 button1 时选择最近的 divtoexpand 类。

```
<div class="test">
    <div class="menu">
        <div class="button1"></div>
    </div>
</div>
<div id="THETWIST"></div>
<div class="divtoexpand"></div>

<div class="test">
    <div class="menu">
        <div class="button1"></div>
    </div>
</div>
<div id="THETWIST"></div>
<div class="divtoexpand"></div> 
```

旧代码：

```
$('.button1').on('click', function() {
  $(this).closest('div.test').next('div.divtoexpand').slideDown();
}); 
```

当测试 div 和 divtoexpand 之间有一个 div 时，这将不起作用..

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T07:33:23.803

`.divtoexpand`假设您想要*跟随*的祖先的`.button1`，那么您就快到了：

```
$('.button1').on('click', function() {
    $(this).closest('.test').nextAll('.divtoexpand').first().slideDown();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:32:11.310

尝试：

```
$(this).parent().parent().next().next('.divtoexpand').slideDown(); 
```

## [看演示](http://jsfiddle.net/j5ajn/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T07:35:08.053

改变

`$(this).closest('div.test').next('div.divtoexpand').slideDown();`

到

`$(this).closest('div.test').nextAll('div.divtoexpand').slideDown();`

[参考](http://api.jquery.com/nextAll/)

# iphone - 我可以在不要求位置数据权限的情况下使用 UIImagePickerController 吗？

> ID：11965521
> 
> 赞同：2
> 
> 时间：2012-08-15T07:27:21.943
> 
> 标签：iphone, ios, uiimagepickercontroller

是否可以在不请求核心位置许可的情况下使用图像选择器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T07:35:23.570

这取决于用户 - 如果他在“设置”中启用了照片地理标记，iOS 将始终请求许可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T09:01:27.880

你可以使用它。您将从其中获得的照片\视频将从任何地理标记数据中删除。如果您需要这些数据，则需要使用“低级 api”（例如`AVFoundation`和）构建自己的选择器`CoreMedia`。不仅如此 - 你不需要询问权限。在这种情况下，系统将向用户显示询问用户此类权限的警报，而在您使用时不会显示`UIImagePickerController`。

# c# - 如何使正则表达式匹配不区分大小写？

> ID：11965524
> 
> 赞同：47
> 
> 时间：2012-08-15T07:27:52.657
> 
> 标签：c#, .net, regex

[我有以下加拿大邮政编码的](http://en.wikipedia.org/wiki/Postal_codes_in_Canada)正则表达式。

```
^[ABCEGHJKLMNPRSTVXY]{1}\d{1}[A-Z]{1} *\d{1}[A-Z]{1}\d{1}$ 
```

它工作正常，但只接受大写字母。我希望它适用于大写和小写字母。

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-08-15T07:59:06.987

只需使用该选项`IgnoreCase`，请参阅[.NET 正则表达式选项](http://msdn.microsoft.com/en-us/library/yd1hzczs.aspx)

所以你的正则表达式创建可能看起来像这样

```
Regex r = new Regex(@"^[ABCEGHJKLMNPRSTVXY]\d[A-Z] *\d[A-Z]\d$", RegexOptions.IgnoreCase); 
```

我也删除了你的所有`{1}`内容，因为它是多余的。每个项目默认匹配一次，无需明确说明。

当您无法在对象上设置它时，另一种可能性是使用内联修饰符。

```
^(?i)[ABCEGHJKLMNPRSTVXY]\d[A-Z] *\d[A-Z]\d$ 
```

# android - ListView 背景点击

> ID：11965530
> 
> 赞同：0
> 
> 时间：2012-08-15T07:28:37.600
> 
> 标签：android, onclick, android-listview

当用户尝试单击我的空 listView 中的背景时，我正在尝试处理 onClick 事件 - 即没有项目。ADK 不想让我将 onClickListener 添加到 ListView，而是坚持认为添加 onItemClickListener 是可行的方法 - 但显然这不适用于空列表。我正在为 listItems 使用带有 xml 描述符的 ListActivity。

谁能建议最好的方法来做到这一点？

```
 <RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:fillViewport="true" >

    <TextView
        android:id="@+id/android:item_text"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:lines="3" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:33:33.857

当您的列表为空时，您可以添加一些将显示的视图。此视图必须具有 id“空”。(http://developer.android.com/reference/android/app/ListActivity.html) 尝试为这个特殊视图添加 onClick。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:35:18.117

在具有 ListView 的布局中添加：

```
<ListView 
android:id="@android:id/list" 
android:layout_width="match_parent"
android:layout_height="match_parent" 
/>

<TextView 
android:id="@android:id/empty" 
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:text="No Results" 
/> 
```

现在将 onClickListener 添加到此 TextView。

当 id as 的 ListView`@android:id/list`为空或尚未填充时，此 TextView 会自动显示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T08:02:12.323

你应该尝试这样的事情：

```
<FrameLayout
    android:id="@+id/emptyList"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ListView />
</FrameLayout> 
```

然后，在您的 Java 代码中，您可以将 onClickListener 添加到您的 emptyList 对象，如果 ListView 的项目计数大于 0，则返回 false （允许单击传递视图层次结构并被您的`onItemClickListener`.

# php - 我如何在学说查询生成器中放置条件

> ID：11965534
> 
> 赞同：4
> 
> 时间：2012-08-15T07:28:54.453
> 
> 标签：php, doctrine-orm, symfony-2.1

我有这个查询

```
$qb->select('u')
           ->from('UserBundle:User', 'u')
           ->where('u.location = :identifier')
           ->orderBy('u.firstName', 'ASC')
           ->setParameter('identifier', 2); 
```

我希望如果 $identifier 存在，那么它应该过滤结果，否则我会得到所有结果，例如

```
$qb->select('u')
               ->from('UserBundle:User', 'u')
                       if($identifier)             
                       ->where('u.location = :identifier')
               ->orderBy('u.firstName', 'ASC')
                       if($identifier) 
               ->setParameter('identifier', 2); 
```

可能吗

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T07:31:07.203

有可能，你只需要重组你的代码。

```
$qb->select('u')
           ->from('UserBundle:User', 'u')
           ->orderBy('u.firstName', 'ASC');
if($identifier) {
        $qb->where('u.location = :identifier')
           ->setParameter('identifier', 2);
} 
```

# java - 难以理解反射

> ID：11965535
> 
> 赞同：-1
> 
> 时间：2012-08-15T07:28:57.257
> 
> 标签：java, android

谁能解释这段代码我对java有点陌生

```
Class c = Class.forName(telephony.getClass().getName());
Method m = c.getDeclaredMethod("getITelephony"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T07:32:46.580

这称为反射。它在运行时而不是编译时访问类、对象和方法。它也不是特定于 Android 的。

“Java 的反射 API 可以在运行时检查类、接口、字段和方法，而无需在编译时知道类、方法等的名称。还可以实例化新对象、调用方法和获取/设置字段使用反射的值。”

[http://tutorials.jenkov.com/java-reflection/index.html](http://tutorials.jenkov.com/java-reflection/index.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T07:33:46.103

**Java 反射**允许正在执行的 Java 程序检查或“自省”自身，并操纵程序的内部属性。例如，Java 类可以获取其所有成员的名称并显示它们。

调用 会`Class.forName("X")`导致名为 X 的类被动态加载（在运行时）。对 forName("X") 的调用会导致初始化名为 X 的类（即，JVM 在类加载后执行其所有静态块）。`Class.forName("X")`返回与“X”类关联的 Class 对象。返回的 Class 对象不是“x”类本身的实例。

`Class.forName("X")`如果尚未加载，则加载该类。JVM 会跟踪以前加载的所有类。此方法使用调用它的类的类加载器。“X”是所需类的完全限定名称。

```
getDeclaredMethod() 
```

第二步是调用诸如getDeclaredMethod之类的方法，以获取该类声明的参数中给定的方法。

查看此以获取更多[信息](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T07:33:35.987

`telephony.getClass().getName()`提取包含 object 的完全限定类名的字符串`telephony`。

`Class.forName(...)`使用完全限定名称检索 Class 对象。

`c.getDeclaredMethod("getITelephony")` 通过反射检索`Method`命名的`"getITelephony"`.

顺便说一句，所有这些都可以重写如下：`telephony.getClass().getDeclaredMethod("getITelephony")`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T07:34:16.117

这将返回与`telephony`变量关联的类的名称：

```
telephony.getClass().getName() 
```

这将返回对具有您之前获得的名称的类的引用：

```
telephony.getClass().getName() 
```

这是没有意义的，因为你可以这样做：

```
Class c = telephony.getClass(); 
```

第二行返回对表示类方法的`Method`对象的引用。`getITelephony``c`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T08:38:11.547

可能您正在尝试在android中自动接听来电...

但重要的一点是，谷歌现在已经阻止了这一点，因为 ITelephony 是一个私有 API。

如果您决定这回答了您的问题，请将其标记为“已接受”。这将提高您和我的声誉分数。

# jquery-ui - 在 Emberjs 构建视图中初始化 jQueryUI 项目

> ID：11965538
> 
> 赞同：0
> 
> 时间：2012-08-15T07:29:20.953
> 
> 标签：jquery-ui, twitter-bootstrap, ember.js

我最近基于 Emberjs 和 twitter bootstrap 构建了一个页面。该页面是使用令人敬畏的 emberjs 绑定引擎动态构建的。我目前确实有一个控制器，有界视图从中呈现 html 列表。

```
{{#each App.myArrayController}}
       {{#view App.MyItemListView contentBinding="this"}}
           <span>{{view.somethingToPrint}}</span>
       {{/view}}
{{/each}} 
```

这样，正如您猜想的那样，我`{{view.somethingToPrint}}`在 span 标签内打印了 N 次数组内容。

现在我正在考虑渲染一个 jQuery UI 滑块列表。我的问题是，鉴于它们将是动态生成的，我什么时候必须调用`$(".slider").slider();`init 方法才能使其“生效”。实际上，实现这一目标的通常方法是什么？

我想过使用以下之一：

*   使用 jQuery 的“livequery”插件，透明地初始化任何添加的项目。缺点是速度很慢，可能无法在所有浏览器上运行。
*   在我创建滑块的每一行嵌入一个完整的脚本标签，这样脚本也将被添加并启动内容。
*   在我的 App.myArrayController 上添加一个观察者，`$(".slider").slider();`如果发生任何变化，它将触发。

但我仍然不相信这些。我习惯使用 twitter 的 Bootstrap，在大多数情况下，不需要搞乱渲染后脚本调用（这正是“bootstrap”的用途）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T10:46:41.253

这是一个示例，为了不留下未回答的问题；）

jsfiddle：http: [//jsfiddle.net/Sly7/bHL66/](http://jsfiddle.net/Sly7/bHL66/)

**javascript**

```
App = Ember.Application.create();

App.myArrayController = Ember.ArrayController.create({
  content: [
    Ember.Object.create({firstName: "Gart", lastName: "Algar"}),
    Ember.Object.create({firstName: "Wayne", lastName: "Campbell"})
  ]
});

App.MyItemListView = Ember.View.extend({

  didInsertElement: function(){
    this.$().hide(); 
    this.$().fadeIn(1000);        
  },

  somethingToPrint: function(){
    return this.get('content.firstName') + ' ' + this.get('content.lastName');        
  }.property()
}); 
```

# wpf - 从 WindowsFormsHost 打开时，上下文菜单不响应按键

> ID：11965540
> 
> 赞同：1
> 
> 时间：2012-08-15T07:29:30.287
> 
> 标签：wpf, keyboard, contextmenu, windowsformshost

当焦点位于 WindowsFormsHost 并且上下文菜单打开时，上下文菜单不会响应向上/向下箭头键的按下。

下面的（几乎是自包含的）代码说明了这个问题：

```
<Window x:Class="FocusAndWinformsSimple.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:wf="clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms"
        Title="MainWindow" Height="350" Width="525">
  <DockPanel Name="DockPanel">
    <DockPanel.ContextMenu>
      <ContextMenu>
        <MenuItem Header="aaa"/>
        <MenuItem Header="bbb"/>
      </ContextMenu>
    </DockPanel.ContextMenu>
    <StackPanel>
      <TextBox/>
      <WindowsFormsHost>
        <wf:MaskedTextBox/>
      </WindowsFormsHost>
    </StackPanel>
  </DockPanel>
</Window> 
```

和后面的代码：

```
 public partial class MainWindow : Window
  {
    public MainWindow()
    {
      InitializeComponent();
      InputBindings.Add(
        new KeyBinding(
          new RelayCommand(OpenContextMenu),
          new KeyGesture(Key.T, ModifierKeys.Control)));
    }

    void OpenContextMenu()
    {
      DockPanel.ContextMenu.PlacementTarget = DockPanel;
      DockPanel.ContextMenu.Placement = PlacementMode.Center;
      DockPanel.ContextMenu.IsOpen = true;
    }
  } 
```

这将显示两个文本框，一个 WPF 和一个 WinForms。如果您按 Ctrl-T，则会出现一个简单的上下文菜单。

现在运行程序

1.  将光标放在 WPF 文本框中
2.  按 Ctrl-T：出现上下文菜单
3.  按向下箭头：选择上下文菜单中的第一项 ('aaa')。

然而

1.  将光标放在 WinForms 文本框中
2.  按 Ctrl-T：出现上下文菜单
3.  按向下箭头：没有任何反应

在我们的应用程序中，键盘导航是必不可少的，所以这很烦人。

谁能帮我解释一下？最好想出一个解决方案，让第二种情况像第一种一样工作。

（我注意到，普通菜单 - 至少使用助记符打开 - 工作正常）。

**更新**

我想，我应该详细说明一下我正在研究的真实案例：我有一个 TabControl，其中每个 TabItem 的内容都是在其他地方开发的（但通常很复杂）。我的 Ctrl-T 上下文菜单将显示选项卡项标题列表，以便在选项卡之间快速导航。（它模仿 Visual Studio 中选项卡右侧的组合框）。

现在，当当前选项卡的内容是 WPF 控件并且焦点在控件内时，一切正常。如果您打开上下文菜单并选择相同的选项卡，焦点将返回到上下文菜单打开之前的位置。这是有效的，因为上下文菜单是一个焦点范围，所以逻辑焦点保持在控件内的位置。

但是，如果内容是 WindowsFormHost，并且焦点在其中，则上下文菜单不会像上面解释的那样工作。下面的第一个答案通过在打开上下文菜单之前将焦点移动到任何 WPF 控件来解决此问题。不幸的是，这也改变了逻辑焦点，使得在上下文菜单关闭后无法重置它。

我曾尝试在更改焦点和打开上下文菜单之前捕获并保存焦点，但没有成功。

我已经解决的解决方案是仅在必要时改变焦点。（检查`Keyboard.FocusedElement == null`似乎工作）。这意味着我的解决方案仅在您将焦点放在 WinForms 组件中、打开上下文菜单并选择不更改选项卡的情况下是次优的。这很少见，所以它比我的第一个问题有了很大的改进。

但我仍然很好奇是否存在更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:08:19.637

我已经尝试了您的示例应用程序，并注意到当在 WPF 文本框中使用光标打开 contextMenu 时，将`logical focus`移动到 contextMenu（光标在文本框中不再可见，因此键在上下文菜单中工作正常）。

但是，当我尝试使用 maskedTextBox 时，逻辑焦点停留在 textBox 上，因此没有适用于 ContextMenu 的键。

因此，作为一种解决方法，我调整了您的代码，看看这是否有帮助-

```
<DockPanel Name="DockPanel" Focusable="True" FocusVisualStyle="{x:Null}">
   .....     
</DockPanel> 
```

将`Focusable`DockPanel 设置为 true 并设置`FocusVisualStyle`为 null，以便在获得焦点时移除 DockPanel 周围的虚线。

现在在打开 contextMenu 之前，将逻辑焦点手动放在它的位置目标上，即 DockPanel，如下所示 -

```
void OpenContextMenu(object param)
{
   Keyboard.Focus(DockPanel);
   DockPanel.ContextMenu.PlacementTarget = DockPanel;
   DockPanel.ContextMenu.Placement = PlacementMode.Center;
   DockPanel.ContextMenu.IsOpen = true;
} 
```

**更新**

由于它的窗口形式文本框的限制，它不会失去对上下文菜单打开的键盘焦点。

> 所以我们必须在打开上下文菜单之前跟踪被屏蔽的文本框是否有焦点，然后在关闭上下文菜单后手动设置焦点。

*代码示例 -*

```
<DockPanel Name="DockPanel" Focusable="True" FocusVisualStyle="{x:Null}">
  <DockPanel.ContextMenu>
     <ContextMenu>
        <MenuItem Header="aaa"/>
        <MenuItem Header="bbb"/>
      </ContextMenu>
   </DockPanel.ContextMenu>
   <StackPanel>
      <TextBox x:Name="txt"/>
      <WindowsFormsHost>
        <wf:MaskedTextBox x:Name="msk"/>
      </WindowsFormsHost>
    </StackPanel>
</DockPanel>

public MainWindow()
{
  InitializeComponent();
  InputBindings.Add(
    new KeyBinding(
      new RelayCommand<object>(OpenContextMenu),
        new KeyGesture(Key.T, ModifierKeys.Control)));
   msk.GotFocus += new EventHandler(msk_GotFocus);
   msk.LostFocus += new EventHandler(msk_LostFocus);
}

bool isFocusOnMaskedTextBox;
void msk_LostFocus(object sender, EventArgs e)
{
   isFocusOnMaskedTextBox = false;
}

void msk_GotFocus(object sender, EventArgs e)
{
   isFocusOnMaskedTextBox = true;
}

void OpenContextMenu(object param)
{
   bool moveFocusOnClose = isFocusOnMaskedTextBox;
   RoutedEventHandler eventHandler = null;
   eventHandler = (s, e) =>
   {
     if (moveFocusOnClose)
        msk.Focus();
     DockPanel.ContextMenu.Closed -= eventHandler;
   };
   if (moveFocusOnClose)
   {
      Keyboard.Focus(DockPanel);
   }
   DockPanel.ContextMenu.IsOpen = true;
   DockPanel.ContextMenu.Closed += eventHandler;
} 
```

# iphone - Facebook 用户 ID iPhone

> ID：11965541
> 
> 赞同：0
> 
> 时间：2012-08-15T07:29:34.017
> 
> 标签：iphone, ios, facebook

我想在用户第一次在应用程序中登录时获取 Facebook access_token 和用户 ID。我已经获得了访问令牌，但正在为 Facebook 用户 ID 苦苦挣扎。

请给我帮助。我如何获得 user_id？

我通过以下方法获取 access_token ：

```
- (void)request:(FBRequest *)request didLoad:(id)result {

_isExtendingAccessToken = NO;
_requestExtendingAccessToken = nil;
NSString* accessToken = [result objectForKey:@"access_token"];
NSString* expTime = [result objectForKey:@"expires_at"];

if (accessToken == nil || expTime == nil) {
    return;
}

self.accessToken = accessToken;

NSLog(@"access token is ---------->%@",self.accessToken);

//////.........
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:38:11.027

尝试查看此[链接](http://developers.facebook.com/docs/reference/rest/users.getInfo/)并使用此代码

```
for (NSDictionary* Info in result)
{
    NSString* uid = [Info objectForKey:@"uid"];
} 
```

希望会有用

# android - 如何获取 google map API key 以在 google play 中发布应用？

> ID：11965542
> 
> 赞同：-4
> 
> 时间：2012-08-15T07:29:36.440
> 
> 标签：android, google-maps, google-maps-api-3

我使用调试证书来开发应用程序，但我刚刚完成了应用程序，我想在 google play 中发布应用程序。我需要其他 API 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:34:02.357

要在 Google Play 上发布，您需要使用自己的唯一密钥对 apk 进行签名，详见[此处](http://developer.android.com/tools/publishing/app-signing.html#releasemode)。

创建自己的唯一密钥后，您需要获取其 MD5 哈希并为其获取地图 API 密钥，就像您为调试证书所做的那样。

# java - 计算二进制间隙

> ID：11965549
> 
> 赞同：-2
> 
> 时间：2012-08-15T07:30:05.940
> 
> 标签：java, binary

我想编写一个代码来计算java中任何给定整数的二进制间隙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:22:19.557

回答这个问题的问题是

*   你不会学到任何东西
*   如果你不能解释你做了什么，你就不能将答案用于家庭作业。

.

```
long l = 0b100101L;
String betweenOnes = Long.toBinaryString(l >> Long.numberOfTrailingZeros(l))
int zeros = Collections.max(Arrays.asList(betweenOnes).split("1+"))).length();
System.out.println(zeros); 
```

印刷

```
2 
```

# iphone - 在 Facebook 上发布链接不显示链接缩略图？

> ID：11965560
> 
> 赞同：1
> 
> 时间：2012-08-15T07:30:51.407
> 
> 标签：iphone, ios, facebook, url, thumbnails

我正在使用 facebook sdk 3.0

它很容易安装，但我发现了一些奇怪的东西

我无法显示链接的缩略图

检查我的代码，它很短

```
NSString *message = [NSString stringWithFormat:@"%@ is reading this news : \n %@", 
                                self.loggedInUser.first_name,[[dataList objectAtIndex:index] objectForKey:@"NewsURL"]];
           [FBRequestConnection startForPostStatusUpdate:message completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
//                    [self showAlert:message result:result error:error];
           }]; 
```

就是这样~

但它只在墙上贴了一个链接，没有图像......

我尝试发布相同的 url 来更新状态，它可以显示拇指图像，

这是示例网址

[http://www.cronicadelquindio.com/noticia-completa-titulo-policia_homenajeo_a_ninos_enfermos_de_cancer__recibieron_el_grado_de_capitan_honorario-seccion-judiales-nota-50748.htm](http://www.cronicadelquindio.com/noticia-completa-titulo-policia_homenajeo_a_ninos_enfermos_de_cancer__recibieron_el_grado_de_capitan_honorario-seccion-judiciales-nota-50748.htm)

当我使用 Facebook api 时我错过了什么？？？

任何回复或回答都会有所帮助

谢谢

韦伯

****** *** ** *** ** *** ** *** ** *** ****编辑****** ** *** ** *** ** *** ** *** ** *** ********

 **它需要使用`FBRequestConnection startWithGraphPath`

所以，这是我的最终解决方案

```
NSMutableDictionary *postParams =  [[NSMutableDictionary alloc] initWithObjectsAndKeys:newsURL, @"link",
                                                                             newsTitle,@"name",nil];

           [FBRequestConnection startWithGraphPath:@"me/feed"
                                        parameters:postParams
            HTTPMethod:@"POST"
            completionHandler:^(FBRequestConnection *connection,id result,NSError *error) {
}];
           [postParams release]; 
```

也请参考这个[链接](http://developers.facebook.com/docs/reference/api/post/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:50:33.667

您将 URL`message`作为纯文本放入参数中。

尝试将其放入`link`参数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T07:04:17.477

就我而言，我可以使用以下代码片段在 Facebook 上发布视频 URL 作为链接。

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                           g_videoURL, @"link",
                                           VideoDescriptionHeading, @"message",
                                           VideoThumbURL, @"picture",
                                           VideoTitle, @"name",
                                           VideoDescription, @"description",

                                           nil];

            [[appDelegate facebook] requestWithGraphPath:@"me/feed"
                                               andParams:params
                                           andHttpMethod:@"POST"
                                             andDelegate:self]; 
```**

# javascript - JS 计数器不断更新

> ID：11965561
> 
> 赞同：5
> 
> 时间：2012-08-15T07:30:54.327
> 
> 标签：javascript, counter, continuous

[如何在站点上实现实时和持久的数字计数器](https://stackoverflow.com/questions/4879567/how-to-implement-a-live-and-persistent-number-counter-on-a-site)

所以我在看这个问题（^），我想做同样的事情，只是有点不同。

我需要其中一个从麻木的 $138,276,343 中每秒增加 15.8 美分

最好我希望逗号像正常的美元金额一样。

有什么办法可以让这个工作吗？我难住了。和上面问题的发帖者一样，我对JS的了解不多。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T08:28:25.977

由于我必须创建自己的格式货币函数，因此我花了很长时间才回答。

**现场演示可以在这里找到：http: [//jsfiddle.net/dm6LL/](http://jsfiddle.net/dm6LL/)**

每秒的基本更新非常简单，将通过 JavaScript 的`setInterval`命令完成。

```
setInterval(function(){
    current += .158;
    update();
},1000); 
```

您在上面的代码中看到的`update()`函数只是一个简单的更新程序，它引用一个带有`amount`id 的对象，将格式化的当前金额放入页面上的 div 中。

```
function update() {
    amount.innerText = formatMoney(current);
} 
```

`update()`您在函数中看到的金额和电流是预定义的：

```
var amount = document.getElementById('amount');
var current = 138276343; 
```

然后剩下的就是我的`formatMoney()`函数，它接受一个数字并将其转换为货币字符串。

```
function formatMoney(amount) {
    var dollars = Math.floor(amount).toString().split('');
    var cents = (Math.round((amount%1)*100)/100).toString().split('.')[1];
    if(typeof cents == 'undefined'){
        cents = '00';
    }else if(cents.length == 1){
        cents = cents + '0';
    }
    var str = '';
    for(i=dollars.length-1; i>=0; i--){
        str += dollars.splice(0,1);
        if(i%3 == 0 && i != 0) str += ',';
    }
    return '$' + str + '.' + cents;
}​ 
```

# asp.net-mvc - 为 IEnumerable 创建 ViewModel 所有周日在月

> ID：11965570
> 
> 赞同：1
> 
> 时间：2012-08-15T07:31:55.730
> 
> 标签：asp.net-mvc, model-view-controller

对于 allSundaysInMonth 的 ViewModel，我保持不变：

```
 namespace TradeUK.Admin.Web.ViewModels
  {
      public class SundaysInMonthViewModel
      {
         public IEnumerable<SelectListItem> AllSundays { set; get; }
         public string SelectedSunday { set; get; }
      }
  } 
```

然后在我的操作中使用新代码：

```
public ActionResult TradeUKKPISearchesData() //show dropdownlist in the view
{
  var now = DateTime.Now;
  var lastMonth = now.AddMonths(-1);
  var lastMonthSundays = GetDatesOfSundays(lastMonth.Year, lastMonth.Month);
  var thisMonthSundays = GetDatesOfSundays(now.Year, now.Month);
  var sundaysToTakeFromLastMonth = 2;
  var sundays = lastMonthSundays.Skip(Math.Max(0, lastMonthSundays.Count() - sundaysToTakeFromLastMonth)).Take(sundaysToTakeFromLastMonth).Concat(thisMonthSundays);

  var allSundaysInThisMonth = new SundaysInMonthViewModel
  {
    AllSundays = sundays.Select(x => new SelectListItem
    {
      Value = x.ToString("dd-MM-yyyy"),
      Text = x.ToString("dd-MM-yyyy"),
    });

    //or must I have the code here? not sure how all this works yet
    SelectedSunday = sundays.Select(y => new SelectListItem
    {
      Value = 
      Text = 
    }) 
  };

  //this is what I meant or can I add this to the above?
  var selectedSunday = new SundaysInMonthViewModel{
    SelectedSunday = sundays.Select(y => new SelectListItem
    {
      Value = 
    })
  }
  return View(allSundaysInThisMonth);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:44:18.687

```
public IEnumerable<DateTime> GetDatesOfSundays(int year, int month)
{
    var ci = CultureInfo.InvariantCulture;
    for (int i = 1; i <= ci.Calendar.GetDaysInMonth(year, month); i++)
    {
        var date = new DateTime(year, month, i);
        if (date.DayOfWeek == DayOfWeek.Sunday)
        {
            yield return date;
        }
    }
} 
```

然后在你的控制器中：

```
public ActionResult TradeUKKPISearchesData()
{
    var now = DateTime.Now;
    var lastMonth = now.AddMonths(-1);
    var lastMonthSundays = GetDatesOfSundays(lastMonth.Year, lastMonth.Month);
    var thisMonthSundays = GetDatesOfSundays(now.Year, now.Month);
    var sundaysToTakeFromLastMonth = 2;
    var sundays = lastMonthSundays
        .Skip(Math.Max(0, lastMonthSundays.Count() - sundaysToTakeFromLastMonth))
        .Take(sundaysToTakeFromLastMonth)
        .Concat(thisMonthSundays);

    var allSundaysInThisMonth = new SundaysInMonthViewModel
    {
        AllSundays = sundays.Select(x => new SelectListItem
        {
            // TODO: Adjust the formats you want for the 
            // Value and Text of your ddl
            Value = x.ToString("yyyy-MM-dd"),
            Text = x.ToString("yyyy-MM-dd"),
        }),
        SelectedSunday = thisMonthSundays
            .Where(x => x < now)
            .Last()
            .ToString("yyyy-MM-dd")
    };
    return View(allSundaysInThisMonth);
} 
```

在您看来：

```
@model SundaysInMonthViewModel
...
@Html.DropDownListFor(x => x.SelectedSunday, Model.AllSundays) 
```

# php - xls 文件未在 codeigniter 中上传？

> ID：11965575
> 
> 赞同：0
> 
> 时间：2012-08-15T07:32:13.210
> 
> 标签：php, codeigniter, file-upload, csv, xls

我想上传 csv 文件和 xls 文件，我的代码在下面给出了
`

```
 `$configUpload['upload_path'] = './user_status/';`
         $configUpload['allowed_types'] = 'XLS|text/comma-separated-values|application/csv|application/excel|application/vnd.ms-excel|application/vnd.msexcel|text/anytext|text/plain|text/csv|csv|application/vnd.ms-excel';
         $configUpload['max_size'] = '5000';
         $this->load->library('upload', $configUpload);
         $this->upload->do_upload('input field name')`; 
```

我的 csv 文件上传得很好，但是当我选择 xls 文件时，codeigniter 显示错误“不允许您尝试上传的文件类型”。

print_r($_FILES) 的结果是

```
Array ( [user_status_csv] => Array ( [name] => VTRACK.XLS [type] => application/vnd.ms-excel [tmp_name] => C:\xampp\tmp\phpB2C4.tmp [error] => 0 [size] => 2627412 ) ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T16:08:25.840

我有同样的问题。我通过修改 xls 的 mime 来解决

```
'xls'   =>  array('application/excel', 'application/vnd.ms-excel', 'application/msexcel'), 
```

至

```
array('application/excel', 'application/vnd.ms-excel', 'application/octet-stream'), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T07:45:42.983

你也可以试试 XLSX

```
 $configUpload['allowed_types'] = '**XLSX|**XLS|text/comma-separated-values|application/csv|application/excel|application/vnd.ms-excel|application/vnd.msexcel|text/anytext|text/plain|text/csv|csv|application/vnd.ms-excel'; 
```

你也可以像这样给出文件扩展名

```
 $configUpload['allowed_types'] = 'xls|xlsx|csv'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T08:31:26.507

您可以尝试使用类似主题的解决方案。答案表明浏览器将 xls(x) 作为应用程序/zip 发送。

请参考此主题：[使用 codeigniter、mime-type 错误上传 xls 或 xlsx 文件](https://stackoverflow.com/questions/9166892/upload-xls-or-xlsx-files-with-codeigniter-mime-type-error)

**解决方案：**

我已在 mime 类型文件 (application/config/mimes.php) 中添加/替换了以下行：

```
'xlsx' => array('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet','application/zip'), 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T16:19:19.817

您必须在 mimes.php 配置文件中设置 mime 类型。您可以使用上传文件 calss 中的 data() 方法确定您的文件 mime 类型

请检查以下内容：

[http://isaber.info/blog/2013/01/23/codeigniter-upload-files-not-work/](http://isaber.info/blog/2013/01/23/codeigniter-upload-files-not-work/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-03T05:59:27.880

xls 或 xlsx,csv 问题与 mime 类型有关。

解决方案是：

```
if ( $this->upload->do_upload('filename') ){
       $img = $this->upload->data();
       $ext = $img['file_ext'];                            
       $post['xlfile'] = time().$ext;
} else {
       var_dump($this->upload->data());
       exit();                            
       redirect('hr/hr/dashboard/');
} 
```

如果excel文件上传失败，则在else条件下写入

> var_dump($this->upload->data()); 因此，将识别 mime 的类型。按索引名称 file_type 复制输出数组。
> 
> 'file_type' => 字符串'application/vnd.ms-office'（长度=25）

然后打开 application/config/ 文件夹中的 mimes.php。

搜索 xls、xlsx 并为数组添加以下 mime 类型。

最大它涵盖了所有的 mime 类型。

```
'xls' =>       array('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'application/zip', 'application/x-zip', 'application/vnd.ms-excel', 'application/msexcel','application/excel','application/vnd.ms-office'), 
```

这将像魅力一样起作用。

# mysql - mysql在具有范围的一列中过滤multipal json数据

> ID：11965581
> 
> 赞同：0
> 
> 时间：2012-08-15T07:32:48.303
> 
> 标签：mysql, json, range

一个带有列的表包含如下数据

```
[{"id":"1","value":"addy"},{"id":"2","value":"fname"},{"id":"3","value":"lname"},{"id":"4","value":"kfjsdkfj"},{"id":"5","value":"1985-12-02"},{"id":"6","value":"20"},{"id":"7","value":"20"},{"id":"8","value":"2"},{"id":"9","value":"20"},{"id":"10","value":"20"},{"id":"11","value":"20"},{"id":"12","value":"20"},{"id":"13","value":"1"},{"id":"14","value":"kljfk"},{"id":"15","value":"2"},{"id":"16","value":"1"},{"id":"17","value":"2"},{"id":"18","value":"3"},{"id":"19","value":""},{"id":"20","value":"1"}] 
```

这只是一个示例数据，我有一千行相同但值不同的行

我想过滤此列，例如日期范围和数据范围

我试过了

```
 `SELECT * 
  FROM  `my_table` 
  WHERE  `my_field` 
  REGEXP  '{"id":"15","value":"(1[0-9]|2000)"}' 
```

` 在查询的情况下，但它不工作

什么正则表达式可以帮助我按范围查找值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-04T21:55:25.723

试试看

SELECT id FROM table_name WHERE field_name REGEXP '"key_name":"([^"] *)key_word([^"]* )"';

# 3d - 从高程数据创建 3D 网格？

> ID：11965583
> 
> 赞同：1
> 
> 时间：2012-08-15T07:32:53.413
> 
> 标签：3d, gis, gdal

我正在寻找从地形高程数据中渲染一些图像，并且想知道这种事情的最佳工具是什么。基本上我想从不同的位置和角度生成一座山的图像。图像可能有些粗糙和简单。

我已经使用了很多 GDAL 命令行工具，而 gdaldem 在创建自上而下的阴影地形图方面做得很好，但我还没有发现任何可以实现不同相机方向的东西。

我正在考虑的两种一般方法是：

*   使用 GDAL python 绑定和针孔相机的方程并推出我自己的解决方案。如果可能的话，我想避免这样做:)
*   使用现有工具来渲染图像，或者至少生成一个 3d 网格，这样我就可以用另一种方式渲染它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-29T16:15:13.107

您可以使用 Numpy/Scipy 中的 Delaunay 三角测量例程来获取您要寻找的网格；但这仍然只是在推出您自己的完整解决方案的漫长道路上的第一步。

就此而言，考虑仅使用数字地形数据，并通过任何临时方案将四个相邻点的每个四边形划分为两个三角形。那不是“3-D网格”吗？换句话说，要创建一个三角形网格（用于额外的 3D 渲染）：

*   考虑将地形栅格上的每个点连接到其四个邻居（N、S、E、W）；
*   此外，将每个四边形与另一对对角线相邻对分开。（例如：“分类使用 SW-NE 对角线”，或“使用均值更接近四边形中所有四个点均值的对角线”。）

Matplotlib 具有渲染这样的网格的能力，但是对于合理的地形补丁，您可能需要的点数量可能几乎完全淹没了 matplotlib 的动态特征（平移和缩放；甚至 3D 的旋转）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-01T18:21:52.500

在推出自己的项目之前，您可能需要查看[虚拟地形项目。](http://vterrain.org/)该项目的目标是*促进创建工具，以便以交互式 3D 数字形式轻松构建现实世界的任何部分。.. 工具及其源代码可免费共享，以帮助加速必要技术的采用和开发。*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-02-29T19:14:24.740

我认为[GrassGIS](https://grass.osgeo.org/)可能能够做你想做的事情。

你可以在[这里](https://grass.osgeo.org/screenshots/3D/)查看 GrassGIS 可以做什么的一些截图。

# language-agnostic - 如果 32 位和 64 位 CPU 之间的唯一区别是它们的寄存器大小，那么为什么必须为 64 位平台重写 32 位程序？

> ID：11965587
> 
> 赞同：11
> 
> 时间：2012-08-15T07:33:21.930
> 
> 标签：language-agnostic, assembly, word, cpu

编写 64 位程序时，源代码方面的实际区别是什么？例如，只是装配不同吗？这不像是 C++ 的 64 位版本。如果它像编译器上的一个选项一样简单，那么为什么更多的程序不是原生的 64 位？如果 32 位与 64 位 CPU 的唯一区别是寄存器大小，我看不出这会如何影响程序（除了能够寻址更多内存）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-15T09:13:48.893

32 位/64 位移植的典型缺陷是：

1.  程序员的隐含假设`sizeof(void*) == 4 * sizeof(char)`.
    如果您做出这个假设并且例如以这种方式分配数组（“我需要 20 个指针，所以我分配 80 个字节”），您的代码会在 64 位上中断，因为它会导致缓冲区溢出。

2.  “小猫杀手”（re @SK-logic），`int x = (int)&something;`（反之亦然`void* ptr = (void*)some_int`）。再次假设`sizeof(int) == sizeof(void*)`。这不会导致溢出但会*丢失数据*- 即指针的高 32 位。

    这两个问题都属于称为*类型别名*的类（假设两种类型之间在二进制表示级别上具有同一性/可互换性/等效性），并且此类假设很常见；就像在 UN*X 上，假设`time_t`, `size_t`,`off_t`是`int`, 或在 Windows 上, `HANDLE`,`void*`和`long`可互换等...

3.  关于数据结构/堆栈空间使用的假设（参见下面的 5.）。在 C/C++ 代码中，*局部变量*是在栈上分配的，32bit 和 64bit 模式使用的空间是不同的，原因在于以下几点，并且由于传递参数的规则不同（32bit x86 通常在栈上，64bit x86 部分在寄存器中）。在 32 位上使用默认堆栈大小的代码可能会导致 64 位上的堆栈溢出崩溃。
    这相对容易发现是导致崩溃的原因，但取决于应用程序的可配置性，可能难以修复。

4.  32 位和 64 位代码之间的时序差异（由于不同的代码大小/缓存占用，或不同的内存访问特性/模式，或不同的调用约定）可能会破坏“校准”。说，`for (int i = 0; i < 1000000; ++i) sleep(0);`32位和64位可能会有不同的时间......

5.  最后是**ABI**（应用程序二进制接口）。64 位和 32 位环境之间的差异通常比指针的大小更大......
    目前，存在 64 位环境的两个主要“分支”，IL32P64（Win64 使用 -`int`并且`long`是`int32_t`，只有`uintptr_t`/`void*`是`uint64_t`，根据大小整数从`<stdint.h>`) 和 LP64 （UN*X 使用 - `int`is `int32_t`、`long`is`int64_t`和`uintptr_t`/ `void*`is `uint64_t`），但也有不同对齐规则的“细分” - 某些环境假设`long`，`float`或`double`以各自的大小对齐，而其他人则假设它们以四个字节的倍数对齐。在 32 位 Linux 中，它们以 4 个字节对齐，而在 64 位 Linux 中，以 4 个字节和8 个字节的倍数`float`对齐。 这些规则的结果是，在许多情况下，即使数据类型声明完全相同，结构/类成员的位和偏移量在 32 位和 64 位环境之间也是不同的。 除了影响数组/向量分配之外，这些问题还会影响数据输入/输出，例如通过文件 - 如果 32 位应用程序写入例如相同应用程序为 64 位读入重新编译的文件，结果将不会是所希望的。 刚刚给出的例子只是关于*语言原语*`long``double`
    `sizeof(struct { ...})`
    `struct { char a; int b; char c, long d; double e }`
    *( `char`, `int`,`long`等) 但当然会影响各种平台相关/运行时库数据类型，无论是`size_t`, `off_t`, `time_t`, `HANDLE`, 基本上是任何非平凡的`struct`// ... `union`-`class`所以这里的错误空间很大，*

 *然后是较低级别的差异，例如手动优化装配（SSE/SSE2/...）；32bit 和 64bit 有不同（数量）的寄存器，不同的参数传递规则；所有这些都会强烈影响此类优化的执行方式，并且很有可能例如在 32 位模式下提供最佳性能的 SSE2 代码将需要重写/需要增强以提供最佳性能 64 位模式。

还有 32 位和 64 位的*代码设计*约束非常不同，尤其是在内存分配/管理方面；一个经过仔细编码以“最大限度地利用它可以在 32 位中获得的内存”的应用程序将在如何/何时分配/释放内存、内存映射文件使用、内部缓存等方面具有复杂的逻辑 - 其中大部分将在 64 位中是有害的，您可以“简单地”利用巨大的可用地址空间。这样的应用程序可能会重新编译为 64 位就好了，但在那里的性能比一些没有最大化 32 位窥视孔优化的“古老的简单弃用版本”更差。

所以，归根结底，它也是关于增强/增益的，这就是更多工作的地方，部分是编程，部分是设计/需求。即使你的应用程序在 32 位和 64 位环境中都干净地重新编译并在两者上都经过验证，实际上是*受益*于 64 位？是否可以/应该对代码逻辑进行更改以使其在 64 位中做得更多/运行得更快？您可以在不破坏 32 位向后兼容性的情况下进行这些更改吗？对 32 位目标没有负面影响？增强功能将在哪里，您可以获得多少？
对于大型商业项目，这些问题的答案通常是路线图上的重要标志，因为您的起点是一些现有的“赚钱者”......

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-15T07:42:42.300

并非所有程序都必须重新编写才能在 64 位平台上运行。通常，重写程序是为了利用某些 64 位操作系统上更大的自由度，例如更大的地址空间，但这并不意味着它们必须重写才能工作。

有些程序可能必须重新编译，而源代码保持不变。一些使用中间表示和即时编译的编程环境允许相同的二进制文件在 32 位或 64 位操作系统上原样运行。

正如其他答案所述，在需要重写本机程序的地方，通常是由于对指针大小的假设。有些人可能会称这些假设为错误。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-15T07:35:31.733

它们有不同的内存对齐问题，而且许多新手程序员都假设一切都是 32 位的（指针大小、文件偏移量、时间戳大小等）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T05:08:06.187

对于用编译语言正确编写的程序，需要做的就是重新编译它。唯一需要“重写”（甚至修改）的程序是那些一开始就写得不好的程序，它们会做出很多虚假的假设，并且可能会调用未定义的行为，比如狂野。

对于未编译为机器代码但以某种半解释/字节码/JIT 形式解释或运行的语言，实际上很难制作一个在从 32 位机器迁移到 64 位机器时中断的程序。它可能“破坏”的最有可能的方式就是使用更多内存并且可能会用完。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-15T07:36:52.747

在 64 位系统中，指针通常是 64 位的。*

# wcf - ELMAH 未登录 WCF

> ID：11965588
> 
> 赞同：0
> 
> 时间：2012-08-15T07:33:22.397
> 
> 标签：wcf, error-handling, elmah

我已经实现了这里解释的解决方案：[Exception Logging for WCF Services using ELMAH](https://stackoverflow.com/questions/895901/exception-logging-for-wcf-services-using-elmah)

当我调试我的代码时，ErrorHandler 中的 ProvideFault 被正确执行，并且调用 ELMAH 的行也被命中： Elmah.ErrorSignal.FromCurrentContext().Raise(error);

但是 ELMAH 不会记录任何错误，也不会发送电子邮件（两者都在 web.config 中设置）。但是如果我直接调用 ELMAHS 日志方法，ELMAH 会在数据库中创建一个日志条目： Elmah.ErrorLog.GetDefault(HttpContext.Current).Log(new Elmah.Error(error));

任何有这个问题的人？

非常感谢所有输入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:15:58.657

我以前很困惑——现在我更困惑了！我试图上传我的解决方案，它可以在 IIS 上运行？！我在本地测试 i 时不工作，但在服务器上工作。为什么对我来说是个谜...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T13:36:21.387

不确定您在问题中提供的内容可能有什么问题，但请尝试完成[此博客文章中概述的所有步骤。](https://lbenotes.wordpress.com/2012/01/30/getting-elmah-to-work-with-wcf-services-hosted-in-iis/)

# android - 旋转/平移矩阵的适当乘法

> ID：11965593
> 
> 赞同：19
> 
> 时间：2012-08-15T07:33:56.093
> 
> 标签：android, opengl-es, opengl-es-2.0, linear-algebra

![关于任意点的旋转和平移](../Images/af40f91640a87e5da05fbc7a54126461.png)

为了旋转/平移对象（仅围绕 z 轴旋转和仅在 xy 平面中平移）不仅针对全局中心（设备中心）而且还针对其他任意点，我创建了一个正确的算法（因为所有高级与我讨论过的编码人员认为它是正确的），**但是在实现中删除****不需要**的翻译需要花费大量时间（算法创建于 8 月 4 日并在同一天实施，此后代码已修改 15 次）。

这是实现**[http://www.pixdip.com/opengles/transform.php#ALGO1](http://www.pixdip.com/opengles/transform.php#ALGO1)**

产生不需要的翻译的代码行在里面：

`private static void updateModel(int upDown, float xAngle, float yAngle, float zAngle) {`

并在下面列出：

1.  `Matrix.multiplyMV(GLES20Renderer._uBodyCentreMatrix, 0, GLES20Renderer._ModelMatrixBody, 0, GLES20Renderer._uBodyCentre, 0);`

2.  `objX = GLES20Renderer._uBodyCentreMatrix[0];`

3.  `objY = GLES20Renderer._uBodyCentreMatrix[1];`

**即使进行了以下更改，沿 +Y 的不良翻译仍然存在：**

1.  `objY = _uBodyCentreMatrix[1] - _uBodyCentre[1];`

2.  `zAngle = 0;`

3.  `ds = 0;`

由于 Renderer 类的以下字段，每次调用 时，该值`-0.545867f`都会添加到 Y 坐标：`onDrawFrame()`

`private static final float[] _uBodyCentre = new float[]{-0.019683f, -0.545867f, -0.000409f, 1.0f};`

`protected static float[] _uBodyCentreMatrix = new float[4];`

在**[http://www.pixdip.com/opengles/transform.php#FIELDS](http://www.pixdip.com/opengles/transform.php#FIELDS)**

**我需要帮助来理解为什么会发生这种不希望的翻译，转换到底出了什么问题，或者是算法有问题。**

**万向节锁在这里会成为问题吗？**

请不要要求我执行/练习更简单的示例，因为我已经准备好了 Renderer 类，用于关于全局 z 轴的旋转/平移，而我所从事的这个新任务使用相同的类，并在`updateModel()`

（请注意，所需的旋转仅围绕 z 轴，平移仅在 xy 平面上）

[API 10->15]

**实际的 Renderer 类有两个对象： tank turret(nozzle) 和 tank body**，而 turret(nozzle) 有不想要的向前平移，body 有不想要的向后平移

用于设备中心翻译/旋转的 Apk（在 opengles 2.0 中很容易制作）： [http ://www.pixdip.com/opengles/global.php](http://www.pixdip.com/opengles/global.php)

用于关于任意点的平移/旋转的 Apk（沿 +Y 有不希望的平移）： [http ://www.pixdip.com/opengles/local.php](http://www.pixdip.com/opengles/local.php)

用于翻译/旋转的任意点的 Apk，其中 updateModel() 仅被调用 4 次： [http](http://www.pixdip.com/opengles/limited.php) ://www.pixdip.com/opengles/limited.php 和所需的代码（应该足够了）在这里：[http:// www.pixdip.com/opengles/code.php](http://www.pixdip.com/opengles/code.php)

对象的一部分（喷嘴/炮塔，主体）当前围绕它们自己的中心而不是对象的中心（即_playerCentre）旋转，稍后我将对其进行修改。

我试图演示逻辑**[http://www.pixdip.com/opengles/images.php](http://www.pixdip.com/opengles/images.php)**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T07:05:26.150

看起来问题是：

```
Matrix.multiplyMV(GLES20Renderer._uBodyCentreMatrix, 0, GLES20Renderer._ModelMatrixBody, 0, GLES20Renderer._uBodyCentre, 0); 
```

Matrix.multiplyMV 是一种将 4 元素向量乘以 4x4 矩阵并将结果存储在 4 元素列向量中的方法。在矩阵表示法中：结果 = lhs x rhs。如果 resultVector 元素与 lhsMatrix 或 rhsVector 元素重叠，则 resultVector 元素值未定义。

我认为您没有发布所有代码，所以我无法确定，但根据您对“_uBodyCentreMatrix”的命名判断，您可能遇到错误，因为它不是 4 元素列向量。

我假设“_ModelMatrixBody”是一个 4x4 矩阵，“_uBodyCentre”是一个 4 元素向量，否则这些也可能有问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T10:31:14.877

[已解决] java 浮点错误是唯一的原因

M = T * I * T[inv]

没有导致单位矩阵，所以而不是使用 Matrix.MultiplyMM

我输入矩阵之间的所有乘法

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T17:30:35.117

你可以使用这样的方法：

```
public void rotateToAbritrary(float[] arbitraryPoint, float xAngle, float yAngle, float zAngle) {
    Matrix.translateM(modelMatrix, 0, arbitraryPoint[0], arbitraryPoint[1], arbitraryPoint[2]);
    float max = Math.max(xAngle, Math.max(yAngle, zAngle));
    if(max != 0.0f) Matrix.rotateM(modelMatrix, 0, max, xAngle / max, yAngle / max, zAngle / max);
    Matrix.translateM(modelMatrix, 0, -arbitraryPoint[0], -arbitraryPoint[1], -arbitraryPoint[2]);
} 
```

这就是我的看法，至少，我把你留给实施。我收集您的代码不会遭受万向节锁定。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-23T15:07:09.860

[http://tutorialrandom.blogspot.com/2012/08/how-to-rotate-in-3d-using-opengl-proper.html](http://tutorialrandom.blogspot.com/2012/08/how-to-rotate-in-3d-using-opengl-proper.html)

我发现这是最简单的旋转方式，无需任何形式的万向节锁定或奇怪的平移。它是一个 iOS 示例，但我确信可以轻松应用于 android。它也用于 3d 旋转，但只需不绕其中一个轴旋转即可轻松应用于 2d。

# c++ - 在 50...60 个文件之间传递类对象

> ID：11965595
> 
> 赞同：0
> 
> 时间：2012-08-15T07:34:06.333
> 
> 标签：c++, file, oop, struct, instance

我用 C++ 编写 OOP 软件，我需要在文件之间传递我的类的实例，50...60 个文件。不幸的是，我使用了一个使用回调函数而不是对象的库。

**问题：** 我在 cpp 文件之间使用了一些状态，例如 struct，但出现`multiple definition`错误或... 如何在 50...60 个类之间传递每个类的一个实例？

```
Class A{}; A *instanceA = new A();
Class B{}; B *instanceB = new B();
.
.
.
Class Z{}; Z *instanceZ = new Z(); 
```

我需要在文件之间传递 intaanceA、intanceB 等。你有什么主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T07:37:12.840

我怀疑您在头文件中定义了实例并将其包含在多个文件中：

`A.h`：

```
class A{};

A* instanceA = new A(); 
```

`b.cpp`和`c.cpp`两者`#include <A.h>`，导致多重定义错误。

要更正，您可以使用在头文件`extern`中*声明实例并将其**定义*在一个`.cpp`文件中：

`A.h`：

```
class A{};
extern A* instanceA; 
```

`A.cpp`：

```
A* instanceA = new A(); 
```

* * *

另一个原因是`extern`在头文件中使用但`instanceA`在多个`.cpp`文件中定义（就像这里的情况一样）。

# c++ - Diamond-inheritance 场景在 G++ 中编译良好，但在 VC++/Eclipse 中产生警告/错误

> ID：11965596
> 
> 赞同：14
> 
> 时间：2012-08-15T07:34:10.797
> 
> 标签：c++, oop, class, multiple-inheritance, virtual-inheritance

我有一个基类“Base”，它是一个纯虚拟类：

```
class Base {

public:
    virtual void A() = 0;
    virtual void B() = 0;

    virtual ~Base() { } // Eclipse complains that a class with virtual members must have virtual destructor
}; 
```

我还有 2 个其他类，其中一个实现 A()，另一个实现 B()：

```
class DerivedA : public virtual Base
{
public:
    virtual void A() {
        printf("Hello from A");
    }
};

class DerivedB : public virtual Base
{
public:
    virtual void B() {
        printf("Hello from B");
    }
}; 
```

声明中的 virtual 关键字应该可以解决菱形问题。

现在我想将这两个类组合成另一个类，这样 A() 和 B() 都实现了，如下所示：

```
class DerivedC: public DerivedA, public DerivedB {
     // Now DerivedA and DerivedB are combined
};

// Somewhere else in the code
DerivedC c;
c.A();
c.B(); 
```

**问题：** 即使 G++ 可以很好地编译代码，Eclipse 也会给出错误：`The type 'DerivedC' must implement the inherited pure virtual method 'Base::B'`. 使用 Visual Studio 编译时，我收到 2 个警告：

```
warning C4250: 'DerivedC' : inherits 'DerivedB::DerivedB::B' via dominance
warning C4250: 'DerivedC' : inherits 'DerivedA::DerivedA::A' via dominance 
```

**所以问题是：**这样做的正确方法是什么？上面的代码会产生未定义的行为吗？

**注意：**标题可能有点误导，我不知道这个问题的好标题是什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T08:09:55.330

> **这样做的正确方法是什么？上面的代码会产生未定义的行为吗？**

该代码完全有效。这里没有未定义的行为。通过类对象
的非限定调用将始终调用，而通过类对象的非限定调用将始终调用实例。`A()``DerivedC``DerivedA::A()``B()``DerivedC``DerivedB::B()`

Visual C++ 给你一个警告，因为你的代码使用了一个不太为人所知的虚拟继承特性，这对大多数普通用户来说可能并不明显，并且可能会让他们感到惊讶。在这种情况下，应将*警告*视为*信息性吹毛求疵*，而不是警告。

请注意，C++ 标准不限制编译器针对完全有效的代码发出信息警告。[警告 C4250](http://msdn.microsoft.com/en-us/library/6b3sy7ae%28VS.80%29.aspx)的文档提供了一个示例，告诉您 Visual C++ 选择发出此警告的原因。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-15T07:40:42.803

你可能想试试这个：

```
class DerivedC: public DerivedA, public DerivedB {
public:
    using DerivedA::A;
    using DerivedB::B;
}; 
```

我自己无法使用 Eclipse 或 VC++ 进行测试...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-15T08:20:32.130

我不知道为什么编译器会抱怨这些；这只是标准的混合技术。类`Base`,`DerivedA`和 `DerivedB`是抽象的，不能被实例化，但是对于 mixins 来说通常是这样的。mixin 的全部意义在于它没有实现所有的接口。并通过 其继承的成员`DerivedC`实现。`A()``B()`

如果编译器拒绝编译这段代码，它就会被破坏。

至于警告......编译器可以自由地警告任何它喜欢的东西：

*   不要求具有虚拟成员的类具有虚拟析构函数。然而，在实践中，这通常是一个好主意（除非析构函数受到保护），并且编译器警告是合适的。

*   我猜来自 Visual Studio 的警告是“信息丰富的”，但这是该语言设计的工作方式。这当然不是要避免的事情。就此而言，我认为支配地位实际上并没有在这里发挥作用，因为其中的功能`Base`是纯虚拟的。Visual Studios 似乎想说的是，在 中 ， is`DerivedC`的实际重载，而不是 。这似乎是人们对我的直觉期望；关于支配地位的规则实际上只是对人们直觉期望的正式陈述。`A()``DerivedA::A()``Base::A()`

无论如何，我肯定会关闭关于支配地位的警告。在这方面当然没有什么可担心的。而且我会大声抱怨没有编译代码的编译器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-15T08:31:42.563

众所周知，Visual Studio 有一个[编译器错误](https://connect.microsoft.com/VisualStudio/feedback/details/101259/)，在主函数是纯虚拟的情况下会发出警告 C4250。该错误已被关闭为“不会修复”；公认的解决方案是使用以下方法抑制警告：

```
#pragma warning( disable: 4250 ) /* 'class1' : inherits 'class2::member' via dominance */ 
```

另请参阅[http://msdn.microsoft.com/en-us/library/6b3sy7ae(VS.80).aspx#CommunityContentHeader](http://msdn.microsoft.com/en-us/library/6b3sy7ae(VS.80).aspx#CommunityContentHeader)上的讨论。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T07:44:26.130

您的 Base 类是抽象的：它不能被实例化。B 和 A 类也是抽象的，因为它们只实现一种方法。

这两种解决方案在文件中`DerivedC.cpp`

```
void DerivedC::A(){ 
   DerivedA::A();
}
void DerivedC::B(){
   Derived:B();
} 
```

或者您可以`using`在头文件中使用关键字：

```
class DerivedC: public DerivedA, public DerivedB {
public:
    using DerivedA::A;
    using DerivedB::B;
}; 
```

# java - 如何使用 Spring 手动自动装配 bean？

> ID：11965600
> 
> 赞同：27
> 
> 时间：2012-08-15T07:34:32.210
> 
> 标签：java, spring, autowired

我有一个 bean `B`，我必须自己创建（使用）并且`new B()`它有注释。`@Autowire``@PostConstruct`

如何让 Spring 从我的 bean 处理这些注释`A`？

相关问题：

*   [在 Spring 中，我可以从自动装配的 bean 中自动装配新的 bean 吗？](https://stackoverflow.com/questions/2383205/in-spring-can-i-autowire-new-beans-from-inside-an-autowired-bean)

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-15T07:53:04.277

亚伦，我相信你的代码是正确的，但我使用了以下内容：

```
B bean = new B();
AutowireCapableBeanFactory factory = applicationContext.getAutowireCapableBeanFactory();
factory.autowireBean( bean );
factory.initializeBean( bean, "bean" ); 
```

第一种方法将处理`@Autowire`字段和方法（但不是经典属性）。第二种方法将调用后处理（`@PostConstruct`以及任何定义`BeanPostProcessor`的 s）。

`ApplicationContextAware`如果实现接口，则可以在 bean 中获取应用程序上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-25T10:14:38.697

另一种选择是让 spring 容器自动创建一个新 bean（而不是使用 new 关键字自己创建一个新实例）。在需要以编程方式实例化 new 的类中，注入 ***AutowireCapableBeanFactory***的实例：

```
@Autowired
private AutowireCapableBeanFactory beanFactory; 
```

然后：

```
B yourBean = beanFactory.createBean(B.class); 
```

容器将像往常一样注入带有 @Autowired 注释的实例。

# python - 如何加快python中的循环

> ID：11965601
> 
> 赞同：1
> 
> 时间：2012-08-15T07:34:33.103
> 
> 标签：python, numpy, vectorization

我想加快这段简短的代码

```
 max_x=array([max(x[(id==dummy)]) for dummy in ids]) 
```

`x`并且`id`是相同维度的numpy数组，并且`ids`是较小维度的数组。使用矢量运算的快速方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T14:02:55.603

除非 id 具有某种结构，否则进一步进行矢量化并不容易（据我所知）。否则瓶颈可能`id==dummy`经常发生，但我能想到的唯一解决方案是使用排序，并且由于 np.max() 缺乏减少功能仍然需要相当多的 python 代码（编辑：有实际上是通过 np.fmax 提供的 reduce 函数）。对于 ax 为 1000x1000 并且 id/ids 在 0..100 中，这大约快 3 倍，但由于它相当复杂，它仅对于具有许多 id 的较大问题是值得的：

```
def max_at_ids(x, id, ids):
    # create a 1D view of x and id:
    r_x = x.ravel()
    r_id = id.ravel()
    sorter = np.argsort(r_id)

    # create new sorted arrays:
    r_id = r_id[sorter]; r_x = r_x[sorter]

    # unfortunatly there is no reduce functionality for np.max...

    ids = np.unique(ids) # create a sorted, unique copy, just in case

    # w gives the places where the sorted arrays id changes:
    w = np.where(r_id[:-1] != r_id[1:])[0] + 1 
```

我最初提供了这个解决方案，它在切片上执行纯 python 循环，但下面是一个更短（更快）的版本：

```
 # The result array:
    max_x = np.empty(len(ids), dtype=r_x.dtype)
    start_idx = 0; end_idx = w[0]
    i_ids = 0
    i_w = 0

    while i_ids < len(ids) and i_w < len(w) + 1:
        if ids[i_ids] == r_id[start_idx]:
            max_x[i_ids] = r_x[start_idx:end_idx].max()
            i_ids += 1
            i_w += 1
        elif ids[i_ids] > r_id[start_idx]:
            i_w += 1
        else:
            i_ids += 1
            continue # skip updating start_idx/end_idx

        start_idx = end_idx
        # Set it to None for the last slice (might be faster to do differently)
        end_idx = w[i_w] if i_w < len(w) else None

    return ids, max_x 
```

编辑：用于计算每个切片最大值的改进版本：

有一种方法可以通过使用来删除 python 循环，`np.fmax.reduceat`如果切片很小（实际上非​​常优雅），它可能会比前一个循环好很多：

```
# just to 0 at the start of w
# (or calculate first slice by hand and use out=... keyword argument to avoid even
# this copy.
w = np.concatenate(([0], w))
max_x = np.fmin.reduceat(r_x, w)
return ids, max_x 
```

现在可能有一些小事情可以让它更快一点。如果 id/ids 具有某种结构，则应该可以简化代码，并且可能使用不同的方法来实现更大的加速。否则这段代码的加速应该很大，只要有很多（唯一的）id（并且 x/id 数组不是很小）。请注意，代码强制执行 np.unique(ids)，但这可能是一个很好的假设。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:45:49.917

使用`x[(id==dummy)].max()`而不是内置`max`应该可以加快速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-10T11:02:31.517

`scipy.ndimage.maximum`正是这样做的：

```
import numpy as np
from scipy import ndimage as nd

N = 100  # number of values
K = 10   # number of class

# generate random data
x   = np.random.rand(N)
ID  = np.random.randint(0,K,N)  # random id class for each xi's
ids = np.random.randint(0,K,5)  # select 5 random class

# do what you ask
max_per_id = nd.maximum(x,labels=ID,index=ids)

print dict(zip(ids,max_per_id)) 
```

如果要计算所有 id 的最大值，请执行`ids = ID`

`ids`请注意，如果在 in中找不到特定类`ID`（即该类没有标记 x），则该类的最大回报为`0`。

# mobile - 印度移动应用程序的 mCommerce 网关

> ID：11965618
> 
> 赞同：0
> 
> 时间：2012-08-15T07:36:15.313
> 
> 标签：mobile, payment

我想知道在印度通过移动应用程序（ios、android 和 bb）处理移动信用卡和借记卡的选项是什么。

bookmyshow.com 和 pvrcinemas.com 等应用程序在应用程序上运行 cc 身份验证。我们需要为客户做同样的事情。

我们将在 appcelerator、objective c 或 html5 中构建应用程序。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T07:29:53.410

它首选使用 PayPal India，因为它为您提供了最简单的 api 来执行该功能，尽管也可以使用 payu 和 IBIBO 下提供的其他选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T09:21:16.123

目前没有任何高度安全的支付机制。尽管政府正在推动和支持努力。

我只是在深入研究之后才这么说，因为我非常从事移动钱包，NFC支付行业。

所需要的是符合存储卡并与您的银行账户关联的基于云的安全标准，这正在发生。

最大的问题是我们印度人的文化。我们仍处于不信任技术的时代，但这种情况正在慢慢改变。

# asp.net - 实体框架，如何从代理转换为对象

> ID：11965622
> 
> 赞同：-1
> 
> 时间：2012-08-15T07:36:29.903
> 
> 标签：asp.net, asp.net-mvc, entity-framework

到目前为止，我很喜欢 EF。我的项目在尝试将 System.Data.Entity.DynamicProxies.Badge 转换为 Badge 时开始崩溃。我不知道该怎么办。我已经阅读了有关代理的文档，并且我有点理解它。如果拥有它是有益的，我不想禁用代理功能？

我怎样才能解决这个问题？基本上我调用一个函数 MyFunc(myBadge); 而且因为 MyFunc 采用 Badge 类型的参数，它会崩溃。代码如下：

```
foreach(Badge B in badgesOfBadgeType) {

Assembly assembly = Assembly.LoadFile(GlobalHelper.GetCurrentContext().Server.MapPath("~") + "bin/MM.dll";
Type classs = assembly.GetType("MM.Helpers.BadgeHelper");
string methodName = "DoesUserEventUnlockBadge_"+B.ID;
MethodInfo methodInfo = classs.GetMethod(methodName);

if (methodInfo != null)
{
    ParameterInfo[] parameters = methodInfo.GetParameters();
    object[] parametersArray = new object[] { B, UE };
    bool didUnlock = (bool)methodInfo.Invoke(null, parametersArray);

    if (didUnlock)
    {
        unlockedBadges.Add(B);
    }
} 
```

}

调用函数：

```
public static bool DoesUserEventUnlockBadge_1(Badge B, UserEvent UE)
        {
            //Check here..
            return true;
        } 
```

新错误，当我去 db.Badges.find(b); 并使用它（即非代理）

```
System.ArgumentOutOfRangeException：指定的参数类型“System.Data.Entity.DynamicProxies.Badge_90C17B99EFACD091308AD8F9030C6441D90D4237AC5630A4C2F673A79A186B27”无效。仅支持标量类型，例如 System.Int32、System.Decimal、System.DateTime 和 System.Guid。
参数名称：参数
   在 System.Data.Objects.ObjectParameterCollection.Add（ObjectParameter 参数）
   在 System.Data.Objects.ObjectContext.CreateQuery[T]（字符串 queryString，ObjectParameter[] 参数）
   在 System.Data.Entity.Internal.Linq.InternalSet`1.FindInStore（WrappedEntityKey 键，字符串 keyValuesParamName）
   在 System.Data.Entity.Internal.Linq.InternalSet`1.Find(Object[] keyValues)
   在 System.Data.Entity.DbSet`1.Find(Object[] keyValues)
   在 C:\Users\William-Business\Desktop\TWB\TWB Central\Projects\MusingMonkey\MusingMonkey\Helpers\BadgeHelper.cs: 31 中的 MusingMonkey.Helpers.BadgeHelper.UnlockedBadgesForEvent(BaseDBContext db, UserEvent UE, User user)
   在 C:\Users\William-Business\Desktop\TWB\TWB Central\Projects\MusingMonkey\MusingMonkey\Helpers\UserIdeaHelper.cs:line 中的 MusingMonkey.Helpers.UserIdeaHelper.PushVoteToIdea(BaseDBContext db, Nullable`1 id, String direction) 164
   在 C:\Users\William-Business\Desktop\TWB\TWB Central\Projects\MusingMonkey\MusingMonkey\Controllers\IdeasController.cs:line 23 中的 MusingMonkey.Controllers.IdeasController.Vote(Nullable`1 id, String direction)
   在 lambda_method（闭包，ControllerBase，对象 []）
   在 System.Web.Mvc.ActionMethodDispatcher.Execute（ControllerBase 控制器，Object[] 参数）
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute（ControllerContext 控制器上下文，IDictionary`2 参数）
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod（ControllerContext 控制器上下文，ActionDescriptor actionDescriptor，IDictionary`2 参数）
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod（IAsyncResult asyncResult）
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters（IAsyncResult asyncResult）
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:44:56.133

不知道为什么，但是反射出了点问题，如果我只是将它正常发送到一个方法就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:44:27.220

我认为您可以在 dbContext 类中使用“this.Configuration.ProxyCreationEnabled = false”。

# java - 从结果集中获取不同的值

> ID：11965633
> 
> 赞同：1
> 
> 时间：2012-08-15T07:37:56.710
> 
> 标签：java, sql-server-2008, tsql, sql-server-2005, teradata

我有下表员工和记录如下：

```
Eid      Ename     Phone
------------------------     
 1         A        043
 1         A        067
 2         B        073
 2         B        072
 3         C        753 
 3         C        464 
```

到目前为止我得到了什么：

```
SELECT *
FROM   (SELECT Row_number() OVER (ORDER BY Eid ASC) AS rownum,
               Eid,
               Ename,
               Phone
        FROM   Employee
        WHERE  Eid IN(SELECT DISTINCT(Eid)
                      FROM   Employee
                      GROUP  BY Eid)) AS RESULTSET
WHERE  rownum BETWEEN 0 AND 3 
```

实际上，内部查询正在返回`distinct`结果，但是当我在 final 中得到结果时并没有反映出来`RESULTSET`。

请告知如何获得不同的结果集。我的输出应该返回如下：

```
Eid      Ename     Phone
------------------------     
 1         A         043
 2         B         073
 3         C         753 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:13:11.297

如果您使用该`QUALIFY`子句，您可以指定您希望返回的 Row_Number 值的范围。该`QUALIFY`子句适用于窗口聚合函数，就像该`HAVING`子句适用于非窗口聚合函数一样。

```
SELECT DISTINCT
       e1.eid
     , e1.ename
     , e1.ephone
--     , ROW_NUMBER() OVER(PARTITION BY e1.eid ORDER BY e1.eid) AS RowNum_
FROM emp e1
QUALIFY ROW_NUMBER() OVER(PARTITION BY e1.eid ORDER BY e1.eid) = 1 
```

如果您包含`RowNum_`在结果集中，那么您可以再次在`QUALIFY`而不是`ROW_NUMBER()`窗口聚合中引用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T03:09:53.567

您的查询要复杂得多。尝试通过使用来简化它`CROSS APPLY`

```
SELECT DISTINCT a.Eid, a.Ename, c.Phone
FROM   EMPLOYEE a
CROSS APPLY
(
  SELECT  TOP 1 ROW_NUMBER() OVER (PARTITION by Ename ORDER BY Eid ASC) AS RowNo,
          b.Eid, b.Phone
  FROM    EMPLOYEE b
  WHERE   a.EID = b.eid 
  ORDER BY RowNo ASC                         -- you can change this to DESC also
) c 
```

我添加的原因`DISTINCT`是因为您正在加入表格。

另一个更简单的版本

```
SELECT DISTINCT a.Eid, a.Ename, c.Phone
FROM   EMPLOYEE a
CROSS APPLY
(
  SELECT  TOP 1 b.Eid, b.Phone
  FROM    EMPLOYEE b
  WHERE   a.EID = b.eid 
) c 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!3/5005d/21)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T08:25:33.987

啊，我不确定你想要这个查询，但不知何故，我根据你的预期输出

代码：

```
select    Eid,Ename,Phone 
from      (select ROW_NUMBER() OVER (ORDER BY Eid ASC) AS rownum,
                  Eid,
                  Ename,
                  Phone 
           from Employee 
           where Eid in (select distinct(Eid) 
                         from Employee  )
         ) AS RESULTSET
Where rownum %2<>0 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!3/d39a5/13)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T08:23:44.697

试试这个

```
 SELECT * 
FROM   (SELECT Row_number() OVER (partition by ename ORDER BY Eid ASC) AS rownum, 
               Eid, 
               Ename, 
               Phone 
        FROM   Employeee
        WHERE  Eid IN(SELECT DISTINCT(Eid) 
                      FROM   Employeee
                      GROUP  BY Eid)) AS RESULTSET 
WHERE  rownum =1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T08:33:29.903

试试这个：

```
 select Eid,Ename,Phone from 
 (select *,ROW_NUMBER() over(partition by Ename order by eid) as rn from emp) a
 where rn=1 
```

# regex - 表中值的对齐方式

> ID：11965638
> 
> 赞同：-1
> 
> 时间：2012-08-15T07:38:17.020
> 
> 标签：regex, perl

```
Test.txt
tom 
cat=0  bat=1  mat=0  pen=1
ironman122_bore.1 
cat=8e-7  bat=8.001e-7  mat=5e-6  pen=200.001e-6     
batmanbegin_nice.1  
cat=10  bat=1  mat=0.25  pen=49.25 
```

这是我的输入示例，我希望我的输出类似于 Out.txt

```
Out.txt
name                cat       bat       mat       pen               
tom                 -         1         -         -    
ironman122_bore.1   8e-7      8.001e-7  5e-6      200.001e-6
batmanbegin_nice.1  10        1         0.25      49.25 
```

这是我尝试过的

```
my $pr = "%-12s"; 
my @headers = qw/name cat bat mat pen/; 
my %names; 
while (<DATA>) {     
    chomp;     
    my $line = <DATA>;     
    %{$names{$_}} = split /=|\s+/, $line; 
}  
printf $pr x @headers . "\n", @headers; 
for (keys %names) {     
    my @ds = ($_);     
    for my $k (@headers[1..$#headers]) {
       my $v = $names{$_}->{$k};         
       push @ds, $v ? $v : '-';     
    }     
    printf $pr x @ds . "\n", @ds; 
} 
```

但我得到一个输出

```
name          cat       bat       mat       pen               
tom        -         1         -         -    
ironman122_bore.1  8e-7      8.001e-7  5e-6      200.001e-6
batmanbegin_nice.1  10         1         0.25     49.25 
```

如何修改代码以获得 Out.txt 中所示的对齐输出？当我使用与我作为输入给出的数据相似的实际数据时，我无法达到我的预期。

**编辑：**示例输入已与预期结果一起更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:07:49.900

为对齐输出填充任何字符串的一种简单方法是使用 sprintf。例如：您希望 2 列均匀地大小为 20 个字符，并带有分隔符。您还希望您的右列在您指定的文本之后左对齐和填充。没问题：

```
print sprintf("# %20s | %-20s #","Column1","Column2")."\n"; 
```

将打印：

```
username@hostname:~$ perl -e 'print sprintf("# %20s | %-20s #","Column1","Column2")."\n";'
#              Column1 | Column2              # 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:52:16.727

**使用早期数据**

发布的代码对我来说很好。

**输出**

```
name        a           b           c           d           e           
bobby       60          74.2        8           -           10.25       
tom         10.1        2           300.89      4145        55 
```

您正在查看的字体是固定宽度吗？

* * *

**使用新数据**

未对齐的原因是“名称”列下的某些项目超过 12 个字符（例如，“batmanbegin_nice.1”的长度为 18 个字符）。

[`(s)printf`](http://perldoc.perl.org/functions/sprintf.html)不会按照原始帖子中指定的方式将字符串截断为 12 个字符。

要截断，请在和`.`之间指定一个：`%``12`

```
printf '%.12s', 'batmanbegin_nice.1' ;  # "batmanbegin_" 
```

如果不需要截断，请将字符串长度增加到`%20s`.

至于最大长度的动态检测，这需要另一个问题:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T08:04:08.573

```
#!/usr/bin/env perl

use strict;
use warnings;
use List::MoreUtils qw(uniq);

my $pr = "%-24s";
my @headers = qw/name/;
my %names;
while (<DATA>) {
    chomp;
    s/^\s+//g;
    s/\s+$//g;
    my $line = <DATA>;
    $line =~ s/^\s+//g;
    $line =~ s/\s+$//g;
    %{$names{$_}} = split /\s*=\s*|\s+/, $line;
}
push @headers, uniq sort map { keys %{$names{$_}}; } keys %names;
printf $pr x @headers . "\n", @headers;
for (keys %names) {
    my @ds = ($_);
    for my $k (@headers[1..$#headers]) {
        my $v = $names{$_}->{$k};
        push @ds, defined $v ? $v : '-';
    }
    printf $pr x @ds . "\n", @ds;
}

__DATA__
 tom
cat = 0  bat =1  mat= 0  pen=1
ironman122_core.1
 cat= 8e-7  bat= 8.001e-7  mat= 5e-6  pen= 200.001e-6
batmanbegin_core.1
cat=10  bat = 1  mat= 0.25  pen= 49.25 
```

输出：

```
name                    bat                     cat                     mat                     pen                     
tom                     1                       0                       0                       1                       
batmanbegin_core.1      1                       10                      0.25                    49.25                   
ironman122_core.1       8.001e-7                8e-7                    5e-6                    200.001e-6 
```

# xml - T-SQL CTE + SELECT 嵌套 CASE WHEN + 在 CSV 中转换表的列返回错误

> ID：11965639
> 
> 赞同：0
> 
> 时间：2012-08-15T07:38:17.363
> 
> 标签：xml, tsql, case, common-table-expression

我有以下 SQL 语句：

```
WITH CTE(Col01,...,Col05) AS
(
    ...
)
SELECT   ....
        ,CASE ....
              WHEN ... THEN CASE ...
                                 WHEN 0 THEN ...
                                 ELSE (SELECT STUFF((SELECT ',' + CAST(Col002 AS NVARCHAR(10)) FROM TableOne WHERE Col05=CTE.Col05 FOR XML PATH('')),1, 1,''))
                            END
              WHEN ... THEN ...
              WHEN ... THEN ...
              ELSE ...
        END
        ,...
FROM TableOne 
CROSS APPLY CTE 
WHERE TableOne.Col01=CTE.Col01 
```

我想从列表信息中返回 CSV 列表 - 当我单独执行它时，这些语句可以正常工作，但是在上面的 sql 语句语法中，它会生成以下错误：

> *Msg 245, Level 16, State 1, Line 1
> 将 nvarchar 值 '101,102,103,108,109,110,112,113,114,115,116,117,118,119,120,121,122,126,130,135,164,165,218' 转换为数据类型时失败。*

如果我将语句替换为 '1' 或 1，它不会让我出错。为什么它试图将 CSV 列表转换为 int？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:18:03.397

非常抱歉，我没有提供有关查询的更多信息 - 现在我找到了导致问题的原因，我发现如果没有显示整个图片，很难找到它。

当我将所有可能的值转换为 nvarchar 时，该问题已得到解决。出于某种原因，如果返回值之一是 int，SQL 服务器也会尝试将所有值转换为 int。

此链接有助于解决我的问题：

[http://www.fmsinc.com/free/newtips/sql/sqltip10.asp](http://www.fmsinc.com/free/newtips/sql/sqltip10.asp)

编辑：我想这是有道理的 - 你可以根据情况得到不同的结果 - when 语句，但它们应该是一种类型。

# c# - 防止控制台应用程序终止

> ID：11965640
> 
> 赞同：1
> 
> 时间：2012-08-15T07:38:18.957
> 
> 标签：c#, .net, console-application

我有一个 C# 4.0 Windows 控制台应用程序，它应该运行 24*7*365。（我有一个 Windows 服务来监视这个应用程序，并在它由于某种原因终止时启动它）。这个控制台应用程序的启动涉及一些复杂的资源消耗活动 - 所以我必须确保控制台应用程序不会频繁重启。控制台应用程序有 3 个 System.Timers.Timer 实例，它们在计时器结束时执行一些活动（间隔分别为 10 秒、15 秒和 2 小时）。防止控制台应用程序终止并使其保持活动状态的正确方法是什么？有人可以建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:19:38.420

*根据您在评论中所说的，您拥有控制台应用程序的唯一原因是您可以阅读调试消息。这个答案将打破这个假设。*

控制台应用程序不够可靠，无法执行您想做的事情，您会遇到很多情况，应用程序无法启动或可能多次启动（如果没有人登录怎么办？怎么办？如果多人登录？）

最好的做法是将这种密集操作编写为服务，然后将输出到控制台的任何诊断信息放入事件日志或放入调试器。

如果您想将消息写入应用程序事件日志，您只需将信息写入[`this.EventLog.WriteEntry(message)`](http://msdn.microsoft.com/en-us/library/xzwc042w%28v=vs.90%29). 这将在应用程序事件日志中为您的服务生成一个信息事件。如果你想将严重性提高到警告或错误，你只需要使用[另一个重载](http://msdn.microsoft.com/en-us/library/fc682h09%28v=vs.90%29)。

如果您想写入与应用程序不同的日志（如您自己的日志），您需要让服务的[安装程序](http://msdn.microsoft.com/en-us/library/79e7ka7s%28v=vs.90%29)创建您需要的任何源/日志（如果您需要帮助，请提出一个新问题）。然后`AutoLog`在您的服务中设置为 false 然后创建您自己的事件日志实例，指向您的新日志。

如果您希望仅在诊断问题时显示日志，最简单的解决方案是将您的`Console.WriteLine(message)`语句更改为 `Debugger.Log(1, "DebugLogging", message + Environment.NewLine)`. 当您在服务运行时附加到服务时，这将导致您的消息显示在“调试”输出窗口中（您知道如何附加到服务以在其上运行调试器吗？如果不问一个新问题它）。我不建议使用`Debug.WriteLine(message)`，除非您从不打算在发布模式下进行诊断。这是因为`Debug.WriteLine`具有属性[`[Conditional("DEBUG")]`](http://msdn.microsoft.com/en-us/library/4xssyw96.aspx)。这样做会导致函数仅在编译期间设置了 DEBUG 标志时才执行，并且 Release 没有设置该标志。

* * *

这是一个简单的解决方案，如果您想要一个更强大的解决方案，我建议您学习如何使用[log4net](http://logging.apache.org/log4net/)。Log4net 将让您完成以上所有工作，以及更多。例如，您可以通过配置文件控制写入事件日志的数量（程序甚至不需要重新启动即可使用新设置开始记录，它会检测您何时执行保存。）

通过这种方式，您可以将详细的日志消息放入代码中，但仅在需要时通过更改 XML 配置文件中的一项设置来打开它们。

如果您对设置两个顶级建议中的任何一个或设置 log4net 有任何疑问，请随时就这些主题提出新问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T07:41:06.880

您可以简单地使用 Console.ReadLine() 来保持控制台处于活动状态。但是 Windows 服务可能是您想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T07:41:21.497

`while (Console.ReadLine() != "I really want to stop this application") { }`或类似的东西？

考虑类似的应用程序（例如 Minecraft ...），您将有如下循环：

```
string command;
Console.Write("> ");
while ((command = Console.ReadLine()).ToUpper() != "STOP")
{
    // Do something else based on the command
    ...

    Console.Write("> ");
} 
```

# android - 如何在 AndEngine 中移除实体

> ID：11965645
> 
> 赞同：1
> 
> 时间：2012-08-15T07:38:42.503
> 
> 标签：android, andengine

我通过创建一个 Sprite 在用户的轨道上添加了硬币，我将其保存在一个 Body 中。问题是当玩家与硬币碰撞时，硬币被移走，但需要一纳秒的时间。我希望玩家即使在与硬币碰撞时也能平稳运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:55:08.483

你是对的，问题是由于Box2D。显然，移除尸体需要一些时间并导致一些延迟。如果你不打算拥有大量的身体，你可以一直保留它们，你可以在身体上安装一个传感器。传感器是一种特殊的夹具，不会与其他物体发生碰撞，但您可以找出物体是否在接触。这样，您可以将硬币保持在原位，并且只移除 Sprite，这样硬币就会消失，而不会因移除身体而产生开销。

请参阅此处的 Box2d 手册：http: [//www.box2d.org/manual.html#_Toc258082972](http://www.box2d.org/manual.html#_Toc258082972)

另一件事是碰撞过滤，虽然我不确定如果正确设置了碰撞位，isTouching() 方法是否会返回 true，所以你必须尝试一下。这里有一个很好的教程： [http ://www.iforce2d.net/b2dtut/collision-filtering](http://www.iforce2d.net/b2dtut/collision-filtering)

# apache - 如何在ubuntu的xampp中更改文档根目录？帮助文档根不工作

> ID：11965646
> 
> 赞同：0
> 
> 时间：2012-08-15T07:38:45.740
> 
> 标签：apache, xampp, document-root

我在一篇[类似的文章](https://stackoverflow.com/questions/5891802/how-do-i-change-the-root-directory-of-an-apache-server)中阅读了关于如何在 ubuntu xampp 中更改文档根目录的文章，其中说将 documentroot 值和 <directory> 标记值更改为我的首选地址。我试过了，但它不起作用。我意识到我的驱动器以空格命名，例如“我的驱动器”，经过一番搜索后，我发现我应该使用“我的驱动器”来包含单词之间的空格..但现在我有另一个错误..

httpd.conf 值：DocumentRoot "/media/my\ drive/xampp/htdocs"

XAMPP：错误 1！无法启动 Apache！XAMPP：开始诊断... XAMPP：抱歉，我不知道出了什么问题。XAMPP：请联系我们的论坛[http://www.apachefriends.org/f/](http://www.apachefriends.org/f/)

我检查了error_log文件，上面写着

[Tue Aug 14 00:08:21 2012] [error] [client 127.0.0.1] (13)Permission denied: access to /favicon.ico denied [Tue Aug 14 00:08:47 2012] [notice] 捕获 SIGTERM，关闭 /opt/lampp/etc/httpd.conf 的第 179 行语法错误：DocumentRoot 必须是目录 /opt/lampp/etc/httpd.conf 的第 179 行语法错误：DocumentRoot 必须是目录 在线语法错误/opt/lampp/etc/httpd.conf 的第 179 行：DocumentRoot 必须是目录 /opt/lampp/etc/httpd.conf 的第 179 行语法错误：DocumentRoot 必须是目录

这是一个有效的目录，我在其中安装了我的 Windows 8 操作系统..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:14:37.657

它应该在没有 \ 的情况下工作，因为路径周围已经有引号。在目录标记中，您应该也可以在路径周围加上引号，如果没有，请尝试 \ 那里。

# java - 如何以编程方式检索谷歌结果？

> ID：11965652
> 
> 赞同：1
> 
> 时间：2012-08-15T07:39:42.440
> 
> 标签：java

现在 Google 搜索 API 已经停止使用 - 以编程方式检索搜索结果的最佳方式是什么？

我需要在我的网站上获取已被谷歌索引的文件列表，以便我可以使用该数据编写脚本。

我想要做的是删除缓存在[http://mysite.com/mypdfs/下的所有内容](http://mysite.com/mypdfs/)

即
搜索“site:mysite.com/mypdfs”，以获取 mysite.com 上的 pdf 列表：http:
[//mysite.com/pdf/1.pdf http://mysite.com/pdf/1](http://mysite.com/pdf/1.pdf)
[。 pdf](http://mysite.com/pdf/1.pdf)
...
[http://mysite.com/pdf/1000000.pdf](http://mysite.com/pdf/1000000.pdf) 等

然后使用 WebDriver 通过站长清除工具推送它们。

如果需要，很高兴为特权支付费用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T08:06:41.193

您必须设置自定义搜索并使用新的[自定义搜索 API](https://developers.google.com/custom-search/v1/overview)。它类似于旧的不推荐使用的搜索 API，并执行 JSON 或 Atoms。

# android - 本地存储我的地理位置

> ID：11965653
> 
> 赞同：1
> 
> 时间：2012-08-15T07:39:53.193
> 
> 标签：android, cordova, geolocation, local-storage

我想制作一个应用程序，它可以获取我的坐标并在谷歌地图中显示它们（使用 phonegap 并在模拟器 2.2 上进行测试）。然后将这些坐标存储在本地存储中。我以前从未使用过本地存储，所以我不确定如何执行此操作。我得到了地理定位部分的工作。如果有人可以调整我的代码或显示一个教程，该教程解释了如何保存我将检索的纬度/经度，因为我没有很多使用网络语言的经验。这将不胜感激。

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

    <html>

         <head>

    <meta name="viewport" content="width=device-width; height=device-height; user-scalable=no" />

    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Beer Me</title>
    <link rel="stylesheet" href="/master.css" type="text/css" media="screen" />
   <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
    <script type="text/javascript">

    function onLoad() {
    document.addEventListener("deviceready", onDeviceReady, false);
    }

    function onDeviceReady() {

    }

    //GEOLOCATION
    var onSuccess = function(position) {
        var myLat = position.coords.latitude;
        var myLong = position.coords.longitude;

        //MAP
        var mapOptions = {
            center: new google.maps.LatLng(myLat, myLong),
            zoom: 14,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

    var map = new google.maps.Map(document.getElementById("map_canvas"),
                                      mapOptions);

        var marker = new google.maps.Marker({
                                            position: new google.maps.LatLng(myLat, myLong),
                                            map: map,
                                            title:"Hello World!"
                                            });

    };

    // onError Callback receives a PositionError object
    //
    function onError(error) {
        alert('code: '    + error.code    + '\n' +
              'message: ' + error.message + '\n');
    }

    navigator.geolocation.getCurrentPosition(onSuccess, onError,{'enableHighAccuracy':true,'timeout':10000});

         </script>
         </head>
         <body onload="onLoad()"> 
         <div id="map_canvas" style="width:400px; height: 400px;">
    </div>
         </body>
         </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:30:33.797

我建议你使用[`SQLite Databases`](http://developer.android.com/guide/topics/data/data-storage.html#db)来自Android的。

然后，您可以使用两个字段存储位置并使用 SQL 查询访问数据。

一个不错的教程是来自[Lars Vogel](http://www.vogella.com/articles/AndroidSQLite/article.html)的教程。

您还可以使用 Android 的[内部存储](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)。使用简单文件很容易，但不如 sql 变体强大。当数据大小增加时，读取和存储到文件变得更加麻烦。

# python - 在 python 中复制大型二进制文件时系统挂起

> ID：11965655
> 
> 赞同：-1
> 
> 时间：2012-08-15T07:39:54.037
> 
> 标签：python, file-io, python-3.x, wxpython

我创建了一个实用程序软件，用于在 python 中操作文件复制过程。一切都很好，但是当我开始复制任何大于 2 Gb 的文件时，整个系统都会挂起。在我看来，这可能是内存泄漏问题。

我试过了：

*   使用 Shutil 模块复制它
*   通过复制字节块使用惰性操作
*   逐行复制文件数据
*   使用文件输入模块
*   调整 Buffer 百万次
*   用 C 编写复制文件部分，然后用 python 扩展它。

...但这些都没有奏效。

以下是我的[文件脚本](http://dl.dropbox.com/u/16634607/schizocopy.py)和我的[GUI 脚本](http://sourceforge.net/projects/schizocopy/files/latest/download)的链接：

我正在使用具有 2 Gb RAM 的 Windows 7。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:37:30.907

由于复制大于内存的文件时只有 2 GB 的内存，因此会导致问题。不要将整个文件加载到内存中。相反，我会做类似的事情：

```
with open(myLargeFile) as f:
   with open(myOtherLargeFile, "w") as fo:
   for line in f:            
      fo.write(line) 
```

由于这可能需要很长时间，因此您应该将其放入 GUI 之外的单独线程中，否则 GUI 将出现挂起。这里有几个关于 wxPython 主题的链接：

*   [http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/](http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/)
*   [http://wiki.wxpython.org/LongRunningTasks](http://wiki.wxpython.org/LongRunningTasks)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:49:17.233

解决这个问题的好方法是：

*   使用多处理或多线程
*   将文件拆分成块
*   使用 python dbm 存储哪个块属于哪个文件名、文件路径和块偏移量（用于 file.seek 函数）
*   为读写块创建队列

# c# - 多个进程关闭时如何关闭计算机？

> ID：11965657
> 
> 赞同：0
> 
> 时间：2012-08-15T07:39:58.563
> 
> 标签：c#, winforms, windows-7, process, shutdown

我正在尝试制作一个自动关闭应用程序，该应用程序将在多个进程关闭时关闭计算机。

示例：用户有一个复选框，列出了所有当前正在运行的进程。用户选中他们希望监视的所有所需进程。一旦所有这些进程关闭，则计算机应该关闭。我在这样做时遇到了麻烦，我不知道如何让程序检查检查的进程项是否已关闭。这是我现在拥有的一些代码，我将不胜感激任何人都可以给我的所有帮助。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Diagnostics;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private int counter;

        Process[] p = Process.GetProcesses();

        private void Form1_Load(object sender, EventArgs e)
        {
            timer1.Interval = 100;

            foreach (Process plist in p)
            {
                checkedListBox1.Items.Add(plist.ProcessName);
            }

        }

        private void timer1_Tick(object sender, EventArgs e)
        {

            counter = 0;
            checkedListBox1.Items.Clear();
            Process[] p = Process.GetProcesses();

            foreach (Process plist in p)
            {
                checkedListBox1.Items.Add(plist.ProcessName);
                counter = counter + 1;

            }

                if (counter == 0)
                {
                    MessageBox.Show("works");
                }

            }

        private void button1_Click(object sender, EventArgs e)
        {
            timer1.Enabled = true;
            timer1.Start();
        }

    }
} 
```

谢谢，

-天使门德斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T08:14:49.313

假设您有一个`List<string>`代表您的复选框，请尝试：

```
List<string> checkProcs = new List<string>(); // All monitored process names
var allProcesses = Process.GetProcesses().Select(p => p.ProcessName);

// Now use:
allProcesses.Except(checkProcs) 
```

这应该给出一个不再存在的受监控进程的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:16:10.030

```
using System;
using System.Collections;
using System.Windows.Forms;
using System.Diagnostics;

namespace testprocessapp
{
    public partial class Form1 : Form
    {

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            Process[] p = Process.GetProcesses();
            timer1.Interval = 10000;

            checkedListBox1.Items.Clear();

            foreach (Process plist in p)
            {
                checkedListBox1.Items.Add(plist.ProcessName);
            }
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            int counter = 0;

            Process[] p = Process.GetProcesses();

            foreach (Process process in p)
            {
                foreach (var item in checkedListBox1.Items)
                {
                    if (item.ToString() == process.ProcessName)
                    {
                        counter = counter + 1;
                    }
                }
            }

            MessageBox.Show(counter == 0 ? "Your process has been terminated" : "Your process is still there");
        }

        private void button1_Click(object sender, EventArgs e)
        {
            ArrayList arrayList = new ArrayList();

            foreach (var checkedItem in checkedListBox1.CheckedItems)
            {
                arrayList.Add(checkedItem);
            }

            checkedListBox1.DataSource = arrayList;

            //button1.Enabled = false;
            button1.Text = "Monitoring...";

            timer1.Start();

        }
    }
} 
```

我现在已经创建了应用程序的副本。此代码有效。

# actionscript-3 - AS3 错误：通过静态类型 Class 的引用访问可能未定义的属性 STANDARD_OUTPUT_DATA

> ID：11965659
> 
> 赞同：0
> 
> 时间：2012-08-15T07:40:20.427
> 
> 标签：actionscript-3, apache-flex, ant

我有一个在 Flex Builder 4.6 中编译和运行的 Flex AIR 项目。我正在尝试创建一个将构建项目的 Ant 脚本。在这些行中，我收到以下错误：

```
 _process.addEventListener(ProgressEvent.STANDARD_OUTPUT_DATA, onOutputData);
        _process.addEventListener(ProgressEvent.STANDARD_INPUT_PROGRESS, inputProgressListener);
        _process.addEventListener(NativeProcessExitEvent.EXIT, onNativeProcessExit); 
```

我收到此错误：

```
[mxmlc] MyClass.as(190): col: 44 Error: Access of possibly undefined property STANDARD_OUTPUT_DATA through a reference with static type Class.
[mxmlc]             _process.addEventListener(ProgressEvent.STANDARD_OUTPUT_DATA, onOutputData);
[mxmlc]                                                     ^
[mxmlc] MyClass.as(191): col: 44 Error: Access of possibly undefined property STANDARD_INPUT_PROGRESS through a reference with static type Class.
[mxmlc]             _process.addEventListener(ProgressEvent.STANDARD_INPUT_PROGRESS, inputProgressListener); 
```

据我所知，这些是在 frameworks/libs/air/airglobal.swc 中定义的。我想我将它包含在下面的 compiler.external-library-path 元素中。

我的 build.xml ant 脚本的编译目标如下所示：

```
<target name="compile" depends="init">
  <mxmlc file="${MAIN_SOURCE_FILE}" output="${DEPLOY_DIR}/${APP_NAME}.swf"
       services="${APP_ROOT}/services/flex/services-config.xml">
    <swf-version>13</swf-version>
    <locale>en_US</locale>
    <static-link-runtime-shared-libraries>true</static-link-runtime-shared-libraries>

    <load-config filename="${FLEX_HOME}/frameworks/flex-config.xml"/>
     <source-path path-element="${FLEX_HOME}/frameworks"/>
    <source-path path-element="${APP_ROOT}/../MyLib/src"/>
    <source-path path-element="${APP_ROOT}/src"/>
    <compiler.external-library-path dir="${FLEX_HOME}/frameworks" append="true">
        <include name="libs/air" />
        </compiler.external-library-path>

    <compiler.library-path dir="${FLEX_HOME}/frameworks" append="true">
                    <include name="libs" />
                    <include name="../bundles/{locale}" />
                </compiler.library-path>
    <compiler.library-path dir="${APP_ROOT}" append="true">
                    <include name="libs" />
                    <include name="libs/player" />
                </compiler.library-path> 
    <define name="CONFIG::debugging" value="false"/>
     <compiler.debug>false</compiler.debug>             
  </mxmlc> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:04:20.090

我认为您想将其更改`<load-config>`为以下之一：

```
<load-config filename="${FLEX_HOME}/frameworks/air-config.xml"/> 
```

或者

```
<load-config filename="${FLEX_HOME}/frameworks/airmobile-config.xml"/> 
```

# c# - 如何将文件大小解析为字符串

> ID：11965662
> 
> 赞同：1
> 
> 时间：2012-08-15T07:41:13.063
> 
> 标签：c#, size

如何解析从 1024 到 1kb 的文件大小？一旦我为它创建了一个函数，它就像 30 行长的 if 一样。有没有更“优雅”的方式来做到这一点？我需要使用什么？1kb = 1000b 还是 1kb = 1024b？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T07:44:33.567

[这个解决方案](http://www.somacon.com/p576.php)看起来并不合理。它有点长，但它确实适合 exa/PB ！

## C# 人类可读的文件大小函数

```
// Returns the human-readable file size for an arbitrary, 64-bit file size
//  The default format is "0.### XB", e.g. "4.2 KB" or "1.434 GB"
public static string GetSizeReadable(long i)
{
    string sign = (i < 0 ? "-" : "");
    double readable = (i < 0 ? -i : i);
    string suffix;
    if (i >= 0x1000000000000000) // Exabyte
    {
        suffix = "EB";
        readable = (double)(i >> 50);
    }
    else if (i >= 0x4000000000000) // Petabyte
    {
        suffix = "PB";
        readable = (double)(i >> 40);
    }
    else if (i >= 0x10000000000) // Terabyte
    {
        suffix = "TB";
        readable = (double)(i >> 30);
    }
    else if (i >= 0x40000000) // Gigabyte
    {
        suffix = "GB";
        readable = (double)(i >> 20);
    }
    else if (i >= 0x100000) // Megabyte
    {
        suffix = "MB";
        readable = (double)(i >> 10);
    }
    else if (i >= 0x400) // Kilobyte
    {
        suffix = "KB";
        readable = (double)i;
    }
    else
    {
        return i.ToString(sign + "0 B"); // Byte
    }
    readable = readable / 1024;

    return sign + readable.ToString("0.### ") + suffix;
} 
```

## 示例使用

建议将上述函数作为公共静态方法放在帮助程序或实用程序类中。

```
// EXAMPLE OUTPUT
GetSizeReadable(1023); // 1023 B
GetSizeReadable(1024); // 1 KB
GetSizeReadable(1025); // 1.001 KB

// Example of getting a file size and converting it to a readable value
string fileName = "abc.txt";
long fileSize = new System.IO.FileInfo(fileName).Length;
string sizeReadable = GetSizeReadable(fileSize); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T07:49:38.950

也许是这样的？

```
public string FileSizeAsString(long lengthOfFile)
{
    string[] sizes = { "bytes", "KB", "MB", "GB" };
    int j = 0;

    while (lengthOfFile > 1024 && j < sizes.Length)
    {
        lengthOfFile = lengthOfFile / 1024;
        j++;
    }
    return (lengthOfFile + " " + sizes[j]);
} 
```

用法：

```
Console.WriteLine(FileSizeAsString(new FileInfo(@"C:\\your_file_here.ext").Length)); 
```

您可以根据需要扩展字符串数组`sizes`，它将继续计算。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T08:47:28.927

并不是说您需要很多*（模糊）*类似的方式，但是，鉴于尚未有人提出建议*（并且为了一点老式的乐趣）*，您可以这样做...

```
// Note: StrFormatByteSize truncates as opposed to rounds (so, 1.998 becomes 1.99, not 2.00)
[DllImport("Shlwapi.dll", CharSet = CharSet.Auto)]
public static extern long StrFormatByteSize(long fileSize, [MarshalAs(UnmanagedType.LPTStr)] StringBuilder buffer, int bufferSize);

private static String FormatBytes(Int64 bytes)
{
     StringBuilder sb = new StringBuilder(10);
     StrFormatByteSize(bytes, sb, 10);
     return sb.ToString();
} 
```

...或者我已经提供的答案版本...

```
private static String FormatBytes(Int64 bytes)
{
     const Int64 KB = 1024,
                 MB = KB * 1024,
                 GB = MB * 1024,
                 TB = GB * 1024L,
                 PB = TB * 1024L,
                 EB = PB * 1024L;
    if (bytes < KB) return bytes.ToString("N0") + " Bytes";
    if (bytes < MB) return Decimal.Divide(bytes, KB).ToString("N") + " KB";
    if (bytes < GB) return Decimal.Divide(bytes, MB).ToString("N") + " MB";
    if (bytes < TB) return Decimal.Divide(bytes, GB).ToString("N") + " GB";
    if (bytes < PB) return Decimal.Divide(bytes, TB).ToString("N") + " TB";
    if (bytes < EB) return Decimal.Divide(bytes, PB).ToString("N") + " PB";
    return Decimal.Divide(bytes, EB).ToString("N") + " EB";
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-15T07:49:43.513

这个怎么样：

```
public string FormatSize(long size)
{
    double result = size;

    var sizes = new string[] { "", "K", "M", "G", "T", "P", "E" };

    int i = 0;
    while (result > 1000 && i < sizes.Length)
    {
        result /= 1000; // or 1024 if you want
        i++;
    }

    // EDIT: Optimized decimal places

    string format = "{0:0.00} {1}B"; // default: 2 decimals

    switch (sizes[i])
    {
        case "":
            format = "{0} B"; // no decimals for bytes
            break;
        case "K":
            format = "{0:0.0} KB"; // 1 decimal for KB
            break;
    }

    // /EDIT

    return string.Format(format, result, sizes[i]);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T07:49:43.133

```
int fileSize = 10485258;//size of your file
string size = fileSize >= 1024*1024 ?  
    (fileSize / 1024 / 1024).ToString()+"MB" :
    (fileSize >= 1024 ? (fileSize / 1024).ToString() + "KB" : fileSize.ToString() + "B");
MessageBox.Show(size); 
```

# php - 用父类方法填充的子类属性

> ID：11965669
> 
> 赞同：3
> 
> 时间：2012-08-15T07:42:07.603
> 
> 标签：php, oop, inheritance

我是 PHP 新手，刚接触 OOP。我几乎没有用于设置和获取属性的通用方法。我在几乎所有的类中都经常使用它们，我将这些方法放在一个类中并从中扩展其他类。现在我可以从子类访问方法，但不知道如何通过它们设置和获取子类的属性...父类base.php

```
class Base
{
    public function __construct()
    {
    }

    function __set($propName, $propValue)
    {
        $this->$propName = $propValue;
    }

    function setProperties(array $data)
    {
        foreach($data as $propName => $propValue)
            $this->$propName = $propValue;
    }

    function __get($propName)
    {
        return (isset($this->$propName))? $this->$propName : "Invalid property!";
    }

    function getProperties(array $properties)
    {
        foreach($properties as $propName)
            $propVals[$propName] = $this->$propName;
        return $propVals;
    }
} 
```

子类 categories.php

```
class categories extends Base
{

    private $id;
    private $pid;
    private $title;
    private $status;

    public function __construct()
    {
        parent::__construct();  
    }
} 
```

我称它为

```
$objCat = new categories();

$objCat->setProperties(array('id'=>'10', 'pid'=>'6'));

print_r( $objCat->getProperties(array('id', 'pid'))); 
```

这里需要一点指导。如果它是正确的方式？或者至少可以这样做吗？如果是这样，如何做到这一点...谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T07:53:44.233

`categories`只有当你可以说 class is a class时，你才想做扩展一个类`Base`。像您拥有的那种实用程序类几乎总是错误的方法。PHP 还为复制/粘贴代码引入了称为[特征的东西。](http://php.net/manual/en/language.oop5.traits.php)然而，我个人的偏好是，它是你永远不想使用的东西，因为它将特性与你的类紧密结合，这是你想要避免的。

有关更多信息，请参阅[SOLID 编程](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)中的[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。

如果由我决定，我会避免使用那些神奇的 getter/setter，只需将自己的 getter/setter 方法添加到类中即可。

关于某些基类的错误不仅仅是您正在做的事情（即使我过去也做过）。想想一些班级`Database`和一个班级`Article`。因为`Article`该类需要访问数据库，所以很多人让该类扩展`Database`该类。这是不正确的，因为文章不是数据库。[相反，应该使用依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)将数据库类的实例注入到文章类中。该实例应该被注入到类构造函数中（如果所有或许多方法都需要访问它）或者只是需要它的方法。因此，当扩展一个类时，您必须能够说 B 类是 A 类。

关于您的代码的其他一些说明：

*   总是让你的类名 PascalCase。这并不是使您的代码工作真正需要的，但它遵循[经常使用的命名约定](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-1-basic-coding-standard.md)。
*   我个人的偏好有点：请始终在您的 foreach 语句中添加花括号。当其他人正在阅读您的代码时，会更清楚发生了什么。

# c - µC 上的多代理系统

> ID：11965670
> 
> 赞同：0
> 
> 时间：2012-08-15T07:42:11.113
> 
> 标签：c, embedded, agent

多智能体系统（MAS）是一个广泛的领域。我正在寻找关于 µC 嵌入式系统的 MAS 解决方案。Mobile C (http://www.mobilec.org/) 就是这样一个平台，但它需要带有操作系统的解决方案。我想知道是否有适用于没有操作系统的低功耗控制器的 MAS 解决方案。我不在乎这些解决方案是否降低了能力。

# javascript - MongoDB MapReduce、日期和 % 运算符

> ID：11965676
> 
> 赞同：1
> 
> 时间：2012-08-15T07:42:48.857
> 
> 标签：javascript, python, mongodb, mapreduce

我有一个 python 脚本女巫的问题，我用它来将大型集合聚合成更小的部分，并让它们按时间戳分组。

```
map = Code("function(number) {"
    "emit({"
        "ts : new Date(new Date((this.ts - (this.ts % (60 * number))) * 1000).setSeconds(0))"
   "}, 1);"
"}")

reduce = Code("function(key, vals) {"
    "var sum = 0;"
    "for (var i in vals) {"
        "sum += vals[i]"
    "}"
    "return sum;"
"}") 
```

如您所见，这是一个非常简单的 MapReduce，时间戳 (ts) 应该按给定的分钟数分组。我在这里[http://jsfiddle.net/QgMzK/1/](http://jsfiddle.net/QgMzK/1/)测试了 Javascript ，它似乎工作正常。但是当我在 Python 中运行它时，所有时间戳都变为 ISODate("1970-01-01T00:00:00Z")。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T08:55:45.683

你的 map 函数有一个参数：`number`，当被 map-reduce 调用时，它会被设置为 null 并且在强制之后（有些`%`是零）将使你的地图返回的日期`ISODate("0NaN-NaN-NaNTNaN:NaN:NaNZ")`。这在类型转换后变为`datetime.datetime(1970, 1, 1, 0, 0)`.

删除参数，它应该可以工作。

**编辑**

要确认这一点，请尝试运行以下代码：

```
from pymongo import Connection
from bson.code import Code

db = Connection().mr_test
for i in xrange(10):
    db.things.insert({"x" : i})

map = Code("function(number) {"
    "emit({"
        "ts : number"
    "}, 1);"
"}")

reduce = Code("function(key, vals) {"
    "var sum = 0;"
    "for (var i in vals) {"
        "sum += vals[i]"
    "}"
    "return sum;"
"}")

result = db.things.map_reduce(map, reduce, "test_results")
for doc in result.find():
    print doc 
```

我机器上的结果是：

```
{u'_id': {u'ts': None}, u'value': 10.0} 
```

请注意，`ts`在`None`结果中，`number`执行映射函数时未设置原因。

**编辑 2**

AFAIK 传递参数的唯一方法`map`是使用`scope`可选参数 in `map_reduce`，但无论如何您都必须将其从地图签名中删除。

因此，通过将您的地图更改为：

```
map = Code("function() {"
    "emit({"
        "ts : new Date(new Date((this.ts - (this.ts % (60 * number))) * 1000).setSeconds(0))"
    "}, 1);"
"}") 
```

并通过调用：

```
db.whatever.map_reduce(map, reduce, "collection_name", scope = {"number" : the_value_your_function_needs}) 
```

你可以得到你想要的结果。

# windows - 为什么 CAsyncSocket 没有复制构造函数或 = 运算符？

> ID：11965682
> 
> 赞同：0
> 
> 时间：2012-08-15T07:44:09.957
> 
> 标签：windows, sockets, networking, constructor, copy

我继承了 CAsyncSocket 并希望传递对象。

```
 class ClientSocket : public CAsyncSocket
{
CAsyncSocket nitSocket;
    public:
ClientSocket(void);
virtual ~ClientSocket(void);
 }; 
```

当我这样做时，我得到了几个编译错误

```
 void SomeOtherClass::func(ClientSocket &socket)
     this->socket = socket;
 } 
```

错误：

```
'CAsyncSocket::operator =' : cannot access private member declared in class          'CAsyncSocket' 
```

我查看了文件并发现

```
private:
CAsyncSocket(const CAsyncSocket& rSrc);    // no implementation
void operator=(const CAsyncSocket& rSrc);  // no implementation 
```

我应该创建我的复制构造函数，但是由于没有基类的实现，我的代码会在运行时崩溃。

重要提示：我应该复印吗？我的新对象会收到原始对象的事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:32:41.027

[C++ 中的多态](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)类型通常是[不可](http://www.boost.org/doc/libs/1_50_0/libs/utility/utility.htm#Class_noncopyable)复制的，因为获取基类的副本很容易导致[切片](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)。

# c++ - 为什么 setPrecision 不自动使用最低可用精度？

> ID：11965684
> 
> 赞同：0
> 
> 时间：2012-08-15T07:44:19.040
> 
> 标签：c++

我有一个文本文件，其中包含每一行中的一些值，例如：

```
xxx.xxxxxx 
```

我正在阅读每一行并使用 strd() 将它们转换为 str 并将它们存储在临时双变量中。

当我打印该双变量的值时，它输出的位数比点后的位数多。

预期的输出应该是：

```
xxx.xxxxxx 
```

但我得到

```
xxx.xxxxxxxxxxxxxxxx 
```

使用 setprecision(20)。知道为什么会这样吗？另外，我如何才能阅读文件中的确切内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T08:04:56.793

如果您要求输出精度为 20 位，您将得到它。你似乎很惊讶你得到了你明确要求的东西。除了 20 位精度之外的任何东西都会让我感到惊讶。

至于您阅读的内容，通常，小数点后 6 位的数字在 double 中没有精确表示；`strtod()`将返回最接近的近似值。

`double`我建议在您阅读并理解 [http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)之前不要尝试使用。 `double`不是*实*数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T07:47:18.180

您正在阅读该文件中的内容，但无法存储*确切的*数字。并非每个数字都可以精确地表示为 a `double`（或其他任何东西）。因此，您将得到一个近似值。

# jquery - 使用 eq() 和 for() 循环隐藏特定元素？

> ID：11965688
> 
> 赞同：1
> 
> 时间：2012-08-15T07:44:42.050
> 
> 标签：jquery, html-table

如果前面的输入框的值相同，我试图隐藏一个输入框，例如

```
City     Id    Name

NY        1     James
NY        2     John
TOKYO     3     Jane
TOKYO     4     June 
```

我想隐藏第二个 NY 和第二个 TOKYO（注意：只有城市，ID 和名称应该保留）。

我正在使用下面的 jQuery 脚本：

```
<script>

$(function(){

var tr_no = $('.city').length;

for(i=1; i<=tr_no; i++)  {

    if($(".city:eq("+i+")").val() == $(".city:eq("+i+++")").val()){

        $(".city:eq("+i+1+")").css({'display':'none'});

        }

    }

});

</script> 
```

它不工作。Firebug 控制台不返回任何错误。任何有关如何在 jQuery 上继续此操作的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T08:21:21.817

像这样的东西应该用空格替换重复的城市名称：http: [//jsfiddle.net/S2UNH/7/](http://jsfiddle.net/S2UNH/7/)

```
var prev = "";  // cache previous value
$('#data').find("td.city").each(function() {
    var val = $(this).text().trim();
    if (val == prev) { // same value, blank it
        $(this).text(" ");
    } else {           // new value, store it
        prev = val; 
    }
}); 
```

这与迄今为止发布的其他一些方法有何不同：

*   如果城市不需要提前知道的列表
*   只要前面有不同的城市，城市名称就可以再次出现在列表的下方。例如，请参阅[http://jsfiddle.net/S2UNH/8/](http://jsfiddle.net/S2UNH/8/)。如果 NY 后面的所有条目无论出现在哪里都被隐藏，那么观众可能会将其误认为是 TOKYO 条目。

如果您确实想*隐藏*重复的值而不是替换它们，那么您需要将文本放在另一个元素中，因为隐藏`<td>`标签会弄乱您的布局。

有多种方法可以实现这一目标；这是一种方法：http: [//jsfiddle.net/S2UNH/9/](http://jsfiddle.net/S2UNH/9/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T08:28:24.110

对于有组织的输出：http: [//jsfiddle.net/mattblancarte/mnWH2/10/](http://jsfiddle.net/mattblancarte/mnWH2/10/)

```
var tr = $( 'tr' ),
    duplicates = [];

tr.each( function( k,v ){
  var elem = $( v ),
      child = elem.children().slice(0,1),
      city = child.text();

  if( $.inArray( city, duplicates ) > 0 ){
    child.empty();    
  } else {
    duplicates.push( city );
  }
}); 
```

对于无组织的输出：http: [//jsfiddle.net/mattblancarte/mnWH2/8/](http://jsfiddle.net/mattblancarte/mnWH2/8/)

```
$( 'tr' ).each( function( k,v ){
  var elem = $( v ),
      prev = elem.prev().children().slice(0,1).text(),
      child = elem.children().slice(0,1),
      city = child.text();

  if( prev === city ){
    child.empty();    
  } 
}); 
```

​</p>

注意:: 我不认为你想使用 display:none;。这可能会改变表格......也许 visibility:hidden 会是一个更好的选择。我只是清空单元格。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T08:29:26.933

如果这是您的数据结构：

```
<table>
    <thead>
        <tr>
            <th class="city"><span>City</span></th>
            <th class="id"  ><span>Id  </span></th>
            <th class="name"><span>Name</span></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="city"><span>NY</span></td>
            <td class="id"  ><span>1</span></td>
            <td class="name"><span>James</span></td>
        </tr>
        <tr>
            <td class="city"><span>NY</span></td>   
            <td class="id"  ><span>2</span></td>     
            <td class="name"><span>John</span></td>
        </tr>
        <tr>
            <td class="city"><span>TOKYO</span></td>        
            <td class="id"  ><span>3</span></td>     
            <td class="name"><span>Jane</span></td>
        </tr>
        <tr>
            <td class="city"><span>TOKYO</span></td>     
            <td class="id"  ><span>4</span></td>     
            <td class="name"><span>June</span></td>
        </tr>
        </tr>
    </tbody>
</table>
​ 
```

然后这段代码有效：

```
var tr_no = $('.city').length;
for(i=0; i<tr_no; i++)  {
    if($(".city span").eq(i).text() == $(".city span").eq(i+1).text()){
        $(".city span").eq(i+1).css({'display':'none'});
    }
} 
```

===

我在提琴手中编码了答案，因为它更容易验证：

[http://jsfiddle.net/ewC6q/10/](http://jsfiddle.net/ewC6q/10/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T07:52:28.217

我们只能假设您处理的是在 html 表中编码的数据。如果是这样，则可能是您将字符串作为表格单元格的内容：

```
<td class="city">NY</td> 
```

在表格单元格上使用 css 规则并不总是按预期工作，表格有些特殊。您必须将内容分别包装在一个容器中，可能是这样的：

```
<td><span class="city">NY</span></td> 
```

不确定这是否真的是您的问题，因为您的问题有些模糊。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T07:58:56.700

您可以使用[`:contains`](http://api.jquery.com/contains-selector/)jQuery 选择器来选择包含指定文本的所有元素。

试试这个代码：

```
 // Storing the unique city names in an array
        var arrCity = {};
        $('table tr:gt(0) td:first-child').each(function () {
           arrCity[$(this).text()] = $(this).text(); 
        });

        // Removing the second city name for each cities
        $.each(arrCity, function (key, value) {
           $('table tr td:contains("' + value + '"):eq(1)').html('');
        }); 
```

演示：http: [//jsfiddle.net/codef0rmer/mnWH2/](http://jsfiddle.net/codef0rmer/mnWH2/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-15T08:31:37.717

我假设每个 tr 都有一个类“城市”，

```
$(function () {
    var prevCity = ''
    $('.city').each(function(){
        currCity = $(this).find('td:first').html().trim();
        if(currCity === prevCity)
        {
            $(this).css('display', 'none');
        }
        prevCity =  currCity;      
    });
}); 
```

# c# - 使用状态服务器时关闭浏览器后会话过期

> ID：11965690
> 
> 赞同：0
> 
> 时间：2012-08-15T07:45:06.627
> 
> 标签：c#, asp.net, session, session-cookies, stateserver

我有一个非常简单的问题，我正在使用 State Server 在我的应用程序中存储 Session。问题是，当我点击我的网站并登录我的网站以及登录后，如果我关闭浏览器并重新打开，我的会话就会丢失。我必须重新登录。即使在关闭浏览器后，我必须做些什么才能使会话保持活跃。

我的状态服务器配置如下

```
 <sessionState mode="StateServer" stateConnectionString="tcpip=127.0.0.1:42424" /> 
```

在我的 sesion_start 上的 globel.aspx 文件中，我正在这样做

```
// set the session timeout 20Minutes
    Session.Timeout = ConfigurationManager.AppSettings["SessionTimeOutTimeInMinutes"].ToInt32Safe(); 
```

即使在关闭浏览器后，我必须做些什么才能使会话保持活跃。

![我的状态服务器会话](../Images/f631a7348711ee8953bac5bcf1d0c497.png)

这是我在服务器上的设置的图像

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T08:07:13.503

ASP.NET 会话状态使用非持久会话 cookie（根据设计），当您关闭浏览器时这些 cookie 将无法生存。如果您想要持久的会话状态，您需要一种使 ASP.NET 会话 cookie 持久的方法。

有一些例子。例如：

*   [创建持久 ID Cookie](http://www.windowsitpro.com/article/security-development/create-persistent-id-cookies)
*   [不同浏览器实例之间的持久会话](http://weblogs.asp.net/imranbaloch/archive/2010/06/09/persisting-session-between-different-browser-instances.aspx)
*   [这个 SO question](https://stackoverflow.com/questions/3004226/changing-expiry-on-asp-nets-session-state-cookie)也有一些有用的评论和链接

# ios - 我在应用程序加载而不是图像时开发启动视频。并且 还使用 ios 中的推送视图控制器导航到下一页

> ID：11965695
> 
> 赞同：0
> 
> 时间：2012-08-15T07:45:57.430
> 
> 标签：ios, xcode, uinavigationcontroller, mpmovieplayercontroller, pushviewcontroller

我在应用程序加载而不是图像时开发启动视频。并且​​还使用 ios 中的推送视图控制器导航到下一页。但我不知道这是否是正确的代码。但我使用这个一些问题发生在第三页但它没有被使用我的应用程序加载正常。我的示例代码在这里。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self videopage];
// Do any additional setup after loading the view, typically from a nib.
}

-(void)videopage
{
    NSURL * url=[NSURL URLWithString:@"http://xyz.opening_ani.mp4"];
    MPMoviePlayerController * videos =[[MPMoviePlayerController alloc]initWithContentURL:url];
    videos.view.frame=CGRectMake(0, 0, 1024, 768);
    videos.controlStyle=MPMovieControlStyleNone;
    [self.view addSubview:videos.view];
    [videos play];
    [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(startParsing) name:MPMoviePlayerPlaybackDidFinishNotification object:nil]; 
  //[self startParsing];
}

-(void)startParsing
{
    ViewController * navigation=[[[ViewController alloc]initWithNibName:@"ViewController" bundle:nil]autorelease];
    [self.navigationController pushViewController:navigation animated:NO];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:23:29.753

请使用以下代码。我认为，您的通知对象`nil`无法正常工作。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(startParsing:)
                                             name: MPMoviePlayerPlaybackDidFinishNotification
                                           object:videos];

- (void)startParsing:(NSNotification *)noti
{
   ViewController * navigation=[[[ViewController alloc]initWithNibName:@"ViewController" bundle:nil]autorelease];
    [self.navigationController pushViewController:navigation animated:NO];
} 
```

# jquery - 将文件从服务器加载到 Liferay portlet

> ID：11965699
> 
> 赞同：0
> 
> 时间：2012-08-15T07:46:10.887
> 
> 标签：jquery, xml, ajax, parsing, liferay

我正在开发 Liferay portlet。portlet 应该从与 Liferay 相同的服务器加载 xml 文件，然后通过 ajax 解析此 xml 并将这些值传递给 jQuery。我从 html 文件开始仅测试功能。到目前为止一切正常，但是当我将 html 和 js 代码放入 portlet 时，jQuery 可以工作，但我无法加载文件。我想让 xml 文件位于 /etc/config_files/settings.xml

这是 jQuery 我的脚本的一部分

```
function getToolContent(tool){
     var layer = '.links_' + tool.toLowerCase();
     $(layer).text("");

     $.ajax({
        type:"GET",
        url: "/etc/config_files/settings.xml",
        dataType: "xml",
        success: function(xml){
               $(xml).find("tool").each(function() {              
                   if($(this).find('section').text() == tool){
                     var title = $(this).find('title').text();
                     var text = $(this).find('text').text();

                     $(this).find("link").each(function() {
                        var label = $(this).find('label').text();
                        var referer = $(this).find('referer').text();

                        $(layer).append('<a href="' + referer + '" class="formatted_link" alt="'+ tool + ' link">'+ label +'</a><br>'); 
                     });
                     $("#text").html('<h2>'+ title + '</h2>' +'\n'+ text);

                   }
               });
           }
     });
  } 
```

这是xml文件的示例

```
<?xml version="1.0" encoding="UTF-8"?>
<descriptions>
   <tool>
      <section>TOOL NAME</section>
      <title>TOOL TITLE</title>
      <text>
         <![CDATA[ 
         <ul>
            <li>FEATURE 1</li>
            <li>FEATURE 2</li>
            <li>FEATURE 3</li>
         </ul>
         ]]>
      </text>
      <links>
         <link>
            <label>TOOL LINK LABEL 1</label>
            <referer>https://mytool1.com/</referer>
         </link>
         <link>
            <label>TOOL LINK LABEL 2</label>
            <referer>https://mytool2.com/</referer>
         </link>
      </links>
   </tool>
   <tool>
      ...
   </tool>
</descriptions> 
```

只是我无法从 settings.xml 获取数据

-感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:40:15.097

如果我在 portlet 中有 xml，那么这会有所帮助：

```
 $.ajax({
            type:"GET",
            url: "<%= request.getContextPath()%>/js/settings.xml",
            dataType: "xml",
 ... 
```

settings.xml 在 $PORTLET-DIR/docroot/js/

我尝试从服务器的任何位置加载 xml 时的第二种情况

```
@Override
public void serveResource(ResourceRequest request, ResourceResponse response) throws PortletException, IOException {
    response.setContentType("application/xml;charset=UTF-8");
    response.getPortletOutputStream().write("http://mydomain.com/settings.xml");
} 
```

我收到此日食错误消息

```
Multiple markers at this line
    - The method write(int) in the type OutputStream is not applicable for the arguments 
     (String)
    - url cannot be resolved to a variable 
```

我希望能够从与 Liferay 相同的服务器读取 xml，或者，如果可能的话，从不同的服务器读取它

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T09:46:21.547

**解决方案 #1：**从 portlet 上下文中获取资源

把`settings.xml`到`$PORTLET-DIR/docroot/etc/config_files/settings.xml`. 现在settings.xml 存在于portlet cotentx 中，您可以直接从jsp 中获取它。例如使用 Liferay `<%=request.getServletContext()%>`jsp-tag：

```
...
$.ajax({
       type:"GET",
       url: "<%=request.getServletContext()%>etc/config_files/settings.xml",
... 
```

**解决方案 #2：**通过 portlet ResourceURL 从任何地方获取资源

创建 Liferay MVC-Portlet。放入 portlet`serveResource(...)`方法，例如：

```
@Override
public void serveResource(ResourceRequest request, ResourceResponse response) throws PortletException, IOException {
    response.setContentType("application/xml;charset=UTF-8");
    response.getPortletOutputStream().write(... your settings.xml ...);
    ...
} 
```

创建包含您的 javascript 和 resourceURL 的 jsp 文件，例如：

```
<%@ taglib uri="http://liferay.com/tld/portlet" prefix="liferay-portlet" %>
...
<liferay-portlet:resourceURL var="url" id="myid" />

...
$.ajax({
           type:"GET",
           url: "${url}",
... 
```

# c# - 在服务器应用程序中使用 threadPool 或 new thread() 进行多线程

> ID：11965701
> 
> 赞同：3
> 
> 时间：2012-08-15T07:46:31.430
> 
> 标签：c#, asp.net, .net, multithreading, iis

我已经阅读了大量关于服务器应用程序中多线程的动态和影响（饿死 clr 线程池等），但是为了争论，我有确切的 4 个异步进程，我需要完成每个请求我的（asp.net）页面......现在让我们说时间是更关键的元素，我的网站不应该遇到大量流量。在这种情况下，最好使用该`new Thread()`方法还是生成 4 个线程`ThreadPool.QueueUserWorkItem method`？

我担心（和我的观点）是使用`ThreadPool method`，它可能会创建一个比我真正想要的太大的线程池？当我只需要 4 个线程时，我不能自己生成它们以保持分配的应用程序域、clr 线程的数量最少吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:58:20.553

生成线程是一项非常昂贵且因此具有高延迟的操作。如果您想自己管理线程，这是合理的但不是必需的，您必须构建一个自定义池。

使用线程池工作项并非没有危险，因为它不能保证您的并发级别为 4。如果您碰巧获得 2 或 3，您的 HTTP 请求将有更多的延迟。

我会使用线程池并使用`SetMinThreads`来确保线程立即启动并且总是足够的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T12:45:20.027

我肯定会采用这种`ThreadPool`方法。它专为这种情况而设计。线程池将在内部管理所需的线程数，确保不会使系统负担过重。引用[MSDN](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)：

> 线程池按需提供新的工作线程或 I/O 完成线程，直到达到每个类别的最小值。当达到最小值时，线程池可以在该类别中创建其他线程或等待某些任务完成。从 .NET Framework 4 开始，线程池创建和销毁工作线程以优化吞吐量，吞吐量定义为每单位时间完成的任务数。线程太少可能无法最佳利用可用资源，而线程太多可能会增加资源争用。

如果你真的很偏执，你可以手动限制它`SetMaxThreads`。进行手动线程管理只会引入潜在的错误。

如果您可以访问 .net 4.0，则可以使用 TPL`Task`类（它也使用`ThreadPool`底层），因为它具有更吸引人的特性。

# python - 使用带有 sublime text 2 的 virtualenv

> ID：11965707
> 
> 赞同：26
> 
> 时间：2012-08-15T07:47:28.537
> 
> 标签：python, virtualenv, sublimetext2

我正在使用 sublime text 2 和 virtualenv 进行 python 开发！

标准的 sublime text 2 构建系统使用标准的 python 安装而不是我的安装包的 virtualenv。

如何使用我的 virtualenv 构建 sublime text 2？

我目前使用终端来激活我的环境并运行我的脚本。

更新：从来没有让它工作，但看到我正在使用烧瓶并且当你做出改变时它会构建，这不是一个大问题

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-07T10:53:26.677

您还可以将构建系统的路径设置为`bin`virtualenv 的目录，如下所示：

```
"build_systems":
[
    {
        "selector": "source.python",
        "env": {"PYTHONPATH":"/Users/user/project"},
        "path":"/Users/user/work/myvirtualenv/bin:$PATH",
        "name": "Run virtualenv python",
        "cmd": ["python", "-u", "$file"],
        "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",

        "variants": [
            {   "name": "Run all Tests",
                "working_dir": "/Users/user/project",
                "cmd": ["nosetests"]
            } 
        ]
    }
] 
```

这也允许其他工具（如`nose`示例中的）从 virtualenv 中找到正确的 python 二进制文件。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-22T17:29:06.043

在 Windows 中，这对我有用：

```
"build_systems":
[
    {
    "name": "Run Tests",
    "working_dir": "/path/to/to/your/django_project",
    "cmd": ["/path/to/your/virtualenv/bin/python.exe", "manage.py", "test"]
    }
] 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-04-09T22:25:28.297

Sublime 的构建系统支持可与 Sublime 项目文件一起使用的变量，以使其在项目之间更具可移植性。

如果您的虚拟环境位于标准位置，请在虚拟环境目录上方的项目根目录中创建一个新项目文件（Project -> Save Project As）。然后创建一个新的构建文件，如下所示：

```
{

    "cmd": ["$project_path/venv/bin/python", "-u", "$file"]

} 
```

然后它似乎会自动拾取其余部分 - 就像您从命令行键入 ./venv/bin/python 一样 - 无需弄乱路径、环境变量等。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-13T00:26:46.123

我正在使用 Flask，但我认为它几乎适用于所有情况。
我的实际构建是这样的，其中“benicio”是我的项目目录：

```
{
    "cmd": ["source ~/projs/benicio/venv/bin/activate && python ~/projs/benicio/benicio_tests.py"],
    "shell": true
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-10-10T12:45:50.377

很抱歉为此添加另一个答案 - 但这让我非常难过。

您不仅需要制作一个构建系统，例如：

```
"build_systems":
[
{
    "name": "Maths",
    "env": {"PYTHONPATH":"/home/nebffa/Desktop"},
    "path":"$project_path/bin",
    "cmd": ["$project_path/bin/python3.3", "-u", "$file"]
}
] 
```

但是您必须更改 Sublime Text 中的设置-转到工具->构建系统->“数学”。就我而言，我需要选择“数学”，因为这就是我命名我的构建系统的名称。如果你不这样做 - Sublime Text 不会使用你的构建系统！！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-12-01T23:52:14.793

我刚刚获得了在 virtualenv 中工作的崇高文本 3。尽管 OP 指定了 ST2，但使用 ST3 的人可能更像我自己。感谢 user1248490 和 Russell Beattie，我得到了以下结果：

```
{
    "shell_cmd": "$project_path/vi_sys_pkgs/bin/python3 -u \"$file\"",
    "path": "$project_path/vi_sys_pkgs/bin",
    "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
    "selector": "source.python"
} 
```

请注意，“cmd”现在是 ST3 中的“shell_cmd”。见[ST3 博客](http://www.sublimetext.com/blog/articles/sublime-text-3-beta)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-05-06T09:13:17.417

在 MAC OSX 下，这对我有用

```
{
"cmd": ["/your/virtualenv/bin/python", "-u", "$file"]
} 
```

我所做的是保持简单：

转到根驱动器并创建 python 文件夹：

```
sudo mkdir python 
```

然后进去并创建了virtualenv

```
virtualenv --no-site-packages virtualenvname 
```

然后使用上述命令在 ST2 中创建了一个新版本，它可以工作

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-04-29T02:35:24.407

这就是我作为构建系统所拥有的（假设我的 virtualenv 在我当前的项目目录中创建为一个名为“env”的文件夹）。这至少意味着我不需要在项目之间不断更改构建系统：

```
{
   "cmd": ["env/bin/python", "-u", "$file"]
} 
```

我将它保存为一个新的构建系统（工具 -> 构建系统 -> 新的构建系统）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-01T08:23:20.227

我用它来构建我的 Flask 项目。我已将以下代码添加到我的项目设置中：项目 -> 编辑项目

```
{
     "folders":
     [
          {
               "path": "/C/MyDev/chilinzb/"
          }
     ],
     "build_systems":
    [
        {
            "name": "Flask",
            // activate the specific virtualenv for the project
            "cmd": ["C:/MyDev/virtualenvs/env_chilinzb/Scripts/python", "$file"]
        }
    ]
} 
```

然后我只是切换到我的`run.py`文件并点击`Ctrl+B`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-12-31T14:48:52.490

这种组合效果很好：2 步

1) 将 2 个适当的键添加到“env”键。A) DJANGO_SETTINGS_MODULE B) PYTHONPATH

2）更新 cmd 以反映您要使用的 python 版本。

```
{

"env":{"DJANGO_SETTINGS_MODULE":"my_project.settings",
    "PYTHONPATH":"d:\\Projects\\virts\\my_project\\Scripts;d:\\Projects\\virts\\my_project\\Lib;d:\\Projects\\virts\\my_project\\Lib\\site-packages;D:\\Projects\\my_project"
    },
"cmd": ["c:/Python27/python.exe","$file"]
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-09-12T02:54:17.443

对于任何使用 Heroku 并使用他们的工头工具的人，我都有一个答案，而且效果很好。只需像这样创建一个新的构建系统：

```
{
    "cmd": ["foreman", "run", "python", "-u", "$file"],
    "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
    "selector": "source.python"
} 
```

这会引入 Foreman 可用的所有环境变量，*包括*您的 virtualenv 的 $PATH 变量，它将 virtualenv Python 添加到您的 Python 路径中。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-02-17T22:43:50.637

source 在 lubuntu 上的构建中对我不起作用。采用 '。' 或点而不是“来源”。

这确实有效：

{

```
 "env": {
    "DJANGO_SETTINGS_MODULE":"django_project_name.settings",
    "PYTHONPATH":"/home/my_username/current/django_project_name:/home/my_username/.virtualenvs/django_project_name/lib/python2.7:/home/my_username/.virtualenvs/django_project_name/lib/python2.7/site-packages/"
},
"working_dir":"$project_path",
"cmd":[". /home/my_username/.virtualenvs/django_project_name/bin/activate && python $file"],
"shell":true 
```

}

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-03-12T04:28:21.623

这对我有用：

```
{
    "cmd": ["C:/Users/user/virtualenvs/env1/Scripts/python.exe", "-u", "$file"],
    "file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
    "selector": "source.python"
} 
```

保存的构建：

`"C:\Users\user\AppData\Roaming\Sublime Text 2\Packages\User\"`

作为

`"Python_env1.sublime-build"`

选择

`Tools> Build System> Python_env1`

完毕！

使用 Windows 8.1，st2

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-11-21T10:27:52.957

假设您将项目特定的 virtualenv 保存在项目顶层的 .env 文件夹中。

1.  Sublime > Project > Save project as... （如果您还没有。这将允许您为项目设置自定义构建选项
2.  项目 > 编辑项目：

    ```
    {
       "folders":[
           {
               "path": ".",
               "folder_exclude_patterns": [".env"],
           }
       ],
       "build_systems":[
           {
               "name": "Run in VirtualEnv",
               "shell_cmd": "source $project_path/.env/bin/activate && python -u $file"
           }
       ]
    } 
    ```

3.  工具 > 构建系统 > 在 VirtualEnv 中运行

4.  工具 > 构建

请注意，这是使用 Sublime Text 3 测试的。

* * *

## 回答 #15

> 赞同：-4
> 
> 时间：2012-08-15T16:24:10.470

**请注意有关此解决方案不正确的评论。**

您必须编辑您的[sublime-project 文件](http://www.sublimetext.com/docs/2/projects.html)并添加以下内容：

```
"build_systems":
[
    {
    "name": "Run Tests",
    "cmd": ["source", "/path/to/your/virtualenv/bin/activate"],
    "working_dir": "/path/to/to/you/django_project",
    "cmd": ["python", "manage.py", "test"]
    }
] 
```

# php - PHP - hash_pbkdf2 函数

> ID：11965708
> 
> 赞同：6
> 
> 时间：2012-08-15T07:47:33.647
> 
> 标签：php, security, hash, password-protection

我正在尝试使用此 php 函数对密码进行哈希处理：http: [//be.php.net/manual/en/function.hash-pbkdf2.php](http://be.php.net/manual/en/function.hash-pbkdf2.php)。

这是代码：

```
$hash_algo = "sha256";
$password = "password";
$salt = "salt";
$iterations = 1;
$length = 1;
$raw_output = false;

$hash = hash_pbkdf2($hash_algo, $password, $salt, $iterations ,$length ,$raw_output);

echo $hash; 
```

我收到此错误：**致命错误：调用未定义的函数 hash_pbkdf2()。**

函数怎么可能是未定义的？？？

PS：我的变量的所有值都是为了测试功能而设置的。显然盐不会是“盐”等。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T07:54:11.847

**编辑**：`PHP 5.5.0`这个函数现在被捆绑到核心库中。

* * *

这个函数（无论如何）在核心 PHP 中不可用。它是不久前提出的，到目前为止您只能将其作为[补丁](https://wiki.php.net/rfc/hash_pbkdf2#proposal_and_patch)获取。

您可以使用[`crypt`](http://be.php.net/manual/en/function.crypt.php)or[`hash`](http://be.php.net/manual/en/function.hash.php)代替。 `crypt`实际上在[`hash_pbkdf2`文档](http://be.php.net/manual/en/function.hash-pbkdf2.php)中建议：

> **注意**
> PBKDF2 方法可用于存储密码的散列（NIST 批准用于该用途）。但是，应该注意的`CRYPT_BLOWFISH`是，它更适合密码存储，应该通过`crypt()`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T20:25:04.953

如果您自己包含该功能，则可以使用 PBKDF2 **。**[只需将此网站](https://defuse.ca/php-pbkdf2.htm)上的代码粘贴到您的应用程序中，这再简单不过了。该代码是公共领域的（如该网站所述）。

这是完整的代码：

```
<?php
/*
 * Password hashing with PBKDF2.
 * Author: havoc AT defuse.ca
 * www: https://defuse.ca/php-pbkdf2.htm
 */

// These constants may be changed without breaking existing hashes.
define("PBKDF2_HASH_ALGORITHM", "sha256");
define("PBKDF2_ITERATIONS", 1000);
define("PBKDF2_SALT_BYTES", 24);
define("PBKDF2_HASH_BYTES", 24);

define("HASH_SECTIONS", 4);
define("HASH_ALGORITHM_INDEX", 0);
define("HASH_ITERATION_INDEX", 1);
define("HASH_SALT_INDEX", 2);
define("HASH_PBKDF2_INDEX", 3);

function create_hash($password)
{
    // format: algorithm:iterations:salt:hash
    $salt = base64_encode(mcrypt_create_iv(PBKDF2_SALT_BYTES, MCRYPT_DEV_URANDOM));
    return PBKDF2_HASH_ALGORITHM . ":" . PBKDF2_ITERATIONS . ":" .  $salt . ":" . 
        base64_encode(pbkdf2(
            PBKDF2_HASH_ALGORITHM,
            $password,
            $salt,
            PBKDF2_ITERATIONS,
            PBKDF2_HASH_BYTES,
            true
        ));
}

function validate_password($password, $good_hash)
{
    $params = explode(":", $good_hash);
    if(count($params) < HASH_SECTIONS)
       return false; 
    $pbkdf2 = base64_decode($params[HASH_PBKDF2_INDEX]);
    return slow_equals(
        $pbkdf2,
        pbkdf2(
            $params[HASH_ALGORITHM_INDEX],
            $password,
            $params[HASH_SALT_INDEX],
            (int)$params[HASH_ITERATION_INDEX],
            strlen($pbkdf2),
            true
        )
    );
}

// Compares two strings $a and $b in length-constant time.
function slow_equals($a, $b)
{
    $diff = strlen($a) ^ strlen($b);
    for($i = 0; $i < strlen($a) && $i < strlen($b); $i++)
    {
        $diff |= ord($a[$i]) ^ ord($b[$i]);
    }
    return $diff === 0; 
}

/*
 * PBKDF2 key derivation function as defined by RSA's PKCS #5: https://www.ietf.org/rfc/rfc2898.txt
 * $algorithm - The hash algorithm to use. Recommended: SHA256
 * $password - The password.
 * $salt - A salt that is unique to the password.
 * $count - Iteration count. Higher is better, but slower. Recommended: At least 1000.
 * $key_length - The length of the derived key in bytes.
 * $raw_output - If true, the key is returned in raw binary format. Hex encoded otherwise.
 * Returns: A $key_length-byte key derived from the password and salt.
 *
 * Test vectors can be found here: https://www.ietf.org/rfc/rfc6070.txt
 *
 * This implementation of PBKDF2 was originally created by https://defuse.ca
 * With improvements by http://www.variations-of-shadow.com
 */
function pbkdf2($algorithm, $password, $salt, $count, $key_length, $raw_output = false)
{
    $algorithm = strtolower($algorithm);
    if(!in_array($algorithm, hash_algos(), true))
        die('PBKDF2 ERROR: Invalid hash algorithm.');
    if($count <= 0 || $key_length <= 0)
        die('PBKDF2 ERROR: Invalid parameters.');

    $hash_length = strlen(hash($algorithm, "", true));
    $block_count = ceil($key_length / $hash_length);

    $output = "";
    for($i = 1; $i <= $block_count; $i++) {
        // $i encoded as 4 bytes, big endian.
        $last = $salt . pack("N", $i);
        // first iteration
        $last = $xorsum = hash_hmac($algorithm, $last, $password, true);
        // perform the other $count - 1 iterations
        for ($j = 1; $j < $count; $j++) {
            $xorsum ^= ($last = hash_hmac($algorithm, $last, $password, true));
        }
        $output .= $xorsum;
    }

    if($raw_output)
        return substr($output, 0, $key_length);
    else
        return bin2hex(substr($output, 0, $key_length));
}
?> 
```

如果您需要了解有关散列、盐、迭代和所有其他内容的任何信息，[该网站](http://crackstation.net/hashing-security.htm)提供所有正确答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T07:51:35.633

你可以在手册中找到这个。

> （没有可用的版本信息，可能只有在 SVN 中）

这意味着该功能不可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-24T14:39:56.347

更新

现在 hash_pbkdf2 可用于 (PHP 5 >= 5.5.0, PHP 7)。
文档：[http ://be.php.net/manual/en/function.hash-pbkdf2.php](http://be.php.net/manual/en/function.hash-pbkdf2.php)

# php - WideImage - 转换后 PNG 的透明区域应为白色

> ID：11965709
> 
> 赞同：1
> 
> 时间：2012-08-15T07:47:33.983
> 
> 标签：php, image

每当用户使用我的脚本上传照片时，WideImage 都会将其转换为 JPEG。但是，我刚刚注意到，如果我上传一张带有透明背景的 PNG 图片，它会变成黑色。

有没有办法让这个变白呢？

这就是我保存图像的方式：

```
$img->resizeDown('500', null)->saveToFile('annonce_billeder/'.$bnavn.'.jpeg', 70); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T08:07:31.037

不是很直接。您不需要了解透明度是如何存储在图片中的：它是一个普通的颜色值（任何颜色），已被特别标记为透明。

因此，您尝试的示例图片中指定的颜色很可能实际上*被*编码为黑色，并且在转换时透明度会丢失。

您可能会尝试找出是否可以检测传入图片中是否有标记为透明的颜色，然后在转换图片之前手动将该颜色更改为非透明和白色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T04:27:30.633

可能类似，但我能够创建一个空的真彩色图像并在进行任何绘图之前用它自己的透明颜色填充它：

```
$img = WideImage_TrueColorImage::create(100, 100);
$img->fill(0,0,$img->getTransparentColor());
// then text, watermark, etc
$img->save('...'); 
```

我假设你会做更多类似的事情：

```
$img = WideImage::load(<source>);
if( <$img is png> ) {
   $img->fill(0,0, $img->getTransparentColor());
}
$img->resizeDown(500, null)->saveToFile('target.jpg', 70); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T23:09:07.477

这是如何做到的：

```
// Load the original image
$original = WideImage::load("image.png");
$original->resizeDown(1000); // Do whatever resize or crop you need to do

// Create an empty canvas with the original image sizes
$img = WideImage::createTrueColorImage($resized->getWidth(),$resized->getHeight());
$bg = $img->allocateColor(255,255,255);
$img->fill(0,0,$bg);

// Finally merge and do whatever you need...
$img->merge($original)->saveToFile("image.jpg"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-13T14:28:56.500

通过对 Ricardo Gamba 的解决方案代码进行一些更改（更正），它可以完成工作......

```
// Load the original image
$original = WideImage::load("image.png");
$resized  = $original->resizeDown('500', null); // Do whatever resize or crop you need to do
$original->destroy(); // free some memory (original image not needed any more)

// Create an empty canvas with the resized image sizes
$img = WideImage::createTrueColorImage($resized->getWidth(), $resized->getHeight());
$bg  = $img->allocateColor(255,255,255);
$img->fill(0,0,$bg);

// Finally merge and do whatever you need...
$img->merge($resized)->saveToFile("image.jpg", 70); 
```

# java - 停用组件，直到从 JComboBox 中选择一个元素

> ID：11965713
> 
> 赞同：1
> 
> 时间：2012-08-15T07:48:31.003
> 
> 标签：java, mysql, swing, foreign-keys, jcombobox

我正在使用带有 MySQL 的数据库开发 Java swing 应用程序

我需要知道是否可以停用组件，直到从中选择一个元素`JComboBox`？我必须知道选择第一个 jcombobox 来填充第二个`JComboBox`；第一个选择是第二个外键，像这样：

```
ResultSet res = st.executeQuery("SELECT NomF FROM famille_de_type");
while (res.next()) {
    comboBox_Fam_innewT.addItem(res.getString(1));                
} 
```

这是我的例子：

![例子](../Images/1e834829206be31c1a7dfa805f1faab7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T07:59:15.263

当然可以。当您开始工作时调用`setEnabled(false)`第二个组合框。并添加到第一个组合框`ItemListener`。这将是听项目选择。

```
firstComboBox.addItemListener(new ItemListener()
    {
        public void itemStateChanged(ItemEvent e)
        {
            if (e.getStateChange()==ItemEvent.SELECTED)
            {
                Object selectedItem = e.getItem(); // new item selected
                // TODO select values for 2nd combobox
                // TODO fill 2nd combobox
                secondComboBox.setEnabled(true);
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T07:56:13.090

> 我需要知道在从 jcombobox 中选择一个元素之前是否可以停用组件？

是的。为什么不是组件。[设置启用（假）](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#setEnabled%28boolean%29)？

此外，您可能希望查看[ItemListener](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ItemListener.html)接口以实现您的目标。这是有关[在组合框中处理事件的更多信息。](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#listeners)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T07:58:01.947

因此，在`ActionListenr`中`JComboBox`，只需调用`setEnabled`方法，传递`false`以禁用它们或`true`启用它们

# javascript - Jquery 无限滚动从其他站点加载内容

> ID：11965714
> 
> 赞同：0
> 
> 时间：2012-08-15T07:48:31.523
> 
> 标签：javascript, jquery, scroll, http-get

嗨，我得到了一个叫做[jquery-endless-scroll 的](https://github.com/fredwu/jquery-endless-scroll)jquery 东西。我的代码与此类似：

```
 $(function() {
  $('#list').endlessScroll({
    pagesToKeep: 10,
    fireOnce: false,
    insertBefore: "#list div:first",
    insertAfter: "#list div:last",
    content: function(i, p) {
      $.get('http://google.com', function(data) {
      return '<li>' + data + '</li>'
      });
    },
    ceaseFire: function(i) {
      if (i >= 10) {
        return true;
      }
    },
    intervalFrequency: 5
  });
}); 
```

我的主要问题是它应该返回的内容。其余的不是那么重要。我希望它返回 google.com 的 html 标记，但不返回此标记，它什么也不返回。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:53:06.857

由于出于安全目的的跨域策略问题，您不能使用客户端 Javascript 执行此操作。但是，如果尝试在您的脚本运行的同一域上读取文件的内容，那么它将起作用。

您应该使用[node.js](http://nodejs.org/) - 用于此类内容的服务器端 Javascript：

[http://net.tutsplus.com/tutorials/javascript-ajax/web-scraping-with-node-js/](http://net.tutsplus.com/tutorials/javascript-ajax/web-scraping-with-node-js/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T07:55:55.873

由于同源政策，您的内容不会被退回。您不能从其他服务器请求数据。

[请参阅http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)上的注释

“由于浏览器安全限制，大多数“Ajax”请求都受制于同源策略；请求无法成功地从不同的域、子域或协议中检索数据。”

# qt - QProcess终端输入

> ID：11965718
> 
> 赞同：1
> 
> 时间：2012-08-15T07:48:46.360
> 
> 标签：qt, input, console, qprocess

我不太擅长 Qt，对 Ubuntu 也没有太多了解，但我就是这样做的：我启动 gnome-terminal，然后从它启动我的 *.sh 文件。如何从 Qt 中做到这一点？我做了：

```
QProcess *proc = new QProcess;
proc->start("gnome-terminal");
proc->write("build.sh\n"); 
```

但是只是终端正在打开并且没有任何反应，我可以手动输入命令，但我需要从 QProcess 中完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T02:33:08.420

据说你运行的程序是有缓冲的，所以只有程序写出足够的输出，你才能得到它们。

我现在正在研究这个，但到目前为止还没有发现任何帮助。

**编辑：**

OK，很可能是Qprocess预先使用了管道，并且管道有一个4K的缓冲区，所以想法是跳过这个缓冲区。

如果您在以下之后运行程序`stdbuf`：

```
stdbuf -i0 -o0 -e0 gnome-terminal 
```

它可能会起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-28T20:56:05.077

Gnome-terminal 是终端模拟器，它不执行命令（如果不是内部命令）。

你需要：

`QProcess *proc = new Process(); proc->start("sh"); proc->waitForStarted();`

或其他命令行解释器（sh、bash、cmd.exe），然后您可以使用方法将命令写入 CLI `write`。

如果你想读取输出，你需要这个：

`QString tmp = mProcess->readAllStandardOutput();`

# java - Java FTP 下载进度

> ID：11965719
> 
> 赞同：1
> 
> 时间：2012-08-15T07:48:55.470
> 
> 标签：java, ftp, download

我看过很多例子并试图理解我做错了什么但没有成功，也许你可以帮助我。它总是停在第二个文件上，但第一个文件只是在 c:\ 上以 0kb 大小装箱。files_server.get(i) 是包含我希望下载的所有文件的 ArrayList。

我的代码：

```
public FTPConnection() {

StartD std = new StartD();
std.start();
}

class StartD extends Thread{

        @Override
        public void run()
        {
        for (int i = 0; i < files_server.size(); i++) {
            err = ftpDownload(files_server.get(i), "C:/"+ files_server.get(i)); 
            if (!err) 
                {
                System.out.println("Error in download, breaking");
                break;
                }
            }
        }

        public boolean ftpDownload(String srcFilePath, String desFilePath) 
        {
        try {
            FileOutputStream desFileStream = new FileOutputStream(desFilePath);
            InputStream input = mFTPClient.retrieveFileStream(srcFilePath);
            byte[] data = new byte[1024];
            int count;
            while ((count = input.read(data)) != -1) 
            {
                desFileStream.write(data, 0, count);
            }
            desFileStream.close();

        } catch (Exception e) {

            return false;
        }
    return true;

    }} 
```

如果我使用功能：

```
public boolean ftpDownload(String srcFilePath, String desFilePath) {
        boolean status = false;
        try {

            FileOutputStream desFileStream = new FileOutputStream(desFilePath);
            status = mFTPClient.retrieveFile(srcFilePath, desFileStream);
            desFileStream.close();
            return status;
        } catch (Exception e) {

        }
        return status;
    } 
```

相反，一切正常，但我无法监控文件下载进度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T08:01:38.990

我只将它用于文件解压缩而不是 FTP，但在这种情况下，InputStream 缓冲区可以返回零，所以我想说值得尝试将您的 while 循环更改为：

```
while ((count = input.read(data)) >= 0) 
```

> public int read(byte[] b) 抛出 IOException
> 
> 从输入流中读取一些字节并将它们存储到缓冲区数组 b. 实际读取的字节数以整数形式返回。在输入数据可用、检测到文件结尾或引发异常之前，此方法会一直阻塞。
> 
> 如果 b 的长度为零，则不读取任何字节并返回 0；

也可能是您分配了两次计数，这可能会从数据中删除第一个字节：

```
int count  = input.read(data);
while ((count = input.read(data)) != -1) 
```

所以当你声明它时不要分配任何东西来计数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:49:26.123

假设您的库是 commons-net 包中的 FTP 客户端。找出你的代码出了什么问题并不容易，因为我们无法运行它，而且你的描述（第二个文件停止）是不充分的（它会抛出异常吗？它会永远挂起吗？它是否在没有任何方面完成影响？）。无论如何，我有几个建议：

1.  使用[`CountingOutputStream`](http://commons.apache.org/io/apidocs/org/apache/commons/io/output/CountingOutputStream.html)（来自 Apache commons-io）来监控进度
2.  使用 a[`ProtocolCommandListener`](http://commons.apache.org/net/api-3.1/org/apache/commons/net/SocketClient.html#addProtocolCommandListener%28org.apache.commons.net.ProtocolCommandListener%29)记录正在发生的事情

另外，请注意前 1024 个字节总是丢失。最终，我不知道将文件放在 C:\ 中与服务器上具有相同名称的文件有多安全。在最好的情况下，它可能会导致权限问题，在最坏的情况下，它可能会引发安全漏洞 - 无论如何，如果您对文件名有一定程度的控制，这并不成立，但是请考虑一下这个建议。

这是一个示例客户端

```
public class FTP {

    public static void main(String[] args) throws SocketException, IOException {
        FTPClient client = new FTPClient();

        client.addProtocolCommandListener(new ProtocolCommandListener(){

            @Override
            public void protocolCommandSent(ProtocolCommandEvent evt) {
                logger.debug(evt.getMessage());

            }

            @Override
            public void protocolReplyReceived(ProtocolCommandEvent evt) {
                logger.debug(evt.getMessage());
            }

        });

        client.connect("ftp.mozilla.org");
        client.login("anonymous", "");
        client.enterLocalPassiveMode();

        OutputStream out = new CountingOutputStream(new NullOutputStream()) {
            @Override
            public void beforeWrite(int count) {
                super.beforeWrite(count);
                logger.info("Downloaded " + getCount() + " bytes");
            }
        };

        for (String filename: new String[] {"MD5SUMS", "SHA1SUMS"})
            client.retrieveFile("pub/firefox/releases/15.0b4/" + filename, out);

        out.close();
        client.disconnect();
    }

    private static Logger logger;

    static  {
        logger = Logger.getLogger(FTP.class.getCanonicalName());
    }

} 
```

配置后，记录器将输出所有原始套接字对话，它可以帮助您更好地理解问题，前提是它在 FTP 端而不是在应用程序 IO 中

# asp.net - 如何从通用处理程序访问 application.get

> ID：11965720
> 
> 赞同：1
> 
> 时间：2012-08-15T07:49:08.037
> 
> 标签：asp.net, generic-handler, application-state

我有一个 global.asax，我在其中定义了一些我希望在整个应用程序中可用的变量，例如用于处理某些数据库请求的类。在 aspx 页面中，我可以使用例如在 Visual Basic 中访问这些变量/对象：

```
dim dataMan as clsData = application.get("dataGofer") 
```

我的问题：是否可以从通用处理程序（.ashx 文件）调用它？如果是这样，你能告诉我一个代码片段吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T08:00:02.957

您有方法的`Context`参数`ProcessRequest`，您可以通过它访问页面对象。

```
Dim value=context.Application.Get("key") 
```

# magento-1.4 - Magento：创建发票编号=订单号的发票？

> ID：11965721
> 
> 赞同：4
> 
> 时间：2012-08-15T07:49:12.623
> 
> 标签：magento-1.4, invoice

我正在使用此代码在 Magento 中创建发票：

```
$invoiceId = Mage::getModel('sales/order_invoice_api')->create($order->getIncrementId(), array()); 
```

这会自动为发票分配一个数字（increment_id），例如 100016050。我想创建一个发票，其中 invoice_id**的 increment_id = order 的 increment_id**。

怎么可能呢？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T09:03:42.167

这需要编写一个完整的自定义模块，所以我将只解释一些基础知识。

在 Magento 中，像 , 和 每个实体都有`order`自己独立的数字组。`invoice``creditmemo``shipping``store_id`

这些数字组可以在表中定义`eav_entity_store`：

```
entity_store_id  entity_type_id  store_id  increment_prefix  increment_last_id
              1               5         1                 1          100000000
              2               6         1                 2          200000000
              3               7         1                 3          300000000
              4               8         1                 4          400000000 
```

要知道哪个 entity_type_id 指的是哪个实体，请检查您的`eav_entity_type`表：

```
entity_type_id  entity_type_code  entity_model
             5  order             sales/order
             6  invoice           sales/order_invoice
             7  creditmemo        sales/order_creditmemo
             8  shipment          sales/order_shipment 
```

请注意，您`entity_type_id`的 ' 可能（或可能不会）与此不同。

Magento 通常将每个实体加一，请参阅`eav_entity_type.increment_per_store`。

这发生在创建此类实体时。但是，创建 an`order`并不总是意味着`invoice`也将创建一个 for 它。例如，用户可以在下订单时取消付款，否则付款将不会被付款提供商授权，因此不会`invoice`创建。

这可能会导致间隙，例如`order`已经在`100000005`，而`invoice`仍在`200000002`。

你的代码需要以一种保持同步`order`的方式来管理这个差距。`invoice`

为此，您可以为`sales_order_invoice_save_before`事件创建一个观察者，例如。

`app/code/local/Mycompany/Mymodule/etc/config.xml`：

```
<config>
    <modules>
        <Mycompany_Mymodule>
            <version>0.1.0</version>
        </Mycompany_Mymodule>
    </modules>
    <global>
        <models>
            <mymodule>
                <class>Mycompany_Mymodule_Model</class>
            </mymodule>
        </models>
        <events>
            <sales_order_invoice_save_before>
                <observers>
                    <myobserver>
                        <type>singleton</type>
                        <class>mymodule/observer</class>
                        <method>salesOrderInvoiceSaveBefore</method>
                    </myobserver>
                </observers>
            </sales_order_invoice_save_before>
        </events>
    </global>
</config> 
```

`app/code/local/Mycompany/Mymodule/Model/Observer.php`：

```
class Mycompany_Mymodule_Model_Observer
{

    /**
     * Hook to observe `sales_order_invoice_save_before` event
     *
     * @param Varien_Event_Observer $oObserver
     */

    public function salesOrderInvoiceSaveBefore($oObserver)
    {
        $oInvoice = $oObserver->getInvoice();
    }

} 
```

Magento 在保存对象`invoice`之前将`invoice`对象传递给该观察者。这将允许您使用此对象检索相关`order`对象（以及因此`order`'s `increment_id`）`invoice`。

检索到 s 后，`order.increment_id`您可以搜索`invoice`s 以确定是否存在`invoice`with 。`order.increment_id`

如果它还不存在，您可以在离开观察者之前分配`order.increment_id`to的值并完成。`invoice.increment_id`

请注意，这些只是基础知识。它还有一些陷阱。

例如，尚未处理每个订单案例的多个和/或重复发票。

例如，在某些国家/地区，财政/税务当局要求发票数量不断增加。必须是`1, 2, 3, 4, 5`，但`1, 2, 3, 4 is missing, 5`不可接受。使用上述技术，由于用户取消付款等原因，仍然可能发生这种差距。

但是，这应该让您走上正确的轨道。

# node.js - 有没有办法预编译 node.js 脚本？

> ID：11965725
> 
> 赞同：13
> 
> 时间：2012-08-15T07:49:32.647
> 
> 标签：node.js, binary, precompile

有没有办法预编译 node.js 脚本并分发二进制文件而不是源文件？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-01-08T17:54:09.793

**节点已经这样做了**。

“这个”是指创建机器可执行的二进制代码。不过，它使用[JIT 模式](https://en.wikipedia.org/wiki/Just-in-time_compilation)来做到这一点。在我介绍了其他人在谷歌上搜索可能正在搜索的内容之后，更多信息......

**操作系统本机二进制可执行文件...** 如果使用二进制文件而不是源代码，您的意思是本机操作系统可执行文件，是的。 [NW.JS](https://nwjs.io/)和[Electron](https://electron.atom.io/)都做得很出色。

**在你的 node.js 脚本中使用二进制文件......** 如果使用二进制文件而不是源代码，你的意思是能够将你的脚本的一部分编译成二进制文件，所以它很难或不可能使用，或者你想要机器原生速度的东西，是的。它们被称为[C/C++ 插件](https://nodejs.org/api/addons.html)。您可以分发二进制文件（对于您的特定操作系统）并像使用任何其他 var n = require("blah"); 一样调用它。

**Node 使用二进制文件“Just In Time”**

开箱即用，Node 会自行预编译您的脚本并创建缓存的 V8 机器代码（认为“可执行” - 它使用运行 Node 的 CPU 原生的真实机器代码），然后执行它处理的每个事件。

这是一个谷歌参考，解释了 V8 引擎实际上编译为真正的机器代码，而不是虚拟机。

[谷歌 V8 JavaScript 引擎设计](https://developers.google.com/v8/design#mach_code)

此编译发生在您的应用程序首次加载时。

只要您调用“require('module')”指令，它就会将这些代码位缓存为“模块”。

它不会等待您的整个应用程序被处理，而是在遇到每个“需求”时预编译每个模块。

require 中的所有内容都被编译并引入内存，包括它的变量和活动状态。同样，**与许多流行的博客文章相反**，这是作为单独的机器代码进程执行的。没有虚拟机，也没有任何解释。JavaScript 源代码本质上被编译成内存中的可执行文件。

这就是为什么每个模块都可以引用相同的 require 而不会产生大量开销的原因；它只是引用内存中预编译和现有的对象，而不是“重新需要”整个模块。

**您可以随时强制它重新编译任何模块**。鲜为人知的是，您实际上可以非常轻松地控制重新编译这些对象，使您能够“热重新加载”应用程序的各个部分而无需重新加载整个事物。

一个很好的用例是创建自修改代码，例如，从文件夹加载策略的策略模式，一旦添加了新文件夹，您自己的代码就可以将文件夹重新编译成 in-线策略模式，创建一个“strategyRouter.js”文件，然后使路由器的节点缓存无效，这会强制节点仅重新编译该模块，然后在未来的客户端请求中使用该模块。

*最终结果*：只要将新文件或文件夹放入应用程序，Node 就可以热重载路由或策略。无需重新启动您的应用程序，无需分离无状态和有状态操作：只需将响应编写为常规 Node 模块，并在它们更改时重新编译它们。

**注意：**在人们告诉我自修改代码与 一样糟糕或更`eval`糟糕，调试很糟糕并且无法维护之前，请注意 Node 本身就是这样做的，许多流行的 Node 框架也是如此。我不是在解释原始研究，而是通过设计来解释 Google V8 引擎（以及 Node）的能力，正如这个问题要求我们做的那样。请不要向 R FM 的人开枪，否则人们会停止 R'ing 并保持沉默。

> “Unix 的设计不是为了阻止它的用户做愚蠢的事情，因为这也会阻止他们做聪明的事情。” – 道格·格温

Angular 2、Meteor、新的开源 Node-based [Light table IDE](http://lighttable.com/)和一堆其他框架都朝着这个方向发展，以便进一步将开发人员从代码中移除，让他们更接近应用程序。

**如何重新编译（热重载）所需的 Node 模块？**

这实际上真的很简单......这是一个热重载的 npm，对于替代方案只是谷歌“节点需要热重载”

[https://www.npmjs.com/package/hot-reload](https://www.npmjs.com/package/hot-reload)

**如果我想以一种惊人的新方式构建自己的框架并热重载怎么办？**

就像 Node 中的许多事情一样，这也非常容易。Node 就像用于服务器的 jQuery！;D

[stackoverflow - 使节点的要求缓存无效](https://stackoverflow.com/questions/9210542/node-js-require-cache-possible-to-invalidate)

# javascript - Javascript：如何从 this.img.onload = SomeLoadFunction 调用 this.Something()；

> ID：11965730
> 
> 赞同：0
> 
> 时间：2012-08-15T07:49:48.513
> 
> 标签：javascript

好的，我有一些类似的代码......

```
Thing function () {    
  var img = new Image;    
  DoSomeStuff function() {    
  //Some stuff here that can't be done until my img is loaded...    
};

InitMe function(src) {    
  this.img.onLoad = this.DoSomeStuff;     
  this.img.src = src;    
};    
}

var Test = new Thing();    
Test.InitMe("some string"); 
```

这显然行不通，因为`this.DoSomeStuff`停止存在`Thing.DoSomeStuff`并变成`img.DoSomeStuff`

所以我想我需要知道的是，我怎样才能从...调用`Thing.DoSomeStuff()`函数。`img.onLoad`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T08:05:22.037

在 ES5 上，您可以使用：

```
this.img.onLoad = this.DoSomeStuff.bind(this); 
```

或者：

```
var self = this;
this.img.onLoad = function() {
    self.DoSomeStuff();
} 
```

ps你当前的代码是不合法的。除其他外，变量的范围错误（或不是 的属性`this`）并且您的函数声明语法不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:43:21.700

你可能想要这个

```
function Thing() {    
    this.img = new Image;    
    this.DoSomeStuff=function(){
        // do something
    };

    var self=this;
    this.InitMe=function(src) {   
        self.img.src = src;
        self.img.onload = function(){
            self.DoSomeStuff();
        }
    };    
}

var Test = new Thing();    
Test.InitMe("example.png");​ 
```

[**演示**](http://jsfiddle.net/tDgFm/3/)。

# c++ - 设置 std::vector 到一个范围

> ID：11965732
> 
> 赞同：48
> 
> 时间：2012-08-15T07:49:53.163
> 
> 标签：c++, c++11, stl, stdvector, iota

设置范围的最佳方法是什么`std::vector<int>`，例如 3 到 16 之间的所有数字？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-08-15T07:51:22.757

[`std::iota`](http://en.cppreference.com/w/cpp/algorithm/iota)如果您有 C++11 支持或正在使用[STL](https://www.sgi.com/tech/stl/table_of_contents.html) ，则可以使用：

```
std::vector<int> v(14);
std::iota(v.begin(), v.end(), 3); 
```

或者如果没有实现你自己的。

如果你可以使用`boost`，那么一个不错的选择是[`boost::irange`](http://www.boost.org/doc/libs/1_50_0/libs/range/doc/html/range/reference/ranges/irange.html)：

```
std::vector<int> v;
boost::push_back(v, boost::irange(3, 17)); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-08-15T07:51:18.823

```
std::vector<int> myVec;
for( int i = 3; i <= 16; i++ )
    myVec.push_back( i ); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-15T07:55:29.063

参见例如这个[问题](https://stackoverflow.com/questions/11767512/what-would-be-a-good-implementation-of-iota-n-missing-algorithm-from-the-stl)

```
#include <algorithm>
#include <iostream>
#include <iterator>
#include <vector>

template<class OutputIterator, class Size, class Assignable>
void iota_n(OutputIterator first, Size n, Assignable value)
{
        std::generate_n(first, n, [&value]() {
                return value++;
        });
}

int main()
{
    std::vector<int> v;                   // no default init
    v.reserve(14);                        // allocate 14 ints
    iota_n(std::back_inserter(v), 14, 3); // fill them with 3...16

    std::for_each(v.begin(), v.end(), [](int const& elem) {
        std::cout << elem << "\n";
    });
    return 0;
} 
```

在[Ideone上输出](http://ideone.com/QsV15)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-31T10:45:55.783

std::iota - 很有用，但它需要迭代器，在创建向量之前，......所以我采取了自己的解决方案。

```
#include <iostream>
#include <vector>

template<int ... > struct seq{ typedef seq type;};

template< typename I, typename J> struct add;
template< int...I, int ...J>
struct add< seq<I...>, seq<J...> > : seq<I..., (J+sizeof...(I)) ... >{};

template< int N>
struct make_seq : add< typename make_seq<N/2>::type, 
                       typename make_seq<N-N/2>::type > {};

template<> struct make_seq<0>{ typedef seq<> type; };
template<> struct make_seq<1>{ typedef seq<0> type; };

template<int start, int step , int ... I>
std::initializer_list<int> range_impl(seq<I... > )
{
    return { (start + I*step) ...};
}

template<int start, int finish, int step = 1>
std::initializer_list<int> range()
{ 
    return range_impl<start, step>(typename make_seq< 1+ (finish - start )/step >::type {} ); 
}

int main()
{
    std::vector<int> vrange { range<3, 16>( )} ;

    for(auto x : vrange)std::cout << x << ' ';

}

Output:

  3 4 5 6 7 8 9 10 11 12 13 14 15 16 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-31T22:28:35.323

尝试使用`std::generate`. 它可以根据公式为容器生成值

```
std::vector<int> v(size);
std::generate(v.begin(),v.end(),[n=0]()mutable{return n++;}); 
```

# javascript - 为什么不应用这个 LESS CSS？

> ID：11965733
> 
> 赞同：-1
> 
> 时间：2012-08-15T07:49:53.570
> 
> 标签：javascript, html, css, less

为什么没有加载这个样式集？一个人的背景颜色应该类似于`cadetblue`.

我的带有 home.less.css 链接的页面可以在以下位置找到：[http ://adl.sdf.org/home.shtml](http://adl.sdf.org/home.shtml)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T08:11:08.840

`<link rel="stylesheet/less" type="text/css" href="home.less.css">`在您的标签中添加这一行，`<head>`而不是在`<body>`标签内，如下所示：

```
<!DOCTYPE html>
<html>
/* Add head block in your HTML */
<head> 
   <meta charset="utf-8"> 
   <link rel="stylesheet/less" type="text/css" href="home.less.css">
   <title>!eugaeL eht nioJ ~ !eugaeL eht nioJ ~ !eugaeL eht nioJ</title>
   <script src="lib/html5shiv.js"></script>
   <script src="lib/less.js"></script>
</head> 
```

**您的 HTML 应该如下所示：**

```
<!DOCTYPE html>
<html>    
    <head> 
        <meta charset="utf-8"> 
        <link rel="stylesheet/less" type="text/css" href="home.less.css">
        <title>!eugaeL eht nioJ ~ !eugaeL eht nioJ ~ !eugaeL eht nioJ</title>
        <script src="lib/html5shiv.js"></script>
        <script src="lib/less.js"></script>
        <script src="lib/jq_w_plugins.js"></script>
        <script src="home.js"></script>
        <script src="lib/forkit.js"></script><script>
          $('.forkit-curtain').css({position: 'absolute', bottom: 0, left: 0, margin: '-1.5in 0 0'});
        </script>
        <style>.prefetch { display: none; } </style>
    </head>
<body>
    /* Body Contents */
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:58:44.227

这是你的 CSS 链接：

```
<link rel="stylesheet" type="text/less" href="home.less.css"> 
```

这就是它应该是的

```
<link rel="stylesheet/less" type="text/css" href="home.less.css"> 
```

# java - Eclipse 中的 Maven 原生依赖

> ID：11965734
> 
> 赞同：4
> 
> 时间：2012-08-15T07:49:54.670
> 
> 标签：java, eclipse, maven, m2eclipse, lwjgl

我试图让一些本机依赖项（[LWJGL](http://www.lwjgl.org/)）在 Eclipse（Juno）和 Maven 中顺利工作。

现在的情况：

*   我使用的是`maven-nativedependencies-plugin`0.0.6 版本。这似乎成功地将本机库下载并解压缩到`target/natives`我的项目的子目录中。到目前为止还好。
*   `target/natives`我可以通过手动添加目录来使依赖项工作`Properties / Java Build Path / Maven Dependencies / Native Library Location / Edit...`
*   然而，这只是暂时起作用，因为似乎无法在 pom.xml 中的任何地方指定本机库位置。特别是，每当我执行 a 时它就会中断，`Maven / Update Project...`因为本机库位置已被清除（可能是 m2e 根据 pom 重新配置项目）
*   每当清除本机库位置时，我都会收到错误“java.lang.UnsatisfiedLinkError: no lwjgl in java.library.path”

让它可靠工作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T08:44:16.777

试试这个步骤；

*   转到您的 java 项目的运行配置。
*   打开 Arguments 选项卡并在 VM Arguments 中输入“-Djava.library.path=target/natives”。

对于maven项目；

确保你的 pom.xml 像这样；

```
 <build>
            <plugins>
                    <plugin>
                            <artifactId>maven-compiler-plugin</artifactId>
                            <version>2.3.2</version>
                            <configuration>
                                    <source>1.5</source>
                                    <target>1.5</target>
                                    <encoding>UTF-8</encoding>
                            </configuration>
                    </plugin>
                    <plugin>
                            <groupId>com.googlecode.mavennatives</groupId>
                            <artifactId>maven-nativedependencies-plugin</artifactId>
                            <version>0.0.6</version>
                            <executions>
                                    <execution>
                                            <id>unpacknatives</id>
                                            <phase>generate-resources</phase>
                                            <goals>
                                                    <goal>copy</goal>
                                            </goals>
                                    </execution>
                            </executions>
                    </plugin>
                    <plugin>
                            <groupId>org.apache.maven.plugins</groupId>
                            <artifactId>maven-jar-plugin</artifactId>
                            <version>2.3.2</version>
                            <configuration>
                                    <archive>
                                            <manifest>
                                                    <mainClass>${main.class}</mainClass>
                                                    <addClasspath>true</addClasspath>
                                                    <classpathPrefix>lib/</classpathPrefix>
                                            </manifest>
                                    </archive>
                            </configuration>
                    </plugin>
                    <plugin>
                            <artifactId>maven-assembly-plugin</artifactId>
                            <version>2.2.1</version>
                            <executions>
                                    <execution>
                                            <id>bundle-project-sources</id>
                                            <phase>package</phase>
                                            <goals>
                                                    <goal>single</goal>
                                            </goals>
                                            <configuration>
                                                    <descriptors>
                                                            <descriptor>src/META-INF/assembly.xml</descriptor>
                                                    </descriptors>
                                            </configuration>
                                    </execution>
                            </executions>
                    </plugin>
            </plugins>
    </build> 
```

然后左键点击eclipse项目，进入maven菜单，点击“更新项目配置”。如果仍然有问题，在 eclipse 控制台选项卡中，打开 maven 控制台并再次执行“更新项目配置”选项

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T15:28:01.083

在我的应用程序中，我需要来自 MS 的 sqljdbc4.jar。我的项目是一个 Maven 项目，所以我遇到了同样的问题，我无法在 Eclipse 中编辑 sqljdbc4.jar 下的 Native Library Location。

我的错误是这样的：

> 加载 sqljdbc_auth.dll 失败原因：java.library.path 中没有 sqljdbc_auth

所以我添加了这个：

```
-Djava.library.path="C:\Documents and Settings\ccrhlj01\My Documents\Microsoft JDBC Driver 4.0 for SQL Server\sqljdbc_4.0\enu\auth\x86" 
```

在我的虚拟机参数中。

*   转到您的 java 项目的运行配置。
*   打开 Arguments 选项卡并输入`-Djava.library.path="C:\Documents and Settings\ccrhlj01\My Documents\Microsoft JDBC Driver 4.0 for SQL Server\sqljdbc_4.0\enu\auth\x86"`VM Arguments。

记住路径周围的引号。就我而言，那是我的位置，您需要找到您的 dll 位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T16:19:45.183

实际上，您可以将 dll 复制到 PATH 变量上的任何目录，例如：C:\Windows\System32。这样，您不必在 Eclipse 的 VM 参数选项卡中添加参数。

# c# - ASP.NET 登录、授权和会话管理方法

> ID：11965738
> 
> 赞同：1
> 
> 时间：2012-08-15T07:50:15.230
> 
> 标签：c#, asp.net, session, login, authorization

我是 C# 和 ASP.NET（不是 MVC）的新手，正在尝试编写一个网站。

这是一个问题：登录、授权和会话管理的最佳方法是什么？我不是在问如何使用内置的会员等级或其他现成的解决方案。我只是要求一种手动方法或方法。

**会员输入用户名和密码并点击提交按钮后；您认为哪个是在用户浏览页面、点击按钮或以某种方式与网站交互时保持用户登录的最佳解决方案**

例如，使用 Session 并将 User Name、Id 等写入 session 并在每个页面请求中读取 session 以检查是否有任何成员信息是否是一种好方法；如果是这样，根据会员的喜好设置页面布局？

或者在登录时创建一个对象，根据登录用户设置它的属性，并在整个会话中使用相同的对象并在注销时销毁它？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T08:23:56.760

我建议最好的方法是使用已被证明可行的预先存在的解决方案。

对于身份验证，请使用`MemberShipProvider`. 例如，如果您不想使用`SqlMembershipProvider`，请随时通过派生来实现自己的`System.Web.Security.MembershipProvider`. 然后在您的应用程序文件中注册您的自定义提供`web.config`程序。

要开始使用，只需在网上搜索“**构建自定义会员提供程序**”，您就会发现很多教程。

对于授权，请使用 中的`<authorization>...</authorization>`部分提供的可能性`web.config`。确保了解在应用程序的子文件夹中放置其他 web.config 文件的可能性。

如果您需要基于角色的授权，请使用`RoleProvider`. 相关网页搜索：“**构建自定义角色提供者**”。

如果您想允许您的用户存储首选项，请使用`ProfileProvider`.

总之，抵制[重新发明轮子](http://en.wikipedia.org/wiki/Reinventing_the_wheel)的诱惑......

# java - 位图到 Base64 的转换不起作用

> ID：11965740
> 
> 赞同：0
> 
> 时间：2012-08-15T07:50:37.507
> 
> 标签：java, android, android-intent

我正在尝试调用我创建的用于将位图转换为 Base64 字符串的方法，并且由于某种原因 encode() 方法对我不起作用。

这是我创建的将图像转换为字节数组的方法：

```
public byte[] getImageBytes() { 
    byte[] picBytes = null;
    try{
        //ImageButton ppView = (ImageButton) findViewById(R.id.icon);
        String base64 = profileMap.get("WHOOZNEAR_PROFILEPIC");
        picBytes = Base64.decode(base64, Base64.DEFAULT);  //works with android 2.2 and higher
        //byte[] picBytes = Base64.decode(base64);
        //Bitmap bitmap = BitmapFactory.decodeByteArray(picBytes, 0, picBytes.length);
        //if (bitmap != null )
            //ppView.setImageBitmap(bitmap);
    }       
    catch (Exception e)
    {
        Log.e(TAG, "unhandled exception when attempting to set profile image");
        //Toast.makeText(getBaseContext(), "No profile image selected", Toast.LENGTH_LONG).show();
    }

    return picBytes;
} 
```

这是我创建的将位图转换为 Base64 字符串的方法：

```
public String BitMapToString(Bitmap bitmap){
     String temp = "";
     Bitmap temp_Bitmap = bitmap;
     if (temp_Bitmap != null) { 
         try { 
              ByteArrayOutputStream baos = new ByteArrayOutputStream();
              temp_Bitmap.compress(Bitmap.CompressFormat.PNG, 0, baos);
              byte[] b=baos.toByteArray();
              temp=Base64.encodeToString(getImageBytes(), Base64.DEFAULT);
         }
         catch(Exception e){
              Log.e(LOG_TAG,"[ONACTIVITYRESULT] Could not bind input to the bytearray: " + e.getMessage());
         }
     }
     return temp;
} 
```

这是整个文件：

```
import java.io.ByteArrayOutputStream;

import java.io.FileInputStream;

import java.util.ArrayList;

import java.util.HashMap;

import java.util.LinkedHashMap;

import java.util.Set;

import java.util.Map.Entry;

/*import javax.jmdns.ServiceEvent;

import javax.jmdns.ServiceInfo;*/

import android.app.Activity;

import android.content.Context;

import android.content.Intent;

import android.graphics.Bitmap;

import android.graphics.BitmapFactory;

import android.os.Bundle;

import android.util.Base64;

import android.util.Log;

import android.view.LayoutInflater;

import android.view.Menu;

import android.view.MenuItem;

import android.view.View;

import android.view.ViewGroup;

import android.widget.BaseAdapter;

import android.widget.ImageButton;

import android.widget.ListView;

import android.widget.TextView;

import android.widget.Toast;

public class ProfileActivity extends Activity {

private static final int NEAR = Menu.FIRST;

private final static String LOG_TAG = ProfileActivity.class.getSimpleName();

//ServiceInfo info = null;

private static final String TAG = "ProfileActivity";

protected LinkedHashMap<String, String> profileMap;

protected static ArrayList<Entry<String, String>> profileArrayList;

private Set<Entry<String, String>> profileSet;

//private Context context;

protected static final boolean D = false;

protected static byte[] input;

protected ListView profileList;

private TextView nameView;

private TextView tagLineView;

protected ProfileAdapter customAdapter;

private ImageButton buttonReturnToNearby;

private TextView screenNameView;

private Profile profile = new Profile();

private Bitmap profBitmap;

protected static class ProfileAdapter extends BaseAdapter {

    private LayoutInflater mInflater;

    public ProfileAdapter(Context context ) {

        mInflater = LayoutInflater.from(context);

    }

    public int getCount() {

        return profileArrayList.size();

    }

    public Object getItem(int arg0) {

        return profileArrayList.get(arg0);

    }

    public long getItemId(int position) {

        return position;

    }

    public View getView(int position, View convertView, ViewGroup parent) {

        // A ViewHolder keeps references to children views to avoid unnecessary calls

        // to findViewById() on each row.

        ViewHolder holder;

        // When convertView is not null, we can reuse it directly, there is no need

        // to reinflate it. We only inflate a new View when the convertView supplied

        // by ListView is null.

        if (convertView == null) {

            convertView = mInflater.inflate(R.layout.peer_profile_row, null, false);

            // Creates a ViewHolder and store references to the two children views

            // we want to bind data to.

            holder = new ViewHolder();

            holder.propertyName = (TextView) convertView.findViewById(R.id.propertyName);

            holder.propertyValue = (TextView) convertView.findViewById(R.id.propertyValue);

            //TODO: Put a default view here or something if it is a phone or email

            //holder.icon = (ImageView) convertView.findViewById();

            convertView.setTag(holder);

        } else {

            // Get the ViewHolder back to get fast access to the TextView

            // and the ImageView.

            holder = (ViewHolder) convertView.getTag();

        }

        // Bind the data efficiently with the holder.            

        //TODO: Make this correct

        holder.propertyName.setText( profileArrayList.get(position).getKey() );

        holder.propertyValue.setText( profileArrayList.get(position).getValue() );

        return convertView;

    }

    class ViewHolder {

        TextView propertyName;

        TextView propertyValue;

    }

    public boolean isEmpty() {

        return profileArrayList.isEmpty();

    }

};

 /*

public void onStart(){

    super.onStart();

    if (D) {Log.i(TAG, "++++ ON START +++++"); }

}

  */

@Override

public void onCreate (Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_profile_display);

    //if (D) {Log.i(TAG, "++++ ON CREATE +++++"); }

    HashMap<String, String> temp = new HashMap<String, String>();

    try 

    {

        temp = (HashMap<String, String>)  profileMap; 

        //THE LINE BELOW NEEDS TO BE UNCOMMENTED TO RECEIVE THE ATTRIBUTES 4/9/12

        temp = (HashMap<String, String>)  this.getIntent().getSerializableExtra("ProfileData"); 

        temp = profile.getAllAttributesIncludingPicture();

        profile.setTagLine(temp.get("TagLine"));

        profile.setProfilePicStr(temp.get("WHOOZNEAR_PROFILEPIC"));

        profile.setWhatIDo(temp.get("What I Do"));

    }

    catch (Exception e)

    {

        Log.e(TAG, "Runtime Exceptions suck");

    }

    if (temp != null) {

        profileMap =  new LinkedHashMap<String, String> (temp);     

        //profileMap = profile.getAllAttributesIncludingPicture();

    }

    else

    {

        Log.e(TAG, "temp HashMap is NULL");

    }

    setProfile(profile);

    screenNameView = (TextView) findViewById(R.id.ab_screen_name);

    screenNameView.setText("Peer Profile");

    buttonReturnToNearby = (ImageButton) findViewById(R.id.btn_nearby);

    buttonReturnToNearby.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            try {

                Log.e(TAG, "commented out call to WhoozNearActivity");

                /*

                if(profileMap.get("Name") != null && profileMap.get("Name").compareTo("Set a new value") != 0

                        && profileMap.get("Age") != null && profileMap.get("Age").compareTo("Set a new value") != 0

                        && profileMap.get("Looking") != null && profileMap.get("Looking").compareTo("Set a new value") != 0){

                    float age = Float.parseFloat(profileMap.get("Age"));

                    Intent mainIntent = new Intent(getBaseContext(), WhoozNearActivity.class);

                    startActivity(mainIntent);

                    //finish();

                } else {

                    Toast.makeText(getBaseContext(), "Please, enter values for Name, Age and Looking", Toast.LENGTH_LONG).show();

                }

                */

            } catch (NumberFormatException nfe) {

                nfe.printStackTrace();

                Toast.makeText(getBaseContext(), "Value Age is not correct", Toast.LENGTH_LONG).show();

            } catch (NullPointerException npe) {

                npe.printStackTrace();

                Toast.makeText(getBaseContext(), "Error", Toast.LENGTH_LONG).show();

            }

        }

    });

    setupAdapter();

    setProfile(profile);

    //updateProfileList();  //extra call to update is not required

    setupViews();

    Log.e(TAG, "profile map data after creation: " + profileMap);

    //Log.e(TAG, "Get Profile Pic STR:"+getProfilePicStr());

    //Log.e(TAG, "Get Image STR:"+getImageStr());

}

public void setProfile(Profile profile) {

    this.profileMap = profile.getAllAttributes();

    updateProfileList();

    Log.e(TAG, "profile map data after setProfile: " + profileMap);

}

public String getTagline() { 

    return profileMap.get("TagLine");

}

public String getName() { 

    Log.e(TAG, "Got the NAME!");

    return profileMap.get("Name");

}

/*public void setProfilePic() { 

    Log.e(TAG, "SET THE PROFILE PIC!!");

}*/

public LinkedHashMap<String, String> getProfileMap() { 

    return profileMap;

}

public void setupAdapter() {

    customAdapter = new ProfileAdapter(this);

}

public void setupViews() {

    if (profileList == null) {

        profileList = (ListView) findViewById(R.id.profile_list);

        profileList.setAdapter(customAdapter);

    }

    nameView = (TextView) findViewById(R.id.profileNameLine);

    nameView.setText(profileMap.get("Name"));

    tagLineView = (TextView) findViewById(R.id.profileTagLine);

    tagLineView.setText(profileMap.get("TagLine"));

    //try to set profile pic, otherwise use default

    try{

        ImageButton ppView = (ImageButton) findViewById(R.id.btn_whooznear);

        String base64 = profileMap.get("WHOOZNEAR_PROFILEPIC");

        //base64 = ConvertandSetImagetoBase64(profile.getSelectedImgPath());

        //Log.e("LOG_TAG", "ProfileActivity Base64 String:"+base64);

        //SET THE LOCAL PROFILE PIC STR

        profile.setProfilePicStr(base64);

        byte[] picBytes = Base64.decode(base64, Base64.DEFAULT);  //works with android 2.2 and higher

        //byte[] picBytes = Base64.decode(base64);

        Bitmap bitmap = BitmapFactory.decodeByteArray(picBytes, 0, picBytes.length);

        if (bitmap != null) {

            setProfileBitmap(bitmap);

            ppView.setImageBitmap(bitmap);

        }

    }       

    catch (Exception e)

    {

        Log.e(TAG, "unhandled exception when attempting to set profile image:" + e.getMessage());
        Toast.makeText(getBaseContext(), "No profile image selected", Toast.LENGTH_LONG).show();
    }
}

/*public String getImageStr() { 

    return profileMap.get("WHOOZNEAR_PROFILEPIC").toString();

}*/

/*public String getProfilePicStr() { 
    return profileMap.get("ProfilePic").toString();
}*/

 /*public String ConvertandSetImagetoBase64(String imagePath) { 
        String base64 = null;
        byte[] input = null;

        try{

            FileInputStream fd = new FileInputStream(imagePath);
            Bitmap bmt = BitmapFactory.decodeFileDescriptor(fd.getFD());

            try{                
                ByteArrayOutputStream stream = new ByteArrayOutputStream();
                Bitmap tmp = ProfileActivity.scaleDownBitmap(bmt, 10, this);
                tmp.compress(Bitmap.CompressFormat.JPEG, 10, stream);
                input = stream.toByteArray();
                base64 = Base64.encodeToString(input, Base64.DEFAULT);

                //LocalProfileActivity.input = input;

            }catch(Exception e){
                Log.e(LOG_TAG,"[ONACTIVITYRESULT] Could not bind input to the bytearray: " + e.getMessage());
            }
        }
        catch (Exception e){
            Log.e("LocalProfile", "Could not load selected profile image");
        }
        return base64;
    }*/

public void setProfileBitmap(Bitmap profBitmap) { 
    this.profBitmap = profBitmap;
}

public Bitmap getProfileBitmap() {
    return profBitmap;
}

public String GetBase64ImgString() { 
    String base64Str = Base64.encodeToString(getImageBytes(), Base64.DEFAULT);
    return base64Str;
}

public String BitMapToString(Bitmap bitmap){
     String temp = "";
     Bitmap temp_Bitmap = bitmap;
     if (temp_Bitmap != null) { 
         try { 
              ByteArrayOutputStream baos = new ByteArrayOutputStream();
              temp_Bitmap.compress(Bitmap.CompressFormat.PNG, 0, baos);
              byte[] b=baos.toByteArray();
              temp=Base64.encodeToString(getImageBytes(), Base64.DEFAULT);
         }

         catch(Exception e){

              Log.e(LOG_TAG,"[ONACTIVITYRESULT] Could not bind input to the bytearray: " + e.getMessage());

         }

     }

     return temp;

}

public Bitmap StringToBitMap(String encodedString){

     try{

       byte[] encodeByte=Base64.decode(encodedString,Base64.DEFAULT);

       Bitmap bitmap=BitmapFactory.decodeByteArray(encodeByte, 0, encodeByte.length);

       return bitmap;

     }catch(Exception e){

       e.getMessage();

       return null;

     }

}

public byte[] getImageBytes() { 

    byte[] picBytes = null;

    try{

        //ImageButton ppView = (ImageButton) findViewById(R.id.icon);

        String base64 = profileMap.get("WHOOZNEAR_PROFILEPIC");

        picBytes = Base64.decode(base64, Base64.DEFAULT);  //works with android 2.2 and higher

        //byte[] picBytes = Base64.decode(base64);

        //Bitmap bitmap = BitmapFactory.decodeByteArray(picBytes, 0, picBytes.length);

        //if (bitmap != null )

            //ppView.setImageBitmap(bitmap);

    }       

    catch (Exception e)

    {

        Log.e(TAG, "unhandled exception when attempting to set profile image");

        //Toast.makeText(getBaseContext(), "No profile image selected", Toast.LENGTH_LONG).show();

    }

    return picBytes;

}

public void updateProfileList() {

    try

    {

    LinkedHashMap <String, String> temp = (LinkedHashMap<String, String>) profileMap.clone();

    temp.remove("Name");

    temp.remove("TagLine");

    temp.remove("ProfileName");

    profileSet = temp.entrySet();

    }

    catch(NullPointerException e)

    {

        e.printStackTrace();

        Log.i(TAG, "exception in thread: updateProfileList() ... profile map: " + profileMap);

    }

    //Profile personfound = new Profile();

            //personfound.addAttribute("age", info.getPropertyBytes("profilePic"));

            //personfound.addAttribute("name", profileMap.get("name"));

            //personfound.addAttribute("age", info.getPropertyString("age"));

            //personfound.addAttribute("gender", info.getPropertyString("gender"));

            //personfound.addAttribute("name", info.getPropertyString("name"));

    //getProfile(personfound);

    //profileArrayList = new ArrayList( Arrays.asList(profileArray) );

    if (profileArrayList == null)

        profileArrayList = new ArrayList();

    else

        profileArrayList.clear();

    for (Entry<String, String> e : profileSet ) {

        profileArrayList.add(e);

    }

    if (profileList != null)

        if (profileList.getAdapter() != null)

            customAdapter.notifyDataSetChanged();

    Log.e(TAG, "profile map data after update: " + profileMap + profileMap.get("WHOOZNEAR_PROFILEPIC"));

}

public Profile getProfile(Profile profilePersonFound) { 

    return profilePersonFound;

}

public void onNameClick (View v) {

    return;

}

public boolean onCreateOptionsMenu(Menu menu) {

    menu.add(0, NEAR, 0, "NearBy").setIcon(android.R.drawable.ic_menu_info_details);

    return true;

}

@Override

public boolean onOptionsItemSelected(MenuItem item) {

   switch (item.getItemId()) {

   case NEAR:

       try {

            /*if(profileMap.get("Name") != null && profileMap.get("Name").compareTo("Set a new value") != 0

                    && profileMap.get("Age") != null && profileMap.get("Age").compareTo("Set a new value") != 0

                    && profileMap.get("Looking") != null && profileMap.get("Looking").compareTo("Set a new value") != 0){

                float age = Float.parseFloat(profileMap.get("Age"));

                Intent mainIntent = new Intent(this, WhoozNearActivity.class);

                startActivity(mainIntent);

                //finish();

            } else {

                Toast.makeText(this, "Please, enter values for Name, Age and Looking", Toast.LENGTH_LONG).show();

            }*/

           String tagline = profileMap.get("TagLine");

           /*NeighborViewModel nv = new NeighborViewModel();

           nv.setNeighborDesc(profileMap.get("TagLine"));  //Try setServiceDesc();

           String name = profileMap.get("Name");

           NeighborViewModel nv = null;

           nv.setNeighborName(name);*/

           Profile profile = new Profile();

           profile.setProfileName(profileMap.get("Name"));

           profile.setTagLine(profileMap.get("TagLine"));

           if (profileMap.get("Name") != null) { 

               //Toast.makeText(this, "In If Statement", Toast.LENGTH_LONG).show();

               //Toast.makeText(this, tagline, Toast.LENGTH_LONG).show();

               //Intent Call

               //Intent intent = new Intent(this, WhoozNearActivity.class);

               //startActivity(intent);

               //Pass the profile data so that it can be broadcasted in ConnectActivity.java

               Intent myIntent = new Intent(ProfileActivity.this,
                   AndroidClient.class);

               Toast.makeText(getBaseContext(), "In ProfileActivity", Toast.LENGTH_SHORT);
               myIntent.putExtra("Props", profileMap);
               startActivity(myIntent);  
           }

           else {
            Toast.makeText(this, "Please, enter values for Name", Toast.LENGTH_LONG).show();

        }

        } catch (NumberFormatException nfe) {

            nfe.printStackTrace();

            Toast.makeText(this, "Value Age is not correct", Toast.LENGTH_LONG).show();

        } catch (NullPointerException npe) {

            npe.printStackTrace();

            Toast.makeText(this, "Error", Toast.LENGTH_LONG).show();

        }
        break;
    }
    return true;
}
Bitmap ShrinkBitmap(byte[] file, int width, int height){
    BitmapFactory.Options bmpFactoryOptions = new BitmapFactory.Options();
       bmpFactoryOptions.inJustDecodeBounds = true;
       Bitmap bitmap;
       int heightRatio = (int)Math.ceil(bmpFactoryOptions.outHeight/(float)height);
       int widthRatio = (int)Math.ceil(bmpFactoryOptions.outWidth/(float)width);

       if (heightRatio > 1 || widthRatio > 1)
       {
        if (heightRatio > widthRatio)
        {
         bmpFactoryOptions.inSampleSize = heightRatio;
        } else {
         bmpFactoryOptions.inSampleSize = widthRatio; 
        }
       }
       bmpFactoryOptions.inJustDecodeBounds = false;
       bitmap = BitmapFactory.decodeByteArray(file, 0, file.length, bmpFactoryOptions);
    return bitmap;
   }

public static Bitmap scaleDownBitmap(Bitmap photo, int newHeight, Context context) {
    final float densityMultiplier = context.getResources().getDisplayMetrics().density;        

    int h= (int) (newHeight*densityMultiplier);
    int w= (int) (h * photo.getWidth()/((double) photo.getHeight()));

    photo=Bitmap.createScaledBitmap(photo, w, h, true);

    return photo;
    }
} 
```

下面是 ProfileDBUtilities.java 中的 getProfile() 方法：

```
public Profile getProfile(int pId) {
    Profile profile = null;
    try {
        // int profileID = pId;
        // profileName = pName;
        Cursor cursor = _activity.managedQuery(
                ProfileDBObject.Profile.CONTENT_URI, new String[] {
                        ProfileDBObject.Profile._ID,
                        ProfileDBObject.Profile.NAME,
                        ProfileDBObject.Profile.PROFILE_NAME }, "_ID = '"
                        + pId + "'", null, ProfileDBObject.Profile._ID);

        profile = new Profile();
        profile.setProfileId(pId);

        cursor.moveToFirst();
        int nameCol = cursor
                .getColumnIndex(ProfileDBObject.Profile.PROFILE_NAME);
        String profileName;
        try {
            profileName = cursor.getString(nameCol);
        }
        // If the profile ID doesn't exist, return the first profile in the
        // DB
        catch (Exception e) {
            cursor = _activity.managedQuery(
                    ProfileDBObject.Profile.CONTENT_URI, new String[] {
                            ProfileDBObject.Profile._ID,
                            ProfileDBObject.Profile.NAME,
                            ProfileDBObject.Profile.PROFILE_NAME }, null,
                    null, ProfileDBObject.Profile._ID);
            cursor.moveToFirst();
            nameCol = cursor
                    .getColumnIndex(ProfileDBObject.Profile.PROFILE_NAME);
            profileName = cursor.getString(nameCol);
        }

        profile.setProfileName(profileName);

        cursor.close();
        // Start grabbing the related attributes
        cursor = _activity.managedQuery(
                AttributeDBObject.Attribute.CONTENT_URI, new String[] {
                        AttributeDBObject.Attribute.ATTR_NAME,
                        AttributeDBObject.Attribute.ATTR_VALUE },
                "PROFILE_ID = '" + pId + "'", null,
                AttributeDBObject.Attribute._ID);
        cursor.moveToFirst();
        int aNameIndex = cursor
                .getColumnIndex(AttributeDBObject.Attribute.ATTR_NAME);
        int aValIndex = cursor
                .getColumnIndex(AttributeDBObject.Attribute.ATTR_VALUE);
        String aName;
        String aValue;
        // If there are attributes, add them to the profile
        if (cursor.getCount() != 0) {
            do {
                aName = cursor.getString(aNameIndex);
                aValue = cursor.getString(aValIndex);
                profile.addAttribute(aName, aValue);

            } while (cursor.moveToNext());
        }
        cursor.close();
    } catch (Exception e) {
        Log.e(LOG_TAG,"Error when getting profile from the db: " + e.getMessage());
    }

    return profile;
} 
```

这是堆栈跟踪：

```
 08-15 07:34:37.141: I/ActivityThread(382): Pub com.iconnexus.client: com.iconnexus.client.ProfileProvider
 08-15 07:34:37.351: D/dalvikvm(382): GC_EXTERNAL_ALLOC freed 57K, 53% free 2566K/5379K, external 1625K/2137K, paused 78ms
 08-15 07:34:41.581: E/ProfileDBUtilities(382): Error when getting profile from the db: Index 0 requested, with a size of 0
 08-15 07:34:41.651: E/ProfileActivity(382): profile map data after update: {}null
 08-15 07:34:41.651: E/ProfileActivity(382): profile map data after setProfile: {}
 08-15 07:34:41.651: E/ProfileActivity(382): profile map data after update: {}null
 08-15 07:34:41.661: E/ProfileActivity(382): profile map data after setProfile: {}
 08-15 07:34:41.671: E/ProfileActivity(382): unhandled exception when attempting to set profile image:null
 08-15 07:34:41.711: E/ProfileActivity(382): profile map data after creation: {}
 08-15 07:34:41.711: E/ProfileActivity(382): profile map data after update: {}null
 08-15 07:34:41.721: E/ProfileActivity(382): profile map data after setProfile: {}
 08-15 07:34:41.721: E/ProfileActivity(382): unhandled exception when attempting to set profile image:null
 08-15 07:34:41.991: E/ProfileActivity(382): LocalProfileActivity profileJSON: {"nameValues":{},"profileId":13,"valid":false}
 08-15 07:34:42.061: E/LocalProfile(382): ConvertandSetImagetoBase64: Could not load selected profile image
 08-15 07:34:42.071: E/LocalProfile(382): ConvertandSetImagetoBase64: Could not load selected profile image
 08-15 07:40:23.171: W/KeyCharacterMap(382): No keyboard for id 0
 08-15 07:40:23.193: W/KeyCharacterMap(382): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
 08-15 07:40:24.161: E/ProfileDBUtilities(382): Error when getting profile from the db: Index 0 requested, with a size of 0
 08-15 07:40:24.161: E/ProfileActivity(382): profile map data after update: {}null
 08-15 07:40:24.161: E/ProfileActivity(382): profile map data after setProfile: {}
 08-15 07:40:24.592: E/ProfileActivity(382): profile map data after update: {}null
 08-15 07:40:24.621: E/ProfileActivity(382): profile map data after setProfile: {}
 08-15 07:40:24.621: E/ProfileActivity(382): profile map data after update: {}null
 08-15 07:40:24.632: E/ProfileActivity(382): profile map data after setProfile: {}
 08-15 07:40:24.641: E/ProfileActivity(382): unhandled exception when attempting to set profile image:null
 08-15 07:40:24.691: E/ProfileActivity(382): profile map data after creation: {}
 08-15 07:40:24.711: E/AndroidClient(382): Before initEventHandlers
 08-15 07:40:24.711: E/AndroidClient(382): After initEventHandlers
 08-15 07:40:24.721: E/AndroidClient(382): Local Profile Map is null from intent in ConnectActivity
 08-15 07:40:25.101: E/AndroidClient(382): TAGLINE: null
 08-15 07:40:25.101: E/AndroidClient(382): WHOOZNEAR PIC:null
 08-15 07:40:25.111: E/AndroidClient(382): REGEX REPLACEALL:"Ryan"
 08-15 07:40:25.111: E/AndroidClient(382): temp_Bitmap is NULL!!
 08-15 07:40:25.141: E/ProfileActivity(382): unhandled exception when attempting to set profile image
 08-15 07:40:25.141: D/AndroidRuntime(382): Shutting down VM
 08-15 07:40:25.151: W/dalvikvm(382): threadid=1: thread exiting with uncaught exception (group=0x40015560)
 08-15 07:40:25.181: E/AndroidRuntime(382): FATAL EXCEPTION: main
 08-15 07:40:25.181: E/AndroidRuntime(382): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.iconnexus.client/com.iconnexus.client.AndroidClient}: java.lang.NullPointerException
 08-15 07:40:25.181: E/AndroidRuntime(382):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
 08-15 07:40:25.181: E/AndroidRuntime(382):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
 08-15 07:40:25.181: E/AndroidRuntime(382):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
 08-15 07:40:25.181: E/AndroidRuntime(382):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
 08-15 07:40:25.181: E/AndroidRuntime(382):     at android.os.Handler.dispatchMessage(Handler.java:99)
 08-15 07:40:25.181: E/AndroidRuntime(382):     at android.os.Looper.loop(Looper.java:123)
 08-15 07:40:25.181: E/AndroidRuntime(382):     at android.app.ActivityThread.main(ActivityThread.java:3683)
 08-15 07:40:25.181: E/AndroidRuntime(382):     at java.lang.reflect.Method.invokeNative(Native Method)
 08-15 07:40:25.181: E/AndroidRuntime(382):     at java.lang.reflect.Method.invoke(Method.java:507)
 08-15 07:40:25.181: E/AndroidRuntime(382):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
 08-15 07:40:25.181: E/AndroidRuntime(382):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
 08-15 07:40:25.181: E/AndroidRuntime(382):     at dalvik.system.NativeStart.main(Native Method)
 08-15 07:40:25.181: E/AndroidRuntime(382): Caused by: java.lang.NullPointerException
 08-15 07:40:25.181: E/AndroidRuntime(382):     at android.util.Base64.encode(Base64.java:494)
 08-15 07:40:25.181: E/AndroidRuntime(382):     at android.util.Base64.encodeToString(Base64.java:456)
 08-15 07:40:25.181: E/AndroidRuntime(382):     at com.iconnexus.client.ProfileActivity.GetBase64ImgString(ProfileActivity.java:315)
 08-15 07:40:25.181: E/AndroidRuntime(382):     at com.iconnexus.client.AndroidClient.onCreate(AndroidClient.java:266)
 08-15 07:40:25.181: E/AndroidRuntime(382):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 08-15 07:40:25.181: E/AndroidRuntime(382):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
 08-15 07:40:25.181: E/AndroidRuntime(382):     ... 11 more
 08-15 07:40:27.442: I/Process(382): Sending signal. PID: 382 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:33:32.407

我认为问题在于你的`BitMapToString(Bitmap bitmap)`方法。

您将参数位图转换为字节数组（b）然后没有使用它......

```
byte[] b=baos.toByteArray();
temp=Base64.encodeToString(getImageBytes(), Base64.DEFAULT); 
```

可能你应该`b`在`incodeToString`方法中使用它......所以它应该看起来像这样......

```
byte[] b=baos.toByteArray();
temp=Base64.encodeToString(b, Base64.DEFAULT); 
```

`getImageBytes()`简而言之，不要调用`encodeToString`Method。

希望这可以帮助...

如果您决定这回答了您的问题，请将其标记为“已接受”。这将提高您和我的声誉分数。

# javascript - 为什么我的 javascript 会被评论

> ID：11965741
> 
> 赞同：0
> 
> 时间：2012-08-15T07:50:44.557
> 
> 标签：javascript, html, browser

所以我正在研究这个 TinyMCE javascript，它应该很简单，但这是交易。当我查看我的页面源代码时，这就是我所看到的

```
<script type="text/javascript">
<!--
tinyMCE.init({
mode : "exact",
elements : "content",
theme : "advanced",
skin : "o2k7",
skin_variant : "blue",
plugins : "advimage,advlink,contextmenu,fullscreen,inlinepopups,nonbreaking,paste,preview,print,safari,style,table",
theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,formatselect,fontselect,fontsizeselect,|,forecolor,backcolor",
theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,bullist,numlist,|,undo,redo,|,link,unlink,anchor,image,|,hr,removeformat,visualaid",
theme_advanced_buttons3 : "tablecontrols,|,preview,print,fullscreen,code",
theme_advanced_toolbar_location : "top",
theme_advanced_toolbar_align : "left",
theme_advanced_statusbar_location : "bottom",
theme_advanced_resizing : true,
fullscreen_new_window : true
});
// -->
</script> 
```

有人可以向我解释为什么我的浏览器（FF 和 IE）会在我的脚本周围添加评论吗？脚本似乎可以正常工作...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T07:52:16.913

HTML 注释用于防止旧版浏览器将 JavaScript 显示为文本。旧浏览器会将您的 JS 代码视为一个长 HTML 注释。另一方面，新的支持 JavaScript 的浏览器通常会解释标签之间的 JS 代码和（JS 代码的第一行和最后一行将被 JavaScript 解释器视为单行注释）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T07:53:36.780

注释块仅适用于 HTML。这是 Web 开发早期的常见做法，其中一些浏览器不支持 JavaScript，因此代码被注释掉，因此不会打印到屏幕上。

# version-control - Clearprompt 命令：元素列表生成

> ID：11965744
> 
> 赞同：2
> 
> 时间：2012-08-15T07:51:08.467
> 
> 标签：version-control, clearcase, cleartool

鉴于我之前的问题[Script for recursive add-to-source control: How to ignore specific files and](https://stackoverflow.com/questions/11888121/script-for-recursive-add-to-source-control-how-to-ignore-specific-files-and-fol) folder ，关于命令`clearprompt`（从而为源代码控制生成元素列表）出现的一个问题是它有限制关于它可以处理的元素数量。所以我的问题是：**有没有办法允许更多的元素？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T08:53:12.457

[`clearprompt`](ftp://ftp.software.ibm.com/software/rational/docs/v2003/cc_family/ccase/doc/all/cc_ref/clearprompt.htm)在大小、每行字符数以及如您所见的元素数量方面有一些限制。
据我所知，这些都不是固定的，在 Windows 或 Unix 上。

因此，最好拆分您的列表，并显示几个 clearprompt 对话框，标题指定所述对话框的数量超过预期的窗口总数（1/6、2/6、3/6，...）

唯一的其他解决方案是依赖另一个库来显示该对话框，但使用它的优点`ccperl`是它与 ClearCase 客户端一起安装，这意味着它在所有客户端工作站上都​​可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:28:54.363

我相信我遇到了类似的问题，因为这个限制，clearprompt 对话框是空的。我调试了脚本，错误似乎是由于`echo`在以下语句中传递给的 max 命令行的系统限制

```
`echo $listelement > $list_add` 
```

我只是将此行更改为以下内容

```
open(LIST_ADD,">".$list_add);
print LIST_ADD $listelement; 
close(LIST_ADD); 
```

或者基本上，我不是依靠 shell 来复制内容，而是通过 perl 做同样的事情并解决了这个问题。

# android - uptime命令的结果在android上意味着什么？

> ID：11965749
> 
> 赞同：3
> 
> 时间：2012-08-15T07:51:28.887
> 
> 标签：android, shell

我在 android shell 上运行 uptime 命令，我得到的结果与 Linux 上的相同命令不同。这个结果究竟意味着什么？

```
up time: 01:53:22, idle time: 00:37:26, sleep time: 01:08:02 
```

正常运行时间是启动时的总时间。但是idle和sleep有什么区别呢？是什么

```
time = uptime - idle_time - sleep_time 
```

这是某种运行时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:06:22.807

我已经尝试`watch -n 1 uptime`并做了一些测试：滚动主屏幕，玩一些游戏，锁定，解锁......

`uptime`- 从开机时间，很清楚

`idle`- 当我不碰手机时，下一次即使在某些应用程序/游戏中也会增长一点，所以它可能是经典的 linux idle = 当内核、用户和 i/o 为 0% 时它会增长

`sleep`- 锁定屏幕（但它增长非常缓慢，可能它受到 sshd、我的连接以及调用*watch* ` 和*uptime*的干扰）。在锁定屏幕中，您应该注意到 CPU 仅以一个内核和最低频率运行，确保在此模式下有更多“睡眠”和省电例程（至少显示关闭 :)）

`"rest time"`- 可能至少当 CPU 有一些工作时:)

# android - Galaxy Note 模拟器上的 listview 行拉伸

> ID：11965753
> 
> 赞同：1
> 
> 时间：2012-08-15T07:51:54.057
> 
> 标签：android, android-layout

项目有 4 个可绘制和布局文件夹（xh、h、m、l）。这是清单的一部分：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15" />
<supports-screens
    android:smallScreens="true"
    android:normalScreens="true"
    android:largeScreens="true"
    android:xlargeScreens="true"
    android:anyDensity="true" /> 
```

这是xhdpi的整个主要xml代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:background="@layout/bg_repeat" >

<RelativeLayout
    android:id="@+id/bg_header"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="top"
    android:background="@drawable/bg_header"
    android:padding="0dip">
    <ImageView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:src="@drawable/text_header" />
</RelativeLayout>

<ListView
    android:id = "@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:divider="@null"
    android:dividerHeight="2.5dp"
    android:layout_marginTop="10dp"
    android:layout_marginBottom="10dp"
    android:cacheColorHint="@android:color/transparent"
    android:listSelector="@android:color/transparent"
    />
</LinearLayout> 
```

这是 xhdpi 的行 xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout
xmlns:android = "http://schemas.android.com/apk/res/android"
xmlns:foo="http://schemas.android.com/apk/res/test"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:paddingRight="20dp"
android:paddingLeft="20dp">

<LinearLayout
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/menu_selector">

<test.TextViewPlus
    android:id="@+id/menutext"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:textColor="#3D1E00"
    android:textSize="@dimen/TitleNormalXH"
    foo:customFont="Mj_Shablon.ttf"
   android:gravity="right|center_vertical"/>
</LinearLayout>
</LinearLayout> 
```

这是银河笔记模拟器设置： dpi:285 。安卓版本：google api level 10 (2.3.3)

这是输出：

![在此处输入图像描述](../Images/11a08cebe10ed5f382476b62f52d66bd.png)

第二个问题：put android:background="@drawable/menu_selector" for row 的布局和 listview 的布局有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T09:32:59.590

我想这会有所帮助：在你的适配器中，在 getView(...) 方法中，在你给你的行充气之后，使用这个：

```
row.setMinimumHeight(height); 
```

方法的参数在 pixle 中，您应该选择特定的 dp 高度，然后将其转换为 px。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T11:57:21.380

主要的xml代码：

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android">
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
    <RelativeLayout
        android:id="@+id/bg_header"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:background="@drawable/bg_header">
        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/text_header" />
    </RelativeLayout>
    <ListView
        android:id = "@+id/mainlist"
        style="@style/ListView"
        android:dividerHeight="2.5dp"
        android:layout_marginTop="10dp"
        android:layout_marginBottom="10dp"/>
</LinearLayout>
</merge> 
```

行xml代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:dr="http://schemas.android.com/apk/res/pak"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:paddingRight="20dp"
android:paddingLeft="20dp">
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/menu_selector"
    android:gravity="center">

    <pak.TextViewPlus
        android:id="@+id/menutext"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:textSize="@dimen/TitleNormalM"
        android:gravity="right"
        dr:customFont="Mj_Shablon.ttf"
        android:padding="0dp"/>

</RelativeLayout>
</RelativeLayout> 
```

和九个补丁图像必须是这样的：![http://i.stack.imgur.com/PE9ly.png](../Images/fb39bda332134439f7a58b349a7a510e.png)

# javascript - 如何拆分从 json 文件中读取的数据？

> ID：11965755
> 
> 赞同：1
> 
> 时间：2012-08-15T07:51:58.450
> 
> 标签：javascript, jquery

我在`data.json`文件中有这个 json 数据。

```
[
"1009 2000",
"1009 2001",
"1002 2002",
"1003 2002"
] 
```

我正在遍历这些数据并根据`,`以下代码拆分数据

```
var show = function () {
    var span = $('.input');
    var c = $('ul');
    $.getJSON('data/data.json', function (id) {
        var j = id.split(',');
        var hsl = j[0];
        var ny = j[1];

        $('<li>' + id + '</li>').appendTo(c);
        $(c).appendTo(span);
        console.log(hsl);
    });
} 
```

但这在控制台中给了我这个错误

```
Object 1009 2000,1009 2001,1002 2002,1003 2002 has no method 'split' 
```

如何拆分这些数据以便我可以像这样显示它

```
 1009 2000
 1009 2001
 1002 2002
 1003 2002 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T07:57:09.307

您不需要拆分任何内容，只需循环：

```
$.getJSON('data/data.json', function (ids) {
    for (var i = 0; i < ids.length; i++) {
        var id = ids[i];
        console.log(id);
    }
}); 
```

jQuery 会自动将服务器返回的字符串解析为 javascript 数组，以便您可以直接访问其元素。

如果要检索 2 个标记，可以按空格分割每个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:54:58.737

id 变量实际上是数组，因为 getJson 会为您解析它。只需遍历数组并打印每个项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T07:57:16.037

好像你的意思是说返回的数据是一个字符串，你需要将它转换为一个数组。

```
$.getJSON('data/data.json', function(id) {

    id = JSON.parse(id);
    for(var i=0, len=id.length; i<len; i++){
        //do your stuff here
    }
}); 
```

# javascript - 如何在javascript中的url回调函数中传递参数

> ID：11965756
> 
> 赞同：1
> 
> 时间：2012-08-15T07:52:08.973
> 
> 标签：javascript, callback

我有一个来自我正在尝试修改的 wordpress 插件的 javascript 文件。似乎存在某种漏洞的跨域请求。就是这个功能：

```
function urlCallback(url){
  var req = url;
  var head = document.getElementsByTagName("head").item(0);
  var script = document.createElement("script");
  script.setAttribute("type", "text/javascript");
  script.setAttribute("src", req);
  head.appendChild(script);   
} 
```

传递的 url 类似于`'http://url.com/page?callback=namespace.myFunction'`myFunction 是脚本中其他地方定义的函数。

据我了解，这是在我的页面顶部插入一个源 URL，导致浏览器加载该页面。然后调用附加到该 url 的回调，将结果作为单个参数传递给示例函数 myFunction。

我的问题是我需要为几个不同的唯一 url 调用 myFunction，但结果与调用 url 相关。myFunction 似乎在页面完成加载时被调用，所以我不能简单地计算它正在操作的数据集。我需要一些方法让 myFunction 传递一个在回调 url 中编码的附加变量，或者让 myFunction 知道它附加到的 url。

谁能帮我？

**编辑：**

为了进一步详细说明，这是我拥有的代码的简化版本：

```
var parseUrls = (function(){
  function urlCallback(url){
    var req = url;
    // Here is where I need to save the url
    var head = document.getElementsByTagName("head").item(0);
    var script = document.createElement("script");
    script.setAttribute("type", "text/javascript");
    script.setAttribute("src", req);
    head.appendChild(script);   
  }

  return {
    options: {},
    parseNextUrl: function(result) {
        if (!result || !result.data) { return; }
        var data = result.data;
        // Here is where I need the url

    },
    parseUrl: function(result) {
      if (!result || !result.data) { return; }
      var data = result.data;
      for (var i = 0; i < data.length; i++) {
        urlCallback( data[i].url + "/new_url/page?callback=parseUrls.parseNextUrl" );
      }
    },
    showResult: function(options){
      urlCallback( "http://start.url.com/page?callback=parseUrls.parseUrl" );
      this.options = options;
    }
  };
})(); 
```

为了清楚起见，只要源请求完成，就会调用 parseNextUrl。这意味着到那时所有 urlCallback 调用都已经完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:03:09.467

这是基于新提供的代码的更新代码。

```
var parseUrls = (function(){
  function urlCallback(url){
    // Create request
    var head = document.getElementsByTagName("head").item(0);
    var script = document.createElement("script");
    script.setAttribute("type", "text/javascript");
    script.setAttribute("src", req);
    head.appendChild(script);   
  }

  return {
    parsers: [], //response handler array
    options: {},
    parseUrl: function(result) {
      //parseUrls.parseUrl.url = request URL

      if (!result || !result.data) { return; }
      var data = result.data;

      // Create requests
      for (var i = 0; i < data.length; i++) {
        // Create new response handler
        var parseNextUrl = function(result) {
          // parseNextUrl.url = request URL

          if (!result || !result.data) { return; }
          var data = result.data;

          // Check the URL
          console.log('Result URL = ' + parseNextUrl.url);
        };

        // Make callback names and URLs for each handler
        var cbName = "parseUrls.parsers[" + this.parsers.length + "]";
        var req = data[i].url + "/new_url/page?callback=" + encodeURI(cbName);

        // Save the URL in the handler
        parseNextUrl.url = req;

        // Put handler into storage.
        // Note: Don't delete/insert any of parsers array element
        // until no more new requests and all responses are received.
        this.parsers.push(parseNextUrl);

        urlCallback(req);
      }
    },
    showResult: function(options){
      this.parseUrl.url = "http://start.url.com/page?callback=parseUrls.parseUrl";

      urlCallback(this.parseUrl.url);
      this.options = options;
    }
  };
})(); 
```

# c# - 演员表 to List at runtime I 'm trying to build a DI container and I 've stumbled on to the following problem: I have a method that retrieves a list of registered instances for a given type and I want to use that to inject I 问问题 问问题 2012-08-15T07:52:45.003 4206 次 This question shows research effort; it is useful and clear 6 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I 'm trying to build a DI container and I 've stumbled on to the following problem: I have a method that retrieves a list of registered instances for a given type and I want to use that to inject IEnumerable <t>properties in a given object. An example of what I am trying to achieve would be the following: class A { public IList <iexample>Objects { get; set; } } class B: IExample {} class C: IExample {} Container.Register<iexample>(new B()); Container.Register<iexample>(new C()); var obj = new A(); Container.Inject(A); Debug.Assert(A.Objects != null && A.Objects.Count == 2); My Retrieve method returns an IList, mainly because I have no type information at that moment, so I am attempting to convert that list into a List <t>at injection time. Here is a succint form of the methods doing the work: public virtual IList Retrieve(Type type) { var instances = Registry[type]; foreach(var instance in instances) Inject(type, instance); // omitted return instances; } public virtual void Inject<t>(T instance) { var properties = typeof (T).GetProperties(); foreach (var propertyInfo in properties) { var propertyType = propertyInfo.PropertyType; if (!IsIEnumerable(propertyType)) continue; var genericType = propertyType.GetGenericArguments()[0]; propertyInfo.SetValue(instance, GetListType(genericType, Retrieve(genericType)), null); } } protected virtual object GetListType(Type type, IEnumerable items) { return items.Select(item => Convert.ChangeType(item, type)).ToList(); } The code returns the error: System.InvalidCastException : Object must implement IConvertible. Sadly, I don't know how to proceed from here. Perhaps I am doing this all wrong. I 've thought of using generics or injecting multiple properties by hand, but I'd really like to not have to do that. Thanks in advance for any help or ideas. You could create a generic list like this: public virtual IList Retrieve(Type type) { // ... listType = typeof(List<>).MakeGenericType(new Type[] { type }); IList list = (IList)Activator.CreateInstance(listType); // ... return list } this list can be casted to IList<t>, because it is one. You could consider to use IEnumerable and Cast<t>, but then you don't have an instance of a list. I don'^t know how important it is to have one. c#castingdependency-injection 4 1 回答 1 This answer is useful 9 您可以像这样创建一个通用列表： public virtual IList Retrieve(Type type) { // ... listType = typeof(List<>).MakeGenericType(new Type[] { type }); IList list = (IList)Activator.CreateInstance(listType); // ... return list } 此列表可以转换为IList<t>，因为它是一个。 您可以考虑使用IEnumerableand Cast<t>，但是您没有列表的实例。我不知道拥有一个有多重要。 于 2012-08-15T08:13:46.577 回答 Related 2 c++ - 类成员和继承 1 symfony - 在 FOSUserBundle 中添加角色 4 python - 为什么会出现内存错误？ 3 drupal - Drupal Shibboleth 注销 1 php - Yii orm - is-a 关系（泛化） 6 c# - 任务完成后C#不释放内存 1 spring - @OneToMany 显示集合变量的重复值 2 javascript - 使 getelementbyid 复数 1 css - 下拉菜单中 LI 的约束宽度子 UL 4 c++ - 将 std::string 拆分为两个 const char* 导致第二个 const char* 覆盖第一个 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11965766
> 
> 赞同：6
> 
> 时间：
> 
> 标签：c#, casting, dependency-injection

I 'm trying to build a DI container and I 've stumbled on to the following problem: I have a method that retrieves a list of registered instances for a given type and I want to use that to inject `IEnumerable<T>` properties in a given object. An example of what I am trying to achieve would be the following:

```
class A { public IList<IExample> Objects { get; set; } }
class B: IExample {}
class C: IExample {}
Container.Register<IExample>(new B());
Container.Register<IExample>(new C());
var obj = new A();
Container.Inject(A);
Debug.Assert(A.Objects != null && A.Objects.Count == 2); 
```

My `Retrieve` method returns an `IList<object>`, mainly because I have no type information at that moment, so I am attempting to convert that list into a `List<T>` at injection time. Here is a succint form of the methods doing the work:

```
public virtual IList<object> Retrieve(Type type)
{
    var instances = Registry[type];
    foreach(var instance in instances) 
        Inject(type, instance); // omitted
    return instances;
}

public virtual void Inject<T>(T instance)
{
    var properties = typeof (T).GetProperties();
    foreach (var propertyInfo in properties)
    {
      var propertyType = propertyInfo.PropertyType;
      if (!IsIEnumerable(propertyType)) continue;
      var genericType = propertyType.GetGenericArguments()[0];
      propertyInfo.SetValue(instance, 
          GetListType(genericType, Retrieve(genericType)), null);
    }
}

protected virtual object GetListType(Type type, IEnumerable<object> items)
{
    return items.Select(item => Convert.ChangeType(item, type)).ToList();
} 
```

The code returns the error: `System.InvalidCastException : Object must implement IConvertible.` Sadly, I don't know how to proceed from here. Perhaps I am doing this all wrong. I 've thought of using generics or injecting multiple properties by hand, but I'd really like to not have to do that.

Thanks in advance for any help or ideas.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T08:13:46.577

您可以像这样创建一个通用列表：

```
public virtual IList Retrieve(Type type)
{
  // ...
  listType = typeof(List<>).MakeGenericType(new Type[] { type });
  IList list = (IList)Activator.CreateInstance(listType);
  // ...
  return list
} 
```

此列表可以转换为`IList<T>`，因为它是一个。

您可以考虑使用`IEnumerable`and `Cast<T>`，但是您没有列表的实例。我不知道拥有一个有多重要。</t></t></t></t></t></t></iexample></iexample></iexample></t>

# javascript - 为什么两个“这个”不一样？

> ID：11965779
> 
> 赞同：0
> 
> 时间：2012-08-15T07:53:50.527
> 
> 标签：javascript

```
var arrayfunc = [function(){return this;}];
var func = arrayfunc[0];
arrayfunc[0]();    //[function (){return this;}]
func();            //Window 
```

我不知道为什么`this`不一样？你帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T07:59:44.663

想想如下：

```
arrayfunc[0](); // this refer to arrayfunc
window['func'](); // this refer to window 
```

即使通过`arrayfunc[0] === func`return true，调用者也是不同的。

`arrayfunc[0]();`通过对象调用函数`arrayfunc`，

`window['func']();`通过对象调用函数`window`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T07:55:11.700

因为这是一个指向函数作用域的动态指针。例如，它不是 Java 中的固定引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T08:00:17.853

这是一个常见的误解。当您为方法创建别名时 - 即，正如您所做的那样，将其提交给变量 - 了解您丢失`this`了原始方法运行的上下文。

例如：

```
var arr = [function() { alert(this[1]); }, 'hello'];
arr[0](); //'hello' - 'this' is the array
var func = arr[0];
func(); //undefined - 'this' is Window 
```

第 2 行返回“hello”，因为该方法在数组的上下文中运行——因为**我们从其中调用了它**。

然而，第 4 行调用了相同的方法，但来自我们设置的别名 ( `func`) 的上下文。这会重置其上下文，因此`this`指向默认值 - 在浏览器中，这意味着`window`.

如果您想创建一个函数的快捷方式但保留其上下文，您可以使用`bind()`（仅限 ECMA5 浏览器）执行此操作。

```
var func = arr[0].bind(arr);
func(); //'hello' 
```

`bind()`创建一个新函数但绑定到特定上下文 - 在您的情况下，它是从中获取的初始数组。

# iphone - NSJSONSerialization 与谷歌 API

> ID：11965782
> 
> 赞同：1
> 
> 时间：2012-08-15T07:53:54.910
> 
> 标签：iphone, ios, json, google-maps

当我收到来自 google maps API 的请求时，我使用此方法获取 json：

```
NSDictionary *jsonArray = [NSJSONSerialization JSONObjectWithData:dataRequest options: NSJSONReadingAllowFragments error: nil]; 
```

jsons 看起来像这样：

```
{
routes =     (
            {
        bounds =             {
            northeast =                 {
                lat = "50.90961";
                lng = "20.6492";
            };
            southwest =                 {
                lat = "50.05775000000001";
                lng = "19.94544";
            };
        };
        copyrights = "Dane do Mapy \U00a92012 Google";
        legs =             (
                            {
                distance =                     {
                    text = "126 km";
                    value = 126118;
                };
                duration =                     {
                    text = "2 godz. 0 min";
                    value = 7229;
                };
                "end_address" = "Aleja Powstania Warszawskiego 15, 30-001 Krak\U00f3w, Polska";
                "end_location" =                     {
                    lat = "50.06";
                    lng = "19.9589";
                };
                "start_address" = "Mas\U0142owska 2, 25-001 Kielce, Polska";
                "start_location" =                     {
                    lat = "50.88884";
                    lng = "20.6492";
                };
                steps =                     (
                                            {
                        distance =                             {
                            text = "0,1 km";
                            value = 109;
                        };
                        duration =                             {
                            text = "1 min";
                            value = 39;
                        };
                        "end_location" =                             {
                            lat = "50.88824";
                            lng = "20.64796";
                        };
                        "html_instructions" = "Kieruj si\U0119 <b>Mas\U0142owska</b> na <b>po\U0142udniowy zach\U00f3d</b> w stron\U0119 <b>Szyd\U0142\U00f3wek G\U00f3rny</b>";
                        polyline =                             {
                            points = "gfruHo``}BvBvF";
                        };
                        "start_location" =                             {
                            lat = "50.88884";
                            lng = "20.6492";
                        };
                        "travel_mode" = DRIVING;
                    },
                                            {
                        distance =                             {
                            text = "0,2 km";
                            value = 221;
                        };
                        duration =                             {
                            text = "2 min";
                            value = 97;
                        };
                        "end_location" =                             {
                            lat = "50.88896";
                            lng = "20.64503";
                        };
                        "html_instructions" = "Skr\U0119\U0107 <b>w prawo</b> w <b>Szyd\U0142\U00f3wek G\U00f3rny</b>";
                        polyline =                             {
                            points = "obruHwx_}BaCpOMv@";
                        };
                        "start_location" =                             {
                            lat = "50.88824";
                            lng = "20.64796";
                        };
                        "travel_mode" = DRIVING;
                    },
                                            {
                        distance =                             {
                            text = "0,6 km";
                            value = 596;
                        };
                        duration =                             {
                            text = "1 min";
                            value = 56;
                        };
                        "end_location" =                             {
                            lat = "50.88427";
                            lng = "20.64091";
                        };
                        "html_instructions" = "Skr\U0119\U0107 <b>w lewo</b> w <b>Warszawska</b>";
                        polyline =                             {
                            points = "_gruHmf_}BrGvFjQ`OhA|@";
                        };
                        "start_location" =                             {
                            lat = "50.88896";
                            lng = "20.64503";
                        };
                        "travel_mode" = DRIVING;
                    },
                                            {
                        distance =                             {
                            text = "1,0 km";
                            value = 950;
                        };
                        duration =                             {
                            text = "2 min";
                            value = 104;
                        };
                        "end_location" =                             {
                            lat = "50.88779";
                            lng = "20.62863";
                        };
                        "html_instructions" = "Skr\U0119\U0107 w drug\U0105 <b>w prawo</b> w kierunku <b>Jesionowa</b>";
                        polyline =                             {
                            points = "uiquHul~|BiEvScCzKs@xCmBhK_@dD}@dIk@tBYr@Mf@Op@MnA";
                        };
                        "start_location" =                             {
                            lat = "50.88427";
                            lng = "20.64091";
                        };
                        "travel_mode" = DRIVING;
                    },
                                            {
                        distance =                             {
                            text = "4,2 km";
                            value = 4185;
                        };
                        duration =                             {
                            text = "5 min";
                            value = 292;
                        };
                        "end_location" =                             {
                            lat = "50.90806000000001";
                            lng = "20.58021";
                        };
                        "html_instructions" = "Na rondzie zjazd nr <b>1</b> w <b>\U0141\U00f3dzka</b>";
                        polyline =                             {
                            points = "u_ruH}_||BCd@Cf@?N@RDPHJJHsBzQIl@OrAm@bEEV[vBa@fBUfA_A~Bk@jA}DvGyDpEu@fAsA`C_AhBeAlCmAhDgAnDuAvEwAzFyAvGgA|F]bDH`Ba@fCQjA]tBi@hC}@zDsB|GeBdDwD|Gg@~@cAhBGJ_H`Mo@jAiB`DaAlBcBfD_@`A[fACDuCrMcC`L?@{AhHw@rDiDhPSx@e@dBc@vAa@fAi@jAgCfF{@rAe@p@A@m@p@kBhB";
                        };
                        "start_location" =                             {
                            lat = "50.88779";
                            lng = "20.62863";
                        };
                        "travel_mode" = DRIVING;
                    },
                                            {
                        distance =                             {
                            text = "0,2 km";
                            value = 213;
                        };
                        duration =                             {
                            text = "1 min";
                            value = 54;
                        };
                        "end_location" =                             {
                            lat = "50.90968";
                            lng = "20.57859";
                        };
                        "html_instructions" = "Kontynuuj wzd\U0142u\U017c <b>Trasa 74</b>";
                        polyline =                             {
                            points = "k~uuHiqr|BkBzAiEtEMP";
                        };
                        "start_location" =                             {
                            lat = "50.90806000000001";
                            lng = "20.58021";
                        };
                        "travel_mode" = DRIVING;
                    },
                                            {
                        distance =                             {
                            text = "92,8 km";
                            value = 92776;
                        };
                        duration =                             {
                            text = "1 godz. 17 min";
                            value = 4641;
                        };
                        "end_location" =                             {
                            lat = "50.24777";
                            lng = "20.08501";
                        };
                        "html_instructions" = "Skr\U0119\U0107 <b>w lewo</b> w <b>E77</b>";
......
status = OK;
} 
```

接下来我使用这种方法来获取“点”键的值：

```
NSArray *items = [jsonArray valueForKeyPath:@"routes.legs.steps.polyline.points"]; 
```

当我想打印数组元素时，它只给出一个元素（这很奇怪，因为我在 json 中有 25 个点），结果看起来像这样：

```
(
    (
    "gfruHo``}BvBvF",
    "obruHwx_}BaCpOMv@",
    "_gruHmf_}BrGvFjQ`OhA|@",
    "uiquHul~|BiEvScCzKs@xCmBhK_@dD}@dIk@tBYr@Mf@Op@MnA",
    "u_ruH}_||BCd@Cf@?N@RDPHJJHsBzQIl@OrAm@bEEV[vBa@fBUfA_A~Bk@jA}DvGyDpEu@fAsA`C_AhBeAlCmAhDgAnDuAvEwAzFyAvGgA|F]bDH`Ba@fCQjA]tBi@hC}@zDsB|GeBdDwD|Gg@~@cAhBGJ_H`Mo@jAiB`DaAlBcBfD_@`A[fACDuCrMcC`L?@{AhHw@rDiDhPSx@e@dBc@vAa@fAi@jAgCfF{@rAe@p@A@m@p@kBhB",
    "k~uuHiqr|BkBzAiEtEMP",
    "ohvuHegr|Bl@rCN`@Xf@n@h@xAx@hAz@nAdCtFdf@~Dv]~Ipu@zHpq@hAjIpA`JhBbJ`CxJjC~IfDlK`AtCfAvCfCdGdGhKpB|CvD`F`D|D~BzBhFbF`DvCjDhC`DdBtFtC|EtBxSjIfAd@|ErBzB~@~InDtX`KjDzArBz@|[dLvYpKzLdF`FnB~E|BrDfCbCxBjClChAjAfAhAbArALPf@r@j@`Ah@dApAfCx@~A~AfDrAlDtAbFrDpOb@rBvBrJj@`Bx@~BlAdDpClEfCrDhF~EhEnD|DvD~BjC~DzFnBfChVj_@|EbIbCvDpCfExY`d@lKbPnE~FfEbEhErCbB|@pBt@zEfAfCXpBHrB?zAK`BUhB[nAa@zAi@|As@p@]l@a@z@i@|AmAhAcAd@e@`AoArAiBdBqChBkDv@gBhBwEXs@Z{@t@sBvDaKnB{E|BmF|AsCbC{DrAkBxBiCnCqCfBwAvCmBTMd@Wv@e@dAg@z@a@hAa@^K\\M~@Y~A]zAWtAQTCzBStBElADH@nCHfAJ|@JnAR|@PdAX~Bp@dBd@~GnCd@R|GvCnInDjOlG`E|APFbDxAdCjBfF`F|A`BhCnDnElJlEdLbY`t@~Svi@vB`FrAbBbArArBpBhBjAn~@j[bAv@n@|@rGlOtEbLdDbHvC`GzBnDzCzEzBnD|BdF~@`EXfDRxDjArV^jGd@zBx@pC~@fBrBrBhN`LzRvO|U~QrNhLzSxO|WnSnOhN|I~GhDhBdFzAtBx@fBhAbDvB`CjC~BbDrDlJlJh[hP~i@vAxD`AhArJtJ`d@`b@|JhJr_Av{@bIdHtD`DpW`OhSvKfP|IvEbDbx@vo@r^vYjBhBnEjEfBnBrl@bv@fEbF~Wt\\tDxE|I|K`KhMHXjB~BdBjBnBpBzArApA`AlAx@pA|@|@f@fAj@~Ar@tAj@tAf@vA`@vA\\~Bh@bFhA`HvAbGlAjEz@|EbA~KzBtMpChE~@H@HBbDr@vE~@n@LPDt@NnB^~A\\n@NpDt@VFB@b@Hz@PjAVhCn@TFhA^PJPE`@PtAr@|AbAr@f@hA|@x@t@z@z@dAnAx@dAr@`Ah@x@f@~@v@tAr@`Bv@jBn@bB?B`@nABHV|@Nf@Rx@FRh@bCVrAZhBVdBR`BRpBPzBNzBJfC`@xJp@nRd@pM`@pK\\~Jf@jMNlEA^DjAPvBRrBR|A\\nB\\xAXpA`@xAf@|Al@`Bj@pAl@lAx@rALFl@~@rBrCtHzJ|Vt\\rBnCbo@zy@jQbUtTdYdArA|Z``@zPbUbGzIpRrV|f@nn@pVd[rL`PrTvXnF~G|Zxa@hWj]pIpKna@`h@lB~Dba@pIxHzA~o@fMlADxEbAfW~Frd@nJbE`AhGmA`S}KfFsCdNmHdAKjDW~DMtDdAtDjDlBvB~BhCnElHnCzDdBhBpOpTzJlKfJvDrtA|UjATnv@zM`pAp\\xDjAxE`AdFbAb]lg@vXpa@vApJaCvj@jAlNjF~JbdA~q@xRxLbF~C|JvDzEhBfUlMv]|R|[~RpVhOdMt`@nQrXtEhNh^na@`O`JfJvFh]fo@``@lt@tMjXlAjPYfGqEhVeDjLArMfWf~A`@|@x@fBdUhQnD`FjKvZ~BzGjGjGrOTpq@fAxCDdDDP?N?l@Bl@BzAFzAHN@N@J@H?x@Dx@DhAFfAHF?H?p@Hp@H|@H|@JtAPvAPhAPhANp@Fn@Dh@Bj@D~GA`HCjAGjAIjD@jD@\\RZPrB@pB?dC@dCBTORQJ@J?xANxAPf@Lh@Np@Rp@Rz@Zx@XdAh@dAj@j@^h@^t@j@t@l@r@l@r@n@l@n@j@n@^f@`@h@`AnA~@pAv@nAv@pAbArBbApBt@tAt@tAZf@\\h@d@j@f@j@HHHFPRPPb@\\d@\\h@`@j@`@x@^x@^n@Tn@R~@V~@VfDLfDL~DN|DPpBHpBFd@Bb@@fBHfBFfBFdBFH?zHRxKXdu@dDxRqOzM}D~MaE~c@yM`vAle@jNkNrGsGlAsBn@gD|@gVtAsK|GmP|^ce@~LsO`v@k`At`@{`@xT{Tz@y@|lAmjAdTv@jBvBnAbLF`@L^",
    "q_uqHizqyBHRJPV^b@^rBp@v@Rv@Vl@JNTbBf@j@P^?lA\\fCn@j@HfF|AjDfA\\Jd@NdAb@TH",
    "wtsqHagqyBr@^VJTDJANG\\e@RSTS",
    "qnsqHghqyBTHTBzAZbBZ|Bd@r@LnBb@PBJBpAVzAVJ@H@\\F^Hb@PZ\\R\\L^Px@VdDNzBBn@B\\B^Bb@\\~ETnDBl@TtENrARvABNn@bDTdAh@pBt@bDr@zCh@|Bz@dDjB`IdAvE`A|Dz@tDvCdMt@~Cn@hCXjA",
    "yoqqHe_myBjh@j{BdIf]raAprAx@hAzh@lr@pAdAjNfLdOtJrGvEzBxA|@l@\\TTNzA`ArBtAbDtBfBjALHpAz@n@`@pAz@hAx@n@b@JHZXf@f@jAnA~BnChCvCbAhApAzAvA~AhApAlAvArAzA`AhApAxAv@|@b@f@lApAFF|@dA~@bA|@bAj@p@bDtDlAtArEnF|L`O~IvG~QlNbCjD~BlH|@|EN|@DfC@dBDpA?d@@`AD|@Dl@Fr@Lz@Lr@Pr@Ld@Xp@Zp@T`@\\f@b@b@h@f@TJTLXLXHZFTDRDV@T@X?P@N?P?F?\\@jB?|@@n@@jA@x@?z@@\\?X?^A\\Ed@E`@If@Kl@IhASvAWx@OVETERElAUzAYHC^IdBYnASjASbASbAQ^GTE^InAU~AY|@Qv@Od@Gr@Mv@Oz@Mz@QTGXE|AYv@On@Kv@ONCd@Ij@MNCb@Md@O`@Q\\Q\\O^WpAw@f@]f@Wf@[^WTMjAu@z@g@LIl@_@n@a@t@e@ZOh@_@d@Yb@WVIREVC`@@^?h@Bn@@|@@hAB|@@j@@R?lA@fABV@P@RDRFZJPNPNXTX^PTt@fANRd@n@Xd@^n@Xj@Xl@Tp@Rl@Nj@Lp@Jt@Ht@Fv@Bv@D|@@hBBnB@rB@jA@d@@h@BZJn@Lf@L\\PZTVPRTJXJXFLBRAREVMRKRQb@k@l@u@n@}@l@s@TWNITKPAZCPBJBVNTRR\\Xl@Z~@V|@Hd@Ff@Bf@@f@Aj@Ed@Kj@Or@Mj@Sv@Mb@GXI`@EXE`@AZA`@?N?P@VBRLv@Lb@Rb@NVPPXTVLb@Lr@Th@NZHZJVHPFf@Nj@Pj@Pt@TrA^vA`@tAb@bAZHBdDdA`Bf@fBf@jA\\|@Xp@PVHzAd@f@NbAZh@Pj@P~@XlA^`AVt@V|@Xb@NZF\\L\\J\\DV@Z?d@GZK`@Sf@Un@[TM|@a@p@Yh@Yp@[j@Yr@[d@Sd@Md@EVCf@BPBF?L@fAHx@Fr@Dj@BbBLb@Dv@FR@`@B`@Dl@Dd@Bj@D`@Bj@Db@B~@HhBLx@FN@d@D~@F`CPJ@nAJT?fAHb@FbBHfAJdAHR@VBB?z@Fn@Dt@Fn@Dj@DL@bAFd@B\\A^CP?HALCNAPE\\G^GHCv@O^G`@GZE`@C`@?^@ZB^FTDPDPFZJ`@Pd@T^PVN\\NPH`@Rb@LRF\\FVFVDB?V@JBxALxAJnAHfBNnAFr@FfAHhAHl@Bd@FRBF?D@xAVbBZpE`ArBd@B?nAT~AZ|Bh@pDt@dGpApDv@t@N|@RpB`@dGrAbIxAr@LhATfDl@b@LtBj@\\JRB|@Pj@L~AZvAVh@JhB^lAVbDr@TFrAZlBjBpBrBd@`@BDZZtCbDl@l@xA~AJJXXvA|AJJz@~@tAzA\\`@rAzAbAvAZVLJNL",
    "slupHqjxxB\\Xj@^x@j@NHj@\\~A`AVPxBrADBfAt@nAx@dBdAp@d@pAx@dEnCLHLHTNZRRLXPXPfAp@b@Vj@\\|A`AZRj@^|@l@HDrAx@lAz@|@p@FB~@v@pA`AdAv@",
    "wmspHw|vxBEDKPALCT?pAAbAFhBNZ",
    "ymspH_rvxBd@B`BUdCa@n@[ZOHC",
    "ubspHcuvxBDC?Ar@Yl@a@|A_BlC_Dl@k@bAiAd@c@`AcAp@s@@Ab@]NILIVKf@Kj@AVCVAr@Id@Ez@SLGDCTORQJK@CZc@R_@b@sAT}@d@sBFWLk@NaAJg@",
    "q{qpHe}wxBBMh@cF|@cIXuCv@yGPs@\\y@t@q@",
    "mrqpHkayxBlCkAlAi@lAo@v@e@t@e@tC{@^InDu@fAW|@GP@r@BdBZxBn@`IfBlAb@fAv@",
    "k~opHceyxBd@j@TTPt@FT",
    "u{opHu`yxBoBTu@BuHl@o@BI@",
    "klppHg~xxBMqFxAI"
)
) 
```

如何获得具有 25 个 NSString 对象的普通 NSArray？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:16:40.730

您正在查看 JSON 中 polyline 字段的正确输出。数据使用 Google 的折线编码进行编码，在此处记录

[https://developers.google.com/maps/documentation/utilities/polylinealgorithm](https://developers.google.com/maps/documentation/utilities/polylinealgorithm)

网上有很多方法可以在objective-c中解析所述字符串，例如[this one](http://sapessi.com/2010/06/decode-a-gpolyline-in-objective-c/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:30:45.530

好的，我找到了使用 NSJSONSerialization 解析 json 的解决方案：

```
NSDictionary *jsonArray = [NSJSONSerialization JSONObjectWithData:dataRequest options:NSJSONReadingMutableContainers error: nil];
NSArray * items = [jsonArray valueForKeyPath:@"routes.legs.steps.polyline.points"];
items = [items objectAtIndex:0];
items = [items objectAtIndex:0]; 
```

在 items 数组中，您将获得带有编码方向的字符串

# objective-c - NSPredicate 中字符串比较的不同或不等于？

> ID：11965783
> 
> 赞同：2
> 
> 时间：2012-08-15T07:54:00.437
> 
> 标签：objective-c, ios, ipad, nspredicate

我想获取属性“内容”不是空字符串的所有对象。

我已经尝试过“不喜欢”、“！=”和“<>”，但这些都不起作用。

在所有文档中，我只找到积极的比较（例如，==，...），但没有找到消极的比较。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T08:36:39.303

`!=`实际上是正确的。但是您的问题可能出在其他地方，`content`您尝试匹配的对象的属性可能是`nil`. 因此，要么将你的谓词表述为，`content != "" && content != nil`要么，如果你使用 Core Data，将`content`属性设置为`@""`in `-awakeFromInsert`，因此它不会默认为`nil`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T08:19:40.940

这应该对使用字符串语法创建的谓词执行此操作（而不是以编程方式创建谓词：）

```
NSPredicate *pred = [NSPredicate predicateWithFormat:@"NOT content == \"\""]; 
```

您可以`NOT`用来否定任何测试（`LIKE`、`IN`等）。

# qt - 从 QNetworkAccessManager 获取远程 IP

> ID：11965784
> 
> 赞同：1
> 
> 时间：2012-08-15T07:54:00.640
> 
> 标签：qt, http, connection, ip, qnetworkaccessmanager

使用 QNetworkAccessManager 时，有什么方法可以获取 http 连接信息，例如本地 ip/远程 ip？我需要为每个 QNetworkReply/Request 对记录此类连接信息。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:53:04.610

您需要使用`QHostInfo`并从那里查询远程和本地 ips/名称。

看看[http://doc.qt.nokia.com/4.7-snapshot/qhostinfo.html#details](http://doc.qt.nokia.com/4.7-snapshot/qhostinfo.html#details)

# git - 企业中的 Git 软件？

> ID：11965787
> 
> 赞同：7
> 
> 时间：2012-08-15T07:54:23.577
> 
> 标签：git, github, gitorious, bitbucket-server, gitstack

我们正在考虑在我们的团队中使用 Git 的前景，并希望有很多其他开发团队加入我们。如果一切顺利，我可能会为每个人设置 Git。目前我正在寻找测试：

*   [GitStack](http://gitstack.com/)
*   [GitHub 企业](https://enterprise.github.com/)
*   [狡猾的](http://gitorious.org/)
*   [Atlassian 藏匿处](http://www.atlassian.com/software/stash/overview)
*   [石榴石](https://github.com/sitaramc/gitolite/)

我喜欢一些关于哪些是好的想法，如果我遗漏了一些我不应该的东西。

我不太确定我们想要和/或需要什么功能，但我们主要是 .NET 和 Java 开发人员，Active Directory 身份验证是必须的，JIRA 集成会很不错。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T08:14:02.527

还有另一种解决方案，它是免费的，很棒，我们将它用作内部存储库管理

[http://gitlabhq.com](http://gitlabhq.com)

在 GitHub 上，您可以了解如何在您的服务器上安装它：

[https://github.com/gitlabhq/gitlabhq/wiki](https://github.com/gitlabhq/gitlabhq/wiki)

对于 AD 身份验证，您必须将配置文件 config/initializers/omniauth.rb.sample 复制到 config/initializers/omniauth.rb，然后使用您的 AD 设置对其进行编辑，最后重新启动 gitlab。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T16:44:03.043

如果你使用 JIRA，你绝对应该看看 Stash。它建立在同一平台上，并与 JIRA 很好地集成。它还与现成的 Active Directory 集成。

# html - 如何裁剪元素的背景以仅显示图像的一部分？

> ID：11965789
> 
> 赞同：8
> 
> 时间：2012-08-15T07:54:47.630
> 
> 标签：html, css, background-image, css-sprites, clip

为了清楚起见，请查看以下图片。
第一个是我打算实现的。这是一个带有两个背景图像的文本输入元素，每侧一个。
第二个图像是包含我需要的图标的精灵图像。
现在我的问题是，是否可以剪切背景图像以仅显示图像的一部分？此外，是否可以在多种背景下使用它？

第一张图片：
![在此处输入图像描述](../Images/193475534bf784cc0731d008930fbd9f.png)

第二张图片：
![在此处输入图像描述](../Images/27fc44390d438c3cbf2c0f15f515b3b1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T08:01:34.350

您将不得不使用两个单独的图标图像来使其按您目前的预期工作。

使用 CSS 精灵，背景被元素的大小剪裁，有一个实验性的 CSS3 属性被调用`background-clip`，但它不能按照你想要的方式工作（它会剪裁到框的边框、填充或内容，而不是特定的方面。）

所以创建两个图标，在元素的每一侧使用一个`background-position`。

[正如您在此处看到的](http://jsfiddle.net/zcbSc/)，使用 spritesheet 它将显示整个背景图像，而不是您想要的两个图标。目前还没有办法以您想要的方式剪辑 BG 图像。（希望有一天！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T08:12:01.903

您将需要使用单独的图标，或者您需要在输入框顶部叠加 2 个附加元素（用于显示图标）。后者将让您使用精灵本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T07:59:49.570

设置你的元素（比如说 div）你的大背景图片，然后用`background-position`. 您的图像将根据您的元素大小（例如 div）进行裁剪。

在你的情况下，它会在：

```
background-position: -87 -35; 
```

和 div 大小：

```
width: 28px; height: 30px 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T07:59:56.843

`CSS3`您可以为一个元素使用多个背景图像。要显示图像中的特定部分，您需要设置其`background-position`属性。

例如：

```
background-image: url(sprites.png), url(sprites.png);
background-position: center bottom, left top; 
```

您还可以`background-postion`以像素为单位进行定义，例如：

```
background-position: -5px 10px, -35px 10px; 
```

有关更多信息，请查看此[链接](http://www.css3.info/preview/multiple-backgrounds/)

# macos - 使用 Git 作为两台 Mac 之间的 Git 服务器？

> ID：11965796
> 
> 赞同：0
> 
> 时间：2012-08-15T07:55:18.917
> 
> 标签：macos, git

如果有两台 Mac，是否有一种简单的方法可以将 Mac 设置为 Git 服务器，以便 Xcode 和从该服务器推送和拉取？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T08:01:10.520

如果两台 Mac 之间有网络连接（不必是直接的，只要它们可以相互访问），您可以在其中一台（或两者）上使用 git+ssh 来访问另一台（或“服务器”回购）。

来自 Git 书籍：[4.4 服务器上的 Git - 设置服务器](http://git-scm.com/book/en/Git-on-the-Server-Setting-Up-the-Server)。

OSX 应该已经有一个正在运行的 SSHd。为了安全起见，明智的做法是在两台 Mac 的用户可以访问的“服务器”上创建一个用户。

# actionscript-3 - AS3 将回调函数传递给类构造函数以与 addEventListener 一起使用

> ID：11965800
> 
> 赞同：2
> 
> 时间：2012-08-15T07:55:56.760
> 
> 标签：actionscript-3, callback, addeventlistener

这几天一直困扰着我。我写了一个多功能的 messageBox 类，它工作得很好，但是我坚持了一件事。不过，首先，这里有一些代码：

在文档类中我有：

```
var tMsg:Msg = new Msg("Test Message", "This is a test Message", Msg.INPUT);

tMsg.addEventListener('Answered', qa, false, 0, true);

function qa(e:Event):void{
    trace(e.target.label,e.target.result);
    tLabel.label = e.target.result;
} 
```

单击“取消”或“确定”按钮时，会设置结果属性并调度“已回答”事件。由于始终需要添加此事件侦听器，我认为将其包含在类构造函数中会更好；但是，Msg 类的每个实例都需要自己的回调，具体取决于结果的用途。此外，回调函数应该在文档类中声明。

我认为这可以通过简单地将函数传递给 Msg 类构造函数来完成，然后使用该引用动态生成 addEventListener。例如：

```
/// in document class
var tMsg:Msg = new Msg("Test Message", "This is a test Message", Msg.INPUT, qa);

function qa(e:Event):void{
    trace(e.target.label,e.target.result);
    tLabel.label = e.target.result;
}

/// in Msg class
public function Msg(txt:String='', msg:String='', type:String=ALERT, callback:Object=null) {
    _callback = callback;
    addEventListener(Event.ADDED, setup, false, 0, true);
}
private function setup(e:Event){
    stage.addEventListener('Answered', _callback, false, 0, true);
} 
```

这行不通。我不知道是不是因为我正在尝试存储回调引用（应该将事件侦听器添加到舞台对象）还是什么？让它工作的好处是我不必每次创建新消息时都添加事件侦听器，只需传递关联的函数即可。

提前感谢您为我提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T08:16:06.300

您应该将事件侦听器添加到调度事件的对象。如果该对象不在显示列表中或事件没有冒泡，则舞台将不会收到该事件。

# opencv - 获取opencv中knn中所有样本的距离

> ID：11965803
> 
> 赞同：0
> 
> 时间：2012-08-15T07:56:01.997
> 
> 标签：opencv, distance, sample, knn

据我所知，knn 找到所有样本的最小距离。这意味着它是最近的样本。但是如果我想要我的新数据与所有样本的距离怎么办？例如，如何获得与我的新数据最近的 3 或 4 个样本？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T08:36:18.607

K 最近邻？这意味着您可以找到 K 个最近的样本。您应该仔细阅读文档。例子：

```
 kdtree.knnSearch(((cv::Mat)objects_coordinates[i_pts]).t(),
        indices, dists, num_of_neighbours, cv::flann::SearchParams(32)); 
```

# python - 我可以手动 ssh2 到远程主机，但 paramiko 不能，为什么？

> ID：11965806
> 
> 赞同：1
> 
> 时间：2012-08-15T07:56:15.293
> 
> 标签：python, linux, authentication, ssh, paramiko

我想通过公钥身份验证使用 paramiko ssh2 到远程主机，我像以下步骤一样设置密钥：

在本地：

```
 Local> ssh-keygen
    Generating 1024-bit dsa key pair
    9 o.oOo..oOo.o
    Key generated.
    Passphrase :
    Again :
    Private key saved to /home/local/.ssh2/id_dsa_1024_a
    Public key saved to /home/local/.ssh2/id_dsa_1024_a.pub

    Local> cd ~/.ssh2
    Local> echo "IdKey id_dsa_1024_a" > identification
    Local> scp id_dsa_1024.pub remote@remote-host:~/.ssh2/local.pub 
```

在远程：

```
 Remote> ssh-keygen
    ...omit...
    Remote> cd ~/.ssh2
    Remote> echo "Key local.pub" > authorization 
```

完成上述操作后，我就可以使用`ssh remote@remote-host`登录了。

但是，我未能使用 python 的 paramiko 模块登录远程主机：

```
 conn = paramiko.SSHClient()
    conn.set_missing_host_key_policy(paramiko.AutoAddPolicy())
    conn.connect(remote-host, 22, username=remote,password='') 
```

总是错误：身份验证失败。

我很混乱。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T08:01:30.443

您是否尝试`key_filename`在连接时设置选项？我不确定 paramiko 是否会`~/.ssh`像 SSH CLI 客户端那样自动查看您的私钥。

[paramiko 文档](http://docs.paramiko.org/en/1.17/api/client.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T15:58:58.027

```
import os
import paramiko
ssh = paramiko.SSHClient()
ssh.load_host_keys(os.path.abspath('.ssh/known_hosts'))
ssh.connect(some_host_in_known_hosts) 
```

这今天早上使用 python 2.7 很好地为我解决了同样的问题

# proxy - 通过 http 代理的 Rebar 依赖项

> ID：11965808
> 
> 赞同：1
> 
> 时间：2012-08-15T07:56:45.937
> 
> 标签：proxy, erlang, rebar

我有一个包含此 deps 条目的 rebar.config：

`{cowboy, ".*", {git, "http://github.com/extend/cowboy.git", {branch, "master"}}}`

当我运行“rebar compile”时，我得到了这个：

`Dependency not available: cowboy-.* ({git, "http://github.com/extend/cowboy.git", {branch,"master"}})`

我相信这是因为我在防火墙后面，而我访问 Internet 的唯一方法是通过 http 代理。有没有办法设置钢筋以使用 http 代理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T07:35:36.183

当 deps 元组包含时，rebar 似乎使用 git 来获取依赖项`{git, "http://..."}`。所以我通过添加这个来解决这个问题`.gitconfig`：

```
[http]
    proxy = http://myproxy-url.com:8080 
```

# javascript - 实现 HTML JavaScript 中的标签

> ID：11965809
> 
> 赞同：-5
> 
> 时间：2012-08-15T07:57:00.857
> 
> 标签：javascript, jquery, html, codeigniter

伙计们，我想执行此任务

```
<form action="Delete" method="Post">      

</form> 
```

但是在 javascript 函数中我该怎么做呢？其中 Delete 是我在 CodeIgniter 中的控制器名称

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:09:57.163

基于有限信息的最佳猜测 - 如果您希望根据表单帖子定位特定的代码服务器端，您需要编写一些东西来询问服务器的帖子并确定要采取的行动。

例如，给表单一个隐藏字段，称为 action say & 有一个值 delete。然后在服务器上检查帖子值的值并使用您需要的其他表单值调用您的删除函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:01:15.993

你在找那个吗？

```
<script type="text/javascript">
  var html = '<form action="Delete" method="Post">...</form>';
  document.write(html);
</script> 
```

# c++ - C++应用负载均衡的理解

> ID：11965810
> 
> 赞同：0
> 
> 时间：2012-08-15T07:57:05.013
> 
> 标签：c++, performance, scalability, load-balancing

说，我有 1 个 CPU 密集型 C++ 控制台应用程序（游戏服务器）。我是否需要专门对其进行编程才能在多台机器上扩展 1 个应用程序，或者是否有特殊软件可以使 2-3 个服务器充当单个服务器？

更新：我的登录服务器与游戏服务器分开。服务器有一个所有玩家聚会的地方，但没有这样的cpu工作。最多的游戏线程，玩家创建一个游戏 - 1个线程。

据我了解，我需要对应用程序进行编程才能在另一台服务器机器上创建游戏实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T08:09:52.117

您需要在考虑负载平衡的情况下对其进行编程。

如果您已经运行它，请尝试使尽可能多的东西可线程化，以使其能够在多 CPU/多核机器上使用额外的内核/额外的 CPU。

然后看看将元游戏信息移动到单独的机器上来处理登录信息等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T08:11:06.180

您必须以这样一种方式对服务器进行编程，使其知道可能存在自身的其他实例 - 例如，通过仅将部分任务作为其责任，其他实例将知道其他人正在这样做而不是采取它两次。

对于负载平衡 - 有一些软件可以自动进行负载平衡，但负载平衡只有在实际服务器支持的情况下才能正常工作。

# html - html css * {...} : 不能改变字体大小

> ID：11965813
> 
> 赞同：1
> 
> 时间：2012-08-15T07:57:11.943
> 
> 标签：html, css, class

好像我被卡住了。为什么下面的代码显示的是 12px 的消息，而不是 50px 的消息？**如果我不允许更改 * 属性，** class1 是不是有较高的如何解决它？即使 !important 也无济于事。

```
<html>
    <head>
        <style type="text/css">
            *
            {
                font-size : 12px
            }

            .class1
            {
                font-size : 50px;
            }
        </style>
    </head>
    <body>
        <div class="class1">
            <span>why it is not 50px font size?</span>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T07:58:14.187

那是因为 * 也会`<span>`选择`<div>`.

所以 * 在这种情况下更具体，因此具有优先权。

```
.class1 span
{
    font-size : 50px;
} 
```

以上将工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T08:45:51.987

或者您可以使用 !important

```
.class1 {font-size : 50px !important;} 
```

一个工作示例：

[http://jsfiddle.net/gWQeZ/](http://jsfiddle.net/gWQeZ/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T08:09:35.063

`*`将包括`<span>`, 所以你可以给 span 一个 id 或一个类并将 css 规则应用于它。或者这样做：

```
.class1 span {font-size:50px;} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T07:59:35.473

这应该工作

```
div.class1 span 
{
    font-size : 50px;
} 
```

`*`将选择 div 内的跨度。删除`<span>`作为子元素的任何一个都可以。或明确定位。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T08:12:13.020

选择器`*`是一个包罗万象的东西（意味着它选择了*所有东西*。）

因此，要让您`span`被选中，您需要一个更具体的选择器：

```
.class1 span 
```

应该可以工作，但您也可以选择更具体：

```
div.class1 span 
```

或者您可以将一个类添加到跨度本身并使用它选择它

```
span.class2 
```

:)

# asp.net - 64 位 Web 应用程序出现错误

> ID：11965816
> 
> 赞同：0
> 
> 时间：2012-08-15T07:57:19.087
> 
> 标签：asp.net, .net, windows-7-x64

当我将平台从Web 应用程序更改`AnyCpu`为时，我在运行时遇到异常。`x64`我在本地运行它`windows 7 x-64`

> [BadImageFormatException：无法加载文件或程序集或其依赖项之一。试图加载格式不正确的程序。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T09:42:53.600

除了检查您是否有任何 32 位组件外，您还应该检查运行您的应用程序的 ApplicationPool 是否设置为以 32 位运行。从 IIS 管理器 > 应用程序池 > 您的应用程序池 > 高级设置 > 启用 32 位应用程序。如果要在 64 位模式下运行，则应将其设置为 False，如果要在 32 位模式下运行，则应设置为 True。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T08:30:49.470

听起来您有一个 32 位的组件/DLL，而您正试图强制 Web 应用程序仅作为 64 位应用程序运行。

您还可以考虑查看： [阅读](https://stackoverflow.com/questions/9419403/could-not-load-file-or-assembly-exception)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T08:30:21.023

如果您将其保留为 anycpu 并且它在 64 位系统上编译，它应该在 32 位和 64 位上编译和运行。不要尝试在编译时指定架构，除非您希望它只是 32 位。

确保您已安装 64 位框架。

# c# - 控制表单私有？

> ID：11965817
> 
> 赞同：-2
> 
> 时间：2012-08-15T07:57:19.697
> 
> 标签：c#, .net, encapsulation, private-members

我可以访问表单上的控制变量吗？例如：

```
MyForm form = new MyForm();
form.button1.Visible = True;   // why doesn't this work? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T08:01:45.033

您需要通过属性窗口设置`public`或`internal`修改控件或打开 Designer.cs 并设置访问修饰符。`Modifier`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T08:11:24.207

```
bool SearchAllChildren = true;
(this.Controls.Find("button1", SearchAllChildren )[0] as Button).Visible = true; 
```

您可以设置`SearchAllChildren`为`false`仅返回表单上的控件而不是嵌套控件（其他控件中的控件）

# java - 如何在命令提示符下运行 Java 程序

> ID：11965818
> 
> 赞同：25
> 
> 时间：2012-08-15T07:57:23.870
> 
> 标签：java, compilation, command-line-arguments, command-prompt

我创建了一个 Java 项目来调用 Web 服务。它有一个主 java 文件和另一个类文件。我已经为 HTTP 客户端使用了一些 jar 文件。
在 Eclipse 中它运行良好。我需要通过传递一些参数在命令提示符下运行 Java 程序。
在命令提示符中，我转到包含主 java 和子类 java 文件的 src 文件夹并给出以下命令

```
javac mainjava.java 
```

我收到以下错误

> **mainjava.java:14：找不到符号
> 符号：类子类**

这里的 SubClass 是我另一个用来调用 web 服务的 java 类文件。

如何通过传递参数来运行程序？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-15T08:04:28.637

`javac`是Java编译器。`java`是 JVM 和你用来执行 Java 程序的东西。您不执行`.java`文件，它们只是源文件。大概有`.jar`某个地方（或包含`.class`文件的目录）是在 Eclipse 中构建它的产物：

```
java/src/com/mypackage/Main.java
java/classes/com/mypackage/Main.class
java/lib/mypackage.jar

```

从目录`java`执行：

> java -cp lib/mypackage.jar 主要 arg1 arg2

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-15T08:02:26.223

一个非常通用的命令提示符如何用于 java 是

```
javac mainjava.java
java mainjava 
```

你会经常看到人们在做

```
javac *.java
java mainjava 
```

至于由于类路径中缺少路径而可能发生的子类问题，我相信使用 -c 标志来设置它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T08:00:11.753

您可以使用`javac *.java`命令来编译所有 Java 源代码。此外，您应该了解一些关于类路径的知识，因为您似乎应该为成功编译设置适当的类路径（因为您的 IDE 使用一些库来构建 WebService 客户端）。我也可以建议你检查一下你的 IDE 用来构建你的项目的命令。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-15T08:15:53.863

您需要做的就是：

*   如果有的话，使用类路径构建 mainjava 类（可选）

    javac *.java [ -cp "wb.jar;"]

*   创建 Manifest.txt 文件，内容为：

    主类：mainjava

*   打包mainjava类的jar文件

    jar cfm mainjava.jar Manifest.txt *.class

然后，您可以使用类路径（可选）从 cmd 运行此 .jar 文件并为其添加参数。

```
java [-cp "wb.jar;"] mainjava arg0 arg1 
```

HTH。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T08:02:30.510

javac 只编译代码。您需要使用 java 命令来运行代码。 该错误是因为您的类路径在您尝试编译它时不包含类**子类i。**您需要在 javac 命令中使用 -cp 变量添加它们

`java -cp classpath-entries mainjava arg1 arg2` 应该使用 2 个参数运行您的代码

# javascript - 如何对选定的复选框行值求和？

> ID：11965819
> 
> 赞同：0
> 
> 时间：2012-08-15T07:57:25.617
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3

我在 asp.net mvc 中有一张桌子。在这张表中，我每行都有一个复选框。当我选中一个复选框时，我想在该行中找到工资值并与选中的其他行工资相加。我想通过 Jquery 或 java script 来做这个总和。

```
 @foreach (var item in Model)
 {
        <tr id="rowid">
            <td>
                <input type="checkbox" name="chk-@intCount" id="chk-@intCount" class="chkclass" />
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.TechnicalNo)
            </td>
            <td class="sum" id="wagein">
                @Html.DisplayFor(modelItem => item.Wage)
            </td>
            <td class="sum" id="time">
                @Html.DisplayFor(modelItem => item.Time)
            </td>
        </tr>
 } 
```

这是我在 asp.net mvc 中的代码。我现在如何对工资和时间的检查值求和？

编辑 ：

我的 jQuery 代码：

```
<script src="/Scripts/jquery-1.4.4.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function () {
$('.chkclass').click(function() {
        var sum = 0;
        $('.chkclass:checked').each(function() {
            sum += parseFloat($(this).closest('tr').find('.wagein').text());    
        });
        $('#sum').html(sum);
    });​
    });
</script> 
```

我的html代码：

```
<tr>
    <td>
         <input type="checkbox" name="chk-1" id="chk-1" class="chkclass" />
    </td>
    <td class="sum wagein">
        10
    </td>
</tr>
<tr>
    <td>
        <input type="checkbox" name="chk-2" id="chk-2" class="chkclass" />
    </td>
    <td class="sum wagein">
        10
    </td>
</tr> 
```

任何想法 ？！问题是什么 ？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T08:06:21.657

首先修复您的标记，因为它被严重破坏。请记住，整个 HTML 文档中的 id 必须是唯一的：

```
@foreach (var item in Model)
{
    <tr>
        <td>
            <input type="checkbox" name="chk-@intCount" id="chk-@intCount" class="chkclass" />
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.TechnicalNo)
        </td>
        <td class="sum wagein">
            @Html.DisplayFor(modelItem => item.Wage)
        </td>
        <td class="sum">
            @Html.DisplayFor(modelItem => item.Time)
        </td>
    </tr>
} 
```

然后您可以订阅`.click()`复选框的事件并为所有工资累积总和：

```
$(function() {
    $('.chkclass').click(function() {
        var sum = 0;
        $('.chkclass:checked').each(function() {
            sum += parseFloat($(this).closest('tr').find('.wagein').text());
        });
        alert(sum);
    });
​}); 
```

这是一个现场演示，可以看到它的实际效果：http: [//jsfiddle.net/pbkjr/](http://jsfiddle.net/pbkjr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T08:52:26.727

好的，从您显示的标记开始，用`<table></table>`标签正确包装，下面的 div 显示总数：

```
<table>
<tr>
    <td>
         <input type="checkbox" name="chk-1" id="chk-1" class="chkclass" />
    </td>
    <td class="sum wagein">
        10
    </td>
</tr>
<tr>
    <td>
        <input type="checkbox" name="chk-2" id="chk-2" class="chkclass" />
    </td>
    <td class="sum wagein">
        10
    </td>
</tr>
</table>
<div id="total"></div> 
```

当单击任何复选框时，以下 jquery（@Darin 编写）将汇总所有选中的行：

```
$('.chkclass').click(function() {
        var sum = 0;
        $('.chkclass:checked').each(function() {
            sum += parseFloat($(this).closest('tr').find('.wagein').text());    
        });
        $('#total').html(sum);
    }); 
```

这与 Darin 的原作非常接近，只是我更改了最后一行以将总数输出到 id 的 div 中`total`。这似乎比将总和写入每一行更有可能！

这可以在这个实时示例中看到：http: [//jsfiddle.net/ADE3a/](http://jsfiddle.net/ADE3a/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-16T20:19:26.243

```
jQuery(document).ready(function ($) {
    var sum = 0;
    $('input[type=checkbox]').click(function () {
        sum = 0;
        $('input[type=checkbox]:checked').each(function () {
            sum += parseFloat($(this).closest('div').find('.payment').val());
        });
        $('#total').val(sum);
    });
});
```

达林·季米特洛夫

万分感谢。我遇到了一个问题，我想为选中的复选框添加隐藏字段并将复选框值（true 或 false）传递给控制器​​。

@Html.CheckBoxFor 正在为每个复选框在其旁边创建一个隐藏字段

我正在使用 $(this).next().val() 这给了我 NAN 问题。因为它正在获取隐藏字段的值。

感谢您的帖子，我能够获得下一个 div 隐藏字段值

我做了类似下面的事情

# python - Python中的模式匹配

> ID：11965821
> 
> 赞同：-1
> 
> 时间：2012-08-15T07:57:48.813
> 
> 标签：python, list, machine-learning, pattern-matching

这个问题可能更接近图像处理中的模式匹配。

有没有办法获得成本函数值，应用于不同的列表，这将返回列表间的接近度？例如，

```
a = [4, 7, 9]
b = [5, 8, 10]
c = [2, 3] 
```

现在的代价函数值，可能是一个 2 元组，(a, b) 应该大于 (a, c) 和 (b, c)。这可能是一项巨大的计算任务，因为可能有更多数量的列表，并且所有排列都会破坏问题的复杂性。所以只有 2 元组的集合也可以工作。

编辑：列表名称表示动作的类型，其中的元素是相应动作发生的时间。我想做的是想出一组具有相似发生模式的动作。由于两个动作不能同时发生，它是列表内和列表间距离的组合。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:56:49.403

鉴于您对迈克尔的澄清给出的答案，您可能应该查找“动态时间扭曲”。

我没有使用[http://mlpy.sourceforge.net/](http://mlpy.sourceforge.net/)但它的简介说它提供 DTW。（可能是敲碎坚果的锤子；取决于您的用例。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:37:29.903

你在问一个非常困难的问题。在不改变尺寸的情况下，您已经可以使用多种距离度量（[欧几里得](http://en.wikipedia.org/wiki/Euclidean_distance)、[曼哈顿](http://en.wikipedia.org/wiki/Manhattan_distance)等，请查看“另请参阅”部分了解更多信息）。您需要的取决于您认为衡量接近度的好方法是针对这些列表所代表的内容。

如果不知道你想用这些列表做什么，没有人可以定义一个好的答案是什么，更不用说如何有效地计算它了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T08:25:45.070

要比较两个字符串或列表，您可以使用[Levenshtein 距离（](http://en.wikipedia.org/wiki/Levenshtein_distance)[此处](http://code.activestate.com/recipes/576874-levenshtein-distance/)的Python 实现）：

```
def levenshtein(s1, s2):
    l1 = len(s1)
    l2 = len(s2)
    matrix = [range(l1 + 1)] * (l2 + 1)
    for zz in range(l2 + 1):
        matrix[zz] = range(zz,zz + l1 + 1)
    for zz in range(0,l2):
        for sz in range(0,l1):
            if s1[sz] == s2[zz]:
                matrix[zz+1][sz+1] = min(matrix[zz+1][sz] + 1, 
                                         matrix[zz][sz+1] + 1, 
                                         matrix[zz][sz])
            else:
                matrix[zz+1][sz+1] = min(matrix[zz+1][sz] + 1, 
                                         matrix[zz][sz+1] + 1, 
                                         matrix[zz][sz] + 1)
    return matrix[l2][l1] 
```

在您的清单上使用它：

```
>>> a = [4, 7, 9]
>>> b = [5, 8, 10]
>>> c = [2, 3]
>>> levenshtein(a,b)
3
>>> levenshtein(b,c)
3
>>> levenshtein(a,c)
3 
```

**编辑**：在评论中添加解释后，您可以使用`set`s 而不是列表。由于集合中的每个元素都是唯一的，因此再次添加现有元素是无操作的。您可以使用集合的`isdisjoint`方法来检查两个集合是否不包含相同的元素，或者使用该`intersection`方法来查看它们有哪些共同的元素：

```
In [1]: a = {1,3,5}

In [2]: a.add(3)

In [3]: a
Out[3]: set([1, 3, 5])

In [4]: a.add(4)

In [5]: a
Out[5]: set([1, 3, 4, 5])

In [6]: b = {2,3,7}
In [7]: a.isdisjoint(b)
Out[7]: False

In [8]: a.intersection(b)
Out[8]: set([3]) 
```

注意：这种创建集合的语法至少需要 Python 2.7。

# solr - 在 solr 中使用特定字体提升页面

> ID：11965823
> 
> 赞同：1
> 
> 时间：2012-08-15T07:57:57.573
> 
> 标签：solr, lucene, edismax, dismax

我用 Apache Nutch 抓取了一个网站并将其索引到 Apache Solr。我如何提升以特定字体（如 h2 html 标签或...）存在的查询词的文档？例如我的查询是书，有两页包含书。第一页书在 h1 html 标记中，第二页书在 h2 html 标记中。我希望第二页出现在较高的结果中（有更大的提升）。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:27:08.783

我认为 PayLoads（https://issues.apache.org/jira/browse/LUCENE-755）对您的情况会有所帮助（对某个词的某些出现进行评分高于其他词）。

查看[http://edwarddrapkin.com/2011/04/14/an-introduction-to-lucene-payloads/](http://edwarddrapkin.com/2011/04/14/an-introduction-to-lucene-payloads/)了解详细说明。

# android - Android：启动后立即绑定到服务

> ID：11965828
> 
> 赞同：0
> 
> 时间：2012-08-15T07:58:19.013
> 
> 标签：android, service, android-service

我想制作一个录音机应用程序，即使应用程序在后台也可以录音。所以我实现了一个服务。我需要启动它，并在它启动后立即绑定到它。因为我怀疑 startService 和 bindService 是异步调用。而且我经历过，当我一个接一个地进行调用时，有时会调用 bindService ，而该服务尚未正确启动。我如何确保 bindService 仅在服务启动时运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:05:48.120

我使用以下代码段来启动并绑定到服务：

```
Intent playerIntent = new Intent(activity, PlayerService.class);
activity.startService(playerIntent);
activity.bindService(playerIntent, mConnection, Context.BIND_AUTO_CREATE); 
```

`mConnection`是一个[ServiceConnection](http://developer.android.com/reference/android/content/ServiceConnection.html)`onServiceConnected`实例，它在服务启动和绑定时接收回调。每当我与服务交互时，我都会询问`ServiceConnection`服务是否已绑定。

# html - 当我有的时候没有 userData 行为？

> ID：11965829
> 
> 赞同：1
> 
> 时间：2012-08-15T07:58:32.370
> 
> 标签：html, internet-explorer-9, local-storage, user-data

我想在 IE9 中使用 HTML5 localStorage，但它不支持本地文件系统（或 file://）所以我回退到使用 userData 行为。但我无法让它工作。

经过所有的测试，我发现如果我删除`<!DOCTYPE html>`html 开头的 ，一切正常！

有人可以告诉我为什么吗？如果`<!DOCTYPE html>`是 HTML5 文件的必需品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:37:39.003

HTML5 还不是官方标准。如果您将文档类型设置为给定标准，但使用不属于该标准的命令，或者您使用浏览器不知道的文档类型，浏览器可能不会解释这些命令。

也许 W3C-validator [http://validator.w3.org/](http://validator.w3.org/)可以帮助你

# jquery - 选中复选框时，填充 div jQuery 中的项目列表

> ID：11965835
> 
> 赞同：0
> 
> 时间：2012-08-15T07:59:02.633
> 
> 标签：jquery, list, checkbox

我有 2 个带有复选框的单独 div，当我单击一个 div 中的复选框时，我希望能够在该 div 中检查所有项目，然后将 div 逗号填充到另一个 div 中，对于其他分区

我有点让它工作，但进入一个文本框，我想改变它，但不确定如何，它已经完成了，只需要 tweeking。这是我到目前为止所获得的链接：

[http://jsfiddle.net/uJcB7/162/](http://jsfiddle.net/uJcB7/162/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:09:57.677

将标签从`textarea`s 更改为s 并使用而不是`div`设置内容。见[http://jsfiddle.net/uJcB7/163/](http://jsfiddle.net/uJcB7/163/)`.text()``.val()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:10:18.213

你有什么问题？你的代码工作得很好......我注意到你所有的复选框都有相同的值，这就是为什么它总是 print `Comfort Access`，但如果你设置正确的值就可以了。

隐式 Array 到 String 的转换会产生您想要的确切输出，但如果您想要更明确的输出，请使用`allVals.join(',')`.

# php - 仅限数字的预赛

> ID：11965841
> 
> 赞同：0
> 
> 时间：2012-08-15T07:59:17.790
> 
> 标签：php, regex, preg-match

我正在尝试使用 preg_match 仅提取数字。我已经尝试了以下代码，但它不起作用。任何想法如何只获得号码？

```
preg_match_all('/^[0-9]+$/i', '<userinfo>Jsome text here 16586 more text here.</userinfo>', $result); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:00:54.063

您的正则表达式不应包含`^`and`$`符号，因为它们表示字符串的开头和结尾，字符串中间不存在。

把它们拿出来，正则表达式应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:02:26.480

该符号`^`指定行的开始和`$`- 行的结束。所以你的 RegExp 完全错误。你应该写

```
preg_match_all('/\d+/', '<userinfo>Jsome text here 16586 more text here.</userinfo>', $result); 
```

此外，您不需要指定`i`修饰符，这意味着使用忽略大小写模式进行搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T08:03:08.013

你已经在你的正则表达式中 使用了`^`和。表示*匹配字符串的开头，*表示匹配*字符串的结尾*。因此，您编写了一个正则表达式来匹配仅包含数字的字符串；即您的正则表达式表示*字符串的开头，*然后是*数字*，然后*是字符串的结尾*。删除这些字符，您将能够匹配一个数字。`$``^`*`$`*

 **** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T08:03:34.627

你有没有尝试过？

```
preg_match_all('[0-9]+', '<userinfo>Jsome text here 16586 more text here.</userinfo>', $result); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T08:27:32.537

这是您应该使用的正则表达式：

```
/<userinfo>.*?(\d+).*?<\/userinfo>/ 
```

这将匹配

```
<userinfo>Jsome text here 16586 more text here.</userinfo> 
```

返回数组的第二个元素 ( `array[1]`) 将具有您需要的数字。(16586)***

# sql - 交叉表/交叉查询

> ID：11965847
> 
> 赞同：0
> 
> 时间：2012-08-15T07:59:44.520
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

给定数据看起来像

```
PLI_ID   OWN_ID   DCSF_ID   SCH_NAME          PREMIUM1 PREMIUM2  DESCRIPTION  
901      2        1000     Dfe-School 1        86.40     7.20    Heads, Deps
902      2        1000     Dfe-School 2        403.30    8.40    Relief Bursar
903      2        1000     Dfe-School 3        327.00    8.40    £10.00 
904      2        1000     Dfe-School 4        381.50    8.40    £11.00 
905      2        1000     Dfe-School 5        152.60    8.40    Teaching staff 
```

预期数据看起来像

```
School          £10.00  £11.00  Heads, Deps  Relief Bursar  Teaching staff  Total
Dfe-School 1                            
Dfe-School 2                            
Dfe-School 3                            
Dfe-School 4                            

Total                                                                  [Pre-Total] 
```

我不确定是否按照建议编写 Cross Tab 或 Cross Over 查询。如果需要更多解释，请告诉我。

我的查询使用了大约 6 个表，它看起来像这样：

```
选择 PolicyLine.PLI_POS_Id、Policy.POL_OWN_Id、Policy.POL_DCSF、School.SCH_Name、PolicyLine.PLI_Premium、CoverPremium.CPR_Premium、StaffCategory.SCA_Description FROM
学校
在 School.SCH_OWN_Id = Policy.POL_OWN_Id AND School.SCH_DCSF = Policy.POL_DCSF 上的内部加入政策
内部加入 PolicyLine 上 Policy.POL_Id = PolicyLine.PLI_POL_Id
内部连接 ​​CoverOption ON PolicyLine.PLI_COP_Id = CoverOption.COP_Id
内部加入 CoverPremium ON CoverOption.COP_Id = CoverPremium.CPR_COP_Id AND Policy.POL_OWN_Id = CoverPremium.CPR_OWN_Id
右外连接 StaffCategory ON CoverOption.COP_SCA_Id = StaffCategory.SCA_

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:15:55.847

根据您现有的查询，您将使用如下内容：

```
SELECT School.SCH_Name school,
  [£10.00], [£11.00], 
  [Heads, Deps], [Relief Bursar], [Teaching staff]
FROM
(
  SELECT PolicyLine.PLI_POS_Id, 
    Policy.POL_OWN_Id, 
    Policy.POL_DCSF, 
    School.SCH_Name, 
    PolicyLine.PLI_Premium, 
    CoverPremium.CPR_Premium, 
    StaffCategory.SCA_Description 
  FROM School 
  INNER JOIN Policy 
    ON School.SCH_OWN_Id = Policy.POL_OWN_Id 
    AND School.SCH_DCSF = Policy.POL_DCSF 
  INNER JOIN PolicyLine 
    ON Policy.POL_Id = PolicyLine.PLI_POL_Id 
  INNER JOIN CoverOption 
    ON PolicyLine.PLI_COP_Id = CoverOption.COP_Id 
  INNER JOIN  CoverPremium 
    ON CoverOption.COP_Id = CoverPremium.CPR_COP_Id 
    AND Policy.POL_OWN_Id = CoverPremium.CPR_OWN_Id 
  RIGHT OUTER JOIN StaffCategory 
    ON CoverOption.COP_SCA_Id = StaffCategory.SCA_
) x
PIVOT
(
  sum(PLI_Premium)
  for SCA_Description in([£10.00], [£11.00], 
                     [Heads, Deps], [Relief Bursar], [Teaching staff])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/b1374/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:27:16.133

您可能想要一个`PIVOT`查询，但是从您的示例中很难说出它应该是什么样子。

```
SELECT *
FROM yourtable 
PIVOT 
(SUM(Premium) FOR sch_name in ([£10.00],[£11.00],[Heads, Deps],[Relief Bursar],[Teaching staff])) 
```

# java - 我怎样才能一一看到每一行？

> ID：11965858
> 
> 赞同：-1
> 
> 时间：2012-08-15T08:00:46.463
> 
> 标签：java, jtextarea

> **可能重复：**
> [如何使用 swingworker 类将文本附加到 textarea？](https://stackoverflow.com/questions/11982395/how-i-append-text-to-textarea-with-using-swingworker-class)

我在 for 循环中附加了我的 jtextarea 多行。当我添加行时，我在文本上看不到任何行，但是当 for 循环完成时，所有行都显示出来了。我怎样才能一一看到每一行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T08:02:34.283

不要在[Event Dispatching Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)中执行你的进程，它会阻止重绘更新的发生。

您应该使用[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html) API

另外，看看

*   [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)

让我猜猜你在做什么

```
while (doSomeWork) {
   // do some processing
   textArea.append(someText);
} 
```

或者可能是一个`for`循环

而你，有些期待 UI 神奇地更新？

Unfourtly，尽管我很喜欢它那样工作，但它不是那样工作的。

为了更新屏幕，您必须允许事件调度线程继续运行，以便它可以处理重绘请求（以及一堆其他重要的事情），您需要将处理负载转移到另一个线程。

不，没有其他方法，最简单的方法是使用 SwingWorker

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:29:30.547

我不确定，但在你的 for 循环中使用它： jTextArea.updateUI();

# .htaccess - 限制与 G-WAN 的图像热链接

> ID：11965862
> 
> 赞同：0
> 
> 时间：2012-08-15T08:01:15.327
> 
> 标签：.htaccess, hotlinking, g-wan

我想提供静态画廊，我想知道 G-WAN 是否可以限制热链接到指定文件？

限制图像热链接会很好，但我真正想知道是否有可能禁止热链接图像但允许名称以'_thumb'（缩略图）结尾的热链接图像？

```
if image_name_wo_ext end with '_thumb':
    allow image hot-linking
else:
    disallow image hot-linking 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T13:32:03.397

以下是如何进行：

如果要将检查限制为 *.gif 或 *.png 文件，可以使用 G-WAN`"connection handler"`或 MIME来完成：`"content-type handler"`

```
 http_t *http = (http_t*)get_env(argv, HTTP_HEADERS);

 static char my_site[] = "www.my_site.com";
 if(strcmp(my_site, http->h_referer)) // not my site
 {
    char *request  = (char*)get_env(argv, REQUEST);

    if(strstr(request, "_thumb"))
       return 0; // 0: Close the client connection
 }

 return 255; // continue normally 
```

或者，您可以重定向到另一个页面或图像，而不仅仅是关闭连接：

```
 char szURI[] = "http://another-place.org";
    xbuf_t *reply = get_reply(argv);
    xbuf_xcat(reply,
              "<html><head><title>Redirect</title></head>"
              "<body>Click <a href=\"%s\">here</a>.</body></html>",
                    szURI);

    // set the HTTP reply code accordingly
    int *pHTTP_status = (int*)get_env(argv, HTTP_CODE);
    if(pHTTP_status)
       *pHTTP_status = 301; // 301:'moved permanently'

    // 2: Send a server reply based on a reply buffer/HTTP status code
    return 2; 
```

# jakarta-ee - 是否有与 Tomcat 的 GlassFish“备用文档根”等效的功能？

> ID：11965868
> 
> 赞同：3
> 
> 时间：2012-08-15T08:01:38.047
> 
> 标签：jakarta-ee, tomcat, servlets, download

由于不建议将上传的文件存储在 Java EE Web 应用程序的容器中，因此我将它们存储在 webroot 之外的本地目录中。

现在我需要将它们提供给网络用户。[使用 GlassFish，我知道如何使用Alternate Document Roots](http://docs.oracle.com/cd/E19798-01/821-1752/geqpl/index.html)轻松做到这一点。但是我现在正在使用Tomcat，我找不到简单的方法。此服务器上是否有类似的功能可用？还是我真的必须创建一个[FileServlet](http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html)才能完成工作？如果是这样，当很多用户访问这些外部文件时，我会遇到性能问题吗？

编辑：我读到[这个答案](https://stackoverflow.com/a/2663250/401881)说其他服务器似乎有类似的系统，但我找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:21:59.680

对于 Tomcat 7，[别名属性](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Standard_Implementation)可能会有所帮助。

# uitableview - 将 cocos2d 元素添加到 UITableViewCell？

> ID：11965880
> 
> 赞同：0
> 
> 时间：2012-08-15T08:02:30.613
> 
> 标签：uitableview, cocos2d-iphone

我已经能够将 UITableView 添加到 cocos2d 层，它似乎可以滚动和处理委托操作，例如`didSelectRowAtIndexPath`.

但我想要的是在 tableview 单元格上放置精灵，自定义位图字体，基本上将每个 UITableViewcell 视为我可以使用 cocos2d 元素自定义的东西，但我不知道该怎么做。

```
// HelloWorldLayer implementation
@implementation HelloWorldLayer
@synthesize myTableView;

+(CCScene *) scene
{
    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

    // 'layer' is an autorelease object.
    HelloWorldLayer *layer = [HelloWorldLayer node];

    // add layer as a child to scene
    [scene addChild: layer];

    // return the scene
    return scene;
}

// on "init" you need to initialize your instance
-(id) init
{
    // always call "super" init
    // Apple recommends to re-assign "self" with the "super" return value
    if( (self=[super init])) {

        self.myTableView = [[UITableView alloc] initWithFrame:CGRectMake(10, 10, 300, 150) style:UITableViewStylePlain];
        // Set TableView Attributes
        self.myTableView.backgroundColor = [UIColor clearColor];
        self.myTableView.dataSource = self;
        self.myTableView.delegate = self;
        self.myTableView.opaque = YES;

        // Add View To Scene
        [[[CCDirector sharedDirector] openGLView] addSubview:self.myTableView];
    }
    return self;
}

// on "dealloc" you need to release all your retained objects
- (void) dealloc
{
    // in case you have something to dealloc, do it in this method
    // in this particular example nothing needs to be released.
    // cocos2d will automatically release all the children (Label)

    [self.myTableView release];
    self.myTableView = nil;

    // don't forget to call "super dealloc"
    [super dealloc];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return @"Header";
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 10;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    CCLabelTTF *lblNumber = [CCLabelTTF labelWithString:@"12345" fontName:@"Georgia" fontSize:14];
    [lblNumber setAnchorPoint:CGPointMake(0, 0.5)];

    CCSprite *spriteIcon = [CCSprite spriteWithFile:@"Icon.png"];

    // I want to add my the lblNumber and spriteIcon to the uitableviewcell

    return cell;
}

// - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)newIndexPath

-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"You selected index - %d", indexPath.row);
}

@end 
```

因此，我的问题是——如何将精灵、自定义位图字体和其他 cocos2d 元素添加到 UITableViewCell？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T02:20:21.220

如果你想做那种事情，你可能不应该使用 cocos2d。通过自定义 UITableViewCell 可以很容易地将图像和字体添加到 UITableViews 中。

# c# - InitializeComponent() 应该按代码顺序出现在哪里？

> ID：11965882
> 
> 赞同：13
> 
> 时间：2012-08-15T08:02:40.270
> 
> 标签：c#, winforms, visual-studio-2010

如果我创建一个 winForms“myForm”，则会生成以下样板代码：

```
public partial class myForm: Form
{
    public myForm() 
    {

       //<<position 1

       InitializeComponent();

       //<<position 2

    } 
} 
```

如果我在构造函数方法中添加额外的代码，如果我将代码放在位置 1 或 2 对应用程序的运行有什么影响吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-15T08:07:38.887

是的，它确实。

`InitializeComponent`是 VS 生成的负责在窗体上创建和定位控件的方法。

“位置 1”中的代码将在控件存在之前执行。如果您尝试访问此位置的控件，您将获得 a `NullReferenceException`（例如，如果您尝试设置 a 的内容`TextBox`）。“位置 2”中的类似代码将按预期工作。

但是，“位置 1”是有用的：如果您有依赖于表单属性的自定义控件或行为，如果您允许在这些属性之前创建控件，则将这些属性设置在“位置 1”可能会阻止该代码必须刷新值已设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T08:07:19.760

是的。在 InitializeComponent 之前，尚未创建所有控件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T08:07:13.097

在函数 InitializeComponent() 中；你创建了你放在图形布局中的所有对象。如果你想访问它们，你的代码应该在 position2。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T08:55:41.640

你放在上面的, `button`,`textbox`会自动创建一些代码。这个代码是在 `combobox``Form``InitializeComponent()`

因此，调用您放置在 Form 上的控件`position 1`是**错误**的，因为控件从未在该代码点创建。

您可以调用和访问您放置在表单上的控件`position 2`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-18T11:24:01.310

就像这里的其他人所说的那样，在大多数情况下应该使用位置 2。但是，也有两个位置都不起作用的例外情况，您实际上必须将代码附加到另一个事件。

示例：您在其中有一个**ScrollViewer**和一个**Image**。**您在Image**组件中插入一个大图像文件并希望显示它，以便图像的中心在开始时可见，并且可以选择滚动以查看图像的其余部分：

```
scrollViewer1.ScrollToVerticalOffset(scrollViewer1.ScrollableHeight / 2); 
```

*但是，在InitializeComponent()*之前或之后（甚至在）中将其写入构造函数不会给您想要的结果。（因为，即使在这个阶段已经初始化了组件，但包含的图像文件还没有。）相反，您要做的是将新的**事件处理程序** *ImageOpened*附加到**图像**并在那里编写命令。

[![ImageOpened 事件处理程序](../Images/a1509aee802df4f1cab34b7de9662d86.png)](https://i.stack.imgur.com/ettu0.png)

# hibernate - ClassNotFound ByteCodeProvider 与 iReport/Hibernate 连接

> ID：11965884
> 
> 赞同：0
> 
> 时间：2012-08-15T08:02:49.410
> 
> 标签：hibernate, jasper-reports, ireport

在我的休眠应用程序中，我想将 jasperreports 用于一些报告。我使用 iReport 进行设计。当我想在 iReport 中打开休眠连接（或弹簧/休眠连接）时，我有一个 ClassNotFoundException。在日志中，我看到它涉及类 org.hibernate.bytecode.BytecodeProvider。我不明白为什么，因为它是全新安装。有人有解决方案吗？

我使用的是 4.7.0 版本的 iReport。

# iphone - UINavigationController 嵌套在 moreViewController 中的问题

> ID：11965886
> 
> 赞同：2
> 
> 时间：2012-08-15T08:02:59.743
> 
> 标签：iphone, ios, uinavigationcontroller, uitabbarcontroller, parentviewcontroller

我有包含一些 UINavigationControllers 的 UITabbarMoreController。这些 UINavigationControllers 然后包含我的自定义视图控制器。

所以层次结构看起来像这样：

```
UITabbarController
 - UINavigationController
  -> my custom UIViewController
 - ...(other children of UITabbarController look the same) 
```

从我的自定义视图控制器中，我调用`[self parentViewController]`它应该返回一个 UINavigationController。这确实发生了，我确实得到了一个 UINavigationController，但只有当特定的 UINavigationController 不在 moreNavigationController 中时。

由于我在 tabbar 控制器中有很多子控制器，所以 tabbar 控制器创建了一个 moreNavigationController。如果我打开 moreNavigationController 下的视图控制器并调用`[self parentViewController]`它，则会返回一个带有 UIMoreNavigationController 类的神秘对象

我真的需要获取作为我的视图控制器的父级的 UINavigationController，而不是 UIMoreNavigationController。另外，我尝试使用`[self navigationController]`相同的结果。如何获得对我的视图控制器真正最近的父级的引用？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T09:43:49.653

简而言之，你不能。

苹果总是试图优化他们的代码。他们在这里的优化之一是检查`ViewController`其列表中显示的是否`UIMoreNavigationController`是 type `UINavigationController`。因为`UIMoreNavigationController`它本身是一个 UINavigationController 它不想创建另一个`UINavigationController`。它试图避免`UINavigationController`嵌套。

当您查看[UIMoreNavigationController](https://github.com/kennytm/iphone-private-frameworks/blob/master/UIKit/UIMoreNavigationController.h)的头文件时，您会注意到它有一个变量 ，该变量是您创建的并且您想要访问`UINavigationController* _originalNavigationController;`的原始变量。`UINavigationController`不幸的是你不能因为`UIMoreNavigationController`是私人的。

解决方法（丑陋）

当您将 NavigationController 的引用推送到它的堆栈时，将它们传递给它的子级。

# playframework - 播放框架2：Eclipse无法检测到jBCrypt作为项目依赖

> ID：11965888
> 
> 赞同：4
> 
> 时间：2012-08-15T08:03:11.350
> 
> 标签：playframework, playframework-2.0, dependency-management

我正在尝试使用 jBCrypt 开始更有效地保护我的密码，但我不知道为什么 eclipse 检测不到我的项目依赖性：我至少添加了以下内容：

**插件.sbt**

```
resolvers += "jBCrypt Repository" at "http://repo1.maven.org/maven2/org/" 
```

**构建.scala**

```
val appDependencies = Seq(
      // Add your project dependencies here,
      "mysql" % "mysql-connector-java" % "5.1.18",
      "org.mindrot" % "jbcrypt" % "0.3m"
    ) 
```

**SecurityUtils.java（测试导入）**

导入 org.mindrot... <- 无法识别.. 当我只输入**org.** 并查看没有mindrot的软件包列表...

当我尝试在终端**播放依赖**项时，我可以看到模块*org.mindrot:jbcrypt:0.3m*已成功加载，并且“testProject:testProject_2.9.1:1.0”需要它作为 jbcrypt-0.3m.jar

通过 Mac 的 finder 浏览时可以找到相同的 .jar 包。（在播放存储库文件夹的缓存内）。

我还尝试在运行 play clean、compile、~run 等中刷新 eclipse，但没有运气。可能是什么问题呢？这是 play framework 2.0.2 java 项目。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T09:14:29.027

似乎在其他播放命令中间再次生成 eclipse 配置解决了问题，现在可以识别包。我使用了以下命令：

```
play clean
play compile
play eclipsify
play ~run 
```

当我们添加新的依赖项时，我们应该创建新的 eclipse 项目文件似乎不公平？但我想如果没有其他意见如何解决类似情况，我需要坚持这一点？提前谢谢。

**编辑：**

小心！在最近版本的 sbt 中，`eclipsify`命令已被替换。`eclipse`

# android - 非活动类的 Android Robotium 测试

> ID：11965889
> 
> 赞同：0
> 
> 时间：2012-08-15T08:03:13.467
> 
> 标签：android, testing, robotium

谁能告诉我如何为非活动类编写 Robotium 测试？我已经看到了很多活动课程的例子，但没有看到非活动课程的例子。是否可以？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:08:42.223

Robotium 对于在测试用例中与您的应用程序交互非常有用。这些交互通常与活动有关。

如果您想测试其他类，则无需使用 Robotium。您可能会查看[Robolectric](http://pivotal.github.com/robolectric/)以在您的计算机上的 JVM 中运行测试。

# encoding - XSLT：字符（破折号）编码

> ID：11965890
> 
> 赞同：0
> 
> 时间：2012-08-15T08:03:15.813
> 
> 标签：encoding, character-encoding, xslt-1.0

我陷入了非常严重的问题，请帮助我。

我有输入文件，其中包含一些字符（短划线），**SWITCH - 以太网访问**是以下输入数据中具有短划线字符的字段。

```
<CsvData><![CDATA[Type=Upload Centers

, Corporation,69,SWITCH - Dune,R&D,DNX
,Corporation,70,SWITCH – Ethernet Access,R&D,EA
,Canada Ltd.,70,SWITCH – Ethernet Access,R&D,EA
, Networking Technology (Shanghai) Co. Ltd.,70,SWITCH – Ethernet Access,R&D,EA
, Japan G.K.,70,SWITCH – Ethernet Access,R&D,EA
, Corporation,55,Network - Switch,R&D,XGS
]]></CsvData> 
```

当我使用我的 XSLT 进行转换时，我收到以下错误。

```
ERROR: XSLT Service failed. Failed to transform document Exception: Invalid byte 1 of 1-byte UTF-8 sequence. 
```

以下是 XSLT 代码：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml" encoding="UTF-8" omit-xml-declaration="yes" cdata-section-     elements="CsvData"/>
    <xsl:param name="UserName"/>
    <xsl:param name="Password"/>
    <xsl:template match="/">    
        SOAPAction: "urn:upload"
        Content-Type: text/xml;charset=UTF-8
        <xsl:text>
        </xsl:text>
        <soapenv:Envelope xmlns:soapenv="http://schemas/" xmlns:web="http:/site">
            <xsl:text>
            </xsl:text>
            <soapenv:Header/>
            <xsl:text>
            </xsl:text>
            <soapenv:Body>
                <xsl:text>
                </xsl:text>
                <web:upload>
                    <xsl:text>
                    </xsl:text>     
                    <web:username><xsl:value-of select="$UserName"/>      </web:username>
                    <xsl:text>
                    </xsl:text>
                    <web:password><xsl:value-of select="$Password"/>     </web:password>
                    <xsl:text>
                    </xsl:text>

                    <web:data>
                    <!-- CDATA section in output file generated -->
                    <xsl:text disable-output-escaping="yes"><![CDATA[ <![CDATA[  ]]>     </xsl:text>
                    <xsl:value-of select="CsvData" />
                    <xsl:text disable-output-escaping="yes"><![CDATA[]]]]><![CDATA[>]]>    </xsl:text>
                </web:data>
            </web:upload></soapenv:Body>
        </soapenv:Envelope>
    </xsl:template>
</xsl:stylesheet> 
```

请找出当 UTF-8 支持 en-dash 时此 XSLT 代码失败的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T08:24:09.750

可能的原因是输入文件实际上不是 UTF-8 编码的。如果它实际上是 windows-1252 (Windows Latin 1) 编码的，则 EN DASH 在其中显示为八位字节 96（十六进制）；当数据被解释为 UTF-8 时，它会导致错误情况，就像报告的情况一样。

要检查这一点，例如在 Notepad++ 中打开输入文件并将编码设置为 ANSI。如果看起来没问题（你期望的地方有 EN DASH），那么我的分析是正确的，你需要使用 Notepad++ 中的命令将文件转换为 UTF-8，然后保存。

更改文件编码的方法有很多种，我只提到了一种简单的方法。如果文件是动态生成的，您需要修改生成过程 - 或者可能将文件声明为 windows-1252 编码，尽管这通常不是一个好主意（限制可以使用的字符库）。

# c# - WebBrowser 在 IE 中打开链接而不是默认浏览器？

> ID：11965891
> 
> 赞同：1
> 
> 时间：2012-08-15T08:03:20.330
> 
> 标签：c#, wpf, .net-4.0, browser

所以我有一个打开一个新窗口的 WPF 应用程序。然后在那个新窗口上，它创建一个 webBrowser 对象：

```
WebBrowser browser = new WebBrowser();
browser.Source = new System.Uri(chatUrl);
browser.Navigating += new NavigatingCancelEventHandler(browser_Navigating);
this.browserControl.Child = browser; 
```

如您所见，我为 NavigatingCancelEventHandler 创建了一个挂钩。根据我所看到的，这个处理程序应该拦截在网络浏览器中点击的链接。

```
private void browser_Navigating(object sender, NavigatingCancelEventArgs e)
{
    e.Cancel = true;
    System.Diagnostics.Process.Start(e.Uri.ToString());
} 
```

所以我选择导航，取消它并使用 Process.Start 函数在我的默认浏览器中打开它。问题是，它不这样做。它仍然在 IE9 中打开。我在 StackOverflow 上看到了其他线程，他们都说要做我正在做的事情。但是我正在做的事情不起作用。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:27:57.223

您为事件处理程序使用了不正确的委托类型，您指定了 NavigatingCancelEventArgs 但它应该是 WebBrowserNavigatingEventHandler。

获得正确的最简单的方法就是输入

```
browser.Navigating += 
```

并按 TAB 两次，它会为您生成正确的处理程序。

编辑：嗯，我正在查看 SWF 版本，但在 WPF 的任何一种情况下，我都会尝试上述方法。

# regex - Perl：字符串操作 - 用字符'@'包围一个单词

> ID：11965895
> 
> 赞同：-2
> 
> 时间：2012-08-15T08:03:36.540
> 
> 标签：regex, string, perl

我正在尝试从 txt 文件中提取电子邮件地址。我考虑过包含“@”字符的周围单词。有人知道这样做的表达式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T08:50:08.160

Whenever you need some reasonably common matching problem resolve in Perl, you should always first check the `Regexp::Common` family on CPAN. In this case: [`Regexp::Common::Email::Address`](http://search.cpan.org/perldoc?Regexp%3a%3aCommon%3a%3aEmail%3a%3aAddress). From POD Synopsys:

```
 use Regexp::Common qw[Email::Address];
  use Email::Address;

  while (<>) {
      my (@found) = /($RE{Email}{Address})/g;
      my (@addrs) = map $_->address, Email::Address->parse("@found");
      print "X-Addresses: ", join(", ", @addrs), "\n";
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T08:13:04.113

这是一个非常快速和肮脏的正则表达式，它将匹配 两侧的非空白字符`@`：

```
/\S+@\S+/ 
```

这将匹配**john.smith@example.com**

> 一些垃圾文字 john.smith@example.com 更多垃圾文字

希望这可以帮助。

# ruby-on-rails - 如何连接多个表？

> ID：11965898
> 
> 赞同：0
> 
> 时间：2012-08-15T08:04:05.613
> 
> 标签：ruby-on-rails, ruby-on-rails-3

案子：

表：

1.  `teacher :id :name`

2.  `course :id :name`

3.  `teachercourse :id :teacher_id :course_id`

如何使用导轨对这 3 个表进行内部连接？

**编辑**（我的模型）：

```
class Course < ActiveRecord::Base
  attr_accessible :name
  has_many :teachercourses
  has_many :teachers, through: :teachercourse
end

class Teacher < ActiveRecord::Base
  attr_accessible :name
  has_many :teachercourses
  has_many :courses, through: :teachercourse
end

class Teachercourse < ActiveRecord::Base
  attr_accessible :course_id, :teacher_id
  belongs_to :course
  belongs_to :teacher
end 
```

**Edit2** - 我需要加入结果（显示操作）：

```
class CourseController < ApplicationController
  def show
    #not real syntax
    @course=Course.find(join:teacher,teachercourse,teacher :: where course='javacourse');
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T09:19:09.057

你的 Teacher 和 Course 模型都应该包含`has_many :teachercourses`

然后，如果你在 Teacher 模型中编写代码，它应该是这样的：

```
joins(teachercourses: :course) 
```

编辑：

如果我理解您发布的代码背后的意图，那么您正在寻找所有在 java 课程中任教的老师。所以这应该工作：

```
Teacher.joins(teachercourses: :course).where(course: {name: "javacourse"}) 
```

# python - 获取表单字段的初始值作为模板中的字符串

> ID：11965902
> 
> 赞同：0
> 
> 时间：2012-08-15T08:04:25.030
> 
> 标签：python, django, forms

如果我在 kargs 的帮助下为传递的表单设置了初始值。像这样

```
kwargs['initial'] = initial_data
        super(JobAdReplyForm, self).__init__(*args,**kwargs)` 
```

一切都很好，当我试图在模板中获取表单字段时，我正在让它们`form.field_name`与初始值一起使用。现在我想做的是`initial`将模板中特定字段的值仅作为字符串获取，以便我可以在模板本身中打印它。

就像是`form.field_name.initial`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:24:49.000

只要您使用 django 1.3 或更高版本，您就应该可以 `{{ form.field_name.value }}`在模板中使用。

# php - 用 mongo 驱动编译 php 5.4.5

> ID：11965905
> 
> 赞同：2
> 
> 时间：2012-08-15T08:04:29.817
> 
> 标签：php, compilation, mongodb-php

现在我已经在我的 Ubuntu PC 上通过 apt-get 安装了 php 5.3.*，但我需要使用 5.4.5 来解决一些问题。根据这个原因，我尝试使用 mongo 驱动程序编译并安装新版本 php 5.4.5 到单独的地方：我做了以下步骤：

```
sudo su
cd /opt
tar xfz php-5.4.5.tar.gz
cd php-5.4.5
./configure --prefix=/opt/php545 --enable-phar --with-config-file-path=/opt/php545/php.ini
make & make install 
```

在上面的命令之后，我得到了工作 php：

```
/opt/php545/bin/php -v
PHP 5.4.5 (cli) (built: Aug 15 2012 09:04:56) 
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.4.0, Copyright (c) 1998-2012 Zend Technologies 
```

之后我做了下一个：

```
/opt/php545/bin/pecl install mongo 
```

它还给我

```
Build process completed successfully
Installing '/opt/php545/lib/php/extensions/no-debug-non-zts-20100525/mongo.so'
install ok: channel://pecl.php.net/mongo-1.2.12
configuration option "php_ini" is not set to php.ini location
You should add "extension=mongo.so" to php.ini 
```

我添加到 /opt/php545/php.ini 下一行

```
extension=/opt/php545/lib/php/extensions/no-debug-non-zts-20100525/mongo.so 
```

但 mongo 没有作为模块加载：

```
/opt/php545/bin/php -m | grep mongo
!!!Nothing here!!! 
```

我做错了什么？

PS：

```
 /opt/php545/bin/php -i | grep php.ini 
```

返回

```
Configuration File (php.ini) Path => /opt/php545/php.ini 
```

（php.ini 设置正确）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:29:16.100

php config 不接受扩展行的绝对路径，请使用 extension_dir。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T02:26:48.933

不从php.ini加载扩展名，从ini文件加载解析如下：

```
 nano /usr/local/php-5.x.xx/php.d/mongo.ini 
```

x.xx 是你的 PHP 版本。

然后加载扩展：

```
 ;Enable mongo extension module
 extension=mongo.so
 mongo.default_port=27017 
```

使用 ctrl + o 保存并关闭白色 crtl + x

然后重启服务：

```
 service php-fpm restart 
 service httpd restart 
```

// php-fpm 如果有

所以你应该已经加载了。

# php - 通过 telnet 从 python 调用 php

> ID：11965907
> 
> 赞同：1
> 
> 时间：2012-08-15T08:04:37.857
> 
> 标签：php, python, telnet

我正在尝试从用 python 编写的简单 telnet-server 调用一些 php 脚本。这是一个代码。

```
 # -*- coding: utf8 -*-
  #!/usr/bin/env python
  # скрипт перекидывает выполнение нужного скрипта на определённый порт

  import socket
  import os
  from commands import *
  import subprocess

  #define server properties
  host = ''
  port = 5000
  backlog = 5
  size = 1024

  # configure the server socket
  s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
  s.bind((host,port))
  s.listen(backlog)

  # handle client requests
  while 1:
      client, address = s.accept()
      data = client.recv(size)
      print data
      if data:
  #находим путь для выполняемого скрипта
              recvCommand = data[5:]
              print recvCommand
              userCommand = u'' + recvCommand
              #userCommand = u''+'/home/mechanic/python/forloop.php'
              res = subprocess.call(["php", userCommand])
              client.send(data)

 35     client.close() 
```

在终端上，我连接到 localhost（telnet localhost 5000）并运行命令“calc /home/mechanic/python/forloop.php”。该路径存在于系统中，我可以手动运行他。但是脚本给我返回了这个错误：

```
Could not open input file: /home/mechanic/python/forloop.php 
```

但是如果我在 python 脚本中手动编写这个路径

```
userCommand = u''+'/home/mechanic/python/forloop.php' 
```

一切正常。我可以在哪里犯错？

PS这里是forloop.php的代码

```
<?
for (  $i = 0 ;  $i <= 1000000;  $i++  )
echo "Welcome $i times\n";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T08:23:22.550

您是否尝试过使用`recvCommand.strip()`而不是原始的？我认为 recvCommand 包含来自 telnet 客户端的换行符和回车符。

您的命令接收有时可能会失败，不能保证所有数据都会在单个 recv 调用中到达。您应该连接数据，直到收到换行符。在某些情况下，您的命令可能会到达多个缓冲区，您的代码将无法使用它。

# image - TinyMCE 阻止图像大小调整

> ID：11965916
> 
> 赞同：7
> 
> 时间：2012-08-15T08:06:18.740
> 
> 标签：image, tinymce, image-resizing, aspect-ratio

我正在使用以下方法将图像添加到 TinyMCE 编辑器：

```
var params = {
             src: filename,
             title: "Attached image: " + filename,
             width: 500
             };

ed.execCommand("mceInsertContent", false, ed.dom.createHTML("img", params)); 
```

这会在编辑器中正确插入图像。但是，当用户单击图像时，他可以调整其大小。

我想知道是否有办法：

1.  防止用户仅在一个方向调整大小（即如何保持图像的固定纵横比）
2.  完全防止用户调整图像大小

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-18T09:16:44.957

我找到了一个（部分）答案，所以我想我会在这里分享。

添加

```
'object_resizing' : false 
```

在编辑器配置中防止调整大小。请注意，这只是 Mozilla 的一项功能（例如 Google Chrome 不允许您调整图像大小）。

我仍在寻找一种保持方式`aspect ratio`，`real time`但我不知道这是否真的可能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T19:41:39.870

您可以简单地将[这个小插件](http://code.google.com/p/tinymce-plugin-advimagescale/source/browse/trunk/editor_plugin_src.js)添加到 tinyMCE，我使用它并且效果很好！这是文档：[链接](http://code.google.com/p/tinymce-plugin-advimagescale/wiki/Usage)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T10:21:37.660

您需要实现一个调整大小处理程序（例如[jQuery 处理程序](http://api.jquery.com/resize/)）。将属性添加到图像以保存其尺寸或使用单个设置来保存纵横比可能会有所帮助。为此，您将调整 tinymce 配置设置 valid_elements 以允许图像的这些属性 - 否则 tinymce 会将它们删除。

当调整大小被触发时，您获取新尺寸并根据纵横比调整尺寸 - 使用新宽度或新高度进行调整（需要更正其他值）。

**示例：**图像有一个属性 aspectratio 保存纵横比

您可以将此代码放在tinymce [setup 配置](http://www.tinymce.com/wiki.php/Configuration%3asetup)参数中

```
 setup : function(ed) {
      ed.onInit.add(function(ed) {
        $(ed.getBody()).find('img').resize( function(event){

          $(event.target).css('width', parseInt ( event.target.width * this.aspectratio)  );

        });
      });
   } 
```

**更新：**

我创建[了一个 tinymce fiddle](http://fiddle.tinymce.com/rXbaab/30)来展示一个与 IE 一起使用的示例。

# android - 如何调整我的 xml 大小以使其适合模拟器

> ID：11965918
> 
> 赞同：0
> 
> 时间：2012-08-15T08:06:30.823
> 
> 标签：android, xml, user-interface

我目前的 GUI 设计有问题，因为整个页面将向右移动并变成这样：

![在此处输入图像描述](../Images/d807ba41504c5e1f2d7c1428f352b7fe.png)

创建事件.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/crimson"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/txtDate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

    <TextView
        android:id="@android:id/text1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/txtDate"
        android:layout_below="@+id/txtDate"
        android:layout_marginTop="16dp"
        android:text="Title:"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@android:id/text1"
        android:layout_alignBottom="@android:id/text1"
        android:layout_marginLeft="34dp"
        android:layout_toRightOf="@android:id/text1" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@android:id/text1"
        android:layout_below="@+id/spinner1"
        android:layout_marginTop="18dp"
        android:text="Location:"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/spinner1"
        android:layout_alignTop="@+id/textView2"
        android:ems="10" >

        <requestFocus />
    </EditText>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView2"
        android:layout_below="@+id/editText1"
        android:layout_marginTop="15dp"
        android:text="Start At:"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/editText2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView1"
        android:layout_alignBottom="@+id/textView1"
        android:layout_toRightOf="@+id/textView2"
        android:ems="10"
        android:inputType="time" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView1"
        android:layout_below="@+id/editText2"
        android:layout_marginTop="22dp"
        android:text="End At:"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/editText3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/textView3"
        android:layout_toRightOf="@+id/textView2"
        android:ems="10"
        android:inputType="time" />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView3"
        android:layout_below="@+id/editText3"
        android:layout_marginTop="23dp"
        android:text="Alarm:"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <Button
        android:id="@+id/btnAlarm"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView4"
        android:layout_alignBottom="@+id/textView4"
        android:layout_alignLeft="@+id/editText3"
        android:text="Set Alarm" />

    <Button
        android:id="@+id/btnMain"
        style="@style/main_menu"
        android:layout_width="170dp"
        android:layout_height="60dp"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="14dp"
        android:layout_toRightOf="@+id/textView1"
        android:background="@drawable/blue_load_picbutton"
        android:text="Main Menu" />

    <Button
        android:id="@+id/btnEvent"
        style="@style/main_menu"
        android:layout_width="170dp"
        android:layout_height="60dp"
        android:layout_above="@+id/btnMain"
        android:layout_alignLeft="@+id/btnMain"
        android:layout_marginBottom="14dp"
        android:background="@drawable/blue_load_picbutton"
        android:text="Create Event" />

    <TextView
        android:id="@+id/txtName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignRight="@+id/editText1"
        android:text="TextView" />

</RelativeLayout> 
```

我不知道整个屏幕移动的原因。我上次打开时，它完全适合屏幕。任何人都知道为什么，你能帮我吗？谢谢。

编辑：

![在此处输入图像描述](../Images/43db8ebcad03ede86636edaa932572f8.png)

按照@Andy Res 说的做了之后，我的屏幕目前是这样显示的。供您参考，我用于模拟器的皮肤是 WVGA854。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:15:49.413

我看到你把你`Title`的右边对齐`txtDate`。
然后所有控件都以`Title`为参考对齐。

所以我相信这条线可能会导致向右移动。

```
<TextView
        android:id="@android:id/text1"
        android:layout_alignRight="@+id/txtDate"
        .... /> 
```

尝试删除：`android:layout_alignRight="@+id/txtDate"`并查看是否有任何效果。

# forms - 浏览器在登录时不记得密码

> ID：11965919
> 
> 赞同：5
> 
> 时间：2012-08-15T08:06:32.470
> 
> 标签：forms, extjs, login, extjs4, extjs4.1

较早的一个[问题](https://stackoverflow.com/a/2945553/233286)提到了一种使用`el`配置的方法，以使浏览器记住密码。`el`但是， ExtJS 4.1 中不再存在该配置。

现在，我该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T11:06:50.300

我相信它应该是**contentEl**而不是**el**但我这样做是另一种方式。你可以直接用 ExtJS 构建整个东西。**唯一的转折是默认情况下将使用autocomplete=off**属性创建 Ext 字段，因此我使用派生类来覆盖它。

```
Ext.define('ACField', {
    extend: 'Ext.form.field.Text',

    initComponent: function() {
        Ext.each(this.fieldSubTpl, function(oneTpl, idx, allItems) {
            if (Ext.isString(oneTpl)) {
                allItems[idx] = oneTpl.replace('autocomplete="off"', 'autocomplete="on"');
            }
        });
        this.callParent(arguments);
    }
});

Ext.onReady(function() {
    new Ext.panel.Panel({
        renderTo: Ext.getBody(),
        width: 300,
        height: 100,
        autoEl: {
            tag: 'form',
            action: 'login.php',
            method: 'post'
        },  
        items: [
            new ACField({
                xtype: 'textfield',
                name: 'username',
                fieldLabel: 'Username'
            }), 
            new ACField({
                xtype: 'textfield',
                name: 'password',
                fieldLabel: 'Password',
                inputType: 'password'
            }), 
        ],
        buttons: [{
            xtype: 'button',
            text: 'Log in',
            type: 'submit',
            preventDefault: false
        }]
    });
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-28T07:33:23.433

来自 lagnat 的答案大部分是正确的，要让它在 Chrome 和 Firefox 上也能正常工作，需要以下内容：

1) 为自动完成覆盖默认的 ExtJS 文本字段行为（从 lagnat 复制）：

```
Ext.define('ACField', {
    extend: 'Ext.form.field.Text',

    initComponent: function() {
        Ext.each(this.fieldSubTpl, function(oneTpl, idx, allItems) {
            if (Ext.isString(oneTpl)) {
                allItems[idx] = oneTpl.replace('autocomplete="off"', 'autocomplete="on"');
            }
        });
        this.callParent(arguments);
    }
}); 
```

2）确保文本字段在`<form>`标签内：（参见 lagnat 的回答），因为 ExtJS 4 的`<form>`标签不再存在于 FormPanel 中。

```
 autoEl: {
        tag: 'form',
        action: '/j_spring_security_check',
        method: 'post'
    }, 
```

3) 确保`<form>`HTML 中有一个存在，具有相同的`<input>`名称：

```
 items:[
                Ext.create('ACField',{
                    fieldLabel: 'Username',
                    name:'j_username',
                    inputId: 'username',
                    allowBlank:false,
                    selectOnFocus:true
                }),
                Ext.create('ACField',{
                    fieldLabel:'Password',
                    name:'j_password',
                    inputId: 'password',
                    xtype:'textfield',
                    allowBlank:false,
                    inputType:'password'
                })
            ], 
```

并在 HTML 中具有相同输入名称的常规表单：

```
<body>
<div id="login-panel">
    <form id="loginForm" action="<c:url value="/j_spring_security_check"/>" method="post">
        <input class="x-hidden" type="text" id="username" name="j_username"/>
        <input class="x-hidden" type="password" id="password" name="j_password"/>
    </form>
</div>
<noscript>Please enable JavaScript</noscript>
</body> 
```

完成所有这些更改后，保存用户名/密码可以在 IE、Chrome 和 Firefox 中使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T21:36:18.440

有一个 autoRender 属性，它允许您将 Extjs 字段应用于页面上已经存在的元素。因此，如果您在 html 中设置基本表单，浏览器应该将表单的字段识别为登录信息，然后如果您使用 autoRender 并引用正确的字段（以及按钮在表单上的基本 html 表单中的提交类型按钮）它应该可以正常工作。另外，请记住，浏览器可能无法识别登录的 ajax 调用，您可能需要使用基本的表单提交。我的应用程序中有一个工作示例，但我很难尝试提取特定于应用程序的代码，所以这里有一个示例。如果您需要该示例，请发表评论，我可能会在星期一之前回复您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-27T11:13:21.123

@Lagnat 的回答不适用于 ExtJS 4.2.1 和 4.2.2。这可能是由于[`type`](http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.button.Button-cfg-type)从按钮中删除了配置。我们需要的是按钮的标准提交`<input type="submit">`按钮。所以我将它添加到按钮上`opacity: 0`。以下是我的工作代码（在 Firefox 27、Chrome 33、Safari 5.1.7、IE 11 上测试。应为浏览器启用自动填充/自动保存密码）：

```
Ext.create('Ext.FormPanel', {
    width: 400,
    height: 500,
    padding: '45 0 0 25',
    autoEl: {
        tag: 'form',
        action: 'login.php',
        method: 'post'
    },
    renderTo: Ext.getBody(),
    items: [{
        xtype: 'textfield',
        fieldLabel: 'Username',
        name: 'username',
        listeners: {
            afterrender: function() {
                this.inputEl.set({
                    'autocomplete': 'on'
                });
            }
        }
    }, {
        xtype: 'textfield',
        fieldLabel: 'Password',
        inputType: 'password',
        name: 'username',
        listeners: {
            afterrender: function() {
                this.inputEl.set({
                    'autocomplete': 'on'
                });
            }
        }
    }, {
        xtype: 'button',
        text: 'LOG IN',
        width: 100,
        height: 35,
        preventDefault: false,
        clickEvent: 'click',
        listeners: {
            afterrender: function() {
                this.el.createChild({
                    tag: 'input',
                    type: 'submit',
                    value: 'LOG IN',
                    style: 'width: 100px; height: 35px; position: relative; top: -31px; left: -4px; opacity: 0;'
                });
            }
        }
    }]
}); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-15T16:12:43.677

我推荐使用 ExtJS 的内置 Cookie 功能。

*   您可以使用以下命令读取 cookie： readCookie('password);
*   您可以使用以下方法创建 cookie： createCookie('password', "pass123", 30); // 保存 30 天

然后，您可以使用基本业务逻辑使用存储的密码自动填充您的 formField。

那有意义吗？

# nuget - NuSpec 版本属性与程序集版本

> ID：11965924
> 
> 赞同：33
> 
> 时间：2012-08-15T08:07:11.973
> 
> 标签：nuget, nuget-package

在创建 nuget 包时，nuget 包的文件名中的版本似乎来自 Web 应用程序项目中的 AssemblyInfo 文件。我还在 nuspec 文件中创建了一个版本属性。

这两个版本号有什么关系，有什么约定吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-08-14T17:13:29.707

关于*约定*，NuGet 软件本身以及它应用于库中的包的语义，按照[SemVer](http://semver.org/)的描述进行版本控制。具体来说，您可以通过在您的 nuspec 版本号后缀“-beta.4”或其他内容来指定 beta 版本。例如，查看图库如何显示[AutoFac 的最新版本](http://www.nuget.org/packages/Autofac/)，并比较它如何显示[旧版本](http://www.nuget.org/packages/Autofac/3.0.0)（~~注意文本“这不是可用的 Autofac 的最新版本。”~~ **编辑：**图库似乎不再提供任何特殊消息对于非当前版本）和[旧的预发布版本](http://www.nuget.org/packages/Autofac/3.0.0-beta2)（带有文本“这是 Autofac 的预发布版本。”）。

不幸的是，`AssemblyVersion`in`AssemblyInfo.cs`可能不包含字母或连字符，因此不能以这种方式使用。但是，其中`AssemblyInformationalVersion`可能包含字母和连字符，如果您提供它，NuGet 将使用它而不是`AssemblyVersion`替换`$version$`nuspec 文件中的标记。更重要的是，`AssemblyInformationalVersion`（如果您在 Windows 资源管理器中检查 DLL 的详细信息，也称为“产品版本”），至少对我而言，更好地代表了 NuGet 版本应该匹配的内容。

我对这种方法有点担心，因为我希望`AssemblyVersion`通过各种 beta 迭代和最终生产迭代保持不变`AssemblyInformationalVersion`，这意味着我允许我的 DLL 的几个不同版本进入野外，它们的行为可能不同或不正确，但就 CLR 而言，它们都是相同的（CLR**只**关心`AssemblyVersion`）。但在实践中，这种情况经常发生（包括上面描述的 AutoFac 包），而且似乎不会引起问题。

[请参阅关于AssemblyVersion、AssemblyFileVersion 和 AssemblyInformationalVersion 之间有什么区别](https://stackoverflow.com/q/64602/326110)的两个出色的最高投票答案？了解更多信息`AssemblyInformationalVersion`和朋友。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-15T13:45:11.903

程序集版本和 nuget 包版本之间不需要存在关系。按照惯例，许多维护者对两者使用相同的编号。

`nuget.exe`如果您没有 nuspec，或者您用于`nuget.exe spec`创建标记化的 nuspec 文件，则使用相同编号的约定也是默认设置。但是，如果您将 $version$ 标记替换为一个值，则该值将优先并用于包文件名中。

您还可以在命令行上设置版本，该版本优先于上述所有内容。

有关 Xavier 博客的更多信息： [NuGet $version$ 令牌解释](http://www.xavierdecoster.com/post/2012/04/26/nuget-version-token-explained)

# java - Java中的抽象与封装

> ID：11965929
> 
> 赞同：88
> 
> 时间：2012-08-15T08:07:25.467
> 
> 标签：java, oop, concept

> **可能重复：**
> [抽象 VS 信息隐藏 VS 封装](https://stackoverflow.com/questions/24626/abstraction-vs-information-hiding-vs-encapsulation)

我知道这个问题在这个论坛上可能已经被问过数千次了，甚至网络上也充满了关于这些概念的很多定义，但听起来都一样，而且都使用相同的技术词汇。例如以下定义

**封装**是将数据和对数据进行操作的代码绑定或包装到单个实体中的过程。这使数据免受外部接口和误用的影响。考虑封装的一种方法是作为保护性包装器，防止代码和数据被包装器外部定义的其他代码任意访问。

我从上面的定义中了解到的是创建变量，将它们标记为私有并为这些变量生成 getter-setter 并使用对象来访问这些 getter 和 setter。这样，数据就隐藏在对象内部，只能通过对象访问。**希望我是对的**。

* * *

**抽象**是Java中用于隐藏某些细节并仅显示对象的基本特征的过程。换句话说，它处理对象（界面）的外部视图。

现在这是让我一直困惑的部分。每当我想到抽象时，我想到的就是抽象类（可能是因为两者都有 Abstract 关键字）。上面的定义说抽象意味着隐藏数据并只显示所需的细节，但这就是我们在封装中已经在做的事情，对吧？那么有什么区别。我也没有得到什么是对象**的外部视图，它处理对象的外部视图**。

如果可能的话，有人可以通过一些现实生活中的示例或一些程序示例来更清楚地说明这一点。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-08-15T08:20:58.110

[**OO 抽象**](https://en.wikipedia.org/wiki/Abstraction_(computer_science)#Abstraction_in_object_oriented_programming)发生在类级别设计期间，其目的是**隐藏API/设计/系统提供的功能***如何*实现的实现复杂性，从某种意义上说，简化了访问底层实现的“接口”。

抽象过程可以在类的越来越“更高”级别（层）上重复，这使得构建大型系统而不增加代码的复杂性和每一层的理解。

例如，Java 开发人员可以利用[FileInputStream](https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html)的高级特性而不用关心它是如何工作的（即文件句柄、文件系统安全检查、内存分配和缓冲将在内部进行管理，并且对消费者隐藏）。这允许`FileInputStream`更改实现，并且只要 API（接口）`FileInputStream`保持一致，针对以前版本构建的代码仍然可以工作。

同样，在设计自己的类时，您会希望尽可能对其他人隐藏内部实现细节。

***在 Booch 定义¹***中， **OO 封装**是通过[Information Hiding](https://en.wikipedia.org/wiki/Information_hiding)实现的，特别是围绕隐藏类实例拥有的内部数据（表示状态的字段/成员），通过强制以受控方式访问内部数据，并防止直接，对这些字段进行外部更改，以及隐藏类的任何内部实现方法（例如，将它们设为私有）。

例如，可以`private`默认生成类的字段，并且只有在需要对这些字段进行外部访问时，才会从类中公开a`get()`和/或`set()`（或）。`Property`（在现代 OO 语言中，字段可以标记为`readonly`/ `final`/`immutable`这进一步限制了更改，即使在类内也是如此）。

*未应用任何信息隐藏的示例（不良做法）*：

```
class Foo {
   // BAD - NOT Encapsulated - code external to the class can change this field directly
   // Class Foo has no control over the range of values which could be set.
   public int notEncapsulated;
} 
```

*已应用字段封装的示例*：

```
class Bar {
   // Improvement - access restricted only to this class
   private int encapsulatedPercentageField;

   // The state of Bar (and its fields) can now be changed in a controlled manner
   public void setEncapsulatedField(int percentageValue) {
      if (percentageValue >= 0 && percentageValue <= 100) {
          encapsulatedPercentageField = percentageValue;
      }
      // else throw ... out of range
   }
} 
```

*字段的不可变/仅构造函数初始化示例*：

```
class Baz {
   private final int immutableField;

   public void Baz(int onlyValue) {
      // ... As above, can also check that onlyValue is valid
      immutableField = onlyValue;
   }
   // Further change of `immutableField` outside of the constructor is NOT permitted, even within the same class 
} 
```

**Re : 抽象与抽象类**

[抽象类](https://en.wikipedia.org/wiki/Abstract_type)是促进类之间共性重用的类，但它们本身不能直接被实例化`new()`——抽象类必须是子类，并且只有`concrete`（非抽象）子类可以被实例化。`Abstraction`和 an之间混淆的一个原因可能`abstract class`是在 OO 的早期，继承被更多地用于实现代码重用（例如，与相关的抽象基类）。如今，[组合普遍优于继承](https://en.wikipedia.org/wiki/Composition_over_inheritance)，并且有更多的工具可用于实现抽象，例如通过接口、事件/委托/函数、特征/混合等。

**Re : 封装与信息隐藏**

***封装***的含义似乎随着时间的推移而演变，并且在最近，在确定将哪些方法、字段、属性、事件等**捆绑**到一个类中时，[`encapsulation`](https://en.wikipedia.org/wiki/Encapsulation_(computer_programming))它通常也可以在更一般的意义上使用。

 **引用维基百科：

> 在面向对象编程语言的更具体设置中，该概念用于表示信息隐藏机制、捆绑机制或两者的组合。

例如，在声明中

> 我已经将数据访问代码***封装***到它自己的类中

..*封装*的解释大致等同于[关注点分离](https://en.wikipedia.org/wiki/Separation_of_concerns)或[单一责任原则](https://en.wikipedia.org/wiki/Single_responsibility_principle)（SOLID 中的“S”），可以说是重构的同义词。

* * *

^([1][一旦您看过 Booch 的[封装猫图片](https://effectivesoftwaredesign.com/2016/09/28/the-cat-as-a-metaphor-in-object-oriented-software-development/#encapsulation)，您将永远无法忘记封装 - 第 46 页，面向对象分析和设计与应用程序，第 2 版])

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-08-15T08:47:15.767

In simple words: You do abstraction when deciding what to implement. You do encapsulation when hiding something that you have implemented.

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2012-08-15T08:10:46.430

抽象是关于*识别共性*并减少您必须在不同级别的代码中使用的功能。

例如，我可能有`Vehicle`课。A`Car`将派生自 a `Vehicle`， a 也是如此`Motorbike`。我可以向每个人询问`Vehicle`轮子、乘客等的数量，并且该信息已从 和 中提取并识别为`Cars`共同点`Motorbikes`。

在我的代码中，我通常可以`Vehicles`通过常用方法`go()`等来处理`stop()`。当我稍后添加新的 Vehicle 类型时（例如`Scooter`），我的大部分代码都会忽略这个事实，并且`Scooter`单独执行会担心`Scooter`特殊性。**

# layout - ext js 4 布局

> ID：11965933
> 
> 赞同：0
> 
> 时间：2012-08-15T08:07:54.180
> 
> 标签：layout, extjs

这是屏幕截图上的代码和链接

```
Ext.define('SD.view.SDDetail', {
    extend: 'Ext.window.Window',
    alias: 'widget.sddetail',
    title: "Создание заявки",
    height: 620,
    width: 850,
    layout: 'fit',
    border: false,
    modal: true,
    isDemandReadOnly: false,
    changeStatusOnly: false,

    initComponent: function () {
        var me = this;
        var user = TR.user;

        var f = new Ext.form.FormPanel({
            xtype: 'form',
             labelWidth: 60
            , frame: true
            , items: [{
                    fieldLabel: 'Text'
                    , xtype: 'textfield'
                    , anchor: '-18'
                    }, {
                        layout: 'column'
                    , defaults: {
                        columnWidth: 0.5
                    //, layout: 'form'
                    , border: false
                    , xtype: 'panel'
                    , bodyStyle: 'padding:0 18px 0 0'
                    }
                    , items: [{
                        defaults: { anchor: '100%' }
                    , items: [{
                        xtype: 'combo'
                    , fieldLabel: 'Combo 1'
                    , store: ['Item 1', 'Item 2']
                    }, {
                        xtype: 'datefield'
                    , fieldLabel: 'Date'
                    }]
                    }, {
                        defaults: { anchor: '100%' }
                    , items: [{
                        xtype: 'combo'
                    , fieldLabel: 'Combo 2'
                    , store: ['Item 1', 'Item 2']
                    }, {
                        xtype: 'timefield'
                    , fieldLabel: 'Time'
                    }]
                    }]
                    }, {
                        fieldLabel: 'Text Area'
                    , xtype: 'textarea'
                    , anchor: '-18 -80'
            }]
        });

        this.items = [f];

        this.tbar = {
            xtype: 'toolbar',
            height: 27,
            items: [
                {
                    xtype: "tbspacer"
                }, "-", {
                    xtype: "tbspacer"
                },
                {
                    text: "Прикрепленные файлы",
                    icon: "Content/images/btnAttach.gif",
                    disabled: true,
                    handler: function (btn, e) { ShowAttachments(r.id, true, me.isDemandReadOnly); }
                }, "-", {
                    xtype: "tbspacer"
                }, {
                    text: "История статусов",
                    icon: "Content/images/btnHistory.gif",
                    disabled: true,
                    handler: function (btn, e) { ShowStatusesHistory(r.id, true); }
                }, "-", {
                    xtype: "tbspacer"
                }, {
                    text: "Информация по сопроводительной карточке",
                    icon: "Content/images/btnComplect.gif",
                    disabled: true,
                    handler: function (btn, e) { ShowComponents(r.id, true, me.isDemandReadOnly); }
                }, "-", {
                    icon: "Content/images/btnPrint.gif",
                    text: "Сопроводительная карточка изделия",
                    disabled: true,
                    handler: function (btn, e) { DemandCardForm(r.id); }
                }

        ]
        };

        this.buttons = [
            {
                text: "Сохранить",
                action: 'save'
                , disabled: me.isDemandReadOnly || user.SdUserViewOnly
            }, {
                xtype: "button",
                text: "Отмена",
                handler: function (btn, e) {
                    me.close();
                }
            }
        ];

        //        me.on('show', function () {
        //            me.down('kontragentcombo').focus(false, 250);
        //        });

        me.callParent(arguments);
    } 
```

[http://s002.radikal.ru/i198/1208/e2/7a153ca9b116.jpg](http://s002.radikal.ru/i198/1208/e2/7a153ca9b116.jpg)

当我取消注释布局时：'form' 我有错误

命名空间未定义 [Прерывать на этой ошибке]

if (namespace === from || namespace.substring(0, from.length) === from) {

我想要这个[http://i032.radikal.ru/1208/51/e9b8ba1c1f30.jpg](http://i032.radikal.ru/1208/51/e9b8ba1c1f30.jpg)

但是有错误，我必须做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:11:20.313

`layout`没有在`items`面板中定义。它是面板属性的一部分（请参阅文档：[Form Panel](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.Panel-cfg-layout)）。放在前面`items`。

作为建议 - 如果您的行具有一致的逗号布局，则更容易看到它。

# jquery - jquery append 在函数中不起作用

> ID：11965935
> 
> 赞同：0
> 
> 时间：2012-08-15T08:08:05.677
> 
> 标签：jquery, function, append

我在这个函数中追加了问题：

```
 <!-- js code here -->
    <script>
        function newAssign(divID)
        {
            $("div[id='"+divID+"']").append("<p> hello! </p>");
        }
    </script> 
```

php 代码 - 使用 divID onChange 调用 newAssign 选择

```
 <?php foreach($myvar as $each): ?>
          <select name="weekday" class="innerComboStyle" onChange="newAssign(<?php echo $each->getId() ?>);" >
                <!-- <options here... -->
          </select>
    <div id="<?php echo $each->getId() ?>" ></div>
    <?php endforeach; ?> 
```

我在萤火虫控制台中没有错误，但追加仍然无效！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T08:11:16.827

您在call`'`的参数周围缺少引号（） ：`newAssign`

```
onChange="newAssign('<?php echo $each->getId() ?>')" 
```

除非`getId()`是数字或字符串`this`，否则不放`'`将不起作用，因为 javascript 会认为您正在传递变量名。即使它确实有效，它也可能不是你想要的。

您可以改为这样做`$('#' + divId).append(...)`，它更容易查看而不是使用`id=`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:11:37.963

您需要在调用中的 id 周围加上撇号，否则它将被解释为变量名：

```
<select name="weekday" class="innerComboStyle" onChange="newAssign('<?php echo $each->getId() ?>');" > 
```

* * *

通常一个 id 在页面中是唯一的，我想你不使用不在 div 上的 id，所以你可以只在选择器中使用 id：

```
$("#"+divID).append("<p> hello! </p>"); 
```

# ios - Monotouch 更新到 5.2.13 后应用程序崩溃

> ID：11965940
> 
> 赞同：0
> 
> 时间：2012-08-15T08:08:59.967
> 
> 标签：ios, xamarin.ios, xamarin

在我将 monotouch 更新到版本 5.2.13 后，当我在`UIButton`.

关于我的代码：（这是一个登录视图的问题）：

我有一个`UIViewController`包含 ScrollView。ScrollView 为每个用户提供一个`UIView`（UserImageView）。这个 UserImageView 包含一个 UserImage、Username 等。在 UserImage 上放置一个 UIButton，它应该捕获触摸事件以选择用户。此 Button 更准确地导致下面的异常`HitTest`来自`UIView`.

我得到以下堆栈跟踪：

堆栈跟踪：

```
 at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication.UIApplicationMain (int,string[],intptr,intptr) <IL 0x0009f, 0xffffffff>
  at MonoTouch.UIKit.UIApplication.Main (string[],string,string) [0x00042] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:29
  at MF.Stationaer.iPad.Application.Main (string[]) <IL 0x00028, 0x00073>
  at (wrapper runtime-invoke) <Module>.runtime_invoke_void_object (object,intptr,intptr,intptr) <IL 0x00050, 0xffffffff> 
```

本机堆栈跟踪：

```
0   MFiPad_MD            0x0009061c mono_handle_native_sigsegv + 284
1   MFiPad_MD            0x000059a8 mono_sigsegv_signal_handler + 248
2   libsystem_c.dylib                   0x92cd259b _sigtramp + 43
3   ???                                 0xffffffff 0x0 + 4294967295
4   UIKit                               0x0228c741 __38-[UIView(Geometry) hitTest:withEvent:]_block_invoke_0 + 96
5   CoreFoundation                      0x0116cf1a __NSArrayChunkIterate + 362
6   CoreFoundation                      0x01138635 __NSArrayEnumerate + 997
7   CoreFoundation                      0x01138026 -[NSArray enumerateObjectsWithOptions:usingBlock:] + 102
8   UIKit                               0x0228c66b -[UIView(Geometry) hitTest:withEvent:] + 646
9   UIKit                               0x0228c765 __38-[UIView(Geometry) hitTest:withEvent:]_block_invoke_0 + 132
10  CoreFoundation                      0x0116cf1a __NSArrayChunkIterate + 362
11  CoreFoundation                      0x01138635 __NSArrayEnumerate + 997
12  CoreFoundation                      0x01138026 -[NSArray enumerateObjectsWithOptions:usingBlock:] + 102
13  UIKit                               0x0228c66b -[UIView(Geometry) hitTest:withEvent:] + 646
14  UIKit                               0x022a1157 -[UIScrollView hitTest:withEvent:] + 79
15  UIKit                               0x0228c765 __38-[UIView(Geometry) hitTest:withEvent:]_block_invoke_0 + 132
16  CoreFoundation                      0x0116cf1a __NSArrayChunkIterate + 362
17  CoreFoundation                      0x01138635 __NSArrayEnumerate + 997
18  CoreFoundation                      0x01138026 -[NSArray enumerateObjectsWithOptions:usingBlock:] + 102
19  UIKit                               0x0228c66b -[UIView(Geometry) hitTest:withEvent:] + 646
20  UIKit                               0x0228c765 __38-[UIView(Geometry) hitTest:withEvent:]_block_invoke_0 + 132
21  CoreFoundation                      0x0116cf1a __NSArrayChunkIterate + 362
22  CoreFoundation                      0x01138635 __NSArrayEnumerate + 997
23  CoreFoundation                      0x01138026 -[NSArray enumerateObjectsWithOptions:usingBlock:] + 102
24  UIKit                               0x0228c66b -[UIView(Geometry) hitTest:withEvent:] + 646
25  UIKit                               0x0228c765 __38-[UIView(Geometry) hitTest:withEvent:]_block_invoke_0 + 132
26  CoreFoundation                      0x0116cf1a __NSArrayChunkIterate + 362
27  CoreFoundation                      0x01138635 __NSArrayEnumerate + 997
28  CoreFoundation                      0x01138026 -[NSArray enumerateObjectsWithOptions:usingBlock:] + 102
29  UIKit                               0x0228c66b -[UIView(Geometry) hitTest:withEvent:] + 646
30  UIKit                               0x02286dbd +[UIWindow _hitTestToPoint:pathIndex:forEvent:] + 378
31  UIKit                               0x02258ca0 _UIApplicationHandleEvent + 1648
32  GraphicsServices                    0x047c5ef5 PurpleEventCallback + 1274
33  CoreFoundation                      0x011a9195 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
34  CoreFoundation                      0x0110dff2 __CFRunLoopDoSource1 + 146
35  CoreFoundation                      0x0110c8da __CFRunLoopRun + 2218
36  CoreFoundation                      0x0110bd84 CFRunLoopRunSpecific + 212
37  CoreFoundation                      0x0110bc9b CFRunLoopRunInMode + 123
38  GraphicsServices                    0x047c47d8 GSEventRunModal + 190
39  GraphicsServices                    0x047c488a GSEventRun + 103
40  UIKit                               0x02258626 UIApplicationMain + 1163
41  ???                                 0x0b96e514 0x0 + 194438420
42  ???                                 0x0b96d6c0 0x0 + 194434752
43  ???                                 0x0b96d33c 0x0 + 194433852
44  ???                                 0x0b96d42f 0x0 + 194434095
45  MFiPad_MD            0x00009d12 mono_jit_runtime_invoke + 722
46  MFiPad_MD            0x00169e4e mono_runtime_invoke + 126
47  MFiPad_MD            0x0016df34 mono_runtime_exec_main + 420
48  MFiPad_MD            0x001732e5 mono_runtime_run_main + 725
49  MFiPad_MD            0x00066f15 mono_jit_exec + 149
50  MFiPad_MD            0x002115d5 main + 2837
51  MFiPad_MD            0x00002d65 start + 53 
```

执行本机代码时获得**SIGSEGV 。**这通常表示单声道运行时或您的应用程序使用的本机库之一中存在致命错误。

这是我的代码的重要部分：

```
public class LoginViewController : UIViewController
{
    ... 
    public override void ViewDidLoad()
    {
        ...

        BuildUserUI();

        ...
    }

    private void BuildUserUI()
    {
        currentIconLocation = new PointF(50, 10);

        for (var i = 0; i < UserList.List.Count; i++)
            CreateUserInGrid(UserList.GetUserByIndex(i));
    }

    private void CreateUserInGrid(LoginUser user)
    {
        var imgFrame = new RectangleF(currentIconLocation.X, currentIconLocation.Y, 140, 170);

        var loginImg = new UILoginImage(imgFrame);
        loginImg.Image = user.Image ?? defaultUserImage.CGImage;
        loginImg.Name = user.Nachname;

        if (!string.IsNullOrEmpty(user.Vorname))
            loginImg.Name += ", " + user.Vorname;

        loginImg.Tag = user.UserIndex;
        loginImg.AddTarget(this, new Selector("ShowNumberPad:"), UIControlEvent.TouchUpInside);
        loginImg.LoginUser = user;
        scrollView.AddSubview(loginImg);
        loginImages.Add(loginImg);

        limitedScrollView.UserInteractionEnabled = false;

        var newSize = new SizeF(scrollView.Frame.Size.Width, currentIconLocation.Y + imgFrame.Size.Height + 20);
        scrollView.ContentSize = newSize;
        limitedScrollView.ContentSize = new SizeF(limitedScrollView.Frame.Size.Width, limitedScrollView.Frame.Size.Height);

        currentIconLocation.X += imgFrame.Size.Width;

        if (currentIconLocation.X + imgFrame.Size.Width > scrollView.Frame.Size.Width)
        {
            currentIconLocation.Y += imgFrame.Size.Height;
            currentIconLocation.X = 50;
        }
    }

    [Export("ShowNumberPad:")]
    private void ShowNumberPad(NSObject sender)
    {
        ...
    }
}

public class UILoginImage : UIView
{
    [Export("initWithFrame:")]
    public UILoginImage(RectangleF frame)
        : base(frame)
    {
        var shadowFrame = new RectangleF(0, 0, 117, 148);

        wrapperControl = new UIControl(shadowFrame);
        AddSubview(wrapperControl);

        shadowImage = new UIImageView(shadowFrame);
        shadowImage.Image = ImageCache.GetResourceImage("Images/Login/LoginSchatten.png");
        wrapperControl.AddSubview(shadowImage);

        var mainBackFrame = new RectangleF(8, 9, 98, 128);
        whiteBackgroundImage = new UIImageView(mainBackFrame);
        whiteBackgroundImage.Image = ImageCache.GetResourceImage("Images/Login/Singlewhite.png");
        wrapperControl.AddSubview(whiteBackgroundImage);

        var imageFrame = new RectangleF(13, 15, 87, 116);

        clickHelper = UIButton.FromType(UIButtonType.Custom);
        clickHelper.Frame = imageFrame;
        wrapperControl.AddSubview(clickHelper);

        userImage = new UIImageView(imageFrame);
        AddSubview(userImage);

        var mitarbeiterlabelFrame = new RectangleF(-12, 137, 140, 25);
        mitarbeiterNameLabel = new FontSizeLabel(mitarbeiterlabelFrame);
        mitarbeiterNameLabel.TextAlignment = UITextAlignment.Center;
        mitarbeiterNameLabel.Font = UIFont.SystemFontOfSize(12);
        mitarbeiterNameLabel.Opaque = false;
        mitarbeiterNameLabel.BackgroundColor = UIColor.Clear;
        AddSubview(mitarbeiterNameLabel);

        var benutzerlabelFrame = new RectangleF(mitarbeiterlabelFrame.X, mitarbeiterlabelFrame.Y + 13, 140, 25);
        benutzerNameLabel = new FontSizeLabel(benutzerlabelFrame);
        benutzerNameLabel.TextAlignment = UITextAlignment.Center;
        benutzerNameLabel.Font = UIFont.SystemFontOfSize(10);
        benutzerNameLabel.Opaque = false;
        benutzerNameLabel.BackgroundColor = UIColor.Clear;
        benutzerNameLabel.TextColor = UIColor.DarkGray;
        AddSubview(benutzerNameLabel);
    }

    public void AddTarget(NSObject target, Selector action, UIControlEvent controlEvents)
    {
        clickHelper.AddTarget(target, action, controlEvents);
    }

    public void RemoveTarget(NSObject target, Selector action, UIControlEvent controlEvents)
    {
        clickHelper.RemoveTarget(target, action, controlEvents);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:33:57.850

我不确定您使用`AddTarget`是连接 a`UIButton`的点击的好方法。

您应该`clickHelper.TouchUpInside`用来连接点击事件。这是一个标准的 C# 事件。

另一种选择是在 XCode 中的 XIB 文件中将操作连接到此事件。

# .net - 为什么 Clrver 显然没有显示所有 CLR 进程

> ID：11965941
> 
> 赞同：0
> 
> 时间：2012-08-14T16:41:30.077
> 
> 标签：.net, visual-studio, process

根据[MSDN](http://msdn.microsoft.com/en-us/library/ff427522.aspx)，如果您使用 clrver.exe 工具，它将显示计算机上使用 CLR 的所有进程

```
clrver -all 
```

但是当我运行它时，它不会显示我编写的 .Net 应用程序。我的应用程序必须使用 CLR 运行，所以它不在列表中似乎很奇怪。

你知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T12:36:55.997

这无疑是版本问题。键入`where clrver.exe`以查看您使用的是哪一个，它应该显示一两个，存储在 Windows SDK 目录中。当您获得`Bin\NETFX 4.0 Tools`一个版本时，您将拥有一个可以检测运行 CLR 版本 2 和 CLR 版本 4 的进程的版本。

但是，当您使用`Bin`.NET 或仅安装旧版本的 SDK（6.0 或更早版本）时，您将运行一个对 .NET 4 及更高版本一无所知的 clrver.exe 版本。因此，您只会看到运行 CLR 版本 2 的进程。

您需要 clrver.exe 的版本检查器。有点讽刺，不是吗；）

# objective-c - 在 splitviewController 中获取控制器引用

> ID：11965942
> 
> 赞同：0
> 
> 时间：2012-08-15T08:09:16.470
> 
> 标签：objective-c, xcode, pointers, reference, uisplitviewcontroller

我有一个应用程序，我需要能够从主控制器获取对详细控制器的引用，我还不知道如何使用应用程序委托文件。在我使用之前

```
 [self.splitViewController.viewControllers lastObject] 
```

它将我的详细控制器作为最后一个对象，然后我嵌入了一个导航控制器，现在 lastObject 是一个导航控制器，而不是我也需要参考的控制器。我现在如何获得对我的控制器的引用？反正有没有让 splitviewcontroller 沿着它查看的控制器线走下去？它加载了正确的控制器，但是当我调用上述方法时，它说导航控制器。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T08:51:57.760

You can access the view controllers in a navigation controller in the same way as a split view controller. The first object in the navigation controllers view controllers will be your root view controller.

```
[[[self.splitViewController.viewControllers lastObject] viewControllers] objectAtIndex:0] 
```

# jquery - jquery ui modal dialog - 提交按钮如何提交并返回模态MVC3

> ID：11965943
> 
> 赞同：0
> 
> 时间：2012-08-15T08:09:31.343
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui, http-post

我有一个快速编辑 jquery 对话框，允许我的用户更改一些客户详细信息。表单很棒，但是在表单提交后，我无法弄清楚如何关闭模式对话框并返回到仍然在后台的视图。

我在 quickedit 上的 http 帖子执行所有数据库更新等，但目前只返回 quickedit 表单的部分视图。我需要它来关闭模式并返回到调用对话框的页面（不重新加载它......），或者如果不可能的话，只是返回到模式对话框。

这是我的 http 邮政编码：

```
 [HttpPost, ActionName("QuickEdit")]
    public ActionResult QuickEdit(newUser usrdet)
    {
        db.Entry(usrdet).State = EntityState.Modified;
        db.SaveChanges();
        return PartialView(usrdet);
    } 
```

代码原样返回更新的对象，但不在 jquery UI 模式中。

非常感谢任何帮助。

调用 ui 的 Javascript：

```
<script type="text/javascript">
$.ajaxSetup({ cache: false });

$(document).ready(function () {
    $(".openDialog").live("click", function (e) {
        e.preventDefault();
        $("<div></div>")
  .addClass("dialog")
  .attr("id", $(this).attr("dialog-id"))
  .appendTo("body")
  .dialog({
      title: $(this).attr("dialog-title"),
      close: function () { $(this).remove() },
      modal: true,
      width: 706,
      height: 600
  })
  .load(this.href);
    });

    $(".close").live("click", function (e) {
        e.preventDefault();
        $(this).closest(".dialog").dialog("close");
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:27:41.647

如果数据有效并且您可以保存编辑，我将返回一个新的部分视图，其中仅包含一些 javascript 代码来关闭对话框，如下所示：

```
[HttpPost, ActionName("QuickEdit")]
public ActionResult QuickEdit(newUser usrdet)
{
    if (ModelState.IsValid) {
        db.Entry(usrdet).State = EntityState.Modified;
        db.SaveChanges();
        return PartialView("CloseDialog");
    }
    return PartialView(usrdet);
} 
```

和局部视图CloseDialog：

```
<script type="text/javascript">
    $(".dialog").dialog("close");
</script> 
```

`dialog`您可以自定义操作/视图以传递对话框 html 元素的 id，或者像我的示例中那样仅依赖 css 类。

# scala - Play 中多个标题的确切语法！2.0 WS 请求？

> ID：11965951
> 
> 赞同：2
> 
> 时间：2012-08-15T08:10:07.283
> 
> 标签：scala, playframework-2.0

尝试向 Scala Play 添加多个标题！WS 请求：

```
WS
.url(requestUri)
.withHeaders("Authorization" -> ("Oauth %s" format(cred.authorizedToken)),
    "Content-Type" -> "application/json")
.post(httpBody.get) 
```

然而，它目前正在失败。什么是正确的语法？我尝试了多种方法，但编译器抱怨 java 字符串。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T16:23:02.367

根据[文档，您的方法似乎有效](http://www.playframework.org/documentation/2.0.2/ScalaResults)

```
Ok("Hello World!").withHeaders(
  CACHE_CONTROL -> "max-age=3600", 
  ETAG -> "xx"
) 
```

方法定义也验证了您的代码：

```
def withHeaders(hdrs: (String, String)*)
// Parameters are infinite couples of String 
```

# java - 尝试访问 dao bean 时注入自动装配的依赖项失败

> ID：11965955
> 
> 赞同：1
> 
> 时间：2012-08-15T08:10:27.683
> 
> 标签：java, spring, hibernate, tomcat, web-applications

访问网页时出现错误。这是我的代码 -

web.xml 文件 -

```
 <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
</web-app> 
```

名称为“dispatcher-servlet.xml”的调度程序 servlet

```
 <context:annotation-config />
    <context:component-scan base-package="com.webProject.controller"></context:component-scan>
    <!-- <context:component-scan base-package="com.webProject">
        <context:include-filter type="aspectj" expression="com.webProject.*" />
    </context:component-scan>
    -->

    <bean id="jspViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />
    </bean>

    <bean id="mysqlDataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/school" />
        <property name="username" value="root" />
        <property name="password" value="test" />
    </bean>
    <bean id="mySessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="mysqlDataSource" />
        <property name="annotatedClasses">
            <list>
                <value>com.webProject.model.Student</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect"> org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">create</prop>
                <prop key="javax.persistence.validation.mode">none</prop>
                <prop key="connection.autocommit">true</prop>
            </props>
        </property>
    </bean>
    <bean id="hibernateTemplate" class="org.springframework.orm.hibernate3.HibernateTemplate">
        <property name="sessionFactory" ref="mySessionFactory" />
    </bean>
    <!-- <bean id="studentDao" class="com.webProject.dao.StudentDaoImpl"></bean>-->

</beans> 
```

学生控制器类 -

```
package com.webProject.controller;

@Controller
@RequestMapping("/Student")

public class StudentController {
@Autowired
private IStudentDao studentDao;
//List<Student> students;

/*public StudentController() {
    students = new ArrayList<Student>();
}*/

public IStudentDao getStudentDao() {
    return studentDao;
}

public void setStudentDao(IStudentDao studentDao) {
    this.studentDao = studentDao;
}

@RequestMapping(value="details/{number}",method=RequestMethod.GET)
public String studentDetails(@PathVariable("number") int studentNumber, Model model){
    //Student student = this.students.get(studentNumber);
    Student student = (Student) getStudentDao().load(new Long(studentNumber));
    model.addAttribute("student",student);
    model.addAttribute("studentNumber", Integer.toString(studentNumber));
    return "studentDetails";

}

@RequestMapping(value="addStudent", method=RequestMethod.POST)
public String addStudent(@ModelAttribute("student") Student student, Model model){

    if(student != null){
        getStudentDao().save(student);
        //this.students.add(student);
        model.addAttribute("student", student);
        model.addAttribute("studentNumber", Integer.toString(getStudentDao().count()));
        return "studentAddSuccess";
    }else{
        throw new NullPointerException();
    }   
}

@RequestMapping(value="studentRegistration")
public String sendStudentForm(Model model){

    Student student = new Student();
    model.addAttribute("student", student);

    return "studentForm";
}

@RequestMapping(value="delete/{studentNumber}")
public String deleteStudent(@PathVariable("studentNumber") int studentNumber, Model model){

    Student student = (Student) getStudentDao().load(new Long(studentNumber));
    model.addAttribute("std", student);
    getStudentDao().deleteById(new Long(studentNumber));
    return "deleteStudent";

}

} 
```

学生表格.jsp

```
 <body>
    <form:form method="post" modelAttribute="student" action="addStudent">

<table>

    <tr>
        <td>Student Name</td>
        <td>form:input path="studentName"</td>          
    </tr>
    <tr>
        <td>Department</td>
        <td>form:input path="department"</td>
    </tr>
    <tr>
        <td>College</td>
        <td>form:input path="collegeName"</td>
    </tr>
    <tr>
        <td colspan="3"><input type="submit" /></td>
    </tr>

</table>

   </form:form>

</body> 
```

当我提到 - 这我得到一个错误为“找不到资源”。所以我试着把我所有的包裹都包括在内——

```
 <context:component-scan base-package="com.webProject.controller"></context:component-scan>
<context:component-scan base-package="com.webProject.dao"></context:component-scan>
<context:component-scan base-package="com.webProject.model"></context:component-scan> but then also i get same "resource not found" error. i tried another way as mentioned in another thread - http://stackoverflow.com/questions/7914363/injection-of-autowired-dependencies-failed
<context:component-scan base-package="com.webProject">
     <context:include-filter type="aspectj" expression="com.webProject.*" />
</context:component-scan> 
```

但结果也相同 - “找不到资源”。

所以只有当我给这个base-package =“com.webProject.controller”时，我才不会得到“资源未找到错误”，但它会得到另一个错误 -

org.springframework.beans.factory.BeanCreationException：创建名为“studentController”的bean时出错：注入自动装配的依赖项失败；

嵌套异常是 org.springframework.beans.factory.BeanCreationException：无法自动装配字段：私有 com.webProject.dao.IStudentDao

com.webProject.controller.StudentController.studentDao；嵌套异常是 org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching

为依赖项找到类型为 [com.webProject.dao.ISudentDao] 的 bean：预计至少有 1 个 bean 符合此依赖项的自动装配候选条件。

依赖注解：{@org.springframework.beans.factory.annotation.Autowired(required=true)}

然后我尝试将 studentDao 注入为 ，然后我也收到错误消息。

我正在使用 Tomcat 来部署这个工件。并使用 Maven 来构建这个项目。我不确定 spring+hibernate+maven 项目在 tomcat 中是如何工作的？

我最近开始使用 spring 和 hibernate 进行编程，这是我使用这些技术的第一个项目。所以如果我犯了一些基本的错误，请原谅我。

你能帮我解决一下吗？

学生道——

```
package com.webProject.dao;

import java.util.List;

import org.hibernate.HibernateException;
import org.hibernate.Session;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.orm.hibernate3.HibernateCallback;
import org.springframework.orm.hibernate3.HibernateTemplate;

import com.webProject.model.*;

public abstract class AbstractHibernateDAOImpl implements AbstractDao {

    @Autowired
    private HibernateTemplate hibernateTemplate;

    public HibernateTemplate getHibernateTemplate() {
        return hibernateTemplate;
    }

    public void setHibernateTemplate(HibernateTemplate hibernateTemplate) {
        this.hibernateTemplate = hibernateTemplate;
    }

    protected Class domainClass = getDomainClass();

    /**
     * Method to return the class of the domain object
     */
    protected abstract Class getDomainClass();

    @SuppressWarnings("unchecked")
    public PersistentObject load(Long id) {
        return (PersistentObject) getHibernateTemplate().load(domainClass, id);
    }

    public void update(PersistentObject t) {
        getHibernateTemplate().update(t);
    }

    public void save(PersistentObject t) {
        getHibernateTemplate().save(t);
    }

    public void delete(PersistentObject t) {
        getHibernateTemplate().delete(t);
    }

    @SuppressWarnings("unchecked")
    public List<PersistentObject> getList() {
        return (getHibernateTemplate().find("from " + domainClass.getName()
                + " x"));
    }

    public void deleteById(Long id) {
        Object obj = load(id);
        getHibernateTemplate().delete(obj);
    }

    @SuppressWarnings("unchecked")
    public void deleteAll() {
        getHibernateTemplate().execute(new HibernateCallback() {
            public Object doInHibernate(Session session)
                    throws HibernateException {
                String hqlDelete = "delete " + domainClass.getName();
                int deletedEntities = session.createQuery(hqlDelete)
                        .executeUpdate();
                return null;
            }

        });
    }

    public int count() {
        List list = getHibernateTemplate().find(
                "select count(*) from " + domainClass.getName() + " x");
        Integer count = (Integer) list.get(0);
        return count.intValue();
    }

} 
```

学生道界面——

```
package com.webProject.dao;

public interface IStudentDao extends AbstractDao{

} 
```

学生道实施——

```
package com.webProject.dao;

import org.springframework.stereotype.Repository;

import com.webProject.model.Student;

@Repository ("studentDao")
public class StudentDaoImpl extends AbstractHibernateDAOImpl implements IStudentDao{

    @Override
    protected Class getDomainClass() {
        return Student.class;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T08:18:51.660

如果您的 DAO 类与控制器类放在不同的包中，那么您应该更改组件扫描元素：

```
<context:component-scan base-package="com.webProject"> 
```

还要检查您是否使用@Repository（或@Component）注释对您的DAO 类进行了注释。

# javascript - 让两个 jquery 脚本像他们应该的那样一起工作

> ID：11965959
> 
> 赞同：-2
> 
> 时间：2012-08-15T08:10:44.177
> 
> 标签：javascript, jquery

为了上帝的爱，我需要帮助！我试图让 Caroufredsel 和 fancybox 像他们在这里一样一起工作：

[http://caroufredsel.frebsite.nl/examples/carousel-lightbox-tooltip.php](http://caroufredsel.frebsite.nl/examples/carousel-lightbox-tooltip.php)

...但我只能让他们独立工作。我真的不知道javascript所以我失败了:(

这是我尝试实现它的地方：

[http://www.meanbeangames.com/](http://www.meanbeangames.com/)

目前只有 Caroufredsel 正在工作。如果我删除所有 Caroufredsel 代码，Fancybox 就可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T08:18:03.773

您`jQuery`在第 15 行和第 189 行（查看源代码）两次引用库，这导致对`fancybox`之前添加的插件的所有引用都丢失了（因为`jQuery`变量在您第二次包含时重新定义`jQuery`）。去除

`<script type="text/javascript" src="js/jquery.js"></script>`

在第 189 行，你应该被设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T08:21:08.530

**首先**：

您正在加载 jQuery（Javascript 库）两次。一次在您的`<head>`部分 ( `<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>`) 中，一次在您的结束`</body>`标记 ( `<script type="text/javascript" src="js/jquery.js"></script>`) 之前。删除最后一个并将第一个更新为最新版本的 jQuery，如下所示：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script> 
```

**第二**：

给你的脚本提供更好的结构可能会更好：或者你把它们全部加载到你的脑海中，或者在结束`</body>`标记之前加载它们。这样，您就不会查看您不希望它们出现的地方的脚本。最佳实践通常被称为在结束`</body>`标记之前包含所有脚本。不要忘记在所有其他脚本*之前加载 jQuery！*在您的情况下，它看起来像这样：

```
<footer>...</footer>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery.carouFredSel.js"></script>
<script type="text/javascript" src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $("#foo2").carouFredSel({
        circular: true,
        infinite: false,
        auto: false,
        prev: {
            button: "#foo2_prev",
            key: "left"
        },
        next: {
            button: "#foo2_next",
            key: "right"
        },
        pagination: "#foo2_pag"
    });
    $('.fancybox').fancybox();
});
</script> 
```

# android - Android 自定义 EditText 和后退按钮覆盖

> ID：11965961
> 
> 赞同：5
> 
> 时间：2012-08-15T08:10:50.273
> 
> 标签：android, overriding

我想在显示软键盘时覆盖后退按钮。基本上，当按下后退按钮时，我希望键盘关闭，并且我想将一些文本附加到用户在该编辑文本字段中键入的任何内容上。所以基本上我需要知道键盘何时被关闭。搜索后，我意识到没有用于此的 API，唯一真正的方法是创建您的 EditText 类。

所以我创建了自己的 EditText 类并像这样扩展了 EditText

```
public class CustomEditText extends EditText
{

    public CustomEditText(Context context)
    {
        super(context);
        init();
    }

    public CustomEditText(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        init();
    }

    public CustomEditText(Context context, AttributeSet attrs, int defStyle)
    {
        super(context, attrs, defStyle);
        init();
    }

    private void init()
    {

    }

} 
```

我也添加了这个方法

```
 @Override
        public boolean dispatchKeyEventPreIme(KeyEvent event)
        {
            if (KeyEvent.KEYCODE_BACK == event.getKeyCode())
            {
                Log.v("", "Back Pressed");

                            //Want to call this method which will append text
                            //init();
            }
            return super.dispatchKeyEventPreIme(event);
        } 
```

现在这个方法确实覆盖了后退按钮，它关闭了键盘，但我不知道如何将文本传递到 EditText 字段。有谁知道我会怎么做？

还有一个小问题，有谁知道为什么这个方法被调用了两次？正如您暂时看到的那样，我添加了一条快速 logcat 消息来测试它是否有效，但是当我点击后退按钮时，它会打印两次，有什么理由这样做吗？

任何帮助将非常感激！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T08:28:17.743

[这是由于在ACTION_DOWN](http://developer.android.com/reference/android/view/KeyEvent.html#ACTION_DOWN)和[ACTION_UP](http://developer.android.com/reference/android/view/KeyEvent.html#ACTION_UP)上都调用了dispatchKeyEventPreIme 。
只有按下 KEY 时，您才需要处理。所以使用

`if(event.getAction () == KeyEvent.ACTION_DOWN)`

编辑：对于第一个问题你可以做

```
setText(getText().toString() + " whatever you want to append"); 
```

在`dispatchKeyEventPreIme`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T08:31:13.433

为什么两次？可能在按下和向上事件时调用该方法。

# javascript - 使用 AJAX 动态持续加载内容

> ID：11965966
> 
> 赞同：1
> 
> 时间：2012-08-15T08:11:07.957
> 
> 标签：javascript, mysql, ajax

我想要实现的是与大多数大型页面在要显示大量内容时所做的类似的事情，但您只想显示其中的一小部分，然后继续加载更多内容（例如来自 Facebook 的提要，它只加载前 20 个项目，向下滚动后加载接下来的 10 个左右）。在我看来，有两种方法浮现在脑海中（使用 PHP MySQL AJAX 组合）

1.  AJAX 请求，查找所有结果，返回数据，在 javascript 中使用数据并处理逻辑。
2.  AJAX请求，查找所有结果限制为少数，返回数据，用户想要更多数据，AJAX请求，查找所有结果限制区间[few,few+few]。

也许需要澄清一下，我想通过请求获得的数据并不是很大，我只是认为在用户完成的 AJAX 请求时减少查询数量总是一个好主意。

这两种方法看起来都不是很漂亮，我相信会有一个更优雅的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T08:17:45.067

我真的想不出任何其他选择，实际上你的第二个选择是很多网站如何处理这类事情。这完全取决于“大量内容”中有多少数据。

最简单的选项（恕我直言）是您的第一个选项，但是很明显，您拥有与 facebook 一样多的数据，只是无法获取和存储所有数据（想象一下页面加载时间！）。

但毕竟这些只是两种选择：一次全部获取，或者根据需要按位获取。

# authentication - Bugzilla 重置为数据库验证

> ID：11965970
> 
> 赞同：1
> 
> 时间：2012-08-15T08:11:30.493
> 
> 标签：authentication, admin, bugzilla

我最近在服务器上安装了 Bugzilla，并尝试将其配置为使用 LDAP 身份验证。

不幸的是，我不小心在管理部分的参数区域禁用了数据库身份验证，并且 LDAP 设置没有正确配置。

现在我无法以管理员身份重新登录，也无法通过 ldap 登录，因为设置不正确。

我无法弄清楚在哪里可以直接在数据库或某些配置文件中手动恢复 bugzilla 的数据库身份验证。

感谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T19:51:43.410

查看配置文件 /data/params

您将看到一个名为 user_verify_class 的条目，将其更改为“DB”，您应该能够再次登录。

# java - 如何将 Java Date 对象的值设置为昨天？

> ID：11965974
> 
> 赞同：6
> 
> 时间：2012-08-15T08:11:43.473
> 
> 标签：java

> **可能重复：**
> [使用 Date 获取昨天的日期](https://stackoverflow.com/questions/11425236/get-yesterdays-date-using-date)

将 Java Date 对象的值设置为昨天的优雅方式是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-15T08:15:17.033

你的意思是回到24小时的时间。

```
 Date date = new Date(System.currentTimeMillis() - 24 * 60 * 60 * 1000L); 
```

或在同一时间返回某一天（这可以是 23 或 25 小时，具体取决于夏令时）

```
 Calendar cal = Calendar.getInstance();
 cal.add(Calendar.DATE, -1); 
```

由于夏令时，这些并不完全相同。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-15T08:15:29.890

与[乔达时间](http://joda-time.sourceforge.net/)

```
 LocalDate today = LocalDate.now();
    LocalDate yesterday = today.minus(Period.days(1));

    System.out.printf("Today is : %s, Yesterday : %s", today.toString("yyyy-MM-dd"), yesterday.toString("yyyy-MM-dd")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T08:13:39.917

将 转换`Date`为`Calendar`对象并将其“回滚”一天。像这个辅助方法这样的东西取自[这里](https://stackoverflow.com/a/212353/193906)：

```
public static void addDays(Date d, int days)
{
    Calendar c = Calendar.getInstance();
    c.setTime(d);
    c.add(Calendar.DATE, days);
    d.setTime(c.getTime().getTime());
} 
```

对于您的具体情况，只需传入`days`as即可`-1`。如果进行广泛的日期特定操作，请确保您考虑时区/语言环境。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T08:15:35.793

您可以尝试以下示例将其设置为上一个日期。

```
Calendar cal = Calendar.getInstance();
DateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy");
System.out.println("Today's date is " +dateFormat.format(cal.getTime()));    
cal.add(Calendar.DATE, -1);  
System.out.println("Yesterday's date was "+dateFormat.format(cal.getTime())); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T08:21:24.237

```
you can try the follwing code:
Calendar cal = Calendar.getInstance();
DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
System.out.println("Today's date is "+dateFormat.format(cal.getTime()));

cal.add(Calendar.DATE, -1);
System.out.println("Yesterday's date was "+dateFormat.format(cal.getTime())); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T08:37:33.817

正如许多人已经说过的那样，使用日历而不是日期。

如果你发现你真的想使用日期：

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.HOUR, -24);
cal.getTime();//returns a Date object

Calendar cal1 = Calendar.getInstance();
cal1.add(Calendar.DAY_OF_MONTH, -1);
cal1.getTime();//returns a Date object 
```

我希望这有帮助。 [汤姆雷德](http://www.tomred.net)

# c# - 不同类型的样本值

> ID：11965975
> 
> 赞同：-3
> 
> 时间：2012-08-15T08:11:54.807
> 
> 标签：c#, linq, entity-framework, .net-4.0

代码有效：

```
var reports = repository.GetAll().ToList().
    Where(r => r.Documents.
                 Where(d => d.Reports.
                              Where(rw => rw.ID == reportID).Any()).Any()).
    ToList<IDocumentObjects>(); 
```

但是我不想用 ToList 这个代码调用一个错误：

```
var reports = repository.GetAll().
     Where(r => r.Documents.
                   Where(d => d.Reports.
                                 Where(rw => rw.ID == reportID).Any()).Any()).
     ToList<IDocumentObjects>(); 
```

错误：

> 成员访问'System.Collections.Generic.IList `1[IReport] Reports' of 'IDocument' not legal on type 'System.Collections.Generic.IList`1[IDocument]。

**问题：**如何在 GetAll() 中不使用 ToList 创建此请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:02:56.063

您的导航属性使用接口而不是实体类型（例外提及`IReport`和`IDocument`）。将其更改为实现并重试。EF 不支持接口。

# rich-snippets - div 类的丰富片段

> ID：11965977
> 
> 赞同：0
> 
> 时间：2012-08-15T08:12:06.770
> 
> 标签：rich-snippets

如果我有一个 div 类，即：`<div class="wrap">content</div><div class="definition"></div>` 你如何包含丰富的片段。我知道应该是这样，`<div itemscope ect.`但是如果您有该类的名称而不是单个名称怎么办

# c# - 我应该使用包含 TransactionScope 的 IDisposable 类的 finalize 方法吗？

> ID：11965979
> 
> 赞同：3
> 
> 时间：2012-08-15T08:12:12.543
> 
> 标签：c#, linq-to-sql, datacontext, idisposable, transactionscope

我编写了一个将 a`TransactionScope`与 Linq to Sql配对的类`DataContext`。

它实现了与 , 相同的方法`TransactionScope`，`Dispose()`并且`Complete()`公开了 DataContext。

其目的是确保 DataContexts 不会被重复使用，它们与单个事务配对并与它一起被处置。

我应该在类中包含一个 Finalize 方法吗？如果尚未调用 Dispose，则调用它？还是仅适用于引用非托管资源的 IDisposables？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T08:34:10.130

终结器仅用于清理非托管资源。在终结器中调用依赖对象的处置是没有用的，因为如果这些对象管理关键资源，它们本身就有终结器。

在 .NET 2.0 及更高版本中，实现终结器的理由更少，没有 .NET 包含[SafeHandle](http://blogs.msdn.com/b/bclteam/archive/2005/03/15/396335.aspx)类。

然而，我有时会发现仍然实现终结器的一个原因是要找出开发人员是否忘记调用 Dispose。我让这个类只在调试构建中实现终结器，并让它写入调试窗口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T09:56:21.860

不，**永远**不要在一次性类中实现终结器，因为它包装了一次性类。

假设您有一个带有终结器的类的三个清理场景`Dispose`：

1.  `Dispose()`叫做。
2.  在应用程序关闭时调用终结器。
3.  该对象将被收集，但终结器没有被抑制（通常来自对 的调用`Dispose()`，但请注意，当任何事情使其处于不需要清理的状态时，您应该始终抑制终结器, 并在它处于确实需要它的状态时重新注册 - 例如，如果你有`Open()`/`Close()`对方法）。

现在，如果您直接管理非托管资源（例如，通过 的句柄`IntPtr`），这三个场景中您将直接调用两个清理方法之一，这与您需要进行清理的三个场景相匹配。

好的。所以，让我们考虑一个一次性包装一次性用品，其中“外部”类有一个正确实现的终结器：

```
~MyClass()
{
  // This space deliberately left blank.
} 
```

finaliser 不做任何事情，因为没有非托管清理可供它处理。唯一的效果是，如果这个 null 终结器没有被抑制，那么在垃圾回收时，它将被放入终结器队列 - 保持它以及只能通过它的字段访问的任何东西，并将它们提升到下一代 - 最终完成线程将调用此 nop 方法，将其标记为已完成，并再次符合垃圾回收条件。但是自从它被推广以来，如果它是 Gen 0，它将是 Gen 1，如果它是 Gen 1，它将是 Gen 2。

确实需要最终确定的实际对象也将被提升，它不仅要等待更长时间，还要等待最终确定。无论如何，它将最终出现在第 2 代。

好吧，这已经够糟糕了，假设我们实际上在终结器中放入了一些代码，这些代码对包含可终结类的字段做了一些事情。

等待。我们会做什么？我们不能直接调用finaliser，所以我们dispose它。哦等等，我们确定这个类的行为`Dispose()`和终结者的行为足够接近它是安全的吗？我们怎么知道它不会通过弱引用保留一些资源，它将尝试在 dispose 方法中而不是在 finaliser 中处理？该类的作者完全了解在终结器中处理弱引用的危险，但他们认为他们正在编写一个`Dispose()`方法，而不是其他人的终结器方法的一部分。

然后，如果在应用程序关闭期间调用了外部终结器怎么办。你怎么知道内部终结器还没有被调用？当类的作者在编写他们的`Dispose()`方法时，他们肯定会思考“好吧，现在让我们确保我处理这个在终结器已经运行之后被调用的情况，并且这个对象唯一剩下要做的就是拥有它内存释放了吗？” 并不真地。可能是他们提防反复呼吁`Dispose()`以这种方式也可以避免这种情况，但你不能真正打赌（特别是因为他们不会在终结器中提供帮助，他们知道这将是最后一个调用的方法以及任何其他类型的清理，比如将不会再次用于标记它们的空字段是没有意义的）。它最终可能会做一些事情，比如删除一些引用计数资源的引用计数，或者违反它的工作要处理的非托管代码的合同。

所以。在此类中使用终结器的最佳情况是您破坏了垃圾收集的效率，更糟糕的是您的错误会干扰您试图帮助的完美清理代码。

还要注意模式背后的逻辑 MS 用来提升（并且仍然在他们的一些类中）你有一个受保护的`Dispose(bool disposing)`方法。现在，我对这个模式有很多不好的地方要说，但是当你看到它时，它旨在处理这样一个事实，即你清理的`Dispose()`内容和你在 finaliser 中清理的内容是不一样的——该模式意味着在这两种情况下都将清除对象的直接持有的非托管资源（在您的问题的场景中，没有此类资源），并且**仅从**`IDisposable`以下位置清除托管资源（例如内部持有的对象），而不是来自终结者。**`Dispose()`**

 **`IDisposable.Dispose()`如果您有**任何**需要清理的东西，无论是非托管资源、对象`IDisposable`还是其他任何东西，请实施。

**当且仅当您直接**拥有需要清理的非托管资源时才编写终结器，并使清理它成为您在那里**唯一**要做的事情。

对于奖励积分，避免同时在两个类中 - 将所有非托管资源包装在仅处理该非托管类的一次性和可终结类中，如果您需要将该功能与其他资源组合，请在使用的一次性类中执行这样的课程。这样清理会更清晰、更简单、更不容易出现错误，并且对 GC 效率的损害更小（没有一个对象的最终确定延迟另一个对象的风险）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T08:34:55.480

这个问题没有简单的答案——这是值得商榷的。

### 什么？

争论是是否使用具有完整*Disposable*模式的终结器。您的代码使用事务和数据库上下文 - 那些人（通常）使用非托管资源（如内核事务对象和 TCP/IP 连接）

### 为什么？

如果您使用任何应该清理的非托管资源，您应该实现`IDisposable`. 然后客户端代码可以将对类的调用包装到推荐的`using(IDisposable myClass = new MyClass(){...}`构造中。问题是如果开发人员不会`IDisposable.Dispose()`显式或隐式调用，那么资源就不会自动释放。即使对象`myClass`已被 GC 收集。这是因为 GC`Dispose`在收集期间从不调用，这是完成队列的责任。

因此，您可以定义一个最终将由 GC finilisation 线程调用的 finiliser，它独立于垃圾收集。

### 意见

有些人认为，您应该确保将所有*一次性*代码放入`using (){}`其中而忘记完成。毕竟你必须尽快释放这些资源，而且整个完成过程对于许多开发人员来说有点模糊。

相比之下，我更喜欢显式实现 finilisator，只是因为我不知道谁会使用我的代码。因此，如果有人忘记在需要它的类上调用 a `Dispose`，资源最终将被释放。

### 结论

就个人而言，我建议使用任何实现`IDisposable`.**

# c# - 强制控制留在另一个人身边

> ID：11965980
> 
> 赞同：0
> 
> 时间：2012-08-15T08:12:15.290
> 
> 标签：c#, wpf

我正在为我的公司完成故障记录器。
不幸的是，并非所有人都具有相同的屏幕分辨率（范围从 800 到 1080），我需要创建可以根据窗口大小更改大小的控件。

到目前为止，我已经能够强制控件根据窗口尺寸改变它们的尺寸，但是我面临着它们在一定尺寸后重叠的挑战，如下所示：

![普通窗口](../Images/9154e0963506f84d3ac04fc4099af547.png)

![调整大小的控件](../Images/444710c9e0e1f89c7c36b760e9c0e7c3.png)

有没有办法强制 TextBox 和 GroupBox 浮动在 DataGrid 的左边，所以它会根据网格的宽度向右移动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:12:27.860

Grid columns will solve the overlap problem but you might want to consider using a GridSplitter control, for example:

```
<Grid.ColumnDefinitions>
  <ColumnDefinition/>
  <ColumnDefinition Width="Auto" />
  <ColumnDefinition/>
</Grid.ColumnDefinitions>

<GridSplitter Grid.Column="1"
          HorizontalAlignment="Center"
          VerticalAlignment="Stretch"
          Background="Black" 
          ShowsPreview="True"
          Width="5"
          /> 
```

References & useful pages:

*   ["GridSplitter Class (System.Windows.Controls)" [msdn.microsoft.com]](http://msdn.microsoft.com/en-us/library/system.windows.controls.gridsplitter.aspx)
*   [Bing Search: 'gridsplitter'](http://www.bing.com/search?q=gridsplitter&src=IE-SearchBox&FORM=IE8SRC)

# php - PHP - 使用带有关闭功能的 pcntl_fork 的问题

> ID：11965983
> 
> 赞同：0
> 
> 时间：2012-08-15T08:12:49.580
> 
> 标签：php, parallel-processing, command-line-interface

我有几个脚本运行了很长时间（6 个多小时）。它们都包含一个执行此操作的主循环，以及一个已注册的关闭函数，该函数触发了一个 mysql 查询以宣布该过程为“完成”。

我决定在这些主循环中使用 pcntl_fork() ，将每一轮作为不同的进程运行，以使整个脚本更快地完成。

它工作正常，但是，每个子进程仍然注册了关闭功能。因此，每次子进程完成时，它都会调用 mysql 查询并将脚本宣布为完成。如何为子进程禁用该关闭功能，但为父进程保持活动状态？

示例代码以了解发生了什么：

*   **常见的.php**

    ```
    register_shutdown_function('shutdown');
    function shutdown()
    {   global $objDb,$arg_id ;

           echo "\n\n Executing queue process shutdown function.";
           $objDb->query("UPDATE queue_args SET done='1' WHERE id='{$arg_id}'"); 
    } 
    ```

*   **循环.php**

    ```
    include('common.php');
    for ($i=1;$i<=200;$i++){    
           $pid = pcntl_fork(); 
           if (!$pid) {
               //child proccess - do something without calling the shutdown function
               posix_kill(getmypid(),9);
           } 
    }  exit(); //this is when the shutdown function should eventually be called 
    ```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T08:53:21.680

您可以在 if 中注册关闭功能，如下所示：

```
if ($pid) {
    if(!$registered) {
        $registered = true;
        register_shutdown_function('shutdown');
    }
}else{
    //child proccess - do something without calling the shutdown function
    posix_kill(getmypid(),9);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:54:28.333

你不能。

您可以在分叉后在子进程中设置一个标志并在关闭函数中对其进行轮询 - 如果已设置，则提前返回。或者在你 fork 之前存储父 pid，并且在关闭函数中，如果那不是当前 pid，则提前返回。或者在fork之后在父进程中注册函数。

> if (!$pid) { posix_kill(getmypid(),9); }

这是防止在子进程中调用关闭函数的非常糟糕的方法 - 但具有各种其他含义 - PHP 不会干净地关闭，缓冲区不会被刷新。也许你只需要这样做：

```
#!/usr/bin/php
<?php

$arg_id = exec('task_which_forks.php');
exec("queue_clean_up.php $arg_id"); 
```

# c# - 将 .XLS 转换为制表符分隔的 .TXT

> ID：11965984
> 
> 赞同：3
> 
> 时间：2012-08-15T08:12:57.207
> 
> 标签：c#, excel, tsv

我可以使用 C# 以某种方式将 Excel .XLS 文件转换为 txt-tsv（制表符分隔值）文件吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-12-15T22:34:24.563

使用 OleDb 可能会很棘手，并且可能会导致问题，具体取决于创建电子表格的 excel 版本。例如，上面的示例适用于 .xls，但不适用于 .xlsx。您必须将连接字符串从“Microsoft.Jet.OLEDB.4.0”更改为“Microsoft.ACE.OLEDB.12.0”才能进行补偿。但是，它仍然不是所有 excel 工作表都通用的。我会像下面这样使用 Microsoft.Office.Interop.Excel

```
Microsoft.Office.Interop.Excel.Application myExcel;
Microsoft.Office.Interop.Excel.Workbook myWorkbook;
Microsoft.Office.Interop.Excel.Worksheet worksheet;

myExcel = new Microsoft.Office.Interop.Excel.Application();
myExcel.Workbooks.Open(inputFileName.xls, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);
myWorkbook = myExcel.ActiveWorkbook;
worksheet = (Microsoft.Office.Interop.Excel.Worksheet)myWorkbook.Worksheets[1];
myWorkbook.SaveAs(outputFileName.txt, Microsoft.Office.Interop.Excel.XlFileFormat.xlTextWindows, Missing.Value, Missing.Value, Missing.Value, false, Microsoft.Office.Interop.Excel.XlSaveAsAccessMode.xlNoChange, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);

myWorkbook.Close(false, Missing.Value, Missing.Value);
myExcel.Quit(); 
```

没有循环，没有bs。只需复制、粘贴和更改文件名。我看到的唯一问题是有时 myExcel.Quit() 似乎无法正常工作，并且 excel 的实例在后台保持打开状态。解决这个问题的方法是通过您的程序手动终止该进程，但我将把它留到另一个讨论中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T08:19:47.807

您可以通过 OleDb（ADO.NET 提供程序）轻松读取该 XLS 文件并创建一个`StreamWriter`对象以将数据写入 Text/TSV 文件。

```
using (OleDbConnection cn = new OleDbConnection())
        {
            using (OleDbCommand cmd = new OleDbCommand())
            {
                cn.ConnectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + @"C:\path\file.xls" + ";Extended Properties=\"Excel 8.0;HDR=Yes;IMEX=1\";";
                cmd.Connection = cn;
                cmd.CommandText = "select * from [Sheet1$]";
                using (OleDbDataAdapter adp = new OleDbDataAdapter(cmd))
                {
                    DataTable dt = new DataTable();
                    adp.Fill(dt);
                    using (StreamWriter wr = new StreamWriter(@"C:\path\flie.tsv"))
                    {
                        foreach (DataRow row in dt.Rows)
                        {
                            wr.WriteLine(row[0] + "\t" + row[1]);
                        }
                    }
                }
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-20T15:29:36.427

[在此处](https://stackoverflow.com/a/57563232/4856020)查看相关问题的答案。在具有 的行上`ws.SaveAs(targetFilePath, XlFileFormat.xlCSV);`，替换`xlCSV`为`xlUnicodeText`。

# sql-server-2008 - 使用存储过程从 MS SQL 2008 中的临时表中选择时无法通过 JDBC 返回 ResultSet

> ID：11965985
> 
> 赞同：1
> 
> 时间：2012-08-15T08:12:58.857
> 
> 标签：sql-server-2008, stored-procedures, jdbc

我有一个存储过程，它创建多个临时表，然后在各种临时表上创建一个连接。

如果我在 MS SQL 2008 中执行存储过程，我可以看到结果选择子句的输出。但是，当我通过 JDBC 调用存储过程时，我不断收到一条错误消息，指出**Statement 没有返回结果集。**

我环顾四周，但找不到解决方案，所以我求助于创建一个持久表并将存储过程的输出插入其中。

1.  为什么会这样？（*我读过一些话，因为一旦存储的过程完成执行，临时表就会被截断，因此不会通过 JDBC 返回任何结果集*）
2.  有没有办法在不使用持久表的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:28:42.827

这是一个类似的问题： [Temporary tables using JDBC with null ResultSet](https://stackoverflow.com/questions/4728495/temporary-tables-using-jdbc-with-null-resultset)

这是公认的答案：[http ://social.msdn.microsoft.com/Forums/en/sqldataaccess/thread/67b10d74-e94f-4b58-8ee3-59ff390db1cf](http://social.msdn.microsoft.com/Forums/en/sqldataaccess/thread/67b10d74-e94f-4b58-8ee3-59ff390db1cf)

摘要 - 对于从临时表返回的存储过程，不要使用 PreparedStatement，而是使用常规 Statement。

# shell - 如何使用参数在 tchsh 中执行 tcl 脚本

> ID：11965987
> 
> 赞同：2
> 
> 时间：2012-08-15T08:13:07.277
> 
> 标签：shell, tcl, tclsh

通常我会像这样在 shell 下调用我的 tcl 脚本。

```
> tclsh8.5 mytest.tcl -opt1 foo -opt2 bar 
```

以防由于某些 C++ 实现的模块需要启动 gdb 进行调试。我必须通过 gdb 启动 tclsh。所以问题是如何在 tcl sh 中使用参数执行我的脚本。

我需要类似的东西：

```
tclsh> run mytest.tcl -opt1 foo -opt2 bar 
```

使用 exec 并不理想，因为它会占用另一个进程并丢失我的断点设置。

```
tclsh> exec mytest.tcl -opt1 foo -opt2 bar 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T09:30:07.900

我认为以下内容应该适合您：

```
set argv [list -opt1 foo -opt2 bar]
set argc 4
source mytest.tcl 
```

因此，设置 argv 和 argc 以获取正确的参数，然后只需在 Tcl 代码中执行源代码即可。

或者， gdb run 命令允许您将命令行参数传递给要调试的可执行文件。所以如果你调试 tclsh 那么运行命令有什么问题如下？

```
run mytest.tcl -opt1 foo -opt2 bar 
```

例如在 cygwin 下，我可以执行以下操作：

```
$ tclsh test.tcl
This is a test
$ gdb -q tclsh.exe
(no debugging symbols found)
(gdb) run test.tcl
Starting program: /usr/bin/tclsh.exe test.tcl 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:33:37.147

如果您在 gdb 会话中运行 tclsh 并设置参数，您可以执行以下操作（`$`是 shell 提示符，`(gdb)`是 gdb 提示符，我忽略了 gdb 打印的所有消息）：

```
$ gdb tclsh
(gdb) set args mytest.tcl -opt1 foo -opt2 bar
(gdb) ... set some breakpoints ...
(gdb) run 
```

您可能还需要`set env FOO=bar`设置环境，具体取决于脚本中发生的情况。Tcl 自己的构建文件使用这样的技术在调试测试套件的运行时传递参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T12:32:35.897

为什么不直接跑

```
gdb --args tclsh8.5 mytest.tcl -opt1 foo -opt2 bar 
```

何时需要调试应用程序？

# html - 引导程序：具有不同宽度的模态

> ID：11965988
> 
> 赞同：0
> 
> 时间：2012-08-15T08:13:18.623
> 
> 标签：html, css, twitter-bootstrap, less

我有很多模态。如何为它们中的每一个设置不同的（固定）宽度？如果除了使用 LESS 之外还有其他方法，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T08:16:55.670

您可以像这样覆盖内联宽度：

```
<div class="modal fade" id="correctModal" style="width: 400px;"> 
```

或者像这样在css中添加样式：

```
<div class="modal fade" id="correctModal"> 
```

CSS

```
#correctModal{
width:400px;
} 
```

# ios - iOS 从 URL 字符串中删除特殊字符

> ID：11965990
> 
> 赞同：-2
> 
> 时间：2012-08-15T08:13:45.893
> 
> 标签：ios, urlencode, nsurlrequest

我想使用 NSURLRequest 调用这个 URL：

[http://www.test.com/query=](http://www.test.com/query=) {"tag1":"üğişi","tag2":"çöçödd"}

这些字符是“üğişi”和“çöçödd”UTF8 字符。我需要转换此 URL 以获得响应。你能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T08:45:38.027

使用类的`-(NSString*)stringByAddingPercentEscapesUsingEncoding:(NSStringEncoding)encoding;`例程`NSString`。像这样：

```
NSString* url = @"http://www.test.com/query={\"tag1\":\"üğişi\",\"tag2\":\"çöçödd\"}"; 
NSString* urlEncoded = [url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

[在这里您可以找到更多...](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/TP40003744 "苹果文档")

# java - 使用 SWIG 将类型为 signed char * 的结构的成员转换为 Java 中的字节数组 (byte[])

> ID：11965992
> 
> 赞同：4
> 
> 时间：2012-08-15T08:13:58.447
> 
> 标签：java, c, swig

我正在尝试将类型为signed char * 的结构的成员转换为Java 中的字节数组。我有以下结构：

```
typedef struct {
    signed char * content;
    int contentLength;
} Foo; 
```

我试过这个：

```
%typemap(jni) signed char *content [ANY] "jbyteArray"
%typemap(jtype) signed char *content [ANY] "byte[]"
%typemap(jstype) signed char *content [ANY] "byte[]"
%typemap(javaout) signed char *content [ANY] {
    return $jnicall;
}
%typemap(memberin) int contentLength [ANY] {
    int length=0;
    $1 = &length;
}

%typemap(out) signed char * content [ANY] {
    $result = JCALL1(NewByteArray, jenv, length);
    JCALL4(SetByteArrayRegion, jenv, $result, 0, length, $1);
} 
```

但是没有结果。Foo 的方法 getContent 具有以下签名：

```
SWIGTYPE_p_signed_char getContent(); 
```

我希望这个方法返回字节 []。有解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T21:40:22.983

这非常接近你想要的。您不想要，`[ANY]`因为数组的大小在 C 中不是“固定的”（它由 an 指定`int`，但这不是其类型的一部分）。

您可以使您的类型映射与：

```
%module test

%typemap(jni) signed char *content "jbyteArray"
%typemap(jtype) signed char *content "byte[]"
%typemap(jstype) signed char *content "byte[]"
%typemap(javaout) signed char *content {
    return $jnicall;
}

%typemap(out) signed char * content {
    $result = JCALL1(NewByteArray, jenv, arg1->contentLength);
    JCALL4(SetByteArrayRegion, jenv, $result, 0, arg1->contentLength, $1);
}

// Optional: ignore contentLength;
%ignore contentLength;

%inline %{
typedef struct {
    signed char * content;
    int contentLength;
} Foo;
%} 
```

我可能在这里遗漏了一些东西，但是我找不到比这更好的方法来从 out 类型映射中获取“self”指针 -`arg$argnum`行不通，也不行`$self`。没有任何其他类型映射可以应用于此功能，这会有所帮助。

（请注意，您可能还想为它编写一个成员`signed char * content`或使其不可变。我也会完全被`%ignore`该`contentLength`成员所吸引）。

# web-applications - 我可以在 Intranet 上部署 Web Application 但本地 Intranet 用户和数据库在 Cloud 上吗？

> ID：11965993
> 
> 赞同：1
> 
> 时间：2012-08-15T08:13:58.720
> 
> 标签：web-applications, clouddb

我在其他网站上问过这个问题，但找不到适合我情况的答案：请在这方面帮助我。

案例：实际上我想在 Intranet 上创建一个 Web 服务器，并且用户（没有互联网访问权限）可以连接到 Web 服务器。在要部署的 Web 服务器 asp.net 应用程序上，但数据库在云上。

我最近接触了一家公司，该公司的用户不需要互联网，但他们希望他们的应用程序和数据库位于云端。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:24:21.373

是的，只要托管该站点的服务器具有 Internet 连接，Intranet 站点就可以连接到 Internet 上的数据库。

当然，实际的实现将取决于您选择使用的数据库。

# java - 鼠标滚轮调整 JPanel 和所有内部组件的大小

> ID：11965995
> 
> 赞同：2
> 
> 时间：2012-08-15T08:14:09.010
> 
> 标签：java, swing

假设我有`JPanel`，里面有`panelA`两个（和）。我想添加到，所以当我制作一个事件时，所有组件都会调整大小（变大或变小）。我想出了这段代码：`JButtons``button1``button2``MouseWheelListener``JPanel`

```
for (Component comp : panelA.this.getComponents())
{
    if (comp instanceof JButton)
    {
        comp.setPreferredSize(new Dimension(
            (int) (PREFERRED_WIDTH * SCALE_WIDTH),
            (int) (PREFERRED_HEIGHT * SCALE_HEIGHT)));
    }
} 
```

当我做一个事件时`SCALE_HEIGHT`&的值正在改变。`SCALE_WIDTH`

我的问题是：它好吗？我应该设置所有内部组件的首选尺寸还是制作其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T09:22:25.963

当我想到这是 JXLayer（或Java 7下的[JLayer ）的经典案例时，我正在绞尽脑汁想办法做到这一点](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html)

曾经有一些非常好的例子，但它们似乎已经消失在以太中

# c++ - 需要帮助解决 C++ 中的 Scanner/Lexer 代码部分中的分段错误

> ID：11965998
> 
> 赞同：0
> 
> 时间：2012-08-15T08:14:35.707
> 
> 标签：c++, segmentation-fault

分段错误是在扫描仪代码中引起的。

## 问题：

使用 GDB 回溯显示问题是由在条件：if ( ) 中声明名为(where is a ) 的`FieldInfo`指针引起的。`field_info``FieldInfo``struct``tell_me`

请注意，下面的代码是一个大文件的一部分，所以如果有些东西的声明不在此处，您可能会认为它们已在程序中的其他地方定义而未在此处显示。

## 示例代码：

```
Some_function(some_arguments) {    
// Did something.

if (flag_1) {

    list<const FieldInfo *> prefix_stack;

    const FieldInfo def_pfx(NON_BOOLEAN, default_prefix);
    {
    const FieldInfo * default_field_info = &def_pfx;
    if (default_prefix.empty()) {
        map<string, FieldInfo>::const_iterator f = field_map.find("");
        if (f != field_map.end()) default_field_info = &(f->second);
    }

    // We always have the current prefix on the top of the stack.
    prefix_stack.push_back(default_field_info);
    }

    // Did something.

    for (<some conditions>) {
        bool tell_me = false;
        // Did something.

        if (tell_me) {
            const FieldInfo pos_prefix(NON_BOOLEAN, pos);
            const FieldInfo * field_info = &pos_prefix;
            Term * term_obj = new Term(&state, term_lowercase, field_info, 
                                            term, stem_term, term_pos++);
            Parse(pParser, token, term_obj, &state);
        } else {
            const FieldInfo * field_info = prefix_stack.back();
            Term * term_obj = new Term(&state, term_lowercase, field_info, 
                                            term, stem_term, term_pos++);
            Parse(pParser, token, term_obj, &state);
        }

        // Did something.
    }
}

// Did something.
} 
```

的定义`FieldInfo`是：

```
struct FieldInfo {
/// The type of this field.
filter_type type;

/// Field prefix strings.
list<string> prefixes;

/// Field processors struct already defined earlier.
list<FieldProcessor*> procs;

FieldInfo(filter_type type_, const string & prefix)
: type(type_)
{
prefixes.push_back(prefix);
}

FieldInfo(filter_type type_, FieldProcessor *proc)
: type(type_)
{
procs.push_back(proc);
} 
```

};

## 分析：

Parse 是一种调用 Parser 的方法。

GDB 揭示了问题（分段错误）是在 Parser 尝试`field_info`通过迭代`field_info->prefixes`.

## 编辑：

这是发生分段错误的函数的代码（我添加了一些 cout 用于调试目的）。问题出在代码的 while (++piter != prefixes.end()) 部分：

```
Query get_query() const
{
    const list<string> & prefixes = field_info->prefixes;

    if (prefixes.empty()) {
    assert(!field_info->procs.empty());
    return (**field_info->procs.begin())(name);
    }
    list<string>::const_iterator piter = prefixes.begin();
    Query q(make_term(*piter), 1, pos);
    while (++piter != prefixes.end()) {
    string check3 = make_term(*piter);
    Query q2(check3, 1, pos);
    q = Query(Query::OP_OR, q, q2);
    }
    return q;
} 
```

## 笔记：

我正在研究别人的**工作**代码。

我已经添加了代码的 if(flag_1) 部分，其余的一切都已经存在了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T08:22:58.230

这部分看起来很可疑：

```
const FieldInfo pos_prefix(NON_BOOLEAN, pos);
const FieldInfo * field_info = &pos_prefix;
Term * term_obj = new Term(&state, term_lowercase, field_info, 
                           term, stem_term, term_pos++); 
```

您正在使用局部变量的地址`pos_prefix`来初始化`term_obj`. 您必须绝对确保在`pos_prefix`超出范围后永远不会访问此地址，因为这样该地址将无效。

您的代码中有大量原始指针。这在现代 C++ 中不是很好的做法。考虑使用普通对象、引用或智能指针。