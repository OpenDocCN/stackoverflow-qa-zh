# StackOverflow 问答 10140000-10140999

# python - For 循环仅用于列表列表中的第二项。（Python）

> ID：10140001
> 
> 赞同：5
> 
> 时间：2012-04-13T11:31:44.847
> 
> 标签：python, coding-style, for-loop, nested-lists

## 是）我有的

是这样的

```
def mymethod():
    return [[1,2,3,4],
            [1,2,3,4],
            [1,2,3,4],
            [1,2,3,4]]

mylist = mymethod()

for _, thing, _, _ in mylist:
    print thing

# this bit is meant to be outside the for loop, 
# I mean it to represent the last value thing was in the for
if thing:
    print thing 
```

## 我想要的是

我想要做的是避免使用虚拟变量，有没有比这更聪明的方法

```
for thing in mylist:
    print thing[1] 
```

因为那样我将不得不在`thing[1]`我需要它的任何其他时间使用它，而不将它分配给一个新变量，然后事情就会变得一团糟。

如果我遗漏了一些明显的东西，那么对 python 来说很抱歉

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T11:35:36.967

你可以破解生成器表达式

```
def mymethod():
    return [[1,2,3,4],
            [1,2,3,4],
            [1,2,3,4],
            [1,2,3,4]]

mylist = mymethod()

for thing in (i[1] for i in mylist):
    print thing

# this bit is meant to be outside the for loop, 
# I mean it to represent the last value thing was in the for
if thing:
    print thing 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T11:51:33.833

如果要获取数组的第二列，可以使用列表推导，如下所示：

```
a = [ [ 1, 2, 3, 4 ],
      [ 5, 6, 7, 8 ],
      [ 9,10,11,12 ],
      [13,14,15,16 ] ]

second_column = [ row[1] for row in a ]
# you get [2, 6, 10, 14] 
```

您可以将其包装在一个函数中：

```
def get_column ( array, column_number ):
    try:
        return [row[column_number] for row in array]
    except IndexError:
        print ("Not enough columns!")
        raise # Raise the exception again as we haven't dealt with the issue.

fourth_column = get_column(a,3)
# you get [4, 8, 12, 16]

tenth_column = get_column(a,9)
# You requested the tenth column of a 4-column array, so you get the "not enough columns!" message. 
```

虽然实际上，如果您正在使用数字的矩形数组，那么您希望使用`numpy`数组，而不是数字列表的列表。

* * *

或者，根据 Lattyware 的隐含请求，生成器版本：

```
def column_iterator ( array, column_number ):
    try:
        for row in array:
            yield row[column_number]
    except IndexError:
        print ("Not enough columns!")
        raise 
```

用法就像一个普通的列表：

```
>>> for item in column_iterator(a,1):
...    print(item)
... 
2
6
10
14
>>> 
```

发电机的性质通过以下方式显而易见：

```
>>> b = column_iterator(a,1)
>>> b.next()
2
>>> b.next()
6
>>> b.next()
10
>>> b.next()
14 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T11:39:07.903

当然，[itertools.chain](http://docs.python.org/library/itertools.html#itertools.chain)和[切片](http://docs.python.org/library/itertools.html#itertools.islice)什么时候会派上用场？

```
for thing in itertools.islice(itertools.chain(*mylist),1,None,len(mylist)):
    print(thing) 
```

Numpy 也有助于列切片。这是 numpy 中的另一个示例

```
for thing in numpy.array(mylist)[:,1]:
    print(thing) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T11:51:23.697

虽然我喜欢Dikei 的清晰和简洁[的回答](https://stackoverflow.com/a/10140051/722121)，但我仍然认为一个好的选择很简单：

```
for sublist in mylist:
    item = sublist[1]
    ...
    do_stuff(item)
    ...
    do_other_stuff(item)
    ... 
```

它仍然很清楚，可以扩展为更容易做，并且可能是最快的。

这里有一些快速测试——由于在循环中什么都不做，我不确定它们的准确度，但它们可能会给出一个想法：

```
python -m timeit -s "mylist = [range(1,8) for _ in range(1,8)]" 'for thing in mylist:' '    item=thing[1]' '    pass'
1000000 loops, best of 3: 1.25 usec per loop

python -m timeit -s "mylist = [range(1,8) for _ in range(1,8)]" 'for thing in (i[1] for i in mylist):' '    pass'
100000 loops, best of 3: 2.37 usec per loop

python -m timeit -s "mylist = [range(1,8) for _ in range(1,8)]" 'for thing in itertools.islice(itertools.chain(*mylist),1,None,len(mylist)):' '    pass'
1000000 loops, best of 3: 2.21 usec per loop

python -m timeit -s "import numpy" -s "mylist = numpy.array([range(1,8) for _ in range(1,8)])" 'for thing in mylist[:,1]:' '    pass' 
1000000 loops, best of 3: 1.7 usec per loop

python -m timeit -s "import numpy" -s "mylist = [range(1,8) for _ in range(1,8)]" 'for thing in numpy.array(mylist)[:,1]:' '    pass'
10000 loops, best of 3: 63.8 usec per loop 
```

请注意，如果一旦生成 numpy 会很快，但对于单个操作按需生成则非常慢。

在大型列表中：

```
python -m timeit -s "mylist = [range(1,100) for _ in range(1,100)]" 'for thing in mylist:' '    item=thing[1]' '    pass'
100000 loops, best of 3: 16.3 usec per loop

python -m timeit -s "mylist = [range(1,100) for _ in range(1,100)]" 'for thing in (i[1] for i in mylist):' '    pass'
10000 loops, best of 3: 27 usec per loop

python -m timeit -s "mylist = [range(1,100) for _ in range(1,100)]" 'for thing in itertools.islice(itertools.chain(*mylist),1,None,len(mylist)):' '    pass'
10000 loops, best of 3: 101 usec per loop

python -m timeit -s "import numpy" -s "mylist = numpy.array([range(1,100) for _ in range(1,100)])" 'for thing in mylist[:,1]:' '    pass'
100000 loops, best of 3: 8.47 usec per loop

python -m timeit -s "import numpy" -s "mylist = [range(1,100) for _ in range(1,100)]" 'for thing in numpy.array(mylist)[:,1]:' '    pass'
100 loops, best of 3: 3.82 msec per loop 
```

请记住，速度应该始终排在可读性之后，除非您*真的*需要它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T13:03:47.470

该方法`itemgetter()`可用于解决此问题：

```
from operator import itemgetter

def mymethod():
    return [[1,2,3,4],
            [1,2,3,4],
            [1,2,3,4],
            [1,2,3,4]]

mylist = mymethod()

row = map(itemgetter(2), mylist)
print("row %s" % row)

thing = row[-1]

# this bit is meant to be outside the for loop, 
# I mean it to represent the last value thing was in the for
if thing:
    print thing 
```

输出是：

```
row [3, 3, 3, 3]
3 
```

# c# - 查询 TreeNodeCollection

> ID：10140005
> 
> 赞同：14
> 
> 时间：2012-04-13T11:31:55.457
> 
> 标签：c#, winforms, linq

我在 Windows 窗体 UI 上有一个树视图控件，它有几个节点（有多个子节点）。我想查询节点集合，例如 1\. 选择名称以“x”开头的
那些 2\. 选择那些在 Node.Tag 字段中没有任何数据的节点。

有人可以建议我一种方法来做到这一点。Linq 会让它变得简单而整洁，但我在 Linq 上没有发现太多查询 TreeNodeCollection 的内容。

谢谢，

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-13T14:30:54.263

因为`TreeNodeCollection`早于 .NET 2.0，它不是通用集合，所以它没有实现`IEnumerable<T>`LINQ 的“主”类型。

但是，您可以只调用`.Cast<TreeNode>()`a `TreeNodeCollection`，然后得到一个`IEnumerable<TreeNode>`，然后您*可以*对它做所有 LINQy 的优点。

（这种方法适用于任何实现`IEnumerable`但不是这样的集合`IEnumerable<T>`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T14:43:43.977

您可以使用允许递归 lambda 的 Fixpoint 运算符尝试类似的操作

```
// Fix point operator
public static Func<T, T> Fix<T>(Func<Func<T, T>, Func<T, T>> f)
{
    return t => f(Fix<T>(f))(t);
} 
```

然后

```
// your treeView
var tv = new TreeView();

// Your filter Func
Func<TreeNode, bool> filterStartWithXorNoData =
    node => node.Text.StartsWith("x") || string.IsNullOrEmpty(node.Text);

// Your recursive lambda
var filteredNodes = Fix<IEnumerable<TreeNode>>(
    f =>
    nodeList =>
    nodeList.SelectMany(node => f(node.ChildNodes.Cast<TreeNode>()))
      .Union(nodeList.Where(filterStartWithXorNoData)))
      (tv.Nodes.Cast<TreeNode>()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T11:47:04.460

我最近尝试了类似的方法，并且由于每个父节点下的嵌套节点集合而在 LINQ 方法中遇到了困难。

我用搜索所有节点的递归函数解决了我的问题。相当优雅。

VB：

```
Private Function FindNode(name As String, root As TreeNode) As TreeNode
    For Each n As TreeNode In root.Nodes
        If n.Name = name Then
            'Found, get out
            Return n

        Else
            'Recursively call FindNode to search this node's children
            Dim soughtNode = FindNode(name, n)
            If soughtNode IsNot Nothing Then
                Return soughtNode
            End If
        End If
    Next

    Return Nothing

End Function 
```

# android - 我们如何将画布上的绘图与 Android 中的预定义图像进行比较？

> ID：10140009
> 
> 赞同：2
> 
> 时间：2012-04-13T11:32:12.760
> 
> 标签：android, xml, canvas, drawing

我正在开发一个 android 应用程序的项目。我需要让用户在预定义的虚线图像上绘图，并显示结果绘图与虚线图像的百分比。例如，虚线“A”，用户在虚线“A”上完全绘制覆盖，将显示100％的完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:44:37.100

您可以使用 Alpha 遮罩。我将使用您的示例并进一步解释。

一般的想法是插入一个隐藏的掩码，它基本上是一个具有预定义区域的图像，该区域算作正确的轨迹。您可以使用颜色来定义该区域，例如红色。

所以现在您有一个带有红色 A 的图像。您将该图像覆盖在虚线上并使其透明（alpha 通道）。当用户绘图时，您所要做的就是检查触摸事件是否与隐藏层的红色像素处于相同的位置。如果是，则意味着用户正在跟踪线路。

如果您不想弄乱 Alpha 通道，您可以发挥创意并以不同的方式进行操作。如果我在你的位置，我只会创建一个普通图像（不需要 alpha 通道），它甚至可以是灰度图像（这甚至会更节省内存）并在其上绘制不同的蒙版。

例如，我希望用户追踪两个字母：一个 A 和一个 B。我打开任何基本的图像编辑软件。创建与应检测到触摸事件的区域大小完全相同的灰度图像。绘制一个颜色值为 100（灰色）的字母 A，然后绘制一个颜色值为 50（深灰色）的字母 B。保存图像。

在应用程序中，您只需加载该图像并将其作为二维数组保存在内存中。然后您可以使用[onTouchevent()](http://developer.android.com/reference/android/view/View.html#onTouchEvent%28android.view.MotionEvent%29)回调来获取 touchevent 位置。因此，例如，如果用户在位置 (120,240) 触摸屏幕，您所要做的就是检查您之前在位置 [120][240] 加载的图像数组的值。如果该位置的值为 100，则表示用户正在跟踪字母 A，如果值为 50，则用户正在跟踪字母 B。其他值表示用户未正确跟踪。

# java - 遍历 HashMap 时，我得到 NullPointerException

> ID：10140022
> 
> 赞同：0
> 
> 时间：2012-04-13T11:33:27.377
> 
> 标签：java, map

这是我的代码：

```
HashMap<String, HashSet<String>> map;
....// I didn't write those code that initial the map.
System.out.println(map.entrySet().size()); // run util here is ok, I get the size of the map.
for(Map.Entry<String, HashSet<String>> entry : map.entrySet()) {// here throw the exception
    Sytem.out.println("abc");// didn't executed, throw exception before
} 
```

我得到了例外：

**key.test.EnwikiOutlink.main(EnwikiOutlink.java:68) 处的线程“主”java.lang.NullPointerException 中的异常**

地图对象有超过 10,000 个地图对象，我在服务器机器上运行它，无法调试。但是当我减小这张地图的大小（低于 10,000）时，程序运行正常。问题的原因是什么，解决方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:34:58.433

在哪里`map`初始化？如果您实际上没有为它分配任何东西，那么它当然是`null`.

（不清楚它是类成员还是局部变量。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:36:43.050

如果地图*确实*包含元素，则`map.entrySet()`不会抛出`NullPointerException`（因为地图不为空），因此异常必须来自访问循环中的元素之一（或其子对象）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T11:36:54.057

我刚试过这个：它工作得很好。您的地图必须在某处分配为空。

```
HashMap<String, HashSet<String>> map;
map = new HashMap<String, HashSet<String>>();

for(Map.Entry<String, HashSet<String>> entry : map.entrySet()) {

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T13:15:36.547

如果`map`是一个局部变量（而不是实例字段），*理论上不可能*`map.entrySet()`在已经成功后启动 NPE `map.entrySet().size()`，即使映射本身可以被另一个线程访问并且该线程以各种可以想象的方式对其进行了更改。如果您的堆栈跟踪中的第一个条目是您的代码行，而不是从您的代码中调用的某些代码，那么发生这种情况的唯一方法是`map`变量本身是`null`. 因此，我认为您需要重新审视您的诊断线索。

# iphone - 以度/弧度转换纬度/经度？

> ID：10140029
> 
> 赞同：18
> 
> 时间：2012-04-13T11:33:55.453
> 
> 标签：iphone, ios, xcode, mapkit, type-conversion

如何以度/弧度转换纬度和经度？你们有什么公式或想法吗？我想在 MapKit 上展示它。谢谢.....

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-04-13T11:40:04.237

由于纬度和经度以度为单位，您可以使用以下公式转换为弧度，然后再转换为度：

```
Radians = Degrees * PI / 180 
```

反之，

```
Degrees = Radians * 180 / PI 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-04-13T12:07:41.353

如果您将地球视为一个球体，则纬度和经度已经以度为单位给出。经度表示为 -180 度（-pi 弧度）到 180 度（pi 弧度），0 度以本初子午线为中心。纬度表示为相对于赤道的 -90 度（-pi/2 弧度）到 90 度（pi/2 弧度）。这已经是一个球坐标系（取决于我在下面给出的注意事项），地球半径约为 6371 公里。

因此，只需乘以 pi/180 进行转换，就像在任何正常意义上将度数转换为弧度一样。如果你想使用这些弧度来做一些特定的事情，比如计算两个纬度/经度之间的距离，那么你应该看看一些预先存在的[来源](http://www.movable-type.co.uk/scripts/latlong.html)。

之前也有人问过类似的问题，即[Convert Lat-Lon to Cartesian Coordinates](https://stackoverflow.com/questions/1185408/converting-from-longitude-latitude-to-cartesian-coordinates)。

一般来说，许多转换问题的“正确”答案取决于您的答案中可以接受的错误（20 英里的距离是否可以偏离 1 英里等），并且世界模型适合您的问题领域。椭圆体（压扁的球体）比球体更好地近似世界，但是假设地球是球体并且引入的误差可以最小化，则执行计算更容易。特别是如果您的程序只是在寻找不会用于例如工程项目的“粗略”答案。

您所拥有的纬度很可能是在称为 WGS-84 的坐标系中给出的，这是大多数硬件 GPS 单元使用的坐标系，它假设一个椭球模型。

请注意，我有更多的来源，但我想我的声誉很低，所以我只能发布两个链接。我建议在维基百科上阅读有关 WGS-84、地球半径、球坐标、本初子午线和赤道的一些视觉参考。

# excel - 如何快速确定 Excel 工作簿中哪些工作表有宏？

> ID：10140030
> 
> 赞同：8
> 
> 时间：2012-04-13T11:33:55.843
> 
> 标签：excel, vba

如果 Excel 工作簿有许多工作表，其中一些工作表内部有宏，我发现确定哪些工作表有宏的唯一方法是在项目资源管理器（VBA中的**`Ctrl`+ ）中单击每个工作表。`R`**

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T13:12:04.940

我最近在 MSDN 上回答了一个问题，并最终在上面写了一篇博文。

**主题：检查 Excel 文件是否有宏**

**链接**：[http ://www.siddharthout.com/2012/04/12/check-if-an-excel-file-has-a-macro/](http://www.siddharthrout.com/2012/04/12/check-if-an-excel-file-has-a-macro/)

然后，您可以使用`.VBComponents.Item(i).Name`with`.VBComponents.Item(i).Type`检查哪些“**表格**”具有“**宏**”。

**编辑**

从技术上讲，每个**宏**都是一段**代码**，但不一定每段**代码**都是一个宏。因此，如果您只是检查宏，请查看博文的第一部分，如果您要检查任何代码，请查看博文的第二部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T11:39:29.273

您可以遍历工作表并使用以下语法：

```
If ActiveWorkbook.VBProject.VBComponents(sheetName).CodeModule.CountOfLines <> 0 Then 
```

`sheetName`是工作表的名称。

如需更高级的使用，您应该查看此[页面](http://www.cpearson.com/excel/vbe.aspx)，其中提供了更高级的示例。

# android - 在空的 RelativeLayout 中布局 XML

> ID：10140031
> 
> 赞同：0
> 
> 时间：2012-04-13T11:34:01.947
> 
> 标签：android, xml, android-relativelayout

我有一个显示“tools.xml”的“Tools.java”正确吗？在这个“tools.xml”RelativeLayout 中有一个布局 id = @+/contentLayout 是空的。

我还有其他几个活动“tool1.java”、“tools2.java”......显示“tool1.xml”、“tool2.xml”......

例如，如何调用类“tool1.java”并让它在“tools.xml”中的 RelativeLayout 中显示“tool1.xml”

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:52:58.690

```
<?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
 >

<include

    layout="@layout/yourxmlfilename" />

</RelativeLayout> 
```

# javascript - 根据循环中的计数器创建具有唯一名称的 javascript 对象

> ID：10140033
> 
> 赞同：0
> 
> 时间：2012-04-13T11:34:19.900
> 
> 标签：javascript, variables, object, loops

我对 Javascript 还不够陌生，我有一个关于制定变量名的小问题：

```
function createObjects(int length) {
  var count;
  for(count=0; count<length; count++;) {
    var personObj + "" + count;
  }  
} 
```

在这里，我想为 for 循环的每次迭代制定一个不同的 personObj，这是正确的程序吗？这会给我： var personObj1 var personObj2 等

谢谢！马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:37:09.340

不。动态生成变量从来都不是一个好主意。请改用对象或数组。它们旨在构建相关数据组。

```
function createObjects(length) {
  var count, people = [];
  for(count=0; count<length; count++;) {
    people.push('something');
  }  
  return people;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:04:36.343

如果您想拥有相同底层数据结构/逻辑的多个实例，您可以使用如下方法：

创建一个**[构造函数](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/constructor)**，该函数生成一个`Object`具有您需要的属性（也是方法）的。例如：

```
function PersonObj(name, age) {
    this.name = name;
    this.age = age;
} 
```

这使您可以`PersonObj`使用`var n = new PersonObj('Fred',32);`. 现在您可以使用**[Array](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array)**来存储这些对象的多个实例：

```
var persons = []; // creates a new Array

for (var i = 1; i < 13; i++){
    persons.push(new PersonObj('Alfred', i));
} 
```

`persons`现在将包含 12 个 1 到 12 岁的 Alfred。

如果你想改变 Alfred No. 3 的年龄，你可以这样做：

```
persons[2].age = 99; 
```

观看**[现场演示](http://jsfiddle.net/HVFtt/3/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T11:36:06.770

为什么不为此使用数组呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T11:40:58.773

如果需要，您可以始终将命名属性添加到窗口对象：

```
function createObjects(int length) {
  var count;
  for(count=0; count<length; count++;) {
    window[personObj + "" + count] = new SomeObject();
  }  
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T12:03:37.360

创建对象，向对象添加属性并将对象存储在数组中。

```
var al = new Array();
function createObjects(int length) {
 var o = new Object();
  for(var count=0; count<length; count++;) {
      o.count = 'some value';
  } 
al.push(o);
} 
```

# android - 在android中使用socket但抛出异常

> ID：10140034
> 
> 赞同：1
> 
> 时间：2012-04-13T11:34:22.430
> 
> 标签：android, sockets

使用真手机时，我在代码中新建套接字时出现异常： java.net.ConnectException: failed to connect to /192.168.43.90 (port 8000): connect failed: ETIMEDOUT (Connection timed out) 但是使用模拟器时，有没有问题。我使用AndroidAP，让我的笔记本电脑连接到手机，在电脑上，“adb shell ping 192.168.43.90”，结果还可以，所以我很困惑。

项目是2.3，手机是4.0

# android - Wifi 连接到接入点

> ID：10140035
> 
> 赞同：0
> 
> 时间：2012-04-13T11:34:33.053
> 
> 标签：android

目前我正在尝试建立与接入点的连接......我发现q非常好的教程（http://windev-us.net/WXUS_WEB/pdf/LSTArticle.pdf）。我对其进行了一些修改并尝试运行该应用程序，但是当我选择要连接的网络时，我遇到了错误。也许你们中的某个人可以帮助我...

```
public class WifiActivity extends Activity {

static WifiManager WifiManager;
ArrayAdapter <String> net_array_adapter;
List <ScanResult >Wlan_list;

public static final int WPA = 1;
public static final int WEP = 2;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    WifiManager = (WifiManager)this.getSystemService(Context.WIFI_SERVICE);

    net_array_adapter = new ArrayAdapter <String> (this, R.layout.device_name);
    ListView lv_net = (ListView)findViewById(R.id.lv_net);
    lv_net.setAdapter(net_array_adapter);
    lv_net.setOnItemClickListener(Net);

    IntentFilter filter = new IntentFilter(android.net.wifi.WifiManager.SCAN_RESULTS_AVAILABLE_ACTION);
    this.registerReceiver(Wifi, filter);

    //Scan
    Button btn_scan = (Button)findViewById(R.id.btn_scan);
    btn_scan.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {
            Discovery();
        }       
    });
}

protected void Discovery() {
    WifiManager.startScan();
}

private OnItemClickListener Net = new OnItemClickListener() {
    public void onItemClick(AdapterView<?> av, View v, int arg2, long arg3) {

        WifiInfo WifiInfo = WifiManager.getConnectionInfo();
        //Name
        String SSID = WifiInfo.getSSID();
        //MAC-Adresse
        String BSSID = WifiInfo.getBSSID();
        //Sichertheit
        int Key = 0; //!!! EDIT: Key= 1 or 2 --> still dont work
        //Passwort
        String PW = "123";

        connectToNetwork(BSSID, Key, PW, SSID);
        finish();
    }
};

private final BroadcastReceiver Wifi = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        net_array_adapter.clear();
        Wlan_list = WifiManager.getScanResults();
        if (WifiManager.isWifiEnabled() == false){
            net_array_adapter.add("WLAN is currently disabled");
        } else {
            for(int i = 0; i < Wlan_list.size(); i++){
                net_array_adapter.add("Name: " + Wlan_list.get(i).SSID + "\nMAC-Adresse: " + Wlan_list.get(i).BSSID);
                if (net_array_adapter.getCount() == 0){
                    net_array_adapter.add("No network avaible");
                }
            }   
        }
    }
};

//Verbindung mit gewählten AP aufbauen
public static boolean connectToNetwork(String sBSSID, int iSecurityType, String sSecurityKey, String sSSID){

    WifiConfiguration tmpConfig;

    List <WifiConfiguration> listConfig = WifiManager.getConfiguredNetworks();

    for (int i = 0; i<listConfig.size(); i++){
        tmpConfig = listConfig.get(i);
        if (tmpConfig.BSSID.equalsIgnoreCase(sBSSID)){
            return WifiManager.enableNetwork(tmpConfig.networkId, true);
        }
    }

    tmpConfig = new WifiConfiguration();
    tmpConfig.BSSID = sBSSID;
    tmpConfig.SSID = sSSID; 
    tmpConfig.priority = 1;

    switch(iSecurityType){
    //WPA
    case WPA:
        tmpConfig.preSharedKey = sSecurityKey;
        break;
    //WEP
    case WEP:
        tmpConfig.wepKeys[0] = sSecurityKey;
        tmpConfig.wepTxKeyIndex = 0;
        break;
    default:
        break;
    }
    tmpConfig.status = WifiConfiguration.Status.ENABLED;

    int netId = WifiManager.addNetwork(tmpConfig);

    return WifiManager.enableNetwork(netId, true);
} 
```

}

这是日志：

```
04-13 13:29:36.421: E/AndroidRuntime(2496): FATAL EXCEPTION: main
04-13 13:29:36.421: E/AndroidRuntime(2496): java.lang.NullPointerException
04-13 13:29:36.421: E/AndroidRuntime(2496): at wifi.aut.connect.WifiActivity.connectToNetwork(WifiActivity.java:117)
04-13 13:29:36.421: E/AndroidRuntime(2496): at wifi.aut.connect.WifiActivity$1.onItemClick(WifiActivity.java:85)
04-13 13:29:36.421: E/AndroidRuntime(2496): at android.widget.AdapterView.performItemClick(AdapterView.java:284)
04-13 13:29:36.421: E/AndroidRuntime(2496): at android.widget.ListView.performItemClick(ListView.java:3513)
04-13 13:29:36.421: E/AndroidRuntime(2496): at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812)
04-13 13:29:36.421: E/AndroidRuntime(2496): at android.os.Handler.handleCallback(Handler.java:587)
04-13 13:29:36.421: E/AndroidRuntime(2496): at android.os.Handler.dispatchMessage(Handler.java:92)
04-13 13:29:36.421: E/AndroidRuntime(2496): at android.os.Looper.loop(Looper.java:130)
04-13 13:29:36.421: E/AndroidRuntime(2496): at android.app.ActivityThread.main(ActivityThread.java:3683)
04-13 13:29:36.421: E/AndroidRuntime(2496): at java.lang.reflect.Method.invokeNative(Native Method)
04-13 13:29:36.421: E/AndroidRuntime(2496): at java.lang.reflect.Method.invoke(Method.java:507)
04-13 13:29:36.421: E/AndroidRuntime(2496): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-13 13:29:36.421: E/AndroidRuntime(2496): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-13 13:29:36.421: E/AndroidRuntime(2496): at dalvik.system.NativeStart.main(Native Method) 
```

顺便说一句，我目前正在更改键值手册，但它也不适用于值 1。非常感谢您的所有帖子......安德烈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:49:02.493

我想问题出`int Key = 0;`在**onItemClick**中。**在方法connectToNetwork**中的*Switch*语句中，您只检查*WPA*和*WEP*，它们分别为*1*和*2*。它会导致*default*在您的 switch 语句中限定，并将**tmpConfig**中的某些字段留空。

 *******因此，请将您的*密钥*设置为*0*，而应将其设置为*1*或*2*并确保您的密码长度符合所选的加密标准*******

# c# - 如何禁用必需的属性 MVC 模型？

> ID：10140039
> 
> 赞同：0
> 
> 时间：2012-04-13T11:34:41.620
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, model-view-controller

我有一个模型：

```
[Range(1, 24, ErrorMessage = "Invalid Hour")]
public int val1{ get; set; }

[Required(AllowEmptyStrings = true)]
public string val2 { get; set; } 
```

我有一个编辑操作，我也有查看页面。`val1.text, val2.text`如果我编写填充视图表单（我没有在 上写任何值`val1`）返回 InvalidHour，则有 2 个文本框。我想赋予设置空值的能力（不在 val1 上写东西）。val1 上的问题在空时返回 Invalid Hour！我可以给空吗？

怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T11:41:09.430

您可以将其设为可为空的 int

```
[Range(1, 24, ErrorMessage = "Invalid Hour")]
public int? val1{ get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:46:09.270

整数是一种原始数据类型。尝试使其可以为空`int?`

# adsense - 是否有可以根据网站搜索显示广告的 Google Adsense 小部件？

> ID：10140042
> 
> 赞同：0
> 
> 时间：2012-04-13T11:34:49.433
> 
> 标签：adsense

我可以根据用户在我网站上的搜索字词在我的网站上展示 google adsense 广告吗？我没有在我的网站上使用谷歌搜索，所以我需要能够通过 adsense 小部件的初始化代码等将搜索词传递给谷歌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:55:38.193

也许我对此有点晚了，但我实际上正在做你在问题中描述的事情，我发现这个链接可以帮助你进行开发：

[https://developers.google.com/custom-search-ads/docs/implementation-guide](https://developers.google.com/custom-search-ads/docs/implementation-guide)

使用 Javascript，您可以指定一些关键字和适合它们的 Adsense 搜索广告。

# php - 如何调试 Magento 的块缓存

> ID：10140045
> 
> 赞同：1
> 
> 时间：2012-04-13T11:35:00.133
> 
> 标签：php, caching, magento

我问自己如何调试 Magento 的块缓存。我想知道缓存了哪个块，缓存了多长时间？

例如，在 System > Configuration > Developer > Debug > [...] Hints 下有一个功能。如果我打开此选项，我会收到所有块名称及其包含的模板。我只希望缓存也一样。我想知道，哪个块，是否缓存，哪个缓存ID以及缓存该块的时间。

有人有想法或解决方案吗？

一个想法就足够开始了:)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:48:41.380

`$block->getData('cache_lifetime');`应该返回块被缓存的秒数。

[http://www.magentocommerce.com/wiki/5__-_modules_and_development/block_cache_and_html_ouput](http://www.magentocommerce.com/wiki/5_-_modules_and_development/block_cache_and_html_ouput)

# java - commons-compress“不适合八进制”

> ID：10140047
> 
> 赞同：2
> 
> 时间：2012-04-13T11:35:20.027
> 
> 标签：java, apache-commons

我有一个需要 tar/gz 大量数据（14 gigs）的 java 程序，我正在使用 commons-compress。这将是每周重复发生的工作，并且是自动化的。

当我尝试压缩这种大小的东西时，我得到：

```
java.lang.IllegalArgumentException: 13313903445=143144405525 will not fit in octal number buffer of length 11
    at org.apache.commons.compress.archivers.tar.TarUtils.formatUnsignedOctalString(TarUtils.java:212)
    at org.apache.commons.compress.archivers.tar.TarUtils.formatLongOctalBytes(TarUtils.java:265)
    at org.apache.commons.compress.archivers.tar.TarArchiveEntry.writeEntryHeader(TarArchiveEntry.java:749)
    at org.apache.commons.compress.archivers.tar.TarArchiveOutputStream.putArchiveEntry(TarArchiveOutputStream.java:209)
    at com.broadridge.adc.core.commons.io.ADCFileUtils.addFilesToCompression(ADCFileUtils.java:144)
    at com.broadridge.adc.core.commons.io.ADCFileUtils.addFilesToCompression(ADCFileUtils.java:154)
    at com.broadridge.adc.core.commons.io.ADCFileUtils.compressFiles(ADCFileUtils.java:125)
    at com.broadridge.adc.core.commons.io.ADCFileUtils.compressFile(ADCFileUtils.java:106) 
```

我的代码适用于少量信息（大约 600 兆）。我查看了源代码，但我不清楚为什么会发生错误。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T12:29:12.900

您超出了[TarConstants.SIZELEN](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.commons/commons-compress/1.3/org/apache/commons/compress/archivers/tar/TarConstants.java#TarConstants.0SIZELEN)定义的某个限制，即 12。

Javadoc 告诉我们的是：

> 标头缓冲区中大小字段的长度。包括尾随空格或 NUL。

它由堆栈跟踪中的[TarArchiveEntry.writeEntryHeader(byte[] outbuf)](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.commons/commons-compress/1.3/org/apache/commons/compress/archivers/tar/TarArchiveEntry.java#TarArchiveEntry.writeEntryHeader%28byte%5B%5D%29)使用。稍后在堆栈中，此限制被减去 1，导致限制为 11，这是您的异常消息的一部分。

稍后在调用堆栈中[TarUtils.formatUnsignedOctalString(final long value, byte[] buffer, final int offset, final int length)](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.commons/commons-compress/1.2/org/apache/commons/compress/archivers/tar/TarUtils.java#TarUtils.formatUnsignedOctalString%28long,byte%5B%5D,int,int%29)在超过 11 的限制处被调用。

因此，您似乎超出了某些最大标头字段大小。

# performance - 如何在一秒内计算任意 n <= 600 的最短加法链？

> ID：10140052
> 
> 赞同：6
> 
> 时间：2012-04-13T11:35:40.823
> 
> 标签：performance, algorithm, numbers

如何在一秒内计算任意 n <= 600的[最短加法链（sac） ？](http://wwwhomes.uni-bielefeld.de/achim/addition_chain.html)

### 笔记

这是本月的[codility](http://codility.com/)编程竞赛。

加法链在数值上非常重要，因为它们是计算 x^n 的最经济的方法（通过连续乘法）。

Knuth's [Art of Computer Programming, Volume 2, Seminumerical Algorithms](https://rads.stackoverflow.com/amzn/click/com/0201038226)很好地介绍了加法链和一些有趣的属性，但我没有找到任何东西可以满足严格的性能要求。

### 我尝试过的（剧透警报）

首先，我构建了一个（高度分支的）**树**（开始 1-> 2 -> ( 3 -> ..., 4 -> ...)），这样对于每个节点 n，从根到 n 的路径是 n 的一个囊。但是对于 >400 的值，运行时间与制作咖啡的时间大致相同。

然后我用那个程序找到**[了一些有用的属性来减少搜索空间](https://math.stackexchange.com/questions/131277/properties-of-shortest-addition-chains-for-small-numbers-e-g-up-to-600)**。有了它，我可以在制作咖啡的同时构建多达 600 个的所有解决方案。但是对于 n，我需要计算直到 n 的所有解决方案。不幸的是，codility 也测量了类初始化的运行时间......

由于问题[可能是 NP-hard](https://math.stackexchange.com/questions/109904/is-finding-the-length-of-the-shortest-addition-chain-for-a-number-n-really-np)，我最终**硬编码了一个查找表**。但是既然codility要求**构建**sac，我不知道他们是否有一个查找表，所以我觉得很脏，像个骗子。因此这个问题。

### 更新

**如果您认为硬编码的完整查找表是可行的方法，您能否给出一个论据，为什么您认为完整计算/部分计算的解决方案/启发式方法不起作用？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T13:10:52.807

我刚刚获得了解决这个问题的黄金证书。我不会提供完整的解决方案，因为该问题仍然可以在网站上找到。我将给您一些提示：

1.  您可以考虑进行深度优先搜索。
2.  每个 n < 12509 存在一个最小星链
3.  您需要知道如何修剪您的搜索空间。
4.  您需要一个良好的下限来确定您正在寻找的链的长度。
5.  请记住，您只需要一种解决方案，而不是全部。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T21:09:13.933

> 加法链在数值上非常重要，因为它们是计算 x^n 的最经济的方法（通过连续乘法）。

这不是真的。它们并不总是计算 x^n 的最经济的方法。格雷厄姆等。都 [证明](http://www.math.ucsd.edu/~ronspubs/78_11_addition_chains.pdf)了：

> 如果为加法链中的每个步骤分配的成本等于该步骤中数字的乘积，则显示“二进制”加法链以最小化成本。

当我们计算 x^n (mod m) 时，情况会发生巨大变化，这是一种常见的情况，例如在密码学中。

现在，回答你的问题。除了用答案对表格进行硬编码之外，您还可以尝试使用 Brauer 链。

*Brauer 链（又名星链）是一个加法链，其中每个新元素由前一个*元素和某个元素（可能相同）的总和形成。布劳尔链是 n < 12509 的囊。引用[丹尼尔。J.伯恩斯坦](http://cr.yp.to/papers/pippenger.pdf)：

> Brauer 算法通常被称为“从左到右的 2^k-ary 方法”，或者简称为“2^k-ary 方法”。它非常受欢迎。易于实施；为 n 构建链是检查 n 的位的简单问题。它不需要太多的存储空间。

顺便提一句。有人知道 Brauer 链计算的一个不错的 C/C++ 实现吗？我正在部分地使用二进制和布劳尔链对这两种情况进行取幂时间的比较：x^n 和 x^n (mod m)。

# javascript - jsTree：如何将选定节点的 ID 获取到 jsTree 中的根节点？

> ID：10140057
> 
> 赞同：12
> 
> 时间：2012-04-13T11:36:08.853
> 
> 标签：javascript, jquery, html, jquery-ui, jstree

如何在jsTree中获取选定节点的ID到根节点？

假设 C 是选定的节点，那么如何获取 C 的所有父 ID。

一种

*   乙

    *   C

        +C1

        +c2

以下代码将仅返回直接父 ID：如果我选择了**C**，那么我只会得到**B**

```
 .bind("select_node.jstree", function (event, data) {  
    //`data.rslt.obj` is the jquery extended node that was clicked          
    alert("Selected node = "+ data.rslt.obj.attr("id"));
    alert("Parent of Selected node = "+ data.inst._get_parent(data.rslt.obj).attr("id"))
 }); 
```

输出：

`Selected node = C`

`Parent of Selected node = B`

有没有办法让所有父节点 ID 即选定节点到根节点？

*   如何获取 jsTree 中选定节点的所有子节点？

在此问题上的任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-13T12:10:39.260

在 jQuery 中使用`parents`来获取所有父母，`li`因为所有树项都`li`在 中，所以过滤掉`jstree`，试试这个：

```
var parents = data.rslt.obj.parents("li"); 
```

对于儿童`children`在 jQuery 中使用，如下所示：

```
var children = data.rslt.obj.parent().find('li'); 
```

**编辑使用上面的内容，这里是如何获取所有父母和孩子并将它们放在每个数组中：**

**父母：**

```
var parents = [];
data.rslt.obj.parents("li").each(function () {
    parents.push({ id: $(this).attr("id"), description: $(this).children("a").text() });
}); 
```

**孩子们：**

```
var children = [];
data.rslt.obj.find("li").each(function () {
    children.push({ id: $(this).attr("id"), description: $(this).children("a").text() });
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-24T06:38:11.300

**1 更简单的解决方案**

```
 .get_path ( node , id_mode ) 
```

以 ID 数组或节点名称数组的形式返回节点的路径。混合节点：这可以是 DOM 节点、jQuery 节点或指向树中的元素的选择器，我们想要其路径。bool id_mode ：如果设置为 true，则返回 ID 而不是父节点的名称。默认为假。

```
// To get path [ID or Name] from root node to selected node 

var ids = data.inst.get_path('#' + data.rslt.obj.attr('id'),true);

// Returns IDs from root to selected node

var names = data.inst.get_path('#' + data.rslt.obj.attr('id'),false); 

// Returns Name's from root to selected node 

alert("Path [ID or Name] from root node to selected node = ID's = "+ids+" :: Name's = "+names); 
```

# magento - Magento中的Authorize.net付款在选择时不显示信用卡表格

> ID：10140067
> 
> 赞同：14
> 
> 时间：2012-04-13T11:36:31.477
> 
> 标签：magento, authorize.net

我们安装了 onestepcheckout 模块，并尝试通过正确输入所有 API 信息和交易密钥来启用 authorize.net 支付模块。

但是在结帐时，选择 authorize.net 时没有显示信用卡表格。

我们还尝试禁用 onestepcheckout 模块，即使那样它也不会显示表单。升级到 1.6.2 也不能解决问题。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-05T19:41:33.650

因为@global-eyeglasses 没有发布答案，所以我会：

在 中`Config -> Advanced`， 的设置`Display Mage_Paygate`默认设置为`Disabled`。

# image-processing - 使用 MATLAB 对图像进行边界框

> ID：10140068
> 
> 赞同：3
> 
> 时间：2012-04-13T11:36:38.730
> 
> 标签：image-processing, matlab, bounding-box, matlab-figure

我正在尝试在下图中的白色斑点周围绘制一个边界框：

![在此处输入图像描述](../Images/d214e55b497303644fb076e382c5a354.png)

我确实喜欢这样：

```
bw = imread('box.jpg');
bw=im2bw(bw);
imshow(bw)
L = bwlabel(bw);
s = regionprops(L, 'Area', 'BoundingBox');
s(1);
area_values = [s.Area];
idx = find((100 <= area_values) & (area_values <= 1000)); % list of all the objects   

%whose area is between 100 and 1000

bw2 = ismember(L, idx); %construct a binary image containing all the objects whose 

%area is between 100 and 1000 by passing L and idx to ismember. 

imshow(bw2) 
```

到目前为止，输出 bw2 是： ![在此处输入图像描述](../Images/e032144697d4505a2ffcd1956f270259.png)

有人能告诉我如何在这个斑点（白色）周围画一个边界框吗？

**更新** Wajih 的答案实际上准确地解决了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T11:42:19.430

伪 -

*   在 blob 中选择最大的 y、最大的 x、最小的 x、最小的 y。也就是说，斑点上的点。这些是您可以用来构建边界框的坐标。

假设图像的左上角为 (0,0)

```
(smallestX,smallestY)-----------------(largestX,smallestY)    
      |                                      |
      |                                      |          
      |                                      | 
      |                                      |
(smallestX,largestY)------------------(largestX,largestY) 
```

并用于查找最小/最大值和索引。

```
[r,c]=find(img==min(min(img)))
[r,c]=find(img==max(max(img))) 
```

r,c 表示 img 矩阵中的行和列。

*   我已在您的图像上标记了可用于创建边界框的点。
*   放大图像以获得更好的视图。 ![马克雷德](../Images/351d2c53f26d8f6684030e9b24af8c08.png) ![放大](../Images/5fd1ba5cc7077a2735a645c74c2e2d0b.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-10T13:37:28.447

作为这个问题的第 20,000 位观众，我将回答我认为提问者实际提出的问题。

要在页面上呈现矩形，您只需要正确解释形状的边界框。你已经计算过了`s(idx).BoundingBox`

因此，将这两行添加到您的脚本中：

```
bb = s(idx).BoundingBox;
rectangle('Position',[bb(1) bb(2) bb(3) bb(4)],'EdgeColor','green'); 
```

你会得到：

[![在此处输入图像描述](../Images/fc0cb132eb6b12c4a66eaadde5b2ec22.png)](https://i.stack.imgur.com/VuGQq.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T16:58:00.843

您是否尝试过 Image Toolbox 中的 regionprops？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T16:39:49.250

我认为您可以尝试使用**bwboundries**

```
boundaries = bwboundaries(blob);

numberOfBoundaries = size(boundaries);

for k = 1 : numberOfBoundaries

    thisBoundary = boundaries{k};

    plot(thisBoundary(:,2), thisBoundary(:,1), 'g', 'LineWidth', 2);

end 
```

# dos - 禅宗模拟器到底是什么？

> ID：10140069
> 
> 赞同：6
> 
> 时间：2012-04-13T11:36:40.217
> 
> 标签：dos, simulator, zen

我偶然发现了一个非常简单但有趣的程序，叫做[“robotfindskitten”](http://en.wikipedia.org/wiki/Robotfindskitten)，显然它是一个 Zen 模拟器。每个喜欢该程序的人似乎都在抛出这个术语，就像它是一些众所周知的行话一样，但我不知道它是什么意思。然而，我可以从名字推测它是禅宗教义的某种反映（不要瞄准，而是让“它”引导你）。这是有道理的，因为您漫无目的地四处走动，只希望其中一个 ASCII 字符将是一只小猫。但这仍然不能说明 Zen 模拟器与非 Zen 模拟器的区别。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T23:23:28.427

有抱负的年轻机器人有一天寻找它的主人。“老师，”它问道，“生命的意义是什么？”

大师直视Robot的眼睛，深吸一口气，说道：“我是你的老师，我的小伙伴，但我不是小猫。在我回答你的问题之前，你必须先找到小猫。”

小机器人听了主人的话，在屏幕上徘徊寻找小猫。而且——瞧！——有一天它确实找到了小猫，它感受到了很多的爱和满足。然而，一个紧迫的问题仍然存在于它的机器人大脑中。

机器人——不再年轻——把小猫抱在怀里，回去向主人展示它的骄傲成就，终于得到了它的问题的答案。但主人却无处可寻。他继续前进，也许是到了几英里外的一个控制台屏幕，或者是天空中的大控制台屏幕。

机器人绝望地叫道：“没有我的主人，我怎么能理解生命的意义？！”

小猫咕噜了一声。

机器人开悟了。

# jquery - 是否可以在 jcarouselite 中动态设置超时？

> ID：10140074
> 
> 赞同：0
> 
> 时间：2012-04-13T11:37:10.667
> 
> 标签：jquery, jcarousellite

我想在 jcarouselLITE 中设置两个计时器（注意 - 不是 jcarousel）。理想情况下，前三张幻灯片的超时时间：1000，第四张幻灯片的超时时间：8000。以下代码获取当前滑块的索引并使用函数`variablex`相应地更改 var：`afterEnd`

```
var variablex;
$('.slideshow').jCarouselLite({
    auto: true,         
    afterEnd: function(a){
        var index = $(a[0]).index(); 
        if (index == 3) {
            variablex = 8000;
        }
        else {variablex = 1000;}        
    },
    timeout: variablex;
}); 
```

我意识到 jCarouselLite 函数不会继续检查值`timeout`- 有没有办法用 js 将值分配给循环外的变量？

jcarouselite 脚本可以在这里找到：[github](https://github.com/kswedberg/jquery-carousel-lite/blob/master/jcarousellite.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:57:43.917

jCarousel 中没有超时选项，它是 auto 等价的。然后您可以在初始化后访问创建的 jcarousel 元素

```
jQuery('#mycarousel').data('jcarousel') 
```

这将返回当前轮播的实例对象，您应该能够通过访问选项对象来动态更改选项`jQuery('#mycarousel').data('jcarousel').options`，因此您可以通过执行类似的操作来更改自动选项

```
jQuery('#mycarousel').data('jcarousel').options.auto = 5; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:06:15.037

这只是一个原始想法，因此可能无法按预期工作。

```
var slideshowTimeout = 1000;
var $slideShow = $('.slideshow');
var slideshowCount = $slideShow.find('li').length +3;
var isSlowedDown = false;

$slideShow.jCarouselLite({
    auto: true,
    timeout: slideshowTimeout,         
    afterEnd: function(a){
        var index = $(a[0]).index();
        if (index === slideshowCount && isSlowedDown === false) {
            slideshowTimeout = 4000;
            isSlowedDown = true;
            $slideShow.trigger("endCarousel")
            $slideShow.jCarouselLite({
                auto: true,
                timeout: slideshowTimeout,
                start: slideshowCount
            });
        }      
    },
}); 
```

* * *

示例：http: [//jsfiddle.net/e2e4V/1/](http://jsfiddle.net/e2e4V/1/)

# postgresql - PostgreSQL 9.1 时区

> ID：10140082
> 
> 赞同：2
> 
> 时间：2012-04-13T11:38:02.777
> 
> 标签：postgresql, datetime, jdbc, timezone

我正在使用 postgresql 在数据库中存储一些日期。
在我的应用程序中，它完全了解时区是基本的，并且我在客户端、服务器和数据库之间进行了一些基本测试。

我正在从我在 GWT 中执行的浏览器应用程序发送日期，并在 postgresql 上读取日期。

我的测试：

客户总是在 GMT 时区，我总是为每个案例发送相同的日期。
**2012 年 13 月 4 日 00:00:00 GMT+00**

在 posgres 上，我正在更改每个测试的时区。在测试之间，我从表中删除所有日期。

要更改 posgres 上的时区，我在 {PostgreSQL HOME}\9.1\data\postgresql.conf 上将 timezene 设置为我想要的时间。

测试：客户端：13/04/2012 00:00:00 GMT+00

第一次测试 - posgres EST - 12/04/2012 19:00:00-05 根据[postgresql 文档](http://www.postgresql.org/docs/7.2/static/timezones.html)EST = GMT - 5
第二次测试 - posgres GMT + 5 - 12/04/2012 19:00:00-05
第三次测试 -后格林威治标准时间 - 5 - 13/04/2012 05:00:00+05

现在我的问题出现了：根据文档，EST = GMT - 5。那我为什么要反过来读呢？我在这里错过了什么吗？

**编辑** 我的测试的技术方面：
在客户端我发送这个：2012 Apr 13 00:00:00 GMT+00。
在服务器上，我使用 JDBC 在数据库上写入：
将 java.utils.date 转换为 java.sql.timestamp

`java.sql.Timestamp sqlTimeStamp = new java.sql.Timestamp(date.getTime());`
（日期是来自客户端的 java.utils.Date）

设置准备好的语句
`PreparedStatement ps = con.prepareStatement("INSERT INTO teste.dates (dates_tz, dates_ntz) VALUES (?, ?);"`

ps.setTimestamp(1, sqlTimeStamp); ...

作为记录，这只是我想理解的，因为总的来说它对我的目的很有效..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T14:42:59.397

考虑[文档中的警告](http://www.postgresql.org/docs/current/static/datatype-datetime.html)：

> 要记住的另一个问题是，在 POSIX 时区名称中，正偏移量用于格林威治以西的位置。在其他任何地方，PostgreSQL 都遵循 ISO-8601 约定，即正时区偏移量位于格林威治以东。

看起来你看到的与 GMT 的相反迹象正是这种分歧的影响。postgresql.conf 中指定的时区可能用 POSIX 规则解释，但后来由 SQL 用 ISO-8601 规则（任何人真正使用的规则）显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:54:21.570

当墙上的时钟显示`2012-04-13 00:00`在时区“+5”时，伦敦时间（GMT 或 UTC）为`2012-04-12 19:00`。

如果您居住在美国，您当地的时区可能是“-5”。到了午夜时分，`05:00`伦敦已经是早晨了。

就是这样。[这个关于在 PostgreSQL 中处理时区的](https://stackoverflow.com/a/9576170/939860)详细答案可能会帮助您理解。

# java - 使用 Spring AOP 捕获异常后不返回值

> ID：10140086
> 
> 赞同：0
> 
> 时间：2012-04-13T11:38:17.387
> 
> 标签：java, spring, exception-handling, aop, spring-aop

我正在使用 Spring AOP 进行异常处理。我正在使用周围的建议，因为我想记录输入参数。

我的方面方法是这样的：

```
public Object methodName(ProceedingJointPoint pjp){
  Object returnVal = null;
   try{
  returnVal = pjp.proceed();
 } catch(Throable t) {
   // Log exception 

 }
 return returnVal ;

} 
```

目前我面临的问题是：发生异常时我想记录异常但我不想返回null（returnval）。是否可以？

在没有 AOP 的正常情况下：当方法中的某行在该行之后抛出异常时，不会执行其他行。我想要这样的行为。

我们怎样才能实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:48:13.903

好老的检查异常，只是不断咬人的Java设计错误。

只需重新抛出可投掷物：

```
public Object methodName(ProceedingJointPoint pjp) throws Throwable {

...

 try {
   return pjp.proceed();
 } catch (Throwable t) {
   // so something with t: log, wrap, return default, ...
   log.warn("invocation of " + pjp.getSignature().toLongString() + " failed", t);
   // I hate logging and re-raising, but let's do it for the sake of this example
   throw t;
 } 
```

见这里：[https ://stackoverflow.com/a/5309945/116509](https://stackoverflow.com/a/5309945/116509)

# xpages - 翻译视图控件中的列值

> ID：10140087
> 
> 赞同：2
> 
> 时间：2012-04-13T11:38:17.410
> 
> 标签：xpages

我有一个为 Notes 用户使用经典前端的应用程序，现在为 Web 用户提供了一个 XPages 前端。

我使用本地化功能使应用程序成为多语言的。但这并不能帮助我翻译视图中的列值。

我通过文本文件提出了一个解决方案，该解决方案在非分类视图中运行良好。

我为每种支持的语言创建了一个文本文件，并将它们作为捆绑资源链接到 XPage。在视图列中，我使用了以下代码：

```
var cat = @ReplaceSubstring(rowData.getColumnValue("Category")," ","");
var catStr = String(cat);
return categories[catStr]; 
```

如果我在分类列中使用相同的方法，则会收到错误消息：

> 执行 JavaScript 计算表达式时出错脚本解释器错误，行 = 1，列 = 5：Java 类“java.util.PropertyResourceBundle”中的未知元素“”

有谁知道这意味着什么？或者是否有更好的解决方案来获得本地化的视图列值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T06:12:01.217

有趣的方法。由于您使用一种语言进行分类，这将决定您的排序顺序。用户看到后有何反应：

```
blue, yellow, green, red, black 
```

代替

```
black, blue, green, red, yellow 
```

因为您在视图中的类别将是

```
blau, gelb, gruen, rot, schwarz 
```

内容国际化是一个棘手的话题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T04:55:38.533

您可以在 xe:objectData 控件中进行翻译，并将数据表的对象作为排序列表返回

# xml - 使用 MD5/SHA1 比较 XML 实例

> ID：10140091
> 
> 赞同：2
> 
> 时间：2012-04-13T11:38:33.330
> 
> 标签：xml, hash, comparison, md5

我最近试图找出比较两个大型 XML 文档的最快方法，一位同事建议对它们进行散列，然后只比较散列字符串。

起初，这似乎是一个明显/绝妙的想法！但后来有件事本能地告诉我，这可能“好得令人难以置信”。

就像序列化 POJO 进行比较/克隆被广泛认为是“不好的做法”一样，这种技术也是如此吗？为什么或者为什么不？警告/陷阱等？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T18:27:53.957

首先让我说 XML 比较很棘手。这很棘手，因为正如您在问题标题中所说的那样，您正在比较 XML 实例。

XML 不仅仅是您可以比较的内容（文本文件、二进制文件等），以查看是否有不同之处；XML 是有含义的，不同的 XML 实例可以有相同的含义。

例如，考虑这个 XML 示例：

```
<sample a="foo" b="bar" /> 
```

那和这个不一样吗？

```
<sample b='bar' a='foo' /> 
```

或这个：

```
<sample 
a="foo" 
b="bar" /> 
```

甚至这个？：

```
<sample a="foo" b="bar"></sample> 
```

答案是样本都是相等的。但是如果你对每一个进行哈希处理，你每次都会得到不同的哈希值。

如果要散列 XML 实例并使用散列进行比较，首先必须将它们转换[为规范形式](http://en.wikipedia.org/wiki/Canonical_XML)。如果 XML 不经常更改，您可以将散列存储在 XML 旁边，然后只比较散列。仅当发生变化时才计算消息摘要。这可能非常快。

另一种解决方案是进行[XSLT](http://en.wikipedia.org/wiki/XSLT)转换并使用两个 XML 实例作为输入。然后你输出一些更简单的东西（可能是一个包含所有元素和属性名称和值的平面文件），它更容易比较。

有[很多方法可以比较 XML](https://stackoverflow.com/search?q=compare%20XML%20documents)文件，正如评论中提到的@violet313，这实际上取决于您要进行比较的原因以及您想要比较的具体内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:53:07.213

计算哈希值无论如何都需要读取整个文件，并花费 CPU 周期来计算它，所以如果您不担心文件不同但语义相同，为什么不进行逐字节比较呢？

此外，您引用的两个哈希都有问题（MD5 更是如此），如果有人可能有任何动机创建具有相同哈希但不同的文档的任何风险，则不应使用（这对于完全损坏的 MD5 很容易实现）从密码学的角度来看，可能与 SHA1 相距不远）。

基本上你提出的（散列然后比较散列）可能比普通比较慢（除非你从一个真正寻求厌恶的媒体中读取）并且有它自己的问题。那和在 XML 文档的上下文中，您可能需要更高级的方法，因为 Bogdan 几乎把它钉牢了。

# xcode - 为什么我的 xcodeproj 目录显示为一个文件，我该如何阻止它这样做？

> ID：10140095
> 
> 赞同：0
> 
> 时间：2012-04-13T11:39:02.987
> 
> 标签：xcode, macos

根据我的 subversion 客户端和命令行，我的 xcodeproj 文件实际上是一个目录。但是，试图从其他应用程序（例如我的合并工具）中列出它的内容，它只显示为一个文件并阻止我访问其中包含的文件？

这一切的意义何在，它的魔力在哪里？如何从普通应用程序访问该目录中的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:51:07.680

它是一个捆绑包，您可以通过命令行或右键单击并选择显示内容导航到...如果您希望它永远不会作为捆绑包工作，那么您将不得不删除该属性，我认为这是一个扩展属性...所以你需要检查 xargs。

# null - CQL：过滤具有空列的行

> ID：10140097
> 
> 赞同：3
> 
> 时间：2012-04-13T11:39:09.837
> 
> 标签：null, cassandra, cql

我有一个 cassandra 数据库和一个包含列（辅助键）A、B、C 的列族。我需要从中选择所有行，但过滤具有空 B 列的行。是否可以使用 CQL 做到这一点？或者可能只选择具有空列的行（在 cql 中，辅助键可能仅按确切值过滤）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T03:36:33.740

不，目前不可能。过滤必须发生在客户端。

如果您知道这是一种提前需要的查询，我建议您维护一个没有 B 列的行的索引。

# mysql - MySQL，给定的默认值未采用所需的列

> ID：10140101
> 
> 赞同：-1
> 
> 时间：2012-04-13T11:39:28.197
> 
> 标签：mysql

我已经创建了一个表（RJY），其中一个列具有默认值。当我输入命令'Describe rjy;' 它向我显示了我给出的值的默认列，

当我使用插入命令将数据插入到我的表中时，具有默认值的列留空，并且它没有采用我给出的值。以下是我的查询，请解决。

```
mysql> insert into rjy (compy_id, reqrmnt, veh_type, go_type, weigh, l_start,l_end) 
values ('123456', '111', '12 ty', 'white cemt', '1 tons',    '',   'mumbai'); 
```

在这里，我为“l_start”字段提供了默认值

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:42:12.517

好吧，你在插入查询中给你的字段一个值（即使它是一个空值）。

要具有默认值，您应该将插入更改为

```
insert into rjy (compy_id, reqrmnt, veh_type, go_type, weigh, ,l_end) 
values ('123456', '111', '12 ty', 'white cemt', '1 tons', 'mumbai'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T11:42:13.360

不要在插入查询中包含该列。做这个：

```
insert into rjy (compy_id, reqrmnt, veh_type, go_type, weigh, l_end) 
values ('123456', '111', '12 ty', 'white cemt', '1 tons', 'mumbai'); 
```

# javascript - 在 Javascript 中捕获复制/粘贴/选择

> ID：10140106
> 
> 赞同：3
> 
> 时间：2012-04-13T11:39:46.857
> 
> 标签：javascript, asp.net

如何在`Textbox`使用中捕获以下键`JavaScript`？

`Ctl`+`a`

`Ctl`+`c`

`Ctl`+`v`

## 以下是原来的情况。

我有三个`Textboxes`电话号码。`Textbox1`最大长度是 3，第二个是 3，第三个是 4。当用户在`TextBox1`光标中键入三个数字时，会自动移动到`TextBox2`TextBox2 和 TextBox3 发生相同的事情。我在 keyup 事件中处理这个功能。现在，我正在并行使用您的代码。但它也会在 keyup 事件中移动。当所有文本框都被填充时，就会发生这种情况。现在假设我在 TextBox1 中并按 Ctl + A 。这会将用户移动到第三个 TextBox（不可接受的情况）。这就是问题所在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T11:44:18.333

分别使用`select`,[`copy`](https://developer.mozilla.org/en/DOM/element.oncopy)和[`paste`](https://developer.mozilla.org/en/DOM/element.onpaste)事件。这些天几乎得到普遍支持。

```
var textBox = document.getElementById("textBoxId");
textBox.onpaste = function() {
    alert("paste");
}; 
```

对于其他事件也是如此。在这里演示：http: [//jsfiddle.net/timdown/EC2Hf/](http://jsfiddle.net/timdown/EC2Hf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:44:53.213

那么右键单击，不使用控件的osx，浏览器上的编辑复制选项，旧键盘上的按钮等呢？

不仅仅是按键。

也就是说，大多数浏览器都支持

[oncopy](https://developer.mozilla.org/en/DOM/element.oncopy)和[onpaste](https://developer.mozilla.org/en/DOM/element.onpaste)事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T11:45:01.267

您必须首先检查是否单击了 ctrl 按钮，然后检查相应的字母键。这个[链接](http://www.arraystudio.com/as-workshop/disable-ctrl-n-and-other-ctrl-key-combinations-in-javascript.html)可以帮助你

# javascript - JavaScript变量赋值不起作用

> ID：10140111
> 
> 赞同：0
> 
> 时间：2012-04-13T11:40:15.053
> 
> 标签：javascript

我遇到了一个愚蠢的问题……我声明了一个名为leadingZero 的新变量。我保存修改后的 .js 文件并在leadingZero 赋值上使用断点运行项目，并且在观察器窗口中它在通过此行后显示它未定义，但这里的所有其他声明都工作正常，我可以看到分配的值。不用说 getObject 调用现在不起作用。

```
var leadingZero = 0; //new variable
var chkActive; 
var chkSubscribe; 
var hdnItem = getObject('hdnItemCounter');
var ItemCount = parseInt(hdnItem.value) + 1;

for (intCounter = 2; intCounter <= ItemCount; intCounter++) {
  chkActive = getObject('dgrProductList_ctl0' + leadingZero + intCounter + '_chkActive');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:45:47.510

检查这个[http://jsfiddle.net/DHDsE/](http://jsfiddle.net/DHDsE/)

没有得到未定义的问题，但必须将 toString() 添加到leadingZero 才能在console.log 中呈现，所以也许这也是你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:08:44.220

您确实在下面的行设置了断点，不是吗？

因为如果你将它设置在行上`var leadingZero = 0;`它会在行被评估之前停止，这解释了观察者中的未定义值。

此外，正如 gillesc 指出的那样，您`leadingZero`必须是一个字符串，否则您将添加`intCounter`and `leadingZero`，而不是将它们连接起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T10:04:25.410

问题似乎是对 js 的更改没有加载到 ie 缓存中。即使在关闭 ie 后，重新构建项目并再次运行，我仍然需要在页面上按 ctrl+f5 来加载新的 javascript

# c# - Xna GameEngine 跨平台

> ID：10140112
> 
> 赞同：-2
> 
> 时间：2012-04-13T11:40:21.163
> 
> 标签：c#, android, ios, xna

我想和我的朋友开始为 android/ios 编写游戏，我们正在寻找用于 XNA c# 编程的优秀游戏引擎，有人可以推荐一些从期望 unity/udkengine 开始的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T11:41:37.150

> 用于 XNA c# 编程的优秀游戏引擎

有许多。

您可以检查[MonoGame](http://monogame.codeplex.com/)和[OpenTK](http://www.opentk.com/)。

> 我想开始为 android/ios 写游戏

试试[MonoTouch](http://xamarin.com/monotouch)

# android - Android：图像下载问题

> ID：10140115
> 
> 赞同：0
> 
> 时间：2012-04-13T11:40:38.033
> 
> 标签：android

我有一个应用程序，我在其中下载并在线程中显示图像。一切正常。但是当图像被加载时，相同的图像被加载到两到三个位置，并且当我们滚动屏幕图像时加载正确。请问你们中的任何人都可以对此提出任何建议吗？

代码：

```
try{
    holder.progress.setVisibility(View.VISIBLE);
    DownLoadImageInAThreadHandler(Item, holder);

}
catch(Exception e)
{
    System.out.println("Exception in Downloading image : " + e.getMessage());
}
return convertView;
}

//This code is outside the getview method
public void DownLoadImageInAThreadHandler(final CategoryData Item, final ViewHolder holder)
{
    nImageDownLoads++;

    System.out.println("The images being downloaded :" + nImageDownLoads);

    final Handler handler = new Handler()
    {
        @Override  public void handleMessage(Message message)
        {
            holder.imgitem.setImageDrawable((Drawable) message.obj);
            holder.imgitem.setVisibility(View.VISIBLE);
            holder.progress.setVisibility(View.GONE);
        }
    };
    //Thread for downloading the images
    Thread t = new Thread()
    {
        public void run()
        {
            try
            {
                Item.bImageDownLoaded = 2;
                System.out.println("Downloading image      :"+Item.ImageUrl);
                drawable=getDrawableFromUrl(Item.ImageUrl);
                nImageDownLoads--;
                System.out.println("Downloaded image :" + Item.ImageUrl);
                System.out.println("Remaining images for downloading: " + nImageDownLoads);
                if(drawable != null)
                {                                                          
                    Item.bImageDownLoaded = 1;
                    //Send the message to the handler
                    Message message = handler.obtainMessage(1, drawable);
                    handler.sendMessage(message);
                }
                else{
                    int idNoImage = R.drawable.giftsuggestionsnoimage;
                    Drawable dwgNoImg = getParent().getResources().getDrawable(idNoImage);

                    //Send the message to the handler
                    Message message = handler.obtainMessage(1, dwgNoImg);
                    handler.sendMessage(message);
                }
            }
            catch(Exception exp)
            {
                System.out.println("Exception in DownLoadImageInAThread : " + exp.getMessage());
            }
        }

        private Drawable getDrawableFromUrl(String imageUrl) throws IOException
        {
            try
            {
                image = DownloadDrawable(imageUrl, "src");
                //bmp = readBitmapFromNetwork(new URL(imageUrl));
            }
            catch (IOException e)
            {
                e.printStackTrace();
            }
            return image;
            //return bmp;
        }
    };
    t.start();
}

Drawable DownloadDrawable(String url, String src_name) throws java.io.IOException
{
    return Drawable.createFromStream(((java.io.InputStream) new java.net.URL(url).getContent()),  src_name);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:14:50.057

你在使用 ListView 吗？如果是这样，当您在其中写入图像时，该视图是否可能已经被 ListView 回收（重新用于显示另一个列表项）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:15:44.187

发生问题是因为您已经编写了在`getView()`方法中加载图像的代码。

每次滚动列表时都会调用该方法。

所以这是一个糟糕的想法，根本不是好主意。

从那里删除该代码..加载图像并在其他`thread`或`AsyncTask` 然后调用`notifyDataSetChanged()`您的`Adapter class`对象。

只是我指示要做的步骤，请仔细阅读并尝试实施，如果无法理解任何内容，请随时询问..抱歉无法粘贴任何代码片段..

> ListView 适配器的 getView() 方法
> 
> ```
> show default icon if array doesn't contain bitmap at that position
> if bitmap is there show bitmap else show default icon
> 
> AsyncTask to Load Data
> 
> do in background
> load data and show in listview
> 
> AsyncTask to Load Images
> 
> do in background
> download images one bye one from the urls got in first AsyncTask
> in onPostExecute call adapter's notifyDataSetChanged() to show the bitmaps too
> 
> you can also call onProgressUpdate periodically means..after 2-3 image download 
> call publishProgress in doInBackground which will call onProgressUpdate and 
> in that method also write adpater.notifyDataSetChanged() to 
> reflect currently downloaded/available bitmaps in array 
> ```

# bash - 代码不适用于 sh -c，而是直接对 sh 有效

> ID：10140116
> 
> 赞同：3
> 
> 时间：2012-04-13T11:40:38.273
> 
> 标签：bash, shell, sh

```
$ sh
sh-3.2$ if
> ps -ef | grep apple ;
> then
> echo APPLE 
> fi ;
lazer   7584  7571  0 04:36 pts/4    00:00:00 grep apple
APPLE
sh-3.2$ exit
exit
$ which sh
/bin/sh
$ /bin/sh -c if ps -ef | grep apple ; then echo APPLE fi ;
bash: syntax error near unexpected token `then'
$ 
```

如上所述，我的简单 if 语句在逐行执行时按预期工作，但在使用执行时给我以下错误`sh -c`：

> bash：意外标记“then”附近的语法错误

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:42:53.420

您的交互式 shell 将通过`sh -c`. 特别是它把分号后面的每一个都作为一个新的声明。

引用你要喂的所有东西，`/bin/sh`例如

```
$ /bin/sh -c "if ps -ef | grep apple ; then echo APPLE fi ;" 
```

我认为您可能还需要使用分号进一步分隔，因为您将所有内容压缩到一行，并且可能建议您可以使用[heredoc](http://tldp.org/LDP/abs/html/here-docs.html)。

# cordova - 其他平台上的PhoneGap API 元素，使用PhoneGap Build

> ID：10140119
> 
> 赞同：0
> 
> 时间：2012-04-13T11:40:51.207
> 
> 标签：cordova, build

1.  我遵循了 iOS 的 PhoneGap 入门指南 (http://phonegap.com/start#ios-x4)。然后我在我的项目中使用了相机功能（http://docs.phonegap.com/en/1.6.0/cordova_camera_camera.md.html#Camera - 我使用了完整示例）。它在 iPhone 上运行良好。

2.  之后，我也使用 PhoneGap Build 为其他平台构建了我的项目（https://build.phonegap.com/）。我下载了 Android .apk 文件，但相机无法在 Android 手机上运行。

我想问题可能是，我使用的是 PhoneGap iOS 版本，正如我在 1\. 步骤中描述的那样，而对于 Android，也许我应该使用 Android 版本的 PhoneGap ......但我不知道如何使用Android js 文件的PhoneGap 无需设置整个Android 开发环境（我认为这应该是PhoneGap Build 的用途）。

你有什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:28:52.760

我找到了解决这个问题的方法 :) 我只需在 index.html 中插入以下内容：

```
<script src="phonegap.js"></script> 
```

在我插入这一行的那一刻，phonegap.js 文件还没有在 www 目录中，但是它会在为不同平台构建的那一刻生成。所以我不必设置Android开发环境来获取.apk文件，它在android手机上运行（我只是使用PhoneGap Build来获取这个文件）。

# c# - ASP.NET MVC 中的购物车和并发

> ID：10140128
> 
> 赞同：1
> 
> 时间：2012-04-13T11:41:15.320
> 
> 标签：c#, asp.net-mvc

我刚刚开始考虑构建一个购物车，而设计它时出现的问题之一是在这种情况下该怎么做 - 假设产品 A 的剩余库存水平为 5。然后客户 A 到达页面他们可以选择他们需要的数量，他们选择了3。但是他们还没有确认订单/付款等。然后客户B来到现场并选择了4的数量。然后出现的问题是如果两个客户都确认他们的订单，其中一个会遇到错误，因为在他们做出选择后库存水平会降低。处理这个问题的标准方法是什么？是否可能创建一个“保留”字段并在每次用户选择数量时添加到其中，以便在他们确认或取消之前保留该库存？如果他们不取消而只是离开网站怎么办？

只是从任何可能已经处理过这个问题的人那里寻找一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:55:50.500

在计算特定产品的可用库存时，您应该考虑“库存预留”。您决定何时将某个购物车行置于“预订”模式以及何时再次“释放”它。

我已经实现了一个商店，其中**在用户开始付款时“保留”**库存，并**在用户取消付款时“释放”**或**在付款成功时“发出”**。

不要忘记在预订时仔细检查可用库存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:49:06.790

好，

在用户没有确认订单之前，您不应该保留库存。如果我在您之前购买了产品，您应该会收到一条消息，告诉您有人已经购买了它，或者只是库存不足

它会让你摆脱很多头痛

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T11:51:08.367

我的理解是您想要实施购物卡并且您面临一个问题，而不止一个用户登录并托盘购买东西:)

这是解决方案..出现问题是因为购物卡是用户之间共享的。您可以只为登录用户维护一个购物卡的 tmp 列表。当他们准备付款时，将其添加到购物卡中并显示详细信息。

注意：您必须在执行此操作时处理库存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T12:04:12.990

我可以建议您不要锁定用户项目，直到他到达订单确认页面，并使用合适的锁定持续时间标记项目保留特定持续时间，在此之前订单应该完成，否则项目将反映在库存中. 如果您查看[亚马逊购物车帮助页面](http://www.amazon.com/gp/help/customer/display.html?nodeId=540842)，它是这样说的

> 将商品放入购物车不会为您保留该商品。只有在您单击“下订单”按钮并收到我们已收到您的订单的电子邮件确认后，才会为您的订单保留商品。

一个极端的情况是在最终订单完成之前不预订，或者只有在您到达付款页面时才预订。

您需要最小化阻塞窗口并处理存在冲突的情况（通过提供延期交货选项）

# matlab - MATLAB 撤消命令

> ID：10140139
> 
> 赞同：7
> 
> 时间：2012-04-13T11:42:02.470
> 
> 标签：matlab, undo

我目前正在 MATLAB 上开发一个基本的图像处理应用程序。我必须实现对先前状态功能的**撤消。**我在网上搜索了**uiundo**但它只撤消 GUI 操作。有没有简单的撤消命令。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T11:47:18.007

[在我看来，您必须使用命令模式](http://en.wikipedia.org/wiki/Command_pattern)来实现自己的多级（或单级）撤消。

这将要求您将操作包装到包含执行操作和恢复状态的逻辑的对象中。没有灵丹妙药，需要努力。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-13T13:20:41.877

如果您有足够的内存可用，您可以将所有程序状态存储在一个结构中，然后将该结构推入一个[循环缓冲区](http://blogs.mathworks.com/videos/2009/05/08/implementing-a-simple-circular-buffer/)。缓冲区中元素的数量将决定撤消的级别数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T15:19:24.163

一般撤消会很复杂，但如果您只对保存 MATLAB 变量的状态并返回到已保存状态感兴趣，这可能是一种可能的解决方案：

保存状态.m：

```
SavedStateFolder = '/home/user/matlab_saved_states_folder/';
save([ SavedStateFolder, 'saved_state_', sprintf('%06d', (size(dir(SavedStateFolder), 1) - 1)) ]); 
fprintf('state saved in saved_state_%s.mat\n', sprintf('%06d', (size(dir(SavedStateFolder), 1) - 2))); 
```

undo_index.m：

```
function undo_index()
SavedStateFolder = '/home/user/matlab_saved_states_folder/';
FilesStruct = dir(SavedStateFolder);
LastSavedStateIndex = size(FilesStruct, 1) - 2;
if (LastSavedStateIndex < 1)
    fprintf('No saved states available.\n');
else    
    fprintf('Index of last saved state is %06d\n', LastSavedStateIndex);
end
return 
```

撤消.m：

```
SavedStateFolder = '/home/user/matlab_saved_states_folder/';
load([ SavedStateFolder, 'saved_state_', sprintf('%06d', input('Enter saved state index ')) ]); 
```

然后，您可以使用`save_state`保存 MATLAB 变量的状态，或者`save_state;`如果您想跟踪所有更改，您甚至可以为所有命令添加前缀。当您想返回变量的先前状态时，您可以运行`undo_index`以找出上次保存状态的索引，然后您可以运行`undo`并输入由 给出的索引`undo_index`，或者任何较小的正整数以返回变量的早期状态. 第一个保存的状态文件将命名为`saved_state_000001.mat`，然后`saved_state_000002.mat`以此类推...请注意，`save_state`将所有内容保存到磁盘，因此如果您想在包含大量数据的循环中尝试此操作，则使用 SSD 或 RAM 磁盘可能是个好主意。另请注意，`SavedStateFolder`当您运行`save_state`或`undo`. 为避免这种情况，您可以使用硬编码的文件夹名称替换`SavedStateFolder`in`save.state.m`和的所有实例`undo.m`，例如：

保存状态.m：

```
save([ '/home/user/matlab_saved_states_folder/', 'saved_state_', sprintf('%06d', (size(dir('/home/user/matlab_saved_states_folder/'), 1) - 1)) ]); 
fprintf('state saved in saved_state_%s.mat\n', sprintf('%06d', (size(dir('/home/user/matlab_saved_states_folder/'), 1) - 2))); 
```

撤消.m：

```
load([ '/home/user/matlab_saved_states_folder/', 'saved_state_', sprintf('%06d', input('Enter saved state index ')) ]); 
```

还要注意`save_state`,`undo_index`并`undo`假设除了,和文件`SavedStateFolder`之外没有其他文件。通过这种方式也可以找到要保存的文件数和运行索引，因此如果您删除了一些以前的文件，而没有例如。创建相同数量的空文件来替换它们，计数不匹配并且可能将状态保存在已经存在的已保存状态文件之上。`.``..``saved_state_*.mat``saved_state_*.mat``saved_state_*.mat``save_state`

# java - JodaTime PeriodFormat，经过时间，只有 1 个字段

> ID：10140141
> 
> 赞同：6
> 
> 时间：2012-04-13T11:42:05.200
> 
> 标签：java, date, jodatime

我们如何仅用 1 个字段显示经过的时间。

例如

*   期间 = 1 年 4 个月零 5 天 ==> 结果 = “1 年前”
*   期间 = 3 个月 5 天 ==> 结果 = “3 个月前”
*   期间 = 4 小时 5 分钟 ==> 结果 = “4 小时前”

所以我只想要最高的可用字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T10:11:03.020

Joda-Time 中没有方法可以做到这一点，因此您必须手动依次测试每个字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-04T18:32:50.457

这会起作用

```
val startDate = new DateTime(millis).withZone(dateTimeZone)
val endDate = new DateTime(dateTimeZone)

val period = new Period(startDate, endDate)

val localized = PeriodFormat.wordBased(localeLanguageCode).print(period)
val splitted = localized.split(",|and") 
```

因此，拆分后的值将是一个包含周期段的数组，从较大的周期到较小的周期。

数组的 Head 是您要查找的值。

```
slitted.head + "Ago." 
```

*您应该根据您的区域设置更改拆分方法上的 REGEX 模式，或者您是否使用自定义格式化程序而不是默认格式化程序 (PeriodFormatterBuilder)

前任。数组（“4 年”、“2 个月”、“5 天”、“18 小时”、“15 分钟”、“10 秒”、“50 毫秒”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T23:43:14.277

显而易见的算法是测试年 > 0，在这种情况下你使用它，如果不测试月 > 0 等等。可能会有更优雅的东西，但它可以在不到 15 行代码中工作......

# javascript - 使用两次正向前瞻在.Net 1.1 上不起作用

> ID：10140142
> 
> 赞同：2
> 
> 时间：2012-04-13T11:42:06.323
> 
> 标签：javascript, .net, regex

我使用 RegularExpressionValidator 控件来验证名为 TextBox1 的 TextBox 控件，它是 VS2003 Web 应用程序中的 Web 表单，如下所示：

```
<asp:TextBox id="TextBox1" runat="server"></asp:TextBox>
<asp:RegularExpressionValidator id="RegularExpressionValidator1" runat="server" ErrorMessage="Fromat error."
 ValidationExpression="^(?=.*[0-9])(?=.*[a-zA-Z]).{8,10}$" ControlToValidate="TextBox1"></asp:RegularExpressionValidator> 
```

当我输入字符串“qwer1asd”时，它不匹配。但同样的正则表达式：

```
^(?=.*[0-9])(?=.*[a-zA-Z]).{8,10}$ 
```

...在 JavaScript 中匹配。我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:09:38.453

试试这个正则表达式：

```
^(?=.{8,10}$)(?=.*[0-9])(?=.*[a-zA-Z]).+$ 
```

旧版本的 Internet Explorer（在[此处](http://blog.stevenlevithan.com/archives/regex-lookahead-bug)描述）中存在一个错误，导致这样的正则表达式在客户端失败，即使它在服务器上工作也是如此。（这听起来与您所描述的相反，但我看不出您的正则表达式会失败的任何其他原因。）将长度检查移至第一个前瞻是该错误的行之有效的解决方法。

# sql - Microsoft SQL Server Like 关键字

> ID：10140145
> 
> 赞同：4
> 
> 时间：2012-04-13T11:42:13.143
> 
> 标签：sql, sql-server, tsql, collation

在 Microsoft SQL Server 中制作 Like 关键字的任何输入都区分大小写。

例如： Name Like 'David' 得到所有名字 David 或 david 或 daVid 等。我的目标是只得到 David。我有兴趣从专家那里了解不同的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T11:45:01.847

您需要使用排序规则。

```
SELECT * FROM myTable  
WHERE LastName COLLATE Latin1_General_CS_AS = 'smyTH' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T12:31:41.883

这是一个使用`Darren Davis`s 答案的示例

```
declare @tmp table (LastName nvarchar(10))

insert @tmp
select ('Gorijavolu')

select  LastName As 'CorrectCase' from  @tmp WHERE SUBSTRING(LastName,1,4) COLLATE Latin1_General_CS_AS = 'Gori'
select  LastName AS 'WrongCase' from    @tmp WHERE SUBSTRING(LastName,1,4) COLLATE Latin1_General_CS_AS = 'gori' 
```

给出：

```
CorrectCase
-----------
Gorijavolu
(1 row(s) affected)

WrongCase
----------

(0 row(s) affected) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T11:44:37.990

这取决于您使用的数据库。例如，如果您为表或数据库选择不区分大小写的排序规则，则 MySQL 不区分大小写，否则不区分大小写。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T11:45:11.877

`LIKE` [在 PostgreSQL](http://www.postgresql.org/docs/8.3/static/functions-matching.html)中是区分大小写`ILIKE`的，但不区分大小写。因此，这取决于您使用的 DBMS。

# xml - 我如何递归计算 XSLT 1.0 中的待办事项数量

> ID：10140155
> 
> 赞同：1
> 
> 时间：2012-04-13T11:43:01.690
> 
> 标签：xml, xslt, recursion, aggregate, xslt-1.0

我们的一项服务提供了一个列出待办事项集合的 xml 文档。Todo 的结构可以嵌套在 todolist 下。每个单身`todo item`人士都会有父母`todo list`。我需要使用 XSL 来显示当前 parent 的 todo-items 数量`todo-list`。请在下面找到xml的结构

```
<TodoListCollection>
  <TodoList>
    <Id>1</Id>
    <ParentId></ParentId>
    <Count>3</Count>
    <TodoItemCollection>
      <TodoItem></TodoItem>
      <TodoItem></TodoItem>
      <TodoItem></TodoItem>
    </TodoItemCollection>
  </TodoList>
  <TodoList>
    <Id>2</Id>
    <ParentId>1</ParentId>
    <Count>4</Count>
    <TodoItemCollection>
      <TodoItem></TodoItem>
      <TodoItem></TodoItem>
      <TodoItem></TodoItem>
      <TodoItem></TodoItem>
    </TodoItemCollection>
  </TodoList>
</TodoListCollection> 
```

在第一次迭代中`TodoList ID = 1`，我应该能够得到`3 + 4 = 7`总数。因为第一个待办事项集合中有**3 个**，然后子待办事项集合中有**4 个**`ParentId = 1`( )。这里的嵌套只是一层，但我们将其设计为 N 层。

**注意：** 您可以在此处在线尝试查询[http://chris.photobooks.com/xml/default.htm](http://chris.photobooks.com/xml/default.htm)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:59:03.323

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kChildren" match="TodoList" use="ParentId"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="/*">
   <xsl:variable name="vrtfPass1">
    <xsl:copy>
     <xsl:apply-templates select="key('kChildren', '')"/>
    </xsl:copy>
   </xsl:variable>

   <xsl:variable name="vPass1" select="ext:node-set($vrtfPass1)"/>
   <xsl:apply-templates select="$vPass1/*" mode="pass2"/>
 </xsl:template>

 <xsl:template match="TodoList">
   <xsl:copy>
    <xsl:apply-templates />
    <xsl:apply-templates select="key('kChildren', Id)"/>
   </xsl:copy>
 </xsl:template>

 <xsl:template match="node()|@*" mode="pass2">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*" mode="pass2"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="TodoList" mode="pass2">
   <xsl:copy>
    <xsl:apply-templates select="*[not(self::TodoList)]" mode="pass2"/>
   </xsl:copy>
   <xsl:apply-templates select="TodoList" mode="pass2"/>
 </xsl:template>

 <xsl:template match="Count" mode="pass2">
  <Count>
   <xsl:value-of select="sum(..//Count)"/>
  </Count>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下 XML 文档时**（基于提供的，但具有更深层次的层次结构）：

```
<TodoListCollection>
    <TodoList>
        <Id>1</Id>
        <ParentId></ParentId>
        <Count>3</Count>
        <TodoItemCollection>
            <TodoItem></TodoItem>
            <TodoItem></TodoItem>
            <TodoItem></TodoItem>
        </TodoItemCollection>
    </TodoList>
    <TodoList>
        <Id>2</Id>
        <ParentId>1</ParentId>
        <Count>7</Count>
        <TodoItemCollection>
            <TodoItem></TodoItem>
            <TodoItem></TodoItem>
            <TodoItem></TodoItem>
            <TodoItem></TodoItem>
        </TodoItemCollection>
    </TodoList>
    <TodoList>
        <Id>3</Id>
        <ParentId>2</ParentId>
        <Count>5</Count>
        <TodoItemCollection>
            <TodoItem></TodoItem>
            <TodoItem></TodoItem>
            <TodoItem></TodoItem>
            <TodoItem></TodoItem>
        </TodoItemCollection>
    </TodoList>
    <TodoList>
        <Id>4</Id>
        <ParentId>3</ParentId>
        <Count>3</Count>
        <TodoItemCollection>
            <TodoItem></TodoItem>
            <TodoItem></TodoItem>
            <TodoItem></TodoItem>
            <TodoItem></TodoItem>
        </TodoItemCollection>
    </TodoList>
    <TodoList>
        <Id>5</Id>
        <ParentId>2</ParentId>
        <Count>1</Count>
        <TodoItemCollection>
            <TodoItem></TodoItem>
            <TodoItem></TodoItem>
            <TodoItem></TodoItem>
            <TodoItem></TodoItem>
        </TodoItemCollection>
    </TodoList>
</TodoListCollection> 
```

**产生想要的正确结果**：

```
<TodoListCollection>
   <TodoList>
      <Id>1</Id>
      <ParentId/>
      <Count>19</Count>
      <TodoItemCollection>
         <TodoItem/>
         <TodoItem/>
         <TodoItem/>
      </TodoItemCollection>
   </TodoList>
   <TodoList>
      <Id>2</Id>
      <ParentId>1</ParentId>
      <Count>16</Count>
      <TodoItemCollection>
         <TodoItem/>
         <TodoItem/>
         <TodoItem/>
         <TodoItem/>
      </TodoItemCollection>
   </TodoList>
   <TodoList>
      <Id>3</Id>
      <ParentId>2</ParentId>
      <Count>8</Count>
      <TodoItemCollection>
         <TodoItem/>
         <TodoItem/>
         <TodoItem/>
         <TodoItem/>
      </TodoItemCollection>
   </TodoList>
   <TodoList>
      <Id>4</Id>
      <ParentId>3</ParentId>
      <Count>3</Count>
      <TodoItemCollection>
         <TodoItem/>
         <TodoItem/>
         <TodoItem/>
         <TodoItem/>
      </TodoItemCollection>
   </TodoList>
   <TodoList>
      <Id>5</Id>
      <ParentId>2</ParentId>
      <Count>1</Count>
      <TodoItemCollection>
         <TodoItem/>
         <TodoItem/>
         <TodoItem/>
         <TodoItem/>
      </TodoItemCollection>
   </TodoList>
</TodoListCollection> 
```

**说明**：

这是一个两遍转换：

1.  在第一遍中，文档根据父 --> id 关系从平面转换为层次结构。

2.  在第二遍中，pass1 的结果被转换回平面文档。`Count`元素被调整为包含`Count`它们最里面的子树中所有元素的总和。

3.  `TodoList`如果我们希望最终结果包含按其排序的元素，则可能需要第三遍`Id`。

# actionscript-3 - 如何将使用 StageWebView 加载的文件（mp4 或 pdf）保存到 iPhone 目录？

> ID：10140159
> 
> 赞同：1
> 
> 时间：2012-04-13T11:43:26.653
> 
> 标签：actionscript-3, flash, air

我正在使用 StageWebView 在我的 iPhone 应用程序中加载 mp4 和 pdf 文件（Adobe air 3.2 for iOS，在 Flash CS5.5 中）

下面是我用来加载 pdf 文件的代码（加载 mp4 文件的代码相同）。

我需要将文件保存在 iPhone 上，所以下次用户打开应用程序时，我会检查文件是否存在，我会使用 FileStream.open(filePath, FileMode.READ); 有没有办法保存使用 StageWebView 加载的文件？如果没有，最好的方法是什么。

```
import flash.filesystem.FileMode;
import flash.filesystem.FileStream;
import flash.filesystem.File;

var fPath:String = "http://www.bloomerangs.com/Axor/Water-Bath-Design Museum - short version.pdf";

var webView = new StageWebView();
webView.stage = stage;
webView.viewPort = new Rectangle(0, 32, 320, 480);
webView.addEventListener(Event.COMPLETE, onComplete);
webView.loadURL( fPath );

function onComplete(event:Event):void{
    trace("event = ", event);
    trace("event.target = ", event.target);
} 
```

提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:43:05.157

你想节省带宽（缓存几个文件），对吧？然后您可以将文件下载（保存）到 File.applicationStorageDirectory（使用 URLStream）并稍后使用 StageWebView（[http://forums.adobe.com/thread/928558](http://forums.adobe.com/thread/928558)）打开它

[使用 AIR for iOs 下载和保存文件](https://stackoverflow.com/questions/7040011/downloading-and-saving-files-with-air-for-ios)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T11:15:27.963

谢谢帕维尔 fljōt。

我使用 URLLoader 进行文件下载。

```
import flash.events.Event;
import flash.filesystem.FileMode;
import flash.filesystem.FileStream;
import flash.filesystem.File;

var urlLoader = new URLLoader();
urlLoader.dataFormat = URLLoaderDataFormat.BINARY;
urlLoader.addEventListener(ProgressEvent.PROGRESS, onLoadFileProgress);
urlLoader.addEventListener(Event.COMPLETE, onLoadFileComplete);
urlLoader.load(new URLRequest("http://www.yourdomain.com/videos/myVideo.mp4"));

function onLoadFileProgress(e:ProgressEvent):void{
    var loadedPct:uint = Math.round(100 * (e.bytesLoaded / e.bytesTotal));
    trace_txt.text = loadedPct + "% loaded.";
}

function onLoadFileComplete(e:Event):void{
    trace_txt.text = "File loaded";
    var file:File = File.documentsDirectory.resolvePath("myVideo_copied.mp4")
    var fileStream:FileStream = new FileStream();
    fileStream.openAsync(file, FileMode.WRITE);
    fileStream.addEventListener(OutputProgressEvent.OUTPUT_PROGRESS, outputProgressHandler);
    fileStream.addEventListener(Event.CLOSE, onVideoSaveClose);
    fileStream.writeBytes(e.target.data);
    fileStream.close();
}
function outputProgressHandler(event:OutputProgressEvent):void{
    if (event.bytesPending == 0){
        trace_txt.text = "File is completely written";
    }
}

var stageWebView = new StageWebView();
function onVideoSaveClose(event:Event):void {
    trace("closed");
    stageWebView.stage = this.stage;
    stageWebView.viewPort = new Rectangle(0, 0, 1024, 768);
    var file:File = File.documentsDirectory.resolvePath("myVideo_copied.mp4")
    stageWebView.loadURL(file.url);
} 
```

# umbraco - 找不到 nodeId = 1245 的任何页面。这很可能是由于页面未发布造成的！参数名称：nodeId

> ID：10140162
> 
> 赞同：0
> 
> 时间：2012-04-13T11:43:33.173
> 
> 标签：umbraco, umbraco-blog

我正在使用 Umbraco 4.7 的本地安装，我从[http://blog4umbraco.codeplex.com/](http://blog4umbraco.codeplex.com/)下载了“Umbraco 博客”并将其安装在我的 Umbraco 安装中。

在内容树中，我导航到博客文件夹，右键单击并创建一个新的博客文章。创建后我保存并发布它，但它给出了以下错误：

***找不到 nodeId = 1245 的任何页面。这很可能是由于页面未发布造成的！参数名称：nodeId***

我检查了节点 1245 并没有出现在**App_Data\Umbraco.config**中，但它出现在**cmsContentXml**表的数据库中。

知道如何解决这个问题吗？

我读到我可以再次构建 DLL，但我没有这样做的专业知识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:11:29.280

您是否从另一个 umbraco 实例安装或手动复制了任何 3rd 方包？

我发现我已经复制了一半的 301-url-tracker 包，然后阻止节点（从未发布过）被删除。

虽然我的错误是针对 nodeid=0 我不禁认为问题可能相同。

[http://our.umbraco.org/forum/using/ui-questions/28216-Can-not-delete-a-content-tree-entity](http://our.umbraco.org/forum/using/ui-questions/28216-Can-not-delete-a-content-tree-entity)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T04:13:22.480

沿着内容树向上工作，并确保每个父节点都已发布并且在节点属性中显示了一个 URL。

我在使用 uDateFoldersy 包时遇到了类似的问题，发现父年份文件夹没有使用 URL 发布。一旦我重新发布，子节点又开始正常工作。

# hibernate - JBoss 5.1：使用 JPA 休眠

> ID：10140170
> 
> 赞同：6
> 
> 时间：2012-04-13T11:44:19.330
> 
> 标签：hibernate, jpa-2.0, jboss5.x

关于 JBoss 5.1，我有两个问题要问。我们正在从 JBoss 4.2 迁移到 JBoss 5.1。

我们还使用 Java 1.6 和 JPA 2.0 以及 Hibernate 3.6 作为提供者。

我的问题是：

1.  是否可以将 Hibernate 3.6+ 与 JBoss 5.1 一起使用。如果是，那么如何？
2.  JPA 2.0 怎么样？我知道 JBoss 5.1 带有 JPA 1.0 兼容性。我们可以使用 JPA2 吗？

由于我们无法对 JBoss 安装进行任何类型的配置，所有的修复都只需要在我们的应用程序中完成。

提前致谢， JassB

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T18:05:24.777

我今天刚遇到同样的问题，在尝试了很多替代方案并到处询问之后，答案是否定的

您不能将 JPA 2.0 与 Jboss 5.1 一起使用（如果您无法更改服务器的配置，则更是如此）

但是我见过 hibernate3.X 在 Jboss5.1 上工作，但从来没有使用注释功能：只有旧的 XML 配置方式。

现在，在我看来，你有两个解决方案：要么要求服务器升级，要么用旧的方式改变你的数据访问系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T08:45:07.723

做这个：

1）将 jboss-classloading.xml 添加到 /src/main/webapp （我使用的是 Maven）：

内容：

```
<?xml version="1.0" encoding="UTF-8"?>

<classloading xmlns="urn:jboss:classloading:1.0"

         domain="$UNIQUE_DOMAIN_NAME"

         export-all="NON_EMPTY"

         import-all="false"

         parent-first="false">

</classloading> 
```

2) 修改$JBOSS_INSTALL_DIRECTORY/jboss-as/server/$PROFILE/conf/bootstrap/deployers.xml，在末尾添加如下内容：

> ```
> <bean name="IgnoreFilesDeployer"
> 
> class="org.jboss.deployers.vfs.spi.deployer.AbstractIgnoreFilesDeployer"
> 
> </bean> 
> ```

3）在META-INF文件夹中创建一个文件JBOSS-IGNORE.TXT，内容如下：

> WEB-INF/classes/META-INF/persistence.xml

4）我已将我的 persistence.xml 重命名为 spring-persistence.xml 并将此文件添加到 context.xml 中：

> ```
> <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
>       <property name="persistenceXmlLocation" value="classpath:/META-INF/spring-persistence.xml"/>
>            ....
> </bean> 
> ```

5）我还修改了spring-persistence.xml（保存在webapp\META-INF文件夹中的persistence_2_0.xsd）为

```
 <persistence version="2.0"
 xmlns="http://java.sun.com/xml/ns/persistence"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="file:///persistence_2_0.xsd 
        http://java.sun.com/xml/ns/persistence">
....
</persistence> 
```

# java - 处理 Hadoop 中 reduce 步骤的大输出值

> ID：10140171
> 
> 赞同：4
> 
> 时间：2012-04-13T11:44:24.573
> 
> 标签：java, memory, hadoop, mapreduce, stringbuilder

在我的 MapReduce 程序的 Reduce 阶段，我执行的唯一操作是连接提供的 Iterator 中的每个值，如下所示：

```
public void reduce(Text key, Iterator<text> values,
                    OutputCollector<Text, Text> output, Reporter reporter) {
    Text next;
    Text outKey = new Text()
    Text outVal = new Text();
    StringBuilder sb = new StringBuilder();
    while(values.hasNext()) {
        next = values.next();
        sb.append(next.toString());
        if (values.hasNext())
            sb.append(',');
    }
    outKey.set(key.toString());
    outVal.set(sb.toSTring());
    output.collect(outKey,outVal);
} 
```

我的问题是一些减少输出值是*大行*文本；如此之大，以至于即使初始大小非常大，字符串缓冲区也必须将其大小增加（加倍）数倍以容纳迭代器的所有上下文，从而导致内存问题。

在传统的 Java 应用程序中，这表明缓冲写入文件将是写入输出的首选方法。如何在 Hadoop 中处理超大的输出键值对？我应该将结果直接流式传输到 HDFS 上的文件（每个 reduce 调用一个文件）吗？除了 output.collect 方法之外，有没有办法缓冲输出？

注意：我已经尽可能地增加了我的内存/堆大小。此外，一些消息来源表明，增加 reducer 的数量可以帮助解决内存/堆问题，但这里的问题已直接追溯到 SringBuilder 在扩展其容量时的使用。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T02:21:50.670

并不是说我理解您为什么想要拥有巨大的价值，但是有一种方法可以做到这一点。

如果您编写自己的 OutputFormat，则可以修复`RecordWriter.write(Key, Value)`方法的行为以根据 Key 值是否为空来处理值连接。

这样，在您的减速器中，您可以编写如下代码（键的第一个输出是实际键，之后的所有内容都是空键：

```
public void reduce(Text key, Iterator<Text> values,
                OutputCollector<Text, Text> output, Reporter reporter) {
  boolean firstKey = true;
  for (Text value : values) {
    output.collect(firstKey ? key : null, value);
    firstKey = false;
  }
} 
```

实际`RecordWriter.write()`则具有以下逻辑来处理空键/值连接逻辑：

```
 public synchronized void write(K key, V value) throws IOException {

        boolean nullKey = key == null || key instanceof NullWritable;
        boolean nullValue = value == null || value instanceof NullWritable;
        if (nullKey && nullValue) {
            return;
        }

        if (!nullKey) {
            // if we've written data before, append a new line
            if (dataWritten) {
                out.write(newline);
            }

            // write out the key and separator
            writeObject(key);
            out.write(keyValueSeparator);
        } else if (!nullValue) {
            // write out the value delimiter
            out.write(valueDelimiter);
        }

        // write out the value
        writeObject(value);

        // track that we've written some data
        dataWritten = true;
    }

    public synchronized void close(Reporter reporter) throws IOException {
        // if we've written out any data, append a closing newline
        if (dataWritten) {
            out.write(newline);
        }

        out.close();
    } 
```

你会注意到 close 方法也被修改为在写出的最后一条记录中写入一个尾随换行符

完整的代码清单可以在[pastebin](http://pastebin.com/mfpLXsB8)上找到，这里是测试输出：

```
key1    value1
key2    value1,value2,value3
key3    value1,value2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T17:38:10.397

如果单个输出键值可以大于内存，则意味着标准输出机制不适合 - 因为通过接口设计，它需要传递键值对而不是流。
我认为最简单的解决方案是将输出直接流式传输到 HDFS 文件。
如果您有理由通过输出格式传递数据 - 我建议采用以下解决方案：a）写入本地临时目录
b）将文件名作为输出格式的值传递。

可能最有效但有点复杂的解决方案是将内存映射文件用作缓冲区。只要有足够的内存，它就会在内存中，并且在需要时操作系统会关心有效地溢出到磁盘。

# javascript - 在javascript中存储选中的复选框值

> ID：10140172
> 
> 赞同：-1
> 
> 时间：2012-04-13T11:44:34.370
> 
> 标签：javascript, checkbox

我的每个 div 包含多个复选框，我有这样几个 div 。我想跟踪选中的复选框及其各自的 div 。我试图将它存储在一个多维数组中，但它不正确.. 如果您有任何其他想法，请与我分享。

```
<html>
<head>
<style type="text/css" >
div{
width:50%;
height:500px; 
border:2px solid black;
 }

</style>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">

var count = 0;
 function selectradiobutn(frmname){
  formfield=document.forms[frmname].first_ques;
  for(i=0;i<formfield.length;i++){
  if(formfield[i].checked==true){
  var value1 = formfield[i].value;
  alert(value1);
  var value = new Array;
  value[i]=value1;
  var myarray = new Array("A. Aluminium","B. Commodities that is               available according      to their demand","C. to remove salts","D.   1970 in Bangkok","D.    None of the above");
    if(myarray[i]==value[i]){
    count++;
    //alert(count);
    }
    }
    }
    return count;
      }
      function create_array1(){
      alert("Your score is"+count);
       document.getElementById('main').innerHTML = "Your score is"+count;
      }

      </script>
      </head>
        <body>
          <div id="main" style="width:50%; height:500px; border:2px solid black;">
      <center><p style="padding:70px;"><h1>Click the button to start test</h1></p>
         <input type="button" value="Start test." id="btn_start"                 onclick="show_div('main','first1')"> 
         </div>
        </center>

        <div id="first1" style="display:none; ">

            <p style="padding:50px;">1\.     For galvanizing iron which of the following metals is used ?
       </br>
           <form name="f1">
           <input type=Checkbox name=first_ques  value="A. Aluminium"               onclick="selectradiobutn('f1')">A. Aluminium </br></br>
            <input type=Checkbox name=first_ques  value="B. Copper" onclick="selectradiobutn('f1')">B. Copper</br></br>
          <input type=Checkbox name=first_ques  value="C. Lead" onclick="selectradiobutn('f1')">C. Lead</br></br>
            <input type=Checkbox name=first_ques  value="D. Zinc" onclick="selectradiobutn('f1')">D. Zinc</br></p>
            <center><input type="button"  value="Next" onclick="show_div('first1','first2')"></center> 
```

```
 <div id="first2"  style="display:none;">  
              <p style="padding:50px;"> 2\. Economic goods are </br>
             <form name=f2>
                  <input type="Checkbox" name=first_ques value="first" onclick="selectradiobutn('f2')">A. all commodities that are limited in quantity as compared to their demand</br></br>
                <input type="Checkbox" name=first_ques value="B. Commodities that is available according to their demand" onclick="selectradiobutn('f2')">B. Commodities that is available according to their demand</br></br>
            <input type="Checkbox" name=first_ques value="C. Commodities that is available more as compared to demand" onclick="selectradiobutn('f2')">C. Commodities that is available more as compared to demand</br></br>
              <input type="Checkbox" name=first_ques value="D. None of the above" onclick="selectradiobutn('f2')">D. None of the above</br></br></p>
                <center><input type="button"  value="Next" onclick="show_div('first2','first3')"></center> 
```

```
 <div id="first3" style="display:none;">   
         <p style="padding:50px;">3\. For purifying drinking water alum is used
             <form name="f3">
              <input type="Checkbox" value="A. for coagulation of mud particles" name=first_ques onclick="selectradiobutn('f3')">A. for coagulation of mud particles</br>                 </br>
        <input type="Checkbox" value="B. to kill bacteria" name=first_ques onclick="selectradiobutn('f3')">B. to kill bacteria</br></br>
         <input type="Checkbox" value="C. to remove salts" name=first_ques onclick="selectradiobutn('f3')">C. to remove salts</br></br>
       <input type="Checkbox" value="D. to remove gases" name=first_ques onclick="selectradiobutn('f3')">D. to remove gases</br></br></p>
          <center><input type="button"  value="Next" onclick="show_div('first3','first4')"></center>
                </form>
                 </div>

        <div id="first4" style="display:none;">     
            <p style="padding:50px;">4\. Hockey was introduced in the Asian Games in
             <form name="f4">
           <input type="Checkbox" value="A.     1958 in Tokyo" name=first_ques value="first_forth" onclick="selectradiobutn('f4')">A.   1958 in Tokyo</br></br>
           <input type="Checkbox" value="B.     1962 in Jakarta"  name=first_ques onclick="selectradiobutn('f4')">B.    1962 in Jakarta</br></br>
          <input type="Checkbox" value="B.  1962 in Jakarta"  name=first_ques onclick="selectradiobutn('f4')">B.    1962 in Jakarta</br></br>
            <input type="Checkbox" value="D.    1970 in Bangkok" name=first_ques onclick="selectradiobutn('f4')">D.     1970 in Bangkok</br></br></p>
       <center><input type="button"  value="Next" onclick="show_div('first4','first5')"></center>

         </form>
             </div>

             <div  id="first5" style="display:none;">   
               <p style="padding:50px;">5.ESCAP stands for
                 <form name="f5">
                    <input type="Checkbox" value="A.    Economic and Social Commission for Asia and Pacific" name=first_ques onclick="selectradiobutn('f5')">A.     Economic and Social Commission for Asia and Pacific</br></br>
                 <input type="Checkbox" value="B.   European Society Council for Africa and Pacific" name=first_ques onclick="selectradiobutn('f5')">B.     European Society Council for Africa and Pacific</br></br>
              <input type="Checkbox" value="C.  Economic and Social Commission for Africa and Pacific" name=first_ques onclick="selectradiobutn('f5')">C.   Economic and Social Commission for Africa and Pacific</br></br>
              <input type="Checkbox" value="D.  None of the above"  name=first_ques onclick="selectradiobutn('f5')">D.  None of the above</br></br></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:54:33.667

您可以尝试的一件事是将其存储为 JSON 对象。例如，假设 div1、div2 和 div3 各包含 2 个复选框。然后 JSON 对象将仅包含选中的复选框，例如

`var jsonObject = [{ "divName" : "div1", "selectedCheckBoxes" : [{"checkbox1"}] }, [{ "divName" : "div2", "selectedCheckBoxes" : [{"checkbox2"}] }]`很快。

此[链接](http://www.json.org/js.html)将帮助您理解 JSON 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:14:45.050

一种方法是使用 JSON 存储。它有一个被称为检查的事件，它返回一个布尔值。另外，请通过以下链接： [http ://docs.sencha.com/ext-js/3-4/#!/api/Ext.form.Checkbox-event-check](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.form.Checkbox-event-check)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T11:57:15.823

**[演示](http://jsfiddle.net/kvUqt/3/)**：

```
 $(function() {
            $('#myButton').click(function() {
                $('input:checkbox:checked').each(function(i) {
                    alert(this.value);
                    var id= $(this).parent().attr('id')
                    alert(id);
            });
       });
 }); 
```

​</p>

# java - 在 shell 脚本中设置环境变量/在 Java 程序中访问

> ID：10140182
> 
> 赞同：1
> 
> 时间：2012-04-13T11:45:04.170
> 
> 标签：java, linux, shell, ubuntu-10.04

我想在 Ubuntu 10.04 中使用 shell 脚本设置环境并想在 java 程序中访问。我写了这样的shell脚本：

```
#! /bin/sh
export JAVA=/home/ubuntu
echo "Variable $JAVA" 
```

我的java程序是：

```
import java.util.Map;

public class SystemEnv
{
    public static void main(String[] args)
    {

        Map<String, String> variables = System.getenv();
        for (Map.Entry<String, String> entry : variables.entrySet())
        {
           String name = entry.getKey();
           String value = entry.getValue();
           System.out.println(name + "=" + value);
        }
        System.out.println(System.getenv(("JAVA")));
    }
} 
```

当我在没有 shell 脚本的情况下执行此命令时，它运行良好，但在 shell 脚本中却不行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T11:48:59.740

你是如何采购脚本的？

```
$./myscript.sh 
```

或者

```
$source ./myscript.sh 
```

第二个将环境变量设置为当前shell。java程序看起来不错。

编辑：基于评论

这是一个与 subshel​​l 相关的问题。快速阅读是
[执行 bash 脚本和采购 bash 脚本有什么区别？](https://superuser.com/questions/176783/what-is-the-difference-between-executing-a-bash-script-and-sourcing-a-bash-scrip)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:52:51.267

你到底想做什么？

运行`JAVA=/home/ubuntu java SystemEnv`正常（即输出“/home/ubuntu”）

如果要将环境变量导出到父进程，则必须对其进行源：

```
source ./myscript.sh
. ./myscript.sh # Alternative form 
```

# oracle-adf - 在 ADF 中开发简单的聊天应用程序

> ID：10140186
> 
> 赞同：0
> 
> 时间：2012-04-13T11:45:28.540
> 
> 标签：oracle-adf

我有 JDev 11.1.2.1.0。

谁能提供任何参考来开发一个简单的聊天应用程序？我想要它：两台 PC 通过 LAN 连接在一起。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T17:16:51.733

如果您希望将聊天选项添加到 JDeveloper 本身，那么只需安装 Oracle TPC 扩展即可。

如果您想使用 Oracle ADF 构建聊天应用程序 - 那么使用 Active Data Services 是实现客户端自动刷新的方法。卢卡斯建立了一个很好的例子[http://www.oracle.com/technetwork/articles/jellema-googletalk-094343.html](http://www.oracle.com/technetwork/articles/jellema-googletalk-094343.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:40:21.960

如果您是出于教育目的而构建它，那么 Shay 的答案是正确的。您可以使用 ADF 的 ADS 来执行此操作。ADS 抽象出大部分复杂性（轮询与推送等）。

但是，如果您真的在尝试构建某种形式的 http 聊天应用程序，那么有比 Oracle ADF 更好的技术来构建它。这并不意味着如果你知道如何挥动锤子，你看到的每一件东西都是钉子。试试看一下 Node.js 之类的技术，看看它是否适合你想做的事情。

# asp.net-mvc-3 - 禁用浏览器中的表单字段保存，自动完成

> ID：10140191
> 
> 赞同：3
> 
> 时间：2012-04-13T11:45:45.450
> 
> 标签：asp.net-mvc-3

我正在尝试禁用浏览器中的自动完成功能并将 autocomplete="off" 属性放在输入上。我尝试使用下面的代码，但它没有将 autocomplete="off" 放在生成的 Input html 标记上。这样做的正确方法是什么？

```
 @Html.EditorFor(model => model.ConfirmPassword, new { autocomplete = "off" }) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T11:48:06.697

[`@Html.EditorFor`](http://msdn.microsoft.com/en-us/library/ee834942.aspx)不将 a`object htmlAttributes`作为第二个参数（或任何与此相关的参数）。

尝试[`@Html.TextBoxFor`](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.inputextensions.textboxfor.aspx)改用：

```
 @Html.TextBoxFor(model => model.ConfirmPassword, new { autocomplete = "off" }) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T15:49:03.930

```
<form name="form1" id="form1" method="post" autocomplete="off" 
  action="http://www.example.com/form.cgi"> 
```

# python - Python 调试器 (pdb) 停止处理向上/向下箭头，而是显示 ^[[A

> ID：10140198
> 
> 赞同：44
> 
> 时间：2012-04-13T11:46:12.323
> 
> 标签：python, keyboard, readline, pdb

我在 Ubuntu Linux 11.04 (natty) 机器上的 virtualenv 中使用 python 2.6。我的 (django) python 代码中有这段代码：

```
import pdb ; pdb.set_trace() 
```

为了启动python调试器（pdb）。

直到今天，这工作得很好。但是现在当 pdb 启动时，它可以用于调试和运行以及断点等，但是当我按下`up arrow`显示上一个命令时，它会打印`^[[A`而不是上不去。当我键入内容并按`Home`时，它会打印`^[OH`而不是移动光标。

我可以使用 up/home/etc。在启动我的 python django unittests（它有 pdb 调用）的 bash 终端中很好。

这是怎么回事？如何修复我的 pdb？我的阅读线有什么问题？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-08-07T14:17:18.173

看起来由于某种原因您缺少 readline 包。只需键入即可安装它`pip install readline`，它应该会按预期运行。如果您不在 venv 中，请记住以超级用户身份键入它。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2019-06-02T19:20:16.693

我发现使用以下命令输出到控制台和文件时存在此问题`python file.py 2>&1 | tee output.txt`：

[如何使用脚本将标准输出重定向到文件和控制台？](https://stackoverflow.com/questions/14906764/how-to-redirect-stdout-to-both-file-and-console-with-scripting)

删除后`2>&1 | tee output.txt`，此问题（向上箭头`^[[A`在 pdb 中变为）消失。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T19:32:19.703

请参阅[Python 交互模式历史和箭头键](https://stackoverflow.com/questions/3483723/python-interactive-mode-history-and-arrow-keys)。就我而言，阿马丹的回答奏效了；我已经有了 readline 模块。

# sql-server - 来自 nvarchar 字段的计算列日期

> ID：10140199
> 
> 赞同：2
> 
> 时间：2012-04-13T11:46:23.170
> 
> 标签：sql-server, sql-server-2008

我有一个`nvarchar(50)`字段 (DateHr)，它以以下格式保存日期和时间：（`yy/mm/dd hh:mm:ss`例如`12/04/11 16:49:23`，应该转换为`April 11, 2012 4:49 PM`）。

我很难尝试以这种格式管理日期值。

我想知道是否可以创建一个列作为`DateTime`数据类型并使用这个新字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T03:43:49.220

为什么不只是有一个观点？

```
CREATE VIEW dbo.View_MyTable
AS
  SELECT 
    DateHr, 
    DateHr2 = CONVERT(VARCHAR(24), CONVERT(DATETIME, '20' + DateHr), 100)),
    DateHrProper = CONVERT(DATETIME, '20' + DateHr)
  FROM dbo.MyTable; 
```

现在您的查询可以是：

```
SELECT DateHr2 FROM dbo.View_MyTable
  WHERE DateHrProper >= '20120412'
  AND DateHrProper < '20120413'; 
```

这样您就不必弄乱表的架构，并且只有在需要时才可以研究持久计算列方法。如果您确实添加了计算列，我会将其添加为日期时间列，而不是作为同一日期的不同字符串表示形式。在输出而不是存储中做你的“让它漂亮”的东西。

**编辑**如果您可以通过存储过程控制对表的写入（强烈推荐），并且您不让用户运行临时插入/更新，那么您可以更改基本类型而不必担心他们可能会胡说八道进入。例如：

```
UPDATE dbo.MyTable
    SET DateHr = CONVERT(DATETIME, '20' + DateHr);

-- assuming there are no rows left where `ISDATE(DateHr) = 0`, 
-- but you'll have to test that:

ALTER TABLE dbo.MyTable ALTER COLUMN DateHr DATETIME;
GO

ALTER PROCEDURE dbo.ProcThatUpdatesMyTable
  @key    INT,
  @DateHr NVARCHAR(50)
AS
BEGIN
  SET NOCOUNT ON;

  IF ISDATE('20' + @DateHr) = 0
  BEGIN
    RAISERROR('Please enter a valid date.', 11, 1);
    RETURN;
  END

  UPDATE dbo.MyTable 
    SET DateHr = CONVERT(DATETIME, '20' + @DateHr)
    WHERE key = @key;
END
GO 
```

现在您的查询，您想要`April 11, 2012 4:49 PM`作为输出的位置 - 不幸的是，在 SQL Server 中没有一种本地方法可以轻松地转换为该格式。您可以使用各种字符串操作来做到这一点，例如：

```
;WITH x AS 
(
  SELECT 
    d = DATENAME(MONTH, DateHr) + ' ' 
      + CONVERT(VARCHAR(2), DAY(DateHr)) + ', ' 
      + CONVERT(CHAR(5), YEAR(DateHr)), 
    t = CONVERT(CHAR(26), DateHr, 109)
  FROM dbo.blab
)
SELECT d = d + LEFT('0' + RIGHT(t, 13), 5) + ' ' + RIGHT(t, 2) FROM x; 
```

这非常接近您想要的输出：

```
April 11, 2012 04:49 PM 
```

如果需要，您可以进行更多的字符串操作以删除小时的前导 0。

在客户端上进行格式化要好得多。从好的方面来说，您可以在 SQL Server 2012 中使用新`FORMAT()`功能轻松做到这一点：

```
SELECT FORMAT(DateHr, 'MMMM dd, yyyy h:mm tt')
  FROM dbo.MyTable; 
```

结果：

```
April 11, 2012 4:49 PM 
```

当然，我会再次提到，最终的解决方案是不让您的用户首先输入自由文本日期格式。我向您保证，有人会输入 4 月 5 日，他们的意思是 5 月 4 日，或者 2011 年 12 月，他们的意思是 2012 年 11 月。让他们从下拉菜单或日历控件中进行选择，您可以在安全的地方完全监督传递给 SQL Server 的字符串格式而不是依赖于当天的心情，将确保您始终知道日期是用户选择的日期（即使他们的区域格式可能不是您所期望的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:13:38.057

做这个：

```
SELECT CONVERT(VARCHAR(20), cast('2012/04/11 16:49:23' as datetime), 100) 
```

这很奇怪，但两个演员都是必要的

编辑：

```
create table test_date
(
DateHr varchar(50),
DateHr2  AS (CONVERT(VARCHAR(20), cast('20'+ DateHr as datetime), 100))
) 

insert into test_date values ('12/04/11 16:49:23')

select * from test_date

12/04/11 16:49:23   Apr 11 2012  4:49PM 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T12:18:10.393

一种选择是计算列。例如，

```
declare @t table(s nvarchar(50), dt as convert(varchar(30),case isdate(s) when 1 then cast(s as datetime) end,121))
insert into @t(s) values ('12/04/11 16:49:23')
update @t set s='20'+s where ISDATE(s)=1 and LEN(s)<19 --prepend w/century
insert into @t(s) values ('john') --demonstrate bad date string handling here
select * from @t; 
```

结果：

```
s                                                  dt
-------------------------------------------------- ------------------------------
2012/04/11 16:49:23                                2012-04-11 16:49:23.000
john                                               NULL 
```

编辑：添加对错误日期值的处理

编辑：自定义日期 24 小时格式 - yyyy-mm-dd hh:mi:ss.mmm(24h)

编辑：根据需要在原始日期前加上世纪

或者，您可以在计算列中添加世纪：

```
declare @t table(s nvarchar(50), dt as convert(varchar(30),case isdate('20'+s) when 1 then cast('20'+s as datetime) end,121))
insert into @t(s) values ('12/04/11 16:49:23')
insert into @t(s) values ('john') --demonstrate bad date string handling here
select * from @t; 
```

结果：

```
s                                                  dt
-------------------------------------------------- ------------------------------
12/04/11 16:49:23                                  2012-04-11 16:49:23.000
john                                               NULL 
```

# vba - 从另一个工作簿运行相同的宏

> ID：10140200
> 
> 赞同：1
> 
> 时间：2012-04-13T11:46:27.347
> 
> 标签：vba, excel

首先让我解释一下为什么我要问这个问题，很明显我需要的不仅仅是`Application.run`命令。如果有人有办法通过其他方式解决问题，那也很好。

我创建了一个程序，该程序将使用宏和代码创建一个新的 excel 文件，该文件本身就是一个新程序。我这样做是因为我不想更改原始文件。原始文件是所有新创建文件的模板。

但是，当我运行我的代码时，我会遇到很多错误，其中的工作表名称不在原始文件中，但在新文件中。所以，在某种程度上发生了`Activeworkbook`变化，我不知道为什么。当我运行代码时，我将其更改`Activeworkbook`为新文件。

我希望通过从新文件运行宏并确保这些宏仅适用于新创建的工作簿而不适用于原始工作簿来解决此问题。问题是原始工作簿和新工作簿中的宏是相同的，我复制了模块。

**所以我的问题**是：有没有一种方法可以在 VBA-Excel 中运行另一个工作簿中具有相同名称的宏。重要的是，这个宏只能从它自己的工作簿中访问宏！

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:43:05.880

我相信以下内容展示了您需要做的事情。

我创建了两个工作簿：“TryDup1.xls”和“TryDup2.xls”。

“TryDup1.xls”在一个模块中包含以下代码：

```
Option Explicit
  Sub CtrlDup()

    Dim PathCrnt As String
    Dim WBookOrig As Workbook
    Dim WBookOther As Workbook

    Call DupMac(1)

    Set WBookOrig = ActiveWorkbook
    PathCrnt = ActiveWorkbook.Path & "\"

    Set WBookOther = Workbooks.Open(PathCrnt & "TryDup2.xls")

    Call Application.Run("TryDup1.xls!DupMac", 2)

    Call Application.Run("TryDup2.xls!DupMac", 3)

    WBookOther.Close SaveChanges:=False

    Call DupMac(4)

End Sub
Sub DupMac(Param As Long)

  Debug.Print "TryDup1's DupMac: Param=" & Param

End Sub 
```

“TryDup2.xls”在一个模块中包含以下代码：

```
Option Explicit
Sub DupMac(Param As Long)

  Debug.Print "TryDup2's DupMac: Param=" & Param

End Sub 
```

打开“TryDup1.xls”并执行 CtrlDup() 会导致以下内容输出到即时窗口：

```
TryDup1's DupMac: Param=1
TryDup1's DupMac: Param=2
TryDup2's DupMac: Param=3
TryDup1's DupMac: Param=4 
```

因此宏 CtrlDup() 可以运行任一版本的宏 DupMac()。

# asp.net-mvc-3 - 通过构建配置基于编译器开关禁用控制器

> ID：10140201
> 
> 赞同：0
> 
> 时间：2012-04-13T11:46:29.193
> 
> 标签：asp.net-mvc-3, c#-4.0, buildconfiguration

我正在使用 MVC3，我需要将同一个网站部署到多个位置，但禁用某些控制器。要禁用的控制器共享相同的基本控制器类。

我认为我应该能够使用不同的构建配置来做到这一点，每个配置都有一组不同的编译器开关来控制启用或禁用哪些控制器集。

我无法确定实现这一目标的最佳方法。任何人都可以帮忙吗？也许有什么`OnActionExecuting`？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:10:15.330

您是在谈论取决于活动配置的条件编译吗？

转到项目属性 -> 构建 -> 条件编译符号并添加您的字符串常量

然后你可以写这样的代码：

```
#if TESTCFGACTIVE
        Console.WriteLine("Test CFG Constant");
#else
        Console.WriteLine("Normal");
#endif
        Console.ReadLine(); 
```

显然，在发布模式和调试模式下运行它会产生不同的输出。

不完全确定这是否是您所追求的，但我很少使用它来禁用和启用不同环境中的调试/日志记录。

对于像你所说的那样，它更多的是关于应用程序的行为，我会使用一个简单的配置设置来打开或关闭控制器。然后，您可以使用构建脚本将相关配置文件部署到相关输出目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:42:48.340

也许通过[创建自定义路由约束](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-custom-route-constraint-cs)并使用[ConditionalAttribute](http://msdn.microsoft.com/en-us/library/system.diagnostics.conditionalattribute.aspx)？

这些方面的东西：

```
public class DisabledControllersRouteConstraint : IRouteConstraint
{
    IList<string> DisabledControllers = new List<string>();

    public DisabledControllersRouteConstraint()
    {
        DisableConstrollersDebug();
        DisableConstrollersRelease();
        DisableConstrollersProduction();
    }

    [Conditional("RELEASE")]
    private void DisableConstrollersRelease()
    {
        DisabledControllers.Add("ControllerDisabledForRelease");
    }

    [Conditional("PROD")]
    private void DisableConstrollersProduction()
    {
        DisabledControllers.Add("ControllerDisabledForProduction");
    }

    [Conditional("DEBUG")]
    private void DisableConstrollersDebug()
    {
        DisabledControllers.Add("ControllerDisabledForDebug");
    }

    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        var controller = values["controller"];

        return !DisabledControllers.Contains(controller);
    }
} 
```

# javascript - 当所有延迟都解决后做某事

> ID：10140206
> 
> 赞同：1
> 
> 时间：2012-04-13T11:47:06.387
> 
> 标签：javascript, jquery

我有以下代码：

```
loadOpportunities: function () {
    return $.getJSON("/Opportunity/GetAll").pipe(function (result) {
        //do stuff
    });
},

loadTypes: function () {
    return $.getJSON("/OpportunityTypes/GetAll", null, function (result) {
      //do stuff
    });
},

loadView: function () {
    var self = this;
    var deferred = $.Deferred();
    if (!self.viewLoaded) {
        imp2.mainViewModel.loading(true);
        deferred.pipe($.get('/Opportunities/Opportunity/GetView')
        .done(function (data) {
            $('div#opportunity').html(data);
        }));
        deferred.pipe(self.loadTypes);
        deferred.pipe(self.loadOpportunities)
        .done(function () {
            imp2.mainViewModel.loading(false);
        });
    }
    return deferred.resolve();
}, 
```

我想在 loadView 完全完成后做一些事情，包括所有回调。换句话说：我想在 GetView ajax 调用、loadTypes 函数和 loadOpportunities 函数（包括它们的回调）都完成时执行一些代码。

当未全部完成时，会触发以下 then 回调函数。我怎样才能做到这一点？

```
self.loadView.then(function () {
    //Do something after ALL stuff, including all callbacks is done in loadView
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:57:32.067

我觉得在这里使用延迟、承诺和管道可能会有些混乱。

我认为你想要的是这样的（[http://jsfiddle.net/JohnMunsch/ghdgD/](http://jsfiddle.net/JohnMunsch/ghdgD/)）：

```
var testObject = {
  loadOpportunities: function () {
    // This is basically saying that we're getting something via AJAX, but we want to take a swipe at changing it
    // before anyone else gets it, so by using pipe we're returning a different promise than the AJAX promise and
    // the value returned from that is what we want others to get.
    return $.ajax({
        url: "/echo/json/",
        data: opportunities,
        type: "POST"
      }).pipe(
        function (result) {
          console.log("[1]", result);

          // Change the result in some way and then return the changed result. Otherwise there's no point in using
          // a pipe() here, a done() would work as well.
          result.opportunities[0].name = "meat packer";

          return result;
        }
      );      
  },

  loadTypes: function () {
    // This example is different from loadOpportunities in that it isn't using a pipe() so what is returned from
    // this function is the same promise that $.ajax() gave us. Any call to .done() just echos back the same
    // promise you gave it.
    return $.ajax({
        url : "/echo/json/",
        data : opportunityTypes,
        type : "POST"
      }).done(
        function (result) {
          console.log("[1]", result);

          // We can do something with the data received here, but outside of this function, anything that tied to
          // the promise from the $.ajax() will see the original data, not any changes we might make here.                    
        }
      );
  },

  loadView: function () {
    // The self = this, scope = this, etc. that you see at the start of functions is only necessary if there are
    // closures below where this might be something else. This code doesn't have that so this line is unneeded.
    //
    // Be careful about cargo-cult programming and just doing something because you do it everywhere else or you
    // see someone else do something. Try to understand why it's there.
    // var self = this;

    if (!this.viewLoaded) {
      console.log("loading");
      var viewPromise = $.ajax({
          url : "/echo/json/",
          data : view,
          type : "POST"
      }).done(
        function (result) {
          console.log("[1]", result);

          // We might take this and dump it in a <div> somewhere.
        }
      );

      var typesPromise = this.loadTypes();
      var opportunitiesPromise = this.loadOpportunities();

      // The following line hands back a single promise (that's what $.when() does) that wraps all three of the
      // other promises and only fires when all three have completed OR when any one of them has failed.
      return $.when(typesPromise, opportunitiesPromise, viewPromise).done(
        function () {
          // Here I've tied a function to the promise as soon as I've created it. But since I'm handing back the
          // promise, I can also tie functions to it later as well, even after the promise has resolved or been
          // rejected.
          console.log("[2]", "All done loading types, views, and opportunities");
        }
      );
    }

    return true;
  }
};

// Note: Unlike with all the steps labeled [1], I don't believe there is a formal ordering for the
// .done()'s attached to the same promise like both [2] and [3]. So it may be possible for those two steps to
// happen [2]/[3] or [3]/[2] although they always happened [2]/[3] in my testing.
$.when(testObject.loadView()).done(
  function () {
    console.log("[3]", "This will only trigger after all the steps in load view have completed.");
  }
); 
```

Note: I changed the style of your AJAX calls but that was just because I needed to build a working example in jsFiddle. Click on the link above to see this in action over there. It works and it orders things as you expect. You probably don't need pipe as much as you think unless you plan to manipulate the AJAX results before anyone tied to the promise sees the results. Otherwise, .done(), .fail(), and .when() will handle most situations.

# bash - bash 替换每一行的第一个字符

> ID：10140213
> 
> 赞同：8
> 
> 时间：2012-04-13T11:47:32.923
> 
> 标签：bash, sed

我的文件如下所示：

```
 1 chrX_73833098_73834098
  1 chrX_73889652_73890652
  1 chrX_91194501_91195501
  1 chrX_92000157_92001157
  1 chrX_92106500_92107500 
```

我想将第一个字符“1”替换为 0。想要的输出是：

```
 0 chrX_73833098_73834098
  0 chrX_73889652_73890652
  0 chrX_91194501_91195501
  0 chrX_92000157_92001157
  0 chrX_92106500_92107500 
```

尝试这样做：

```
sed 's/^./0/g' file 
```

但输出是：

```
0     1 chrX_73833098_73834098
0     1 chrX_73889652_73890652
0     1 chrX_91194501_91195501
0     1 chrX_92000157_92001157
0     1 chrX_92106500_92107500 
```

我相信有简单的方法可以解决它，但我不知道。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-13T11:50:58.180

每行的开头都有空格字符。

你可以试试：

```
sed 's/^\s*./0/g' file 
```

\s - 匹配空白字符

输出：

```
0 chrX_73833098_73834098
0 chrX_73889652_73890652
0 chrX_91194501_91195501
0 chrX_92000157_92001157
0 chrX_92106500_92107500 
```

如果要保留空白字符：

```
sed 's/^\(\s*\)\(1\)/\10/g' file 
```

我这里也换了。有 1

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-07-04T06:50:26.890

我认为这是一个容易理解的方法。尝试：

```
sed 's/1/0/1' file
```

输出：

```
1 chrX_73833098_73834098
1 chrX_73889652_73890652
1 chrX_91194501_91195501
1 chrX_92000157_92001157
1 chrX_92106500_92107500

```

我想说's/partten/partten/g'，最后一个'g'表示一行中的位置。
'1'表示第一个匹配，'g'表示全部，也可以使用'2g'表示从第二个到最后一个。
试试。

# c - 从 scanf 绕过 null char

> ID：10140217
> 
> 赞同：0
> 
> 时间：2012-04-13T11:47:48.110
> 
> 标签：c, scanf, strtok

我已经开始`strtok`工作了，但是现在因为我正在使用`scanf`以`NULL`char 结尾的字符串，所以我的程序只能从重定向的标准中抓取一行。例如。

```
scanf("%s" , input);
    token = strtok (input, ", \n");

    while(token != NULL){
            i += (strtol(token,0,0)); 
            token = strtok(NULL, ", \n"); 

    } 
```

因此，我尝试使用函数来检查程序是否仅达到`NULL`a `EOF`（据我了解`EOF` = -1 `NULL`= 0），但我无法让指针和函数在我的代码中工作。PS我知道这是蹩脚的代码，但已经晚了，我仍在努力，等待建议指出我遗漏的明显错误。

```
int scanner();
int check_EOF();
int next_line(char *token);
int main(){

char *token, input[256];
int i = 0;

scanf("%s" , input);
    token = strtok (input, ", \n");

    if (!scanner())
        check_EOF();

printf("%d\n", i);
return 0;
}

int check_EOF(){
while(token !=EOF);
    next_line();
 }

int next_line(){
while(token != NULL){
    return 1;
else return 0;   
}

int scanner(){
while(next_line()){
        i += (strtol(token,0,0));
        token = strtok(NULL, ",")

    return 0
} 
```

有没有一种我不知道的更简单的方法，或者我是否朝着正确的方向前进，但有很多错误？

谢谢，拉克兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:59:20.850

来自`man scanf`：

```
 The  value  EOF is returned if the end of input is reached... 
```

您只需要检查 的返回值`scanf`，而不是`strtok`。就像是：

```
while(scanf("%s", input) != EOF)
   //just do it 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-13T11:59:11.183

检查你的scanf格式。

您缺少地址运算符 '&' 。

# c# - Linq to SQL 搜索

> ID：10140225
> 
> 赞同：2
> 
> 时间：2012-04-13T11:48:05.713
> 
> 标签：c#, asp.net, linq-to-sql

我有一张有用户的桌子。我希望能够搜索一个字符串，然后返回包含该字符串的所有用户名。然后我想填充一个列表框。这是我尝试过的：

```
var varUser = (from u in dc.Users
                           where u.username == searchUserName
                           select u.username);
            lbSearchResult.DataSource = varUser;
            lbSearchResult.DataBind(); 
```

但是当我尝试搜索“a”时，我没有得到任何结果。只有当我输入完整的用户名时它才有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T11:49:38.303

尝试[`Contains()`](http://msdn.microsoft.com/en-us/library/bb338641.aspx)改用：

```
var varUser = from u in dc.Users
              where u.username.Contains(searchUserName)
              select u.username; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:50:32.700

可能是因为条款

```
where u.username == searchUserName 
```

尝试`u.username.Contains(searchUserName)`或构建正则表达式。

# mysql - MYSQL查询获取日期差异

> ID：10140227
> 
> 赞同：0
> 
> 时间：2012-04-13T11:48:11.410
> 
> 标签：mysql, sql-server

我有一个包含以下列和数据的表事务

```
id  transaction_date trans_type account_id agents_id transaction_date price miles
1   2012-02-08       Buy        1          1         2010-02-08       0.016 12000
2   2012-03-01       Sell       2          2         2012-03-10       0.256 -2000
3   2012-03-27       Buy        3          3         2012-03-27       0.256 10000
4   2012-03-28       Sell       4          4         2012-03-28       0.589 -11000
5   2012-03-29       Buy        5          5         2012-03-29       0.87  25000
6   2012-03-29       Sell       6          6         2012-02-29       0.879 -12000
7   2012-04-01       Sell       7          7         2012-04-01       0.058 -15000

  Account Table
  id    Program_id
  1     1
  2     1
  3     2

  Program table
  id      Abbreviation
  1       AA
  2       AC

  Agents table
  id      Name
  1       Bob
  2       Ben 
```

我想获得第一个销售日期和第一个购买日期以获取交易售出前的平均天数，以获取交易在库存中的天数，所以应该是

```
 (Sell date)2012-03-01 - (Buy date)2012-02-08 
```

我正在尝试这个

```
SELECT 
    case when t.trans_type ='Sell' then transaction_date end as SellDate
   ,case when t.trans_type ='Buy' then transaction_date end as BuyDate
   ,DATEDIFF(case when t.trans_type ='Sell' then transaction_date end
            ,case when t.trans_type ='Buy' then transaction_date end) as Date
   ,transaction_date
FROM transactions t
order by transaction_date 
```

但总是在 Date 中获得 NULL

这是完整的查询

```
SELECT p.abbreviation,ag.name
  ,sum(-1.00 * t.miles * t.price - coalesce(t.fees,0) - coalesce(c.cost,0)) as profit
  ,sum(t.miles) 'Totakl Miles'
  ,avg(price / miles) 'Average'
  ,transaction_date
FROM transactions t
inner join accounts a on t.account_id = a.id
inner join programs p on a.program_id = p.id
inner join agents ag on t.agent_id = ag.id
LEFT JOIN (
           SELECT rp.sell_id, sum(rp.miles * t.price) as cost
           from report_profit rp
           inner join transactions t on rp.buy_id = t.id
           where t.miles > 50000
           group by rp.sell_id
           order by rp.sell_id
          ) c on t.id = c.sell_id
where t.transaction_date BETWEEN '2012-03-14' AND '2012-04-14'
Group by p.id , ag.id 
```

**编辑**

我尝试了liquevicar 答案，但由于我添加的Group by，它给出了错误“子查询返回多个记录”

任何人都可以指导我吗？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:55:45.803

尝试这样的子查询

```
SELECT 
    DATEDIFF(
      (
      SELECT MIN(date)
      FROM Transaction
      WHERE trans_type='Sell'
      ) AS first_sell_date
   ,
      (
      SELECT MIN(date)
      FROM Transaction
      WHERE trans_type='Buy'
      ) AS first_buy_date
   ) 
```

编辑：遵循 OP 评论并使用完整查询更新问题。

你能不能把 DATEDIFF 包裹在一个 MIN 电话上？

```
DATEDIFF(
    MIN(case when t.trans_type ='Sell' then transaction_date end),
    MIN(case when t.trans_type ='Buy' then transaction_date end)
) as Date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:13:10.583

这个怎么样 -

```
SELECT *, DATEDIFF(sale.transaction_data, purchase.transaction_date)
FROM transactions purchase
INNER JOIN (
    SELECT *
    FROM transactions
    WHERE trans_type = 'Sell'
    ORDER BY transaction_date ASC
) sale
    ON purchase.transaction_date < sale.transaction_date
WHERE purchase.trans_type = 'Buy'
GROUP BY purchase.transaction_date 
```

这将根据日期将所有买入交易链接到下一个卖出交易。

或者可能是这样的 -

```
SELECT DATEDIFF((SELECT MIN(transaction_date)
                 FROM transactions t
                 WHERE t.trans_type = 'Sell'
                 AND t.transaction_date > purchase.transaction_date),
            purchase.transaction_date)
FROM transactions purchase
WHERE trans_type = 'Buy' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:27:03.893

首先感谢大家的每一个帮助

这是返回确切结果的查询

```
select p_id,ag_id,
     p_abb,ag_name
    ,sum(-1.00 * miles * price - coalesce(fees,0) - coalesce(cost,0)) as profit
    ,sum(miles) 'Total Miles',avg(price / miles) 'Average'
    ,DATEDIFF(min(buy_dt),min(sell_dt)) as 'Days'
     From
     (
         SELECT p.id 'p_id',ag.id 'ag_id',p.abbreviation 'p_abb',ag.name 'ag_name'
         ,miles
         ,price
         ,fees
         ,c.cost
         ,case when t.trans_type ='Sell' then transaction_date end 'sell_dt'
         ,case when t.trans_type ='Buy' then transaction_date end 'buy_dt'
         ,transaction_date
       FROM transactions t
       inner join accounts a on t.account_id = a.id
       inner join programs p on a.program_id = p.id
       inner join agents ag on t.agent_id = ag.id
       LEFT JOIN (
            SELECT rp.sell_id, sum(rp.miles * t.price) as cost
           from report_profit rp
           inner join transactions t on rp.buy_id = t.id
           where t.miles > 50000
           group by rp.sell_id
           order by rp.sell_id
          ) c on t.id = c.sell_id

  ) t1
  group by p_id, ag_id 
```

再次感谢大家。。

# c++ - 使用 enable_if 可选地添加结构成员

> ID：10140231
> 
> 赞同：11
> 
> 时间：2012-04-13T11:48:28.583
> 
> 标签：c++, metaprogramming, enable-if

鉴于此模板：

```
template <class A>
struct Something {
    ... // members common to all template instantiations for all A types 
    SpecialType member; // but not this - I want this to be conditional...
} 
```

...我想使用“enable_if”让 SpecialType 成员有条件地存在；也就是说，仅当模板使用 A=SpecialCase1 或 SpecialCase2 类型实例化时。在所有其他情况下，我希望 SpecialType 成员丢失。

如果您想知道为什么，这是关于优化 - 即不在结构中携带无用的有效负载。我是模板元编程的新手，但我知道我需要“enable_if”和两个“is_same”——虽然不知道具体如何......

编辑：使用通用 C++（即没有 Boost-specifics）将是一个加号。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T11:56:58.587

为此，您不需要 enable_if。将您的结构专门用于特殊情况，其余部分保留默认实现：

```
template <class A>
struct Something
{
  // your default implementation
};

template <>
struct Something<SpecialCase1>
{
  // your SpecialCase1 implementation
};

template <>
struct Something<SpecialCase2>
{
  // your SpecialCase2 implementation
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T11:57:30.170

好吧：使用基类。

```
struct Empty {};

struct SpecialTypeCnt { SpecialType member; };

template <typename A>
struct Something: if_< /* cond */ , SpecialTypeCnt, Empty>::type {
}; 
```

其中`if_`定义为：

```
template <typename, typename, typename E> struct if_ { typedef E type; };

template <typename T, typename E>
struct if_<std::true_type, T, E> { typedef T type; }; 
```

（您也可以专注于布尔值）

当然，现在你需要正确地表达你的条件。

* * *

话虽如此，您可能不应该只使用`struct`. 相反，您应该使用`class`提供需要应用的操作的a `member`。然后为 a`class Null`提供默认行为，并为 a`class SomeType`提供特定于 的行为`member`。

否则，您将在需要“可能”修改的任何地方重写条件`member`，并且它会很快变得烦人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T12:18:03.140

为了不重复共同成员：

定义 BaseSomething 类：

```
 template <class A>
        struct BaseSomething {
            ... // members common to all template instantiations for all A types 
                }; 
```

定义 SpecialSomething 类：

```
template <class A>
            struct SpecialSomething {
                SpecialType member;
                ...//SpetialType related functionality
                    }; 
```

定义Something类：

```
template <class A>
            struct Something :public BaseSomething<A>{

                    };

  template<>
    struct Something<SpecialCase1>:public BaseSomething<A>{
                    SpecialSomething<SpecialCase1> special;
                        };

template<>
struct Something<SpecialCase2>:public BaseSomething<A>{
                SpecialSomething<SpecialCase2> special;
                    }; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-13T19:35:46.713

Matthieu M 已经回答了这个问题。但是，一个稍微更惯用和优雅的解决方案是执行以下操作：

```
struct OptionalMembers { SpecialType member; };

template <typename T>
    class Something: public conditional_t<is_same<T, SpecialCase>, OptionalMembers, tuple<>> {
}; 
```

此示例说明如何仅在模板参数为 SpecialCase 类型时添加可选成员。

# curl - 如何使用 curl 发送带有 HTTP PUT 请求的空 URI

> ID：10140232
> 
> 赞同：0
> 
> 时间：2012-04-13T11:48:37.227
> 
> 标签：curl

我想知道 curl 是否允许我发送带有 HTTP PUT 请求的空 URI？我需要这样做以进行一些测试。当我尝试这个时：

```
curl --upload-file testfile.txt http://127.0.0.1:8086/ 
```

请求以 /testfile.txt 作为 URI 发送，我希望它是简单的 /。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:59:40.310

也许尝试

```
curl --upload-file "" http://127.0.0.1:8086/ 
```

# sql - LEFT JOIN 返回空结果集

> ID：10140233
> 
> 赞同：3
> 
> 时间：2012-04-13T11:48:44.700
> 
> 标签：sql, postgresql, left-join

我在连接方面遇到了一个小逻辑问题。我有一个回答答案的数据库。架构是：

```
Question
question_id
question_text

Answers
answer_id
question_id
answer_text

User Responses
user_id
answer_id
question_id 
```

我正在尝试查找用户尚未回答的问题，但我一直收到无效回复。查询如下：

```
SELECT * FROM questions 
    LEFT JOIN responses ON questions.question_id = responses.question_id 
WHERE user_id != '1' 
```

我的逻辑哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:52:27.847

尝试使用 IS NULL 的 LEFT JOIN

```
SELECT q.question_id FROM questions q
    LEFT JOIN responses r ON q.question_id = r.question_id AND r.user_id = 1
WHERE r.question_id IS NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T11:53:10.063

获取用户 id 为 1 的用户未回答的问题

```
SELECT * FROM questions 
    LEFT JOIN responses ON questions.question_id = responses.question_id 
WHERE responses.question_id IS NULL AND user_id = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T12:12:22.257

另一种可能性是`EXISTS`半连接。

```
SELECT *
FROM   questions q
WHERE  NOT EXISTS (
   SELECT * 
   FROM   responses r
   WHERE  r.question_id = q.question_id
   AND    r.user_id = 1
   ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T11:53:24.667

与其使用左连接，不如使用子查询。这就是你在 MS SQL 中的做法——你可能需要针对 MySQL 进行调整。

```
SELECT * FROM questions WHERE question_id NOT IN (
    SELECT question_id FROM responses WHERE user_id = 1
) 
```

需要检查右表中的值的左连接可能会让您头疼。我发现以这种方式查询这种特定类型的查询更容易、更可靠。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-22T12:24:43.223

尝试这个

```
SELECT * FROM questions 
LEFT JOIN responses ON questions.question_id = responses.question_id AND 
user_id != '1' 
```

最后使用 where 将导致过滤两个表，结果为空。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T12:05:32.490

尝试这个：

```
Select * 
from Question
where question_id not in (select question_id from Responses where user_id=1) 
```

# java - TreeSet 排序错误

> ID：10140234
> 
> 赞同：0
> 
> 时间：2012-04-13T11:48:45.030
> 
> 标签：java, treeset

我有一个名为`numb`. 它包含 5 个数字（来自用户的输入） 输入值的示例是：5,29,101,100,89.4。我使用 for 循环将此数组的元素转移到一个`TreeSet`调用`ts`中（我按降序排列元素）。在此之后，我`TreeSet`使用`MessageDialog`. 但是显示器显示的东西与我的预期不同。它显示`[89.4,5,29,101,100]`.

当我输入具有相同位值的数字时——比如几十、几百（如果数组只包含像 12、56、84、74、65 这样的数字），它会按预期排序。我不知道我做错了什么。

这是代码：

```
import javax.swing.*;
import java.util.*;

public class dollarGUI {

  public static void main(String[] agrs){
    Hello hello=new Hello();
    hello.as();
    hello.Order();
    hello.Display();
  } 
}

class Hello {

  String[]be = new String[5];
  TreeSet<String> ts = new TreeSet<String>(Collections.reverseOrder());

  public String[] as() {
    for(int i=0; i < 5; i++) {
      be[i] = JOptionPane.showInputDialog("enter number");
    }
    return be;
  }

  public void Order() {
    for(int i=0;i<5;i++) {
      ts.add(be[i]);
    }
  }

  public void Display() {
    JOptionPane.showMessageDialog(null, ts);
  }  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:53:10.283

您将数字转换为字符串，因此不会得到数字的自然顺序，而是字符串的自然顺序，其中“10”小于“2”，因为第一个字符更小。

将树集的内容更改为`Number`或特定的数字类型，例如`Double`将数组元素解析为数字，
例如使用`Double.parseDouble()`等`new DecimalFormat().parse()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:25:14.120

当您比较字符串时，它是从第一个字符开始的。这意味着您需要像这样考虑“数字”。以相反的顺序，您可以拥有

```
-9.9
-1e1
-100
89.4
899.5
5
29
101
100
05
005.0
0059 
```

首先，您比较第一个字母或数字 8 > 5 > 2 > 1。在平局的情况下，您比较第二个字母，依此类推。笔记： '。' > '9' 和 '-' > '9'

将它们作为数字进行比较的方法是先将它们转换为数字。

# silverlight-5.0 - 升级到 Silverlight 5 时发生灾难性故障

> ID：10140235
> 
> 赞同：0
> 
> 时间：2012-04-13T11:48:49.723
> 
> 标签：silverlight-5.0

我刚刚将 silverlight 浏览器插件更新到 v5，并意识到我的全功能 silverlight 4 应用程序根本没有运行。这很奇怪，因为 silverlight 5 插件应该是完全向后兼容的吧？然后我下载了适用于 Visual Studio 2010 SP1 的 Silverlight 5 工具以及适用于 Windows（32 位）的 Silverlight 5 Developer Runtime 以开始调试。

现在我已经深入研究了这个问题，并意识到是几个控制在 Canvas 中导致了问题，即以下在 VS2010 中引发了灾难性故障：

```
<UserControl x:Class="Logo.SilverlightControl2"
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
 mc:Ignorable="d"
 d:DesignHeight="300" d:DesignWidth="400">

 <Grid x:Name="LayoutRoot" Background="White">
     <Canvas >
         <TextBlock Canvas.Left="120" Canvas.Top="110" Height="23" Name="TextBlock1" Text="TextBlock" />
     </Canvas>
 </Grid>
</UserControl> 
```

一定有我遗漏的东西，任何人都可以知道发生了什么吗？

**更新：** 似乎我无法在[Silverlight 展示](http://www.silverlight.net/showcase)中查看单个 Silverlight 5 应用程序。他们每个人都只是显示一个空白的白色区域。也许我的插件安装有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:12:51.217

此异常也可能由调用引起

```
Application.CheckAndDownloadUpdateAsync() 
```

当服务器上的 xap 文件不可访问时。

# templates - 在 IE8 中使用条件剔除模板

> ID：10140236
> 
> 赞同：13
> 
> 时间：2012-04-13T11:48:50.220
> 
> 标签：templates, internet-explorer-8, cross-browser, knockout.js

在所有“现代”浏览器中，以下有效**但在 IE8 中无效：**

```
<!-- ko template: {if: $root.itemToEdit.SomeObject() === $data, name: 'EditItemTemplate', afterRender: $root.initializeEditPanel } -->
<!-- /ko --> 
```

我收到以下错误：

> SCRIPT5022：无法解析绑定。消息：语法错误：预期的标识符、字符串或数字；绑定值：模板：{if: $root.itemToEdit.SomeObject() === $data, name: 'EditItemTemplate', afterRender: $root.initializeEditPanel }

似乎是`if`在模板定义中包含了该语句。如果我将标记更改为以下内容，IE8 很高兴：

```
<!-- ko if: $root.itemToEdit.SomeObject() === $data -->
   <!-- ko template: {name: 'EditItemTemplate', afterRender: $root.initializeEditPanel } -->
   <!-- /ko -->
<!-- /ko --> 
```

**为什么`if`在我的模板中包含语句在 IE8 中不起作用？**

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-13T12:52:49.520

较旧的 IE 版本对于使用 JavaScript 保留字作为属性名称可能会很挑剔。如果你指定`if`like `'if'`，那么你会没事的。像：

```
<!-- ko template: {'if': $root.itemToEdit.SomeObject() === $data, name: 'EditItemTemplate', afterRender: $root.initializeEditPanel } -->
<!-- /ko --> 
```

或者类似的东西`<label data-bind="attr : { 'for': id }"></label>`

# spring - getHibernateTemplate().find() 通过多对多关联

> ID：10140241
> 
> 赞同：0
> 
> 时间：2012-04-13T11:49:06.650
> 
> 标签：spring, hibernate

在以下场景中，对于**多对多**关联，传递给**getHibernateTemplate().find()**方法的正确查询是什么，以便获取具有参与者的事件的事件（和人员）列表?

```
 _____________        __________________
   |             |      |                  |       _____________
   |   EVENTS    |      |   PERSON_EVENT   |      |             |
   |_____________|      |__________________|      |    PERSON   |
   |             |      |                  |      |_____________|
   | *EVENT_ID   | <--> | *EVENT_ID        |      |             |
   |  EVENT_DATE |      | *PERSON_ID       | <--> | *PERSON_ID  |
   |  TITLE      |      |__________________|      |  AGE        |
   |_____________|                                |  FIRSTNAME  |
                                                  |  LASTNAME   |
                                                  |_____________|

<class name="Event" table="EVENTS">
    <id name="id" column="EVENT_ID">
        <generator class="native"/>
    </id>   
    <property name="date" type="timestamp" column="EVENT_DATE"/>
    <property name="title"/>

    <set name="participants" table="PERSON_EVENT">
        <key column="EVENT_ID"/>
        <many-to-many column="PERSON_ID" class="Person"/>
    </set>      
</class>

<class name="Person" table="PERSON">
    <id name="id" column="PERSON_ID">
        <generator class="native"/>
    </id>
    <property name="age"/>
    <property name="firstname"/>
    <property name="lastname"/>

    <set name="events" table="PERSON_EVENT" inverse="true">
        <key column="PERSON_ID"/>
        <many-to-many column="EVENT_ID" class="Event"/>
    </set>

</class> 
```

像这样的几次尝试都失败了，但有以下例外：

```
getHibernateTemplate().find("from Event event where event.participants != null"); 
```

*org.springframework.dao.InvalidDataAccessResourceUsageException 等等等等嵌套异常是 org.hibernate.exception.SQLGrammarException: could not execute query etc etc*

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:35:47.907

您可以使用以下查询来获得相同的结果。

来自 event.participants 不为空的 Event 事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:01:16.473

Ram Reddy 建议的查询有效，但我需要添加lazy="false"：

```
<set name="participants" table="PERSON_EVENT" lazy="false">
        <key column="EVENT_ID"/>
        <many-to-many column="PERSON_ID" class="Person"/>
</set> 
```

# python - 从列表中找出最接近任何浮点数的两个数字

> ID：10140243
> 
> 赞同：3
> 
> 时间：2012-04-13T11:49:17.053
> 
> 标签：python, list, dictionary, floating-point

我有一个带有浮点数作为键和对象作为值的字典。我收到一个浮点数，我想知道这个浮点数在两个键之间。我怎么找到这个？

我在代码中的意思示例：

```
a = {}
a[1.2] = some_unimportant_instance
a[2.3] = some_other_unimportant_instance
a[2.6] = some_third_unimportant_instance
etc...

r = 2.5
# a[r] will not work
# I want something that returns the two numbers around r
# in this case, 2.3 and 2.6. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T11:58:00.880

第一个观察：dict-s 对此不利。它们是使用散列实现的，并且仅用于检索完全匹配的值。出于您的目的，您必须首先将 dict 转换为键列表。然后，您可以使用 bisect 等模块。

例子：

```
import bisect
keys = sorted(a.keys())
index = bisect.bisect(keys, r)
if index >= 1:
    print keys[index - 1]
print keys[index] 
```

**更新**：按照 Mark Dickinson 的建议改进了代码。谢谢！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-10T19:19:55.773

使用[PyPI](https://pypi.python.org/pypi/sortedcontainers)是 Pythonic 。有许多 MutableMapping 类型以排序顺序维护键并支持您想要的二等分和索引。考虑具有[SortedDict类型的](http://www.grantjenks.com/docs/sortedcontainers/sorteddict.html)[sortedcontainers](http://www.grantjenks.com/docs/sortedcontainers/)模块正是为了这个目的。

```
from sortedcontainers import SortedDict
sd = SortedDict((key, value) for key, value in data)

# Get the would-be index of the desired key.
index = sd.bisect(2.5)

# Get the actual key at that index.
key = sd.iloc[index]

# Look ahead one to find the range.
ahead = sd.iloc[index + 1] 
```

sortedcontainers 也是纯 Python，与 2.6 到 3.4 兼容，具有 100% 的测试覆盖率和数小时的压力，并且有一个[基准比较](http://www.grantjenks.com/docs/sortedcontainers/performance.html)表明它非常快（快如 C 实现一样快）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T17:13:23.367

要实际返回这两个键，请考虑：

```
def surrounding_keys(needle, haystack):
    if haystack: # ensure it's not empty
        keys = sorted(haystack.keys())
        for (lower, upper) in zip(keys, keys [1:]):
            if lower < needle < upper:
                return (lower, upper)
    raise KeyError # fails with key error if: not found, empty dict, dict with only one key 
```

# cocoa - 将 SecIdentityRef 存储到 NSUserDefaults

> ID：10140244
> 
> 赞同：1
> 
> 时间：2012-04-13T11:49:19.300
> 
> 标签：cocoa, openssl, nsuserdefaults, apple-push-notifications

我发现了将 APNS 与可可一起使用的绝佳解释。[APNS Pusher](https://github.com/blommegard/APNS-Pusher) 现在我不想每次都选择我的 SecIdentityRef（因为我很懒），我尝试将 SecIdentityRef 放入 NSData 并将其保存为默认值。下次应用程序启动时，我会再次加载它，它总是会得到 exc_bad_access。这是我添加的代码：

```
// For saving
NSData *secRefData = [NSData dataWithBytes:[SFChooseIdentityPanel sharedChooseIdentityPanel].identity length:sizeof([SFChooseIdentityPanel sharedChooseIdentityPanel].identity)];
[[NSUserDefaults standardUserDefaults] setValue:secRefData forKey:@"identity"];

//For loading
NSData *secRefData = [[NSUserDefaults standardUserDefaults] valueForKey:@"identity"];
if([secRefData length] != 0) {
     [[APNS sharedAPNS] setIdentity:(SecIdentityRef)CFRetain([secRefData bytes])];
} 
```

我怎样才能让它工作？还有另一种我应该存储身份的方法吗？

**编辑**

因此，我通过保存身份名称找到了解决方案，并且在启动应用程序时，它会查看哪些可用身份具有此名称并使用具有正确名称的身份。这是代码：

```
//For loading
    NSString *lastIdentityName = [[NSUserDefaults standardUserDefaults] valueForKey:@"identityName"];
    if([lastIdentityName length] != 0) {
        NSArray *allIdentities = [self identities];
        for (id object in allIdentities) {
            NSString *theName = [[[X509Certificate extractCertDictFromIdentity:(SecIdentityRef)object] valueForKey:@"Subject"] objectForKey:@"CommonName"];
            if([theName isEqualToString:lastIdentityName]) {
                [[APNS sharedAPNS] setIdentity:(SecIdentityRef)CFRetain((__bridge_retained SecIdentityRef)object)];
                [[NSUserDefaults standardUserDefaults] setValue:[self identityName] forKey:@"identityName"];
                // KVO trigger
                [self willChangeValueForKey:@"identityName"];
                [self didChangeValueForKey:@"identityName"];
            }
        }
    }

//For saving
    [[NSUserDefaults standardUserDefaults] setValue:[self identityName] forKey:@"identityName"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T12:07:28.657

使用`SecKeychainItemCreatePersistentReference()`and `SecKeychainItemCopyFromPersistentReference()`-- 它们可以在进程之间传递或持久化。不过，有一些警告：

1.  您不能保留身份，只能保留证书，因此您必须通过额外的跃点才能在两者之间进行转换。
2.  您将获得`NSData`长且不透明的数据块，因此您必须将其存储为这样，而不是例如作为字符串；忘记手动编辑此设置。

这就是我在我的 PDF 签名应用程序中执行此操作的方式，到目前为止它运行良好。以下是代码的相关部分：

```
- (NSData*) identityToPersistent:(SecIdentityRef)ident
{
    OSStatus status;
    SecCertificateRef cert;
    CFDataRef data = nil;

    status = SecIdentityCopyCertificate(ident, &cert);
    if (status != noErr)
        return nil;
    status = SecKeychainItemCreatePersistentReference((SecKeychainItemRef)cert, &data);
    CFRelease(cert);
    if (status != noErr)
        return nil;

    return CFBridgingRelease(data);
}

- (SecIdentityRef) identityFromPersistent:(NSData*)data
{
    OSStatus status;
    SecKeychainItemRef cert;
    SecIdentityRef ident = nil;

    status = SecKeychainItemCopyFromPersistentReference((__bridge CFDataRef)data, &cert);
    if (status != noErr)
        return nil;
    status = SecIdentityCreateWithCertificate(NULL, (SecCertificateRef)cert, &ident);
    CFRelease(cert);

    return ident;
}

- (SecIdentityRef) getPreferredIdentity
{
    NSData *data = [[NSUserDefaults standardUserDefaults] dataForKey:@"SigningIdentity"];
    if (!data)
        return nil;
    return [self identityFromPersistent:data];
}

- (void) setPreferredIdentity:(SecIdentityRef)ident
{
    NSData *data = [self identityToPersistent:ident];
    [[NSUserDefaults standardUserDefaults] setObject:data forKey:@"SigningIdentity"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:08:39.777

这一切都搞砸了。A`SecIdentityRef`是对内部对象的不透明引用。您将其视为指向该对象的指针，但它可能只是表的索引或其他任何内容。

其次，你不知道内部对象的大小。您的`sizeof`表达式正在产生指针的大小，而不是它所指的对象。由于类型是不透明的，因此无法获得实际大小。

最后，没有理由相信该对象是“标量”数据，它被写入文件然后被读出并保持不变。很可能，该对象包含在另一个进程的地址空间中没有意义的内部指针。更不用说您还没有保存和恢复这些指针可能指向的任何内容。

# asterisk - IVR 菜单的表结构（DTMF 键）

> ID：10140249
> 
> 赞同：1
> 
> 时间：2012-04-13T11:49:49.840
> 
> 标签：asterisk, telephony, ivr

我正在开发一个基于 SMS 的菜单，该菜单适用于 DTMF 键（0 - 9） 现在这个菜单将有九个级别，它们的进一步菜单也是如此。

现在我希望所有关于菜单的信息都可以从数据库中获得。

目前我计划创建如下表结构

menuid，menutext，父菜单，菜单级别

但它并没有满足完整的要求。对于基于 DTMF 显示菜单的典型 IVR 菜单的表结构有什么想法吗？

问候，伊姆兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:05:07.157

基本结构如下：

```
create table ivr(
id serial,
name varchar(40),
go_timeout_type smallint,
go_timeout bigint,
go_invalid_type smallint,
go_invalid bigint);

create table ivr_choices(
 id serial,
 ivr_id bigint,
 choice varchar(5),
 go_onchoice_type smalling,
 go_onchoice bigint
);

create unique index ivr_choices_get on ivr_choices(ivr_id,choice); 
```

在这个例子中，你在 _type 中编码你要去的目的地。对于子 ivr，你输入 dest_type=ivr，dest=ivr_id。

# python - 迭代从 0 开始

> ID：10140250
> 
> 赞同：1
> 
> 时间：2012-04-13T11:49:55.463
> 
> 标签：python

当我运行下面的代码时，迭代从 0 开始。我想将行更改为从第 1 行开始。我该如何更改它？我尝试在迭代开始之前输入 rownum=1 。

代码：

```
def triangle(rows):
    for rownum in range (rows):
        PrintingList = list()
        print ("Row no. %i" % rownum)
        for iteration in range (rownum):
            newValue = input("Please enter the %d number:" %iteration) 
            PrintingList.append(int(newValue))
            print()
def routes(rows,current_row=0,start=0):
           for i,num in enumerate(rows[current_row]): #gets the index and number of each number in the row
                if abs(i-start) > 1:   # Checks if it is within 1 number radius, if not it skips this one. Use if not (0 <= (i-start) < 2) to check in pyramid
                    continue
                if current_row == len(rows) - 1: # We are iterating through the last row so simply yield the number as it has no children
                    yield [num]
                else:
                    for child in routes(rows,current_row+1,i): #This is not the last row so get all children of this number and yield them
                         yield [num] + child 

numOfTries = input("Please enter the number of tries:")
Tries = int(numOfTries)
for count in range(Tries):
    numstr= input("Please enter the height:")
    rows = int(numstr)
    triangle(rows)
    routes(triangle)
    max(routes(triangle),key=sum) 
```

输出 ：

```
Please enter the number of tries:2
Please enter the height:4
Row no. 0
Row no. 1
Please enter the 0 number: 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T11:51:06.227

改变：

```
for rownum in range (rows): 
```

至：

```
for rownum in range (1, rows+1): 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T11:50:55.570

`range()`也可以取一个起始值：`range(1, rows+1)`

有关更多信息，请参阅[Python 文档](http://docs.python.org/library/functions.html#range)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-13T11:51:28.077

更改此行：

```
for rownum in range (rows): 
```

进入：

```
for rownum in range (1, rows+1): 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T11:51:46.250

只是改变

```
def routes(rows,current_row=0,start=0): 
```

至

```
def routes(rows,current_row=1,start=1): 
```

# asp.net-mvc - 如何使用主机文件设置开发环境以使用 Azure 模拟器中的子域，例如在 localhost(IIS) 上？

> ID：10140251
> 
> 赞同：2
> 
> 时间：2012-04-13T11:50:07.803
> 
> 标签：asp.net-mvc, azure, hosts-file

我通过调整主机文件在 IIS 上的 MVC 项目中工作。

运行 Azure 项目时，我可以看到一些端口被重新映射，不知道那在做什么或如何设置子域，是否也在 hosts 文件中完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:59:49.443

在 Windows Azure 中可以使用子域。如果您需要将这些子域映射到不同的 Web 应用程序，则需要在您的服务配置（**hostHeader**属性）中映射它们：

```
<Binding name="Endpoint1" endpointName="Endpoint1" hostHeader="app.litware.com" /> 
```

在本地开发时，您可以使用您描述的主机标头来执行此操作。如果你想部署到生产环境，你需要在你的域上配置一个 CNAME。

**资源**

*   [http://www.wadewegner.com/2011/02/running-multiple-websites-in-a-windows-azure-web-role/](http://www.wadewegner.com/2011/02/running-multiple-websites-in-a-windows-azure-web-role/)
*   [http://blog.smarx.com/posts/custom-domain-names-in-windows-azure](http://blog.smarx.com/posts/custom-domain-names-in-windows-azure)

# c# - Metro 风格混合应用程序 - C# + WebViews 与 JavaScript + WinRT C++ - 最佳选择是什么？

> ID：10140253
> 
> 赞同：3
> 
> 时间：2012-04-13T11:50:17.850
> 
> 标签：c#, c++, microsoft-metro, hybrid

我想知道构建 Metro 风格混合应用程序的最佳选择是什么？

一方面，用 C#/XAML 编写应用程序并在 WebView 中使用 HTML5/JavaScript/CSS3 将是一种常见的解决方案——这就是我在 iOS 或 Android 上的方式。

另一方面，编写基于 Web 技术的 Metro 风格应用程序似乎是一个好主意，并且仅在确实需要时才使用本机代码（使用 WinRT 组件），例如加密或图像处理。

*更聪明的方法是什么？两种方式的优点/缺点是什么？C++ 是唯一可用于与 JavaScript 通信的 WinRT 组件的本机语言吗？*

如果您能给我一些建议，那就太棒了-谢谢！;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T17:25:35.043

几周前，我们进行了概念验证，以研究跨平台混合 Metro 风格应用程序的可能性。正如你提到的，我们使用了 HTML5/JS/CSS，我们使用 PhoneGap 部署了它。流畅、响应迅速的 UI 需要一些工程设计，入围候选者是 iScroll 和 KnockOut.js 库。

我们针对 Android/iPad 平板电脑、Android 2.3+ 和 iPhone 进行了优化。您可以在此处观看结果：[http ://www.youtube.com/watch?v=v6MiKPX8OTo](http://www.youtube.com/watch?v=v6MiKPX8OTo)

我对你的经历很感兴趣，所以请随时告诉我你的结果！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T02:52:44.840

该视频展示了几个演示，其中一个是在 HTML/JS 应用程序中使用 WinRT C++ 组件：

[http://channel9.msdn.com/Events/TechEd/NorthAmerica/2012/DEV322](http://channel9.msdn.com/Events/TechEd/NorthAmerica/2012/DEV322)

# date - 需要软件解决方案来设置请求的到期日期

> ID：10140257
> 
> 赞同：0
> 
> 时间：2012-04-13T11:50:26.237
> 
> 标签：date, lotus

我必须创建一个程序，允许不同的用户发布一个请求（应该有一个要填写的请求表），然后由管理员主持。然后，管理员必须为单个请求设置不同的到期日期，多个到期日期，并且应该能够查看传入的到期日期。管理员还应该能够编辑那些已经接受的请求和更改日期、添加评论等。

如果可以通过电子邮件通知用户管理员对其请求所做的更改，那就太好了。

我想从您那里了解实现这一目标的最简单和最经济的方法。我有可用的 IBM lotus，如果我可以将它用作应用程序的大型机，我会很高兴，但我不知道它的管理或编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:04:13.040

看： [http](http://www.ibm.com/developerworks/lotus/library/cs-pt1/) ://www.ibm.com/developerworks/lotus/library/cs-pt1/ 和 [http://www-10.lotus.com/ldd/ddwiki.nsf/dx/cs_schema_toc](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/cs_schema_toc)

所以这个概念应该是制作一个使用 LOTUS CALENDAR api 来添加事件或修改它们的应用程序。带评论和附件。

猜猜最好的做法是任何你喜欢的编程语言，因为 api 的学习曲线应该比学习新的编程语言要少得多。

# wix - 使用 WIX 3.5 识别注册表中的不同版本

> ID：10140259
> 
> 赞同：0
> 
> 时间：2012-04-13T11:50:34.753
> 
> 标签：wix, wix3.5, wix3.6, wixlib

我有这样的要求：该产品的早期版本留下了一些需要在 Visual 中使用 WIX 3.5 清理的注册表项

方法：从注册表中搜索已安装的产品版本 然后，搜索每个与产品版本不匹配的注册表项，并执行Registry Action=remove。

我怎样才能做到这一点？在 WIX 中进行 RegistrySearch 时，如何存储产品的所有版本？

任何人都可以提供这个代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:57:45.113

如果注册表项对您的产品来说是唯一的，并且在安装最新版本的产品时需要删除，那么实际上不需要检查各种以前的版本。只需在安装过程中删除注册表项即可，无论之前安装了什么。如果密钥已经存在，它们将被删除，如果不存在，则不用担心。

# ios - Iphone 4s 蓝牙 LE 应用程序的后台时间问题

> ID：10140260
> 
> 赞同：23
> 
> 时间：2012-04-13T11:50:51.640
> 
> 标签：ios, core-bluetooth, bluetooth-lowenergy, background-application

我在 Iphone-4s 中为我的应用程序使用核心蓝牙框架。
这通常必须是一个可以运行尽可能长时间的后台应用程序。

现在它只运行 40 分钟 - 最多 1 小时。

我希望至少有 1 天左右。

对于此“蓝牙中心”值，在 .plist 文件的“所需背景模式”键中添加。

最后，我的应用程序似乎将进入“暂停”模式。因为当我再次打开应用程序（后台到前台状态）时，它再次发送通知，这意味着蓝牙连接仍然连接并且 BLE 设备仍在发送通知。如果我按下主页按钮并且应用程序进入后台，它不会再次收到通知。

谁能告诉我为什么我的应用程序最多只能在后台模式下运行 1 小时。它应该像普通的音乐应用程序一样在后台继续运行，就像永远一样。

Apple 是否具体说明了后台应用程序（属于 5 类中连续运行的后台应用程序之一）在哪种情况下会进入挂起模式？

参考“ `iPhoneAppProgrammingGuide`”，在“ `Communicating with a Bluetooth Accessory`”部分，我知道，对于蓝牙 LE 应用程序 2 实现的长时间运行后台任务是必要的：

`Info.plist`1) UIBackgroundModes 键在文件中应该是“bluetooth-central” 。2）任何支持蓝牙数据后台处理的应用程序都必须是基于会话的。

因此，对于我的应用程序，FIRST 实现已被合并，并且该应用程序能够在后台运行并在最长 1 小时的时间内完成所有任务。

现在我需要实施第二次实施。即基于会话。根据文档，即使应用程序处于“暂停”状态，这也将允许获取事件。我试图找到创建特定于蓝牙 LE（核心蓝牙框架）的合适会话，例如`EASession`经典蓝牙（外部附件框架）的“”。但我没有找到。

基本上我不确定我需要为 BLE 使用哪个会话类。对于音频/视频、网络和互联网、外部配件，有单独的会话课程可供选择。核心蓝牙框架没有。

任何人都可以帮助我，哪个会话类适合 BLE。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-03T13:57:40.617

我认为问题很简单，尝试`info.plist`像我的屏幕一样实现你：

![在此处输入图像描述](../Images/a454845376f0f577a05ebca095e892b7.png)
如果您愿意，您可以在`AppDelegate.m`下方添加功能`didFinishLaunchingWithOptions`以启用蓝牙、AirPlay WiFi 等，这只是一个示例代码，但我认为可以帮助您。

```
NSError *sessionError = nil;
[[AVAudioSession sharedInstance] setDelegate:self];
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayAndRecord error:&sessionError];
[[AVAudioSession sharedInstance] setActive:YES error:nil];

UInt32 sessionCategory = kAudioSessionCategory_MediaPlayback;
AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(sessionCategory), &sessionCategory);

UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute,sizeof (audioRouteOverride),&audioRouteOverride);

[[UIApplication sharedApplication] beginReceivingRemoteControlEvents]; 
```

希望这可以帮到你。

# asp.net - 带有 WCF 和 wsdl 定义的休息服务

> ID：10140267
> 
> 赞同：0
> 
> 时间：2012-04-13T11:51:08.957
> 
> 标签：asp.net, wcf, rest, wsdl

我在网上看到 REST 服务没有 wsdl 定义，而且在 WCF 中我们可以`webHttpBinding`用来创建 RESTful 服务。我下载了 SOA 清洁软件来测试我的服务，它的屏幕让我有点困惑。请看一下下面的镜头 ![在此处输入图像描述](../Images/1567a32db596de4040f892078766eb50.png) 现在看看`webHttpBinding`被选中的应该是一个 REST 服务，这个软件要求这个服务的 wsdl 定义。但是，如果我切换到第二个选项，即普通 Http(s) /REST，它只需要一个 url 即可与该服务进行通信。REST 有 wsdl 还是 webHttpBinding 不提供 REST 服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:08:23.660

REST 服务只能由 WCF 不支持的 WADL 或 WSDL 2.0 描述。[这个stackoverflow线程](https://stackoverflow.com/questions/6030749/wsdl-for-rest-wcf)我可以帮助你。

# android - Android：支持 unicode 字符？

> ID：10140278
> 
> 赞同：1
> 
> 时间：2012-04-13T11:52:07.540
> 
> 标签：android

Android 目前不支持所有 unicode 字符，因此无法打印某些音译。还有哪些其他选项是可行的，例如使用图像显示文本是否可以扩展？我有一个 1000 字的梵文脚本文本，我想显示它，我可以使用英文音译而不是实际字形。

# python - 如何找出文件是否在其`eof`？

> ID：10140281
> 
> 赞同：81
> 
> 时间：2012-04-13T11:52:08.690
> 
> 标签：python, file, eof

```
fp = open("a.txt")
#do many things with fp

c = fp.read()
if c is None:
    print 'fp is at the eof' 
```

除了上面的方法，还有什么方法可以判断fp是否已经在eof了？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-04-13T11:55:04.853

`fp.read()`读取到文件末尾，因此在成功完成后，您知道文件位于 EOF；没有必要检查。如果它无法达到 EOF，它将引发异常。

当以块而不是用 读取文件时，您知道当返回的字节数少于您请求的字节数`read()`时您遇到了 EOF 。`read`在这种情况下，以下`read`调用将返回空字符串（不是`None`）。以下循环以块的形式读取文件；它最多只能调用`read`一次。

```
assert n > 0
while True:
    chunk = fp.read(n)
    if chunk == '':
        break
    process(chunk) 
```

或者，更短：

```
for chunk in iter(lambda: fp.read(n), ''):
    process(chunk) 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2014-07-14T14:18:44.410

“for-else”设计经常被忽视。请参阅：[Python 文档“循环中的控制流”](https://docs.python.org/2/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops)：

**例子**

```
with open('foobar.file', 'rb') as f:
    for line in f:
        foo()

    else:
        # No more lines to be read from file
        bar() 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2012-04-13T11:54:37.053

我认为从文件中读取是确定它是否包含更多数据的最可靠方法。它可能是一个管道，或者另一个进程可能正在将数据附加到文件等。

如果你*知道*这不是问题，你可以使用类似的东西：

```
f.tell() == os.fstat(f.fileno()).st_size 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2016-06-16T09:51:09.047

由于python在EOF上返回空字符串，而不是“EOF”本身，你可以检查它的代码，写在这里

```
f1 = open("sample.txt")

while True:
    line = f1.readline()
    print line
    if ("" == line):
        print "file finished"
        break; 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2014-08-01T01:39:13.377

在进行二进制 I/O 时，以下方法很有用：

```
while f.read(1):
    f.seek(-1,1)
    # whatever 
```

优点是有时您正在处理二进制流并且事先不知道您需要阅读多少。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-04-13T11:54:26.197

`fp.tell()`您可以比较调用该`read`方法之前和之后的返回值。如果它们返回相同的值，则 fp 位于 eof。

此外，我认为您的示例代码实际上不起作用。`read`据我所知，该方法永远不会返回`None`，但它确实在 eof 上返回一个空字符串。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2012-04-13T11:55:24.417

遇到 EOF 时 read 返回一个空字符串。文档在[这里](http://docs.python.org/release/2.5.2/lib/bltin-file-objects.html)。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2014-12-09T07:08:41.473

```
f=open(file_name)
for line in f:
   print line 
```

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2018-02-08T07:20:33.393

我真的不明白为什么python仍然没有这样的功能。我也不同意使用以下

```
f.tell() == os.fstat(f.fileno()).st_size 
```

主要原因是`f.tell()`在某些特殊条件下不太可能工作。

该方法对我有用，如下所示。如果你有一些类似下面的伪代码

```
while not EOF(f):
     line = f.readline()
     " do something with line" 
```

您可以将其替换为：

```
lines = iter(f.readlines())
while True:
     try:
        line = next(lines)
        " do something with line"
     except StopIteration:
        break 
```

这种方法很简单，您不需要更改大部分代码。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2020-06-29T03:42:54.220

# 这是一种使用海象运算符（Python 3.8 中的新功能）执行此操作的方法

```
f = open("a.txt", "r")

while (c := f.read(n)):
    process(c)

f.close() 
```

## 有用的 Python 文档（3.8）：

海象运算符：[https ://docs.python.org/3/whatsnew/3.8.html#assignment-expressions](https://docs.python.org/3/whatsnew/3.8.html#assignment-expressions)

文件对象的方法：[https ://docs.python.org/3/tutorial/inputoutput.html#methods-of-file-objects](https://docs.python.org/3/tutorial/inputoutput.html#methods-of-file-objects)

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2013-09-10T04:37:33.350

如果文件以非块模式打开，返回的字节数少于预期并不意味着它在 eof，我想说@NPE 的答案是最可靠的方法：

> f.tell() == os.fstat(f.fileno()).st_size

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2012-04-13T11:55:02.997

如果 Python 读取函数到达 EOF，它们将返回一个空字符串

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-07-31T08:57:29.077

```
f = open(filename,'r')
f.seek(-1,2)     # go to the file end.
eof = f.tell()   # get the end of file location
f.seek(0,0)      # go back to file beginning

while(f.tell() != eof):
    <body> 
```

您可以使用[文件方法](https://docs.python.org/2/tutorial/inputoutput.html#methods-of-file-objects) ***seek()***和***tell()***来确定文件结尾的位置。找到位置后，返回文件开头

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2019-05-01T00:47:03.197

Python 没有内置的 eof 检测功能，但该功能可通过两种方式获得：如果没有更多字节要读取，`f.read(1)`则返回。`b''`这适用于文本和二进制文件。第二种方法是用来`f.tell()`查看当前查找位置是否在末尾。如果您希望 EOF 测试不更改当前文件位置，那么您需要一些额外的代码。

下面是这两种实现。

**使用 tell() 方法**

```
import os

def is_eof(f):
  cur = f.tell()    # save current position
  f.seek(0, os.SEEK_END)
  end = f.tell()    # find the size of file
  f.seek(cur, os.SEEK_SET)
  return cur == end 
```

**使用 read() 方法**

```
def is_eof(f):
  s = f.read(1)
  if s != b'':    # restore position
    f.seek(-1, os.SEEK_CUR)
  return s == b'' 
```

**如何使用这个**

```
while not is_eof(my_file):
    val = my_file.read(10) 
```

[玩这个代码](https://repl.it/@sytelus/eoftest)。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-01-27T21:47:23.653

您可以通过调用方法`tell()`到达后使用 方法，如下所示：`EOF``readlines()`

```
fp=open('file_name','r')
lines=fp.readlines()
eof=fp.tell() # here we store the pointer
              # indicating the end of the file in eof
fp.seek(0) # we bring the cursor at the begining of the file
if eof != fp.tell(): # we check if the cursor
     do_something()  # reaches the end of the file 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-07-22T19:11:31.347

获取文件的EOF位置：

```
def get_eof_position(file_handle):
    original_position = file_handle.tell()
    eof_position = file_handle.seek(0, 2)
    file_handle.seek(original_position)
    return eof_position 
```

并将其与当前位置进行比较：`get_eof_position == file_handle.tell()`.

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-01-12T04:19:05.083

虽然我个人会使用`with`语句来处理打开和关闭文件，但如果您必须从标准输入读取并需要跟踪 EOF 异常，请执行以下操作：

使用 try-catch`EOFError`作为例外：

```
try:
    input_lines = ''
    for line in sys.stdin.readlines():
        input_lines += line             
except EOFError as e:
    print e 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-07-31T22:39:13.067

我使用这个功能：

```
# Returns True if End-Of-File is reached
def EOF(f):
    current_pos = f.tell()
    file_size = os.fstat(f.fileno()).st_size
    return current_pos >= file_size 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-02-25T22:33:04.330

分批读取文件`BATCH_SIZE`（最后一批可以更短）：

```
BATCH_SIZE = 1000  # lines

with open('/path/to/a/file') as fin:
    eof = False
    while eof is False:
        # We use an iterator to check later if it was fully realized. This
        # is a way to know if we reached the EOF.
        # NOTE: file.tell() can't be used with iterators.
        batch_range = iter(range(BATCH_SIZE))
        acc = [line for (_, line) in zip(batch_range, fin)]

        # DO SOMETHING WITH "acc"

        # If we still have something to iterate, we have read the whole
        # file.
        if any(batch_range):
            eof = True 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-08-04T06:17:12.417

此代码适用于 python 3 及更高版本

```
file=open("filename.txt")   
f=file.readlines()   #reads all lines from the file
EOF=-1   #represents end of file
temp=0
for k in range(len(f)-1,-1,-1):
    if temp==0:
        if f[k]=="\n":
            EOF=k
        else:
            temp+=1
print("Given file has",EOF,"lines")
file.close() 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2022-01-08T01:44:08.600

**你可以试试这段代码：**

```
import sys
sys.stdin = open('input.txt', 'r') # set std input to 'input.txt'

count_lines = 0
while True:
    try: 
        v = input() # if EOF, it will raise an error
        count_lines += 1
    except EOFError:
        print('EOF', count_lines) # print numbers of lines in file
        break 
```

* * *

## 回答 #22

> 赞同：-5
> 
> 时间：2014-10-27T12:11:23.540

您可以使用下面的代码片段逐行读取，直到文件末尾：

```
line = obj.readline()
while(line != ''):
    # Do Something
    line = obj.readline() 
```

# uml - Sparx EA 逆向工程和推断关系？

> ID：10140287
> 
> 赞同：2
> 
> 时间：2012-04-13T11:52:34.623
> 
> 标签：uml, enterprise-architect

我正在使用 Sparx EA（当前版本）逆向工程一个简单的小测试解决方案到类图（C#，如果重要的话）。只有两个班。测试 1 和测试 2。Test1 有一个属性；

```
public List<Test2> test2list { get; set; } 
```

基于该属性，我希望 EA 推断这两个类是相关的并相应地更新图表，但它没有.. 我只得到两个类并且必须手动链接它们..

有什么方法可以让 EA 识别这些关系吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T11:28:18.467

首先，我认为问题评论中的讨论突出了潜在的问题：对于 UML 中的哪些关系对应于实现语言 X 中的哪些结构没有达成共识。

换句话说，最常见的实现语言没有标准化的 UML 配置文件。（Java 有一个非常古老的版本，但它已经过时了。）我认为这是 UML 的一大缺点，在任何特定工具中都不是问题。

回答这个问题：不，在这种情况下，EA 不会推断依赖关系或用法。但这里的问题更深层次：EA 没有正确解析模板类型。

扩展您的示例，请考虑以下四种情况：

```
public List<Test2> test2ListProp { get; set; }
public List<Test2> test2ListAttr;
public Test2 test2SingleProp { get; set; }
public Test2 test2SingleAttr; 
```

EA 识别属性，它表示为操作，而不是属性。它不会为这些创建任何连接器。另一方面，非属性在模型中由属性和定向关联表示。以这种方式使用的属性和定向关联在 UML 中在语义上是等价的，但对于操作则不成立。

如果您现在进入模型并重命名 Test2，您将看到 EA 正确更新了属性和属性中的非列表类型的名称，但其他类型保留了它们的`List<Test2>`类型。所以这就是它崩溃的地方；该`List<Test2>`类型只是一个字符串，而不是正确的模型引用。

您还应该注意，定向关联`test2ListAttr`的多重性为 0..*。这是因为 EA 已正确推断该属性实际上是一个列表。可以在工具 - 选项 - C# - 附加集合类中控制此推断。

如果您现在`List<#TYPE#>;`从该选项中删除，然后在您的模型中创建一个模板类`List`并重新导入（在这种情况下，首先清除模型可能是个好主意），EA 将更改其`test2ListAttr`. 它不会创建一个指向 0..* 的关联`Test2`，而是创建一个绑定到您的类的模板`List`，指定`Test2`为实际参数。

这是一个正确的模型引用，如果您更改`Test2`绑定的名称，将会更新（您可能需要重新加载图表）——换句话说，这是一个正确的表示，如果您要从此模型生成代码，这将是正确的。事实上，以这种方式设置选项并预先创建 List 类，对于上述四种情况中的三种情况，行为是正确的。

但是，这并不能解决类型为模板类的属性的问题。因为 EA 将它们表示为操作，所以它不能为它们绘制有向关联，因此，它也不会为它们绘制模板绑定。如果我是你，我应该将此报告为错误。

在相关说明中，您可以让 EA 为操作返回和参数类型创建依赖项（但不能用于模板类型使用）。这是在工具 - 选项 - 源代码工程中设置的。

# jquery - jquery表单检查，如果值为空，取消绑定提交点击

> ID：10140292
> 
> 赞同：2
> 
> 时间：2012-04-13T11:52:51.843
> 
> 标签：jquery, forms, bind, unbind

我尝试编写一个 jquery 表单检查代码，如果值为空/单词长度小于某个值，则取消绑定提交单击，在某些 div 中显示错误提示。然后5秒后，绑定提交点击。[jsfiddle 中](http://jsfiddle.net/kwyun/1/)的代码，但绑定/取消绑定不能按我的意愿工作。

JS：

```
$('#submit').click(function(){
    if($('#title').val().length<10){
        $('#statue').append('You should type more than 10 words');
        $('#submit').unbind("click");
        setTimeout(function (){
            $("#statue").html("");
            $('#submit').bind("click");
        }, 5000);
    }
    if($('#content').val().length<20){
        $('#statue').append('You should type more than 20 words');
        $('#submit').unbind("click");
        setTimeout(function (){
            $("#statue").html("");
            $('#submit').bind("click");
        }, 5000);
    }
    if(!$('#type').val()){
        $('#statue').append('You should select one type.');
        $('#submit').unbind("click");
        setTimeout(function (){
            $("#statue").html("");
            $('#submit').bind("click");
        }, 5000);
    }
}); 
```

​ HTML：

```
<form method="post" action="porcess.php">
    <input id="title" name="title" type="text" />
    <textarea name="content" id="content" cols="40" rows="2"></textarea>
    <select name="type" id="type" size="5">
        <option value="a">Section A</option>
        <option value="b">Section B</option>
        <option value="c">Section C</option>
        <option value="d">Section D</option>
        <option value="e">Section E</option>
    </select>
    <input type="submit" name="submit" id="submit" value="submit" />
</form>
<div id="statue"></div>​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T12:03:34.317

你的代码看起来很糟糕。你应该重用你的一些块。我更新了 jsFiddle，重用了一些代码，并重新安排了功能：http: [//jsfiddle.net/kwyun/21/](http://jsfiddle.net/kwyun/21/)

我修改的另一件事是绑定到另一个函数而不是 unbindig，因为如果用户在 5 秒间隔内单击，表单将提交。

稍后编辑：您可以中止解除绑定的想法，如果存在无效字段，则可以返回 false 并设置仅用于隐藏消息的计时器。这里是更新的 jsFiddle：http: [//jsfiddle.net/kwyun/27/](http://jsfiddle.net/kwyun/27/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T12:11:28.947

我稍微改变了你的代码。我倾向于缓存我的元素，而不是一遍又一遍地实例化它们。我还创建了一个单独的函数，它将禁用/启用提交按钮，而不是取消绑定点击事件，因为我认为这比取消绑定点击更加用户友好。最后，我添加了一个变量，该变量将根据验证返回真/假，这样您就不会提交表单，直到一切都如您所愿。

***[请参阅工作 jsFiddle 演示：](http://jsfiddle.net/DotNetScott/QTVVe/)***

## 缓存元素

```
var $submit = $('#submit'),
    $statue = $('#statue'),
    $title = $('#title'),
    $content = $('#content'),
    $type = $('#type'); 
```

## 提交点击处理程序

```
$submit.click(function() {

    var continueSubmit = true;

    if ($title.val().length < 10) {
        $statue.append('<br />Title needs more than 10 letters.');
        disableEnable(true);
        continueSubmit = false;    
    }

    if ($content.val().length < 20) {
        $statue.append('<br />Content needs more than 20 letters.');
        disableEnable(true);
        continueSubmit = false;
    }

    if (!$type.val()) {
        $statue.append('<br />You must select 1 type.');
        disableEnable(true);
        continueSubmit = false;
    }

    return continueSubmit;
}); 
```

## 禁用/启用提交按钮的功能

```
function disableEnable(isDisabled) {

    if (!isDisabled) { $statue.html(''); }
    $submit.prop('disabled', isDisabled);
    setTimeout(function() { disableEnable(false); }, 5000);

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T12:02:05.207

Hiya**工作演示**：http: [//jsfiddle.net/kwyun/17/](http://jsfiddle.net/kwyun/17/)

使用`e.preventdefault`或更改提交`type = "button"`

**HTML**

```
<form method="post" action="porcess.php">
    <input id="title" name="title" type="text" />
    <textarea name="content" id="content" cols="40" rows="2"></textarea>
    <select name="type" id="type" size="5">
        <option value="a">Section A</option>
        <option value="b">Section B</option>
        <option value="c">Section C</option>
        <option value="d">Section D</option>
        <option value="e">Section E</option>
    </select>
    <input type="button" name="submit" id="submit" value="submit" />
</form>
<div id="statue"></div>​ 
```

希望这有助于欢呼

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T11:59:00.957

你应该打电话`e.preventDeault()`

我更新了jsfiddle

[http://jsfiddle.net/kwyun/9/](http://jsfiddle.net/kwyun/9/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T12:01:53.710

首先，您需要在验证失败时返回`false`（或使用），否则提交将正常继续。`event.preventDefault`其次，您必须采取措施防止在您想要的 5 秒等待期间发生提交。只是取消绑定处理程序是行不通的，因为它会再次默认为正常提交，我想你不希望这样，对吧？

我建议不要将其绑定到另一个函数，该函数会在返回 false 时静默退出。5 秒后，再次将其绑定到原始函数。

*编辑：*另请注意，[`bind`](http://api.jquery.com/bind/)需要第二个参数，即绑定到事件的函数。仅仅用一个参数调用它是行不通的。检查第二种形式，即接受布尔值（preventBubble）的形式：这可能就是您需要的：

```
$('#submit').bind("click",false);
setTimeout(function (){
    $("#statue").html("");
    $('#submit').bind("click", yourFunction); // Remember to keep a reference to your function somewhere
}, 5000); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T12:18:19.653

我也更新了你的小提琴。看一看。

[jsfiddle](http://jsfiddle.net/ryanwfiorini/kwyun/29/)

# c# - 从 C# UserControl 调用 JavaScript 函数

> ID：10140301
> 
> 赞同：1
> 
> 时间：2012-04-13T11:53:11.487
> 
> 标签：c#, javascript

我使用 C# 开发了一个用户控件，并使用以下代码将其嵌入到 Lotus domino 网页中：

```
<OBJECT id="myUserControl" name="myUserControl" classid="clsid:eb6yhhh-f4db-480b-9c75-8d962790dfd34"></OBJECT> 
```

我想知道如何从我的 C# 用户控件调用 javascript 函数。

在 VB 6.0 中有一个提供此功能的函数：

```
Hyperlink.NavigateTo("javascript:Test()") 
```

但在 C# 中我看不到任何这样的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:20:23.670

使用以下链接解决：

[从 .NET 用户控件捕获 javascript 中的事件](http://social.msdn.microsoft.com/Forums/en/clr/thread/8e5823ca-bbea-4bfe-8826-8717ae16ba77)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T15:06:50.883

[ClientScriptManager.RegisterStartupScript](http://msdn.microsoft.com/en-us/library/z9h4dk8y.aspx "ClientScriptManager.RegisterStartupScript")应该这样做。

尝试这样的事情：

```
if (!ClientScript.IsStartupScriptRegistered("Test"))
{
  Page.ClientScript.RegisterStartupScript(GetType(), "Test", "Test();", true);
} 
```

# silverlight - 如何从 Silverlight 中用户控件的视图模型类打开另一个用户控件？

> ID：10140302
> 
> 赞同：2
> 
> 时间：2012-04-13T11:53:13.910
> 
> 标签：silverlight, mvvm

我是 MVVM 模型的新手。我有一个带有按钮数量的用户控件。我正在通过 RoutedEvent 处理视图模型类中这些按钮的单击事件。我必须在按钮的单击事件中调用/打开另一个用户控件。如何做到这一点？

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T13:09:29.183

您所描述的是大多数 MVVM 新手都在努力解决的问题之一 - 导航。一般来说，我试图避免让我的任何 Viewmodel 对它自己的视图（视图模型应该是漂亮的视图不可知论）或任何其他视图都没有任何知识。

解决此问题的一种方法是在您的应用程序中使用一个中央组件来处理所有导航。我们称它为 NavigationController。该组件处理导航请求并负责创建视图（以及可选的关联视图模型）及其初始化，它是应用程序中唯一真正了解各种视图模型及其各自视图之间的相互依赖关系的组件。

理想情况下，ViewModel 和控制器之间的通信是通过事件聚合器（例如[TinyMessenger](http://hg.grumpydev.com/tinyioc/wiki/TinyMessenger)）执行的，这使得实现松散耦合的导航（以及更多）变得容易。

最后，我怀疑您的意思是要调出一个简单的 UserControl，而是要调出某种对话框，这意味着 UserControl 托管在子窗口中。这也可以使用我概述的方法来解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T22:29:22.743

要执行您想做的事情，您需要结合使用控件和表单。请注意，我的回答适用于 Silverlight 4 及更高版本。首先，我会将按钮“COMMAND”绑定到视图模型命令实现。在以下示例中，我的控件的 DataContext 是我的视图模型的一个实例。我的 ViewModel 实现了一组 Keys(strings) 和 ViewModelCommand 类的哈希表。忽略实现的复杂性。关键是按钮绑定到“命令”

```
<Button Style="{StaticResource stTitleButton}"  Height="Auto" Foreground="White" 
                    Command="{Binding ViewModelCommandIoC.ViewModelCommands[FIND]}" 
                    CommandParameter="{Binding ElementName=enHiddenControl}"
                    Visibility="{Binding CanSwitchCustomer,Converter={StaticResource VisibilityValueConverter},FallbackValue=Collapsed}"
                    > 
```

在上面的示例中，该命令绑定到我在“FIND”下索引的命令。这与直接绑定到命令相同。下一个重要部分是 CommandParameter。这是您希望在新窗口中显示的控件的隐藏实例。在这种情况下，控件的名称是“enHiddenControl”。您可以将此控件放在屏幕上的任何位置，只需确保其隐藏即可。这将作为命令的方法签名中的参数出现。例如：

```
 /// <summary>
    /// Finding an existing customer
    /// </summary>
    /// <param name="sender">The command parameter - control </param>
    /// <param name="e"></param>
    public void OnChangeCustomer(object sender)... 
```

当这个发送者进来时，目标是获取类型并使用激活器创建该类的实例。激活器位于**System.Reflection**或**System.Reflection.Emit**中。（我是从头顶输入的，它主要是理论上的，但应该可以；）

```
Activator.CreateInstance(sender.GetType()) 
```

创建此类的实例后，将其添加到“ChildControl”上的 LayoutGrid。如何？创建一个网格，将其命名为“LayoutRoot”。创建一个 ChildControl，将网格添加到子控件，然后将刚刚创建的实例添加到网格。显示表格。从理论上讲，您只是在不了解特定类的情况下使用控件动态创建了一个表单。只有泛型。表格的大小……那是另一回事。我会使用 Auto 作为宽度和高度。因此，控件的大小理论上应该决定表单的大小。

最后，该方法应如下所示：

```
public void OnChangeCustomer(object sender)
{
        //the search screen
        if (sender is UserControl)
        {
            UserControl uc = Activator.CreateInstance(sender.GetType()) as UserControl;
            Grid grdLayoutRoot = new Grid();
            grdLayoutRoot.Name = "LayoutRoot";
            grdLayoutRoot.Children.Add(uc);
            ChildWindow cw = new ChildWindow();
            cw.Content = grdLayoutRoot;
            cw.Show();
        }
} 
```

所有这些都是理论上的，从未经过测试，但考虑到我在 C# 中完成此类特技的次数，它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:43:59.577

要么将控件放在 XAML 中，并将可见性属性设置为折叠，然后在事件处理程序中将其更改为可见

```
<TextBlock HorizontalAlignment="Left" Visibility="Collapsed" Name="ErrorBlock" Text="Authentication Failed." VerticalAlignment="Top" Foreground="Red" FontWeight="Bold" /> 
```

从 C#

```
ErrorBlock.Visibility = System.Windows.Visibility.Visible; 
```

另一个选项是以编程方式创建控件并将它们添加到父级，例如网格请参阅以下链接以获取将矩形添加到网格的示例

[http://forums.silverlight.net/t/135977.aspx/1](http://forums.silverlight.net/t/135977.aspx/1)

# java - 一个HashMap的遍历，我得到NullPointerException

> ID：10140312
> 
> 赞同：0
> 
> 时间：2012-04-13T11:53:46.120
> 
> 标签：java, map

> **可能重复：**
> [遍历 HashMap 时，我得到 NullPointerException](https://stackoverflow.com/questions/10140022/when-traverse-a-hashmap-i-get-nullpointerexception)

这是我的代码：

```
HashMap<String, HashSet<String>> map;

....//I didn't write those code.

System.out.println(map.entrySet().size()); // run util here is ok, I get the size of the map.
for(Map.Entry<String, HashSet<String>> entry : map.entrySet()) {// here throw the exception

} 
```

我得到了例外：

key.test.EnwikiOutlink.main(EnwikiOutlink.java:68) 处的线程“主”java.lang.NullPointerException 中的异常

地图对象有超过 10,000 个地图对象，我在服务器机器上运行它，无法调试。但是当我减小这张地图的大小（低于 10,000）时，程序运行正常。问题的原因是什么，解决方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:59:59.860

**HashMap 允许 null 值**。因此，在您的 HashMap 中，如果**HashSet 为 null**，您将获得 NullPointerException。**确保 HashSet 不为 null**。

# c++ - c++ mysql存储过程错误代码1327

> ID：10140313
> 
> 赞同：0
> 
> 时间：2012-04-13T11:53:46.910
> 
> 标签：c++, mysql

我有这张桌子

```
create table utilizator(
      utilizatorId bigint not null auto_increment primary key,
      loghin varchar(500),
      password varchar(50) not null,
      tip bigint not null,
      persoanaId bigint not null,
      evenimentId bigint not null); 
```

和这段代码在 C++

```
 string vU="demo",vP="1234";
 Driver * vDriver = get_driver_instance();
 auto_ptr< Connection > vCon(vDriver->connect(getHost(),getUser() , getPassword() ));
 vCon->setSchema(getDB());
 auto_ptr< Statement > vStmt(vCon->createStatement());

 vStmt->execute("DROP PROCEDURE IF EXISTS fLoghin");   
 vStmt->execute("CREATE PROCEDURE fLoghin(in pUser varchar(200),in pPass varchar(200),out pUId int,out pTip int,out pEId int) BEGIN   select utilizatorId into pUId ,tip into pTip,evenimentId into pEId from utilizator where loghin=pUser and password=pPass ;  END ; ");
 vStmt->execute("CALL fLoghin("+vU+","+vP+", @out1,@out2,@out3)");

 auto_ptr<ResultSet > res(vStmt->executeQuery("SELECT @out1,@out2,@out3 AS _reply"));
    while (res->next())
      cout << "... @output = " << res->getString("_reply") << endl; 
```

在行 **vStmt->execute("CREATE PROCEDURE ...** 我收到此错误

```
 ERR: Undeclared variable: tip (MySQL error code: 1327, SQLState: 42000 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:16:35.043

尝试

```
CREATE PROCEDURE fLoghin(in pUser varchar(200),
                         in pPass varchar(200),
                         out pUId int,
                         out pTip int,
                         out pEId int) 
BEGIN   
    select pUId = utilizatorId, pTip = tip, pEId = evenimentId
    from utilizator 
    where loghin=pUser and password=pPass ;  
END ; 
```

我现在无法验证。也许你需要`@`在你的变量前面放一个

```
@PUId = utilizatorId ... 
```

# php - Zend - 使用数据库返回的数据填充组合框

> ID：10140314
> 
> 赞同：-1
> 
> 时间：2012-04-13T11:53:47.263
> 
> 标签：php, zend-framework, zend-form, zend-db, zend-studio

我尝试这样做：

```
public function init()
{
    /* Form Elements & Other Definitions Here ... */

    $sets_table = new Optionals_Model_DbTable_Sets();

    $set = new Zend_Form_Element_Select('set');
    $set ->setLabel('Alegeti setul de optionale:');

    foreach ($sets_table->getSets() as $value) {
        echo $value->cod_set_optional;
        $set->addMultiOption($value->cod_set_optional);
    }

    $submit = new Zend_Form_Element_Submit('Continua');

    $this->addElements ( array (
            $set,
            $submit
    ) );
} 
```

DbTable 中的 getSets() 如下所示：

```
public function getSets()
{
    $select = $this->select();
    $rows = $this->fetchAll($select);
    if (!$rows) {
        throw new Exception("Could not find!");
    }
    return $rows;
} 
```

[我在这里](http://www.peacocksuit.com/blog/tag/zend_form_element_select/)看到过这种做法，但它不起作用。回声工作正常，但未填充组合框。我的代码有问题还是什么？

谢谢！索林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:01:43.217

`addMultiOption($option, $value)` [需要两个参数，而您只给它一个值。](http://framework.zend.com/manual/en/zend.form.standardElements.html#zend.form.standardElements.select)

你应该做这个 ：

```
 foreach ($sets_table->getSets() as $set) {
        $set->addMultiOption($set->id , $set->value);
    } 
```

确保您的 getSets 从您的表中返回一个 id 和一个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T07:21:56.120

如果您使用 fetchAll 方法只是使用

```
$list->addMultiOptions(usermodel::getInstance()->getusers()); 
```

整个代码是这样的

```
$list      =   new Zend_Form_Element_Select('users');
$list->setLabel('Select a user')
          ->setRequired(true)
          ->addValidators(array(array('notEmpty',true, array('messages' => array('isEmpty' => 'Please select a User')))));
$list->addMultiOptions(usermodel::getInstance()->getusers());
die($list); 
```

并且在模型中

```
class usermodel extends Zend_Db_Table
{
    protected  $_name               =   'users';
    protected  static $_instance    =   null;

    public function getusers()
    {
        $sql          =     "SELECT us.`id` AS `key`,CONCAT(us.`firstname`,' ',us.`lastname`) AS `value` FROM   
     `users` us 
                            ORDER BY us.`firstname` ASC";  
        return  $this->getAdapter()->fetchAll($sql);
    }

    public static function getInstance(){
         if( !isset(self::$_instance) ){
            $instance = new self();
            self::$_instance = $instance;
         }
         return self::$_instance;
    }

} 
```

# windows-server-2008-r2 - RDP 连接中的组策略

> ID：10140316
> 
> 赞同：1
> 
> 时间：2012-04-13T11:54:06.897
> 
> 标签：windows-server-2008-r2, rdp, group-policy

所以我把自己逼到了一个角落——我希望在用户通过 RDP 登录到服务器时运行应用程序或命令。根据 Microsoft 网站上的最佳实践建议，我将此程序设置为在组策略规则下运行，现在我进退两难：

我通过 RDP 登录到我的服务器，默认程序启动，然后立即将我注销，我没有机会做任何事情。

如何再次进入该框以更改此设置？服务器是 Windows 2008 r2，在远程 IP 上安装了终端服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T01:41:57.790

您可以删除\编辑 GPO，稍等片刻，然后重新启动服务器吗？您仍然可以向它发送“shutdown /m \computername”。您还可以在重新启动之前使用 psexec 远程运行“gpupdate /force”。

如果您将其设置为本地组策略，那么您可以尝试打开 mmc，选择组策略编辑器，然后将其指向该计算机以编辑策略。更详细地说：

1.  开始 --> 运行 --> mmc
2.  文件 --> 添加/删除管理单元
3.  在独立选项卡下，单击添加...
4.  选择组策略对象编辑器
5.  在以下向导中，单击浏览按钮
6.  单击“计算机”选项卡，选择“另一台计算机”单选按钮，然后键入名称或浏览到远程计算机
7.  单击确定，然后单击完成，然后单击关闭，最后单击确定

您也可以编辑/添加一个运行“shutdown -a”的登录脚本以中止注销/关闭，但这可能由于时间问题而无法工作。

您没有提到这是域还是本地的，但这些选项应该照顾到任何一个。

# xpages - xe:objectData 和全局变量

> ID：10140318
> 
> 赞同：1
> 
> 时间：2012-04-13T11:54:10.923
> 
> 标签：xpages, xpages-extlib

我遇到了 xe:objectData 和全局变量的问题。不确定这是错误还是按设计工作。我知道，这个样本很愚蠢。它只是为了证明这个问题。

1.  按预期工作
2.  抛出异常。当我尝试在 xe:objectData 中使用作用域变量时，我看到了相同的行为。尽管变量包含值，但始终返回 null。

有人对此有所了解吗？

![在此处输入图像描述](../Images/487fabf682d8d781e63d80d95ed3cddb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:26:06.240

我相信您当时不能使用捆绑资源，因为生命周期中发生事情的时间。当调用 objectData 的 create object 方法时，可能还没有创建其他对象。您可能必须手动加载捆绑包并检索您需要的属性。

# objective-c - 带有文件选择的 NSComboBox

> ID：10140320
> 
> 赞同：1
> 
> 时间：2012-04-13T11:54:18.407
> 
> 标签：objective-c, cocoa, appkit, nscombobox

我想创建一个 NSComboBox，如下所示：

**点击前：**

![在此处输入图像描述](../Images/e4b96dd9197dc226ad007240b6202bbf.png)

**点击后：**

![在此处输入图像描述](../Images/a289a0f170a0aa4165ca4075649d6995.png)

我知道这个组合框可以通过使用 Java 来实现。我创建了一个快速的 JFrame，添加了一个 JCombobox，并得到了相同的外观！

但我的问题是：

如何在 Cocoa (AppKit) 中获得这个组合框（我在 Objective-C 中编程）。另外，如何实现分隔符和“选择...”。按选择将打开一个文件选择窗口：

![在此处输入图像描述](../Images/01ad40b1ab9f77ed0589079f2e86cb34.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T12:23:29.407

在 Cocoa 中，这称为 NSPopupButton。没有文本字段，所以它不是组合框（没有“组合”）。

最简单的设置方法是在 IB 中创建菜单，包括分隔符和指向操作的指针，然后设置弹出按钮的“菜单”属性。

Apple [NSPopupbutton 参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSPopUpButton_Class/Reference/Reference.html)有几个示例项目的指针。还有很多关于如何在 Interface Builder 中设置菜单操作的在线教程。

# c# - 减少图像中的颜色深度不会减少文件大小？

> ID：10140322
> 
> 赞同：1
> 
> 时间：2012-04-13T11:54:21.767
> 
> 标签：c#, image-processing, compression, color-depth

我使用此代码来减少图像的深度：

```
public void ApplyDecreaseColourDepth(int offset)
{
    int A, R, G, B;

    Color pixelColor;

    for (int y = 0; y < bitmapImage.Height; y++)
    {
        for (int x = 0; x < bitmapImage.Width; x++)
        {
            pixelColor = bitmapImage.GetPixel(x, y);

            A = pixelColor.A;

            R = ((pixelColor.R + (offset / 2)) - ((pixelColor.R + (offset / 2)) % offset) - 1);

            if (R < 0)
            {
                R = 0;
            }

            G = ((pixelColor.G + (offset / 2)) - ((pixelColor.G + (offset / 2)) % offset) - 1);

            if (G < 0)
            {
                G = 0;
            }

            B = ((pixelColor.B + (offset / 2)) - ((pixelColor.B + (offset / 2)) % offset) - 1);

            if (B < 0)
            {
                B = 0;
            }

            bitmapImage.SetPixel(x, y, Color.FromArgb(A, R, G, B));
        }
    }
} 
```

第一个问题是：我给函数的偏移量不是深度，对吗？

第二个是当我减少图像的颜色深度后尝试保存图像时，我得到的原始图像大小相同。我应该得到一个更小的文件是不是合乎逻辑的，或者我错了。

这是我用来保存修改后的图像的代码：

```
private Bitmap bitmapImage;

public void SaveImage(string path)
{
    bitmapImage.Save(path);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T12:01:44.473

您只是将像素值设置为较低级别。

例如，如果一个像素由 3 个通道表示，每个通道 16 位，则您将每个像素颜色值减少到每个通道 8 位。这永远不会减小图像大小，因为分配的像素已经具有 16 位的固定深度。尝试将新值保存到最大为 8 位深度的新图像中。
当然，您将以字节为单位缩小图像，但不是整体大小，即图像的 X，Y 尺寸将保持不变。您正在做的事情会降低图像质量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T12:37:32.070

让我们先清理一下代码。以下模式：

```
R = ((pixelColor.R + (offset / 2)) - ((pixelColor.R + (offset / 2)) % offset) - 1);
if (R < 0)
{
    R = 0;
} 
```

相当于这个：

```
R = Math.Max(0, (pixelColor.R + offset / 2) / offset * offset - 1); 
```

因此，您可以将您的功能简化为：

```
public void ApplyDecreaseColourDepth(int offset)
{
    for (int y = 0; y < bitmapImage.Height; y++)
    {
        for (int x = 0; x < bitmapImage.Width; x++)
        {
            int pixelColor = bitmapImage.GetPixel(x, y);

            int A = pixel.A;

            int R = Math.Max(0, (pixelColor.R + offset / 2) / offset * offset - 1);
            int G = Math.Max(0, (pixelColor.G + offset / 2) / offset * offset - 1);
            int B = Math.Max(0, (pixelColor.B + offset / 2) / offset * offset - 1);

            bitmapImage.SetPixel(x, y, Color.FromArgb(A, R, G, B));
        }
    }
} 
```

要回答您的问题：

1.  正确的; 偏移量是 step 函数中的步骤大小。每个颜色分量的深度是原始深度减去 log [2]（偏移量）。例如，如果原始图像的每个分量 (bpc) 的深度为 8 位，偏移量为 16，则每个分量的深度为 8 - log [2] (16) = 8 - 4 = 4 bpc。但是请注意，这仅表示每个输出组件可以容纳多少熵，而不是每个组件实际用于存储结果的比特数。
2.  输出文件的大小取决于存储的颜色深度和使用的压缩。简单地减少每个组件可以具有的不同值的数量不会自动导致每个组件使用更少的位，因此除非您明确选择每个组件使用更少位的编码，否则未压缩的图像不会缩小。如果您要保存压缩格式（例如 PNG），您可能会看到转换后的图像有所改进，或者您可能不会；这取决于图像的内容。具有许多平坦无纹理区域的图像（例如线条艺术图）的改进可以忽略不计，而照片可能会从变换中显着受益（尽管以牺牲感知质量为代价）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T12:08:35.610

首先我想问你一个简单的问题:)

诠释 i = 10;

现在 i = i--;

浇灭它对 i 大小的影响？答案是没有。

你在做同样的事情

成像的索引在两个矩阵中表示，1 用于颜色映射，2 用于图像映射

你只是改变元素的值而不是删除它，所以它不会影响图像的大小

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T12:10:57.620

您不能使用 Get/SetPixel 降低颜色深度。这些方法只会改变颜色。

似乎您无法轻松地将图像保存为某种像素格式，但我确实找到了一些代码来更改内存中的像素格式。您可以尝试保存它，它可能会起作用，具体取决于您保存的格式。

从这个问题：[https ://stackoverflow.com/a/2379838/785745](https://stackoverflow.com/a/2379838/785745)

他给出了这个代码来改变颜色深度：

```
public static Bitmap ConvertTo16bpp(Image img) {
    var bmp = new Bitmap(img.Width, img.Height, System.Drawing.Imaging.PixelFormat.Format16bppRgb555);
    using (var gr = Graphics.FromImage(bmp))
    {
        gr.DrawImage(img, new Rectangle(0, 0, img.Width, img.Height));
    }
    return bmp;
} 
```

您可以将代码中的 PixelFormat 更改为您需要的任何内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T13:53:12.783

如果要减小图像的大小，可以在调用[Image.Save()](http://msdn.microsoft.com/en-us/library/9t4syfhh.aspx)时指定不同的压缩格式。

GIF 文件格式可能是一个不错的选择，因为它最适用于相同颜色的连续像素（当您的颜色深度较低时，这种情况更常见）。

JPEG 非常适用于照片，但如果将 24 位图像转换为 16 位图像，然后使用 JPEG 对其进行压缩，则不会看到显着的结果，因为算法的工作方式（最好保存24 位图片直接为 JPEG）。

正如其他人所解释的那样，您的代码不会减少 Image 对象使用的大小，除非您实际将结果数据复制到另一个具有不同[PixelFormat](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.pixelformat.aspx)的 Bitmap 对象中，例如`Format16bppRgb555`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T12:01:49.363

具有一定像素数的位图图像始终大小相同，因为位图格式不应用压缩。如果您使用算法（例如JPEG）压缩图像，那么“缩小”的图像应该更小。

```
R = ((pixelColor.R + (offset / 2)) - ((pixelColor.R + (offset / 2)) 
```

这不总是返回0吗？

# android - colors.xml 文件在 Eclipse 中不起作用

> ID：10140323
> 
> 赞同：-1
> 
> 时间：2012-04-13T11:54:22.483
> 
> 标签：android, xml, eclipse

我正在尝试为 hello world 应用程序运行 res/values 下的 colors.xml 文件。

我在 .xml 中添加了以下代码：

```
<resources>
    <color name="background_color">#00F</color>
    <color name="app_text_color">#FF00FF</color>
</resources> 
```

但是，当我运行应用程序时，显示的字符串没有任何背景颜色或应用程序文本颜色。我是否也必须以编程方式编写代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:00:15.850

是的，如果您想为整个应用更改这些设置，您需要明确地将颜色应用于您的视图或创建自定义主题。

```
 <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="@color/app_text_color"
        android:text="hallo" /> 
```

# java - 无法解析opencsv导入

> ID：10140324
> 
> 赞同：2
> 
> 时间：2012-04-13T11:54:25.683
> 
> 标签：java, maven, csv

任何人都知道为什么我不能使用opencsv？

```
 <dependency>
            <groupId>net.sf.opencsv</groupId>
            <artifactId>opencsv</artifactId>
            <version>2.3</version>
        </dependency>

import au.com.bytecode.opencsv.CSVReader; 
```

> eclipse：“无法解决导入 au”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:16:26.283

不幸的是，Eclipse 对 Maven 的支持远非完美，有时会发生一些奇怪的事情。首先，确保您使用的是 m2e，至少 1.0 版本。第二件事，重新生成 Eclipse 项目文件`Maven -> Update Project Configuration...`。它必须工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-24T08:12:34.957

我写了这段代码，我的例子没有问题。

```
<dependency>
            <groupId>au.com.bytecode</groupId>
            <artifactId>opencsv</artifactId>
            <version>${opencsv.version}</version>
</dependency> 
```

# objective-c - 设置背景图片位置

> ID：10140329
> 
> 赞同：2
> 
> 时间：2012-04-13T11:54:55.477
> 
> 标签：objective-c, macos, app-store, applescript

是否有任何符合 Mac App Store 标准的方式将桌面壁纸位置设置为“拉伸以填充屏幕”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T19:50:47.107

[这个来自 Apple 的代码示例](https://developer.apple.com/library/mac/#samplecode/DesktopImage/Introduction/Intro.html)很好地概述了该问题以及如何在 Cocoa 中为它正确编码。显着的代码片段如下所示：

```
- (void)updateScreenOptions:(NSScreen*)screen
{
    if (screen)
    {
        NSDictionary *screenOptions = [[NSWorkspace sharedWorkspace] desktopImageOptionsForScreen:curScreen];

        // the value is an NSNumber containing an NSImageScaling (scaling factor)
        NSNumber *scalingFactor = [screenOptions objectForKey:NSWorkspaceDesktopImageScalingKey];
        [scalingPopup selectItemAtIndex:[scalingFactor integerValue]];

        // the value is an NSNumber containing a BOOL (allow clipping)
        NSNumber *allowClipping = [screenOptions objectForKey:NSWorkspaceDesktopImageAllowClippingKey];
        [[clippingCheckbox cell] setState:[allowClipping boolValue]];

        // the value is an NSColor (fill color)
        NSColor *fillColorValue = [screenOptions objectForKey:NSWorkspaceDesktopImageFillColorKey];
        if (fillColorValue)
            [fillColor setColor:fillColorValue];
    }
} 
```

正如[一些答案勘误表](https://stackoverflow.com/a/10180262/517815)中提到的，正确的方法在这里调用来解决您的问题似乎是`[screenOptions setObject:scalingFactor forKey:NSWorkspaceDesktopImageScalingKey]`and `[[NSWorkspace sharedWorkspace] setDesktopImageURL:imageURL forScreen:curScreen options:screenOptions error:&error]`，它应该提供所需的功能。

我坦率地承认[这是一项协作努力](https://stackoverflow.com/a/10180262/517815)，但似乎我们已经错误地找到了正确的解决方案。

[`NSImageScaling`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSCell_Class/Reference/NSCell.html#//apple_ref/c/tdef/NSImageScaling)（关于枚举 和的附加信息[`NSWorkspace`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html)，其中包含正确的缩放键。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T19:19:20.600

不幸的是，没有与 Mac App Store 兼容的方式来设置桌面图像选项。对于桌面图像，它们唯一可用的方法是：

```
– desktopImageURLForScreen:
– setDesktopImageURL:forScreen:options:error:
– desktopImageOptionsForScreen: 
```

您可以通过执行 AppleScript 来做到这一点，尽管我认为 Apple 不会喜欢这样。

希望这可以帮助！

编辑：

```
[screenOptions setObject:scalingFactor forKey:NSWorkspaceDesktopImageScalingKey];
[[NSWorkspace sharedWorkspace] setDesktopImageURL:imageURL forScreen:curScreen options:screenOptions error:&error]; 
```

# android - android：在strings.xml中声明巨大的字符串

> ID：10140330
> 
> 赞同：0
> 
> 时间：2012-04-13T11:54:56.680
> 
> 标签：android, string

我的应用程序中有一个非常大的 HTML 字符串。

当我在代码中使用它时，一切都很好，但是当我尝试在 strings.xml 中声明它时，我遇到了一些错误。有没有办法在 strings.xml 中制作字符串的简单副本？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T11:58:54.413

HTML 和 XML 是同一种基本语言，我不相信你可以将 HTML 存储在一个字符串中，为什么不保存 html 页面并将其与应用程序一起打包呢？

* * *

在 res > raw 中将页面保存为 html 页面，然后调用该方法

```
 String html = Utils.readRawTextFile(ctx, R.raw.rawhtml);

 public static String readRawTextFile(Context ctx, int resId)
     {
          InputStream inputStream = ctx.getResources().openRawResource(resId);

             ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();

             int i;
              try {
               i = inputStream.read();
               while (i != -1)
                  {
                   byteArrayOutputStream.write(i);
                   i = inputStream.read();
                  }
                  inputStream.close();
              } catch (IOException e) {
                  return null;
              }
                 return byteArrayOutputStream.toString();
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T11:57:49.093

错误可能出现在特殊字符上，例如`@` `double quote` `single quote`等，以克服它的前缀`\`，您的错误得到解决

如果您以编程方式分配相同的字符串，您也会发现相同的问题

```
String mString= "your huge string with @ error"; 
```

在这你也必须克服前缀反斜杠

```
 String mString= "your huge string with \@ error"; 
```

# macos - AppleScript - 系统事件错误：辅助设备的访问被禁用

> ID：10140334
> 
> 赞同：9
> 
> 时间：2012-04-13T11:55:11.903
> 
> 标签：macos, applescript

我对 AppleScript 和系统事件有疑问。

我在“系统偏好设置”的“通用访问”偏好设置窗格中选中“启用辅助设备访问”。

当我尝试：

> arch -i386 osascript -e '告诉应用程序“系统事件”获取每个进程的每个窗口的位置'

我有这个错误：

> 系统事件出现错误：辅助设备的访问被禁用。(-25211)

你有什么主意吗 ？

非常感谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-25T21:11:27.083

在 Mac OS X 10.9 上，当**AppleScript 编辑器**不允许使用辅助功能时，您实际上会遇到相同的错误。

以下是启用它的方法：

转到**系统偏好设置**>**安全和隐私**>**隐私**>**辅助功能**。

![在此处输入图像描述](../Images/3765bd50d38c63a619c74ada5578b284.png)

**然后，只需选中AppleScript 编辑器**左侧的复选框，错误就会消失。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-13T12:24:11.097

问题不在于辅助设备。当 AppleScript 尝试访问一个永远不会有任何窗口的进程的窗口时，它似乎错误地返回了该错误代码（在我的情况下，它是“Google Chrome Helper”）。

您需要捕获错误。这对我有用：

```
tell application "System Events"
    set procs to processes
    set windowPositions to {}
    repeat with proc in procs
        try
            if exists (window 1 of proc) then
                repeat with w in windows of proc
                    copy w's position to the end of windowPositions
                end repeat
            end if
        end try -- ignore errors
    end repeat
end tell
return windowPositions 
```

返回坐标对列表，例如 {{1067, 22}, {31, 466}, {27, 56}, {63, 22}, {987, 22}} - 这就是您想要得到的吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-01T20:24:05.967

与此页面上关于 Mac OS X 10.9 (Mavericks) 的帖子类似，要在 Mac OS X 10.8（也可能在早期版本的 OS X 上）解决此问题，您需要确保“启用辅助设备的访问权限”选项已在系统偏好设置的辅助功能窗格中启用。

![在此处输入图像描述](../Images/86c970ed83f4699d27677a17860493eb.png)

# ios - 如何在 ios 中执行字符串操作？

> ID：10140338
> 
> 赞同：-2
> 
> 时间：2012-04-13T11:55:25.123
> 
> 标签：ios, string

我有 n 个文件。我将 n 个文件附加到表视图中。实际上，n 个文件属于一个文件夹。但是当我将这些文件附加到表视图时，它们被附加到表视图中，并以单行分隔通过逗号。如何在表格视图中将它们拆分为不同的行。请给我建议并帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:59:36.107

将文件名放在一个数组中，比如说`fileNames`，它们在`viewDidLoad`方法中找到。

并实现如下方法：

```
-(NSInteger)tableView:(UITableView *)aTableView numberOfRowsInSection:(NSInteger)section
{
    return [fileNames count];
}

-(UITableViewCell*)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"];

    }
    cell.textLabel.text = [fileNames objectAtIndex:indexPath.row];
    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:00:26.800

将您的文件列表存储在一个数组中，每个数组元素有一个文件名，并用于`indexPath.row`选择正确的文件名。

`componentsSeparatedByString:`如果您需要分解单个字符串，请使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:00:45.373

使用[componentsSeparatedByString：](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

# c# - NUnit：如何只运行具有特定属性（优先级或类型）的测试

> ID：10140343
> 
> 赞同：8
> 
> 时间：2012-04-13T11:55:32.470
> 
> 标签：c#, unit-testing, nunit

我希望能够根据几个标准有选择地运行 NUnit 测试。就我而言，选择将基于：测试优先级和/或测试类型。

测试类/方法如下所示：

```
namespace NUnit.Tests
{
  using System;
  using NUnit.Framework;

  [TestFixture]
  public class MathTests
  {
    [Test, Property("Priority", "Critical"), Property("Type", "Fully automatic")]
public void AdditionTest()
      { /* ... */ }

    [Test, Property("Priority", "High"), Property("Type", "Partly automatic")]
public void MultiplicationTest()
      { /* ... */ }
  }
} 
```

我只想运行具有“优先级”=“关键”和“类型”=“全自动”的测试。

是否可以使用 NUnit 实现这样的选择？我知道可以选择属于特定“类别”的测试来执行，但这只是一个标准......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T15:49:21.930

根据[Nunit 控制台手册](http://www.nunit.org/index.php?p=consoleCommandLine&r=2.2.4)：

> 以下命令仅运行 BaseLine 类别中的测试：
> 
> nunit-console myassembly.dll /include:Database
> 
> **可以在任一选项上指定多个类别，方法是使用逗号分隔它们**。

所以我希望`nunit-console myassembly.dll /include:Priority,Critical`能做你想做的事情（我还没有测试过）。

# javascript - Internet Explorer 8 上的 jQuery + Fancybox 触发错误

> ID：10140344
> 
> 赞同：3
> 
> 时间：2012-04-13T11:55:33.933
> 
> 标签：javascript, jquery, fancybox

我的页面上有这个 jQuery 代码，它在 Chrome 中运行良好，但在 Internet Explorer 8 的 trigger('click') 行中出现错误

```
$('#btnd16').click(function(e){
    var iiid = $('#midet').val();
    $('#d16_midethistorial_id').val(iiid);

    //sumamos por ajax
    var $mivalor = $('#d16_midethistorial_id').val() 
    var $url = $('input#miruta').val(); 

    $.post($url, { midethistorial_id: $mivalor }, 
        function(data) { 
                $("#nirefancy").fancybox({
                'width'         : '90%',
                'height'    : '90%',
                'transitionIn'  : 'elastic',
                'transitionOut' : 'elastic',
                'type'      :'inline',
                'autoDimensions': false,
                'autoScale' : false,
                        'scrolling' : 'no',
                'titleShow' : true,
            }).trigger('click');
    });

    return false
}); 
```

这是我的fancybox html：

```
<a href="{{ path('detformacion_play',{'id': detentrenamiento.detformacion.id }) }}"  id="nirefancy" style="display: none;">.</a> 
```

我单击了一个按钮，然后通过 ajax 在数据库中插入了一些数据，之后我想打开一个花式框。就像我说的，它适用于 Chrome，但不适用于 IE8

任何帮助或线索？提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T12:00:16.037

在我的脑海中，有两个可能性：

1) `'titleShow' : true,`<-- 对象末尾的额外逗号 IE 解释为撒旦

2）将您的事件处理程序包含在文档就绪块中：

```
$(document).ready(function () {
    $('#btnd16').click(function (e) {
    ...
}); 
```

# java - 将对象数组转换为 JPA 实体数组？

> ID：10140348
> 
> 赞同：0
> 
> 时间：2012-04-13T11:55:51.443
> 
> 标签：java, jpa

每次我尝试从我从 jpa 调用中拉回的实体列表中获取一组实体时，我都会遇到一个强制转换异常。例子...

```
QuickLaunch[] qLaunchArr = null;
List<QuickLaunch> listQL = null;
try
{
    System.out.println("testing 1..2..3");

    //qLaunchArr
    listQL = emf.createNamedQuery("getQuickLaunch").getResultList();
    Object[] objArr = listQL.toArray();
    //System.out.println(listQL.size());
    qLaunchArr = (QuickLaunch[]) listQL.toArray();       
}
catch (Exception e)
{
    System.out.println("Bull Hockey!!!! I can't believe it's not butter!: "+e.toString());
}

[Ljava.lang.Object; incompatible with [Lcom.upmc.esdm.messaging.entities.QuickLaunch; 
```

那是在我的服务器日志中......（我正在使用 WID）而且我也得到了这个异常......

```
commonj.connector.runtime.DataHandlerException: CWLAP0507E: The response bean class for java class  method GetAllQuickLaunchComponents cannot be created. Reason java.lang.IllegalArgumentException: argument type mismatch. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T13:33:10.547

好吧...我想我找到了答案。受这篇文章的启发...

> [https://stackoverflow.com/a/8060077/729820](https://stackoverflow.com/a/8060077/729820)

我基本上是这样做的

```
try
    {
        System.out.println("testing 1..2..3");
        listQL = emf.createNamedQuery("getQuickLaunch").getResultList();
        System.out.println("What is the size of this list: number "+listQL.size());
        qLaunchArr = listQL.toArray(new QuickLaunch[listQL.size()]);         
    } 
```

所有的例外似乎都清楚了。谢谢你们的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T13:34:58.440

这与 JPA 无关，而是与 Java 有关，因为它不会将 Object[] 转换为 QuickLaunch[]。不能使用 Object 数组代替 QuickLaunch[] 数组吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T12:48:06.760

您可以尝试`TypedQuery`在没有显式转换和防止异常的情况下获取实体列表。

```
TypedQuery<QuickLaunch> listQL = em.createNamedQuery("QuickLaunch.getQuickLaunch", QuickLaunch.class);

List<QuickLaunch> products = listQL .getResultList(); 
```

此外，更改了查询名称，以更有意义的方式识别其类或结果类型。

# repository - 存储库和数据库特定的业务逻辑

> ID：10140350
> 
> 赞同：1
> 
> 时间：2012-04-13T11:56:01.800
> 
> 标签：repository, domain-driven-design

出于性能原因，我需要将一些复杂的业务逻辑放入数据库中，并且我正在使用存储库模式。问题是——我应该从存储库中调用这个业务逻辑吗？我知道存储库不应该知道 BL，因为它只是 BL 和数据存储之间的中介（它应该只包含 CRUD 和查询方法）。你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:37:17.953

Repository 的职责是提供类似内存中的实体集合以供查询或添加。我不知道您在谈论什么样的业务逻辑，但是如果您将其引入存储库中，它很可能会破坏单一责任原则。这将意味着给存储库代码提供许多更改的理由，减少内聚力，从而提供许多中断的理由。

如果您的数据库中有带有业务逻辑的存储过程，我建议您在调用代码和数据库之间引入某种接口，以保持事情解耦。它不会是存储库，因为它的目的是触发一些业务逻辑而不是持久化数据，但实现可以采用基础设施服务的形式。

这将允许您使用模拟数据库单独测试您的代码，并切换到数据库访问接口的另一个实现以指向另一个 DBMS，或者如果您决定在某个时候放弃存储过程，甚至只是指向对象。

# cakephp - Cakephp Countercache - 逻辑问题

> ID：10140360
> 
> 赞同：2
> 
> 时间：2012-04-13T11:57:05.820
> 
> 标签：cakephp, cakephp-1.3, cakephp-2.1

我使用的是 Cakephp 2.0 我的模型关系如下：

> **用户有很多帖子**
> 
> **帖子有很多评论**
> 
> **帖子有很多赞**
> 
> **评论有很多赞**

在 Post 表中我添加了一个列“like_count”并启用了 countercache 在评论表中我添加了一个列“like_count”并启用了 countercache

喜欢表包含：

id,post_id,comment_idu,user_id

和型号如下：

```
public $belongsTo = array(
    'Post' => array(
        'className' => 'Post',
        'foreignKey' => 'post_id',
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'counterCache' => true
    ),
    'Comment' => array(
        'className' => 'Comment',
        'foreignKey' => 'comment_id',
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'counterCache' => true
    )) 
```

它的工作正常..

> 但现在我需要为每个用户做总点赞数（帖子点赞数+评论点赞数）。所以我计划在用户表中添加一个字段并启用计数器缓存但完全震惊..我需要在用户表中添加的列名是什么以及我需要在哪里放置 Countercache => true。我不知道如何走得更远..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:04:51.413

将以下内容添加到您的 $belongsTo 数组中。

```
 'User' => array(
        'className' => 'User',
        'foreignKey' => 'user_id',
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'counterCache' => true
    ), 
```

您将`like_count`在表格中添加一列`users`。

* * *

当然，在您的项目中，`UserModel`您需要为喜欢添加 HasMany。

# naming-conventions - 类克隆方法的方法名称建议

> ID：10140363
> 
> 赞同：0
> 
> 时间：2012-04-13T11:57:26.307
> 
> 标签：naming-conventions

我的开源工具包中的对象都是基于类 AbstractObject 的。我想在 AbstractObject 中添加一个函数，它将创建并返回完全相同的类的对象。

这与克隆不同，因为不会复制属性值。我考虑过调用它，`duplicate`但在使用 ActiveRecord 类时会感到困惑（因为副本将用于复制记录，而不是对象）。

```
form2 = form1->createObjectWithSameClass() 
```

请为此建议一个单字（最好）名称。我很感激你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:17:26.043

根据此处的信息，这听起来像是您想要另一个与范围内的变量相同**类型的普通对象，并且该****类型**是创建对象时唯一需要的上下文。

在这种情况下，这听起来像是[工厂](http://en.wikipedia.org/wiki/Factory_method_pattern)的有效案例，而不是挂在实例上的方法。你可以这样做，也许：

`myFactory.create(form1)`

或者

```
myFactory.create(form1.getClass()) 
```

编辑：这不是您问题的直接答案，而是因为您关心命名，因此我假设代码清晰，模式的一大好处是清晰（每个人都知道工厂是什么，所以他们赢了不要被你最终选择的任何名字所迷惑）。

# php - 用于查询限制的 php 解决方法 Google Maps Directions v3

> ID：10140371
> 
> 赞同：0
> 
> 时间：2012-04-13T11:57:57.720
> 
> 标签：php, google-maps-api-3

文档说航点限制为 8 个点。但我必须计算一个超过 8 个航点的路线。怎么做？

我发现我可以用不同的航点做多个请求，直到我知道所有的方向。

现在我的问题是：如何知道哪个航点属于哪个请求？否则，得到指示的司机将绕圈行驶:)

任何人都可以帮助我或指出正确的方向吗？提前致谢！

编辑：我看到了关于这个问题的[另](https://stackoverflow.com/questions/4418875/google-maps-api-directions-api-waypoints-limitation)一篇文章，但那个已经回答了。它并没有真正帮助我，因为我已经想出了那个答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:04:18.970

您提出的系统存在两个问题：

1.  如果您的网站成功，由于来自同一 IP 地址的请求过多，您将停止从路线服务获得答案
2.  Google 提供的合同允许超过 8 个航点 - 因此您将面临 Google 的潜在问题！

话虽如此，据我了解，您有一个构成您全球行程的目的地列表。另外我觉得这个行程不是一天/行程就可以完成的。

为什么不简单地请求每个步骤的指示并存储结果？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:38:16.680

您可能需要查看以下内容：

[http://lemonharpy.wordpress.com/2011/12/15/working-around-8-waypoint-limit-in-google-maps-directions-api/](http://lemonharpy.wordpress.com/2011/12/15/working-around-8-waypoint-limit-in-google-maps-directions-api/)

# php - 关于 PHPBB2 中的链接的安全问题

> ID：10140375
> 
> 赞同：0
> 
> 时间：2012-04-13T11:58:14.443
> 
> 标签：php, security, phpbb

我最近在 phpbb2 的 bbcode.php 上编辑了一些正则表达式，我想知道它是否会带来安全问题（主要是从 href 注入脚本（如果可能的话））。

我只编辑了 [url]、[url=] 和我新创建的 [url=""] bbcode 标签。

他们的原始正则表达式（日期为 2008 年）不允许在 url 值中使用“无效”字符，例如括号或空格（某些 Wikipedia 页面和文件托管服务的 URL 需要这些字符），因此而不是编码 URL 的特殊其他人建议的字符，我只是编辑了正则表达式以允许协议中的字母数字字符，并且基本上是域/url地址的其余部分中的任何字符。

phpbb2 的 bbencode_second_pass 函数中的新正则表达式（$text = post's text）：

```
// matches a [url]xxxx://www.phpbb.com[/url] code..
$patterns[] = "#\[url\]([\w]+?://.*?)\[/url\]#is";
$replacements[] = $bbcode_tpl['url1'];

// [url]www.phpbb.com[/url] code.. (no xxxx:// prefix).
$patterns[] = "#\[url\]((www|ftp)\..*?)\[/url\]#is";
$replacements[] = $bbcode_tpl['url2'];

// [url=xxxx://www.phpbb.com]phpBB[/url] code..
$patterns[] = "#\[url=([\w]+?://.*?)\]([^?\n\r\t].*?)\[/url\]#is";
$replacements[] = $bbcode_tpl['url3'];

// [url=www.phpbb.com]phpBB[/url] code.. (no xxxx:// prefix).
$patterns[] = "#\[url=((www|ftp)\..*?)\]([^?\n\r\t].*?)\[/url\]#is";
$replacements[] = $bbcode_tpl['url4'];

// [url="xxxx://www.phpbb.com"]phpBB[/url] code..
$patterns[] = "#\[url=&quot;([\w]+?://.*?)&quot;\]([^?\n\r\t].*?)\[/url\]#is"; //closes on first "]
//$patterns[] = "#\[url=&quot;([\w]+?://.*?)&quot;\](?![\w\n\s]*&quot;\])([^?\n\r\t].*?)\[/url\]#is"; //closes on last "] //discarded, ambigous
$replacements[] = $bbcode_tpl['url3'];

// [url="www.phpbb.com"]phpBB[/url] code.. (no xxxx:// prefix).
$patterns[] = "#\[url=&quot;((www|ftp)\..*?)&quot;\]([^?\n\r\t].*?)\[/url\]#is";
$replacements[] = $bbcode_tpl['url4'];

// [email]user@domain.tld[/email] code..
$patterns[] = "#\[email\]([a-z0-9&\-_.]+?@[\w\-]+\.([\w\-\.]+\.)?[\w]+)\[/email\]#si";
$replacements[] = $bbcode_tpl['email'];

$text = preg_replace($patterns, $replacements, $text);

// Remove our padding from the string..
$text = substr($text, 1);

return $text; 
```

和未经编辑的 phpbb2 声明：

```
$bbcode_tpl['url1'] = str_replace('{URL}', '\\1', $bbcode_tpl['url']);
$bbcode_tpl['url1'] = str_replace('{DESCRIPTION}', '\\1', $bbcode_tpl['url1']);

$bbcode_tpl['url2'] = str_replace('{URL}', 'http://\\1', $bbcode_tpl['url']);
$bbcode_tpl['url2'] = str_replace('{DESCRIPTION}', '\\1', $bbcode_tpl['url2']);

$bbcode_tpl['url3'] = str_replace('{URL}', '\\1', $bbcode_tpl['url']);
$bbcode_tpl['url3'] = str_replace('{DESCRIPTION}', '\\2', $bbcode_tpl['url3']);

$bbcode_tpl['url4'] = str_replace('{URL}', 'http://\\1', $bbcode_tpl['url']);
$bbcode_tpl['url4'] = str_replace('{DESCRIPTION}', '\\3', $bbcode_tpl['url4']); 
```

到目前为止，这在我的调试中工作得很好，现在我想问一下，通过允许将任何字符放置在 A 标签的 href 属性中，我是否会让我的用户或我自己受到任何黑客攻击？

说，我测试了 javascript URI hack (javascript:)，即使在 Internet Explorer 上它似乎也不起作用，而且我不知道通过 A 标签的 href 属性注入脚本的任何方式，会有允许我的用户在标签的href 中键入他们喜欢的任何内容（只要有一个有效的字母数字协议，例如*:// 或www. 将在其前面放置一个http://）有什么风险吗？

请注意，我不考虑链接到恶意网站，我想知道黑客是否能够通过标签的 href 注入脚本/cookies/任何内容，而无需用户单击它！

现在，让 href 属性在不点击其标签的情况下运行任何东西听起来有点多余，但无论如何，黑客有没有办法通过 href 属性在文档中注入恶意代码/javascript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:53:51.160

我自己没有测试过，但以下方法可能仍然有效：

```
[url]javascript://%0Aalert(1)[/url]
[url=javascript://%0Aalert(1)]…[/url]
[url="javascript://%0Aalert(1)"]…[/url] 
```

这些都应该导致以下 JavaScript 代码`%0A`被解码为换行符：

```
//
alert(1) 
```

* * *

下一个猜测：当您允许任何字符时，包括属性值 delimiting `"`，这些可能会起作用：

```
[url]http://example.com/" onclick="alert(1)[/url]
[url=http://example.com/" onclick="alert(1)]…[/url] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:40:35.890

查看 phpbb3.1 的正则表达式模式，它也接受 URL 中的任何字符（链接被转换为 html，如下例所示）并且它不接受 javascript:// 协议，因此现在相当安全。我现在将更多地关注 phpbb3 安全问题，以供升级板软件时使用。

# objective-c - NSPredicate 中的多个条件

> ID：10140376
> 
> 赞同：13
> 
> 时间：2012-04-13T11:58:14.587
> 
> 标签：objective-c, ios, cocoa-touch, ipad, nspredicate

如何使用多个条件`NSPredicate`？

我正在使用它，但在返回的数组中没有得到任何东西。

```
NSPredicate *placePredicate = [NSPredicate predicateWithFormat:@"place CONTAINS[cd] %@ AND category CONTAINS[cd] %@ AND ((dates >= %@) AND (dates <= %@)) AND ((amount >= %f) AND (amount <= %f))",placeTextField.text,selectedCategory,selectedFromDate,selectedToDate,[amountFromTextField.text floatValue],[amountToTextField.text floatValue]];

NSArray *placePredicateArray = [dataArray filteredArrayUsingPredicate:placePredicate];

NSLog(@"placePredicateArray %@", placePredicateArray); 
```

金额和类别有时可能为空。我应该如何构建`NSPredicate`？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-13T12:30:14.353

您可以`placesPredicate`使用其他`NSPredicate`对象和`NSCompoundPredicate`类来构建您的

就像是 ：

```
NSPredicate *p1 = [NSPredicate predicateWithFormat:@"place CONTAINS[cd] %@", placeTextField.text];
NSPredicate *p2 = [NSPredicate predicateWithFormat:@"category CONTAINS[cd] %@", selectedCategory];
NSPredicate *p3 = [NSPredicate predicateWithFormat:@"(dates >= %@) AND (dates <= %@)", selectedFromDate,selectedToDate];
NSPredicate *p4 = [NSPredicate predicateWithFormat:@"(amount >= %f) AND (amount <= %f)", [amountFromTextField.text floatValue],[amountToTextField.text floatValue]]; 

NSPredicate *placesPredicate = [NSCompoundPredicate andPredicateWithSubpredicates:@[p1, p2, p3, p4]]; 
```

现在，如果您缺少类别，例如，您可以使用虚拟`YES`谓词来替换它：

```
NSPredicate *p2;
if (selectedCategory) {
    p2 = [NSPredicate predicateWithFormat:@"category CONTAINS[cd] %@", selectedCategory];
} else {
    p2 = [NSPredicate predicateWithBool:YES]
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-13T12:35:08.487

我倾向于零碎地处理这件事。那是，

```
placePredicate = [NSPredicate predicateWithFormat:@"place CONTAINS[cd] %@",placeTextField.text];
NSMutableArray *compoundPredicateArray = [ NSMutableArray arrayWithObject: placePredicate ]; 

if( selectedCategory != nil ) // or however you need to test for an empty category
    {
    categoryPredicate = [NSPredicate predicateWithFormat:@"category CONTAINS[cd] %@",selectedCategory];
    [ compoundPredicateArray addObject: categoryPredicate ];
    }

// and similarly for the other elements. 
```

请注意，当我知道没有谓词时，我什至不费心将类别（或其他任何东西）的谓词放入数组中。

```
// Then
    NSPredicate *predicate = [NSCompoundPredicate andPredicateWithSubpredicates:
                                  compoundPredicateArray ]; 
```

如果我打算做很多，我不会使用格式方法，而是围绕构建块，只是改变使用之间的任何变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-11T11:14:39.560

```
Suppose a class Person with attributes "name", "age", "income"

"personArray" is array of class Person

NSPredicate *mypredicate = [NSPredicate predicateWithBlock:^BOOL(personObj Person, NSDictionary *bindings) {
     NSNumber *age = personObj.age;
     String *name = personObj.name;
     NSNumber *income = personObj.income
     BOOL result = (age > 20 && name == "Stack" && income >40000);
     return result;
}];

NSArray *filteredArray = [personArray filteredArrayUsingPredicate: mypredicate]; 
```

进一步你可以阅读这篇文章[Array Filter Using Blocks](http://albertmata.com/blog/2014/03/25/objective-c-array-filter-using-blocks/)

> 在斯威夫特

```
let filterArray = personArray.filter
            { person in
           let age = personObj.age;
           let name = personObj.name;
           let income = personObj.income
           BOOL result = (age > 20 && name == "Stack" && income >40000);
          return result;
        } 
```

# java - 开普勒内存使用

> ID：10140378
> 
> 赞同：0
> 
> 时间：2012-04-13T11:58:25.630
> 
> 标签：java

我正在使用 Kepler 2.3，当我试图在集群机器上启动它时，我的 Kepler 似乎被杀死了。分配给开普勒的默认堆空间是 512m。有什么方法可以增加堆大小。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T06:34:15.840

您需要增加分配给 Kepler 的最小内存，默认为 5m。打开 KeplerData/kepler.modules/build-area/settings/memory.xml 中的 memory.xml 文件并编辑 5m 行（5m 到更大的值，比如 50m）并确保您的机器中有足够的 RAM 可用。保存文件并再次启动 Kepler。在启动期间，您可以看到标准输出消息中的变化： Kepler.run going to run.setMain(org.kepler.Kepler) JVM Memory = 50m 512m

希望它能解决你的问题。

# json - 使用 Spring MVC 自定义验证消息中的字段名称

> ID：10140380
> 
> 赞同：3
> 
> 时间：2012-04-13T11:58:32.697
> 
> 标签：json, validation, binding, spring-mvc, customization

我使用 Spring MVC 3.1 处理 REST 服务。一些对象字段的名称是自定义的。我也使用 JSR-303 验证。例如，

```
@Valid
@JsonProperty("env_vars")
private List<EnvironmentVariable> env; 
```

效果很好，但这里有一个问题：错误消息包含 Java 字段的名称。我的意思是，如果用户在字段 *env_vars* 中生成无效值，他会收到一条错误消息，指出*env*字段包含错误并且可能会造成混淆。

有没有办法在不为每个字段提供完整消息的情况下保持名称自定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T05:58:00.807

不确定“不为每个字段提供完整消息”是什么意思...

您需要在某处指定自定义字段名称，因此它也可以使用 JSR303 的 i18n 机制 - ValidationMessages.properties（请参阅[https://stackoverflow.com/a/5781678/249327](https://stackoverflow.com/a/5781678/249327)）。

# rubymine - 是否可以将 RubyMine 配置为在意图中使用双引号？

> ID：10140381
> 
> 赞同：0
> 
> 时间：2012-04-13T11:58:34.617
> 
> 标签：rubymine

当我打算在 RubyMine 中将符号转换为字符串时，它使用单引号。是否可以将 RubyMine 配置为使用双引号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:54:34.747

目前不可能，[请为相关问题投票](http://youtrack.jetbrains.com/issue/RUBY-8101)或[提交新](http://youtrack.jetbrains.net/issues/RUBY)问题。

# java - 读取与类相同的目录中的文件？

> ID：10140382
> 
> 赞同：0
> 
> 时间：2012-04-13T11:58:36.667
> 
> 标签：java, file-io

```
reader = new CSVReader(new FileReader("file.txt")); 
```

该文件与 java 类放在同一目录中。无论如何我得到 FileNotFoundException。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:00:24.663

文件需要在项目的根文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:01:32.930

您的应用程序不在该目录中运行。您要么必须使用绝对（或类路径相对）路径，要么将文件移动到应用程序运行的目录。例如，在 Eclipse 中，这将是项目的根文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:04:32.103

相对路径是相对于当前工作目录的。在您的代码示例中，如果`file.txt`不在您的当前目录中，则不会找到它。

小心在代码中使用相对路径。那是因为在编译时不可能知道当你的代码运行时当前的工作目录是什么。

如果该文件是您部署的一部分，请将其存储在类路径中并通过 访问它`ClassLoader.getResourceAsStream()`，如果它是用户可以更改的真正外部数据，请将文件名放在某种配置中。

# c++ - 一起处理异常的共同部分

> ID：10140383
> 
> 赞同：5
> 
> 时间：2012-04-13T11:58:38.017
> 
> 标签：c++, exception-handling

我目前有一些我正在尝试重构的代码。一大组异常有一些用于所有异常的通用代码以及一些需要针对每种特定异常类型单独处理的特定代码。我试图弄清楚如何摆脱每个`catch`块中的共同部分。一个想法是这样做：

```
try {
  /* Stuff that may fail */
} catch( const std::exception & ) {
  /* do common part here */
  try { throw; } 
  catch( const exception1 & ) {
    /* do stuff for exception1 here */
  }
  catch( const exception2 & ) {
    /* do stuff for exception2 here */
  }
} 
```

然而，这让我觉得有些难看。

有没有更好的方法来分解这种常见的逻辑，或者实际上有理由完全避免这种尝试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T12:04:04.193

> 一大堆异常有一些共同的代码

将公共代码移动到函数或方法中。从 each 调用方法`catch`。就像消除任何其他重复一样；`try`..的存在`catch`没有区别。

但如果你*真的*关心“一大组异常”，那么真正的问题可能是你有一大组异常。为什么不同的异常需要不同的处理？异常真的只用于*异常*事件吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T12:15:22.347

通常，`try`/`catch`应该只在代码中稀疏出现。问题是很多时候在一个`catch`子句中完成的动作也应该在提前返回的情况下完成，例如。

惯用 C++ 广泛使用 RAII 来避免需要在`catch`子句中进行清理的情况，这通常会删除大部分工作。

现在，您的模式*本身*并没有那么糟糕，它确实考虑了常见的东西。但是这种常见的东西也许可以自动处理。

在我偶然发现的所有代码库中，我只有几次看到真正使用的`catch`子句，不要将其用作离合器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:14:59.027

我真的只是将公共代码移动到一个函数中。

这是另一个想法：

```
try {
  /* Stuff that may fail */
} catch( const std::exception & e) {
  /* do common part here */  
  if (const exception1 * e1 = dynamic_cast<const exception1*>(&e) {
    /* do stuff for exception1 here */
  } else if (const exception2 * e2 = dynamic_cast<const exception2*>(&e) {
    /* do stuff for exception2 here */
  } else
    throw;
} 
```

# database - 如果我没有任何文档，我无法在 ravendb 中创建集合

> ID：10140384
> 
> 赞同：1
> 
> 时间：2012-04-13T11:58:39.427
> 
> 标签：database, c#-4.0, collections, nosql, ravendb

我在 ravendb 中创建了一个文档。使用 session.advanced.getmetadata（见代码），我在元数据中为 Raven-Entity-Name 命名，之后我在同一个函数中删除了该文档。然后我看到集合也被删除了。如果我手动删除文档raven studio 然后集合保留在数据库中。即使代码部分没有文档，集合如何持续存在？提前致谢 ！！

我的 C# 代码是：

```
public CreateCollectionResult CreateCollection(string databaseName, string collectionName)
    {
        CreateCollectionResult createCollectionResult = new CreateCollectionResult();

        Collection collection1234 = new Collection();
        try
        {
            using (var session = documentStore.OpenSession(databaseName))
            {
                Guid guid = new Guid("12345678-1111-1111-2222-000000000000");
                session.Store(collection1234, guid, "april-Days/10");
                session.Advanced.GetMetadataFor<Collection>(collection1234)[Constants.RavenEntityName] = collectionName;
                //session.Delete<Collection>(collection1234);
                session.SaveChanges();
                createCollectionResult.IsOperationSuccessfull = true;
            }
        }
        //exception if database not found
        catch (InvalidOperationException ex)
        {
            createCollectionResult.IsOperationSuccessfull = false;
            createCollectionResult.Error = ex;
        }
        return createCollectionResult;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T14:58:09.470

在 RavenDB 中，集合是虚拟的，只要您在该文档中至少有一个文档，它们就在那里。

# java - Java：部署后在资源中保存文件时出错

> ID：10140385
> 
> 赞同：0
> 
> 时间：2012-04-13T11:58:41.013
> 
> 标签：java, deployment, resources

我的程序具有从资源读取/写入文件的功能。这个功能我已经顺利测试过了。例如，我将某些内容写入文件，重新启动并再次加载，我可以再次读取该数据。

但是在我导出到 jar 文件后，我在写入文件时遇到了问题。这是我编写文件的代码：

```
URL resourceUrl = getClass().getResource("/resource/data.sav");
File file = new File(resourceUrl.toURI());
FileOutputStream output = new FileOutputStream(file);
ObjectOutputStream writer = new ObjectOutputStream( output); 
```

当此代码运行时，我注意到命令提示符中有错误： ![我的错误](../Images/195414c310e13dd985a9c3becaf8baea.png) 所以，我的数据无法保存。（我知道是因为在我重新启动应用程序后，没有任何改变！！！）

请帮我解决这个问题。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:01:31.623

您根本无法以这种方式将文件写入 jar 文件。您从中获取的URI`getResource()`不是 `file:///`URI，它不能传递给`java.io.File's`构造函数。编写 zip 文件的唯一方法是使用`java.util.zip`为此目的设计的类，这些类旨在让您编写整个 jar 文件，而不是将数据流式传输到其中的单个文件。在实际安装中，无论如何，用户甚至可能没有写入 jar 文件的权限。

您将需要将数据保存到文件系统上的真实文件中，或者如果文件足够小，则可能使用首选项 API。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-13T12:05:07.563

您需要将文件作为输入流读取/写入才能从 jar 文件中读取。

```
public static String getValue(String key)
    {
        String _value = null;
        try 
        {
            InputStream loadedFile = ConfigReader.class.getClassLoader().getResourceAsStream(configFileName);
            if(loadedFile == null) throw new Exception("Error: Could not load the file as a stream!");
            props.load(loadedFile);
        }
        catch(Exception ex){
            try {
                System.out.println(ex.getMessage());
                props.load(new FileInputStream(configFileName));
            } catch (FileNotFoundException e) {
                ExceptionWriter.LogException(e);
            } catch (IOException e) {
                ExceptionWriter.LogException(e);
            }
        }
        _value =  props.getProperty(key);
        if(_value == null || _value.equals("")) System.out.println("Null value supplied for key: "+key);
        return _value;
    } 
```

# algorithm - AA 树在插入顺序上是否稳定？

> ID：10140391
> 
> 赞同：2
> 
> 时间：2012-04-13T11:59:10.543
> 
> 标签：algorithm, data-structures, binary-tree

[AA 树](http://en.wikipedia.org/wiki/AA_tree)的结构（顺序）是否取决于插入其元素的顺序？

对于上述问题的答案，树只包含唯一元素还是包含重复元素是否重要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T15:09:27.983

考虑设置`{1, 2}`。

如果你插入 1，然后插入 2，你会得到

```
1
 \
  2 
```

如果你插入 2，然后插入 1，你会得到

```
 2
 /
1 
```

因此，AA-tree 的结构取决于其元素的插入顺序。

# adsense - adsense 广告未显示在网站上

> ID：10140393
> 
> 赞同：2
> 
> 时间：2012-04-13T11:59:12.760
> 
> 标签：adsense

嗯……不知道为什么，但是 Adsense 广告没有出现在这个网站 ( [http://dapperhawk.com](http://dapperhawk.com) ) 上。据我所知，该代码与 adsense 网站上提供的代码完全相同：

```
 <script type="text/javascript"><!--
        google_ad_client = "ca-pub-1773904113940189";
        /* bottom_results */
        google_ad_slot = "0900749086";
        google_ad_width = 468;
        google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script> 
```

关于如何解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T18:59:17.783

只是为了跟进这件事......我向谷歌支持发送了一封电子邮件，并得到了基本上说“它看起来现在正在工作”的回复。我没有改变任何东西：-/

# matlab - matlab中的最大滤波器？

> ID：10140395
> 
> 赞同：1
> 
> 时间：2012-04-13T11:59:20.573
> 
> 标签：matlab, signal-processing

我喜欢用matlab求一个音频信号的包络，也就是图中的红色信号。我已经实现了一个最大过滤器，但实现速度非常慢。matlab 是否有内置的 max-filter 或其他一些可以计算包络的函数？（我找到了一个中值过滤器，但没有找到最大过滤器）

![应用于音频信号的最大滤波器](../Images/5f8ded3aeb47cbc9b328db6583cc52c5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T12:05:47.123

没有内置的最大过滤器，但在[MATLAB File Exchange](http://www.mathworks.com/matlabcentral/fileexchange/)上有用户生成的函数。例如：

[http://www.mathworks.com/matlabcentral/fileexchange/24902-envelope](http://www.mathworks.com/matlabcentral/fileexchange/24902-envelope)

# iphone - Core Data 和 iCloud 添加预填充的 sqlite 文件

> ID：10140400
> 
> 赞同：1
> 
> 时间：2012-04-13T11:59:41.683
> 
> 标签：iphone, ios, ipad, core-data, icloud

我正在开发一个使用 Core Data 和 iCloud 在多个 iPad 之间同步数据的应用程序。这一切都很好，我可以将数据添加到每个 iPad，它会在它们之间同步。

我有一个预先填充了国家列表的 Core Data sqlite 文件，我想在应用程序首次运行时将其复制到文档区域。我已经完成了这项工作，但更改了我的 persistentStoreCoordinator 实现以测试是否支持 iCloud 以及其他一些小的更改。

但是现在，当我检查 sqlite 文件是否存在并复制预填充的 sqlite 文件时，如果不存在，我会收到以下错误

```
[psc addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:[NSURL fileURLWithPath:iCloudData] options:options error:&persistentStoreError]; 
```

> NSPersistentStoreCoordinator addPersistentStoreWithType:configuration:URL:options:error:: CoreData: Ubiquity: An error occurred while setting up the ubiquity integration: Error Domain=NSCocoaErrorDomain Code=134316 "The ubiquity container does not seem to match this persistent store, it is possible this是由切换到不同的 iCloud 帐户或完全退出 iCloud 引起的。应使用只读属性重新打开商店或从 iCloud 同步中永久删除。UserInfo=0x1cb590 {storeUUID=31381598-EAFA-4550-9B96-F501800974D5, containerUUID=E3A8DC7D-41FD-405A-8D8A-C06C8B467CA2, NSLocalizedDescription=ubiquity 容器似乎与此持久存储不匹配，这可能是由切换引起的到不同的 iCloud 帐户，或完全退出 iCloud。

这是因为 iCloud 中仍然有对不同 Core Data sqlite 文件或事务日志文件的引用吗？如果是这样，我将如何删除它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T12:10:47.617

您不应该将预先创建的 Core Data 存储复制到 ubiquity 容器。旧的方法是在模拟器/设备/计算机上创建一个 SQLite 文件，并在第一次运行时将其复制到它的位置。如果您使用 iCloud，就不能再这样做了。iCloud 的工作原理是每台设备接收一个作为“事务日志”的更改列表，然后将其应用于它自己的 SQLite 存储。它需要知道发生了什么变化，而一次性获取一个 .sqlite 文件不会告诉它这一点。

执行此操作的 iCloud 方法是：

*   从代码内部创建初始数据（例如`insertStartData:`方法）。您可以从 plist 或您喜欢的任何内容中添加它。您必须首先检查数据是否已经存在。
*   使用`NSPersistentStoreCoordinator`'s`migratePersistentStore:toURL:options:withType:error`复制您的初始商店。

[这是文档：](https://developer.apple.com/library/ios/#releasenotes/DataManagement/RN-iCloudCoreData/_index.html)

> 您不应该使用预打包的数据库文件作为初始内容的种子。相反，您应该在代码中创建默认项，或者使用 NSPersistentStoreCoordinator 的 migratePersistentStore:toURL:options:withType:error: 方法将预打包的数据库迁移到所需的位置。

# javascript - 如何在jQuery中做一个速记if-then？这些是可链接的吗？

> ID：10140403
> 
> 赞同：2
> 
> 时间：2012-04-13T11:59:58.103
> 
> 标签：javascript, jquery, chaining

其实有两个问题：

我喜欢[jQuery中的简写](http://en.wikipedia.org/wiki/JQuery)*IF-ELSE*，如下所示：

```
var some == true ? "it's true" : "it's false"; 
```

是否有相应的*IF-THEN*，因为：

```
 var some == true ? "it's true" 
```

似乎不起作用。

另外，这样的东西可以在常规 jQuery 中链接吗？像这样：

```
 some.addClass("hello")
      .find(".other").css("width","100px").end()
      // chained if
      .hasClass("one") ? some.css("border","1px solid red")
      .removeClass("hello") 
```

现在那会很好，不是吗？这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T12:02:01.560

那会做（赋值使用一个=，两个用于条件），但如果第一个是真的，就像你发布的那样，有些总是真的。

```
var some = true || "it's true"; 
```

不，您的示例不可链接，但您可以替换您的 hasClass ，`filter('.one')`如果存在包含第一个类的元素，它将继续链接：

```
some.addClass("hello")
      .find(".other").css("width","100px").end()
      .filter('.one').css("border","1px solid red")
      .removeClass("hello") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T12:18:22.017

您所引用的简写 IF/ELSE 称为三元运算符，它不能像 IF/ELSE 语句那样链接，也不能作为 jQuery 方法链接，并且它的使用有一些限制，你可以但是将一个放在另一个里面，如下所示：

```
some == true ? someMore == true ? "it's true" : "it's false" : "it's false"; 
```

你也可以这样做：

```
some == true ? "it's true" : null;
//or
some == true ? "it's true" : undefined; 
```

这会返回一些东西，所以通常它是这样使用的：

```
var some = someVar==true ? "it's true" : "it's false"; 
```

换句话说，你可以这样做：

```
var some = $(some).length ? 
             $(some).is('.one') ?
               some //some exists and have the class .one
             :
               return someOtherVar or function //some does not have the class .one
           :
             undefined //some does not have a length
           ; 
```

你也可以做类似的事情，并且有许多不同的方式来使用三元：

```
$(div)[somevar==true ? fadeIn : fadeOut](300); 
```

除此之外，当有很多东西来执行 if/else 通常更合适，并且如果进行大量 if/else/elseif 检查，则 switch/case 可能会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:39:59.720

有几个插件可以让你`if`在 jQuery 中链接逻辑 -

[http://outwestmedia.com/jquery-plugins/conditional/](http://outwestmedia.com/jquery-plugins/conditional/)

```
$('div')
    .If('hasClass', 'myClass')
        .css('color', 'red')
    .Else('hasClass', 'anotherClass')
        .css('color', 'green')
    .Else()
        .css('color', 'blue'); 
```

[http://benalman.com/projects/jquery-iff-plugin/](http://benalman.com/projects/jquery-iff-plugin/)

```
function my_test( x ) {
  return x === 'bar';
};

$('div')
  .append( '1' )
  .iff( my_test, 'foo' )
    .append( '2' )
    .end()
  .append( '3' ); 
```

# solr - django-haystack 不会索引我的数据

> ID：10140406
> 
> 赞同：2
> 
> 时间：2012-04-13T12:00:01.307
> 
> 标签：solr, indexing, django-haystack

我正在按照有关[haystack 文档的说明进行操作。](http://django-haystack.readthedocs.org/en/latest/tutorial.html#configuratio)

我没有得到 SearchQuerySet().all() 的结果。

我认为问题出在这里

```
$ ./manage.py rebuild_index

WARNING: This will irreparably remove EVERYTHING from your search index in connection 'default'.
Your choices after this are to restore from backups or rebuild via the `rebuild_index` command.
Are you sure you wish to continue? [y/N] y

Removing all documents from your index because you said so.
All documents removed.
Indexing 0 notes. // <-- here 0 notes! 
```

mysite/note/search_indexes.py 看起来像

```
import datetime
import haystack
from haystack import indexes
from note.models import Note

class NoteIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    author = indexes.CharField(model_attr='user')
    pub_date = indexes.DateTimeField(model_attr='pub_date')

    def get_model(self):
        return Note

    def index_queryset(self):
        """Used when the entire index for model is updated."""
        return self.get_model().objects.filter(pub_date__lte=datetime.datetime.now()) 
```

我有 mysite/note/templates/search/indexes/note/Note_text.txt

```
{{ object.title }}
{{ object.user.get_full_name }}
{{ object.body }} 
```

[调试 haystack 文档](http://django-haystack.readthedocs.org/en/latest/debugging.html)提到

> 你有运行 haystack.autodiscover 的 search_sites.py 吗？
> 
> 您是否在主 haystack.site（通常在您的 search_indexes.py 中）注册了您的模型？

但是在第一篇文章中没有提到 search_sites.py 、 haystack.autodiscover 、 haystack.site 。
我很混乱。他们的文档是否处理不同的 haystack 版本？

我的设置是..

干草堆版本 2.0.0.beta
django 1.3.1
solr 3.6.0
sqlite 3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:57:24.947

```
def index_queryset(self):
        """Used when the entire index for model is updated."""
        return self.get_model().objects.filter(pub_date__lte=datetime.datetime.now()) 
```

是罪魁祸首。

我不知道为什么，但是注释掉可以解决问题。
我想我系统中的“时间”有点混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-12T18:20:46.180

它应该是...

`def index_queryset(self, using=None):`

我不知道这是否会解决您的问题，但这是该方法的正确签名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-07T18:48:18.173

删除**def index_queryset(self)**是有意义的。它构建了一个常规的 Django ORM **QuerySet**，它决定将哪些对象放入全文索引。您的示例**index_queryset**将对象限制为仅**过去的时间戳**（**现在**之前）。

所以，你真的有一个**日期时间处理**问题。检查您的 SQL 数据库的**时区**以及它如何存储时间。

UTC 语言环境中的时间戳比纽约和美国大部分地区早约 5 小时。SQLite 通过在未来选择 UTC 时间给我带来了同样的问题。

# sql-server - 创建表的奇怪问题

> ID：10140409
> 
> 赞同：2
> 
> 时间：2012-04-13T12:00:22.747
> 
> 标签：sql-server, tsql, ssis

我正在开发一个 SSIS 包。我有一个包含名称列表的数组。这些名称将是表名。

为了创建这些表，我循环一个 SQL 任务编辑器执行一个接受参数（表名）的存储过程

存储过程的代码：

```
ALTER PROCEDURE [dbo].[TLP.CreaTable]
(
    @TableName  VARCHAR(255)
)
AS
BEGIN
    SET NOCOUNT ON

    DECLARE @SQL VARCHAR(4000)
    SET @SQL = 'IF NOT EXISTS ( SELECT  * 
                                FROM    sysobjects 
                                WHERE   id = OBJECT_ID(N''[dbo].' + @TableName + ''') 
                                AND     xtype in (N''U'')) 
                    CREATE TABLE [dbo].' + @TableName + '(
                        [Serial] [int] NOT NULL,
                        [Marc] [bit] NOT NULL,
                        [Sell] [bit] NOT NULL
) ON [PRIMARY]'

    EXEC (@SQL)
END 
```

当数组中的名称之一是数字时，问题就出现了。我必须说所有名称都使用 [] 进入存储过程。我在每次执行之前都创建了一个断点，当表名是一个数字时，它会在 SSIS 内部带来一个错误（为了让您更好地了解我已经从 SQL Server Management Studio 运行了存储过程，并且错误仍然存​​在，我使用了表名 [3001]，这实际上是导致问题的真实名称）。

```
EXEC dbo.[TLP.CreaTable] [3001] 
```

> 消息 170，级别 15，状态 1，第 5 行第 5 行：“.3001”附近的语法不正确。

如果我做类似的事情

```
EXEC dbo.[TLP.CreaTable] RANDOM_NAME 
```

它工作得很好

显然有一些'。在中间。但我只是无法在代码中找到它。

谢谢

**编辑**：

这是一个引用问题。它在 SQL Server Management Studio 中工作。但是当我在 SSIS 中尝试它时，错误仍然存​​在。尝试修改 C# 代码以添加 '[ ]' 而不仅仅是 [] 并且它没有工作。

SSIS内部的错误如下。

> 错误：创建表 030698 处的 0xC002F210，执行 SQL 任务：执行查询“EXEC dbo.[TLP.CreaTable]？” 失败并出现以下错误：“将结果提取到类型 (DBTYPE_I4) 的变量中时发生错误”。可能的失败原因：查询有问题，“ResultSet”属性设置不正确，参数设置不正确，或连接未正确建立。

有了断点，我观察了表名的变量，没问题 '[3001]'

SQL 任务编辑器中的调用是

```
EXEC dbo.[TLP.CreaTable] ? 
```

但不知何故`EXEC dbo.[TLP.CreaTable] '[3001]'`，SQL Server Management Studio 中的作品，但不在 SSIS 中。

任何想法？谢谢。

**编辑 2**

由于我对论坛很陌生，我应该在新的“问题”中问第二个问题吗？既然题目中发出的问题已经解决了。非常感谢。

**编辑 3**

固定的。CREATE TABLE SQL任务编辑器中的参数很长，将其更改为varchar并顺利进行。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T12:04:45.877

您可以尝试`@TableName`使用应该为您转义表名的 QuoteName 函数进行包装。将该行更改为：

```
CREATE TABLE [dbo].' + QuoteName(@TableName) + '( 
```

**编辑**：将表名括在方括号中也可能是一个想法，以防它是保留字：

```
CREATE TABLE [dbo].[' + QuoteName(@TableName) + '] ( 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T12:04:35.067

尝试使用`'`表名

```
EXEC dbo.[TLP.CreaTable] '[3001]' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T12:05:40.297

在周围添加括号

```
[' + @TableName + '] 
```

因此存储过程如下所示：

```
ALTER PROCEDURE [dbo].[TLP.CreaTable]
(
    @TableName  VARCHAR(255)
)
AS
BEGIN

    SET NOCOUNT ON

    DECLARE @SQL VARCHAR(4000)
    SET @SQL = 'IF NOT EXISTS ( SELECT  * 
                                FROM    sysobjects 
                                WHERE   id = OBJECT_ID(N''[dbo].' + @TableName + ''') 
                                AND     xtype in (N''U'')) 
                    CREATE TABLE [dbo].[' + @TableName + '](
                        [Serial] [int] NOT NULL,
                        [Marc] [bit] NOT NULL,
                        [Sell] [bit] NOT NULL
) ON [PRIMARY]'

    EXEC (@SQL)
END 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T12:06:25.580

您不能直接使用数字创建表名。尝试将表名放在引号中：即

```
EXEC [dbo].[TLP.CreaTable] ['100'] 
```

# mysql - 从数组中返回随机的mysql函数？

> ID：10140425
> 
> 赞同：0
> 
> 时间：2012-04-13T12:01:57.493
> 
> 标签：mysql, arrays, random

所以我想创建一个脚本，其中大约十个 mysql 函数给用户一个不同的项目，每当用户点击页面时，其中一个函数是随机执行的。这是我需要的一种 rpg 功能，根据用户的狩猎水平，他们会更成功，但并不总是能得到食物。因此，他们单击页面并从一组项目中随机返回一个，并通过 mysql_query 将该项目提供给他们。

我希望这是有道理的，如果没有，请告诉我......

到目前为止，我已经有了这些起点

```
$input = array("value 1", "value 2", "value 3", "value 4", "value 5");
 $rand_keys = array_rand($input, 1);
 echo $input[$rand_keys[0]] . "\n"; 
```

我不知道这是否会允许数组中的 mysql 查询。我也考虑过使用重定向的东西，但是我尝试过的那个一直重定向，这不是我想要的，并且可以篡改 url 以获得良好的结果......

无论如何，我希望这是有道理的，任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:22:28.847

我将通过一张包含项目及其价值的表格来应对这一挑战。其中一列是`prio_drop`. 如果您希望某个项目更频繁地被丢弃，它可能具有价值`2`，而其他项目具有价值`1`。值越高，机会越大。

然后我会做一个：

```
$arr_items = array(1, 2, 3, 5); /* This event can drop items with these ids */
$str_items = implode(', ', $arr_items);

mysql_query("
SELECT id, name
FROM items
WHERE id IN ({$str_items})
ORDER BY (RAND() * prio_drop) DESC
LIMIT 1
"); 
```

希望我理解正确？

# javascript - 如何将图像滑块与缩放图像结合使用？

> ID：10140426
> 
> 赞同：0
> 
> 时间：2012-04-13T12:01:59.843
> 
> 标签：javascript, jquery

从某种意义上说，我似乎无法让 jquery 图像循环器处理缩放图像，这让我有点进退两难。

我基本上有一个网站，顶部有一个小导航列表，然后是全屏图像，可以使用页面底部的控件循环播放。以前，我使用[backstretch](http://srobbin.com/jquery-plugins/backstretch/)来获得与浏览器窗口一起拉伸的背景图像所需的效果。

我也希望使用[Jquery Cycle](http://jquery.malsup.com/cycle/)作为插件来做图像滑块（因为我以前无数次使用过这个）。

问题是我需要后伸的效果（即缩放图像），但需要一个滑块。我曾尝试使用其他插件进行拉伸，但它们中的大多数似乎只允许缩小图像（如果窗口缩小）而不是向上。我不能使用 backstretch，因为它占用了整个 body 标签。我只需要一个容器 div 来包含拉伸的图像（这样我就可以将标题/导航放在顶部而不裁剪图像）。

但是我不知道如何让它与 Jquery Cycle 一起工作。

有没有人这样做过或有任何这种工作的例子？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:45:09.633

可能会迟到，但请查看[http://jongaulin.com/2011/11/17/fullscreen-image-and-content-slider/](http://jongaulin.com/2011/11/17/fullscreen-image-and-content-slider/)。我希望这对你有用。

# symfony - symfony2 forms - 检查用户是否想要更改他上传的文件

> ID：10140435
> 
> 赞同：0
> 
> 时间：2012-04-13T12:02:47.333
> 
> 标签：symfony, doctrine-orm, symfony-forms

在我的表单中，我有一个文件上传字段，用户可以在其中上传他的头像。所以很明显他应该能够在他喜欢的时候改变它。

但不知何故，如果我想上传不同的图像，symfony2 无法识别。

我将 LifecycleCallbacks 用于文档实体，如下所述：http: [//symfony.com/doc/current/cookbook/doctrine/file_uploads.html#using-lifecycle-callbacks](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html#using-lifecycle-callbacks)

有没有人做过这样的事情并且可以告诉我如何检查用户是否要上传不同的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:09:31.180

`@PreUpdate`您可以在回调中比较新上传的图片和当前图片的 md5/sha 哈希值。

# html - HTML5 会完全取消后端语言的使用吗？

> ID：10140436
> 
> 赞同：-1
> 
> 时间：2012-04-13T12:02:48.017
> 
> 标签：html

我不断听到有关 HTML5 应用程序的消息。当他们这么说时，他们是指仅使用 HTML5、CSS3 和 Javascript 构建的应用程序，并且没有 MySQL、PHP 和其他后端工具的帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:12:59.743

大多数 Web 应用程序是 3 层，这意味着应用程序的核心是业务逻辑。而且我认为出于安全原因，任何企业都不会准备好用 HTML 编写业务逻辑，还有更多诸如代码可靠性、可维护性之类的原因。因此，没有人可以取消对后端语言的使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:05:30.700

“HTML 5 应用程序”是一种花哨的营销说法。它可能意味着独立的东西（可能使用非 HTML 5 API，例如[web 存储](http://www.w3.org/TR/webstorage/#storage)），也可能意味着只使用一点 HTML 5 的东西。

当然，如果任何数据需要通过浏览器传输（例如与其他人/设备共享数据、在云上备份数据、获取新闻提要等），您仍然需要服务器。

# iphone - 为什么 CSS 不支持 max-device-width: 480px？

> ID：10140438
> 
> 赞同：1
> 
> 时间：2012-04-13T12:03:00.293
> 
> 标签：iphone, css, media-queries

```
media="(max-device-width: 480px), only screen and (-moz-min-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2), all and (max-width: 480px)" 
```

大家好，

CSS 在视口为 480 像素或更少的桌面上运行良好，但在 iPhone 上却无法使用。知道媒体查询代码有什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T20:08:26.730

你有视口元标记吗？

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

# asp.net - asp.net - 如何在 SQL 注入攻击后进行清理？

> ID：10140441
> 
> 赞同：3
> 
> 时间：2012-04-13T12:03:25.913
> 
> 标签：asp.net, sql-server, sql-injection, database-security

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:17:40.807

专门回答您的脚本标签替换问题，除了手动任务之外，我看不到任何其他内容。

我相信你已经考虑过这一点，但是一个简单的字段替换语句应该可以解决这个问题：

```
update MyTable
set field = replace(field, 'unwanted', '')
where field like '%unwanted%' 
```

如果有很多表和字段，那么我相信您可以使用 SQl 数据字典来实现某种自动化。类似于以下内容：

```
DECLARE @ColName varchar(255), @TableName varchar(255), @sSQL varchar(1000)
DECLARE colcur CURSOR for
 SELECT name, object_name(id) 
   FROM syscolumns
  WHERE name = 'Moniker'

  OPEN ColCur
 FETCH NEXT FROM ColCur 
  INTO @ColName, @TableName

WHILE @@FETCH_STATUS = 0
BEGIN
    Set @sSQL = 'update ' + @TableName + ' set ' + @ColName + ' = replace(' + @ColName + ', ''unwanted'', '''') where ' + @ColName + ' like ''%unwanted%'''

    exec(@sSQL) 

    select @ColName, @TableName
    FETCH NEXT FROM ColCur 
    INTO @ColName, @TableName
END 

CLOSE ColCur
DEALLOCATE ColCur 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T13:31:33.337

我想这些将是理想情况下的一些步骤：

1.  使您的网站保持离线状态。也许您想显示“技术维护”消息而不是 404。
2.  备份被黑客入侵的数据库，您可能需要稍后对其进行分析
3.  确保修复易受 SQL 注入攻击的代码片段。我建议在团队中执行此操作，以便更彻底。
4.  从备份中恢复数据库
5.  上传（希望）固定主页
6.  请联系您的律师，因为您可能泄露了客户数据。
7.  您将与您的律师讨论接下来的法律步骤。

正如您所提到的，被黑页面上没有存储敏感材料，这可能意味着您可以跳过第 6 步和第 7 步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T12:19:34.793

如果您有备份，这是使用备份的理想时机，因为您不确切知道数据是如何损坏的。如果您没有备份，那么这应该是将来使用备份并保护自己免受此类攻击的教训。此外，如果您没有备份，您应该创建一个清理数据的算法，但这并不能保证不会留下任何垃圾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T12:12:13.300

首先 [防止 SQL 注入](http://msdn.microsoft.com/en-us/library/ff648339.aspx)

然后，从最近的备份中恢复数据。

# php - Mysql查询和php回显

> ID：10140443
> 
> 赞同：0
> 
> 时间：2012-04-13T12:03:35.020
> 
> 标签：php

好的，我有这个代码

```
<?php
include_once ('database_connection.php');

if(isset($_GET['keyword'])){
$keyword =  trim($_GET['keyword']) ;
$keyword = mysqli_real_escape_string($dbc, $keyword);

$query = "select name,title,description,link,type from items where name like '%$keyword%' or title like '%$keyword%' or description like '%$keyword%' or link like     '%$keyword%' or type like '%$keyword%'";

//echo $query;
$result = mysqli_query($dbc,$query);
if($result){
if(mysqli_affected_rows($dbc)!=0){
$ff = "";
      while($row = mysqli_fetch_array($result,MYSQLI_ASSOC)){
    $ff .= "<div id='itemdiv2' class='gradient'>";
    $ff .= "<div id='imgc'>".'<img src="Images/media/'.$row['name'].'" />'."<br/>";
$ff .= "<a href='#?w=700' id='".$row['id']."' rel='popup' class='poplight'>View full<a/></div>";
$ff .= "<div id='pdiva'>"."<p id='ittitle'>".$row['title']."</p>";
    $ff .= "<p id='itdes'>".$row['description']."</p>";
    $ff .= "<a href='".$row['link']."'>".$row['link']."</a>";
    $ff .= "</div>"."</div>";
    echo $ff;
}
}else {
    echo 'No Results for :"'.$_GET['keyword'].'"';
}

}
}else {
echo 'Parameter Missing';
}

?> 
```

我收到此错误“注意：未定义的索引：第 20 行 C:\xampp\htdocs\madeinusa\search.php 中的 id”，这是第 20 行：“$ff .=”查看完整“；” 而且我不知道问题出在哪里。我认为查询或显示记录方案实际上存在问题。希望有人可以提供帮助，我对任何建议和建议持开放态度。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:05:48.280

这只是一个通知，您缺少数组中的`id`值，`$row`因为您没有将它包含在您的选择中

尝试添加`id`选择查询：

```
$query = "select id,name,title,description,link,type from items where name like '%$keyword%' or title like '%$keyword%' or description like '%$keyword%' or link like     '%$keyword%' or type like '%$keyword%'"; 
```

它应该可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:08:04.160

`id`您应该在选择查询中提及该列

```
$query = "select id, name,title,description,link,type from items... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:08:08.667

我认为你的错误在这里：

```
$row['id'] 
```

您没有`id`在查询中选择。将其更改为：

```
select id,name,title,description,link,type from items where ... 
```

# vbscript - HTA 使用 WMI 监控 CPU 使用百分比 - 不准确

> ID：10140451
> 
> 赞同：2
> 
> 时间：2012-04-13T12:04:17.933
> 
> 标签：vbscript, wmi, hta

我一直在尝试获取我正在创建的简单桌面应用程序的 CPU 使用百分比。

我已经将几个 VBS 脚本一起放入了一个似乎可以工作的 HTA，但它不是很准确，或者至少我不这么认为，如果我与任务管理器并排运行它 -

我正在使用 Win32_PerfRawData_PerfOS_Processor 中的“Total”

你能看一下，看看有什么我可以做的更好吗？

提前致谢

```
<html>
<head>

<script type='text/javascript'>
window.resizeTo(240,150);
</SCRIPT>

<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta name="description" content="Created by David Brennan, adapted from a couple of scripts - 1\. To Get CPU Percentage - http://msdn.microsoft.com/en-us/library/windows/desktop/aa392397(v=vs.85).aspx   and 2\. To run the script over and over again - http://www.windowsitpro.com/article/vbscript/utility-monitors-crucial-processes">

<title>CPU + RAM usage</title>

<HTA:APPLICATION
    APPLICATIONNAME="CPU Usage Percentage"
    ID="cpuUsagePercentage" 
    VERSION="0.1"
    BORDER="dialog"
    SCROLL="no"
    CONTEXTMENU="no"
    SINGLEINSTANCE="no" 
    WINDOWSTATE="normal"/> 

<style type="text/css">
h3{color:purple;}
</style>

</head>
<body>

<div id='DataArea'>
waiting for info
</div>

<script language="VBScript">
'************************************************************************************************
Sub Window_OnLoad
     Dim refrtime
     refrTime = 1000  'Refresh the screen every 1000 millisecs (one seconds)
     GetPercentage(refrtime)

     TimeoutID = window.setInterval("GetPercentage(" & refrtime &")",refrTime)
End sub

'************************************************************************************************
Sub GetPercentage(refrtime)
    Set objService = GetObject( _
        "Winmgmts:{impersonationlevel=impersonate}!\Root\Cimv2")

    Set objInstance1 = objService.Get( _
        "Win32_PerfRawData_PerfOS_Processor.Name='_Total'")
    N1 = objInstance1.PercentProcessorTime
    D1 = objInstance1.TimeStamp_Sys100NS

    Set perf_instance2 = objService.Get( _
        "Win32_PerfRawData_PerfOS_Processor.Name='_Total'")
    N2 = perf_instance2.PercentProcessorTime
    D2 = perf_instance2.TimeStamp_Sys100NS
    ' Look up the CounterType qualifier for the PercentProcessorTime 
    ' and obtain the formula to calculate the meaningful data. 
    ' CounterType - PERF_100NSEC_TIMER_INV
    ' Formula - (1- ((N2 - N1) / (D2 - D1))) x 100

    PercentProcessorTime = (1 - ((N2 - N1)/(D2-D1)))*100
    CPUpercentage = Round(PercentProcessorTime,2)
    DataArea.InnerHTML = "<h3>CPU Usage = " & CPUpercentage & "%"
End sub

'************************************************************************************************

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T14:32:46.270

我重新编写了您的脚本以在两次测量之间暂停，现在它与我的任务管理器的结果相当。

```
<html>
<head>
<script language="vbscript">
  set objservice = getobject("winmgmts:{impersonationlevel=impersonate}!\root\cimv2")
  const refrtime=1000
</script>
<script type='text/javascript'>
  window.resizeTo(240,150);
</script>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta name="description" content="Created by David Brennan, adapted from a couple of scripts - 1\. To Get CPU Percentage - http://msdn.microsoft.com/en-us/library/windows/desktop/aa392397(v=vs.85).aspx   and 2\. To run the script over and over again - http://www.windowsitpro.com/article/vbscript/utility-monitors-crucial-processes">
<title>CPU + RAM usage</title>

<HTA:APPLICATION
    APPLICATIONNAME="CPU Usage Percentage"
    ID="cpuUsagePercentage" 
    VERSION="0.1"
    BORDER="dialog"
    SCROLL="no"
    CONTEXTMENU="no"
    SINGLEINSTANCE="no" 
    WINDOWSTATE="normal"/> 

<style type="text/css">
  h3{color:purple;}
</style>
</head>
<body>
  <div id='DataArea'>waiting for info</div>
  <script language="vbscript">
  '--- ---'
  sub window_onload
    call getpercentage1()
  end sub
  '--- ---'
  sub getpercentage1()
    set objservice = getobject("winmgmts:{impersonationlevel=impersonate}!\root\cimv2")
    set objinstance1 = objservice.get("win32_perfrawdata_perfos_processor.name='_total'")
    n1 = objinstance1.percentprocessortime
    d1 = objinstance1.timestamp_sys100ns
    timeoutid = window.settimeout("call getpercentage2(" & n1 &","& d1 & ")", refrtime/2)
  end sub
  '--- ---'
  sub getpercentage2(n1, d1)
    set objservice = getobject("winmgmts:{impersonationlevel=impersonate}!\root\cimv2")
    set perf_instance2 = objservice.get("win32_perfrawdata_perfos_processor.name='_total'")
    n2 = perf_instance2.percentprocessortime
    d2 = perf_instance2.timestamp_sys100ns
    percentprocessortime = (1 - ((n2 - n1)/(d2-d1)))*100
    cpupercentage = round(percentprocessortime,2)
    dataarea.innerhtml = "<h3>cpu usage = " & cpupercentage & "%"
    timeoutid = window.settimeout("getpercentage1()", refrtime)
  end sub
  '--- ---'
  </script>
</body>
</html> 
```

# iphone - 如何在 iphone sdk 中获取 google plus 的共同好友

> ID：10140453
> 
> 赞同：-1
> 
> 时间：2012-04-13T12:04:25.767
> 
> 标签：iphone, addressbook, google-plus

我正在使用开发人员 Google [https://developers.google.com/+/api/oauth](https://developers.google.com/+/api/oauth)。我想在 api 中获得共同/共同的朋友。有可能吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T22:13:25.650

这对于 Google+ 的当前 REST API 是不可能的。

如果您想了解有关可用内容的更多信息，可以查看[参考文档](https://developers.google.com/+/api/)。如果它是您需要的 API，您也可以使用[平台问题跟踪器](http://code.google.com/p/google-plus-platform/issues/entry)请求它。

# java - 如何中断/暂停读取图像？

> ID：10140463
> 
> 赞同：1
> 
> 时间：2012-04-13T12:04:50.640
> 
> 标签：java, image, javax.imageio

我正在创建一个显示大图像的面板。我正在使用`ImageIO.read(URL)`方法来显示图像。现在我必须添加功能来中断或暂停给定图像 URL 的读取过程。

我怎样才能做到这一点？

```
BufferedImage image = null;
URL urlImage = new URL(surl);
image = ImageIO.read(urlImage); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:20:30.043

没有任何方法可以开箱即用。你可以做的是，把它放在一个单独的线程中并停止或中断它。

请记住，`Thread.stop()`标记为已弃用是有充分理由的，并考虑可能发生的内存泄漏。顺便提一句。为什么需要添加这样的功能？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T13:04:53.307

您肯定需要另一个线程，您可以从中关闭正在读取的`InputStream`线程`ImageIO.read`。所以，首先，你需要重新设计你的代码：

```
final InputStream stream = new URL(surl).openStream();
// find a way to push the 'stream' reference to the other thread
final BufferedImage image = ImageIO.read(stream); // this will block 
```

在另一个线程中，您必须调用`stream.close()`.

# clearcase - RTC 源代码控制在未进行任何更改时显示挂起的更改

> ID：10140465
> 
> 赞同：2
> 
> 时间：2012-04-13T12:04:58.393
> 
> 标签：clearcase, rtc

在“待更改”中，RTC 源代码控制将我的目标文件夹列为传出更改。我的项目是基于 Maven 的。我没有对目标文件夹进行任何更改。

![在此处输入图像描述](../Images/1fbe9c5e3dc120a07fbd839b2e663ff6.png)

当我将目标文件夹与我流向的流进行比较时，没有显示任何差异：

![在此处输入图像描述](../Images/f40aaa24d821147a245ec02509f41c11.png)

是否有其他一些标准导致“待更改”视图列出我的目标文件夹以及如何确定 RTC 正在识别哪些更改？

当我尝试撤消目标文件夹中的变更集时，我收到错误：

![在此处输入图像描述](../Images/c42f376422a11ec0f5c2a92cf7c7a4c5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:34:51.510

`+`' ' 目录上方黑色箭头中的小`target`图标表示 RTC 将所述目录检测为要交付的*新元素。*
这意味着您必须已将其余更改签入该目录。

一般来说，`target`应该被忽略（即从不考虑首先签入）。
在您的情况下，您应该：

*   [从您的变更集中](https://jazz.net/help-dev/clm/index.jsp?topic=/com.ibm.team.scm.doc/topics/c_csets.html&re=1&scope=null)删除该目录（假设您尚未完成变更集）：~~尝试`undo`更改集中的目标目录~~.
    （对于新创建的元素，这实际上会触发错误消息
    “ `Undoing this change would produce an orphan with no parent folder`”）。
    **右键单击并选择“ `ignore`”**
    （不要`Reverse`在变更集本身上选择“”：它会回滚当前签入的所有更改）
*   将它添加到您的`.jazzignore`: 忽略选项将添加或创建一个`.jazzignore`, 以便在其中声明您的目录。

`.jazzignore`如果您已经有一个，请编辑您的内容，例如：

```
core.ignore.recursive= \
    {target} 
```

* * *

注意：对于 ClearCase，问题是不同的，因为 ClearCase 没有从签出的内容中检测到私有内容（并且您没有使用 RTC 签出）。
您需要明确询问[所有私人文件](https://stackoverflow.com/questions/7657084/command-to-find-all-view-private-files-in-the-current-directory-recursively/7657120#7657120)或[所有签出文件](https://stackoverflow.com/questions/1576701/how-to-find-out-all-the-checked-out-files-in-a-branch/1577552#1577552)。

# spring - spring-beans.dtd 文件问题

> ID：10140471
> 
> 赞同：0
> 
> 时间：2012-04-13T12:05:16.577
> 
> 标签：spring, hibernate, spring-mvc

我的 spring-hibernate.xml 文件中出现此错误

引用的文件包含错误 (http://www.springframework.org/dtd/spring-beans.dtd)

似乎某些 jar 文件丢失或未使用正确的版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:32:57.407

你有`spring-beans-{version}.jar`你的类路径吗？

# javascript - 如何使用Javascript在磁盘上创建像时间戳一样的文件夹

> ID：10140475
> 
> 赞同：0
> 
> 时间：2012-04-13T12:05:34.537
> 
> 标签：javascript, filesystems, activex, timestamp, subdirectory

我有一个处理文件并放入特定文件夹的脚本。其中有一部分：

```
 String.prototype.repeat = function(n)
            {
                return new Array( n + 1 ).join(this);
            }

            //WScript.Echo("JScript");

            var fields = new Array ();
            var fso = new ActiveXObject("Scripting.FileSystemObject");
            file_name = "C:\\SOURCE_FILE\\ext"; //Source folder + file name     
            var file_in = fso.OpenTextFile(file_name + ".dat", 1, false);       //file for processing
            file_name_out = "C:\\DEST_DIR\\ext";    //folder for result file + file profix  

    // create sToday wich I want to use in folder creation and for concatenaiting to file
    var today = new Date();
    var CurrentMonth = (today.getMonth()+1);
    var CurrentDay = (today.getDay());
    if (CurrentDay<10)
    var sToday = "0"+today.getDate().toString();
    else 
    var sToday = today.getDate().toString();
    if(CurrentMonth<10)
    sToday += "0";
    else 
    sToday += "";
    sToday += (today.getMonth()+1).toString();
    sToday += today.getYear().toString();
    //sToday += today.getHours().toString();
    //sToday += today.getMinutes().toString();
    //sToday += today.getSeconds().toString();

dest_dir = "C:\\DEST_DIR\\"+sToday; //Here I am trying to crate a folder like timestamp, but it does not work =(((  
            var file_xml = fso.OpenTextFile(dest_dir + sToday + ".dat", 2, true);   //result file 
            var log = fso.OpenTextFile(file_name_out + sToday + "_log.txt", 2, true);       //log file 
```

那么，谁能帮我在“C:\DEST_DIR\”中创建一个像时间戳这样的文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:11:06.063

试试[`FileSystemObject.CreateFolder`](http://msdn.microsoft.com/en-us/library/7kby5ae3%28v=vs.85%29)。

```
dest_dir = "C:\\DEST_DIR\\" + sToday;
fso.CreateFolder(dest_dir); 
```

# android - 超过 800 个 KML 数据叠加层的 Android 地图性能

> ID：10140478
> 
> 赞同：2
> 
> 时间：2012-04-13T12:05:40.777
> 
> 标签：android, performance, overlay, kml, qgis

我有一些形状文件，我已将其转换为 KML 文件，我希望从中读取坐标，然后在 MapView 上的坐标之间绘制路径。借助这篇精彩的帖子：[如何使用 kml 文件在地图上绘制路径？](https://stackoverflow.com/questions/3109158/how-to-draw-a-path-on-a-map-using-kml-file/3109723#3109723)我已经能够将 KML 读入“地标”的 ArrayList 中。然后这篇很棒的博客文章展示了如何获取 GeoPoints 列表并绘制路径：[http ://djsolid.net/blog/android---draw-a-path-array-of-points-in-mapview](http://djsolid.net/blog/android---draw-a-path-array-of-points-in-mapview)

上面帖子中的示例仅在某些点之间绘制了一条路径，但是由于我的路径比我遇到的一些性能问题要多得多。我目前正在为每个单独的路径添加一个新的 RouteOverlay。这导致我在全部添加后拥有超过 800 个叠加层。这会影响性能，我希望能提供一些关于我可以做些什么来改进它的意见。

以下是我考虑过的一些选项：

1.  尝试将所有点添加到列表中，然后可以将其传递到将扩展 Overlay 的类中。在那个新类中，也许可以在单个 Overlay 层中添加和绘制路径？我不确定如何实现这一点，因为路径并不总是相交并且它们具有不同的起点和终点。目前，我正在将具有多个点的每条路径添加到它自己的列表中，然后将其添加到叠加层中。这会产生超过 700 个叠加层...

2.  简化 KML 或 SHP。不是有超过 700 条不同的路径，也许有办法将它们合并成 100 条或更少的路径？由于很多路径在某​​个点相交，因此应该可以修改原始 SHP 文件以合并所有相交。因为在我无法在 GQIS 中找到执行此操作的方法之前，我从未使用过这些类型的文件。如果有人知道如何做到这一点，我很乐意对此提供一些意见。如果您有兴趣，这里是指向形状文件组的链接：

[http://danielkvist.net/cprg_bef_cbana_polyline.shp](http://danielkvist.net/cprg_bef_cbana_polyline.shp)

[http://danielkvist.net/cprg_bef_cbana_polyline.shx](http://danielkvist.net/cprg_bef_cbana_polyline.shx)

[http://danielkvist.net/cprg_bef_cbana_polyline.dbf](http://danielkvist.net/cprg_bef_cbana_polyline.dbf)

[http://danielkvist.net/cprg_bef_cbana_polyline.prj](http://danielkvist.net/cprg_bef_cbana_polyline.prj)

无论如何，这是我用来添加叠加层的代码。提前谢谢了。

**RoutePathOverlay.java**

```
package net.danielkvist;

import java.util.List;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.graphics.Point;
import android.graphics.RectF;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.Projection;

public class RoutePathOverlay extends Overlay
{

    private int _pathColor;
    private final List<GeoPoint> _points;
    private boolean _drawStartEnd;

    public RoutePathOverlay(List<GeoPoint> points)
    {
        this(points, Color.RED, false);
    }

    public RoutePathOverlay(List<GeoPoint> points, int pathColor, boolean drawStartEnd)
    {
        _points = points;
        _pathColor = pathColor;
        _drawStartEnd = drawStartEnd;
    }

    private void drawOval(Canvas canvas, Paint paint, Point point)
    {
        Paint ovalPaint = new Paint(paint);
        ovalPaint.setStyle(Paint.Style.FILL_AND_STROKE);
        ovalPaint.setStrokeWidth(2);
        int _radius = 6;
        RectF oval = new RectF(point.x - _radius, point.y - _radius, point.x + _radius, point.y + _radius);
        canvas.drawOval(oval, ovalPaint);
    }

    public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when)
    {
        Projection projection = mapView.getProjection();
        if (shadow == false && _points != null)
        {
            Point startPoint = null, endPoint = null;
            Path path = new Path();
            // We are creating the path
            for (int i = 0; i < _points.size(); i++)
            {
                GeoPoint gPointA = _points.get(i);
                Point pointA = new Point();
                projection.toPixels(gPointA, pointA);

                if (i == 0)
                { // This is the start point
                    startPoint = pointA;
                    path.moveTo(pointA.x, pointA.y);
                }
                else
                {
                    if (i == _points.size() - 1)// This is the end point
                        endPoint = pointA;
                    path.lineTo(pointA.x, pointA.y);
                }
            }

            Paint paint = new Paint();
            paint.setAntiAlias(true);
            paint.setColor(_pathColor);
            paint.setStyle(Paint.Style.STROKE);
            paint.setStrokeWidth(3);
            paint.setAlpha(90);
            if (getDrawStartEnd())
            {
                if (startPoint != null)
                {
                    drawOval(canvas, paint, startPoint);
                }
                if (endPoint != null)
                {
                    drawOval(canvas, paint, endPoint);
                }
            }
            if (!path.isEmpty())
                canvas.drawPath(path, paint);
        }
        return super.draw(canvas, mapView, shadow, when);
    }

    public boolean getDrawStartEnd()
    {
        return _drawStartEnd;
    }

    public void setDrawStartEnd(boolean markStartEnd)
    {
        _drawStartEnd = markStartEnd;
    }
} 
```

**我的地图活动**

```
package net.danielkvist;

import java.util.ArrayList;
import java.util.Collection;
import java.util.Iterator;

import android.graphics.Color;
import android.os.Bundle;
import android.util.Log;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;

public class MyMapActivity extends MapActivity
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        MapView mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);

        String url = "http://danielkvist.net/cprg_bef_cbana_polyline_simp1600.kml";
        NavigationDataSet set = MapService.getNavigationDataSet(url);

        drawPath(set, Color.parseColor("#6C8715"), mapView);
    }

    /**
     * Does the actual drawing of the route, based on the geo points provided in
     * the nav set
     * 
     * @param navSet
     *            Navigation set bean that holds the route information, incl.
     *            geo pos
     * @param color
     *            Color in which to draw the lines
     * @param mMapView01
     *            Map view to draw onto
     */
    public void drawPath(NavigationDataSet navSet, int color, MapView mMapView01)
{

    ArrayList<GeoPoint> geoPoints = new ArrayList<GeoPoint>();
    Collection overlaysToAddAgain = new ArrayList();
    for (Iterator iter = mMapView01.getOverlays().iterator(); iter.hasNext();)
    {
        Object o = iter.next();
        Log.d(BikeApp.APP, "overlay type: " + o.getClass().getName());
        if (!RouteOverlay.class.getName().equals(o.getClass().getName()))
        {
            overlaysToAddAgain.add(o);
        }
    }
    mMapView01.getOverlays().clear();
    mMapView01.getOverlays().addAll(overlaysToAddAgain);

    int totalNumberOfOverlaysAdded = 0;
    for(Placemark placemark : navSet.getPlacemarks())
    {
        String path = placemark.getCoordinates();
        if (path != null && path.trim().length() > 0)
        {
            String[] pairs = path.trim().split(" ");

            String[] lngLat = pairs[0].split(","); // lngLat[0]=longitude
                                                   // lngLat[1]=latitude
                                                   // lngLat[2]=height
            try
            {
                if(lngLat.length > 1 && !lngLat[0].equals("") && !lngLat[1].equals(""))
                {
                    GeoPoint startGP = new GeoPoint(
                            (int) (Double.parseDouble(lngLat[1]) * 1E6),
                            (int) (Double.parseDouble(lngLat[0]) * 1E6));

                    GeoPoint gp1;
                    GeoPoint gp2 = startGP;

                    geoPoints = new ArrayList<GeoPoint>();
                    geoPoints.add(startGP);

                    for (int i = 1; i < pairs.length; i++)
                    {
                        lngLat = pairs[i].split(",");

                        gp1 = gp2;
                        if (lngLat.length >= 2 && gp1.getLatitudeE6() > 0
                                && gp1.getLongitudeE6() > 0
                                && gp2.getLatitudeE6() > 0
                                && gp2.getLongitudeE6() > 0)
                        {

                            // for GeoPoint, first:latitude, second:longitude
                            gp2 = new GeoPoint(
                                    (int) (Double.parseDouble(lngLat[1]) * 1E6),
                                    (int) (Double.parseDouble(lngLat[0]) * 1E6));

                            if (gp2.getLatitudeE6() != 22200000)
                            {
                                geoPoints.add(gp2);

                            }
                        }
                    }
                    totalNumberOfOverlaysAdded++;
                    mMapView01.getOverlays().add(new RoutePathOverlay(geoPoints));
                }

            }
            catch (NumberFormatException e)
            {
                Log.e(BikeApp.APP, "Cannot draw route.", e);
            }
        }
    }

    Log.d(BikeApp.APP, "Total overlays: " + totalNumberOfOverlaysAdded);
    mMapView01.setEnabled(true);
}

    @Override
    protected boolean isRouteDisplayed()
    {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

编辑：当然还有一些我正在使用的文件，但我没有发布。您可以在这里下载完整的 Eclipse 项目：http: [//danielkvist.net/se.zip](http://danielkvist.net/se.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:24:11.810

您是否考虑过将所有路径渲染为位图，然后将其用作叠加层，当然，如果用户放大或缩小或移动地图很多，您需要再次渲染它。将位图设置为屏幕大小的 2 或 4 倍（注意不要在这里用完所有内存），您应该能够进行一些放大和缩小，并允许进行一些平移，直到您需要再次渲染它。像四叉树一样渲染它（对树中的位图有周引用）将允许一些缓存和可能的大性能改进。使用四叉树并不是一个简单的方法，但如果您有时间和知识，可能值得付出努力。我相信这大致是谷歌地图处理其地图图块的方式。

# scala - 使用 Scala/Cas bah 从 MongoDB DBObject 中提取值

> ID：10140485
> 
> 赞同：0
> 
> 时间：2012-04-13T12:06:17.953
> 
> 标签：scala, mongodb, casbah

我想从 Casbah 的 MongoCollectionBase.find(...) 返回的 DBObject 中提取某个键的值，在这种情况下为“orderItems”。我有解决方案，但我不满意。我发现我的解决方案很麻烦。它在每一步都将从 DBObject.toMap 返回的 java.util.Map 转换为 Scala Map 或其他集合。更好的方法是什么？谢谢

```
val orders = provisioningDb("systems").find(MongoDBObject.empty, MongoDBObject("company.department.orders" -> 1))

import scala.collection.JavaConversions._

def findC(m : Map[String, Any]) : Iterable[Any] = {
  val c = for ((k, v) <- m) yield (k, v) match {
    case (k, v) if k equals "orderItems" => v
    case (k, v : java.util.HashMap[String, Any]) => findC(toMap(v).asInstanceOf[Map[String, Any]]).head
    case _ => Nil
  }
  c.filter(_.isInstanceOf[java.util.List[Any]] )
}

def toMap[K, E](m: java.util.Map[K, E]): Map[K, E] = {
  Map.empty ++ new MapWrapper[K, E](m)
}

val orderItems = for {
  x <- orders
} yield x

for (y <- orderItems) {
  println(findC(toMap(y.toMap).asInstanceOf[Map[String, Any]]))
} 
```

删除了细节的 2 行样本数据保留在 MongoDB 中，

```
company : {department : {orders -> [{"id" : "543", "quantity" : 2}, {"id" : "223", "quantity" : 21}, {"id" : "332", "quantity" : 3}] 

company : {department : {orders -> [{"id" : "222", "quantity" : 8}, {"id" : "663", "quantity" : 3] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:30:07.933

您是否尝试过将 a`case class`与[Salat](https://github.com/novus/salat/wiki/Quick-start)一起使用？

您还可以查看这个精彩的[演示文稿](http://repo.novus.com/mongonyc-salat)，特别是幻灯片 [#28](http://repo.novus.com/mongonyc-salat/#28)，它讨论了 SalatDAO，它允许您直接保存和检索您的案例对象！

# c# - 将 Datagridview 绑定到 StringCollection

> ID：10140487
> 
> 赞同：1
> 
> 时间：2012-04-13T12:06:22.243
> 
> 标签：c#, winforms, datagridview, .net-2.0

是否可以将 Datagridview 绑定到 StringCollection ？我试图以某种方式做到这一点

```
 StringCollection dict = Settings.Default.MyDict;
    BindingSource bs = new BindingSource();
    bs.DataSource = dict;
    this.DGV.DataSource = bs; 
```

芽而不是集合 datagridview 的项目显示项目的长度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T15:10:01.217

问题在于，当它绑定到 时`StringCollection`，底层类型是`string`这样的，它会从类型中提取出它找到的第一个属性`string`来显示。该属性是长度。

您可以做的是将您`StringCollection`的类包装在您自己制作的类中，并公开一个将显示`string`'s 文本的属性。

包装类`string`：

```
public class MyString
{
    private string _myString;

    public string Text
    {
        get { return _myString; }
        set { _myString = value; }
    }

    public MyString(string str)
    {
        _myString = str;
    }
} 
```

您的代码变为：

```
StringCollection dict = Settings.Default.MyDict; 
// put your string in the wrapper
List<MyString> anotherdict = new List<MyString>();
foreach (string str in dict)
{
    anotherdict.Add(new MyString(str));
}
BindingSource bs = new BindingSource();
// bind to the new wrapper class
bs.DataSource = anotherdict;
this.DGV.DataSource = bs; 
```

# objective-c - 如何将已创建的钥匙串密钥添加到配置文件

> ID：10140490
> 
> 赞同：-1
> 
> 时间：2012-04-13T12:06:31.443
> 
> 标签：objective-c, certificate, keychain, ios-provisioning

我通过钥匙串访问创建了自己的密钥（公共/私人）。但是我的公司已经创建了一个配置文件和开发人员证书，我下载了（登录后）并将其安装在我的 Xcode 和 iPhone 中。但是当我尝试在 iPhone 上运行时，它显示“默认钥匙串中没有有效的证书/私钥对”。我还在 info.plist 中正确设置了包标识符名称，但我做错了什么？是不是我应该以某种方式将我自己的 mac 密钥对添加到某个地方以匹配它，因为它已经由公司创建？任何人都可以帮助或建议我哪里出错了，我搜索了论坛他们都根本不匹配我的问题并误导其他方式。

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:49:16.390

您需要已下载的开发者证书的私钥。错误*“默认钥匙串中没有有效的证书/私钥对”*表示您没有私钥。

您说*“我的公司已经创建了 [...] 开发人员证书”*，听起来他们已经为您创建了开发人员证书。如果是这种情况，他们需要向您发送私钥，因为默认情况下您不会拥有它。

通常，应该由每个单独的开发人员提出证书签名请求并在供应门户中生成开发证书。公司没有理由为你这样做。

# opencl - 在 OpenCL 中使用 clEnqueueNativeKernel

> ID：10140494
> 
> 赞同：1
> 
> 时间：2012-04-13T12:06:58.403
> 
> 标签：opencl

有没有在 OpenCL 中使用 clEnqueueNativeKernel 的例子？这样就可以用 ac 或 c++ 语言编写内核。其他命令是否保持不变？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T10:53:49.907

本机 C++“内核”本质上只是您希望在命令队列中执行以保持命令顺序的函数。

AFAIK 它们在 GPU 上不受支持。如果您想在所有设备上执行 C++ 函数，您应该考虑使用 cl_event 回调（当状态 == CL_COMPLETE 时）。

假设您有一个要从设备读取并传递给您的 C++ 函数的缓冲区对象。您还想传递一些整数值（我使用 C++ OpenCL 包装器）：

```
// First of all, we should define a struct which describes our arguments list.
struct Arguments
{
    int integer;
    void* buffer_host;
};

// Define C/C++ function you want to call.
void CFunction(void *args)
{
    Arguments args = reinterpret_cast<Arguments*>(args);
    // Do something with args->integer and args->buffer_host.
}

// ...
Arguments args = {.integer = 0, .buffer_host = NULL};

// First, we should define Buffer objects in arguments.
std::vector<cl::Memory> buffers_dev;
buffers_dev.push_back(a_buffer);

// Then we should define pointers to *pointer in args* which will be set
// when OpenCL read data from buffers_dev to the host memory.
std::vector<const void*> buffers_host;
buffers_host.push_back(&args.buffer_host);

// Finally, set integer
args.integer = 10;

queue.enqueueNativeKernel(CFunction,
                          std::make_pair(&args, siezof(Arguments)),
                          &buffers_dev,
                          &buffers_host);

// At this point args were copied by OpenCL and you may reuse or delete it. 
```

# c# - 从字符串中修剪字符

> ID：10140498
> 
> 赞同：2
> 
> 时间：2012-04-13T12:07:08.127
> 
> 标签：c#

我想从日期中删除分隔符

```
System.DateTime.Now.ToShortDateString() 
```

返回`mm/dd/yyyy`为`4/13/2012`。那么我如何`'/'`从字符串中删除。

我将日期字符串转换为 int32 为：

```
Convert.ToInt32(System.DateTime.Now.ToShortDateString().Trim(new char[]{'/'})); 
```

但 trim 不会修剪字符串之间的字符。

任何其他更好的建议都将被应用。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:09:13.863

```
string date = System.DateTime.Now.ToShortDateString();
string str = date.Replace("/", string.Empty); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T12:10:25.097

试试这个：

```
string dateSeparator = System.Threading.Thread.CurrentThread.CurrentCulture.DateTimeFormat.DateSeparator; 

Convert.ToInt32(System.DateTime.Now.ToShortDateString().Replace(dateSeparator, "")); 
```

**编辑：根据@Tim 评论**
另一种方法是使用[DateTime.ToString() 模式](http://www.geekzilla.co.uk/View00FF7904-B510-468C-A2C8-F859AA20581F.htm)

```
Convert.ToInt32(DateTime.Now.ToString("MMddyyyy")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T12:13:14.597

这会给你想要的结果：

```
String result = System.DateTime.Now.ToString("Mddyyyy");  //"4132012" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T12:13:51.897

也许是这样的：

```
var dateSep= Thread.CurrentThread.CurrentCulture.DateTimeFormat.DateSeparator;
var date= DateTime.Now.ToShortDateString().Replace(dateSep,"");
int intdate=int.Parse(date); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T12:14:41.440

`/`您可以直接格式化该日期，而不是删除分隔符：

`Convert.ToInt32(DateTime.Now.ToString("MMddyyyy"));`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T12:14:10.770

尝试使用

```
DateTime.Now.ToString("MMddyyyy"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-13T12:14:16.170

为什么不只生成目标格式的字符串：

```
System.DateTime.Now.ToString("MMddyyyy") 
```

# java - java数组：如何处理java中的数组条件

> ID：10140499
> 
> 赞同：0
> 
> 时间：2012-04-13T12:07:12.460
> 
> 标签：java, arrays, loops, for-loop

```
int Cnt = 4;

for(int i=0; i<Cnt; i++)  {
} 
```

在这个循环中，我想根据`i`.

**那么实现这一点的最佳方法是什么？**

我应该使用以下方式吗？

```
for(int i=0; i<Cnt; i++) {
    if (i==0) {
        // some code 
    }
    else if(i==1) {
    // some code 
    }
} 
```

**或者这样看起来会很好吗？**

```
for (int i=0; i<Cnt; i++) {
    String str = Bag[0].value ;
    String str22 = Bag[1].value     
} 
```

我想问的是，我怎么知道数组的最大长度是多少？

这样做最不容易出错的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T12:18:51.410

好的，我也提倡使用某种开关功能，并将我的代码结构如下

```
public void fooOperation(int[] numbers) {
    for(int i=0; i < numbers.length; i++) { 
        handleValue(i);
    }
}

public void handleValue(int value)  {
    switch(i) {
        case 1:
            // some code
            break;
        case 2:
            // some code
           break;
        default:
            break;
    }
} 
```

还有一点值得注意的是，如果这个 switch 语句变得非常大，它不是最好的解决方案，你可以使用策略模式来避免这样的代码。但是，它确实取决于您的数组中保存的内容，int 可能代表其他内容（例如枚举值的值），此时您可以转换为强类型案例并具有针对该案例的行为。这个问题是软件工程的问题，实际上取决于收到的内容的范围。如果你只需要 3 个案例，那么有一个论点说简单的开关是最好的，因为它就是这样，简单。

我没有内联切换的原因是为了使该方法更易于单元测试而无需进入循环，这意味着每个案例都可以单独测试，并且当您更改它时，您不必担心意外修改循环代码......**它更整洁**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:09:59.807

尝试使用开关功能。

> for(int i=0; 我
> 
> switch(i) { case 1: break;
> 
> //很快。}
> 
> }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:17:39.540

[Switch case](http://en.wikipedia.org/wiki/Switch_statement#C.2C_C.2B.2B.2C_D.2C_Java.2C_PHP.2C_ActionScript.2C_JavaScript)最适合这个要求。当您检查超过 3 个条件时，您可以进行 switch。

```
 switch (i) {
            case 0:
                System.out.println("i value"+i);

                break;
            case 1:
                System.out.println("i value"+i);

                break;
            case 2:
                System.out.println("i value"+i);

                break;
            case 3:
                System.out.println("i value"+i);

                break;
            case 4:
                System.out.println("i value"+i);

                break;

        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T12:35:27.350

你必须使用`switch case`，因为..

```
1:- Cleaner code. Code with multiple chained if/else if ... looks messy and is 
difficult to maintain - switch gives    cleaner structure. 
```

**条件评估一次**
足够灵活，可以构建像 Duff 的设备这样的东西
，并且它**执行得更快**（通过跳转/查找表）* 历史上

**前任：-**

```
 switch (i){  
     case 1:
       // do something
       break;
     case 2:
       // do something
       break;
     case 3:
       // do something
       break;

    // and more...

     default:
       // do something 
   } 
```

# c# - C#剪贴板直接复制粘贴

> ID：10140500
> 
> 赞同：5
> 
> 时间：2012-04-13T12:07:13.393
> 
> 标签：c#, windows

你好

我想直接复制/粘贴，例如，我只需单击一下按钮即可直接粘贴到剪贴板，您可以编写示例代码

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T12:12:53.427

如果您想从文本框（在此示例中为 textBox1）复制，这就是您所需要的：

```
Clipboard.SetText(textBox1.Text); //To copy your text to your clipboard
Clipboard.GetText(); //To get your text from your clipboard 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:11:46.153

利用

> Clipboard.SetText("你的文本")

将文本放到剪贴板

和

> 字符串 myText = Clipboard.GetText()

从您的键盘接收文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:16:37.540

对于列表框：

```
myListbox.Items.Add(Clipboard.GetText()); 
```

# d - 你如何在 DMD 2 上设置 Derelict 3？

> ID：10140501
> 
> 赞同：1
> 
> 时间：2012-04-13T12:07:14.503
> 
> 标签：d

那里的大多数材料都是带有 Derelict2 的 DMD1。我已经尝试了我能想到的一切，但我得到的只是不同种类的垃圾。DMD2 安装正常，因为我可以编译 hello worlds。我的 sc.ini 内容如下：

```
[Version]
version=7.51 Build 020

[Environment]
LIB="%@P%\..\lib";\dm\lib
DFLAGS="-I%@P%\..\..\src\phobos" "-I%@P%\..\..\src\druntime\import" "-I%@P%\..\..\src\etc"
LINKCMD=%@P%\link.exe 
```

如果不包含 gl3.d 的路径（我正在使用 Eclipse 并且还使用命令 shell 中的 dmd/bud 进行检查，Windows XP）我会收到“无法读取 gl3.d”错误，该错误在路径时已修复已添加到库引用中。

我要编译的文件是：

```
import std.stdio;
import derelict.opengl3.gl3;

pragma(lib, "DerelictGL3.lib");

void main(){
    DerelictGL3.load();

    writeln("Fred");

} 
```

如果我注释掉编译指示，错误是：

```
OPTLINK (R) for Win32  Release 8.00.12
Copyright (C) Digital Mars 1989-2010  All rights reserved.
http://www.digitalmars.com/ctg/optlink.html
bin\Main.obj(Main) 
 Error 42: Symbol Undefined _D8derelict7opengl33gl312__ModuleInfoZ
bin\Main.obj(Main) 
 Error 42: Symbol Undefined _D8derelict7opengl33gl311DerelictGL3C8derelict7opengl33gl317DerelictGL3Loader
--- errorlevel 2 
```

如果我取消注释编译指示，则错误是：

```
--------  Build Commands:  --------
-od"bin"
-of"bin\Main.exe"

-I"src"

"src\Main.d"

OPTLINK (R) for Win32  Release 8.00.12
Copyright (C) Digital Mars 1989-2010  All rights reserved.
http://www.digitalmars.com/ctg/optlink.html
D:\Programming\DMD\dmd2\windows\bin\..\lib\DerelictGL3.lib(gl3) 
 Error 42: Symbol Undefined _D8derelict4util6loader15SharedLibLoader19isAutoUnloadEnabledOFNdZb
D:\Programming\DMD\dmd2\windows\bin\..\lib\DerelictGL3.lib(gl3) 
 Error 42: Symbol Undefined _D8derelict4util9exception17DerelictException7__ClassZ
D:\Programming\DMD\dmd2\windows\bin\..\lib\DerelictGL3.lib(gl3) 
```

直到我认为每个函数都被列出之前，它一直保持不变。

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T12:12:10.087

您必须添加一个`pragma(lib, "DerelictUtil.lib")`, 或针对它的链接。（与 Derelict2 相同）

# heroku - Heroku 分片上的 Redis

> ID：10140503
> 
> 赞同：5
> 
> 时间：2012-04-13T12:07:30.010
> 
> 标签：heroku, redis, redistogo

我正在评估使用 heroku 和 RedisToGo 插件的可能性。

我读过有可能设置带有分片和复制的独立 redis 集群。

但是在[heroku 文档](https://devcenter.heroku.com/articles/redistogo#using_redis_from_java)中，我看到了`JedisPool`用法示例而不是`ShardedJedisPool`.

这是否意味着heroku上的redis不会扩展和分片？还是在内部完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T02:56:51.887

不幸的是，[Redis To Go 附加](https://addons.heroku.com/redistogo)组件在其任何计划中都不支持分片或复制。

但是，通常情况下，如果您直接联系附加供应商，他们会与您合作以支持自定义需求。您可以预期此类计划的成本会适当增加。

# php - 在php中获取部分url

> ID：10140504
> 
> 赞同：-1
> 
> 时间：2012-04-13T12:07:30.523
> 
> 标签：php

我想使用 php 获取此 url 的一部分，最好的方法是什么

示例网址：

```
http://www.domain.com/44-Paris/blogs-for-travel/tour1.html 
```

如何使用 php 获取如下所示的 url？

**http://www.domain.com/44-Paris/**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T12:11:03.783

使用[parse_url](http://www.php.net/manual/en/function.parse-url.php)

```
<?php
    $url = 'http://www.domain.com/44-Paris/blogs-for-travel/tour1.html';

    $parse = parse_url($url);
    $path = explode('/', $parse['path']);

    echo $parse['scheme']."://".$parse['host']."/".$path[1]."/";
?> 
```

# sql - 需要输入来编写 SQL 查询

> ID：10140509
> 
> 赞同：1
> 
> 时间：2012-04-13T12:07:55.157
> 
> 标签：sql, oracle

我需要有关 oracle SQL 的帮助。表中的数据如下。对于给定的数据，我需要根据 COB 日期范围和值创建一个波段。

```
COB         VALUE   
-----------------   
4/5/2012    20      
4/6/2012    20      
4/7/2012    22      
4/8/2012    21      
4/9/2012    20      
4/10/2012   21      
4/11/2012   21      
4/12/2012   22      
4/13/2012   20      

The output I am expecting is as given below:            

START_DT    END_DT          VALUE
----------------------------------  
4/5/2012    4/7/2012    20  
4/7/2012    4/8/2012    22  
4/8/2012    4/9/2012    21  
4/9/2012    4/10/2012   20  
4/10/2012   4/12/2012   21  
4/12/2012   4/13/2012   22  
4/13/2012   null        20 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T12:41:48.007

[在这种情况下，滞后和领先](http://www.oracle-base.com/articles/misc/lag-lead-analytic-functions.php)是你的朋友

```
select cob start_dt
,      lead(cob) over (order by cob) end_dt
,      value
from
(
    select cob
    ,      value
    ,      lag(value) over (order by cob) prev_value
    from   tmp
)
where prev_value is null
or    value <> prev_value 
```

编辑：固定查询:)

由 Rob van Wijk 编辑：这是查询有效的一些证据：

```
SQL> create table mytable(cob,value)
  2  as
  3  select date '2012-04-05', 20 from dual union all
  4  select date '2012-04-06', 20 from dual union all
  5  select date '2012-04-07', 22 from dual union all
  6  select date '2012-04-08', 21 from dual union all
  7  select date '2012-04-09', 20 from dual union all
  8  select date '2012-04-10', 21 from dual union all
  9  select date '2012-04-11', 21 from dual union all
 10  select date '2012-04-12', 22 from dual union all
 11  select date '2012-04-13', 20 from dual
 12  /

Table created.

SQL> select cob start_dt
  2  ,      lead(cob) over (order by cob) end_dt
  3  ,      value
  4  from
  5  (   select cob
  6      ,      value
  7      ,      lag(value) over (order by cob) prev_value
  8      from   mytable
  9  )
 10  where prev_value is null
 11  or    value <> prev_value
 12  /

START_DT            END_DT                   VALUE
------------------- ------------------- ----------
05-04-2012 00:00:00 07-04-2012 00:00:00         20
07-04-2012 00:00:00 08-04-2012 00:00:00         22
08-04-2012 00:00:00 09-04-2012 00:00:00         21
09-04-2012 00:00:00 10-04-2012 00:00:00         20
10-04-2012 00:00:00 12-04-2012 00:00:00         21
12-04-2012 00:00:00 13-04-2012 00:00:00         22
13-04-2012 00:00:00                             20

7 rows selected. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:14:56.370

在伪代码中，它可以通过以下方式完成：

```
startDate = min(COB) from table
actualDate = min(COB) from table
lastDate = max(COB) from table

lastValue = value from actualDate

while actualDate <= lastDate
  actualValue = value from actualDate

  if actualValue <> lastValue
    insert in temptable startdate, actualdate, actualValue
    startdate = actualdate

  actualdate = actualdate + 1 day

insert in temptable startdate, null, actualValue

select * from temptable 
```

# spring - spring-security - 我在哪里可以找到使用时注册的所有安全过滤器的列表 元素？

> ID：10140515
> 
> 赞同：22
> 
> 时间：2012-04-13T12:08:17.090
> 
> 标签：spring, spring-security, spring-3

当我们`<http>`在 xml 文件中使用该元素时，注册了一组默认过滤器。[这](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#d0e3274)提到了过滤器的顺序（无论我们选择应用哪个），在此之上，它提到：

```
<bean id="filterChainProxy" class="org.springframework.security.web.FilterChainProxy">
  <constructor-arg>
    <list>
      <sec:filter-chain pattern="/restful/**" filters="
           securityContextPersistenceFilterWithASCFalse,
           basicAuthenticationFilter,
           exceptionTranslationFilter,
           filterSecurityInterceptor" />
      <sec:filter-chain pattern="/**" filters="
           securityContextPersistenceFilterWithASCTrue,
           formLoginFilter,
           exceptionTranslationFilter,
           filterSecurityInterceptor" />
    </list>
  </constructor-arg>
</bean> 
```

如果上面是默认过滤器列表，那么在调试过程中，我发现它`RequestCacheAwareFilter`也被调用了。这个过滤器是从哪里调用的，它在过滤器链中的位置是什么？在什么条件下`AnonymousAuthenticationFilter`配置到链中？

为我配置的默认过滤器链是什么？

**编辑**：我有 applicationContext.xml 和 springSecurity.xml。以下是我的 applicationContext.xml ：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context" xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop.xsd">

    <context:annotation-config />
    <context:spring-configured />

    <!-- Make sure that the part of the file until "End of beans" is identical
         to bean definitions in applicationContext.xml of the main application. -->

    <bean id="adminService" class="org.daud.admin.server.AdminServiceImpl" />
    <bean id="feedbackService" class="org.daud.feedback.server.FeedbackServiceImpl" />
    <bean id="guideService" class="org.daud.guider.server.GuiderServiceImpl" />
    <bean id="messageService" class="org.daud.messages.server.MessageServiceImpl" />
    <bean id="wsService" class="org.daud.guider.server.WSServiceImpl" />

    <bean id="jabxUtil" class="org.daud.common.server.services.JAXBUtil" />
    <bean id="serviceAdvisor" class="org.daud.common.server.ServiceAdvisor" />

    <bean id="userPreferences" class="org.daud.preferences.server.UserPreferencesServiceImpl" />

    <bean id="dynamicClientFactory" class="org.apache.cxf.jaxws.endpoint.dynamic.JaxWsDynamicClientFactory" factory-method="newInstance" />

    <!-- End of beans. -->

    <!-- For testing. -->

    <bean id="guiderClientService" class="org.daud.guider.server.GuiderClientServiceImpl" />

    <bean id="entityManager" class="com.daud.jpa.DBUtil" factory-method="createEntityManager" lazy-init="true">
        <constructor-arg value="bb-test" />
    </bean>

    <bean id="testUtil" class="com.daud.jpa.JPATestUtil" lazy-init="true">
        <constructor-arg ref="entityManager" />
        <constructor-arg value="org.daud" />
        <constructor-arg value="fixtures" />
    </bean>

</beans> 
```

这是我的 springSecurity.xml

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/security
        http://www.springframework.org/schema/security/spring-security.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop.xsd">

    <aop:aspectj-autoproxy proxy-target-class="true" />
    <beans:bean class="com.gwt.ss.GwtExceptionTranslator" />

    <global-method-security secured-annotations="enabled" access-decision-manager-ref="methodSecurityAccessDecisionManager"/>
    <http use-expressions="true" auto-config="false" disable-url-rewriting="true" access-decision-manager-ref="urlSecurityAccessDecisionManager"> 
        <intercept-url pattern="/favicon.ico" filters="none" />
        <intercept-url pattern="/login.jsp" filters="none" />

        <!-- Allow access only to admins and superadmins for the following 2 url patterns -->
        <intercept-url pattern="/do/admin/*" access="hasAdminStatus(3,4)" />
        <intercept-url pattern="/admin/*" access="hasAdminStatus(3,4)" />

        <intercept-url pattern="/**/*.html" access="isAuthenticated()" /> <!-- access="isAuthenticated()"-->
        <intercept-url pattern="/do/**" access="isAuthenticated()" />
        <intercept-url pattern="/**" access="isAuthenticated()" />
        <custom-filter after="FILTER_SECURITY_INTERCEPTOR" ref="switchUserProcessingFilter"/>

        <form-login login-page="/login" login-processing-url="/do/login" authentication-failure-url="/login?authfailed=true" authentication-success-handler-ref="myAuthenticationSuccessHandler"/>

        <!-- Using success-handler-ref instead of logout-success-url for asynchronous logout. -->
        <logout invalidate-session="true" success-handler-ref="logoutSuccessHandler" logout-url="/do/logout" />
    </http>

    <beans:bean id="urlSecurityAccessDecisionManager" class="org.springframework.security.access.vote.AffirmativeBased">
        <beans:property name="decisionVoters">
            <beans:list>
                <beans:bean class="org.springframework.security.web.access.expression.WebExpressionVoter">
                    <beans:property name="expressionHandler" ref="myWebSecurityExpressionHandler"/>
                </beans:bean>
            </beans:list>
        </beans:property>
    </beans:bean>
    <beans:bean id="myWebSecurityExpressionHandler" class="org.daud.common.server.security.MyWebSecurityExpressionHandler"/>
    <beans:bean id="myWebSecurityExpressionRoot" class="org.daud.common.server.security.MyWebSecurityExpressionRoot" scope="prototype"/>
    <!-- For asynchronous login -->

    <beans:bean id="methodSecurityAccessDecisionManager"
        class="org.springframework.security.access.vote.AffirmativeBased">
        <beans:property name="decisionVoters">
            <beans:list>
                <beans:bean class="org.springframework.security.access.vote.RoleVoter" p:rolePrefix="" />
                <beans:bean class="org.springframework.security.access.vote.AuthenticatedVoter" />
                <beans:bean class="org.daud.common.server.security.AllowPrivilegedRolesVoter">
                    <beans:property name="privilegedRoleTypes">
                        <beans:set>
                            <beans:value>ROOT</beans:value>
                        </beans:set>
                    </beans:property>
                </beans:bean>
            </beans:list>
        </beans:property>
    </beans:bean>

    <beans:bean class="com.gwt.ss.GwtUsernamePasswordAuthority">
        <beans:property name="authenticationManager" ref="authenticationManager" />
    </beans:bean>
    <beans:bean id="myAuthenticationSuccessHandler" class="org.daud.common.server.security.myAuthenticationSuccessHandler">
        <!-- If redirection after logging in is to URLs containing these strings, the redirection will instead be to '/' -->
        <beans:property name="partialURLsRequiringRedirection">
            <beans:list>
                <beans:value>/do/</beans:value>
                <beans:value>/exitUser</beans:value>
            </beans:list>
        </beans:property>
    </beans:bean>
    <beans:bean id="userSwitchSuccessHandler" class="org.daud.common.server.security.myUserSwitchSuccessHandler"/>
    <beans:bean id="userServices" class="org.daud.common.server.security.myUserServices"/>

    <beans:bean id="switchUserProcessingFilter" class="org.springframework.security.web.authentication.switchuser.SwitchUserFilter">
        <beans:property name="userDetailsService" ref="userServices" />
        <beans:property name="switchUserUrl" value="/admin/switchUser" />
        <beans:property name="exitUserUrl" value="/admin/exitUser" />
        <beans:property name="successHandler" ref="userSwitchSuccessHandler"></beans:property>
    </beans:bean>

    <!-- For asynchronous logout -->

    <beans:bean id="logoutSuccessHandler" class="com.gwt.ss.GwtLogoutSuccessHandler" p:logoutSuccessUrl="/login" />

    <beans:bean id="myAuthenticationProvider" class="org.daud.common.server.security.myAuthenticationProvider" />
    <authentication-manager alias="authenticationManager">
        <authentication-provider ref="myAuthenticationProvider" />
    </authentication-manager>

</beans:beans> 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-13T15:22:51.233

如果您打开调试日志记录，`org.springframework.security.web.FilterChainProxy`您将看到，对于每个请求，它通过的每个过滤器。

例如（我也在使用 Spring Security OAuth）。

```
11:18:39.123 FilterChainProxy - /user/login at position 1 of 17 in additional filter chain; firing Filter: 'BasicUserApprovalFilter'
11:18:39.123 FilterChainProxy - /user/login at position 2 of 17 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
11:18:39.124 FilterChainProxy - /user/login at position 3 of 17 in additional filter chain; firing Filter: 'LogoutFilter'
11:18:39.124 FilterChainProxy - /user/login at position 4 of 17 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
11:18:39.124 FilterChainProxy - /user/login at position 5 of 17 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
11:18:39.124 FilterChainProxy - /user/login at position 6 of 17 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
11:18:39.124 FilterChainProxy - /user/login at position 7 of 17 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
11:18:39.124 FilterChainProxy - /user/login at position 8 of 17 in additional filter chain; firing Filter: 'RememberMeAuthenticationFilter'
11:18:39.125 FilterChainProxy - /user/login at position 9 of 17 in additional filter chain; firing Filter: 'ForgotPasswordAuthenticationFilter'
11:18:39.125 FilterChainProxy - /user/login at position 10 of 17 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
11:18:39.125 FilterChainProxy - /user/login at position 11 of 17 in additional filter chain; firing Filter: 'SessionManagementFilter'
11:18:39.125 FilterChainProxy - /user/login at position 12 of 17 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
11:18:39.125 FilterChainProxy - /user/login at position 13 of 17 in additional filter chain; firing Filter: 'OAuth2ExceptionHandlerFilter'
11:18:39.125 FilterChainProxy - /user/login at position 14 of 17 in additional filter chain; firing Filter: 'VerificationCodeFilter'
11:18:39.125 FilterChainProxy - /user/login at position 15 of 17 in additional filter chain; firing Filter: 'OAuth2AuthorizationFilter'
11:18:39.125 FilterChainProxy - /user/login at position 16 of 17 in additional filter chain; firing Filter: 'OAuth2ProtectedResourceFilter'
11:18:39.125 FilterChainProxy - /user/login at position 17 of 17 in additional filter chain; firing Filter: 'FilterSecurityInterceptor' 
```

如果您想以编程方式获取过滤器，您可以注入`FilterChainProxy`并获取`filterChainMap`的值。

例如：

```
@Autowired var filterChainProxy: FilterChainProxy = _
//...
val filterChains = filterChainProxy.getFilterChainMap.values 
```

如果您*只想*查看添加的过滤器，`<http>`那么您应该查看`HttpSecurityBeanDefinitionParser`.

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-04-13T23:18:09.887

您可以在 Spring Security 3.1 中做的另一件事是添加

```
<sec:debug /> 
```

或者

`@EnableWebSecurity(debug = true)`

到您的应用程序上下文。这添加了一个额外的过滤器，它将（除其他外）报告将应用于每个请求的安全过滤器列表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T12:43:19.427

几乎完整的 Spring Security 过滤器*类型列表* [在这里](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#filter-stack)[`GenericFilterBean`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/filter/GenericFilterBean.html)，尽管您可以在 SEC 中显示 all的子类并阅读[Spring Security 参考手册的第 8-13 章](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#security-filter-chain)，因为例如，您可以选择少数[`AbstractPreAuthenticatedProcessingFilter`](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/preauth/AbstractPreAuthenticatedProcessingFilter.html)实现之一（和通过扩展现有过滤器或`GenericFilterBean`) 添加您自己的。

您在此处使用的示例`FilterChainProxy`通过[过滤器链](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/appendix-namespace.html#nsa-filter-chain)元素使用 bean 配置，并且**不是**默认链 - 您必须明确定义自己的链才能对请求应用过滤器。

* * *

另一方面，您正在询问`<http>`element: 它具有执行以下操作的[`auto-config`属性](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/ns-config.html#ns-auto-config)：

```
 <http>
    <form-login />
    <http-basic />
    <logout />
  </http> 
```

分别*设置表单登录、基本认证和注销处理服务*。

* * *

`RequestCacheAwareFilter`之所以调用它，是因为它可能包含在您的应用程序的过滤器链中 - 您的 context.xml 在这里会很有帮助。

`AnonymousAuthenticationFilter`如果您通过`<sec:filter-chain>`元素添加 bean 并使用给定的 id 配置 bean（通常它的类名以小写字母 ie 开头`anonymousAuthenticationFilter`），则（和任何其他过滤器）将被添加到链中。例如：

```
<bean id="filterChainProxy" class="org.springframework.security.web.FilterChainProxy">
  <constructor-arg>
    <list>
      <sec:filter-chain pattern="/anonym/**" filters="
           anonymousAuthenticationFilter" />
      <sec:filter-chain pattern="/**" filters="none" />
    </list>
  </constructor-arg>
</bean>

<bean id="anonymousAuthenticationFilter"
    class="org.springframework.security.web.authentication.AnonymousAuthenticationFilter">
  <property name="key" value="foobar"/>
  <property name="userAttribute" value="anonymousUser,ROLE_ANONYMOUS"/>
</bean>

<bean id="authenticationManager"
     class="org.springframework.security.authentication.ProviderManager">
  <property name="providers">
    <list>
      <ref local="anonymousAuthenticationProvider"/>
    </list>
  </property>
</bean>

<bean id="anonymousAuthenticationProvider"
    class="org.springframework.security.authentication.AnonymousAuthenticationProvider">
  <property name="key" value="foobar"/>
</bean> 
```

# php - MySQL 命令在本地工作，但在上传到 TuxFamily 时失败

> ID：10140516
> 
> 赞同：0
> 
> 时间：2012-04-13T12:08:19.857
> 
> 标签：php, mysql, mysqli

我正在制作一个可以轻松共享公共 PGP 密钥的网站。该站点在后端使用 PHP 和 MySQL，在前端使用 JavaScript。该站点在 localhost 上运行良好，但我刚刚将其上传到 TuxFamily，但它不起作用。

我无法找出我的查询有什么问题，因为我无法访问 MySQL 或 PHP 生成的任何错误信息。我只能猜测问题是什么，我有一种感觉是查询......

无论如何，这是代码：

index.php： http: [//pastebin.com/TqJryvC2](http://pastebin.com/TqJryvC2)

inc/pgpshare.class.php：[http ://pastebin.com/XXMv2PjK](http://pastebin.com/XXMv2PjK)

PHP 能够正确创建 MySQL 连接，并且除了(index.php:14)之外的所有函数`pgpshare.class.php`似乎都按预期工作。`if($user1key = $pgpshare->GetUser1Key($id))`

请帮我弄清楚为什么会失败。

提前致谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-07T09:42:10.833

您应该使用 $mysqli->error 打印错误，如果这不起作用，您可以随时添加类似的内容：

```
$mysqli = new mysqli($1, $2, $3, $4)or die('Connection error: '.$mysqli->error);
$stmt = $mysqli->prepare($sql)or die('Prepare failed: '.$mysqli->error);
$stmt->bind_params($1, $2)or die('Bind_param failed: '.$stmt->error); 
```

即使 mysqli->error 为空，您也将始终知道哪个函数失败了。并确保您在函数中使用 $stmt->error (在您的情况下为 $query->error) atfer 准备函数。

> $query->bind_param("ssss", $id, $key, $user2key, $ip);

我认为 $id 是一个整数，所以使用“i”：

```
$query->bind_param("isss", $id, $key, $user2key, $ip); 
```

*   [http://php.net/manual/de/mysqli-stmt.bind-param.php](http://php.net/manual/de/mysqli-stmt.bind-param.php)

另外不要忘记通过更改到另一个服务器来更改您的连接数据（主机、用户、pw、db）。

*- 介意*

# java - JUnit：测试某种类型的异常

> ID：10140517
> 
> 赞同：3
> 
> 时间：2012-04-13T12:08:22.503
> 
> 标签：java, unit-testing, exception, junit

我想知道我是否可以测试（使用 JUnit）由异常生成的特定消息被抛出，而不仅仅是“是否”抛出异常。例如，JunitTest.java 代码实际上会通过测试，因为抛出了异常，但如果我还想测试异常生成的字符串是否等于：*“测试异常：整数可能不是负数..”*这可能吗?

**测试异常.java**

```
public class TestException extends Exception {  
    /**
     * @param message informative message about the problem found
     */
    public TestException (String message) {
        super("Test Exception: " + message);
    }
} 
```

**测试.java**

```
public void function(Integer mustBePositive) throws TestException {
    if (mustBePositive < 0) {
        throw new TestException("Integer may not be negative..");
    }
    else {
        mustBePositive = myNum
    }
} 
```

**JunitTest.java**

```
import org.junit.*;

public class JUnitTest {

    @Test(expected = TestException.class)
    public void functionTest() throws TestException {
        function(-1);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T12:14:00.550

注意：我认为[@Matthew 的回答](https://stackoverflow.com/a/10146515/829571)更好。

您可以使用以下结构 - 它测试是否抛出了正确的异常 ( `TestException.class`)**以及**消息是否符合预期。

```
@Test(expected = TestException.class)
public void test_function_negative() {
    try {
        function(-5);
    } catch (TestException ex) {
        assertEquals("Integer may not be negative..", ex.getMessage());
        throw ex;
    }
} 
```

**编辑**
为什么我重新抛出异常（在评论之后）：下面的第一个测试通过，而第二个没有。因此，它增加了额外的验证层。现在，如果我在下面的代码中发现了 ExceptionB，那么两个测试都会失败。

```
@Test
public void test1() throws ExceptionB {
    try {
        throw new ExceptionA();
    } catch (ExceptionA e) {
        assertEquals("message", e.getMessage());
    }
}

@Test(expected=ExceptionB.class)
public void test2() throws ExceptionA {
    try {
        throw new ExceptionA();
    } catch (ExceptionA e) {
        assertEquals("message", e.getMessage());
        throw e;
    }
}

public class ExceptionA extends Exception{
    @Override
    public String getMessage() {
        return "message";
    }
}
public class ExceptionB extends ExceptionA{} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-13T18:40:51.750

您可以使用标准的 JUnit [TestRule](http://junit-team.github.com/junit/javadoc/latest/org/junit/rules/TestRule.html) [ExpectedException](http://junit-team.github.com/junit/javadoc/latest/org/junit/rules/ExpectedException.html)。这使您可以测试是否引发了异常，还可以测试伴随异常的消息。例如：

```
public static class HasExpectedException {
  @Rule
  public ExpectedException thrown= ExpectedException.none();

  @Test
  public void throwsNothing() {
    // no exception expected, none thrown: passes.
  }

  @Test
  public void throwsNullPointerException() {
    thrown.expect(NullPointerException.class);
    throw new NullPointerException();
  }

  @Test
  public void throwsNullPointerExceptionWithMessage() {
    thrown.expect(NullPointerException.class);
    thrown.expectMessage("happened?");
    thrown.expectMessage(startsWith("What"));
    throw new NullPointerException("What happened?");
  }
} 
```

`expectMessage()`接受字符串（消息的子字符串）或匹配器，因此您可以进行正则表达式检查或其他任何操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T12:12:14.643

```
assertEquals("Test Exception: Integer may not be negative..", e.getMessage()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T12:24:45.353

其他人已经指出了您可以用来测试它的结构，但我不会测试消息本身，因为这可能非常脆弱。

您应该创建一个自定义异常，以获取所需的所有数据并断言数据存在。如果您真的关心该消息，那么您可以对异常本身单独进行单元测试。

鉴于你的例子：

```
public void function(Integer mustBePositive) throws TestException {
    if (mustBePositive < 0) {
        throw new TestException("Integer may not be negative..");
    }
    else {
        mustBePositive = myNum
    } 
```

你可以抛出一个 NegativeNumberException。如果您真的想知道数字是多少，可以修改代码以将其作为参数：

```
public void function(Integer mustBePositive) throws TestException {
    if (mustBePositive < 0) {
        throw new NegativeNumberException(mustBePositive);
    }
    else {
        mustBePositive = myNum
    } 
```

然后在你的测试中：

```
 @Test(expected = NegativeNumberException.class)
 public void functionTest() throws TestException {
    try {
        function(-1);
    } catch (NegativeNumberException nne) {
        assertThat(nne.getNumber(), equalTo(-1));
    }
 } 
```

您的异常现在可以生成它认为合适的消息，并且对该输出的更改不会影响您的其余测试代码

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T15:54:41.033

[catch-exception](http://code.google.com/p/catch-exception/)是为了支持这种情况：

```
import static com.googlecode.catchexception.CatchException.*;

public void testFunction() throws Exception {
    verifyException(obj).function(-1);
    assertEquals("Integer may not be negative..", 
                 caughtException().getMessage());
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-13T12:14:30.693

我这样做：

```
 @Test
  public void functionTest() throws TestException {
    try {
        function(-1);
        fail("This should have thrown an exception.");
    } catch (TextException e) {
       assertEquals("exception test produced an unexpected message", EXPECTED_TEXT, e.getMessage());
    }
  } 
```

这可能并不优雅，但很容易理解并涵盖了所有基础。免责声明 - 我没有编译它。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-13T12:14:41.427

导入 org.junit。* ;

公共类 JUnitTest {

```
@Test
public void functionTest() throws TestException {
    try {
        function (-1);
        fail("");
    } catch (TestException e) {
        if (!e.getMessage().equals("Integer may not be negative..")) 
          fail("");
    }
} 
```

# java - Clock-pro 缓存 - java 实现

> ID：10140518
> 
> 赞同：0
> 
> 时间：2012-04-13T12:08:22.987
> 
> 标签：java, caching, clock

*大家好。*

我强烈需要在短时间内用 Java 实现 Clock-Pro 缓存算法。但是我只有官方文章：[Clock-Pro：thr Clock Replacement的有效改进](http://www.cse.ohio-state.edu/~fchen/paper/papers/usenix05.pdf)

我很难理解那里描述的算法。也许它只是一般地写的。我也知道它是在 linux 内核中实现的，我认为它比官方文章更难:(

我想它一定是这样的：

```
public class ClockProCache<K,V> 
```

我们可以在哪里放置一个对象，它将正确地用真正的 Clock-Pro 逻辑替换另一个对象。

如果有人可能在这个主题上有一些经验或尝试，请帮助 java 实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T15:24:17.610

这是我的 Python 3 实现，您可以将其用作示例代码。您所指的论文并不完全容易理解。我高清阅读了大约 10 次，并花了很长时间思考，他们真正追求的是什么。我希望这会有所帮助。

[https://bitbucket.org/SamiLehtinen/pyclockpro](https://bitbucket.org/SamiLehtinen/pyclockpro)

PS 学习 LIRS 也是个好主意，CLOCK-Pro 基本上是 LIRS 的近似值。就像基本 CLOCK 是 LRU 近似一样。

# google-app-engine - DatastoreService 批量删除。如果发生异常会发生什么

> ID：10140520
> 
> 赞同：0
> 
> 时间：2012-04-13T12:08:24.050
> 
> 标签：google-app-engine, google-cloud-datastore

我使用 DatastoreService.delete(Key...keys) 对实体键执行批量删除操作。每个实体都是一个根实体，所以操作是在没有事务的情况下执行的。批量大小是硬编码的，删除是逐步执行的。以下每个操作首先执行 key-only get 查询以使用从先前执行的 get 查询中接收到的游标来获取实体键，然后执行批量删除查询。Scheme似乎工作正常，但如果删除查询时出现异常怎么办？

有没有办法获得一些成功删除的实体，或者第一个未删除实体的光标？你能否澄清一下这个操作是如何在低级别的 GAE 中执行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T00:37:01.860

如果发生异常，则某些未定义的实体子集已被删除。目前没有任何方法可以获取已删除的列表。

您最好的选择是再次重试整个批量删除操作。

# c++ - 运行程序时如何捕获文件的输入和输出？

> ID：10140522
> 
> 赞同：1
> 
> 时间：2012-04-13T12:08:27.483
> 
> 标签：c++, linux, input, terminal

我正在使用 c++，我需要一些方法来捕获控制台的输入和输出，就好像我直接通过终端工作一样。

所以假设我有一个可执行的 test.exe 和一个输入文件 input.txt，我想将输入和输出的组合保存到 console.out 我需要做什么终端命令？

我不擅长 linux 命令，即使我尽我所能去谷歌，所以如果你知道你的帮助将不胜感激！

例如，如果输入文件中有：

```
show
ignore
hide 
```

并且，在使用此输入运行我的程序后，输出文件包含在其中：

```
Enter Command: 
/****SHOWING DATA!****/
Enter Command:
/****IGNORING DATA!***/
Enter Command:
/***HIDING DATA!***/ 
```

我想要一个看起来像这样的文件：

```
Enter Command: show
/****SHOWING DATA!****/
Enter Command:ignore
/****IGNORING DATA!***/
Enter Command:hide
/***HIDING DATA!***/ 
```

因此，如果我在没有任何重定向的情况下运行它，这将捕获我在终端中看到的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:13:17.793

该`script`命令可能满足您的需求。它将在发生时记录输入和输出并将其保存到文件中。唯一的问题是它有记录命令行或输入编辑的习惯，因此您可能需要稍微清理一下输出。 [这是](http://myweb.stedwards.edu/laurab/help/scripthelp.html)一个稍微解释一下的链接。

您只需`script`在命令行中键入即可启动该实用程序。然后你会运行你的程序。键入 Control+D (^D) 以告诉`script`实用程序停止录制。输出将在`typescript.out`您开始的目录中命名的文件中。

*问题更改后更新*

基于新问题，我认为您无法轻松完成您的要求。`stdin`只有程序知道它消耗了多少输入。在出现下一个提示之前，没有好的方法可以知道程序在遇到换行符之前读取标准输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:12:27.807

您可以尝试重定向`> console.out`以捕获输出。[脚本](http://unixhelp.ed.ac.uk/CGI/man-cgi?script)命令将捕获整个会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:37:09.137

让您的程序除了输出到屏幕之外，还输出到文件。由于您正在解析用户输入的命令，因此您还应该让它们从变量中访问，也只需输出它们。

```
//PSEUDO-CODE!
std::ofstream fout;
fout.open("output.txt");
std::cout << "Enter Command: ";
fout << "Enter Command: ";
std::cin >> cmd;
fout << cmd << '\n';
//..Output results to file. 
```

# hadoop - 超出 Hadoop 内存限制

> ID：10140523
> 
> 赞同：0
> 
> 时间：2012-04-13T12:08:30.100
> 
> 标签：hadoop, mapreduce

我正在运行 Hadoop 流式作业。此作业失败并出现错误：

```
"TaskTree [pid=13549,tipID=attempt_201202130706_121058_m_000000_0] is running beyond memory-limits. Current usage : 1667149824bytes. Limit : 1610612736bytes. Killing task." 
```

对于此作业，mapred.job.map.memory.mb 设置为 1536。将其设置为有`1536*2 = 3072`帮助，但会导致 1 个映射任务使用 2 个插槽，这是不可取的。

当我在主机上运行此作业时，我发现它使用了 1.07 GB 的峰值内存，远小于 1536 MB。`"ps -o vsz=${pid}"`我使用“top”和每 1 秒使用一次的脚本验证了主机上作业的内存使用情况。

有人可以帮我理解/调试/解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T09:04:59.707

这个问题可能与我在 CDH 版本上发现的这个错误[有关](http://docs.hortonworks.com/HDPDocuments/HDP1/HDP-1.3.0/bk_releasenotes_hdp_1.x/content/ch_relnotes-hdp1.3.0_5_hive.html)：

> 来自 Hive 动态分区查询的 MapReduce 任务被终止。
> 
> 问题：使用Hive脚本动态创建和填充分区表时，TaskTracker日志文件报如下错误：

```
TaskTree [pid=30275,tipID=attempt_201305041854_0350_m_000000_0] is running beyond memory-limits. Current usage : 1619562496bytes. Limit : 1610612736bytes. Killing task. 
```

您必须关闭*mapred-site.xml*中的内存设置：

```
mapred.cluster.map.memory.mb = -1
mapred.cluster.reduce.memory.mb = -1
mapred.job.map.memory.mb = -1
mapred.job.reduce.memory.mb = -1
mapred.cluster.max.map.memory.mb = -1
mapred.cluster.max.reduce.memory.mb = -1 
```

# php - 是否可以在服务器端截取渲染的 DOM？

> ID：10140529
> 
> 赞同：2
> 
> 时间：2012-04-13T12:09:04.690
> 
> 标签：php, javascript, webpage-screenshot

在我的网络应用程序中，用户可以创建一些保存在我的数据库中的 HTML/CSS 标记。我想为该标记提供一个“缩略图”，例如在概览视图中。

由于缩略图应该在 200x200px 左右，而原始标记的大小应该在 900x900px 左右，我必须找到一种方法来“缩放”该标记：就好像我在 900px 处截取了渲染标记的屏幕截图一样并将其缩小到200px。

有人知道这是否可以使用 JavaScript 或 PHP？或者也许是另一种服务器端语言？我想避免使用任何第三方小程序，例如 ActiveX。

编辑：我猜某种混搭，在客户端截取屏幕截图，然后发送到服务器也可以。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T12:12:48.540

您可以使用[WKHTMLTOPDF](http://code.google.com/p/wkhtmltopdf/)。它还具有保存名为 WKHTMLTOIMAGE 的图像的功能（我认为这是一个不同的发行版，但您可以从同一个链接下载它）。您可以使用`exec()`PHP 作为系统调用来运行它。使用像`xvfb`您这样的虚拟缓冲区可以在服务器上无头运行 WKHTMLTOIMAGE。它是基于 WebKit 的，所以产生的结果非常好......

您可以使用标准 PHP 函数缩放生成的图像，例如这些帖子中所述：

*   [在 php jpg/png/gif 中动态缩放图像](https://stackoverflow.com/questions/1248149/dynamically-scale-images-in-php-jpg-png-gif)
*   [如果图像太小，请使用 PHP 调整图像大小](https://stackoverflow.com/questions/3595661/resize-image-using-php-if-its-too-small)

您可能想查看我对这个问题[HTML2PDF in PHP - convert utility & scripts - examples & demos](https://stackoverflow.com/questions/9910975/pdf2html-in-php-convert-untilities-scripts-examples-demos)的回答，也许它对您也有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:13:53.347

最好的办法是将工作分成两部分：制作屏幕截图，然后将其缩小到 200x200。对于第一部分，您需要一个可以将 HTML 直接渲染为位图文件（可能是 PNG）的命令行工具或库；我暂时不知道有任何消息，但是如果您真的有决心，我敢肯定，如果您知道自己在做什么，那么围绕 webkit 和 libpng 做一个小包装应该不会太难。对于缩放，您可以使用 gd（在大多数 PHP 设置中配置）或 ImageMagick（更强大）。一旦有了这两个，只需编写正确的胶水将它们组合在一起即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:15:05.357

简而言之，没有“简单”的方法可以做到这一点。

然而，这只是[使用 PHP 的网站截图的副本](https://stackoverflow.com/questions/757675/website-screenshots-using-php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T12:17:22.890

如果你想截取*用户看到*的内容，你必须使用一些客户端技术。我认为你应该能够用闪光灯做到这一点。

这个答案可能会对您有所帮助： [Using HTML5/Canvas/JavaScript to take screenshots](https://stackoverflow.com/questions/4912092/using-html5-canvas-javascript-to-take-screenshots/6678156#6678156)

否则，您可能会尝试在服务器端“重新创建”类似的视图，例如使用[WKHTMLTOPDF](http://code.google.com/p/wkhtmltopdf/)（如 Michal 建议的那样）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T12:18:14.700

是的，这是可能的，我什至实现了一个使用 php 前端作为服务入口点的解决方案。真正的工作由渲染页面的 PhantomJS/Xvfb 处理，它执行的 javascript（对于网络上所有动态生成的内容非常重要）。

基本上，使用 PhantomJS 和 Xvfb 帧缓冲区使这项任务变得非常简单，请在此处查看更多信息：[http](http://code.google.com/p/phantomjs/) ://code.google.com/p/phantomjs/和此处[http://skookum.com/blog/dynamic-screenshots-在服务器上使用 phantomjs/](http://skookum.com/blog/dynamic-screenshots-on-the-server-with-phantomjs/)

干杯

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T12:34:39.607

为此，我使用了[http://www.websupergoo.com/](http://www.websupergoo.com/)的 ABCpdf，看起来效果不错，但它是一个商业产品，尽管它带有免费试用期。我不隶属于这家公司。

# c# - 从 C# WinService 迁移到 WinForms - 删除表单

> ID：10140535
> 
> 赞同：0
> 
> 时间：2012-04-13T12:09:32.977
> 
> 标签：c#, winforms, service, process

我创建了一个 WinService，不幸的是 Win7（和 Vista）不支持来自服务的屏幕捕获。我将把一个程序改写成不同于 WinService 的东西，没有形式的东西..

**你会建议什么？**

*   控制台应用程序有一个控制台——我不需要任何控制台。
*   WinForms 应用程序有一个表单 - 我不需要任何表单。

**是否可以完全从 winforms 应用程序中删除表单？**我不想隐藏进程或任何东西，但我希望它在后台充当侦听器（就像服务一样）。

我将如何关闭它？简单的！“停止服务”的替代方案应该是任务管理器中的“结束任务”。

*   没有身体形态，没有焦点是关键条件。

编辑：

感谢您的链接！所以我完全删除**了 form.cs**，并对**program.cs**进行了以下更改：

```
static class Program
{
    static Thread workerThread;

    [STAThread]
    static void Main()
    {
        //Application.EnableVisualStyles();
        //Application.SetCompatibleTextRenderingDefault(false);
        //Application.Run(new Form1());

        load();
        workerThread.Start();
    }

    public static void load()
    {
        workerThread = new Thread(DoWork);
        workerThread.SetApartmentState(ApartmentState.STA);
    }

    static void DoWork()
    {
        while (true)
        {
            string directory = (@"C:\10\new\"); string name = (".bmp");
            string filename = String.Format("{0:hh-mm-ss}{1}", DateTime.Now, name);
            string path = Path.Combine(directory, filename);

            Bitmap bmp = new Bitmap(@"C:\10\1.bmp");
            bmp.Save(path);
            bmp.Dispose();
            Thread.Sleep(1100);
        }
    } 
```

我需要做一些其他的改变还是没关系？我不希望我的应用程序窃取焦点.. 必须存在一个过程。

*   是“应用程序。运行（）；” 需要吗？
*   这个应用程序有图标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T13:03:33.557

您可以创建一个控制台应用程序并将其更改为 VS 中的 Windows 窗体。这样就不会有任何控制台，只有任务管理器中的进程，但与桌面的交互不会受到限制。

# iphone - 在 UITableview 上显示位置

> ID：10140536
> 
> 赞同：-4
> 
> 时间：2012-04-13T12:09:55.047
> 
> 标签：iphone, ios, xcode, uitableview

![在此处输入图像描述](../Images/d60321aee2df3da66d9fb0a05ffcd863.png)我想在 中显示位置`UITableView`。在这里我取一个`UITextField`和`UITableView`。现在我想根据在文本字段中键入的关键字在表格视图中显示位置名称。有人知道该怎么做吗？请朋友们帮帮我。表格视图应该显示建议的地点，因为有时用户可能会拼错城市名称，或者不同国家/地区可能有相同的城市名称。

根据上图，您可以了解我到底需要什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T13:39:52.180

你想要的是[地理编码](https://developers.google.com/maps/documentation/geocoding/)。您可以相当轻松地将对 Google 地理编码 API 的调用集成到您的应用程序中 - 只需从 UITextField 获取用户输入，将其发送到 Google 请求，然后解析您返回的数据以填充 UITableView 的数据源。如果有多个地方可以匹配您的查询，Google 甚至会在回复中提供多个建议。

# java - 将xml作为字符串加载并在jsp和javascript中使用

> ID：10140537
> 
> 赞同：0
> 
> 时间：2012-04-13T12:09:59.447
> 
> 标签：java, javascript, xml, dom, msxml

我有下面的代码。语句 1 加载一个平均大小 (~300-400KB) 的 xml 文件并将内容存储到一个字符串变量 (xmlContent) 中。现在语句 2 会将 jsp 变量 xmlContent 的值放到 javascript 变量 xmlText 中。语句 3 将尝试在 javascript 中创建一个 XMLDocument 对象（将字符串加载为 xml 文档，以便可以通过 DOM 方法对其进行解析）。

我必须说 xml 文件在其中包含单引号和双引号，并且还包含`&***;`. 现在为什么第三条语句返回 null？有人可以解释吗？

有人可以告诉我一些更好的方法来传输 xml 字符串数据，比如执行一些编码/解码或转义吗？

谢谢。

```
<%
 String xmlContent = FileReader.readFile("/xml/books.xml");
%>
<script type="text/javascript">
 var xmlText = ' <% =xmlContent %> ';
 new DOMParser().parseFromString(xmlText, "text/xml");
 //I know that it will not work in IE
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:53:48.103

如果您的 XML 包含换行符（LF / CRLF），您需要在将其传递给 Javascript 代码之前在 Java 代码中删除它们或对其进行转义。请记住，在 Javascript 方面，这就像输入文字字符串。如果您的 XML 包含换行符，这就像将您的文字字符串分成多行。

更安全的选择是使用反斜杠换行符搜索和替换 XML 中的换行符，以转义 Javascript 中的换行符并有效地提供多行 Javascript 字符串。如果您的 XML 中有任何带有您希望保留的换行符的 CDATA 部分，这也将正常工作。一些代码：

```
xmlContent = xmlContent.replace("\n", "\\\n").replace("\r\n", "\\\r\n"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T13:33:21.953

如果您知道 XML 模式（XSD，并且它不会改变），我建议您使用[JAXB](http://www.oracle.com/technetwork/articles/javase/index-140168.html)。您可以实现一个处理 XML 文件并将 bean 返回给 JSP 的 servlet。

# ruby-on-rails - Firefox 与 Chrome 中重新加载时的复选框状态行为

> ID：10140540
> 
> 赞同：1
> 
> 时间：2012-04-13T12:10:03.070
> 
> 标签：ruby-on-rails, checkbox, browser, refresh

嗨，有人可以告诉我为什么当我刷新我的 Rails 应用程序的页面时，其状态被选中的复选框在 Chrome 中变为未选中，但在 Firefox 中没有。因此，我在 document.ready 函数中未检查所有这些。为什么 Firefox 的行为与 Chrome 不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T13:54:04.533

当您进行页面刷新时，您正在重新加载页面。由于页面最初加载，*用户对页面的更改不会持续存在。*

Firefox 有一个浏览器供应商特定的功能来尝试记住用户的选择。这不是标准的。

对此没有解决办法。在没有实现此功能的浏览器中，您无法获得 Firefox 的非标准行为。标准预期是在页面刷新时丢失所有编辑。

但是，如果您有 javascript 设置第一次加载页面时的状态，请尝试从 window.load 运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T08:56:19.060

尝试在 IE 中使用 autocomplete="off" :)

# android - 我的标签内容没有填满整个空间

> ID：10140542
> 
> 赞同：0
> 
> 时间：2012-04-13T12:10:14.923
> 
> 标签：android, tabs, android-tabhost

在我的活动中，我动态创建了 5 个选项卡。

我试图弄清楚为什么我的加载动画没有填满整个空间。现在它只是选项卡内容顶部的一个小矩形（参见[http://imageshack.us/photo/my-images/594/loadingwf.png/](http://imageshack.us/photo/my-images/594/loadingwf.png/)）。

这是我创建每个选项卡内容的代码：

```
for (int i = 0; i < NewsCategory.values().length; i++) {
    View tabView = createTabView(tabHost.getContext(), NewsCategory.getValueAt(i).getName());

    tabNewslist[i] = new Newslist(this, NewsCategory.getValueAt(i));
    getLayoutInflater().inflate(R.layout.loading_anim, tabHost.getTabContentView(), true);
    tabHost.addTab(tabHost.newTabSpec(NewsCategory.getValueAt(i).getName()).setIndicator(tabView).setContent(R.id.loadingAnim));
} 
```

这是动画的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/loadingAnim"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFFFF"
    android:gravity="center_horizontal"
    android:orientation="horizontal"
    android:padding="5dp" >

    <ProgressBar
        android:id="@+id/progressBar"
        style="?android:attr/progressBarStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:text="@string/loading" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:15:03.820

我认为这部分代码是正确的。您的活动 xml 中有什么？

# ipad - 从电子邮件下载文件时，如何在“另存为”选项中设置我的应用程序名称

> ID：10140549
> 
> 赞同：0
> 
> 时间：2012-04-13T12:10:44.847
> 
> 标签：ipad

当我从电子邮件下载文件时，我会看到“SaveAs”或“OpenWith”选项。它包含各种选项（MSOffice、MSExcel 等）。我想在该列表中显示我的应用程序名称。这可行吗？我们能做到这一点吗？如果是的话，我们该怎么做呢？

我现在可以在“打开方式”中看到我的应用程序名称，还可以在我的 Web 视图中查看文件。如果我想将该文件保存到本地文件夹，我该怎么做。我创建了一个保存按钮，单击该按钮文件名将显示到下一个视图的 tableView 中。当我单击该文件名时，它应该打开该文件的本地副本。代码如下

```
-(void)passWebURL:(NSURL *)strURL
{
    NSLog(@"Value passed is....%@",strURL);
    passedURL = strURL;
    NSURLRequest *requestURL = [NSURLRequest requestWithURL:passedURL];
    [objWebView loadRequest:requestURL];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    self.navigationController.navigationBar.hidden = YES;

    //Accept url and display page
    [self passWebURL:passedURL];
    NSURLRequest *requestURL = [NSURLRequest requestWithURL:passedURL];
    [objWebView loadRequest:requestURL];
}

//Display File List on button click
-(IBAction)btnSaveDocument
{
    FileListView *objFileList = [[FileListView alloc] initWithNibName:@"FileListView" bundle:nil];
    [self.navigationController pushViewController:objFileList animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:56:23.480

您需要注册程序可以处理的文件类型。

[注册您的应用支持的文件类型](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/RegisteringtheFileTypesYourAppSupports.html#//apple_ref/doc/uid/TP40010411-SW1)

# android - 以数据库反向方式插入数据

> ID：10140552
> 
> 赞同：0
> 
> 时间：2012-04-13T12:10:56.467
> 
> 标签：android, sqlite

我有一个连接到数据库的注册表单。当我插入记录时，最近的记录在表中排在第一位。我希望最近的记录出现在最后输入的记录下方。你能帮我吗？

```
long flag = 0;
int id = 1;
SQLiteDatabase db = helper.getWritableDatabase();
Cursor cursor = db.query("tbl_countries", new String[]{"count(*) phone"}, null, null, null, null, null);
while(cursor.moveToNext())
{
    int idFromDatabase = cursor.getInt(cursor.getColumnIndex("phone"));
    if(idFromDatabase != 0)
    {
        id = 1 + idFromDatabase;
    }
}
ContentValues values = new ContentValues();
//values.put("ID", id);
values.put("phone", Long.parseLong((phone.getText().toString())));
values.put("fname", fnametxt.getText().toString().trim());
values.put("lname", lnametxt.getText().toString().trim());
if(male.isChecked())
{
    values.put("gender","male");
}
else
values.put("gender", "Female");
values.put("email", emailtxt.getText().toString());
values.put("mainpin",pin1.getText().toString()+pin2.getText().toString()+pin3.getText().toString()+pin4.getText().toString());                  
flag = db.insert("tbl_countries", null, values);
if(flag != -1)
{
    Toast toast = Toast.makeText(getApplicationContext(), "You have successful inserted this record into database! "+flag, Toast.LENGTH_LONG); 
    toast.show();
    db.close();
    return;
}
else
{
    Toast toast = Toast.makeText(getApplicationContext(), "An error occured when insert this record into database!", Toast.LENGTH_LONG); 
    toast.show();
    db.close();
    return;
} 
```

如果我的代码有任何问题，请建议我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:13:49.227

您的问题不在于记录的插入，而在于检索。

严格来说，数据库中的数据没有顺序。它是按未排序的方式检索的，或者根据您指定的任何标准进行排序。

在这种情况下，您希望按日期字段或可能的 ID 进行排序，以获得您想要的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:22:04.727

SQL 标准不保证检索时先前插入的记录的任何特定顺序。这意味着即使您可能会以可预测的顺序查看这些记录，但这可能随时更改，而不会发出任何警告。有问题的 DBMS 可能会决定在某个时候对其存储进行碎片整理，并在此过程中重新排序记录 - 这是完全合法的行为，您必须为此做好准备。`ORDER BY`以可靠一致的顺序获取记录的唯一方法是在检索查询中使用（惊喜！）子句。表中的数据没有定义的排序，只有在您检索它时才会排序。

如果您想按插入顺序显示数据，请考虑使用自动增量列并按此顺序排列（升序以先列出最旧的，或降序以先列出最新的）。

**TL;DR：插入顺序在 SQL 中没有意义；如果您希望对数据进行排序，请使用`SELECT ... ORDER BY`.**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:29:45.647

你能做的是在你的注册表中给出 id （自动增量）列，当你查询你的数据时，通过 id 列的升序获取它。

# c++ - Crypto++ 无法解释的崩溃

> ID：10140553
> 
> 赞同：1
> 
> 时间：2012-04-13T12:10:56.483
> 
> 标签：c++, visual-c++, cryptography, crypto++

我需要在我的项目中使用密码学（visual c++ 2008 sp1，带有几个 dll 的 exe，使用一些第三方库）。我选择了 Crypto++ 库。我将它用作静态库。首先，我在测试控制台应用程序中测试了我需要的所有功能，一切正常。

然后我开始将这个功能集成到项目中。

它在许多 Crypto++ 函数调用上崩溃，包括像这样非常简单的函数调用：

```
CryptoPP::FileSource file("publicKeySign.der", true); 
```

在调用这行代码期间，应用程序崩溃：

```
Unhandled exception at 0x00c56619 in Starter.exe: 0xC0000005: Access violation reading location 0x00006f70. 
```

这是我的调用堆栈：

```
Starter.exe!CryptoPP::member_ptr<CryptoPP::AlgorithmParametersBase>::reset(CryptoPP::AlgorithmParametersBase * p=0x00000000)  Line 50 + 0x9 bytes   C++
Starter.exe!CryptoPP::AlgorithmParameters::operator()<char const *>(const char * name=0x00d8ec04, const char * const & value=0x00d88a44, bool throwIfNotUsed=true)  Line 356    C++
Starter.exe!CryptoPP::MakeParameters<char const *>(const char * name=0x00d8ec04, const char * const & value=0x00d88a44, bool throwIfNotUsed=true)  Line 388 + 0x2d bytes    C++
Starter.exe!CryptoPP::FileSource::FileSource(const char * filename=0x00d88a44, bool pumpAll=true, CryptoPP::BufferedTransformation * attachment=0x00000000, bool binary=true)  Line 65 + 0x6d bytes C++
Starter.exe!PDD::PDDApp2::Open()  Line 237  C++
Starter.exe!WinMain(HINSTANCE__ * __formal=0x00c50000, HINSTANCE__ * __formal=0x00c50000, HINSTANCE__ * __formal=0x00c50000, HINSTANCE__ * __formal=0x00c50000)  Line 387 + 0xb bytes   C++
Starter.exe!__tmainCRTStartup()  Line 578 + 0x1d bytes  C
kernel32.dll!@BaseThreadInitThunk@12()  + 0x12 bytes    
ntdll.dll!___RtlUserThreadStart@8()  + 0x27 bytes   
ntdll.dll!__RtlUserThreadStart@8()  + 0x1b bytes 
```

我的项目和 Crypto++ 都使用多线程 DLL 运行时库。

我尝试将 Crypto++ 项目选项更改为与我的项目选项相同，但这没有帮助（在某些更改后应用程序因另一个调用堆栈而崩溃）。

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T18:41:15.353

当我深入研究cryptopp时，我发现它做了一些隐藏的验证。其中之一在 fipstest.cpp 中。但是库中的 try/catch 隐藏了实际的异常消息。

当我收到正确的消息时，我发现传递的参数对于特定算法 (RSA) 来说太短了。这些 64 位只是取自网络上的示例。当我将密钥更改为 1024 时，问题就消失了。

干杯；）

```
AutoSeededRandomPool prng;
RSA::PrivateKey privKey;
//privKey.GenerateRandomWithKeySize(prng, 64);  <- throws exception
privKey.GenerateRandomWithKeySize(prng, 1024); 
```

# api - Facebook 默认返回多少对象？

> ID：10140557
> 
> 赞同：1
> 
> 时间：2012-04-13T12:11:04.923
> 
> 标签：api, facebook-graph-api

如果我进行查询`https://graph.facebook.com/[post_id]/comments`，facebook 会在其数据数组中返回多少条评论？

`feed`同样，`likes`和其他“变量”连接的默认编号是多少？

我在任何地方都找不到这方面的文档，有时我看到限制为 25，有时我看到限制为 5000（等等）。如果有人能指出我在这种情况下的文档，我会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T15:07:49.713

如果您`https://graph.facebook.com/[post_id]/comments`无限制地调用，默认情况下将返回最多 25 个结果，并在数组底部进行分页。

您可以使用 limit 覆盖默认值，因为 & until 参数

```
https://graph.facebook.com/[post_id]/comments?limit=250
// returns 250 results

https://graph.facebook.com/[post_id]/comments?limit=500&since=2+years+ago&until=now
// returns upto 500 posts, ranging back to 2 years ago, until right now.

https://graph.facebook.com/[post_id]/comments?since=last+week&until=yesterday
// returns upto 25 posts ranging from last week, until yesterday. 
```

参考[https://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

# python - 像 GLADE 这样记录最好的 Python 友好 GUI 构建器是什么？

> ID：10140560
> 
> 赞同：4
> 
> 时间：2012-04-13T12:11:12.770
> 
> 标签：python, user-interface, pyqt, pygtk, glade

我进入了 python gui 编程，我想知道我现在正在使用的最好的文档化 GUI 构建器，比如 GLADE，但是我很难找到一些好的教程或文档，主要是在偶数处理领域。我还想了解什么是最好的/记录在案的 GUI 框架。感谢任何会回答的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T12:12:43.720

林间空地。您可以将 Glade GUI 与 Python 一起使用，文档就在那里。Glade 只是 GTK 的编辑器，因此您可以查看[pyGTK 文档](http://www.pygtk.org/reference.html)以获取信息。

事实上，我什至有一个[视频教程](https://www.youtube.com/watch?v=5KrgCrPp3w4)。现在有点老了，但仍然应该给出这个想法。

至于替代品，另一个大的是[QT 和 QT Designer](https://qt.nokia.com/products/developer-tools/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T12:15:11.317

[qt](http://qt.nokia.com/learning)。这是非常有据可查的。互联网上有很多信息。它里面还有很多东西，而不仅仅是 GUI。

它有 Python 绑定：[PyQt](http://www.riverbankcomputing.co.uk/software/pyqt/intro)

那里有很多教程。这里是其中的一些：

*   [http://qt-project.org/doc/qt-4.8/tutorials.html](http://qt-project.org/doc/qt-4.8/tutorials.html)
*   [http://zetcode.com/gui/pyqt4/](http://zetcode.com/gui/pyqt4/)
*   [http://diotavelli.net/PyQtWiki/Tutorials](http://diotavelli.net/PyQtWiki/Tutorials)
*   [http://lionel.textmalaysia.com/a-simple-tutorial-on-gui-programming-using-qt-designer-with-pyqt4.html](http://lionel.textmalaysia.com/a-simple-tutorial-on-gui-programming-using-qt-designer-with-pyqt4.html)
*   [http://www.youtube.com/watch?v=9E2KOphwZMg](http://www.youtube.com/watch?v=9E2KOphwZMg)
*   [http://www.youtube.com/watch?v=LYF0spYkXUs](http://www.youtube.com/watch?v=LYF0spYkXUs)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T13:42:00.463

没有“最佳/记录在案的 GUI 框架”。有许多 GUI 工具包，它们或多或少都同样强大。Tkinter、PyQT、wxPython……各有优缺点。选择其中任何一个并开始学习。

我推荐 Tkinter 来学习，主要是因为你可能已经拥有它。一旦您了解了基于事件的编程的基础知识（并且 Tkinter 提供了一种相当温和的学习方式），您将能够更好地判断哪些可用工具包符合您对“最佳”的定义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T19:05:11.733

你会在这里找到一些非常好的和新的视频教程：http: [//vimeo.com/25185245](http://vimeo.com/25185245)
这里由 gnome 的成员 Daniel G. Siegel 制作，并教你如何制作一些小的图形应用程序。
如果我没记错的话，他首先解释了如何在没有空地的情况下创建 gui，然后在需要更全面的 ui 时介绍它。

# android - 如何防止 Android 中可怕的 KSOAP2 连接超时

> ID：10140572
> 
> 赞同：3
> 
> 时间：2012-04-13T12:12:11.973
> 
> 标签：android, web-services, android-ksoap2, connection-timeout

当通过 Android 从我的 Axis2 Web 服务请求数据时，我一直试图防止 KSOAP2 调用超时，但一直无法这样做。

**Web 服务的背景知识。**

我的 Web 服务在 Apache Tomcat 服务器上运行，用于返回站点的实时信息。当我通过浏览器尝试时，它按预期工作，在网站上它也按预期工作。

**问题**

但是，当我尝试在我的 Android 应用程序中使用相同的方法时，有时我会收到以下堆栈跟踪错误。其他时候请求会成功。有时请求会立即超时，有时它会在超时前等待大约一分钟。

**设备**

我已经通过三星 Galaxy SII（平台 2.3.3）和三星 Galaxy SI（平台 2.2.2）使用 WiFi 和使用 3G 进行了尝试，结果相同。但是，通过模拟器（平台 2.2）使用它时它永远不会超时。

**我的代码**

```
String NAMESPACE = "http://service.domain.ie";
String URL = "http://www.myhost.com/axis2/services/RealTime?wsdl";
String METHOD_NAME = "getStationData";
String SOAP_ACTION = "RealTime";

SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
request.addProperty("stationType", getStationType());
request.addProperty("stationApiCode", getApiCode());

SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.setOutputSoapObject(request);

HttpTransportSE androidHttpTransport;

SoapObject response = null;

try {
        androidHttpTransport = new HttpTransportSE(URL,60000); // Tried Setting the Timeout to 1 Minute
        androidHttpTransport.debug = true;
        androidHttpTransport.call(SOAP_ACTION,envelope);
        response = (SoapObject)envelope.bodyIn;
    } catch (IOException e) {
        e.printStackTrace();
    } catch (XmlPullParserException e) {
        e.printStackTrace();
    } 
```

**堆栈跟踪错误**

```
04-13 13:07:18.015: W/System.err(9249): java.net.SocketTimeoutException
04-13 13:07:18.015: W/System.err(9249):     at org.apache.harmony.luni.net.PlainSocketImpl.read(PlainSocketImpl.java:461)
04-13 13:07:18.015: W/System.err(9249):     at org.apache.harmony.luni.net.SocketInputStream.read(SocketInputStream.java:85)
04-13 13:07:18.015: W/System.err(9249):     at org.apache.harmony.luni.net.SocketInputStream.read(SocketInputStream.java:65)
04-13 13:07:18.015: W/System.err(9249):     at java.io.BufferedInputStream.fillbuf(BufferedInputStream.java:140)
04-13 13:07:18.015: W/System.err(9249):     at java.io.BufferedInputStream.read(BufferedInputStream.java:225)
04-13 13:07:18.020: W/System.err(9249):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.readLine(HttpURLConnectionImpl.java:660)
04-13 13:07:18.020: W/System.err(9249):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.readResponseHeaders(HttpURLConnectionImpl.java:690)
04-13 13:07:18.020: W/System.err(9249):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.retrieveResponse(HttpURLConnectionImpl.java:1040)
04-13 13:07:18.020: W/System.err(9249):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:512)
04-13 13:07:18.020: W/System.err(9249):     at org.ksoap2.transport.ServiceConnectionSE.openInputStream(ServiceConnectionSE.java:113)
04-13 13:07:18.020: W/System.err(9249):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:160)
04-13 13:07:18.050: W/System.err(9249):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:95)
04-13 13:07:18.050: W/System.err(9249):     at ie.smartcommuter.models.Station.getRealTimeData(Station.java:123)
04-13 13:07:18.050: W/System.err(9249):     at ie.smartcommuter.controllers.tabcontents.StationRealtimeActivity$1.run(StationRealtimeActivity.java:95)
04-13 13:07:18.050: W/System.err(9249):     at java.lang.Thread.run(Thread.java:1019) 
```

我已将 KSOAP2 从 2.4 更新到 2.5.7 并尝试设置超时限制，但到目前为止我没有成功。所以要回答我的问题：

**有没有其他人遇到过这个问题，如果有，他们是如何解决的？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:06:41.587

当超时开始时，它会抛出 SocketTimeoutException。

您应该在 try-catch 中捕获它并根据需要处理超时

# spring-ldap - Tomcat 上自定义 LdapContextSource 实现的 javax.naming.NotContextException

> ID：10140577
> 
> 赞同：1
> 
> 时间：2012-04-13T12:12:24.110
> 
> 标签：spring-ldap

我正在使用 Spring-ldap 连接池和 contextSource 的自定义实现，以使用 Oracle Internet Directory API 进行连接。这在 Eclipse 上独立测试时有效。但是，当部署在 tomcat 上时，它会因“不是 DirContext 的实例”而失败。如果我使用 Spring 中的 LdapContextSource，它工作正常 [但我的一些操作失败并使用 OID API 的上下文] 感谢任何帮助。下面是配置和代码

```
<!-- LDAP Connection pool configuration -->
<bean id="contextSource"
    class="org.springframework.ldap.pool.factory.PoolingContextSource">
    <property name="contextSource" ref="contextSourceTarget" />
    <property name="dirContextValidator" ref="dirContextValidator" />
    <property name="testOnBorrow" value="false" />
    <property name="testOnReturn" value="false" />
    <property name="testWhileIdle" value="true" />
    <property name="timeBetweenEvictionRunsMillis" value="900000" />
    <property name="minEvictableIdleTimeMillis" value="1800000" />
    <property name="maxActive" value="8" /> 
    <property name="minIdle" value="3" /> 
    <property name="maxIdle" value="8" />
    <property name="maxWait" value="30000" /> 
    <property name="maxTotal" value="-1" /> 
    <property name="whenExhaustedAction" value="0" /> 
</bean>

<bean id="dirContextValidator"
    class="org.springframework.ldap.pool.validation.DefaultDirContextValidator" />
<bean id="contextSourceTarget" class="com.ticketmaster.platform.identity.core.dao.ldap.CustomLdapContextSource">
    <property name="url" value="${ldap.url}" />
    <property name="userDn" value="${ldap.username}" />
    <property name="password" value="${ldap.password}" />
    <property name="dirObjectFactory"
        value="org.springframework.ldap.core.support.DefaultDirObjectFactory" />
    <property name="pooled" value="false" />
</bean>

<bean id="ldapTemplate" class="org.springframework.ldap.core.LdapTemplate">
    <constructor-arg ref="contextSource" /> <!-- connection pool reference -->
</bean>

public class CustomLdapContextSource extends LdapContextSource {

    @Override
    protected DirContext getDirContextInstance(Hashtable environment) throws NamingException {
    String url = (String) environment.get("java.naming.provider.url");
    URL aURL = null;
    InitialLdapContext ctx = null;
    StringTokenizer st = new StringTokenizer(url, "://");
    String protocol = st.nextToken();
    String host = st.nextToken();
    String port = st.nextToken();
    ctx = ConnectionUtil.getDefaultDirCtx(host, port, userDn, password);
    return ctx;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:48:00.527

您可以在日志文件中跟踪“协议”、“主机”、“端口”的值吗？

下面的代码看起来很容易出错，特别是，我看不到“协议”的任何用法

```
String url = (String) environment.get("java.naming.provider.url");
...
StringTokenizer st = new StringTokenizer(url, "://");
String protocol = st.nextToken();
String host = st.nextToken();
String port = st.nextToken();
ctx = ConnectionUtil.getDefaultDirCtx(host, port, userDn, password); 
```

# http - 使用 HTTP PUT 指定文件名的标准方法

> ID：10140579
> 
> 赞同：2
> 
> 时间：2012-04-13T12:12:37.213
> 
> 标签：http

对于 HTTP PUT 请求，文件名是否通常作为请求 URI 的一部分包含在内，例如：

```
http://host/myfilename.txt 
```

还是作为标准标题键/值对包含在内？如果是这样，关键是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T12:17:23.857

如果你期望能够发出`GET /myfilename.txt`，那么它是适当的`PUT /myfilename.txt`。但是，如果服务器要将文件放在不同的资源下，那么您可能应该使用`POST /some/server/resource`并返回`Location`新创建的资源的标头，该标头可用于从中检索文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T12:16:27.073

它不是键值对，而是完整的 URI。这意味着它将完全引导您访问资源。这是标准。[您将通过HTTP RFC](http://www.w3.org/Protocols/rfc2616/rfc2616.html)了解 URI 的表示方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T12:15:25.393

它的标准是使用 URI 告诉处理系统文件应该位于哪里。（所以，你写的方式是正确的。）

# hadoop - 使用 Hector 在 Cassandra 数据上运行 mapreduce

> ID：10140584
> 
> 赞同：2
> 
> 时间：2012-04-13T12:13:03.083
> 
> 标签：hadoop, mapreduce, cassandra, hector

我一直在尝试使用 Java-Client 'HECTOR' 对存储在 Cassandra 中的数据运行简单的 map-reduce 作业。

我已经成功运行了这篇漂亮的博文中解释的 hadoop-wordcount[示例](http://blog.alvazan.com/165/how-to-set-up-the-cassandra-wordcount-example/)。我还阅读了[Hadoop 支持](http://wiki.apache.org/cassandra/HadoopSupport)文章。

但是我想要做的是在实现方面有点不同（wordcount 示例使用一个脚本，其中提到了 mapreduce-site.xml）。我希望有人帮助我了解如何在分布式模式下运行 map-reduce 作业，而不是在 cassandra 数据上从“HECTOR”本地运行。

我的代码在本地模式下成功运行 map-reduce 作业。但我想要的是在分布式模式下运行它们并将结果作为新的 ColumnFamily 写入 cassandra 键空间。

我可能必须在某个地方设置它（如上面提到的博客文章中所述）
`$PATH_TO_HADOOP/conf/mapred-site.xml`
以在分布式模式下运行它，但我不知道在哪里。

这是我的代码

```
public  class test_forum implements Tool {

private String KEYSPACE = "test_forum";
private String COLUMN_FAMILY ="posts";
private String OUTPUT_COLUMN_FAMILY = "output_post_count";
private static String CONF_COLUMN_NAME = "text";

public int run(String[] strings) throws Exception {

    Configuration conf = new Configuration();

    conf.set(CONF_COLUMN_NAME, "text");
    Job job = new Job(conf,"test_forum");

    job.setJarByClass(test_forum.class);
    job.setMapperClass(TokenizerMapper.class);
    job.setReducerClass(ReducerToCassandra.class);

    job.setMapOutputKeyClass(Text.class);
    job.setMapOutputValueClass(IntWritable.class);

    job.setOutputKeyClass(ByteBuffer.class);
    job.setOutputValueClass(List.class);

    job.setOutputFormatClass(ColumnFamilyOutputFormat.class);
    job.setInputFormatClass(ColumnFamilyInputFormat.class);

    System.out.println("Job Set");

    ConfigHelper.setRpcPort(job.getConfiguration(), "9160");
    ConfigHelper.setInitialAddress(job.getConfiguration(), "localhost");
    ConfigHelper.setPartitioner(job.getConfiguration(), "org.apache.cassandra.dht.RandomPartitioner");

    ConfigHelper.setInputColumnFamily(job.getConfiguration(),KEYSPACE,COLUMN_FAMILY);
    ConfigHelper.setOutputColumnFamily(job.getConfiguration(), KEYSPACE, OUTPUT_COLUMN_FAMILY);

    SlicePredicate predicate = new SlicePredicate().setColumn_names(Arrays.asList(ByteBufferUtil.bytes("text")));

    ConfigHelper.setInputSlicePredicate(job.getConfiguration(),predicate);

    System.out.println("running job now..");

    boolean success = job.waitForCompletion(true);

    return success ? 0:1;  //To change body of implemented methods use File | Settings | File Templates.

}

public static class TokenizerMapper extends Mapper<ByteBuffer, SortedMap<ByteBuffer, IColumn>, Text, IntWritable>
{
    private final static IntWritable one = new IntWritable(1);
    private Text word = new Text();
    private ByteBuffer sourceColumn;
    protected void setup(org.apache.hadoop.mapreduce.Mapper.Context context)
    throws IOException, InterruptedException
    {
        sourceColumn = ByteBufferUtil.bytes(context.getConfiguration().get(CONF_COLUMN_NAME));
    }

    public void map(ByteBuffer key, SortedMap<ByteBuffer, IColumn> columns, Context context) throws IOException, InterruptedException
    {

        IColumn column = columns.get(sourceColumn);

        if (column == null)  {
            return;
        }

        String value = ByteBufferUtil.string(column.value());
        System.out.println("read " + key + ":" + value + " from " + context.getInputSplit());

        StringTokenizer itr = new StringTokenizer(value);

        while (itr.hasMoreTokens())
        {
            word.set(itr.nextToken());
            context.write(word, one);
        }
    }

}

    public static class ReducerToCassandra extends Reducer<Text, IntWritable, ByteBuffer, List<Mutation>>
{
    private ByteBuffer outputKey;

    public void reduce(Text word, Iterable<IntWritable> values, Context context) throws IOException, InterruptedException
    {
        int sum = 0;

        byte[] keyBytes = word.getBytes();
        outputKey = ByteBuffer.wrap(Arrays.copyOf(keyBytes, keyBytes.length));

        for (IntWritable val : values)
            sum += val.get();

        System.out.println(word.toString()+" -> "+sum);
        context.write(outputKey, Collections.singletonList(getMutation(word, sum)));

    }

    private static Mutation getMutation(Text word, int sum)
    {
        Column c = new Column();
        c.setName(Arrays.copyOf(word.getBytes(), word.getLength()));
        c.setValue(ByteBufferUtil.bytes(String.valueOf(sum)));
        c.setTimestamp(System.currentTimeMillis());

        Mutation m = new Mutation();
        m.setColumn_or_supercolumn(new ColumnOrSuperColumn());
        m.column_or_supercolumn.setColumn(c);
        System.out.println("Mutating");
        return m;

    }

}

public static void main(String[] args) throws Exception, ClassNotFoundException, InterruptedException {

    System.out.println("Working..!");

    int ret=ToolRunner.run(new Configuration(), new test_forum(), args);

    System.out.println("Done..!");

    System.exit(ret);

} 
```

}

这是我收到的警告：

```
WARN  - JobClient                  - Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
WARN  - JobClient                  - No job jar file set.  User classes may not be found. See JobConf(Class) or JobConf#setJar(String). 
```

但是代码运行成功，执行 map-reduce 任务，但我不知道它在哪里写入数据。

编辑：我没有在 cassandra 中创建 columnFamily 用于输出。因此，它不是写作。所以现在唯一的问题是如何在分布式模式下运行它。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:32:36.813

你用你的班级创建了一个罐子吗？

Hadoop 需要一个 jar 才能在集群上传播您的作业类。如果没有，它会解释“没有作业 jar 文件集”错误，以及为什么不能在分布式模式下运行它。注意使用“hadoop jar ...”命令启动您的工作并添加您的jar依赖项（至少是apache-cassandra！）。提交作业时，您的 cassandra 服务器必须已启动并正在监听 thrift 端口。

顺便说一句，Hadoop 和 Cassandra 不需要 Hector。（`ColumnFamilyInputFormat`和`ColumnFamilyOutputFormat`）现在介绍如何自己读取（和写入）数据到 Cassandra。这就是为什么您必须配置`RpcPort`,`InitialAdress`和`Partionner`（并且您做到了）。

最后注意：`ColumnFamilyOutputFormat`不会创建你的输出列族，它必须已经存在，否则你在写的时候会报错。

希望这可以帮助，

贝努瓦

# asp.net-mvc-3 - htmlHelper.RouteLink 没有生成我想要的 URL

> ID：10140589
> 
> 赞同：0
> 
> 时间：2012-04-13T12:13:23.063
> 
> 标签：asp.net-mvc-3, localization, routing

嗨，我正在尝试利用[这篇精彩的文章](http://www.codeproject.com/Articles/207602/Creating-a-Bilingual-ASP-NET-MVC3-Application-Part)在我的 mvc3 站点中提供本地化。没有区域可以完美运行，但是在我的站点中引入区域我遇到了这个问题：

```
htmlHelper.RouteLink(linkText, globalisedRouteData) 
```

全球化路由数据在哪里：

```
4 Keys: Culture, Area, Controller, Action
4 values: en, soluciones, home, index 
```

没有产生预期的（对我来说）：host/en/soluciones/home/Index 但是：/soluciones/Home?culture=en

让我心碎的是这个？culture=en。为什么没有嵌入 /en/，因为它包含在 globalisedRouteData 中？

在我的 RegisterRoutes 中，我放置了：

```
 const string defautlRouteUrl = "{area}/{controller}/{action}/{id}";
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        RouteValueDictionary defaultRouteValueDictionary = new RouteValueDictionary(new {area="soluciones_de_salud",   controller = "Home", action = "Index", id = UrlParameter.Optional });
        routes.Add("DefaultGlobalised",  new GlobalisedRoute(defautlRouteUrl, defaultRouteValueDictionary)); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:25:36.540

我相信您需要将“id”的使用更改为“文化”

IE

```
const string defautlRouteUrl = "{area}/{controller}/{action}/{culture}";

RouteValueDictionary defaultRouteValueDictionary = new RouteValueDictionary(new {area="soluciones_de_salud",   controller = "Home", action = "Index", culture = UrlParameter.Optional }) 
```

当路由绑定发生时，参数名称必须与路由参数匹配，否则您最终会得到

```
?ParamName=Value      (?culture=en) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:27:04.183

尝试更改`id`输入`culture`

如果您的网址中的文化是强制性的，请同时删除`id = UrlParameter.Optional`

```
const string defautlRouteUrl = "{area}/{controller}/{action}/{culture}";
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
RouteValueDictionary defaultRouteValueDictionary = new RouteValueDictionary(new {area="soluciones_de_salud",   controller = "Home", action = "Index" });
routes.Add("DefaultGlobalised",  new GlobalisedRoute(defautlRouteUrl, defaultRouteValueDictionary)); 
```

如果文化不是强制性的，您将设置默认值

```
const string defautlRouteUrl = "{area}/{controller}/{action}/{culture}";
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
RouteValueDictionary defaultRouteValueDictionary = new RouteValueDictionary(new {area="soluciones_de_salud",   controller = "Home", action = "Index", culture = "en" });
routes.Add("DefaultGlobalised",  new GlobalisedRoute(defautlRouteUrl, defaultRouteValueDictionary)); 
```

# spring - 强制 JPA 在后台加载数据库更改

> ID：10140590
> 
> 赞同：0
> 
> 时间：2012-04-13T12:13:31.880
> 
> 标签：spring, hibernate, jpa

我将 JPA 与 Hibernate 3 和 Spring 3.5 一起使用。我无法让 JPA/hibernate 刷新在 hibernate 之外的后端数据库中所做的更改（通过直接查询）。我正在使用 EHCache 和二级缓存。以下是关键配置项：

```
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
    <!-- key properties pulled from prop file -->        
    <property name="driverClass" value="${dataSource.driverClassName}"/>
    <property name="jdbcUrl" value="${dataSource.url}"/>
    <property name="user" value="${dataSource.username}"/>
    <property name="password" value="${dataSource.password}"/>
    <property name="maxPoolSize" value="50"/>
    <property name="maxIdleTime" value="14400"/>
    <property name="checkoutTimeout" value="5000"/>
    <property name="idleConnectionTestPeriod" value="60"/>
    <property name="preferredTestQuery" value="select 1"/>
    <property name="maxAdministrativeTaskTime" value="300"/>
    <property name="numHelperThreads" value="10"/>
</bean>

<!-- We are Using JPA -->
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="persistenceXmlLocation" value="classpath:persistence.xml"/>
    <property name="jpaProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.format_sql">true</prop>
            <prop key="hibernate.use_sql_comments">false</prop>
            <prop key="hibernate.hbm2ddl.auto">update</prop>
            <prop key="hibernate.generate_statistics">true</prop>
            <prop key="hibernate.cache.region.factory_class">net.sf.ehcache.hibernate.EhCacheRegionFactory</prop>
            <prop key="hibernate.cache.use_query_cache">true</prop>
            <prop key="hibernate.cache.use_second_level_cache">true</prop>
            <prop key="hibernate.cache.use_structured_entries">true</prop>
            <prop key="hibernate.cache.generate_statistics">true</prop>
        </props>
    </property>
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"/>
    </property>
</bean> 
```

我还将 JpaTransactionManager 与 Propagation=REQUIRED 一起用于与实体交互的所有方法。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:20:41.857

通过“后门”更改数据库与使用 orm 相矛盾，尤其是使用缓存。

我会尽量避免这种情况（尽管我知道你有需要）。

使用后门冷的解决方案是：

1.  使用休眠向应用程序发送通知。
2.  此通知导致缓存被驱逐（可能通知可以包含有关要驱逐的缓存部分的信息）。

# arrays - 如何使用 ColdFusion 创建一个将表单输入存储在会话变量中的数组？

> ID：10140593
> 
> 赞同：0
> 
> 时间：2012-04-13T12:13:37.417
> 
> 标签：arrays, coldfusion, session-state

我正在尝试在 ColdFusion 中创建一个存储在会话变量中的数组。我有一个 HTML 表单，它将输入传递给操作页面并将其存储在数组中。但是我遇到了问题，主要是在设置数组时，我尝试使用 cfif 检查数组是否已定义，但没有成功。

这是 HTML 表单：

```
<form name="input" action="html_form_action.cfm" method="post">
id <input type="text" name="id" />
<input type="submit" value="Submit" />
</form> 
```

这是 ColdFusion 代码：

```
<cfapplication name="arrays" clientmanagement="Yes"  sessionmanagement="Yes">

<cfif isDefined('form.id')>
<cfset session.urlid = form.id>

<cfset myArray = arrayNew(1)>

<cfset session.arrData[(arrayLen(session.arrData)+1)] = #session.urlid#>
</cfif>

<cfloop array=#session.arrData# index="name">
<cfoutput>
<form name="input">
item<input type="text" name="id" placeholder=#name#>

</form>
</cfoutput>
</cfloop> 
```

我想知道如何取消设置会话，以便它从阵列中删除所有内容，我一直在阅读 ColdFusion 文档，但我不知道如何做到这一点。我已经在 PHP 中完成了这项工作，效果很好我觉得 ColdFusion 会更容易，但我认为缺乏资源使这变得困难。我将不胜感激有关如何使其正常工作的任何建议。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:40:34.393

我不完全确定您的第一个问题到底是什么，但我会尽力而为！

由于您不确定 form.id 是否存在，我会查看“cfparam”标签。这定义了 action.cfm 页面的预期参数。

```
<cfparam name="form.id" default="0" type="integer" /> 
```

然后，如果您愿意，可以检查 form.id GT 0 是否...？

至于在 ColdFusion 中设置一个数组，你就快到了……你创建了一个很棒的新数组……但你真的不必为每个数组值定义整数……只需使用：

```
<cfset arrayAppend(session.arrayVar,variableToAppend) /> 
```

至于“取消设置”会话变量......大多数人只是这样做

```
<cfset structDelete(session,'arrData') /> 
```

我希望我没有错过任何东西...如果您需要其他任何东西 - 请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T15:32:35.950

看起来这就是你想要做的。

```
<cfparam name="form.id" default="0"/>
<cfset session.urlID = form.id/>

<cfif NOT structKeyExists(session,'arrData')>
    <cfset session.arrData = arrayNew(1)/>
</cfif>

<cfset arrayAppend(session.arrData,session.urlId)/> 
```

但这仍然有点不确定。您将 id 作为 URLID 存储在会话中，然后将其复制到 arrData 的索引（在会话中）。如果 session.urlID 曾经有超过一个原始值，我认为你最终会得到一个循环引用。仍然..我认为以上是您可能正在尝试的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T13:56:26.807

您只是想将表单存储在会话范围内吗？如果是这样，您只需执行 cfset session.formname = form 或使用 structcopy 函数将表单结构复制到您的会话中。

要清除它，请使用 structclear 函数。检查它是否存在使用 cfif structkeyexists(scope, "var")

Hth

# javascript - 来自xml数据的jquery弹出库

> ID：10140595
> 
> 赞同：1
> 
> 时间：2012-04-13T12:13:42.547
> 
> 标签：javascript, jquery, html

我在我的 HTML 页面中添加了 head 标签

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>

<script type="text/javascript">
$(function () {
       $.ajax({
                type: "GET",
                url: "AllResponse.xml", // replace with absolute URL of your gallery's xml file
                dataType: "xml",
                success: function(xml) {
                    $(xml).find('Hotel').each(function() {

                       var url = $(this).find('HotelFrontImage').attr('Url');

                        $('<li></li>').html('<a href="'+url+'" target="_parent"><img src="'+url+'"/></a>').appendTo('#gallery');
                    });

                }

            });

});
</script> 
```

并给定身体标签

但它没有在jquery中显示弹出

你能告诉我我的代码到底有什么问题吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:55:47.163

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('body').append($('<ul />', { 'id': 'gallery' }));

            var xml = $.parseXML('<Hotels><Hotel id="1"><Name>Taj 1</Name><HotelFrontImage Url="https://lh5.googleusercontent.com/-y301Ju4n32g/TRCtzBfoiZI/AAAAAAAAABc/3tGEuAD3R8I/w487-h365-k/51.jpg"></HotelFrontImage>'
                              + '</Hotel><Hotel id="2"><Name>Taj 2</Name><HotelFrontImage Url="https://lh3.googleusercontent.com/-ZkMSKCbY0Y8/TRCpCX5p35I/AAAAAAAAABQ/ZL2nsL-ir7U/s277/3.jpg"></HotelFrontImage>'
                              + '</Hotel><Hotel id="3"><Name>Taj 3</Name><HotelFrontImage Url="https://lh5.googleusercontent.com/-y301Ju4n32g/TRCtzBfoiZI/AAAAAAAAABc/3tGEuAD3R8I/s800/51.jpg"></HotelFrontImage></Hotel></Hotels>');

            $(xml).find('Hotel').each(function () {
                var Url = $(this).find('HotelFrontImage').attr('Url');
                $('<li></li>').html('<a href="' + Url + '" target="_parent"><img src="' + Url + '"/></a>').appendTo('#gallery');
            });
        });
    </script>
</head>
<body>
</body>
</html> 
```

# sql - 关于从表中选择最后 n 条记录的性能

> ID：10140602
> 
> 赞同：1
> 
> 时间：2012-04-13T12:14:01.473
> 
> 标签：sql, sql-server, sql-server-2005, indexing

我正在查询表以选择最后 n 条记录但保留顺序。为此，我使用了以下查询，该查询是从[Select Top N Records Ordered by X 中获得的，但结果却是相反的](https://stackoverflow.com/questions/2572496/select-top-n-records-ordered-by-x-but-have-results-in-reverse-order)：

```
WITH    Temp
          AS ( SELECT TOP 10
                        [TestID] ,
                        UserID ,
                        DateSent
               FROM     [Test]
               WHERE    UserID = @UserID
               ORDER BY DateSent DESC
             )
    SELECT  *
    FROM    Temp
    ORDER BY DateSent 
```

即我在保留排序顺序的同时选择最后 n 条记录。以下是创建上述表格的虚拟脚本：

```
 GO
CREATE TABLE [dbo].[Test]
    (
      [TestID] [int] IDENTITY(1, 1)
                     NOT NULL ,
      [UserID] [int] NOT NULL ,
      [DateSent] [datetime] NOT NULL ,
      CONSTRAINT [PK_TestID] PRIMARY KEY CLUSTERED ( [TestID] ASC )
        WITH ( PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF,
               IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON,
               ALLOW_PAGE_LOCKS = ON ) ON [PRIMARY]
    )
ON  [PRIMARY]
GO

CREATE NONCLUSTERED INDEX [IX_Test_UserID_DateSent] ON [dbo].[Test] 
(
    [UserID] ASC,
    DateSent DESC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO

GO

INSERT INTO [Test]
SELECT TOP 100000 ABS(CAST(NEWID() AS BINARY(6)) %10),
DATEADD(day, DATEDIFF(day, 0, GETDATE()) - 1 - FLOOR(RAND(CAST(NEWID() AS binary(4))) * 365.25 * 90), 0)
FROM   master..spt_values 
GO 
```

上面我已经创建了表，在其上应用了索引并在其中插入了一些虚拟数据。我正在执行此查询以获取记录：

```
DECLARE @UserID INT
SET @UserID = 1 ;
WITH    Temp
          AS ( SELECT TOP 10
                        [TestID] ,
                        UserID ,
                        DateSent
               FROM     [Test]
               WHERE    UserID = @UserID
               ORDER BY DateSent DESC
             )
    SELECT  *
    FROM    Temp
    ORDER BY DateSent 
```

以下是运行上述查询后的执行计划：

![在此处输入图像描述](../Images/a5efce831b5dcb046d0cdbbb53937849.png)

正如您所看到的，索引在后面，但对于内部查询，您可以在索引计划中看到 77% 的执行是由排序过程完成的。**我怎样才能避免这种情况？**我应该在这里应用什么索引来克服这种情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T12:19:05.543

消耗 77% 执行计划的最左边的排序只处理您的`TOP 10`记录。您可以通过删除 final 来验证这一点`ORDER BY`：

```
DECLARE @UserID INT
SET @UserID = 1 ;
WITH    Temp
          AS ( SELECT TOP 10
                        [TestID] ,
                        UserID ,
                        DateSent
               FROM     [Test]
               WHERE    UserID = @UserID
               ORDER BY DateSent DESC
             )
    SELECT  *
    FROM    Temp
    --ORDER BY DateSent 
```

需要指出的是，一个计划中的所有算子加起来必须达到 100%。如果您最便宜的操作（即仅排序 10 条记录）占用了大部分执行时间，那么我会说您状态良好。

![在此处输入图像描述](../Images/dae28eb1fa65ced7756f80618455dad9.png)

# javascript - javascript中最快的斜边？

> ID：10140604
> 
> 赞同：18
> 
> 时间：2012-04-13T12:14:04.020
> 
> 标签：javascript, math, approximation

我在 javascript 中看到了许多关于模拟和动画的问题，这些问题通常涉及计算斜边：

```
hypot = Math.sqrt(x*x + y*y); 
```

由于笛卡尔坐标是大多数这些引擎的首选武器，因此需要这些计算来找到点对之间的距离等。因此，计算斜边的任何加速都可能对许多项目有很大帮助。

为此，你能看到比上面的简单实现更快的方法吗？基于[SuperCollider 中的近似函数，](http://danielnouri.org/docs/SuperColliderHelp/BinaryOps/hypotApx.html)我发现了一个近似值，它在 Chrome 中稍微快一点，但在 Firefox 中却慢得多。

编辑 2015-08-15：我已将接受的答案切换为 Math.hypot 之一；我怀疑目前的务实方法是使用 Math.hypot 或合成的 hypot 函数（如果不可用），如果足够且 Math.hypot 不可用，则与平方（根据 sch 的答案）进行比较。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-13T12:18:22.707

通常，您不需要计算平方根`hypot^2 = x*x + y*y`就足够了。例如，如果您想比较距离并且不需要实际值，就是这种情况。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-06-24T19:22:02.743

在 ECMAScript ES6 中，您可以使用**[Math.hypot](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/hypot)**：

```
// ES5 support

Math.hypot = Math.hypot || function(x, y){ return Math.sqrt(x*x + y*y) }

var x = 3, y = 4;

document.write(Math.hypot(x, y))
```

**编辑**：您可以在空白选项卡上运行此测试，两种方法都有 200 万次操作，结果非常好，速度提高了 24%。

```
var i, tmp, x = 55, y = 66, end, ini = performance.now();

// Math.sqrt operation
i = 0;
ini = performance.now();
tmp = 0;
while(i++ < 2000000){
    tmp += Math.sqrt(x*x + y*y)
}
end = performance.now();
console.log(tmp, "Math.sqrt operation: " + (end - ini) + " ms");

// Math.hypot

i = 0;
ini = performance.now();
tmp = 0;
while(i++ < 2000000){
    tmp += Math.hypot(x, y)
}
end = performance.now();

console.log(tmp, "Math.hypot: " + (end - ini) + " ms"); 
```

`Note`: 在这个测试中，它使用了 ES6 的**[Math.hypot](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/hypot)**。

![在此处输入图像描述](../Images/329aac4f98dcf3fcc7bbd22e2124b19e.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-09-02T17:55:03.903

许多人不知道的重要一点：

> `hypot = Math.sqrt(x*x + y*y);`
> 
> 这在理论上可行，但在实践中可能会失败。如果 x 太大以至于 x*x 溢出，则代码将产生无限结果。
> 
> 以下是如何计算 sqrt(x *x + y* y) 而不冒溢出的风险。
> 
> ```
> max = maximum(|x|, |y|)
> min = minimum(|x|, |y|)
> r = min / max
> return max*sqrt(1 + r*r) 
> ```

参考和全文：John D. Cook - [http://www.johndcook.com/blog/2010/06/02/whats-so-hard-about-finding-a-hypotenuse/](http://www.johndcook.com/blog/2010/06/02/whats-so-hard-about-finding-a-hypotenuse/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-02-15T22:49:42.297

性能取决于 javascript 运行环境`Math.sqrt()`。`Math.hypot()`

我只是在 Node.js、Chrome 和 Firefox 中运行这段代码：

```
let z = performance.now();
for (let i = 0; i < 1000000000; i++) {
    Math.hypot(i, i);
}
console.log(performance.now() - z);

z = performance.now();
for (let i = 0; i < 1000000000; i++) {
    Math.sqrt(i * i + i * i);
}
console.log(performance.now() - z); 
```

结果如下：

Node.js v14.15.4：

```
24394.656100034714
419.97210001945496 
```

铬 88.0.4324.150：

```
26474.060000036843
422.13000007905066 
```

火狐 85.0.2：

```
423
419 
```

这意味着 V8 对 Math.hypot() 的实现很糟糕。实际上，如果它也取决于 CPU 架构/型号，我不会感到惊讶。

请注意，在我的示例中，我将整数提供给`Math.sqrt()`和`Math.hypot()`。另一项测试显示，对于浮点数，Node.js 运行测试代码比在整数上慢 20%。在 Chrome`Math.sqrt()`中，性能完全相同，`Math.hypot()`运行速度要慢 3%。火狐：没有区别。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T12:36:07.847

您可以查看 和 的相等`x`性`y`。如果等于，您可以将斜边计算为`(x + y)/sqrt(2)`常数`sqrt(2)`。

所以这种方法可以用于 x = y 的情况。对于其他情况，它可以以~41% 的最大不精确度使用。这是一个很大的错误。但是，当您指定允许的错误限制时，您可以使用此方法。例如，如果将允许误差定义为 5%，您可以得到它`b`必须介于`0.515*a`和之间`1.942*a`。

因此，如果您不需要完全不精确的计算，则可以使用值范围提高计算的性能。

`x`以此类推，您可以查看或`y`的相等性`zero`。并且对于这种情况，可以更快地计算出斜边。

PS 我在一篇[俄罗斯文章](http://mindfluctuation.wordpress.com/2011/03/06/%D0%BA%D0%B0%D0%BA-%D1%83%D0%BF%D1%80%D0%BE%D1%81%D1%82%D0%B8%D1%82%D1%8C-%D0%B2%D1%8B%D1%87%D0%B8%D1%81%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B3%D0%B8%D0%BF%D0%BE%D1%82%D0%B5%D0%BD%D1%83%D0%B7%D1%8B/)中读到了这一点。

# opengl - 在 OpenGL 中设置坐标系

> ID：10140605
> 
> 赞同：1
> 
> 时间：2012-04-13T12:14:04.140
> 
> 标签：opengl

我在 java 中使用 OpenGL 和 LWJGL 库。据我了解，您可以使用 glFrustum 设置顶部、底部、左侧、右侧、近处和远方坐标，然后使用 glViewport 将这些坐标与屏幕相关联，这是正确的吗？我假设这是因为我读过的任何内容都没有说明，这就是我使用正交模式时的工作方式。为了扩展我的问题，我这样设置我的应用程序（在 c 语法中）

```
glFrustum(-100, 100, -100, 100, -100, 100);
glViewport(0, 0, 800, 600); // the screen size is 800 by 600

. . .

glBegin(GL_QUADS); //draw a rectangle
glVertex2f(-0.25f, -0.25f);
glVertex2f(0.25f, -0.25f);
glVertex2f(0.25f, 0.25f);
glVertex2f(-0.25f, 0.25f);
glEnd(); 
```

在 x 和 y 轴上使用 -100-----0-----100 的坐标系，我怎么可能得到一个大小看起来像我提供的坐标已经相乘的矩形到 10 点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T12:22:07.867

> 据我了解，您可以使用 glFrustum 设置顶部，底部，左侧，右侧，近处和远方坐标

不完全的。`glFrustum`创建一个仿射透视投影矩阵，具有棱锥的形状，尖端切割为 - 截头锥体。如果您将该金字塔延伸到尖端，则尖端位于坐标`(0,0,0)`，近参数定义 XY 平面到 Z 方向上的尖端的距离，作为“切割”该金字塔的位置。远平面给出了到金字塔底部的距离。left、right、top 和 bottom 参数定义了金字塔的边与近平面相交的位置，这意味着金字塔不需要对称。它也可以移动。

> 然后您使用 glViewport 将这些坐标与屏幕相关联，这是正确的吗？

OpenGL是一个状态机。您调用设置这些状态的顺序无关紧要。您可以随时更改每个状态，无论如何。仅当先前的状态有助于设置新状态的数据/参数时，顺序才重要。矩阵运算就是一个例子，因为它在前一个状态上进行运算。但是 glViewport 与此无关。

> 怎么可能在 x 和 y 轴上使用 -100-----0-----100 的坐标系，我得到一个大小看起来像我提供的坐标已经相乘的矩形到 10 点？

因为你没有建立一个有效的截锥体。平截头体投影的近平面和远平面不得有相反的符号。通常你希望他们都是积极的。近平面距离也必须非零。

您定义“平截头体”的方式就像沙漏一样。此外，您的顶点位于 Z = 0，因此它们位于该平截头体的奇点中，并且在那里可能发生任何事情。

我认为您实际上想要一个正射投影。

# ios - 在 xcode4.3.2 的 ios App 中集成 facebook API 后出错

> ID：10140607
> 
> 赞同：0
> 
> 时间：2012-04-13T12:14:12.783
> 
> 标签：ios

在我的应用程序中集成 facebook api 时遇到错误，错误详情如下：

架构 i386 的未定义符号：“_OBJC_CLASS_$_StatusViewController”，引用自：ViewController.o 中的 objc-class-ref ld：找不到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v查看调用）

StatusViewController 是我的 viewContoller 类，我在其中使用了 facebook API 类，这些类曾经由 facebook 开发者网站重新编译。任何人都可以指导我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:19:58.647

这意味着在文件 ViewController 中您显然正在访问 StatusViewController 但尚未将其导入 ViewController .h 或 .m 文件中：

在 ViewControllers .h 文件中放：

```
 #import "StatusViewController.h" 
```

# algorithm - 找到一个poset子集的最大元素

> ID：10140610
> 
> 赞同：4
> 
> 时间：2012-04-13T12:14:23.797
> 
> 标签：algorithm, poset

问题如下：给定一个poset的子集S，找到S的最大元素。

例如，考虑[http://ndp.jct.ac.il/tutorials/Discrete/node34.html](http://ndp.jct.ac.il/tutorials/Discrete/node34.html)中的poset 的哈斯图。给定它的一个子集，例如：{12, 2, 8}，最大元素是 12 和 8。

我不知道我是否准确地描述了这个问题。我认为这个问题可能涉及传递闭包的一些排序或计算，但我有点困惑。

你能给我一些快速算法的方法吗？我想把它保存在 O(n^2)

谢谢。

一点澄清。我的应用程序正在使用 RDF 图。如果存在表示 < 关系的特定边，则两个节点是可比较的。如果存在这样的显式关系或隐式传递关系，则两个节点可能是可比较的。

所以假设哈斯图正是我的RDF图。如果我从 2 开始进行深度优先搜索，我怎么知道 8 和 12 不可比较？它们可能不是显式的，但可能是隐式的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T12:23:30.673

如果您知道排序关系的最小子集，则可以在线性时间内执行此操作：将其视为 DAG，然后进行深度优先遍历以查找所有没有后继的顶点。

# php - 将变量从篮子传递到 Paypal 进行付款 - 增值税费用

> ID：10140612
> 
> 赞同：0
> 
> 时间：2012-04-13T12:14:30.473
> 
> 标签：php, paypal, shopping-cart

我有我自己的购物篮，它是根据用户显然购买的东西建立起来的。一旦用户点击结帐，这就会被传递到贝宝结帐。这一切都与显示在左侧 PayPal 购物车收据中的项目信息一起成功。

但是，我的增值税费用有问题。我已经计算了我的购物篮（在我的网站内）的增值税费用（20%），但我不确定如何将这笔费用转嫁给 Paypal。目前，Paypal 只是通过根据数量添加项目价格来计算总数。将增值税费用包含在 Paypal 中的任何想法？

这是我的代码：

```
$product1 = mysql_fetch_assoc($sql1);?>
<input type='hidden' name='item_number_<?php echo $count; ?>' value="<?php echo $count; ?>">
<input type="hidden" name="item_name_<?php echo $count; ?>" value="<?php echo $product1['prod_name']; ?>">
<input type="hidden" name="amount_<?php echo $count; ?>" value="<?php echo $product1['price']; ?>">
<input type='hidden' name='quantity_<?php echo $count; ?>' value="<?php echo $item['quantity']?>">
<?php $count++; } ?> 
```

这是我的篮子的运输代码：

```
$grand_total = isset($grand_total) ? $grand_total : 0;
  $line_cost = $product['price'] * $item['quantity'];
  $grand_total += $line_cost;
  $charge = $grand_total /100 * 20;
  $chargeincvat = $charge + $grand_total;

<tr><td colspan='6' align='right'>Charges (VAT 20%): &pound; <?=number_format($chargeincvat, 2);?></td></tr> 
```

添加：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">

<input type="hidden" name="cmd" value="_cart">

<input type="hidden" name="upload" value="1">

<input type="hidden" name="business"

value="derrysnurseries@hotmail.co.uk">

<input type='hidden' name='item_number_1' value="1">

<input type="hidden" name="item_name_1" value="Moment in Time">

<input type="hidden" name="amount_1" value="6.95">

<input type='hidden' name='quantity_1' value="1">

<input type='hidden' name='tax_cart' value="8.34"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:24:18.880

~~您可以使用以下作为`name`表单元素的属性：~~

 ~~```
shipping - applies to first item added to cart
shipping2 - applies to each additional item added to cart
handling_cart - applied once to cart regardless of quantity 
```~~ 

例如

```
<input type="hidden" name="handling_cart" value="15.00"> 
```

~~申请`15.00`总运费~~

要将税/增值税添加到项目中，请使用`tax_#`项目`#`编号，例如

```
<input type="hidden" name="tax_2" value=".15"> 
```

这将添加`.15p`到项目编号 2。添加购物车税/增值税使用

```
<input type="hidden" name="tax_cart" value=".15"> 
```

[请参阅本文档的第 263](https://cms.paypal.com/cms_content/GB/en_GB/files/developer/PP_WebsitePaymentsStandard_IntegrationGuide.pdf)页和同一文档的第 294 页以自动计算税金/增值税成本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:20:38.373

您可以尝试发送运输信息

输入类型='隐藏'名称='运输'值=“25.93”

你也可以在这里查看： [https ://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_IPNandPDTVariables](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_IPNandPDTVariables)

# map - 将屏幕坐标（X，Y）映射到位图坐标（X，Y）

> ID：10140615
> 
> 赞同：2
> 
> 时间：2012-04-13T12:14:35.810
> 
> 标签：map, bitmap, screen

在我的应用程序中，需要将 event.getx() 和 event.gety() 值映射到位图图像 x 和 y 坐标。一种解决方案是

```
 imageView.getImageMatrix().invert(matrix);
    touchPoint = new float[] { event.getX(),event.getY() };
    matrix.mapPoints(touchPoint); 
```

这工作正常，但在我的应用程序中，我没有使用 Imageview 来获取矩阵，而是使用 Canvas 来创建位图。现在我有问题将单击的 x 和 y 映射到位图图像 x 和 y 位置。请提供任何其他解决方案。我已经检查了从画布中获取矩阵，将位图作为参数传递，但没有用。

问候， 拉克什

# iphone - iPhone iOS 如何从应用程序之类的跟踪器生成多页报告？

> ID：10140619
> 
> 赞同：0
> 
> 时间：2012-04-13T12:14:42.907
> 
> 标签：iphone, objective-c, ios, pdf-generation, reporting

我正在开发一个类似卡路里计数器的应用程序。用户可以报告事件并每天跟踪它们。这个应用程序的要求之一是用户可以生成跟踪事件的多页报告。

**我正在寻找适用于 iPhone 的报告生成框架。有这样的事吗？**

我尝试创建一个 850x1100 模板，在那里添加所有必需的文本标签、一个表格视图和一个核心绘图图，并将其转换为图片>PDF。这种方法被拒绝了，因为客户想要一个完全可搜索的 PDF。这个过程涉及的复杂性对我来说太多了。**有没有更简单的方法在 iPhone 上生成报告？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:56:47.937

如果连接到网络适合您的应用程序，您可以尝试寻找可以调用的服务来减轻工作/复杂性。 [Docmosis](http://www.docmosis.com)就是这样一种便宜但不是免费的工具——你可以从 iOS 调用它并要求它呈现 PDF 和其他格式——布局由你通过网站单独上传的模板控制——所以你只需要发送数据。您必须询问它是否提供您所追求的可搜索性功能。

# templates - 使用 jsf 为每种类型的用户分配一个菜单

> ID：10140622
> 
> 赞同：0
> 
> 时间：2012-04-13T12:14:51.587
> 
> 标签：templates, jsf, menu, javabeans

我正在尝试在我的网页中使用的模板中包含一个菜单，问题是我的菜单会根据连接的用户类型而变化。哦，我正在使用 jsf。所以 page->template->menu 在第一页 login.xhtml 中的一个按钮将用户带到 bean：

```
<p:commandButton id="logins"  value="login"  action="#{UtilisateurBean.connection_role}"  update="growl"/> 
```

在 utilisateurBean 中，方法 connection_role 如下所示：

```
public String connection_role() {
    Utilisateur authentifi = resp.seConnecter_role(login, password, typeRole);
    FacesMessage msg;
    FacesContext myFacesContext;

    if ("_".equals(authentifi.getLogin())) {
        msg = new FacesMessage("Compte incorrect", "Login password incorrect");
        msg.setSeverity(FacesMessage.SEVERITY_INFO);

        myFacesContext = FacesContext.getCurrentInstance();
        myFacesContext.addMessage(null, msg);

        return null;
    } else if (authentifi != null) {
        Utilisateur user = resp.findById(idutilisateur);
        HttpSession session = (HttpSession) FacesContext.getCurrentInstance().getExternalContext().getSession(true);
        if (typeRole.equals("Administrateur")) {
            cleanForm();
            setMenu("menuAdministrateur.html");
            session.setAttribute("user", user);
            return "listItem.xhtml";
        } else if (typeRole.equals("Administrateur Audit")) {
            cleanForm();
            setMenu("menuAdministrateurAudit.html");
            session.setAttribute("user", user);
            return "Administrateur_Audit";
        } else if (typeRole.equals("Planificateur")) {
            cleanForm();
            setMenu("menuPlanificateur.html");
            session.setAttribute("user", user);
            return "Planificateur";
        } else {
            cleanForm();
            setMenu("menuAuditeur.html");
            session.setAttribute("user", user);
            return "Auditeur";
        }

    }

    return null;
} 
```

在我的模板中，我放了：

现在，当我单击登录按钮时，该页面无处可去，用户已连接，我用一些 printlns 进行了检查，但没有调用任何其他页面。

Ps：如果我用它替换 `<ui:insert name="#{UtilisateurBean.menu}" ></ui:insert>` 它就 `<ui:insert name="menuAuditeur.xhtml" ></ui:insert>` 可以了，并且新页面出现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:04:38.383

如果将 with 和 in 包装到`<ui:insert...`要`<h:panelGroup id="myPanel"...`更新的元素列表中？像....？`<p:commandButton``myPanel id``<p:commandButton update="growl, myPanel"`

如果一个带有 id 的表单围绕着`<ui:insert`你应该做类似的事情`<p:commandButton update="growl, form1Id:myPanel`

?

# iphone - iphone中的xml解析是否使用google api定位

> ID：10140624
> 
> 赞同：0
> 
> 时间：2012-04-13T12:14:56.997
> 
> 标签：iphone, nsxmlparser

我想从这个[url解析 xml 数据](http://www.google.com/ig/api?weather=%22Dr%20Vikram%20Sarabhai%20Marg%20Panchavati%20Society%20Gulabai%20Tekra%20Ahmedabad%20Gujarat%20India%22&hl=hr)

我写了这样的代码：-

```
NSString *escapedURL = @"http://www.google.com/ig/api?weather=%22Dr%20Vikram%20Sarabhai%20Marg%20Panchavati%20Society%20Gulabai%20Tekra%20Ahmedabad%20Gujarat%20India%22&hl=hr";        
            xmlParser = [[NSXMLParser alloc] initWithContentsOfURL:[NSURL URLWithString:escapedURL]];;
            [xmlParser setDelegate:self];
            [xmlParser setShouldProcessNamespaces:NO];
            [xmlParser setShouldReportNamespacePrefixes:NO];
            [xmlParser setShouldResolveExternalEntities:NO];
            [xmlParser parse];

- (void)parserDidStartDocument:(NSXMLParser *)parser 
{
    NSLog(@"Document started", nil);
    currentElement = nil;
}

- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError 
{
    NSLog(@"Error: %@", [parseError localizedDescription]);
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName 
  namespaceURI:(NSString *)namespaceURI 
 qualifiedName:(NSString *)qName 
    attributes:(NSDictionary *)attributeDict
{

    [currentElement release];
    currentElement = [elementName copy];

    currentName = [[NSMutableString alloc] init];

    //For temeprature
    if ([currentElement isEqualToString:@"forecast_information"])
    {

    }
    else if ([currentElement isEqualToString:@"current_conditions"])
    {

    }
    else if ([currentElement isEqualToString:@"temp_c"])
    {
        //NSLog(@"attributeDict==>%@",[attributeDict objectForKey:@"data"]);
        LblTemperature.text=[NSString stringWithFormat:@"Ahmedabad %@°",[attributeDict objectForKey:@"data"]];
    }

}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName 
  namespaceURI:(NSString *)namespaceURI 
 qualifiedName:(NSString *)qName
{

     if ([elementName isEqualToString:@"temp_c"])
    {   
        //NSLog(@"temp_c: %@", currentName);

    }

}        

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{

    if ([currentElement isEqualToString:@"temp_c"])
    {
        [currentName appendString:string];
        //NSLog(@"==>%@",string);
    }

}

- (void)parserDidEndDocument:(NSXMLParser *)parser 
{
    NSLog(@"Document finished");

} 
```

但我无法在此解析中获取 temp_c 的数据。我得到的元素名称是：- xml_api_reply weather forecast_information city postal_code latitude_e6 longitude_e6 forecast_date current_date_time unit_system current_conditions

请帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:31:28.580

好吧，您可以使用 XPathQuery 来解析 XML。它会让你的生活更轻松。这是 XPathQuery 类的链接和教程。

[http://cocoawithlove.com/2008/10/using-libxml2-for-parsing-and-xpath.html](http://cocoawithlove.com/2008/10/using-libxml2-for-parsing-and-xpath.html)

看看它，如果你愿意使用它，但仍然不明白任何东西，请发表评论。

# java - 如何最好地在 java 中存储游戏配置变量

> ID：10140630
> 
> 赞同：5
> 
> 时间：2012-04-13T12:15:13.220
> 
> 标签：java

我正在编写一个小型 Java 游戏，并将全局游戏设置存储在一个类结构中，如下所示：

```
public class Globals {
    public static int tileSize = 16;
    public static String screenshotDir = "..\\somepath\\..";
    public static String screenshotNameFormat = "gameNamexxx.png";
    public static int maxParticles = 300;
    public static float gravity = 980f;
    // etc
} 
```

虽然使用起来非常方便，但我想知道这是否是公认的模式。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-13T12:17:22.000

将其存储在一个`.properties`文件中。

**配置属性**

```
tile.size=16
screenshot.dir=..\\somepath\\.. 
```

**阅读它**

```
// Make sure this happens only the first time you start your application
Properties properties = new Properties();
// You can use FileInputStream, ClassLoader.getResourceAsStream or a reader too
properties.load(...) 
```

**使用它**

```
int tileSize = Integer.valueOf(properties.getProperty("tile.size"));
String screenshotDir = properties.getProperty("screenshot.dir"); 
```

为了简化事情，并尽量减少更改，您还可以执行以下操作：

```
public class Globals {
    private static final Properties properties = new Properties();

    static {
        // do the loading here
    }

    public static final int TILE_SIZE = 
        Integer.valueOf(properties.getProperty("tile.size"));
    public static final String SCREENSHOT_DIR = 
        properties.getProperty("screenshot.dir");
    // etc
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:18:18.103

如果它真的是一个小应用程序，它会做。这并不理想，但在小范围内引入太多复杂性是没有意义的。

但是从属性文件中读取这些值。

# api - Facebook 分页 URL 中返回的 __paging_token 查询参数是什么意思？

> ID：10140632
> 
> 赞同：6
> 
> 时间：2012-04-13T12:15:17.370
> 
> 标签：api, facebook-graph-api

典型的 facebook 分页 url 如下所示：

```
https://graph.facebook.com/353409121371688/feed?access_token=<access_token>&since=1334318362&__paging_token=353409121371688_359606270751973&__previous=1&limit=25 
```

同样，__previous 查询参数是什么意思？

是否有某个地方记录了所有这些参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-25T12:12:11.703

获取页面的帖子时，来自 facebook 的响应包含分页链接`next`和`previous`. 那些将有一个`until`or`since`参数，另外还有一个参数`__paging_token`

只有`until`上一页的最后一篇文章作为下一页的第一项返回。

`Until`似乎是上一页最后一篇文章的时间。当然，此时可能有不止一个帖子，因此 facebook 会返回从这个时间开始的所有帖子。**为 facebook 添加了附加信息，以便下一页将真正从下一个帖子开始****。`paging token`**

引用：[Spring Social Facebook - PagingParameters 必须使用分页令牌](https://jira.spring.io/browse/SOCIALFB-168)

`__previous`不知道它在做什么。当我检查它的存在和不存在时没有做任何事情。

**注意**：我也不确定这些`__paging_token`有效期有多长。

# .net - edmx 文件之间的继承

> ID：10140633
> 
> 赞同：0
> 
> 时间：2012-04-13T12:15:20.193
> 
> 标签：.net, entity-framework, edmx

我有 5 个不同的 edmx 文件，每个文件包含许多表（大约 40 个）。
现在我要为位于那些不同 edmxs 上的一些表添加相同类型的引用属性。例如，假设在 edmx1 我有 Worker 实体，在 edmx2 我有客户实体，在 edmx3 我有供应商实体等等。现在我想添加对 Worker、Customer 和 Supplier 的 Location 实体的引用。我可以将 Location 表添加到每个 edmx 并进行代码复制。但就我而言，我有许多共同的实体，而不仅仅是位置。实际上，我更喜欢将所有公共实体分离到不同的 edmx，并对具有引用公共实体的实体的其他 edmx 执行类似“继承”之类的操作。这样的事情可能吗？如果是这样 - 如何？如果不是 - 这种情况的常见解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:29:20.187

不会。如果您使用的是 EDMX 文件，那么每个文件都是独立的。

使用EDMX 时，EF中的类型重用[支持非常有限。](http://blogs.msdn.com/b/adonet/archive/2008/11/25/working-with-large-models-in-entity-framework-part-2.aspx)首先，设计师不支持它。它也仅在 CSDL 中受支持。因此，这意味着您可以拥有多个 CSDL 部分（实体定义），其中一个 CSDL 文档可以与另一个 CSDL 文档中的实体建立关系（但这种关系只能是单向的），但您只能拥有一个 SSDL（数据库定义）和 MSL（映射定义）文档。

目前，您的每个 EDMX 文件都代表单独的 CSDL、MSL 和 SSDL 文档，因此无法轻松转换为该场景。

这是代码映射的好场景（没有 EDMX）。

# asp.net-mvc-3 - 具有搜索功能的 MVC Where 条件

> ID：10140634
> 
> 赞同：0
> 
> 时间：2012-04-13T12:15:21.863
> 
> 标签：asp.net-mvc-3, where

我正在尝试使用 actionLink 实现搜索功能。

actionLink 将为控制器提供参数，例如

```
@Html.ActionLink("Intel Core i5", "Search", "Store", new { @searchString = "i5" }, null) 
```

我传递了这个值，它在控制器中工作。但是，当我尝试比较十进制数据类型而不是字符串数据类型时。目前，处理器是 varchar，而 displaySize 是十进制。

我不知道如何用 searchString 处理 displaySize。

我的控制器是这个。

```
//Controller here
 public ActionResult Search(string searchString)
    {

        var product = from a in _db.Product.Include(a => a.Category)
                      select a;
        if (!String.IsNullOrEmpty(searchString))
        {
            //processor is working because searchString is string, however, 
            //displaySize is not working because of decimal value, and 
            // I don't know how to write Where condition in here.
            product = product.Where(a => a.processor.ToUpper().Contains(searchString.ToUpper())
                               ||
                   //a.displaySize.ToString().Contains(searchString.ToUpper()));
            //I repalce to below code, but it has error 
            //'Entity does not recognize the method ''System.String ToString()' method.
                   Convert.ToDecimal(a.displaySize).ToString().Contains(searchString)

        }
        return View(product.ToList());
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:29:59.160

绝对`a.displaySize.ToString().Contains(searchString.ToUpper()));`不会达到目的。尝试将十进制值的整数部分与搜索字符串进行比较，以获得更准确的结果。像这样`Convert.ToInt32(a.displaySize).ToString().Contains(searchString)`

# java - 这是创建具有多个包的 jar 文件的正确方式吗？

> ID：10140640
> 
> 赞同：1
> 
> 时间：2012-04-13T12:15:47.087
> 
> 标签：java, jar, applet

我的类文件的文件夹结构是这样的：

```
.. classes/
      chartplottingview/(class files here belongs to chartplottingview package)
      chartplottingmodel/(somes class files here belong to chartplottingmodel package)
      chartplottingcontroller/(somes class files here belong to chartplottingcontroller package)
      chartplottingmain/Main.class belongs to chartplottingmain package 
```

主要课程在：

```
 chartplottingmain/Main.class 
```

所以，在窗口命令行，停留在文件夹...类，我创建了这样的 jar 文件：

```
 jar cfe chart.jar chartplottingmain/chartplottingmain.Main chartplottingmain/Main.class chartplottingview/filename.class so on... 
```

我的问题是：这是创建 jar 文件的正确方法吗，因为当我构建 jar 文件（与 Java 小程序一起使用）时，小程序不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:18:49.973

我建议使用构建工具来帮助您构建输出。

看看

*   [马文](http://maven.apache.org/guides/getting-started/index.html)
*   [蚂蚁](http://ant.apache.org/manual/tutorial-HelloWorldWithAnt.html)
*   SBT

所有这些工具都将帮助你用你想要的任意数量的包来组装你的 jar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:31:17.253

它究竟是如何不起作用的？你有任何错误信息吗？例如，用作小程序的 JAR 可能需要签名。

# php - JavaScript onchange()

> ID：10140642
> 
> 赞同：0
> 
> 时间：2012-04-13T12:16:07.743
> 
> 标签：php, javascript

我是 JS 和编程的新手..

我想学习如何在表单的文本字段中实现 onchange() 并在值发生更改时捕获该表单字段的值，并且我想将该信息存储在一个文本文件中，我可以在 php 中创建该文件。我已经有了可以使用 fopen 并插入值的文本文件。但是如何在将其写入文本文件之前捕获并存储一些临时变量。

我在这里包括代码..

这是来自我用来更新此数据的更新页面...

提前谢谢..

```
//function for multiple select field 
<script>
function Technology(value,state)
{
   if (value > -1) {
      var input= new Array(value);
      var p;

      var techs = [

         <?php
            $con = mysql_connect("localhost", "root");
            if (!$con)
            {
               die('Could not connect: ' . mysql_error());
            }
            mysql_select_db("root", $con);

            $load = mysql_query("SELECT tech from t_tech");
            while($arr = mysql_fetch_array($load))
            {
               echo "'".$arr[0]."',";
            }
         ?>
      ].sort();
      var ele = document.getElementById("tech");

      if(ele.hasChildNodes())
      {
         var len = ele.childNodes.length;
         while(ele.childNodes.length - value > 1)
         {
            ele.removeChild(ele.lastChild);
         }
      }
      var tech_array = new Array;
      <?php
         for($i = 0;$i<$_POST['tech_num'];$i++)
         {
            $p = $i+1;
            echo "tech_array[$i] = '".$_POST['tech'.$p]."';";
         }
      ?>

      for (var i=len-1;i<value;i++)
      {
         p= i+1;
         input[i] = document.createElement('div');

         if(state ==1 )
         {
            input[i].innerHTML = 'Technology' + p + ':  &nbsp;&nbsp; <input type="text" name="tech' + p + '" id="tech' + p +'" size = 25 value="'+tech_array[i] +'"/>';
         }
         else if (state == 0)
         {
            input[i].innerHTML = 'Technology' + p + ':  &nbsp;&nbsp; <input type="text" value="" name="tech' + p + '" id="tech' + p +'" size = 25/>';
         } 

         document.getElementById("tech").appendChild(input[i]);

         var techId = 'tech' + p;

         AutoComplete_Create(techId,techs);

      }           
}}
</script> 
```

这是表单域：

```
<tr> 
   <td><b>
      Field1: <select name="tech_num" id="tech_num" onChange="return Technology(this.value,0)"> 
      <?php 
         for ($i=0;$i<=5;$i++) { 
            if ($i==0) 
               $temp = "<option value=$i> - </option>"; 
            else if($i == $_POST['tech_num']) 
               $temp = "<option value=$i selected='selected'>$i</option>"; 
            else $temp = "<option value=$i>$i</option>"; 
               echo $temp; } 
      ?> 
      </select>
   </td>
</tr> 
</table> 
<div id="tech"> </div> <table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:26:51.933

要将值存储在服务器上的文本文件中，您需要从客户端发送数据。您最好的选择可能是在 onChange 函数中添加一个 ajax 调用到一个简单地存储值的特殊 php 页面。

[http://www.w3schools.com/jsref/event_onchange.asp](http://www.w3schools.com/jsref/event_onchange.asp)

[http://www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T00:30:21.507

我推荐这篇来自 Mozilla 的关于[在 Web 应用程序中使用文件的](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)文章。

他们提供的最简单的示例包括以下片段：

```
// Dynamically adding a change listener
var inputElement = document.getElementById("inputField");
inputElement.addEventListener("change", handleFiles, false);
function handleFiles() {
    var fileList = this.files; /* now you can work with the file list */
} 
```

注意：我会谨慎对待您在 W3Schools 上阅读的任何内容。他们的信息更倾向于搜索引擎优化而不是准确性。

# java - 如何在 JAVA 中进行查询/检索？

> ID：10140652
> 
> 赞同：1
> 
> 时间：2012-04-13T12:16:51.473
> 
> 标签：java, dicom, dcm4che

我需要访问`DicomObjects`存储在`DCM4CHEE PACS`using中的那些`JAVA` `(NetBeans)`。

到目前为止，我认为我必须使用库中的类`DCMqr`，`DCM4CHE`但我找不到任何示例，也不知道如何使用它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T13:34:51.860

dcmqr的[dcm4che 工具包](http://sourceforge.net/projects/dcm4che/files/dcm4che2/2.0.26/)使用文档可[在此处获得](http://www.dcm4che.org/confluence/display/d2/dcmqr)

该工具包有一个[dcmqr 类](/dcm4che-2.0.26/dcm4che-tool/dcm4che-tool-dcmqr/src/main/java/org/dcm4che2/tool/dcmqr/DcmQR.java)，它提供了执行 DCM4CHEE PACS（或任何其他 DICOM 兼容 PACS）的所有`C-FIND`功能`C-MOVE`。

只需将 AE 标题、主机和端口以及可能的其他选项传递给`DcmQR`main 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:21:23.290

1.  您必须在源路径中包含 dcm4che jar 文件（例如 commons.cli jar、core jar、net-jar 和其他 Y
2.  您必须像 dcmqr.main(argst) 一样调用 dcm4che Q/R，其中 argst 是字符串数组，参数如下`argst[0]="Port" argst[1]="server"`

# c# - 系统线程：跨线程操作无效

> ID：10140653
> 
> 赞同：2
> 
> 时间：2012-04-13T12:17:03.233
> 
> 标签：c#, winforms, multithreading

我从我的线程中遇到的错误是：

跨线程操作无效。控件“richTextBox8”从创建它的线程以外的线程访问。

我有此代码用于导致错误的字符串列表。

```
string[] parts = richTextBox8.Text.Split(new string[] { " " }, StringSplitOptions.RemoveEmptyEntries); 
```

现在我正在使用 System.Threading ，它需要将上面的代码转换为类似于此代码的格式才能工作，但我无法做到这一点，或者还有其他方法吗？

```
richTextBox8.Invoke((Action)(() => richTextBox8.Text += "http://elibrary.judiciary.gov.ph/" + str + "\n")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:22:37.913

你的字符串数组 (string[]) 对我来说看起来不错。如果有空格 inisde richTextBox8 它应该进行拆分。

关于您的线程，请尝试使用委托，例如：

```
 public delegate void MyDelegate(string message);

   //when you have to use Invoke method, call this one:
   private void UpdatingRTB(string str)
   {
       if(richTextBox8.InvokeRequired)
           richTextBox8.Invoke(new MyDelegate(UpdatingRTB), new object []{ msg });
       else
           richTextBox8.AppendText(msg);
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:24:52.173

```
string[] parts = null;
richTextBox8.Invoke((Action)(() => 
    {
        parts = richTextBox8.Text.Split(new string[] { " " },
        StringSplitOptions.RemoveEmptyEntries); //added semicolon
    })); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T12:36:02.990

您只需要在 UI 线程上完成文本提取。

使用[变量捕获](http://blogs.msdn.com/b/matt/archive/2008/03/01/understanding-variable-capturing-in-c.aspx)：

```
string text = null;
richTextBox8.Invoke((Action)(() => text = richTextBox8.Text));
string[] parts = text.Split(new string[] { " " }, StringSplitOptions.RemoveEmptyEntries); 
```

没有变量捕获（效率稍高）：

```
var ret = (string)richTextBox8.Invoke((Func<string>)(() => richTextBox8.Text));
parts = ret.Split(new string[] { " " }, StringSplitOptions.RemoveEmptyEntries); 
```

# html - 便笺小工具 - 通过注销保留文本

> ID：10140663
> 
> 赞同：0
> 
> 时间：2012-04-13T12:17:37.013
> 
> 标签：html, xml, jscript, windows-desktop-gadgets

我正在为 Windows 7 开发一个非常简单的便笺小工具。一切正常，除了每次我注销时，便笺的内容都会被刷新。保留这些内容的最佳方法是什么，以便在重新启动后重新出现文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T11:23:49.587

`System.Gadget.Settings`您可以使用该对象保存小工具的设置。方法`read`/`readString`和`write`/`writeString`

计算机重新启动时会保留这些设置。一种快速的测试方法是结束 sidebar.exe 进程，然后再次启动它（这模拟了 Windows Gadget 平台中的重新启动。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms723661(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms723661(v=vs.85).aspx)

# google-app-engine - 如何在谷歌网络工具包中处理 cron 响应，在谷歌应用引擎上运行

> ID：10140665
> 
> 赞同：1
> 
> 时间：2012-04-13T12:17:39.910
> 
> 标签：google-app-engine, gwt

我使用谷歌上的教程创建了一个简单的谷歌 webtoolkit 项目，并将其部署在谷歌应用引擎上。我在 onModuleLoad() 中为客户端的 rpc 服务操作创建了一个测试按钮：

```
public void onModuleLoad() {
    // Listen for mouse events on the test Cron button.
    cronTestButton.addClickHandler(new ClickHandler() {
    public void onClick(ClickEvent event) {
        calculateStockData();
    }
    });
} 
```

calculateStockData() 函数将创建服务并在服务器上执行 calculateStockData(callback) 函数，该函数将返回一个简单的 StockData 对象。

```
private void calculateStockData() {
    // Initialize the service proxy.
    if (stockPriceSvc == null) {
        stockPriceSvc = GWT.create(StockDataService.class);
    }

    // Set up the callback object.
    AsyncCallback<StockData> callback = new AsyncCallback<StockData>() {
        public void onFailure(Throwable caught) {

        }

        public void onSuccess(StockData result) {
            updateTable(result);
        }
    };
    // Make the call to the stock price service.
    stockPriceSvc.calculateStockData(callback);
} 
```

所以在我的 web.xml 文件中，我定义了一个服务：

```
<servlet>
<servlet-name>stockDataServiceImpl</servlet-name>
    <servlet-class>
    com.google.gwt.sample.stockwatcher.server.stockdata.StockDataServiceImpl
    </servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>stockDataServiceImpl</servlet-name>
<url-pattern>/stockwatcher/stockPrices</url-pattern>
</servlet-mapping> 
```

当我使用 cron 测试按钮执行代码时，我在 onSuccess 成功时收到 StockData 对象作为来自服务的响应，并且我在 updateTable() 函数中更新了 gwt flexTable。

问题是我想在 gwt 小部件上执行相同的更新操作，以响应通过 cron 作业执行的 calculateStockData() 服务函数。

因此，在我将以下内容添加到 cron.xml 之后，cron 作业正在正确执行 calculateStockData() 函数：

```
<cron>
    <url>/stockwatcher/stockPrices</url>
    <description>Get stock prices every 5 minutes</description>
    <schedule>every 5 minutes synchronized</schedule>
</cron> 
```

但我不知道如何设置一个监听器来处理客户端 cron 作业执行的响应。有人可以帮忙吗？如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:41:36.797

在 AppEngine 上，您可以使用[Channel API](https://developers.google.com/appengine/docs/java/channel/)将数据从服务器推送到客户端（使用客户端代码上的[gwt-gae-channel](http://code.google.com/p/gwt-gae-channel/)连接到通道）。

否则（并且过于简单化），您必须将数据存储在服务器上并让客户端定期轮询新数据。

# javascript - 添加新行后，slickgrid 行排序和删除无法正常工作

> ID：10140666
> 
> 赞同：1
> 
> 时间：2012-04-13T12:17:40.253
> 
> 标签：javascript, jquery-ui, jquery, slickgrid

更新数据后如何使 slickgrid 正常工作？

第一次创建我的网格时 - 删除和移动行可以正常工作。当我尝试通过单独的表单添加行时，请求被发送到服务器，如果添加新元素成功，则接收更新的数据并使用以下方法更新 slickgrid：

```
grid.setData(data);
grid.invalidate();
grid.render(); 
```

网格已正确呈现，即我看到了它（包括刚从服务器接收到的新数据传递的所有新行）。当我尝试重新排序行时 - 出现问题，就好像刚刚添加到新接收数据中的一行不存在一样。

[这是我当前的测试实现](http://crm.it-aces.com/slick/)

当我尝试删除行（移动到回收站）时，会发生更奇怪的事情。

似乎网格是使用新数据重建的（视觉上），但实际上包含或链接到旧数据。如何纠正这个错误？

感谢您的回答和帮助！

# azure - 如何让 Redis 在 Azure 上运行？

> ID：10140669
> 
> 赞同：35
> 
> 时间：2012-04-13T12:18:02.050
> 
> 标签：azure, redis

我看过一些关于在 Azure 上运行 Redis 的人的参考资料，但没有实现或任何类型的“操作方法”。有人见过这样的例子吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-17T11:10:47.190

1.  下载适用于 Windows 的 Redis - 请参阅[https://github.com/ServiceStack/ServiceStack.Redis](https://github.com/ServiceStack/ServiceStack.Redis)上的“适用于 Windows 的 Redis 服务构建”部分。我最终使用了 dmajkic [https://github.com/dmajkic/redis/downloads的 win64 版本](https://github.com/dmajkic/redis/downloads)
2.  创建一个 Azure 辅助角色，删除默认类（你根本不需要 c# 代码）。从下载的 redis 源中添加文件 redis-server.exe（exe 可以在 redis/src 中找到）。
3.  在服务定义文件中添加以下配置

    ```
    <WorkerRole name="my.Worker" vmsize="Small">
      <Runtime executionContext="limited">
        <EntryPoint>
          <ProgramEntryPoint commandLine="redis-server.exe" setReadyOnProcessStart="true" />
        </EntryPoint>
      </Runtime>
      <Imports>
        <Import moduleName="Diagnostics" />
        <Import moduleName="RemoteAccess" />
        <Import moduleName="RemoteForwarder" />
      </Imports>
      <Endpoints>
        <InternalEndpoint name="Redis" protocol="tcp" port="6379" />
      </Endpoints>
    </WorkerRole> 
    ```

4.  您可以使用以下命令从您的 Web 角色中引用 redis 服务器

    ```
    var ipEndpoint = RoleEnvironment.Roles["my.Worker"].Instances[0].InstanceEndpoints["Redis"].IPEndpoint;
    host = string.Format("{0}:{1}", ipEndpoint.Address, ipEndpoint.Port); 
    ```

希望有帮助。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-05T00:39:49.707

仅供参考，上面提到的来自 MS Open Tech 的 Redis on Windows 项目现在有一个 Azure 安装程序可用，这使得 Redis 可以轻松启动并在 PaaS 工作者角色上运行。这是一个详细的教程： http: [//ossonazure.interoperabilitybridges.com/articles/how-to-deploy-redis-to-windows-azure-using-the-command-line-tool](http://ossonazure.interoperabilitybridges.com/articles/how-to-deploy-redis-to-windows-azure-using-the-command-line-tool)（完全披露：我在 MS开放技术团队。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T11:41:34.763

有 [MS Open Tech: Redis on Windows](http://blogs.msdn.com/b/interoperability/archive/2012/04/26/here-s-to-the-first-release-from-ms-open-tech-redis-on-windows.aspx)项目。Windows 上的 Redis 可[在 GitHub](https://github.com/MSOpenTech/Redis) (https://github.com/MSOpenTech/redis) 上获得，但仍未标记为可用于生产。

另一篇文章是使用 Redis 的应用示例：“ [SignalR with Redis Running on a Windows Azure Virtual Machine](https://github.com/SignalR/SignalR/wiki/SignalR-with-Redis-Running-on-a-Windows-Azure-Virtual-Machine) ”

# jquery - 验证失败时防止专注于字段

> ID：10140673
> 
> 赞同：8
> 
> 时间：2012-04-13T12:18:11.253
> 
> 标签：jquery, jquery-validate

我经常使用[这个 jQuery 验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)来验证表单并且效果很好。真的很高兴，但是当您在表单上按提交时，它会自动将焦点放在无效的字段上。

在我当前的项目中，我有一个非常长的表单，当您按下提交按钮时，您的滚动条会跳到该字段（可能是因为它获得了焦点），但是当我的表单这么长时，我认为它有点烦人。有谁知道我可以如何禁用 jQuery validate 将焦点放在无效的输入字段上。

最好的祝福！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-13T12:29:14.433

使用该`focusInvalid`选项并将其设置为`false`：

```
$("#abc").validate({
  focusInvalid: false
}); 
```

[此处的工作示例和此处](http://jsfiddle.net/QPxFe/345/)的[文档](http://docs.jquery.com/Plugins/Validation/validate)（选项选项卡）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T11:56:45.210

```
$('#frmTableDate').validationEngine({ focusFirstField: false }); 
```

如果我们使用验证引擎插件来验证

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-17T08:41:55.383

```
$("#myform").validate({
onfocusout: false,
invalidHandler: function(form, validator) {
    var errors = validator.numberOfInvalids();
    if (errors) {                    
        validator.errorList[0].element.focus();
    }
} 
}); 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-04-13T12:25:31.487

1.  转到您的 jQuery 验证文件文件 (http://jquery.bassistance.de/validate/jquery.validate.js)
2.  使用 Control 和 F 查找
3.  删除 `.focus()`第 431 行。

# javascript - 使用 Javascript 启用复选框

> ID：10140678
> 
> 赞同：0
> 
> 时间：2012-04-13T12:18:20.210
> 
> 标签：javascript, html

我刚开始使用javascript，所以如果我的问题看起来很愚蠢，请原谅我。我想设计一个带有一些复选框的网页，这样当第一个被选中时，其他的就会被启用。我如何使用 JS 做到这一点？我写了以下代码：

```
function checkBox() {
    if (window.document.form1.mainbox.checked=true) {
        for (i=0;i<window.document.form1.Others.length;i++) {
            window.document.form1.Others[i].disabled=false;
        }
    }
    else {
        for (i=0;i<window.document.form1.Others.length;i++) {
            window.document.form1.Others[i].disabled=true;
        }
    }
} 
```

这个html：

```
<form name="form1">
<input name="mainbox" value="mainbox" onclick="checkBox()" type="checkbox"> Mainbox<br>
<input disabled="disabled" checked="checked" tabindex="0" name="Others"   type="checkbox">No. 1<br>
<input disabled="disabled" checked="checked" tabindex="1" name="Others" type="checkbox"> No. 2<br>
<input disabled="disabled" checked="checked" tabindex="2" name="Others" type="checkbox"> No. 3<br>
</form> 
```

问题是，在第一次单击时，其他复选框确实被启用，但在随后的单击中没有任何反应，即它们不会再次被禁用。我该如何纠正这个问题？任何帮助将不胜感激。谢谢！

**编辑**

我遵循了gabitzish的建议，它奏效了。但是，我现在想将 Others 作为参数传递，所以我写：

```
<input name="mainbox" value="mainbox" onclick="checkBox(Others)" type="checkbox"> Mainbox<br> 
```

并修改脚本如下：

```
window.checkBox = function(chkname) {
    if (window.document.form1.mainbox.checked==true) {
        for (i=0;i<window.document.form1.chkname.length;i++) {
            window.document.form1.chkname[i].disabled=false;
        }
    }
    else {
        for (i=0;i<window.document.form1.chkname.length;i++) {
            window.document.form1.chkname[i].disabled=true;
        }
    }
} 
```

但这不起作用。请帮帮我。我将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:21:30.190

这条线有问题（你缺少一个=）

```
if (window.document.form1.mainbox.checked=true) 
```

尝试将其更改为

```
if (window.document.form1.mainbox.checked) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:27:03.680

我用你的代码创建了一个 jsFiddle，并做了一些小的改动：http: [//jsfiddle.net/CUeDg/1/](http://jsfiddle.net/CUeDg/1/)

原始代码的问题是单击时未找到 checkBox() 函数。

**编辑：** 这是稍后编辑您的问题的解决方案：http: [//jsfiddle.net/CUeDg/3/](http://jsfiddle.net/CUeDg/3/) 我已将参数作为字符串传递给函数。

**稍后编辑：** 我怀疑您需要该参数来知道您需要切换哪些复选框。我也为此做了一个jsFiddle：http: [//jsfiddle.net/CUeDg/5/](http://jsfiddle.net/CUeDg/5/) （如果我怀疑错了，不要考虑这部分答案）

# join - 性别计数连接查询

> ID：10140683
> 
> 赞同：0
> 
> 时间：2012-04-13T12:18:49.223
> 
> 标签：join, count

我有三张桌子

```
Member - MemberID, gender, etc
Venue - VenueID, City, VenueName, etc
Event - EventID, EventDate, etc 
```

试图显示一个查询，该查询显示城市为格拉斯哥的每个事件以及 2012 年 1 月的时间段内的男性和女性人数。

到目前为止我的结果是。

```
SELECT Venue.VenueName, Venue.City, Event.Eventdate, (select count(gender) from member where gender = 'm') AS MaleTotal, (select count(gender) from member where gender = 'f') AS FemaleTotal
FROM Venue INNER JOIN Event ON Venue.VenueID = Event.FKvenueID
WHERE Venue.City='Glagow' and Month(eventdate)=1 and year(partydate) = 2011; 
```

这会产生一个表格显示

```
VenueName-ABC Venue, XYZVenue;

City- Glasgow, Glasgow;

Partydate- 04/01/2012, 05/01/2012   

MaleTotal-4,4   

FemaleTotal-3,3 
```

这是错误的，因为成员表中总共只有 7 个条目，每个条目只参加 1 个活动。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:37:10.510

假设成员和事件之间存在多对多关系，您可以尝试这样的事情

```
SELECT Venue.VenueName, 
       Venue.City, 
       Event.Eventdate,
       SUM (CASE gender WHEN 'm' THEN 1 ELSE 0 END) AS MaleTotal, 
       SUM (CASE gender WHEN 'f' THEN 1 ELSE 0 END) AS FemaleTotal 
FROM Venue INNER JOIN 
     Event ON Venue.VenueID = Event.FKvenueID INNER JOIN
     Event_Member ON Event_Member.EventID = Event.EventID INNER JOIN
     Member ON Member.MemberID = Event_Member.MemberID
WHERE Venue.City='Glagow' 
  and Month(eventdate)=1 
  and year(partydate) = 2011
GROUP BY Venue.VenueName, 
         Venue.City, 
         Event.Eventdate 
```

# php - 如何用 PHP 更新两个 MySQL 表？

> ID：10140685
> 
> 赞同：4
> 
> 时间：2012-04-13T12:18:51.150
> 
> 标签：php, mysql, database

我的数据库中有 2 个表，每个表都有一个名为 Catergory 的列。

```
Categories Table -
id | category_name
1  : basic
2  : midlevel
3  : highlevel
4  : profesional

Product Table - 
id | product | category_name
1  : adsl 1G : basic
2  : adls 2G : midlevel
3  : adsl 3G : highlevel
4  : adsl 4G : profesional 
```

当我更新表中的 *category_name* 时，`categories`我也想在`Products`表中更改它，但我不确定如何执行此操作。

我找不到并回答，因为我不知道如何正确表达它。

任何帮助，将不胜感激。

我的 update.php 现在的样子：

```
 db_update("UPDATE category SET 
    `category_name` = '".$_POST['category_name']."'
     WHERE category_id = '".$id."'"); 
```

应该是什么样子：？？？

{代码在这里}

注意：“已修复 - 我忘记将旧值发送到 save.php 文件，因此 $id 永远不知道要更新什么”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T12:23:20.000

您可以只运行两个更改两个名称的查询：

```
<?php
mysql_query("UPDATE categories SET category_name='" . $catname . "' WHERE category_name='basic'");
mysql_query("UPDATE product SET category_name='" . $catname . "' WHERE category_name='basic'");
?> 
```

如果您想在一个字符串中执行此操作，您可以使用多个查询、连接查询或存储过程来执行此操作。

一个字符串中的多个查询：

```
<?php
    mysql_query("
        mySqlQuery(UPDATE categories SET category_name='" . $catname . "' WHERE category_name='basic';)
        mySqlQuery(UPDATE product SET category_name='" . $catname . "' WHERE category_name='basic';)
    ");
?> 
```

加入查询：

```
<?php
mysql_query("
    UPDATE `product`,`categories`
    SET `product`.`category_name` = '" . $catname . "',
        `categories`.`category_name` = '" . $catname . "'
    WHERE `items`.`id` = '" . $catname . "'
");
?> 
```

如果上述方法都不起作用，我建议更改您的表，以便没有匹配的名称而是匹配的 ID。

您将获得以下信息：

```
Categories Table -
id | category_name
1  : basic
2  : midlevel
3  : highlevel
4  : profesional

Product Table - 
id | category_ID | product
1  : 1           : adsl 1G
2  : 2           : adls 2G
3  : 3           : adsl 3G
4  : 3           : adsl 4G 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:23:35.243

```
UPDATE Categories t1 
JOIN Product t2 ON (t1.category_name  = t2.category_name ) 
SET t1.category_name = ?
    t1.category_name = ?
WHERE t1.id = ? 
```

但是你自己觉得你的数据模型很丑。反规范化可能会更好...

让产品表参考类别表：

```
Product Table - 
id | product | category_ID

Categories Table -
id | category_name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T12:24:45.693

我建议您使用类别表的“id”字段将您的产品表链接到您的类别表。这样，您将链接到同一个类别，并且可以更改类别名称而不必担心破坏其他任何内容，因为您仍将链接到相同的类别 ID。

考虑以下：

```
Categories Table - id | category_name 1 : basic 2 : midlevel 3 : highlevel 4 : profesional

Product Table - id | product | category_id l : adsl 1G : basic 2 : adls 2G : midlevel 3 : adsl 3G : highlevel 4 : adsl 4G : profesional 
```

您当前的操作方式似乎很难维护，因为您将来可能需要添加另一个以某种方式使用类别的列，并且必须不断更改所有这些表的“category_name”列可能会最终变得非常混乱。通过链接到 id，您可以在类别表中进行任何您喜欢的更改，而不必担心您会丢失与任何其他表的链接（这是当前表会发生的情况）。

编辑：您可以通过使用诸如 INNER JOINS 之类的联接来获取有关类别的任何信息。我认为这将是一个更好的方法。此外，考虑在 products 表中的“category_id”列与类别表中的“id”列之间添加关系。这将确保一个类别不会在仍有产品链接时被删除。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T12:25:55.910

当您有像您提到的产品和类别这样的关系时，最好采用如下结构：

```
Categories Table -
id | category_name
1  : basic
2  : midlevel
3  : highlevel
4  : profesional

Product Table - 
id | product | category_id
1  : adsl 1G : 1
2  : adls 2G : 2
3  : adsl 3G : 3
4  : adsl 4G : 4 
```

因此，每当您需要显示产品的类别名称时，都可以使用连接来完成。因此，此更改将使您能够解决问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T12:26:49.407

我不知道你为什么`category_name`在两张桌子上都有，据我所知，这似乎毫无意义。

理想情况下，您的表结构应该是这样的：

```
Categories Table -
id | category_name
1  : basic
2  : midlevel
3  : highlevel
4  : profesional

Product Table - 
id | product | category_id
1  : adsl 1G : 1
2  : adls 2G : 2
3  : adsl 3G : 3
4  : adsl 4G : 4 
```

这允许您更改类别表中的类别名称，而无需更改产品表中的任何内容。

然后，您需要做的就是在 SELECT 查询中加入 2 个表，例如：

```
SELECT * FROM `categories`,`products` WHERE `categories`.`id`=`products`.`category_id` 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-02T09:22:41.017

试试这个希望它有帮助

```
$query = "UPDATE tblname SET colname = '$var';";
$query .="UPDATE tblname1 SET colname1 = '$var1';";
/* execute multi query */
if (mysqli_multi_query($conn, $query)) {
    do {
        /* store first result set */
        if ($result = mysqli_store_result($conn)) {
            while ($row = mysqli_fetch_row($result)) {
             printf("%s\n", $row[0]);
            }
            mysqli_free_result($result);
        }
        /* print divider */
        if (mysqli_more_results($conn)) {
            printf("");
        }
    } while (mysqli_next_result($conn));
} 
```

[http://php.net/manual/en/mysqli.multi-query.php](http://php.net/manual/en/mysqli.multi-query.php)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-05-04T12:58:39.863

是的，我以前也遇到过这个问题。线索在这里！请试试这个，

```
$sql = "UPDATE categorise c, product p SET category_name='$cate' ";
$sql = $sql. "WHERE c.id=p.id AND c.id like "."\"".$cate."\" "; 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-04-29T10:31:24.557

简单使用下面的代码，希望这对你有用。

```
 $sql = "UPDATE productSET category_name='$catname' WHERE id='$coode';";
          $sql .= "UPDATE categoriesSET category_name='".$catname."' WHERE category_name='$category_name';";
           if (mysqli_multi_query($db, $sql)) {
              do {
                  /* store first result set */
                  if ($result = mysqli_store_result($db)) {
                      while ($row = mysqli_fetch_row($result)) {
                        echo "Success";
                      }
                      mysqli_free_result($result);
                  }
                  /* print divider */
                  if (mysqli_more_results($db)) {
                      printf("");
                  }
              } while (mysqli_next_result($db));
          } 
```

# jsf - 渲染或显示弹出面板时如何防止渲染后窗口？

> ID：10140691
> 
> 赞同：0
> 
> 时间：2012-04-13T12:19:45.737
> 
> 标签：jsf, richfaces

我遇到了一个问题，比如将弹出面板渲染到后窗口或已经进行调用的页面时。我们怎样才能停止后窗的渲染。另请注意，我将 Jsf 2.0 与 Richfaces 4.0 一起使用。

```
<h:form>
<rich:panel id="propertyPanel">

<rich:messages id="propertyFormMsg"></rich:messages>   

<a4j:commandLink
              action="#{addPropertyBean.createPropertyPreAction}"
              title="Add New Property"
              oncomplete="#{rich:component('savePropertyPopUp')}.show()"
              render="propertyPopUpOutPutPanel"
              >
              <a4j:param
                assignTo="#{addPropertyBean.selectedPropertyId}"
                value="#{addPropertyBean.selectedPropertyId}"></a4j:param>
              <h:graphicImage styleClass="imageLink" library="images"
                name="add.png" />
 </a4j:commandLink>

</rich:panel>
</h:form> 
```

这是我的弹出面板：

```
<rich:popupPanel id="savePropertyOfferPopUp" modal="false"
    resizeable="true" height="430" width="800">

    <f:facet name="header">
      <h:outputText value="Save Property " />
    </f:facet>
    <f:facet name="controls">
      <h:outputLink value="#"
        onclick="#{rich:component('savePropertyPopUp')}.hide()">
                <h:graphicImage styleClass="noImageBorder" library="images" width="16" height="16" name="close.png" title="close" />
      </h:outputLink>
    </f:facet>

    <h:form id="propertyPopUpForm">
............
</h:form>
</rich:popupPanel> 
```

非常感谢任何会帮助我的人...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:40:53.700

在显示弹出窗口的 a4j:commandLink 上，添加属性：limitRender="true"。这会将渲染限制为您在 render="xxxx" 列表中指定的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:23:28.450

`onclick="#{rich:component('savePropertyPopUp')}.hide();return false;">`在 rich:popup 内部使用

# javascript - 循环 for + zendFramework

> ID：10140694
> 
> 赞同：-1
> 
> 时间：2012-04-13T12:20:00.393
> 
> 标签：javascript, for-loop

我的脚本中有这个循环“for”

```
 function (respond) {

    var json=JSON.stringify(respond);
    var objet = eval('(' + json + ')');
    for ( var count = 0 ; count <objet.length  ; count++ ) { 
    jQuery("#SubCategory").empty().append("<option value='" + count + "'>" + objet[count].name+ "</option>"); 
    }
 } 
```

编辑强调`objet.length ;` ，objet.length 是数组对象“objet”中的对象数。

你能帮我么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:15:38.837

这对我有用

```
objet = [{name :"Womens Clothes"}, {name: "Mens Clothes"}, {name: "Kids Clothes"}];
console.log(objet)
objet.length;
for ( var count = 0 ; count <objet.length; count++ ) { 
       alert(objet[count].name);
    } 
```

更改变量名，真的很混乱

如果使用 jquery，也许你需要这个

```
try
            {

                data = $.parseJSON(data.responseText);
                if (typeof data.id === undefined) {
                      throw "Err1";
                    }
            }
            catch(err)
            {
...
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T11:38:13.107

如果您将使用以下代码，它将起作用。

```
<script type="text/javascript">
    var respond = [{name :"Womens Clothes"}, {name: "Mens Clothes"}, {name: "Kids Clothes"}];
    var objet = eval(respond);

    for( var count = 0 ; count < objet.length; count++ ) { 
        alert(count + " -- " + objet[count].name);
    }
</script> 
```

您不需要同时使用“stringify”和“eval”，因为它的工作方式类似。

谢谢

# blackberry - 如何在黑莓上的 RichTextField 中显示 HTML？

> ID：10140695
> 
> 赞同：1
> 
> 时间：2012-04-13T12:20:04.600
> 
> 标签：blackberry

我有简单的 HTML

```
<p>simple text</p>
<p>simple text</p> 
```

我想在 RichTextField 中显示它。这个怎么做？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:14:34.290

老讨论说你必须解析 Html 文本。[http://supportforums.blackberry.com/t5/Java-Development/Displaying-HTML-Data-in-TextField-RichTextField/td-p/1298771](http://supportforums.blackberry.com/t5/Java-Development/Displaying-HTML-Data-in-TextField-RichTextField/td-p/1298771)，

但是您也可以在 RichTextField 上使用 BrowserField instate，它将正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T21:41:09.823

听起来您需要一个自定义类来解析您的 HTML。[这里有一个来自BB 开发者论坛](http://supportforums.blackberry.com/t5/Java-Development/Simple-HTMLTextField-implementation/m-p/454300/highlight/true#M90206)的有用类 HTMLTextField

# android - 如何在文本中添加重音到android中的语音

> ID：10140698
> 
> 赞同：1
> 
> 时间：2012-04-13T12:20:17.237
> 
> 标签：android, text-to-speech

我想阅读带有口音的文本，但没有成功。我进行了更多搜索，发现我们可以更改语音语言但不能更改口音。如果可能的话，这在 android 中是否可行，然后请建议我如何执行此操作. 谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:32:33.540

AFAIK，在 Android 中不可能。对不起，如果我错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:39:33.193

AFAIK 这还不可能。您最多可以存储某些单词的语音。看看定制 TTS 引擎的可能性，如果可行的话。

# html - 是否可以有一个 html 链接链接到不同的 html 页面而无需单击？

> ID：10140699
> 
> 赞同：0
> 
> 时间：2012-04-13T12:20:20.300
> 
> 标签：html, hyperlink

我有一些用于 python 项目的自动生成的 html 文档。自动生成时，“主页”在 /manual/_build/html/index.html 中创建为 index.html。我想在链接到 index.html 的根文件夹中有一个 manual.html。我可以在manual.html中加入以下内容：

```
<a href="manual/_build/html/index.html">link</a> 
```

这使得 index.html 的可点击链接。我想直接发送到 index.html 而无需单击任何内容。这可能吗？

谢谢，尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:23:50.723

只需将其重定向到 index.html ..将其写入 manual.html 中...

```
<script>
document.location = "manual/_build/html/index.html";
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:26:51.983

将以下内容添加到您的 HTML`<head>`标记中：

```
<meta HTTP-EQUIV="REFRESH" content="0; url=index.html"> 
```

# sql-server - 向现有列添加外键约束

> ID：10140703
> 
> 赞同：2
> 
> 时间：2012-04-13T12:20:32.140
> 
> 标签：sql-server, tsql, foreign-keys, foreign-key-relationship

我有一个数据库，它在几年中经历了一些重大转变，从几个不同的编码员那里得到了输入。一些表包含通过引用列对其他数据的引用，但没有外键约束。这意味着有些表可能包含死链接。

我想为所有引用列添加外键约束。当某些数据可能引用死链接而其他数据实际上可能为空时，我如何确保这会成功。

我想我需要这样说：

```
ALTER TABLE dbo.Users ADD CONSTRAINT FK_Users_Persons FOREIGN KEY
(
    Person_ID --In some cases Person_ID will be null
) REFERENCES dbo.People
(
    Person_ID
) ON UPDATE  NO ACTION 
ON DELETE  NO ACTION 
NOT FOR REPLICATION

GO
ALTER TABLE dbo.Users
    NOCHECK CONSTRAINT FK_Users_Persons
GO
COMMIT 
```

请让我知道这是否准确以及是否有任何隐藏的陷阱？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T12:36:50.887

**就试一试吧！！**如果有问题 - 引用表中不存在的值 - SQL Server 会告诉你，并且不会发生任何不好的事情 - 相信我！:-)

说真的：如果存在问题，例如，其中的行`Users`具有无效`Person_ID`值，那么 SQL Server 将**不会**创建 FK 约束——就这么简单。

在这种情况下，如果`Users`表中确实有未引用表中有效值`Person_ID`的条目`Person`- 您需要先修复这些条目。将它们设置为`NULL`（如果您无法确定他们引用的人），或者将它们设置为有效`Person_ID`- 然后尝试再次添加您的 FK 约束。

您还可以在使用类似这样的查询应用 FK 约束之前找到这些条目：

```
 SELECT (columns)
 FROM dbo.Users
 WHERE Person_ID IS NOT NULL 
 AND Person_ID NOT IN (SELECT DISTINCT Person_ID FROM dbo.Person) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T13:39:45.510

使用`LEFT JOIN`. 这将`NULL`在无法加入的项目上显示 s，这意味着引用已被删除。

# c# - 将数据从 Datagrid 取回 SQL Server 数据库

> ID：10140709
> 
> 赞同：0
> 
> 时间：2012-04-13T12:20:49.560
> 
> 标签：c#, sql-server, winforms, datagrid

我提前道歉，因为我知道这对你们大多数人来说是一个非常基本的问题，但我真的很难找到我需要的相关信息，并且想知道是否有人可以向我发送正确的方向。

我有一个 winforms 应用程序和一个 SQLserver 数据库。我知道如何用我的数据库中的数据填充各种控件（包括数据网格）。但是，我正在努力解决的是如何让用户对数据网格中的数据的操作，返回到 sql server 数据库。

我也知道如何从文本框中获取数据并使用 TSQL 将其发布回数据库，但数据网格暗示了我。我知道这与数据绑定有关，但我没有取得太大进展。

这是我目前填充数据网格的方式：

```
string sqlText = "SELECT * FROM tblCaseTypes;";
string conStr = cConnectionString.BuildConnectionString();
SqlConnection linkToDB = new SqlConnection(conStr);
SqlCommand sqlCom = new SqlCommand(sqlText, linkToDB);
SqlDataAdapter myAdapter = new SqlDataAdapter(sqlCom);
myAdapter.Fill(tsh);
dataTimesheet.DataSource = tsh; 
```

我搜索了各种资源，但没有发现任何非常有用的东西。任何人都可以向我指出一篇关于如何在数据网格中获取用户输入数据的好（初学者）文章的方向，然后将其从何处发布回 sqlserver 数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T13:01:07.017

`tsh`我从var 是 DataSet 或 DataTable的假设开始。
如果这是真的，那么可以使用相同的 SqlCommand 创建一个新的 SqlDataAdapter 来完成更新，但是您可以使用 Update 方法传递从网格的 DataSource 中提取的 DataTable 或 DataSet，而不是使用 Fill 方法。在执行 Update 方法之前，您将 DataAdapter 的 SelectCommand 属性设置为用于检索记录的相同 SqlCommand

```
DataTable dt = dataTimesheet.DataSource as DataTable;
string sqlText = "SELECT * FROM tblCaseTypes;"; 
string conStr = cConnectionString.BuildConnectionString(); 
SqlConnection linkToDB = new SqlConnection(conStr); 
SqlDataAdapter myAdapter = new SqlDataAdapter(); 
myAdapter.SelectCommand = new SqlCommand(sqlText, linkToDB);
myAdapter.Update(dt); 
```

通过这种方式，您将构建更新数据库所需的相应 INSERT、DELETE 和 UPDATE SqlCommand 的负担传递给 SqlDataAdapter。

但是应该注意的是，SqlDataAdapter 必须在内部执行 SelectCommand 才能构造 INSERT、UPDATE 和 DELETE SQL 命令。因此，这可能会影响性能。要获得最佳性能，请指定您的 INSERT、DELETE 和 UPDATE 命令，将它们显式分配给 SqlDataAdapter 的 InsertCommand、DeleteCommand 和 UpdateCommand 属性

一些参考资料：
[从 DataGridView 更新数据库](http://niitdeveloper.blogspot.it/2010/12/update-database-from-datagridview.html)
[如何在 Visual C# .NET](http://support.microsoft.com/kb/308507/en-us)
[DbDataAdapter.Update 方法中使用 SqlDataAdapter 对象更新 SQL Server 数据库](http://msdn.microsoft.com/en-us/library/z1z2bkx2.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T13:13:18.653

您应该在适配器中实现插入/更新/删除命令。

```
myAdapter.InsertCommand = new SqlCommand("INSERT INTO yourTable VALUES(@param1, @param2)", conn);
myAdapter.InsertCommand.Parameters.Add("@param1",...); 
```

只需对更新和删除命令执行相同操作即可。然后，使用适配器填充 DataSet 并将其作为数据网格的数据源。

```
DataSet ds = new DataSet();
myAdapter.Fill(ds);
dataGrid1.DataSource = ds; 
```

当您想将更改发送到数据库时，您只需调用 myAdapter.Update 方法。

```
myAdapter.Update(ds); 
```

这里有一篇不错的文章：[在 DataGridView 中添加、编辑和删除](http://www.codeguru.com/csharp/.net/net_data/datagrid/article.php/c13041/Add-Edit-and-Delete-in-DataGridView.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T13:00:16.020

这是一个关于如何从数据网格进行更新的非常基本的示例

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datagrid.updatecommand.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datagrid.updatecommand.aspx)

基本上你需要一个

```
 OnEditCommand="ItemsGrid_Edit" 
```

然后在你的

```
 Sub ItemsGrid_Update(sender As Object, e As DataGridCommandEventArgs) 
```

您需要将项目转换回文本框以获取其值的方法

```
 Dim qtyText As TextBox = CType(e.Item.Cells(3).Controls(0), TextBox) 
```

然后你可以在你的 SQL UPDATE 中使用这些值

哦，如果许多用户会使用它，你可能应该使用存储过程或 Linq，而不是直接使用 SQL。

上面的代码也是VB.net，你应该在你的问题中使用标签来说明你使用的是什么语言

# javascript - 在 Facelets 中使用 JavaScript 时出现 XHTML 解析错误

> ID：10140711
> 
> 赞同：0
> 
> 时间：2012-04-13T12:20:57.740
> 
> 标签：javascript, jsf, facelets

我正在制作一个简单的加载栏，Facelets 似乎不喜欢我的 JavaScript 中的条件语句。

这是我的代码：

```
<div class="loader_bar">
   <div></div>
</div>
<script type="text/javascript">
            $(document).ready(function() {

setTimeout(function() {
    var current_width = parseFloat($('.loader_bar div').css('width'));
    var max_width = parseFloat($('.loader_bar').css('width'));
    var next_width = current_width / max_width * 100 + 1;
    if (next_width <= 100) {
        $('.loader_bar div').css('width', next_width + '%');
        setTimeout(arguments.callee, 10);
    }

}, 100);
});​

        </script> 
```

当我加载页面时，我收到以下错误：

```
javax.servlet.ServletException: Error Parsing /device/main/site/test.xhtml: Error
Traced[line: 69] The content of elements must consist of well-formed character data
or markup. 
```

这对应于`if statement`我的JS函数“<=”中的运算符

```
if(next_width <= 100). 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:29:01.807

尝试将 javascript 代码放在 CDATA 标记中

```
<script type="text/javascript">
<![CDATA[
$(document).ready(function() {
....
}
]]>
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:39:31.960

如果您使用 JSF，您可能需要考虑将 JS 代码放入 .js 文件中。然后，例如，如果您已将`myScripts.js`脚本文件放入`/WebContent/theme`文件夹中，则可以将其包含在您的`jsp`页面中，如下所示：

```
<script type="text/javascript"
    src='<%=renderResponse.encodeURL(renderRequest
                    .getContextPath() + "/theme/myScripts.js")%>'
    charset="UTF-8"></script> 
```

# linux - 内核模块一直卡住？

> ID：10140713
> 
> 赞同：2
> 
> 时间：2012-04-13T12:21:10.597
> 
> 标签：linux, kernel-module

每次指针指向空值或其他东西时，模块都会卡住并拒绝被删除或卸载。摆脱它的唯一方法是重新启动机器。无论如何不必如此频繁地重新启动？我已经尝试通过使用`rmmod -f`但没有用来强制它删除。我正在运行内核 v 2.6.35

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T12:46:05.950

不，一旦内核在执行过程中遇到异常（即 oops），它可能处于不一致状态。除了重新启动之外，没有其他方法可以从中恢复。

我什至认为内核在遇到 oops 后尝试继续运行是错误的。（您可以通过设置为 1 来获得该行为`/proc/sys/kernel/panic_on_oops`。）

# c# - 一个 MSTest 设置文件中的不同 UnitTest 执行

> ID：10140714
> 
> 赞同：2
> 
> 时间：2012-04-13T12:21:24.567
> 
> 标签：c#, visual-studio-2010, unit-testing, mstest

我希望有人能帮助我。

我在 VS2010 中对我的 C# 应用程序有很多 UnitTest，因此我想并行执行它们，这样我就可以从我的四核机器中受益。这可以通过在 Local.testsettings 中添加**parallelTestCount="0"**来“轻松”完成。

但是我的一些 UnitTest（大约 50 个）不是线程安全的，而不是重新设计它们，我只是希望它们以非并行模式运行。

这可能吗？如果可以，该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:41:27.780

You can't change the parallelism on a single test or set of tests. You could try to create a second test settings file and a second assembly containing your "unsafe" tests; you can define the folder that test assemblies are loaded from under the "Unit test" tab of the test settings dialog.

That said, your tests *should* be thread-safe. A unit test should be able to run in any order, in any environment, and always pass -- unless, of course, something changed in the code they're testing.

# ios - 自动词生成器

> ID：10140721
> 
> 赞同：0
> 
> 时间：2012-04-13T12:21:54.960
> 
> 标签：ios, xcode, random, generator

（我在 Xcode for iOS 中工作）

我正在制作文字游戏，当我从菜单中单击游戏时，它会切换到游戏视图。我希望它自动显示我插入的随机单词。我读到我必须把我的代码放在 ViewDidLoad 中，我做到了。

但是，代码是使用 Button 的原始代码，然后显示一个随机单词，所以我不知道如何编辑代码。

这里是：

```
.h

IBOutlet UILabel *textview;

}

-(IBAction)random; 
```

和 .m 文件

```
- (void)viewDidLoad
{

[super viewDidLoad];
// Do any additional setup after loading the view from its nib.

-(IBAction)random { 
    int text = rand() % 5;
    switch (text) {
        case 0:
            textview.text = @"BLUE";
            break;
        case 1:
            textview.text = @"GREEN";
            break;
        case 2:
            textview.text = @"RED";
            break;
        case 3:
            textview.text = @"YELLOW";
            break;
        case 4:
            textview.text = @"PINK";
            break;
        default:
            break;
    }
} 
```

我希望有人可以帮助我谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:31:16.723

假设一切都是视图控制器的一部分，只需从 viewDidLoad 调用 random() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:32:26.267

只需将您的代码从 IBAction 切换到您的 viewDidLoad - 确保（如果您使用 IB 或故事板）您有一个 UILabel 链接到您的代码（确保您在 .m 中合成它） -

```
@property (nonatomic, retain) IBOutlet UILabel *myLabel; 
```

...然后在 viewDidLoad -

```
self.myLabel.text = whateverText; 
```

（您不必将其作为属性，但它使内存管理更容易）

此外，为 UILabel 使用名称“textview”可能不是一个好主意，因为您很容易认为它是一个 UITextView，它是一种不同的动物......

# google-maps-api-3 - 如何根据行驶距离使用 google places api 到附近的酒店

> ID：10140725
> 
> 赞同：0
> 
> 时间：2012-04-13T12:22:16.637
> 
> 标签：google-maps-api-3, google-places-api

我知道我可以通过使用 google places api 从中心节点给出圆的半径来搜索节点附近的酒店（例如）。但这会返回其他城市的地方。原因是地理上该地方位于给定的半径内。但行驶距离不同。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:29:01.667

Places Search API 将返回指定区域内的地点，这些地点按知名度（流行度；“rankby=prominence”）或独立于区域的距离（“rankby=distance”）排名。没有按行驶距离排名的选项。

要获得基于行驶距离的排名，您可能需要考虑将 Places Search API 与 Distance Matrix API 结合使用。

[https://developers.google.com/maps/documentation/distancematrix/](https://developers.google.com/maps/documentation/distancematrix/)

距离矩阵 API 将根据一个或多个起点位置以及一个或多个目的地位置返回驾驶、步行或骑自行车的距离。

# java - 动态填充字符串数组

> ID：10140726
> 
> 赞同：1
> 
> 时间：2012-04-13T12:22:17.260
> 
> 标签：java, android, arrays

我正在尝试为我父母的业务制作应用程序，但此时我发现了一个问题。

我正在尝试从 SQLite 数据库中获取一些字符串并将它们存储到一个数组中。

我正在尝试这个：

```
 //This opens the db
            SQLManager info = new SQLManager(this);
            info.open();              

            String[] data = {"", "", "", ""};

            for (int i = 1; i == 3; i++)
            {
                data[i]=(info.getProduct(i));
            }

            info.close();
            tv.setText(data[0]);
            tv.setText(data[1]);
            tv.setText(data[2]); 
```

`info.getproduct`是一种从数据库中获取字符串的方法。这工作正常。问题是我无法更新数组的值。它总是显示相同的。

任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T13:12:14.720

你来做这件事，

```
 String[] data = new String[4];

        for (int i = 0; i <data .length; i++)
        {
            data[i]=(info.getProduct(i));
        } 
```

它可以帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:24:34.960

循环中的第二个参数`for`应该作为 - 条件工作`while`，这意味着循环将在它为真时运行，因为`i`从 1 开始它不会是 3，因此循环立即终止。你可能想要一个看起来像这样的循环：

```
for( int i = 1; i<=3; i++ ){ //Are you sure you want to start from 1? The first element in an array has index 0.
    //Loop
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:24:52.793

你应该做这个

```
String[] data = {"", "", "", ""};

            for (int i = 0; i <data .length; i++)
            {
                data[i]=(info.getProduct(i));
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T12:27:14.370

此循环将永远不会运行，您应该将其更改为：

```
for(int i =0;i<3;i++){
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T12:27:29.813

for循环的使用是这样的

```
for(initializatin;condition;increment) 
```

而在您的情况下，它不是条件，它是一个语句，因此请继续努力。

你可以改成`for (int i = 1; i <= 3; i++)`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-13T12:25:09.160

不是 i==3，在 for 循环中使用 i<3

# c++ - 模板化函数，其参数是模板化类

> ID：10140727
> 
> 赞同：0
> 
> 时间：2012-04-13T12:22:22.057
> 
> 标签：c++, templates

我意识到有很多类似的问题，但我找不到任何可以解决我的问题（阅读：我没有真正理解答案，因此我可以将其应用于我的案例）

我有以下功能：

```
void printVariable(map<string, bool*>::iterator it)
{
   cout << it->first << " " << *(it->second) << endl;
} 
```

现在，如果我有一个，`map<string, bool*> mapping`我可以执行以下操作：`printVariable(mapping.begin());`

这行得通，现在我也有 aa`map<string, int*>`并且希望能够做同样的事情，所以我想我改变了 printVariable 函数：

```
template <typename T>
void printVariable(map<string, T*>::iterator it)
{
   cout << it->first << " " << *(it->second) << endl;
} 
```

但是，这会产生编译错误（gcc）：

```
error: variable or field 'printVariable' declared void
error: expected ')' before 'it' 
```

我想我可以通过重载函数来轻松解决这个问题。但我想知道为什么上述方法不起作用。

Edit2：删除了声称正确解决方案错误的文本

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T12:30:01.167

您必须说`typename`要消除依赖名称的歧义：

```
template <typename T>
void printVariable(typename map<string, T*>::iterator it)
//                 ^^^^^^^^ 
```

但是，请注意，这不是可演绎的上下文，因此这种形式不是非常方便。

更好的是，只需将整个迭代器设为模板参数：

```
template <typename Iter>
void printVariable(Iter it)
{ /* ... */ } 
```

这样，您还可以捕获具有非标准比较器或分配器的映射，以及无序映射等。

* * *

这是一个简单的思想实验，说明为什么在第一种情况下您没有可推断的上下文：`T`在以下调用中应该如何推断`foo`？

```
template <typename T> void foo(typename Bar<T>::type);

template <typename T> struct Bar { typedef char type; };
template <> struct Bar<int>      { typedef int type; };
template <> struct Bar<double>   { typedef int type; };

foo(10); // What is T? 
```

# django - Django+backbone+tastypie：处理关系

> ID：10140729
> 
> 赞同：7
> 
> 时间：2012-04-13T12:22:27.913
> 
> 标签：django, model, backbone.js, foreign-keys, tastypie

假设我有 Django 模型 Category 和 Item，Item 的 ForeignKey 指向 Category（这个字段被命名为 category），我在 Backbone 中创建了 Item 模型，如下所示：

```
defaults:{ name:'', category_id:''} 
```

但是当我保存模型一个项目时，我得到了错误：

`raise self.field.rel.to.DoesNotExist\n\nDoesNotExist\n`

在 django/db/models/fields/related.py 中，似乎 category_id 字段未被识别为项目模型的字段。

我正在使用tasteapi，并且ItemModel和ItemResource是：

```
class Item(models.Model):
  id = models.AutoField(primary_key=True)
  category=models.ForeignKey('categories.Category')
  name = models.CharField(max_length=300)

class ProductResource(ModelResource):
  category=fields.ForeignKey(CategoryResource,'category')

class Meta: 
    queryset= Product.objects.all()
    resource_name='product'
    authorization= Authorization() 
```

一些细节：当 related.py 文件执行时`val = getattr(instance, self.field.attname)`self.field.attname 是 store_id 但 isnttance.store_id 是 None，即使骨干模型有，作为 store_id 值，26。

一些帮助？

# php - PHP 脚本完成运行后显示“已完成”文本

> ID：10140731
> 
> 赞同：0
> 
> 时间：2012-04-13T12:22:34.437
> 
> 标签：php, javascript, html

当我的脚本完成加载时，如何获得一些要输出的文本。

我的脚本获取 url 列表的元数据我想要发生的是：

单击开始，文本显示加载脚本完成时显示已完成

用户可以单击导出按钮并获取数据！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:31:08.010

由于 PHP 和 Web 的工作方式，您无法真正做到这一点。基本上，PHP 的输出在发送到客户端之前会被缓冲，因此即使您放在`print "Finished"`脚本的末尾，客户端也会等待响应，直到整个脚本完成，然后显示整个输出立刻。

还有脚本超时，这意味着如果您的脚本完成的时间长于配置的时间（默认为 30 秒），它会被中止并向客户端发送一条错误消息。

最优雅的解决方案是在脚本之外执行实际工作（如果需要超过一分钟，请考虑使用 cron 作业），并使用文件或数据库在脚本和 cron 作业之间进行通信。那么你要做的是：

1.  脚本将数据添加到处理队列并显示“正在加载，请稍候”
2.  cron 作业获取数据并开始处理，更新队列中的“完成百分比”字段
3.  脚本每隔 10 秒左右使用 javascript 重新加载一次，从队列中读取更新的状态并显示
4.  作业完成后，cron 作业将队列中的作业标记为已完成并进入睡眠状态，直到有更多作业可用；脚本看到作业已完成，显示“已完成”并停止重新加载。

这是基本设置；为了获得更舒适的用户体验，您可能希望使用某种 Ajax 心跳而不是不断地重新加载。

# android - 在 Eclipse 中解析 A ndroid sdk 内容和初始化 java 工具时出错

> ID：10140732
> 
> 赞同：13
> 
> 时间：2012-04-13T12:22:34.510
> 
> 标签：android, eclipse, macos, nullpointerexception

每次打开 Eclipse 时，都会收到以下错误消息：

Android SDK 内容加载器：parseSdkContent 失败 java.lang.NullPointerException

初始化 Java 工具 在“初始化 Java 工具”期间发生内部错误。java.lang.NullPointerException

为 Android 2.2 加载数据为 android-8 解析数据失败 java.lang.NullPointerException

为 Android 2.3.3 加载数据为 android-10 解析数据失败 java.lang.NullPointerException

为 Google API (Google Inc.) 加载数据 为 Google Inc. 解析数据：Google APIs:8 failed java.lang.NullPointerException

截图见链接：http: [//i.stack.imgur.com/lhhQQ.png](https://i.stack.imgur.com/lhhQQ.png)

（我正在使用 OS X Lion 和 Eclipse Helios）

首先，我阅读了一些帖子，说是 .android 配置文件中的 AVD.ini 文件导致了问题。[我尝试按照Android SDK Content Loader failed with NullPointerException](https://stackoverflow.com/questions/5019051/problem-with-android-sdk-content-loader)中的建议删除所有整个 .android 配置文件文件夹。这并没有纠正我的问题。

我尝试删除整个 Android SDK 文件夹，再次下载并通过它安装了几个 Android 版本。还是一样的错误信息...

为了确保我没有任何旧插件或问题，我卸载了 eclipse，再次下载并再次安装了 Android 插件。（所以插件是最新的）。

当我进入我的一个 Android 项目时，我在使用 R 文件访问资源的地方收到错误消息。常规 Java 项目运行良好，但所有 Android 项目都会出现带有白色十字的小红框。从昨天开始，我一直在寻找解决这个问题的方法，但在这一点上，我完全无能为力，如果能得到任何帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T11:15:02.450

关闭所有打开的项目并退出 Eclipse。现在您可以打开 Eclipse 而不会出现错误。开始一一打开您的项目，找出导致问题的原因。这很可能是因为您在 AVD 管理器中删除了设备配置文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T10:53:01.363

我今天早上遇到了完全相同的问题。这是与工作区相关的问题。

**解决方案 1**
我查看了我的 .metadata 并阅读了 .bak_ *number* .log 文件。一些布局无法解析，我的项目与文件系统不同步。所以我删除了所有 .bak_number.log 文件。重新启动 Eclipse，整个工作区应该会按照您之前离开的方式再次工作。

**解决方案 2**
但是，如果不是因为与文件系统不同步。更改工作区，然后从以前的工作区导入所有 Eclipse 项目。感谢 project.properties 文件，仍然保留了依赖项。

PS：我应该回到 IntelliJ :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T23:13:29.053

不要删除所有完整的 .metadata

*   备份.元数据
*   仅删除 .metadata/.plugins/org.eclipse.core.resources/.project
*   重启日食

观察：创建项目文件夹

此外 - 如果您使用 svn/git/hg 有代码存储库链接，它将被破坏，所以要恢复

*   关闭日食
*   从备份中复制相关项目以与 .metadata/.plugins/org.eclipse.core.resources/.project 中的当前项目合并
*   重启日食

Downfall - 可能会发生零星的失败错误（同步或其他东西） - 无害

再次回来

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T04:46:48.193

1.  首先关闭你的 Eclipse

2.  转到您的工作区并将 .metadata 重命名为 tushmetadata 并转到 tushmetadata->.plugins -> org.eclipse.core.runtime -> .settings 并从中复制所有文件。

3.  现在打开 Eclipse 并转到您的工作区，在那里您可以看到新生成的 .metadata 文件夹，转到 .plugins -> org.eclipse.core.runtime -> .settings 并粘贴到此处，不要覆盖任何文件。

4.  尝试“Hello World”项目并运行它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T12:46:49.627

对我来说，`NullPointerException`问题的根源是一个主机端 Junit 测试项目，它引用（和测试）来自 Android 项目的代码。它没有`project.properties`文件。它不是一个 Android 项目，但由于某种原因，较新版本的 SDK 以某种方式期望该文件存在。`project.properties`为了解决这个问题，我只是将一个文件从 Android 项目复制到主机单元测试项目。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T10:56:58.183

这很奇怪。就我而言，当我进行颠覆更新时，我遇到了这个问题。原因是我的 project.properties 文件损坏（由于颠覆冲突）。我刚刚更正了文件，问题得到了解决。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-06T18:52:02.443

我发现了另一个原因，我在 project.properties 文件中的空白行中添加了一个空格字符。当我最终运行`android update project -p .` 程序（android.exe）时抛出了 NPE 异常。当我从空行中删除空格时，`android update project`命令起作用并且eclipse开始表现（运行`clean`几次后）。

这发生在 Windows 7 64 位机器上的 r20 版本的 Android SDK 上。

仅供参考，我解决问题的更改在[http://code.google.com/p/android-daisy-epub-reader/source/detail?r=517](http://code.google.com/p/android-daisy-epub-reader/source/detail?r=517)`project.properties`公开

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-20T08:43:10.383

尝试从您的 android 工作区文件夹中删除文件 .metadata。.Metadata 文件夹包含 eclipse 的所有配置文件。这个对我有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-20T08:01:51.807

大约一年前，当我遇到这个问题时，我的工作区中有一些项目需要特定的 Android SDK 级别（比如说 2.1），而我没有在 Android SDK 中安装它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-04-22T10:30:56.510

你的答案可能是对的。我所做的是改变我的工作空间。我从 git 重新下载了我要处理的项目，然后重新导入它。现在它工作正常:) 也许这个项目中有一些文件使错误消息出现？不知道....

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-30T11:58:31.187

如果您使用的是 SVN 或 GIT，请检查 project.properties 是否存在冲突。有时项目因此无法打开。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-06-21T16:17:42.733

slott 的回答很有帮助。删除 .metadata 或重新安装 eclipse 并没有。诀窍是隔离导致问题的项目，删除其 .settings 文件夹和 .project 文件并重新导入。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-07-30T20:40:50.353

我发现它只是在项目文件夹中缺少 project.properties 文件。从另一个项目复制一个后，错误消失了。project.properties 中唯一有效的行是

```
target=android-8 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-12-06T17:16:26.993

这个解决方案对我有用。

关闭 Eclipse 并删除工作区文件夹中的所有 .markers。

重新启动 Eclipse（一旦我不得不重新启动它两次，它就挂在第一​​个上，但在第二个上工作，没有明显的原因）。

当然，首先备份它们总是安全的。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-04-26T09:04:38.380

我已经删除了 .metadata 文件夹，但是在它之后，当我运行 eclipse 时，我无法创建任何 Android 项目。为了解决它，我做了以下工作：

1.  进入eclipse的主工作目录
2.  本地化文件夹 com.android.ide.eclipse.adt 应该在 .oldMetadata/.plugins/
3.  将其复制到新的 eclipse 配置中：.metadata/plugins/

在这里查看完整的解决方案： [http ://www.jiahaoliuliu.com/2011/06/running-android-sdk-in-eclipse-errors.html#solution4](http://www.jiahaoliuliu.com/2011/06/running-android-sdk-in-eclipse-errors.html#solution4)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-04-22T18:35:15.703

我希望这对某人有用并节省他/她的时间：我的同事面临同样的问题，我们几乎做了这里提到的所有事情，但没有运气。最后，我们更改了清单文件中的 Android SDK 版本，它工作了。

# php - Php Array chunk：为第一个块回显不同的东西

> ID：10140733
> 
> 赞同：1
> 
> 时间：2012-04-13T12:22:36.553
> 
> 标签：php, arrays

我正在使用array_chunk，但我希望能够为块中的第一个数组回显一些不同的东西。不知道如何做到这一点，找不到任何东西。任何帮助/指导将不胜感激。

说我使用：

```
 foreach (array_chunk($entries, 4) as $row) { 

    if (the array chunk is the first) {echo '<div class="cn_page" style="display:block;">';}
    else {echo '<div class="cn_page">';} 

} 
```

完整代码如下：

回声'

```
<div id="cn_preview" class="cn_preview">';

foreach($entries as $entry){
echo '<div class="cn_content" style="top:5px;">
      <img src="newsslider/images/polaroidphotobar.jpg" alt=""/>
      <h1>'.$entry->title.'</h1>
      <span class="cn_date">'.$entry->modified.'</span>
      <span class="cn_category"></span>
      <p>'.$entry->text.'</p>
      <a href="" target="_blank" class="cn_more">Read more</a>
      </div>';     
}
echo '</div>';

echo '<div id="cn_list" class="cn_list">';

foreach (array_chunk($entries, 4) as $row) { 

if (the array chunk is the first) {echo '<div class="cn_page" style="display:block;">';}
else {echo '<div class="cn_page">';}

foreach ($row as $entry) {
$i++;

if ($i == 1){echo '<div class="cn_item selected">';}
else {echo '<div class="cn_item">';}

echo '<h2>'.$entry->title.'</h2>
<p>'.$entry->text.'</p>
</div>';
echo '</div>'; 

}
echo '</div>'; 
}
echo'<div class="cn_nav">
            <a id="cn_prev" class="cn_prev disabled"></a>
            <a id="cn_next" class="cn_next"></a>
</div>
</div>
</div>'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T12:26:09.300

那将是：

```
foreach (array_chunk($entries, 4) as $key => $row) { 
    if ($key == 0) {
        echo '<div class="cn_page" style="display:block;">';
    } else {
        echo '<div class="cn_page">';
    } 
} 
```

# actionscript-3 - Actionscript 3.0 Flash中精灵的碰撞检测

> ID：10140737
> 
> 赞同：1
> 
> 时间：2012-04-13T12:23:19.123
> 
> 标签：actionscript-3, flash, collision-detection

我正在 AS3.0 中制作类似 achtung die kurve 的游戏。到目前为止，我已经完成了 4 个不同玩家的动作，并且效果很好。

我现在要进行碰撞检测，以测试“蠕虫”是否正在与彼此或自己的尾巴发生碰撞。

据我了解，如果我使用 hitTestObject(); 它将使用整个对象的配准区域，这将是一个大问题，因为这种配准会进行包含所有对象的 4 面配准。因此，如果使用它，它只会通过输入这个矩形而不是击中实际的蠕虫来“碰撞”。这理解正确吗？

我一直在研究不同的碰撞检测方法，但似乎找不到适合我项目的最佳方法。

我的想法是检查“蠕虫”是否在白色背景上绘制它们的新精灵。如果不是，那么它一定是撞到了什么东西。

你可以在这里看到我是如何使用我的代码的：[code in .as format linked to an .fla file](http://pastebin.com/KZd8QRHW)

抱歉我的问题表述不当，希望它有点道理。任何帮助是极大的赞赏！！

最好的问候 - 杰斯珀

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T03:56:26.950

如果您想要一个具有高效 CPU 使用率的**像素完美碰撞检测，请尝试此功能：**

```
trace("Collided: " + (areaOfCollision(mc1, mc2) != null));
trace("Where: " + areaOfCollision(mc1, mc2));

function areaOfCollision(object1:DisplayObject, object2:DisplayObject, tolerance:int = 255):Rectangle {
    if (object1.hitTestObject(object2)) {
        var limits1:Rectangle = object1.getBounds(object1.parent);
        var limits2:Rectangle = object2.getBounds(object2.parent);
        var limits:Rectangle = limits1.intersection(limits2);
        limits.x = Math.floor(limits.x);
        limits.y = Math.floor(limits.y);
        limits.width = Math.ceil(limits.width);
        limits.height = Math.ceil(limits.height);
        if (limits.width < 1 || limits.height < 1) return null;

        var image:BitmapData = new BitmapData(limits.width, limits.height, false);
        var matrix:Matrix = object1.transform.concatenatedMatrix;
        matrix.translate(-limits.left, -limits.top);
        image.draw(object1, matrix, new ColorTransform(1, 1, 1, 1, 255, -255, -255, tolerance));
        matrix = object2.transform.concatenatedMatrix;
        matrix.translate(-limits.left, -limits.top);
        image.draw(object2, matrix, new ColorTransform(1, 1, 1, 1, 255, 255, 255, tolerance), BlendMode.DIFFERENCE);

        var intersection:Rectangle = image.getColorBoundsRect(0xFFFFFFFF, 0xFF00FFFF);
        if (intersection.width == 0) return null;
        intersection.offset(limits.left, limits.top);
        return intersection;
    }
    return null;
} 
```

在初步成功后`hitTestObject()`，此函数在后台从两个对象的形状中获取快照，每个对象都涂有不同的颜色，然后将它们与新的颜色相交，返回`Rectangle`结果形状的形状。非常酷。

要了解有关**Pixel Perfect Collision Detection**的更多信息，您可以在 Google **Collision Detection**后面加上以下名称之一：“ **The ActionScript Man** ”、“ **Troy Gilbert** ”、“ **Boulevart (wim)** ”、“ **Grant Skinner (gSkinner)** ”或“ **Senocular** ”。顺便说一句，这些家伙是很棒的 AS3 参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:34:00.707

您描述的问题是碰撞检测的一个非常常见的问题，因为对象具有设定的宽度和高度，因此将矩形定义为对象。

但是有一个解决方案可以在像素级别上制作碰撞检测系统，我在官方网站上找到了这个，这使我能够在像素级别上对位图进行碰撞检测。

[http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7d55.html](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7d55.html)

希望它以同样的方式帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T04:49:41.443

看看那场比赛的截图，我认为最好的模型是将每条蠕虫描述为一圈圈。然后用比圆半径稍大的单元格将世界/关卡划分为网格。

碰撞检查将是：

1.  清除网格
2.  将每个圆圈放入它所在的 1 个或多个网格单元中
3.  迭代所有单元格，对于每个单元格：
    *   对于此单元格中的每一对圆（部分），检查它们是否相交。如果他们这样做；碰撞。请注意，这可能会导致圆 A 和 B 之间发生超过 1 次碰撞，因此您还需要检查以避免重复。

第 1 步和第 2 步可以通过不清除网格来优化，而不是第 2 步，在每个圆移动后更新每个圆的单元格。如果您将单元格的大小调整为圆圈大小的 5 倍，则一个圆圈可以在同一个单元格中停留几帧，从而避免过多的添加/删除操作。

我现在正在我的一个项目中做类似的事情，除了太空船！我的网格单元目前是 256x256（我认为对于您的项目来说太大了），我的单元的半径约为 20。

# ruby - 运行 delay_job (Windows) 时 CTRL-C 不起作用

> ID：10140739
> 
> 赞同：0
> 
> 时间：2012-04-13T12:23:21.580
> 
> 标签：ruby, ruby-on-rails-3

好吧，愚蠢的问题，但让我发疯。当我从命令提示符运行作业时，我正在使用 ruby​​ 1.9.3 和delayed_job gem：

```
rake jobs:work 
```

我无法用 CTRL-C 阻止它们。我必须关闭命令提示符窗口。有人遇到过这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T11:39:21.937

如果**CTRL+C**不起作用，则在使用 windows 时。您可以使用**CTRL + BREAK**

# c# - 哪个监视器处于活动状态？

> ID：10140740
> 
> 赞同：2
> 
> 时间：2012-04-13T12:23:24.057
> 
> 标签：c#, .net, wpf, windows

我在主监视器下运行我的应用程序，有时在辅助监视器/电视下运行。

该应用程序会进行屏幕截图。

问题是我如何知道**哪个监视器是当前的：主要或次要确实生成**屏幕截图？

我用过这些东西吗？

```
Screen.PrimaryScreen.Bounds.X 
Screen.AllScreens[1].Bounds.X 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T12:24:57.380

您可以使用[`Screen.FromControl`](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.fromcontrol.aspx)

```
bool isOnPrimaryMonitor = Screen.FromControl(this).Primary; 
```

对于 WPF，使用[`Screen.FromHandle`](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.fromhandle.aspx)，其中`this`a `Window`：

```
Screen.FromHandle(new WindowInteropHelper(this).Handle); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T12:28:14.363

我认为这会帮助你 [多显示器编程](http://www.codeproject.com/Articles/6471/Multi-monitor-programming-in-C)

# c++ - c++: 特征库新手排序

> ID：10140746
> 
> 赞同：4
> 
> 时间：2012-04-13T12:23:37.973
> 
> 标签：c++, sorting, eigen

我一生都无法弄清楚为什么这不能正常工作。它似乎没有返回第 k 个元素。

```
typedef Eigen::Matrix<double, Eigen::Dynamic, Eigen::Dynamic> matrix;

double test(matrix& D, int k)
{
    auto d = D.row(1);
    std::nth_element(d.data(),d.data()+k, d.data()+d.size());
    return d(k) ;
} 
```

我也试过

```
template <typename ScalarType, typename Derived>
void Sort(Eigen::MatrixBase<Derived> &xValues)
{
std::sort(xValues.derived().data(), xValues.derived().data()+xValues.derived().size());
}

double test(matrix& D, int k)
{
    auto d = D.row(1);
    Sort<double>(d);
    return d(k) ;
} 
```

非常感谢任何帮助。

编辑：-

我刚刚尝试改变

```
auto d = D.row(1); 
```

到

```
Eigen::VectorXd rowD = D.row(1);
.... 
```

它似乎工作正常。

对此有些困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T12:29:02.900

默认情况下，特征矩阵是[列优先的。](http://en.wikipedia.org/wiki/Row-major_order)这意味着，矩阵的一行不是连续的 C 数组，您不能将数据指针用作迭代器。

例如，3x4 矩阵将存储为：

```
0 3 6 9
1 4 7 10
2 5 8 11

```

现在，`row(1)`将是

```
1 4 7 10

```

但是您传递给的指针迭代器`nth_element()`将访问

```
1 2 3 4

```

如果您将`matrix`typedef 更改为 row-major，则您的代码有效：

```
typedef Eigen::Matrix<double, Eigen::Dynamic, Eigen::Dynamic, Eigen::RowMajor> matrix; 
```

* * *

**更新：**您编辑的示例有效，因为您将行*复制*到向量。对于向量（一维矩阵），数据是按行优先还是按列存储并不重要。

# javascript - 输入按钮调整形状大小

> ID：10140757
> 
> 赞同：0
> 
> 时间：2012-04-13T12:24:29.950
> 
> 标签：javascript, dom, svg

嗨，有人可以帮助我获得调整形状大小的按钮。我自己尝试过，但无法让它发挥作用。下面是我到目前为止的代码提前谢谢

```
<html> 
<head>
<script>

function Smaller()
{
document.getElementById("rectangle1").height="50";
document.getElementById("rectangle1").width="50";
}

function resetsize()
{
document.getElementById("rectangle1").height="200";
document.getElementById("rectangle1").width="300";
}

 </script>
</head>
<body>

<svg xmlns="http://www.w3.org/2000/svg" version="1.1" style="width: 500px; height: 500px">
  <rect id="rectangle1" x="150" y="0"  width="300" height="200"   />
</svg>

    <input type="button" onclick="Smaller" value="Smaller" />
    <input type="button" onclick="resetsize" value="ResetSize" />

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:29:21.030

您可以使用属性访问 DOM 元素的 CSS`style`属性，如下所示：

```
function smaller() {
    document.getElementById("rectangle1").style.height="50";
    document.getElementById("rectangle1").style.width="50";
}

function resetsize() {
    document.getElementById("rectangle1").style.height="200";
    document.getElementById("rectangle1").style.width="300";
} 
```

关于您的编码约定的一些注意事项：您通常希望在函数名称的同一行上使用左括号。函数名称应`camelCase`始终存在；仅保存`UpperCase`类名。最后，确保您在函数、if 语句等内容中添加标签。您的开发人员会感谢您。=)

* * *

编辑：确保您的 HTML 如下所示：

```
<input type="button" onclick="smaller()" value="Smaller" />
<input type="button" onclick="resetsize()" value="ResetSize" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:31:47.880

```
<html> 
<head>
<script>

function smaller() {
    document.getElementById("rectangle1").style.height="50px";
    document.getElementById("rectangle1").style.width="50px";
}

function resetsize() {
    document.getElementById("rectangle1").style.height="200px";
    document.getElementById("rectangle1").style.width="300px";
}

 </script>
</head>
<body>

<div style="min-height:500px">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" style="width: 500px; height: 500px" id="rectangle1">
  <rect x="150" y="0"  width="300" height="200"   />
</svg>
</div>

    <input type="button" onclick="smaller()" value="smaller" />
    <input type="button" onclick="resetsize()" value="ResetSize" />

</body>
</html> 
```

请查看按钮的单击属性。并且你的 svg 元素没有 id。:-)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-13T12:51:57.307

使用 jQuery 来避免这种 DOM 可恶 document.getElementById("fooo")

# php - Count() 返回的条目数与 var_dump() 不同

> ID：10140770
> 
> 赞同：0
> 
> 时间：2012-04-13T12:25:03.573
> 
> 标签：php, count

嘿伙计们，我很累，无法弄清楚这一点，因此我们将不胜感激。

我有一个从数据库表中获取的名为 $Row 的数组。

当我运行时，`var_dump($Row);`我得到以下信息：

```
array
  0 => string '1' (length=1)
  'id' => string '1' (length=1)
  1 => string 'erik' (length=4)
  'username' => string 'erik' (length=4)
  2 => string 'd95eb19a15301089985ad6fd6ecbf2d7' (length=32)
  'password' => string 'd95eb19a15301089985ad6fd6ecbf2d7' (length=32)
  3 => string '' (length=0)
  'email' => string '' (length=0)
  4 => string '0' (length=1)
  'date_join' => string '0' (length=1)
  5 => string '0' (length=1)
  'date_mod' => string '0' (length=1)
  6 => string '1' (length=1)
  'active' => string '1' (length=1)
  7 => string '1' (length=1)
  'admin' => string '1' (length=1)
  8 => string '0' (length=1)
  'deleted' => string '0' (length=1) 
```

当我跑步时，`echo count($Row);`我得到了价值`18`。

Count 和 var_dump 紧挨着，$Row 没有修改。

问题：为什么在 $Row 中`Count()`只有一个时返回 18 输入？我想我只是不明白......我检查了[http://php.net/manual/en/function.count.php](http://php.net/manual/en/function.count.php)，但仍然不明白......`8``var_dump()``count()`

编辑：我明白什么是错的，谢谢大家。另一个问题。如何删除字符串中的那些，例如我想要这种表：

```
array
  0 => string '1' (length=1)
  1 => string 'erik' (length=4)
  2 => string 'd95eb19a15301089985ad6fd6ecbf2d7' (length=32)
  3 => string '' (length=0)
  4 => string '0' (length=1)
  5 => string '0' (length=1)
  6 => string '1' (length=1)
  7 => string '1' (length=1)
  8 => string '0' (length=1) 
```

***我正在使用 mysql_fetch_array() 来检索数据并将其放入表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:29:40.157

您有混合数组整数和关联数组，并且有 18 个元素。这是我认为`mysql_fetch_array`默认返回关联和数字索引数组的返回值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:26:46.757

因为您的字符串也是值，`$Row`所以它们似乎只是因为字符串字符而缩进。这意味着

```
'id' => string '1' (length=1)
'username' => string 'erik' (length=4)
'password' => string 'd95eb19a15301089985ad6fd6ecbf2d7' (length=32)
// ... 
```

也在你的阵列中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T12:28:53.073

实际上，您的数组中确实有 18 个元素：

*   索引`0`通过`8`（总共 9 个元素）
*   `id`, `username`, ... 另外 9 个元素

9 + 9 = 18

如果您只想要数字索引，并假设您使用的是 MySQL：

```
$Row = mysql_fetch_array($result, MYSQL_NUM) 
```

来源： http: [//php.net/manual/en/function.mysql-fetch-array.php](http://php.net/manual/en/function.mysql-fetch-array.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T12:29:16.630

因为你从你的数据库中得到了一个混合的关联和数字结果集（你可以用 FETCH_ASSOC 或类似的东西作为你 dbvendor_query() 函数的参数来精确地确定你真正想要的结果集）。

您的数组中有 18 个元素。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T12:29:25.240

我认为将计数应用于此：

```
0 => string '1' (length=1)
'id' => string '1' (length=1) 
```

返回 2 而不是 1！

0 和 id 是数组的两个不同项！对于其他 8 个元素，这使计数返回 18

# c# - 返回值 IEnumerator

> ID：10140771
> 
> 赞同：1
> 
> 时间：2012-04-13T12:25:05.680
> 
> 标签：c#, unity3d, ienumerable

嘿伙计们，我是 c# 的新手，而且我通常开发 Java，但在使用 IEnumerator 返回值时遇到问题。基本上我有一个客户端脚本，它将用户名和密码注册到服务器上的数据库中。我的问题是，当我单击按钮时，应调用客户端脚本中的方法将用户输入的用户名和密码添加到数据库中。负责此操作的方法应返回一个字符串，指示注册成功/不成功。当我尝试实现这一点时，我收到以下错误：

“ NullReferenceException：对象引用未设置为对象的实例 RegisterScript.OnMouseUp ()（在 Assets/Scripts/RegisterScript.cs:23）UnityEngine.SendMouseEvents:DoSendMouseEvents()”

以下是这两个类的代码，感谢任何可以提供帮助的人！

客户端脚本

```
using UnityEngine;
using System.Collections;
using System.Collections.Generic;

public class ClientSideScript : MonoBehaviour {

public string RegUserUrl = "http://localhost/reguser.php?";

public IEnumerable<string> RegisterUsers(string name , string pass){

    string post_url = registerUser + "name=" + name + "&pass=" + pass;
    print (post_url);
    WWW hs_post = new WWW(post_url);
    string check = hs_post.ToString();
    yield return check;

    //return regname;
 }
 } 
```

附加到按钮的注册脚本，该按钮将用户名和密码传递给客户端脚本

```
using UnityEngine;
using System.Collections;
using System.Collections.Generic;

public class RegisterScript : MonoBehaviour {
public string Registeredpassword;
public string Registeredusername;
public Texture2D registerButton;

//Use this for initialization
void OnGUI () {

Registeredpassword = GUILayout.PasswordField(Registeredpassword, "*"[0], 25);
Registeredusername = GUILayout.TextField(Registeredusername, 25);

}

void OnMouseUp(){

ClientSideScript client =          (ClientSideScript)FindObjectOfType(typeof(ClientSideScript));
 IEnumerable<string> stringcheck = client.RegisterUsers(Registeredusername ,      Registeredpassword);
 print (stringcheck);
    }   
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:28:56.377

您的`FindObjectOfType`函数由于某种原因返回 null。为什么，只看提供的代码是不可能扣除的。

*不是* ，而是`IEnumerable<string> stringcheck = client...`前一行（即使我没有在提供的文本上看到行号）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T15:07:26.243

`FindObjectOfType`如果您在 unity3d 场景中没有`GameObject`该类型（在您的情况下），将返回 null 。`ClientSideScript`

您还需要将您的`RegisterUsers`方法更改为这样的

```
public IEnumerator RegisterUsers(string name , string pass){

string post_url = registerUser + "name=" + name + "&pass=" + pass;
print (post_url);
WWW hs_post = new WWW(post_url);

// wait for www to get a response
yield return hs_post;

// now do something with the returned value
// cant return it directly as this is a unity3d coroutine
string response = hs_post.text;
DealWithResponse(reponse) 
```

}

它有一个`IEnumerator`返回类型，因为它需要是一个统一协程，因此游戏不会等待对您的 www 调用的响应。

当你打电话时`RegisterUsers`，`RegisterScript`你需要使用`StartCoroutine(client.RegisterUsers(name, pass));`

请参阅 Unity3d [WWW 文档](http://unity3d.com/support/documentation/ScriptReference/WWW.html)和[Coroutine 文档](http://unity3d.com/support/documentation/ScriptReference/Coroutine.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T13:53:08.210

我也遇到过这个问题。

1.我想把输出变量放在参数列表中。

2.所以我想到了指针，但是unity 3d使用没有指针的安全c#。

3.然后我想到c#中的“ref”或“out”，但是函数返回IEnumerator不能在c#的参数列表中使用“ref”或“out”。

4.Finial 我想我可以用通用的东西在安全的c#中自己编写一个指针。

这是我的解决方案：

```
//a pointer to another object..
public class Pointer<T>
{
    public T data;

    public Pointer(){
    }
    public Pointer(T data){
        this.data = data;
    }
}

  public IEnumerator RegisterUsers(string name , string pass,Pointer<string> errPtr){
    string post_url = registerUser + "name=" + name + "&pass=" + pass;
    print (post_url);
    WWW hs_post = new WWW(post_url);

    // wait for www to get a response
    yield return hs_post;

    //return it in parameter
    errPrt.data = hs_post.text;
  } 
```

# asp.net - 将 ASP.NET 成员资格数据库迁移到 SQL Azure

> ID：10140774
> 
> 赞同：6
> 
> 时间：2012-04-13T12:25:18.550
> 
> 标签：asp.net, sql-server-2008, azure, azure-sql-database

我正在尝试将数据库从 SQL Server 2008 迁移到 SQL Azure。我尝试迁移的数据库包括 ASP.NET Membership 数据库 (http://www.asp.net/web-forms/tutorials/moving-to-aspnet-20/membership)。当我在我的 SQL Server 2008 数据库中运行该数据库时，它运行良好。但是，当我尝试针对 SQL Azure 对用户进行身份验证时，我收到一条错误消息：

“此版本的 SQL Server 不支持没有聚集索引的表。请创建聚集索引并重试。”

但是，我不确定该怎么做。当我尝试更新 aspnet_Applications 表上的索引时，我收到一个外键问题。我正在使用以下内容尝试将我的非聚集索引迁移到聚集索引：

```
ALTER TABLE aspnet_Applications
DROP CONSTRAINT PK__aspnet_A__SOMEID

ALTER TABLE aspnet_Applications
ADD CONSTRAINT PK__aspnet_A__SOMEID PRIMARY KEY CLUSTERED(ApplicationId) 
```

有人可以帮我解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-22T15:20:04.910

我遇到了 ASP.NET 成员提供程序表（非聚集索引）的问题，并且缺少存储过程等的`"WITH (NOLOCK)"`语句。`aspnet_Membership_GetNumberOfUsersOnline`

此处找到的迁移工具修复了问题并将数据库导出到 Azure。

**[http://sqlazuremw.codeplex.com/](http://sqlazuremw.codeplex.com/)**

这是一个很好的向导，可以连接到您现有的 SQL Server 并将选定的数据库迁移到 Azure。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T17:21:04.537

如果可以，请尝试使用[ASP.NET Universal Providers For SqlExpress 1.1](http://nuget.org/packages/System.Web.Providers)（我希望他们更改名称，因为它有点用词不当）。这是官方支持的跨 SQL Azure 和独立 SQL Server 启用 SQL 成员资格、角色和会话提供程序的方法。

以下是其他几个链接供参考：

[Scott Hanselman - 介绍 System.Web.Providers](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)

[SQL Azure 团队博客 - 使用 SQL Azure 处理会话状态](http://blogs.msdn.com/b/sqlazure/archive/2010/08/04/10046103.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T16:14:08.513

SQL Azure 与 SQL Server 不同，因为并非所有功能都受支持。有一个特殊的 SQL Azure 成员脚本来创建数据库。

见这里：http: [//support.microsoft.com/kb/2006191/de](http://support.microsoft.com/kb/2006191/de)

我希望这有帮助。

问候。

# email - ColdFusion中Undelivr电子邮件的自动数据库跟踪？

> ID：10140778
> 
> 赞同：1
> 
> 时间：2012-04-13T12:25:38.050
> 
> 标签：email, coldfusion, tracking, cfmail

鉴于 cfmail 有一个“FAILTO=''”选项，如果电子邮件未送达，则触发将电子邮件发送到该电子邮件...

有没有办法以某种方式为电子邮件分配 ID 或跟踪 #，将其存储在具有该 ID 的数据库中......然后如果它失败则更新该电子邮件的状态？

我想跟踪反弹...最好不要将 FAILTO 发送到 POP3 或 IMAP，然后使用 cfimap 检查它...

有没有其他的方法来处理这个？

也许是在电子邮件失败时触发的事件网关？

更新：我决定采用不同的方法，利用 sendgrid API。我希望这能给我提供比 CF 提供的更多工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:35:02.747

不幸的是，对您的问题的简短回答是否定的。

具有可能解决方案的更长版本：failTo 电子邮件地址填充电子邮件标题中的返回路径，然后邮件服务器“应该”使用它来进行退回（但是请参阅 - [http://www.bennadel.com/blog /1899-GMail-Seems-To-Ignore-The-Return-Path-Header-Defined-By-The-CFMail-FailTo-Attribute.htm](http://www.bennadel.com/blog/1899-GMail-Seems-To-Ignore-The-Return-Path-Header-Defined-By-The-CFMail-FailTo-Attribute.htm) 的例子，它没有）

因此，您将需要监控 Imap 或 pop 帐户才能查看您的邮件，但是您可以设置一个事件网关来监控这一点，此处提供详细说明 - [http://www.alagad.com/documentation/imapGateway/ImapWatcher %20Gateway%20Documentation.pdf](http://www.alagad.com/documentation/imapGateway/ImapWatcher%20Gateway%20Documentation.pdf)

您剩下的就是需要确定哪些邮件与哪些退回邮件相匹配，当我过去做过类似的事情时，我在我拥有的域中使用唯一 ID 作为 failTo 电子邮件地址。如果您设置了它，然后使用您的侦听器 cfc 在返回路径中查找 id。

因此，您的发送代码将按照以下方式工作：

*   生成唯一标识
*   发送邮件
*   将行添加到具有唯一 ID 的数据库

然后，您的 listener.cfc 将需要检查返回的电子邮件，如果找到唯一 ID，则使用您所追求的任何信息更新该行。

希望这至少会有所帮助，即使您需要设置其他一些位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T13:37:24.850

您可以在 undelivr 文件夹上使用直接观察程序来记录失败的电子邮件，但只有在它自己的服务器而不是共享服务器的情况下才是真正的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T13:49:53.237

据我所知，一旦它离开假脱机并关闭到您的 SMTP 服务器 CF 假设它已正确发送。

电子邮件将在 SMTP 服务器/中继链中涓涓细流，如果发生任何事情，他们唯一的指令就是将其退回到发件人地址或失败地址（如果存在）。CF 此时没有在听，因此无法响应。

我们使用称为 Glock 电子邮件处理器的外部工具来处理异常。它不是免费的，但效果很好。你可以在这里找到它：[http ://www.glocksoft.com/email-processor/](http://www.glocksoft.com/email-processor/)

您需要对其进行配置以检查故障地址，然后您可以从那里采取许多措施。我把它设置为三击系统。

电子邮件地址退回，我在我的电子邮件表中增加一个计数器，在 3 我从系统中停用该电子邮件。

不过，没有什么是你不能用 cfpop 自己做的。

# image-processing - 适用于 Windows 8 的 OpenCV（地铁风格应用程序）

> ID：10140784
> 
> 赞同：5
> 
> 时间：2012-04-13T12:26:17.410
> 
> 标签：image-processing, powershell, opencv, microsoft-metro, windows-runtime

不支持 OpenCV 2.3.1 使用 Windows 8 的 winRT API 构建计算机视觉应用程序（Metro 风格的计算机视觉应用程序）。

任何人对新的 openCV 版本的发布及其对 Windows 8 的支持有任何想法？？？

# javascript - 如何动态创建 Backbone 视图元素？

> ID：10140787
> 
> 赞同：6
> 
> 时间：2012-04-13T12:26:24.713
> 
> 标签：javascript, backbone.js, backbone-views

我想在 Backbone js 应用程序中动态创建一些视图元素。当一个新视图被初始化时，我希望它把新元素插入到 DOM 中，将元素的引用存储在 view.el 中，并像往常一样委托事件。

我知道我可以放入我的 html，然后使用 el:"#test" 设置一个视图，但这对于模式和其他不是 Web 应用程序核心的视图来说似乎有点过头了。有没有规定的方法来做到这一点我在文档中缺少？我只是误解了视图应该如何工作吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T12:40:17.343

主干视图将为`el`您生成一个，而无需您做任何事情。默认情况下，它会创建一个`<div>`. 不过，您可以生成任何您想要的标签名称。一旦你实例化了视图，在视图上实现一个方法，并用你的 HTML`render`填充。`el`

```
 MyView = Backbone.View.extend({});

var v = new MyView();
console.log(v.el); // => "<div></div>"

// define your own tag, and render contents for it

MyTagView = Backbone.View.extend({
  tagName: "ul",

  render: function(){
    this.$el.html("<li>test</li>");
  }
});

var v2 = new MyTagView();
v2.render();
console.log(v2.el); // => "<ul><li>test</li></ul>" 
```

使用模板系统来呈现视图的 HTML 是一种常见的做法，例如 Underscore.js 模板、Handlebars 或任何其他十几个或更多模板 JavaScript 模板引擎。

从视图生成内容后，您需要将其粘贴到 DOM 中的某个位置，然后才能看到它。这通常使用 jQuery 或其他插件完成：

`$("#some-element").html(v2.el);`

# jquery - jquery ajax get call上的django视图呈现的错误html模板

> ID：10140788
> 
> 赞同：1
> 
> 时间：2012-04-13T12:26:27.063
> 
> 标签：jquery, ajax, django, templates

我`django`的应用程序`index.html`页面使用 jquery fullcalendar ，由一个名为的 django 视图填充，该视图`index()`用于`simplejson`转储包含当前月份所有日期的事件的数组。该方法呈现`index.html`模板。

我正在`ajax get`单击日历`prev button`调用另一个 django 视图`prev_month()`。此方法计算上个月的事件数组并将其转储并最终呈现不同的模板`'prev_month.html'`

```
def prev_month(request,year,month):
    ....
    prev_events=[]
    #populates array by making db calls
    return render_to_response('prev_month.html',{'prev_events':prev_events}) 
```

prev_month.html

```
...
<script>
    $(document).ready(function() {
        $('#calendar').fullCalendar({
       events: {{prev_events|safe}}
    });
        $('.fc-button-prev').click(function(){
          var d=$('#calendar').fullCalendar('getDate');
          var month=d.getMonth()+1;
          var year=d.getFullYear();
          $.ajax({url:'/myapp/prev_month/'+year+'/'+month,type:"GET",
  success:function(){
                    alert('prev_month.html::success');
},
});
});
</script> 
```

该模板`index.html`类似于上面的模板，除了显示成功警报。它还使用名为 django 的视图`'index.html::success'`来填充日历。`current_events``index()`

django 视图是

```
def index(request):
   ...
   #creates events array and jsondump
   return render_to_response('index.html',{'current_events':events_array}) 
```

当我进入索引页面时，日历显示当月的所有事件。当点击 prev 按钮时，执行 django 视图 prev_month() 。但由于某种原因，呈现的模板是`index.html`而不是 。`prev_month.html` 这可以从成功警报显示 `index.html::success`

代替 `prev_month.html::success`

因此，不会显示上个月的事件。

有人可以帮我弄清楚为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:35:01.903

不使用来自 AJAX 调用的响应。

您必须更改您的`$.ajax()`调用，以便成功函数实际绑定数据（即来自 Django 服务器的响应）；我们`$.get()`在示例中使用以使其更易于阅读：

```
$.get('/myapp/prev_month/'+year+'/'+month, function(data) {
  $('#calendar').fullCalendar({events: data});
}); 
```

[请参阅http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)上的 jQuery.get 文档

这应该使用您的`fullCalendar()`方法并将其`data`作为新值提供给`events`.

查看 JavaScript 错误控制台，看看格式是否`data`会导致问题；如果是这样，您将不得不将结果作为 JSON 返回到`prev_month()`.

# c# - 字符串生成器和数组

> ID：10140790
> 
> 赞同：1
> 
> 时间：2012-04-13T12:26:42.010
> 
> 标签：c#, .net

我有一个数组，例如 string[] ccsplit。

我想将所有这些添加到一个字符串中，所以我使用 stringbuilder：

```
StringBuilder builder = new StringBuilder();
foreach (string str in ccsplit)
{
    builder.Append(str);
} 
```

但唯一的问题是我不希望将字符串 ccsplit[0] 添加到 stringbuilder 中，我该如何实现呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T12:31:47.113

甚至不需要使用 StringBuilder 或循环。

```
 string result = String.Concat(ccsplit.Skip(1)); 
```

将完成这项工作。您确实需要 Fx 4 或更高版本。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-13T12:29:55.397

您可以始终从 1 开始索引并将其附加到 stringbuilder。

```
for(int i=1; i<lengthOfArray;i++)
{
    //Do your stuff.
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-13T12:31:49.750

单行答案

```
string str = string.Join("", ccsplit.Skip(1).ToArray()); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-13T12:28:25.117

如果你可以使用 Linq，你可以使用 Skip 扩展方法：

```
foreach (string str in ccsplit.Skip(1)) 
{
    builder.Append(str);
} 
```

或者，没有 Linq：

```
for (int i = 1; i < ccsplit.Length; i++) {
    builder.Append(ccsplit[i]);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-13T12:28:46.773

您可以使用 Skip() [http://msdn.microsoft.com/en-us/library/bb358985.aspx](http://msdn.microsoft.com/en-us/library/bb358985.aspx)

```
 StringBuilder builder = new StringBuilder();
        foreach (string str in ccsplit.Skip(1))
        {
            builder.Append(str);
        } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-13T12:30:50.000

您还可以使用 LINQ 连接所有字符串：

```
String result = ccsplit.Skip(1).Aggregate((s1, s2) => s1 + s2); 
```

**编辑**：这是一个使用的版本`StringBuilder`：

```
String result = ccsplit.Skip(1).Aggregate(new StringBuilder(),
                (sb, str) => sb.Append(str),
                (sb) => sb.ToString()); 
```

[可枚举.聚合](http://msdn.microsoft.com/en-us/library/bb548744.aspx)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-04-13T12:30:55.617

这就是没有 LINQ 的方法。

```
for (var i = 1; i < ccsplit.Length; i++){
    builder.Append(ccsplit[i]);
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-13T12:28:38.983

`using System.Linq;`

...

```
StringBuilder builder = new StringBuilder(); 
foreach (string str in ccsplit.Skip(1)) 
{ 
    builder.Append(str); 
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-04-13T12:32:22.847

你可能`string`最终需要 a ，所以只需使用适当`string.Join`的重载而不是`StringBuilder`循环：

```
string combined = string.Join(string.Empty, ccsplit, 1, ccsplit.Length - 1); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-04-13T12:31:45.540

使用 for 循环：

```
 StringBuilder builder = new StringBuilder();
    for(int i = 1; i < ccsplit.Length; i++)
    {
         builder.Append(ccsplit[i]);
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-04-13T12:31:54.307

你可以这样做：

```
StringBuilder builder = new StringBuilder(); 
for (int ccsplitIndex = 1; ccsplitIndex < ccsplit.Length; ccsplitIndex++) 
{ 
    builder.Append(ccsplit[ccsplitIndex]); 
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-04-13T12:35:14.773

将 foreach 更改为 a 以从 1 而不是 0 开始索引

```
for (int i = 1; i <= ccsplit.Length-1; i++)
{
   builder.Append(ccsplit[i]);
} 
```

# sinatra - Padrino + sinatra-assetpack 不工作

> ID：10140792
> 
> 赞同：1
> 
> 时间：2012-04-13T12:26:47.363
> 
> 标签：sinatra, padrino, sinatra-assetpack

我正在尝试将 Padrino 与 Sinatra-Assetpack 结合起来，但没有成功。

这是我的 Gemfile：

```
source :rubygems

gem 'rake'
gem 'sinatra-flash', :require => 'sinatra/flash'

# Component requirements
gem 'haml'

# Assets requirements
gem 'sinatra-assetpack', :require => 'sinatra/assetpack'

# Test requirements

# Padrino Stable Gem
gem 'padrino', '0.10.6' 
```

在我的 app/app.rb 文件中我设置：

```
require 'sinatra/assetpack'

class Coffee < Padrino::Application
  register Padrino::Rendering
  register Padrino::Mailer
  register Padrino::Helpers

  register Sinatra::AssetPack

  assets {
    serve '/js',  from: '/app/assets/javascripts'
    serve '/css', from: '/app/assets/stylesheets'

    css :main, ['/css/main.css']
    js  :application, ['/js/application.js']
  }

  enable :sessions

end 
```

我的 javascript 文件位于 /app/assets/javascripts 和 /app/assets/stylesheets 中的 css 文件，但 Padrino 以 404 响应 /css/main.css 和 /js/application.js

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:26:56.483

无论如何，在我的应用程序中解决了这个问题，但从你的 app.rb 代码的外观来看，它可能对你来说是一样的；

Assetpack 从您在`serve`调用中指定的目录中提供文件，**相对于您的应用程序的 root**。在 padrino 中，应用程序的根目录是`yourapplication/app`.，所以如果你告诉assetpack 从`/app/assets/stylesheets`例如提供 css 服务，它真的会在`yourapplication/app/app/assets/stylesheets`.

问题的第二部分是在 AssetPack 文档中，它显示了代码

```
set :root, File.dirname(__FILE__) 
```

在该`register Sinatra::AssetPack`行之前，我假设它正在正确设置应用程序的根目录，以便 AssetPack 将在根应用程序目录中查找，而不是`app`. 但是，即使我修改该调用以`set`从 app.rb 文件上移一个目录（因为它位于`app`Padrino 的目录中），它似乎对 AssetPack 没有任何影响。

简而言之，`from:`将 `serve' 调用中的路径修改为相对于您的应用程序目录应该可以解决问题。在您的情况下，它们应该是：

```
serve '/js',  from: '/assets/javascripts'
serve '/css', from: '/assets/stylesheets' 
```

# ruby - 带参数的函数（素数）

> ID：10140798
> 
> 赞同：0
> 
> 时间：2012-04-13T12:26:55.600
> 
> 标签：ruby

我想要一个 ruby​​ 程序，它有 2 个 Arguments(a,b) ，它输出 a 和 b 之间的素数。这是我的程序。但这是错误的。我不知道问题出在哪里。谁能帮我？

```
a,b=ARGV
def prime (a,b)
for i in 2..b
  f=true
    for p in 2...i
      if i%p==0
        f =!f
        break
      end
   end
 print i, "--" if f  
end
end
sushu=prime(a,b)
p "the prime zweischen #{a} and #{b} is #{sushu}." 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:42:59.247

其他答案已经指出了您的代码有什么问题（使用字符串而不是整数而不使用参数`a`。但是，如果您使用的是 Ruby 1.9，那么有一种更简单的方法可以实现您想要的：

```
require 'prime'
def prime(a, b)
  (a..b).select(&:prime?)
end

prime(1,20)
#=> [2, 3, 5, 7, 11, 13, 17, 19] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:31:04.023

您不考虑 in 参数 a。可能将 i 更改为 iterate from `a..b`，而不是`..b`解决您的问题。

```
a,b=ARGV
def prime (a,b)
for i in a..b
  f=true
    for p in 2...i
      if i%p==0
        f =!f
        break
      end
   end
 print i, "--" if f  
end
end
sushu=prime(a,b)
p "the prime zweischen #{a} and #{b} is #{sushu}." 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:34:11.700

尝试

```
sushu=prime(a.to_i,b.to_i) 
```

# c# - 使用指令

> ID：10140799
> 
> 赞同：0
> 
> 时间：2012-04-13T12:26:56.660
> 
> 标签：c#, asp.net, web

如果我有一个中继器通过数据列表来检索我使用的值

```
<%# Eval("current_item") %> 
```

运气好的话，它会输出“current_item”的信息

但是，如果我想检查“current_item”是否等于 1，这将告诉我是否打印下一批信息。那么如何使用该信息来确定输出，有效地我想将该信息放入一个变量中。

```
<%# myInt = int.Parse(Eval("current_item")) %> 
```

上面的代码是我真正想做的。

然后我会做这样的事情：

```
<% if (myInt == 1) { %>
<p>Information to display if myInt = 1</p>
<% } else { %>
<p>Other Information</p>
<% } %> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:37:00.743

我在 GridView 中使用了类似于以下内容的内容：

```
<p>
    <asp:Label Visible='<%# ((int)Eval("current_item") == 1) %>' Text="This is the first item" runat="server" />
    <asp:Label Visible='<%# ((int)Eval("current_item") != 1) %>' Text="This is not the first item" runat="server" />
</p> 
```

试一试，看看它是否也适用于中继器。

# java - 为什么要将 JPanel 添加到 JLabel 中，在什么情况下会出现这种情况？

> ID：10140800
> 
> 赞同：4
> 
> 时间：2012-04-13T12:26:59.817
> 
> 标签：java, swing, jpanel, jlabel

今天在浏览各种问题时，遇到了一个[QUESTION](https://stackoverflow.com/q/10135627/1057230)，这在我看来有点奇怪，为什么要在a中添加a `JPanel`，`JLabel`是否有任何真正的原因会出现这种情况，所以它只是微不足道的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T12:28:14.090

是的，有真正的理由要向 JLabel 添加组件。由于在 JLabels 上设置和交换 ImageIcon 非常容易，因此将它们用作 GUI 的背景图像并不少见。

**编辑**
你状态：

> 啊哈的意思是，如果我希望我的容器有特定的背景，那么我必须使用 JLabel 作为平台，这样的东西可以驻留吗？我对吗 ？

不，您不必为此使用 JLabel，因为如果需要，在 JPanel 中绘制背景图像相当容易。`paintComponent(...)`只需在其方法中绘制图像。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T12:34:42.417

```
this seems to me a bit weird, why would one wants to add 
a JPanel to a JLabel, 
```

是的，这是正确的

```
are there any genuine reasons as to such situation can arise, 
so is it just trivial? 
```

不，这不是微不足道的，因为只有`JFrame`//并且已经获得了 pre_implemented `JDialog`，对于“ ”的其余部分，[您必须以编程方式声明正确的 LayoutManager](https://stackoverflow.com/questions/8575641/how-returns-xxxsize-from-jcomponents-added-to-the-jlabel)`JWindow``JPanel``LayoutManager``Custom JComponent`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-13T12:46:24.623

作为 GUI 的 BG 的动画图像。我使用 HTML 来调整这个（x3）的大小，但如果它已经是所需的大小，你可以直接将它设置为`Icon`标签的。

```
import java.awt.*;
import javax.swing.*;
import javax.swing.border.EmptyBorder;

class LabelAsBackground {

    public static final String HTML =
        "<html>" +
        "<style type'text/css'>" +
        "body, html { padding: 0px; margin: 0px; }" +
        "</style>" +
        "<body>" +
        "<img src='http://pscode.org/media/starzoom-thumb.gif'" +
        " width=320 height=240>" +
        "";

    LabelAsBackground() {
        JFrame f = new JFrame("Animated Image BG");
        f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        JLabel contentPane = new JLabel(HTML);
        contentPane.setLayout(new GridLayout());
        JPanel gui = new JPanel(new GridLayout(3,3,15,15));
        gui.setOpaque(false);
        contentPane.add(gui);
        gui.setBorder(new EmptyBorder(20,20,20,20));
        for (int ii=1; ii<10; ii++) {
            gui.add( new JButton("" + ii));
        }
        f.setContentPane(contentPane);
        f.pack();
        //f.setResizable(false); // uncomment to see strange effect..
        f.setVisible(true);
    }

    public static void main(String[] args) {
        //Create the frame on the event dispatching thread
        SwingUtilities.invokeLater(new Runnable(){
            @Override
            public void run() {
                LabelAsBackground lab = new LabelAsBackground();
            }
        });
    }
} 
```

不确定它是否是“正版”。这似乎是一个需要大量澄清的主观术语。我从来没有使用过这种方法，只是想通了，今晚摸索着。;)

# java - 将 HTTP 响应发送/通道化回浏览器

> ID：10140804
> 
> 赞同：0
> 
> 时间：2012-04-13T12:27:10.687
> 
> 标签：java, http, sockets, browser, proxy

我在 Java 中创建了一个 localhost HTTP 代理，监听端口 3000。我能够将 HTTP 请求引导到代理（浏览器使用随机高值端口 ~50000 发送它们）并获得 HTTP 响应。问题是我不知道如何将这些响应引导回浏览器以显示它们。

换句话说，我如何获取浏览器侦听的端口，以便我将设置一个套接字以在该端口上发送数据。是不是我必须将数据发送到我接收数据的同一个高价值端口？请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:36:16.210

浏览器不会在某个端口上侦听任何传入的 HTTP 流量。浏览器是客户端并启动连接，不侦听/接收任何内容。在你的代理中，你应该监听传入的浏览器请求，抓住他们的套接字，将请求转发到他们应该去的地方，等待响应，最后通过你的套接字将响应发送回等待的浏览器已开放。

# php - xpath 搜索 php

> ID：10140811
> 
> 赞同：0
> 
> 时间：2012-04-13T12:27:44.197
> 
> 标签：php, xml, xpath

我不断收到以下错误消息

```
Notice: Undefined index: txtSearch in     /var/www/vhosts/numyspace.co.uk/web_users/home/~unn_w11023553/public_html/holiday/searchprocess.php on line 11

Warning: SimpleXMLElement::xpath() [simplexmlelement.xpath]: Invalid expression in /var/www/vhosts/numyspace.co.uk/web_users/home/~unn_w11023553/public_html/holiday/searchprocess.php on line 22

Warning: SimpleXMLElement::xpath() [simplexmlelement.xpath]: xmlXPathEval: evaluation failed in /var/www/vhosts/numyspace.co.uk/web_users/home/~unn_w11023553/public_html/holiday/searchprocess.php on line 22

Warning: Invalid argument supplied for foreach() in /var/www/vhosts/numyspace.co.uk/web_users/home/~unn_w11023553/public_html/holiday/searchprocess.php on line 26
Title 
```

然后我尝试运行我的搜索文件

```
<?php
include('functions.php');

$header = makeHeader();

// create an instance
$holidayDoc =         simplexml_load_file('http://numyspace.co.uk/~unn_w11023553/holiday/holidays.xml');      

// set $studytype to either the upper case request or null
$txtSearch = $_GET["txtSearch"];

// set the query using the studytype
if (!is_null($txtSearch)) {
    $qry = "//channel/item[description[contains(text(),\"$txtSearch\")]]";
}
else {
// blank search entered so all holidays are shown.
    $qry = "/channel/'ALL'";
}

$holidays = $holidayDoc->xpath($qry);   // do the xpath query LINE 17
// now loop through all the students
echo "<table border=\"1\">\n";
echo "<tr><td>Title</td></tr>\n";
foreach ($holidays as $holiday) //LINE 21
{
echo 
echo <p><strong><a href = '$link'>'$holiday'</a></strong></p>
    <p><small>$published</small></p>";

}

$footer = makeFooter(); 
```

?>

摆弄了大约 2 小时，但仍然无法找出我出错的地方，任何见解将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:32:46.223

第一个警告告诉您这`txtSearch`不是`$_GET`查询字符串参数数组中的值。例如，您`?txtSearch=something`在调用脚本的 url 中没有。

所以你需要检查你是如何调用脚本的。是否设置了查询字符串参数？拼写是否正确呢？

`$_GET`您可以通过做来调试一下查看的内容`var_dump($_GET)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T13:31:09.643

代替

```
$txtSearch = $_GET["txtSearch"]; 
```

和

```
if( isset( $_GET["txtSearch"] ) && ( trim( $_GET["txtSearch"] ) != '' ) ) {
    $txtSearch = $_GET["txtSearch"];
} else {
    $txtSearch = null;
} 
```

希望这可以帮助。

# c++ - C++ 服务器，System.10014 错误，使用 Boost

> ID：10140813
> 
> 赞同：1
> 
> 时间：2012-04-13T12:27:53.370
> 
> 标签：c++, networking, boost, boost-asio

**更新：我想通了！有点...我不确定这是如何解决的，但确实如此。而不是使用：**

```
NetworkMessage msg;
msg.AddByte(0x01);
sendmessage(msg); 
```

**我试过这个并且它有效（对某些功能进行了一些更改）**

```
NetworkMessage* msg = new NetworkMessage();
msg.AddByte(0x01);
sendmessage(msg); 
```

**这解决了它，但仍然希望任何人解释为什么会发生这种情况。将其发布为答案，以便我标记它。谢谢你。**

我一直在使用 TCP 服务器，但我遇到了一个小问题..

有一个循环发送大约 600？消息，一次发送 1 条（从排队的消息列表中读取）。

出于某种原因，大约 200 人没有错误地到达我的客户，然后我收到 System.10014 错误。每次都有不同的消息，即使每次消息都是相同的。此外，如果我只是在 System.10014 错误后重新发送消息，它工作正常。所以很明显，消息不是问题。但我不知道是什么。我昨天花了一整天的时间试图弄清楚，但仍然没有运气。所以我在这里。再次。

```
void outputMessage(NetworkMessage& msg, bool forceTrue = false)
{
    if(!connectionLocked || forceTrue) {
        connectionLocked = true;

        std::cout << "Message: ";
        char* buf = msg.getOutputBuffer();
        for (int i = 0; i < msg.size(); i++){
            std::cout << (buf[i] + 0) << ":"; //Never any errors
        }

        boost::asio::async_write(socket_, boost::asio::buffer(msg.getOutputBuffer(), msg.size()),boost::bind(&Session::handle_write, shared_from_this(), msg, boost::asio::placeholders::error));

    }
    else {
        //Queue message
        _msgqueue.push_back(msg);
    }

}
void handle_write(NetworkMessage& msg, const boost::system::error_code& error)
{
    if (error)
    {
        cout << "Error: " << error << endl;
        outputMessage(msg, true); //works, even though it's the same message
    }
    else {
        if(_msgqueue.size() != 0){
            //cout << "Sending queued message #" << _msgqueue.size() << endl;
            outputMessage(_msgqueue.front(), true);
            _msgqueue.pop_front();
        }
        else
            connectionLocked = false;
    }
} 
```

这基本上是我的发送功能的代码。它工作正常，通常。由于某种原因，当我连续发送大量消息时，会发生此错误（System.10014）。我尝试阅读 Winsock 中的错误，但我真的不明白（它说了一些关于无效指针的内容，但我很确定该消息是有效的，因为再次发送它就可以了？）。而且我在编程方面几乎没有经验，尤其是在 C++ 和指针方面，所以我遇到了一些麻烦。

生成消息的循环有点像这样。我验证了 X 和 Y 是有效的，所以我很确定问题不存在。

```
map->cursor = map->begin;
while(map->cursor != NULL)
{
    //I'm not sure if pointers like this are supposed to be deleted?
    //I suck when it comes to memory management, and most other things :D
    Tile* tile = map->cursor->tile;
    if(tile){
        NetworkMessage msg;
        msg.AddByte(0x03);
        msg.AddByte(tile->posx);
        msg.AddByte(tile->posy);
        msg.AddByte(1);
        msg.AddByte(2);
        outputMessage(msg);
    }
    else
        break;
    map->cursor = map->cursor->next;

} 
```

此外，这可能看起来不相关，但如果我尝试将 outputMessage 更改为：

```
void outputMessage(NetworkMessage& msg)
{
    boost::asio::async_write(socket_, boost::asio::buffer(msg.getOutputBuffer(), msg.size()),boost::bind(&Session::handle_write, shared_from_this(), msg, boost::asio::placeholders::error));
}
void handle_write(NetworkMessage& msg, const boost::system::error_code& error)
{
    if (error)
    {
        cout << "Error: " << error << endl;
    }
} 
```

我没有收到任何错误，但发送的消息都是克隆的。所以这 600 条消息看起来都一样。这看起来很奇怪，所以我认为这可能与我现在遇到的问题有关。

这里还有 NetworkMessage.h，我也把它贴在了 pastebin 上，你可以在评论中看到。

```
#ifndef _NETWORK_MESSAGE_H
#define _NETWORK_MESSAGE_H
class NetworkMessage
{
    public:
        enum { header_length = 2 };
        enum { max_body_length = NETWORKMESSAGE_MAXSIZE - header_length};
        NetworkMessage()
        {
            buf_size=0;
            m_ReadPos=header_length;
        }
        void AddByte(char byte_)
        {
            if (!canAdd(1)) return;
            data_[m_ReadPos++] = byte_;
            //data_[m_ReadPos] = '\0';
            buf_size++;
        }
        uint16_t PeekU16(){
            return (data_[1] | uint16_t(data_[0]) << 8);
        }
        uint16_t GetU16(){
            m_ReadPos += 2;
            return (data_[m_ReadPos+1]) | (uint16_t(data_[m_ReadPos]) << 8);
        }

        uint8_t  GetByte(){return data_[m_ReadPos++];}
        char* getBuffer()
        {
            return (char*)&data_[m_ReadPos];
        }
        char* getOutputBuffer()
        {
            writeMessageLength();
            return (char*)&data_[0];
        }

        void setMessageLength(uint16_t v)
        {
            buf_size=v;
        }
        void writeMessageLength()
        {
            *(uint8_t*)(data_) = (buf_size >> 8);
            *(uint8_t*)(data_+1) = buf_size;
        }
        void reset()
        {
            m_ReadPos = 0;
            buf_size = 0;
        }
        uint16_t size(){return buf_size+header_length;}
    protected:
        inline bool canAdd(uint32_t size)
        {
            return (size + m_ReadPos < max_body_length);
        };
    private:
        uint8_t data_[NETWORKMESSAGE_MAXSIZE];
        uint16_t buf_size;
        uint16_t m_ReadPos;
};
#endif //_NETWORK_MESSAGE_H 
```

更新：好吧，遇到了一些奇怪的事情......

```
function error_func(NetworkMessage& msg){
    cout << &msg << endl; //0x2882e8(not 0x274c0e8)
    send(msg.getOutputBuffer(), msg.size(), error_func, msg); //no error
}
cout << &msg << endl; //0x274c0e8
send(msg.getOutputBuffer(), msg.size(), error_func, msg); //error system.10014 
```

显然这不是真正的代码，但你明白了......我想这就是为什么从 error_func 重新发送它的原因。毕竟问题可能出在 NetworkMessage 中。我一直在所有错误的地方搞砸了:D 不过仍然需要帮助，大声笑。

真的很感激任何帮助，我被困住了。感谢阅读，如果你已经走到这一步了..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T21:46:36.903

```
void outputMessage(NetworkMessage& msg, bool forceTrue = false)
{
    if(!connectionLocked || forceTrue) {
        connectionLocked = true;

        std::cout << "Message: ";
        char* buf = msg.getOutputBuffer();
        for (int i = 0; i < msg.size(); i++){
            std::cout << (buf[i] + 0) << ":"; //Never any errors
        }

        boost::asio::async_write(socket_, boost::asio::buffer(msg.getOutputBuffer(), msg.size()),boost::bind(&Session::handle_write, shared_from_this(), msg, boost::asio::placeholders::error));

    }
    else {
        //Queue message
        _msgqueue.push_back(msg);
    }
} 
```

传递给的缓冲区`async_write`需要在整个操作期间有效。文档[在这里非常明确](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/async_write/overload1.html)

> 包含要写入的数据的一个或多个缓冲区。尽管缓冲区对象可以根据需要被复制，但底层内存块的所有权由调用者保留，**它必须保证它们在调用处理程序之前保持有效**。

您传递的指针在对象被销毁时不再有效`NetworkMessage`，我猜这是在`async_write`操作完成之前。该`NetworkMessage`对象在传递给您的`handle_write()`完成处理程序时被复制。

# iphone - iOS 推送通知分发证书

> ID：10140814
> 
> 赞同：3
> 
> 时间：2012-04-13T12:28:07.177
> 
> 标签：iphone, ios, notifications, push-notification

我对推送通知的分发证书有疑问。首先我使用了开发者证书并且推送通知工作正常。现在我的应用程序在应用程序商店中，我使用分发证书。我在开发人员门户中生成它，创建配置文件并使用此配置文件订阅应用程序。然后我为服务器端创建了证书并使用它。如果我发送通知苹果返回连接正常但通知永远不会发送。哪里有问题？非常感谢 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T14:26:04.170

尝试生成新证书，有时会发生。

因此，您使用什么样的脚本来发送推送通知？如果您使用 Easy APNS，请确保为数据库中的每个设备选择了“生产”证书。

# .net - .NET RSACryptoServiceProvider 中的 PyCrypto 签名消息和验证签名

> ID：10140837
> 
> 赞同：3
> 
> 时间：2012-04-13T12:29:20.997
> 
> 标签：.net, cryptography, digital-signature, pycrypto, rsacryptoserviceprovider

我正在尝试创建一个签名验证系统，该系统使用我的网站，该网站在带有 PyCrypto 引擎的 Google API 上运行。生成签名的程序非常简单：

```
from Crypto.PublicKey import RSA
from Crypto.Hash import MD5
def sign(key, message):
   digest = MD5.new(message).digest()
   signature = key.sign( digest, None )[0]
   signature = hex(signature).replace("0x","").replace("L","").upper()
   if len(signature) % 2==1:
      signature = "0" + sig 
   return signature 
```

密钥“密钥”由以下方式提供：

```
RSA.construct((m, e, d, p, q)) 
```

签名以十六进制字符串形式返回，例如：“A12D.......”

.NET 程序是：

```
 Private Function Verify(ByVal message As String, ByVal sign As String) As Boolean
    Dim md5 As New MD5CryptoServiceProvider
    Dim f As New StreamReader("D:/KEY.XML")
    Dim xml As String = f.ReadToEnd
    f.Close()

    Dim rsa As New RSACryptoServiceProvider
    rsa.FromXmlString(xml)

    Dim msg_as_bytes As Byte() = Encoding.Default.GetBytes(message)
    Dim hash_as_bytes As Byte() = md5.ComputeHash(msg_as_bytes)

    ''Dim sig_as_bytes As Byte() = convtobytes(sign)

    Dim sig_as_bytes As Byte() = New Byte(sign.Length / 2 - 1) {}
    For i As Integer = 1 To sign.Length / 2
        sig_as_bytes(i - 1) = CByte("&H" & Mid(sign, (i - 1) * 2 + 1, 2))
    Next

    Return rsa.VerifyData(hash_as_bytes, "SHA1", sig_as_bytes)
End Function 
```

但它不起作用！为什么？？

Pycrypto 和 .NET 接收相同的参数（模数、指数、d、p、q）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T13:22:37.080

我完成了！

解决方案是使用 Crypto.Signature.PKCS1_v1_5

```
from Crypto.Hash import SHA
from Crypto.PublicKey import RSA
from Crypto.Util import number
from Crypto.Signature import PKCS1_v1_5

m = 123....
e = 1111....
d = 123....
p = 365...
q = 657...

key = RSA.construct((m, e, d, p, q))

message = "message to be signed"

def assina(message):
    h = SHA.new(message)
    signer = PKCS1_v1_5.new(key)
    signature = signer.sign(h)
    return ByteToHex(signature) 
```

和 .NET 代码进行验证：

```
Private Function Verify(ByVal message As String, ByVal sign As String) As Boolean
    Dim rsa As New RSACryptoServiceProvider()
    rsa.FromXmlString(_pubKey)

    Dim msg_as_bytes As Byte() = Encoding.Default.GetBytes(message)

    Dim sig_as_bytes As Byte() = New Byte(CInt(sign.Length / 2) - 1) {}

    For i As Integer = 1 To sign.Length / 2
        sig_as_bytes(i - 1) = CByte("&H" & Mid(sign, (i - 1) * 2 + 1, 2))
    Next

    Return rsa.VerifyData(msg_as_bytes, "SHA", sig_as_bytes)
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:32:41.170

看看这两行：

> 摘要 = MD5.new(消息).digest()
> 
> 返回 rsa.VerifyData(hash_as_bytes, "SHA1", sig_as_bytes)

即使您`MD5CryptoServiceProvider`在 .NET 代码中使用 a ，您仍然`SHA1`会要求使用验证，但这是行不通的。尝试将其更改为`MD5`.

# java - 类实例化 Java

> ID：10140840
> 
> 赞同：-4
> 
> 时间：2012-04-13T12:29:22.430
> 
> 标签：java, class, instantiation

```
I i = new A(); 
```

为什么我们可以使用接口 I 来实例化类 A 的对象？我们不应该使用 A obj=new A() 吗？

```
interface I {
    void f();
    void g();
}

class A implements I {
    public void f() { System.out.println("A: doing f()"); }
    public void g() { System.out.println("A: doing g()"); }
}

class B implements I {
    public void f() { System.out.println("B: doing f()"); }
    public void g() { System.out.println("B: doing g()"); }
}

class C implements I {
// delegation
    I i = new A();

    public void f() { i.f(); }
    public void g() { i.g(); }

    // normal attributes
    public void toA() { i = new A(); }
    public void toB() { i = new B(); }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T12:32:16.857

> 我们如何使用“I”类型的引用变量来引用“A”类型的对象？

因为`A implements I`（从您的代码中逐字引用）。

`A`执行 interface 指定的所有操作`I`，因此它与引用的声明类型兼容`I`。通过接口和继承，对象可以有多种类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:32:26.690

这是因为 A 是 I 类型，因为它实现了 I 接口。

# ruby-on-rails - Rails Search [params] error

> ID：10140845
> 
> 赞同：0
> 
> 时间：2012-04-13T12:29:41.007
> 
> 标签：ruby-on-rails, ruby-on-rails-3, search, model

Hi I have a search bar for my Firms.. however it seems to be throwing up and error and I cannot work out why!

My View

application.html.erb

```
<%= form_tag firms_path, :method => 'get', :class => 'form-search'  do %>
<%= text_field_tag :search, params[:search], :class => 'input-medium search-query', :placeholder => 'Firm name' %>
<%= submit_tag "Search", :name => nil ,:class => 'btn' %>
<% end %> 
```

My firms_controller.rb

```
def index
 @firms = Firm.search(params[:search])
end

def self.search(search)
  if search
   where(['name LIKE ?', "%#{search}%"]).page(params[:id])
  else
   scoped
  end
end 
```

This used to work fine, but now it is tossing up this error.

```
NameError in FirmsController#index

undefined local variable or method `params' for #<Class:0x007f93cd8b2ac8>

app/models/firm.rb:13:in `search'
app/controllers/firms_controller.rb:8:in `index' 
```

Any ideas? Thanks in advance for any help

Ross

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:37:21.933

Modify

```
def index
 @firms = Firm.search(params[:search], params[:id])
end

def self.search(search, id)
 if search
   where(['name LIKE ?', "%#{search}%"]).page(id)
 else
  scoped
 end
end 
```

# lucene - Lucene IndexSearcher 总是返回 20 个 ScoreDocs

> ID：10140846
> 
> 赞同：0
> 
> 时间：2012-04-13T12:29:44.767
> 
> 标签：lucene

你好我有这么一段代码

```
IndexSearcher iSearcher = new IndexSearcher(dir);
TopDocs docs = iSearcher.search(parsedQuery,filter, 9); 
```

我总是得到 20 个 scoredocs。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:25:32.383

1) 您是否总是准确地返回 20 个 ScoreDocs？由于您的搜索将结果限制为 9 个 ScoreDocs，我对“20 个 ScoreDocs”感到好奇。

2) 您是否验证过您的索引包含会导致超过 20 个 ScoreDocs 的 Lucene 术语？在更改索引策略以在执行任何其他测试之前使用 Luke 测试索引后，我发现它很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:01:29.317

谢谢您的回答。问题实际上出在构建路径中。它不能包含不存在的库并且无法构建项目。这就是为什么每次我尝试更改代码和调试它时，都会使用以前构建的版本。

抱歉误导。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T13:42:57.240

仅仅因为 doc.scoreDocs.length == 20 并不意味着您收到了 20 个结果。您必须检查每个单独结果的 doc id 是否等于`Integer.MAX_VALUE`，它用作“此处无结果”标记值。这一切的重点是 Lucene 的典型特征——最小化内存分配，在这种情况下通过重用已经分配的结果数组。

# android - 管理布局运行时android

> ID：10140853
> 
> 赞同：0
> 
> 时间：2012-04-13T12:29:57.270
> 
> 标签：android, android-layout

我正在显示运行时动态图像按钮，但是我之前在屏幕上显示了一些东西，所以现在当我添加我的运行时图像按钮时，它将与以前的静态显示重叠，我想在出现的静态布局之后添加运行时图像按钮通过xml。请帮忙。

```
 for (int i =0;i<adapt_objmenu.image_array.length;i++){
         ImageButton b1 = new ImageButton(myrefmenu);
            b1.setId(100 + i);
            b1.setImageResource(R.drawable.bullet_1);
         //   b1.setPadding(left, top, right, bottom)
          b1.setPadding(0, 10, 0, 10);

          b1.setBackgroundColor(R.drawable.bg_navitionbar);

           // b1.setText(adapt_objmenu.city_name_array[i]);
            RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
            if (i > 0) {
                lp.addRule(RelativeLayout.RIGHT_OF, b1.getId() - 1);
            }   
            b1.setLayoutParams(lp);
            relative.addView(b1);

    //relate.addView(b1, i,  new RelativeLayout.LayoutParams(width,height));

    //height = height+80;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:36:06.120

您如何将 ImageButton 添加到布局中？

如果您使用 LinearLayout 作为主要布局，那么这不会发生......

```
LinearLayout layout = (LinearLayout)findViewById(R.id.myWrapperLayout);
 ImageButton imgBtn = new ImageButton(R.id.imgBtn); 
        imgBtn.setText("MyImageButton"); 
        layout.addView(imgBtn); 
```

# android - android - 如何在选项卡中使用 startActivityForResult()

> ID：10140858
> 
> 赞同：0
> 
> 时间：2012-04-13T12:30:19.033
> 
> 标签：android, android-tabhost

我的应用程序有 3 个选项卡。在这个选项卡中有多个活动（意味着此选项卡具有到子选项卡的导航）。我在一个子活动中使用了 startActivityforResult()。但控制永远不会转到 onActivityResult() 方法。如何实现这一点。请任何人都可以帮助我。

代码

```
public class Activity_1 extends Activity
{

public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    View contentView = LayoutInflater.from(getParent()).inflate(R.layout.static_search_filters, null);  
    setContentView(contentView);  

    states_tv = (TextView)findViewById(R.id.state);
    states_tv.setOnClickListener(states_etListener);        
}

private OnClickListener states_etListener = new View.OnClickListener()
{
    public void onClick(View v)
    {               
        Intent intent = new Intent(getParent(), RB_CategoriesMList.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivityForResult(intent,GET_SEL_STATES_LIST);             
    }       
};

 protected void onActivityResult(int requestCode, int resultCode, Intent data) 
 {
      super.onActivityResult(requestCode, resultCode, data);    
      //I do some stuff here
 }
} 
```

//活动_2

```
public class RB_CategoriesMList extends ListActivity
{

public Button sbtn;   

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.categories_list);           

    sbtn =(Button)findViewById(R.id.submit_categories);
    sbtn.setOnClickListener(sbtn_listener);
}       

private OnClickListener sbtn_listener = new View.OnClickListener()
{
    public void onClick(View v)
    {
        Intent state_intent = getIntent();              
        state_intent.putExtra("selected_states", "");                                       
        setResult(RESULT_OK,state_intent);
        finish();           
    }       
};  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T20:30:47.023

```
getParent().startActivityForResult(yourNewIntent, yourResult); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:48:04.423

不要打电话

```
 super.onActivityResult(requestCode, resultCode, data); 
```

当您收到 onActivityResult 时，请检查请求代码是否是您的，然后执行您的操作。在其他情况下，您应该调用超级。

所以：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{
    if (requestCode == GET_SEL_STATES_LIST) {
        // Do your stuff
    } else {
        super.onActivityResult(requestCode, resultCode, data);    
    }
} 
```

# sqlalchemy - 通过电子邮件登录 + set_own_login_name + pas.plugins.sqlalchemy = 更改地址失败

> ID：10140865
> 
> 赞同：0
> 
> 时间：2012-04-13T12:31:04.860
> 
> 标签：sqlalchemy, plone

我在全新的 Plone 4.1 安装上使用 pas.plugins.sqlalchemy。我将 Plone 设置为将电子邮件地址作为登录名。

没关系，但是如果我想通过个人信息面板更改电子邮件地址，我会收到错误消息：您不是 Plone 会员。您可能已在根用户文件夹中注册。如果这是意外情况，请通知管理员。

如果我要更改另一个个人数据字段，我不会收到错误。

问题似乎是 Products.CMFPlone (utils.py) 的 set_own_login_name 函数。详情在这里[http://pastie.org/3780218](http://pastie.org/3780218)

谢谢维托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:59:52.000

您是否以 Zope 根目录中定义的管理员用户身份登录？

如果是这种情况，那么看看您是否可以通过转到 Zope 根目录中的 acl_users 并在那里进行更改来更改登录名。

否则，请暂时关闭电子邮件登录，更改您的电子邮件，然后重新打开电子邮件登录。

请注意，在引发此 KeyError 之前，utils.py 代码中有一条注释（由我撰写），这指向了一个我不太喜欢的可能解决方案：

```
# PLIP9214: For a user in the zope root we could do something like this:
# userfolder = member.getUser().__parent__.users
# userfolder.updateUser(member.id, loginname)
# But it is probably best not to touch root zope users. 
```

# java - 如何重新启用 JButton

> ID：10140870
> 
> 赞同：0
> 
> 时间：2012-04-13T12:31:17.643
> 
> 标签：java, swing, user-interface, jbutton

我有一个程序可以测试数字是否为素数。我有一个基本的 GUI，其中包含一个文本字段和一个名为 check 的按钮。现在，我通过添加一个简单的 GUI 数字键盘扩展了这个程序。在原来的 GUI 上，我添加了一个名为*键盘*的新按钮，因此当按下时，它将打开 GUI 数字键盘并禁用检查按钮。现在我的问题是，如果 GUI 数字键盘窗口已关闭，如何重新启用复选按钮？下面是我的代码片段：

```
 if (event.getSource()==jbKeyboard) {
            jbCheck.setEnabled(false);    
            KeyboardGui g = new KeyboardGui();
            if (g.equals(DISPOSE_ON_CLOSE)) {
                    jbCheck.setEnabled(true);
            }
         } 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:38:24.963

You add a `WindowListener` for the keypad, and in the `WindowClosing(WindowEvent e)` method, you can do your `jbCheck.setEnabled(true);`

Not sure what KeyboardGui, but something like this (added after you declare and initialize g):

```
g.addWindowListener(this); 
```

Then you will need to `implement WindowListener` and add the appropriate methods.

Here is the Java Tutorial on window Listeners: [http://docs.oracle.com/javase/tutorial/uiswing/events/windowlistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/windowlistener.html)

# javascript - 单击“上传”按钮时没有出现警报

> ID：10140874
> 
> 赞同：1
> 
> 时间：2012-04-13T12:31:31.837
> 
> 标签：javascript, jquery

我想执行一个简单的 javascript 验证，当用户单击表单中的提交按钮时，它将检查文件是“png”还是“gif”文件类型。如果文件类型正确，则显示加载栏并上传表单。如果文件类型不正确，则显示文件类型不正确的警报，但不显示加载栏，也不上传表单。

下面是代码，但是当我单击“上传”按钮时它没有显示警报。我需要做什么，当用户单击“上传”按钮时，如果文件类型不正确，则会出现警报并且不上传文件，如果文件类型正确，则显示加载栏并上传文件。

```
var sourceImageForm;

var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='startImageUpload(this);' class='imageuploadform' >" + 
"<label> Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/>" +
"<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label></form>");

function startImageUpload(imageuploadform){

    $(".imageFile").change(function() {

    var val = $(this).val();

    switch(val.substring(val.lastIndexOf('.') + 1).toLowerCase()){
        case 'gif': case 'jpg': case 'png':
        return true;
            break;
        default:
            $(this).val('');
            alert("not an image");
            return false;
            break;
    }
});

  $(imageuploadform).find('.imagef1_upload_process').css('visibility','visible');
  $(imageuploadform).find('.imagef1_upload_form').css('visibility','hidden');
  sourceImageForm = imageuploadform;

      return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:33:30.200

您错过了`"`第三行的结尾，这可能是原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:35:36.427

您并没有阻止表单默认行为，因此当您提交它时，它就走了，它不关心 javascript 方面。

```
$('form').submit(function(ev) {
// do your stuff here and return true to submit it or false to stop it
}) 
```

已编辑：抱歉，您确实在提交时绑定，但是您在提交时所做的只是在更改时绑定图像元素，您实际上并没有在提交时检查任何内容

# lucene - 在 Cypher 中对 neo4js lucene 索引查询进行排序

> ID：10140885
> 
> 赞同：1
> 
> 时间：2012-04-13T12:32:21.140
> 
> 标签：lucene, neo4j, cypher

如何在 Web 控制台的密码查询中编写此示例？

```
hits = movies.query( "title", new QueryContext( "*" ).sort( "title" ) 
```

这就是我到目前为止所得到的。如何添加排序？

```
start a = node:movies("title:*") return a 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:52:25.060

你不能依赖 lucene 的顺序。如果您进行匹配或聚合，Cypher 可能不会尊重它。

相反，我建议您使用 Cypher 的排序：

start a = node:movies("title:*") 按 a.title 返回一个订单

# android - 无法将字符串从一个进程传递到另一个进程

> ID：10140888
> 
> 赞同：0
> 
> 时间：2012-04-13T12:32:23.657
> 
> 标签：android

我无法从一个进程获取字符串到另一个进程。

我已经为这个问题使用了 Intent，但我的问题是我想要获取该字符串的类扩展了 PhoneCallListener 而不是 Activity。

为了更好地理解我的问题，这里是代码：

```
// this is the class from where i want to send a string
package net.cellobject.blockingincomingcall;
import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;
public class SecondTab extends Activity 
{
    EditText e1;
    Button b1;
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.setting);
        e1=(EditText)findViewById(R.id.edt1);
        b1=(Button)findViewById(R.id.b1);
        LoadPreferences();
        b1.setOnClickListener(new OnClickListener()
        {
            public void onClick(View v) 
            {
                String msg=e1.getText().toString();
                SavePreferences("msg1",msg);
                LoadPreferences();
                if(msg=="")
                {
                    Toast.makeText(getApplicationContext(), "First Enter the message then save it",Toast.LENGTH_LONG).show();
                    e1.requestFocus();
                }
            }
        });
    }

    private void LoadPreferences() 
    {
        SharedPreferences shp= getPreferences(MODE_PRIVATE);
        String s1=shp.getString("msg1","");
        e1.setText(s1);
    }

    private void SavePreferences(String key, String msg) 
    {
        SharedPreferences shp= getPreferences(MODE_PRIVATE);
        SharedPreferences.Editor editor=shp.edit();
        editor.putString(key, msg);
        editor.commit();
    }
}

// this is the class where i want to get the string
package net.cellobject.blockingincomingcall;
import java.lang.reflect.Method;
import android.content.Context;
import android.media.AudioManager;
import android.telephony.PhoneStateListener;
import android.telephony.TelephonyManager;
import android.util.Log;
import com.android.internal.telephony.ITelephony;
public class PhoneCallStateListener extends PhoneStateListener 
{   
    private Context context;    
    public PhoneCallStateListener(Context context)
    {
        this.context = context;
    }
    public void onCallStateChanged(int state, String incomingNumber) 
        {           
            switch (state) 
            {
            case TelephonyManager.CALL_STATE_RINGING:               
                AudioManager audioManager=(AudioManager)context.  getSystemService (Context.AUDIO_SERVICE); 
                //Turn ON the mute
                audioManager.setStreamMute(AudioManager.STREAM_RING, true);     
                TelephonyManager telephonyManager = (TelephonyManager) context.getSystemService (Context.TELEPHONY_SERVICE);
                try {
                    @SuppressWarnings("rawtypes")
                    Class clazz = Class.forName (telephonyManager.getClass() .getName());
                    Method method = clazz.  getDeclaredMethod ("getITelephony");
                    method.setAccessible(true);
                    ITelephony telephonyService = (ITelephony) method.invoke(telephonyManager);     
                    //Checking incoming call number
                    String incomming=incomingNumber.toString();
                    if (incomingNumber.equalsIgnoreCase(incomming)) 
                    {
                        Log.v("incomming_call",incomming);
                        telephonyService.endCall();
                    sendSMS(incomming, "I am Busy!!call me latter");
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                }

             audioManager.setStreamMute(AudioManager.STREAM_RING, false);
             break;
        }
        super.onCallStateChanged(state, incomingNumber);
    }
    private void sendSMS(String incomming, String string) 
    {
        android.telephony.SmsManager sms=android.telephony.SmsManager.getDefault();
        sms.sendTextMessage(incomming, null, string, null, null);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:27:14.013

[如何从活动类获取数据到 PhoneStateListener 类？](https://stackoverflow.com/questions/10141345/how-to-get-data-from-activity-class-to-the-phonestatelistener-class)

请参阅上面的链接请不要一次又一次地重复相同的问题..谢谢

# android - 一个TextView中的Android多色

> ID：10140893
> 
> 赞同：59
> 
> 时间：2012-04-13T12:32:34.623
> 
> 标签：android, textview, styling

> **可能重复：**
> [TextView 中是否可以有多种样式？](https://stackoverflow.com/questions/1529068/is-it-possible-to-have-multiple-styles-inside-a-textview)

我希望我的 TextView 将其文本的某些部分显示为红色，而将其他部分显示为黑色。它的内容（文本）是动态创建的，我不知道有多少单词会变成红色。

有没有办法像在 html-css 中那样做到这一点？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-04-13T12:40:01.013

您可以使用 Spannable 来实现您想要的。

```
String text = "This is <font color='red'>red</font>. This is <font color='blue'>blue</font>.";

if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
   textView.setText(Html.fromHtml(text,  Html.FROM_HTML_MODE_LEGACY), TextView.BufferType.SPANNABLE);
} else {
   textView.setText(Html.fromHtml(text), TextView.BufferType.SPANNABLE);
} 
```

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2012-04-13T12:49:48.103

试试这个方法

```
 TextView tv = (TextView)findViewById(R.id.tv);

    Spannable wordtoSpan = new SpannableString("I know just how to whisper, And I know just how to cry,I know just where to find the answers");        
    wordtoSpan.setSpan(new ForegroundColorSpan(Color.BLUE), 15, 30, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    wordtoSpan.setSpan(new ForegroundColorSpan(Color.RED), 5, 10, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    tv.setText(wordtoSpan); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-13T12:44:12.617

你基本上想要的是`SpannableString`

有关完整示例，请参[见此内容：](http://www.chrisumbel.com/article/android_textview_rich_text_spannablestring)

# css - 100% 减去一个文本节点

> ID：10140898
> 
> 赞同：0
> 
> 时间：2012-04-13T12:32:51.277
> 
> 标签：css, css-float

我有这个简单的标记：

```
<div id="parent">
    <div id="static">
        Hello Random
    </div>
    <div id="max">
        100% of the rest
    </div>
​&lt;/div>​ 
```

我希望带有 ID 的 div`max`应该是 100% 宽度，因为它的父级减去带有 ID 的元素的宽度`static`。`static`仅包含一个带有一些我不知道的随机单词的文本节点。

我已经尝试过这个 CSS，但不知道如何解决它：

```
#parent{
    width:100%;
    border:1px solid #FF0000;
    float:left;
}

#static{
    float:left;
    border:1px solid #00FF00;
}
#max{
    float:left;
    width:90%; // It's not the same as minus so this will just fail...
}
​ 
```

这是我尝试过的 jsFiddle：http: [//jsfiddle.net/WnceY/](http://jsfiddle.net/WnceY/)

我想使用纯 CSS 没有 JS。在这一刻，我也不关心 IE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:36:10.213

只是不要浮动一切。

[http://jsfiddle.net/WnceY/4/](http://jsfiddle.net/WnceY/4/)

只有`#static`需要浮动。然后其余的将自行处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T13:02:00.857

我用这个 CSS 解决了它：

[http://jsfiddle.net/WnceY/9/](http://jsfiddle.net/WnceY/9/)

# google-app-engine - 当我更新我的 GAEJ 版本时，在什么情况下（如果有）我可以继续运行“过时”的 GWT 客户端？

> ID：10140899
> 
> 赞同：0
> 
> 时间：2012-04-13T12:32:53.593
> 
> 标签：google-app-engine, gwt

从这个问题开始： [GWT检测GAE版本更改并重新加载](https://stackoverflow.com/questions/4788266/gwt-detect-gae-version-changes-and-reload)

我想进一步澄清一些事情。

我有一个企业应用程序（GWT 2.4 和 GAEJ 1.6.4 - 使用 GWT-RPC），我的用户通常在他们的浏览器中运行一整天，确实有些人不会每天刷新浏览器。我会定期发布新版本，因此我试图简化流程，以尽量减少对我的用户的影响。- 并非所有版本都涉及所有用户，所以我想尽量减少重启次数。

我希望有可能做到以下几点。将我的版本分类如下：1) 会导致抛出 IncompatibleRemoteServiceException 的版本和 2) 不会：即仅影响服务器或客户端但不影响 RPC 接口的版本。

然后我可以对客户端和服务器进行大量更改，而不会影响两者之间的接口。只要我不修改RPC接口，想必我可以更改服务器代码和/或客户端代码并且不会抛出异常？正确的？或者 GAE 的任何重新部署是否会导致旧客户端获得 IncompatibleRemoteServiceException ？

如果我能够做到这一点，我可以将界面破坏更改批量处理为相当罕见的版本，并通知我的用户需要重新启动。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T06:47:46.833

我需要一个很快的答案，所以我想我会做一些好的老式测试，看看有什么可能。希望这对使用 GWT-RPC 的生产系统的其他人有用。

目标是能够在不需要刷新所有连接的浏览器的情况下发布更新/修复。事实证明你可以做很多事情。

所以，经过我的测试，这是你能做和不能做的事情：

**没问题**

1.  添加对 RemoteService 的新调用

2.  只需更新服务器上的一些代码，例如简单的错误修复，重新部署

3.  只需更新一些客户端（GWT）代码并重新部署（当然，任何想要新客户端功能的人都必须刷新浏览器，但其他人不受影响）

**有限的问题**

1.  向现有的 RemoteService 方法添加一个参数 - 这个很有趣，该特定调用将抛出“IncompatibleRemoteServiceException”（当然），但对**同一**远程服务或其他远程服务（Impl's）的所有其他调用不受影响。

2.  向 RemoteService 中的任何方法添加新类型（作为参数）——这是最有趣的，也是我进行此测试的原因。对于具有 IncompatibleRemoteServiceException 的现有客户端，它将使**整个 RemoteService 过时**。但是，您仍然可以使用其他 RemoteServices。- 我需要在这里做更多的测试才能完全理解，或者其他人可能知道更多？

因此，如果您知道自己在做什么，您就可以做很多事情，而无需通过更新或发布公告来打扰您的用户。

# android - 从xml访问其他xml？

> ID：10140902
> 
> 赞同：-1
> 
> 时间：2012-04-13T12:33:02.013
> 
> 标签：android, xml

如何从 xml 文件访问其他 xml 中的值。我需要访问由 SharedPreferences 创建并位于文件夹 shared_prefs 中的 xml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T12:36:59.193

您可以使用 XSLT 进行“内部”连接

# python - 如何添加答案

> ID：10140903
> 
> 赞同：1
> 
> 时间：2012-04-13T12:33:03.367
> 
> 标签：python

我有一段试卷中的代码，我正在做一些额外的帮助。

我需要帮助的代码：

```
def Denary(Hex):
    Result = ''
    ErrorFound = False
    DenaryEquivalent = ''
    EmptyInput=""
    for ThisHexDigit in Hex:
        if ThisHexDigit in ['1','2','3','4','5','6','7','8','9','0','A','B','C','D','E','F']:
            if ThisHexDigit == '0': DenaryEquivalent = '0'
            elif ThisHexDigit == '1': DenaryEquivalent = '1'
            elif ThisHexDigit == '2': DenaryEquivalent = '2'
            elif ThisHexDigit == '3': DenaryEquivalent = '3'
            elif ThisHexDigit == '4': DenaryEquivalent = '4'
            elif ThisHexDigit == '5': DenaryEquivalent = '5'
            elif ThisHexDigit == '6': DenaryEquivalent = '6'
            elif ThisHexDigit == '7': DenaryEquivalent = '7'
            elif ThisHexDigit == '8': DenaryEquivalent = '8'
            elif ThisHexDigit == '9': DenaryEquivalent = '9'
            elif ThisHexDigit == 'A': DenaryEquivalent = '10'
            elif ThisHexDigit == 'B': DenaryEquivalent = '11'
            elif ThisHexDigit == 'C': DenaryEquivalent = '12'
            elif ThisHexDigit == 'D': DenaryEquivalent = '13'
            elif ThisHexDigit == 'E': DenaryEquivalent = '14'
            elif ThisHexDigit == 'F': DenaryEquivalent = '15'
            elif ThisHexDigit == '10': DenaryEquivalent = '16'
            elif Hex==EmptyInput:
                print('Empty input, try again.')
            Result = Result + DenaryEquivalent
        else:
            ErrorFound == True
            print('You have made a mistake')

    def HexToDenary():
        Hexadecimal = input('Enter a hexadecimal number: ')
        Converted = Denary(Hexadecimal)
        print (Converted) 
```

运行时，没有错误并且程序可以运行（这只是其中的一部分）。我想知道的是如何添加结果而不是显示为二进制答案。例如，如果我输入“BB”，我会得到“1111”而不是 187。这应该很容易，但我想不通。

我知道这是一段过于复杂的代码，但它就是给出的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T12:35:43.817

问题是您的等价物是字符串，而不是整数，因此它们被连接起来，而不是相加。

所以要解决：

```
if ThisHexDigit == '0': DenaryEquivalent = 0 
```

但是，您正在展示一种非常糟糕的方法。当然，最好的方法是使用 Python 的内置处理不同的数值基 ( `int(hex_string ,16)`)，但是，假设这是一个编程练习，而不是使用大量的 if 语句，使用 a`dict`是合适的。

```
hex_digits_to_dec = {"0": 0, ..., "F": 15} 
```

一种快速的生成方法如下：

```
hex_digits_to_dec = {k: v for (v, k) in enumerate('0123456789ABCDEF')} 
```

Enumerate 返回元组，`(n, v)`其中 v 是您传入的可迭代对象（在本例中为字符串）中的每个值，n 是一个数字，从 0 开始计数。我们使用 dict 推导式来获取它，反转键和值，并使一本字典。如果您发现它更容易或更清晰，您可以手动写出来。

然后我们可以这样做：

```
hex_string = hex_string.upper() #Save ourselves any errors from lowercase hex strings.
result = 0
try:
    for digit in hex_string:
        result = 16*result + hex_digits_to_dec[digit]
except KeyError:
    print("You made a mistake, this is not a valid hexadecimal number.") 
```

这循环通过我们的十六进制字符串，将之前的值乘以 16（随着我们的进展，每个数字的价值比它左边的数字少 16 倍），并添加我们的新数字的值。

还值得注意的是，[PEP-8](http://www.python.org/dev/peps/pep-0008/)建议`CapWords`用于类和`lowercase_with_underscores`局部变量。

我的旧答案改用了这个：

```
for power, digit in enumerate(reversed(hex_string)):
    result += (16**power)*hex_digits_to_dec[digit] 
```

我们首先反转字符串以获取最低值的数字，然后枚举它们以告诉我们数字的位置（以及值）。我们取 16 的次方（得到该`1`位置的值），然后将其乘以数字的值，然后将它们加在一起。

这可行，但有人指出这是一种效率较低的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T12:37:56.303

您需要更改程序中的 2 行

```
Result = '' 
```

到

```
Result=0 
```

和

```
Result = Result + DenaryEquivalent 
```

到

```
Result = Result*16 + int(DenaryEquivalent) 
```

当然，您可以使用字典来简化它

```
>>> def denary(hex):
    denary_equivalent={'1':1,'2':2,'3':'3','4':4,'5':5,'6':6,'7':7,'8':8,'9':9,'A':10,'B':11,'C':12,'D':13,'E':14,'F':15,'10':16}
    result = 0
    for this_hex_digit in hex:
        if this_hex_digit in denary_equivalent:
            result=result*16+denary_equivalent[this_hex_digit]
    return result

>>> denary('BB')
187
>>> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-13T12:36:12.023

您的程序使用字符串。`+`连接字符串。

您需要将操作数转换为数字。

此外，您应该使用`dict`从一组数据到另一组数据的 for 映射：

```
dict((b,a) for a,b in enumerate(['0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F','10']))) 
```

另请注意，您的程序没有正确执行转换，因为它不会将每个数字提升到正确的幂。

# version-control - 使用 TortoiseHg，我如何从签入/推送中排除文件，但仍能获得更新？

> ID：10140904
> 
> 赞同：3
> 
> 时间：2012-04-13T12:33:09.997
> 
> 标签：version-control, mercurial, tortoisehg

> **可能重复：**
> [如何使用 tortoise hg “作为存储库的一部分”忽略 kiln/mercurial 中的文件](https://stackoverflow.com/questions/7351076/how-to-ignore-files-in-kiln-mercurial-using-tortoise-hg-that-are-part-of-the-re)

我有一个我不想签入的配置文件，但是我确实希望在有人签入更改时获得更新。

在大多数系统中，我只需要在签入时取消选中配置文件旁边的勾号，但是 HG 似乎让生活变得更加艰难！

Parforce 这更容易，我可以在不同的更改列表中检查配置文件，我如何在 TortoiseHg 中做同样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T16:10:06.200

一般来说，你不会。处理这个问题的常用方法不是将配置文件放在源代码管理中，而是将其模板放在源代码管理中。类似的东西`config.sample`。您甚至可以调整运行/构建脚本以复制`config.sample`到`config` **if `config`doesn't already exists**。

有很多其他方法可以尝试使用 mq 或类似的别名来解决此问题`mycommit = commit -X config`，但其核心是一个文件要么被跟踪，要么不被跟踪，而且每个人都必须更改自己的文件不应该被跟踪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T12:37:22.867

如果您在提交之前从文件列表中取消选中该文件，它将不会进入更改集。这意味着它不会在推送中出现（因为这些是每个更改集）。

这是 Tortoise 的一项功能，使其在命令行中非常有用。

如果您使用已编辑的文件进行拉动，您将创建多个头。如果您希望文件具有更改功能，您可以合并这些，但这可能是一个手动步骤。

**或者**，在配置文件的情况下，使用 Mercurial 的 Patch Queue 功能很有用。因此，从命令行这是可能的（假设它在您的工作目录中更改）：

```
hg qnew "localConfig"
hg qrefresh 
```

这将创建一个名为“localConfigs”的新补丁队列项目，并将编辑后的文件（您的配置文件）放入该项目。然后您可以：

```
hg qpop 
```

将其从补丁队列中删除（从您的更改集路径中）。或者：

```
hg qpush 
```

把它放在你的变更集路径中。这是一种更简单的管理文件更改的方法，您可以在与中央存储库保持同步的基础上定期进行：您将队列项目弹出、拉取和更新，然后将队列项目推回（处理任何合并冲突，尽管这些是如果您的物品很小，则很少见）。这样你就可以避免多个头。

[https://www.mercurial-scm.org/wiki/MqExtension](https://www.mercurial-scm.org/wiki/MqExtension)

我们倾向于在办公室使用这种机制。

注意，推入和弹出就像一个堆栈集合；如果“localConfigs”位于“moreLocalChanges”之上，如果您希望推送“localConfigs”，则两者都需要。我的示例假设“localConfigs”补丁是队列中唯一的补丁。在 Mercurial 配置中默认情况下它也被禁用，但与它捆绑在一起，因此您可以简单地启用它：

```
[extensions]
mq = 
```

# ios - 如何在 iOS 上使用代码截屏？

> ID：10140907
> 
> 赞同：3
> 
> 时间：2012-04-13T12:33:30.277
> 
> 标签：ios, uiimage, screenshot

如何以编程方式截取屏幕截图？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-13T12:41:29.067

您可以`UIGraphicsBeginImageContext`用于此目的。

例如 ：

```
UIGraphicsBeginImageContextWithOptions(self.view.bounds.size, self.view.opaque, 0.0);
[self.myView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage*theImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

NSData*theImageData = UIImageJPEGRepresentation(theImage, 1.0 ); //you can use PNG too
[theImageData writeToFile:@"example.jpeg" atomically:YES]; 
```

这里

**1.**首先我获取图像上下文，我已经给出了它`myView`是一个webview，你可以给出你想要的任何东西。这将获取可以在屏幕上看到的 webview 图像。

**2**使用`UIGraphicsGetImageFromCurrentImageContext()`我将我的 webview 的屏幕截图转换为图像。

**3.**通过使用`UIGraphicsEndImageContext()`i ask it 结束上下文。

**4.**我将图像保存到一个，`NSData`因为我不得不邮寄屏幕截图。`NSData`如果它用于发送或保存，则保留它似乎是一个不错的选择。

**编辑：**要将其添加到相机胶卷中，您需要编写：

`UIImageWriteToSavedPhotosAlbum(theImage,nil,NULL,NULL);`后`UIGraphicsEndImageContext();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:37:21.303

看看这个[答案](https://stackoverflow.com/a/2203293/641062)。它还负责视网膜显示。

其实要解释这个过程，

*   选择图像上下文大小（可能是您需要截屏的图层大小）
*   在创建的上下文中渲染要截屏的图层
*   从上下文中获取图像，你就完成了！

# lotus-notes - 如何选择特定类型的 Notes 文档？

> ID：10140909
> 
> 赞同：2
> 
> 时间：2012-04-13T12:33:55.683
> 
> 标签：lotus-notes

我正在尝试从 Notes 数据库中选择文档以在视图中显示。使用

```
SELECT @All 
```

应显示所有文件；如果我创建一个显示该`Form`字段的列，我会得到该列中显示的文档类型，也应该如此。我可以看到有几个文档将此字段设置为`Task`.

现在我想选择所有`Task`文件：

```
SELECT (Form = "Task") 
```

结果集是空的，这不是我所期望的，尤其是逆向语句

```
SELECT (Form != "Task") 
```

和

```
SELECT (!(Form = "Task")) 
```

确实返回除`Task`类型文件之外的所有文件。

这可能是什么原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T13:04:34.553

任务文档很可能是“响应”文档。在这种情况下，您需要更改在层次结构中显示响应文档的视图属性。

或者您也可以选择父文档并包括后代。例如，假设项目文档是父类型，任务文档是响应（即子文档）。那么您的选择公式将是：

```
SELECT Form = "Project" | @AllDescendants 
```

确保查询正确的另一个技巧是在视图中选择一个文档（当然是带有 Select @ALL 选择公式的视图），然后单击文件 > 文档 > 属性。然后您可以看到该文档中的每个项目，包括表单项目。检查其值以确保将其设置为“任务”而不是其他内容。这是一个范围，但只是认为那里可能有一个隐藏的字符，所以如果它在该属性对话框中显示为“任务”，您就会知道选择公式失败的原因。

# symfony - 如何让 Symfony2 与 SQL Azure 连接？

> ID：10140912
> 
> 赞同：5
> 
> 时间：2012-04-13T12:34:00.733
> 
> 标签：symfony, doctrine, azure-sql-database

有没有人已经在这个话题上取得了成功？我已经尝试过编写一个自定义的 Doctrine 平台，但它并不像我想象的那么容易。

*顺便说一句，这是第一个用 [sql-azure] [symfony-2.0] 标记的问题*：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:09:05.343

检查[https://github.com/beberlei/AzureDistributionBundle](https://github.com/beberlei/AzureDistributionBundle) 这应该已经可以工作了，至少对于简单的 symfony2 应用程序来说是这样。

# php - 致命错误：未捕获的异常 'Exception' 带有消息 'DateTime::

> ID：10140915
> 
> 赞同：3
> 
> 时间：2012-04-13T12:34:13.007
> 
> 标签：php, mysql

帮助修复此错误

> 致命错误：未捕获的异常 'Exception' 带有消息 'DateTime::_ *construct() [datetime.--construct]：无法在位置 0 (-) 解析时间字符串 (--)：Z:\home 中的意外字符\plati\www\view.php:110 堆栈跟踪：#0 Z:\home\plati\www\view.php(110): DateTime->* _construct('--') #1 {main} 在 Z 中抛出： \home\plati\www\view.php 在第 110 行

```
$newday = $a['dayz'];
$endmonth = $a['monthz'];
$newyear = $a['yearz'];
$date = new DateTime("$newyear-$endmonth-$newday");
$date->modify('+8 day');
$year = $date->format('Y');
$month = $date->format('m');
$day = $date->format('d'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T12:37:57.140

你有没有试过打印价值`"$newyear-$endmonth-$newday"`？因为从错误来看，变量看起来没有填充任何内容。所以请发布该字符串的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:39:13.443

$a 中的值为空；检查您的输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T12:53:25.120

> 帮助修复此错误

您可以通过捕获异常轻松地处理它，这将修复错误，因为您不再需要为该错误而烦恼：

```
try {
    $newday = $a['dayz'];
    $endmonth = $a['monthz'];
    $newyear = $a['yearz'];
    $date = new DateTime("$newyear-$endmonth-$newday");
    $date->modify('+8 day');
    $year = $date->format('Y');
    $month = $date->format('m');
    $day = $date->format('d');
} catch(Exception $e) {
    # do nothing
} 
```

至少在某些时候您需要进行错误处理。异常要求你这样做，`DateTime`抛出异常。

# java - 持久化性能逐渐下降

> ID：10140917
> 
> 赞同：2
> 
> 时间：2012-04-13T12:34:25.037
> 
> 标签：java, mysql, jpa, ejb, eclipselink

给定：`@Stateless`EJB、JTA Mysql 数据源中的方法和我试图在一个循环中坚持的大约 5000 个实体的列表：

```
List<MyObj> objList = entityManager.createNamedQuery("Q1", MyObj.class).getResultList();
for(MyObj obj : objList) {
  long start_time = Calendar.getInstance().getTimeInMillis();
  entityManager.persist(obj);
  long end_time = Calendar.getInstance().getTimeInMillis();
  logger.info("Object saved in " + (end_time - start_time) + "ms");
}
entityManager.close(); 
```

日志显示性能逐渐下降`15ms`，以`180ms`节省每个实体的时间。我相信 Mysql 服务器设置远远超出了此任务的需要 - 它显示 CPU 和 I/O 操作的增加微不足道。每次`EntityManager`更新后刷新都没有效果。

这种性能下降的原因可能是什么？请指出我正确的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T12:44:13.127

看起来减速是由持久性上下文中的大量实体（即在其会话缓存中）引起的。`flush`在这里没有帮助，因为它不会从持久性上下文中删除实体。

如果您需要使用单个持久性上下文处理大量实体，建议您`clear()`定期清除上下文。

# similarity - 如何标准化 Levenshtein 距离以获得最大对齐长度而不是字符串长度？

> ID：10140923
> 
> 赞同：14
> 
> 时间：2012-04-13T12:34:46.000
> 
> 标签：similarity, levenshtein-distance, edit-distance

**问题：** 一些 R 包具有用于计算两个字符串相似度的 Levenshtein 距离实现，例如[http://finzi.psych.upenn.edu/R/library/RecordLinkage/html/strcmp.html](http://finzi.psych.upenn.edu/R/library/RecordLinkage/html/strcmp.html)。计算的距离可以很容易地针对字符串长度进行归一化，例如通过将 Levenshtein 距离除以所涉及的最长字符串的长度或将其除以两个字符串的长度的平均值。然而，对于语言学中的某些应用（例如方言学和接受性多语言研究），建议将原始 Levenshtein 距离标准化为最长最小成本对齐的长度（Heeringa，2004：130-132）。从感知语言的角度来看，这往往会产生更有意义的距离度量。

**示例：** 德语字符串“tsYklUs”（Zyklus = cycle）可以在 7 槽对齐中转换成它的瑞典同源词“sYkEl”（cyckel = (bi)cycle），其中两个插入 (I) 和两个替换 (S)总转换成本为 4。归一化 Levenshtein 距离：4/7

（一个）

```
t--s--Y--k--l--U--s
---s--Y--k--E--l---
===================
I-----------S--S--I = 4 
```

也可以将字符串转换为具有 3 个插入 (I) 和 1 个删除 (D) 的 8 槽对齐方式，总对齐成本也为 4。归一化 Levenshtein 距离：4/8

(乙)

```
t--s--Y--k-----l--U--S
---s--Y--k--E--l------
======================
I-----------D-----I--I = 4 
```

后一种对齐在语言上更有意义，因为它将 [l] 音素彼此对齐，而不是与 [E] 和 [U] 元音对齐。

**问题：** 有谁知道任何 R 函数可以让我标准化 Levenshtein 距离以获得最长的最低成本对齐，而不是正确的字符串长度？感谢您的输入！

**参考：** WJ Heeringa (2004)，使用 Levenshtein 距离测量方言发音差异。博士论文，格罗宁根大学。[http://www.let.rug.nl/~heeringa/dialectology/thesis/](http://www.let.rug.nl/~heeringa/dialectology/thesis/)

**编辑 - 解决方案：**我想我想出了一个解决方案。该`adist`函数可以返回对齐方式，并且似乎默认为最长的低成本对齐方式。拿上面的例子来说，这里是与*sykel*到*tsyklus*相关的对齐：

```
> attr(adist("sykel", "tsyklus", counts = TRUE), "trafos")
     [,1]      
[1,] "IMMMDMII" 
```

为了按照 Heeeringa (2004) 的建议计算长度归一化距离，我们可以编写一个适度的函数：

```
normLev.fnc <- function(a, b) {
  drop(adist(a, b) / nchar(attr(adist(a, b, counts = TRUE), "trafos")))
} 
```

对于上面的示例，这将返回

```
> normLev.fnc("sykel", "tsyklus")
[1] 0.5 
```

此函数还返回 Heeeringa (2004: 131) 示例的正确归一化距离：

```
> normLev.fnc("bine", "bEi")
[1] 0.6
> normLev.fnc("kaninçen", "konEin")
[1] 0.5555556
> normLev.fnc("kenEeri", "kenArje")
[1] 0.5 
```

比较几对字符串：

```
> L1 <- c("bine", "kaninçen", "kenEeri")
> L2 <- c("bEi",  "konEin", "kenArje")
> diag(normLev.fnc(L1, L2))
[1] 0.6000000 0.5555556 0.5000000 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T10:40:47.037

如果任何语言学家偶然发现这篇文章，我想指出 RecordLinkage 包提供的算法不一定是比较非 ASCII 字符串的最佳算法，例如：

```
> levenshteinSim("väg", "way")
[1] -0.3333333
> levenshteinDist("väg", "way")
[1] 4
> levenshteinDist("väg", "wäy")
[1] 2
> levenshteinDist("väg", "wüy")
[1] 3 
```

# c# - 命名空间中不存在类型或命名空间名称

> ID：10140931
> 
> 赞同：9
> 
> 时间：2012-04-13T12:35:30.250
> 
> 标签：c#

我在 .cs 文件中有下面的代码，我遇到了下面的错误，任何帮助将不胜感激。

```
using System.Data.Entity;

namespace Assignment2.Models
{
    public class TicketBookingEntities : DbContext
    {
        public DbSet<Performance> Performances { get; set; }
        public DbSet<Production> Productions { get; set; }
    }
} 
```

错误：

```
Error   1   The type or namespace name 'Entity' does not exist in the namespace 'System.Data' (are you missing an assembly reference?)
Error   2   The type or namespace name 'DbContext' could not be found (are you missing a using directive or an assembly reference?)
Error   3   The type or namespace name 'DbSet' could not be found (are you missing a using directive or an assembly reference?)
Error   4   The type or namespace name 'DbSet' could not be found (are you missing a using directive or an assembly reference?) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-13T12:37:31.943

确保您的项目包含对**EntityFramework.dll**的引用。如果您不知道如何添加引用，请参阅[此链接](http://msdn.microsoft.com/en-us/library/wkze6zky%28v=vs.100%29.aspx)
中 的主题**在 Visual C#**中添加引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T12:39:30.563

尝试在对象浏览器中查找您丢失的引用。

# java - C 服务器和一个 java 客户端。如何读取完整的字符串？

> ID：10140934
> 
> 赞同：0
> 
> 时间：2012-04-13T12:35:36.613
> 
> 标签：java, c++, c, sockets, winsock

我已经实现了一个 C 服务器和一个 Java 客户端，它们通过 TCP 相互通信。问题是当客户端发送一个字符串时，C 服务器中的 recv() 调用只是读取一个字符并立即返回。如果我在 recv() 处设置断点，然后进行单步处理，服务器会收到发送的整个字符串。这是我在 C 中使用的 recv 调用

```
char tempBuffer[256] = {'\0'};  
int retVal = recv(hClientSocket, tempBuffer, sizeof(tempBuffer), 0); 
```

这是Java客户端。

```
clientSocket = new Socket("127.0.0.1", 24886);
DataOutputStream outToServer = new DataOutputStream(clientSocket.getOutputStream());
outToServer.writeBytes("alert(\"hi\")"); 
```

我的问题是，有没有一种方法可以让我完成这项工作，而不必在我的 C 服务器代码中放置一个 while 循环来分别接收每个字符？最好的方法是什么？[我实现了这里](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/example/echo/blocking_tcp_echo_client.cpp)给出的 C++ 客户端，它工作正常。所以我猜这是Java+C++互操作性的一些问题。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T12:45:09.167

尽管 Scott M 所说的在 Java 方面是正确的（关于使用`flush`），但您将不得不重新设计整个通信协议。

您将不得不告诉 C 代码，预计要发送多少字节（这将是最容易跟踪的），或者使用某种终止字符来识别字符串输入已经结束（例如空终止符字节）。

绝对不能保证网络层不会任意切断转换，因此请防御性地编写代码并期望`recv`始终接收部分数据，您必须组装这些数据以供内部使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T12:37:19.997

尝试刷新 java 流。它们通常是缓冲的，这将导致将字节写入流的一些延迟。足够长以全速搞乱代码，足够短以在调试时发送整个字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T12:45:09.067

使用 TCP 没有办法解决“放置一个 while 循环`recv()`”。TCP 是建立在有限大小的数据包服务 (IP) 之上的流协议。TCP 自己进行“打包”，而且实际上非常聪明。这意味着您永远不知道从套接字读取的下一次将返回多少字节。

众所周知的有效策略是设计您的应用程序级协议，以便消息本身告诉它有多大，然后循环读取，直到您有完整的消息要处理。

话虽如此，假设您知道预期的数据量，您可以使用它来等待给定数量的数据，即调用`MSG_WAITALL`标志。[`recv(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/recvmsg.2.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T12:42:24.920

我曾经尝试过使用一个标头来指示字符串的长度..这样 din 必须检查消息的结尾..

# ruby-on-rails - 如何使用 capybara 测试基于 USER_AGENTs 的视图功能

> ID：10140948
> 
> 赞同：1
> 
> 时间：2012-04-13T12:36:31.377
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, cucumber, capybara

我在 Rails 3.2 应用程序中有一些功能需要由用户的 USER_AGENT 驱动。基本上，对于某些较旧的浏览器，我需要以不同的方式呈现页面。

如何使用 capybara / cucumber 测试我的视图是否正确响应？

我看到了这篇文章，但它看起来不适用于最新的水豚——它基本上破解了水豚存根环境参数的方式：

[http://blog.sparqcode.com/2011/03/07/custom-user-agent-strings-with-cucumber-and-capybara/](http://blog.sparqcode.com/2011/03/07/custom-user-agent-strings-with-cucumber-and-capybara/)

我想要的是一个看起来像这样的黄瓜步骤定义：

```
When /^I visit the page with an unsupported browser$/ do
  user_agent = "Mozilla/5.0 (X11; U; Linux i686; pl-PL; rv:1.9.0.2) Gecko/2008092313 Ubuntu/9.25 (jaunty) Firefox/3.8"
  # do something here that mimics the user arriving on the page with this USER_AGENT
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:05:45.840

如果您使用 Firefox 运行测试，您可以使用您喜欢的任何 USER_AGENT 创建自定义驱动程序。看到[这个答案](https://stackoverflow.com/a/5671840/74152)。

一旦您创建了自定义驱动程序，您可以在运行场景时使用它，只需使用驱动程序名称标记场景，例如，如果您这样做`Capybara.register_driver :old_browser`，您可以将场景标记为`@old_browser`，Capybara 将自动切换驱动程序。如果您不喜欢这样，您可以随时切换驱动程序：`Capybara.current_driver = :old_browser`.

# java - 无损图像旋转

> ID：10140950
> 
> 赞同：1
> 
> 时间：2012-04-13T12:36:42.187
> 
> 标签：java, android, image, jpeg, rotation

我目前正在尝试在我的应用程序中实现一个旋转功能，该功能正在播放图像。

该功能将允许用户将图像旋转 -90 度和 +90 度（切换横向/纵向模式）

这是我的代码：

```
public Bitmap rotateRight(Bitmap bm) {
    Matrix matrix = new Matrix();
    matrix.postRotate((float)90);

    Bitmap nbm = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(), bm.getHeight(), matrix, true);
    nbm.setDensity(bm.getDensity());
    return nbm; 
} 
```

之后，我将图像保存到文件系统。

这项工作完美，但如果我尝试将同一图像旋转 5 或 6 次，就会出现问题。图像质量会下降，我最终将有一个非常丑陋的图像来显示......

你可以帮帮我吗 ？先感谢您 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:44:07.970

第一：in的最后一个参数`createBitmap()`是是否过滤得到的位图。当它设置为 true 时，每次执行此操作时，您的位图都会变得更加“模糊”。由于您不更改位图的大小，您可能希望将其关闭。

其次：确保将图像保存为无损格式，例如 PNG。如果您保存为 JPG 或其他有损格式，则每次保存都会降低质量，即使您将质量参数设置为最高也是如此。

# php - 检查不同的值忽略其他列数据

> ID：10140951
> 
> 赞同：1
> 
> 时间：2012-04-13T12:36:43.623
> 
> 标签：php, sql, distinct

如果我有一个包含这样数据的表：

```
 Col1 |  Col2 | Col3

   111  |  a     | 

   222  |  b     |  1

   111  |        | 
```

我希望仅从我的临时表中选择 Distinct Col1，然后插入到另一个表中。但是对于上面的表，第二个“111”也将被选中，因为它具有不同的 Col2 数据。

或者如果我选择 Distinct Col1 only ，其他列数据将被忽略......

那么有没有办法解决这个问题呢？我希望只选择插入的第一行相同的 Col1 数据。

我正在使用这个查询：

```
mysql_query("INSERT DELAYED INTO Tableb (Col1,Col2,Col3) SELECT DISTINCT Col1,Col2,Col3 FROM TempTable"); 
```

感谢您的回复。

PS：我不确定如何根据我的问题指定标题......也许有人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:42:11.417

也许是这样的（这可能是你想要的）：

```
INSERT INTO Tableb
(
    Col1,Col2,Col3
)
SELECT
    t.Col1,
    MAX(t.Col2) AS Col2,
    MAX(t.Col3) AS Col3
FROM
    TempTable as t
GROUP BY
    t.Col1 
```

或者，如果您想要 MIN 值。像这样：

```
INSERT INTO Tableb
(
    Col1,Col2,Col3
)
SELECT
    t.Col1,
    MIN(t.Col2) AS Col2,
    MIN(t.Col3) AS Col3
FROM
    TempTable as t
GROUP BY
    t.Col1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:48:06.307

首先，您需要确定 col1 的每个不同值的最后一个 ID，然后选择包含此 ID 的行：

```
INSERT DELAYED INTO Tableb (Col1,Col2,Col3) 
SELECT TempTable.Col1, TempTable.Col2, TempTable.Col3
from TempTable
inner join
(
   select Col1, max(ID) ID
     from TempTable
    group by Col1
) c
ON TempTable.ID = c.ID 
```

内部查询返回要插入的 ID，因此只需将它们连接到原始表以过滤表。

如果您想首先插入 TempTable 记录，请将 max(id) 替换为 min(id)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:44:11.500

```
mysql_query("INSERT DELAYED INTO Tableb (Col1,Col2,Col3) SELECT Col1, MAX(t.Col2) AS Col2, MAX(t.Col3) AS Col3 FROM TempTable GROUP BY Col1"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T12:44:51.103

```
INSERT DELAYED INTO Tableb (Col1,Col2,Col3) SELECT Col1,Col2,Col3 FROM TempTable GROUP BY Col1 ORDER BY [your way of sorting here] 
```

这样做吗？

# cappuccino - 在 Cappuccino 中使用 Cocoa 类名

> ID：10140952
> 
> 赞同：0
> 
> 时间：2012-04-13T12:36:45.330
> 
> 标签：cappuccino, objective-j

在为 Cappuccino 开发时，是否可以将 Cocoa 名称用于等效的 Cappuccino 类？

我正在考虑尝试利用 JSCocoa、Cappuccino 和 Emscripten 开发纯 JavaScript 或纯Objective-C 应用程序，最终将使用本机 Cocoa 或 Cappuccino 以相同的方式编译。但共享代码的第一步是让 Cappuccino 使用与 Cocoa 相同的类名，反之亦然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T13:59:42.297

您可能可以创建每个 Cappuccino 类的子类并通过其 NS* 名称调用它，然后导入该子类文件。

但是，由于无论如何您都必须进行编译步骤（将指向变量的指针和一些类型声明转换为 var 语句，如果没有别的），您不妨借此机会替换`NS`对`CP`任何全局的引用。

# mongodb - 同时嵌入和非嵌入文档

> ID：10140953
> 
> 赞同：1
> 
> 时间：2012-04-13T12:36:49.047
> 
> 标签：mongodb, mongoid

我需要有一个表现得像嵌入式和非嵌入式的模型。

例如，如果我想将此模型存储为嵌入式：

```
class MenuPosition
  include Mongoid::Document
  field :name, type: String
  field :category, type: String 
```

我需要添加

```
 embedded_in :menu 
```

给它。

另一方面，如果我在模型中添加这一行，我无法将此模型存储为未嵌入：

```
position = {
            "name" => "pork",
            "category" => "meal",
            "portion" => 100
        }
MenuPosition.create(position) 
```

错误信息：

```
NoMethodError:
       undefined method `new?' for nil:NilClass 
```

我可以将一种模型用于嵌入式和非嵌入式文档吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T22:32:24.800

在我们的项目中，我们也有类似的事情。我们所做的是将字段定义为一个模块。有点像这样：

```
module SpecialFields
  extend ActiveSupport::Concern

  included do
    field :my_field, type: String
    field :my_other_field, type: String
  end
end 
```

然后在您要嵌入的班级中，只需执行以下操作：

```
include SpecialFields 
```

在您想单独存储为非嵌入式文档的班级中，执行以下操作：

```
class NotEmbeddedDoc
  include Mongoid::Document

  include SpecialFields
end 
```

这在我们的项目中工作得很好。但是，它可能不适合您的情况，因为您想嵌入很多。这仅适用于我认为嵌入的一种情况。我把它贴在这里以防它帮助人们。

# objective-c - 如何使用由 MasterViewController 使用 Apple Master-Detail 模板发送的 URL 在 DetailViewController 中加载 Webview

> ID：10140960
> 
> 赞同：0
> 
> 时间：2012-04-13T12:37:13.653
> 
> 标签：objective-c, ios5, uiwebview, master-detail

ebview 未显示或加载详细页面。

我是 IOS 开发的初学者，我正在使用 Master-Detail 模板开发项目。

我的要求是

主视图（菜单 --> 左侧窗口） 详细视图（右侧窗口）

当用户在左侧窗口菜单中选择项目时，应在右侧窗口的详细视图页面中的 UIWebview 中加载从主左侧菜单接收到的相应 URL。对我来说 webview 没有加载。

请帮我解决这个问题并提供示例代码或参考 URL 来解决这个问题

提前致谢，

乌代

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:37:05.213

它会是这样的： 在 MasterViewController.m

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *object = [_objects objectAtIndex:indexPath.row];//assuming you keep the url list in _objects
    self.detailViewController loadPage:object];
} 
```

在 DetailViewController.m

```
- (void)loadPage:(NSString*)urlString
{
  NSURLRequest* request=[NSURlRequest requestWithURL:[NSURL urlWithString:urlString]];
 [self.webView loadRequest:request]; //assuming your UIWebView is property named webView
} 
```

我强烈建议你阅读一些关于 UITableViewController 的教程，因为你不能不理解它。

# maven - 如何将自定义 jar 文件传递 给 maven jarsigner 插件进行签名

> ID：10140962
> 
> 赞同：1
> 
> 时间：2012-04-13T12:37:19.047
> 
> 标签：maven, jarsigner

我有一个 Maven 构建配置，我在其中执行以下步骤

1) 使用 maven 程序集插件编译和构建 jar 文件 (ABC.jar) 2) 使用 maven-proguard 插件运行 proguard 以收缩和混淆 jar 文件以获得生成的文件为 ABC-small.jar 3) 运行 maven jarsigner 插件，用于签署最终的 jar ABC-small.jar

问题是 jarsigner 插件总是选择从 maven-assembly 生成的初始 ABC.jar 文件，而不是从 maven-proguard 插件生成的 ABC-small.jar。

如何告诉 jarsigner 插件选择 ABC-small.jar ？

这是我在 pom 文件中的 maven-jarsigner 配置

```
<plugin>
    <artifactId>maven-jarsigner-plugin</artifactId>
    <version>1.2</version>
    <executions>
        <execution>
            <id>sign</id>
            <goals>
                <goal>sign</goal>

            </goals>
        </execution>
    </executions>
    <configuration>
        <!--  <storetype>pkcs12</storetype> -->
        <keystore>cert\keystore</keystore>
        <alias>applet</alias>
        <storepass>applet</storepass>
        <keypass>applet</keypass>
    </configuration>
</plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:32:15.167

[插件文档](http://maven.apache.org/plugins/maven-jarsigner-plugin/usage.html)说基本配置对项目 jars 和任何附加*的*jars 进行签名。ABC-small.jar 是否附加到项目中？如果不是，请尝试`<archive>`在插件配置中包含该元素。值应该是 ABC-small.jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T12:35:30.013

```
<configuration>
  <archive>${project.build.directory}/ABC-small.jar</archive>
  <keystore>cert\keystore</keystore>
  <alias>applet</alias>
  <storepass>applet</storepass>
  <keypass>applet</keypass>
</configuration> 
```

在您的配置中，您必须在标签中提及 jar 文件路径。

添加更多信息 @user944849 解释.. 如果你想为你的胃口生成密钥库，请使用 keytool-maven-plugin ..

# jquery - Jquery 目标非子元素

> ID：10140964
> 
> 赞同：0
> 
> 时间：2012-04-13T12:37:21.353
> 
> 标签：jquery

我有一系列使用 jquery .animate 方法打开的选项卡。它们都有相同的类名，所以我使用 .children 方法只打开单击的选项卡。

问题是我需要在打开时关闭所有其他选项卡。我需要定位所有选项卡内部类，不包括单击的子级。

```
<div class="tab">
    <div class="tab-inner">
    </div>
</div>

<div class="tab">
    <div class="tab-inner">
    </div>
</div>

<div class="tab">
    <div class="tab-inner">
    </div>
</div>

$('.tab').toggle(function() {
        $(this).children('.tab-inner').animate({width: 840});
  }, function() {
        $(this).children('.tab-inner').animate({width: 60});
  }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T12:41:20.320

```
$(this).siblings().children('.tab-inner') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:41:39.340

您可以`.tab-inner`先为所有元素设置动画：

```
$('.tab').toggle(function() {
    $('.tab-inner').animate({ width : 60 });
    $(this).children('.tab-inner').animate({ width : 840 });
}, function() {
    $(this).children('.tab-inner').animate({ width : 60 });
}); 
```

# javascript - 如何使用 mvc 在 sencha touch 2 中更新控制器中的表单面板记录？

> ID：10140969
> 
> 赞同：0
> 
> 时间：2012-04-13T12:37:26.813
> 
> 标签：javascript, sencha-touch-2

我有一个示例登录表单。那里有一个控制器、视图和一个模型。我想验证表单。我的表单面板 ID 是“formPanelLogin”，并且必须更新控制器中的表单记录。但是这段代码“formPanelLogin.updateRecord(teamModel);” 无法工作并出现“updateRecord 未定义”之类的错误消息。请给我这个问题的答案。我的代码将遵循..

```
//Controller

Ext.define('MyApp.controller.mvcController', {
    extend: 'Ext.app.Controller',

            config: {
                        refs: {
                                    BtnSubmit: "#btnSubmit",
                                    BtnCancel:"#btnCancel",
                                    BtnPromoHome:"#PromotionsBtnHome",
                                    BtnThirdBack:"#thirdBtnBack",
                                    BtnSecondBack:"#btnUnderHoodService",                                   
                              },
                        control: {
                                    BtnSubmit:
                                                {
                                                    tap: "onBtnSubmitTap"
                                                },
                                    BtnCancel: 
                                                {
                                                    tap: "onBtnCancelTap"
                                                },
                                    BtnPromoHome:
                                                {
                                                    tap: "onBtnPromoHomeTap"
                                                },
                                    BtnSecondBack:
                                                {
                                                    tap: "onBtnSecondBackTap"
                                                },
                                    BtnThirdBack:
                                                {
                                                    tap: "onBtnThirdBackTap"
                                                }
                                }
                    },

                    onBtnCancelTap: function (options)
                    {   
                        //formPanelLogin.reset();                                       
                        var teamModel = Ext.create('MyApp.model.MyModel'),
                                    errors, errorMessage = '';                                  
                                    formPanelLogin.updateRecord (teamModel);
                                    errors = teamModel.validate();
                                    if (!errors.isValid()) {
                                    errors.each(function (err) {
                                        errorMessage += err.getMessage() + '<br/>';
                                    }); // each()
                                    Ext.Msg.alert('Form is invalid!', errorMessage);
                                } else {
                                    Ext.Msg.alert('Form is valid!', '');
                                } // if         
                        console.log("Cancel");  
                    },
});

//view

Ext.define('MyApp.view.MyContainer', {
    extend: 'Ext.Container',

    config: {
        layout: 
            {
                type: 'card'                
            },          
        items: [
            {
                xtype: 'panel',
                id: 'panelOuter',
                layout: 
                    {
                        type: 'card',
                        animation:
                        {
                            type: 'slide'                                                                                                                                                                                   
                        }
                    },          
                items: [
                {
                 xtype: 'panel',    
                 items: [
                    {
                        xtype: 'toolbar',
                        docked: 'top',
                        title: 'MVC',
                        items: [
                            {
                                xtype: 'button',
                                docked: 'left',
                                id: 'btnBack'                               
                            },
                            {
                                xtype: 'button',
                                docked: 'right',                                
                                id: 'btnHome'
                            }
                        ]
                    },
                    {
                        xtype: 'formpanel',
                        docked: 'top',
                        height: 117,
                        id: 'formPanelLogin',
                        scrollable: true,
                        items: [
                            {
                                xtype: 'fieldset',
                                id: 'loginform',
                                items: [
                                    {
                                        xtype: 'textfield',
                                        label: 'UserName',
                                        name: 'userName',
                                        labelWidth: '40%',
                                        name: 'usernameField',
                                        placeHolder: '...... Type here .......',
                                        required: true
                                    },
                                    {
                                        xtype: 'passwordfield',
                                        label: 'Password',
                                        labelWidth: '40%',
                                        required: true
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        xtype: 'panel',
                        height: 45,
                        id: 'btnPanel',
                        items: [
                            {
                                xtype: 'button',
                                docked: 'right',
                                id: 'btnSubmit',
                                ui: 'action-small',
                                width: 85,
                                text: 'Submit'                              
                            },
                            {
                                xtype: 'button',
                                docked: 'right',
                                id: 'btnCancel',
                                ui: 'decline-small',
                                width: 85,
                                text: 'Cancel'
                            }
                        ]
                    }
        ]}
                ]
            },
});

//model

Ext.define('MyApp.model.MyModel', {
    extend: 'Ext.data.Model',
    config: {

         fields : [
                    {
                        name: 'userName',
                        type: 'string'
                    }, 
                    {
                        name: 'password',
                        type: 'string'
                    }
                  ],
                   validations: [
                                    {
                                        field: 'userName',
                                        type: 'presence',
                                        message: 'User Name is required.'
                                    }
                                ]
    }
}); 
```

# javascript - 将属性/方法扩充到数组？

> ID：10140970
> 
> 赞同：2
> 
> 时间：2012-04-13T12:37:28.920
> 
> 标签：javascript, arrays, properties

![在此处输入图像描述](../Images/0d2f0040fe11aca78dc7da72841f40c1.png)

最近，我遇到了[一个问题，即如何`jQuery`既作为函数又作为对象](https://stackoverflow.com/q/8734115/575527)。使之成为可能的是，它`jQuery`实际上是一个`$()`附加属性（如）的函数（因此是`$.each()`）。

现在在我的项目中，我想创建一个模型（从技术上讲，它是一个东西数组），向它添加方法，然后将它返回给一个保存它的变量。这样做是否明智？它会干扰什么吗？

```
//i did it like this:
function createModel(name){
    var model = internal.models[name] = [];
    model.add = function(){..logic to add to the model..}

    //more augmented methods here...

    return model;
}

//create a model
var myModel = createModel('test');

//then i can do add
myModel.add('foo'); 
```

除此之外，我不想弄乱实际`Array`原型的东西。我正在为当前创建的数组执行此操作。

* * *

我正在制作的模型不像 Backbone.js 的模型，后者是一个数据单元。它更类似于 Backbone.js 的 Collection 或数据库表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:41:24.677

Something in that style might do, also never start a model as an array, always take a function (constructor) and a proper object they are more flexible for that.

```
var model = function(data) {
    this.data = data;
};

model.prototype.getData = function() {
    return this.data;
};

var mod = new model({foo:'foo'});

mod.getData().foo 
```

# c++ - LNK2005：“已定义错误

> ID：10140973
> 
> 赞同：3
> 
> 时间：2012-04-13T12:37:32.493
> 
> 标签：c++, linker, redefinition

我正在尝试使用来自分离的 .cpp 文件的全局变量。我有一个 init.h 文件：

```
//init.h
#ifndef init
#define init
int a = 3;
#endif 
```

我有一个 init.cpp 文件： `//init.cpp #include init.h`

最后我的 main.cpp 文件是：

```
//main.cpp
#include "init.h"
int main(void)
{
    while(1)
    {
    }
} 
```

在此之后，我收到错误：

```
1>init.obj : error LNK2005: "int a" (?a@@3HA) already defined in main.obj
1> ..deneme.exe : fatal error LNK1169: one or more multiply defined symbols found 
```

为什么我的`#infdef`控件不能解决这个问题？我也尝试过使用`#pragma once`，但我得到了同样的错误。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T12:38:26.453

You need to mark your variable as `extern` and define it only once in an implementation file.

As the code is now, you're breaking the **one definition rule**. The include guards don't help in this case, since all translation units that include that header re-define the variable.

What you actually need:

```
//init.h
#ifndef init
#define init
extern int a;
#endif 
```

and the definition:

```
//init.cpp
#include "init.h"
int a = 3; 
```

Also, **think twice before using globals**. What is it that you're actually trying to achieve?

# iphone - 如何在 iPhone 的 paypal 集成中获取 paykey 后获取 Paypal 交易 ID？

> ID：10140974
> 
> 赞同：1
> 
> 时间：2012-04-13T12:37:34.083
> 
> 标签：iphone, transactions, paypal, response, paykey

我将在我的 iphone 本机应用程序中实现 paypal。但我对此有一个问题。

我想获取关于我的 PayKey 的交易 ID。在 PayPal 库中有一种直接获取支付密钥的方法来获取 PayKey，但没有获取**transactionId**的方法。

这是那个方法：

```
-(void)paymentSuccessWithKey:(NSString *)payKey andStatus:(PayPalPaymentStatus)paymentStatus; 
```

我在想 IPN（即时付款通知）可以帮助解决这个问题，但我不知道如何在我的应用程序中实现这个问题？

请帮我解决这个问题。

谢谢，钱德拉普拉卡什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:43:54.020

最后，我已经解决了我的问题。

我有使用 IPN 的交易 ID。

当我从我的 PayPal 帐户中选择**启用 IPN**选项时，我收到的所有详细信息都通过我从那里提供的 URL 上的 paypal 发送，我得到了所有必填字段。

这里有几个链接可以帮助你

IPN 概述： [https ://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/howto_html_instantpaymentnotif](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/howto_html_instantpaymentnotif)

IPN 文档： [https ://cms.paypal.com/cms_content/US/en_US/files/developer/IPNGuide.pdf](https://cms.paypal.com/cms_content/US/en_US/files/developer/IPNGuide.pdf)

IPN 变量： [https ://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_IPNandPDTVariables](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_IPNandPDTVariables)

IPN 脚本示例： [https ://cms.paypal.com/us/cgi-bin/?&cmd=_render-content&content_ID=developer/e_howto_admin_IPNImplementation](https://cms.paypal.com/us/cgi-bin/?&cmd=_render-content&content_ID=developer/e_howto_admin_IPNImplementation)

IPN 脚本生成器： [https ://www.paypaltech.com/SG2/](https://www.paypaltech.com/SG2/)

谢谢，cp

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-17T12:54:37.050

我有类似的问题，但无法依赖 IPN，所以我想我会分享另一种方法。

你不需要使用IPN，你可以通过payKey获取交易ID，这对于验证移动支付很有用。这是一个 php 块，它将从 payKey 获取所有交易信息。您需要从您的移动应用程序中调用它。对于 iOS，您可以使用本教程：[http ://www.raywenderlich.com/13511/how-to-create-an-app-like-instagram-with-a-web-service-backend-part-12](http://www.raywenderlich.com/13511/how-to-create-an-app-like-instagram-with-a-web-service-backend-part-12)

```
<?
header("Content-Type: application/json");

//DEBUG TO CHECK PAYKEY
//turn php errors on
ini_set("track_errors", true);

//Example payKey (got from iOS app)
$payKey = "<snip>";

//set PayPal Endpoint to sandbox
$url = trim("https://svcs.sandbox.paypal.com/AdaptivePayments/PaymentDetails?payKey=".$payKey."&requestEnvelope.errorLanguage=en_US");

//PayPal API Credentials

//to do: change these for production credentials in the production app
$API_UserName = "<snip>";
$API_Password = "<snip>";
$API_Signature = "<snip>";

//Default App ID for Sandbox
$API_AppID = "APP-80W284485P519543T";

$API_RequestFormat = "NV";
$API_ResponseFormat = "NV";

try
{
    //Create payload for this query
    $bodyparams = array ("requestEnvelope.errorLanguage" => "en_US");
    // convert payload array into url encoded query string
    $body_data = http_build_query($bodyparams, "", chr(38));   // Generates body data

    //create request and add headers
    $params = array("http" => array(
        "method" => "POST",
        "content" => $body_data,
        "header" =>  "X-PAYPAL-SECURITY-USERID: " . $API_UserName . "\r\n" .
        "X-PAYPAL-SECURITY-PASSWORD: " . $API_Password . "\r\n" .
        "X-PAYPAL-SECURITY-SIGNATURE: " . $API_Signature . "\r\n" .
        "X-PAYPAL-APPLICATION-ID: " . $API_AppID . "\r\n" .
        "X-PAYPAL-REQUEST-DATA-FORMAT: " . $API_RequestFormat . "\r\n" .
        "X-PAYPAL-RESPONSE-DATA-FORMAT: " . $API_ResponseFormat
));

    //create stream context
    $ctx = stream_context_create($params);

    //open the stream and send request
    $fp = @fopen($url, "r", false, $ctx);

    //get response
    $response = stream_get_contents($fp);

    //check to see if stream is open
    if ($response === false) {
        throw new Exception("php error message = " . "$php_errormsg");
    }

    //close the stream
    fclose($fp);

    //parse the ap key from the response

    $keyArray = explode("&", $response);

    foreach ($keyArray as $rVal){
        list($qKey, $qVal) = explode ("=", $rVal);
        $kArray[$qKey] = $qVal;
    }

    //print the response to screen for testing purposes
    If ( $kArray["responseEnvelope.ack"] == "Success") 
    {

        foreach ($kArray as $key =>$value){
            echo $key . ": " .$value . "<br/>";
        }
    }
    else {
        echo 'ERROR Code: ' .  $kArray["error(0).errorId"] . " <br/>";
        echo 'ERROR Message: ' .  urldecode($kArray["error(0).message"]) . " <br/>";
    }
}

catch(Exception $e) 
{
    echo "Message: ||" .$e->getMessage()."||";
}

//End check paykey

?> 
```

我会附上一张图片，显示您可以使用 $kArray 获得的所有字段，但我没有声誉。你会想要： $kArray["paymentInfoList.paymentInfo(0).transactionId"]

**注意：您可以在 developer.paypal.com 上的“沙盒帐户”下找到您应该用于沙盒的 API 凭据。展开 xxxfacilitator@xxx 的个人资料以获取它们**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-03T06:15:25.610

我们可以获得交易详情，例如 -

首先使用您的 clientId 和 ClientSecret 获取访问令牌

```
$ch = curl_init();
            $clientId = PAYPAL_CLIENT_ID; //client Id
            $secret = PAYPAL_CLIENT_SECRET; client secrete key
            curl_setopt($ch, CURLOPT_URL, "https://api.sandbox.paypal.com/v1/oauth2/token");
            curl_setopt($ch, CURLOPT_HEADER, false);
            curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
            curl_setopt($ch, CURLOPT_POST, true);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
            curl_setopt($ch, CURLOPT_USERPWD, $clientId . ":" . $secret);
            curl_setopt($ch, CURLOPT_POSTFIELDS, "grant_type=client_credentials");
            $result = curl_exec($ch);
            $accessToken = null;
            if (empty($result))
               die('invalid access token');
            else {
                $json = json_decode($result);
                $accessToken = $json->access_token;
            }
            curl_close($ch); 
```

获取访问令牌后，我使用以下代码获取交易详细信息

```
 $curl = curl_init("https://api.sandbox.paypal.com/v1/payments/payment/<paykey>");
            curl_setopt($curl, CURLOPT_POST, false);
            curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
            curl_setopt($curl, CURLOPT_HEADER, false);
            curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
            curl_setopt($curl, CURLOPT_HTTPHEADER, array(
                'Authorization: Bearer ' . $accessToken,
                'Accept: application/json',
                'Content-Type: application/json'
            ));
            $response = curl_exec($curl);
            $result = json_decode($response); 
```

有了这个，我们可以验证交易。

当您将其用于现场直播时，从 url 中删除沙盒工作。

# javascript - 我需要在“//回调代码”中填写什么才能使 Mailcheck 正常工作？（jQuery 用法）

> ID：10140975
> 
> 赞同：1
> 
> 时间：2012-04-13T12:37:50.243
> 
> 标签：javascript, jquery

**解决了**

**Mailcheck 使用“on”方法，该方法在我使用的过时版本的 JQuery 中不可用。谢谢库菲和马丁。**

我是 Javascript/Jquery 的初学者，我一直试图让它[工作](https://github.com/Kicksend/mailcheck)。

我的网站上有一个工作表单，我想在其中为流行的电子邮件域添加此客户端拼写检查。电子邮件地址的文本字段的 id 只是“电子邮件”，所以我做了这个小改动（大写 E）。

所以我的代码看起来像这样......带有一些测试语句。

```
<script>
document.write("test0");
document.getElementById('testspan').innerHTML = 'test3';

var domains = ['hotmail.com', 'gmail.com', 'aol.com'];
$('#Email').on('blur', function() {
  $(this).mailcheck({
    domains: domains,   // optional

    suggested: function(element, suggestion) {
      // callback code
      document.getElementById('testspan').innerHTML = 'test4';
      document.write("test1");
    },

    empty: function(element) {
      // callback code
      document.write("test2");
    }

  });
});
</script> 
```

文本“test0test3”确实按预期出现，类似于我执行 PHP 回显时会发生的情况。

但是当焦点离开我的电子邮件文本框时，什么都没有发生。

我不知道我是否提供了足够的详细信息，以便有人确定我哪里出错了......

我真的不明白我应该在标记为“//回调代码”的地方写什么。我是否需要手动提供代码，使“您的意思是……”文本出现在他们的屏幕截图中？![在此处输入图像描述](../Images/98c6b3e26fbb804da5ba0e854054f637.png)

**谢谢你，库菲和马丁。** 我遵循了 Kufi 的代码，并且还插入了

```
<span id="suggestedEmail"></span> 
```

在电子邮件文本输入元素之后。但什么也没有发生。有人可以建议我可以在回调函数中编写一个合适的测试语句，以确定是否正在执行代码路径。我有一种感觉不是。

**更新 3**

**再次感谢 Kufi 和 Martin，**

即使在制作了一个最小的 .HTML 文件进行测试之后，我也无法让它工作......我觉得现在，有人能够发现我犯的错误。这是我的整个测试文件。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Testing mailcheck</title>
<script type="text/javascript" src="js/jquery-1.3.2.js"></script>
<script type="text/javascript" src="js/jquery.mailcheck.js"></script>
</head>

<body>

<form id="form1" name="form1" method="post" action="contactus_mail.php">
 Name: <input name="name" type="text" id="name" size="30"  /> </br>
 Email: <input name="email" type="text" id="email" size="30" />  <span id="suggestedEmail"></span> </br>
 Subject: <input name="subject" type="text" id="subject" size="72" value="" /> </br>
 <input name="Submit" type="submit" value="Submit"/>
</form>

</br>
<span id="testspan1"></span>
</br>
<span id="testspan2"></span>
</br>

<script type="text/javascript">
$("#testspan1").html("test1");
$(function() {
var domains = ['hotmail.com', 'gmail.com', 'live.com', 'yahoo.com'];
 $("#email").on('blur', function() {
  $(this).mailcheck({
    domains: domains,   // optional
    suggested: function(element, suggestion) {
      // callback code
      $("#suggestedEmail").html("Did you mean " + suggestion.full);
    },
    empty: function(element) {
      // callback code
      document.write("empty was called");
    }
  });
 });
});
$("#testspan2").html("test2");
</script>

</body>
</html> 
```

除了两个外部 JS 文件的可访问性之外，我还有什么需要检查的吗？jQuery版本？

**解决了！**

我得到：

```
Uncaught TypeError: Object #<Object> has no method 'on' 
```

在看起来像这样的行：

```
$("#email").on('blur', function() { 
```

当我从使用 JQuery 1.3.2 切换到当前的 1.7.2 时，这种情况就消失了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T13:46:52.610

正如我所看到的，您必须编写自己的视觉反馈，如他们的文档中所述：

“您可以使用回调向用户显示适当的视觉反馈。” （底部的“使用”一章）。

所以你需要这样的东西来显示建议的电子邮件：

```
suggested: function(element, suggestion) {
    $("#suggestedEmail").html("Did you mean " + suggestion.full);
} 
```

编辑：您更新的问题。[这](http://jsfiddle.net/cgfR3/)是一个工作的jsfiddle。如果发布的 javascript 代码是实际使用的代码，则需要将其包围`$(function() { //your code here });`

此代码应该可以工作：

```
$(function() {
    var domains = ['hotmail.com', 'gmail.com', 'aol.com'];
    $('#Email').on('blur', function() {
      $(this).mailcheck({
        domains: domains,   // optional

        suggested: function(element, suggestion) {
            $("#suggestedEmail").html("Did you mean " + suggestion.full);
        },
        empty: function(element) {
          document.write("test2");
        }
      });
    });
}); 
```

`$(function() { ... });`需要使用，以便在整个页面加载后执行里面的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T13:49:33.670

请注意，“建议”函数接受两个参数：**元素**和**建议**。您应该使用**建议**参数来创建输出，如屏幕截图所示。

# facebook-opengraph - Facebook retrieves wrong (old) image from the page to create its preview (wall story)

> ID：10140981
> 
> 赞同：0
> 
> 时间：2012-04-13T12:37:57.203
> 
> 标签：facebook-opengraph

I use facebook share button for every post in my blog.
([http://loveclubhouse.blogspot.com/](http://loveclubhouse.blogspot.com/))

When there was no Open Graph meta tag included in my blog, facebook would retrieve the first picture from the post's page to make a preview story on the sharer's wall for this post.

Once, I added an Open Graph image meta tag to my blog:

```
<meta expr:content='data:blog.postImageThumbnailUrl' property='og:image'/> 
```

However, the size of *postImageThumbnails* turned out to be too small, so I decided not to use them anymore and removed the above metnioned Open Graph meta tag from my blog.

The problem is:

Even though I removed all Open Graph meta tags from my blog, facebook still somehow creates preview stories for my posts based on those tiny *data:blog.postImageThumbnailUrl* and doesn't want anymore to retrieve the first pictures from posts content as it was before I made any changes in my blog.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T18:34:58.203

尝试使用 facebook[调试器](http://developers.facebook.com/tools/debug)工具，它也会删除缓存。

# ruby - Strings manipulation

> ID：10140983
> 
> 赞同：2
> 
> 时间：2012-04-13T12:38:10.587
> 
> 标签：ruby, string

Sure enough there are more than a way to convert the following strings either form left to right or vice versa

```
"content-management-systems" <=> "Content Management Systems" 
```

What's the ruby way here ?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T12:52:15.353

这是一个棘手的问题：

```
puts "content-management-systems".split("-").map(&:capitalize).join(" ").
     tap{ |str| puts str}.
     split.map(&:downcase).join("-")

#=> Content Management Systems
#=> content-management-systems 
```

简化的变体：

```
"content-management-systems".split("-").map(&:capitalize).join(" ") 
#=> Content Management Systems

"Content Management Systems".split.map(&:downcase).join("-")
#=> content-management-systems 
```

干净的变体（来自 Micheal）：

```
"content-management-systems".split("-").map(&:capitalize).join(" ").
split(" ").map(&:downcase).join("-") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T13:20:45.857

`gsub`正则表达式匹配可以在块模式下进行操作。

```
"content-management-systems".
  gsub(/(\w+)(-)?/) { ($2 ? $1 + " " : $1).capitalize! }.
  gsub(/(\w+)(\s)?/) { ($2 ? $1 + "-" : $1).downcase! } 
```

由于这些基准测试显示 regexp 和 noregexp 版本之间没有太大区别。

```
require 'benchmark'

STR = "content-management-systems".freeze

Benchmark.bmbm(10) do |x|
  x.report("noregexp") {
    STR.split("-").map(&:capitalize).join(" ").
    split(" ").map(&:downcase).join("-")
  }

  x.report("rgexp") {
    STR.
    gsub(/(\w+)(-)?/) { ($2 ? $1 + " " : $1).capitalize! }.
    gsub(/(\w+)(\s)?/) { ($2 ? $1 + "-" : $1).downcase! }
  }
end

__END__

Rehearsal ----------------------------------------------
noregexp     0.000000   0.000000   0.000000 (  0.000032)
rgexp        0.000000   0.000000   0.000000 (  0.000035)
------------------------------------- total: 0.000000sec

                 user     system      total        real
noregexp     0.000000   0.000000   0.000000 (  0.000051)
rgexp        0.000000   0.000000   0.000000 (  0.000058) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T13:27:23.590

我发布这个只是为了记住...正则表达式只是计算时间的两倍：

```
1.9.2p290 :014 > time = Benchmark.measure do
1.9.2p290 :015 >     puts "content-management-systems".split("-").map(&:capitalize).join(" ").
1.9.2p290 :016 >          tap{ |str| puts str}.
1.9.2p290 :017 >          split.map(&:downcase).join("-")
1.9.2p290 :018?>   end
Content Management Systems
content-management-systems
 =>   0.000000   0.000000   0.000000 (  0.000077)

1.9.2p290 :019 > time = Benchmark.measure do
1.9.2p290 :020 >     "content-management-systems".gsub(/(\w+)(-)?/) { ($2 ? $1 + " " : $1).capitalize! }
1.9.2p290 :021?>   "Content Management Systems".gsub(/(\w+)(\s)?/) { ($2 ? $1 + "-" : $1).downcase! }
1.9.2p290 :022?>   end
 =>   0.000000   0.000000   0.000000 (  0.000164) 
```

我要感谢所有的贡献:-)

# database - Can you let RoundhousE generate a script rather than executing it

> ID：10140986
> 
> 赞同：3
> 
> 时间：2012-04-13T12:38:20.527
> 
> 标签：database, database-versioning, roundhouse

Is there a way to get RoundhousE to generate a script file without executing it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:23:35.993

RoundhouseE 不生成脚本文件。它只是一个迁移引擎。

如果您要问的是关于 RH 的刷新数据库部分之一，那么您为什么不希望它执行呢？

如果您做得正确，您应该使用本地数据库，测试脚本是否有效。

# c++ - 调用未正确返回 [X86_ASM]

> ID：10140992
> 
> 赞同：-1
> 
> 时间：2012-04-13T12:38:30.110
> 
> 标签：c++, inline-assembly

这是使用 x86 内联汇编的 C++ [英特尔语法]

功能：

```
 DWORD *Call ( size_t lArgs, ... ){

    DWORD *_ret = new DWORD[lArgs];

    __asm {
        xor edx, edx
        xor esi, esi
        xor edi, edi
        inc edx
start:
        cmp edx, lArgs
        je end
        push eax
        push edx
        push esi
        mov esi, 0x04
        imul esi, edx
        mov ecx, esi
        add ecx, _ret
        push ecx
        call dword ptr[ebp+esi] //Doesn't return to the next instruction, returns to the caller of the parent function.
        pop ecx
        mov [ecx], eax
        pop eax
        pop edx
        pop esi
        inc edx
        jmp start
end:
        mov eax, _ret
        ret
    }
} 
```

这个函数的目的是调用多个函数/地址而不是单独调用它们。

为什么我让你调试它？我今天必须开始上学，我需要在晚上完成。

非常感谢， iDomo

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T14:13:22.557

感谢您提供完整的可编译示例，它使解决问题变得更加容易。

根据您的`Call`函数签名，设置堆栈帧时，`lArgs`位于`ebp+8`，指针从 开始`ebp+C`。你还有其他一些问题。这是一个带有一些推送/弹出优化和清理的更正版本，在 MSVC 2010 (16.00.40219.01) 上进行了测试：

```
DWORD *Call ( size_t lArgs, ... ) {

    DWORD *_ret = new DWORD[lArgs];

    __asm {
        xor edx, edx
        xor esi, esi
        xor edi, edi
        inc edx
        push esi
start:
        cmp edx, lArgs
        ; since you started counting at 1 instead of 0
        ; you need to stop *after* reaching lArgs
        ja end
        push edx
        ; you're trying to call [ebp+0xC+edx*4-4]
        ; a simpler way of expressing that - 4*edx + 8
        ; (4*edx is the same as edx << 2)
        mov esi, edx
        shl esi, 2
        add esi, 0x8
        call dword ptr[ebp+esi]
        ; and here you want to write the return value
        ; (which, btw, your printfs don't produce, so you'll get garbage)
        ; into _ret[edx*4-4] , which equals ret[esi - 0xC]
        add esi, _ret
        sub esi, 0xC
        mov [esi], eax
        pop edx
        inc edx
        jmp start
end:
        pop esi
        mov eax, _ret
        ; ret ; let the compiler clean up, because it created a stack frame and allocated space for the _ret pointer
    }
} 
```

完成后不要忘记`delete[]`从这个函数返回的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:59:53.353

我注意到，在调用之前，您按顺序推送 EAX、EDX、ESI、ECX，但返回后不要以相反的顺序弹出。如果第一个 CALL 正确返回，但后续的没有，这可能是问题所在。

# svn - Subversion server and client?

> ID：10140997
> 
> 赞同：0
> 
> 时间：2012-04-13T12:38:48.287
> 
> 标签：svn, version-control

Could anyone suggest a good subversion server and a good subversion client which is compatible with linux,windows and MAC?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:42:15.927

There is this one for client :

[http://www.syncrosvnclient.com/download.html](http://www.syncrosvnclient.com/download.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:55:30.987

要设置 svn 服务器，您可以使用在 linux、windows 和 macs 上工作的 apache。

[svn 客户端](http://subversion.apache.org/packages.html)也可用于大多数流行的操作系统。

如果您担心一个操作系统的客户端将无法与不同操作系统上的服务器一起工作，请不要这样做。SVN 系统独立于操作系统，因此您可以使用 mac 客户端连接到 windows SVN 服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T12:47:25.403

它是最普遍的 svn 服务器[颠覆](http://.apache.org/packages.html)。它是 win[tortoise] 最广泛使用的[svn](http://tortoisesvn.net/downloads.html)客户端。对于 linux，您可以使用 linux 存储库中的任何内容。

# csv - CSV with comma or semicolon?

> ID：10140999
> 
> 赞同：95
> 
> 时间：2012-04-13T12:39:07.617
> 
> 标签：csv

How is a CSV file built in general? With commas or semicolons? Any advice on which one to use?

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-04-13T12:49:07.573

在 Windows 中，它取决于“区域和语言选项”自定义屏幕，您可以在其中找到列表分隔符。这是 Windows 应用程序期望作为 CSV 分隔符的字符。

当然，这仅在 Windows 应用程序中有效，例如，如果文件未使用上述分隔符，Excel 不会自动将数据拆分为列。所有使用 Windows 区域设置的应用程序都将具有此行为。

如果您正在编写一个需要在其他应用程序中导入 CSV 的 Windows 程序，并且您知道为您的目标计算机设置的列表分隔符是`,`，那么就去做吧，否则我更喜欢它，`;`因为它会减少小数点、数字分组的问题并且不会出现在很多文本中。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2015-06-18T14:45:35.847

CSV 是一种标准格式，在 RFC 4180（2005 年）中进行了概述，因此不乏标准。 [https://www.ietf.org/rfc/rfc4180.txt](https://www.ietf.org/rfc/rfc4180.txt)

甚至在此之前，CSV 中的 C 一直代表逗号，而不是分号:(

遗憾的是，微软一直忽视这一点，并且仍然坚持他们在几十年前把它变成的怪物（是的，我承认，那是在创建 RFC 之前）。

*   每行一条记录，除非在引用的文本中出现换行符（见下文）。
*   逗号作为列分隔符。从来没有分号。
*   PERIOD 作为数字中的小数点。从来没有逗号。
*   包含用“双引号”括起来的逗号、句点和/或换行符的文本。
*   *仅*当文本用双引号括起来时，文本中的此类引号才会通过双引号进行转义。这些示例代表相同的三个字段：

    1,"此文本包含""引号""",3

    1、本文包含“引号”，3

该标准不包括日期和时间值，我个人尝试坚持 ISO 8601 格式以避免日/月/年 - 月/日/年混淆。

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2012-04-13T12:41:44.827

I'd say stick to comma as it's widely recognized and understood. Be sure to quote your values and escape your quotes though.

```
ID,NAME,AGE
"23434","Norris, Chuck","24"
"34343","Bond, James ""master""","57" 
```

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2016-11-21T12:23:45.950

也相关，但特别是excel，看看[这个答案](https://stackoverflow.com/questions/17953679/how-to-correctly-display-csv-files-within-excel-2013#19769403)和[另一个](https://superuser.com/questions/606272/how-to-get-excel-to-interpret-the-comma-as-a-default-delimiter-in-csv-files#answer-686415)建议，在CSV的开头插入一行

```
"sep=," 
```

通知 excel 期望使用哪个分隔符

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-08-09T13:47:23.627

**1.> 将文件格式更改为 .CSV（分号分隔）**

为了达到预期的效果，我们需要临时更改选项`delimiter`中的设置`Excel`：

```
Move to File -> Options -> Advanced -> Editing Section 
```

取消选中“使用系统分隔符”设置并在“小数分隔符”字段中添加逗号。

现在以`.CSV`格式保存文件，它将以分号分隔的格式保存。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-04-13T12:44:10.273

最初它是一个逗号，但由于逗号经常用作小数点，所以它不是很好的分隔符，因此其他人喜欢分号，主要取决于国家/地区

[http://en.wikipedia.org/wiki/Comma-separated_values#Lack_of_a_standard](http://en.wikipedia.org/wiki/Comma-separated_values#Lack_of_a_standard)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-04-13T12:40:28.660

CSV is a Comma Seperated File. Generally the delimiter is a comma, but I have seen many other characters used as delimiters. They are just not as frequently used.

As for advising you on what to use, we need to know your application. Is the file specific to your application/program, or does this need to work with other programs?

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-02-15T07:50:29.947

要将逗号更改为分号作为 CSV 的默认 Excel 分隔符 - 转到区域 -> 其他设置 -> 数字选项卡 -> 列表分隔符并键入；而不是默认值，

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-11-16T08:17:46.093

好吧，只是想谈谈分号。在许多国家/地区，逗号用于小数而不是句点。大多数欧盟殖民地，占世界的一半，另一半遵循英国标准（英国怎么这么大 O_O）所以反过来使用逗号作为包含数字的数据库会造成很多麻烦，因为 Excel 拒绝将其识别为分隔符.

就像我的国家越南一样，遵循法国的标准，我们的合作伙伴香港使用英国标准，所以逗号使 CSV 无法使用，我们使用 \t 或 ; 而是用于国际使用，但根据 CSV 文档，它仍然不是“标准”。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2017-07-31T06:28:00.683

最好的方法是将其保存在带有 csv 扩展名的文本文件中：

```
Sub ExportToCSV()
Dim i, j As Integer
Dim Name  As String

Dim pathfile As String

Dim fs As Object
    Dim stream As Object

    Set fs = CreateObject("Scripting.FileSystemObject")
On Error GoTo fileexists

i = 15
Name = Format(Now(), "ddmmyyHHmmss")
pathfile = "D:\1\" & Name & ".csv"

Set stream = fs.CreateTextFile(pathfile, False, True) 
```

文件已存在：

```
If Err.Number = 58 Then
    MsgBox "File already Exists"
    'Your code here
    Return
End If
On Error GoTo 0

j = 1
Do Until IsEmpty(ThisWorkbook.ActiveSheet.Cells(i, 1).Value)

    stream.WriteLine (ThisWorkbook.Worksheets(1).Cells(i, 1).Value & ";" & Replace(ThisWorkbook.Worksheets(1).Cells(i, 6).Value, ".", ","))

    j = j + 1
    i = i + 1
Loop

stream.Close

End Sub 
```