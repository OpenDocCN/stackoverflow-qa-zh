# StackOverflow 问答 10202000-10202999

# java - 我将如何为这个不变量编写一个循环？

> ID：10202004
> 
> 赞同：2
> 
> 时间：2012-04-18T02:31:53.780
> 
> 标签：java, invariants

这些是求出数组 b[hk] 最小值的算法的断言：

```
Precondition: h <= k < b.length
Postcondition: b[x] is the minimum of b[h...k] 
```

这是这个不变量的正确循环吗？

不变量：b[x] 是 b[h...t] 的最小值

```
int x = t;    int t = h;
// {inv: b[x] is the minimum of b[h...t]}
while (t != k) {
   t = t+1;
   if (b[t] < b[x])
      { x = t;}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T02:36:38.890

您可以通过这种方式找到数组的最小值（伪代码）：

```
// assume b.length > 0
min = b[0]
for i=1 to b.length
  if b[i] < min
    min = b[i] 
```

将其限制为`b[h, ..., k]`：

```
min = b[h]
for i=h+1 to k
  if b[i] < min
    min = b[i] 
```

所以你基本上只是改变循环的上限和下限

因为`h<=k<b.length`,`b[h]`是有效的，并且从下一个元素开始执行循环，直到`k`遍历所需的元素（如果`h==k`，则循环为空）

更新：由于您在将伪代码实现为 java 时一直失败，我将为您翻译它：

```
// assume: int b[]; int h; int k; h<=k<=b.length and b.length>0
// find min == b[i] such that b[i]<=b[j] for all h<=j<=k
int min = b[h];
for (int i=h+1; i<k; i=i+1) {
  if (b[i] < min) {
    min = b[i];
  }
}
// here: min contains the (first) minimum element within b[h, ..., k] 
```

注意：你也`i=i+1`可以`++i`写

# android - 来自纹理贴图的 Android OpenGL 平铺显示未对齐

> ID：10202006
> 
> 赞同：2
> 
> 时间：2012-04-18T02:32:10.853
> 
> 标签：android, opengl-es, texture-mapping

我正在尝试在我的简单 2D android 应用程序中进行纹理映射，以避免 OpenGL 代码加载我需要渲染的每个单独的图块的开销。但是，这使我的代码变得更加复杂，并且我遇到了一个非常烦人的错误。

[这是一张](http://imgur.com/El5Mt)准确描述正在发生的事情的图像。在我看来，这两种情况之一正在发生：纹理映射中使用的源坐标或目标坐标略有偏差。

我事先计算的源坐标，找到了合适的值，所以我很难相信它们是问题所在。目标坐标是通过游戏世界上的“窗口”计算的，OpenGL 坐标系的原点被转移到该窗口。然后，它遍历窗口，放置瓷砖。

我在某处读到，当您使用“像素边缘”坐标而不是“像素中心”坐标时会发生这种情况。但是我尝试将源坐标移动半个像素（我的纹理贴图是 1024x1024，所以我加/减 0.5f/1024），问题仍然存在。

有没有人遇到过类似的问题或看到过类似的事情可能会引导我走上正确的道路？我真的很讨厌不得不重新设计这个图形系统，特别是因为它是如此接近。

# sql-server-2008 - 将数据库记录显示为矩阵样式

> ID：10202007
> 
> 赞同：1
> 
> 时间：2012-04-18T02:32:25.893
> 
> 标签：sql-server-2008, select, matrix

是否可以使用 select 语句从数据库中选择数据作为矩阵样式？

下面是我的表

```
ProductID Size Quantity
p001       37    2
p001       38    2
p001       39    3
p003       40    1
p004       41    1 
```

我想显示如下记录

```
Product ID  37  38  39 40  41
p001        2   2   3  0   0
p003        0   0   0  1   0 
```

该列`size`是**动态**的。是否可以像我上面的例子一样选择数据？请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:25:12.483

检查以下链接以供参考

[http://www.sqlteam.com/article/dynamic-cross-tabs-pivot-tables](http://www.sqlteam.com/article/dynamic-cross-tabs-pivot-tables)

创建以下程序

```
CREATE PROCEDURE [dbo].[crosstab] 
@select varchar(8000),
@sumfunc varchar(100), 
@pivot varchar(100), 
@table varchar(100) 
AS

DECLARE @sql varchar(8000), @delim varchar(1)
SET NOCOUNT ON
SET ANSI_WARNINGS OFF

print ('SELECT ' + @pivot + ' AS [pivot] INTO ##pivot FROM ' + @table + ' WHERE 1=2')
EXEC ('SELECT ' + @pivot + ' AS [pivot] INTO ##pivot FROM ' + @table + ' WHERE 1=2')
EXEC ('INSERT INTO ##pivot SELECT DISTINCT ' + @pivot + ' FROM ' + @table + ' WHERE ' 
+ @pivot + ' Is Not Null')

SELECT @sql='',  @sumfunc=stuff(@sumfunc, len(@sumfunc), 1, ' END)' )

SELECT @delim=CASE Sign( CharIndex('char', data_type)+CharIndex('date', data_type) ) 
WHEN 0 THEN '' ELSE '''' END 
FROM tempdb.information_schema.columns 
WHERE table_name='##pivot' AND column_name='pivot'

SELECT @sql=@sql + '''' + convert(varchar(100), [pivot]) + ''' = ' + 
stuff(@sumfunc,charindex( '(', @sumfunc )+1, 0, ' CASE ' + @pivot + ' WHEN ' 
+ @delim + convert(varchar(100), [pivot]) + @delim + ' THEN ' ) + ', ' FROM ##pivot

DROP TABLE ##pivot

SELECT @sql=left(@sql, len(@sql)-1)
SELECT @select=stuff(@select, charindex(' FROM ', @select)+1, 0, ', ' + @sql + ' ')

EXEC (@select)
SET ANSI_WARNINGS ON
GO 
```

然后使用以下程序

```
EXECUTE crosstab @select = 'Select productid from Products',
                 @sumfunc = 'AVG(Quantity)',
                 @pivot = 'Size', 
                 @table = 'Product' 
```

Stackoverflow 参考 - [SQL 行到列](https://stackoverflow.com/questions/3821523/sql-rows-to-columns)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T02:43:07.147

你需要使用`PIVOT()`

[http://msdn.microsoft.com/en-us/library/ms177410.aspx](http://msdn.microsoft.com/en-us/library/ms177410.aspx)

这不是最简单的功能，但它会满足您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T05:15:26.647

你需要使用`PIVOT`.

希望对你有帮助，

```
DECLARE @columns VARCHAR(8000)

SELECT @columns = COALESCE(@columns + ',[' + cast(Size as varchar) + ']',
'[' + cast(Size as varchar)+ ']')
FROM MyTable

DECLARE @query VARCHAR(8000)

SET @query = '
SELECT *
FROM MyTable
PIVOT
(
MAX(Quantity)
FOR [Size]
IN (' + @columns + ')
)
AS p'

EXECUTE(@query) 
```

有关更多信息`PIVOT`，[请查看此处](http://www.tsqltutorials.com/pivot.php)

# android - Android C2DM：如果设备关闭，最好的处理方法是什么

> ID：10202010
> 
> 赞同：0
> 
> 时间：2012-04-18T02:32:57.617
> 
> 标签：android, android-c2dm

我在一个项目中使用 C2DM。当用户登录我的网站时，我想显示设备状态（电池剩余量、SD 卡可用性...）。这是我的实现：

*   在他们登录后，第三应用服务器（我的网站）将向设备发送“登录”推送通知消息
*   设备收到“登录”通知后，将最新的设备状态发送给第三应用服务器

如果设备处于离线状态，则第三应用服务器将不会收到任何更新。我目前定义了一个“超时”（1 分钟）来检测设备是否离线或无法发送设备状态。

我的问题是：

*   有没有更好的方法来实现这个应用程序？
*   如何选择一个最佳的“超时”值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:28:51.457

“最佳超时值”是最适合您的应用程序或您需要的值。如果您认为每隔一分钟尝试一次可能会使设备处于在线状态，那么这就是要走的路。

我个人会以更大的间隔（例如 10 分钟或 30 分钟）刷新，或者按下“重试”按钮。

我认为“更好的方法”是存储每次从每个设备收到的最后一次数据。因此，如果我登录并且我的设备处于离线状态，则会显示我上次检索的状态及其日期（例如电池：59%，昨天下午 3:44）。

# matlab - 如何在 MATLAB 中按顺序跟踪对象边界点？

> ID：10202011
> 
> 赞同：0
> 
> 时间：2012-04-18T02:33:02.593
> 
> 标签：matlab, computer-vision

我需要获得一组点`{(x1,y1),(x2,y2),(x3,y3),....(xn,yn)}`，其中该组代表边界点**AND** `(xk,yk)`并且`(xk+1, yk+1)`是邻居。很明显，我需要获取边界点才能在傅里叶描述符中使用。

我使用了 bwboundaries 和 bwtraceboundary ，它们的结果都很差，我该如何实现呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T19:16:42.357

`bwtraceboundary()`应该做你想做的事。看看这个例子：

```
x = imread('rice.png');
xCropped = x(75:93, 100:140);
figure; imshow(xCropped);

xBW = xCropped>175;
b = bwtraceboundary(xBW, [8 8], 'E');

hold on;
plot(b(:,2),b(:,1)); 
```

# php - strcmp() 期望参数 2 是字符串，给定对象

> ID：10202012
> 
> 赞同：0
> 
> 时间：2012-04-18T02:33:04.440
> 
> 标签：php, warnings

M 在我的页面上收到以下警告：

```
"strcmp() expects parameter 2 to be string, object given" 
```

我的代码如下：a.php：

```
 $x = $_GET['a'];
 $y = $_GET['b'];
 $obj = new TestClass();
 $obj->methodCall($x,$y) 
```

测试类：

```
class TestClass{
   public function methodCall($x,$y){
    if((strcmp('val1',$x) > 0) && (strcmp('val2',$y) >0)){
      //do something
    }
   }
 } 
```

在我使用 strcmp 的行收到警告。它看起来很简单，但无法找出问题:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T02:53:47.207

根据您的评论，`$y`参数是一个对象（InventoryManager），而不是一个字符串。`strcmp`期望两个 args 都是字符串。如果对象有一个`__toString()`方法，你可以这样做：

```
// Cast object $y as a string when passed
// But you would have to check the __toString method to see how the string was being
// built to ensure it's the correct attribute you wish to compare
$object->methodCall($x, (string) $y); 
```

否则，我认为您可能`$_GET['b']`通过表单提交错误地设置了值。

JIC，这里是`strcmp` [文档](http://us3.php.net/strcmp)的链接。

# c - 通过指针更改C中的字符串文字？

> ID：10202013
> 
> 赞同：1
> 
> 时间：2012-04-18T02:33:07.197
> 
> 标签：c, string

> **可能重复：**
> [为什么在写入字符串时会出现分段错误？](https://stackoverflow.com/questions/164194/why-do-i-get-a-segmentation-fault-when-writing-to-a-string)

我有以下程序：

```
char *s     = "abcdf";
char s1[50] = "abcdf";

s1[0] = 'Q';   // Line 1
s[0] = 'P';    // Line 2 
```

为什么`Line 1`正常工作并`Line 2`导致程序崩溃？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T02:36:00.137

第 2 行指向可执行文件的只读数据部分，而在第 1 行，程序`s1`使用给定字符串初始化数组。这存储在堆栈中，您可以对其进行修改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T02:45:49.600

```
char *s = "abcdf";
char s1[50] = "abcdf";
s1[0] = 'Q'; // Line 1
s[0] = 'P'; // Line 2 
```

这里，`s`是一个有保证的可修改指针，它可能是全局变量或局部堆栈变量，具体取决于您将该定义放在程序范围内还是在函数内。在你开始使用它之前的某个时候，编译器需要安排将文本“abcdf”的*地址*加载到`s`. 通常在现代操作系统中，“abcdf”本身将位于只读内存区域中，其中将程序文件读入内存以准备执行的“加载程序”告诉 CPU 本身允许读取但不允许写入操作。所以`s`- 这是可修改的 - 指向不是的“abcdf”。

`s1`是 50 个字符的保证可修改数组。在您开始使用它之前的某个时候，编译器需要安排将文本“abcdf”*复制*到该可修改缓冲区中。然后，您可以像使用`s1[0] = 'Q'`.

`s[0] = 'P'`使用指针`s`在只读内存中找到原始的不可修改/常量文本“abcdf”，然后尝试更改它。如上所述，CPU 通常已配置为通过生成 CPU 异常/陷阱/信号/中断来做出反应（术语因制造商而异）。你的程序会失败。

# git - code.google.com：git：致命：远程错误：找不到存储库

> ID：10202015
> 
> 赞同：4
> 
> 时间：2012-04-18T02:33:22.210
> 
> 标签：git, google-code

我在 中创建了一个新存储库`code.google.com`，生成了`code.google.com`密码并更新了我`~/.netrc`的

```
machine code.google.com login <email-id> password <password> 
```

根据 中的说明`code.google.com`，我可以`clone`使用以下命令访问存储库：

```
git clone https://code.google.com/p/<repository-name>/ 
```

之后，我将一些文件添加到存储库并执行，`git add`，然后是`git commit`. 但是当我执行时`git push origin master`它给出了以下错误

```
fatal: remote error: Repository not found 
```

当谷歌搜索此问题时，我发现了几个链接，但其中提到的解决方法似乎不起作用。任何建议将不胜感激！

更新：我尝试了以下解决方法但不成功：

1.  更新`url`中`.git/config`采取`username`和`password`
2.  在命令中给出`username`and`password``url``git clone`
3.  更新`username`并`password`使用全局`git`配置命令

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T03:27:40.967

尝试“git remote show origin”以确认远程通信。

[是否在Google Project Hosting](https://code.google.com/hosting/settings)中选中了“安全”按钮。如果是这样，可能是您使用了错误的密码（Google 代码密码与 Google 帐户密码）。

[编辑]

克隆 Google 项目时，您会获得一个自定义存储库名称。例如，我克隆了“playn”项目，并获得了一个项目名称“gozoner-playn-to”（基于我提供的信息）。当您制作本地克隆时，它需要属于此存储库。就我而言：

```
git clone https://code.google.com/p/gozoner-playn-too 
```

然后推送起作用：

```
$ git push origin
Counting objects: 3, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (2/2), 256 bytes, done.
... 
```

请注意，如果您已经检查了错误的克隆（就像我怀疑的那样），您可以将 url 更改为正确的克隆：

```
git remote set-url origin https://code.google.com/p/gozoner-playn-too 
```

在此之后 .git/config 文件具有以下内容：

```
[remote "origin"]
  fetch = +refs/heads/*:refs/remotes/origin/*
  url = https://code.google.com/p/gozoner-playn-too 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T09:48:21.950

你按照code.google.com所说的做了一切。但你还需要将远程源添加到git。就像......

```
git remote add origin https://code.google.com/p/your-project-name 
```

然后推送添加的代码，例如...

```
git push orgin --all 
```

要启动 code.google.com git，请参阅此处的完整说明[http://matrixsust.blogspot.com/2012/06/1.html](http://matrixsust.blogspot.com/2012/06/1.html)

希望能帮助到你！

# apache - 如何重写 url 的子集（/api/something）？

> ID：10202018
> 
> 赞同：4
> 
> 时间：2012-04-18T02:34:05.407
> 
> 标签：apache, mod-rewrite

我有一个 .htaccess 规则，它基本上指向一个页面的所有访问，我让 PHP 从那时开始处理它。因此，无论它位于哪个目录，它都会将所有 URL 传递给该脚本。

如果我的根目录是 /project/ ( example.com/project/some/page/where )， /some/page/where 将被重定向到 @frontend.php

```
RewriteRule !\.(js|ico|gif|jpg|png|css|pdf|swf|doc)$ @frontend.php 
```

然而，我已经达到了一个点，我希望能够将页面子集推送到不同的处理程序，就像这样（example.com/project/api/page/where，而不是 example.com/project/some/ api/哪里）：

```
RewriteRule ^/api?$ @api.php 
```

问题是，无论这条规则高于还是低于另一条，这都不起作用。谁能建议我如何做到这一点？

我也试过：

```
RewriteRule ^/api(/.*)? @api.php [L]

RewriteCond %{REQUEST_URI} !/api
RewriteRule !\.(js|ico|gif|jpg|png|css|pdf|swf|doc)$ @frontend.php [L] 
```

虽然这适用于[http://example.com/project/api/page/where](http://example.com/project/api/page/where)不会被推送到@frontend.php，但它不会将其推送到@api.php，并产生：

```
[Wed Apr 18 10:46:12 2012] [error] [client 127.0.0.1] File does not exist: /www/project/api 
```

编辑：

我最近的尝试是：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^api(/.*)? @api.php [L]

RewriteCond %{REQUEST_URI} ^api
RewriteRule !\.(js|ico|gif|jpg|png|css|pdf|swf|doc)$ @frontend.php 
```

这个问题是，如果 URL 以除 api/ 以外的任何内容开头，例如（example.com/project/test/page/where），它会引发错误：

```
[Sat Apr 21 10:50:13 2012] [error] [client 127.0.0.1] File does not exist: C:/xampp/www/projects/frame3/test 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:17:43.193

问题是第二个请求也针对 htaccess 进行了测试，所以实际上你有两个请求。因为没有任何符合规则的 js/ico/gif。您可以使用 Apache 的 {ENV:REDIRECT_STATUS} 机制通过 RewriteConds 或 regileros（更好的）方法来管理它。有关详细信息，请参阅[此](https://stackoverflow.com/questions/9850338/mod-rewrite-rule-conflict-drving-me-crazy/)问题。

编辑：我在[http://playground.rexbooks.com/stack](http://playground.rexbooks.com/stack)设置了一个小例子。如果您输入，fe [http://playground.rexbooks.com/stack/api/123456](http://playground.rexbooks.com/stack/api/123456)它会将您重定向到 api.php。任何其他查询将被重定向到 frontend.php。线索是检查文件是否真的存在。我也拆分了你的其他规则。RewriteBase 仅用于我的设置，您需要对其进行调整。为了不使 uris 透明，请删除 rewrite (R) 标志。这就是你所追求的吗？

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^api(/.*)? /api.php [L,R]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !api
RewriteCond %{REQUEST_URI} !\.(js|ico|gif|jpg|png|css|pdf|swf|doc)$
RewriteRule (.*) /frontend.php [L,R] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T10:45:51.533

在包含“@frontend.php”和“@api.php”文件的目录中放置一个.htaccess，内容如下：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^api @api.php [QSA,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ @frontend.php [QSA,L] 
```

这`!-f`将阻止对任何现有文件的重写。要拒绝仅对指定扩展名进行重写，请改用以下 .htaccess

```
RewriteEngine On

RewriteCond %{REQUEST_URI} !\.(js|ico|gif|jpg|png|css|pdf|swf|doc)$
RewriteRule ^api @api.php [QSA,L]

RewriteCond %{REQUEST_URI} !\.(js|ico|gif|jpg|png|css|pdf|swf|doc)$
RewriteRule ^ @frontend.php [QSA,L] 
```

当然下面的行也应该有效，但是如果我们在之后不使用它，那么捕获 api 之后的内容有什么意义......

```
RewriteRule ^api(/.*)? @api.php [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:20:12.390

干得好。这些类型的规则对我有用：

```
 # redirect Drupal urls straight to Drupal (or in your case api.php)
  RewriteRule ^admin/(.*)$ api.php?q=admin/$1 [L,QSA]
  RewriteRule ^admin_menu/(.*)$ api.php?q=admin_menu/$1 [L,QSA]
  RewriteRule ^node/(.*)$ api.php?q=node/$1 [L,QSA]
  RewriteRule ^content/(.*)$ api.php?q=content/$1 [L,QSA]

  # Another way to redirect based on query strings    
  RewriteCond %{QUERY_STRING} ^q=([^&]+)$
  RewriteRule . api.php?q=$1 [L,QSA]

  # if a directory or a file exists, use it directly
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico

  # otherwise forward it to index.php
  RewriteRule . index.php 
```

我已经运行它来集成 Drupal / Yii 框架设置，它运行得非常顺利。上述规则的组合应该可以帮助您继续前进。

如果您希望我进一步澄清您的确切设置，请告诉我。

# java - Java Swing GUI 中的 NullPointerException

> ID：10202022
> 
> 赞同：0
> 
> 时间：2012-04-18T02:34:55.900
> 
> 标签：java, swing, nullpointerexception

我`NullPointerException`在下面的代码中得到一个。代码的主要目的是从一个类中获取用户的输入，并将其传递给另一个类以构造一个`GridLayout`.

这是我的第一堂课的代码......

```
public class A{
    int N;
    JLabel label;
    JPanel panel;
    JButton button;
    JFrame frame;
    JTextField text;

    public A(){
        frame=new JFrame();
        panel=new JPanel();
        text=new JTextField(20);
        label=new JLabel("Enter the number of states");
        button=new JButton("Submit");

        panel.add(label);
        panel.add(text);
        panel.add(button);
        frame.add(panel,BorderLayout.CENTER);

        button.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent ae){
                N=Integer.parseInt(text.getText());
                B1 page=new B1(N);
                page.frame.setVisible(true);
            }
        });

        frame.setSize(320,240);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String arg[]){
        A ab=new A();
    }
} 
```

这是我的第二堂课的代码......

```
public class B1 extends A {
    JFrame frame;
    JPanel pan;
    JButton button;
    double transition[][];
    JTextField tf[][];

    B1(int N){
        this.N=N;
        frame=new JFrame("Transition matrix");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        pan=new JPanel();
        pan.setLayout(new GridLayout(N+1,N));

        for(int i=0; i<N; i++){
            for(int j=0; j<N; j++){
                tf[i][j]=new JTextField();
                pan.add(tf[i][j]);
            }
        }

        button=new JButton("Submit");
        pan.add(button);
        frame.add(pan);
        frame.pack();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T02:45:30.280

在`B1`类的构造函数中，你需要`new`你的`JTextField`array( `tf`) 像：

```
...    
tf = new JTextField[N][N];
//code start
for(int i=0; i<N; i++)
{
    for(int j=0; j<N; j++)
    {
        tf[i][j]=new JTextField();
        pan.add(tf[i][j]);
    }
}
... 
```

# php - MySQL IN 子句，里面有逗号

> ID：10202025
> 
> 赞同：-1
> 
> 时间：2012-04-18T02:35:01.320
> 
> 标签：php, mysql

我有一个关于 MySQL IN 子句的问题，我不知道如何启动代码。

原来的

```
$merchant_separated = implode(",", $array);
$sql = mysql_query("SELECT * FROM assigned_id WHERE id NOT IN ($merchant_separated) AND viewable = 'True'"); 
```

我现在在我的数据库表中拥有的是以下代码：

```
$sql = mysql_query("SELECT * FROM product_purchased");
whil($r=mysql_fetch_array($sql))
$r['merchantid_imploded'] ='9,6,2,3,5,4,1,7,8'
$r['productnumber'] = 'Fjduensd'
$r['Title'] = 'Animation Csr'
$r['Product Name'] = 'Inwards Development' 
```

我想要做的只是获取下面的代码。它不能工作，因为在查询中有这个字段`merchantid_imploded 9,6,2,3,5,4,1,7,8`，clientid 不能用逗号获取。

```
$clientid = 2
$sql = mysql_query("SELECT * FROM product_purchased WHERE merchantid_imploded IN ($clientid) "); 
```

我想做的只是用购买的这个产品来获取这个商家

请指教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T02:44:41.543

好吧，你的 Mercerid_imploded 设计会给你带来很多麻烦。您应该将这些数字与产品编号一起存储在一个单独的表中，每行一个。查找术语“数据库规范化”以了解更多信息。解决此问题的最佳时间是*现在*，在您为此设计投入更多编程工作之前。（同时，考虑使用参数化查询来保护您的代码免受 SQL 注入攻击。）

也就是说，MySQL（在 SQL 数据库中是独一无二的）提供了许多功能，让您可以随心所欲。一种可能性是 FIND_IN_SET：

```
WHERE FIND_IN_SET($clientid, merchantid_imploded) > 0 
```

此外，假设您将参数放在正确的位置，普通的旧 IN 应该在 MySQL 中工作：

```
WHERE $clientid IN merchantid_imploded 
```

# javascript - 如何读取外部脚本/样式的内容？

> ID：10202026
> 
> 赞同：3
> 
> 时间：2012-04-18T02:35:02.740
> 
> 标签：javascript, css

我知道您可以使用“innerHTML”获取和设置当前页面中标签的内容。

但是，我想知道是否有一种方法可以通过相同的方式读取（不是执行，而是读取内容）外部脚本/样式？就像是

```
<script id="dScript" src="url.js"></script>

//in real practice, this returns a blank
//what i need is to read url.js's contents
<script>
    var extScript = document.getElementById('dScript').innerHTML;
</script> 
```

在相同的上下文中，LESS CSS 如何读取自定义链接表？我知道你可以通过 AJAX 来做到这一点，但我正在尝试使用脚本加载器加载内容，使用动态标签有效地绕过 SOP，因此 AJAX 是不可能的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T02:41:50.070

不，这违反了同源政策。这就是 JSONP 执行第三方脚本的原因（它不会读取它）。

您也许可以使用跨域资源共享来做到这一点，但据我所知，这必须是 AJAX。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T02:53:21.543

我创建了一个代理服务器来完全满足您的需求。该 API 称为 realJS（Resource Express Asynchronous Loader）。它从您想要的任何域异步加载您想要的任何资源：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <title>REAL</title>
        <script data-src="http://realdotjs.appspot.com/loader.html" src="http://realdotjs.appspot.com/script/real.js"></script>
        <script>
            window.addEventListener("realJSLoaded", function (realJS) {
                realJS.load.paths.push("http://code.jquery.com/");
                realJS.load("jquery.js", loadScript);

                function loadScript(script) {
                    // do something with the script
                }
            }, false);
        </script>
    </head>
</html> 
```

您可以添加任意数量的路径`realJS.load.paths`，它会从正确的路径中找到正确的资源。它也支持 commonJS 模块标识符和绝对 URL。

可以加载任何类型的文本或二进制文件。但是，您必须正确处理返回的文件。干杯。=)

# c++ - 怎么了？不允许不完整的类型？

> ID：10202027
> 
> 赞同：0
> 
> 时间：2012-04-18T02:35:12.110
> 
> 标签：c++

我不明白这段代码有什么问题。它说“我的功能不允许使用不完整的类型”。

这就是我想要做的：

> 编写一个名为的函数`yrClac()`，它有一个整数参数，表示自世纪之交 (1.1.2000) 以来的总天数，以及名为年、月和日的引用参数。该函数用于计算传递给它的给定天数的当前年、月和日。使用引用，函数应该直接改变调用函数中各自的实际参数。对于这个问题，假设一年总是有 365 天，而每个月正好有 30 天。

```
#include <iostream>

using namespace std;

void yrClac(int total, int &a, int &b, int &c);  // says incomplete type
                                                 // is not allowed

int main()
{
    int totaldays;
    cin >> totaldays;

    int year = 2000, month = 1, day = 1;
    void yrClac(totaldays, year, month, day);
    cout << year << month << day;

    system ("PAUSE");
    return 0;
}

void yrClac(int total, int &a, int &b, int &c)
{
    a = 365 / total;
    b = total - a * 12;
    c = total - b * 30;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T02:39:31.320

`void`调用函数时不应该放置（也就是返回类型）。将其删除，`void yrClac(totaldays, year, month, day);`它应该可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T02:40:28.913

`void yrClac(totaldays, year, month, day);`声明一个将`totaldays`, `year`, `month`,类型的对象`day`作为参数的函数。（这些类型都没有被声明，这解释了抱怨“不完整类型”的编译错误消息）。

您想调用`yrCalc`，而不是重载它，因此请使用`yrClac(totaldays, year, month, day)`（即删除`void`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T02:39:47.723

您的代码存在明显问题。

在你里面`main()`你有这个声明

```
void yrClac(totaldays,year,month,day); 
```

消除`void`

另一个潜在的问题是你的`365/total` 这很可能会`0`因为截断而导致（如果总数大于 365）你最好使用`double`for`total`或 type cast。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T02:46:14.323

```
int year=2000, month=1, day=1;

void yrClac(totaldays, year, month, day);

cout << year << month << day; 
```

删除“无效”将正常工作。调用方法不需要告诉它应该返回哪种类型。

# html - 打开链接时阻止 Rails 应用程序在 iOS Safari 上退出全屏

> ID：10202030
> 
> 赞同：0
> 
> 时间：2012-04-18T02:35:34.050
> 
> 标签：html, ruby-on-rails, ios, web-applications, safari

我在 iOS safari 上有一个全屏模式的 rails 应用程序。每次我单击“登录”按钮时，它都会在新的 Safari 浏览器上打开“登录”屏幕。因此，退出全屏模式。

这是代码：-

```
<%= link_to "Sign in!", signin_path %> 
```

这仅在我处于全屏模式时发生，否则它将在同一浏览器窗口中加载“登录”屏幕。请帮忙~~！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:26:22.937

使用 JQuery-Mobile 解决了这个问题。只要确保您的链接上没有 rel="external" 即可。

# ruby-on-rails-3 - 我的 Rails 3.1.3 应用程序占用了太多内存

> ID：10202046
> 
> 赞同：1
> 
> 时间：2012-04-18T02:38:39.610
> 
> 标签：ruby-on-rails-3, memory-management, ruby-on-rails-3.1

我的应用程序正在交换到磁盘，因为它使用了 2.2 GB 的内存。我无法弄清楚我的应用程序中是什么导致它如此占用内存。

这是一个 RHEL5 虚拟机，具有 2 GB 的 RAM。

Rails 是 3.1.3 版。

我在 nginx v1.0.10 中的网络服务器，使用 Phusion Passenger 版本 3.0.11。

就其内存占用而言，“ruby”进程似乎完全摆脱了困境。

该应用程序是一个相对简单的产品目录。服务器在内存不足时大约每天崩溃两次。我也在使用 memcached v1.4.4。

当 Rails 缓存最终无法建立更多内存时，它会导致崩溃。

我不知道要采取什么步骤来确定为什么我的应用程序占用空间如此之大。

会不会是：

```
1) Some gems being loaded into memory?
2) A faulty or insufficient Passenger setup in my nginx.conf file?
3) Something else? 
```

我非常感谢任何人可以提供的任何帮助！我必须在晚上每两个小时检查一次这个东西。不好玩！

更新：

乘客配置如下：

```
server {
  listen 80;
  client_max_body_size 4M;
  server_name www.myapp.net myapp.net *.myapp.net;
  root /usr/code/mcp5/public;   # <--- be sure to point to 'public'!
  passenger_enabled on;
  passenger_min_instances             5;
  rails_env                           production;
  rails_framework_spawner_idle_time   0;
  rails_app_spawner_idle_time         0;
} 
```

我还在我的日志记录实用程序中注意到，这个东西正在快速旋转到 20 多个 ruby​​ procs。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T02:41:09.170

您的乘客配置是什么样的？对于可用的资源，您可能有太多线程。

感谢更新。

尽管我们的服务器比您的服务器拥有更多的资源，但我们仍然使用以下指令。

> > [乘客最大池大小](http://www.modrails.com/documentation/Users%20guide%20Nginx.html#PassengerMaxPoolSize)

尝试将其设置为 10 以开始并执行负载测试。这至少应该阻止应用程序杀死您的服务器。然后我会花更多时间尝试确定瓶颈在哪里。我们使用[Newrelic](http://newrelic.com/)进行性能监控。希望这会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:26:37.097

如果您不能使用 NewRelic 或没有钱购买专业计划，您可以尝试以下方法来查明乘客的问题：

```
sudo /usr/local/bin/passenger-status 
```

查看哪些进程属于哪个站点以及有多少进程 - 如果从一台机器服务多个站点并且

```
sudo /usr/local/bin/passenger-memory-stats 
```

查看服务中涉及的所有进程的详细内存信息（apache +passenger + ruby​​）。

也可以像[munin](http://munin-monitoring.org/)一样设置传统的监控。有几种使用[munin](http://jetpackweb.com/blog/2009/09/29/munin-graphs-for-phusion-passenger-a-k-a-mod_rails/)监控乘客的方法

# 64-bit - 无法让 IIS Express 8 beta 将网站作为 64 位进程运行

> ID：10202047
> 
> 赞同：54
> 
> 时间：2012-04-18T02:38:47.023
> 
> 标签：64-bit, iis-express

在 x64 Windows 7 上，我正在尝试使用 IIS Express 8 最新测试版让 hello world MVC 3 网站作为 64 位进程运行（因此 Environment.Is64BitProcess 在页面上返回 true）。

IIS Express 7.5 是 32 位，但 IIS Express 8 确实支持 64 位 ( [http://learn.iis.net/page.aspx/1266/iis-80-express-beta-readme/](http://learn.iis.net/page.aspx/1266/iis-80-express-beta-readme/) )。

无法获得任何 64 位的爱。

构建 AnyCpu 返回 Is64BitProcess false，构建 x64 给出“尝试加载格式不正确的程序。”就好像它试图以 32 位进程运行一样。

重命名文件夹等的实验表明“ **C:\Program Files (x86)\IIS Express** ”是唯一被使用的东西，而“ **C:\Program Files\IIS Express”**被 VS 忽略了。

如何让 VS 使用 x64 IIS Express 主机？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2014-04-30T13:21:19.813

此选项现在是 Vs 2013 / 2015 / 2017 的一部分：

> 工具 | 选项 | 项目和解决方案 | 网站项目 | 使用 64 位版本的 IIS Express

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-03-19T04:13:43.300

来自 Microsoft 对[http://visualstudio.uservoice.com](http://visualstudio.uservoice.com)上论坛帖子的回复-

这对我有用，即使它没有得到 Microsoft 的正式认可或支持。

> **Mike Harder (Microsoft) 发表评论**· 2013 年 1 月 31 日下午 5:26
> 
> 您可以通过设置以下注册表项将 Visual Studio 2012 配置为使用 IIS Express 64 位：
> 
> **reg add HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0\WebProjects /v Use64BitIISExpress /t REG_DWORD /d 1**
> 
> *但是，此功能不受支持，并且尚未经过 Microsoft 的全面测试。下一版本的 Visual Studio 正在考虑改进对 IIS Express 64 位的支持。*

[允许从 Visual Studio 2012 运行 IIS Express 64 位](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3254745-allow-for-iis-express-64-bit-to-run-from-visual-st)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-05-15T02:57:34.267

派对迟到了，但 VS2013 在选项中有这个。

工具 -> 选项 -> 项目和解决方案 -> Web 项目 -> 使用 64 位版本的 IIS Express...</p>

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-18T07:44:29.950

在这种情况下，您必须从命令行启动 iisexpress，

[http://learn.iis.net/page.aspx/870/running-iis-express-from-the-command-line/](http://learn.iis.net/page.aspx/870/running-iis-express-from-the-command-line/)

因为我不确定微软何时会更新 VS 集成部分以允许您选择 x64 IIS Express。当前的集成显然只是 x86。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-28T15:40:27.813

在注册表中，转到`HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\IISExpress\8.0\InstallPath`并将路径更改为 64 位**iisexpress.exe**位置。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-23T16:47:21.440

似乎创建除了启动 64 位 IIS 并将其放置在 32 位之外什么都不做的 EXE 就可以`iisexpress.exe`完成这项工作。

这是我用来创建 EXE 的 C# 代码：

```
using System.Diagnostics;

namespace IISExpress64
{
    class Program
    {
        static void Main( string[] args )
        {
            Process.Start( @"C:\Program Files\IIS Express\iisexpress.exe", string.Join( " ", args ) );
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-09-12T04:03:10.697

您可以从命令行以 64 位模式运行 IIS Express，然后使用 VS“附加到进程”进行调试。
看到[这个问题](https://stackoverflow.com/questions/12026400/running-the-64-bit-version-of-iis-express-8-rc-with-visual-studio-2010)。
玩得开心。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-07-09T03:24:19.410

执行以下操作以在 x64 上的 IIS8 Express 中的 x64 项目中运行 VS2012 项目。我正在运行 x64 WCF 服务。见下文，

*   安装 x64 版本的[IIS Express 8](http://www.microsoft.com/en-au/download/details.aspx?id=34679)。

*   将项目设置为运行 x64 位。

![在此处输入图像描述](../Images/f4c6d33e2d32fd1f42d12812eb5b62bc.png)

*   添加自定义 Web 服务器 URL。因为您不想在项目运行时启动服务（F5）。

![在此处输入图像描述](../Images/b34af04fed97fbd28c1e376d6eab3649.png) - 编写一个bat文件并添加以下内容。放置 applicationhost.config 的正确 unc 位置和正确的项目名称。保存 bat 文件。

```
cd "Program Files"/IIS Express 
iisexpress.exe  /config:"\\companyname.com\root\User-Profiles\testusername\Documents\IISExpress\config\applicationhost.config" /site:"YourProjectName.WcfHost" /apppool:"Clr4IntegratedAppPool" 
```

*   运行 (F5) 项目。
*   双击 bat 文件以启动 IIS Express 8 for x64。请参阅 Windows 任务管理器和 IIS Express 系统托盘。 ![在此处输入图像描述](../Images/e87cf46c1c1cd875b8d8cc6e40bf4503.png)

![在此处输入图像描述](../Images/1467998b08fbecafcd8289eea31725c5.png)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-05T20:47:53.447

简单的可能性就是将 IIS x64 设置为 WEB 项目的启动程序：

项目属性 -> Web -> 启动操作 -> 启动程序：c:\Program Files\IIS Express\iisexpress.exe 命令参数：/path:{yourProjectPath} /port:{yourPort}

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2012-07-01T00:57:24.367

In order to solve this on my system, I cheated -- I copied the 64-bit executables (in `\Program Files\IIS Express\`) over the 32-bit executables (in `\Program Files (x86)\IIS Express\`). Visual Studio doesn't seem to care whether it's one or the other.

I guess we will have to wait and see if the final release of VS 2012 will allow for choosing between the 32-bit and 64-bit IIS Express.

# scala - 为什么在ScalaQuery的“withTransaction”子句中访问表时“缺少参数类型”？

> ID：10202048
> 
> 赞同：2
> 
> 时间：2012-04-18T02:39:04.190
> 
> 标签：scala, scalaquery

这段代码：

```
def insAll(values: MyRdt*) {
  Db.withTransaction(session => { // Db is an org.scalaquery.session.Database instance
    MyTable.insertAll(values: _*)(session)
  })
} 
```

不编译。错误是

```
... missing parameter type
[error]     Db.withTransaction(session => {
                               ^ 
```

任何想法为什么？

如果我访问预定义的 Query 而不是`MyTable.insertAll(values: _*)`.

奇怪的是，如果我把它分成两个功能，比如

```
def insAllS(values: MyRdt*)(session: Session) {
  MyTable.insertAll(values: _*)(session)
}

def insAll(values: MyRdt*) {
  Db.withTransaction(session => {
    insAllS(values: _*)(session)
  })
} 
```

它编译没有错误。

PS：`MyRdt`是表记录元组的类型别名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:02:48.763

正在进行的是较少类型安全（运行时）的会话处理程序；如果您在范围内有threadLocalSession，那么以下应该可以工作：

```
import org.scalaquery.session.Database.threadLocalSession

def insAll(values: MyRdt*) {
  Db.withTransaction { implicit ss: session =>
    MyTable.insertAll(values: _*)
  }
} 
```

但是，就回答您的问题而言：编译时会话处理程序，假设您已尝试指定传递给块的类型是会话：

```
import org.scalaquery.session._

def insertAll(values: MyRdt*) {
  Db.withTransaction { ss: Session =>
    Foo.insertAll(values: _*)(ss)
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T11:17:41.740

超载是罪魁祸首。类似于`withTransaction`方法的签名：

```
scala> def om[T](f: Int => T): T = f(0)
om: [T](f: (Int) => T)T

scala> def om[T](f: => T): T = f
om: [T](f: => T)T

scala> om(x => 'x)
<console>:80: error: missing parameter type
  om(x => 'x)
  ^

scala> def m[T](f: Int => T): T = f(0)
m: [T](f: (Int) => T)T

scala> m(x => 'x)
res46: Symbol = 'x 
```

# java - 在不同的 ChannelPipeline 中共享 ExecutionHandler

> ID：10202052
> 
> 赞同：0
> 
> 时间：2012-04-18T02:39:31.367
> 
> 标签：java, netty

我的服务器有两个不同类型的客户端，它们有不同的消息格式，所以服务器中有两个 NioServerSocketChannelFactory 分别处理两种类型的客户端请求。这两种类型的客户端需要在两个 NioServerSocketChannelFactory 的处理程序中访问同一个对象。我可以在两个 ChannelPipelines 中共享相同的 OrderedMemoryAwareThreadPoolExecutor 对象吗？

例如：

```
Channels.pipeline(
    concurrencyHandler,
    new Handler1());
}

Channels.pipeline(
    concurrencyHandler,
    new Handler2());
} 
```

当 handler1 和 2 访问同一个对象时，OrderedMemoryAwareThreadPoolExecutor 会处理线程并发吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:56:00.893

您应该为每个 ChannelFactory 使用一个 ExecutionHandler，因为 OrderedMemoryAwareThreadPoolExecutor 使用 Channel id 来查找给定 Channel 的正确 Executor。Channel id 仅在每个 ChannelFactory 中是唯一的，因此如果您在不同的 ChannelFactories 之间共享它，可能会产生不好的副作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T11:36:26.230

共享 OrderedMemoryAwareThreadPoolExecutor 在两个 ChannelFactory 中不能进行线程间的同步。Channel 有其专属的任务队列，OrderedMemoryAwareThreadPoolExecutor 只保证一个通道的事件（队列中的任务）有序执行。它不能证明两个通道的两个任务队列中的任务是有序执行的。不同队列中的任务访问同一个对象是不能同步的。

# c# - C# Mask.NullString(str).Length 的 VB.NET 等效项

> ID：10202053
> 
> 赞同：1
> 
> 时间：2012-04-18T02:39:32.917
> 
> 标签：c#, asp.net, .net, vb.net

我在一个我想使用的库中遇到了我以前从未见过的代码（可能是因为我不太使用 c#）并且找不到任何文档。它在 VB.NET 中不起作用，我什至不确定它是做什么的，所以我可以以不同的方式去做。表达式是`Mask.NullString(str).Length`。谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T02:48:30.377

`Mask.NullString`我[在网上找到](http://webcache.googleusercontent.com/search?q=cache%3aiBKi3MXe1KsJ%3ajayrock.googlecode.com/hg/src/Common/Mask.cs%20&cd=1&hl=en&ct=clnk&gl=us)的实现如下所示：

```
public static string NullString(string actual) {
    return actual == null ? string.Empty : actual;
} 
```

我不是VB专家，但我认为它可以转化为：

```
if(str, String.Empty).Length 
```

# c# - 在 C# 中计算日期范围之间的假期数

> ID：10202056
> 
> 赞同：0
> 
> 时间：2012-04-18T02:39:51.100
> 
> 标签：c#

我想知道如何计算 C# 中日期范围之间的假期数。

示例：日期范围 2012 年 1 月 1 日至 2012 年 2 月 1 日

```
 conditions:
    holiday1=>From Date (30th Dec 2011 to 2nd jan 2012)
    holiday2 =>From Date(16th jan 2012 to 18 th jan 2012)
    holiday3=>From Date(30the jan 2012 to 2nd Feb 2012) 
```

由于第一个假期到 1 月 2 日，我需要计算假期 1 的 2 天以及假期 3 的 2 天和假期 2 的 2 天，这对我来说计算不是问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T02:47:07.113

首先，您需要对假期有一个统一的、一致的定义。有许多。有美国联邦政府的定义，有纽约证券交易所的定义，甚至有些州也有自己的假期（例如，马萨诸塞州的爱国者日）。当然，我忽略了美国不是世界上唯一的国家这一事实。所以，假设你已经制定了这个定义，并且你已经编写了一个方法：

```
bool IsHoliday(this DateTime date) { // } 
```

现在你可以说：

```
int CountHolidaysBetween(DateTime start, DateTime end) {
    int days = end.Day.Substract(start.Day).Days;
    return Enumerable.Range(0, days + 1)
                     .Select(day => start.Day.AddDays(day))
                     .Count(d => d.IsHoliday());
} 
```

或者，如果您认为这太花哨：

```
int CountHolidaysBetween(DateTime start, DateTime end) {
    DateTime current = start.Day;
    int count = 0;
    while(current <= end.Day) {
        if(current.IsHoliday()) { count++; }
        current = current.AddDays(1);
    }
    return count;
} 
```

如您所见，最重要的部分是确定您对假期的定义并将其编入一种方法。这不是我们可以为您决定的事情。我们不知道您是否在美国，我们不知道您是否是政府机构，我们不知道您是否必须遵守特定州的假期等。

# android - 使用 RelativeLayout 对齐片段

> ID：10202060
> 
> 赞同：7
> 
> 时间：2012-04-18T02:40:00.380
> 
> 标签：android, android-layout, android-fragments, android-relativelayout, android-linearlayout

我在尝试将片段与 a 对齐时遇到了真正的问题`RelativeLayout`，尽管这似乎应该很简单。我只需要两个相邻的片段，如果我使用`LinearLayout`它就可以了：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

   <fragment android:name="com.fragment.test.TitlesFragment"
            android:id="@+id/fragmentTitles"
            android:layout_weight="1"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
     />

    <FrameLayout 
            android:id="@+id/details" 
            android:layout_weight="1"
            android:layout_width="0px"
            android:layout_height="fill_parent" 
    />

</LinearLayout> 
```

![在此处输入图像描述](../Images/0b5effa42fd75a1414fa1ae1b5ac6393.png)

但是，如果我使用 a `RelativeLayout`，则没有任何显示：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

   <fragment android:name="com.fragment.test.TitlesFragment"
            android:id="@+id/fragmentTitles"
            android:layout_weight="1"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
     />

    <FrameLayout 
            android:id="@+id/details" 
            android:layout_weight="1"
            android:layout_width="0px"
            android:layout_height="fill_parent" 
            android:layout_toRightOf="@id/fragmentTitles"            
    />

</RelativeLayout> 
```

![在此处输入图像描述](../Images/7d1b93a32d77be507c330ad81d842b90.png)

更新：

这是我所看到的屏幕截图：

![在此处输入图像描述](../Images/614f7d76fe7ac64c7e33c969edd78430.png)

这是我正在使用的代码：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    >

    <LinearLayout
        android:orientation="horizontal"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:weightSum="3"
    >
        <fragment android:name="com.fragment1"
                android:id="@+id/fragment1"
                android:layout_weight="1"
                android:layout_width="0dp"
                android:layout_height="fill_parent"
                android:layout_above="@id/statusUpdated"
         />

        <fragment android:name="com.fragment2"  
                android:id="@+id/fragment2"
                android:layout_width="0px"
                android:layout_weight="2"
                android:layout_height="fill_parent"
                android:layout_above="@id/statusUpdated"        
                android:layout_toRightOf="@id/fragment1"
         />

    </LinearLayout>

    <TextView android:id="@+id/statusUpdated" style="@style/Status" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T02:52:44.803

您不能将权重与`RelativeLayout`. 基本上该属性会被忽略，这意味着您的两个片段都以宽度呈现`0`，因此它们不可见。

我不确定您要完成什么，但您可能需要考虑将您的第一个示例（`LinearLayout`）包装成`RelativeLayout`- 换句话说：组合/集成两种布局。不过，这确实会导致您的视图层次结构中的另一个级别。

* * *

**编辑：**

我还没有实际测试过它，但我认为你正在寻找这样的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent">

    <LinearLayout 
        android:id="@+id/fragment_layout"
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent"
        android:layout_above="@+id/footer_view" 
        android:weightSum="3">

        <fragment 
            android:id="@+id/fragmentTitles" 
            android:name="com.fragment.test.TitlesFragment"
            android:layout_width="0dp" 
            android:layout_height="fill_parent"
            android:layout_weight="1" />

        <FrameLayout 
            android:id="@+id/details"
            android:layout_width="0dp" 
            android:layout_height="fill_parent"
            android:layout_weight="2" />
    </LinearLayout>

    <TextView 
        android:id="@+id/footer_view" 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:layout_alignParentBottom="true"
        android:background="#f00" 
        android:text="I am a footer" />

</RelativeLayout> 
```

显然你可以用`TextView`你喜欢的任何东西替换。

# xml - 列出 SSIS 包中所有“执行 SQL 任务”的 SqlStatementSource

> ID：10202062
> 
> 赞同：2
> 
> 时间：2012-04-18T02:41:01.817
> 
> 标签：xml, powershell, ssis

我想列出 SSIS 包中所有“执行 SQL 任务”的 SqlStatementSource。通过引用相关，它表明 SQLPSX 的 ssis 包可能有助于解决此任务。但是，当我尝试执行以下过程时：

```
import-module SSIS
$package = Get-ISPackage -path "xxx.dtsx" 
```

我的 powershell 返回以下错误消息：

“无法删除包保护，错误 0xC0014037”包使用密码加密。未指定密码或密码不正确。"。这发生在 CPackage::LoadFromXML 方法中。"

它显示我应该导入密码来解密包以检索数据，但是我应该把密码放在哪里？或者有没有其他方便的解决方案可以让我解决这个问题。

最好的，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:26:52.017

并不是说这是最好的解决方案，而是可以尝试的东西。而不是试图通过 SSIS 来获取信息，为什么不通过文件本身。DTSX 文件是 XML 格式，PowerShell 可以很好地处理这些类型的文件。

我对我的一个 dtsx 文件进行了尝试，并能够返回信息：

```
 [xml]$package = Get-Content C:\Myfile.dtsx
$package.Executable.Executable | 
   Select -ExpandProperty ObjectData | 
      Select -ExpandProperty SqlTaskData | 
         Select SqlStatementSource 
```

出于某种原因，我确实收到了一个 InvalidArgument 错误，说它找不到属性“SqlTask​​Data”。我相信这是因为它击中了我在包中的数据流任务，并且它没有属性/属性。这就是我的意思，因为它可能不是完美的解决方案，所以我不提供任何保证。需要指出的一件事是我没有将我的包设置为通过密码加密。

**更新**

您可以尝试[包含](http://sev17.com/2009/06/adventures-in-powershell-ssis-administration-programming/)SSIS 库的 SQLPSX。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:28:08.233

我没有安装 SQLPSX，但我可以告诉你如何在没有它的情况下解密包。要做的重要事情是将包密码分配给应用程序，以便它可以解密包。

给定一个像这样的包，其中每个执行 sql 任务都有一个语句`SELECT N AS test` ![随时随地执行sql](../Images/4cd34865204ca444cb0ee1f3d518656e.png)

以下脚本将解密保存为 EncryptAllWithPassword 的包，并具有各种任务，其中一些嵌入在各种容器中。无论如何，它都不是漂亮的 PowerShell，但它可以完成工作。

```
[Reflection.Assembly]::LoadWithPartialName("Microsoft.SQLServer.ManagedDTS") | out-null

Function ProcessExecutable
{
    param
    (
    [Microsoft.SqlServer.Dts.Runtime.Executable]$item
    )

    $t = $item.GetType()
    if ($t.Name -eq "TaskHost")
    {
        #$th = New-Object Microsoft.SqlServer.Dts.Runtime.Task
        #$es = New-Object Microsoft.SqlServer.Dts.Tasks.ExecuteSQLTask.ExecuteSQLTask
        $th = [Microsoft.SqlServer.Dts.Runtime.TaskHost]$item
        try
        {
            $es = [Microsoft.SqlServer.Dts.Tasks.ExecuteSQLTask.ExecuteSQLTask]$th.InnerObject
            Write-Host($es.SqlStatementSource)
        }
        catch
        {
        }
    }
    elseif ($t.Name -eq "Sequence")
    {
        $sequence = [Microsoft.SqlServer.Dts.Runtime.Sequence]$item
        foreach ($subitem in $sequence.Executables)
        {
            ProcessExecutable $subitem
        }
    }
    elseif ($t.Name -eq "ForLoop")
    {
        $sequence = [Microsoft.SqlServer.Dts.Runtime.ForLoop]$item
        foreach ($subitem in $sequence.Executables)
        {
            ProcessExecutable $subitem
        }
    }
    elseif ($t.Name -eq "ForEachLoop")
    {
        $sequence = [Microsoft.SqlServer.Dts.Runtime.ForEachLoop]$item
        foreach ($subitem in $sequence.Executables)
        {
            ProcessExecutable $subitem
        }
    }    
}

$app = New-Object Microsoft.SqlServer.Dts.Runtime.Application
$app.PackagePassword = "password"
$packagePath = "C:\sandbox\SSISHackAndSlash\SSISHackAndSlash\Encrypted.dtsx"
$package = $app.LoadPackage($packagePath, $null)

foreach($item in $package.Executables)
{
    ProcessExecutable $item
} 
```

输出

```
SELECT 1 AS test
SELECT 2 As test
SELECT 5 AS test
SELECT 4 AS test
SELECT 3 AS test 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:07:31.137

你通常使用 DTEXEC 来运行这样的加密包：

```
DTExec.exe /FILE "C:\Package1.dtsx" /DECRYPT password@1. 
```

/FILE 表示包在文件系统上。您可以将 /SQL 用于 SQl Server 数据库上的包或 /DT（如果它在文件存储上）

此外，如果您在 BIDS 上打开包裹，系统会提示您输入密码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T03:36:49.623

在网上搜索了有关如何列出所有 SSIS 组件的信息后，我发现编写 C# 程序可能是解决该问题的最佳解决方案。因此，下面我写了一个 VS 2008 兼容的程序来完成我的任务。下面编写的程序将列出所有与 SSIS 相关的组件，并将结果写入 excel 文件。该解决方案将为您节省大量时间单击VS 2008中显示的组件以逐个查看组件属性。由于我不是 C# 专家，因此该程序可能没有很好地编码。但至少它有效！

```
using System;
using System.Collections.Generic;
using System.Text;
using System.IO;
using Excel = Microsoft.Office.Interop.Excel;
using System.Reflection;
using Microsoft.SqlServer.Dts.Runtime;
using Microsoft.SqlServer.Dts.Pipeline;
using Microsoft.SqlServer.Dts.Pipeline.Wrapper;

namespace Project1
{
    public class SSISFinder
    {

        public static void Main()
        {
            // Set ssis app
            Microsoft.SqlServer.Dts.Runtime.Application ssisApp = new Microsoft.SqlServer.Dts.Runtime.Application();
            ssisApp.PackagePassword = "admin_monkey4ccc";

            // Loading dtsx package
            Package pkg = ssisApp.LoadPackage("D:\\SummaryETL.dtsx", null);

            // Open Excel Sheet
            Excel.Application oXL = new Excel.Application();
            Excel.Workbook oWB;
            Excel.Worksheet oSheet;            
            string fileName = "D:\\test.xls";
            oWB = oXL.Workbooks.Add(Missing.Value);
            oSheet = (Excel.Worksheet)oWB.ActiveSheet;

            // List data flow package
            List<DtsContainer> containers = FindExecutablesByType((IDTSSequence)pkg, "PIPELINE");
            int counter = 1;

            foreach (DtsContainer exec in containers)
            {
                TaskHost th = exec as TaskHost;
                MainPipe pipe = (MainPipe)th.InnerObject;

                foreach (IDTSComponentMetaData100 comp in pipe.ComponentMetaDataCollection)
              {
                  if (comp.Description == "OLE DB Source")
                  {
                      oSheet.Cells[counter, 1] = comp.Description;
                      oSheet.Cells[counter, 2] = th.Properties["Name"].GetValue(th).ToString();
                      oSheet.Cells[counter, 3] = comp.Name;                      
                      oSheet.Cells[counter, 4] = comp.CustomPropertyCollection["SqlCommand"].Value;
                      Console.WriteLine("  Component Name = " + comp.Name);
                      counter++;
                  }
                  else if (comp.Description == "OLE DB Destination")
                  {
                      oSheet.Cells[counter, 1] = comp.Description;
                      oSheet.Cells[counter, 2] = th.Properties["Name"].GetValue(th).ToString();
                      oSheet.Cells[counter, 3] = comp.Name;                      
                      oSheet.Cells[counter, 4] = comp.CustomPropertyCollection["OpenRowset"].Value;
                      Console.WriteLine("  Component Name = " + comp.Name);
                      counter++;
                  }
              }

            }

            oWB.SaveAs(fileName, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
    Excel.XlSaveAsAccessMode.xlShared, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing);
            oWB = null;

            oXL.Quit();
            oXL = null;

        }

        static List<DtsContainer> FindExecutablesByType(IDTSSequence sequence, string typeName)
        {
            string typeNameUpper = typeName.ToUpper();
            List<DtsContainer> matchingExecutable = new List<DtsContainer>();
            foreach (Executable e in sequence.Executables)
            {
                if (e.GetType().ToString().ToUpper().Contains(typeNameUpper))
                {

                    matchingExecutable.Add((DtsContainer)e);
                }
                if (e is TaskHost)
                {
                    TaskHost taskHost = (TaskHost)e;

                    if ((typeNameUpper.Contains("DATA FLOW")
                                || typeNameUpper.Contains("DATAFLOW")
                                || typeNameUpper.Contains("MAINPIPE")
                                || typeNameUpper.Contains("PIPELINE")
                                ) && taskHost.InnerObject is IDTSPipeline100
                       )
                    {
                        matchingExecutable.Add((DtsContainer)e);
                    }
                    else if (taskHost.InnerObject.GetType().ToString().ToUpper().Contains(typeNameUpper))
                    {
                        matchingExecutable.Add((DtsContainer)e);
                    }
                }
                if (e is IDTSSequence)
                {
                    matchingExecutable.AddRange(FindExecutablesByType((IDTSSequence)e, typeNameUpper));
                }
            }
            return matchingExecutable;
        }
    }
} 
```

# sql - VFP DB上的SQL查询：如何从对应于另一个分组和聚合的行中获取数据

> ID：10202065
> 
> 赞同：0
> 
> 时间：2012-04-18T02:41:13.500
> 
> 标签：sql, database, group-by, aggregate, visual-foxpro

背景：使用 OLEDB 驱动程序连接到 VFP 数据库。脚本：php

以下是一组数据项购买示例：

```
partno  purch_date  price
  A     04/02/2012    95
  A     04/01/2012   100
  B     02/28/2012    55
  B     03/15/2012    60 
```

我想要做的是构建一个选择查询，该查询将根据日期获取最新购买价格的价格。这听起来很简单，但我一生都无法弄清楚如何做到这一点。似乎必须有一个我不知道的聚合函数。我认为它应该类似于以下内容：

SELECT partno, max(purch_date) as lastest_purch_date, price FROM table GROUP BY partno

此查询将不起作用，因为 VFP 将需要所有选定字段的聚合函数。我缺少的是一个函数或以某种方式告诉 vfp 我想要对应于 max(purch_date) 的价格

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T03:29:25.547

尝试这个

```
select b.partno,b.purdate,c.price
from
(
select max(a.purdate) purdate,partno from table a
group by a.partno
)b,
table c
where b.partno=c.partno and b.purdate=c.purdate 
```

# c++ - 文件处理：在评论/引号中显示内容

> ID：10202073
> 
> 赞同：-1
> 
> 时间：2012-04-18T02:42:06.837
> 
> 标签：c++, file-handling

我正在编写一个 C++ 程序来显示文本文件中引号或单行或多行注释中的任何文本。问题是我不能让它正常运行。这是我的程序：

```
#include <iostream.h>
#include <fstream.h>
#include <string.h>
#include<conio.h>
using namespace std;

int main () {
    char ch, name[20];
    int count=0;
    fstream fin;
    cin>>name;
    fin.open(file_name, ios::in);
    while(!fin.eof()) {
        fin.get(ch);
        if(ch=='/') {
            fin.get(ch);
            if(ch=='*') { 
                a:
                fin.get(ch);
                while(ch!='*') {
                    cout<<ch;
                    fin.get(ch);
                }
                fin.get(ch);
                if(ch!='/') goto a;                                 
            }
            if(ch=='/') {
                fin.get(ch);
                while(ch!='\n') {
                    cout<<ch;
                    fin.get(ch);              
                }
            }
        }
    }

    getch(); 
    return 0;
} 
```

编辑：它陷入无限循环。我知道如何。问题仍然存在。我正在使用 Dev C++ 编辑器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:40:12.280

无限循环需要循环。您的代码中有两个循环。第一个`while(!fin.eof()) {`不会导致无限循环，因为文件最终会被耗尽。

所以我们仍然使用内部循环和 goto 语句。我认为逻辑中有一个错误 - 如果星号后没有斜线，则循环将永远不会结束。

# java - Spring Webflow + CDI

> ID：10202074
> 
> 赞同：0
> 
> 时间：2012-04-18T02:42:10.170
> 
> 标签：java, cdi, spring-webflow

Spring Webflow 和 CDI 兼容吗？我在部署包含 beans.xml(CDI) 的应用程序时遇到问题。

我在 Jboss 7.1 上部署

如果我运行包含 /WEB-INF/beans.xml (CDI) 的应用程序，我会遇到以下异常：

> org.springframework.web.util.NestedServletExceptio n：请求处理失败；嵌套异常是 org.springframework.webflow.execution.FlowExecutio nException：在流“comprar”的状态“modalidades”中引发异常 org.springframework.web.servlet.FrameworkServlet.p rocessRequest(FrameworkServlet.java:894) org.springframework.web .servlet.FrameworkServlet.d oGet(FrameworkServlet.java:778) javax.servlet.http.HttpServlet.service(HttpServlet .java:734) javax.servlet.http.HttpServlet.service(HttpServlet .java:847) org.springframework。 security.web.FilterChainProxy$ VirtualFilterChain.doFilter(FilterChainProxy.java: 343) org.springframework.security.web.access.intercept。FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109) org.springframework.security.web.access.intercept。doFilter(Abst ractAuthenticationProcessingFilter.java:187) org.springframework.security.web.FilterChainProxy$ VirtualFilterChain.doFilter(FilterChainProxy.java: 355) org.springframework.security.web.authentication.lo gout.LogoutFilter.doFilter(LogoutFilter.java: 105) org.springframework.security.web.FilterChainProxy$ VirtualFilterChain.doFilter(FilterChainProxy.java: 355) org.springframework.security.web.context.SecurityC ontextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79) org.springframework.security。 web.FilterChainProxy$ VirtualFilterChain.doFilter(FilterChainProxy.java: 355) org.springframework.security.web.FilterChainProxy。doFilter(FilterChainProxy.java:149) org.springframework.web.filter.DelegatingFilterPro xy.invokeDelegate(DelegatingFilterProxy.java:346) org.springframework.web。
> 
> org.springframework.webflow.execution.FlowExecutio nException：在流“comprar”的状态“modalidades”中引发异常 org.springframework.webflow.engine.impl.FlowExecut ionImpl.wrap(FlowExecutionImpl.java:571) org.springframework.webflow。 engine.impl.FlowExecut ionImpl.resume(FlowExecutionImpl.java:262) org.springframework.webflow.executor.FlowExecutorI mpl.resumeExecution(FlowExecutorImpl.java:169) org.springframework.webflow.mvc.servlet.FlowHandle rAdapter.handle(FlowHandlerAdapter .java:183) org.springframework.faces.webflow.JsfFlowHandlerAd apter.handle(JsfFlowHandlerAdapter.java:48) org.springframework.web.servlet.DispatcherServlet。doDispatch(DispatcherServlet.java:923) org.springframework.web.servlet.DispatcherServlet。doService(DispatcherServlet.java:852) org.springframework.web.servlet。
> 
> javax.faces.FacesException：检查 jndi 的上次修改时出错：/default-host/webflow-primefaces-showcase/modalidades.xhtml com.sun.faces.facelets.impl.DefaultFaceletCache._g etLastModified(DefaultFaceletCache.java:175) com。 sun.faces.facelets.impl.DefaultFaceletCache.ac cess$000(DefaultFaceletCache.java:62) com.sun.faces.facelets.impl.DefaultFaceletCache$2。newInstance(DefaultFaceletCache.java:93) com.sun.faces.facelets.impl.DefaultFaceletCache$2。newInstance(DefaultFaceletCache.java:89) com.sun.faces.util.ExpiringConcurrentCache$1.call(ExpiringConcurrentCache.java:99) java.util.concurrent.FutureTask$Sync.innerRun(Futu reTask.java:334) java.util. concurrent.FutureTask.run(FutureTask.java:166) com.sun.faces.util.ExpiringConcurrentCache.get(ExpiringConcurrentCache.java:114)
> 
> java.io.FileNotFoundException org.apache.naming.resources.DirContextURLConnectio n.getInputStream(DirContextURLConnection.java:369) com.sun.faces.facelets.impl.DefaultFaceletCache._getLastModified(DefaultFaceletCache.java:172) com.sun.faces .facelets.impl.DefaultFaceletCache.ac cess$000(DefaultFaceletCache.java:62) com.sun.faces.facelets.impl.DefaultFaceletCache$2。newInstance(DefaultFaceletCache.java:93) com.sun.faces.facelets.impl.DefaultFaceletCache$2。newInstance(DefaultFaceletCache.java:89) com.sun.faces.util.ExpiringConcurrentCache$1.call(ExpiringConcurrentCache.java:99)

当我删除 beans.xml 时，应用程序工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T03:25:23.890

它们不是开箱即用的互操作，但您可以使用[http://seamframework.org/Seam3/SpringModule](http://seamframework.org/Seam3/SpringModule)之类的东西来桥接它们。

但是，万一项目的问题似乎与 JSF 相关（而 CDI 只是导致它出现）。我怀疑 Spring Webflow 的 JSF 处理与 JSF servlet 发生冲突，但在重现之前无法确定。

如果您能提供一种方法来重现它，那就太好了（即您是否在其中一个示例应用程序中看到它？）

# php - 谷歌地图图片未加载

> ID：10202076
> 
> 赞同：2
> 
> 时间：2012-04-18T02:43:07.040
> 
> 标签：php, google-maps-api-3, content-type

嘿伙计们，当我加载我的网页时，谷歌地图开始加载，但它没有完全加载。这是控制台打印出来的：

```
Resource interpreted as Image but transferred with MIME type text/html: "http://maps.googleapis.com/maps/gen_204?ev=api_viewport&cad=src:apiv3".
Resource interpreted as Image but transferred with MIME type text/html: "http://maps.googleapis.com/maps/gen_204?ev=api_ads&cad=src:apiv3,ads:0".
Resource interpreted as Image but transferred with MIME type text/html: "http://maps.googleapis.com/maps/gen_204?ev=api_marker&cad=src:apiv3,m:2,d:0,s:0". 
```

我知道它与内容类型有关，但我不确定如何设置它。我将这两个元标记放在我的标题中，但没有运气。

`<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />`

`<meta http-equiv="content-type" content="text/html"; charset=utf-8">`

我也在尝试另一种方式，将它放在我的文件顶部：

`<?php // header('Content-Type: application/x-javascript; charset=UTF-8'); ?>`

但这也无济于事。

我正在使用 PHP 和 MYSQL。有人可以引导我朝着正确的方向前进。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:04:19.200

我弄清楚为什么我的地图没有完全加载。我正在使用它来获取位置：

`new google.maps.LatLng(-103.6975488, 36.8813329);`

但是我需要这样做：

`new google.maps.LatLng(36.8813329, -103.6975488);`

感谢 Andrew 指出 MIME 类型错误并不重要。

# python - Python getstatusoutput 替换不返回完整输出

> ID：10202078
> 
> 赞同：0
> 
> 时间：2012-04-18T02:43:20.767
> 
> 标签：python, pipe, stdout

我在 Python 2.* 中遇到了这个很好的替代`getstatusoutput()`函数，它在 Unix 和 Windows 上同样适用。但是，我认为`output`构建的方式有问题。它只返回输出的最后一行，但我不知道为什么。任何帮助都是极好的。

```
def getstatusoutput(cmd):
    """Return (status, output) of executing cmd in a shell."""
    """This new implementation should work on all platforms."""
    import subprocess
    pipe = subprocess.Popen(cmd, stdout=subprocess.PIPE, shell=True, universal_newlines=True)
    output = "".join(pipe.stdout.readlines())
    sts = pipe.returncode
    if sts is None: sts = 0
    return sts, output 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T03:09:19.620

这有一个错误。

来电：

```
pipe = subprocess.Popen(...) 
```

启动该过程。该行：

```
output = "".join(pipe.stdout.readlines()) 
```

读取进程的标准输出（如果有错误输出，它可能会被卡住，但由于您没有重定向标准错误，这是安全的；在更一般的情况下，您需要使用该`.communicate()`函数来避免可能的楔入）。你可能会想：好吧，既然我已经阅读了所有的输出，那么子进程显然已经完成了，所以`pipe.returncode`应该设置。但实际上，如果你更换：

```
sts = pipe.returncode
if sts is None: sts = 0 
```

使用包含某种诊断的代码（或完全删除第二行），您会发现，至少在某些系统上，有时`sts` *是* `None`. 原因是该`subprocess`模块还没有机会检索它。您应该将这些行替换为：

```
sts = pipe.wait() 
```

收集结果并消除对`is None`测试的需要。`.wait()`（即使您已经使用`.communicate()`和/或已经调用过，也可以安全地调用`.wait()`。）

只需使用以下`"".join(...)`命令可以稍微更有效地完成：

```
output = pipe.stdout.read() 
```

综上所述，它确实为我提供了完整的输出。也许您正在阅读仅`'\r'`用于换行符的内容，并且您的 Python 是在没有通用换行符支持的情况下构建的？（如果我运行产生`\r`-for-newline 的东西，我仍然会得到所有行，由实际的换行符分隔。）

# javascript - HTML 在 Javascript 函数中不起作用 - Django

> ID：10202081
> 
> 赞同：0
> 
> 时间：2012-04-18T02:43:56.887
> 
> 标签：javascript, django

我有一个包含 Javascript 函数的 Django 模板，如下所示：

```
<a class ="edit" href="{% url notecards.views.edit_notecard notecard.id %}"> Edit </a>
<h3 class="notecard"><p id="boldStuff">{{ notecard.notecard_name }}</p></h3>
<input id ="myButton" type="button" onclick="changeText()" value="View Answer"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js"></script>
<script type="text/javascript">
function changeText(){
    if (document.getElementById("boldStuff").textContent == "{{ notecard.notecard_name }}")
      {
            document.getElementById("boldStuff").textContent = "{{ notecard.notecard_html|safe }}";
            $("#myButton").prop("value", "View Question");
      }
    else
      {
            document.getElementById("boldStuff").textContent = "{{ notecard.notecard_name }}";
            $("#myButton").prop("value", "View Answer");
      }
}
</script> 
```

当变量值不是 HTML 时，此脚本可以完美运行。但是，当它们是 HTML 值时，该函数根本不起作用。单击按钮时，没有任何反应。在控制台中，我得到：

`undetermined string literal`在 Javascript 函数的第 4 行，我也得到`changeText`未在第 1 函数声明行定义。

对于有问题的值之一，我的函数页面源如下所示：

```
function changeText(){
    if (document.getElementById("boldStuff").textContent == "Here is a question hey whats up?")
      {
            document.getElementById("boldStuff").textContent = "<p>Here is an answer hey whats up. </p>
<p>Here is an answer hey whats up. Here is an answer hey whats up. </p>
<p>Here is an answer hey whats up.</p>
<p>Here is an answer hey whats up.Here is an answer hey whats up.vHere is an answer hey whats up. v</p>";
            $("#myButton").prop("value", "View Question");
      }
    else
      {
            document.getElementById("boldStuff").textContent = "Here is a question hey whats up?";
            $("#myButton").prop("value", "View Answer");
      }
} 
```

这些值可以有

标签如图所示，以及列表项等。

我试过同时使用`.textContent`and `.innerHTML`，问题是一样的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T03:27:23.137

使用[`escapejs`](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#escapejs)模板过滤器

# javascript - django-pipeline 不压缩

> ID：10202082
> 
> 赞同：3
> 
> 时间：2012-04-18T02:44:08.020
> 
> 标签：javascript, django, compression, settings, yui

我刚刚将 django-pipeline 安装到我的 django 应用程序中，它似乎没有压缩我的 javascript 文件。它似乎已正确安装，因为模板标签工作正常。我正在使用 manage.py collectstatic 来压缩文件。这是我目前的配置。当我使用 Django 1.3 时，我还设置了我的应用程序以根据 django-pipeline 文档使用 django-staticfiles。

```
 STATIC_ROOT = os.path.join(PROJECT_ROOT, 'site_media', 'static')
 STATIC_URL = '/site_media/static/'
 ADMIN_MEDIA_PREFIX = '/site_media/static/admin/'

 STATICFILES_DIRS = (
    os.path.join(PROJECT_ROOT, "media"),
 )

 STATICFILES_FINDERS = (
    ##Turn these on if using django.contrib.staticfiles
    ##'django.contrib.staticfiles.finders.FileSystemFinder',
    ##'django.contrib.staticfiles.finders.AppDirectoriesFinder',
    ##'django.contrib.staticfiles.finders.DefaultStorageFinder',

    ##Turn these on if using django.contrib.staticfiles
    'staticfiles.finders.FileSystemFinder',
    'staticfiles.finders.AppDirectoriesFinder',
    'staticfiles.finders.DefaultStorageFinder'
 )

 PREREQ_APPS = [
    # Django
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',

    #External
    'south',
    'staticfiles',
    'pipeline',    
 ]

 PIPELINE_YUI_BINARY='/Applications/yuicompressor-2.4.7/build/yuicompress'

 PIPELINE_JS = {
    'site': {
        'source_filenames': (
            'js/libs/ddsmoothmenu.js',
            'js/script.js',
        ),
        'output_filename': 'js/script.min.js',
    }
 } 
```

我不确定我在这里缺少什么，但我确定它是一些东西。我没有收到任何错误消息或任何东西，它只是没有压缩。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:06:03.877

你进入`DEBUG=True`你的设置了吗？尝试添加[`PIPELINE=True`](http://django-pipeline.readthedocs.org/en/latest/configuration.html#pipeline)以确保它运行压缩

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T13:38:51.307

您是否设置了静态文件：

```
STATICFILES_STORAGE = 'pipeline.storage.PipelineCachedStorage' 
```

如是 ：

*   你的js文件最终是空的吗？

*   是`'/Applications/yuicompressor-2.4.7/build/yuicompress'`可执行脚本吗？

# javascript - 在输入框中键入时用字母图像替换文本

> ID：10202083
> 
> 赞同：0
> 
> 时间：2012-04-18T02:44:27.687
> 
> 标签：javascript, css

是否可以将在输入框中键入的文本替换为使用 javascript 或 CSS 表示字母的图像？例如，如果您有一个输入框，并且用户输入“U”，那么在输入框中显示的不是文本，而是在相应区域上放置一个代表 U 的 IMG？

这甚至可能吗？即使前面没有文本，您是否能够执行诸如在输入框中移动插入符号的位置之类的操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T02:52:47.673

我认为您可以做到，但是如果您不想实际显示文本，我不明白为什么您甚至会使用输入对象。如果您要使用图像显示自己的文本（我不知道为什么），那么您不妨构建自己的控件来响应字母、导航和删除键，并在键入字符时插入图像。

您需要为可以键入的每个字母设置一组预缓存图形，这样您就可以创建一个新的图像元素并在每次键入字符时插入它。

你为什么做这个？

# jquery - 在 Appengine 上使用 Django 上传 JQuery 文件

> ID：10202085
> 
> 赞同：1
> 
> 时间：2012-04-18T02:44:48.703
> 
> 标签：jquery, python, django, google-app-engine

我正在使用这个[插件](https://github.com/sigurdga/django-jquery-file-upload)用 jquery 上传多个文件，这个项目是为 Django 设计的，但现在我正在尝试使用 App Engine 数据存储区。

我已成功部署，并且在我尝试上传之前一直有效，服务器日志中显示一条错误消息：

> ValueError：App Engine 存储后端仅支持 BlobstoreFile 实例或文件属性为 BlobstoreFile 的 File 实例。

我认为错误是因为在 models.py 中它使用了 django 的模型类，即`models.FileField`，但 AppEngine 需要`db.BlobProperty()`.

这是项目链接：[https ://github.com/sigurdga/django-jquery-file-upload](https://github.com/sigurdga/django-jquery-file-upload)

这是我的 models.py 文件：

```
from django.db import models

class Picture(models.Model):

    # This is a small demo using FileField instead of ImageField, not
    # depending on PIL. You will probably want ImageField in your app.
    file = models.FileField(upload_to="pictures")
    slug = models.SlugField(max_length=50, blank=True)

    def __unicode__(self):
        return self.file

    @models.permalink
    def get_absolute_url(self):
        return ('upload-new', )

    def save(self, *args, **kwargs):
        self.slug = self.file.name
        super(Picture, self).save(*args, **kwargs) 
```

有什么想法可以解决吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T16:00:09.887

好的，这里有许多值得注意的事情，它们直接涉及 App Engine 工作原理的核心。

Django 的模型层仅设计用于关系数据库，如 MySQL、SQLite、Postgres、Oracle 等。

App Engine 的**数据存储**区是非关系型的，因此不能与原生的 Django 模型一起使用。但是，您可以使用[Django-nonrel](http://www.allbuttonspressed.com/projects/django-nonrel)，它充当 Django 模型和非关系数据库（如 Datastore）之间的转换层。

不幸的是，它仍然没有那么简单，因为 Django FileField 并不完全适合 AppEngine BlobProperty。有一些变通方法，但数据存储区无论如何都不能很好地提供图像。

# 存储图像

Google 推荐 2 种存储和提供文件（例如图像）的方式：**Blobstore**和**Google Cloud Storage**。

最终，存储上传图像的最佳方法是将它们存储在其中一个或其他中，然后在模型上记录指向图像的链接。因此，如果您将模型更改为：

```
class Picture(models.Model):

    file_url = models.URLField()
    slug = models.SlugField(max_length=50, blank=True)

    ... 
```

在您看来，使用[此处](https://developers.google.com/appengine/docs/python/blobstore/overview#Uploading_a_Blob)描述的技术将文件上传到 Blobstore，然后将`upload_url`模型上的 保存为`file_url`字段。

您可以使用 Google Cloud Storage 执行相同的操作，尽管 Blobstore 实际上是 App Engine 的一部分（而不是其他服务的 API），它为您提供了各种好处，如下所述。

**请注意，如上所述，这仅在您使用 Django-nonrel 时才有效，否则您将无法将 Django 模型保存到数据存储区。**

# 存储模型

使用 Django-nonrel，您可以将上面的模型按原样保存在数据存储中。但是，Django-nonrel 有许多需要习惯的警告，而且速度可能很慢。我个人不会将它推荐给新项目，但其他人可能不同意。

或者，您可以避开 Django 的模型层并使用[App Engine 自己的模型层](https://developers.google.com/appengine/docs/python/datastore/datamodeling)，该模型层旨在与数据存储区完美匹配。它包括用于引用 Blobstore 中的对象的特定属性类型。您的模型可能如下所示：

```
from google.appengine.ext.blobstore import blobstore
from google.appengine.ext import db

class Picture(db.Model):

    file = blobstore.BlobReferenceProperty()
    slug = db.StringProperty(required=False)

    ... 
```

它`BlobReferenceProperty`为您提供了比仅存储 URL 更多的功能，因为您可以通过此属性访问文件数据本身，以获取有关文件的数据（大小等）或处理它。如果您对仅存储 URL 感到满意，那么还有一个`db.LinkProperty`类似于 Django 的`models.URLField`.

当然，使用 App Engine 模型而不是 Django 模型会失去 Django 模型层的许多好处以及它提供的与 Django 的紧密集成。

## 谷歌云 SQL

如果您想使用 Django 模型但不想使用 Django-nonrel，还有另一种选择。如果您乐于放弃非关系型数据存储的优势，您可以改用[Google Cloud SQL](https://developers.google.com/cloud-sql/)。Django 原生支持 Cloud SQL。但是，Google Cloud SQL 目前处于有限预览阶段，因此您可能会发现很难访问。

如果您决定使用 Cloud SQL，如果您希望公开提供图像，则仍应将图像存储在 Blobstore 或 Google Cloud Storage 中，如上所述。

# html - 整个网站缩小以适应浏览器窗口？

> ID：10202087
> 
> 赞同：0
> 
> 时间：2012-04-18T02:45:01.527
> 
> 标签：html, css, browser, shrink

我希望我的 HTML 网站在加载到不同大小的浏览器窗口时自动完全缩小（图像、文本和所有内容）。

这是我正在谈论的一个例子。[http://www.studiojordan.com/site.html](http://www.studiojordan.com/site.html)

我知道这个网站是 flash 我想知道这是否可以用 CSS 完成？

我是编码新手，请帮助！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T02:54:34.897

就像艾略特说的，你不能那样做。除了`window.open()`解决方案之外，您还可以为您想要支持的任何分辨率设置不同的网站样式。这是通过**媒体查询实现的，媒体查询是****css3**的一部分，迄今为止每个主要浏览器都非常支持。[您可以在此处](http://www.css3.info/preview/media-queries/)、[此处](http://css-tricks.com/css-media-queries/)和[此处](http://webdesignerwall.com/tutorials/css3-media-queries)阅读更多关于它们的信息，仅举几个地方。此外，这也是现在所谓的[响应式网页设计](http://www.alistapart.com/articles/responsive-web-design/)的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T03:15:51.830

最接近的方法是使用相对单位（如`%`和`em`）调整和定位所有内容。但这有局限性，并且可能变得非常复杂。所以它实际上是媒体查询，正如朱利安建议的那样，或者什么都没有！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T02:49:05.220

不幸的是，用 CSS 或 Javascript 改变浏览器窗口的大小是不可能的。但是，您可以调整使用`window.open()`. 这不会有任何好处，因为您的浏览器的弹出窗口阻止程序会 [几乎总是] 阻止打开这样的窗口（我确实在某处读到，如果窗口打开是用户操作的直接结果，它不会被阻止，但是我不确定...）。

**tl;博士**：不，对不起。

# opencv - JavaCV：如何在二值图像中查找重要点

> ID：10202094
> 
> 赞同：1
> 
> 时间：2012-04-18T02:46:24.073
> 
> 标签：opencv, expression, binary-data, javacv

我的这个项目使用 JavaCV 实现时遇到问题。我想至少找到二进制图像中最顶部、最底部、最左侧和最右侧的点：

![快乐的嘴二进制图像](../Images/7e9765c7ae4f12890fbb0efc7ac852ea.png)

我的意思是这里的点是 (x,y) 坐标。我已经尝试实现 HoughLines （它只检测线但不检测曲线）和 cvFindContours 但我无法正确提取坐标。我还是个新手，如果我知道白线和背景的值是多少，那么也许我可以在图像周围循环。

有没有更简单的出路？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:24:46.130

您可以在此处使用循环来查找最左侧、右侧、顶部和底部的点。但是，您需要考虑如何制作智能循环。您可以循环遍历所有像素，但也可以使用更智能的方法。例如，最左边的点可能在左边的某个地方。因此，如果您使用从左到右的扫描线，您可能比仅扫描顶部-> 底部更有可能找到该像素。话虽如此，从图像中获取值很容易。

假设我们有一个`binaryImg`具有*n 个*通道的图像。在灰度图像的情况下，*n*应该是 1，但在彩色图像的情况下，n*应该*是 3。假设我们有索引`0 <= y < height`和。我们可以按如下方式计算像素（x，y）的值：`0 <= x < width``0 <= k < n`

```
((uchar *)(binaryImg->imageData + y*binaryImg->widthStep))[x*binaryImg->nChannels + k] 
```

由于灰度图像只有一个通道，我们可以使用以下方法检查像素是否为白色：

```
((uchar *)(binaryImg->imageData + y*binaryImg->widthStep))[x] == 255 
```

就速度而言，此解决方案将给出 O(n) 的最坏情况时间，但实际上您不必查看所有像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:19:32.753

如果你有一个点向量，`std::vector<cv::Point2f> pts`那么你可以使用 opencv`cv::boundingRect`方法来计算你的点集的右边界矩形。像这样使用它：

```
// this is your set of floating point (filled vector)
std::vector<cv::Point2f> pts;
// convert to matrix
cv::Mat ptsmat(pts);
// compute the bounding rectangle 
cv::Rect bbox = cv::boundingRect(ptsmat); 
```

我使用了 c++ opencv api 但你可以在 javacv 中使用相应的函数

# loops - 在 UML 通信图中表示循环

> ID：10202095
> 
> 赞同：3
> 
> 时间：2012-04-18T02:46:35.357
> 
> 标签：loops, uml, sequence-diagram

给定下面的序列图，如何在 UML 通信图中表示等价？

![在此处输入图像描述](../Images/3f96e67edfe10bd4b8c4821f5a375d1f.png)

**编辑** 这与如何在通信图中表达循环略有不同[？](https://stackoverflow.com/questions/2985601/how-to-express-loops-in-communication-diagrams)因为循环中有两条消息。

我看到了指向[http://www.smartdraw.com/resources/tutorials/uml-collaboration-diagrams/](http://www.smartdraw.com/resources/tutorials/uml-collaboration-diagrams/)的链接，其中提到了 * 循环。

那么使用：

```
1 * [i=1..5]：你好
2 * [i=1..5]：再见
```

我看到的问题是这似乎是模棱两可的：是 hello x 5 然后 bye x 5，还是 (hello bye) x 5。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T20:31:56.803

尝试聚合它们。改为介绍这些：

```
1 * [i=1..5] : hellobye
1.1 : hello
1.2 : bye 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-24T21:52:08.730

我不认为它可以做到。协作图的整个想法是在您进行简单的对象交互时使用它们。为什么不使用序列图？

# java - 需要 RSA 加密方面的帮助

> ID：10202096
> 
> 赞同：0
> 
> 时间：2012-04-18T02:46:36.153
> 
> 标签：java

我在下面的代码中有问题。
我已经为 RSA 创建了两种`ENCRYPT`方法`DECRYPT`。为了获得公钥和私钥，我使用`keyGenerator`and`KeyPair`来生成密钥。我们的前辈告诉我`KeyPair`应该在我们使用它的地方调用它，它不应该像在方法之前声明的那样。

我尝试为密钥生成创建单独的方法，但是当我在两个方法（`ENCRYPT`和`DECRYPT`）中调用该方法时，它会生成两个不匹配的不同密钥，因此解密不起作用。

我被告知要创建构造函数，然后在方法中调用它。我不知道如何准确地调用它以及它将如何工作。

请查看下面的代码并帮助我。谢谢你。

```
public class Encryption

{

static byte[] encrypted;    
public Encryption() throws NoSuchAlgorithmException, NoSuchProviderException
{
    KeyPair keypair;
    KeyPairGenerator keygenerator = KeyPairGenerator.getInstance("RSA");
    SecureRandom random = SecureRandom.getInstance("SHA1PRNG", "SUN");
    keygenerator.initialize(1024, random);
    keypair = keygenerator.generateKeyPair();
}

public String ENCRYPT(String Algorithm, String Data ) throws Exception
{
    String alg = Algorithm;
    String data=Data;
     if(alg.equals("RSA"))
    {   
        stack enc=new stack();
        //Don't know how to call constructor here
        PublicKey publicKey = keypair.getPublic();
        Cipher cipher;
        cipher = Cipher.getInstance("RSA");
        cipher.init(Cipher.ENCRYPT_MODE, publicKey);
         encrypted = cipher.doFinal(data.getBytes());
        System.out.println("Encrypted String -> " + asHex(encrypted));
    }

     return asHex(encrypted);
}
public String DECRYPT(String Algorithm, String Data ) throws Exception
{   
String alg = Algorithm;
String Decrypted="";
if(alg.equals("RSA"))
{   
    //have to call constructor here to get keypair value
    PrivateKey privateKey = keypair.getPrivate();
    Cipher cipher;  
    cipher = Cipher.getInstance("RSA");
    cipher.init(Cipher.DECRYPT_MODE, privateKey);
    byte[] dec = cipher.doFinal(encrypted);
    Decrypted=new String(dec);
    System.out.println("Decrypted String[RSA] -> " + Decrypted);

}

return Decrypted.toString();
}
public static String asHex (byte buf[])
{
    StringBuffer strbuf = new StringBuffer(buf.length * 2);
    int i;
    for (i = 0; i < buf.length; i++) 
    {
    if (((int) buf[i] & 0xff) < 0x10)
    strbuf.append("0");
    strbuf.append(Long.toString((int) buf[i] & 0xff, 16));
    }

    return strbuf.toString();
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T02:55:15.273

你想`keypair`成为一个私有领域：

```
private KeyPair keypair; 
```

在构造函数中初始化。初始化就是您已经拥有的：

```
keypair = keygenerator.generateKeyPair(); 
```

不要在构造函数中将其声明为局部变量。

# sql - 在嵌套连接中对两个不同表中的行求和。SQL 服务器

> ID：10202097
> 
> 赞同：0
> 
> 时间：2012-04-18T02:46:42.050
> 
> 标签：sql, sql-server, join

我有以下表格：

用户、节拍、流量、节拍_喜欢_不喜欢、流量_喜欢_不喜欢。这是关系。

用户 UserID 是一个主键，与 Beats 和 FLow 的 UserID 外键都有关系。Beats BeatID 与 Beats_Likes_Dislikes BeatID 有关系。它与流及其 like_dislike 表相同。我需要将 Beats 和 Flows 中的 Likes 总结为 Likes，将两个表中的 Dislikes 总结为 Dislikes。我有以下内容：

```
SELECT
ISNULL(SUM(Beats_Likes_Dislikes.[Like]) , 0) AS Likes, 
-- + ISNULL(SUM(Flows_Likes_Dislikes.[Like]), 0) AS Likes,
ISNULL(SUM(Beats_Likes_Dislikes.Dislike), 0) AS DisLikes 
-- + ISNULL(SUM(Flows_Likes_Dislikes.DisLike), 0) AS DisLikes
From Users 
INNER JOIN Beats 
ON Users.UserID = Beats.UserID
INNER JOIN Beats_Likes_Dislikes ON Beats.BeatID= Beats_Likes_Dislikes.BeatID
--INNER JOIN Flows ON Users.UserID = Flows.UserID
--INNER JOIN Flows_Likes_Dislikes ON Flows.FlowID=Flows_Likes_Dislikes.FlowID
Where Users.UserID = '110' 
```

这很好地返回了节拍的喜欢和不喜欢（单独的行）的总和。我需要从流表中获取相同的数据。您会看到我已经注释掉了流表的部分，因为数字没有相加。我在这里做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T03:03:32.553

由于无意的多对多连接，您的号码可能会关闭。例如，每个独特的用户可以有多个节拍，每个独特的节拍可以有多个喜欢或不喜欢。没关系，但是如果您随后尝试水平连接另一组表，您最终会创建太多行，因为每个用户/流/流率对的 ON 条件不止一次。

要纠正这个问题，您可能需要分成 2 个查询，然后加入结果

```
select 
coalesce(beat_likes,0)+coalesce(flow_likes,0) as total_likes,
coalesce(beat_dislikes,0)+coalesce(flow_dislikes,0) as total_dislikes
FROM
(    
SELECT 
u.UserID,
SUM(bld.Like) as beat_likes,
SUM(bld.Dislike) as beat_dislikes 
From Users u
    INNER JOIN Beats b
    ON u.UserID = b.UserID
        INNER JOIN Beats_Likes_Dislikes bld
        ON b.BeatID= bld.BeatID
Where u.UserID = '110'
GROUP BY u.UserID
) t1
JOIN 
(
SELECT 
u.UserID,
SUM(fld.Like) as flow_likes,
SUM(fld.Dislike) as flow_dislikes 
From Users u
    INNER JOIN Flows f
    ON u.UserID = f.UserID
        INNER JOIN Flows_Likes_Dislikes fld
        ON f.FlowID= fld.FlowID
Where u.UserID = '110'
GROUP BY u.UserID
) t2
on t1.UserID =t2.UserID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T02:51:54.503

根据您的具体要求，您可能需要使用 LEFT OUTER JOIN 而不是 INNER JOIN。 [加入类型的信息](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)......这就是为什么你的号码是关闭的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T02:59:17.390

试试这个：

```
SELECT SUM(likes) as totalLikes, 
       SUM(dislikes) as totalDislikes 
  FROM (SELECT Isnull(SUM(beats_likes_dislikes.[Like]), 0)  AS likes, 
               Isnull(SUM(beats_likes_dislikes.dislike), 0) AS dislikes 
          FROM users 
         INNER JOIN beats 
               ON users.userid = beats.userid 
         INNER JOIN beats_likes_dislikes 
               ON beats.beatid = beats_likes_dislikes.beatid 
        WHERE  users.userid = '110' 

        UNION ALL 

        SELECT Isnull(SUM(flows_likes_dislikes.[Like]), 0)  AS likes, 
               Isnull(SUM(flows_likes_dislikes.dislike), 0) AS dislikes 
          FROM users 
         INNER JOIN flows 
               ON users.userid = flows.userid 
         INNER JOIN flows_likes_dislikes 
               ON flows.flowid = flows_likes_dislikes.flowid 
         WHERE users.userid = '110') AS t 
```

它应该为您提供用户的总喜欢和不喜欢。

# javascript - 下拉菜单中的奇怪锚点

> ID：10202098
> 
> 赞同：0
> 
> 时间：2012-04-18T02:46:44.970
> 
> 标签：javascript, html, css, frameworks, twitter-bootstrap

尝试使用 Twitter Bootstrap 的 (2.0) 下拉菜单。

但不知何故，它添加了额外的空`a`元素，使它看起来很奇怪：

![下拉奇怪的灰线](../Images/e59684fe754f49d99d0820a7ccd85edb.png)

请参阅[示例](http://jsfiddle.net/rCFGY/)。

问题：

1.  为什么会发生（我做错了什么）？
2.  如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T03:02:42.240

您没有正确关闭“联系人”菜单项，因此标记显示就好像下拉菜单是您的主链接的一部分。只需在div`</a>`的末尾添加一个结束标签，它就可以工作：`.caret`

```
<ul class='nav nav-tabs'>
  <li><a href="/dashboard">Dashboard</a></li>
  <li class='dropdown'>
    <a class='dropdown-toggle' data-toggle='dropdown' href='#'>
      Contacts
        <b class='caret'></b></a> /* here */
      <ul class='dropdown-menu'>
        <li><a href="/x">Staff</a></li>
        <li><a href="/x">Networks</a></li>
      </ul>
    </a>
  </li>
</ul> 
```

演示：http: [//jsfiddle.net/rCFGY/1/](http://jsfiddle.net/rCFGY/1/)

# memcached - 如何在 memcached 客户端和服务器之间实现 280qps？

> ID：10202099
> 
> 赞同：1
> 
> 时间：2012-04-18T02:46:49.043
> 
> 标签：memcached, spymemcached

我选择 Spymemcached 作为 memcached java 客户端，因为我发现它的 set 方法没有回复似乎比其他 memcached 客户端快十倍。

我的代码：

> memcachedClient.set(key,0,value);

代替：

> memcachedClient.set(key,0,value).get();

我确实关心时间成本比设置的结果要多得多。

现在看起来快了很多，但内存泄漏很可能发生在 memcached 客户端上。

当我使用 memcached 服务器在同一台计算机上运行 4 时，它为每个 memcached 客户端进程分配大约 2G 内存。8核cpu和4G内存几乎全部消耗。本地网络接口“lo”只有大约 0.2Gbits 每秒。

如何降低 cpu 和内存消耗率，甚至加快 memcached qps。

我需要来自 memcached 客户端的 280k qps，每个 qps 发送具有 50B 键长度和 500B 值长度的数据。现在我尝试在本地主机上启动 memcached 客户端，以避免网络接口带宽的限制。四个memcahced进程，每个运行6个线程，现在我几乎可以实现180qps，这与我的目标相差甚远，cpu和内存成为限制。而且我还需要在包含真正的 java memcached 客户端的同一台计算机上运行storm。所以我当然不能让 memcached 客户端占用核心资源。

如何减少cpu和内存消耗，或者如何实现单台计算机上的多个java memcached客户端与分布式memcached服务器之间的280qps。

获取和设置都占用了一半的查询。也许我可以尝试 getMulti 每次获取 50 个键。但问题仍然存在。

期待您的回复。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T05:09:20.990

您可能想查看[https://groups.google.com/forum/?fromgroups#!topic/memcached/n8zLJRyYNY4](https://groups.google.com/forum/?fromgroups#!topic/memcached/n8zLJRyYNY4)以使用 memcached 优化多获取查询。

# http - 我可以使用 :// 代替 http:// 或 https:// 吗？

> ID：10202100
> 
> 赞同：0
> 
> 时间：2012-04-18T02:46:54.383
> 
> 标签：http, https, protocols

> **可能重复：**
> [我可以将所有链接都更改为 // 吗？](https://stackoverflow.com/questions/4831741/can-i-change-all-my-http-links-to-just)

在我的开发过程中，是否可以在所有链接上只使用 :// ？例如，我想输出

```
<select><option value="://my-page.html">Goto Page</option></select> 
```

不是

```
<select><option value="http://my-page.html">Goto Page</option></select> 
```

或者

```
<select><option value="https://my-page.html">Goto Page</option></select> 
```

我以前在某个地方看到过这个，想知道这样做是否可以，因为它可以在开发过程中节省大量时间。

此外，根据用户进入的协议，他们将能够在我的整个网站上保持该协议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T02:52:52.860

我不确定您为什么要`<option value`用作示例。在这种情况下，浏览器不会将其识别为 URL，因此您必须在使用这些值的位置手动添加协议 (http/https)。`<option value`从浏览器的角度来看，它只是一个文本字符串。

但是对于浏览器知道的 URL 值，您可以实现您想要的。例如：

```
<img src="/images/1.jpg" />
<script src="/js/jquery.js" /> 
```

通过放入`/`路径的开头，您告诉浏览器该路径是绝对的，这意味着它从您网站的根目录开始。

# forms - 表单输入上的微数据 itemprop？

> ID：10202106
> 
> 赞同：4
> 
> 时间：2012-04-18T02:47:48.693
> 
> 标签：forms, html, microdata

我一直在学习 HTML5 微数据，我想尝试在我的应用程序中使用它们。我的应用程序碰巧总是将数据显示为表单。从我通过阅读微数据规范可以看出，它似乎不适用于 HTML 表单输入，是真的吗？

例如，以下属性对`input`元素是否有效：

```
<input itemprop="fn" type="text" value="Oliver Twist"> 
```

我希望解析器想要获取输入字段的 value 属性......但这似乎不是一个有效的案例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T06:58:39.880

是的，这似乎是正确的。虽然 itemprop 属性在元素上完全有效`input`，但属性值是元素的 textContent，因为`input`它是一个 void 元素，所以它始终是空字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T19:04:07.897

微数据旨在让其他开发人员更容易从您的站点中抓取数据，以便在其他应用程序中重复使用。例如，使用微数据标记您的内容可以让 Google 更轻松地处理您的数据并将其显示在 Rich Snippets 中。

它根本不打算与表单处理进行交互，这不是用例的一部分。

# jquery - 在创建标签时添加 onclick 事件

> ID：10202113
> 
> 赞同：0
> 
> 时间：2012-04-18T02:48:30.397
> 
> 标签：jquery

我正在动态创建一个跨度标签，并想向它添加 onclick 事件。

```
$('<span>', {

    'onclick': //call some  method -> $.hello('dsfds',90),
    'class' : 'rightArrow'
}).appendTo($(elm).find('div').eq(2)); 
```

如何在上面的代码中绑定 onclick？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T02:51:45.207

```
$('<sapn class="rightArrow"> Click of you dare</span>').click(function() {
    alert('clicked!');
}).appendTo($(elm).find('div').eq(2)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T02:52:46.757

```
$('<span>').bind('click', function() {
  //call some  method -> $.hello('dsfds',90)
})
.addClass('rightArrow')
.appendTo($(elm).find('div').eq(2)); 
```

# java - 如何在java中比较文件的扩展名与不同的扩展名

> ID：10202115
> 
> 赞同：-1
> 
> 时间：2012-04-18T02:48:46.813
> 
> 标签：java

我想根据我在java中的要求将检索到的文件扩展名与不同的有效扩展名进行比较，例如，

```
 CSVReader reader1 = new CSVReader(reader), ';', '\'', 1);
    try{
        while ((lNextLine = reader.readNext()) != null) {
            for(int i = 0;i < lNextLine.length; i++){
                String lFilename = lNextLine[0];
                String[] lext = lFilename.split("\\.");
                if(lext[1].equals("jpeg")||lext[1].equals("wmv")||lext[1].equals("doc")....){
                    return true;
                }
                else{
                    return false;
                }
            }
        }
    } 
```

谢谢，

拉吉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T02:52:29.120

将要检查的所有扩展名存储在 a 中`static HashSet`，然后使用`contains(...)`O **(1)**操作。

```
static Set<String> supportedExtensions=new HashSet<String>();

    static
    {
      //populate supportedExtensions
    }

    while ((lNextLine = reader.readNext()) != null) 
    {
      for(int i = 0;i < lNextLine.length; i++)
      {
        String lFilename = lNextLine[0];
        String[] lext = lFilename.split("\\.");
        return supportedExtensions.contains(lext[lext.length - 1]);
      }
    } 
```

# c# - 可视化对象状态的最佳方法是什么？

> ID：10202124
> 
> 赞同：1
> 
> 时间：2012-04-18T02:51:50.163
> 
> 标签：c#, wpf, user-interface

我有一个 WPF 网格绑定了一些对象。我对每个对象有 2 个状态，`State1`并且`State2`. `State1`对应于一列的值，根据值，我在红色、黄色或白色之间更改行颜色。

我有另一个状态，`State2`对应于该行是脏的、等待的还是同步到远程对象。我不能使用行颜色来表示`State2`，因为它已经被使用了。通知用户状态的最佳方式是`State2`什么？

我正在考虑添加一个带有矩形的列并更改它们的颜色，但`State1`颜色变化也会干扰列颜色。我在想的另一种方法是更改​​行名的颜色。这可能吗。人们如何在他们的应用程序中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T02:55:43.323

我认为最简单的事情就是创建一个名为“state2”或其他名称的列，并使其简单地显示与状态信息对应的单词。

然后，最重要的是，您可以选择添加随文本变化的颜色提示。

这样，您就不必担心用户无法说出他/她正在查看的信息的确切价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T03:02:45.113

在不占用太多空间的情况下区分事物的最简单方法是图标。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T03:54:24.247

为一行着色有两个部分：背景颜色和前景（文本）颜色。

背景颜色变化为红色、黄色或白色。如果您可以使用粗体字体，那么字体颜色可以提供信息。黑色表示干净，灰色表示脏也可以。脏行的文本会显得更轻，因此它们会脱颖而出。

# asp.net - 如何在 ASP.Net 中获取客户端计算机标识符？

> ID：10202126
> 
> 赞同：2
> 
> 时间：2012-04-18T02:51:55.490
> 
> 标签：asp.net

谁能告诉我如何/是否可以在我的 asp.net/或 javascript 中获取客户端计算机标识符？（客户端在网络而不是本地Intranet）

（什么是客户端计算机标识符？我认为例如：客户端计算机 MAC 地址，或任何硬件 GUID（如 CPU、网卡等）？）

或者是否有任何简化的方法可以在 HTML5 中做到这一点？

或者我是否可以通过 ActiveX 获取客户端计算机标识符？（以及如何使用ActiveX，任何人都可以给我一些参考，如果activeX可以使用C#构建很好。）

（这是一个业务系统，客户被批准我们获取他们的客户端计算机硬件标识符，那么我在 asp.net 中该怎么做？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T03:13:58.340

尝试以下脚本，据我所知，它可能需要用户身份验证才能运行 ActiveX 和 ActiveX 仅适用于 IE。

```
<!DOCTYPE  HTML  PUBLIC  "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
      <head>
            <title></title>
            <meta name="GENERATOR" content="Microsoft Visual Studio .NET 7.1">
            <meta name="vs_targetSchema" content="http://schemas.
microsoft.com/intellisense/ie5">
            <script id="clientEventHandlersJS" language="javascript">
<!--

function Button1_onclick() {
      var locator = new ActiveXObject("WbemScripting.SWbemLocator");
      var service = locator.ConnectServer(".");
      var properties = service.ExecQuery("SELECT * FROM Win32_NetworkAdapterConfiguration");
      var e = new Enumerator (properties);
      document.write("<table border=1>");
      dispHeading();
      for (;!e.atEnd();e.moveNext ())
      {
            var p = e.item ();
            document.write("<tr>");
            document.write("<td>" + p.Caption + "</td>");
            document.write("<td>" + p.IPFilterSecurityEnabled + "</td>");
            document.write("<td>" + p.IPPortSecurityEnabled + "</td>");
            document.write("<td>" + p.IPXAddress + "</td>");
            document.write("<td>" + p.IPXEnabled + "</td>");
            document.write("<td>" + p.IPXNetworkNumber + "</td>");
            document.write("<td>" + p.MACAddress + "</td>");
            document.write("<td>" + p.WINSPrimaryServer + "</td>");
            document.write("<td>" + p.WINSSecondaryServer + "</td>");
            document.write("</tr>");
      }
      document.write("</table>");
}

function dispHeading()
{
      document.write("<thead>");
      document.write("<td>Caption</td>");
      document.write("<td>IPFilterSecurityEnabled</td>");
        document.write("<td>IPPortSecurityEnabled</td>");
        document.write("<td>IPXAddress</td>");
      document.write("<td>IPXEnabled</td>");
      document.write("<td>IPXNetworkNumber</td>");
      document.write("<td>MACAddress</td>");
      document.write("<td>WINSPrimaryServer</td>");
      document.write("<td>WINSSecondaryServer</td>");
      document.write("</thead>");
}

//-->
            </script>
      </head>
      <body>
            <INPUT id="Button1" type="button" value="Button" 
name="Button1" language="javascript" onclick="return Button1_onclick()">
      </body>
</html> 
```

# php - 循环遍历数组更新值PHP

> ID：10202129
> 
> 赞同：2
> 
> 时间：2012-04-18T02:52:32.733
> 
> 标签：php, arrays, loops

说我在 php 中有一个这样的数组

```
$info['name'] = 'test %value%';
$info['city'] = 'city test %value%';
$info['other'] = '%value% city test'; 
```

我要做的就是遍历这个数组，并用提供的字符串替换 %value% 的所有实例，将其保存到同一个数组中。

最好的方法是什么？:)

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-18T02:54:16.727

```
foreach ($info as $key => $value)
  $info[$key] = str_replace('%value%', 'MyValue', $value); 
```

演示：http: [//ideone.com/65F3L](http://ideone.com/65F3L)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T03:03:47.610

这对我来说似乎是最干净的方式，但它需要 PHP 5.3 或更高版本：

```
$info = array_map(function($x) use ($newValue){ 
    return str_replace('%value%', $newValue, $x);
}, $info); 
```

[**键盘**](http://codepad.viper-7.com/NeSXH7)

# delphi - 如何在 WS_EX_LAYERED 表单上绘制控件？

> ID：10202130
> 
> 赞同：6
> 
> 时间：2012-04-18T02:52:44.370
> 
> 标签：delphi, winapi

我正在使用此代码绘制纯色的透明形式。

```
uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls;

type
  TForm1 = class(TForm)
    Button1: TButton;
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
    procedure WMNCHitTest(var Message: TWMNCHitTest); message WM_NCHITTEST;
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
var
  BlendFunction: TBlendFunction;
  BitmapPos: TPoint;
  BitmapSize: TSize;
  exStyle: DWORD;
  Bitmap: TBitmap;
begin
  exStyle := GetWindowLongA(Handle, GWL_EXSTYLE);
  if (exStyle and WS_EX_LAYERED = 0) then
    SetWindowLong(Handle, GWL_EXSTYLE, exStyle or WS_EX_LAYERED);

  Bitmap := TBitmap.Create;
  try
    Bitmap.PixelFormat := pf32bit;
    Bitmap.SetSize(Width, Height);
    Bitmap.Canvas.Brush.Color:=clRed;
    Bitmap.Canvas.FillRect(Rect(0,0, Bitmap.Width, Bitmap.Height));
    BitmapPos := Point(0, 0);
    BitmapSize.cx := Bitmap.Width;
    BitmapSize.cy := Bitmap.Height;
    BlendFunction.BlendOp := AC_SRC_OVER;
    BlendFunction.BlendFlags := 0;
    BlendFunction.SourceConstantAlpha := 150;
    BlendFunction.AlphaFormat := 0;

    UpdateLayeredWindow(Handle, 0, nil, @BitmapSize, Bitmap.Canvas.Handle,
      @BitmapPos, 0, @BlendFunction, ULW_ALPHA);

    Show;
  finally
    Bitmap.Free;
  end;
end;

procedure TForm1.WMNCHitTest(var Message: TWMNCHitTest);
begin
  Message.Result := HTCAPTION;
end;

end. 
```

但是没有任何控件出现在表单中，我已经阅读了这个问题[UpdateLayeredWindow with normal canvas/textout](https://stackoverflow.com/questions/8555484/updatelayeredwindow-with-normal-canvas-textout)但使用`SetLayeredWindowAttributes`（如接受的答案建议）与 LWA_COLORKEY 或 LWA_ALPHA 不起作用。

可以使用该`UpdateLayeredWindow`功能以分层形式绘制控件（TButton，TEdit）吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T14:57:43.793

我在对该问题的评论中提到的文档有点晦涩。下面来自[Using Layered Windows](http://msdn.microsoft.com/en-us/library/ms997507#layerwin_topic2a) (msdn) 的引用更加明确，*如果你要使用`UpdateLayeredWindows`，你将无法使用 VCL 提供的内置绘画框架*。这意味着，您只会看到您在位图上绘制的内容。

> 要使用**UpdateLayeredWindow**，必须将分层窗口的可视位呈现为兼容的位图。然后，通过兼容的 GDI 设备上下文，将位图 连同所需的颜色键和 alpha 混合信息一起提供给**UpdateLayeredWindow API。**位图还可以包含每个像素的 Alpha 信息。
> 
> 请注意，当使用**UpdateLayeredWindow**时，应用程序不需要响应 WM_PAINT 或其他绘画消息，因为它已经为窗口提供了可视化表示，并且系统将负责存储该图像、合成它并在屏幕。 **UpdateLayeredWindow**非常强大，但它通常需要修改现有 Win32 应用程序的绘制方式。

以下代码试图演示如何`PaintTo`在应用视觉效果之前使用表单的方法使 VCL 为您预渲染位图（（不是我建议使用此方法，只是试图展示它会采取什么..）。另外请注意，如果您要做的只是*“制作纯色半透明形式*”，TLama 在问题评论中的建议是去。

我已将代码放入`WM_PRINTCLIENT`一个*实时*表单中。不过这有点毫无意义，因为并非所有需要视觉指示的操作都会触发“WM_PRINTCLIENT”。例如在下面的项目中，单击按钮或复选框将反映在表单外观上，但在备忘录中写入则不会。

```
type
  TForm1 = class(TForm)
    Button1: TButton;
    Memo1: TMemo;
    CheckBox1: TCheckBox;
    Label1: TLabel;
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  protected
    procedure WMPrintClient(var Msg: TWMPrintClient); message WM_PRINTCLIENT;
  private
    FBitmap: TBitmap;
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

const
  Alpha = $D0;

procedure TForm1.FormCreate(Sender: TObject);
begin
  FBitmap := TBitmap.Create;
  FBitmap.PixelFormat := pf32bit;
  FBitmap.SetSize(Width, Height);
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  FBitmap.Free;
end;

procedure TForm1.WMPrintClient(var Msg: TWMPrintClient);
var
  exStyle: DWORD;
  ClientOrg: TPoint;
  X, Y: Integer;
  Pixel: PRGBQuad;
  BlendFunction: TBlendFunction;
  BitmapPos: TPoint;
  BitmapSize: TSize;
begin
  exStyle := GetWindowLongA(Handle, GWL_EXSTYLE);
  if (exStyle and WS_EX_LAYERED = 0) then
    SetWindowLong(Handle, GWL_EXSTYLE, exStyle or WS_EX_LAYERED);

  // for non-client araea only
  FBitmap.Canvas.Brush.Color := clBtnShadow;
  FBitmap.Canvas.FillRect(Rect(0,0, FBitmap.Width, FBitmap.Height));

  // paste the client image
  ClientOrg.X := ClientOrigin.X - Left;
  ClientOrg.Y := ClientOrigin.Y - Top;
  FBitmap.Canvas.Lock;
  PaintTo(FBitmap.Canvas.Handle, ClientOrg.X, ClientOrg.Y);
  FBitmap.Canvas.Unlock;

  // set alpha and have pre-multiplied color values
  for Y := 0 to (FBitmap.Height - 1) do begin
    Pixel := FBitmap.ScanLine[Y];
    for X := 0 to (FBitmap.Width - 1) do begin
      Pixel.rgbRed := MulDiv($FF, Alpha, $FF);    // red tint
      Pixel.rgbGreen := MulDiv(Pixel.rgbGreen, Alpha, $FF);
      Pixel.rgbBlue := MulDiv(Pixel.rgbBlue, Alpha, $FF);
      Pixel.rgbReserved := Alpha;
      Inc(Pixel);
    end;
  end;

  BlendFunction.BlendOp := AC_SRC_OVER;
  BlendFunction.BlendFlags := 0;
  BlendFunction.SourceConstantAlpha := 255;
  BlendFunction.AlphaFormat := AC_SRC_ALPHA;

  BitmapPos := Point(0, 0);
  BitmapSize.cx := Width;
  BitmapSize.cy := Height;
  UpdateLayeredWindow(Handle, 0, nil, @BitmapSize, FBitmap.Canvas.Handle,
      @BitmapPos, 0, @BlendFunction, ULW_ALPHA);
end; 
```

上面的表格如下所示：
![半透明形式](../Images/35286bdb5321587b32d712efc2b59107.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T04:42:04.423

您始终可以在表单上创建表单。这不是最快乐的解决方案，但它有效。我相信解决这个问题的最好方法是使用 GDI+ 或 D2D，但不幸的是，我无法弄清楚，所以我采用了“form on form”的方法：

**分层形式：**

```
unit uLayeredForm;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Classes, System.Types,
  Vcl.Graphics, Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.Imaging.PngImage;

type
  TfrmLayered = class(TForm)
    procedure FormActivate(Sender: TObject);
  private
    FParentForm: TForm;
    procedure SetAlphaBackground(const AResourceName: String);
  public
    constructor Create(AOwner: TComponent; const ABitmapResourceName: String); reintroduce;
    procedure UpdatePosition;
  end;

var
  frmLayered: TfrmLayered;

implementation

{$R *.dfm}

constructor TfrmLayered.Create(AOwner: TComponent; const ABitmapResourceName: String);
begin
  inherited Create(AOwner);

  FParentForm := AOwner as TForm;
  SetAlphaBackground(ABitmapResourceName);
end;

procedure TfrmLayered.FormActivate(Sender: TObject);
begin
  if (Active) and (FParentForm.Visible) and (Assigned(FParentForm)) then
    FParentForm.SetFocus;
end;

procedure TfrmLayered.UpdatePosition;
begin
  if Assigned(FParentForm) then
  begin
    Left := FParentForm.Left - (ClientWidth - FParentForm.ClientWidth) div 2 - 1;
    Top := FParentForm.Top - (ClientHeight - FParentForm.ClientHeight) div 2 - 1;
  end;
end;

procedure TfrmLayered.SetAlphaBackground(const AResourceName: String);
var
  blend_func: TBlendFunction;
  imgpos    : TPoint;
  imgsize   : TSize;
  exStyle   : DWORD;
  png       : TPngImage;
  bmp       : TBitmap;
begin
  // enable window layering
  exStyle := GetWindowLongA(Handle, GWL_EXSTYLE);
  if ((exStyle and WS_EX_LAYERED) = 0) then
    SetWindowLong(Handle, GWL_EXSTYLE, exStyle or WS_EX_LAYERED);

  png := TPngImage.Create;
  try
    png.LoadFromResourceName(HInstance, AResourceName);

    bmp := TBitmap.Create;
    try
      bmp.Assign(png);

      // resize the form
      ClientWidth := bmp.Width;
      ClientHeight := bmp.Height;

      // position image on form
      imgpos := Point(0, 0);
      imgsize.cx := bmp.Width;
      imgsize.cy := bmp.Height;

      // setup alpha blending parameters
      blend_func.BlendOp := AC_SRC_OVER;
      blend_func.BlendFlags := 0;
      blend_func.SourceConstantAlpha := 255;
      blend_func.AlphaFormat := AC_SRC_ALPHA;

      UpdateLayeredWindow(Handle, 0, nil, @imgsize, bmp.Canvas.Handle, @imgpos, 0, @blend_func, ULW_ALPHA);
    finally
      bmp.Free;
    end;
  finally
    png.Free;
  end;
end;

end. 
```

**主要形式：**

```
unit uMainForm;

interface

uses
  uLayeredForm, 
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.ExtCtrls;

type
  TfrmMain = class(TForm)
    imgClose: TImage;
    procedure FormCreate(Sender: TObject);
    procedure FormMouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
    procedure FormShow(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
    procedure FormHide(Sender: TObject);
    procedure imgCloseClick(Sender: TObject);
  private
    FLayeredForm: TfrmLayered;
  protected
    procedure WMMove(var AMessage: TMessage); message WM_MOVE;
  public
  end;

var
  frmMain: TfrmMain;

implementation

{$R *.dfm}

uses
  uCommon, Vcl.Themes, Vcl.Styles.FormStyleHooks;

procedure TfrmMain.FormCreate(Sender: TObject);
begin
  {$IFDEF DEBUG} ReportMemoryLeaksOnShutdown := TRUE; {$ENDIF}

  FLayeredForm := TfrmLayered.Create(self, 'MainBackground');
  FLayeredForm.Visible := TRUE;
end;

procedure TfrmMain.FormDestroy(Sender: TObject);
begin
  FLayeredForm.Free;
end;

procedure TfrmMain.FormHide(Sender: TObject);
begin
  FLayeredForm.Hide;
end;

procedure TfrmMain.WMMove(var AMessage: TMessage);
begin
  if Assigned(FLayeredForm) then
    FLayeredForm.UpdatePosition;

  inherited;
end;

procedure TfrmMain.FormMouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
begin
  FormMove(self, Button, Shift, X, Y);
end;

procedure TfrmMain.FormShow(Sender: TObject);
begin
  if Assigned(FLayeredForm) then
  begin
    FLayeredForm.Show;
    FLayeredForm.UpdatePosition;
  end;
end;

procedure TfrmMain.imgCloseClick(Sender: TObject);
begin
  Close;
end;

initialization
  TStyleManager.Engine.RegisterStyleHook(TfrmMain, TFormStyleHookBackground);
  TFormStyleHookBackground.BackGroundSettings.Color := clBlack;
  TFormStyleHookBackground.BackGroundSettings.Enabled := TRUE;

end. 
```

如您所见，您必须做一些手动工作才能使两个表单表现得像一个，但是这段代码应该可以帮助您入门。

由于我需要具有平滑圆形边框的表格，因此我得到了以下屏幕截图。我将顶部表格涂成灰色，特别是为了这篇文章，以便更容易区分它和分层黑色表格：

![示例 WS_EX_LAYERED 表单](../Images/eec1db4005c617d293e8804bf7a04334.png)

您可以清楚地看到带锯​​齿的灰色表单边框（由[SetWindowRgn()](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145102%28v=vs.85%29.aspx)和 CreateRoundRectRgn() API 制作）和抗锯齿黑色表单边框之间的区别。

# r - 在 r 中用“/”分隔符将列分成两部分

> ID：10202141
> 
> 赞同：4
> 
> 时间：2012-04-18T02:53:36.110
> 
> 标签：r, split, dataframe

我有以下类型的数据，尽管 data.frame 非常大。

```
A1 <- c("A/B", "A/A", "B/B", "A/A")
B1 <- c("B/B", "C/C", "C/B", "D/A")
C1 <- c("B/B", "C/C", "C/B", "D/A")
mydf <- data.frame (A1, B1, C1)
mymat <- as.matrix (mydf)
mymat
         A1    B1    C1   
[1,] "A/B" "B/B" "B/B"
[2,] "A/A" "C/C" "C/C"
[3,] "B/B" "C/B" "C/B"
[4,] "A/A" "D/A" "D/A" 
```

我想将每列分成两个“/”是sperator。因此输出看起来像：

```
 A1a  A1b   B1a  B1b    C1a  C1b   
[1,] A   B      B    B     B     B 
[2,] A   A      C    C     C     C
[3,] B   B      C    B     C     B
[4,] A   A      D    A     D     A 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T04:10:23.973

这是一个稍微有点迂回的方法。在字符之间添加“/”并将其作为分隔符读入：

```
splitdf <- read.table(text=capture.output(write.table(mydf, quote=FALSE, 
                                        sep="/",col.names=FALSE,row.names=FALSE)),
                       sep="/")
names(splitdf) <- paste( rep(names(mydf), each=2), c("a","b"), sep="")
 splitdf
#------------
  A1a A1b B1a B1b C1a C1b
1   A   B   B   B   B   B
2   A   A   C   C   C   C
3   B   B   C   B   C   B
4   A   A   D   A   D   A 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T03:09:40.070

这是使用 reshape2 的 colsplit 的一种解决方案：

```
require(reshape2)
mymat <- as.data.frame(mymat)

LS <- lapply(seq_along(mymat), function(i){
    colsplit(mymat[, i], "/", paste0(colnames(mymat)[i], letters[1:2]))
    }
)

do.call('cbind', LS) 
```

产生：

```
 A1a A1b B1a B1b C1a C1b
1   A   B   B   B   B   B
2   A   A   C   C   C   C
3   B   B   C   B   C   B
4   A   A   D   A   D   A 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-18T03:24:42.280

以下应该在基础 R 中执行。

```
l <- apply(mymat, 2, function(m) data.frame(matrix(unlist(strsplit(m, '/')), ncol = 2, byrow = TRUE)))
do.call(cbind, l) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-26T16:40:31.503

在我的“splitstackshape”包的无耻自我推销中，这是另一个解决方案：

您的数据（停在`data.frame`舞台上，而不是`matrix`像您在问题中所做的那样将其转换为 a ）：

```
A1 <- c("A/B", "A/A", "B/B", "A/A")
B1 <- c("B/B", "C/C", "C/B", "D/A")
C1 <- c("B/B", "C/C", "C/B", "D/A")
mydf <- data.frame (A1, B1, C1)
mydf
#    A1  B1  C1
# 1 A/B B/B B/B
# 2 A/A C/C C/C
# 3 B/B C/B C/B
# 4 A/A D/A D/A 
```

安装并加载“splitstackshape”包，并使用“concat.split.multiple”（它可以让你一次拆分多个列）来获得你想要的输出：

```
## install.packages("splitstackshape")
library(splitstackshape)
concat.split.multiple(mydf, 1:3, "/")
#   A1_1 A1_2 B1_1 B1_2 C1_1 C1_2
# 1    A    B    B    B    B    B
# 2    A    A    C    C    C    C
# 3    B    B    C    B    C    B
# 4    A    A    D    A    D    A 
```

# wcf - 点对点和端到端安全有什么区别？

> ID：10202143
> 
> 赞同：10
> 
> 时间：2012-04-18T02:53:50.153
> 
> 标签：wcf

虽然我从事过 WCF，但我有一个简单的疑问，有人可以解释一下点对点和端到端安全性之间的区别吗？

谢谢你，阿伦

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-18T17:40:01.663

点对点 - 一个直接连接

![在此处输入图像描述](../Images/f65d284953214a73621841e5bde25587.png)

端到端 - 与中间事物的连接

![在此处输入图像描述](../Images/4008e929cf779af54403710ecb001d5c.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-08-04T09:01:36.473

点对点是传输层加密。数据在传输层加密，例如（Https）

端到端是您在点击传输之前加密并在之后解密的加密。例如 PGP。

见[https://en.wikipedia.org/wiki/Point_to_Point_Encryption](https://en.wikipedia.org/wiki/Point_to_Point_Encryption) 和[https://en.wikipedia.org/wiki/End-to-end_encryption](https://en.wikipedia.org/wiki/End-to-end_encryption)

Wiki 听起来好像点对点更好，这是由于已在 TLS（传输层安全性）中投入的工作，因此您的 https 流量是安全的。端到端可能同样有效（例如 PGP），但您确实需要弄清楚如何传输密钥以进行解密，这可能是一个薄弱环节。

为了最安全，您将同时使用：

1.  加密（使用密钥）
2.  通过 Https 发送
3.  收到
4.  解密（使用密钥）

# highcharts - 使用 DotNet.Highcharts 添加其他数据点

> ID：10202144
> 
> 赞同：4
> 
> 时间：2012-04-18T02:53:53.473
> 
> 标签：highcharts

我正在学习如何在 Visual Studio 中使用 HighCharts。我正在使用 DotNet.Highcharts 让它变得更容易。我有一个系列，其 y 值为 totalAttempts 和整数，x 值为 DateTime。该系列是样条图。我想添加其他数据。

如何使用 DotNet.Highcharts 向每个点添加其他数据？

**更新**

我有一个系列列表，用于将所有需要的系列添加到：

```
List<Series> mySeries = new List<Series>(); 
```

我使用数组列表来保存所需的每个数据点

```
var myResults = new List<object[]>(); 
```

然后我多次循环查询结果以收集系列中每个点的数据。这是我使用的代码：

```
myResults.Add(new object[] 
{ 
        detailRecords.groupedDate, //represents x
        detailRecords.totalAttempts //represents y
}); 
```

然后在创建完数据点后，我将数组列表添加为系列的数据

```
mySeries.Add(new Series
{
    Name = mainRecords.name,
    Data = new Data(myResults.ToArray())
}); 
```

我不知道该怎么做是向数据点添加额外的信息，这样当它悬停时我可以显示它。[Set Additional Data to highcharts 系列](https://stackoverflow.com/questions/8514457/set-additional-data-to-highcharts-series)问题展示了如何做到这一点，但我似乎无法让它与 DotNet.Highcharts 一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T22:16:53.400

目前无法使用 DotNet.Highcharts 添加此类附加数据。但这是一个很好的功能，它将包含在库的下一个版本中。

# python - 在 Python 中最大化 WebDriver (Selenium 2)

> ID：10202148
> 
> 赞同：24
> 
> 时间：2012-04-18T02:54:19.527
> 
> 标签：python, selenium, selenium-webdriver, webdriver, maximize

我正在尝试编写一个简单的脚本来检查我是否有任何标记为 SOMETHING 的 gmail 电子邮件，然后打开一个 Firefox 浏览器窗口到登录页面，之后它会转到其他内容。

这就是我正在做的事情：

```
from selenium import webdriver
from selenium.webdriver.support.ui import WebDriverWait
from selenium.common.exceptions import TimeoutException
from selenium.webdriver.common.action_chains import ActionChains
import time, imaplib

Eusername = "someone@gmail.com"
Epassword = "password1"

username = "username"
password = "password2"

imaps = imaplib.IMAP4_SSL('imap.gmail.com','993')
imaps.login(Eusername,Epassword)

imaps.select('SOMETHING')
status, response = imaps.status('SOMETHING', "(UNSEEN)")
unreadcount = int(response[0].split()[2].strip(').,]'))

while unreadcount > 0:
    driver = webdriver.Firefox()
    driver.get('http://wwww.SomeURL.com/some_login.html')
    time.sleep(3)
    inputElement = driver.find_element_by_name("user")
    inputElement.send_keys(username)
    inputElement = driver.find_element_by_name("pw")
    inputElement.send_keys(password)
    inputElement.submit()
    time.sleep(1)
    driver.get('http://www.SomeURL.com/somethingelse.html')
    imaps.select('SOMETHING')
    typ ,data = imaps.search(None,'UnSeen')
    imaps.store(data[0].replace(' ',','),'+FLAGS','\Seen') 
```

我花了几个小时搜索并没有找到最大化浏览器窗口的解决方案。在其他地方，我读到有一个 windowMaximize() 或 window_maximize()，但由于我尝试过的每个配置都声称它对于任何模块都不存在，因此无法让它们工作。

我只知道一点 python，并且在 Mac OSX 中工作

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-04-20T14:06:45.780

我以前从未使用过此功能，所以我尝试了一下。

```
driver.maximize_window() 
```

这似乎工作正常 - 除非我使用 Chrome。我不确定这是否是一个缺陷，因为它在 IE9 和 Firefox 中完美运行。

编辑：这是尚未在 Chromedriver 中实现的功能[-= 问题链接 =-](http://code.google.com/p/chromedriver/issues/detail?id=67)

编辑（8 年后）：显然这在 Linux 和 Windows 上的 Chrome 中运行 - 所以，耶！我没有测试过它，但我很乐观，因为距离提供原始答案已经近十年了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-26T12:28:19.353

即使这是旧的，知道您总是可以从系统中获取值然后手动设置它是很酷的。这适用于您使用的每个网络驱动程序。

```
#!/usr/bin/env python
#! -*- coding: utf-8 -*-

import selenium
from selenium import webdriver

import os, sys, time

import wx

print "example with maximize_window()"
nav = webdriver.Firefox()
nav.maximize_window()
time.sleep(3)
nav.quit()

print 'example with fixed set_window_size("1024", "768")'
nav = webdriver.Firefox()
nav.set_window_size("1024", "768")
time.sleep(3)
nav.quit()

print "example grabbing size with wx (wxWidgets)"
nav = webdriver.Firefox()
app = wx.App(False) #wx.App(False) # the wx.App object must be created first.
screenxy = wx.GetDisplaySize()  # returns a tuple
nav.set_window_size(screenxy[0], screenxy[1])
time.sleep(3)
nav.quit()

sys.exit(0) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-15T15:24:58.483

有一种非常简单的方法来创建最大化窗口：

```
from selenium.webdriver.chrome.options import Options

chrome_options = Options()
# maximized window
chrome_options.add_argument("--start-maximized") 
```

您还可以使用此库来最大化窗口等，请参阅文档：[https ://seleniumhq.github.io/selenium/docs/api/rb/Selenium/WebDriver/Chrome/Options.html](https://seleniumhq.github.io/selenium/docs/api/rb/Selenium/WebDriver/Chrome/Options.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T16:19:24.567

对于 Chrome，应该在包含修订的下一个版本中实现：[http ://code.google.com/p/chromedriver/issues/detail?id=65](http://code.google.com/p/chromedriver/issues/detail?id=65)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-01T13:07:04.053

我用这条线解决了

```
self.driver = webdriver.Chrome()
self.driver.maximize_window() 
```

# python - 问题打印组合

> ID：10202151
> 
> 赞同：2
> 
> 时间：2012-04-18T02:54:46.817
> 
> 标签：python, combinations

itertools 函数没有错误，但一旦完成，它也不会打印任何内容。我的代码是：

```
def comb(iterable, r):
    pool = tuple(iterable)
    n = len(pool)
    for indices in permutations(range(n), r):
        if sorted(indices) == list(indices):
            print (indices)
            yield tuple(pool[i] for i in indices) 
```

我包含了打印语句，但它没有打印它计算的总组合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T03:02:05.843

您需要阅读生成器的工作原理。当您调用`comb()`它时，它会返回一个生成器对象。然后，您需要对生成器对象执行某些操作以获取从中返回的对象。

```
from itertools import permutations

lst = range(4)
result = list(comb(lst, 2))  # output of print statement is now shown

print(result) # prints: [(0, 1), (0, 2), (0, 3), (1, 2), (1, 3), (2, 3)] 
```

`comb()`返回一个生成器对象。然后，`list()`迭代它并收集列表中的值。在迭代时，您的 print 语句会触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T03:00:07.413

它返回一个[生成器](http://www.dalkescientific.com/writings/NBN/generators.html)对象。如果您遍历它，您将看到打印。例如：

```
for x in comb(range(3),2):
    print "Printing here:", x 
```

给你：

```
(0, 1) # due to print statement inside your function
Printing here: (0, 1)
(0, 2) # due to print statement inside your function
Printing here: (0, 2)
(1, 2) # due to print statement inside your function
Printing here: (1, 2) 
```

因此，如果您只想逐行打印组合，请删除函数内的 print 语句，然后将其转换为列表或遍历它。您可以将这些逐行打印为：

```
print "\n".join(map(str,comb(range(4),3))) 
```

给你

```
(0, 1, 2)
(0, 1, 3)
(0, 2, 3)
(1, 2, 3) 
```

# jquery - Django：在 AJAX 提交后重用视图

> ID：10202152
> 
> 赞同：0
> 
> 时间：2012-04-18T02:54:50.667
> 
> 标签：jquery, ajax, django

在过去的几天里，我浏览了一些“Django/AJAX 教程”，但我非常喜欢使用 AJAX 或 JQuery（我决定在我的 AJAX 实现中使用的库，我愿意如果它也有意义，请使用其他东西）。

我想异步进行一些数据库更新，所以我不需要每次都重新加载整个页面，但是由于我的大多数表单的动态特性，我还没有看到一种“简单”的方法来无需编写大量新代码即可做到这一点。我很好奇是否有一种更简单的方法来完成我想要完成的工作，而不必编写这么多新代码。

我的原始应用程序是完全静态的，这意味着每当我发布任何数据时，整个视图都需要重新加载。从好的方面来说，我很容易确定是否要显示/隐藏表单的某些元素，因为无论如何我基本上都在重建帖子上的所有内容。我的应用程序的一个经典示例：用户更改下拉列表中的值，我的表单重新加载并根据所选值显示或隐藏新字段：

```
def example_view(request):
    if "dropdown_selection" in request.GET:
        dropdown_value = request.GET['dropdown_selection'])
        # more code to save dropdown_value to my database

    .....
    # way later on in the same view
    if dropdown_value == SHOW_EXTRA_STUFF:
        # code to add a bunch of extra elements to a form 
```

无论好坏，我的视图中有大量的逻辑，可以根据存储在数据库中的值确定要显示/隐藏的元素（通常是预先读取传入的 Post 数据并将其保存到数据库优先）。所以现在我想开始做一些更异步的事情:-)

我已经设法连接了一个简单的下拉框来通过 AJAX 更新我的数据库，在我的模板中有一些简单的代码：

```
$(document).ready(function() { 
    $('#{{dropdown_id}}').change(function() {
        var dropdown_data = $('#{{dropdown_id}}');
        var data = {}
        data["{{dropdown_id}}"] = dropdown_data.val();
        var args = { type:"GET",
            url:"submit/", data:data };
        $.ajax(args);
    })
}); 
```

而且我已经更新了我的 urls.py 以将该特定 url 重定向到另一个视图，该视图会将新的保管箱值存储在我的数据库中。那部分效果很好，但是当然我在原始视图中已经有了所有这些逻辑，这些逻辑不再有效，因为下拉值在幕后发生了变化。一旦我强制刷新页面，所有内容都会正确更新以反映新值。我想知道是否有一种简单的方法我仍然可以使用现有的逻辑（即显示这个表单或隐藏那个表单）而不必在我的模板中编写一堆 Jquery 代码，我猜这需要访问所有这些元素直接，需要一堆新的逻辑。这几乎就像我想重新做我原始视图中的内容，减去更新数据库值的逻辑，重建所有 html 代码，但实际上并没有进行整页刷新。也许这只是一厢情愿：-/

**更新 - 我的解决方案**

作为后续行动，我在遵循 Ignacio 的建议后得到了这项工作。我能够使用我现有的视图/逻辑并添加最少量的额外代码来获得完整的 AJAX 更新。这是我将静态页面转换为动态页面的过程：

1.  创建一个新的“基本”页面，如下所示：

    ```
    {% block content %}
        <div id="dynamic_data">
        </div>

    <script>
    $(document).ready(function() { 
        $('#dynamic_data').load('submit/');
        $('#dynamic_data').change(function() {
            $('#criteria_table').load('submit/');
        });
    });
    </script>

    {% endblock content %} 
    ```

2.  创建一个新视图，您需要根据 url 中的“提交”更新您的 urls.py 来调用它。这个视图简单地调用原始视图，带有一个额外的参数：

    ```
    def new_view(request):
        return original_view(request, repost=True) 
    ```

3.  更新我的原始视图以具有“重新发布”参数。其他一切都保持不变，除了最后我更改了它返回的模板：

    ```
    def original_view(request, repost=False):
        # all my database updates, dynamic form generation, etc
        # everything stays the same
        ...
        if repost == True:
            return render_to_response("myapp/new_table.html",
                    context,
                    context_instance=RequestContext(request))
        else:
            return render_to_response("myapp/base.html",
                    context,
                    context_instance=RequestContext(request)) 
    ```

4.  回过头来，我的“base.html”是我在上面发布的简单模板。我的“new_table”模板是生成所有动态数据的原始模板。所以我所做的只是将我的原始模板移动到其他地方，创建一个执行该模板的新视图，然后我使用它的结果将数据重新发布到 div。

再次感谢伊格纳西奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T03:31:18.287

将您的模板分割成逻辑片段，您可以通过模板标签实现这些逻辑片段。然后，您可以将模板标签委托给视图函数的函数包装起来，并通过 AJAX 调用这些函数，替换为`<div>`页面中的适当 s。

# java - Rserve eclipse basic example

> ID：10202155
> 
> 赞同：0
> 
> 时间：2012-04-18T02:55:20.960
> 
> 标签：java, eclipse, r, jri, rserve

> **Possible Duplicate:**
> [How to make a simple program to call R from java using eclipse and Rserve](https://stackoverflow.com/questions/10216014/how-to-make-a-simple-program-to-call-r-from-java-using-eclipse-and-rserve)

Its my first time to call R from java, I am using eclipse and I download the Rserve library using the command install.packages("Rserve") I dont know what to do on the eclipse side, how do i make a very simple program that can execute this code : `RConnection c = new RConnection();` `REXP x = c.eval("R.version.string");` `System.out.println(x.asString());`

I need simple steps, I tried a lot but its not right and I dont know where to start from

Please stop putting low ratings and either help me or let someone else try

# python - 从 python 结构执行远程 bash 命令时“转义”$

> ID：10202162
> 
> 赞同：5
> 
> 时间：2012-04-18T02:56:18.383
> 
> 标签：python, bash, fabric

所以我试图通过这样的python结构脚本自动设置arch linux实例：

```
from fabric.api import run, sudo

def server_setup_communityrepo():
    run('echo \'echo "[archlinuxfr]" >> /etc/pacman.conf\' | sudo -s')
    run('echo \'echo "Server = http://repo.archlinux.fr/$arch" >> /etc/pacman.conf\' | sudo -s')
    run('echo \'echo " " >> /etc/pacman.conf\' | sudo -s')
    sudo('pacman -Syy yaourt --noconfirm') 
```

由于. `run()`_ `$arch`此结构函数在第 2 行失败，因为结构将 $ 后跟字符串识别为配置变量。但我实际上希望 $arch 被理解为

`echo 'echo "Server = http://repo.archlinux.fr/$arch" >> /etc/pacman.conf'`调用 bash shell。

我如何从这个织物怪癖中“逃脱”并将 $arch 指定为要写入我的 pacman.conf 文件的文字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T03:01:53.793

使用带单引号的 echo。这将防止外壳膨胀 `$arch`。

```
run('echo \'Server = http://repo.archlinux.fr/$arch\' | sudo -s tee -a /etc/pacman.conf') 
```

这应该相当于

```
echo 'Server = http://repo.archlinux.fr/$arch' | sudo -s tee -a /etc/pacman.conf 
```

* * *

快速测试：

```
>>> import os
>>> os.system('echo \'Server = /foo/$arch\' ')
Server = /foo/$arch
0 
```

# ruby-on-rails - Practical differences between Rails 2.3.14 and 3/3.2?

> ID：10202163
> 
> 赞同：2
> 
> 时间：2012-04-18T02:56:19.477
> 
> 标签：ruby-on-rails, ruby

I'm just starting Rails dev by using Michael Hartl's walkthrough and have hit a snag.

My shared hosting that I'm using uses CPanel which has a bug where it can't work with Rails 3\. There is supposed to be an update (CPanel 11.34) coming out within the next 6 months that is supposed to fix this.

The version my host uses is Rails 2.3.14.

Obviously there is going to be a world of difference between 2.3.14 and 3/3.2

I'm in Australia which doesn't have an equivalent to Heroku or EngineYard and I need Australian hosting as the data my app will consume/output needs to stay in Australia.

First question is can someone point me at the right direction re limiting my dev environment to the same version as my host? I'm not concerned with multiple versions using rvm. Is it just the freeze command?

Second question is what are the downfalls in developing for the old version? Obviously I'll need to migrate when 3.0 is available on the webhost. Are there any features/specifics that are showstoppers in terms of developing for 2.3.14?

Any help much appreciated

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:28:48.407

您仍然可以在 2.3 中使用[bundler](http://gembundler.com) - 这可以很容易地将自己限制在特定版本的 gems 中，包括 rails 本身。

我想不出很多你不能用 2.3.x 做的事情，显然当时人们也很高兴地编写 web 应用程序。3.x 系列中有很多新东西：资产管道、可挂载引擎、更容易使用不同的 ORM 或 javascript 库、新的路由 api、新的基于 arel 的活动记录等。内部也有很多变化使第 3 方更容易编写扩展 rails 或提供身份验证等功能切片的 gem。

没有太大变化，但 2.3 与 3.x 的一个重要事实是 2.3 已不再使用：编写有用的 gem（carrierwave、devise、factory girl 等）或教程的人经常只针对或不再针对 3.x维护他们的 2.x 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T03:07:10.397

> 第二个问题是旧版本开发的缺点是什么？

一方面，您必须小心不要使用 2.3.x 中不可用的 ActiveRecord 功能。例如，在 3.x 中，您可以执行以下操作：

```
 Client.where("orders_count = ?", params[:orders]) 
```

但在 2.3.x 中，您必须这样做：

```
 Client.first(:conditions => ["orders_count = ?", params[:orders]]) 
```

在 2.3.x 中，您也不能链接查询方法来构建查询。

# c++ - Ways to speed up termination of socket WinHttp APIs using C++ for Windows

> ID：10202164
> 
> 赞同：0
> 
> 时间：2012-04-18T02:56:19.687
> 
> 标签：c++, winapi, sockets, winsock, winhttp

I have a Windows service application written in C++/MFC that establishes an HTTP connection via Windows sockets. It employs [WinHttp* APIs](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384098%28v=vs.85%29.aspx) to do all the socket related operations. It all works great, except when someone tries to stop/uninstall that service if it's in the process of connecting via the socket (espeically in a situation when such connection could not be established, like, say, if my Internet cable is unplugged) those socket APIs do not return for several seconds before the service can close (obviously, the mechanism inside the service waits for my socket thread to finish "gracefully".)

My question is, if I have an open socket handle, as well connection and request handles (of HINTERNET type), obtained from a call to WinHttpOpen(), WinHttpConnect() and WinHttpOpenRequest(), is there any way to forcefully make any other WinHttp* APIs that may be currently working with the socket to return immediately?

PS. I was thinking to do so from a main thread before it begins waiting for the socket thread to close (before uninstalling/stopping the service.)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:50:15.857

您可以从另一个线程关闭您的 WinHTTP 句柄。这会以您试图避免的延迟中断主线程上的阻塞调用。请参阅[如何取消同步 WinHttp 请求？](https://stackoverflow.com/questions/8939316/how-can-a-synchronous-winhttp-request-be-cancelled)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:41:53.297

[显然，服务内部的机制等待我的套接字线程“优雅地”完成] - 如果您知道问题的原因，为什么不将其删除？

你为什么要等？

# html - How to make heading appear in different colors

> ID：10202165
> 
> 赞同：1
> 
> 时间：2012-04-18T02:56:44.580
> 
> 标签：html, css

I want my title "Bully-Free Zone" to appear in different colors. I put five titles in order to assign a color for each so that they can kind of look like a gradient. For example, the firs title I want to appear light gray, the second one gray, the third one dark grey, the fourth one gray, and the fifth one light gray. How do I go about assigning different colors because they are all h1 [http://imgur.com/tiU0z](http://imgur.com/tiU0z)

HTML

```
 <html>
  <head>
  <link rel="stylesheet" type="text/css" href="body.css"/>
  </head>
  <body>
  <h1>Bully-Free Zone<br/> Bully-Free Zone <br/> Bully-Free Zone <br/> 
  Bully-Free Zone <br/>
  Bully-Free Zone </h1>

  <h2>"Online harassment lhas an off-line impact"</h2>
  <!--Menu-->
  <div id="nav">
  <a href="mainpage.htm" class="nav-link">HOME</a>
  <a href="page1.htm" class="nav-link">ASSISTANCE</a>
  <a href="page2.htm" class="nav-link">CYBER-BULLYING SIGNS</a> 
  <a href="page3.htm" class="nav-link">REPORT</a>
  </div>
  <div id="content"> Your Content Here Your Content Here Your Content Here <br/>
  Your Content Here Your Content Here<br/>
  Your content here </div> 
  <img src="nobullying.jpg" id="picture"/>
  <!--Copyright-->
  <div id="center">
  <td> Copyright © 2012 Bully-FreeZone.net</td>
  </div>

  </body>
  </html> 
```

CSS:

```
 body{/* IE10 */ 
  background-image: -ms-linear-gradient(top left, #555BB5 0%, #FC5B5B 100%);

  /* Mozilla Firefox */ 
  background-image: -moz-linear-gradient(top left, #555BB5 0%, #FC5B5B 100%);

  /* Opera */ 
  background-image: -o-linear-gradient(top left, #555BB5 0%, #FC5B5B 100%, );

  /* Webkit (Chrome 11+) */ 
  background-image: -webkit-linear-gradient(top left, #555BB5 0%, #FC5B5B 100%);

  /* Proposed W3C Markup */ 
  background-image: linear-gradient(top left, #555BB5 0%, #FC5B5B 100% );
  }
  h1{color:black;text-align:center;font-size:40px;font-family:broadway;
  }
  h2{color:black; text-align:center;font-size:27px;font-style:italic;}

  /*Menu Buttons Orange*/
  a.nav-link:link
  {
  color: black;
  text-decoration: underline;

  }
  a.nav-link:visited
  {
  color: black;
  text-decoration: none;
  }
  a.nav-link:hover
  {
  color:black;
  text-decoration: overline;
  }
  a.nav-link:active
  {
  color: black;
  text-decoration: none;
  }

  /*Menu button styles*/
  #nav{text-align:center; font-family:"Bernard MT Condensed"; font-size:30px;
  }
  #center{text-align:center;}
  #picture{background-image: url(nobullying.jpg);
  width:200px;
  height:400px;
  position:absolute;
  left:10px;
  Top:190px;
bottom:10px;
  }
  #content {
  text-align:left;
  width:550px;
  margin:20 auto;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T03:07:44.733

由于页面实际上不应该有多个`<h1>`标签，因此您可以通过`<span>`.

您可以按如下方式设置 h1 标签...

```
<h1>
    <span class="light-grey">Bully-Free Zone</span>
    <span class="med-grey">Bully-Free Zone</span>
    <span class="dark-grey">Bully-Free Zone</span>
    <span class="med-grey">Bully-Free Zone</span>
    <span class="light-grey">Bully-Free Zone</span>
</h1> 
```

CSS：

```
h1 span {
    display: block;
}
h1 span.light-grey {
    color: lightgrey;
}
h1 span.med-grey {
    color: grey;
}
h1 span.dark-grey {
    color: darkgrey;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T03:08:48.063

在每个标题周围添加一个跨度，并为每个标题分配不同的类。然后您可以通过 CSS 更改颜色。

```
<h1>
   <span class="gray1">Bully-Free Zone</span><br/>
   <span class="gray2">Bully-Free Zone</span><br/>
   <span class="gray3">Bully-Free Zone</span><br/>
   <span class="gray2">Bully-Free Zone</span><br/>
   <span class="gray1">Bully-Free Zone</span>
</h1>

And the CSS...

.gray1 { color: #efefef; }
.gray2 { color: #aaaaaa; }
.gray3 { color: #999999; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T03:04:57.593

是你想要的吗？

HTML：

```
<h1 class="gray">Bully-Free Zone</h1>
<h1 class="lightgray">Bully-Free Zone</h1> 
```

CSS：

```
h1.gray {color: #333}
h1.lightgray {color: #eee} 
```

# php - how do you test a user created directory name so it does not include illegal charactors in php

> ID：10202166
> 
> 赞同：0
> 
> 时间：2012-04-18T02:56:50.343
> 
> 标签：php, preg-replace, mkdir

we have our code set up to create a directory based on the desired directory name so the user would through html choose a directory name and it would be created based on their name, the obvious problem comes when they enter characters like ?)(#$^&^%$#@/|][{}<>,. or unicode characters as certain characters are not allowed to be within a url.

how would we test the string to replace any illegal characters with _ or ''?

here is the code so far

```
//Removes illegal characters
$game_name = preg_replace('/[^a-zA-Z0-9/-]/','',$game_name);
//grab current directory name
$currentdirname = dirname(__file__);

//create new directory that uses game_name and current_directory
$game_directory = $currentdirname . '/' . $game_name;

//creates directory
mkdir($game_directory, 0700); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:40:02.780

爱丽儿的回答几乎很好。他错过了冒号 ':' 和引号 '"'，它们是 windows 字典的非法字符。这是我的更新版本，它使 windows NTFS 目录的字符串安全：

```
$game_name = preg_replace('/[?()#$:"^&%@\/|\[\]{}<>.,\\\]/', '_', $game_name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T03:06:54.177

只需扩展现有代码：

```
$game_name = preg_replace('/[?()#$^&%@\/|\[\]{}<>.,\\\]/', '_', $game_name); 
```

但是用空格替换所有非字母数字字符仍然是一个更安全的选择，因为不同的环境和同一环境中的不同文件系统对文件/目录名称有不同的要求。

# zend-framework - phpthumb zend framework

> ID：10202172
> 
> 赞同：1
> 
> 时间：2012-04-18T02:58:06.083
> 
> 标签：zend-framework

I can upload the image and resize with phpthumb, but how can i also have the original image uploaded too?

```
 if ($this->getRequest()->isPost()) {
        $formData = $this->getRequest()->getPost();
            if ($form->isValid($formData)) {

            // upload the image
            if ($form->station_image->isUploaded()) {
                $form->station_image->receive();
                $station_image = '/upload/images/radio/' . basename($form->station_image->getFileName());
                //upload thumb
                include_once '../library/PhpThumb/ThumbLib.inc.php'; 
                    $thumb = PhpThumbFactory::create($form->station_image->getFileName());                                    
                    $thumb->resize(50, 50)->save($form->station_image->getFileName()); 
                  //thumb ends

            }else{
                echo 'cannot upload'. exit;
            } 
```

My forms look like this

```
$station_image->setLabel('Upload File: ')
                        ->setDestination(APPLICATION_PATH.'/../public/upload/images/radio')
                        ->addValidator('Extension', false, 'jpg,png,gif')
                        ->addValidator('Size', false, 902400)
                        ->addValidator('Count', false, 1)
                        ->setRequired(false); 
```

Please help me how to upload multiple thumbnail or how can i get the original file uploaded as well ? Thanks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T03:00:09.467

您将原始图像传递给 PHPThumb 的构造函数：

```
$thumb = PhpThumbFactory::create($form->station_image->getFileName()); 
```

你`$form->station_image->getFileName()`的原始文件也是如此。问题是你用调整后的文件名覆盖了原始文件名，试试这个：

```
$thumb = PhpThumbFactory::create($form->station_image->getFileName());                                    
$thumb->resize(50, 50)->save('/path/where/you/want/resized/image/to/go.png'); 
```

**- 更新 -**

试试这个：

```
if ($form->station_image->isUploaded()) {

    $form->station_image->receive();
    $station_image = '/upload/images/radio/' . basename($form->station_image->getFileName());
    //upload thumb
    include_once '../library/PhpThumb/ThumbLib.inc.php'; 
    $thumb = PhpThumbFactory::create($form->station_image->getFileName());

    // Notice this is using $station_image, which I assume is an accessible path
    // by your webserver                                    
    $thumb->resize(50, 50)->save($station_image); 
    //thumb ends

 }else{ 
```

**- 更新 -**

尝试改变这个：

```
 $station_image = '/upload/images/radio/' . basename($form->station_image->getFileName()); 
```

对此：

```
 $station_image = '/upload/images/radio/thumb_' . basename($form->station_image->getFileName()); 
```

# node.js - npm dependency resolution -OR- help! i cannot install derbyjs

> ID：10202173
> 
> 赞同：1
> 
> 时间：2012-04-18T02:58:27.583
> 
> 标签：node.js, npm, derbyjs

I have been trying to install Derby, and `npm` keeps insisting it cannot find a suitable version of express. Here's the command I am using: `npm install -g derby`. Below is the output. I am running Ubuntu 11.10, node v0.7.6 and npm v1.1.17\. Am I doing something wrong? How can I fix this?

```
npm ERR! Error: No compatible version found: express@'>=2.0.0- <3.0.0-'
npm ERR! Valid install targets:
npm ERR! ["0.14.0","0.14.1","1.0.0beta","1.0.0beta2","1.0.0rc","1.0.0rc2","1.0.0rc3","1.0.0rc4","1.0.0","1.0.1","1.0.2","1.0.3","1.0.4","1.0.5","1.0.6","1.0.7"]
npm ERR!     at installTargetsError (/home/thomas/bin/node/lib/node_modules/npm/lib/cache.js:486:10)
npm ERR!     at next_ (/home/thomas/bin/node/lib/node_modules/npm/lib/cache.js:436:17)
npm ERR!     at next (/home/thomas/bin/node/lib/node_modules/npm/lib/cache.js:413:44)
npm ERR!     at /home/thomas/bin/node/lib/node_modules/npm/lib/cache.js:406:5
npm ERR!     at saved (/home/thomas/bin/node/lib/node_modules/npm/lib/utils/npm-registry-client/get.js:151:7)
npm ERR!     at Object.oncomplete (/home/thomas/bin/node/lib/node_modules/npm/node_modules/graceful-fs/graceful-fs.js:230:7)
npm ERR! You may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>
npm ERR! 
npm ERR! System Linux 3.0.0-17-generic
npm ERR! command "node" "/home/thomas/bin/node/bin/npm" "install" "-g" "derby"
npm ERR! cwd /home/thomas
npm ERR! node -v v0.7.6
npm ERR! npm -v 1.1.17
npm ERR! message No compatible version found: express@'>=2.0.0- <3.0.0-'
npm ERR! message Valid install targets:
npm ERR! message ["0.14.0","0.14.1","1.0.0beta","1.0.0beta2","1.0.0rc","1.0.0rc2","1.0.0rc3","1.0.0rc4","1.0.0","1.0.1","1.0.2","1.0.3","1.0.4","1.0.5","1.0.6","1.0.7"]
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /home/thomas/npm-debug.log
npm not ok 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T03:49:12.547

Derby 需要 express v2.x，而 express v2.x 需要 node v0.4.1 => 0.7.0-pre。这意味着 npm 将无法为您找到有效的 express 版本，因为您的节点版本 v0.7.6 不受支持。

你最好的选择是降级 Node.js。您也可以手动安装 express，并希望它实际上是兼容的，但这可能是个坏主意。

# javascript - jquery - 显示/隐藏元素+控制每个元素的单独时间

> ID：10202175
> 
> 赞同：0
> 
> 时间：2012-04-18T02:59:12.103
> 
> 标签：javascript, jquery

我正在尝试显示和隐藏元素，有点像幻灯片，但我想控制每个单独元素的显示时间。我也不希望元素淡入或淡出，而只是在前一个元素被隐藏后立即出现。尝试在电视节目或类似的节目之后拍摄演职员表，但每个元素都可以单独计时。到目前为止，我如何才能实现这一目标？

（我在使用 .delay 时遇到问题 - 它没有按照我在 js 中告诉它的操作）

```
<html>
<title>Untitled</title>
<head>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">

$(document).ready(function() {

    $('#one').delay(1000).show(0, function() { });

    $('#one').delay(3000).hide(0, function() { });

    $('#two').delay(3000).show(0, function() { });

    $('#two').delay(4000).hide(0, function() { });

    $('#three').delay(4000).show(0, function() { });

    $('#three').delay(6000).hide(0, function() { });

    $('#four').delay(6000).show(0, function() { });

    $('#four').delay(6000).hide(0, function() { });

});

</script>   
<style type="text/css" media="screen">

    body {
    margin: 0px;
    padding: 0px;
    font-family: arial, sans-serif;
    padding: 0px;
    background: #fff;
    }

#one, #two, #three, #four, #five, #six {
    position: absolute;
    top: 50px;
    left: 50px;
    display: none;
    font-size: 48px;
    font-weight: bold;
    font-family: arial, sans-serif; 
    color: #111;
}

</style>
</head>
<body>              
    <p id="one">this is text #1</p>
    <p id="two">this is text #2</p>
    <p id="three">this is text #3</p>
    <p id="four">this is text #4</p>
    <p id="five">this is text #5</p>
    <p id="six">this is text #6</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T03:15:06.187

我不得不猜测你想要什么，但我认为这就是你要找的：

```
$('#one').delay(1000).show(0).delay(1000).hide(0);
$('#two').delay(2000).show(0).delay(1000).hide(0);
$('#three').delay(3000).show(0).delay(1000).hide(0);
$('#four').delay(4000).show(0).delay(1000).hide(0);
$('#five').delay(5000).show(0).delay(1000).hide(0);
$('#six').delay(6000).show(0).delay(1000).hide(0); 
```

[您可以在http://jsfiddle.net/3XnGR/](http://jsfiddle.net/3XnGR/)上看到它的工作原理

# oracle11g - OBIEE(11g) mobile - hosting on a separate server

> ID：10202178
> 
> 赞同：0
> 
> 时间：2012-04-18T02:59:19.037
> 
> 标签：oracle11g, obiee

I am quite new to oracle BI, since my organization needs to provide access to the OBIEE(11g) via internet by the iPad mobile app, we need to provide a separate server only for mobile app and the mobile server should stand inside a DMZ, while OBIEE app remains locally, is it possible to deploy mobile server in a separate server with allowing access to the public? If yes: how? And if no: what are the other ways of approaching this requirement?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:03:21.707

不要在公共 DMZ 中公开演示服务器或 OBIEE 的任何其他部分。OBIEE 可以分离用于企业部署。您想要创建一个虚拟 IP 并将 Oracle HTTP Server (OHS) 与 Webgate（这是 Oracle 的 Web 服务器插件）放在移动设备和其他设备可以访问的公共 DMZ 中。将 OBIEE 部署的其余部分放在私有 DMZ 中。[请参阅OBIEE 企业部署指南](http://docs.oracle.com/cd/E23943_01/doc.1111/e15722/intro.htm#CEGIBGFG)中的下图。

![在此处输入图像描述](../Images/07808b2f7f60d2beb94c1aaef357cf8c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:45:07.827

那么，当您从移动设备访问 Oracle BI 时，您是通过演示服务器主机和端口上的客户端应用程序（iPad 应用程序）直接访问远程服务器。

问题在于它不是“移动”服务器：想象客户端应用程序就像富 Internet 应用程序，类似于动态站点。

如果您可以从 iPad 上“看到”服务器，那么就是这样。

据我所知，OBIEE 11g 作为一个整体包安装为 weblogic 服务器，因此组件无法分离。

但是，我认为您可以在 iPad 和 OBIEE 演示服务器之间放置一个代理，如下所示：

局域网 | 非军事区 | WAN OBIEE 11g | 代理 | 用户 (iPad)

通过这种方式，您可能可以仅通过所需的端口和增强的安全性来限制对 OBIEE 演示服务器的访问，但请始终记住，应用程序是一个，服务器是一个！

# javascript - javascript .replace 和 jQuery .map

> ID：10202183
> 
> 赞同：0
> 
> 时间：2012-04-18T03:00:08.773
> 
> 标签：javascript, jquery, regex, replace

我正在尝试自学使用 JSON、数组和字符串的基础知识，因此我正在尝试构建一个简单的正则表达式搜索和突出显示。我的问题是，当我尝试用包含查询项的字符串替换查询项时，它似乎没有将其返回到正在构建的新数组中。

这是我的功能：

```
function jqueryMap() {
    var searchterm = "item"; 
    var query = new RegExp("itEM", "i");  
    var foo = $.map(array, function(value,key){
        if (value.classname.search(query) != -1){ //0 = none
            value.classname.replace(query, "<div class='highlight'>"+searchterm+"</div>"); 
            return value; 
        }
    });

    $.each(foo, function(key,value) {
        $("body").append(key +" : "+value.classname+" <br>");             
    });
} 
```

以及它正在搜索的数组：

```
var array = [{
    "classname": "item",
    "content": "content1"},
{
    "classname": "item",
    "content": "content2"},
{
    "classname": "item",
    "content": "content1"},
{
    "classname": "im gonna say its item",
    "content": "content1"},
{
    "classname": "blam",
    "content": "content1"},
{
    "classname": "item",
    "content": "content1"},
{
    "classname": "item3",
    "content": "content1"}]; 
```

我的问题是，为什么当我返回“值”时，不包括被替换的文本？谢谢。

这是我的 jsfiddle：http: [//jsfiddle.net/bmcmahen/5HQga/9/](http://jsfiddle.net/bmcmahen/5HQga/9/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T03:01:33.040

replace 返回修改后的版本。它不会修改任何内容（JavaScript 字符串是不可变的）。所以你要：

```
value.classname = value.classname.replace(query, "<div class='highlight'>"+searchterm+"</div>"); 
```

此外，常规`for`循环会更合适，因为您返回的是相同的数组元素：

```
for(var i = 0; i < array.length; i++) 
```

# java - java中的sql解析器

> ID：10202185
> 
> 赞同：0
> 
> 时间：2012-04-18T03:01:01.380
> 
> 标签：java, parsing, compiler-construction

我打算创建一个 SQL 查询解析器。只需使用适当的标记化和检查订单即可完成。

但我打算从我在编译器设计课程中学到的东西来做（但几年前）

我可以为我想要包含的查询定义语法，但我需要一些初始指导帮助，要实现什么样的解析器？自上而下/自下而上等。这更容易开始。

标记为作业，因为我正在寻找一些指导。

[http://blog.tcx.be/2007/05/writing-parser-overview.html](http://blog.tcx.be/2007/05/writing-parser-overview.html) - 我查看了这个链接，它帮助我了解如何继续。任何其他帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T03:19:55.777

自上而下的递归下降解析器是最容易理解的，因此如果您手动编码，则最容易实现。

不过，您是否考虑过使用解析器生成器？我在最近的一个项目中成功使用了[antlr](http://www.antlr.org/)，并且肯定会向其他人推荐它。它有一些很好的教程和一个很好的 GUI 工具，用于对你的语法进行原型设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:06:06.927

这个问题有点晚了，但最近我一直在玩[SQL Query Parser](http://www.eclipse.org/datatools/project_sqldevtools/sqltools_doc/SQL%20Query%20Parser%20User%20documentation.htm)类，它是 Eclipse DataTools 项目的一部分。安装它并让它工作对我来说有点困难（我不是 Java 开发人员），但我设法做到了，而且它非常容易解析非常复杂的查询。

# tsql - 如何使用 select 语句设置变量并在 case 语句中使用它

> ID：10202187
> 
> 赞同：0
> 
> 时间：2012-04-18T03:01:20.647
> 
> 标签：tsql

我正在使用案例语句来确定几个不同年龄组的 Count(*)，但我需要获取每个年龄组的百分比，因为它与所有年龄组的总数有关。我知道这是一个新手问题，但我被卡住了。谢谢安迪

这是我尝试使用的代码。

```
WITH AgeGroups AS ( 
SELECT 
CASE 
WHEN DATEDIFF(YEAR, party.birthdate, GETDATE()) < 21 THEN 'Under   21' 
WHEN DATEDIFF(YEAR, party.birthdate, GETDATE()) BETWEEN 21 AND 29 THEN '21 - 29' 
WHEN DATEDIFF(YEAR, party.birthdate, GETDATE()) BETWEEN 30 AND 39 THEN '30 - 39' 
WHEN DATEDIFF(YEAR, party.birthdate, GETDATE()) BETWEEN 40 AND 49 THEN '40 - 49'
WHEN DATEDIFF(YEAR, party.birthdate, GETDATE()) BETWEEN 50 AND 59 THEN '50 - 59' 
WHEN DATEDIFF(YEAR, party.birthdate, GETDATE()) > 60 THEN '60 and Over' 
ELSE 'Unkown' 
END AS AgeGroup  
FROM party   
LEFT OUTER JOIN volunteer on partyID = volunteer.partyID 
WHERE volunteer.swornDate BETWEEN @startDate AND @endDate) 
SELECT  AgeGroup, COUNT(*) AS AgeGroupCount, Convert(decimal(18,2),  
(1.0*Count(*)/@Total * 100)) as percentage 

FROM AgeGroups 
GROUP BY AgeGroup 
```

我正在尝试用所有年龄组的计数填充变量 @Total

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T04:29:46.267

从您的问题中，不清楚您是要填写 @Total 还是生成查询输出。

如果是后者，那么这可能对您有用。

```
WITH AgeGroups AS ( 
SELECT 
CASE 
WHEN DATEDIFF(YEAR, party.birthdate, GETDATE()) < 21 THEN 'Under   21' 
WHEN DATEDIFF(YEAR, party.birthdate, GETDATE()) BETWEEN 21 AND 29 THEN '21 - 29' 
WHEN DATEDIFF(YEAR, party.birthdate, GETDATE()) BETWEEN 30 AND 39 THEN '30 - 39' 
WHEN DATEDIFF(YEAR, party.birthdate, GETDATE()) BETWEEN 40 AND 49 THEN '40 - 49'
WHEN DATEDIFF(YEAR, party.birthdate, GETDATE()) BETWEEN 50 AND 59 THEN '50 - 59' 
WHEN DATEDIFF(YEAR, party.birthdate, GETDATE()) > 60 THEN '60 and Over' 
ELSE 'Unkown' 
END AS AgeGroup,
FROM party   
LEFT OUTER JOIN volunteer on partyID = volunteer.partyID 
WHERE volunteer.swornDate BETWEEN @startDate AND @endDate
) 
SELECT  AgeGroup,COUNT(*) AS AgeGroupCount,  Convert(decimal(18,2),  
(1.0*Count(*)/b.totcnt * 100)) as percentage 

FROM AgeGroups a,
(select COUNT(*) AS totcnt from AgeGroups) b

GROUP BY a.AgeGroup 
```

# asp.net - 剃刀语法不正确？？jQuery 函数 onchange 的 Html.DropDownList

> ID：10202190
> 
> 赞同：2
> 
> 时间：2012-04-18T03:01:56.480
> 
> 标签：asp.net, asp.net-mvc-3, razor

我需要通过这个 DropDownList 的 onchange 事件调用一个 jquery 函数。我用谷歌搜索和搜索，无法找出我的剃刀语法错误的原因。请帮忙？

```
@Html.DropDownListFor(model => model.Type, (List<SelectListItem>)Type, new { @onchange = "reloadDial(" + @Model.AppID, @Model.LoginID, @Model, @ViewBag.Edit + ")"}) 
```

错误在最后一部分。**@ViewBag.Edit + ")"}** ) 错误是“无效的匿名类型声明器。必须使用成员分配、简单名称或成员访问来声明匿名类型成员。”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T03:12:46.237

看起来问题是您正在尝试为`javascript` `function`. 您的参数不在 a 中`string`，因此编译器认为您正在尝试向`properties`匿名添加更多内容`object`。

所以...

```
"reloadDial(" + @Model.AppID, @Model.LoginID, @Model, @ViewBag.Edit + ")" 
```

应该：

```
"reloadDial('" + @Model.AppID + "','" + @Model.LoginID + "','" +  @Model + '",'" + @ViewBag.Edit + ")" 
```

# c - 如何使用转义序列从标准输入获取字符串？

> ID：10202192
> 
> 赞同：1
> 
> 时间：2012-04-18T03:02:11.193
> 
> 标签：c

一个简单的代码是：

```
#include <stdio.h>

int main() {
    printf("Hello\tworld");
    char line[1000];
    gets(line);
    printf("%s\n",line);
    return 0;
} 
```

因此，如果我输入“Hello\tworld”，它将打印出“Hello\tworld”，但预定义的字符串“Hello\tworld”将被打印出：

```
hello       world 
```

有没有办法让gets函数知道转义序列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T03:11:57.547

当您在 stdin 中键入 "\t" 时，您将得到您输入的内容，它存储为`'\'`而`'t'` 不是 ascii 等价于 .`'\t'`为什么不在 stdin 中使用 "tab-key" `\t`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T03:57:11.447

printf("Hello\tworld"); 上的字符串 **它由编译器转换为**已编译的字符串，其中转义码转换为字符，因此 printf 函数在执行时不会看到两个字符“\t”字符串，而是单个制表符的等效代码。但是gets() 函数**在运行时**获取每个键入字符的字符串，并且不转换转义码。因此，如果您想转换这些转义码，您必须创建一个替换功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T03:11:01.803

不是我知道的。您需要手动将出现的转义字符序列替换为其对应的字符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T03:20:48.100

get 函数不查看任何符号（例如：\t \n），只给出输入的每个字符的 ascii。据我所知，除了手动替换您关心的那些之外，没有办法让它关注这些。scanf 是相同的方式，会给你同样的问题。

# perl - perl 中的 (@{ $value{$value}} ) 是什么？

> ID：10202194
> 
> 赞同：4
> 
> 时间：2012-04-18T03:02:28.610
> 
> 标签：perl

我已经工作了几个星期，试图让一个 perl 程序工作。其他人编写了它，从那时起数据源已更改。我花了数周时间逐行搜索并做教程。我被困住了。代码说`@{ $Routings{$Code} }`which 有一个值列表，但是当它似乎没有返回数据时，它`[ $ProcessID, $Setup, $Process ]`位于代码的底部。`foreach ( @{ $Routings{$Code} } ) {my $ProcessCodeID = @$_[0];}`如果有人甚至可以帮助我`print $ProcessCodeID`，以便我可以跟踪数据，那将非常有帮助。

此外，如果你能解释什么`@{$value{$key}}`代表那也会有帮助。

多谢了。

```
%Routings = ();
my $dbh = DBI-> connect('dbi:ODBC:SQL')
    or die "Couldn't open Databaxe: $DBI::errstr;  stopped";

my $query= $dbh->prepare("SELECT Code, Setup, Process, ProcessID FROM ROUTING");

$query->execute() or die "Couldn't execute statement: $DBI::errstr; stopped";

while ( my ($Code, $setup, $process, $processid) = $query->fetchrow_array() ){
    push ( @{ $Routings{$Code} }, [ $ProcessID, $Setup, $Process ] );
}

foreach ( @{ $Routings{$Code} } ) {
    my $ProcessCodeID = @$_[0];
    my $SetupMins = @$_[1];
    my $ProcessMins = @$_[2];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T04:57:03.483

首先，重要的是您`use strict`和`use warnings`在程序开始时，并在首次使用它们时声明所有变量。这将导致 Perl 生成一些非常有用的消息，这些消息将揭示许多容易被忽略的简单错误。

例如，您正在分配变量`$setup`, `$process`,`$processid`然后将`$Setup`,`$Process`和`$ProcessID`推入一个数组。Perl 标识符区分大小写，因此它们是三个不同的变量，`undef`此时的值为 。`use strict`会打印一个编译错误，说明`$ProcessID`尚未声明等。（如果您有选择，最好使用小写加下划线来表示这些本地标识符。经验丰富的 Perl 程序员会感谢您。）

您应该尝试使用该[`Data::Dumper`模块](https://metacpan.org/module/Data%3a%3aDumper)，该模块将显示像这样的复杂嵌套 Perl 数据结构的内容和结构。一旦你有`use Data::Dumper`你的程序，你可以写

```
print Dumper \%Routings 
```

这会将 的内容显示`%Routings`为匿名哈希。

散列的每个元素`$Routings{$Code}`的值是与 Code 的值对应的所有 ProcessID、Setup 和 Process 集合的列表（对数组的引用）。（我假设该列`Code`是非唯一的，否则数据结构比它需要的更复杂。）因此，给定的三个值的第一组`$Code`是 at`$Routings{$Code}[0]`并且该`ProcessID`组的 the 是`$Routings{$Code}[0][0]`。

没有代码可以`$Code`为`foreach`循环分配值，并且大概您希望遍历`%Routings`散列的所有键。

每次`foreach`循环`$_`都设置为对 current 的每个三元组值的引用`$Code`。这意味着`@$_`是一个三元素数组，但它应该使用`$_->[0]`etc 来索引，而不是`@$_[0]`一个元素*数组切片*和糟糕的编码实践。通过使用此处的默认值，代码变得更加晦涩难懂`$_`，我在下面使用命名变量对其进行了澄清。

下面的代码修复了我可以看到的问题。如果您需要任何进一步的帮助，请回来。

```
use strict;
use warnings;

use DBI;

my %Routings;

my $dbh = DBI-> connect('dbi:ODBC:SQL')
    or die "Couldn't open Databaxe: $DBI::errstr;  stopped";

my $query= $dbh->prepare("SELECT Code, Setup, Process, ProcessID FROM ROUTING");

$query->execute or die "Couldn't execute statement: $DBI::errstr; stopped";

while ( my ($Code, $Setup, $Process, $ProcessID) = $query->fetchrow_array ){
  push @{ $Routings{$Code} }, [ $ProcessID, $Setup, $Process ];
}

for my $Code (keys %Routings) {
  foreach my $triplet ( @{ $Routings{$Code} } ) {
    my $ProcessCodeID = $triplet->[0];
    my $SetupMins = $triplet->[1];
    my $ProcessMins = $triplet->[2];
    print "$Code => ($ProcessCodeID, $SetupMins, $ProcessMins)\n";
  }
} 
```

请注意，`foreach`循环中的分配可以通过一次执行它们来变得更加清晰和简洁。正如我所解释的，`@$triplet`是一个三元素数组，因此等效赋值可以简单地编码

```
my ($ProcessCodeID, $SetupMins, $ProcessMins) = @$triplet; 
```

（请谨慎对待此代码，因为如果不进行大量工作来设置测试数据库，我无法对其进行彻底测试，尽管它确实可以在简单的数据集上正常工作。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T04:00:26.630

该代码按“代码”对“路由记录”进行分组。

* * *

`%Routings`是一个哈希。它由“代码”键入。每个值都是对数组的引用。这些数组由 自动激活`push ( @{ $Routings{$Code} },`，它是 的缩写`push ( @{ $Routings{$Code} //= [] },`。

这些数组中的每一个都包含许多“记录”。每个“记录”都是对三个元素（“进程 ID”、“设置”和“进程”）的数组的引用。它们由`[ $ProcessID, $Setup, $Process ]`.

转储看起来像：

```
{
   $code0 => [
      [ $ProcessID0, $setup0, $Process0 ],
      [ $ProcessID2, $setup2, $Process2 ],
      ...
   ],
   $code1 => [
      [ $ProcessID1, $setup1, $Process1 ],
      [ $ProcessID5, $setup5, $Process5 ],
      ...
   ],
   $code2 => [
      [ $ProcessID3, $setup3, $Process3 ],
      [ $ProcessID4, $setup4, $Process4 ],
      ...
   ],
   ...
} 
```

* * *

如果`$Code`有一个有意义的值——你没有显示它得到一个值——`$Routings{$code}`将评估为这些数组引用之一。从上面的例子中，

```
[
   [ $ProcessID0, $setup0, $Process0 ],
   [ $ProcessID2, $setup2, $Process2 ],
   ...
], 
```

`@{ ... }`向 Perl 表明您要*取消*对该引用的引用。换句话说，它告诉 Perl 你对数组本身感兴趣。

当您将数组传递给 foreach 时，它会遍历其元素。所以第一次通过循环，`$_`将持有以下数组引用：

```
[ $ProcessID0, $setup0, $Process0 ], 
```

第二次，

```
[ $ProcessID2, $setup2, $Process2 ], 
```

等等

`@$_[0]`（缩写`@{ $_ }[0]`，这是一个不正确使用`${ $_ }[0]`的，更易读的`$_->[0]`）获取引用数组的第一个元素（`$ProcessID0`）。同样`@$_[1]`，`@$_[2]`得到`$setup0`和`$Process0`。

* * *

当然，然后您继续对数据不做任何事情。你可能打算做

```
foreach ( @{ $Routings{$Code} } ) {
    my $ProcessCodeID = ${$_}[0];
    my $SetupMins     = ${$_}[1];
    my $ProcessMins   = ${$_}[2];
    print("$ProcessCodeID ,$SetupMins, $processMins\n");
} 
```

清理：

```
foreach ( @{ $Routings{$Code} } ) {
    my $ProcessCodeID = $_->[0];
    my $SetupMins     = $_->[1];
    my $ProcessMins   = $_->[2];
    print("$ProcessCodeID, $SetupMins, $processMins\n");
} 
```

又清理了一些：

```
for ( @{ $Routings{$Code} } ) {
    my ($ProcessCodeID, $SetupMins, $ProcessMins) = @$_;
    print("$ProcessCodeID, $SetupMins, $processMins\n");
} 
```

从技术上讲，你甚至可以做

```
for ( @{ $Routings{$Code} } ) {
    print(join(', ', @$_), "\n");
} 
```

或者

```
print(join(', ', @$_), "\n")
   for @{ $Routings{$Code} }; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-18T06:01:12.090

你对 Perl 的引用了解多少？您可能想查看一些关于[Perl 参考的](http://perldoc.perl.org/perlreftut.html)[教程](http://perldoc.perl.org/index-tutorials.html)。

# 快速参考教程

Perl 的所有三种基本数据结构（标量、数组和散列）都旨在保存单个数据值。例如，我有一个员工数组：

```
$employee_list[0] = "Bob";
$employee_list[1] = "Carol";
$employee_list[2] = "Ted";
$employee_list[3] = "Alice"; 
```

是的，我的数组中有四段数据，但在简单的 Perl 中，每一项都只包含一个值——名字。如果我还想要员工的姓氏、薪水或职位，我该怎么办？在基本的 Perl 数据结构中没有简单的方法可以做到这一点。

引用是一种允许您在 Perl 变量中存储多条数据的方法。让我们看一下 Bob 的完整员工记录：

```
$employee{FIRST}  = "Bob";
$employee{LAST}   = "Jones";
$employee{PAY}    = "1400";
$employee{PHONE}  = "1234"; 
```

现在，我怎样才能将所有这些信息压缩到`$employee_list[0]`?

Perl 允许你*引用*这个散列`%employee`（主要是内存中存储散列的位置。你可以通过在它前面放一个反斜杠来做到这一点：

```
$employee_list[0] = \%employee; 
```

现在，在那个`$employee_list[0]`槽中，我引用了一个包含 Bob 的所有员工信息的 Perl 哈希。现在，问题是如何访问这些信息？

我可以通过*取消引用*来访问我的参考资料中的信息。您可以通过将正确的[印记](http://en.wikipedia.org/wiki/Sigil_%28computer_programming%29)放在参考前面来做到这一点：

```
$employee_reference = $employee_list[0];
%employee_hash      = %$employee_reference;
print "Employee name is $employee_hash{FIRST} $employee_hash{LAST}\n"; 
```

我首先得到引用，然后我可以将它取消引用到一个新的`%employee_hash`. 一旦我这样做了，我就可以使用散列中的信息。这是很多工作。看`$employee_reference`。我所做的只是获取参考，所以我可以取消参考。为什么不删掉那一步，直接从`$employee_list[0]`?

```
%employee_hash      = %{ $employee_list[0] };
print "Employee name is $employee_hash{FIRST} $employee_hash{LAST}\n"; 
```

注意我在我的参考文献周围使用了花括号。花括号有点像方程周围的括号。他们让 Perl 知道首先要做什么。

不过，同样，我并没有真正对`%employee_hash`. 这只是一个我可以扔散列的地方，所以我可以打印它。为什么不取消引用哈希，并一步获取特定键的值？甚至更好。一步：

```
print "Employee name is "
   . ${ $employee_list[0] }{FIRST} . " "
   . ${ $employee_list[0] }{LAST} . "\n"; 
```

我正在取消引用`$employee_list[0]`哈希***并***获取该哈希，并在同一步骤中检索特定键的值。请注意，我使用 a`$`而不是 a `%`。

如您所见，它会很快变得复杂。然而，Perl 为您提供了一种很好的方式来表示这种过于复杂的结构：

```
print "Employee name is " 
  . $employee_list[0]->{FIRST} . " " 
  . $employee_list[0]->{LAST} . "\n"; 
```

`->`操作员为您*取消引用*。

我建立一个哈希调用`%employee_hash`只是为了引用它也有点愚蠢。Perl 允许您引用*匿名*哈希和数组。

```
$employee_list[0] = { LAST => "Jones", FIRST => "Bob",
    SALARY => 1400, PHONE => "1234" } 
```

花括号用于*匿名*哈希。方括号用于*匿名*数组。它们是匿名的，因为它们不引用变量，而只是对哈希或数组的引用。

# 数据::自卸车

可以想象，这些数据结构会变得相当复杂。例如，我跟踪员工的地址，但地址由街道、城市、州和邮政编码组成。有时，这条街的线路不止一条。而且，如果有多个地址怎么办？哈希或数组引用没有理由不能包含对另一个哈希或数组的引用：

```
$employee_list[0]->{NAME}->{FIRST} = "Bob";
$employee_list[0]->{NAME}->{LAST}  = "Jones";
$employee_list[0]->{ADDRESS}->[0]->{TYPE} = "Business";
$employee_list[0]->{ADDRESS}->[0]->{STREET}->[0] = "123 Mockingbird Lane";
$employee_list[0]->{ADDRESS}->[0]->{STREET}->[1] = "Tower 2";
$employee_list[0]->{ADDRESS}->[0]->{CITY} = "Beantown";
$employee_list[0]->{ADDRESS}->[0]->{STATE} = "MA"; 
```

如您所见，$employee_list[0] 指向对员工哈希的引用。该哈希具有“名称”、“地址”和其他填充数据的键。该`NAME`字段是对另一个具有两个键的散列的引用：`FIRST`和`LAST`。该`ADDRESS`字段实际上是对地址数组的引用。这些数组条目中的每一个都是对哈希的引用。想象一下尝试调试这个数据结构！

[Data::Dumper](http://perldoc.perl.org/Data/Dumper.html)是一个模块，它将解析最复杂的数据结构并为您打印出来：

```
use Data::Dumper;

[...]

print "Employee Dump: " . Dumper \@employee . "\n"; 
```

这将打印出员工数组中所有员工的整个结构。

如果您不知道是什么`@{$value{$key}}`，您可以轻松地在其上运行转储：

```
print Dumper $value{$key} . "\n"; 
```

# 解码你的程序

让我们逐行浏览：

```
%Routings = ();
my $dbh = DBI->connect('dbi:ODBC:SQL')
    or die "Couldn't open Databaxe: $DBI::errstr;  stopped"; 
```

您初始化了一个名为的散列`%Routings`并创建了一个 DBI 对象，该对象表示与您的数据库的连接。`connect`是在 Perl 中作为 DBI 类的一部分定义的子例程。所有的类都由一堆 Perl 子例程组成，这些子例程对由该类创建的对象进行操作。这些子例程分为*构造函数*和*方法*。构造函数创建对表示对象的复杂数据结构的引用。方法是可以对该对象进行操作的子程序。想象一下我们的员工记录：

```
$employee = Person::Employee->new;
$employee->first_name( "Bob" ); 
```

第一行从我的班级创建一个`$employee`对象。`Person::Employee`该`$employee`对象实际上只是对包含我的员工信息的哈希的引用。所以，我的子程序`new`是一个*构造函数*。

第二行使用一个名为的子例程`first_name`，它允许我设置员工的名字。该子例程称为*Method*或有时称为*Member Function*。

所以，回到程序，我们创建了一个代表我们的数据库连接的对象。如果你愿意，你可以用它`Data::Dumper`来打印出这个*对象*的结构，如果这有助于你更好地理解它。它只是对哈希的引用。

```
my $query= $dbh->prepare("SELECT Code, Setup, Process, ProcessID FROM ROUTING");
$query->execute() or die "Couldn't execute statement: $DBI::errstr; stopped"; 
```

我现在*准备*要执行的 SQL 语句。在我准备好之后，我执行它。执行实际上是对数据库的影响。请注意，my是数据库句柄`prepare`的一个*方法*`$dbi`，但它也是一个构造函数，因为它创建了`$query`对象。

我使用该`$query`对象来实际执行我的查询。同样，不要害怕使用`Data::Dumper`打印出来。

```
while ( my ($Code, $setup, $process, $processid) = $query->fetchrow_array() ){
    push ( @{ $Routings{$Code} }, [ $ProcessID, $Setup, $Process ] );
} 
```

让我们稍微简化一下：

```
while ( my @fetched_row = $query->fetchrow_array() ){
    my ($Code, $setup, $process, $processid) = @fetched_row;
    push ( @{ $Routings{$Code} }, [ $ProcessID, $Setup, $Process ] );
} 
```

这`fetchrow_array`是一个从我的查询中获取一行作为列数组的子例程。这个子例程是我上面创建的对象的一个*​​方法。*`$query`我所做的只是从我的数据库中获取每一行并将其放入四个 Perl 标量变量中。

最后一行有点棘手。还记得我`%Routings`初始化的哈希吗？显然，此散列中的每个键都是对值数组的引用。哈希是`$Code`我在上面提取的，它指向一个由 、 和 组成的三`$ProcesssID`成员`$Setup`数组`$Process`。我们可以像这样重写第三行：

```
my @temp_array = ($ProcessID, $Setup, $Process);
my @temp_routing_array = @{ $Routings{Code} }; #Dereferencing the $Routing{$Code} array
push( @temp_routing_array, \@temp_array );     #Pushing a reference into my array
$Routing{$Code} = \@temp_routing_array;   #Creating a reference again 
```

这`[ $ProcessID, $Setup, $Process ]`只是创建对匿名数组的引用。这为我们省去了创建`@temp_array`然后将引用推`@temp_array`送到我的`@temp_routing_array`.

而且，当我们这样做时，**您的代码中有一个错误**。我正在获取`$setup`、`$process`和`$processid`，但我正在存储（注意变量名的大小写）`$Setup`、`$Process`和`$ProcessID`。

现在，我们进入 foreach 循环**和另一个错误**。的价值是`$Code`多少？它没有任何价值，因为变量`$Code`只存在于上面的`while`循环中。当你用 声明一个变量时`my`，一旦你离开一段代码，这个变量的值就会丢失。

[`use strict;`](http://perldoc.perl.org/strict.html)如果您有并且[`use warnings;`](http://perldoc.perl.org/warnings.html)在程序的顶部，则可能会捕获此错误以及上述错误。

让我们看看这个循环：

```
foreach ( @{ $Routings{$Code} } ) {
    my $ProcessCodeID = @$_[0];
    my $SetupMins = @$_[1];
    my $ProcessMins = @$_[2];
} 
```

此`foreach`循环使用过时的样式，您假设您正在循环访问`$_`变量。它令人困惑，大多数人已经学会不使用它。让我们重写它：

```
my @routing_code_ref_array = @{ $Routings{$Code} };

foreach my $routing_array_ref (@routing_code_ref_array) {
    my @routing_array = @{ $routing_array_ref };

    my $ProcessCodeID  = $routing_array[0];
    my $SetupMins      = $routing_array[1];
    my $ProcessMins    = $routing_array[2];
} 
```

请记住，这`$Routings{$Code}`是对数组的引用。在我的第一行中，我取消引用它。在原始代码中，取消引用发生在`foreach`循环中。不仅是`$Routings{$Code}`一个数组引用，而且该数组中的每个条目都是对另一个数组的引用。它是一个[数组数组](http://perldoc.perl.org/perllol.html)。

因此，我`@routing_code_ref_array`的每个条目都是对另一个数组的引用，我再次取消引用。现在我只是将每个数组元素的值放入常规的 Perl 标量变量中。

# 已经足够！

抱歉，解释太长了，但是您有一些涉及引用、类、方法、构造函数、对象和一大堆相当高级的 Perl 主题的代码。以及我指出的一些错误。可以用几个标准 Perl pragma 捕获的错误：`use strict;`和`use warnings;`.

如果有什么可以带走的，那就是：

*   `@$foo{$bar}[4]`或`@{ $foo{bar} }[4]`或（更准确地说）`${ $foo{bar} }[4]`或（更清楚地）之类的东西`$foo{bar}->[4]`是对更复杂数据结构的引用。基本的 Perl 数据结构一次只能保存一个项目。通过使用对其他数据结构的引用，您可以拥有数组的数组或哈希数组或哈希的哈希或数组的哈希，甚至哈希数组的哈希数组。不要惊慌，并尝试从内到外解析这些事情。有时，如果您可以在多行中处理特别复杂的数据结构，会更容易。
*   如果你要遇到复杂的结构，`Data::Dumper`是你的朋友。它将快速揭示这些过于复杂的结构的结构，并可以帮助您调试程序的问题。
*   在您的程序中使用`strict`和。`warnings`这些会发现很多编程问题。正如我所说，我发现两个与局部变量的范围有关，并且在变量名的情况下输入错误。标准化变量名也是一个伟大的想法。这两种方法是 camelCasing 并且只使用下划线和小写字母。这样，您就知道它总是`$foo_bar`并且从不`$Foo_Bar`or `$FooBar`or `$fooBar`。旧标准是驼峰式大小写，第一个字母是小写字母。新标准仅使用小写字母和下划线。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T03:15:48.713

它实际上并没有尝试*数据*`return`——它只是用数据创建变量，然后立即对数据不做任何事情。尝试这个：

```
foreach ( @{ $Routings{$Code} } ) {
    my $ProcessCodeID = @$_[0];
    my $SetupMins = @$_[1];
    my $ProcessMins = @$_[2];
    print "$Code: $ProcessCodeID, $SetupMins, $ProcessMins\n";
} 
```

除非您在循环中使用变量，否则没有多大意义。

复杂的`@{ $foo{$bar} }`构造告诉 Perl 将`$foo{$bar}`其视为一个数组。`$foo{$bar}`是哈希查找。（见`%Routings = ();`顶部的？声明并初始化散列。）

Perl 绝对是简洁的，但这样的事情足以让我决定用 Ruby 等新语言编写新代码。这段代码在 Ruby 中可能也不会好很多，而且精通其中任何一种的人都不会真正关心，但您可能希望借此机会在需要维护它们时重新编写工具。

# r - 分解时间序列

> ID：10202201
> 
> 赞同：1
> 
> 时间：2012-04-18T03:03:18.587
> 
> 标签：r, time-series

我目前正在使用每周计数的时间序列，但分母仅作为每月总数提供。我想将它们合并以处理费率。

一年的数据看起来像这样： `173 173 169 180 173 167 187 175 174 154 163 163`
从 2010 年 1 月开始到 12 月。

我通常会在 SAS 中使用 PROC EXPAND 之类的东西，但是为了尝试学习 R，我试图完全在 R 中实现这个项目。

似乎我应该使用类似以下的方法将这些值插入为三次样条曲线`zoo`，但经过几次尝试，我搁浅了。我有两个实施问题希望人们能提供帮助：

1.  使用类似 na.spline 的东西会给我插值，但据我所知，它们是错误的。上面的数据不是一个单一的时间单位，每月采样一次。这是*月份总数*，因此每周系列应该有四个插值点 ~ 1/4 的量级。

2.  有没有使用实际日期的方法？虽然通过创建四个新条目将每月系列扩展到每周系列在抽象上是有意义的，但并非所有月份都有四个星期。

在 SAS 中，作为参考，它将涉及以下内容：

```
PROC EXPAND data=work.denom out=work.weekly from=month to=week;
    ID month;
    CONVERT denominator / method=SPLINE observed=TOTAL;
run; 
```

where`month`是特定日期的时间序列索引（我选择了当月的 1 日），并且`denominator`变量是从每月扩展到每周序列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-18T11:29:06.387

您可以使用 package.json 分解时间序列`tempdisagg`。首先，您将 using 函数分解`da`为每日采样的时间序列，然后您可以聚合为每周 using`xts`的`apply.weekly`函数。请看下面的代码：

```
library(tempdisagg)
library(lubridate)
library(xts)

df <- data.frame(
  date =  ymd("2010-01-01") + months(0:11),
  value = c(173, 173, 169, 180, 173, 167, 187, 175, 174, 154, 163, 163)
)

# Disaggregate to daily
df_da <- td(df ~ 1, to = "daily", method = "denton-cholette", conversion = "sum")$values

# Aggregate to weekly
data <- as.xts(df_da$value, order.by = df_da$time)
weekly <- apply.weekly(data,sum)

plot(weekly, type = "p") 
```

输出（您可以在 2010 年的第一周和最后一周看到“异常值”，因为那一周没有满，例如 2010 年 1 月 4 日是星期一）：

[![在此处输入图像描述](../Images/9a2c17685fec2984b3eadab2f249e01b.png)](https://i.stack.imgur.com/WyDz7.png)

# ios5 - 滑动图像以更改 UIScrollView 和 UIPageControl

> ID：10202206
> 
> 赞同：1
> 
> 时间：2012-04-18T03:03:54.977
> 
> 标签：ios5, uiscrollview, uiimage, swipe, uipagecontrol

恐怕我信息超载了。我的 iPad 应用程序 (iOS 5.1) 有一个教程页面。我正在尝试以这样一种方式创建教程页面，即用户可以在图像（显示教程信息）上向左或向右滑动以移动到教程的上一部分或下一部分。

```
_scrollview = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 768, 704)];
_scrollview.backgroundColor = [UIColor grayColor];
_scrollview.contentSize = CGSizeMake(700, 700);
_scrollview.minimumZoomScale = 1.0;
_scrollview.maximumZoomScale = 1.0;
_scrollview.pagingEnabled = YES;

_imgViews = [NSMutableArray arrayWithCapacity:NUMPICS];
for (int i = 0; i < NUMPICS; i++) {
    NSString *imgPath = [NSString stringWithFormat:@"%@/%d.png", [[NSBundle mainBundle] resourcePath], i+1];
    UIImage *image = [UIImage imageWithContentsOfFile:imgPath];
    UIImageView *imgView = [[UIImageView alloc] initWithImage:image];
    imgView.frame = CGRectOffset(imgView.frame, 10, 10);
    [_imgViews addObject:imgView];
    [_scrollview addSubview:imgView];
}
[_scrollview bringSubviewToFront:[_imgViews objectAtIndex:0]];

UISwipeGestureRecognizer *swipeLeft = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeNext:)];
swipeLeft.direction = UISwipeGestureRecognizerDirectionLeft;
[_scrollview addGestureRecognizer:swipeLeft];

UISwipeGestureRecognizer *swipeRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipePrev:)];
swipeRight.direction = UISwipeGestureRecognizerDirectionRight;
[_scrollview addGestureRecognizer:swipeRight];

[self.view addSubview:_scrollview];

_pageview = [[UIPageControl alloc] initWithFrame:CGRectMake(0, 654, 768, 50)];
_pageview.numberOfPages = [_imgViews count];
_pageview.currentPage = 0;
_pageview.backgroundColor = [UIColor grayColor];
_pageview.userInteractionEnabled = NO;
[self.view addSubview:_pageview]; 
```

但这显然不是我想要的。我现在可以滑动页面来移动图像，但我想滑动图像（这将占据整个屏幕并让它扫到下一张图像。请注意，这必须以编程方式完成，而不是通过情节提要IB的。

实现这一目标的最佳方法是什么？

谢谢

# javascript - 是否可以在不使用浏览器插件的情况下在标准 Web 应用程序中获取嵌套文件夹信息？

> ID：10202208
> 
> 赞同：2
> 
> 时间：2012-04-18T03:04:11.793
> 
> 标签：javascript, html, browser, file-permissions, directory

阅读了这个问题的答案： [如何在 Web 应用程序中上传文件夹](https://stackoverflow.com/questions/7844356/how-to-upload-folder-in-web-application)'，Web 应用程序是否能够浏览客户端用户机器上的文件夹结构？

例如，这对于上传嵌套文件夹结构中的所有文件和子文件夹很有用，而用户不必自己导航整个目标文件夹层次结构。

我认为这是不可能的，因为**HTML/Javascript 本身执行**（不与 Java 或 Flash 插件结合使用）无权浏览客户端计算机的文件夹？但是我的一些同事不同意，所以我想把这个问题放在那里。

如果*有*可能，那怎么做？我在这里寻找理论，而不是完整的代码解决方案，但不是那么理论，以至于您从未验证过它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T03:36:36.767

如果您想包含特定文件夹/子文件夹中的所有文件.....请查看以下链接：

[http://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/144152/how-to-list-all-files-in-a-folder-include-subfolder-files](http://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/144152/how-to-list-all-files-in-a-folder-including-subfolder-files)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:11:00.957

答：不可能

由于没有人回答，而且我在阅读 W3C 规范和 IEFT HTML 和 HTTP RFC 时也找不到一丝怀疑，我 99% 确信这是不可能的（可能是为什么没有人回答）。

1.  这将是一个安全风险。如果网页可以浏览文件夹，则您的个人数据可能会被从 C 盘根目录开始浏览的网站泄露。

2.  < *input type="file" ... /* > 标签不返回文件路径信息，只返回文件流及其元数据，因此怀疑是否有其他 HTML 实体可用于回发文件路径关于文件上传的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T05:31:07.447

HTML 标准 FileOpenDialog 是从您的浏览器提示的操作系统本机（本机代码已在浏览器开发中完成<-这就是您需要插入它的原因）

标准（非插件）打开文件对话框将触发本机操作系统控制的文件打开器....如果操作系统不支持文件夹/目录选择，那么如果不使用插件，您将无能为力（因为某些插件是编写的在本机代码中，您不能使用客户端脚本语言来接管您的操作系统的本机控制）。

# google-app-engine - 在 GAE 上部署 scala 应用程序时出错

> ID：10202210
> 
> 赞同：0
> 
> 时间：2012-04-18T03:04:44.533
> 
> 标签：google-app-engine, scala, scalatra

我正在尝试开发一个 Scala Web 应用程序并尝试部署到 GAE。从 sbt appengine 提示 (appengine-deploy) 部署应用程序时，我收到此错误。我不知道为什么会发生这种情况，但在本地部署可以正常工作。

```
com.google.appengine.tools.admin.HttpIoException: Error posting to URL: https://appengine.google.com/api/appversion/create?app_id=jugcep&version=1.0& 
```

500内部服务器错误

服务器错误 (500) 发生服务器错误。

无法更新应用程序：发布到 URL 时出错：[https](https://appengine.google.com/api/appversion/create?app_id=jugcep&version=1.0&) ://appengine.google.com/api/appversion/create?app_id=jugcep&version=1.0& 500 内部服务器错误

服务器错误 (500) 发生服务器错误。

请参阅日志 [/var/folders/2L/2LXF1rCtFnaVepqm8nLO8E+++TI/-Tmp-/appcfg2634201961391003721.log] 了解更多信息。[错误] [错误] {file:/Users/prassee/scalaWorkspace/jcep/}default-479528/compile:appengine-deploy: error execution appcfg [error] Total time: 7 s, completed Apr 18, 2012 10:11:下午 48 点

```
Exception in thread "Thread-5" java.io.IOException: Broken pipe
at java.io.FileOutputStream.writeBytes(Native Method)
at java.io.FileOutputStream.write(FileOutputStream.java:260)
at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
at sbt.BasicIO$.read$1(ProcessImpl.scala:108)
at sbt.BasicIO$.transferFullyImpl(ProcessImpl.scala:112)
at sbt.BasicIO$.transferFully(ProcessImpl.scala:88)
at sbt.BasicIO$.connectToIn(ProcessImpl.scala:79)
at sbt.BasicIO$$anonfun$input$1.apply(ProcessImpl.scala:80)
at sbt.BasicIO$$anonfun$input$1.apply(ProcessImpl.scala:80)
at sbt.SimpleProcessBuilder$$anonfun$2.apply$mcV$sp(ProcessImpl.scala:383)
at sbt.Spawn$$anon$3.run(ProcessImpl.scala:20) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T04:50:42.210

Scala 并未在 GAE 上得到官方支持，但它当然可以工作，只要它看起来像 Java 类/JAR 就不能区分。

从堆栈跟踪中，我能想到的是，无论您尝试做什么都是尝试访问文件系统进行写入，这是不可能的，因为 GAE 不会将写入写入其文件系统。你能解释一下你想要做什么吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:06:47.613

您要部署的应用程序有多大？大小有一些限制，但对于大多数人来说应该足够了：[http ://en.wikipedia.org/wiki/Google_App_Engine#Hard_limits](http://en.wikipedia.org/wiki/Google_App_Engine#Hard_limits)

你知道在管道破裂之前部署有多远吗？是一开始的吗？

# java - 是否有长期的 Java 分析器或性能记录器？

> ID：10202214
> 
> 赞同：5
> 
> 时间：2012-04-18T03:05:13.013
> 
> 标签：java, profiling, performance-testing

我的服务器应用程序存在性能问题（Hi-CPU）。但是这个问题只有在服务器运行很长时间（平均一周）时才会出现。我尝试使用 Netbeans 内置分析器来诊断问题，但运行几个小时后它只是停止响应。

有没有办法对应用程序进行长期监控？谢谢。

**更新：这不是一个网络应用程序**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T03:41:32.087

如果您还没有这样做（如果您使用的是 JDK 6 update 7 或更高版本），您应该看看[Visual VM 。](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/index.html)我敢肯定它会很令人欣慰，因为它是 Netbeans 分析器对 Java 核心的“改编”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T04:40:10.277

我过去曾使用 perf4j 进行性能记录以查找瓶颈

[http://www.infoq.com/articles/perf4j](http://www.infoq.com/articles/perf4j)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-30T23:33:28.540

我编写了一个性能记录器工具，它可以对 cpu、内存和线程计数等指标进行采样，并使用 log4j 记录它们。通过将性能日志与您的应用程序日志进行比较，您可以轻松检测性能模式并分析您的应用程序。享受！

[性能记录器](https://github.com/otnielba/Performance-Logger)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T03:46:38.803

我对那里的分析工具了解不多，所以我不会推荐分析工具。

相反，我要做的是使用[AspectJ](http://www.eclipse.org/aspectj/)将日志记录 ( [Log4j](http://logging.apache.org/log4j/1.2/index.html) ) 语句注入我的代码。如果您知道您知道要监控的某些区域，那么只需在这些特定切入点处注入日志记录。否则，如果您想查看所有内容，那么您可以概括您的切入点并全部注入。

收集一周的日志，然后寻找可能“不正常”的行为。这些日志文件可能会很长，具体取决于您决定记录的内容，因此您可能需要使用一些文件解析来收集信息，例如：

*   # 每个方法的调用次数
*   某些方法调用之间的时间
*   我相信您可以在了解您的应用程序细节的基础上想到其他人

将一周开始的这些数字与您的表现下降时的数字进行比较。如果您得到明显的性能影响，那么我想这些将非常明显地反映在这种性质的日志文件中。

这可能比运行开箱即用的分析工具要多一些工作，但它非常灵活，如果您以前没有使用过 AspectJ，这可能是一个很好的学习体验。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T03:57:30.160

Compuware提供了一个商业产品，您可以考虑使用[DynaTrace](http://www.dynatrace.com/)。*我不为 Compuware 工作，也从未为 Compuware 工作过*，但是我目前的组织目前正在考虑在我们的生产环境中使用 Dynatrace。

根据您正在运行的 Java 应用程序的类型，无论是基于桌面的还是基于服务器的，安装都将向类路径添加一个 jar（以及向您的网络添加一个网络设备）。运行应用程序会导致检测数据被发送到 Dynatrace 服务器，您可以在其中检索它，甚至在整个系统中跟踪单个用户路径和事务（无论使用何种技术）。

Dynatrace 是我希望您始终保持运行的东西，而不仅仅是在您想要诊断特定问题时。此外，Dynatrace 并不便宜——您可能看到每台服务器的成本为 5 位数，但据我所见，它似乎几乎像一个永久运行的调试器一样工作，但没有太多的性能损失（< 5%）。

我不知道您正在运行什么类型的应用程序，但我们的应用程序是基于 Java EE 的 Web 应用程序，与我们的一些后端服务器连接。

高温高压

# java - 如何处理/理解 Java 中字符串中的一些奇怪符号，如 %2B、%5E20？

> ID：10202215
> 
> 赞同：1
> 
> 时间：2012-04-18T03:05:19.353
> 
> 标签：java, escaping

我调试了现有项目并得到了一个字符串变量：

```
"q=%2B%28%28%28keywords_en%3A%28pp%3F+OR+pp%29%29%29%29+%28+name%3A%28pp%3F%29%5E20+number%3A%28pp%3F%29%5E20+creator%3A%28OR%5C%3Art.org.WuoUser%5C%3A11%29%5E2+modifier%3A%28OR%5C%3Art.org.WuoUser%5C%3A11%29%5E2+%29+_val_%3A%22recip%28rord%28modifyTimestamp%29%2C1%2C1000%2C1000%29%22%5E2"; 
```

我有点困惑这些“%2B、%28、%3A、%5E、%5E20”代表什么？如果它们是一些转义字符，我怎样才能得到相应的人类可读的字母？如果有人可以提供一些帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T03:10:20.637

您可以使用以下方法对其进行解码：

```
String decodedString = URLDecoder.decode(encodedString, "UTF-8"); 
```

（或者如果不是 UTF-8，则任何合适的字符编码）。

# php - 如何删除文本框中的 $_POST 回显

> ID：10202217
> 
> 赞同：2
> 
> 时间：2012-04-18T03:05:29.170
> 
> 标签：php, post, input, echo, reset

按下重置按钮后，如何删除文本中的 echo $_POST？这是我的代码，我认为这是正确的，但它根本不起作用。

**HTML**

```
<input type="text" class="text" name="email" value="<?php if(isset($_POST['email'])) echo $_POST['email']; ?>"/>

<input type="reset" value="Clear" name="reset" /> 
```

**PHP**

```
if (isset($_POST['reset'])){
    unset($_POST);
} 
```

网站参考：[http ://www.veryinternational.net/skunk5/page-4.php](http://www.veryinternational.net/skunk5/page-4.php)

注意：尝试填写一个必填字段（标有红色星号），然后按左侧的第一个按钮。尝试按第二个按钮，必须清除文本框上的消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T03:14:12.810

你不需要 php 来重置你需要 javascript 的表单。

内置的 HTML 重置输入类型，将表单重置为原始值（这是您的 PHP $_POST[email] 值）

此外，您在 PHP 中对 $_POST['reset'] 的测试永远不会运行，因为 HTML 重置按钮没有提交......

为了将表单字段值更改为空白，您需要使用 java 脚本函数。这是一个例子

```
<form name="data_entry" action="#">

Company Name: <input type="text" size="35" name="company_name">

Select Business Type: <input type="radio" name="business_category" value="1"> Manufacturer
<input type="radio" name="business_category" value="2"> Whole Sale Supplier
<input type="radio" name="business_category" value="3"> Retailer
<input type="radio" name="business_category" value="4"> Service Provider

Email Address: <input type="text" size="30" name="email">

Keep Information Private: <input type="checkbox" name="privacy">

<input type="button" name="reset_form" value="Reset Form" onclick="this.form.reset();">

<input type="button" name="clear" value="Clear Form" onclick="clearForm(this.form);">
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T03:19:23.153

您在这里有两个版本的重置：

```
<input type="reset" value="リセット" name="reset" /> 
```

在用户进行任何输入之前，这会将 HTML 表单重置为其原始状态。这意味着，您在生成页面时已经放在那里的数据将保留在那里。这就是链接页面的工作方式。

```
<input type="submit" value="Clear" name="reset" /> 
```

这将以当前填写的状态提交表单。但是，当您将该按钮设置为提交按钮时，您将拥有`["reset"]=> string(5) "Clear"`您的`$_POST`or`$_GET`数据。我认为这更符合您的要求。

# javascript - 如何向“this.form.submit();”添加锚点？

> ID：10202219
> 
> 赞同：0
> 
> 时间：2012-04-18T03:06:15.013
> 
> 标签：javascript, html, ruby-on-rails, ruby

表格由提交`select_tag`：

```
<%= select_tag :next_status, options_from_collection_for_select(@next_select_list, :id, :name, @next_status_id), { :onchange => "this.form.submit();" } %> 
```

重新加载表单时，如何添加锚点`#selectbox`以跳转到 `<a name="selectbox"> . </a>`附近。`select_tag`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T03:09:25.957

像这样使用[slideTo()](http://jesseprice.com/jquery-slide-to-plugin/)插件是一种选择：

```
$('#selectBox').slideto({
    target : '#test',
    speed  : 0
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T03:31:46.840

提交表单后，页面会重新加载。因此，如果您想导航到某个锚点，请将其包含在 URL 中（即在服务器上进行）。

# php - PHP Regex - 如果匹配包含单词（字符串）则否定匹配

> ID：10202226
> 
> 赞同：2
> 
> 时间：2012-04-18T03:08:10.857
> 
> 标签：php, regex, regex-negation, negative-lookahead

我已经尝试了很多方法来做到这一点，唯一似乎部分做我想要的方法是[使用正则表达式的字符串否定](https://stackoverflow.com/questions/1153856/string-negation-using-regular-expressions)和[如何在正则表达式中否定特定单词中描述的前瞻否定？](https://stackoverflow.com/questions/1240275/how-to-negate-specific-word-in-regex)但我无法让它与我当前的正则表达式一起使用。

假设我有这个字符串：

```
[url=http://www.example.com]this url BB tag should match[/url]
[url=http://www.example.com][spoiler]this url BB tag shouldn't match[/spoiler][/url] 
```

编辑：更深入的字符串不应该返回匹配的调试：

```
[url=http://www.example.com]Lorem[spoiler]this url BB tag shouldn't match[/spoiler]Ipsum[/url] 
```

和当前的正则表达式模式：

```
#\[url=([\w]+?://.*?)\]([^?\n\r\t].*?)\[/url\]#is 
```

编辑：我正在使用以下正则表达式（没有 # 和 #is）在 Regex Buddy 上对其进行调试：

```
\[url=([\w]+?://.*?)\]([^?\n\r\t].*?)\[/url\] 
```

（这两个正则表达式应该对我的应用程序有相同的效果，因为我可以轻松地调整它，所以如果它更有意义，请使用后者）

将匹配字符串中的两行。当and`[spoiler]`之间有字符串时，我希望它不返回匹配项。`[url=xxxx://yyyy]``[/url]`

我认为它可以通过负前瞻来完成，但我似乎无法找到一种方法将其插入当前的正则表达式而不使其无法使用。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T03:22:55.307

这应该可以解决问题。

```
'#\[url=([^\]]+)\](?!\[spoiler\])(.*?)\[/url\]#' 
```

# objective-c - 我怎样才能产生冲动，使 b 点从 box2d/cocos2diphone 中的 a 点移开

> ID：10202228
> 
> 赞同：5
> 
> 时间：2012-04-18T03:08:38.027
> 
> 标签：objective-c, ios, math, cocos2d-iphone, box2d

我在 box2d 对象上施加一个脉冲，如下所示：

```
b2Vec2 impulse = b2Vec2(4.0f, 15.0f);
body->ApplyLinearImpulse(impulse, body->GetWorldCenter()); 
```

我知道这可能是高中数学，我保证我已经努力为自己发现这一点；请原谅我的无知。

如果我有对象 a、b 和 c - 并且对象 a 位于 b 和 c 的中点，我如何创建一个 Box2D 脉冲，以便对象 b 和 c 以速度 v 远离 a？

![以高超的技巧和专注的意图绘制的科学图表](../Images/85c40bc38dc17c19891cacd392128933.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T07:15:15.247

尝试使用这个：

```
b2Vec2 impulseB = bodyB->GetPosition() - bodyA->GetPosition();
impulseB /= impulseB.Length();
impulseB *= predefinedScaleValue; // predefinedScaleValue is your velocity
b2Vec2 impulseC = -impulseB;
bodyB->ApplyLinearImpulse(impulseB, bodyB->GetWorldCenter());
bodyC->ApplyLinearImpulse(impulseC, bodyC->GetWorldCenter()); 
```

我希望很清楚这里发生了什么。如果没有，请问:)

# javascript - 是否使用 Javascript 验证“确认密码”输入，增加任何安全风险？

> ID：10202234
> 
> 赞同：0
> 
> 时间：2012-04-18T03:09:23.753
> 
> 标签：javascript, html

我在 SO 上进行了搜索，发现： [javascripts 访问密码字段值是否被视为安全风险？](https://stackoverflow.com/questions/1631134/is-javascripts-access-to-a-password-fields-value-considered-a-security-risk)

但是，它并没有说明使用 Javascript 进行比较“密码”和“确认密码”之类的操作是否会给已经存在的安全威胁增加安全威胁？

如果你能澄清这个问题，非常感谢。问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T03:13:00.783

不，这不对。如果通过将字符串与 JavaScript 进行比较来构成安全威胁，那么没有人会这样做。JavaScript 是一种客户端语言；如果这就是您的意思，那么任何人都没有网络活动可以嗅探。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T03:15:37.963

一旦确认两个密码相同，您的脚本会做什么？如果它通过网络发送密码，您将回到您链接到的确切问题。

即使您没有在任何地方发送密码，风险 od 代码注入仍然存在

因此，没有额外的安全风险，但也没有消除任何

# android - 类似于 配对游戏

> ID：10202241
> 
> 赞同：0
> 
> 时间：2012-04-18T03:11:03.870
> 
> 标签：android

我想做点什么，我会有 4 个按钮。只有按下 2 个匹配的按钮才会成功。目前我只知道如何处理一个按钮点击，但我不知道如何做到这一点，如果我按下一个按钮，然后再按下另一个按钮.. 失败或成功取决于按下的按钮。

我会用什么来继续实施这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T03:20:45.957

您可以在单击事件上获取当前按钮 id，因此您可以为先前单击的按钮维护一个整数值。并将当前按钮单击与单击的上一个按钮进行比较并执行您的任务..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T03:20:54.493

如果您的意思是要检测两个按钮的同时按下，您可以`OnTouchListener`为按钮设置一个并检测每个按钮何时被按下或释放。稍加记账，您就可以检测用户是否同时按下了两个匹配的按钮。

如果您想跟踪连续的按钮点击，那么您需要某种方法来识别最后点击的是哪个按钮。有几种方法可以做到这一点。一种是为每个按钮分配不同的`OnClickHandler`（或不同的`android:onClick`方法）。另一种方法（在我看来更好）是为每个按钮分配一个唯一的标签值。在 XML 中，标记将是一个字符串，然后您可以使用`Integer.parseInt()`;将其解析为一个 int 值。在代码中它可以是一个整数。然后您的单击处理程序确定按钮的标记值并在程序逻辑中使用它。

您将使用它的方式如下。在您的游戏类中为最后一次单击的按钮定义一个字段。在单击任何按钮之前，它的值应为 -1（表示没有按钮）。然后，当您单击按钮时，确定其身份（从标记或调用的单击处理程序）。检查最后一个按钮和当前按钮是否形成正确的顺序。如果不是，则将最后一个按钮设置为当前按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T16:03:25.817

根据您对每个按钮启动一个新活动的评论，您可能需要考虑使用单个活动，并简单地更改视图。

特别是如果在最后一个活动中单击特定按钮会影响新活动，那么它们似乎真的应该是同一个活动。

但是，如果您真的想使用多个活动，您有几个选择：

1.  将最后按下的按钮存储在 SharePreferences 中。
2.  将最后按下的按钮存储在文件或 SQLite 数据库中
3.  当您启动新活动时，使用 intent.putExtra() 存储最后按下的按钮，以便新活动可以通过 getIntent().getExtra() 访问它

# java - Java - 运行几个主要方法

> ID：10202244
> 
> 赞同：3
> 
> 时间：2012-04-18T03:11:30.610
> 
> 标签：java, main

我有一个 Eclipse 项目重新组合了两个应用程序，我想单独运行第二个应用程序或从第一个应用程序运行，我只需调用 main 方法就可以做到这一点。问题是当我从第一个应用程序启动第二个应用程序时，当我关闭第二个应用程序时，它也会关闭第一个应用程序。我可以避免这种行为并保持第一个应用程序运行吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T03:17:33.930

`System.exit`您的第二个应用程序可能在关闭时发出一个。防止这种情况拖累调用应用程序的唯一方法是在单独的进程中启动它（通过`ProcessBuilder.start`或`Runtime.exec`例如），或者通过`System.exit`自定义安全管理器的方法捕获和阻止通过。

# android - android上的facebook api：空白屏幕而不是auth

> ID：10202245
> 
> 赞同：9
> 
> 时间：2012-04-18T03:11:33.627
> 
> 标签：android, facebook

我已经搜索了过去 3 个小时来寻找有关此问题的答案，但类似的问题没有帮助，所以我终于问了这个问题：

我正在尝试使用 Facebook 的 Android SDK，但我得到了一个“空白”屏幕（它周围有一个框架，但是你期望授权细节的地方我得到了空白）：

![一个空白的屏幕。](../Images/df2127b6dbb05499fb8df56508ba4f6e.png)

单击“登录”会出现相同的页面，只有标题现在是“错误”，并带有一条模糊的消息：

![错误画面。](../Images/6e228a159bff2107a398a02dc7e12e2b.png)

*   我已经检查过哈希键是否正确。我已将哈希键更改为“asdf”之类的荒谬内容，并且日志确实说应用程序正在使用`[some key]`并且不匹配。所以我用“asdf”替换了`[some key]`那个错误就消失了。（此外，如果哈希键不正确，上面的页面甚至不会显示，它只是立即结束身份验证过程。）

*   我已经检查过日期和时间设置是否正确，因此至少 SSL 并没有因此而中断。我也没有在 logcat 中看到任何相关的错误或警告。

*   我确实找到[了一个现有的问题](https://stackoverflow.com/questions/4216147/facebook-connect-for-android-returns-a-blank-login-screen)（没有真正的答案）和链接的[解决方案](http://myunixworld.blogspot.com/2010/11/android-facebook-sdk-issue-fix-for.html?showComment=1294381258058_AIe9_BGDXca377UlwHOlEr_p3SJo12zdJuK42VkyQyYl2Gqsfx9VfB3w5QY1uqNULDAG_frHqG1hhcgBM1zRquKKCw9_dUIT9Zi38PWDCUdDYqSExi6CNZlNfp4TS4132UXnfwoLaNZ7uF7Tw-kvVMMGzG0QWdZiqE484x-7MLu9lvTNgtRbyNfcPdnh8mEWl7COb_xARXlkG0JcrylLGxt0X2xG62H_8QEwdxmbWA0-Dy1UkB5dmArXYRACe2iIibXU6vy6p-1kR2NcSHRpb0UiPujnTI92m_0KKIEZmB6WeQ5zVrJy9FL8saBsFv_bFoZ8Aq2nM9QyhgqYBIwnjamjTsB85YyPgrw0gMNnaBf7bA_STnhZA0PVUziGp3ghwvamKBoiEnh6oCGlptQAXwLKK1IDQS44V6_ZWim7vtuDSXu5Qj-SOHNuWdU7ttqwAhlwWIPAYIIlrXjHX7fSnUHv98ZOjSVFne93h8lnHhwpTjLMB7Wc-SI#c5442685186348999639)，但这似乎已经过时了。（而且它不起作用。）

我在[https://developers.facebook.com/docs/mobile/android/build/#enablesso](https://developers.facebook.com/docs/mobile/android/build/#enablesso)逐字关注 FB 教程，此时我不知道如何在没有错误或警告的情况下进行调试日志。有其他人以前见过这个错误吗？

（我将 Android API 15 与 GitHub 的最新克隆一起用于 FB API。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T03:16:26.420

编辑：我尝试了多个需要 Facebook 登录的不同应用程序，所有这些应用程序都有同样的问题。似乎这可能是 Facebook 上的一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T14:43:53.843

我在 andorid 上使用 Titanium 移动开发时遇到了同样的问题，并且使用 webview 或使用 SSO 都给出了相同的结果。

编辑：已提交错误，因此请同时注册： [https ://developers.facebook.com/bugs/385350798163367?browse=search_4f8ed4596fd900857644164](https://developers.facebook.com/bugs/385350798163367?browse=search_4f8ed4596fd900857644164)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T17:30:46.177

他们意识到了问题并开始调查：

[点击](https://developers.facebook.com/live_status/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-18T13:17:05.300

经过大量的努力，我解决了这个错误。这很简单。2.2 android 版本以上会出现此错误。可能是哈希键错误的原因。

**解决此问题的步骤**

1.  打开作为库添加的 facebook 库 (com.facebook.android)
2.  打开 FaceBook.java 类
3.  在那里我们会发现 private static final int DEFAULT_AUTH_ACTIVITY_CODE = 32665。您应该将**DEFAULT_AUTH_ACTIVITY_CODE 更改为 -1**
4.  现在保存并清理并构建库和您的应用程序

**注意**：

此空白屏幕仅针对最新版本出现。

# blogger - Blogger 的条件标签可以做到这一点吗？

> ID：10202247
> 
> 赞同：0
> 
> 时间：2012-04-18T03:11:42.613
> 
> 标签：blogger

基本上我想用博主的条件标签来做到这一点。可能吗？

```
if blog page type = item page
  if a label called 'test' exists
    <div class='test'>
  else
    <div>
  /if
/if 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T09:31:53.490

取决于你想做什么，在哪里。据我所知， data:post 元素只能在`<b:includable id='main'></b:includable>`标签内访问。这里有一些可以帮助您入门的东西：

```
<b:if cond='data:blog.pageType == &quot;item&quot;'>
  <b:loop values='data:post.labels' var='label'>
    <b:if cond='label.name == &quot;MY LABEL X&quot;'>
      <div>LABEL X specific content.</div>
    </b:if>
    <b:if cond='label.name == &quot;MY LABEL Y&quot;'>
      <div>LABEL Y specific content</div>
    </b:if>
  </b:loop>
</b:if> 
```

目前，该`<b:loop ...>...</b:loop>`方法是我知道访问各个标签名称的唯一方法。这是未经测试的代码，因此您可能需要摆弄它。

# python - 在 Python 的线程中使用全局变量

> ID：10202250
> 
> 赞同：-3
> 
> 时间：2012-04-18T03:12:35.603
> 
> 标签：python, global-variables, python-multithreading

我处于一种情况，我想根据一个变量将一个线程放入一个循环中，该变量在线程中的一个被调用函数中被更改。这就是我想要的。

```
error= 0

while( error = 0)
    run_thread = threading.Thread(target=self.run_test,args=(some arguments))

if ( error = 0)
    continue
else:
    break 
```

现在运行测试调用一个函数，说 A 和 A 调用 B 和 B 调用 C。

```
def A()
      B()
def B()
     c()

def c()
    global error
    error = 1 
```

这就是我想做的，但我无法解决这个问题。如果我尝试打印错误，我会收到代码错误。

有人可以帮我吗？

我是一个初学者，需要克服这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T03:22:16.303

```
error = False

def A():
      B()

def B():
     c()

def c():
    global error
    error = True

def run_test():
    while not error:
        A()
    print "Error!"

import threading
run_thread = threading.Thread(target=run_test,args=())
run_thread.start() 
```

但是，最好将线程子类化并重新实现 run()，并使用异常：

```
def A():
    raise ValueError("Bad Value")

import threading
class StoppableThread(threading.Thread):
    def __init__(self, *args, **kwargs):
        self.stop = False

    def run(self):
        while not self.stop:
            A() #Will raise, which will stop the thread 'exceptionally'

    def stop(self): #Call from main thread, thread will eventually check this value and exit 'cleanly'
        self.stop = True 
```

# ruby-on-rails - 由于子域，无法使用 VMWare 访问 Rails 应用程序？

> ID：10202251
> 
> 赞同：2
> 
> 时间：2012-04-18T03:12:44.043
> 
> 标签：ruby-on-rails, subdomain, vmware, rack-pow

我在我的 Mac 上运行了一个 Rails 应用程序，并且我正在使用安装了 Windows XP 的 VMWare Fusion。

我的 Rails 应用程序使用子域，我通常在我的 Mac 上使用`http://<subdomain>.lvh.me:3000`

-或者-

我还有一个 pow 服务器，可以使用以下命令访问我的 Mac 上的 Rails 应用程序：`http://<subdomain>.<mydomainname>.dev`

* * *

但我无法使用子域访问 VMWare 中的应用程序。我不能使用`lvh.me:3000`或我的 pow 域。

有谁知道如何使这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:40:19.963

要在 VMWare Fusion 中使用带有 lvh.me 的子域，请编辑 Windows 主机文件，对于 Windows 8 消费者预览版，该文件位于

```
C:\WINDOWS\system32\drivers\etc\hosts 
```

您可能需要右键单击此文件并在属性> 安全中为自己授予写入权限，否则奇怪的是，尽管您是管理员，但您可能无法保存该文件。

在记事本中打开主机文件，并将您的 IP 地址映射到主机名，每行一次：

```
192.168.8...      lvh.me
192.168.8...      promoter.lvh.me
192.168.8...      discover.lvh.me 
```

打开浏览器并像往常一样访问它们

[http://lvh.me:3000](http://lvh.me:3000)
http://promoter.lvh.me:3000
[http://discover.lvh.me:3000](http://discover.lvh.me:3000)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T03:37:51.930

您应该使用桥接网络模式运行虚拟机。这将使机器与主机操作系统位于同一网络上。

如果这不起作用，我会使用您的 VM 的主机文件为您的主机添加手动条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T03:33:55.910

如果您的网络上有一个 DNS 服务器将子域分配给您的工作站 IP 地址，那么您可以将虚拟机网络适配器配置为直接连接到物理网络。这对我有用，尽管我只使用了我的 IP 地址而不是实际名称。

如果您没有名称服务器，那么您可以在虚拟机上编辑主机文件，但如果您使用动态 IP，这会变得很麻烦（每次从挂起恢复时都必须记住编辑它，等等）。

# ruby - 为什么 windows 上的 openssl 会产生错误，但 centos 上不会：PKCS12_parse: mac verify failure (OpenSSL::PKCS12::PKCS12Error)

> ID：10202254
> 
> 赞同：6
> 
> 时间：2012-04-18T03:13:35.603
> 
> 标签：ruby, openssl

```
require 'openssl'

if ARGV.length == 2
    pkcs12 = OpenSSL::PKCS12.new(File.read(ARGV[0]), ARGV[1])
    p pkcs12.certificate
else
    puts "Usage: load_cert.rb <path_to_cert> <cert_password>"
end 
```

运行它会在 Windows 上产生错误，但在 linux 上不会。

**错误：**

> OpenSSL::PKCS12::PKCS12Error: PKCS12_parse: mac verify failure
> from (irb):21:in `initialize`
> from (irb):21:in `new`
> from (irb):21
> from C:/Ruby192/bin/irb:12:in`<main>`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T02:38:24.373

```
File.read("UserCert.p12", "rb") 
```

问题是ruby默认将文件读取为文本，需要强制将文件读取为二进制，它解决了问题

# ios - CADisplayLink 导致 touchesBegan 和 touchesEnded 之间的延迟？

> ID：10202259
> 
> 赞同：0
> 
> 时间：2012-04-18T03:14:37.710
> 
> 标签：ios, opengl-es

我使用 CADisplayLink（以 20 FPS 运行）来重绘我的 Opengl ES 场景。当我这样做时，我发现 touchesBegan 和 touchesEnded 在触摸事件之间存在巨大的延迟，几乎 200 毫秒或更多。

如果我关闭 CADisplayLink，则延迟会减少到 50 毫秒。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:31:10.853

我假设您的 CADisplayLink 正在主线程上运行，因为您没有另外指定。如果是这种情况，那么您的渲染操作可能会使主线程过载，从而阻止处理您的触摸事件（所有触摸事件都在主线程上处理）。

我对类似问题的解决方案是使用串行 GCD 队列进行 OpenGL ES 渲染操作，并结合调度信号量以确保一次只渲染一帧以响应 CADisplayLink 触发。[我的这个答案](https://stackoverflow.com/a/5956119/19679)详细描述了这个过程，我链接到使用它的应用程序的源代码。作为附带的好处，这可以将您在较新的多核设备上的渲染速度提高多达 40%。

# iphone - strncpy 对 iPhone 开发安全吗？

> ID：10202266
> 
> 赞同：0
> 
> 时间：2012-04-18T03:15:43.283
> 
> 标签：iphone, c++, string, printf

`strncpy()`iPhone 开发安全吗？

如果没有，建议使用什么更好的 String API 以确保安全？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T03:26:41.733

如果你知道 的局限性`strncpy()`，那就没问题了。我避免使用它是因为我不喜欢它的局限性，这有两个方面：

*   它不保证空终止
*   它总是写入目标缓冲区的每个字节

这意味着如果你写：

```
char little[10];
char large[20480];

strncpy(little, sizeof(little), "abcdefghijklmnopqrstuvwxyz");
strncpy(large,  sizeof(large),  "abcdefghijklmnopqrstuvwxyz"); 
```

then`little`不是一个以 null 结尾的字符串，尽管没有发生缓冲区溢出，并且 large 有 20454 个 null 复制到它的尾端。两者都很麻烦。

*   考虑是否在 iOS`strlcpy()`上`strlcat()`可用；它们在 Mac OS X 上。

如果您使用 C++ 编码，则根本不应该使用 C 字符串，或者仅在系统服务需要使用的最有限的情况下使用，然后您应该有一个采用 C++ 字符串的覆盖函数（内联）并将`somestring.c_str()`值传递给系统服务。

如果您使用 Objective-C 进行编码，您将使用 NS* 字符串。

因此，仅考虑`strncpy()`您是否使用 C 进行编码。即便如此，也要谨慎对待。

我有一篇论文（我不声称它有任何新颖性——我从其他人那里收集了这个想法）：

*   如果您知道字符串的长度、目标缓冲区和源字符串的长度（并且您知道您正在调用的函数的缺点——很快，传递的长度代表什么） ，您只能安全地使用像`strcpy()`、和之类的函数? ^((1)) )。`strncpy()``strcat()``strncat()``strncat()`
*   如果你知道每件事有多长，你就不需要使用像`strcpy()`;这样的函数。您可以使用`memmove()`（或`memcpy()`）。
*   所以字符串复制和移动功能应该是无关紧要的；您不需要在安全代码中使用它们，因为您知道所有内容有多长，因此可以使用内存例程。

* * *

^((1))长度是考虑到当前字符串后目标缓冲区中的可用空间。因此，为了能够使用`strncat()`，您必须知道字符串在目标字符串中的长度以及可用的总长度，以便您可以`strncat()`跳过字符串的初始段，然后连接第二个字符串的部分或全部. 但是，如果你知道这一点，你可以使用：

```
strncpy(target + curr_target_strlen, source, target_size - curr_target_strlen); 
```

这将“更有效”，因为它不涉及跳过字符串的前导部分（顺便说一句，如果您正在构建一个包含大量`strncat()`or`strcat()`操作的长字符串，这可能会导致二次行为）。或者，鉴于您知道所有尺寸，您可以使用`memmove()`：

```
size_t copy_length = target_size - curr_target_strlen;
if (copy_length > source_strlen)
    copy_length = source_strlen + 1;
memmove(target + curr_target_strlen, source, copy_length); 
```

而且，除非我一时冲动编写的代码中出现了一个错误，否则可以避免`strncat()`. 如果你总是使用`strncat()`指向字符串末尾的 null 的第一个参数，它有它的用途（并且可以在汇编程序中进行优化。否则，它不是一个好的选择 - IMNSHO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T03:17:00.613

指定您对安全的含义，无论如何`strncpy`在 iPhone 上与在其他所有平台上一样安全。

既然你需要`strncpy`我猜你没有使用`NSString`s 所以我认为使用它没有任何问题。

# c++ - 使用 Cg 进行体积渲染：编译错误：语义“位置”在此配置文件中不可见

> ID：10202269
> 
> 赞同：2
> 
> 时间：2012-04-18T03:15:55.063
> 
> 标签：c++, opengl, graphics, gpu, cg

我现在正在编写代码以**使用 OpenGL、Cg 和 C++ 实现直接光线投射体积渲染。**我的计算机系统是 Win7，我的图形是 nVidia GTX570。

实际上，我已经成功实现了直接光线投射体积渲染的基本功能。但是现在我想在它上面添加照明，我使用局部照明模型。**添加几行照明代码后，出现Cg编译器错误。添加之前，它运行良好。**

我使用的 Cg 配置文件是**CG_PROFILE_VP40**和**CG_PROFILE_FP40**。

现在我发布我的 Cg 代码：

```
#define kNumberOfRaySteps 800
// Define interface between the application and the vertex program
struct app_vertex
 {
   float4 Position     : POSITION;
   float4 TexCoord     : TEXCOORD1; 
   float4 Color        : COLOR0;
};

// Define the interface between the vertex- and the fragment programs
struct vertex_fragment
 {
   float4 Position    : POSITION; // For the rasterizer
   float4 TexCoord    : TEXCOORD0;
   float4 Color       : TEXCOORD1;
   float4 Pos         : TEXCOORD2;
};

struct fragment_out 
{
  float4 Color      : COLOR0;
};

//Blinn-Phong illumination
float3 shading(float3 N, float3 V, float3 L) {
    // material properties
    float3 Ka = float3(0.1, 0.1, 0.1); // ambient
    float3 Kd = float3(0.6, 0.6, 0.6); // diffuse
    float3 Ks = float3(0.2, 0.2, 0.2); // specular
    float n = 100.0; // shininess
    // light properties
    float3 lightColor = float3(1.0, 1.0, 1.0);
    float3 ambientLight = float3(0.3, 0.3, 0.3);
    // Calculate halfway vector
    float3 H= normalize(L + V);
    // Compute ambient term
    float3 ambient = Ka * ambientLight;
    // Compute the diffuse term
    float diffuseLight = max(dot(L, N), 0);
    float3 diffuse = Kd * lightColor * diffuseLight;
    // Compute the specular term
    float specularLight = pow(max(dot(H, N), 0), n);
    if (diffuseLight <= 0) specularLight = 0;
    float3 specular = Ks * lightColor * specularLight;
    return ambient + diffuse + specular;
}

// Raycasting vertex program implementation
vertex_fragment vertex_main( app_vertex IN )
{    
  vertex_fragment OUT;

  // Get OpenGL state matrices
  float4x4 ModelView = glstate.matrix.modelview[0];//model view matrix 0
  float4x4 ModelViewProj = glstate.matrix.mvp;//modelview-projection matrix

  // Transform vertex
  OUT.Position = mul( ModelViewProj, IN.Position );
  OUT.Pos =  mul( ModelViewProj, IN.Position ); 
  OUT.TexCoord = IN.TexCoord;
  OUT.Color = IN.Color;
  return OUT;
}

// Raycasting fragment program implementation
fragment_out fragment_main( vertex_fragment IN,
                            uniform sampler2D tex, //back face
                            uniform sampler2D preint_table,//pre-intergration classification
                            uniform sampler3D volume_tex, //volume data
                            uniform float stepsize,
                            //add local illumination
                            uniform float3 lightPosition,//the external light position
                            uniform float3 eyePosition,//the eye position
                            uniform sampler3D normal_vec//normal vectors
                        )     
{
  fragment_out OUT;
  // find the right place to lookup in the backside buffer
  //normalize the spatial position to range [0,1]
  float2 texc = ((IN.Pos.xy / IN.Pos.w) + 1) / 2; 
  // the start position of the ray is stored in the texturecoordinate
  float4 start = IN.TexCoord; 
  float4 back_position  = tex2D(tex, texc);
  float3 dir = float3(0,0,0);
  dir.x = back_position.x - start.x;
  dir.y = back_position.y - start.y;
  dir.z = back_position.z - start.z;
  // the length from front to back is calculated and used to terminate the ray
  float len = length(dir.xyz); 
  float3 norm_dir = normalize(dir);
  float delta = stepsize;
  float3 delta_dir = norm_dir * delta;
  float delta_dir_len = length(delta_dir);
  float3 vec1 = start.xyz;//position of back point
  float3 vec2 = start.xyz;//position of front point
  float4 col_acc = float4(0,0,0,0);
  float alpha_acc = 0;//accumulation of alpha value(opacity)
  float length_acc = 0;
  float4 color_sample;
  float alpha_sample;
  float4 lookup = float4(0.0,0.0,0.0,0.0);
   //set background color to blue
  float4 backgroundColor = float4(1.0,1.0,1.0,0.0);

  //loops:sample points
  for(int i = 0; i < kNumberOfRaySteps; i++)
  {
      vec2 += delta_dir;

      lookup.x = (tex3D(volume_tex,vec1)).x;//scalar value of back point
      lookup.y = (tex3D(volume_tex,vec2)).x;//scalar value of front point
      color_sample = tex2D(preint_table,lookup.xy);
      alpha_sample = color_sample.a;

     //add code for illumination
     float3 N = tex3D(normal_vec,start.xyz).xyz;//normal vector
     //calculate light and viewing directions
     float3 L = normalize(lightPosition - IN.Position.xyz);
     float3 V = normalize(eyePosition - IN.Position.xyz);

      col_acc   += (1.0 - alpha_acc) * color_sample * alpha_sample * 2;

      //add ilumination color 
      col_acc += float4(shading(N,V,L),0.0);

      alpha_acc += (1.0 - alpha_acc) * alpha_sample;
      vec1 += delta_dir;//next sample point
      length_acc += delta_dir_len;//accumulation of ray length in the cube
      //change the background color from black to other color
      if(length_acc >= len) 
          col_acc += (1.0 - alpha_acc) * backgroundColor;
      // terminate if opacity > 1 or the ray is outside the volume
      if(length_acc >= len || alpha_acc > 0.99) break; 
  }

  OUT.Color =  col_acc;

  return OUT;
} 
```

Cg错误的相关资料： ![在此处输入图像描述](../Images/e6510e5077b9e2d20295d1cf526f83be.png)

我发现如果我抹掉这条线

```
col_acc += float4(shading(N,V,L),0.0); 
```

然后程序运行良好，当然我无法获得照明效果。所以我猜计算照明效果的函数**着色有问题。**

但我无法弄清楚。有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T08:26:18.753

最后，我解决了这个问题。

此错误的原因是我无法访问片段着色器中的**POSITION参数，因为顶点着色器的****POSITION**输出仅进入光栅化器，而不是片段着色器。所以我需要将其作为非**POSITION**传递参数，例如，**TEXCOORD**。在这个程序中，我可以访问参数**Pos**而不是**Position**以获得正确的结果。

不幸的是，没有人回答我。是因为没有多少人用Cg，做GPU编程吗？我想知道为什么。

# c++ - C++：用于高效插入和检索自定义数据的数据结构

> ID：10202275
> 
> 赞同：1
> 
> 时间：2012-04-18T03:16:45.743
> 
> 标签：c++, data-structures, vector, set, sorted

我在 C++（在 Windows 上）中遇到了一种情况，我需要保留一组 int: pair，其中*起始值*是唯一的（我们不需要关心这个）。所需的操作是：

*   插入对
*   检索对 X：这应该返回对 Y，其中 Y 的开始 < X 的开始 < X 的结束 < Y 的结束。如果 Y 不存在，则返回 false。

基本的解决方案是简单地保留一组对。对于检索，我们将依次遍历要检查的集合。这是 O(n)。

我正在寻找更好的解决方案。我目前看到 2 个候选数据结构：

1.  排序的向量
2.  STL 的集合（内部实现为二叉搜索树？）

Sorted Vector：优点：可以自定义二分查找，支持检索操作。这是 O(logn) 缺点：如何有效地插入新对以保持排序顺序。如何避免 O(nlogn) 的重新排序成本？

套装：优点：使用标准插入方法轻松插入。这是 O(1)？缺点：如何避免顺序搜索？如何比 O(n) 做得更好？

谢谢你的建议。

我也对任何其他可以有效地支持上述两种操作的结构（第一个标准是速度；第二个是内存）持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T04:41:07.440

目前尚不清楚范围是否可以重叠，但如果不能重叠，那么这应该有效。我已经包含了一个完整的测试示例。

```
#include <stdlib.h>
#include <assert.h>
#include <limits.h>
#include <map>

struct RangeContainer {
  typedef std::map<int,int> RangeMap;
  typedef std::pair<int,int> Range;

  void insert(const Range &range)
  {
    range_map.insert(range);
  }

  Range find(const Range &x) const
  {
    RangeMap::const_iterator iter = range_map.upper_bound(x.second);
    if (iter==range_map.begin()) {
      return invalidRange();
    }
    --iter;
    Range y = *iter;
    if (y.first<x.first && x.second<y.second) {
      return y;
    }

    return invalidRange();
  }

  static Range invalidRange()
  {
    return Range(INT_MAX,INT_MIN);
  }

  RangeMap range_map;
};

static void test1()
{
  RangeContainer c;
  typedef RangeContainer::Range Range;
  c.insert(Range(1,10));
  c.insert(Range(20,30));
  assert(c.find(Range(-5,-4))==c.invalidRange());
  assert(c.find(Range(1,10))==c.invalidRange());
  assert(c.find(Range(2,9))==Range(1,10));
  assert(c.find(Range(2,10))==c.invalidRange());
  assert(c.find(Range(11,19))==c.invalidRange());
  assert(c.find(Range(21,29))==Range(20,30));
  assert(c.find(Range(20,29))==c.invalidRange());
  assert(c.find(Range(21,30))==c.invalidRange());
  assert(c.find(Range(35,40))==c.invalidRange());
}

int main(int argc,char **argv)
{
  test1();
  return EXIT_SUCCESS;
} 
```

# java - 访问与主代码不同的 JAR 文件中的资源

> ID：10202276
> 
> 赞同：0
> 
> 时间：2012-04-18T03:16:48.523
> 
> 标签：java, file, jar, war

我正在编写一个打包为 WAR 文件的项目，其结构如下：

```
MyProject.war

| --- META-INF/
| --- WEB-INF/
      |--- classes/ (My compiles project classes)
      |   |--- com
      |       |--- package
      |           |--- MyClass.class
      |--- lib/
          |--- random.jar
          |   |--- file1.txt
          |   |--- file2.txt
          |--- MyProject.jar
              |--- com
                  |--- package
                      |--- MyClass.class 
```

如何访问`file1.txt`和`file2.txt`从我的`MyClass.java`文件作为输入流？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T03:27:22.537

只要包含资源的 JAR 在您的类路径中，您就应该能够通过上下文类加载器加载它们。

```
final InputStream stream = Thread.currentThread().getContextClassLoader()
      .getResourceAsStream("file1.txt"); 
```

# sql-server-2008 - 如何在带有 IIS 的 BIDS 中使用手动 T-SQL 事务？

> ID：10202277
> 
> 赞同：1
> 
> 时间：2012-04-18T03:16:53.607
> 
> 标签：sql-server-2008, tsql, iis, bids

在使用 BIDS 和 SSIS 时，我和他们一样绿色，今天才开始。我想创建一个表并从 Access 数据文件中导入一些数据。我得到了它的工作，但我不得不继续删除部分结果，我认为将它全部包装在 Transaction 中会是一个好主意。我没有运行 MSDTC，所以我想我会使用手动事务。我尝试添加一个包含 BEGIN TRANS 的 Exectute T-SQL 任务，然后我又添加了两个带有 COMMIT TRANS 和一个带有 ROLLBACK Trans 的任务。如果数据流任务失败，它会回滚，否则它会提交。当它到达提交时，它总是说没有开始事务。包裹看起来像这样。这是否受支持，我只是缺少设置一些魔法属性来使其工作？

![在此处输入图像描述](../Images/89d1d5e59ad6d01161fe63891b9d03a3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:40:12.587

由于这些任务中的每一个都是独立运行的，这就是您的开始/回滚/提交不起作用的原因。如果只想删除表中的所有数据，请在数据流任务失败时对表执行 TRUNCATE 语句。像这样加载时，我通常每次清表并填充，以测试数据流任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T15:52:36.213

好的，这是我关于如何解决这个问题的建议。我通常会转换数据，以便在执行数据流加载到产品之前不需要回滚。所以我加载到一个临时表并在我考虑将某些东西放入生产表之前清理数据或删除不良记录或检查是否存在会导致回滚的东西。如果你有一些阻碍，它们应该在你投入生产之前很久就发生了。如果您只是想查找和处理格式错误的记录，临时表将允许您这样做，将坏数据发送到异常表等，所有这些都不会干扰 prod。当您拥有最终的数据流以进行生产时，就知道在这一点上一切都很好。我们进行了数千次导入，并且从不需要在 prod 级别回滚。

如果您真的非常想在 prod 级别回滚，您可以在执行 SQl 任务中进行导入，在使用数据流填充临时表之后，这是一个具有显式事务和 try catch 块的存储过程以回滚万一出错。

# python - 基于区域的状态图像检测与验证

> ID：10202279
> 
> 赞同：2
> 
> 时间：2012-04-18T03:17:22.660
> 
> 标签：python, image-processing, numpy, scipy, python-imaging-library

我目前正在从事一个项目，我必须区分正常细胞和患病细胞。我正在查看的特定异常表明细胞核应该有一定的区域并且大部分是圆形的。我目前正在使用 scipy、numpy 和 PIL 来确定原子核的存在（见下图）......但我不确定如何确定面积，因为原子核并不总是一个完美的圆。有什么建议么？

[处理前的原始图像](https://i.stack.imgur.com/KbZpR.jpg "处理前的原始图像")

![处理前的原始图像](../Images/4b3796446e21d4d978ffc0e7c7dd60c9.png)

[只显示原子核](https://i.stack.imgur.com/XdLYL.png "只有原子核")

![仅显示原子核（映射图像）](../Images/3cf8efe8a258a0f8835df96c2c7438c8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T03:21:48.547

如果您知道图像的比例，则只需计算落在单元格区域内的像素数。然后，该数字除以图像中的像素总数，即可得出细胞占据的图像区域的比例。如果您知道您的图像分辨率，那么您应该知道该矩形图像域的面积。将两者相乘得到单元格区域。

一些不准确的来源将是（a）如果分割不良（b）如果细胞被拉长（差等周商）并且包括/排除细胞边界像素的舍入然后很重要，或者（c）如果细胞曾经在阴影中/未在正确的平面上观察到以产生其横截面积。但希望您的实验包含足够的数据，您可以丢弃这些数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:45:42.213

如果您已经将数据标记为以下内容，则通过计算每个颜色像素来获得该区域：

```
data = np.array([[0,0,1,1,1],
                 [2,2,1,1,1],
                 [2,3,3,3,3],
                 [2,4,4,3,3]]) 
```

比您可以使用 numpy.bincount() 来计算每个标签：

```
print numpy.bincount(data.ravel()) 
```

输出是：

```
array([2, 6, 4, 6, 2]) 
```

这意味着有两个 0、六个 1、四个 2、六个 3 和两个 4。

# java - 从另一个包加载类文件的问题

> ID：10202282
> 
> 赞同：1
> 
> 时间：2012-04-18T03:18:19.047
> 
> 标签：java, class, package, classloader, classnotfoundexception

`Class.forName(String className)`当我试图从另一个包中获取一个类时，我遇到了加载类的问题。`ClassNotFoundException`即使我将合格的（包）名称完全声明为类名，它仍然会抛出一个。

有没有办法从另一个包加载类？

基本上，我想做的是使用配置加载一堆不同的类文件。这不是明确必要的（我只是在玩代码），但我想知道这是否可能。

最后一点，我对代码开发还很陌生，11 月才刚刚开始，Java 作为我的第一语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T03:24:24.183

这是完全可能的。要检查的两件事：

1.  使用点作为分隔符：“java.lang.String”，而不是“java/lang/String”或其他任何东西
2.  确保另一个包是可加载的——也就是说，它必须在 JVM 的类路径上。

# database - 更改列长度后是否必须重新编译存储过程

> ID：10202283
> 
> 赞同：1
> 
> 时间：2012-04-18T03:18:25.123
> 
> 标签：database, informix

在我们的项目中，我们必须将列长度从 char(8) 修改为 char(10)。现在，我们是否需要重新编译任何引用包含该列的表的存储过程。

仅供参考，数据库是informix 11.7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T04:38:45.913

更新相关的存储过程。由于您增加了列大小，因此插入和更新将起作用，但是当您选择 char(10) 并将其分配给 char(8) 字段时可能会出现问题。为避免此类问题，您最好更改与此列更改相关的所有 SP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:18:50.280

这取决于您是否有任何必须与列类型（长度）匹配的过程变量。如果没有，那么 Informix 服务器将自动处理重新编译。如果您有必须更改以匹配的数据类型，那么显然您需要在适当修改源代码后删除并重新创建过程。

# sass - Sass：嵌套选择器中的绝对引用

> ID：10202299
> 
> 赞同：3
> 
> 时间：2012-04-18T03:20:45.833
> 
> 标签：sass

在 Sass 中，有没有办法在嵌套元素中使用根/顶级选择器？这会很有用。

例如，我想为所有根级`a`标签`li`和*仅*在`ul`. 这是实现此目的的虚构示例`/`：

```
ul {
    li, /a {
       color:black;
    }
} 
```

呈现的样式表将如下所示：

```
a {
    color: black;
}

ul li {
    color: black;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:02:39.883

这个`file.scss`

```
ul {
  li,
  li a {
    color:black
  }
} 
```

将编译为此

```
ul li,
ul li a {
  color: black;
} 
```

这不是你想要的吗？

* * *

更新：你想要达到的目标是可能的`@extend`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T03:25:16.023

您可以使用选择性继承使用`@extend`. HTH。

# spring-mvc - 无法从 messages.properties 正确读取

> ID：10202303
> 
> 赞同：1
> 
> 时间：2012-04-18T03:20:51.893
> 
> 标签：spring-mvc

此图中给出了部署文件夹结构。

[http://i41.tinypic.com/25fpvsh.jpg](http://i41.tinypic.com/25fpvsh.jpg)

我的配置文件如下

```
<bean class="org.springframework.context.support.ReloadableResourceBundleMessageSource" id="messageSource">
  <property name="basenames">
    <list>
      <value>messages</value>
    </list>
  </property>
  <property name="defaultEncoding" value="UTF-8" />
</bean> 
```

我的问题是，当我尝试访问 Login.jsp时，我使用该标记时`<spring:message code = "something">` 出现异常。`javax.servlet.ServletException: javax.servlet.jsp.JspTagException: No message found under code for locale 'en_US'`

但是当我将相同的文件（Login.jsp）放在 WEB-INF\jsp 文件夹中时，我没有收到任何错误，并且messages_en.properties 中存在的值被检索并显示在网页中。谁能告诉我发生这种情况的原因并提供解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T03:56:50.537

`login.jsp`（和 .properties 文件）应该**在**WEB-INF 目录中。然后更改 messageSource bean 声明：

```
<bean class="org.springframework.context.support.ReloadableResourceBundleMessageSource" id="messageSource">
    <property name="basenames" value="/WEB-INF/messages" />
    <property name="defaultEncoding" value="UTF-8" />
</bean> 
```

# python - python绑定，它是如何工作的？

> ID：10202306
> 
> 赞同：55
> 
> 时间：2012-04-18T03:20:57.850
> 
> 标签：python, c, binding

我正在探索python。我对python绑定很好奇。任何人都可以解释一下，您如何可以从 Python 访问 C 库。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-04-18T03:59:47.490

有几种方法可以从 Python 调用用 C 编写的代码。

首先，标准库中有[ctypes](http://docs.python.org/library/ctypes.html)模块。`.so`它允许您直接从 Python加载动态链接库（Windows 上的 DLL，Linux 上的共享库）并从这些库中调用函数。这样的库通常是用 C 编写的。

其次，如果`CPython`有[Python/C](http://docs.python.org/c-api/index.html) API。它可以以两种主要方式使用：

可以用 C 语言编写动态链接库，`CPython`将其视为模块（您可以将其导入 Python 程序）。Python/C API 允许库定义用 C 编写但仍可从 Python 调用的函数。API 非常强大，提供了操作所有 Python 数据类型和访问解释器内部的函数。

使用 C API 的第二种方法是将 Python 嵌入到用 C 编写的程序中。然后 C 程序能够创建用 C 编写的内置模块并公开 C 函数，就像在动态链接库方法中一样。API 还允许程序执行脚本，然后可以导入和使用内置模块。这可用于创建基于 Python 的插件系统。

“绑定”既可以使用纯 Python 库实现，也可以`ctypes`使用 Python/C API 实现为动态链接库。第二个选项有时与[SWIG](http://www.swig.org/)之类的工具一起使用，它通过处理生成“样板”代码或[Boost.Python](http://www.boost.org/doc/libs/1_49_0/libs/python/doc/)来简化任务，它在 Python/C API 之上提供 C++ API，从而更容易与 C++ 交互代码。

进一步阅读：[外部函数接口](http://en.wikipedia.org/wiki/Foreign_function_interface)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-18T03:31:59.610

答案很简单，python (CPython) 解释器是用 C 编写的，它可以动态调用其他 C 库，您的 C 扩展模块或嵌入式 C 代码可以很容易地从任何其他 C 代码中调用。

CPython 允许特殊的钩子，以便它可以调用其他 C 代码或从其他 C 代码调用。它甚至不需要是 C，任何编译为本机代码并具有相同调用约定的语言。

对于一个简单的案例，考虑创建一个名为 mython 的程序，它可以加载任何共享库并尝试调用一个函数，`run`例如

```
lib = dlopen("mylib.so", RTLD_LAZY);
func = dlsym(lib, "run");
(*func)(); 
```

因此，在您加载模块并调用其代码的方式中，CPython 会以更复杂的方式执行此操作，提供更好的接口和对象来传递，此外还涉及内存管理、线程管理等其他复杂问题。

因此，Python 实现的平台必须与它被扩展的语言相匹配，例如 CPython 在 Java 中不可扩展，但称为[Jython](http://www.jython.org/)的 Python 的 Java 实现可以在 Java 中扩展，类似的 .NET 实现[IronPython](http://ironpython.codeplex.com/)可以在 .Net 语言中扩展。

# sql - 可空值的棘手逻辑异或

> ID：10202307
> 
> 赞同：12
> 
> 时间：2012-04-18T03:21:10.863
> 
> 标签：sql, postgresql, postgresql-8.4

我有 2 个可为空的`CHAR`列，我需要检查其中是否**只有一个**为空。

正在做

```
(a IS NULL AND b IS NOT NULL) OR (a IS NOT NULL AND b IS NULL) 
```

无聊。我想避免为此创建自定义函数。

我在想类似的东西

```
COALESCE(a, 1) + COALESCE(b, 1) = 1 
```

但只要`a`是`char`- 它会导致操作数类型错误。

那么，有什么*棘手*的解决方案吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-18T03:24:33.687

如果您的意思*恰好*是 NULL （与您现有的逻辑相匹配），那么：

```
a is null != b is null 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-16T11:15:26.653

如果您使用的是 PostgreSQL，请不要忘记括号...

```
ALTER TABLE "schema"."table" ADD CHECK ((key1 IS NULL) <> (key2 IS NULL)); 
```

（我花了将近 10 分钟试图了解我的 CHECK 出了什么问题。）

# twitter-bootstrap - 为什么我的 twitter 引导按钮组件没有用渐变着色？

> ID：10202308
> 
> 赞同：0
> 
> 时间：2012-04-18T03:21:27.743
> 
> 标签：twitter-bootstrap

你们知道为什么我的 twitter 引导按钮组件没有用渐变着色吗？它们是彩色的，但是是纯色的，与这里不同：http: [//twitter.github.com/bootstrap/base-css.html#buttons](http://twitter.github.com/bootstrap/base-css.html#buttons)

非常感谢！

编辑：

直接从这里使用 css 文件[http://twitter.github.com/bootstrap/assets/css/bootstrap.css](http://twitter.github.com/bootstrap/assets/css/bootstrap.css)它工作得很好。这很奇怪，因为我只是从[http://twitter.github.com/bootstrap/index.html](http://twitter.github.com/bootstrap/index.html)下载了文件，而我没有做任何修改！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-03T07:06:33.193

对于来到这里的谷歌人：Bootstrap 3：

在版本 3 中，他们认为如果默认样式很简单，人们会发现为引导创建主题会更容易，因此，他们取消了渐变。

但是，它们在创建的默认主题中具有几乎相同的旧外观。

例如，以下为您提供渐变：

```
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-theme.min.css"> 
```

这是复制自： http:
[//getbootstrap.com/getting-started/#download-cdn](http://getbootstrap.com/getting-started/#download-cdn)

要了解它的外观，请查看 ( [http://getbootstrap.com/getting-started/#examples](http://getbootstrap.com/getting-started/#examples) ) 官方示例中的最后一个示例，它将您重定向到： http:
[//getbootstrap.com/examples/theme/](http://getbootstrap.com/examples/theme/)

关于他们的决定，这是从他们的官方博客文章中引用的：http:
[//blog.getbootstrap.com/2013/08/19/bootstrap-3-released/](http://blog.getbootstrap.com/2013/08/19/bootstrap-3-released/)

> 新设计和可选主题！使用 v3，我们变得平淡无奇。不要把它称为趋势——这都是关于定制的，伙计们。由于我们简化了美学，我们认为有一个可选的主题会有所帮助。要使用它，请查看 Bootstrap 主题示例。

该帖子值得检查以了解 v3 中的更多详细信息和更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:55:20.717

直接从这里使用 css 文件[http://twitter.github.com/bootstrap/assets/css/bootstrap.css](http://twitter.github.com/bootstrap/assets/css/bootstrap.css)它工作得很好。这很奇怪，因为我只是从[http://twitter.github.com/bootstrap/index.html](http://twitter.github.com/bootstrap/index.html)下载了文件，而我没有做任何修改！

# django - RESTful 服务参数是否必须是可发现的？

> ID：10202312
> 
> 赞同：12
> 
> 时间：2012-04-18T03:22:01.920
> 
> 标签：django, rest, parameters, tastypie, discoverability

序言：我对 REST 的理解充其量是肤浅的，因此欢迎对我的问题进行任何更正或澄清。

我有一种情况，我需要 RESTful 服务的用户提交任意实数。因此，我假设我不应该在 url 中要求它，即使返回的对象应该是相同的，并且应该使用一个参数来代替（或者这个假设是错误的吗？）。

鉴于此，为了符合 REST，参数是否必须以某种方式被发现？我一直无法找到任何让我明白这一点的东西。

如果不是，我进一步假设该参数需要以其他方式记录，因此锁定（部分）您当前的 api，据我了解，这是不可取的，因为资源应该通过遵循超文本链接而不是比硬编码位置（和本例中的参数）。

假设参数必须是可发现的，有没有办法在tastepie/django中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T02:15:05.807

The "discoverable" part of REST typically refers to new **resources** (represented by URIs) returned by the server that weren't present before. Client applications can then choose to interact with those resources at their leisure.

For example, my application might `GET` a `/library` URI that returns a representation of what's in my local library. The data returned (encoded as a particular JSON-based media type) might look like this:

```
{
   "printedBooks" : "/library/books",
   "audioTapes" : "/library/tapes"
} 
```

Now let's say a few months later I do the same `GET` on the same URI, I might now be returned this payload:

```
{
   "printedBooks" : "/library/books",
   "audioTapes" : "/library/tapes",
   "magazines" : "/library/magazines"
} 
```

Now there's a new link to a `magazines` resource which I can presumably `GET` to find out what kind of magazines are available. If my client application doesn't care about it, no big deal - it just keeps using the other two resources as before. At some point in the future I might code up support for magazine searches too.

But if I've written some kind of super dynamic fancy-shmancy client application that can automatically adapt to the presence of this new resource, the users of the application get to use it without any effort at all. No upgrade was required: the server offered new functionality and the client made the most of it. Web browsers work in this way (albeit with a human driving a large part of the "dynamism").

To your specific question about parameters: those are typically specified as part of the server's API documentation. I don't know of any API that specifies parameter syntax in an automated fashion that would allow the client to be 100% generic and adaptable.

A well-defined RESTful API stands on the shoulders of the already-specified technologies which it uses (HTTP, URIs, content type negotiation, headers, etc) and *leverages* rather than redefines them. That's why I know that I can probably do a `GET` on the `/library/magazines` URI and request a JSON-based encoding, and it's pretty likely that I'll succeed. I know that if I have the URI to a particular magazine (say, `/library/magazines/1234`) then I can attempt to remove it by calling `DELETE` on it, and I'll know if it succeeded based on the returned HTTP status code. I didn't have to read any documentation or use any coding magic to do any of these things because these are actions already specified in HTTP.

However, to create a new magazine by POSTing to `/library/magazines`, I need to know what the representation of my parameter data should look like, regardless of whether I pass those parameters within the URI or within the body of the POST. That is data that needs to be specified out-of-band in the API documentation.

So, to summarize: RESTful servers can send clients back new information that they hadn't previously seen, and that's the heart of discoverability in REST. But when a client wants to send data to a server, it needs to send data that the server will understand and accept, and that's typically [described in documentation](https://stackoverflow.com/questions/1904266/documenting-a-rest-service).

# jquery - jQuery 画廊的触摸滑动输入

> ID：10202314
> 
> 赞同：1
> 
> 时间：2012-04-18T03:22:10.450
> 
> 标签：jquery, touch, slide

我使用这个 jQuery 滑块插件 (http://slidesjs.com/) 为我的网站创建了一个 HTML5 画廊。是否可以向图库添加支持以接受来自智能手机的触摸幻灯片输入以激活幻灯片过渡？

还是需要针对智能手机和平板电脑开发网页的移动版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T04:11:48.193

听起来是[锤子](http://eightmedia.github.com/hammer.js/)时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-18T20:06:25.923

自由触摸滑动滑块[主滑块](http://wordpress.org/plugins/master-slider/)

# matlab - Matlab - 从焦点形状

> ID：10202319
> 
> 赞同：2
> 
> 时间：2012-04-18T03:22:45.137
> 
> 标签：matlab, image-processing, focus, shape, depth

给定一张图像，我已经计算了图像中每个点的深度，我需要在 MATLAB 中绘制这样的地图。有人可以建议我如何解决这个问题。 ![在此处输入图像描述](../Images/b4509b596af68b1f8a03b42844c85d58.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T03:30:43.923

假设您将深度数据存储在一个名为 的二维数组中`D`，那么您需要决定要在其上方绘制的网格域`D`。我将假设您关心 x-axis range`[x_min, x_max]`和 y-axis range `[y_min, y_max]`，其中每个标量代表每个坐标方向的最小值和最大值。

```
y_num = size(D,1); % <-- Number of points to use in y-axis grid.
x_num = size(D,2); % <-- Number of points to use in x-axis grid.

x_grid_vals = linspace(x_min,x_max,x_num);
y_grid_vals = linspace(y_min,y_max,y_num);

% Get full coordinate grid for the 3D plot.
[X,Y] = meshgrid(x_grid_vals,y_grid_vals);

% Plot the data.
% The surf() function plots the depth as 3D above the created grid.
surf(X,Y,D); 
```

[这是`surf()`文档。](http://www.mathworks.com/help/techdoc/ref/surf.html)

# sql - 在这种情况下有什么利弊？

> ID：10202323
> 
> 赞同：0
> 
> 时间：2012-04-18T03:23:06.817
> 
> 标签：sql, h2

我对 H2 数据库有疑问。

我有一张表包含一个名为 Family 表的家庭成员之间的关系。

在这张表中，我有这样的三个级别。GrandPa --> Parent --> Child Sometime Child 是其他孩子的父母和另一代的爷爷。因此，我需要获取该表中的所有数据并放入另一个具有约束完整性的表（GrandPa、Parent、Child）。

所以，我有两种选择，但我正在考虑哪一种更好。1>加载所有数据并添加到三个表中，然后添加约束完整性。(Foreign Key..) 2>先设置完整性，然后一个一个，先选择并添加granpa，然后papa，然后child....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:00:53.033

如果您知道您的数据是干净的。（这很重要）那么第一种方法是更好的方法。因为表演。
但是如果你不确定你的数据，你应该更喜欢第二种方式。您可以在加载数据期间检测数据中的问题。

# apache - Apache 使用端口将 URL 重写为本地 url。不重写但重定向

> ID：10202324
> 
> 赞同：0
> 
> 时间：2012-04-18T03:23:43.513
> 
> 标签：apache, mod-rewrite, redirect

我正在努力实现这一目标：

[http://mydomain/api/someApiCall?param=1¶m=2](http://mydomain/api/someApiCall?param=1&param=2)

由实际网址支持：

[http://mydomain:8080/app/someApiCall?param=1¶m=2](http://mydomain:8080/app/someApiCall?param=1&param=2)

我试过这个：

```
RewriteEngine On
RewriteBase /

....

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^api/(.*)$ http://mydomain:8080/app/$1?%{QUERY_STRING} [L] 
```

它实际上将请求重定向到[http://mydomain:8080/app/someApiCall?param=1¶m=2](http://mydomain:8080/app/someApiCall?param=1&param=2)

有没有办法像往常一样重写（即不发回 302 而只是提供内容）。它在物理上是同一台服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T03:25:36.913

如果您加载 mod_proxy 那么您可以使用该`P`标志，它将代理而不是重定向。但是你不能直接这样做，因为指定一个端口会导致它重定向，否则无论如何。

# language-agnostic - 任何现有的语言都允许在函数名称中的任意位置使用函数参数吗？

> ID：10202334
> 
> 赞同：9
> 
> 时间：2012-04-18T03:24:59.720
> 
> 标签：language-agnostic, syntax, programming-languages, lang

当我们（用某种语言或另一种语言）写作时：

```
 lengthOf(n) 
```

我们认为它是英语“填空”结构的缩写，例如：

```
 length of __ 
```

但是当我们写这样的东西时：

```
 isAnInteger(n)
  appendTo(n,m) 
```

我们想到这样的句子：

```
 __ is an integer
  append ___  to  ___ 
```

**因此，允许函数调用表达式似乎更自然，例如：**

```
 (n)isAnInteger
  append(n)to(m) 
```

“函数名称”类似于：

```
 _isAnInteger
  append_to_ 
```

**任何人都可以命名允许这样做的现有编程语言吗？** 我知道面向对象的语言让对象成为前面的一个参数，但我想知道更灵活的语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T15:31:40.487

As Brian Rice pointed out, mixfix notation in Maude handles this exactly. You've even got the correct syntax.

Your examples

```
_isAnInteger
append_to_ 
```

Would be declared in Maude as

```
op _IsAnInteger : Int -> Bool
op append_to_ : Int List -> List 
```

And would be called as

```
5 IsAnInteger
append 5 to L 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T20:52:22.093

Mixfix 是上面通过 Objective-C 呈现的 Smalltalk 语法特性的最通用形式。[Maude 的“气泡”解析](http://maude.cs.uiuc.edu/maude1/manual/maude-manual-html/maude-manual_31.html)是对此进行最清楚记录的实现。更一般地说，[谷歌搜索“mixfix parsing”](https://www.google.com/search?q=mixfix%20parsing)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T06:49:47.627

Smalltalk 非常接近。（它与Objective-C的语法相同，在另一个答案中提到）

Smalltalk 中的消息发送不使用大括号，但遵循格式`doSomething:with:`

所以你可以写：

```
5 isInteger
aList appendTo: anotherList
aList at: aPosition ifAbsent: anAction 
```

所有消息都发送到一个必须在左边的对象（接收者），所以你*不能*写：

```
append: aList to: anotherList   "illegal syntax" 
```

语法`doSomething:with:`比使用大括号更自然。您不太容易混淆哪个参数是什么。例如考虑：

```
 aList.sublist( i, j )
   aList sublistFrom: i to: j 
```

通过正确命名方法，很明显第一个参数是下索引，第二个参数是上索引，这与大括号不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T00:37:51.767

[Grace](http://gracelang.org)是一种新的教育语言（仍在开发中），它支持几乎任意顺序的参数：

```
class MyObject {
    method choseBetween (a : Block<None>) and (b : Block<None>) -> None {
        if (Random.nextBoolean)
            then { a.apply } else { b.apply } }
} 
```

这可以被称为：

```
MyObject.new.chooseBetween { print("Yes") } and { print("No") } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T04:07:04.943

是的，确实存在这样的事情，但不是问题中提出的确切语法。

在 JavaScript 中，它被称为*链式链接*，通常在 jQuery 等框架中找到，以便动态创建和修改 DOM 元素：

```
$('<div/>')
 .css('background', '#f00')
 .css('width', '100px')
 .css('height', '100px')
 .hide()
 .appendTo('BODY')
 .fadeIn(); 
```

前面的 jQuery 代码片段创建一个`DIV`元素，设置宽度、高度和背景颜色，隐藏`DIV`，将其附加到文档并应用淡入效果。

语法很重要。给定以下示例：

```
(n)isAnInteger
append(n)to(m) 
```

括号显然是函数参数分隔符。但是您还需要函数名称分隔符和对象/事物分隔符。更好的语法是：

```
n.isAnInteger().append(n).to(m) 
```

这与 jQuery 语法非常相似：

```
 $('DIV')
  .filter(':visible')
  .appendTo('#new_element'); 
```

它将找到`DIV`可见的元素并将它们复制到具有 id 的元素`new_element`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-28T17:14:40.837

我想到了两种支持 mixfix 运算符的语言：[Agda](http://wiki.portal.chalmers.se/agda/agda.php?n=ReferenceManual.Mixfix)和[BitC](http://www.bitc-lang.org/browse/compiler/MixFixProcessing.html)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-18T05:06:18.433

[Objective-C](http://en.wikipedia.org/wiki/Objective-c#Messages)可能是最接近的。例子：

```
- (void)setRangeStart:(int)start end:(int)end;

- (void)importDocumentWithName:(NSString *)name withSpecifiedPreferences:
(Preferences *)prefs beforePage:(int)insertPage; 
```

像这样调用：

```
[obj setRangeStart:1 end:42];
[obj importDocumentWithName:@"foo" withSpecifiedPreferences:prefs beforePage:1]; 
```

虽然它不允许`[obj 5:isAnInteger]`。

# java - 从 4shared 保存 mp3 文件不起作用

> ID：10202338
> 
> 赞同：1
> 
> 时间：2012-04-18T03:25:34.773
> 
> 标签：java, mp3, download

我正在尝试使用 java 中的脚本下载几个 mp3 文件。该脚本的目的是通过 4shared 获取直接的 mp3 链接。我得到的直接链接很好。问题是，我无法以编程方式下载 mp3 文件。一个示例链接是：

[http://4shared.com/img/8dSuOD2s/dlink__2Fdownload_2F8dSuOD2s/preview.mp3](http://4shared.com/img/8dSuOD2s/dlink__2Fdownload_2F8dSuOD2s/preview.mp3)

如果我尝试以编程方式保存此链接，链接将被重定向到 4shared html 页面，并且我下载了一个小 (100kb) html 页面。但是，如果我创建一个指向该文件的 html 链接（即带有 href 的锚标记）并右键单击-> 将目标另存为，它将很好地保存 mp3...

谁能告诉我这里发生了什么？

* * *

编辑：按照@Perception 的建议监控来自网站的流量后（使用firefox 的web-developer 控制台）我得到了这个回复.. 我不明白

截图：http: [//i.imgur.com/EBwUc.png](http://i.imgur.com/EBwUc.png)

* * *

任何人？...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T14:26:48.427

前段时间，WebDAV 确实在 4shared 上工作过。但近一个月前，通过直接链接访问开始返回“错误 500”，并且无法从 WebDAV 下载文件。我们的应用程序有 4shared 插件，它不再工作了。我在互联网上发现了一些其他有同样问题的帖子。我在 4shared 论坛上问过这个问题，但它被删除了。我认为原因是 4shared 不允许免费帐户的“直接链接”，而 WebDAV 链接实际上只是 http 链接，因此无法允许 WebDAV 链接并拒绝“直接链接”。同样是 4shared，当然不能说“不再支持 WebDAV”——因为删除有用的功能是可耻的。这就是为什么官方网站上没有任何信息，这就是我的帖子被删除的原因，这就是为什么您仍然没有任何好的答案来回答您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T08:19:58.663

您可以使用 4shared 提供的 SOAP API 下载 mp3 文件[http://help.4shared.com/index.php/SOAP_API](http://help.4shared.com/index.php/SOAP_API)

# linux-kernel - 在 Linux 内核中，为什么不为每个 CPU 而不是每个线程记录 TIF_NEED_RESCHED 标志呢？

> ID：10202341
> 
> 赞同：1
> 
> 时间：2012-04-18T03:25:38.690
> 
> 标签：linux-kernel

在 linux 内核 2.6.11 中，TIF_NEED_RESCHED 标志记录在每个任务的 thread_info 结构中。

查了一下内核，发现只能由CPU上的当前线程自己设置。那么为什么不将 TIF_NEED_RESCHED 放在每个 CPU 结构中，而不是放在每个 thread_info 中呢？

如果此标志仅用于显示**此 cpu 上的当前线程**需要 schedule()，那么我认为也许可以为每个 CPU 而不是每个线程记录它？

谢谢~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:24:11.837

不是我写的，所以不知道是不是我认为的原因。

`thread_info`在内核中很容易访问。在这种情况下，它相当于每个 CPU 的数据。
它用于指示需要重新调度，并且只保留在定时器中断和实际重新调度之间。所以很明显，运行的进程之间是不能变化的，设置data on`thread_info`就相当于设置per-cpu。

如果您担心内存消耗，那么每个进程一位是非常小的担心。并且考虑到标志在有或没有它的情况下占用 32 位，它甚至更小。

# tsql - 为什么这个 TSQL 会转换 datetime -> varchar -> datetime？

> ID：10202342
> 
> 赞同：4
> 
> 时间：2012-04-18T03:25:59.487
> 
> 标签：tsql, casting

我最近遇到了这个：

```
SELECT
    'Y',
    ltrim(rtrim(upper(Newly_Eligible)))
FROM Table
WHERE 
    Id = 1
AND
    (Convert(datetime, Convert(varchar, GETDATE(),103),103)  
    BETWEEN
        Convert(datetime,Convert(varchar, [Start_Date],103),103)
    AND
        Convert(datetime, Convert(varchar, [End_Date] ,103),103)) 
```

`Start_Date`,`End_Date`显然`GETDATE()`是所有`datetime`类型。为什么他会转换为 varchar 然后又返回？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T03:33:11.697

这样做是为了删除时间，因此您只能比较相同格式的日期。有几种方法可以做到这一点，上面是其中之一。

另一个是

```
select cast(floor(cast(getdate() as float)) as datetime) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T03:33:37.487

这会将任何多余的时间值从日期时间中截断，只留下日期值。（关键是转换代码“103”。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T07:49:39.470

我真的不喜欢缓慢的日期转换为 varchar 并返回。

我推荐另外两种编写代码的方法：

sql 服务器 2005：

```
SELECT
    'Y'
    ltrim(rtrim(upper(Newly_Eligible)))
FROM table
WHERE 
    Id = 1
AND
    dateadd(day, datediff(day, 0,  getdate()), 0)
    BETWEEN
        dateadd(day, datediff(day, 0,  [Start_Date], 0)
    AND
    [End_Date] -- * 
```

*由于比较的getdate已经被剥离了时间部分，它永远不会大于同一天的end_date

sql-server 2008:

```
SELECT
    'Y',
    ltrim(rtrim(upper(Newly_Eligible)))
FROM table
WHERE 
    Id = 1
AND
    cast(GETDATE() as date)
BETWEEN
    cast([Start_Date] as date)
AND
    [End_Date] 
```

# extjs - 如何调整 extjs 组合框的宽度

> ID：10202344
> 
> 赞同：2
> 
> 时间：2012-04-18T03:26:25.773
> 
> 标签：extjs

我有一个面板，其中有几个组合框和按钮。第一个组合框左对齐。我想将其与下面的类似。该按钮也应该与组合相邻。请帮忙。下面是代码

```
filterPanel = new Ext.Panel({
        renderTo: document.body,
        bodyStyle: 'padding-top: 6px;',
        title: 'Filters',
        collapsible: true,
        collapsed: true,
        width: 450,
        frame: true,
        floating: true,
        layout: 'form',
        labelWidth: 150,
        buttonAlign: 'center',

        items: [
            {
                layout:'column',
                items:[
                {
                    columnWidth:.9 ,
                    layout: 'form',
                    items: [{
                        xtype:'combo',
                        id: 'xFilterEmail',
                        width: 250,
                        listWidth: 200,
                        fieldLabel: 'Filter by Owner',
                        store: emailStore,
                        displayField:'emailDisplay',
                        valueField:'emailValue',
                        triggerAction: 'all',
                        value: '<cfoutput>#trim(filterEmail)#</cfoutput>',
                        selectOnFocus:false
                    }]
                },{
                columnWidth:.1,
                layout: 'form',
                items: [{
                    xtype: 'button',
                    text:   'ME',
                    listeners: {
                        click: function(){
                    }
                }]
            }]
        },{
                xtype: 'combo',
                id: 'xFilterStatus',
                width: 200,
                listWidth: 200,
                fieldLabel: 'Filter by Status',
                store: statusStore,
                displayField:'statusDisplay',
                valueField:'statusValue',
                triggerAction: 'all',
                value: '<cfoutput>#trim(filterStatus)#</cfoutput>'
            },{
                xtype: 'combo',
                id: 'xFilterCategory',
                width: 200,
                listWidth: 200,
                fieldLabel: 'Filter by Category',
                store: categoryStore,
                displayField:'categoryDisplay',
                valueField:'categoryValue',
                triggerAction: 'all',
                value: '<cfoutput>#trim(filterCategory)#</cfoutput>'
            },{
                xtype: 'combo',
                id: 'xFilterSubjectArea',
                width: 200,
                listWidth: 200,
                fieldLabel: 'Filter by Subject Area',
                store: subjectAreaStore,
                displayField:'subjectAreaDisplay',
                valueField:'subjectAreaValue',
                triggerAction: 'all',
                value: '<cfoutput>#trim(filterSubjectArea)#</cfoutput>'
            },{
                xtype: 'combo',
                id: 'xPageSize',
                width: 200,
                listWidth: 200,
                fieldLabel: 'Number of Requests Shown',
                store: pageSizeStore,
                displayField:'pageSizeDisplay',
                valueField:'pageSizeValue',
                triggerAction: 'all',
                value: '<cfoutput>#thePageSize#</cfoutput>'
            },{
                xtype: 'textfield',
                id: 'xSearch',
                width: 217,
                fieldLabel: 'PID/Description Search',
                value: '<cfoutput>#theSearchField#</cfoutput>'
            },{
                xtype: 'checkbox',
                id: 'xIncTemp',
                fieldLabel: 'Include Temporary Jobs',
                checked: document.getElementById('incTemp').checked
            }
        ],
        buttons: [
            {
                text: 'Clear',
                listeners: {
                    click: function(){

                    }
                }
            },{
                text: 'Apply',
                id: 'filterSubmitBtn',
                listeners: {
                    click: function(){

                        document.getElementById('sortForm').submit();
                    }
                }
            }
        ]
    }); 
```

![输出面板](../Images/cce9ef1fcba78ef6fcd0b74ab14342d8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:39:26.763

嗯...第一个组合框的宽度为 250。您是否尝试使其等于其他组合框（200）？如果你不能设法将按钮移到左边，我会用 CSS 来代替。如果你给按钮一个 ID “myButton”，下面的 CSS 应该可以解决问题：

```
#myButton .x-btn {
    margin-left:-20px !important;
} 
```

不要害怕编辑 ExtJS 类，因为它只会对这个按钮进行更改。我一直这样做，结果符合预期。

# objective-c - 是什么原因导致 Category 正在实现一个也将由其主类实现的方法？

> ID：10202346
> 
> 赞同：10
> 
> 时间：2012-04-18T03:26:39.687
> 
> 标签：objective-c, xcode4

我的另一个程序员从网上下载了这段代码

```
#import "UIImage+Alpha.h"

// Private helper methods
@interface UIImage ()
- (CGImageRef)newBorderMask:(NSUInteger)borderSize size:(CGSize)size;
@end

@implementation UIImage (Alpha) 
```

我收到错误：是什么原因导致 Category 正在实现一个也将由其主类实现的方法？

我在我的整个文件中搜索 newBorderMask 并且这个词只出现了 3 次。

它只声明一次，即

```
@interface UIImage ()
- (CGImageRef)newBorderMask:(NSUInteger)borderSize size:(CGSize)size;
@end 
```

实施一次即在

```
#pragma mark -
#pragma mark Private helper methods

// Creates a mask that makes the outer edges transparent and everything else opaque
// The size must include the entire mask (opaque part + transparent border)
// The caller is responsible for releasing the returned reference by calling CGImageRelease
- (CGImageRef)newBorderMask:(NSUInteger)borderSize size:(CGSize)size1 {
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceGray(); 
```

并调用了一次

```
 CGImageRef maskImageRef = [self newBorderMask:borderSize size:newRect.size]; 
```

所以没有双重声明。

所以有什么问题。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-03T18:15:28.940

我是[代码](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/)的原作者，而 Aadhira 的回答是不正确的。此方法的类别名称不应更改为“Alpha”，因为该方法是私有的，而不是扩展的一部分。

要消除警告，最好的解决方法是给私有类别一个唯一的名称，例如“PrivateAlpha”。

有关更多详细信息，请参阅[此讨论](http://www.iphonedevsdk.com/forum/iphone-sdk-development/99057-new-xcode-4-3-compiler-warnings-categories.html)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-18T05:42:22.837

看，当你声明类别时，就像

```
@interface UIImage () 
```

但在实现中，它就像

```
@implementation UIImage (Alpha) 
```

所以声明如下：

```
@interface UIImage (Alpha) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-05T06:17:46.367

我刚刚从我的 .m 文件中删除了这一点：

```
@interface UIImage ()
- (CGImageRef)newBorderMask:(NSUInteger)borderSize size:(CGSize)size;
@end 
```

LLVM 4.1 编译器似乎不再关心它了。

# asp-classic - 如果在经典 asp 中阻止，include virtual 在内部不起作用，但在外部起作用

> ID：10202352
> 
> 赞同：0
> 
> 时间：2012-04-18T03:27:09.347
> 
> 标签：asp-classic, include

出于某种原因，如果我的包含在 if 语句中，它确实有效。我明白了

> 500内部服务器错误。您要查找的资源有问题，无法显示。

但是我在外面包含相同的行，如果它呈现正确并显示表单。我错过了什么吗？

```
<% elseif EmailError <> "?" then %>
                <p class="StdParaHead">Can't Send Message</p>
                <p style="color:red;font-weight:bold">Please fill in
                <%if EmailError="NameBlank" then
                    Response.Write "your name"
                ElseIf EmailError = "EmailBlank" OR EmailError = "InvalidEmail" then
                    Response.Write "a valid e-mail address"
                ElseIf EmailError = "LocationBlank" then
                    Response.Write "your City and State"
                ElseIf EmailError = "BadSecurity" then
                    Response.Write "the proper security information"
                End if
                %></p>
                <p>clause1 </p>
<!--#include virtual="/includes/Content/ContactFormNew.inc"--> /* does not work here */

    <% else %>
                <p class="StdParaHead">Sorry...</p>
                <p>Due to an uncertain error, your message could not be sent at this time. Please see our <a href="contact.asp">contact information</a> for other ways to contact Axiom Valuation Solutions, or try again later.</p>
                <p><a href="/newlook/newsite/default.asp">Home</a></p>
                <p> CLAUSE 2</p>
<!--#include virtual="/includes/Content/ContactFormNew.inc"--> /* does not work */
    <%end if%>
<!--#include virtual="/includes/Content/ContactFormNew.inc"--> /* works here */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:51:34.037

所以我最好的猜测是你在“ContactFormNew.inc”中定义了一些变量。

因为你不能像你试图做的那样“动态地”包含文件，所以文件被包含两次。

这是因为包含在解释任何 ASP 代码之前完成，并且“ContactFormNew.inc”的内容被注入两次（在 elseif end else 块中）。

所以文件被包含两次然后错误是obviuos你定义了两次相同的变量......

# javascript - Javascript URL 重定向

> ID：10202356
> 
> 赞同：0
> 
> 时间：2012-04-18T03:27:23.430
> 
> 标签：javascript

我正在为历史课创建一个模拟版的谷歌审查。我正在尝试修改重定向网址，以便可以将自己的条款放入网址中：

```
function searchCensor() 
{
var keyTerms = document.getElementById("search").value;
if(keyTerms == "censorship")
    window.location = "http://andrewgu12.kodingen.com/history/censor.php";
else
    window.location = "https://www.google.com/#hl=en&output=search&sclient=psy-ab&q="+keyTerms+"&oq="+keyTerms+"&aq=f&aqi=g4&aql=&gs_l=hp.3..0l4.851563l851824l0l851964l3l3l0l0l0l0l171l359l1j2l3l0.&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=bb242dc4ab43ba95&biw=1920&bih=963"
} 
```

在 else 块中，我尝试将 keyTerms 插入 URL，但在搜索开始时我最终得到 undefined。有什么建议么？这是该网站的 URL：http: [//andrewgu12.kodingen.com/history/](http://andrewgu12.kodingen.com/history/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T03:33:18.583

同一页面顶部栏上的“搜索”链接具有相同的 id `search`，因此当您执行 时`document.getElementById('search')`，javascript 返回 DOM 中的第一个元素`id = search`，它是`anchor`顶部栏上的 ，而不是您的输入。

您可以改为`name`为您的搜索表单提供一个属性：

```
<form id="searchBox" name="searchForm">
    <input type="text" id="search" name="search" size="85"><br>        
</form> 
```

在你的 js 中

```
var keyTerms = document.searchForm.search.value;
// rest of your code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T03:36:36.913

在顶部的标题栏中，您有一个标有“搜索”的按钮，该按钮也有 id `"search"`。尝试从该元素中删除 id。

# c# - 如何在 Windows Phone/XNA 上使轻弹手势平滑滚动

> ID：10202362
> 
> 赞同：1
> 
> 时间：2012-04-18T03:28:10.860
> 
> 标签：c#, xna, scroll, windows-phone, smooth

我在 xna 游戏的 update() 部分中有这个：

```
 while (TouchPanel.IsGestureAvailable)
        {
            GestureSample gs = TouchPanel.ReadGesture();

            switch (gs.GestureType)
            {
                case GestureType.Flick:
                    _GameMap.GameCamera.Translate(new Vector2(-gs.Delta.X/2, 0));
                    //moves the camera by this amount 
                    break;
            }
        } 
```

但不出所料，当我轻弹时没有滚动（如谷歌地球或愤怒的小鸟），它只是一个开始和结束。如何在轻弹中实现滚动？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T05:27:40.600

来自[Windows Phone 7 游戏开发](http://books.google.ca/books?id=iF7z1-S9haoC&pg=PA106&lpg=PA106&dq=FreeDrag%20vs%20Flick&source=bl&ots=RwQi0RROVu&sig=rrUFGqdTC7lq2o2MkM0rpJh9SOs&hl=fr&sa=X&ei=nZ-PT9LFKqee6QHgv4GUBA&ved=0CC0Q6AEwAQ#v=onepage&q=FreeDrag%20vs%20Flick&f=false)：

> 当用户释放与屏幕的接触时会触发轻弹手势 (...) 这对于启动*动态滚动*很有用，其中对象在向用户移动的方向释放后继续移动。

如果此处描述的动态滚动是您想要的，那么在检测到 Flick 手势后，保存 Delta，并在每一帧上移动该 Delta（乘以某个常数）并将其减少一定量。这将导致屏幕逐渐移动和减速。

*如果要按字面意思理解文本，则仅在用户释放*接触时才报告该手势，这意味着*在*接触期间页面不会移动。在这种情况下，您还需要寻找某种拖动手势（可能是 FreeDrag）并在拖动过程中开始移动屏幕。

# c# - System.Reflection 与泛型 - 性能

> ID：10202365
> 
> 赞同：6
> 
> 时间：2012-04-18T03:28:25.927
> 
> 标签：c#, generics, reflection

我即将在服务器应用程序上编写一组方法，这些方法接收从 TCP 套接字接收的消息，对它们进行编码/解码，然后对它们进行加密/解密。

考虑到消息被定义为特殊类型，每个都有自己的一组属性和总长度，我需要选择以下解决方案之一： 1\. 制作使用泛型的方法，例如`Encode<T>(...) where T : IMessage`，然后为每种类型实现编码器/解码器message 并`ResolveEncoder<T>`让它为想要的消息选择编码器，或者 2\. 创建使用任何类型消息的方法，只要它实现`IMessage`，例如`Encode(IMessage message)`，并使用 System.Reflection 来确定我需要了解的所有信息。

我对解决方案#2 更感兴趣，因为它使我的代码小了 30 倍。但是，我担心属性的不断反射是否会影响性能。现在由于我完成项目的时间有限，我不能真正“实验”。

对于任何一种解决方案的性能如何下降的任何个人经验或与基准的链接，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T03:38:14.840

> 现在由于我完成项目的时间有限，我不能真正“实验”。

那么你真正的限制不是性能，而是你可以在给定的时间限制内编码、测试和调试。假设您声称反射版本小 30 倍，听起来这就是您应该倾向于的。

但是，有五点：

1.  我怀疑 30 倍是正确的估计，它可能要小得多。
2.  反射的性能将低于使用泛型。毫无疑问。
3.  “但是，我担心属性的不断反射是否会影响性能。” 您可以通过积极缓存`PropertyInfo`s 以及您通过反射加载的内容来缓解其中的一些问题。
4.  您可以使用表达式树执行类似于反射的操作，并且您会看到这样做会显着提升性能。这是一篇[博](http://msmvps.com/blogs/paulomorgado/archive/2010/08/03/dumping-objects-using-expression-trees.aspx)文，将在此问题上将您推向正确的方向。**但是，如果您还不熟悉使用表达式树，考虑到您的时间限制，使用您不熟悉的概念进行编码、测试和调试是有风险的。**
5.  您确定这甚至是性能瓶颈吗？如果网络延迟在这里占主导地位，并且您过早地进行优化，我不会感到震惊。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T03:55:15.703

反射可以足够快。但需要正确执行。

反射性能 -

快速和轻便的功能

```
typeof
Object.GetType
typeof == Object.GetType
Type equivalence APIs (including typehandle operator overloads)
get_Module
get_MemberType
Some of the IsXX predicate APIs
New token/handle resolution APIs in the .NET Framework 2.0 
```

昂贵的功能

```
GetXX  APIs (MethodInfo, PropertyInfo, FieldInfo, and so on)
GetCustomAttributes
Type.InvokeMember
Invoke APIs (MethodInfo.Invoke, FieldInfo.GetValue, and so on)
get_Name (Name property)
Activator.CreateInstance 
```

[来源 - 避开常见的性能陷阱以打造快速的应用程序](http://msdn.microsoft.com/en-us/magazine/cc163759.aspx)

MethodInfo 可以加速 -[提高性能反射，我应该考虑哪些替代方案](https://stackoverflow.com/questions/1027980/improving-performance-reflection-what-alternatives-should-i-consider)

好的链接：
[.NET 反射的成本是多少？](https://stackoverflow.com/questions/25458/how-costly-is-net-reflection)
[http://www.codeproject.com/Articles/18450/HyperDescriptor-Accelerated-dynamic-property-acces](http://www.codeproject.com/Articles/18450/HyperDescriptor-Accelerated-dynamic-property-acces)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T03:35:06.170

泛型在编译时绑定，并且与普通类型一样高效。反思将付出巨大的代价。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T04:19:53.247

如果您关心性能，请考虑为每种类型的消息生成[DynamicMethod 。](http://msdn.microsoft.com/en-us/library/System.Reflection.Emit.DynamicMethod.aspx)将生成动态方法的代码对于所有消息类型都是相同的（就像使用反射一样），但是一旦生成动态方法，您将不会受到反射的性能影响。缺点是代码更难编写，更难调试，所以如果你有时间压力，这可能不是最好的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T17:36:46.157

通常有用的一种方法是将反射与静态泛型类一起使用。这是诸如`EqualityComparer<T>.Default`. 本质上，对于任何特定类型`T`，第一个引用`EqualityComparer<T>.Default`将不得不使用反射来确定类型是否`T`实现`IComparable<T>`并构造一个`IEqualityComparer<T>`在不受约束的`T`和使用上运行的实现，或者是对和使用的`Object.Equals`约束。为此目的使用反射有点慢，但对于任何特定类型只需要执行一次。一旦构造了实现，它将被存储在一个静态字段中`T``IEqualityComparer<T>``IEqualityComparer<T>.Equals``T``EqualityComparer<T>`，因此任何将来获取该类型的默认比较器的请求都将能够简单地使用早期构造的`IEqualityComparer<T>`实现。

这种方法结合了泛型的速度和灵活性来完成仅使用泛型还不够的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-19T05:15:59.027

当前代码执行此操作：

```
protected void Decode<T>(Action<BinaryReader> action, byte[] buffer) {...} 
```

创建 MemoryStream 流。在流上创建 BinaryReader 阅读器。然后执行动作（阅读器）。

现在假设我们有 HelloMessage.cs，它只有两个属性，一个字节 Id 和一个 int 描述符。解码器类 HelloMessageCodec.cs 的 Decode 方法如下所示：

```
public HelloMessage Decode(byte[] buffer)
{
    var message = new HelloMessage();
    Decode<HelloMessage>(reader => 
        { message.Id = reader.ReadByte();
          message.Descriptor = reader.ReadInt32();
        }, buffer);
    return message;
} 
```

这确实做得很好，但是，大约有 15 种类型的消息，并且每种类型都有自己的 xxxMessageCodec.cs，带有 Decode 和 Encode 实现，每个都有在 Action 委托中手动传递的属性。

现在我必须进行加密，这意味着，如果我遵循这种模式，我必须构建 15 个不同的消息加密器。

我已经将所有编解码器代码重新设计为解决方案#2（带有反射），而不是拥有 15 x 2 个函数，我只有 2 个函数 + 没有底层级别，只有两个函数通过它们的属性处理消息并调用 ReadByte、ReadInt32、 ...取决于 typeof 属性。

所以，我已经完成了这项工作，但是我没有足够的时间来测试性能，因为我必须继续进行加密工作。我必须选择两种解决方案中的一种来继续进行，并且我有睡眠问题，较小的解决方案（反射解决方案）是否会在稍后将我踢回来:)

# multithreading - 我应该如何处理 DXGI 中的多个交换链？

> ID：10202367
> 
> 赞同：0
> 
> 时间：2012-04-18T03:29:06.810
> 
> 标签：multithreading, direct3d11, dxgi

这里很混乱。是不能同时访问一个交换链，还是DXGI完全不是线程安全的？

如果我有 2 个交换链用于一张卡上的 2 个显示，那么交换它们的最佳方式是什么？我很难在多个交换链上找到任何资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T22:57:11.483

请查看此链接： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ee417025](http://msdn.microsoft.com/en-us/library/windows/desktop/ee417025(v=vs.85).aspx#multiple_monitors) (v=vs.85).aspx#multiple_monitors当您想在两个或多个显示器上显示不同的窗口时，您应该创建两个或多个交换链，每个交换链用于一台监视器。

# android - 管理 ActivityGroup 内的活动

> ID：10202368
> 
> 赞同：0
> 
> 时间：2012-04-18T03:29:16.523
> 
> 标签：android, android-activity, android-tabhost, activitygroup

我正在尝试，`TabHost`当`ActivityGroup`我注意到如果我按下一项活动，整个活动`ActivityGroup`就会被破坏。因此，我创建了一个代表我的活动的视图列表。但是，这会导致我之前的活动失去其状态。我什至`freezesText`将我`EditText`之前的活动设置为“真”，但这无助于保持其价值。

你能解释一下它是如何`ActivityGroup`工作的以及它是如何管理子活动的吗？现在，我的印象是`ActivityGroup`只切换视图，而不是活动。我说得对吗？我在这里越来越困惑。我怎样才能让它工作，如果我按下一个活动，前一个活动将根据其最后状态恢复？（就像正常活动调用另一个活动然后用户按下时发生的情况一样。）

这就是我想要发生的事情：

*   ActivityGroupA（ActivityGroupA 已启动。用户在 ActivityGroupA 上输入详细信息。）
*   ActivityGroupA > ActivityB（用户按下“提交”。ActivityGroupA 调用 ActivityB。）
*   ActivityB > ActivityGroupA（用户按下“取消”。ActivityB 被销毁。ActivityGroupA 现在再次位于堆栈顶部。）

这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T05:02:45.650

```
public void back()
{
    if ( history.size() > 1 )
    {
        history.remove(history.size() - 1);
        View v = history.get(history.size() - 1);
        v.setFocusable(true);
        v.setFocusableInTouchMode(true);
        v.clearFocus();
        setContentView(v);
    }
    else 
        this.finish();
} 
```

# mysql - 在 MySQL 问题中搜索多个值

> ID：10202372
> 
> 赞同：0
> 
> 时间：2012-04-18T03:29:53.487
> 
> 标签：mysql, search

我正在尝试在数据表中搜索两个关键字，但遇到了以下问题，即使我知道大约有 36 个，以下内容也没有返回任何结果。

有人可以帮我写一个更好的查询吗？

```
SELECT user_id, name, value
FROM data
    INNER JOIN fields ON data.field_id = fields.id 
WHERE name IN ('Type', 'Category')
AND value = 'Keyword 1'
AND value = 'Keyword 2'  /* If I use OR it returns 50 records of those +14 are irrelevant*/
GROUP BY user_id
HAVING COUNT(user_id)>1
ORDER BY value 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T03:33:25.620

注意括号的添加：

```
SELECT user_id, name, value
FROM data
INNER JOIN fields ON data.field_id = fields.id 
WHERE name IN ('Type', 'Category')
AND (value = 'Keyword 1'
OR value = 'Keyword 2') 
GROUP BY user_id
HAVING COUNT(user_id)>1
ORDER BY value 
```

SQL 从左到右绑定，所以

```
WHERE name IN ('Type', 'Category') AND value = 'Keyword 1' OR value = 'Keyword 2' 
```

相当于

```
WHERE (name IN ('Type', 'Category') AND value = 'Keyword 1') OR value = 'Keyword 2' 
```

这样您就可以看到额外记录的来源 - 所有带有 的记录都`value = 'Keyword 2'`将被包括在内，而不管`name`.

当然，你也可以这样写：

```
WHERE name IN ('Type', 'Category') AND value IN ('Keyword 1', 'Keyword 2') 
```

这消除了优先级问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:09:19.433

尝试这个-

```
SELECT user_id, name, value
FROM data
    INNER JOIN fields ON data.field_id = fields.id 
WHERE name IN ('Type', 'Category')
AND value in( 'Keyword 1','Keyword 2') 
GROUP BY user_id
HAVING COUNT(user_id)>1
ORDER BY value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T03:32:45.090

您需要对条件进行分组，如下所示：

```
WHERE name IN ('Type', 'Category')
AND (value = 'Keyword 1'
    OR value = 'Keyword 2' ) 
```

否则 MySql 将返回具有关键字 2 但名称不是类型或类别的行。

或者，查看[全文搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)。

# xcode - UINavigationBar 的 UIFont 是什么？

> ID：10202380
> 
> 赞同：1
> 
> 时间：2012-04-18T03:30:48.690
> 
> 标签：xcode, cocoa-touch, uinavigationbar

如何以编程方式获取 UINavigationBar 标题的字体、颜色、阴影等？我正在使用 Xcode 和 Cocoa touch。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:56:28.097

```
NSDictionary * attributes = navigationBar.titleTextAttributes;
UIFont * font = [attributes objectForKey:UITextAttributeFont];
...more pairs exist in attributes... 
```

# java - DAO 接口/实现拆分层次结构和约定

> ID：10202386
> 
> 赞同：1
> 
> 时间：2012-04-18T03:32:26.727
> 
> 标签：java, dao

在尝试实现一个基本的通用 CRUD DAO 时，我遇到了似乎有点反模式的东西

通用道

```
public interface GenericDao<T, PK extends Serializable> {

  T findOne(final PK id);

  List<T> findAll();

  PK create(final T entity);

  void update(final T entity);

  void delete(final T entity);

  void deleteById(final PK id);

} 
```

GenericDaoHibernateImpl

```
public abstract class GenericDaoHibernateImpl<T, PK extends Serializable> implements    GenericDao<T, PK> {

  @Autowired
  private SessionFactory sessionFactory;
  private Class<T> clazz;

  public GenericDaoHibernateImpl(Class<T> clazzToSet) {
      this.clazz = clazzToSet;
  }

  protected final Session getCurrentSession() {
    return sessionFactory.getCurrentSession();
  }

  @Override
  public T findOne(PK id) {
    return (T) getCurrentSession().get(clazz, id);
  }

  @Override
  public List<T> findAll() {
    return getCurrentSession().createQuery("from " + clazz.getName()).list();
  }

  @Override
  public PK create(T entity) {
    return (PK) getCurrentSession().save(entity);
  }

  @Override
  public void update(T entity) {
    getCurrentSession().update(entity);
  }

  @Override
  public void delete(T entity) {
    getCurrentSession().delete(entity);
  }

  @Override
  public void deleteById(PK id) {
    final T entity = findOne(id);
    delete(entity);
  }
} 
```

客户道

```
public interface CustomerDao extends GenericDao<Customer, Long> {

  public Customer findByUsername(String username);

} 
```

CustomerDaoHibernateImpl

```
public class CustomerDaoHibernateImpl extends GenericDaoHibernateImpl<Customer, Long> implements CustomerDao {

  public CustomerDaoHibernateImpl() {
    super(Customer.class);
  }

  public Customer findByUsername(String username);
    Criteria criteria =  getCurrentSession().createCriteria(Customer.class);
    criteria.add(Restrictions.eq("username", username));
    return criteria.list();
  }

} 
```

我指的问题是，在我们特定领域的 DAO 实现中，就像我们两次满足/实现 GenericDao 一样。一次在 GenericDaoHibernateImpl 中，然后在我们的域 DAO 接口中，即 CustomerDao。这里我们必须在声明中指定，使用 Customer 和 Long。然后我们实现 CustomerDaoHibernateImpl，并且我们必须再次声明 Customer 和 Long。

我是不是做错了什么，因为这似乎不是正确的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T03:39:29.647

检查这个[http://www.ibm.com/developerworks/java/library/j-genericdao/index.html](http://www.ibm.com/developerworks/java/library/j-genericdao/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T04:29:11.903

我从未将其视为接口和抽象类扩展/实现共同祖先的反模式。对我来说，客户界面说它需要在通用 dao 中定义的所有操作。抽象类碰巧说它实现了泛型 dao。然后，当您到达您的客户 dao impl 时，您表明您实现了客户接口，然后选择通过扩展抽象类来实现它。这允许抽象类和客户接口分别增长或更改，如果其中一方不想扩展/实现通用 dao 而另一个则这样做。希望这是有道理的

更新：我看到我没有完全回答您关于必须冗余指定的泛型问题，但希望我的回答对具有相同祖先接口的接口和抽象类提供一些可信度

# android - 在哪里获得屏幕解锁声音

> ID：10202389
> 
> 赞同：1
> 
> 时间：2012-04-18T03:32:34.367
> 
> 标签：android

当我们为我的应用程序解锁屏幕时，我想使用声音，我更喜欢使用系统中的某些东西，而不是将该声音文件放入原始文件。在哪里得到它？（我认为它可能在 android.R 中......但没有找到）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T03:49:03.893

我做了类似的事情，这对我帮助很大： [如何解锁你的解锁/锁定声音](http://droidpirate.com/2010/08/23/how-to-change-your-unlocklock-sound/)。

您只需访问根目录并找到 .ogg 文件。之后只需保存文件，这非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T04:02:05.787

如果您从[这里](http://source.android.com/source/downloading.html)下载源代码，您可以在`frameworks/base/data/sounds/effects/ogg/Unlock.ogg`.

[我在这里](http://www.mediafire.com/?fzjzui21s67v223)上传了文件，如果你需要的话（这个链接最终可能会失效）。

# c# - 执行一批微软翻译查询

> ID：10202391
> 
> 赞同：0
> 
> 时间：2012-04-18T03:32:53.867
> 
> 标签：c#, wcf, azure, translation

我们正在尝试使用 Azure 市场上提供的 Microsoft 翻译服务。[我从http://code.msdn.microsoft.com/windowsazure/Walkthrough-Translator-in-7e0be0f7/view/SourceCode](http://code.msdn.microsoft.com/windowsazure/Walkthrough-Translator-in-7e0be0f7/view/SourceCode)提供的示例代码开始

使用他们的示例代码，我可以获得一个翻译。但是，我想在一个请求中获得多个翻译。我尝试使用 DataServiceContext.ExecuteBatch，但它抛出 WebException 并显示“远程服务器返回错误：（404）未找到。”

```
TranslatorContainer cont = new TranslatorContainer(new Uri("https://api.datamarket.azure.com/Bing/MicrosoftTranslator/"));
var accountKey = "<account-key>";
cont.Credentials = new NetworkCredential(accountKey, accountKey);

// This works
var result1 = cont.Translate("Nothing to translate", "nl", "en").Execute().ToList();

DataServiceQuery<Translation>[] queries = new DataServiceQuery<Translation>[]
{
    cont.Translate("Nothing", "nl", "en"),
    cont.Translate("Nothing to translate", "nl", "en"),
    cont.Translate("What happend", "nl", "en"),
};

// This throws exception
var result2 = cont.ExecuteBatch(queries); 
```

我可以使用多个线程并并行发出多个请求。但我喜欢避免这种情况。以前有人试过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:21:59.400

我不确定为什么您的代码不起作用。但是您可能想直接使用 REST API。请尝试使用以下代码，这对我来说可以正常工作：

```
 string stringToTranslate = "test";
        WebClient client = new WebClient();
        client.Credentials = new NetworkCredential("[your user name]", "[your key]");
        string results = client.DownloadString("https://api.datamarket.azure.com/Data.ashx/Bing/MicrosoftTranslator/Translate?Text=%27" + stringToTranslate + "%27&To=%27zh-CHS%27"); 
```

结果是一个 AtomPub 提要。然后，您可以解析提要（例如，使用 SyndicationFeed 类：http: [//msdn.microsoft.com/en-us/library/system.servicemodel.syndication.syndicationfeed.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.syndication.syndicationfeed.aspx)）。

此致，

明旭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-02T01:43:15.727

使用[此 NuGet 包](https://www.nuget.org/packages/AzureCognitiveTranslator/)在 CognitiveServices Translator API 3.0 上进行批量翻译

*   这个 Nuget 可以帮助您**轻松**快速**地**进行批量翻译。
    1.  **工作原理**：它将您的内容转换为一些完美的翻译包。
    2.  **速度**：在我的电脑上，每秒大约 300~500 个项目（*不是字符）*

以下是步骤：

1.  使用您的 BaseUrl 和 Key 创建 Translator 实例：

    ```
    Translator translator = new Translator(BaseUrl, Key); 
    ```

2.  向翻译器添加内容：

    ```
    translator.AddContent("哈啰");
    //Here you can add many times, more than 100, 1000 or 10000.
    //You can also set the "Contents" property instead. 
    ```

3.  获取结果aysnc：

    ```
    List<string> translation = await translator.TranslateAsync("en"); 
    ```

# javascript - 获取文本选择中的元素

> ID：10202404
> 
> 赞同：1
> 
> 时间：2012-04-18T03:33:56.670
> 
> 标签：javascript, dom, range

我想获取用户选择中包含的所有元素（如 DOM 2 范围/MS TextRanges 中）。

```
/** @return {Array.<Element>} */
function getSelectedElements() {

  var elements = [];

  // get elements in the user selection somehow

  return elements;

} 
```

我试图通过遵循 Tim Down[对类似问题的出色解决方案](https://stackoverflow.com/a/5614571/886931)、一些 Moz 和 MS 文档以及一些 PPK 的东西来做到这一点。

该方法基本上是：

* * *

*   将 SelectionLikeObject 定义为 DOM 选择或 IE 选择。

*   将 RangeLikeObject 定义为 DOM Range 或 IE TextRange。

*   让我们`containerNode`成为一个节点。

*   让我们`containerElement`成为一个元素。

*   让我们`containedElements`成为一个 NodeList。

*   让我们`elementRange`成为一个 RangeLikeObject。

*   让我们`selectedRange`成为一个 RangeLikeObject。

*   让我们`selectedElements`成为一个元素数组。

*   让我们`element`成为一个元素。

*   让我们`selection`成为一个 SelectionLikeObject。

*   `selection`从用户的选择中设置。

*   设置`selectedElements`为新数组。

*   For each `selectedRange` in `selection`:

    *   Set `containerNode` to the common ancestor container of `selectedRange`.

    *   Set `containerElement` to the closest Element ancestor to `containerNode`.

    *   Set `containedElements` to a list of descendants of `containerElement`.

    *   For each `element` in `containedElements`:

        *   Set `elementRange` from `element`.

        *   If the boundaries of `elementRange` fall within the boundaries of `selectedRange`:

            *   Push `element` onto `selectedElements`.

* * *

The DOM branch looks like this:

```
/** 
    @param {Document} doc
    @return {Array.<Element>} 
*/
getSelectedElements.fromDOM = function (doc) {

  /** @type {Range} */
  var selectedRange;

  /** @type {Array.<Element>} */
  var selectedElements = [];

  /** @type {Node} */
  var containerNode;

  /** @type {Element} */
  var containerElement;

  /** @type {NodeList} */
  var containedElements;

  /** @type {Range} */
  var elementRange;

  /** @type {Element} */
  var element;

  /** @type {Selection} */
  var selection = doc.defaultView.getSelection();

  /** @type {number} */
  var rangeCount = selection.rangeCount;

  /** @type {number} */
  var elementCount;

  /** @type {number} */
  var i;

  // hack for browsers without getRangeAt
  // see http://www.quirksmode.org/dom/range_intro.html

  if (!selection.getRangeAt) {

    selection.getRangeAt = function (i) {
      /** @type {Range} */
      var range = doc.createRange();
      if (i || !selection.anchorNode) {
        return range;
      }
      range.setStart(selection.anchorNode, selection.anchorOffset);
      range.setEnd(selection.focusNode, selection.focusOffset);
      return range;

    };

    selection.rangeCount = 1;

  }

  elementRange = doc.createRange();

  for (i = 0; i < rangeCount; ++i) {

    selectedRange = selection.getRangeAt(i);

    containerNode = selectedRange.commonAncestorContainer;

    while (containerNode && containerNode.nodeType != 1) {

      containerNode = containerNode.parentNode;

    }

    if (!containerNode) {

      return selectedElements; // something went wrong...

    }

    containerElement = /** @type {Element} */ containerNode;

    containedElements = containerElement.getElementsByTagName('*');

    elementCount = containedElements.length;

    for (var i = 0; i < elementCount; ++i) {

      element = containedElements[i];

      elementRange.selectNodeContents(element);

      if (elementRange.compareBoundaryPoints(selectedRange.END_TO_START, selectedRange) < 1 &&
          elementRange.compareBoundaryPoints(selectedRange.START_TO_END, selectedRange) > -1) {

        selectedElements.push(element);

      }
    }
  }

  elementRange.detach();

  return selectedElements;

}; 
```

The IE branch looks like this:

```
/** 
    @param {Document} doc
    @return {Array.<Element>} 
*/
getSelectedElements.fromIE = function (doc) {

  // Selection - http://msdn.microsoft.com/en-us/library/ie/dd347133(v=vs.85).aspx
  // TextRange - http://msdn.microsoft.com/en-us/library/dd347140(v=vs.85).aspx
  // ControlRange - http://msdn.microsoft.com/en-us/library/ie/ms537447(v=vs.85).aspx

  /** @type {TextRange|ControlRange} */
  var ieRange = doc.selection && doc.selection.createRange();

  /** @type {Array.<Element>} */
  var selectedElements = [];

  /** @type {TextRange} */
  var selectedRange;

  /** @type {Element} */
  var containerElement;

  /** @type {NodeList} */
  var containedElements;

  /** @type {TextRange} */
  var elementRange;

  /** @type {Element} */
  var element;

  /** @type {Selection} */
  var selection;

  /** @type {number} */
  var i = -1;

  if (ieRange.text === void 0) {

    return []; // FIXME: It's a ControlRange, give up.

  }

  selectedRange = /** @type {TextRange} */ ieRange;

  containerElement = selectedRange.parentElement();

  containedElements = containerElement.getElementsByTagName('*');

  elementRange = doc.body.createTextRange();

  while ((element = containedElements[++i])) {

      elementRange.moveToElementText(element);

      if (elementRange.compareEndPoints("StartToEnd", selectedRange) > -1 && 
          elementRange.compareEndPoints("EndToStart", selectedRange) < 1) {

        selectedElements.push(element);

      } 
  }

  return /** @type {Array.<Element>} */ selectedElements;

}; 
```

Now, the issue I want to solve is this: if only part of the text in an element is selected, it appears in the returned array, even though it is only [partly selected](http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level-2-Range-Containment).

I'd like to add a parameter that changes the behavior to only include fully-selected elements. I have a feeling the answer lies with compareBoundaryPoints, I just don't understand it well enough to figure it out yet.

Also, the IE code is untested so far, but please let me know if anything looks wrong with it (or the DOM branch).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:37:01.093

After getting some sleep and reading up on [compareBoundaryPoints](https://developer.mozilla.org/en/DOM/range.compareBoundaryPoints) again, I think I have the answer.

```
if (elementRange.compareBoundaryPoints(Range.START_TO_START, selectedRange) > -1 &&
    elementRange.compareBoundaryPoints(Range.END_TO_END, selectedRange) < 1) { 
```

This seems to only evaluate to `true` for elements that fall completely within the user selection.

# pascal - 定义未知数量的变量

> ID：10202406
> 
> 赞同：2
> 
> 时间：2012-04-18T03:34:34.500
> 
> 标签：pascal, freepascal, lazarus

很久以前遇到一个问题：如果我需要做一个使用变量的小程序，你如何定义和未知的变量数量？

IE，如果你有一个程序要求用户输入一个数字，那么用户输入的数字就是程序中需要的变量数。在 Java 或 VB 中很容易解决这个问题，因为您可以根据需要（在旅途中）定义变量，但是 pascal 让您在主程序代码开始之前声明它们，所以您不能使用这个技巧。

我在考虑一个多维数组，但我认为这是解决这个问题的一个糟糕的方法，因为如果你定义的“正方形”比你需要的少，那么如果你定义的比你实际使用的多，那么你会浪费内存...

那么，如何定义未知数量的变量呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T03:40:29.553

您可以使用动态调整数组大小`SetLength`

```
Type 
  TByteArray = Array of Byte;

Var
  Data : TByteArray
  NewSize : Integer;
Begin
  Write('Enter the number of bytes you require: ');
  ReadLn(NewSize)
  SetLength(Data, NewSize);
  ...
End; 
```

请原谅任何语法错误，我已经有 20 多年没有使用 Pascal 了。多棒的语言啊！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T03:40:57.843

您需要根据用户提供的数字动态分配内存。如果这个页面是正确的，你可以在 FreePascal 中这样做：

```
type dynamic_array= array of integer;
var x:dynamic_array;
setlength(x, k); 
```

`k`用户输入在哪里

# c++ - 我只需要从文件中提取每条记录的一个字段，但它不起作用

> ID：10202412
> 
> 赞同：0
> 
> 时间：2012-04-18T03:35:32.907
> 
> 标签：c++, file, field, extract, fstream

我有一个文本文件，其中包含每条记录的名称、年龄和 gpa。我写了一个函数 getgpa 应该计算文件（整个类）的平均 gpa。问题是当我提取field1（姓名）、field2（年龄）和field3（gpa）时，我可以很容易地计算出全班的平均gpa。但是当我尝试只提取 field3 时，我没有任何结果。如何仅提取每条记录的 field3 (gpa)？我要提取的功能就在下面。我正在使用 Dev-C++。您的帮助将不胜感激。谢谢。

```
int student::getgpa()
{
  double field3, gpa; double sumGPA=0; int count=0;
  string field1; int field2;
  char line[256];
  cout<<"call of the function 'getgpa' " <<endl;   
  ifstream IS ("student.dat", ios::in);

  while (!IS.eof())
   {
     if(IS>>field1>>field2>>field3)  //where the problem is!
     {     
       sumGPA=sumGPA+field3;
       count++;
     }
   }
   IS.close();

    if (count>0)  //just to make sur not to divide by zero!!
    cout<<"gpa of the students:" <<sumGPA/count<<endl;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T04:20:06.467

> 我试图只写 if(IS>>field3) 而不是 if(IS>>field1>>field2>>field3)。

这将不起作用，因为`IS`将您正在读取的当前位置保留在文件中。当您这样做时`if(IS>>field3)`，提取失败，因为文件中的当前位置正在尝试提取 field1。

您要么需要按照您的方式保留代码，要么因为`field1`并且`field2`未使用，更改名称以指示它们是一次性变量（也按照注释中的建议将 if 移动到 while 循环内，因为 while 循环将是错误的一旦提取失败）：

```
string dummy1; int dummy2;
...
while (IS>>dummy1>>dummy2>>field3) 
```

另一种选择是使用[tellg](http://en.cppreference.com/w/cpp/io/basic_istream/tellg)和[seekg](http://en.cppreference.com/w/cpp/io/basic_istream/seekg)来更改流指示器的当前位置，但如果您的行长度不同，这可能不是一个好的解决方案。

此外，另一种选择是先使用`std::getline`并提取每一行，然后再使用它，但我认为你拥有它的方式很好。

# java - 为什么这种自引用泛型分配是非法的？

> ID：10202413
> 
> 赞同：5
> 
> 时间：2012-04-18T03:35:37.470
> 
> 标签：java, generics

我很难理解为什么会发生以下错误。如果#1 没问题，为什么#2 不行？

```
public interface IFoobar<DATA extends IFoobar> {
    void bigFun();
}

class FoobarImpl<DATA extends IFoobar> implements IFoobar<DATA> {
    public void bigFun() {
        DATA d = null;
        IFoobar<DATA> node = d;    //#1 ok
        d = node;                  //#2 error
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T03:40:56.097

因为`DATA`是 的一种`IFoobar`，但反之则不然。这与以下没有什么不同：

```
String d = null;
Object o = d;                //#1 ok
d = o;                       //#2 error 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T03:41:38.607

因为编译器知道该`DATA`类型实现了`IFoobar`. 但它*不*知道所有`IFoobar`对象实际上都是`DATA`对象。简单地`DATA`作为一个通用参数并不意味着什么。你也可以实现另一个不相关的类来实现`IFoobar<DATA>`.

# python - VBA 中的表达式语句

> ID：10202415
> 
> 赞同：2
> 
> 时间：2012-04-18T03:35:45.457
> 
> 标签：python, vba, language-theory

我最近试图编写一个 Excel 宏，我需要确定是否存在特定的工作表。我选择编写脚本的武器是 Python，而我的 VBA 技能确实很差。因此，以良好的 Pythonic 风格，我采用了比许可更容易请求宽恕的方法，并写了如下内容：

```
Debug.Print MyWorkbook.Worksheets(TabName).Name  ''Check for an index error
If Err.Number <> 0 Then
    ''Code to add the sheet to the workbook 
```

在我试图消除打印语句之前，这很有效。我将第一行更改为：

```
MyWorkbook.Worksheets(TabName).Name 
```

突然我开始收到“对象不支持此属性或方法”错误。作为一名 Python 程序员，这让我感到惊讶，我一直在 Python 中做类似的事情。

我很好奇，所以我做了一点阅读。我能够在 Python 中找到关于上述表达式语句的文档，但在 VBA 中找不到。VBA中根本不允许表达式语句吗？如果是这样，他们不这样做有什么原因吗？有谁知道我在哪里可以读到这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:26:29.637

最简洁的答案是不”。VBA 一直势在必行。通常，表达式不是合法的独立语句。您会注意到许多表达式甚至不会“编译”：

```
'Won't "compile"
(42+99) 
```

在您的具体示例中，还有一些事情要做。VBA`MyWorkbook.Worksheets(TabName).Name`以您想要的方式将此行视为返回值的表达式：

```
'Fine: gets value of `Name` property
Debug.Print MyWorkbook.Worksheets(TabName).Name 
```

VBA 在这一行看到相同的代码：

```
'Error: tries to call `Name` as method
MyWorkbook.Worksheets(TabName).Name 
```

作为尝试`Name`在工作表对象上调用（不存在的）方法。(`Name`是 的一个属性`Worksheet`。) 因此，错误消息更有意义，因为您知道发生了什么。

至于阅读更多关于这个，你可以在这里看到：

[https://stackoverflow.com/a/1545024/58845](https://stackoverflow.com/a/1545024/58845)

那里有一个 VBA 语言规范的链接，它可能更准确地涵盖了这类事情，尽管我没有检查：

[http://msdn.microsoft.com/en-us/library/dd361851%28PROT.10%29.aspx](http://msdn.microsoft.com/en-us/library/dd361851%28PROT.10%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T22:10:48.637

在 VBA 中，你不能在没有实际使用的情况下编写一行变量。就像@Marc 所说，您只需要将名称分配给另一个变量。

此外，通常我使用以下功能来检查：

```
Public Function CheckWorksheetExists(wsNams As String) As Boolean

    Dim ws As Worksheet
    On Error Resume Next
    Set ws = Thisworkbook.Worksheets(wsName)
    CheckWorksheetExists = err.Number = 0

End Function 
```

# stylecop - StyleCop SDK：如何获取包含元素的方法的参数名称？

> ID：10202417
> 
> 赞同：0
> 
> 时间：2012-04-18T03:35:55.770
> 
> 标签：stylecop

我希望为 StyleCop 编写一个与 SA1101 相反的自定义规则；`this.`即，如果存在冗余（类似于 ReSharper），我希望发生违规。如果包含该元素的方法/索引器/委托/构造函数没有与该元素同名的参数，则会发生这种情况。

对于自定义源分析器，`VisitElement(CsElement element, CsElement parentElement, T context)`如何获取包含该元素的每个方法/索引器/委托/构造函数的参数名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:50:35.453

您可以将`CsElement`转换为`StyleCop.CSharp.IParameterContainer`，然后使用其`Parameters`属性来检索参数。

# c++ - 如何使用 boost::uniform_on_sphere？

> ID：10202420
> 
> 赞同：1
> 
> 时间：2012-04-18T03:36:12.203
> 
> 标签：c++, boost, random, boost-random

我试图在单位球体上选择一个随机点，发现 boost 提供的分布正是这样做的。但是当我尝试使用它时，所有生成的值都是`nan`. 我不知道我做错了什么，请您赐教吗？这个小代码描述了我正在尝试做的事情：

```
#include <iostream>
#include <fstream>
#include <vector>
#include <boost/random/mersenne_twister.hpp>
#include <boost/random/uniform_on_sphere.hpp>

int main()
{
  boost::mt19937 gen;
  boost::uniform_on_sphere<float> dist(3);

  { // Seed from system random device
    std::ifstream rand_device("/dev/urandom");
    uint32_t seed;
    rand_device >> seed;

    gen.seed(seed);
  }

  while(1) {
    // Generate a point on a unit sphere
    std::vector<float> res = dist(gen);

    // Print the coordinates
    for(int i = 0; i < res.size(); ++i) {
      std::cout << res[i] << ' ';
    }
    std::cout << '\n';
  }
} 
```

输出是：

```
nan nan nan 
nan nan nan 
nan nan nan 
nan nan nan 
```

无穷无尽...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T03:47:39.830

我假设您使用的是 Boost 1.49。以下方法适用于这种情况。

这就是 Boost 有点复杂的地方。对象`uniform_on_sphere`只是您绘制点所需的一个组件，它是分布部分。您还需要`boost::variate_generator`按照以下工作 .cpp 文件的行创建一个。

请注意，这有我自己的包括使用系统时间播种等。您应该能够修改它以适合您。

```
// Standards, w/ctime to seed based on system time.
#include <iostream>
#include <fstream>
#include <vector>
#include <ctime>

// Boost. Requires variate_generator to actually draw the values.
#include <boost/random/mersenne_twister.hpp>
#include <boost/random/uniform_on_sphere.hpp>
#include <boost/random/variate_generator.hpp>

int main(){

    typedef boost::random::mt19937 gen_type;

    // You can seed this your way as well, but this is my quick and dirty way.
    gen_type rand_gen;
    rand_gen.seed(static_cast<unsigned int>(std::time(0)));

    // Create the distribution object.
    boost::uniform_on_sphere<float> unif_sphere(3);

    // This is what will actually supply drawn values.
    boost::variate_generator<gen_type&, boost::uniform_on_sphere<float> >    random_on_sphere(rand_gen, unif_sphere);

    // Now you can draw a vector of drawn coordinates as such:
    std::vector<float> random_sphere_point = random_on_sphere();

    // Print out the drawn sphere triple's values.
    for(int i = 0; i < random_sphere_point.size(); ++i) {
        std::cout << random_sphere_point.at(i) << ' ';
    }
    std::cout << '\n';

    return 0;
} 
```

当我在控制台中运行它时，我得到了看似正确的东西：

```
ely@AMDESK:~/Desktop/Programming/C++/RandOnSphere$ g++ -I /usr/include/boost_1_49/ -L    /usr/include/boost_1_49/stage/lib randomOnSphere.cpp -o ros
ely@AMDESK:~/Desktop/Programming/C++/RandOnSphere$ ./ros 
0.876326 -0.0441729 0.479689 
ely@AMDESK:~/Desktop/Programming/C++/RandOnSphere$ ./ros 
-0.039037 -0.17792 0.98327 
ely@AMDESK:~/Desktop/Programming/C++/RandOnSphere$ ./ros 
-0.896734 0.419589 -0.14076 
```

# wordpress - query_posts 打破所有主题的页面导航

> ID：10202425
> 
> 赞同：0
> 
> 时间：2012-04-18T03:36:43.927
> 
> 标签：wordpress

我正在使用 Wordpress 3.3.1。我在 2012 年 4 月有 13 个帖子。我单击侧边栏中的 2012 年 4 月链接（在档案下）以显示所有文章的列表。默认情况下，Wordpress 每页显示 10 篇文章，当我访问第二页时，分页工作正常。我希望每页只能显示 5 个帖子，问题从这里开始。我在论点中使用`query_posts`和使用。`posts_per_page=5`我已经在 2 个不同的主题上进行了尝试，但它们都无法正常工作。我正在使用“二十”主题和我自己的“自定义主题”。这是我所做的：

**二十个主题：**

我尝试了两组代码，在使用一组时禁用了另一组。我之前添加了它们`if ( have_posts() ) the_post();`。因为有13篇文章，2页导航效果很好。但是当我尝试访问最后一页时，它给了我一个 404 错误。以下是该主题的完整代码：

```
<?php
/**
 * The template for displaying Archive pages.
 *
 * Used to display archive-type pages if nothing more specific matches a query.
 * For example, puts together date-based pages if no date.php file exists.
 *
 * Learn more: http://codex.wordpress.org/Template_Hierarchy
 *
 * @package WordPress
 * @subpackage Twenty_Ten
 * @since Twenty Ten 1.0
 */

get_header(); ?>

        <div id="container">
            <div id="content" role="main">

<?php 
//1st experiment
//query_posts( array( 'posts_per_page' => 5, 'paged' => get_query_var('paged') ) );

//2nd experiment
$args = array(
                   'posts_per_page' => 5,
                   'paged' => ( get_query_var('paged') ? get_query_var('paged') : 1),
                   );

query_posts($args); //Shows a 404 page when visiting last page

/* Queue the first post, that way we know
     * what date we're dealing with (if that is the case).
     *
     * We reset this later so we can run the loop
     * properly with a call to rewind_posts().
     */
    if ( have_posts() )
        the_post();
?>

            <h1 class="page-title">
<?php if ( is_day() ) : ?>
                <?php printf( __( 'Daily Archives: <span>%s</span>', 'twentyten' ), get_the_date() ); ?>
<?php elseif ( is_month() ) : ?>
                <?php printf( __( 'Monthly Archives: <span>%s</span>', 'twentyten' ), get_the_date( _x( 'F Y', 'monthly archives date format', 'twentyten' ) ) ); ?>
<?php elseif ( is_year() ) : ?>
                <?php printf( __( 'Yearly Archives: <span>%s</span>', 'twentyten' ), get_the_date( _x( 'Y', 'yearly archives date format', 'twentyten' ) ) ); ?>
<?php else : ?>
                <?php _e( 'Blog Archives', 'twentyten' ); ?>
<?php endif; ?>
            </h1>

<?php
    /* Since we called the_post() above, we need to
     * rewind the loop back to the beginning that way
     * we can run the loop properly, in full.
     */
    rewind_posts();

    /* Run the loop for the archives page to output the posts.
     * If you want to overload this in a child theme then include a file
     * called loop-archive.php and that will be used instead.
     */
     get_template_part( 'loop', 'archive' );
?>

            </div><!-- #content -->
        </div><!-- #container -->

<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

**自定义主题：**

更糟糕的是，页面确实在页面底部显示了 1、2、3、Next 链接，总共只显示 5 个帖子，但是当我点击 2 时，分页显示的帖子与那些帖子相同在第一页。当我单击“3”链接或“下一步”链接时，我看到 404 错误。请注意，在这个主题中使用的分页技术是不同的。我尝试了很多组合，但没有一个有帮助。为了想法，我将这些实验留在评论中。

```
<?php get_header(); ?>

                <div id="container">    
                        <div id="content">

<?php the_post(); ?>                    

<?php if ( is_day() ) : ?>
                                <h1 class="page-title"><?php printf( __( 'Daily Archives: <span>%s</span>', 'your-theme' ), get_the_time(get_option('date_format')) ) ?></h1>
<?php elseif ( is_month() ) : ?>
                                <h1 class="page-title"><?php printf( __( 'Monthly Archives: <span>%s</span>', 'your-theme' ), get_the_time('F Y') ) ?></h1>
<?php elseif ( is_year() ) : ?>
                                <h1 class="page-title"><?php printf( __( 'Yearly Archives: <span>%s</span>', 'your-theme' ), get_the_time('Y') ) ?></h1>
<?php elseif ( isset($_GET['paged']) && !empty($_GET['paged']) ) : ?>
                                <h1 class="page-title"><?php _e( 'Blog Archives', 'your-theme' ) ?></h1>
<?php endif; ?>

<?php rewind_posts(); ?>

<?php //$posts=query_posts($query_string . '&showposts=' . get_option('posts_per_page')); ?>

<?php //$posts=query_posts($query_string . '&showposts=5'); ?>
<?php
/*global $query_string;*/
//query_posts($query_string . "&posts_per_page=5"); 
//query_posts($query_string.'&showposts=5');
/*$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
    query_posts("paged=$paged");
*/

/*global $query_string;
parse_str( $query_string, $my_query_array );
$paged = ( isset( $my_query_array['paged'] ) && !empty( $my_query_array['paged'] ) ) ? $my_query_array['paged'] : 1;
query_posts('post_type=post&posts_per_page=5&paged='.$paged);*/

/*$args = array(
'orderby' => 'meta_value_num',
    'order' => 'ASC',
    'posts_per_page' => 5   
 );
//$query = new WP_Query( $args );
$query = new WP_Query( 'posts_per_page=3' );*/

//query_posts( array( 'posts_per_page' => 10, 'paged' => get_query_var('paged') ) );

/*if(!is_home() ){
    global $query_string;
    parse_str( $query_string, $args );
    $args['posts_per_page'] = 5;
    query_posts($args);
}*/

// The Query
/*global $wp_query;
query_posts(
    array_merge(
        array(
        'orderby' => 'date',
        'order' => 'DESC',
        'posts_per_page' => 5
         ),
        $wp_query->query
    )
);

*/

//remove_page_from_query_string();
//custom_query_posts();

?>    

<?php 
//The Query
/*$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$args=array(
'paged'=>$paged, //Pulls the paged function into the query
'posts_per_page'=>5, //Limits the amount of posts on each page
);
query_posts($args);*/

// Reset Query
//wp_reset_query();
//query_posts('posts_per_page=5');

/*global $query_string;
query_posts( $query_string . '&posts_per_page=5' );
*/

/* $args = array(
                   'posts_per_page' => 5,
                   'paged' => ( get_query_var('paged') ? get_query_var('paged') : 1),
                   );

 query_posts($args);
*/
//query_posts(array('posts_per_page' => 5, 'paged' => get_query_var('page')));

query_posts("posts_per_page=5"); 
?>

<?php while ( have_posts() ) : the_post(); ?>

                                <div id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
                                        <h2 class="entry-title"><a href="<?php the_permalink(); ?>" title="<?php printf( __('Permalink to %s', 'your-theme'), the_title_attribute('echo=0') ); ?>" rel="bookmark"><?php the_title(); ?></a></h2>

                                        <div class="entry-meta">
                                                <span class="meta-prep meta-prep-author"><?php _e('By ', 'your-theme'); ?></span>
                                                <span class="author vcard"><a class="url fn n" href="<?php echo get_author_link( false, $authordata->ID, $authordata->user_nicename ); ?>" title="<?php printf( __( 'View all posts by %s', 'your-theme' ), $authordata->display_name ); ?>"><?php the_author(); ?></a></span>
                                                <span class="meta-sep"> | </span>
                                                <span class="meta-prep meta-prep-entry-date"><?php _e('Published ', 'your-theme'); ?></span>
                                                <span class="entry-date"><abbr class="published" title="<?php the_time('Y-m-d\TH:i:sO') ?>"><?php the_time( get_option( 'date_format' ) ); ?></abbr></span>
                                                <?php edit_post_link( __( 'Edit', 'your-theme' ), "<span class=\"meta-sep\">|</span>\n\t\t\t\t\t\t<span class=\"edit-link\">", "</span>\n\t\t\t\t\t" ) ?>
                                        </div><!-- .entry-meta -->

                                        <div class="entry-summary">     
<?php the_excerpt( __( 'Continue reading <span class="meta-nav">&raquo;</span>', 'your-theme' )  ); ?>
                                        </div><!-- .entry-summary -->

                                        <div class="entry-utility">
                                                <span class="cat-links"><span class="entry-utility-prep entry-utility-prep-cat-links"><?php _e( 'Posted in ', 'your-theme' ); ?></span><?php echo get_the_category_list(', '); ?></span>
                                                <span class="meta-sep"> | </span>
                                                <?php the_tags( '<span class="tag-links"><span class="entry-utility-prep entry-utility-prep-tag-links">' . __('Tagged ', 'your-theme' ) . '</span>', ", ", "</span>\n\t\t\t\t\t\t<span class=\"meta-sep\">|</span>\n" ) ?>
                                                <span class="comments-link"><?php comments_popup_link( __( 'Leave a comment', 'your-theme' ), __( '1 Comment', 'your-theme' ), __( '% Comments', 'your-theme' ) ) ?></span>
                                                <?php edit_post_link( __( 'Edit', 'your-theme' ), "<span class=\"meta-sep\">|</span>\n\t\t\t\t\t\t<span class=\"edit-link\">", "</span>\n\t\t\t\t\t\n" ) ?>
                                        </div><!-- #entry-utility -->   
                                </div><!-- #post-<?php the_ID(); ?> -->

<?php endwhile; ?>                      

<div class="pagination">
<?php 
global $wp_query;

$big = 999999999; // need an unlikely integer

echo paginate_links( array(
    'base' => str_replace( $big, '%#%', get_pagenum_link( $big ) ),
    'format' => '?paged=%#%',
    'current' => max( 1, get_query_var('paged') ),
    'total' => $wp_query->max_num_pages
) );
?>
</div><!--END .pagination-->

<?php //Tried enabling/disabling this, but does not help
//wp_reset_query();  // Restore global post data
?>

                        </div><!-- #content -->         
                </div><!-- #container -->

<?php get_sidebar(); ?> 
<?php get_footer(); ?> 
```

如何修复主题中的分页，最重要的是自定义主题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:05:46.250

## 编辑

请不要使用`query_posts()`. [改为](http://codex.wordpress.org/Plugin_API/Action_Reference/pre_get_posts)[过滤`pre_get_posts`](http://codex.wordpress.org/Plugin_API/Action_Reference/pre_get_posts)：

```
function so10213400_filter_pre_get_posts( $query ) {
    if ( is_main_query() && is_month() ) {
        $query->query_vars['posts_per_page'] = 5;
    }
    return;
}
add_filter( 'pre_get_posts', 'so10213400_filter_pre_get_posts' ); 
```

请注意，回调确保查询是给定页面的主要查询，并且当前上下文是一个月存档。如果您希望在不同的上下文中使用相同的行为，请更改`is_month()`为适当的内容（例如`is_date()`or `is_archive()`，或者也许`! is_home()`等）。

## 原始答案

您需要将自定义args*连接*到默认args[以保留默认 args](http://codex.wordpress.org/Function_Reference/query_posts#Preserving_Existing_Query_Parameters)，但您正在*替换*它们。`query_posts()``$query`

 *而不是这个：

```
//2nd experiment
$args = array(
    'posts_per_page' => 5,
    'paged' => ( get_query_var('paged') ? get_query_var('paged') : 1),
);

query_posts($args); //Shows a 404 page when visiting last page 
```

...尝试这个：

```
$args = array(
    'posts_per_page' => 5,
    'paged' => ( get_query_var('paged') ? get_query_var('paged') : 1),
);

global $wp_query;
$merged_args = array_merge( $wp_query->query, $args );
query_posts( $merged_args ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T00:53:35.130

我意识到你可能已经解决了这个问题。对问题的简短回答：**永远不要使用 query_posts**。以下是您不应该使用它的详细信息：http: [//developer.wordpress.com/2012/05/14/querying-posts-without-query_posts/](http://developer.wordpress.com/2012/05/14/querying-posts-without-query_posts/)

**pre_get_posts**钩子似乎适合这个

```
function my_pre_posts( $query = false ) {

// Bail if not home, not a query, not main query
if ( ! is_home() || ! is_a( $query, 'WP_Query' ) || ! $query->is_main_query()  )
    return;

// Exclude featured posts from the main query
$query->set( 'posts_per_page', 5 );

// Note the we aren't returning anything.
// 'pre_get_posts' is a byref action; we're modifying the query directly.
}
add_action( 'pre_get_posts', 'my_pre_posts' ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T11:21:16.830

您没有`while(have_posts()):`在自定义主题中使用。

在 20 中，你使用`get_template_part( 'loop', 'archive' );`
但是 20 没有`loop-archive.php`，它会调用`loop.php`。
应该不是问题。

修复自定义主题中[的循环](http://codex.wordpress.org/The_Loop)，然后再次检查。

您在哪个页面上有此代码？存档.php？
**编辑**

```
<div id="pagination">
     <div id="pagination-previous" class="button"><?php previous_posts_link('previous'); ?></div>
     <div id="pagination-next" class="button"><?php next_posts_link('next'); ?></div>
</div> 
```*

# javascript - 如果变量匹配另一个变量

> ID：10202426
> 
> 赞同：1
> 
> 时间：2012-04-18T03:36:51.043
> 
> 标签：javascript, jquery

```
var test = "Example";
var another = "Example";

<div id="whatever">
 Blah
</div> 
```

`$('#whatever').hide()`如果`test`不`another`匹配，我该如何申请`$('#whatever').css('color','red')`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T03:39:29.863

简单的：

```
<script type="text/javascript">
    if(test === another){
       $('#whatever').hide();
    }else{
       $('#whatever').css('color','red');
    }
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T03:39:14.940

使用[if 语句](https://developer.mozilla.org/en/JavaScript/Reference/Statements/if...else)：

```
if(test == another)
    $('#whatever').hide();
else
    $('#whatever').css('color','red'); 
```

# mysql - 选择今天日期在两个 DATE 列之间的 MySQL 行

> ID：10202427
> 
> 赞同：17
> 
> 时间：2012-04-18T03:36:58.290
> 
> 标签：mysql, select

如何获取表中今天日期介于（包括）该行的两个 DATE 列之间的行？例如，取一个表的这两列：

![在此处输入图像描述](../Images/8298bf75578564b572e13372cef5dd67.png)

我怎么能在 4 月 10 日获得第一排和第二排，或者在 25 日获得第三排（包括在内，就像我说的那样）？

任何帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-18T03:46:43.003

您可以按如下方式添加条件

```
DATE(NOW()) between date1 and date2 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-04-18T03:51:37.783

你会发现很多人使用 between 运算符，但我更喜欢使用简单的 AND 运算符。

我这样做是因为尽管运算符 IS 包含在内，但简单日期 (2012-04-10) 可以算作午夜，因此不包含在内。

因此，这应该可以正常工作，并且始终包括日期范围的边界：

```
SELECT * FROM table WHERE from_date <= '2012-04-10' AND to_date >= '2012-04-10' 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-18T03:39:53.753

只需使用 SQL now() 函数来比较日期列，如下所示：

```
SELECT * from table where now() >= from_date and now() <= to_date 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-09T08:38:53.607

如果您有日期（不是日期时间）列，请使用 CURTIME() 或 DATE(NOW())，不要使用 CesarC 正确写的 NOW()，您可以使用 BETWEEN。

`SELECT * FROM table WHERE CURTIME() BETWEEN from_date AND to_date`

# php - MySQL不会插入变量

> ID：10202428
> 
> 赞同：-2
> 
> 时间：2012-04-18T03:37:34.547
> 
> 标签：php, mysql

我正在尝试编写一个 MySQL 语句来向表中插入信息：

```
 $insert = "INSERT INTO `vle`.`files`
               (`id`, `time`, `fileLocation`, `title`, `user`)

               VALUES (
                   NULL,
                   UNIX_TIMESTAMP(),

                   '".mysql_real_escape_string($putFile)."',
                   '".mysql_real_escape_string($_POST['title'])."',
                   '".$user."'
               )"; 
```

一切都正确插入，除了回显`$user`但没有插入的变量，对于`$putFile`. 这个 MySQL 语句中有什么我做错了吗？

谢谢

完整代码在这里

```
 <?php require_once('Connections/localhost.php');
    include('pageCheck.php');
    include('adminCheck.php');

    function saveFile(){
        global $_FILES, $_POST;

        $insert = "INSERT INTO `vle`.`files` 
(`id`, `time`, `fileLocation`, `title`, `user`) 
VALUES (NULL, UNIX_TIMESTAMP(), '".mysql_real_escape_string($putFile)."', '".mysql_real_escape_string($_POST['title'])."', '".$user."')";

        mysql_query($insert);

        var_dump($insert);
    }

    $putFile = "files/".basename($_FILES['uploadedFile']['name']);

    if(move_uploaded_file($_FILES['uploadedFile']['tmp_name'], $putFile)){
        saveFile();
        echo"File has been uploaded, Redirecting to file list now...";
        //echo"<meta http-equiv='refresh' content='3;url=dashboard.php'>";

        }else{

        echo"Unable to upload file, Returning to dashboard...";
        //echo"<meta http-equiv='refresh' content='3;url=dashboard.php'>";  

        }

     ?> 
```

$user 我们在 pageCheck.php 中定义

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T03:55:40.427

您的问题是范围界定问题。在您的`saveFile()`职能范围内，`$user`并且`$putFile`不在范围内。

见[http://php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

您应该考虑将它们作为参数传递，例如

```
function saveFile($user, $file, $title) {
    // etc
}

saveFile($user, $putFile, $_POST['title']); 
```

# matlab - 将图像转换为单元格

> ID：10202430
> 
> 赞同：-2
> 
> 时间：2012-04-18T03:37:52.703
> 
> 标签：matlab

如何将图像转换为单元格？在 mat2cell 的转换中运行此错误时出现错误：

```
close all;
I=imread('D:\prj2.jpg');
Imshow(I);
C=mat2cell(I,[130 97],[130 97]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:55:07.020

从文档中`mat2cell`：

```
 mat2cell Break matrix up into a cell array of matrices.
    C = mat2cell(X,M,N) breaks up the 2-D array X into a cell array... 
```

这就是您当前使用函数 mat2cell 的方式。但是，从您的错误消息看来，您的矩阵`I`不是二维矩阵。如果你`ndims(I)`在命令行中输入，你可以看到你的数组有多少维。

从您的错误消息中，您可以看到您`I`有 3 个维度（图像的第三个维度适用于每个颜色通道）。因此，您必须以`mat2cell`不同的方式使用。键入`help mat2cell`命令提示符，并阅读有关使用`mat2cell`多维数组的信息。

或者，您可以先从图像中分别提取每个颜色通道，然后`mat2cell`分别在每个颜色通道上运行：

```
red_channel = I(:, :, 1);
green_channel = I(:, :, 2);
blue_channel = I(:, :, 3); 
```

# php - 与 sql IN() 语句相反

> ID：10202432
> 
> 赞同：0
> 
> 时间：2012-04-18T03:38:04.717
> 
> 标签：php, sql

IN() sql 语句的反义词是什么。我将如何构建以下语句以提取除 2,5 和 6 之外的所有记录。“！” 在 IN 不起作用之前。

```
$sql = "SELECT * FROM table WHERE column IN('2','5','6')"; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T03:39:02.133

```
$sql = "SELECT * FROM table WHERE column NOT IN('2','5','6')"; 
```

**编辑 ：**

正如评论中的“onedaywhen”和“ypercube”所指出的，

对于**Null Allowed**列，您可能需要添加

```
OR column IS NOT NULL 
```

或者

```
OR column IS NULL 
```

# java - 在 Action Listener 的 for 循环中让用户输入 JTextField

> ID：10202435
> 
> 赞同：1
> 
> 时间：2012-04-18T03:38:26.980
> 
> 标签：java, swing, for-loop, applet, actionlistener

我对 Java 很陌生。我希望用户能够通过单击提交分别输入 4 个不同的输入。我正在使用 for 循环进行计数，但我不知道如何让用户多次输入他们的答案。for 循环只是一次重复。我正在使用数组来保存用户的答案。这是我的代码的一部分。如果您有任何疑问或需要更多解释，我会明确表示。解释更多

```
private void Question1()
{
    int count = 1;
            QuestionsPanel.add(new JLabel(Q1.getQuestion()));
    QuestionsPanel.add(new JLabel(Arrays.toString(mans1)));

    AnswerField = new JTextField(10);
    AnswerPanel.add(AnswerField);

    Submit = new JButton("Submit");
    AnswerPanel.add(Submit);
    Submit.addActionListener(this);

}

public void actionPerformed(ActionEvent e)
{
    if ((e.getSource() == Submit) && count == 0)

    {
        int value = Integer.parseInt(AnswerField.getText());

        for (int i = 0; i < 4; i++)
        {

            if (value == -1) break;
            ans[i] = value - 1;
            AnswerField.setText("");

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T03:45:13.487

这不起作用，因为您将循环放置在 中`ActionListener`，单击按钮时执行一次。

您应该做的是在某处保留当前答案的计数器

```
int count = 0;

public void actionPerformed(ActionEvent e) {
  if ((e.getSource() == Submit) && count < 4) {
    int value = Integer.parseInt(AnswerField.getText());

    if (value == -1) break;
    ans[count++] = value - 1;
    AnswerField.setText("")
  }
} 
```

以这种方式，循环由 actionlistener 隐式管理：每次按下提交计数都会增加 1，并且正确的答案放在数组中。当然，您应该在提交第四个答案时做一些事情，例如禁用提交按钮。

# php - 下载时 Chrome 无法识别 url 编码的文件名

> ID：10202437
> 
> 赞同：6
> 
> 时间：2012-04-18T03:38:46.603
> 
> 标签：php, google-chrome, download

我尝试从我的网站下载文件名为 GB2312%D5%D5%C6%AC.JPG 的文件，在 IE9/Firefox 中一切正常，但在 Google Chrome 中却不行。

在 Google Chrome 中，此文件名被我的下载页面名称替换（可能 Chrome 无法解码文件名）。

为了确定 Chrome 是否正在尝试解码文件名，我尝试使用另一个字符串 GB2312%2C%2D%2E.txt 作为文件名，firefox/IE9 仍然按预期工作，但谷歌浏览器会尝试解码这个文件名（替换 % 2D 带“-”）。

如何防止谷歌浏览器解码文件名？如果我能在我的服务器端解决这个问题（PHP）就更好了

以下几行是我的服务器生成的响应标头。

```
**Response Headers:**
Cache-Control:must-revalidate, post-check=0, pre-check=0, private
Connection:keep-alive
Content-Description:File Transfer
Content-Disposition:attachment; filename="GB2312%D5%D5%C6%AC.JPG"
Content-Length:121969
Content-Transfer-Encoding:binary
Content-Type:application/force-download; charset=UTF-8
Date:Wed, 18 Apr 2012 03:32:30 GMT
Expires:0
Pragma:public
Server:nginx/1.1.5
X-Powered-By:PHP/5.3.8 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T18:24:46.487

我刚刚遇到了这个问题。[这个问题](https://stackoverflow.com/questions/93551/how-to-encode-the-filename-parameter-of-content-disposition-header-in-http)很有帮助。

正如您所指出的，原因是 Chrome 正在尝试对其进行解码，并且它在 ASCII 之外。我个人称其为错误。

基本上让它在 Chrome 中工作的答案是使用这个：

```
Content-Disposition:attachment; filename*=UTF-8''GB2312%D5%D5%C6%AC.JPG 
```

但是，这将在 IE8 和 Safari 中破坏它。啊! 所以要让它在这些方面也能正常工作，试着像[这个例子](http://greenbytes.de/tech/tc2231/#attfnboth)那样做。

```
Content-Disposition:attachment; filename="GB2312%D5%D5%C6%AC.JPG"; filename*=UTF-8''GB2312%D5%D5%C6%AC.JPG 
```

对我来说，我必须先对文件名进行 url 编码，然后再将其放入 filename*=UTF-8 部分。所以我对第一个文件名和第二个文件名的值不一样。我使用了 PHP，我的代码如下所示：

```
$encodedfilename = urlencode($downloadfilename);
header("Content-Disposition: attachment; filename=\"$downloadfilename\"; filename*=UTF-8''$encodedfilename"); 
```

所以我实际上并没有像你要求的那样阻止它编码，而是我对其进行编码，然后将由 Chrome 解码的参数传递回它应该是的。

# html - UL 清单编号

> ID：10202445
> 
> 赞同：1
> 
> 时间：2012-04-18T03:39:51.463
> 
> 标签：html

我有一个相当长的点列表（使用条款文件），我需要编号为：a、b、c...aa、bb、cc、dd 等

目前：a,b,c...,aa,ab,ac,ad 等。

有谁知道如何实现这一目标？

```
<ul>
    <li>Item 1<li>
    <li>Item 2<li>
    <li>Item 3<li>
    ... down to 26
    <li>Item 27<li>
    <li>Item 28<li>
</ul> 
```

这产生

```
a. Item 1
b. Item 2
c. Item 3
... down to z.
aa. Item 27
ab. Item 28 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T03:55:56.993

尽管 w3schools.com 在许多人中声名狼藉，但它确实可以作为“OK”参考点。

所以，这里有一个指向他们的列表样式类型属性页面的链接。

[http://www.w3schools.com/cssref/pr_list-style-type.asp](http://www.w3schools.com/cssref/pr_list-style-type.asp)

您可以使用 22 种不同的选项（包括“lower-alpha”）。下面是一个使用双字母列表（aa，ab，ac）的例子，就像你的例子一样（这对你没有帮助）。

所以，真的没有办法复制你正在寻找的东西，除非你用你想要的格式（aa、bb、cc 等）制作了一个 CSS 精灵并使用了背景定位（以及附加一个 css 类到每个列表项）以显示您的字母。

希望这是有道理的...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T03:48:55.543

实际渲染取决于浏览器（[规范](http://www.w3.org/TR/html401/struct/lists.html)没有指定单个字母之后的确切编号）。由于您无法从 HTML 自定义浏览器，因此您想要的是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T04:23:57.540

当前的 CSS 规范和实现似乎没有用于此的工具，即使在 CSS3 列表和计数器模块中（这仍然是一个草案并且很大程度上未实现）。

另一方面，您在评论中写道：“法律文件有这样的顺序，客户需要按照文档保持顺序。” 如果是这种情况，由于通常的[CSS 警告](http://www.cs.tut.fi/~jkorpela/css-caveats.html)，即使 CSS 有生成此类标记的工具，您也不应该依赖 CSS。任何*必须*出现在文档中的内容都应该包含在*内容*中，而不是样式中。

这意味着您将有，例如，“a.”、“b.”、...、“z.”、“aa.”、“bb.”。在每个列表项开头的内容中。如果此编号可能需要单独设置样式，请包装在文本级容器中，例如

```
<ul class=mi>
  <li><span class=marker>a.</span> item </li>
… 
```

然后你会有`ul.mi { list-style-stype: none; }`. 使用`ul`而不是`ol`在这里的原因是，当 CSS 关闭时，您更希望在嵌入标记之前看到项目符号而不是数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-04T15:59:09.273

我需要实现相同的编号系统（aa、bb、cc），所以我使用值属性：

```
<ol type="a">
 <li value="27">...</li>
 <li value="54">...</li>
 <li value="81">...</li> 
```

有关工作示例，请参见此处：[http ://www.lexexakt.de/index.php/glossar?title=bgb0309.php](http://www.lexexakt.de/index.php/glossar?title=bgb0309.php)

信息[at]lexexakt.de

# java - Ant 覆盖自定义清单文件

> ID：10202447
> 
> 赞同：7
> 
> 时间：2012-04-18T03:40:02.237
> 
> 标签：java, eclipse, ant

我正在使用 Ant 创建一个 jar，它也使用自定义清单文件。build.xml 文件可以正确构建所有内容。但是，当我检查 jar 中的清单文件时，我的属性不存在。看起来它正在被 Ant 构建的默认 MANIFEST.MF 文件替换。我的构建文件如下：

```
<?xml version="1.0" ?> 
```

```
<property name="src" location="src" />
<property name="build" location="build" />
<property name="dist" location="dist" />

<target name="clean">
    <delete dir="${build}" />
    <delete dir="${dist}" />
</target>

<target name="main" depends="compile, dist, build">
    <echo>
        Building the .jar file.
    </echo>
</target>

<target name="build">
    <mkdir dir="${build}" />
    <mkdir dir="${build}/META-INF" />
</target>

<target name="compile" depends="build">
    <javac srcdir="${src}" destdir="${build}"/>
</target>

<target name="dist" depends="compile">
    <mkdir dir="${dist}/lib" />
    <manifest file="${build}/META-INF/MANIFEST.MF">
        <attribute name="Class-Path" value="MyGame.jar" />
        <attribute name="Main-Class" value="game.Game"/>    
    </manifest>

    <jar jarfile="${dist}/lib/MyGame.jar" basedir="${build}" />

</target> 
```

我必须更改哪些内容才能指定自定义清单而不是默认的 Ant MANIFEST.MF 文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T04:12:16.157

我相信 jar ant 任务有一个 manifest 属性，您可以在其中指定要使用的实际文件。在这种情况下，您将引用使用清单任务创建的文件

[http://ant.apache.org/manual/Tasks/jar.html](http://ant.apache.org/manual/Tasks/jar.html)

```
<target name="dist" depends="compile">

    <mkdir dir="${dist}/lib" />

    <manifest file="${build}/META-INF/MANIFEST.MF">
        <attribute name="Class-Path" value="MyGame.jar" />
        <attribute name="Main-Class" value="game.Game"/>  
    </manifest>

    <jar manifest="${build}/META-INF/MANIFEST.MF" jarfile="${dist}/lib/MyGame.jar" basedir="${build}" />

</target> 
```

# mysql - mysql 与 joomla 的联合

> ID：10202448
> 
> 赞同：2
> 
> 时间：2012-04-18T03:40:17.900
> 
> 标签：mysql, joomla, unions

如何使用 joomla 2.5 执行 mysql UNIONS：

> ```
>  $query = parent::getListQuery();
>   $query
>         ->select('*')
>         ->from('#__game_types')
>         ->where('published = 1')
>         ->order('price ASC')
>         ->union('ALL')
>        ->select('*')
>        ->from('#__dates') 
> ```

我知道联合不是一种方法，但我只是想展示我想做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:25:04.523

据我所知，它也不在[**Joomla 文档**](http://docs.joomla.org/Accessing_the_database_using_JDatabase)中。所以你可以做的是以其他方式执行查询，如下例所示。

```
$query = "
  SELECT *
    FROM . . . ";
$db->setQuery($query);
$row = $db->loadObjectList(); 
```

# java - 如何使用 LEFT OUTER JOIN 创建 JPA 查询

> ID：10202456
> 
> 赞同：32
> 
> 时间：2012-04-18T03:40:58.670
> 
> 标签：java, jpa, jpql

我开始学习 JPA，并基于我在 SQL Server 中测试的以下本机 SQL 实现了一个带有 JPA 查询的示例：

```
SELECT f.StudentID, f.Name, f.Age, f.Class1, f.Class2 
FROM Student f 
    LEFT OUTER JOIN ClassTbl s ON s.ClassID = f.Class1 OR s.ClassID = f.Class2
WHERE s.ClassName = 'abc' 
```

从上面的 SQL 我构造了以下 JPQL 查询：

```
SELECT f FROM Student f LEFT JOIN f.Class1 s; 
```

如您所见，我仍然缺少`OR s.ClassID = f.Class2`原始查询中的条件。我的问题是，我怎样才能把它放到我的 JPQL 中？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-18T04:45:17.403

写这个；

```
 SELECT f from Student f LEFT JOIN f.classTbls s WHERE s.ClassName = 'abc' 
```

因为您的 Student 实体与 ClassTbl 实体具有一对多关系。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-21T14:35:06.657

如果您有实体 A 和 B，它们之间没有任何关系，并且每个 A 严格来说有 0 或 1 B，您可以这样做：

```
select a, (select b from B b where b.joinProperty = a.joinProperty) from A a 
```

这将为您提供单个结果的 Object[]{a,b} 或多个结果的 List<Object[]{a,b}> 。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-18T13:48:59.723

通常 ON 子句来自映射的连接列，但 JPA 2.1 草案允许在新的 ON 子句中添加附加条件。

看，

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#ON](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#ON)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-16T17:40:57.117

请参见 ：

```
public interface YourDBRepository extends JpaRepository<Employee, Long> {

@Query("select new com.mypackage.myDTO(dep.empCode, dep.empName, em.EmployeeCode, em.EmployeeName) \n" +
        "from Department dep\n" +
        "left join  Employee em\n" +
        "on dep.DepartmentCode = em.DepartmentCode")  // this is JPQL so use classnames
List<myDTO> getDeptEmployeeList(); 
```

}

您还可以使用 CrudRepository 并在 PK 表类中包含带有 FK 表类的 @JoinColumn 并具有 List 返回列表，然后执行查找操作以实现相同的目的。

在部门实体类中：

```
 @OneToMany
@Fetch(FetchMode.JOIN)
@JoinColumn(name="DEPT_CODE")
private List<Employee> employees; 
```

CriteriaBuilder 是另一种选择。

# python - urllib2 在 https 网站上失败

> ID：10202457
> 
> 赞同：1
> 
> 时间：2012-04-18T03:41:04.770
> 
> 标签：python, urllib2

使用 urllib2 并尝试获取 https 页面，它一直失败

```
Invalid url, unable to resolve 
```

网址是 [https://www.domainsbyproxy.com/default.aspx](https://www.domainsbyproxy.com/default.aspx) 但我在多个 https 站点上发生了这种情况。

我使用的是 python 2.7，下面是我用来设置连接的代码

```
opener = urllib2.OpenerDirector()
opener.add_handler(urllib2.HTTPHandler())
opener.add_handler(urllib2.HTTPDefaultErrorHandler())
opener.addheaders = [('Accept-encoding', 'gzip')]
fetch_timeout = 12
response = opener.open(url, None, fetch_timeout) 
```

我手动设置处理程序的原因是因为我不想处理重定向（效果很好）。以上适用于 http 请求，但是 https - 失败。

有什么线索吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T03:46:24.927

您应该使用 HTTPSHandler 而不是 HTTPHandler

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T04:31:21.377

如果您不介意外部库，请考虑优秀的[`requests`](http://docs.python-requests.org/en/latest/index.html)模块。它使用 urllib 处理这些怪癖。

你的代码，使用[`requests`](http://docs.python-requests.org/en/latest/index.html)的是：

```
import requests
r = requests.get(url, headers={'Accept-encoding': 'gzip'}, timeout=12) 
```

# libvlc - 使用 sdp 会话播放流？

> ID：10202464
> 
> 赞同：3
> 
> 时间：2012-04-18T03:41:41.803
> 
> 标签：libvlc, sdp

我有一个 sdp 会话结构，其中包含所有相关信息，如音频端口、视频端口等。现在，如何使用这个 sdp 会话结构来使用 libvlc 库播放媒体？

请帮忙。提前致谢。

# javascript - HTML / JS 简化

> ID：10202465
> 
> 赞同：-1
> 
> 时间：2012-04-18T03:41:50.267
> 
> 标签：javascript, html

我在为客户制作下拉菜单时度过了一段地狱般的时光。我认为我的代码太复杂了。我需要一种解决方案/替代方法来执行给定的目标。

```
<font id="l1b" size="4" color="black" style="cursor:pointer; color:black;"
    onclick="showSubMenu('cat2');
    document.getElementById('cat1').style.display = 'none';
    document.getElementById('cat3').style.display = 'none';
    document.getElementById('cat4').style.display = 'none';
    document.getElementById('pa1').style.display = 'none';
    document.getElementById('pb1').style.display = 'none';
    document.getElementById('pc1').style.display = 'none';
    document.getElementById('pd1').style.display = 'none';
    document.getElementById('pa2').style.display = 'none';
    document.getElementById('pb2').style.display = 'none';
    document.getElementById('pc2').style.display = 'none';
    document.getElementById('pd2').style.display = 'none';
    document.getElementById('da2a').style.display = 'none';
    document.getElementById('da2b').style.display = 'none';
    document.getElementById('da2c').style.display = 'none';
    document.getElementById('da2d').style.display = 'none';
    document.getElementById('da2e').style.display = 'none';
    document.getElementById('da2f').style.display = 'none';
    document.getElementById('da2g').style.display = 'none';
    document.getElementById('da2h').style.display = 'none';">Tea Bags<img src="arrow.png" style="position:relative; left:8px; top:3px;"></font> 
```

这是这个概念的图片：[http ://robstest.mydnd.com/helppic.php](http://robstest.mydnd.com/helppic.php)

第一个帮助的人获得 10 分！:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T03:58:46.367

为了说明使用[jQuery](http://www.jquery.com)等库让您的生活更轻松的好处：

**纯 JavaScript**

```
var elementList = ['cat1', 'cat2', 'cat3', 'cat4', 'pa1', ... , 'da2h'];
function showSubMenu(el) {
    for (var i = 0; i < elementList.length; i++) {
        if (elementList[i] != el) {
            document.getElementById(elementList[i]).style.display = 'none';
        }
    }
} 
```

**jQuery**

```
var elementList = ['cat1', 'cat2', 'cat3', 'cat4', 'pa1', ... , 'da2h'];
function showSubMenu(el) {
    $.each(elementList, function() {
        if (this != el) {
            $('#' + this).css({display: "none"});
        }
    }
} 
```

本教程也可能会有所帮助：[http ://www.html-5-tutorial.com/](http://www.html-5-tutorial.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T04:03:37.877

这是一个 JQuery 下拉教程的链接，该教程的功能类似于您想要的：

[http://css-tricks.com/simple-jquery-dropdowns/](http://css-tricks.com/simple-jquery-dropdowns/)

...您还可以下载文件并根据需要进行修改。

这将是一个很好的练习，让您在制作项目时可以玩耍和学习。

（另外，您可能希望查看下拉列表的其他一些实现，以了解最佳实践——您模拟的 UI 对于最终用户来说看起来有点混乱）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T03:52:08.023

获取子元素并循环遍历它们，为每个元素设置显示。将其填充到诸如 yourfunction(parentDiv) 之类的函数中，并在分号后应用于单击事件。

我会输入这段代码，但现在我没有足够的材料来处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T04:01:45.907

使用 jQuery 来做这样的事情：

```
$(function() {
    $("#l1b").children().each(function() {
        $(this).hide();
    });
}); 
```

# java - 正则表达式模式匹配不能递归工作

> ID：10202468
> 
> 赞同：0
> 
> 时间：2012-04-18T03:42:31.977
> 
> 标签：java, regex

我想在表单中实现模式匹配

(a+b)(c-or*or/d)....... 任意次数。

我使用以下模式，但它不能递归工作。它只是阅读第一组。

```
Pattern pattern;
String regex="(([0-9]*)([+,-,/,*])([0-9]*)*)";
pattern=Pattern.compile(regex);
Matcher match = pattern.matcher(userInput); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T04:13:53.473

您将需要这样的表达式

```
[0-9]+-[0-9]+[\/*-+][0-9]+[\/*-+][0-9]+[\/*-+][0-9]+[\/*-+][0-9]+ 
```

你必须匹配整个表达式。您无法匹配表达式的一部分并进行第二次搜索，因为该模式重复。

注意：在 ruby​​ 中 \ 是 / 字符的 excape 序列，因此您可以在 C# 中省略它或将其替换为另一个字符。

[演示](http://rubular.com/r/YnF020sy4B)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:35:07.510

**图案**

```
<!--
\((\d|[\+\-\/\\\*\^%!]+|(or|and) *)+\)

Options: ^ and $ match at line breaks

Match the character “(” literally «\(»
Match the regular expression below and capture its match into backreference number 1 «(\d|[\+\-\/\\\*\^%!]+|(or|and) *)+»
   Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
   Note: You repeated the capturing group itself.  The group will capture only the last iteration.  Put a capturing group around the repeated group to capture all iterations. «+»
   Match either the regular expression below (attempting the next alternative only if this one fails) «\d»
      Match a single digit 0..9 «\d»
   Or match regular expression number 2 below (attempting the next alternative only if this one fails) «[\+\-\/\\\*\^%!]+»
      Match a single character present in the list below «[\+\-\/\\\*\^%!]+»
         Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
         A + character «\+»
         A - character «\-»
         A / character «\/»
         A \ character «\\»
         A * character «\*»
         A ^ character «\^»
         One of the characters “%!” «%!»
   Or match regular expression number 3 below (the entire group fails if this one fails to match) «(or|and) *»
      Match the regular expression below and capture its match into backreference number 2 «(or|and)»
         Match either the regular expression below (attempting the next alternative only if this one fails) «or»
            Match the characters “or” literally «or»
         Or match regular expression number 2 below (the entire group fails if this one fails to match) «and»
            Match the characters “and” literally «and»
      Match the character “ ” literally « *»
         Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
Match the character “)” literally «\)»
--> 
```

* * *

**计算算法**
要解析和处理输入字符串，您必须使用堆栈。访问[这里](http://en.wikipedia.org/wiki/Stack_%28data_structure%29?)了解这个概念。

问候
西里安

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T05:58:15.563

您需要匹配这种序列的正则表达式是这样的：

```
\s*-?\d+(?:\s*[-+/*]\s*-?\d+)+\s*
```

让我们把它分解成它的组成部分！

```
\s*            # Optional space
-?             # Optional minus sign
\d+            # Mandatory digits
(?:            # Start sub-regex
   \s*         #    Optional space
   [-+*/]      #    Mandatory single arithmetic operator
   \s*         #    Optional space
   -?          #    Optional minus sign
   \d+         #    Mandatory digits
)+             # End sub-regex: want one or more matches of it
\s*            # Optional space 
```

（如果您不想匹配空格，请删除所有这些`\s*`，并注意这会让用户大吃一惊。）

现在，当在 Java 中将上述内容编码为 String 文字时（编译之前），您需要小心转义其中的每个`\`字符：

```
String regex="\\s*-?\\d+(?:\\s*[-+/*]\\s*-?\\d+)+\\s*"; 
```

要注意的另一件事是，这*不会*将正则表达式拆分为 Java 解析和构建表达式评估树的部分；它只是（与您的其余代码一起）与整个字符串匹配或不匹配。（即使放入捕获括号也无济于事；当放入某种形式的重复中时，它们只会报告匹配的字符串中的第一个位置。）正确执行此操作的最简单方法是使用解析器生成器，例如Antlr（它还可以让您执行带括号的子表达式、管理运算符优先级等操作）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-18T05:12:55.020

您的表情不会转义特殊字符，例如 +,(,)

尝试这个

```
/\(\d+[\+|-|\/|\*]\d+)\G?/ 
```

\G 又是整个模式

? 表示前面的事情是可选的

我将您的 [0-9]* 更改为 \d+ 我认为更正确

我把你的 , 改成了 |

# java - 以下循环对于不变量是否正确？

> ID：10202469
> 
> 赞同：-2
> 
> 时间：2012-04-18T03:42:49.410
> 
> 标签：java, loops

> **可能重复：**
> [我将如何为这个不变量编写一个循环？](https://stackoverflow.com/questions/10202004/how-would-i-write-a-loop-for-this-invariant)

以下 for 循环对于不变量是否正确？不变量：b[x] 是 b[h...s-1] 的最小值

```
 int x = h;      int h = s-1;

    // {inv: b[x] is the minimum of b[h...s-1]}
    while (s-1 != k) {
       s = s-1;
       if (b [s-1] < b[x])
          { x = s-1;}
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T04:14:55.840

如果你想找到一个数组的最小值，你可以这样做。

```
int b[] = {1,3,2,5,2,3};

//min needs to have a starting value so b[0] works fine.
int min = b[0];

//This loops over the remaining elements in the array. If it finds a value smaller than the current minimum, it reassigns min to that value.
for(int i = 1; i < b.length; i++)
{
     if(b[i] < min)
          min = b[i];
}

//If you haven't covered for loops yet, here is how you can do it with a while.
int i = 1;
while(i < b.length)
{
     if(b[i] < min)
          min = b[i];
     i++;
}

//b.length is just a way of getting the length of an array. 
```

# javascript - 在android中向JavascriptInterface添加两个不同的类对象

> ID：10202472
> 
> 赞同：1
> 
> 时间：2012-04-18T03:43:01.347
> 
> 标签：javascript, android, html, webview

我想确认 ios 是否可以向 android 的 addJavascriptInterface() 添加 2 个不同的类/接口对象。像这样 ：

```
 keyBoard = new KeyBoard(mWebView,context);  
 mWebView.addJavascriptInterface(keyBoard,"keyBoard");  

 mWebView.addJavascriptInterface(jsInterface, "external");  
 mWebView.loadUrl(url);  .... 
```

像这样的东西？？

谢谢斯内哈
_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T04:20:05.373

是的，可以将多个对象绑定到 Javascript，以便可以从 JavaScript 访问这些方法。

[添加Javascript接口](http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29)

# iphone - NSURLConnection 挂起

> ID：10202474
> 
> 赞同：1
> 
> 时间：2012-04-18T03:43:54.487
> 
> 标签：iphone, objective-c, ios, ios5

我有一个 iOS 5 应用程序，它使用 NSURLConnection 通过 GET 加载一些 XML。在极少数情况下，连接似乎会陷入反复超时的情况。

一个示例请求：

```
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:url]];
/*
The request is set with a timeout interval of 10 because (due to the nature of 
the app and the XML feed) this data is reloaded every 15 seconds.
*/
[request setTimeoutInterval:10];
[request setCachePolicy:NSURLRequestReloadIgnoringCacheData];
[request setHTTPMethod:@"GET"];
self.afOperation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
self.afOperation.successCallbackQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND,0);
self.afOperation.failureCallbackQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND,0);
//snip success/completion block code
[self.afOperation start]; 
```

到目前为止，当请求开始挂起时，我已经看到了三种“恢复”场景。

*   退出整个应用程序
*   将设备插入计算机（是的，真的）。在 iPhone/iPad 确认连接后，它将立即停止超时。
*   离开应用程序，然后去做其他事情。快速离开和重新进入应用程序通常不足以导致恢复。

正如你可能想象的那样，我觉得这非常奇怪。此时我已经用 AFNetworking 替换了我自己的 NSURLConnectionDelegate 实现（如上所示），并且仍然遇到同样的问题。我已经为每个 NSURLConnectionDelegate 协议选择器添加了日志记录，发现唯一调用的选择器（在调用之后`start`）是`connection:didFailWithError:`. 我确保我没有堆积多个请求（之前的请求总是被取消并且在开始新的请求之前被取消）。此外，我已验证实际上没有通过路由器上的 tcpdump 发送请求。什么可能导致这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T03:34:47.037

原来这个问题是由TestFlight SDK v1.0及以下版本引起的。请参阅[为什么 NSURLConnection 无法到达后端？](https://stackoverflow.com/questions/10149811/why-does-nsurlconnection-fail-to-reach-the-backend)

在他们发布修复程序之前，除了完全剥离 SDK 之外，没有办法解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T03:24:00.710

安装 testflight sdk 后我开始看到错误，删除它帮助我摆脱了它。但是，我认为这是由 Testflight 和 ASIHttpRequest （或您使用的任何其他工具包）之间的交互引起的。它也可以通过以下链接中的解决方案来解决（在构建阶段禁用 ASIHttpRequest 和 ASIFormDataRequest 文件的编译器优化）

[https://groups.google.com/forum/?fromgroups#!topic/asihttprequest/fw7PDcD2wKI%5B1-25%5D](https://groups.google.com/forum/?fromgroups#!topic/asihttprequest/fw7PDcD2wKI%5B1-25%5D)

# c# - C# 字符串测量

> ID：10202476
> 
> 赞同：2
> 
> 时间：2012-04-18T03:44:33.667
> 
> 标签：c#, winforms, string, units-of-measurement

我想将字符串的长度测量为像素单位。我在网上搜索了 2 天，但没有运气。最后，我在几分钟前从博客中找到了一些代码片段，并对其进行了一些修改。这是我的功能：

```
private void cmdMeasure_Click(object sender, EventArgs e)
{
    Font fntStyle = new Font("Arial", 16, FontStyle.Regular, GraphicsUnit.Pixel);
    Size textSize = TextRenderer.MeasureText(str2measure.Text, fntStyle);
    MessageBox.Show(textSize.ToString());
} 
```

问题：

16的单位是什么？是em、pt还是GraphicsUnit枚举的单位？我并没有真正得到 c# 定义的描述“以 unit 参数指定的单位的新字体的 em-size”。

TextRenderer.MeasureText 方法是否在其测量中包含字符之间的空格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T03:56:40.737

> 16的单位是什么？是em、pt还是GraphicsUnit枚举的单位？我并没有真正得到 c# 定义的描述“以 unit 参数指定的单位的新字体的 em-size”。

正如其他人所说，它是像素，因为您传递了 GraphicsUnit.Pixel。

> TextRenderer.MeasureText 方法是否在其测量中包含字符之间的空格？

是的。它为您提供围绕整个文本块的边界框的尺寸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T04:00:30.783

`TextRenderer.MeasureString`确实考虑了空格。在您的示例中，数字 16 以像素为单位。

虽然，我不确定您是否正确测量了您的字符串。我认为您需要从`str2measure`文本框中获取字体：

```
Size textSize = TextRenderer.MeasureText(str2measure.Text, str2measure.Font); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T04:28:25.203

回答 Q1。仅当您传递 GraphicsUnit.Pixel 时它是像素

回答 Q2。它正在考虑整个文本块，无论内容是什么，甚至是空格。

# java - 如何显示 LinkedBinaryTree

> ID：10202477
> 
> 赞同：0
> 
> 时间：2012-04-18T03:44:36.723
> 
> 标签：java, linked-list, binary-tree, tostring, treenode

我需要了解显示linkedBinaryTree 的最佳方式。没错，驱动程序将整数作为元素传递给树的每个节点，对于 toString，我尝试了以下代码片段，但它返回的只是 javafoundations.ArrayIterator@ca0b6。

```
public String toString() { 

  String thing = "BinaryTreeNode: ";
      if (root.getLeft() != null ) {
      thing += root.getLeft().toString()+" ";
      } 
      if (root.getRight() != null) {
      thing += root.getRight().toString();
      }
      thing += "}";
      return thing; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T03:49:11.130

您只需要覆盖该方法

```
public String toString() 
```

在您正在使用的节点类中。这样做会将无用的表示替换为更有意义的表示。

当然，您需要了解树中哪个是您的数据对象（我不知道一个节点是否是一个值，如果它包含一个值），以便您能够调用正确的`toString`方法。

在任何情况下，您都不需要在使用字符串连接运算符时显式调用它，例如`"" + root.getLeft()`

# r - 按变量中的共享值聚合行

> ID：10202480
> 
> 赞同：2
> 
> 时间：2012-04-18T03:45:33.493
> 
> 标签：r, aggregate, plyr

我有一个有点愚蠢的 R 问题。如果我有一个矩阵（或数据框，以更容易使用的为准），例如：

```
Year  Match
2008   1808
2008 137088
2008      1
2008  56846
2007   2704
2007 169876
2007  75750
2006   2639
2006 193990
2006      2 
```

而且我想将这些年来的每场比赛计数相加（所以，例如 2008 年的行将是`2008 195743`，我该怎么做呢？我脑子里有一些解决方案，但它们都是不必要的复杂，而且 R 倾向于在某个地方隐藏一些更简单的解决方案。

您可以使用以下命令生成上面相同的矩阵：

```
structure(c(2008L, 2008L, 2008L, 2008L, 2007L, 2007L, 2007L, 
2006L, 2006L, 2006L, 1808L, 137088L, 1L, 56846L, 2704L, 169876L, 
75750L, 2639L, 193990L, 2L), .Dim = c(10L, 2L), .Dimnames = list(
NULL, c("Year", "Match"))) 
```

谢谢你的尽心帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T03:48:58.547

`aggregate(x = df$Match, by = list(df$Year), FUN = sum)`，假设`df`上面是您的数据框。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T21:43:13.033

您可能还想使用“plyr”包中的“ddply”功能。

```
# install plyr package
install.packages('plyr')
library(plyr)
# creating your data.frame
foo <- as.data.frame(structure(c(2008L, 2008L, 2008L, 2008L, 2007L, 2007L, 2007L, 
            2006L, 2006L, 2006L, 1808L, 137088L, 1L, 56846L, 2704L, 169876L, 
            75750L, 2639L, 193990L, 2L), .Dim = c(10L, 2L), .Dimnames = list(
              NULL, c("Year", "Match"))))

# here's what you're looking for
ddply(foo,.(Year),numcolwise(sum))

  Year  Match
1 2006 196631
2 2007 248330
3 2008 195743 
```

顺便说一句，2008 年的总和应该是 195743 (1808+137088+1+56846) 而不是 138897 你忘了加 56846。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-21T13:40:39.833

如上所述，您可以使用聚合来执行以下操作。但以更简单的方式

```
aggregate(. ~ Year, df, sum)
#  Year  Match
#1 2006 196631
#2 2007 248330
#3 2008 195743 
```

您也可以使用 Dplyr 来解决这个问题，如下所示

```
library(dplyr)
df %>% group_by(Year) %>% summarise(Match = sum(Match))
#  Year  Match
#  (int)  (int)
#1  2008 195743
#2  2007 248330
#3  2006 196631 
```

# ios - 关闭模态窗口将父级切换到横向

> ID：10202491
> 
> 赞同：0
> 
> 时间：2012-04-18T03:46:40.350
> 
> 标签：ios, modalviewcontroller

在这个小测试应用程序中，我有一个 ModalViewController，当您按下 + 按钮时，它会在 View One 上弹出。这会拉起一个带有三个 ViewController 的 NavigationViewController。第一个允许您创建帖子，第二个是另一个模式视图，允许您选择一个类别，最后一个允许您预览和“发布”它。此时（在 createTopic 方法中）发送了数据，我关闭了模态视图：

```
[self dismissModalViewControllerAnimated:YES]; 
```

这时，所有的疯狂开始了。View One 现在以横向模式呈现，尽管我禁用了除了竖直纵向之外的所有内容。此外，因为它们被禁用，它不会切换回纵向。我哪里失败了？

我什至不确定将代码的哪一部分发布给您。帮助？

![在此处输入图像描述](../Images/9bcc607c37e95efc04f36bb5f9b829fa.png)

![在此处输入图像描述](../Images/4e3034e5c02daabf82d7769be9c851a2.png)

![在此处输入图像描述](../Images/fa2be46e4eb550fea22c9174cb15c211.png)

![在此处输入图像描述](../Images/4bf6b768050611088ced5b67c5300344.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T03:51:09.723

在应用程序列表或摘要选项卡中“禁用”直立肖像并不会削减它。这只是一个发射方向。称呼，

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
 return UIInterfaceOrientationIsPortrait(interfaceOrientation);
} 
```

在每个 UIViewController 中将旋转限制为仅纵向模式。

# javascript - CoffeeScript 无法从复制的目录运行

> ID：10202493
> 
> 赞同：0
> 
> 时间：2012-04-18T03:46:43.260
> 
> 标签：javascript, web-services, node.js, coffeescript, foreman

在一个目录中，我有一个 CoffeeScript 应用程序，当我键入“foreman start”时它运行良好。

在另一个目录中，我复制了该目录中的所有内容并再次键入“foreman start”。但它不运行。相反，我得到了这个错误。

```
20:44:39 web.1     | started with pid 90836
20:44:40 web.1     | 
20:44:40 web.1     | node.js:201
20:44:40 web.1     |         throw e; // process.nextTick error, or 'error' event on first tick
20:44:40 web.1     |               ^
20:44:40 web.1     | Error: ENOENT, no such file or directory '/Users/cypher/git/heroku/falling-lightning-4940/node_modules/.bin/package.json'
20:44:40 web.1     |     at Object.openSync (fs.js:230:18)
20:44:40 web.1     |     at Object.readFileSync (fs.js:120:15)
20:44:40 web.1     |     at Object.<anonymous> (/Users/cypher/git/heroku/falling-lightning-4940/node_modules/.bin/nodemon:10:26)
20:44:40 web.1     |     at Module._compile (module.js:432:26)
20:44:40 web.1     |     at Object..js (module.js:450:10)
20:44:40 web.1     |     at Module.load (module.js:351:31)
20:44:40 web.1     |     at Function._load (module.js:310:12)
20:44:40 web.1     |     at Array.0 (module.js:470:10)
20:44:40 web.1     |     at EventEmitter._tickCallback (node.js:192:40)
20:44:40 web.1     | process terminated
20:44:40 system    | sending SIGTERM to all processes 
```

我不明白。这两个目录应该完全相同。这怎么可能发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:28:02.843

我怀疑这部分向我们展示了问题：

```
/Users/cypher/git/heroku/falling-lightning-4940/node_modules/.bin/package.json 
```

大多数复制方法不会复制带有`.`. `.bin`副本中可能缺少该目录。

# spring - spring中读取txt文件的方法

> ID：10202494
> 
> 赞同：2
> 
> 时间：2012-04-18T03:46:58.230
> 
> 标签：spring, file-io

我有一个要求，我需要通过 spring 框架读取文本文件的内容。为此，我在我的服务实现类中创建了一个方法，如下所示 -

```
public String readFile(File file) 
```

此方法将文件名作为输入并读取文件。

我正在为 Spring 编写 XML 代码，如下所示 -

```
<bean id="fstream" class="java.io.FileInputStream">
    <constructor-arg value="C:/text.txt" />
</bean>
<bean id="in" class="java.io.DataInputStream">
    <constructor-arg ref="fstream"/>
</bean>
<bean id="isr" class="java.io.InputStreamReader">
    <constructor-arg ref="in"/>
</bean>
<bean id="br" class="java.io.BufferedReader">
    <constructor-arg ref="isr"/>
</bean> 
```

以下代码进入我的方法 -

```
public String readFile(File file)
{
    String line = null;
    String content = "";

    try
    {
        ApplicationContext context = new ClassPathXmlApplicationContext("FileDBJob.xml");

        BufferedReader br = (BufferedReader) context.getBean("br");

        while((line = br.readLine())!=null)
            content = content.concat(line);
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
    return content;
} 
```

但这里的问题是我需要在 XML 中硬编码文件名，所以没有使用文件参数。

请帮助找到解决方案。因为我是春天的新手，所以我可能会错过一些东西。任何帮助都会有很大帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T04:59:56.510

不要注入流和读取器，这并不是 Spring 的真正用途。我会注入文件本身：

```
public class MyFileReader {

    private File file;

    public String readFile() {
        StringBuilder builder = new StringBuilder();
        BufferedReader reader = null;
        try {
            reader = new BufferedReader(new FileReader(getFile()));
            String line = null;
            while ((line = reader.readLine()) != null)
                builder.append(line);
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            closeQuietly(reader);
        }
        return builder.toString();
    }

    private void closeQuietly(Closeable c) {
        if (c != null) {
            try {
                c.close();
            } catch (IOException ignored) {}
        }
    }

    public File getFile() {
        return file;
    }

    public void setFile(File file) {
        this.file = file;
    }

} 
```

然后你的 bean def 看起来像这样：

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="classpath:app.properties"/>
</bean>

<bean class="com.myapp.MyFileReader">
    <property name="file" value="${filePath}" />
</bean> 
```

剩下的就是使用正确的信息创建您的 app.properties 文件。您还可以通过调用应用程序来设置值`-DfilePath=/foo/bar/whatever.txt`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T00:46:42.817

我已经测试了这段代码的工作......尝试实现......你必须在你的项目配置文件夹中复制粘贴 schedular.xml 文件（你的应用程序中的 applicationContext.xml 文件，它必须是 contextConfigLocation WEB-您的 web.xml 文件中的 INF/config/*.xml）。

```
Then configure SvhedularTask bean in ur service classes xml file....it will trigger for every minute.

////SCHEDULARTASK.JAVA//////

import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.util.Date;

import javax.servlet.ServletContext;

import org.springframework.web.context.ServletContextAware;

/**
 * The Class SchedulerTask.
 */
public class SchedulerTask implements ServletContextAware{

    private ServletContext servletContext;

    @Override
    public void setServletContext(ServletContext arg0) {
        // TODO Auto-generated method stub
        this.servletContext = arg0;
    }

    public void unZipProcess() throws IOException{
        System.out.println(servletContext);
        File folder = new File("C:/Users/rerrabelli/Desktop/test");
        File[] listOfFiles = folder.listFiles();
        if (listOfFiles != null){
            for (int i = 0; i < listOfFiles.length; i++) {
                if (listOfFiles[i].isFile()) {
                    if (listOfFiles[i].getName().endsWith(".txt")) {
                        File file = new File("C:/Users/rerrabelli/Desktop/test" + File.separator
                                + listOfFiles[i].getName());
                        long millisec = file.lastModified();
                        Date dt = new Date(millisec);
                        long difference = new Date().getTime()-dt.getTime();
                        System.out.println((difference/1000)/60);
                        if(((difference/1000)/60)<1){
                            FileInputStream fin = new FileInputStream(
                                    file);
                            ByteArrayOutputStream tmp = new ByteArrayOutputStream();
                            byte b;
                            while ((b = (byte) fin.read()) != -1) {
                                tmp.write(b);
                            }
                            byte[] customerData = tmp.toByteArray();
                            String data = new String(customerData);
                            System.out.println(data);
                            servletContext.setAttribute(file.getName(), data);
                        }
                    }
                }
            }
        }
        System.out.println(servletContext.getAttribute("test.txt"));
    }

}

//////APPLICATION CONTEXT.xml/////////

<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <bean id="schedulerTask" class="com.altimetrik.simreg.service.impl.SchedulerTask">

    </bean>
</beans>

======================
SCHEDULAR.XML
===========
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN/EN" "http://www.springframework.org/dtd/spring-beans.dtd" >
<beans>

    <import resource="applicationContext.xml"/>

    <bean id="schedulerTask1"
        class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
        <property name="targetObject"> <ref bean="schedulerTask" /> </property>
        <property name="targetMethod"> <value>unZipProcess</value> </property>
        <property name="concurrent"> <value>false</value> </property>
    </bean>

    <bean id="UnzipTrigger"
        class="org.springframework.scheduling.quartz.CronTriggerBean">
        <property name="jobDetail"> <ref bean="schedulerTask1" /> </property>
        <property name="cronExpression"> <value>0 0/1 * * * ?</value> </property>
    </bean>

    <bean
        class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
        <property name="triggers">
            <list>
                <!-- Add triggers here-->
                <ref bean="UnzipTrigger" />
            </list>
        </property>
    </bean>
</beans> 
```

# php - 注意：未定义的索引：在类->数组中

> ID：10202499
> 
> 赞同：0
> 
> 时间：2012-04-18T03:47:46.557
> 
> 标签：php, arrays, class

这是代码：

```
class app {
    public $conf = array();
    public function init(){
       global $conf;
       $conf['theme']   = 'default';
       $conf['favicon'] = 'favicon.ico';
    }
    public function site_title(){
        return 'title';
    }
}

$app = new app;
$app->init();

//output
echo $app->conf['theme']; 
```

我得到这个错误：

```
Notice: Undefined index: theme in C:\xampp\htdocs\...\trunk\test.php on line 21 
```

我哪里出错了，有没有更简单的方法来获得相同的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T03:51:03.297

您正在填充一个单独的全局变量而不是对象属性。使用`$this`：

```
class app {
    public $conf = array();
    public function init(){
       $this->conf['theme']   = 'default';
       $this->conf['favicon'] = 'favicon.ico';
    }
    public function site_title(){
        return 'title';
    }
}
$app = new app;
$app->init();

//output
echo $app->conf['theme']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T03:52:39.583

你就在OOP的精彩世界里，不用再用了`global`！

试试这个：

```
class app
{
    public $conf = array();

    // Notice this method will be called every time the object is isntantiated
    // So you do not need to call init(), you can if you want, but this saves
    // you a step
    public function __construct()
    {       
        // If you are accessing any member attributes, you MUST use `$this` keyword
        $this->conf['theme']   = 'default';
        $this->conf['favicon'] = 'favicon.ico';
    }
}

$app = new app;

//output
echo $app->conf['theme']; 
```

# ruby-on-rails - 访问实时站点域

> ID：10202500
> 
> 赞同：0
> 
> 时间：2012-04-18T03:47:50.583
> 
> 标签：ruby-on-rails

我无法访问在我的 macbook 上创建的 Rails 3 应用程序的实时域。我显然可以出于测试目的访问 localhost:3000，但是当我登录到我的实时域`http://truthpage.me`时，它会发送请求并最终超时。仅在我的机器上的任何浏览器中都不起作用。`heroku`如果这有什么不同，我们将托管该应用程序。你们中的任何人都有解决方案为什么这不起作用？感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T15:56:56.947

尝试刷新您的 DNS 缓存：

```
 $> dscacheutil -flushcache 
```

此外，请确保在您的主机文件中不会导致该域的意外重定向：

```
 $> cat /private/etc/hosts 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T06:41:17.550

这是在其他机器或位置工作吗？如果这是在其他位置工作，那么您当地的 ISP 可能存在问题。如果您最近更改了 DNS 记录，那么它也可能是 DNS 传播问题。有时，在全球传播 DNS 需要 24 小时。

# c++ - 原子int错误地递增？英特尔 TBB 实施

> ID：10202502
> 
> 赞同：2
> 
> 时间：2012-04-18T03:48:12.663
> 
> 标签：c++, multithreading, visual-studio-2010, tbb

我正在实施一个多线程程序，以使用英特尔 TBB 验证一系列数字的 Collat​​z 猜想，但我无法弄清楚为什么原子变量`<int> count`（它记录了已验证的数字数量）没有正确递增。

对于下面列出的相关代码，我使用了一个小区间（仅验证数字 1-10，但随着区间变大问题会扩大），并且我始终得到 18 的计数返回值。有任何想法吗？

```
task_scheduler_init init(4);
atomic<int> count;

void main 
{
tick_count parallel_collatz_start = tick_count::now();
parallel_collatz();
tick_count parallel_collatz_end = tick_count::now();
double parallel_time = 1000 *(parallel_collatz_end - parallel_collatz_start).seconds();
}

void parallel_collatz()
{
    parallel_for
    (
        blocked_range<int>(1,10), [=](const blocked_range<int>&r) 
        { for (int k = r.begin(); k <= r.end(); k++) { collatz(k); } }
    );
}

long long collatz (long long n) 
{
    while (n != 1) {
        if (n%2 == 0)
            n = (n/2);
        else
            n = (3*n + 1);
    }

    if (n == 1) {
        count++;
        return n;
    }
    return -1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T04:38:17.267

原因可能是构造函数使用了半开范围，`[1, 10)`这意味着 1 包含 10 不包含，因此您不是在验证数字 1-10 而是验证 1-9。此外，您可能希望在循环条件中使用`!=`而不是。`<=`

# php - 如何从默认位置替换字符串？

> ID：10202503
> 
> 赞同：1
> 
> 时间：2012-04-18T03:48:37.823
> 
> 标签：php

我有以下代码：

```
$text = "abc def abc jkl mno";
    $regex = '/'.trim('abc').'/ism';
    $search = array();
    if(preg_match_all($regex, $text, $tmp)) {
       if(isset($tmp[0])) {             
          for($i = 0;$i < count($tmp[0]); $i++) {
            $search = $tmp[0][1];
            $replace = 'ghi';
            $article = str_replace($search, $replace, $text);   
          }
       }
    }
        echo $article; 
```

当我`echo $article_text`的结果是：`ghi def ghi jkl mno`

但我想要的结果是`abc def ghi jkl mno`。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T04:32:31.143

Try this: [http://codepad.viper-7.com/dJZIJk](http://codepad.viper-7.com/dJZIJk)

```
$text = "abc def abc jkl mno";
$search = 'abc';
$replace = 'ghi';
$article = substr($text, 0, strlen($search)) . str_replace($search, $replace, substr($text, strpos($text, 'abc') + strlen($search)));
echo $article; 
```

# castle-windsor - 错误建立开放拉斯塔城堡温莎

> ID：10202509
> 
> 赞同：1
> 
> 时间：2012-04-18T03:49:04.173
> 
> 标签：castle-windsor, openrasta

我尝试建造 OpenRasta Castle Windsor。

首先，我克隆 Openrasta Castle [Github Repository](https://github.com/openrasta/openrasta-castle-windsor)。我`make.bat`从命令提示符执行。但我得到了这些错误：

```
D:\Software\dotNET\OpenRasta\openrasta-castle-windsor>C:\Windows\Microsoft.NET\F
ramework\v4.0.30319\msbuild.exe build\build.proj
Microsoft (R) Build Engine Version 4.0.30319.1
[Microsoft .NET Framework, Version 4.0.30319.488]
Copyright (C) Microsoft Corporation 2007\. All rights reserved.

Build started 18/04/2012 10:46:48.
Project "D:\Software\dotNET\OpenRasta\openrasta-castle-windsor\build\build.proj
" on node 1 (default targets).
D:\Software\dotNET\OpenRasta\openrasta-castle-windsor\build\build.proj(11,75):
error MSB4064: The "CurrentProjectFile" parameter is not supported by the "Init
ializeOpenWrap" task. Verify the parameter exists on the task, and it is a sett
able public instance property.
D:\Software\dotNET\OpenRasta\openrasta-castle-windsor\build\build.proj(11,5): e
rror MSB4063: The "InitializeOpenWrap" task could not be initialized with its i
nput parameters.
Done Building Project "D:\Software\dotNET\OpenRasta\openrasta-castle-windsor\bu
ild\build.proj" (default targets) -- FAILED.

Build FAILED.

"D:\Software\dotNET\OpenRasta\openrasta-castle-windsor\build\build.proj" (defau
lt target) (1) ->
(_Initialize target) ->
  D:\Software\dotNET\OpenRasta\openrasta-castle-windsor\build\build.proj(11,75)
: error MSB4064: The "CurrentProjectFile" parameter is not supported by the "In
itializeOpenWrap" task. Verify the parameter exists on the task, and it is a se
ttable public instance property.
  D:\Software\dotNET\OpenRasta\openrasta-castle-windsor\build\build.proj(11,5):
 error MSB4063: The "InitializeOpenWrap" task could not be initialized with its
 input parameters.

    0 Warning(s)
    2 Error(s)

Time Elapsed 00:00:00.06 
```

提前致谢。

# internet-explorer - 关闭由 WScript.CreateObject 创建的 IE 实例

> ID：10202512
> 
> 赞同：2
> 
> 时间：2012-04-18T03:49:24.847
> 
> 标签：internet-explorer, vbscript, automation, wmi

我正在寻找一种从通过运行创建的对象中检索进程 ID 的方法：

```
Set ie = WScript.CreateObject("InternetExplorer.Application", "ie_") 
```

我的问题是，有时我看到`iexplorer`进程保持打开状态并且在运行后没有关闭：

```
ie.stop
ie.Quit 
```

我找到了一些解决方法，比如寻找最新的`iexplorer`进程或查看进程名称，但这对我来说并不好，因为我有几个 Internet Explorer 实例由不同的进程并行打开，而且可能同时打开。

情况不妙：

```
Set colProcessList = objWMIService.ExecQuery _ 
("Select * from Win32_Process Where " _ 
& "Name = '"& sProcessName & "'") 
```

我看到了[这个](http://www.vbforums.com/showthread.php?t=379959)可能有效的解决方案，但我不知道如何为 Internet Explorer 实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T07:52:46.690

在不调用 powershell 命令或使用 com 包装器的情况下，您可能希望通过其命令行过滤进程。从 dcom 启动创建的 iexplorer.exe 进程具有类似`-Embedding`. 关于我的意思的示例查询。

> Select * from Win32_Process Where Name = 'iexplore.exe' And CommandLine Like '%-Embedding'

是的，我听说了，这将返回所有嵌入式实例，因此如果有多个实例，它可能没有用。

IE 对象实例具有返回 mainwindowhandle 的属性：[HWND](http://msdn.microsoft.com/en-us/library/bb268219%28v=vs.85%29.aspx)。

可以做些什么来终止使用 HWND 更可靠：

从 Powershell 运行命令：

```
Set WshShell = WScript.CreateObject("WScript.Shell")
strCommand = "powershell -Command ""Get-Process | Where-Object {$_.MainWindowHandle -eq "& IE.Hwnd &"} | kill"""
WshShell.Run strCommand, vbHide, True 
```

使用/编写包装 Windows API 的组件（仅限 32 位）： http: [//www.codeproject.com/Articles/16558/DestroyWindow-in-VBScript](http://www.codeproject.com/Articles/16558/DestroyWindow-in-VBScript)

```
Set obj = CreateObject("APIWrapperCOM.APIWrapper")
    obj.KillWindow IE.Hwnd 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-20T00:45:26.547

我认为您正在寻找我在 Powershell 对象中测试过的这个，所以它应该是同一件事。

```
$ie.Quit() 
```

# java - 使用正则表达式删除尾随特殊字符

> ID：10202514
> 
> 赞同：1
> 
> 时间：2012-04-18T03:49:42.923
> 
> 标签：java, regex

我需要从语句中删除尾随小数/点。以下是声明

```
ABC paid 10.25 RS confirmed. from bank XYZ 20125722\. on 23-12-2012 
```

我想从语句中删除尾随小数/点。删除小数/点后，它应该像

```
ABC paid 10.25 RS confirmed from bank XYZ 20125722 on 23-12-2012 
```

请注意，我不需要删除 中的小数点`10.25`，但在其他地方。我怎么能用Java做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T04:00:05.540

在 Java 中，只需对字符串使用[replaceAll(String pattern,String replacement)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)方法，如下所示：

```
String result = "ABC paid 10.25 RS confirmed. from bank XYZ 20125722\. on 23-12-2012".replaceAll("\\.\\s+"," ") ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T03:55:11.253

您可以使用的正则表达式是`/\.\S+/`Perl 或 Perl-regex 支持语言。否则`/\.[ ^I]/`，“^I”是 TAB 字符。将其替换为空。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T05:20:38.107

您应该使用 is **\\.\\s+**，因为点后可能包含多个空格或一个空格。

代码如下：

```
String result = "ABC paid 10.25 RS confirmed. from bank  XYZ 20125722\. on 23-12-2012"
               .replaceAll("\\.\\s+", " "); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T05:30:08.273

那么，你想匹配任何`.`不是数字的吗？您可以使用一种称为[负前瞻](https://stackoverflow.com/questions/2860044/negative-look-ahead-java)的方法：

```
"\\.(?![0-9])" 
```

这匹配`.`一个数字之前的任何 NOT。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T05:30:55.573

你的正则表达式是

```
\.(?=\s|$) 
```

表示当一个点后跟一个空格或字符串的结尾时匹配一个点。`(?=\s|$)`是一个[正向前瞻](http://www.regular-expressions.info/lookaround.html)，确保后面有空格或字符串结尾，但与此不匹配，因此无需再次插入，只需替换为空字符串即可。

[在 Regexr 上](http://regexr.com?30m65)查看

对于你的 java

```
String res = "ABC paid 10.25 RS confirmed. from bank XYZ 20125722\. on 23-12-2012".replaceAll("\\.(?=\\s|$)", ""); 
```

# java - 从 BufferedReader (readLine) 读取返回 null？

> ID：10202515
> 
> 赞同：3
> 
> 时间：2012-04-18T03:49:50.050
> 
> 标签：java, string, bufferedreader

我目前正在尝试`String`从 a中读取 a`BufferedReader`但找不到这样做的方法...

我当然试过

```
BufferedReader inStream = null;
inStream = new BufferedReader(new InputStreamReader(client.getInputStream()));
String test = inStream.readLine(); 
```

然而，当尝试打印到屏幕时，即使`BufferedReader inStream`等于某种消息，结果也会显示为空。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T04:01:43.980

根据[文档](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#readLine%28%29)，仅在到达流末尾时才`BufferedReader.readLine()`返回。`null`这意味着如果第一次调用`readLine()`返回`null`，则输入流中没有任何内容。

# .net - 覆盖基本调用顺序约定？

> ID：10202517
> 
> 赞同：3
> 
> 时间：2012-04-18T03:49:57.200
> 
> 标签：.net

我见过许多框架和辅助类，它们要求您`base.MethodName()`在继承的类覆盖中调用它们 some `MethodName()`。但是，其中一些要求它是被覆盖方法中的最后一次调用，而另一些则要求它是第一次调用。应该以哪种方式调用它并不总是很明显，通常只能通过阅读文档或示例才能弄清楚。

那么，我的结论是否正确，在该领域没有一些最佳实践，并且`base`在覆盖方法中调用方法位置仅取决于框架设计器？或者有，我应该更喜欢某种设计而不是另一种？就我个人而言，我发现首先调用 base 更加自然，就像在构造函数中一样（强制执行此设计）。还是有一些情况（或领域）迫使开发人员使用特定的调用顺序？

**更新**。在@Attila 的帮助下，我现在可以看到，大多数`base`类调用都可以重新设计。而不是这个：

```
// FRAMEWORK
public virtual void SomeMethod()
{
  // framework code
}

// USAGE
public override void SomeMethod()
{
  base.SomeMethod();

  // user code
} 
```

做这个：

```
// FRAMEWORK
public void SomeMethod()
{
  // framework code

  // you can place UserSomeMethod where you want, 
  // you can change it position in new versions of a fremework
  // without breaking user code
  this.SomeMethodUserCode();
}

protected abstract void SomeMethodUserCode();

// USAGE
protected override void SomeMethodUserCode()
{
  // user code
} 
```

用户失去了一些灵活性（可以理解为“有更少的选项来破坏，或者让你的框架工作错误”），但使用起来很简单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T03:55:26.837

您需要调用基方法的确切位置和顺序完全取决于基类的逻辑（它被设计为如何工作）。因此，没有永远正确的“一种方式”。您将不得不继续阅读规范和文档

也许更好的设计是不需要任何回调基类：基类执行它认为合适的方法，并允许派生类通过基类在需要时调用的抽象方法提供自定义功能；从而使客户不必知道调用的确切顺序。

# android - 如何自动隐藏 AlertDialog

> ID：10202518
> 
> 赞同：0
> 
> 时间：2012-04-18T03:49:58.993
> 
> 标签：android, android-alertdialog

我的 android 应用程序使用 `AlertDialog.Builder.setMessage("OK").show();` 但此面板不会自动隐藏。用户必须点击手机上的返回键。我怎样才能显示一条消息三秒钟，然后自动隐藏它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:50:33.250

使用消息处理程序隐藏您的对话框。尝试这个..

```
AlertDialog test_ok = null;
android.os.Handler messagHandler = null;
Message msg = new Message();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    test_ok = new AlertDialog.Builder(this).setMessage("ok").create();
    test_ok.show();

    messagHandler = new android.os.Handler() {
        public void handleMessage(android.os.Message msg) {
            switch (msg.what) {
                case 1:
                    test_ok.dismiss();
                    break;
            }
        };
    };

    msg.what = 1;
    messagHandler.sendMessageDelayed(msg, 4000);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-18T04:47:16.727

```
Try Thread to show alert for some time....

private boolean mActive = true;
private final int SPLASH_DISPLAY_LENGHT = 2000;

Thread splashTread = new Thread() {
            @Override
            public void run() {
                try {
                    int waited = 0;
                    while (mActive && (waited < SPLASH_DISPLAY_LENGHT)) {
                        sleep(70);

                        waited += 70;

                    }
//set Alert dialog here
                    AlertDialog.Builder.setMessage("OK").show();

                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        };
        splashTread.start(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-18T03:51:31.893

尝试使用 Toast 类：

`Toast.makeText(this, "OK", Toast.LENGTH_LONG).show();`

# wordpress - 如何从 wp_list_categories 结果中删除特殊类别

> ID：10202519
> 
> 赞同：0
> 
> 时间：2012-04-18T03:50:15.513
> 
> 标签：wordpress, wordpress-theming

我使用打击代码而不是我的菜单

```
<?php wp_list_categories('title_li=&depth=4&orderby=id'); ?> 
```

我想从 wp_list_categories 结果中删除一个特殊类别。除了菜单栏，我将该类别用于其他工作。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T04:11:07.733

使用`exclude`参数。

[http://codex.wordpress.org/Template_Tags/wp_list_categories#Include_or_Exclude_Categories](http://codex.wordpress.org/Template_Tags/wp_list_categories#Include_or_Exclude_Categories)

```
<?php wp_list_categories('title_li=&depth=4&orderby=id&exclude=cat_id'); ?> 
```

替换`cat_id`为您希望排除的类别的 ID。如果有多个，请用逗号分隔每个 ID。

# joomla2.5 - Joomla 2.5 管理页面不会显示

> ID：10202520
> 
> 赞同：0
> 
> 时间：2012-04-18T03:50:24.470
> 
> 标签：joomla2.5

我正在从 Joomla 1.5 升级到 2.5，并在实时站点的子文件夹中开发了我的站点。测试区一切正常。（开发站点在这里：[http](http://academyphysicians.com/test) ://academyphysicians.com/test ）使用 Akeba 备份并将站点移动到根文件夹。前端按预期工作，但登录后管理页面为空白。2.5 的新安装在这里：[http](http://academyphysicians.com) ://academyphysicians.com 。

我在谷歌上搜索这个问题，发现 php 版本可能是问题所在。我正在运行 v 5.2.14，我看到可能需要 5.3。如果是这样的话，我似乎会在测试站点遇到问题。有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T02:11:54.080

If the site worked in a subfolder, then it will work in the root. When you moved the site you did something wrong or you have touched a setting you shouldn't have because Joomla should be folder agnostic.

# c# - 具有 3 个表和添加的数据集关系查询

> ID：10202523
> 
> 赞同：1
> 
> 时间：2012-04-18T03:51:03.150
> 
> 标签：c#, dataset, database-relations

我需要一些帮助来从数据集中获取数据。代码：

```
 DataRelation relation = null;
            DataColumn table1Column = null;
            DataColumn table2Column = null;
            DataColumn table2Column1 = null;
            DataColumn table3Column = null;

            table1Column = tlobergeDataSet.Tb_Product.Columns[0];
            table2Column = tlobergeDataSet.Tb_Transactions.Columns[2];
            table2Column1 = tlobergeDataSet.Tb_Transactions.Columns[1];
            table3Column = tlobergeDataSet.Tb_Consumer.Columns[0];

            relation = new DataRelation("relation", table1Column, table2Column);
            tlobergeDataSet.Relations.Add(relation);

            relation = new DataRelation("relation1", table3Column, table2Column1);
            tlobergeDataSet.Relations.Add(relation); 
```

给定一个产品名称，我需要用每个不同的城市以及该产品在该城市的售价填充一个表格（将该产品的所有价格添加到给定城市的任何消费者）

前表：

产品表：

```
Prod_ID    Name    

1          tv
2          couch 
```

消费者表：

```
Con_Id    Name    City
----------------------
1         Gray    New York
2         Joe     Chicago
3         Steve   Madison 
```

交易表

```
Tran_Id   Con_ID    Prod_ID    Price
-------------------------------------
1         2         1          900
2         1         2          300
3         1         1          900 
```

所需表

```
City      Total Sales
----------------------
New York  1200
Chicago   900
Madison   0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T04:18:38.930

试试这个，现在已经测试过了

```
var query = from consumer in Tb_Consumer.AsEnumerable()
            select new
            {
               CityName = consumer.Field<string>("City"),
               //Name of relationship i.e. relation1 is important here
               Sales = consumer.GetChildRows("relation1").Sum(tx=> tx.Field<decimal>("Price")) 
            };

var datatable = new DataTable();
col = new DataColumn("City");
datatable.Columns.Add(col);
col = new DataColumn("TotalSales");
datatable.Columns.Add(col);

foreach (var item in query.ToList())
{
    var newrow = datatable.NewRow();
    newrow["City"] = item.CityName;
    newrow["TotalSales"] = item.Sales;
    datatable.Rows.Add(newrow);
} 
```

# java - 在 Java 中读取 XML 文件和获取元素属性时遇到问题

> ID：10202528
> 
> 赞同：1
> 
> 时间：2012-04-18T03:51:28.647
> 
> 标签：java, xml, dom

我的目标是读取 XML 文件并提供一个简单的界面，使（非技术）用户能够修改此文件。xml 文件驱动一个 Flash 照片库，并由该 Flash Actionscript 预定义。

XML 的一个示例是

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<photostack3d>
    <photos>
        <photo>
            <thumb src="Thumbs/bed1.jpg"/>
            <img src="Photos/bed1.jpg"/>
            <caption text="Master Bedroom"/>
            <desc><![CDATA[<h1>Master Bedroom</h1><br>The master bedroom is roomy and has a beautiful view of the landscaped back yard.]]></desc>
        </photo>
    </photos>
</photostack3d> 
```

在这个 XML 中，可以有多个照片节点，因为这些节点定义了画廊将显示的每张照片......

现在，我正在使用 DOM 创建文件，所以我们很好。使用 DOM 尝试将其读入以进行进一步编辑是我遇到问题的地方。我可以访问所有照片元素，但在获取其中的属性时遇到问题，即拇指、img、标题和描述。目前，我有以下内容：

```
private void loadXML(String filePath)
{
    try 
    {
        File fXmlFile = new File(filePath);
        DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
        Document doc = dBuilder.parse(fXmlFile);
        doc.getDocumentElement().normalize();

        System.out.println("Root element :" + doc.getDocumentElement().getNodeName());
        NodeList photosList = doc.getElementsByTagName("photos");
        System.out.println("-----------------------");

        NodeList photoList = doc.getElementsByTagName("photo");
        System.out.println("Number of photo nodes: " + photoList.getLength());

        for (int temp = 0; temp < photoList.getLength(); temp++) 
        {

            NodeList thumbList = doc.getElementsByTagName("thumb");
            Element thumbElement = (Element) thumbList.item(0);

            String thumbName = thumbElement.getAttribute("thumb");
            System.out.println("thumb name: " + thumbName);

            //Node nNode = photoList.item(temp);
            //if (nNode.getNodeType() == Node.ELEMENT_NODE) 
            //{

            //  Element eElement = (Element) nNode;

            //  System.out.println("Source Name : " + eElement.getAttribute("text"));     //.getElementsByTagName("thumb"));
                //System.out.println("Source Name : " + getTagValue("thumb", eElement));
                System.out.println("-----------------------");
            //}
        }
    } 
    catch (Exception e) 
    {
        e.printStackTrace();
}

} 
```

如您所见，我一直在尝试各种不同的方法来获取这些属性，但到目前为止，还没有看到值回来。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T04:02:41.887

你试过`thumbElement.getAttribute("src");` 吗？

# android - Phonegap loadUrl try/catch and retry

> ID：10202531
> 
> 赞同：1
> 
> 时间：2012-04-18T03:52:00.117
> 
> 标签：android, cordova

我希望能够在用户没有互联网连接（或服务器没有响应）时加载本地默认 html 页面，然后在他们这样做时加载外部网站。我正在考虑为此使用 try/catch 块，当错误发生时，然后加载本地页面，然后用户单击其上的重试按钮重试。我正在为 Android 3.2 平台编写代码。

我的问题是如何完成以下代码？有样品吗？

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    try
    {
        super.loadUrl("http://www.example.com/");
    }
    catch(Exception ex)
    {
        // how to catch the error, then show the local page to retry.
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:00:04.617

至少对于无连接错误/未知连接错误，您可以使用 Phonegap`Connection`类来执行此操作。您可以尝试检查连接类型的状态，然后根据它执行适当的操作。

这是您使用 Phonegap Cordova javascript 库的方式：http: [//docs.phonegap.com/en/1.5.0/phonegap_connection_connection.md.html#Connection](http://docs.phonegap.com/en/1.5.0/phonegap_connection_connection.md.html#Connection)

您需要找出在 Eclipse 中执行此操作的等效方法（使用 Java 代码）。像 Phonegap 这样的框架应该有 Java API。查看 PhoneGap 的 Javadocs 和文档。

# ios - 使用文档交互在我的两个应用程序之间传输 IAP

> ID：10202533
> 
> 赞同：1
> 
> 时间：2012-04-18T03:52:09.007
> 
> 标签：ios, app-store, in-app-purchase

我有两个类似的应用程序，其中包含可以在它们之间共享的应用内购买 (IAP) 内容。我想通过让他们将购买转移到另一个应用程序来奖励在一个应用程序中购买的客户。但是，我担心我的应用程序会因为 App Store 审核指南而被拒绝，该指南说您不能有任何非 App Store 内容激活方法。

就技术可行性而言，我很清楚[文档交互机制](https://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/RegisteringtheFileTypesYourAppSupports.html#//apple_ref/doc/uid/TP40010411-SW1)是实现此目的的一种手段（无网络服务器）。我可以让每个应用程序注册一个自定义文件类型。用户购买内容的应用程序可以显示一个链接以启动另一个应用程序，将适当的元数据作为“启动文件”传递给它，以便第二个可以将项目标记为已购买。

有谁知道这是否已经尝试过，以及 Apple 是否批准了这种方法？

请注意，我不关心这种方法的购买安全性，因为让付费客户满意对我来说比防止盗版更重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T01:10:13.483

这与其说是对上述精确问题的回答，不如说是实现最终目标的一种有用的替代技术。如果设置正确，两个应用程序可以共享 KeyChain 访问权限，从而共享有关已购买 IAP 的元数据。这需要为应用 ID 使用相同的 Bundle Seed ID（例如“AXGUKHGX...”），并在应用的 info plist 中正确设置。后一种技术是一种更优雅的传播可共享 IAP 的方法。

# php - kohana 3.2 路由示例

> ID：10202538
> 
> 赞同：0
> 
> 时间：2012-04-18T03:53:26.983
> 
> 标签：php, routes, kohana

我一直在研究路线，但找不到任何假人的例子-

谁能为这些场景提供一些？

假设该站点是 www.site.com/test/ test 是具有操作索引的控制器

场景 1 - 有人把 www.site.com/test/one

由于控制器一不存在，使用路由可以将它们发送到索引吗？

方案 2

我们创建控制器二，我们希望 www.site.com/test/two 将您带到您指定的另一个控制器

方案 3

最后我们有 www.site.com/test/paul/james/

我们如何设置它以便我们同时获得保罗和詹姆斯？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:06:07.470

**场景 1**（www.site.com/test/one）：

你有：

`Route::set('s1', '(<controller>(/<level2>))') ->defaults(array( 'action' => 'index', ));`

在`test`控制器中，您可以`one`通过 $this->request->param('level2')。

**方案 2**（www.site.com/test/two）：

采用：

`Route::set('s2', 'test/two') ->defaults(array( 'controller' => 'two', 'action' => 'index', ));`

**场景 3** (www.site.com/test/paul/james/)：

采用：

`Route::set('s3', 'test/<name>/<surname>') ->defaults(array( 'controller' => 'test', 'action' => 'index', ));`

Yoy 可以`paul`通过控制器中的 $this->request->param('name') 和`james`$this->request->param('surname')访问`test`。

# windows - 在 Windows 中将多个文件的前缀重命名或删除为每个文件的编号

> ID：10202540
> 
> 赞同：28
> 
> 时间：2012-04-18T03:53:58.713
> 
> 标签：windows, cmd, rename

我正在尝试更改当前文件夹中的所有文件名，我试图通过删除文件前缀（每个文件都有一个公共前缀）或将它们的名称更改为它们的计数（如果有 5 个文件，文件名将是 1.txt 2.txt 3.txt 4.txt 5.txt）。

现在我在cmd中找到了ren命令并玩了一下，但到目前为止我无法达到结果，我只能在cmd中运行它，所以不能使用批处理文件。

这是我得到的最接近的，但它只添加了一个前缀：

```
FOR %f IN (*.*) DO ren %f prefix%f 
```

我试过做相反的事情：

```
FOR %f IN (*.*) DO ren prefix%f %f 
```

但是，当然，没有工作，所以我现在寻求帮助和一些可能的解释（我想了解这些事情是如何工作的）。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2015-09-14T09:37:41.190

[https://superuser.com/a/871799/497147](https://superuser.com/a/871799/497147)中提供了一个更简单的解决方案

我在这里复制它以便于访问。

> 忘记为此的复杂脚本。
> 
> `rename`是一个非常古老且从未正确完成的命令。如果你没有正确使用它，结果可能会让你大吃一惊。
> 
> 例如，`abcd`要从`abcd1.txt`,`abcd2.txt`等`abcd3.txt`中删除前缀以获得`1.txt`, `2.txt`，`3.txt`只需使用
> 
> ```
> rename "abcd*.txt" "////*.txt" 
> ```
> 
> 您需要与`/`要删除的初始字符数相同的数量。
> 
> 请为两个参数添加双引号。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-04-18T04:26:22.810

我不明白为什么你不能使用批处理文件。但这是一个适用于大多数文件名的解决方案。

关键 - 首先你必须确保你有一个未定义的变量名，我将使用 fname

```
set "fname=" 
```

接下来是实际进行重命名的命令。如果 fname 已经定义，它将无法正常工作。

```
for %a in (prefix*.txt) do @(set "fname=%a" & call ren "%fname%" "%fname:*prefix=%") 
```

fname 变量是为每次迭代定义的，然后语法`%fname:*prefix=%`将第一次出现的“prefix”替换为空。棘手的是 Windows 在第一次解析命令时首先尝试扩展 %fname%。当然这行不通，因为它还没有被定义。如果未找到变量，则在命令行上保留百分比。CALL 会导致在设置变量*后*发生额外的扩展阶段，因此扩展工作。

如果在运行命令之前定义了 fname，那么它将简单地尝试为每次迭代重命名同一个文件，而不是在循环中分配的值。

如果要使用不同的前缀再次运行该命令，则必须首先再次清除定义。

**编辑**- 这是一个名为“RemovePrefix.bat”的批处理文件，它可以完成这项工作

```
::RemovePrefix.bat  prefix  fileMask
@echo off
setlocal
for %%A in ("%~1%~2") do (
  set "fname=%%~A"
  call ren "%%fname%%" "%%fname:*%~1=%%"
) 
```

假设您有名为 like 的文件`"prefixName.txt"`，那么您将通过执行来使用该脚本

```
RemovePrefix  "prefix"  "*.txt" 
```

批处理文件将重命名当前目录中的文件。除非批处理文件存在于 PATH 变量中的目录中，否则批处理文件也必须位于当前目录中。或者，您可以在调用批处理文件时指定它的完整路径。

批处理文件中的扩展规则不同。FOR 变量必须被引用为 %%A 而不是 %A，并且 %%fname%% 最初不扩展，而是将双百分号转换为单百分号，然后在 CALL 之后扩展 %fname%。批处理文件是否已经定义了 fname 并不重要。SETLOCAL 使 fname 的定义临时（本地）到批处理文件。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2020-04-15T15:09:52.750

以下是`rename`为所有文件修剪前缀的直接方法

```
rename -d your_prefix * 
```

# python - Django 在表单和 csrf 令牌方面遇到麻烦

> ID：10202541
> 
> 赞同：0
> 
> 时间：2012-04-18T03:54:05.370
> 
> 标签：python, django, forms, csrf, django-csrf

我试图让一个非常简单的电子邮件表单工作。表格只有一个字段（电子邮件）。

**表格.py**

```
from django import forms

class EmailForm(forms.Form):
    email = forms.EmailField() 
```

**视图.py**

```
from django.shortcuts import render_to_response
from django.core.mail import EmailMultiAlternatives
from django.template import RequestContext
from launchpage.models import EmailForm

def index(request):
    if request.method == 'POST':        
        form = EmailForm(request.POST)
        if form.is_valid():
            clean_data = form.clean_data
            # send an email
                    thank_you = "Thanks for signing up"
            return render_to_response('launch.html', {'thank_you': thank_you})
    else:
        form = EmailForm()
    return render_to_response('launch.html', {'form': form,}, context_instance=RequestContext(request)) 
```

**launch.html**（相关部分）

```
<div class="row-fluid">
    <div class="span12">
        {% if thank_you %}
             <div class="alert alter-info">
             {{ thank_you }}
             </div>
        {% else %}
            <form action="" method="post" class="form-horizontal">{% csrf_token %}
            Or stay updated by email (no spam, pinky swear) &nbsp;&nbsp;
            {{ form.email }}
            <button type="submit" class="btn">Submit</button>
        </form>
        {% endif %}
    </div>
</div> 
```

**settings.py 中的中间件**

```
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
) 
```

* * *

当前结果：页面显示好像没有涉及模板。我看到了表单和提交按钮，但没有电子邮件字段。也没有csrf隐藏字段。我一定是错过了一些愚蠢的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T04:07:31.793

假设这个：

`from launchpage.models import EmailForm`

不应该`from launchpage.forms import EmailForm`

您遇到的另一个问题是`{'form': form,}`需要`{'form': form}`

最后，`{{ form.email }}`应该是简单的`{{ form }}`

最后提示 - 考虑使用自动发送适当请求上下文的[`render`快捷方式。](http://django.me/render)

# class - 将 Intellisense 描述添加到类

> ID：10202547
> 
> 赞同：0
> 
> 时间：2012-04-18T03:55:37.147
> 
> 标签：class, visual-c++, intellisense

我正在用 C++ 创建一个库，并且我希望在使用该库的程序员使用智能感知访问方法或字段时显示描述。

# java - Spring Maven 项目

> ID：10202548
> 
> 赞同：1
> 
> 时间：2012-04-18T03:55:39.833
> 
> 标签：java, spring, hibernate

嘿伙计们，当我尝试运行此应用程序时遇到问题。我没有收到编译错误，只是运行时错误。我想我错过了一些东西，但我不确定，有人可以帮助我了解我哪里出错了吗？从我可以看到`sessionFactory`applicationContext.xml 中的 bean 没有被创建。这是我的代码：

***主要的***

```
package com.apress.flexjava.usermanager.business;

import java.util.List;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import com.apress.flexjava.usermanager.dao.UserDao;
import com.apress.flexjava.usermanager.model.User;

public class Main {
    public static void main(String [] args){

        ApplicationContext context = new ClassPathXmlApplicationContext("applicationContext.xml");
        UserDao userDao = (UserDao)context.getBean("userDao");
        List<User> users = userDao.findAll();
        for (User user : users) {
            System.out.println(user.getForename() + " " + user.getSurname());
        }
    }
}

______________________________________________________________________________________ 
```

***用户道***

```
package com.apress.flexjava.usermanager.dao;

import java.util.List;

import com.apress.flexjava.usermanager.model.User;

public interface UserDao {
    List<User> findAll();
}
__________________________________________________________________________________ 
```

***UserDaoSpringJdbcImpl***

```
package com.apress.flexjava.usermanager.dao.jdbc;

import java.util.List;
import org.springframework.jdbc.core.simple.ParameterizedBeanPropertyRowMapper;
import org.springframework.jdbc.core.simple.SimpleJdbcDaoSupport;
import com.apress.flexjava.usermanager.dao.UserDao;
import com.apress.flexjava.usermanager.model.User;

public class UserDaoSpringJdbcImpl extends SimpleJdbcDaoSupport implements UserDao{

public List<User> findAll(){
    String sql= "SELECT * FROM users";
    return getSimpleJdbcTemplate().query(sql, ParameterizedBeanPropertyRowMapper.newInstance(User.class));  
    }
}

____________________________________________________________________________________ 
```

***用户***

```
package com.apress.flexjava.usermanager.model;

public class User {
    private int userid;
    private String forename;
    private String surname;

    public User(){}

    public User(int userid, String forename, String surname){
        this.userid = userid;
        this.forename = forename;
        this.surname = surname; 
    }

    public User(String forename, String surname){   
        this.forename = forename;
        this.surname = surname;
    }

    public int getUserid() {
        return userid;
    }

    public void setUserid(int userid) {
        this.userid = userid;
    }

    public String getForename() {
        return forename;
    }

    public void setForename(String forename) {
        this.forename = forename;
    }

    public String getSurname() {
        return surname;
    }

    public void setSurname(String surname) {
        this.surname = surname;
    }
}
_________________________________________________________________________________ 
```

***应用程序上下文.xml***

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee"
    xmlns:lang="http://www.springframework.org/schema/lang"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
                        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
                        http://www.springframework.org/schema/context 
                        http://www.springframework.org/schema/context/spring-context-2.5.xsd
                        http://www.springframework.org/schema/jee 
                        http://www.springframework.org/schema/jee/spring-jee-2.5.xsd
                        http://www.springframework.org/schema/lang 
                        http://www.springframework.org/schema/lang/spring-lang-2.5.xsd
                        http://www.springframework.org/schema/tx 
                        http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
                        http://www.springframework.org/schema/util 
                        http://www.springframework.org/schema/util/spring-util-2.5.xsd">

    <!-- @Required processor -->
    <bean class="org.springframework.beans.factory.annotation.RequiredAnnotationBeanPostProcessor" />

    <!-- Exception translation bean post processor -->
    <bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor"/>

    <bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
    <list>
    <value>classpath:jdbc.properties</value>
    </list>
    </property>
    </bean>

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name= "driverClassName" value="${jdbc.driverClassName}"/>
    <property name= "url" value="${jdbc.url}"/>
    <property name= "username" value="${jdbc.username}"/>
    <property name= "password" value="${jdbc.password}"/>
    </bean>

    <bean name="UserDao" class="com.apress.flexjava.usermanager.dao.jdbc.UserDaoSpringJdbcImpl">
    <property name="dataSource" ref="dataSource" />
    </bean>

    <!-- Hibernate SessionFactory -->
    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name = "configLocation" value = "classpath:hibernate.cfg.xml"/>
    <property name = "hibernateProperties">

    <value>
    hibernate.dialect= org.hibernate.dialect.MySQLDialect 
    hibernate.query.substitutions=true 'Y', false 'N'
    hibernate.cache.use_second_level_cache=true
    hibernate.cache.provider_class=org.hibernate.cache.EhCacheProvider
    hibernate.hbm2ddl.auto=update
    hibernate.use_sql_comments=true
    hibernate.show_sql=true 
    </value>

    </property>

    </bean>

</beans>

________________________________________________________________________________________ 
```

***jdbc 属性***

```
jdbc.driverClassName=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:3306/usermanager_test
jdbc.username=root
jdbc.password=password
_______________________________________________________________________________________ 
```

***pom.xml***

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.apress.flexjava</groupId>
  <artifactId>usermanager</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <name>UserManager</name>

<dependencies> 
  <dependency>
      <groupId>mysql</groupId>
      <artifactId>mysql-connector-java</artifactId>
      <version>5.1.6</version>
      <type>jar</type>
      <scope>compile</scope>  
  </dependency>

  <dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-context</artifactId>
  <version>2.5.6</version>
  </dependency>

  <dependency>
   <groupId>org.springframework</groupId>
   <artifactId>spring</artifactId>
   <version>2.5.6</version>
</dependency>

  <dependency>
  <groupId>mysql</groupId>
  <artifactId>mysql-connector-java</artifactId>
  <version>5.1.6</version>
  <type>jar</type>
  <scope>compile</scope>
  </dependency>
 </dependencies> 

</project>
____________________________________________________________________________ 
```

***控制台运行时错误：***

```
Apr 17, 2012 11:51:49 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@179c285: display name [org.springframework.context.support.ClassPathXmlApplicationContext@179c285]; startup date [Tue Apr 17 23:51:49 BOT 2012]; root of context hierarchy
Apr 17, 2012 11:51:49 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [applicationContext.xml]
Apr 17, 2012 11:51:49 PM org.springframework.context.support.AbstractApplicationContext obtainFreshBeanFactory
INFO: Bean factory for application context [org.springframework.context.support.ClassPathXmlApplicationContext@179c285]: org.springframework.beans.factory.support.DefaultListableBeanFactory@16a786
Apr 17, 2012 11:51:49 PM org.springframework.core.io.support.PropertiesLoaderSupport loadProperties
INFO: Loading properties file from class path resource [jdbc.properties]
Apr 17, 2012 11:51:49 PM org.springframework.beans.factory.support.DefaultSingletonBeanRegistry destroySingletons
INFO: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@16a786: defining beans [org.springframework.beans.factory.annotation.RequiredAnnotationBeanPostProcessor#0,org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0,propertyConfigurer,dataSource,UserDao,sessionFactory]; root of factory hierarchy
Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0' defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [applicationContext.xml]: Instantiation of bean failed; nested exception is java.lang.NoClassDefFoundError: org/hibernate/MappingException
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:480)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:880)
    at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:596)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:365)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at com.apress.flexjava.usermanager.business.Main.main(Main.java:15)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [applicationContext.xml]: Instantiation of bean failed; nested exception is java.lang.NoClassDefFoundError: org/hibernate/MappingException
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:883)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:839)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:440)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:308)
    at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:270)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.detectPersistenceExceptionTranslators(PersistenceExceptionTranslationInterceptor.java:122)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.<init>(PersistenceExceptionTranslationInterceptor.java:78)
    at org.springframework.dao.annotation.PersistenceExceptionTranslationAdvisor.<init>(PersistenceExceptionTranslationAdvisor.java:70)
    at org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor.setBeanFactory(PersistenceExceptionTranslationPostProcessor.java:97)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1326)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:473)
    ... 14 more
Caused by: java.lang.NoClassDefFoundError: org/hibernate/MappingException
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)
    at java.lang.Class.getConstructor0(Class.java:2699)
    at java.lang.Class.getDeclaredConstructor(Class.java:1985)
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:54)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:877)
    ... 32 more
Caused by: java.lang.ClassNotFoundException: org.hibernate.MappingException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 38 more 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T04:49:23.637

这个例外：

> 引起：java.lang.ClassNotFoundException: org.hibernate.MappingException at java.net.URLClassLoader$1.run(URLClassLoader.java:202) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass (URLClassLoader.java:190) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:306) 在 sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) 在 java.lang.ClassLoader.loadClass(ClassLoader.爪哇：247）... 38更多

表示您缺少项目中的 Hibernate 库。尝试将以下内容添加到您的 POM：

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate</artifactId>
    <version>3.5.4-Final</version>
</dependency> 
```

# objective-c - CLGeocoder 在其他国家/地区的返回位置

> ID：10202550
> 
> 赞同：9
> 
> 时间：2012-04-18T03:55:43.390
> 
> 标签：objective-c, ios, clgeocoder

我有以下代码：

```
CLGeocoder *_geo = [[CLGeocoder alloc] init];
CLRegion *region = [[CLRegion alloc] initCircularRegionWithCenter: CLLocationCoordinate2DMake(37.33233141, -122.03121860) radius:100 identifier:@"San Francisco"];
[_geo geocodeAddressString:@"Starbucks" inRegion:region
             completionHandler:^(NSArray *placemarks, NSError *error)
{
    NSLog("%@", placemarks);
}]; 
```

这将返回菲律宾的星巴克位置，即使该中心位于旧金山中部。

```
(NSArray *) $3 = 0x07cd9d10 <__NSArrayM 0x7cd9d10>(
Starbuck's, Metro Manila, Quezon City, Republic of the Philippines @ <+14.63617752,+121.03067530> +/- 100.00m, region (identifier <+14.63584900,+121.02951050> radius 166.35) <+14.63584900,+121.02951050> radius 166.35m
) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:12:32.187

这是一个对我有用的解决方法。我在使用`geocodeAddressString: completionHandler:`时没有考虑地区。

之后，我根据返回的地标构建一组地标，但仅包括最近的地标。

请注意，此代码不会检查是否有错误。我已将其删除以使其更简单。

```
CLLocation *centerLocation = [[CLLocation alloc] initWithLatitude:37.33233141 longitude:-122.03121860];

CLLocationDistance maxDistance = <YOUR_MAX_DISTANCE>;

CLGeocoder *geo = [[CLGeocoder alloc] init];
[geo geocodeAddressString:addressString
        completionHandler:^(NSArray *placemarks, NSError *error)
{
    NSMutableArray *filteredPlacemarks = [[NSMutableArray alloc] init];
    for (CLPlacemark *placemark in placemarks)
    {
        if ([placemark.location distanceFromLocation:centerLocation] <= maxDistance)
        {
            [filteredPlacemarks addObject:placemark];
        }
    }

    // Now do whatever you want with the filtered placemarks.
}]; 
```

或者，如果您想继续使用区域：`distanceFromLocation:`您可以使用`CLRegion`'s来比较距离，而不是与 比较距离`containsCoordinate:`。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T06:23:27.313

虽然看起来不太可能，但显然 a) Apple 不打算在某个地区附近对企业名称进行转发地理编码，或者 b) 这是一个错误。

CLGeocoder[参考](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html)在其概述中指出：

> 前向地理编码请求采用用户可读的地址并找到相应的纬度和经度值......

这当然意味着一个真实的物理地址作为搜索字符串（尤其是“用户可读地址”部分）。但是，文档`geocodeAddressString: inRegion: completionHandler:`说明搜索字符串是：

> ...描述您要查找的位置的字符串...

这更加模糊。我尝试通过我的几个项目运行您的代码，以及与它非常相似的代码，我得到了相同的结果。*甚至 Apple 的* [GeocoderDemo 示例](http://developer.apple.com/library/ios/#samplecode/GeocoderDemo/Introduction/Intro.html)也显示了该问题（尽管我住在加利福尼亚，距离您的经纬度示例仅约 150 英里），因此我们俩肯定都没有写过。

我开始寻求帮助/与您一起解决这个问题！但是，这一点是研究是我所拥有的。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T08:55:24.053

我修正了你的答案。你有一个错误，你翻转了 GPS 坐标。如果您像这样更改它们，则查询效果很好！

[http://maps.googleapis.com/maps/api/geocode/json?bounds=37.832331,-121.531219|36.832331,-122.531219&language=en&address=starbucks&sensor=true](http://maps.googleapis.com/maps/api/geocode/json?bounds=37.832331,-121.531219|36.832331,-122.531219&language=en&address=starbucks&sensor=true)

# deployment - 如何将 blohg 应用程序部署到 Dotcloud？

> ID：10202555
> 
> 赞同：0
> 
> 时间：2012-04-18T03:56:54.130
> 
> 标签：deployment, dotcloud

我用 blohg (http://blohg.org) 创建了一个动态网站，这是一个基于 Mercurial/Flask/reST 的博客引擎，它可以在我的机器上运行。我尝试按照[http://docs.blohg.org/deploy/](http://docs.blohg.org/deploy/)和[http://docs.dotcloud.com/services/python/](http://docs.dotcloud.com/services/python/)将网站/应用程序部署到 Dotcloud ，确保我的 dotcloud.yml 和 wsgi.py 文件在正确的地方。但是当我在我的 Dotcloud URL 上查看我的应用程序时，我得到了

```
 Internal Server Error
 The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application. 
```

我的 wsgi.py 文件是这样的：

```
from blohg import create_app
application = create_app('<my_app_name>') 
```

我不知道怎么了。

有什么方法可以打开调试模式来找出答案吗？你们中的任何人都成功地将 blohg 应用程序部署到 Dotcloud 吗？有小费吗？

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T04:20:19.563

您的存储库中有任何 utf-8 编码的内容吗？

如果是，请将其添加到 wsgi 文件的顶部：

```
import os
os.environ['HGENCODING'] = 'utf-8' 
```

这是 wsgi 脚本模板中的一个已知错误，将在下一个版本中修复。

如果没有，我需要深入了解 dotcloud 部署过程。

# open-source - 开源项目的个人代码签名

> ID：10202556
> 
> 赞同：7
> 
> 时间：2012-04-18T03:57:04.310
> 
> 标签：open-source, certificate, code-signing, authenticode

我正在为我的开源项目获得代码签名证书。我有几个关于他们的问题：

1.  作为一家开发开源项目的未注册公司，有没有办法通过验证过程？
2.  如果我将代码签名证书注册在我的个人名下，是否有任何风险（例如，身份被盗和跟踪）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T21:55:18.200

Certum (http://www.certum.pl) 为开源项目提供免费的代码证书。我知道 TortoiseSVN 和 AnkhSVN 项目使用他们的证书进行分发。

证书到期时签名到期的问题并非特定于证书提供者，而是取决于您如何签署证书。为了保持签名有效，您还应该签署时间戳。请参阅您的证书提供商的常见问题解答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T10:36:49.350

您可以作为个人获得证书。请参阅[开源项目的代码签名证书？](https://stackoverflow.com/q/1177552/145173)对于发行人。

当您以个人身份获得代码签名证书时，您必须证明您的身份。这涉及向发行公司提供识别信息，例如驾驶执照或护照。但是，被放入证书中的唯一识别信息（因此当您发布使用该证书签名的应用程序时会公开）是您的姓名和电子邮件地址。

# jquery - 带参数的 AJAX 获取请求失败（即不发送）

> ID：10202557
> 
> 赞同：0
> 
> 时间：2012-04-18T03:57:05.893
> 
> 标签：jquery, ajax, get

这有效：

```
$.get("/users/iq_leaderboard") 
```

但这失败了——事实上 jQuery 在这种情况下甚至不发送请求：

```
$.get("/users/iq_leaderboard?interval=week") 
```

一探究竟：

[http://dl.dropbox.com/u/2792776/screenshots/2012-04-17_2055.png](http://dl.dropbox.com/u/2792776/screenshots/2012-04-17_2055.png)

奇怪的是，如果我添加一个成功回调它会触发（即使请求没有发送）。对于所有带参数的 GET 请求，此问题仍然存在

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T04:05:34.147

首先，检查您的服务器端。如果没问题，请以正确的方式进行：

```
$.ajax({
    type: "GET",
    url: "/users/iq_leaderboard",
    data: {
        interval: "week"
    },
    success: function(data){
        console.log(data); // to debug only
    },
    dataType: "json" // in case you're returning json
}); 
```

试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T04:11:01.653

我总是这样

```
$.get("/users/iq_leaderboard",{interval:week},function(data){}); 
```

# matlab - 循环内不同值的轴标题

> ID：10202561
> 
> 赞同：0
> 
> 时间：2012-04-18T03:57:52.063
> 
> 标签：matlab, matlab-figure

```
q=[1, 4, 10, 50, 100];
for j=1:length(q)
    for i=1:q(j)
        Dq=D(1:q(j),1:q(j));
        Vq=V(1:q(j),1:q(j));
        Cq=C(1:q(j));
        Bq=B(1:q(j));
    end
    S = logspace(-8,4,500);
    k=1;
    for p=S
        Y(k)=Cq*Vq*inv(1i*p*eye(q(j))-Dq)*inv(Vq)*Bq;
        k=k+1;
    end
    figure;
    hold on

    subplot(2,1,1);
    semilogx(S,real(Y));
    grid; ylabel('|H(j\omega)|'); 
    title(['Bode Plot: Magnitude Response (Real)q=',q(j)]);

    subplot(2,1,2);
    semilogx(S,imag(Y));
    grid; xlabel('\omega (rad/sec)'); ylabel('\angleH(j\omega)'); 
    title(['Bode Plot: Phase Response (Imaginary) q = ',q(j)]);
end 
```

我想在标题中打印`q`例如`q=1`...的值。`q=100`代码工作正常，但它没有显示`q`标题中的值，特别是`q`我正在绘制的值。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T04:05:29.217

要为包含数值的标题创建字符串，请使用`num2str`：

```
title(['Bode Plot: Phase Response (Imaginary) q = ' num2str(q(j))]); 
```

# facebook-php-sdk - Facebook 应用程序错误

> ID：10202562
> 
> 赞同：0
> 
> 时间：2012-04-18T03:58:11.447
> 
> 标签：facebook-php-sdk, facebook-app-requests

今天是个好日子！我对应用程序有疑问。当我使用请求对话框时，我得到了带有请求 ID 的响应。这是代码：

```
<html xmlns:fb="http://www.facebook.com/2008/fbml">
<body>
<script src="http://connect.facebook.net/en_US/all.js"></script>
<div id="fb-root"></div>
<script>

FB.init({appId:'400884386588720', xfbml:true, cookie:true});

var too = new Array('100003484704320');
function send() {
    FB.ui({
        method:'apprequests',
        message:'http://wasm.ru',
        to:too
    }, function (response) {
        var request = response.request;
        var request_id = request + '_' + too[0];
        console.log(request_id);
    });
}
</script>
</body>
<input type="button" onclick="send(); return true;" value='Request'>
</html> 
```

但是用户看不到这个请求！当facebook页面刷新时，我可以看到通知，但加载后它消失了。

当我尝试使用 Graph Api 时，出现错误：[error] => stdClass Object ([message] => (#200) 所有参数 ID 中的用户都必须接受 TOS [type] => OAuthException [code] => 200 )

这是代码：

```
$token_url = "https://graph.facebook.com/oauth/access_token?" .
                    "client_id=" . $this->app_id.
                    "&client_secret=" . $this->secret .
                    "&grant_type=client_credentials";
$app_token = $this->request($token_url, 'POST');
$app_token = explode('=', $app_token);
$app_token = $app_token[1];

$message="Message with space and with link - http://wasm.ru";
$message = urlencode($message);

$url = 'https://graph.facebook.com/'.$user.'/apprequests?'.'message='.$message.'&access_token='.$app_token.'&method=post';
$res = $this->request($url, 'POST'); 
```

以及请求功能：

```
 $ch = curl_init();
    $options = array();
    $options[CURLOPT_URL] = $url;
    $options[CURLOPT_SSL_VERIFYPEER] = false;
    $options[CURLOPT_RETURNTRANSFER] = true;

    if($method == 'get') {
        $options[CURLOPT_HTTPGET] = true;
    } else {
        $options[CURLOPT_CUSTOMREQUEST]= 'POST';
    }
    curl_setopt_array($ch, $options);
    $response = curl_exec($ch);
    if($action == 'access_token'){
        return $response;
    }
    $response = json_decode($response);
    return $response; 
```

我找不到错误...帮助！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:27:34.547

您收到的错误消息（“param ids 中的所有用户必须已接受 TOS”）是因为您尝试将应用生成的请求发送给未连接到您的应用的用户。

在此处查看开发人员文档[https://developers.facebook.com/docs/requests/#app_to_user](https://developers.facebook.com/docs/requests/#app_to_user)。

使用请求对话框发送的请求和应用生成的请求不同，您不能使用应用生成的请求邀请用户加入您的应用。

# xcode - 在 Xcode Interface Builder 中，如何控制调整视图大小时元素的行为？

> ID：10202565
> 
> 赞同：0
> 
> 时间：2012-04-18T03:58:55.907
> 
> 标签：xcode, interface-builder

在较旧的 Xcode 中，我有一个小窗口，我可以在其中标记大括号和带状内容，以控制 NSView 在调整其父级大小时的行为。在缺少的新 Xcode 中，控件正在做他们想做的任何事情。

有没有办法让这个控制回来？（当前版本：版本 4.3.2 (4E2002)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T19:17:56.450

从 Xcode 4.3 开始，当您创建 Cocoa 应用程序项目时，xib 文件使用自动布局。自动布局取代了尺寸检查器的自动尺寸遮罩。

如果要使用自动调整大小的蒙版，解决方案是关闭自动布局。从项目导航器中选择 xib 文件，打开文件检查器，然后取消选中 Use Auto Layout 复选框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T04:12:03.833

阅读[*Constraints Express Relationships Between Views*](http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/constraintFundamentals.html)以了解 Xcode 4 中如何约束视图。事实上，您可能想要整个[*Cocoa Auto Layout Guide*](http://developer.apple.com/library/mac/documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html#//apple_ref/doc/uid/TP40010853-CH1-SW1)。

简而言之，当您将视图添加到视图层次结构时，它带有一些约束。选择视图中的视图，您会看到一些看起来有点像工字梁的蓝线——它们代表约束。单击其中一个，您可以在属性检查器中编辑其属性。但是，在您阅读了上面链接的文档中的约束如何工作之前，您应该如何设置属性可能没有多大意义。

# nginx - Nginx：使用 Samba 共享的“资源暂时不可用”

> ID：10202567
> 
> 赞同：7
> 
> 时间：2012-04-18T03:59:35.323
> 
> 标签：nginx, samba

我正在使用**Samba**共享的**Nginx** Web 服务器上进行开发。

 **每当我编辑 CSS 或 JS 文件时，当我重新加载我的网站 (F5) 时都会出现此错误。

> 2012/04/18 11:15:38 [crit] 29607#0: *47708 open() "/var/www/[...].js" 失败（11：资源暂时不可用），客户端：192.168.[ ...]，服务器：[...]，请求：“GET [...].js HTTP/1.1”，主机：“[...]”，引用者：“http://[... ]"

我需要再次刷新，错误就会消失。

[我在这里](http://forum.nginx.org/read.php?2,191155)发现有人和我有同样的问题，这可能是由**F_SETLEASE**引起的，但我找不到最终解决这个问题的方法。

有什么线索吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T17:55:04.200

这两个设置为我解决了同样的问题：

```
oplocks = no
level2 oplocks = no 
```**

# python - 在 pandas DataFrame 中查找列的值最大的行

> ID：10202570
> 
> 赞同：286
> 
> 时间：2012-04-18T03:59:55.663
> 
> 标签：python, pandas, dataframe, row, argmax

如何找到特定列的值**最大**的行？

`df.max()`会给我每列的最大值，我不知道如何获取相应的行。

* * *

## 回答 #1

> 赞同：314
> 
> 时间：2012-04-18T04:31:30.417

Use the pandas [`idxmax`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.idxmax.html) function. It's straightforward:

```
>>> import pandas
>>> import numpy as np
>>> df = pandas.DataFrame(np.random.randn(5,3),columns=['A','B','C'])
>>> df
          A         B         C
0  1.232853 -1.979459 -0.573626
1  0.140767  0.394940  1.068890
2  0.742023  1.343977 -0.579745
3  2.125299 -0.649328 -0.211692
4 -0.187253  1.908618 -1.862934
>>> df['A'].idxmax()
3
>>> df['B'].idxmax()
4
>>> df['C'].idxmax()
1 
```

*   Alternatively you could also use `numpy.argmax`, such as `numpy.argmax(df['A'])` -- it provides the same thing, and appears at least as fast as `idxmax` in cursory observations.

*   **`idxmax()` returns indices labels, not integers.**

*   Example': if you have string values as your index labels, like rows 'a' through 'e', you might want to know that the max occurs in row 4 (not row 'd').

*   if you want the integer position of that label within the `Index` you have to get it manually (which can be tricky now that duplicate row labels are allowed).

* * *

HISTORICAL NOTES:

*   `idxmax()` used to be called [`argmax()` prior to 0.11](https://pandas.pydata.org/pandas-docs/version/0.11.0/whatsnew.html)
*   [`argmax` was deprecated prior to 1.0.0 and removed entirely in 1.0.0](https://pandas.pydata.org/pandas-docs/version/1.0.0/whatsnew/v1.0.0.html)
*   back as of Pandas 0.16, `argmax` used to exist and perform the same function (though appeared to run more slowly than `idxmax`).
*   `argmax` function returned the *integer position* within the index of the row location of the maximum element.
*   **pandas moved to using row labels instead of integer indices.** Positional integer indices used to be very common, more common than labels, especially in applications where duplicate row labels are common.

For example, consider this toy `DataFrame` with a duplicate row label:

```
In [19]: dfrm
Out[19]: 
          A         B         C
a  0.143693  0.653810  0.586007
b  0.623582  0.312903  0.919076
c  0.165438  0.889809  0.000967
d  0.308245  0.787776  0.571195
e  0.870068  0.935626  0.606911
f  0.037602  0.855193  0.728495
g  0.605366  0.338105  0.696460
h  0.000000  0.090814  0.963927
i  0.688343  0.188468  0.352213
i  0.879000  0.105039  0.900260

In [20]: dfrm['A'].idxmax()
Out[20]: 'i'

In [21]: dfrm.iloc[dfrm['A'].idxmax()]  # .ix instead of .iloc in older versions of pandas
Out[21]: 
          A         B         C
i  0.688343  0.188468  0.352213
i  0.879000  0.105039  0.900260 
```

So here a naive use of `idxmax` is not sufficient, whereas the old form of `argmax` would correctly provide the *positional* location of the max row (in this case, position 9).

This is exactly one of those nasty kinds of bug-prone behaviors in dynamically typed languages that makes this sort of thing so unfortunate, and worth beating a dead horse over. If you are writing systems code and your system suddenly gets used on some data sets that are not cleaned properly before being joined, it's very easy to end up with duplicate row labels, especially string labels like a CUSIP or SEDOL identifier for financial assets. You can't easily use the type system to help you out, and you may not be able to enforce uniqueness on the index without running into unexpectedly missing data.

So you're left with hoping that your unit tests covered everything (they didn't, or more likely no one wrote any tests) -- otherwise (most likely) you're just left waiting to see if you happen to smack into this error at runtime, in which case you probably have to go drop many hours worth of work from the database you were outputting results to, bang your head against the wall in IPython trying to manually reproduce the problem, finally figuring out that it's because `idxmax` can *only* report the *label* of the max row, and then being disappointed that no standard function automatically gets the *positions* of the max row for you, writing a buggy implementation yourself, editing the code, and praying you don't run into the problem again.

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2012-04-18T15:51:32.550

您也可以尝试`idxmax`：

```
In [5]: df = pandas.DataFrame(np.random.randn(10,3),columns=['A','B','C'])

In [6]: df
Out[6]: 
          A         B         C
0  2.001289  0.482561  1.579985
1 -0.991646 -0.387835  1.320236
2  0.143826 -1.096889  1.486508
3 -0.193056 -0.499020  1.536540
4 -2.083647 -3.074591  0.175772
5 -0.186138 -1.949731  0.287432
6 -0.480790 -1.771560 -0.930234
7  0.227383 -0.278253  2.102004
8 -0.002592  1.434192 -1.624915
9  0.404911 -2.167599 -0.452900

In [7]: df.idxmax()
Out[7]: 
A    0
B    8
C    7 
```

例如

```
In [8]: df.loc[df['A'].idxmax()]
Out[8]: 
A    2.001289
B    0.482561
C    1.579985 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2014-09-10T20:55:04.853

如果有多行取最大值，上述两个答案都只会返回一个索引。如果你想要所有的行，似乎没有一个功能。但这并不难做到。以下是系列的示例；对 DataFrame 也可以这样做：

```
In [1]: from pandas import Series, DataFrame

In [2]: s=Series([2,4,4,3],index=['a','b','c','d'])

In [3]: s.idxmax()
Out[3]: 'b'

In [4]: s[s==s.max()]
Out[4]: 
b    4
c    4
dtype: int64 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2018-03-08T09:00:49.140

```
df.iloc[df['columnX'].argmax()] 
```

`argmax()`将提供与 columnX 的最大值对应的索引。`iloc`可用于获取此索引的 DataFrame df 的行。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2020-08-11T03:30:42.893

非常简单：我们有如下的df，我们想在C中打印一行最大值：

```
A  B  C
x  1  4
y  2  10
z  5  9 
```

在：

```
df.loc[df['C'] == df['C'].max()]   # condition check 
```

出去：

```
A B C
y 2 10 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2021-02-01T11:20:25.517

使用[query()](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.query.html)的更紧凑和可读的解决方案是这样的：

```
import pandas as pd

df = pandas.DataFrame(np.random.randn(5,3),columns=['A','B','C'])
print(df)

# find row with maximum A
df.query('A == A.max()') 
```

它还返回一个 DataFrame 而不是 Series，这对于某些用例来说很方便。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-03-20T14:17:39.297

直接的“.argmax()”解决方案对我不起作用。

[@ely](https://stackoverflow.com/users/567620/ely)提供的上一个示例

```
>>> import pandas
>>> import numpy as np
>>> df = pandas.DataFrame(np.random.randn(5,3),columns=['A','B','C'])
>>> df
      A         B         C
0  1.232853 -1.979459 -0.573626
1  0.140767  0.394940  1.068890
2  0.742023  1.343977 -0.579745
3  2.125299 -0.649328 -0.211692
4 -0.187253  1.908618 -1.862934
>>> df['A'].argmax()
3
>>> df['B'].argmax()
4
>>> df['C'].argmax()
1 
```

返回以下消息：

```
FutureWarning: 'argmax' is deprecated, use 'idxmax' instead. The behavior of 'argmax' 
will be corrected to return the positional maximum in the future.
Use 'series.values.argmax' to get the position of the maximum now. 
```

所以我的解决方案是：

```
df['A'].values.argmax() 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-11-26T14:48:56.900

如果您想要整行而不仅仅是`id`，您可以使用`df.nlargest`并传入您想要的“顶部”行数，您还可以传入您想要的列/列。

```
df.nlargest(2,['A']) 
```

将为您提供与 的前 2 个值相对应的行`A`。

用于`df.nsmallest`最小值。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-01-29T04:38:57.083

```
mx.iloc[0].idxmax() 
```

这行代码将告诉您如何从数据框中的一行中找到最大值，这里`mx`是数据框并`iloc[0]`指示第 0 个索引。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-07-05T19:00:44.137

DataFrame`idmax`返回具有最大值的行的标签索引，并且行为`argmax`取决于版本`pandas`（现在它返回警告）。如果要使用**位置索引**，可以执行以下操作：

```
max_row = df['A'].values.argmax() 
```

或者

```
import numpy as np
max_row = np.argmax(df['A'].values) 
```

请注意，如果您使用`np.argmax(df['A'])`的行为与`df['A'].argmax()`.

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-05-20T11:58:15.183

考虑到这个数据框

```
[In]: df = pd.DataFrame(np.random.randn(4,3),columns=['A','B','C'])
[Out]:
          A         B         C
0 -0.253233  0.226313  1.223688
1  0.472606  1.017674  1.520032
2  1.454875  1.066637  0.381890
3 -0.054181  0.234305 -0.557915 
```

假设一个想知道“C”列最大的行，以下将完成工作

```
[In]: df[df['C']==df['C'].max()])
[Out]:
          A         B         C
1  0.472606  1.017674  1.520032 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-10T00:24:21.813

如果最大值有联系，则`idxmax`仅返回第一个最大值的索引。例如，在以下 DataFrame 中：

```
 A  B  C
0  1  0  1
1  0  0  1
2  0  0  0
3  0  1  1
4  1  0  0 
```

`idxmax`返回

```
A    0
B    3
C    0
dtype: int64 
```

现在，如果我们想要所有索引对应于最大值，那么我们可以使用`max`+`eq`创建一个布尔数据帧，然后使用它`df.index`来过滤掉索引：

```
out = df.eq(df.max()).apply(lambda x: df.index[x].tolist()) 
```

输出：

```
A       [0, 4]
B          [3]
C    [0, 1, 3]
dtype: object 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-01-29T05:11:26.593

利用：

```
data.iloc[data['A'].idxmax()] 
```

`data['A'].idxmax()`-根据行查找最大值位置 `data.iloc(`) - 返回行

# xml - 如何使用 VB 6.0 生成格式良好的 XML 文件？

> ID：10202576
> 
> 赞同：4
> 
> 时间：2012-04-18T04:00:41.930
> 
> 标签：xml, vb6

我正在开发 Visual Basic 6.0 项目，我需要生成一个格式良好的 XML 文件，它看起来像这样：

```
<Myinfo>
      <FirstName>My First Name</FirstName>
      <LastName>My Last Name</LastName>
      <StreetAdd>My Address</StreetAdd>
<MyInfo> 
```

注意：我完成了生成 XML 文件的工作，但我仍然需要正确的格式，如上所示。

我生成的 XML 文件格式如下：

```
<Myinfo><FirstName>My First Name</FirstName><LastName>My Last Name</LastName><StreetAdd>My Address</StreetAdd><MyInfo> . 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:11:38.840

我制作了一台运行良好的小型 XML 漂亮打印机：

```
Sub PrettyPrint(Parent As IXMLDOMNode, Optional Level As Integer)
  Dim Node As IXMLDOMNode
  Dim Indent As IXMLDOMText

  If Not Parent.ParentNode Is Nothing And Parent.ChildNodes.Length > 0 Then
    For Each Node In Parent.ChildNodes
      Set Indent = Node.OwnerDocument.createTextNode(vbNewLine & String(Level, vbTab))

      If Node.NodeType = NODE_TEXT Then
        If Trim(Node.Text) = "" Then
          Parent.RemoveChild Node
        End If
      ElseIf Node.PreviousSibling Is Nothing Then
        Parent.InsertBefore Indent, Node
      ElseIf Node.PreviousSibling.NodeType <> NODE_TEXT Then
        Parent.InsertBefore Indent, Node
      End If
    Next Node
  End If

  If Parent.ChildNodes.Length > 0 Then
    For Each Node In Parent.ChildNodes
      If Node.NodeType <> NODE_TEXT Then PrettyPrint Node, Level + 1
    Next Node
  End If
End Sub 
```

您可以通过传入`DOMDocument`对象并将`Level`参数留空来调用它。

*   它对文档进行就地修改。
*   您将丢失所有可能存在的无关紧要的空白（XML 元素之间的空白）。
*   它使用一个制表符来缩进。
*   它还缩进注释和处理指令等。
*   它适用于所有版本的`DOMDocument`.

```
Dim XmlDoc as New MSXML2.DOMDocument40

' create/load your xml document

PrettyPrint XmlDoc

MsgBox XmlDoc.xml 
```

还有一种简单的方法可以[通过 SAX](https://stackoverflow.com/questions/1118576/how-can-i-pretty-print-xml-source-using-vb6-and-msxml)来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:17:34.907

您确实应该使用 XML 库来创建“正确”的 XML。它处理编码、数据格式等

```
Set XMLDoc = New DOMDocument
Set XMLRoot = XMLDoc.appendChild(XMLDoc.createElement("Myinfo"))
XMLRoot.appendChild(XMLDoc.createElement("FirstName")).Text = "My First Name"
XMLRoot.appendChild(XMLDoc.createElement("LastName")).Text = "My Last Name"
XMLRoot.appendChild(XMLDoc.createElement("StreetAdd")).Text = "My Address" 
```

`XMLDoc.xml`然后将输出有效的 XML，或者如果你真的想的话，你可以按照 Tomalak 的建议很好地打印它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T08:19:28.350

您需要计算标签的嵌套，并输出与嵌套深度相对应的缩进。类似的东西（原谅我糟糕的 VB6 语法）：

```
Int Nesting=0
Bool LastOutputWasText=false

Sub XMLIndent
   Do I=1,Nesting
     Print " ";
   End Do
End Sub

Sub XMLOutputOpenTag(String OpenTag)
    if LastOutputWasText then
      Print
    endif
    XMLIndent
    Nesting=Nesting+1
    Print OpenTag;
    LastOutputWasText=true
End Sub

Sub XMLOutputCloseTag(String CloseTag)
    ! Always call OpenTag and CloseTag with matching Tag names
    if !LastOutputWasText then
       XMLIndent
    endif
    Print CloseTag
    Nesting=Nesting-1
    LastOutputWasText=false
End Sub

Sub XMLOutputText(String Text)
    Print Text;
    LastOutputWasText=true
End Sub 
```

OP 留下来修改它以写入文件或任何他想要的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-22T21:44:28.200

Tomalak 的代码有一点改进，我在标签末尾添加了一个 vbNewLine：

```
Private Sub FormatOuterXml(ByRef Parent As IXMLDOMNode, Optional ByVal Lvl As Long = 0)

    If Parent.ParentNode Is Nothing Or Parent.ChildNodes.Length = 0 Then Exit Sub

    Dim xn0 As IXMLDOMNode, id0 As IXMLDOMText, id1 As IXMLDOMText
    Set id0 = Parent.OwnerDocument.createTextNode(vbNewLine & String(Lvl, vbTab))

    If Lvl > 0 Then Set id1 = Parent.OwnerDocument.createTextNode(vbNewLine & String(Lvl - 1, vbTab))

    For Each xn0 In Parent.ChildNodes
        If xn0.NodeType = MSXML2.NODE_TEXT Then
            If LenB(xn0.Text) = 0 Then Parent.RemoveChild xn0
        ElseIf xn0.PreviousSibling Is Nothing Then
            Parent.InsertBefore id0.CloneNode(True), xn0
        ElseIf xn0.PreviousSibling.NodeType <> MSXML2.NODE_TEXT Then
            Parent.InsertBefore id0.CloneNode(True), xn0
        ElseIf xn0.NextSibling Is Nothing Then
            If Not id1 Is Nothing Then Parent.appendChild id1.CloneNode(True)
        End If
    Next xn0

    If Parent.ChildNodes.Length > 0 Then
        For Each xn0 In Parent.ChildNodes
            If xn0.NodeType <> MSXML2.NODE_TEXT Then FormatOuterXml xn0, Lvl + 1
       Next xn0
    End If

End Sub 
```

# ios - 为 iOS 的 Google Maps Location 构建 URL

> ID：10202577
> 
> 赞同：0
> 
> 时间：2012-04-18T04:00:58.233
> 
> 标签：ios, google-maps, ios5, uiwebview

我创建了一个网络视图来打开谷歌地图。通过 CLLocationManager 获取位置没有问题。但是，我需要指定这样的查询字符串：“hospital loc: [latitude], [longitude]” 放入搜索框中以查找最近的医院。在我的网络视图中加载“maps.google.com”后如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T04:02:56.187

**尝试这个 ：**

```
http://maps.google.com/?q=hospital+loc:+[latitude],+[longitude] 
```

**备注：**

1.  显然替换为您想要的纬度，经度坐标
2.  请记住正确编码传递给的参数`q=`

# c - 使用嵌套结构存储数据

> ID：10202581
> 
> 赞同：4
> 
> 时间：2012-04-18T04:01:38.340
> 
> 标签：c, pointers, struct

我正在尝试为基于文本的菜单系统存储导航信息，但不确定最好的方法。每个菜单都有一个状态编号，并包含几个命令，每个命令都指向另一个状态。命令的数量随每个状态而变化，命令的长度也是如此——“1”、“Y”、“myfilename”在不同点都是有效的命令。

我目前的想法是使用嵌套结构，并使用指针来应对可变命令长度/数量：

```
// Smallest useful unit - a single command-state pair
typedef struct {
    char *command;
    uint16 next_state;
} cs;

cs test1 = {"1", 100};
cs test2[] = {{"foo", 200}, {"bar", 201}};

// Every command-state pair for a particular state
typedef struct {
    uint8 command_count;
    cs *all_cs[];
} one_state;

one_state all_states[NUMBER_OF_STATES]; 
```

我想要的是以这样一种方式存储导航信息，以便通过特定状态的命令轻松索引，以便测试用户是否输入了有效命令。

有没有更好的方法，或者我在正确的轨道上？感谢您的任何回复。

# c# - 使用 Dapper 映射超过 5 种类型

> ID：10202584
> 
> 赞同：18
> 
> 时间：2012-04-18T04:01:45.843
> 
> 标签：c#, sql, dapper

我目前正在构建一个将 12 个表连接在一起的 SELECT 查询。我一直在使用 Dapper 进行所有其他查询，并且效果很好。问题是，泛型方法只有五个泛型参数。

我之前修改了代码以支持最多 6 个用于另一个查询，但现在我真的认为我不应该再破解 6 个级别的泛型。

有没有办法将一个类型的数组传递给 dapper，并将结果作为一个对象数组返回，如果必须，我可以手动转换？

我也可能以错误的方式解决问题！任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-06-25T10:18:35.060

在我从事的一个项目中，我看到类似这样的东西可以映射超过 7 种类型。我们使用了 Dapper 1.38：

```
connection.Query<TypeOfYourResult>
(
   queryString,
   new[]
   {
      typeof(TypeOfArgument1),
      typeof(TypeOfArgument2),
      ...,
      typeof(TypeOfArgumentN)
   },
   objects =>
   {
      TypeOfArgument1 arg1 = objects[0] as TypeOfArgument1;
      TypeOfArgument2 arg2 = objects[1] as TypeOfArgument2;
      ...
      TypeOfArgumentN argN = objects[N] as TypeOfArgumentN;

     // do your processing here, e.g. arg1.SomeField = arg2, etc.
     // also initialize your result

     var result = new TypeOfYourResult(...)

     return result;
   },
   parameters,
   splitOn: "arg1_ID,arg2_ID, ... ,argN_ID"
); 
```

queryString 是不言自明的。splitOn 参数说明 Dapper 应该如何从 SELECT 语句中拆分列，以便所有内容都可以正确映射到对象， [您可以在此处阅读有关它的信息](https://www.tritac.com/blog/dappernet-by-example/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T05:29:08.080

您可以使用动态查询并在之后对其进行映射。像这样的东西

```
var result = conn.Query<dynamic>(query).Select(x => new Tuple<Type1, Type2, Type3, Type4, Type5>( 
// type initialization here 
    new Type1(x.Property1,x.Property2),
    new Type2(x.Property3,x.Property4),
    new Type3(x.Property5,x.Property6) etc....)); 
```

编辑：对于相当大的结果集，另一种选择可能是使用多个查询，然后使用网格阅读器。这可能对你有用。

有一个取自精致时代的例子：

```
var sql = 
@"
select * from Customers where CustomerId = @id
select * from Orders where CustomerId = @id
select * from Returns where CustomerId = @id";

using (var multi = connection.QueryMultiple(sql, new {id=selectedId}))
{
   var customer = multi.Read<Customer>().Single();
   var orders = multi.Read<Order>().ToList();
   var returns = multi.Read<Return>().ToList();
   ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-10T17:58:01.687

很久以前就已经回答了，但我想在这里加两分钱。与其手动修改 Dapper 的源代码，不如直接用这些字段创建一个 poco 类，然后像使用表格一样使用查询？

映射可以正常工作，我知道进行该类定义也很痛苦，但似乎比处理以后的 Dapper 更新更容易。

# python - Python 3 如何从标准输入上的文件生成 md5 哈希？

> ID：10202585
> 
> 赞同：1
> 
> 时间：2012-04-18T04:02:05.273
> 
> 标签：python, string, buffer, md5

我正在尝试使用 Python 3 从标准输入计算文件的 md5 哈希

这是返回的错误消息。我不明白为什么它不返回 md5 哈希。任何帮助表示赞赏。

```
$./pymd5.py < tmp.pdf
Traceback (most recent call last):
  File "./pymd5.py", line 29, in <module>
    main()
  File "./pymd5.py", line 25, in main
    print(m.hexdigest())
TypeError: 'str' does not support the buffer interface
$ 
```

编码：

```
#!/usr/local/bin/python3.2

import sys
import hashlib

BUFSIZE = 4096

def make_streams_binary():
    sys.stdin  = sys.stdin.detach()
    sys.stdout = sys.stdout.detach()

def main():
    make_streams_binary()
    m = hashlib.md5()
    while True:
        data = sys.stdin.read(BUFSIZE)
        if not data:
            break
        m.update(data)

    print(m.hexdigest())

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T04:14:14.943

当你这样做

```
sys.stdout = sys.stdout.detach() 
```

`print`它消除了在 Python 3 的终端上正常运行的能力，因为您[得到的是一个缓冲区，而不是一个为编码和解码包装的缓冲区](http://docs.python.org/library/io.html#io.TextIOBase.detach)。在你之前`print`，你应该做：

```
sys.stdout = sys._stdout 
```

要把原件拿`stdout`回来。

# java - Maven Web应用程序-通过sysdeo插件运行Tomcat不检索.properties

> ID：10202588
> 
> 赞同：0
> 
> 时间：2012-04-18T04:02:12.197
> 
> 标签：java, eclipse, tomcat, plugins

我正在将 Maven-spring-hibernate 用于具有模块化方法的 Web 应用程序，为不同的组件提供 JAR 文件，并在最后将它们构建到 Web 应用程序中。

我有以下 JAR，其中包含一个带有属性文件的 META-INF 文件夹（`database.properties`带有用户名/密码）。

```
common-model-1.0.0.jar 
```

我也有其他组件 JAR，它们也使用数据库连接。

```
common-service-1.0.0.jar
master-1.0.0.jar
master-model-1.0.0.jar
master-service-1.0.0.jar 
```

当我从命令行（catalina 启动/停止）开始部署到 Tomcat 时，应用程序运行良好。

**但是当我使用 Sysdeo Eclipse Tomcat 插件从 Eclipse 内部运行 Tomcat 时，它会引发以下异常**

```
Could not obtain connection to query metadata java.sql.SQLException: ORA-01005: null password given; logon denied 
```

有什么我可能错过的配置吗？

当我调试 jpa 日志时发现以下

```
09:27:47,765 DEBUG [org.springframework.jndi.JndiTemplate] - Looking up JNDI object with name [dev.username]
09:27:47,765 DEBUG [org.springframework.jndi.JndiPropertySource] - JNDI lookup for name [dev.username] threw NamingException with message: Name dev.username is not bound in this Context. Returning null.
09:27:47,765 DEBUG [org.springframework.core.env.PropertySourcesPropertyResolver] - Searching for key 'dev.username' in [systemProperties]
09:27:47,765 DEBUG [org.springframework.core.env.PropertySourcesPropertyResolver] - Searching for key 'dev.username' in [systemEnvironment]
09:27:47,765 DEBUG [org.springframework.core.env.PropertySourcesPropertyResolver] - Could not find key 'dev.username' in any property source. Returning [null]
09:27:47,765 DEBUG [org.springframework.core.env.PropertySourcesPropertyResolver] - Searching for key 'dev.username' in [localProperties]
09:27:47,766 DEBUG [org.springframework.core.env.PropertySourcesPropertyResolver] - Found key 'dev.username' in [localProperties] with type [String] and value 'cms_ownr'
09:27:47,766 DEBUG [org.springframework.core.env.PropertySourcesPropertyResolver] - Searching for key 'dev.password' in [environmentProperties]
09:27:47,766 DEBUG [org.springframework.core.env.PropertySourcesPropertyResolver] - Searching for key 'dev.password' in [servletConfigInitParams]
09:27:47,766 DEBUG [org.springframework.core.env.PropertySourcesPropertyResolver] - Searching for key 'dev.password' in [servletContextInitParams]
09:27:47,766 DEBUG [org.springframework.core.env.PropertySourcesPropertyResolver] - Searching for key 'dev.password' in [jndiProperties]
09:27:47,766 DEBUG [org.springframework.jndi.JndiTemplate] - Looking up JNDI object with name [java:comp/env/dev.password]
09:27:47,766 DEBUG [org.springframework.jndi.JndiLocatorDelegate] - Converted JNDI name [java:comp/env/dev.password] not found - trying original name [dev.password]. javax.naming.NameNotFoundException: Name dev.password is not bound in this Context
09:27:47,766 DEBUG [org.springframework.jndi.JndiTemplate] - Looking up JNDI object with name [dev.password]
09:27:47,766 DEBUG [org.springframework.jndi.JndiPropertySource] - JNDI lookup for name [dev.password] threw NamingException with message: Name dev.password is not bound in this Context. Returning null.
09:27:47,767 DEBUG [org.springframework.core.env.PropertySourcesPropertyResolver] - Searching for key 'dev.password' in [systemProperties]
09:27:47,767 DEBUG [org.springframework.core.env.PropertySourcesPropertyResolver] - Searching for key 'dev.password' in [systemEnvironment]
09:27:47,767 DEBUG [org.springframework.core.env.PropertySourcesPropertyResolver] - Could not find key 'dev.password' in any property source. Returning [null]
09:27:47,767 DEBUG [org.springframework.core.env.PropertySourcesPropertyResolver] - Searching for key 'dev.password' in [localProperties]
09:27:47,767 DEBUG [org.springframework.core.env.PropertySourcesPropertyResolver] - Found key 'dev.password' in [localProperties] with type [String] and value 'cms_ownr' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T10:07:49.127

终于我的问题解决了。

我有 sts eclipse 与 tomcat 6.x

我正在使用 Sysdeo tomcatPluginV32.zip

现在我安装了最新的 Sysdeo tomcatPluginV33.zip，它现在工作正常。

# php - 如何仅对一个组件数据强制执行 joomla 搜索

> ID：10202592
> 
> 赞同：1
> 
> 时间：2012-04-18T04:02:42.327
> 
> 标签：php, mysql, joomla, joomla2.5

默认情况下，joomla(2.5) 搜索模块仅搜索文章、类别、网络链接等，但我想增强功能以​​使其从一个组件数据中搜索表数据，而留下其他搜索条件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:14:01.637

经过谷歌搜索和头脑风暴后，我自己找到了解决方案，所以我想与你分享。

```
In Joomla we have to create a plugin to enhance features of search
module.

If we want that the "search module" to search data from our custom
compenents then we have to create a plugin for that. This link is
very useful while creating  a joomla search plugin
"http://docs.joomla.org/Creating_a_search_plugin".

once a plugin is created you need to zip the folder and then upload
your plugin through the joomla "Extension Manager" in the admin
panel.

If you want to have only search criteria from the component and not
articles, weblinks, categories etc "disable" these plugins. 
```

# meteor - Meteor 应用程序中的元素保存错误

> ID：10202599
> 
> 赞同：6
> 
> 时间：2012-04-18T04:03:54.523
> 
> 标签：meteor

我在 Meteor 中做了一个 watch-as-I-type 实时聊天服务，但我在 Meteor 中的内置元素保存功能上遇到了问题。基本上，当其中的文本输入具有焦点时，我需要不更新当前的聊天消息 div。该文档具有以下说明：

> 手写应用程序中的另一个棘手问题是元素保存。假设用户在一个元素中输入文本，然后包含该元素的页面区域被重绘。用户可能会遇到颠簸，因为焦点、光标位置、部分输入的文本和重音字符输入状态将在重新创建时丢失。
> 
> 这是 Meteor 自动解决的另一个问题。只需确保您的每个可聚焦元素都具有唯一的 id，或者在具有 id 的最近的父级中具有唯一的名称。Meteor 将保留这些元素，即使它们的封闭模板被重新渲染，但仍会更新它们的子元素并复制任何属性更改。

按照这些指示，我为我的输入字段设置了一个唯一的 ID，以确保在我输入时它不会被重新渲染。但现在我面临以下两个问题：

**其他人的聊天消息会在他们键入时更新，但在我键入自己的消息时此更新会暂停。一旦我停止输入（即使我的输入字段有焦点），他们的消息就会再次开始更新。**

**创建新消息并插入其 div 时，即使其输入字段具有焦点，我的消息也会更新/重新呈现。这会导致它突然失去焦点。**

您可以在[http://babble.im](http://babble.im)的同一聊天室中使用两台不同的计算机/用户进行测试。

这是 Meteor 代码中的错误，还是我自己的错误？我怎样才能知道？

编辑：

啊，我想我找到了第一个问题的原因：

> Meteor 通常会批量处理任何需要的更新并仅在您的代码未运行时执行它们。这样，您可以确定 DOM 不会从您的下方发生变化。有时你想要相反的行为。例如，如果您刚刚在数据库中插入了一条记录，您可能希望强制更新 DOM，以便您可以使用 jQuery 之类的库来查找新元素。在这种情况下，调用 Meteor.flush 立即更新 DOM。

我猜我的代码在用户输入时正在运行，所以 DOM 没有被更新。我会尝试使用`Meteor.flush`来修复它。现在第二个问题是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T00:00:25.727

第一个问题的原因是 Meteor 在任何方法运行时都会冻结对本地数据库缓存的所有更改。Meteor 0.5.1 对此进行了改进，仅冻结对您在本地修改的文档的更改。我怀疑 Meteor 0.5.1 解决了这个问题。有关更多信息，请参阅[http://meteor.com/blog/2012/11/19/latency-compensation-improvements-coming-soon-in-meteor-051](http://meteor.com/blog/2012/11/19/latency-compensation-improvements-coming-soon-in-meteor-051)。

Meteor 0.4.2 中添加的软件包可能解决了第二个问题`preserve-inputs`，但如果没有更多细节就很难确定。

我很想知道您的问题在当前版本的 Meteor 中是否仍然存在！

# regex - R regexp ignore.case 和固定不一起工作

> ID：10202600
> 
> 赞同：0
> 
> 时间：2012-04-18T04:03:55.270
> 
> 标签：regex, r

我想使用 regexpr("Hello :)","hello :)",fixed=TRUE,ignore.case=TRUE)

但 R 忽略了 ignore.case

这在R中可能吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T04:12:36.577

它应该这样做。来自 ?regexpr

```
fixed: logical.  If ‘TRUE’, ‘pattern’ is a string to be matched as
      is.  Overrides all conflicting arguments. 
```

不区分大小写当然是一个相互矛盾的论点。

这有效：使用小写模式，并将要匹配的字符串转换为小写：

```
regexpr("hello :)", tolower("Hello :)"),fixed=TRUE) 
```

# php - 会话变量未设置

> ID：10202602
> 
> 赞同：1
> 
> 时间：2012-04-18T04:04:41.747
> 
> 标签：php

我有一个需要用户名和密码的网站。正确输入后，将创建用户名会话变量。但是，当我进入另一个页面并检查是否设置了变量时，我得到了错误。

这是我设置变量的代码。

$用户名 = $_POST["用户名"]; $password = $_POST["密码"];

```
if ($username == "right username" || $password == "rigthpassword"){

    session_start();

    $_SESSION["username"] = "aadsj2als378909382lkklja";
    $_SESSION["password"] = "ajklsd89798798jlk09779023";

} 
```

然后，我有一个 php 脚本来检查用户是否已登录。如果用户已登录，那么它会转到一个页面，如果没有，它会转到另一个页面。但是，如果用户未登录但用户已登录，它会转到应该转到的页面。

```
<?php session_start();

    if(!isset($_SESSION["username"])){

        header('Location:http://website.com/page1.php');

    } else {

        header('Location:http://website.com/page2.php');

    }

?> 
```

因此，在我登录后，我点击了运行此脚本的链接。不是把我带到第 2 页，而是把我带到第 1 页。它不应该这样做。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T05:03:03.793

好吧，这可能有点明显，但是有了这个......

```
if ($username == "right username" || $password == "rigthpassword"){

    session_start();

    $_SESSION["username"] = "aadsj2als378909382lkklja";
    $_SESSION["password"] = "ajklsd89798798jlk09779023";

} 
```

您如何检索这些值？我假设您正在使用 post 方法。这意味着它应该更符合...的性质

```
 if ($_POST['username'] == "right username" || $_POST['password'] == "rigthpassword"){
session_start();

        $_SESSION["username"] = "aadsj2als378909382lkklja";
        $_SESSION["password"] = "ajklsd89798798jlk09779023";
    } 
```

我的猜测是您必须不正确地发送变量。您可以发布登录表单的代码吗？

登录.html

```
<form method="POST" action="http://mysite.com/login.php">
<input type="text" name="username">
<input type="password" name="password">
<input type="submit">
</form> 
```

登录.php

```
<?php
session_start();
if ($_POST['username'] == "password" && $_POST['password'] == "password") {
$_SESSION['username'] == "aadsj2als378909382lkklja";
$_SESSION['password'] == "ajklsd89798798jlk09779023";
}
?> 
```

其他页面.php

```
<?php
session_start();
if (!isset($_SESSION['username'])){
header("location: http://website.com/page1.php");
} else {
header("location: http://website.com/page1.php");
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T04:12:59.277

1.  session_start(); 函数使用页面顶部（php一个标签后没有换行符）

2 if ($username == "rightusername" && $password == "rigthpassword"){

```
$_SESSION["username"] = "aadsj2als378909382lkklja";
$_SESSION["password"] = "ajklsd89798798jlk09779023"; 
```

}

像这样更改代码，测试 $username,$password 内容..

# xcode - ScrollView 不会滚动，xcode 4.2.1

> ID：10202606
> 
> 赞同：0
> 
> 时间：2012-04-18T04:05:36.793
> 
> 标签：xcode, user-interface, view, scroll

我在 xcode 4.2.1 中使用 Interface Builder 故事板

我已经为滚动视图制作了一个新的 .h 和 .m 文件。

我听到人们谈论将 contentSize 设置为某些东西，但我不知道该怎么做。有人可以帮忙吗？

我想要的是一个简单的滚动视图，我可以在其中插入文本和图像。它必须滚动。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T04:14:40.000

您必须为您的图像或其他视图可以滚动的滚动视图设置内容大小。这将是所有视图的总大小。您可以设置内容大小如下：

```
[scrollView setContentSize: CGSizeMake(scrollView.bounds.size.width * numberOfPages, scrollView.bounds.size.height)] ; 
```

# mysql - SQL REPLACE INTO 不起作用

> ID：10202610
> 
> 赞同：1
> 
> 时间：2012-04-18T04:06:46.707
> 
> 标签：mysql, insert, replace

所以我有一个表单，可以通过其 ID（自动递增列（主键））从数据库中获取数据，并`<input>`通过值属性显示标签中的所有字段。当我提交表单时，如果 ID 列中的 ID 不存在，我希望它插入一个新行，如果它存在，我想用相同的 ID 更新行中的其余数据。

我一直在尝试对此进行研究，但似乎没有人在做我想做的事情，它总是略有不同。我找到了一个 REPLACE INTO 并创建了它，如下所示：

```
$sqlString = 'REPLACE INTO coursework
SET cwID=`'. $cwID .'`,
cwTitle=`'. $cwTitle .'`,
cwContent=`'. $cwContent .'`,
cwProgress=`'. $cwProgress .'`,
cwDue=`'. $cwDue .'`; 
```

所有 $cw[] 变量都是从 $_POST 方法接收的内容。

我不断收到*错误代码：1054-'字段列表'中*的未知列'6'-“未知列'6'”是mysql试图调用$cwID（$_POST ['cwID']的值）而不是cwID列（这是我的表的主键）。我觉得我缺少一些简单而愚蠢的东西，但我以前从未使用过这种 REPLACE INTO 方法。

我看到了一个帖子`INSERT IGNORE INTO`，`INSERT ... ON DUPLICATE KEY UPDATE`但是这两个听起来都比我要找的更具破坏性。

我只想确保如果 cwID 存在并且自动增量保持不变，则更新表，或者如果没有 ID，则添加新行。我应该只运行一个 SELECT 查询来查看它是否存在并适当地插入/更新吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T04:11:15.257

~~删除~~用单引号 (') 替换围绕字符串的反引号 (`)。

MySql 正在尝试查找由您用作值的字符串命名的列。

见[http://dev.mysql.com/doc/refman/5.5/en/identifiers.html](http://dev.mysql.com/doc/refman/5.5/en/identifiers.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T04:14:57.667

用单引号替换反引号：

```
$sqlString = 
 "REPLACE INTO coursework SET cwID='$cwID', cwTitle='$cwTitle', cwContent='$cwContent', cwProgress='$cwProgress', cwDue='$cwDue'"; 
```

另外，请注意这`"`将插入您的变量。

# c++ - “错误 LNK2019：未解析的外部符号”是什么意思？

> ID：10202612
> 
> 赞同：1
> 
> 时间：2012-04-18T04:07:17.143
> 
> 标签：c++

我正在尝试运行一个程序，但它不会编译，我得到错误。我已经改变了一些东西，但似乎没有用。代码是这样的：

```
#include <iostream>
#include <string>
#include "StackLS.h"
using namespace std;

 int main()
   {
int answer;
char symbol;
char n, N;
StackLS stack;
bool balenced = true;

      do {
    cout << " ********** MENU ********** " << endl;
    cout << " 1\. Basic Brackets () " << endl;
    cout << " 2\. Standard Brackets ()[]{} " << endl;
    cout << " 3\. User-Defined brackets " << endl;
    cout << " Please enter your choice: " << endl;

switch (answer){
case 1: 
    cout << "Current Setting: () " << endl;
    cout << "Enter your expression followed by a ; : " << endl;
    cin >> symbol;

    do {    

      if (symbol = '(')
    stack.push( '(' );
      else 
      if (symbol = ')' )
      {
      if (stack.isEmpty())
        balenced = false;
            else {
              symbol = stack.top();
        stack.pop();
    }
if (balenced)
    cout << "Expression is well-formed" << endl;
else
    cout << "Expression is not well-formed" << endl;
       }
           }
    while (symbol != ';' && balenced);
    stack.pop();

        }
       }
      while (answer != 'n' || 'N');

    } // end main 
```

我还没有完成程序。在继续下一个案例之前，我想确保我到目前为止所拥有的内容能够编译。现在我将发布我遇到的错误。他们是：

1.  1>e:\c++ language 2\well-formed expression checker solution\well-formed expression checker project\main.cpp(11): warning C4101: 'n' : unreferenced local variable

2.  1>e:\c++ language 2\well-formed expression checker solution\well-formed expression checker project\main.cpp(11): warning C4101: 'N' : unreferenced local variable

3.  1>e:\c++ language 2\well-formed expression checker solution\well-formed expression checker project\main.cpp(22): warning C4700: uninitialized local variable 'answer' used

1>ManifestResourceCompile: 1> 所有输出都是最新的。

1.  1>main.obj : 错误 LNK2019: 函数 _main 中引用的未解析外部符号“public: int __thiscall StackLS::top(void)const” (?top@StackLS@@QBEHXZ)

2.  1>main.obj：错误 LNK2019：函数 _main 中引用的未解析外部符号“public：void __thiscall StackLS::push(int const &)”(?push@StackLS@@QAEXABH@Z)

3.  1>E:\C++ language 2\Well-Formed Expression Checker Solution\Debug\Well-Formed Expression Checker Project.exe : 致命错误 LNK1120: 2 unresolved externals

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T04:11:23.563

警告就是——警告。它们不会阻止您的程序编译，但您应该查看它们并尝试修复它们。

您的程序实际上可以编译；错误使其无法*链接*。这意味着在您的代码被编译成机器代码并将其构建到`*.exe`文件中之后，结果发现某些部分丢失了。该文件看起来好像`StackLS.h`带有 C++ 源文件，或 *.lib 或 *.dll 文件；无论您拥有什么，都需要在构建可执行文件时包含这些内容，以提供那些缺失的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T04:12:41.253

它已经编译，你得到了一些关于未使用变量的警告。链接失败，因此您缺少的是实现 StackLS 的文件。

仅包括标题并不会使它们“实现”。

所以你需要像 StackLS.cpp 之类的东西

你没有发布那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T04:16:24.673

您的程序使用了一个名为 StackLS 的库。这可能是预编译的库或一些源代码。

您可以使用 , 添加对该库的引用`#include "StackLS.h"`，以允许编译器编译您的代码。这将创建代码的编译版本。

下一阶段是将已编译的代码与已编译的 StackLS 库链接起来。这是链接器的工作。如今，同一个程序（编译器）通常也会进行执行此步骤所需的所有调用（尽管您可以链接自己），尽管从技术上讲，它是编译的不同步骤。

如果 StackLS 是你的代码，那么你也必须编译它，或者如果它是一个预编译的库，你需要告诉链接器在哪里找到它。

在您的 make 文件中，您需要添加对 StackLS 源代码或库的引用（在这种情况下，它通常是 .dll 或 .lib 类型的文件）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T04:13:21.213

问题（可能）不在于您的代码，而在于您调用编译器/链接器的方式。

您需要编译定义和定义的源文件，`int StackLS::top() const`并将`void StackLS::push(int const &)`结果提供给链接器，在链接可执行文件时。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-18T04:13:43.300

删除行：

字符 n, N; StackLS 堆栈；

看看你怎么走。

# java - OpenJPA - 实例的 id 字段在查询时返回 null

> ID：10202616
> 
> 赞同：0
> 
> 时间：2012-04-18T04:07:55.723
> 
> 标签：java, jpa, openjpa

我正在使用 Apache CXF（2.5.2 版）来实现 REST 服务，这些服务可以在数据库表上添加、更新、删除、查询单个记录和记录列表。我在持久层中使用 OpenJPA（版本 2.2.0）。

例如，我有一个名为 Complaint 的表，映射到同名的实体类。投诉实体与此类似：

```
import java.io.Serializable;
import java.sql.Timestamp;  

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.Table; 

/**
 * The persistent class for the "Complaint" database table.
 * 
 */
@Entity
@Table(name = "Complaint")
@NamedQueries({
        @NamedQuery(name = "cmplById", query = "SELECT c FROM Complaint c WHERE c.id = ?1"),
        @NamedQuery(name = "cmplBySearchCriteria", query = "SELECT c FROM Complaint c WHERE  c.status = ?1 AND c.category = ?2 AND c.location = ?3 AND "
                + "c.reportDate BETWEEN ?4 AND ?5 ORDER BY c.id DESC")

})

public class Complaint implements Serializable {
    private static final long serialVersionUID = 1L;

    private Integer id;

    private String description;

    private String location;

    private Timestamp reportDate;

    private String reportedBy;

    private String status;

    private String category;

    public Complaint() {
    }

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "Id", nullable = false)
    public Integer getId() {
        return this.id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    @Column(name = "Description")
    public String getDescription() {
        return this.description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    @Column(name = "Location")
    public String getLocation() {
        return this.location;
    }

    public void setLocation(String location) {
        this.location = location;
    }

    @Column(name = "ReportDate", nullable = false)
    public Timestamp getReportDate() {
        return this.reportDate;
    }

    public void setReportDate(Timestamp reportDate) {
        this.reportDate = reportDate;
    }

    @Column(name = "ReportedBy", nullable = false)
    public String getReportedBy() {
        return this.reportedBy;
    }

    public void setReportedBy(String reportedBy) {
        this.reportedBy = reportedBy;
    }

    @Column(name = "Status", nullable = false)
    public String getStatus() {
        return this.status;
    }

    public void setStatus(String status) {
        this.status = status;
    }

    @Column(name = "Category", nullable = false)
    public String getCategory() {
        return category;
    }

    public void setCategory(String category) {
        this.category = category;
    }

} 
```

除了与返回数据的两个查询操作相关的问题外，所有服务都运行良好。

操作`getComplaintById`和`getAllComplaint`当前返回具有数据库中可用值的所有字段的实体，***但 id 字段返回为 null***。我尝试以三种方式构造这些方法中的查询——使用命名查询、使用本机 sql 和使用实体管理器上的 find 方法——所有这些都给出了相同的结果。

只是为了测试，如果我尝试基于空检查设置 id 字段的值，它不允许我说 id 字段具有最终值。

我发现针对 MySQL 和 Postgres 数据库运行代码的结果相同。这是其中一种查询方法的代码。

```
public Complaint getComplaintById(Integer id) {     
        Complaint cmpl;

    //case-1: The NamedQueries as defined in the entity class Complaint --> @NamedQuery(name="cmplById", query="SELECT c FROM Complaint c WHERE c.id = ?1")
    //Query query = em.createNamedQuery("cmplById");

    //case-2: using NativeQuery
    //Query query = em.createNativeQuery("SELECT * FROM COMPLAINT WHERE ID=?1", Complaint.class);

    //query.setParameter(1, id);
    //cmpl = (Complaint) query.getSingleResult();  

    //case-3: using find method on entity manager        
    cmpl = em.find(Complaint.class, id);

    System.out.println("id = " + cmpl.getId());//returning null, but get method on all other fields returning their values as expected. 

    return cmpl; 
} 
```

在日志中，我看到 OpenJPA 正在执行的查询语句包括所有其他字段，但不包括 select 子句中的 id 字段，如下所示。

1720 ramsjpa TRACE ["http-bio-8080"-exec-3] openjpa.jdbc.SQL - 执行 prepstmnt 14227847 SELECT t0.Category, t0.Description, t0.Location, t0.ReportDate, t0.ReportedBy, t0.Status FROM投诉 t0 WHERE t0.Id = ? [参数=？]

我是第一次使用 CXF 和 OpenJPA，我可能犯了一个基本错误，感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:41:00.003

您是否可能在将**getComplaintById**插入数据库后立即调用它？如果是这样，那么您的问题可能与将**GenerationType.IDENTITY**用于您的 Id 字段有关。使用 GenerationType.IDENTITY，由于在插入行之前数据库不会分配 id，因此直到提交或刷新调用之后才能在对象中获取 id。（参考：[http](http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Identity_sequencing) ://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Identity_sequencing ）

因此，我认为在尝试通过 ID 查找投诉之前，您需要执行以下操作：

```
Complaint complaint = new Complaint();
// Fill in your complaint fields...
em.persist(complaint);
em.flush();
em.getTransaction().commit(); 
```

# android - 无法在 EditText 控件中打开软键盘

> ID：10202619
> 
> 赞同：0
> 
> 时间：2012-04-18T04:08:15.503
> 
> 标签：android

我想创建 1 个具有以下条件的编辑文本： - 用户无法正常关注此控件。- 当用户点击此控件时，会显示软键盘，用户可以输入此控件 - 当用户在此软键盘上或返回设备上按 Enter 时，它会关闭并返回正常视图，并且控件不是焦点。

我尝试了下面的代码但不起作用:(启动时，控制不是焦点：好的

单击控件时，第一次单击时，控件为焦点但不显示软键盘

在第二次点击中，显示软键盘

*   当按下软键盘中的输入按钮时：返回屏幕控制不聚焦：OK
*   当按下返回按钮设备时，返回屏幕控制仍然是焦点：不正常

    ```
    public void onCreate(Bundle savedInstanceState)
    {
    final EditText txtSearch = (EditText)this.findViewById(R.id.p60004_txt_search_str);
    txtSearch.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            txtSearch.setFocusable(true);//(false);
            txtSearch.setFocusableInTouchMode(true);
            txtSearch.requestFocus();
        }
    });
    txtSearch.setOnKeyListener(new OnKeyListener() {

        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            // TODO Auto-generated method stub
            if ((event.getAction() == KeyEvent.ACTION_DOWN) &&
                    (keyCode == KeyEvent.KEYCODE_ENTER))
                {
                    String strSearch = txtSearch.getText().toString();
                    if (strSearch != null && strSearch != ""){
                            searchFriend(UserAPIConstants.FRIEND_SEARCH_TYPE_SC, strSearch);
                    }

                    hideSoftKeyboard(v);
                    txtSearch.setFocusable(false);
                    txtSearch.setFocusableInTouchMode(false);

                }

            return false;
        }
    });
    public void hideSoftKeyboard (View view) {
      InputMethodManager imm = (InputMethodManager)this.getSystemService(Context.INPUT_METHOD_SERVICE);
      imm.hideSoftInputFromWindow(view.getWindowToken(), 0);
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:25:54.593

1.  在具有edittext的xml中，将这些值放入布局节点

    ```
     android:focusable="true" 
    android:focusableInTouchMode="true" 
    ```

    并且不要在您的编辑文本的触摸模式属性中放置任何可聚焦或可聚焦的属性。

2.  然后在 onKey 方法中的代码中删除这些行..

    ```
     txtSearch.setFocusable(false);
       txtSearch.setFocusableInTouchMode(false); 
    ```

    并放

    ```
     txtSearch.clearFocus(); 
    ```

3.  你应该重写这个方法

    ```
    onBackPressed() 
    ```

    像这样..

    ```
     @Override
      public void onBackPressed() {
     txtSearch.clearFocus();
     //hide the soft keyboard..

      } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:03:36.460

尝试评论

```
hidekeyboard(v); 
```

以及亚历克斯洛克伍德建议的改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T05:24:25.383

用这个`onClick()`

```
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
imm.showSoftInput(yourEditText, InputMethodManager.SHOW_IMPLICIT); 
```

关闭键盘使用

```
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(yourEditText.getWindowToken(), 0); 
```

# asp.net - 如何设计datalist行具有不同行数的列

> ID：10202621
> 
> 赞同：0
> 
> 时间：2012-04-18T04:08:33.943
> 
> 标签：asp.net

```
ExamName       subject MaxMarks ObtainedMarks

               Hindi    100       88
AnualExam      English  100       76
               Maths    100       95
               Science  100       86 
---------------------------------------------- 
```

我想设计上面显示的datalist控件，即我想将examname及其相关主题绑定在一行中。考试名称在一行和科目的列中，考试名称的标记必须绑定在相关列中。但这些必须在一行中，如上所示。

请帮我

提前感谢马赫什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:22:02.697

您可以使用下面的数据列表结构来完成您所需的布局。

首先，您需要将 Exam 数据与 datalist 绑定。在 datalist ItemDataBound 事件中，您需要获取中继器 rptResults 的数据集，该数据集可以绑定主题、最大分数、针对每个考试数据获取分数数据。

```
<asp:DataList ID="dlExamResult" runat="server">
    <HeaderTemplate>
        <table width="100%">
            <tr>
                <td>
                    ExamName
                </td>
                <td>
                    subject
                </td>
                <td>
                    MaxMarks
                </td>
                <td>
                    ObtainedMarks
                </td>
            </tr>
    </HeaderTemplate>
    <ItemTemplate>
        <tr>
            <td>
                Exam Name
            </td>
            <td colspan="3">
                <asp:Repeater ID="rptResults" runat="server">
                    <HeaderTemplate>
                        <table  width="100%">
                    </HeaderTemplate>
                    <ItemTemplate>
                        <tr>
                            <td>
                                Subject
                            </td>
                            <td>
                                MaxMarks
                            </td>
                            <td>
                                ObtainedMarks
                            </td>
                        </tr>
                    </ItemTemplate>
                    <FooterTemplate>
                        </table>
                    </FooterTemplate>
                </asp:Repeater>
            </td>
        </tr>
    </ItemTemplate>
    <FooterTemplate>
        </table>
    </FooterTemplate>
</asp:DataList> 
```

希望这会帮助你..快乐编码....

# ruby-on-rails - 使用rails的heroku pg错误，说“文本”不允许使用类型修饰符

> ID：10202622
> 
> 赞同：0
> 
> 时间：2012-04-18T04:08:36.033
> 
> 标签：ruby-on-rails, postgresql, heroku

我得到了错误

```
PGError: ERROR:  type modifier is not allowed for type "text"
LINE 1: ...ng(255), "desc" character varying(255), "content" text(255),... 
```

当我做一个 heroku 运行 rake db:reset

我知道 postgresql 需要无限类型的“文本”，在我最新的迁移文件中，我有......

```
class ChangeLessonsTable < ActiveRecord::Migration
    def change
        change_table :lessons do |t|
            t.change        :content, :text, :limit => nil
        end
    end
end 
```

我仍然不断收到错误。任何想法为什么？我运行 rake db:reset、rake db:migrate 和 git push 以确保我的本地数据库已更改。然后我运行 git heroku push 和 heroku 运行 rake db:reset 但我不断收到该错误。我错过了什么吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T04:33:04.073

您应该能够完全放弃`:limit`：

```
class ChangeLessonsTable < ActiveRecord::Migration
    def change
        change_table :lessons do |t|
            t.change :content, :text
        end
    end
end 
```

如果这不起作用，那么您可以尝试单独的向上和向下操作：

```
def up
    change_column :lessons, :content, :text
end
def down
    change_column :lessons, :content, :string
end 
```

顺便说一句，如果你的目标是 PostgreSQL，你应该只使用`:text`并忘记`:string`(AKA `varchar`) 列类型，PostgreSQL 在内部对它们都是一样的。唯一需要使用 varchar/`:string`的情况是当您的数据完整性需要对字符串大小设置特定上限时。

# jakarta-ee - “无法使用返回单元作为处理程序的方法”在路由文件中出现此错误 - Play 2.0 Framework

> ID：10202625
> 
> 赞同：4
> 
> 时间：2012-04-18T04:09:09.557
> 
> 标签：jakarta-ee, routes, playframework-2.0

我的控制器中有这两种方法：

```
public static void index() {
   List<Tweet> tweets = Tweet.findLatest();
   render(Template("index.html").params(tweets).render());
}

public static void create(String tweet) {
   Tweet t = new Tweet();
   t.tweet = tweet;
   t.save();
   render(Template("index.html").params(t).render());
} 
```

现在路线对我大喊“不能使用返回 Unit 作为处理程序的方法”。我的路由文件中定义了这个默认路由：

`GET / controllers.Application.index()`

可能的原因是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T05:26:48.853

Raul，控制器的每个动作都应该是静态的并返回 Result

```
public static Result index() {
      List<Tweet> tweets = Tweet.findLatest();
      return ok(Template("index.html").params(tweets).render());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T04:25:07.577

我觉得应该是这样的：

```
...
return ok(
  Template("index.html").params(tweets).render()
);

...

return ok(
  Template("index.html").params(t).render()
);
... 
```

# coldfusion - macromedia.jdbc.sqlserverbase.ddb_leaks

> ID：10202626
> 
> 赞同：2
> 
> 时间：2012-04-18T04:09:11.900
> 
> 标签：coldfusion

有没有人遇到过包含macromedia.jdbc.sqlserverbase 类的内存泄漏？使用 MAT，我可以看到上述类的 30,000 多个实例保留大小为 1.3GB，每个实例似乎都映射到（不同）CFQuery 的单个实例。即，我可以在其中看到查询 SQL，并且可以看到结果（在 TDS 对象中）

该应用程序有点忙，但不可能有 30,000+ 行 CFQuery 标签。我们没有缓存 CfQuery 标记。

我真的很难看到持有这些的 GC 根。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:13:40.270

我们将 CF 附带的驱动程序用于一些非常高流量且 DB 使用量很大的站点，并且看不到它存在问题。我看到的唯一问题与网络有关 - 端口将自动同步以获得不同的速度或双工，并使连接处于挂起状态。它只发生在某些开关上，但当它发生时，它*的*行为就像那样（一堆挂起的连接）。仅供参考 - 在繁忙的服务器上，您可能有 30k + 取消引用的对象（这个或那个的实例）在等待 GC。那不会是不寻常的。GC 会恢复这些对象吗？你拿回你的 1.3Gigs 了吗？

# html - 如何在静态站点中创建根相对链接？

> ID：10202628
> 
> 赞同：12
> 
> 时间：2012-04-18T04:09:48.920
> 
> 标签：html, url, root, relative-path, middleman

在构建静态 HTML 站点时，您可以像这样设置基本 url `<base url="http://localhost:8888/mysite" />`。假设当您插入图像时，您可以像这样从该基本 url 执行此操作`<img src="/img/logo.png" />`，这相当于`<img src="http://localhost:8888/mysite/img/logo.png" />`

我的问题是，当我移动网站时，这些相对链接不起作用，这很痛苦，因为我试图与 Dropbox 上的某人共享它。我以为我可以将基本 url 更改为`<base url="http://dl.dropbox.com/u/xxxxxxxx/mysite" />`，但图片链接在这里：`<img src="http://dl.dropbox.com/img/logo.png" />`而不是我在头部设置的完整基本 URL。

为什么是这样？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-18T04:15:45.680

丢失前导`/`以使其成为相对 URL：

```
<img src="img/logo.png" /> 
```

URL 有 3 种类型：

*   完全合格，例如`http://example.org/path/to/file`

*   绝对`/path/to/file`的，例如（假设链接来自 example.org 域中的任何页面）

*   相对`path/to/file`的，例如（假设链接来自根（`/`）“文件夹”或有一个基本 URL `http://example.org/`）或`to/file`（假设链接来自“路径”“文件夹”或基本 URL 是`http://example.org/path/`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T03:20:00.170

我知道我在这个游戏上有点晚了，但你真的应该在这里使用 Rails 资产标签而不是原始 HTML。

例如，而不是使用：

```
<img src="/img/logo.png" /> 
```

你应该使用：

```
<%= image_tag 'logo.png' %> 
```

假如说：

1.  您正在为源页面使用 .erb 文件
2.  您已`/img/`在 config.rb 文件中设置图像资产路径

或者，您可以通过以下方式引用 CSS：

```
<%= stylesheet_link_tag 'file.css' %> 
```

Javascript 文件可以包含在：

```
<%= javascript_include_tag 'file.js' %> 
```

由于 Middleman 允许您控制是否相对引用资产（通过取消注释 config.rb 中的某些行），使用 Rails 资产标签比静态 HTML 更有意义。如果您还没有这样做，我强烈建议您切换。如果您对这些标签或 ERB 语法还有任何疑问，请随时在此处提问！

# sql - 使用默认 NULL 参数返回立方结果的存储过程

> ID：10202634
> 
> 赞同：0
> 
> 时间：2012-04-18T04:10:31.087
> 
> 标签：sql, sql-server, sql-server-2008

这就是存储过程的结构：

```
[dbo].[getSp] (
  @Color varchar(10) = Null,
  @Finish varchar(10) = Null,
  @Height varchar(10) = Null,
  @Type varchar(10) = Null,
  @Trim varchar(10) = Null,
  @Width varchar(10) = Null
) 
```

这是数据在搜索之前的样子。这个数据不完整，但作为一个例子来了解一下。每个组合都会在这里..

```
Color  |  Finish  |  Height  |   Type    |  Trim  |  Width  |
 Blue  |  Shiny   |   Tall   |  Toaster  | Normal |   3.5   |
(NULL) |  (NULL)  |  (NULL)  |  Toaster  | (NULL) |   3.5   |
(NULL) |  (NULL)  |   Tall   |  Toaster  |  Deco  |    4    |
(NULL) |  Shiny   |   Tall   |  Toaster  |  Deco  |    4    |
 Blue  |  Shiny   |  (NULL)  |  Toaster  |  Deco  |    4    |
(NULL) |  Shiny   |   Tall   |  Toaster  |  Deco  |    4    |
(NULL) |  Satin   |   Tall   |  Toaster  |  Deco  |    4    |
  Red  |  (NULL)  |   Tall   |  Toaster  |  Deco  |    4    | 
```

SELECT 语句将`Type`作为主要查找字段，因此它看起来像这样：

```
SELECT * FROM TABLE WHERE Type = @Type And
(

..... Confused about this part, 

) 
```

但基本上，我想运行一个存储过程以仅包含那些组合，这些组合是在仅使用部分参数调用时在表中找到的行，如下所示：

```
[getSp] 
@Color='Blue',
@Finish='Shiny',
@Type='toaster' 
```

而 sp 最终会返回这个（每个组合）..

```
1\. Blue Shiny Tall Toaster
2\. Blue Shiny Toaster
3\. Blue Tall Toaster
4\. Blue Toaster
5\. Tall Toaster
6\. Shiny Toaster
7\. Shiny Tall Toaster 
```

所以我对如何`Where`在存储过程中构造语句以仅返回存储过程参数中包含的那些组合的每个组合感到困惑，但剩余的参数（比如`Width`并且`Trim`将被排除在结果和搜索之外，将和何时默认通过`NULL`。

我试过这个没有任何运气......

```
SELECT * FROM TABLE WHERE 
Type = @Type AND
(
COLOR = COALESCE(@Color,COLOR) AND...
... for each other param
) 
```

我试过这个没有任何运气......

```
SELECT * FROM TABLE WHERE 
Type = @Type AND
(
(Color = @Color OR COALESCE(@Color,COLOR) IS NULL) OR...
... for each other param
) 
```

我已经尝试构建 sql 语句，但也失败了。任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T05:16:27.157

这应该满足您的需求，如果您提供一个参数，那么它会使用它来过滤，否则它不会：

```
SELECT *
FROM table_1
WHERE (@Color IS NULL OR Color = @Color)
AND (@Finish IS NULL OR Finish = @Finish)
AND (@Height IS NULL OR Height = @Height)
AND (@Type IS NULL OR Type = @Type)
AND (@Trim IS NULL OR Trim = @Trim)
AND (@Width IS NULL OR Width = @Width) 
```

# r - 子设定面板数据

> ID：10202638
> 
> 赞同：1
> 
> 时间：2012-04-18T04:10:47.203
> 
> 标签：r, statistics, economics

非常新，所以让我知道这是否要求太多。我正在尝试将 R 中的面板数据分成两个不同的类别；一种具有完整的变量信息，另一种具有不完整的变量信息。我的数据如下所示：

```
Person     Year Income Age Sex
    1      2003  1500   15  1
    1      2004  1700   16  1
    1      2005  2000   17  1
    2      2003  1400   25  0
    2      2004  1900   26  0
    2      2005  2000   27  0 
```

我需要做的是遍历每一列（不是第 1 列和第 2 列），如果变量的数据已满（变量由第一列中的 id 和列名定义，上图中的示例是person1Income) 将其返回到数据集。否则将其放入不同的数据集中。这是我的元代码和给出上述数据的示例。注意：我通过变量的 id 名称然后列名称来调用变量，例如变量 person1Income 将是第三列中的前三行。

```
for(each variable in all columns except 1 and 2 in data set) if (variable = FULL) { return to data set "completes" }
else {put in data set "incompletes"}
completes = person1Income, person2Income, person1Age, person2Age, person1Sex, person2 sex
incompletes = {empty because the above info is full} 
```

我理解如果有人不能完全回答这个问题，但任何帮助表示赞赏。另外，如果我的目标不明确，请告诉我，我会尽力澄清。

tl;博士我还不能用一句话来解释它所以......对不起。

编辑：我所说的完整和不完整变量的可视化。[截屏](http://imgur.com/1uPC1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T22:14:56.547

使用您的图片，这是您想要的东西。它可能是冗长的，其他人可能有更优雅的方法，但它完成了工作：

```
library("reshape2")

con <- textConnection("Person Year Income Age Sex
  1      2003  1500   15  1
  1      2004  1700   16  1
  1      2005  2000   17  1
  2      2003  1400   25  0
  2      2004  1900   NA  0
  2      2005  2000   27  0
  3      2003  NA   25  0
  3      2004  1900   NA  0
  3      2005  2000   27  0")
pnls <- read.table(con, header=TRUE)

# reformat table for easier processing
pnls2 <- melt(pnls, id=c("Person"))
# and select those rows that relate to values
# of income and age
pnls2 <- subset(pnls2,
              variable == "Income" | variable == "Age")

# create column of names in desired format (e.g Person1Age etc)
pnls2$name <- paste("Person", pnls2$Person, pnls2$variable, sep="")

# Collect full set of unique names
name.set <- unique(pnls2$name)
# find the incomplete set
incomplete <- unique( pnls2$name[ is.na(pnls2$value) ]) 
# then find the complement of the incomplete set
complete <- setdiff(name.set, incomplete) 

# These two now contain list of complete and incomplete variables
complete
incomplete 
```

如果您不熟悉`melt`ing 和`reshape2`包，您可能希望逐行运行它，并检查`pnls2`不同阶段的值以了解其工作原理。

**编辑**：添加代码以编译@bstockton 要求的值。我确信有一个更合适的 R 成语来做到这一点，但再一次，在没有更好的答案的情况下：这行得通

```
# use these lists of complete and incomplete variable names
# as keys to collect lists of values for each variable name
compile <- function(keys) {
    holder = list()
    for (n in keys) {
        holder[[ n ]] <- subset(pnls2, pnls2$name == n)[,3]
    }
    return( as.data.frame(holder) )
}

complete.recs <- compile(complete)
incomplete.recs <- compile(incomplete) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T04:21:06.263

假设这是在名称 == 'dfrm' 的 data.frame 中

```
completes <- dfrm[ complete.cases(dfrm[-(1:2)]) ,]
incompletes <- dfrm[ !complete.cases(dfrm[-(1:2)]) ,] 
```

感谢@WojciechSobala 注意到我丢失的括号。对于识别缺失值在哪一列中的问题，可以创建一个列表： id 的列表很简单。识别哪些列有缺失值也很容易提供，但我不知道“该列中对应于 id 变量的值”是什么意思，因为它们都是 NA。对于识别步骤，您可以使用：

```
apply(incompletes, 1, function(x) c(x[1], x[2], which(is.na(x[-(1:2)])))) 
```

我现在明白你在问什么。我还没有解决方案，但让我向您展示几个 R 函数，它们*可能*有助于枚举和处理通过对两列值进行交叉分类而形成的类别：

```
dat <- structure(list(Person = c(1L, 1L, 1L, 2L, 2L, 2L), Year = c(2003L, 
2004L, 2005L, 2003L, 2004L, 2005L), Income = c(1500L, NA, 2000L, 
1400L, 1900L, 2000L), Age = c(15L, 16L, 17L, 25L, 26L, 27L), 
    Sex = c(1L, 1L, 1L, 0L, 0L, 0L)), .Names = c("Person", "Year", 
"Income", "Age", "Sex"), row.names = c(NA, -6L), class = "data.frame")

completes <-  lapply( split(dat[ , 3:5], dat$Person), function(x)  sapply(x, function(y) { if( all( !is.na(y)) ) { y } else { NA} })  )

$`1`
$`1`$Income
[1] NA

$`1`$Age
[1] 15 16 17

$`1`$Sex
[1] 1 1 1

$`2`
     Income Age Sex
[1,]   1400  25   0
[2,]   1900  26   0
[3,]   2000  27   0

 incompletes <- lapply( split(dat[ , 3:5], dat$Person), function(x)  sapply(x, function(y) { if( !all( !is.na(y)) ) { y } else { NA} }) )

$`1`
$`1`$Income
[1] 1500   NA 2000

$`1`$Age
[1] NA

$`1`$Sex
[1] NA

$`2`
Income    Age    Sex 
    NA     NA     NA 
```

# css - 如何使图像悬停在css中？

> ID：10202641
> 
> 赞同：10
> 
> 时间：2012-04-18T04:11:03.613
> 
> 标签：css, image, hover

我想在悬停时将图像从正常更改为更亮，我的代码：

```
 <div class="nkhome">
        <a href="Home.html"><img src="Images/btnhome.png" /></a>
    </div>
.nkhome{
    margin-left:260px;
    top:170px;
    position:absolute;
    width:59px;
    height:59px;
}
.nkhome a img:hover {
    background:url(Images/btnhomeh.png);
    position:absolute;
    top:0px;
} 
```

为什么悬停不起作用？当我的鼠标在它上面时，它会显示第一张图像，而不是悬停图像。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-18T04:17:05.687

你有一个`a`包含标签的`img`标签。那是你的正常状态。然后添加 a`background-image`作为悬停状态，它会出现在标签的背景中`a`- 在标签后面`img`。

您可能应该创建一个 CSS 精灵并使用背景位置，但这应该可以帮助您入门：

```
<div>
    <a href="home.html"></a>
</div>

div a {
    width:  59px;
    height: 59px;
    display: block;
    background-image: url('images/btnhome.png');
}

div a:hover {
    background-image: url('images/btnhomeh.png);
} 
```

这篇[2004 年的 A List Apart 文章](http://www.alistapart.com/articles/sprites)仍然具有相关性，它将为您提供一些有关 sprite 的背景知识，以及为什么使用它们而不是两个不同的图像是一个好主意。它比我能向你解释的任何东西都要好得多。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-18T04:18:44.640

您正在将图像的背景设置为另一个图像。这很好，但前景（IMG 的 SRC 属性）仍然覆盖其他所有内容。

```
.nkhome{
    margin-left:260px;
    top:170px;
    position:absolute;
}
.nkhome a {
    background:url(Images/btnhome.png);
    display:block; /* Necessary, since A is not a block element */
    width:59px;
    height:59px;
}
.nkhome a:hover {
    background:url(Images/btnhomeh.png);
}

<div class="nkhome">
    <a href="Home.html"></a>
</div> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-04T10:07:03.757

很简单，不需要额外的 div 或 JavaScript，只需要纯 CSS（[jsfiddle 演示](http://jsfiddle.net/LMFWG/1/)）：

**HTML**

```
<a href="javascript:alert('Hello!')" class="changesImgOnHover">
    <img src="http://dummyimage.com/50x25/00f/ff0.png&text=Hello!" alt="Hello!">
</a> 
```

**CSS**

```
.changesImgOnHover {
    display: inline-block; /* or just block */
    width: 50px;
    background: url('http://dummyimage.com/50x25/0f0/f00.png&text=Hello!') no-repeat;
}
.changesImgOnHover:hover img {
    visibility: hidden;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T04:16:16.100

它不会像这样工作，将两个图像都作为背景图像：

```
.bg-img {
    background:url(images/yourImg.jpg) no-repeat 0 0;
}

.bg-img:hover {
    background:url(images/yourImg-1.jpg) no-repeat 0 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T04:15:20.480

嗨，你应该给父位置相对和子绝对位置，并像这样给绝对类的高度或宽度

**CSS**

```
 .nkhome{
    margin-left:260px;
    width:59px;
    height:59px;
    margin-top:170px;
    position:relative;
    z-index:0;
}
.nkhome a:hover img{
    opacity:0.0;
}
.nkhome a:hover{
  background:url('http://www.prelovac.com/vladimir/wp-content/uploads/2008/03/example.jpg');
    width:100px;
    height:100px;
    position:absolute;
    top:0;
    z-index:1;

} 
```

**HTML**

```
 <div class="nkhome">
        <a href="Home.html"><img src="http://dummyimage.com/100/000/fff.jpg" /></a>
    </div>
​ 
```

现场演示[http://jsfiddle.net/t5FEX/7/](http://jsfiddle.net/t5FEX/7/)

* * *

或这个

```
<div class="nkhome">
        <a href="Home.html"><img src="http://dummyimage.com/100/000/fff.jpg" onmouseover="this.src='http://www.prelovac.com/vladimir/wp-content/uploads/2008/03/example.jpg'" 
            onmouseout="this.src='http://dummyimage.com/100/000/fff.jpg'"
            /></a>
    </div>​ 
```

现场演示[http://jsfiddle.net/t5FEX/9/](http://jsfiddle.net/t5FEX/9/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-04T18:47:38.063

这里有一些易于遵循的步骤和一个很棒的悬停教程，它是您可以“玩”和现场测试的示例。

[http://fivera.net/simple-cool-live-examples-image-hover-css-effect/](http://fivera.net/simple-cool-live-examples-image-hover-css-effect/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-12T08:43:58.423

**准确解决您的问题**

您可以使用**content:url("YOUR-IMAGE-PATH")**更改悬停时的图像；

对于图像悬停，请在您的 CSS 中使用以下行：

```
img:hover 
```

并使用 img:hover 中的以下配置更改悬停时的图像：

```
img:hover{
content:url("https://www.planwallpaper.com/static/images/9-credit-1.jpg");
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-06-27T19:39:47.393

用这个上课。并制作 2 张具有自身宽度和高度的不同图像。在ie9中工作。

请参阅此链接。

[http://kyleschaeffer.com/development/pure-css-image-hover/](http://kyleschaeffer.com/development/pure-css-image-hover/)

您还可以制作 2 个不同的图像并将其放置在 self 类名称中，并将其他图像悬停在其他图像中。

见例子。

```
 .myButtonLink {
              margin-top: -5px;

    display: block;
    width: 45px;
    height: 39px;
    background: url('images/home1.png') bottom;
    text-indent: -99999px;
              margin-left:-17px;

              margin-right:-17px;

              margin-bottom: -5px;

              border-radius: 3px;
              -webkit-border-radius: 3px;           
}

.myButtonLink:hover {
    margin-top:  -5px;

    display: block;
    width: 45px;
    height: 39px;
              background: url('images/home2.png') bottom;
              text-indent: -99999px;
              margin-left:-17px;

              margin-right:-17px;

              margin-bottom: -20x;

              border-radius: 3px;
              -webkit-border-radius: 3px;
} 
```

# mysql - 如何手动查询帖子标题、内容和图片附件缩略图？

> ID：10202643
> 
> 赞同：2
> 
> 时间：2012-04-18T04:11:14.613
> 
> 标签：mysql, wordpress

我正在尝试从外部 php 文件手动查询 wordpress 数据库，我想提取最后 3 个帖子：标题、内容、最后一个（或第一个）图像，对于该图像，从 wp_postmeta 我想获取缩略图 url .

我设法获得了标题、内容、图像 ID，但我不知道如何添加另一个连接以获取图像缩略图。这就是我所拥有的：

```
SELECT a.post_title title, max(c.guid) img_url, a.ID id
FROM wp_posts a

LEFT JOIN
(select post_parent, max(post_date_gmt) as latest_image_date from wp_posts
where post_type='attachment' GROUP BY post_parent) b 
on a.id=b.post_parent

LEFT JOIN wp_posts c
on c.post_parent=a.id 
and c.post_type='attachment' 
and b.latest_image_date = c.post_date_gmt where c.guid IS NOT NULL

GROUP BY a.post_title ORDER BY a.ID 
```

图像缩略图在`wp_postmeta (meta_id, post_id, meta_key, meta_value)`表格中，如下所示：`58435, 6711, _wp_attachment_metadata, a:6:{s:5:"width";s:4:"1024";s:6:"height";s:3:"683"...`

我可以看到我得到了图像 id，`c.id`它所需要的只是另一个`JOIN`从`wp_postmeta`where 字段中获取数据`meta_key="_wp_attachment_metadata" and post_id=c.id`。

谁能帮我完成查询？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:51:51.730

您应该节省时间并使用 wordpress 功能：

*   做一个插件
*   或在您的脚本中包含 wp-load.php

[https://wordpress.stackexchange.com/questions/47049/what-is-the-correct-way-to-use-wordpress-functions-outside-wordpress-files](https://wordpress.stackexchange.com/questions/47049/what-is-the-correct-way-to-use-wordpress-functions-outside-wordpress-files)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-29T04:51:36.973

我知道这是一个旧帖子，但这里是为了帮助未来的答案寻求者

根据需要更新查询。此当前查询将选择具有附件的帖子。它返回附件 ID 和 guid、帖子 ID 和标题以及类别名称和 term_id。

```
SELECT DISTINCT p.ID,p.post_title, a.ID as attach_id, a.guid, t.name, t.term_id FROM $wpdb->posts as a
LEFT JOIN $wpdb->posts as p on p.ID = a.post_parent
AND a.post_type = 'attachment' AND a.post_mime_type = 'image/png'

JOIN $wpdb->term_relationships as tr on tr.object_id = p.ID
JOIN $wpdb->terms as t on t.term_id = tr.term_taxonomy_id
JOIN $wpdb->term_taxonomy as tt on tt.term_id = t.term_id
AND tt.taxonomy = 'category'

AND p.post_type = 'post'
AND p.post_status = 'publish'; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-19T15:02:26.487

最后，我选择了另一种解决方案（至少是临时的），因为它增加了水平功能：我在另一个站点（要包含的站点）中创建了一个完全空的自定义页面（我必须手动删除一些操作/过滤器以使其为空） ) 以 json 格式导出数据。我得到该数据并在当前站点中根据需要打印它。

```
<?php
$args= array(
    'posts_per_page' => 6
    //if there are sticked posts they will also appear beside the 2 if we run this in a separate php file, not included in theme
);
$ii = 0;
query_posts($args);
if( have_posts() ) :

  while ( have_posts() ) : the_post();

    $permalink = get_permalink();
    $titlu = get_the_title();
    $excerpt = get_the_excerpt();

    $args = array(
        'post_type'      => 'attachment',
        'post_parent'    => $post->ID,
        'post_status'    => 'inherit',
        'numberposts'    => 1
    );
    $images = get_posts($args);
    $j = 1;
        foreach ($images as $i) :

        $ii++;//am preluat doar o poza, e ok numaratoarea
        $j++;
        $poza_thumb = wp_get_attachment_image_src($i->ID, 'thumbnail');
        $arr[$ii] = array('titlu' => $titlu, 'url' => $permalink, 'poza_thumb' => "".$poza_thumb[0], 'poza_width' => "".$poza_thumb[1], 'poza_height' => "". $poza_thumb[2], 'articol' => $excerpt);

        endforeach;

    endwhile;

    echo json_encode($arr);//we send json as array
else :

endif;?> 
```

# javascript - 为什么我的函数不是函数？

> ID：10202645
> 
> 赞同：6
> 
> 时间：2012-04-18T04:11:16.923
> 
> 标签：javascript, html

我的视图页面中有这个：

```
<input type="checkbox" id="toggle_SITEID" name="@@toggle_SITEID" onclick="toggle_SITEID(this)" /> New <br /> 
```

然后在我的js文件中我有这个：

```
toggle_SITEID = function (chk) {
    // something
} 
```

然后我点击复选框，“某事”不会运行。我在 firebug 控制台中检查错误消息是：

> toggle_SITEID 不是函数

那么为什么会这样呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T05:48:29.530

此错误可能有几个原因：

*   您没有在 HTML 文件中引用脚本。

*   该函数未在全局范围内声明，而是在内部范围内声明。
    全局范围 - [**WORKING DEMO**](http://jsfiddle.net/Fyw39/)
    内部范围 - [**NON WORKING DEMO**](http://jsfiddle.net/Fyw39/1/)

*   有一个元素`id`与函数名（`toggle_SITEID`）相同。
    在 Internet Explorer 中，使用元素`id`是`document.getElementById()`. 使用`var`声明断开链接。

*   另一个可能出现的问题是当您有一个内联处理程序尝试使用一个干扰内联处理程序的唯一范围链的全局变量时。当全球...

    *   与具有处理程序的元素上的任何属性具有相同的名称，或
    *   与任何财产同名`document`

    由于内联处理程序的作用域链具有元素本身，以及`document`作为变量对象注入作用域链的元素，因此这些对象上的任何属性都会在访问全局变量时产生干扰。

    例如，给定这个元素: `<a onclick="foo();">click me</a>`，我们可以成功调用全局`foo()` *，除非*我们做了类似的事情`document.foo = "bar"`。由于`document`是作为作用域链中的变量对象注入的，因此`document.foo`现在会影响全局`foo`.

    元素本身也是如此。如果我们`foo`在调用全局函数之前将属性添加到元素，该属性将隐藏全局。`<a onclick="this.foo = 'bar'; foo();">click me</a>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-18T00:09:14.937

对我来说，错误是 ID 与函数同名。

将 id 更改为与您打算在单击时调用的函数名称不同的其他名称。

改变

```
<input type="checkbox" id="toggle_SITEID" name="@@toggle_SITEID" onclick="toggle_SITEID(this)" /> New <br /> 
```

到：

```
<input type="checkbox" id="toggle_SITEID" name="@@toggle_SITEID" onclick="toggle_SITE_ID(this)" /> New <br /> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-18T05:50:00.567

我突然想到一件事：

即使它是一个匿名函数，也不能以分号结尾。

试试这个：

```
toggle_SITEID = function (chk) {
    alert("I work!");
}; 
```

工作演示：http: [//jsfiddle.net/crazytonyi/cDNcu/](http://jsfiddle.net/crazytonyi/cDNcu/)

# ruby - 如何添加到哈希值而不是用新值覆盖它？

> ID：10202648
> 
> 赞同：0
> 
> 时间：2012-04-18T04:11:27.470
> 
> 标签：ruby, hash, ncbi

基本上我有这些文件（来自NCBI的medline）。每个都与一个期刊标题相关联。每个都有 0、1 个或多个 genbank 标识号 (GBID)。我可以将每个文件的 GBID 数量与每个期刊名称相关联。我的问题是我可能有多个文件与同一期刊关联，我不知道如何将每个文件的 GBID 数添加到每个期刊的 GBID 总数中。

我当前的代码：jt 代表期刊标题，从文件中正确提取。GBID 会在遇到时添加到计数中。

完整代码：

```
 #!/usr/local/bin/ruby

 require 'rubygems'
 require 'bio'

Bio::NCBI.default_email = 'kepresto@uvm.edu'

ncbi_search = Bio::NCBI::REST::ESearch.new
ncbi_fetch = Bio::NCBI::REST::EFetch.new

print "\nQuery?\s" 

query_phrase = gets.chomp

"\nYou said \"#{query_phrase}\". Searching, please wait..."

pmid_list = ncbi_search.search("pubmed", "#{query_phrase}", 0)

puts "\nYour search returned #{pmid_list.count} results."

if pmid_list.count > 200
puts "\nToo big."
exit
end

gbid_hash = Hash.new
jt_hash = Hash.new(0)

pmid_list.each do |pmid|

ncbi_fetch.pubmed(pmid, "medline").each do |pmid_line|

    if pmid_line =~ /JT.+- (.+)\n/
        jt = $1
        jt_count = 0
        jt_hash[jt] = jt_count

        ncbi_fetch.pubmed(pmid, "medline").each do |pmid_line_2|

            if pmid_line_2 =~ /SI.+- GENBANK\/(.+)\n/
                gbid = $1
                jt_count += 1
                gbid_hash["#{gbid}\n"] = nil
            end 
        end 

        if jt_count > 0
            puts "#{jt} = #{jt_count}"

        end
        jt_hash[jt] += jt_count
    end
end
end

jt_hash.each do |key,value|
# if value > 0
    puts "Journal: #{key} has #{value} entries associtated with it. "
# end
end

# gbid_file = File.open("temp_*.txt","r").each do |gbid_count|
#   puts gbid_count
# end 
```

我的结果：

```
 Your search returned 192 results.
 Virology journal = 8
 Archives of virology = 9
 Virus research = 1
 Archives of virology = 6
 Virology = 1 
```

基本上，我怎么才能说病毒学档案= 15，但是对于任何期刊标题？我尝试了一个哈希，但是第二个病毒学档案只是覆盖了第一个......有没有办法让两个键在哈希中添加它们的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T04:26:37.227

我不完全遵循您在这里的要求。

但是，您正在覆盖给定哈希键的值，因为您正在这样做：

```
jt_count = 0
jt_hash[jt] = jt_count 
```

您之前已经像这样初始化了哈希：

```
jt_hash = Hash.new(0) 
```

也就是说，每个键的默认值都是 0。因此，不需要将 jt_hash[jt] 初始化为 0。

如果删除此行：

```
 jt_hash[jt] = jt_count 
```

然后 jt_hash[jt] 的值应该在每次循环中累积

```
ncbi_fetch.pubmed(pmid, "medline").each do |pmid_line|
  ....
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T04:19:06.590

更改这两行：

```
 jt_count = 0
   jt_hash[jt] = jt_count 
```

对此：

```
 if jt_hash[jt] == nil
      jt_count = 0
      jt_hash[jt] = jt_count
   else
      jt_count = jt_hash[jt]
   end 
```

这只是检查该键处的空值的哈希值，如果它是空值，则在其中插入一个整数。如果它不为空，则返回前一个整数，以便您可以添加它。

# syntax - 数字开头名称的 Lua 函数语法糖

> ID：10202658
> 
> 赞同：1
> 
> 时间：2012-04-18T04:12:50.200
> 
> 标签：syntax, lua

路亚 5.1.4

例如：

```
bar = {}
bar.name = 'test'
bar['123.com'] = function(self) print(self.name) end 
```

我不能调用如下方法：

```
bar:['123.com']()
stdin:1: '<name>' expected near '[' 
```

虽然下面的作品：

```
bar['123.com'](bar) 
```

但我这有点难看。这种情况有语法糖吗？

或者如果真的做不到，Lua 团队会在未来添加这个语法吗？

还是他们故意这样做的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T04:17:50.767

不，我们不能像你想要的那样调用方法。您假设仅按以下语法调用该方法。

```
bar['123.com'](bar) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T08:13:02.857

只需创建一个不以数字开头的别名并使用它。

```
bar.name123 = bar['123name']

bar:name123() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T23:59:32.897

没有人知道 Lua 维护者会在未来的版本中添加什么（他们非常守口如瓶），但我的猜测是他们不太可能在没有被询问的情况下添加它——而且我从未见过这样的请求Lua 邮件列表中的一件事......

不过，我的直觉是，这个功能似乎很模糊：人们真正想要调用具有“奇怪”名称的方法的频率是多少？鉴于此，并且“解决方法”确实一点也不差，尚不清楚是否值得增加实现的复杂性以支持这样的功能（除非它完全微不足道）。

如果你想尝试询问，你应该将它发布到 Lua 邮件列表，这是大多数此类讨论发生的地方： `lua-l@lists.lua.org`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-19T14:30:09.357

您可能需要考虑以下内容（您可以在[http://www.lua.org/cgi-bin/demo](http://www.lua.org/cgi-bin/demo)在线测试）：

```
bar = {}
bar.name = 'test'
bar['123.com'] = function(self) print(self.name) end

bar2 = setmetatable({}, {
  __index = function(t, key)
    return function(...)
      return bar[key](bar, ...)
    end
  end
})

bar2['123.com']()
-- output: test 
```

您也可以将`bar`自身更改为以类似方式运行，只是您必须在分配任何值之前执行此操作 - 例如：

```
bar = {}

local privatekey = {}
setmetatable(bar, {
  __index = function(t, key)
    local value = rawget(t, privatekey)[key]
    if type(value) ~= 'function' then
      return value
    end
    return function(...)
      return value(t, ...)
    end
  end,
  __newindex = function(t, key, value)
    rawset(t, privatekey, rawget(t, privatekey) or {})
    rawget(t, privatekey)[key] = value
  end
})

bar.name = 'test'
bar['123.com'] = function(self) print(self.name) end
bar['123.com']()
-- output: test 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T04:21:27.697

您可以使用[闭包](http://www.lua.org/pil/6.1.html)：

```
bar = {}
bar.name = 'test'
bar['123.com'] = function() print(bar.name) end
bar['123.com']()

function bar:addBar(name)
    bar[name] = function() print(self.name) end
end

bar:addBar('456.com')

bar['456.com']() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-18T09:50:24.777

天啊...

```
bar = {
    ['123.com'] = function(self)
        print("YAY!", self)
    end
}
function f()
    print(bar)
    bar:WHATTHE()
end

function crazy(f, patt, repl)
    local f_str = string.dump(f)
    local newf_str = string.gsub(f_str, "WHATTHE", "123.com")
    assert(#newf_str == #f_str, "replacement must be of same length")
    local newf = loadstring(newf_str)
    setfenv(newf, getfenv(f))
    return newf
end

f = crazy(f, "WHATTHE", "123.com")

f()
--[[ Output:
    table: 005EB688
    YAY!    table: 005EB688
]] 
```

**永远**不要这样做。

# list - Prolog 创建一个列表

> ID：10202666
> 
> 赞同：5
> 
> 时间：2012-04-18T04:14:04.410
> 
> 标签：list, prolog, insert-update

例如，我必须创建 n 个元素的列表，

```
do_list(5,L1). 
```

应该返回，

```
L1=[1,2,3,4,5]. 
```

这就是我所拥有的，但它不起作用。

```
do_list(X,L1):- X1 is X-1, do_list(X1,[X1|L1]).

do_list(0,[]). 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T12:46:51.970

如果要创建从 1 到 N 的连续数字列表，可以使用内置谓词`findall/3`，`between/3`这样：

```
do_list(N, L):- 
  findall(Num, between(1, N, Num), L).

?- do_list(5,L).
L = [1, 2, 3, 4, 5]. 
```

SWI 还有另一个内置函数可以做到这一点`numlist/3`：

```
?- numlist(1,5,L).
L = [1, 2, 3, 4, 5]. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T05:55:52.887

您的代码存在三个问题。第一个问题是您将 X1 添加到子句主体中的列表中，但您从未将新列表传递回子句的头部。即，L1 是一个累加器变量，但您需要绑定到最终列表的第三个参数。

第二个是第二个子句仅在输入列表为空时匹配。永远不会出现这种情况，因为您在`do_list/2`递归调用之前将 X1 添加到列表中。即，您没有递归锚，目标`?- do_list(5,L)`永远不会返回。

第三个问题是您将 X1 而不是 X 添加到列表中。您将跳过最大的数字。

这是它应该如何工作的：

```
do_list(N, L) :- do_list1(N, [], L).

do_list1(0, L, L) :- !.
do_list1(N, R, L) :- N > 0, N1 is N-1, do_list1(N1, [N|R], L). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-02T10:45:15.703

或者，如果您不想使用任何内置功能（像我一样，当我尝试将此作为练习然后遇到此问题时），您可以使用此（有效但无效）解决方案：

```
connect([],X,X).
connect([H|T],C,[H|T2]) :- connect(T,C,T2).

revert([],[]).
revert([H|T],R) :- revert(T,Trev), connect(Trev,[H],R)

do_revlist(0,[]).
do_revlist(X,[X|L]) :- X1 is X-1, do_revlist(X1,L).
do_list(X,L2) :- do_revlist(X,L), revert(L,L2). 
```

PS 仅适用于正整数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-19T15:32:10.310

另一种类似于 twinterer 的解决方案，但没有切割或预定义谓词，采用累加器。

```
do_List(Max,L) :- do_ListAcc(1,Max,L). % call Accumulator

do_ListAcc(N,N,[N]). % N=:=N ends recursion
do_ListAcc(Min,Max,[Min|Succs]) :-
    Next is Min + 1,
    do_ListAcc(Next,Max,Succs). 
```

这也仅适用于正整数。

# c# - 表单设计器和命名空间

> ID：10202671
> 
> 赞同：2
> 
> 时间：2012-04-18T04:14:31.180
> 
> 标签：c#, visual-studio-2010

我经常使用的 DLL 中有一个静态事件 - Toolkit.Dialogs.ExitConfirm

我可以使用此事件的唯一方法是修改在 form.Designer.cs 中添加事件的行。例子：

```
this.FormClosing += new System.Windows.Forms.FormClosingEventHandler(this.Form1_FormClosing); 
```

变成

```
this.FormClosing += new System.Windows.Forms.FormClosingEventHandler(Toolkit.Dialogs.ExitConfirm); 
```

如果我尝试通过“属性”->“事件”页面添加它，它会给我这个错误：“Toolkit.Dialogs.ExitConfirm”不是有效的标识符。

有没有办法让表单设计器引用来自其他类/命名空间的事件？

编辑：有些人在视觉提示上工作得更好，所以这里有一些图像来定义问题：http: [//imgur.com/a/RaLMg](http://imgur.com/a/RaLMg)

第一张图片显示了我必须如何使其在 Visual Studio 中工作 - 一个调用事件的事件。

第二张图片显示了我实际上正在尝试做的事情。

第三张图片是我手动键入方法名称时出现的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:51:35.180

> 我在 DLL 中有一个静态事件

你没有，你只是有一个*方法*。FormClosing 是事件，如果它具有正确的签名，您的方法可以是*事件处理程序方法。*设计师根本不支持您尝试做的事情，您将不得不停止尝试。有两种明智的解决方案，都涉及在表单类中编写代码。首先，您可以在构造函数中执行此操作：

```
 public Form1() {
        InitializeComponent();
        this.FormClosing += Toolkit.Dialogs.ExitConfirm;
    } 
```

或者理智的，因为一个类听自己的事件没有意义：

```
 protected override void OnFormClosing(FormClosingEventArgs e) {
        Toolkit.Dialogs.ExitConfirm(this, e);
        if (!e.Cancel) base.OnFormClosing(e);
    } 
```

当您从中派生另一种形式时，它具有正常工作的巨大优势。这也是对您可能真正应该做的事情的强烈暗示。看起来您正在尝试为对话框编写通用代码。“工具包”命名空间也暗示了这一点。通过让这个工具包实现一个基表单类来使它工作得很好。现在您可以在没有任何代码或事件处理程序的情况下设计您的表单类：

```
public partial class Form1 : Toolkit.Dialogs.BaseDialog {
   // etc
} 
```

假设 Toolkit.Dialogs.BaseDialog 是从覆盖 OnFormClosing() 的 Form 派生的类。也许它还应该有一个名为“ConfirmOnClose”的 bool 类型的公共属性。这启用了“ExitConfirm”逻辑。您可以毫无问题地在设计器中设置*该属性。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:12:55.920

您可以在应用程序表单的表单关闭事件中调用此方法“Toolkit.Dialogs.ExitConfirm”并将所需参数传递给 Toolkit.Dialogs.ExitConfirm

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T12:14:40.133

WinForms 设计器的设计初衷并非如此。我有点惊讶它不会在您下次更改设计师时丢失您的活动。

关于可以使这项工作的其他方法的一些想法：

*   您可以为您创建一个挂钩事件的 Form 类，并从该基类中继承所有其他表单。然后你会得到无处不在的行为。
*   您可以为您创建一个挂钩事件的实用方法，并从每个表单的构造函数中调用它。
*   您可以创建一个挂钩事件然后显示表单的扩展方法，并在显示表单的任何地方调用扩展方法（而不是调用`Show`）。

基类可能是最简单的解决方案，只要您还没有将表单继承用于其他目的。

# c++ - 我的代码打印出地址而不是数组值？

> ID：10202673
> 
> 赞同：0
> 
> 时间：2012-04-18T04:14:47.093
> 
> 标签：c++

我的代码有什么问题？我想打印出数组，但是当我尝试这样做时，它似乎打印出一个地址。

```
#include <iostream>
#include <ctime>
#include <stdlib.h>

using namespace std;

int main ()
{
    srand(time(NULL));

    int array[9]= {0};

    for (int i=0;i<=8;i++)
    {
        array[i]= (rand()%101);
    }

    cout<< array;

    system ("PAUSE");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T04:25:58.083

You can't just `cout` an array. Arrays are not `cout`-able. Whenever you successfully `cout` something of type `T`, it means that there's a dedicated overloaded `<<` operator designed specifically to `cout` values of type `T`. And there's no dedicated `<<` operator for `cout`-ing arrays (aside from strings). For this reason the compiler chooses the closest match for the given argument type: a `<<` operator for pointers. Since arrays are convertible to pointers, that `<<` is applicable here.

If you want to `cout` the values of all elements of your array, you'll have to either `cout` them manually, one by one, or use some standard algorithm that can do it for you. For example

```
std::copy(array, array + 9, std::ostream_iterator<int>(std::cout, " ")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T04:17:02.560

您需要执行一个循环来单独输出每个数组元素。

问题是 C++ 并不总是知道数组的大小，所以它不能像你期望的那样默认输出整个东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T04:17:11.297

您需要遍历数组并打印每个元素，就像您在每个索引处分配值的方式一样。由于数组*衰减*到指向序列中第一个元素的指针，因此您将获得地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T04:26:32.280

C++ decays array type to a pointer type when the value is passed as argument to a function. C++11 has `std::array` (and TR1 specifies `std::tr1::array`) which retains the size of the array. Here is your example modified to use `std::array`:

```
#include <array>
#include <iostream>
#include <ctime>
#include <stdlib.h>

template<typename T, std::size_t N>
std::ostream& operator<< (std::ostream& ostm, const std::array<T, N>& a)
{
  for (auto const& x : a)
    ostm << x << ' ';

  return ostm;
}

int main ()

{
    srand(time(NULL));

    std::array<int, 9> array;
    for (auto& x : array)
        x = rand() % 101;

    std::cout<< array << std::endl;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T04:25:27.710

`std::cout`没有重载`int array[9]`，因此它衰减为指针 ( `int*`)，这就是您将看到的显示内容（类似于`0x7fffe47142d0`）。

要单独打印`int`数组中的 s，您将需要使用循环构造（例如`for`用于填充数组的 - 循环）并依次发送每个`int`s ，可能带有一些空格来格式化它们。`std::cout`

一旦掌握了 C++ 及其标准库的窍门，您可能想研究如何使用[**`std::copy()`**](http://en.cppreference.com/w/cpp/algorithm/copy).

# r - 确定 R 中“MCA”对象的结构并计算 2d 坐标距离

> ID：10202676
> 
> 赞同：0
> 
> 时间：2012-04-18T04:14:58.113
> 
> 标签：r

我有一个从missMDA 包中的函数MCA 生成的MCA 对象，它从多重对应分析返回几种类型的结果。其中，我希望能够在适当的情况下使用“dist”函数来计算坐标之间的所有成对二维距离。在我能做到这一点之前，我似乎需要弄清楚如何从这个对象中专门引用 X 和 Y 坐标的向量，但是当我要求 mydata$var$coord 时，我得到一个不守规矩的值列表，而且我我不确定如何将结果发送到 dist 函数可以使用的适当格式。

我也有兴趣学习如何理解不同类型对象的一般结构，这样我就有一个更清晰的路线图，可以在未来引用它们的组件（并且不必向你们所有人寻求帮助）接着就，随即！）。

如果我没有足够清楚地表达我的问题，我深表歉意。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T20:51:41.943

弄清楚该怎么做，这（显然）是R 101：

```
names(mydata) 
```

给我有关此对象组件的适当信息（MCA 类型的列表）。由此，我能够引用感兴趣的组件 -

```
mydata$ind$coord

mydata$var$coord 
```

我想耐心是值得的！

# iphone - CCSpeed 延迟后的 Cocos2D 调用函数

> ID：10202688
> 
> 赞同：0
> 
> 时间：2012-04-18T04:16:20.243
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

我需要在 CCSpeed 延迟后调用一个函数，以便动态更改速度。据我所知，我不能在 CCSequence 中使用 CCSpeed，所以我尝试在 CCSpeed 中使用 CCSequence (CCDelayTime, CCCallFuncND, nil)，但这似乎也不起作用。有人有什么建议吗？

在我的 BackgroundLayer 类中，我有一个 NSNumber *multiplierSpeed; ：

```
@interface BackgroundLayer : CCLayer {
    NSNumber *multiplierSpeed;
}
@property (nonatomic, retain) NSNumber *multiplierSpeed;

-(void)rotateWorldAndSwapIn:(id)sender data:(int)frame;
@end 
```

在我的实现中：

```
@synthesize multiplierSpeed;
-(id)init {
    self = [super init];
    if (self != nil) {
        //...
        multiplierSpeed = [NSNumber numberWithFloat:1.0f];
        CCSpeed *delay = [CCSpeed actionWithAction:[CCSequence actions:[CCDelayTime actionWithDuration:20],[CCCallFuncND actionWithTarget:self selector:@selector(rotateWorldAndSwapIn:data:) data:(void*)3], nil] speed:1.0f];
        [delay setTag:10];
        [self runAction:delay];
        //...
    }
}

-(void)rotateWorldAndSwapIn:(id)sender data:(int)frame {
    CCLOG(@"test"); //This is fine
    CCLOG(@"multiplierSpeed=%f",[multiplierSpeed floatValue]); //Crashes here
    //... 
} 
```

我收到此错误：

回调方法上的 EXC_BAD_ACCESS_(targetCallback_,selector_,target_, data_);

在 CCActionInstant.m 文件中。

另外，是不是因为 CCSpeed 环绕了没有延迟的 CCCallFuncND，所以抛出了这个错误？如果是这样，您有任何替代建议吗？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T04:12:53.213

它崩溃了，因为：

```
multiplierSpeed = [NSNumber numberWithFloat:1.0f]; 
```

...没有保留在您的初始化中。当您到达操作回调时，该对象已被释放并且无效。无论如何，可能没有充分的理由将该值存储在 NSNumber 中。将您的 iVar 设置为 CGFloat，然后您可以存储和访问乘数，而无需担心保留。如果你真的需要它作为 NSNumber，你需要将它保留在 init 中（或通过属性），然后在适当的时候释放它，至少在你的 dealloc 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T06:03:19.137

您需要使用 self.multiplierSpeed 而不仅仅是 multiplierSpeed。

```
self.multiplierSpeed = [NSNumber numberWithFloat:1.0f]; 
```

然后在 CCLOG 中，

```
CCLOG(@"multiplierSpeed=%f",[self.multiplierSpeed floatValue]); //Won't crash anymore 
```

除非您使用 self.varName，否则 Objective-c 将不会使用 getter/setter 方法，而是会尝试直接访问实例变量，从而导致错误的内存访问（因为没有为该 var 分配内存）

# r - 我可以更改 R 对象的属性吗

> ID：10202695
> 
> 赞同：0
> 
> 时间：2012-04-18T04:17:36.823
> 
> 标签：r, class, object, properties

我的 Ldt1 对象具有以下属性。

```
> is(Ldt1)
[1] "data.frame" "list"       "oldClass"   "vector" 
```

我只想将其更改为 data.frame。我该怎么做 ？

编辑：

我正在回答“为什么？”的问题。

我需要在两个包之间工作。第一个包适用于不同的类对象，第二个包适用于不同的类。在数据操作过程中，我遇到了附加对象的不必要类类型的问题，该对象给出错误消息：

```
No method for an object of class genotypeNo method for an object of class factor 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T04:25:13.313

你根本做不到。所有 data.frames 都是列表，所有列表都是向量。（你为什么要做这样的事情呢？）

将编写正确编写的方法，以查看受欢迎的类是在类属性列表中还是在其继承的类之一中。在您的情况下，您（或您的一个程序）似乎出现了数据输入错误，并将您认为应该是数字向量的内容转换为因子向量，或者设计人员认为因子变量是要返回的逻辑对象。通过识别对象或组件并使用 'as.numeric(as.character(facvar))` 强制它，您可能会获得成功。[（该特定方法是一个常见问题解答问题。）](http://cran.r-project.org/doc/FAQ/R-FAQ.html#How-do-I-convert-factors-to-numeric_003f)这里更好的方法是确定输入或处理错误的来源。

# java - Java 平均函数

> ID：10202700
> 
> 赞同：2
> 
> 时间：2012-04-18T04:18:04.517
> 
> 标签：java, average

我是编程新手，我正在尝试找出一个简单的平均函数。我写了一个函数来平均 3 个整数。现在我希望能够使用任何集合类和任何数字类并获得平均值。问题是这些类你不能使用 + 或 / 来获得平均值。

所以我想知道是否有任何解决方法可以使用这两个类？

这是我的第一个功能：

```
package refresh;
import java.util.*;

public class Average {
public static void main( String args[]){

    int a, b, c;
    float average;
    Scanner scanner = new Scanner(System.in);
    System.out.println("Enter First Number");
    a = scanner.nextInt();
    System.out.println("Enter Second Number");
    b = scanner.nextInt();
    System.out.println("Enter Third Number");
    c = scanner.nextInt();
    average = (float)(a+b+c)/3;
    System.out.println("The Average Is "+average );
}
 } 
```

到目前为止，我的问题是：

```
package refresh;
import java.util.*;

public class Average {
public static void main( String args[]){

    Collection numbers;
    Number count;
    Number  average;

    Scanner scanner = new Scanner(System.in);
    System.out.println("Enter Numbers to be averaged");
    numbers = (Collection) scanner.match();
    count++;
    average = numbers/count;
    System.out.println("The Average Is "+average);
}
} 
```

任何帮助都会很棒！谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T04:28:04.153

It makes no sense to convert a String into a number (which is what Scanner does) if you don't know what kind of number you're trying to convert it into.

You can represent pretty much any number as a Double. If you need arbitrary precision, use BigDecimal.

The averaging code *can* be fully generic over the Number interface; just use the doubleValue method. If you need BigDecimal, then it's more complicated and you probably need to do things involving instanceof.

# php - 带有 kohana 策略的 SEO 网址

> ID：10202703
> 
> 赞同：-1
> 
> 时间：2012-04-18T04:18:33.713
> 
> 标签：php, url, seo, kohana

我想在 kohana 中使用 SEO 网址，我已经使用了 htaccess 文件，所以我可以拥有 www.food.com/food/3123

ID:3123 标题:热狗

但这对 SEO 不友好，我如何将其发送到 www.food.com/food/hotdog ？或 www.food.com/food/I-love-hotdog ？

用 hotdog 或 I-love-hotdog 搜索 DB 是错误的，对吗？

我读过一些人说这样做 www.food.com/food/3123/hotdog 或 www.food.com/food/hotdog3123 然后解析它

有没有人有正确的方法来做到这一点？还是更好的结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T04:49:38.450

用“hotdog”或“I-love-hotdog”搜索是相当不错的。您可以在名为“url”的数据库表中存储附加字段（例如）。请注意，“url”字段必须是唯一的。然后`application/bootstrap.php`创建正确的路线，这些路线将为您的`url`部分产品提供服务，然后使用控制器在数据库中搜索它。

使用Kohana的( ) 方法可以`http://stackoverflow.com/questions/10202703`自动重定向到。在控制器中，您获取项目的 ID（在我们的示例中），然后找到项目的相应 URL（）并重定向到`http://stackoverflow.com/questions/10202703/seo-urls-with-kohana-strategy``$this->request->redirect()``Request::redirect()``10202703``seo-urls-with-kohana-strategy``$this->request->uri().'/'.$item_url``$this->request->redirect('/'.$this->request->uri().'/'.$item_url)`

# objective-c - 为什么我总是看到双重属性声明？

> ID：10202709
> 
> 赞同：0
> 
> 时间：2012-04-18T04:19:19.650
> 
> 标签：objective-c, ios

> **可能重复：**
> [我什么时候需要同时拥有 iVar 和属性？](https://stackoverflow.com/questions/7991863/when-do-i-need-to-have-both-ivar-and-a-property)

我一直在 Objective-C 代码中看到以下内容。

```
@interface Contact : RKObject {  
    NSNumber* _identifier;  
    NSString* _name;  
    NSString* _company;  
}  

@property (nonatomic, retain) NSNumber* identifier;  
@property (nonatomic, retain) NSString* name;  
@property (nonatomic, retain) NSString* company; 
```

为什么带有接口的块内部的位也需要？那是不是使用@synthesize？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T04:22:07.707

里面的块`@interface`是`ivars`你的类，而它下面的 3 个元素是`properties`，即你的 ivars 的访问器（getter 和 setter）。

> 您通常通过一对访问器 ( **getter/setter** ) 方法访问对象的**属性**（就其属性和关系而言） 。通过使用访问器方法，您遵循封装原则。您可以严格控制 getter/setter 对的行为和底层状态管理，同时 API 的客户端与实现更改保持隔离。
> 
>  **尽管因此使用访问器方法具有显着优势，但编写访问器方法是一个乏味的过程。此外，对于 API 的使用者可能很重要的属性的某些方面会被隐藏起来——例如访问器方法是否是线程安全的，或者在设置时是否复制新值。
> 
> ***声明的属性*****通过提供以下特性来解决这些问题：**
> 
> *   属性声明为访问器方法的行为方式提供了清晰、明确的规范。
> *   编译器可以根据您在声明中提供的规范为您合成访问器方法。
> *   属性在语法上表示为标识符并具有范围，因此编译器可以检测到未声明属性的使用。**

 ****参考：** [https ://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectiveC/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17-SW1](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectiveC/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17-SW1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T04:25:06.433

扩展 kameleon 博士的回答，在这种情况下 iVar 是不必要的，因为它们可以在 @synthesize 行显式声明。例如，`@synthesize name = _name`与在 .h 中声明 iVar 相同（请注意，此语法需要该属性）。没有一个比另一个更好，一个只是更有效的编码。**

# python - 有没有一种简单的方法可以将 Flask 服务器作为可执行文件分发？

> ID：10202711
> 
> 赞同：4
> 
> 时间：2012-04-18T04:19:47.020
> 
> 标签：python, backbone.js, executable, flask

我正在使用 Backbone.js 构建一些简单的编辑器，我希望能够将它们作为应用程序分发给用户，以便以主要客户端的方式编辑内容（即，我不希望用户不得不做设置诸如 MySQL 或 Apache 之类的东西）。

所以我在想象这样一个场景：

1.  用户下载 .zip 文件
2.  在结果打开的文件夹中，用户单击 index.html
3.  在浏览器中打开
4.  主干应用程序启动，将数据存储在`localStorage`
5.  然后用户可以导出为 CSV。

信不信由你，这将解决我的问题：我想帮助用户在浏览器中编辑数据，然后以熟悉的格式将其取回（例如，CSV 可以加载到 Excel 中）。

而且我想在不强迫他们配置服务器的情况下这样做。看起来这在 HTML5 堆栈中几乎是可能的。但是，在至少一个浏览器（Chrome）中，这不起作用，因为我收到这样的错误：

```
XMLHttpRequest cannot load file:///users/me/project/data/Appdata.json. Origin null is not allowed by Access-Control-Allow-Origin. 
```

（奇怪的是，我在 Firefox 中没有收到该错误，并且`.js`or`.json`文件加载正常。）

所以在这一点上，在我看来，让这些用户使用某种本地服务器来提供 Backbone 接口是没有办法的。

因此，我试图弄清楚如何构建一个可分发的跨平台可执行文件，以允许我的用户启动 Flask 服务器。（我希望为 Backbone.js 应用程序构建一个 REST 后端。）

这是一厢情愿吗？我假设我可以让相关人员安装 Python。

这是可行的吗？似乎有很多方法可以打包 Python 程序，（pyinstaller？py2exe？...）所以我想我会在这里问一下，以防有人知道我想到的堆栈的解决方案。

蒂亚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T04:31:52.250

You can use Anthony [Gordon McMillan’s Pyinstaller](http://www.pyinstaller.org/) or [Tuininga’s cx_Freeze](http://starship.python.net/crew/atuining/cx_Freeze/)

Quoting the [PyInstaller](http://www.pyinstaller.org/#Features) website:

> Features
> 
> Packaging of Python programs into standard executables, that work on computers without Python installed.
> 
> Multiplatform: works under
> 
> *   Windows (32-bit and 64-bit),
> *   Linux (32-bit and 64-bit),
> *   Mac OS X (32-bit only, 64-bit in git, see Features/MacOsCompatibility) and experimentally Solaris and AIX (in git).
> 
> Multiversion: works under any version of Python from 2.2 up to 2.7.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T04:25:47.697

我的建议是围绕您的代码创建一个瘦服务包装器。这将允许服务器独立于您的主代码库运行 - 也允许用户直接关闭服务器（只需右键单击服务图标并选择“退出”）。

[这个 SO 答案](https://stackoverflow.com/questions/32404/can-i-run-a-python-script-as-a-service-in-windows-how)应该可以帮助您入门。

阅读您更新的问题后，我认为像[猫鼬](http://code.google.com/p/mongoose/)这样的东西可能更适合您的任务。它是一个可嵌入的 Web 服务器，它是 FLOSS 并具有 python 绑定。烧瓶可能是矫枉过正。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T04:29:37.303

Not easily. On Windows, you'd have to include Python itself. Mac and Linux usually have Python installed, but you can't be sure of what version so it's often easier to bundle your specific Python for them as well. Then you'd have to include all the dependencies that you want to run with in your package or be able to install them with pip, easy_install, etc.

You can use [py2app](http://svn.pythonmac.org/py2app/py2app/trunk/doc/index.html#abstract) and [py2exe](http://www.py2exe.org/). This won't be cross-platform as you'll still need to make a different version for each target OS. The only way to make it cross-platform is to bundle all versions and have some cross-platform code execute the appropriate version for that platform.

If you need databases like MySQL or even SQLite things get more complicated as you'll have to include those too.

# java - Java Swing Combobox removeAllItems 也调用 ItemStateChanged？

> ID：10202718
> 
> 赞同：2
> 
> 时间：2012-04-18T04:20:26.280
> 
> 标签：java, swing, methods, jcombobox, comboboxmodel

我的代码实际上很简单。我从[这篇文章](http://www.exampledepot.com/egs/javax.swing/combobox_CbAddItems.html)中看到了一个简单且类似的代码。

起初，**我有 1 个组合框**。我有一个名为**itemStateChanged()**的侦听器。我添加到这个监听器的目的是：“**当用户从其保管箱中单击（选择）一个项目时执行一些代码**”。

```
Cmb_ItemCategory = new javax.swing.JComboBox();

Cmb_ItemCategory.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Loading..." }));

Cmb_ItemCategory.addItemListener(new java.awt.event.ItemListener() {
    public void itemStateChanged(java.awt.event.ItemEvent evt) {
        Cmb_ItemCategoryItemStateChanged(evt);
    }
});

private void Cmb_ItemCategoryItemStateChanged(java.awt.event.ItemEvent evt) {

        if(evt.getStateChange() == java.awt.event.ItemEvent.SELECTED){
        System.err.println("Sombody click or change my model content");
        }

    } 
```

在代码后面，我抓取了一些数据，然后调用了 removeAllItems() 方法。然后我在其中设置了一个新模型（来自新数据）。

```
-- at another line of code ---
Cmb_ItemCategory.removeAllItems();
Cmb_ItemCategory.setModel(newModel); 
```

我意识到当我执行**removeAllItem()**方法时，我的**itemStateChanged() 被调用。**调用一次。

 **那么，如何使其仅在用户单击（选择）时才被调用，而不是在 removeAllItems() 调用时调用？

它类似于[这篇文章。](https://stackoverflow.com/questions/330590/why-is-itemstatechanged-on-jcombobox-is-called-twice-when-changed)但这不是删除Items 的情况。CMIIW。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T06:00:13.890

在这里检查这段代码，它完美无缺，可能是你在调用的地方做错了什么`removeAllItems()`：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class ComboState 
{
    private void createAndDisplayGUI()
    {
        JFrame frame = new JFrame("Combo State Testing : ");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        final JComboBox cbox = new JComboBox();
        cbox.addItem("One");
        cbox.addItem("Two");
        cbox.addItem("Three");
        cbox.addItem("Four");
        cbox.addItemListener(new ItemListener()
        {
            public void itemStateChanged(ItemEvent ie)
            {
                if (ie.getStateChange() == ItemEvent.SELECTED)
                {
                    System.out.println("Item Selected is : " + ie.getItem());
                }
                /*else
                {
                    System.out.println("I am called for other reasons.");
                }*/
            }
        });

        /*
         * Click me to remove JComboBox's items.
         */
        JButton removeButton = new JButton("REMOVE");
        removeButton.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent ae)
            {
                cbox.removeAllItems();
            }
        });

        frame.add(cbox, BorderLayout.CENTER);
        frame.add(removeButton, BorderLayout.PAGE_END);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new ComboState().createAndDisplayGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T06:09:54.200

正如 nIcE cOw 已经在他的示例中说明的那样，当您使用 a 时它肯定可以工作`DefaultComboBoxModel`（在他的示例代码中就是这种情况，尽管它发生在屏幕后面）。

我可以解释您遇到的非`DefaultComboBoxModel`案例行为，尽管您的代码片段建议您使用一种。查看源代码是否`JComboBox#removeAllItems`存在不同的代码路径，因为该`removeAllElements`方法不是`MutableComboBoxModel`接口的一部分

```
public void removeAllItems() {
    checkMutableComboBoxModel();
    MutableComboBoxModel<E> model = (MutableComboBoxModel<E>)dataModel;
    int size = model.getSize();

    if ( model instanceof DefaultComboBoxModel ) {
        ((DefaultComboBoxModel)model).removeAllElements();
    }
    else {
        for ( int i = 0; i < size; ++i ) {
            E element = model.getElementAt( 0 );
            model.removeElement( element );
        }
    }
    selectedItemReminder = null;
    if (isEditable()) {
        editor.setItem(null);
    }
} 
```

因此，使用 non-`DefaultComboBoxModel`您将一项一项删除项目。这意味着在某个时间点，您将删除选定的元素。您的模型的可能实现可能会在此时更改所选元素。如果您查看示例中的实现`DefaultComboBoxModel`（尽管不会触发此代码），您可以清楚地看到它更改了选择。

```
public void removeElementAt(int index) {
    if ( getElementAt( index ) == selectedObject ) {
        if ( index == 0 ) {
            setSelectedItem( getSize() == 1 ? null : getElementAt( index + 1 ) );
        }
        else {
            setSelectedItem( getElementAt( index - 1 ) );
        }
    }

    objects.removeElementAt(index);

    fireIntervalRemoved(this, index, index);
} 
```

也许你的模型做了类似的事情，这解释了这个事件。`DefaultComboBoxModel#removeAllElements`只是为了使这篇文章完整，您可以清楚地看到它后面的代码将选择设置为`null`而不选择另一个对象。该代码中唯一奇怪的是它不会`DESELECTED`首先触发事件，尽管您知道如果您侦听该`intervalRemoved`事件，则选择已更改……但这与您的问题并不真正相关

```
public void removeAllElements() {
    if ( objects.size() > 0 ) {
        int firstIndex = 0;
        int lastIndex = objects.size() - 1;
        objects.removeAllElements();
        selectedObject = null;
        fireIntervalRemoved(this, firstIndex, lastIndex);
    } else {
        selectedObject = null;
    }
} 
```

所以总结一下：我说您的问题的解决方案位于您的模型中，而不是您发布的代码中

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T04:28:14.610

一种快速的方法是在调用 removeAllItem() 之前将 bool 设置为 true 并在之后返回 false。仅当 bool 变量为 false 时才执行 itemStateChanged() 中的代码。

理想情况下，您可以覆盖 removeAllItem() 函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T08:16:39.767

从整个讨论中不清楚，

*   在删除所有项目之前，您必须从 JComboBox 中删除所有侦听器，在删除项目后，您可以重新添加侦听器，

*   仍然不确定是否要动态添加和删除项目，或者您可以为另一个 JComponent 设置任何值，

*   （反对使简单的事情复杂化）你看到那里删除了吗，

.

```
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import javax.swing.*;

public class ComboBoxTwo extends JFrame implements ActionListener, ItemListener {

    private static final long serialVersionUID = 1L;
    private JComboBox mainComboBox;
    private JComboBox subComboBox;
    private Hashtable<Object, Object> subItems = new Hashtable<Object, Object>();

    public ComboBoxTwo() {
        String[] items = {"Select Item", "Color", "Shape", "Fruit"};
        mainComboBox = new JComboBox(items);
        mainComboBox.addActionListener(this);
        mainComboBox.addItemListener(this);
        //prevent action events from being fired when the up/down arrow keys are used
        //mainComboBox.putClientProperty("JComboBox.isTableCellEditor", Boolean.TRUE);
        getContentPane().add(mainComboBox, BorderLayout.WEST);
        subComboBox = new JComboBox();//  Create sub combo box with multiple models
        subComboBox.setPrototypeDisplayValue("XXXXXXXXXX"); // JDK1.4
        subComboBox.addItemListener(this);
        getContentPane().add(subComboBox, BorderLayout.EAST);
        String[] subItems1 = {"Select Color", "Red", "Blue", "Green"};
        subItems.put(items[1], subItems1);
        String[] subItems2 = {"Select Shape", "Circle", "Square", "Triangle"};
        subItems.put(items[2], subItems2);
        String[] subItems3 = {"Select Fruit", "Apple", "Orange", "Banana"};
        subItems.put(items[3], subItems3);
//      mainComboBox.setSelectedIndex(1);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        String item = (String) mainComboBox.getSelectedItem();
        Object o = subItems.get(item);
        if (o == null) {
            subComboBox.setModel(new DefaultComboBoxModel());
        } else {
            subComboBox.setModel(new DefaultComboBoxModel((String[]) o));
        }
    }

    @Override
    public void itemStateChanged(ItemEvent e) {
        if (e.getStateChange() == ItemEvent.SELECTED) {
            if (e.getSource() == mainComboBox) {
                if (mainComboBox.getSelectedIndex() != 0) {
                    FirstDialog firstDialog = new FirstDialog(ComboBoxTwo.this,
                            mainComboBox.getSelectedItem().toString(), "Please wait,  Searching for ..... ");
                }
            } 
        }
    }

    private class FirstDialog extends JDialog {

        private static final long serialVersionUID = 1L;

        FirstDialog(final Frame parent, String winTitle, String msgString) {
            super(parent, winTitle);
            setModalityType(Dialog.ModalityType.APPLICATION_MODAL);
            JLabel myLabel = new JLabel(msgString);
            JButton bNext = new JButton("Stop Processes");
            add(myLabel, BorderLayout.CENTER);
            add(bNext, BorderLayout.SOUTH);
            bNext.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent evt) {
                    setVisible(false);
                }
            });
            javax.swing.Timer t = new javax.swing.Timer(1000, new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    setVisible(false);
                }
            });
            t.setRepeats(false);
            t.start();
            setLocationRelativeTo(parent);
            setSize(new Dimension(400, 100));
            setVisible(true);
        }
    }

    public static void main(String[] args) {
        JFrame frame = new ComboBoxTwo();
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-27T22:12:45.397

removeAllItems 方法没有调用 ItemStateChanged，但它调用了 actionPerformed，您可以通过运行以下简单代码来检查它：

```
public class Tuto {

    public static void main(String[] args) {
        //create the main frame
        JFrame frame = new JFrame();
        frame.setResizable(false);
        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        frame.setLayout(null);
        frame.setLocation(new Point(10, 10));
        frame.setPreferredSize(new Dimension(400, 300));

        JComboBox<String> combo = new JComboBox();
        combo.addItem("item 1");
        combo.addItem("item 2");
        combo.addItem("item 3");
        combo.setBounds(50, 30, 300, 20);
        combo.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                System.out.println(" action Performed ");
            }
        });
        frame.add(combo);

        JButton button = new JButton("Remove");
        button.setBounds(50, 100, 100, 30);
        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                combo.removeAllItems();
            }
        });
        frame.add(button);

        frame.pack();
        frame.setVisible(true);
    }

} 
```**

# excel - Excel 文件中的 ActiveX 控件在某些计算机上给出“无法加载对象...”错误

> ID：10202719
> 
> 赞同：2
> 
> 时间：2012-04-18T04:20:27.957
> 
> 标签：excel, vba, com, activex

我们在公司的几台机器上使用了一组 Excel 文件。这些文件包含一个 VBA 应用程序，它利用库中的几个 ActiveX 控件对象`mscomct2.ocx`（即`MonthView`和`DateTimePicker`）。ActiveX 对象将显示在用户窗体中。不幸的是，这些文件的可移植性似乎以一种非常特殊的方式受到限制。

似乎有 2 组机器：

*   **A 组：**我可以在此类机器上创建一个包含 Excel 文件`MonthView`，并在任何 A 组 PC 上使用它。但是当我尝试在 B 组的任何机器上打开这个文件时，我得到了一个*无法加载对象，因为它在这台机器上不可用*错误。但是，在 B 组机器上创建的具有相同 ActiveX 的文件在 A 机器上可以正常工作。
*   **B 组：**在这些机器上创建的带有相关 ActiveX 的文件可以在任何地方工作（即在任何 A 和 B 机器上）。但是，正如我之前所说，当打开A机器上保存的带有ActiveX的文件时，B机器会出现上述错误。

一句话：*在A机器上创建的文件只在其他A机器上工作，在B机器上创建的文件无处不在*！

这里最奇怪的是每台机器都已`mscomct2.ocx`注册（再一次：我可以`MonthView` **在任何有问题的机器上**创建表单！）。它`.ocx`本身在每台机器上就位，并且存在整套注册表项（用于控件类的 CLSID、IID、typelib ID...）。此外，这些注册表项中的数据在 A 组和 B 组机器（GUID、ProgID、版本等）上似乎相同。某些机器上的描述字符串（如“Microsoft MonthView Control 6.0 (SP6)”之类的值）略有不同，但这似乎不会影响情况（B组中的一些机器有这样的描述不同，但在它们上创建的文件仍然可以在任何地方工作）。

自然，由于墨菲定律，我用来编辑这些 Excel 文件的机器属于 A 组，所以这里保存的文件对于 B 机器是“不可移植的”......

操作系统和 Excel 版本似乎不会影响这种情况。例如，其中一台 B 机器在 Win 7 64 位 (Excel 2007) 下工作，而大多数其他 A 组和 B 组机器是 Win XP Prof (32 位) SP3，安装了 Excel 2003。因此，OS 和 Excel 版本似乎不会影响兼容性，并且问题与 ActiveX 有某种联系。

我发现 A 组和 B 组之间唯一与 ActiveX 相关的差异是文件版本`mscomct2.ocx`：至少有几台 A 机器的版本为 6.1.xx，而 B 组的版本为 6.0.xx 我不明白这种差异如何导致问题（ ActiveX 毕竟是 COM 对象，根据注册表键值，暴露的 typelib、com 对象和接口似乎在所有情况下都是相同的）。尽管如此，我还是尝试`ocx`用 6.0.xx 版本替换我的 6.1.xx ......但遇到了更多麻烦。我所做的是：

1.  `regsvr32 /u mscomct2.ocx`- 成功完成
2.  替换了`mscomct2.ocx`6.0.xx 版本的文件
3.  `regsvr32 mscomct2.ocx`- 成功完成

在这些步骤之后，我尝试使用包含`MonthView`. 但是当我试图在表单中放置一个控件时，我得到了一个带有错误*Class not registered*的消息框。这真的很奇怪，因为一切似乎都已注册：控件类、它的接口、typelib（是的，我已经检查了注册表以确定）。但是错误仍然存​​在。

之后，我再次执行取消注册/替换/注册程序以返回到我原来的 6.1.xx 文件。这让我回到了最初的 SNAFU 情况：我可以再次将 ActiveX 安装到用户表单并使用它，但是 B 组机器仍然在我的机器保存的文件上给出错误。

我认为文件与 ActiveX 的可移植性问题和`ocx`注册问题有某种联系，但我不知道如何联系。也许在 Excel VBA 中注册 ActiveX 有一些额外的要求，我不知道......

我唯一需要的是让我的 Excel 文件中包含的 ActiveX 对象与其他机器兼容。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:37:18.833

我认为一组（可能是“A”）安装了这个：http: [//www.microsoft.com/download/en/details.aspx?id=10019](http://www.microsoft.com/download/en/details.aspx?id=10019)，另一组没有。

# qt - 为什么将“q_ptr”指针分配给 QObject 的“this”指针？

> ID：10202723
> 
> 赞同：1
> 
> 时间：2012-04-18T04:20:39.737
> 
> 标签：qt

如题，为什么“q_ptr”指针被赋值给QObject的“this”指针？在源代码中。

```
QObject::QObject(QObjectPrivate &dd, QObject *parent)
: d_ptr(&dd)
{
>>Q_D(QObject);
>>d_ptr->q_ptr = this;/*question*/
....... 
```

然后，当`Q_Q()`在源代码中使用宏时，如吹：

```
Q_Q(QWidget) 
```

它将返回由函数 q_fun() 处理的 q 指针：

```
QWidget*q_func() {return static_cast<QWidget*>(q_ptr);} 
```

众所周知，`static_cast`从父母传给孩子是不安全的。

我很沮丧`/*question*/`，有人能告诉我这个秘密吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T04:33:37.103

```
d_ptr->q_ptr = this;/*question*/ 
```

这是私有实现对象（[PIMPL idiom](http://en.wikipedia.org/wiki/Opaque_pointer)）被告知它正在为/使用的对象（非私有`QObject`）的地方。这是有关 Qt 和s (d_ptr)信息[的一个很好的链接。](http://zchydem.enume.net/2010/01/19/qt-howto-private-classes-and-d-pointers/)`d pointer`

`Q_Q`宏返回指向 的指针`QObject`，因此您可以从它发出信号（除其他外）。至于`static_cast`位，这是安全的，因为宏对由`Q_DECLARE_PRIVATE`和`Q_DECLARE_PUBLIC`宏创建的每个类的定义不同：结果`static_cast`总是转换为正确的类型。再次，我建议阅读链接。

# iphone - NavigationController 和 ToolBar 问题

> ID：10202729
> 
> 赞同：0
> 
> 时间：2012-04-18T04:21:42.737
> 
> 标签：iphone, ios, user-interface, uiviewcontroller, uitoolbar

我有一个带有两个视图的导航控制器。第一个视图是一个带有 TableView 的 ViewController，第二个视图是带有一些 UILabel 和一个 UIWebView 的 UIView。当从 TableView 中选择一个单元格时，导航控制器会推送到第二个视图。

我已经向导航控制器和一些按钮添加了 UIToolBar。

我的问题是当导航控制器推送到第二个视图（UIView）时，我的 UIToolBar 出现但没有按钮。

我想显示不同的按钮或从第二个视图中删除 UIToolBar。我想我需要在 AppDelegate 中做一些事情，我只是不确定是什么以及如何做。

这是我的 XIBS 的外观：

```
MainWindow
- App Delegate
- Window
- Navigation Controller
-- Navigation Bar
-- ToolBar
-- View Controller 
--- Bar Button Item
--- Navigation Item 
---- Bar Back Item

ViewController
-TableView

DetailView
-View
--Web View
--Label
--Label 
```

代码：

AppDelgate.h

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>
{
 UIWindow *window;
 UINavigationController *navigationController;
 UIToolbar *toolBar;  
}

@property (nonatomic, strong) IBOutlet UIWindow *window;
@property (nonatomic, strong) IBOutlet UINavigationController *navigationController;
@property (nonatomic, strong) IBOutlet UIToolbar *toolBar;

@end 
```

AppDelegate.m

```
@implementation AppDelegate

@synthesize window;
@synthesize navigationController;
@synthesize toolBar;

- (void)applicationDidFinishLaunching:(UIApplication *)application {    

// Override point for customization after app launch    

[window addSubview:[navigationController view]];

[window makeKeyAndVisible];

}

- (void)applicationWillTerminate:(UIApplication *)application {
// Save data if appropriate
}

@end 
```

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T04:26:35.107

您必须为加载到堆栈中的每个 View 指定 toolBarItems。所以，

```
-(void)viewDidLoad{
    [self setToolbarItems:myArrayOfItems];
    //do this in every view controller
    //other code.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:09:33.057

我不能清楚地告诉你。我提出这个假设。如果您想在 nextview 的顶部栏中添加按钮，则不要使用工具栏。您可以在导航栏本身添加按钮。您可以使用 addsubview 方法添加按钮。使用 initwithframe 初始化 UIbutton。然后将其添加为导航控制器的子视图。[navigationcont addsubview:button];

# model-view-controller - 实体框架和缓存 - 更改回溯到缓存

> ID：10202733
> 
> 赞同：2
> 
> 时间：2012-04-18T04:22:09.703
> 
> 标签：model-view-controller, caching, entity-framework-4

我从实体模型中提取了一些数据。这包含项目的属性，比如具有最大速度、重量和尺寸的汽车零件。由于有很多部分并且基本属性永远不会改变，所以我已经缓存了所有记录。

根据使用这些部件的汽车，这些属性现在可能会更改，因此我设置了一辆新车，将缓存项“Engine”中的值复制到新车对象，然后添加“TurboCharger”，这会提高最大速度，发动机的重量和尺寸。

我遇到的问题是实体模型似乎仍在将上下文跟踪*回*缓存数据。因此，当通过本地方法增加权重时，它会为所有用户增加权重。我尝试将**“MergeOption.NoTracking”**添加到我的上下文中，因为这应该会删除所有实体跟踪，但它似乎仍在回溯。如果我关闭缓存，它会正常工作，因为它每次都从数据库中提取新值。

如果我想从我的实体模型中复制一条记录，有没有一种方法可以说“复制对象但将其视为标准对象，没有来自实体的历史”，这样一旦我的汽车具有项目的属性，它只是一个扁平的物体？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T04:29:21.593

我不太确定 MergeOption.NoTracking 在整个上下文中以及确切的作用，但您可以做的替代方法是将 .AsNoTracking() 从数据库中添加到您的查询中。这肯定会返回一个分离的对象。在此处查看有关 AsNoTracking 用法的一些详细信息：http: [//blog.staticvoid.co.nz/2012/04/entity-framework-and-asnotracking.html](http://blog.staticvoid.co.nz/2012/04/entity-framework-and-asnotracking.html)。

另一件事是确保在插入缓存之前枚举您的集合，以确保您不在可查询对象中执行操作，即使用.ToArray()。

另一种选择是手动将对象从上下文中分离（使用 Detach(T entity)）。

# linq - Linq是这个string.Compare在查询中效率低下，有没有更好的办法？

> ID：10202735
> 
> 赞同：3
> 
> 时间：2012-04-18T04:23:03.467
> 
> 标签：linq, entity-framework

最初我有这个方法：

```
public virtual User GetUser(string username)
        {
            return _db.Users.Single(x => x.UserName == username);
        } 
```

所以基本上是一种 linq 方法，它根据用户的用户名获取用户。

麻烦的是我发现有时用户名在开始时带有一个大写字符，所以它并不总是有效。

所以我想出了：

```
public virtual User GetUser(string username)
        {
            return _db.Users.Single(x => (string.Compare(x.UserName, username, true) == 0));
        } 
```

这行得通。但是，我知道这样做肯定效率很低。为用户比较？

有没有更好的方法来写这个没有string.Compare？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T05:23:32.530

String.Compare 不在实体框架支持的函数列表中（请参阅[支持的函数列表](http://msdn.microsoft.com/en-us/library/bb738681.aspx)）这意味着当您执行此查询时，实体框架将检索执行此比较所需的整个数据集并在本地执行比较。这将非常缓慢。

一个更好的解决方案是使用 == 来比较字符串，例如：

```
return _db.Users.Single(x => x.UserName == username); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-14T23:44:52.073

我会用`String.Equals`

```
return _db.Users.Single(x => 
          String.Equals(x.UserName, username, StringComparer.OrdinalIgnoreCase)) 
```

如果我想将“Martín”与“martin”（口音）匹配，我会使用`String.Compare`.

```
return _db.Users.Single(x => 
         string.Compare(x.UserName, username, CultureInfo.CurrentCulture, CompareOptions.IgnoreNonSpace); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T04:29:39.333

```
public virtual User GetUser(string username)
        {
            return _db.Users.Single(x => x.UserName.ToLower() == username.ToLower());

        } 
```

But I don't think the compare will be much slower though....

# google-app-engine - appengine 备份期间耗尽配额

> ID：10202745
> 
> 赞同：0
> 
> 时间：2012-04-18T04:24:13.483
> 
> 标签：google-app-engine

我正在备份我的 AppEngine 站点，如下所示：[如何备份 AppEngine 站点？](https://stackoverflow.com/questions/2946183/how-to-backup-an-appengine-site)

如果我用完我的配额，我可以在第二天以某种方式恢复吗？

# javascript - 我们可以使用javascript为firefox创建浏览器扩展吗

> ID：10202753
> 
> 赞同：-1
> 
> 时间：2012-04-18T04:25:46.663
> 
> 标签：javascript, dom

我试图编写一个可以作为浏览器扩展添加的脚本。这个脚本的问题是如何访问网页的 dom 元素。我使用 XMLHttpRequest 对象访问网页，但它具有相同的来源策略问题。我工作了将近 3 周，最后我使用了 Anyorigin.com 代码，但我无法获得所有功能，所以我想到使用用户脚本，我们可以轻松访问网页的 DOM 元素。有没有其他方法来创建扩展

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T04:33:25.507

试试这个：

> **Greasemonkey：** 通过使用少量 JavaScript 自定义网页的显示或行为方式。

[https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/](https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/)

* * *

**更新**：

这看起来是一个更好的解决方案，但我还没有测试过。

[http://crossrider.com/](http://crossrider.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T04:54:04.813

虽然 enloz 的回答很好，但 Firefox 有一个可供您使用的[附加组件生成器。](https://addons.mozilla.org/en-US/developers/builder)

附加组件是使用 HTML、CSS 和 JavaScript 构建的。有一个基于网络的版本，具有以下功能（引自他们的网站）：

> *   在功能丰富的环境中编辑代码
> *   立即测试您的附加组件
> *   使用内置版本控制和共享

您可以在此处找到基于 Web 的版本：[https ://builder.addons.mozilla.org/](https://builder.addons.mozilla.org/)

# joomla - joomla 管理控制面板的后端没有显示任何内容

> ID：10202754
> 
> 赞同：2
> 
> 时间：2012-04-18T04:25:47.727
> 
> 标签：joomla, joomla1.7, joomla-template, joomla2.5

![在此处输入图像描述](../Images/daac14951aea8bbb4a0af7109cecb632.png)

当我登录 joomla 的后端管理部分时，它的显示为什么会这样？

看到这个我完全糊涂了……

这是任何错误吗

或任何插件问题...

该网站已在一个月前从 1.7 升级到 2.5.. 但后来也没有看到任何此类问题的暗示....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:53:03.130

我的一个朋友遇到了这个问题，我帮他缩小了范围。

这个问题是由在你的 joomla 数据库中摆弄**_viewlevels表引起的。**一些插件/扩展也可能做出这样的改变。

在 Joomla 中，内容按可以查看/访问的人分类。内容访问分类分为三个级别：

*   公开 - 对网站的所有访问者开放。
*   已注册 - 仅限于网站的所有七个已注册用户组。
*   特殊 - 仅限于所有用户组，除了访客和注册用户。

管理员属于特殊。给予特殊所有权限可以解决你的问题。出于某种原因，特殊类不再能够访问应用程序中管理员面板的菜单。

编辑**视图级别表中的****特殊**条目，使其如下所示：

 **```
 id           title           ordering        rules             
|-------------|----------------|-------------|----------------| 
| 3           | Special        | 2           |[1,2,3,4,5,6,7,8]|   
|-------------|----------------|-------------|----------------| 
```

来源： [用户：访问控制级别 - Joomla 文档](http://help.joomla.org/content/view/228/153/1/2/)**

# sql - Oracle SQL 使用 Like 作为通配符

> ID：10202763
> 
> 赞同：7
> 
> 时间：2012-04-18T04:26:50.987
> 
> 标签：sql, oracle, select, where, sql-like

我知道您可以将 LIKE 用于选择语句来搜索字符串，然后使用通配符来匹配该字符串.. 例如：

`Select * from table where first_name LIKE '%r%';`

将返回名称，例如 robert、roland、craig 等。

我很好奇您将如何在字符串中搜索实际的通配符，例如 %：

`Select * from table where values LIKE '% % %';`

（中间 % 是您要寻找的）（显然这不是正确的方法，这就是我要问的原因）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T04:29:52.203

怎么样

```
LIKE '%\%%' ESCAPE '\' 
```

[http://docs.oracle.com/cd/B12037_01/server.101/b10759/conditions016.htm](http://docs.oracle.com/cd/B12037_01/server.101/b10759/conditions016.htm)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-08-13T08:44:28.280

就像 LIKE '%%' 会更容易。

# c - C - 使用 fgetc 将值存储在枚举“类”中

> ID：10202766
> 
> 赞同：0
> 
> 时间：2012-04-18T04:27:09.923
> 
> 标签：c, struct, enums, fgetc

我正在编写一个程序，它接受一个包含数据库条目的文件。这些条目都采用相同的格式，数据的顺序相同。文件中的第一个数字是条目数。然后数据如下所示： LastName FirstName StudentID age year GPA expectedGraduationDate

例如：Doe John 12345678 23 大一 4.0 2013

我的问题是年份值。我们应该将它声明为“类”类型，它应该是`enum class{freshman, sophomore, junior, senior, grad};`

我有一个带有以下声明的头文件：

```
typedef enum {firstYear, sophomore, junior, senior, grad} class; 
```

然后我的主文件：

```
#include <stdio.h>
#include <stdlib.h>
#include "class.h"

int main(int argc, char *argv[]){

typedef struct{
        int DBrecordID;         //ID for each entry, range 0-319
        char *last;             //student last name
        char *first;            //student first name
        char studentID[8];      //student ID
        int age;                //student age
        class year;             //year in school
        float gpa;              //GPA
        int expGradYear;        //expected graduation year
}DBrecord;
int numEntries;
DBrecord **record;
char buffer[80];
FILE *fpt;
int c, i;
int j = 0;

//check for invalid file arguments
if(argc != 2){
        printf("Number of arguments is invalid\n");
        exit(1);
}

//error if unable to open file
if((fpt = fopen(argv[1], "r")) == NULL){
        printf("Error: Couldn't open file.\n");
        exit(1);
}

//set file pointer to read passed file
fpt = fopen(argv[1], "r");

//scan first int in file and assign to numEntries
//fscanf(fpt, "%d", &numEntries);

//allocate memory for structures, each is 36 bytes
*record = malloc (sizeof (DBrecord) * numEntries);

//loop through each DB entry
do{
        for(i=0; i<numEntries; i++){
                numEntries = record[i]->DBrecordID;
                do{
                        c=fgetc(fpt);
                        buffer[j++] = c;
                }while(c != ' ');
                        strcpy(record[i]->last, buffer);
                        j=0;
                do{
                        c=fgetc(fpt);
                        buffer[j++] = c;
                }while(c != ' ');
                        strcpy(record[i]->first, buffer);
                        j=0;
                do{
                        c=fgetc(fpt);   
                        buffer[j++] = c;
                }while(c != ' ');
                        strcpy(record[i]->studentID, buffer);
                        j=0;
                do{
                        c=fgetc(fpt);
                        memcpy(c, buffer[j++], 1);
               }while(c != ' ');
                        memcpy(buffer, record[i]->year, 4);
                        j=0;
                do{
                        c=fgetc(fpt);
                        buffer[j++] = c;
                }while(c != ' ');
                        memcpy(buffer, record[i]->gpa, 4);
                        j=0;
                do{  
                        c=fgetc(fpt);
                        buffer[j++] = c;
                }while(c != ' ' || c != '\n');
                        memcpy(buffer, record[i]->expGradYear, 4);
                        j=0;
         }
}while(c != EOF);

return 0;
} 
```

*更新错误

main.c:75：警告：传递 `memcpy' 的 arg 1 使指针从整数而不进行强制转换

main.c:75：警告：传递 `memcpy' 的 arg 2 使指针从整数而不进行强制转换

main.c:77：“memcpy”的参数 2 的类型不兼容

main.c:83：“memcpy”的参数 2 的类型不兼容

main.c:89：警告：传递 `memcpy' 的 arg 2 使指针从整数而不进行强制转换

main.c:94：在“DBrecord”之前解析错误

所以我假设我不能用 memcpy 做我想做的事情，或者我做错了。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T04:40:55.203

程序中有很多错误，但首先

1)`record`应该是`DBrecord*`not类型`DBrecord**`

2）`strcpy`将目的地作为第一个参数，所以这不起作用 `strcpy(buffer, record[i]->last);`

3）您还需要为`record[i]->last`

4) `strcpy`用于复制字符串，因此如果您不想存储到浮点数或 int 即 gpa 等，您还需要使用`memcpy`缓冲区中的值应该使用转换`strol` `strod`

也建议拿到这本书[K&R](https://rads.stackoverflow.com/amzn/click/com/0131103628)加班真的很有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T04:31:55.650

你为什么要尝试`strcpy`（**字符串**复制）从`int`, like `expGradYear`？

`strcpy`用于字符串。如果要将 int 附加到缓冲区，请使用`memcpy`（**MEMory** Copy）

# java - 《Java Concurrency In Practice》还有效吗？

> ID：10202768
> 
> 赞同：306
> 
> 时间：2012-04-18T04:27:37.547
> 
> 标签：java, concurrency, java-8, java-7

[*实践中的 Java 并发*](http://amzn.to/1jyE5Kx)仍然有效吗？我想知道书中描述的想法、概念和实现是否仍然与最新的 Java 版本兼容。

我问是因为最新版本是在 2006 年完成的。

* * *

## 回答 #1

> 赞同：641
> 
> 时间：2012-04-18T17:23:08.950

虽然我的观点可能有偏见，但我目前更新这本书的意图几乎是严格的附加，包括 fork-join、并行分解和 Java SE 8 中新的并行批量数据操作。

**编辑 2020：** ……和 Project Loom。

**编辑 2021：** ...和 ​​Project Loom :)

* * *

## 回答 #2

> 赞同：183
> 
> 时间：2012-04-18T04:44:16.500

是的，它在我心中仍然有效。从6到7这方面变化不大。fork-join是一个新特性，非常适合分治类型的问题。但是书中现有的所有东西，例如同步，易失性，servlet，仍然非常有效。

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2013-08-15T22:22:50.503

我在 2013 年买了这本书。我非常怀疑它是否是最新的和有用的，因为这个版本是很久以前出版的。技术世界瞬息万变，软件技术甚至更快。即便如此，这本书也是基础。所讨论的概念和实践比最新最好的 API 更新更能成为良好软件设计和工程的基础。这本书是不可或缺的，我很高兴在我决定写哪怕一行并发代码之前得到它。它可能为我节省了无数小时。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-08-06T01:41:04.900

是的，它肯定仍然有效，但我会另外推荐或作为介绍[*The Well-Grounded Java Developer*](http://www.manning.com/evans/)一本写得很好的书，其中有一章是关于现代 Java 并发技术和做得很好的例子。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-10-22T21:54:45.873

是的。非常。您始终可以跟踪 Java 中引入的新事物，但是，这本书很好地解释了基础知识。

如果它有帮助，这来自使用 OOP 的并发和并行性的全职研究人员。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-04-18T04:36:10.267

我会这么说。JDK7 添加了[fork-join 框架](http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html)，但这是对早期并发工具的增强而不是替代。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-07-04T07:13:33.893

是的。它仍然有效，我从朋友那里得到了很好的反馈。它是学习 Java 并发性的最佳书籍之一。您可以阅读[Java Concurrency In Practice的评论](http://www.javabeat.net/2012/07/book-review-java-concurrency-practice/)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-04-14T19:47:11.170

如果您打算使用 Java 8 开始您的项目，您可能还需要考虑新的书籍和教程，因为 Java 8 中出现了新的东西，例如流、lambdas 和新的原子——这会稍微改变开发方法。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-28T12:02:47.920

好吧，当我在线阅读某些预览章节时，这本书看起来很有前途。它对 Java 和一般并发方面提供了足够的洞察力。在设计和实现幼稚和复杂的并发应用程序时，可以将这本书作为一本方便的装备。

# iphone - iPhone：如何将包含公钥位的 SecKeyRef 或 NSData 导出为 PEM 格式？

> ID：10202774
> 
> 赞同：7
> 
> 时间：2012-04-18T04:28:47.473
> 
> 标签：iphone, objective-c, ios, security, encryption

我已经使用`SecKeyGeneratePair`. 我现在想将公钥传递给服务器，但我不确定如何继续。

我有一个函数`getPublicKeyBits`（取自 Apple 的`CryptoExercise`），但我真的不知道如何处理原始 NSData。这是功能：

```
- (NSData *)getPublicKeyBits {
    OSStatus sanityCheck = noErr;
    NSData* publicKeyBits = nil;
    NSData* publicTag = [[NSData alloc] initWithBytes:publicKeyIdentifier length:sizeof(publicKeyIdentifier)];
    CFDataRef cfresult = NULL;

    NSMutableDictionary * queryPublicKey = [[NSMutableDictionary alloc] init];

    // Set the public key query dictionary.
    [queryPublicKey setObject:(__bridge id)kSecClassKey forKey:(__bridge id)kSecClass];
    [queryPublicKey setObject:publicTag forKey:(__bridge id)kSecAttrApplicationTag];
    [queryPublicKey setObject:(__bridge id)kSecAttrKeyTypeRSA forKey:(__bridge id)kSecAttrKeyType];
    [queryPublicKey setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecReturnData];

    // Get the key bits.
    sanityCheck = SecItemCopyMatching((__bridge CFDictionaryRef)queryPublicKey, (CFTypeRef*)&cfresult); 

    if (sanityCheck != noErr)
    {
        publicKeyBits = nil;
    }
    else 
    {
        publicKeyBits = (__bridge_transfer NSData *)cfresult;
    }

    return publicKeyBits;
} 
```

如何获取这些原始字节数据并将其转换`PEM`为加密库可以理解的类似格式或其他格式？我应该对它进行base64编码吗？我还需要做其他事情吗？

如果有帮助，我正在尝试将公钥与`M2Crypto`可用于 Python 的库一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:01:01.167

我想你会想看看[http://www.openssl.org/docs/crypto/pem.html#](http://www.openssl.org/docs/crypto/pem.html#) 也许：

```
int PEM_write_PrivateKey(FILE *fp, EVP_PKEY *x, const EVP_CIPHER *enc,
                                    unsigned char *kstr, int klen,
                                    pem_password_cb *cb, void *u); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T13:24:41.630

这个页面有一些很棒的技巧和示例代码，用于将您拥有的数据打包成 PEM 格式，以便您可以将其发送到服务器：

[http://blog.wingsofhermes.org/?p=42](http://blog.wingsofhermes.org/?p=42)

您不需要从源代码编译并静态链接的整个 openssl 库来执行此操作。我正在使用这种技术，将 base 64 密钥包装在“-----BEGIN PUBLIC KEY-----”中，Rails 应用程序可以使用标准的 ruby​​ openssl 类读取和使用它。

# java - Expandable List View, Vertical Child

> ID：10202775
> 
> 赞同：0
> 
> 时间：2012-04-18T04:29:02.577
> 
> 标签：java, android, expandablelistview

I made an expandable list like the one in this link: [http://www.techienjoy.com/android-expandable-list-dynamically-created-example.php](http://www.techienjoy.com/android-expandable-list-dynamically-created-example.php), but I want to make the child to look in vertical not horizontal.

I only have 1 xml with:

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<ExpandableListView android:id="@android:id/list" 
          android:layout_width="wrap_content" 
          android:layout_height="wrap_content"
          android:groupIndicator="@null"/> 
```

Everything else is in the class. How can I set them vertical? My java code is the same one in the link.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T04:40:41.240

请看一下这个例子。希望这会帮助你。

```
public class ExpandListViewActivity extends ExpandableListActivity
{
 /**
  * strings for group elements
  */
    static final String arrGroupelements[] = 
    {
   "India",
   "Australia",
   "England",
   "South Africa"
 };

    /**
  * strings for child elements
  */
 static final String arrChildelements[][] = 
 {
   {
  "Sachin Tendulkar",
  "Raina",
  "Dhoni",
  "Yuvi"
   },
   {
  "Ponting",
  "Adam Gilchrist",
  "Michael Clarke"
   },
   {
  "Andrew Strauss",
  "kevin Peterson",
  "Nasser Hussain"
   },
   {
  "Graeme Smith",
  "AB de villiers",
  "Jacques Kallis"
   }
    };
 static final int arrChildelementsim[][] = 
 {
   {
  R.drawable.ic_launcher,
  R.drawable.aqua,
  R.drawable.pin_red,
  R.drawable.aqua,
   },
   {
       R.drawable.ic_launcher,
       R.drawable.ic_launcher,
       R.drawable.ic_launcher,

   },
   {
       R.drawable.ic_launcher,
       R.drawable.ic_launcher,
       R.drawable.ic_launcher,

   },
   {
       R.drawable.ic_launcher,
       R.drawable.ic_launcher,
       R.drawable.ic_launcher,

   }
    };
 DisplayMetrics metrics;
 int width;
 ExpandableListView expList;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.main);

        expList = getExpandableListView();
        metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);
        width = metrics.widthPixels;
        //this code for adjusting the group indicator into right side of the view
        expList.setIndicatorBounds(width - GetDipsFromPixel(50), width - GetDipsFromPixel(10));
        expList.setAdapter(new ExpAdapter(this));

  expList.setOnGroupExpandListener(new OnGroupExpandListener()
  {
   @Override
   public void onGroupExpand(int groupPosition) 
   {
    Log.e("onGroupExpand", "OK");
   }
  });

  expList.setOnGroupCollapseListener(new OnGroupCollapseListener()
  {
   @Override
   public void onGroupCollapse(int groupPosition) 
   {
    Log.e("onGroupCollapse", "OK");
   }
  });

  expList.setOnChildClickListener(new OnChildClickListener()
  {

@Override
public boolean onChildClick(ExpandableListView arg0, View arg1, int arg2,
        int arg3, long arg4) {
     Log.e("OnChildClickListener", "OK");
    // TODO Auto-generated method stub
    return false;
}
  });
    }

    public int GetDipsFromPixel(float pixels)
    {
     // Get the screen's density scale
     final float scale = getResources().getDisplayMetrics().density;
     // Convert the dps to pixels, based on density scale
     return (int) (pixels * scale + 0.5f);
    }
    public class ExpAdapter extends BaseExpandableListAdapter {

          private Context myContext;
          public ExpAdapter(Context context) {
           myContext = context;
          }
          @Override
          public Object getChild(int groupPosition, int childPosition) {
           return null;
          }

          @Override
          public long getChildId(int groupPosition, int childPosition) {
           return 0;
          }

          @Override
          public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {

           if (convertView == null) {
            LayoutInflater inflater =  (LayoutInflater) myContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.child_row, null);
           }

           TextView tvPlayerName = (TextView) convertView.findViewById(R.id.tvPlayerName);
           ImageView tvPlayerimage = (ImageView) convertView.findViewById(R.id.tvPlayerImage);
           tvPlayerName.setText(arrChildelements[groupPosition][childPosition]);
           tvPlayerimage.setImageResource(arrChildelementsim[groupPosition][childPosition]);
           return convertView;
          }

          @Override
          public int getChildrenCount(int groupPosition) {
           return arrChildelements[groupPosition].length;
          }

          @Override
          public Object getGroup(int groupPosition) {
           return null;
          }

          @Override
          public int getGroupCount() {
           return arrGroupelements.length;
          }

          @Override
          public long getGroupId(int groupPosition) {
           return 0;
          }

          @Override
          public View getGroupView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {

           if (convertView == null) {
            LayoutInflater inflater =  (LayoutInflater) myContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.group_row, null);
           }

           TextView tvGroupName = (TextView) convertView.findViewById(R.id.tvGroupName);
           tvGroupName.setText(arrGroupelements[groupPosition]);

           return convertView;
          }

          @Override
          public boolean hasStableIds() {
           return false;
          }

          @Override
          public boolean isChildSelectable(int groupPosition, int childPosition) {
           return true;
          }
         }
}

Child_row.xml

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="40dip"
    android:gravity="center_vertical"
    android:orientation="horizontal" >
<ImageView
        android:id="@+id/tvPlayerImage"
        android:layout_width="wrap_content"
        android:layout_height="30dip"
        android:gravity="center_vertical"
        android:layout_marginLeft="50dip"

         >
    </ImageView>
    <TextView
        android:id="@+id/tvPlayerName"
        android:layout_width="wrap_content"
        android:layout_height="30dip"
        android:gravity="center_vertical"
        android:layout_marginLeft="10dip"
        android:textSize="14sp" >
    </TextView>

</LinearLayout>

group_row.xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tvGroupName"
        android:layout_width="wrap_content"
        android:layout_height="40dip"
        android:gravity="center_vertical"
        android:paddingLeft="30dip"
        android:textSize="16sp"
        android:textStyle="bold" 
        >
    </TextView>

</LinearLayout>

main.xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <ExpandableListView
        android:id="@+id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:groupIndicator="@drawable/group_indicator" >

        <TextView
            android:id="@+id/android:empty"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="hello" >
        </TextView>
    </ExpandableListView>

</LinearLayout> 
```

# mysql - MySQL中的SUM函数为什么去掉了几列数据

> ID：10202776
> 
> 赞同：0
> 
> 时间：2012-04-18T04:29:03.513
> 
> 标签：mysql

我正在尝试制作一个模拟数据库，显示三个独立游戏角色的设备数据。当我运行以下 SQL 时，我能够拉出整个表

```
SELECT customerID, characters.characterID, characterName, headName, chestName, legsName, armsName
FROM characters
JOIN character_equipmentv ON characters.characterID = character_equipment.characterID
JOIN gear_head ON character_equipment.headID = gear_head.headID
JOIN gear_chest ON character_equipment.chestID = gear_chest.chestID
JOIN gear_legs ON character_equipment.legsID = gear_legs.legsID
JOIN gear_arms ON character_equipment.armsID = gear_arms.armsID
ORDER BY characterID 
```

但是，当我添加`SUM`函数来获取角色的齿轮分数时：

```
SUM(gear_head.gearScore + gear_chest.gearScore + gear_legs.gearScore + gear_arms.gearScore) AS gearScore 
```

在我的 SELECT 语句结束时，它只显示第一个条目以及每个字符的组合齿轮分数！我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T04:32:23.147

查看[SQL 分组](http://beginner-sql-tutorial.com/sql-group-by-clause.htm)。

Okay:`SUM`是一个聚合函数，需要一个`GROUP BY`子句才能根据另一列产生有意义的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T04:39:31.300

`SUM`是一个聚合函数，这意味着它需要多行并将它们合并。

您的 SQL 将告诉您所有字符 ID 的所有装备分数的总和

如果您希望给定 characterID 的总和添加`GROUP BY characterID`到查询的末尾。

# asp.net - good practice to structure designers files in MVC3

> ID：10202786
> 
> 赞同：1
> 
> 时间：2012-04-18T04:30:47.710
> 
> 标签：asp.net, asp.net-mvc

Generally designers design static cshtml files after slicing PSDs before developers can use them to create dynamic pages. How these static html files should be structured in an application, such that:

*   They have their repository versions
*   Can share common JQuery/CSS/Images in solution used by other actual coded pages
*   Doesn't goes to production upon deployments

One good approach is:

```
Project
|_Area
   |_Design
     |_Controllers
       |_ ModuleA Controller (Has 1 controller with viewname argument and renders it)
       |_ ModuleB Controller (Has 1 controller with viewname argument and renders it)
     |_Views
       |_ModuleA
         |_StaticScreen1.cshtml
         |_StaticScreen2.cshtml
         |_StaticScreen3.cshtml
       |_ModuleB
         |_StaticScreenA.cshtml 
```

This approach works good for 1st 2 points and is easy for designer too as they just need to keep adding screens in respective view folder. On a downside, this gets deployed to production too. Please suggest a better approach.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:07:45.337

单击您不想要的每个文件并查看属性。

将“构建操作”更改为“无”

发布时，将不包含具有 Build Action:None 的项目。

# sql - sql中时间数据类型的总和

> ID：10202790
> 
> 赞同：3
> 
> 时间：2012-04-18T04:31:34.713
> 
> 标签：sql, sql-server

我有一个名为 tblAttendanceDailySummary 的表，并且有一个字段是时间数据类型，名为 timeAttendanceHour（如 09:44:25）。由于月底，我想对这个字段求和。我的意思是一个员工的一个月工作时间需要计算。我怎样才能对时间数据类型求和。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T05:46:59.373

时间数据类型的范围是 00:00:00.0000000 到 23:59:59.9999999，因此您不能转换为时间。您必须改为计算小时、分钟和秒。

像这样的东西可能对你有用

```
select H.Val, M.Val, S.Val
from (
       --Your query goes here
       select dateadd(second, sum(datediff(second, 0, timeAttendanceHour)), 0) as sumtime
       from YourTable
     ) as T
  cross apply (select datedifF(hour, 0, T.sumTime)) as H(Val)
  cross apply (select datediff(minute, 0, dateadd(hour, -H.Val, T.sumTime))) as M(Val)
  cross apply (select datediff(second, 0, dateadd(hour, -H.Val, dateadd(minute, -M.Val, T.sumTime)))) as S(Val) 
```

如果您希望结果为 HH:MM:SS，您可以使用以下命令：

```
select cast(H.Val as varchar(10))+':'+right(M.Val+100, 2)+':'+right(S.Val+100, 2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:52:47.937

如何将组件转换为标准整数并将它们相加：

选择 sum(second(timeAttendanceHour))/60 +
    sum(minute(timeAttendanceHour)) +
    sum(hour(timeAttendance))*60 as MonthlyMinutes,
intMonthID
from tblAttendanceDailySummary
where intYear = 2012
group by intEmployeeID, intMonthID

# c++ - 比较两个字母数字字符串

> ID：10202794
> 
> 赞同：3
> 
> 时间：2012-04-18T04:31:47.867
> 
> 标签：c++, data-structures

我需要将字符串与以下方式进行比较。任何人都可以在 C++ 中为我提供一些见解或算法。例如：

```
 "a5" < "a11"        - because 5 is less than 11
 "6xxx < 007asdf"    - because 6 < 7
 "00042Q < 42s"      - because Q < s alphabetically
 "6   8" < "006 9"   - because 8 < 9 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T05:29:13.873

我建议你看看算法的[`strverscmp`](http://linux.die.net/man/3/strverscmp)使用——事实上，这个函数可能会为你完成这项工作。

> 该函数的作用如下。如果两个字符串相等，则返回0。否则，找到两个字节之间的位置，其属性为在它之前两个字符串相等，而在它之后有一个差异。查找包含（或开始于或结束于）该位置的最大连续数字字符串。如果其中一个或两个为空，则返回`strcmp`(3) 将返回的内容（字节值的数字排序）。否则，以数字方式比较两个数字字符串，其中具有一个或多个前导零的数字字符串被解释为它们前面有一个小数点（因此，特别是具有更多前导零的数字字符串位于具有较少前导零的数字字符串之前）。因此，排序为 000、00、01、010、09、0、1、9、10。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T05:06:28.970

您的示例仅显示数字、字母和空格。因此，目前我假设您忽略所有其他符号（有效地将它们视为空格）。您似乎还希望将大写和小写字母视为等效。

似乎您将数字的运行解释为“术语”，将字母的运行解释为“术语”，字母和数字之间的任何转换都等效于空格。单个空格被认为等同于任意数量的空格。

*（注意：您明显错过了在以下情况下该怎么做的示例：*

 *```
"5a" vs "a11"
"a5" vs "11a" 
```* 

*因此，当您面对数字术语与字符串术语的比较时，您必须弄清楚该怎么做。您也没有提到内在平等......例如应该“5 a”==“5a”只是因为“5 a”<“5b”？）*

一种明确的方法是将字符串转换`std::vector`为“术语”，然后比较这些向量（而不是尝试直接比较字符串）。这些术语可以是数字或字符串。这可能会帮助您入门，尤其是 STL 答案：

[如何拆分包含字符和数字的字符串值](https://stackoverflow.com/questions/6029697/how-to-split-a-string-value-that-contains-characters-and-numbers)

在一次性比较中，在不使用中介的情况下对字符串本身起作用的更复杂的方法会更快。但是，如果您要反复比较相同的结构，它们可能会更难理解和修改，并且可能会更慢。

解析成结构的一个很好的方面是您可以在过程中对数据进行内在的“清理”。将信息转换为[规范形式](http://en.wikipedia.org/wiki/Canonicalization)通常是容忍如此多种输入的程序的目标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T06:32:39.677

我假设您希望按以下顺序进行比较：存在 1-9 范围内的数字；数字值；位数; 数字后面的字符串的值。

它在 C 中，但您可以轻松地将其转换为使用 C++ std::string 类。

```
int isdigit(int c)
{
    return c >= '1' && c <= '9';
}

int ndigits(const char *s)
{
    int i, nd = 0;
    int n = strlen(s);

    for (i = 0; i < n; i++) {
        if (isdigit(s[i]))
            nd++;
    }
    return nd;
}

int compare(const char *s, const char *t)
{
    int sd, td;
    int i, j;

    sd = ndigits(s);
    td = ndigits(t);

    /* presence of digits */
    if (!sd && !td)
        return strcasecmp(s, t);
    else if (!sd)
        return 1;
    else if (!td)
        return -1;

    /* value of digits */
    for (i = 0, j = 0; i < sd && j < td; i++, j++) {
        while (! isdigit(*s))
            s++;
        while (! isdigit(*t))
            t++;

        if (*s != *t)
            return *s - *t;
        s++;
        t++;
    }

    /* number of digits */
    if (i < sd)
        return 1;
    else if (j < td)
        return -1;

    /* value of string after last digit */
    return strcasecmp(s, t);
} 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-04-18T04:45:25.797

试试这个并阅读`std::string.compare`：

```
#include <iostream>
using namespace std;

int main(){
    std::string fred = "a5";  
    std::string joe = "a11";

    char x;

    if ( fred.compare( joe ) )
    {
        std::cout << "fred is less than joe" << std::endl;
    }
    else
    {
            std::cout << "joe is less than fred" << std::endl;
    }

    cin >> x;
} 
```

# magento - How to create directory from magento in the root of cpanel?

> ID：10202796
> 
> 赞同：1
> 
> 时间：2012-04-18T04:31:51.127
> 
> 标签：magento, mkdir

I am working in magento. I want to create a directory in the root of cpanel. But it gives me a error like this:

```
Warning: mkdir() [function.mkdir]: Permission denied  in /home/testing/public_html/indies_installer/app/code/local/Indies/Installer/controllers/Adminhtml/InstallerController.php on line 53
#0 [internal function]: mageCoreErrorHandler(2, 'mkdir() [saveAction()
#3 /home/testing/public_html/indies_installer/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('save')
#4 /home/testing/public_html/indies_installer/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#5 /home/testing/public_html/indies_installer/app/code/core/Mage/Core/Model/App.php(349): Mage_Core_Controller_Varien_Front->dispatch()
#6 /home/testing/public_html/indies_installer/app/Mage.php(640): Mage_Core_Model_App->run(Array)
#7 /home/testing/public_html/indies_installer/index.php(80): Mage::run('', 'store')
#8 {main} 
```

I am using

```
mkdir("/home/testing/public_html/test/",0777); 
```

to create a directory from magento module. So, please help me to solve this issue.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:00:32.840

主机不允许在该文件夹下创建文件夹。如果需要，可以在 Magento 根目录中创建一个文件夹。

# javascript - 尝试输出唯一数据属性列表（jQuery/Java）

> ID：10202800
> 
> 赞同：0
> 
> 时间：2012-04-18T04:32:02.777
> 
> 标签：javascript, jquery, custom-data-attribute

我有一个产品网格，我正在尝试通过为每个产品分配数据属性（data-category="" data-department="" data-color="" 等）来构建一个动态过滤系统。我需要输出这些数据属性中的每一个的 ul，其中包含唯一的选项（所以“小、中、大”，即使每个都有多个实例，并且某些产品可能有多个（管道分隔）属性）

例子：

```
<div data-category="shorts" data-size="large" data-color="blue"></div> 
<div data-category="shorts" data-size="small|medium|large" data-color="green"></div>
<div data-category="shorts" data-size="small" data-color="green|red"></div>
<div data-category="shirts" data-size="medium" data-color="blue"></div>
<div data-category="sunglasses" data-color="black"></div> 
```

对于这些数据，我试图获得三个列表，

类别：短裤、衬衫、太阳镜
尺码：大号、中号、小号
颜色：蓝色、绿色、红色

并将它们粘贴到列表元素中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T05:08:36.817

我已经尝试过非常基本的 Appprocah，但它会帮助你理解

### HTML

```
<div data-category="shorts" data-size="large" data-color="blue"></div> 
<div data-category="shorts" data-size="large" data-color="green"></div>
<div data-category="shorts" data-size="small" data-color="red"></div>
<div data-category="shirts" data-size="medium" data-color="blue"></div>
<div data-category="sunglasses" data-color="black"></div> 
```

### jQuery

```
$(function(){
     var output =[];
     var $cat =[]; 
     var $size = [];
     var $color =[];
    $('div').map(function (i){

        if( typeof $(this).data('category') == 'string') 
            $cat[i] = $(this).data('category')
        if( typeof $(this).data('size') == 'string') 
            $size[i] = $(this).data('size')
        if( typeof $(this).data('color') == 'string') 
        $color[i] = $(this).data('color');

    });
    output.push($.unique($cat),$.unique($size),$.unique($color));
    console.log(output); //or use alert(output)

}) 
```

[`DEMO`](http://jsfiddle.net/sFWa4/)

**功能参考**

[`$.map`](http://api.jquery.com/map/)

[`$.unique`](http://api.jquery.com/jQuery.unique/)

[`$.data`](http://api.jquery.com/data/)

# stream - 如何捕获 ip camera (mjpeg) 流并稍后通过命令行重播？

> ID：10202801
> 
> 赞同：4
> 
> 时间：2012-04-18T04:32:12.517
> 
> 标签：stream, playback, vlc, mjpeg, video-recording

为了测试处理 ip 摄像机流的软件（例如 mjpeg），我想从原始摄像机捕获一个短序列，然后在循环中流式传输此记录，就好像它来自 ip 摄像机一样。它应该基于命令行以简化自动化集成测试。

我已经弄清楚了录制部分（捕获10秒）：

```
$ vlc -I dummy --run-time=10 http://192.168.0.142:8080/videofeed  --sout=file/asf:test-stream.asf vlc://quit 
```

如何使用 vlc 或类似方法将此记录循环为在[http://localhost:8080](http://localhost:8080)或类似服务器上提供的 mjpeg 流？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T06:31:21.243

我自己想通了：

```
$ vlc  -I dummy  -vvv test-stream.asf -L --sout '#standard{access=http,mux=mpjpeg,dst=:8080}' 
```

# c - 动态字符数组，大小是固定的？

> ID：10202802
> 
> 赞同：1
> 
> 时间：2012-04-18T04:32:16.603
> 
> 标签：c, arrays, dynamic

我正在尝试动态创建一个 char 数组。但是，不管我把哪个数字作为大小数组的所需值，它只是继续使用 4 具有大小。如果我放置 3,2 甚至 8, 10 它不会改变......

我初始化它的部分......

```
char *x;

x = (char *)calloc(10, sizeof(char));

if(x == NULL )
{
    return;
}

cout <<"Size_Vector = "<<sizeof(x)<<endl; //Keep making the size of the array 4..no matter what 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T04:33:40.970

`x`是一个类型的指针`char *`。`sizeof(x)`返回**指针的大小**而不是数组大小。

通常，即使指针类型指向数组，也无法从指针类型中知道数组大小，因为**[数组衰减](https://stackoverflow.com/questions/1461432/what-is-array-decaying)**。

```
char *x = malloc(sizeof(char)*10);
// This will give you 4
printf ("%d\n", sizeof(x)); 
```

但是您可以获得数组类型的大小。

```
char x[10];
// This will give you 10
printf ("%d\n", sizeof(x)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T04:33:57.030

`sizeof(x)`返回指针的大小，而不是分配的内存或数组的大小。

它总是返回`4`您环境中指针的大小，`4`并且对所有人都是一样的。

您将必须跟踪自己分配了多少内存，并确保您的写入不会超出分配的内存范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T05:07:52.137

malloc 调用返回一个 void 指针，当您说 sizeof(pointer) 时，您询问指针的大小，而不是您刚刚声明的内存块。因此，它为您提供 4/8/... 字节，具体取决于 m /c 你正在使用。

试试这个：

```
char *cptr;

int *iptr;

printf("size of integer pointer is : %d\n",sizeof(iptr));

printf("size of character pointer is : %d\n",sizeof(cptr)); 
```

注意：**malloc**指向您通过调用它动态获得的内存块的第一个元素的地址（即 10 * 1 = 10 个字节）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T05:38:11.537

这是我为您编写的一小段代码，以防您真的想通过调用 calloc 找到您保留的内存块的大小，尽管很明显，当您说 10 个空格，每个空格 1 个字节时，您将获得 10 个字节就像这里说你想要 10 * sizeof(char) 的情况：

```
#include<stdio.h>

#include<stdlib.h>

main(){

    char *ptr = NULL;

    int i = 0;

    int size = 0;

    int n = 0;

    printf("Enter the size of the dynamic array in bytes : ");

    scanf("%d",&n);

    ptr = (char*) calloc (n,sizeof(char));

    for(i=0;i<n;i++){

            size = size + sizeof(ptr[i]);

    }

    printf("Size is %d\n",size);

} 
```

# java - 如何在android中获取临时文件的文件大小？

> ID：10202805
> 
> 赞同：90
> 
> 时间：2012-04-18T04:32:31.353
> 
> 标签：java, android

如果我使用 openFileOutput() 创建和写入临时文件，在完成写入后如何获取文件大小？

* * *

## 回答 #1

> 赞同：223
> 
> 时间：2012-04-18T04:41:16.267

我希望这可以帮助你：

```
 File file = new File(selectedPath);
    int file_size = Integer.parseInt(String.valueOf(file.length()/1024)); 
```

其中 String`selectedPath`是您要确定其文件大小的文件的路径。

`file.length()`以字节为单位返回文件的长度，如[Java 7 文档](https://docs.oracle.com/javase/7/docs/api/java/io/File.html#length())中所述：

> 返回此抽象路径名表示的文件的长度（以字节为单位），如果文件不存在，则返回 0L。对于表示系统相关实体（例如设备或管道）的路径名，某些操作系统可能会返回 0L。

除以 1024 会将大小从字节转换为千字节。千比字节 = 1024 字节。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2020-01-22T01:10:00.197

## Kotlin 扩展解决方案

在某处添加这些，然后调用`myFile.sizeInMb`或任何您需要的

```
val File.size get() = if (!exists()) 0.0 else length().toDouble()
val File.sizeInKb get() = size / 1024
val File.sizeInMb get() = sizeInKb / 1024
val File.sizeInGb get() = sizeInMb / 1024
val File.sizeInTb get() = sizeInGb / 1024 
```

如果您需要来自字符串或 Uri 的文件，请尝试添加这些

```
fun Uri.asFile(): File = File(toString())

fun String?.asUri(): Uri? {
    try {
        return Uri.parse(this)
    } catch (e: Exception) {
    }
    return null
} 
```

如果您想轻松地将值显示为字符串，这些是简单的包装器。随意自定义显示的默认小数

```
fun File.sizeStr(): String = size.toString()
fun File.sizeStrInKb(decimals: Int = 0): String = "%.${decimals}f".format(sizeInKb)
fun File.sizeStrInMb(decimals: Int = 0): String = "%.${decimals}f".format(sizeInMb)
fun File.sizeStrInGb(decimals: Int = 0): String = "%.${decimals}f".format(sizeInGb)

fun File.sizeStrWithBytes(): String = sizeStr() + "b"
fun File.sizeStrWithKb(decimals: Int = 0): String = sizeStrInKb(decimals) + "Kb"
fun File.sizeStrWithMb(decimals: Int = 0): String = sizeStrInMb(decimals) + "Mb"
fun File.sizeStrWithGb(decimals: Int = 0): String = sizeStrInGb(decimals) + "Gb" 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-10-03T13:25:11.700

尝试使用以下代码：

```
// Get file from file name
    final String dirPath = f.getAbsolutePath();
    String fileName = url.substring(url.lastIndexOf('/') + 1);
    File file = new File(dirPath + "/" + fileName);

      // Get length of file in bytes
          long fileSizeInBytes = file.length();
     // Convert the bytes to Kilobytes (1 KB = 1024 Bytes)
          long fileSizeInKB = fileSizeInBytes / 1024;
    //  Convert the KB to MegaBytes (1 MB = 1024 KBytes)
          long fileSizeInMB = fileSizeInKB / 1024;

          if (fileSizeInMB > 27) {
          ...
          } 
```

希望它会为你工作..!!

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-12-07T10:39:01.000

```
private boolean isFileLessThan2MB(File file) {
    int maxFileSize = 2 * 1024 * 1024;
    Long l = file.length();
    String fileSize = l.toString();
    int finalFileSize = Integer.parseInt(fileSize);
    return finalFileSize >= maxFileSize;
} 
```

你也可以使用这个函数，当你使用 file.lenght 函数时，我用它来检查文件大小是否小于 2MB，它会返回文件大小（以字节为单位）。所以我检查了文件大小（以字节为单位）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-22T17:59:51.717

上面的所有代码都有一个小问题，因为**file.length() 没有返回文件的确切大小**。为了解决这个问题，我尝试了多种方法，一段时间后我得到了修复。以下是您可以获得文件**确切大小**的代码。

**请注意，对于字节到 KB 的转换，我除以 1000.0**而不是 1024.0。这个对我有用。

```
public static String getFolderSizeLabel(File file) {
    double size = (double) getFolderSize(file) / 1000.0; // Get size and convert bytes into KB.
    if (size >= 1024) {
        return (size / 1024) + " MB";
    } else {
        return size + " KB";
    }
}
public static long getFolderSize(File file) {
    long size = 0;
    if (file.isDirectory()) {
        for (File child : file.listFiles()) {
            size += getFolderSize(child);
        }
    } else {
        size = file.length();
    }
    return size;
} 
```

# c++ - 指向具有函数 C++ 的数据成员的指针

> ID：10202808
> 
> 赞同：1
> 
> 时间：2012-04-18T04:32:54.903
> 
> 标签：c++, function, object, pointers, member

```
#include "stdafx.h"
#include <iostream>
using namespace std;

class thing{
public:
    int stuff, stuff1, stuff2;

    void thingy(int stuff, int *stuff1){
        stuff2=stuff-*stuff1;
    }
}

int main(){
    thing t;
    int *ptr=t.stuff1;
    t.thingy(t.stuff, *ptr);
} 
```

我一直在练习 C++ 中的课程和指针。我要做的是让函数thingy通过传递指向stuff1值的指针来修改事物类中的stuff2数据成员。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T04:44:56.827

您正在创建一个指向 int 类型的变量：如果您想要指向 的指针`t.stuff1`，请获取其地址：

```
int* ptr = &t.stuff1;
        ___^ here you are taking a reference (address) 
```

然后，将该指针传递给您的`thing::thingy`方法：

```
t.thingy(t.stuff, ptr);
                __^ don't dereference the pointer, your function takes a pointer 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T04:40:21.333

试试这个：

```
int *ptr;
*ptr = t.stuff1;

t.thingy( t.stuff, ptr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T04:45:44.753

您应该传递地址：

```
*ptr = &(t.stuff1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T04:55:19.933

我可能真的迟到了，但我想得到一些好的评论和测试

```
 //#include "stdafx.h"
    #include <iostream>
     using namespace std;

     //class declaration
     class thing{
        public:
            int stuff, stuff1, stuff2;
       thing(){//constructor to set default values
    stuff = stuff1 = stuff2 = 10;
        }

         void thingy(int param1, int *param2){
            stuff2=param1-*param2;
          }
        };

       //driver function
       int main(){
          thing t;//initialize class
      cout << t.stuff << ' ' << t.stuff1 << ' ' << t.stuff2 << endl;//confirm default values
          int *ptr= &t.stuff1;//set the ADDRESS (&) of stuff1 to an int pointer
      cout << *ptr << endl;
           t.thingy(t.stuff, ptr); //call function with pointer as variable
       cout << t.stuff1;
          } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T06:06:16.837

```
 int *ptr=t.stuff1; 
```

你不能将 int 转换为 int* t.stuff1 是一个 int 值，而不是 int 的指针试试这个：

```
 int *ptr=&t.stuff1; 
```

你应该添加“;” 在类定义的最后，像这样：

```
 class Thing {
        ...
    }; 
```

当你调用 t.thingy 时，第二个参数是 int* 但是 *ptr 是一个 int 值，而不是一个指针。ptr 是一个指针，而不是 *ptr。试试这个：

```
 t.thingy(t.stuff, ptr); 
```

你应该知道：

```
 int i_value = 1;
    int* p_i = &i_value;
    int j_value = *p_i; 
```

在这种情况下： i_value 的类型 j_value *p_i 是 int p_i 的类型是 int*

# objective-c - 在基于视图的表中获取按钮的行

> ID：10202813
> 
> 赞同：11
> 
> 时间：2012-04-18T04:33:36.227
> 
> 标签：objective-c, cocoa, nstableview

单击按钮时，如何在基于视图的表中获取按钮的行？单击按钮时未选择该行，但我发现如果您在按钮的操作方法中记录 sender.superview.superview ，我得到： NSTableRowView: 0x1001b3a90 - row: 2\. 所以，该行在日志中，但我不知道如何以编程方式处理它。我在 NSTableCellView 的子类中有按钮的操作方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T09:59:19.817

`-[NSTableView rowForView:]`在其文档中这样说：

> 这通常在 NSButton（或 NSControl）的操作方法中需要，以找出应该在哪一行（和列）上执行操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-02T22:08:20.093

在斯威夫特 5.1 -

```
func tableView(_ tableView: NSTableView, viewFor tableColumn: NSTableColumn?, row: Int) -> NSView? {

 if let checkBoxCell =  tableView.makeView(withIdentifier:NSUserInterfaceItemIdentifier(rawValue: "<ColumnIdentifier>"), owner: self) as! NSButton? {
                checkBoxCell.tag = row;
                checkBoxCell.target = self;
                checkBoxCell.action =  #selector(TableViewService.checkBoxAction)
                return checkBoxCell
            }
return nil

}

@objc func checkBoxAction(button:NSButton){

        print(button.tag);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T10:09:07.300

这里我给你一个简单的例子。在此，我在内容视图中添加了一个 UIButton。当我点击按钮时，我调用了一个方法，在那里我得到了行号并根据需要调用

```
//Adding a button
    UIButton *btnBuyer=[UIButton buttonWithType:UIButtonTypeCustom];
    btnBuyer.frame=CGRectMake(238, 10, 26, 32);
    btnBuyer.tag=indexPath.row;
    [btnBuyer setImage:[UIImage imageNamed:@"buyIcon.png"] forState:UIControlStateNormal];
    [btnBuyer addTarget:self action:@selector(goBuyTab:)forControlEvents:UIControlEventTouchUpInside];
    [cellNew.contentView addSubview:btnBuyer]; 
```

当用户点击它时，我从以下方法获得了 ID

```
-(void)goBuyTab:(UIButton *)sender{
    NSLog(@"after click buy button function called goBuyTab");
    NSLog(@"sender.tag in goBuyTab : %d",sender.tag);
    int selectedRow=sender.tag;// This is row number
} 
```

希望这是您所需要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-16T12:14:51.417

我分享了 Swift 4 的这段代码。

```
func tableView(_ tableView: NSTableView, viewFor tableColumn: NSTableColumn?, row: Int) -> NSView? {
   ........
   but.action =  #selector(ViewController.buttonAction)
   .........
}

@objc func buttonAction(but: NSButton){
   let tablerow: NSTableRowView = but.superview?.superview as! NSTableRowView;
   let index = table?.row(for: tablerow);
   print("\(index));
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-06T21:11:10.867

在 osx 中，您可以在控制器的按钮单元操作方法中使用它：

```
- (IBAction)yourMethod:(NSButtonCell *)sender {

NSInteger selected = [yourTableView selectedRow];
NSLog(@"sender sends :%ld", selected);
} 
```

您需要从控制器设置一个插座到`NSTableView`.

# asp.net - Can we convert gridview data into Microsoft Office Excel (asp.net)

> ID：10202814
> 
> 赞同：1
> 
> 时间：2012-04-18T04:33:36.473
> 
> 标签：asp.net

Can we convert gridview data into Microsoft Office Excel.

# php - 你可以自定义一个 mysql_error 重复错误信息吗？

> ID：10202818
> 
> 赞同：0
> 
> 时间：2012-04-18T04:33:51.627
> 
> 标签：php, mysql, phpmyadmin, custom-error-pages

我收到“重复输入 'blah' 键'用户名'”错误消息，但我希望它阅读“此用户名已存在”。

那可能吗？如果是这样，我将在哪里以及如何改变它？

我正在使用 PHP、MySQL 和 phpmyadmin。

对不起我的笨拙。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T04:51:15.340

```
$result = mysql_query('... query that produces duplicate key error ...');
if ($result === FALSE) {
    if (mysql_errno() == 1022) {
        die("Username already exists");
    } else {
        die(mysql_error());
    }
} 
```

错误代码记录在此处：[http](http://dev.mysql.com/doc/refman//5.5/en/error-messages-server.html) ://dev.mysql.com/doc/refman//5.5/en/error-messages-server.html ，您可以编写自己的自定义错误处理程序以输出“更好”的错误消息，如果你如此渴望。

# ruby-on-rails - 如何自定义 Ruby on Rails 验证错误？

> ID：10202823
> 
> 赞同：1
> 
> 时间：2012-04-18T04:34:23.290
> 
> 标签：ruby-on-rails, validation

目前，当出现验证错误时，会在我的表单中呈现`div`with ：`class="field_with_errors"`

```
<form method="post" action="/users" accept-charset="UTF-8">
  <div class="field_with_errors">
    <input id="user_email" type="text" value="tom@test.com" name="user[email]">
  </div>
  <input id="user_password" type="password" value="mypass" size="30" name="user[password]">
  <input id="user_submit" type="submit" value="Submit" name="commit">
</form> 
```

如果不使用额外的 gem，并且在 Rails 3 环境中，有没有办法修改验证错误的呈现方式？例如，我希望在带有错误的标记`div`之后呈现验证错误：`input`

```
<input id="user_email" type="text" value="tom@test.com" name="user[email]"><div class="field_with_errors"></div> 
```

另外，有没有办法呈现特定的错误？如果是电子邮件错误，则`div`在输入文本框之后呈现并生成“重新输入您的电子邮件”消息。

（到目前为止，我所做的大多数搜索都使用 gems 作为解决方案。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T05:12:03.850

1.您可以通过覆盖来删除 field_with_errors 包装器。`ActionView::Base.field_error_proc`可以通过将其放入您的`config/application.rb`：

```
config.action_view.field_error_proc = Proc.new { |html_tag, instance| "#{html_tag}".html_safe } 
```

参考

[Rails 3：“field-with-errors”包装器改变了页面外观。如何避免这种情况？](https://stackoverflow.com/questions/5267998/rails-3-field-with-errors-wrapper-changes-the-page-appearance-how-to-avoid-t)

2.您可以在特定字段上显示错误消息。

```
<input id="user_email" type="text" value="tom@test.com" name="user[email]">
<% if @user.errors.on(:email).present? %>
   <span class="error">Re-enter your email(or)<%= @user.errors.on(:email) %></span>
<% end %> 
```

然后在你的 CSS

```
.error {
  color: red;
} 
```

# php - Alternative to "one thread per X" architecture?

> ID：10202824
> 
> 赞同：0
> 
> 时间：2012-04-18T04:34:32.313
> 
> 标签：php, ruby, multithreading, scalability

I have been told that I shouldn't be using "one thread per" anything aproach if I want my application to scale beyond "not so far", and that there were other architectures I should look into. Only I weren't told any of those architectures' names, and I couldn't find much on google.

Specifically I need this for a real-time web game, mostly chat-based. I would be using web sockets, but I need to process all the incoming events (many per second per game) concurrently fast enough.

If possible, I need this architecture to be viable in Ruby or PHP.

Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T20:27:13.830

我不熟悉 Ruby 或 php 可用的 API。如果他们可以访问 Win API 并且可以是多线程的，则推荐的 Windows 功能是连接到句柄和套接字的 IOCP（I/O 完成端口）。每个可用核心一个线程通常最适合最大化扩展。

# android - Yet another AdMob 4.3.1 "you must have AdActivity" issue-

> ID：10202826
> 
> 赞同：0
> 
> 时间：2012-04-18T04:34:37.487
> 
> 标签：android, eclipse

I have read every single question on here about the "you must have AdActivity declared in AndroidManifest.xml with configChanges" error.

I've also tried every single solution offered. Changed the target sdk in project.properties, etc.

I'm stumped. Not that it is any different than all the others, but here is my manifest:

```
<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.SET_WALLPAPER" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:resizeable="true"
    android:smallScreens="true"
    android:xlargeScreens="true" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
  >
    <activity
        android:name=".Main"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
     <activity android:name="com.google.ads.AdActivity"
         android:configChanges="keyboard|keyboardHidden|orientation"/>
          />
</application> 
```

Using version 4.3.1\. Have created the libs folder, added the jar, did project clean, exited and restarted eclipse, EVERYTHING I could think of. Any suggestions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:51:05.783

adMob AdActivity 应该是这样的...

```
<activity
            android:name="com.google.ads.AdActivity"
            android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" >
        </activity> 
```

# c# - 根据 Windows 主题颜色 wpf 更改控件的背景

> ID：10202827
> 
> 赞同：2
> 
> 时间：2012-04-18T04:35:04.093
> 
> 标签：c#, wpf, colors

在我的应用程序中，我有一个控件，其背景是通过以下代码根据用户输入设置的：

```
m_ToolBar.Background = (m_IToolbar.UseBackColor) ?
new SolidColorBrush(m_IToolbar.BackColor): m_DefaultWindowsBrush; 
```

其中 m_IToolbar.UseBackColor 是一个布尔值是否更新颜色，如果没有，则恢复到我在初始化方法中硬编码的默认窗口颜色。

有没有办法获得除硬编码以外的默认窗口颜色（如果我更改 Windows 主题颜色，则会有进一步的问题）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T06:14:49.643

您可以使用[SystemColors 类](http://blogs.msdn.com/b/wpf/archive/2010/11/30/systemcolors-reference.aspx)。特别是[SystemColors.ControlBrush](http://msdn.microsoft.com/en-us/library/system.windows.systemcolors.controlbrush.aspx)属性

从上面的链接：

> WPF 公开了组成当前 Windows 系统主题的一组颜色。这些在 SystemColors 类中作为颜色、画笔和相应的 ResourceKeys 可用（用于与这些颜色更改的动态通知绑定，例如，如果用户切换 Windows 主题）。

# android - 在 Scala 上使用最少的 GC 进行池化

> ID：10202828
> 
> 赞同：2
> 
> 时间：2012-04-18T04:35:08.413
> 
> 标签：android, performance, scala, data-structures

在一个用 Scala 编写的 Android 游戏中，我有很多我想要合并的对象。首先，我尝试在同一个池中同时拥有活动（可见）和非活动实例；这很慢，因为过滤会导致 GC 并且很慢。

所以我转而使用两种数据结构，所以当我需要获得一个免费实例时，我只需从被动池中取出第一个并将其添加到活动池中。我还快速随机访问活动池（当我需要隐藏实例时）。我为此使用了两个 ArrayBuffers。

所以我的问题是：哪种数据结构最适合这种情况？以及应该如何使用那个（或那些）特定的数据结构来添加和删除以尽可能避免 GC 并在 Android 上高效（内存和 cpu 限制）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:12:33.820

最好的数据结构是内部列表，您可以在其中添加

```
var next: MyClass 
```

到每一堂课。然后，非活动实例成为通常所谓的“空闲列表”，而活动实例成为单链表 la `List`。

这样，您的开销恰好是每个对象一个指针（您实际上不能得到任何更少的指针），并且根本没有分配或 GC。（除非你想通过丢弃部分或全部空闲列表来实现你自己的，如果它变得太长。）

你确实失去了一些集合的好处，但你可以让你的类成为一个迭代器：

```
def hasNext = (next != null) 
```

就是你所需要的`var`。（嗯，而且`extends Iterator[MyClass]`。）如果您的池大小真的很小，顺序扫描将足够快。

如果您的活动池太大而无法顺序扫描链表并且元素不经常添加或删除，那么您应该将它们存储在一个`ArrayBuffer`（知道如何在需要时删除元素）中。删除项目后，将其放入免费列表中。

如果您的活动池快速翻转（即添加/删除的数量与随机访问的数量相似），那么您需要某种层次结构。Scala 提供了一个不可变的，它在 中工作得很好`Vector`，但没有可变的（从 2.9 开始）；Java 也没有真正适合的东西。如果你想建立自己的，一个红黑或 AVL 树的节点可以跟踪左孩子的数量可能是要走的路。（然后通过索引访问是一件小事。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T22:07:44.870

我想我会提到我的想法。无论如何，filter 和 map 方法都会遍历整个集合，因此您最好简化它并简单地扫描您的集合（以查找活动实例）。见这里：[https ://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/TraversableLike.scala](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/TraversableLike.scala)

```
def filter(p: A => Boolean): Repr = {
  val b = newBuilder
  for (x <- this)
    if (p(x)) b += x
  b.result
} 
```

我运行了一些测试，使用 n=31 的原始扫描（因此我不必保留超过 32 位的 Int 位图）、过滤器/foreach 扫描、过滤器/映射扫描和位图扫描，以及随机分配 33% 的集合为活动。我有一个运行计数器来仔细检查我没有通过不查看正确的值或其他东西来作弊。顺便说一句，这不是在 Android 上运行的。

根据活动值的数量，我的循环花费了更多时间。

结果：

```
naive scanned a million times in: 197 ms (sanity check: 9000000)
filter/foreach scanned a million times in: 441 ms (sanity check: 9000000)
map scanned a million times in: 816 ms (sanity check: 9000000)
bitmap scanned a million times in: 351 ms (sanity check: 9000000) 
```

这里的代码——随意撕开它或告诉我是否有更好的方法——我对 scala 相当陌生，所以我的感受不会受到伤害：[https ://github.com/wfreeman/ScalaScanPerformance/blob/主/src/main/scala/scanperformance/ScanPerformance.scala](https://github.com/wfreeman/ScalaScanPerformance/blob/master/src/main/scala/scanperformance/ScanPerformance.scala)

# php - Javascript 在 JQuery 加载的 DIV 中不起作用

> ID：10202830
> 
> 赞同：0
> 
> 时间：2012-04-18T04:35:17.457
> 
> 标签：php, javascript, jquery, ajax

好的，我们开始...

我有一个页面 XYZ，其中有一个按钮应该调用我的函数：

```
$(function() {

    $('#addgroupicon').on('click', function(event){

        addgroup();

    }); 

});

function addgroup()
{
$('#addgroupdialog').show();
} 
```

// #addgroupdialog 和 #addgroupicon 在加载的页面中，上面的代码在我加载到 index.html 标题中的 .js 文件中

现在我正在使用 .load() 函数将此页面 XYZ 加载到 div 中，但是当我单击按钮时没有任何反应。我还尝试添加 onclick='javascript:addgroup();' 到按钮，没有成功。

谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T05:17:18.637

你没有`"on"`以正确的方式使用。它应该像这样使用：

```
$(document).on("click", "#addgroupicon", function(event){
        addgroup();
}); 
```

请参阅以下模仿您的场景的小提琴，我想是这样的：

[http://jsfiddle.net/U4xZj/](http://jsfiddle.net/U4xZj/)

解释*为什么*，因为我认为 jquery 文档在这方面做得不是很好......基本上，如果你考虑一下你在使用“on”的方式上做了什么：

```
$('#addgroupicon').on('click', function(event){ 
```

你是说，好的 jQuery，我想为下面的选择器“addgroupicon”创建一个事件处理程序。Jquery 立即转身，“棒极了”！#addgroundicon 恰好有零个与之匹配的项目。走开，别再打扰我了。但是首先用 $(document) 来做，jquery 会说，“哦，好的。我当然可以为文档创建一个点击事件处理程序。现在，如果你只希望我在某些元素*导致*点击时引发这个事件，那么请提供一个选择器，如果选择器匹配源元素，那么我会调用你的回调。” 说得通？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T04:46:43.690

尝试这个。如果在页面加载后调用元素，则需要使用 .live()。

```
$(function() {

    $('#addgroupicon').live('click', function(event){

        addgroup();

    }); 

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T04:50:26.467

1.  没见过`$(function() {})`，试试看`$(document).ready({})`

2.  使用 $(document).ready({})，您的 js 代码将在页面加载后运行，如果`addgroupicon`还没有，则单击事件不会绑定到它。因此，如果您`addgroupicon`稍后添加，则必须在添加后运行该代码。

3.  为什么不使用简单`$('#addgroupicon').click(function(event){})`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T04:52:07.060

您可以使用`.bind()`方法而不是`.live()`.

```
$(function() {    
    $('#addgroupicon').bind('click', function(event){
        addgroup();
    }); 
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T04:54:03.063

尝试使用 live() 而不是 bind() 作为按钮。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T05:12:42.687

我不太明白你的问题，但如果`live()`解决了你的问题，如果你不使用它，因为它已被弃用。

这是要走的路，

```
$("body").on("click", "#addgroupicon", function(event){
    addgroup();
}); 
```

**参考：** [http ://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-18T08:03:03.263

好奇你为什么使用 .on() 不会这样做吗？

```
$('#addgroupicon').click(function(){
    $('#addgroupdialog').show();
}); 
```

# actionscript-3 - 使用 byteArray 显示图像失败（未处理的 IOErrorEvent:.text=Error #2124:Loaded file is an unknown type）

> ID：10202831
> 
> 赞同：0
> 
> 时间：2012-04-18T04:35:41.793
> 
> 标签：actionscript-3, apache-flex, image-processing, bytearray

问题：使用 byteArray as 时无法显示 jpeg 图像`source`。

假设有一个名为“card”的现有图像。`<Image id="card"/>`. 这是场景：

1.获取位图数据：`var bitmapData:BitmapData = Bitmap(card.content).bitmapData`

2.获取字节数组：`var pixels:ByteArray = bitmapData.getPixels(bitmapData.rect)`

3.将 byteArray 附加到新图像：`var another:Image = new Image(); another.source = pixels.`

（我也试过用另一种方式，还是不行`var loader:Loader = new Loader(); loader.loader(pixels);`：） **loader.loader(pixels) 会报错！****错误是“Unhandled IOErrorEvent:.text=Error #2124”：加载的文件是未知类型**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:22:43.690

请参考以下链接...

[http://cookbooks.adobe.com/post_Loading_a_local_file_to_a_byte_array_in_Flash_Play-16715.html](http://cookbooks.adobe.com/post_Loading_a_local_file_to_a_byte_array_in_Flash_Play-16715.html)

[http://blog.yoz.sk/2009/10/bitmap-bitmapdata-bytearray/](http://blog.yoz.sk/2009/10/bitmap-bitmapdata-bytearray/)

# c# - 将当前页面 url 作为 url 中的参数传递

> ID：10202833
> 
> 赞同：2
> 
> 时间：2012-04-18T04:35:50.080
> 
> 标签：c#, asp.net, url

我有一个中继器。在中继器内部有一个按钮。在项目命令上我尝试

```
protected void rptPost_ItemCommand(object source, RepeaterCommandEventArgs e)
{
 int contentID = Int32.Parse(e.CommandArgument.ToString());//Its return 1
 string host = HttpContext.Current.Request.Url.ToString();//its return http://localhost:1377/Forum.aspx
 //string URL = "~/Modules/Forum/PostDetails.aspx?ID=" + contentID +"&BackUrl=" + host;//Need help hear its not work
 string URL = "~/Modules/Forum/PostDetails.aspx?ID="  + contentID ;//Its work
 Response.Redirect(URL); 

} 
```

当我只尝试传递`ID`它的工作，但如果我尝试传递 multipal url 一个是`ID`，下一个是`Current Page Url`它无法找到页面。并且给出了`page not found error`。我无法理解问题。`Url`不支持作为参数传递，或者我错过了一些东西。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T04:43:55.890

这是解决方案：

```
host = HttpUtility.UrlEncode(host) 
```

这就是它起作用的原因：

您将主机 URL 作为 GET 参数传递。GET 参数是重定向的 GET URI 的一部分。[URI 语法](https://www.rfc-editor.org/rfc/rfc3986)包括具有特殊含义的字符，特别是您使用冒号 (:) 和斜杠 (/)，它们在 URI 字符串中具有特殊含义。在几乎所有情况下，不应将特殊字符用作 GET 参数数据值的一部分。

对于像您这样需要包含特殊字符的情况，开发了[UrlEncoding](http://en.wikipedia.org/wiki/Percent-encoding#Percent-encoding_reserved_characters)。UrlEncoding 或 Percent-encoding 将 URI 中的特殊字符替换为使用百分号编码的值。作为 URI 查询处理的一部分，这些转义序列会自动转换回原始特殊字符。该类`HttpUtility`提供该`UrlEncode`方法作为转义输入字符串中所有特殊字符的便捷方式。

请注意，对通过 GET 参数传递的所有数据进行 URL 编码是个好主意，除非您可以完全控制正在传递的数据并且可以保证不需要编码。这可能是一个安全问题，因为如果您将用户输入传递给 GET 参数而没有对它进行第一个 URL 编码，攻击者可以包含新参数并以其他方式操纵您的 URI。

# java - 存储和接收 xml RSS 提要文件

> ID：10202835
> 
> 赞同：1
> 
> 时间：2012-04-18T04:36:02.997
> 
> 标签：java, xml, drupal, rss

我有一个 Java 后端，它根据程序用户的输入生成更新。它被保存到一个 XML 文件中，该文件保存在服务器有权访问的目录中。

因此，从程序中，我可以通过将 url 设置为 localhost/rssfile.xml 来读取提要。

但是，当尝试使用相同的地址提取信息并更新提要聚合器时。它不会让我连接。

我认为这可能是一个地址问题，但是，我不确定这是否是一种明智的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T01:26:45.100

已解决...需要使用 127.0.0.1 而不是 localhost。

# iphone - 错误：JSON 无法识别的前导字符

> ID：10202838
> 
> 赞同：-1
> 
> 时间：2012-04-18T04:36:13.103
> 
> 标签：iphone, objective-c, web-services, sbjson

我正在实现 SBJSON 以从 Web 服务中获取数据。我在“ConnectionDidFinishLoading”中的代码如下：

```
NSString *responseString = [[NSString alloc] initWithData:responseData encoding: NSUTF8StringEncoding];

    NSLog(@"Response String  %@", responseString);

    NSDictionary *results = [responseString JSONValue];

    NSString *extractUsers = [results objectForKey:@"d"];
    NSDictionary *finalResult = [extractUsers JSONValue];
    NSLog(@"Final Results : %@",finalResult); 
```

但我在控制台中收到错误消息，如下所示：

> -JSONValue 失败。错误跟踪是：（“错误域=org.brautaset.JSON.ErrorDomain Code=3 \"无法识别的前导字符\" UserInfo=0x686d010 {NSLocalizedDescription=无法识别的前导字符}"）

**我在stackoverflow上引用了几个链接，我也使用谷歌找到答案，但我无法获得解决方案**

如果您有解决方案，请与我分享。

提前谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T04:46:49.290

首先你必须调用选择器。

```
 DownloadManager *mgr= [[DownloadManager alloc] sharedManager:self:@selector(downloadVideos:)];// initialize your class where u write all the methods

              [mgr downloadVideos];  // call method where u send request to particular url
        [mgr autorelease]; 
```

比

```
 -(void)downloadVideos:(NSMutableData*)data{

          NSString *responseString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

      NSDictionary *parseDict = (NSDictionary*)[responseString JSONValue];

         NSLog(@"%@",parseDict);

     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T03:34:19.163

我只是遇到了这个问题，结果是Web服务使用的目录的权限已更改。

因此，浏览到 WS 或尝试其他访问方式以确保它已启动。

# vb6 - 如何在vb6中按进程获取打开文件句柄的列表

> ID：10202842
> 
> 赞同：3
> 
> 时间：2012-04-18T04:36:22.010
> 
> 标签：vb6, process

如何在 vb6 中按进程 ID 获取打开的文件句柄列表？

我也有兴趣深入挖掘并获取文件名。

寻找流程资源管理器所做的程序化等价物。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:08:18.107

使用[***Sysinternals***](http://www.sysinternals.com)中的[***Handle.exe***](http://download.sysinternals.com/files/Handle.zip)。[](http://www.sysinternals.com)

 *```
Shell ("c:\...\handle.exe ... >> " & app.path & "\tmp.txt",vbHide)
   '...Write something which will get contents from App.path & "\tmp.txt" ...
   '...Wait some time ,because killing the file at this moment 
   'will bring an error
Kill App.Path & "\tmp.txt" 
```*

# php - 有效地维护项目符号点的顺序，如 mysql 中的列表

> ID：10202843
> 
> 赞同：0
> 
> 时间：2012-04-18T04:36:34.743
> 
> 标签：php, javascript, jquery, mysql

我有一个用户可编辑的列表，如项目符号。点经常被删除和添加（到列表的末尾或中间）。有没有比让每个项目符号都有一个 id 并保留一个用逗号分隔的顺序的 SQL 条目更有效的方法来维护这个列表的 ORDER？例子：

```
$result = mysql_query("SELECT order FROM users WHERE user = '$userId'"); //Get order for logged in user. returns id1,id2,id3,id4
$row = mysql_fetch_array($result);
$order = explode(',', $row['order']); //make the order an array
$result = mysql_query("SELECT id, data FROM bullets"); //get all the bullets
$bullets = array();
while($row = mysql_fetch_array($result)){
    $project[$row['id']] = $row['data'];
} 
```

然后运行：

```
foreach($order as $k => $v){
    echo '<li id="'.$k.'">'.$v.'</li>';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T04:40:37.453

您可以将`ordinal`字段添加到项目符号表。

然后您的选择如下所示：

```
SELECT id, data FROM bullets ORDER BY ordinal 
```

此外，您不应该像在用户表中处理订单那样存储非规范化数据。

此外，您不应命名字段`order`，因为它是保留字。

# ruby - Ruby rails - 在不知道长度的情况下解析 xml 条目列表

> ID：10202846
> 
> 赞同：1
> 
> 时间：2012-04-18T04:37:11.530
> 
> 标签：ruby, xml, ruby-on-rails-3

我正在使用 XmlSimple，我遇到的问题是解析条目列表，确定具有类似 xml 标记的条目数。

```
<ItemList>
   <Item>
      <ItemId>123</ItemId>
      <ItemName>abc</ItemName>
      <ItemType>xyz</ItemType>
      <Status>ok</Status>
   </Item>
</ItemList> 
```

上面被解析为 -

```
"ItemList"=> { 
    "Item"=>{ "ItemId"=>"123", 
              "ItemName"=>"abc", 
              "ItemType"=>"xyz", 
              "Status"=>"ok"
             }
}, 
```

我以 - 的形式访问它`['ItemList']['Item']['ItemId']`，在任何地方都没有任何索引号。

但是，如果 ItemList 有超过 1 个条目，那么它会弄乱我的应用程序。

```
<ItemList>
   <Item>
      <ItemId>123</ItemId>
      <ItemName>abc</ItemName>
      <ItemType>xyz</ItemType>
      <Status>bad</Status>
   </Item>
   <Item>
      <ItemId>456</ItemId>
      <ItemName>fgh</ItemName>
      <ItemType>nbv</ItemType>
      <Status>bad</Status>
   </Item>
</ItemList> 
```

上面被解析为 -

```
"ItemList"=> { 
    "Item"=>{ "ItemId"=>"123", 
              "ItemName"=>"abc", 
              "ItemType"=>"xyz", 
              "Status"=>"bad"
             },
    "Item"=>{ "ItemId"=>"456", 
              "ItemName"=>"fgh", 
              "ItemType"=>"nbv", 
              "Status"=>"bad"
             }
}, 
```

我可以访问它 -`['ItemList']['Item'][0]['ItemId']`和`['ItemList']['Item'][1]['ItemId']`. 手动提供索引号。但由于我不知道列表中有多少项目，我无法在实际应用程序中提供索引号，因此 xml 可能没有条目或可能有数百个条目。想过使用 Nokogiri，但它具有相同的解析行为。我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:11:15.503

`xml-simple`使用gem对数据进行样本处理

```
1.9.2p290 :013 > items = "<ItemList> <Item> <ItemId>123</ItemId> <ItemName>abc</ItemName> <ItemType>xyz</ItemType> <Status>bad</Status> </Item> <Item> <ItemId>456</ItemId> <ItemName>fgh</ItemName> <ItemType>nbv</ItemType> <Status>bad</Status> </Item> </ItemList>"
     => "<ItemList> <Item> <ItemId>123</ItemId> <ItemName>abc</ItemName> <ItemType>xyz</ItemType> <Status>bad</Status> </Item> <Item> <ItemId>456</ItemId> <ItemName>fgh</ItemName> <ItemType>nbv</ItemType> <Status>bad</Status> </Item> </ItemList>" 

1.9.2p290 :014 > parsed_items = XmlSimple.xml_in(items, { 'KeyAttr' => 'name' })
     => {"Item"=>[{"ItemId"=>["123"], "ItemName"=>["abc"], "ItemType"=>["xyz"], "Status"=>["bad"]}, {"ItemId"=>["456"], "ItemName"=>["fgh"], "ItemType"=>["nbv"], "Status"=>["bad"]}]} 

1.9.2p290 :015 > parsed_items.class
     => Hash 

1.9.2p290 :016 > parsed_items["Item"].class
     => Array 

1.9.2p290 :017 > parsed_items["Item"].length
     => 2 
```

所以你`Item`将是一个数组，你可以`length`在它上面应用方法。用我上面的例子，你总是可以做`parsed_items["Item"].length`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T04:56:36.807

如果“结果”是您从解析 XML 文档中得到的，那么您可以测试

```
result['ItemList']['Item'] 
```

检查它是否是一个数组（或可枚举的）。如果是，那么就有超过 1 个项目，您必须枚举这些项目。

或者，您可以这样做（假设 ruby​​ 1.9）：

```
[*result['ItemList']['Item']].each do |item|
   ...
end 
```

splat 运算符[很酷](http://kconrails.com/2010/12/22/rubys-splat-operator/)，当这样使用时，您可以透明地处理可以是 nil、标量或集合的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T05:34:19.253

如果您使用的是 Ruby 1.8+，我会使用 REXML，这很容易。请参阅访问元素部分：[http ://www.germane-software.com/software/rexml/docs/tutorial.html](http://www.germane-software.com/software/rexml/docs/tutorial.html)

# c++ - 需要帮助替换 dll 文件 C++ gui 中的图像

> ID：10202847
> 
> 赞同：2
> 
> 时间：2012-04-18T04:37:15.670
> 
> 标签：c++, visual-c++, dll

好的，我想做的是用我已经完成的按钮女巫制作一个程序，并在这种情况下使用 dll 窗体窗口，它称为 resources.dll，它来自新的蓝色效果，我想更改对话框上的徽标图像我会怎么走围绕做这个

好的，这对我来说是新的，不要对我说它的进步，我知道它只需要有人解释或给我一些代码，并告诉我如何将它植入到一个按钮中

所以我有一个 resources.dll 文件

2 我想使用 c++ gui 更改此 dll 文件中的图像，女巫已经完成

3 我所需要的只是一些代码和一些关于如何使用它的说明我们都必须开始一些软件我知道这方面的基础知识但视频并没有完全涵盖我想要不要求你为我做的事情我只是问对于这方面的一些帮助，我会在我的产品上添加你的名字 :) 谢谢你 elfenliedtopfan5

关于我的意思的图像 ![带有我要替换的图像的新蓝色效果对话框](../Images/e1d2a9b36f1e8f2e290224675c71a3af.png)

![图形用户界面](../Images/00528f971f461894ae03e180ad5ffacb.png)

![dll的目录](../Images/cac566b522d6712bf6dfb13bc7e1b9cd.png)

# oracle - 获取特定日期时间之间的所有数据

> ID：10202848
> 
> 赞同：2
> 
> 时间：2012-04-18T04:37:16.747
> 
> 标签：oracle, oracle11g

我正在**以只读访问权限从远程 oracle 数据库中**读取数据。我想查询某个时间范围内的所有数据。我实际上想在午夜和当前时间之间进行查询。所以我使用的查询：

```
TO_DATE(to_char(sysdate, 'MM-dd-yyyy')||'00:00:00','MM-dd-yyyy HH24:MI:SS' ) 
AND 
TO_DATE(to_char(sysdate, 'MM-dd-yyyy HH24:MI:SS'),'MM-dd-yyyy HH24:MI:SS' ) 
```

但是查询

```
 select TO_DATE(to_char(sysdate, 'MM-dd-yyyy HH24:MI:SS'),'MM-dd-yyyy HH24:MI:SS' ) from dual 
```

只返回**18-APR-12**不是时间。我怎么也有时间？

我在跑步 ：

```
ALTER SESSION SET NLS_DATE_FORMAT='DD-MON-YYYY HH24:MI:SS'; 
```

但我不想每次都运行这个来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T05:03:18.217

你看到的并不是真实存在的。
Oracle 将日期保存为代表日期的数字，查询时查看日期的方式取决于 NLS 参数。
你看不到时间的事实并不意味着没有时间。

至于你的查询，我会做这样的事情：

```
... BETWEEN trunc(sysdate) AND sysdate 
```

我认为将 Date 转换为字符串然后再转换为具有相同格式的 Date 没有用...

# android - 短信数量没有增加。消息 id 是常量

> ID：10202850
> 
> 赞同：0
> 
> 时间：2012-04-18T04:37:28.410
> 
> 标签：android, sms

每次接收或发送短信时，我都会在数据库中插入一条记录。它工作正常。但有时所有短信都会获得相同的 id 。在哪种情况下，我会为不同的短信获得相同的短信 ID。

```
 public SmsMms(Handler handler) {
        super(handler);
        Log.d(TAG, "SMS Constructor");
    }

    public void onChange(boolean selfChange) {
        super.onChange(selfChange);
        Log.d("sms", "SMS ONCHANGE");
        if(rc == null )
        rc = new RecordCount(getApplicationContext());

        Uri uriSMSURI = Uri.parse(SMS);
        Cursor cur = getContentResolver().query(uriSMSURI, null, null,
                null, null);
        int rCount = cur.getCount();
        long recCount = rc.select("SMS");

        Log.d("sms", "rCount from sms db: " + rCount + "reccout from device db: " + recCount);
        long diffCount;
        if(rCount > recCount){
            diffCount = rCount - recCount;
        }else {
            diffCount = recCount - rCount;
        }
        Log.d("sms", "diff: " + diffCount);
        Log.d("sms", "sms count: " + rc.select("SMS") + "===rCount: " + rCount);
        if (rCount >= recCount || diffCount > 1) {
            Log.d("sms", "diff: ");
            rc.updateRecordCount("SMS", rCount);
            cur.moveToNext();
            String protocol = cur.getString(cur.getColumnIndex("protocol"));
            String content = cur.getString(cur.getColumnIndex("body"));
            int msg_id = cur.getInt(cur.getColumnIndex("_id"));
            Log.d("sms", "Message_id: " + msg_id);

            if (protocol == null) {
                Log.d("timest", "check protocol");
                if (!content.equals(null) && msg_id != prev_msgid) {
                    Log.d("timest", "current msg" +msg_id);
                    dh.sms_insert(timeStamp(), content.length(), "sent");
                    prev_msgid = msg_id;
                    Log.d("timest", "previous msg"+prev_msgid);
                    Log.d("timest", "Outgoing Message" + content.length());

                }
            } else {
                Log.d("sms", "in else");
                Log.d("sms", "previous msg"+prev_msgid);
                Log.d("sms", "current msg id " +msg_id);
                if (!content.equals(null) && msg_id != prev_msgid ) {
                    Log.d("sms", "diff: " + diffCount);
                    Log.d("sms", "current msg id " +msg_id);
                    dh.sms_insert(timeStamp(), content.length(), "received");
                    prev_msgid = msg_id;
                    Log.d("sms", "Incoming Message" + content.length());

                }
            }
            dh.smsList();
            Log.d("sms", "msg list" + dh.smsList());
        }else if(rCount < recCount){
            rc.updateRecordCount("SMS", rCount);

        } 
```

这是未插入到表中的 sms 的 logcat 内容。但是在我们的情况下，当第一个发送者第二次发送 sms 时，新到达的消息 id 没有分配给变量`message_id`，因此两个变量`message_id`都`previousmsg_id`将具有相同的值，因此消息计数是不递增。

```
04-18 09:39:36.092: D/sms(10033): SMS ONCHANGE
04-18 09:39:36.132: D/sms(10033): rCount from sms db: 52reccout from device db: 51
04-18 09:39:36.132: D/sms(10033): diff: 1
04-18 09:39:36.142: D/sms(10033): sms count: 51===rCount: 52
04-18 09:39:36.142: D/sms(10033): diff: 
04-18 09:39:36.142: D/SmsReceiverService(714): insertUri> content://sms/178
04-18 09:39:36.152: D/SmsReceiverService(714): class: UNKNOWN
04-18 09:39:36.182: D/MmsSmsProvider(307): ids: 11
04-18 09:39:36.182: D/MmsSmsProvider(307): recipientIds: 11
04-18 09:39:36.232: D/sms(10033): Message_id: 175
04-18 09:39:36.232: D/sms(10033): in else
04-18 09:39:36.232: D/sms(10033): previous msg175
04-18 09:39:36.232: D/sms(10033): current msg id 175
04-18 09:39:36.242: D/sms(10033): msg list[12-04-18 09:35:30 , 8,received
04-18 09:39:36.242: D/sms(10033): , 12-04-18 09:35:54 , 8,received
04-18 09:39:36.242: D/sms(10033): , 12-04-18 09:36:44 , 8,received
04-18 09:39:36.242: D/sms(10033): ] 
```

这仅在 HTC 设备中发生。在其他设备中，它工作正常。那么我该如何解决这个问题。感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:35:06.790

如果您在 android 手机中计算传入和传出的短信，则使用以下代码：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

            Log.v("SMSTEST", "STARTED LISTENING FOR SMS OUTGOING");
            Handler handle = new Handler(){};
            SMSObserver myObserver = new SMSObserver(handle);
            ContentResolver contentResolver = getContentResolver();
            contentResolver.registerContentObserver(Uri.parse("content://sms"),true, myObserver);

}

private class SMSObserver extends ContentObserver{

      String lastMessage = null;

    public SMSObserver(Handler handler) {
        super(handler);
    }

    public void onChange(boolean selfChange) {
        super.onChange(selfChange);
        db=new MessageDatabase(getApplicationContext());
        Uri uriSMSURI = Uri.parse("content://sms/");
        Cursor cur = getContentResolver().query(uriSMSURI, null, null,null, null);
        cur.moveToNext();
        String id = cur.getString(cur.getColumnIndex("thread_id"));        
        String protocol = cur.getString(cur.getColumnIndex("protocol"));
        int type = cur.getInt(cur.getColumnIndex("type"));

        if(protocol==null && type==2 )
        {
           //outflag=true;
            Log.i("SMSTEST", "SMS Send count: " + outbox);
            Cursor c = getContentResolver().query(Uri.parse("content://sms/outbox/" + id), null, null, null, null);
            if (c.getCount()>0){
                if(c.moveToFirst()){
                do{ 
                    System.out.println(" main cursor Value:"+c.getCount());
                    String name=cur.getString(cur.getColumnIndex("person"));               
                    String address=cur.getString(cur.getColumnIndex("address"));
                    System.out.println("\n name:"+name);                
                    System.out.println("\n address:"+address);
                    Cursor getting=db.getRecord(address);
                    if(getting.getCount()!=0)
                    {
                            boolean chck = getting.moveToFirst();   
                            System.out.println("Record found");
                            int cnt=getting.getInt(getting.getColumnIndex(db.SENDING));
                            int temp=cnt+1;
                            System.out.println("counter:"+temp);
                            db.updateoutboxCounter(temp, address);

                    }else{
                        System.out.println("Record not found");
                        db.insertRecord(address,1,0);
                    }
                    getting.close();
                }while(c.moveToNext());
                }
           }

            c.close();  

        Log.i("======TEST====", "MESSAGE SENT.......");
        }else if(protocol!=null && type==1)
        {
            Cursor c = getContentResolver().query(Uri.parse("content://sms/inbox/" + id), null, null, null, null);
            if (c.getCount()>0){
                if(c.moveToFirst()){
                do{ 
                    System.out.println(" main cursor Value:"+c.getCount());
                    String name=cur.getString(cur.getColumnIndex("person"));               
                    String address=cur.getString(cur.getColumnIndex("address"));
                    System.out.println("\n name:"+name);                
                    System.out.println("\n address:"+address);
                    Cursor getting=db.getRecord(address);
                    if(getting.getCount()!=0)
                    {
                            boolean chck = getting.moveToFirst();   
                            System.out.println("Record found");
                            int cnt=getting.getInt(getting.getColumnIndex(db.RECEVING));
                            int temp=cnt+1;
                            System.out.println("counter:"+temp);
                            db.updateinboxCounter(temp, address);

                    }else{
                        System.out.println("Record not found");
                        db.insertRecord(address,0,1);
                    }
                    getting.close();
                }while(c.moveToNext());
                }
           }

            c.close();

            Log.i("======TEST====", "MESSAGE RECEIVE.......");
        }
        cur.close();

    }

} 
```

}

# python - 在python中关闭袜子/代理连接

> ID：10202851
> 
> 赞同：0
> 
> 时间：2012-04-18T04:37:28.643
> 
> 标签：python

我正在编写一些使用 poplib 和 imaplib 通过代理服务器收集电子邮件的代码。

我使用以下设置代理连接：-

```
import socks
import socket
socks.setdefaultproxy(socks.PROXY_TYPE_SOCKS4,proxy_ip,port,True)
socket.socket = socks.socksocket 
```

我从stackoverflow帖子中得到的：-

```
http://stackoverflow.com/questions/3386724/python-how-can-i-fetch-emails-via-pop-or-imap-through-a-proxy 
```

然后我与电子邮件服务器建立连接：-

```
server = poplib.POP3(self.host, self.port)
server.user(self.username)
server.pass_(self.password) 
```

我正在单元测试中测试我的代码，并且遇到了一个我认为与我与代理的连接没有正确关闭有关的问题。

一个例子是：-

我已经设置了代理连接，并正在尝试与电子邮件服务器建立连接。作为单元测试的一部分，我故意使用了错误的电子邮件服务器密码。poplib 库引发无法连接的异常。我在单元测试中捕获了异常，然后继续进行下一个单元测试，相信 poplib 库会正确关闭我之前的连接。

我的理解是这不是一件好事，我应该确保电子邮件和代理服务器连接正确关闭。

我知道如何关闭 pop3 连接：-

```
server.quit() 
```

但不知道如何关闭与代理服务器的连接，或者我是否必须这样做。

如果问题出在哪里，有人可以帮助我解决这个问题或我的理解:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T05:15:25.143

无需特殊操作。当您关闭 POP 连接时，代理连接将自动关闭，因为它仅在您通过代理连接到某物时才需要。

# jquery - 输入后删除第一个跨度元素

> ID：10202852
> 
> 赞同：4
> 
> 时间：2012-04-18T04:37:59.423
> 
> 标签：jquery

`<input id="mytxt" type="textbox"/>`如果存在，如何删除之后的第一个跨度元素？

```
 $('#mytxt').live('change', function(){
        //TO DO    
 } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-18T04:40:36.170

在您的实时功能中，执行以下操作：

```
$(this).next("span").remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T04:50:49.227

我认为您必须检查元素之后的第一个“SPAN”元素。所以你必须一直走到文件的末尾

```
var element = $(this).next();
while($(element)[0].tagName!="SPAN" && $(element).length!=0){
    element = $(element).next();
}
if($(element)[0].tagName=="SPAN"){
    $(element).remove();
} 
```

# r - 将 r 与 Hadoop 连接起来

> ID：10202853
> 
> 赞同：0
> 
> 时间：2012-04-18T04:38:12.347
> 
> 标签：r, hadoop

我正在尝试使用 Revolution Analytics RHadoop 将 r 与 hadoop 集成但是我在使用 windows 时遇到了问题。运行 rmr 包时出现错误

```
Error in mr(map = map, reduce = reduce, reduce.on.data.frame = reduce.on.data.frame, :
  hadoop streaming failed with error code 127 
```

有谁知道如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:19:00.257

您需要使用 CDH3 或更高版本或 Apache Hadoop 1.0.2 或更高版本。如果您绝对必须使用 0.20.2 运行它，那么您需要在 wiki 上应用补丁列表（Which Hadoop for rmr）。您是否刚刚在问题跟踪器上询问过？不幸的是，您可以使用许多论坛，但只有一个答案。

# mysql - MySQL，按ID选择一组元素？

> ID：10202856
> 
> 赞同：0
> 
> 时间：2012-04-18T04:38:27.043
> 
> 标签：mysql

我有一个从每一行中提取 ID 的脚本，您可以从中进行选择以同时更改多个。

我有一组要更新的 ID，但是如何在单个 mysql 查询中选择一组任意 ID？

就像是：

`SELECT * FROM 'locations' WHERE 'region'='$region' AND 'uniqueID'={$id_array}`

我对此有点困惑，我确定 mysql 对这类事情有一个特殊的运算符。或者是吗？对每个元素进行单独的 mysql 查询会更好吗？（如果是这样，我可以将多个查询绑定到一个 PHP mysql 调用吗？...以减少连接）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T04:40:16.910

`SELECT * FROM 'localtions' WHERE 'uniqueID' IN (.....your ids here, comma separated)`

对于 PHP 解决方案： `WHERE uniqueid IN (" . implode($id_list, ",") . ")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T04:47:12.053

您可以创建一个逗号分隔的 id 字符串并触发 in 查询，而不是对数据库进行多个连接。

```
foreach ($arr as $id_array) {
$strid .= ','.$arr; 
```

}

这将为您提供逗号分隔的 ids 字符串。现在您只需要连接到数据库一次。

```
SELECT * FROM 'locations' WHERE 'region'='$region' AND 'uniqueID' in (."$strid".) 
```

# facebook - Facebook 赞框突然右对齐

> ID：10202858
> 
> 赞同：2
> 
> 时间：2012-04-18T04:39:11.260
> 
> 标签：facebook, facebook-likebox

我管理/网站管理员六个网站，它们的索引页面上有类似 Facebook 的框。这些都正常工作，直到昨天，突然它们都开始显示在页面的右侧（之前它们一直居中）。在过去的一两天里，这些页面中的任何一个都没有发生任何变化，所以我想不出任何理由为什么它们会突然右对齐。其中一些脚本位于“中心”标签之间，其他脚本位于居中的表格内。但它们仍然显示在页面的右侧。我已经尝试了所有我能想到的让它们再次显示在页面中间的方法，但我没有尝试过任何工作。我也很想知道为什么他们都会突然失去中心对齐。有人有想法么？任何帮助将不胜感激。

你可以看到我正在谈论的整体西班牙点网的一个例子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:58:54.700

```
.fb-like-box.fb_iframe_widget *
{
    text-align: left !important;
} 
```

这也可以作为临时修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:57:43.303

我们已经为我们的按钮应用了一些样式（它被`<li>`标签包围，但我们发现我们必须为此更改样式。

我们之前应用了这种样式

```
.fb-tool {position:relative;left:8px;} 
```

我们把它改成了这个。

```
.fb-tool {position:relative;left:8px; text-align:left;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T13:54:05.273

只是一个简短的答案 - 可能会有所帮助。我将 !important 的`display`属性更改`.fb_iframe_widget`为 relative 并修复了突然的左倾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T05:57:22.740

按照 Harold Neal 和 Sergei S 的建议，您可以添加 text-align:left; 为默认样式=“背景颜色：#000000；” 标签的一部分。

# web - 谷歌网络剪贴板是否有任何网络 API？

> ID：10202863
> 
> 赞同：1
> 
> 时间：2012-04-18T04:40:05.710
> 
> 标签：web, clipboard, copy-paste, google-docs, google-docs-api

Google Docs 具有“Web 剪贴板”功能，可帮助用户轻松复制和粘贴跨 Google 文档。（可以参考[https://drive.googleblog.com/2010/02/a-web-clipboard-for-google-docs.html](https://drive.googleblog.com/2010/02/a-web-clipboard-for-google-docs.html)）

但我想知道是否有任何 Web API 或官方方式来访问这些 API。我尝试在 Google Document List APi ( [https://developers.google.com/google-apps/documents-list/](https://developers.google.com/google-apps/documents-list/) ) 中查找，但找不到任何相关内容。

我最初的目标是我想从我的 Windows 操作系统中复制一些屏幕截图/图像/文本。我想粘贴到我的 GoogleDoc 文档中。但除非屏幕截图/图像/文本更新/上传到 Web 剪贴板，否则无法完成。

我一直在寻找任何相关的集成工具或扩展，但我仍然找不到任何人。有人可以给我一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:14:44.663

显然有各种 API，只是没有记录。我建议查看[像这样](https://chrome.google.com/webstore/detail/giiigfhfnbpiclcphiopambeanhenafa?hl=en-US)的扩展并尝试对协议进行逆向工程，以便您可以看到它正在调用哪些端点。

但听起来工作量很大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T15:36:05.453

没有官方方法可以访问此 API，抱歉。

# java - 如何使用 Java 从 XML 节点组中获取文本？

> ID：10202869
> 
> 赞同：1
> 
> 时间：2012-04-18T04:40:22.127
> 
> 标签：java, xml, xpath

以下是 XML 文件 -

```
<Country>
  <Group>
    <C>Tokyo</C>
    <C>Beijing</C>
    <C>Bangkok</C>
  </Group>
  <Group>
    <C>New Delhi</C>
    <C>Mumbai</C>
  </Group>
  <Group>
    <C>Colombo</C>
  </Group>
</Country> 
```

我想使用 Java 和 XPath 将 Cities 的名称保存到文本文件中 - 下面是无法满足需要的 Java 代码。

```
.....
.....
DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
domFactory.setNamespaceAware(true); 
DocumentBuilder builder = domFactory.newDocumentBuilder();
Document doc = builder.parse("Continent.xml");
XPath xpath = XPathFactory.newInstance().newXPath();
// XPath Query for showing all nodes value
XPathExpression expr = xpath.compile("//Country/Group");
Object result = expr.evaluate(doc, XPathConstants.NODESET);
NodeList nodes = (NodeList) result;
BufferedWriter out = new BufferedWriter(new FileWriter("Cities.txt"));
Node node;
for (int i = 0; i < nodes.getLength(); i++) 
{
    node = nodes.item(i);
    String city = xpath.evaluate("C",node);
    out.write(" " + city + "\r\n");
}
out.close();
.....
..... 
```

有人可以帮我获得所需的输出吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:16:23.457

你得到的只是第一个城市，因为那是你所要求的。您的第一个 XPATH 表达式返回所有`Group`节点。您遍历这些并评估`C`相对于 each的 XPATH `Group`，返回一个城市。

只需将第一个 XPATH 更改为`//Country/Group/C`并完全消除第二个 XPATH —— 只需打印第一个 XPATH 返回的每个节点的文本值。

IE：

```
XPathExpression expr = xpath.compile("//Country/Group/C");
...
for (int i = 0; i < nodes.getLength(); i++) 
{
    node = nodes.item(i);
    out.write(" " + node.getTextContent() + "\n");
} 
```

# javascript - 如何检测网页中的点击劫持攻击

> ID：10202874
> 
> 赞同：1
> 
> 时间：2012-04-18T04:40:48.213
> 
> 标签：javascript, html, jakarta-ee, clickjacking

我试过一个点击劫持工具。它只能检测 HTML 页面中的隐藏帧。我研究了点击劫持攻击，如下面的参考资料所示，如果 HTML 代码中存在任何重复的帧，我认为帧破坏攻击能够检测到该工具。

但我需要该工具来提供给定 Web URL 是否可能包含点击劫持攻击的详细信息。

## 参考：

[反对点击劫持的 IETF 标准](https://datatracker.ietf.org/doc/html/draft-gondrom-frame-options-02)

[点击劫持基础介绍](http://www.slideshare.net/novogeek/clickjacking-devcon2011)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T18:10:10.177

为什么不通过将 The 添加`X-Frame-Options`到响应标头来完全禁用点击劫持攻击？

[就是这样](https://developer.mozilla.org/en/The_X-FRAME-OPTIONS_response_header)

# symfony1 - 不同环境的 YAML 文件配置失败

> ID：10202880
> 
> 赞同：0
> 
> 时间：2012-04-18T04:41:28.033
> 
> 标签：symfony1, symfony-1.4, yaml, environment

我有两个应用程序：前端和后端，两者都需要不同的凭据才能访问应用程序，这意味着`security.yml`文件具有以下形式：

```
prod:
  default:
    is_secure: true
  all:
    is_secure: true
    credentials: student

dev:
  default:
    is_secure: true
  all:
    is_secure: true
    credentials: student 
```

另一个 yml 文件（后端）具有完全相同的代码，但凭证是教师。

但是这不起作用，我可以绕过凭据并访问我的两个应用程序而无需登录。

起作用的是：

```
default: 
  is_secure: true 

all: 
  is_secure: true 
  credentials: student 
```

意思是，如果我没有指定环境并且只是有一个标准的 yml 文件，那么它应该可以正常工作。

不太确定这里出了什么问题，欢迎对此提出任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:07:54.667

您不能基于环境配置安全性。

安全性与应用程序、模块或操作有关。

但是这个问题在这里已经有了[答案](https://stackoverflow.com/questions/2305619/how-to-secure-an-application-by-environment-in-symfony)。

# java - 在 ssh 之后在 bash 脚本中运行两个 java 程序

> ID：10202881
> 
> 赞同：1
> 
> 时间：2012-04-18T04:41:28.343
> 
> 标签：java, bash, shell, ssh, nohup

在我的脚本中，我通过 SSH 连接了一个主机并尝试运行两个 java 程序。第一个 java 程序以 nohup 和 & 结尾运行。之后我尝试运行另一个 java 程序，但它给出了语法错误。我想这与&有关。我不想再次 ssh。

```
ssh $host "nohup java -cp daemon.jar:. runtime.daemon.MPJDaemon >>/logs/$host-wrapper.log 2>&1 &;java Health" 
```

它给出了 bash: -c: line 0: syntax error near unexpected token `;

有任何想法吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:02:57.193

在 bash 中，`&`表示分号 ( `;`)，因此您实际上不需要在 & 号之后使用分号

来自[http://hacktux.com/man/bash](http://hacktux.com/man/bash)

> 如果命令由控制运算符 & 终止，则 shell 在子 shell 的后台执行命令。

# python - 使用lxml在HTML解析中具有相同类名的多个表

> ID：10202882
> 
> 赞同：1
> 
> 时间：2012-04-18T04:41:35.987
> 
> 标签：python, html, lxml

我正在使用 lxml 来获取 html 页面。
我想获取类名为“class1”的html表。
我做了这样的事情：

```
for span in doc.xpath('//table[@class="class1"]'):
print span 
```

但是，
在此之后，我发现 HTML 页面中有 4 个表的类名为“class1”。
例如 ：

```
table A
table B
table C
table D 
```

这 4 个表都具有相同的类名。
我如何只能获取表 B？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T04:47:27.920

您可以获得列表的第二项：

```
结果 = doc.xpath('//table[@class="class1"]')
如果 len（结果）> 1：
  打印结果[1]

```

或者，如果您的表有 id，您可以通过 xpath 获取它：

```
print doc.xpath('//table[@id="you id"]')[0]

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T04:49:10.570

我想你可能想要的是...

```
doc.xpath('//table[@class="class1"]')[1] 
```

# javascript - 对 google 财务 api 进行 ajax 调用时遇到问题

> ID：10202884
> 
> 赞同：3
> 
> 时间：2012-04-18T04:41:39.413
> 
> 标签：javascript, jquery

如果您将以下网址复制并粘贴到浏览器中：http: [//finance.google.com/finance/info?client=ig &q=MUTF_CA%3ATDB900](http://finance.google.com/finance/info?client=ig&q=MUTF_CA%3ATDB900)

它会输出一个字符串没问题。（这就是我想从以下 ajax 调用中检索的内容）

但如果我执行以下操作：

```
 this.getQuote = function() {
    $.get('http://finance.google.com/finance/info?client=ig&q=MUTF_CA%3ATDB900', callback);
  }

  var callback = function(data){
    alert(data);
  } 
```

它给了我一个“500 内部服务器错误”。我使用萤火虫控制台进行了检查。我在ajax调用中做错了吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:05:22.840

正如 Shadow_boi 已经猜到的那样，问题出在**[同源策略上](http://en.wikipedia.org/wiki/Same_origin_policy)**，它始终适用于 ajax 请求。您需要使用**[JSONP](http://en.wikipedia.org/wiki/JSONP)**来解决问题。

请参阅此小提琴以获取解决方案：http: [//jsfiddle.net/cb9c3/](http://jsfiddle.net/cb9c3/)

# android - 在android中获取时差？

> ID：10202885
> 
> 赞同：3
> 
> 时间：2012-04-18T04:41:43.830
> 
> 标签：android, datetime

在我的 android 应用程序中，我通过 HTTP 请求获取以下格式的日期和时间。

> 2012 年 4 月 17 日星期二 16:23:33 IST

现在我想计算那个时间和当前时间之间的时差。我有很多方法可以在互联网上计算时差，但是所有这些解决方案都有不同的格式。我怎样才能用上述时间格式计算时差？

**编辑：** 这是我使用它工作正常的代码。

```
 DateFormat df = new SimpleDateFormat("EEE MMM dd HH:mm:ss zzz yyyy");
  Date dateOne = df.parse("Tue apr 22 13:07:32 IST 2012");
  Date dateTwo = df.parse("Tue Apr 22 13:07:33 IST 2012");   
  long timeDiff = Math.abs(dateOne.getTime() - dateTwo.getTime());
  System.out.println("difference:" + timeDiff); //differencs in ms 
```

但我必须以“2012 年 4 月 22 日星期二 13:07:32 IST 2012”格式获取当前时间才能用作 dateTwo。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T05:10:48.843

您也可以使用此代码:::

```
DateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss Z");
Date dateOne = df.parse("2011-02-08 10:00:00 +0300");
Date dateTwo = df.parse("2011-02-08 08:00:00 +0100");   
long timeDiff = Math.abs(dateOne.getTime() - dateTwo.getTime());
System.out.println("difference:" + timeDiff);   // difference: 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:04:31.577

试试这个代码

```
Date pdate = /* your date comming from HTTP */
Date cdate = new Date(System.currentTimeMillis());

long difference = cdate.getTime() - pdate.getTime(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T05:06:13.607

创建一个`SimpleDateFormat(String pattern)`使用上述描述您的日期的模式的对象。

接下来使用`parse(String)`并将日期字符串传递给它。它应该返回一个`Date`对象。然后，您可以使用`Date.getDateInstance().getTime()`获取当前时间。

然后，获取时间差就是从当前时间中减去服务器时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T05:10:57.783

您可以使用以下代码来执行此操作。

```
String format = "Tue Apr 17 16:23:33 IST 2012";
    int month = 0;

    Calendar yourDate = Calendar.getInstance();

    String[] months = new String[] { "Jan", "Feb", "Mar", "Apr", "May",
            "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" };
    String datArr[] = format.split(" ");

    String[] time = datArr[3].split(":");

    for (int i = 0; i < months.length; i++) {
        if (months[i] == datArr[1]) {
            month = i;
        }
    }

    yourDate.set(Integer.parseInt(datArr[5]), month, Integer.parseInt(datArr[2]), Integer.parseInt(time[0]),
            Integer.parseInt(time[1]));

    Log.i("Your Date= ", yourDate.toString());
    Log.i("Now Date= ",Calendar.getInstance().toString()); 
```

使用它，您可以获得这两个日期之间的时差。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-15T20:37:16.160

您可以使用此方法计算以毫秒为单位的时间差，并以秒、分钟、小时、天、月和年为单位获得输出。

您可以从这里下载课程：[DateTimeDifference GitHub 链接](https://github.com/batuhan15/DateTimeDifference)

*   使用简单

```
long currentTime = System.currentTimeMillis();
long previousTime = (System.currentTimeMillis() - 864000000); //10天前

Log.d("DateTime: ", "与秒的差异：" + AppUtility.DateTimeDifference(currentTime, previousTime, AppUtility.TimeDifference.SECOND));
Log.d("DateTime: ", "与分钟的差异：" + AppUtility.DateTimeDifference(currentTime, previousTime, AppUtility.TimeDifference.MINUTE));
```

*   您可以比较下面的示例

```
if(AppUtility.DateTimeDifference(currentTime, previousTime, AppUtility.TimeDifference.MINUTE) > 100){
    Log.d("DateTime:", "两个日期相差超过100分钟。");
}别的{
    Log.d("DateTime:", "两个日期相差不超过100分钟。");
}
```

# eclipse - Eclipse：如何防止它在启动时加载所有打开的文件？

> ID：10202886
> 
> 赞同：1
> 
> 时间：2012-04-18T04:42:02.523
> 
> 标签：eclipse, eclipse-cdt

我在上一个会话中打开了 100 多个文件，然后关闭了 eclipse。重新启动时，eclipse 会以极高的内存使用率挂起。仅打开 50 个文件不会发生此问题。

如何防止eclipse在启动时加载所有以前打开的文件？按需加载文件会更有意义，即在聚焦时加载。

我正在使用 CDT。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T04:46:32.967

当 Eclipse 打开时，关闭那些你现在不需要的项目。右键单击项目名称并选择“关闭项目”。下次重新启动 Eclipse 时，不应加载已关闭的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T09:19:27.900

这是不可能的。Eclipse 将始终在重新启动后恢复相同的状态。

您可以通过以下方式减轻影响

*   关闭项目（右键单击您未处理的项目，选择`Close Project`
*   关闭不相关的项目（右键单击您正在处理的项目，选择`Close Unrelated Projects`
*   **使用迈林！**Mylyn 将确保您停止处理的文件将自动关闭。（但它的作用远不止于此。有关更多信息，请参见[help.tasktop.com](http://help.tasktop.com/help/index.jsp?topic=/org.eclipse.mylyn.help.ui/Mylyn/User_Guide/User-Guide.html)和www.tasktop.com [(pdf)](http://www.tasktop.com/pdfs/docs/tutorials/2009-03-mylyn-tutorial.pdf)）这需要一些时间来适应它，但我最终爱上了它。
    如果您不经常切换任务，则只需创建一项常规任务，激活它并永远从事该任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T17:50:21.643

在 Eclipse 上打开了一个错误，经过那里的帮助，原来这是由我安装的 vrapper 插件引起的。更多详情，[https://bugs.eclipse.org/bugs/show_bug.cgi?id=377368](https://bugs.eclipse.org/bugs/show_bug.cgi?id=377368)

# linux - 远程升级 IBM Tivoli Monitoring OS 代理程序

> ID：10202887
> 
> 赞同：0
> 
> 时间：2012-04-18T04:42:06.847
> 
> 标签：linux, monitoring, tivoli

有谁知道是否有办法远程升级 IBM Tvoli Monitoring (ITM) 操作系统级别的监控代理？我们有一堆需要操作系统代理升级的 Windows 和 Linux 服务器，但对于 Linux，我们没有为 root 用户启用直接 ssh 访问。我在这些服务器上确实有管理员级别的用户帐户。因此，一旦我登录到服务器，我就可以使用 sudo 运行任何命令。这对代理升级任务有用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:33:52.623

如果新代理代码已加载到您的捆绑软件仓库中，您可以通过 tacmd CLI 升级操作系统代理。

1) 通过 tacmd 登录 HUB TEMS

2) 使用以下命令：

```
tacmd updateAgent -t lz -n AGENT:LZ

tacmd updateAgent -t nt -n Primary:Agent:NT 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-20T09:56:00.660

更多示例（请注意，这些示例区分大小写）并链接到 IBM 对 command 的说明。

```
tacmd updateAgent -t LO -n Primary:*Server Name*:NT -v 062302000
tacmd updateAgent -t NT -n Primary:*Server Name*:NT -v 062303000
tacmd updateAgent -t OQ -n Primary:*Server Name*:NT -v 063002000 
```

[http://pic.dhe.ibm.com/infocenter/tivihelp/v15r1/index.jsp?topic=%2Fcom.ibm.itm.doc%2Fitm_cmdref43.htm](http://pic.dhe.ibm.com/infocenter/tivihelp/v15r1/index.jsp?topic=%2Fcom.ibm.itm.doc%2Fitm_cmdref43.htm)

# iphone - iOS 版 Google 双击

> ID：10202889
> 
> 赞同：1
> 
> 时间：2012-04-18T04:42:22.757
> 
> 标签：iphone

目前我正在使用 iPad 应用程序。我想使用 Google DoubleClick 在我的应用程序中显示广告。任何人都可以告诉我如何让 iOS sdk 双击以及将其集成到我的应用程序的步骤。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T04:44:09.217

我很确定 Google 的主要广告网络称为 AdMob，您可以从这里获取 SDK：

[https://developers.google.com/mobile-ads-sdk/download](https://developers.google.com/mobile-ads-sdk/download)

我还发现下面的页面专门讨论了 DoubleClick，但它只提到了 iOS 4.0，所以这可能已经过时了？

[https://developers.google.com/adsense-for-mobile-apps/docs/ios/doubleclick/](https://developers.google.com/adsense-for-mobile-apps/docs/ios/doubleclick/)

我不知道谷歌至少有两个独立的广告网络，但它们有很多普通的 iOS 工程师并不总是意识到的触角。

# xcode - 为什么我的 UILabel.text 无法更新？

> ID：10202891
> 
> 赞同：1
> 
> 时间：2012-04-18T04:42:26.640
> 
> 标签：xcode, uilabel, nsuserdefaults

大家好，并提前感谢您。***当视图返回到前台***时，我试图通过代码更改 ViewController 上 UILabel 的文本属性。我在 AppDelegate.m 文件中使用“applicationDidBecomeActive”来调用 ViewController.m 上的方法，这是可行的。问题是我调用的方法或“ViewDidLoad”方法都不会在设置应用程序中的设置更改后更新 UIlabel.text。文本几乎保持不变，就好像它正在发送上次更新的字符串一样。我每次都从设置包中获取一个 NSUserDefault 值以包含在文本字符串中。提取返回 OK。UILabel 只是不会更新。仅供参考，我在触发“viewDidLoad”的本端视图之前调用同步。

澄清一下，当“viewDidLoad”方法在启动时第一次运行时，它工作正常。只有在点击主页按钮、更改设置应用程序中的设置然后返回我的应用程序后，UILabel lblResultTitle.text 现在才不会更新。请帮助...

这是 ViewDidLoad 中的代码：

```
-(void) viewDidLoad
{
  NSUserDefaults *settings = [NSUserDefaults standardDefaults];
  self.lblResultTitle.text = [NSString stringWithFormat:@"Speed %@ =", [settings stringForKey:kunit]] ;

  [super viewDidLoad];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T04:40:09.170

答案是这样的：调用从 AppWillEnterForeground 或 APPxBecomeActive 更新的方法将不起作用，因为应用程序的情节提要尚未执行。对于这种情况，应用程序必须侦听从 NSUserDefaults 发送的消息。在实现了必要的代码之后，我有了我需要的解决方案。问题实际上不是 UILabel。它比那更深。现在一切都好！谢谢！

# business-intelligence - 用于流程制造商 BPM 的基于 php 的业务智能

> ID：10202892
> 
> 赞同：0
> 
> 时间：2012-04-18T04:42:34.983
> 
> 标签：business-intelligence

我使用流程制造商作为我的 BPM 系统，我想使用基于 php 的 BI（商业智能）系统从流程制造商结果中生成报告。谁能帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T21:44:31.677

[ProcessMaker](http://www.processmaker.com/)推荐[Pentaho](http://www.pentaho.com/download/)作为其集成的 BI 解决方案。

检查一下：[ProcessMaker 在其 BPM 软件中提供高级商业智能](http://www.processmaker.com/press-releases/processmaker-offer-advanced-business-intelligence-its-bpm-software)

但是，请注意 Pentaho 是基于 Java 的。我还没有找到任何基于 PHP 的 BI 套件。

也就是说，我已经使用 ProcessMaker 2 年了，并且认为临时报告是它仍然缺乏的功能。这主要是因为[它以序列化的形式存储案例数据](http://wiki.processmaker.com/index.php/Triggers#Variable_Storage)，因此报告不是直截了当的。

查看这篇文章：[Unserialize case APP_DATA and show into a GRID in a DYNAFORM](http://forum.processmaker.com/viewtopic.php?f=9&t=3637)以了解它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-03T19:34:02.297

此时，Processmaker 已经结束了对 Pentaho 插件的支持。到目前为止，我一直在尝试使用 PHP Report Maker 并取得了不错的成功。 [http://www.hkvstore.com/phpreportmaker/](http://www.hkvstore.com/phpreportmaker/)

# android - Android：如何从另一个带有附加功能的活动中启动待定意图？

> ID：10202893
> 
> 赞同：2
> 
> 时间：2012-04-18T04:42:45.520
> 
> 标签：android, android-intent, android-pendingintent, extra

我面临一些未决意图的问题。我使用通知管理器设置了一些待处理的意图。当用户点击它们时，这些通知会启动一个活动。我在未决意图中使用了 Intent 的一些额外内容。这适用于通知单击。

```
Notification notification = new Notification(icon, tickerText, when);
    Context context = getApplicationContext();

Intent intentOptionDialog = new Intent(Safety_Check_Service.this, Dialog_Safety_Check.class);
    intentOptionDialog.putExtra("startID",startId);
    intentOptionDialog.putExtra("CheckInID", CheckInId);
    intentOptionDialog.putExtra("Frequency", Frequency);
    intentOptionDialog.putExtra("flagFirstShedule", true);

        stopID = (startId + 17);

    intentOptionDialog.putExtra("stopID", stopID);

    PendingIntent contentIntent = PendingIntent.getActivity(Safety_Check_Service.this, DIALOG_ID, intentOptionDialog, 0); 
```

但我的问题是我想从另一个活动中启动这些待处理的意图。创建待处理的意图。如何从另一个活动中启动这些待处理的意图，以及如何获得使用待处理的意图设置的 Extras？

请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T06:08:32.030

我想你这里有两件：

1.  尝试使用我在[跟踪 Android 中发送的短信中](https://stackoverflow.com/questions/10118242/keeping-track-of-sms-sent-in-android/10118475#10118475)给出的答案：在创建时添加`FILL_IN_SELECTOR`标志`PendingActivity`以强制它携带额外内容。
2.  一旦你有了`PendingIntent`，你就可以调用该[`send`](http://developer.android.com/reference/android/app/PendingIntent.html#send%28%29)方法来触发它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-08T10:12:07.267

**您可以在 Intent 中添加数据，然后再将其传递给它`PendingIntent`**

首先创建一个意图并添加数据

```
 val pendingIntent = Intent(context, MainActivity::class.java)
    pendingIntent.putExtra(PAGE_KEY, HOME.name) 
```

现在从带有更新标志的意图创建待处理的意图**`PendingIntent.FLAG_UPDATE_CURRENT`**。

```
 PendingIntent.getActivity(
                    context, 0, pendingIntent, PendingIntent.FLAG_UPDATE_CURRENT) 
```

现在在启动的活动 onCreate 方法中像这样访问它

```
 if (intent != null) {
            val pageValue: String? = intent.getStringExtra(PAGE_KEY)
            pageValue?.let {
             // do whatever you want

            } 
```

# javascript - /g 从 javascript 正则表达式转换为 groovy 正则表达式

> ID：10202897
> 
> 赞同：0
> 
> 时间：2012-04-18T04:43:17.780
> 
> 标签：javascript, regex, groovy

我在 javascript`/[^A-Za-z0-9\+\/\=]/g`中有一个正则表达式，用于

```
remove all characters that are not A-Z, a-z, 0-9, +, /, or = 
```

所以在常规中，上面的正则表达式将是：`/[^A-Za-z0-9\+\/\=]*$`

那是对的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T04:45:49.637

不。

您使用以下`replaceAll()`方法：

```
myStr = (myStr =~ /[^A-Za-z0-9\+\/\=]/).replaceAll("") 
```

# c++ - 比较 C++ char* 字符以解析 .OBJ 文件

> ID：10202898
> 
> 赞同：0
> 
> 时间：2012-04-18T04:43:28.233
> 
> 标签：c++, string, char, .obj

原谅我的 C++ 天真。我需要在解析 .OBJ 3D 对象文件时比较两个字符。在每行迭代中，我所做的 strcmp 调用永远不会返回 true。我有一种感觉，这是因为我没有掌握 char* 与 char 的知识。有人看到我在这里做错了吗？

```
//Variables
char* type = new char[1];

float v1;
float v2;
float v3;

//INSIDE the while loop that parses each line of the file
getline(myfile, line);
sscanf(line.c_str(),"%c %f %f %f", type, &v1, &v2, &v3);
if(strcmp(type,"f") == 0){
    faces++;
}
if(strcmp(type,"v") == 0){
vertices++;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T04:50:03.700

“strcmp”比较以空字符结尾的字符串，但是，您已将“type”定义为单个字符，而不是 strcmp 所期望的以 x'00' 结尾的字符数组。

一个简单的`if (type == 'f')`字符比较应该可以得到正确的结果。

# javascript - javascript 'or' 语句

> ID：10202899
> 
> 赞同：0
> 
> 时间：2012-04-18T04:43:33.037
> 
> 标签：javascript, variables, if-statement

```
var NavAxis='yx';
var url1 = 'file:///C:/Users/Luke/Desktop/Senior%20Project/index.html#/page4'
var url2 = 'file:///C:/Users/Luke/Desktop/Senior%20Project/index.html#/page5'   

if(location.href == (url1 || url2)){
      NavAxis='xy';
}else{
       NavAxis='yx';
} 
```

为什么这不起作用？我希望它是这样的，如果 URL 是那些声明的 NavAxis 更改为 'xy'

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T04:46:13.607

你真正想要的是：

```
if ( location.href === url1 || location.href === url2 ) 
```

您写的内容将首先评估内括号： `(url1 || url2)`. `url1`只要`url1`是真实的（它在您的代码中），那将评估为。

`location.href`因此，只有当等于`url1`但不是时，您的条件才会为真`url2`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-18T04:45:53.943

### JavaScript OR 的工作原理：

```
true || true   // true;
true || false  // true;
false || false // false;
0 || true      // 0 will translate to boolean because other side is boolean and it returns true
1 || 3         // no translation, returns 1
undefined || 2 // undefined will translated to boolean false. returns 2
null || "wow"  // "wow" 
```

这就是你应该这样做的方式：

```
if(location.href == url1 || location.href == url2){
    NavAxis='xy';
}else{
   NavAxis='yx';
} 
```

这适用于两个或三个检查，但如果你有 10 个网址怎么办？

[`Array.indexOf()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)这是使用适用于多项检查的方法的更好方法：

```
if([url1, url2, url3].indexOf(location.href) != -1 ){
        NavAxis='xy';
    }else{
       NavAxis='yx';
    } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-18T04:48:19.180

`url1 || url2`将评估为`file:///...#/page4`（即`url1`）。所以本质上，你一直在`location.href`比较`url1`。要与两者进行比较，请尝试：

```
if (location.href == url1 || location.href == url2) 
```

# android - 如何为闪存 ROM 创建 C++ 可执行文件？

> ID：10202901
> 
> 赞同：1
> 
> 时间：2012-04-18T04:43:42.143
> 
> 标签：android, c++

我想创建 C++ 可执行文件以在 Android 手机上通过 ADB 闪存 ROM，有人可以帮我吗？我有 C++ 的基本知识，但不明白我应该从哪里开始逻辑是初始化头文件-->初始化 ADB 服务-->启动 ADB shell-->使用 flash_image 二进制刷新 .img 文件--> ADB 重启

谁能给我一个闪烁启动映像的简单示例？我不知道应该包含哪些头文件，应该使用哪个编译器。创建了一个新线程，因为我没有找到任何关于此的内容

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T02:45:08.477

**adb**与刷机无关，adb 是调试器接口，需要在手机上启动并运行系统。尝试使用完全运行的系统重新刷新 ROM 映像就像在没有麻醉的情况下进行心脏手术一样。

正确刷新 ROM 映像有两种基本方法：

1.  更新.zip
2.  快速启动

前一种是当您将 ROM 映像作为**update.zip**复制/下载到 sdcard 中，然后使用恢复来更新系统。这通常涉及用户按下一些按钮并关闭和重新打开手机。这是最好的方法，因为更新文件已经安全地存储在sdcard上，可以检查验证，手机变砖的可能性微乎其微。

第二个是当您将手机连接到 PC 时，使用“adb reboot bootloader”（或关闭/打开并按住一些按钮）将其切换到 fastboot 模式，然后使用**fastboot**执行 ROM 更新魔法。问题是，使用 fastboot 时，您需要一个非常可靠的 USB 连接。任何通信错误，手机都会变砖。这就是为什么我不使用也不推荐使用 fastboot 方法来刷新 ROM。

如果您不介意使用 fastboot 方法将手机变砖，那么 C++ 程序将非常简单。

1.  在某处解压缩 ROM 映像（如果您将其打包在程序中）
2.  发出 exec() 或 system() 调用以运行“adb reboot bootloader”，然后是“fastboot flash*”命令，最后是“fastboot reboot”
3.  如果您已正确完成所有操作（捕获并处理 adb 和 fastboot 的输出以检查结果），您的设备将重新刷新并重新启动。

最后，我想再次强调一下，使用 fastboot 重新刷新 ROM 非常危险，我建议尽可能避免使用它。

# android - 按下后跳回直接父活动

> ID：10202903
> 
> 赞同：6
> 
> 时间：2012-04-18T04:43:56.150
> 
> 标签：android, android-intent

我正在开发的 Android 应用程序中遇到了一个小问题：

有 3 个活动，即 A 、 B 、 C ，调用顺序如下：A -> B -> C。而在 C 中，当我按下 BACK 按钮时，它应该返回 A[而不是 B 默认情况下]。在 A 中按 BACK 将退出程序。

我试图将意图从 C 调用到 A。但在这种情况下，调用调用进入一个循环：A -> B -> C -> A，因为新活动被推送到堆栈顶部。结果，当在 A 处按下 BACK 时，不是退出 [A 是开始]，而是转到 C，然后是 B，然后再回到 A，这是一个不必要的循环。

如果有人可以提供更好的方法来解决这种循环场景，那就太好了！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-18T04:53:57.853

很简单！！当您从 B 开始活动 C 时，使用 B.finish()。像这样的东西。

```
Intent i = new Intent(B.this, C.class);
B.this.finish();
startActivity(i); 
```

这将从堆栈中删除 B！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-22T12:24:59.947

可能晚了，但对于可能在搜索中找到此内容的人：您可以添加

```
 android:noHistory="true" 
```

到您的 AndroidManifest 中的活动 B。这也将避免当 C 返回结果时在活动 B 中调用 onActivityResult() 方法。我基本上就像你启动 C 时 B 消失一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T04:49:08.317

像这样为 B 活动设置一个标志

```
private boolean mDestroyActivity = false; 
```

当您调用 startActivity C 时将该标志设置为 true。

对于活动 B onStop 方法，添加如下检查：

```
if (mDestroyActivity) finish(); 
```

然后，当您按下 C 中的返回按钮时，您将跳回 A。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T04:49:34.457

您可以使用结束活动 B开始活动`startActivityForResult()`C。`onActivityResult()`

要开始活动 C，

```
Intent intent = new Intent(ActivityB.this, ActivityC.class);
startActivityForResult(intent, 123); 
```

并在活动 B 中覆盖

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        if(requestCode == 123){
            if(resultCode == Activity.RESULT_OK){
                finish();
            }
        }
    } 
```

而在Activity C里面使用`setResult(Activity.RESULT_OK)`之前`finish();`

**更新：**

另一种方法是使用`FLAG_ACTIVITY_NEW_TASK`并`FLAG_ACTIVITY_CLEAR_TOP`从 Activity C 启动 Activity A。

```
Intent intent = new Intent(ActivitC.this, ActivityA.class);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

当您开始活动 C 时，另一种方法可能只是`finish()`活动 B。因此，当您按回活动 C 时，它将直接移动到活动 A，因为活动 B 已经完成。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T04:55:30.037

请在启动新 Activity 之前设置此 FLAG

意图.setFlags（意图.FLAG_ACTIVITY_NO_HISTORY）；

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-20T10:38:53.463

在清单文件中提及活动标签中的值低于

> 机器人：noHistory =“真”

然后它将跳过活动

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-18T05:03:36.627

我认为你不应该打破正常流程。C应该先返回B然后A。

无论如何我都可以解决您的问题。在 A 活动中注册广播接收器，然后从 C 向 A 发送广播。在 A 活动中，您可以接收该广播，然后清除堆栈。这将自动完成所有子活动。

覆盖 onbackpress 并且不要在 onbackpress 中调用 super 而是向活动 A 发送广播。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-09T09:06:34.127

*   在活动 B 中：

    公共静态布尔 mDestroyActivity = false; @Override protected void onResume() { super.onResume(); /** * 从活动 C-> A 返回时退出（跳过活动 B） */ Log.i("FINISH", "= " + mDestroyActivity); if (mDestroyActivity) { mDestroyActivity = false; 结束（）; } }

*   在活动 C 中：

    B.mDestroyActivity = true;

# java - 是否建议将大字符串存储在内存中，或者重复读取文件？

> ID：10202905
> 
> 赞同：1
> 
> 时间：2012-04-18T04:44:08.967
> 
> 标签：java, android

假设我有各种 text/json/xml/whatever 文件（本地存储在 assets 目录中），大小从 20 到 500 KB。假设这些文件将在整个应用程序中被频繁引用，最好是：

A）在第一次请求时读取文件一次，并将数据存储在变量中

或者

B）每次请求时读取文件，获取请求的信息，然后让GC清理？

来自web-dev，我通常使用选项（A），但我想知道移动设备的存储限制是否使B在这种情况下（Android应用程序开发）更受欢迎。

蒂亚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:46:00.007

您可以通过压缩将数据存储到内存中。它会在任何时候减少您的内存占用。因此该技术可以适用于PC和手机。稍后当您需要数据时，读取并解压缩它。所以读取文件一次，然后压缩并存储在内存中。下面的例子使用 GZIPOutputStream 压缩一个字符串。

```
public static String compress(String str){
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    GZIPOutputStream gzip = new GZIPOutputStream(out);
    gzip.write(str.getBytes());
    gzip.close();
    return out.toString("ISO-8859-1");
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T01:40:08.590

这取决于文件的总大小、访问频率和您的目标客户。虽然高端手机的内存非常大，但内存较少的低端系统很多。它可能应该使用一些 LRU 缓存来达到平衡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T05:15:13.157

如果文件被频繁请求，肯定最好读取一次文件并存储在缓存中。

您还可以阅读这篇题为[Google 如何教我](http://highscalability.com/how-google-taught-me-cache-and-cash)在 HighScalability 网站中缓存和兑现的文章。

# java - 在 JPA 中执行左连接查询

> ID：10202908
> 
> 赞同：1
> 
> 时间：2012-04-18T04:44:22.360
> 
> 标签：java, jpa-2.0

我有两张表，一张用于派对，一张用于记分卡模板映射。记分卡模板映射表有一个外键返回该方（在 id 上）。我想查找具有记分卡模板映射详细信息的所有各方的列表。

但我收到一条错误消息：

> java.lang.IllegalArgumentException：org.hibernate.hql.internal.ast.QuerySyntaxException：意外令牌：在第 1 行附近，第 172 列 [从 com.kpisoft.common 中选择新的 ScorecardTemplateMapping(p,temMap.scoTemplate,temMap.wrkFlwTemplate)。 web.domain.Party p left outer join ScorecardTemplateMapping temMap on temMap.organization.id=p.id and temMap.gradeType.id=:gradeType where p.organization.organizationTypeId=:orgType and p.clientId=:clientId order by p.机构名称]

这是我的查询：

> 查询q = entityManager.createQuery("select new ScorecardTemplateMapping(p,temMap.scoTemplate,temMap.wrkFlwTemplate) from Party p left outer join ScorecardTemplateMapping temMap on temMap.organization.id=p.id and temMap.gradeType.id=:gradeType where p.organization.organizationTypeId=:orgType and p.clientId=:clientId order by p.organization.name");

我不知道为什么这不起作用。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:04:33.533

关于语法错误的错误消息非常清楚：

```
unexpected token: on 
```

JPQL 中不支持使用 ON [conditional] 进行连接（ON 不是保留字）。[例如，](http://docs.oracle.com/cd/E28613_01/apirefs.1211/e24396/ejb3_langref.html#ejb3_langref_Joins)在 JPQL 中如何进行连接。归结为您必须在 where 子句中提出连接条件。

# html - 带有 html 5 观察位置的谷歌地图（防止地图刷新）

> ID：10202910
> 
> 赞同：-1
> 
> 时间：2012-04-18T04:44:42.817
> 
> 标签：html, google-maps-api-3, geolocation

我使用 google maps api v3 创建了一个非常简单的 html 5 watchposition，它跟踪用户位置。我的观察位置有纬度、经度和准确性。一切正常，但只有 1 个问题。当我在 Android 手机浏览器和 IOS 手机浏览器中进行测试时，如果 watchPosition() 检测到新位置（纬度、经度、ACC），谷歌地图会不断刷新。

我的问题是为什么不仅标记移动而不是刷新整个地图？

我现在没有脚本，但它只是一个简单的脚本，可以在网上找到任何方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:46:33.527

这很简单：

的声明`map`应该在`onsuccess`事件之外`watchposition`

# visual-studio-2010 - 错误消息：使用模拟器时“确保目标设备屏幕已解锁”

> ID：10202917
> 
> 赞同：5
> 
> 时间：2012-04-18T04:45:32.477
> 
> 标签：visual-studio-2010, windows-phone-7, emulation

任何人都知道为什么我在模拟器上调试时收到错误消息：“无法启动应用程序进行调试。确保目标设备屏幕已解锁并且已安装应用程序。” 在 Visual Studio 2010 中进行开发时。

我已经通过谷歌搜索并尝试了解决方案，但仍然没有解决我的问题。顺便说一句，我的解决方案类型是 SLXNA，所以那里有 3 个项目，主项目、lib 项目和 libcontent 项目。

我试过的：

1.  设置主项目为启动项目
2.  选中主项目的构建和部署复选框，并选中 lib 项目的构建复选框
3.  将活动解决方案平台更改为 Windows phone
4.  重建解决方案

但它仍然没有解决问题

但是当我在设备上调试它时，它运行顺利

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T12:24:42.277

*   确保您要运行的项目设置为默认启动项目
*   确保在顶部的下拉列表中选择了“Windows Phone Emulator”，而不是“Windows Phone Device”
*   最重要的是：单击“调试/发布”配置附近的向下箭头并打开“配置管理器”...确保选中项目名称旁边的“部署”列中的复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T02:37:00.110

好消息：我通过简单地安装 windows phone sdk 7.1.1 解决了这个问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T17:58:05.090

如果一些 WP8 开发人员偶然发现：

我在带有 WP8 应用程序的 VS 2012 上看到了完全相同的错误消息。但是，当我切换到**适用于 Windows Phone 的 Visual Studio Express**（随 SDK 提供）时，它就起作用了。

# javascript - 如何将 api 调用的响应从触发器传递到 Salesforce 的侧边栏组件？

> ID：10202923
> 
> 赞同：0
> 
> 时间：2012-04-18T04:46:27.013
> 
> 标签：javascript, triggers, components, salesforce, sidebar

我在 Lead 对象的触发器中进行 Web 服务调用，我需要将**响应传递回**前端......即到**侧边栏组件，其中存在的 javascript**将读取响应并采取相应行动......

还有什么方法可以**在侧边栏组件中获取页面的上下文**......我的意思是我在哪个页面......那是一个潜在客户或机会或帐户页面......侧边栏组件必须知道这个上下文。 ..

所以我需要的是

*   将触发器的响应传递给侧边栏组件找到页面
*   使用侧边栏组件的上下文

谢谢你的建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:38:52.207

没有办法（我知道）将响应从触发器传递给 UI，因为触发器是作为数据库命令（插入、更新、删除等）的结果运行的。要从触发器取回数据，您必须将该数据写入记录/字段，然后查询它。

# css - css多列问题

> ID：10202924
> 
> 赞同：0
> 
> 时间：2012-04-18T04:46:32.880
> 
> 标签：css, blueprint-css

你能帮我一些css魔法吗？

我正在尝试实现一个灵活的多列布局。像这样的东西[http://masonry.desandro.com/demos/basic-multi-column.html](http://masonry.desandro.com/demos/basic-multi-column.html)我可以用蓝图而不是 javascript 来实现它。

现在有蓝图的是增加了很多空白（见附件）

![在此处输入图像描述](../Images/199b9d4eb642be85c04f20edfafeb9d9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T04:57:55.183

以下只是示例之一。您只需根据您的要求更改宽度/高度。希望这可以帮助。

```
CSS 
----
.content {
    float: left;
    display: block;
    width: 1000px;
    background: red;
}

.sub-content {
    float:left;
    width: 200px; 
    background: blue;
    margin: 10px;
}

Sample HTML
-----------
<div class="content">
<div class="sub-content" style="width: 500px; height: 300px;">
    DIV 1
</div>

<div class="sub-content" style="width: 200px; height: 100px;">
    DIV 2
</div>

<div class="sub-content" style="width: 500px; height: 300px;">
    DIV 3
</div>

<div class="sub-content" style="width: 250px; height: 300px;">
    DIV 4
</div>
</div> 
```

# elasticsearch - 如何在 ElasticSearch 中使字段可排序？

> ID：10202926
> 
> 赞同：0
> 
> 时间：2012-04-18T04:46:40.190
> 
> 标签：elasticsearch

我试过了，例如：

```
{
  "sort": [
    {
      "retail_price": {
        "reverse": true
      }
    }
  ]
} 
```

……无济于事。我是否需要以特殊方式映射该字段才能对其进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:08:00.173

该字段应满足两个条件：1) 它必须被索引；2) 每个文档的值不应超过一个，每个字段不应具有多个标记。如果retail_price 在您的案例中被索引并且它仍然对您不起作用，您能否发布一个演示该问题的脚本？

# java-me - 我想在 j2me 应用程序中添加一个进度条

> ID：10202930
> 
> 赞同：0
> 
> 时间：2012-04-18T04:47:00.073
> 
> 标签：java-me, midp, lcdui

我想在 j2me 应用程序中添加一个进度条来显示繁忙的进程。

我正在使用警报添加仪表作为指示器来执行此操作，但它会在单击按钮时消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:59:28.203

如果您不想使用 LCDUI Alert 或 LWUIT，您可以使用 Canvas。我在[http://smallandadaptive.blogspot.com.br/2009/09/adding-simple-progress-bar.html](http://smallandadaptive.blogspot.com.br/2009/09/adding-simple-progress-bar.html)分享了一个非常简单的示例，全文如下：

进度条是 0 到 1 之间的实数或 0% 到 100% 之间的百分比的直观表示。

下面是一个绘制简单进度条的方法：

```
    /**
     * @param g 图形
     * @参数x
     * @param y
     * @param w 宽度
     * @param h 高度
     * @param p 介于零和总数之间的部分
     * @param t 总计
     */
    void fillProgressBar（图形 g，int x，int y，int w，int h，int p，int t）{
      g.drawRect(x, y, w, h);
      // p 会收到像素宽度的比例：part/total
      p = (p * w) / t;
      g.fillRect(x, y, p, h);
    }

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:32:59.317

从 LWUIT 我们可以通过 2 种方式显示进度

1）在对话框中显示一些 gif 图像并且在我们从服务器获得完整响应之前不处理对话框/在完成处理后处理它

2) 从 LWUIT 1.5 开始，我们有名为 Slider 和 Sliderfull 的组件，我们可以使用该组件来显示一些进度，直到处理完成。

欲了解更多信息，请浏览此博客[Slider](http://lwuit.blogspot.com/2010/07/sliding-it-back-to-my-first-post.html?spref=bl)

# haml - Haml::SyntaxError - 非法嵌套：内容不能与 %a 在同一行给出并嵌套在其中

> ID：10202931
> 
> 赞同：12
> 
> 时间：2012-04-18T04:47:04.377
> 
> 标签：haml, twitter-bootstrap

我正在使用带有 HAML 的 Twitter Bootstrap 中的“按钮下拉菜单”。在 Bootstrap 文档中，我找到了示例：

```
<div class="btn-group">
  <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
    Action
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu">
    <!-- dropdown menu links -->
  </ul>
</div> 
```

我尝试使用 HAML 重写它：

```
%div{:class => 'btn-group task_controller'}
  %a{:class => 'btn-mini dropdown-toggle', "data-toggle" => 'dropdown', :href => '#'} Action
    %span{:class => 'caret'}
  %ul{:class => 'dropdown-menu'}
    %a{:class => 'close_task', :name => task.name, :href => '#' } Close 
```

但收到错误消息：

```
Haml::SyntaxError - Illegal nesting: content can't be both given on the same line as %a and nested within it. 
```

所以 Bootstrap 说我把元素放在 -tag 里面，但是 HAML 不允许这样做。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-18T21:25:42.437

问题出在以下几行：

```
%a{:class => 'btn-mini dropdown-toggle', "data-toggle" => 'dropdown', :href => '#'} Action
  %span{:class => 'caret'} 
```

错误消息：`content can't be both given on the same line as %a and nested within it`指的`Action`是“与 %a 位于同一行”的`%span{:class => 'caret'}`内容，以及“嵌套在其中”的内容。

更一般地说，也许更容易看到，你不能有这样的东西：

```
%tag Some content here
  And something here as well 
```

解决方法是将两者都嵌套在`%a`：

```
%a{:class => 'btn-mini dropdown-toggle', "data-toggle" => 'dropdown', :href => '#'}
  Action
  %span{:class => 'caret'} 
```

这给出了所需的输出：

```
<a class='btn-mini dropdown-toggle' data-toggle='dropdown' href='#'>
  Action
  <span class='caret'></span>
</a> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-26T06:36:01.793

不要忘记您的 Haml 习语！

```
#div{:class => 'btn-group task_controller'} 
```

相当于：

```
.btn-group.task_controller 
```

…ETC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T21:28:05.257

尝试这个：

```
%div{:class => 'btn-group task_controller'}
  %a{:class => 'btn-mini dropdown-toggle', "data-toggle" => 'dropdown', :href => '#'}
    Action
    %span{:class => 'caret'}
  %ul{:class => 'dropdown-menu'}
    %a{:class => 'close_task', :name => task.name, :href => '#' } Close 
```

只有当标签中没有更多内容行时，标签名称和内容才能在同一行。

# eclipse - 调用 Dialog 后，Eclipse SearchDialog 立即更改

> ID：10202935
> 
> 赞同：0
> 
> 时间：2012-04-18T04:47:20.090
> 
> 标签：eclipse, eclipse-plugin

我的需求就像更改 Eclipse 默认 SearchDialog，所以只要任何用户打开 Eclipse 菜单，搜索>搜索，打开的窗口/向导应该是自定义的，如何使这种情况成为可能。是否有任何扩展点可以处理向导的所有启动操作，以便我可以调用它，并且任何时候调用对话框时，我都会覆盖并进行更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T20:06:19.750

通过使用`org.eclipse.search.searchResultViewPages`扩展点，您可以定义自己的搜索结果页面和其他必需的类来为内置的 Eclipse 搜索“机制”做出贡献。

# python - 如何在 Python 中使用方法重载？

> ID：10202938
> 
> 赞同：210
> 
> 时间：2012-04-18T04:47:50.227
> 
> 标签：python, class, overloading

我正在尝试在 Python 中实现方法重载：

```
class A:
    def stackoverflow(self):    
        print 'first method'
    def stackoverflow(self, i):
        print 'second method', i

ob=A()
ob.stackoverflow(2) 
```

但输出是`second method 2`；相似地：

```
class A:
    def stackoverflow(self):    
        print 'first method'
    def stackoverflow(self, i):
        print 'second method', i

ob=A()
ob.stackoverflow() 
```

给

```
Traceback (most recent call last):
  File "my.py", line 9, in <module>
    ob.stackoverflow()
TypeError: stackoverflow() takes exactly 2 arguments (1 given) 
```

我该如何进行这项工作？

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-04-18T04:53:05.673

这是方法*重载*，而不是方法*覆盖*。在 Python 中，您可以在一个函数中完成所有操作：

```
class A:

    def stackoverflow(self, i='some_default_value'):
        print 'only method'

ob=A()
ob.stackoverflow(2)
ob.stackoverflow() 
```

在 Python 中你不能有两个同名的方法——你也不需要。

请参阅 Python 教程的[默认参数值](http://docs.python.org/tutorial/controlflow.html#default-argument-values)部分。请参阅*[“Least Astonishment”和 Mutable Default Argument](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)*以了解要避免的常见错误。

有关Python 3.4 中新的单调度泛型函数的信息，请参阅[PEP 443 。](http://www.python.org/dev/peps/pep-0443/)

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2015-04-26T12:11:53.100

您还可以使用[pythonlangutil](https://pypi.python.org/pypi/pythonlangutil/0.1)：

```
from pythonlangutil.overload import Overload, signature

class A:
    @Overload
    @signature()
    def stackoverflow(self):    
        print 'first method'

    @stackoverflow.overload
    @signature("int")
    def stackoverflow(self, i):
        print 'second method', i 
```

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2012-04-18T04:55:24.180

在 Python 中，您不会那样做。当人们在像 Java 这样的语言中这样做时，他们通常想要一个默认值（如果他们不这样做，他们通常想要一个具有不同名称的方法）。因此，在 Python 中，[您可以使用默认值](http://docs.python.org/tutorial/controlflow.html#default-argument-values)。

```
class A(object):  # Remember the ``object`` bit when working in Python 2.x

    def stackoverflow(self, i=None):
        if i is None:
            print 'first form'
        else:
            print 'second form' 
```

如您所见，您*可以*使用它来触发单独的行为，而不仅仅是使用默认值。

```
>>> ob = A()
>>> ob.stackoverflow()
first form
>>> ob.stackoverflow(2)
second form 
```

* * *

## 回答 #4

> 赞同：49
> 
> 时间：2018-09-23T16:27:48.057

虽然[agf 过去的答案是正确的 pre-3.4](https://stackoverflow.com/questions/10202938/how-do-i-use-method-overloading-in-python/10202988#10202988)，但现在有了[PEP-3124](https://www.python.org/dev/peps/pep-3124/)，我们得到了我们的语法糖。

有关装饰器的详细信息，请参阅[打字文档](https://docs.python.org/3/library/typing.html#typing.overload)`@overload`，但请注意，这实际上只是语法糖，恕我直言，这是人们从那时起一直在争论的问题。

就我个人而言，我同意拥有多个具有不同签名的函数使其更具可读性，然后将具有 20 多个参数的单个函数都设置为默认值（`None`大多数情况下），然后不得不摆弄使用无穷无尽`if`的 , `elif`,`else`链来找出调用者实际上希望我们的函数对提供的参数集做什么。这在 Python Zen 之后早就应该这样做了：

> 美丽总比丑陋好。

并且可以说也是

> 简单胜于复杂。

直接来自上面链接的官方 Python 文档：

```
from typing import overload
@overload
def process(response: None) -> None:
    ...
@overload
def process(response: int) -> Tuple[int, str]:
    ...
@overload
def process(response: bytes) -> str:
    ...
def process(response):
    <actual implementation> 
```

编辑：对于任何想知道为什么这个例子没有像你期望的那样工作的人，如果我建议从其他语言看一下[这个讨论](https://stackoverflow.com/questions/52034771/overload-decorator-in-typings-module-doesnt-seem-to-behave-as-expected)。这些`@overloaded`功能不应该有任何实际的实现。这在 Python 文档中的示例中并不明显。

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2012-04-18T06:24:51.587

你不能，永远不需要，也不想这样做。

在 Python 中，一切都是对象。类是事物，所以它们是对象。方法也是如此。

有一个称为`A`类的对象。它有一个名为 的属性`stackoverflow`。它只能有一个这样的属性。

当您编写`def stackoverflow(...): ...`时，会发生什么是您创建一个作为方法的对象，并将其分配给 的`stackoverflow`属性`A`。如果你写了两个定义，第二个会替换第一个，就像赋值总是一样。

此外，您不想编写代码来执行重载有时使用的更疯狂的事情。这不是语言的工作方式。

与其尝试为可能给定的每种类型的事物定义一个单独的函数（这没有什么意义，因为无论如何您都没有为函数参数指定类型），而是*停止担心事物**是**什么并开始思考它们可以**做什么***。

您不仅不能单独编写一个来处理元组与列表，而且**也不希望或不需要**.

您所做的就是利用它们都是可迭代的（例如，您可以编写`for element in container:`）这一事实。（它们与继承没有直接关系的事实是无关紧要的。）

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2012-04-18T04:54:54.577

我认为您正在寻找的词是“重载”。Python 中没有任何方法重载。但是，您可以使用默认参数，如下所示。

```
def stackoverflow(self, i=None):
    if i != None:
        print 'second method', i
    else:
        print 'first method' 
```

当你向它传递一个参数时，它将遵循第一个条件的逻辑并执行第一个打印语句。当您不传递任何参数时，它将进入`else`条件并执行第二个*打印*语句。

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2014-10-24T19:07:46.837

我在 Python 3.2.1 中写下我的答案。

```
def overload(*functions):
    return lambda *args, **kwargs: functions[len(args)](*args, **kwargs) 
```

这个怎么运作：

1.  `overload`获取任意数量的可调用对象并将它们存储在 tuple 中`functions`，然后返回 lambda。
2.  lambda 接受任意数量的参数，然后返回存储在`functions[number_of_unnamed_args_passed]`调用中的调用函数的结果，并将参数传递给 lambda。

用法：

```
class A:
    stackoverflow=overload(                    \
        None, \ 
        #there is always a self argument, so this should never get called
        lambda self: print('First method'),      \
        lambda self, i: print('Second method', i) \
    ) 
```

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2015-07-15T07:00:57.207

我在 Python 2.7 中写下我的答案：

在 Python 中，方法重载是不可能的；如果您真的想访问具有不同功能的相同功能，我建议您使用方法覆盖。

```
class Base(): # Base class
    '''def add(self,a,b):
        s=a+b
        print s'''

    def add(self,a,b,c):
        self.a=a
        self.b=b
        self.c=c

        sum =a+b+c
        print sum

class Derived(Base): # Derived class
    def add(self,a,b): # overriding method
        sum=a+b
        print sum

add_fun_1=Base() #instance creation for Base class
add_fun_2=Derived()#instance creation for Derived class

add_fun_1.add(4,2,5) # function with 3 arguments
add_fun_2.add(4,2)   # function with 2 arguments 
```

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2016-09-26T21:30:08.490

在 Python 中，重载不是一个应用概念。但是，如果您尝试创建一种情况，例如，如果传递一个类型的参数，您希望执行一个初始化程序，然后`foo`为一个类型的参数执行另一个初始化程序`bar`，因为 Python 中的所有内容都作为对象处理，您可以检查传递对象的类类型的名称并在此基础上编写条件处理。

```
class A:
   def __init__(self, arg)
      # Get the Argument's class type as a String
      argClass = arg.__class__.__name__

      if argClass == 'foo':
         print 'Arg is of type "foo"'
         ...
      elif argClass == 'bar':
         print 'Arg is of type "bar"'
         ...
      else
         print 'Arg is of a different type'
         ... 
```

这个概念可以根据需要通过不同的方法应用于多个不同的场景。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2012-04-18T04:55:29.240

在 Python 中，您可以使用默认参数来执行此操作。

```
class A:

    def stackoverflow(self, i=None):    
        if i == None:
            print 'first method'
        else:
            print 'second method',i 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2015-02-06T20:51:53.783

我刚刚遇到了可能感兴趣的任何人的重载.py（Python 3 的函数重载）*[。](https://github.com/bintoro/overloading.py)*

从链接存储库的 README 文件中：

> 重载是一个基于运行时参数的类型和数量提供函数分派的模块。
> 
> 当调用重载函数时，调度程序将提供的参数与可用的函数签名进行比较，并调用提供最准确匹配的实现。
> 
> 特征
> 
> 注册时的函数验证和详细的解析规则保证了运行时唯一的、明确定义的结果。实现函数解析缓存以获得出色的性能。支持函数签名中的可选参数（默认值）。在解决最佳匹配时评估位置参数和关键字参数。支持后备功能和共享代码的执行。支持参数多态性。支持类和继承，包括类方法和静态方法。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2018-05-28T19:53:41.403

Python 不支持方法重载，如 Java 或 C++。我们可以重载方法，但我们只能使用最新定义的方法。

```
# First sum method.
# Takes two argument and print their sum
def sum(a, b):
    s = a + b
    print(s)

# Second sum method
# Takes three argument and print their sum
def sum(a, b, c):
    s = a + b + c
    print(s)

# Uncommenting the below line shows an error
# sum(4, 5)

# This line will call the second sum method
sum(4, 5, 5) 
```

我们需要提供可选参数或 *args 以便在调用时提供不同数量的参数。

礼貌*[Python | 方法重载](https://www.geeksforgeeks.org/python-method-overloading/)*

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2018-10-10T15:26:23.177

Python 3.x 包含标准类型库，它允许使用 @overload 装饰器重载方法。不幸的是，这是为了使代码更具可读性，因为 @overload 修饰方法后面需要一个处理不同参数的非修饰方法。[在这里](https://docs.python.org/3/library/typing.html)可以找到更多信息，但以您为例：

```
from typing import overload
from typing import Any, Optional
class A(object):
    @overload
    def stackoverflow(self) -> None:    
        print('first method')
    @overload
    def stackoverflow(self, i: Any) -> None:
        print('second method', i)
    def stackoverflow(self, i: Optional[Any] = None) -> None:
        if not i:
            print('first method')
        else:
            print('second method', i)

ob=A()
ob.stackoverflow(2) 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2020-06-21T05:02:07.850

[Python 添加了带有PEP-3124](https://stackoverflow.com/questions/10202938/how-do-i-use-method-overloading-in-python)的 @overload 装饰器，以通过类型检查为重载提供语法糖——而不仅仅是使用覆盖。

通过 PEP-3124 中的 @overload 进行重载的代码示例

```
from overloading import overload
from collections import Iterable

def flatten(ob):
    """Flatten an object to its component iterables"""
    yield ob

@overload
def flatten(ob: Iterable):
    for o in ob:
        for ob in flatten(o):
            yield ob

@overload
def flatten(ob: basestring):
    yield ob 
```

由@overload-decorator 转换为：

```
def flatten(ob):
    if isinstance(ob, basestring) or not isinstance(ob, Iterable):
        yield ob
    else:
        for o in ob:
            for ob in flatten(o):
                yield ob 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2018-04-23T08:46:36.937

在*MathMethod.py*文件中：

```
from multipledispatch import dispatch
@dispatch(int, int)
def Add(a, b):
   return a + b 
@dispatch(int, int, int)  
def Add(a, b, c):
   return a + b + c 
@dispatch(int, int, int, int)    
def Add(a, b, c, d):
   return a + b + c + d 
```

在*Main.py*文件中

```
import MathMethod as MM 
print(MM.Add(200, 1000, 1000, 200)) 
```

我们可以通过使用multipledispatch 来重载该方法。

# c# - 根据 Key 元素相交的 keyValuePair 列表数

> ID：10202939
> 
> 赞同：1
> 
> 时间：2012-04-18T04:47:56.517
> 
> 标签：c#, .net, linq

我有许多类型的列表：

```
public List<KeyValuePair<KeyValuePair<string, string>, 
                  List<KeyValuePair<string, string>>>> rawComparisonObject; 
```

我想根据构造列表的 KeyValuePair 的“键”来获取这些列表的交集

我试过：
`List2 = list1.Intersect(list2).Intersect(list3)......`etc ，但你可以看到它与所有 KeyValuePair 变量相交，而不是我想要的那个。

我还尝试过 [KeyValuePair 键上的相交列表？](https://stackoverflow.com/questions/3701878/intersect-lists-on-keyvaluepair-key)

采用以下形式：

```
 public List<List<KeyValuePair<KeyValuePair<string, string>, List<KeyValuePair<string, string>>>>> getCommon(List<ResourceInformation> input)
    {
        List<List<KeyValuePair<KeyValuePair<string, string>, List<KeyValuePair<string, string>>>>> rawComparisonObject =
            new List<List<KeyValuePair<KeyValuePair<string,string>,List<KeyValuePair<string,string>>>>>();
        foreach (ResourceInformation item in input)
        {
            rawComparisonObject.Add(item.rawComparisonObject);                
        }

        foreach (List<KeyValuePair<KeyValuePair<string, string>, List<KeyValuePair<string, string>>>> item in rawComparisonObject)
        {

        }
        List<List<KeyValuePair<KeyValuePair<string, string>, List<KeyValuePair<string, string>>>>> common =
            new List<List<KeyValuePair<KeyValuePair<string, string>, List<KeyValuePair<string, string>>>>>();
        for (int i = 0; i < (rawComparisonObject.Count-1); i++)
        {
            var keysFromB = new HashSet<KeyValuePair<string, string>>(rawComparisonObject[i].Select(x => x.Key));
            var result = rawComparisonObject[i+1].Where(x => keysFromB.Remove(x.Key));
            common.Add(result.ToList());
        }
        return common;

    } 
```

它返回了非常错误的值，有没有简单的方法可以做到这一点？

* * *

我在链接数据工作中使用这种数据结构，通过对象之间的比较来获取公共对象

例如：蝙蝠侠大战盗梦空间

**应该返回：**

类型：电影 | 电影

主演：克里斯蒂安·贝尔 | 莱昂纳多·迪卡普里奥

当然，所有内容都通过它的 URI 链接突出显示，这就是为什么我需要 keyValuePair 一个用于 URI，另一个用于标签....

我尽力解释这个复杂的数据结构。希望它足够清楚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T06:55:23.490

据我了解您编写的代码，这是我的（修订后的）翻译：

```
public List<List<KeyValuePair<KeyValuePair<string, string>, List<KeyValuePair<string, string>>>>> getCommon(List<ResourceInformation> input)
{
    var rawComparisonObject = 
        input.Select(item => item.rawComparisonObject).ToList();

    var common = rawComparisonObject.Zip(
        rawComparisonObject.Skip(1), 
        (prevItems, nextItems) => 
            (from next in nextItems
            join prev in prevItems on next.Key equals prev.Key
            select next).ToList()).ToList();

    return common;
} 
```

编辑：上面的翻译省略了中间的空 foreach 循环，并使用连接作为过滤器，仅投影通过连接条件的“下一个”元素。我倾向于加入这种过滤，因为我知道它在幕后利用散列来有效地执行它所做的匹配。

我以前版本的问题是它使用“组连接”变量收集连接结果，这导致了我们不想要的额外枚举。更改后，内部`ToList()`类似于`result`帖子中提供的原始代码示例中的变量。外部`ToList()`是最终`common`变量对结果的（重新）打包。我相信这将提供类似于原始代码的结果；但是，我强烈建议进行测试以验证结果是否符合预期。

恕我直言，正确的做法是重构以简化泛型的使用，直到我们能够更好地推理它们。在一次短暂的临时尝试中，我更改`GetCommon`为这样的泛型类型（后来将其改回）：

```
public List<List<KeyValuePair<T, List<T>>>> GetCommon<T>(/*List<ResourceInformation> input*/) 
```

从那里，我们可以将`rawComparisonObject`列表提升为方法的参数 - 在此过程中，我们将替换方法的当前参数。使用`var`类型化允许我们避免更改`common`局部变量的类型（只要我们小心输出类型与预期的返回类型匹配，这在原始翻译中是我的错误。）

设计理念和问题比我在这里可以轻松地检查的要多得多，所以我将在不尝试这样做的情况下结束。我确实想提出这是一个很好的挑战——有时 LINQ 不是正确的选择，但即使它不是正确的选择，改变方法也值得一试。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:45:11.373

您可以使用 linq 执行此操作，但您可能应该更改数据模型以提高效率：

```
var keys = list1.select( kv => kv.Key).intersection(list2.select(kv => kv.Key)
var result = list1.where( key => keys.contains(key).TolLst() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T11:49:10.947

如果您只想在其键上与 KeyValuePairs 相交，您应该实现一个自定义[`IEqualityComparer<T>`](http://msdn.microsoft.com/en-us/library/ms132151%28v=vs.95%29.aspx)和使用[`Intersect()`](http://msdn.microsoft.com/en-us/library/bb355408%28v=vs.95%29.aspx)方法，如下所示：

```
class KeyValyePairComparer : IEqualityComparer<KeyValuePair<string, string>>
{
    public bool Equals(KeyValuePair<string, string> x, KeyValuePair<string, string> y)
    {
        return x.Key == y.Key;
    }

    public int GetHashCode(KeyValuePair<string, string> item)
    {
        return item.Key.GetHashCode();
    }
} 
```

使用上面的实现，您可以获得与查询的交集：

```
var comparer = new KeyValuePairComparer();
var intersection = list1.Intersect(list2, comparer).Intersect(list3, comparer); 
```

# c - 分段故障处理

> ID：10202941
> 
> 赞同：42
> 
> 时间：2012-04-18T04:48:01.320
> 
> 标签：c, linux, signals, signal-handling

我有一个应用程序，用于捕获任何分段错误或 ctrl-c。使用下面的代码，我能够捕获分段错误，但处理程序被一次又一次地调用。我怎么能阻止他们。为了您的信息，我不想退出我的应用程序。我只需要注意释放所有损坏的缓冲区。

是否可以？

```
void SignalInit(void )
{

struct sigaction sigIntHandler;

sigIntHandler.sa_handler = mysighandler;
sigemptyset(&sigIntHandler.sa_mask);
sigIntHandler.sa_flags = 0;
sigaction(SIGINT, &sigIntHandler, NULL);
sigaction(SIGSEGV, &sigIntHandler, NULL);

} 
```

处理程序是这样的。

```
void mysighandler()
{
MyfreeBuffers(); /*related to my applciation*/
} 
```

在这里，对于分段错误信号，处理程序被多次调用，显然 MyfreeBuffers() 给了我释放已释放内存的错误。我只想释放一次，但仍然不想退出应用程序。

请帮忙。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-18T05:00:19.987

诸如此类的默认操作`SIGSEGV`是终止您的进程，但是当您为其安装了处理程序时，它将调用您的处理程序来覆盖默认行为。但问题是在你的处理程序完成后可能会重试段错误指令，如果你没有采取措施修复第一个段错误，重试的指令将再次出现错误并继续下去。

所以首先找出导致的指令`SIGSEGV`并尝试修复它（你可以`backtrace()`在处理程序中调用类似的东西，自己看看出了什么问题）

此外，POSIX 标准说，

> 一个进程的行为在它从一个信号捕获函数正常返回后，对于不是由 kill()、[RTS] sigqueue() 或 raise( ）。

因此，理想的做法是首先修复您的段错误。**段错误的处理程序并不意味着绕过底层错误条件**

所以最好的建议是 -*不要抓住`SIGSEGV`*. 让它转储核心。分析核心。修复无效的内存引用，然后就可以了！

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-09-26T17:08:27.433

我完全不同意*“不要赶上 SIGSEGV”*的说法。

*这是处理意外*情况的一个很好的做法。使用与 关联的信号机制来处理**NULL**指针（由 malloc 失败给出）`setjmp/longjmp`比在整个代码中分发错误条件管理要干净得多。

但是请注意，如果你在 ''sigaction'' 上使用，`SEGV`你一定不要忘记说- 或者找到另一种方式来处理这个事实，只会触发你的处理程序一次。`SA_NODEFER``sa_flags``SEGV`

```
#include <setjmp.h>
#include <signal.h>
#include <stdio.h>
#include <string.h>

static void do_segv()
{
  int *segv;

  segv = 0; /* malloc(a_huge_amount); */

  *segv = 1;
}

sigjmp_buf point;

static void handler(int sig, siginfo_t *dont_care, void *dont_care_either)
{
   longjmp(point, 1);
}

int main()
{
  struct sigaction sa;

  memset(&sa, 0, sizeof(sigaction));
  sigemptyset(&sa.sa_mask);

  sa.sa_flags     = SA_NODEFER;
  sa.sa_sigaction = handler;

  sigaction(SIGSEGV, &sa, NULL); /* ignore whether it works or not */ 

  if (setjmp(point) == 0)
   do_segv();

  else
    fprintf(stderr, "rather unexpected error\n");

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-18T05:28:34.403

如果`SIGSEGV`再次触发，显而易见的结论是调用`MyfreeBuffers();`并**没有**解决根本问题（如果该函数确实只执行`free()`一些分配的内存，我不确定您为什么会认为它会）。

粗略地说，`SIGSEGV`当尝试访问不可访问的内存地址时会触发。如果您不打算退出应用程序，则需要使该内存地址可访问，或者使用`longjmp()`.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-18T10:54:52.877

您不应该尝试在 之后继续`SIG_SEGV`。这基本上意味着您的应用程序环境以某种方式损坏。可能是您刚刚取消了对空指针的引用，或者可能是某些错误导致您的程序破坏了它的堆栈或堆或某些指针变量，您只是不知道。**唯一**安全的做法是终止程序。

处理 control-C 是完全合法的。很多应用程序都这样做，但你必须非常小心你在信号处理程序中所做的事情。您不能调用任何不可重入的函数。所以这意味着如果你`MyFreeBuffers()`调用 stdlib`free()`函数，你可能会被搞砸。`malloc()`如果用户在程序处于中间或`free()`操作他们用来跟踪堆分配的数据结构的过程中按了 control-C，那么如果你在信号处理程序中调用`malloc()`或，你几乎肯定会破坏堆。`free()`

在信号处理程序中，您可以做的唯一安全的事情就是设置一个标志，表示您已捕获到信号。然后，您的应用程序可以定期轮询标志以确定是否需要执行某些操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T05:00:11.480

好吧，您可以设置一个状态变量，如果未设置，则仅释放内存。每次都会调用信号处理程序，您无法控制该 AFAIK。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-22T11:53:46.887

我可以看到从 SIG_SEGV 恢复的案例，如果您在循环中处理事件并且其中一个事件导致分段违规，那么您只想跳过此事件，继续处理剩余事件。在我看来，SIG_SEGV 类似于 Java 中的 NullPointerException。是的，在其中任何一个之后，状态都会不一致且未知，但是在某些情况下，您希望处理这种情况并继续。例如，在 Algo 交易中，您将暂停订单的执行并允许交易者手动接管，而不会导致整个系统崩溃并破坏所有其他订单。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-14T10:47:23.400

看起来至少在 Linux 下使用带有 -fnon-call-exceptions 选项的技巧可以成为解决方案。它将提供将信号转换为通用 C++ 异常并以通用方式处理它的能力。查看[linux3/gcc46: "-fnon-call-exceptions"，哪些信号是捕获指令？](https://stackoverflow.com/questions/9225415/linux3-gcc46-fnon-call-exceptions-which-signals-are-trapping-instructions)例如。

# c# - StructureMap 默认实例和带有显式参数的附加实例

> ID：10202942
> 
> 赞同：0
> 
> 时间：2012-04-18T04:48:07.233
> 
> 标签：c#, dependency-injection, ioc-container, structuremap

我有一个接口和一个实现该接口的类。该类具有默认静态实例，也可以显式构造（传递参数）。

如何配置 StrucutreMap 以使默认实例是静态实例，如果我请求一个带有参数的实例，则构造一个新实例？

这是失败的测试

```
[TestFixture]
public class StructureMapTests
{
    [Test]
    public void Test_same_interface_default_implemenation_and_with_parameter()
    {
        IMyInterface defaultImp = new MyImpl(0);

        ObjectFactory.Initialize(x =>
                                     {
                                         x.For<IMyInterface>().Use(defaultImp);
                                         x.For<IMyInterface>().Add<MyImpl>().Ctor<int>().IsTheDefault();                                             
                                     });

        Assert.AreEqual(defaultImp, ObjectFactory.GetInstance<IMyInterface>());

        var instance1 = ObjectFactory.With("value").EqualTo(1).GetInstance<IMyInterface>();
        Assert.AreEqual(true, instance1 != defaultImp); //<-- fails here
        Assert.AreEqual(1, instance1.GetValue());

        var instance2 = ObjectFactory.With("value").EqualTo(2).GetInstance<IMyInterface>();
        Assert.AreEqual(true, instance1 != defaultImp);
        Assert.AreEqual(2, instance2.GetValue());
    }

    public interface IMyInterface
    {
        int GetValue();
    }

    public class MyImpl : IMyInterface
    {
        private int _value;

        public MyImpl(int value)
        {
            _value = value;
        }

        public int GetValue()
        {
            return _value;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:12:06.600

我认为您面临的问题是，当为同一个接口注册多个实现时，最后一个是 GetInstance 将要解决的那个。为了解决这个问题，您可以命名您的配置。

尝试以下操作：

```
[TestFixture] 
public class StructureMapTests 
{ 
    [Test] 
    public void Test_same_interface_default_implemenation_and_with_parameter() 
    { 
        IMyInterface defaultImp = new MyImpl(0);

        ObjectFactory.Initialize(x =>
                                     {
                                         x.For<IMyInterface>().Add<MyInterface>().Named("withArgument").Ctor<int>().IsTheDefault();                                        
                                         x.For<IMyInterface>().Use(defaultImp).Named("default");
                                     });

        Assert.AreEqual(defaultImp, ObjectFactory.GetInstance<IMyInterface>());

        var instance1 = ObjectFactory.With("value").EqualTo(1).GetInstance<IMyInterface>("withArgument");
        Assert.AreEqual(true, instance1 is MyInterface); 
        Assert.AreEqual(1, instance1.GetValue());

        var instance2 = ObjectFactory.With("value").EqualTo(2).GetInstance<IMyInterface>("withArgument");
        Assert.AreEqual(true, instance2 is MyInterface);
        Assert.AreEqual(2, instance2.GetValue());
    }

    public interface IMyInterface
    {
        int GetValue();
    }

    private class MyInterface : IMyInterface
    {
        private int _value;

        public MyInterface(int value)
        {
            _value = value;
        }

        public int GetValue()
        {
            return _value;
        }
    }
} 
```

# sql - 如何在内部查询中传递外部查询的表

> ID：10202948
> 
> 赞同：0
> 
> 时间：2012-04-18T04:48:51.630
> 
> 标签：sql, oracle, select

这是我的全部查询

```
 SELECT   empmst.emp_id, empmst.emp_name,
         (SELECT RTRIM
                    (XMLAGG (XMLELEMENT (e, d || ',')).EXTRACT ('//text()').EXTRACT
                                                                   ('//text()'),
                     ','
                    )
            FROM (SELECT TO_DATE ('01-04-2012', 'dd-MM-yyyy') - 1
                         + ROWNUM AS d
                    FROM all_objects
                   WHERE TO_DATE ('01-04-2012', 'dd-MM-yyyy') - 1 + ROWNUM <=
                                          TO_DATE ('30-04-2012', 'dd-MM-yyyy')
                  MINUS
                  SELECT tsd.ts_date
                    FROM ts_dtl tsd
                   WHERE empmst.emp_id = tsd.emp_id
                     AND tsd.ts_date BETWEEN TO_DATE ('01-04-2012',
                                                      'dd-MM-yyyy'
                                                     )
                                         AND TO_DATE ('30-04-2012',
                                                      'dd-MM-yyyy'
                                                     ))) AS day11
    FROM emp_mst empmst
   WHERE TSD.EMP_ID=EMPMST.EMP_ID
ORDER BY empmst.emp_id 
```

我想将外部查询的 EMPMST.EMP_ID 传递给内部查询，但内部查询在 where 子句中没有得到 EMPMST.EMP_ID。请告诉我如何将外部查询从表传递到内部查询。内部查询如下

```
 (SELECT RTRIM
            (XMLAGG (XMLELEMENT (e, d || ',')).EXTRACT ('//text()').EXTRACT
                                                                   ('//text()'),
             ','
            )
   FROM (SELECT TO_DATE ('01-04-2012', 'dd-MM-yyyy') - 1 + ROWNUM AS d
           FROM all_objects
          WHERE TO_DATE ('01-04-2012', 'dd-MM-yyyy') - 1 + ROWNUM <=
                                          TO_DATE ('30-04-2012', 'dd-MM-yyyy')
         MINUS
         SELECT tsd.ts_date
           FROM emp_mst empmst, ts_dtl tsd
          WHERE empmst.emp_id = tsd.emp_id
            AND ts_date BETWEEN TO_DATE ('01-04-2012', 'dd-MM-yyyy')
                            AND TO_DATE ('30-04-2012', 'dd-MM-yyyy'))) 
```

我想要 emp_name 和 emp_id 和 TS_date，其中 4 月的 TS_DTL 中不存在的 TS_DATE 表示 TS_DTL 表中不存在的 4 月的其余日子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:47:50.297

请在下面找到将实现相同的

```
SELECT EMPMST.EMP_ID,
       EMPMST.EMP_NAME,
       rtrim(xmlagg(xmlelement(e, b.d1 || ',')).extract('//text()')
         .extract('//text()'),
         ',') as day11
  from (SELECT TO_DATE('01-04-2012', 'dd-MM-yyyy') - 1 + rownum AS d1
      FROM all_objects
     WHERE TO_DATE('01-04-2012', 'dd-MM-yyyy') - 1 + rownum <=
           TO_DATE('30-04-2012', 'dd-MM-yyyy')) b,
       EMP_MST EMPMST
 WHERE EMPMST.EMAIL_ID IS NOT NULL
   AND EMPMST.DEPT IN ('Technical')
   AND EMPMST.EMP_STATUS_LKP_ID = 201
   AND b.d1 NOT IN
       (SELECT TSD.TS_DATE as d2
      FROM TS_DTL TSD
     WHERE TSD.TS_DATE BETWEEN TO_DATE('01-04-2012', 'dd-MM-yyyy') AND
           TO_DATE('30-04-2012', 'dd-MM-yyyy')
       AND TSD.EMP_ID = EMPMST.EMP_ID)
 ORDER BY EMPMST.EMP_ID 
```

# c# - asp.net 中的序列化异常

> ID：10202949
> 
> 赞同：1
> 
> 时间：2012-04-18T04:48:58.770
> 
> 标签：c#, asp.net, .net

当我试图获得像“Session [sessionKey]”这样的会话时。该页面显示“找不到程序集 App_WebReferences.fhdzc5d6，版本=0.0.0.0，文化=中性，PublicKeyToken=null”。我调试页面，我发现当尝试查看会话密钥时，它会抛出异常“System.Runtime.Serialization.SerializationException”。我不知道这是为什么。请帮助我，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T04:56:13.843

如果您使用 StateServer 作为会话提供者或任何其他 outproc 会话提供者，则需要将所有类标记为“Serializable”，您在会话中设置其对象。

假设您有一个名为“UserIdentity”的类，并且您在会话中存储 UserIdentity 的对象，那么您需要将该类标记为“Serializable”：

```
[Serializable]
public class UserIdentity
{
//
} 
```

希望这可以帮助。

# algorithm - 空路口计数

> ID：10202950
> 
> 赞同：0
> 
> 时间：2012-04-18T04:48:59.167
> 
> 标签：algorithm, linear-algebra

我正在执行一个大小为 7 x 7 的棋盘游戏，w = 白子，b = 黑子。我想计算最终结果。请记住，这是一个虚构的围棋游戏，我们只计算被黑色或白色棋子包围的空单元格。

```
 0 1 2 3 4 5 6
0    b
1    b w  
2b b w   w
3  w       w
4    w     w
5      w w w
6 
```

我想计算由 w 和 b 包围的所有交叉点，这意味着我想计算白色石头和 0,0 0,1 1 的单元格 2,3 3,2 3,3 3,4 4,3 4,4， 0 1,1 用于黑色宝石。我想出的所有算法都太复杂了。

我将使用 GNU 汇编器来实现最终的解决方案。我刚开始学习汇编语言，所以我不希望它变得复杂。该算法可以使用循环和数组，但不能使用递归或函数调用。

我想看看线性代数中是否有一个简单的算法来解决这个问题，或者如果你能描述一个不使用递归和函数调用的简单算法，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:29:27.460

洪水填充类型算法可能适用：

1.  找到第一个未分配的单元格。
2.  如果单元格是空的，则从它填充填充，在边缘单元格或被占用的单元格处停止。
    1.  对于遇到的第一个被占用的单元格，记录占用者的颜色。
    2.  如果遇到的占用单元格是不同的颜色，请记录涉及的颜色不止一种。
    3.  填充后，如果只遇到一种颜色，则将整个区域标记为属于该颜色。该区域中的空单元格的数量被添加到计数中。
3.  从步骤 1 开始重复，直到分配了所有单元格。

洪水填充是一种相当标准的算法，例如：

1.  将起始单元推入堆栈。
2.  虽然堆栈不为空：
    1.  从中弹出一个单元格。
    2.  如果尚未处理单元格（即在这种情况下未分配）：
        1.  处理它（即在这种情况下查看它的颜色）。
        2.  将其所有邻居推入堆栈。

请注意，对于这些算法，如果电路板被一层不可见的“边缘”单元包围，它会变得更容易。就您的算法而言，边缘单元和占用的单元没有邻居。

见[http://en.wikipedia.org/wiki/Flood_fill](http://en.wikipedia.org/wiki/Flood_fill)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:34:12.423

我会尝试一种算法，它沿着由空白空间形成的形状的边缘移动，如下所示：

1.  从与空白空间相邻的一块开始。
2.  通过测试所有相邻的空间，沿着由空白空间形成的形状的外边缘移动。
3.  如果您遇到板的边缘，您可以继续沿着板的边缘行驶。
4.  如果您在形状的边界上同时遇到黑白棋子，则该形状不属于任何玩家。
5.  否则，刚刚勾勒出的形状属于拥有所有边框的玩家。

然后，您可以使用这些形状来确定每个玩家拥有的空间数量。

由于这个问题被标记为“作业”，因此需要考虑更多事情：这种情况下的结果是什么，你如何解释它？

```
 0 1 2 3 4 5 6
0
1  w w w w w w
2  w
3  w   b b b
4  w   b   b
5  w   b b b
6  w 
```

# sms - 对全球 SMS API 的公司或服务有什么建议吗？

> ID：10202951
> 
> 赞同：0
> 
> 时间：2012-04-18T04:49:03.220
> 
> 标签：sms, asp.net-web-api

您可能会使用 iOS 或 Android 智能手机上的 whatsapp 或 LINE。您需要激活您的帐户，但在第一时间输入您的电话号码。

该应用程序将尝试向您的手机发送短信进行身份验证。您对他们如何实现这一目标有什么建议吗？就我而言，可能会有一些 SMS API 服务公司提供帮助。

如果是这样，是否有人对那些提供集成全球 SMS Service API（通过 Web API 触发）的公司有一些建议或列表，如果我想接收用户的 SMS 消息，是否有任何建议的公司可以帮助接收 SMS？

或者有没有更好的方法来实现类似的目标（通过全球 Web API 发送和接收短信）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T21:42:07.627

我知道 Twilio 公司就是这样做的。看看这个[http://www.twilio.com/api/sms](http://www.twilio.com/api/sms)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-17T20:44:40.733

您所说的通常称为两因素授权，移动验证API，一次性密码API。我们（和我个人）将此作为[SMS API](https://developer.wavecell.com)的一部分来实现。

作为第一步，您必须[生成代码](https://developer.wavecell.com/v1/api-documentation/verify-code-generation)。在用户收到消息并将其输入您的 UI 后，您正在[验证它](https://developer.wavecell.com/v1/api-documentation/verify-code-validation)。

# android - 构建 Android 源代码时出错

> ID：10202957
> 
> 赞同：3
> 
> 时间：2012-04-18T04:49:29.883
> 
> 标签：android, android-ndk

在 Mac OS X 10.7.3 (Lion) 上构建 android 源代码时出现以下错误：

```
host SharedLib: libSR_Recognizer (out/host/darwin-x86/obj/lib/libSR_Recognizer.dylib)
Undefined symbols for architecture i386:
  "_pushAudioIntoRecognizer", referenced from:
      _SR_RecognizerAdvanceImpl in RecognizerImpl.o
      _detectBeginningOfSpeech in RecognizerImpl.o
  "_generatePatternFromFrame", referenced from:
      _SR_RecognizerAdvanceImpl in RecognizerImpl.o
  "_canPushAudioIntoRecognizer", referenced from:
      _SR_RecognizerAdvanceImpl in RecognizerImpl.o
      _detectBeginningOfSpeech in RecognizerImpl.o
  "_generatePatternFromFrameEOI", referenced from:
      _SR_RecognizerAdvanceImpl in RecognizerImpl.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [out/host/darwin-x86/obj/lib/libSR_Recognizer.dylib] Error 1 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T04:51:40.287

解决此错误的最佳方法是执行以下操作：

1.  安装 gcc-4.2 和 g++-4.2：`brew install https://raw.github.com/Homebrew/homebrew-dupes/master/apple-gcc42.rb`
2.  设置`CC`和`CXX`环境变量：`export CC=/usr/local/bin/gcc-4.2 && export CXX=/usr/local/bin/g++-4.2`
3.  然后构建：`make`

如果您需要为#1 安装自制软件，请访问：[自制软件主页](http://mxcl.github.com/homebrew/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T12:35:09.317

我以这种方式修复，我的编译器对此很满意。

```
vi ./external/srec/srec/Recognizer/src/RecognizerImpl.c 
```

全部替换`PINLINE`为`/*** PINLINE ***/` - 实际上删除所有这些

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T13:33:35.667

我终于找到了答案：）

使用以下选项运行 make

```
make CC=gcc CXX=g++ -j4 
```

一切都会顺利

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-02T11:32:57.107

唯一正确的解决方案是安装 XCode 3.*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T14:27:20.637

这是来自 Android 主 stram 的修复 - external/srec/portable/include/PortExport.h

```
 #if defined(__APPLE_CC__)
  #if __APPLE_CC__ >= 5621
  #undef PINLINE
  #define PINLINE
  #endif
  #endif 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T11:51:02.507

不幸的是，这是 AOSP 中的一个已知问题（请访问[http://source.android.com/source/known-issues.html](http://source.android.com/source/known-issues.html)）。安装 brew 包。

您应该使用创建自定义构建

```
lunch full-eng 
```

代替

```
lunch full-userdebug 
```

我在 Android-4.1.2_r1 上没有发现问题

# jquery - 仅在 if 条件下使 click 函数可用

> ID：10202960
> 
> 赞同：0
> 
> 时间：2012-04-18T04:49:38.043
> 
> 标签：jquery, function, click

您好，我有一个使我成为点击功能的功能，到目前为止一切都很好

```
 $('.punta').click(function() { 
            var value = $(this).val();
            $.ajax({
                type: "POST",
                url: "/clickButton",
                data: "value=" + value,
                dataType: "html" 
            });
        }); 
```

现在我要做的是仅在某些控件成功时才提供一个实际示例

```
$(".punta").hover(
        function () {
            if(qualcosa){
//MAKE AVAILABLE THE CLICK OF FUNCTION BEFORE
}
        }, 
        function () {
blabla
        }
        ); 
```

这是我会做的一件事，我试图给函数命名（第一个）提示

```
function provaclick(){
  $('.punta').click(function() { 
bla bla 
```

然后将函数的名称放在 if 语句中，但我不知道为什么单击 ONCE，好像我单击了 3 或 4 次（我在 firebug 上看到过）所以我认为我应该以另一种方式声明函数，例如

美元。功能na东西，但我无法修复

有人可以帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T04:59:08.000

您可以更改元素 css 类来实现...

# ios - 如何在三个不同的对象上链接相同属性的一系列动画？

> ID：10202962
> 
> 赞同：1
> 
> 时间：2012-04-18T04:49:39.790
> 
> 标签：ios, core-animation

我一直在尝试创建一系列动画，依次处理扑克牌中的三张牌。我只想为三张卡片的位置设置动画——比如第一个动画立即从第一张卡片的位置开始并持续 0.4 秒，第二个动画在 0.4 秒后以相同的持续时间开始，最后一个动画在 0.8 秒后开始。我不知道该怎么做！下面的代码不起作用。也许我需要使用 a `CAGroupAnimation`，但我不知道如何在同一个属性上制作一组顺序动画！

```
 CGFloat beginTime = 0.0;

        for (Card *c in cards) {
            CardLayer *cardLayer = [cardToLayerDictionary objectForKey:c];

            CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"position"];
            anim.fromValue = [NSValue valueWithCGPoint:stockLayer.position];
            anim.toValue = [NSValue valueWithCGPoint:wasteLayer.position];
            anim.duration = 0.4;
            anim.beginTime = beginTime;
            beginTime += 0.4;
            cardLayer.position = wasteLayer.position;
            [cardLayer addAnimation:anim forKey:@"position"];

            …
         } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T06:52:09.063

正如爱因斯坦所说，[时间是相对的](http://developer.apple.com/library/ios/DOCUMENTATION/Cocoa/Conceptual/Animation_Types_Timing/Articles/Timing.html#//apple_ref/doc/uid/TP40006670-SW4)。您所有的图层`beginTime`都[相对于它们的超级图层的时间空间](http://developer.apple.com/library/ios/DOCUMENTATION/GraphicsImaging/Reference/CAMediaTiming_protocol/Introduction/Introduction.html#//apple_ref/occ/intfp/CAMediaTiming/beginTime)--- 因为它不是动画，所以它们最终都是一样的。

看起来有两种可能的解决方案：

1.  获取一个绝对时基并设置每个层的`beginTime`相对于它的动画：

    ```
    int i = 0; float delay = 0.4;
    for (Card *c in cards) {
        // ...
        float baseTime = [cardLayer convertTime:CACurrentMediaTime() fromLayer:nil];
        anim.beginTime = baseTime + (delay * i++);
        // ...
    } 
    ```

2.  将每张卡片的动画包装成一个组。出于某种原因，我不太明白，这将这些动画放在一个共同的时间尺度上，即使这些组彼此分开。[它对某些人](https://stackoverflow.com/a/563486/957768)有用，但我有点不愿意相信它——看起来像是远处的恐怖动作。

无论哪种方式，您可能还希望图层保持在动画结束时的位置。您可以像这样使动画“粘”起来：

```
anim.fillMode = kCAFillModeForwards;
anim.removedOnCompletion = NO; 
```

但这可能会在以后给你带来麻烦——图层的模型位置仍然是它开始的位置，如果你在动画之后调整它（比如拖动一张卡片），你可能会得到奇怪的结果。因此，将您的发牌动画包装在 中可能是合适的，您可以`CATransaction`在其中设置一个完成块来设置图层的最终位置。

* * *

说到`CATransaction`带有完成块的 s ，您可以使用它们来使隐式动画按顺序发生（如果由于其他原因您没有使用显式动画）：

```
[CATransaction begin];
[CATransaction setCompletionBlock:^{
    [CATransaction begin];
    [CATransaction setCompletionBlock:^{
        card3Layer.position = wasteLayer.position;
    }];
    card2Layer.position = wasteLayer.position;
    [CATransaction end];
}];
card1Layer.position = wasteLayer.position;
[CATransaction end]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:38:22.393

以下递归方法是我可以做的最好的链接动画。我使用 a`CATransaction`为`position`属性设置动画并设置一个块来递归调用下一张卡片。

```
-(void)animateDeal:(NSMutableArray*)cardLayers {
    if ([cardLayers count] > 0) {
        CardLayer *cardLayer = [cardLayers objectAtIndex:0];
        [cardLayers removeObjectAtIndex:0];

         // ...set new cardLayer.zPosition with animations disabled...

        [CATransaction begin];
        [CATransaction setCompletionBlock:^{[self animateDeal:cardLayers];}];
        [CATransaction setAnimationDuration:0.25];
        [cardLayer setFaceUp:YES];
        cardLayer.position = wasteLayer.position;
        [CATransaction commit];
    }
} 
```

当然，这并不能解决重叠时间间隔的链接问题。

# java - 如何唯一标识两个结果集是否相等？

> ID：10202963
> 
> 赞同：1
> 
> 时间：2012-04-18T04:49:40.103
> 
> 标签：java, sql

是否有特定的方法来识别两个结果集是否相等？

问题是我不能同时访问两个结果集。所以我最好为resultset1创建一个hashvalue并存储它并获取后来的resultset2并创建hashvalue2并检查它们是否相等。

我试图序列化结果集对象并获取该对象的哈希值。但这不起作用，因为无法序列化 ResultSet 对象。（我尝试使用java）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:07:43.000

您需要将一个或两个哈希值存储在变量或表中：例如，您可以找到第一个值并将其存储在全局变量中，然后将该值拉到代码末尾以找到第二个值，然后比较两者。如果将它们存储在带有日期时间戳的表中，则可以跟踪随着时间的推移所做的更改。

# android-ndk - 构建 LAPACK 期间未解决的 sincos

> ID：10202966
> 
> 赞同：3
> 
> 时间：2012-04-18T04:50:20.210
> 
> 标签：android-ndk, fortran, lapack, blas

按照[此处](http://specificimpulses.blogspot.com/2011/10/android-fortran-step-by-step-part-2.html)的说明，我构建了一个启用 Fortran 的 NDK 工具链（OSX，NDK-7b），目标是构建 LAPACK/BLAS。

使用带有 3.4.0 网络库源的 android-cmake 似乎我几乎成功了。但是，在链接其中一个测试时，BLAS 构建失败（错误指出 unresolved `sincos`and `sincosf`）。稍作搜索发现这些功能在旧版 Android 版本中不可用。我想知道解决这些功能的最佳方法是什么？

以下是链接错误的示例：

> cd /Users/marc/software/lapack-3.4.0/Android/BLAS/TESTING && /opt/local/bin/cmake -E cmake_link_script CMakeFiles/xblat2c.dir/link.txt --verbose=1 /opt/local/分享/java/android-ndk-macosx/toolchains/arm-linux-androideabi-4.7.0/prebuilt/darwin-x86/bin/arm-linux-androideabi-gfortran -Wl,--gc-sections-Wl,-z ,nocopyreloc -Wl,--fix-cortex-a8 -Wl,--no-undefined -lstdc++ -lsupc++ CMakeFiles/xblat2c.dir/cblat2.fo -o ../../bin/xblat2c -rdynamic -L/Users /marc/software/lapack-3.4.0/Android/systemlibs/armeabi-v7a -L/opt/local/share/java/android-ndk-macosx/toolchains/arm-linux-androideabi-4.7.0/prebuilt/darwin -x86/user/libs/armeabi-v7a ../../lib/libblas.a -lm -Wl,-rpath,/Users/marc/software/lapack-3.4.0/Android/systemlibs/armeabi-v7a： /opt/local/share/java/android-ndk-macosx/toolchains/arm-linux-androideabi-4.7。0/prebuilt/darwin-x86/user/libs/armeabi-v7a /opt/local/share/java/android-ndk-macosx/toolchains/arm-linux-androideabi-
> 
> 4.7.0/prebuilt/darwin-x86/lib/gcc/arm-linux-androideabi/4.7.0/../../../../arm-linux-androideabi/lib/libgfortran.a(c99_functions. o): 在函数`cexpf': /opt/local/share/java/android-ndk-macosx/src/build/../gcc/gcc-4.7.0/libgfortran/intrinsics/c99_functions.c:910: undefined reference to`sincosf'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T12:33:56.017

GCC 需要在编译时知道是否`sincos`可用。它是根据目标来做的。如果是目标三元组`arm-linux-androideabi`，它会查看`gcc/config/linux.h`并在那里找到：

```
/* Whether we have sincos that follows the GNU extension.  */
#undef TARGET_HAS_SINCOS
#define TARGET_HAS_SINCOS (OPTION_GLIBC || OPTION_BIONIC) 
```

包含 Bionic 的原因是 Android 2.3 增加了对`sincosf`/ `sincos`/ `sincosl`[1] 的支持。因此，您可以更新 Bionic 或修补 GCC 以假设没有`sincos`可用；参看。也 [2]。

[1] [http://source-android.frandroid.com/bionic/libc/docs/CHANGES.TXT](http://source-android.frandroid.com/bionic/libc/docs/CHANGES.TXT)

[2] [https://bugs.launchpad.net/linaro-android/+bug/908125](https://bugs.launchpad.net/linaro-android/+bug/908125)

# sql - Oracle SQL 可以在找到字符之前修剪字符吗？

> ID：10202967
> 
> 赞同：3
> 
> 时间：2012-04-18T04:50:23.067
> 
> 标签：sql, oracle, select, trim

不确定是否可以在 select 语句中使用 trim：

基本上想在找到字符之前修剪字符串中的任何字符：

说有值（名称）Oliver、Dave 和我想在找到“v”之前修剪所有字符，以便之后这些值将是“ver”和“ve”

再一次，对于 trim 语句来说，这听起来太复杂了，除非有一种简单的方法可以将它与 LIKE 组合来搜索这样的东西。

可能在这里超越了自己，但如果有人可以帮助启发它，那将是一件有用的事情:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T04:59:19.223

也许像

```
SELECT REGEXP_SUBSTR('David', 'v.*') from dual
 WHERE REGEXP_LIKE('David', 'v.*') 
```

关于 REGEXP_SUBSTR 的说明：http: [//docs.oracle.com/cd/B19306_01/server.102/b14200/functions131.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions131.htm)

REGEXP_LIKE：[http ://docs.oracle.com/cd/B14117_01/server.101/b10759/conditions018.htm](http://docs.oracle.com/cd/B14117_01/server.101/b10759/conditions018.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T06:18:57.610

您可以使用 REGEXP 或使用 SUBSTR/INSTR：

```
SELECT CASE WHEN INSTR(mycolumn,'v') > 0
            THEN SUBSTR(mycolumn,INSTR(mycolumn,'v'))
            ELSE mycolumn
       END
FROM .... 
```

# c++ - 在将 ASCII 字符串传递给 Windows API 函数之前将其转换为 UTF-16

> ID：10202969
> 
> 赞同：2
> 
> 时间：2012-04-18T04:50:39.710
> 
> 标签：c++, windows, winapi, unicode, encoding

在我目前的项目中，我一直在使用宽字符（utf16）。但是由于我唯一的用户输入将是一个 url，无论如何它必须以 ascii 结尾，以及另一个字符串，我正在考虑将整个程序切换为 ascii。

我的问题是，在将字符串传递给 Windows API 函数之前将它们转换为 utf16 有什么好处吗？

在网上做了一些研究之后，如果你不在 Windows 上使用 UTF-16，似乎很多人推荐这个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T05:25:06.700

在 Windows API 中，如果您调用类似的函数

```
int SomeFunctionA(const char*); 
```

然后它会自动将字符串转换为 UTF-16 并调用函数的*真实*Unicode 版本：

```
int SomeFunctionW(const wchar_t*); 
```

问题是，它将字符串**从 ANSI code page**转换为 UTF-16 。如果您实际上有在 ANSI 代码页中编码的字符串，那就可以了。如果您有以 UTF-8 编码的字符串（例如，[近 70% 的 Web 页面](http://w3techs.com/technologies/overview/character_encoding/all)）现在越来越普遍，并且不支持作为 ANSI 代码页，则它不起作用。

此外，如果您使用`A`API，您将遇到限制，例如无法（轻松）打开名称中包含非 ANSI 字符（可以是任意 UTF-16 字符串）的文件。并且无法访问某些 Windows 的[新功能](http://blogs.msdn.com/b/oldnewthing/archive/2008/11/06/9045610.aspx)。

这就是为什么我总是调用`W`函数。即使这意味着烦人的显式转换（来自我们软件的非 Windows 特定部分中使用的 UTF-8 字符串）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T05:06:56.753

要点是，在 Windows 上，UTF-16 是本机编码，所有以 API 函数结尾的函数`A`只是它们`W`的包装器。这些`A`功能只是为了与为 Windows 9x/ME 编写的程序兼容而随身携带，事实上，任何新程序都不应该使用它们（在我看来）。

除非您正在对数十亿个大字符串进行大量处理，否则我怀疑考虑将它们存储在另一种（可能更节省空间）编码中是否有任何好处。此外，如果您考虑 IDN，即使 URI 也可以包含 Unicode。因此，不要太确定您的用户将传递给程序的数据。

# ajax - 追加到新创建的 div

> ID：10202973
> 
> 赞同：1
> 
> 时间：2012-04-18T04:51:08.807
> 
> 标签：ajax, jquery

我有一个问题要问那些 jquery/ajax/javascript 的老手，我正在为某个游戏创建一个技能计算器……在这之前一切都很好：

这是ajax输出：

```
{"skills":{"skill_id_1":"skill_name_1","skill_id_2":"skill_name_2"}} 
```

这是我的ajax：

```
function setOutput(){
    if(httpObject.readyState == 4){
    var results = eval('('+httpObject.responseText+')');
    if (results['skills']){
    $('#skilldiv').empty(); // empty div
    $.each(results['skills'], function(key, value)
    {
        $("<div></div>").appendTo("#skilldiv").attr({class: "skilldesc"});
        $("<div>&nbsp;</div>").appendTo(".skilldesc").attr({class: "skillinfo"});
        $("<div>&nbsp;</div>").appendTo(".skilldesc").attr({class: "skilltxt"});
    });
    }
    }
} 
```

这是我的 div：

```
<div id="wrapper">
    <ul>
        <li id="skilldiv"></li>
    </ul>
</div 
```

所以我的问题是..我怎样才能将技能信息和技能txt附加到刚刚附加到skilldiv的skilldesc ......

我试过这个：

```
$.each(results['skills'], function(key, value)
{
    $("<div></div>").appendTo("#skilldiv").attr({class: "skilldesc"});
    $("<div>&nbsp;</div>").appendTo(".skilldesc").attr({class: "skillinfo"});
    $("<div>&nbsp;</div>").appendTo(".skilldesc").attr({class: "skilltxt"});
}); 
```

但所有结果都进入第一个技能描述，

我试图得到这些：

```
<div id="wrapper">
    <ul>
        <li id="skilldiv">
            <div class="skilldesc">
                <div class="skillinfo">Some Info of skill 1 here</div>
                <div class="skilltxt">Name of skill 1 here</div>
            </div>
            <div class="skilldesc">
                <div class="skillinfo">Some Info of skill 2 here</div>
                <div class="skilltxt">Name of skill 2 here</div>
            </div>
        </li>
    </ul>
</div> 
```

但我得到了这个；

```
<div id="wrapper">
    <ul>
        <li id="skilldiv">
            <div class="skilldesc">
                <div class="skillinfo">Some Info of skill 1 here</div>
                <div class="skilltxt">Name of skill 1 here</div>
                <div class="skillinfo">Some Info of skill 2 here</div>
                <div class="skilltxt">Name of skill 2 here</div>
            </div>
            <div class="skilldesc"></div>
        </li>
    </ul>
</div> 
```

任何帮助将不胜感激。. . 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:03:57.590

因为`.skilldesc`也选择了第一个div。

你可以试试这个

```
$.each(results['skills'], function(key, value)
{
    $skilldesc = $("<div></div>").attr({class: "skilldesc"});
    $("<div>&nbsp;</div>").appendTo($skilldesc).attr({class: "skillinfo"});
    $("<div>&nbsp;</div>").appendTo($skilldesc).attr({class: "skilltxt"});
    $skilldiv.appendTo("#skilldiv");

}); 
```

此外，您应该对内存中的对象进行操作（而不是在 dom 中）。

# c++ - 将元素从一个数组复制到另一个数组

> ID：10202978
> 
> 赞同：0
> 
> 时间：2012-04-18T04:51:34.610
> 
> 标签：c++, arrays, function, element

我在运行时遇到崩溃错误，不知道该函数到底该怎么做或如何获取它的数据。

### 功能详情

编写一个接受`int`数组并`size`作为参数的函数，然后创建一个比给定元素大一个元素的新数组。将第一个元素设置为`0`，然后将参数数组中的内容复制到新数组中。

### 主要细节

`int n`在从输入读取的程序中使用，然后`int n`从文件数据名称中读取`data` 并将其传递给元素移位器，然后将其打印到输出（每行一个）。

```
#include <cstdlib>
#include <iostream>
#include <fstream>
using namespace std;

int element_shift(int elmts[], int size) {
  int new_size = size + 1;
  int shifter[new_size];
  int *elmt_sft;
  shifter[0] = 0;
  for (int i = 1; i >= new_size; i++) {
    shifter[i + 1] = elmts[i];
  }
  return *elmt_sft;
}

int main() {
  fstream infile;
  infile.open("D:\\data.txt");
  int n, x;
  infile >> x;
  cout << "size of array: ";
  cin >> n;
  const int ARRAY_SIZE = n + x;
  int elements[ARRAY_SIZE];
  element_shift(elements, ARRAY_SIZE);

  system("PAUSE");
  return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:10:55.260

首先，`ARRAY_SIZE`在主函数中声明的不是常量变量，而是在运行时根据用户输入定义的。这意味着`elements`应该动态创建数组。另一方面，您读取了一些`x`变量，该变量仅用于定义数组的大小，根本没有初始化数组。我猜问题陈述是从输入中读取数组的大小，然后从文件中读取数组的数据。

element_shift函数也有很多错误。

您的代码应类似于以下内容：

```
#include <cstdlib>
#include <iostream>
#include <fstream>
using namespace std;

void element_shift(int* elmts, int size)
{
    int new_size = size + 1;
    int* shifter = new int[new_size];
    shifter[0] = 0;
    for(int i = 0; i < size; ++i)
    {
        shifter[i + 1] = elmts[i];
    }
    delete [] elmts;
    elmts = shifter;
}

int main()
{
    fstream infile;
    infile.open("D:\\data.txt");

    int n;
    cout << "size of array: ";
    cin >> n;

    int* elements = new int[n];

    for (int i = 0; i < n; ++i) {
        infile >> elements[i];
    }

    element_shift(elements, n);

    for (int i = 0; i < n; ++i) {
        std::cout << elements[i] << std::endl;
    }

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:19:14.463

首先，您花费大量时间创建移位数组，但不将其返回。

```
int element_shift(int elmts[], int size) {
  int new_size = size + 1;
  int shifter[new_size];
  int *elmt_sft;
  shifter[0] = 0;
  for (int i = 1; i >= new_size; i++) {
    shifter[i + 1] = elmts[i];
  }
  return *elmt_sft;
} 
```

`elmt_sft`永远不会分配指针。您正试图通过使用访问不存在的内存`*elmt_sft`。这可能会导致您的错误。此外，此函数无法返回新数组`shifter`，因为该变量是**本地声明**的，并且一旦函数退出就会消失。如果你想在函数中创建新的东西并且在函数退出后仍然在内存中，我建议**动态创建数组并返回一个指向它的指针**。

这是未经测试的，但应该让您朝着正确的方向前进。它将返回一个单独的动态分配的数组，该数组不会覆盖您的另一个。

```
int* element_shift(int elmts[], int size) {
  int *result_array = new int[size + 1]; //dynamically create new array MAKE SURE TO DELETE
  result_array[0] = 0; //set 0 index to 0
  for (int i = 1; i < size + 1; i++)//start at 1 of the result and put value in
  {
    result_array[i] = elmts[i - 1];
  }
  return result_array; //returning pointer
} 
```

# linux - Busybox 上的 iptables

> ID：10202979
> 
> 赞同：1
> 
> 时间：2012-04-18T04:51:41.400
> 
> 标签：linux, iptables, busybox

我在嵌入式 linux 板上安装了busybox 作为“入门”包，我还需要使用 iptables 来配置一些防火墙规则。

有没有办法从busybox shell 访问iptables？

否则，我如何退出busybox shell 以访问iptables 命令？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:34:02.880

（1）首先需要了解如何在 Busybox 环境下修改内核、安装模块和应用程序。

（2）然后你可以配置内核支持Iptables（大部分在network/netfilter的菜单中），你可以将这些内核模块构建为ko模块或内核映像的一部分。

（3）到首页netfilter获取应用源代码。构建和安装。

（4）modprobe ko（例如）

```
modprobe iptable_filter
modprobe ip_tables 
```

（5）试试你的IPTABLES....如果遇到问题，你可以去第2步做一些改变。

# java - 是否可以从输入流中读取单个字符？

> ID：10202983
> 
> 赞同：2
> 
> 时间：2012-04-18T04:52:21.833
> 
> 标签：java, character-encoding

我从 InputStreamReader 开始，但这缓冲了它的输入，从输入流中读取的内容超过了所需的内容（如其 Java 文档中所述）。深入研究源代码（java 版本“1.7.0_147-icedtea”），我找到了 sun.nio.cs.StreamDecoder 类，其中包含以下注释：

```
// In order to handle surrogates properly we must never try to produce
// fewer than two characters at a time.  If we're only asked to return one
// character then the other is saved here to be returned later. 
```

所以我想问题变成了“这是真的吗，如果是，为什么？” 根据我（非常基本！）对 JLS 所需的 6 个字符集的理解，始终可以确定读取单个字符所需的确切字节数，因此无需预读。

背景是我有一个二进制文件，其中包含一堆具有不同编码（数字、字符串、单字节标记等）的数据。基本格式是一组重复的字节标记（指示数据类型），如果该类型需要，则后跟可选数据。包含字符数据的两种类型是以空字符结尾的字符串和前一个 2 字节长度的字符串。因此，对于以空结尾的字符串，我认为这样的事情可以解决问题：

```
String readStringWithNull(InputStream in) throws IOException {
  StringWriter sw = new StringWriter();
  InputStreamReader isr = new InputStreamReader(in, "UTF-16LE");
  for (int i; (i = isr.read()) > 0; ) {
    sw.write(i);
  }
  return sw.toString();
} 
```

但是 InputStreamReader 从缓冲区中提前读取，因此对基本 InputStream 的后续读取操作丢失了数据。对于我的特殊情况，我知道所有字符都是 UTF-16LE BMP（有点像 UCS-2LE），所以我只是围绕它进行编码，但我仍然对上述一般情况感兴趣。

另外，我看到了类似的[InputStreamReader 缓冲问题](https://stackoverflow.com/questions/2631507/inputstreamreader-buffering-issue)，但似乎没有回答这个特定问题。

干杯，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T05:24:57.897

> 所以我想问题变成了“这是真的吗，如果是，为什么？”

是的，评论是正确的，尽管其措辞可能有点晦涩难懂。

单个 Unicode 代码点的 UTF-8 编码由 1 到 4 个字节组成；请参阅 Wikipedia [UTF-8 示例。](http://en.wikipedia.org/wiki/UTF-8#Examples). 但在某些情况下，Unicode 代码点不能表示为一个 Java `char`。因此，解码器*可能*必须将多字节 UTF-8 序列解码为两个 Java`char`值……并保留其中一个值。

> 根据我（非常基本！）对 JLS 所需的 6 个字符集的理解，始终可以确定读取单个字符所需的确切字节数，因此无需预读。

对于可变长度编码，它比这更复杂一些。解码器提前读取足够的字节以形成一个 Unicode 代码点。对于 UTF-8，这将在 1 到 4 个字节之间，并且通过检查字节它知道何时停止。然后它将字节解码为 1 或 2 个 UTF-16 代码单元（即 Java`char`值），传递第一个，并保存第二个。

因此，您可能会在字节方面提前阅读，而不是在代码点方面。这很好，因为用户的键盘（例如）正在生成代码点。

* * *

> 此外，应该可以创建一个无缓冲读取器，它的性能与标准读取器完全相同，但一次只能从底层流中提取一个代码点，因此可以在我上面的示例中使用。

是的，应该可以做到这一点。然而，这样的阅读器需要进行多达 4 次单独的系统调用才能读取单个代码点，这是非常低效的。

> 事实上，这似乎不是一个首选的实现，因为如果需要，我总是可以自己缓冲流。

不，它不是首选实现。是的，您可以（理论上）在编码器下方自己缓冲流。然而，大多数程序并不是为了像这样构建堆栈而编写的：

```
Buffered Reader > InputStreamReader > BufferedInputStream > raw InputStream 
```

相反，他们只是这样做：

```
Buffered Reader > InputStreamReader > raw InputStream 
```

这将使您的方法执行得非常缓慢。（并且您尝试向普通的 Joe 程序员解释为什么他应该在堆栈中放置一个额外的显式缓冲层。）

> OpenJDK7 的标准 InputStreamReader 似乎可以立即从基本流中读取和缓冲高达 8k 的数据。

如果他们不做这样的事情，表现会很糟糕......见上文。此外，这是**记录在案的行为**- javadoc 说：

> *“每次调用 InputStreamReader 的 read() 方法之一都可能导致从底层字节输入流中读取一个或多个字节。为了实现字节到字符的有效转换，可以从底层流中提前读取比是满足当前读取操作所必需的。”*

底线是您的用例（您绝对不希望在`Reader`堆栈上进行低级预读。）非常不寻常，并且不受 Java SE 标准类库的支持。如果您真的需要这个，请随意实现您自己的版本，`InputStreamReader`而不是提前阅读。但我觉得你真的需要这个*有点奇怪*。

# java - 非多线程应用程序中的向量使用

> ID：10202986
> 
> 赞同：0
> 
> 时间：2012-04-18T04:52:55.407
> 
> 标签：java, collections

Vector vs Arraylist（在非多线程环境中）——在哪些要求中我们将使用 Vector（而不是 ArrayList）
我知道的一个：如果集合的大小必须随着向量大小增加 100% 和 ArrayList 而动态且非常频繁地增加50%

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:00:03.257

我认为你不应该使用矢量，因为你必须`syncronized(also non-threaded environment) ,So Use ArrayList`

Vector 会同步每个操作，而不是整个操作，并且......并且它也已弃用...... [为什么 Java Vector 类被认为已过时或已弃用？](https://stackoverflow.com/questions/1386275/why-java-vector-class-is-considered-obsolete-or-deprecated)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:00:20.637

在单线程环境中永远不会 user `Vector`。它的方法是“同步的”，这使得它很慢，非常慢`ArrayList`。

因此，如果`ensureCapacity`行为不同，并且`Vector`将大小增加 2，则无法将每个操作的成本与`ArrayList`更快的操作成本进行比较。

# c# - 在 C# 中如何收集程序崩溃的堆栈跟踪

> ID：10202987
> 
> 赞同：22
> 
> 时间：2012-04-18T04:52:56.190
> 
> 标签：c#, .net, winforms, error-handling

我是 C# 新手。我正在编写一个基于小型桌面表单的应用程序，我需要在应用程序中具有此功能。

如果应用程序在任何时候崩溃，应用程序应该有最后一次机会收集堆栈跟踪并将其发送回给我......

请给我指示。

我是否需要尝试覆盖我的应用程序的主要入口点？或者在 C# 应用程序中处理此类事情的最佳方法是什么。

谢谢你，

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-18T04:57:05.643

要捕获所有未处理的异常，请将其添加到 program.cs：

```
 [STAThread]
    static void Main()
    {
    AppDomain currentDomain = default(AppDomain);
    currentDomain = AppDomain.CurrentDomain;
    // Handler for unhandled exceptions.
    currentDomain.UnhandledException += GlobalUnhandledExceptionHandler;
    // Handler for exceptions in threads behind forms.
    System.Windows.Forms.Application.ThreadException += GlobalThreadExceptionHandler;
    ...
    }

private static void GlobalUnhandledExceptionHandler(object sender, UnhandledExceptionEventArgs e)
{
   Exception ex = default(Exception);
   ex = (Exception)e.ExceptionObject;
   ILog log = LogManager.GetLogger(typeof(Program));
   log.Error(ex.Message + "\n" + ex.StackTrace);
}

private static void GlobalThreadExceptionHandler(object sender, System.Threading.ThreadExceptionEventArgs e)
{
   Exception ex = default(Exception);
   ex = e.Exception;
   ILog log = LogManager.GetLogger(typeof(Program)); //Log4NET
   log.Error(ex.Message + "\n" + ex.StackTrace);
} 
```

您可以通过**exception.StackTrace获得堆栈跟踪**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T05:03:04.973

如果我是你，我会考虑一个一体化的解决方案，比如免费和开源的 NBUg 框架，

[http://nbug.codeplex.com/](http://nbug.codeplex.com/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T05:31:06.940

查看具有[自动异常报告](http://www.ssware.com/cryptoobfuscator/exception-reporting.htm)功能的 Crypto Obfuscator。

自动异常报告使您可以非常轻松地捕获软件中发生的任何未处理的异常，并且您的用户只需单击一个按钮即可轻松地向您报告这些异常。

异常报告包括所有相关信息，包括完整堆栈跟踪信息以及所有方法参数和局部变量的值，以及系统信息、异​​常时间、内部版本号和可选的开发人员定义的自定义数据，如日志文件、屏幕截图， ETC。

免责声明：我为 Crypto Obfuscator 的开发商 LogicNP Software 工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T05:00:16.633

如果您将代码包装在 try-catch 中，并发生异常，您可以在异常处查看堆栈跟踪。是的，您将添加一个 try-catch 来包装您的主要入口点。

```
try
{
    MainEntryPoint();
}
catch (Exception exc)
{
   System.Diagnostics.Debug.Print(exc.Message);  // get at entire error message w/ stacktrace
   System.Diagnostics.Debug.Print(exc.StackTrace);  // or just the stacktrace
} 
```

# django - 如何理解 django url.py 中的 Url 模式

> ID：10202989
> 
> 赞同：-3
> 
> 时间：2012-04-18T04:53:06.683
> 
> 标签：django, django-urls, url-pattern

如何理解例如 URL 模式。`(?P<slug>[-\w]+)/$`在 django url.py 中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T05:16:46.690

这个网址：`(?P<slug>[-\w]+)/$`

表示您正在将一个变量传递给您的视图，称为`slug`可以是任何数字或字母，并且`-`

你的观点是这样的：

```
def my_view(request, slug):
   .... 
```

希望能帮助到你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:10:39.343

请注意，slug 字段也可能包含数字（不仅仅是字母和破折号），因此您希望将其更改为：

```
 SLUG = '(?P<slug>[\w\d-]+)' 
```

我希望这对你有帮助......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T05:07:29.237

首先[掌握正则表达式](http://regex.info/)，然后是[7.2.1 - 正则表达式语法](http://docs.python.org/library/re.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T05:45:32.877

我认为这不是一个有效的正则表达式模式。"[-\w]+" 将得到 "word and -"，类似 "a-b9-c-" 或 "---" (?P...) 是一个“命名组”。如果你不给出它的名字，python（我的是 2.7）会报错。

```
>>> m = re.match("(?P<e>[-\w]+)/$", "a-b-c-/")
>>> m.group('e')
'a-b-c-'
>>> m = re.match("(?P[-\w]+)/$", "a-b-c-/")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/re.py", line 137, in match
    return _compile(pattern, flags).match(string)
  File "/usr/lib/python2.7/re.py", line 244, in _compile
    raise error, v # invalid expression
sre_constants.error: unknown specifier: ?P[ 
```

# c++ - 如何读取图像并将其绘制成 C++ 中的加速图像？

> ID：10202992
> 
> 赞同：1
> 
> 时间：2012-04-18T04:53:19.010
> 
> 标签：c++, image-processing

我想从我的计算机中读取图像并将其存储在我的 c++ 程序中。我在 java 图像处理方面有一些经验，但完全不知道如何在 c++ 中做到这一点。我想实现下面的java代码在c++中所做的事情：

BufferedImage sourceImage = null;

```
 try {
        // The ClassLoader.getResource() ensures we get the sprite

        // from the appropriate place, this helps with deploying the game

        // with things like webstart. You could equally do a file look

        // up here.

        URL url = this.getClass().getClassLoader().getResource(ref);

        if (url == null) {
            fail("Can't find ref: "+ref);
        }

        // use ImageIO to read the image in

        sourceImage = ImageIO.read(url);
    } catch (IOException e) {
        fail("Failed to load: "+ref);
    }

    // create an accelerated image of the right size to store our sprite in

    GraphicsConfiguration gc = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration();
    Image image = gc.createCompatibleImage(sourceImage.getWidth(),sourceImage.getHeight(),Transparency.BITMASK);

    // draw our source image into the accelerated image

    image.getGraphics().drawImage(sourceImage,0,0,null);

    // create a sprite, add it the cache then return it

    Sprite sprite = new Sprite(image);
    sprites.put(ref,sprite);

    return sprite; 
```

任何人都可以给我一个提示？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:03:35.793

如果要将图像用作矩阵，可以使用[OpenCV库。](http://opencv.willowgarage.com/wiki/Welcome)这个库提供了一个简单的图像加载和存储接口，但它的主要应用是图像处理和计算机视觉。所以它可以是“对鸟的大炮”。

# google-analytics - 谷歌分析工具

> ID：10202996
> 
> 赞同：1
> 
> 时间：2012-04-18T04:53:32.800
> 
> 标签：google-analytics

我正在尝试使用 Google Analytics 工具跟踪我的应用程序使用情况。但我的 Google Analytics（分析）帐户没有显示访客/访客。我已经多次使用我的应用程序。我也设置了按钮单击事件。但它什么也没显示。我也有一个有效的密钥。

```
import com.google.android.apps.analytics.GoogleAnalyticsTracker;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class GoogleAnalysis extends Activity {

    GoogleAnalyticsTracker tracker;
    GoogleAnalyticsTracker mGATracker;

    @SuppressWarnings("deprecation")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        /* try{ mGATracker = GoogleAnalyticsTracker.getInstance();
         mGATracker.startNewSession(" UA-xxxxx-x", this);
         mGATracker.trackPageView( "/SettingsMangerActivity" ); } catch(
         Exception error ) { Log.e( "<YOUR_TAG>", "onCreate: " +
         error.toString() ); }
         */

        tracker = GoogleAnalyticsTracker.getInstance();
        tracker.startNewSession(" UA-30927539-1", this);
        setContentView(R.layout.googleanlytics);

        Button createEventButton = (Button) findViewById(R.id.NewEventButton);
        createEventButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                tracker.trackPageView("/SettingsMangerActivity");
                tracker.trackEvent("Clicks", "Button", "Share Files", 0);

            }
        });

        Button createPageButton = (Button) findViewById(R.id.NewPageButton);
        createPageButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                tracker.setCustomVar(1, "Navigation Type", "Button click", 2);
                tracker.trackPageView("/testApplicationHomeScreen");
            }
        });

        Button quitButton = (Button) findViewById(R.id.QuitButton);
        quitButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                finish();
            }
        }); 
```

提前致谢

```
 Button dispatchButton = (Button) findViewById(R.id.DispatchButton);
    dispatchButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // Manually start a dispatch, not needed if the tracker was
            // started with a dispatch
            // interval.
            tracker.dispatch();
        }
    });
}

@Override
protected void onDestroy() {
    super.onDestroy();
    // Stop the tracker when it is no longer needed.
    tracker.stopSession();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-18T00:33:37.440

在调试您的应用程序时，您是否看到它向 google-analytics.com 发送图像请求

如果不是，则问题出在代码或应用程序中。如果是并且它会转到正确的 UA-id，请检查实时报告。

如果它没有显示在那里，那么它是 GA 配置中的某个东西，例如阻止数据进入过滤器的过滤器。

如果您的报告视图上有过滤器，请创建另一个没有过滤器的视图。

现在让我们看看情况如何

# ios - 将 UIPageView 添加为屏幕的一部分

> ID：10202997
> 
> 赞同：3
> 
> 时间：2012-04-18T04:53:35.623
> 
> 标签：ios, ipad, ios5

对 iOS 开发来说相当新，并且好奇是否有可能，如果可能，最好是这样做。

我想让 UIPageViewController 成为屏幕的一部分。即，我想要一个菜单​​栏，可能还有一些额外的控件，然后将页面视图控制器放在该页面的一部分上（因此菜单栏不是翻页控件的一部分）。换句话说，一个 UIPageView 就像一个不占据整个屏幕的滚动视图。

可接受的设计？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-08-21T02:52:22.773

是的，这是可能的，而且实现起来非常容易。

**步骤**（在 XCode 6 中使用 Storyboards 实现）

1.  从一个空的视图控制器开始。

[![空视图控制器](../Images/2009ee3af4f295d5690afd34aad4de77.png)](https://i.stack.imgur.com/BOwYK.png)

2.  从右侧的对象库中添加一个容器视图。Container View 可能会自动嵌入到常规 View Controller 中，在这种情况下，您可以删除 View Controller，因为我们要嵌入 Page View Controller。

[![带有容器视图的视图控制器](../Images/686665d40728d9ab0a4c550771a3870f.png)](https://i.stack.imgur.com/Ho3dC.png)

3.  从右侧的对象库中选择一个 Page View Controller，并将其放置在 Storyboard 中您想要的任何位置。

[![视图控制器和页面视图控制器](../Images/5a551ac9f39ea42b7160f1e023b05474.png)](https://i.stack.imgur.com/LpuuE.png)

4.  Ctrl 单击并从 Container View 拖动到 Page View Controller，然后从出现的菜单中选择 embed。Page View Controller 应该自动调整自身大小，使其与原始 View Controller 中的 Container View 大小相同。

[![页面视图控制器嵌入步骤](../Images/05afe7b0ad2b7c59194ac4e092b06edd.png)](https://i.stack.imgur.com/1U73d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-26T06:47:04.710

苹果开发人员示例代码的一个很好的例子：[PageControl](https://developer.apple.com/library/ios/samplecode/PageControl/Introduction/Intro.html)。用`UIScrollView`和实现`UIPageControl`。

此外，您可能希望使用模板“基于页面的应用程序”创建一个新的 iOS 项目。模板代码是用`UIPageViewController`.

两种实现都使用 View Controller Containment。

顺便说一句：没有 UIPageView，`UIPageControl`只有`UIPageViewController`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T04:58:29.833

您可以尝试以下链接以获取 uipageviewcontroller 教程

[http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_UIPageViewController_Application](http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_UIPageViewController_Application)

你可以尝试使用uiview进行翻页而不是uiviewcontroller

您可以将 uiview 添加到 uiviewcontroller。

像 [Self.view addSubview:youruiview];

并删除 uiview 控制器，例如 [youruiview removefromsuperview]；

谢谢..！

# c# - 指定的演员表是无效的问题

> ID：10202999
> 
> 赞同：0
> 
> 时间：2012-04-18T04:53:53.683
> 
> 标签：c#, exception, webservice-client, .net

我的代码检查数据库中的更改，然后通过 Web 服务向客户端发送更新。

我让向客户端发送消息的部分工作正常，因为调用检查数据库中的更改。现在我已经添加了检查数据库更改的部分，我收到以下错误。

在调试我的代码时，错误指向代码最底部的异常，所以我不知道错误来自哪里，也无法修复它。

任何建议将不胜感激

```
 SendInvUpdate.InvServices.UpdateRatePackagesRequest ur = new SendInvUpdate.InvServices.UpdateRatePackagesRequest();
    SendInvUpdate.InvServices.UpdateRatePackagesOperationResponse or = new SendInvUpdate.InvServices.UpdateRatePackagesOperationResponse();

    protected void Page_Load(object sender, EventArgs e)
    {
        try
        {
            string connStr = ConfigurationManager.ConnectionStrings["bb"].ConnectionString;
            SqlConnection Con = new SqlConnection(connStr);
            Con.Open();
            SqlCommand cmd = new SqlCommand("invpush_PollForAvailableChanges", Con);
            cmd.CommandType = CommandType.StoredProcedure;
            SqlParameter NewSysChangeVersionParam = new SqlParameter("@NewSysChangeVersion", SqlDbType.Int);
            NewSysChangeVersionParam.Value = (object)NewSysChangeVersionParam ?? DBNull.Value;
            NewSysChangeVersionParam.Direction = ParameterDirection.InputOutput;
            NewSysChangeVersionParam.SqlDbType = SqlDbType.BigInt;
            SqlDataReader sdr = cmd.ExecuteReader();

            InventoryPushSubscriptionRecord rec = new InventoryPushSubscriptionRecord();

            while (sdr.Read())
            {

                rec.InventoryPushSubId = sdr.GetInt32(0);
                rec.CMName = sdr.GetString(1);
                rec.NotifUrl = sdr.GetString(2);
                rec.Options = sdr.GetString(3);
                rec.LastSysChangeVersion = sdr.IsDBNull(4)?(long?)null:sdr.GetInt32(4);

            }

            if(!sdr.NextResult()) throw new System.Exception("Expected Result set 1 for InventoryChangeRecord");
            InventoryChangeRecord inrec = new InventoryChangeRecord();
            while (sdr.Read())
            {
                inrec.InventoryPushSubId= sdr.GetInt32(0);
                inrec.SysChangeVersion=sdr.IsDBNull(1)?(long?)null:sdr.GetInt32(1);
                inrec.InvDate=sdr.GetDateTime(2);
                inrec.ResId=sdr.GetInt32(3);
                inrec.RoomType=sdr.GetString(4);
                inrec.InvCount=sdr.GetInt32(5);
                inrec.ResName=sdr.GetString(6);

            }

            sdr.Close();
            sdr.Dispose();

            if (NewSysChangeVersionParam != null)
            {
                int ResId;
                Int64 ResoId;
                ResortId = inrec.ResId;
                SqlDataAdapter sda = new SqlDataAdapter("Select BID,RId from BBTest.bbtest.tblResMapping where BId=@ResId",Con);
                SqlParameter resId = new SqlParameter("@ResId", ResId);
                sda.SelectCommand.Parameters.Add(resId);
                DataSet ds = new DataSet();
                sda.Fill(ds, "tblresmapping");
                if (ds.Tables[0].Rows.Count > 0)
                {
                    ResoId = Convert.ToInt32(ds.Tables[0].Rows[0]["ResonlineId"]);
                }

                if (ds.Tables[0].Rows.Count != 0)
                {
                    Int64 RatePackageId;
                    SqlDataAdapter sqlda = new SqlDataAdapter("Select BId,BBRoom,ResRatePackageID from tblResRatePackages where BID =@ResortId", Con);
                    SqlParameter resI = new SqlParameter("@RId", resId);
                    sqlda.SelectCommand.Parameters.Add(resI);
                    DataSet dt = new DataSet();
                    sqlda.Fill(dt, "tblResRatePackages");
                    if (dt.Tables[0].Rows.Count > 0)
                    {
                        RatePackageId = Convert.ToInt64(dt.Tables[0].Rows[0]["ResRatePackageID"]);

                        Int64 HID = ResId;
                        Int64 HRID = RatePackageId;

                        SendInvUpdate.InvServices.UpdateRatePackagesRequest request = new SendInvUpdate.InvServices.UpdateRatePackagesRequest();

                        request.HotelId = account.HotelId;

                        int avail = inrec.InvCount;
                        DateTime frodte = inrec.InvDate;

                        int NoofRatePackages = 3;
                        UpdateRatePackageRequest[] RatePackages = new UpdateRatePackageRequest[NoofRatePackages];
                        string res;
                        request.RatePackages = new UpdateRatePackageRequest[NoofRatePackages];
                        request.RatePackages = RatePackages;

                        for (int i = 0; i < NoofRatePackages; i++)
                        {
                            UpdateRatePackageRequest rp = new UpdateRatePackageRequest();

                            request.RatePackages[i] = rp;

                            rp.RatePackageId = HRID;

                            rp.Rates = new RateDetails[NoofRatePackages];

                            for (int j = 0; j < NoofRatePackages; j++)
                            {

                                RateDetails rd = new RateDetails();
                                rp.Rates[j] = rd;

                                rd.Availability = avail;

                                rd.AvailabilityApplicationType = SendInvUpdate.InvServices.AvailabilityApplicationType.SET;

                                rd.FromDate = frodte;

                          //      rd.ToDate = todte;

                            }

                        }

                        SendInvUpdate.InvServices.InventoryServiceClient isc = new SendInvUpdate.InvServices.InventoryServiceClient();
                        or = isc.UpdateRatePackages(request);

                        res = or.Results.ToString();

                    }

                }
            }                             

        }

        catch (Exception ex)
        {
            throw (ex);
        }
    }

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T04:59:46.430

你通过捕获异常并像你正在做的那样再次抛出它来隐藏你真正的异常堆栈跟踪；

```
try {
    ...
}
catch(Exception ex) // catch all exceptions
{
    throw ex;       // throw the same exception, removing the old stack trace
} 
```

要么您应该删除整个 try/catch，要么更改为；

```
try {
    ...
}
catch(Exception ex) // catch all exceptions
{
    throw;          // throw the last caught exception, keeping the stack trace
} 
```

您将突然能够看到原始异常的确切位置。我相信你会马上发现你的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-04T12:18:38.330

就我而言，收到此错误消息后，Oracle 竟然返回了一个无理数。

我的代码在 .NET 中引发了“指定的强制转换无效”异常，`adapter.Fill(ds);`没有使用我一直使用的代码正确解释返回的数字。添加的`adapter.ReturnProviderSpecificTypes = true;`行使 .NET 可以解释数字，四舍五入到小数点后第 N 位（由于某种原因，最后一位从 3 向上舍入到 4...）：2.25000000000000333333333333333333333334

```
 private static DataSet dataset_test(string sql)
    {
        DataSet ds = new DataSet();
        using (OracleConnection objConn = new OracleConnection(connectionstring))
        {
            OracleCommand objCmd = new OracleCommand();
            objCmd.Connection = objConn;
            objCmd.CommandText = sql;
            objCmd.CommandType = CommandType.Text;
            try
            {
                objConn.Open();
                OracleDataAdapter adapter = new OracleDataAdapter(objCmd);
                adapter.ReturnProviderSpecificTypes = true;
                adapter.Fill(ds);
            }
            catch (Exception)
            {
                throw;
            }
            objConn.Close();
            return ds;
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T06:01:16.310

要尝试的一件事：在 try-catch 块的开始处设置断点，在 connStr = 行上，并逐行遍历代码，继续方法调用。通过这种方式，您可以快速跟踪代码的哪一部分引发了错误，然后回到该点以查找具体问题。（您还可以在重新抛出之前阅读原始异常和内部异常消息。）

鉴于您的问题的标题，因此假设您遇到的错误是强制转换异常，我首先要检查的是您的数据库数据检索代码。例如，您正在使用 sdr.GetInt32(0) ，如果无法将第 0 列转换为整数，则会引发此类错误。

希望这可以帮助。如果您能够找到更多信息，请将其发布，我们会看看我们是否可以提供更具体的建议。