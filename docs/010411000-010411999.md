# StackOverflow 问答 10411000-10411999

# drupal - 什么模块可以为每个模块生成主题

> ID：10411001
> 
> 赞同：0
> 
> 时间：2012-05-02T09:26:50.890
> 
> 标签：drupal, module, themes

在某些情况下，在 drupal 主题页面中，我为每个模块获取了主题，什么模块或 mmitake 可以做到这一点？

![在此处输入图像描述](../Images/0e2e8edb50365cd3084efb4c2f8f3929.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:18:49.350

如果您正在运行多站点结构，则从站点/所有/主题、/主题和站点/x/主题中删除非主题文件夹，其中 x 是站点名称。

这是因为主题和模块都具有相同的 .info 文件结构。

# sendmail - 如何从使用远程 SMTP 中排除电子邮件地址？

> ID：10411002
> 
> 赞同：-1
> 
> 时间：2012-05-02T09:26:52.527
> 
> 标签：sendmail, exim4

我最近开始使用远程 smtp 发送电子邮件。

我在“exim.conf”中添加了这个配置行：

```
special:
driver = manualroute
domains = !+local_domains
transport = remote_smtp
route_list = * smtp.myisp.com 
```

我想为几个特定的​​电子邮件添加一个例外，以绕过此远程 smtp 设置并改用默认的本地服务器。

任何人都知道如何去做吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T00:52:43.587

您可以编辑您的路由器并使用以下配置。

```
special:
driver = manualroute
domains = !+local_domains
local_parts = f4fahmed
transport = remote_smtp
route_list = gmail.com gmail-smtp-in.l.google.com

special_route:
driver = manualroute
domains = !+local_domains
transport = remote_smtp
route_list = * smtp.myisp.com 
```

要测试它们，您可以使用以下命令。

**/usr/sbin/exim -C /etc/exim.conf -bt f4fahmed@gmail.com**

**注意：**确保您将重新启动您的 exim 以重新加载配置。

# .net - 如何在 FluentNhibernate 上映射多对多不使用主 ID

> ID：10411007
> 
> 赞同：0
> 
> 时间：2012-05-02T09:27:03.870
> 
> 标签：.net, orm, fluent-nhibernate

请帮帮我。

我有 3 个实体。

1.  家庭（GENERIC_ID，...）
2.  BPayReference(BPayReferenceID,GENERIC_ID) 其中 BPayReferenceID GeneratedBy.Assigned()
3.  发票 (ID, ..., BPayReferenceID) 其中 BPayReferenceID 外键为 BPayReference.BPayReferenceID

在这种情况下如何映射多对多？

**我在FamilyMap**中尝试

 **```
HasManyToMany(x => x.Invoices)
    .Table("bpay_reference")
    .ChildKeyColumn("GENERIC_ID")
    .ParentKeyColumn("BPayReferenceID"); 
```

但这不起作用，因为它不是实体`BPayReferenceID`中的主键`Invoice`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:46:20.070

```
HasManyToMany(x => x.Invoices)
    .Table("bpay_reference")
    .ParentKeyColumn("GENERIC_ID")
    .ChildKeyColumn("BPayReferenceID")
    .ChildPropertyRef("BPayReferenceID"); // must be mapped though 
```

注意：您可能切换了 KeyColumns

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:14:50.697

为了任何像我一样努力在 unFluent NHibernate 中做同样事情的人的利益，尝试这样的事情：

```
<bag name="Invoices" table="BPayReference" cascade="none" lazy="false">
  <key column="GENERIC_ID" />
  <many-to-many class="Invoice" column="BPayReferenceID" property-ref="BPayReferenceID" />
</bag> 
```

我错过的重要事情是属性参考。**

# android - 通过意图拍照后调用的活动被杀死/ onCreate

> ID：10411009
> 
> 赞同：35
> 
> 时间：2012-05-02T09:27:06.143
> 
> 标签：android, android-camera, android-activity, android-camera-intent

我正在尝试使用意图拍照。我的问题是，有时在拍照后，我调用 startActivityForResult 的活动似乎已被破坏，因此再次调用 onCreate。

这是我单击图像视图后拍照的代码，应该替换哪个图像：

```
if (!getPackageManager().hasSystemFeature(
                PackageManager.FEATURE_CAMERA)) {
            Util.makeLongToast(R.string.lang_no_camera);
        } else {
            Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(intent, TAKE_ITEM_PHOTO);
        } 
```

...

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    Log.v(TAG, "onactivityresult called");
    if (requestCode == TAKE_ITEM_PHOTO) {
        if (data != null) {

            imageUri = data.getData();

                try {
                    img_photo.setImageBitmap(Media.getBitmap(
                            getContentResolver(), imageUri));
            } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

        } else
            Log.w(TAG, "data is null");
    }
} 
```

所以我尝试的只是拍照并用它替换图像视图的图像。但在某些情况下， onCreate 是在 onActivityResult 被调用之后调用的，并且新图像丢失了。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-05-02T09:58:53.277

实际上，相机会导致您的活动方向发生变化，这就是您的活动被销毁和重新创建的原因。

将此添加到您的清单文件中，它将防止方向更改，并且您的活动不会被破坏和重新创建。

```
<activity
    android:name=".YourActivity"
    android:configChanges="orientation|keyboardHidden|screenSize"
    android:screenOrientation="portrait" >
</activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:35:53.860

修复您的活动/应用程序的方向，因为当您返回/完成（）活动并同时更改方向时，活动会自动刷新并重新启动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-28T09:01:09.787

似乎有些手机在导入图像时会破坏活动，例如 Galaxy S3。提到如果我的应用程序处于纵向模式，则会发生这种情况，因为图像处于横向模式。因此，清单文件中与 configChanges 相关的所有建议都不适用于这种情况。

我最终做的不是与活动的 onDestroy 作斗争（这导致在 onCreate() 之后不调用片段的 onActivityResult()），而是在活动本身中实现 ​​onActivityResult() 并且在那里我可以获得图片路径。然后，我将该路径传递给片段，一旦它被创建，以供进一步处理。当然，我必须告诉我的应用程序，一旦它被重新创建，它需要返回到调用 fragmnet 来处理该图像

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-23T09:58:27.630

禁用“不保留活动”开发人员设置。否则它将破坏您要离开的活动。

# ruby-on-rails-3 - 在操作方法中使用结构

> ID：10411014
> 
> 赞同：0
> 
> 时间：2012-05-02T09:27:21.813
> 
> 标签：ruby-on-rails-3, controller, xml-serialization

我想将对象创建为 struct 并将其作为 xml 发送：

```
 def index
   katie = Struct.new(:name, :gender, :age).new("Katie", "F", 18)
   render :xml => katie
  end 
```

但我收到错误：

> 18:Fixnum 的未定义方法 `bytesize'

有人可以给我任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-17T16:32:19.373

我知道这是在最初的问题之后很久，但这是另一个答案：

使用 ActiveModel 实现一个类并包含序列化支持。

```
class Person
  include ActiveModel::Serializers::Xml #also include json
  include ActiveModel::Model

  attr_accessor :name, :gender, :age

  def attributes
    {name: name, gender: gender, age: age}
  end
end

#and in your controller
def index  
  # should use a respond_to do |format| here
  render :xml => Person.new(:name => 'Katie', :gender => 'F', :age => 18)
end 
```

# c# - linq/lambda 表达式的性能调优

> ID：10411015
> 
> 赞同：-2
> 
> 时间：2012-05-02T09:27:32.470
> 
> 标签：c#, performance, lambda, performance-testing

我有如下代码行。

```
string result = listDetails
    .Where(filename => filename.Contains(fullname)).FirstOrDefault().Split('\\')
    .Where(name => name.Contains(nameGivenToSearch)).FirstOrDefault();

if (result.Contains("sd"))
    // Do something 
```

在运行用于检查性能的工具时，它会在上述语句中显示性能警告。

我想让这种性能更加可行。我听说嵌套的 lambda 表达式执行速度较慢。

请提出一些解决此问题的建议或任何有助于解决问题的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:44:36.313

Try caching the data searched (or all of it, before your app starts) into the [Dictionary<,>](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:11:51.663

如果我的假设是正确的，该列表包含文件的路径，我认为主要问题是您拆分路径以获取文件名。使用函数`Path.GetDirectoryName`而`Path.GetFileName`不是。搜索最多 1000 个字符串条目的列表不应占用大量处理器

```
 if (listDetails.Where(x => { if(Path.GetDirectoryName(x).Contains(fullname))
                                 {
                                    var file = Path.GetFileName(x);
                                    return file.Contains(namegiventosearch) && file.Contains("sd");
                                 }
                                 else 
                                 {
                                    return false;
                             }
    }).FirstOrDefault() != null)
    {
         // do Task
    }
enter code here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:46:25.360

我会将其重写为：

```
string result = listDetails.FirstOrDefault(filename => filename.Contains(fullname));
if (result != null)
    result = result.Split('\\').FirstOrDefault(name => name.Contains(namegiventosearch));
if (result != null && result.Contains("sd"))
{
     //do task
} 
```

我认为性能提升空间不大。

# mysql - Glassfish Jdbc-connectioPool 问题

> ID：10411016
> 
> 赞同：0
> 
> 时间：2012-05-02T09:27:34.790
> 
> 标签：mysql, glassfish

嗨，我在 glassfish 中经常遇到以下异常，任何人都可以帮助我解决这个问题。日志消息为空。

```
 The log message is null.
   java.sql.SQLException: Error in allocating a connection. Cause: java.lang.IllegalStateException: Wrong XAState: 0
at com.sun.gjc.spi.base.DataSource.getConnection(DataSource.java:115)
at com.sify.beaserv.bean.PollBoxBean.getNode(PollBoxBean.java:754)
at com.sify.beaserv.bean.PollBoxBean.buildAlarm(PollBoxBean.java:317)
at com.sify.beaserv.bean.PollBoxBean.processNode(PollBoxBean.java:652)
at com.sify.beaserv.bean.PollBoxBean.onMessage(PollBoxBean.java:60)
at sun.reflect.GeneratedMethodAccessor185.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.sun.enterprise.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1011)
at com.sun.enterprise.security.SecurityUtil.invoke(SecurityUtil.java:175)
at com.sun.ejb.containers.BaseContainer.invokeTargetBeanMethod(BaseContainer.java:2929)
at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:4020)
at com.sun.ejb.containers.MessageBeanContainer.deliverMessage(MessageBeanContainer.java:1111)
at com.sun.ejb.containers.MessageBeanListenerImpl.deliverMessage(MessageBeanListenerImpl.java:74)
at com.sun.enterprise.connectors.inflow.MessageEndpointInvocationHandler.invoke(MessageEndpointInvocationHandler.java:179)
at $Proxy76.onMessage(Unknown Source)
at com.sun.messaging.jms.ra.OnMessageRunner.run(OnMessageRunner.java:258)
at com.sun.enterprise.connectors.work.OneWork.doWork(OneWork.java:76)
at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.run(ThreadPoolImpl.java:555) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:31:05.443

异常消息`Wrong XAState: 0`表明您正在尝试使用 XA 驱动程序，这对于两阶段提交是正确的。真的吗？您知道您使用的是哪个 JDBC 驱动程序和哪个数据库供应商吗？您是在启动时立即收到此消息，还是在您成功运行一段时间后收到此消息？

# objective-c - 在“while 循环”中更新 UILabel

> ID：10411017
> 
> 赞同：0
> 
> 时间：2012-05-02T09:27:36.443
> 
> 标签：objective-c, ios, while-loop, uilabel

我正在尝试`UILabel`在“while 循环”中更新 a，但它不会更改`UILabel`文本。我知道它像往常一样在主线程的当前运行循环周期结束时显示`iOS`。但是如何解决这个问题（ ftp.AsyncFinished 函数由外部 chilkat ftp 模块提供）：

数据每秒更新一次。我搜索了这个论坛和 Apple 的文档，但我无法找出`UILabel`在主线程的“while 循环”中更新 a 的正确方法。我可以使用什么来代替 while 循环，它允许主线程更新`UILabel`.

```
while (ftp.AsyncFinished != YES) {
    // here is the code getting data from the cilkat FTP module stored in PercentOfFile and MinutesRemaining
    NSString *content =[[NSString alloc] initWithFormat:@"%.0f%% done%.0fmin left",PercentOfFile,MinutesRemaining ];
    [LabelProgress setText:content];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T13:04:36.340

为了让 UI 完全更新，主线程的运行循环必须完成。这意味着您的方法（如果在主线程上调用）必须在任何 UI 更新发生之前返回。然后合并所有更新并重绘 UI。

请参阅[强制 UIView 重绘的最可靠方法是什么？](https://stackoverflow.com/questions/1503761/what-is-the-most-robust-way-to-force-a-uiview-to-redraw/1503828#1503828)了解更多背景信息。

您的`while`循环被错误地设计为异步更新。您不应该在`while`循环中间获取异步数据。您应该注册某种回调（通常将自己设置为`delegate`），然后等待系统呼叫您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:53:48.367

您需要在另一个线程中调用您的上传进度并注册回调。创建一个继承自 CkoFTP2Progress 的自定义类，该类具有以下方法：

```
- (void)PercentDone: (NSNumber *)pctDone abort:(BOOL *)abort; 
```

假设您有一个名为“ftp”的 CkoFTp2 对象和名为“UploadProgress”的自定义类，请注册回调：

```
[self.ftp setEventCallbackObject:self.uploadProgress]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T09:38:26.433

您可以将 while 循环移动到后台线程并使用 performSelectorOnMainThread 从那里调用 setText。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-27T10:11:21.547

```
// update your UILabel here
// ...

// Delay execution of long-running task so that update of UILabel can be performed
dispatch_after( dispatch_time( DISPATCH_TIME_NOW, 0.1 * NSEC_PER_SEC ), dispatch_get_main_queue(), ^{
     // long-running task 
     // ..
}); 
```

# java - 杰克逊多个对象和巨大的 json 文件

> ID：10411020
> 
> 赞同：9
> 
> 时间：2012-05-02T09:27:45.633
> 
> 标签：java, json, jackson

我觉得答案可能与此重复：[Jackson - Json to POJO With Multiple Entries](https://stackoverflow.com/questions/7045836/jackson-json-to-pojo-with-multiple-entries)，但我认为问题可能已经足够不同了。此外，我使用的是原始数据绑定而不是完整的数据绑定。

所以就像那个问题的提问者一样，我在一个文件中有多个对象，我试图将它们转换为 POJO 并将它们填充到我设计的数据库中，这样我就可以快速而不是缓慢地访问数据。

这里的文件在数十 GB 的数量级，每个文件中包含多达数百万个对象。无论如何，这是我到目前为止所拥有的：

```
ObjectMapper mapper = new ObjectMapper();
Map<String,Object> data = mapper.readValue(new File("foo.json"), Map.class);
System.out.println(data.get("bar")); 
```

这对于在 foo 中打印第一个对象的 bar 元素非常有效，但我需要一种方法来迭代每个元素，而不会占用我所有的内存。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-02T23:58:03.120

您不必在 Streaming ( `JsonParser`) 和之间进行选择`ObjectMapper`，两者都做！用解析器遍历一下，然后调用`JsonParser.readValueAs(MyType.class)`绑定单个 JSON 对象。

或者，在适当的点调用传递 JsonParser`ObjectMapper`的方法。`readValue()`或者以`ObjectMapper.reader(Type.class).readValues()`这种方式使用和迭代。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-02T09:47:42.323

使用此代码示例查看基本思想。

```
final InputStream in = new FileInputStream("json.json");
try {
  for (Iterator it = new ObjectMapper().readValues(
      new JsonFactory().createJsonParser(in), Map.class); it.hasNext();)
    System.out.println(it.next());
}
finally { in.close();} } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T01:18:12.097

假设您有一个包装对象的数组，请创建一个 JsonParser，然后`readValuesAs`使用适当的类型调用。当您使用对象时，它会为您`Iterator`提供所有读取文件的对象。

# c++ - 嵌套结构会影响性能吗？

> ID：10411024
> 
> 赞同：0
> 
> 时间：2012-05-02T09:27:55.313
> 
> 标签：c++, nested-class

如果嵌套结构只包含静态常量成员，它会影响性能吗？我想用它来确定这些常量的范围。

```
class File {

    public:

        struct Mode {
            static const int Read = 0x01, Write = 0x02, Append = 0x04;
        };

}; 
```

这是一个好习惯吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T09:28:39.090

根本不是，变量是在编译时解析的，而不是在运行时解析的。

# c# - 使用 Specflow 测试对象复制

> ID：10411028
> 
> 赞同：1
> 
> 时间：2012-05-02T09:28:06.390
> 
> 标签：c#, tdd, bdd, specflow

我们刚刚开始使用 specflow 在大型代码库上进行测试。由于我们一直在添加功能，我们说过我们将对新代码进行测试，并在需要重构时为旧代码编写测试。

我们的一项新功能意味着将汽车从一个用户的数据库复制到另一个用户的数据库。没有太多的用户界面，所以除了访问数据库之外，我们没有办法检查一切是否正常。

在编写这样的测试时，是否有其他方法可以访问数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:47:23.513

如果数据库访问与业务逻辑隔离得足够好；即，在某种存储库接口之后，您可以在测试中模拟真实的存储库并验证已调用的已模拟存储库是否适合此类复制操作。

# ios - iOS：如何从应用程序中读取已安装的配置文件？

> ID：10411030
> 
> 赞同：2
> 
> 时间：2012-05-02T09:28:18.503
> 
> 标签：ios, profile

配置文件是通过weblink安装的，只是想从ios应用程序中的配置文件中获取一些信息。

但不知道如何以及在哪里获取个人资料。

这个问题查了很久，没找到解决办法。

# php - 如何在 PHP 中使用 AES CBC+CTS（密文窃取）模式加密/解密数据？

> ID：10411036
> 
> 赞同：2
> 
> 时间：2012-05-02T09:28:32.733
> 
> 标签：php, .net, cryptography, aes, mcrypt

我必须在 PHP 中以 AES CTS 模式（密文窃取，有时称为 AES-XTS）加密和解密数据，才能与用 .NET 平台编写的远程系统进行互操作。在 .NET 4 中，本[机支持](http://msdn.microsoft.com/en-us/library/system.security.cryptography.ciphermode.aspx)此模式。

对于PHP，我找不到解决方案，根据手册，mcrypt似乎不支持这种模式。

谁能解释普通CBC和CBC-CTS之间的区别？是否可以使用现有的模块/库使后者在 PHP 中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:09:52.063

这是维基百科[文章](http://en.wikipedia.org/wiki/Ciphertext_stealing#CBC_ciphertext_stealing_decryption_using_a_standard_CBC_interface)中的步骤，其中插入了我的评论，解释了

1.  LDn = 解密 (K, Cn-1)。使用零作为 IV 解密倒数第二个密文块（倒数第二个 128 位/16 字节块块）。

    您可以使用标准的 PHP mcrypt 函数执行此操作，只需通过

    $second_to_last_cipher=array_slice($your_cipher_text_byte_array,count($your_cipher_text_byte_array)-32,16)

    使用 null Iv 到 mcrypt_decrypt

    $second_to_last_clear = mcrypt_decrypt"MCRYPT_RIJNDAEL_128",$key,$second_to_last_ciphe)

2.  Cn = Cn || 尾巴（Dn，BM）。使用倒数第二个密文块的块密码解密的最后 B-M 位将密文填充到块大小的最接近的倍数。

    将刚刚解密的值的最后 n 个字节复制到最后一个密文块中。

    $n = 16 - ($second_to_last_clear % 16)

    然后使用数组复制复制数据

3.  交换最后两个密文块。

    只需交换密文数组中最后一个和第二个最后两个单元格的内容

4.  使用标准 CBC 模式解密密文直到最后一个块。

    进行标准解密调用。

5.  最后一个密文（已在步骤 1 中解密）与倒数第二个密文异或。

    不言自明。

6.  将明文截断为原始密文的长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-11T10:55:04.373

我在 C 中找到了 AES 算法的实现，你可以在[这里](http://brgladman.org/oldsite/AES/index.php)找到它的源代码。

作者的旧实现是在[Android](https://github.com/android/platform_external_aes)中使用的。所以我认为实施将非常有希望。

最后，在你下载了源代码之后，再检查一下文件`aesxam.c`，有一个非常好的 CTS 示例，它使用 CBC 进行文件加密。

所有的功劳都[归于布赖恩·格拉德曼](http://brgladman.org)。

* * *

[Brian Gladman 现在为 AES](https://github.com/BrianGladman/AES)维护自己的 github 存储库。

# php - 创建文章

> ID：10411038
> 
> 赞同：-4
> 
> 时间：2012-05-02T09:28:38.077
> 
> 标签：php, joomla, joomla-extensions, joomla-article

我想了解如何使用 PHP 创建文章。今天我使用 Fabrik 使用表单收集信息，但我需要根据这些数据以自动方式创建 Joomla 文章。

我正在寻找基于 PHP 的解决方案（如果可能的话），它将在用户提交表单时执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:47:20.527

要在提交 Fabrik 表单后运行 PHP 代码或预先编写的脚本，请使用[PHP 表单插件](http://fabrikar.com/wiki/index.php/Form_plugin_php "PHP 表单插件")。通过 PHP 表单插件运行的脚本在 Joomla 应用程序的范围内，因此您绝对可以自动创建文章（通过 com_content 组件）。

如果您对使用该插件有任何疑问，最好的办法是在[Fabrik 论坛上提问](http://fabrikar.com/forums/ "Fabrik 论坛")

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-02T09:33:31.227

您最好将文章保存在数据库（可能是 MySQL）中，然后使用表单（使用 METHOD="POST"）发送结果并提取它们（使用 $_POST['* name of input']）和然后将该变量保存到 MySQL 数据库中。

```
<form action="?article=submit" method="POST">
<input type="text" name="title"/>
<input type="submit"/>
</form>

<?php
if($_GET['article'] == "submit"){
if(!empty($_POST['title'])){
mysql_query("INSERT INTO article (title)VALUES ('".$_POST['title']."')")or die(mysql_error());
}

}
?> 
```

# java - 属性和多态性

> ID：10411049
> 
> 赞同：1
> 
> 时间：2012-05-02T09:29:25.320
> 
> 标签：java, inheritance, polymorphism, overriding

我有 2 节课：

```
public class Increase {
public int a=3;
public void add(){
    a+=5;
    System.out.println("f");
}
}

class SubIncrease extends Increase{
    public int a=8;
    public void add(){
        a+=5;
        System.out.println("b" + a);

    }
} 
```

但是当我跑步时

```
 Increase f=new SubIncrease();
    System.out.println(f.a);
    f.add();
    System.out.println(f.a); 
```

我得到了这个输出：

```
3
b13
3 
```

谁能帮我理解为什么会这样？a 属性的值在方法 add 中发生了更改，如第二个 outpuy 行所示……为什么它会恢复到原来的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T09:33:31.510

在 Java 中，字段不会被覆盖，它们是隐藏的。这意味着`Increase.a`并且`SubIncrease.a`是可以单独更改和查询的*单独字段。*因为变量的类型`f`是`Increase`，所以表达式`f.a`返回超类字段的值。但是该`add()`方法*被*重写并`f.add()`调用了子类方法，该方法修改了子类字段。

隐藏一个字段很少有意义，所以你应该避免它。如果您想在子类中拥有具有不同默认值的字段，请仅在超类中定义它并在子类构造函数中为其分配值。

# c++ - C++ 编译器 - 常用符号

> ID：10411052
> 
> 赞同：1
> 
> 时间：2012-05-02T09:29:37.940
> 
> 标签：c++, compiler-construction, compilation, gnu, gnu-toolchain

我有一个关于 C++ 编译器的问题。

C++ 编译器何时会创建一个通用符号？使用 C 编译器，我可以为目标文件提供通用符号，但如果我使用 C++ 编译器 (GNU) 编译相同的代码，我只会得到已定义和未定义的符号。

所以问题是什么情况会导致变量/函数在 C++ 中被编译为常见的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:44:42.100

他们中的一些人从不这样做。已故且备受诟病的 Watcom C++ 编译器充分利用常用符号来节省内联函数实例。有各种情况`extern`也可以通过这种方式经济地解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T10:45:00.763

通用符号存在的主要原因是因为 Fortran 具有其通用块，因此名称为“通用符号”。通用符号的概念与 C++ 是对立的，它是一个相当严格的定义规则。C 有类似的规则，但 C 标准也承认允许对同一符号进行多个定义是该语言的常见扩展。C++ 没有“通用扩展”附录。供应商要么符合标准，要么不符合。

底线：C++ 编译器没有理由生成通用符号。

# android - Android不同的屏幕尺寸和AVD

> ID：10411058
> 
> 赞同：0
> 
> 时间：2012-05-02T09:29:53.863
> 
> 标签：android

我想实现几种布局：一种用于手机，另一种用于平板电脑。这意味着我需要创建几个文件夹：layout-normal、layout-large。接下来，为了测试机制，我需要以某种方式强制 avd 启动具有特定宽度和高度参数（英寸？）的机器 - 它是如何完成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:43:47.873

This might help: [Supporting multiple screens](http://developer.android.com/guide/practices/screens_support.html).

Edit: Check [this](https://stackoverflow.com/questions/3438926/android-layout-large-folder-is-been-ignored) too, for setting a layout-large AVD

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:31:43.480

您可以在 AVD Manager 中创建虚拟设备时配置机器显示高度/宽度/dpi。

![在此处输入图像描述](../Images/81c620089a8e2efa82cf9e02a6a69f15.png)

# java - tomcat 启动 java.lang.ClassNotFoundException: [Ljava.lang.String;

> ID：10411059
> 
> 赞同：1
> 
> 时间：2012-05-02T09:29:54.853
> 
> 标签：java, tomcat, startup

这是我在仅为特定应用程序启动 tomcat 时遇到的错误。

在我的系统被格式化之前，我曾经使用相同的应用程序。

谁能解释一下这个异常的原因。

```
java.lang.ClassNotFoundException: [Ljava.lang.String;
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1438)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1284)
at com.sun.faces.config.ConfigureListener.configure(ConfigureListener.java:635)
at com.sun.faces.config.ConfigureListener.configure(ConfigureListener.java:422)
at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:348)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3795)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4252)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1014)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:736)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1014)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
at org.apache.catalina.core.StandardService.start(StandardService.java:448)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:700)
at org.apache.catalina.startup.Catalina.start(Catalina.java:552)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:295)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:433) 
```

谢谢桑迪普
_

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T09:37:55.787

您的 JDK/JRE 版本和 Tomcat 应用程序版本似乎不匹配。

1.  您可以尝试改回有效的原始 JDK/JRE。

2.  或者试试这个 -Dsun.lang.ClassLoader.allowArraySyntax=true

# asp.net-mvc - 将父母的 ID 添加到隐藏字段

> ID：10411060
> 
> 赞同：4
> 
> 时间：2012-05-02T09:30:09.287
> 
> 标签：asp.net-mvc, entity-framework, razor

我在使用 MVC / Razor / Entity Framework 时有点挣扎。

我需要创建一个引用父对象的对象。我的模型中有一个名为 ParentID 的字段，但我无法弄清楚如何使用父 ID 填充它。

我想我的视图中需要一个隐藏字段，然后可能将 ParentID 放在 ViewBag 中，并将 ViewBag 属性指向隐藏字段，但我似乎无法让它工作。

像这样的东西，是我的假设：

```
@Html.Hidden("BladeID", ViewBag.ParentBlade) 
```

我不确定我是否已经很好地解释了自己，所以请问一下，我会扩展。

另外，我不确定我是否以正确的方式执行此操作。这对我来说都是全新的，来自网络表单。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T09:33:38.690

如果`ParentID`已经在模型中，为什么不直接从那里填充隐藏字段？

```
@Html.Hidden("BladeID", Model.ParentID) 
```

如果您真的想从 填充它，则`ViewBag`必须将其转换回`int`（假设这是 的类型`ParentID`），因为`ViewBag`是 类型`dynamic`：

```
@Html.Hidden("BladeID", (int)ViewBag.ParentBlade) 
```

**根据评论更新**

如果您的视图依赖于两个（或更多）单独的模型类，您始终可以选择为该视图创建自定义视图模型，例如：

```
public class ParentChildViewModel
{
    public Blade Parent { get; set; }
    public Blade Child { get; set; }
} 
```

然后将该类用作您视图中的模型：

```
@model ParentChildViewModel
// more view code here
@Html.Hidden("BladeID", Model.Child.ParentID) 
```

也就是说，在我看来，`ViewBag`在这种情况下使用它并没有错，特别是如果你只需要一个属性。

# java - 如何很好地格式化生成的 Java 代码

> ID：10411063
> 
> 赞同：1
> 
> 时间：2012-05-02T09:30:21.503
> 
> 标签：java, eclipse, import, abstract-syntax-tree, fully-qualified-naming

我正在寻找一种自动缩进java源代码的方法。我有一个从其他语言生成 java 代码的工具。现在，我想缩进生成的代码。请告诉我我该怎么做？在另一种方式中，我怎样才能准确地完成 ctl+shift+m​​ 自动执行的操作？我不能使用 CTRL + SHIFT + F 和 CTRL + SHIFT + M

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:42:58.950

As your tag says, you are using `Eclipse` , you can use `CTRL` + `SHIFT` + `F` to indent the code.

Moreover as you are asking about replacing fully qualified name to import statement then no such thing exists in Eclipse as of now. ( Correct me if I am wrong ).

But you can still select the `fully qualified name` and press `CTRL` + `SHIFT` + `M` to import the class.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T17:06:52.770

请参阅我们的[Java Formatter](http://www.semanticdesigns.com/Products/Formatters/JavaFormatter.html)，了解处理所有 Java 方言的工具，包括版本 7。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T11:13:41.173

您可以在 Package Explorer 中选择一个项目/文件夹/包，然后使用 Source > Format (Ctrl+Shift+F) 一次性格式化所有内容。或者，您也可以配置清理或保存操作。

# android - 如何知道蓝牙何时断开连接

> ID：10411070
> 
> 赞同：1
> 
> 时间：2012-05-02T09:30:41.787
> 
> 标签：android, bluetooth, broadcastreceiver

当蓝牙与设备断开连接时，我试图“捕捉”。我正在使用此代码：

```
if (BluetoothDevice.ACTION_ACL_DISCONNECTED.equals(action)){
            deleteNotification();
            setWarningState(WarningState.RedWarning);
            showNotification("You are parked"); 
```

但是当我通过关闭远程设备或关闭手机中的蓝牙切换来断开蓝牙连接时，它不会进入此状态。

当我使用这个时：

```
BluetoothDevice.ACTION_ACL_CONNECTED.equals(action) 
```

它工作正常（当建立连接时）。为什么会这样，我怎样才能让它工作？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T09:54:00.127

您是否注册了以下 IntenFilters

```
IntentFilter f1 = new IntentFilter(BluetoothDevice.ACTION_ACL_DISCONNECT_REQUESTED);
IntentFilter f2 = new IntentFilter(BluetoothDevice.ACTION_ACL_DISCONNECTED);
this.registerReceiver(mReceiver, f1);
this.registerReceiver(mReceiver, f2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-08T11:00:09.977

```
 IntentFilter filter = new IntentFilter(BluetoothAdapter.ACTION_STATE_CHANGED);
        registerReceiver(mBluetoothReceiver, filter);

 private final BroadcastReceiver mBluetoothReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            final String action = intent.getAction();

            if (action!=null && action.equals(BluetoothAdapter.ACTION_STATE_CHANGED)) {
                final int state = intent.getIntExtra(BluetoothAdapter.EXTRA_STATE,
                        BluetoothAdapter.ERROR);
                switch (state) {
                    case BluetoothAdapter.STATE_OFF:

                        break;
                    case BluetoothAdapter.STATE_ON:

                        break;

                }
            }
        }
    }; 
```

# iphone - 解雇 RootViewController？

> ID：10411078
> 
> 赞同：3
> 
> 时间：2012-05-02T09:31:07.727
> 
> 标签：iphone, ios, xcode

我有一个 RegistrationViewController 和一个 LoginViewController：

LoginViewController 是我的 InitialViewController/RootViewController。

如果我注册并单击注册按钮，它将自动推送到 MainViewController。如果我按下 Logout 按钮，它会被 RegistrationViewController 解散，这是因为我使用 [self dismissModalViewController animated:YES]。

```
 - (IBAction)logoutPressed:(id)sender {
  [self dismissModalViewControllerAnimated:YES];
   } 
```

如果我按下注销按钮，我如何关闭 LoginViewController。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-07-23T04:24:05.400

```
-(void)dismissToRootViewController
{
    UIViewController *vc = self;
    while (vc.presentingViewController) {
        vc = vc.presentingViewController;
    }
    [vc dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T09:32:06.033

您可以使用 UINavigationController 方法`-popToRootViewControllerAnimated:`。

```
- (IBAction)logoutPressed:(id)sender {
    [self.navigationController popToRootViewControllerAnimated:YES];
} 
```

如果您是在谈论多个模态视图在另一个之上呈现，您可以通过将`-dismissViewControllerAnimated:completion:`或更旧的发送`-dismissModalViewControllerAnimated:`到堆栈中的最低视图来消除所有这些视图，如文档中所述：

> 如果您连续呈现多个视图控制器，从而构建一个呈现视图控制器的堆栈，则在堆栈中较低的视图控制器上调用此方法会解除其直接子视图控制器以及堆栈上该子视图控制器上方的所有视图控制器。发生这种情况时，只有最顶层的视图会以动画方式消失

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-25T07:16:28.473

试试看，对我有用。

```
 [[[UIApplication sharedApplication] keyWindow].rootViewController dismissViewControllerAnimated:YES completion:nil]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-24T09:37:45.000

如果您使用 UINavigationController 使用 View Controller 堆栈，使用以下方法是明智的。

```
1\. Pop the current top ViewController use
 [[self navigationController] popViewControllerAnimated:YES];

2\. Pop to RootViewController use
[[self navigationController] popToRootViewControllerAnimated:YES];

3\. For that matter popping to any ViewController use
 [[self navigationController] popToViewController:viewController animated:YES]; 
```

# python - 在python中将整数转换为二进制

> ID：10411085
> 
> 赞同：227
> 
> 时间：2012-05-02T09:31:41.823
> 
> 标签：python, binary, integer

为了将整数转换为二进制，我使用了以下代码：

```
>>> bin(6)  
'0b110' 
```

以及何时擦除'0b'，我使用这个：

```
>>> bin(6)[2:]  
'110' 
```

如果我想显示`6`为`00000110`而不是，我该怎么办`110`？

* * *

## 回答 #1

> 赞同：436
> 
> 时间：2012-05-02T09:32:56.513

```
>>> '{0:08b}'.format(6)
'00000110' 
```

只是为了解释格式化字符串的部分：

*   `{}`将变量放入字符串
*   `0`在参数位置 0 处获取变量
*   `:`为该变量添加格式选项（否则它将表示十进制`6`）
*   `08`将数字格式化为在左侧填充零的八位数字
*   `b`将数字转换为其二进制表示

如果您使用的是 Python 3.6 或更高版本，您还可以使用 f-strings：

```
>>> f'{6:08b}'
'00000110' 
```

* * *

## 回答 #2

> 赞同：117
> 
> 时间：2012-05-02T09:37:09.337

只是另一个想法：

```
>>> bin(6)[2:].zfill(8)
'00000110' 
```

通过[字符串插值](https://www.python.org/dev/peps/pep-0498/)（**Python 3.6+**）更短的方法：

```
>>> f'{6:08b}'
'00000110' 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-05-02T10:07:33.847

有点折腾的方法...

```
>>> bin8 = lambda x : ''.join(reversed( [str((x >> i) & 1) for i in range(8)] ) )
>>> bin8(6)
'00000110'
>>> bin8(-3)
'11111101' 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2016-04-07T20:16:08.167

只需使用格式功能

```
format(6, "08b") 
```

一般形式是

```
format(<the_integer>, "<0><width_of_string><format_specifier>") 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-05-02T09:35:17.210

eumiro 的答案更好，但我只是为了多样化而发布这个：

```
>>> "%08d" % int(bin(6)[2:])
00000110 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2019-05-01T02:11:01.197

### [`numpy.binary_repr(num, width=None)`](https://docs.scipy.org/doc/numpy-1.15.0/reference/generated/numpy.binary_repr.html#numpy-binary-repr)有一个神奇的宽度参数

上面链接的文档中的相关示例：

> ```
> >>> np.binary_repr(3, width=4)
> '0011' 
> ```
> 
> 当输入数为负数且指定宽度时，返回二进制补码：
> 
> ```
> >>> np.binary_repr(-3, width=5)
> '11101' 
> ```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-05-02T09:47:30.567

.. 或者如果您不确定它是否应该始终为 8 位，您可以将其作为参数传递：

```
>>> '%0*d' % (8, int(bin(6)[2:]))
'00000110' 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-06-08T16:40:11.307

去老学校总是有效的

```
def intoBinary(number):
binarynumber=""
if (number!=0):
    while (number>=1):
        if (number %2==0):
            binarynumber=binarynumber+"0"
            number=number/2
        else:
            binarynumber=binarynumber+"1"
            number=(number-1)/2

else:
    binarynumber="0"

return "".join(reversed(binarynumber)) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-03-11T13:31:12.067

假设您想从一个并不总是恒定的变量中解析用于表示的位数，一个好方法是使用 numpy.binary。

当您将二进制应用于电源组时可能很有用

```
import numpy as np
np.binary_repr(6, width=8) 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-04-27T03:18:05.323

最好的方法是指定格式。

```
format(a, 'b') 
```

以字符串格式返回 a 的二进制值。

要将二进制字符串转换回整数，请使用 int() 函数。

```
int('110', 2) 
```

返回二进制字符串的整数值。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-09-05T00:07:31.180

```
('0' * 7 + bin(6)[2:])[-8:] 
```

或者

```
right_side = bin(6)[2:]
'0' * ( 8 - len( right_side )) + right_side 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-08-11T17:21:18.267

您可以只使用：

```
"{0:b}".format(n) 
```

在我看来，这是最简单的方法！

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-09-11T02:33:46.313

甚至更简单的方法

```
my_num = 6
print(f'{my_num:b}') 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-05-18T09:41:03.857

```
def int_to_bin(num, fill):
    bin_result = ''

    def int_to_binary(number):
        nonlocal bin_result
        if number > 1:
            int_to_binary(number // 2)
        bin_result = bin_result + str(number % 2)

    int_to_binary(num)
    return bin_result.zfill(fill) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-07-16T14:49:05.237

python 包[Binary Fractions](https://pypi.org/project/binary-fractions/)具有二进制和二进制分数的完整实现。您可以按如下方式进行操作：

```
from binary_fractions import Binary
b = Binary(6) # creates a binary fraction string
b.lfill(8) # fills to length 8 
```

这个包有许多其他方法可以完全精确地操作二进制字符串。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-12-02T22:11:02.700

带递归的简单代码：

```
 def bin(n,number=('')):
   if n==0:
     return(number)
   else:
     number=str(n%2)+number
     n=n//2
     return bin(n,number) 
```

# jquery - 如何在 jquery ui 手风琴中获取活动面板

> ID：10411090
> 
> 赞同：1
> 
> 时间：2012-05-02T09:32:09.633
> 
> 标签：jquery, jquery-ui, jquery-ui-accordion

我正在使用 jquery ui 手风琴插件。如何在页面中获取活动面板？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-03-18T09:40:01.247

我想问题更多的是如何获取活动面板 div，而不仅仅是索引。使用这个选择器：

```
$("#accordion .ui-accordion-content")[$("#accordion").accordion("option", "active")]; 
```

或者这个：

```
$("#accordion .ui-accordion-content-active"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T09:36:09.953

使用这个选择器：

```
 $( ".acc" ).accordion( "option", "active" ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T09:57:21.693

onclick 事件在隐藏字段中添加当前索引，使用更方便。

# c# - 检查以前版本的应用程序

> ID：10411091
> 
> 赞同：2
> 
> 时间：2012-05-02T09:32:13.617
> 
> 标签：c#

我想在我的应用程序中显示一个 What's New 表单。但是我需要检测它是新安装还是升级。

我正在使用以下代码来升级设置：

```
if (Properties.Settings.Default.settingsUpgrade)
{
    WhatsNew WhatsNew = new WhatsNew();
    WhatsNew.Show();
    WhatsNew.BringToFront();

    Properties.Settings.Default.Upgrade();
    Properties.Settings.Default.settingsUpgrade = false;
    Properties.Settings.Default.Save();                
} 
```

默认情况下`Properties.Settings.Default.settingsUpgrade`设置为`True`。但是，此代码将始终显示 Whats New 表单，即使是新安装也是如此。

`Properties.Settings.Default.Upgrade();`没有事件或在实际需要升级时触发的东西，所以我不知道是否有以前的版本（因此显示 Whats New 表单）。我怎么知道是否有以前的版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:21:45.347

我已经使用`GetPreviousVersion(string property);`. 缺点是以前的版本需要一个设置（但在我的情况下这不是问题 - 即使第一个版本也至少**有一个**设置）。

```
if (Properties.Settings.Default.settingsUpgrade)
{
    Object PrevVersion = Properties.Settings.Default.GetPreviousVersion("tooltipDisplay");
    if (PrevVersion != null)
    {
        WhatsNew WhatsNew = new WhatsNew();
        WhatsNew.Show();
        WhatsNew.BringToFront();

        Properties.Settings.Default.Upgrade();
        Properties.Settings.Default.settingsUpgrade = false;
        Properties.Settings.Default.Save();
    }
} 
```

此代码将检查是否找到以前的配置，如果是，则对象`PrevVersion`不会设置为`null`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:57:41.887

您可以尝试创建一个名为**currentVersion**的设置，该设置以空开头，并将其与应用程序的当前程序集版本进行比较。像这样的东西：

```
if (Properties.Settings.Default.settingsUpgrade)
        {
            Properties.Settings.Default.Upgrade();

            string strVersion = System.Reflection.Assembly.GetExecutingAssembly().GetName().Version.ToString();
            string installedVersion = Properties.Settings.Default.installedVersion;

            if (!string.IsNullOrEmpty(installedVersion) && installedVersion != strVersion)
            {
                WhatsNew WhatsNew = new WhatsNew();
                WhatsNew.Show();
                WhatsNew.BringToFront();
            }

            Properties.Settings.Default.installedVersion = strVersion;
            Properties.Settings.Default.settingsUpgrade = false;
            Properties.Settings.Default.Save();
        } 
```

如果您为应用程序的每个新版本更新程序集版本，这应该可以工作。我的示例中的版本比较显然非常简单，并且如果它们降级以及升级也会导致显示 What's New，但它应该很容易解决。

编辑：我已经更新了代码以解决一些问题。基本上，在尝试获取旧版本号之前调用 Properties.Settings.Default.Upgrade() 来获取用户设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T09:48:09.103

尝试使用全局可访问资源，例如系统注册表。将当前的“已安装”（如果是独立的，未实际安装的）版本号放置在任何其他程序可以读取的位置。

# javascript - 在html5中加载html页面后调用js函数？

> ID：10411104
> 
> 赞同：-1
> 
> 时间：2012-05-02T09:32:47.387
> 
> 标签：javascript, html, jquery-mobile

我正在创建 jQuerymobile 网站。我有一个这样的标签`page1.html`

```
 <a href="Page2.html">go to page 2</a> 
```

如果我单击它将转到 Page2.html。页面加载后，我需要调用一个 js 函数。我尝试了两种方法来放置函数

1.  `onload="ExampleFunction()"`在Page2.html的 body 标记处
2.  `<script>window.onload=ExampleFunction</script>`体内

但两者都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:36:16.537

使用 jQuery Mobile 时，**不要**使用`onload`or `ready`，而是使用[`pageinit`](http://jquerymobile.com/demos/1.1.0/docs/api/events.html):

```
$(document).bind('pageinit', function() {
    // Your code here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:35:27.110

您可以使用 jQuery（这将绕过任何浏览器特定的页面加载功能）。

```
$(document).bind('pageinit', function() {
    // Your code here
}); 
```

此外，如果您只想在从第一页定向到第二页时调用 JavaScript 函数...您可以在页面 URL 中包含查询字符串。

```
<a href="Page2.html?callmyfunc=true">go to page 2</a> 
```

并在页面加载时检查 URL 的参数，并最终触发函数调用。

# iphone - 我的 iPhone 应用程序被归档为“Mac App Archive”而不是“iOS 应用程序归档”

> ID：10411105
> 
> 赞同：8
> 
> 时间：2012-05-02T09:32:49.527
> 
> 标签：iphone, ios, xcode

我正在尝试使用 XCODE 4.3.1 发布临时 ipa。归档我的 iOS 应用程序时，我可以在管理器中看到归档类型是“Mac App Archive”，虽然我知道它应该是“iOS App Archive”。

现在，当我尝试分发时，我没有 IPA 选项，但有 mac 应用程序选项..

顺便说一句，当我在我的设备上运行它时，它可以完美地编译和运行。项目设置说：“设备系列：iPhone”

有任何想法吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T15:31:29.690

由于盖伊没有将其发布为正确的答案，我会的，因为我可以确认它有效。

检查您是否不小心使 Info.plist 成为目标的一部分。不应该。在 Target Membership 窗格中取消选中它或从 Copy Bundle Resources 构建阶段将其删除。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T05:42:02.450

如果您使用 Facebook SDK 并导入他们的 plist 文件，则需要将其从目标中删除。

# javascript - Internet Explorer 7、8 和 9：画布支持 (Mootools)

> ID：10411107
> 
> 赞同：1
> 
> 时间：2012-05-02T09:32:55.977
> 
> 标签：javascript, html, internet-explorer, canvas, mootools

我已经使用画布编写了这个 Mootools 示例，它是一个简单的工具：

[http://jsfiddle.net/beingalex/MZTbW/11/](http://jsfiddle.net/beingalex/MZTbW/11/)

它只是创建一条从一个单击位置到另一个位置的线。

我真的有两个问题，都与 Internet Explorer 对`canvas`标签的支持有关。

1.  我的印象是 IE9 支持`canvas`，但从上面的演示中我断定我错了。还是我？我执行不正确？

2.  我知道 IE 7 和 8 不支持`canvas`，所以我正在寻找关于如何去做我在上面的演示中为这些浏览器所做的事情的建议。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:55:22.593

IE9 完美支持画布。

如果您的页面不能正常工作，通常是因为您的标题不正确。用这个 ：

```
 <!DOCTYPE html>
    <html>
    <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

对于 IE7 和 IE8，你需要这个：[http ://www.google.com/chromeframe?prefersystemlevel=true](http://www.google.com/chromeframe?prefersystemlevel=true)

# symfony - Symfony2 Doctrine PHP Annotation for refClassRelationAlias

> ID：10411109
> 
> 赞同：0
> 
> 时间：2012-05-02T09:32:58.357
> 
> 标签：symfony, doctrine

我的一张表有一个多对多的自引用非相等关系。数据库表看起来像：

```
Node
- id

Node_Relationship
- parent_id (FK of Node.id)
- child_id (FK of Node.id)
- PRIMARY KEY (parent_id, child_id) 
```

这会导致 Doctrine 出现问题，为该 ID 组合提供重复条目。

该线程[http://www.doctrine-project.org/jira/browse/DC-329](http://www.doctrine-project.org/jira/browse/DC-329)在使用 refClassRelationAlias 的最底部提到了一个修复。

我的问题是，我该如何实现呢？我正在使用 PHP 注释方法来标记我的类，但他们只提到使用 YAML 文件，而我目前没有这样做。

我可以在不将所有内容完全重做为 YAML 文件的情况下实现这一点吗？如果是这样，怎么做？

谢谢。

更新：

我的两个字段注释如下：

```
/**
     * @ORM\ManyToMany(targetEntity="Module", inversedBy="children")
     * @ORM\JoinTable(name="module_relationships",
     *      joinColumns={@ORM\JoinColumn(name="child_id", referencedColumnName="id")},
     *      inverseJoinColumns={@ORM\JoinColumn(name="parent_id",  
     *      referencedColumnName="id")}
     *      )
     */
    protected $parents;

    /**
     * @ORM\ManyToMany(targetEntity="Module", mappedBy="parents")
     */
    protected $children; 
```

当我向父母或孩子添加一些东西时，我也将它设置为相反的。我使用 set 并使用对象的 ID 作为键，以避免 ArrayCollection 中的重复。

他们是否修复了错误而我只是做错了什么？或者是否仍然存在具有不同修复程序的错误。我正在使用 Symfony 2.0.12 版。

谢谢。

更新2：原来我无意中创建了重复项。一旦我更改了功能以实际阻止它们，它似乎工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T03:42:54.390

原来这是我自己的错。正如我所提到的，当我设置以避免重复值时，我使用 id 作为键......但是，最初加载的键没有被赋予这样的键，所以我实际上导致了重复。我从这样做切换到在添加之前简单地检查它是否包含它，现在它工作得很好。

# java - DefaultTableModel 不刷新

> ID：10411112
> 
> 赞同：2
> 
> 时间：2012-05-02T09:33:08.050
> 
> 标签：java, swing, jtable, refresh, defaulttablemodel

将新数据输入数据库后，我的 JTable 不会刷新。我需要终止并再次执行以查看结果。我已经包含了 DefaultTableModel 和 fireTableDataChanged。我还错过了什么？谢谢！

```
{
    columnNames = new Vector();
    data = new Vector(); 

    try{
        //database stuffs
    }

    catch{
    }  

    DefaultTableModel tm = new DefaultTableModel(); 
    JTable table = new JTable (tm); 
    JScrollPane scrollPane  = new JScrollPane(table);

    table = new JTable(data,columnNames)            
    {               
        public boolean isCellEditable(int row, int column){
            return false;
        }        

            public void newDataAvailable (TableModelEvent e){
            }
    };      

    scrollPane = new JScrollPane(table);            
    scrollPane.setBounds(33, 47, 256, 228);      
    panel.add(scrollPane);          

} 
```

我可以创建一个“刷新按钮”并刷新值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:37:55.347

您不必`fireTableDataChanged()`显式调用；`DefaultTableModel`更新模型时会自动执行此操作，如相关[示例](https://stackoverflow.com/a/7519403/230513)中所示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T11:57:48.523

您创建新`JTable`实例。只需创建一次，并将新模型仅设置为现有模型`JTable`（正确添加到容器中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-12T08:54:37.553

1.  我创建了一个新项目，其中我选择了一个新框架并将一个表格、一个标签、一个文本字段和一个按钮从摇摆控件拖动到您的框架。

2.在后台建表……</p>

3.  从此链接下载 rs2xml jar 文件

[下载 rs2xml.jar](http://fvmproject.googlecode.com/svn-history/r9/trunk/rs2xml.jar)

4.  将其添加到项目库中……</li>

右键单击项目 > 属性 > 库 > 添加 Jar/文件夹 > 选择 jar > ok

5.然后使用以下代码连接mysql

```
public class DBConnect {

Connection connection = null;

public Connection getConnection() {
    try {
        Class.forName("com.mysql.jdbc.Driver");
        connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/test", "root", "");
        System.out.println("connection successfully");
    } catch (Exception ex) {
        ex.printStackTrace();
    }
    return connection;
}
} 
```

6.  使用以下代码调用页面中的函数

    ```
    con=new DBConnect();
    statement=con.getConnection().createStatement(); 
    ```

7.然后创建一个更新函数，输入以下代码……</p>

```
void update_table() throws SQLException{
    rs=statement.executeQuery("select * from details");
    jTable1.setModel(DbUtils.resultSetToTableModel(rs));
} 
```

8.在按钮动作事件中输入以下内容并调用更新函数

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         

   try {
       Object name=jTextField1.getText();
       String sql="insert into details (name) values('"+name+"')";
        int  resultset=statement.executeUpdate(sql);
        update_table();
   } catch (SQLException ex) {
       Logger.getLogger(update.class.getName()).log(Level.SEVERE, null, ex);
   } 
```

}

9.然后运行项目……</p>

您也可以按照本教程进行操作：-

[插入删除或更新java Netbeans ID中的数据后如何刷新JTable](http://tut.julfi.com/refresh-jtable-insert-delete-update-data-java-netbeans-id/)

# java - 从 jar 访问 web 资源

> ID：10411114
> 
> 赞同：2
> 
> 时间：2012-05-02T09:33:18.060
> 
> 标签：java, jboss, jboss-4.2.x, webresource

我试图将我的网络资源放在一个 jar insetad 中，将它们放在战争文件的 roor dir 中。因此，我遵循了[在 Web 应用程序（Tomcat7）中从 jar 文件中公开资源](https://stackoverflow.com/questions/4732965/exposing-resources-from-jar-files-in-web-applications-tomcat7)的帖子 并将我所有的 rsources 放在资源目录下，但我仍然无法访问。唯一的区别是我使用的是 JBoss4.2.2GA。我正在访问我的资源

[http://localhost:18080/webapp/Email.png](http://localhost:18080/webapp/Email.png)

另一件事，我可以将我的 jsps 以及来自 lib 目录的 jar 的 META-INF/resources 目录中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T15:34:15.030

请参阅[https://community.jboss.org/wiki/VersionOfTomcatInJBossAS](https://community.jboss.org/wiki/VersionOfTomcatInJBossAS)。

JBoss AS 4.2.2.GA 包括基于尚不支持此功能的 Tomcat 6.0.13 的 JBoss Web 2.0.1 和 Servlet 3.0 API。

# c# - 在 wcf-service 中的每个操作中调用 start 和 end 函数

> ID：10411116
> 
> 赞同：0
> 
> 时间：2012-05-02T09:33:26.520
> 
> 标签：c#, wcf

我有一个有很多操作的 WCF 服务。对于每个操作，我想在方法开始和结束时执行一个函数（用于记录）。

例如：

```
public Person FindPerson(string name)
{
    Log("Start",...);

    ...

    Log("Stop",...);
} 
```

有没有办法可以为 wcf 服务中的所有方法实现这一点？也许在 beforeStart/afterEnd 事件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:44:58.787

查看本教程：http: [//msdn.microsoft.com/en-us/magazine/cc163302.aspx](http://msdn.microsoft.com/en-us/magazine/cc163302.aspx)。你对`IOperationInvoker`界面感兴趣。WCF 非常可扩展且也非常复杂，但 OperationInvoker 应该可以满足您的要求。如果您正在寻找更通用的方法，请考虑在您的 DI 容器中进行拦截（如果您正在使用一个）或考虑通过专门的框架添加 AOP 功能，即。[后夏普](http://www.sharpcrafters.com/postsharp/download)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:49:24.117

Empi打败了我，但无论如何我都会发布它:)

[日志记录是AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming)的典型候选者。

您可以使用许多依赖注入容器之一来处理实例化服务和运行时方面的应用程序。

或者您可以使用[postsharp](http://www.sharpcrafters.com)并将日志记录方面应用于您的服务实现。请参阅[示例](http://www.sharpcrafters.com/solutions/logging)以开始使用。您的代码将如下所示：

```
[Trace]
public person FindPerson(string name)
{
    //....
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T09:50:16.643

我可以告诉你我们是如何做到的，也许这对你来说是一个选择。我们为此使用了 AOP 样式属性，但使用了自行开发的代码（所以没有 postsharp，...）。PostSharp 也可以。

然后我们有一个单元测试，它检查每个方法（反射）以验证属性是否已添加。

我们这样做是因为我不想使用 WCF 进行日志记录，因为属性解决方案更通用，因此我们可以在其他地方使用。

# ms-access - MS Access VBA 导出到 TXT 错误

> ID：10411124
> 
> 赞同：0
> 
> 时间：2012-05-02T09:33:45.487
> 
> 标签：ms-access, vba

我有一个 Microsoft Access VBA 文件，如下所示。

```
Sub ExportTextFileDelimited(FileName As String, _
    DataSet As String, _
    Delimiter As String, _
    TextQualifier As String, _
    WithFieldNames As Boolean)
    On Error GoTo ExportTextFile_Err

    Dim cnn As ADODB.Connection
    Dim rst As New ADODB.Recordset

    Dim Directory As String
    Dim MyString As String, strSQL As String
    Dim strDS As String
    Dim I As Integer

    Open FileName For Output As #1
    Set cnn = CurrentProject.Connection

    rst.Open DataSet, cnn, adOpenForwardOnly, adLockReadOnly
    If WithFieldNames Then
        For I = 0 To rst.Fields.Count - 1
            MyString = MyString & TextQualifier & rst(I).Name & TextQualifier & Delimiter
        Next I
        MyString = Left(MyString, Len(MyString) - 1)
        Print #1, MyString
    End If
    rst.MoveFirst
    Do While Not rst.EOF
        MyString = ""
        For I = 0 To rst.Fields.Count - 1
            'check for text datatype (202)
            If rst(I).Type = 202 Then
                MyString = MyString & TextQualifier & _
                rst(I)
            Else
                MyString = MyString & rst(I)
            End If
        Next I
            MyString = Left(MyString, Len(MyString) - 2)
        Print #1, MyString
        rst.MoveNext
    Loop

ExportTextFile_Exit:
    ' Close text file.
    Close #1
    rst.Close
    Set cnn = Nothing
    Exit Sub
ExportTextFile_Err:
    MsgBox Err.Description
    Resume ExportTextFile_Exit
End Sub 
```

此代码工作正常，它输出`Query.txt`包含以下数据的文件：

请查看并参考此示例图像。

![下面描述的问题示例](../Images/6e072f9179788a71fcc08e8430f51728.png)

我的问题是，如何为 AMAL 和 SAMANTHA GAMAGE 数据应用最大宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:23:23.643

您在这里所要求的通常被称为“固定宽度”（或“固定长度”），它通常被认为是与逗号分隔（或 CSV）文件不同类型的文本文件。尽管您可以将这两个概念混合在同一个文件中。

要将字符串值设为指定长度，您需要使用 VBA 的空间函数。

```
Dim s as String
s = "AMAL"
s = s & Space(15 - len(s)) 'Add spaces to end
s = Space(15 - len(s)) & s 'Add spaces to beginning 
```

从您的帖子中不清楚为什么您只在这个字段中添加空格以及您将如何确定该字段应该多长（即要添加多少空格）。您的功能确实没有正确设置此功能。有多种方法可以重新设计此函数，以便它知道要向哪些字段添加空格以及要向该字段添加多少空格。您选择哪种方式实际上取决于您的个人需求。

只是为了让您了解如何在函数中使用它：

```
Dim iMaxLength as Integer
Do While Not rst.EOF
    If Len(rst("UserName").Value) > iMaxLength Then iMaxLength = Len(rst("UserName").Value)
    rst.MoveNext
Loop

Do While Not rst.EOF
    rst.movefirst
    MyString = ""
    For I = 0 To rst.Fields.Count - 1
        'check for text datatype (202)
        If rst(I).Type = 202 Then
            If rst(I).Name = "UserName" Then
                MyString = MyString & TextQualifier & _
                rst(I) & Space(iMaxLength - Len(rst(I))) 
            Else
                MyString = MyString & TextQualifier & _
                rst(I)
            End If
        Else
            MyString = MyString & rst(I)
        End If
    Next I
        MyString = Left(MyString, Len(MyString) - 2)
    Print #1, MyString
    rst.MoveNext
Loop 
```

# jquery - 使用谷歌地图（Jquery-UI-Map api），有没有办法将关闭事件附加到信息窗口？

> ID：10411133
> 
> 赞同：1
> 
> 时间：2012-05-02T09:34:08.933
> 
> 标签：jquery, google-maps, mobile, maps, infowindow

我无法弄清楚如何`InfoWindow`使用[Jquery-UI-Map api](http://code.google.com/p/jquery-ui-map/)将关闭事件附加到一个。我想在创建时附加一个关闭事件`InfoWindow`，或者通过链接到它的创建。无论采用最少的代码并符合 api 其余部分的结构。

我目前的解决方案是使用 google maps api 事件侦听器，它可以工作，但我不喜欢它。我更喜欢 jOuery 方法。

我目前有：

```
self.snMapElement.gmap('openInfoWindow', {'content': infoWindowMarkup},
                          self.selectedStreetMarker);

// Setup close event
google.maps.event.addListener(self.snMapElement.gmap('get', 'iw'), 'closeclick', 
    function() { self.removeSelectedStreetMarker(); }
); 
```

如果可能的话，我想使用一些方法：

```
self.snMapElement.gmap('openInfoWindow',
    { 'content': infoWindowMarkup },
    self.selectedStreetMarker).bind('closeclick',
    function(){ self.removeSelectedStreetMarker() }
); 
```

# php - 如果我们用相同的键初始化一个数组，存储在会话中的 PHP 数组设置为 null，是编码问题还是 php 问题？

> ID：10411134
> 
> 赞同：0
> 
> 时间：2012-05-02T09:34:14.783
> 
> 标签：php, arrays, session, variables

这是我要执行的代码，它在我的本地主机和另一台服务器 PHP 版本 5.3.2-1ubuntu4.11 上运行良好，但这会在共享主机上的 PHP 版本 5.2.17 中产生问题

```
<?php
/* PHP version PHP Version 5.2.17   
 * Server API   CGI/FastCGI
 */
session_start();
$products = array();
if (!isset($_SESSION['products'])) {
    $products = array("somedata1", "somedata2", "somedata3");
    $_SESSION['products'] = serialize($products);
    $_SESSION['test_products'] = serialize($products);
    echo "<br/>session products<br/>";
    print_r(unserialize($_SESSION['products']));
    echo "<br/>session test_products<br/>";
    print_r(unserialize($_SESSION['test_products']));
} else {
    echo "<br/>session products<br/>";
    print_r(unserialize($_SESSION['products']));
    echo "<br/>session test_products<br/>";
    print_r(unserialize($_SESSION['test_products']));
}
?> 
```

首次运行输出

```
session products
Array ( [0] => somedata1 [1] => somedata2 [2] => somedata3 ) 
session test_products
Array ( [0] => somedata1 [1] => somedata2 [2] => somedata3 ) 
```

但在重新加载

```
session products

Warning: unserialize() expects parameter 1 to be string, array given in /home/uaustral/public_html/itoi/test.php on line 17

session test_products
Array ( [0] => somedata1 [1] => somedata2 [2] => somedata3 ) 
```

相同的代码在我的 PHP 版本 PHP 版本 5.3.2-1ubuntu4.11 上运行良好

我错过了什么（在新的 PHP 版本中自动更正）还是旧版本的 PHP 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:03:31.700

如果您使用`register_globals`启用，则其中的任何数组项`$_SESSION`也称为该键的变量：

开启`register_globals`：

```
<?php
session_start();
var_dump($products); 
```

应该向您显示未序列化的字符串。因为你后来说`$products = array();`你在隐含地改变`$_SESSION['products']`. 解决方案： disable `register_globals`，附带说明：您不需要序列化该数据，会话可以很好地保存多维数组。只需确保在调用之前加载了任何需要的类定义`session_start`，或者具有自动加载功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:48:16.637

我认为这篇文章可以帮助你：

[http://www.phphelp.com/forum/index.php?topic=11483.0](http://www.phphelp.com/forum/index.php?topic=11483.0)

“它现在可以工作了……我对我机器上的 php.ini 文件和生产服务器上的文件进行了比较。我在生产服务器上的 php.ini 文件中关闭了‘Register Globals’，现在购物车运行良好！谢谢”

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T09:45:57.917

看看这是否有帮助：

[http://www.php.net/manual/en/function.unserialize.php#105588](http://www.php.net/manual/en/function.unserialize.php#105588)。

session_decode 函数甚至这么说。

# c# - 自定义 linq 扩展方法中的 BinaryExpression 类型引发异常

> ID：10411139
> 
> 赞同：0
> 
> 时间：2012-05-02T09:34:30.463
> 
> 标签：c#, linq, expression

有点难以总结这个主题中的错误，所以请原谅这个主题的糟糕措辞。

我正在编写一个自定义 linq 提供程序，但我坚持使用一种方法：

```
public static class CustomLinqMethods
{
  public static IQueryable<T> Where<T>(this IQueryable<T> source, BinaryExpression exp)
  {
    var methodInfo = ((MethodInfo)MethodBase.GetCurrentMethod()).MakeGenericMethod(typeof(T));
    return source.SearchProvider.CreateSearch<T>(Expression.Call(null, methodInfo, source.Expression, exp));
  }
} 
```

我还有其他一些可以正常工作的方法，但是这个方法会抛出一个 ArgumentException，上面写着

“'System.Boolean' 类型的表达式不能用于方法的 'System.Linq.Expressions.BinaryExpression' 类型的参数”

我理解错误是说 BinaryExpression 的类型是 System.Boolean 因此 BinaryExpression 是错误的类型，但我不知道我究竟从这里做什么？我希望我可以说我已经尝试了一些东西，但是除了将我的 BinaryExpression 传递给 lambda （我想这将使用内置的 Where 方法）之外，我真的想不出其他任何东西，但我认为这是不正确的。

任何想法如何解决这个问题？

# html - 如何在 html 编号列表中对齐两位数？

> ID：10411146
> 
> 赞同：0
> 
> 时间：2012-05-02T09:34:57.847
> 
> 标签：html, html-lists

如何在 html 编号列表中对齐两位数？我有一个列出 14 个项目的有序列表。在除 ie7 之外的所有浏览器中，它都可以正常工作。但在 IE7 中似乎删除了有序列表中两位数后的空格。

```
<ol>
<li>aaa</li>
<li>bbb</li>
<li>ccc</li>
 .....

</ol/> 
```

IE7中的输出就像

1.aaa
2.bbb
3.ccc
....
10.kkk
11.lll

我不知道为什么它从 10 开始删除点 (.) 之后的空格。
任何人请建议我一个解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:03:24.977

In css, you could try something along the lines of

```
ol{
  left-padding: 2em;
}
ol li{
  left-padding:0.5em;
} 
```

It might let you keep the spacing consistent between the number and the content of the `li`. I haven't seen anyone alter the alignment of the numbers in an `<ol>` in IE7.

Alternatively, if it's not a big pain you could add the numbers manually, something like

```
<ul>
  <li><em>1.</em>Apple</li>
  <li><em>2.</em>Banana</li>
  ...
  <li><em>14.</em>Orange</li>
</ul> 
```

And use css like:

```
li{
  list-style-type: none;
  clear: left;
}
li em{
  float: left;
  width: 2em;
  margin-right:0.5em;
  text-align: right;
} 
```

With that, you would have the effect you want.

# .net - 如何使用 LINQ to XML (XDocument) 修改 XML

> ID：10411148
> 
> 赞同：0
> 
> 时间：2012-05-02T09:35:05.080
> 
> 标签：.net, linq-to-xml

我有一个 xml 文档存储在服务器上的一个文件中，现在我想使用 Linq to Xml 修改它。这是我的代码：

```
String strFile = File.ReadAllText(Server.MapPath("~/SessionAnalyserAccessories.xml"));
XDocument xdoc1 = XDocument.Parse(strFile);
xdoc1.XPathSelectElement("SESSIONANALYSER/AP/MODES/NI/STATEINFORMATION/INIT/INPUT/METHOD").AddAfterSelf(new XElement("METHOD", "", new XAttribute("NAME", "Saurabh"))); 
```

我正在使用的 XML 示例，我需要添加一个元素**STATEINFORMATION**：

```
<SESSIONANALYSER>
  <AP>
    <MODES>
      <NI>
        <STATEINFORMATION TYPE="PREPAID">
          <INIT INVALIDINPUTRESPONSE="-2">
            <INPUT VALUE="SLN7ACTIVATION">
              <METHOD NAME="CHECKSUBSCRIBERBALANCE" PARAMETERS="SLN7" POSSIBLEACTIONS="FALLOUTON_FAILUREREGION_SETPSOFAILED_FALSE" MAINTAINSESSION="NO" RESPONSE="-4" NEXTLEVEL="" />
              <METHOD NAME="SETPSOINUCIP" PARAMETERS="SLN7" POSSIBLEACTIONS="FALLOUTON_FAILUREREGION_SETPSOFAILED_FALSE" MAINTAINSESSION="NO" RESPONSE="-4" NEXTLEVEL="" />
            </INPUT>
          </INIT>
        </STATEINFORMATION>
        <STATEINFORMATION TYPE="POSTPAID">
          <INIT INVALIDINPUTRESPONSE="-2">
            <INPUT VALUE="">
              <METHOD NAME="SENDMESSAGE" PARAMETERS="" POSSIBLEACTIONS="FALLOUTONSUCCESS" MAINTAINSESSION="NO" RESPONSE="5" NEXTLEVEL="" />
            </INPUT>
          </INIT>
        </STATEINFORMATION>
      </NI>
    </MODES>
  </AP>
</SESSIONANALYSER> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:04:48.483

我发现了一些链接，其中包含有关通过 LINQ 在 XML 树中添加元素的示例。

请访问这些：-

[http://msdn.microsoft.com/en-us/library/bb387083.aspx](http://msdn.microsoft.com/en-us/library/bb387083.aspx)

[http://msdn.microsoft.com/en-us/library/bb387084.aspx](http://msdn.microsoft.com/en-us/library/bb387084.aspx)

# javascript - 在javascript中比较字符串

> ID：10411150
> 
> 赞同：0
> 
> 时间：2012-05-02T09:35:15.267
> 
> 标签：javascript, string, compare

在 jquery ajax 函数中，我接收到服务器“true”或“false”字符串。然后我只知道结果，但只在 if 条件下得到错误。

```
 $.ajax({
    ...
        success: function(result) {
              if(result == "true"){   // false???????
                    alert('true');
                } else {
                    alert('false');
                }
             }
        })
    ... 
```

* * *

```
$.ajax({
...
    success: function(result) {
          var result2 = String(result); 
          alert(result2);          // true
          alert(typeof result2);   // String
          alert(typeof "true");    // String
          if(result2 == "true"){   // false???????
                alert('true');
            } else {
                alert('false');
            }
         }
    })
... 
```

...

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T09:39:21.573

“结果”中可能有换行符或额外的空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:36:49.207

唔，

一个空字符串，null、0和undefined都是false

`result2==="true"`是一个更好的测试

[演示](http://jsfiddle.net/mplungjan/VFSq4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-07T09:11:20.010

使用修剪（）函数...

例如：

$.ajax({

...

```
success: function(result) {
      var result2 = String(result.trim()); 
      alert(result2);          // true
      alert(typeof result2);   // String
      alert(typeof "true");    // String
      if(result2 == "true"){   // true
            alert('true');
        } else {
            alert('false');
        }
     }
}) 
```

...

# jquery - Yii 和 EGMap 扩展（谷歌地图）在复选框更改时刷新地图

> ID：10411152
> 
> 赞同：5
> 
> 时间：2012-05-02T09:35:19.500
> 
> 标签：jquery, google-maps, yii

[我正在使用Yii 框架](http://www.yiiframework.com/)和 Yii [egmap extension](http://www.yiiframework.com/extension/egmap)开发交互式地图。当用户单击如图所示的复选框时，我想刷新地图（ajax）： ![yii-egmap-screenshot](../Images/ca78b484560a44625f11140e86ee49fa.png) 我只能使用以下代码在服务器端（刷新整个页面）执行此操作：

```
<?php
    Yii::app()->clientScript->registerScript('filterscript',"
        $('#filter_all').click(function() {
            $(\"input[name='filter\[\]']\").prop('checked', this.checked);
            window.location.href = 'http://' + window.location.host + window.location.pathname + '?tags=sale,rent,residential,commercial,agricultural';
        });
        $(\"input[name='filter\[\]']\").click(function() {
            var tags = '?tags=';
            var tmp=new Array();
            $('#filter_all').prop('checked', !$(\"input[name='filter\[\]']:not(:checked)\").length);
            $('input[type=checkbox]').each(function () {
                if (this.checked) 
                    tmp.push($(this).val());

            });
            tags += tmp.join(',');
            window.location.href = 'http://' + window.location.host + window.location.pathname + tags;
        });
        $('#filter_all').prop('checked', !$(\"input[name='filter\[\]']:not(:checked)\").length);
    ",CClientScript::POS_READY);
?> 
```

并且地图是使用带有以下代码的 EGMap 扩展生成的：

```
<?php

// Get latlong from location-aware web browser saved in cookie
if (isset($_COOKIE['latlng'])){
    list($lat,$long) = explode(',',htmlentities(htmlspecialchars(strip_tags($_COOKIE['latlng']))));
}else{
    $lat = 3.159553312559541;
    $long = 101.71481802016604;
}
Yii::import('ext.gmap.*');

$gMap = new EGMap();
$gMap->setJsName('map');
$gMap->zoom = 10;
$mapTypeControlOptions = array(
    'sensor'=>true,
    'position'=> EGMapControlPosition::LEFT_BOTTOM,
    'style'=>EGMap::MAPTYPECONTROL_STYLE_DROPDOWN_MENU
);

$gMap->mapTypeControlOptions= $mapTypeControlOptions;
$gMap->setWidth('100%');
$gMap->setHeight(500);
$gMap->setCenter($lat, $long);

$icon = new EGMapMarkerImage("http://".$_SERVER['HTTP_HOST'].Yii::app()->baseUrl."/images/bighouse.png");

$icon->setSize(32, 37);
$icon->setAnchor(16, 16.5);
$icon->setOrigin(0, 0);

// Status label
$status_type = array(
    0=>'success',
    1=>'warning',
    2=>'important',
    3=>'important',
);

$condition = '';
$sale_cond = '';
$rent_cond = '';

if ($match['sale']==='' && $match['rent']==='' && $match['residential']==='' && $match['commercial']==='' && $match['agricultural']===''){
    $condition = "AND (
        (MATCH (tags) AGAINST ('sale') 
        AND MATCH (tags) AGAINST ('residential'))
        OR
        (MATCH (tags) AGAINST ('rent') 
        AND MATCH (tags) AGAINST ('residential') )
        OR
        (MATCH (tags) AGAINST ('sale') 
        AND MATCH (tags) AGAINST ('commercial'))
        OR
        (MATCH (tags) AGAINST ('rent') 
        AND MATCH (tags) AGAINST ('commercial') )
        OR
        (MATCH (tags) AGAINST ('sale') 
        AND MATCH (tags) AGAINST ('agricultural'))
        OR
        (MATCH (tags) AGAINST ('rent') 
        AND MATCH (tags) AGAINST ('agricultural') )
    )";
}else{
    if ($match['sale']!=''){
        $sale_cond = "MATCH (tags) AGAINST ('sale')";
        if ($match['residential']!=''){
            $cond[1] = "(".$sale_cond." AND MATCH (tags) AGAINST ('residential'))";
        }
        if ($match['commercial']!=''){
            $cond[2] = "(".$sale_cond." AND MATCH (tags) AGAINST ('commercial'))";
        }
        if ($match['agricultural']!=''){
            $cond[3] = "(".$sale_cond." AND MATCH (tags) AGAINST ('agricultural'))";
        }
        if ($match['residential']!='' || $match['commercial']!='' || $match['agricultural']!=''){
            $sale_cond = implode(' OR ', $cond);
        }
    }
    if ($match['rent']!=''){
        $rent_cond = "MATCH (tags) AGAINST ('rent')";
        if ($match['residential']!=''){
            $cond[1] = "(".$rent_cond." AND MATCH (tags) AGAINST ('residential'))";
        }
        if ($match['commercial']!=''){
            $cond[2] = "(".$rent_cond." AND MATCH (tags) AGAINST ('commercial'))";
        }
        if ($match['agricultural']!=''){
            $cond[3] = "(".$rent_cond." AND MATCH (tags) AGAINST ('agricultural'))";
        }
        if ($match['residential']!='' || $match['commercial']!='' || $match['agricultural']!=''){
            $rent_cond = implode(' OR ', $cond);
        }

    }
    if ($sale_cond!=''){
        $condition = 'AND '.$sale_cond;
        if ($rent_cond!=''){
            $condition .= ' OR '.$rent_cond;
        }
    }elseif ($rent_cond!=''){
        $condition = 'AND '.$rent_cond;
    }
}

$props = Property::model()->findAll('active=1 '.$condition);
if ($props!==null){
    foreach ($props as $prop){
        // Prepare status label for info box
        $status_label='<span class="label label-'.$status_type[(int)$prop['status']].'">'.$list_status[(int)$prop['status']].'</span>';
        $prop_photo = '';
        $win_height = '110px';
        // Check if photo exist
        if (is_file('images/property/'.$prop['photo'])){
            $prop_photo = '<img src="http://'.$_SERVER['HTTP_HOST'].Yii::app()->baseUrl.'/images/property/'.$prop['photo'].'" /><br />'; 
            $win_height = '310px';
        }

        $email_img = '<img src="http://'.$_SERVER['HTTP_HOST'].Yii::app()->baseUrl.'/site/strtoimg?pid='.$prop['id'].'" />';

        $view_link = '<div style="float:left"><a href="'.Yii::app()->baseUrl.'/public/view/'.$prop['id'].'">View this property</a></div>';
        $edit_link = '';
        if (!Yii::app()->user->isGuest && (int)$prop['user_id']===(int)Yii::app()->user->id){
            $edit_link = '<div style="float:right"><a href="'.Yii::app()->baseUrl.'/prop/update/'.$prop['id'].'">Edit this property</a></div>';
        }
        $links = '<div>'.$view_link.'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'.$edit_link.'</div>';

        $info_window = new EGMapInfoWindow('<div style="height:'.$win_height.'">'.
                $prop_photo.
                substr($prop['description'],0,40).'...'.'<br />'.
                'Price: '.$prop['price'].'<br />'.
                'Email: '.$email_img.'<br />'.
                'Tel: '.$prop['contact_phone'].'<br />'.
                $status_label.' Added: '.$prop['date_upload'].'<br />'.
                $links.
                '</div>');
        $marker = new EGMapMarker($prop['latitude'], $prop['longitude'], array('title' => $prop['title'],'icon'=>$icon));
        $marker->addHtmlInfoWindow($info_window);
        $gMap->addMarker($marker);
    }
}
$gMap->renderMap();

?> 
```

所有这些代码都在视图文件中。地图由 id 的 html 元素中的 EGMap 扩展生成`EGMapContainer0`。知道如何在单击复选框的情况下通过 ajax 刷新地图吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:08:20.303

我一直在使用这张地图，它很棒且易于使用，但它的问题是你不能使用它，`renderPartial`它根本不会渲染。唯一的解决方案是使用`Iframe`. Ajax 更新根本不起作用。

# c - Vala 的单元测试框架

> ID：10411153
> 
> 赞同：7
> 
> 时间：2012-05-02T09:35:19.763
> 
> 标签：c, unit-testing, vala

我正在考虑使用 Vala 开发应用程序。我想为我的代码编写单元测试——但我（到目前为止）还没有找到任何**积极维护**的 Vala 单元测试框架（例如 Valadate）。

谁能推荐一个与 Vala 一起使用的单元测试框架？

顺便说一句，考虑到 Vala 的相对“新”，Vala 是否可以被认为是生产就绪的——有没有在 Vala 开发的任何已知的企业应用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T05:55:03.607

Vala 中已经内置了一个简单的单元测试工具：[`GLib.Test`](http://valadoc.org/#!api=glib-2.0/GLib.Test).

Unity 是 Ubuntu 桌面的用户界面，部分是用 Vala 编写的（其余的是 C++。）

# vba - 删除 Excel 中具有零值的单元格

> ID：10411159
> 
> 赞同：3
> 
> 时间：2012-05-02T09:35:33.433
> 
> 标签：vba, excel

我一直在尝试删除/隐藏值等于零 (0) 的单元格。

```
Sub HideRows()
    Dim cell As Range, rng As Range
    Cells.Rows.Hidden = False

    On Error Resume Next
    Set rng = Columns(5).SpecialCells(xlConstants, xlNumbers)
    On Error GoTo 0

    For Each cell In rng
        If cell.Value = 0 Then
            cell.EntireRow.Hidden = True
        End If
    Next

End Sub 
```

该代码删除了整行。我想删除值和值的描述。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T09:45:44.903

此代码将快速清除（擦除）E 列中值为 0 的单元格中的值和注释

```
Sub Testme()
      Dim rng1 As Range
Set rng1 = Columns(5)
With rng1
    .AutoFilter 1, "0"
    With rng1.Offset
        .ClearContents
        .ClearComments
    End With
    With rng1.Offset(0, -1)
        .ClearContents
        .ClearComments
    End With
End With
End Sub 
```

# sencha-touch-2 - sencha touch 将数据插入本地存储

> ID：10411163
> 
> 赞同：1
> 
> 时间：2012-05-02T09:36:01.933
> 
> 标签：sencha-touch-2, sencha-architect

嗨，我发现了很多关于从 sencha 中的数据库加载数据的示例。我尝试用笔记制作一个列表，第二步我希望能够向我的数据库添加（保存）一个笔记。我在本地存储上尝试。

现在我从我的 Arraystore 中的数组加载数据。我应该在哪里设置我的代理？（在商店还是在模型中？）

如何在我的商店中插入数据？我在我当前的arraystore上尝试过类似的东西，但没有运气：（这是通过按下代码运行的代码）：

```
 MyArrayStore.add({title:"newnote",narrative:"bla bla bla",date:now,id:noteid});
    MyArrayStore.sync(); 
```

浏览器控制台出现错误：Uncaught ReferenceError: MyArrayStore is not defined 我应该创建我的商店的实例还是什么？

我的模型是这样的：thanx 的答案。我在建筑师身上试试。我的模型是这样的：

```
Ext.define('MyApp.model.NoteModel', {
    extend: 'Ext.data.Model',
    alias: 'model.NoteModel',
    config: {
        fields: [
            {
                name: 'id',
                type: 'int'
            },
            {
                name: 'date',
                type: 'date'
            },
            {
                name: 'title',
                type: 'string'
            },
            {
                name: 'narrative',
                type: 'string'
            }
        ],
        proxy: {
            type: 'localstorage',
            id: 'local'
        }
    }
}); 
```

我的商店是这样的：

```
Ext.define('MyApp.store.MyArrayStore', {
    extend: 'Ext.data.Store',
    requires: [
        'MyApp.model.NoteModel'
    ],

    config: {
        data: [
            {
                title: 'Note 1',
                narrative: 'test1 1'
            },
            {
                title: 'Note 2',
                narrative: 'narrative 2'
            },
            {
                title: '3 ertyyh',
                narrative: 'narrative 3'
            },
            {
                title: '4 asdf',
                narrative: 'narrative 4'
            },
            {
                title: 'Note 5',
                narrative: 'narrative 5'
            },
            {
                title: 'weadf',
                narrative: 'narrative 6'
            }
        ],
        model: 'MyApp.model.NoteModel',
        storeId: 'MyArrayStore'
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:43:06.970

您应该在模型或商店中设置代理。以下是如何在您的模型中执行此操作。

```
Ext.define('MyModel', {

extend: 'Ext.data.Model',

config: {
    fields: ['field1'],
    proxy: {
        type: 'localstorage',
        id  : 'my-model-localstorage-id'
    }
}); 
```

也可以在您的商店中进行相同的操作。

之后，鉴于“MyArrayStore”是此类商店的一个实例，您建议的代码应该可以正常工作。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T12:23:13.423

如果您想访问您的商店（您在问题中更新的商店），那么您可以使用：

```
Ext.StoreManager.get('MyArrayStore') 
```

因此，例如，您想要执行的操作可以通过以下方式完成：

```
var store=Ext.StoreManager.get('MyArrayStore');
store.add({title:"newnote",narrative:"bla bla bla",date:now,id:noteid});
store.sync(); 
```

# java - JavaFX 2.0 使用事件处理程序加载 fxml 文件失败

> ID：10411164
> 
> 赞同：3
> 
> 时间：2012-05-02T09:36:02.560
> 
> 标签：java, javafx-2, fxml

我正在尝试从子文件夹加载 fxml，但它失败了。我有使替换场景内容的行：

```
private Parent replaceSceneContent(String fxml) throws Exception {
        Parent page = (Parent) FXMLLoader.load(App.class.getResource("skinFolder/fxml/"+fxml), null, new JavaFXBuilderFactory());
        Scene scene = stage.getScene();
        if (scene == null) {
            scene = new Scene(page, 700, 450);
            scene.getStylesheets().add(App.class.getResource("skinFolder/css/defaultSkin.css").toExternalForm());
            stage.setScene(scene);
        } else {
            stage.getScene().setRoot(page);
        }
        stage.sizeToScene();
        return page;
    } 
```

我在下一个方法中使用这个函数：

```
private void gotoLogin() {
        try {
            replaceSceneContent("login.fxml");
        } catch (Exception ex) {
            Logger.getLogger(App.class.getName()).log(Level.SEVERE, null, ex);
        }
    } 
```

问题是我得到了下一个错误：

```
javafx.fxml.LoadException: Method processLogin() does not have the correct signature for an event handler.
    at javafx.fxml.FXMLLoader$Element.processEventHandlerAttributes(Unknown Source)
    at javafx.fxml.FXMLLoader$ValueElement.processEndElement(Unknown Source)
    at javafx.fxml.FXMLLoader.processEndElement(Unknown Source)
    at javafx.fxml.FXMLLoader.load(Unknown Source)
    at javafx.fxml.FXMLLoader.load(Unknown Source)
    at Main.App.replaceSceneContent(App.java:115)
    at Main.App.gotoLogin(App.java:108)
    at Main.App.start(App.java:72)
    at com.sun.javafx.application.LauncherImpl$5.run(Unknown Source)
    at com.sun.javafx.application.PlatformImpl$4.run(Unknown Source)
    at com.sun.javafx.application.PlatformImpl$3.run(Unknown Source)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(Unknown Source)
    at com.sun.glass.ui.win.WinApplication$2$1.run(Unknown Source)
    at java.lang.Thread.run(Thread.java:722) 
```

任何人都知道我需要修复什么，以便我可以使这个替换场景内容正常工作？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T11:07:40.267

`Button`如果您在 FXML 文件中定义如下操作：

```
 <Button text="Login" onAction="#processLogin"/> 
```

那么您必须在控制器类中定义一个方法，如下所示。注意签名`processLogin`：

```
 @FXML
    private void processLogin(javafx.event.ActionEvent event) {
        // Process Login
    } 
```

# c# - winmd 文件的版本 255.255.255.255 表示什么？

> ID：10411168
> 
> 赞同：6
> 
> 时间：2012-05-02T09:36:13.153
> 
> 标签：c#, .net, windows-8, windows-runtime

我注意到大多数（全部？）**.winmd**文件的版本为**255.255.255.255** ，例如：

**Windows，版本=255.255.255.255，文化=中性，PublicKeyToken=null**

Metro 应用程序使用此版本号引用此类程序集。

* * *

进一步的 Windows.winmd 本身引用：

**mscorlib，版本=255.255.255.255，文化=中性，PublicKeyToken=b77a5c561934e089**

但是，据我所知，不存在具有此版本号的程序集。

这个版本号有什么特殊含义吗？有这方面的文件吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T14:22:41.860

ECMA 335 程序集需要有一个版本号。但是 windows 运行时类型解析算法不使用版本号，因此创建 winmd 格式的团队选择了任意版本号 255.255.255.255 作为程序集版本号。

这有助于确保在进行类型解析时没有人尝试使用 .Net 类型解析算法（它并不完美，不幸的是，有些工具仍然使用 .Net 类型解析算法）。

哦，mscorlib 参考是一个形式参考——ECMA 335 要求所有 typeref 都具有相应的 assemblyref，并且 WINMD 文件格式选择将 typerefs 用于某些 ECMA 335 类型作为特定类型的指示符。例如，winrt“enum”构造表示为扩展“System.Enum”的类型 - 对于 winmd 文件，“System.Enum”部分只是一个字符串（它可能是任何东西），不能解析为一个真正的类型。该字符串在元数据中表示为 typeref 并且 typerefs 必须有一个 assemblyref - 我们选择使用 System.Enum 的 mscorlib 版本作为枚举的 assemblyref，因为它很方便。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T10:19:13.313

请记住，.winmd 文件包含 WinRT 接口的元数据。Windows 不能假定将使用任何特定版本的 .NET。Windows 8 将比 .NET 4.5 长很多

.NET 项目也不能假定它将在任何特定版本的 Windows 上运行。它应该在 Windows 8 上和在 Windows 10 上一样好。

所以将 255.255.255.255 解释为“任何版本”。

# c - 将 c 代码移植到 actionscript 2

> ID：10411170
> 
> 赞同：0
> 
> 时间：2012-05-02T09:36:16.670
> 
> 标签：c, flash, duplicates, permutation, porting

请看下面的链接。 [字符串字母的排列：如何去除重复排列？](https://stackoverflow.com/questions/6917832/permutation-of-string-letters-how-to-remove-repeated-permutations)

我想将此移植到 actionscript 2。这是我到目前为止所拥有的：

```
var str:String = "AAC";
var arr:Array = str.split("");

permute(0,2);

function swap(i:Number, j:Number)
{
    var temp;
    temp = arr[i];
    arr[i] = arr[j];
    arr[j] = temp;
}

function permute(i:Number, n:Number)
{
   var k:Number;

   if (i == n)
     trace(arr);
   else
   {
        for (k = i; k <= n; k++)
       {
              swap(i, k);
              permute(i+1, n);
              swap(i, k);           
       }
   }
} 
```

这可以很好地列出所有具有重复项的排列，但我想删除这些并具有唯一值。到目前为止，我还没有设法从上述链接移植勾选的解决方案。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:17:10.300

下面是两个版本，第一个是针对 AS3 的，第二个是针对 AS2 的。这是一种稍微不同的算法（它的效率比你所拥有的要低一些，但我认为它可以作为一个例子）。它本质上是相同的算法复杂性，所以没关系，冗余在于生成中间结果（较短的数组），这些结果稍后会被丢弃（但如果这与您有关，您可以修改它以重用这些数组）。

AS3

```
private function permuteRecursively(input:Array, 
    hash:Object = null):Array
{
    var first:String;
    var oldResult:Array;
    var newResult:Array;
    var times:int;
    var current:Array;
    var test:String;

    if (input.length > 1)
    {
        first = input.shift();
        if (!hash) hash = { };
        oldResult = this.permuteRecursively(input, hash);
        newResult = [];
        for each (var result:Array in oldResult)
        {
            times = result.length;
            while (times >= 0)
            {
                current = result.concat();
                if (times == result.length) current.push(first);
                else current.splice(times, 0, first);
                test = current.join("");
                if (!(test in hash))
                {
                    newResult.push(current);
                    hash[test] = 1;
                }
                times--;
            }
        }
    }
    else newResult = [input];
    return newResult;
} 
```

AS2：

```
private function permuteRecursively(input:Array, 
    hash:Object):Array
{
    var first:String;
    var oldResult:Array;
    var newResult:Array;
    var times:Number;
    var current:Array;
    var test:String;
    var result:Array;

    if (input.length > 1)
    {
        first = input.shift();
        if (!hash) hash = { };
        oldResult = this.permuteRecursively(input, hash);
        newResult = [];
        for (var i:Number = 0; i < oldResult.length; i++)
        {
            result = oldResult[i];
            times = result.length;
            while (times >= 0)
            {
                current = result.concat();
                if (times == result.length) current.push(first);
                else current.splice(times, 0, first);
                test = current.join("");
                if (!(test in hash))
                {
                    newResult.push(current);
                    hash[test] = 1;
                }
                times--;
            }
        }
    }
    else newResult = [input];
    return newResult;
} 
```

**编辑：**

实际上，现在我想起来了，我不确定你试图避免什么样的重复。上面的代码将 AAC 的排列（例如 AAC 和 ACA来自原始数组中的不同来源）。

如果您想删除生成数组的重复元素，那么显然，最好的策略是首先从源中删除它们。

# xml - 如何在 c# .net 中为 windows phone 7 应用程序压缩和解压缩 Xml？

> ID：10411171
> 
> 赞同：0
> 
> 时间：2012-05-02T09:36:28.353
> 
> 标签：xml, windows-phone-7

我正在开发一个 windows phone 7 应用程序，我的服务给出了一个响应 xml（字符串），我在客户端（windows phone 7 应用程序）使用它

我的痛点是 xml 大小太大（数据包大小非常大），正在从服务端传输到客户端。

所以现在，我想压缩作为服务响应的 xml，并在客户端解压缩并使用它。

你能告诉我如何实现这个吗？

提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:06:17.410

您可以使用 GZipWebClient，如以下博客文章“请使用 GZip 发布您的下一个 Windows Phone 应用程序：速度请求 50-80%”中所述：-

[http://www.jeff.wilcox.name/2012/01/windows-phone-gzip-support-by-morten/](http://www.jeff.wilcox.name/2012/01/windows-phone-gzip-support-by-morten/)

# node.js - 所有nodejs事件API的任何文档？

> ID：10411174
> 
> 赞同：3
> 
> 时间：2012-05-02T09:36:43.620
> 
> 标签：node.js, documentation

我看到了一些代码片段，如下所示：

```
process.stdin.on('keypress', function(c, key){          
if (key && 'enter' == key.name) { 
```

但遗憾的是，我在's 的文档中找不到任何关于如何使用`keypress`事件的信息。显然它与浏览器中`node`的事件不同。`keypress`此外，没有介绍什么是`key`对象，所以我不知道如何使用`key.xxx`或`key.name == xxx`检测哪个键用户正在按下。

我想念什么？一定有地方我可以找到如何使用`node`...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T10:18:52.657

就像您提到的那样，节点文档在这方面似乎非常缺乏。

我发现的唯一参考是在浏览[“readline”模块](https://github.com/joyent/node/blob/master/lib/readline.js#L840)的源代码时：

```
function emitKey(stream, s) {
    var ch,
    key = {
        name: undefined,
        ctrl: false,
        meta: false,
        shift: false
    }, 
```

依此类推，基本上是名称，如果按下 ctrl，如果按下 shift，以及一些元数据。

毫无疑问，文档需要一些工作:)

# python - 用python衡量内存的使用情况

> ID：10411181
> 
> 赞同：1
> 
> 时间：2012-05-02T09:37:04.960
> 
> 标签：python, memory-management

> **可能重复：**
> [Python 内存分析器](https://stackoverflow.com/questions/110259/python-memory-profiler)

我编写了一个 python 脚本，它从另一个模块调用函数但使用大量内存。是否有一个函数可以测量一段代码使用的内存大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:41:18.927

你试过[http://pysizer.8325.org/](http://pysizer.8325.org/)吗？还有： http: [//guppy-pe.sourceforge.net/#Heapy](http://guppy-pe.sourceforge.net/#Heapy)

# ios - 用我的手指移动一个 UIView

> ID：10411182
> 
> 赞同：2
> 
> 时间：2012-05-02T09:37:07.377
> 
> 标签：ios, uiview, move, touchesbegan

我正在尝试移动位于另一个 UIView 之上的 UIView（我们称之为 viewA）（我们称之为 viewB）。viewB 有 iPad 屏幕的大小，而 view A 要小得多。

我设法移动东西，但整个屏幕移动（viewA + viewB），而不仅仅是viewA。

这是我的 viewA 类代码：

```

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
        UITouch *touch = [[event allTouches] anyObject];
        CGPoint touchLocation = [touch locationInView:self->view];
        if (CGRectContainsPoint(self.window.frame, touchLocation)) {
            拖动=是；
            oldY = touchLocation.y;
        }
    }    

`- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint touchLocation = [touch locationInView:self->view];
    if (dragging) {
        CGRect frame = self.window.frame;
        frame.origin.y =  self.window.frame.origin.y + touchLocation.y - oldY;
        self.window.frame = frame;
    }
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    dragging = NO;
}` 

我不明白的是，我在 viewA 类中实现了这些方法。“我”应该关注这个viewA吧？那么为什么当我的手指在屏幕上移动时整个页面都会移动呢？

            回答 #1

赞同：2

时间：2012-05-02T09:47:19.970

您正在移动包含所有视图的整个窗口，您应该只移动您想要的视图，在您的情况下为 viewA。

```

# jquery - 如何使用jquery检查元素的背景颜色

> ID：10411187
> 
> 赞同：8
> 
> 时间：2012-05-02T09:37:35.640
> 
> 标签：jquery, css, background-color

```
if($(this).css("background-color")==Crimson) 
```

它是否正确 ？.css("background-color","white") 会改变颜色，但我不想改变，我想知道它是什么颜色。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-02T09:45:18.430

它像这样工作

`if ($("#notify-9").css('background-color')=="rgb(220, 20, 60)") alert("matched");`

您需要将名称转换为红色、绿色、蓝色组件，您可以使用此工具

[http://www.yellowpipe.com/yis/tools/hex-to-rgb/color-converter.php](http://www.yellowpipe.com/yis/tools/hex-to-rgb/color-converter.php)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T09:39:20.163

使用引号`""`或`''`：

```
if($(this).css("background-color")=="Crimson") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T09:39:10.040

在颜色名称周围使用引号：

```
if( $(this).css("background-color") == "Crimson" ) 
```

否则是对的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-08T12:09:31.213

只需使用以下行

```
if($(this).css("background-color")=="crimson") 
```

因为`css("background-color")`属性结果将是小写字母。因此，如果您将明显地与资本进行比较，它将返回错误。:) 小技巧希望有用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-27T19:44:22.837

JavaScript 中可能的答案是这样的：

```
if(window.getComputedStyle(document.getElementById("notify-9"),null).getPropertyValue("background-color") == "rgb(220, 20, 60)"){
   alert("matched!");
} 
```

// rgb(220, 20, 60) 等于 Crimson

# php - 如何在文本框中删除自动完成

> ID：10411188
> 
> 赞同：2
> 
> 时间：2012-05-02T09:37:40.677
> 
> 标签：php, html

我需要在我的页面中删除所有文本框中的自动完成功能，所以我给出了 <`input name="txt_username" id="txt_username" type="text" value="" autocomplete="off" /></dd></dl>`

但它不起作用有人知道吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T09:41:57.130

Autocomplete, unless you're doing something crazy with AJAX, is a client-side thing and you can't always control it like that.

Since autocomplete works by caching your previous entries for a **specific input text name**, many banks randomly generate the input text name *at each form page load* but keep track of what is generated either somewhere else in a hidden input element or on the server side.

So instead of

```
<input name="txt_username" id="txt_username" type="text" value="" autocomplete="off" /> 
```

It might be something like

```
<input type="text" name="f6Lx571p" id="txt_username"/>
<input type="hidden" name="username_key" value="f6Lx571p" /> 
```

And the server-side code adjusted accordingly. For example, PHP code might have looked like:

```
<?php
$user = $_POST['txt_username'];
... 
```

but it would have to be changed to something like:

```
<?php
$user = $_POST[$_POST['username_key']];
... 
```

Its a bit annoying, but it works.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-23T18:36:36.560

无法关闭自动完成功能，它来自浏览器，但我认为这一定有帮助：`<input type="password" name="password" readonly onfocus="this.removeAttribute('readonly')">`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T09:43:45.943

You can also try placing that `autocomplete` attribute on the form element.

```
<form id="myForm" autocomplete="off">
  ...
</form> 
```

This will probably invalidate your HTML so you might want to consider adding this attribute dynamically with JavaScript.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-02T09:44:47.200

Autocomplete cannot be turned off, it's something from the browser. What I do if I want to turn off autocomplete is the following:

Start a session with a field name and random number:

```
session_start();
$_SESSION['strUsername'] = "username_" . mt_rand(0, 1000000); 
```

Now use this variable as the field's name:

```
name="' . $_SESSION['strUsername'] . '" id="txt_username" type="text" value="" autocomplete="off" /></dd></dl> 
```

To check the value of the field simply use

```
$username = $_POST[$_SESSION['strUsername']]; 
```

Now, the name will be random everytime, so the browser will not recognize the field and will not give the autocompletion.

# python - 异步请求超时。我应该如何解决这个错误？

> ID：10411189
> 
> 赞同：1
> 
> 时间：2012-05-02T09:37:53.940
> 
> 标签：python, multithreading, twisted

我有一个脚本在我的旧 Windows XP 计算机上运行良好，但我需要让它在 Windows 7 上运行。所以我已经安装了所有需要的模块和 Cie。但我仍然遇到一些奇怪的错误，经过五个小时查看互联网，我想这里的一些好人可以帮助我。

所以这是我的脚本有问题的功能：

```
from gevent import monkey
import gevent
import requests
from requests import async
import xlwt
from bs4 import BeautifulSoup as soup
from urllib2 import urlopen
import time
from twisted.web import client
from twisted.internet import reactor, defer
import re
import os
import urllib
import random
import sys
import re
import logging
from threading import RLock

logging.basicConfig(level=logging.INFO)
log = logging.getLogger()

from grab.spider import Spider, Task

def BULATS_TC():
    ''' FETCHING BULATS AGENTS '''
    x = 0
    START_BULATS_TC = time.time()
    ws = wb.add_sheet("BULATS_AGENTS")
    Page_List = ['0','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19', '20']
    to_send = []

    def parse(response):
        global x
        html = soup(response.text)
        tableau = html.find('table')
        try:
            rows = tableau.findAll('tr')
            for tr in rows:
                cols = tr.findAll('td')
                y = 0
                x = x + 1
                for td in cols:
                    texte_bu = td.text
                    texte_bu = texte_bu.encode('utf-8')
                    texte_bu = texte_bu.strip()
                    ws.write(x,y,texte_bu)
                    y = y + 1
        except (IndexError, AttributeError):
            pass

    for Page in Page_List:
        r = requests.async.get('http://www.bulats.org/agents/find-an-agent?field_continent_tid=All&field_country_tid=All&page=%s' % Page, timeout=20)
        to_send.append(r)

    responses = requests.async.map(to_send)
    parse_jobs = [gevent.spawn(parse, resp) for resp in responses]
    gevent.joinall(parse_jobs)

    ELAPSED_TIME_BULATS_AGENTS = time.time() - START_BULATS_TC
    return ELAPSED_TIME_BULATS_AGENTS 
```

这是我在终端中遇到的错误：

```
exceptions.IOError: [Errno 0] No error
Restarting gevent.core.dispatch() after an error [1928]: [Errno 0] No error
Unhandled Error
Traceback (most recent call last):
  File "C:\Users\Admin\Desktop\EAGLE_DATA_UPDATE.py", line 509, in <module>
    BULATS_IA_TIME = BULATS_IA()
  File "C:\Users\Admin\Desktop\EAGLE_DATA_UPDATE.py", line 430, in BULATS_IA
    reactor.run()
  File "C:\Python27\lib\site-packages\twisted\internet\base.py", line 1169, in r
un
    self.mainLoop()
--- <exception caught here> ---
  File "C:\Python27\lib\site-packages\twisted\internet\base.py", line 1181, in m
ainLoop
    self.doIteration(t)
  File "C:\Python27\lib\site-packages\twisted\internet\selectreactor.py", line 1
04, in doSelect
    [], timeout)
  File "C:\Python27\lib\site-packages\twisted\internet\selectreactor.py", line 3
6, in win32select
    r, w, e = select.select(r, w, w, timeout)
  File "C:\Python27\lib\site-packages\gevent\select.py", line 63, in select
    result.event.wait(timeout=timeout)
  File "C:\Python27\lib\site-packages\gevent\event.py", line 74, in wait
    result = get_hub().switch()
  File "C:\Python27\lib\site-packages\gevent\hub.py", line 164, in switch
    return greenlet.switch(self)
  File "C:\Python27\lib\site-packages\gevent\hub.py", line 179, in run
    result = core.dispatch()
  File "core.pyx", line 398, in gevent.core.dispatch (gevent/core.c:5404)

exceptions.IOError: [Errno 0] No error
Restarting gevent.core.dispatch() after an error [1929]: [Errno 0] No error
Unhandled error in Deferred:
Unhandled Error
Traceback (most recent call last):
Failure: twisted.internet.defer.FirstError: FirstError[#2, [Failure instance: Tr
aceback (failure with no frames): <class 'twisted.internet.error.TimeoutError'>:
 User timeout caused connection failure.
]] 
```

我认为我的连接不是*很*稳定（我在中国），所以也许我需要设置一个更大的超时时间，但是对于请求和我的脚本，我不知道如何进行。

我希望这一切都足够清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T01:43:17.153

我终于通过重新安装 Twisted 让它工作了。

# java - 如何在拖放过程中显示图标

> ID：10411191
> 
> 赞同：1
> 
> 时间：2012-05-02T09:38:10.743
> 
> 标签：java, swing, drag-and-drop, icons, netbeans-platform

我正在开发一些 NetBeans 平台应用程序，并且我目前停留在 Visual Library 中的一些细节上。好的，这里有问题。我的应用程序有可视化编辑器，带有托盘、场景，一切都很好，只是当我将图标从托盘拖到场景时出现问题。它们在拖动事件期间不显示，我想创建那种效果，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T10:48:25.160

我分两个阶段执行此操作：

1) 创建调色板元素的屏幕截图（图像）。我懒惰地创建屏幕截图，然后将其缓存在视图中。要创建屏幕截图，您可以使用以下代码段：

```
screenshot = new BufferedImage(getWidth(), getHeight(), java.awt.image.BufferedImage.TYPE_INT_ARGB_PRE);// buffered image
// creating the graphics for buffered image
Graphics2D graphics = screenshot.createGraphics();
// We make the screenshot slightly transparent
graphics.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.7f)); 
view.print(graphics); // takes the screenshot
graphics.dispose(); 
```

2) 在接收视图上绘制屏幕截图。当识别到拖动手势时，找到一种方法使屏幕截图可用于接收视图或其祖先之一（您可以使其在框架或其内容窗格上可用，具体取决于您要使屏幕截图拖动可用的位置）并在paint方法中绘制图像。像这样的东西：

一个。使屏幕截图可用：

```
capturedDraggedNodeImage = view.getScreenshot(); // Transfer the screenshot
dragOrigin = SwingUtilities.convertPoint(e.getComponent(), e.getDragOrigin(), view); // locate the point where the click was made 
```

湾。随着鼠标的拖动，更新截图的位置

```
// Assuming 'e' is a DropTargetDragEvent and 'this' is where you want to paint
// Convert the event point to this component coordinates
capturedNodeLocation = SwingUtilities.convertPoint(((DropTarget) e.getSource()).getComponent(), e.getLocation(), this);
// offset the location by the original point of drag on the palette element view
capturedNodeLocation.x -= dragOrigin.x;
capturedNodeLocation.y -= dragOrigin.y;
// Invoke repaint
repaint(capturedNodeLocation.x, capturedNodeLocation.y, 
   capturedDraggedNodeImage.getWidth(), capturedDraggedNodeImage.getHeight()); 
```

C。在paint方法中绘制屏幕截图：

```
public void paint(Graphics g) {
    super.paint(g);
    Graphics2D g2 = (Graphics2D) g;
    g2.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
    g2.drawImage(capturedDraggedNodeImage, capturedNodeLocation.x, 
        capturedNodeLocation.y, capturedDraggedNodeImage.getWidth(), 
        capturedDraggedNodeImage.getHeight(), this);
} 
```

您可以在鼠标移动时调用paintImmediately()，而不是调用repaint() 并在paint() 方法中执行绘画，但是渲染效果会差很多，并且您可能会观察到一些闪烁，因此我不推荐该选项。使用paint() 和repaint() 可以提供更好的用户体验和流畅的渲染。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:31:38.187

如果我没听错，您正在创建某种图形编辑器，带有拖放元素，并且您想在拖放期间创建效果？

如果是这样，您基本上需要创建您正在拖动的对象的幻影并将其附加到鼠标的移动中。当然，说起来容易做起来难，但你明白了要点。所以你需要的是把你拖动的东西拍下来（应该不会太麻烦），然后根据鼠标的位置移动它（想想你在对象中减去鼠标光标的相对位置） '正在拖动）。

但我认为这种代码在某处可用。我建议你查一下：http:
[//free-the-pixel.blogspot.fr/2010/04/ghost-drag-and-drop-over-multiple.html](http://free-the-pixel.blogspot.fr/2010/04/ghost-drag-and-drop-over-multiple.html)
[http://codeidol.com/java /swing/拖放/半透明拖放/](http://codeidol.com/java/swing/Drag-and-Drop/Translucent-Drag-and-Drop/)

希望对你有帮助！

# java - 如何检测 JScrollPane 的滚动条是否改变了可见性？

> ID：10411197
> 
> 赞同：9
> 
> 时间：2012-05-02T09:38:44.627
> 
> 标签：java, swing, jscrollpane, jscrollbar

我有 JScrollPane，其中包含水平行中的一些图像。如果图像行对于视口来说太长，JScrollPane 会显示一个滚动条，从而降低视口的高度。我想调整图像大小以适应视口。我怎样才能检测到视口改变了它的大小？不幸的是，注册更改事件处理程序似乎不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-02T09:50:16.217

在 ViewPort 上使用更改侦听器似乎对我有用。这是一个小演示：

```
import java.awt.BorderLayout;
import java.io.UnsupportedEncodingException;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingWorker;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class Main {

    public static void main(String[] args) throws UnsupportedEncodingException {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel(new BorderLayout());
        final JPanel buttons = new JPanel();
        final JScrollPane pane = new JScrollPane(buttons);
        pane.getViewport().addChangeListener(new ChangeListener() {

            @Override
            public void stateChanged(ChangeEvent e) {
                System.err.println("Change in " + e.getSource());
                System.err.println("Vertical visible? " + pane.getVerticalScrollBar().isVisible());
                System.err.println("Horizontal visible? " + pane.getHorizontalScrollBar().isVisible());
            }
        });
        panel.add(pane);
        frame.setContentPane(panel);
        frame.setSize(300, 200);
        frame.setVisible(true);
        SwingWorker<Void, Void> worker = new SwingWorker<Void, Void>() {

            @Override
            protected Void doInBackground() throws Exception {
                for (int i = 0; i < 10; i++) {
                    Thread.sleep(800);
                    buttons.add(new JButton("Hello " + i));
                    buttons.revalidate();
                }
                return null;
            }
        };
        worker.execute();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-10T18:03:45.060

我用[`HierarchyBoundsListener`](https://docs.oracle.com/javase/7/docs/api/java/awt/event/HierarchyBoundsListener.html)来检测 JScrollPane 大小的变化：

```
onAncestorResized(scroll, evt -> resizeYourImages()); 
```

这是附加侦听器的便捷方法：

```
static void onAncestorResized(JComponent component, Consumer<HierarchyEvent> callback) {
    component.addHierarchyBoundsListener(new HierarchyBoundsAdapter() {
        @Override
        public void ancestorResized(HierarchyEvent e) {
            callback.accept(e);
        }
    });
} 
```

# php - PDO -> 查询返回 null

> ID：10411199
> 
> 赞同：0
> 
> 时间：2012-05-02T09:38:49.837
> 
> 标签：php, pdo

`$dbh->query`适用于`$queryUser = $dbh->query`，但不适用于`$querySessions = $dbh->query`，`$querySessions`为空，

`echo $querySessions == null;`回声 1

进而

> 致命错误：在 /path/to/file.php 中的非对象上调用成员函数 fetchAll() 在线 (while(count($querySessions->fetchAll()) != 0))

```
 if($_POST['loginbtn'])
        {
            $User = $_POST['user'];
            $Pass = md5(md5("salt" . $_POST['pass'] . "salt2"));
            if($User)
            {
                if($_POST['pass'])//not $Pass because thats hashed
                {
                    $queryUser = $dbh->query("SELECT * FROM `Users` WHERE `UserName` = '" . base64_encode($User) . "' LIMIT 1");
                    $Record = $queryUser->fetch();
                    if($Pass != $Record["Password"])
                    {
                        echo "Incorect password.";
                    }
                    else
                    {
                        if($Record["Banned"] == 1)
                        {
                            echo "Sorry, your banned.";
                        }
                        else
                        {
                            if($Record["NeedsActivation"] == 1)
                            {
                                echo "You must activate your account before you can login.";
                            }
                            else
                            {
                                $SID = md5(rand(0,0x7fffffff) . "salt3");

                                $querySessions = $dbh->query("SELECT * FROM `Sessions` WHERE `ID` = " . $SID . " LIMIT 1");
                                echo $querySessions == null;
                                while(count($querySessions->fetchAll()) != 0)
                                {
                                    $SID = md5(rand(0,0x7fffffff) . "salt2");

                                    $querySessions = $dbh->query("SELECT * FROM `Sessions` WHERE `ID` = " . $SID . " LIMIT 1");
                                }
                                $_SESSION['id'] = $SID;
                                $dbh->query("INSERT INTO  `godzchea_Site`.`Sessions` (`ID` ,`UserID`)VALUES ('" . $SID . "',  '" . $Record["ID"] . "');");
                                echo base64_decode($Record["UserName"]) . " Logged in.";
                            }
                        }
                    }
                }
                else
                {
                    echo "You must enter your password.";
                }
            }
            else
            {
                echo "You must enter your username.";
            }
        } 
```

你们中的任何人都可以看到为什么它被设置为null，以及是否有更好的循环方法，直到我得到一个空的id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:48:39.760

问题在于，与该查询相关联的查询`$querySession`是失败的。您的查询中可能有错误，因为手册说的是：

```
PDO::query() returns a PDOStatement object, or FALSE on failure. 
```

我不确定，但也可能是没有找到行。我可以给你的一个建议是，找出真正的错误是：

1.  你把你所有的 PDO 代码放在一个 try catch 块中，比如：`try{/*code in here*/}catch(PDOException $e){ exit($e->getMessage()); }`然后看看它输出了什么。
2.  获取查询和值`$SID`并尝试将其运行到 phpmyadmin 中，直接运行到数据库中。

*请注意，致命错误还与您的查询返回 false 而不是对象这一事实有关。该错误只是说您将`$querySession`其视为对象，但事实并非如此。*

有关更多信息，请发表评论，我会回答。

祝你好运。

# c# - mvc 应用程序在一种情况后自动重启，这不会引发错误左右

> ID：10411201
> 
> 赞同：1
> 
> 时间：2012-05-02T09:38:57.873
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-3

我做了一些步骤，之后我的应用程序自动重新启动。怎么可能？请，任何人都可以建议一些东西来调试该员工并理解 - 这种奇怪行为的原因是什么。

也不例外，日志很清楚。应用程序将 autofac 用于 DI。请随时问我任何其他问题。解决这个问题对我来说非常重要。多谢。

**UPD：**此方法引起的问题。如果我删除它 - 一切正常。

```
public void DeleteUserPreviewDir()
{
    string path = GetUserPreviewDir();
    Action<string> del = null;
    del = s => {
                    string[] files = Directory.GetFiles(s);
                    string[] dirs = Directory.GetDirectories(s);

                    foreach (string file in files)
                    {
                        File.SetAttributes(file, FileAttributes.Normal);
                        File.Delete(file);
                    }

                    foreach (string dir in dirs)
                    {
                        del(dir);
                    }

                    Directory.Delete(s, false);
              };
    del(path);
} 
```

但是 UserPreviewDir 放在根 web 文件夹下，而不是 bin 文件夹中。文件结构如下： root\tempfiles\folder_which_delete bin dir 放在 root\bin

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:50:34.877

ASP.NET 应用程序可能重新启动的原因有多种：

*   在一段时间不活动后，IIS 可以简单地回收应用程序池（这段时间可以在应用程序池的属性中配置）
*   您的应用程序达到一定的内存或 CPU 使用阈值，IIS 将回收它（这些阈值可在 IIS 中配置）
*   您已更新`web.config`或某些位于`bin`文件夹中的程序集（添加了程序集、更新了现有程序集、删除了程序集）。
*   您已更新`Global.asax`根文件夹中的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T12:53:12.710

这种行为的原因是我正在删除站点子文件夹。为什么应用程序回收 - 这仍然是未知数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-18T14:48:34.063

我也有类似的问题，为了找出重启的原因，您可以使用以下代码（只需将其放入 Global.asax.cs 并更改`m_logger.Fatal`为您用于记录的任何内容）：

```
protected void Application_EndRequest()
{
    HttpRuntime runtime = (HttpRuntime)typeof(HttpRuntime).InvokeMember("_theRuntime", BindingFlags.NonPublic | BindingFlags.Static | BindingFlags.GetField, null, null, null);

    if (runtime == null)
    {
        BindingFlags bindingFlags = BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.GetField;
        string shutDownMessage = (string) runtime.GetType().InvokeMember("_shutDownMessage",
            bindingFlags,
            null,
            runtime,
            null);
        string shutDownStack = (string) runtime.GetType().InvokeMember("_shutDownStack",
            bindingFlags,
            null,
            runtime,
            null);

        if (!String.IsNullOrEmpty(shutDownMessage))
            m_logger.Fatal(String.Format("_shutDownMessage={0}\r\n\r\n_shutDownStack={1}", shutDownMessage, shutDownStack));
    }
} 
```

# php - 这个编程任务的模式（PHP）？

> ID：10411206
> 
> 赞同：0
> 
> 时间：2012-05-02T09:39:16.767
> 
> 标签：php, function, design-patterns

我有一些共享大量代码的功能。但是，某些代码因每种方法而异，无法封装。这是一个例子：

```
public function function1(){
    same code
    same code1
    this differs
    same code2
    this differs
    same code 3
}

public function function2(){
    same code
    same code1
    this differs
    this differs
    same code 3
} 
```

所以我的想法是提取与我在每个函数中调用的其他一些函数相同的代码。有没有更好的方法来解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:49:48.677

第一步：将重复的代码移动到它自己的函数中：

```
public function function1(){
    $this->sameCodeCode1();
    this differs
    same code2
    this differs
    $this->sameCode3();
}

public function function2(){
    $this->sameCodeCode1();
    this differs
    this differs
    $this->sameCode3();
} 
```

然后再次对其进行迭代，因为可以看出您所谓的*相同 code2* 也是不同之处：

```
public function function1() {
    $this->inverse(function() {
        this differs
        same code2
        this differs
    });
}

public function function2(){
    $this->inverse(function() {        
        this differs
        this differs
    }
}

private function inverse($function)
{
    same code
    same code1
    $function();
    same code 3
} 
```

然后，这可能会导致您对代码进行进一步改进，例如创建方法对象而不是共享基类的函数。另请参阅以下重构模式：[Replace Method with Method Object](http://martinfowler.com/refactoring/catalog/replaceMethodWithMethodObject.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:50:18.940

函数是执行特定任务的代码集。如果您使用相同的代码，您可以将其放入几个常用函数并在相关点调用它们。如果不是这种情况，您可以使用位于单独的公共文件中的包含语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:11:55.313

我更喜欢这个过程应该放松

```
$task1 = new Task ( array (
        "code",
        "code1",
        "differs",
        "code2",
        "code3",
        function () {
            echo "Sample Function";
        } 
) );

$task2 = new Task ( array (
        "code",
        "code1",
        "differs",
        "differs",
        "code3",
        array (
                "Code2,Code4" 
        ) 
) );

echo "<pre />";
$process = new Process ( $task1 );
$process->run ();

echo PHP_EOL;
echo PHP_EOL;

$process = new Process ( $task2 );
$process->run (); 
```

班级

```
class Task {
    private $process = array ();
    function __construct($process) {
        $this->process = $process;
    }

    function add($name) {
        $this->process [] = $name;
    }

    function getProcess($i = null) {
        return ($i == null) ? $this->process : $this->process [$i];
    }

    function getTotal() {
        return count ( $this->process );
    }

}

class Process {
    private $task;
    function __construct(Task $task) {
        $this->task = $task;
    }

    function run() {

        for($i = 0; $i < $this->task->getTotal (); $i ++) {
            $run = $this->task->getProcess ( $i );
            if (is_callable ( $run )) {
                $run ();
            } else if (is_string ( $run )) {
                echo "Running " . $run, PHP_EOL;
            }
        }
    }
} 
```

输出

```
Running code1
Running differs
Running code2
Running code3
Sample Function

Running code1
Running differs
Running differs
Running code3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T10:50:41.630

这看起来像是策略模式的候选者。

```
public function coreProcess(uniquePart $unique){
    same code
    same code1
    $unique->part1();
    $unique->part2();
    $unique->part3();
    same code 3
}

interface uniquePart
{
  function part1();

  function part2();

  function part3();
}

class process1 implements uniquePart
{
  function part1()
  {
     //some unique code
  }

  function part2()
  {
     //do nothing
  }

  function part3()
  {
    //unique code
  }
}  

class process2 implements uniquePart
{
  function part1()
  {
    //some unique code
  }

  function part2()
  {
     //some unique code
  }

  function part3()
  {
    //some unique code
  }
}

//run process 1
coreProcess(new process1);

//run process 2
coreProcess(new process2); 
```

[http://www.ibm.com/developerworks/library/os-php-designptrns/](http://www.ibm.com/developerworks/library/os-php-designptrns/)

# iphone - 如何防止取消所有本地通知。取消单次通知也不行

> ID：10411207
> 
> 赞同：0
> 
> 时间：2012-05-02T09:39:19.980
> 
> 标签：iphone, objective-c, push-notification, uilocalnotification

我有一个表格视图，如下所示，我确实使用相应的开关为每个单元格设置了提醒

```
-(IBAction)switchingbtn:(id)sender
{
    UISwitch *onoff = (UISwitch *) sender;
    UILocalNotification *localNotif = [[UILocalNotification alloc] init];
    if(onoff.on)
    {
        NSLog(@"Shedule notification");

    int tagValue=[sender tag];

    NSMutableDictionary *dict = (NSMutableDictionary *)[alarmsArray objectAtIndex:tagValue];

    NSDate *firedate = [dict objectForKey:@"date"];
    NSLog(@"fire date is %@", firedate);
    localNotif.fireDate = firedate;

    localNotif.alertBody = @"Start Exercise";
    localNotif.applicationIconBadgeNumber = 0;

    // localNotif.timeZone =[NSTimeZone timeZoneForSecondsFromGMT:0];
    localNotif.timeZone = [NSTimeZone systemTimeZone];
    localNotif.repeatInterval = kCFCalendarUnitDay;

   //  [[UIApplication sharedApplication] scheduleLocalNotification:localNotif]; //**Not working**
    [localNotif release];

} 
```

不，我需要为 ex 3rd swich 取消第 1 个通知取消第 3 个通知

```
else
    {
// Cancel a notification not works
      //  [[UIApplication sharedApplication] cancelLocalNotification:localNotif];

        [[UIApplication sharedApplication] cancelAllLocalNotifications];
    NSLog(@"cancel notification");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:49:39.780

到目前为止，取消单个通知的最佳方法是创建一个包含 userInfo 字典的通知，在此字典中，您可以为 id 键添加通知 ID 值。您跟踪通知 ID（存储在 plist、sql 数据库等中），当您需要删除通知时，您只需向 UIApplication 实例询问计划的通知并按 ID 过滤，当您找到匹配项时只需要发送该通知的取消方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T20:56:24.567

这是你想要的代码

```
- (void)CancelExistingNotification {
//cancel alarm
UIApplication *app = [UIApplication sharedApplication];
NSArray *eventArray = [app scheduledLocalNotifications];
for (int i=0; i<[eventArray count]; i++)
{
    UILocalNotification* oneEvent = [eventArray objectAtIndex:i];
    NSDictionary *userInfoCurrent = oneEvent.userInfo;
    NSString *uid=[NSString stringWithFormat:@"%@",[userInfoCurrent valueForKey:@"notificationID"]];
    if ([uid isEqualToString:[NSString stringWithFormat:@"%i",self.notificationID]])
    {
        //Cancelling local notification

        [app cancelLocalNotification:oneEvent];
        break;
    }
} 
```

}

“self.notificationID”来自自定义对象上的一个属性，如alarmObject，它在应用程序范围内通过帮助NSUserDefaults加载。

# javascript - 使用 CSS 和 JS 创建金字塔

> ID：10411215
> 
> 赞同：1
> 
> 时间：2012-05-02T09:39:33.847
> 
> 标签：javascript, jquery, css

我有一个包装 div 和许多内容块。内容块可以是任意数量。

```
<div class="wrapper">
  <div class="content-block">Something goes here</div>
  <div class="content-block">Something goes here</div>
                             .
                             .
                             .
  <div class="content-block">Something goes here</div>
</div> 
```

我希望使用这些内容块形成一个金字塔结构，如下所示：

![在此处输入图像描述](../Images/b30a5c4fd4f81effa9b380113ae19f6f.png)

有可能实现这样的金字塔吗？上图只是一个示例，内容块可能超过 10 个，甚至更少。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:49:30.473

看看这个非常简单的 JavaScript/CSS 解决方案：

```
var objContainer = document.getElementById("container"),
  intLevels = 10,
  strBlocksHTML = '';

// Using innerHTML is faster than DOM appendChild
for (var i = 0; i < intLevels; i++) {
  for (var n = 0; n < i + 1; n++) {
    strBlocksHTML += '<div class="buildingBlock"></div>';
  }
  strBlocksHTML += '<div></div>'; // Line break after each row
}

objContainer.innerHTML = strBlocksHTML;
```

```
.buildingBlock {
  display: inline-block;
  width: 20px;
  height: 20px;
  margin: 2px 5px;
  background-color: #eee;
  border: 2px solid #ccc;
}

#container {
  text-align: center;
}
```

```
<div id="container"></div>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:17:29.197

是的，这是完全可能的，但如果没有更精确的要求，很难写下来。div 的数量显然等于元素的数量 = 10。底行的长度 = (10/2 - 1)，下一行到顶部减少一个元素，等等。要么使用 div 样式中的绝对定位，要么将表格视为矩阵和用单元格绘制。表格解决方案将随着行数的增加而逐渐变慢，因为所有空的“像素”以及在浏览器中重新计算单元格大小和位置的开销呈二次方增加。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T10:20:02.300

嗯，不是小事。我认为不可能为任意数量的元素编写（有限的）CSS。它需要这样的东西：

```
#wrapper {
  text-align: center;
}

.content-block {
  display: inline-block;
  width: 5em;
  height: 4em;
  margin: 0 2.5em;
}

.content-block:nth-child(n*(n+1)/2)::after {
  display: block;  /* linebreak */
} 
```

其中[`nth-child`-selector](http://www.w3.org/TR/selectors/#nth-child-pseudo)将包含一个[三角形数字](http://en.wikipedia.org/wiki/Triangular_number)，但它必须具有 形式`an+b`。

# ajax - ajax未在外部div下加载

> ID：10411216
> 
> 赞同：0
> 
> 时间：2012-05-02T09:39:36.563
> 
> 标签：ajax

我有外部 html，我在其中创建了 jcorousal（图像通过 ajax 加载）。但该外部页面未加载到我当前的 div 中：

```
<div class="corousal_content" id="MyDivName"> <!-- External html will load here--> </div> 
```

这是我的外部页面，包含 jcarousal：

```
<script type="text/javascript">
alert("load ajax");
function mycarousel_itemLoadCallback(carousel, state)
{
    // Since we get all URLs in one file, we simply add all items
    // at once and set the size accordingly.
    if (state != 'init')
        return;

    jQuery.get('dynamic_ajax.txt', function(data) {
        mycarousel_itemAddCallback(carousel, carousel.first, carousel.last, data);
    });
};

function mycarousel_itemAddCallback(carousel, first, last, data)
{
    // Simply add all items at once and set the size accordingly.
    var items = data.split('|');

    for (i = 0; i < items.length; i++) {
        carousel.add(i+1, mycarousel_getItemHTML(items[i]));
    }

    carousel.size(items.length);
};

/**
 * Item html creation helper.
 */
function mycarousel_getItemHTML(url)
{
    return '<img src="' + url + '" width="75" height="75" alt="" />';
};

jQuery(document).ready(function() {
    jQuery('#mycarousel').jcarousel({
        itemLoadCallback: mycarousel_itemLoadCallback
    });
});

</script>
</head>
<body>
<div id="wrap">
  <div id="mycarousel" class="jcarousel-skin-ie7">
    <ul>
      <!-- The content will be dynamically loaded in here -->
    </ul>
  </div>

</div> 
```

请解决我的问题.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:57:08.893

你如何加载你的外部html？因为，我认为它未能在外部 html 上触发 jQuery.ready 事件。

# arrays - 这个 json 数组代码 facebook 表单有什么问题

> ID：10411218
> 
> 赞同：0
> 
> 时间：2012-05-02T09:39:48.133
> 
> 标签：arrays, facebook, json, forms

我得到的错误是：**无法解析字段属性。它是 JSON 数组还是 CSV 列表？**

问题出在表单中包含的选择菜单中。我想要实现的是这个链接上显示的选择框：[注册插件](http://developers.facebook.com/docs/plugins/registration/)

但不知何故，问题是没有显示选择框！

```
<iframe src='http://www.facebook.com/plugins/registration.php?
                    client_id=325340244194060&
                    redirect_uri=http://www.pingcampus.com/facebook_registration_plugin/store_user_data.php&
                    fields=[
                    {"name":"name"},
                    {"name":"email"},
                    {"name":"gender"},
                    {"name":"birthday"},

                    {'name':'captain',    'description':'Best Captain',             'type':'select',    'options':{'P':'Jean-Luc Picard','K':'James T. Kirk'}}

                    {'name':'captain',    'description':'College','type':'select','options':

                    {'P':'Jean-Luc Picard','K':'James T. Kirk',                                         
                    '1':'Acropolis','2':'Astral','3':'Aurobindo','4':'BM','5':'Central','6':'Chameli','7':'IET (DAVV)','8':'IIST
     ','9':'IIST2
     ','10':'IPS
     ','11':'JDCT
     ','12':'KCB
     ','13':'LKCT
     ','14':'LNCT
     ','15':'MIT (Malwa)
     ','16':'Malwa (Malwa2)
     ','17':'Mandsaur
     ','18':'Mathuradevi
     ','19':'MITM (Medi1)
     ','20':'MIST (Medi2)
     ','21':'MGIEM
     ','22':'Nalin
     ','23':'Oriental
     ','24':'Patel
     ','25':'Prestige
     ','26':'Priyatam
     ','27':'Rishiraj
     ','28':'RKDF
     ','29':'Royal
     ','30':'Sanghvi
     ','31':'Sdbansal
     ','32':'SGSITS
     ','33':'SIMS
     ','34':'SKSITS
     ','35':'Star
     ','36':'SVCE
     ','37':'SVITS
     ','38':'Transnational
     ','39':'Truba
     ','40':'Venkateshwar
     ','41':'Vidhyasagar
     ','42':'Vikrant
     ','43':'Vindhya
     ','#':'--------------------------------
     ','#':'Commerce
     ','#':'--------------------------------
     ','44':'Acro
     ','45':'Apex
     ','46':'Arihant
     ','47':'BM
     ','48':'Chamelidevi
     ','49':'Chimc
     ','50':'Choithram
     ','51':'Christian
     ','52':'DCBS (Daly College)
     ','53':'IBMR
     ','54':'IIMR (IIST)
     ','55':'IIPS (DAVV)
     ','56':'Ilva
     ','57':'IMIR
     ','58':'Imperial
     ','59':'IMS (DAVV)
     ','60':'Islamia
     ','61':'JDCT
     ','62':'LKCT
     ','63':'LNCT
     ','64':'Maharaja
     ','65':'MIT (Malwa)
     ','66':'Mathuradevi
     ','67':'Matushri
     ','68':'MBKhalsa
     ','69':'Medicaps
     ','70':'Patel
     ','71':'Pioneer
     ','72':'Prestige
     ','73':'Priyatam
     ','74':'Renaissance
     ','75':'Rishiraj
     ','76':'Sahib
     ','77':'SAIMS
     ','78':'Sanghvi Innovative
     ','79':'Sapient
     ','80':'SGSITS
     ','81':'SIMS
     ','82':'SJDM
     ','83':'SKSITS
     ','84':'Softvision
     ','85':'SVCE
     ','86':'Rransnational
     ','87':'Vaishnav
     ','88':'Venkteshwar
     ','89':'Vidhyasagar
     ','90':'Vikrant
     ','#':'--------------------------------
     ','#':'Pharmacy
     ','#':'--------------------------------
     ','91':'Acropolis
     ','92':'Aurobindo
     ','93':'BM
     ','94':'Central
     ','95':'SOPE (DAVV)
     ','96':'IIP(IIST)
     ','97':'IPS
     ','98':'Oriental
     ','99':'Rishiraj
     ','100':'RKDF
     ','101':'Safe
     ','102':'SGSITS
     ','103':'Smriti (SCOPE) 
     ','104':'svce
     ','105':'vikrant
     ','#':'--------------------------------
     ','#':'Medical
     ','#':'--------------------------------
     ','106':'Arihant
     ','107':'Bombay Hospital
     ','108':'Index
     ','109':'MGMMC
     ','110':'RD Memorial
     ','111':'Shubhdeep
     ','#':'--------------------------------
     ','#':'Dental
     ','#':'--------------------------------
     ','112':'Aurobindo
     ','113':'CDSH
     ','114':'GCD
     ','115':'Index
     ','116':'Modern
     ','#':'--------------------------------
     ','#':'Arts
     ','#':'--------------------------------
     ','117':'BIG Aims
     ','118':'Frameboxx
     ','119':'INIFD
     ','120':'MAAC
     ','121':'SDPS
     ','122':'SJMC (DAVV)
     ','123':'Virtual Voyage
     ','124':'Zica
     ','132':'EMRC (DAVV) 
     ','#':'--------------------------------
     ','#':'Architecture
     ','#':'--------------------------------
     ','125':'IPS
     ','126':'SDPS
     ','#':'--------------------------------
     ','#':'Law
     ','#':'--------------------------------
     ','127':'Christian
     ','128':'SOL(DAVV)
     ','129':'IIL
     ','130':'Vaishnav'}       },

                    {"name":"Arts","description":"Arts","type":"checkbox","value":"Arts"},
                    {"name":"Act","description":"Act","type":"checkbox","value":"Act"},
                    {"name":"Cooking","description":"Cooking","type":"checkbox","value":"Cooking"},
                    {"name":"Dance","description":"Dance","type":"checkbox","value":"Dance"},
                    {"name":"Designing","description":"Designing","type":"checkbox","value":"Designing"},
                    {"name":"Fashion","description":"Fashion Designing","type":"checkbox","value":"Fashion Designing"},
                    {"name":"Interior","description":"Interior Designing","type":"checkbox","value":"Interior Designing"},
                    {"name":"Modeling","description":"Modeling","type":"checkbox","value":"Modeling"},
                    {"name":"Photography","description":"Photography","type":"checkbox","value":"Photography"},
                    {"name":"Poetry","description":"Poetry / Writing","type":"checkbox","value":"Poetry / Writing"},
                    {"name":"Programming","description":"Programming","type":"checkbox","value":"Programming"},
                    {"name":"Reading","description":"Reading","type":"checkbox","value":"Reading"},
                    {"name":"Sketching","description":"Sketching / Drawing","type":"checkbox","value":"Sketching / Drawing"},
                    {"name":"Singing","description":"Singing","type":"checkbox","value":"Singing"},
                    {"name":"Sports","description":"Sports","type":"checkbox","value":"Sports"},
                    {"name":"Stunting","description":"Stunting","type":"checkbox","value":"Stunting"},
                    {"name":"Videography","description":"Checkthis","type":"checkbox","value":"Videography"},
                    {"name":"Other","description":"Other","type":"checkbox","value":"Other"},
                    {"name":"captcha"}
                    ]'
                    scrolling="auto"
                    frameborder="no"
                    style="border:none"
                    allowTransparency="true"
                    width="500"
                    height="800"

     >
            </iframe> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:02:40.280

尝试用有效的 JSON 替换 fields=[....]

```
[
{
    "name": "name"
},
{
    "name": "email"
},
{
    "name": "gender"
},
{
    "name": "birthday"
},
{
    "name": "captain",
    "description": "BestCaptain",
    "type": "select",
    "options": {
        "P": "Jean-LucPicard",
        "K": "JamesT.Kirk"
    }
},
{
    "name": "captain",
    "description": "College",
    "type": "select",
    "options": {
        "1": "Acropolis",
        "2": "Astral",
        "3": "Aurobindo",
        "4": "BM",
        "5": "Central",
        "6": "Chameli",
        "7": "IET(DAVV)",
        "8": "IIST",
        "9": "IIST2",
        "10": "IPS",
        "11": "JDCT",
        "12": "KCB",
        "13": "LKCT",
        "14": "LNCT",
        "15": "MIT(Malwa)",
        "16": "Malwa(Malwa2)",
        "17": "Mandsaur",
        "18": "Mathuradevi",
        "19": "MITM(Medi1)",
        "20": "MIST(Medi2)",
        "21": "MGIEM",
        "22": "Nalin",
        "23": "Oriental",
        "24": "Patel",
        "25": "Prestige",
        "26": "Priyatam",
        "27": "Rishiraj",
        "28": "RKDF",
        "29": "Royal",
        "30": "Sanghvi",
        "31": "Sdbansal",
        "32": "SGSITS",
        "33": "SIMS",
        "34": "SKSITS",
        "35": "Star",
        "36": "SVCE",
        "37": "SVITS",
        "38": "Transnational",
        "39": "Truba",
        "40": "Venkateshwar",
        "41": "Vidhyasagar",
        "42": "Vikrant",
        "43": "Vindhya",
        "44": "Acro",
        "45": "Apex",
        "46": "Arihant",
        "47": "BM",
        "48": "Chamelidevi",
        "49": "Chimc",
        "50": "Choithram",
        "51": "Christian",
        "52": "DCBS(DalyCollege)",
        "53": "IBMR",
        "54": "IIMR(IIST)",
        "55": "IIPS(DAVV)",
        "56": "Ilva",
        "57": "IMIR",
        "58": "Imperial",
        "59": "IMS(DAVV)",
        "60": "Islamia",
        "61": "JDCT",
        "62": "LKCT",
        "63": "LNCT",
        "64": "Maharaja",
        "65": "MIT(Malwa)",
        "66": "Mathuradevi",
        "67": "Matushri",
        "68": "MBKhalsa",
        "69": "Medicaps",
        "70": "Patel",
        "71": "Pioneer",
        "72": "Prestige",
        "73": "Priyatam",
        "74": "Renaissance",
        "75": "Rishiraj",
        "76": "Sahib",
        "77": "SAIMS",
        "78": "SanghviInnovative",
        "79": "Sapient",
        "80": "SGSITS",
        "81": "SIMS",
        "82": "SJDM",
        "83": "SKSITS",
        "84": "Softvision",
        "85": "SVCE",
        "86": "Rransnational",
        "87": "Vaishnav",
        "88": "Venkteshwar",
        "89": "Vidhyasagar",
        "90": "Vikrant",
        "91": "Acropolis",
        "92": "Aurobindo",
        "93": "BM",
        "94": "Central",
        "95": "SOPE(DAVV)",
        "96": "IIP(IIST)",
        "97": "IPS",
        "98": "Oriental",
        "99": "Rishiraj",
        "100": "RKDF",
        "101": "Safe",
        "102": "SGSITS",
        "103": "Smriti(SCOPE)",
        "104": "svce",
        "105": "vikrant",
        "106": "Arihant",
        "107": "BombayHospital",
        "108": "Index",
        "109": "MGMMC",
        "110": "RDMemorial",
        "111": "Shubhdeep",
        "112": "Aurobindo",
        "113": "CDSH",
        "114": "GCD",
        "115": "Index",
        "116": "Modern",
        "117": "BIGAims",
        "118": "Frameboxx",
        "119": "INIFD",
        "120": "MAAC",
        "121": "SDPS",
        "122": "SJMC(DAVV)",
        "123": "VirtualVoyage",
        "124": "Zica",
        "125": "IPS",
        "126": "SDPS",
        "127": "Christian",
        "128": "SOL(DAVV)",
        "129": "IIL",
        "130": "Vaishnav",
        "132": "EMRC(DAVV)",
        "P": "Jean-LucPicard",
        "K": "JamesT.Kirk",
        "#": "--------------------------------"
    }
},
{
    "name": "Arts",
    "description": "Arts",
    "type": "checkbox",
    "value": "Arts"
},
{
    "name": "Act",
    "description": "Act",
    "type": "checkbox",
    "value": "Act"
},
{
    "name": "Cooking",
    "description": "Cooking",
    "type": "checkbox",
    "value": "Cooking"
},
{
    "name": "Dance",
    "description": "Dance",
    "type": "checkbox",
    "value": "Dance"
},
{
    "name": "Designing",
    "description": "Designing",
    "type": "checkbox",
    "value": "Designing"
},
{
    "name": "Fashion",
    "description": "Fashion Designing",
    "type": "checkbox",
    "value": "Fashion Designing"
},
{
    "name": "Interior",
    "description": "Interior Designing",
    "type": "checkbox",
    "value": "Interior Designing"
},
{
    "name": "Modeling",
    "description": "Modeling",
    "type": "checkbox",
    "value": "Modeling"
},
{
    "name": "Photography",
    "description": "Photography",
    "type": "checkbox",
    "value": "Photography"
},
{
    "name": "Poetry",
    "description": "Poetry / Writing",
    "type": "checkbox",
    "value": "Poetry / Writing"
},
{
    "name": "Programming",
    "description": "Programming",
    "type": "checkbox",
    "value": "Programming"
},
{
    "name": "Reading",
    "description": "Reading",
    "type": "checkbox",
    "value": "Reading"
},
{
    "name": "Sketching",
    "description": "Sketching / Drawing",
    "type": "checkbox",
    "value": "Sketching / Drawing"
},
{
    "name": "Singing",
    "description": "Singing",
    "type": "checkbox",
    "value": "Singing"
},
{
    "name": "Sports",
    "description": "Sports",
    "type": "checkbox",
    "value": "Sports"
},
{
    "name": "Stunting",
    "description": "Stunting",
    "type": "checkbox",
    "value": "Stunting"
},
{
    "name": "Videography",
    "description": "Checkthis",
    "type": "checkbox",
    "value": "Videography"
},
{
    "name": "Other",
    "description": "Other",
    "type": "checkbox",
    "value": "Other"
},
{
    "name": "captcha"
}
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:05:14.337

您`fields`的注册社交插件参数包含无效的 JSON 对象（JSON 应使用双引号而不是单引号），并且您在`,`数组中间缺少（逗号），在下一行之后：

```
{'name':'captain', 'description':'Best Captain', 'type':'select', 'options':{'P':'Jean-Luc Picard','K':'James T. Kirk'}} 
```

**更新：**
实际上，即使只使用有效的 JSON 在这种情况下也可能不起作用，因为这是作为查询字符串参数传递的，因此应该正确编码 JSON 以避免出现问题。也可能导致一些问题。

此外，您还有两个`fields`名为“船长”（这也会导致注册插件出现问题）。

在这里我创建了一些示例（由于大量的字段代码，我不把它们放在这里）：

*   从 JavaScript 对象创建字段并将 em 传递给注册插件：http: [//jsfiddle.net/QwdCv/](http://jsfiddle.net/QwdCv/)
*   直接在 iframe 标记 src 属性中传递的 URL 中正确编码的字段：http: [//jsfiddle.net/QwdCv/1/](http://jsfiddle.net/QwdCv/1/)

# c# - 更新/删除/插入 DataGridView

> ID：10411221
> 
> 赞同：0
> 
> 时间：2012-05-02T09:40:04.900
> 
> 标签：c#, dbcommand

我从 DbConnection 创建了一个 DbDataAdapter，填充了一个 DataTable，并将其放入 DataGridView。

当我在 DataGridView 中添加/插入/删除数据时，我想保存它并更新数据库。

我到底要做什么？

（我自己创建了 DbCommands；Update-command 的一个示例（正确吗？）：

```
DbCommand updateCmd = connection.CreateCommand();

DbParameter param1 = updateCmd.CreateParameter();
DbParameter param2 = updateCmd.CreateParameter();
DbParameter param3 = updateCmd.CreateParameter();

param1.Direction = ParameterDirection.Input;
param1.ParameterName = "@firstname";
param1.SourceColumn = "firstname";
param1.DbType = (DbType.String);

param2.Direction = ParameterDirection.Input;
param2.ParameterName = "@lastname";
param2.SourceColumn = "lastname";
param2.DbType = (DbType.String);

param3.Direction = ParameterDirection.Input;
param3.ParameterName = "@mail";
param3.SourceColumn = "mail";
param3.DbType = (DbType.String);
updateCmd.CommandText = "UPDATE Personen SET fistname=@firstname,lastname=@lastname,mail=@mail";    

dbAdapter.UpdateCommand = updateCmd; 
```

我认为，“保存”按钮的代码如下：

```
adapt.Update(table); 
```

但我收到一个错误：

```
Must declare the scalar variable "@firstname". 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:01:15.403

`CreateParameter`方法只创建一个`SqlParameter`实例，但不会将参数添加到`SqlCommand`. 您必须使用方法将参数添加到命令中`updateCmd.Parameters.Add`。

# php - 存在重定向 cookie 后访问直接链接

> ID：10411224
> 
> 赞同：0
> 
> 时间：2012-05-02T09:40:14.800
> 
> 标签：php, cookies, redirect

我的 wordpress 网站有这个代码

```
<?php
if(!isset($_COOKIE['iwashere']) || ($_COOKIE['iwashere'] != "yes")){
setcookie("iwashere", "yes", time()+20000,'howtobuygoldoffshore.com');
header("Location: http://www.howtobuygoldoffshore.com/sitemap"); 
exit;
} 
```

它运行良好，并根据 cookie 重定向新用户。

现在，如果有人想直接访问一个链接，即：http://howtobuygoldoffshore.com/process-payment 他们无法打开它，因为由于 cookie 重定向，它会将他们重定向到登录页面

我希望以两种方式使用它。如果新用户直接访问诸如[http://howtobuygoldoffshore.com/process-payment之类的链接，他也应该能够正确访问直接链接而不会看到登录页面](http://howtobuygoldoffshore.com/process-payment)

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:00:15.553

看看[`$_SERVER['REQUEST_URI']`](http://php.net/manual/en/reserved.variables.server.php)。

您可以检查是否给出了 index.php（或任何其他登陆页面）或类似的东西，并进行或不进行重定向。

# sharepoint - Sharepoint 2010 Mysite 博客品牌（与发布）不起作用

> ID：10411225
> 
> 赞同：1
> 
> 时间：2012-05-02T09:40:15.313
> 
> 标签：sharepoint, blogs, publishing, mysite

我在 SharePoint 2010 中为客户的 Intranet 网站做了一些品牌推广，并构建了一个解决方案。该解决方案包含一些基于 SharePoint 发布功能的母版页。客户的 Intranet 站点也使用 Mysite，我使用功能装订将带有 Mysite 母版页的功能应用到主机和个人 Mysite。

Mysite 的发布功能也被激活，因此品牌与 Intranet 站点一致。这工作正常。当我在 mysite 主机上激活该功能时，品牌将应用于主机和个人网站。

但是，在无休止的尝试和错误之后仍然不起作用的是个人博客网站上的品牌。当用户点击他的个人 Mysite 上的“创建博客”链接时，新站点就被创建了。但是当博客站点出现时，品牌并没有出现。似乎未启用正确的功能。

为了使品牌在博客网站上发挥作用，我必须手动执行的唯一步骤是启用功能中的发布。但那是手动的，我不能让它在解决方案中工作。

我尝试了以下一些步骤：

*   使用装订激活发布功能（我还尝试了一些其他可用的发布功能）：在个人网站集和博客网站上：

    ```
    //default branding feature
    <FeatureSiteTemplateAssociation Id="0676d0e2-2acf-4ac0-9ce6-e6952a4893c5" TemplateName="SPSMSITEHOST#0" />
    <FeatureSiteTemplateAssociation Id="0676d0e2-2acf-4ac0-9ce6-e6952a4893c5" TemplateName="SPSPERS#0" />   

    //publishing features
    <FeatureSiteTemplateAssociation Id="f6924d36-2fa8-4f0b-b16d-06b7250180fa" TemplateName="SPSPERS#0" />
    <FeatureSiteTemplateAssociation Id="94c94ca6-b32f-4da9-a9e3-1f3d343d7ecb" TemplateName="BLOG#0" /> 
    ```

    这使得布局正常工作（发布已激活），但我看不到博客内容，内容区域为空白。特征的顺序错了吗？（我尝试过不同的订单）。为什么没有显示任何内容？博客功能没有激活吗？

    也许我需要以特定的顺序添加更多功能才能被激活？

*   激活博客的母版页功能：

    ```
    <FeatureSiteTemplateAssociation Id="0676d0e2-2acf-4ac0-9ce6-e6952a4893c5" TemplateName="SPSMSITEHOST#0" />
    <FeatureSiteTemplateAssociation Id="0676d0e2-2acf-4ac0-9ce6-e6952a4893c5" TemplateName="SPSPERS#0" />

    <FeatureSiteTemplateAssociation Id="0676d0e2-2acf-4ac0-9ce6-e6952a4893c5" TemplateName="BLOG#0" /> 
    ```

    这行不通。结果是一个没有品牌的博客网站。

*   全局激活母版页功能，而不是将其应用于单独的站点。

    ```
    <FeatureSiteTemplateAssociation Id="0676d0e2-2acf-4ac0-9ce6-e6952a4893c5" TemplateName="GLOBAL" /> 
    ```

    这行不通。结果是一个没有品牌的博客网站。

也许我必须找到另一个方向的解决方案：如果有人可以帮助我完成一些后续步骤，那就太好了。我找不到任何关于此的好信息。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T20:21:54.757

您是否找到任何解决问题的方法，我也面临同样的问题。我可以帮助您做一件事，但是当您激活在博客上发布时，网址将转到 .../Pages/Default.aspx 只需删除页面，您就会看到内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:26:13.290

我只是用装订解决了这个问题！解决方案是首先激活 Mysite 个人网站集上的 SharePoint 博客功能。然后，在 Mysite Personal 网站集和 Blog 网站上激活正确的发布功能。

*   因此激活的顺序很重要
*   博客功能不得在博客网站本身上激活，而应在个人网站集上激活
*   为个人网站集和博客网站选择正确的发布功能

    ```
    <!-- 1\. My own feature with Masterpage on both Mysite Host and Mysite Personal -->
    <FeatureSiteTemplateAssociation Id="0676d0e2-2acf-4ac0-9ce6-e6952a4893c5" TemplateName="SPSMSITEHOST#0" />
    <FeatureSiteTemplateAssociation Id="0676d0e2-2acf-4ac0-9ce6-e6952a4893c5" TemplateName="SPSPERS#0" />

    <!-- 2\. !!SharePoint Blog feature must first be activated on the Mysite Personal-->
    <FeatureSiteTemplateAssociation Id="863DA2AC-3873-4930-8498-752886210911" TemplateName="SPSPERS#0"/>  

    <!-- 3\. SharePoint Server Publishing Infrastructure on Mysite Personal: -->
    <FeatureSiteTemplateAssociation Id="f6924d36-2fa8-4f0b-b16d-06b7250180fa" TemplateName="SPSPERS#0"/>
    <!-- 4\. SharePoint Server Publishing on Blog: -->
    <FeatureSiteTemplateAssociation Id="94c94ca6-b32f-4da9-a9e3-1f3d343d7ecb" TemplateName="BLOG#0"/> 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T21:38:05.287

尝试使用 WebProvisioned 事件处理程序通过代码激活 PublishingWeb 功能，您可以将其装订到博客站点。

# asp.net-mvc-3 - ASP.NET MVC 3 应用程序在不同的应用程序域中具有多租户？

> ID：10411227
> 
> 赞同：1
> 
> 时间：2012-05-02T09:40:28.717
> 
> 标签：asp.net-mvc-3, mef, multi-tenant, applicationdomain

有谁知道如何在 asp mvc 3 应用程序中实现多租户并支持单独的应用程序域和 MEF？

在我的应用程序中，我想将每个租户的程序集加载到不同的应用程序域。类型由 MEF 在适当的应用程序域中解析。每个请求都需要在适当的租户特定应用程序域中处理。

由于这是一个非常棘手的问题，我将不胜感激任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T17:11:11.050

恕我直言，多租户就是为所有租户提供单一代码库的过程[多租户的纯形式]。

当您将拥有租户使用单个代码库和单个应用程序域进行自定义的所有选项时，其中基于租户标识符进行隔离时，不需要单独的应用程序域/租户。

这确保了进入系统的每个用户都将获得基于他所属的租户的数据/定制[在运行时识别]。

请探索此观点并发布有关此方法的更新。

# javascript - knotckout js foreach 在 IE 7 和 8 中自动追加行

> ID：10411232
> 
> 赞同：0
> 
> 时间：2012-05-02T09:41:17.747
> 
> 标签：javascript, internet-explorer-8, internet-explorer-7, knockout.js

我正在建设的电子商务网站中有一个“迷你购物车”。对于“迷你购物车”，我使用 foreach 将项目添加到表中。

“迷你购物车”是一个下拉菜单，它是从 razor 文件呈现的。当我关闭“迷你购物车”并再次打开它时，它会自动将所有行再追加一次。所以每次我关闭“迷你购物车”并再次打开它。所有的行都被追加一次。

当购物车打开时，此代码将运行。

```
showCart = function () {
    WebService.PostJson("/services/CartService.svc/GetCart", {},
        function (cartDto) {
            updateCart(cartDto);
            postman.deliver('cartShown', 1);
        },
        function () {

        });
}; 
```

桌子看起来像这样。

```
<table width="100%" >
    <thead data-bind="foreach: Items, stripe: Items, evenClass: 'even', oddClass: 'odd'">
    <tr>
        <td data-bind="text: ArticleNo">
        </td>
        <td data-bind="text: Name" style="width:390px;">
        </td>
        <td>
            <input type="text" data-bind="value: Quantity" class="quantity"/>
        </td>
        <td class="cart-price-column">
            <span class="cartRowSubTotal" style="display: none;" data-bind="text: SubTotal"></span>
        </td>
        <td>
            <a href="#" class="erase" data-bind="click: remove">Ta bort</a>
        </td>
    </tr>
    </thead>
    </table> 
```

updateCart 做了一个 Items.splice(0); 所以它应该每次都重新加载它。但它似乎不适用于 Internet Explorer 7 和 8。

反正每次都要“清理”桌子吗？或者视图模型可以自己解决这个问题吗？

谢谢。

**更新：**

似乎 splice 方法由于某种原因没有清空数组。当更改为 cart.Items([]) 时，它开始工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:41:10.477

设置购物车.items(null); 与IE无关！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:57:51.980

In IE, the length parameter is required. Leaving it empty causes the function to do nothing. Call it like this: `Items.splice(0, Items().length)`.

# java - JSF 网络项目 标签不可见

> ID：10411235
> 
> 赞同：1
> 
> 时间：2012-05-02T09:41:24.457
> 
> 标签：java, jsf-2, maven-3, tomcat7, myfaces

我按照教程制作了一个 JSF Web 项目，但它不起作用，`<h : xxx>`标签中的所有内容在浏览器（例如 firefox 或 googlechrome）中都是不可见的。

应该这样做：首先您访问 index.html，输入您的姓名并按下按钮。bean 将您的姓名传输到 JSP 并且 JSP 打印 Welcome "your name"

但如上所述，输入字段和按钮是不可见的（它们在页面代码内，但它们的长度为 0px，手动设置新宽度也不起作用）

在 Eclipse 图形预览工具中一切看起来都很正常。：/

![从日食看](../Images/89bddf11d96667cd7bfd95c18a889685.png)

![在谷歌浏览器中](../Images/30cbf62908b6db0754ce75c7279ad3d9.png)

`my index.html`

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:h="http://java.sun.com/jsf/html">

    <h:head>
        <title>JSF 2.0 Hello World</title>
    </h:head>
    <h:body>
        <h3>JSF 2.0 Hello World Example - hello.xhtml</h3>
        <h:outputText value="test"  />
        <h:form>
           <h:inputText value="#{helloBean.name}"></h:inputText>
           <h:commandButton value="Welcome Me" action="welcome"></h:commandButton>
        </h:form>
    </h:body>
</html> 
```

我的`web.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.5"
 xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee   http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
 <display-name>webApp</display-name>
 <!-- JSF mapping -->
 <servlet>
  <servlet-name>Faces Servlet</servlet-name>
  <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
 </servlet>
 <!-- Map these files with JSF -->
 <servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>/faces/*</url-pattern>
 </servlet-mapping>
 <servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.jsf</url-pattern>
 </servlet-mapping>
 <servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.faces</url-pattern>
 </servlet-mapping>
 <servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.html</url-pattern>
 </servlet-mapping>
 <!-- Welcome page -->
 <welcome-file-list>
  <welcome-file>index.html</welcome-file>
 </welcome-file-list>
</web-app> 
```

我的豆子：

```
package net.viralpatel.maven;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import java.io.Serializable;

@ManagedBean
@SessionScoped
public class HelloBean implements Serializable {

    private static final long serialVersionUID = 1L;

    private String name;

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
} 
```

生成的 HTML：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"    
      xmlns:h="http://java.sun.com/jsf/html">

    <h:head>
        <title>JSF 2.0 Hello World</title>
    </h:head>
    <h:body bgcolor="white">
        <h3>JSF 2.0 Hello World Example - welcome.xhtml</h3>
        <h4>Welcome #{helloBean.name}</h4>
    </h:body>
</html> 
```

在我的`pom.xml`你可以找到

*   myfaces-api 1.2.2
*   战斧 1.1.9
*   myfaces-impl 1.2.2
*   jstl 1.1.2
*   标签库标准 1.1.2
*   geronimo_servlet_2.5_spec 1.2
*   jboss-jsf-api_2.0_spec

我正在使用 tomcat 7 服务器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:01:24.660

您的错误是您使用`.html`扩展名而不是`.xhtml`JSF 视图文件。默认的 JSF 后缀是`.xhtml`.

有 2 种方法可以解决此问题：

1.  告诉 JSF 改为使用`.html`默认后缀。

    ```
    <context-param>
        <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
        <param-value>.html</param-value>
    </context-param> 
    ```

2.  或者，将`index.html`文件重命名为`index.xhtml`并相应地修复您的`web.xml`：

    ```
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>index.xhtml</welcome-file>
    </welcome-file-list> 
    ```

与 IDE 工具（自动完成等）相比，使用 XHTML 具有更多优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:24:29.107

在您的 web.xml 中，不应注释此 servlet 映射：

```
 <servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.html</url-pattern>
 </servlet-mapping> 
```

# java - Android：将xml布局设置为表格行？

> ID：10411239
> 
> 赞同：2
> 
> 时间：2012-05-02T09:41:34.393
> 
> 标签：java, android, tableview, xml-layout

我有表，在主 xml 布局中进行了描述。我需要知道，是否有机会为每个表格行设置布局，所以我不需要每次都重新创建？布局简单的地方，我可以通过代码来实现，但此时布局相当复杂。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.ebank_saskaitos);
    this.setFirstBlock();
}

private void setFirstBlock() {
    TableLayout ll = (TableLayout) findViewById(R.id.first_block);
    ll.addView(this.tableChild());

}

private TableRow tableChild() {
    TableRow tr = new TableRow(this);

    //row implementation

    return tr;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T09:50:18.060

`LayoutInflater`像这样使用：

```
private View tableChild() {
    TableRow tr = new TableRow(this);
    View v = LayoutInflater.from(mContext).inflate(R.layout.layout_for_my_table_row, tr, false);
    //want to get childs of row for example TextView, get it like this:
    TextView tv = (TextView)v.findViewById(R.id.my_row_text_view);
    tv.setText("This is another awesome way for dynamic custom layouts.");
    return v;//have to return View child, so return made 'v'
} 
```

# android - setFastScrollEnabled 不能完美运行

> ID：10411246
> 
> 赞同：1
> 
> 时间：2012-05-02T09:41:55.567
> 
> 标签：android, listview

我正在开发一个应用程序，该应用程序的页面顶部有一个列表视图和一个编辑文本框。当您在编辑文本框中输入内容时，它将过滤列表视图中显示的项目。我遇到的问题是出现在滑块侧面的快速滚动图标。例如，当我键入字母“b”时，滚动条会消失。

![在此处输入图像描述](../Images/1600bbd8e8d62f19199e8017d0032951.png)

我已经添加了这些行（以刷新我的列表滚动条），但它没有用。

```
_filterText = (EditText) findViewById(R.id.search_box);

_filterText.addTextChangedListener(new TextWatcher(){

    public void afterTextChanged(Editable s) {

        _listView.setFastScrollEnabled(false);

        _listView.setFastScrollEnabled(true);

    } 
```

我也有这个主题并关注它，我想这不是同一个问题。 [Android：fastScrollEnabled 一开始不工作](https://stackoverflow.com/questions/10255624/android-fastscrollenabled-not-working-at-first)

好的，这是我的全部课程：

```
public class StationsFragment extends GoogleAnalyticsFragment implements Observer{

    private Boolean mDebug = true;

    private ListView            _listView;

    @Override

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        super.onCreateView( inflater, container, savedInstanceState );

        activity = (FragmentsActivity) getActivity();

        mStationsViewContainer = inflater.inflate(R.layout.stations_activity, null);

        _listView = (ListView)  mStationsViewContainer.findViewById( R.id.stations_listView );

            activity.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);

            _stationsAdapter = new StationsAdapter();

            _listView.setAdapter(_stationsAdapter);

            _listView.setVerticalScrollBarEnabled(false);

            _listView.setFastScrollEnabled(true);

            _listView.setScrollingCacheEnabled(true);

            registerForContextMenu(_listView);

            _listView.setOnItemClickListener(new OnItemClickListener() {

                @Override

                public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

                }
            });

            _stationsList.addObserver(this);

            _filterText = (EditText) mStationsViewContainer.findViewById( R.id.search_box );

            TextWatcher filterTextWatcher = new TextWatcher() {

                public void afterTextChanged(Editable s) {
                    _listView.setFastScrollEnabled(false);

                    _listView.setFastScrollEnabled(true);
                }

                public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                }

                public void onTextChanged(CharSequence s, int start, int before, int count) {

                    _filterMode = _filterText.getText().length() > 0;

                    _stationsAdapter.getFilter().filter(s);
                }
            };

            _filterText.addTextChangedListener(filterTextWatcher);

            _stationsAdapter.getFilter().filter("");

        }

        return mStationsViewContainer;
    }

class StationsAdapter extends BaseAdapter implements SectionIndexer, Filterable {

        HashMap<String, Integer>    _alphaIndexer;

        public ArrayList<Station>   _filtered   = new ArrayList<Station>();

        String[]                    _sections;

        MyFilter                    _filter;

        public StationsAdapter() {

            super();

            _filter = new MyFilter();
        }

        public void updateIndex() {

            _alphaIndexer = new HashMap<String, Integer>();

            for (int x = 0; x < _filtered.size(); x++) {

                Station s = (Station) _filtered.get(x);

                // get the first letter of the store
                String ch = s.getTitle().substring(0, 1);

                // convert to uppercase otherwise lowercase a -z will be sorted
                // after upper A-Z
                ch = ch.toUpperCase();

                if (!_alphaIndexer.containsKey(ch)) {

                    if (_filterMode) {

                        _alphaIndexer.put(ch, x);

                    } else {

                        _alphaIndexer.put(ch, x + _favouriteManager.getFavourites().length);
                    }
                }
            }

            Set<String> sectionLetters = _alphaIndexer.keySet();

            ArrayList<String> sectionList = new ArrayList<String>(sectionLetters);

            Collections.sort(sectionList);

            if (!_filterMode && _favouriteManager.getFavourites().length > 0) {

                sectionList.add(0, "\u2605");
            }

            _sections = new String[sectionList.size()];

            sectionList.toArray(_sections);

            if (!_filterMode && _favouriteManager.getFavourites().length > 0) {

                _alphaIndexer.put("\u2605", 0);
            }
        }

        public int getCount() {

            if (_filterMode) {

                if (mDebug) Log.i("StationFragment","filter size ="+_filtered.size());

                return _filtered.size();

            } else {

                return _filtered.size() + _favouriteManager.getFavourites().length;
            }

        }

        public Object getItem(int position) {

            if (_filterMode) {

                return _filtered.get(position);

            } else {

                if (position < _favouriteManager.getFavourites().length) {

                    return _favouriteManager.getFavourites()[position];

                } else {

                    return _filtered.get(position - _favouriteManager.getFavourites().length);
                }
            }
        }

        public long getItemId(int position) {

            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {

            if (mDebug)     Log.i("ks3","getView called, position is " + position);

            if (convertView == null) {

                LayoutInflater inflater = (LayoutInflater) activity.getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

                convertView = inflater.inflate(R.layout.stations_cell_custom, null);
            }

            if (!_filterMode) {

                if (position < _favouriteManager.getFavourites().length) {

                    Favourite favourite = _favouriteManager.getFavourites()[position];

                    Station station = _stationsList.findStationById(favourite.getFavouriteId());

                    TextView details = ((TextView) convertView.findViewById(R.id.details));

                    if (_pushedFromRoutes || _pushedFromWidgetConfiguration) {

                        details.setVisibility(View.GONE);

                    } else {

                        details.setVisibility(View.VISIBLE);
                    }

                    TextView name = ((TextView) convertView.findViewById(R.id.name));

                    if (station != null) {

                        name.setText(station.getName());

                        //name.setTextColor(getResources().getColor(R.color.stations_list_favourite_text_color));

                    } else {

                        name.setText("");
                    }

                    details.setText(favourite.getUserSettings().formattedDateTime());

                    TextView header = ((TextView) convertView.findViewById(R.id.header_textview));

                    View headerBar = ((View) convertView.findViewById(R.id.header_bar));

                    if (position == 0) {

                        header.setVisibility(View.VISIBLE);

                        headerBar.setVisibility(View.VISIBLE);

                        header.setText(getString(R.string.star_favourites));

                    } else {

                        header.setVisibility(View.GONE);

                        headerBar.setVisibility(View.GONE);

                        header.setText(null);
                    }

                } else {

                    Station station = _filtered.get(position - _favouriteManager.getFavourites().length);

                    TextView name = ((TextView) convertView.findViewById(R.id.name));

                    name.setText(station.getName());

                    name.setTextColor(getResources().getColor(R.color.stations_list_text_color));

                    ((TextView) convertView.findViewById(R.id.details)).setVisibility(View.GONE);

                    TextView header = ((TextView) convertView.findViewById(R.id.header_textview));

                    View headerBar = ((View) convertView.findViewById(R.id.header_bar));

                    String firstLetter = station.getTitle().substring(0, 1);

                    /*if (position == _alphaIndexer.get(firstLetter)) {

                        TextView header = (TextView) activity.findViewById(R.id.header_textview);

                        header.setText(firstLetter);
                    }*/

                    if (position == _alphaIndexer.get(firstLetter)) {

                        header.setVisibility(View.VISIBLE);

                        headerBar.setVisibility(View.VISIBLE);

                        header.setText(firstLetter);

                    } else {

                        header.setVisibility(View.GONE);

                        headerBar.setVisibility(View.GONE);

                        header.setText(null);
                    }
                }

            } else {

                Station station = _filtered.get(position);

                TextView name = ((TextView) convertView.findViewById(R.id.name));

                name.setText(station.getName());

                name.setTextColor(getResources().getColor(R.color.stations_list_text_color));

                ((TextView) convertView.findViewById(R.id.details)).setVisibility(View.GONE);

                TextView header = ((TextView) convertView.findViewById(R.id.header_textview));

                View headerBar = ((View) convertView.findViewById(R.id.header_bar));

                String firstLetter = station.getTitle().substring(0, 1);

                if (position == _alphaIndexer.get(firstLetter)) {

                    header.setVisibility(View.VISIBLE);

                    headerBar.setVisibility(View.VISIBLE);

                    header.setText(firstLetter);

                } else {

                    header.setVisibility(View.GONE);

                    headerBar.setVisibility(View.GONE);

                    header.setText(null);
                }
            }

            return convertView;
        }

        public int getPositionForSection(int section) {

            return _alphaIndexer.get(_sections[section]);
        }

        public int getSectionForPosition(int position) {

            return 0;
        }

        public Object[] getSections() {

            return _sections;
        }

        @Override
        public Filter getFilter() {

            return _filter;
        }

        class MyFilter extends Filter {

            @Override

            public CharSequence convertResultToString(Object resultValue) {

                if (resultValue != null) {

                    Station station = (Station) resultValue;

                    if (station != null) {

                        return station.getTitle();
                    }
                }

                return null;
            }

            @Override

            protected FilterResults performFiltering(CharSequence constraint) {

                String pattern = constraint.toString().toLowerCase();

                FilterResults result = new FilterResults();

                ArrayList<Station> filt = new ArrayList<Station>();

                if (_pushedFromRoutes || _pushedFromWidgetConfiguration) {

                    synchronized (_stationsList.stations()) {

                        for (int i = 0, l = _stationsList.stations().length; i < l; i++) {

                            Station s = _stationsList.stations()[i];

                            if (pattern == null || pattern.length() == 0 || s.match(pattern))

                                filt.add(s);
                        }

                        result.count = filt.size();

                        result.values = filt;
                    }

                } else {

                    synchronized (_stationsList.belgianStations()) {

                        for (int i = 0, l = _stationsList.belgianStations().length; i < l; i++) {

                            Station s = _stationsList.belgianStations()[i];

                            if (pattern == null || pattern.length() == 0 || s.match(pattern))

                                filt.add(s);
                        }

                        result.count = filt.size();

                        result.values = filt;
                    }
                }

                return result;
            }

            @SuppressWarnings("unchecked")
            @Override

            protected void publishResults(CharSequence constraint, FilterResults results) {

                _filtered = (ArrayList<Station>) results.values;

                updateIndex();

                _listView.setFastScrollEnabled(false);

                notifyDataSetChanged();

                _listView.setFastScrollEnabled(true);

                if (mDebug) Log.i("StationFragment","list count ="+_listView.getCount());

                if (_filterMode && _filtered.size() == 0) {

                    _listView.setVisibility(View.GONE);

                    _noResultsTextView.setVisibility(View.VISIBLE);

                } else {

                    _listView.setVisibility(View.VISIBLE);

                    _noResultsTextView.setVisibility(View.GONE);
                }
            }

        }

    }
} 
```

您看到我必须生成一个复杂的列表，我认为问题可能来自于此，也许滚动条可以获得最大值和最小值？我真的不明白？

我在一个活动中尝试了我的代码（我认为问题可能来自片段），当我测试它时，它仍然无法在我的平板电脑三星 Galaxy 中工作。我在 Nexus S 中尝试过，它奏效了。我必须在片段中使用此代码的问题，它必须在平板电脑中工作，尤其是 GalaxyTab。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T20:20:36.250

据我所知，问题在于您的`SectionIndexer`实施不平衡。目前您有：

```
 public int getPositionForSection(int section) {

        return _alphaIndexer.get(_sections[section]);
    }

    public int getSectionForPosition(int position) {

        return 0;
    }

    public Object[] getSections() {

        return _sections;
    } 
```

有一个可行的实现告诉列表如何确定给定部分的开始位置`getPositionForSection()`，但没有关于如何确定给定位置位于哪个部分的内容`getSectionForPosition()`。

当我使用这个索引器代码运行一个简化的示例（在我的带有 Android 3.1 的 GTab 10.1 上）时，我可以轻松地让滚动手柄完全离开屏幕，这样用户根本无法得到它，除非一直滚动到顶部的名单。解决此问题的方法是通过正确实施其他方法来平衡索引器：

```
 public int getPositionForSection(int section) {

        return _alphaIndexer.get(_sections[section]);
    }

    public int getSectionForPosition(int position) {
        //Iterate over the sections to find the closest index
        //that is not greater than the position
        int closestIndex = 0;
        int latestDelta = Integer.MAX_VALUE;

        for(int i=0; i < _sections.length; i++) {
            int current = _alphaIndexer.get(_sections[i]);
            if(current == position) {
                //If position matches an index, return it immediately
                return i;
            } else if(current < position) {
                //Check if this is closer than the last index we inspected
                int delta = position - current;
                if(delta < latestDelta) {
                    closestIndex = i;
                    latestDelta = delta;
                }
            }
        }

        return closestIndex;
    }

    public Object[] getSections() {

        return _sections;
    } 
```

无论如何，在我的示例中，将其修复`SectionIndexer`为更平衡可以消除问题，并且滚动句柄永远不会低于视图。此示例代码可能无法复制/粘贴您的数据源，但它应该让您了解如何将其放入代码中。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:36:04.747

尝试这些调用，`onTextChanged()`以便在过滤后选择第一个项目。

```
listView.setSelectionAfterHeaderView(); 
```

或者

```
listView.setSelection(0); 
```

# iphone - 如何在 iPhone sdk 中测试 Authorize.net

> ID：10411248
> 
> 赞同：-2
> 
> 时间：2012-05-02T09:42:22.880
> 
> 标签：iphone, authorize.net

我正在使用[Authorize.net](https://developer.authorize.net/integration/fifteenminutes/ios)

设备注册成功但`getTransactionDetailsSucceeded`没有被调用？

我该如何测试它..

`namespace warning : xmlns: URI AnetApi/xml/v1/schema/AnetApiSchema.xsd is not absolute ttp://www.w3.org/2001/XMLSchema" xmlns="AnetApi/xml/v1/schema/AnetApiSchema.xsd"`

也关注了这个[网址](https://stackoverflow.com/questions/8308377/authorize-net-ios-sdk-error)，但仍然没有成功......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:11:50.053

感谢您的回复..但它已经完成了......

```
//Call this method at once in project
-(void)registerDevice
{
    NSLog(@"registerDevice");
    MobileDeviceRegistrationRequest *registrationRequest=[MobileDeviceRegistrationRequest mobileDeviceRegistrationRequest];

    registrationRequest.anetApiRequest.merchantAuthentication.name= txtUserName.text;

    registrationRequest.anetApiRequest.merchantAuthentication.password = txtPassword.text;

    registrationRequest.mobileDevice.mobileDescription=@"iPhone";
    registrationRequest.mobileDevice.phoneNumber = @"7889999999";
    registrationRequest.mobileDevice.mobileDeviceId=[[[UIDevice currentDevice] uniqueIdentifier]
                                                     stringByReplacingOccurrencesOfString:@"-" withString:@"_"]; 
    NSLog(@"registrationRequest %@",registrationRequest);
    [AuthNet authNetWithEnvironment:ENV_TEST];

    AuthNet *an = [AuthNet getInstance];

    [an setDelegate:self];

    [an mobileDeviceRegistrationRequest:registrationRequest];

}

//And after above method call below method

- (void) loginToGateway {
      MobileDeviceLoginRequest *mobileDeviceLoginRequest =
        [MobileDeviceLoginRequest mobileDeviceLoginRequest];
      mobileDeviceLoginRequest.anetApiRequest.merchantAuthentication.name = txtUserName.text;
      mobileDeviceLoginRequest.anetApiRequest.merchantAuthentication.password = txtPassword.text;
      mobileDeviceLoginRequest.anetApiRequest.merchantAuthentication.mobileDeviceId =
        [[[UIDevice currentDevice] uniqueIdentifier]
                 stringByReplacingOccurrencesOfString:@"-" withString:@"_"];

      AuthNet *an = [AuthNet getInstance];

      [an setDelegate:self];
      [an mobileDeviceLoginRequest: mobileDeviceLoginRequest];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T13:01:35.103

当您的设备未注册时会发生此错误。因此请编写上述方法来注册您的设备并将其替换为您的凭据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T07:51:14.397

我有同样的问题，错误 Message.code = E00059 Message.text = 此方法调用不允许身份验证类型。

解决方案是——如果您的设备已经注册，请评论以下代码

```
[an mobileDeviceRegistrationRequest:mobileDeviceRegistrationRequest]; 
```

这是用于注册设备

# iphone - MPMoviePlayerController playing YouTube video

> ID：10411250
> 
> 赞同：2
> 
> 时间：2012-05-02T09:42:27.307
> 
> 标签：iphone, ios, http, youtube, mpmovieplayercontroller

How can I play a YouTube video in an MPMoviePlayerController on the iPhone while avoiding going into fullscreen mode?

This question has been raised here: [MPMoviePlayerController is playing YouTube video?](https://stackoverflow.com/questions/6911171/mpmovieplayercontroller-is-playing-youtube-video) and here: [Play Youtube video in MPMoviePlayerController or play RTSP - 3GP link](https://stackoverflow.com/questions/5708236/play-youtube-video-in-mpmovieplayercontroller-or-play-rtsp-3gp-link) with answers claiming such functionality was impossible.

Yet this app, Deja, has exactly the functionality I would like: a seamless MPMoviePlayerController whose frame I have explicit control over. [http://itunes.apple.com/app/deja/id417625158](http://itunes.apple.com/app/deja/id417625158)

How is this done!?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-16T11:28:35.880

将此示例添加到您的项目中实例化*YoutubeStreamPathExtractorTest*

调用**YoutubeStreamPathExtractorTest**实例的***测试***方法。关注日志并快乐

 **```
#import "AFHTTPRequestOperationManager.h"
#import <MediaPlayer/MediaPlayer.h>

typedef void (^CallbackBlock)(NSArray* result, NSError* error);
static NSString* const kYouTubeStreamPathPattern = @"\\\"url_encoded_fmt_stream_map\\\\\":.*?url=(.*?)\\\\u0026";

@interface YoutubeStreamPathExtractorTest : NSObject
- (void)test;
- (void)youtubeURLPath:(NSString*)youtubeURLPath extractStreamURLPathsWithCallback:(CallbackBlock)callback;
@end

@implementation YoutubeStreamPathExtractorTest

- (void) test {
    NSString* path = @"http://www.youtube.com/watch?v=TEV5DZpAXSw";
    [self youtubeURLPath:path extractStreamURLPathsWithCallback:^(NSArray *result, NSError *error) {
        if (error){
            NSLog(@"extracting error:%@",[error localizedDescription]);
        }
        for(NSString* streamURLPath in result) {

            NSLog(@"streamURLPath:%@",streamURLPath);

            /*
                NSURL* url = [NSURL URLWithString:streamURLPath];
                MPMoviePlayerController* mpMoviePlayerController_ = [[MPMoviePlayerController alloc] initWithContentURL:url];
                mpMoviePlayerController_.controlStyle = MPMovieControlStyleDefault;
                [mpMoviePlayerController_ play];
                */

        }
    }];
}

- (void)youtubeURLPath:(NSString*)youtubeURLPath extractStreamURLPathsWithCallback:(CallbackBlock)callback {
    __block NSMutableArray* resultArray = [NSMutableArray new];
    AFHTTPRequestOperationManager* manager = [[AFHTTPRequestOperationManager alloc] initWithBaseURL:nil];
    manager.responseSerializer = [AFHTTPResponseSerializer serializer];
    manager.responseSerializer.acceptableContentTypes = [NSSet setWithObjects:@"text/html", nil];
    [manager GET:youtubeURLPath
      parameters:nil
         success:^(AFHTTPRequestOperation* operation, id responseObject) {
             NSData* data = (NSData*)responseObject;
             NSString* string = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

             NSError* error = nil;
             NSRegularExpression* expression = [NSRegularExpression regularExpressionWithPattern:kYouTubeStreamPathPattern
                                                                                         options:NSRegularExpressionCaseInsensitive
                                                                                           error:&error];

             NSRange range = NSMakeRange(0,[string length]);

             NSArray* matches =  [expression matchesInString:string options:0 range:range];

             for(NSTextCheckingResult* checkingResult in matches) {
                 if ([checkingResult numberOfRanges]>1){
                     NSString* resultStr = [string substringWithRange:[checkingResult rangeAtIndex:1]];
                     //remove extra slashes
                     [resultArray addObject:[resultStr stringByReplacingOccurrencesOfString:@"\\" withString:@""]];
                 }
             }

             if (callback) {
                 callback(resultArray,error);
             }

         } failure:^(AFHTTPRequestOperation* operation, NSError* error) {
             if (callback) {
                 callback(resultArray, error);
             }
         }];

}
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T00:05:25.800

`MPMoviePlayerController`不支持播放 YouTube SWF (Flash) 视频，句号。

您提到的那个应用程序实际上以 MP4 格式播放逐步下载的文件，YouTube 也为其某些内容提供这些文件。这实际上违反了 Apple 的指导方针，因为它将（并且确实）超过了每个应用程序每个时间段的最大渐进式下载量。我很惊讶它通过了 iTunes 的批准。

> 警告：提交在 App Store 中分发的 iOS 应用程序必须符合这些要求。如果您的应用通过蜂窝网络传输视频，并且视频在 5 分钟内超过 10 分钟的持续时间或超过 5 MB 的数据，则您需要使用 HTTP 实时流式传输。（渐进式下载可用于较小的剪辑。）
> 
> 如果您的应用通过蜂窝网络使用 HTTP 实时流媒体，您需要提供至少一个 64 Kbps 或更低带宽的流（低带宽流可能是纯音频或带有静止图像的音频）。
> 
> 这些要求适用于提交在 App Store 中分发以用于 Apple 产品的 iOS 应用程序。Apple 可自行决定拒绝或删除不合规的应用程序。

因此，您的任务归结为有关如何获取通过 YouTube 提供的视频的 MP4 URL 的问题。这部分真的很棘手，Deja 很好地解决了这个问题。只需使用数据包嗅探器，您就会看到它实际上创建了一个为 MPMoviePlayerController 提供数据的本地服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T14:53:11.977

我想这违反了 Youtube ToS，但您可以在此处使用此代码：

[https://github.com/larcus94/LBYouTubeView](https://github.com/larcus94/LBYouTubeView)

它使用简单，就像一个魅力！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T09:53:54.610

试试这个代码：

```
NSString *urlStr=[Your url is here];
NSURL *url = [NSURL fileURLWithPath:urlStr];
MPMoviePlayerController*  moviePlayer = [[MPMoviePlayerController alloc]initWithContentURL:url];
[self.view addSubview:moviePlayer.view];
moviePlayer.view.frame = CGRectMake(set frame is here);  
[moviePlayer play];

[moviePlayer setFullscreen:NO animated:YES];

[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(moviePlayBackDidFinish) 
                                             name:MPMoviePlayerPlaybackDidFinishNotification 
                                           object:nil]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-10T16:07:27.283

Use UIWebView. Copy HtML code video in youtube.

```
UIWevView* movie = [UIWebView alloc] initWithFrame:CGRectMake(0,0,320,460)];

NSString* urlString = @"past HTML code";
[self.webView loadHTMLString:urlString baseURL:nil];

[self.view addSubview:movie]; 
```**

# c++ - CoMarshalInterThreadInterfaceInStream returns 0x800A0062 for Visual Basic 6 classes

> ID：10411251
> 
> 赞同：0
> 
> 时间：2012-05-02T09:42:46.250
> 
> 标签：c++, com, vb6, atl

I have C++/ATL-based COM object with method that accepts interface to allow callbacks:

MIDL

```
[object, uuid(...), dual, nonextensible, oleautomation, pointer_default(unique)]
interface IAsyncEvents : IDispatch{
    [id(1)]
    HRESULT OnProgress([in]BSTR message);
};

[object, uuid(...), dual, nonextensible, pointer_default(unique)]
interface IAsyncWorker : IDispatch{
    HRESULT CallMe(BSTR message, IAsyncEvents* events);
}; 
```

COM Object implements IAsyncWorker interface. The only method "CallMe" expects that client should pass "events" interface to allow callbacks from worker thread. "CallMe" implementation looks like the following:

```
STDMETHOD(CallMe)(BSTR message, IAsyncEvents* events)
    {                       
        IStream *pStm = NULL;
        HRESULT hRes = CoMarshalInterThreadInterfaceInStream(IID_IAsyncEvents, events, &pStm);
        if (hRes != S_OK)
        {
            ATL::CAtlString str;
            str.Format(_T("Failed CoMarshallInterThread... %i"), hRes);
            MessageBox(0, str, NULL, MB_TOPMOST);
            return E_FAIL;
        }

        m_hThread = ::CreateThread(NULL, 0, WorkerFunc, (LPVOID)pStm, 0, &m_dwThreadId);
        return ::GetLastError();
    } 
```

And I try to call "CallMe" from Visual Basic like that:

**MyCallBack Class**

```
Option Explicit
Implements AsyncDllLib.IAsyncEvents

Public Sub IAsyncEvents_OnProgress(ByVal message As String)
    MsgBox (message)
End Sub 
```

**VB6 com-object call code**

```
Dim obj As Object
Set obj = CreateObject("C++ Com Object ProgID")

Dim callback As New MyCallbackClass

obj.CallMe "123", callback 
```

Everything looks ok but suddenly MyCallback class instances fail to be marshalled into stream. Meanwhile I can use "events" interface pointer from C++ implementation from the same thread.

CoMarshalInterThreadInterfaceInStream fails with undocumented error: 0x800A0062

What I do wrong here?

Thank you in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:53:59.887

You cannot marshal private classes, standard marshaling needs a typelib to transport arguments cross-thread.

You can implement `MyCallbackClass` as a public (multi-use or public-not-creatable) class on an ActiveX DLL project in VB6 for marshaling to work or better implement a callback-proxy in your ATL component.

Your `CallMe` will create the proxy on the calling thread passing original VB6 interface then marshal `IAsyncEvents` interface of proxy object to worker-thread.

# c# - getting datagridview row data to textboxes on another form

> ID：10411254
> 
> 赞同：0
> 
> 时间：2012-05-02T09:43:02.527
> 
> 标签：c#, winforms, datagridview

i have a datagridview that show my data in columns. what i'm trying to accomplish is that after choosing a row and pressing edit button a new form will open and split the row for the right text boxes to update the data.

the datagridview row shows different types of data: name,email,date,etc...

any idea? Thanks in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:55:35.700

该站点解释了如何在表单之间发送数据，就像在数据网格中选择正确的单元格一样简单，将信息发送到正确的文本框，对于所有这些。然后将它们送回。[表格之间的数据](http://forum.junowebdesign.com/net-programming/29915-how-pass-data-between-two-forms-c.html)

基础是创建一个可用于获取值的方法，

```
 public string getTextBoxValue()
{
    return TextBox.Text;
} 
```

然后您可以调用该方法在表单之间传递数据，

```
this.Text = myForm2.getTextBoxValue(); 
```

但是，您将发送单元格的值，并使 textbox.text 等于方法的返回这是该理论的一个基本示例，请自己尝试使其适用于您想要的做，如果你做不到，请回来寻求帮助并用代码编辑错误，但只有在你先尝试过自己之后

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T10:48:13.940

您可以创建一个类，例如 MyDataCollection，其属性对应于您的 DataGridView 列。当你按下 Edit 按钮时，创建这个类的一个新实例，用必要的数据填充它，并将它作为参数传递给 EditForm 的构造函数。

```
public class MyDataCollection
{
    public string Name;
    public string Email;
    // -- 
} 
```

在您的主要形式中：

```
void btnEdit_Click(object sender, EventArgs e)
{
    // Create the MyDataCollection instance and fill it with data from the DataGridView
    MyDataCollection myData = new MyDataCollection();
    myData.Name = myDataGridView.CurrentRow.Cells["Name"].Value.ToString();
    myData.Email = myDataGridView.CurrentRow.Cells["Email"].Value.ToString();
    // --

    // Send the MyDataCollection instance to the EditForm
    formEdit = new formEdit(myData);
    formEdit.ShowDialog(this);
} 
```

编辑表单应如下所示：

```
public partial class formEdit : Form
{
    // Define a MyDataCollection object to work with in **this** form
    MyDataCollection myData;

    public formEdit(MyDataCollection mdc)
    {
        InitializeComponent();

        // Get the MyDataCollection instance sent as parameter
        myData = mdc;
    }

    private void formEdit_Load(object sender, EventArgs e)
    {
        // and use it to show the data
        textbox1.Text = myData.Name;
        textbox2.Text = myData.Email;
        // --
    }
} 
```

您也可以忘记 MyDataCollection 类并将整个 DataGridViewRow 传递给 formEdit 的构造函数。

# php - Flv streaming video on website via jwplayer does not play on android iphone

> ID：10411256
> 
> 赞同：0
> 
> 时间：2012-05-02T09:43:04.713
> 
> 标签：php, android, iphone, video-streaming, jwplayer

Hi I tried ustream and it plays well on my android 2.2. Now I intend to use live streaming via jwplayer which unfortunately does not work on iphone or android. Flv streaming video on website via jwplayer does not play on android iphone

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:57:13.813

需要一些 CSS 调整，因为默认 CSS 适用于桌面浏览器，您必须包含所需的移动 CSS

# android - 蓝牙选项出现在选择器列表中

> ID：10411261
> 
> 赞同：4
> 
> 时间：2012-05-02T09:43:34.967
> 
> 标签：android, email, android-intent

我开发了一个发送电子邮件的应用程序。单击电子邮件按钮时，它应该要求用户选择安装在手机中的电子邮件客户端之一。但是，在我的情况下，它还显示了不需要的蓝牙选项。我搜索了很多，但找不到任何解决方案。下面我发布我的代码。

```
public class EtestActivity extends Activity {
/** Called when the activity is first created. */
Button email;
Intent in;
private static final String TAG = "EmailLauncherActivity";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    email = (Button)findViewById(R.id.email);
    email.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            try {
                in = new Intent(Intent.ACTION_SEND);
                in.setType("image/jpg");
                in.setType("plain/text");
                in.setType("application/octet-stream");
                in.putExtra(Intent.EXTRA_EMAIL, new String[]{"pranav_kotauniv@yahoo.co.in","friendlynitish@gmail.com"});
                in.putExtra(Intent.EXTRA_STREAM, Uri.parse("file:///sdcard/android.jpg"));  
                startActivity(Intent.createChooser(in, "mailto:"));
            } catch (Exception e) {
                Log.e(TAG, "email sending failed", e);
            }//catch
        }//onClick
    });
}//onCreate 
```

}//班级

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:06:22.723

尝试使用 ACTION_SENDTO 而不是 ACTION_SEND。这可能会解决您的问题。
[这是API。](http://developer.android.com/reference/android/content/Intent.html#ACTION_SENDTO)
您始终可以使用`PackageManager`并`queryIntentActivities()`展示您自己的自定义对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T03:38:01.527

发送电子邮件的代码。使用 PackageManager(http://developer.android.com/reference/android/content/pm/PackageManager.html)，我们可以避免得到不同的选择。

```
private void sendEpost(String type) {
boolean found = false;
Intent in = new Intent(android.content.Intent.ACTION_SEND);
in.setType("image/jpeg");
in.setType("application/octet-stream");
List<ResolveInfo> resInfo = getPackageManager().queryIntentActivities(in, 0);
if (!resInfo.isEmpty()){
    for (ResolveInfo info : resInfo) {
        if (info.activityInfo.packageName.toLowerCase().contains(type) || 
                info.activityInfo.name.toLowerCase().contains(type) ) {
            in.putExtra(Intent.EXTRA_EMAIL, new String[]{});
            in.putExtra(Intent.EXTRA_SUBJECT,  "subject");
            in.putExtra(Intent.EXTRA_TEXT,     "your text");
            in.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(new File(Environment.getExternalStorageDirectory()
                    .getAbsolutePath().toString()+"/diplomat/"+adapter.readName(touches))));
            in.setPackage(info.activityInfo.packageName);
            found = true;
            break;
        }
    }
    if (!found)
        return;
    startActivity(Intent.createChooser(in, "Select"));
}
}//sendEpost 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:17:11.237

你有 2 个选项来解决这个问题，

首先是，改变你的意图类型`setType("message/rfc822");`引用**[这个](https://stackoverflow.com/questions/6255915/android-intent-chooser-to-only-show-e-mail-option)**。

其次是，更改您的 ACTION 类型`Intent.ACTION_SENDTO`Reffer **[this](https://stackoverflow.com/questions/6506637/only-email-apps-to-resolve-an-intent)**。

# ruby-on-rails-3 - nginx 在 Rails 3 中不提供静态资产

> ID：10411268
> 
> 赞同：6
> 
> 时间：2012-05-02T09:43:51.983
> 
> 标签：ruby-on-rails-3, nginx, assets

Stackoverflowers。我的 Rails nginx 配置有问题。我正在运行一个 Rails 3.0.12 应用程序，而且我对 nginx 还是很陌生。

我似乎无法让 nginx 为静态资产提供服务。对于`/public`文件夹中的每个请求，我都会得到 404。我正在发布到目前为止的 nginx 配置。也许我错过了什么

`nginx.conf`：

```
user rails;
worker_processes  1;
daemon off;

error_log  /var/log/nginx/error.log;
pid        /var/run/nginx.pid;

events {
  worker_connections  2048;
}

http {
  include       /etc/nginx/mime.types;
  default_type  application/octet-stream;

  access_log  /var/log/nginx/access.log;

  sendfile on;
  tcp_nopush on;
  tcp_nodelay on;

  keepalive_timeout  65;

  gzip  on;
  gzip_http_version 1.0;
  gzip_comp_level 2;
  gzip_proxied any;
  gzip_types text/plain text/html text/css application/x-javascript text/xml application/xml application/xml+rss text/javascript;

  server_names_hash_bucket_size 64;

  include /etc/nginx/conf.d/*.conf;
  include /etc/nginx/sites-enabled/*;
} 
```

`sites-enabled/project.conf`：

```
upstream project {
  # fail_timeout=0 means we always retry an upstream even if it failed
  # to return a good HTTP response (in case the Unicorn master nukes a
  # single worker for timing out).

  # for UNIX domain socket setups:
  server unix:/tmp/project.socket fail_timeout=0;
}

server {
  listen 80;
  root /srv/www/project/current/public;
  passenger_enabled on;
  server_name dev.project.eu;
  server_name *.dev.project.eu;

  location / {
      #all requests are sent to the UNIX socket
      proxy_pass  http://project;
      proxy_redirect     off;

      proxy_set_header   Host             $host;
      proxy_set_header   X-Real-IP        $remote_addr;
      proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;

      client_max_body_size       10m;
      client_body_buffer_size    128k;

      proxy_connect_timeout      90;
      proxy_send_timeout         90;
      proxy_read_timeout         90;

      proxy_buffer_size          4k;
      proxy_buffers              4 32k;
      proxy_busy_buffers_size    64k;
      proxy_temp_file_write_size 64k;
      root /srv/wwww/project/current/public;
    }

} 
```

我试过从 中删除`location /`块`project.conf`，但它没有做任何事情，资产仍然不可见。

我也知道`serve_static_assets`Rails 中的 switch，但我宁愿让 nginx 为这些资产提供服务，因为它应该这样做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T13:10:34.323

您需要添加类似的内容（[关于位置的文档](http://nginx.org/en/docs/http/ngx_http_core_module.html#location)）：

```
location / {
  try_files $uri @ruby;
}

location @ruby {
    proxy_pass  http://project;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T03:28:14.230

我知道这个线程已经有一年多了，但我在生产中遇到了同样的问题

让它对我有用的东西是运行

```
rake assets:precompile 
```

在开发中，并取消注释

```
load 'deploy/assets' 
```

即使我使用的是rails 4。

# php - 在 simplexml_load_file 中加载 url 时出错

> ID：10411270
> 
> 赞同：0
> 
> 时间：2012-05-02T09:43:57.223
> 
> 标签：php, xml, io

我有一个 rss 提要，我想在我的页面中阅读，我有一个本地的提要副本，读起来很好，但我需要使用在线版本。从我可以看到我这样做是正确的：

```
 $url ='http//www.numyspace.co.uk/~cgel1/holidays/holidays.xml';
        $holidayDoc = simplexml_load_file($url); 
```

但是我遇到了以下错误：

> 警告：simplexml_load_file() [function.simplexml-load-file]：I/O 警告：未能加载外部实体“http//www.numyspace.co.uk/~cgel1/holidays/holidays.xml”

为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:47:45.563

```
$use_errors = libxml_use_internal_errors(true);
$xml = simplexml_load_file("http://www.numyspace.co.uk/~cgel1/holidays/holidays.xml");
if (!$xml) {
  //throw new Exception("Cannot load xml source.\n");
}
libxml_clear_errors();
libxml_use_internal_errors($use_errors); 
```

你错过了一个冒号

# java - 发生字符串标记错误

> ID：10411271
> 
> 赞同：1
> 
> 时间：2012-05-02T09:43:57.663
> 
> 标签：java, stringtokenizer

有一个我们从中读取的文本文件，然后我们想在对其他文本文件进行一些小的更改后将其写入，但问题是为什么我们使用 `System.out.println`和使用时会产生不同的结果`pwPaperAuthor.println`？

代码是这样的：

```
package cn.com.author;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.util.HashSet;
import java.util.Set;
import java.util.StringTokenizer;

//input:"IndexAuthors1997-2010.txt"
//output:"PaperAuthor1997-2010.txt"
public class PaperAuthors {

    public static void main(String[] args) {

        BufferedReader brIndexAuthors = null;

        BufferedWriter bw = null;

        PrintWriter pwPaperAuthor = null;

        try {
            brIndexAuthors = new BufferedReader(new InputStreamReader(
                    new FileInputStream("IndexAuthors1997-2010.txt")));
            bw = new BufferedWriter(new FileWriter(new File(
                    "PaperAuthor1997-2010.txt")));
            pwPaperAuthor = new PrintWriter(new OutputStreamWriter(
                    new FileOutputStream("PaperAuthor1997-2010.txt")));
            /*
             * line = brIndexAuthors.readLine();
             * 
             * element=line.split("@"); String author=null; StringTokenizer st =
             * new StringTokenizer(element[1],","); while(st.hasMoreTokens()) {
             * author = st.nextToken(); pwPaperAuthor.println(element[0] + "+" +
             * author); //~i++; }
             */
            String line = null;
            String element[] = new String[3];
            String author = null;
            int i = 0;
            while ((line = brIndexAuthors.readLine()) != null) {
                element = line.split("#@");
                StringTokenizer st = new StringTokenizer(element[1], ",");

                int num=st.countTokens();

                while (st.hasMoreTokens()) {
                    author = st.nextToken();
                     pwPaperAuthor.println(element[0]+"@"+author+"@"+element[2]);
                    bw.write(element[0] + "@" + author + "@" + element[2]);
                    bw.newLine();
                    System.out.println(element[0]+"@"+author+"@"+element[2]);
                    i++;
                }
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {

        }
    }
} 
```

# 输出

如果

```
System.out.println(element[0]+"@"+author+"@"+element[2]);------>620850@Henk Ern 
```

如果

```
pwPaperAuthor.println(element[0]+"@"+author+"@"+element[2]);
                        ----->620850@Henk Ernstblock@2001 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:58:47.197

使用基于流的 API，您无法在同一个循环中读取和写入文件。您将必须创建一个新文件并复制所有相同的内容，添加新内容。您现在正在做的事情具有不可预测的行为。如果您仍想同时读写，则必须使用`RandomAccessFile`，但这要复杂得多。

# php - 在 documentroot（cgi-bin 文件夹）之外运行 PHP 文件

> ID：10411272
> 
> 赞同：1
> 
> 时间：2012-05-02T09:44:04.583
> 
> 标签：php, xampp, virtualhost, cgi-bin

我正在与一位同事合作，在 XAMPP 中的 MAC 上设置他们的本地环境，在 Windows 上，我的虚拟主机如下所示。

当我访问像[http://domain.local/cgi-bin/handler.php](http://domain.local/cgi-bin/handler.php)这样的 URL 时，Web 服务器会正​​确处理 PHP，但是在他的服务器上我们会收到 500 服务器错误和此消息...

```
The server encountered an internal error and was unable to complete your request.

Error message: 
Premature end of script headers: 
```

我们尝试将 cgi-bin 文件夹的名称更改为其他名称，因为我注意到 httpd.conf 中有另一个别名，但这没有效果......所以在我看来问题与权限相关。

我们认为别名设置正常，因为访问不存在的[http://domain.local/cgi-bin/filenothere.php会按预期抛出 404，任何 .html/.pl 文件都无法执行。](http://domain.local/cgi-bin/filenothere.php)

cgi-bin 文件夹中存在的权限是...

rwxrwxrwx 戴夫员工

并且归用户和组所有....

戴夫员工

虚拟主机

```
<VirtualHost *:80>
    ServerAdmin webmaster@example.com
    ServerName  www.domain.local
    ServerAlias domain.local
ServerAlias api.domain.local

    # Indexes + Directory Root.
    DirectoryIndex index.php
    DocumentRoot E:/home/www/www.domain.co.uk/htdocs/

    # CGI Directory
    ScriptAlias /cgi-bin/ E:/home/www/www.domain.co.uk/cgi-bin/
    <Location /cgi-bin>
            Options +ExecCGI
    </Location>

    # Logfiles
    ErrorLog  E:/home/www/www.domain.co.uk/logs/error.log
    CustomLog E:/home/www/www.domain.co.uk/logs/access.log combined
</VirtualHost> 
```

知道是什么导致此 PHP 文件无法执行吗？

**更新** 尝试在 PHP 文件的开头添加一个标头来说明内容是 PHP，现在这只是输出 PHP 代码。

就好像在别名中指定的任何路径都是可访问的，但服务器不知道如何执行内容，这适用于 HTML 和 PHP

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T11:57:14.010

我认为您的 cgi-bin 需要一个部分。

您的服务器可以向您显示脚本源的事实意味着服务器至少具有 /file/system/path/to/cgi-bin 和 IIRC 的读取权限，这与 ScriptAlias b/c ScriptAlias 期望 /file/system/path/出于安全原因，to/cgi-bin 不可访问。我认为您的解决方案应该类似于以下内容：

```
<Directory /file/system/path/to/cgi-bin>
    Options ExecCGI
    SetHandler cgi-script
</Directory 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T06:53:20.490

鉴于 Apache 的 PHP 模块可以直接执行它们，因此（非常）很少需要将 PHP 脚本作为 CGI 运行。尝试将此添加到您的 Apache 配置中：

```
<FilesMatch \.php$>
    SetHandler application/x-httpd-php
</FilesMatch> 
```

之后只需将 PHP 脚本放入站点的文档根目录中，看看它们是否有效。您需要**删除 URL 的 /cgi-bin/ 部分**。

您说您在 Mac 上设置 XAMMP，但您的路径前有一个驱动器号 (E:)。OS X 没有像 Windows 这样的驱动器号，这也可能导致（部分）您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T10:13:56.583

我不太了解使用的设置。但我认为你应该通过以下链接。可能会得到一些帮助。

1.  [http://www.sean-barton.co.uk/2009/02/setting-up-a-phpmysql-local-development-environment-on-a-mac-doing-it-properly/](http://www.sean-barton.co.uk/2009/02/setting-up-a-phpmysql-local-development-environment-on-a-mac-doing-it-properly/)
2.  [http://docs.joomlabamboo.com/using-joomla/setting-up-a-quick-start-package-on-your-local-server-xampp-pc](http://docs.joomlabamboo.com/using-joomla/setting-up-a-quick-start-package-on-your-local-server-xampp-pc)
3.  [http://www.adobe.com/devnet/dreamweaver/articles/setup_php.html](http://www.adobe.com/devnet/dreamweaver/articles/setup_php.html)
4.  [如何为旧版 PHP 应用程序创建 Mac OS X 开发环境？](https://stackoverflow.com/questions/9731355/how-to-create-mac-os-x-dev-environment-for-legacy-php-app)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T13:02:33.380

假设 PHP 在安全模式下运行，您可能需要“打开”您的`cgi-bin`目录，因为用户 (PHP) 脚本的执行仅限于 DocumentRoot 及其子文件夹。

据我所知，你可以通过两种方式做到这一点

**1\. 编辑你的`php.ini`**

找到包含 的行`open_basedir`。如果行首有注释 - 分号 - 将其删除。然后添加您的`cgi-bin`目录。

`open_basedir = "E:\home\www\www.domain.co.uk\cgi-bin\"`

如果需要打开多个目录，可以使用分号`;`作为分隔符。在基于 Linux 的服务器上，使用冒号`:`

`open_basedir = "E:\home\www\www.domain.co.uk\cgi-bin\;E:\home\www\www.domain.co.uk\another_dir\"`

在像我这样的情况下，您的服务器由第三方托管，您需要第二个选项（好吧）

**2\. 编辑你的虚拟主机**

将以下内容添加到您的 VirtualHost，即之后`DocumentRoot`：

`php_admin_value open_basedir "E:\home\www\www.domain.co.uk\cgi-bin\"`

与上述相同的规则适用于多个目录以及 Linux 和 Windows 系统之间的差异。

希望有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T16:42:57.237

你知道 PHP 是作为 CGI 程序运行还是作为 web 服务器模块运行？如果您可以使 phpinfo() 页面正常工作（可能来自网站根目录内的常规文件夹），您应该能够找到这一点。如果您作为网络​​服务器模块运行，那么您应该在顶部附近有一个部分，其标题为`Server API`（`Apache 2.0 Handler`或等效）。

从这些页面：

*   [https://bugs.php.net/bug.php?id=13316](https://bugs.php.net/bug.php?id=13316)
*   [http://php.net/manual/en/install.unix.commandline.php](http://php.net/manual/en/install.unix.commandline.php)
*   [http://gallery.menalto.com/node/8955](http://gallery.menalto.com/node/8955)

...似乎可能是由于 PHP 作为 CGI 脚本运行，或者 PHP 与另一个 CGI 处理程序之间存在冲突。

第三个链接页面上的一位发帖人发现，他们的类似`end of script headers`问题已通过删除/注释掉`Options +ExecCGI`.htconfig / vhosts 文件中的行来解决。

可能值得阅读上述链接以查看您的问题是否相关。

# command-line - Play 框架中类似 Django 命令的命令行

> ID：10411274
> 
> 赞同：2
> 
> 时间：2012-05-02T09:44:12.277
> 
> 标签：command-line, playframework

我想在 Play Framework Project 中创建一个 Java 函数，并想在终端中执行它，如 Django 命令，我的目的是在准备好后在 cron 中运行它。

有可能这样做吗？对不起，也许这听起来很傻，但我不是 java 开发人员，我是 python/Django 开发人员，并要求帮助另一个团队。不管怎么说，还是要谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:57:59.647

由于 play 强烈支持 RESTful 开发方法，因此您应该能够通过明确定义的 URL 调用 Play 操作，然后使用 CURL 通过该 URL 调用您的操作。

但是，您也可以使用 Jobs in Play 的概念。播放作业旨在在您的应用程序中提供类似 CRON 的功能，而无需依赖外部调度机制。

# c# - Intelligencia UrlRewriter force lowercase URLs

> ID：10411275
> 
> 赞同：1
> 
> 时间：2012-05-02T09:44:21.100
> 
> 标签：c#, asp.net, .net-3.5, url-rewriting

What is the best way to force lower case URLs on rewrite?

*   Global.asax?
*   web.config?

All has failed...what am I doing wrong? See the following:

**Global.asax**

I don't know which method to use?

```
void Application_BeginRequest(object sender, EventArgs e)
    {
        HttpContext context = HttpContext.Current;
        string path = Request.Path.ToLower();

        context.RewritePath(path);
    } 
```

**web.config**

I have tried using the web.config method but can't manage:

```
<rewrite url="(.*)$" to="$1" permanent="true" /> 
```

How can I change the above code so that it automatically force the url to lower case?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:38:23.227

您是否尝试过 IIS 的 URL 重写模块？

[http://www.iis.net/download/urlrewrite](https://i.stack.imgur.com/qt6HG.png)

小写有一个特殊的规则： ![在此处输入图像描述](../Images/13d54b3fadda84f150bee7616690b356.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:52:53.003

我们没有办法强迫你`your user`写小写的网址。生成的所有 url`you`都可以是小写。如果您的 url 中出现大写字母，您可以将用户重定向到小写字母版本。

```
void Application_BeginRequest(object sender, EventArgs e)
{
    string path = Request.Path;
    if (ContainsUpperChars(path))
    {
        HttpContext.Current.Response.Redirect(Request.Path.ToLower());
    }
}

bool ContainsUpperChars(string str) { some code to test for uppercase chars } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-10T15:30:43.487

在 web.config 中使用 url rewrite 标签。如果 vs2012 无法识别该标签，请运行此页面上的脚本：http://blog.vanmeeuwen-online.nl/2013/04/visual-studio-2012-xml-intellisense-for.html [这](http://blog.vanmeeuwen-online.nl/2013/04/visual-studio-2012-xml-intellisense-for.html) 是另外两个链接我过去常常想办法。 [ScottGu](http://weblogs.asp.net/scottgu/tip-trick-fix-common-seo-problems-using-the-url-rewrite-extension)的博客和 [Meligy 的博客](http://gurustop.net/blog/2012/09/01/asp-net-mvc-seo-lowercase-url-iis-rewrite-net45-nuget/)

```
<system.webServer>                                               
<rewrite>
            <rules>
                <rule name="LowerCaseRule" stopProcessing="true">
                    <match url="[A-Z]" ignoreCase="false" />
                    <action type="Redirect" url="{ToLower:{URL}}" />
                </rule>
            </rules>
        </rewrite>
</system.webServer> 
```

# svn - svn：忽略不工作

> ID：10411277
> 
> 赞同：2
> 
> 时间：2012-05-02T09:44:27.447
> 
> 标签：svn, tortoisesvn, svnignore

我通过 Tortoise-SVN 输入了以下 svn-ruke：

> svn：忽略调试。斌 对象。pkgobj 。包。*.suo 。（递归应用）

但是当我提交我的文件夹时， /bin/* 和 /obj/* 文件夹仍然被提交（抛出树冲突）任何线索出了什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T09:50:12.407

`svn:ignore`仅适用于某些命令（例如`svn add`），仅适用于未版本控制的项目。如果文件夹已经被版本化（即在存储库中），它仍然会被提交。您首先需要`svn delete`它并提交删除。

# ios - 如何在 IBAction 中使用 Core Data 插入数据

> ID：10411282
> 
> 赞同：0
> 
> 时间：2012-05-02T09:44:46.310
> 
> 标签：ios, cocoa, core-data

我想创建一个按钮，即“完成”，按下时，将所有数据保存到核心数据中，我正在使用下面的代码

```
 - (IBAction)done:(id)sender
{
    Player *player = [[Player alloc] init];
    player.name = self.nameTextField.text;
    player.game = game;
    player.rating = 1;

    [self.delegate playerDetailsViewController:self didAddPlayer:player];

    NSManagedObjectContext *context = [self managedObjectContext];
    Player *player = [NSEntityDescription
                                      insertNewObjectForEntityForName:@"Player"
                                      inManagedObjectContext:context];
    player.name = self.nameTextField.text;
    player.game = game;
    player.rating = 1;

    NSError *error;
    if (![context save:&error]) {
        NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
    }

} 
```

但我不断收到错误，例如：

语义问题：使用未声明的标识符“NSEntityDescription”；你的意思是“kSecAttrDescription”吗？

实例消息的接收器类型“PlayerDetailsViewController”未声明具有选择器“managedObjectContext”的方法

重新定义“玩家”

使用未声明的标识符“NSEntityDescription”；你的意思是“kSecAttrDescription”吗？

错误的接收器类型“CFTypeRef”（又名“const void *”）

例如消息的接收器类型“NSManagedObjectContext”是前向声明

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:24:20.223

确保你有

```
#import <CoreData/CoreData.h> 
```

在您的标题中的某个位置，直接在您的文件中或在您的应用程序的 pch 文件中。当您创建 Core Data 项目时，它应该默认存在，但如果您稍后添加 Core Data，它可能会丢失。下面是一个核心数据项目的 pch 的样子：

```
#import <Availability.h>

#ifndef __IPHONE_5_0
#warning "This project uses features only available in iOS SDK 5.0 and later."
#endif

#ifdef __OBJC__
  #import <UIKit/UIKit.h>
  #import <Foundation/Foundation.h>
  #import <CoreData/CoreData.h>
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:45:39.023

您使用相同的变量名称定义 Player 两次：

```
Player *player = [[Player alloc] init]; 
```

和

```
Player *player = [NSEntityDescription insertNewObjectForEntityForName:@"Player" inManagedObjectContext:context]; 
```

第二个应该有不同的变量名。此外，您不应该通过 alloc/init 分配 CoreData 对象。此外，使用 NSEntityDescription 创建的播放器调用 didAddPlayer。最好的地方是保存后：因为只有在那里你确定它被正确保存了。

如果您没有使用 ARC，也会有内存泄漏，就像您使用 alloc/init 一样，并且没有释放。

# jquery - Jquery对话框表宽度选择以前的值

> ID：10411284
> 
> 赞同：0
> 
> 时间：2012-05-02T09:44:48.017
> 
> 标签：jquery, html, jquery-ui

我有一个 Jquery 对话框，如下所示：

```
$("#dvPopup").dialog({
        autoOpen: false,
        width: 450,
        height: 300,
        buttons: [{
            text: "Ok",
            click: function () { $(this).dialog("close"); }
        }
        ]
    }); 
```

我有以下函数，我在单击网格中的链接时调用它（表中的每一行都有一个弹出链接）：

```
function showNotes(Id) {
    var grid = $("#NotesPopup").data("tGrid");
    grid.ajax.selectUrl = "/Test/GetNotes?Id=" + Id;
    grid.rebind();
    $("#dvPopup").dialog("open");
    var width= $("#dvPopup .t-grid >table").width();

    if (width > 450) {
        $(".ui-widget-content").css("width", width + 30);
    }
    else{
        $(".ui-widget-content").css("width", 450);
    }
    $(".ui-widget-content").css("height", 'auto');        
} 
```

我在 dvPopup 中有一个表格，我根据表格的宽度设置弹出窗口的宽度。我的问题是我加载了前一个表的宽度，而不是加载了当前表，当我打开和关闭同一个弹出窗口两次时，它按预期工作。上面的代码有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:51:26.573

我破解了它。我使用了不同的选择器而不是`"#dvPopup .t-grid >table`使用了解决我的问题的对话框选项。这是解决方案：

```
function showNotes(Id) {
 var grid = $("#NotesPopup").data("tGrid");     
 grid.ajax.selectUrl = "/Test/GetNotes?Id=" + Id;
 grid.rebind();
 $("#dvPopup").dialog("open");
 var width= $(".table_1").width();
  if (width > 450) {
      $("#dvPopup").dialog('option', 'width', test + 30);
 }     
else{
      $("#dvPopup").dialog('option', 'width', test + 30);
 }
  $("#dvNotesPopup").dialog('option', 'height', 'auto');
 } 
```

# jquery - 添加单击事件以列出列表树中的项目

> ID：10411292
> 
> 赞同：1
> 
> 时间：2012-05-02T09:45:08.360
> 
> 标签：jquery, tree, onclick, click, html-lists

我在 Html 中有一个列表树，例如：

```
<ul class="myTree">
    <li class="treeItem">Category 1
        <ul>
            <li class="treeItem">Subcategory 1 1</li>
            <li class="treeItem">Subcategory 1 2
                <ul>
                    <li class="plus"><input type="text" value="Add a product"/></li>
                </ul>
            </li>
        </ul>
    </li>
    <li class="treeItem">Category 2
        <ul>
            <li class="treeItem">Subcategory 1 1</li>
            <li class="treeItem">Subcategory 1 2
                <ul>
                    <li class="plus"><input type="text" value="Add a product"/></li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

如您所见，这是一个详细的列表。

现在我需要的是那些“treeItem”类元素上的点击事件，它将检索相应的名称（Category 1、Subcategory 1 1 等）。

我想出了这个：

```
$(".myTree").on("click", ".treeItem", function() {
    var categoryName = $(this).text();
    alert(categoryName);
}); 
```

我现在面临的唯一问题是首先，`categoryName`包含

```
Category 2

                Subcategory 1 1
                Subcategory 1 2 
```

当我单击“级别 1” `<li>`（例如类别 1）时。我可以通过向我的 's 添加一些`catname`属性来绕过它，`<li>`但最重要的是，当我单击“级别 2” `<li>`（例如子类别 1 1）时，它首先触发级别 2 上的点击事件`<li>`，执行这些操作，然后触发一个新的1 级的点击事件`<li>`...

这样做的原因很明显，但我需要一种方法让它只在最高级别发生一次（当我点击“子类别 1 1”时，它不应该在“类别 1”上触发事件）。

还值得注意的是，这棵树将自动生成，这意味着我可以将 my 标记`treeItem`为其他一些类，例如“level1”或类似的东西，但如果我可以避免这种情况，我会喜欢它。

......好吧，这个问题可能需要一个总结，因为我觉得我有点迷失了......

1.  我需要一个列表树上的点击事件
2.  我需要仅在最高级别（最深）触发该点击事件。
3.  添加一些类名是可能的，但希望避免。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T09:51:33.250

首先，您需要使用`event.stopPropagation`来阻止事件在 DOM 中冒泡并重复自身。然后你需要在`li`. 试试这个：

```
$(".myTree").on("click", ".treeItem", function(e) {
    e.stopPropagation();
    var categoryName = $(this).contents().filter(function() {
        return !!$.trim(this.innerHTML||this.data);
    }).first().text();
    alert(categoryName);
}); 
```

[**示例小提琴**](http://jsfiddle.net/53Eg7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:51:17.713

您需要`event.stopPropagation()`在活动中使用。

```
$(".myTree").on("click", ".treeItem", function(event) {
    var categoryName = $(this).text();
    alert(categoryName);
    event.stopPropagation()
}); 
```

# actionscript-3 - 为什么在 ActionScript 中迭代泛型对象会给我值而不是键？

> ID：10411296
> 
> 赞同：0
> 
> 时间：2012-05-02T09:45:22.873
> 
> 标签：actionscript-3, dictionary

我可能正在做一些非常愚蠢的事情，但我不明白为什么下面的代码不起作用......

在这里，我创建了一个名为 spellbook 的通用对象：

```
// A list of all the player's spells
public var spellBook:Object = {}; 
```

在这里，我向法术书添加了一个键值对：

```
spellBook["bubble"] = new BubbleSpell(spellBook); 
```

在这里我尝试输出法术书的内容：

```
trace("Spells initialised.  Available spells are:");
for each (var _spell:String in spellBook)
{
    trace("  ", _spell, " : ", spellBook[_spell]);
} 
```

但这是我得到的输出：

```
Spells initialised.  Available spells are:
   [object BubbleSpell]  :  undefined 
```

我不明白为什么它不输出：

```
Spells initialised.  Available spells are:
   bubble : [object BubbleSpell] 
```

??

就好像我正在迭代法术书中的值，而不是键......这是怎么回事？到目前为止我看到的所有文档似乎都表明这是迭代字典的正确方法（这是一种通用对象......）我是否需要调用一个方法来获取键而不是通用值对象？

如此迷茫！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T09:49:17.550

`for each`用于迭代值，您想使用`for`迭代键的循环，例如：

```
var mySpells = { 
    speedy: new SpeedySpell(),
    sleepy: new SleepySpell()
};

for (var key : String in mySpells) {
    trace("key: " + key + " value: " + mySpells[key]);
} 
```

请注意，在迭代 a 中的键时，`Dictionary`您应该将`key`值保留为 untyped ( `*`)，因为 Dictionary 的键可以是任何类型（而`Object`的键只能是 type `String`）。

一个常见的技巧是创建一个实用函数，该函数将对象的键提取到一个`Array`更容易的迭代中：

```
function getKeys(source : Object) : Array {
    const result : Array = [];
    for (var key : * in source) {
        result.push(key);
    }
    return result;
} 
```

然后，您可以使用此辅助函数：

```
trace(getKeys(mySpells)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T09:49:01.263

因为您使用的是`for each`循环。改用`for`循环：

```
for (var key:* in spellBook) {
    trace(key + ': ' + spellBook[key]);
} 
```

# java - 当 cookie 被标记为 httpOnly 时，从 Flash 或 Java Applet 向服务器发送会话 ID

> ID：10411297
> 
> 赞同：1
> 
> 时间：2012-05-02T09:45:24.647
> 
> 标签：java, flash, jsessionid, httponly

是否可以使用 Flash 或 Java Applet 将文件上传到服务器，其中目标 URL 通过某种形式的身份验证受到保护，并且 cookie 被标记为“httpOnly”，而不必禁用 httpOnly 或包含会话 ID在目标 URL 中还是作为 POST 中的另一个参数？

也就是说，使用[Uploadify](http://www.uploadify.com/)之类的东西，有什么方法可以将会话 ID 发送到服务器，而无需将其添加到目标 URL（例如[http://www.example.com:8080/mysite/upload;jsessionid=ABCDEF](http://www.example.com:8080/mysite/upload;jsessionid=ABCDEF) ) ~~，作为 Uploadify 执行的 POST 中的参数~~，还是禁用 httpOnly 标志？

作为参考，我们使用的是 Java 1.6 和 Glassfish 3.1。

我环顾四周，但似乎不可能 - 我必须选择上述三个选项之一。

鉴于此，哪些选项是“最不邪恶的”？或者，如果有一些关于如何处理这种情况的指导，将不胜感激。

我不能只是不使用 Flash/Java，因为我们将它用于文件上传，我们需要允许用户一次选择多个文件 - 期望他们将文件一一添加到标准 HTML 上传选择不会'飞。我们需要支持旧版本的 IE，所以去 HTML5 也行不通。

要求用户上传档案*可能*会飞，但这将要求他们改变他们的行为，这意味着我们目前在客户端进行的大量验证将不可用，这在您处理时会很痛苦带有大文件和慢速链接。所以，再一次，一点也不理想。

# iphone - UITableview 文本对齐在 iPhone 中不起作用

> ID：10411301
> 
> 赞同：0
> 
> 时间：2012-05-02T09:45:41.627
> 
> 标签：iphone, cocoa-touch, uitableview

首先我很抱歉提出这个疑问。

我创建了一个表格视图单元格并尝试将其对齐到中心。但这无济于事。只是在左侧对齐。

这是我使用的代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    if(indexPath.section == 0){

    SDSCaseListCustomCell *customCell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
//    if (customCell == nil) 
    {
        NSArray *cells =[[NSBundle mainBundle] loadNibNamed:@"SDSCaseListCustomCell" owner:nil options:nil];

        for (UIView *view in cells) 
        {
            if([view isKindOfClass:[UITableViewCell class]])
            {
                customCell = (SDSCaseListCustomCell*)view;
            }
        }
    }
    SDSCase *cases  = [caseList objectAtIndex:indexPath.row];

    customCell.doctor.text = cases.referredDoctor;
    customCell.hospital.text = cases.hospital;  
    //customCell.time.text = cases.referredDoctor;  
    customCell.caseId.text =cases.caseId;  

    return customCell;
    }
    else 
    {
        UITableViewCell  *loadMore = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (loadMore == nil) 
        {

            loadMore = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

        }

        loadMore.textLabel.text = @"loadMore";
         loadMore.textLabel.textAlignment = UITextAlignmentCenter; 

            return loadMore;
    }

} 
```

任何人都可以帮我解决我哪里出错了。

预先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:51:17.280

使用[缩进级别](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/occ/instp/UITableViewCell/indentationLevel)

> indentationLevel 调整内容缩进的单元格的缩进级别。
> 
> @property(nonatomic) NSInteger indentationLevel Discussion 该属性的默认值为零（无缩进）。每个缩进级别的宽度由 indentationWidth 属性确定。
> 
> 可用性 适用于 iOS 2.0 及更高版本。在 UITableViewCell.h 中声明

编辑：

如果您愿意，您可以创建自己的标签并作为子视图添加到 contentView。您不能更改 textLabel 的对齐方式，对齐方式由 UITableViewCellStyleSubtitle 控制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:58:25.683

对于 uitableview 单元格的所有格式和样式，在 SDSCaseListCustomCell 类中实现方法 layoutsubviews 并在其中执行您想做的任何事情

像

```
@implementation SDSCaseListCustomCell
.
.
.
-(void) layoutSubviews
{
    [super layoutSubviews];
    CGRect tFrame =  self.textLabel.frame;
    tFrame.size.width = 235;
    self.textLabel.frame= tFrame;
    self.textLabel.textAlignment = UITextAlignmentCenter;

}
.
.
.
@end 
```

# c# - 如何使用 TcpClient 和 SslStream 从 hotmail 帐户获取最新邮件

> ID：10411309
> 
> 赞同：0
> 
> 时间：2012-05-02T09:45:59.997
> 
> 标签：c#, windows, tcpclient, hotmail, sslstream

我创建了一个 Windows 测试应用程序，我在其中连接到我的 hotmail 帐户并检查那里的未读邮件。目前通过我的应用程序，我从我的 hotmail 帐户获取最后一封邮件。

如何获取最新邮件以及是否可以使用 SSLStream 对象获取最新邮件的主题和正文。

我在这里发布我的代码。请帮助我。任何适当的帮助将不胜感激。写“获取第一封邮件”的地方，我只得到第一封邮件的总字节数。请帮助我得到第一个电子邮件主题和正文。

```
 TcpClient mail = new TcpClient();
        SslStream sslStream;
        int bytes = -1;
        mail.Connect("pop3.live.com", 995);
        sslStream = new SslStream(mail.GetStream());
        sslStream.AuthenticateAsClient("pop3.live.com");

        byte[] buffer = new byte[2048];
        // Read the stream to make sure we are connected
        bytes = sslStream.Read(buffer, 0, buffer.Length);
        string message = Encoding.ASCII.GetString(buffer, 0, bytes);
        MessageBox.Show(message);

        //Send the users login details
        sslStream.Write(Encoding.ASCII.GetBytes("USER user_name\r\n"));
        bytes = sslStream.Read(buffer, 0, buffer.Length);
        string message1 = Encoding.ASCII.GetString(buffer, 0, bytes);
        MessageBox.Show(message1);

        //Send the password                        
        sslStream.Write(Encoding.ASCII.GetBytes("PASS password\r\n"));
        bytes = sslStream.Read(buffer, 0, buffer.Length);
        string message2 = Encoding.ASCII.GetString(buffer, 0, bytes);
        MessageBox.Show(message2);

        // Get the first email 
        sslStream.Write(Encoding.ASCII.GetBytes("RETR 1\r\n"));
        bytes = sslStream.Read(buffer, 0, buffer.Length);
        string message4 = Encoding.ASCII.GetString(buffer, 0, bytes);
        MessageBox.Show(message4);

        string str = string.Empty;
        string strTemp = string.Empty;
        StreamReader reader = new StreamReader(sslStream); 
        while ((strTemp = reader.ReadLine()) != null)
        {

            // find the . character in line
            if (strTemp == ".")
            {
                break;

            }
            if (strTemp.IndexOf("-ERR") != -1)
            {
                break;

            }
            str += strTemp;

        }
        MessageBox.Show(str);
    } 
```

通过对代码进行一些修改，我可以访问 hotmail 帐户。但是当我尝试访问 AOL 帐户时使用相同的代码。我收到 IO 异常。谁能帮助我如何使用此代码连接到 AOL 邮件系统。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:50:17.640

我认为您必须实现 pop 协议才能获取 pop 服务器的电子邮件；在你的情况下hotmail。[你会在这里](http://www.codeproject.com/Articles/261607/Receiving-Mail-through-the-POP3-Protocol-MIME-Pars)找到关于从 hotmail/gmail 等 pop3 服务器打开邮件的好文章

# bash - 这个 bash 脚本代码行是什么意思

> ID：10411312
> 
> 赞同：0
> 
> 时间：2012-05-02T09:46:10.823
> 
> 标签：bash, shell

我是 shell 脚本的新手，我在给定的脚本中发现了以下代码行。

有人可以解释一下以下代码行的含义

1.  `_filecount=echo ${_filelist} | wc -w | awk '{ print $1 }'`

2.  `printk "archiveWLS(): ${_filecount} file(s)"`

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:57:56.037

```
_filecount=echo ${_filelist} | wc -w | awk '{ print $1 }' 
```

`wc -w`: wc 是字数，wordcount 统计字数、行数、字符等，-w 只输出字数。

输出通过管道传送到 awk，只打印输出的第一个字。如果你使用

```
 wc -w FILE 
```

文件名将被打印出来，使用 awk 将其剥离是有意义的。使用没有文件名的管道输出来执行此操作是多余的。

作为分配，该行应改为：

```
_filecount=$(echo ${_filelist} | wc -w ) 
```

没有 $(...) 或反引号，它不起作用，并且 filecount 只是分配了单词“echo”。似乎是一个写得很糟糕的脚本。

printk 没有在 bash 中定义，也不是来自 coreutils 的完善的 gnu 程序。

也许它是在脚本本身中定义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:58:00.990

它将 _filelist 变量中的字数存储到 _filecount 中。阐述：

`_filecount=`` `echo ${_filelist} | wc -w | awk '{ print $1 }'``
你必须把它包在`s下，因为这是规则。

**echo将****_filelist**中存储的内容分发给**wc**。

**wc （字计数器）**接收它（这种中间结果的传递称为管道），并且因为它是使用**-w**选项调用的，所以它已经只向**awk**提供了字数，并将行数和字符数保留给自己.

**awk**依次打印出提供给它的内容的第一列（ awk '{ print $1 }'`）。

**wc**在这里只提供 1 列，即字数，所以调用**awk**实际上是多余的。

`printf "archiveWLS(): ${_filecount} file(s)"`

将 _filecount 的值替换为字符串并将其提供给标准输出流，这恰好是您的 shell 输出窗口。就是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:47:52.590

这个脚本所做的基本上什么都没有。

```
_filecount=echo ${_filelist} | wc -w | awk '{ print $1 }' 
```

这行在语法上是有效的，但不太可能是正确的。

因为`echo`出现在它所在的位置，它被解释为仅在以下命令期间存在的临时变量赋值，因此，环境变量`_filecount`将`echo`在命令运行期间存储在变量中的值为`_filelist`; 因为，我想，`_filelist`不包含命令名称，而是包含一个或多个非可执行文件的名称，你会得到一个`command not found`错误。

该行的其余部分无关紧要。由于该`${_filelist}`命令没有向 stdout 输出任何内容，因此没有任何内容被重定向到`wc -w`. `wc`将报告计算了 0 个单词，并且该值将传递给`awk`，这将去除前导空格。

你可能想说的更像是

```
_filecount=$(echo ${_filelist} | wc -w | awk '{ print $1 }') 
```

它将执行`echo`管道并将结果存储在`_filecount`变量中。

将文件列表存储在这样的以空格分隔的字符串中并不是一个好主意（一方面，文件的名称中可以包含空格），而是使用`bash`数组，如下所示：

```
_filelist=("file1.txt" "file2.txt") 
```

您可以将其扩展为带有`"${_filelist[@]}"`, 所有正确引用的文件列表，您现在可以通过以下方式获取文件数：

```
_filecount=${#_filelist[@]} 
```

哪个更快（在进程中执行而不是调用外部实用程序）并且更可靠（不依赖于“一个文件就是一个单词”语义）。

至于这条线：

```
printk "archiveWLS(): ${_filecount} file(s)" 
```

由于没有调用 bash 内置`printk`函数，也没有调用标准实用程序`printk`，因此结果很可能是：

```
-bash: printk: command not found 
```

你可以用`printf`这个：

```
printf "archiveWLS(): ${_filecount} file(s)" 
```

输出将是

```
archiveWLS(): 0 file(s) 
```

`0`的值在哪里`_filecount`。

虽然，最好说：

```
printf 'archiveWLS(): %s file(s)\n' "${_filecount}" 
```

这将输出与上述相同的内容，最后还包含一个换行符，并且更易于维护。

# linux - 在linux上创建硬盘错误

> ID：10411313
> 
> 赞同：1
> 
> 时间：2012-05-02T09:46:21.840
> 
> 标签：linux, corruption, block-device

我想在我的 linux 机器上创建硬盘驱动器错误 - 这样我就可以测试我正在编写的应用程序在出现无法纠正的错误时是否正确执行。

我有一个来自硬盘制造商的应用程序，它会在驱动器上创建坏扇区，但它只是 Windows - 并且会涉及很多磁盘的插入和拔出，因为我在 linux 平台上。

我看过之前的这篇文章：[模拟有读取错误的故障块设备？](https://stackoverflow.com/questions/1870696/simulate-a-faulty-block-device-with-read-errors)但不能使用它，因为我没有 dmsetup 可用。

我知道我可以使用 dd 通过在文件上写入随机数据来损坏文件，但我想创建一个坏扇区，而不是可读但损坏的文件。

非常感谢任何提示

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:55:06.883

创建坏块是一个非常糟糕的主意，今天每个听盘都有一个单独的空间来替换坏块，所以你会先浪费这个，等你的磁盘死了，很快你就可以把它扔掉。您应该使用“模拟有故障的块...”，dm（设备映射器）很简单，而且不难设置！

# java - selenium2.0异常问题如何处理

> ID：10411314
> 
> 赞同：0
> 
> 时间：2012-05-02T09:46:25.613
> 
> 标签：java, selenium, exception-handling, webdriver, selenium-webdriver

初学selenium2.0请教各位大侠网页时抛出异常。selenium2.0是如何捕获和处理页面异常的？

我不想因为不寻常的问题而停下来让整个测试过程。有没有类似qtp恢复功能的场景？如果我们平时遇到这个异常问题是如何解决的...

谢谢你！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:53:23.603

查看[有关异常的 Oracle Java 教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/)。

简短的回答是，所有 WebDriver 方法都会抛出`Exceptions`您可以捕获和处理的特定类型。

```
WebElement elem = null;
try {
    elem = driver.findElement(By.id("someId"));
} catch (NoSuchElementException e) {
    log.error(e.getMessage());
    throw e;    // or not if this error was expected, program then continues
} 
```

# php - 如何对 CakePHP 多维数组进行排序？

> ID：10411315
> 
> 赞同：1
> 
> 时间：2012-05-02T09:46:33.300
> 
> 标签：php, arrays, cakephp, multidimensional-array

CakePHP 中的 Find 语句生成一个结构如下的数组。**我已经命令我的搜索**生成显示的结果集（按 combine_score 排序）。现在，我想对数据应用排序函数以按“average_votes”排序。请参阅下面的“从这个：”/“到这个：”。

我真的很感激任何建议。

```
From this:
Array
(
[0] => Array
    (
        [Vehicle] => Array
            (
                [id] => 52
                [user_id] => 101
                [name] => Ford
                [total_votes] => 5
                [average_votes] => 3.8
                [combined_score] => 19
            )

    )

[1] => Array
    (
        [Vehicle] => Array
            (
                [id] => 48
                [user_id] => 101
                [name] => Nissan
                [total_votes] => 6
                [average_votes] => 5
                [combined_score] => 2
            )
    )
)

To this:
Array
(
[0] => Array
    (
        [Vehicle] => Array
            (
                [id] => 48
                [user_id] => 101
                [name] => Nissan
                [total_votes] => 6
                [average_votes] => 5
                [combined_score] => 2
            )
    )   

[1] => Array
    (
        [Vehicle] => Array
            (
                [id] => 52
                [user_id] => 101
                [name] => Ford
                [total_votes] => 5
                [average_votes] => 3.8
                [combined_score] => 19
            )

    )

) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:02:02.357

在您的控制器中，您可以添加查找功能以进行排序。

```
$this->Vehicle->find('all',array('order' => array('Vehicle.average_votes DESC'))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T10:28:47.943

根据您实际尝试实现的目标，您仍然可以在蛋糕的数据库级别执行此操作，如下所示：

```
$this->Vehicle->find('all',array('order' => array('Vehicle.combined_score' => 'asc', 'Vehicle.average_votes' => 'desc'))); 
```

哪个将首先按综合得分排序，然后按平均票数排序

第二个选项是使用 cakephp Set 类，如下所示：

```
$results = Set::sort($results, '{n}.Vehicle.average_votes', 'desc'); 
```

# silverlight - 更改 silverlight 控件的父节点的可见性，silverlight 控件重新加载

> ID：10411322
> 
> 赞同：0
> 
> 时间：2012-05-02T09:47:18.447
> 
> 标签：silverlight

我试图在 html 中隐藏一个 silverlight 控件。问题是如果隐藏的代码被silverlight控件调用，当我们让它再次可见后，silverlight重新加载，silverlight控件中的所有数据都会丢失。

以下是一个简单的示例，可以向您展示问题。silverlight 控件：mainpage.xaml

```
<Grid x:Name="LayoutRoot" Background="White">
    <Button Content="Hide" Height="23" HorizontalAlignment="Left" Margin="118,210,0,0" Name="button1" VerticalAlignment="Top" Width="75" Click="button1_Click" />
    <sdk:Label Height="28" HorizontalAlignment="Left" Margin="44,92,0,0" Name="label1" VerticalAlignment="Top" Width="323" />
</Grid> 
```

MainPge.xaml.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using System.Windows.Browser;

namespace SilverlightApplication1
{
public partial class MainPage : UserControl
{
    [ScriptableMember()]
    public event EventHandler TestEvent;

    public string timeStr;

    public MainPage()
    {
        InitializeComponent();
        this.label1.Content = DateTime.Now.ToShortTimeString();
        HtmlPage.RegisterScriptableObject("Control", this);

        timeStr = DateTime.Now.ToString();
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        TestEvent(sender, new TestEventArgs());
    }

    [ScriptableMember]
    public string GetTime()
    {
        return timeStr;
    }
}

public class TestEventArgs : EventArgs
{
    [ScriptableMember()]
    public string Name { get; set; }

    public TestEventArgs() {
        this.Name = "Test";
    }
}
} 
```

测试.html

```
 function show() {
document.getElementById("silverlightControlHost").style.visibility = "visible";
//document.getElementById("silverlightControlHost").style.display = "";
}

    function hide() {
        document.getElementById("silverlightControlHost").style.visibility = "hidden"; 
        //document.getElementById("silverlightControlHost").style.display = "none";
    }

    function showTime() {
        var timeStr = app.Content.Control.GetTime();
        document.getElementById("timeDiv").innerHTML = timeStr;
    }

    var app;
    function silverlightOnLoad() {
        alert("load");
        app = document.getElementById("silverlightApp");
        app.Content.Control.TestEvent = function (sender, arg) {
            //if you keep these two alert statement. while the first one works fine,     //you can see the second one would
            //throw an error after the silverlight control is hidden.
            // alert(arg.Name);
            hide(); 
            //alert(arg.Name);
        };
    }

 <input type="button" id="btnShow" value="Show" onclick="show();" />
<input type="button" id="btnHide" value="Hide" onclick="hide();" />
<input type="button" id="Button1" value="Show Time" onclick="showTime();" />
<div id="timeDiv">

</div>
<div id="silverlightControlHost">
    <object id="silverlightApp" data="data:application/x-silverlight-2," type="application/x-silverlight-2"
        width="100%" height="100%">
        <param name="source" value="ClientBin/SilverlightApplication1.xap" />
        <param name="onLoad" value="silverlightOnLoad" />
        <param name="onError" value="onSilverlightError" />
        <param name="background" value="white" />
        <param name="minRuntimeVersion" value="5.0.61118.0" />
        <param name="autoUpgrade" value="true" />
        <a href="http://go.microsoft.com/fwlink/?LinkID=149156&v=5.0.61118.0" style="text-decoration: none">
            <img src="http://go.microsoft.com/fwlink/?LinkId=161376" alt="Get Microsoft Silverlight"
                style="border-style: none" />
        </a>
    </object>
    <iframe id="_sl_historyFrame" style="visibility: hidden; height: 0px; width: 0px;
        border: 0px"></iframe>
</div> 
```

如果通过html中的“隐藏”按钮隐藏silverlight控件，一切正常。但是当通过silverlight控件的按钮隐藏控件时，单击“显示”按钮时会再次调用silverlightOnLoad。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T12:27:16.320

它看起来类似于[http://forums.silverlight.net/p/17061/57793.aspx](http://forums.silverlight.net/p/17061/57793.aspx)。

简而言之：当插件获得焦点并且您试图隐藏它时，Silverlight 插件会退出。`window.focus();`在隐藏插件之前尝试调用（或将焦点设置到 HTML 页面上的任何其他可聚焦元素）：

```
app.Content.Control.TestEvent = function (sender, arg) {
  window.focus();
  hide(); 
}; 
```

# msbuild - 如何在转换时将 configSource 转换为 web.config 中的内联元素

> ID：10411326
> 
> 赞同：2
> 
> 时间：2012-05-02T09:47:26.560
> 
> 标签：msbuild, web-config, msdeploy, web-config-transform, config-transformation

目前我的 web.config 看起来像这样：

```
<configuration>
  <connectionStrings configSource="connectionstrings.config"/>
</configuration> 
```

生成部署包 (Msbuild.exe + target=Package) 时，它不会“神奇地”将我的连接字符串参数化为 parameters.xml 文件以在部署时进行替换。

当我内联我的连接字符串时，一切都很好，并且为我的连接字符串生成了参数..

所以：

如何通过 web.config 转换复制 connectionstrings.config 的内容以替换我的 <... configsource="xxx"/> 部署？

**编辑：** 我接受了 Sayed Ibrahim 的回答，因为“默认”行为非常好（web.config 中连接字符串的自动参数化）但最后最好准确指定需要参数化的内容（通过*{projectname} .wpp.targets*或*parameters.xml*文件）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T21:24:54.630

你有点问错问题了，不要担心如何转换回 web.config。相反，只需在文件中应该为连接字符串创建参数即可。我刚刚在[http://sedodream.com/2012/05/13/VSWebPublishHowToParameterizeConnectionStringsOutsideOfWebconfig.aspx](http://sedodream.com/2012/05/13/VSWebPublishHowToParameterizeConnectionStringsOutsideOfWebconfig.aspx)上写了这篇博客。我还为您粘贴了下面的内容。

如果您在 VS 2010 或 VS 11 中使用 Visual Studio Web 发布来创建 Web Deploy 包，那么您可能知道我们在 web.config 中自动参数化连接字符串。如果您不熟悉 Web 部署参数，它们是一种声明您希望在以后发布包时能够轻松更新某些值的方式。连接字符串是在发布期间通常需要更新的一些很好的例子。

正如我之前所说，如果您在 Visual Studio 中创建 Web 部署包，我们将自动为 web.config 中的所有连接字符串创建 Web 部署参数。今天早些时候，我在 StackOverflow 上看到一个[问题，询问如何在非 web.config 文件中参数化连接字符串](http://sedodream.com/ct.ashx?id=604eadfe-46bf-4989-bac8-814e2701e52a&url=https://stackoverflow.com/questions/10411326/how-to-convert-configsource-to-inline-elements-in-web-config-on-transformation)（问题实际上问了其他问题，但我认为这是他真正想要的）。我创建了一个示例来展示如何做到这一点。下面是 web.config 中 connectionStrings 元素的样子。

```
<connectionStrings configSource="connectionStrings.config" /> 
```

这是connectionStrings.config

```
<connectionStrings>
  <clear/>
  <add name="ApplicationServices"
       connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true"
       providerName="System.Data.SqlClient" />
  <add name="OtherConnectionString"
       connectionString="data source=.\SQLExpress;Integrated Security=SSPI;Initial Catalog=foo"
       providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

为了参数化这些连接字符串，您必须扩展 Web 发布管道。为此，在您正在工作的项目的根目录中创建一个名为 {project-name}.wpp.targets 的文件（对于 VS 11 项目，您可以将所有这些直接放在 .pubxml 文件中）。这将是一个 MSBuild 文件，它将被导入到构建/发布过程中。下面是需要创建的文件。

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <ItemGroup>
    <!-- Here we need to declare MSDeploy parameters for connection strings in connectionStrings.config -->
    <MsDeployDeclareParameters Include="ApplicationServices-ConnectionString" >
      <Kind>XmlFile</Kind>
      <Scope>connectionStrings.config$</Scope>
      <Match>/connectionStrings/add[@name='ApplicationServices']/@connectionString</Match>
      <Description>Connection string for ApplicationServices</Description>
      <DefaultValue>data source=(localhost);Initial Catalog=AppServices</DefaultValue>
      <Tags>SqlConnectionString</Tags>
    </MsDeployDeclareParameters>

    <MsDeployDeclareParameters Include="OtherConnectionString-ConnectionString" >
      <Kind>XmlFile</Kind>
      <Scope>connectionStrings.config$</Scope>
      <Match>/connectionStrings/add[@name='OtherConnectionString']/@connectionString</Match>
      <Description>Connection string for OtherConnectionString</Description>
      <DefaultValue>data source=(localhost);Initial Catalog=OtherDb</DefaultValue>
      <Tags>SqlConnectionString</Tags>
    </MsDeployDeclareParameters>
  </ItemGroup>

</Project> 
```

在这里您可以看到我正在为 MSDeployDeclareParameters 创建值。打包/发布时，此项目列表用于创建 MSDeploy 参数。下面是每个包含的元数据值的解释。

*   Kind = 对于这种情况，它将始终是 Xmlfile，[了解更多](http://technet.microsoft.com/en-us/library/dd569084%28v=WS.10%29.aspx)
*   Scope = 需要修改的文件的正则表达式
*   Match = 要更新的属性/元素的 XPath 表达式
*   描述 = 可选描述（如果导入了 pkg，这将显示在 IIS 管理器中）
*   DefaultValue = optional 参数的默认值Tags = optional，对于连接字符串使用SqlConnectionString

创建此文件后，您需要关闭/重新打开 VS（它会缓存导入的 .targets 文件）。然后您可以创建一个 Web 部署包。当您这样做时，将声明这些新参数。就我而言，然后我将其导入 IIS 管理器，这是显示参数的对话框。 ![在此处输入图像描述](../Images/90eaeaec8b18b88e178a3e5ae2ae80c7.png)

如您所见，此处显示了应用程序路径参数以及我的自定义连接字符串值。当我更新文本框中的值并在我的 Web 服务器上打开 connectionStrings.config 时，它们就是我在对话框中输入的值。

仅供参考，我已在[ParameterizeConStringConfig](https://github.com/sayedihashimi/sayed-samples/tree/master/ParameterizeConStringConfig)将此示例上传到我的 github 帐户。

# codeigniter - Codeigniter Tank Auth...cookie？

> ID：10411327
> 
> 赞同：-1
> 
> 时间：2012-05-02T09:47:29.920
> 
> 标签：codeigniter, session, cookies, tankauth

我想知道 Codeigniter 的 Tank Auth，它是否使用 cookie 来存储登录详细信息？我被指示不要在新项目中使用 cookie。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:31:34.557

您需要在网站上使用 cookie 来了解哪些用户是哪些用户。

您确定请求不是在 cookie 中存储“会话”详细信息吗？通过使用 Codeigniter 会话类，您可以将所有会话信息存储在数据库中，并且只需在用户计算机上保存一个小的加密 cookie，它只存储 session_ID。

这意味着用户无法编辑他们的 cookie 来执行“admin = true”之类的操作，也无法访问他们不应访问的区域

# queue - Gstreamer rtsp 播放（有声）

> ID：10411329
> 
> 赞同：3
> 
> 时间：2012-05-02T09:47:30.667
> 
> 标签：queue, gstreamer, rtsp

我是 gstreamer 的新手，简单地尝试从 Dlink 2103 摄像头获取 rtsp 视频流。

当我尝试它时（只是视频）：

```
gst-launch rtspsrc location=rtsp://192.168.0.20/live1.sdp ! \
rtph264depay ! \
h264parse ! capsfilter caps="video/x-h264,width=1280,height=800,framerate=(fraction)25/1" ! 
ffdec_h264 ! ffmpegcolorspace ! autovideosink 
```

没关系。

当我尝试它时（只是音频）：

```
gst-launch rtspsrc location=rtsp://192.168.0.20/live1.sdp ! \
rtpg726depay !  ffdec_g726 !  audioconvert ! audioresample ! autoaudiosink 
```

它也可以。

接下来我尝试播放音频和视频。gst-launch 手册页用于生成如下内容：

```
gst-launch-0.10 -m -vvv -e  rtspsrc location=rtsp://192.168.0.20/live1.sdp  latency=1000  ! \
gstrtpptdemux name=demuxer  demuxer. ! \
queue ! \
rtph264depay  ! h264parse ! capsfilter caps="video/x-h264,width=1280,height=800,framerate=(fraction)25/1" ! \
ffdec_h264 ! ffmpegcolorspace ! autovideosink demuxer. !  \
queue ! 
rtpg726depay !  ffdec_g726 !  audioconvert ! audioresample ! autoaudiosink 
```

但是视频在第一帧冻结。我还尝试使用 decodebin（1 版和 2 版）这种经典方式：

```
gst-launch-0.10 -v  souphttpsrc rtspsrc location=rtsp://192.168.0.20/live1.sdp  ! 
decodebin name=decoder decoder. ! queue ! audioconvert ! audioresample ! 
autoaudiosink decoder. ! \
ffmpegcolorspace ! autovideosink 
```

但它也会在第一帧冻结。

我使用playbin成功的一种方法......

```
gst-launch-0.10 playbin2 uri=rtsp://192.168.0.20/live1.sdp 
```

是我的管道不好还是 dlink 相机有问题？你能告诉我我应该学习更多的关键词吗？

提前致谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T14:41:14.013

**解决方案 1（已测试）**

好的，我制作了自己的 RTSP 服务器进行测试

[我使用以下信息（ http://www.ip-sense.com/linuxsense/how-to-develop-a-rtsp-server-in-linux-using-gstreamer/](http://www.ip-sense.com/linuxsense/how-to-develop-a-rtsp-server-in-linux-using-gstreamer/)）使用视频和音频测试 src 创建了一个 RTSP 服务器 )

```
/* GStreamer
 * Copyright (C) 2008 Wim Taymans <wim.taymans at gmail.com>
 * Copyright (c) 2012 enthusiasticgeek <enthusiasticgeek@gmail.com>
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Library General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Library General Public License for more details.
 *
 * You should have received a copy of the GNU Library General Public
 * License along with this library; if not, write to the
 * Free Software Foundation, Inc., 59 Temple Place - Suite 330,
 * Boston, MA 02111-1307, USA.
 */

//Edited by: enthusiasticgeek (c) 2012 for Stack Overflow Sept 11, 2012

//###########################################################################
//Important
//###########################################################################

//On ubuntu: sudo apt-get install libgstrtspserver-0.10-0 libgstrtspserver-0.10-dev

//Play with VLC
//rtsp://localhost:8554/test

//video decode only:  gst-launch -v rtspsrc location="rtsp://localhost:8554/test" ! rtph264depay ! ffdec_h264 ! autovideosink
//audio and video: 
//gst-launch -v rtspsrc location="rtsp://localhost:8554/test" name=demux demux. ! queue ! rtph264depay ! ffdec_h264 ! ffmpegcolorspace ! autovideosink sync=false demux. ! queue ! rtppcmadepay  ! alawdec ! autoaudiosink

//###########################################################################
#include <gst/gst.h>

#include <gst/rtsp-server/rtsp-server.h>

/* define this if you want the resource to only be available when using
 * user/admin as the password */
#undef WITH_AUTH

/* this timeout is periodically run to clean up the expired sessions from the
 * pool. This needs to be run explicitly currently but might be done
 * automatically as part of the mainloop. */
static gboolean
timeout (GstRTSPServer * server, gboolean ignored)
{
  GstRTSPSessionPool *pool;

  pool = gst_rtsp_server_get_session_pool (server);
  gst_rtsp_session_pool_cleanup (pool);
  g_object_unref (pool);

  return TRUE;
}

int
main (int argc, char *argv[])
{
  GMainLoop *loop;
  GstRTSPServer *server;
  GstRTSPMediaMapping *mapping;
  GstRTSPMediaFactory *factory;
#ifdef WITH_AUTH
  GstRTSPAuth *auth;
  gchar *basic;
#endif

  gst_init (&argc, &argv);

  loop = g_main_loop_new (NULL, FALSE);

  /* create a server instance */
  server = gst_rtsp_server_new ();

  /* get the mapping for this server, every server has a default mapper object
   * that be used to map uri mount points to media factories */
  mapping = gst_rtsp_server_get_media_mapping (server);

#ifdef WITH_AUTH
  /* make a new authentication manager. it can be added to control access to all
   * the factories on the server or on individual factories. */
  auth = gst_rtsp_auth_new ();
  basic = gst_rtsp_auth_make_basic ("user", "admin");
  gst_rtsp_auth_set_basic (auth, basic);
  g_free (basic);
  /* configure in the server */
  gst_rtsp_server_set_auth (server, auth);
#endif

  /* make a media factory for a test stream. The default media factory can use
   * gst-launch syntax to create pipelines.
   * any launch line works as long as it contains elements named pay%d. Each
   * element with pay%d names will be a stream */
  factory = gst_rtsp_media_factory_new ();

  gst_rtsp_media_factory_set_launch (factory, "( "
      "videotestsrc ! video/x-raw-yuv,width=320,height=240,framerate=10/1 ! "
      "x264enc ! queue ! rtph264pay name=pay0 pt=96 ! audiotestsrc ! audio/x-raw-int,rate=8000 ! alawenc ! rtppcmapay name=pay1 pt=97 "")");

  /* attach the test factory to the /test url */
  gst_rtsp_media_mapping_add_factory (mapping, "/test", factory);

  /* don't need the ref to the mapper anymore */
  g_object_unref (mapping);

  /* attach the server to the default maincontext */
  if (gst_rtsp_server_attach (server, NULL) == 0)
    goto failed;

  /* add a timeout for the session cleanup */
  g_timeout_add_seconds (2, (GSourceFunc) timeout, server);

  /* start serving, this never stops */
  g_main_loop_run (loop);

  return 0;

  /* ERRORS */
failed:
  {
    g_print ("failed to attach the server\n");
    return -1;
  }
} 
```

生成文件

```
# Copyright (c) 2012 enthusiasticgeek
# RTSP demo for Stack Overflow

sample:
    gcc -Wall -I/usr/include/gstreamer-0.10 rtsp.c -o rtsp `pkg-config --libs --cflags gstreamer-0.10 gstreamer-rtsp-0.10` -lglib-2.0 -lgstrtspserver-0.10 -lgstreamer-0.10 
```

测试了解码管道。它工作正常！

```
gst-launch -v rtspsrc location="rtsp://localhost:8554/test" name=demux demux. ! queue ! rtph264depay ! ffdec_h264 ! ffmpegcolorspace ! autovideosink sync=false demux. ! queue ! rtppcmadepay  ! alawdec ! autoaudiosink 
```

**解决方案 2（已测试）**

尝试使用 mux/demux 组合

```
 `gst-launch-1.0 -e rtspsrc location='rtsp://localhost:554' latency=0 name=d d. ! queue ! capsfilter caps="application/x-rtp,media=video" ! rtph264depay ! mpegtsmux name=mux ! filesink location=file.ts d. ! queue ! capsfilter caps="application/x-rtp,media=audio" ! decodebin ! audioconvert ! audioresample ! lamemp3enc ! mux.` 
```

解码管道

`gst-launch filesrc location=file.ts ! typefind ! mpegtsdemux name=demux demux. ! queue ! h264parse ! ffdec_h264 ! autovideosink demux. ! queue ! mp3parse ! ffdec_mp3 ! audioconvert ! autoaudiosink demux.`

**解决方案 3（未经测试）**

尝试使用`Tee`基于的方法。还跑`gst-launch-0.10 -v playbin2 uri=rtsp://192.168.0.20/live1.sdp`。注意详细选项。这会给你很多关于如何构建管道的提示。

有一个 Tee bin 的公共源 -> 将其分成两条管道，一条用于音频解码，一条用于视频解码。

**src -> tee（分叉成两个分支 - 子管道）->（分支 1 将具有音频解复用器 -> 音频解码器 -> 音频接收器）和（分支 2 将具有视频解复用器 -> 视频解码器 -> 视频接收器）**

试一试（未经测试）。您可能需要稍微调整此管道才能使其正常工作，但您会有所了解。

```
gst-launch rtspsrc location=rtsp://192.168.0.20/live1.sdp ! queue ! tee name=t !\
rtph264depay t. ! \
h264parse t. ! capsfilter caps="video/x-h264,width=1280,height=800,framerate=(fraction)25/1" t. ! 
ffdec_h264 t. ! ffmpegcolorspace t. ! autovideosink t. ! queue ! \
rtpg726depay !  ffdec_g726 !  audioconvert ! audioresample ! autoaudiosink 
```

# javascript - 使多个链接可见 javascript

> ID：10411330
> 
> 赞同：0
> 
> 时间：2012-05-02T09:47:32.260
> 
> 标签：javascript

可以一次看到多个链接吗？我的意思是在我的以下代码中，当我`project`在文本字段中输入并按下提交按钮时，`abc.htm`链接变得可见。现在我希望当我在文本字段中输入并`project`按下提交按钮`abc.htm`并且链接变得可见时。与在文本字段下方书写的情况相同。`xyz.htm``cold.htm`

```
 <html>
    <head>
    <script Language="JavaScript">
    <!--
    function Blank_TextField_Validator() {
    // Check the value of the element named text_name from the form named text_form
    if (text_form.text_name.value == "") {
    // If null display and alert box
    alert("Please fill in the text field.");
    // Place the cursor on the field for revision
    text_form.text_name.focus();
    // return false to stop further processing
    return (false);
    }
    // If text_name is not null continue processing
   if (text_form.text_name.value == "project")
   document.getElementById('project_link').style.display = 'block';
   else if (text_form.text_name.value == "under")
   document.getElementById('construction_link').style.display = 'block';
   else
   alert("Invalid keyword!");
   return (false);
   }
   -->
   </script>
   </head>
   <body>
   <form name="text_form" method="get" action="#" 
    onsubmit="return Blank_TextField_Validator()">
    <a id='project_link' href='abc.htm' style='display: none;'>project</a>
     <a id='construction_link' href='New Text Document (3).htm' style='display:     none;'>construction</a>
     <input type="text" name="text_name" >
     <input type="submit" value="Submit">
    </form>
     </body>
     </html> 
```

这是我尝试过的：

```
if (text_form.text_name.value == "project") 
    document.getElementById('project_link').style.display = 'block'; 
    document.getElementById('project_link_1').style.display = 'block'; 

<form name="text_form" method="get" action="#" onsubmit="return Blank_TextField_Validator()">
    <a id='project_link' href='abc.htm' style='display: none;'>project</a> 
    <a id='project_link_1' href='xyz.htm' style='display: none;'>projects</a> 
    <a id='construction_link' href='New Text Document (3).htm' style='display: none;'>construction</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:32:26.650

改变

```
if (text_form.text_name.value == "project") 
    document.getElementById('project_link').style.display = 'block'; 
    document.getElementById('project_link_1').style.display = 'block'; 
```

至

```
if (text_form.text_name.value == "project") {
    document.getElementById('project_link').style.display = 'block'; 
    document.getElementById('project_link_1').style.display = 'block'; 
} 
```

顺便说一句，我真的同意评论者对原始问题的看法：在发布有关它的问题之前，您应该学习 JavaScript。你需要知道你实际上在做什么才能成功。

# ios - 没有从另一个类调用 Xcode 实例方法

> ID：10411334
> 
> 赞同：0
> 
> 时间：2012-05-02T09:47:46.987
> 
> 标签：ios, xcode, uitableview

这次真的不知道到哪里去找这个问题了。

我有一个带有嵌入式 UITableView 的 UIViewController。我已将 UITableViewDelegate、UITableViewDataSource 添加到我的头文件中。在实现文件中，我导入了另一个用于读取/写入数据库的类的头文件。

在我的实现文件的“numberOfRowsInSection”部分有这个代码：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
DbOperations *medi = [[DbOperations alloc] init];
self.orari = [medi ProssimeMedicineGrouped];

return [self.orari count];
} 
```

我在此方法的开头添加了一个断点，然后我发现根本没有调用“ProssimeMedicineGrouped”方法。

昨天它工作没有问题。我所做的唯一更改是将 ViewController 从仅包含表的 UITableViewController 更改为嵌入了 tableView 的 UIViewController。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:53:17.903

您是否将 tableView 的`delegate`属性设置为`self`？还有一件事，我认为`DbOperations`在此方法中创建对象不是一个好习惯，因为当 tableView 需要有关数据源的更多信息时会调用它，并且这可能不止一次发生。

# asp.net-mvc-3 - 在 MVC 3 中验证 MON-YY 格式

> ID：10411336
> 
> 赞同：0
> 
> 时间：2012-05-02T09:47:55.417
> 
> 标签：asp.net-mvc-3, format, validation

如何验证输入的格式是否正确？我需要检查像 JUN-12 这样的格式。即 MON-YY 格式。该字段在 Model 中为字符串类型。

我怎样才能检查这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:51:25.273

如果您验证模型，您可以使用`RegularExpressionAttribute`.

如果您在 Controller 中验证，则可以使用纯正则表达式。

# iphone - 我可以使用 Windows 机器在应用商店分发（而不是开发）我的 iOS 应用吗

> ID：10411341
> 
> 赞同：0
> 
> 时间：2012-05-02T09:48:09.013
> 
> 标签：iphone, ios, windows

我曾请其他人开发一个 iphone 应用程序。我能够创建应用程序分发所需的所有必要证书等。我还在 iTunes Connect 中上传了该应用程序的主要详细信息。我现在从开发人员那里得到了二进制文件。是否可以自己上传应用程序。我没有 MAC。我找不到任何上传二进制文件的选项

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:01:36.930

要提交到应用商店，您需要 mac ios。如果你没有mac。如果您的处理器支持虚拟化技术，请获取虚拟机并在其上安装 mac。大多数新处理器都像核心系列一样支持它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:14:45.320

我认为我们需要一台 Mac 机器来进行应用商店提交过程。我已经从 Mac 机器上启动了 2 个 ios 应用程序。我已经设置了主要详细信息并将 iTunes 帐户设置为“准备上传”状态。在 iTunes 中制作完成后，我从 Xcode4.2 上传二进制文件。在 XCode 中，首先我们必须验证二进制文件，如果二进制文件验证成功，我们可以将二进制文件提交到苹果应用商店。这是我遵循的方式。我的领导还说我们需要一台 Mac 机器来完成这个过程。我希望它会对你有所帮助。谢谢。

# c++ - 如何通过双击处理文件打开，同时拒绝多个实例

> ID：10411342
> 
> 赞同：0
> 
> 时间：2012-05-02T09:48:12.313
> 
> 标签：c++, c++builder

好的，所以我有一个应用程序 - 在启动时 - 使用 Mutex“解决方案”检查程序的其他实例。因此，当我启动程序的第二个实例时，我会收到一条弹出消息，告诉我……好吧，无论如何。

但是，当我想通过在资源管理器中双击文件来打开已经打开的实例中的文件时，如何处理它？（如 Excel）我想解决方案必须是“旧”实例和新实例之间的某种消息处理程序，其中新实例告诉旧实例打开文件 xxx. 或者还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T11:27:42.610

您需要向第一个实例发送一条消息，告诉它打开文件。使用 Windows 或您最喜欢的类库中可用的 IPC 机制之一。套接字或管道是通常的方法。

# java - Java 全局命名空间访问

> ID：10411344
> 
> 赞同：5
> 
> 时间：2012-05-02T09:48:24.147
> 
> 标签：java, namespaces, code-generation, package

给定以下程序：

```
class A {
   static int java = 42;
   static int System = -1;

   public static void main(String[] args) {
      java.lang.System.out.println("Foo");
   }
} 
```

编译这个给我一个错误，说“int不能被取消引用”。原因很明显，但是应该如何处理这种情况。它在代码生成场景中尤其重要，在这种场景中，人们无法知道哪些用户代码与生成的代码交织在一起。

在 C# 中，我只会在“java.lang”之前使用“global::”命名空间说明符，但是在 Java 中你会做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T09:51:00.637

Java中没有通用的解决方案。我们的生活方式是

1.  尊重命名约定，将类名与包/字段名区分开来，以及
2.  生成代码时使用其类名限定静态变量。

# android - 从服务器获取数据到 Android 手机的最佳方式

> ID：10411345
> 
> 赞同：-1
> 
> 时间：2012-05-02T09:48:29.733
> 
> 标签：android, xml, json

我想编写一个 Android 应用程序，它与用 php 编写的中央服务器通信，与它通信并获取/发送数据，例如用户身份验证、显示用户首选项等。我的问题是最好的方法是什么。在服务器端使用 web 服务，它返回一个 xml 并在 android 上解析 xml 或使用 json ，或者使用 html 后响应并解析它。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T09:51:31.367

Json 是最好的选择

因为它是轻量级的，可以很容易地转换为 java 对象。总之JSON是最好的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T13:51:42.273

正如其他答案所说，JSON。它是轻量级的，易于使用，android 有支持 JSON 的标准库。

例子：

```
ContentValues values = new ContentValues();
JSONArray projects = new JSONArray(_webService.getStringResponse());
int counter = 0;
int projectSize = projects.length();

while(projectCount < projectSize) {
    JSONObject projectData = projects.getJSONObject(projectCount);

    values.put(DbProperties.PROJECT_ID, projectData.getString("pid"));
    values.put(DbProperties.CUSTOMER_ID, projectData.getString("cid"));
    values.put(DbProperties.SETTLEMENT, projectData.getString("settl"));
    //Do some database saving for example

    counter++;
} 
```

这里发生的事情（把它从应用程序中取出来让你明白）如下：

我发布了一个请求，以 JSON 格式返回一些结果。我创建了一个 JSONArray 对象，它接受一个 json 字符串作为构造函数参数，在我的例子中，json 字符串由一个包含 json 对象的数组组成

我遍历 JSONArray 中的每个项目，创建一个 JSONObject，然后从 json 对象中提取数据并将其保存到数据库中。

这个简单示例的目标是展示一些东西；

*   在 android 中使用 JSON 非常容易
*   只需缩短键名即可轻松压缩字符串（json 基本上是键值对）。

后者的好处是可以减少所说字符串的大小，而作为一个缺点，数据的可读性较差。我这样做是出于压缩原因，并且我的代码得到了很好的注释。来反映这种压缩。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T09:53:49.723

请使用json。XML 太大了。html 不是为数据交换而设计的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T10:01:58.287

I'd recommend JASON. Its a defacto standard these days. And not so heavy like XML.

I've been using many C# JASON webservices fr my ANdroid applications and they all work like charm. I'm sure it'll be same with PHP services too.

Posting HTML response will be ok for a form but for a complex data you'll have hard time.

So I'll vote for `JASON`.

Also have a glance over this [supplementary read](http://www.devwebpro.com/in-favor-of-json-over-xml/).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T09:56:28.297

它取决于客户端和服务器团队。在 android`JSON`中提供了不错的 API。`JSON`解析传入的数据并准备格式的请求很容易。

虽然你也可以去`xml`。很好的支持`xml`。

# windows-phone-7 - 上传文件 - 找不到浏览按钮控制 windows phone 7

> ID：10411348
> 
> 赞同：0
> 
> 时间：2012-05-02T09:48:54.017
> 
> 标签：windows-phone-7, c#-4.0

我想通过 HTTPRequest 或 WebClient 使用 Web 服务将我的文件从 windows phone 7 上传到我的服务器。

但我找不到“浏览”按钮，用户可以从中选择要上传的文件。

谁能指出他们从哪个用户可以选择要上传的文件的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T09:53:44.367

Windows Phone 7 中没有浏览功能。Windows Phone 没有像 Windows PC 那样包含用户文档的“硬盘驱动器”的概念。

有多种方法可以获取特定类型的文件，例如通过 Microsoft 提供的各种“选择器”获取图片。[http://msdn.microsoft.com/en-us/library/ff769543(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/ff769543(v=vs.92).aspx)

如果文档是您创建的文档，那么您可能会将它们存储在独立存储（您的应用程序可以访问的唯一磁盘空间）中，因此您必须自己提供浏览器功能，因为只有您知道那里有哪些文件以及哪些文件用户应该能够上传。

# windows-phone-7 - 在 MVVMCross 应用程序中处理异常的建议方法是什么？

> ID：10411352
> 
> 赞同：3
> 
> 时间：2012-05-02T09:49:10.393
> 
> 标签：windows-phone-7, xamarin.ios, xamarin.android, mvvmcross

我们正在使用 MVVMCross 框架为 iOS、Android 和 WP7 开发一个跨平台应用程序，但我在 MvxApplication 中缺少一个可以覆盖的方法，它可以用作平台中立的未处理异常处理程序（由平台特定的处理程序调用） ）。

所以问题是，在 MVVMCross 应用程序的异步调用期间，一般处理异常的建议方法是什么？

谢谢，阿提拉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:16:30.997

对于真正意外的异常（崩溃！），这个问题目前没有答案：请参阅[MonoTouch 和 MonoDroid 中的崩溃报告](https://stackoverflow.com/questions/10365061/crash-reporting-in-monotouch-and-monodroid)

* * *

但是，有关如何在异步调用期间处理异常的建议，请查看 BestSellers 示例：[MvvmCross BestSellers Sample](https://github.com/slodge/MvvmCross/tree/master/Sample%20-%20BestSellers/BestSellers)

BestSellers 使用 2 种技术，我发现我在 MvvmCross 应用程序中使用了很多：

*   将 BaseViewModel 类用于共享 ViewModel 代码，例如错误处理
*   使用应用程序级别的“错误路由器”将错误从 ViewModel 获取到 UI 通知，如 UIAlertView、Toast 和/或 MessageBox。

* * *

在更详细的层面上，BestSellers 所做的是：

每个 ViewModel 使用对网络服务的直接调用来获取书籍信息。例如，[类别列表](https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20BestSellers/BestSellers/BestSellers/ViewModels/CategoryListViewModel.cs)构造为：

```
 public CategoryListViewModel()
    {
        AsyncLoad();
    }

    private void AsyncLoad()
    {
        GeneralAsyncLoad(URL_CATEGORIES, ProcessResult);
    } 
```

其中 GeneralAsyncLoad 在共享[BaseViewModel](https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20BestSellers/BestSellers/BestSellers/ViewModels/BaseViewModel.cs)中定义：

```
 protected void GeneralAsyncLoad(string url, Action<Stream> responseStreamHandler)
    {
        try
        {
            IsLoading = true;
            var request = WebRequest.Create(url);
            request.BeginGetResponse((result) => GeneralProcessResponse(request, result, responseStreamHandler), null);
        }
        catch (ThreadAbortException)
        {
            throw;
        }
        // obviously we could do better than catching all `Exception` here!
        catch (Exception exception)
        {
            IsLoading = false;
            ReportError("Sorry - problem seen " + exception.Message);
        }
    } 
```

上述异常处理程序中的 ReportError 方法使用注入的对象 - 一个`IErrorReporter`.

这个注入的对象在 App 构建过程中被初始化为单例 -`ErrorApplicationObject`见[App.cs](https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20BestSellers/BestSellers/BestSellers/App.cs)

在它们的构建和设置过程中，UI 项目都从同一个单例中订阅事件 - 但使用`IErrorSource`接口代替或`IErrorReporter`.

然后，这允许每个平台显示它自己的错误显示 - 例如：

*   [iOS 在其ErrorDisplayer.cs](https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20BestSellers/BestSellers/BestSellers.Touch/ErrorDisplayer.cs)中显示 UIAlertView
*   Android 在其[ErrorDisplayer.cs中显示 Toast](https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20BestSellers/BestSellers/BestSellers.Droid/ErrorDisplayer.cs)
*   WP7 显示[App.xaml.cs中代码的 MessageBox](https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20BestSellers/BestSellers/BestSellers.WindowsPhone/App.xaml.cs)

* * *

显然，如果您需要错误处理和错误显示 - 例如，如果您想重试异步操作或者如果您想加载数据的离线副本 - 那么您可以将其添加到 ViewModel 和 BaseViewModel 中的错误处理中.

# ipad - Ipad 中的 PayPal 集成

> ID：10411356
> 
> 赞同：3
> 
> 时间：2012-05-02T09:49:21.937
> 
> 标签：ipad, ios4, paypal-sandbox, ios-universal-app

我正在创建 ipad 和 iphone（通用应用程序）。

我已经在 iPhone 中实现了 Paypal，但是当我要在 iphone 中实现时，我遇到了一个问题。有错误显示：

检查错误* ***** ** *** ** *** ****

发布错误：2147483647

如果有人可以提供帮助，请调查一下。

谢谢，

CP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:53:09.780

您是否尝试检查：[Paypal 错误初始化](https://stackoverflow.com/questions/9238266/paypal-error-when-initializing)

我认为它可以解决您的问题（翻译和捆绑 ID 更改）。

# c++ - 在单独的枚举类型中重用枚举值

> ID：10411357
> 
> 赞同：20
> 
> 时间：2012-05-02T09:49:22.587
> 
> 标签：c++, visual-c++, enums

有没有办法在不同的类型中重用相同的枚举值？我希望能够做到以下几点：

```
enum DeviceState { UNKNOWN, ACTIVE, DISABLED, NOTPRESENT, UNPLUGGED };
enum DeviceType { UNKNOWN, PLAYBACK, RECORDING };

int _tmain(int argc, _TCHAR* argv[])
{
    DeviceState deviceState = DeviceState::UNKNOWN;
    DeviceType deviceType = DeviceType::UNKNOWN;
    return 0;
} 
```

这对我来说很有意义，但对 C++ 编译器没有意义——它抱怨：`error C2365: 'UNKNOWN' : redefinition; previous definition was 'enumerator'`在上面的第 2 行。有没有这样做的正确方法，或者我应该总是使用唯一的枚举值？我无法想象这总是可以保证我是否包含其他人的代码。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-05-29T20:17:57.707

对于使用 C++11 的用户，您可能更喜欢使用：

```
enum class Foo 
```

而不仅仅是：

```
enum Foo 
```

这提供了与命名空间类似的语法和好处。在您的情况下，语法为：

```
enum class DeviceState { UNKNOWN, ACTIVE, DISABLED, NOTPRESENT, UNPLUGGED };
DeviceState deviceState = DeviceState::UNKNOWN; 
```

请注意，这是强类型的，因此您需要手动将它们转换为整数（或其他任何内容）。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-02T09:50:04.947

您可以并且应该将您的枚举包含在 a 中`namespace`：

```
namespace DeviceState
{
    enum DeviceState{ UNKNOWN, ACTIVE, DISABLED, NOTPRESENT, UNPLUGGED };
}
namespace DeviceType
{
    enum DeviceType{ UNKNOWN, PLAYBACK, RECORDING };
}

//...

DeviceType::DeviceType x = DeviceType::UNKNOWN; 
```

# python - 取消存储在网络驱动器上的大型对象

> ID：10411359
> 
> 赞同：1
> 
> 时间：2012-05-02T09:49:29.797
> 
> 标签：python, windows, pickle

我有大型（~75MB）腌制对象，可在映射的网络驱动器上使用（例如：X:/folder1/large_pickled_item.pk） 对象包含 numpy 数组+python 列表，并使用 cPickle 进行腌制，协议 2

当我尝试 unpickle 数据时，我收到以下错误消息：

使用pickle：KeyError：（随机字符）

使用 cPickle：IOError：[Errno 22] 无效参数

如果腌制的对象较小，或者将（较大的）对象复制到本地驱动器并运行相同的脚本，则不会出现错误。

知道问题出在哪里吗？是 python+pickle 问题还是 Windows 共享问题？

笔记：

1.  我在 Windows XP Professional (SP3) 上使用 Python 2.7.2
2.  我无法控制对象格式，我不创建它们，我只能读取它们
3.  示例堆栈跟踪：

    文件“test.py”，第 38 行，在 getObject obj = pickle.load(input) 文件“C:\software\python\lib\pickle.py”，第 1378 行，在加载中返回 Unpickler(file).load()文件“C:\software\python\lib\pickle.py”，第 858 行，在 load dispatchkey KeyError: '~'

## 解决方案

1.  以 67076095 字节的块将文件读入字符串缓冲区。
2.  使用字符串缓冲区调用 pickle.loads 而不是使用文件对象调用 pickle.load

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:01:54.773

This is due to a [Windows bug](http://support.microsoft.com/default.aspx?scid=kb;en-us;899149), whereby reading and writing network files in chunks larger than 64MB does not work.

I suggest trying the mirror image of the workaround presented in [https://stackoverflow.com/a/4228291/367273](https://stackoverflow.com/a/4228291/367273)

If that doesn't help, perhaps you could create a wrapper for the file object that would automatically split every large `read()` into multiple smaller reads, and present that wrapper to the pickle module?

# c# - 反向位操作

> ID：10411362
> 
> 赞同：0
> 
> 时间：2012-05-02T09:49:46.800
> 
> 标签：c#, bit-manipulation, reverse

这里只是一个快速的，是否可以从 i 中找到 aValue 和 bValue 的原始值？如果是这样怎么办？

谢谢。

```
uint i = Convert.ToUInt32((aValue << 2) & 0x300) | bValue; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:52:41.137

不可能从 中找到*这*对值`i`，因为多对可能产生相同的结果。

很容易看出您是否考虑`bValue`设置所有位的示例。`i`然后无论 的值如何，都将设置 的所有位`aValue`。现在考虑设置每个奇数位，`aValue`设置每个偶数位以及`bValue`设置最低有效位的`bValue`情况。同样，对于一对非常不同的`aValue`和，结果将设置所有位`bValue`。

```
aValue=00110011, bValue=11111111 ---> i=11111111
aValue=10110000, bValue=11111111 ---> i=11111111
aValue=00000000, bValue=11111111 ---> i=11111111
aValue=01010101, bValue=10101011 ---> i=11111111 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:54:05.693

许多值可以产生相同的结果。

即使您拥有其中一个值，您仍然无法确定另一个值，并非总是如此，因为信息在操作过程中丢失，这是不可逆的。

# java - 为 Eclipse Helios 安装 Google 插件

> ID：10411365
> 
> 赞同：3
> 
> 时间：2012-05-02T09:50:06.307
> 
> 标签：java, eclipse, gwt, plugins

我正在尝试为 Eclipse Helios 安装 Google 插件。据我所见，此安装包括`Google App Engine Java SDK 1.6.4`, `Google Plugin for Eclipse 3.7`, `Google Web Toolkit SDK 2.4.0`.

我得到以下信息：

> 无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：Google Web Toolkit SDK 2.4.0 2.4.0.v201203300216-rel-r37 (com.google.gwt.eclipse.sdkbundle.e37.feature.feature.group 2.4.0.v201203300216-rel-r37)
> 缺少要求：用于 Eclipse 3.7 2.5.2.v201203300216-rel-r37 的 Google 插件（com.google.gdt.eclipse.suite.e37.feature.feature.group 2.5.2.v201203300216-rel-r37）需要 'org.eclipse.core .runtime 3.7.0' 但找不到无法满足依赖关系：来自：Google Web Toolkit SDK 2.4.0 2.4.0.v201203300216-rel-r37 (com.google.gwt.eclipse.sdkbundle.e37.feature.feature .group 2.4.0.v201203300216-rel-r37）收件人：com.google.gdt.eclipse.suite.e37.feature.feature.group 2.5.2

我尝试安装 Web Developer Tools（如[本答案](https://stackoverflow.com/questions/4672491/cannot-complete-installing-google-plugin-for-eclipse/4718331#4718331)中所建议的那样）和 MyLyn Commons（如[另一个答案](https://stackoverflow.com/a/5940585/1240930)中所建议的那样），但仍然出现相同的错误。如果我应该安装另一个版本的插件，我该如何在市场上选择它？该消息的其他可能原因是什么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:27:43.753

要更快地实现一切，只需执行以下操作：

1.  从其下载页面手动下载*插件*
2.  将*插件*文件移动到*eclipse的**插件*文件夹
**   重启*日食*

    *   日食 4.2 是朱诺
    *   eclipse 3.7 是靛蓝
    *   日食 3.6 是 Helios
    *   eclipse 3.5 是伽利略
    *   eclipse 3.4 是木卫三
    *   eclipse 3.3 是欧罗巴
    *   eclipse 3.2 是 Callisto*

 *因此，只需在下载页面上检查哪个 eclipse 版本，哪个 GWT 插件版本是合适的。

这永远不会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:12:55.347

`Install new software...`我尝试在选项和url的帮助下手动安装 3.6 版（似乎适合 Helios），`http://dl.google.com/eclipse/plugin/3.6`它可能会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T13:54:11.073

检查此站点[https://developers.google.com/eclipse/docs/install-from-zip](https://developers.google.com/eclipse/docs/install-from-zip)。您可以在本地安装插件。*

# c++ - 对于具有不同位数的类型，LLVM 类型转换失败

> ID：10411369
> 
> 赞同：0
> 
> 时间：2012-05-02T09:50:16.603
> 
> 标签：c++, casting, llvm

我尝试使用`BitCastInst`和

```
 iType = dyn_cast<Type>(VectorType::get(iType, eleCount)); 
```

我的问题：是否可以从具有 3 个 Int16Ty 元素的向量类型转换为具有 1 个 64 位元素（Int64Ty）的向量类型（如果需要，用 16 个零填充原始元素）？

由于上例中不同的总位数看起来不可能进行这样的转换。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:05:11.917

是否可以使用`dyn_cast`与类型的位宽无关。

`dyn_cast`和其他人。用于在 LLVM 类型的继承层次结构中进行转换，更准确地说，用于从 Base 转换为 Derived。

# c++ - 将 Angelscript 嵌入 C 应用程序并将 C++ 类对象暴露给宿主 (C) 应用程序

> ID：10411373
> 
> 赞同：2
> 
> 时间：2012-05-02T09:50:23.047
> 
> 标签：c++, c, scripting

我正在编写一个 C 应用程序，我想向其中添加脚本功能。我决定使用[AngelScript](http://www.angelcode.com/angelscript/)，因为它满足我的要求，并且还可以使用它的[C 绑定](http://www.angelcode.com/angelscript/resources.html)嵌入到 C 应用程序中。

但是，（这是事情变得有点棘手的地方）。我想让应用程序脚本编写者的生活更轻松（更容易），所以我想公开可编写脚本的对象（它们是我内部 C 数据类型的 C++ 包装器等），这样用户就不必担心内存管理、悬空指针ETC。）

所以，我的问题是，是否可以将 C++ 对象暴露给 AngelScript（用于用户脚本），同时通过 Angelscripts C 绑定将 AngelScript 引擎本身嵌入到 C 应用程序中？

# c# - 在 C# 中有文件管道的任何实现吗？

> ID：10411375
> 
> 赞同：0
> 
> 时间：2012-05-02T09:50:24.330
> 
> 标签：c#, .net, windows, pipe, named-pipes

你知道 C# 中是否有任何类型的管道使用磁盘文件实现。
我们必须在编写时将文件传输到另一个进程，所以我们认为如果有一个使用文件的实现管道会很好。
在这种通信中，将有一个“生产者”正在保存文件，而另一个“消费者”正在将其复制到其他服务器。我们不想在消费者通过网络复制文件时阻止保存文件的进程（生产者）。

在使用管道时，我们已经看到 C# 上有命名管道和匿名管道，但它们似乎只在内存上工作。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:01:05.430

我还没有听说过基于文件的管道，但是您可以使用[File-mapping](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365574.aspx#base.using_a_file_mapping_for_ipc)，但它似乎不适合您想要做的事情。进程之间的简单 IPC（命名管道）（文件写入完成的消息发送）与文件写入并行，可能要简单得多。

# vb.net - 使用 ASP:RadioButton 触发 OnCheckedChanged 事件

> ID：10411378
> 
> 赞同：2
> 
> 时间：2012-05-02T09:50:29.977
> 
> 标签：vb.net, events, radio-button, oncheckedchanged

我有以下单选按钮：

```
<asp:RadioButton id="rdoStandard" runat="server" Checked="true" GroupName="delivery" OnCheckedChanged="Check_Clicked" />

<asp:RadioButton ID="rdoExpress" runat="server" GroupName="delivery" OnCheckedChanged="Check_Clicked" />

<asp:RadioButton ID="rdoNextDay" runat="server" GroupName="delivery" OnCheckedChanged="Check_Clicked" /> 
```

在后面的代码中我有这个：

```
 Protected Sub Check_Clicked(ByVal sender As Object, ByVal e As EventArgs) Handles rdoStandard.CheckedChanged, rdoExpress.CheckedChanged, rdoNextDay.CheckedChanged
            RaiseEvent DeliveryOptionChanged()
        End Sub 
```

我已经尝试了上述方法，但也尝试了不同的方法，例如每个方法的单击方法，`RadioButtons`而我从未点击过该`Check_Clicked`方法。

我不想`AutoPostBack`，也看不出如果你要触发一个事件，为什么你会想要？

自从我使用`VB`WebForms 以来已经有一段时间了，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T09:53:55.383

[`AutoPostBack`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkbox.autopostback%28v=vs.80%29.aspx)如果要立即触发事件，则需要设置为 true，默认为`false`.

```
<asp:RadioButton id="rdoStandard" AutoPostback="true" runat="server" Checked="true" GroupName="delivery" OnCheckedChanged="Check_Clicked" /> 
```

[注意 a`RadioButton`继承自`CheckBox`，因此它继承自它的`AutoPostback`属性]

**编辑**：如果您想避免回发，当您未设置`AutoPostback`为 true 时，还会在下次往返服务器时引发此事件。例如，您可以使用提交按钮，Button 和 CheckBox 的单击事件都会连续引发。

# java - 将 2 个 txt 文件中的一些元素合并到第三个文件中

> ID：10411382
> 
> 赞同：0
> 
> 时间：2012-05-02T09:50:45.827
> 
> 标签：java, file

我有两个文件 Persons.txt 和 Hobby.txt。在第三个文件中我想把所有的人的名字和每个名字添加一些爱好。这就是我的文件看起来像 Persons.txt

```
ID;NUME;PRENUME;DATA_NASTERII;PROFESIA
1;Stan;Ilie;22-01-1977;profesor;
2;Becali;GG;01-07-1965;patron;
3;Tanase;Cristian;07-12-1988;fotbalist;
4;Pop;Ion;21-03-1984;pictor;
5;Popescu;Rodica;17-04-1986;sculptor; 
```

爱好.txt

```
ID;NUME;DESCRIERE;NUMAR_MINIM_PERSOANE;ELEMENT_NECESAR
1;baschet;sport in care se arunca mingea la cos;6;minge
2;fotbal;sport in care nue voie sa atingi mingea in poarta adversa;14;minge
3;chitara;cantatul la chitara;1;chitara
4;pianul; cantatul la pian;1;pian
5;programarea;scrierea de programe software;1;PC 
```

我需要第三个文件，如下所示：

```
Ion Pop : baschet, volei
Ilie Stan: steaua, handbal 
```

问题是我不知道

*   如何获取人名和
*   如何给他们添加 2 或 3 个爱好。
*   如何从文件中拆分每一行并写入第三个文件

我的代码

```
 import java.io.*;
   import java.util.*;
   import java.util.ArrayList;

   public class ListaHobby {
             String line="";
             Persoana p = new Persoana();
             Hobby h = new Hobby();
             public void writeListaHobbies(){
               try{
                     FileReader file1 =new FileReader("Persoane.txt");
                     Scanner scan = new Scanner(new File("Persoane.txt"));
                     ArrayList<String> values = new ArrayList<String>();
                     System.out.println(values.size());

                     FileReader file2 = new FileReader("Hobby.txt");
                     scan = new Scanner(new File("Hobby.txt"));
                     values = new ArrayList<String>();
                     System.out.println(values.size());

                     while(scan.hasNext()){
                               values.add(scan.next());
                     }

                      BufferedReader br1 = new BufferedReader(file1);
                      BufferedReader br2 = new BufferedReader(file2);

                      String temp1="";
                      String temp2="";

                      while(br1.readLine() != null){
                        temp1 = br1.readLine() + temp1;
                      }
                      while(br2.readLine() != null){
                            temp2 = br2.readLine() + temp2;
                      }

                      String temp = temp1 + temp2;

                       FileWriter fw = new FileWriter("PersHobby.txt");
                       char buffer[] = new char[temp.length()];
                       temp.getChars(0, temp.length(), buffer, 0);
                       fw.write(buffer);
                       file1.close();
                       file2.close();
                       fw.close();
                    }
                    catch(IOException ex){
                           System.out.println("Error opening file.");
                           System.exit(1);
                    }` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:05:17.383

尝试从面向对象的角度来看它。你必须反对。一个`Person`物体和类似`Hobby`物体的东西。文件的每一行都代表一个这样的对象。您现在应该做的是像您一样解析文件，但使用信息创建对象。假设这`br1`是文件 1 的阅读器，它可能如下所示：

```
while(br1.readLine() != null){

    String line = br1.readLine();           // read the line
    String[] attributes = line.split(";");  // split it at every ";"

    Person person = new Person();           // make a new person
    person.setName(attributes[0]);          
    person.setSurname(attributes[1]);
    person.setDate(attributes[2]);
    person.setProfession(attributes[3]);

    listOfPersons.add(person);               // store the person in a list
} 
```

当然，您必须创建一个 Person 类以及一个 Hobby 类。

之后，您可以遍历您的列表并搜索一个人的爱好。如果您找到了，请将其添加到此人：

```
for(Person person: listOfPersons) {

    for(Hobby hobby: listOfHobbies) {

        if(person.getId().equals(hobby.getPerson()))
            person.addHobby(hobby);
     }
 } 
```

之后，您将获得一份有自己爱好的人的名单。您可以再次将其写入文件。这种方法需要更多的代码，但主要是简单的代码。你以一种干净的方式做到这一点。

编辑：

Person 类可能如下所示：

公共类人{

```
private int id;
private String name;
private String surname;
private String date;
private String profession;

private List<Hobby> hobbies = new ArrayList<Hobby>();

// getter & setter for all this attributes

// here is the one to add hobbies:
public void addHobby(Hobby hobby) {

    hobbies.add(hobby);
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T20:15:59.210

要生成您在问题中定义的文件 PersHobby.txt，需要采取以下操作

*   从人员列表中读取名称
*   从爱好列表中阅读爱好
*   为列表中的每个人运行一个循环
*   运行循环以生成随机选择的爱好
*   创建当前人及以上爱好的行
*   将上面的行写到 PersHobby

上面的算法是非常试探性的。

由于每个文件的结构相似（分号分隔），我们可以只读取相关字段如下

```
private static List<String> readFieldFromFile(List<String> values, String delimiter, int index) {

    if (values != null && values.size() > 0) {

        List<String> returnable = new ArrayList<String>(values.size());
        // proceed only if the list of values is non-empty
        Iterator<String> it = values.iterator();
        // instantiate an iterator
        while (it.hasNext()) {
            // iterate over each line
            String currLine = it.next();
            if (currLine != null && currLine.trim().length() > 0) {
                // split the line into it's constituent fields if the line is not empty
                String[] fields = currLine.split(delimiter);
                if (fields.length - index > 0) // Read the particular field, and store it into the returnable
                {
                    returnable.add(fields[index - 1]);
                }
            }
        }
        return returnable;
    } else {
        return null;
    }
}

public static List<String> readName(List<String> persons) {
// name occurs at the second position in the line
    return readFieldFromFile(persons, ";", 2);
}

public static List<String> readHobby(List<String> hobbies) {
// name of hobby occurs at the second position in the line
    return readFieldFromFile(hobbies, ";", 2);
} 
```

接下来我们需要为一个人的爱好生成一个字符串......类似于下面的方法。这种方法从扔给它的爱好集合中随机抽取两个爱好。

```
public static String generateRandomHobbies(List<String> hobbies){
    String hobbieString = "";
    // Read two hobbies at random from the hobbies list into a comma-separated string
    if(hobbies.size() >= 2){
        Random rand = new Random();
        hobbieString.concat( hobbies.get((int)(hobbies.size()*rand.nextFloat())) );
        hobbieString.concat( ", " );
        hobbieString.concat( hobbies.get((int)(hobbies.size()*rand.nextFloat())) );
        hobbieString.concat( ", " );
    }
    return hobbieString;
} 
```

希望这将被证明是足够的。我将字符串的格式留给您，并实际写入输出文件。

ps 由于对象重新初始化，您使用扫描仪的现有代码有问题。这种重新初始化将使应用程序只保留 Hobby 文件的内容。

```
while(scan.hasNext()){
    values.add(scan.next());
} 
```

请修复此问题，以便每个文件的内容位于单独的列表中。

# php - 如何使用Datamapper计算Codeigniter中查询返回的行数

> ID：10411386
> 
> 赞同：5
> 
> 时间：2012-05-02T09:50:57.157
> 
> 标签：php, codeigniter, datamapper, codeigniter-2, codeigniter-datamapper

我在 codeigniter 的控制器中使用以下查询。

```
 $u -> where('us_email_id', $username);
    $u -> where('us_password', $password1);
    $details = $u -> get();
    $total = count($details);
    echo $total; echo "<br>";
    echo count($details); 
```

在上面的代码中，“$u”是数据映射器“User”的类“User”的对象名称，其中我的数据库中的表名是“users”。我想看看执行查询后返回了多少行。即使用户名和密码不匹配，“$total”也始终显示 1。我想要的是，如果返回的行数为 1，那么“ok”，否则“有问题”。我知道它的基本知识，但如果有人知道它，请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T09:56:59.300

以下是 CI 中可用的 - 查看此页面 - [http://codeigniter.com/user_guide/database/results.html](http://codeigniter.com/user_guide/database/results.html)

```
$query->num_rows() 
```

查询返回的行数。注意：在本例中，$query 是查询结果对象分配给的变量：

```
$query = $this->db->query('SELECT * FROM my_table');

echo $query->num_rows(); 
```

所以在你上面的例子中你需要尝试

```
$details->num_rows(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-02T10:01:44.023

If you just want to count the total rows found, call the `count()` method instead of `get()`.

```
$u->where('us_email_id', $username);
$u->where('us_password', $password1);
$total = $u->count(); 
```

But, if you also need the data, then you can simply call `get()`, and after that use PHP [`count()`](http://php.net/manual/en/function.count.php) to count how many elements are there inside the `all` property of the object.

```
$u->where('us_email_id', $username);
$u->where('us_password', $password1);
$u->get();
$total = count($u->all); 
```

You can check out the documentation for more details.

*   [Datamapper Count](http://stensi.com/datamapper/pages/count.html)
*   [Datamapper Get](http://stensi.com/datamapper/pages/get.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T19:02:46.790

如果密码已加密，请重试

或者如果所有数据部分都很好，请尝试使用以下代码

```
$this->db->where(array('us_email_id' => $username,'us_password' => $password1));
echo $this->db->count_all_results('users'); 
```

# excel - 如何检查工作表是否存在于 Excel 文件中

> ID：10411403
> 
> 赞同：1
> 
> 时间：2012-05-02T09:51:55.867
> 
> 标签：excel, matlab

我有一个包含 20 多张表格的 Excel 文件。我正在 Matlab 中编写一个模块，我需要在其中检查 Excel 文件中是否存在特定的工作表，例如“SalaryData”。

我认为我无法使用`xlsinfo`，此功能在我当前使用的 Matlab 版本中不可用。

我打算使用 actxserver 来检查工作表的存在。我目前正在做的事情是这样的：

```
SheetExist=1;
try
  sheet = get(Excel.Worksheets,'Item',sheetname);
catch
  disp('File Does not exist');
  SheetExist=0;
end 
```

我认为有一种更好、更简单的检查方法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:04:08.903

您可以使用[xlsfinfo](http://www.mathworks.nl/help/techdoc/ref/xlsfinfo.html)函数：

```
[~, sheets] = xlsfinfo(filename);
ismember(sheetname,sheets); 
```

请注意，通过使用 ismember 函数，工作表名称区分大小写！如果您想要不区分大小写，请使用循环和[strcmpi](http://www.mathworks.nl/help/techdoc/ref/strcmpi.html)。

编辑：刚刚注意到您对 xlsinfo 的评论：p 您确定它不可用吗？您提到 xlsinfo 不可用，但实际功能称为 xlsfinfo！注意'xls'和'info'之间的'f'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:58:33.420

这会有帮助吗？

```
SheetExist=1;    
Set ws = Sheets(“sheet_name”)
If ws Is Nothing Then SheetExist=0 
```

# c# - 反射器后的 C# Generic Type 错误

> ID：10411408
> 
> 赞同：0
> 
> 时间：2012-05-02T09:52:28.027
> 
> 标签：c#, .net, generics, reflector

我用反射器导出了一个源，我解决了很多问题，有一个我无法解决。

```
 EnhancedTypeSubMenu!1.cs(28,27): error CS0305: Using the generic type 'Name.CoreDataTypes.EnhancedTypeSubMenu<T>.MenuItem<TT>' requires 1 type arguments
EnhancedTypeSubMenu!1.cs(86,22): (Related location)
EnhancedTypeSubMenu!1.cs(33,22): error CS0305: Using the generic type 'Name.CoreDataTypes.EnhancedTypeSubMenu<T>.MenuItem<TT>' requires 1 type arguments
\EnhancedTypeSubMenu!1.cs(86,22): (Related location) 
```

这里是班级，我在其他班级也有同样的问题。将不胜感激任何帮助。

```
 using System;
using System.Collections.Generic;
using System.Windows.Forms;

public abstract class EnhancedTypeSubMenu<T> : AGeeksToyToolStripMenuItem<EnhancedType<T>>
{
    public EnhancedTypeSubMenu(EnhancedType<T> DataItem, T[] ChoiceItems, string Text) : base(DataItem, Text, null)
    {
        if (ChoiceItems != null)
        {
            foreach (MenuItem<T, T> item in this.MenuItems(ChoiceItems))
            {
                base.DropDownItems.Add(new EnhancedTypeMenuItem<T, T>(DataItem, item));
            }
        }
    }

    public EnhancedTypeSubMenu(EnhancedType<T> DataItem, T[] ChoiceItems, string Text, Control ctrl) : base(DataItem, Text, ctrl)
    {
        foreach (MenuItem<T, T> item in this.MenuItems(ChoiceItems))
        {
            base.DropDownItems.Add(new EnhancedTypeMenuItem<T, T>(DataItem, item, ctrl));
        }
    }

    protected virtual MenuItem<T, T> GetMenuItem(T value)
    {
        return new MenuItem<T, T>(value);
    }

    private List<MenuItem<T, T>> MenuItems(T[] ChoiceItems)
    {
        List<MenuItem<T, T>> list = new List<MenuItem<T, T>>();
        foreach (T local in ChoiceItems)
        {
            list.Add(this.GetMenuItem(local));
        }
        return list;
    }

    public class EnhancedTypeMenuItem<TT> : AGeeksToyToolStripMenuItem<EnhancedType<TT>>
    {
        public bool CheckIfMatched;
        public readonly EnhancedTypeSubMenu<T>.MenuItem<TT> MenuItem;
        public string TranslationCategory;

        public EnhancedTypeMenuItem(EnhancedType<TT> Data, EnhancedTypeSubMenu<T>.MenuItem<TT> menuItem) : base(Data, menuItem.Text, null)
        {
            this.TranslationCategory = "Enhanced Menu";
            this.CheckIfMatched = true;
            this.MenuItem = menuItem;
        }

        public EnhancedTypeMenuItem(EnhancedType<TT> Data, EnhancedTypeSubMenu<T>.MenuItem<TT> menuItem, string translationCategory) : base(Data, menuItem.Text, null)
        {
            this.TranslationCategory = "Enhanced Menu";
            this.CheckIfMatched = true;
            this.MenuItem = menuItem;
            this.TranslationCategory = translationCategory;
        }

        public EnhancedTypeMenuItem(EnhancedType<TT> Data, EnhancedTypeSubMenu<T>.MenuItem<TT> menuItem, Control ctrl) : base(Data, menuItem.Text, ctrl)
        {
            this.TranslationCategory = "Enhanced Menu";
            this.CheckIfMatched = true;
            this.MenuItem = menuItem;
        }

        protected override void OnClick(EventArgs e)
        {
            base.MenuObject.Value = this.MenuItem.Data;
            base.OnClick(e);
        }

        public override void SetMenu()
        {
            base.Checked = this.CheckIfMatched && base.MenuObject.Equals(this.MenuItem.Data);
            this.Text = TranslationManager.Translate(this.TranslationCategory, this.MenuItem.Text.Replace('_', ' '));
            base.SetMenu();
            this.Enabled = !base.Checked;
        }
    }

    public class MenuItem<TT>
    {
        public readonly TT Data;

        public MenuItem(TT data)
        {
            this.Data = data;
        }

        public virtual string Text
        {
            get
            {
                return this.Data.ToString().Replace("__", " / ").Replace("_", " ");
            }
        }
    }
} 
```

}

这是一个打印屏幕

![视觉工作室打印][1]

[http://i.stack.imgur.com/n9rpu.png](http://i.stack.imgur.com/n9rpu.png)

由于声誉，无法使用图像标签发布，不要记住我以前的帐户：/

更新 //

我将其更改为有效，但我有最后一个错误。

私人无效ChangeStakingType（AGeeksToyToolStripMenuItem>.MenuData newType）{ this.StakeBox.StakingType.Value = newType.Data.Value; }

需要 1 个类型参数是错误。

Menudata 类是这样的：

```
 namespace AGeeksToy.CoreDataTypes
{
    using System;
    using System.Windows.Forms;

    public abstract class AGeeksToyToolStripMenuItem<T> : ToolStripMenuItem, AGeeksToyMenu
    {
        public MouseButtons LastMouseButton;
        public MenuData<T> menuData;
        public static readonly VoidEventWithParam<MenuData<T>> RightClicked;

        static AGeeksToyToolStripMenuItem()
        {
            AGeeksToyToolStripMenuItem<T>.RightClicked = new VoidEventWithParam<MenuData<T>>();
        }

        protected AGeeksToyToolStripMenuItem(T obj, string text) : this(obj, text, null)
        {
        }

        protected AGeeksToyToolStripMenuItem(T obj, string text, Control ctrl)
        {
            base.DropDown.ImageList = IconManager.m_ImageList;
            this.menuData = new MenuData<T>(obj, ctrl);
            this.Text = text;
        }

        protected override void Dispose(bool disposing)
        {
            base.DropDown.ImageList = null;
            base.Dispose(disposing);
        }

        protected override void OnClick(EventArgs e)
        {
            if (this.MenuControl != null)
            {
                this.MenuControl.Refresh();
            }
            base.OnClick(e);
            if (this.LastMouseButton == MouseButtons.Right)
            {
                AGeeksToyToolStripMenuItem<T>.RightClicked.TriggerEvent(this.menuData);
            }
        }

        protected override void OnMouseDown(MouseEventArgs e)
        {
            this.LastMouseButton = e.Button;
            base.OnMouseDown(e);
        }

        public virtual void SetMenu()
        {
            this.LastMouseButton = MouseButtons.Left;
            if (this.MenuControl != null)
            {
                base.Visible = this.MenuControl.Visible;
                this.Enabled = this.MenuControl.Enabled;
            }
            foreach (ToolStripItem item in base.DropDownItems)
            {
                if (item is AGeeksToyMenu)
                {
                    (item as AGeeksToyMenu).SetMenu();
                }
            }
        }

        public T Menu_Data
        {
            get
            {
                return this.MenuObject;
            }
        }

        protected Control MenuControl
        {
            get
            {
                return this.menuData.Control;
            }
        }

        protected T MenuObject
        {
            get
            {
                return this.menuData.Data;
            }
            set
            {
                this.menuData.Data = value;
            }
        }

        public class MenuData<T>
        {
            public System.Windows.Forms.Control Control;
            public T Data;

            public MenuData(T obj, System.Windows.Forms.Control ctrl)
            {
                this.Data = obj;
                this.Control = ctrl;
            }
        }
    } 
```

如果有人可以在这里运行该项目并检查问题，我将非常感激这里是下载链接：

[http://code.google.com/p/agt-betfair-bot/downloads/list](http://code.google.com/p/agt-betfair-bot/downloads/list)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:54:41.770

您已定义`MenuItem<TT>`.

但是您正在使用`MenuItem<T, T>`它抱怨的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:54:54.070

不确定这是否是某种搜索和替换错误，但请尝试替换所有实例：

```
MenuItem<T, T> 
```

有了这个：

```
MenuItem<T> 
```

这似乎是问题的根源。在我看到原始的上下文中，这似乎是类型参数的正确名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T09:56:12.030

MenuItem 仅使用单个类型参数，这就是错误所说的。

请参阅类的声明：`MenuItem<TT>`. 所以你只需要传递一个类型参数给它。

# ios - 用自己的 Nib 子类化 UITableViewCell

> ID：10411409
> 
> 赞同：3
> 
> 时间：2012-05-02T09:52:33.707
> 
> 标签：ios, uitableview, interface-builder

我想创建一个自定义 UITableViewCell 子类，它使用 URL 连接异步加载内容。我有一个处理所有这些的 UITableViewCell 子类和一个定义单元格布局的 Nib 文件，但是我无法将两者链接起来。这是我在中使用的代码`tableView:cellForRowAtIndexPath`：

```
static NSString *FavCellIdentifier = @"FavCellIdentifier";

FavouriteCell *cell = [tableView dequeueReusableCellWithIdentifier:FavCellIdentifier];

if (cell == nil)
{
    cell = [[[FavouriteCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:FavCellIdentifier] autorelease];
}

cell.requestURL = [NSURL URLWithString:[NSString stringWithFormat:@"%@?%@=%i", URL_GET_POST_STATUS,
                                           URL_PARAM_SERIAL,
                                           [[self.favourites objectAtIndex:indexPath.row] intValue]]];

return cell; 
```

这为 UITableViewCell 子类提供了一个请求 URL，该子类处理`setRequestURL`方法中的加载。

在 FavouriteCell 类中，我保持`initWithStyle:reuseIdentifier:`方法不变，在 Nib 中，我将 FavCellIdentifier 设置为标识符，将 FavouriteCell 设置为类。现在如何让 FavouriteCell 类加载 Nib？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T12:09:44.370

为了使用 nib/xib 文件，您将不得不以不同的方式实例化`FavouriteCell`。

试试这个：

1.  确保您已将您的*类型*更改`UITableViewCell`为子类，而不是xib`FavouriteCell`中的默认值。`UITableViewCell`通过以下方式执行此操作：
    *   单击 Interface Builder 对象窗格中的单元格。
    *   然后，转到 Identity Inspector 选项卡并确保 Custom Class lists 下的 Class 选择`FavouriteCell`。
2.  `File's Owner`将属性更改为`UIViewController`您要显示自定义的位置`UITableViewCell`（与步骤#1 几乎相同的过程）。
3.  `IBOutlet`将类型的属性添加`FavouriteCell`到您的`UIViewController`. 给它起任何你喜欢的名字（我会叫它`cell`）。
4.  回到 的 xib 中，将File's Owner 中属性`UITableViewCell`的 IBOutlet 连接到您的自定义.`cell``UITableViewCell`
5.  使用此代码以编程方式加载单元格：

* * *

```
- (FavouriteCell *)tableView:(UITableView *)tableView 
       cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellId = @"FavCellId";
    FavouriteCell *cell = [tableView dequeueReusableCellWithIdentifier:CellId];
    if (!cell) {
        // Loads the xib into [self cell]
        [[NSBundle mainBundle] loadNibNamed:@"FavouriteCellNibName" 
                                      owner:self 
                                    options:nil];
        // Assigns [self cell] to the local variable
        cell = [self cell];
        // Clears [self cell] for future use/reuse
        [self setCell:nil];
    }
    // At this point, you're sure to have a FavouriteCell object
    // Do your setup, such as...
    [cell setRequestURL:[NSURL URLWithString:
                  [NSString stringWithFormat:@"%@?%@=%i", 
                      URL_GET_POST_STATUS, 
                      URL_PARAM_SERIAL, 
                      [[self.favourites objectAtIndex:indexPath.row] intValue]]
     ];
    return cell;
} 
```

# coordinates - Foursquare 搜索中不允许零纬度/经度？

> ID：10411410
> 
> 赞同：0
> 
> 时间：2012-05-02T09:52:34.433
> 
> 标签：coordinates, foursquare

在搜索场地（意图“浏览”，提供西南和东北）时，4SQ API 不接受纬度或经度的全零值（如 0、0.0、0.00）。我总是收到以下错误：

> 无效的地理坐标

这是错误还是预期行为？零值是否有一些特殊含义，因此它们不能用作纬度/经度参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:51:23.360

这是预期的行为——我们添加了此功能，因为对 (0,0) 的绝大多数请求是由于某些编程错误造成的，我们认为开发人员希望了解这些错误。因此，我们不是默默地返回 no 和/或伪造的结果，而是返回一个错误来帮助开发人员调试。

幸运的是，0,0 在海洋上空，周围没有太多事情发生。如果您想对世界的那一部分提出请求，您可以随时尝试 0.01,-0.01...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:56:21.077

David Schwartz 在这篇文章中说了一些关于它的内容：[无效的地理坐标](https://stackoverflow.com/questions/10297569/invalid-geo-coordinates-when-searching-for-venues)

> 可能是因为它使用了一个在内部返回零以指示无效条目的解析器。所以它拒绝一个完全有效的零

也许你应该考虑一下。

# java - 如何为给定的语言环境和小数位数格式化双精度值？

> ID：10411414
> 
> 赞同：16
> 
> 时间：2012-05-02T09:52:43.363
> 
> 标签：java, number-formatting

如何为给定的（默认语言环境就足够了）和给定的小数位数`NumberFormat`格式化一个`double`值？`Locale`

例如，我有这些值：

```
double d1 = 123456.78;
double d2 = 567890; 
```

我想以下列方式打印它们，例如使用美国语言环境和 2 位小数：

```
123,456.78
567,890.00 
```

在这种情况下，我实际上并不关心舍入模式，因为这些双精度值是从`BigDecimal`具有给定比例的 a 中获得的，因此它们的小数位数总是小于或等于我要打印的小数位数。

**编辑：**

为了让事情更清楚一点，问题是我想以依赖于语言环境的方式显示钱，但小数位数是固定的。上面的示例显示，如果系统区域设置为`en_US`. 现在让我们说，系统语言环境是`cs_CZ`（捷克语），所以相同的数字应该以这种方式格式化：

```
123 456,78
567 890,00 
```

现在，如何设置 NumberFormat 以始终​​显示 2 位小数，但根据当前语言环境显示千位分隔符和小数点？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-02T14:53:44.260

如果您愿意阅读 NumberFormat 的文档，解决方案将是显而易见的：

```
double d1 = 123456.78;
double d2 = 567890;
// self commenting issue, the code is easier to understand
Locale fmtLocale = Locale.getDefault(Category.FORMAT);
NumberFormat formatter = NumberFormat.getInstance(fmtLocale);
formatter.setMaximumFractionDigits(2);
formatter.setMinimumFractionDigits(2);
System.out.println(formatter.format(d1));
System.out.println(formatter.format(d2));
System.out.println(fmtLocale.toLanguageTag()); 
```

在我的机器上打印出来：

> 123 456,78
> 567 890,00
> PL-PL

我相信这就是您正在寻找的东西，并且您不必弄乱模式。我不会那样做-例如，有些语言环境将数字按两位而不是三位分组（这就是我们谈论**分组分隔符**而*不是* **千位分隔符**的原因）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-02T10:12:47.360

改编自[定制格式](http://docs.oracle.com/javase/tutorial/i18n/format/decimalFormat.html)，

```
 public void localizedFormat(double value,Locale loc ) {

  NumberFormat nf = NumberFormat.getNumberInstance(loc);
  DecimalFormat df = (DecimalFormat)nf;
  df.applyPattern("###,###.00");
  String output = df.format(value);

  } 
```

此功能应为您提供所需的格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T09:55:57.897

你可以使用类似的东西

```
DecimalFormat formatter = (DecimalFormat) DecimalFormat.getInstance();
formatter.applyPattern("#,###,##0.00");
formatter.format(yourDoubleHere) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-27T22:32:17.077

很老的问题，但与其他答案类似，我写了这个有一个快速的解决方案

```
public static String formatDecimal(Double decimal) {
        return new DecimalFormat(
                "###,###,###,###.##",
                DecimalFormatSymbols.getInstance(Locale.getDefault())
        )
                .format(decimal);
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-12-10T06:53:29.310

将 double 值转换为具有小数点后任意位数的 double 值。我在 Utility 类中创建了这个方法，以便在整个项目中访问它。

```
public static double convertToDecimal(double doubleValue, int numOfDecimals)  {
        BigDecimal bd = new BigDecimal(doubleValue);
        bd = bd.setScale(numOfDecimals, BigDecimal.ROUND_HALF_UP);
        return bd.doubleValue();
    } 
```

# emacs - 欧洲央行：无法访问/

> ID：10411416
> 
> 赞同：2
> 
> 时间：2012-05-02T09:52:56.763
> 
> 标签：emacs, cedet, emacs-ecb

更新到 Kubuntu 12.04 和 Emacs 24.1.50 - 我无法访问`/`ecb 树浏览器中的文件夹。当我尝试到达那里，或者只是激活 ecb Emacs 打开`*tramp/scpc C*`缓冲区时，它说：

```
 ssh: Could not resolve hostname C: Name or service not known 
```

在更新到 Kubuntu 12.04 和 Emacs 24.1.50 之前它运行良好

我所有与 ecb 相关的配置：

```
;; ECB and CEDET:
;; (global-ede-mode 1)
(require 'semantic/sb)
(require 'semantic/analyze)
(provide 'semantic-analyze)
(provide 'semantic-ctxt)
(provide 'semanticdb)
(provide 'semanticdb-find)
(provide 'semanticdb-mode)
(provide 'semantic-load)
(semantic-mode 1)
(setq semantic-load-turn-useful-things-on t)

(setq stack-trace-on-error t)

(require 'cedet)

(require 'ecb)
;; (ecb-activate)
;; (ecb-byte-compile)
(require 'ecb-autoloads) ;; if aren't going to turn ECB on at start up
(setq ecb-auto-activate 1) 

(ecb-winman-winring-enable-support) ;; This MUST be done BEFORE the first call to any winring-command, so also before calling winring-initialize! 

(setq ecb-winman-winring-name "ECB")

(global-set-key (kbd "C-x e") '(lambda () 
                                 (interactive)
                                 (ecb-activate)
                                 ))
(global-set-key (kbd "C-x E") 'ecb-deactivate)

(setq tags-revert-without-query t)

(setq ecb-cache-directory-contents nil)
(setq ecb-highlight-tag-with-point t)

(setq semantic-idle-work-parse-neighboring-files-flag nil)
(setq semantic-idle-work-update-headers-flag nil)

(setq global-semanticdb-minor-mode nil)
;; (setq semantic-imenu-index-directory nil) ;; do I have such a var at all?
(require 'semantic-load)

;; (global-semantic-auto-parse-mode -1)
(global-semantic-show-unmatched-syntax-mode -1)
(setq truncate-partial-width-windows nil)

(setq global-semantic-idle-summary-mode t)
(setq global-semantic-idle-completions-mode t)
(setq global-semantic-decoration-mode t)
(setq global-semantic-highlight-func-mode t)

(add-hook 'ecb-symboldef-buffer-sync (lambda ()
                                       (setq truncate-lines nil)
                                       ))

;; etags!
(setq tags-file-name (expand-file-name "~/its/dbes/etgs/TAGS"))

(setq ecb-highlight-tag-with-point (quote highlight-scroll))
(setq ecb-layout-name "left-symboldef")
(setq ecb-layout-window-sizes (quote (("left-symboldef" (0.2571428571428571 . 0.26666666666666666) (0.2571428571428571 . 0.2) (0.2571428571428571 . 0.23333333333333334) (0.2571428571428571 . 0.26666666666666666)) ("left8" (0.23809523809523808 . 0.2857142857142857) (0.23809523809523808 . 0.21428571428571427) (0.23809523809523808 . 0.2857142857142857) (0.23809523809523808 . 0.17857142857142858)))))
(setq ecb-options-version "2.40")
(setq ecb-source-path (quote (("/home/boris/its/plts" "plts"))))
(setq ecb-tip-of-the-day nil)
(setq ecb-tree-incremental-search (quote substring)) 
```

如你所见 - 没有`C:`。

**编辑 2**：

我发现有一个`~/.emacs.d/tramp`文件，它有：

```
;; -*- emacs-lisp -*- <12/05/03 19:12:12 /home/boris/.emacs.d/tramp>
;; Tramp connection history.  Don't change this file.
;; You can delete it, forcing Tramp to reapply the checks.

((["scpc" nil "C" nil]
  nil)) 
```

我删除了那个文件，然后打开了 emacs，激活了 ECB，试图进入`/`目录树，它也犯了同样的错误。然后，在我关闭 emacs 之后 - 它制作了相同的`tramp`文件。似乎它是在流浪汉的某个地方写的 - 在最新的 emacs 资源中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T19:40:02.517

我正在使用 Kubuntu 12.04 并遇到了同样的问题；不知道它是特定于 Kubuntu 还是 12.04。

不知何故，“C:\nppdf32Log\debuglog.txt”文件（http://askubuntu.com/questions/144408/what-is-the-file-c-nppdf32log-debuglog-txt）被内部 ecb -filename-cache - 我无法确切知道 ecb-filename-cache 是如何被填充的，但我可以通过运行 ecb-remote-patch-cache-dump 看到这一点 - 这是我的 tramp 错误的来源. 为了解决这个问题，我删除了所有语义缓存目录、debuglog.txt 文件的所有痕迹以及我能找到的任何tramp 文件。中提琴，欧洲央行再次工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T12:59:24.017

奇怪，也许它重用了旧的 trammp 文件中的旧 C:\ 东西？还阅读此[scpc 链接](http://www.gnu.org/software/tramp/#index-method-scpc-67)也许您新更新的 kubuntu 不支持它？尝试链接说的命令，看看它是否有效。听起来更像是流浪汉问题，而不是欧洲央行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-04T21:01:57.803

我遇到了同样的问题，发现自定义源路径（如[ECB First Steps](http://ecb.sourceforge.net/docs/First-steps.html)中所述）为我解决了问题。

# android - 双启动 - 手机上最新的 2 个“原始”Android 和 iPhone 版本

> ID：10411418
> 
> 赞同：0
> 
> 时间：2012-05-02T09:53:04.087
> 
> 标签：android, iphone, ios, testing, boot

出于测试目的，我们需要在指定的 Android/Iphone 设备上测试我们的产品，每个设备有 2 个最新的 Android/iOS 版本。
有没有办法安装某种双启动，所以我们实际上有 2 倍相同的设备，例如安装了最初发布的 2.3.5 和 4.0.3 的三星 Galaxy SII？
由于三星、HTC 等定制 Android 操作系统（根据您居住的地方使用不同的版本），它必须与您在瑞士遵循该设备的常规“更新”过程完全相同的版本。
我认为在 iPhone 上没有办法做到这一点，因为越狱绝对不是一种选择（毕竟这是一个定制版本......）但我希望有一些适用于 Android 的不错的解决方案。感谢您的任何建议。

问候
ABBDVD

PS：当然，我们也在 Android SDK 上进行了测试，但是自定义使其无关紧要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:13:55.330

这对 iPhone 来说是不可能的，在 Android 手机上可能是个坏主意。

您想在干净的设备上进行测试，而不是通过使用黑客和奇怪的引导加载程序来制造另一组问题。如果您的产品物有所值，请放弃几百欧元购买二手设备。更少的麻烦，更好的结果。并且不要放弃设备上的测试。您无法判断模拟器中的性能，也无法很好地体验交互。

# android - os.system 不在同一个子shell中运行

> ID：10411419
> 
> 赞同：1
> 
> 时间：2012-05-02T09:53:07.700
> 
> 标签：android, python, python-3.x

我正在尝试使用我的脚本构建 android。现在在我的构建的根文件夹中，我正在执行以下操作：

```
os.system("source build/envsetup.sh")
os.system("choosecombo 1 <chipsetname> <buildtype>")
os.system("make -j32") 
```

我什至试过这个：

```
os.system("source build/envsetup.sh;choosecombo 1 <chipsetname> <buildtype>;make -j32") 
```

知道我哪里错了吗？

我知道 os.system 在新的子外壳中执行。因此，它不应该在同一个子shell中执行第二个选项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:02:12.233

Each call to os.system is done in a NEW subshell, so treat each call as an independant call, you can't rely on something done before to (like sourcing a shell script) to do something else.

If the second way works in a standard shell, it should work in an `os.system` call.

# sqlalchemy - sqlalchemy/Sybase ASE 中的列别名太长

> ID：10411425
> 
> 赞同：2
> 
> 时间：2012-05-02T09:53:38.930
> 
> 标签：sqlalchemy, sap-ase

我在 Sybase 数据库上有 sqlalchemy ORM 映射。我的一些表名相当长，我收到以下错误：

```
DBAPIError: (Error) ('HY000', "[HY000] [DataDirect][ODBC Sybase Wire Protocol driver]
[SQL Server]The column heading that starts with 'RISK_AGGREGATION_GROUP_id_risk_agg' is 
too long. Maximum length is 30. 
```

有什么办法可以：

a）“别名”sqlalchemy中的表，以便它使用较短的列别名

b) 增加 30 个字符的限制

我意识到我可以在数据库中创建视图，但不想碰它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:55:51.493

SQLAlchemy 通常会自动设置适当的标签长度​​，在 Sybase 的情况下，我们从来没有得到任何关于这种方言的反馈，所以我们没有插入每个 sybase 的默认值，但它可以通过 label_length 进行配置：

```
engine = create_engine("sybase+pyodbc://...", label_length=30) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:59:52.490

我只能回答b）部分。在sybase中，不能增加字数限制！

关于a）我不知道这是否可能，但我的建议是让您更改表名！

# c# - MefBootStrapper 和闪屏

> ID：10411426
> 
> 赞同：0
> 
> 时间：2012-05-02T09:53:41.567
> 
> 标签：c#, splash-screen, mef

将棱镜与 MEF 一起使用。从逻辑上讲，您会在引导程序序列中将启动屏幕的功能放在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:09:33.600

在加载程序（启动和收集元素的模块）中，在应用程序启动之前。实际上甚至不是由 .NET 管理，而是由特殊的闪屏功能管理，显然。

[http://www.abhisheksur.com/2010/05/creating-splash-screen-without-code.html](http://www.abhisheksur.com/2010/05/creating-splash-screen-without-code.html)

展示了如何将图像添加到 .NET 应用程序并通过构建操作将其设置为初始屏幕。

这基本上甚至在 .NET 运行时完全加载之前就运行了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:03:26.287

@keydet 重点介绍了使用 MEF 和 Splash Screen 提高 WPF 启动性能的提示和技巧，我认为您还可以添加 eventtaggregator 以在初始化期间通知用户。

更多内容将转到[使用 MEF 和启动画面改善感知的 WPF 应用程序启动性能](http://channel9.msdn.com/blogs/keydet/improving-perceived-wpf-app-startup-performance-with-mef-and-a-splash-screen)。希望这有帮助。

# java - 在 java 中验证证书会引发异常 - 无法找到请求目标的有效证书路径

> ID：10411433
> 
> 赞同：7
> 
> 时间：2012-05-02T09:54:08.597
> 
> 标签：java, certificate, x509certificate, keystore, pkix

我有一个 Web 应用程序，需要客户端发送它的证书，并且服务器必须验证证书（即查看颁发者是否是有效的颁发者并存在于服务器的信任库中）。这是代码：

```
FileInputStream fin=new FileInputStream("C:/trustedca");
    KeyStore anchors = KeyStore.getInstance("JKS","SUN");
    anchors.load(fin, "server".toCharArray());
    X509CertSelector target = new X509CertSelector();
    FileInputStream fin1=new FileInputStream("C:/client.crt");
    CertificateFactory cf=CertificateFactory.getInstance("X.509");
    X509Certificate cert=null;
    while (fin1.available() > 0) 
    {
     System.out.println("in while---------");
     cert =(X509Certificate) cf.generateCertificate(fin1);
    }
    target.setCertificate(cert);
    PKIXBuilderParameters params = new PKIXBuilderParameters(anchors, target);

    CertPathBuilder builder = (CertPathBuilder) CertPathBuilder.getInstance("PKIX").build(params);
    PKIXCertPathBuilderResult r = (PKIXCertPathBuilderResult) builder.build((CertPathParameters)params);<br> 
```

但我得到一个例外：

```
sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid
 certification path to requested target<br> 
```

**注意：**
这里客户端发送的证书是 client.crt，用于签署 client.crt 证书的证书是密钥库“trustedca”中存在的 ca.crt。那为什么会给出这个例外呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-02T13:27:23.593

如果您需要客户端证书，请让 JSSE 为您完成所有这些工作。如果您想对特定连接使用自己的信任库，请配置 JSSE 以使用它。检查参考文档中的[定制 JSSE](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html#InstallationAndCustomization)部分。

这是一个`SSLContext`使用自定义信任存储构建的简短示例。`X509TrustManager`（也可以使用其他更复杂的 s，但您很少需要它。）

```
TrustManagerFactory tmf = TrustManagerFactory
    .getInstance(TrustManagerFactory.getDefaultAlgorithm());
KeyStore ks = KeyStore.getInstance("JKS");
FileInputStream fis = new FileInputStream("/.../example.jks");
ks.load(fis, null);
// or ks.load(fis, "thepassword".toCharArray());
fis.close();

tmf.init(ks);

SSLContext sslContext = SSLContext.getInstance("TLS");
sslContext.init(null, tmf.getTrustManagers(), null); 
```

如果您正在使用现有的应用程序服务器，如何通过配置所有这些将取决于服务器以及它期望的配置方式。为此使用 JSSE 还将确保关键使用属性是适当的。

如果您通过其他方式获得证书并想要对其进行验证，则需要使用[PKI API](http://docs.oracle.com/javase/6/docs/technotes/guides/security/certpath/CertPathProgGuide.html)。如果您遵循[*使用 PKIX 算法验证证书路径的示例*](http://docs.oracle.com/javase/6/docs/technotes/guides/security/certpath/CertPathProgGuide.html#PKIXCertPathValidatorResult)，您应该会得到这样的结果：

```
X509Certificate certToVerify = ...

CertificateFactory cf = CertificateFactory.getInstance("X.509");
CertPath cp = cf.generateCertPath(Arrays
    .asList(new X509Certificate[] { certToVerify }));

TrustAnchor trustAnchor = new TrustAnchor(caCert, null);

CertPathValidator cpv = CertPathValidator.getInstance("PKIX");
PKIXParameters pkixParams = new PKIXParameters(
    Collections.singleton(trustAnchor));
pkixParams.setRevocationEnabled(false);

cpv.validate(cp, pkixParams); 
```

检查 validate 的结果（当然，它没有引发验证异常）。在这里，我禁用了撤销检查以简化。您还可以设置`PKIXParameters`策略检查的其他方面。这可能会变得相当复杂（以及为什么最好让默认的 JSSE 管理器为您做这件事）。

* * *

您还在 Security.SE 上提出的另一个问题的上下文中询问了所有这些：[*证书指纹的实际价值是什么？*](https://security.stackexchange.com/q/14330/2435).

假设您有两个`X509Certificate`s:`serverCert`和`caCert`，您要验证它`serverCert`是由 (与公钥匹配的私钥) 签名的`caCert`。

最简单的方法：

```
serverCert.verify(caCert.getPublicKey()); 
```

如果您想更手动地执行此操作，请使用`Signature`API：

```
System.out
     .println("Signature algorithm: " + serverCert.getSigAlgName());
Signature sig = Signature.getInstance(serverCert.getSigAlgName());
sig.initVerify(caCert.getPublicKey());
sig.update(serverCert.getTBSCertificate());
System.out
    .println("Verified? " + sig.verify(serverCert.getSignature())); 
```

假设算法是`SHA1withRSA`，您还可以计算摘要：

```
MessageDigest digest = MessageDigest.getInstance("SHA-1");
digest.reset();
digest.update(serverCert.getTBSCertificate());
byte[] digestBytes = digest.digest();

Cipher cipher = Cipher.getInstance("RSA");
cipher.init(Cipher.DECRYPT_MODE, caCert.getPublicKey());
byte[] cipherText = cipher.doFinal(serverCert.getSignature()); 
```

摘要本身将只是 using 的结果的一部分`Cipher`：您从中得到`serverCert.getSignature()`的实际上是一个更复杂的 ASN.1 结构，其中包括摘要算法标识符，在这种情况下，`digestBytes`应该以这样[的](https://www.rfc-editor.org/rfc/rfc3447#section-9.2)前缀：

```
SHA-1:   (0x)30 21 30 09 06 05 2b 0e 03 02 1a 05 00 04 14 || H. 
```

（如果您想正确分析 ASN.1 结构，[BouncyCastle可能会很有用。）](http://www.bouncycastle.org/)

请注意，这些都不能验证时间有效性或任何其他属性。PKIX 合规性远不止检查签名（参见 RFC 3820 和 5820）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T15:44:17.517

由于缺少一些中间证书，可能无法构建有效路径。您加载证书的循环会丢弃除最后一个之外的所有证书。相反，保存所有这些证书，并将它们传递给以`CertPathBuilder`帮助构建路径。

另一个常见问题是默认执行吊销检查，这有利于安全性。如果您不了解如何获取 CRL 或使用 OCSP，您可以降低安全性并禁用吊销检查。这也显示在下面的示例中。

```
...
CertificateFactory fac = CertificateFactory.getInstance("X.509");
FileInputStream is = new FileInputStream("client.crt");
Collection<? extends Certificate> intermediate;
try {
  intermediate = fac.generateCertificates(is);
} finally {
  is.close();
}
X509Certificate client = null;
for (Certificate c : intermediate)
  client = (X509Certificate) c;
if (client == null)
  throw new IllegalArgumentException("Empty chain.");
X509CertSelector t = new X509CertSelector();
t.setCertificate(client);
PKIXBuilderParameters params = new PKIXBuilderParameters(anchors, t);
CertStoreParameters store = new CollectionCertStoreParameters(intermediate);
params.addCertStore(CertStore.getInstance("Collection", store));
params.setRevocationEnabled(false);
... 
```

了解您如何获取“client.crt”文件以及预期其内容会有所帮助。和响应者一样，我想知道为什么您不能使用 JSSE 的内置工具来执行此验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T09:58:32.687

> 即查看颁发者是否是有效的颁发者并存在于服务器的信任库中

JSSE 已经做到了这一切。您不必执行任何此操作，除非验证对等证书未过期。

# unix - 如果 /tmp 中已用磁盘空间超过 50%，我想删除所有匹配 'a.*' 的文件

> ID：10411435
> 
> 赞同：2
> 
> 时间：2012-05-02T09:54:22.450
> 
> 标签：unix, solaris, diskspace

我需要删除所有以“a”开头的文件。一旦我的 /tmp 容量超过 50% 并且此命令应始终在后台运行。我是 Unix 新手，所以有人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:24:48.513

我会尽力帮助而不给你答案。这样你就可以学习一些其他的东西了！

首先，您可能希望将一堆命令保存为脚本并使用 cron 之类的东西运行它。你可以这样做，`while true ; do rm a.* ; sleep 60 ; done`但它不会在重新启动后重新启动。Cron 工作会。
那行代码每分钟运行一次并删除 a.*. 如果您希望每秒都将 60 更改为 1。为了使它更有用，查看您最喜欢的磁盘空间命令，使用诸如 cut 和 grep 之类的东西来获取某些字段并删除标题行（如果基本空间命令没有选项仅用于输出 %space），
例如

```
[max@fedora ~]$ df /tmp
Filesystem     1K-blocks   Used Available Use% Mounted on
/dev/sda6        4866748 202812   4419868   5% /tmp
[max@fedora ~]$ df /tmp | grep tmp| cut -c43-45
  5 
```

然后你只需要看看一些 if 语句的语法，你就走了。将您写入的命令保存到名为“space_clear.sh”的文件中，然后将 space_clear.sh 添加到 cron 以每分钟运行一次，然后您就离开了。
重要提示：当你在测试时，不要这样做`ls a.*`，`rm a.*`然后如果你弄错了，它只是向你显示它会删除而不是删除它们的文件！记住，做错事就是学习。
（如果您仍然卡住，请阅读 if、then 和 fi 以获得您首选的 shell（bash/ksh csh/bourne）。坚持使用 df 命令，并在后引号中使用比较运算符和 50 作为“的一部分”如果”。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:10:23.187

您可以做很多事情，而无需昂贵的分叉和管道来解析和匹配命令输出。我的建议是使用类似的命令脚本

```
#!/bin/sh
PATH=/bin:/usr/bin:/sbin:/usr/sbin   # Cron does not export any PATH.
case `df /tmp` in
    (* [5-9]?% *) rm -f /tmp/a.*
esac 
```

这独立于使用百分比输出的列`df`。请注意，这适用于从 50% 到 99% 的 Use% 值，但不适用于 100% 及以上（由于为超级用户保留了空间，可能会发生这种情况）。这留作练习:-)

现在至于定期运行它，您可以设置`VISUAL=vi`和/或`EDITOR=vi`然后`crontab -e`将您弹出到您指定的编辑器中。插入一行

```
* * * * * /full/path/to/above/script 
```

并保存并退出。这将每分钟运行一次脚本。每十分钟一次

```
0,10,20,30,40,50 * * * * /full/path/to/above/script 
```

确保脚本可以使用`chmod +x /full/path/to/above/script`.

# c# - 使用 c# 嵌套类和可访问性

> ID：10411436
> 
> 赞同：1
> 
> 时间：2012-05-02T09:54:28.143
> 
> 标签：c#, oop

我知道嵌套类。我如何设计我的嵌套类，使得在嵌套类的父类之外没有人能够访问像实例创建等这样的嵌套类，因为我希望子类是私有的。我想通过父类属性或方法公开我的子类属性，方法一切。请指导我为这种嵌套类编写代码。谢谢

```
public class Person
{
private string _firstName;
private string _lastName;
private DateTime _birthday;

//...

public class FirstNameComparer : IComparer<Person>
{
    public int Compare(Person x, Person y)
    {
        return x._firstName.CompareTo(y._lastName);
    }
}

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T09:56:48.157

将内部类标记为，`private`而不是`public`.

```
public class Person
{
    private string _firstName;
    private string _lastName;
    private DateTime _birthday;

    private FirstNameComparer firstNameComparer = new FirstNameComparer();

    public int CompareFirstNames(Person x, Person y)
    {
       return firstNameComparer.Compare(x, y);
    }

    //...

    private class FirstNameComparer : IComparer<Person>
    {
        public int Compare(Person x, Person y)
        {
            return x._firstName.CompareTo(y._lastName);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T09:57:56.433

你可以制作嵌套类`private`。主类将负责创建嵌套类实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T10:01:01.307

您可以对嵌套类使用私有访问器。如果你想公开它的一些属性，你可以像这样为主类创建新属性：

```
private FirstNameComparer _FirstNameComparer = new FirstNameComparer();
public int Compare(Person x, Person y)
    {
        return _FirstNameComparer.Compare(Person x, Person y); 
    } 
```

# scheme - 将一个大引号转换为方案中的字符串/列表

> ID：10411437
> 
> 赞同：2
> 
> 时间：2012-05-02T09:54:41.967
> 
> 标签：scheme, y-combinator, racket

我有这个任务要做，我需要解析一个错误的书面递归过程，并修复它。例如：这个：

```
(let ((fib (lambda (n) 
             (cond    ((= n 0) 1) 
                         ((= n 1) 1) 
                        (else (+ (fib (- n 1)) (fib (- n 2))))))))
           (fib n)) 
```

转换成这样：

```
(let ((fib (lambda (n fib-param) 
                    (cond ((= n 0) 1) 
                              ((= n 1) 1) 
                             (else (+ (fib-param (- n 1) fib-param)  
                                      (fib-param (- n 2) fib-param))))))) 
  (fib n fib)) 
```

该过程以引用的形式给出，包含 3 个部分：“let”、let 的 the 和主体。我想解析第二部分（意思是，我想列出一个列表，其中的每个术语都是“let”表达式中的一个单词），但无论我尝试什么，我似乎都无法解决。

我正在使用 drRacket 方案。

感谢和抱歉这么长的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:08:17.150

您可能想阅读：[http](http://www.dreamsongs.com/Files/WhyOfY.pdf) ://www.dreamsongs.com/Files/WhyOfY.pdf ，它解释了如何进行这种转换。您的作业是一种经典的编程语言技术，用于仅使用过程应用程序进行递归。

# xml - 在 XSLT（Schema Aware XSLT 2.0 ala Post-Schema-Validation Infoset）期间从 XSD 复制 VALUE 的任何方法？

> ID：10411441
> 
> 赞同：2
> 
> 时间：2012-05-02T09:54:57.770
> 
> 标签：xml, xsd, transformation, xslt-2.0

我正在尝试将 Attribute 值从架构中的一个元素复制到 XSLT 输出。我尝试了复制，并访问了很多带有模式元素的示例，但它似乎仅用于匹配或复制整个节点结构......

总结一下，我想利用 xslt xsd 意识来做相当于为属性分配默认值的 Post-Schema-Validation Infosetway

**XML**

```
 <MyProject Val="wrongval"> 
```

**XSD**

```
 <xs:element name="MyProject">
       <xs:complexType>
         <xs:attribute name="Val" fixed="1234" />
       </xs:complexType>
     </xs:element> 
```

**XSLT**

```
 <xsl:template match="/">
       <xsl:element name="MyProject">
          <xsl:attribute name="Val">**???=1234**</xsl:attribute>
       </xsl:element>
    </xsl:template> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T11:10:21.377

你快到了。给定以下（未使用的）源文档：

```
<MyProject Val="wrongval"/> 
```

和以下架构：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

     <xs:element name="MyProject">
       <xs:complexType>
         <xs:attribute name="Val" fixed="1234" />
       </xs:complexType>
     </xs:element>

</xs:schema> 
```

和以下样式表：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:import-schema schema-location="test.xsd"/>

    <xsl:template match="/">
       <xsl:element name="MyProject" validation="strict"/>
    </xsl:template>

</xsl:stylesheet> 
```

转换输出为：

```
<?xml version="1.0" encoding="UTF-8"?><MyProject Val="1234"/> 
```

# jquery - jqPlot - 如何以编程方式查找存在的 jQuery UI 选项卡图

> ID：10411445
> 
> 赞同：1
> 
> 时间：2012-05-02T09:55:23.510
> 
> 标签：jquery, jquery-ui, jqplot

请看以下示例：

[http://www.jqplot.com/deploy/dist/examples/hiddenPlotsInTabs.html](http://www.jqplot.com/deploy/dist/examples/hiddenPlotsInTabs.html)

在第一个示例中，通过捕获“tabshow”事件并查找选择了哪个选项卡来绘制隐藏图：

```
$('#tabs').bind('tabsshow', function (event, ui) {
    if (ui.index === 1 && plot1._drawCount === 0) {
        plot1.replot();
    } else if (ui.index === 2 && plot2._drawCount === 0) {
        plot2.replot();
    }
}); 
```

这很好用，但是如果您添加了更多选项卡并将绘图移动到其他选项卡，则必须手动更新硬编码的“ui.index”值，我想在我的项目中避免这种情况。

有人知道以编程方式查找您的情节存在于哪个选项卡下的好方法吗？我想以这样一种方式进行编码，无论您有多少标签以及放置绘图的位置都无关紧要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:29:10.533

您必须通过以下方式处理它：

1.  从某处获取您想要查找的图表 ID。
2.  使用 jQuery 选择图表。
3.  使用方法找到它的父级`parent()`--- 这是包含它的选项卡。
4.  使用`attr('id')`父级获取其 id。

[这就是我在此处可用的 jsfiddle 示例中展示它的方式。](http://jsfiddle.net/Boro/kU3jg/)

**编辑**

据我了解，您想获取所选选项卡的索引，实际上是 ui.index。由于我在 中找不到现成的方法`jQuery UI`，这就是我实现它的方法（此代码也添加到之前的 jsfiddle 示例中）：

```
 var tabIndex = -1;
    $("#tabs ul li").each(function(index){
        if('#'+tabId === $(this).find("a").attr('href')){
            tabIndex = index;
            return false;
        }
    }); 
```

# oop - 随时间推移构建数据的最佳实践

> ID：10411447
> 
> 赞同：1
> 
> 时间：2012-05-02T09:55:45.590
> 
> 标签：oop, class, design-patterns

假设，如果我随着时间的推移跟踪同事的工作。构建数据的最佳方式是什么？我的例子完全是虚构的，但这是一个在实践中出现了很多次的编程问题。

我的问题最好用一个简单的例子来说明：

您每天都在将同事的工作硬编码到三个单独的列表中。假设清单 1 是“他/她需要做什么”。假设列表 2 是“他/她做了什么”。最后，列表 3 是记录这些值的日期。

所有列表都是累积的，并且可以随时间增加或减少。

因此，在第四天，列表 1 将包含 4 个整数： {100, 97, 94, 101} - 表示还有待完成的工作的整数。第 4 天，列表 2 将包含 4 个累积整数值：{0, 3, 3, 5} 代表这位同事迄今为止所做的工作（每次他们完成一项工作，您就在列表中添加一个）。清单 3 将包含日期（假设程序每天运行一次，因此 01/01/2012、02/01/2012 等）。

现在，显然使用列表来存储这些数据是不好的做法 - 忘记输入一条数据，您的所有数据都被损坏并关闭。

在这种情况下，最佳做法是什么？数据应该如何结构化？在我看来，从日期到结果的映射似乎是一种很好的做法，这是否正确，并创建一个自定义类来保存“已完成的工作/要完成的工作”信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:39:01.890

我认为您需要一个带时间戳的抽象（如一个`Task`类）来存储您想要存储的内容，并提供一个允许查询世界*当前*状态和*历史*状态的接口。

看看福勒的[时间模式](http://martinfowler.com/eaaDev/timeNarrative.html)以获得灵感。

# php - 此 PHP 版本不支持 PHP openssl_sign() ecparam 键类型

> ID：10411450
> 
> 赞同：4
> 
> 时间：2012-05-02T09:55:58.740
> 
> 标签：php, openssl, digital-signature, elliptic-curve

`openssl_sign`正在返回签名字符串但打印此错误。我正在使用椭圆曲线键

```
Warning: openssl_sign() [function.openssl-sign]: key type not supported in this PHP build! in 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T22:39:42.387

已在 php 问题跟踪器中提交了一个问题： [https ://bugs.php.net/bug.php?id=66501](https://bugs.php.net/bug.php?id=66501)

# select - 如何使用 Knockout.JS 制作具有不同值的选择元素然后是文本

> ID：10411455
> 
> 赞同：16
> 
> 时间：2012-05-02T09:56:25.590
> 
> 标签：select, knockout.js

我明白那个

```
<p>Destination country: <select data-bind="options: availableCountries"></select></p>

<script type="text/javascript">
    var viewModel = {
        availableCountries : ko.observableArray(['France', 'Germany', 'Spain']) // These are the initial options
    };

    ko.applyBindings(viewModel);
</script> 
```

将创建一个选择元素，如：

```
<select data-bind="options: availableCountries">
    <option value="France">France</option>
    <option value="Germany">Germany</option>
    <option value="Spain">Spain</option>
</select> 
```

但如果我希望它是这样的：

```
<select data-bind="options: availableCountries">
    <option value="1">France</option>
    <option value="2">Germany</option>
    <option value="3">Spain</option>
</select> 
```

我的代码是什么？

我知道我可以使用 optionsText 来填充选项，但 optionsValue 似乎对我不起作用

干杯，丹尼尔

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-02T13:43:05.927

您可能希望将数组映射`['France', 'Germany', 'Spain']`到具有 和 的单独属性的`value`结构`text`。

例如，

```
[
   { value: 1, name: 'France' }, 
   { value: 2, name: 'Germany' }, 
   { value: 3, name: 'Spain' }
] 
```

然后，您可以像这样绑定它：

```
<select data-bind="options: availableCountries, optionsText: 'name', optionsValue: 'value'"></select> 
```

# php - 这是将 HTML 放入 PHP 的正确方法吗？

> ID：10411457
> 
> 赞同：3
> 
> 时间：2012-05-02T09:56:40.770
> 
> 标签：php, xhtml, standards, echo, language-features

我是 PHP 新手，大部分时间我都在“回显”我的 HTML。今天，我发现了这种方法，它让事情变得简单了 1000 倍：

```
<?php if(get_field('field_name')){ ?>

   <p>HTML can go here without echo'ing it</p>

<?php } ?> 
```

但这是一种公认​​的方式吗？它似乎每次都有效。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:13:25.480

## 它主要是关于你喜欢如何阅读你的代码。

对于具有自动完成/代码建议的 IDE，最好使用 `<?php if (...) { ?>`自动完成/建议功能，以便知道何时使用 html 以及何时为您的代码提供 php 建议。当然，选择以后易于阅读的编码风格也很好。
据我所知，代码高亮在内部不起作用，也不应该起作用

```
echo '<div class="c"><h2>...'; 
```

### 不同的编码风格：

除了已经提到的，没有太大的区别。例如使用

```
echo "<div>$var1<h1>$var2</h1>..."; 
```

对于插入变量，它更容易（*更少编写*），代码占用空间更小，更容易阅读：

```
<?php 
// <= Some code...
?><div><?php echo $var1; ?><h1><?php echo $var2; ?></h1>... 
```

### 短开放标签/为什么不使用：

还有`<?= ?>`可用的快捷方式，但我没有使用它，因为它需要设置 PHP 配置（并不总是可用/可更改/可写）值`short_open_tag`。但是 PHP 手册说See [Are PHP short tags是否可以使用？](https://stackoverflow.com/q/200640/1338846)和[PHP echo vs PHP 短标签](https://stackoverflow.com/q/1386620/1338846)*`Since PHP 5.4.0, <?= is always available.`*

### 在引擎盖下发现了什么

里面`<?php ?>`的所有东西都由 PHP: Hypertext Preprocessor 解析，所以有人可能会说它需要更多的资源来使用`echo '<html><here>';`，但是如果你没有超过 100000`echo`或`print`'s + 开始`<?php`和结束`?>`需要很少的指令，这又是一个错误的地方进行优化同样`echo`，在计算 cpu 指令时它们几乎相同，至少在我的安装中是这样。
请参阅[PHP 脚本究竟是如何执行的？](https://stackoverflow.com/q/2720488/1338846)
以及Sebastian Bergmann 的[php.net/manual/en/tokens.php](http://www.php.net/manual/en/tokens.php)
和[PHP 编译器内部幻灯片](http://www.slideshare.net/sebastian_bergmann/php-compiler-internals)

### 关于性能的一些测试：

1.77s.: 1 000 000 次`$var = rand(0, 1); echo 'Foo Bar '.$var;`
1.61s.: 1 000 000 次`$var = rand(0, 1); ?>Foo Bar <?php echo $var; ?><?php`
1.83s.: 1 000 000 次`$var = rand(0, 1); echo "Foo Bar $var";`

我真的认为最重要的是您喜欢如何编写/阅读代码。有时最好先写后读
`if (...) { echo "something"; }`
，有时
`<?php if (...) { ?>something<?php } ?>`

就我个人而言，我更喜欢`echo "...";`在有很多变量或仅打印出一小段文本以及`?>...<?php`输出大块 html 或只有很少变量的长文本时使用。这使代码更易于阅读。

### 关于评论中提到的加速器：

如果我猜对了，php首先进行词法分析并将结果传递给加速器，从这个角度来看`?>text<?php`，`echo "text";`有很大的不同，但它仍然不会改变普通网站项目的性能。
更清楚：加速器本身确实提高了性能，但关于使用`?>text<?php`或`echo "text";`没有太大的区别。

### 最终答案：

是的，它被广泛接受和使用，但我认为（*至少没有从 PHP 文档中找到任何明确的内容*）它仍然是未记录的方式，但是，正如您已经知道的那样，它不仅仅是方式。基本上，它的作用与使用 echo 相同：

```
if ( get_field('field_name') ) {
   echo "<p>HTML can go here by echo'ing it</p>";
} 
```

在尝试查找官方文档时，我已阅读以下页面：
[php.net/manual/en/control-structures.alternative-syntax.php](http://www.php.net/manual/en/control-structures.alternative-syntax.php)
[php.net/manual/en/language.basic-syntax.phpmode.php](http://www.php.net/manual/en/language.basic-syntax.phpmode.php)
[php.net/ manual/en/language.types.string.parsing.complex](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing.complex)
使用谷歌，并搜索了一些论坛。

似乎没有经常使用 明确记录的*替代方式：*

```
<?php if ($a == 5): ?>
A is equal to 5
<?php endif; ?> 
```

### 更新：

关于分离条件语句的官方文档在这里：[control-structures.intro](http://www.php.net/manual/en/control-structures.intro.php)`{`和[language.basic-syntax.phpmode.php](http://www.php.net/manual/en/language.basic-syntax.phpmode.php)一起记录了它，但是只有*替代*方法的演示（见上文）。`}``<?php``?>`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:02:03.650

It is. But it has also become a standard to omit the ending `?>` in every file, so there is no trailing whitespace or line ending in the output.

```
<?php if(get_field('field_name')){ ?>

   <p>HTML can go here without echo'ing it</p>

<?php } 
```

If enabled in your php.ini, you can also use short tags (`<?` instead of `<?php`)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T09:59:37.163

我建议您[对控制结构使用替代语法](http://php.net/manual/en/control-structures.alternative-syntax.php)。*

# email - 使用 cakephp 发送电子邮件的困难

> ID：10411459
> 
> 赞同：0
> 
> 时间：2012-05-02T09:56:45.957
> 
> 标签：email, cakephp

当然这让我很头疼，但我明白每个初学者都有同样的经历。我已经尝试了我发现的所有关于使用 cakephp 发送电子邮件的教程。好吧，没有任何效果。我可以有一个关于 cakephp 电子邮件的更好教程的链接。手册也不完整:(我有点沮丧:(

我试过这段代码：

```
<?php
    class EmailsController extends AppController{

 var $components = array('Email');

function sendNewUserMail() {
    //$User = $this->User->read(null,$id);
    $this->Email->to = 'csorila17@gmail.com';
    $this->Email->bcc = array('secret@example.com');  
    $this->Email->subject = 'Welcome to our really cool thing';
    $this->Email->replyTo = 'support@example.com';
    $this->Email->from = 'Cool Web App <charm_sorila@yahoo.com>';
    $this->Email->template = 'simple_message'; // note no '.ctp'
    //Send as 'html', 'text' or 'both' (default is 'text')
    $this->Email->sendAs = 'both'; // because we like to send pretty mail
    //Set view variables as normal
    $this->set('User', $User);
    //Do not pass any args to send()
    $this->Email->send();
    echo "hi";
 }
    }
?> 
```

它保存在此文件夹中：

```
C:\xampp\htdocs\NewFolder\app\webroot\email\app\controllers 
```

所以每次我尝试在浏览器中运行它时，我在我的 url 中输入的是：`http://localhost/email/sendNewUserMail

我的浏览器给我的是一个空白页面，没有任何内容发送到 csorila17@gmail.com。可能是什么问题？如果可能的话，我可以看看使用 cakephp 发送电子邮件的完整代码吗？这个问题让我发疯。先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:43:09.883

如果您在本地运行此应用程序，我相信您需要设置一个邮件服务器才能工作，否则您可以使用任何提供商的 smtp 邮件选项。为此，您必须配置您的邮件设置。

在你的`app\config`你可以创建一个文件`email.php`

```
<?php 
    class EmailConfig {

        public $default = array(
            'host' => 'ssl://smtp.gmail.com',
            'port' => 465,
            'username' => 'your email address', //example@gmail.com
            'password' => 'password',
            'transport' => 'Smtp',
            'from' => array('From Email Address' => 'Name to be displayed in the Email'),
            'log' => true
        );

    } 
```

在您的控制器中之后，您可以设置使用以下代码发送电子邮件。

```
$email = new CakeEmail();
$email->to('example@gmail.com');
$email->subject('Email testing Subject');       
$email->send('Email testing content'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:14:53.757

如前所述，了解版本号很重要。确保在您的配置文件中将调试设置为“2”，以便您可以看到一些输出。

# java - Java-EE 会话说明

> ID：10411462
> 
> 赞同：0
> 
> 时间：2012-05-02T09:56:52.217
> 
> 标签：java, jakarta-ee

我在 java 中有一个 web 应用程序，它被另一个用 java 编写的 web 应用程序调用。我担心的是会话超时。假设正在调用的 Web 应用程序的会话超时是 30 分钟，用户会话超时，而调用 Web 应用程序的 Web 应用程序的会话超时是 15 分钟。

被调用网站的 Web 应用程序的会话超时值是 30 分钟（在其自己的 web.xml 中设置）或 15 分钟（在调用它的 Web 应用程序中设置）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:35:07.220

因此，您拥有由 web-app B 调用的 web-app A。

A 的会话超时为 30 分钟。

B 的会话超时为 15 分钟。

你在问 A 的会话超时是多少。

好吧，答案就在问题中：30 分钟。A 是从普通用户还是从另一个 Web 应用程序接收 HTTP 请求是无关紧要的。

# php - 将foreach循环修改为输出 基于 ID 变量

> ID：10411465
> 
> 赞同：0
> 
> 时间：2012-05-02T09:56:58.570
> 
> 标签：php, magento

我正在尝试修改在 Magento 网站前端绘制类别列表的方式（简单的想法）。我有一个类别列表，我想将这些类别与 jquery 手风琴分开并使用，所以对于 EG。我想要一个标题“2010 年及以上”，其中包含 ID 为 1 到 10 的类别。然后我想要一个标题“2011”，其中包含 ID 为 11 到 20 的实时类别。

下面的默认类别代码只是循环遍历 ID 并在 a 中回显类别列表`<UL>`- 但我想自定义`<UL>`：

```
<?php $collection = $this->_getCollection(); ?>
<?php if (count($collection) > 0) : ?>

    <?php foreach ($collection as $_category ) : ?>            

                <li>
                    <a href="<?php echo $this->getUrl('gallery/category/view/', array('id' => $_category->getId())); ?>"><?php echo $this->htmlEscape($_category->getName()) ?></a>
                </li>

    <?php endforeach ?>

<?php endif; ?> 
```

只见树木不见森林！- 我想将 ID 拉入一个数组并根据 IF 语句绘制新结构，但在构建数组时没有运气。

谁能看到一个快速的方法，我可以打破循环说，如果 ID 是 1 到 10 然后列出`<li class="2010">`，然后继续为 ID 11 到 20`<li class="2011">` 例如。？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:01:25.073

尝试检查您不想显示的类别 ID 并用于`continue;`获取下一个：

```
<?php foreach ($collection as $_category ): ?>
<?php if ($_category->getId() == 10) { continue; } ?>
    <li>
        <a href="<?php echo $this->getUrl('igallery/category/view/', array('id' => $_category->getId())); ?>"><?php echo $this->htmlEscape($_category->getName()) ?></a>
    </li>
<?php endforeach ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:21:43.763

你应该划分你的问题。一部分是输出，可以用函数表示：

```
<?php

$htmlLi= function($class, $url, $name) {
?>
                <li class="<?php echo $class; ?>">
                    <a href="<?php echo $url; ?>"><?php echo $name; ?></a>
                </li>
<?php
} 
```

然后你有逻辑来决定基于一些 id 的类名：

```
$classById = function($id) {
    $class = $id < 11 ? '2010' : '2011';
    return $class;
} 
```

你最后想把它放在一起：

```
<?php $collection = $this->_getCollection(); ?>
<?php if (count($collection) > 0) : ?>

    <?php foreach ($collection as $_category) {
        $id    = $_category->getId());   
        $class = $classById($id);
        $url   = $this->getUrl('gallery/category/view/', array('id' => $id);
        $name  = $this->htmlEscape($_category->getName());
        $htmlLi($class, $url, $name);
    } ?>

<?php endif; ?> 
```

这也表明，您自己的函数`_getCollection()`尚未以您需要的格式返回数据。返回循环真正需要的字段可能会更好：

```
$class, $url and $name 
```

# c# - 如何在 MVC 3 中更改日期时间格式

> ID：10411468
> 
> 赞同：3
> 
> 时间：2012-05-02T09:57:06.553
> 
> 标签：c#

我有代码。

模型

```
 [Required(ErrorMessage = "Bạn hãy nhập ngày tháng năm sinh")]
    [DataType(DataType.Date, ErrorMessage = "Ngày tháng năm sinh không chính xác, bạn hãy nhập lại")]
    [ValidationHelper.DateFormat(ErrorMessage = "Ngày tháng năm sinh không chính xác, bạn hãy nhập lại")]
    [DisplayFormat(DataFormatString = "{MM/dd/yyyy}")]
    [Display(Name = "Ngày sinh")]
    public System.DateTime DateOfBirth { get; set; } 
```

看法

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm((string)ViewBag.FormAction, "Account"))
{
    <fieldset>
        <legend>Registration Form</legend>
        <ol>

            <li>
                @Html.LabelFor(m => m.DateOfBirth)
                @Html.EditorFor(m => m.DateOfBirth)
                @Html.ValidationMessageFor(m => m.DateOfBirth)
            </li>
        </ol>
    </fieldset>
} 
```

当我输入 05/31/2012 => 值 '05/31/2012' 对 Ngày cấp CMT 无效。当我输入 31/05/2012 => 字段 Ngày cấp CMT 必须是日期。那是怎么回事？我来自越南。我的英语很差，但请帮助我！非常感谢！我的本地日期格式 yyyy/MM/dd

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:59:58.033

尝试：

```
@item.Date.ToString("dd MMM yyyy") 
```

或者您可以`[DisplayFormat]`在视图模型上使用该属性：

```
[DisplayFormat(DataFormatString = "{0:dd MMM yyyy}")]
pubilc DateTime Date { get; set } 
```

在您看来，简单地说：

```
@Html.DisplayFor(x => x.Date) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T09:08:54.393

要`DisplayFormat`使用`EditorFor`，您需要添加`ApplyFormatInEditMode`以下内容：

`[DisplayFormat(DataFormatString="{0:MM/dd/yyyy}", ApplyFormatInEditMode=true)]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:00:29.507

您的日期似乎有一个显示格式：

```
[DisplayFormat(DataFormatString = "{MM/dd/yyyy}")] 
```

如果您希望 31/05/2012 成为日期，您可以将显示格式更改为：

```
[DisplayFormat(DataFormatString = "{dd/MM/yyyy}")] 
```

# erlang - 从系统中隔离 Celery、RabbitMQ 和 Erlang

> ID：10411475
> 
> 赞同：0
> 
> 时间：2012-05-02T09:57:33.027
> 
> 标签：erlang, dependencies, rabbitmq, dependency-management, software-distribution

我正在开发一种使用芹菜的产品。由于该产品依赖于依赖于 Erlang 的 RabbitMQ。有没有办法隔离 RabbitMQ 和 Erlang，使它们只能由我的应用程序安装和使用？
我不想受到系统本身的影响，并且要求已经安装了 Erlang/RabbitMQ。我想控制我的依赖项。
我已经知道如何使用 py2exe 隔离 Python 解释器和依赖项，我想知道 py2exe 是否也可以用于捆绑 RabbitMQ 和 Erlang。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:11:28.493

Erlang 没有 py2exe（只需阅读[常见问题解答](http://www.erlang.org/faq/how_do_i.html#id53029):)）。

如果我理解正确并且您担心文件隔离，您可以简单地将包含 Erlang 和 RabbitMQ 的目录的读取权限授予启动 Celery 的用户。（尽管以这种方式你必须考虑脚本安装 - 例如，如果你想坚持使用 Erlang，你可以使用 escript - 以避免你的用户管理目录）

希望这可以帮助！

# c# - CustomLineCap.Dispose() 上的 ReleaseHandleFailed

> ID：10411476
> 
> 赞同：3
> 
> 时间：2012-05-02T09:57:36.990
> 
> 标签：c#, .net, visual-studio-2010, exception, dispose

在 Visual Studio 2010 中启用 MDA 后，助手 constintenlty 会在每次 CustomLineCap 处置时激活 ReleaseHandleFailed，例如：

```
 GraphicsPath gp = new GraphicsPath();
    CustomLineCap clp = new CustomLineCap(gp, null);
    clp.Dispose(); 
```

当然这只是一个简单的例子，但即使在这里我也接到了助手的电话，即：

```
 A SafeHandle or CriticalHandle of type
    'System.Drawing.Drawing2D.SafeCustomLineCapHandle' failed to properly release the
    handle with value 0x00000000\. This usually indicates that the handle was released
    incorrectly via another means (such as extracting the handle using DangerousGetHandle
    and closing it directly or building another SafeHandle around it.) 
```

是不是上课有问题？此类的所有可用构造函数都会导致此辅助行为，无论 gp 中的残基是什么形状。最后的问题是：我应该如何正确地处理 CustomLineCap 实例？

大卫。

# objective-c - 具有多个 NSFetchedResultsController 但只有一个 UIManagedDocument 的 TabBar 应用程序

> ID：10411486
> 
> 赞同：2
> 
> 时间：2012-05-02T09:58:02.120
> 
> 标签：objective-c, core-data, nsfetchedresultscontroller, uimanageddocument

通过托管文档使用核心数据时，我遇到了一些问题。
我有一个多选项卡应用程序，每个选项卡必须显示单个数据库的不同实体。
为了初始化托管文档，我创建了一个帮助类方法来实例化托管文档、创建它、打开它并添加 plist 文件中的所有数据。接下来，它调用一个块，该块是该方法的参数。这样，我可以从一个选项卡视图中调用所有这些，并通过（通过一个块）创建 fetchedResultsController 的方法。

```
+ (UIManagedDocument *)openDatabaseAndUseBlock:(completion_block_t)completionBlock; 
```

我这样做是因为我知道数据库打开需要一段时间，而且如果我在打开之前设置 FRC，它将无法正常工作。所以我在打开数据库时执行的块中调用块...。

在标签之间切换时出现了我的问题。我在所有视图中调用这个辅助方法（带有相应的块）`viedDidLoad`，我认为这会导致数据损坏，因为所有的节省都完成了。

有什么方法可以在第一个视图上只调用一次帮助方法，然后将上下文传递给所有其他选项卡，以确保即使我在开始时快速切换选项卡，它也会起作用？

**或者也许我做错了所有的过程，还有另一种方法可以让所有这些工作？我对 Core Data 完全陌生。**

提前致谢！

# sql - 对于删除触发器不起作用（Microsoft SQL Server Management Studio）

> ID：10411489
> 
> 赞同：0
> 
> 时间：2012-05-02T09:58:26.183
> 
> 标签：sql, sql-server-2008, triggers, sql-delete

我有一张表 Universities 和一张表 Cities。它们之间存在 am:n 关系，因此该关系保存在另一个名为 CityUniversities 的表中。现在我想编写一个触发器，当从 Universities 中删除一所大学时，它会删除表 Cities 和 Universities 之间的所有关系。但是它不起作用。尝试删除大学时，我总是收到以下错误消息：

“消息 547，级别 16，状态 0，第 2 行 DELETE 语句与 REFERENCE 约束“FK_CityUniversities_Universities”冲突。冲突发生在数据库“Alumni_Dev”、表“dbo.CityUniversities”、列“UniversityId”中。语句已终止。”

这就是我已经实现并成功执行的触发器（对于表 Universities）：

```
USE [Alumni_Dev]
GO
/****** Object:  Trigger [dbo].[deleteUni]    Script Date: 05/02/2012 11:42:43 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER TRIGGER [dbo].[deleteUni]
ON  [dbo].[Universities] 
FOR DELETE
AS 
DECLARE @UniId int
SELECT @UniId = (SELECT UniversityId FROM deleted)
BEGIN
--Remove constraints
DELETE FROM dbo.CityUniversities WHERE UniversityId = @UniId;
END 
```

我已经将我的解决方案与几个参考文献进行了比较，但是我找不到任何可能出错的地方。可能是其中一个受影响的表中有任何错误的设置吗？

我很乐意听到任何建议。

* * *

我终于用以下触发器解决了我的问题（感谢 Nikola）：

```
ALTER TRIGGER [dbo].[deleteUni]
ON  [dbo].[Universities] 
INSTEAD OF DELETE
AS 
DECLARE @UniId int
SELECT @UniId = UniversityId FROM deleted
BEGIN
--Remove constraints
DELETE FROM dbo.CityUniversities WHERE UniversityId = @UniId;
DELETE FROM dbo.Universities WHERE UniversityId = @UniId;
END 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T10:03:52.843

触发器不能用于从其他表中删除孤立记录，因为在执行触发器之前会检查约束。您应该改为设置[ON DELETE CASCADE](http://msdn.microsoft.com/en-us/library/aa933119%28v=sql.80%29.aspx)。

如果您想在删除之前执行一些检查，您也可以使用[INSTEAD OF](http://msdn.microsoft.com/en-us/library/aa175158%28v=sql.80%29.aspx)触发器，但不要忘记`delete Universities where ...`在触发器末尾添加以实际删除记录。

关于触发器的两点：

*   在触发器主体的开头添加[SET NOCOUNT ON](http://msdn.microsoft.com/en-us/library/aa259204%28v=sql.80%29.aspx)以避免触发器内部的 sql 语句更改调用代码时可能需要的“受影响的行”的值，
*   不要将已删除和插入的表视为仅包含一条记录。当您尝试删除两所大学时，会有令人讨厌的惊喜。您应该加入使用已删除或插入表的表，将它们用作过滤器，或者使用存在：

    ```
    delete dbo.CityUniversities
      from dbo.CityUniversities
     inner join deleted
        on dbo.CityUniversities.UniversityId = deleted.UniversityId 
    ```

或者

```
delete dbo.CityUniversities
 where exists (select null
                 from deleted
                where deleted.UniversityId =dbo.CityUniversities.UniversityId) 
```

哦，还有

```
SELECT @UniId = (SELECT UniversityId FROM deleted) 
```

相当于：

```
SELECT @UniId = UniversityId FROM deleted 
```

# umbraco - 在 Umbraco:item 中输出条件字段

> ID：10411491
> 
> 赞同：1
> 
> 时间：2012-05-02T09:58:28.207
> 
> 标签：umbraco

在 Umbraco 中输出一个字段非常简单：

```
<umbraco:Item runat="server" field="introduction"> 
```

假设我目前正在渲染一篇带有“介绍”属性的文章。如果文章介绍字段为空，我想在主站点节点上输出一个更全局的字段，我们称之为“global_introduction”。

有人知道怎么做这个吗？

我知道 optional 属性`xslt`，但不知道它是否足够......或者究竟如何去做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:53:20.577

您可以设置 recursive="true"，并保持变量名称相同。然后，当umbraco 没有找到该值时，它会默认为父节点值。

```
<umbraco:Item runat="server" field="introduction" recursive="true"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T22:37:20.120

```
<umbraco:item field="bodyText" useIfEmpty="altText" runat="server"/> 
```

# java - sendRedirect 不重定向

> ID：10411492
> 
> 赞同：0
> 
> 时间：2012-05-02T09:58:28.253
> 
> 标签：java, servlets

我正在尝试创建一个 Java 控制器 servlet 以使用户退出会话。我知道有两种方法，一种是使用 sendRedirect，另一种是 RequestDispatcher。就我而言，我想将它们发送到域外的页面，这（据我有限的 Java 知识）需要我使用 sendRedirect。

但是，我收到错误 302 并且页面没有被重定向。我尝试了一个教程版本并且它可以工作，但是当我在我的 Servlet 中实现它时，它会返回错误并且不会重定向。

我希望有人能指出我正确的方向。

我正在使用的代码如下。我正在使用 netbeans 模板：

* * *

```
 protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try {
        HttpSession session = request.getSession(false);
        if (session == null) {
            System.out.println("Invalid");
            response.sendRedirect("http://www.google.com");
            return;
        } else {
            System.out.println("Invalidated");

            session.invalidate();
            response.sendRedirect("http://www.google.com");
            return;
            /*
            String url = "/logout.jsp";

            ServletContext sc = getServletContext();
            RequestDispatcher rd = sc.getRequestDispatcher(url);
            rd.include(request, response);

             */
        }
        /* TODO output your page here
        out.println("<html>");
        out.println("<head>");
        out.println("<title>Servlet LogOut</title>");  
        out.println("</head>");
        out.println("<body>");
        out.println("<h1>Servlet LogOut at " + request.getContextPath () + "</h1>");
        out.println("</body>");
        out.println("</html>");
         */
    } finally {            
        out.close();
    }
} 
```

* * *

编辑：我通过`<a href>`标签调用 servlet。Servlet 名称是 LogOut.java。

```
 <div data-role="header" data-position="fixed">
            <h1>Menu</h1>
            <a href="LogOut" data-theme="i">Log Out</a>
        </div> 
```

doGet 和doPost 调用processRequest。

```
 @Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    processRequest(request, response);
}

/** 
 * Handles the HTTP <code>POST</code> method.
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    processRequest(request, response);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:16:12.647

响应的标准重定向是应用程序中的参考。为了解决这个问题，我创建了一个简单的 HTML 页面，其中元数据刷新到外部页面： [http](http://www.w3schools.com/tags/tag_meta.asp)
://www.w3schools.com/tags/tag_meta.asp 示例：
`<meta HTTP-EQUIV="refresh" CONTENT="2; URL=http://www.google.be;">`

如果自动转发失败，请确保使用简单的超链接来访问外部页面。

经过测试，来自 Servlet 的响应被重定向到我自己的转发页面，瞧……

# iphone - 从内部应用程序打开 GeoRiot 附属链接？

> ID：10411498
> 
> 赞同：1
> 
> 时间：2012-05-02T09:58:38.287
> 
> 标签：iphone, hyperlink, affiliate

我在我的应用程序中使用 Linkshare 链接已经有一段时间了。它工作正常。我实施了 Apple 的建议以吸收任何重定向并调用最后一个 URL。

对于那些寻找它的人来说，[这里就是](https://developer.apple.com/library/ios/#qa/qa1629/_index.html)。

我有一个 UIButton 链接到一个调用它的方法：

```
[self openReferralURL:[NSURL URLWithString:link]]; 
```

其中链接是具有以下值的 NSString（我的 Linkshare 链接）

> @"http://click.linksynergy.com/fs-bin/stat?id=Jexmk6JU*OU&offerid=146261&type=3&subid=0&tmpid=1826&RD_PARM1=http%253A%252F%252Fitunes.apple.com%252FWebObjects%252FMZStore.woa% 252Fwa%252FviewSoftware%253Fid%253D353970672%2526partnerId%253D30"

这工作正常。当我点击按钮时，它会立即启动 App Store 应用程序，而无需先打开 Safari。

但是当我将链接更改为下面的 GeoRiot 链接时，它会先打开 Safari，然后只打开 App Store。我想不出它这样做的任何原因。

> @"http://target.georiot.com/Proxy.ashx?grid=5700&id=Jexmk6JU*OU&offerid=146261&type=3&subid=0&tmpid=1826&RD_PARM1=http%253A%252F%252Fitunes.apple.com%252FWebObjects%252FMZStore.woa% 252Fwa%252FviewSoftware%253Fid%253D353970672%2526partnerId%253D30"

任何人都可以帮忙吗？您可以分享您的地理目标链接以与我的比较吗？无论如何，我有 1 个 UIWebview 可以打开一个带有 Geotarget 链接的网页，并且工作正常（即直接打开 App Store 应用程序）。

我现在想不通。我认为问题可能出在 GeoRiot 链接上，但我不知道为什么或应该做什么，因为使用 Linkshare 链接它可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T02:48:00.407

这些天我一直在问问题并回答了很多问题，但是对于 Andrea，这里是：

对于那些使用 georiot 链接的人，这些方法/函数将代替 Apple 示例代码运行良好。

```
// Process a URL to something iPhone can handle
- (void)openReferralURL:(NSURL *)referralURL
{
    NSURLRequest *theRequest=[NSURLRequest requestWithURL:referralURL cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:30.0];
    NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
    [conn release];
}

// Save the most recent URL in case multiple redirects occur
// "iTunesURL" is an NSURL property in your class declaration
- (NSURLRequest *)connection:(NSURLConnection *)connection willSendRequest:(NSURLRequest *)request redirectResponse:(NSURLResponse *)response
{

    if (response) {
        NSMutableURLRequest *r = [[request mutableCopy] autorelease]; // original request
        [r setURL: [request URL]];

        self.iTunesURL = [r URL];

        if ([self.iTunesURL.host hasSuffix:@"itunes.apple.com"]) {

            [[UIApplication sharedApplication] openURL:self.iTunesURL];

        }

        return r;
    } else {
        return request;
    }

} 
```

要使用，只需调用：

```
[self openReferralURL:[NSURL URLWithString:@"http://target.georiot.com/Proxy.ashx?grid=5700&id=Jexmk6JU*OU&offerid=146261&type=3&subid=0&tmpid=1826&RD_PARM1=http%253A%252F%252Fitunes.apple.com%252Fus%252Fapp%252Fiquiksplash-pro-all-in-one%252Fid378458261%253FpartnerId%253D30"]]; 
```

可能您还应该使用 URL 缩短工具来清理长 URL 混乱，但无论哪种方式都可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:03:46.360

你发现itunes url 没问题。

您有[http://itunes.apple.com](http://itunes.apple.com)地址，那么 ssl 重定向问题呢？因为 iTunes 门户会重定向您[https://itunes.apple.com](https://itunes.apple.com)地址。我还改进了您`if`的 iTunes 检查部分的分支。

```
// 处理 iPhone 可以处理的 URL
 - (void)openReferralURL:(NSURL *)referralURL
 {
    NSURLRequest *theRequest=[NSURLRequest requestWithURL:referralURL
                                              cachePolicy:NSURLRequestUseProtocolCachePolicy
                                          超时间隔：30.0]；

    NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
    [conn发布]；
 }

 // 保存最新的 URL，以防发生多次重定向
 // "iTunesURL" 是你的类声明中的一个 NSURL 属性
 - (NSURLRequest *)connection:(NSURLConnection *)connection willSendRequest:(NSURLRequest *)request redirectResponse:(NSURLResponse *)response
 {
    如果（响应）{
        NSMutableURLRequest *r = [[请求 mutableCopy] autorelease]; // 原始请求
        [r setURL: [请求 URL]];

        NSURL *iTunesUrl = [r URL];
        NSLog(@"处理附属链接：%@", iTunesUrl);
        if ([[iTunesUrl absoluteString] hasPrefix:@"https"] && [iTunesUrl.host hasSuffix:@"itunes.apple.com"]) {
            [[UIApplication sharedApplication] openURL:iTunesUrl];
        }        
        返回 r;
    } 别的 {
        退货请求；
    }
 }

```

# asp.net-web-api - 缺少 AspNet WebApi System.Web.Http.SelfHost 命名空间？

> ID：10411499
> 
> 赞同：3
> 
> 时间：2012-05-02T09:58:39.643
> 
> 标签：asp.net-web-api

我已将 AspNetWebApi 添加到我的项目中，但想使用 SelfHost 功能进行一些集成测试。但是，我注意到 System.Web.Http.SelfHost 命名空间在任何地方都不存在。

有什么我忽略的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T12:39:45.837

它位于单独的 nuget [http://nuget.org/packages/AspNetWebApi.SelfHost](http://nuget.org/packages/AspNetWebApi.SelfHost)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-12T16:23:03.497

如果您确实喜欢 jaffa - 尝试首先安装 webapi 的包并最终来到这里，并尝试了 Darrel 的答案 - 并在安装包时偶然发现了一些版本冲突（webapi 的当前版本> 5，而 SelfHost 需要 WebHost 4） - 就像我一样- 然后为了让它工作，我不得不卸载 webapi 的一些组件（因为简单地完全卸载它然后安装 SelfHost 没有工作）。

这是我必须删除才能最终安装 SelfHost 的那些。

*   **卸载包 Microsoft.AspNet.WebApi.WebHost**
*   **卸载包 Microsoft.AspNet.WebApi.Core**
*   **卸载包 Microsoft.AspNet.WebApi.Client**

# jquery - 如何根据元素的状态更改文本颜色（焦点、选定、悬停）

> ID：10411503
> 
> 赞同：0
> 
> 时间：2012-05-02T09:58:52.080
> 
> 标签：jquery, colors, focus, hover, selected

我想在一个输入元素被聚焦后改变它的颜色，原来的颜色是灰色，当我悬停它变成蓝色，和我聚焦时一样，蓝色，在我检查表单是否有效之后，当会有没有写电子邮件，有一个 jquery 函数会将背景颜色更改为红色并将颜色更改为白色并将值更改为一些警报消息，但是当用户再次单击输入时，该背景颜色将返回为白色，我希望颜色恢复正常，灰色 - 蓝色（悬停，选中或聚焦）

```
$("#email").focus ( function() { if(document.getElementById('email').style.backgroundColor=="Crimson") { $("#email").css("background-color","white");
                                            $("#email").css("color","grey");
                                                $("#email").css("font-weight","normal");
                                                $("#email").val(""); }}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:27:34.863

`css('background-color')`返回格式中的颜色`rgb(r, g, b)`，因此如果您将其设置为，`Crimson`则此代码应该可以解决您的问题。

```
$("#email").focus(function() {
    if ($('#email').css('background-color') == "rgb(220, 20, 60)") {
        $("#email").css("background-color", "white");
        $("#email").css("color", "grey");
        $("#email").css("font-weight", "normal");
        $("#email").val("");
    }
}); 
```

# ant - 如何重命名文件集中路径的一部分

> ID：10411508
> 
> 赞同：1
> 
> 时间：2012-05-02T09:59:07.313
> 
> 标签：ant

我有一个文件集，我想重命名路径的一部分：

例如：

```
From
c:\projects\a\dir\subdir\file1.txt
To
c:\projects\b\dir2\subdir\file1.txt 
```

在这种情况下，我想将“a\dir”重命名为“b\dir2”。

为什么我需要这个？我有两个项目目录：a 和 b。我想删除 b 中存在的所有文件（使用 ant）。带有文件的示例 2：

```
c:\projects\a\dir\file1.txt
c:\projects\a\dir\subdir\file2.txt

c:\projects\b\dir\file1.txt
c:\projects\b\dir\subdir\file2.txt
c:\projects\b\dir\file3.txt 
```

在这种情况下，我想从项目 b 中删除 file1.txt 和 subdir/file2.txt（因为项目 a 中只存在这两个）。

获取文件集很容易：

```
<path id="filesInProjectA">
    <fileset dir="c:\projects\a" includes="**/*.*" />
</path> 
```

我尝试使用`<pathconvert.../>`，但它对我不起作用......

谢谢：安德拉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:06:36.943

```
<pathconvert property="filePaths" refid="filesInProjectA" pathsep=";">
    <map from="c:\projects\a\dir\" to="c:\projects\a\dir2\" />
</pathconvert> 
```

这应该有效。这会将所有转换后的路径放入属性 filePaths 中，以“;”分隔。虽然用什么符号分隔路径并不重要，但重要的是要知道它是什么符号，这就是为什么应该指定它的原因。

之后，您可以使用它对每个转换后的路径执行操作：

```
<foreach list="${filePaths}" delimiter=";" target="target-for-each-path" param="path" /> 
```

# facebook - 我们如何知道 Facebook 图形 api 字段的 JSON 结构

> ID：10411511
> 
> 赞同：1
> 
> 时间：2012-05-02T09:59:22.497
> 
> 标签：facebook, facebook-graph-api

如果我使用 Graph API 为特定字段请求 JSON 字符串，如何提前知道 JSON 字符串的结构？如果我想请求类似“user_interests”的字段怎么办 - 我如何知道它在 JSON 中的结构？

可以先在屏幕上打印出来，但我不知道我朋友列表中谁首先添加了该字段的信息。

谢谢阿布舍克 S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:16:58.790

也许最简单的方法是使用[Graph Explorer](https://developers.facebook.com/tools/explorer)进行查询并查看响应。Graph Explorer 还允许您切换权限。它也可以与 FQL 调用一起使用，如下所示（使用一个简单的示例）：

```
graph.facebook.com/fql?q=SELECT name, uid FROM user WHERE uid=me() 
```

您可能还会发现[FBDevWiki](http://fbdevwiki.com/wiki/Main_Page)很有用。它概述了每个 Graph 对象和 FQL 表的返回值。例如，查看[用户](http://fbdevwiki.com/wiki/Graph%3aUser)Graph 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:15:21.087

如果您使用的语言是 Java，我强烈建议您使用帮助您*“包装”* facebook Graph API 的库。就我个人而言，我现在正在使用[REST FB](http://restfb.com/)，它是一个很好的库，除了一些边缘缺失的功能（比如可以轻松创建模拟测试的可能性）。

使用像这样的库的主要优点之一是您不必手动解析 facebook JSON 响应，但它已经封装在 java 对象中（然后您只需以经典的 java bean 方式访问字段，例如：myPost .getMessage())。

查看文档以获取更具体的示例，我认为这正是您正在寻找的。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-02T14:52:12.620

我认为这是关于 JSON 而不是 facebook 的问题。取决于您使用的编程语言，您需要检查从根到子部分的 JSON 中存在哪些字段/键。

例如在 iOS(iphone) 中，json 被转换为 NSArray/NSDictionary 并且我检查键/字段是否存在（不为零）。

这是关于您的问题“我如何知道它在 JSON 中的结构？”

# android - 在计算机上显示 Android 4.0 设备的屏幕

> ID：10411513
> 
> 赞同：3
> 
> 时间：2012-05-02T09:59:42.470
> 
> 标签：android, screen-capture, vnc, vnc-server

我很快就要做一个演示文稿，为此，我需要同时向 10 个人展示该应用程序。为此，我想在计算机上显示我的 Android 4.0 手机 (Galaxy Nexus) 的屏幕，并实时显示所有这些！

为此，我尝试了 droid vnc beta - 它是一个测试版，所以它不起作用......它只在我的电脑上显示了一个黑色画面。

有没有其他方法可以在我的电脑上显示我的设备屏幕。顺便说一句，我使用的是win7。

感谢您提前提供帮助！

此致

苹果浏览器

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T10:02:36.820

You might want to try Android Screencast. It works perfectly for me, other than the lack of frame rate. The link is [here](http://code.google.com/p/androidscreencast/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T10:11:01.707

Galaxy Nexus 支持 HDMI 输出。您可以将其直接插入显示器/投影仪。如果你也需要，你可以得到 HDMI > DVI 转换器。HDMI转换器电缆可以在亚马逊等网上购买，像[这样](https://rads.stackoverflow.com/amzn/click/com/B0063J9F6C)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T17:25:57.967

试试这个应用程序：

VMLite VNC Server，在非root设备上运行良好，您可以连接多个VNC查看器，或使用html显示屏幕。

[https://play.google.com/store/apps/details?id=com.vmlite.vncserver&hl=en](https://play.google.com/store/apps/details?id=com.vmlite.vncserver&hl=en)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-02T10:03:15.137

Please try [Android Screenshots, Screen Capture, Screen Cast](http://www.mightypocket.com/2010/08/android-screenshots-screen-capture-screen-cast/)

In such a way it can be used for full screen presentations, automatic screen capture, and screenshot transformations such as scaling and rotating.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-08T10:46:34.467

如果您希望通过 wifi 对其进行筛选，并且它是 Nexus 4 等新手机，您可以使用它的[Miracast 支持](http://en.wikipedia.org/wiki/Miracast)。

这里有一个关于它是如何完成的 youtube 视频的链接：

[http://www.youtube.com/watch?v=DwvYrv2s9Kk](http://www.youtube.com/watch?v=DwvYrv2s9Kk)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T10:07:43.287

这取决于你想展示什么。如果是您自己开发的应用程序，您可以使用 Android SDK 在虚拟设备中直接显示您计算机上的应用程序。它具有显示代表您手指的光标的优点。如果是出于其他目的，请参阅其他答案。（ScreenCast 对我有用）

# c++ - 如何使用智能指针？

> ID：10411514
> 
> 赞同：0
> 
> 时间：2012-05-02T09:59:43.840
> 
> 标签：c++

在下面的示例中，我使用指向类`mySession`中结构的指针，并通过手动分配和解除分配内存来填充和使用两种不同的方法。仅仅通过使用智能指针，怎么可能做和我在这里做的一样的事情呢？我根本不知道如何使用智能指针。请通过更改使用智能指针的代码来显示它。谢谢你。`OpenStackSession``OpenStack`

请注意：我必须在不使用命名空间 std 和库字符串的情况下执行此操作。我不知道它对智能指针是否重要，但我认为值得告知。

```
#include <string.h>
#include <stdio.h>
#include <stdlib.h>

struct OpenStackSession
{
    int limit;
    char prefix[256];
    char marker[256];
    char delimiter[256];
    char format[256];
    char path[256];
};

class OpenStack
{

public:
    OpenStackSession* mySession;
    void requestbegin(const char*);
    void requestpayload();
};

void OpenStack::requestbegin(const char* url)
{
    mySession=new OpenStackSession();
    char urlCopy[2000];
    strcpy(urlCopy,url);
    urlCopy[strlen(url)]='\0';
    char* questionMarkPointer=strchr(urlCopy,'?');
    int questionMarkPosition=questionMarkPointer-urlCopy;
    char query[2000];
    strncpy(query,urlCopy+questionMarkPosition+1,strlen(urlCopy)-questionMarkPosition-1);
    query[strlen(urlCopy)-questionMarkPosition-1]='\0';
    int lenForEqSign=0;
    int plusAndSignPosition=0;
    int andSignPosition=0;
    bool check=true;
    while(check == true)
    {

        char* equalSignPointer=strchr(query+plusAndSignPosition,'=');
        int lenForEqSign=equalSignPointer-query;
        char* andSignPointer=strchr(query+plusAndSignPosition,'&');
        if(andSignPointer!=NULL)
        {
            andSignPosition=andSignPointer-query;
        }
        else
        {
            andSignPosition = strlen(query);
            check=false;
        }
        if(strncmp(query+plusAndSignPosition,"limit",5) == 0)
        {
            char temp[256];
            strncpy(temp,query+lenForEqSign+1,andSignPosition-lenForEqSign-1);
            temp[andSignPosition-lenForEqSign-1]='\0';
            mySession->limit=atoi(temp);
        }
        else if(strncmp(query+plusAndSignPosition,"prefix",6) == 0)
        {
            strncpy(mySession->prefix,query+lenForEqSign+1,andSignPosition-lenForEqSign-1);
            mySession->prefix[andSignPosition-lenForEqSign-1]='\0';
        }
        else if(strncmp(query+plusAndSignPosition,"marker",6) == 0)
        {

            strncpy(mySession->marker,query+lenForEqSign+1,andSignPosition-lenForEqSign-1);
            mySession->marker[andSignPosition-lenForEqSign-1]='\0';
        }
        else if(strncmp(query+plusAndSignPosition,"delimiter",9) == 0)
        {

            strncpy(mySession->delimiter,query+lenForEqSign+1,andSignPosition-lenForEqSign-1);
            mySession->delimiter[andSignPosition-lenForEqSign-1]='\0';
        }
        else if(strncmp(query+plusAndSignPosition,"path",4) == 0)
        {
            strncpy(mySession->path,query+lenForEqSign+1,andSignPosition-lenForEqSign-1);
            mySession->path[andSignPosition-lenForEqSign-1]='\0';   

        }
        else if(strncmp(query+plusAndSignPosition,"format",6) == 0)
        {
            strncpy(mySession->format,query+lenForEqSign+1,andSignPosition-lenForEqSign-1);
            mySession->format[andSignPosition-lenForEqSign-1]='\0'; 

        }
        plusAndSignPosition=andSignPosition+1;  
    }
}

void OpenStack::requestpayload()
{
    printf("Limit %d\n",mySession->limit);
    printf("Prefix %s\n",mySession->prefix);
    printf("Marker %s\n",mySession->marker);
    printf("Delimiter %s\n",mySession->delimiter);
    printf("Path %s\n",mySession->path);
    printf("Format %s\n",mySession->format);
    delete mySession;
}

void main()
{
    const char* url="/v1/AUTH_abb52a71-fc76-489b-b56b-732b66bf50b1/images/a/plusAndSignPosition/c/andSignPosition/e?limit=100000&prefix=this-is-prefixdelimiter&marker={}marker&path=/temp/path/marko/it&delimiter=/delimiter&format=xmlformat"  ;
    OpenStack open;
    open.requestbegin(url);
    open.requestpayload();
} 
```

# linq - Expression.Property 的第二个参数可以动态化吗？

> ID：10411515
> 
> 赞同：1
> 
> 时间：2012-05-02T09:59:46.210
> 
> 标签：linq, tree, expression

我正在开发一个规则引擎，我们将 xml 转换为在运行时编译的代码。为此，我们希望访问对象/集合中的属性，该属性不能作为字符串使用，而是作为表达式使用。

一个简化的示例 - 具有属性 Age 的 Student 类

```
Expression stud = Expression.Variable(typeof(Student), "student");
Expression.Property(stud, Expression.Constant("Age")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T03:58:09.810

不应该是这样的：

```
// represents a variable student
var studentExpression = Expression.Variable(typeof(Student), "student");

// represents student.Age
var studenDotAgeExpression = Expression.Property(studentExpression, typeof(Student).GetProperty("Age")); 
```

# deployment - waihost 在部署时崩溃

> ID：10411516
> 
> 赞同：0
> 
> 时间：2012-05-02T09:59:53.527
> 
> 标签：deployment, azure, servicebus

我已经建立了一个应该在本地运行我的天蓝色项目的环境。

它从一个简单的批处理文件开始：

```
E:
cd "E:\Procurement\Source\Procurement\trunk\Azure_Procurement\Azure_Procurement"
MSBuild.exe Azure_Procurement.ccproj /p:PackageForComputeEmulator=true /p:PackageWebRole=False
MSBuild.exe Azure_Procurement.ccproj /t:Publish
"C:\Program Files\Windows Azure Emulator\emulator\CSRun.exe" "E:\Procurement\Source\Procurement\trunk\Azure_Procurement\Azure_Procurement\csx\Release" "E:\Procurement\Source\Procurement\trunk\Azure_Procurement\Azure_Procurement\bin\Release\ServiceConfiguration.cscfg" 
```

当我运行这个文件时，我的项目被编译并部署到 iis。但是，几秒钟后，模拟主机崩溃了，我设法获得了以下信息：

```
Problem signature:
  Problem Event Name:   CLR20r3
  Problem Signature 01: waiishost.exe
  Problem Signature 02: 1.6.0.0
  Problem Signature 03: 4eb3102e
  Problem Signature 04: System.ServiceModel
  Problem Signature 05: 4.0.0.0
  Problem Signature 06: 4d930801
  Problem Signature 07: 573e
  Problem Signature 08: 1bd
  Problem Signature 09: KFM023AO4DTNWT0EKMSKUWE5BRORH3FC
  OS Version:   6.1.7601.2.1.0.272.7
  Locale ID:    1053
  Additional Information 1: af3a
  Additional Information 2: af3a02be113369c664147fe8f0201429
  Additional Information 3: 9edf
  Additional Information 4: 9edf9a509c5231db61e45a805b3d35ff 
```

异常消息：方法失败，出现意外错误代码 3。

```
Stack Trace:
   at System.Security.AccessControl.NativeObjectSecurity.CreateInternal(ResourceType resourceType, Boolean isContainer, String name, SafeHandle handle, AccessControlSections includeSections, Boolean createByName, ExceptionFromErrorCode exceptionFromErrorCode, Object exceptionContext)
   at System.Security.AccessControl.DirectorySecurity..ctor(String name, AccessControlSections includeSections)
   at System.IO.DirectoryInfo.GetAccessControl(AccessControlSections includeSections)
   at Microsoft.WindowsAzure.ServiceRuntime.IISConfigurator.FileManager.AddAllowAceIterative(DirectoryInfo dir, FileSystemRights rights, IdentityReference[] accounts)
   at Microsoft.WindowsAzure.ServiceRuntime.IISConfigurator.FileManager.AddAllowAce(DirectoryInfo dir, FileSystemRights rights, Boolean inherit, IdentityReference[] accounts)
   at Microsoft.WindowsAzure.ServiceRuntime.IISConfigurator.Security.AddAppPoolSidAceToVdir(String appPoolName, String sitePath, String appPoolSid)
   at Microsoft.WindowsAzure.ServiceRuntime.IISConfigurator.IISConfigurator.Deploy(String roleId, WebAppModel appModel, String roleRootDirectory, String sitesDestinationDirectory, String diagnosticsRootFolder, String roleGuid, Dictionary`2 globalEnvironment)
   at SyncInvokeDeploy(Object , Object[] , Object[] )
   at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]& outputs)
   at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet) 
```

该项目在我使用 Visual Studio 调试时运行，甚至在我在另一台服务器上运行相同的批处理脚本时也可以运行。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:52:36.773

我找到了解决方案！

该错误是由尝试通过 azure 诊断激活 WCF-Tracing 引起的。正如在堆栈跟踪中看到的那样，“System.ServiceModel”（对于任何不知道它是 WCF 的一部分的人）出现了问题，这是由我的 web.config 中的错误引起的。最重要的是，我还忘记了我的脚本指向使用“Release”-buildconfiguration 编译的构建，而我实际上是使用“Debug”配置编译的。

# c# - 将网格视图导出到 excel 并将 excel 文件保存到文件夹

> ID：10411520
> 
> 赞同：5
> 
> 时间：2012-05-02T10:00:17.787
> 
> 标签：c#, asp.net

我想保存导出网格视图数据的excel文件。我已经编写了将 gridview 数据导出到 excel 的代码，但我不知道如何保存导出的文件。

以下是将 gridview 导出到 excel 的代码：

```
Response.Clear();
Response.Buffer = true;
Response.ContentType = "application/vnd.ms-excel";
Response.AddHeader("content-disposition", "attachment;filename=MyFiles.xls");
Response.Charset = "";
this.EnableViewState = false;
System.IO.StringWriter sw = new System.IO.StringWriter();
System.Web.UI.HtmlTextWriter htw = new System.Web.UI.HtmlTextWriter(sw);
gvFiles.RenderControl(htw);
Response.Write(sw.ToString());
Response.End(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T11:11:07.157

你可以这样做：

```
private void ExportGridView()
{
    System.IO.StringWriter sw = new System.IO.StringWriter();
    System.Web.UI.HtmlTextWriter htw = new System.Web.UI.HtmlTextWriter(sw);

    // Render grid view control.
    gvFiles.RenderControl(htw);

    // Write the rendered content to a file.
    string renderedGridView = sw.ToString();
    System.IO.File.WriteAllText(@"C:\Path\On\Server\ExportedFile.xlsx", renderedGridView);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T18:34:40.710

这可能会帮助你//

```
protected void exporttoexcel_Click(object sender, EventArgs e)
{
    Response.Clear();

    Response.AddHeader("content-disposition", "attachment;filename=" attachment" + ".xls");

    Response.Charset = "";

    // If you want the option to open the Excel file without saving than

    // comment out the line below

    // Response.Cache.SetCacheability(HttpCacheability.NoCache);

    Response.ContentType = "application/vnd.xls";

    System.IO.StringWriter stringWrite = new System.IO.StringWriter();

    System.Web.UI.HtmlTextWriter htmlWrite =
    new HtmlTextWriter(stringWrite);

    GridView1.RenderControl(htmlWrite);

    Response.Write(stringWrite.ToString());

    Response.End();

}
public override void VerifyRenderingInServerForm(Control control)
{

    // Confirms that an HtmlForm control is rendered for the
    //specified ASP.NET server control at run time.

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T06:43:08.970

```
public partial class exportgridtoexcel : System.Web.UI.Page
{
    SqlConnection con=new SqlConnection(ConfigurationManager.ConnectionStrings["dbconnection"].ConnectionString.ToString());
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            GetData();
        }
    }
    public void GetData()
    {
        SqlDataAdapter sda = new SqlDataAdapter("select * from EmpData", con);
        DataTable dt = new DataTable();
        sda.Fill(dt);
        GridView1.DataSource = dt;
        GridView1.DataBind();
    }

    protected void btnDownload_Click(object sender, EventArgs e)
    {
        GetData();
        exporttoexcel("Report.xls", GridView1);
        GridView1 = null;
        GridView1.Dispose();

    }
    public void exporttoexcel(string filename,GridView gv)
    {
        Response.ClearContent();
        Response.AddHeader("content-disposition", "attachment;filename=" + filename);
        Response.ContentType = "applicatio/excel";
        StringWriter sw = new StringWriter(); ;
        HtmlTextWriter htm=new HtmlTextWriter(sw);
        gv.RenderControl(htm);
        Response.Write(sw.ToString());
        Response.End();
    }
    public override void VerifyRenderingInServerForm(Control control)
    {

    }
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T15:19:54.490

跟随链接：[C# Excel 文件 OLEDB 读取 HTML IMPORT](https://stackoverflow.com/questions/1238473/c-sharp-excel-file-oledb-read-html-import/11867494#11867494)

使用`Extended Properties=\"HTML Import;HDR=No;IMEX=1 the select * from [tablename]`, 表名是从 中返回的`GetOleDbSchemaTable`。

注意：这不会加载正常的 excel。对于该用途`Extended Properties=\"Excel 8.0;HDR=No;IMEX=1\`，表名将带有`$`符号。

检查示例代码： [使用 File.WriteAllText() 函数创建后无法读取 excel 文件](https://stackoverflow.com/questions/2920342/cant-read-excel-file-after-creating-it-using-file-writealltext-function/11867731#11867731)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T10:40:14.470

您在询问如何保存导出的文件...您的代码将呈现的 gridview (HTML) 内容放入响应中。在这种情况下，您的浏览器（客户端）将收到此响应并弹出一个对话框询问保存位置。因此，您的**浏览器**将为您保存文件。

如果要将其保存在服务器端，则不得将呈现的 gridview 放入响应中。而是将其写入本地硬盘上的文件（如上面的答案所示）。

请记住，在您自己的开发机器以外的环境（即生产环境）中，ASP.NET 工作进程可能没有足够的访问权限来写入硬盘上的指定位置。以下是解决该问题的几个答案：

[ASP.net 用户帐户权限](https://serverfault.com/questions/83194/asp-net-user-account-permissions-in-iis-7-on-windows-2008-server)
[ASP.NET + 对路径的访问被拒绝](https://stackoverflow.com/questions/1219440/asp-net-access-to-the-path-is-denied)
[System.UnauthorizedAccessException: 对路径的访问被拒绝](https://stackoverflow.com/questions/1898939/system-unauthorizedaccessexception-access-to-the-path-is-denied)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-27T06:59:23.257

这个问题的另一种解决方案在这里解决： http: [//codentq.wordpress.com/2014/02/13/write-excel-file-from-dataset/](http://codentq.wordpress.com/2014/02/13/write-excel-file-from-dataset/)

您必须通过本文中提到的方法获取数据集中的网格视图数据：http: [//codentq.wordpress.com/2014/02/13/get-data-from-grid-to-datatable-or-dataset/](http://codentq.wordpress.com/2014/02/13/get-data-from-grid-to-datatable-or-dataset/)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-06-25T19:36:55.797

首先将 EPPLUS 参考库添加到应用程序中，并使用 OfficeOpenXml 添加；

//业务对象类

类 bocls {

```
 string name;

    public string NAME
    {
        get { return name; }
        set { name = value; }
    }
    string id;

    public string ID
    {
        get { return id; }
        set { id = value; }
    }

    public bocls() { }
    public bocls(string name, string id)
    {
        this.name = name;
        this.id = id;         

    } 
```

//在导出按钮点击事件中

受保护的无效lbtnExport_Click（对象发送者，EventArgs e）{

```
 List<bocls> list6 =  new List<bocls>();
           //copy the grid view values into list
            list6 = (from row in dataGridView1.Rows.Cast<DataGridViewRow>()
            from cell in row.Cells.Cast<DataGridViewCell>()
            select new 
            {
                //project into your new class from the row and cell vars.
            }).ToList();
    }
            ExcelPackage excel = new ExcelPackage();
            var workSheet = excel.Workbook.Worksheets.Add("Products");
            var totalCols = GridView1.Rows[0].Cells.Count;
            var totalRows = GridView1.Rows.Count;
            var headerRow = GridView1.HeaderRow;
            for (var i = 1; i <= totalCols; i++)
            {
                workSheet.Cells[1, i].Value = headerRow.Cells[i - 1].Text;
            }
            for (var j = 1; j <= totalRows; j++)
            {
                for (var i = 1; i <= totalCols; i++)
                {
                    var item = list6.ElementAt(j - 1);

                    workSheet.Column(1).Width = 13;
                    workSheet.Column(2).Width = 10;

                    workSheet.Cells[j + 1, i].Style.WrapText = true;

                    if (headerRow.Cells[i - 1].Text == "ID")
                        workSheet.Cells[j + 1, i].Value = item.GetType().GetProperty("id").GetValue(item, null);
                    else if (headerRow.Cells[i - 1].Text == "NAME")
                        workSheet.Cells[j + 1, i].Value = item.GetType().GetProperty("name").GetValue(item, null);

                    workSheet.Cells[j + 1, i].Value = workSheet.Cells[j + 1, i].Value.ToString().Replace("<br/>", "");
                }
            }
            using (var memoryStream = new MemoryStream())
            {

                Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
                string filename = Guid.NewGuid().ToString() + ".xlsx";
                Response.AddHeader("content-disposition", "attachment;  filename=" + filename);
                excel.SaveAs(memoryStream);   
                //add your destination folder
                FileStream fileStream = new FileStream(@"C:\Users\karthi\Downloads\New folder\" + filename, FileMode.Create,FileAccess.Write,FileShare.Write);
                memoryStream.WriteTo(fileStream);
                fileStream.Close();
                memoryStream.WriteTo(Response.OutputStream);
                memoryStream.Close();
                memoryStream.WriteTo(Response.OutputStream);
                Response.Flush();
                Response.End();
            }

    } 
```

# .net - 更改 ValidationSummary 中的字段名

> ID：10411523
> 
> 赞同：3
> 
> 时间：2012-05-02T10:00:23.870
> 
> 标签：.net, silverlight

我有非常直接的输入表单，它有一些验证。我正在使用 INotifyDataErrorInfo 接口来处理验证。

在表单上，​​我有一个绑定外键（例如 ParentID）的组合框。

如果验证为假（用户应从列表中选择一个项目），验证摘要将消息显示为：

**ParentID**请选择父母。

这有点丑。我怎样才能只用**Parent覆盖****ParentID**？

 **谢谢帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T12:27:00.560

您可以使用 Display Attribute 并将 Name 属性更改为类上更友好的文本：

```
public class Child
{
    [Display(Name="Parent")]
    public int ParentId {get;set;}

    public int ChildId {get;set;}

    public string FirstName {get;set;}

    public string LastName {get;set;}
} 
```

DisplayAttribute 类可以在 System.ComponentModel.DataAnnotations 命名空间中找到。 [http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.displayattribute.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.displayattribute.aspx)**

# asp.net - 如果未传递参数，如何避免 vb.net 中的请求查询字符串异常

> ID：10411524
> 
> 赞同：1
> 
> 时间：2012-05-02T10:00:27.323
> 
> 标签：asp.net, .net, vb.net

如果未传递参数变量，则此代码将引发“从字符串“转换为类型‘日期’无效”的异常。

这是我的代码。

```
 Public Shared ReadOnly Property Request_projectStartDate() As Date
        Get
            Dim _value As String = Nothing

            If Not HttpContext.Current.Request.QueryString("projectStartDate") Is Nothing Then
                _value = HttpContext.Current.Request.QueryString("projectStartDate").ToString()
            End If

            Return CDate(_value)
        End Get
    End Property 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T10:06:25.713

您可以查看@Massimiliano 报告的内容，然后再进行一项检查

```
If Request.QueryString.HasKeys() Then

   // Check for specified querystrings...
   If Not String.IsNullOrEmpty(Request.QueryString("projectStartDate")) Then
       // Your logic
   End If

End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:02:08.880

```
If Not String.IsNullOrEmpty(Request.QueryString("projectStartDate")) Then
    //
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-30T12:57:07.893

If Request.QueryString("projectStartDate") IsNot Nothing And Request.QueryString("projectStartDate") <> "" Then

# android - 折叠微调器的不同微调器布局

> ID：10411527
> 
> 赞同：0
> 
> 时间：2012-05-02T10:00:35.947
> 
> 标签：android, spinner, row

我有一个`Spinner`我修改了项目布局以显示两行。当`Spinner`它处于“打开”状态时它看起来很棒，但是当它折叠时我希望它只显示布局中的第一行，因为它当前显示两行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T12:53:36.777

设置微调器适配器时，您提供了一个用于封闭微调器的布局。您可以使用为下拉菜单指定不同的布局`setDropDownViewResource`

快速示例：

```
 ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
            getActivity(), R.array.States,
            android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(R.layout.listlayout_black);
    final Spinner states = (Spinner) v.findViewById(R.id.mbr_state_spinner);
    states.setAdapter(adapter); 
```

# xml - 无法解压缩从 windows phone 7 应用程序中的服务返回的 xml？

> ID：10411528
> 
> 赞同：0
> 
> 时间：2012-05-02T10:00:38.567
> 
> 标签：xml, windows-phone-7

我正在开发一个 windows phone 7 应用程序，其中我的应用程序正在消耗我的服务的响应。

我的服务给出了 xml(string) 的响应，因为 xml 的大小非常大，我使用以下方法压缩了 xml：-

```
 public static string Compress(string text)
    {
        byte[] buffer = Encoding.UTF8.GetBytes(text);
        MemoryStream ms = new MemoryStream();
        using (GZipStream zip = new GZipStream(ms, CompressionMode.Compress, true))
        {
            zip.Write(buffer, 0, buffer.Length);
        }

        ms.Position = 0;
        MemoryStream outStream = new MemoryStream();

        byte[] compressed = new byte[ms.Length];
        ms.Read(compressed, 0, compressed.Length);

        byte[] gzBuffer = new byte[compressed.Length + 4];
        System.Buffer.BlockCopy(compressed, 0, gzBuffer, 4, compressed.Length);
        System.Buffer.BlockCopy(BitConverter.GetBytes(buffer.Length), 0, gzBuffer, 0, 4);
        return Convert.ToBase64String(gzBuffer);
    } 
```

我已经使用 GZipStream 类压缩了数据并使用 System.IO.Compression 添加了命名空间，但是

我的问题是：-

我无法在该客户端（Windows Phone 7 应用程序）中解压缩它，我试图在 Windows Phone 7 应用程序项目中添加该 dll

它说：- system.Io.Compression dll 无法添加，因为它不是使用 windows phone 7 运行时构建的，windows phone 项目仅适用于 windows phone 程序集。

我做错了什么吗，有没有更好的方法。

你能告诉我最佳解决方案吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:34:15.440

Windows Phone 无法引用桌面 .NET 库，但没有适用于 Windows Phone 的等效项。

有一个第三方库可以简化 zip 请求：

*   [添加对Delay.GzipWebClient](http://nuget.org/packages/Delay.GzipWebClient)的包 (NuGet) 引用
*   将以下代码添加到您的启动中：

_

```
WebRequest.RegisterPrefix("http://", SharpGIS.WebRequestCreator.GZip);
WebRequest.RegisterPrefix("https://", SharpGIS.WebRequestCreator.GZip); 
```

从那时起，任何 Web 请求都将自动请求压缩响应，并且在您的应用程序代码获取它们时它们将被解压缩。

# entity-framework - 包管理器控制台 Enable-Migrations CommandNotFoundException 仅在特定的 VS 项目中

> ID：10411529
> 
> 赞同：135
> 
> 时间：2012-05-02T10:00:43.667
> 
> 标签：entity-framework, migration

我试图在一个新项目中运行命令“Enable-Migrations”，我得到了消息：

```
PM> Enable-Migrations
The term 'Enable-Migrations' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the spelling of the name, or if a path was included, verif
y that the path is correct and try again.
At line:1 char:18
+ Enable-Migrations <<<< 
    + CategoryInfo          : ObjectNotFound: (Enable-Migrations:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException 
```

但在所有其他项目中，该命令运行得很好。

为什么会这样？

顺便说一句，我正在使用 VS2010 Professional SP1

**编辑：**我重新安装了命令：**Install-Package EntityFramework -IncludePrerelease** ，问题就消失了。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-05-07T17:17:33.317

我用命令重新安装：`Install-Package EntityFramework -IncludePrerelease`问题就消失了。

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2015-02-11T23:17:25.347

只需重新启动 Visual Studio 即可为我工作。无需安装软件包等。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2017-05-20T12:04:58.490

出现此问题是因为我们没有安装实体框架。请使用以下命令安装实体框架。

```
Install-Package EntityFramework -IncludePrerelease 
```

安装后，在包管理器控制台默认项目下拉菜单中选择项目。

确保项目中至少有一个类继承自数据上下文，否则使用以下类：

```
public class MyDbContext : DbContext
    {
        public MyDbContext()
        {
        }
    } 
```

如果我们不这样做，我们会得到另一个错误：

*`No context type was found in the assembly`*

完成这些事情后你可以运行

```
enable-migrations 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2019-02-19T08:51:12.577

我对 VS 2019 Preview、.Net Core 和 EntityFramework Core 也有同样的问题。

原来我必须通过 NuGet`Microsoft.EntityFrameworkCore.Tools`和`Microsoft.EntityFrameworkCore.Design`. 一旦完成，它就像一个魅力。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2015-05-10T06:01:43.767

**以管理员**权限重新启动 Visual Studio为我解决了这个问题。

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2013-04-16T16:28:58.497

Make sure you are running Visual Studio as a administrator.

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2013-07-17T18:40:15.900

首先“Install-Package EntityFramework -IncludePrerelease”，然后以*管理员*身份重新启动 Visual Studio一起为我工作。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-08-12T01:26:45.267

我遇到了同样的问题，我尝试了其他人提供的大多数解决方案，但它对我来说是通过以下步骤工作的。我有VS 2017。

脚步：

```
Install-Package EntityFramework -IncludePrerelease 
```

然后创建一个类

```
public class MyDBContext : DbContext { public MyDBContext() { } } 
```

并在最后执行

```
Enable-Migrations -EnableAutomaticMigrations 
```

什么对我不起作用：

: 重启VS。

：只有“Enable-Migrations”命令，没有-EnableAutomaticMigrations。

：恢复或更新 Nuget 包管理器。

我最初的错误是

/* 术语“enable-migration”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。在 line:1 char:1 + enable-migration + ~~~~~~~~~~~~~~~ ~~ + CategoryInfo : ObjectNotFound: (enable-migration:String) [], CommandNotFoundException */

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2020-04-07T23:21:54.593

我刚刚在**asp.net core** VS2019中遇到了同样的问题

这解决了它：

```
Install-Package Microsoft.EntityFrameworkCoreInstall-Package
Install-Package Microsoft.EntityFrameworkCore.Tools 
```

不要忘记将包管理器控制台中的默认项目设置为您的数据库项目，以防万一。

在执行迁移时，默认项目似乎也发挥了作用。在稍后的步骤中，它有助于将其安装到我的主要启动项目（不是 EF 数据库项目）：

```
Install-Package Microsoft.EntityFrameworkCore.Design 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-08-13T19:07:41.017

在 Visual Studio 2012 中，我遇到了同样的错误。必须卸载 NuGet（工具 > 扩展和更新 > 已安装 > 全部：NuGet 包管理器：卸载按钮）。然后关闭 Visual Studio。然后重新打开 Visual Studio 并重新安装 NuGet（工具 > 扩展和更新 > 在线 > Visual Studio 库：NuGet 包管理器：下载按钮）。然后在以下窗口中：单击安装按钮，然后单击关闭按钮。然后关闭并重新打开 Visual Studio。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-12-11T03:59:57.683

为我解决此症状（VS2013）的方法是卸载然后使用 Nuget 重新安装 EF 包。csproj 文件中的差异改变了这一点......

```
<Reference Include="EntityFramework">
  <HintPath>..\packages\EntityFramework.6.1.1\lib\net45\EntityFramework.dll</HintPath>
</Reference> 
```

……进入这个……

```
<Reference Include="EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089, processorArchitecture=MSIL">
  <SpecificVersion>False</SpecificVersion>
  <HintPath>..\packages\EntityFramework.6.1.1\lib\net45\EntityFramework.dll</HintPath>
</Reference> 
```

我还不完全明白为什么，但至少它起作用了。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-06-12T14:18:39.257

在 .NET Core 中，通过在包管理器控制台中输入以下内容，我能够达到与接受的答案中描述的相同的分辨率：

```
Install-Package EntityFramework.Core -Pre 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-10-03T17:42:58.650

`Enable-Migrations -EnableAutomaticMigrations`

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2019-05-07T14:49:47.103

以管理员身份运行 vs =>> 打开项目

```
-> On the Package manager Console

Enable-migration
add-migration migrationName
update-database 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-11-27T11:32:46.490

我遇到了同样的问题，我发现这是因为项目路径中的某些字符，如 [ 或 ] 我更正了项目路径，它工作正常！

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-03-28T02:18:07.000

由于我已经有了迁移文件夹，我重新启动了 Visual Studio 并在包管理器控制台中运行 Update-Database -verbose。这对我有用

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-12-19T17:59:52.843

我尝试了上述所有建议，但对我没有任何效果，然后我更新`Nuget Package Manager`并成功了..

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2018-07-29T20:25:56.280

1.  使用以下命令将实体框架安装到当前项目： PM> Install-Package EntityFramework -IncludePrerelease

2.  在 Model 文件夹中添加一个类“MyDBContext”，如下所示：

    公共类 MyDBContext : DbContext { public MyDBContext() { } }

3.  现在使用以下命令为当前项目启用迁移： PM> enable-migrations

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-04-26T02:14:21.810

在 VS 2013 中，尝试安装 UPDATE 1(RC1) 并解决问题。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-12-12T05:07:59.233

这些解决方案都不适合我。我的解决方案是删除`packages/EntityFramework.6.1.3`和`Restore NuGet Packages`

我注意到它`packages/EntityFramework.6.1.3/tools/EntityFramework.psd1`不见了，所以这是一个可能的原因。虽然我不知道它是如何被删除的。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-08-21T15:22:03.097

检查配置部分“entityFramework”是否存在并在您的.config文件中描述

```
<configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/></configSections>

        <entityFramework>
            <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework"/>
            <providers>
                <provider invariantName="System.Data.SqlClient" type="System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer"/>
            </providers>
        </entityFramework> 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2016-02-16T15:05:44.070

我在解决方案中有多个项目，但我设置了正确的默认项目，所以我认为它应该可以工作。

最后，我不得不将`-StartupProject MyProjectName`选项添加到命令中

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-05-20T07:38:41.133

downgrade to 6.2 helped me.
.NET Framework version 4.6.1
Project in old format(non .NET Standard)
Visual Studio should be open with Admin rights for initial migration.
I guess EF with version above 6.2 require latest .NET Framework.

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-10-07T11:28:39.863

检查实体框架的版本。

如果是 6.3，将其降级到 6.2，它应该可以正常工作

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-05-05T05:05:36.910

**如果您创建 MVC Web 项目 您应该在创建项目时选择身份验证。默认情况下未选中。** [![在此处输入图像描述](../Images/856164ac9a98692eb1d58e1a7c8b53b1.png)](https://i.stack.imgur.com/6aqCQ.jpg)

* * *

## 回答 #26

> 赞同：-4
> 
> 时间：2016-09-15T00:51:08.640

检查项目是否在解决方案资源管理器窗口中打开。

这可能是您的问题的原因。

# magento - Magento 分页产品

> ID：10411530
> 
> 赞同：0
> 
> 时间：2012-05-02T10:00:48.273
> 
> 标签：magento, magento-1.6

Magento 分页有问题。

我的 XML 调用的谨慎列表页面是：

```
 <block type="catalog/product_list" name="categorieen" as="categorieen" translate="label" template="page/html/categorieen.phtml">
        <label>Categorieën</label>
    </block> 
```

我的产品列表页面的代码是：

```
 <div id="products">
<?php $_productCollection=$this->getLoadedProductCollection();?>

    <?php // Grid Mode ?>

    <?php $_collectionSize = $_productCollection->count() ?>
    <?php $_columnCount = $this->getColumnCount(); ?>
    <?php $i=0; foreach ($_productCollection as $_product): ?>
         <?php

         $pic = $this->helper('catalog/image')->init($_product, 'thumbnail')->keepFrame(false)->resize(170);
         ?>
         <a href="<?php echo $this->getAddToCartUrl($_product) ?>">
         <div class="block_prod">
           <div class="block_image_prod"><img src="<?php echo $pic; ?>"></div>
           <div class="block_title_prod"><h2><?php echo strtoupper($this->htmlEscape($_product->getName())); ?></h2></div>
        </div>
        </a>
        <?php $i++; endforeach ?>

<?php 

/*
define('MAGENTO', realpath(dirname(__FILE__)));
require_once MAGENTO.'/app/Mage.php';
Mage::app();*/

/* Provide a known category id that has children as a test */
$_cat = new Mage_Catalog_Block_Navigation();
$curent_cat = $_cat->getCurrentCategory();
$curent_cat_id = $curent_cat->getId();

$id = $curent_cat_id;

/* Load category by id*/
$cat = Mage::getModel('catalog/category')->load($id);

/*Returns comma separated ids*/
$subcats = $cat->getChildren();

//Print out categories string
#print_r($subcats);

foreach(explode(',',$subcats) as $subCatid)
{
  $_category = Mage::getModel('catalog/category')->load($subCatid);
  if($_category->getIsActive() && !$_category->getIncludeInMenu())
  {
    $caturl     = $_category->getURL();
    $catname     = $_category->getName();
    if($_category->getImageUrl())
    {
      $catimg     = $_category->getImageUrl();
    }
?>
         <a href="<?php echo $caturl; ?>">
         <div class="block_prod">
           <div class="block_image_prod"><img src="<?php  echo $catimg; ?>"></div>
           <div class="block_title_prod"><h2><?php echo strtoupper($catname); ?></h2></div>
        </div>
        </a>

<?php    

    }
}?>
</div>
    <div i="toolbar-bottom">
<?php echo $this->getToolbarHtml(); ?>
    </div> 
```

在我的产品页面上，我包含了工具栏

```
<?php echo $this->getToolbarHtml(); ?> 
```

但我没有像这样的分页

```
1-2-3-4...12 
```

我只得到：

```
Show 30 per page 
```

有解决方案吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:01:52.930

这可能对某些人有帮助

```
<?php $toolbar = $this->getToolbarBlock()->setCollection($_productCollection);
$pager = Mage::getBlockSingleton('page/html_pager')->setLimit($toolbar->getLimit())->setCollection($_productCollection);
if ($toolbar->getCollection()->getSize() > 0):?>
<?php if (!$pager->isFirstPage()): ?>
    <a class="prev-page" href="<?php echo $pager->getPreviousPageUrl() ?>" title="<?php echo $this->__('Previous') ?>">Previous</a>
<?php else: ?>
    <span class="prev-page disabled">&nbsp;PreviousDisable</span>
<?php endif; ?>

<span class="current-page-detail">
    Page <?php echo $pager->getCurrentPage(); ?> of <?php echo $pager->getLastPageNum(); ?>
</span>

<?php if (!$pager->isLastPage()): ?>
    <a class="next-page" href="<?php echo $pager->getNextPageUrl() ?>" title="<?php echo $this->__('Next') ?>">&nbsp;Next</a>
<?php else: ?>
    <span class="next-page disabled">&nbsp;NextDisable</span>
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:54:27.663

如果您查看默认设置`catalog.xml`，您将看到工具栏包含如下：

```
<block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
    <block type="page/html_pager" name="product_list_toolbar_pager"/>
</block> 
```

您是否以类似的方式包含它？

另一个要查看的地方是`toolbar.phtml`查看您需要的所有内容是否包含在其中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:25:01.020

该类别有 46 个产品，部分产品被隐藏。工具栏代码：

```
 <?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2011 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<?php
/**
 * Product list toolbar
 *
 * @see Mage_Catalog_Block_Product_List_Toolbar
 */
?>
<?php if($this->getCollection()->getSize()): ?>
<div class="toolbar">
    <div class="pager">
        <p class="amount">
            <?php if($this->getLastPageNum()>1): ?>
                <?php echo $this->__('Items %s to %s of %s total', $this->getFirstNum(), $this->getLastNum(), $this->getTotalNum()) ?>
            <?php else: ?>
                <strong><?php echo $this->__('%s Item(s)', $this->getTotalNum()) ?></strong>
            <?php endif; ?>
        </p>

        <div class="limiter">
            <label><?php echo $this->__('Show') ?></label>
            <select onchange="setLocation(this.value)">
            <?php foreach ($this->getAvailableLimit() as  $_key=>$_limit): ?>
                <option value="<?php echo $this->getLimitUrl($_key) ?>"<?php if($this->isLimitCurrent($_key)): ?> selected="selected"<?php endif ?>>
                    <?php echo $_limit ?>
                </option>
            <?php endforeach; ?>
            </select> <?php echo $this->__('per page') ?>
        </div>

        <?php echo $this->getPagerHtml() ?>

    </div>

    <?php if( $this->isExpanded() ): ?>
    <div class="sorter">
        <?php if( $this->isEnabledViewSwitcher() ): ?>
        <p class="view-mode">
            <?php $_modes = $this->getModes(); ?>
            <?php if($_modes && count($_modes)>1): ?>
            <label><?php echo $this->__('View as') ?>:</label>
            <?php foreach ($this->getModes() as $_code=>$_label): ?>
                <?php if($this->isModeActive($_code)): ?>
                    <strong title="<?php echo $_label ?>" class="<?php echo strtolower($_code); ?>"><?php echo $_label ?></strong>&nbsp;
                <?php else: ?>
                    <a href="<?php echo $this->getModeUrl($_code) ?>" title="<?php echo $_label ?>" class="<?php echo strtolower($_code); ?>"><?php echo $_label ?></a>&nbsp;
                <?php endif; ?>
            <?php endforeach; ?>
            <?php endif; ?>
        </p>
        <?php endif; ?>

        <div class="sort-by">
            <label><?php echo $this->__('Sort By') ?></label>
            <select onchange="setLocation(this.value)">
            <?php foreach($this->getAvailableOrders() as $_key=>$_order): ?>
                <option value="<?php echo $this->getOrderUrl($_key, 'asc') ?>"<?php if($this->isOrderCurrent($_key)): ?> selected="selected"<?php endif; ?>>
                    <?php echo $this->__($_order) ?>
                </option>
            <?php endforeach; ?>
            </select>
            <?php if($this->getCurrentDirection() == 'desc'): ?>
                <a href="<?php echo $this->getOrderUrl(null, 'asc') ?>" title="<?php echo $this->__('Set Ascending Direction') ?>"><img src="<?php echo $this->getSkinUrl('images/i_desc_arrow.gif') ?>" alt="<?php echo $this->__('Set Ascending Direction') ?>" class="v-middle" /></a>
            <?php else: ?>
                <a href="<?php echo $this->getOrderUrl(null, 'desc') ?>" title="<?php echo $this->__('Set Descending Direction') ?>"><img src="<?php echo $this->getSkinUrl('images/i_asc_arrow.gif') ?>" alt="<?php echo $this->__('Set Descending Direction') ?>" class="v-middle" /></a>
            <?php endif; ?>
        </div>
    </div>
    <?php endif; ?>
</div>
<?php endif ?> 
```

# go - 如何将字符串转换为小写表示？

> ID：10411538
> 
> 赞同：110
> 
> 时间：2012-05-02T10:01:13.193
> 
> 标签：go

如何将字符串转换为小写表示？

我觉得它必须有内置函数，但我就是找不到。

我确实找到了`ToLower`in `"unicode/letter"`，但它一次只适用于一个符文。

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-05-02T10:03:48.393

是的，检查[字符串包](https://golang.org/pkg/strings/#ToLower)。

```
package main

import (
    "fmt"
    "strings"
)

func main() {
    fmt.Println(strings.ToLower("Gopher"))
} 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2015-07-02T00:18:08.267

如果您碰巧懒得点击进入[strings 包](http://golang.org/pkg/strings/#ToLower)，这里是示例代码：

```
strings.ToLower("Hello, WoRLd") // => "hello, world" 
```

如果您需要处理像阿塞拜疆语或土耳其语这样的[Unicode 特殊情况](http://golang.org/pkg/unicode/#SpecialCase)`ToLowerSpecial`，您可以使用：

```
strings.ToLowerSpecial(unicode.TurkishCase, "Hello, WoRLd") // => "hello, world" 
```

# java - 应用程序在开发服务器上工作，在 GAE 上部署时不工作

> ID：10411539
> 
> 赞同：0
> 
> 时间：2012-05-02T10:01:13.460
> 
> 标签：java, google-app-engine

我的应用程序正在执行以下操作：当客户端连接时，它会检查身份验证（使用 Google 帐户），如果不正常，则提供登录链接。然后它会在加载 UI 并获取初始所需数据时显示“正在加载...”消息。然后它就出现了。

我的问题：自从昨天的最后一次部署（轻微的 UI 更改）以来，应用程序正确地进行了身份验证，显示加载消息，然后挂起。浏览器不再做任何事情，我在 GAE 上的实例也不再做任何事情。

在应用程序日志中，我看到记录了预期的请求，例如对 /、CSS 文件、脚本和静态文件（图像等）的请求，当然还有身份验证 RPC 请求。所有这些都运行完美，没有错误或异常。但随后应用程序确实停止了！

由于该应用程序在本地开发服务器上完美运行，并且由于我没有任何错误或异常可以开始调试，因此我正在寻求帮助！

请注意，我已经尝试了所有变体，从清除我的数据存储区和我的内存缓存开始，到完全删除我的应用程序并使用新的新应用程序 ID 创建一个新应用程序结束，没有任何帮助。

由于它在本地正常运行但不能在线运行，我怎样才能找到错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:42:00.747

## 问题解决了 ！

Google Chrome 开发者工具帮助我看到了一个我没有在客户端捕获/处理的异常。因此，我在尝试在线应用程序时没有看到任何错误。我班级的一个构造函数在 Prod 或 Development Environment 中执行一些不同的初始化工作，并且在 Prod Environment 的情况下，我有一个与 UI 初始化和数据存储内容相关的极端案例。

*   开发时，总是捕获每一个潜在的异常，并开发最少的处理（而不是一个空的 catch() 块，记录异常）
*   Chrome 开发者工具有很大帮助（感谢彼得！）

# jquery - 添加不适用于提交时的所有空输入字段

> ID：10411542
> 
> 赞同：-2
> 
> 时间：2012-05-02T10:01:30.287
> 
> 标签：jquery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:48:32.803

这样做： -

```
$("#submit").click(function(){
    $("input[class='required']").each(function(){
          if ($.trim($(this).val()).length == 0)               
              $(this).val('Not Applicable');
    });
}); 
```

一旦验证OK，然后去提交表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:32:49.203

我想我可能已经解决了 - 你能确认这个逻辑是否正确吗？

```
$("#submit").click(function(){

 $("input[class='required']").each(function(){

      if ($.trim($(this).val().length == 0) && $(this).attr('disabled'))

         $(this).val('Not Applicable');    

      });

 }); 
```

# android - How to get spinner value depending upon the other spinner

> ID：10411543
> 
> 赞同：4
> 
> 时间：2012-05-02T10:01:31.330
> 
> 标签：android, android-spinner

I have two spinner item. One is my Day spinner , another is my Month Spinner. If I select month February from month spinner and if I select day as 30 ,it should not be done.

Another example: month April has 30 days , so if someone selects Month as April and day as 31st ,then it is not correct. Please tell me how to do get the value of one spinner corresponding to the value of another spinner.

Here is my code where I have the two spinners:

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
 /*************day spinner**********/

        Spinner day  = (Spinner) findViewById(R.id.spinner2);
        ArrayAdapter<CharSequence> dayadapter = ArrayAdapter.createFromResource(
                this, R.array.item_day, android.R.layout.simple_spinner_item);
        dayadapter.setDropDownViewResource(R.layout.spinner_layout);
        day.setAdapter(dayadapter);

        /*****************month spinner**********************/

        Spinner month  = (Spinner) findViewById(R.id.spinner3);
        ArrayAdapter<CharSequence> monthadapter = ArrayAdapter.createFromResource(
                this, R.array.item_month, android.R.layout.simple_spinner_item);
        monthadapter.setDropDownViewResource(R.layout.spinner_layout);
        month.setAdapter(monthadapter);

}} 
```

My Xml where the spinners are defined :

```
 <Spinner
            android:id="@+id/spinner2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/spinner3"
            android:layout_alignTop="@+id/textView4"
            android:layout_toLeftOf="@+id/textView3" />
   <Spinner
            android:id="@+id/spinner3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/spinner2"
            android:layout_toLeftOf="@+id/textView3"
            android:layout_toRightOf="@+id/textView5" /> 
```

my spinner_layout:

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/spinnerTarget"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          android:textColor="#000000"
          android:textSize="12pt"
/> 
```

my day array

```
<string name="day_picker">Select an iten</string>
<string-array name="item_day">
    <item>1</item>
    <item>2</item>
    <item>3</item>
    <item>4</item>
    <item>5</item>
    <item>6</item>
     <item>7</item>
    <item>8</item>
    <item>9</item>
    <item>10</item>
    <item>11</item>
    <item>12</item>
     <item>13</item>
    <item>14</item>
    <item>15</item>
    <item>16</item>
    <item>17</item>
    <item>18</item>
     <item>19</item>
    <item>20</item>
    <item>21</item>
    <item>22</item>
    <item>23</item>
    <item>24</item>
     <item>25</item>
    <item>26</item>
    <item>27</item>
    <item>28</item>
    <item>29</item>
    <item>30</item>
    <item>31</item>

</string-array> 
```

my month array

```
<resources>
    <string name="month_picker">Select an item</string>
    <string-array name="item_month">
        <item>January</item>
        <item>February</item>
        <item>March</item>
        <item>April</item>
        <item>May</item>
        <item>June</item>
         <item>July</item>
        <item>August</item>
        <item>September</item>
        <item>October</item>
        <item>November</item>
        <item>December</item>
         </string-array>
</resources> 
```

If I select any month I want to get corresponding no. of days automatically in day-spinner Note: I do not want any error message after clicking a button. thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:07:13.207

这真的很简单。将 OnItemSelectedListener() 放在月份微调器上，添加您自己的侦听器，用正确的值初始化日期微调器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:51:44.297

```
month.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> parent, View view,
                int pos, long id) {
            // TODO Auto-generated method stub
            List<String> s = Arrays.asList(getResources().getStringArray(R.array.item_day));
            if (pos == 0 || pos == 2 || pos == 4 || pos == 8 || pos == 9
                    || pos == 11) {
                ArrayAdapter<String> dayadapter = new  ArrayAdapter<String>(Latlondemo.this, android.R.layout.simple_spinner_item,s);
                day.setAdapter(dayadapter);
            } else if (pos == 1) {
                s = s.subList(0,28);                    
                ArrayAdapter<String> dayadapter = new  ArrayAdapter<String>(Latlondemo.this, android.R.layout.simple_spinner_item,s);
                day.setAdapter(dayadapter);
            } else {
                s = s.subList(0,30);                    
                ArrayAdapter<String> dayadapter = new  ArrayAdapter<String>(Latlondemo.this, android.R.layout.simple_spinner_item,s);
                day.setAdapter(dayadapter);
            }
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    }); 
```

# iphone - 加载笔尖，但在为 UITableView 的标题分配自定义视图时未设置视图出口

> ID：10411547
> 
> 赞同：0
> 
> 时间：2012-05-02T10:01:49.870
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我正在尝试为`UITableView`标题创建自定义视图，但不幸的是，我遇到了一个异常：

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '-[UIViewController _loadViewFromNibNamed:bundle:] loaded the "ImagesView" nib but the view outlet was not set.' 
```

首先，在 HomeViewController 中我创建了一个 tableView，然后我使用 xib 文件创建了 ImagesViewController，其中设计了我的自定义视图。

最后，我尝试将 ImagesView 分配为我的 tableView 的标题：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    ImagesViewController *imagesView = [[ImagesViewController alloc] init];
    tableView.tableHeaderView = imagesView.view;

} 
```

我究竟做错了什么？我是iOS开发的新手，自己搞定。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:26:33.287

使用这行代码

```
 {   
 ImageViewcontroller *imageView=[[ImagesViewController alloc]initwithnibname:@"ImageViewController" bundle:nil];       
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:11:39.640

您可以使用此方法创建自定义标题视图

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
```

这是[UITableView 委托协议](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html)的一部分。

例如，我的一个应用程序使用此方法：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    UIView *customHeaderView = [[UIView alloc] init];
    customHeaderView.frame = CGRectMake(40.0, 20.0, 300.0, 45.0);
    UILabel *headerText = [[UILabel alloc] initWithFrame:CGRectMake(10.0, 0.0, 300, 32)];
    headerText.textAlignment = UITextAlignmentCenter;
    headerText.font = [UIFont systemFontOfSize:FONT_SIZE_FOOTER];
    headerText.numberOfLines = 0;
    headerText.backgroundColor = [UIColor clearColor];
    if (section == 0) {
        headerText.text = @"";
    }
    if (section == 1) {
        headerText.text = SETTINGS_TEXT_PART0;
    }
    [customHeaderView addSubview:headerText];
    return customHeaderView;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:13:25.810

试试这个方法，在tableviewcontroller本身的xib文件中，拖一个uiview或者imageview（这里做header的设计）到工作区而不是mainview或者tableview，然后做一个iboutlet叫做header，然后连接这个iboutlet到视图，然后在 tableviewcontrollers 委托方法实现

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
return header;
} 
```

添加这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T10:14:36.700

在您的`ImagesViewController`情况下，您可能还没有将`view`插座与视图相关联。您可以在 Interface Builder 中通过单击 File's Owner 并从 Utilities 单击 Connection Inspector 来执行此操作，您可以将`view`插座链接到您的`UIView`.

# css - 哪个元素导致水平滚动条？

> ID：10411557
> 
> 赞同：-1
> 
> 时间：2012-05-02T10:02:11.047
> 
> 标签：css

请看一下并帮助我，我一直在看我的 css 一个小时，但无法弄清楚...[链接到外部 url](http://www.ht-webcreations.com/violak/index.php?lang=en)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:06:25.237

页脚导致它。改变

```
width: 100%; 
```

到：

```
margin-right: auto;
margin-left: auto;
width: auto; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:06:34.367

创建水平滚动条的是页脚的宽度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T10:07:58.797

消除

```
width: 100% 
```

从页脚。这可以完成工作。

在 layout.css 中，删除第 124 行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T10:09:28.930

尝试删除页脚的宽度属性或将其设置为自动。您不能将填充设置为恒定像素的元素具有 100% 的宽度。

其他解决方法是使用 width:90%; 和填充：0 5%；有 100% 的宽度

干杯，托尼

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T10:06:12.703

在 layout.css 中替换

```
#footer{
    width: 100%;
    padding: 10px;
    color: #FFF;
    background: url(../images/tail_main.gif) repeat-x center top;
    clear: both;
} 
```

和

```
#footer{
    padding: 10px;
    color: #FFF;
    background: url(../images/tail_main.gif) repeat-x center top;
    clear: both;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T10:08:04.083

问题出在元素上。填充：10px（layout.css 第 123 行）

# javascript - How to detect if javascript is enabled or not in browser through Java

> ID：10411559
> 
> 赞同：3
> 
> 时间：2012-05-02T10:02:21.687
> 
> 标签：javascript, jakarta-ee, cookies, jsf-2

I want to know that is there any way by which i can detect whether Javascript is enabled in the browser. Like we can detect cookies by using code in the filter

```
if (httpServletRequest.isRequestedSessionIdFromCookie()) {

} 
```

can i detect javascript also? Does Java provide any method for this? Actually i want to check whether both javascript and Cookies are enabled. If not then i want to show message to user that **Please make sure your cookies and javascript is enable**

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:51:33.247

没有办法在服务器端检查它。您必须让客户端以某种方式通知服务器端。

在您的特定情况下，您可以让 JS 设置一个 cookie 并在服务器端检查它。

```
<h:outputScript>
    if (document.cookie.indexOf('js=true') == -1) {
        document.cookie = 'js=true';
        window.location.reload(true);
    }
</h:outputScript>
<h:panelGroup rendered="#{not cookie.js.value}">
    Please make sure that Cookies and JavaScript are enabled.
</h:panelGroup> 
```

JS 将检查是否还没有 name=value of 的 cookie，`js=true`然后设置它并重新加载页面（以便发送 cookie）。请注意，当 JS 被禁用时，这将不会被执行。JSF`rendered`属性将检查具有名称的 cookie`js`是否没有值，`true`然后相应地显示消息。一石两鸟：）

# asp.net - asp.net Web API - 没有包含 Microsoft.Practices.ServiceLocation.IServiceLocator 的 dll 可用

> ID：10411563
> 
> 赞同：0
> 
> 时间：2012-05-02T10:02:50.263
> 
> 标签：asp.net, dependency-injection, asp.net-web-api

所以我想为我的 ASP.NET Web API 项目设置依赖注入。自版本 3 以来，Microsoft 似乎已经改变了在 MVC 中设置 DI 的方式。现在我需要进行如下调用：

```
GlobalConfiguration.Configuration.ServiceResolver.SetResolver(DependencyResolver); 
```

`SetResolver()`接受一个对象。什么类型的对象？

当我运行应用程序时，我收到一条错误消息，告诉我传入的参数`SetResolver()`必须实现`Microsoft.Practices.ServiceLocation.IServiceLocator`。当然，我可以这样做。我敢肯定这并不难。

但是我无法创建一个实现的类，`IServiceLocator`因为我没有定义该死的东西的 dll。大概安装 ASP.NET Web API 时不会包含它。那么我到底应该如何让项目使用我的自定义容器进行 DI 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:27:07.193

这是它在**测试版**中的样子，但它会改变（见[这里](http://byterot.blogspot.co.uk/2012/04/aspnet-web-api-series-part-4-dependency.html)）：

DI 基于在 HttpConfiguration 对象上设置依赖关系解析器（技术上是服务定位器）。此对象作为静态属性（Web 托管）位于 GlobalConfiguration 对象上，或者在 HttpSelfHostConfiguration 上自托管的情况下。

因此，在网络托管的情况下，您将使用：

```
GlobalConfiguration.Configuration.ServiceResolver.SetResolver(myResolver); 
```

注册依赖解析器时基本上有 3 个选项：

1.  `IDependencyResolver`一个实现依赖的对象的实例，它有两种方法：`GetService`和`GetServices`
2.  具有以下两个公共方法的对象实例：`GetInstance`和`GetAllInstances`. 不需要接口，Web API 将使用反射来调用方法。
3.  传递两个返回特定类型的一个或多个实例的委托

# 编辑

`IDependencyResolver` of Web API (*not* MVC) is located in `System.Web.Http.dll` in `System.Web.Http.Services` namespace.

# java - Java vs C version of same algorithm

> ID：10411564
> 
> 赞同：2
> 
> 时间：2012-05-02T10:02:51.810
> 
> 标签：java, c, performance

I implemented one program in Java, which surprising took 177M memory for particular test-cases (I do not have since program are tested by one website).

The problem was to find out all the characters of string S2, which are present in string S1\. And there are N such cases.

```
public static void main(String[] args) throws Exception {
    BufferedReader bin = new BufferedReader (new InputStreamReader (System.in));
    String jewel, stone;
    int t = Integer.parseInt (bin.readLine());
    int count;
    int i;

    while (t-->0) {
        count = 0;
        jewel = bin.readLine();
        stone = bin.readLine();
        for (i=0; i<stone.length(); i++) {
            if (jewel.indexOf(stone.charAt(i)) !=-1) {
                count++;
            }
        }
        System.out.println(count);
    }
} 
```

I also do not understand, how it is taking 177M of ram. Even if they are testing a huge file then also only 2 strings are there. However code was perfectly working and test-cases passed.

Since java program was taking huge amount of memory, so I planned to write a C version of same program. which is following:

```
int main ()
{
  char * pch;
    char jewel[100], stone[100];
    int n;
    scanf("%d",&n);
    int len;    
    int tp;
    int count = 0;
    getchar(); // remove trailing '\n'
    while (n-->0) {

        gets(jewel);
        pch = gets(stone);
        count = 0;

        while(*pch ) {
            if (strchr(jewel, *pch)) {
                count++;
            }
            pch++;
        }
        printf("%d\n", count);
    }
  return 0;
} 
```

On few existing cases, it is working. Program seems to be correct too. But I am unable to understand why it is passing all test cases correctly.

All the strings buffer are long enough to hold the incoming strings, which are separated by new lines.

**EDIT:** Changing `""+stone.charAt(i))` to `stone.charAt(i))` did not help and took same amount of memory. **Also why this C code is not able to pass all the test cases** ?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T10:09:34.697

`""+stone.charAt(i)`创建一个短暂的字符串对象。这会占用少量内存，最终会被垃圾收集器[*]释放。

另一方面，您的 C 代码根本不分配任何内存。

Java 的垃圾收集器在需要之前不一定会工作。如果您的程序有超过 177MB 的可用内存，并且程序通过创建 177MB 的短期对象来搅动，那么就这样吧。如果您开始耗尽内存，或者如果垃圾收集器注意到它可能正在运行的空闲时间，那么它将释放一些内存。因此，您的程序的内存使用可能会增长以适应可用的内存。

或者，即使仍有可用内存，GC 也可能会运行。如果 GC 被强制运行（例如）每 10MB 的分配，那么您预计此代码的内存使用量约为 10MB，所以我猜在这种情况下它不会。在另一个 JVM 上可能会。

[*] Java 实现可以执行理论上的优化，注意没有对对象的引用逃脱循环，然后以不同的方式分配/释放它以避免搅动 GC。我猜这种情况并没有发生，但值得了解的是，不同的 JVM 或具有不同选项的相同 JVM 可能具有非常不同的垃圾收集策略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T11:29:46.307

Java 代码创建一个缓冲阅读器和一个输入流阅读器。这两个都保证使用大块内存，在垃圾收集器运行之前不会被释放（可能直到程序退出！）。

`jewel = bin.readLine();`

在 java 中，每次调用 .readline 都会在堆上创建一个新字符串，赋值会将前一个字符串标记为“free-able”，但它会在内存中徘徊，直到 GC 摆脱它。

C 在内存管理方面做得很少。唯一可能分配一块内存的行是`gets`，但这可能只是使用控制台输入缓冲区，这不计入程序内存使用量。

我认为您正在将苹果与橙子进行比较来制作果汁。重新编写 C 代码以使用垃圾收集和缓冲读取类，您可能有一个等效的程序。

# facebook - 为 2 个不同版本制作一个程序

> ID：10411566
> 
> 赞同：1
> 
> 时间：2012-05-02T10:02:58.410
> 
> 标签：facebook, blackberry, version-control

我想创建 2 个不同版本的 Blackberry 程序一个支持 facebook api，另一个不支持的低版本我知道 4.6 版不支持 facebook api 而 5.0 及更高版本支持

那么，我如何实现为这两个版本制作一个程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:49:38.663

以下链接可能会有所帮助：

*   [为多个黑莓设备编码 - 在 Eclipse 中使用预处理器指令](http://berrytutorials.blogspot.com/2009/11/coding-for-multiple-blackberry-devices.html)

*   [RIM 编译器支持的预处理器指令](https://stackoverflow.com/questions/1179129/preprocessor-directives-supported-by-the-rim-compiler)

*   [JDE 的预处理器指令](http://supportforums.blackberry.com/t5/Java-Development/Preprocessor-Directives-for-JDE/td-p/71909)

*   [指定预处理器指令](http://docs.blackberry.com/en/developers/deliverables/21065/Specifying_preprocessor_directives_657636_11.jsp)

*   [为工作区创建预处理器指令](http://docs.blackberry.com/en/developers/deliverables/12002/Create_Workspace_Preprocessor_Directives_927626_11.jsp)

*   [为项目创建预处理器指令](http://docs.blackberry.com/en/developers/deliverables/21065/Create_project_preprocessor_directives_927627_11.jsp)

# jquery - How to get the text of the selected value of a dropdown list?

> ID：10411568
> 
> 赞同：18
> 
> 时间：2012-05-02T10:03:06.740
> 
> 标签：jquery, select

> **Possible Duplicate:**
> [jQuery get specific option tag text](https://stackoverflow.com/questions/196684/jquery-get-specific-option-tag-text)
> [How to get the text of the selected option of a select using jquery?](https://stackoverflow.com/questions/1391019/how-to-get-the-text-of-the-selected-option-of-a-select-using-jquery)

I have a dropdown list and I want to know the text of the selected item. For example:

```
<select>
    <option value="1">Volvo</option>
    <option value="2">Saab</option>
    <option value="3">Mercedes</option>
</select> 
```

If I know the selected value, how can I get it's text value? For instance, if the value is `1` how can I get `Volvo`?

Help much appreciated.

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-02T10:04:16.473

您可以使用`option:selected`获取`select`元素的选择选项，然后`text()`方法：

```
$("select option:selected").text(); 
```

这是一个例子：

```
console.log($("select option:selected").text());
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<select>
    <option value="1">Volvo</option>
    <option value="2" selected="selected">Saab</option>
    <option value="3">Mercedes</option>
</select>
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-02T10:06:07.317

```
$("#select_id").find("option:selected").text(); 
```

如果您的控件位于服务器端，这将很有帮助。在*.NET*中，它看起来像：

```
$('#<%= dropdownID.ClientID %>').find("option:selected").text(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T10:06:48.970

The easiest way is through css3 `$("select option:selected")` and then use the `.text()` or `.html()` function. depending on what you want to have.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T10:18:39.647

嗨，如果你有这样的下拉列表

```
<select id="testID">
<option value="1">Value1</option>
<option value="2">Value2</option>
<option value="3">Value3</option>
<option value="4">Value4</option>
<option value="5">Value5</option>
<option value="6">Value6</option>
</select>
<input type="button" value="Get dropdown selected Value" onclick="getHTML();"> 
```

在将 id 提供给下拉列表后，您只需要添加这样的 jquery 代码

```
function getHTML()
{
      var display=$('#testID option:selected').html();
      alert(display);
} 
```

# html - Easy to maintain CSS or lightweight HTML?

> ID：10411571
> 
> 赞同：5
> 
> 时间：2012-05-02T10:03:18.483
> 
> 标签：html, css, performance, class

I'm in charge of supervising the whole IT side of a website (both infrastructure and development) and I'm having a difference of opinion with the lead frontend developer. His approach is to create individual classes that each bring one functionality, and combine as many classes as needed to style an element:

```
HTML
<div class="float_left padding_10 width_60_percent"></div>
<div class="float_left width_30_percent"></div>
<div class="float_left padding_10 width_10_percent"></div>
CSS
.float_left { float: left; }
.padding_10 { padding: 10px; }
.width_60_percent { width: 60%; }
.width_30_percent { width: 30%; }
.width_30_percent { width: 10%; } 
```

**Pros:**

-**understanding of CSS via the HTML**: you can understand what the CSS is doing by just looking at the class names in the HTML.
-**ease of creation**: once you have your set of classes defined, it's just a matter of combining them in the HTML, you don't have to constantly write new CSS.
-**ease of maintenance**: same reason as above.
-**portability**: you can use the same approach for any website you work on (which makes sense for him as he is a contractor working on different projects).
-**smaller CSS**: as long as your layout reaches a certain critical size whereby the same classes are being re-used again and again (which would be the case with a proper layout, but obviously isn't reflected above due to the conciseness of the example).

**Cons:**

-**bigger HTML**.
-**HTML harder to read** if you're not interested in the CSS part (which my backend developers creating the views aren't).
-**harder to integrate Javascript based on class selectors** (we're using jQuery).

My approach isn't dictated by the ease of writing/maintaining CSS itself, but rather by concerns that a substantial part of our HTML code is going to be used solely for the purpose of integrating our CSS, which will impact performance: I believe it's better to have a bigger CSS which gets served and cached once, and a smaller HTML which saves you bandwidth on every page view, rather than the opposite. Accordingly, I would opt for the following approach:

```
HTML
<div id="column_left"></div>
<div id="column_middle"></div>
<div id="column_right"></div>
CSS
#column_left { float: left; padding: 10px; width: 60%; }
#column_middle { float: left; width: 30%; }
#column_right { float: left; padding: 10px; width: 10%; } 
```

**Pros/Cons**
Opposite as above.

I have the feeling that having a lightweight HTML code is critical to achieving growth of your website:
-page load will be faster which will help with SEO and user experience.
-more pages can be served with the same bandwidth will which save you infrastructure cost.

In an attempt to get a de-facto answer, we scanned "big" websites to see what part of HTML was allocated to using ids and classes. Here is the code:

```
<?php
require_once 'simple_html_dom.php';
$pages = array('http://www.amazon.com', 'http://www.ebay.com', 'mywebsite.html', 'http://stackoverflow.com','facebook.html');
foreach ($pages as $page) {
    echo "\n$page\n";
    $html = new simple_html_dom();
    $string = file_get_contents($page);
    $total = mb_strlen($string);
    echo "HTML = " . $total . " characters\n";
    $html->load($string);
    foreach (array('id', 'class') as $attribute) {
        $count = 0;
        $elements = $html->find("*[$attribute]");
        foreach ($elements as $element) {
            // length of id or classes, + id="..." or class="..."
            $count = $count + mb_strlen($element->$attribute) + mb_strlen($attribute) + 3;
            //echo $element->$attribute . "\n";
        }
        echo "  -from $attribute attributes = $count -> " . round($count / $total * 100) . "%\n";
    }
} 
```

and here are the results:

```
http://www.amazon.com
HTML = 101680 characters
  -from id attributes = 943 -> 1%
  -from class attributes = 6933 -> 7%

http://www.ebay.com
HTML = 71022 characters
  -from id attributes = 1631 -> 2%
  -from class attributes = 4689 -> 7%

ourwebsite.html
HTML = 35929 characters
  -from id attributes = 754 -> 2%
  -from class attributes = 2607 -> 7%

http://www.imdb.com/
HTML = 74178 characters
  -from id attributes = 1078 -> 1%
  -from class attributes = 5653 -> 8%

http://stackoverflow.com
HTML = 204169 characters
  -from id attributes = 3376 -> 2%
  -from class attributes = 39015 -> 19%

facebook.html
HTML = 419001 characters
  -from id attributes = 6871 -> 2%
  -from class attributes = 85016 -> 20% 
```

So far we've been using "my" approach and I'm happy to see we're keeping the percentages of code related to the `id and`class` attributes within the same proportions as other big websites (around 2% and 7% respectively). Nonetheless in order to validate that choice, I would like to ask the following questions that I hope experienced developers/webmasters will be able to answer:

**Q1: Do you see other pros/cons in favour/against either of the 2 approaches?**

**Q2: From your experience, is it that critical to worry about having a lightweight HTML code, or does this become neglectable with the use of compression and other criteria (e.g. you will spend more money fighting with your frontend developers)?**

By looking at the results, you will see that there seems to be a pattern in the amount of code related to the `id` and `class` attributes (although I know scanning more websites would provide a more accurate picture):
-all websites have around 1% to 2% of their HTML code related to `id` attributes.
-4 of the websites have around 7% of their HTML code related to `classes`.
-the others have around 20% of their HTML code related to `classes`.

**Q3: Is there a technical explanation (e.g. are Facebook and Stackoverflow using the same frameworks to generate their CSS) for these patterns?**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:41:38.390

我是一个企业网络软件项目的前端开发人员，大约有 50 人编写代码，其中大多数是后端。最初，我同意尽可能少的类以使代码更轻，在 css 中使用大量继承。所以我们一直在使用“尽可能少的类”的方法。

**A1**：使用少数类的方法，许多 css 定义将使用元素名称来添加样式，这样的事情`.left-column section li a` **使开发人员的生活更轻松，但实际上使 css 变慢**，因为 css 是从右到左分析的。在我的示例中，浏览器首先检查所有链接，然后检查所有列表元素，依此类推。如果我只有`a.lc-link`css 使用起来会更快，要查找的元素更少。

我们遇到的另一个问题是缺乏模块化。我可以设计一个漂亮的元素，让我们称之为它`.flight-dates`，它工作得很好。然后出现了一个新的用例，有人想在表单中间使用，而不是作为主要页面模块。但是表单被构建为使用表单标签上的单个类，而其他所有内容都使用继承。所有继承都会污染 .flight-dates，所以我需要返回并为 css 添加更高的特异性，因此所有 .flight-dates 样式在它们是表单的子项时都有一个额外的定义。

这样的事情每周发生3到4次。**更少的类 = 更少的灵活性 + 具有非常高特异性的丑陋样式表**，这就是我从中得到的。

**A2**：随着页面上发生的 javascript**数量，使用的类数量现在几乎无关紧要**。它对我所知道的 DOM 操作速度没有任何影响。所以我们已经失去了从少数类方法中获得的任何优势。

参考您的测试，请记住，**下载 css 和解析 css 不是一回事**。

此外，前面提到的 CSS 修正实际上让后端和前端开发人员的速度变慢了。因为我们试图使用尽可能少的类来使后端的工作更容易，所以如果你把它们放在一个新的上下文中，后端就会留下像婴儿一样哭泣的组件，而前端必须更改他们 6 个月前编写的 css。我个人已经浪费了几个星期。

我会说它使工作变慢，并且没有值得一提的性能优势。

**A3**：像 Sass 和 Less 之类的东西往往会导致 css 中的常见模式。此外，许多好的网格和相关的 css 框架都使用通用的类名。想想 jQuery ui 或 960 网格。

**如果您想从我们的错误中吸取教训，请听取您的前端人员的意见。** 你的后端人员会更开心，因为组件总是按照他们期望的方式运行。你的前端人员会更开心，因为他们将能够编写健壮的、即发即弃的 css，他们不必每次出现新的用例时都重新散列。你的 html 会大一点，但老实说差异可以忽略不计，我不相信它会导致任何重大瓶颈。你的 CSS 会运行得更快。工作最终将花费更少的时间来完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T10:11:05.123

您的前端开发人员正在做的事情称为面向对象的 css (OOCSS)，有些人认为这有助于提高您网站的速度。

我不想在这里重新讨论 OOCSS 的论点，所以请阅读这个常见问题解答：

[https://github.com/stubbornella/oocss/wiki/faq](https://github.com/stubbornella/oocss/wiki/faq)

编辑：在编码标准方面，我宁愿在 facebook/stack 方面犯错，而不是 amazon/ebay。注意更进步的网站（fb/stack）似乎有更高的班级百分比？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:15:46.170

我最近从 Google 看到一篇文章显然鼓励了 oocss 方法，但它几乎肯定会创建更大的 html 和 css，这在更大的网站上确实很重要。

我从未见过使用 oocss 的开发人员，这让我建议，如果该网站正在由其他开发人员开发，或者将来可能会这样做，那么采用更多开发人员遵循的方法可能会更好

# python - Changing namespaces in python minidom

> ID：10411572
> 
> 赞同：0
> 
> 时间：2012-05-02T10:03:23.043
> 
> 标签：python, xml, dom, minidom

I have the following xml:

```
<gml:FeatureCollection xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:xs="http://www.w3.org/2001/XMLSchema"
 xmlns:aqd="http://www.exampleURI.com/AQD"
 xmlns:base="urn:x-inspire:specification:gmlas:BaseTypes:3.2"
 xmlns:gmd="http://www.isotc211.org/2005/gmd" 
 xmlns:gco="http://www.isotc211.org/2005/gco" 
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:gml="http://www.opengis.net/gml/3.2" 
 xmlns:gss="http://www.isotc211.org/2005/gss" 
 xmlns:gts="http://www.isotc211.org/2005/gts" 
 xmlns:gsr="http://www.isotc211.org/2005/gsr" 
 xmlns:ef="http://inspire.jrc.ec.europa.eu/schemas/ef/2.0"
 xmlns:base2="http://inspire.jrc.ec.europa.eu/schemas/base2/0.1"
 xmlns:om="http://www.opengis.net/om/2.0"
 xmlns:swe="http://www.opengis.net/swe/2.0" 
 xmlns:sams="http://www.opengis.net/samplingSpatial/2.0" 
 xmlns:sam="http://www.opengis.net/sampling/2.0" 
 xmlns:am="http://inspire.jrc.ec.europa.eu/schemas/am/2.0"
 xmlns:gn="urn:x-inspire:specification:gmlas:GeographicalNames:3.0" 
 xmlns:am-ru="http://inspire.jrc.ec.europa.eu/schemas/am-ru/2.0" 
 xsi:schemaLocation="http://www.exampleURI.com/AQD aqd/1.0/AQD.xsd http://www.opengis.net/gml/3.2 gml/3.2.1/gml.xsd" 
 gml:id="aqd.es.zones"
>

<!-- Responsible Party Information  -->
                <aqd:AQD_ReportingUnits>
                <am-ru:reportingAuthority>
                    <gmd:CI_ResponsibleParty>
                        <gmd:organisationName>Subdirección General de Calidad del Aire y Medio Ambiente Industrial</gmd:organisationName>
                    </gmd:CI_ResponsibleParty>
                </am-ru:reportingAuthority>
                </aqd:AQD_ReportingUnits> 
```

And where the value ' xsi:schemaLocation="http://www.exampleURI.com/AQD aqd/1.0/AQD.xsd' occurs I simply want to change the 'aqd/1.0/AQD.xsd' to AQD.xsd

Thanks for helping

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:27:06.700

这样做的方式很慢，您不需要 minidom （如果文件很大，请以不同的方式进行）：

```
outFile = open('path/to/outfile/out_file.xml', 'w')
inFile = open('path/to/input/input_file.xml', 'r')
for line in inFile:
    if  'xsi:schemaLocation="http://www.exampleURI.com/AQD aqd/1.0/AQD.xsd' in line:
        line = line.replace('aqd/1.0/AQD.xsd', 'AQD.xsd') 
    outFile.write(line)

inFile.close()
outFile.close() 
```

# java - 快速列出目录及其所有子目录中的文件

> ID：10411578
> 
> 赞同：3
> 
> 时间：2012-05-02T10:03:45.750
> 
> 标签：java, io, file-listing

我需要找到一个目录及其所有子目录中的所有文件（除了一些）。
目前我正在使用这种方法：

```
public  static Collection<File> listFiles(File directory,FilenameFilter filter,boolean recurse){
    Vector<File> files = new Vector<File>();
    File[] entries = directory.listFiles();
    if(entries!=null){
        for (File entry : entries){
            if (filter == null || filter.accept(directory, entry.getName())){
                    files.add(entry);
            }

            if (recurse && entry.isDirectory()){
                    files.addAll(listFiles(entry, filter, recurse));
            }
        }
    }
    return files;
} 
```

并像这样使用它：

```
 this.foundFiles=listFiles(new File(this.BaseDirectory), new FilenameFilter() {
            public boolean accept(File dir, String name) {
                boolean res=true;
                if(name.endsWith(".pdf")){
                    if(!dir.getPath().endsWith("done")){
                        if((workingFile!=null && (dir.getPath().equals(workingFile.getParent()) && name.equals(workingFile.getName())))){
                            res=false;
                        }else{
                            try {
                                ArrayList<String> AuthFolders = DB.getGroupAuthFoldersArray();
                                for(String folder:AuthFolders){
                                    if(dir.getPath().startsWith(BaseDirectory+File.separator+folder)){
                                        res=true;
                                        break;
                                    }else{
                                        res=false;
                                    }
                                }
                            } catch (SQLException ex) {
                                Logger.getLogger(scanner.class.getName()).log(Level.SEVERE, null, ex);
                                res=false;
                            } catch (InterruptedException ex) {
                                Logger.getLogger(scanner.class.getName()).log(Level.SEVERE, null, ex);
                                res=false;
                            }
                        }
                    }else{
                        res=false;
                    }
                }else{
                    res=false;
                }
                return res;
            }
        }, true); 
```

但这太慢了！我在目录中有大约 3000 个文件，这种方法需要 10-15 分钟（！！）才能找到它们。

我怎样才能快速做到这一点？
我正在考虑使用`org.apache.commons.io.FileUtils.listfiles`方法。有更快的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T10:12:09.797

在 Java 7 中使用[`Files.walkFileTree`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#walkFileTree%28java.nio.file.Path,%20java.util.Set,%20int,%20java.nio.file.FileVisitor%29)，这比`listFiles`使用流式传输要快。阅读[教程](http://docs.oracle.com/javase/tutorial/essential/io/walk.html)以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:43:42.820

```
} catch (SQLException ex) { 
```

这不属于旨在进行目录列表的类！

# blackberry-jde - 在黑莓应用程序中实现菜单时出错

> ID：10411589
> 
> 赞同：0
> 
> 时间：2012-05-02T10:05:08.863
> 
> 标签：blackberry-jde

我已经在我的应用程序中成功实现了菜单。但是我面临另一个问题，当我单击按钮菜单时，它会显示为上下文菜单。我不希望在单击按钮字段时出现该菜单。

在构造函数中

```
addMenuItem(_mnu_showresult);
addMenuItem(_mnu_quit); 
```

/*声明的菜单项*/

```
private MenuItem _mnu_showresult = new MenuItem(new StringProvider(
        "Show Result"), 110, 1) {
    public void run() {      
        Dialog.alert("You had scored ");
    }
};
private MenuItem _mnu_quit = new MenuItem(new StringProvider("Quit"), 110, 2) {
    public void run() {

    }
}; 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:41:20.120

您没有粘贴*`ButtonField`*. 您可能需要在其上添加样式位*`ButtonField.CONSUME_CLICK`*（*`ButtonField`*这会触发上下文菜单出现）。

使用类似以下内容来创建该按钮：

```
ButtonField myButton = new ButtonField("My Button", ButtonField.CONSUME_CLICK); 
```

# c++ - 如何在 Unix 上检测鼠标状态

> ID：10411593
> 
> 赞同：0
> 
> 时间：2012-05-02T10:05:22.323
> 
> 标签：c++, unix, mouse

目前正在开发某种动态加载库插件。该插件将由其他应用程序加载。编程语言是 C++。

我需要在运行时检测 Unix 上的鼠标按钮情况，例如 MacOSX 和 Linux。说明鼠标左键当前是否在应用程序上保持或释放。应用程序本身不提供该功能以允许库这样做。在 Windows 中，我使用鼠标钩子来捕获那个东西，但我找不到 Unix 系统的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:34:50.107

您还没有说主机应用程序使用什么方法与计算机的 GUI 交互。原始X11？像[GTK+](http://www.gtk.org/)（[Gnome](http://www.gnome.org/)应用程序等使用）或[Qt](http://qt.nokia.com/)（[KDE](http://www.kde.org/)应用程序等使用）这样的工具包？在 MacOS 的情况下，主机应用程序是使用本机 GUI 还是 X11？实际上，甚至不清楚您是否可以假设主机应用程序有任何 GUI！

如果宿主应用程序正在使用一个工具包并且您知道它是哪个工具包，那么您应该使用该工具包提供的任何工具来获取鼠标事件。

如果你不能确定宿主应用程序在为它的 GUI 做什么，或者即使它有一个，那么你总是可以绕过 X11 并直接访问鼠标，但是有一个很大的警告：你怎么知道你是否正在访问正确的鼠标？请注意，主机主机应用程序可能与远程 X11 显示器一起运行，或者它可能是通过 SSH 连接在某些远程计算机上运行的非 GUI 应用程序。鼠标是否连接到运行应用程序的计算机（如果有的话！）真的是您想要的鼠标吗？

如果您仍想继续使用这种方法，在 Linux 下您可以打开虚拟设备...或使用或`/dev/input/mice`打开特定鼠标等...从此设备读取数据将为您提供[PS/2 格式](http://www.computer-engineering.org/ps2mouse/)的数据。`/dev/input/mouse0``/dev/input/mouse1`

# android - 如何在多选列表视图中保持所选项目的状态

> ID：10411594
> 
> 赞同：0
> 
> 时间：2012-05-02T10:05:26.810
> 
> 标签：android, listview, android-widget

谁能告诉我如何使多选列表视图中的某些项目默认被选中。我希望在第一次显示列表视图时默认选择一些项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:09:21.463

我遇到了同样的挑战，我使用了 2 种肮脏的方法来快速修复

1.  保持在全局静态变量或 SQLite 中选择的列表项的 id
2.  加载相关活动时检查其是否为空。如果为空，则不执行任何其他操作，将列表中的文本加粗

您可以将这些用作最后的手段。希望其他人会帮助你更好的答案。

# android - 在服务器端构建 android .apk？我需要设置什么？

> ID：10411599
> 
> 赞同：3
> 
> 时间：2012-05-02T10:05:53.240
> 
> 标签：android, air, adobe, apk, server-side

我正在开展一个项目，该项目要求我让用户能够将一些数据输入到网络表单中，并且在提交数据时，将根据给定的信息生成一个 .apk 供他们下载。

我已经用 AS3 构建了 .apk 应用程序，使用 FlashDevelop 的 adobe air，我可以在我的本地计算机上构建 .apk。

我真的不知道从哪里开始？如果我想使用 php 构建这个 apk ......？

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:33:13.193

如果您拥有服务器，则可以按照此处的说明安装 SDK 和 Ant：

SDK： http: [//developer.android.com/sdk/installing.html](http://developer.android.com/sdk/installing.html)（第2步就是你想要的。）

蚂蚁：[http ://ant.apache.org/manual/install.html](http://ant.apache.org/manual/install.html)

然后按照此处的说明进行操作： [http ://www.ehow.com/how_8744401_compile-android-project-windows.html](http://www.ehow.com/how_8744401_compile-android-project-windows.html)

如果您不拥有服务器，请让管理员为您安装 SDK 和 ant。

安装完成后，您可以使用任何可用于执行 ehow 指令要求的 php 命令

这是基于 Windows 的安装，但我希望基于 linux/max 的解决方案类似

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:09:39.360

您需要在服务器上安装 android sdk 并从您的 php 脚本执行命令行构建命令。

# coldfusion - 如何在 Coldfusion MX 中使用 Apache Logger 或 Log4J

> ID：10411603
> 
> 赞同：0
> 
> 时间：2012-05-02T10:06:08.553
> 
> 标签：coldfusion

是否有任何可用的资源显示我如何在 ColdFusion 中使用日志记录功能？

或者 ColdFusion 中是否有可用的 Logger？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:56:34.263

我不确定你是否可以使用 Log4j，但你不试试 Logbox (http://wiki.coldbox.org/wiki/LogBox.cfm)。我曾尝试使用冷箱框架，但也可以在没有框架的情况下工作。

# python - 使用 NI-488.2 将 GPIB 转换为 USB

> ID：10411605
> 
> 赞同：2
> 
> 时间：2012-05-02T10:06:14.543
> 
> 标签：python, usb, driver, gpib

我需要使用国家仪器的 NI-488.2 将 GPIB 转换为 USB，并且我需要使用 python 创建一个带有 GUI 的软件。我公司用于测量的旧机器是普林斯顿应用研究公司的 273A 型恒电位仪/恒电流仪。我使用 Windows 7 和使用 wxpython 的 python 2.7。我需要使用python编程。我只需要发送简单的命令，例如 R 来运行机器。

连接：从测量机通过 GPIB 到 NI-488.2（将 GPIB 转换为 USB 的卡）从 NI-488.2 通过 USB 到 pc

问题是：

1.  如何向机器发送任何命令？据我所知，我需要将它发送给 NI-488.2 的驱动程序。这是对的吗？（如果正确，请参阅问题 2，如果不正确则跳至问题 3）

2.  如何使用 python 从我自己的代码发送到 NI-488.2 驱动程序？

3.  如何查看任何驱动程序的代码？但在我的情况下，NI-488.2 的驱动程序。（驱动可以在国仪官网免费下载，但需要注册）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T07:03:08.150

您需要安装 GPIB-USB 电缆的驱动程序，注册过程非常简单。对于注册，基本上你只需要留下你的电子邮件地址。

安装驱动程序后，您可以在其“帮助”中找到许多有用的信息。通常，您需要阅读设备的用户手册。这个想法是您应该使用Python`ctypes`与 GPIB-USB 接口`dll`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:24:08.050

安装必要的驱动程序，可能是 NI 488.2 和 NI Visa。然后使用pyvisa，一个围绕visa 的python 包装器，与设备通信。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T02:50:48.823

有一个名为[PyVISA](http://pyvisa.sourceforge.net/ "PyVISA")的库。您可以使用它来连接和发送（使用 write 命令）与设备进行通信。从国家仪器网站为您的设备安装驱动程序。

# java - java中的post_order_Iterative_Traversal 任何人都可以帮助我

> ID：10411607
> 
> 赞同：-1
> 
> 时间：2012-05-02T10:06:19.890
> 
> 标签：java

我想在 java 中做**post_order_Iterative_Traversal**。我写了这段代码然后有以下错误：

`java.lang.OutOfMemoryError: Java heap space`

请任何人帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:24:05.287

利用`java.util.ListIterator`

**示例**-

```
import java.util.*; 
class IteratorTest { 
public static void main(String args[]) { 
// create an array list 
ArrayList al = new ArrayList(); 
// add elements to the array list 
al.add("C"); 
al.add("A"); 
al.add("E"); 
al.add("B"); 
al.add("D"); 
al.add("F"); 
ListIterator litr = al.listIterator(); 
System.out.print("Post Order iteration: "); 
while(litr.hasPrevious()) {

    Object element = litr.previous(); 
    System.out.print(element + " ");

} 
System.out.println(); 
} 
} 
```

# c# - 带有 PNG 和自定义颜色的 WP7 瓷砖

> ID：10411614
> 
> 赞同：0
> 
> 时间：2012-05-02T10:06:35.917
> 
> 标签：c#, windows-phone-7, dynamic, png

是否有可能在 WP7 中添加动态平铺，我在中心获取带有我的徽标的 PNG 文件并为其添加背景颜色？

它应该如下所示：

![在此处输入图像描述](../Images/7023d1e2ae7c42454e08f7916f221486.png)

目前我像这样创建我的瓷砖：

```
private void addShortcut_Click(object sender, EventArgs e)
    {
        string Url = GlobalVariables.Uri;
        StandardTileData NewTileData = new StandardTileData
        {
            BackgroundImage = new Uri("img/red.jpg", UriKind.Relative),
            Title = "Energy "+GlobalVariables.Name,
            Count = 0,
            BackTitle = "Radion Energy",
            BackContent = "Hitmusic Only!",
            BackBackgroundImage = new Uri("img/test.jpg", UriKind.Relative)
        };
        try
        {
            // Create the Tile and pin it to Start. This will cause a navigation to Start and a deactivation of our application.
            ShellTile.Create(new Uri("/MainPage.xaml?stationName=" + stationName + "&tile=true&name=" + GlobalVariables.Name + "&url=" + Url, UriKind.Relative), NewTileData);
        }
        catch
        {
            MessageBox.Show("Channel-Tile exists already.");
        }
    } 
```

因此，目前背景始终与 Phonestyle 本身具有相同的颜色。（我真的不明白为什么，因为 red.jpg 实际上是一个红色方块。:) 目前我没有徽标，所以它只是 blanc。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:17:58.967

您确定您的图片设置为“内容”吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:21:32.817

我使用了 Ree7 Tile Toolkit，它允许您设置具有自定义背景颜色的瓷砖，源代码包括一个示例项目，它解释并演示了如何使用该工具包：-

[http://wp7tiletoolkit.codeplex.com/](http://wp7tiletoolkit.codeplex.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-12T13:50:28.280

```
private const string FLICKR_LIVE_TILE = "/Shared/ShellContent/flickr_live_tile.jpg";
private const string FLTile = "/Shared/ShellContent/FLTile.jpg"; 
```

准备好`WriteableBitmap`你想要的任何来源

```
IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication();
                if (myIsolatedStorage.FileExists(FLTile))
                {
                    myIsolatedStorage.DeleteFile(FLTile);
                }
                using (IsolatedStorageFileStream iso = new IsolatedStorageFileStream(FLTile, FileMode.OpenOrCreate, IsolatedStorageFile.GetUserStoreForApplication()))
                {
                    WriteableBitmap1 .SaveJpeg(iso, 768, 200, 0, 100);
                    iso.Close();
                }
                if (myIsolatedStorage.FileExists(FLICKR_LIVE_TILE))
                {
                    myIsolatedStorage.DeleteFile(FLICKR_LIVE_TILE);
                }
                using (
             IsolatedStorageFileStream isoFileStream = new IsolatedStorageFileStream(FLICKR_LIVE_TILE, FileMode.OpenOrCreate,
             IsolatedStorageFile.GetUserStoreForApplication()))
                {
                    WriteableBitmap2 .SaveJpeg(isoFileStream, 336, 200, 0, 100);
                    isoFileStream.Close();
                }

                var shellTileData = new FlipTileData
                {
                    BackgroundImage = new Uri("isostore:" + FLICKR_LIVE_TILE, UriKind.RelativeOrAbsolute),
                    //BackContent = "Connectivity Slab",
                    SmallBackgroundImage = new Uri("isostore:" + FLICKR_LIVE_TILE, UriKind.RelativeOrAbsolute),
                    WideBackgroundImage = new Uri("isostore:" + FLTile, UriKind.RelativeOrAbsolute),
                    WideBackBackgroundImage = new Uri("isostore:" + FLTile, UriKind.RelativeOrAbsolute),
                    BackBackgroundImage = new Uri("isostore:" + FLICKR_LIVE_TILE, UriKind.RelativeOrAbsolute),
                };
                var tile = ShellTile.ActiveTiles.First();
                tile.Update(shellTileData); 
```

它将有助于创建宽平铺图像和短平铺图像

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T10:36:37.270

如果它只显示一个 Square，那么您设置的图片 URI 不正确 :-)

编辑：图像也应该设置在“内容”上（已经提到过）

# regex - Grep 正则表达式不包含字符串

> ID：10411616
> 
> 赞同：246
> 
> 时间：2012-05-02T10:06:39.923
> 
> 标签：regex, grep

我正在传递一个正则表达式模式列表`grep`来检查系统日志文件。它们通常匹配 IP 地址和日志条目；

```
grep "1\.2\.3\.4.*Has exploded" syslog.log 
```

它只是一个模式列表，就像`"1\.2\.3\.4.*Has exploded"`我正在传递的部分一样，在一个循环中，所以我不能传递“-v”。

我很困惑试图与上述相反，并且不匹配具有特定 IP 地址和错误的行，因此“！1.2.3.4.*已爆炸”将匹配 1.2.3.4 以外的任何内容的系统日志行，告诉我它已经爆炸. 我**必须**能够包含一个不匹配的 IP。

我在 StackOverflow 上看到过各种类似的帖子。但是，他们使用我似乎无法使用的正则表达式模式`grep`。任何人都可以提供一个工作示例`grep`吗？

**更新：** 这发生在这样的脚本中；

```
patterns[1]="1\.2\.3\.4.*Has exploded"
patterns[2]="5\.6\.7\.8.*Has died"
patterns[3]="\!9\.10\.11\.12.*Has exploded"

for i in {1..3}
do
 grep "${patterns[$i]}" logfile.log
done 
```

* * *

## 回答 #1

> 赞同：467
> 
> 时间：2012-05-02T10:10:13.380

`grep`匹配，`grep -v`做相反的事情。如果您需要“匹配 A 但不匹配 B”，通常使用管道：

```
grep "${PATT}" file | grep -v "${NOTPATT}" 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-02T10:12:18.077

```
(?<!1\.2\.3\.4).*Has exploded 
```

您需要使用 -P 运行它以获得否定的lookbehind（Perl 正则表达式），因此命令是：

```
grep -P '(?<!1\.2\.3\.4).*Has exploded' test.log 
```

试试这个。如果它前面是 ，它使用否定的lookbehind 忽略该行`1.2.3.4`。希望有帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-05T13:55:14.233

```
patterns[1]="1\.2\.3\.4.*Has exploded"
patterns[2]="5\.6\.7\.8.*Has died"
patterns[3]="\!9\.10\.11\.12.*Has exploded"

for i in {1..3}
 do
grep "${patterns[$i]}" logfile.log
done 
```

应该是一样的

```
egrep "(1\.2\.3\.4.*Has exploded|5\.6\.7\.8.*Has died)" logfile.log | egrep -v "9\.10\.11\.12.*Has exploded" 
```

# objective-c - uiviewcontroller 中的 glpaint；发送到已释放实例的消息

> ID：10411617
> 
> 赞同：0
> 
> 时间：2012-05-02T10:06:41.327
> 
> 标签：objective-c, ios, xcode

我试图把 glpaint 放在 uiviewcontroller 中。在使用 glpaint 关闭视图控制器后，我遇到了一些奇怪的问题，uiview 控制器（可以选择启动 glpaint 视图控制器）被释放。但这是如何发生的。这对我来说似乎是一个谜。

![我认为整个视图控制器都被释放了](../Images/6ec68a1a27d1e7e3917960ee7651790f.png)

> -[CALayer setNeedsLayout]：消息发送到释放的实例 xxxxxxx

[下载在 uiview 控制器中实现的 glpaint](http://dl.dropbox.com/u/21607631/GLPaint.zip)

有人可以看看并告诉我们为什么会发生这种情况或如何防止它。提前致谢！

编辑：

```
painter *vpaint=[[[painter alloc] initWithNibName:@"painter" bundle:nil] autorelease];        
[self.navigationController pushViewController:vpaint animated:YES]; 
```

然后返回会导致该错误

```
[self.navigationController popViewControllerAnimated:YES]; 
```

**解决方案**（由于声誉低下，所以不允许我回答我自己的问题？！​​无论如何）：

我找到了！！！！！！！xib 文件是 UIWindow.PaintWindow 的子类。暂时将其设置为 UIView 作为默认值，它可以完美运行。我必须看看我应该在哪里实现手势识别。感谢@shahid 和@kai 的帮助：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:45:49.080

我认为您错误地关闭了视图控制器，根据 iPhone OS 的视图控制器编程指南，在关闭模式视图控制器时这是不正确的，您应该使用委托。因此，在呈现您的模态视图之前，请让自己成为委托人，然后从模态视图控制器调用委托人以将其解散。

参考[这个](https://stackoverflow.com/questions/1529632/present-and-dismiss-modal-view-controller)。

也删除这个

```
[self.drawingView release];
[self.windows release]; 
```

这来自painter.m

```
self.window=nil;
self.drawingView=nil; 
```

# php - Comboboxes (HTML, PHP)

> ID：10411618
> 
> 赞同：1
> 
> 时间：2012-05-02T10:06:46.103
> 
> 标签：php, combobox, forms

I need help regarding one combobox dependent on another combobox.

I have 2 combo fields in my form, one is of schools and other is of class. Every school has specific class and both are stored in databases. I have to pick the value of school from database (school table) and after selecting it 2nd combo box will show the classes related to the specific school.

After selecting these values I have to store them in database too.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:06:51.700

注意：我假设数据库配置是正确的并且表格因为您没有提供数据库详细信息。

表1：学校

## 字段类型详细信息

schoolid int(11) 主键
schoolname varchar(50)
detail varchar(50)

表2：类

## 字段类型详细信息

class_id int(11) 主键
classname varchar(50)
schoolid int(11)

在上面的 db 表中添加示例数据。将数据库配置设置为以下行

$sConn = mysql_connect("localhost","root","sajeda45")

localhost 是主机名 root 是 dbusername sajeda45 是 dbpassword imagedb 是 databasename

在下面的脚本中设置上面的数据库参数，你就会得到你想要的结果

```
<?php

        $sConn = mysql_connect("localhost","root","sajeda45")
        or die("Couldn't connect to database server");
        $dConn = mysql_select_db("imagedb", $sConn);

        function getSchollList()
        {
            $schoolList = array();

            $result = mysql_query("select schoolid,schoolname from school") or die("Couldn't school list");

            while($row=mysql_fetch_array($result))
            {
                    $id=$row['schoolid'];
                    $schoolList["".$id.""]  =$row['schoolname'];    
            }

            return $schoolList;
        }

        function getClassList($schoolId)
        {
            $classList = array();

            $result = mysql_query("select classname from class  where schoolid=$schoolId") or die("Couldn't class list");

            while($row=mysql_fetch_array($result))
            {
                    $classList[]    =$row['classname']; 
            }
            return  $classList;
        }
    ?>

<html>
<title>Test Example</title> 
<head>
    <script type="text/javascript">
            function redirectForClass(schoolName)
            {
                    window.location="stackoverflow1.php?school="+schoolName;
            }
    </script>       
</head>
<body>
    <?php
        $schoolList = getSchollList();
        $schoolId = isset($_GET['school']) ? $_GET['school']:0;
        $classList =  getClassList($schoolId); 
    ?>
    <form method="post" action="handler.php">

            School:
            <select name="school" onchange="redirectForClass(this.value);">
                <option value="0">--select school--</option>
                <?php
                    foreach($schoolList as $school_Id => $school){
                ?>      
                    <option value="<?php echo $school_Id; ?>" <?php if($school_Id==$schoolId) echo "SELECTED"; ?>><?php echo $school; ?></option>
                <?php   
                }
                ?>  
                </select>
                <br/><br/>
                    Class:
            <select name="class" >
                <option value="">--select Class--</option>
                <?php
                    foreach($classList as $class){
                ?>      
                    <option value="<?php echo $class; ?>"><?php echo $class; ?></option>
                <?php   
                }
                ?>  
                </select>
                <br/><br/>
                <input type="submit" value="submit" />
    </form> 

</body>
</html> 
<?php

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:17:26.680

有两种方法可以解决这个问题。

1.  使用 javascript：

    1.  您可以使用 Javascript + Ajax 动态获取第二个框的数据源，创建一个数组并设置组合框的项目。
    2.  您可以在数组中加载所需的选项（创建页面时使用 php）

    在这两种方式中，第一个组合框中的每个选项都有一个数组（两个维度数组 - 第一个索引用于第一个组合框中的选择，第二个是将添加到第二个组合框的项目的索引）。然后你使用

    document.getElementById("DropDownList").options.add(opt);

当第一个的值发生变化时，在第二个组合框中添加项目。

2\. 每次更改第一个组合框的值时，您可以为表单调用 submit()，然后使用 php 填充第二个组合框（取决于第一个组合框的值）。

# c#-4.0 - ListView.SelectedItems 显示 0 个选中

> ID：10411620
> 
> 赞同：-1
> 
> 时间：2012-05-02T10:06:52.863
> 
> 标签：c#-4.0

好的..让我以更好的方式解释我的要求很简单，因为它出现在我的计算机资源管理器中实现了Tree节点控件和Listview控件。我需要的是我将在列表视图中选择一个节点和一个对象然后我单击另一种形式的按钮 Listview.Selecteditems 显示 0..如何克服？我觉得它显示 0 bcoz 列表视图正在失去焦点 Thnx

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:41:43.697

假设 Form1 和 Form2 是两个类。然后在 Form1 中创建一个 Form2 的对象。

在按钮的点击事件中试试这个。

```
//Open the Form2
//Make the Label/TextBox where you want to display the listbox value visible
_Form2Object.LabelName.Text = ListBox1.SelectedValue 
```

希望这可以帮助。

尝试提供更好的解释或代码片段，以便更好地为您服务。

# ruby-on-rails - 在没有设计的情况下使用 OmniAuth 时采用附加参数？

> ID：10411625
> 
> 赞同：0
> 
> 时间：2012-05-02T10:07:08.253
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, omniauth

嗨，我在我的应用程序中使用了omniauth。我在没有使用设计的情况下创建了应用程序。所以我手动编写了所有加密方法。我正在尝试将 imniauth 与我的应用程序集成，但我遇到了很多问题。我做了一个身份验证控制器：

```
class AuthenticationsController < ApplicationController
  def index
    @authentications = current_user.authentications if current_user
  end

  def create
    omniauth = request.env["omniauth.auth"]
    authentication= Authentication.find_by_provider_and_uid(omniauth['provider'],omniauth['uid'])
    if authentication
      flash[:notice]= "Signed in with " + omniauth['provider'] + " Successfully"
      sign_in(authentication.user)
      redirect_back_or authentication.user
    elsif current_user
      current_user.authentications.create!(:provider => omniauth['provider'],:uid => omniauth['uid'])
      flash[:notice]="authentication successfull"
      redirect_to authentications_url
    else

   authenticate= Authentication.create!(:provider => omniauth['provider'], :uid => omniauth['uid'])
   flash[:notice] = "You still need to fill up the following"
   # This is where I have doubt as to how should I proceed. Should I first create authentication for omniauth and then redirect or just send everything together and then create in sign up?
   # session[:omniauth] = omniauth.except('extra')
   #  redirect_to signup_path(omniauth)

 end
end

  def destroy
    @authentication = current_user.authentications.find(params[:id])
    @authentication.destroy
    flash[:notice] = "Successfully destroyed authentication."
    redirect_to authentications_url
  end
end 
```

我的用户控制器如下：

```
class UsersController < ApplicationController
  before_filter :authenticate, :except => [:show, :new, :create]
  before_filter :correct_user, :only => [:edit, :update]
  before_filter :admin_user,   :only => :destroy

# Id ont know what to do with omniauth here! :( 
  def new(omniauth)
    @user  = User.new
    @title = "Sign up"
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      redirect_to @user, :flash => { :success => "Welcome to the World Student Alliance!" }
    else
      @title = "Sign up"
      render 'new'
    end
  end

  def edit
    @title = "Edit user"
  end

  def update
    if @user.update_attributes(params[:user])
      redirect_to @user, :flash => { :success => "Profile updated." }
    else
      @title = "Edit user"
      render 'edit'
    end
  end

  def destroy
    @user.destroy
    redirect_to users_path, :flash => { :success => "User destroyed." }
  end

  private

    def correct_user
      @user = User.find(params[:id])
      redirect_to(root_path) unless current_user?(@user)
    end

    def admin_user
      @user = User.find(params[:id])
      redirect_to(root_path) if !current_user.admin? || current_user?(@user)
    end
end 
```

和会话控制器如下：

```
class SessionsController < ApplicationController
  skip_before_filter :check_sign_in, :only => [:new, :create]
  def new
    @title = "Sign in"
  end

  def create
    user = User.authenticate(params[:session][:email],
                             params[:session][:password])
    if user.nil?
      flash.now[:error] = "Invalid email/password combination."
      @title = "Sign in"
      render 'new'
    else
      sign_in user
      redirect_back_or user
    end
  end

  def destroy
    sign_out
    redirect_to root_path
  end
end 
```

每个用户有多个认证，每个认证属于一个用户

```
class Authentication < ActiveRecord::Base
  belongs_to :user
end

class User < ActiveRecord::Base
  has_many :authentications
....... 
```

以下是我考虑的场景：

1.  用户已登录并想与他的推特建立联系。（完整无误）
2.  用户已经是注册用户，每次都想用twitter登录（完成无误）

3.  用户未注册并希望使用 twitter 进行身份验证。如果它的基本身份验证就完成了，但我需要让用户输入一些细节，如国家、性别、部门等。这就是一切都出错的地方。我可以创建身份验证并将他转义到登录表单，但是当用户从 fb 或 twitter 登录时，他不必输入密码字段。这是我的问题。任何人都可以让我知道我应该做些什么来克服这个错误。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:54:34.133

我在最近的一个应用程序中做了类似的事情——使用 Omniauth 进行身份验证并允许每个用户进行多次身份验证。对于您的情况3。）我首先创建用户和身份验证；然后将他们发送到特定表格（不是注册表单）以填写其个人资料的其余部分。

此“额外”表单仅在必填字段不完整时才起作用，否则它们将被重定向到用户显示页面。似乎对我很有效。

编辑：用 Omniauth 身份策略替换您当前的用户名/密码 gubbins：[https](https://github.com/intridea/omniauth-identity) ://github.com/intridea/omniauth-identity 。这样，您的所有身份验证都由 Omniauth 处理。相信我，如果你拿出你手工制作的密码验证码，换成 Omniauth 身份，你的生活会更简单。

为免生疑问，同时拥有 Twitter 和 Identity 策略意味着您可以让您的用户选择他们如何进行身份验证。他们可以使用 Twitter 或用户名/密码进行身份验证。两者都完成了相同的工作，但是，如果他们使用 Twitter，那么您将永远看不到密码信息（这很好）。

# android - 捕获android设备屏幕的代码？

> ID：10411630
> 
> 赞同：0
> 
> 时间：2012-05-02T10:07:49.377
> 
> 标签：android

> **可能重复：**
> [如何以编程方式在 Android 上截取屏幕截图？](https://stackoverflow.com/questions/2661536/how-to-programatically-take-a-screenshot-on-android)

我想在应用程序运行时捕获当前屏幕视图。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:10:04.797

```
View v1 = view.getRootView();
v1.setDrawingCacheEnabled(true);
Bitmap bm = v1.getDrawingCache(); 
```

这里的视图意味着你的布局视图。

# jakarta-ee - 有没有像 Excelsior JET 这样的免费工具？

> ID：10411637
> 
> 赞同：3
> 
> 时间：2012-05-02T10:08:20.573
> 
> 标签：jakarta-ee, obfuscation

我尝试使用 Excelsior 作为混淆的替代方法，我对结果非常满意，但我仍然不确定我工作的公司是否会对购买产品感兴趣，所以我想知道是否有类似的工具可以使用对于我的 Java EE Web 应用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T02:44:06.967

免责声明：我为制造 Excelsior JET 的公司工作。

作为我关于该主题的文章的一部分，我维护了一个[Java 代码保护工具列表。](https://www.excelsior-usa.com/articles/java-obfuscators.html#products)

据我所知，唯一的其他提前 Java 到本机代码的编译器曾经是 GCJ（GNU Compiler for Java），现在已经成为[历史](http://tromey.com/blog/?p=911)。无论如何，我不认为它能够编译 Java EE 应用程序。

[GuardIT for Java](http://www.arxan.com/software-protection-products/java-GuardIt/index.php)以特定的 Java Web 应用程序为目标。它不进行本机编译，但具有其他有趣的功能，例如篡改检测。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-24T09:36:03.257

试试 JWrapper。不，它不仅仅是安装打包程序。此外，它们似乎在其免费版本中允许更大份额的功能，您可以立即下载这些功能，甚至可以在商业上使用。

# lotus-notes - 如何使用 LotusScript 创建带有包含扩展字符（带重音符号）的附件的 MIME 邮件

> ID：10411638
> 
> 赞同：1
> 
> 时间：2012-05-02T10:08:21.563
> 
> 标签：lotus-notes, mime, lotus, lotusscript

在 LotusScript 代理中，我使用 MIME 类在 MIME 中创建了一个多部分邮件。它工作正常，邮件发送正确。

只有一个大问题：名称中带有重音字符的文件无法正确传输。内容正确，但名称不正确。我已经尝试了 100 种方法，但要么不可能，要么我做错了。

这是（部分）我的代码：

```
Set Me.mc = Me.mr.createChildEntity()
Set Me.mh = Me.mc.CreateHeader("Content-Disposition")
Call Me.mh.SetHeaderVal(disposition + {; filename="} & attName & {";charset="iso-8859-1"} )
Set Me.mh = Me.mc.CreateHeader("Content-ID")
Call Me.mh.SetHeaderVal( |<| & attName & |>| )
Set stream = Me.session.CreateStream
If stream.Open(attFile) Then
    Call Me.mc.SetContentFromBytes(stream, strContentType & {; charset="iso-8859-1"; name="} & attName & {"}, ENC_IDENTITY_BINARY)
    Call stream.Close
End If 
```

如果我在 Notes 中手动创建邮件并发送相同的文件，它可以工作，但文件名是编码的。这个怎么拔？？

**更新：** 我添加了以下函数来编码 attName：

```
Function URLEncode(s As String, cset As String) As String
    Dim v As Variant

    v= Evaluate(|@ReplaceSubstring(@URLEncode("| + cset + |";"| + s + |"); "%"; "=")|)
    URLEncode= "=?" + cset + "?Q?" + v(0) + "?="
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:09:07.353

我找不到任何方法来编码参数。看起来你必须自己编码参数。

```
@URLEncode( encodingFormat ; token ) 
```

Should encode the string and then yo can add the =?ISO-8859-1?Q? and ?= to the string.

Or you can use `encodeText` from the `javax.mail.internet` package end wrap that in LS2J

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:55:46.990

I've never embedded files, just images, but it sounds like using @URLEncode may be worth trying.

```
Dim attNameEncoded As String
attNameEncoded = Evaluate({@URLEncode("iso-8859-1"; "} + attName + {")})(0)
Call Me.mc.SetContentFromBytes(stream, strContentType & {; charset="iso-8859-1"; name="} & attNameEncoded & {"}, ENC_IDENTITY_BINARY) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:50:49.427

You have to encode the file name as described here:

The filename may be encoded as defined by [RFC 2231](https://www.rfc-editor.org/rfc/rfc2231).

# ruby-on-rails - 要实现的 AM PM 功能

> ID：10411639
> 
> 赞同：0
> 
> 时间：2012-05-02T10:08:23.350
> 
> 标签：ruby-on-rails

在我的应用程序中，我希望实现 AM 和 PM 功能。用户不应该自己输入。我有一个文本框，用户应该只输入数字我还想添加时间选择器。

```
 %li
    %label{:for => "start_time"}Start_time<em>*</em>
    = f.text_field :start_time, :required => "required", :autofocus => true

  %li
    %label{:for => "end_time"}End_time<em>*</em>
    = f.text_field :end_time, :required => "required", :autofocus => true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:23:40.147

实际上，您可以使用`time_select`方法并执行以下操作：

```
time_select("event", "start_time", :prompt => {:hour => 'Choose hour', :minute => 'Choose minute', :second => 'Choose seconds'})

time_select("event", "end_time", :prompt => {:hour => 'Choose hour', :minute => 'Choose minute', :second => 'Choose seconds'}) 
```

希望能帮助到你！

# java - Maven m2 存储库：使其成为 OBR

> ID：10411640
> 
> 赞同：0
> 
> 时间：2012-05-02T10:08:31.027
> 
> 标签：java, maven, osgi, bnd, obr

我的 Maven 存储库有问题，我正在尝试让 Eclipse 的 BNDTools 插件与我的本地 m2 存储库一起使用。但它声称我的 m2 存储库不是 OBR 存储库，因此不能用于 OBR 解析。

显然，Maven-Bundle-Plugin 应该生成 OBR 数据，但我们（团队）注意到 repository.xml 没有更新存储库中的所有文件，因此我们尝试了使用 apache karaf Cave 的解决方法来重建XML 文件，但我担心这是我出错的地方。

我意识到这似乎是一个不合逻辑的解决方法，但我向您保证，在我们拥有的设置中，这似乎是最简单的前进方式。

所以我的问题是：我怎样才能用所有 OBR 数据重建我的 repository.xml 文件。否则，如何将我的 m2 存储库设置为符合 OBR 的存储库。

提前谢谢各位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T00:57:05.963

maven-bundle-plugin 有一个“索引”目标，可以重建您的 repository.xml 文件。

# c# - IE 插件（未验证）

> ID：10411643
> 
> 赞同：0
> 
> 时间：2012-05-02T10:09:00.460
> 
> 标签：c#, internet-explorer, plugins, activex

我为 Internet Explorer（ActiveX 对象）创建了一个插件并成功安装它，但在浏览器中它出现在名称前面（未验证）。

以下是注册表值：

```
string buttonPath = @"SOFTWARE\Microsoft\Internet Explorer\Extensions\" + t.GUID.ToString("B");

                RegistryKey But= Registry.LocalMachine.CreateSubKey(buttonPath);
                But.SetValue("ButtonText", "****");
                But.SetValue("Default Visible", "Yes");
                But.SetValue("Icon", "C:\\BB.ico");
                But.SetValue("HotIcon", "C:\\bB.ico");
                But.SetValue("CLSID", "{1FBA04EE-3024-11D2-8F1F-0000F87ABD16}");
                But.SetValue("ClsidExtension", "{" + Guid + "}");
But.Close(); 
```

为什么会发生，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:14:49.340

你应该先签名。 1.get a cert 2.sign it 3.publish

# java - 如何知道手机登录还是常规登录？

> ID：10411645
> 
> 赞同：1
> 
> 时间：2012-05-02T10:09:02.003
> 
> 标签：java, gwt, user-agent

如何知道用户是通过手机还是 PC 登录到我的应用程序？我们如何跟踪他？Java 中有什么机制可以找出正在使用哪个设备登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:02:40.303

可以使用简单的 JNSI 来获取它，例如。

```
 private native String getUserAgent() /*-{
        return navigator.userAgent.toLowerCase();
    }-*/; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T07:34:53.073

我使用java代码来获取userAgent：

```
private String UserAgent = Navigator.getUserAgent() 
```

# css - 使用外部 XSL 样式表呈现本地下载的 XML 文件的后备策略

> ID：10411647
> 
> 赞同：0
> 
> 时间：2012-05-02T10:09:03.253
> 
> 标签：css, xml, firefox, xslt, cross-domain

在我们的内部合作中，我们交换 XML 文件和有关我们实验的状态信息。这些 XML 文件的来源是一个中心网站，我们希望在该网站上使用 XSL 样式表呈现这些文件。当协作者将 XML 文件下载到她的本地计算机并尝试在 Firefox（或看起来不是 Safari 的其他任何东西）中打开该文件时，由于跨域冲突，浏览器拒绝加载现在的外部 XSL 文件。这种行为是可以生存的，问题是许多浏览器不显示原始 XML 会有所帮助，而是显示错误：

```
Error loading stylesheet: An unknown error has occurred
(805303f4) http://user.web.cern.ch/user/grl_xslt/grl.xsl 
```

有没有办法告诉浏览器，如果 XSL 文件不可用，显示原始 XML 或应用另一个基于 CSS 的样式表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:20:22.947

您可以考虑配置您的服务器以允许访问，例如当我加载包含内容的本地文件时

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="http://home.arcor.de/martin.honnen/cdtest/test2012050101.xsl"?>
<root>
  <foo>
    <bar>test</bar>
  </foo>
</root> 
```

对于 Firefox 12，它应用远程样式表，因为该目录的服务器配置为允许使用 HTTP 标头进行跨源访问`Access-Control-Allow-Origin "*"`。[https://developer.mozilla.org/en/HTTP_access_control](https://developer.mozilla.org/en/HTTP_access_control)

但是请注意，我使用 Opera 得到了不同的结果，它显示文档树，说明没有找到关联的样式表。

Chrome 拒绝访问外部样式表是不安全的。

# android - 如何以编程方式关闭 Android 手机？

> ID：10411650
> 
> 赞同：7
> 
> 时间：2012-05-02T10:09:19.990
> 
> 标签：android

是否可以以编程方式关闭移动设备。那就是不使用 su 命令..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T19:28:30.030

这是可能的，但您需要`Rooted`具有访问权限的 Android 设备`Superuser`。除非您的应用使用`System Firmware Key`. 尝试使用以下代码：

**关闭：**

```
try {
    Process proc = Runtime.getRuntime()
                    .exec(new String[]{ "su", "-c", "reboot -p" });
    proc.waitFor();
} catch (Exception ex) {
    ex.printStackTrace();
} 
```

**重启：**

相同的代码，只需使用`"reboot"`而不是`"reboot -p"`.

*[另一方面：我在某处读到这些命令不适用于 Stock HTC ROM，但尚未确认我自己]*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T10:11:53.237

您可以使用 PowerManager 使其重新启动（这并不能保证它会重新启动 - 操作系统可能会取消它）：

[http://developer.android.com/reference/android/os/PowerManager.html#reboot(java.lang.String](http://developer.android.com/reference/android/os/PowerManager.html#reboot(java.lang.String) )

它需要 REBOOT 权限：

[http://developer.android.com/reference/android/Manifest.permission.html#REBOOT](http://developer.android.com/reference/android/Manifest.permission.html#REBOOT)

您是否还可以在尝试启用/禁用键盘保护时检查您的 logcat，并发布其中的内容？

您无法从普通的 SDK 应用程序中执行此操作。只有使用系统固件签名密钥签名的应用程序才能执行此操作

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T10:21:18.850

这是我用来执行任何系统命令的代码。

```
void shutdown_sys()
{
    Process chperm;
    try {
        chperm=Runtime.getRuntime().exec("su");
          DataOutputStream os = 
              new DataOutputStream(chperm.getOutputStream());

              os.writeBytes("shutdown\n");
              os.flush();

              chperm.waitFor();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

从您的 android 应用程序调用此函数。如果 su 在您的系统中正常运行，它将起作用。如果它不起作用，请告诉我。我没有准备好测试的 Android 基础。但同样适用于重启。所以 shutdown 也是一个 linux shell 命令，我认为它也将在 Android 中出现.. 一切顺利

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-19T12:01:55.497

输入 root shell 命令后，**svc power shutdown**在 android 7.1 中对我有用

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-02T10:14:08.027

我看不出与您的标题和正文中的代码段有任何相似之处。该片段与用于锁定和解锁键盘的 KeyGuardManager 相关。

为了关闭您的手机，您需要使用 PowerManager 或 SU 命令。（在有根设备上。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-28T17:48:45.743

如果您的设备已植根，那么您可以尝试以下解决方案

**关闭：**

```
try {
    Process proc = Runtime.getRuntime()
                    .exec(new String[]{ "su", "-c", "reboot -p" });
    proc.waitFor();
} catch (Exception ex) {
    ex.printStackTrace();
} 
```

**重新开始：**

相同的代码，只需使用`"reboot"`而不是`"reboot -p"`.

# selenium - 使用 selenium 将外部函数包含到 phpunittest 中

> ID：10411656
> 
> 赞同：0
> 
> 时间：2012-05-02T10:09:51.780
> 
> 标签：selenium, include, phpunit

嗨伙计们

我正在尝试将 php 文件中的函数包含到我的 phpunittest 中。

当我不包括它时，它工作正常。我已经尝试了一些不同的解决方案，我在谷歌搜索时发现......

没有错误消息，甚至没有开始运行测试。

我想要这样的东西：

这应该是 mappingfunction.php 中包含的函数

```
<?php
  public function mapping(string catname)
  {
    echo ($catname);

  } ?> 
```

这应该是 PhpUnit 测试：

```
<?php

require_once '/mappingfunction.php' ;

class Example extends PHPUnit_Extensions_SeleniumTestCase
{
  protected function setUp()
  {
    $this->setBrowser("firefox");
    $this->setBrowserUrl("http://www.google.com");
    $this->setHost("localhost");
    $this->setPort(4444);
  }

  public function testMyTestCase()
  {

    mapping('blabla');

  }
}  ?> 
```

为什么它不起作用？我能做些什么呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:47:34.237

不带斜线的作品:)

```
require_once 'mappingfunction.php' ; 
```

# c# - 如何在 C# 中使用 XAML 和 WPF 在 MVVM 环境中将视图绑定到 Viewmodel

> ID：10411657
> 
> 赞同：2
> 
> 时间：2012-05-02T10:09:58.253
> 
> 标签：c#, wpf, xaml, mvvm

如果我想将视图绑定到视图模型，我将以下内容添加到我的 XAML 代码的资源中：

```
<Window.Resources>
    <DataTemplate DataType="{x:Type MyViewModel}" >
        <views:MyView />
    </DataTemplate>
</Window.Resources> 
```

是否有可能在 C#-Code 中将 (viewmodel,view)-resource-entry 添加到我的资源字典中？

以下两行创建密钥并将其添加到字典中：

```
DataTemplateKey key = new DataTemplateKey(typeof(MyViewModel));
View.WindowName.Resources.Add(key, value); 
```

但是我怎样才能从`MyView`which must have type 中创建值`System.Windows.Baml2006.KeyRecord`呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:55:50.957

[这](https://stackoverflow.com/questions/248362/how-do-i-build-a-datatemplate-in-c-sharp-code)是一个关于如何使用 c# 代码创建 datatepmlate 的示例。

ps：您的问题标题应该类似于如何使用 c# 代码创建数据模板。顺便说一句，这与 mvvm 无关。甚至更多这个代码当然不应该进入视图模型；）

编辑：

```
DataTemplate temp = new DataTemplate();
temp.DataType = typeof (MyViewModel);

FrameworkElementFactory fac = new FrameworkElementFactory(typeof(MyView));

temp.VisualTree = fac;

View.WindowName.Resources.Add(new DataTemplateKey(typeof(MyViewModel)), temp ); 
```

在 xaml 中它更容易:)

# .htaccess - 以“web_”开头的所有目录的 403 禁止错误

> ID：10411659
> 
> 赞同：0
> 
> 时间：2012-05-02T10:10:06.210
> 
> 标签：.htaccess

我想禁用所有目录的目录浏览。我设法做到了：
`Options -Indexes`在我的 .htaccess 文件中。

但是，我有属于插件域的目录，因此每当有人尝试访问这些目录时，它会将其重定向到该页面的索引文件，因此它不会显示 403 禁止错误。

如何为那些以“web_”开头的插件域目录显示 403 禁止错误？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:19:59.543

据我了解，“插件域”是指子域，即像这样的文件夹`/sub_a`应该可以访问`sub_a.example.org`，但如果访问它应该显示 403 错误`example.org/sub_a`。

如果是这种情况，有很多选择。

例如，您可以将 .htaccess 文件添加到这些文件夹中，其中访问 via`example.org/sub_a`被重定向到`sub_a.example.org`，而不仅仅是显示 403。

或者您可以使用@Salman A 的答案并使用[LocationMatch](http://httpd.apache.org/docs/2.0/en/mod/core.html#locationmatch)而不是 DirectoryMatch，这只会在文件夹用作 URL 的一部分时触发。

或者您也可以修改您的索引文件（例如，如果它是一个 php 脚本）以返回 403 标头、重定向或做一些完全不同的事情。

# css - -moz-box-align 的问题：居中

> ID：10411663
> 
> 赞同：4
> 
> 时间：2012-05-02T10:10:20.173
> 
> 标签：css, vertical-alignment, centering, alignment

我在一个框的中间对齐段落的文本（在顶部和底部之间居中），而文本向右对齐。这可以通过新的**display: box**和其他一些 CSS3 属性来实现。

有人知道为什么**-moz-box-align: center**不像 -webkit 那样工作吗？这个例子在 Chrome 中看起来像预期的那样，但在 Firefox 中却没有：http: [//jsfiddle.net/GBrRK/7/](http://jsfiddle.net/GBrRK/7/) 任何想法都值得赞赏。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:22:40.200

我相信我找到了您的解决方案。删除“浮动：左；”。[http://jsfiddle.net/GBrRK/39/](http://jsfiddle.net/GBrRK/39/)

这是一些不寻常的行为。

# git - Git推送失败

> ID：10411666
> 
> 赞同：0
> 
> 时间：2012-05-02T10:10:42.480
> 
> 标签：git, push, commit, pull

我对 git 真的很陌生。我们是一些在一个项目上工作的人。我在一周前第一次拉了 git。然后从那以后进行了许多修改。然后我尝试提交并推送一些修改，这是我收到的消息：

> 错误：未能将一些参考推送到 'ssh://forumdesy@ftp.forumdesthinktanks.fr/homez.353/forumdesy/sources'
> 为了防止您丢失历史记录，非快进更新被拒绝
> 合并远程更改（例如'git pull') 在再次推动之前。

我拉了，这是消息：

> ...（自动合并和冲突列表和）...
> 自动合并失败；修复冲突，然后提交结果。

我该如何解决？

最好的，纽本，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:15:35.047

[如何修复 Git 中的合并冲突](https://stackoverflow.com/questions/161813/how-do-i-fix-merge-conflicts-in-git)？，但是这是简短的答案：

如果您使用带有 eGit 的 IDE（例如 Eclipse），您应该会在有冲突的文件旁边看到一些红色标记。或者，当您执行 git pull 时，它应该准确说明哪些文件存在冲突。如果您不再拥有该列表，您应该能够通过 git status 看到该列表。

编辑这些文件：你会看到 <<<<< 标记，它们的版本和你的版本有冲突，git 无法自动合并更改。编辑文件以处理冲突，删除 <<<<< 标记，在本地测试您的代码，然后使用 git add 为您已解决的每个文件添加回文件。然后再次提交并推送。

# java - 如何将字符串中的负值转换为双精度

> ID：10411668
> 
> 赞同：2
> 
> 时间：2012-05-02T10:10:54.580
> 
> 标签：java, android

我需要从包含正值和负值的文件（.csv）中读取值。在将字符串转换为整数时出现错误。

```
 Scanner sc = new Scanner(getAssets().open("Book1.csv")).useDelimiter(",");
    int i = 0;
    while (sc.hasNext()) {
        String str  = sc.next();
        data[i] = new GraphViewData(i, Integer.parseInt(str));
        i++;
    } 
```

下面是我的日志：

```
05-02 04:05:55.119: E/AndroidRuntime(3003): ' as integer
05-02 04:05:55.119: E/AndroidRuntime(3003):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
05-02 04:05:55.119: E/AndroidRuntime(3003):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
05-02 04:05:55.119: E/AndroidRuntime(3003):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-02 04:05:55.119: E/AndroidRuntime(3003):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
05-02 04:05:55.119: E/AndroidRuntime(3003):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-02 04:05:55.119: E/AndroidRuntime(3003):     at android.os.Looper.loop(Looper.java:123)
05-02 04:05:55.119: E/AndroidRuntime(3003):     at android.app.ActivityThread.main(ActivityThread.java:3683)
05-02 04:05:55.119: E/AndroidRuntime(3003):     at java.lang.reflect.Method.invokeNative(Native Method)
05-02 04:05:55.119: E/AndroidRuntime(3003):     at java.lang.reflect.Method.invoke(Method.java:507)
05-02 04:05:55.119: E/AndroidRuntime(3003):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-02 04:05:55.119: E/AndroidRuntime(3003):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-02 04:05:55.119: E/AndroidRuntime(3003):     at dalvik.system.NativeStart.main(Native Method)
05-02 04:05:55.119: E/AndroidRuntime(3003): Caused by: java.lang.NumberFormatException: unable to parse '893 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:21:11.257

要将字符串中的负值转换为 Integer，您可以使用 Integer.parseInt，如代码中所示。

我认为您看到的错误与减号无关 - 可以传递以 ASCII 减号开头的字符串（请参阅[http://docs.oracle.com/javase/1.4.2/docs /api/java/lang/Integer.html#parseInt(java.lang.String](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#parseInt(java.lang.String) ))

顺便说一句-您是要转换为整数还是双精度数？您的问题标题提到 Double （Double.parseDouble 也接受该符号）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-18T14:33:11.630

你可以这样

```
String negNum = "-743.347";
Double num = Double.valueOf(negNum);
System.out.println("Negative number: " + num); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T10:23:38.960

`Integer.parseInt`应该适用于负数。但是，请注意，您可以将负数写成如下`- 3`而不是`-3`. 多余的空间会导致解析失败。您需要确保您实际上是在尝试解析实际数字，而其中没有任何其他字符串。

您可以使用类似`Integer.parseInt(str.replaceAll("[^\\d-]+", ""));`的方法来删除所有非数字数据。

编辑：根据您的例外，您的字符串中似乎有一个额外的*`*，这导致转换失败。请确保在尝试将字符串解析为数字时只有数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T10:15:16.400

你可以用这个...

```
Math.abs(x) 
```

# java - 在 tomcat 应用程序中更改我的应用程序的 web.xml 的位置

> ID：10411670
> 
> 赞同：0
> 
> 时间：2012-05-02T10:10:59.573
> 
> 标签：java, tomcat

我想更改 tomcat Web 应用程序的 web.xml 文件的位置。

假设从 WEB-INF/web.xml 到 web/WEB-INF/web.xml。

我需要在上下文中进行哪些更改？

我尝试制作我的项目的上下文文件，然后更新标签。然后，它也不起作用

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T11:15:00.423

正如评论中所说，

web.xml 的位置是一个 servlet 标准，**必须**是`WEB-INF/web.xml`

您无法在任何应用服务器上更改此设置，我们想知道您想要什么原因？

一些不同的文档供您参考：

[树脂](http://www.caucho.com/resin-3.0/config/webapp.xtp)

> WEB-INF/web.xml 包含一个顶级 web-app 元素。它是用于定义诸如 servlet 映射和安全角色之类的 Servlet 标准位置。

[谷歌应用引擎](https://developers.google.com/appengine/docs/java/config/webxml)

> Java Web 应用程序使用部署描述符文件来确定 URL 如何映射到 servlet、哪些 URL 需要身份验证以及其他信息。该文件名为 web.xml，位于应用程序的 WAR 中的 WEB-INF/ 目录下。web.xml 是 Web 应用程序的 servlet 标准的一部分。

甚至[维基百科！](http://en.wikipedia.org/wiki/Deployment_descriptor)

> 对于 Web 应用程序，部署描述符必须称为 web.xml，并且必须位于 Web 应用程序根目录的 WEB-INF 目录中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-22T10:03:15.233

忽略不这样做的原因......

如果您想使用替代的 Web 描述符，可能是因为 2 个 Web 应用程序具有公共代码库但公开了不同的 servlet 或在 Context 上使用 setAltDDName 的任何内容。

例如

```
<Context docBase="webappname" altDDName="webapps/webappname/WEB-INF/web-alternative.xml"> 
```

# java - 获取 applicationContext.xml 文件中配置的所有数据源？

> ID：10411674
> 
> 赞同：0
> 
> 时间：2012-05-02T10:11:10.727
> 
> 标签：java, spring

我正在使用弹簧/休眠。我在 applicationContext.xml 文件中配置了 5 个数据源。所有数据源都是 com.mchange.v2.c3p0.ComboPooledDataSource 类型，但 id 不同。当我有应用程序上下文时，如何获取所有配置的数据源。我得到的应用程序上下文如下：

```
WebApplicationContext context = WebApplicationContextUtils.getRequiredWebApplicationContext(getServletContext()); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:17:55.577

您可以获得给定类型的所有bean，如下所示：

```
Map<String, DataSource> dataSources = context.getBeansOfType(DataSource.class); 
```

这里的值`Map`是 bean 实例，键是它们的 id。

或者，您可以将给定类型的 bean 集合作为依赖项注入另一个 bean，请参阅[3.9.2 @Autowired 和 @Inject](http://3.9.2%20@Autowired%20and%20@Inject)。

# ios - IOS中如何区分GRPS和3G？

> ID：10411676
> 
> 赞同：1
> 
> 时间：2012-05-02T10:11:17.540
> 
> 标签：ios, networking, reachability

使用可达性，我知道当前网络是通过 WIFI 还是 WWAN 连接的。WWAN 包括 GPRS 和 3G。如果当前网络是WWAN，我想知道是GPRS还是3G。Reachability是否有某种方式来区分ios中的GRPS和3G？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:20:01.783

我认为你不能（至少，如果不使用私有 API 就不能）。你为什么要这样做？如果您需要良好的连接质量，最好衡量实际质量，而不是依赖基于所用移动技术的假设。

信号强度差的 3G 连接不能保证比良好的 GPRS 连接更快。

# wcf - 在 WCF 服务端编辑来自客户端的 SOAP 请求

> ID：10411679
> 
> 赞同：1
> 
> 时间：2012-05-02T10:11:50.010
> 
> 标签：wcf, soap

我有一个 WCF 服务。它有两个操作合约，MyFunction 和 MyFunction1。我希望当客户端调用 MyFunction 时，应该触发 MyFunction1 并为请求提供服务。

我不想在 MyFunction 中编写这个函数调用。我想要在两者之间更改 SOAP 请求之类的东西......我的意思是在点击 SVC 之前，我想编辑 SOAP 并更改 SOAP Body 并将标记从 MyFunction 设置为 MyFunction1

我怎么能做到这一点？

假设： MyFunction 和 MyFunction1 采用相同的参数

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T10:43:18.640

您可以尝试使用[自定义 IDispatchOperationSelector](http://blogs.msdn.com/b/carlosfigueira/archive/2011/05/10/wcf-extensibility-operation-selectors.aspx) - 此接口的实现负责选择将被调用以服务请求的方法。这应该比修改消息更容易。

如果您仍想修改收到的 SOAP，您可以尝试使用[自定义编码器](http://blogs.msdn.com/b/carlosfigueira/archive/2011/11/09/wcf-extensibility-message-encoders.aspx)。

# php - 不能正常工作

> ID：10411680
> 
> 赞同：0
> 
> 时间：2012-05-02T10:11:52.507
> 
> 标签：php, character-encoding, meta-tags

这是我第一次用英语以外的语言（即土耳其语）做一个项目。我在 PHP 中启动代码，但我面临的问题是设置元内容字符集，以下是我代码的重要部分。我使用这一行来为我的站点定义土耳其语字符。

```
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-9" />
  </head>
 <body>
  MY CODE HERE ...
 </body>
</html> 
```

该行在 Chrome 中正常工作，但在 Firefox 和 IE 中出现问题，

我也用

```
<meta charset='ISO-8859-9'> 
```

问题是一样的，

请给出适用于所有浏览器的声明。

注意：我的控制台或 firebug 窗口中没有任何错误，唯一的是 firefox 和 IE 忽略了上述两行，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:17:36.903

在 php 中，如果要将字符从 utf8 转换为 iso，可以尝试 utf8_decode ！如果不起作用，请尝试 utf8_encode 或 htmlentities("text", ENT_QUOTES, "ISO-8859-1");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:56:43.337

我实际上得到的是。

```
iconv("ISO-8859-1", "UTF-8", $var) 
```

解决了我的问题。所有浏览器都支持此代码。感谢 Stackoverflow 团队和响应者。

和你一起研究真是太好了。

# php - mysqli_num_rows() 期望参数 1 为 mysqli_result

> ID：10411686
> 
> 赞同：0
> 
> 时间：2012-05-02T10:12:14.347
> 
> 标签：php, mysql

> **可能重复：**
> [警告：mysql_fetch_* 期望参数 1 是资源，布尔给定错误](https://stackoverflow.com/questions/11674312/warning-mysql-fetch-expects-parameter-1-to-be-resource-boolean-given-error)

我收到此错误：

```
Warning: mysqli_num_rows() expects parameter 1 to be mysqli_result,
boolean given in /Applications/MAMP/htdocs/start-fbook/facebook.php
on line 113 
```

这是代码。当我提交“状态”时，它会保存在我的数据库中，所以那部分没有问题。

```
<?php 
    //Eerst bouwen we onze applicatie uit zodat ze werkt, ook zonder JavaScript
    include_once("classes/Activity.class.php");
    $activity = new Activity();

    //controleer of er een update wordt verzonden
    if(!empty($_POST['activitymessage']))
    {
        $activity->Text = $_POST['activitymessage'];
        try 
        {
            $activity->Save();
        } 
        catch (Exception $e) 
        {
            $feedback = $e->getMessage();
        }
    }

    //altijd alle laatste activiteiten ophalen
    $recentActivities = $activity->GetRecentActivities();

?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>IMDBook</title>
<link href="css/reset.css" rel="stylesheet" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<style type="text/css">
body
{
    font-family: "Lucida Grande", Tahoma, Verdana, sans-serif;
}

h1
{
    margin-bottom: 5px;
}

h2
{
    color: #3b5998;
    display: inline;
}

ul
{
    margin-top: 10px;
}

ul li
{
    border-bottom: 1px dotted #fff;
    padding: 15px 5px;
}

#activitymessage
{
    border: 1px solid #bbbbbb;
    padding: 5px;
    width: 280px;
    font-size: 1.1em;
}

div.statusupdates
{
    width: 380px;
    background-color: #ccc;
    padding: 20px;
    margin: 0 auto;
}

#btnSubmit
{
    background-color: #627aac;
    color: #fff;
    font-size: 1.1em;
    border: 1px solid #29447e;
}

div.errors
{
    width: 380px;
    margin: 25px auto;
    background-color: #bd273a;
    -moz-border-radius: 10px;
    color: white;
    font-weight: bold;
    text-shadow: 1px 1px 1px #000;
    padding: 20px;
    display:none;
}
</style>
<script type="text/javascript">

</script>
</head>
<body>
<div>
    <div class="errors"></div>

    <form method="post" action="">
        <div class="statusupdates">
        <h1>GoodBytes.be</h1>
        <input type="text" value="What's on your mind?" id="activitymessage" name="activitymessage" />
        <input id="btnSubmit" type="submit" value="Share" />

        <ul id="listupdates">
        <?php 
            if(mysqli_num_rows($recentActivities) > 0)
            {       
                while($singleActivity = mysqli_fetch_assoc($recentActivities))
                {
                    echo "<li><h2>GoodBytes.be</h2> ". $singleActivity['activity_description'] ."</li>";
                }
            }
            else
            {
                echo "<li>Waiting for first status update</li>";    
            }
        ?>
        </ul>

        </div>
    </form>

</div>  
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:15:05.527

您应该像这样进行检查：

```
if($recentActivities !== false) {
    //code here
} 
```

如果查询失败，数据库调用将返回 false。

# css - 使用文档模式 IE7 标准设计 IE9 浏览器模式

> ID：10411690
> 
> 赞同：7
> 
> 时间：2012-05-02T10:12:31.337
> 
> 标签：css, internet-explorer-7, internet-explorer-9, developer-tools

我有一个使用 IE9 浏览器模式和文档模式 IE7 标准集的客户端提出的“错误”（为什么它设置为此我不知道，请参阅附图）![IE9 浏览器模式与文档模式 IE7 标准](../Images/0bf29fb93baee83fea47c79e3cc5c58c.png)

这显然会导致样式错误，并且客户已要求我修复错误。我几乎 100% 确定我无法针对这种设置和解决问题做任何事情。我正在使用 Modernizr 来定位不同的浏览器。我想要一个强有力的答案来告诉客户为什么这是我无法解决的情况，或者如果我错了并且我可以采取一些措施来纠正这个问题，那么我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T11:47:53.567

我不相信你能对此做些什么。有执行标准的元标记，但如果用户打开他们的开发工具并手动选择设置，那么这不是一个值得研究的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T15:59:36.230

我知道这听起来很奇怪.. 但是有些人将文档模式设置为 IE7 标准按页面默认值。

我妈的ie9版本设置为IE7标准。我非常怀疑她是自己做的，尽管我有时在我访问时在她的机器上工作，但我不记得这样做。因此，可能某些人确实将 ie9 设置为已弃用的浏览器标准.. (7)

我认为现在是我们停止支持 7 的时候了。我是一名自由职业者，如果您想要支持 ie8 以下的任何内容，我会收取更多费用。但是现在我遇到了这个文档模式问题——它被真正设置为 ie7 标准作为页面默认值。我想知道有多少人因为这个原因浏览了破损的页面……

# c# - 为什么我的转换/投射失败？

> ID：10411695
> 
> 赞同：2
> 
> 时间：2012-05-02T10:12:53.510
> 
> 标签：c#, inheritance, casting, type-conversion

程序代码 - 2 个类，B 继承自 A，TypeH() 发布类字母：

```
class Program
{
    static void Main(string[] args)
    {
        A z = new A();
        A x = new B();
        B y = (B)x;

        z.TypeH();
        x.TypeH();
        y.TypeH();

        x = (A)y;
        x.TypeH();
    }
}
class A
{
    public virtual void TypeH()
    {
        Console.WriteLine("A");
    }
}
class B : A
{
    public override void TypeH()
    {
        Console.WriteLine("B");
    }
} 
```

输出：ABBB 为什么最后一个输出是 B 而不是 A？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:15:59.837

这称为多态性。实例很重要（即`B`）而不是类型引用（即`A`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T10:17:13.897

调用虚方法时，**会考虑对象的实际实例类型**，而不是用于进行方法调用的编译时类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:16:43.140

因为方法 TypeH 是**virtual**。
如果您删除了虚拟，那么您将获得派生引用类型的派生方法和基本引用类型的基方法。使用 virtual 有一个运行时检查 - 如果基本 ref 实际上指向派生类型，则调用派生方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T10:52:20.443

简单来说，这是因为**override**关键字将“替换”基类 A 上的方法，即使您强制转换为该基类，它仍然如此。

但是，如果您将 B 类更改为：

```
public new void TypeH() 
```

那么**new**关键字只会*隐藏*TypeH 的基类 A 实现。在这种情况下，当您向下转换为基类 A 时，您将获得 TypeH 的基类 A 实现。然后，您的示例将打印“A”。

# android - 在 XML 中连接多个字符串？

> ID：10411699
> 
> 赞同：60
> 
> 时间：2012-05-02T10:13:04.330
> 
> 标签：android, xml, string

我通过这个[如何在 android XML 中连接多个字符串？](https://stackoverflow.com/questions/5764548/how-to-concatenate-multiple-strings-in-android-xml)最后有评论说

`For clarity, Its works:`

`<string name="title">@string/app_name</string>.`——*安德烈·杜斯*

我做了我自己的例子，但它不起作用。*Andrzej*也错了，或者我在代码中做错了什么。

`R.strings.bbb`应该包含`"bbb aaa"` 但不是`"bbb aaa"`它包含`"bbb @strings/aaa"`

```
<string name="aaa">aaa</string>
<string name="bbb">bbb @strings/aaa</string> 
```

**询问：**

是否可以仅在 xml 中进行一些连接，而无需更改源代码？

我不想在代码中编辑的原因是因为我在`xml/preferences.xml`

**例如：**

`<ListPreference android:key="key_bbb" android:title="@string/bbb"`……

如果你明白我的意思，这里不可能使用这样的东西

```
String title = res.getString(R.string.title, appName); 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2015-10-21T07:02:49.043

不，您不能连接 XML 中的字符串，但您可以定义 XML 资源。

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE resources [
  <!ENTITY appname "MyAppName">
  <!ENTITY author "MrGreen">
]>

<resources>
    <string name="app_name">&appname;</string>
    <string name="description">The &appname; app was created by &author;</string>
</resources> 
```

原来的答案张贴[在这里](https://stackoverflow.com/a/24903097)。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-02T10:42:22.363

仅在 XML 中这是不可能的，但使用 java 代码可以使用该`String.format()`方法。

```
<string name="aaa">aaa</string>
<string name="bbb">bbb %1$s</string> 
```

在java代码中

```
String format = res.getString(R.string.bbb);
String title = String.format(format, res.getString(R.string.aaa)); 
```

所以标题在两个字符串连接后将是一个完整的字符串。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-05-02T10:26:45.077

不，我不认为你可以连接。

```
<string name="aaa">aaa</string>
<string name="bbb">bbb @string/aaa</string> 
```

**输出 - bbb @string/aaa**

如果你这样做，

```
<string name="aaa">aaa</string>
<string name="bbb">@string/aaa bbb</string>  -> This won't work it
                                                      will give compilation error 
```

因为在这里它将搜索一个`@string/aaa bbb`不存在的带有引用的字符串。

你的问题是，你`@strings/aaa`应该在哪里使用`@string/aaa`

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-11-10T12:12:52.473

您可以连接 gradle.build 中的资源：

```
 resValue "string", "TWITTER_CALLBACK", "twitter_callback_" + applicationId 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-05-13T11:16:49.250

是的，如果您的 XML 文件使用 DataBinding，您可以这样做，如您在此[链接中所见](https://developer.android.com/topic/libraries/data-binding/expressions#common_features)

像这样使用它：

```
"@{@string/first_string+ @string/second_string}" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-02T11:35:17.787

科特林版本：

xml中的字符串：

```
<string name="school_girl">Gogo Yubari</string>
<string name="assistant">Sofie Fatale</string>
<string name="boss">O-Ren Ishii</string>
<string name="list">%s, %s, %s</string> 
```

然后在代码中：

```
val killBillV1 = getString(R.string.list).format(
    Locale.US,
    getString(R.string.school_girl),
    getString(R.string.assistant),
    getString(R.string.boss)
) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-10-25T12:09:31.887

是的，您可以这样做，而无需添加任何 Java/Kotlin 代码，只需使用此库：[https](https://github.com/LikeTheSalad/android-string-reference) ://github.com/LikeTheSalad/android-string-reference ，它在构建时执行此操作。

对于您的情况，您必须像这样设置字符串：

```
<string name="aaa">Some text</string>
<string name="template_bbb">bbb ${aaa}</string> 
```

然后库将在构建时创建以下内容：

```
<string name="bbb">bbb Some text</string> 
```

免责声明：我是这个库的作者。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-29T02:15:02.060

这个技术怎么样

使用数组

```
<string name="app_link">https://myapp.com/</string>

<array name="update_dialog_msg">
    <item>Update can be downloaded manually by visiting this link:\n</item>
    <item>@string/app_link</item>
</array> 
```

然后在java类中创建一个方法如下

```
public String getStringArray(int resStringArray)
{
    String str = "";

    String[] strArray = mContext.getResources().getStringArray(resStringArray);
    for (String s: strArray)
    {
        str += s;
    }

    return str;
} 
```

现在从任何java类调用它

```
mDialog.setMessage(getStringArray(R.array.update_dialog_msg);
// OR
textView.setText(getStringArray(R.array.update_dialog_msg); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-08T21:32:20.400

嗨 concat 可以这样做，

```
 android:text="@{userInfo.firstName.concat(@string/empty_str).concat(userInfo.lastName)}" 
```

我猜它是动态数据的好样本。但如果此示例包含其他变体。例如用户名：Jon Doe

```
 android:text="@{String.format(@string/user_def,userInfo.firstName.concat(@string/empty_str).concat(userInfo.lastName))" 
```

就是这样

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-25T10:08:07.613

**如果要添加多个字符串值，请尝试这样**

```
 <TextView
                        ..........
                        android:text='@{String.format("%s %s","+91", userInfo.mobile)}'
                        .............. /> 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2016-10-06T21:20:16.493

不，但可以在带有 concat 函数的 xslt 文件中：

```
<html>
      <body>
        <ul>
          <xsl:for-each select="stock">
            <xsl:if test="starts-with(@symbol, 'C')">
              <li>
                <xsl:value-of select="concat(@symbol,' - ', name)" />
              </li>
            </xsl:if>
          </xsl:for-each>
        </ul>
      </body>
    </html> 
```

[http://www.java2s.com/Tutorial/XML/0100__XSLT-stylesheet/concatfunction.htm](http://www.java2s.com/Tutorial/XML/0100__XSLT-stylesheet/concatfunction.htm)

# c# - JavaScript 不工作（自定义对话框）

> ID：10411700
> 
> 赞同：1
> 
> 时间：2012-05-02T10:13:05.687
> 
> 标签：c#, javascript, jquery, asp.net, .net

按照本教程，

[自定义对话框](http://aspalliance.com/1366_Building_a_Custom_Confirmation_Dialog_Box.all)

我已经有 3 个用于 ASP.Net 页面的 asp 内容占位符，而且我猜他们已经在使用某种脚本，这在这里没有问题。

问题是，我可以使用“OnClientClick”属性调用一个函数，但是这个函数在不同的 .js 文件中有更多函数。如果我在它调用其他函数之前发出警报，它会起作用，但在它执行我的第一个函数之后不会。

教程列出了所有 javascript 代码，这是我在 ASP.Net Content 地方使用的代码，以使其工作，

```
<asp:Content ID="Content4" ContentPlaceHolderID="cphSubmit" runat="server">
 <script type="text/javascript" src="/_layouts/1033/jquery.js"></script>
 <script type="text/javascript" language="JavaScript" src="CustomDialog.js"></script>
 <script type="text/javascript" language="JavaScript">
        function ShowMessage()
        {
            alert("1");
            SetText('Yes','No');
            alert("2");
            DisplayConfirmMessage('are you sure',180,90)
            SetDefaultButton('btnConfOK');
            return false;
        }
 </script>
            <div id="divConfMessage" runat="server" style="BORDER-RIGHT:black thin solid; BORDER-TOP:black thin solid; DISPLAY:none; Z-INDEX:200; BORDER-LEFT:black thin solid; BORDER-BOTTOM:black thin solid">
            <div style="BACKGROUND-COLOR: #6699cc;TEXT-ALIGN: center" id="confirmText">
            </div>
            <div style="Z-INDEX: 105;HEIGHT: 2%;BACKGROUND-COLOR: white;TEXT-ALIGN: center">
            </div>
            <div style="Z-INDEX: 105;BACKGROUND-COLOR: white;TEXT-ALIGN: center">
                <asp:Button ID="btnConfOK" Runat="server" Text="OK"></asp:Button>
                <asp:Button ID="btnConfCancel" Runat="server" Text="Cancel"></asp:Button>
            </div>
        </div>
<hr />

    <asp:Button ID="btDelete" runat="server" 
    OnClientClick="ShowMessage();"
    Text="Delete" UseSubmitBehavior="False" Width="200px"  /> 
```

我暂时删除了一些其他控件，它显示警报“1”但没有达到“2”，

这是 CustomDialog 脚本，

```
var divWidth = '';
var divHeight = '';
var txtFirstButton = 'OK';
var txtSecondButton = 'Cancel'
    function DisplayConfirmMessage(msg,width,height)
    {
            // Set default dialogbox width if null
            if(width == null)
            divWidth = 180 
            else 
            divWidth = width;

            // Set default dialogBox height if null
            if(height == null)
            divHeight = 90 
            else 
            divHeight = height;

            // Ge the dialogbox object
            var divLayer = document.getElementById('divConfMessage');
            // Set dialogbox height and width
            SetHeightWidth(divLayer)
            // Set dialogbox top and left
            SetTopLeft(divLayer);

            // Show the div layer
            divLayer.style.display = 'block';
            // Change the location and reset the width and height if window is resized
            window.onresize = function() { if(divLayer.style.display == 'block'){ SetTopLeft(divLayer); SetHeightWidth(divLayer)}}
            // Set the dialogbox display message
            document.getElementById('confirmText').innerText = msg;
    }

    function SetTopLeft(divLayer)
    {
        // Get the dialogbox height
        var divHeightPer = divLayer.style.height.split('px')[0];

         // Set the top variable 
        var top = (parseInt(document.body.offsetHeight)/ 2) - (divHeightPer/2)
        // Get the dialog box width
        var divWidthPix = divLayer.style.width.split('px')[0];

        // Get the left variable
        var left = (parseInt(document.body.offsetWidth)/2) - (parseInt(divWidthPix)/2);
        // set the dialogbox position to abosulute
        divLayer.style.position = 'absolute';

        // Set the div top to the height 
        divLayer.style.top = top

        // Set the div Left to the height 
        divLayer.style.left = left;
    }
    function SetHeightWidth(divLayer)
    {
        // Set the dialogbox width
        divLayer.style.width = divWidth + 'px';
        // Set the dialogbox Height
        divLayer.style.height = divHeight + 'px'
    }
    function SetText(txtButton1,txtButton2)
    {
            // Set display text for the two buttons
            if(txtButton1 == null)
            document.getElementById('btnConfOK').innerText = txtFirstButton;
            else
            document.getElementById('btnConfOK').innerText = txtButton1;

                            // Set display text for the two buttons
            if(txtButton2 == null)
            document.getElementById('btnConfCancel').innerText = txtSecondButton;
            else
            document.getElementById('btnConfCancel').innerText = txtButton2;

    }
    function SetDefaultButton(defaultButton)
    {
            // Set the focus on the Cancel button
            document.getElementById(defaultButton).focus();
    } 
```

刚刚注意到它达到了这个功能

```
function SetText(txtButton1,txtButton2)
    {
            alert("2");
            // Set display text for the two buttons 
```

然后它迷路了，它试图从 txtButton1 获取价值，这可能意味着，我的 ASPX 页面中的 Div 标签没有正确呈现:(

```
 if(txtButton1 == null)
            document.getElementById('btnConfOK').innerText = txtFirstButton;
            else
            document.getElementById('btnConfOK').innerText = txtButton1;

            alert("3"); 
```

* ***编辑****如果我删除 SetText 函数，它会显示，但不会触发我的“OnClick”方法，只是刷新页面****

```
 <asp:Button ID="Button1" runat="server" CausesValidation="False" CssClass="gradientbutton"
    OnClick="btDelete_Click" OnClientClick="ShowMessage();this.disabled=true;this.value='Wait...';"
    Text="Delete" UseSubmitBehavior="False" Width="200px"  /> 
```

**刚刚意识到页面上出现错误，即使它显示确认框**

说 findElementbyid(..) 为空或不是对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:44:43.190

我认为这

```
document.getElementById('btnConfOK') 
```

应该使用 ClientID 而不是实际 ID，因为它是一个 .NET 控件，ID 将被重写。所以应该是

```
document.getElementById('<%=btnConfOK.ClientID%>') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:19:25.003

也许不知何故，添加的 src 没有 '/' 到 url ......

更改此行：

```
<script type="text/javascript" language="JavaScript" src="CustomDialog.js"></script> 
```

至：

```
<script type="text/javascript" language="JavaScript" src="./CustomDialog.js"></script> 
```

如果这不起作用，则代码有问题，或者您已将其放置在另一个位置 0_0

# oracle - 当链接服务器无法访问时设置标志，oracle

> ID：10411702
> 
> 赞同：0
> 
> 时间：2012-05-02T10:13:16.607
> 
> 标签：oracle, plsql, oracle11g

我需要在我的数据库中设置一个标志，以防我定期更新我的数据的链接服务器无法访问。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:38:26.250

您可以尝试在远程数据库中选择 dual 并注意它何时不可用。

```
declare

   l_available number;

begin

   begin

      -- Try and find the remote DB.
      execute immediate 'select 1 from dual@remote_db'
                    into l_available;

   exception when others then
      l_available := 0;

   end;

   update my_table
      set available = l_available
    where server = remove_db;

end;
/ 
```

# sql-server-2008 - DateDiff 年份转换为小数

> ID：10411704
> 
> 赞同：9
> 
> 时间：2012-05-02T10:13:25.700
> 
> 标签：sql-server-2008, tsql, datediff

我有两个日期，我想在其中找到它们之间的年数，但是我需要将值显示到小数点后两位。我尝试了以下方法，但我总是返回 0 的值，因为我的所有日​​期都不涵盖一整年：

```
DATEDIFF(yy, @EndDateTime, i.mat_exp_dte) 
```

然后我尝试找到两者之间的天数，然后将其除以 365，但这仍然返回 0：

```
DATEDIFF(dd, @EndDateTime, i.mat_exp_dte)/365 
```

现在对如何计算感到困惑。我需要将 DataDiff 转换为不同的数据类型吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-02T10:16:23.233

试试这个。

```
DATEDIFF(dd, @EndDateTime, i.mat_exp_dte)/365.0 
```

将 int 与 int 相除返回 int。除以小数，您将得到一个小数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T11:25:35.843

.0 代表浮点数，因此计算包括小数。没有它，您将计算整数除法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-17T14:08:30.880

如果您想要一个更准确的版本来说明闰年，那么您可以这样做：

```
cast(DATEDIFF(dd, @EndDateTime, i.mat_exp_dte) as float)
/datediff(dd,@EndDateTime,dateadd(yy,1,@EndDateTime)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-28T08:42:32.567

```
SELECT
(YEAR(@EndDte) - YEAR(@StartDate) + 
(MONTH(@EndDate) - MONTH(@StartDate) /100.0 + 
(DAY(@EndDate) - DAY(@StartDate) /10000.0) 
```

如果您需要确定是否正好有一年、少于一年或多于一年。(=1, <1, >1)

# python - WindowsError：使用 ctypes 加载 DLL 时 [错误 126]

> ID：10411709
> 
> 赞同：13
> 
> 时间：2012-05-02T10:13:51.490
> 
> 标签：python, windows, dll, ctypes

这在带有 Python 2.7 的 Windows 7 上运行良好：

```
lib = ctypes.cdll.LoadLibrary('prov_means')
provmeans = lib.provmeans 
```

库 prov_means.DLL 在我的工作目录中。它导出一个简单的、独立的 C 函数 provmeans()，没有依赖关系。

当我在 Windows XP 和 Python 2.7 上尝试同样的事情时，我得到了

```
Traceback (most recent call last):
  File "D:\python\Auxil\src\auxil.py", line 130, in <module>
    lib = ctypes.cdll.LoadLibrary('prov_means')
  File "C:\Python27\lib\ctypes\__init__.py", line 431, in LoadLibrary
    return self._dlltype(name)
  File "C:\Python27\lib\ctypes\__init__.py", line 353, in __init__
    self._handle = _dlopen(self._name, mode)
WindowsError: [Error 126] The specified module could not be found 
```

我尝试将 DLL 复制到 Windows\System32 并输入完整路径名

```
"d:\\python\\auxil\\src\\prov_means" 
```

有和没有“.DLL”扩展名。没有任何效果。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-02T11:37:47.797

错误 126 是当无法找到依赖 DLL 时出现的错误。这有两个明显的原因：

1.  找不到您的 DLL。
2.  您的 DLL 依赖于其他无法找到的 DLL。

我怀疑选项 1 是问题，但无论如何我认为我可能会使用该 DLL 的完整路径来确定。

所以剩下的选项 2 和最常见的原因是你的目标机器没有安装 C++ 运行时。在您的目标机器上安装 C++ 运行时，或者[`/MT`](http://msdn.microsoft.com/en-us/library/2kzt1wy3.aspx)在构建 DLL 时使用静态链接，这样您就不需要重新分发运行时。

可能，在您开发 DLL 的机器上，您已经安装了 C++ 编译器并为您安装了运行时。在代码失败的目标机器上，您尚未安装编译器，因此运行时不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:16:41.607

您使用哪个编译器来构建库？也许缺少一些必需的库？您可以使用 Dependency Walker (http://www.dependencywalker.com/) 检查库具有哪些依赖项？

# iphone - 保存添加到类扩展的额外数据

> ID：10411715
> 
> 赞同：1
> 
> 时间：2012-05-02T10:14:09.213
> 
> 标签：iphone, objective-c, ios, nsarray, nskeyedarchiver

我创建了一个 UIImage 类，该类还包含应绘制图像的坐标数据：

```
#import "UIImageExtras.h"
#import <objc/runtime.h>

@implementation UIImage (Extras)

static char UII_ORIGINDATA_KEY;

@dynamic originData;

- (void)setOriginData:(NSValue *)originData {
    objc_setAssociatedObject(self, &UII_ORIGINDATA_KEY, originData, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}

- (NSValue *)originData {
    return (NSValue *)objc_getAssociatedObject(self, &UII_ORIGINDATA_KEY);
} 
```

到目前为止一切都很好。我有一个包含这些图像数组的类。该类称为 BookDoc，该数组称为插图。当我复制 BookDoc 的实例时，我复制了数组。我为每个图像定义的 originData 复制得很好。

但是，当我将这个新副本保存到文件时，我会丢失 originData。这是我的保存方法：

```
- (void)saveIllustrations {
if (_illustrations == nil) {
    NSLog(@"Nil array");
    return;
}

[self createDataPath];
NSString *illustrationsArrayPath = [_docPath stringByAppendingPathComponent:kIllustrationsFile];
BOOL result = [NSKeyedArchiver archiveRootObject:_illustrations toFile:illustrationsArrayPath];
if (!result)
    NSLog(@"Failed to archive array");

//This is not saving the originData. 

self.illustrations = nil; 
```

}

我的问题是 - 如何确保保存每个图像的 originData？非常感谢。

更新：

好的，我已经在一个名为 UIImageExtra 的类中更改了 UIImage 的子类，并使其符合 NSCoding 如下：

```
 - (void)encodeWithCoder:(NSCoder *)aCoder {
    NSLog(@"Encoding origin data!");
    [aCoder encodeObject:originData forKey:kOriginData];
    [super encodeWithCoder:aCoder];
}

    - (id)initWithCoder:(NSCoder *)aDecoder {
        if (self = [super initWithCoder:(NSCoder *) aDecoder]) {
            NSLog(@"Decoding origin data");
            self.originData = [aDecoder decodeObjectForKey:kOriginData];
        }
        return self;
    } 
```

现在当我保存包含这些 UIImageExtra 实例的插图数组时，它不应该自动保存原始数据吗？我保存数组的代码如下所示：

```
- (void)saveIllustrations {
if (_illustrations == nil) {
    NSLog(@"Nil array");
    return;
}

[self createDataPath];
NSString *illustrationsArrayPath = [_docPath stringByAppendingPathComponent:kIllustrationsFile];
BOOL result = [NSKeyedArchiver archiveRootObject:_illustrations toFile:illustrationsArrayPath];
if (!result)
    NSLog(@"Failed to archive array");

//This is not saving the originData. 

self.illustrations = nil; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:27:37.687

我认为您不能为通过关联对象 API 添加的属性执行此操作，因为您不知道您的属性在那里`UIImage`。`encodeWithCoder:``initWithCoder:`

如果您可以`MyUiImage`通过继承`UIImage`来创建自定义，您将能够覆盖您的类的`encodeWithCoder:`和`initWithCoder:`，并对您的属性以及这些属性进行编码/解码`UIImage`。

# mobile - 诺基亚 E63 中的马拉雅拉姆语字体

> ID：10411716
> 
> 赞同：1
> 
> 时间：2012-05-02T10:14:30.880
> 
> 标签：mobile, symbian, nokia

我需要在我的 E63 上安装马拉雅拉姆字体（外语）。

操作系统是 Symbian OS 9.2，Series 60 v3.1 UI

# php - 由于长 UTF 字符，XML 格式不正确

> ID：10411718
> 
> 赞同：1
> 
> 时间：2012-05-02T10:14:36.653
> 
> 标签：php, xml, character-encoding, iconv

好的，我希望有人可以提供帮助，因为我无法找到解决方案。

在数据库中，客户设法从不同的字符集中导入或添加字符数据，例如：

```
 <E2><80><99> 
```

我相信这是 UTF-16。

由于此数据（从数据库中提取字符串，例如“描述”字段并构建 XML 文件），我的脚本的 XML 输出会引发错误。

XML 解析错误：第 20 行第 50 列格式不正确。

还有其他一些更长的十六进制，例如 <80><99> （只是一个例子，我不确定这是否是一个实际字符）。

如何使我的 XML 文件有效，并缩小字符集或让它使用 UTF-32，如下所示：

```
 AddType "application/xml; charset=UTF-32" xml  (in .htaccess file along with filesmatch .xml)

  <?xml version='1.0' encoding='UTF-32' ?>   (placed in head of xml file) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:31:20.950

不管它是什么：UTF-8、-16 或 -32 - 如果您在输出中选择其他编码，则必须（如果不同）首先重新编码您的输入以输出。

您在问题中明确指出您不知道输入编码到底是什么。这是您需要弄清楚的一点，因为编码是元信息。您需要正确了解它才能处理字符串。从您分享的内容来看，输入似乎是 UTF-8 编码的。您应该验证这一点（[如何在 PHP 中检测格式错误的 utf-8 字符串？](https://stackoverflow.com/questions/6723562/how-to-detect-malformed-utf-8-string-in-php)）。

接下来的事情是，格式错误不一定意味着编码问题（但它可以）。只要您不分享问题的根源（最好在 text-form 旁边以及[hex-dump](https://stackoverflow.com/questions/1057572/how-can-i-get-a-hex-dump-of-a-string-in-php)旁边），对于我要说的当前信息，没有太多建议可以提供。

# c# - 无法理解参数标签的作用

> ID：10411719
> 
> 赞同：2
> 
> 时间：2012-05-02T10:14:37.313
> 
> 标签：c#

我是开发新手，想问一个非常基本的问题，我正在查看 C# 中的一些代码并尝试重现应用程序当我遇到带有三个斜杠的 param 标记时，我不知道该怎么做，请查看以下示例： -

```
/// <param name="requestMethod">one of GET, PUT, DELETE</param> 
```

两个和三个斜杠用于评论，所以这是评论还是我需要删除评论并按照描述放置值。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:23:43.573

它用于[记录代码](http://rlieving.blogspot.com/2007/09/documenting-code-in-visual-studionet.html)。

从上面的链接：

> 'param' 标签定义每个参数

在您的示例中，文档描述了可以传递给`requestMethod`. 在没有看到方法签名的情况下，很难确定这些值是否是 strings `GET`、`PUT`或`DELETE`可能是 C# 枚举值。

另请参阅[MSDN的文章](http://msdn.microsoft.com/en-us/library/aa288481%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:26:09.770

三个斜杠`///`是 XML 注释，而两个斜杠`//`只是代码中的标准注释。

因此，您可以看到带有三个斜杠的 XML 注释包含有关整个方法的信息，而`//`方法主体中的注释只是对该方法的一部分的注释。

```
/// <summary>
/// Does something.
/// </summary>
///<param name="param1">The parameter .</param>
public void doSomething(int param1)
{
     // This is a standard comment about some code

} 
```

因此，当调用此方法时，您将执行以下操作：

做某事(999)

该行 `///<param name="param1">The parameter .</param>`表示此方法希望您将某些内容作为参数传递

有关使用 XML 方法的更多信息，请参见此处：http: [//msdn.microsoft.com/en-us/magazine/cc302121.aspx](http://msdn.microsoft.com/en-us/magazine/cc302121.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:22:52.193

这只是一种特殊的评论。

在 Visual Studio 中，如果您在方法上方按 ///，它将根据当前方法自动为您创建信息。

这用于文档，您可以使用 /doc 命令行选项让编译器生成包含此信息的 xml 文件。

请参阅 Microsoft 的建议：

[http://msdn.microsoft.com/en-us/library/5ast78ax.aspx](http://msdn.microsoft.com/en-us/library/5ast78ax.aspx)

# ios - 适用于 iOS 的 Flattr SDK？

> ID：10411720
> 
> 赞同：0
> 
> 时间：2012-05-02T10:14:39.837
> 
> 标签：ios, flattr

是否有官方（或维护良好的）iOS 库来使用 Flattr API？如果是这样，它是否包含类似于 Facebook 提供的舒适 SSO 解决方案，其他应用程序可以将身份验证委托给官方应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:37:33.600

我用 Flattr 制作了一个应用程序（未发布）。我想过写一个库，但后来决定用[RestKit](http://restkit.org/)就足够了。OAuth 2.0 很容易自己实现。API 的包装器感觉有点多余。:) RestKit 还为您提供诸如 CoreData 支持和对象映射之类的好东西！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T07:12:37.293

这个看起来不错：[https ://github.com/neonichu/FlattrKit](https://github.com/neonichu/FlattrKit)

# wifi - 如何在 Xubuntu 12.04 上自定义 Wi-Fi 以使用自动 DHCP？

> ID：10411721
> 
> 赞同：0
> 
> 时间：2012-05-02T10:14:40.057
> 
> 标签：wifi, dhcp, xubuntu

几天前，我在笔记本电脑上安装了 Xubuntu 12.04。我在使用 Wi-Fi 时遇到了一些问题，我已经解决了安装正确的驱动程序。之后，笔记本电脑上的 Wi-Fi 开始工作。我连接到 W-Fi 路由器和自定义连接。在网络管理器中，我看到我获得了 DNS 和其他配置，但`/etc/resolv.conf`我不需要名称服务器。

如何在 Xubuntu 12.04 上自定义 Wi-Fi 以使用自动 DHCP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T23:55:54.727

问题出在路由器的设置上。我使用了以下 IP 地址：10.0.0.0。当我将 IP 地址更改为 192.168.1.1 时，一切正常。

# java - 发送 java 邮件的更好方法，除了经典的 SMTP 邮件还有其他选择吗？

> ID：10411727
> 
> 赞同：0
> 
> 时间：2012-05-02T10:15:00.687
> 
> 标签：java, email, smtp, jakarta-mail

对于我的一个 j2ee 应用程序，我使用 SMTP 发送邮件。

我的代码如下所示。

```
package email_sender;

import java.util.Properties;

import javax.mail.Message;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public class registration
{
    public void send(String name, String email)
    {
        String email_format =   "TEMP MESSAGE";

        Properties props = new Properties();
        props.put("mail.smtp.host", "smtp.gmail.com");
        props.put("mail.smtp.socketFactory.port", "465");
        props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.port", "465");

        Session session = Session.getDefaultInstance(props,
            new javax.mail.Authenticator() 
            {
                protected PasswordAuthentication getPasswordAuthentication() 
                {
                    return new PasswordAuthentication("gmail@gmail.com","gmail_password");
                }
            });

        try 
        {

            Message message = new MimeMessage(session);
            message.setFrom(new InternetAddress("gmail.com"));
            message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(email));
            message.setSubject("TEST subject");
            message.setContent(email_format, "text/html");
            Transport.send(message); 
        }
        catch (Exception e) 
        {
            throw new RuntimeException(e);
        }
    }
} 
```

这是注册表的测试格式。

它需要将近 9 秒的时间来执行。

我正在使用 2MBPS 宽带连接。

是过程有问题还是我们需要找到一些更好的方式来发送邮件？

# ruby - 按数组中出现的频率排序

> ID：10411730
> 
> 赞同：5
> 
> 时间：2012-05-02T10:15:10.693
> 
> 标签：ruby, algorithm, sorting

有没有一种有效的方法来做到这一点。我有一个数组

```
a=[1,2,2,3,1,2] 
```

我想按升序输出出现频率。例子

```
[[3,1],[1,2],[2,3]] 
```

这是我的红宝石代码。

```
b=a.group_by{|x| x}
out={}

b.each do |k,v|
    out[k]=v.size
end

out.sort_by{|k,v| v} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-02T10:29:39.347

```
a = [1,2,2,3,1,2]
a.each_with_object(Hash.new(0)){ |m,h| h[m] += 1 }.sort_by{ |k,v| v }
#=> [[3, 1], [1, 2], [2, 3]] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-02T10:20:18.410

像这样的东西：

```
x = a.inject(Hash.new(0)) { |h, e| h[e] += 1 ; h }.to_a.sort{|a, b| a[1] <=> b[1]} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-02T10:35:41.413

您是在尝试制定算法还是只想完成工作？在后一种情况下，不要重新发明轮子：

```
require 'facets'
[1, 2, 2, 3, 1, 2].frequency.sort_by(&:last)
# => [[3, 1], [1, 2], [2, 3]] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-02T10:18:59.783

使用散列，创建散列，遍历数组，对数组中的每个数字，更新散列中的计数。这将花费线性时间 O(n) 并且空间复杂度将等于存储哈希 O(n)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-02T10:43:46.253

```
def frequency(a)
  a.group_by do |e|
    e
  end.map do |key, values|
    [key, values.size]
  end
end

a = [1, 2, 2, 3, 1, 2]
p frequency(a).sort_by(&:last) 
```

# android - 当我使用“poweroff”重新启动时，如何在 HTC 中获得 Boot_Complete 意图？

> ID：10411731
> 
> 赞同：2
> 
> 时间：2012-05-02T10:15:15.840
> 
> 标签：android, android-intent

一旦我得到 BOOT_COMPLETE 意图，我想开始服务。在 HTC 资源管理器中，有 2 个重启选项，分别是“poweroff”和“restart”。当我使用“重启”时，我得到了正确的 BOOT_COMPLETE 意图。但是当我使用'poweroff'时没有得到 BOOT_COMPLETE 意图，所以我无法启动服务。只有在 HTC 重启后我才能得到他们的任何意图吗？

我一直在谷歌上冲浪，找不到任何提示。我被卡住了，请帮帮我

`<action android:name="android.intent.action.BOOT_COMPLETED"/>`我在清单中使用了这个代码但没有用

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T10:24:13.970

一些 HTC 设备可以启用“快速启动”功能，该功能更像是深度休眠而不是真正的重启，因此不应给出 BOOT_COMPLETE 意图。还要确保该应用程序未安装在 SD 卡上，因为它可能不会因此收到 BOOT_COMPLETED。

这也可能很有趣：

[http://commonsware.com/blog/2011/07/13/boot-completed-regression-confirmed.html](http://commonsware.com/blog/2011/07/13/boot-completed-regression-confirmed.html)

[http://arthurfmay.blogspot.jp/2011/06/broadcastreceiver-bootcompleted-and.html](http://arthurfmay.blogspot.jp/2011/06/broadcastreceiver-bootcompleted-and.html)

尤其是在提到“快速启动”选项的地方：

[http://groups.google.com/group/android-developers/browse_thread/thread/56562e4de4919dc6](http://groups.google.com/group/android-developers/browse_thread/thread/56562e4de4919dc6)

编辑：

如何简单地使用：

```
Intent.ACTION_SCREEN_ON 
```

然后您可以检查服务是否正在运行：

```
public static boolean ServiceRunning(Context cx) 
{   ActivityManager manager = (ActivityManager) cx.getSystemService(Context.ACTIVITY_SERVICE);
    for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE))
    {   if ("<<<service name goes here>>>".equals(service.service.getClassName()))
        {   return true;
        }
    }
    return false;
} 
```

如果它不只是启动它：

```
public static void ServiceCheck(Context cx)
{   if(ServiceRunning(cx) == false)
    {   Intent svc = new Intent(".<<<Servicename>>>");
        cx.startService(svc);
        Log.i("Service-Check","Service Starting");
    }
    else
    {   Log.i("Service-Check","Service Existing");
    }
} 
```

# windows-phone-7 - 如何在 MVVMCross 应用程序中替换 MvxDefaultViewModelLocator

> ID：10411735
> 
> 赞同：1
> 
> 时间：2012-05-02T10:15:24.997
> 
> 标签：windows-phone-7, xamarin.ios, xamarin.android, mvvmcross

我想滚动我自己的 ViewModelLocator 以在应用程序的中心位置为 ViewModel 创建提供 try/catch/log 包装器，为了能够做到这一点，我必须替换默认的 MvxDefaultViewModelLocator。但我没有找到替代通用方法的方法，只能注入特定于 VM 类型的方法。

我应该如何将自己的 ViewModelLocator 类作为默认类注入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:53:28.373

我刚刚重读了你的问题....我回答了一个不同的问题，不是吗？对不起！

让我们再试一次...

* * *

默认的 MvxApplication 不提供任何方法来覆盖此成员。如果您认为它对您有用，那么请务必在 GitHub 上提出问题或拉动。

但是，在不更改 Mvx 代码的情况下，实现我认为您正在寻找的效果的一种方法是简单地替换 IoC/ServiceProvider 框架中的 IMvxViewModelLocatorFinder 接口 - 您可以轻松实现：

```
 public class MyFinder : IMvxViewModelLocatorFinder
  {
        public IMvxViewModelLocator FindLocator(MvxShowViewModelRequest request)
       {

            return new MyDefaultViewModelLocator();
       }
  } 
```

然后您可以在`InitializeLastChance`每个客户端项目的安装部分中注入这个（覆盖 IoC 中的应用程序条目）？

* * *

或者，如果你愿意，你可以走得更高——你可以替换 IMvxViewModelLoader

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:32:39.507

这很简单……但实际上在任何样本中都没有！

ViewModelLocators 的“容器”是[MvxApplication](https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross/Application/MvxApplication.cs)对象。默认情况下，它使用基于约定的约定`MvxDefaultViewModelLocator`，即尝试通过使用声明的具有字符串参数的构造函数来构造 ViewModel 实例。

如果您想使用自己的 ViewModel 定位器，那么最简单的方法是从 MvxViewModelLocator 继承并提供返回 ViewModel 实例的公共属性或公共方法：

例如：

```
public class MyViewModelLocator : MvxViewModelLocator
{
    public MyFirstViewModel CreateFirst()
    {
        return new MyFirstViewModel();
    }

    public MySecondViewModel CreateSecond(string aParameter)
    {
        var someLookup1 = ComplicatedStaticThing1.Lookup(aParameter);
        var viewModel = new MySecondViewModel(someLookup1);

        var someLookup2 = ComplicatedStaticThing2.Lookup(aParameter, someLookup1);
        viewModel.DoSomething(someLookup2);

        return viewModel;
    }

    private readonly MyThirdViewModel _third = new MyThirdViewModel();
    public MyThirdViewModel Third
    {
        get
        {
            return _third;
        }
    }
} 
```

如果你想比这更低，那么你也可以直接实现 IMvxViewModelLocator。

要将 ViewModelLocator 添加到应用程序，只需实例化并将其添加到您的应用程序中 - 例如：

```
public class App 
    : MvxApplication
    , IMvxServiceProducer<IMvxStartNavigation>
{
    public App()
    {
        this.RegisterServiceInstance<IMvxStartNavigation>(new StartApplicationObject());

        base.AddLocator(new MyViewModelLocator());

        // to disable the default ViewModelLocator, use:
        // base.UseDefaultViewModelLocator = false;
    }
} 
```

* * *

注意： - 除了设计时数据，我现在*很少*发现需要实现自定义 ViewModelLocator - 通常我想做的所有事情都可以在 ViewModel 构造中完成。

# jquery - 创建backbone.js视图时出错-在instanceof检查中需要一个函数，但得到了[object Object]

> ID：10411736
> 
> 赞同：12
> 
> 时间：2012-05-02T10:15:28.073
> 
> 标签：jquery, backbone.js, backbone-views

我正在尝试使用以下代码创建一个简单的backbone.js 视图：

```
<!DOCTYPE HTML>
<html>
    <head>
        <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.1/underscore-min.js"></script>
        <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"></script>
        <!--<script type="text/javascript" src="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min.js"></script> -->
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    </head>
    <body>
        <script type="text/javascript">
            var BodyView = Backbone.View.extend({
                el:$('body'),
                initialize : function() {
                    console.log("view init");
                }
            });

            new BodyView();
        </script>
    </body>
</html> 
```

但

> 我收到一个错误，期望在 instanceof 检查中使用一个函数，但得到 [object Object]

在这条线上 - `new BodyView()`;

如果我使用旧版本的主干.js（0.3.3），则此代码有效

知道为什么会发生此错误以及如何解决它吗？提前致谢。

PS - 我主要关注[http://backbonetutorials.com/what-is-a-view/](http://backbonetutorials.com/what-is-a-view/)和[http://documentcloud.github.com/backbone/#View](http://documentcloud.github.com/backbone/#View)来创建这个示例主干 js 应用程序。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-02T10:29:04.753

您应该检查的基本事项：

### 像这样包装你`new BodyView()`的 jQuery.ready ：

```
 var BodyView = Backbone.View.extend({
     el:$('body'),
     initialize : function() {
         console.log("view init");
     }
 });

 $(function() {
        new BodyView();
 }); 
```

### 在下划线和主干之前加载 jQuery

您的 jquery 脚本行应该在 Backbone 之前。

您的代码实际上有效：http: [//jsfiddle.net/vTuPJ/](http://jsfiddle.net/vTuPJ/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-02T10:27:51.447

为我工作。尝试将所有 Backbone 代码包装在一个`documentReady`块中：

```
$(function(){
  // .. your backbone code
});​ 
```

另一件事是，也许您必须更改脚本加载的顺序：

1.  下划线
2.  jQuery
3.  骨干

# postgresql - 如何合并两个数据库副本（postgresql）

> ID：10411738
> 
> 赞同：3
> 
> 时间：2012-05-02T10:15:34.440
> 
> 标签：postgresql, rails-postgresql

我有同一个数据库的两个版本。一个是当前的，另一个是从备份中恢复的。现在我需要合并它们以基本上将数据从备份移动到当前数据库中，保留不同表之间的关系。

是否有任何工具可以帮助实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T04:54:56.927

[Rubyrep](http://www.rubyrep.org)有一个同步[功能](http://www.rubyrep.org/features.html)，可以做你想做的事。

Rubyrep 是一个基于触发器的 postgresql 和 mysql 异步复制系统。但它的功能之一是“同步”命令，它扫描表中的差异并尝试将它们合并在一起。通常你会先使用同步，然后使用复制来保持两个数据库同步，但是没有理由你不能单独使用“同步”命令。

我相信它使用主键来比较数据，因此根据您的架构，它可能适合您，也可能不适合您。您可能想先备份您的数据。

我认为它将合并具有相同主键的记录。你可以告诉它哪一方获胜。但是如果你有两条主键相同的记录不应该合并，我想你会遇到麻烦。

不过，如果你帮助它，它可能会起作用。您也许可以告诉它，例如“用户名”是主键而不是“id”。如果数据不重叠，或者提前手动调整您的串行主键。

# wind-river-workbench - Wind River 工作台自动生成的 make 文件问题

> ID：10411743
> 
> 赞同：2
> 
> 时间：2012-05-02T10:15:57.763
> 
> 标签：wind-river-workbench

在我的项目文件夹中，我有很多 svn 文件和目录，因为我的项目连接到 svn 服务器。工作台默认 make 文件生成器尝试以递归方式构建项目文件夹内的所有文件夹。问题是它会尝试构建 svn 文件和文件夹，这会减慢编译时间。我应该更改什么，以便工作台将忽略 .svn 文件夹中的所有内容。

我正在使用**工作台 3.3**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-08T18:52:29.977

`Right Click Project-> Properties->Build Targets`
不幸的是，您能做的最好的事情就是关闭递归行为并单独选择每个文件。

![截屏](../Images/119ea2dd1deb8f15181939f4c359f003.png)

您可能会更幸运地编辑`.wrmakefile`以跳过`.svn`目录。但是，这样做不会阻止 Windriver Workbench 在 .svn 目录中创建生成文件。

# c# - 使用 App_GlobalResources 文件夹时无法对 .aspx.cs 代码进行单元测试

> ID：10411748
> 
> 赞同：0
> 
> 时间：2012-05-02T10:16:29.133
> 
> 标签：c#, asp.net, .net, unit-testing, resources

我一直在为一个项目进行一些单元测试，并在尝试使用全局资源文件测试网页时遇到问题。找到了 Scott Allen 关于这个主题的一篇博文，部分解决了这个问题：http: [//odetocode.com/Blogs/scott/archive/2009/07/16/resource-files-and-asp-net-mvc-projects.aspx](http://odetocode.com/Blogs/scott/archive/2009/07/16/resource-files-and-asp-net-mvc-projects.aspx) .

但是当我关注它时，.aspx 中的代码（如下所示）找不到正确的资源：

```
AlternateText="<%$Resources: WebResources, atImageCantBeDisplayed %>" 
```

尚未找到有关如何将此约定与嵌入式资源文件一起使用的解决方案。

提示？诡计？黑客？奇怪的是，使用全局资源文件夹调试测试非常麻烦，这不应该“开箱即用”吗？还是我只是变得懒惰..

# hibernate - 删除查询（命名为原生查询）在具有 Hibernate 规范的 JPA 中不起作用

> ID：10411750
> 
> 赞同：0
> 
> 时间：2012-05-02T10:16:39.150
> 
> 标签：hibernate, jpa

我在 orm.xml 中有我命名的本机查询，

```
<named-native-query name="deleteAuthTokenByToken">
    <query><![CDATA[DELETE FROM AUTH_TOKEN WHERE TOKEN=:token]]></query>
</named-native-query> 
```

我正在尝试在我的代码中执行此查询

```
em.getTransaction().begin();
em.createNamedQuery("deleteAuthTokenByToken").setParameter("token", token).executeUpdate();
em.getTransaction().commit(); 
```

当我在 orm.xml 中进行查询时，实体管理器本身没有创建，低于异常

```
Caused by: org.hibernate.cfg.NotYetImplementedException: Pure native scalar queries are not yet supported 
```

但是当我使用 createNativeQuery() 时，相同的查询正在工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:06:42.363

结果类在这里丢失，一旦我改为

```
<named-native-query name="deleteAuthTokenByTokenAndOrgId" result-class="com.modria.jpa.DO.AuthToken">
    <query><![CDATA[DELETE FROM AUTH_TOKEN WHERE TOKEN=:token AND ORG_ID=:orgId]]></query>
</named-native-query> 
```

# .net - 如何扩展 NServiceBus 发布者

> ID：10411752
> 
> 赞同：2
> 
> 时间：2012-05-02T10:16:50.917
> 
> 标签：.net, nservicebus, publish-subscribe

我知道不应该有多个发布者发布同一事件。但是，在处理订阅的事件后，我应该如何扩展发布事件的订阅者呢？向外扩展将导致多个发布者发布相同的事件。

在谷歌上搜索时，我得到了相互矛盾的答案。一个人说我应该使用发送而不是发布，另一个消息来源说只是使用共享订阅存储。

我可能会使用共享订阅存储，但我不确定这是否能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:47:44.080

如果我没看错的话，我会利用[分销商](http://docs.particular.net/nservicebus/scalability-and-ha/distributor/)来扩大订阅者的规模。如果您使用的是 3.0，这将包括添加另一个节点和少量配置。如果您使用的是 2.x，则需要进行更多设置，包括另一个端点。网站上有一些[视觉效果](http://docs.particular.net/nservicebus/messaging/publish-subscribe/)。

# iphone - sendSynchronousRequest 被阻止的应用程序？

> ID：10411753
> 
> 赞同：1
> 
> 时间：2012-05-02T10:16:53.253
> 
> 标签：iphone, nsurlconnection

这种方法曾经表现良好，但今天奇怪的是应用程序被阻止了。我无法检查它的状态或某事。有什么建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:45:39.607

`synchronous`这就是请求的想法。如果您想要非阻塞操作，请使用`asynchronous`请求或`synchronous`在另一个线程（不是您的主线程）中使用。如果您需要进一步说明，请随时询问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:55:49.957

你应该发送一个异步请求...它不会影响 UI 并且会在后台运行。例如：

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:url]];
[[[NSURLConnection alloc] initWithRequest:request delegate:self] autorelease]; 
```

此请求在后台运行，可以使用下面提到的委托方法接收和处理数据。

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
```

由于 UI 在主线程上工作，所以 UI 不会被阻塞。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T10:54:43.983

每当您使用同步请求或核心数据操作时。记得在后台线程中运行它，因为它会停止你的 UI

[self performSelectorInBackground:@selector(updateData) withObject:nil];

# xml - 如何将变量插入 xslt 文档函数

> ID：10411754
> 
> 赞同：0
> 
> 时间：2012-05-02T10:16:53.347
> 
> 标签：xml, xslt, variables, document

好的，对不起。我有这两个 xml 文件。ProvlaLingua1.xml

```
<VENDOR>
    <IMMAGINI_SITO>True</IMMAGINI_SITO>
    <VERSIONE_SKYWALKER>1</VERSIONE_SKYWALKER>
    <CDLINGUA>IT</CDLINGUA>
</VENDOR> 
```

而这第二个 ProvaLingua2.xml

```
 <LINGUA>
          <EN>
              <TAG1>The book is on the table</TAG1>
              <TAG2>The cat is on the table</TAG2>
          </EN>
          <IT>
              <TAG1>Il libro è sul tavolo</TAG1>
              <TAG2>Finche la barca va lasciala andare</TAG2>
           </IT>
</LINGUA> 
```

所以我需要检查 ProvaLingua1 以获取 CDLINGUA 值，然后从 ProvaLingua2 中提取值。我需要类似的东西

```
<xsl:variable name="LANGUAGE" select="document('ProvaLingua1.xml')VENDOR/CDLINGUA"/>
<xsl:value-of select="document('ProvaLingua2.xml')/LINGUA/A VARIABLE HERE/TAG2" /> 
```

我需要输入变量“LANGUAGE”来提取，我不能这样做：

```
<xsl:choose>
    <xsl:when test="$language='IT'">

        <xsl:value-of select="document('ProvaLingua2.xml')/LINGUA/IT/TAG1" /><br />
        <xsl:value-of select="document('ProvaLingua.xml')/LINGUA/IT/TAG2" /><br />
    </xsl:when>

</xsl:choose> 
```

因为否则我需要为任何语言写太多行。感谢您的任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T11:34:38.757

```
 document('ProvaLingua2.xml')/LINGUA/*[name()=$language]/TAG1" /><br /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T11:37:05.950

我无法确定您在编辑之前在帖子中遇到的问题，但根据您的示例，我展示了三种解决该问题的方法，一种使用 XSLT 1.0 或 2.0 而不使用密钥，一种用于 XSLT 1.0 和 2.0，使用键和一个使用 XSLT 2.0 的键：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">

  <xsl:param name="url1" select="'test2012050202.xml'"/>
  <xsl:param name="url2" select="'test2012050203.xml'"/>

  <xsl:variable name="doc1" select="document($url1)"/>
  <xsl:variable name="doc2" select="document($url2)"/>

  <xsl:key name="tag-by-lang" match="TAG2" use="local-name(..)"/>

  <xsl:template match="/">
    <xslt2>
      <xsl:value-of select="key('tag-by-lang', $doc1/VENDOR/CDLINGUA, $doc2)"/>
    </xslt2>
    <xslt1>
      <xsl:for-each select="$doc2">
        <xsl:value-of select="key('tag-by-lang', $doc1/VENDOR/CDLINGUA)"/>
      </xsl:for-each>
    </xslt1>
    <without-key>
      <xsl:value-of select="$doc2/LINGUA/*[local-name() = $doc1/VENDOR/CDLINGUA]/TAG2"/>
    </without-key>
  </xsl:template>

</xsl:stylesheet> 
```

# c++ - 模板专业化 -> '模板参数列表太少'

> ID：10411764
> 
> 赞同：0
> 
> 时间：2012-05-02T10:17:34.313
> 
> 标签：c++, templates, compiler-errors, template-specialization

我找不到这段代码有什么问题：

```
template <class T>
class B{
    T _t;
public:
    B(T t) : _t(t) {}
    void printHello();
};

template <class T>
void B<T>::printHello(){
    std::cout << "Hello";
}
void B<char*>::printHello(){
    std::cout <<"Good bye!";
} 
```

我不断得到：

> '错误：模板参数列表太少'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:20:35.873

`template<>`在专业化之前失踪

```
template<>
void B<char*>::printHello(){
    std::cout <<"Good bye!";
} 
```

# google-maps-api-3 - 为什么 Google Maps JavaScript API v3 返回不同的搜索结果以从 maps.google.com 进行搜索

> ID：10411767
> 
> 赞同：0
> 
> 时间：2012-05-02T10:17:40.820
> 
> 标签：google-maps-api-3

我在我的应用程序中使用 google map javascript API v3。它从 maps.google.com 返回不同的结果

让我知道为什么我会得到不同的搜索结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:22:36.973

某些数据提供商将其数据许可给 Google，仅用于在 maps.google.com 上使用，而不是在 API 中使用。因此，Google 无法在 API 中使用该数据。这就是结果不同的原因。

# javascript - 结合Javascript函数

> ID：10411768
> 
> 赞同：-2
> 
> 时间：2012-05-02T10:17:47.277
> 
> 标签：javascript

我在下面有一个代码：

```
onClick="apply(this.checked, 'textBox3')" onChange="apply(this.checked, 'textBox4')" 
```

我可以将此功能合并为 1 个功能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:20:55.410

当您传入`'textBox3'`一个调用`apply`（带有 的那个`onClick`）和`'textBox4'`另一个调用（带有 的那个`onChange`）时，不，您不能进一步结合它。如果你传递相同的参数，你可以做*一些事情*，尽管它不会太多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:21:16.403

`onChange`并`onClick`在不同的事件后被解雇。结合两个处理程序的内容将具有与给定示例中的功能不同的功能！

但万一，这就是你想要的：

**编辑代码 **

```
<script>
  function newApply( checked, elems ) {
    for( var i=0; i<elems.length; i++ ) {
      apply( checked, elems[i] );
    }
  }
</script>

<input id="yourElement" onClick="newApply( this.checked, [ 'textBox3', 'textBox4' ] );" /> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T10:22:06.717

使用 jQuery 你可以。

```
$('input').bind('click change', function () {
   /* ... */
}); 
```

# jquery - 使用 jquery 为 td 设置动画

> ID：10411769
> 
> 赞同：1
> 
> 时间：2012-05-02T10:17:50.420
> 
> 标签：jquery, css, jquery-animate

我正在尝试使用 jquery 为 td 的不透明度设置动画。当单击一个 td 时，我想为任何 td 设置动画并淡入已单击的 td。

我遇到了一个奇怪的闪烁问题：

[http://jsfiddle.net/s4gtp/](http://jsfiddle.net/s4gtp/)

被点击的 td 淡入，但随后又迅速淡入和淡出。我检查了萤火虫，该事件只被触发一次。我用无序列表尝试了相同的代码，一切都按预期工作。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:26:07.547

尝试添加`.not($(this))`到第一个动画：

```
$('tr td').click(function() {
    var i = $(this).index();
    $('tr td').not($(this)).animate({'opacity': '0.1'});
    $('tr td.item' + i).animate({'opacity': "1"});
}); 
```

此外，您需要`border-collapse:separate;`在 CSS 中为表格指定。这将解决您在 Firefox 中遇到的问题：

这是为您更新的 jsFiddle > [http://jsfiddle.net/s4gtp/4/](http://jsfiddle.net/s4gtp/4/)

正如其他评论者所说，我没有看到任何“闪烁”，所以我假设你的意思是点击的元素淡出，然后淡入......

# validation - 如何自定义 JSF 验证错误消息

> ID：10411773
> 
> 赞同：23
> 
> 时间：2012-05-02T10:18:01.507
> 
> 标签：validation, jsf, message, facelets

如何自定义验证失败时出现的验证消息？

这是我的代码：

```
<h:form>
    <p><h:inputText
           id="userNo"
           title="Type a number from 0 to 10:">
       <f:validateLongRange
           minimum="3"
           maximum="6"/>
       </h:inputText>

       <h:commandButton id="submit" value="Submit"
           action="response"/>
    </p>
    <h:message showSummary="true" showDetail="false"
        id="errors1"
        for="userNo"/>
</h:form> 
```

目前消息如下所示：

```
j_idt10:userNo: Validation Error: Specified attribute is not between the expected values of 3 and 6\. 
```

这不是特别用户友好。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-02T10:23:36.657

最简单的方法是在标签中设置`validatorMessage="my custom message"`属性。`<h:inputText>`

有关更高级的方法，请阅读这篇文章[Customize validation error message in JSF 2.0](http://www.mkyong.com/jsf2/customize-validation-error-message-in-jsf-2-0/)

[这里是对您可以在 JSF 2.0.x 中覆盖的所有可用消息的完整参考](http://svn.apache.org/repos/asf/myfaces/core/branches/2.0.x/api/src/main/resources/javax/faces/Messages.properties)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-02T10:42:42.337

除了 Daniel 的回答之外，您始终可以使用`label`输入组件的属性来`j_idt10:userNo:`从错误消息中删除 client-id ( )。

例如与

```
<h:inputText id="userNo" title="Type a number from 0 to 10:"
             label="User number">
  <f:validateLongRange
           minimum="3"
           maximum="6"/>
</h:inputText> 
```

将产生：

> 用户号：验证错误：指定的属性不在预期值 3 和 6 之间。

label 属性也可以是一个 el 表达式，以动态更改这部分错误消息。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-03-30T15:25:31.660

您可以使用输入文本的 validatorMessage 属性。将 requiredMessage 属性用于所需消息，它与验证器消息不同。

```
<h:input text required ="true" validatorMessage="Enter user friendly message">
    <f:validateLongRange
        minimum="3"
        maximum="6"/>
</h:inputText> 
```

# c# - 基于其他控件的 Gotfocus 显示控件的文本

> ID：10411779
> 
> 赞同：3
> 
> 时间：2012-05-02T10:18:26.093
> 
> 标签：c#, wpf, mvvm, combobox

我是 WPF 开发的新手。

我正在使用 MVVM 模式开发一个 wpf 应用程序。我有一个“组合框”和一个“文本块”控件。在获得 ComboBox 的焦点时，文本块应显示 Combobox 的工具提示。组合框绑定到视图模型。

```
<ComboBox Name="cmbSystemVoltage" 
          ToolTip="RMS value of phase-phase voltage in kV" 
          ItemsSource="{Binding Path=SystemVoltageStore}"
          SelectedItem="{Binding Path=SelectedSystemVoltage}" 
          DisplayMemberPath="SystemVoltageLevel"/> 
```

我怎样才能做到这一点。这样做的示例代码将很有帮助。

谢谢， 苏迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:06:53.873

使用 a`DataTrigger`并绑定 per `ElementName`：

```
<StackPanel>
    <TextBlock>
        <TextBlock.Style>
            <Style TargetType="{x:Type TextBlock}">                   
                <Style.Triggers>
                    <DataTrigger Binding="{Binding ElementName=cmbSystemVoltage, Path=IsKeyboardFocusWithin}"
                                 Value="True">
                        <Setter Property="Text"
                                Value="{Binding ElementName=cmbSystemVoltage, Path=ToolTip}" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </TextBlock.Style>
    </TextBlock>
    <ComboBox Name="cmbSystemVoltage" ToolTip="RMS value of phase-phase voltage in kV" />
</StackPanel> 
```

**编辑**

如果您想在`TextBlock`我宁愿订阅的多个控件中显示工具提示`PreviewGotKeyboardFocus Event`：

```
<Window PreviewGotKeyboardFocus="Window_PreviewGotKeyboardFocus">
    <StackPanel>
        <TextBlock x:Name="toolTipIndicator" />
        <ComboBox ToolTip="Sample text" />
        <TextBox ToolTip="Other sample text" />
    </StackPanel>
</Window> 
```

.

```
void Window_PreviewGotKeyboardFocus(object sender, KeyboardFocusChangedEventArgs e)
{
    FrameworkElement element = e.NewFocus as FrameworkElement;

    if (element != null && element.ToolTip != null)
    {
        this.toolTipIndicator.Text = element.ToolTip.ToString();
    }
    else
    {
        this.toolTipIndicator.Text = string.Empty;
    }
} 
```

# php - 子目录中的 CakePHP 控制器和模型

> ID：10411780
> 
> 赞同：3
> 
> 时间：2012-05-02T10:18:33.517
> 
> 标签：php, cakephp, directory-structure

您好我想知道如何将我的组件和模型放在子子目录中，假设我有一个具有 3 个不同区域（管理员、用户、开发人员）的 Web 应用程序，每个区域执行不同的操作并具有完全不同的界面，所以我希望管理员去[http://www.site.com/admin](http://www.site.com/admin)等。

我尝试了不同的灵魂，但没有一个对我有用，任何人都可以为我提供一个如何做到这一点的例子。

我正在使用 CakePHP 2.1.1

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T14:46:19.757

是的，您可以使用[`App::build()`](http://book.cakephp.org/2.0/en/core-utility-libraries/app.html#App::build). 它所做的只是告诉 Cake 在哪里可以找到模型、控制器等。

```
App::build(array('Model' => array('/a/full/path/to/models/'))); 
```

现在 Cake 将`Model`使用`/a/full/path/to/models/`.

更好的是，有一个插件可以自动为您执行此操作：[https ://github.com/ichikaway/AutoAppBuild](https://github.com/ichikaway/AutoAppBuild)

现在，虽然这回答了最初的问题，但我认为您可能希望研究[路由前缀](http://book.cakephp.org/2.0/en/development/routing.html#prefix-routing)作为解决问题的更好方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T10:32:31.230

如果您想为每个角色创建三个不同的界面，您可以创建三个不同的布局并根据角色调用它们。可访问性方面，您可以设置 acl 组件并根据角色授予模块授权。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T21:20:47.120

控制器子目录方式不再可能。它已从最新版本的 cakephp 中删除。另一方面，您可以使用插件来代替它。deizel 是对的，你可以按照他说的去做。

# facebook - Facebook Like 按钮未显示在本地主机上

> ID：10411785
> 
> 赞同：2
> 
> 时间：2012-05-02T10:18:47.697
> 
> 标签：facebook, localhost, facebook-like

今天我在本地主机上开发的网站上没有显示 facebook like 按钮。然而，完全相同的网站显示按钮在上传到我的网络服务器时显示按钮。

任何想法为什么会发生这种情况？昨天运行良好，我没有更改代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:21:18.573

您是否在本地服务器上创建了虚拟主机？原因是因为您在 facebook 应用程序设置中设置了您的网络服务器的 url，如果您在那里设置了本地主机的 url，那么按钮将出现在您的本地网站上:)

# php - 从特定目录中的 PHP 以另一个用户身份调用 shell 脚本

> ID：10411792
> 
> 赞同：1
> 
> 时间：2012-05-02T10:19:24.777
> 
> 标签：php, linux, shell

我正在编写一个使用一些 shell 脚本的 PHP 前端。但是，问题是我必须以特定用户的身份在一个非常特定的目录（可访问但不属于 www-data）中调用脚本。

```
$command = './myscript.py 2>&1 |  tee /tmp/outputfile.txt';       // set the command
$cwd = 'cd /home/secondUser/myscript';                                // set current working directory
$wrapper = 'echo "Password" | sudo -u secondUser bash -c';        // add extra wrappers
$fullCommand = $cwd.';'.$wrapper.' "'.$command.'"';             // combine subcommands
$output = system($fullCommand); 
```

我正在尝试不同的执行命令（shell_exec，exec ...）。但是，我一直在日志中发现以下错误：

```
sudo: no tty present and no askpass program specified 
```

问题不仅在于运行 shell 脚本（例如，通过编辑 sudoers），而且在于将其作为特定的 ruser 运行。

有什么提示或技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:24:49.053

1) ## Heading ##这不是 PHP 相关的，而是 unix 相关的，所以它可能应该被移动到其他一些 stackexchange 服务器。

您提到的日志行也告诉您确切的问题是什么。Sudo 不允许您从脚本中向其传递密码，它需要一个终端 (tty) 以便它可以关闭本地回显（因此您不会输入您输入的字母作为密码）。您可以在 sudoers 文件中覆盖它。但是您可能应该以完全不同的方式解决它，要么使用私人无密码密钥以使用 SSH 的不同用户身份登录，要么允许“sudo”没有密码的命令。两者都在这里提到：

2）他们已经解决了这个问题： [https ://serverfault.com/questions/160524/using-su-inside-of-a-shell-script](https://serverfault.com/questions/160524/using-su-inside-of-a-shell-script)

# xml - 在 AS3 中的特定位置向 XML 节点添加属性

> ID：10411794
> 
> 赞同：0
> 
> 时间：2012-05-02T10:19:27.797
> 
> 标签：xml, actionscript-3, actionscript

我有这个 XML：

```
var myNode:XML = <node attribute="123"/> 
```

我知道如何向节点添加属性：

```
myNode.@otherAttribute = "abc"; 
```

但这会将属性添加到末尾。如果我想将它添加为第一个属性怎么办？我想拥有 ：

```
<node otherAttribute="abc" attribute="123"/> 
```

`insertChildAfter()`我知道可以使用or将子节点添加到特定位置，`insertChildBefore()`但我不知道属性是否可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T11:32:07.490

如果顺序很重要，那么您应该使用元素而不是属性。XML 建议说属性顺序“不重要”（参见[第 3.1 节](http://www.w3.org/TR/REC-xml/#sec-starttags)）。

> 请注意，开始标签或空元素标签中属性规范的顺序并不重要。

另一方面，元素在其父元素中*确实*具有指定的序号位置。

但是，如果我不得不猜测解决方法，我会说删除所有属性然后按照您想要的顺序读取它们*可能会*起作用。但是话又说回来，它们也可能*按字母顺序*发出，甚至是其他一些看似*任意的顺序*；它的行为充其量是不确定的，并且可能在 API 的未来实现中发生变化。

即使您*可以*在 ActionScript 中执行此操作，通过任何其他 XML 工具（如 XSLT）运行它，也不能保证*它们*会遵守属性顺序。

正确的答案是“不要那样做”。

另请参阅[此问题](https://stackoverflow.com/questions/726395/order-of-xml-attributes-after-dom-processing)以获取类似的参考点。

借用这个答案，如果您正在处理与属性顺序相关的文档*，*那么您就没有使用 XML —— 只是表面上看起来像 XML 的东西。因此，您可能*不*应该使用基于 XML 的工具/库来处理或生成该文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:38:06.070

我们有同样的问题。关键是使用 XML，而不是 XMLNodes，并使用 xml.@attributeName 添加**所有**属性。（我已经剪掉并重写了代码，所以我可以在这里发布它，但原件肯定可以工作）

```
var xml : XML = <Control/>;

xml.@name = pButton.aGetSkinName();
xml.@x = pButton.aGetSkinPosition().x;
xml.@y = pButton.aGetSkinPosition().y;          
xml.@text = pButton.textField ? pButton.textField.text : "";
[...]
xml.@enabled = pButton.enabled;
trace(xml) 
```

这个痕迹：

```
<Control name="fullscreenButtonSkin" x="428" y="12" text="" [...] enabled="true"/> 
```

# java - 使用网络摄像头作为 HTML 背景

> ID：10411795
> 
> 赞同：5
> 
> 时间：2012-05-02T10:19:45.737
> 
> 标签：java, javascript, jquery, html

我有一台带有网络摄像头的电脑，有时会在我们的夜总会显示一个网站......

我想将两者合并并显示网站，其中 html 背景源是同一台计算机上网络摄像头的视频输出。

网络摄像头不需要流式传输到互联网，网站只需要在本地获取视频信号......我不知道我们该怎么做，但效果类似，只是我们没有使用 Youtube作为视频源 - [http://www.seanmccambridge.com/tubular/](http://www.seanmccambridge.com/tubular/)！

也许这将是 html、css、jquery 和 java 或 flash 的组合（从网络摄像头访问视频）......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:23:33.407

从 HTML 的角度来看，它本质上就是这样。

```
<body>
    <video id="video-bg>
    <div id="site_wrapper">
       <!--the html-->
    </div>
</body> 
```

对于 CSS，您只需使用`position:absolute`. 顶部、左侧和右侧只是确保它们与顶部对齐，并拉伸到浏览器的宽度。

```
#site_wrapper{
    position:relative;
}

#video-bg {
    position:absolute;
    top: 0;
    left: 0;
    right: 0;
} 
```

可以通过使用`getUserMedia`将流转换为 blob 并将 blob 输入到`<video>`元素中来从相机中输入视频。有关[此 MDN 示例](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/getUserMedia#Examples)的更多信息：

```
navigator.getUserMedia({ audio: true, video: { width: 1280, height: 720 } },
    function(stream) {
      var video = document.querySelector('video');
      video.src = window.URL.createObjectURL(stream);
      video.onloadedmetadata = function(e) {
      video.play();
    };
  },
  function(err) {
    console.log("The following error occured: " + err.name);
  }
); 
```

> 网络摄像头无需流式传输到互联网，网站只需在本地获取视频信号

现在这让我有点困扰。如果您的网站*位于 online 网络上*，那么“本地”一词将表示观看者的机器，而不是您夜总会的机器。如果您想在后台播放俱乐部的视频，则需要通过网络传输视频，并让页面将其向下传输。

如果您的网站*是夜总会中的信息亭*，那么“本地”将是有意义的。您的信息亭将挂上网络摄像头，上面的代码将适用。

# php - 从具有类别 id 的平面数组形成树

> ID：10411797
> 
> 赞同：0
> 
> 时间：2012-05-02T10:19:58.483
> 
> 标签：php, arrays, recursion, tree

我有大量的遗留数据，格式有点像这样：

```
Name         | Bid      
-----------------------
Animal       | 1
Canine       | 11
Dog          | 111
Bulldog      | 1111
Wolf         | 112
Hyena        | 113
Feline       | 12
Cat          | 121
Lion         | 122 
```

该`Bid`字段是一个描述类别关系的字符串，这意味着数据结构如下所示：

```
Animal
  Canine
    Dog
      Bulldog
    Wolf
    Hyena
  Feline
    Cat
    Lion 
```

从数据构建数组树的最佳方法是什么？源数据是一维的，因此难以使用递归。一段时间以来，我一直在尝试提出循环的逻辑，但还没有提出合理的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:53:27.780

```
$data = array(
  array('Name' => 'Animal',  'Bid' => '1'  ),
  array('Name' => 'Canine',  'Bid' => '11'  ),
  array('Name' => 'Dog',     'Bid' => '111' ),
  array('Name' => 'Bulldog', 'Bid' => '1111'),
  array('Name' => 'Wolf',    'Bid' => '112' ),
  array('Name' => 'Hyena',   'Bid' => '113' ),
  array('Name' => 'Feline',  'Bid' => '12'  ),
  array('Name' => 'Cat',     'Bid' => '121' ),
  array('Name' => 'Lion',    'Bid' => '122' ),
);

$struct = array(
  'children' => array()
);

foreach ($data as $entry) {
  $parent =& $struct;

  foreach (str_split($entry['Bid'], 1) as $val) {
    if (!isset($parent['children'][$val])) {
      // if not, we create an empty entry
      $parent['children'][$val] = array(
        'entry' => array(),  // no content
        'children' => array()  // no children
      );
    }

    $parent =& $parent['children'][$val];
  }

  $parent['entry'] = $entry;
}

print_r($struct); 
```

并使用：

```
function render($elements, $depth = 0) {
  foreach ($elements as $element) {
    printf("%s%s\n", str_repeat(' ', $depth * 2), $element['entry']['Name']);
    render($element['children'], $depth + 1);
  }
}

render($struct['children']); 
```

你会得到：

```
Animal
  Canine
    Dog
      Bulldog
    Wolf
    Hyena
  Feline
    Cat
    Lion 
```

# javascript - Backbone.js - 使用 jquery mobile 渲染集合，无需样式

> ID：10411800
> 
> 赞同：2
> 
> 时间：2012-05-02T10:20:05.700
> 
> 标签：javascript, jquery-mobile, backbone.js

我正在创建一个使用 backkbone.js 和 jquery mobile 的移动视图。

我有一个呈现到页面的集合，样式化为使用 jquery mobile 的[listview](http://jquerymobile.com/demos/1.1.0/docs/lists/index.html)。该集合使用正确的 html 加载并呈现在页面上，但呈现为无样式列表，而不是在 jquery mobile 中应如何呈现。如果我然后检查列表，将其复制为 html，并将其作为静态 html 粘贴到我的 html 页面中，该 html 将正确显示！

我究竟做错了什么？这是我第一次涉足backbone.js 和jquery mobile，所以它可能很简单。

*代码：*

我的模板：

```
<script id="change-template" type="text/template">
<a href="#">{{ Description }}</a>
<p>{{ ChannelLabel }}</p>
</script>

<script id="changes-template" type="text/template">
<ul id="changes-list" data-role="listview" data-inset="false" data-filter="true"></ul>
</script> 
```

我的看法：

```
window.ChangeView = Backbone.View.extend({

    tagName: 'li',

    initialize: function() {
        _.bindAll(this, 'render');
        this.template = _.template($('#change-template').html());
    },

    render: function() {
        this.$el.html(this.template(this.model.toJSON()));
        return this;
    }
})

window.ChangesView = Backbone.View.extend({

    tagName : "div",

    initialize: function () {
        _.bindAll(this, 'render');
        this.template = _.template($('#changes-template').html());
        this.collection.bind("reset", this.render);
    },

    render: function () {

        var collection = this.collection;

        // Render the template
        $(this.el).html(this.template({}));

        // Then get a handle to the element inside the template.
        var $changes = this.$('#changes-list');

        this.collection.each(function(change) {
            var view = new ChangeView({model: change, collection: collection});
            $changes.append(view.render().el);
        })

        return this;
    }
}); 
```

示例 HTML 输出：

```
<div id="changes" data-role="content" class="ui-content" role="main">
<ul id="changes-list" data-role="listview" data-inset="false" data-filter="true"><li>
  <a href="#">Link Up</a>
  <p>GF1A-R2P24 - 23</p>
  </li><li>
  <a href="#">Link Down</a>
  <p>GF1A-R2P24 - 23</p>
  </li></ul>
</div> 
```

这是我加载页面的方式：

```
$(document).bind('pageinit',function () {

    window.changes = new Changes();
    var view = new ChangesView({ collection: changes, el:"#changes" });
    changes.fetch();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T11:24:47.590

好的，所以通过环顾四周，我发现添加这个解决了这个问题：

```
$(this.el).trigger( "pagecreate" ); 
```

但这感觉不对 - 为什么我需要自己触发该事件？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T20:45:27.497

如果所有 DOM 更改都在 jQuery Mobile 开始设置页面样式之前完成，它会工作得很好。但是，Backbone.js 的事件会导致页面的某些部分异步重新呈现，从而使页面的某些部分没有样式。

调用 .trigger("pagecreate") 或 "create" 会触发 jQuery Mobile 重新设置页面/元素的样式。

（每次 jQuery Mobile 显示一个页面时，它都会读取 data- 属性并应用适当的样式。）

这是必要的，因为 jQuery Mobile 和 Backbone.js 是独立的框架。

# design-patterns - 如何解决：多个 if 的代码或多或少相同？

> ID：10411801
> 
> 赞同：1
> 
> 时间：2012-05-02T10:20:13.907
> 
> 标签：design-patterns, if-statement, method-call

我有这个代码：

```
if(condition 1) {
    if(condition X) {
        myMethod(..., paramx, ...);
    }

    if(condition Y) {
        myMethod(..., paramy, ...);
    } 
 }

if(condition 2) {
    if(condition A) {
        myMethod(..., parama, ...);
    }

    if(condition B) {
        myMethod(..., paramb, ...);
    } 
 }
... 
```

等等。如您所见，我根据条件调用了相同的方法，只使用了一个不同的参数。有什么优雅的方法来解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:27:23.300

```
if(condition 1){
   if(condition X){  
      dependentVar = paramx;  
   }

   if(condition Y){
      dependentVar = paramy;
   } 
}

if(condition 2){
   if(condition A){
      dependentVar = parama;
   }

   if(condition B){
      dependentVar = paramb;
   } 
} 
```

... 终于 ：

```
myMethod(..., dependentVar, ...); 
```

*如果没有，这将提高代码的可读性。*

**显然，这是假设恰好（并且最多）满足其中一个条件**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:31:16.067

[**策略模式**](http://en.wikipedia.org/wiki/Strategy_pattern)是您需要使用的。决策将在策略对象中做出，您只需将它们一一调用，直到其中一个做出肯定答复。

# drupal - drupal 没有从下拉列表中发送选定的值

> ID：10411803
> 
> 赞同：0
> 
> 时间：2012-05-02T10:20:20.747
> 
> 标签：drupal, drupal-7, drupal-modules

我想问为什么drupal没有根据我选择的内容发送价值 ![插入](../Images/2939cd9bc09938a0678ff3632b63e0eb.png) 看看“Pada JP ke ...”我选择了“6”，当我提交它时

![提交](../Images/8a4d166d42969362ef478307f455ac42.png) drupal 发送“3”而不是“6”，我的代码在这里

```
$def = !empty($form_state['values']['jpke']) ? $form_state['values']['jpke'] : 1;
$query1 = db_select('1_jupe', 'jupe')->fields('jupe', array('no'));
$options2 = $query1->execute()->fetchCol(); 
$form['desc1']['jpke'] = array(
  '#type' => 'select',
  '#default_value' => $def,
  '#title' => t('Pada JP ke ...'),
  '#options' => $options2, // the list only has 4 values (1,2,3,6)
); 
```

插入/提交代码

```
$entry = array(  
'jp_ke' => $form_state['values']['jpke'],
'nama_lomba' => $form_state['values']['nama_lomba'],
'kategori' => $form_state['values']['kategori'],  
);
$tabel = '1_jp_lomba';
$return = insert_form($entry,$tabel);
dpm($form_state['values']); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:39:32.990

能不能把完整的代码在这里打印出来让我们正确理解。我的意思是说包含这个表单的表单和表单的提交功能。还有一件事可以帮助您。在 form_state 值数组中，我们将从选择列表中获取所选值的键。它不会给出值。

# php - 提交按钮什么都不做

> ID：10411806
> 
> 赞同：1
> 
> 时间：2012-05-02T10:20:30.460
> 
> 标签：php, javascript, html

我在表单中有一个提交按钮，并使用 PHP 编写脚本以通过电子邮件发送表单。当按下按钮时，没有任何反应，甚至没有像未安装 PHP 时那样显示 PHP 代码。我已经在机器上测试了其他简单的邮寄表格，它们显示了代码。这个什么都不做。

HTML 代码：

```
<form name="apply" method="post" action="mail.php">                 
<font class="error-message"></font>
    <div class="form-content">
        <div class="left-label">
            <label>First and Last name:</label>
            <label>School type:</label>
            <label>Practice name:</label>
            <label class="address">Address:</label>
    <label class="address2">Address (cont):</label>
    <label class="zip">Zip Code:</label>
    <label class="city">City:</label>
            <label>Website:</label>
            <label>Email:</label>
        </div>
        <div class="right-fields">                          
            <input type="text" name="fist-last-name" placeholder="First & Last name" title="Please enter First & Last name." />
            <select name="select-school">
                <option>--select--</option>
                <option>Dental Assistant School</option>
                <option>Medical Assistant School</option>
                <option>Pharmacy Technician School</option>
                <!-- <option>Personal Trainer School</option> -->
                <option>Other School</option>
            </select>
            <input type="text" name="practice-name" placeholder="Practice name" title="Please enter your practice name." />
            <textarea name="address1" placeholder="Address 1" title="Please enter address1"></textarea>
            <textarea name="address2" placeholder="Address 2" title="Please enter address2"></textarea>
            <div class="clear"></div>
            <input type="text" name="zipcode" placeholder="Zip Code" title="Please enter your zipcode." /><br>
            <input type="text" name="city" placeholder="City" title="Please enter the city where you live." />
            <input type="text" name="website-address" placeholder="Website" title="Please enter your website address." />
            <input type="text" name="email" placeholder="Email" title="Please enter your email address." />
            <input type="submit" value="Submit"/>
        </div>
    </div>
    <div class="clear"></div>
</form> 
```

PHP代码，`mail.php`：

```
<?php

$fist_last_name     = $_POST["fist-last-name"];

$school_type        = $_POST["select-school"];

$practice_name      = $_POST["practice-name"];

$address1           = $_POST["address1"];

$address2           = $_POST["address2"];

$zipcode            = $_POST["zipcode"];

$city               = $_POST["city"];

$website            = $_POST["website-address"];

$email              = $_POST["email"];

$body   = " <table>

                <tr><th>First Last name:</th><td>".$fist_last_name."</td></tr>

                <tr><th>School type:</th><td>".$school_type."</td></tr>

                <tr><th>Practice name:</th><td>".$practice_name."</td></tr>

                <tr><th>address1:</th><td>".$address1."</td></tr>

                <tr><th>address2:</th><td>".$address2."</td></tr>

                <tr><th>Zipcode:</th><td>".$zipcode."</td></tr>

                <tr><th>City:</th><td>".$city."</td></tr>

                <tr><th>Website:</th><td>".$website."</td></tr>

                <tr><th>Email:</th><td>".$email."</td></tr>

            </table>";

mail('emailaddress@domain.com','No Reply',$body,"From: noreply@domain.com");

?> 
```

这是表单验证的 JavaScript：

```
/* Form validation */

$("form[name='apply']").submit(function(){
    var error = true;
    var text_fields = ["fist-last-name", "practice-name", "zipcode", "city", "website-address", "email"];
    $.each(text_fields,function(key,value){
        if(!$.trim($("input[name='"+value+"']").val()) == "") {
            $("input[name='"+value+"']").css({'border-color': '#ccc'});
        }
        else{
            $("input[name='"+value+"']").css({'border-color': 'red'});
            error = false;
        }
    });
    if($("form[name='apply'] select[name='select-school']").val() == "--select--") {
        $("form[name='apply'] select[name='select-school']").css({'border-color': 'red'});
        error = false;
    }
    else {
        $("form[name='apply'] select[name='select-school']").css({'border-color': '#ccc'});
    }
    var textarea_fields = ["address1", "address2"];
    $.each(textarea_fields,function(key,value){
        if(!$.trim($("form[name='apply'] textarea[name='"+value+"']").val()) == "" ) {
            $("form[name='apply'] textarea[name='"+value+"']").css({'border-color': '#ccc'});
        }
        else {
            $("form[name='apply'] textarea[name='"+value+"']").css({'border-color': 'red'});
            error = false;
        }
    });
    console.log(error);
    if(error == true) {
        $.post('mail.php',$("form[name='apply']").serialize(),function(data){
            console.log(data);
        });
    }
    return false;
});

$("form[name='apply'] input[type='text'], form[name='apply'] textarea").blur(function(){
    if($.trim($(this).val()) == ""){
        $(".error-message").text($(this).attr('title'));
        $(this).css({'border-color': 'red'});
    }
    else {
        $(this).css({'border-color': '#ccc'});
        $(".error-message").text('');
    }
});
$("form[name='apply'] input[type='text'], form[name='apply'] textarea").bind("keydown",function(){
    if($.trim($(this).val()) == ""){
        $(".error-message").text($(this).attr('title'));
        $(this).css({'border-color': 'red'});
    }
    else {
        $(this).css({'border-color': '#ccc'});
    }
}); 
```

此代码中出现错误：

```
$("form[name='apply']").submit(function(){
    var error = true;
    var text_fields = ["fist-last-name", "practice-name", "zipcode", "city", "website-address", "email"];
    $.each(text_fields,function(key,value){
        if(!$.trim($("input[name='"+value+"']").val()) == "") {
            $("input[name='"+value+"']").css({'border-color': '#ccc'});
        }
        else{
            $("input[name='"+value+"']").css({'border-color': 'red'});
            error = false;
        }
    });
    if($("form[name='apply'] select[name='select-school']").val() == "--select--") {
        $("form[name='apply'] select[name='select-school']").css({'border-color': 'red'});
        error = false;
    }
    else {
        $("form[name='apply'] select[name='select-school']").css({'border-color': '#ccc'});
    }
    var textarea_fields = ["address1", "address2"];
    $.each(textarea_fields,function(key,value){
        if(!$.trim($("form[name='apply'] textarea[name='"+value+"']").val()) == "" ) {
            $("form[name='apply'] textarea[name='"+value+"']").css({'border-color': '#ccc'});
        }
        else {
            $("form[name='apply'] textarea[name='"+value+"']").css({'border-color': 'red'});
            error = false;
        }
    });
    console.log(error);
    if(error == true) {
        $.post('mail.php',$("form[name='apply']").serialize(),function(data){
            console.log(data);
        });
    }
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:58:15.790

您的 Javascript 正在阻止表单提交。当您`return false`在表单的`submit`事件中时，它会阻止提交表单。

我认为您想返回`error`似乎是布尔值以指示验证错误的变量。

尝试：

```
$("form[name='apply']").submit(function(){

    .... JS code ....
    return error;
}); 
```

使用它，如果没有验证错误，表单将提交。此外，您的`error`布尔值有点误导，如果`error`为真那么存在验证错误会更合乎逻辑，但您将其反转 - 不会对实际代码执行产生任何影响，只是一个可读性点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:26:28.707

尝试`if(isset($_POST['practice-name'])){ die('values posted'); }else{ die('nothing was posted'}`让我们知道它的作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T10:28:44.497

首先，尝试注释掉 mail.php 中的所有内容并做一些非常简单的事情，例如：

```
<?php echo "This works!"; ?> 
```

只是看看它是否真的提交到页面。如果是这样，问题将出在“发布”变量或输入表单上。尝试使用 mail.php 的输入表单创建一个新的 html 页面，但除了文本框和提交按钮之外什么都没有。如果它提交并且 mail.php 接收到所有数据，那么问题将与文件以外的其他内容有关。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T10:36:43.980

既然您说表单根本没有被提交——我测试了代码并且它确实按原样提交了——**那么你必须有一些 JavaScript 函数或事件侦听器来阻止表单被提交**。

您的 HTML 有效，并且表单提交确实告诉浏览器提交表单。这不可能是 PHP 问题，因为如果提交甚至没有发生，那么如果表单本身正确显示，PHP 就不会在其中发挥作用。

# .net - 使用正则表达式拆分字符串

> ID：10411812
> 
> 赞同：0
> 
> 时间：2012-05-02T10:21:16.913
> 
> 标签：.net, regex

我有一个像这样的字符串：

```
personname=aanch&personaddress=Jammu & Kashmir&personmobile=9876543210 
```

我想要的输出是：

```
personname=aanch
personaddress=Jammu & Kashmir
personmobile=9876543210 
```

是否可以使用正则表达式来拆分字符串`&`并获得上面的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:51:37.310

通过重新编辑问题，我确实看到了一个可能实际可行的解决方案：

```
splitArray = Regex.Split(subjectString, 
    @"&    # Split on a &
    (?=    # but only if it's followed by...
     \w+   # a series of alphanumeric characters
     =     # and an equals sign
    )      # End of lookahead assertion", 
    RegexOptions.IgnorePatternWhitespace); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:37:24.350

编辑 - 随着问题的改变

```
 var regex = new Regex(@"&(?<=[^&=]+=)") 
```

哪个故障是

＆ - 匹配 ＆

(?<=[^&=]+=) - 匹配但不包括至少一个不是 & 或 = 后跟 = 的字符

或者，如果您实际上在名称和值之后，您可以执行以下操作

```
var regex=new Regex(@"(?>^|&)(?<name>.*?)=(?<value>.*?)(?=$|&[^&]+?=)");
var text="personname=aanch&personaddress=Jammu & Kashmir&personmobile=9876543210";
foreach (Match match in regex.Matches(text)) {
    var name=match.Groups["name"].Value;
    var value=match.Groups["value"].Value;
    // Do something with values
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T10:46:35.087

但是为什么需要 reg-ex 来拆分字符串。您可以使用普通的 C# 字符串拆分功能来获得所需的结果

```
string text = "ABC&DEF&GHI&JK&L&MNO&P&Q"
var splitString = text.split(text,"&"); 
```

拆分后的字符串将作为数组存储在`splitString`

# android - Android：如何启用设备管理？

> ID：10411816
> 
> 赞同：0
> 
> 时间：2012-05-02T10:21:26.247
> 
> 标签：android, admin, device

我想通过我的应用程序关闭屏幕，但我无法获得设备管理员。

这是我的代码：

```
DevicePolicyManager mDPM;
ComponentName mDeviceAdminSample;
private static final int REQUEST_CODE_ENABLE_ADMIN = 1;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mContext=this;

    mDeviceAdminSample = new ComponentName(this, Act_01_LockScreen.class);
    mDPM = (DevicePolicyManager) getSystemService(Context.DEVICE_POLICY_SERVICE);

}

@Override
public void onResume() {
    super.onResume();

    Boolean mAdminActive = isActiveAdmin();

    if (!mAdminActive) {

            // Launch the activity to have the user enable our admin.
            Intent intent = new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
            intent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN, mDeviceAdminSample);
            intent.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION,
                    mContext.getResources().getString(R.string.app_name));
            startActivityForResult(intent, REQUEST_CODE_ENABLE_ADMIN);
            // return false - don't update checkbox until we're really active

    }else{
        mDPM.lockNow();
    }

}

private boolean isActiveAdmin() {
    return mDPM.isAdminActive(mDeviceAdminSample);
} 
```

}

这段代码没有告诉我任何东西。我该怎么办？

非常感谢...

请不要向我显示任何没有解决方案的链接...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:28:13.683

作为一种解决方法，您可以根据亮度级别的变化尝试这个技巧。

```
Window window = getWindow();
WindowManager.LayoutParams windowParams = window.getAttributes();
windowParams.screenBrightness = 0;
window.setAttributes(windowParams); 
```

# java - 在本地测试并发

> ID：10411817
> 
> 赞同：0
> 
> 时间：2012-05-02T10:21:27.650
> 
> 标签：java, testing, concurrency

出现了一个问题，我们无法确定。它看起来像是共享单例 bean 的并发问题，但这只是假设。

我需要一种在本地重新创建此错误的方法。只有当两个线程以相同的千分之一秒同时处理时，它才会浮出水面。我想知道有没有办法在本地测试这个而不必在调试模式下进行钓鱼。

我们的过程很简单。

它从主题过程中获取对象并丰富然后发送要发布到主题的新对象。我们有两个监听线程。

使用的技术

*   IDE日食
*   LDAP 主题
*   代码 Java/Spring

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:35:51.937

细节太少，无法给出准确答案。我会重构代码，以便所有同步代码都与业务逻辑分离。然后，在测试期间，您可以用调用`yeld()`方法并使用易失性/原子变量的代码替换您的业务逻辑，以检查在此代码点以及在此特定时间是否有预期的线程数。然后使用任何并发测试框架（我喜欢多线程tc）。在下面你可以找到我用来测试我的算法的优先队列实现，该算法应该对队列进行并发操作

```
class YeldingHeap implements PriorityQueue<Integer> {

private AtomicInteger concurrentReads = new AtomicInteger();
private AtomicInteger concurrentWrites = new AtomicInteger();

@Override
public int size() {
    read();
    return 0;
}

@Override
public void insert(Integer element) {
    write();
}

@Override
public Integer popMax() {
    write();
    return null;
}

private void write() {
    int writes = concurrentWrites.incrementAndGet();
    int reads = concurrentReads.incrementAndGet();
    assertEquals(writes, 1, "more than 1 thread is writing");
    assertEquals(reads, 1, "other thread is reading while this thread is writing");
    Thread.yield();
    writes = concurrentWrites.decrementAndGet();
    reads = concurrentReads.decrementAndGet();
    assertEquals(writes, 0, "more than 1 thread is writing");
    assertEquals(reads, 0, "other thread is reading while this thread is writing");
}

private void read() {
    concurrentReads.incrementAndGet();
    int writes = concurrentWrites.get();
    assertEquals(writes, 0, "other thread is writing while this thread is reading");
    Thread.yield();
    writes = concurrentWrites.get();
    assertEquals(writes, 0, "other thread is writing while this thread is reading");
    concurrentReads.decrementAndGet();
}

} 
```

# git - 如何将我的代码恢复到特定的提交，同时保持推送的提交？

> ID：10411822
> 
> 赞同：1
> 
> 时间：2012-05-02T10:21:45.663
> 
> 标签：git

想象一下以下提交：

```
commit 1
commit 2
commit 3 
```

我在其中有文件`a,b`和`c`. 我添加了文件`d`，并在接下来的 3 次提交中对其进行了修改（我正在 heroku 上测试一些 JS）。我现在还有三个提交：

```
commit 4 ( this add the d file, the other 2 commits only modify it )
commit 5
commit 6 
```

如何`commit 3`在保持推送的提交 4 5 和 6 的同时将工作目录返回到状态？（该文件`d`在提交 3 时不应该存在，或者我希望它至少显示为未跟踪）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:25:54.373

`git reset <commit3>``<commit3>`提交 3 的 SHA1在哪里（或`HEAD^^^`）会将工作目录重置为提交 3，同时保持`d`未跟踪状态。

（但是，如果您打算在一次提交中重新添加它，我建议您`git rebase -i HEAD^^^`改为这样做；然后您可以将三个最新的提交压缩在一起。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:28:39.630

看看这里的“探索历史”：

[http://schacon.github.com/git/gittutorial.html](http://schacon.github.com/git/gittutorial.html)

还：

[http://book.git-scm.com/4_undoing_in_git_-_reset,_checkout_and_revert.html](http://book.git-scm.com/4_undoing_in_git_-_reset,_checkout_and_revert.html)

并使用`git revert`或`git reset`。

如果您只想检查以前提交中的内容，您可以`git checkout <commit>-<filename>`阅读有关所有这些内容的手册页；）

# javascript - 选择框属性更改时未触发 Webkit Mutation Observer 回调

> ID：10411824
> 
> 赞同：14
> 
> 时间：2012-05-02T10:22:04.453
> 
> 标签：javascript, forms, mutation-observers

我正在尝试使用新的[Mutation Observer](http://updates.html5rocks.com/2012/02/Detect-DOM-changes-with-Mutation-Observers)功能监视对选择框（或嵌套`option`元素）的更改。但是，只有“setAttribute”会为我触发突变观察者的回调。

这是我正在使用的代码：

```
~function(doc, $) {
    var select = $('select');

    // http://www.w3.org/TR/dom/#mutation-observers
    var observer = new WebKitMutationObserver(function(mutations) {
        alert(mutations.length + " mutations happened");
    });

    observer.observe(select, {
        // monitor descendant elements – changing `selected` attr on options
        subtree: true,
        attributes: true
    });

    // this triggers Observer's reaction, but doesn't update select box UI
    select.setAttribute('value', 'whee'); 
    // this updates select box UI, but doesn't trigger mutation observer's callback
    select.value = "whee";
    // this also updates the UI, but doesn't trigger mutation observer's callback
    select.getElementsByTagName('option')[0].selected = true;
    //
    // neither does manual selecting of options trigger mutation observer unfortunately :(

    button.addEventListener('click', function(e) {
        e.preventDefault();
        // my goal is to react to this change here 
        select.value = Math.random() > .5 ? "whee" : "whoa";
    }, false);

}(document, function(selector) { return document.querySelector(selector); });​ 
```

这是这段代码在[运行 http://jsfiddle.net/gryzzly/wqHn5/](http://jsfiddle.net/gryzzly/wqHn5/)

我想对属性的更改（`selected`on`<option>`或`value`on `<select>`）做出反应，任何关于为什么观察者不做出反应的建议都非常受欢迎！

我正在 Mac OS X 上的 Chrome 18.0.1025.168 中对此进行测试。生产代码当然也有`moz`构造函数的前缀和无前缀版本，这是测试代码。

**UPD。**

也在 Firefox Nightly 中测试了代码，它的行为方式与 Chrome 以及 Chrome Canary 中的行为相同。我已经为两种浏览器填充了错误：

*   [https://bugzilla.mozilla.org/show_bug.cgi?id=757077](https://bugzilla.mozilla.org/show_bug.cgi?id=757077)
*   [https://code.google.com/p/chromium/issues/detail?id=128991](https://code.google.com/p/chromium/issues/detail?id=128991)

如果您也觉得这个问题很烦人，请对这些错误发表评论并投票。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T17:49:26.813

@gryzzly，我用详细的回复更新了 Chromium 错误：[http ://code.google.com/p/chromium/issues/detail?id=128991#c4](http://code.google.com/p/chromium/issues/detail?id=128991#c4)

> Mutation Observers 仅限于观察 DOM 序列化状态。如果您想知道 Mutation Observers 是否可以观察到某些东西，请查看该元素的 innerHTML 输出。如果您可以看到状态变化反映在产生的标记的变化中，那么 Mutation Observers 应该能够听到它。

TL；DR：这是按预期工作的；要观察像 HTMLSelectElement.value 这样的 IDL 属性的变化，像 onclick 或 onchange 这样的输入事件可能是您最好的选择。

# php - POST 事件后使用“返回”按钮会中断页面

> ID：10411827
> 
> 赞同：0
> 
> 时间：2012-05-02T10:22:09.993
> 
> 标签：php, post

这里有一个搜索功能运行[http://www.ssaib.co.uk/security-provider-search/](http://www.ssaib.co.uk/security-provider-search/)工作得很好，你会得到一个结果集。但是，当您获得结果时，如果您选择结果并单击“更多”，然后尝试“返回”分页符而不是重新提交帖子。似乎在任何地方都找不到提及这一点。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:27:38.233

你用什么浏览器？

我刚刚对其进行了测试，它可以在最新的 Chrome、Firefox、Opera、Safari 和 Internet Explorer 上运行。返回后，您将再次访问搜索结果。

编辑：

你有两个选择。

第一的：

*   使用 GET 变量而不是 POST 提交搜索。这要好得多，因为搜索引擎也可以抓取搜索结果。

第二：

如果您仍然想使用 POST，那么智能搜索系统会像这样摆脱 POST 重定向：

*   目标 URL 为“search.php”的表单（或您正在使用的任何一个）
*   提交到 search.php 后，您将进行数据库搜索并为该搜索分配一个唯一的“id”
*   search.php 然后将用户重定向到在 URL（如 '/searchresults/23442/'）或 GET 变量（'/searchresults/?id=23442' ）。在该页面中，向用户显示通过 search.php 脚本找到的搜索结果。
*   这意味着如果用户点击“返回”，他们将返回到他们的搜索结果页面。这还有一个好处是您不必在每次用户单击“返回”时再次搜索数据库。浏览器永远不会返回通过标头重定向的 URL，因此即使用户返回两次，它也不会破坏任何内容。
*   一段时间后，您应该使数据库中的“旧”搜索无效，或者如果用户再次要求相同的 ID，则重新生成它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:37:06.857

您应该`GET`用于检索。但是，如果您确实使用`POST`，则应该*始终*（在我看来）使用[Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)。这通常需要您使用`SESSION`来保持重定向之间的状态。

# wxpython - wxPython 有原生的 FlowLayoutManager/FlowSizer/WrapSizer 实现吗？

> ID：10411830
> 
> 赞同：3
> 
> 时间：2012-05-02T10:22:47.010
> 
> 标签：wxpython

我正在尝试在 wxPython 2.8（使用 Python 2.7）中编写一个 GUI，其中涉及在 sizer 中布置几个 wx.StaticTexts。我想要的是一个sizer，如果它检测到当前行的宽度比窗口的宽度宽，它将自动将任何其他元素添加到新行。

研究告诉我，这类似于 Java FlowLayoutManager 和 wxWidgets，wxPython 试图移植到 Python 的项目将其作为 wxWrapSizer。然而，据我所知，wxWrapSizer 在 wxPython 中不存在。文档可以在这里找到：http: [//docs.wxwidgets.org/trunk/classwx_wrap_sizer.html](http://docs.wxwidgets.org/trunk/classwx_wrap_sizer.html)

wxPython 本身是否支持这个？

感谢您的帮助。

笔记：

我不能使用单个 wx.StaticText 并调用 wx.StaticText.Wrap(width) 因为我需要单独跟踪项目。如果有帮助，请假装它们是图像而不是 wx.StaticTexts。

我发现了一个从 2006 年提交给 wxpython-users.com 的实现。我更喜欢使用 wxPython 内置的东西，但最坏的情况我可以试一试。 [http://wxpython-users.1045709.n5.nabble.com/Flow-Sizer-td2339182.html](http://wxpython-users.1045709.n5.nabble.com/Flow-Sizer-td2339182.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:40:14.903

[`wx.WrapSizer`](http://wxpython.org/Phoenix/docs/html/WrapSizer.html)包装在 wxPython 2.9 中。如果你升级到那个，你就会有那个小部件可用。

# javascript - 使用 jQuery 更改正文 html

> ID：10411831
> 
> 赞同：3
> 
> 时间：2012-05-02T10:22:47.870
> 
> 标签：javascript, jquery, html

如何使用 jquery 更改 body 标记的 html。

我有这个 body 标签`<body>`当我点击一个按钮时，body 必须更改为
`<body ontouchmove="BlockMove(event);>`

我怎样才能用`jquery`and做到这一点`javascript`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T10:25:51.477

```
$('#buttonId').click(function(){
     $('body').attr('ontouchmove', "BlockMove(event)")
}) 
```

或者更好的是，不要更改 DOM 结构，只需将回调绑定到事件：

```
$('#buttonId').click(function(){
     $('body').bind('touchmove', BlockMove);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T10:27:17.103

无需更改真实属性 - 只需将函数引用*直接*添加到 body 标签：

```
$('#button').click(function() {
    document.body.ontouchmove = BlockMove;
}); 
```

或jQuery方式：

```
$('#button').on('click', function() {
    $('body').on('touchmove', BlockMove);
}); 
```

请注意，在后一种情况下，您需要使用`ev.originalEvent`来访问原始事件对象，而不是 jQuery 的规范化事件，它不知道触摸属性。

在 jQuery 版本中，您还需要确保这不会多次发生，否则每次按下按钮都会一遍又一遍地添加到事件处理链`BlockMove`中*。*在 DOM0 版本中，这无关紧要，因为它会*覆盖*事件处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:25:28.830

试试这个（未经测试的代码）：

```
$(body).attr("ontouchmove","blockMove(event)"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T10:27:10.610

我认为您可以在单击按钮时将事件绑定到正文：

```
$('button').click(function(){
     $("body").bind('touchmove', BlockMove);
}); 
```

# javascript - 如何使用 JavaScript 从字符串中提取十进制数

> ID：10411833
> 
> 赞同：10
> 
> 时间：2012-05-02T10:22:57.547
> 
> 标签：javascript, regex, jsp, struts-1

我想提取十进制数`265.12`或从具有值或或或`0.0`的字母数字字符串（例如金额）中提取并使用它在 JSP 中应用 struts 逻辑标记。不确定如何在 JavaScript 的帮助下提取数字。`$265.12+``$265.12-``$0.0+``$0.0-`

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-02T10:25:38.527

你可以像这样使用正则表达式，

[**现场演示**](http://jsfiddle.net/Y2qdV/)

```
var amount = "$265.12+";
var doublenumber = Number(amount.replace(/[^0-9\.]+/g,"")); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-02T10:27:42.460

如果没有错误检查，以下将执行：

```
var string = "$123123.0980soigfusofui"
var number = parseFloat(string.match(/[\d\.]+/)) 
```

123123.098

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:38:03.697

也试试这个，

```
<script type="text/javascript">
function validate(){
    var amount =  $("#amount").val();
    alert(amount.split(".")[1]);
} </script>
</head> 
<body>
<input type="hidden" name="amount" id="amount" value="25.50">
<input type="submit" onclick="validate();"> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-02T10:28:09.863

您可能对这个用于格式化货币的库感兴趣[http://josscrowcroft.github.com/accounting.js/](http://josscrowcroft.github.com/accounting.js/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-10-29T18:06:04.563

一个更优雅的解决方案，也是一种避免`0.7700000004`javascript数学的方法：

`var num = 15.3354; Number(String(num).substr(String(num).indexOf('.')+1));`

结果将始终是精确的小数位数。也是`prototype`为了更容易使用

`Number.prototype.getDecimals = function () { return Number(String(this).substr(String(this).indexOf('.')+1)); }`

所以现在就`15.6655.getDecimals() ==> 6655`

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-02T10:32:52.713

利用 ：

```
var str = parseFloat("$265.12".match(/[\d\.]+/))
alert(str % 1); => 0.12000000000000455 
```

# mysql - MYSQL - 如何获得每条记录的最高值？

> ID：10411834
> 
> 赞同：0
> 
> 时间：2012-05-02T10:23:20.947
> 
> 标签：mysql, sql

例如我有这些表......

```
ID | SCORE | DATE
 1 | 10    | 2-2-2012
 2 | 20    | 2-2-2012
 3 | 20    | 2-2-2012
 2 | 5     | 4-2-2012
 4 | 30    | 4-5-2012
 1 | 20    | 5-5-2012 
```

我想得到每个 ID 的最新日期的分数。

我的预期输出是...

```
ID | SCORE | DATE
 1 | 20    | 5-5-2012
 2 | 5     | 4-2-2012
 3 | 20    | 2-2-2012
 4 | 30    | 4-5-2012 
```

是否可以？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:27:07.380

```
 SELECT t1.*
      FROM tbl t1
INNER JOIN (SELECT MAX(date) max_date,
                   id
              FROM tbl
          GROUP BY id) t2 ON t1.id = t2.id
                         AND t1.date = t2.max_date 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T10:37:25.130

尝试

```
SELECT id, score, date
FROM   table1 t1
WHERE  date=(SELECT MAX(t2.date)
              FROM table1 t2
              WHERE t1.id = t2.id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:33:47.827

如果您不关心如果具有相同 id 的两行具有相同的日期，则获得最高分：

```
select *,max(DATE) as max_date FROM table group by ID order by max_date desc; 
```

# android - 除了 AsyncTask 之外的任何方式？

> ID：10411836
> 
> 赞同：0
> 
> 时间：2012-05-02T10:23:24.673
> 
> 标签：android, updating

当我开始一项活动时，我将执行此操作

```
webservice.updateallCatNews(); 
```

此功能是将数据从在线数据库检索到本地数据库。完成时间不是恒定的，取决于互联网速度。

我想知道动作何时完成执行。有时15，但有时10或20。我需要在完成后开始活动。

除了 asynctask 之外，任何函数都可以检测到动作是否完成？

```
private class UpdatingNews extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... params) {
        webservice.updateallCatNews();
        return null;
    }

    @Override
    protected void onPostExecute(String result) {

    }
} 
```

活动课

```
private UpdatingNews update;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_formnewuser);
    webservice = new Database_WebService(this);

    update = new UpdatingNews();
    if (isOnline() == true) {
        update.execute("...");

    }
} 
```

UpdateallCatNews 类

```
public void updateallCatNews() {
    try {
        List<List_CategoryNews> newsCat = dbhelper.getAllNewsCategories();
        for (List_CategoryNews nwCat : newsCat) {

            int CatNewsID = nwCat.getCatID();

            if (CatNewsID != 0) {
                List_CategoryNews deleteNewsCat = new List_CategoryNews(
                        CatNewsID);
                dbhelper.DeleteNewsCat(deleteNewsCat);
            }
        }
        GetNewsCategory();
    } catch (Exception ex) {
        AlertDialog.Builder b = new AlertDialog.Builder(mContext);
        b.setMessage(ex.toString());
        b.show();
    }
} 
```

在这个类中，没有其他错误，因为可以执行其他活动。

这 if() 似乎没有运行

```
if(update.getStatus().equals(AsyncTask.Status.RUNNING)); 
```

为什么函数

```
webservice.updateallCatNews(); 
```

不执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:10:08.797

您可以使用线程进行检查。这里使用处理程序可以发送消息。通过检查消息您可以进行进一步的处理。将线程与 UI 连接的唯一可能方法是使用处理程序。我认为这段代码可能帮你。

```
Thread animator = new Thread() {
        public void run() {
            int i = 0;
            try {
                sleep(2000);
                while (i < 4) {
                    sleep(50);
                    handler.sendMessage(handler.obtainMessage(i));
                    i++;
                }
            } catch (Exception e) {

            }
        }
    };
    animator.start();
    handler = new Handler() {

        @Override
        public void handleMessage(Message msg) {
            super.handleMessage(msg);
            if (msg.what == 0) {
                animatedimage.setImageResource(R.drawable.sub1);
            } else if (msg.what == 1) {
                animatedimage.setImageResource(R.drawable.sub2);
            } else if (msg.what == 2) {
                animatedimage.setImageResource(R.drawable.sub3);
            } else if (msg.what == 3) {
                animatedimage.setImageResource(R.drawable.sub4);
            }
        }

    }; 
```

# java - 托管我的网络服务（适用于 Android/iOS）

> ID：10411852
> 
> 赞同：0
> 
> 时间：2012-05-02T10:24:15.837
> 
> 标签：java, web-services, tomcat, hosting

我正在寻找新的托管服务。目前，我在其业务 PJVM 计划中托管在 Mochahost。详情见（中栏）： [http ://www.mochahost.com/java.php](http://www.mochahost.com/java.php)

它对我来说真的很慢。目前大多数用户将来自以色列。

Webservice 为应用程序提供数据库服务。每个客户端发布数据（在服务器上共享，MySql DB）（最大 1K 左右的数据 - 请求大小）每个客户端都可以 U/L 图像（最多 100K 大小的图像）。每个客户端都可以向服务器请求数据（响应高达 1K）。每个客户端都可以使用 Http 请求 D/L 图像。

除此之外，在服务器、客户端工作以及在需要时 - 从服务器请求数据时什么都不做。

Webservice 是 Java 语言，Hibernate 是 DAL。MySql 是数据库。

问题是 - 我应该升级到 VPS 吗？推荐哪个主机？最重要的问题——我需要 VPS 机器的哪些规格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:54:30.240

选择 VPS 将为您提供充分的自由，而 VPS 的选择取决于您想要选择的成本、位置等因素。

根据我的经验，以下是可靠且良好的，Linode Rackspace Amazon webservices prgmr

Mochahost 是一个共享主机提供商，共享主机可能存在资源问题（主要是 CPU）。所以我认为在你的情况下考虑 VPS 是个好主意。

# android - Arraylist 的搜索过滤器

> ID：10411854
> 
> 赞同：0
> 
> 时间：2012-05-02T10:24:26.587
> 
> 标签：android, search, android-arrayadapter, android-edittext

这是我的代码片段：

```
public void onTextChanged(CharSequence changed_character, int start, int before, int count) 
    {
        if(search_adapter != null)
        {
            search_adapter.getFilter().filter(changed_character.toString().trim());
        }
    } 
```

所以，在这里我根据我的编辑文本框中更改的文本过滤数组列表。假设我输入“A”，它会过滤所有包含 A 的项目。我只想检索并列出“以”A 开头的项目。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:40:23.987

```
<AutoCompleteTextView android:id="@+id/myautocomplete"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:completionThreshold="1"
/>

public class AndroidAutoCompleteTextView extends Activity implements TextWatcher{

AutoCompleteTextView myAutoComplete;
String item[]={
  "January", "February", "March", "April",
  "May", "June", "July", "August",
  "September", "October", "November", "December"
};

   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       myAutoComplete = (AutoCompleteTextView)findViewById(R.id.myautocomplete);

       myAutoComplete.addTextChangedListener(this);
       myAutoComplete.setAdapter(new ArrayAdapter<String>(this,         android.R.layout.simple_dropdown_item_1line, item));

   }

@Override
public void afterTextChanged(Editable arg0) {
 // TODO Auto-generated method stub

}

@Override
public void beforeTextChanged(CharSequence s, int start, int count,
  int after) {
 // TODO Auto-generated method stub

}

@Override
public void onTextChanged(CharSequence s, int start, int before, int count) {
 // TODO Auto-generated method stub

}
} 
```

# jquery - jQuery Mobile：过滤嵌套列表

> ID：10411857
> 
> 赞同：3
> 
> 时间：2012-05-02T10:24:48.957
> 
> 标签：jquery, jquery-mobile

我需要能够在我的 jQuery Mobile 项目中实现过滤器，它允许我搜索嵌套列表并返回与输入到过滤器栏中的文本匹配的所有列表元素。基本上，我需要扩展已经实现的数据过滤器函数的功能，以显示嵌套列表项和可见项的结果。有没有办法修改数据过滤器的行为？

我的清单设置如下。我需要返回一个列表，其中包含与搜索词匹配的每个站点源和数据源（包括子元素）。

```
<ul>
<li class="sitesource">
    <ul>
        <li class="datasource"></li>
        <li class="datasource"></li>
        <li class="datasource"></li>
    </ul>
</li>
<li class="sitesource">
    <ul>
        <li class="sitesource">
            <ul>
                <li class="datasource"></li>
                <li class="datasource"></li>
                <li class="datasource"></li>
            </ul>
        </li>
        <li class="datasource"></li>
    </ul>
</li>
<li class="datasource"></li>
</ul> 
```

我怀疑我可能需要做的是（在 pageinit 之后）搜索整个 html 文档并在列表中返回所有匹配的 sitesource 和 datasource 元素 - 这可能需要自定义构建函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:16:18.757

这有点冗长，但似乎可以满足您的要求：

```
function filterSources(myVal){
var myFilter = myVal;

var dataSources = document.getElementsByClassName("datasource");

//array from nodelist    
var arr = [];
for(var i = 0, n; n = dataSources[i]; ++i) arr.push(n);

//filter for text    
var finalData = arr.filter(function(element){
        return $(element).text().indexOf(myFilter) > -1;
    })
//compile into string for output
var newStr = "";
for(var m in finalData) newStr += finalData[m].textContent + ", ";
$("#target").html(newStr);

}

$(function(){

filterSources
$("input#search_foo").keyup(function(){
    filterSources($(this).val())
    })
}) 
```

[http://jsfiddle.net/klatzkaj/DEmWE/9/](http://jsfiddle.net/klatzkaj/DEmWE/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-31T15:54:27.920

我知道这篇文章太旧了，但现在我遇到了同样的问题并找到了解决方案

幸运的是，使用最新的 JQM (1.4.5)，您可以轻松添加`data-children=".datasource"`父`<ul>`属性

欲了解更多信息：[http ://api.jquerymobile.com/filterable/#option-children](http://api.jquerymobile.com/filterable/#option-children)

希望我的回答可以帮助遇到同样问题的其他人，问候

# ios - 从 UITableView 显示 DetailView

> ID：10411858
> 
> 赞同：0
> 
> 时间：2012-05-02T10:24:53.507
> 
> 标签：ios, uitableview, uiviewcontroller

我有一个纵向应用程序，在我的视图控制器（`UIViewController`而不是 a `UITableViewController`）中有一个表（`UITableView`），它只占据屏幕的一半。我将我的表视图的委托和数据源设置为我的视图控制器。

现在，当我选择表格的任何单元格时，我想显示详细视图。这是我尝试过的，但没有出现：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

NSLog(@"SELECTED");

//ChangeView

DetailViewController *dvController = [[DetailViewController alloc]
initWithNibName:@"DetailViewController" bundle:nil];

[self.navigationController pushViewController:dvController animated:YES];
dvController = nil;

} 
```

任何的想法？这个解决方案比弹出解决方案更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:30:50.853

代替`[NSBundle mainBundle]`零。希望能帮助到你。告诉我会发生什么！也替换`dvController=nil;`为`[dvController release];`

**编辑：** 用这个替换你的初始化函数：

```
-(id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil 
{ 
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
return self;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T10:32:08.450

您应该在 nib 文件中检查您的表格视图，它的数据源和委托是否已连接？只需将两者与文件所有者连接即可。

如果您使用的是 uiview 控制器，则使用当前模型视图控制器而不是推送模型视图控制器。

```
DetailViewController *dvc=[[DetailViewController alloc]initWithNibName:@"DetailViewController" bundle:nil];
[self presentModalViewController:dvc animated:YES]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T10:50:03.207

初始化导航控制器。因为有一段时间是由于 ui 组件尚未初始化。但请记住，您可能不得不面对其他一些 UI 问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T11:01:21.423

当您选择表格单元格时，您应该检查是否`didSelectRowAtIndexPath`真的被调用（如果不是，您的委托可能未正确设置），然后如果

```
DetailViewController *dvController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil]; 
```

返回 nil 或对调试器有意义的东西，试图解决问题。另外，@MAKhan 是对的，您应该删除

```
dvController = nil; 
```

并将其替换为

```
[dvController release]; 
```

放弃主视图中的参考。

**编辑：** 您的代码假定在您的 UIViewController 下方，有一个 UINavigationController 因为您使用的是`[self.navigationController pushViewController]`. 如果没有，难怪你的观点不会被推到不存在的东西上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T10:45:40.920

是导航控制器中带有 tableview 的视图控制器吗？如果不是，那么首先你必须创建一个以当前视图控制器作为 rootviewcontroller 的导航控制器。然后试试你现在正在使用的代码

# artificial-intelligence - 线性遗传编程常数

> ID：10411859
> 
> 赞同：1
> 
> 时间：2012-05-02T10:24:54.060
> 
> 标签：artificial-intelligence, machine-learning, genetic-algorithm, genetic-programming

在内存寄存器中明确定义常量，而不是最初用常量播种个体并通过遗传算子使它们变异，有哪些优点和缺点？

具体来说，从我的一本关于线性遗传规划的书中读到这个：

*在我们的实现中，所有寄存器都保存浮点值。在内部，常量存储在写保护的寄存器中，即不能成为目标寄存器。结果，这组可能的常数保持不变。*

我想知道的是，这是否比最初随机生成常量并将它们集成到程序中，然后通过训练过程改进它们更好的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:53:40.963

根据您对记忆寄存器一词的使用，我假设您指的是记忆增强的遗传编程技术。

即使使用内存寄存器，使用常量也是不正常的。取而代之的是，[在遗传编程中使用内存](http://dl.acm.org/citation.cfm?id=1644492&CFID=100683404&CFTOKEN=56996756)等技术可以让您缓慢地改变您的内存寄存器，而不是进行突然的更改，使内存变得无关紧要。尽管如此，引入随机初始化的值仍然很常见，因此您可以进行随机重新启动以尝试逃避局部最优。

也许您正在考虑将所有内存寄存器设置为零或一些人工估计值？

编辑：

听起来他们有一些价值观，他们希望在不改变的情况下延续到所有世代。*就个人而言，假设您的 GA 所在的环境*可以更好地代表这种价值，假设它们在所有实例中共享。

如果它们*没有*跨实例共享，那么这可能反映了在设置中使用一些随机值播种种群的意图，这些随机值不应该被允许进化（至少，在给定的运行期间）。

如果您需要在复杂的背景下进化，并且希望在尝试更好地适应更复杂的可变环境情况之前，*首先*要很好地适应固定环境，那么第一种类型的常数（环境常数）可能很有用。

第二种常量（每个 DNA 实例）不是我使用过的东西，但我想如果分析师已经确定了一些“易失”变量，这些变量太混乱而无法持续进化，那么将它们“保护”为常量可能会很有用跑步。

# opengl - 有没有一种简单的方法来检测 2 个 GL 对象之间的碰撞？例如 glutSolidCylinder 和 glutSolidTorus

> ID：10411860
> 
> 赞同：2
> 
> 时间：2012-05-02T10:24:55.413
> 
> 标签：opengl, collision-detection

有没有一种简单的方法来检测 2 个 GL 对象之间的碰撞？例如 glutSolidCylinder 和 glutSolidTorus

如果没有简单的方法，我如何引用这些对象，它们的位置？

如果我有他们的位置，应该考虑什么数学因素？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T11:26:47.087

不，没有简单的方法。无论如何，这些都不是 GL 对象，因为**OpenGL 不知道任何对象，因为它不是场景图或几何库**。它只是在屏幕上绘制简单的形状，例如三角形或点，而这正是`glutSolidTorus`朋友们所做的。他们不会构造一些具有位置等属性的抽象对象。他们在屏幕上绘制一堆三角形，使用当前的变换矩阵变换顶点。

当您要进行诸如碰撞检测甚至只是简单的对象和场景管理之类的事情时，您将无法自行管理对象，包括位置和几何图形等等，因为**OpenGL 仅绘制三角形而没有概念他们可能组成的任何抽象对象**。

一旦您完全控制了对象的几何形状（它们由三角形和顶点组成），您就可以自己绘制它们和/或将它们提供给任何碰撞检测算法/库。对于此类数学上可描述的对象，例如球体、圆柱体，甚至是圆环，您还可以找到专门的算法。但请记住。您可以将这些事物作为具有您希望它们拥有的任何抽象属性的对象来管理，OpenGL 只是绘制它们，而这些`glutSolid...`函数只是简单的函数，只包含一个简单的`glBegin/glEnd`块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:11:18.480

您将需要一些检查和管理碰撞的系统，如果您想坚持使用 glut 对象，那么您需要将它们包含在其他一些类/几何表示中以检查交叉点。

关于物理/碰撞检测的一些有趣的阅读/链接：

www.realtimerendering.com/intersections.html

[http://www.wildbunny.co.uk/blog/2011/04/20/collision-detection-for-dummies/](http://www.wildbunny.co.uk/blog/2011/04/20/collision-detection-for-dummies/) <他还有其他文章，2D的原理可以很容易地扩展到3维

[http://www.dtecta.com/files/GDC2012_vandenBergen_Gino_Physics_Tut.pdf](http://www.dtecta.com/files/GDC2012_vandenBergen_Gino_Physics_Tut.pdf)

编辑，这本书很好 imo：[http ://www.amazon.co.uk/gp/product/1558607323/ref=wms_ohs_product](http://www.amazon.co.uk/gp/product/1558607323/ref=wms_ohs_product)

# mysql - MySQL查询输出使用if else或case..？

> ID：10411861
> 
> 赞同：0
> 
> 时间：2012-05-02T10:24:58.523
> 
> 标签：mysql

我有一张桌子

```
mysql> select * FROM testa;
+---------+-------+
| month_x | money |
+---------+-------+
| 11101   | 12345 |
| 11105   |   100 |
| 11105   |   100 |
| 11105   |   100 |
| 11105   |   100 |
| 11106   | 12345 |
+---------+-------+
6 rows in set (0.00 sec) 
```

month_x 中的最后两位数字是月份现在我希望我的输出为

```
Month   TOTAL
01  12345
02  0
03  0
04  0
05  400
06  12345
07  0
08  0
09  0
10  0
11  0
12  0 
```

可以使用 If else 或 case。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:33:29.690

您可以使用[模运算](http://dev.mysql.com/doc/refman/5.5/en/mathematical-functions.html#function_mod)来获得尾随两位数（当数字除以 100 时，它们是余数），然后假设您希望`money`在数据按月份“分组”时求和：

```
SELECT month_x % 100 AS Month, SUM(money) AS TOTAL
FROM testa
GROUP BY Month
ORDER BY Month ASC; 
```

或者，您可以使用依赖 MySQL 的[隐式类型转换](http://dev.mysql.com/doc/refman/5.5/en/type-conversion.html)并使用其字符串函数：

```
SELECT RIGHT(month_x, 2) AS Month, SUM(money) AS TOTAL
FROM testa
GROUP BY Month
ORDER BY Month ASC; 
```

* * *

**更新**

正如@shiplu.mokadd.im 所说，要显示每个月（即使是那些您没有数据的），您需要从临时表中获取数字 1 到 12。但是，您可以使用以下命令在查询中创建这样一个临时表`UNION`：

```
 SELECT 1
UNION SELECT 2
UNION SELECT 3 -- etc 
```

所以：

```
SELECT Month, Sum(money) AS TOTAL
FROM   testa
  RIGHT JOIN (
        SELECT  1 AS Month
  UNION SELECT  2 UNION SELECT  3 UNION SELECT  4 UNION SELECT  5 UNION SELECT  6
  UNION SELECT  7 UNION SELECT  8 UNION SELECT  9 UNION SELECT 10 UNION SELECT 11
  UNION SELECT 12
  ) months ON testa.month_x % 100 = months.Month
GROUP BY Month; 
```

**但是**我会注意到*通常*不会在数据库中执行此操作，因为它确实属于表示层：从您访问数据库的任何语言中，您都会循环`1...12`并假设`TOTAL`是否`0`没有相应的记录在结果集中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:09:26.370

为此，您需要首先创建一个包含月份数值的表。

```
CREATE TABLE `months` (
  `mon` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8
INSERT INTO `months` VALUES (1), (2), (3), (4), (5), (6), (7), (8), (9), (10), (11), (12); 
```

然后执行这个查询，

```
SELECT m.mon, 
       IF(Sum(t.money) IS NULL, 0, Sum(t.money)) AS `money` 
FROM   testa t 
       RIGHT OUTER JOIN months m 
         ON ( t.month_x%100 = m.mon ) 
GROUP  BY m.mon; 
```

结果是，

```
+------+-------+
| mon  | money |
+------+-------+
|    1 | 12345 |
|    2 |     0 |
|    3 |     0 |
|    4 |     0 |
|    5 |   400 |
|    6 | 12345 |
|    7 |     0 |
|    8 |     0 |
|    9 |     0 |
|   10 |     0 |
|   11 |     0 |
|   12 |     0 |
+------+-------+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:30:16.863

您可以使用 IF 语句 - 是的。看@这个： [http ://dev.mysql.com/doc/refman/5.5/en/if-statement.html](http://dev.mysql.com/doc/refman/5.5/en/if-statement.html)

# objective-c - 保持滚动级别菜单的状态

> ID：10411868
> 
> 赞同：0
> 
> 时间：2012-05-02T10:25:26.493
> 
> 标签：objective-c, xcode, menu, cocos2d-iphone

我正在开发一个游戏，其中我使用 CCScrollLayer 创建了一个水平滚动菜单。
在该菜单上，我添加了一个后退按钮，按下该按钮会将用户带到主菜单。
我想要的是：当用户回到关卡选择屏幕时，我想保持关卡菜单的状态。这是我在做什么：

```
CCScrollLayer * scrolllayer = [[CCScrollLayer alloc] initWithLayers:[NSMutableArray arrayWithObjects:layer1,layer2,layer3, nil] widthOffset:230];

//scrolllayer.showPagesIndicator = YES;

[self addChild:scrolllayer z:0]; 
```

我创建了一个 scrollLayer 并在其上添加了一个后退按钮。假设用户正在玩第 3 关并按下返回按钮进入主菜单。之后，如果用户返回到级别选择屏幕，那么级别 3 应该会出现在屏幕上。菜单不应从一开始就显示级别。

谢谢你的时间。

问候

谢莱什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:28:31.793

在任何地方保持级别编号......并使用此方法

```
-(void) moveToPage:(int)page; 
```

滚动条将移动到该级别...

希望这可以帮助.. ：）

# type-conversion - 整数到实数的转换函数

> ID：10411869
> 
> 赞同：8
> 
> 时间：2012-05-02T10:25:27.903
> 
> 标签：type-conversion, vhdl, real-datatype

是否有通用的转换函数可以将整数类型对象转换为 VHDL 中的实数类型？这是针对测试平台的，因此可综合性不是问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T11:22:45.483

您可以将整数转换为实数，如下所示：

```
signal i: integer;
signal R: Real;

...

R <= Real(i); 
```

# r - 为什么 foreach() %do% 有时比 for 慢？

> ID：10411871
> 
> 赞同：10
> 
> 时间：2012-05-02T10:25:36.917
> 
> 标签：r, parallel-processing

我第一次在 R 中玩并行化。作为第一个玩具示例，我尝试了

```
library(doMC)
registerDoMC()

B<-10000

myFunc<-function()
{
    for(i in 1:B) sqrt(i)
}

myFunc2<-function()
{
    foreach(i = 1:B)  %do% sqrt(i)
}

myParFunc<-function()
{
    foreach(i = 1:B) %dopar% sqrt(i)
} 
```

我知道`sqrt()`执行速度太快以至于并行化无关紧要，但我没想到的是它`foreach() %do%`会慢于`for()`：

```
> system.time(myFunc())
   user  system elapsed 
  0.004   0.000   0.005 
> system.time(myFunc2())
   user  system elapsed 
  6.756   0.000   6.759 
> system.time(myParFunc())
   user  system elapsed 
  6.140   0.524   6.096 
```

在我见过的大多数示例中，`foreach() %dopar%`与`foreach() %do%`而不是`for()`. 由于`foreach() %do%`比`for()`我的玩具示例慢得多，所以我现在有点困惑。不知何故，我认为这些是构造 for 循环的等效方法。有什么不同？他们曾经是等价的吗？总是`foreach() %do%`比较慢？

更新：在@Peter Fines 回答之后，我更新`myFunc`如下：

```
 a<-rep(NA,B)
 myFunc<-function()
 {
     for(i in 1:B) a[i]<-sqrt(i)
 } 
```

这`for()`有点慢，但不多：

```
> system.time(myFunc())
   user  system elapsed 
  0.036   0.000   0.035 
> system.time(myFunc2())
   user  system elapsed 
  6.380   0.000   6.385 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T12:59:48.567

`for`将运行`sqrt`B 次，大概每次都会丢弃答案。`foreach`但是，返回一个包含每次执行循环体的结果的列表。无论它是以并行模式还是顺序模式（`%dopar%`或`%do%`）运行，这都会产生相当大的额外开销。

我通过运行以下代码来确定我的答案，这似乎得到了[foreach vignette](http://cran.r-project.org/web/packages/foreach/vignettes/nested.pdf)的确认，其中指出“foreach 与 for 循环的不同之处在于它的返回是一个值列表，而 for 循环没有任何价值并使用副作用传达其结果。”

```
> print(for(i in 1:10) sqrt(i))
NULL

> print(foreach(i = 1:10) %do% sqrt(i))
[[1]]
[1] 1

[[2]]
[1] 1.414214

[[3]]
... etc 
```

更新：我从您更新的问题中看到，上述答案不足以解释性能差异。所以我查看了[源代码](http://cran.r-project.org/web/packages/foreach/index.html)，`foreach`可以看到有很多事情发生了！我还没有试图确切地理解它是如何工作的，但是`do.R`并`foreach.R`表明即使在`%do%`运行时，大部分`foreach`配置仍然在运行，如果可能在`%do%`很大程度上提供了该选项以允许您测试`foreach`代码而不必配置并加载了并行后端。它还需要支持提供的更高级的嵌套和迭代工具`foreach`。

代码中有对结果缓存、错误检查、调试和为每次迭代的参数创建本地环境变量的引用（参见示例`doSEQ`中的函数`do.R`）。我想这就是造成您观察到的差异的原因。当然，如果您在循环中运行更复杂的代码（这实际上会受益于类似的并行化框架`foreach`），那么与它提供的好处相比，这种开销将变得无关紧要。

# java - 在 Java 中，如何检查时间是否在两个 Date 对象内

> ID：10411873
> 
> 赞同：2
> 
> 时间：2012-05-02T10:25:41.523
> 
> 标签：java, android, date

我正在尝试在 Java 中创建一个方法，如果当前时间在设定的时间间隔（startTime 和 endTime）之间，则返回 true。

日期无关紧要。做这个的最好方式是什么？

这是我的尝试，它不起作用：

```
public boolean isNowBetweenDateTime()
{
    final Date now = new Date();
    return now.after(startTime) && now.before(endTime);
} 
```

检查时间是否在两个 Date 对象内的最佳方法（在 java 中）是什么，忽略年、月日？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:28:14.440

你的代码看起来不错。只需将`now`,`startTime`和的日期设置`endTime`为一些硬编码值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-30T18:30:42.573

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T11:04:41.160

If you want to ignore the Date and only consider the time of day, consider using Joda-Time's [`LocalTime`](http://joda-time.sourceforge.net/apidocs/org/joda/time/LocalTime.html), which is designed specifically to hold only the time portion.

Here is an example:

```
java.util.Date startTime = ... ;
java.util.Date endTime = ... ;

public boolean isNowBetweenDateTime()
{
    // get current time
    final LocalTime now = new LocalTime();

    // convert the java.util.Dates to LocalTimes and then compare
    return now.isAfter(LocalTime.fromDateFields(startTime)) &&
           now.isBefore(LocalTime.fromDateFields(endTime));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-09T16:12:18.647

**如果当前时间介于另外两个时间之间，则此 java 函数返回 true。它忽略年/月/日。**

```
import java.text.*;
import java.util.Date;

public static boolean isNowBetweenHours() throws ParseException
{
    String leftBoundaryHours = "01:00:00";   //01:00 hours, military time.(1AM)
    String rightBoundaryHours = "14:00:00";  //14:00 hours, military time.(2PM)

    //returns true if current time is between 
    //leftBoundaryHours and rightBoundaryHours.

    //This formatter converts a bare string to a date.
    DateFormat formatter = new SimpleDateFormat("yyyy-mm-dd HH:mm:ss");

    //add the hand specified time to 1970-01-01 to create left/right boundaries.
    Date leftTimeBoundary = formatter.parse("1970-01-01 " + leftBoundaryHours);
    Date rightTimeBoundary = formatter.parse("1970-01-01 " + rightBoundaryHours);

    //extract only the hours, minutes and seconds from the current Date.
    DateFormat extract_time_formatter = new SimpleDateFormat("HH:mm:ss");

    //Get the current time, put that into a string, add the 1970-01-01, 
    Date now = formatter.parse("1970-01-01 " + 
        extract_time_formatter.format(new Date()));

    //So it is easy now, with the year, month and day forced as 1970-01-01
    //all you do is make sure now is after left, and now is before right.
    if (now.after(leftTimeBoundary) && now.before(rightTimeBoundary))
        return true;
    else
        return false;
} 
```

**像这样调用函数：**

```
try {
    System.out.println(isNowBetweenHours());
} catch (ParseException e) {

} 
```

如果当前时间在`01:00`小时之后但之前`14:00 hours`，则返回 true。否则返回false。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T10:41:33.887

首先，我建议使用日历而不是日期。我之前遇到了一些问题，使用日期。我会以毫秒为单位来比较日期，这是最安全的方法。代码如下：

```
Date now = new Date();

long startTimeInMillis = startTime.getTime();
long endTimeInMillis = endTime.getTime();
return now.getTime >= startTimeInMillis && now.getTime < endTimeInMillis; 
```

# c# - 该进程无法访问该文件，因为它正在被使用（错误）

> ID：10411876
> 
> 赞同：0
> 
> 时间：2012-05-02T10:25:50.927
> 
> 标签：c#, .net, visual-studio, c#-4.0

我试图将文本文件中的行向上移动一个然后将其重写回原始文件，但由于某种原因出现错误，似乎无法弄清楚。

```
using (StreamReader reader = new StreamReader("file.txt"))
{
    string line;
    int Counter = 0;

    while ((line = reader.ReadLine()) != null)
    {
        string filepath = "file.txt";
        int i = 5;
        string[] lines = File.ReadAllLines(filepath);

        if (lines.Length >= i)
        {
            string tmp = lines[i];
            lines[i] = lines[i-1];
            lines[i-1] = tmp;
            File.WriteAllLines(filepath, lines);
        }   
    }
    Counter++;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T10:30:09.143

您正在打开要在此行中读取的文件：

```
using (StreamReader reader = new StreamReader("file.txt")) 
```

此时它已打开并被使用。

然后，您以后有：

```
string[] lines = File.ReadAllLines(filepath); 
```

试图从*同一个*文件中读取。

目前尚不清楚您要达到的目标，但这不起作用。

据我所知，你根本不需要`reader`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:30:54.247

您尝试打开文件以将其写入的位置在一个已经使用流读取器打开它的方法中，流读取器打开它，文件编写器尝试打开它但因为它已经打开而无法打开，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:32:51.843

不要同时读取和写入文件 1.如果文件很小，只需加载它，更改它，然后再写回。2.如果文件很大，只需打开另一个临时文件进行输出，删除/删除第一个文件，然后重命名第二个文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T10:36:11.357

而不是：

```
using (StreamReader reader = new StreamReader("file.txt"))
{
...
string[] lines = File.ReadAllLines(filepath);
} 
```

利用：

```
using (StreamReader reader = new StreamReader("file.txt"))
{
string line;
string[] lines = new string[20]; // 20 is the amount of lines
int counter = 0;
while((line=reader.ReadLine())!=null)
{
    lines[counter] = line;
    counter++;
}
} 
```

这将从文件中读取所有行并将它们放入“行”中。

您可以对代码的编写部分执行相同的操作，但这种方式仅使用 1 个进程从文件中读取。它将读取所有行，然后自行处理和关闭。

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T10:39:02.290

我假设您实际上想要交换文件中的每一行（？），因为这个代码片段：

```
string tmp = lines[i];
lines[i] = lines[i-1];
lines[i-1] = tmp; 
```

所以这是一种应该有效的方法：

```
String[] lines = System.IO.File.ReadAllLines(path);
List<String> result = new List<String>();
for (int l = 0; l < lines.Length; l++)
{
    String thisLine = lines[l];
    String nextLine = lines.Length > l+1 ? lines[l + 1] : null;
    if (nextLine == null)
    {
        result.Add(thisLine);
    }
    else
    {
        result.Add(nextLine);
        result.Add(thisLine);
        l++;
    }
}
System.IO.File.WriteAllLines(path, result); 
```

**编辑**：这是稍作修改的版本，它仅与前一行交换一行，因为您已经评论说这是您的要求：

```
String[] lines = System.IO.File.ReadAllLines(path);
List<String> result = new List<String>();
int swapIndex = 5;
if (swapIndex < lines.Length && swapIndex > 0)
{
    for (int l = 0; l < lines.Length; l++)
    {
        String thisLine = lines[l];
        if (swapIndex == l + 1) // next line must be swapped with this
        {
            String nextLine = lines[l + 1];
            result.Add(nextLine);
            result.Add(thisLine);
            l++;
        }
        else
        {
            result.Add(thisLine);
        }
    }
}
System.IO.File.WriteAllLines(path, result); 
```

# php - 接收索引 php 中的 JSON 对象，处理页面上的 JSON 信息并发送回 JSON 响应。怎么办？

> ID：10411893
> 
> 赞同：0
> 
> 时间：2012-05-02T10:26:52.113
> 
> 标签：php, json, request, response

我的情况是，网站会将用户重定向回我们的网站（在 index.php 上）并发送 JSON 请求。我将解析 JSON 请求并进行相应处理，然后发回 JSON 响应。

我正在使用此代码在 index.php 中获取 JSON 输入请求：

```
$data_back = json_decode(file_get_contents('php://input'));
//process $data_back
// create json response
$response = array("RESPONSE_CODE"=>"0","RESPONSE_DESCRIPTION"=>"OK","PAYMENT_ID"=>"XYZ");
// set header as json
header("Content-type: application/json");
// send response
echo json_encode($response); 
```

但是，通过使用 echo，内容会显示在主页 (index.php) 上。如果我不使用回显，则不会将响应发送回发送请求的其他站点，并且我也无法接收输入流中的数据。

我正在尝试使用以下代码模拟其他站点：

```
//set POST variables address and json string
    $url = 'http://XYZ.com/MYSITE/index.php';
    $fields = array("CARD_NUMBER"=>"123","CUSTOMER_NAME"=>"ABC","RECEIVED_AMOUNT"=>"5000","REQUEST_TYPE"=>"PAYMENT_RECEIVED");

    //url-ify the data for the JSON POST
    $fields_string = json_encode($fields);

    //open connection
    $ch = curl_init();

    //set the url, number of POST vars, POST data
    curl_setopt($ch,CURLOPT_URL,$url);
    curl_setopt($ch,CURLOPT_POST,count($fields));
    curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER , 1);

    //execute post
    $jsonResult = curl_exec($ch);

    //close connection
    curl_close($ch);

    $results = json_decode($jsonResult, true); 
```

我不知道如何处理这个问题。请指导我是否可以处理我的 index.php 上的 JSON 并发送回响应。我是 JSON 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:32:52.923

刚刚测试了你的脚本，它运行良好......它们是两个可能的原因

A. 无效`URL`

B. 卷曲请求失败

把你的脚本放在上面

```
error_reporting(E_ALL);
ini_set('display_errors','On'); 
```

并使用它来捕获 curl 错误

```
if(curl_exec($ch) === false)
{
    echo 'Curl error: ' . curl_error($ch);
} 
```

# node.js - nodejs 游戏循环和外部脚本文件

> ID：10411902
> 
> 赞同：3
> 
> 时间：2012-05-02T10:27:32.740
> 
> 标签：node.js

好吧，首先我是 nodejs 的新手，它对我来说看起来很棒！

我真的很想在 nodejs 中与机器人玩家一起构建游戏。这个想法是让机器人玩一些游戏（例如跳棋）。

第一个问题是：

*   nodejs 适合这个目的吗？请注意，主要想法不是构建游戏，而是获得异步编程的经验，尤其是 nodejs（因为 node 很酷而且很棒！）。

然后我遇到了另一个问题。虽然用 nodejs 编写 Web 服务器很简单（网上有数百万个示例），但几乎没有示例如何在不阻塞事件循环的情况下编写无限循环，所以问题二：

*   如何在不阻塞主偶数循环的情况下编写无限游戏循环？在 C/C++ 中，我会做类似 while(gIsRunning) {doStuff(); gIsRunning = gameEnded(); 睡眠（毫秒）/延迟（毫秒）；}

当然，在我的情况下，游戏是无限的（因为玩家是机器人）并且应该在我没有手动杀死节点进程的情况下运行。

由于游戏是面向机器人的，我希望能够用 JS 编写机器人并将它们包含到主游戏引擎中。所以第三

*   是否可以将机器人编写为独立的 JS 脚本，然后在某种受限环境（沙盒）中加载到节点运行的主游戏引擎中？未来的想法是为机器人开发提供一些基本的 API，我不想运行具有完整功能（fs、套接字等）的第三方机器人。另外我不想手动检查每个第三方机器人的代码。

将此挑战视为所谓的“谷歌人工智能挑战”。Google 开发了一些引擎并提供 SDK 来开发将由引擎加载和“播放”的机器人。我想做同样的事情，但在 nodejs 中，为机器人开发编写游戏引擎和 SDK。

抱歉，这个问题对于 SO 来说可能过于笼统，并且受个人意见的限制（节点是否合适，可能是个人喜好）。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:41:11.010

为了让您从第一个问题开始，您可能对mozilla [http://browserquest.mozilla.org/名为](http://browserquest.mozilla.org/)**BrowserQuest的 HTML5/Node.js 游戏感兴趣**

源代码在这里[https://github.com/mozilla/BrowserQuest](https://github.com/mozilla/BrowserQuest)

实现沙盒效果的一种方法是，您可以为机器人逻辑运行多个 node.js 进程，并使用您的主游戏循环进程用来获取机器人动作的RPC 库（如[https://github.com/substack/dnode ）？](https://github.com/substack/dnode)

# javascript - 滚动条在达到 maxlimit 时移动到顶部，而不是在 textarea 上停止

> ID：10411912
> 
> 赞同：0
> 
> 时间：2012-05-02T10:27:59.757
> 
> 标签：javascript, jquery

我正在使用 inputTextArea。其实我想限制它的最大长度。我正在使用类似的功能

```
<script type="text/javascript">
    function limitTextArea(element, limit) {
        if (element.value.length > limit) {
            element.value = element.value.substring(0, limit);
        }
    }
</script>

<textarea id="description" name="description" 
          onkeyup="limitTextArea(this, 1000);" 
          onkeydown="limitTextArea(this, 1000)">
</textarea> 
```

但是假设我在 textarea 中写了一个长文本，会发生什么。滚动条显示在文本区域中。但是当我达到最大限制然后尝试写一个字符时，textarea 滚动条会移动到顶部。

我希望一旦用户达到它的最大限制，那么滚动条和光标就会停留在该位置。

为什么当我尝试在最大限制之后写一些东西时，它的行为就像 textarea 滚动条移到顶部？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:31:47.020

参考：[如何使用 JavaScript 对 HTML 中的 textArea 施加 maxlength](https://stackoverflow.com/questions/1125482/how-to-impose-maxlength-on-textarea-in-html-using-javascript)

```
window.onload = function() { 
  var txts = document.getElementsByTagName('TEXTAREA') 

  for(var i = 0, l = txts.length; i < l; i++) {
    if(/^[0-9]+$/.test(txts[i].getAttribute("maxlength"))) { 
      var func = function() { 
        var len = parseInt(this.getAttribute("maxlength"), 10); 

        if(this.value.length > len) { 
          alert('Maximum length exceeded: ' + len); 
          this.value = this.value.substr(0, len); 
          return false; 
        } 
      }

      txts[i].onkeyup = func;
      txts[i].onblur = func;
    } 
  } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:40:51.557

[http://viralpatel.net/blogs/2008/12/set-maxlength-of-textarea-input-using-jquery-javascript.html](http://viralpatel.net/blogs/2008/12/set-maxlength-of-textarea-input-using-jquery-javascript.html)

您也可以使用它来防止用户在文本区域中写入超出您想要的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:41:13.050

至少此代码可防止我的 textarea 滚动到顶部

```
jQuery(document).ready(function($) {
    $('textarea.max').keyup(function() {
        var $textarea = $(this);
        var max = 400;
        if ($textarea.val().length > max) {
            var top = $textarea.scrollTop();
            $textarea.val($textarea.val().substr(0, max));
            $textarea.scrollTop(top);

        }
    });

}); //end if ready(fn) 
```

这是我得到像这样使用它的想法的参考

[如何防止 textarea 在其值更改时滚动到顶部？](https://stackoverflow.com/questions/7220997/how-to-prevent-textarea-from-scrolling-to-the-top-when-its-value-changed)

**更好的解决方案：**

```
jQuery(document).ready(function($) {
    var max = 400;
    $('textarea.max').keypress(function(event) {
        if (event.which < 0x20) {
            // e.which < 0x20, then it's not a printable character
            // e.which === 0 - Not a character
            return;     // Do nothing
        }

        if (this.value.length == max) {
            event.preventDefault();
        } else if (this.value.length > max) {
            // Maximum exceeded
            this.value = this.value.substring(0, max);
        }
    }); //end of keypress(fn)
}); //end if ready(fn) 
```

谢谢

# c++ - 如何解决 Linux 上的线程问题？

> ID：10411913
> 
> 赞同：3
> 
> 时间：2012-05-02T10:28:00.390
> 
> 标签：c++, linux, debugging, pthreads

我正在尝试调试 Linux 上的应用程序问题。它倾向于在`libstdc++.so`或的随机位置与 SIGSEGV 一起崩溃`libstdc.so`。

似乎在任何地方都没有明显的竞争条件，因为我添加的线程中的工作非常孤立。但它仍然几乎一直崩溃。

应用程序用 编译`g++ -c ... -pthread -D_REENTRANT`，并用 链接`g++ -pthread -o ...`

但它仍然几乎一直在其中一个`libstdc*.so`功能中崩溃。我浪费了几天时间试图找出问题所在，但没有去...

有没有人有任何提示？有没有办法确保`libstdc*.so`编译为线程感知？任何可以帮助我的 gdb 命令？调试堆？

我只在 Linux 上工作了几年，所以我迷路了……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T10:35:13.047

您应该做几件事：

*   [使用hellgrind](http://valgrind.org/info/tools.html#helgrind)运行你的应用程序
*   [使用valgrind 的内存检查](http://valgrind.org/info/tools.html#memcheck)运行您的应用程序
*   [使用DRD](http://valgrind.org/info/tools.html#drd)运行您的应用程序

编写单元测试。尽管它们在查找线程问题方面没有多大帮助，但它们可以极大地帮助您查找错误的内存访问问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T10:59:41.933

`-g`如果您还没有编译，请尝试在编译时使用，以获取符号调试器信息。

你得到一个核心转储？如果是这样，您可以使用`gdb`以下方式针对可执行文件加载核心：

```
gdb <my-exe> <my-core-file> 
```

加载后（假设您使用 编译`-g`），您可以使用`info threads`获取所有线程堆栈的列表并查看导致问题的线程。如果您跟踪导致段错误的堆栈跟踪，`libstdc++.so`或者`libstdc.so`它应该很明显发生了什么。至少它会让你到达正确的区域。

如果您没有获得核心，您可以在调试器本身内运行您的应用程序吗？

这种技术对于深入了解线程死锁也非常有用：只需使用以下方法附加到进程：

```
gdb <my-exe> <my-process-id> 
```

并寻找相互锁定的两个线程。

# xslt - XSLT/Diazo：为每对元素创建元素

> ID：10411917
> 
> 赞同：3
> 
> 时间：2012-05-02T10:28:10.710
> 
> 标签：xslt, plone, diazo

我正在使用 Diazo/XSLT 为 Plone 网站设置主题。在主页上，Plone 给了我以下结构：

```
<dl>
  <dt>
    <a href="...">The news item title</a>
  </dt>
  <dd>
    The content of the news item
  </dd>
  (and so on for the following ones)
</dl> 
```

我想把它变成这样的东西：

```
<div id="news_items">
  <div>
    <h2><a href="...">The news item title</a></h2>
    The content of the news item.
    <a class="readmore" href="<the HREF taken from the dt/a tag)">Read more</a>
  </div>
  (and so on for the following items)
</div> 
```

我对 XSLT 和 Diazo 不是很熟悉（并且更习惯于重写一些现有主题），但我尝试了一些解决方案。

第一个是分两次执行此操作。首先查找每个“dd”标签，创建结构，然后通过解析所有“dt”标签进行更新：

```
<copy css:theme="#news_items">
  <xsl:for-each css:select="#content-core dl dd">
    <xsl:element name="div">
      <xsl:element name="h2">
      </xsl:element>
      <xsl:copy-of select="./*" />
      <xsl:element name="a">
        <xsl:attribute name="class">readmore</xsl:attribute>
        Read more
      </xsl:element>
    </xsl:element>
  </xsl:for-each>
</copy> 
```

它正确地创建了结构，但我不知道如何编写第二部分。这个想法是这样的：

```
<xsl:for-each css:select="#content-core dl dt">
   <!-- Copy the link in the 'dd' tag into the h2 tag, based on the position --> 
   <copy css:theme="#news_item div:nth-child(position()) h2" css:select="a" />

   <!-- Copy the a tag's href in the 'Read more' tag -->
   <copy css:theme="#news_item div:nth-child(position()) a.readmore">
     <xsl:attribute name="class">
       <xsl:value-of select="@class" />
     </xsl:attribute>
   </copy>
</xsl:for-each> 
```

我知道这没有多大意义，但我希望你能明白：

1.  我查看每个“dd”标签

2.  根据循环中的位置，我找到了在上一步中创建的“h2”标签，并复制了“dd”标签内的链接。

3.  我找到（再次基于位置）“a.readmore”标签并复制href。

我一直在考虑的第二个解决方案有点脏（也不起作用）。这个想法是一步创建内容：

```
<xsl:for-each css:select="#content-core dl > *">
  <xsl:if test="name = dt">
     <!-- That the dt tag, we start the 'div' tag and add the h2 tag -->
  </xsl:if>

  <xsl:if test="name = dt">
     <!-- That the dt tag, we copy the content and close the 'div' tag -->
  </xsl:if>
</xsl:foreach> 
```

但我真的不喜欢这个解决方案（而且我看不到如何创建“阅读更多”链接）。

您认为第一个解决方案可以完成吗？（尤其是填充“h2”标签并在“阅读更多”链接上添加“href”属性的第二步）。有没有更好的解决方案？

我宁愿只使用 Diazo，但如果它不可行，我可以直接覆盖 Plone 中的视图（我认为这会更简单，至少我知道该怎么做）

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:11:17.947

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
     <div id="news_items">
      <xsl:apply-templates select="dt"/>
     </div>
 </xsl:template>

 <xsl:template match="dt">
  <div>
    <h2><xsl:copy-of select="a"/></h2>
    <xsl:apply-templates select="following-sibling::dd[1]"/>
    <a class="readmore" href="{a/@href}">Read more</a>
  </div>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下 XML 文档时**（与提供的具有相同的结构，但具有更多项目）：

```
<dl>
    <dt>
        <a href="someUrl1">The news item1 title</a>
    </dt>
    <dd>
      The content of the news item1
  </dd>
    <dt>
        <a href="someUrl2">The news item2 title</a>
    </dt>
    <dd>
      The content of the news item2
 </dd>
</dl> 
```

**产生想要的正确结果**：

```
<div id="news_items">
   <div>
      <h2>
         <a href="someUrl1">The news item1 title</a>
      </h2>
      The content of the news item1
  <a class="readmore" href="someUrl1">Read more</a>
   </div>
   <div>
      <h2>
         <a href="someUrl2">The news item2 title</a>
      </h2>
      The content of the news item2
 <a class="readmore" href="someUrl2">Read more</a>
   </div>
</div> 
```

# windows-phone-7 - 是否可以在 WP7 (PhoneGap) 中使用占位符？

> ID：10411920
> 
> 赞同：0
> 
> 时间：2012-05-02T10:28:14.783
> 
> 标签：windows-phone-7, cordova, placeholder

我一直在使用 Apache Cordova（以前称为 PhoneGap）制作应用程序，并且我有带有`placeholder`属性的输入字段。

这适用于 Android 和 iOS，但不适用于 Windows Phone 7。

我知道您可以使用 JavaScript 来模拟相同的功能，但我想避免重新发明轮子。

是否可以`placeholder`在 Windows Phone 7 上的输入元素中使用？如果是这样，如何使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:46:42.567

占位符是一个 HTML5 元素。显然 WP7 浏览器还不能识别这一点。

# c++ - 在模板化函数上参数化的函数模板的显式实例化

> ID：10411921
> 
> 赞同：2
> 
> 时间：2012-05-02T10:28:15.193
> 
> 标签：c++, templates

在 C++ 中，允许在成员函数和自由函数上创建模板

```
template <void (*F) ()> void function1 ();
template <void (MyClass::*M) ()> void function2 (); 
```

并显式实例化它们

```
function1 <&fn> ();
function2 <&MyClass::doSomething> (); 
```

我的问题是，如果模板参数本身是从模板实例化的

```
template <typename R, typename C, R (C::*M) ()> void function3 (); 
```

我如何`function3`显式实例化（如果可能的话）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:50:27.687

做就是了：

```
function3<void, MyClass, &MyClass::doSomething>(); 
```

这种情况下的语法与其他情况下的语法相同。

完整的可编译示例：

```
#include <iostream>
class MyClass {
public:
    void doSomething() {
        std::cout << "doSomething\n";
    }
};
void fn() {
    std::cout << "fn\n";
}
template <void (*F) ()> void function1 () {
    F();
}
template <void (MyClass::*M) ()> void function2 () {
    (MyClass().*M)();
}
template <typename R, typename C, R (C::*M) ()> void function3 () {
    (C().*M)();
}
int main() {
    function1<&fn>();
    function2<&MyClass::doSomething>();
    function3<void, MyClass, &MyClass::doSomething>();
} 
```

印刷：

```
fn
doSomething
doSomething 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:05:19.217

```
struct MyClass
{
        int doSomething() { return 1; }
};

template <typename R, typename C, R (C::*M) ()>
R function3(C* c) 
{
        return ( (c->*M)() );
}

int main()
{
        typedef decltype(MyClass().doSomething()) R_type;
        MyClass cls;
        function3<R_type, MyClass, &MyClass::doSomething>(&cls); // instantiation
        return 0;
} 
```

# php - 为什么 Symfony2 不触发我的 `preUpdate` 的 Doctrine 事件监听器？

> ID：10411923
> 
> 赞同：1
> 
> 时间：2012-05-02T10:28:25.300
> 
> 标签：php, symfony, doctrine-orm

我正在尝试向 Symfony2 添加一个简单的 Blowfish 密码编码器。

当使用新密码更新用户模型时，我需要在模型持久化之前触发密码进行编码。我想`preUpdate`在我的`services.xml`.

不幸的是，它没有被触发。

奇怪的是，我也订阅了该`prePersist`事件，并且该事件被正确触发。

我是否缺少一些差异或某些原因这不起作用？

## 服务.xml

```
<service id="base.user.listener.persist" class="Base\UserBundle\Listener\PasswordEncoder">
    <tag name="doctrine.event_listener" event="preUpdate" />
    <tag name="doctrine.event_listener" event="prePersist" />
    <argument type="service" id="security.encoder.blowfish" />
</service> 
```

## PasswordEncoder.php（事件订阅者）

```
/**
 * @param LifecycleEventArgs $args
 */
public function prePersist(LifecycleEventArgs $args) {
    $entity = $args->getEntity();
    $entity = $this->encodePassword($entity);
}

/**
 * @param LifecycleEventArgs $args
 */
public function preUpdate(LifecycleEventArgs $args) {
    die('preUpdate');
    $entity = $args->getEntity();
    $entity = $this->encodePassword($entity);
} 
```

如果您需要查看更多代码，请大声说出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:32:25.803

好的，所以`services.xml`定义没有错。看来您必须在监听类 ( `PasswordEncoder.php`) 中复制订阅信息：

```
public function getSubscribedEvents() {
    return array(
        Events::prePersist,
        Events::preUpdate,
    );
} 
```

# emacs - 漂亮的打印和扩展

> ID：10411934
> 
> 赞同：4
> 
> 时间：2012-05-02T10:29:04.830
> 
> 标签：emacs, macros, clojure, read-eval-print-loop, pretty-print

***编辑**我不只是询问“缩进”每一行代码，而是询问“漂亮的打印”和/或更广泛的“缩进”定义，其中行将根据它们包含的内容进行分组/拆分。*

这是一个函数（我写它是为了解决欧拉问题，但这不是重点：我可以用不同的方式编写它），我正在尝试打印它：

手动缩进的版本：

```
(apply max
       (flatten
        (for [x (range 100 1000)]
          (map
           #(if (= (str (* x %)) (apply str (reverse (str (* x %)))))
              (* x %)
              0)
           (range x 1000))))) 
```

显然，这不是一种真正的 Lisp 缩进/打印风格，而且我想从一开始就养成良好的习惯，我尝试“漂亮地打印”它，从 Emacs 的*slime-repl clojure* REPL 中执行以下操作：

```
user> (doc pprint)      ;; just to show which version of pprint I'm using
clojure.pprint/pprint
... 
```

所以我试着做：

```
user> (pprint '(apply max
       (flatten
        (for [x (range 100 1000)]
          (map
           #(if (= (str (* x %)) (apply str (reverse (str (* x %)))))
              (* x %)
              0)
           (range x 1000)))))) 
```

我得到了以下信息：

```
(apply
 max
 (flatten
  (for
   [x (range 100 1000)]
   (map
    (fn*
     [p1__13958#]
     (if
      (=
       (str (* x p1__13958#))
       (apply str (reverse (str (* x p1__13958#)))))
      (* x p1__13958#)
      0))
    (range x 1000))))) 
```

据我了解，lambda 的*#(...)*表示法是“阅读器宏”。那么如何在不触发宏扩展的情况下进行漂亮的打印呢？更一般地说：我怎样才能漂亮地打印“我在文本编辑器中看到的内容”？

另外，几乎所有事情都在新的路线上进行是否正常？例如：

```
(apply
 max
 (flatten
  (for
   [x (range 100 1000)]
   (map
    ... 
```

似乎浪费了相当多的垂直屏幕空间。这是Lisp 代码应该缩进*的方式吗？*

最后一个相关问题：Emacs 是否可以配置为“漂亮打印”选定区域或整个*.clj*缓冲区？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:53:14.760

没有“官方”的方式来缩进 lisp 代码，但我喜欢 clojure-mode 缩进 clojure 代码的方式（见下文）。

我不知道为什么 pprint 以它的方式打印代码，但根据[这个](http://richhickey.github.com/clojure/doc/clojure/pprint/PrettyPrinting.html)页面，它是一个尚未完成功能的早期版本。

对于 emacs 缩进部分，您可能想看看[clojure-mode](https://github.com/technomancy/clojure-mode)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T20:15:14.273

我所看到的最接近共识的是“像 Emacs 一样缩进”，我想在政治上是正确的，我应该包括推论“像 vim 一样缩进”。eclipse+CCW 等其他编辑器似乎与此相当接近。尽管默认的漂亮打印机添加了更多换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-04T06:06:08.430

这是我目前正在做的事情：

```
(defn pprint-code [code]
  (with-pprint-dispatch code-dispatch
    (binding [*print-suppress-namespaces* true]
      (pprint code)))) 
```

**注意：**查看 clojure.pprint 以解析免费变量。

这当然是一种改进。我仍然不完全知道如何调整`*print-miser-width*`和/或`*print-right-margin*`获得更好的输出。YMMV。我目前的牛肉是（自动）gensyms - 我希望它们在某些情况下打印时被去除。

理想情况下，表单/函数可以定义自己的格式化规则，例如 let-bindings 应该总是在不同的行上。我不知道能够用 clojure.core 做到这一点。

如需参考，请参阅此[概述](http://richhickey.github.io/clojure/doc/clojure/pprint/PrettyPrinting.html)。

# font-size - CSS 大师：字体速记和 CSS 复制

> ID：10411936
> 
> 赞同：1
> 
> 时间：2012-05-02T10:29:10.657
> 
> 标签：font-size, css

这更像是一个一般性的最佳实践问题，而不是一个非常集中的问题。我是字体速记的忠实粉丝，因为它解决了我在使用 font-family、font-size 等时遇到的大部分行高问题，并且它确实减少了 CSS 声明的总数，同时提供对排版的完全控制。

问题是，随着页面的字体大小发生变化，行高也会发生变化，所以我发现自己多次重新定义字体，如下所示：

```
.lastUnit h2 {font:normal 23px/23px Calibri,Tahoma,sans-serif;color:#a51d21;padding: 21px 0 15px 70px;}
.lastUnit a:link, .lastUnit a:visited {color:#a57129;font:normal 16px/16px Calibri,Tahoma,sans-serif;}
h1 {font: normal 26px/26px Calibri,Tahoma,sans-serif;border-bottom:2px dotted #bababa;color:#204fe7;padding-bottom: 8px;margin-bottom: 8px;}
h2 {font: normal 22px/22px Calibri,Tahoma,sans-serif;color: #a41d21;margin-bottom:12px;padding-bottom: 12px;}
.internal h2 {border-bottom: 2px dotted #62c6c7;}h2.section {font:normal 20px/16px Calibri,Tahoma,sans-serif;color:#1d7373;border:0;margin: 0 0 15px 0;padding-bottom:12px;border-bottom:2px dotted #62c7c8;clear:both;height:18px;text-transform:uppercase;}
ul,ol,p {font:normal 16px/24px Calibri,Tahoma,serif;}
h3 {font: normal 18px/18px Calibri,Tahoma,sans-serif;color:#204fe7;margin:6px 0;} 
```

我有一种强烈的感觉，这段代码没有优化......我正在考虑在我的身体上声明字体系列（或在标记中非常高的 id 上），所以我不必每次都重复它，但是那么我将不得不使用 font-family、line-height 和有时 font-weight.. 这使得 CSS 的数量几乎相同。

有什么想法或技巧可以优化这个过程吗？也许标记中的其他类？

ps：对于 Stackoverflow 管理员：这将是“编码风格”标签的问题，但不允许使用它..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:01:37.597

我会尝试编写 CSS，就好像我在设计数据库或定义 OO 类一样。我会：

1.  尝试消除 CSS 中的冗余
2.  先定义通用 CSS 规则，然后定义具体情况
3.  必要时避免使用速记

这是一个例子：

```
h1, h2, h3 {
    font: normal large/1em Calibri,Tahoma,sans-serif;
}
h1 {
    font-size: 26px;
}
h2 {
    font-size: 22px;
}
h3 {
    font-size: 18px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:23:18.250

从此开始：

```
body { font-family: Calibri, sans-serif; }
* { line-height: 1.3; } 
```

然后以百分比定义`h1`等`h2`大小。然后设置颜色，等等。要调整块之间的间距（例如，标题和段落之间，或列表项之间），使用垂直边距而不是行高几乎总是更好。

无需创建字体设置的混合沙拉，`font`速记往往会混淆而不是帮助。

Calibri 是一个不错的小字体，不幸的是在缺少它的系统上没有合适的后备——但几乎任何无衬线字体都比 Tahoma 更好的后备，Tahoma 几乎在所有方面都与 Calibri 完全不同（除了无衬线）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:33:27.093

如果都共享相同的字体系列，为什么不在顶部的一个地方声明它，然后定义“细节”。换句话说，最佳实践是设置通用/通用规则，然后重新定义您需要的规则。

例子：

```
/* define the font family/general characteristics */

h1, h2, h3 {
    font:normal 23px/23px Calibri,Tahoma,sans-serif;
}

/* define the details for the ones you would like */
h1 {
    font-size:26px;
    line-height:26px;
    border-bottom:2px dotted #bababa;
    color:#204fe7;
    padding-bottom: 8px;
    margin-bottom: 8px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T10:37:57.570

我相信缩短此时间的最佳方法是指定一个设置字体系列的标签。有点像这样

```
body {
  font-family:Calibri,Tahoma,sans-serif;
} 
```

然后，您可以进一步微调您的 css 样式中的每个元素。

也顺便提一下。加载页面时，CSS 不会引起那么大的问题。我会更专注于优化图像和任何服务器端代码。

# database - 将 aspnetdb.mdf 与我自己的数据库合并（自动生成）

> ID：10411937
> 
> 赞同：4
> 
> 时间：2012-05-02T10:29:11.790
> 
> 标签：database, asp.net-mvc, connection-string, aspnetdb

我已经彻底搜索了互联网，但找不到问题的明确答案。我有 aspnet.db 数据库。但我想将我自己的表和数据添加到这个数据库中。如果我尝试使用连接字符串连接到它：

```
<add name ="ToernooiCompanionDBContext" connectionString ="Data Source= .\SQLEXPRESS; Integrated Security = SSPI; Trusted_Connection=True; Initial Catalog= aspnetdb"  providerName ="System.Data.SqlClient"/> 
```

将在 C:\Program Files\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\DATA 中创建一个新数据库 (aspnetdb.mdf)。

我希望数据库（由 codefirst 自动生成）与我的 APP_DATA 文件夹中的现有数据库合并。我究竟做错了什么？

我尝试将`AttachDbFilename=|DataDirectory|aspnetdb.mdf`and添加`User Instance=true`到我的连接字符串，或使用`LocalSqlServer`machine.config 中定义的连接字符串，但在所有情况下，这都会覆盖现有数据库。如果我删除`Initial Catalog=aspnetdb`，则会收到需要初始目录的错误消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T19:07:07.213

我遇到了同样的问题，但[这个](http://blogs.microsoft.co.il/blogs/gilf/archive/2011/05/30/creating-a-code-first-database-initializer-strategy.aspx)链接让我走上了至少对我有用的东西。我希望这至少可以帮助某人！:)

1.  创建数据库
2.  将 aspnet 表添加到新数据库
3.  修复 web.config 中的数据库连接，使其指向同一个数据库
4.  编写一些 sql 删除所有表，除了以“aspnet_”开头的表
5.  将sql添加到您自己编写的数据库初始化程序中
6.  在 Global.asax.cs 中添加对数据库初始化程序的调用

## 1.创建数据库

我通常使用 SQL Server Management Studio 执行此操作。我用于此示例代码的数据库是 SQL Server 2008R2，但我对您使用的 SQL Server Express 做了同样的事情。

## 2\. 将 aspnet 表添加到新数据库

我使用以下工具，如果您在没有任何命令行参数的情况下使用它，它就像一个向导一样工作。%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_regsql.exe

## 3.修复数据库连接，使其指向同一个数据库

以下两行来自我制作的测试应用程序。请注意，第二个连接字符串 (MyHealthContext) 的名称与我用于代码第一类的 DbContext 的名称相同。

数据库上下文：

```
public class MyHealthContext : DbContext
{
    public DbSet<Person> People { get; set; }
    public DbSet<PersonAttribute> PeopleAttributes { get; set; }
} 
```

网页配置

```
<add name="ApplicationServices" connectionString="Server=localhost\mssql2008r2;Database=MyHealth;Integrated Security=True;" providerName="System.Data.SqlClient"/> 
<add name="MyHealthContext" connectionString="Server=localhost\mssql2008r2;Database=MyHealth;Integrated Security=True;" providerName="System.Data.SqlClient"/> 
```

## 4\. 删除除 aspnetdb-tables 之外的所有 SQL

```
DECLARE @cmdDropConstraints VARCHAR(4000)
DECLARE @cmdDropTables      VARCHAR(4000)

-- ======================================================================
-- DROP ALL THE FOREIGN KEY CONSTRAINTS FROM THE TABLES WE WANT TO DROP
-- ======================================================================
DECLARE cursorDropConstraints CURSOR FOR 
    SELECT 
        'ALTER TABLE ['+ s.name + '].[' + t.name + '] DROP CONSTRAINT [' + f.name +']' 
    FROM 
        sys.foreign_keys f 
        INNER JOIN sys.tables t ON f.parent_object_id=t.object_id 
        INNER JOIN sys.schemas s ON t.schema_id=s.schema_id 
    WHERE 
        t.is_ms_shipped=0
        AND t.name NOT LIKE 'aspnet_%'
        AND t.name <> 'sysdiagrams'

OPEN cursorDropConstraints
WHILE 1=1
BEGIN
    FETCH cursorDropConstraints INTO @cmdDropConstraints
    IF @@fetch_status != 0 BREAK
    EXEC(@cmdDropConstraints)
END
CLOSE cursorDropConstraints
DEALLOCATE cursorDropConstraints;

-- ======================================================================
-- DROP ALL THE RELEVANT TABLES SO THAT THEY CAN BE RECREATED
-- ======================================================================
DECLARE cursorDropTables CURSOR FOR 
    SELECT 
        'DROP TABLE [' + Table_Name + ']'
    FROM 
        INFORMATION_SCHEMA.TABLES
    WHERE
        Table_Name NOT LIKE 'aspnet_%'
        AND TABLE_TYPE <> 'VIEW'
        AND TABLE_NAME <> 'sysdiagrams'

OPEN cursorDropTables
WHILE 1=1
BEGIN
    FETCH cursorDropTables INTO @cmdDropTables
    IF @@fetch_status != 0 BREAK
    EXEC(@cmdDropTables)
END
CLOSE cursorDropTables
DEALLOCATE cursorDropTables; 
```

## 5\. 数据库初始化代码：

将下面的“SQL CODE GOES HERE”替换为第 4 步中的 sql

```
public class MyHealthInitializerDropCreateTables : IDatabaseInitializer<MyHealthContext>
{
    public void InitializeDatabase(MyHealthContext context)
    {
        bool dbExists;
        using (new TransactionScope(TransactionScopeOption.Suppress))
        {
            dbExists = context.Database.Exists();
        }

        if (dbExists)
        {
            // Remove all tables which are specific to the MyHealthContext (not the aspnetdb tables)
            context.Database.ExecuteSqlCommand(@"SQL CODE GOES HERE");

            // Create all tables which are specific to the MyHealthContext (not the aspnetdb tables)
            var dbCreationScript = ((IObjectContextAdapter)context).ObjectContext.CreateDatabaseScript();
            context.Database.ExecuteSqlCommand(dbCreationScript);

            Seed(context);
            context.SaveChanges();
        }
        else
        {
            throw new ApplicationException("No database instance");
        }
    }

    protected virtual void Seed(MyHealthContext context)
    {
        //TODO: Add code for seeding your database with some initial data...
    }
} 
```

## 6\. 挂钩新数据库初始化程序的代码

为了确保自定义数据库初始化程序不会在生产环境中意外运行，我添加了一个#if DEBUG 语句，因为我总是在发布之前以发布模式编译我的代码。

```
 protected void Application_Start()
    {
        //TODO: Comment out this database initializer(s) before going into production
        #if DEBUG
        Database.SetInitializer<MyHealthContext>(new MyHealthInitializerDropCreateTables()); // Create new tables in an existing database
        #endif

        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:06:15.433

1.  通过附加为新数据库在 sql server 中打开 ASPNetDB db
2.  从 ASPNetDB 创建表/存储过程的创建脚本并在您自己的数据库中运行以在您的数据库中创建表
3.  打开应用程序的 web.config 并将应用程序附加到您自己的数据库。复制连接字符串的名称
4.  转到会员区并将连接字符串名称替换为复制的名称
5.  对区域也进行上述步骤

# c# - 将同一列中的不同值相互附加

> ID：10411938
> 
> 赞同：3
> 
> 时间：2012-05-02T10:29:12.630
> 
> 标签：c#, sql

我编写了一个 Windows 服务，它根据表中的条目发送电子邮件。此服务从表中挑选待处理的电子邮件将其发送到指定的电子邮件地址。

我的表的属性是发件人、收件人、主题、正文。

我可以通过编写程序从表中检索所有条目。但是这个表中大多数时候都有相同的主题、发送者和接收者但正文不同的条目。

因此，我只想附加具有相同主题的电子邮件正文。因此，不会发送多封电子邮件，而是将附加所有此类电子邮件的正文，并且只有当主题匹配时，我才能发送一封电子邮件。

或者，如果我从我的 Windows 服务 C# 代码中执行此操作怎么办？

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T06:47:54.660

谢谢您的答复。我可以通过以下查询来做到这一点：

```
SELECT [Subject], STUFF((SELECT ', ' + [Body] FROM CCSEmails T2 WHERE T1.[Subject] = T2.[Subject] Order By [Body] FOR XML PATH('')),1,1,'') AS [Body] FROM CCSEmails T1 GROUP BY [Subject] 
```

# facebook - 如何避免浏览器崩溃？

> ID：10411941
> 
> 赞同：0
> 
> 时间：2012-05-02T10:29:33.077
> 
> 标签：facebook, facebook-fql, facebook-javascript-sdk

我需要一种方法来获取用户的朋友 ID。我写了这段代码，但是我的浏览器崩溃了（可能是因为我有 2500 个朋友）：

```
var query = FB.Data.query('SELECT uid2 FROM friend WHERE uid1 = me()');

query.wait(function(rows) {
    var i;
    for(i=0;i<rows.length;i++){
        document.getElementById('friends').innerHTML += i + ') ' + rows[i].uid2 + '<br />';

    }}); 
```

有没有更少的 CPU 消耗方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:31:50.293

至少，将所有 HTML 编译到一个变量中，然后在一次`.innerHTML`赋值中将其传递给 DOM。现在，您的 2500 位朋友中的每一个都强制页面重绘两次，因为浏览器需要在读入 innerHTML 时更新它自己对页面的内部理解，`+=`然后在回写时再一次。

```
query.wait(function(rows) {
    var i;
    var html = "";
    for(i=0;i<rows.length;i++){
        html += i + ') ' + rows[i].uid2 + '<br />';
    }
    document.getElementById('friends').innerHTML = html
} 
```

您还可以使用其他一些方法，例如将生成的字符串存储在数组中，然后`join`将它们组合在一起并分配给 HTML，但这只是围绕 JS 不可变字符串和垃圾收集器进行优化。一些 JS 引擎最终可能会比您手动完成的要好得多。然而，执行一次 innerHTML 赋值几乎可以保证极大的速度提升，因为它的字面意思是“重新生成所有内容，然后应用一点点并重新编码所有内容”，并且几乎没有任何方法可以自动优化在 JS+ 内部循环中执行此操作HTML 引擎连接。

# java - java.text.SimpleDateFormat 不是线程安全的

> ID：10411944
> 
> 赞同：9
> 
> 时间：2012-05-02T10:29:44.940
> 
> 标签：java, thread-safety, simpledateformat

```
Synchronization

Date formats are not synchronized. It is recommended to create separate format instances for each thread. If multiple threads access a format concurrently, it must be synchronized externally 
```

在 SimpleDateFormat 类的 JavaDoc 中提到了上述行。

这是否意味着我们不应该将 SimpleDateFormat 对象创建为静态对象。

如果我们将它创建为静态的，那么无论我们在哪里使用这个对象，我们都需要将它保存在 Synchronized Block 中。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-02T10:34:27.380

确实如此。您可以在 StackOverflow 上找到有关此问题的问题。我用它来声明它`ThreadLocal`：

```
private static final ThreadLocal<DateFormat> THREAD_LOCAL_DATEFORMAT = new ThreadLocal<DateFormat>() {
    protected DateFormat initialValue() {
        return new SimpleDateFormat("yyyyMMdd");
    }
}; 
```

并在代码中：

```
DateFormat df = THREAD_LOCAL_DATEFORMAT.get(); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-02T10:38:10.793

是的 SimpleDateFormat 不是线程安全的，当您解析日期时，也建议您以同步方式访问它。

```
public Date convertStringToDate(String dateString) throws ParseException {
    Date result;
    synchronized(df) {
        result = df.parse(dateString);
    }
    return result;
} 
```

另一种方法是在[http://code.google.com/p/safe-simple-date-format/downloads/list](http://code.google.com/p/safe-simple-date-format/downloads/list)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-02T10:38:29.420

那是正确的。来自 Apache Commons Lang 的[FastDateFormat是一个不错的线程安全替代方案。](http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/time/FastDateFormat.html)

从 3.2 版开始，它也支持解析，在 3.2 之前只支持格式化。

# android - Android OptionsMenu，在运行时添加项目

> ID：10411945
> 
> 赞同：0
> 
> 时间：2012-05-02T10:29:46.163
> 
> 标签：android, xamarin.android, layout-inflater, android-optionsmenu

我现在有一个看起来像这样的选项菜单：

![在此处输入图像描述](../Images/17d64f5e957602af940e2f934c3a9bb1.png)

可以说，如果我单击项目 1，我希望将两个新项目添加到菜单中，如下所示：

![在此处输入图像描述](../Images/a8486decddf5f1b01e833dacea2082f3.png)

我在运行时（当它打开时）这样做时遇到问题，因为 onCreateOptionsMenu 只被调用一次，而 onPrepareOptionsMenu 似乎只在点击手机的菜单按钮时被调用。我只是希望它通过添加这些新项目来刷新。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T13:33:30.913

当您选择一个选项时，它会导致系统关闭选项菜单。这发生在 onOptionsItemSelected() 运行之后。我猜你需要做的是完成整个过程，*然后*以编程方式再次打开选项菜单，以便调用 onPrepareOptionsMenu()。

尝试这个：

1.  在 onOptionsItemSelected() 中，当用户选择“添加另外两个选项”选项时，在您的活动中设置一个标志但不做任何其他事情。

2.  覆盖 onOptionsMenuClosed()。检查标志是否设置。如果是，则发布后由 UI 线程在其下一次传递中执行。它应该什么都不做，只是再次打开选项菜单，例如

    runOnUiThread(new Runnable() { @Override public void run() { openOptionsMenu(); } });

3.  覆盖 onPrepareOptionsMenu()。检查标志是否设置。如果是，则添加两个额外的菜单项并取消设置标志。您需要做一些额外的工作来防止“添加更多项目”菜单项在每次按下时继续添加新项目，除非这是您正在寻找的行为。

# mysql - 安装 WampServer 2 后 mySQL 未启动

> ID：10411947
> 
> 赞同：2
> 
> 时间：2012-05-02T10:30:08.820
> 
> 标签：mysql, sql, phpmyadmin, wamp, wampserver

**问题：**安装 WampServer 2 后，我试图为 mySQL 设置 root 密码。输入默认密码为*空*后，控制台冻结，没有任何消息或错误。

我在下面附上了问题的图片：

![在此处输入图像描述](../Images/bfb249b8825abfe5b6c538156a1880ae.png)

除此之外 phpmyadmin 没有加载。

**笔记：**

1.  这是 WampServer 2 的全新安装，安装后我没有更改任何设置或修改任何内容。
2.  本地主机正在工作。

**我的系统信息：**

**操作系统：** Windows 7 家庭高级版（64 位）。
**WampServer 版本：** WampServer 2.2D（64 位）。
**Apache：** 2.2.21
**MySQL：** 5.5.20
**PHP：** 5.3.10
**PHPMyAdmin：** 3.4.10.1
**SQLBuddy：** 1.3.3
**XDebug：** 2.1.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:23:37.243

这是由两个原因造成的。

1.您的窗口有问题或可能受到病毒的影响。

2.您使用的安装程序不合适。

尝试更改将执行的安装程序

# css - 992px Chrome 问题的响应式 Web CSS 规则

> ID：10411952
> 
> 赞同：0
> 
> 时间：2012-05-02T10:30:32.167
> 
> 标签：css, google-chrome, responsive-design

相当新手的问题，我目前正在使用**Any Clarke 的 320andup 模板**来制作响应式网站。

**一切进展顺利，除了浏览器在查看736px**媒体查询及以上的检查元素时似乎没有被浏览器拾取的相当多的 CSS 规则，它仍然只是从基本级别（320 移动) 和/或**480**和**600 像素**的指定宽度。

在 Firefox 中没有问题，只有在 chrome 中。（chrome中看似被忽略的属性在下面评论）我还不敢检查IE，有人对此有任何答案/大修复吗？

例如，

```
base level (320px)
.content { clear: both;margin: 10px auto;width: 92%;}     
ul.social li{text-align:right;list-style:none;}

@media only screen and (min-width: 480px) {

ul.social li{text-align:right;list-style:none;}

.content {clear: both;margin: 100px auto;width: 92%;}

}

@media only screen and (min-width: 992px) {

ul.social li{ text-align:right; list-style:none; /*this ignored --> */display:inline;}

.content{ clear:both; /*this ignored --> */ margin-left:200px;}

} 
```

有关详细信息，请在此处找到核心 320andup 文件：[https ://github.com/malarkey/320andup/blob/master/css/320andup.css](https://github.com/malarkey/320andup/blob/master/css/320andup.css)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:31:58.267

这一行：

```
@media only screen and (min-width: 992px) 
```

意味着在启动代码之前，屏幕的最小宽度需要为 992px。所以 736px 没有显示这些的事实并不让我感到惊讶（如果 FF 正在显示它，我会感到惊讶，正如你所暗示的那样）。这是因为在浏览器窗口宽度为 992 像素（736 像素太窄）之前，它不应使用这些样式。[见例子](http://jsfiddle.net/VP9Yv/)。

如果您希望他们更早参与，请更改号码（类似）：

```
@media only screen and (min-width: 730px) 
```

# php - 在 Linux Box 上使用 PHP 将 Windows 时间戳转换为日期

> ID：10411954
> 
> 赞同：7
> 
> 时间：2012-05-02T10:30:42.447
> 
> 标签：php, date, active-directory, timestamp

我有一个在 linux 机器上运行的 Intranet，它通过 PHP 使用 LDAP 对 Windows 机器上的 Active Directory 进行身份验证。

我可以使用 LDAP 从 AD 检索用户条目，并从 php 数组访问上次登录日期，例如：

```
echo $adAccount['lastlogontimestamp'][0]; // returns something like 129802528752492619 
```

如果这是一个 Unix 时间戳，我将使用以下 PHP 代码转换为人类可读的日期：

```
date("d-m-Y H:i:s", $lastlogontimestamp); 
```

但是，这不起作用。有谁知道我怎样才能做到这一点，或者确实可以从 Linux 机器上做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-02T10:47:17.167

据此[，](http://www.silisoftware.com/tools/date.php)您拥有的 windows 时间戳是自 1601 年 1 月 1 日以来的 100-ns 数。因此，您可以使用以下公式将其转换为 unix 时间戳：

```
tUnix = tWindow/(10*1000*1000)-11644473600; 
```

您除以`10*1000*1000`转换为自 1601 年 1 月 1 日以来的秒数，然后折扣`11644473600`是 1601 年 1 月和 1970 年 1 月（unix 时间）之间的秒数。

所以在 PHP 中：

```
date("d-m-Y H:i:s", $lastlogontimestamp/10000000-11644473600); 
```

编辑：有趣的是，我得到的偏移量与 Baba 不同。我用Java得到了我的：

```
Calendar date1 = Calendar.getInstance(); date1.set(1601, 1, 1);
Calendar date2 = Calendar.getInstance(); date2.set(1970, 1, 1);
long dt = date2.getTimeInMillis() - date1.getTimeInMillis();
System.out.println(String.format("%f", dt / 1000.0)); // prints "11644473600.000000" 
```

根据这个 SO：[将 Unix/Linux 时间转换为 Windows 时间的方法，](https://stackoverflow.com/q/5471379/1137043)我的偏移量是正确的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-02T10:40:29.563

由于 windows 不是以秒为单位，但`nano seconds`您需要将其除以四舍五入，`10000000`因为`1601-01-01 and 1970-01-01`windows 时间戳从`1601-01-01`

```
function convertWindowsTimestamp($wintime) {
   return $wintime / 10000000 - 11644477200;
}

$lastlogontimestamp = convertWindowsTimestamp("129802528752492619");
$date = date("d-m-Y H:i:s", $lastlogontimestamp);
var_dump($date); 
```

输出

```
string '30-04-2012 10:47:55' (length=19) 
```

# android - ActionBarSherlock 请求搜索

> ID：10411955
> 
> 赞同：1
> 
> 时间：2012-05-02T10:30:45.270
> 
> 标签：android, actionbarsherlock

我正在尝试从 ActionBarSherlock 请求搜索。

我的课程扩展了 SherlockListActivity。

这就是我向 ActionBar 添加菜单按钮的方式：

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        menu.add("Save")
            .setIcon(R.drawable.ic_action_search)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM |
                MenuItem.SHOW_AS_ACTION_WITH_TEXT);
        return true;
    } 
```

问题是我无法通过 id 调用它：

```
 @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch(item.getItemId())  {
            case ?????: {
                onSearchRequested();
                return true;
            }
        }
        return true;
    } 
```

人们通常如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T10:39:15.033

如果你从一个 XML 菜单文件中扩展你的菜单，你将设置一个 id，然后你可以在你的`onOptionsItemSelected`方法中使用它。像这样：

XML

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">     
    <item android:id="@+id/menu_search"
    android:icon="@drawable/ic_menu_search"
    android:showAsAction="ifRoom"
    android:actionViewClass="android.widget.SearchView" android:title="@string/search"/>
</menu> 
```

分段

```
 @Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {

        case R.id.menu_search:
            onSearchRequested();

            return true;

        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T12:57:07.833

你也可以使用

```
 @Override
public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {

    menu.add(0, 1, 1, "Refresh").setIcon(R.drawable.ic_refresh).setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
    menu.add(0, 2, 2, "Search").setIcon(R.drawable.ic_search).setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

    return super.onCreateOptionsMenu(menu);
}

@Override
    public boolean onOptionsItemSelected(com.actionbarsherlock.view.MenuItem item) {
        switch (item.getItemId()){
            case 1:
                ...
                break;
            case 2:
                ...
                break;
        }
        return true;
    } 
```

# android - 在 Android 上播放视频

> ID：10411956
> 
> 赞同：2
> 
> 时间：2012-05-02T10:30:46.717
> 
> 标签：android, html, cordova

我正在使用 Android 和 PhoneGap 应用程序，并且正在使用 HTML5 视频标签在我的网页上播放视频。当我播放视频时，我得到了音频输出，但视频不可见。如何在 Android 上播放 HTML5 视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:26:49.927

我已经多次写过这个问题。看我之前的回答：

[使用 phonegap 在 AVD 上播放视频](https://stackoverflow.com/questions/9536104/playing-video-on-avd-with-phonegap/9536236#9536236)

另外，我正在对 Android 上的视频标签进行猴子修补，因此希望我们很快就会有更好的东西。

# java - 发送和接收 DIME 附件 Java

> ID：10411966
> 
> 赞同：0
> 
> 时间：2012-05-02T10:32:02.807
> 
> 标签：java, weblogic, attachment

我看到这个问题已经被问过几次了，但我无法理解最终判断是否可以使用 JAVA 在 DIME 中发送和接收附件，如果可以，如何？

我有一个启用 SOA 套件的 Weblogic 服务器，但似乎 BPEL 流程无法发送/接收 DIME 附件，这就是为什么我们必须注意 JAVA 选项的原因。

任何帮助将不胜感激。

万分感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:00:44.540

没错，SOA Suite 11g 不支持 DIME 附件。我猜您正在寻找使用 DIME 附件进行 SOAP 调用。AFAIK CXF 和 Axis2 都不支持 DIME。

另一方面，Axis1 似乎支持它。 [http://axis.apache.org/axis/java/client-side-axis.html#CallConfiguration](http://axis.apache.org/axis/java/client-side-axis.html#CallConfiguration)

我想您可以生成一个 SOAP 客户端并使用 java 活动调用它。此 SOAP 客户端将使用 Axis1 构建。

虽然听起来很难。。

# php - PHP - 即时编译器与解释器

> ID：10411969
> 
> 赞同：9
> 
> 时间：2012-05-02T10:32:18.970
> 
> 标签：php, zend-framework, compiler-construction

PHP 是一种通用的服务器端脚本语言。众所周知，当页面加载并显示结果网页时，会解释 php 代码。最近我听说了 PHP（HipHop 虚拟机）的即时编译器。想知道它在执行中会产生什么样的差异，使用 jit 代替解释器会更好吗？有 jit 的任何 php 引擎吗？

编辑：PHP执行流程是这样的吗？：php代码->解析->令牌->**字节码/操作码**-> php引擎解释->机器码->执行

如果我错了，请纠正我。字节码通常在虚拟机中执行。Opcode（接近机器语言）可以由机器直接执行。这是否意味着 php 引擎是虚拟机，或者只是它的一些实现是虚拟机？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T10:40:05.303

HipHop 不是 JIT 编译器 - 它是一个代码转换器，可以将 PHP 转换为 C++，然后可以使用传统的离线编译器进行编译。

结果， eval 和 create_function 将不起作用，tokenizer 函数也不起作用。我没有深入研究此事，但我希望条件/运行时评估的包含操作也可能会导致问题。

除非它使代码更快，否则没有什么意义。

OTOH 使用 PHP 操作码缓存在不影响功能的情况下提供了巨大的性能提升（不如本机代码那么多）。

（鉴于 PHP 的架构，JIT 编译器并没有多大意义）

# html - 拖放在 Opera 11.62 和 Safari 5.1.4 中不起作用

> ID：10411970
> 
> 赞同：0
> 
> 时间：2012-05-02T10:32:24.630
> 
> 标签：html, safari, drag-and-drop, opera

我将此代码放在一个测试 HTML 文件中：

```
<head>
<script>
f=function() {
el=document.getElementById('dragdiv');
el.ondragover=function(){return false;};
el.ondragenter=function(){return false;};
el.ondrop=function(event){ 
el.innerHTML=event.dataTransfer.getData('Text');};
}
</script>
</head>
<body onload='f()'>
<div id='dragdiv'>DROP HERE ------------------------</div>
<img src='image.jpg'></img> 
```

（标签已删除）它在 Chrome 中有效，但在 Opera 和 Safari 中无效，因为鼠标光标不会像在 Chrome 中那样变成箭头。Opera 和 Safari 中的这段代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:46:19.573

Opera 12 中将提供拖放支持，该版本现已推出测试版。据我所知，它适用于 beta 版本。

# php - 对数组进行排序并将 AND 添加到查询中

> ID：10411973
> 
> 赞同：0
> 
> 时间：2012-05-02T10:32:35.273
> 
> 标签：php, variables, select, filter

你好我喜欢为我的搜索引擎编写一个过滤器。我对不同的选择查询有一些问题。所以主要想法是我有一些带有复选框的输入字段，例如：

输入字段 a：[ **_** ] 过滤器开/关：[ ]

输入字段 b：[ **_** ] 过滤器开/关：[]

输入字段 c：[ **_** ] 过滤器开/关：[]

为了设置查询，我为每个字段命名了查询：

```
if ($filter_a == true) {
        $filter_1 =" `a` LIKE '%$input_a%' ";
    }

if ($filter_b == true) {
        $filter_2 =" `b` LIKE '%$input_b%' ";
    }

if ($filter_c == true) {
        $filter_3 =" `c` LIKE '%$input_c%' ";
    } 
```

因此，在启用过滤器的情况下，选择查询应该以特定方式更改，例如：

在启用 filter_a 的情况下：

```
$query = "SELECT `a`, `b`, `c` FROM `table` WHERE $filter_a"; 
```

在启用 filter_a AND filter_b 的情况下：

```
$query = "SELECT `a`, `b`, `c` FROM `table` WHERE $filter_a AND filter_b"; 
```

如果启用 filter_a AND filter_b AND filter_c：

```
$query = "SELECT `a`, `b`, `c` FROM `table` WHERE $filter_a AND filter_b AND filter_c"; 
```

我在向查询中添加“AND”时遇到问题。因此我集成了一个计数器来计算设置了多少过滤器：

```
$counter = 0;
...
if(!empty($_POST['input_a']) && (!empty($_POST['checkbox_filter_1'])) ){
        $filter++;
}
...

if ($counter == 2) {
$and1 = " AND ";
     $query = "SELECT `a`, `b`, `c` FROM `table` WHERE $filter_a $and1 filter_b";
} 
```

所以主要问题是排列。到目前为止，我有 5 个过滤器，这意味着有 125 种可能性可供比较。

所以我的下一个想法是为每个查询创建一个数组并对其进行排序。

所以它应该看起来像：

```
$ordered_query = (
1-> `a` LIKE '%$input_a%',
2-> `b` LIKE '%$input_b%',
3-> `c` LIKE '%$input_c%'); 
```

这样我就可以将所有查询放在一个数组中。下一步应该是针对已设置或未设置的过滤器对它们进行排序。

因此，在启用 filter_3 和 filter_1 的情况下，它应该对数组键进行排序：

```
$ordered_query = ( 1-> input_a 2-> input_c ); 
```

并且查询应该在它们之间自动添加 AND。如果所有启用的过滤器之间必须有 2 个 AND。

如果有人可以帮助我，我真的很感激。

多谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T10:38:19.657

不要为零件设置一个单独`$filter_1`的、、`$filter_2`等变量，而是设置一个数组`where`。

```
$where = array();
if ($filter_a == true) {
    $where[] =" `a` LIKE '%$input_a%' ";
}

if ($filter_b == true) {
    $where[] =" `b` LIKE '%$input_b%' ";
}

if ($filter_c == true) {
    $where[] =" `c` LIKE '%$input_c%' ";
}

$query = "SELECT `a`, `b`, `c` FROM `table`";
if ( !empty($where) ) {
  $query .= " WHERE " . implode(' AND ', $where);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:37:58.170

您应该将所有条件放在一个数组中并使用函数[implode](http://php.net/manual/en/function.implode.php)：

```
$conditions = array();
$conditions[] = " `a` LIKE '%$input_a%' ";
$conditions[] = " `b` LIKE '%$input_b%' ";
// ...
$query = "SELECT ... WHERE ".implode(" AND ", $conditions); 
```

# android - 如何在android中获取图像视图的宽度和高度？

> ID：10411975
> 
> 赞同：17
> 
> 时间：2012-05-02T10:32:40.653
> 
> 标签：android, imageview

在我的代码`Image View`中，我的 XML 布局中有一个，并且我在我的代码中不断更改源图像。现在我想知道每次生成图像的宽度和高度。

我尝试使用`getWidth()`,`getHeight(),` `getMeasuredWidth(),`和 `getMeasuredHeight()`，但它们都返回 0。

我怎样才能得到这个？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-02T10:47:46.923

你在哪里打电话`getWidth()`和`getHeight()`在 ImageView 上？如果您从`onCreate()`活动中调用，它将不起作用。您需要等待活动窗口附加，然后调用`getWidth() and getHeight()`ImageView。您可以尝试`getWidth() and getHeight()`从`onWindowFocusChanged()`您的活动方法调用。

```
@Override
public void onWindowFocusChanged(boolean hasFocus){
    int width=imageView.getWidth();
    int height=imageView.getHeight();
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-02T10:37:49.353

试试这个

```
 ImageView iv=(ImageView)findViewById(R.id.image);
 ViewTreeObserver vto = iv.getViewTreeObserver();
    vto.addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {
        public boolean onPreDraw() {
           finalHeight = iv.getMeasuredHeight();
           finalWidth = iv.getMeasuredWidth();
           Log.e("hilength","Height: " + finalHeight + " Width: " + finalWidth);
            return true;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-17T08:04:28.500

如果您将 ImageView 设置为可绘制对象，并且 ImageView 的高度和宽度类型为 WRAP_CONTENT，那么即使您从`onCreate()`

```
int height = imageView.getDrawable().getIntrinsicHeight();
int width = imageView.getDrawable().getIntrinsicWidth(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-03-12T10:22:11.797

试试这个代码

```
int finalHeight, finalWidth;
final ImageView iv = (ImageView)findViewById(R.id.scaled_image);
final TextView tv = (TextView)findViewById(R.id.size_label);
ViewTreeObserver vto = iv.getViewTreeObserver();
vto.addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {
    public boolean onPreDraw() {
        iv.getViewTreeObserver().removeOnPreDrawListener(this);
        finalHeight = iv.getMeasuredHeight();
        finalWidth = iv.getMeasuredWidth();
        tv.setText("Height: " + finalHeight + " Width: " + finalWidth);
        return true;
    }
}); 
```

它真的有效...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-02T10:37:41.827

您**引用图像对象**的方式是错误的。这就是为什么你总是得到零。首先从 imageview 创建一个位图对象并从中获取宽度和高度。

当从 cam 拍摄图像时，我会执行以下操作，它就像一个魅力。

```
Bitmap image2 = (Bitmap) data1.getExtras().get("data");
double width = Double.valueOf(image2.getWidth());
Log.v("WIDTH", String.valueOf(width));
double height = Double.valueOf(image2.getHeight());
Log.v("height", String.valueOf(height)); 
```

希望它对你有帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-02T10:40:23.303

首先，您必须将图像转换为 mutablebitmap 并尝试获取图像的宽度和高度，大多数情况下这将解决您的问题..

```
 Bitmap Rbitmap = Bitmap.createBitmap(bitmap).copy(
                    Config.ARGB_4444, true);

Rbitmap.getWidth();
Rbitmap.getheight(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-02T13:19:38.573

试试这个解决方案：

```
Bitmap bitmap = ((BitmapDrawable)imageView.getBackground()).getBitmap();
int width = bitmap.getWidth();
int height = bitmap.getHeight(); 
```

# macos - selfupdate macports 不工作

> ID：10411978
> 
> 赞同：4
> 
> 时间：2012-05-02T10:32:52.297
> 
> 标签：macos, osx-lion, macports

突然，macports 也无法正常工作，但出现以下错误

```
Mos-MacBook-Pro:Projects mo$ sudo port -d selfupdate
Warning: port definitions are more than two weeks old, consider using selfupdate
--->  Updating the ports tree
DEBUG: Synchronizing ports tree(s)
Synchronizing local ports tree from rsync://rsync.macports.org/release/ports/
DEBUG: /usr/bin/rsync -rtzv --delete-after '--exclude=/PortIndex*' rsync://rsync.macports.org/release/ports/ /opt/local/var/macports/sources/rsync.macports.org/release/ports

@ERROR: chdir failed
rsync error: error starting client-server protocol (code 5) at /SourceCache/rsync/rsync-42/rsync/main.c(1398) [receiver=2.6.9]
shell command "/usr/bin/rsync -rtzv --delete-after '--exclude=/PortIndex*' rsync://rsync.macports.org/release/ports/ /opt/local/var/macports/sources/rsync.macports.org/release/ports" returned error 5
Error: Synchronization of the local ports tree failed doing rsync
DEBUG: Couldn't sync the ports tree: Synchronization of 1 source(s) failed
    while executing
"macports::selfupdate [array get global_options] base_updated"
Error: /opt/local/bin/port: port selfupdate failed: Couldn't sync the ports tree: Synchronization of 1 source(s) failed 
```

macports 几个月前可以工作，但自从我升级到 lion 后它就停止了。不知道是不是和升级有关，今天试了下，没找到。我想过重新安装，但我在他们的网站上找不到狮子的 dmg（链接断开）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:14:02.700

现在，macports 的 rsync 服务器已关闭，请参阅[https://trac.macports.org/ticket/34298](https://trac.macports.org/ticket/34298)

# silverlight - 我们如何将选定的行（或该行中的任何属性 [例如 Id 列]）绑定到 ViewModel 的属性？

> ID：10411981
> 
> 赞同：1
> 
> 时间：2012-05-02T10:33:06.867
> 
> 标签：silverlight, datagrid, devexpress, wcf-ria-services, silverlight-5.0

我们正在为基于 WCF Ria 服务的项目使用 MVVM Light Silverlight 项目。经过一些研究，我们决定将 DevExpress DataGrid 与 RiaInstantFeedbackDataSource 一起使用。一切都很好，直到我们想将网格的焦点行绑定到 ModelView 属性。这是我们的 XAML，

```
<UserControl x:Class="OurProject.Silverlight.Views.Personnel.List"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
         xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
         xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core" mc:Ignorable="d"
         DataContext="{Binding Personnel, Source={StaticResource Locator}}" 
         d:DesignWidth="640" d:DesignHeight="480">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition Height="30" />
    </Grid.RowDefinitions>

    <dx:RiaInstantFeedbackDataSource x:Name="DataSource" QueryName="{Binding Path=QueryName}" KeyExpression="{Binding Path=KeyExpression}"
                                     DomainContext="{Binding Path=Context}" />

    <dxg:GridControl Name="grid" ItemsSource="{Binding ElementName=DataSource, Path=Data}" Grid.Row="0" AutoPopulateColumns="True" >
        <dxg:GridControl.View>
            <dxg:TableView x:Name="view" FocusedRow="{Binding Selected}" />
        </dxg:GridControl.View>
    </dxg:GridControl>
    <Button Grid.Row="1" Height="30" VerticalAlignment="Bottom" Content="Edit" Command="{Binding Edit}" />
</Grid> 
```

当我们调试这段代码（Edit 命令执行后的断点）时，我们意识到 FocusedRow 的类型是 object[]。我们尝试了 RowPropertyValueConverter，但找不到任何有关如何使用它的文档。我们如何将选定的行（或该行中的任何属性 [例如 Id 列]）绑定到 ViewModel 的属性？

PS：我们检查了[这个链接](http://www.devexpress.com/Support/Center/e/E3139.aspx)，它不适用于 RiaInstantDataSource。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:53:31.897

好的，我们解决了这个问题

> AreSourceRowsThreadSafe="True"

除了我们的代码。

```
<dx:RiaInstantFeedbackDataSource x:Name="DataSource" QueryName="{Binding Path=QueryName}" KeyExpression="{Binding Path=KeyExpression}" AreSourceRowsThreadSafe="True" DomainContext="{Binding Path=Context}" /> 
```

我们将通过多线程来追踪它的影响，并将在这里写回任何重要的基础。

# iphone - 以编程方式向情节提要添加视图？

> ID：10411983
> 
> 赞同：1
> 
> 时间：2012-05-02T10:33:15.697
> 
> 标签：iphone, objective-c, cocoa-touch, storyboard

我正在通过情节提要 segue 加载 viewController，并且我想以`UIImageView`编程方式向控制器添加一个（而不是在情节提要中创建它）。通常在没有情节提要或 NIB 的情况下工作时，我会`loadView:`在使用情节提要时是否有合适的位置，或者情节提要是否让您在一天中迟到了一点？

**编辑：**更新了关于 NIB 和 loadView 的错误：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:44:49.393

如果您使用的是 NIB，那么您实际上不应该使用`loadView:`. 你应该使用`viewDidLoad:`. 这在使用情节提要时也有效。

# android - 从 Android 应用程序远程运行 bash 脚本的步骤

> ID：10411992
> 
> 赞同：0
> 
> 时间：2012-05-02T10:34:20.107
> 
> 标签：android, bash, redhat

我有一个 Redhat 盒子，上面有一些简单的脚本。我想通过 Android 应用程序在那个盒子上远程运行这些脚本。
我需要在盒子上设置一个网络服务器并通过 HTTP 调用这些脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:10:52.027

通过 HTTP 调用这些脚本将是您的最佳选择。设置 Apache + PHP，然后使用函数创建一个 PHP 文件`passthru()`，该函数调用脚本并将脚本输出传递回 Android 应用程序。只需确保您的脚本安全地存储在服务器上，并且不要尝试通过 HTTP 发送脚本内容——这可能是一个很大的安全漏洞。

# android - 为什么 isProviderEnabled() 方法即使在建筑物内也总是返回 true

> ID：10411998
> 
> 赞同：2
> 
> 时间：2012-05-02T10:35:01.590
> 
> 标签：android, gps

在这种情况下，我使用 GPS 作为提供程序，我尝试在建筑物内走动，但似乎找不到位置。是的，在建筑物中 GPS 不起作用是有道理的。那么，为什么 isProviderEnabled 返回 true？无论如何，我应该以什么方式实现“搜索 GPS 信号”？

```
 String context = Context.LOCATION_SERVICE;
            locman = (LocationManager)getSystemService(context);

            Criteria criteria = new Criteria();
            criteria.setAccuracy(Criteria.ACCURACY_FINE);
            criteria.setAltitudeRequired(false);
            criteria.setBearingRequired(false);
            criteria.setPowerRequirement(Criteria.POWER_LOW);
            String provider = locman.getBestProvider(criteria, true);

            if (locman.isProviderEnabled( LocationManager.GPS_PROVIDER )) {
            // Change from 'Searching for GPS signal to Use GPS'
                txtGPS.setText("Use GPS");

            }
            locman.requestLocationUpdates(
                    provider,MIN_TIME, MIN_DISTANCE, locationListener); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T10:36:27.197

`isProviderEnabled()`只看您是否启用了 GPS，如果您看到任何卫星，它并不在意！

如果您想检查，是否有任何卫星您必须使用`gpslistener`，这是使用 gpslistner 的方法：

```
/**
         * Hier wird ein neuer GPSListener erstellt.
         * Dieser Überprüft ob es Sichtbare Sattelitten gibt.
         */
        mLocationManager.addGpsStatusListener(new GpsStatus.Listener() {

            public void onGpsStatusChanged(int event) {

                // Hier wird der EVENT gefiltert
                // Dieser EVENT erscheint immer wenn GPS Satteliten in sicht sind
                if (event == GpsStatus.GPS_EVENT_SATELLITE_STATUS) {
                    // GpsStatus casten
                    GpsStatus status = mLocationManager.getGpsStatus(null);

                    // Interable sats instanzieren und casten
                    Iterable<GpsSatellite> sats = status.getSatellites();

                    // SATCOUNT instanzieren, wird benötigt um die Satteliten zu zählen
                    int SATCOUNT = 0;

                    // Interator satI instanzieren und casten.
                    Iterator<GpsSatellite> satI = sats.iterator();

                    // Hier wird die anzahl der Satteliten gezählt
                    while(satI.hasNext()){
                        // Den Interator auf den nächsten Satteliten verweisen
                        GpsSatellite satellite = satI.next();

                        // Satelitten zählen
                        SATCOUNT++;
                        Log.d("GPSListner", "While with SATCOUNT = " + SATCOUNT + " Elevation des Satellites = " + satellite.getElevation());

                    }

                    // Prüfen ob SATCOUNT 4 Satelitten hat
                    if(SATCOUNT > GPS_SAT_COUNT){

                    String test = String.valueOf(SATCOUNT);
                    Log.d("GPSSTATUS", "(true) Anzahl der Sattelitten: " + test );

                    // Boolean mGpsOk auf true setzen
                    GPSService.mGpsOk = true;
                    }else{

                    String test2 = String.valueOf(SATCOUNT);
                    Log.d("GPSSTATUS", "(fasle) Anzahl der Sattelitten: " + test2 );

                    // Boolean mGpsOk auf false setzen
                    GPSService.mGpsOk = false;

                    }

                }
            }
        }); 
```

为了让这个工作，你需要启动一个想要使用 gps 的 locationmanager，现在你的 gpslistner 可以检查是否有任何卫星在视野中并写入一个变量 true 或 false。之后，您可以检查变量。如果它是真的（视图中至少有 4 个卫星），您可以使用`Criteria.ACCURACY_FINE`，否则您可以使用`Criteria.ACCURACY_COARSE.`不要忘记为两者设置权限！

最好的祝福

苹果浏览器