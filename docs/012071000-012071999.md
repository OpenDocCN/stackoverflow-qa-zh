# StackOverflow 问答 12071000-12071999

# c# - 性能计数器，显示 0%

> ID：12071005
> 
> 赞同：-2
> 
> 时间：2012-08-22T10:19:21.507
> 
> 标签：c#

我有一个问题：我的性能程序总是显示 0% CPU 使用率...

我添加了 1 个名为 Text value CPU 的标签：

这是代码：

```
public partial class Form1 : Form
{
    PerformanceCounter cpu = new PerformanceCounter ("Processor", "% Processor Time", "_Total");

    public Form1()
    {
        InitializeComponent();
        //string cpu_ussage =
        Text.Text = "CPU: " + CPU_TIME();
    }
    // Provjera Procesa koristeći %
    public string CPU_TIME()
    {
        float cpu_time;

        cpu_time = cpu.NextValue();
        return Math.Round(Convert.ToDouble(cpu_time.ToString()), 2) + "%";

    }
    private void timer1_tick(object sender, EventArgs e)
    {
      Text.Text = "CPU Time:" + CPU_TIME();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:24:21.080

你可以只替换

```
return cpu.NextValue(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:36:02.563

可能是因为在程序已经运行并完成之后正在读取 CPU %，而这个计数器实际上是 0。我试过你的例子，它确实打印了 0。但是当你尝试下面的循环时，你会看到值.

```
using System;
using System.Diagnostics;
using System.Linq;
using System.Threading;

namespace Stackoverflow
{
    public class PerfCounters
    {
        public static void Main()
        {
            var processorCategory = PerformanceCounterCategory.GetCategories()
                .FirstOrDefault(cat => cat.CategoryName == "Processor");
            var countersInCategory = processorCategory.GetCounters("_Total");
            DisplayCounter(countersInCategory
                .First(cnt => cnt.CounterName == "% Processor Time"));
            Console.Read();
        }
        private static void DisplayCounter(PerformanceCounter performanceCounter)
        {
            while (!Console.KeyAvailable)
            {
                Console.WriteLine("{0}\t{1} = {2}",
                    performanceCounter.CategoryName
                    , performanceCounter.CounterName
                    , performanceCounter.NextValue());
                Thread.Sleep(1000);
            }
        }
    }
} 
```

高温高压

# facebook-apps - 根据 JavaScript 事件更改 CSS 变量

> ID：12071006
> 
> 赞同：0
> 
> 时间：2012-08-22T10:19:22.927
> 
> 标签：facebook-apps

[我们在这里](https://www.facebook.com/MyPuzzler/app_142974305841145)有一个 Facebook 应用程序，它有三个带有三个按钮的框。每个按钮在单击时都应在事件（成功）发生后更改状态。这些按钮几乎都能正常工作（一些小错误），但它们的完成方式相当冗长且效率低下。

我的问题是，将事件（即页面“喜欢”、提交的个人信息、页面“共享”）与按钮状态链接的最有效方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:19:23.757

您可以使用 jQuery 和该`.trigger()`函数来触发事件。然后你可以用它`.bind()`来监听事件并做一些事情。例如，当用户登录时，您可以触发一个`user_logged_in_event`，并绑定到它。在函数中，然后可以使用JS将登录按钮更改为注销...

# javascript - 无法在输入上覆盖选定的文本

> ID：12071010
> 
> 赞同：3
> 
> 时间：2012-08-22T10:19:38.457
> 
> 标签：javascript, android, jquery, html, mobile

我无法在 Android 2.2.1 的输入上覆盖选定的文本。

以下[示例](http://jsfiddle.net/dcardoso/5WT8t/)选择输入文本，但该`maxlength`属性阻止写入新值。

如果我删除`maxlength`新值，则在前一个值之后连接。

**编辑：**如果我使用`click`事件而不是`keyup`示例[工作](http://jsfiddle.net/dcardoso/TCqsv/)正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:26:06.747

尝试这个

```
$( '#current1' ).keyup( function(e) {
    $( '#current2' ).focus();
    $( '#current2' ).selectRange( 0, 1 );
});

$.fn.selectRange = function(start, end) {
    var e = document.getElementById($(this).attr('id')); // I don't know why... but $(this) don't want to work today :-/
    if (!e) return;
    else if (e.setSelectionRange) { e.focus(); e.setSelectionRange(start, end); } /* WebKit */
    else if (e.createTextRange) { var range = e.createTextRange(); range.collapse(true); range.moveEnd('character', end); range.moveStart('character', start); range.select(); } /* IE */
    else if (e.selectionStart) { e.selectionStart = start; e.selectionEnd = end; }
}; 
```

# hibernate - 使用带有 return-join 的 Hibernate 本机查询复制行

> ID：12071014
> 
> 赞同：4
> 
> 时间：2012-08-22T10:19:51.247
> 
> 标签：hibernate, nativequery

我正在使用 Hibernate (3.3.x)，我有两个实体：

```
public class FtChargeAcctPkgDtl {
    private FtChargeAcctPkgDtlId id;
    private Set<FtChargeAcctPkgRate> ftChargeAcctPkgRates;
} 
```

和

```
public class FtChargeAcctPkgRate {
    private FtChargeAcctPkgRateId id;
} 
```

（为简单起见，省略了其他属性和设置器）。

我有一个本地查询：

```
<sql-query name="readSymbolsFtPackages">
    <return alias="pkgDtl" class="somepackage.FtChargeAcctPkgDtl"/>

    <return-join alias="pkgRate" property="pkgDtl.ftChargeAcctPkgRates"/>
    <![CDATA[
    SELECT {pkgDtl.*}, {pkgRate.*}

    FROM ft_charge_acct_pkg_dtl pkgDtl

    JOIN ft_charge_acct_pkg_rate pkgRate
      ON pkgRate.master_seq_no = pkgDtl.master_seq_no -- just primary key
        AND pkgRate.pkg_id = pkgDtl.pkg_id
]]>
</sql-query> 
```

该查询应该（我希望它）为 pkgDtl 中的每个项目返回一行，并填写 FtChargeAcctPkgDtl#ftChargeAcctPkgRates。但实际上它为 ft_charge_acct_pkg_rate 中的每个项目返回一行。

假设主（pkgDtl）表中有 5 行，连接的表中有 50 行（单个 pkgDtl 的平均 10 pkgRates）。当我使用调用查询时

```
Query query = session.getNamedQuery("readSymbolsFtPackages");
query.list(); 
```

我得到50行。然而，其中 45 个是重复的。我想得到这 5 个 pkgDtls 并且每个都填入 pkdRates。有没有办法在休眠中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:28:08.313

采用：

```
Query query = session.getNamedQuery("readSymbolsFtPackages");
query.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY);
query.list(); 
```

问候

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T08:24:06.677

受@manu-navarro 的启发，我带来了这个变压器：

```
/**
 * Transformer, that returns only distinct rows from the set.
 *
 * Distinction is based on all &lt;return alias/&gt; items.
 */
public class DistinctResultTransformer extends BasicTransformerAdapter {
    @Override
    public List transformList(List collection) {
        // set of objects already in the result
        Set<List<Object>> existingRows = new HashSet<List<Object>>();
        List result = new ArrayList();

        for (Object row : collection) {
            // array must be converted to list as array has equals() implemented using ==
            List<Object> rowAsList = Arrays.asList((Object[]) row);

            if (!existingRows.contains(rowAsList)) {
                existingRows.add(rowAsList);
                result.add(row);
            }
        }

        return result;
    }
} 
```

然后使用

```
Query query = session.getNamedQuery("readSymbolsFtPackages");
query.setResultTransformer(new DistinctResultTransformer());
query.list(); 
```

这很好用。

# qt - Qt 信号和槽

> ID：12071016
> 
> 赞同：3
> 
> 时间：2012-08-22T10:19:59.230
> 
> 标签：qt, signals, slot

我有两个功能，其中一个调用另一个。我想将其中一个用作按钮中信号 clicked() 的插槽，因此这是我的 planevolume.h 代码的一部分，因此您可以理解：

```
#ifndef PLANEVOLUME_H
#define PLANEVOLUME_H

#include <QMainWindow>

namespace Ui {
    class planevolume;
}

//more stuff here

class planevolume : public QMainWindow {
    Q_OBJECT
public:
    planevolume(QWidget *parent = 0);
    ~planevolume();

protected:
    void changeEvent(QEvent *e);

private:
    Ui::planevolume *ui;
//more stuff here

public slots:
    void AlignXAxis(int xmin, int xmax, vtkImagePlaneWidget* planeX);
    void AlignCamera(vtkImagePlaneWidget* current_widget);

};

#endif // PLANEVOLUME_H 
```

我会在这里放一些我的planevolume.cpp，这样你就可以理解我在它之后遇到的错误是什么。

```
#include <qwidget.h>
#include <qaction.h>
#include <qobject.h>

//more includes

// Define AlignCamera
void planevolume::AlignCamera(vtkImagePlaneWidget* current_widget)
    {
    //regular statements of a function

        vtkCamera *camera=ren->GetActiveCamera();
        camera->SetViewUp(vx, vy, vz);
        camera->SetFocalPoint(cx, cy, cz);
        camera->SetPosition(px, py, pz);
        camera->OrthogonalizeViewUp();
        ren->ResetCameraClippingRange();
        renWin->Render();
    }

// Define the action of AlignXAxis
void planevolume::AlignXAxis(int xmin, int xmax, vtkImagePlaneWidget* planeX)
    {
        //regular statements of a function
        vtkImagePlaneWidget *current_widget= planeX;
        ui->horizontalScrollBar->setValue(slice_number);
        ui->horizontalScrollBar->setMinimum(xmin);
        ui->horizontalScrollBar->setMaximum(xmax);
        AlignCamera(current_widget);//here I call the other one
    }
planevolume::planevolume(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::planevolume)

{
    ui->setupUi(this);

    //regular stuff
//I think here is the problem when i make the connect
        connect(ui->pushButton,SIGNAL(clicked()),this,SLOT(AlignXAxis(int, int, vtkImagePlaneWidget)));

    // Start the initialization and rendering
        renWin->Render();
        //iren->Initialize();
        //iren->Start();

    // Assign the rendering window to the qvtkwidget
      ui->qvtkWidget->SetRenderWindow(renWin);
    } 
```

所以它们可以编译，但是当我单击按钮时，它只会在应用程序的输出中显示：

Object::connect: 没有这样的插槽 planevolume::AlignXAxis(int, int, vtkImagePlaneWidget) in planevolume.cpp:386 Object::connect: (sender name: 'pushButton') Object::connect: (receiver name: 'planevolume' )

所以如果有人知道我做错了什么，请给我一些提示或其他东西，因为这让我发疯。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T10:52:16.443

两个问题：

1.）插槽需要一个指向最后一个参数的指针而不是一个对象，因此连接中缺少 * （在同时删除的答案中建议了这一点）。但是，还有一个更大的问题：

2.) 进行连接时，SIGNAL 中的参数不可能比 SLOT 中的参数少

正确的方法是这样的：

```
connect( ui->pushButton, SIGNAL( clicked        () ),
         this          , SLOT  ( onButtonClicked() ) ) 
```

（注意：如果你好奇我为什么要使用这么多空格：我这样做是为了让我可以很容易地发现哪个对象连接到哪个其他对象，哪个信号连接到哪个插槽以及参数是否匹配）

然后有一个像这样的插槽：（.cpp文件）

```
/* private slot */
void planevolume::onButtonClicked()
{
    int xMin = /* get the value from somewhere */
    int xMax = /* get the value from somewhere */
    vtkImagePlaneWidget* planeX = /* get the value from somewhere */
    AlignXAxis( xMin, xMax, planeX );
} 
```

.h 文件包含：

```
private slots:
    void onButtonClicked(); 
```

当前连接的问题是 clicked() 信号没有为 xMin、xMax 和 planeX 提供任何值。Qt 不知道从哪里读取这些值。

# php - 将 PHP 转换为 JavaScript。将键/值存储到数组中

> ID：12071019
> 
> 赞同：4
> 
> 时间：2012-08-22T10:20:15.227
> 
> 标签：php, javascript, jquery, arrays

我想将以下 PHP 代码转换为 JavaScript，这是 PHP 中的键/值对数组：

**PHP代码：**

```
$countries = array("AF"=>"AFGHANISTAN","AX"=>"ALAND ISLANDS"); 
```

在 jQuery 或 JavaScript 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T10:22:43.510

javascript 没有关联数组（就像在 PHP 中，你上面的例子），相反，我们称之为 javascript 对象：

```
var countries = {
    'AF': 'AFGHANISTAN', 
    'AX': 'ALAND ISLANDS'
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:22:50.133

```
var countries = {
  "AF": "AFGHANISTAN",
  "AX": "ALAND ISLANDS"
} 
```

然后，要获取给定键的值，请使用以下方法之一：

```
var af = countries["AF"];
var ax = countries.AF; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:28:20.253

使用[json_encode()](http://php.net/manual/en/function.json-encode.php)：

```
<script>
    var countries = <?php echo json_encode($countries); ?>;
</script> 
```

这就是将存储的内容`countries`：

```
{
    AF : "AFGHANISTAN",
    AX : "ALAND ISLANDS"
} 
```

如果您只想在 JS 中重现这样的数据结构，请使用其他帖子中所述的[对象。](http://www.w3schools.com/js/js_objects.asp)

# javascript - QML 和 QThread 多线程

> ID：12071021
> 
> 赞同：0
> 
> 时间：2012-08-22T10:20:26.327
> 
> 标签：javascript, multithreading, qml, qthread

我使用一个类

```
class DesktopFileScanner : public QThread 
{ 
void scan() { start(QThread::HighPriority)); }
void run() { /* the scanning instructions here*/}
/**/ 
}; 
```

执行耗时（约 2 秒）的操作。我想在扫描仪执行此操作时显示忙碌指示符。忙碌指示器被称为

```
ind 
```

qml 表具有以下属性：

```
Component.onCompleted:
{
    scanner.scan() // scanner is an instance of DesktopFileScanner
    ind.visible = false
} 
```

这样，在扫描仪完成扫描之前，指示器就会变得不可见。我该如何解决它

```
ind.visible = false 
```

扫描器线程完成后将被调用（扫描器完成扫描）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:12:53.497

可以使用 QML 中的 Connections 项

```
Component.onCompleted:
{
    scanner.scan()
}

Connections
{
    target: scanner
    onFinished: ind.visible = false
} 
```

# wordpress - 在 wordpress 的编辑屏幕上显示更多帖子

> ID：12071026
> 
> 赞同：0
> 
> 时间：2012-08-22T10:20:34.977
> 
> 标签：wordpress

当我单击帖子选项卡时，我正在寻找一种方法来增加管理编辑屏幕中显示的帖子数量。

我浏览了网络，发现了以下功能：

```
function customize_admin(){
global $per_page;
$per_page = 500; 
```

}

这似乎不起作用。如果上面的代码是正确的，有什么想法吗？

谢谢，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:02:53.620

发现实际上屏幕选项下有一个选项可以更改它！

# php - 显示表中的随机数据

> ID：12071027
> 
> 赞同：1
> 
> 时间：2012-08-22T10:20:37.293
> 
> 标签：php, mysql, forms

在发布此内容之前，我已经查看了该网站，但似乎没有任何意义。我有一个将信息提交到表格的表格。for 包含三个字段：$name、$link 和 $itunes。MySQL 表有 3 列，我希望随机提取名称、链接和 itunes 并将其显示在页面上。我目前没有代码，除了提交到数据库的表单。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T10:22:54.347

```
SELECT * FROM `table` ORDER BY RAND() LIMIT 0,1; 
```

这将从 mysql 获取任何随机数据。

办理方式：

```
<?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT * FROM `table` ORDER BY RAND() LIMIT 0,1";

if ($result = mysqli_query($link, $query)) {

    /* fetch associative array */
    while ($row = mysqli_fetch_assoc($result)) {
        printf ("%s (%s)\n", $row["Name"], $row["CountryCode"]);
    }

    /* free result set */
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:22:35.750

这是您可能会发现有用的 SQL 查询：

```
SELECT name, link, table FROM mytable ORDER BY rand() LIMIT 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:25:44.250

使用该表结构，您可以使用 ORDER BY rand() 但它太慢了。
如果您有一个 id 列，您可以获得最后一行（即 SELECT id FROM table_name ORDER BY id DESC LIMIT 1），然后使用 php 获得一个随机值（rand(1,$max) ），然后使用选择查询通过该随机 ID 获取该行。您必须检查此 id 是否确实存在，以防您将其删除。

# html - 使用 ie6,7 和兼容性视图时不出现 CSS HTML 背景图像

> ID：12071030
> 
> 赞同：0
> 
> 时间：2012-08-22T10:20:45.507
> 
> 标签：html, css, background-image

您好我有以下问题：使用所有浏览器时，它显示背景正常。使用 IE6,7 或兼容性视图时没有显示背景图像。当删除所有“背景图像”并留下后备时，一切正常。请帮忙。
这是**CSS**：

```
html,body{
     background: #529BCE;
     background-image: url('Img/bg.png'); /* fallback */
     background-image: url('Img/bg.png'), -webkit-gradient(linear, left top, left bottom, from(#1D3A62), to(#57A3D5)); /* Saf4+, Chrome */
     background-image: url('Img/bg.png'), -webkit-linear-gradient(top, #1D3A62, #57A3D5); /* Chrome 10+, Saf5.1+ */
     background-image: url('Img/bg.png'), -moz-linear-gradient(top, #1D3A62, #57A3D5); /* FF3.6+ */
     background-image: url('Img/bg.png'), -ms-linear-gradient(top, #1D3A62, #57A3D5); /* IE10 */
     background-image: url('Img/bg.png'), -o-linear-gradient(top, #1D3A62, #57A3D5); /* Opera 11.10+ */
     background-image: url('Img/bg.png'), linear-gradient(top, #1D3A62, #57A3D5); /* W3C */
     background-repeat: no-repeat;
     color:#18364B;
     font-family: Arial,Verdana,Geneva,Helvetica,sans-serif;
     font-size:20px;
     line-height:1.2em;
     margin:0;padding:0;
     height: 100%;
     overflow: auto;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:37:14.907

尝试重新声明 ie6 和 ie7 的背景图像。在您的文件后添加以下内容`css`：

```
 <!--[if IE 6]><style>html,body{background:#529bce url("../Img/bg.png") 0 0 no-repeat}</style>
<![endif]-->
<!--[if IE 7]><style>html,body{background:#529bce url("../Img/bg.png") 0 0 no-repeat}</style>
<![endif]--> 
```

这应该可以，但如果您在 IE6 中没有看到 png，那是因为不支持 png。如果您仍然遇到问题，请更改每个样式，以便您知道您的目标是什么，然后从那里开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:25:25.717

这是编辑后的CSS。试试这个

```
 html,body
    {
       background-color: #57A3D5;
    background-color: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#1D3A62), to(#57A3D5));
    background-color: -moz-linear-gradient(top, #1D3A62 0%, #57A3D5 100%);
    background-image: url('../Img/bg.png'); /* fallback */ 
    background-repeat: no-repeat;
    color:#18364B;
    font-family: Arial,Verdana,Geneva,Helvetica,sans-serif;
    font-size:20px;
    line-height:1.2em;
    margin:0;padding:0;
    height: 100%;
    overflow: auto;

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:47:12.347

试试这个;

```
<!--[if IE 6]><style type="text/css">html,body{background-color: #529bce; background-image: url('../Img/bg.png'); background-repeat: no-repeat}</style>
<![endif]-->
<!--[if IE 7]><style type="text/css">html,body{background-color: #529bce; background-image: url('../Img/bg.png'); background-repeat: no-repeat}</style>
<![endif]--> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T11:00:07.600

这是因为您使用的是[多背景图像语法](https://developer.mozilla.org/en-US/docs/CSS/Multiple_backgrounds)，这会混淆旧版本的 IE。所以代替这个

```
 background-image: url('Img/bg.png'); /* fallback */
 background-image: url('Img/bg.png'), -webkit-gradient(linear, left top, left bottom, from(#1D3A62), to(#57A3D5)); /* Saf4+, Chrome */
 /* etc */ 
```

您需要`url()`使用渐变从背景图像中删除该部分，如下所示：

```
 background-image: url('Img/bg.png'); /* fallback */
 background-image: -webkit-gradient(linear, left top, left bottom, from(#1D3A62), to(#57A3D5)); /* Saf4+, Chrome */
 background-image: -webkit-linear-gradient(top, #1D3A62, #57A3D5); /* Chrome 10+, Saf5.1+ */
 background-image:    -moz-linear-gradient(top, #1D3A62, #57A3D5); /* FF3.6+ */
 background-image:     -ms-linear-gradient(top, #1D3A62, #57A3D5); /* IE10 */
 background-image:      -o-linear-gradient(top, #1D3A62, #57A3D5); /* Opera 11.10+ */
 background-image:         linear-gradient(top, #1D3A62, #57A3D5); /* W3C */ 
```

如果您需要较新的浏览器具有渐变*和* `url('Img/bg.png')`，则需要找到一种专门针对旧版本 IE 的方法。我赞成[条件类方法](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)。

# javascript - 如何使用 JavaScript 在 HTML5 iframe 中加载/附加 jQuery 库？

> ID：12071032
> 
> 赞同：3
> 
> 时间：2012-08-22T10:20:49.027
> 
> 标签：javascript, jquery

我已经使用 Angular JS 和老式 JavaScript 创建了一个简单的代码编辑器，现在我想添加一个代码预览工具。

这是我用来动态创建 iframe、将其添加到 DOM 并填充使其工作所需的元素的代码：

```
...
function updatePreview() {
    var iFrame, doc, styleElm, jQueryElem, styles, javascript;
    var container, $head, $body;
    var $jsRequirements = [], addditionalJS = [], $cssRequirements = [];

    //set base requirements for iframe element
    $jsRequirements = [
        'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js',
        'http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js',
    ];

    $additionalJS = [
        'js/libs/main.js',
        'js/libs/plugin.slideshow.js'
    ];

    $cssRequirements = [
        'c/theme/jquery-ui-1.8.23.custom.css'
    ];

    //set up a new HTML5 iFrame with basic styling
    iFrame = document.createElement('iframe');
    iFrame.className = "previewPane";
    iFrame.style.height = "100%";
    iFrame.style.width = "100%";

    //append iFrame to previewContainer
    container = document.getElementById('previewPanel');
    container.appendChild(iFrame);

    //init main iFrame content for manipulation
    doc =  iFrame.contentDocument ||  iFrame.contentWindow.document;

    // init the inline style container element
    styleElm = doc.createElement('style');
    styleElm.setAttribute('rel','stylesheet');
    styleElm.setAttribute('type','text/css');
    styleElm.setAttribute('media', 'screen');

    //grab css from CSS code pane
    styles = cssCode.getValue();

    //grab JS from the JS code pane
    javascript = jsCode.getValue();

    //write main HTML code
    doc.open();
    doc.write(htmlCode.getValue());
    doc.close();

    //must add any JS & styling *after* initial html code dump
    $head = doc.getElementsByTagName('head')[0];
    $body = doc.getElementsByTagName('body')[0];

    //init script element and populate 
    //with local jQuery variable declaration 
    //for iFrame script execution
    jQueryElem = doc.createElement('script');
    jQueryElem.setAttribute('type','text/javascript');
    //append the JS from the jsPanel to the same element
    jQueryElem.appendChild(document.createTextNode(javascript));

    //now the javascript
    setupJSReqs($jsRequirements, doc, $head);
    setupJSReqs($additionalJS, doc, $body);

    styleElm.appendChild(document.createTextNode(styles));
    $head.appendChild(styleElm);
    $body.appendChild(jQueryElem);

}

    setTimeout(updatePreview, 300);
});

}

function setupJSReqs(JSArray, container, target) {
    for (var x in JSArray) {
        var jsElem = container.createElement('script');
        jsElem.setAttribute('type','text/javascript');
        jsElem.setAttribute('src', JSArray[x]);
        target.appendChild(jsElem);
    }
} 
```

这段代码在视觉上工作正常（即 chrome 开发工具在正确的位置显示所有元素）但我得到一个错误：

```
**Uncaught ReferenceError: $ is not defined** 
```

我可能是错的，但我猜 dom 没有正确拉入 iframe jQuery 库。我可以通过 var $ = parent.$ 之类的方法来解决这个问题，但这不是理想的解决方案。

有什么建议可以解决这个错误？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:55:38.220

您正在`<script>`使用 DOM 操作动态附加元素。这意味着外部脚本是*异步*加载的- 并将在（稍后插入的）内联脚本之后执行。

要解决此问题，您可以：

*   钩住外部资源的加载事件，加载完后插入内联脚本
*   用于`doc.write(…)`整个页面，即将脚本标签插入到您的 html 字符串中。然后脚本将同步加载和执行。

# assembly - 兼容的汇编器教程

> ID：12071033
> 
> 赞同：0
> 
> 时间：2012-08-22T10:20:57.840
> 
> 标签：assembly, windows-7, 64-bit

我想玩汇编程序。但是我有一台64位的机器。

我发现的所有教程都与我的环境不兼容。我使用了 Win7、64 位、Visual Studio-> MASM ASsembler。

我开始了一些教程，但后来出现错误 A2006:undefined symbol : DGROUP 或我创建的程序无法启动，因为它与 win7 不兼容

我问了一些人，并建议我使用旧的 16 位链接器等。是不是无法学习和练习 64 位的汇编程序？

我在哪里可以找到相关的东西？我的目标：能够在 Assembler 中重新编程 c++ 基础知识（循环、条件等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:11:09.977

在 64 位机器上您可以运行 32 位代码和 64 位代码。你不能运行 16 位代码（没有像 DosBox 这样的模拟器）。我推荐你 masm32.com 网站开始:)

# go - 为什么这个 go 代码会失败？

> ID：12071040
> 
> 赞同：2
> 
> 时间：2012-08-22T10:21:18.340
> 
> 标签：go

我用 FP 风格编写了一些 go 代码来生成素数：

```
package main
import (
    "fmt"
)

func gen_number_stream() func() (int, bool) {
    i := 1
    return func() (int, bool) {
        i += 1
        return i, true
    }
}

func filter_stream(stream func() (int, bool), f func(int) bool) func() (int, bool) {
    return func() (int, bool) {
        for i, ok := stream(); ok; i, ok = stream() {
            if f(i) {
                return i, true
            }
        }
    return 0, false
    }
}

func sieve(stream func() (int, bool)) func() (int, bool) {
    return func() (int, bool) {
        if p, ok := stream(); ok {
            remaining := filter_stream(stream, func(q int) bool { return q % p != 0 })
            stream = sieve(remaining)
            return p, true
        }
        return 0, false
    }
}

func take(stream func() (int, bool), n int) func() (int, bool) {
    return func() (int, bool) {
        if n > 0 {
            n -= 1
            return stream()
        }
        return 0, false
    }
}

func main() {

    primes := take(sieve(gen_number_stream()), 50)

    for i, ok := primes(); ok; i, ok = primes() {
        fmt.Println(i)
    }

} 
```

当我运行这段代码时，它变得越来越慢，最后得到一个像这样的运行时错误：

```
runtime: out of memory:  [...] 
```

这是python代码的一个版本，它运行良好：

```
def gen_numbers():
    i = 2
    while True:
        yield i
        i += 1

def sieve(stream):
    p =  stream.next()
    yield p
    for i in sieve( i for i in stream if i % p != 0 ):
        yield i

def take(stream,n):
    for i,s in enumerate(stream):
        if i == 50: break
        yield s

def main():
    for i in take(sieve(gen_numbers()),50):
        print i

if __name__ == '__main__':
    main() 
```

我想知道为什么以及如何解决它。是我的代码问题还是golang编译器的问题？谢谢！

PS：对不起我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:32:48.547

问题是你的筛子函数是递归的。我怀疑您通过在循环中不断递归地调用 sieve 来破坏您的堆栈。

```
func sieve(stream func() (int, bool)) func() (int, bool) {
    return func() (int, bool) {
        if p, ok := stream(); ok {
            remaining := filter_stream(stream, func(q int) bool { return q % p != 0 })
            stream = sieve(remaining) // just keeps calling sieve recursively which eventually blows your stack.
            return p, true
        }
        return 0, false
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:10:28.370

您重复使用流

```
 if p, ok := stream(); ok {
        remaining := filter_stream(stream, func(q int) bool { return q % p != 0 }) 
```

但是对于每一个新的“ `p`”，你必须创建一个新的“ `stream2`”

```
 if p, ok := stream(); ok {
        stream2 := ....
        remaining := filter_stream(stream2, func(q int) bool { return q % p != 0 }) 
```

# batch-file - if 和 else 错误 BATCH

> ID：12071042
> 
> 赞同：0
> 
> 时间：2012-08-22T10:21:26.653
> 
> 标签：batch-file, cmd

if 和 else 批量我已经尝试了很多次来让这个工作，但我似乎无法找到问题任何人都可以帮忙吗？

```
FOR /R "C:\Program Files" %%a IN (.) DO
if exist "%%~a\yes.txt" (
    echo yes
) else 
(
    md Pictures
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T10:42:32.517

你应该看说明书！
`if /?`

描述了括号必须在`ELSE`is 所在的同一行。

```
FOR /R "C:\Program Files" %%a IN (.) DO (
  if exist "%%~a\yes.txt" (
    echo yes
  ) else (
    md Pictures
  )
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T21:41:28.950

在 cmd shell 的语法中，命令以行尾结束，除非仍然有一个“()”打开。因此，在您上面的代码中，该行

```
FOR /R  "C:\Program Files" %%a IN (.) DO 
```

是完整的`for`循环 - 你正在循环并且`DO`什么都没有。要将`FOR`命令继续到另一行，您需要添加一个“（”：

```
FOR /R  "C:\Program Files"  %%a IN (.) DO ( 
```

现在您可以使用您的`If`语句继续该命令。你的`If`陈述也是如此。你输入了

```
if exist "%%~a\yes.txt" (
    echo yes
) else 
```

因此，带有 的行末尾的“（”将其`IF`继续到带有 的行上的匹配“）” ，但在同一行`else`之后没有“（” ，您的命令将终止，并且在语法上不正确。`else``if`

但我不确定你的代码是否真的在做你想做的事。它将尝试*在您执行命令的任何目录*中创建目录“Pictures” ，并且每次它找到不包含文件的“C：\ Program files”的某些子目录时，它都会尝试重复创建它“yes.txt”（这将是很多目录）。因此，您将在第一次创建“tmp”，然后所有后续尝试只会导致错误消息。

这里的关键是循环会将目录名称分配给 %%a，*但它不会对该目录执行“CD”*，因此您仍然“在”开始循环的目录中。

你到底想做什么？

# sql-server - 如何在 Report builder 3.0 查询设计器中拆分字符串？

> ID：12071048
> 
> 赞同：1
> 
> 时间：2012-08-22T10:22:09.273
> 
> 标签：sql-server, sql-server-2008, reporting-services, dynamics-crm-4

我创建了一个名为资源投影的报告并创建了 3 个参数：

1.  技术技能：类型：文本，多选：真，空白值：真，默认值：数据库中的一行（大约 15 个值）。

2.  管理技能：类型：文本，多选：真，空白值：真，默认值：数据库中的一行（大约 7 个值）。

3.  作用：类型：文本，多选：真，空白值：真，默认值：数据库中的一行（大约 30 个值）。

我的查询是：

```
SELECT O.CustomerIdName,
    TC.New_ResourcesIdName,
    TC.New_number,
    TC.New_RoleIdName,
    TC.New_Skill_value,
    TC.New_mng_value,
    TC.New_year,
    convert(nvarchar(10),TC.New_StartDate,101) as New_StartDate,
    convert(nvarchar(10),TC.New_EndDate,101) as New_EndDate
FROM New_resource as TC
INNER JOIN Opportunity as O ON
    (TC.New_ResourcesId = O.OpportunityId)
WHERE TC.DeletionStateCode = '0' 
    and TC.New_ResourcesId is not null
    and ((TC.New_Skill_value in (@TechnicalSkills))or (TC.New_mng_value in (@ManagementSkills)))
    and TC.New_RoleIdName in (@Role) 
```

但是`New_Skill_value`并`New_mng_value`包含逗号分隔的字符串，例如：

```
New_Skill_value = "Android,Java,PHP,SQL".
New_mng_value = "Communication Skill, Decision Making Skill". 
```

现在，当我运行此报告时，它只向我显示仅包含一个`New_skill_value`和的列`New_Mng_value`。

那么如何分隔这 2 个逗号分隔的字符串并用逗号分隔的字符串显示所有记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:42:11.673

正如您所说，您的 New_Skill_value 和 New_mng_value 用逗号分隔，您传递的参数也用逗号分隔。

所以上面的查询只有在表值和传递的变量值完全匹配时才有效。

我想这可能不会总是发生，因为您传递的变量可能包含相同的值集但顺序不同，那么此查询可能不会返回任何内容。

所以我在这里建议的是，如果可能的话，您可以将表中的所有逗号分隔列拆分为单独的表，例如 id、values，然后再加入临时表以获得准确的结果。

这里的临时表只是变量中的值。

# python - 用 Python 编写 OAuth 提供程序：指南 + 库？

> ID：12071054
> 
> 赞同：5
> 
> 时间：2012-08-22T10:22:35.293
> 
> 标签：python, oauth

我希望在 Python 中实现 OAuth v1 提供程序（是的，独立于 GAE 和 Django）。我能想到的最好的事情就是使用这个库：

[https://github.com/simplegeo/python-oauth2](https://github.com/simplegeo/python-oauth2)

但除了模拟服务器和数据存储之外，它缺少文档。有没有更好的方法：

*   关于如何在 Python 中编写 OAuth 提供程序的指南？
*   一个有更好记录和测试的库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T06:10:47.907

[oauthlib](https://github.com/idan/oauthlib)是一个文档齐全的库，可帮助您[实现 OAuth 1.0 提供程序](https://oauthlib.readthedocs.org/en/latest/oauth1/server.html)。我还没有尝试过提供程序部分，但我已经通过[requests-oauthlib](https://github.com/requests/requests-oauthlib)使用了 OAuth 客户端代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T15:32:09.693

那么[http://oauth.googlecode.com/svn/code/python/oauth/](http://oauth.googlecode.com/svn/code/python/oauth/)呢？它有客户端和服务器代码。

# jquery - jquery在大图像div底部向上滑动面板

> ID：12071056
> 
> 赞同：1
> 
> 时间：2012-08-22T10:22:36.670
> 
> 标签：jquery, css

我需要设置一个 jquery 函数来使面板在单击 div 时从 div 的底部向上滑动。我目前拥有的是这样的：

```
 $(function() {

  var open = false;

  $('.header-wrapper').click(function() {

      if(open === false) {
          $('.header-controls').show();
          $('.header-controls').animate({top:'350px', height:'50px'}, 800, function() {
            //callback
          }); 

          $(this).css('backgroundPosition', 'bottom left');

          open = true;

      } else {

          $('.header-controls').animate({top:'400px', height:'0px'}, 800, function() {
            $('.header-controls').hide(); 
          }); 
          $(this).css('backgroundPosition', 'top left');

          open = false;

      }

  });     

}); 
```

不幸的是，这仅在滑动面板设置为 position: fixed 时才有效 - 这意味着一旦页面滚动，面板（如果打开）就会随之关闭。我如何设置相同的东西，但确保面板与关联的 div 保持一致？

这是一个快速的 jsfiddle 来显示它当前的工作方式：http: [//jsfiddle.net/nAX43/5/](http://jsfiddle.net/nAX43/5/)（只需单击图像然后向下滚动以查看问题）...

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:05:02.700

如果您将其更改为`position: absolute`下面的课程，它会正常工作，

```
.header-controls {
    position: absolute;
    top:400px;
    width: 100%;
    height:0;
    background-color:rgba(42, 42, 42, 0.5);
    color:#ccc;
    z-index: 5000;
    display:none;
} 
```

见演示。[http://jsfiddle.net/nAX43/7/](http://jsfiddle.net/nAX43/7/)

# asp.net - 中央认证授权系统

> ID：12071062
> 
> 赞同：0
> 
> 时间：2012-08-22T10:22:56.760
> 
> 标签：asp.net, authentication, authorization, centralized

有几种不同的 Web 服务——使用的各种技术，如 Java、.NET、Python、Perl，未来可能还会更多——属于不同的组织，并且必须限制对这些 Web 服务的访问。

这个想法是有一个中央身份验证和授权服务器，只负责授予每个具有访问权限的应用程序的访问权限。

我正在寻找构建此应用程序的任何建议或参考。

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T15:39:19.373

CAS（中央认证服务）服务器或 OpenID 服务器。CAS 更加企业化，而 OpenID 更加受社交媒体驱动，但两者都适用于您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:27:06.930

例如，您是否正在寻找一个联合安全框架`Windows Identity Foundation`？

[http://msdn.microsoft.com/en-us/security/aa570351.aspx](http://msdn.microsoft.com/en-us/security/aa570351.aspx)

# php - Mysql Insert With PHP - 不允许空格后的字符。

> ID：12071065
> 
> 赞同：0
> 
> 时间：2012-08-22T10:23:05.230
> 
> 标签：php, mysql

我有一个 php 代码，它从 mysql 表中的字段生成一个列表。当我将信息提交到另一个数据库时，它在空格之后不显示任何内容 - 仅显示第一个单词（例如，如果我从下拉列表中选择“长袍点”并且仅将“长袍”插入数据库中）

这是我的php代码：

```
<?
$dbHost = 'localhost'; // localhost will be used in most cases
// set these to your mysql database username and password.
$dbUser = 'user'; 
$dbPass = 'pass';
$dbDatabase = 'stock'; // the database you put the table into.
mysql_connect("localhost", "user", "pass") or die(mysql_error()); 
mysql_select_db("stock") or die(mysql_error()); 
$query="SELECT category FROM subcategory_table";
/* You can add order by clause to the sql statement if the names are to be displayed 
in alphabetical order */
$result = mysql_query ($query);
echo "<select name='category'>";
// printing the list box select command
while($nt=mysql_fetch_array($result)){//Array or records stored in $nt
echo "<option value=$nt[category]>$nt[category]</option>";
/* Option values are added by looping through the array */
}
echo "</select>";// Closing of list box 
?> 
```

我正在寻找正确的代码，以便在提交回数据库时允许空格

谢谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T10:28:56.773

将您的代码修改为：

```
echo '<option value="' . $nt[category] . '">' . $nt[category] . '</option>'; 
```

问题在于期权价值。它应该工作。

# c# - 如何在 RichTextBox 中的文本上正确应用背景色

> ID：12071068
> 
> 赞同：4
> 
> 时间：2012-08-22T10:23:14.843
> 
> 标签：c#, .net, wpf, richtextbox

```
internal string Select(RichTextBox rtb, int index, int length)
    {
        TextRange textRange = new TextRange(rtb.Document.ContentStart, rtb.Document.ContentEnd);

        if (textRange.Text.Length >= (index + length))
        {
            TextPointer start = textRange.Start.GetPositionAtOffset(index, LogicalDirection.Forward);
            TextPointer end = textRange.Start.GetPositionAtOffset(index + length, LogicalDirection.Backward);
            rtb.Selection.Select(start, end); 
            rtb.Selection.ApplyPropertyValue(TextElement.BackgroundProperty, new SolidColorBrush(Colors.LightBlue)); 
        }
        return rtb.Selection.Text;
    } 
```

每当调用 ApplyPropertyValue 来更改所选文本的背景颜色时，它在第一次时效果很好，但在第二次调用时它不能正确调整所选文本段的背景颜色。我怀疑这与调用函数后文档的偏移量以某种方式被搞砸有关。

什么是解决这个问题的好方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T12:11:48.273

试试这个（它需要一个比你的逻辑更复杂的逻辑），否则是的：你有偏移问题！

```
private static TextPointer GetTextPointAt(TextPointer from, int pos)
{
        TextPointer ret = from;
        int i = 0;

        while ((i < pos) && (ret != null))
        {
            if ((ret.GetPointerContext(LogicalDirection.Backward) == TextPointerContext.Text) || (ret.GetPointerContext(LogicalDirection.Backward) == TextPointerContext.None))
                i++;

            if (ret.GetPositionAtOffset(1, LogicalDirection.Forward) == null)
                return ret;

            ret = ret.GetPositionAtOffset(1, LogicalDirection.Forward);
        }

        return ret;
}

internal string Select(RichTextBox rtb, int offset, int length, Color color)
{
        // Get text selection:
        TextSelection textRange = rtb.Selection;

        // Get text starting point:
        TextPointer start = rtb.Document.ContentStart;

        // Get begin and end requested:
        TextPointer startPos = GetTextPointAt(start, offset);
        TextPointer endPos = GetTextPointAt(start, offset + length);

        // New selection of text:
        textRange.Select(startPos, endPos);

        // Apply property to the selection:
        textRange.ApplyPropertyValue(TextElement.BackgroundProperty, new SolidColorBrush(color));

        // Return selection text:
        return rtb.Selection.Text;
} 
```

然后以这种方式使用它（我在 RED 中选择从第一个字符到第五个字符）：

```
this.Select(this.myRichTextBox, 0, 5, Colors.Red); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T13:42:09.420

首先，MAXE 的回答很好，因为它清楚地向我展示了我遇到的根本问题：需要记住 WPF 中的流文档控件处理的是标记，而不是原始文本。因此，潜在的问题是跳过标记，直到您实际处理包含元素内的文本。

这个解决方案的问题是速度非常慢。例如，使用此方法选择大约 150 条文本的应用程序需要大约 20 秒来执行，而其中的大约 20 毫秒都用于选择文本！

这个问题没有适用于所有场景的通用解决方案，但仔细考虑您要实现的目标并进行相应优化是值得的。一个常见的场景是创建一个单独的运行（段落等）并在其中放置一个文本块，然后在该单个元素中选择/突出显示文本。在这种情况下，您知道只有一个“元素”，因此您可以执行以下操作，从而获得与上述相同的结果：

```
 internal static TextPointer GetOffsetTextPointer(this TextPointer start, int offset)
    {
        return start.GetInsertionPosition(LogicalDirection.Forward).GetPositionAtOffset(offset);
    } 
```

作为参考，**GetInsertionPosition**方法将跳过起始元素标记，直到您的文本实际开始的位置，然后**GetPositionAtOffset**方法在一次调用中获取实际指针。作为比较，上面的示例现在执行时间不到 2 秒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-28T11:27:58.733

感谢 MAXE 提供的出色解决方案。

您可能会在 rtf 文本中遇到换行符和其他不可见字符的问题。要解决此问题，请在方法的开头添加偏移校正器：

```
// Get the text between start and offset
string rtfBoxContentToOffset = rtfBoxContent.Substring(0, offset);

// check for linebreaks or other and decrement the offset
foreach (char character in rtfBoxContentToOffset)           
   if (character == '\r' || character == '\n') offset--; 
```

# git - 带有 bitbucket 的 git 归档命令

> ID：12071070
> 
> 赞同：3
> 
> 时间：2012-08-22T10:23:18.120
> 
> 标签：git, bitbucket

我使用 windows，git bash 提示符

我正在尝试将 git archive 命令与 bitbucket 一起使用

我收到错误远程：“git upload-archive：归档器因错误而死”

有任何想法吗 ？

git archive --remote=ssh://git@bitbucket.org/username/reponame.git --format=tar --output="file.tar"

我已经创建了所有 SSH 密钥和公钥等，甚至测试了 ssh -v hg@bitbucket.org 并且工作正常

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T12:56:13.853

在不精确树的情况下，你不能只得到一个档案——当你使用时，你想得到什么`--remote`

```
git archive --remote=ssh://git@bitbucket.org/username/reponame.git --format=tar --output="file.tar" master 
```

会工作，提到一个分支的名称。
这也适用于标签的名称。

但是，根据[这个线程](http://git.661346.n2.nabble.com/Passing-commit-IDs-to-git-archive-td7359753.html)，提交 ID*不起作用*：

> 是否有理由`git-archive`需要一个命名的 ref 而不仅仅是一个提交（或树）ID？
> 
> 是的; 通常 git 存储库不允许客户端访问任意 sha1。相反，它们要求请求的对象可以被 ref 访问。
> 
> `git-archive`没有正确执行这一点，并且最近被更改为只允许按名称引用，以及引用的子树（例如，`HEAD:subdir/`）。
> 这意味着我们确实不允许任意提交或树 sha1，即使它可以从广告参考中访问。
> 
> > 修补 git-upload-archive 以使用 ID 会很困难吗？
> > 我可以为 ref 使用标签，但在我的情况下，几乎每个提交都是一个看起来很浪费的标签。
> 
> 正确地做这件事有点昂贵，因为在一般情况下（有人请求树 sha1），我们需要遍历每个提交的每棵树以查看它是否可以访问。
> 
> 我们可能会实施一组更受限制的规则，允许“ `<commit>:<subdir>`”并检查`<commit>`是否可以访问。
> 这将不允许任意树 sha1，但我怀疑它会涵盖常见用例（即，您想要获取特定修订版的树，甚至子树）。

# gwt - 带有自定义标题的单元格表，其中包含过滤器文本框（如何将过滤器文本框绑定到 keyUphandler

> ID：12071072
> 
> 赞同：2
> 
> 时间：2012-08-22T10:23:31.860
> 
> 标签：gwt, gwt-2.5

我有一个要求，我需要创建具有文本框的自定义标题。输入时需要过滤匹配的记录。

通过使用以下[链接](https://stackoverflow.com/questions/6422896/celltable-with-custom-header-containing-searchbox-and-focus-problem)，我创建了自定义标题。我的 CustomHeader 类是

```
final public class ColumnHeaderFilterCell extends AbstractCell<String> {

interface Templates extends SafeHtmlTemplates {
@SafeHtmlTemplates.Template("<div >{0}</div>")
SafeHtml text(String value);

@SafeHtmlTemplates.Template("<div >
<input type=\"text\" value=\"\" name=\"{0}\"/></div>")
SafeHtml filter(String value);
}

private static Templates templates = GWT.create(Templates.class);

@Override
public void render(Context context, String value, SafeHtmlBuilder sb) {
if (value == null) {
    return;
}

SafeHtml renderedText = templates.text(value);

sb.append(renderedText);

SafeHtml renderedFilter = templates.filter(value);
sb.append(renderedFilter);
}
}

*ColumnHeader class is* 

public static class ColumnHeader extends Header<String> {

private String name_;

public ColumnHeader(String name) {
    super(new ColumnHeaderFilterCell());
    this.name_ = name;
    //setHeaderStyleNames("columnHeader " + field);
}

@Override
public String getValue() {
    return name_;
}
}

*Adding a column as*

ColumnHeader docColHeader = new ColumnHeader("Documentaton");
cellTable.addColumn(documentaton, docColHeader); 
```

现在我的问题是如何将 addKeyUpHandler() 事件添加到作为 celltable 标题的文本框？

如果文本框在其他地方之外，我已经通过使用以下 [链接](http://pro.ingens.ru/2011/11/gwt-celltable-filtering_24.html)实现了对 celltable 的过滤如果我 能够将文本框对象传递给 celltable 标题可能会有所帮助。我不知道如何通过。

谁能帮帮我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:05:03.380

单元内的事件处理不是通过像小部件那样的事件处理程序来完成，而是在较低级别完成。请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCustomCells#cell-onBrowserEvent](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCustomCells#cell-onBrowserEvent)

# objective-c - UIButton 和 UIBarButtonItem 在不同的时间范围内初始化？

> ID：12071074
> 
> 赞同：0
> 
> 时间：2012-08-22T10:23:35.327
> 
> 标签：objective-c, ios

我已经在界面生成器中连接了 a`UIButton`和 a 。`UIBarButtonItem`当我调用此方法时：

```
- (void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated 
```

我已经意识到 UIButton 未初始化（它仍然为零），而 UIBarButtonItem 已正确初始化。

我想知道它们是否在不同的时间范围内初始化，还是有其他原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:35:14.190

这个问题的答案在： http: [//osmorphis.blogspot.nl/2009/05/multiple-buttons-on-navigation-bar.html](http://osmorphis.blogspot.nl/2009/05/multiple-buttons-on-navigation-bar.html)

为 iOS 4.0 提供多个按钮所做的工作是为多个按钮创建一个容器（工具栏），然后将工具栏放在导航栏上。这样可以轻松添加多个按钮。（另见问题下方的评论）

# c# - 是否可以重命名为 WiX C# 自定义操作生成的类和程序集（用于 Visual Studio）？

> ID：12071076
> 
> 赞同：5
> 
> 时间：2012-08-22T10:23:38.710
> 
> 标签：c#, wix, custom-action

当我使用带有 Visual Studio 2010 的 WiX 3.x 创建一个名为“MyCustomActions”的 Windows Installer XML“C# 自定义操作项目”时，它会生成以下文件：

“CustomAction.config”、“CustomAction.cs”和项目文件“MyCustomActions.csproj”。

我们使用包含公司名称的程序集命名方案，因此我们将程序集名称更改为：CompanyName.ProductName.MyCustomActions

同时，我们将 CustomActions 类的默认命名空间和实际命名空间更改为 CompanyName.ProductName.MyCustomActions，以匹配 assemblyname 。

在不更改任何其他文件或类名的情况下这样做可以吗？

我想知道的是“CustomAction.config”文件的使用——它的名称是否必须以某种方式与输出程序集名称相关？我不确定如何使用“CustomAction.config”。

另外：“CustomAction.cs”文件包含一个名为“CustomActions”的类（注意复数形式），我们的命名约定规定类的代码文件应该与类本身同名，所以我们想重命名代码文件到“CustomActions.cs”。我很确定没关系……是吗？

最后，如果我们确实将 CustomAction 类重命名为其他名称，可以吗？同样，我只关心它与“CustomAction.config”的关系。

我想所有这些问题都可以归结为一个问题：“CustomAction.config”文件的名称与其余的命名空间、程序集和类名称之间有什么关系？

如果我有答案，它将回答我之前的所有问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T10:14:19.323

对于 WIX 自定义操作项目，无论您如何命名您的类或程序集或命名空间或其他任何名称，配置文件都必须始终命名为“CustomAction.config”（认为它在 WIX 中是硬编码的）并且它的构建操作在文件中VS 中的属性应设置为“内容”。项目中的其他任何东西都没有这样的要求。

此配置文件可以指定支持的 CLR 版本（实际上是推荐的），并且可以包含您的自定义操作 dll 可能需要的任何其他配置。

您的 dll 将能够使用标准的 .Net 应用程序配置 API 读取这些附加配置设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T04:16:11.127

我已经使用配置文件在其他 .NET 框架以及已编译的框架中运行该应用程序。例如，如果我们使用 CLR 2.0（.NET Framework 2.0 或 3.5），则该应用程序无法在单独安装了 .NET Framework 4.0 的机器上运行。在这种情况下，如果我们在配置文件中设置以下代码并将配置文件与应用程序一起放置，它将在单独安装了 Framework 4.0 的机器上运行。

```
<startup useLegacyV2RuntimeActivationPolicy="true">
<supportedRuntime version="v2.0.50727"/>
<supportedRuntime version="v4.0"/> 
```

我希望同样的理由在这里使用配置文件。

# matlab - 如何在 Matlab 中将函数作为参数传递

> ID：12071078
> 
> 赞同：1
> 
> 时间：2012-08-22T10:23:39.167
> 
> 标签：matlab

我在 m 文件中定义了这个函数：

```
function[it,xvect,xdif,fx]=bisez(a,b,nmax,toll,fun)
it=-1;
xvect=[];
xdif=[];
fx=[];
err=toll+1;

while(it<nmax && err>toll)
x=(b+a)/2;
  if(fun(x)==0)
    err=0;
  else
    err=abs(b-a)/2;
  end
it=it+1;
xvect=[xvect;x];
xdif=[xdif;err];
fx=[fx:fun(x)];
  if(fun(x)*fun(a)>0)
    a=x;
  else
    b=x;
  end;
end;
if(it<nmax)
  fprintf('Convergence computed at step k:%d\n',it);
else
  fprinf('Iteration limit reached: %d\n',it);
end
  fprintf('Computed root: %-12.8f\n',xvect(it+1));
return 
```

然后，如果我尝试使用以下命令调用它：

```
fun=@(x)exp(x);
a=1;
b=1.5;
nmax=1000;
toll=2;
bisez(a,b,nmax,toll,fun) 
```

我收到此错误：

```
??? Undefined function or method 'bisez' for input arguments of type 'function_handle'. 
```

我错过了什么？

PS：我正在使用`Matlab 2007b`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T10:31:08.400

当您运行它时，它似乎不在您的 PATH 中。

如果我从我的 PATH 运行它，我会得到：

```
>> bisez(a,b,nmax,toll,fun)
   Convergence computed at step k:0
   Computed root: 1.25000000  

   ans =

        0 
```

在我的 PATH 之外：

```
>> bisez(a,b,nmax,toll,fun)
   Undefined function 'bisez' for input arguments of type 'function_handle'. 
```

# groovy - 在grails中对每个求和

> ID：12071079
> 
> 赞同：0
> 
> 时间：2012-08-22T10:23:44.087
> 
> 标签：groovy, aggregate-functions

我用于获取特定作业类中每个进程所用时间的伪代码如下所示。

```
 psteps.each {ProcessingStep pstep ->
    List<ExecutionState> states = ProcessingStepUpdate.findAllByProcessingStepAndState(pstep,ExecutionState.blah)
    states.each{ProcessingStepUpdate psu ->
        use(groovy.time.TimeCategory) {
            startTime=pc.started
            endTime=psu.date
            timeTaken = endTime-startTime
            println "Time Taken for ${pc.startJobClass} is ${timeTaken} in ${JCType}"                    
        }
    }
} 
```

该代码现在不是数组/列表的形式，因此我无法计算每个作业类所花费的总时间。

这是我尝试过的

```
use(groovy.time.TimeDuration){
        duration=timeTaken.toArray().sum()
        println "Time taken for ${JCType} is ${duration}"
        println "***********************************************************"
    } 
```

知道错误是什么吗？我是 OOPS 世界的新手，并且在过去 2 天里一直坚持下去。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:34:25.557

timeTaken 不是一个列表，它是一个 groovy.time.TimeDuration 对象。试试这个：

```
def states = ProcessingStepUpdate.findAllByProcessingStepAndState(pstep,ExecutionState.blah)
def times = []
states.each{psu ->
    use(groovy.time.TimeCategory) {
        startTime=pc.started
        endTime=psu.date
        timeTaken = endTime-startTime
        times << timeTaken // You add timeTaken to arrayList
        println "Time Taken for ${pc.startJobClass} is ${timeTaken} in ${JCType}"
        println "Total time ${times.sum()}"     
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:10:33.760

在你`states.each{`声明一个将 现在在闭包内`totalTime`保存总时间的变量之前，只需继续添加到 totalTime 尝试阅读一些 groovy，你可以跳过很多代码，就像使用
`def totalTime = 0`
`each``timeTaken`
`totalTime += Integer.parseInt(timeTaken)`
`List<ExecutionState> states``def states`

也你做了之后`states.each{`就不需要写了`ProcessingStepUpdate psu ->`！你可以做也可以不做`psu ->`。用于引用列表`it`中的当前对象`states`

# web-services - 如何将拦截器添加到 wsdl2java (CXF) 生成的客户端？

> ID：12071082
> 
> 赞同：4
> 
> 时间：2012-08-22T10:23:52.733
> 
> 标签：web-services, soap, cxf

我正在尝试向`wsdl2java`生成的客户端的入站/出站流量添加一些日志记录。我有客户端生成并使用它如下：

伪代码：

```
MyService ws = new MyService().getMyServiceSoap12();
((BindingProvider)ws).getRequestContext().put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, webServiceAddress); // for dynamic endpoints... 
```

**有什么办法可以添加一些拦截器吗？**顺便说一句，我在**Spring**应用程序中使用它！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-05-03T12:17:37.253

`javax.xml.ws.handler.soap.SOAPHandler`如果您需要自定义日志记录或以不同方式处理 SOAP 消息，您可以实现自己的，方法如下：

```
MyService ws = new MyService().getMyServiceSoap12();

BindingProvider wsBindingProvider = (BindingProvider) ws;

// Get a copy of the handler chain for a protocol binding instance
List<Handler> handlers =
    wsBindingProvider.getBinding().getHandlerChain();

// Add your handler(s)
handlers.add(new MySoapMessageLogger());

// We need to setHandlerChain because setHandlerChain
// returns a copy of List<Handler>
wsBindingProvider.getBinding().setHandlerChain(handlers); 
```

MySoapMessageLogger 可能如下所示：

```
public class MySoapMessageLogger implements SOAPHandler<SOAPMessageContext> {

    private static final Logger logger = 
        LoggerFactory.getLogger(MySoapMessageLogger.class);

    @Override
    public boolean handleMessage(SOAPMessageContext context) {
        Boolean isRequest = (Boolean) context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);
        // Retrieve the message contents
        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        context.getMessage().writeTo(stream);

        // You've got your XML message and can log it right away or
        // beautify it with some library before sending to log
        logger.trace((isRequest ? "Request:" : "Response:") + stream.toString());

        return true;
    }

    /* For the logging purposes the following methods can be leaved as stubs */

    @Override
    public Set<QName> getHeaders() {
        return null;
    }

    @Override
    public boolean handleFault(SOAPMessageContext context) {
        return false;
    }

    @Override
    public void close(MessageContext context) {
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T22:52:05.863

我不确定您的问题是询问如何启用内置的请求/响应日志记录，还是替换和/或增强现有的日志记录工具。

假设是[前者](http://cxf.apache.org/docs/debugging-and-logging.html)，我[建议](http://cxf.apache.org/docs/configuration.html)查看`CXF User Guide`. 最重要的一点是 CXF 默认使用*Java SE 日志*，这意味着如果你想使用其他东西，你需要在项目中折腾一个 SLF4J 桥。

`cxf`要在 Spring 配置中启用日志记录合并这些位（注意命名空间）：

```
<beans xmlns="http://www.springframework.org/schema/beans"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:cxf="http://cxf.apache.org/core"
      xsi:schemaLocation="
http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

    <cxf:bus>
        <cxf:features>
            <cxf:logging/>
        </cxf:features>
    </cxf:bus> 
</beans> 
```

# javascript - 函数在 JavaScript 中不断调用

> ID：12071089
> 
> 赞同：0
> 
> 时间：2012-08-22T10:24:08.817
> 
> 标签：javascript

这是我的功能，我正在获取一些信息`console`。但是这个函数一直在调用，我`console`也在不断地做。我的代码有什么问题？

**代码**

```
window.onload = function () {
        var x = 0;
            var location = window.location;
            var path = window.location.pathname;

            var showIt = function () {
                if(x !=1){
                    x=1;
                    console.log(path,x);
                    window.location = path;
                }
            }
            showIt();
       } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:26:28.663

您正在重新加载页面。这会导致脚本从头开始运行（并设置`x`回`0`）。变量的值不会在页面加载之间保持不变。

您需要将数据存储在某处（例如，在 URI 的[查询字符串](http://en.wikipedia.org/wiki/Query_string)、[本地存储](http://caniuse.com/#search=localstorage)或[cookie](http://www.quirksmode.org/js/cookies.html)中），然后在加载页面（或不重新加载页面）时检索它。

# android - 在Android中按下按钮时连续触发事件

> ID：12071090
> 
> 赞同：7
> 
> 时间：2012-08-22T10:24:16.483
> 
> 标签：android

我有`Button`一个`TextView`. 最初单击按钮 i 增加计数值并显示在 TextView 中。我曾经这样做的代码是。

```
buttonDayPlus.setOnClickListener(new OnClickListener() 
{               
     @Override
     public void onClick(View v) 
     {
     count = count + 1;
         textView.setText(Integer.toString(count));
     }
} 
```

但是现在我想要的是如果用户按下按钮，那么我想一个接一个地增加值`textView`并在用户移动他的手时显示增量值......最终的增量值显示在`textView`. 所以如果有人知道帮我解决这个问题

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-22T19:10:46.367

您将需要使用 Handler 对象，因为您必须实现一个单独的线程来增加/减少

```
public class MainActivity extends Activity {

    private boolean autoIncrement = false;
    private boolean autoDecrement = false;
    private final long REPEAT_DELAY = 50;
    private Handler repeatUpdateHandler = new Handler();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.input);

        class RepetitiveUpdater implements Runnable {

            @Override
            public void run() {
                if (autoIncrement) {
                    increment();
                    repeatUpdateHandler.postDelayed(new RepetitiveUpdater(), REPEAT_DELAY);
                } else if (autoDecrement) {
                    decrement();
                    repeatUpdateHandler.postDelayed(new RepetitiveUpdater(), REPEAT_DELAY);
                }
            }

        }

        up.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                increment();
            }
        });

        up.setOnLongClickListener(new OnLongClickListener() {

            @Override
            public boolean onLongClick(View v) {
                autoIncrement = true;
                repeatUpdateHandler.post(new RepetitiveUpdater());
                return false;
            }
        });

        up.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                if (event.getAction() == MotionEvent.ACTION_UP && autoIncrement) {
                    autoIncrement = false;
                }
                return false;
            }
        });

    }

    public void increment() {
        if (i < 100) {
            i++;
            TextView no = (TextView) findViewById(R.id.no);
            no.setText(String.valueOf(i));
        }

    }

} 
```

对减量做同样的事情。

礼貌：Github，作者：Jeffrey F. Cole

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-01-04T14:38:39.900

我刚刚在这里回答了这个问题 [https://stackoverflow.com/a/41466381/2991628](https://stackoverflow.com/a/41466381/2991628)

我创建了一个`CounterHandler`类来完成所有计数和事件处理。这就是它的工作原理。

```
 new CounterHandler.Builder()
            .incrementalView(buttonPlus)
            .decrementalView(buttonMinus)
            .minRange(-50) // cant go any less than -50
            .maxRange(50) // cant go any further than 50
            .isCycle(true) // 49,50,-50,-49 and so on
            .counterDelay(200) // speed of counter
            .counterStep(2)  // steps e.g. 0,2,4,6...
            .listener(this) // to listen counter results and show them in app
            .build(); 
```

你可以从我的要点 [https://gist.github.com/nomanr/d142f4ccaf55ceba22e7f7122b55b9b6中找到这个类](https://gist.github.com/nomanr/d142f4ccaf55ceba22e7f7122b55b9b6)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T10:32:06.603

您应该使用[OnTouchListener](http://developer.android.com/reference/android/view/View.OnTouchListener.html)而不是 OnClickListener。

但是，您的问题是模棱两可的。如果您只想在释放按钮时增加一次值，您可以执行以下操作：

```
button.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_UP) {
            count++;
        }
    }
}; 
```

如果您想在用户按住按钮时增加计数，您可以这样做：

```
button.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        count++;
        myTextView.setText("Click count: "+count);
    }
}; 
```

myTextView 当然是你想要显示点击的文本视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T10:32:26.447

像这样使用自定义触摸监听器，

```
public class CustomTouchListener implements View.OnTouchListener {     
    public boolean onTouch(View view, MotionEvent motionEvent) {
    switch(motionEvent.getAction()){            
            case MotionEvent.ACTION_DOWN:
           count = count + 1;
                break;          
            case MotionEvent.ACTION_CANCEL:             
            case MotionEvent.ACTION_UP:
          textView.setText(Integer.toString(count));
                break;
    } 
        return false;   
    } 
} 
```

并将这些侦听器设置为您的按钮。愿它对你有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T11:01:00.567

正如@shalini 给出的答案是正确的，但根据您的要求几乎没有变化

```
public class CustomTouchListener implements View.OnTouchListener {     
    public boolean onTouch(View view, MotionEvent motionEvent) {
    switch(motionEvent.getAction()){            
            case MotionEvent.ACTION_DOWN:
               count = count + 1;
               textView.setText(Integer.toString(count));
            break;          

           case MotionEvent.ACTION_CANCEL:             

           case MotionEvent.ACTION_UP:

                break;
    } 
        return false;   
    } 
} 
```

# mysql - 获取表格中间的一行

> ID：12071094
> 
> 赞同：0
> 
> 时间：2012-08-22T10:24:24.190
> 
> 标签：mysql, sql, phpmyadmin, mysqli

```
`SELECT r.*, u.username 
FROM `reservation` AS r JOIN 
     `users` AS u 
WHERE u.id = r.user_id 
AND   DATE(r.bx_date) >= DATE('2012-08-22') 
AND   DATE(r.bx_date) <= DATE('2012-08-22') 
AND   r.status='1' 
ORDER BY r.id desc` 
```

表预留包含 500,000 条记录，bx_date 从 2012-01-01 到 2013-01-01 变化。users 表中有 40,000 条记录。bx_date 是“日期”类型。

使用上面的查询，如果我尝试像 2012-08-22 这样的日期，则需要 8 秒。但是，如果我尝试 2013-01-01 大约需要 1 秒。

是什么原因 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:03:05.617

最可能的原因是不正确的索引或索引维护。

您应该有一个索引，例如：

```
CREATE INDEX reservation_ndx ON reservation
    (status, bx_date, user_id) 
```

另外，如果使用 InnoDB，请尝试运行

```
ANALYZE TABLE reservation; 
```

为了让系统更新表格人口统计。

另一个可能（但恕我直言不太可能）的原因可能是表分区：

```
 http://dev.mysql.com/doc/refman/5.1/en/partitioning-types.html 
```

眼见为实`reservation`可能会随着时间的推移而逐渐填满。

**更新**：我没有提到明显的原因，一个查询可能会返回一百万条记录，而另一个查询会立即失败，但是如果您不知道 SQL 结果是什么（也许您只是在运行“盲目”基准测试和只检查执行时间），这也可能是一种可能性。（*更新更新：我刚刚读到两个查询都返回相同的行数。然后排除了这个原因*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:57:27.903

截至今天（'2012-08-22'）的数据在您的餐桌预订中可用。但是，找不到 2013 年的数据。数据可用性导致了这种变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:09:37.350

```
<table id="table_results" class="data ajax">
<thead><tr>
<th class="draggable">id
</th><th class="draggable">select_type
</th><th class="draggable">table
</th><th class="draggable">type
</th><th class="draggable">possible_keys
</th><th class="draggable">key
</th><th class="draggable">key_len
</th><th class="draggable">ref
</th><th class="draggable">rows
</th><th class="draggable">Extra
</th></tr>
</thead>
        <tbody>
<tr class="odd"><td align="right" class="data grid_edit not_null    nowrap ">1</td>
<td  class="data grid_edit not_null    ">SIMPLE</td>
<td  class="data grid_edit     ">r</td>
<td  class="data grid_edit     ">range</td>
<td  class="data grid_edit     ">bx_date_index</td>
<td  class="data grid_edit     ">bx_date_index</td>
<td  class="data grid_edit     ">3</td>
<td  class="data grid_edit      null"><i>NULL</i></td><td align="right" class="data grid_edit     nowrap ">3725</td>
<td  class="data grid_edit not_null    ">Using where; Using filesort</td>
</tr>

<tr class="even"><td align="right" class="data grid_edit not_null    nowrap ">1</td>
<td  class="data grid_edit not_null    ">SIMPLE</td>
<td  class="data grid_edit     ">u</td>
<td  class="data grid_edit     ">eq_ref</td>
<td  class="data grid_edit     ">PRIMARY</td>
<td  class="data grid_edit     ">PRIMARY</td>
<td  class="data grid_edit     ">4</td>
<td  class="data grid_edit     ">db.r.user_id</td>
<td align="right" class="data grid_edit     nowrap ">1</td>
<td  class="data grid_edit not_null    ">Using where</td>
</tr>

</tbody>
</table> 
```

# javascript - 使用 Javascript 从 Strobe Media Playback 获取统计信息

> ID：12071106
> 
> 赞同：1
> 
> 时间：2012-08-22T10:25:38.507
> 
> 标签：javascript, debugging, osmf, smp

我正在尝试从 Strobe Media Playback flash 播放器获取统计数据。

我看过[这个](http://osmf.org/dev/1.5gm/lib/debug.js) [例子](http://osmf.org/dev/1.5gm/debug.html)，但是它使用 swfobject.js 和 .embedSWF() 来创建播放器。我用 HTML 创建播放器并附加一个 Javascript 桥。

据我所知，该示例使用 org.osmf.player.debug.track 来获取统计信息。尝试在我的代码中使用它不会带来任何结果。大概是因为我没有使用 swfobject.js 来创建视频。我也尝试过类似的东西（为了清楚起见，截断了）：

```
// Create player in HTML
<object id='player' data='strobe-1.6.swf'></object>

// Javascript links  to player
var player = document.getElementById('player');

// Attempt to access debug data (JS does not continue beyond this point)
player.debug.track = function(jss) {
  alert(jss);
} 
```

问题是，我能得到这些统计数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:26:48.867

解决了。我将 org.osmf.player.debug.track 代码放在了 onLoad 中。它需要在 onLoad 之前设置。

# c# - 如何覆盖 ServiceStack 中的默认 404 页面？

> ID：12071110
> 
> 赞同：3
> 
> 时间：2012-08-22T10:25:45.633
> 
> 标签：c#, http-status-code-404, servicestack

我正在使用 ServiceStack 并且有我自己的处理程序来处理任何抛出的异常，这些异常工作得很好。但是，我似乎无法找到如何覆盖从 ServiceStack 返回的默认 404 错误页面。目前Body看起来是这样的：

```
Handler for Request not found: 

Request.ApplicationPath: /
Request.CurrentExecutionFilePath: /Test/123
Request.FilePath: /Test/123
Request.HttpMethod: GET
Request.MapPath('~'): C:\Test-Web\src\Web.Service\
Request.Path: /Test/123
Request.PathInfo: 
Request.ResolvedPathInfo: /Test/123
Request.PhysicalPath: C:\Test-Web\src\Web.Service\Test\123
Request.PhysicalApplicationPath: C:\Test-Web\src\Web.Service\
Request.QueryString: 
Request.RawUrl: /Test/123
Request.Url.AbsoluteUri: http://localhost:65079/Test/123
Request.Url.AbsolutePath: /Test/123
Request.Url.Fragment: 
Request.Url.Host: localhost
Request.Url.LocalPath: /Test/123
Request.Url.Port: 65079
Request.Url.Query: 
Request.Url.Scheme: http
Request.Url.Segments: System.String[]
App.IsIntegratedPipeline: False
App.WebHostPhysicalPath: C:\Test-Web\src\Web.Service
App.WebHostRootFileNames: [extensions.cs,global.asax,global.asax.cs,Web.Service.csproj,Web.Service.csproj.user,Web.Service.ncrunchproject,packages.config,servicestack.common.dll,servicestack.common.pdb,servicestack.common.xml,servicestack.interfaces.dll,servicestack.interfaces.pdb,servicestack.interfaces.xml,servicestack.redis.dll,web.config,web.debug.config,web.release.config,bin,dto,exceptions,interfaces,mongo,obj,pipeline,properties,resources,serialization,servicestack,supporting,validators,windsor]
App.DefaultHandler: metadata
App.DebugLastHandlerArgs: GET|/Test/123|C:\Test-Web\src\Web.Service\Test\123 
```

显然是 404 StatusCode。

任何关于我需要覆盖或更改的帮助或指导将不胜感激。如果您需要我提供更多详细信息，请随时询问，我会尽快回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T10:49:11.897

默认 404 处理程序的源代码可以在这里找到： [https](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/WebHost.Endpoints/Support/NotFoundHttpHandler.cs) ://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/WebHost.Endpoints/Support/NotFoundHttpHandler.cs 。

您的自定义 404 处理程序需要实现`IServiceStackHttpHandler`和`IHttpHandler`：

```
public class YourNotFoundHandler : IServiceStackHttpHandler, IHttpHandler
{
    public void ProcessRequest(IHttpRequest request, IHttpResponse response, string operationName)
    { ... }

    public void ProcessRequest(HttpContext context)
    { ... }
} 
```

要覆盖`AppHost.Configure()`方法中的默认 404 处理程序：

```
SetConfig(new EndpointHostConfig {
    CustomHttpHandlers = { { HttpStatusCode.NotFound, new YourNotFoundHandler() } }
}); 
```

# sublimetext2 - 为其他编辑器修复 Komodo Edit 自动缩进

> ID：12071112
> 
> 赞同：0
> 
> 时间：2012-08-22T10:25:58.927
> 
> 标签：sublimetext2, coda, auto-indent, komodoedit

我已经使用 Komodo Edit 创建了一个 PHP 项目，现在我应该迁移到另一个编辑器（Coda），但 Komodo 自动缩进仅在 Komodo 中有效且正常！Coda 和 Sublime Text 无法识别缩进...

有什么解决方案可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:43:13.207

为了让文本编辑器识别缩进级别，需要进行一些配置。所有编辑器都允许在制表符和空格之间选择缩进。如果选择空格，则还要选择空格的数量（通常为 4 或 8）。尝试找出这些东西在您的新编辑器中是如何设置的，并确保您在所有编辑器中使用相同的设置。

# ant - 无法安装 Apache Ant

> ID：12071115
> 
> 赞同：1
> 
> 时间：2012-08-22T10:26:09.147
> 
> 标签：ant

我已经从以下链接下载了 Apache Ant 文件“apache-ant-1.8.4-bin.zip”：- [http://ant.apache.org/bindownload.cgi](http://ant.apache.org/bindownload.cgi)。然后我在我的 Windows 7 操作系统中添加了一个环境变量：-

```
Name = ANT_HOME Value = C:\ 
```

但是当我使用 CMD 命令行键入以下内容时：-

```
C:\apache-ant-1.8.4-bin\apache-ant-1.8.4\bin>ant.bat 
```

我收到以下错误：-

```
ANT_HOME is set incorrectly or ant could not be located. Please set ANT_HOME. 
```

那么可能出了什么问题？BR

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T10:29:59.737

你的蚂蚁之家是：

```
C:\apache-ant-1.8.4-bin\apache-ant-1.8.4\ 
```

使用此值创建环境变量 ANT_HOME。之后不要忘记重新打开 cmd 窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-14T18:47:31.233

根据 Krestens 的回答，您的 ANT_HOME 变量必须是解压缩 ant 的基本目录。然后您的 PATH（用户或系统）需要添加

%ANT_HOME%\bin;

这将允许您调用 ant.bat（ant 如何在 Windows 系统上启动）。

# ruby-on-rails - Rails - 在表单视图中指定属性/动态构建嵌套属性

> ID：12071116
> 
> 赞同：0
> 
> 时间：2012-08-22T10:26:10.863
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我目前有一个接受_nested_attributes_for Features 的客户表单。这些功能可以是任意数量的东西，但为了简单起见，我们假设它们是名字、姓氏和出生日期（我知道这是 EAV 的问题 - 如果您对此有意见，请请参阅我关于该主题的其他问题）。

在我的控制器中，我有：

```
3.times {@customer.features.build} 
```

这工作正常，并构建了 3 个功能，按预期保存。但是，我想要的是为视图中的每个构建功能指定功能类型。我的观点目前看起来像：

```
<%= customer.fields_for :features do |features_builder| %>
  <%= render :partial => "features/fixed_feature", :locals => {:feature => features_builder, :fixed_feature_type => "First Name", :form_actions_visible => false} %>
<% end -%> 
```

正如人们所期望的那样，这会创建 3 个 First Name 字段。我想要的是能够指定 3 种不同类型的功能，如下所示：

```
<%= customer.fields_for :features do |features_builder| %>
  <%= render :partial => "features/fixed_feature", :locals => {:feature => features_builder, :fixed_feature_type => "First Name", :form_actions_visible => false} %>
  <%= render :partial => "features/fixed_feature", :locals => {:feature => features_builder, :fixed_feature_type => "Last Name", :form_actions_visible => false} %>
  <%= render :partial => "features/fixed_feature", :locals => {:feature => features_builder, :fixed_feature_type => "Date of Birth", :form_actions_visible => false} %>
<% end -%> 
```

显然，上面编写的代码不起作用，因为它试图为每个实例创建 3 个字段。我似乎需要的是 fields_for 循环上的索引，它允许我遍历并向每个部分添加一个 if 子句，以便它只触发一次，并且每个都在不同的功能实例上触发。

谁能指出我能做到最好吗？搜索后，我似乎找不到获取 fields_for 循环索引的方法。

编辑：根据第一条评论，为清楚起见：我希望在页面上呈现三个功能，一个用于控制器构建的每个功能。我希望每个功能都以不同的方式呈现（在上面的代码中为 :fixed_feature_type 传递了不同的局部变量）。我正在寻找最好的方法来做到这一点。

编辑2：我知道另一种方法是在控制器中动态构建嵌套属性（而不是最初一次构建3个）-有没有办法做到这一点？

编辑 3：花了一些时间寻找一种动态执行此操作的方法后，我从 Railscast 中找到了一个辅助方法，如下所示：

```
def link_to_add_fields(name, f, association)
  new_object = f.object.class.reflect_on_association(association).klass.new
  fields = f.fields_for(association, new_object, :child_index => "new_#{association}") do |builder|
    render(association.to_s.singularize + "_fields", :f => builder)
  end
  link_to_function(name, h("add_fields(this, \"#{association}\", \"#{escape_javascript(fields)}\")"))
end 
```

看来我可以定义一个这样的辅助方法，允许我添加各种功能字段 - 我很乐意将有关如何修改它以适应我当前情况的任何建议标记为答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T21:22:49.260

我能够通过将我的局部渲染移动到自定义助手来克服这个问题，这允许我根据需要动态构建对象。

编辑：根据要求，我的代码如下：

我已将以下代码添加到我的 application_helper.rb 文件中：

```
module ApplicationHelper

  def add_feature_fields(feature_types, object_form_builder, actions_visible)
    feature_types.length.times {object_form_builder.object.features.build}
    i = -1
    object_form_builder.fields_for :features do |features_builder|
      i = i + 1
      render :partial => "features/fixed_feature", :locals => {:feature => features_builder, :fixed_feature_type => feature_types[i], :form_actions_visible => actions_visible}
    end
  end
end 
```

在我看来，我这样称呼这个助手：

```
<%= add_feature_fields(["First Name", "Last Name", "Date of Birth"], customer, false) %> 
```

这允许我通过简单地向数组添加额外的项目来添加模型（在本例中为人）所需的任意数量的特征。

希望这可以帮助！

编辑：'features/_fixed_feature.html.erb'

```
<%= feature.hidden_field :feature_type_id, :value => FeatureType.where(:value => fixed_feature_type).first.id %>
<fieldset>
        <div class="control-group">
        <label class="control-label"><Value><%= fixed_feature_type %></label>
        <div class="controls">
            <%= feature.text_field :value, :class => 'input-large' %>
        </div>
    </div>
    <% if form_actions_visible == true %>
        <div class="form-actions">
            <%= content_tag :button, :type => :submit, :class => "btn btn-info" do -%>
                Save Changes
            <% end -%>
            <%= content_tag :button, :type => :cancel, :class => "btn btn-warning" do -%>
                Cancel
            <% end -%>
        </div>
    <% end %>
</fieldset> 
```

没有什么特别的，只是使用助手传入的局部变量来渲染标签等，而不需要“特征类型”框和值框（它只渲染一个值框，因此类型是固定的）。

根据您的评论，如果您想为不同的模型添加功能，您只需再次调用帮助程序并更改“客户”部分（这是表单构建器 - 更常见的是“f”，但我更喜欢语义命名）。

# .htaccess - htaccess - 如何重写它

> ID：12071123
> 
> 赞同：1
> 
> 时间：2012-08-22T10:26:34.757
> 
> 标签：.htaccess, redirect

我想将所有请求重定向到：**domain.com**到子文件夹**/sub**，但我不希望该子文件夹显示在 url 中，以便我的 url 保持**domain.com**。

这可能吗？

**编辑：**在尝试了所有建议之后，我仍然会得到 URL，就像`domain.com/sub`我去的时候一样`domain.com`

这是我当前的代码

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www.)?sub.domain.com$
RewriteRule ^(/)?$ en [L]

RewriteCond %{HTTP_HOST} ^(www.)?sub.domain.fr$
RewriteRule ^(/)?$ fr [L] 
```

我的文件夹结构是：

/ ->en ->fr

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:33:33.517

尝试将其放入文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{DOCUMENT_ROOT}/sub%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/sub%{REQUEST_URI} -d
RewriteRule ^(.*)$ /sub/$1 [L] 
```

这将确保如果您请求`/sub/`404 响应中不存在的内容，则不会暴露您正在将所有内容路由到`/sub/`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:42:34.663

在你的 htaccess 文件中试试这个：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^domain.com$ [NC]
RewriteCond %{REQUEST_URI} !^/?sub/
RewriteRule ^(.*)$ /sub/$1 [L,QSA] 
```

**编辑 ：**

只是对您发布的代码进行一些清理，它应该是：

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^(www\.)?sub\.domain\.com$
RewriteRule ^$ /en/ [L]

RewriteCond %{HTTP_HOST} ^(www\.)?sub\.domain\.fr$
RewriteRule ^$ /fr/ [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:32:39.507

重写规则在服务器端起作用（因此它们不会影响 URL）。
您真的应该阅读有关 mod_rewrite 的内容并亲自尝试一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T10:32:41.127

使用模式重写，您可以按照以下方式做一些事情

```
RewriteEngine on
RewriteRule ^$ sub [L] 
```

你可以在这里阅读更多：http: [//www.blogstorm.co.uk/htaccess-mod_rewrite-ultimate-guide/](http://www.blogstorm.co.uk/htaccess-mod_rewrite-ultimate-guide/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T10:34:17.650

```
RewriteCond %{REQUEST_URI}  !^/sub/.*$   [NC]
RewriteRule  ^(?<!sub/)(.*)$   /sub/$2   [L,NC] 
```

# jquery - jquery resizable在FF中工作不正确

> ID：12071124
> 
> 赞同：1
> 
> 时间：2012-08-22T10:26:41.967
> 
> 标签：jquery, resizable

如果你在 Opera 中打开[http://jsfiddle.net/UVsKp/413/](http://jsfiddle.net/UVsKp/413/)它就可以了。但是如果你在 Firefox 中打开它，你会在显示屏底部看到调整大小的图标。我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:47:34.013

将单元格内容包装在 div 中

```
<td><div class="wrap">1</div></td> 
```

并将 resizeble() 应用于此 div

[http://jsfiddle.net/UVsKp/414/](http://jsfiddle.net/UVsKp/414/)

适用于 FF、Chrome、IE7、8

# c# - 如何制作使用来自同一程序集的静态变量的动态方法？

> ID：12071126
> 
> 赞同：4
> 
> 时间：2012-08-22T10:26:46.197
> 
> 标签：c#, .net, reflection, cil, mono.cecil

我创建了一个动态方法，但是当我尝试访问外部资源时，它给了我一个异常

> TargetInvocationException：调用的目标已引发异常。

基本上我想写一个字节数组的方法，然后将它作为动态方法加载。我知道一个简单的字节数组不足以重建元数据链接，但是如何制作一个使用来自同一程序集的变量的动态方法？

我试图转换该代码：

```
public static int z = 10;
public static int sum(int x, int y) {
    return x + y + z;
} 
```

这给了我IL：

```
0        L_0000:      ldarg.0      
1        L_0001:      ldarg.1      
2        L_0002:      add          
3        L_0003:      ldsfld       System.Int32 CodeGen.Program::z
4        L_0008:      add          
5        L_0009:      ret 
```

这是字节：

```
02 03 58 7E 06 00 00 04 58 2A 
```

我是这样测试的：

```
public static int z = 10;

static void Main(string[] args) {

    DynamicMethod sum = new DynamicMethod("sum", typeof(int), new Type[] { typeof(int), typeof(int) });
    var info = sum.GetDynamicILInfo();
    var bytes = new byte[] { 0x02, 0x03, 0x58, 0x7E, 0x06, 0x00, 0x00, 0x04, 0x58, 0x2A }; // { 0x02, 0x17, 0x58, 0x2A }; // this is a code for int sum(int x, int y) { return x + y; }

    info.SetCode(bytes, 8);

    var sig = SignatureHelper.GetMethodSigHelper(CallingConventions.Standard, typeof(int));
    byte[] bsig = sig.GetSignature();
    bsig[0] = 0x7;

    info.SetLocalSignature(bsig);

    int x = (int) sum.Invoke(null, new object[] { 10, 20 });
    Console.WriteLine(x.ToString());
    Console.ReadLine();
} 
```

TL;DR 我想修复代表动态方法 IL 的字节数组的引用。怎么做？另外，我不想使用 ILGenerator()，我想要一个字节数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T16:47:44.253

元数据令牌不能按原样重复使用；相反，您需要使用[`DynamicILInfo.GetTokenFor`](http://msdn.microsoft.com/en-us/library/hxaeeczw.aspx)来获取与您可以使用的字段相对应的新令牌。在您的情况下，这看起来像这样：

```
var tok = info.GetTokenFor(typeof(...).GetField("z").FieldHandle);
bytes[4] = tok;    
bytes[5] = tok >> 8;
bytes[6] = tok >> 16;
bytes[7] = tok >> 24; 
```

但是，您可能还需要创建您的`DynamicMethod`，以便禁用 JIT 可见性检查，否则您的方法将无法访问私有字段。

在一个不相关的说明中，我不清楚你在用签名信息做什么 - 看起来你出于某种原因将局部变量签名设置为修改后的方法签名......我认为你应该做更多的事情像这样：

```
info.SetLocalSignature(SignatureHelper.GetLocalVarSigHelper().GetSignature()) 
```

当然，您需要根据您的方法实际使用的本地人来改变这一点。

# apache - 通过 putty 重启 apache 服务器

> ID：12071127
> 
> 赞同：-1
> 
> 时间：2012-08-22T10:26:48.360
> 
> 标签：apache

我是linux新手。我有服务器详细信息。我正在通过腻子访问此服务器。我想重新启动服务器。登录服务器后，我输入“sudo apachectl restart”，然后它询问密码，然后给出“apache2：无法可靠地确定服务器的完全限定域名，使用 202.136.40.61 作为 ServerName”。友情提示，我没有超级用户的密码。那我要不要重启服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:28:58.507

这只是一个警告，告诉您系统配置不正确。尽管如此，apache应该已经重新启动。

请参阅[此问题](https://stackoverflow.com/questions/9541460/httpd-could-not-reliably-determine-the-servers-fully-qualified-domain-name-us)以获取警告的解决方案，但如果没有超级用户权限，您可能无论如何都无法修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-18T10:11:41.060

```
sudo /opt/lampp/lampp stop
sudo /opt/lampp/lampp start
sudo /opt/lampp/lampp restart 
```

# actionscript-3 - FLASH AS3 SOUND_COMPLETE 在声音开始时触发

> ID：12071131
> 
> 赞同：1
> 
> 时间：2012-08-22T10:27:11.863
> 
> 标签：actionscript-3, flash

gotoAndStop() 方法在正在加载的声音上调用，当声音完成时触发跟踪。任何帮助将不胜感激！

这是我的代码：

```
 import flash.events.Event;
import flash.media.Sound;
import flash.net.URLRequest;
var sound:Sound = new Sound();
var soundReq:URLRequest = new 
URLRequest("testmp3.mp3");
sound.load(soundReq);
sound.addEventListener(Event.COMPLETE, soundPlay);
function soundPlay(event:Event):void
{   
    var soundChannel:SoundChannel;
    soundChannel = sound.play();
    soundChannel.addEventListener(Event.SOUND_COMPLETE, soundComplete);
}
function soundComplete(event:Event):void
{
    trace("The sound has finished playing.");

    gotoAndStop(3);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T10:52:53.347

认为你错了。

`Event.COMPLETE`声音文件加载完成时调用。

```
sound.addEventListener(Event.COMPLETE, soundPlay); 
```

`Event.SOUND_COMPLETE`声音播放结束时调用。

```
soundChannel.addEventListener(Event.SOUND_COMPLETE, soundComplete); 
```

参考以下代码。

* * *

```
import flash.events.Event;
import flash.media.Sound;
import flash.net.URLRequest;
var sound:Sound = new Sound();
var soundReq:URLRequest = new URLRequest("testmp3.mp3");
sound.load(soundReq);
sound.addEventListener(Event.COMPLETE, soundFileLoaded);
function soundFileLoaded(event:Event):void
{   
    trace("sound file loaded!");

    gotoAndStop(3);
    var soundChannel:SoundChannel;
    soundChannel = sound.play();
    soundChannel.addEventListener(Event.SOUND_COMPLETE, soundPlaybackEnded);
}
function soundPlaybackEnded(event:Event):void
{
    trace("sound playback ended");
} 
```

# c# - sgen.exe 和 Oracle.DataAccess.dll 的问题 (Visual Studio 2012)

> ID：12071132
> 
> 赞同：1
> 
> 时间：2012-08-22T10:27:12.753
> 
> 标签：c#, oracle, visual-studio-2012, sgen, sgen.exe

我们尝试将我们的 Web 服务项目从 Visual Studio 2010 迁移到 Visual Studio 2012。该项目使用 Oracle.DataAccess.dll（v 11.2.0.3 32 和 64 位），我们使用 sgen.exe 创建 *.XmlSerializers.dll。

sgen.exe 始终无法为包含 Oracle.DataAccess.dll 的项目创建 XmlSerailizer.dll。我们需要将解决方案构建为 AnyCPU。

我们收到的错误消息如下： SGEN : error : 尝试加载格式不正确的程序集：c:\oracle\x64\product\11.2.0\client_1\ODP.NET\bin\4\Oracle .DataAccess.dll。

即使仅并行安装 Visual Studio 2010 和 2012，也无法在任一工作室中构建 Webservice 项目。

到目前为止，我们所有试图找到解决问题的方法都失败了。有没有人有类似的星座并找到了解决问题的方法？

# c# - 在 CustomValidation 中返回一个复杂对象而不是 ValidationResult

> ID：12071135
> 
> 赞同：2
> 
> 时间：2012-08-22T10:27:18.080
> 
> 标签：c#, asp.net-mvc, validation, c#-4.0, data-annotations

我有这样的课：

```
[CustomValidation(typeof(Validate_Class_MetaData), "Validate")]
public class tbl_MetaData
{
     [Required(ErrorMessage = "-...")]
    [Range(1, Int64.MaxValue, ErrorMessage = "-...")]
    public global::System.Int64 Id { set; get; }

    ...
} 
```

我想使用另一个类来验证我的类：

```
public class Validate_Class_MetaData
{
    public static ValidationResult Validate (tblData tbl, ValidationContext vc)
    { 
```

问题是我有一些带有错误的警告。我的意思是一些业务规则不是错误，我想使用对话框向用户显示警告，如果用户想要保存带有该警告的记录。现在我不能使用`ValidationResult`.

我怎样才能返回`ValidationResult.Success`和一些警告一起？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T13:52:42.627

不幸的是，[ValidationResult](http://msdn.microsoft.com/en-us/library/dd411789%28v=vs.95%29)类只支持成功或失败。从链接（重点是我的）：

> **如果成员的值成功 validates**，则返回的 ValidationResult 对象等于 Success 字段的值。要确定验证是否成功，您应该检查返回的对象是否等于 Success。**如果成员的值不 validate**，则返回的 ValidationResult 对象包含错误消息和验证错误的成员名称集合（如果可以检索它们）。

例如，您可以通过使用专用警告元素并向其添加文本来实现自己的警告，但 ValidationResult 不支持消息或警告。

# iphone - nsinvalidargumentexception' 原因'一个 avplayeritem 不能与多个 avplayer 实例相关联'

> ID：12071138
> 
> 赞同：2
> 
> 时间：2012-08-22T10:27:32.150
> 
> 标签：iphone, ios, mpmovieplayercontroller, avplayer

我在用

> MPMoviePlayer控制器

播放视频，在此我使用自定义搜索栏来跳转视频。但是当我不断地向前搜索和后退时，应用程序崩溃并抛出以下错误：

> nsinvalidargumentexception' 原因'一个 avplayeritem 不能与多个 avplayer 实例相关联'

所以请建议。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-12T16:13:43.520

有同样的问题，在设置 SourceType 后尝试设置 ContentURL，如下所示，

```
moviePlayerController_ = [[MPMoviePlayerViewController alloc] init];
moviePlayerController_.movieSourceType = MPMovieSourceTypeStreaming;
[moviePlayerController_.moviePlayer setContentURL:url]; 
```

资料来源：[devforums.apple.com/message/467199](http://devforums.apple.com/message/467199)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-05T02:09:34.780

有同样的经历。意识到movieSourceType 设置不正确。例如，movieSourceType 被设置为 MPMovieSourceTypeStreaming，而对于嵌入在包中的电影，它应该是 MPMovieSourceTypeFile。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-10T18:29:45.573

我有同样的问题，在我的情况下，问题是我无法判断电影是文件还是流（URL 没有告诉），所以我将它设置为`MPMovieSourceTypeUnknown`，这也解决了问题。默认情况下它具有该值，但是如果您开始播放任一类型的电影，它会在内部将类型更改为流或文件，如果您现在更改 URL 而不设置正确的类型或手动将类型设置回`MPMovieSourceTypeUnknown`，您将得到一个例外。

# rest - 无法解组 xml 文件

> ID：12071139
> 
> 赞同：1
> 
> 时间：2012-08-22T10:27:36.273
> 
> 标签：rest, jaxb, marshalling, unmarshalling

在我的项目中，我按`JaxB`对象生成了 xml 文件。现在我想再次将 unmarshall 作为`JAXB`对象。当我试图解组时，它会抛出 classcastException。

请找到我写的课程：

```
public class ReservationTest1 {

    public static void main(String []args) throws IOException, JAXBException
    {

        JAXBContext jaxbContext = JAXBContext.newInstance(com.hyatt.Jaxb.makeReservation.request.OTAHotelResRQ.class);
        Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();
        @SuppressWarnings("unchecked")
        JAXBElement bookingElement = (JAXBElement) unmarshaller.unmarshal(
                 new FileInputStream("D://myproject//Reservation.xml"));

        System.out.println(bookingElement.getValue());

    }
} 
```

您能否提供有用的信息来解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:54:45.483

**为什么你会得到一个 ClassCastException**

如果要解组的对象带有注释，`@XmlRootElement`那么您将获得该类的实例而不是`JAXBElement`.

```
FileInputStream xml = new FileInputStream("D://myproject//Reservation.xml");
OTAHotelResRQ booking = (OTAHotelResRQ) unmarshaller.unmarshaller.unmarshal(xml); 
```

**始终获取域对象**

如果您总是希望接收域对象的实例，无论是域对象还是`JAXBElement`从解组操作返回，您都可以使用`JAXBIntrospector`.

```
FileInputStream xml = new FileInputStream("D://myproject//Reservation.xml");
Object result = unmarshaller.unmarshaller.unmarshal(xml);
OTAHotelResRQ booking = (OTAHotelResRQ) JAXBIntrospector.getValue(result); 
```

**始终获取 JAXBElement**

如果您希望始终收到您的实例，`JAXBElement`可以使用`unmarshal`采用类参数的方法之一。

```
StreamSource xml = new StreamSource("D://myproject//Reservation.xml");
JAXBElement<OTAHotelResRQ> bookingElement = 
    unmarshaller.unmarshal(xml, OTAHotelResRQ.class); 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2012/07/jaxb-and-root-elements.html](http://blog.bdoughan.com/2012/07/jaxb-and-root-elements.html)

# vb.net - 按以下格式比较日期：2012 年 8 月 20 日星期三 10:14

> ID：12071141
> 
> 赞同：0
> 
> 时间：2012-08-22T10:27:57.587
> 
> 标签：vb.net, date, datetime, format

我正在尝试查看当前日期是否与日期变量相比是新的。但是，日期变量来自用户可以编辑的 XMLFile，并且必须以该格式编写以便他们更容易阅读等。我拥有的格式是：2012 年 8 月 22 日星期三 10:14 = ("dddd d MMMM yyyy高：毫米")

如何将其转换回日期格式，以便将其与当前日期进行比较

或者

我可以用这种格式比较两个日期吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:32:08.977

要转换为日期：

```
Dim theDate = DateTime.ParseExact("Wednesday 22 August 2012 10:14",
                                  "dddd d MMMM yyyy HH:mm",
                                  Globalization.CultureInfo.InvariantCulture) 
```

要格式化为字符串：

```
Dim dateString = theDate.ToString("dddd d MMMM yyyy HH:mm") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:37:04.623

由于您有一个代表日期的字符串，因此您必须“解析”它。

```
Dim enus = Globalization.CultureInfo.CreateSpecificCulture("en-US")
Dim d As Date = Date.ParseExact("Wednesday 22 August 2012 10:14", "dddd d MMMM yyyy HH:mm", enus) 
```

现在您有了一个可以与任何其他日期进行比较的“日期”。

# shell - 将文件批量移动到子文件夹中（递归）

> ID：12071142
> 
> 赞同：0
> 
> 时间：2012-08-22T10:28:00.950
> 
> 标签：shell, batch-file, command, directory, subdirectory

我有

*   文件夹-A
    *   文件夹-A1（<-- 里面的文件）
    *   文件夹-A2（<-- 里面的文件）
*   文件夹-B
    *   文件夹-B1 (<-- 里面的文件)
    *   文件夹-B2（<-- 里面的文件）

我想得到什么

*   文件夹-A
    *   文件夹-A1
        *   文件夹-A1-子文件夹（<-- 移动文件）
    *   文件夹-A2
        *   文件夹-A2-子文件夹（<-- 在其中移动文件）
*   文件夹-B
    *   文件夹-B1
        *   文件夹-B1-子文件夹（<-- 移动文件）
    *   文件夹-b2
        *   文件夹-B2-子文件夹（<-- 移动文件）

起初它看起来很复杂。但我要做的就是将所有文件夹中的文件移动到同一文件夹中的一个文件夹下（必须创建子文件夹，如果它包含其父文件夹的名称，那就太好了）。

有什么办法可以用 bash 命令来完成吗？还是一个应用程序？希望你对我有一些提示:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:00:35.433

这可以在带有 find 的 bash 单行中完成（可能会使这更容易/更小，但我不是 shell 专家）：

```
find . -type f -exec bash -c 'mv {} $(dirname {})/$(basename $(dirname {}))-Subfolder/$(basename {})' \;` 
```

（找到所有非目录文件，将它们从原始位置移动到“文件夹名/文件夹名-子文件夹/文件名”。必须这样做，`bash -c`因为否则将首先评估子外壳）

您需要在执行命令之前创建子文件夹，这可以通过另一个查找来完成：

```
find . -type d ! -iname "*-Subfolder" -exec bash -c 'mkdir {}/$(basename {})-Subfolder' \; 
```

# javascript - CKeditor 在源代码模式下不更新文本区域

> ID：12071145
> 
> 赞同：4
> 
> 时间：2012-08-22T10:28:15.120
> 
> 标签：javascript, ckeditor

我正在尝试在我的网站上使用 CKeditor。我发现在*源模式下*，已被 ckeditor 替换的 textarea 没有被更新。我需要更新 textarea，因为页面上的代码设置为在保存时保存 textarea 内容。

在正常模式下，文本正在更新。

```
$(document).ready(new function() {
    var editor = CKEDITOR.instances['content-text'];

    if (editor) { editor.destroy(true); }

    CKEDITOR.on('instanceCreated', function(e) {
        e.editor.on('contentDom', function() {
            e.editor.document.on('keyup', function(event) {
                // keyup event in ckeditor
                UpdateTextArea();
            });
        });
    });

    CKEDITOR.replace('content-text');
});

function UpdateTextArea() {

    CKEDITOR.instances['content-text'].updateElement();
} 
```

非常感谢任何帮助。这是我第一次问一个问题，如果我错过了什么，非常抱歉！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:43:31.383

我有点傻。

在我的输入按钮的 onclick 事件中，我只需要添加：

```
function UpdateTextArea() {        
    var editor_data = CKEDITOR.instances['content-text'].getData();
    $('#content-text').html(editor_data);
} 
```

# c++ - 我们可以在构造函数中使用“this”指针吗

> ID：12071147
> 
> 赞同：12
> 
> 时间：2012-08-22T10:28:19.960
> 
> 标签：c++, class

> **可能重复：**
> [C++ 在构造函数中使用 this 指针](https://stackoverflow.com/questions/2516960/c-using-this-pointer-in-constructors)

像标题一样，我可以做类似以下代码的事情吗？

```
class A;

class B {
public:
    B(A* p);
    ...
};

class A {
    B m;
public:
    A():m(this){}
    ~A(){}
}; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T10:33:29.627

是的，您可以将指针传递给当前正在构建的对象。但是您必须记住，该对象尚未完全构建。所以基本上 B 在它的 c'tor 中可以做的是存储指针以供以后使用。

一个经常使用的例子是 std::stream 和流缓冲区。

# php - 比较多维数组中的值

> ID：12071148
> 
> 赞同：2
> 
> 时间：2012-08-22T10:28:22.343
> 
> 标签：php, arrays, multidimensional-array

我有两个具有键“menu_title”和“id”的数组。

我想遍历这两个数组并将第一个数组中与第二个数组中的数组共享“menu_title”的任何数组的 id 存储在第三个数组中。

我知道我可以这样做：

```
$collision = [];
foreach($children as $child)
    foreach($siblings as $sibling)
        if($child['menu_title'] == $sibling['menu_title'])
            $collision[] = $child['id']; 
```

但这意味着我要为第一个中的每个项目循环第二个数组。

也许这会更好？

```
$collision = [];
foreach($siblings as &$sibling)
        $sibling = $sibling['menu_title'];

    foreach($children as $child)
        if(in_array($child['menu_title'], $siblings))
            $collision[] = $child['id']; 
```

但我仍然认为必须有更好的方法？

* * *

## 更新

数组由 sql 填充，基本上如果我删除一个类别，那么我会将子类别移动到与我要删除的类别相同的级别。

但是，如果任何孩子的 menu_title 与删除类别兄弟姐妹之一相同，那么我需要将孩子的 menu_title 重命名为“whatever-1”，例如“computers-1”

所以我正在构建一个我需要更新的 id 数组，然后我将对这些 ID 进行 sql 更新，可能对我如何处理这个问题进行改进？

* * *

## 更新

所以，最后我得到了：

```
$id = 4;
$category = $this->categoryeditormodel->getCategory($id);
$children = $this->categoryeditormodel->getChildCategories($id);
$siblings = $this->categoryeditormodel->getSiblingCategories($id);

foreach($siblings as &$sibling)
    $sibling = $sibling['menu_title'];

foreach($children as &$child){
    $child['parent_id'] = $category['parent_id'];
    if(in_array($child['menu_title'], $siblings)){
        $i = 0;
        while(in_array(($name = ($child['menu_title'].'-'.++$i)), $siblings));
        $child['menu_title'] = $name;
    }
}
$this->categoryeditormodel->update_batch($children); 
```

顶部的三个函数按照他们说的做，但它们很便宜，因为类别已经加载到缓存中，所以它不是另一个 sql 查询。

update_batch 只是 Code Igniters update_batch 函数的快捷方式，但它通过表名和 id 键传递。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:33:39.743

本质上这是 O(m*n) 其中 m 和 n 是两个数组的大小——所以你不能做得更好。最后，您需要查看每一对（兄弟姐妹、孩子），除非您可以更具体地了解这些数组的填充方式，否则没有太大的改进空间。

可能会有一些调整来优化这一点，但我没有立即想到，而且可能没有任何东西会产生巨大的差异。

编辑：如果您首先对两个数组进行排序，即 O(n*log n + m*log m)，那么您可能会根据数组中的实际内容进行一些渐近改进。除非数组相当大，否则这可能不会有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:54:14.677

您可以直接在 SQL 中执行此操作。

我假设类别表类似于（*我缩进了标题以显示原始层次结构*）：

```
id    parent title
1     0      computers
2     1         laptop
3     1         desktop
4     1         *servers*     <--
5     0      *servers*        <--
6     0      printers 
```

并且您想删除 ID 为 1 的“计算机”，我将其称为 DEL_ID。您可以通过以下方式执行此操作：

*   检索行 DEL_ID 的信息，尤其是父类别 ID PAR_ID
*   更新 parent 为 DEL_ID 的所有行，以便它们的 parent 变为 PAR_ID
*   删除 ID 为 DEL_ID 的行。

执行此操作时，您需要检查具有 DEL_ID 父级的行与具有父级 PAR_ID 的任何行具有相同的标题。当他们这样做时，您会更新他们的名字。

所以在 SQL 中：

```
UPDATE table SET title = CONCAT(title, '-1') FROM table
    JOIN table AS check ON (
        table.parent = DEL_ID
        AND check.parent = PAR_ID
        AND table.title = check.title);

UPDATE table SET parent = PAR_ID WHERE parent = DEL_ID;
DELETE FROM table WHERE id = DEL_ID; 
```

出于某种原因，如果您在victimCategory 的兄弟姐妹中已经拥有“title”和“title-1”，并且它的一个孩子又是“title”，则可能会出现问题。在这种情况下，将 'title' 重命名为 'title-1' 将导致冲突（与您在 PHP 实现中遇到的问题相同）。

您可以通过将第一个 UPDATE 转换为 SELECT 并检索类别的“旧”和“建议”标题来检测这种情况，然后运行新的 SELECT 以验证您是否接受“建议”名称没有重复；并重复递增 -1、-2 等后缀，直到检查选择返回没有冲突的行。`LIKE`或者您可以一举检索旧“title%”的所有标题，如果有任何标题（意味着您会遇到冲突），请以数字而非字典顺序选择更大的标题 - 即 title-11 > title-2 - 将其编号加一并将其用于新更新，现在必须逐一进行。它/是/昂贵的，但我想它很少发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:34:23.857

我认为没有更好的方法来做到这一点。如果要比较两个数组，则必须循环遍历它们。您可以像在数据库中一样创建索引，但如果您的数组不包含 >1000？不值得的元素。

无论如何，要创建一个索引：

```
$index = array();
foreach($siblings as $sibling)
{
  $index[$sibling['menu_title']] = true;
}
foreach($children as $child)
{
  if (isset($index[$child['menu_title']])) $collision[] = $child['id'];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T10:37:14.577

```
$collision = array_intersect($children, $siblings); 
```

那应该为您提供具有重复值的数组。检查[array_intersect](http://php.net/manual/en/function.array-intersect.php)

# php - 原则 2：双向关系，在不拥有的情况下添加实体不会持续存在

> ID：12071150
> 
> 赞同：2
> 
> 时间：2012-08-22T10:28:28.320
> 
> 标签：php, orm, doctrine

原则 2：双向关系，在不拥有的情况下添加实体不会持续存在

```
class AuthRole
{
    /**
     * @ORM\OneToMany(targetEntity="AuthUser", mappedBy="role", cascade={"persist","detach"})
     * @ORM\JoinColumn(name="role_id", referencedColumnName="id")
     */
    private $authUsers;
} 
```

AuthRole 是非拥有方

```
class AuthUser 
{
    /**
    * @ORM\ManyToOne(targetEntity="AuthRole", inversedBy="authUsers", cascade={"persist","detach"})
    * @ORM\JoinColumn(name="role_id", referencedColumnName="id")
    */
    private $role;
} 
```

AuthUser 是拥有方

如果我将用户添加到角色，则不会保存关系并且 AuthUser->role 为空；为什么会这样，这是否可以修复。

我知道当您向用户添加角色时，关系会被保存，但这不是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:29:49.853

修改`addUser`AuthRole 实体下的函数：

```
public function addAuthUser(AuthUser $authUser)
{
  $authUser->setAuthRole($this); // important line
  $this->authUsers[] = $authUser;
} 
```

如果您使用 setter，则遍历整个数组并调用`setAuthRole($this)`每个数组。

# ruby-on-rails - 当我有多组数据时，我想完善我的控制器视图交互

> ID：12071155
> 
> 赞同：1
> 
> 时间：2012-08-22T10:28:53.927
> 
> 标签：ruby-on-rails, model-view-controller, design-patterns, view, controller

我觉得控制器-> 视图交互错过了一些东西，所以这是我的问题。

我有一个控制器动作正在生成一堆数据：

@第一第二第三

每个变量在视图中显示为一个 html 块（部分）。

有时其中一个或多个将是空的，我仍然想显示其他的。

我解决这个问题的解决方案是在控制器中将变量设置为字符串（“无数据”），因为通常数据是某种数组，我在视图中测试字符串以检查是否有真实数据和作出相应的回应。

最重要的是，我还有一些用例，我的数据不会总是以相同的部分显示。我知道在调用正确的部分之前我可以在几个条件下做到这一点。

我想到的这类问题的一个很好的例子是仪表板，其中某些项目有时会丢失或根据显示的数据而变化。

我已经在使这些用例正常工作，但是通过在视图中放置很多逻辑，我感觉我没有正确地执行 MVC。是否有更好的设计模式（特定于或不特定于rails）来解决这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:30:35.743

我认为您的方法没有任何严重问题。您有一些逻辑可以确定数据如何显示的详细信息。你无法逃避这一点。唯一的问题是这个逻辑应该去哪里（它不能消失，唉）。我认为把它放在视图中是最好的决定。

不过，我建议让控制器和视图之间的接口尽可能明确。将变量设置为 nil 比将其设置为“无数据”更清晰。您可能需要向模型添加更多变量，以便视图知道该做什么。这比拥有一个变量要好，该变量通常是一个数组，但有时包含一个告诉视图如何显示数据的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:58:25.857

您可以使用礼物检查是否存在价值？在 MVC 中。

在您的控制器/视图中检查此情况。

```
if @first.present?
  do somthing
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:54:04.660

这似乎是[Draper的工作](https://github.com/jcasimir/draper)

Draper 将 a`View-Model`插入到位于 Controller 和 View 之间的 MVC 组合中并装饰模型，以面向对象的方式处理所有自定义视图逻辑，同时将其与视图层和模型层分开。

以[Draper 上的 RailsCast](http://railscasts.com/episodes/286-draper)为例。非常好（如果你认为它是合乎逻辑的）。

# java - 如何处理提交的链接，以便向访问 foo.jsp 的每个人展示这些链接？

> ID：12071157
> 
> 赞同：-2
> 
> 时间：2012-08-22T10:28:56.550
> 
> 标签：java, servlets

我希望我从网站的控制面板提交的链接出现在 jsp 页面“ *foo.jsp* ”上。直到知道我正在绑定提交的链接，作为会话对象的一个​​属性，当我意识到由 servlet（处理链接）创建的会话以该特定计算机为中心时。

除了使用数据库方法之外，还有什么方法可以实现这一点。

我一直在做什么直到知道：

```
Post Request from the cpanel -----> Servlet handles the link and puts that link as a session attribute
                                              |
                                              |
                                             \ /
     foo.jsp tries to retrieve those links by calling session.getAttribute(....) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:53:38.813

将它们放在应用程序上下文 ( `getServletContext()`) 中而不是会话中。

您可能希望同步对应用上下文链接列表的访问。

# python - 在 openshift 上使用 .htaccess 文件后丢失 django 管理静态文件

> ID：12071159
> 
> 赞同：0
> 
> 时间：2012-08-22T10:29:08.857
> 
> 标签：python, django, redhat, django-staticfiles, openshift

我不确定发生了什么，但我遵循了一些我在互联网上找到的关于使用 mod_rewrite 通过静态文件夹（从 $OPENSHIFT_DATA_DIR 提供）提供媒体文件的指南。现在唯一的问题是，我的管理文件不再得到服务，我正在努力修复它。

```
RewriteEngine On
RewriteRule ^application/media/(.+)$ /static/$1 [L] 
```

以上内容适用于我的用户上传的 /media/ 文件，但是在提供管理文件时存在巨大问题。他们似乎刚刚停止从 /static/admin/ 提供服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:02:00.277

I've managed to get this working by adding a few commands into the build file. This will now copy all the admin files directly into /static/admin.

It doesn't seem as clean as it could be but will do for now until someone can provide an improvement on this subject.

```
if [ ! -d $OPENSHIFT_REPO_DIR/wsgi/static/admin ]; then
mkdir $OPENSHIFT_REPO_DIR/wsgi/static/admin
fi

cp $OPENSHIFT_GEAR_DIR/virtenv/lib/python2.6/site-packages/Django-1.4.1-py2.6.egg/django/contrib/admin/static/admin $OPENSHIFT_REPO_DIR/wsgi/static/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T13:55:05.683

每次部署时都应该从 django 运行 collectstatic 命令。这会将必要的静态文件从您的所有应用程序复制到正确的目录。

我有一个执行此操作的 django 1.6 的 github 示例。它是 settings.py 设置和 action_hook 的组合。

[https://github.com/jfmatth/openshift-django16](https://github.com/jfmatth/openshift-django16)

高温高压

# php - 在php中使用googledrive api上传文件

> ID：12071160
> 
> 赞同：0
> 
> 时间：2012-08-22T10:29:08.587
> 
> 标签：php, google-drive-api

我已经搜索了如何使用 php 在 googledriveapi 上上传文件。我使用了以下方法

```
$file-setMimetype='image/jpg';
$file->setTitle='abcd'
$service->files->insert($file). 
```

它在 googledrive 上插入带有标题和 mimetype 的文件，但它是空的。我的问题是如何上传文件中包含的实际数据或内容，即如果我想将图像或 pdf 文件从我的系统上传到 googledrive。我该怎么做。请帮助我了解如何在 $data 中发送实际数据。 $data 变量应包含的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T20:38:11.723

[在最近添加的快速入门](https://developers.google.com/drive/quickstart)页面中有一个 10 分钟的教程，介绍如何编写一个完整的 PHP 应用程序以将文件上传到云端硬盘：

```
<?php
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_DriveService.php';

$client = new Google_Client();
// Get your credentials from the APIs Console
$client->setClientId('YOUR_CLIENT_ID');
$client->setClientSecret('YOUR_CLIENT_SECRET');
$client->setRedirectUri('urn:ietf:wg:oauth:2.0:oob');
$client->setScopes(array('https://www.googleapis.com/auth/drive'));

$service = new Google_DriveService($client);

$authUrl = $client->createAuthUrl();

//Request authorization
print "Please visit:\n$authUrl\n\n";
print "Please enter the auth code:\n";
$authCode = trim(fgets(STDIN));

// Exchange authorization code for access token
$accessToken = $client->authenticate($authCode);
$client->setAccessToken($accessToken);

//Insert a file
$file = new Google_DriveFile();
$file->setTitle('My document');
$file->setDescription('A test document');
$file->setMimeType('text/plain');

$data = file_get_contents('document.txt');

$createdFile = $service->files->insert($file, array(
      'data' => $data,
      'mimeType' => 'text/plain',
    ));

print_r($createdFile);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-30T17:54:53.313

api 已经更新，文档没有相应更改。
因此，在“$file = new Google_DriveFile();”上方的 Claudio 评论中
应该更改为
$file = new Google_Service_Drive_DriveFile();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:43:54.167

尝试这个：

```
$service->files->insert($file, array(
    'data' => $content,
    'mimeType' => $mimeType,        
)); 
```

您可以看一下[如何插入文件的示例](https://developers.google.com/drive/v2/reference/files/insert)（单击到 PHP 选项卡）。尝试先上传`text/plain`带有内容的文件，图像数据可能需要在 base64 中编码，然后才能添加到内容中。

# java - 如何将自定义标头变量添加到请求并重定向用户

> ID：12071163
> 
> 赞同：0
> 
> 时间：2012-08-22T10:29:31.267
> 
> 标签：java, http, redirect, jakarta-ee

我正在尝试构建一个 Java EE 应用程序，该应用程序提取某个会话 cookie，将其作为 HTTP 标头添加到请求中，然后将用户转发到请求中带有此标头变量的第 3 方 URL。

我使用[这个例子](http://vangjee.wordpress.com/2009/02/25/how-to-modify-request-headers-in-a-j2ee-web-application/)作为参考。

我已经实现`FakeHeadersRequest`，`SimpleFilter`但不确定如何使用这个新的标头变量将请求重定向到不同的 URL。我应该只创建一个转发请求的 Servlet 吗？也许使用 Apache http 客户端？

有人可以帮我完成这个难题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:36:53.017

一旦您在服务器端并包装了您的请求，请使用 RequestDispatcher.forward() 与该包装的请求。

您要转发到的资源（任何 Servlet、JSP）将“看到”新标头。

不要尝试在客户端重定向（HTTP 302），让客户端发送自定义标头并不容易，AFAIK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-19T08:59:50.923

无论您使用什么语言或框架，都无法重定向到设置了自定义标题的页面。换句话说，没有办法触发 HTTP 重定向并导致客户端（浏览器）添加自定义标头。

您正在为指示浏览器重定向的响应设置自定义标头，而不是为重定向本身。

站点指示浏览器发出带有自定义标头的 HTTP 请求的唯一方法是使用 Javascript 和`XMLHttpRequest`对象。

你能想到的最接近的事情就是充当代理。没有重定向。

# solr - Solr - 不区分大小写的搜索不起作用

> ID：12071164
> 
> 赞同：5
> 
> 时间：2012-08-22T10:29:35.790
> 
> 标签：solr, case-insensitive, solr-schema

`myfield`我想在 solr中应用不区分大小写的字段搜索。

我用谷歌搜索了一下，我发现，我需要申请`LowerCaseFilterFactory`字段类型，字段应该是`solr.TextFeild`。

我在我的数据中应用了它`schema.xml`并重新索引了数据，然后我的搜索似乎也区分大小写。

下面是我执行的搜索。

```
http://localhost:8080/solr/select?q=myfield:"cloud university"&hl=on&hl.snippets=99&hl.fl=myfield 
```

下面是字段类型的定义

```
 <fieldType name="text_en_splitting" class="solr.TextField" positionIncrementGap="100" autoGeneratePhraseQueries="true">
      <analyzer type="index">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <!-- in this example, we will only use synonyms at query time
        <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
        -->
        <!-- Case insensitive stop word removal.
          add enablePositionIncrements=true in both the index and query
          analyzers to leave a 'gap' for more accurate phrase queries.
        -->
        <filter class="solr.StopFilterFactory"
                ignoreCase="true"
                words="stopwords_en.txt"
                enablePositionIncrements="true"
                />
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
        <filter class="solr.PorterStemFilterFactory"/>
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.StopFilterFactory"
                ignoreCase="true"
                words="stopwords_en.txt"
                enablePositionIncrements="true"
                />
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
        <filter class="solr.PorterStemFilterFactory"/>
      </analyzer>
    </fieldType> 
```

以下是我的字段定义

```
 <field name="myfield" type="text_en_splitting" indexed="true" stored="true" /> 
```

不确定，这有什么问题。请帮我解决这个问题。

谢谢

**编辑**

调试查询

```
<lst name="debug">
    <str name="rawquerystring">
        "cloud university" AND guid:268406b6-db65-49da-848a-c59248f170db
    </str>
    <str name="querystring">
        "cloud university" AND guid:268406b6-db65-49da-848a-c59248f170db
    </str>
    <str name="parsedquery">
        +PhraseQuery(CC:"cloud univers") +guid:268406b6-db65-49da-848a-c59248f170db
    </str>
    <str name="parsedquery_toString">
        +CC:"cloud univers" +guid:268406b6-db65-49da-848a-c59248f170db
    </str>
    <lst name="explain">
        <str name="KSYS_20120805_1100">
            12.572915 = (MATCH) sum of: 0.03595598 = weight(CC:"cloud univers" in 1560524), product of: 0.51819557 = queryWeight(CC:"cloud univers"), product of: 8.881522 = idf(CC: cloud=4798 univers=625207) 0.05834536 = queryNorm 0.06938689 = fieldWeight(CC:"cloud univers" in 1560524), product of: 1.0 = tf(phraseFreq=1.0) 8.881522 = idf(CC: cloud=4798 univers=625207) 0.0078125 = fieldNorm(field=CC, doc=1560524) 12.536959 = (MATCH) weight(guid:268406b6-db65-49da-848a-c59248f170db in 1560524), product of: 0.85526216 = queryWeight(guid:268406b6-db65-49da-848a-c59248f170db), product of: 14.658615 = idf(docFreq=1, maxDocs=1709587) 0.05834536 = queryNorm 14.658615 = (MATCH) fieldWeight(guid:268406b6-db65-49da-848a-c59248f170db in 1560524), product of: 1.0 = tf(termFreq(guid:268406b6-db65-49da-848a-c59248f170db)=1) 14.658615 = idf(docFreq=1, maxDocs=1709587) 1.0 = fieldNorm(field=guid, doc=1560524)
        </str>
    </lst>
    <str name="QParser">LuceneQParser</str>
    <lst name="timing">
        <double name="time">60.0</double>
        <lst name="prepare">
            <double name="time">1.0</double>
            <lst name="org.apache.solr.handler.component.QueryComponent">
                <double name="time">0.0</double>
            </lst>
            <lst name="org.apache.solr.handler.component.FacetComponent">
                <double name="time">0.0</double>
            </lst>
            <lst name="org.apache.solr.handler.component.MoreLikeThisComponent">
                <double name="time">0.0</double>
            </lst>
            <lst name="org.apache.solr.handler.component.HighlightComponent">
                <double name="time">0.0</double>
            </lst>
            <lst name="org.apache.solr.handler.component.StatsComponent">
                <double name="time">0.0</double>
            </lst>
            <lst name="org.apache.solr.handler.component.DebugComponent">
                <double name="time">0.0</double>
            </lst>
        </lst>
        <lst name="process">
            <double name="time">59.0</double>
            <lst name="org.apache.solr.handler.component.QueryComponent">
                <double name="time">0.0</double>
            </lst>
            <lst name="org.apache.solr.handler.component.FacetComponent">
                <double name="time">0.0</double>
            </lst>
            <lst name="org.apache.solr.handler.component.MoreLikeThisComponent">
                <double name="time">0.0</double>
            </lst>
            <lst name="org.apache.solr.handler.component.HighlightComponent">
                <double name="time">57.0</double>
            </lst>
            <lst name="org.apache.solr.handler.component.StatsComponent">
                <double name="time">0.0</double>
            </lst>
            <lst name="org.apache.solr.handler.component.DebugComponent">
                <double name="time">2.0</double>
            </lst>
        </lst>
    </lst>
</lst> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T09:57:31.443

您应该将 solr.LowerCaseFilterFactory 放在单词分隔符之前，因为小写字母中间的大写字母或反之亦然会触发单词分隔符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:48:35.040

我建议你应该使用分析工具，看看表达式是如何被索引的以及表达式是如何被搜索的。 `http://localhost:8983/solr/admin/analysis.jsp?highlight=on`

**我认为WordDelimiterFilterFactory**可能存在问题（它在查询和索引中有所不同），但这只是一个猜测。

在工具字段类型中选择**text_en_splitting**并在字段值索引`ClOUD UNIVERSITY`和字段值查询处输入`cloud university`。还选择详细输出，看看你得到了什么。

# javascript - 嵌套的 JSON 对象

> ID：12071166
> 
> 赞同：0
> 
> 时间：2012-08-22T10:29:52.710
> 
> 标签：javascript, json

我对这个 JSON 对象非常陌生。所以我需要你们的帮助。我必须创建一个 JSON 对象，并且该对象有两个孩子。一个孩子有几个孩子。如果我的问题令人困惑，请参考下图。它类似于嵌套列表。示例：

PRODUCT_LIST

```
<ul>
    <li>CATEGORY_ID - A</li>
    <li>PRODUCT_DETAILS
        <ul>
            <li>PRODUCT_ID - A.1</li>
            <li>PRODUCT_NAME - AAAA1111</li>
            <li>UNIT_COST - 0.1</li>
        </ul>
    </li>
    <li>CATEGORY_ID - B</li>
    <li>PRODUCT_DETAILS
        <ul>
            <li>PRODUCT_ID - B.1</li>
            <li>PRODUCT_NAME - BBBBB1111</li>
            <li>UNIT_COST - 0.2</li>
        </ul>
    </li>
</ul> 
```

我尝试这样做，但遇到了 JavaScript 错误。任何人都可以帮助为上述图表创建 JSON。注意：一个类别有多个产品详细信息。这意味着 PRODUCT_ID、PRODUCT_NAME 和 UNIT_COST 将针对特定 CATEGORY_ID 重复多次。

我尝试过的 JavaScript 代码

```
var product =   '{"products_list":' +
                '[' + 
                    '{' + 
                        '{"category_id":"A"},' +
                        '{"product_details":' + 
                            '[' + 
                                '{"product_id":"A.1","product_name":"AAAA1111", "unit_cost":"A1"},' +
                                '{"product_id":"A.2","product_name":"AAAA2222", "unit_cost":"A2"},' +
                                '{"product_id":"A.3","product_name":"AAAA3333", "unit_cost":"A3"},' +
                                '{"product_id":"A.4","product_name":"AAAA4444", "unit_cost":"A4"},' +
                                '{"product_id":"A.5","product_name":"AAAA5555", "unit_cost":"A5"},' +
                                '{"product_id":"A.6","product_name":"AAAA6666", "unit_cost":"A6"},' +
                                '{"product_id":"A.7","product_name":"AAAA7777", "unit_cost":"A7"},' +
                                '{"product_id":"A.8","product_name":"AAAA8888", "unit_cost":"A8"},' +
                                '{"product_id":"A.9","product_name":"AAAA9999", "unit_cost":"A9"},' +
                                '{"product_id":"A.0","product_name":"AAAA0000", "unit_cost":"A0"}' +
                            ']' + 
                        '}' + 
                    '},' + 
                    '{' + 
                        '{"category_id":"A"},' +
                        '{"product_details":' + 
                            '[' + 
                                '{"product_id":"A.1","product_name":"AAAA1111", "unit_cost":"A1"},' +
                                '{"product_id":"A.2","product_name":"AAAA2222", "unit_cost":"A2"},' +
                                '{"product_id":"A.3","product_name":"AAAA3333", "unit_cost":"A3"},' +
                                '{"product_id":"A.4","product_name":"AAAA4444", "unit_cost":"A4"},' +
                                '{"product_id":"A.5","product_name":"AAAA5555", "unit_cost":"A5"},' +
                                '{"product_id":"A.6","product_name":"AAAA6666", "unit_cost":"A6"},' +
                                '{"product_id":"A.7","product_name":"AAAA7777", "unit_cost":"A7"},' +
                                '{"product_id":"A.8","product_name":"AAAA8888", "unit_cost":"A8"},' +
                                '{"product_id":"A.9","product_name":"AAAA9999", "unit_cost":"A9"},' +
                                '{"product_id":"A.0","product_name":"AAAA0000", "unit_cost":"A0"}' +
                            ']' + 
                        '}' + 
                    '}' + 
                ']' + 
            '}'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T10:39:07.330

使用 HTML 树，您将获得 PRODUCT_LIST 的以下 JSON 表示：

```
[
   {
      "CATEGORY_ID":"A",
      "PRODUCT_DETAILS":[
         {
            "PRODUCT_ID":"A.1",
            "PRODUCT_NAME":"AAAA1111",
            "UNIT_COST":0.1
         }
      ]
   },
   {
      "CATEGORY_ID":"B",
      "PRODUCT_DETAILS":[
         {
            "PRODUCT_ID":"B.1",
            "PRODUCT_NAME":"BBBBB1111",
            "UNIT_COST":0.2
         }
      ]
   }
] 
```

* * *

但是，您的 JavaScript 会生成一个几乎有效的 JSON*字符串*，并将其分配给`product`变量。你可以用[`JSON.parse()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)它，但这太复杂了。由于[JavaScriptObjectNotation](http://json.org)是 Javascript[对象*文字*语法](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values%2C_variables%2C_and_literals#Object_literals)的子集，您应该直接分配对象。

在您的 JSON 中，您在类别对象周围有太多大括号。您可以使用[http://jsonformatter.curiousconcept.com/](http://jsonformatter.curiousconcept.com/)进行检查。更正的脚本：

```
var product = {
   "products_list":[
      {
         "category_id":"A",
         "product_details":[
            {
               "product_id":"A.1",
               "product_name":"AAAA1111",
               "unit_cost":"A1"
            },
            {
               "product_id":"A.2",
               "product_name":"AAAA2222",
               "unit_cost":"A2"
            },
            {
               "product_id":"A.3",
               "product_name":"AAAA3333",
               "unit_cost":"A3"
            },
            {
               "product_id":"A.4",
               "product_name":"AAAA4444",
               "unit_cost":"A4"
            },
            {
               "product_id":"A.5",
               "product_name":"AAAA5555",
               "unit_cost":"A5"
            },
            {
               "product_id":"A.6",
               "product_name":"AAAA6666",
               "unit_cost":"A6"
            },
            {
               "product_id":"A.7",
               "product_name":"AAAA7777",
               "unit_cost":"A7"
            },
            {
               "product_id":"A.8",
               "product_name":"AAAA8888",
               "unit_cost":"A8"
            },
            {
               "product_id":"A.9",
               "product_name":"AAAA9999",
               "unit_cost":"A9"
            },
            {
               "product_id":"A.0",
               "product_name":"AAAA0000",
               "unit_cost":"A0"
            }
         ]
      },
      {
         "category_id":"A",
         "product_details":[
            {
               "product_id":"A.1",
               "product_name":"AAAA1111",
               "unit_cost":"A1"
            },
            {
               "product_id":"A.2",
               "product_name":"AAAA2222",
               "unit_cost":"A2"
            },
            {
               "product_id":"A.3",
               "product_name":"AAAA3333",
               "unit_cost":"A3"
            },
            {
               "product_id":"A.4",
               "product_name":"AAAA4444",
               "unit_cost":"A4"
            },
            {
               "product_id":"A.5",
               "product_name":"AAAA5555",
               "unit_cost":"A5"
            },
            {
               "product_id":"A.6",
               "product_name":"AAAA6666",
               "unit_cost":"A6"
            },
            {
               "product_id":"A.7",
               "product_name":"AAAA7777",
               "unit_cost":"A7"
            },
            {
               "product_id":"A.8",
               "product_name":"AAAA8888",
               "unit_cost":"A8"
            },
            {
               "product_id":"A.9",
               "product_name":"AAAA9999",
               "unit_cost":"A9"
            },
            {
               "product_id":"A.0",
               "product_name":"AAAA0000",
               "unit_cost":"A0"
            }
         ]
      }
   ]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:42:18.140

所有标识符都应该用引号引起来。
通过按类别 id 进行索引并制作对象的类别数组，我认为您可以获得数据结构的所有特性和功能，并使解决方案非常灵活。

```
var category = {
  "A": [
    { "product_id": "A.1", "product_name": "AAAA1111", "unit_cost": 0.1 },
    { "product_id": "A.2", "product_name": "AAAA2222", "unit_cost": 0.2 },
  ],
  "B": [
    { "product_id": "B.1", "product_name": "BBBB1111", "unit_cost": 0.2 },
    { "product_id": "B.2", "product_name": "BBBB2222", "unit_cost": 0.4 },
  ]
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:35:56.210

这是一个有点令人困惑的问题，但我可能会有类似这样的 JSON

```
var data = [
  {
    category_id: 'A',
    product_id: 'A.1',
    product_name: 'AAAA1111',
    unit_cost: 0.1
  },
  {
    category_id: 'B',
    product_id: 'B.1',
    product_name: 'BBBB1111',
    unit_cost: 0.2
  }
]; 
```

然后在显示时按类别过滤。您可能会发现[http://underscorejs.org/](http://underscorejs.org/)对过滤结果很有用

# asp.net-mvc - 通过 IIS 加载错误发布网站

> ID：12071167
> 
> 赞同：1
> 
> 时间：2012-08-22T10:29:53.107
> 
> 标签：asp.net-mvc

大家好，当我通过 IIS 运行我的项目时，我收到了这个错误，如下所示

```
Configuration Error 
Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. 

Parser Error Message: Could not load file or assembly 'System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.

Source Error: 

Line 20:       <assemblies>
Line 21:         <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
Line 22:         <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
Line 23:         <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
Line 24:         <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />

Source File: C:\Users\furkan\Desktop\WebCity\WebCity\web.config    Line: 22 

Assembly Load Trace: The following information can be helpful to determine why the assembly 'System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' could not be loaded. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:26:10.477

好吧，我找到了解决方案。当您收到此错误时，您必须检查位于 bin 文件中的丢失的 dll 文件。

第一种方法是：

```
Microsoft.Web.Infastructure
System.Web.Helpers
System.Web.Mvc
System.Web.Razor
System.Web.WebPages
System.Web.WebPages.Deployment
System.Web.WebPages.Razor 
```

您可以从 C:\Program Files\Microsoft ASP.NET\ASP.NET Web Pages 中找到这些 dll 文件，然后您必须将 dll 文件复制到您的项目 bin 文件夹中。

第二种方式是

在 Visual Studio 中打开您的项目，然后单击名称所在的引用

```
 Microsoft.Web.Infastructure
    System.Web.Helpers
    System.Web.Mvc
    System.Web.Razor
    System.Web.WebPages
    System.Web.WebPages.Deployment
    System.Web.WebPages.Razor 
```

从属性中更改“复制本地=真”

# delphi - 另一个应用程序中的列表框内容

> ID：12071172
> 
> 赞同：4
> 
> 时间：2012-08-22T10:30:23.157
> 
> 标签：delphi, winapi, listbox, delphi-7, listboxitems

如何在另一个应用程序的窗口中读取列表框项目？我可以获得窗口的句柄，但我不知道访问内部组件的清晰方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T10:53:42.703

您可以尝试从以下项目中获取一些东西，其中显示了，如何枚举子窗口，为给定的类名过滤它们以及如何获取列表框的项目。我会评论它，但这将是一个漫长的故事，所以请***把它当作一个临时帖子***......

***单元1.pas***

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls;

type
  TEnumData = class
    ClassName: string;
    HandleItems: TStrings;
  end;

type
  TForm1 = class(TForm)
    CloneListBox: TListBox;
    HandleEdit: TEdit;
    HandleListBox: TListBox;
    HandleEnumButton: TButton;
    procedure HandleEnumButtonClick(Sender: TObject);
    procedure HandleListBoxClick(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

function EnumCallback(Handle: HWND; EnumData: TEnumData): BOOL; stdcall;
var
  Buffer: array[0..255] of Char;
begin
  Result := True;
  if GetClassName(Handle, Buffer, 256) <> 0 then
    if Buffer = EnumData.ClassName then
      EnumData.HandleItems.Add(IntToStr(Handle));
end;

procedure GetListBoxItems(Handle: HWND; Target: TListBox);
var
  I: Integer;
  ItemCount: Integer;
  TextBuffer: string;
  TextLength: Integer;
begin
  ItemCount := SendMessage(Handle, LB_GETCOUNT, 0, 0);
  if ItemCount <> LB_ERR then
  begin
    Target.Items.BeginUpdate;
    try
      Target.Clear;
      for I := 0 to ItemCount - 1 do
      begin
        TextLength := SendMessage(Handle, LB_GETTEXTLEN, I, 0);
        SetLength(TextBuffer, TextLength);
        SendMessage(Handle, LB_GETTEXT, I, LPARAM(PChar(TextBuffer)));
        Target.Items.Add(TextBuffer);
      end;
    finally
      Target.Items.EndUpdate;
    end;
  end;
end;

procedure TForm1.HandleEnumButtonClick(Sender: TObject);
var
  EnumData: TEnumData;
begin
  EnumData := TEnumData.Create;
  try
    EnumData.ClassName := 'TListBox';
    EnumData.HandleItems := HandleListBox.Items;
    EnumChildWindows(StrToInt(HandleEdit.Text), @EnumCallback, LPARAM(EnumData));
  finally
    EnumData.Free;
  end;
end;

procedure TForm1.HandleListBoxClick(Sender: TObject);
var
  SourceHandle: Integer;
begin
  if TryStrToInt(HandleListBox.Items[HandleListBox.ItemIndex], SourceHandle) then
    GetListBoxItems(SourceHandle, CloneListBox);
end;

end. 
```

***单元1.dfm***

```
object Form1: TForm1
  Left = 0
  Top = 0
  Caption = 'Form1'
  ClientHeight = 259
  ClientWidth = 460
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  PixelsPerInch = 96
  TextHeight = 13
  object CloneListBox: TListBox
    Left = 224
    Top = 8
    Width = 228
    Height = 243
    ItemHeight = 13
    TabOrder = 0
  end
  object HandleEnumButton: TButton
    Left = 127
    Top = 8
    Width = 88
    Height = 25
    Caption = 'Enumerate'
    TabOrder = 1
    OnClick = HandleEnumButtonClick
  end
  object HandleListBox: TListBox
    Left = 8
    Top = 40
    Width = 207
    Height = 211
    ItemHeight = 13
    TabOrder = 2
    OnClick = HandleListBoxClick
  end
  object HandleEdit: TEdit
    Left = 8
    Top = 8
    Width = 113
    Height = 21
    TabOrder = 3
    Text = '0'
  end
end 
```

***项目1.dpr***

```
program Project1;

uses
  Forms,
  Unit1 in 'Unit1.pas' {Form1};

{$R *.res}

begin
  Application.Initialize;
  Application.MainFormOnTaskbar := True;
  Application.CreateForm(TForm1, Form1);
  Application.Run;
end. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T10:43:28.643

使用 EnumChildWindows 获取子控件列表（当主窗口句柄已知时）。

然后查看[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761313%28v=vs.85%29.aspx)上的 LB_GETTEXT Message （或 Delphi WinSDK Help）。不要忘记检查字符串长度（LB_GETTEXTLEN）并分配内存缓冲区

# python - 在 Django 中全局存储错误代码和消息

> ID：12071173
> 
> 赞同：1
> 
> 时间：2012-08-22T10:30:24.480
> 
> 标签：python, django, dictionary, error-handling

我有一个 Django 应用程序，当出现一些用户错误（即 URL 不存在或没有权限）时，它会执行`messages.add_message`. 该消息包含指向错误说明的链接`/error/<id>`。如果我想重复使用错误 ID 和消息，我该怎么做？我在想这样的事情：

`errors = {1 : "Error message for error id 1", 2 : "Error message for error id 2"}`

我可以在哪里存储这样的字典，以便我可以在所有视图中访问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:46:07.570

您应该创建一个映射到`url`like的视图`/error/<id>`。然后在视图内部有字典`errors = {1 : "Error message for error id 1", 2 : "Error message for error id 2"}`，或者在一个名为的文件中`error_codes.py`，并将其导入您的`views.py`. 然后只需解析`<id>`传入的`url`并返回`template`正确的 a `error code`。

要确保此错误代码字典在您的所有请求中可用，请使用编写自定义[Django 中间件](https://docs.djangoproject.com/en/dev/topics/http/middleware/?from=olddocs)。通过将您的添加到其中来实施`process_template_response(self, request, response)`和更改。将确保每个响应在模板和其他地方呈现的 http 响应中都有可用的错误字典。`response.context_data``error_code_dictionary`

# ios - CGPoint 的 indexPath

> ID：12071181
> 
> 赞同：3
> 
> 时间：2012-08-22T10:30:58.460
> 
> 标签：ios, uitableview, uigesturerecognizer

我刚刚添加了一个`UITapGestureRecognizer`到我的`UITableView`，但处理程序（下）只是给 'null' 为`indexPath`.

```
- (void)photoTapped:(UIGestureRecognizer *)gestureRecognizer {
            if (gestureRecognizer.state == UIGestureRecognizerStateEnded) {
                CGPoint tapLocation = [gestureRecognizer locationInView:self.itemsTableView];
                NSIndexPath *tappedIndexPath = [self.itemsTableView indexPathForRowAtPoint:tapLocation];
               //...
        }
} 
```

我不明白为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T10:40:15.387

做这个：

```
 - (void)photoTapped:(UIGestureRecognizer *)gestureRecognizer {
 CGPoint location = [gestureRecognizer locationInView:self.view];

if (CGRectContainsPoint([self.view convertRect:self.itemsTableView.frame fromView:self.itemsTableView.superview], location))
{
    CGPoint locationInTableview = [self.itemsTableView convertPoint:location fromView:self.view];
    NSIndexPath *indexPath = [self.itemsTableView indexPathForRowAtPoint:locationInTableview];
    if (indexPath) //use this code if needed
        [self tableView:self.itemsTableView didSelectRowAtIndexPath:indexPath];

    return;
}

// otherwise proceed with the rest of your gesture handling logic
} 
```

# javascript - 拉斐尔路径交叉点不起作用

> ID：12071186
> 
> 赞同：3
> 
> 时间：2012-08-22T10:31:09.120
> 
> 标签：javascript, raphael

我对 Raphael 和`.pathIntersection()`方法有疑问。

[JSFiddle 示例](http://jsfiddle.net/t6gWt/2/)

您可以看到有两条线都与曲线相交，但当我使用该`.pathIntersection()`方法时，其中只有一条显示为交点。

[Github](https://github.com/DmitryBaranovskiy/raphael/issues/539)中有一个未解决的问题，原因可能是这样，但我想确保我也没有做任何愚蠢的事情。因此，如果任何人都可以看到我已经完成的问题，或者可能确认我正在正确使用它，那么这就是图书馆的问题，这将是惊人的。

谢谢。

编辑：[这个小提琴](http://jsfiddle.net/t6gWt/7)由提供`Speransky Danil`并演示了当点靠近时线交点不起作用。可能是一个低头的途径作为一个可能的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T04:37:59.203

不知道这是否仍然有用（但谁知道）。我相信这`.pathIntersection`有一个错误。我花了很多时间试图修复我参与的项目中的问题，但无济于事。所以我使用了另一种使用`Raphael.getPointAtLength()`.
看看我做的这个小提琴：http: [//jsfiddle.net/mosheh/SKLaQ/](http://jsfiddle.net/mosheh/SKLaQ/)
代码：

```
// Computes a path string for a circle
Raphael.fn.circlePath = function(x , y, r) {      
  return "M" + x + "," + (y-r) + "A"+r+","+r+",0,1,1,"+(x - 0.1)+","+(y-r)+" z";
} 

// Computes a path string for a line
Raphael.fn.linePath = function(x1, y1, x2, y2) {
    return "M" + x1 + "," + y1 + "L" + x2 + "," + y2;
}

var x1 = 45.4159292035397;
var y1 = 81.0796460176991;
var r1 = 8.330383480825958;

var x2 = 43.4159292035397;
var y2 = 22.76696165191737;
var r2 = 8.330383480825958;
//Debug: c1 x,y,r 943.4159292035397 , 481.0796460176991 , 8.330383480825958 
//Debug: c2 x,y,r 943.4159292035397 , 422.76696165191737 , 8.330383480825958 

var paper = Raphael(document.getElementById("raphael"), 600, 600);
var c1 = paper.circle(x1, y1, r1);
c1.attr({fill: 'red'});
var c2 = paper.circle(x2, y2, r2);

// Get the path intersections
// In this case we are guaranteed 1 intersection, but you could find any
// intersection of interest.

// Note: pathIntersection has a bug when x1 and x2 are close to each other
// (play arround with the x1 value above and you will see //that when x1 is
// close to x2 then pathIntersection will return a null value) - also depends
// on the radius size of the circles - very complex!! - spent a lot of time
// trying to fix this - not to mention that I discovered this problem by chance
// (in a huge connected graph with nodes and links - some nodes were connected
// OK but others not which were suppposed to be connected!!)

//var c1i = Raphael.pathIntersection(linePath, c1path)[0];
//var c2i = Raphael.pathIntersection(linePath, c2path)[0];
//var line = paper.path(paper.linePath(c1i.x, c1i.y, c2i.x, c2i.y));

//So here is the alternative way which worked for me:
//Draw a line between 2 circles starting at their circumferences - this works

//Get a path line starting from the center of circle 1
var linePath1 = paper.linePath(x1, y1, x2, y2);

//Get a path line starting from the center of circle 2
var linePath2 = paper.linePath(x2, y2, x1, y1);

//Get a point on the line from center of circle 1 on the circumference
var fromC1 = Raphael.getPointAtLength(linePath1, r1);

//Get a point on the line from center of circle 2 on the circumference
var fromC2 = Raphael.getPointAtLength(linePath2, r2);

//Now let Raphael draw this line - and voila, the line just touches the
//circumferences of both circles - cool
var line = paper.path(paper.linePath(fromC1.x, fromC1.y, fromC2.x, fromC2.y)); 
```

# actionscript-3 - 影片剪辑中的影片剪辑

> ID：12071188
> 
> 赞同：0
> 
> 时间：2012-08-22T10:31:20.227
> 
> 标签：actionscript-3, arguments, movieclip

我创建了一个包含一些按钮的影片剪辑，它分为 5 个类别 (frutoN)。每个类别都有不同数量的按钮 (frutoLC)。

变量 frutoLN 是该特定按钮的实例名称（即：bt0101 或 bt0532）；

那么，问题来了：变量 frutoLN 必须有什么样的参数？我试过 :String 和 :MovieClip ，但它们都不起作用。

```
for (frutoLC=1; frutoLC<=frutoL;frutoLC++){ 
        var frutoLN;
        frutoLN = "this.cena.cenaDentro.bt"+frutoN+""+frutoLC;
        trace ("frutoLN = "+frutoLN);
        frutoLN.visible = true;
    } 
```

对不起我的英语，我希望我已经说清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:05:59.067

在上面的代码中，`frutoLN`变量将是一个`String`对象。要访问`MovieClip`您要查找的内容，您需要执行以下操作：

```
for (var frutoLC:uint = 1; frutoLC <= frutoL; frutoLC++) {
    var frutoLN:MovieClip = this.cena.cenaDentro["bt" + frutoN.toString() + frutoLC.toString()];
    frutoLN.visible = true;
} 
```

# salesforce - 带命令行的 apex 数据加载器中的键提取 SOQL 值

> ID：12071190
> 
> 赞同：2
> 
> 时间：2012-08-22T10:31:26.977
> 
> 标签：salesforce

我正在使用命令行顶点数据加载器。我想提取那些 last_ax_date 字段值大于数据加载器机器上某处指定的日期的帐户。

```
<bean id="ExtractAXAccounts"  class="com.salesforce.dataloader.process.ProcessRunner"
      singleton="false">
    <property name="configOverrideMap"><map>
        <entry key="process.operation" value="extract" />
        <entry key="dataAccess.type" value="csvWrite" />
        <entry key="sfdc.extractionSOQL" value="select Id, Name, Last_AX_Date from  Account  where Last_AX_Date greater then 'date store in somewhere in the system'" />
    </map></property>
</bean> 
```

根据上述情况，我想动态提取帐户。那么我必须在哪里指定日期以及如何将它用于“sfdc.extractionSOQL”值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:42:14.837

我不相信可以只为 的一部分传递一个值`sfdc.extractionSOQL`，但是您可以从执行 DataLoader.jar 的脚本中传递整个查询。这将允许您在从命令行执行时传入日期值。`process.bat`请记住，如果不对Data Loader 附带的文件进行一些修改，这是不可能的，所以这里有一个直接调用 DataLoader.jar 的解决方案：

`process-conf.xml`（`sfdc.extractionSOQL`不包括声明）：

```
<bean id="ExtractAXAccounts"  class="com.salesforce.dataloader.process.ProcessRunner"
    singleton="false">
    <property name="configOverrideMap"><map>
        <entry key="process.operation" value="extract" />
        <entry key="dataAccess.type" value="csvWrite" />
    </map></property>
</bean> 
```

`runDL.bat`（`sfdc.extractionSOQL`作为参数传入 DataLoader.jar）：

```
set classpath=C:\salesforce\dataloader\lib\DataLoader.jar
set mainclass=com.salesforce.dataloader.process.ProcessRunner
set confdir=C:\salesforce\dataloader\conf

if [%1]==[]  goto error

call java -cp %classpath% -Dsalesforce.config.dir=%confdir% %mainclass% process.name=ExtractAXAccounts sfdc.extractionSOQL="select Id, Name, Last_AX_Date from  Account where Last_AX_Date > %1"
goto end

:error
echo Error: missing date argument (must be in 'yyyy-mm-ddThh:mm:ssZ' format)
:end 
```

然后，您可以`runDL 2012-01-01T00:00:00Z`从命令行调用以提取所有`Last_AX_Date` 大于 01/01/12 的记录。

# javascript - 在测试间谍的上下文中，存根和模拟之间有什么区别？（茉莉花）

> ID：12071192
> 
> 赞同：4
> 
> 时间：2012-08-22T10:31:32.013
> 
> 标签：javascript, jasmine

我正在阅读这个文档[sinonjs.org](http://sinonjs.org/docs/)，对我来说并不清楚存根和模拟之间的区别。
有人可以用简单的话和一些例子来解释一下存根和模拟之间的区别吗？

PS：
我已经阅读过[什么是模拟和存根（JMock）之间的区别](https://stackoverflow.com/questions/5764981/what-is-the-difference-between-mocks-and-stubs-jmock)，但答案没有例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:41:29.180

我将尝试用几句话来解释：

*   模拟：如果要验证 SUT 中的协作，请使用它。您必须模拟协作者，然后验证协作是否完成。

    ```
    var collaborator = {};
    collaborator.collaboration = sinon.mock();
    SUT.setCollaborator(collaborator);
    SUT.play();
    collaborator.collaboration.verify(); 
    ```

*   stub：如果您的 SUT 需要协作者，请使用它，但测试不是测试协作。

    ```
    var collaborator = {};
    collaborator.collaboration = sinon.stub().returns(1);
    SUT.setCollaborator(collaborator);
    SUT.play(); 
    ```

stubs 和 mocks 下的技术是相似的，不同的是测试的意图。

来自[http://sinonjs.org/docs/#mocks](http://sinonjs.org/docs/#mocks)：

> 模拟带有可能无法通过测试的内置期望。因此，他们强制执行实施细节。经验法则是：如果您不为某些特定调用添加断言，请不要模拟它。请改用存根。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-13T05:55:51.413

以下重要说明将帮助您了解间谍、存根和模拟之间的确切区别：

*   **间谍**，提供有关函数调用的信息，而不影响其行为
*   **Stubs**，类似于间谍，但完全取代了功能。这使得一个存根函数可以做任何你喜欢的事情——抛出一个异常，返回一个特定的值，等等
*   **模拟**，通过结合间谍和存根使替换整个对象更容易

# asp.net - 未读取示例 simpleHangoutApp.xml 文件

> ID：12071195
> 
> 赞同：0
> 
> 时间：2012-08-22T10:31:48.917
> 
> 标签：asp.net, iis, hangout

我可以`google +Hangout`在本地 PC 上运行该应用程序吗？我已下载`simpleHangoutApp.xml`文件并在本地 PC`IIS`服务器上发布。当我浏览（在 Firefox 中）时，它只显示`XML`标签。您能否告诉我如何`+hangout`在本地 PC`IIS`服务器上发布应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:51:55.603

环聊应用需要在环聊内的 Google 服务器上运行。要发布您的应用，请按照[Google+ 开发者](https://developers.google.com/+/hangouts/publishing)网站上的说明进行操作。

# android - 滚动时列表项的位置发生变化

> ID：12071196
> 
> 赞同：1
> 
> 时间：2012-08-22T10:32:03.810
> 
> 标签：android, listview

我有以下代码，我在其中进行 JSON 解析并在列表视图中显示结果。我面临的问题是每当我滚动列表视图时，我的列表视图内容位置都会发生变化。如果住宿位于列表中的第一项，当我向下滚动时，我可以再次看到住宿作为列表中的最后一项或任何其他位置。我的日志猫显示正确的结果，但不是列表视图。我没有找到我出错的地方，为什么我的列表没有显示正确的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:52:58.417

尝试遵循 viewHolder 模式，如下所示

```
 ViewHolder holder;
        if(convertView == null) 
        {
             holder = new ViewHolder();            
             convertView = mInflater.inflate(R.layout.cat_content, null);

             holder.name =  (ImageView)convertView.findViewById(R.id.name); 
             convertView.setTag(holder);
        }
        else
        {     
            holder = (ViewHolder) convertView.getTag();     
        } 

        item = new HashMap<String, String>();
        item = data.get(position);
        holder.name.setText(item.get(CATEGORY_NAME));

        return convertView;

class ViewHolder
{
     TextView name;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:52:21.600

如果对您有帮助，请像这样更改您的 getView..

```
public View getView(int position, View convertView, ViewGroup parent) {

    if (convertView == null) {
        convertView = inflater.inflate(R.layout.cat_content, null);
     }

     name = (TextView) convertView.findViewById(R.id.name);
     item = new HashMap<String, String>();
     item = data.get(position);
     name.setText(item.get(CATEGORY_NAME));

    return convertView;
} 
```

# objective-c - 将相同的枚举成员装箱会在传递给方法时产生更大的整数

> ID：12071200
> 
> 赞同：7
> 
> 时间：2012-08-22T10:32:10.237
> 
> 标签：objective-c, clang, boxing, objective-c-literals

我正在使用 Clang 的原始装箱功能将枚举成员打包到`NSNumber`

Clang 文档的[Boxed Enums 部分](http://clang.llvm.org/docs/ObjectiveCLiterals.html#objc_boxed_expressions)对此表示编译器将枚举成员装箱为整数，除非指定了类型。

有趣的是，根据我将枚举成员传递给方法的方式，我得到不同大小的整数。我已经能够将案例隔离到以下代码

```
typedef enum _MyEnum {
    MyEnumMember1 = 1000
} MyEnum;

- (void)testEnumerationBoxing
{
    NSNumber *numberA = [self testA];
    NSNumber *numberB = [self testB:MyEnumMember1];

    CFNumberType numberTypeA = CFNumberGetType((__bridge CFNumberRef) numberA);
    CFNumberType numberTypeB = CFNumberGetType((__bridge CFNumberRef) numberB);
    NSLog(@"CF Number type for A: %lu; B: %lu", numberTypeA, numberTypeB);
}

- (NSNumber *)testA
{
    return @(MyEnumMember1);
}

- (NSNumber *)testB:(MyEnum)enumMember
{
    return @(enumMember);
} 
```

控制台输出是

> A 的 CF 编号类型：3；乙：4

（第一个是`kCFNumberSInt32Type`，第二个是`kCFNumberSInt64Type`）

如果我将声明更改为，`typedef enum _MyEnum : int`我看到两者的结果相同：`kCFNumberSInt32Type`.

为什么两种装箱方法的整数大小不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T18:49:56.477

我认为这种情况在您提供的链接中有所描述：

> 对 enum 类型的值进行装箱会产生一个 NSNumber 指针，该指针具有根据 enum 的底层类型的创建方法，可以是固定的底层类型，也可以是编译器定义的整数类型，能够表示 enum 的所有成员的值枚举：
> 
> ```
> typedef enum : unsigned char { Red, Green, Blue } Color;
> Color col => Red;
> NSNumber *nsCol = @(col); // => [NSNumber numberWithUnsignedChar:] 
> ```

但是图书馆中促销的细节没有涉及，这就是引入期望差异的地方。

`-testA`最终打电话`+[NSNumber numberWithInt:]`

`-testB`最终打电话`+[NSNumber numberWithUnsignedInt:]`

因此，您看到的抽象“提升”是因为`CFNumber`（因此`NSNumber`）此时实际上不支持无符号值（参见`CFNumberType`枚举常量）——根据您看到的输出，然后假设`NSNumber`实现只是提升到下一个有符号在构造函数的无符号初始化程序的情况下能够表示所有值的类型 - 显然没有测试该值以查看是否可以应用任何“宽度最小化”。

当然，`NSNumber`声明了将无符号类型作为参数的构造函数和初始化器，但无符号整数的内部表示实际上存储为有符号整数表示。

将装箱文字提升为`NSNumber`. 例如，`uint16_t`类型化的枚举将存储为 32 位 int（via `numberWithUnsignedShort:`），而 int32_t 也是 32 位 int（via `numberWithInt:`）。虽然在`-testA`值的情况下也是已知的，所以也可以在那里调用更合适的构造函数——所以编译器只是基于类型而不是类型和值来最小化宽度。当枚举的类型未指定或指定为无符号类型时，您可能会看到这样的促销活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T15:37:36.413

> 枚举（enum）常量的一个问题是它们的数据类型经常是不确定的。换句话说，枚举常量是不可预测的 unsigned int。

看看[http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Cocoa64BitGuide/64BitChangesCocoa/64BitChangesCocoa.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Cocoa64BitGuide/64BitChangesCocoa/64BitChangesCocoa.html)

我希望这有帮助！

# iphone - 如何使用jsonkit将数据数组转换为json？

> ID：12071205
> 
> 赞同：0
> 
> 时间：2012-08-22T10:32:30.227
> 
> 标签：iphone, ios

我得到这样的 NSString

```
 [Hello] [;]
 [hi] [;]
 [Its there] [;]
 [Welcome] [;]
 [Hello] [;] 
```

我想转换为 json 格式，我不知道如何将数据数组转换为 json。请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:37:15.853

您需要使用以下代码。

```
NSDictionary *dict = [myJsonString JSONValue]; 
```

如果它不起作用，请使用以下

```
// 
// we begin with our string in json format
//
NSString *jsonString = [[NSString alloc] initWithString:@"{\"1\":\"1: Rossy Robinson - $25\",\"2\":\"7: Davey Ambrose - $25\",\"3\":\"14: Ross Robinson - $25\"}"];

//
// convert the json string to an NSMutableDictionary
//
NSError *e;
NSMutableDictionary *JSONdic = [NSJSONSerialization JSONObjectWithData: [jsonString dataUsingEncoding: NSUTF8StringEncoding] options: NSJSONReadingMutableContainers error: &e];

//
// change a value and add a new value in the dict
//
NSLog(@"before: object for key 1 is: %@", [JSONdic objectForKey:@"1"]);
[JSONdic setObject:@"xxx" forKey:@"1"];
[JSONdic setObject:@"Phil McQuitty" forKey:@"2"];

//
//convert dictionary object to json data
//
NSData* jsonData = [NSJSONSerialization dataWithJSONObject:JSONdic options:NSJSONWritingPrettyPrinted error:&e];

//
// convert the json data back to a string
//
NSString *jsonText = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];\

//
// print out the final results
//
NSLog(@"back to string: %@", jsonText); 
```

# ios - iOS JSON Parse 不工作（返回空字典）

> ID：12071207
> 
> 赞同：9
> 
> 时间：2012-08-22T10:32:35.670
> 
> 标签：ios, json, parsing, nsjsonserialization

我使用`NSJSONSerialization`'s`JSONObjectWithData:data options: error:`来解析从服务器返回的 JSON 数据。

现在对于我使用的选项参数：`NSJSONReadingAllowFragments`. 您可以在下面查看实际的 JSON（我认为问题出在哪里）。

**我得到的错误信息是：**

> 错误域 = NSCocoaErrorDomain 代码 = 3840“操作无法完成。（可可错误 3840。）”（字符 0 周围的值无效。） UserInfo = 0x6895da0 {NSDebugDescription = 字符 0 周围的值无效。}

知道如何解决吗？

**JSON =**

```
{"name":"Johan Appleseed",
"email":"j.appleseed@emuze.co",
"phone":"+4121876003",
"accounts":{
    "facebook":[true,1125],
    "twitter":[false,null],
    "homepage":[true,"http:\/\/johnAplleseed.com\/index.html"]}} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-22T11:21:36.870

可能你有一些你看不到的不可打印的字符。尝试这个：

```
NSData *jsonData = ...
const unsigned char *ptr = [data bytes];

for(int i=0; i<[data length]; ++i) {
  unsigned char c = *ptr++;
  NSLog(@"char=%c hex=%x", c, c);
} 
```

验证您在数据的开头或结尾没有不可打印的字符。

编辑：澄清一下，只需在您的 JSON 字典上运行上述内容 - 无法解析的字典。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T08:46:31.150

我实际上发现问题在于从 URL 返回的事实是一个 HTML 页面，所有这些 html、head 和 body 标记都围绕着实际响应，因此无法解析。这是关于如何从响应中删除 HTML 标记（在它已更改为字符串之后）的一个很好的问答：[Remove HTML Tags from an NSString on the iPhone](https://stackoverflow.com/questions/277055/remove-html-tags-from-an-nsstring-on-the-iphone/4886998#4886998)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-24T05:45:10.967

我有一段时间遇到同样的问题，我只是想如果我从网页中提取数据，比如说 PHP 页面，那么该页面中不应该有任何 HTML 标签。所以像这样的结构：

```
<html>
<body>
<?php

?>
</body>
</html> 
```

会毁了你的结果。把它变成：

```
<?php

?> 
```

为我工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-05T06:08:02.300

**一种方法是，您可以通过 post 请求解析 jsondata**

```
 -(void)callWebserviceList
 {
spinner.hidden=NO;

NSString *bodyData = @"code_request=monuments_list&asi_id=1";

NSMutableURLRequest *postRequest = [NSMutableURLRequest requestWithURL:[NSURL   URLWithString:@"http://asicircles.com/server_sync.php"]];

// Set the request's content type to application/x-www-form-urlencoded
[postRequest setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];

// Designate the request a POST request and specify its body data
[postRequest setHTTPMethod:@"POST"];
[postRequest setHTTPBody:[NSData dataWithBytes:[bodyData UTF8String] length:strlen([bodyData UTF8String])]]; 
```

connection1 = [NSURLConnection connectionWithRequest:postRequest delegate:self];

```
if(connection1 !=nil)
{
    ////NSLog(@"%@",postRequest);
} 
```

}

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {

if ([connection isEqual:connection1 ])
{
     [responseData setLength:0];

}else if ([connection isEqual:connection2 ])
{
     [responseData1 setLength:0];
} 
```

} - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {

```
 if ([connection isEqual:connection1 ])
  {
    [responseData appendData:data];

}else if ([connection isEqual:connection2 ])
{
     [responseData1 appendData:data];
}

//**check here for responseData & also data** 
```

}

```
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
NSLog(@"%@",[NSString stringWithFormat:@"Connection failed: %@", [error description]]);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
if ([connection isEqual:connection1 ])
{
    spinner.hidden=YES;
    NSError *error;

    NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];

    NSMutableArray *arrdata=[json objectForKey:@"message"];
    NSLog(@"code is%@", json);

    for (int i=0; i< arrdata.count; i++)
    {
        [arrDetails addObject:[[arrdata objectAtIndex:i]objectForKey:@"details"]];
        [arrImageUrl addObject:[[arrdata objectAtIndex:i]objectForKey:@"image"]];
        [arrLat addObject:[[arrdata objectAtIndex:i]objectForKey:@"lat"]];
        [arrLongi addObject:[[arrdata objectAtIndex:i]objectForKey:@"longi"]];
        [arrName addObject:[[arrdata objectAtIndex:i]objectForKey:@"name"]];
        [arrLoc addObject:[[arrdata objectAtIndex:i]objectForKey:@"location"]];
        [arrID addObject:[[arrdata objectAtIndex:i]objectForKey:@"id"]];

        NSLog(@"code is%@",[[arrdata objectAtIndex:i]objectForKey:@"details"]);
        NSLog(@"code is%@",[arrImageUrl objectAtIndex:i]);

    }

    if (arrName.count > 0)
    {
        [self addscrollView];
    }

}else if ([connection isEqual:connection2 ])
{

}

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-12T22:59:55.567

已经有一段时间了，但打印数据的更简单方法是：

> NSLog(@"%@", [[NSString alloc] initWithData:数据编码:NSUTF8StringEncoding]);

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-05T06:18:36.403

**您还可以在 ios 中按块点击 json 数据的 url**

```
 #define kBgQueue dispatch_get_global_queue(
 DISPATCH_QUEUE_PRIORITY_DEFAULT, 0) //1
#define kLatestKivaLoansURL [NSURL URLWithString: 
 @"http://api.kivaws.org/v1/loans/search.json?status=fundraising"] //2 
```

**我们需要做的第一件事是从网上下载 JSON 数据。幸运的是，使用 GCD，我们可以在一行代码中做到这一点！将以下内容添加到 ViewController.m：**

```
- (void)viewDidLoad
{
[super viewDidLoad];

dispatch_async(kBgQueue, ^{
    NSData* data = [NSData dataWithContentsOfURL: 
      kLatestKivaLoansURL];
    [self performSelectorOnMainThread:@selector(fetchedData:) 
      withObject:data waitUntilDone:YES];
});
}
- (void)fetchedData:(NSData *)responseData {
//parse out the json data
NSError* error;
NSDictionary* json = [NSJSONSerialization 
    JSONObjectWithData:responseData //1

    options:kNilOptions 
    error:&error];

NSArray* latestLoans = [json objectForKey:@"loans"]; //2

NSLog(@"loans: %@", latestLoans); //3
} 
```

# jquery - 在适用于 iDevices 和所有其他桌面浏览器的 Web 应用程序中实现拖放

> ID：12071211
> 
> 赞同：2
> 
> 时间：2012-08-22T10:32:46.497
> 
> 标签：jquery, ipad, html, jquery-ui, drag-and-drop

我有一个 webapp，它也将在 iDevices 的浏览器上运行。该网页由 4 个 portlet 组成。我需要实现一个可以拖放portlet 的功能。我需要捕获哪些事件，因为它们应该适用于所有iDevice。我应该通过 jquery 还是使用 HTML5 元素来实现它。我遇到了一些插件，比如 redplugin，它可以帮助我做一个交换动画，但它无法在 iPads Safari 浏览器上运行。这就是我的意思， http: [//interface.eyecon.ro/demos/sort_floats.html](http://interface.eyecon.ro/demos/sort_floats.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:30:56.653

由于您使用的是 jQuery UI，您可以尝试**jQuery UI Touch Punch** ( [http://touchpunch.furf.com/](http://touchpunch.furf.com/) )

它就像是 jQuery UI 最“经典”使用的魅力，包括所有的拖动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:31:08.977

看看这个插件/黑客`jQuery UI`：

[jQuery.touchPunch](http://touchpunch.furf.com/)

他将触摸支持添加到`jQuery UI`鼠标事件中，例如`Drag&Drop`.

# php - 如何检查 SimpleHTMLDom 元素是否不存在

> ID：12071213
> 
> 赞同：6
> 
> 时间：2012-08-22T10:32:55.407
> 
> 标签：php, if-statement, simple-html-dom

SimpleHtmldom 可用于提取具有 class 的第一个元素的内容`description`。

```
$html = str_get_html($html);
$html->find('.description', 0) 
```

但是如果这个类不存在，PHP 会抛出一个错误

`Trying to get property of non-object`

我试过

```
if(!isset($html->find('.description', 0))) {
    echo 'not set';
} 
```

和

```
if(!empty($html->find('.description', 0))) {
    echo 'not set';
} 
```

但两者都给出了错误

```
Can't use method return value in write context 
```

**检查元素是否存在的正确方法是什么？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T10:36:34.120

```
if(($html->find('.description', 0))) {
    echo 'set';
}else{
    echo 'not set';
} 
```

[http://www.php.net/manual/en/control-structures.if.php](http://www.php.net/manual/en/control-structures.if.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:43:21.040

根据[SimpleHtmlDOM Api](http://simplehtmldom.sourceforge.net/manual_api.htm) str_get_html($html) 需要一个字符串作为输入。首先使用 html 验证器检查您的代码是否格式正确。

```
$htmlObj = str_get_html($html);
if (!is_object($htmlObj)) return; // catch errors 

// or wrap further code in 
if (is_object($htmlObj)) { /* doWork */ } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-09T16:30:43.063

```
$avalable = ($element->find('span.sold-out-text', 0)) ? 1 : 0; 
```

它对我**有用**。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-08-11T11:25:33.393

对我来说，上述解决方案都没有奏效，最后我像这样检查

```
$html = str_get_html($html);

if($html){
    //html found
}else{
    //html not found
} 
```

# c# - c#中数据集的水晶报表中的空报表？

> ID：12071224
> 
> 赞同：0
> 
> 时间：2012-08-22T10:33:30.767
> 
> 标签：c#, sql-server, crystal-reports-2010

我正在研究水晶报表，我正在使用 c# 中的数据集，我通过向导创建它们，然后我选择水晶报表并通过相同的数据集创建一个报表，并编写以下代码。

```
 String temp = "c:\\a.pdf";

    DataSet1 ad = new DataSet1();

    ReportDocument d = new ReportDocument();

    d.Load("c:\\CrystalReport2.rpt");

    d.SetDataSource(ad.Tables[0]);

    d.Refresh(); 
```

在表 [0] 我的员工表位于。问题是我得到的是空的报告。虽然我的表中几乎填满了记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:30:47.583

我实际上自己解决了这个问题。我缺少在填充它们时必须发送到数据集的表名。由于数据集名称和提供的名称不同，无法获取它们的表，因此报告为空。

# touch - 是否可以在 YUI 3.6.0 上模拟 touchevent？

> ID：12071226
> 
> 赞同：1
> 
> 时间：2012-08-22T10:33:34.843
> 
> 标签：touch, yui, simulation

在旧版本的 YUI 中，无法模拟 touchevent (touchstart/touchmove/touchend)，我们可以在 yui 官方网站上看到：http://yuilibrary.com/yui/docs/event/simulate.html [（](http://yuilibrary.com/yui/docs/event/simulate.html)无触摸活动部分）

但在 YUI 的最新版本（3.6.0）中，似乎可以模拟 touchevent。当您查看此文件时：[http://yuilibrary.com/yui/docs/api/files/event-simulate_js_event-simulate.js.html#l60](http://yuilibrary.com/yui/docs/api/files/event-simulate_js_event-simulate.js.html#l60)，脚本中实现了触摸事件。

如果你看这篇文章：[http](http://www.yuiblog.com/blog/2012/08/10/twiy/) ://www.yuiblog.com/blog/2012/08/10/twiy/ ；YUI 接受关于手势模拟的拉取请求。

但是当我这样做时：

```
 Y.one('mydiv').simulate('touchstart'); 
```

我有这个消息：

```
 Error: simulate(): Event 'touchstart' can't be simulated. Use gesture-simulate module instead. 
```

所以我尝试使用“gesturemovestart”并做

```
 Y.one('mydiv').simulate('gesturemovestart'); 
```

但我有这个消息：

```
Event 'gesturemovestart' can't be simulated 
```

那么，有谁知道是否可以在 YUI 上模拟 touchevent，如果可以，为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:20:20.487

[如果您在 git hub https://github.com/yui/yui3/blob/master/build/event-simulate/event-simulate.js](https://github.com/yui/yui3/blob/master/build/event-simulate/event-simulate.js)上引用来自 yui3 的 event-simulate.js ， 评论的第 725 行说 touchevents期望参数 touchList[代表与此事件关联的所有触摸的触摸对象的集合]。因此，如果您尝试类似于 Y.one("#myDiv").simulate("touchstart", { touches: {PageX: 200, PageY: 200} });

它应该模拟 touchstart 事件。

由于触摸和手势事件在 iOS（2.0 及更高版本）上可用，因此测试应该在 ios 设备上成功通过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:54:55.457

我终于找到了答案。

你可以做 Y.one("#myDiv").simulate("touchstart", { touches: {PageX: 0, PageY: 0} }); 但仅适用于 Android 和 iOs 系统，这适用于我的脚本（在平板电脑和智能手机上运行）。

您必须更新到 YUI 3.6.0。，如果你想使用它。

如果您参考这篇文章：http: [//yuilibrary.com/forum/viewtopic.php](http://yuilibrary.com/forum/viewtopic.php?f=18&t=10521) ?f=18&t=10521 ，手势模拟将在 YUI 下一个版本 3.6.1 中实现。

# android - Android APP通过USB控制PC????i

> ID：12071227
> 
> 赞同：2
> 
> 时间：2012-08-22T10:33:34.963
> 
> 标签：android, connection, usb

我们目前开发了一个通过 UDP 控制大型多媒体安装的 Android 应用程序。现在安装应该在没有WIFI的环境下运行！安全！！！

我可以通过 USB 与计算机建立任何网络连接吗？在调试模式下，我有来自 Eclipse 的连接......如果有人可以在这里帮助我......我

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:37:51.387

adb 基本上是远程登录到您的设备。（日食使用什么）

因此，您可以打开端口并将其从您的计算机转发到您的设备。

[亚行](http://developer.android.com/tools/help/adb.html#forwardports)文档可能会有所帮助。但他们没有提到UDP。希望可能会让你朝着正确的方向前进。

# c# - 为什么在 ASP.NET Ajax 更新面板中任何操作 javascript 元素停止工作后？

> ID：12071235
> 
> 赞同：0
> 
> 时间：2012-08-22T10:34:19.597
> 
> 标签：c#, javascript, jquery, asp.net, ajax

我正在用 ASP.NET 用 C# 编写一个 Web 应用程序。为了性能，我想插入一个`UserWebControl`来`Update panel`启用 AJAX。

同样`UserWebControl`，我有一个由 jQuery 提供支持的菜单。当页面加载时，菜单工作正常，但在 中的一些服务器端操作后`Update Panel`，菜单和其他基于 javascript 的控件停止工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:50:31.853

试试这个：

```
<script type="text/javascript">
    function pageLoad() {
        //your jquery goes here
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:18:31.027

我不完全理解这个问题，但我想在页面加载后你正在执行一些 JavaScript 函数。然后，当您使用 asp.net UpdatePanel 更新您的 UserControl 时，它实际上正在再次加载，那么您需要再次执行您的 JavaScript 函数......

# java - 为什么在java中使用接口

> ID：12071237
> 
> 赞同：-2
> 
> 时间：2012-08-22T10:34:24.497
> 
> 标签：java

> **可能重复：**
> [Java 接口？](https://stackoverflow.com/questions/416331/java-interfaces)

我不是 Java 的最新成员，但其中有一件事我至今无法理解，接口解决的目的到底是什么？我知道为了用java附加多重继承，可以使用它，但这不应该是灵魂的原因。接口的大多数其他目标都可以由抽象类来实现。即使是书籍也没有给出足够的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:41:26.507

接口不提供类的多重继承。虽然接口可以扩展多个其他接口。

接口类似于合同。例如，您是一类名为 Human 的对象。然后，您有多个合同要履行，这些合同并非对所有 Human 对象都通用。比如你支付手机合约，给老婆做饭等等。

接口只是告诉你对象被契约为你做什么。正如 Class 所定义的那样。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:48:46.290

> 我知道为了用java附加多重继承，可以使用它，但这不应该是灵魂的原因

***为什么你可以拥有多个接口继承***这一事实对你来说不是一个真正重要的解决方案，你没有解释。
除了这个**非常重要的事实**（这有助于 Java 不存在菱形[问题](http://en.wikipedia.org/wiki/Multiple_inheritance#The_diamond_problem)`C++`）——*你*认为这没什么大不了的——它还模拟了对象之间的一种不同类型的关系。
一个`abstract`类将用于对`is-a`关系建模。通过该接口，您可以对`has-a`关系捕获*组合*进行建模，并且您还可以在类之间组合常见的功能，否则这些功能将彼此无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:45:28.933

我给你一个使用接口的小例子。

我有一个`Company`包含一个`ArrayList<Employee> employees` 和一个函数的类，`giveRaise()`它通过增加员工的薪水来提高员工的工资。

现在想象一下`Employee`，我有三个班级`Manager`，而不是`SalesPerson`，，，他们都得到了加薪，但每个班级都不同。`Developer`

您认为您可以创建一个名为 Employee 的超类，但您不想创建相同的方法 giveRaise()，并且您不想对 giveRaise() 进行默认处理。

所以你需要做的是每次你创建一个继承自`Employee`你想要**强制**它实现函数 giveRaise 并定义它的类（如开发人员编写一个新类）。

这就是接口派上用场的地方。当然，您可以使用抽象类。但是一个接口你仍然可以从另一个类继承。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T10:36:03.013

定义`Type`接口是最好的选择。`4-Classes And Interfaces`从阅读章节`Effective Java`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T10:46:20.417

由于它是通用接口的最大优势，您可以开发更自主的程序部分，因为在接口上您有某种合同需要实现，并且您可以依赖它会在那里您使用（在程序的其他部分）。

# php - iPhone 应用程序和第三台服务器中的 FB 身份验证

> ID：12071241
> 
> 赞同：0
> 
> 时间：2012-08-22T10:34:41.423
> 
> 标签：php, ios, authentication, restful-authentication

我的公司正在开发一个系统，其工作原理如下：

有一个 iphone/移动应用程序和一个提供休息服务的 php 服务器。

在移动应用程序中，用户可以通过两种方式注册/登录：

1.  用户名/密码对
2.  脸书账号

虽然第 1 点很清楚，但我对第 2 点有困难：

据我了解，顺序应该如下所示：

1 - 应用程序向 fb 发送用户数据，然后 fb 以某种我不在乎的方式对用户进行身份验证并回答“好的，是你”。2-应用程序现在必须向 php 服务器请求一些用户数据。

用户在应用程序中使用 fb 登录后，如何验证服务器和应用程序之间的通信？

我不能只问“向我发送用户 fbid 的数据”，因为任何人都可以检索到一个简单的请求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T12:19:39.637

这就是您使用“密钥”（Facebook 设置的一部分）的原因。

当用户通过您的应用程序登录时，他们同意与您的应用程序共享信息并获得一个令牌 - 该令牌是一个会话 ID。该会话 ID 只能由该用户从该手机与您的应用程序一起使用 - 除非您拥有“密钥”。

然后电话将该会话 ID 传递给服务器。

然后服务器将令牌连同密钥一起传递，Facebook 将向服务器返回与手机用户相同的信息。这就是它的身份验证方式。

没有密钥的其他任何人（除了手机上的用户），令牌都是无用的。

# javascript - 尊重 HTML 显示中 API 响应返回的“\n”换行符（和特殊字符）

> ID：12071243
> 
> 赞同：2
> 
> 时间：2012-08-22T10:34:42.220
> 
> 标签：javascript, html, sinatra, newline

我正在通过返回以下格式的字符串的 API 访问数据：

> 您好，这是一些文本。\n\n这里还有一些包含“引号”中的短语。\n\n还有另一件事：\n\n* 项目符号。\n* 项目符号。\n* 项目符号.\n* 鳍。

这是一个 sinatra 应用程序，在我看来，我只需访问变量并使用以下内容显示它：

```
<%= thing.description %> 
```

当它被渲染时，实际上并没有尊重任何换行符。它全部显示为一行。我不确定解决这个问题的正确方法。有没有办法用标签替换`\n`s ？`<br>`或者是其他东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T10:37:51.393

您可以将字符串包含在一个`<pre>`块中（通常具有使用等宽字体的附加效果），或者您可以将其包含在您选择的块中并使用`white-space: pre;`.

# jakarta-ee - 连贯性：BackingMap 不可重置

> ID：12071244
> 
> 赞同：2
> 
> 时间：2012-08-22T10:34:47.273
> 
> 标签：jakarta-ee, distributed-computing, distributed-caching, oracle-coherence

我正在尝试以分布式模式设置一个 4 节点 Coherence 集群（其他配置基本上是默认配置），然后关闭其中一个节点并观察它如何平衡其余节点。对于我使用的关机

```
CacheFactory.destroyCache(myCache);
CacheFactory.shutdown(); 
```

应该关闭的节点一直在写：

```
Logger@9217551 3.7.1.0) (thread=DistributedCache, member=n/a): Remains to transfer before shutting down: 504 primary partitions, 0 backup partitions 
```

但另一个节点（或有时更多）抛出此异常：

```
java.lang.IllegalArgumentException: BackingMap is not resettable: x
  at com.tangosol.net.DefaultConfigurableCacheFactory$Manager.setBackingMap(DefaultConfigurableCacheFactory.java:4163)
  at com.tangosol.net.DefaultConfigurableCacheFactory$Manager.instantiateBackingMap(DefaultConfigurableCacheFactory.java:4114)
  at com.tangosol.coherence.component.util.daemon.queueProcessor.service.grid.partitionedService.PartitionedCache$Storage.instantiateBackingMap(PartitionedCache.CDB:22)
  at com.tangosol.coherence.component.util.daemon.queueProcessor.service.grid.partitionedService.PartitionedCache$Storage.setCacheName(PartitionedCache.CDB:25)
  at com.tangosol.coherence.component.util.daemon.queueProcessor.service.grid.partitionedService.PartitionedCache.ensureStorage(PartitionedCache.CDB:5)
  at com.tangosol.coherence.component.util.daemon.queueProcessor.service.grid.partitionedService.PartitionedCache.receivePartition(PartitionedCache.CDB:11)
  at com.tangosol.coherence.component.util.daemon.queueProcessor.service.grid.PartitionedService.onFinalizePrimaryTransfer(PartitionedService.CDB:141)
  at com.tangosol.coherence.component.util.daemon.queueProcessor.service.grid.PartitionedService$Continuations$Continuation.proceed(PartitionedService.CDB:10)
  at com.tangosol.coherence.component.util.daemon.queueProcessor.service.grid.partitionedService.PartitionedCache$EventsHelper.onEntriesArrived(PartitionedCache.CDB:42)
  at com.tangosol.coherence.component.util.daemon.queueProcessor.service.grid.partitionedService.PartitionedCache$TransferControl.onReceiveStarted(PartitionedCache.CDB:19)
  at com.tangosol.coherence.component.util.daemon.queueProcessor.service.grid.PartitionedService.onTransferRequest(PartitionedService.CDB:76)
  at com.tangosol.coherence.component.util.daemon.queueProcessor.service.grid.PartitionedService$TransferRequest.onReceived(PartitionedService.CDB:1)
  at com.tangosol.coherence.component.util.daemon.queueProcessor.service.Grid.onMessage(Grid.CDB:34)
  at com.tangosol.coherence.component.util.daemon.queueProcessor.service.Grid.onNotify(Grid.CDB:33)
  at com.tangosol.coherence.component.util.daemon.queueProcessor.service.grid.PartitionedService.onNotify(PartitionedService.CDB:3)
  at com.tangosol.coherence.component.util.daemon.queueProcessor.service.grid.partitionedService.PartitionedCache.onNotify(PartitionedCache.CDB:3)
  at com.tangosol.coherence.component.util.Daemon.run(Daemon.CDB:42)
  at java.lang.Thread.run(Thread.java:662) 
```

我发现实际上`PartitionedCache$Storage`还没有设置它的缓存名称（`getCacheName()`在这个对象上返回 null） - 这很糟糕，因为我不想实例化另一个支持映射 - 但我完全不知道是什么原因造成的以及我应该如何配置它。

感谢任何（有用的）回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T16:42:16.967

好的，我找到了。我正在使用 CacheFactory.destroyCache(...) 这会导致集群范围的缓存关闭。当我使用 CacheFactory.releaseCache(...) 然后 CacheFactory.shutdown() 它做了它应该做的。

# ocean - Petrel 2011 DialogBu ilder.ShowSettings 进程

> ID：12071248
> 
> 赞同：0
> 
> 时间：2012-08-22T10:34:58.460
> 
> 标签：ocean, petrel

更新：进程需要首先设置为活动对象。新的问题是如何做到这一点。

```
PetrelSystem.ActiveObjectService.GetActiveObject<Process>() 
```

上面的调用不起作用。是否有另一种方法来设置进程的活动对象？流程树中的流程似乎没有一种类型，所以我怀疑任何使用泛型的东西都可以工作。

老问题：我在使用 API 调用 DialogBu​​ilder.ShowSettings(object domainObject) 启动进程设置对话框时遇到问题。它似乎适用于导入数据过程，但我无法让它启动任何其他对话框。

我尝试遍历进程树以获取进程域对象，并尝试使用 PetrelSystem.ProcessDiagram.FindProcess(string name) 来获取进程。两者在传递到 DialogBu​​ilder.ShowSettings 时具有相同的结果。

这是 2011 年 API 的已知问题吗？

这就是我遍历树的方式

```
 IObservableElementEnumerableFactory service = CoreSystem.GetService<IObservableElementEnumerableFactory>(PetrelProject.Processes);
 IObservableElementEnumerable elemEnum = service.GetEnumerable(PetrelProject.Processes);

        indentLevel++;
        if (elemEnum != null)
        {
            foreach (object obj in elemEnum)
            {
                var cmo = cmoMananeger.CreateCMO(obj, addText, indentLevel);
                //add it to tree then add its children
                if (cmo != null)
                {
                    if (indentLevel > 0)
                    {
                        comboBox1.Items.Add(cmo);
                        processToCMO.Add(cmo, obj);
                    }
                    traverseTree(obj, indentLevel, addText);
                }
            }
        }
        indentLevel--; 
```

然后尝试在之后启动该过程

```
 var process = processToCMO[comboBox1.SelectedItem as ContextMenuObject];
  if (!PetrelSystem.DialogBuilder.IsSettingsVisible(process))
        PetrelSystem.DialogBuilder.ShowSettings(process); 
```

这就是我尝试通过 find 进程方法启动进程的方式

```
var PROCESS = PetrelSystem.ProcessDiagram.FindProcess((comboBox1.SelectedItem as ContextMenuObject).DisplayText);
        if (PROCESS != null)
        {
            if (!PetrelSystem.DialogBuilder.IsSettingsVisible(PROCESS))
                PetrelSystem.DialogBuilder.ShowSettings(PROCESS);
        } 
```

我使用的方法适用于其他窗格，如输入和模型。它只是有问题的进程窗格。

为帮助干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:17:45.573

`IProcessDiagram.ActiveProcess`属性获取或设置活动进程。

我编写了一个简单的测试来注册`ActiveProcessChanged`事件，当最终用户选择不同的进程时，事件处理程序会显示该进程的设置对话框。这适用于我尝试过的本`~10`机`Petrel`进程。我在 和 上都进行了`2011.2`测试`2012`。

```
PetrelSystem.DialogBuilder.ShowSettings(PetrelSystem.ProcessDiagram.ActiveProcess); 
```

问候， 德莱娜

# gwt - gwt中有文件夹上传的实现方法吗？

> ID：12071250
> 
> 赞同：0
> 
> 时间：2012-08-22T10:35:02.363
> 
> 标签：gwt, file-upload, directory

我想要 gwt 中的文件夹上传实用程序。目前我可以使用文件上传 -

```
FileUpload upload = new FileUpload();
upload.setName("upload"); 
```

因此，当出现对话框（用于选择文件）时，它不会选择文件夹而是打开它，因为它搜索文件。

我们是否有任何实现或操作，以便直接上传文件夹而不是打开文件夹？或者是否有任何文件夹上传小部件，如文件上传小部件或类似的小部件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:02:22.740

在 WebKit（Chrome、Safari）上，您可以使用：

```
upload.getElement().setPropertyBoolean("webkitdirectory", true); 
```

目前没有可移植的上传文件夹的解决方案，除了要求用户先压缩它（从而上传单个文件），或者依赖插件（Flash、Java、Silverlight 等）

# sorting - MIPS 归并排序递归

> ID：12071251
> 
> 赞同：0
> 
> 时间：2012-08-22T10:35:03.153
> 
> 标签：sorting, merge, mips

我需要为合并排序编写 MIPS 汇编语言代码。我已经创建了合并函数，但是使用递归的 merge_sort 函数让我很困惑。我已经发布了相同的参考 C 代码。我知道必须使用堆栈，但是，作为初学者自己无法做到这一点，我将不胜感激。

```
int merge_sort(int arr[],int low,int high)
{
  int mid;
  if(low<high) {
mid=(low+high)/2;
// Divide and Conquer
merge_sort(arr,low,mid);
merge_sort(arr,mid+1,high);
// Combine
merge(arr,low,mid,high);
 }

 return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:40:54.203

为什么不从下往上走，第一`merge`对单例，然后是已经排序的 2 长度子数组对，然后是 4 长度子数组对，等等，`log n`在一个循环中通过同一个数组？

剩下的问题是实施`merge`。它将被重复调用，但不会递归调用。这`merge`当然必须将其输出写回到输入区域上的数组中，也许制作其输入的临时副本以进行处理。

```
void mrgsort( int a[], int n) // pseudo-code
{
    if( n < 1 ) return;
    int s1 = 1, s2 = 2;
    do
    {
        int i, k = n/s2, p1=0, p2=s1;
        for( i=0; i<k; ++i, p1+=s2, p2+=s2 )
        {
            merge(p1, p2); // merge chunks of size s1
        }
        //  deal with the edge ...
        if( i > 0 )
        {
            if( p2 < n ) merge_edge(p1,p2,n); // 2nd chunk shorter
        }
        s1 = s2;
        s2 = s2*2;
    } while( s2 <= n )
    if( s1 < n )
        merge_edge(0,s1,n);                   // 2nd chunk shorter
} 
```

没有递归，只有一个循环。

# c - 对为什么这部分代码是必要的感到困惑？

> ID：12071252
> 
> 赞同：0
> 
> 时间：2012-08-22T10:35:11.187
> 
> 标签：c, polar-coordinates

以下是将笛卡尔坐标转换为极坐标的代码。else if 语句 (y>0) = pi/2 else -pi/2 ... 这两行的相关性是什么？当然，您只需要 theta = atan(y/x) 和 r = sqrt(x^2 + y^2) 来确定正确的 theta 和 r？当我进入调试并放置检查点以查看代码如何运行时，似乎这部分也从未使用过......

有人可以阐明这些行的相关性吗？

谢谢。

这是应用程序的代码；

```
 void cartesianToPolar (float x, float y, double *rPtr, double *thetaPtr)
{
    //store radius in supplied address - calc for r
    *rPtr = sqrt(x * x + y * y);

    //calc theta
    float theta;
    if (x == 0.0) {
        if (y== 0.0) {
            theta = 0.0;
        } else if ( y > 0){
        theta = M_PI_2;
    } else {
        theta = -M_PI_2;
    }
    }else{
        theta = atan(y/x);
    }
        //store theta in address
        *thetaPtr = theta;
    }
int main (int argc, const char * argv[])
{
    double pi = 3.14;
    double integerPart;
    double fractionPart;

    // Pass add of integerPart as argument
    fractionPart = modf(pi, &integerPart);
    // Find value stored in intpart
    printf("integerPart = %.0f, fractionPart = %.2f\n", integerPart, fractionPart);

    double x = 3.0;
    double y = -4.0;
    double radius;
    double angle;

    cartesianToPolar(x,y,&angle,&radius);
    printf("(%.2f, %.2f) becomes (%.2f radiants, %.2f)\n", x, y, radius, angle);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:40:14.437

这个测试在 x==0 时调用（在这种情况下你不能做 y/x），它决定点是向上还是向下（因此角度是 PI/2 或 -PI/2）。

也许你对糟糕的缩进感到困惑。它应该是 ：

```
if (x == 0.0) {
    if (y == 0.0) {
        theta = 0.0;
    } else if ( y > 0){
        theta = M_PI_2;
    } else {
        theta = -M_PI_2;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:39:17.283

如果 x 等于 0 语句

```
theta = atan(y/x); 
```

将除以零例外。

# javascript - 打开除域之外的所有在新选项卡中打开的外部链接

> ID：12071254
> 
> 赞同：13
> 
> 时间：2012-08-22T10:35:38.677
> 
> 标签：javascript, jquery, html, url

我正在尝试在新窗口中打开网站上的所有外部链接。然而，该站点有 2 个版本，例如商店和主站点。例如，在主站点上，我们可能有指向[http://store.example.com](http://store.example.com)的链接。

我这里有一些代码，可以让我在新窗口中打开所有外部链接。但是，我希望能够排除某些域。就像我上面提到的那个。

这是代码：

```
$(document).ready(function() {
   $("a[href^=http]").each(function(){
      if(this.href.indexOf(location.hostname) == -1) {
         $(this).attr({
            target: "_blank",
            title: "Opens in a new window"
         });
      }
   })
}); 
```

我是 JS / jQuery 的新手，所以任何额外的信息都会很棒。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-22T10:44:05.927

要以编程方式触发点击，您可以执行以下操作：

```
$(document).ready(function() {

   $("a[href^=http]").each(function(){

      // NEW - excluded domains list
      var excludes = [
         'excludeddomain1.com',
         'excludeddomain2.com',
         'excluded.subdomain.com'
      ];
      for(i=0; i<excludes.length; i++) {
         if(this.href.indexOf(excludes[i]) != -1) {
            return true; // continue each() with next link
         }
      }

      if(this.href.indexOf(location.hostname) == -1) {

           // attach a do-nothing event handler to ensure we can 'trigger' a click on this link
           $(this).click(function() { return true; }); 

           $(this).attr({
               target: "_blank",
               title: "Opens in a new window"
           });

           $(this).click(); // trigger it
      }
   })
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-05-13T19:23:01.830

如果您只想要所有与您的域名不匹配的链接：

```
var all_links = document.querySelectorAll('a');
for (var i = 0; i < all_links.length; i++){
       var a = all_links[i];
       if(a.hostname != location.hostname) {
               a.rel = 'noopener';
               a.target = '_blank';
       }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T10:44:53.650

您是否能够编辑 HTML 以获得更好的点击事件挂钩？如果我需要分隔内部或外部之间的某些链接，我将在 HTML 元素上应用 rel 值。

```
 <a href="URL" rel="external">Link</a> 
```

然后在你的 javascript

```
 $('a[rel="external"]').click( function(event) {
     event.stopPropagation();
     window.open( $(this).attr('href') );
     return false;
    }); 
```

编辑：看到你已经有很多链接，这个怎么样..

```
 var a = new RegExp('http:\/\/store.blah.com');

    $('a').each(function() {

      if(a.test(this.href)) {
        $(this).click(function(event) {
         event.preventDefault();
         event.stopPropagation();
         window.open(this.href, '_blank');
        });
      }

    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T10:46:47.073

我想我会这样做：

```
 $(document).ready(function() {
      $("a[href^=http]").each(function(){
         if(this.href.indexOf(location.hostname) == -1 && this.href.indexOf("store.domain.com") == -1 && this.href.indexOf("other.domain.rule") == -1) {
            $(this).attr({
               target: "_blank",
               title: "Opens in a new window"
           });
         }
       })
    }); 
```

它有点手动，但是，如果您不想处理拆分字符串和数组，这就是解决方案。我相信这会有所帮助。

编辑：除此之外，您还可以使用 techfoobar 的解决方案来触发链接点击。这将帮助您提高网站性能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T11:43:42.940

与 techfoobar 的回复一样，您可以构建一个应在同一窗口中打开的域列表。尽管使用正则表达式，但您可以以更健壮的方式完成此操作。如果您只是直接进行 indexOf() 检查，您将跳过具有匹配子域但不匹配域的链接，尽管如果您想匹配 href 字符串中的任何位置的名称，您可以省略“$”。

这个实现应该做你想做的事，并且对你需要的代码做最少的修改。

```
$(document).ready(function() {
    //populate this list with whatever domain names you want, the 
    //$ sign matches the end of the string, only top level domains are affected
    var whiteList = [/google.com\/$/, /stackoverflow.com\/$/];

   $("a[href^=http]").each(function(){
      if(this.href.indexOf(location.hostname) == -1) {

        //check if the href of the current link matches any of our patterns
        var href = this.href;
        if(whiteList.filter(function(x){return x.test(href)}).length == 0) {

         $(this).attr({
            target: "_blank",
            title: "Opens in a new window"
         });
        }
      }
   })
}); 
```

在此示例中，所有指向 google.com 和 stackoverflow.com 的链接也将在现有页面中打开。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-14T03:59:14.423

如果您宁愿在 body 上使用事件处理程序而不是更改 dom，我推荐这样的东西......

```
 // open external links in a new tab
  $('body').on('click','a',function(){
    var $a = $(this);
    var href = $a.attr('href');
    if (href.indexOf('/') == 0) return;  // ignore relative links
    var target = $a.attr('target') || "";
    if (target.length > 0) return; // ignore links with a target attribute already
    window.open(href, '_blank');  // open external links in a new tab
    return false;
  }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-04T14:20:37.520

这将为使用 PHP 的所有外部域解决问题

```
$(document).ready(function() {
   $("a[href^=http]").each(function(){

      // NEW - excluded domains list
      var excludes = [
         '<?php echo $_SERVER['HTTP_HOST']; ?>'
      ];
      for(i=0; i<excludes.length; i++) {
         if(this.href.indexOf(excludes[i]) != -1) {
            return true; // continue each() with next link
         }
      }

      if(this.href.indexOf(location.hostname) == -1) {

           // attach a do-nothing event handler to ensure we can 'trigger' a click on this link
           $(this).click(function() { return true; }); 

           $(this).attr({
               target: "_blank",
               title: "Opens in a new window"
           });

           $(this).click(); // trigger it
      }
   })
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-31T05:21:21.747

基于 Collin 在原始 JS 中的回答，这非常好，因为它不需要 Jquery（尽管有 OP 的问题）。我将对其进行修改，使其能够排除当前主机名以外的域：

```
 var all_links = document.querySelectorAll('a');
    var excludes = ['domain1.com','www.domain1.com','domain2.com'];
    for (var i = 0; i < all_links.length; i++){
        var a = all_links[i];
        var found = false; 
        for(j=0; j<excludes.length; j++) {
                if(a.href.includes(excludes[j])) {
                    found = true;
                    break;  
                }
        }    
        if (!found) {
            a.rel = 'noopener'; a.target = 'external';
        }
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-05T11:00:00.757

对不起线程死灵，谷歌把我带到了这里。我有一个类似的问题，并最终解决它是这样的：

```
document.body.addEventListener('click', function (e) {
  if (e.target.tagName !== 'A') return;
  if (e.target.hostname === location.hostname) return;
  if(['stackoverflow.com','someothersite.com'].indexOf(e.target.hostname) !== -1) return; 
  e.preventDefault();
  window.open(e.target.href);
  return false;
}); 
```

# iphone - 为什么输入的文本或字母没有显示在 Iphone 模拟器的 alertView 文本字段中？

> ID：12071262
> 
> 赞同：0
> 
> 时间：2012-08-22T10:36:12.080
> 
> 标签：iphone, objective-c

我使用 AlertView 来提示用户 ID 和密码。当用户在用户 ID 文本字段或密码文本字段中单击时，会弹出键盘，这很好。但我的问题是，当我尝试使用该键盘输入文本时，文本字段中没有显示字母。IT 发生在 iphone 模拟器中。有什么解决办法。如果有人知道，请通知我。非常感谢。

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"User Login" message:@"Please Enter the Following\n\n\n\n" delegate:self cancelButtonTitle:@"Close" otherButtonTitles:@"Sign In", nil];

//UITextField *txtUserName;
//UITextField *txtPassword;

txtUserName = [[UITextField alloc] initWithFrame:CGRectMake(60, 75, 160, 25)];

txtUserName.tag = 3;
txtUserName.borderStyle = UITextBorderStyleBezel;
txtUserName.textColor = [UIColor whiteColor];
txtUserName.font = [UIFont systemFontOfSize:12.0];
txtUserName.backgroundColor=[UIColor whiteColor];
txtUserName.placeholder = @"User ID";
//txtUserName.userInteractionEnabled=YES;
[alert addSubview:txtUserName]; 

txtPassword = [[UITextField alloc] initWithFrame:CGRectMake(60, 110, 160, 25)];
txtPassword.tag = 3;
txtPassword.borderStyle = UITextBorderStyleBezel;
txtPassword.textColor = [UIColor whiteColor];
txtPassword.font = [UIFont systemFontOfSize:12.0];
txtPassword.backgroundColor=[UIColor whiteColor];
txtPassword.placeholder = @"Password";
[alert addSubview:txtPassword];     

CGAffineTransform myTransform = CGAffineTransformMakeTranslation(0.0, 40.0);
[alert setTransform:myTransform];   
alert.tag=3;
[alert show];
[alert release];
[txtPassword release];
[txtUserName release]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:43:04.270

每个文本视图的文本颜色是白色的，每个文本视图的背景颜色也是白色的，这就是你看不到文本的原因。删除此代码将解决您的问题。

```
txtUserName.textColor = [UIColor whiteColor]; 
```

和

```
txtPassword.textColor = [UIColor whiteColor]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:44:20.387

[http://mobile.tutsplus.com/tutorials/iphone/ios-5-sdk-uialertview-text-input-and-validation/](http://mobile.tutsplus.com/tutorials/iphone/ios-5-sdk-uialertview-text-input-and-validation/)

请检查上面的 url 以获得最简单的 uialertview 登录类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:10:31.287

尝试这个

[txtUserName setBackgroundColor:[UIColor blackcolor]];

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T11:08:29.763

您的标签背景颜色和文本颜色都是白色的，因此您无法看到文本。我试过使用你的代码，发现你没有使用安全输入作为密码，所以这里是显示字母的代码和密码的安全输入。

```
.
.
txtUserName.textColor = [UIColor blackColor];
.
.
.
txtPassword.textColor = [UIColor blackColor];
txtPassword.secureTextEntry = YES; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T11:00:42.623

文本颜色和文本背景颜色是白色的..可能是它的原因。更改颜色并检查。

# phpactiverecord - PHP活动记录：使用条件选择关联数据

> ID：12071263
> 
> 赞同：1
> 
> 时间：2012-08-22T10:36:13.360
> 
> 标签：phpactiverecord

我使用 PHPActiveRecord。假设我有一个表 Manager 和一个表Employees。一个经理有多个员工，一个员工有一个经理。

我已经定义了这个关联：

*   模型经理：`static $has_many = { array('employee')}`
*   模范员工：`static $belongs_to = { array('manager')}`

`$manager->employee`给我一个包含 Employee 实例的数组。

如何选择最年长的员工？或最后一个员工的姓名。如何在关联数据中使用条件？我可以像下面这样扩展关联：

*   模型经理：`static $has_many = { array('employee', 'order' => 'age desc', 'limit => 1')}`

或者

*   模型经理：`static $has_many = { array('employee', 'order' => 'id desc', 'limit => 1')}`

但是有了这个解决方案，我必须为每个新案例创建一个新的关联。

是否存在更好的解决方案？像下面这样的东西？

*   `$manager->employee->last()->name`选择最后一名员工的姓名

*   `$manager->employee->find('limit => 1, 'order' => 'age desc')`选择最后一名员工

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:19:04.043

这是一个有点老的问题，但我觉得它至少需要一个答案。

您可以为同一个类定义多个关系。我不确定你是否明确想要避免这种情况，并且没有修改框架以`$manager->employee->`返回某种你不走运的对象。

```
public static $has_one = array(
    array('last_employee', 'class_name'=>'Employee',/** conditions **/ 'foreign_key'=>'manager_id'),
    array('oldest_employee', 'class_name'=>'Employee',/** conditions **/ 'foreign_key'=>'manager_id'),
); 
```

然后您可以调用`$manager->last_employee;`或`$manager->oldest_employee`。我觉得即使是像范围这样的东西也不能完全满足你的需求，所以这似乎是一个很好的解决方案。

# java - 如何在 Android 中显式禁用 HTTP 连接的分块流模式？

> ID：12071266
> 
> 赞同：11
> 
> 时间：2012-08-22T10:36:30.253
> 
> 标签：java, android, android-networking

我的目标是使用 Android 4.0 的 REST Web 服务`HttpsURLConnection`。`POST`除非我尝试做某事，否则这很好用。这是相关的代码部分：

```
 connection.setDoOutput(true);
   connection.setChunkedStreamingMode(0);

   ByteArrayOutputStream out = new ByteArrayOutputStream();
   serializeObjectToStream(out, object);
   byte[] array = out.toByteArray();
   connection.getOutputStream().write(array, 0, array.length); 
```

这会引发以下异常：

```
 java.net.HttpRetryException: Cannot retry streamed HTTP body 
```

通过调试，我意识到我通过的输出流`connection.getOuputStream()`是类型的`ChunkedOutputStream`，并且通过挖掘 Android 源代码，我发现如果需要重试请求（无论出于何种原因），它会触发上述异常，因为它发现它没有*使用*`RetryableOutputStream`它想要的 a 。

现在的问题是：如何让我的 HttpsURLConnection 返回这样的 RetryableOutputStream，或者更确切地说，如何正确防止分块请求编码？我*以为*我已经这样做了`setChunkedStreamingMode(0)`，但显然情况并非如此......

**[编辑]**

不，实现`java.net.HTTPUrlConnection`忽略 0 或更低的流模式：

```
 public void setChunkedStreamingMode(int chunkLength) {
    [...]
    if (chunkLength <= 0) {
        this.chunkLength = HttpEngine.DEFAULT_CHUNK_LENGTH;
    } else {
        this.chunkLength = chunkLength;
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-27T12:12:40.623

无赖！解决方案是根本不从客户端代码调用`setChunkedStreamingMode()`（甚至）！`setFixedStreamingMode()`“-1”是 fixedLength 和 chunkedLength 的内部默认值，不能在客户端设置，因为设置一个低于或等于“0”的值会使其默认为`HttpEngine.DEFAULT_CHUNK_LENGTH`（或在固定流模式情况下引发异常）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T23:52:04.700

解决方案是设置一个`Content-Length`标头（可能由下一部分设置）并`setFixedLengthStreamingMode`使用您打算发送的适当长度的 POST 消息进行调用。

请参阅此 SO FAQ 中的“流媒体模式”部分：

[使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)

# android - 通过 OBEX Object PushProfile 通过蓝牙接收文件

> ID：12071268
> 
> 赞同：5
> 
> 时间：2012-08-22T10:36:34.777
> 
> 标签：android, bluetooth, obex

我有使用 OBEX 对象推送配置文件 (OPP) 通过蓝牙发送数据的设备。

使用 adb logcat 我看到我的 android 设备收到了一个连接（但中止了这个连接？）

```
08-22 11:14:37.939: I/BtOppRfcommListener(22586): Accepted connectoin from 00:07:CF:5F:52:A0
08-22 11:14:37.939: I/BtOpp Service(22586): Start Obex Server
08-22 11:14:38.109: D/Obex ServerSession(22586): java.io.IOException: Software caused connection abort
08-22 11:14:38.109: D/PowerManagerService(180): @PowerManagement: 'BtOppObexServer' releaseWakeLock when screen locked
08-22 11:14:39.219: D/BluetoothEventLoop(180): Device property changed: 00:07:CF:5F:52:A0 property: Connected value: false 
```

当我安装蓝牙文件传输（市场上的免费应用程序）时，我就可以接收文件了。但我不想安装其他应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:15:01.990

我相信我有（至少是部分）解决方案，然后应该允许通过 OPP 拦截文件并添加自定义代码。第一步是转到设置>应用程序>运行>蓝牙共享并**杀死`BluetoothOppService`**

然后我使用反射访问`BluetoothAdapter`（下面的代码）上的方法，该方法允许侦听特定端口。之后我们可以拦截传入的 OPP 通信并与输入和输出流进行交互。[这个](https://stackoverflow.com/questions/7662682/implementing-obex-push-server-on-android-2-3)SO 线程将有助于 OPP 通信部分，但作为初始步骤，我读取数据流并回复 OPP 'OK' 消息，即`os.writeByte(ObexSession.OBEX_SUCCESS | ObexSession.OBEX_FINAL_BIT);`

```
// simplified exception handling
public class BluetoothAdapterProxy
{
    public static final int CHANNEL_OPP = 12;

    final BluetoothAdapter target;
    static final Class<?> targetClass = BluetoothAdapter.class;
    Method listenOn;

    public BluetoothAdapterProxy(BluetoothAdapter target)
    {
        this.target = target;
        Class<?>[] args = new Class[] { int.class };
        try
        {
            this.listenOn = targetClass.getDeclaredMethod(
                "listenUsingRfcommOn", args);
        }
        catch (NoSuchMethodException e)
        {
            e.printStackTrace();
        }
    }

    public BluetoothServerSocket listenUsingRfcommOn(int channel)
    {
        try
        {
            return (BluetoothServerSocket) (listenOn.invoke(target, 
                new Object[] { channel }));
        }
        catch (Exception e)
        {
            // complain loud, complain long
            throw new RuntimeException(ex);
        }
    }
} 
```

用法：初始化使用

```
serverSocket = new BluetoothAdapterProxy(BluetoothAdapter.getDefaultAdapter())
    .listenUsingRfcommOn(BluetoothAdapterProxy.CHANNEL_OPP); 
```

之后，使用以下单独的`Thread`（以防止阻塞）和远程设备可以通过连接`socket = serverSocket.accept();`

# ant - 访问新目标时是否可以“卸载”/丢弃从文件中读取的属性？

> ID：12071281
> 
> 赞同：0
> 
> 时间：2012-08-22T10:37:19.990
> 
> 标签：ant, properties

只是出于好奇......而且因为我 - 当然 - 想以这种方式实现它;）

我在一个脚本中有几个主要目标。他们每个人都为不同的地区和/或品牌构建​​软件包。

我的一些前辈已经解决了一个问题，即为目标提供要使用的参数/属性的信息。

这些条目确实在每个目标中出现了多次，并且即使某个属性已加载且可用，某些值也已添加/硬编码。这种方法很容易出错。

这导致了很多麻烦，因为名称中的拼写错误导致目标使用变体属性的混合而不是为每个目标指定的属性。在某些情况下，显然懒惰确实成功了，因此不是搜索、打开和修改适当的变体属性文件，而是用于单个任务的不同文件。

我现在已经调整了脚本，每个目标在开始时只需要一个属性文件名，其余的 - 如果需要 - 在运行时组合。

到目前为止还不错，但之前可以连续构建多个目标，因为尚未在主目标中读取属性文件。

现在每个目标都必须逐步构建，因为后续目标将使用从第一个目标加载的初始属性。

我已经尝试过用不同的方式加载属性文件，用一个变量覆盖它，但到目前为止没有任何乐趣。我试过 < **loadproperties** >, < **property file=...** >, < **propertyfile...** > 都没有真正的帮助，因为属性不能被覆盖，除非你使用同名变量并取消设置它，这在这个特定点不起作用。从外部发送的属性将被忽略，因为我必须在开始时初始化值，并且我不知道在构建之前将使用哪个值。

*我认为将属性文件作为普通文本文件逐行读取，搜索相关条目并将它们分配给各个变量就可以了，但我不知道如何实现这一点：/*

我希望有人可以帮助我。主要目标的外观示例附在帖子的末尾。我想从文本中读取值（键=值）并将它们分配给变量的地方直接位于条件之后。

干杯一月

```
<target name="Int_XX_XX_XX" description="Create XX XX release (PCSim, Front, XX)">
    <condition property="skip.target">
        <istrue value="${skip_target}" />
    </condition>
    <loadproperties>
        <file file="variants/XX_XXXXXX_XX.properties"/>
    </loadproperties>
    <propertyregex property="sop.number" select="\2" input="${variant.release.label}" regexp="(\.*)_(SOP[0-9]*)" />
    <if>
        <or>
            <and>
                <available file="${variant.release.label}${variant.sub.region}.zip" />
                <istrue value="${variant.split.to.region}" />
            </and>
            <and>
                <available file="${variant.release.label}.zip" />
                <isfalse value="${variant.split.to.region}" />
            </and>
        </or>
        <then>
            <var name="bundle.exists" value="true" />
            <echo>${variant.release.label}.zip found. Skipping build target</echo>
        </then>
    </if>
    <if>
        <not>
            <istrue value="${bundle.exists}" />
        </not>
        <then>
            <echo>${variant.release.label}.zip not found. Accessing build target</echo>
            <antcall target="private.create.zip.and.pcsim">
                <param name="zip.dsitracer.client.asia" value="true" />
                <param name="variant.properties" value="variants/${variant.label}.properties" />
                <param name="echo.release.labels" value="false" />
            </antcall>
            <antcall target="private.echo.release.labels">
                <param file="variants/${variant.label}.properties" />
            </antcall>
            <antcall target="private.send.email.to.testers">
                <param name="variant.release.label" value="${variant.release.label}" />
                <param file="variants/${variant.label}.properties" />
            </antcall>
        </then>
    </if>
    <var name="bundle.exists" unset="true" />
</target> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:28:11.337

它就像一个魅力:)

我不得不删除属性值的初始分配

```
<property name="foo" value="foo"/> 
```

直接在 taskdef 之后，因为主目标调用的同一脚本中有一些目标。这导致重新读取将值恢复为 foo 的属性值。放弃初始化似乎没有任何危害。

所以我的构建脚本现在添加了以下内容：

```
<target name="Int_XX_XX_XX" description="Create XX XX release (PCSim, Front, XX)">
    <condition property="skip.target">
        <istrue value="${skip_target}" />
    </condition>
    <local name="variant.property.file.name" />
    <local name="variant.release.label" />
    <local name="variant.sub.region" />
    <local name="variant.split.to.region" />
    <local name="variant.label" />
    <local name="variant.label.extended" />
    <property name="variant.property.file.name" value="XX_XXXXXX_XX" />
    <loadproperties>
        <file file="variants/${variant.property.file.name}.properties" />
    </loadproperties> 
```

代替

```
 <target name="Int_XX_XX_XX" description="Create XX XX release (PCSim, Front/Rear, XX)">
    <condition property="skip.target">
        <istrue value="${skip_target}" />
    </condition>
    <loadproperties>
        <file file="variants/XX_XXXXXX_XX.properties" />
    </loadproperties> 
```

顺便一提

```
 <local name="variant.release.label" />
    <local name="variant.sub.region" />
    <local name="variant.split.to.region" />
    <local name="variant.label" />
    <local name="variant.label.extended" /> 
```

是主要目标中也使用的属性，子级别上的目标确实使用从最近的属性文件中读取的属性，并在以后按预期丢弃它们。

感谢您的帮助:)

# dns - 自定义域映射到 Web 应用程序

> ID：12071282
> 
> 赞同：1
> 
> 时间：2012-08-22T10:37:23.250
> 
> 标签：dns, domain-mapping

我们正在创建一个 SAAS 基础应用程序，每个公司都有自己的子域。但是如果公司想用我们的应用程序配置另一个域，他们可以这样做。

例如，我是一家注册了应用程序 www.saas.com 的公司，我得到了子域 company.saas.com，现在我想将我的 company.com 域指向 company.saas.com，那么我们如何实现呢？

我们想为我们的应用程序的用户创建一个自定义域配置设置。它类似于 wordpress 域映射（您可以将自己的域指向 wordpress 站点）。因此，当我阅读与 wordpress 相关的内容时，他们要求为您要配置映射的域添加您网站的 CNAME。

我们的应用程序是用 CakePHP 编写的。

我们需要做任何服务器配置更改来实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:36:01.817

把指向的`CNAME`记录放在:)`company.com``company.saas.com`

# mysql - 如何将 mysql 与 Zend 框架集成？

> ID：12071284
> 
> 赞同：2
> 
> 时间：2012-08-22T10:37:30.987
> 
> 标签：mysql, zend-framework

我对 Zend 框架完全陌生。我在 MySQL 中创建了数据库。现在我想和 Zend 一起使用它。完全困惑如何开始。我已经阅读了许多教程，例如[http://framework.zend.com/manual/en/](http://framework.zend.com/manual/en/)，但很困惑。任何人都可以通过这个分步说明或任何好的教程帮助我如何完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:54:24.763

2 实现方法：

命令行：

```
zf configure db-adapter "adapter=PDO_MYSQL&dbname=[your databasename]&host=[your host]&username=[your username]&password=[your password]" -s development 
```

或在您的 application.ini 文件中：

```
resources.db.adapter = "PDO_MYSQL"
resources.db.params.dbname = "[your database]"
resources.db.params.host = "[your host]"
resources.db.params.username = "[your username]"
resources.db.params.password = "[your password]" 
```

任何问题？在评论中提及:)

编辑：

由于您是从 Zend 开始的，首先，欢迎使用 Zend Framework :) 这里是您可以参考的初始开发教程：http: [//net.tutsplus.com/tutorials/php/zend-framework-from-scratch/](http://net.tutsplus.com/tutorials/php/zend-framework-from-scratch/)

如果您直接只想了解集成数据库（即模型 - 业务逻辑），请参阅此链接：

[http://net.tutsplus.com/tutorials/php/zend-framework-from-scratch-models-and-integrating-doctrine-orm/](http://net.tutsplus.com/tutorials/php/zend-framework-from-scratch-models-and-integrating-doctrine-orm/)

PS：上述链接中的一些内容可能已被弃用并且可能不起作用，第二个链接将 ORM 称为 Doctrine，而我们现在使用 Doctrine2。

全清？

# android - Android - 要创建测试应用程序，是否可以创建第二个应用程序而不是测试应用程序？

> ID：12071285
> 
> 赞同：0
> 
> 时间：2012-08-22T10:37:37.607
> 
> 标签：android

我希望创建一个用于实验和测试的应用程序，但我希望将它变成一个真正的应用程序而不是一个测试应用程序，这样我也可以在真实用户身上测试各种东西。

我想知道我拥有的当前应用程序的真实测试应用程序与我将用于测试的另一个真实应用程序之间的主要区别是什么。

另外，我如何真正制作第二个真正的应用程序？是否有关于如何在同一帐户下创建第二个应用程序的文档？我不确定会有什么不同。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:54:50.597

您可以使用 SDK (http://developer.android.com/sdk/index.html) 创建的应用程序数量没有限制。此外，您的所有应用程序都是测试应用程序，除非您随后在 Android Market 中发布，用户可以从那里下载您的应用程序。

所以不用担心，使用 SDK，创建尽可能多的应用程序，在模拟器或任何 Android 手机上运行它们（将手机设置为调试模式）。一旦你觉得你的应用程序已经为外部用户准备好了，只需将应用程序发布到世界[http://developer.android.com/distribute/googleplay/publish/preparing.html](http://developer.android.com/distribute/googleplay/publish/preparing.html)

# css - CLI 纯 CSS Minifier，不是 SASS 或 LESS

> ID：12071287
> 
> 赞同：0
> 
> 时间：2012-08-22T10:37:49.353
> 
> 标签：css, compression, minify

有谁知道任何 CLI CSS 压缩器只用于普通的 css 文件？不适用于 SASS/SCSS、LESS 或 Stylus。

我相信会有一个压缩器可用于将 style.css 压缩为 style.min.css？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:46:10.820

试试[YUI 压缩器](http://yuilibrary.com/projects/yuicompressor/)（[快速参考](http://developer.yahoo.com/yui/compressor/)）。它非常简单，并且还支持 JavaScript 缩小（不会有坏处）。

它也可以在[这里](http://refresh-sf.com/yui/)作为服务找到。

# oop - 如果功能可以从给定的数据中导出，是否应该提供一个小功能？

> ID：12071288
> 
> 赞同：0
> 
> 时间：2012-08-22T10:37:49.813
> 
> 标签：oop, class

考虑这个类结构：

```
class Test
{
   public:

   vector<string> nameList;

   int getNumberOfUsers();
   int getTotalUsersWithFirstAplhabetA() ;

   void sortTheNameList();
} 
```

由于用户可以直接访问用户列表，我是否应该提供一些小的帮助功能，比如查找总用户等，因为这些功能无论如何都可以由用户自己提取？

我假设这些功能做的工作非常小。对于需要更大逻辑的功能（如上面的排序），我提供了该功能。

这是一个好的设计吗？

* * *

编辑：

我想知道的是，如果我使用界面中的某些功能向用户提供一些类信息，我是否也应该提供一个功能来取回这些信息的子集？

即使我将 nameList 设为私有，并提供一个*getter*函数来检索它，我的疑问仍然是一样的。我还应该提供其他较小的功能吗？还是留给用户自己实现？

请注意，检索完整列表是我班级用例的*明确*要求。但是其他实现不是真的必要吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:57:47.450

Test 类看起来很像一个向量。唯一的区别是过滤器，比如“只有 A 的人”。将列表设为私有，以便您可以添加功能并尝试实现数组接口，以便将其用作数组。

# xml - 使用 XSLT 转义未使用的值

> ID：12071291
> 
> 赞同：0
> 
> 时间：2012-08-22T10:37:51.177
> 
> 标签：xml, xslt, xslt-2.0

我有一个`XSLT`转变：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

    <xsl:output method="xml"
                indent="yes"
                version="1.0"
                encoding="UTF-16"              
                standalone="yes"                        
                cdata-section-elements="title date referencenumber url company city state country postalcode description salary education jobtype category experience"/>

    <xsl:param name="currentDate"/>

    <xsl:template match="/response/result">
        <source>            
            <xsl:for-each select="//doc">
                <job>
                    <title>
                        <xsl:value-of select="str[@name='title']"/>
                    </title>
                    <date>
                        <xsl:value-of select="date[@name='ds_field_ad_publish']"/>
                    </date>
                    <referencenumber>
                        <xsl:value-of select="int[@name='nid']"/>
                    </referencenumber>
                </job>
            </xsl:for-each>            
        </source>
    </xsl:template>   

</xsl:stylesheet> 
```

这是我的`XML`文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<response>
    <lst name="responseHeader">
        <int name="status">0</int>
        <int name="QTime">4</int>
        <lst name="params">
            <str name="wt">xml</str>
            <str name="fq">type:ad_vacancy is_organisation_nid:190908</str>
            <str name="rows">1000000</str>
        </lst>
    </lst>
    <result name="response" numFound="2" start="0">
        <doc>
            <!-- all my values -->
        </doc>
        <doc>
            <!-- all my values -->
        </doc>
        <doc>
            <!-- all my values -->
        </doc>
    </result>
</response> 
```

我正在匹配`/response/result`然后循环遍历所有`<doc>`元素。一切正常，但在我的文档顶部，我看到了 element.xml 的值`<lst>`。像这样：

```
0
4

    xml
    type:ad_vacancy is_organisation_nid:190908
    1000000 
```

我需要以某种方式逃离整个街区，我的转变与它不匹配。我尝试过不同的表达方式，例如：`<xsl:template match="//response/result">`, `<xsl:template match="//response//result">`. 我还尝试将其添加到我的转换中：

```
<xsl:template match="/*">
    <xsl:apply-templates/>
</xsl:template> 
```

但这也没有帮助。来自的值`<lst>`仍然存在。有没有办法摆脱它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:51:33.497

您需要覆盖一些内置模板

```
<xsl:template match="text()"/> 
```

或防止与

```
<xsl:template match="/">
  <xsl:apply-templates select="response/result"/>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:50:22.340

只需将其添加到您的模板中：`<xsl:template match="text() | @*"/>` 它匹配文本节点和属性，并且由于模板为空，因此对它们没有任何作用。它实际上是一个“内置模板”--> [http://www.w3.org/TR/xslt#built-in-rule](http://www.w3.org/TR/xslt#built-in-rule)

您编辑的 XSLT 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:output method="xml"
    indent="yes"
    version="1.0"
    encoding="UTF-16"              
    standalone="yes"                        
    cdata-section-elements="title date referencenumber url company city state country postalcode description salary education jobtype category experience"/>

<xsl:param name="currentDate"/>

<xsl:template match="text() | @*"/>

<xsl:template match="/response/result">
    <source>            
        <xsl:for-each select="//doc">
            <job>
                <title>
                    <xsl:value-of select="str[@name='title']"/>
                </title>
                <date>
                    <xsl:value-of select="date[@name='ds_field_ad_publish']"/>
                </date>
                <referencenumber>
                    <xsl:value-of select="int[@name='nid']"/>
                </referencenumber>
            </job>
        </xsl:for-each>            
    </source>
</xsl:template>   

</xsl:stylesheet> 
```

# android - 如何在android中设置webmethod的参数

> ID：12071294
> 
> 赞同：0
> 
> 时间：2012-08-22T10:38:10.827
> 
> 标签：android, eclipse, web-services, ksoap

我已经使用`jaxws`in创建了 webservice `myeclipse5.1.1GA`，我可以在`eclipse indigo64 bit`. 问题是当我可以使用soap对象的`setparameter()`方法在webservice中设置webmethod的参数但它没有在webservice的webmethod中设置时。

如何设置参数：

```
public class MyAsyncTask extends AsyncTask<String, Void, Object> {
    private String METHOD_NAME="";
    private String NAMESPACE="http://ws.easyway3e.com/";
    private String SOAP_ACTION="";
    private static final String URL="http://10.0.2.2:8080/WebService/DBConn?wsdl";
    @Override
    protected Object doInBackground(String... params) {
    System.out.println("Call-1 -----"+params[0]+","+params[1]+",
                       "+params[2]+","+params[3]);
    METHOD_NAME="openConnection";               
    SoapObject request=new SoapObject(NAMESPACE, METHOD_NAME);
    request.addProperty(DRIVERNAME);
    request.addProperty("d_Name",params[0]);
    request.addProperty("c_String",params[1]);
    request.addProperty("u_Name",params[2]);
    request.addProperty("pass",params[3]);
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope
                                         (SoapEnvelope.VER11);
    envelope.dotNet=true;
    envelope.setOutputSoapObject(request);
    System.out.println(envelope.bodyOut.toString());
    HttpTransportSE androidHttpTranportSE=new HttpTransportSE(URL);
    androidHttpTranportSE.setXmlVersionTag("<?xml version=\"1.0\" 
                                           encoding=\"UTF-8\"?>");
    try {
        SOAP_ACTION = NAMESPACE + METHOD_NAME;
        androidHttpTranportSE.call(SOAP_ACTION, envelope);
        SoapPrimitive  resultsRequestSOAP = (SoapPrimitive) envelope.getResponse();
        System.out.println(" Connection is =>"+resultsRequestSOAP.toString());

    } catch (IOException e) { e.printStackTrace(); } 
    Object result = null;
    try { result = envelope.getResponse(); } 
    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:14:40.437

你已经回答了你自己的问题。你已经把

`request.addProperty("d_Name",params[0]);`

这是将参数添加到 SOAP Web 服务的正确方法。

您还可以参考以下链接来清除您对 android 中的 web 服务的概念。

[android/eclipse 中的网络服务](https://stackoverflow.com/questions/10995620/web-service-in-android-eclipse/10995857#10995857)

[http://www.ibm.com/developerworks/webservices/library/ws-android/index.html](http://www.ibm.com/developerworks/webservices/library/ws-android/index.html)

# python - 如何从 Python 2.7.3 脚本制作 Windows exe？

> ID：12071295
> 
> 赞同：0
> 
> 时间：2012-08-22T10:38:18.690
> 
> 标签：python

如何从 Python 2.7.3 脚本制作可执行文件？[这](http://www.py2exe.org/)似乎只适用于 2.6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:40:13.900

尝试[cx_freeze](http://cx-freeze.sourceforge.net/)。它们甚至支持 Python 3.3。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T10:56:04.537

不，py2exe 在 Python 2.7 上运行良好！！！

PS：如果不熟悉cmd，可以使用py2exe的GUI。

[Gui2exe](https://code.google.com/archive/p/gui2exe/)还可以与 cx_freeze、bbFreeze、py2app 等一起运行。

# jboss - 粘性会话 jboss 会话复制集群

> ID：12071299
> 
> 赞同：1
> 
> 时间：2012-08-22T10:38:42.043
> 
> 标签：jboss, cluster-computing

我在 jboss 6.x 服务器中有一个 jsf2 应用程序。从我在这里阅读并在谷歌搜索的所有内容中，始终建议使用粘性会话。据我了解，这意味着同一个节点将始终负责同一个用户的请求。这是正确的吗？

如果是，那么在集群模式下使用 jboss 有什么意义？我不能只有两个 jboss 实例并让负载均衡器分配请求吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:28:43.503

关键是您的系统是多用户的。当使用粘性会话时，负载均衡器会将用户平衡到两台服务器，并且它们被平等地使用。但总是一个用户只向一台服务器发出请求。这样做的好处是您不需要将会话和会话数据复制到所有服务器，这可能会不必要地花费大量资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T05:57:22.433

会话复制将在服务器关闭或崩溃的情况下提供帮助。如果托管用户会话的服务器出现故障，则不应提示用户再次登录。仅当复制用户的会话时才有可能。

# c++ - 模板化重载运算符不明确

> ID：12071300
> 
> 赞同：2
> 
> 时间：2012-08-22T10:38:52.677
> 
> 标签：c++, templates, c++11, operator-overloading

我有一个容器`template <typename T> class A`，它`operator+`需要为许多其他容器、表达式模板和文字类型重载`U`。

我目前的策略是定义一个模板函数`wrap`，该函数封装了如何访问和定义各个元素

```
template <typename T, typename U>
auto operator+(Wrapped<T>&& lhs, Wrapped<U>&& rhs) -> decltype(...)
{
    ....
} 
```

然而，下面的重载`operator+`是模棱两可的：

```
template <typename T, typename U>
auto operator+(const A<T>& lhs, U&& rhs) ->
    decltype(wrap(lhs) + wrap(std::forward<U>(rhs)))
{
    return wrap(lhs) + wrap(std::forward<U>(rhs));
}

template <typename T, typename U>
auto operator+(T&& lhs, const A<U>& rhs) ->
    decltype(wrap(std::forward<T>(lhs)) + wrap(rhs))
{
    return wrap(std::forward<T>(lhs)) + wrap(rhs);
} 
```

我怎样才能最好地解决歧义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:51:43.663

您需要提供一个比这两个参数都更好的重载模板，因为它是模棱两可的：

```
template<typename T>
auto operator+(const A<T> &lhs, const A<T> &rhs) -> ...;

template<typename T, typename U>
auto operator+(const A<T> &lhs, const A<U> &rhs) -> ...; 
```

# java - 用java开发的蛇游戏中的闪烁

> ID：12071304
> 
> 赞同：1
> 
> 时间：2012-08-22T10:39:09.360
> 
> 标签：java, 2d-games

我用Java开发了一个蛇游戏。问题是我在游戏运行时看到闪烁。谁能告诉我为什么会发生这种情况并指导我找到可能的解决方案？

游戏的代码可以在[这里](http://pastebin.com/Pce8JUP6)找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:48:32.757

你考虑过[双缓冲](http://docs.oracle.com/javase/tutorial/extra/fullscreen/doublebuf.html)吗？

查看您的代码，以下是潜在原因呢？

```
Thread.sleep(1000) 
```

# java - 如何检测一个点是否与libgdx中的主体相交

> ID：12071310
> 
> 赞同：5
> 
> 时间：2012-08-22T10:39:22.300
> 
> 标签：java, box2d, libgdx

我正在向 libgdx 中的 box2d 世界添加带有固定装置的主体。我想检测用户是否触摸（点击）了一个对象。我该怎么做呢？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T11:27:40.497

您应该使用 libgdx [Stage](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/scenes/scene2d/Stage.html)来检测 Actor 上的触摸事件（您在这里将它们称为对象）。最好的做法是将 box2d 身体映射到舞台演员，这样可以很容易地做这样的事情。

**检测触摸：**

实现 InputProcessor 接口的 touchDown 方法，[这样](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/InputProcessor.html)：

*   您必须使用 stage.toStageCoordiantes(...) 方法将屏幕坐标转换为舞台坐标。
*   使用 stage.hit(x, y) 使用转换后的坐标检测舞台上 Actor（对象）的命中。
*   如果检测到命中，stage.hit(x, y) 将返回演员。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-07T18:19:21.700

用户只有在接触到`Fixture`包含在这个身体中的一些 ' 时才会接触到身体。这意味着，您可以检查每个`Fixture`使用`Body`方法`testPoit()`：

```
public class Player {
    private Body _body;

    public boolean isPointOnPlayer(float x, float y){
        for(Fixture fixture : _body.getFixtureList())
            if(fixture.testPoint(x, y)) return true;
        return false;
    }
} 
```

接下来，您需要[`InputAdapter`](https://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/InputAdapter.html)像这样创建：

```
public class PlayerControl extends InputAdapter {
    private final Camera _camera;
    private final Player _player;
    private final Vector3 _touchPosition;

    public PlayerControl(Camera camera, Player player) {
        _camera = camera;
        _player = player;
        // create buffer vector to make garbage collector happy
        _touchPosition = new Vector3();
    }

    @Override
    public boolean touchDown(int screenX, int screenY, int pointer, int button) {
        // don't forget to unproject screen coordinates to game world
        _camera.unproject(_touchPosition.set(screenX, screenY, 0F));
        if (_player.isPointOnPlayer(_touchPosition.x, _touchPosition.y)) {
            // touch on the player body. Do some stuff like player jumping
            _player.jump();
            return true;
        } else
            return super.touchDown(screenX, screenY, pointer, button);
    }
} 
```

最后一个 - 设置这个处理器来监听用户输入：

```
public class MyGame extends ApplicationAdapter {

    @Override
    public void create () {
    // prepare player and game camera
    Gdx.input.setInputProcessor(new PlayerControl(cam, player));
} 
```

[在此处](https://github.com/libgdx/libgdx/wiki/Mouse%2C-touch-%26-keyboard#touch-point)阅读有关触摸处理的更多信息

# jquery - 将 Gif 动画添加到复选框

> ID：12071312
> 
> 赞同：1
> 
> 时间：2012-08-22T10:39:27.543
> 
> 标签：jquery, html, css, checkbox

我找到了很好的代码，可以对复选框进行样式化。

HTML：

```
<input id="checkbox" type="checkbox" class="checkbox" />
<label id="checkbox_lab" for="checkbox" class="checkbox_lab"></label> 
```

CSS：

```
.checkbox {
    display: none;
}
.checkbox_lab {
    background: url("images/off.png") no-repeat;
    height: 28px;
    width: 81px;
    display: block;
}
.checkbox_lab_sel {
    background: url("images/on.png") no-repeat;
} 
```

Javascript（使用 jquery）：

```
 $(document).ready(function(){
        $(".checkbox").change(function(){
            if($(this).is(":checked")){
                $(this).next("label").addClass("checkbox_lab_sel");
            }else{
                $(this).next("label").removeClass("checkbox_lab_sel");
            }
        });
    }); 
```

它工作得非常好。我想要“从打开到关闭的漂亮切换动画，反之亦然”，它保存在动画 gif 中，但是......我在 JS 中不是很好，不知道该怎么做。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:39:57.157

在这里你有一个简单的[例子](http://jsfiddle.net/cLb5F/)

HTML

```
<input id="checkbox" type="checkbox" class="checkbox" />
<label id="checkbox_lab" for="checkbox" class="checkbox_lab"></label>​ 
```

CSS

```
.checkbox {
    /*display: none;*/
}
.checkbox_lab {
    background: url("images/off.png") no-repeat;
    height: 28px;
    width: 81px;
    display: block;
}
.checkbox_lab_sel {
    background-image: url('http://cdn.rpxnow.com/rel/img/9a8269421303631316be4ab5e34870e1.gif');
}​ 
```

Javascript

```
$(".checkbox").change(function(){
    $('#checkbox_lab').toggleClass('checkbox_lab_sel');
        });​ 
```

希望这可以帮助！

# javascript - 来自鼠标点的 jQuery 位置元素（以及更多）

> ID：12071319
> 
> 赞同：2
> 
> 时间：2012-08-22T10:40:07.277
> 
> 标签：javascript, jquery, jquery-plugins

我正在编写一个用于向元素添加上下文菜单的 jQuery 插件。现在，我需要修复上下文菜单的位置。如果没有足够的空间从鼠标底部显示整个上下文菜单，那么它应该从鼠标顶部显示。我尝试了一些东西，但没有像我想要的那样工作。

这是 jsFinddle 上的代码：http: [//jsfiddle.net/evandroprogram/pRPQq/](http://jsfiddle.net/evandroprogram/pRPQq/)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:52:50.740

给你，伙计，我在这里分叉并更新了你的小提琴

[http://jsfiddle.net/joevallender/j5Vy9/](http://jsfiddle.net/joevallender/j5Vy9/)

代码更改是这样的

```
var screenBottom = $(window).scrollTop() + $(window).height();
var menuHeight = _contextMenu.height();
var menuBottom = menuHeight + options.positionY;
if(menuBottom > screenBottom) {
    _contextMenu.css({
        top: "-=" + menuHeight
    })
} 
```

在您设置 _contextMenu.css() 之后放置

**编辑**刚刚再次测试，这不是像素完美的，但它确实有效，如果你想调整它应该给你一个不错的线索:)

# ini - 虚幻脚本配置 - 部分

> ID：12071320
> 
> 赞同：1
> 
> 时间：2012-08-22T10:40:12.183
> 
> 标签：ini, unrealscript

我正在修改`utcomp 1.7a`. `UT 2004`这里有一个问题：

虚幻脚本中有一个`config`关键字，允许您在`ini`文件中保存/加载变量，在名为：`[package.sectionname]`.

问题是我的包与原始 utcomp 的包不同。因此，当我尝试使用一些 ini 设置时，UT 创建新部分，称为`[mypackage.---]`，但我想要，它在`[originalpackage.---]`.

有什么方法可以设置 mutator 包名称？我看到了 utcomp 的修改版本，它使用标准 utcomp 的设置，所以有可能......但是如何？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:41:19.790

如果您的类是基类的子类（在 中`originalpackage`），它应该自动加载设置，`[originalpackage.---]`除非您在您的`[mypackage.---]`部分中专门更改它们。

例如，在 UTGame.ini 中，该`[Engine.GameInfo]`部分包含所有 GameInfo 子类的设置。再往下，`[UTGame.UTGame]`更改一些设置（如`GameDifficulty`）并添加一些新设置，但所有其他设置都是从​​基本`[Engine.GameInfo]`部分自动加载的。

如果您尝试从非父类加载属性，我认为这是不可能的。

# php - 在 zend 中，通过在控制器中连接数组来查看值

> ID：12071327
> 
> 赞同：1
> 
> 时间：2012-08-22T10:40:45.083
> 
> 标签：php, foreach, zend-form-element

我有下面的数组，我通过在 zend 中执行 MySQL 查询来获取这个数组。我想连接所有八位元并将结果作为 131.208.0.0 和 141.128.0.0 传递给视图以显示。

```
Array
(
    [0] => Array
        (
            [octet1] => 131
            [octet2] => 208
            [octet3] => 0
            [octet4] => 0
        )

    [1] => Array
        (
            [octet1] => 141
            [octet2] => 128
            [octet3] => 0
            [octet4] => 0
        )
) 
```

使用下面的 foreach 我得到了所有的疾病，我如何将每个八位元连接成一个数组。

```
 foreach($arr as $external)
       {
            foreach ($external as $octent)
            {
                echo $octent."<br />";
            }
       } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:45:24.367

内[爆](http://php.net/manual/en/function.implode.php)函数是您正在搜索的内容：

```
 $results = array();
 foreach($arr as $external){
       $results[] = implode('.', $external);
 }

 print_r($results); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:52:11.447

如果您不需要使用单个八位字节并且可以访问查询以进行修改，则可以只`CONCAT(octet1, '.', octet2, '.', octet3, '.', octet4)`在`SELECT`子句中检索。

否则你可以这样做：

```
// array_map applies a function to every element of an array
$concatenated_arr = array_map(function($e) { return implode('.', $e); }, $arr); 
```

# c++ - 带有 boost 线程 1.51 的程序无法构建

> ID：12071329
> 
> 赞同：0
> 
> 时间：2012-08-22T10:40:54.337
> 
> 标签：c++, gcc, boost-thread

我正在尝试使用最新版本的 boost 线程编译程序。我在用

gcc 版本 4.1.2 20080704（红帽 4.1.2-52）

`boost::thread::~thrad()`对于 1.50，我遇到了一个问题，即无法找到对的引用。所以我更新到新的我得到了以下

```
 /usr/local/include/boost/thread/detail/thread.hpp:65: error: expected ';' before 'thread_data'
      /usr/local/include/boost/thread/detail/thread.hpp:68: error: expected `;' before 'thread_data'
      /usr/local/include/boost/thread/detail/thread.hpp:88: error: expected ';' before 'thread_data'
      /usr/local/include/boost/thread/detail/thread.hpp:91: error: expected `;' before 'void'
      /usr/local/include/boost/thread/detail/thread.hpp:105: error: expected ';' before 'thread_data'
      /usr/local/include/boost/thread/detail/thread.hpp:108: error: expected `;' before 'void'
      /usr/local/include/boost/thread/detail/thread.hpp:121: error: expected ';' before 'private'
      /usr/local/include/boost/thread/detail/thread.hpp:153: error: expected primary-expression before ')' token
      /usr/local/include/boost/thread/detail/thread.hpp:153: error: there are no arguments to 'BOOST_THREAD_RV_REF' that depend on a template parameter, so a declaration of 'BOOST_THREAD_RV_REF' must be available
      /usr/local/include/boost/thread/detail/thread.hpp:153: error: (if you use '-fpermissive', G++ will accept your code, but allowing the use of an undeclared name is deprecated)
      /usr/local/include/boost/thread/detail/thread.hpp:153: error: expected `)' before 'f'
      /usr/local/include/boost/thread/detail/thread.hpp:153: error: invalid in-class initialization of static data member of non-integral type 'boost::detail::thread_data_ptr'
      /usr/local/include/boost/thread/detail/thread.hpp:153: confused by earlier errors, bailing out 
```

我不知道为什么要这样做。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T20:36:17.173

我在 OSX 上使用 g++ 4.2.1 时遇到了同样的问题，尽管我不认为它本身是编译器问题。

我以前通过调用 b2 install安装了 boost 库`/usr/local/lib`和头文件。`/usr/local/include`这适用于新安装，但它不能正确覆盖以前的 boost 安装（我有 1.49）。我所要做的就是将我的构建指向我正在使用的 boost 构建目录，或者删除`/usr/local/include/boost`并再次运行 b2 install。我第一次运行 b2 install 它只复制了快速的库，第二次花费了更长的时间并复制了所有头文件。

# java - 我需要在 tomcat 的 stdout.log 中写入错误和异常

> ID：12071331
> 
> 赞同：0
> 
> 时间：2012-08-22T10:41:22.157
> 
> 标签：java, tomcat, logging

我试图从 tomcat 的日志文件中删除**System.out.println("I am Ranjit") 。**通过在 Context.xml 中设置 Context 属性**SwallowOutput="true"**，它可以与 stdout.log 一起正常工作。

但是，开始在 catalina.log 中创建日志，这并不好。

我只想在 stdout.log 上记录错误和异常。我通过如下设置**logging.properties**进行了尝试：

```
java.util.logging.ConsoleHandler.level = ERROR
java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter 
```

&

```
org.apache.catalina.core.ContainerBase.[Catalina].[localhost].level = ERROR
org.apache.catalina.core.ContainerBase.[Catalina].[localhost].handlers = 2localhost.org.apache.juli.FileHandler 
```

但它不起作用。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:17:21.997

很难知道你在这里真正问的是什么。但是，如果您尝试更改 java.util.logging 生成的记录器消息的格式，则需要编写自定义 Formatter 类来执行此操作。

如下所述切换到 log4j 日志记录可能会更好：http: [//tomcat.apache.org/tomcat-6.0-doc/logging.html#Using_Log4j](http://tomcat.apache.org/tomcat-6.0-doc/logging.html#Using_Log4j)

# backbone.js - 使用 requirejs 的主干：视图和子视图以及 r.js

> ID：12071333
> 
> 赞同：1
> 
> 时间：2012-08-22T10:41:28.857
> 
> 标签：backbone.js, requirejs, optimization

我有一个需要 Backbone、Undescore、jquery 等的视图。

例子

```
define(['jquery','undescore','backbone','subviewA', 'subviewB'], function($,_,Backbone, SubviewA, SubviewB){
   var View = Backbone.View.extend({
       //other methods here
       render : function() {
           this.subviewA = new SubviewA();
           this.subviewA.render(); 
           this.subviewB = new SubviewB();
           this.subviewB.render();
           return this; 
       }
   });
}); 
```

子视图示例

```
define(['jquery','undescore','backbone','text!templates/subviewA'], function($,_,Backbone, template){
   var SubviewA = Backbone.View.extend({
       //other methods here
       render : function() {
           this.$el.html(template);
           return this; 
       }
   });
}); 
```

我的问题是我是否需要在子视图中包含 jquery、undescore 和骨干，我可以省略它们吗？

**编辑**

我在 r.js 中询问原因，我每次都需要告诉它不要在每个模块中构建这些依赖项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:53:03.787

理论上，如果您不在视图中使用 $ 或 _ 符号，则不需要将 jquery 和下划线列为模块的直接依赖项（无论是视图还是子视图都不会改变这一点）。不过，您确实需要包含主干，因为您直接使用：Backbone.View 引用它。如果您想绝对确定 Backbone 符号已定义，则应将其声明为依赖项。

一些库将自己注册为 AMD 模块和全局变量（通常 jquery 会这样做）。Backbone 不直接支持 AMD，并且无论其使用方式如何，都会在全局级别注册自己。从理论上讲，您不能将其声明为依赖项，但是您有风险 require 会在加载主干之前尝试加载脚本，在这种情况下，将不会定义主干符号。

如果您重复声明依赖项（除了额外的字符，因此额外的脚本大小），这并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:53:56.107

您可以省略任何未使用的要求。

在您的示例中（忽略省略的代码！），您可以删除`jquery`and `undescore`(sic) 但**不能** `backbone`删除（因为您通过 使用它`Backbone.View.extend`）。

显然，您需要保持您的需求名称和变量同步。

# android - 更改列名？

> ID：12071334
> 
> 赞同：1
> 
> 时间：2012-08-22T10:41:30.507
> 
> 标签：android, ormlite, alter-table

我有一个包含不同列的表“项目”，但我没有在每一列中指定名称。现在我在这个表中有不同的行，我想执行：

```
ItemsDao.queryBuilder().where().eq(Items.NAME, "computer").query(); 
```

但我的专栏没有名字。我试图用“alter table”更新我的表，但它不起作用。

AnyBody 知道如何在不丢失信息的情况下添加我的专栏名称吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:00:07.630

如果你想改变数据库，在你的 SQLiteOpenHelper 中你应该：

*   更改数据库版本
*   覆盖“onUpgrade”以进行您想要的更改
*   更改 onCreate 方法，这样新用户将拥有您的数据库的好版本，而不是旧版本

如果结构发生较大变化，在 onUpgrade 中将有用信息复制到新数据库并删除旧数据库。

希望能帮助到你：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T19:55:14.233

**编辑：**

对不起，现在我明白了这个问题。您是说您没有`columnName = "..."`为每个字段指定 a ，因此您现在遇到了问题`QueryBuilder`。

尽管建议这样做，但您不需要`columnName`上班。`QueryBuilder`您应该能够返回字段并添加`columnName`与现有架构匹配的静态。例如，如果数据库中的字段是，`"items"`那么您只需将其添加`columnName = "items"`到您的 Java 字段中。我不相信 Sqlite 在列名方面是区分大小写的，但匹配大小写也会很好。

但是你不需要`columnName`. 如果您在数据库中的字段名称是，`"items"`那么您应该能够：

```
itemsDao.queryBuilder().where().eq("items", "computer").query(); 
```

如果您编辑您的问题以显示您的架构和您从中获得的异常`QueryBuilder`，我将能够更具体地做出回应。

* * *

我相信你应该能够做到：

```
 dao.executeRaw("ALTER TABLE `items` ADD COLUMN name VARCHAR;"); 
```

这对你不起作用？[ORMLite](http://ormlite.com/)文档中有一节关于在 Android 下更新架构：

> [http://ormlite.com/docs/upgrade-schema](http://ormlite.com/docs/upgrade-schema)

要引用它，您需要在进行架构更改时更改数据库版本，然后在您的`onUpgrade(...)`方法中执行以下操作：

```
Dao<Account, Integer> dao = getHelper().getAccountDao();
// change the table to add a new column named "age" 
dao.executeRaw("ALTER TABLE `account` ADD COLUMN age INTEGER;"); 
```

如果他们有版本 1，您很可能会关闭数据库版本号，您执行 X 和 Y，但如果他们有版本 2，您只需执行 Y。类似的事情：

```
if (oldVersion == 1) {
  // we added the age column in version 2
  dao.executeRaw("ALTER TABLE `account` ADD COLUMN age INTEGER;");
}
if (oldVersion < 2) {
  // we added the weight column in version 3
  dao.executeRaw("ALTER TABLE `account` ADD COLUMN weight INTEGER;");
} 
```

[Sqlite 限制](http://www.sqlite.org/lang_altertable.html)了您*可以* 使用. 现在您只能重命名列或添加新列。有关更多详细信息，请参阅文档。`ALTER TABLE`

# c++ - omp 减少和 lambda 函数

> ID：12071337
> 
> 赞同：2
> 
> 时间：2012-08-22T10:41:37.750
> 
> 标签：c++, lambda, c++11, openmp

以下简单代码没有给出 gcc 4.7.0 的预期结果。这是正确的还是错误的？

```
 unsigned count_err(std::vector<unsigned> const&num, unsigned mask)
  {
    unsigned c=0;
    // enables to reuse the lambda later (not in this simple example)
    auto f = [&] (unsigned i) { if(i&mask) ++c; };
#pragma omp parallel for reduction(+:c)
    for(unsigned i=0; i<num.size(); ++i)
      f(num[i]);
    return c;
  } 
```

这返回零：`c`从 lambda 函数的减少没有完成。顺便说一句，我希望结果是串行函数返回的结果

```
 unsigned count_ser(std::vector<unsigned> const&num, unsigned mask)
  {
    unsigned c=0;
    auto f = [&] (unsigned i) { if(i&mask) ++c; };
    std::for_each(num.begin(),num.end(),f);
    return c;
  } 
```

以下实现给出了预期的结果（在这两种情况下，执行归约变量增量的代码定义被移动到并行区域中）

```
 unsigned count_ok1(std::vector<unsigned> const&num, unsigned mask)
  {
    unsigned c=0;
    auto f = [&] (unsigned i) -> bool { return i&mask; };
#pragma omp parallel for reduction(+:c)
    for(unsigned i=0; i<num.size(); ++i)
      if(f(num[i])) ++c;
    return c;
  }

  unsigned count_ok2(std::vector<unsigned> const&num, unsigned mask)
  {
    unsigned c=0;
#pragma omp parallel reduction(+:c)
    {
      auto f = [&] (unsigned i) { if(i&mask) ++c; };
#pragma omp for
      for(unsigned i=0; i<num.size(); ++i)
        f(num[i]);
    }
    return c;
  } 
```

`count_err()`给出不同结果的事实是编译器错误还是正确的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T10:49:14.690

我认为这不是编译器错误。这是我的解释。我认为在您的第一个示例中，lambda 持有对全局`c`变量的引用。的线程本地副本`c`是在我们进入 for 循环时创建的。所以线程正在递增相同的全局变量（没有任何同步）。`c`当我们退出循环时， （全部等于 0，因为 lambdas 不知道它们）的线程本地副本被总结为 0。该`count_ok2`版本有效，因为 lambdas 持有对本地`c`副本的引用。

# c - 用 sscanf 读取日期

> ID：12071342
> 
> 赞同：3
> 
> 时间：2012-08-22T10:42:06.773
> 
> 标签：c, parsing, scanf

我必须使用 sscanf 和这行代码从 char* 字符串中读取日期格式（dd-mm-yyyy;）：

```
sscanf(string, "%[^-]-%[^-]-%[^;];", day, month, year) 
```

其中日/月/年是每个 3/3/5 个元素的 char* 字符串。

以这种方式它可以工作，但是当我尝试使用日/月/年作为`integer`变量（相同`sscanf`）时，我在它们上`0 0 0`使用时得到了一个值`printf`。如果我`sscanf`改为

```
sscanf(string, "%d-%d-%d;", day, month, year) 
```

我得到了`segmentation fault`。

任何人都可以帮助我吗？使用 K&R 书，我没有找到解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T10:43:19.427

您需要传递`int`变量的地址：

```
int day, month, year;
sscanf(string, "%d-%d-%d;", &day, &month, &year); 
```

`sscanf()`返回所做的分配数，建议在使用之前检查返回值`day`，`month`并且`year`：

```
if (3 == sscanf(string, "%d-%d-%d;", &day, &month, &year))
{
} 
```

# fixtures - 编程中的固定装置是什么？

> ID：12071344
> 
> 赞同：279
> 
> 时间：2012-08-22T10:42:14.907
> 
> 标签：fixtures, ui-testing, uitest, test-fixture

我多次听说过这个术语（在编程的上下文中），但找不到任何解释它的含义。有什么好的文章或解释吗？

* * *

## 回答 #1

> 赞同：278
> 
> 时间：2013-02-04T10:06:07.813

我认为您指的是[测试装置](http://en.wikipedia.org/wiki/Test_fixture#Software)：

> 测试夹具的目的是确保有一个众所周知的固定环境来运行测试，以便结果可重复。有些人称之为测试上下文。
> 
> 夹具示例：
> 
> *   使用特定的已知数据集加载数据库
> *   擦除硬盘并安装已知的干净操作系统安装
> *   复制一组特定的已知文件
> *   输入数据的准备和假或模拟对象的设置/创建

（来源：维基百科，见上面的链接）

这里还有一些[来自“谷歌测试”框架文档的实际例子](https://github.com/google/googletest/blob/master/docs/primer.md#test-fixtures-using-the-same-data-configuration-for-multiple-tests-same-data-multiple-tests)。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-07-31T05:32:41.783

我认为 PHP 单元测试很好地解释了这一点：

> 编写测试最耗时的部分之一是编写代码以将世界设置为已知状态，然后在测试完成时将其返回到原始状态。这种已知状态称为测试的夹具。

Yii 的文档也很好地描述了夹具测试：

> 自动化测试需要执行多次。为了确保测试过程是可重复的，我们希望在一些称为夹具的已知状态下运行测试。例如，为了测试博客应用程序中的帖子创建功能，每次我们运行测试时，存储有关帖子的相关数据的表（例如 Post 表、Comment 表）都应该恢复到某个固定状态。

这里是夹具测试的简单示例

```
<?php
use PHPUnit\Framework\TestCase;

class StackTest extends TestCase
{
    protected $stack;

    protected function setUp()
    {
        $this->stack = [];
    }

    protected function tearDown()
    {
        $this->stack = [];
    }

    public function testEmpty()
    {
        $this->assertTrue(empty($this->stack));
    }

    public function testPush()
    {
        array_push($this->stack, 'foo');
        $this->assertEquals('foo', $this->stack[count($this->stack)-1]);
        $this->assertFalse(empty($this->stack));
    }

    public function testPop()
    {
        array_push($this->stack, 'foo');
        $this->assertEquals('foo', array_pop($this->stack));
        $this->assertTrue(empty($this->stack));
    }
}
?> 
```

这个 PHP 单元测试具有带有名称的函数`setUp`，`tearDown`在运行测试之前，您可以设置数据，完成后您可以将它们恢复到初始状态。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2019-09-28T18:32:27.977

固定装置一词因上下文、编程语言或框架而异。

**1\. 运行测试所针对的已知状态**

> 编写测试最耗时的部分之一是编写代码以将世界设置为已知状态，然后在测试完成时将其返回到原始状态。这种已知状态称为测试的夹具。 [PHP 单元文档](https://phpunit.readthedocs.io/en/8.3/fixtures.html)
> 
> 测试夹具（也称为测试上下文）是运行测试所需的一组前提条件或状态。开发者应在测试前建立一个已知的良好状态，并在测试后恢复到原来的状态。 [维基百科 (xUnit)](https://en.wikipedia.org/wiki/XUnit#Test_fixtures)

**2\. 包含样本数据的文件**

> 夹具是样本数据的一个花哨的词。Fixtures 允许您在测试运行之前使用预定义的数据填充测试数据库。Fixtures 独立于数据库并用 YAML 编写。每个模型有一个文件。 [RubyOnRails.org](https://guides.rubyonrails.org/testing.html#the-low-down-on-fixtures)

**3\. 设置所需状态的过程。** 

> 软件测试夹具通过为其提供所有必要的代码来初始化它，从而为测试过程设置系统，从而满足可能存在的任何先决条件。一个示例可能是在运行测试之前从客户站点加载具有已知参数的数据库。 [维基百科](https://en.wikipedia.org/wiki/Test_fixture#Software)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-05-24T09:13:55.033

正是针对该主题，JUnit 有一个很好解释的文档。[这](http://junit.org/junit4/cookbook.html)是链接！

文章的相关部分是：

> 测试需要在一组已知对象的背景下运行。这组对象称为测试夹具。当您编写测试时，您通常会发现与实际测试值相比，您花费更多时间编写代码来设置夹具。
> 
> 在某种程度上，您可以通过仔细注意您编写的构造函数来更轻松地编写夹具代码。然而，更大的节省来自共享夹具代码。通常，您将能够为多个不同的测试使用相同的夹具。每种情况都会向夹具发送略有不同的消息或参数，并将检查不同的结果。
> 
> 当你有一个共同的固定装置时，你可以这样做：
> 
> 为fixture的每个部分添加一个字段使用@org.junit.Before注释一个方法并初始化该方法中的变量使用@org.junit.After注释一个方法以释放您在setUp中分配的任何永久资源例如，编写想要使用 12 瑞士法郎、14 瑞士法郎和 28 美元的不同组合的几个测试用例，首先创建一个夹具：

```
public class MoneyTest {
    private Money f12CHF;
    private Money f14CHF;
    private Money f28USD;

    @Before public void setUp() {
    f12CHF= new Money(12, "CHF");
    f14CHF= new Money(14, "CHF");
    f28USD= new Money(28, "USD");
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-07-28T04:23:37.963

我正在写这个答案作为自己关于什么是“夹具”的快速说明。

# 相同数据多次测试

> 测试夹具：对多个测试使用相同的数据配置 如果您发现自己编写了两个或多个对相似数据进行操作的测试，您可以使用测试夹具。这允许您为多个不同的测试重用相同的对象配置。

你可以在[googletest阅读更多](https://github.com/google/googletest/blob/master/googletest/docs/primer.md#test-fixtures-using-the-same-data-configuration-for-multiple-tests-same-data-multiple-tests)

固定装置可用于集成测试期间或开发期间（假设数据来自开发数据库的 ui 开发

# 用于数据库或测试的假用户

myproject/fixtures/my_fake_user.json

```
[
  {
    "model": "myapp.person",
    "pk": 1,
    "fields": {
      "first_name": "John",
      "last_name": "Lennon"
    }
  },
  {
    "model": "myapp.person",
    "pk": 2,
    "fields": {
      "first_name": "Paul",
      "last_name": "McCartney"
    }
  }
] 
```

您可以从 django[文档中了解更多信息](https://docs.djangoproject.com/en/3.0/howto/initial-data/#providing-data-with-fixtures)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-11-08T08:38:38.870

在 Xamarin.UITest 中解释如下：

> 通常，每个 Xamarin.UITest 都编写为称为测试的方法。包含测试的类称为测试夹具。测试夹具包含单个测试或测试的逻辑分组，并负责进行任何设置以使测试运行以及在测试完成时需要执行的任何清理。每个测试都应该遵循 Arrange-Act-Assert 模式：
> 
> *   安排 - 测试将设置条件并初始化事物，以便可以执行测试。
> *   Act – 测试将与应用程序交互、输入文本、按下按钮等。
> *   断言 - 测试检查在 Act 步骤中执行的操作的结果以确定正确性。例如，应用程序可以验证是否显示了特定的错误消息。

[以上摘录原文链接](https://docs.microsoft.com/en-us/appcenter/test-cloud/uitest/)

在 Xamarin.UITest 代码中，它如下所示：

```
using System;
using System.IO;
using System.Linq;
using NUnit.Framework;
using Xamarin.UITest;
using Xamarin.UITest.Queries;

namespace xamarin_stembureau_poc_tests
{
    [TestFixture(Platform.Android)]
    [TestFixture(Platform.iOS)]
    public class TestLaunchScreen
    {
        IApp app;
        Platform platform;

        public Tests(Platform platform)
        {
            this.platform = platform;
        }

        [SetUp]
        public void BeforeEachTest()
        {
            app = AppInitializer.StartApp(platform);
        }

        [Test]
        public void AppLaunches()
        {
            app.Screenshot("First screen.");
        }

        [Test]
        public void LaunchScreenAnimationWorks()
        {
            app.Screenshot("Launch screen animation works.");
        }
    }
} 
```

希望这可能对寻求更好地了解编程中的夹具的人有所帮助。

# mysql - 如何在 TIME_TO_SEC(TIMEDIFF 值的 where 子句中检查 null？

> ID：12071346
> 
> 赞同：0
> 
> 时间：2012-08-22T10:42:17.327
> 
> 标签：mysql

我们可以像这样运行带有 where 子句的 mysql 查询

```
TIME_TO_SEC(TIMEDIFF('2012-08-22 06:25:12',lastEventTime)) >70 
```

我们现在需要检查的是尝试放置 =null 但未显示的空值？需要什么？

示例查询如下，谢谢它的工作。我的下一个问题现在必须索引 lastEvenTime 列吗？

```
SELECT 
    tblTimeLog.timeLogID,
    TIME_TO_SEC(TIMEDIFF('2012-08-22 06:25:12',lastEventTime)) As timeDifference
FROM tblTimeLog
WHERE tblTimeLog.timeID = 2209
And (TIME_TO_SEC(TIMEDIFF('2012-08-22 06:25:12',lastEventTime)) IS NULL  
  OR TIME_TO_SEC(TIMEDIFF('2012-08-22 06:25:12',lastEventTime)) > 100) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:04:33.213

你可以替换这个

```
And (TIME_TO_SEC(TIMEDIFF('2012-08-22 06:25:12',lastEventTime)) IS NULL  
  OR TIME_TO_SEC(TIMEDIFF('2012-08-22 06:25:12',lastEventTime)) > 100) 
```

和

```
and (lastEventTime IS NULL  
OR TIME_TO_SEC(TIMEDIFF('2012-08-22 06:25:12',lastEventTime)) > 100) 
```

or use `coalesce`with a suitably chosen default (in case of `NULL`):

```
and TIME_TO_SEC(TIMEDIFF('2012-08-22 06:25:12',
    coalesce(lastEventTime, '1900-01-01')) > 100 
```

尽管合并位仅与`WHERE`子句相关；`SELECT`如果`NULL`lastEventTime是`NULL`.

# jpa - Play Framework fetch(int max) vs limit

> ID：12071357
> 
> 赞同：2
> 
> 时间：2012-08-22T10:43:06.893
> 
> 标签：jpa, playframework

我正在使用 Play Framework 1.2.4。在模型类中，我们找到了具有许多选项的方法。例如：

```
List<Cat> cats = Cat.find("query").fetch(); 
```

或者我们可以设置一个最大结果，例如：

```
List<Cat> cats = Cat.find("query").fetch(50); 
```

这是否相当于

```
SELECT * from cat LIMIT 50; 
```

我只是想确保在性能方面它们至少是相同的？如果不是，在 Play Framework中获得最后*的最佳方式是什么？*`n records`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T11:51:24.970

`fetch(50)`内部使用`javax.persistence.Query.setMaxResults`. 然后，这将由 Hibernate 翻译成`LIMIT`or `TOP`，具体取决于 DB 方言。因此，就性能而言，它们是相同的。

所以要获取最新的*n*只猫，

```
List<Cat> cats = Cat.find("order by age").fetch(50); 
```

# php - 如何使 PHP upload_progress SESSION 工作？

> ID：12071358
> 
> 赞同：18
> 
> 时间：2012-08-22T10:43:07.580
> 
> 标签：php

在对 php.ini 进行了一系列更改后，我正在尝试进行 upload_progress 会话，例如：

```
session.upload_progress.enabled = On

;session.upload_progress.cleanup = On

session.upload_progress.prefix = "upload_progress_"

session.upload_progress.name = "123"

session.upload_progress.freq =  "1%"

session.upload_progress.min_freq = "1" 
```

并创建了基于 html 的页面，其中包含提交文件的表单：

```
<form action="upload_progress.php" method="POST" enctype="multipart/form-data">
  <input type="hidden" name="<?php echo ini_get("session.upload_progress.name"); ?>" value="123" />
  <input type="file" name="file1" />
  <input type="file" name="file2" />
  <input type="submit" />
</form> 
```

然后是正确上传文件的服务器端脚本：

```
session_start();
move_uploaded_file($_FILES['file1']['tmp_name'], './uploads/'.$_FILES['file1']['name']);
move_uploaded_file($_FILES['file2']['tmp_name'], './uploads/'.$_FILES['file2']['name']);
print_r($_SESSION); 
```

`$_SESSION`尽管文件上传正确完成，但全局变量中有一个空数组。会话设置有什么问题？

我正在使用**PHP 5.4.5**

`Notice: Undefined index: upload_progress_123 in C:\apache\localhost\www\upload_progress.php on line 13`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-12-09T11:30:42.373

在 PHP 中通过会话上传进度**非常棘手**，并且并非所有上下文和情况都有很好的记录。[类似](https://stackoverflow.com/questions/11476940/php-upload-progress-session)[问题](https://stackoverflow.com/questions/23993714/php-session-upload-progress-empty)[的](https://stackoverflow.com/questions/28209633/zf2-file-upload-progress-not-working-for-me)[数量](https://stackoverflow.com/questions/14437406/session-upload-progress) [表明](https://stackoverflow.com/questions/21703081/php-upload-progress-in-php-5-4-is-not-working-session-variables-not-set) [它](https://stackoverflow.com/questions/23351717/session-upload-progress-with-jquery)[会引起](https://stackoverflow.com/questions/40388885/php-file-upload-progress)[麻烦](https://stackoverflow.com/questions/29727436/upload-progress-bar-using-session-in-php-5-4-with-codeigniter)。我个人在这方面已经失去了一天多的时间，所以这是我的建议来帮助你。

1.  明显的基本要求：PHP 版本 >= 5.4.0 且 PHP**不**作为 FastCGI 运行。（[如何发现。](https://stackoverflow.com/a/16414507/2473692)）
2.  为了更好地调试禁用即时会话属性清理`php.ini`

    ```
    session.upload_progress.cleanup = 关闭
    ```

    这样，您可以在上传完成**后检查会话的内容。**
3.  找出 session 的存储位置（变量`session.save_path`in `php.ini`，Linux 机器上的典型值为`/var/lib/php/sessions`）并检查它们，查找以`upload_progress_xxxxxxxxxxx`启动上传命名的索引。

4.  要激活特定的上传进度跟踪，通常会使用隐藏的 HTML 表单元素。它必须在文件**之前**发送。如果您考虑一下，这是合乎逻辑的：当 PHP 处理请求时，它必须首先遇到开始跟踪文件上传进度的信号，然后才能识别文件本身。反之则行不通。

    ```
    <form action="upload_progress.php" method="POST" enctype="multipart/form-data">
        <input type="hidden" 
            name="<?php echo ini_get("session.upload_progress.name"); ?>" value="123" />
        <input type="file" name="myfile1" />
        <input type="submit" />
    </form> 
    ```

5.  小心使用 AJAX 提交。虽然不太可能，但一些 JS 库**可能会**更改 HTTP 请求中元素的顺序。您应该使用浏览器中的开发者工具检查实际的 HTTP 通信，并确保发送的元素顺序与前一点一致。

6.  **会话名称**。虽然您可以在代码中使用任何可能的会话名称，但 PHP 不知道它并**总是将上传进度写入默认会话**，通常`PHPSESSID`（查阅您`php.ini`的属性`session.name`以检查实际值。）[这种行为不是错误。](https://bugs.php.net/bug.php?id=64075)
    如果您介意创建两个会话，您应该更改您的代码以使用默认值，或者更改`session.name`并非总是可能的默认值（例如共享主机）。请注意，该值也可以通过 更改`.htaccess`。

7.  一些 PHP 框架（Zend、Cake PHP）有自己的会话内容结构，当将上传进度写入会话时，PHP 引擎**会破坏会话。**导致存储信息丢失，从而导致退出、跟踪损坏等效果。[问题](https://github.com/zendframework/zendframework/issues/4821)，[问题](https://github.com/zendframework/zendframework/issues/4386)，[问题](https://github.com/zendframework/zendframework/issues/4786)。我得出的结论是，在这种情况下，必须使用 2 个不同的会话。

## 我的最终解决方案

我正在使用 Zend Framework，最后我得到了两个单独的会话。我使用以下纯 PHP 脚本来报告特定文件的上传进度。该脚本与 Zend Framework 完全隔离，并使用默认`PHPSESSID`命名空间。

```
session_start();

if(!isset($_GET['id']))
  die("unsupported");

$id = $_GET['id'];

if(!preg_match('/^[a-zA-Z0-9]{1,32}$/', $id))
  die("unsupported");

$sessionKey = ini_get('session.upload_progress.prefix') . $id;
$uploadInfo = (isset($_SESSION[$sessionKey])) ? $_SESSION[$sessionKey] : null;

$status  = [
    'total'    => 0,
    'current'  => 0,
    'rate'     => 0,
    'message'  => '',
    'done'     => false,
];

if($uploadInfo === null)
{
  header('Content-Type: application/json');
  echo json_encode($status);
  return;
}

$status = $uploadInfo + $status;
$status['total']   = $status['content_length'];
$status['current'] = $status['bytes_processed'];

$time = time() - $status['start_time'];
$status['rate'] = ($time > 0) ? $status['bytes_processed'] / $time : 0;

if (!empty($status['cancel_upload'])) {
    $status['done'] = true;
    $status['message'] = 'The upload has been canceled';
}

header('Content-Type: application/json');
echo json_encode($status); 
```

在 Zend Framework 之上创建的应用程序在`Module.php`'s`onBootstrap()`方法中设置了它自己的会话命名空间：

```
$sessionManager = new \Zend\Session\SessionManager();
$sessionManager->setName('myFancyNamespace');
$sessionManager->start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-23T07:37:24.913

上传进度可以在 $_SESSION 数组中看到，因此可以在另一个 php 请求中查看进度。

**$_SESSION 将在文件上传之前可用，而不是在文件上传之后。所以一旦你处理了文件，它就会消失。在上传文件时，您应该在单独的请求中 print_r。不在同一个请求中。**

就像在这个例子中

check_progress.php

```
<?php 
if(isset($_SESSION['upload_progress_123']))){
   print_r($_SESSION['upload_progress_123']);
}
?> 
```

样本数组

```
<?php
$_SESSION["upload_progress_123"] = array(
 "start_time" => 1234567890,   // The request time
 "content_length" => 57343257, // POST content length
 "bytes_processed" => 453489,  // Amount of bytes received and processed
 "done" => false,              // true when the POST handler has finished, successfully or not
 "files" => array(
  0 => array(
   "field_name" => "file1",       // Name of the <input/> field
   // The following 3 elements equals those in $_FILES
   "name" => "foo.avi",
   "tmp_name" => "/tmp/phpxxxxxx",
   "error" => 0,
   "done" => true,                // True when the POST handler has finished handling this file
   "start_time" => 1234567890,    // When this file has started to be processed
   "bytes_processed" => 57343250, // Number of bytes received and processed for this file
  ),
  // An other file, not finished uploading, in the same request
  1 => array(
   "field_name" => "file2",
   "name" => "bar.avi",
   "tmp_name" => NULL,
   "error" => 0,
   "done" => false,
   "start_time" => 1234567899,
   "bytes_processed" => 54554,
  ),
 )
); 
```

正如 pilif 所说，可以在此处找到完整的教程

[http://www.sitepoint.com/tracking-upload-progress-with-php-and-javascript/](http://www.sitepoint.com/tracking-upload-progress-with-php-and-javascript/)

[http://oliversmith.io/technology/2011/12/04/php-5-4-file-upload-progress-and.html5-progress-bars/](http://oliversmith.io/technology/2011/12/04/php-5-4-file-upload-progress-and.html5-progress-bars/)

也看到这个答案。 [PhP 5.4 中的 PhP 上传进度不起作用。未设置会话变量](https://stackoverflow.com/questions/21703081/php-upload-progress-in-php-5-4-is-not-working-session-variables-not-set)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-10T15:43:18.280

在您的脚本调用`move_uploaded_file()`和连续的点`print_r()`，上传已经完成。

如果您想访问上传进度，您必须

*   将上传的表单提交到不同的浏览器窗口（这样你当前页面上的JS可以继续运行）或框架（使用`target`表单上的属性）
*   使用 ajax 调用反复轮询服务器以查询当前会话的上传进度。

[http://php.net/manual/en/session.upload-progress.php](http://php.net/manual/en/session.upload-progress.php)上的解释是指对同一个会话的不同请求，而不是同一个请求中的数据。

一些谷歌搜索出现了[http://www.sitepoint.com/tracking-upload-progress-with-php-and-javascript/](http://www.sitepoint.com/tracking-upload-progress-with-php-and-javascript/)，其中包含更多细节并提供复制和粘贴示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-07T11:16:11.240

如果您将 DockerCompose 与 NGINX 和 PHP 的单独容器一起使用，则不会更新会话 upload_progress_xxx。它仅适用于设置为“Apache xx Handler”的 PHP Server API。

我删除了 NGINX，而只使用了官方的 PHP/Apache 映像，现在它可以正常工作了。这是我的 Docker-Compose 文件：

```
version: '3'
services:

   php:
     image: "php:7.0-apache"
     ports:
       - "8080:80"
     volumes:
       - ./www:/var/www/
       - ./etc/php/php.ini:/usr/local/etc/php/php.ini 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-21T08:00:02.343

我知道它有点晚了，但也许这可以帮助别人。

确保您已将php.ini 中的**session.autostart**设置为不带引号的“ **On ”。**这对我来说是个问题，所以我得到一个空数组试图跟踪上传进度。

我使用 php 取得了工作上传进度。

请参见：

[https://github.com/TychaK/Track-Upload-Progress-using-Session-Upload-Progress-PHP-JavaScript-Ajax](https://github.com/TychaK/Track-Upload-Progress-using-Session-Upload-Progress-PHP-JavaScript-Ajax)

我希望这可以帮助其他开发人员:-)

# ms-word - 一个词怎么能把它的文件保管起来呢？

> ID：12071361
> 
> 赞同：1
> 
> 时间：2012-08-22T10:43:18.540
> 
> 标签：ms-word, vsto, ms-office

我正在开发一个 Word 插件，旨在创建可随机化的测试银行文档。我希望插件可以防止用户在内容字段之外输入问题和选择的文本。我尝试在内容控件之外应用保护，但这需要插件经常取消保护和重新保护文档，并且存在任何干预错误使文档不受保护的风险。

如果有人可以提出替代方法，我将不胜感激。

呼罗尔·阿斯兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:01:51.670

在尝试了保护/不受保护的方法后，我发现它不允许我在可编辑的内容控件中嵌套锁定的内容控件（用于提供代码定义的内容）。但是，我可以独立设置嵌套内容控件的 LockContents 属性。这就是我将采用的方法。

# sql - SQL统计查询

> ID：12071363
> 
> 赞同：0
> 
> 时间：2012-08-22T10:43:27.407
> 
> 标签：sql, database, statistics

我想收集一些统计数据，我想知道是否可以直接通过数据库查询获取一些最小值、最大值和平均值。

在过度简化中，我有这样的事情：

```
Person  | Account
__________________
Person1 | Account1
Person1 | Account2
Person1 | Account3
Person2 | Account4
Person2 | Account5
.................. 
```

我想找到一个人拥有的最大、最小和平均帐户数。这可以通过 SQL 查询实现吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T10:45:11.883

```
select
    min(accountcount),
    avg(accountcount),
    max(accountcount)
from
(
    select 
        person, count(*) as accountcount
    from 
        yourtable
    group by person
) v 
```

`AVG`将返回平均值，而不是任何其他类型的平均值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T10:46:50.553

是的，您可以使用[聚合](http://msdn.microsoft.com/en-us/library/ms173454.aspx)函数来执行这种类型的操作：

`MAX()` `MIN()` `AVG()`

```
select max(cnt), min(cnt), avg(cnt)
from
(
    select person, count(*) cnt
    from yourtable
    group by person
) x 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T10:47:08.060

您必须按人分组，然后对其进行子查询，如下所示：

```
SELECT MIN(PersonCount), MAX(PersonCount), AVG(PersonCount) FROM 
(SELECT Person, COUNT(*) AS PersonCount FROM PersonAccounts GROUP BY Person)
```

# php - 仅显示数组的特定值

> ID：12071368
> 
> 赞同：0
> 
> 时间：2012-08-22T10:43:56.380
> 
> 标签：php, arrays

我需要将`'pasdiz_alus'`数组中键的特定值显示`$form->data`到表格单元格中。`'pasdiz_alus'`只有当 key的值大于时，我才需要显示这个表行`'0'`。

代码如下，但问题是输出还在`'pasdiz_alus'`我的表格行上方显示键的值，并且它显示的次数与数组键的数量一样多。

如何摆脱“`'pasdiz_alus'`数组中键数的 x 倍（在我的情况下为 29 次 - 数组中有 29 个键）”的值显示？在这种情况下是：5454545454545454......

我的代码是：

```
<table style="width: 800px;">
<tbody>
<?php
if ($form->data['pasdiz_alus'] > 0){
    echo '<tr><td style="width: 100px;">Bilde šeit</td><td style="width: 500px;">  <strong>Pašdizainēts alus</strong></td>';

foreach($form->data as $key => $value) {
    if($key === 'pasdiz_alus')
    echo '<td style="width: 100px;">';
            echo $form->data['pasdiz_alus'];
        echo '</td>';
    }
      echo '<td style="width: 100px;">Cena šeit</td></tr>';
}
?>
</tbody>
</table> 
```

这是输出显示，在这种情况下，值为`'pasdiz_alus'`54 第一行是我需要摆脱的“错误”行，第二行是“正确”行。

```
5454545454545454545454545454545454545454545454545454545454
Bilde šeit      Pašdizainēts alus       54      Cena šeit 
```

感谢您的帮助！Brgds，雷维斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T10:50:48.483

您的脚本中的问题在这里：

```
if($key === 'pasdiz_alus') // <-- missing opening "{"
    echo '<td style="width: 100px;">'; // <-- inside the "if"
    echo $form->data['pasdiz_alus']; // <-- OUTSIDE the "if"
    echo '</td>'; // <-- OUTSIDE the "if"
} // <-- this matches the foreach "{" 
```

为什么循环所有的数组键，而不是直接访问它？

```
<table style="width: 800px;">
    <tbody>
    <?php if ($form->data['pasdiz_alus'] > 0) { ?>
        <tr>
            <td style="width: 100px;">Bilde šeit</td>
            <td style="width: 500px;"><strong>Pašdizainēts alus</strong></td>
            <td style="width: 100px;"><?=$form->data['pasdiz_alus']?></td>
            <td style="width: 100px;">Cena šeit</td>
        </tr>
    <?php } ?>
    </tbody>
</table> 
```

这应该可以解决您的问题，但我建议您`if`甚至在打开桌子之前移动零件：

```
<?php if ($form->data['pasdiz_alus'] > 0) { ?>
<table style="width: 800px;">
    <tbody>
        <tr>
            <td style="width: 100px;">Bilde šeit</td>
            <td style="width: 500px;"><strong>Pašdizainēts alus</strong></td>
            <td style="width: 100px;"><?=$form->data['pasdiz_alus']?></td>
            <td style="width: 100px;">Cena šeit</td>
        </tr>
    </tbody>
</table>
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:51:38.587

```
foreach($array as $k => $v) 
{
  if($k == 'pasdiz_alus' && $v > 0) 
  {
    echo $v;
  }
} 
```

您需要在 if 中添加该添加项以确保仅在它是正确的键且其更大的 0 时才打印

# java - 无法获取 RadioButton.selectedValue

> ID：12071372
> 
> 赞同：0
> 
> 时间：2012-08-22T10:44:11.010
> 
> 标签：java, flex4, typeerror

我正在使用`flex 4.0 an ZK framework`一个项目。
我有 4 个状态，这些状态中有 3 个单选按钮组。
其中 2 个处于第一个状态，其中 1 个处于第 4 个状态。

我的问题是，我可以像这样获得前 2 个单选按钮组的值：

```
smthg.asdfg = DurumRadio.selectedValue.toString(); 
```

但是当我尝试对处于状态 4 的第三个组件做同样的事情时，组件生成但它的值变为 null 并在调试中给我这个错误：

```
TypeError: Error #1009: Cannot access a property or method of a null object reference. 
```

你有什么想法吗？是因为国情不同吗？我之前尝试过更改状态。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:20:09.783

尝试将 itemCreationPolicy="immediate" 属性添加到处于 4.th 状态的单选按钮组。

# objective-c - 如何使用块更改委托方法？

> ID：12071373
> 
> 赞同：1
> 
> 时间：2012-08-22T10:44:10.977
> 
> 标签：objective-c, ios, objective-c-blocks

我想将常规委托模式转换为 UIView 动画那样的异步块。我想做苹果对 UIView 动画所做的事情，我想用这样的东西代替

```
[UIView beginAnimations:nil context:nil];
[UIview setAnimationDuration:0.25f];
[UIView setAnimationDidStopSelector:@selector(myStopSelector)];
[UIView setAnimationDelegate:self];

// Animation stuff

[UIView commitAnimations];

// In another part of my class

- (void)myStopSelector {

    // Completion stuff
} 
```

像这样的东西

```
[UIView animateWithDuration:0.25f animations:^{

    // Animation stuff

} completion:^(BOOL finished) {

    // Completion stuff
}] 
```

就我而言，我在等待异步操作时想要这种行为；现在我正在添加一个观察者，它监听某个协议以完成操作，并获得结果。我想避免使用委托模式来使用像 TW​​Request 这样的异步完成处理程序块

```
[myTWRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {

}]; 
```

我怎样才能做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:10:44.057

因此，您的类将提供一个或多个将块作为参数的方法。您需要决定这些块是否应该在主队列、并发后台队列或串行后台队列上运行。在后一种情况下，您的班级必须创建和管理这些队列。

当某个事件发生后，将运行这些块，它们将块存储在某个容器中，并且当该事件将它们排入队列时。或者您可以暂停队列、添加块并在事件发生时恢复队列。

我建议您做的是创建一个演示项目，并在尝试将代码添加到现有项目之前尝试这些想法。GCD 和 blocks 为您提供了丰富的工具集，您可以创建许多解决方案来实现您的目标。

编辑：

资源：Apple Docs：-“Grand Central Dispatch (GCD) Reference”- 让您对技术的深度和广度有一个很好的了解

*   “并发和应用程序设计” - 更多相同

*   '块编程主题'

Mike Ash 在他的[周五问答](http://mikeash.com/pyblog/)系列中有几篇关于使用块和队列的精彩文章：

# eclipse-plugin - eclipse 说唱套接字编程

> ID：12071375
> 
> 赞同：0
> 
> 时间：2012-08-22T10:44:17.080
> 
> 标签：eclipse-plugin, eclipse-rcp, eclipse-rap

嗨，我使用 eclipse rcp 创建了一个简单的独立聊天程序。有什么方法可以让 eclipse rcp 聊天程序迁移到 eclipse rap 应用程序。我也尝试在 eclipse rap 中使用相同的功能。它不工作。无论如何要在eclipse rap中进行某种套接字编程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:36:20.587

是的，这是可能的。在 Web 上运行 RCP 应用程序是许多人使用 RAP 的目的。您的问题描述不是很具体。您的聊天客户端的网络通信不应与 RCP 应用程序不同。

也许[RAP 开发人员指南](http://eclipse.org/rap/developers-guide/)可以帮助您入门。

# variables - 如何找到 SSIS 包中使用变量的所有地方？

> ID：12071377
> 
> 赞同：2
> 
> 时间：2012-08-22T10:44:27.107
> 
> 标签：variables, ssis, tracking, bids

我有一个 SSIS 包，它有一个用户变量，我需要找出在哪个任务中以及它在包中的使用位置/方式。BIDS 是否有任何方法来跟踪变量的所有引用？

我们可以在记事本中打开 .dtsx 文件，也可以使用 CTRL-F，但我们希望避免查看太多 XML。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T11:49:19.983

您可以[将此](http://bidshelper.codeplex.com/)插件用于您的视觉工作室，它会为您提供有关变量使用位置的视觉反馈。它添加了您可能想尝试的更多好功能。免费！

请参阅下面屏幕截图中右下角的三角形

![在此处输入图像描述](../Images/d54588dd521d81569ce8112b2ae75db6.png)

# linux - Apache 日志 grep、awk 或 sed

> ID：12071378
> 
> 赞同：-1
> 
> 时间：2012-08-22T10:44:29.200
> 
> 标签：linux, bash, sed, awk, grep

我正在尝试从 apache 日志中提取电子邮件地址，但现在使用 awk 或 grep 很幸运。

我已经厌倦了下面但完全迷失了

```
awk  -va="/folder/new/" -vb="_home" 'a {flag=1;next} b {flag=0} flag { print }' 
```

示例日志行：

```
1.2.5.6 - - [01/Aug/2012:16:53:29 +0100] "GET /folder/new/user@example.com_home/some/rubbish/here/ "https://www.website.com/home.php" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.)" 
```

理想情况下，我需要有如下输出

```
user@exmaple.com using MSIE 7.0 on Windows NT 5.1 
```

感谢所有帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:27:11.350

根据数据的可变性，您可以通过指定相关的字段分隔符来做到这一点：

```
awk -F '[/_()]' '{ print $6, $(NF-1) }' log 
```

输出：

```
user@example.com compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:54:58.683

试试这个：

```
grep "@" apache.log | sed -r 's,.*/folder/new/([^@]+@.*)_home.*"([^"]*)"$,\1 using \2,' 
```

我假设“/folder/new/”和“_home”总是这样出现。

使用 GNU sed 版本 4.2.1 对您的线路进行了测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:53:02.123

您可以在 bash 中使用正则表达式

```
regex='/folder/new(.*)_home.*"compatible; (.*); (.*);.*"'
[[ $logStr =~ $regex ]]
user="${BASH_REMATCH[1]}"
browser="${BASH_REMATCH[2]}"
os="${BASH_REMATCH[3]}"

echo "$user using $browser on $os" 
```

我不确定正则表达式是否完全正确；我可能对日志消息中出现的固定字符串做出了一些假设，这些字符串是没有保证的。但是，如果您对这种方法感兴趣，希望这里有足够的内容可以帮助您入门。

# c# - 数据库连接 InfoMessage 回调不会立即为存储的 proc 打印语句触发

> ID：12071390
> 
> 赞同：2
> 
> 时间：2012-08-22T10:45:34.657
> 
> 标签：c#, stored-procedures, odbc, sap-ase

我有几个长时间运行的 Sybase 存储过程，它们带有输出进度消息的打印语句。我们一直使用 isql 或通过 aseisql 或 sqladvantage（所有 sybase 特定工具）手动执行这些 SP。这些工具在 SP 输出后立即正确显示打印消息，因为 SP 都包含“set flushmessage on”。

我编写了一个 C# 控制台包装应用程序，它通常执行一个过程并转换结果。然而令人沮丧的是，我无法捕获打印消息并将它们写入标准输出。这似乎应该是微不足道的，我很惊讶我不能在互联网上出现太多。

我正在使用 ODBC 连接并将必要的事件处理程序添加到 InfoMessage 回调挂钩。在我的测试中，这是通过 print 语句消息调用的——*但不是实时的，因为它们是发布的*。在将结果集发送回客户端之前，它似乎不会被调用，然后只对所有消息调用一次。我尝试使用 DataAdapter 填充 DataSet，使用 ExecuteNonQuery、ExecuteReader 等，但它似乎并没有改变行为。我还尝试了 Sybase System 11 和 Adaptive Server Enterprise ODBC 驱动程序，没有任何区别。

所以我的问题是双重的：

1）首先我想确切地了解这里发生了什么 - 我知道存储过程会立即将消息发送到数据库服务器，但它显然被缓存在某处 - 要么不是由 ODBC 驱动程序从服务器读取，要么读取并缓存在驱动程序内存本身？- 通常我只是想到我的应用程序中的调用线程阻塞了数据库调用，但试图思考到底发生了什么我猜线程在驱动程序代码轮询结果/消息中很忙，我不知道那是怎么回事与回调函数一起工作以及何时处理。在我的应用程序中进行调试似乎就在我获得控制权以处理结果之前被调用。

2）其次，我真正想知道的是是否有任何方法可以改变行为，以便将消息立即发送回客户端。

任何帮助将不胜感激，但请不要提出“你为什么不以 XYZ 方式做事”的建议，因为我真的在寻求解决和理解这个问题的具体帮助 - 如果问题被证明是，我可以想到许多替代方案不可逾越。

这里有一个小测试台来说明代码：

存储过程：

```
create procedure sp_test
as
begin
    set flushmessage on

    print "Step 1"

    waitfor delay "00:00:10"

    print "Step 2"

    waitfor delay "00:00:10"

    select 10 as "number"  -- preferably put some sort of select from a table here

    print "Final Step"

end
go
grant execute on sp_test to public
go 
```

.NET 代码片段：

```
using System.Collections.Generic;
using System.Data;
using System.Data.Odbc;
using System.Data.SqlClient;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
class Program
{
    static void Main(string[] args)
    {
        using (var conn = new OdbcConnection(@"<connection string here>"))
        {
            conn.InfoMessage += OnInfoMessage;
            conn.Open();
            var command = new OdbcCommand("sp_test", conn);
            command.Timeout = 50000;  // i added this later syntax might be wrong
            var ds = new DataSet();
            var da = new OdbcDataAdapter(command);
            da.Fill(ds);
            Console.ReadKey();
        }
    }

    private static void OnInfoMessage(Object sender, OdbcInfoMessageEventArgs args)
    {
        foreach (OdbcError error in args.Errors)
        {
            Console.WriteLine(error.Message);
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T10:55:51.240

尝试`RAISERROR(...) WITH NOWAIT`代替 PRINT

# maven - Maven 存储库

> ID：12071391
> 
> 赞同：1
> 
> 时间：2012-08-22T10:45:38.267
> 
> 标签：maven, mvn-repo

我已经下载了 Maven 存储库中的所有工件。现在我将存储库文件夹内容复制到其他运行 maven 的计算机上。我必须访问这个新的 Maven 命令存储库，但它正在尝试连接到网络以下载所需的工件。我应该怎么办？？有没有办法使用手动创建的这样的存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:45:45.403

您是否使用依赖项的快照版本？如果是这样，Maven 可能仍会尝试连接到远程存储库以检查是否有可用的新版本。但是，您可以通过使用 -o (=offline) 来避免这种情况，如下所示：

```
mvn -o <your_command> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:25:24.017

您是否在 settings.xml 文件中设置了正确的 Maven 存储库路径？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-07T08:41:41.123

发生这种情况是因为您的新机器上可能有不同版本的 Maven，因此，它会在您尝试构建它时尝试安装所有新的兼容插件。所以除了使用完全相同的 maven 版本和相同的设置之外，没有办法绕过它

# wpf - WindowsFormsHost白色第一次

> ID：12071393
> 
> 赞同：0
> 
> 时间：2012-08-22T10:45:48.610
> 
> 标签：wpf, activex, windowsformshost

我有一个 WPF 窗口，它基本上占据了它的整个空间：

```
<WindowsFormsHost Grid.RowSpan="2" Name="wfh" VerticalAlignment="Stretch" Width="Auto" Height="Auto" Cursor="IBeam" ForceCursor="True" SnapsToDevicePixels="True" >
    <ax:AxViewerActiveX x:Name="_axViewer" AutoSize="True"  Cursor="Cross" Margin="0,0,0,0" Padding="0,0,0,0" UseWaitCursor="True">
    </ax:AxViewerActiveX>
</WindowsFormsHost> 
```

我第一次`ShowDialog()`打开这个窗口时，窗口显示为空白： ![在此处输入图像描述](../Images/22f20621e2bd234b12b21a7a9958483b.png)

第二次它应该出现：

![在此处输入图像描述](../Images/a17ace929ac339dc42387a1d8cb5283d.png)

请，有人可以帮助第一次正确地渲染窗口吗？

此窗口类的构造函数：

```
this.InitializeComponent();
_axViewer.BeginInit();
_axViewer.EndInit();

Focus();
_axViewer.Focus(); 
```

调用时很简单：

```
w3d.WindowState = WindowState.Maximized;
w3d.ShowDialog(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:37:41.013

尝试将 ActiveX 控件的初始化放在 .Loaded() 方法中？

```
this.InitializeComponent();
Loaded += delegate {
    _axViewer.BeginInit();
    _axViewer.EndInit();

    Focus();
    _axViewer.Focus();
}; 
```

# php - 如何在固定位置php向文件添加文本？

> ID：12071397
> 
> 赞同：0
> 
> 时间：2012-08-22T10:45:58.977
> 
> 标签：php, file, fopen

我有这个代码：

```
$new_news = '; array(
    \'img\' =>'.$path.',
    \'title\' => '.$_POST["title"].',
    \'text\' => '.$_POST["text"].'
)'; 
```

我需要将它添加到 db.php 中的现有数组中。例如：

```
$news = array(
    array(
    'img' => 'images/egle.jpg', 
    'title' => 'Egle pārtraukusi ',
    'text' => 'Valsts prezidenta Andra ')); 
```

如何使用 fopen() 添加长度为 4 的 $new_news？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:49:24.830

更改`$new_news`为数组，而不是字符串。

```
$new_news = array(
  'img'   => $path, 
  'title' => $_POST["title"],
  'text'  => $_POST["text"]
);

$news[] = $new_news; 
```

# android - 如何使用带有 ActionBar Sherlock 的滑动菜单？

> ID：12071399
> 
> 赞同：4
> 
> 时间：2012-08-22T10:46:11.837
> 
> 标签：android, actionbarsherlock, android-sliding

我正在尝试在使用操作栏 Sherlock 的现有项目中使用滑动菜单。但我无法做到这一点。如果你能给我一个简单的演示或教程来告诉我如何做到这一点，那会很棒吗？我们必须为滑动菜单使用片段吗？

**更新：**

当用户单击滑动菜单列表的项目时，如何更改活动？

有演示吗？请帮忙。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T17:11:20.033

编辑库`SliderMenu`到范围`SherlockActivity`

```
public class SlidingActivity extends SherlockActivity implements SlidingActivityBase { 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T04:26:32.680

按照[https://github.com/jfeinstein10/SlidingMenu中的说明进行操作](https://github.com/jfeinstein10/SlidingMenu)

1.  创建您的滑动布局。
2.  在 onCreate 中：

    ```
    setBehindContentView(R.layout.slide_menu);
    getSlidingMenu().setShadowWidthRes(R.dimen.shadow_width);
    getSlidingMenu().setShadowDrawable(R.drawable.shadow);
    getSlidingMenu().setBehindOffsetRes(R.dimen.actionbar_home_width);
    getSlidingMenu().setBehindScrollScale(0.25f); 
    ```

3.  在活动中：

    ```
    @Override
        public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            toggle();
            return true;
        }
        return super.onOptionsItemSelected(item);
    } 
    ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-30T03:38:10.033

[从（ SlidingMenu GitGub](https://github.com/jfeinstein10/SlidingMenu)）上的说明中我没有发现它很清楚

这是一个屏幕截图，以使其更清晰： ![在此处输入图像描述](../Images/23d00aacd0c893afb7efb87ab28e44b6.png)

# templates - XSLT 中 * 和 node() 的区别

> ID：12071402
> 
> 赞同：32
> 
> 时间：2012-08-22T10:46:37.140
> 
> 标签：templates, xslt, matching

这两个模板有什么区别？

```
<xsl:template match="node()">

<xsl:template match="*"> 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-22T12:30:31.243

```
<xsl:template match="node()"> 
```

是以下的缩写：

```
<xsl:template match="child::node()"> 
```

**这匹配可以通过`the child::`axis**选择的任何节点类型：

*   元素

*   文本节点

*   处理指令 (PI) 节点

*   评论节点。

**另一方面**：

```
<xsl:template match="*"> 
```

是以下的缩写：

```
<xsl:template match="child::*"> 
```

**这匹配任何元素**。

XPath 表达式： someAxis::* 匹配给定轴的主节点类型的任何节点。

对于`child::`轴，主要节点类型是*element*。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-22T11:35:54.937

只是为了说明其中一个差异，即`*`不匹配`text`：

给定xml：

```
<A>
    Text1
    <B/>
    Text2
</A> 
```

匹配上`node()`

```
<xsl:stylesheet
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

    <!--Suppress unmatched text-->
    <xsl:template match="text()" />

    <xsl:template match="/">
        <root>
            <xsl:apply-templates />
        </root>
    </xsl:template>

    <xsl:template match="node()">
        <node>
            <xsl:copy />
        </node>
        <xsl:apply-templates />
    </xsl:template>
</xsl:stylesheet> 
```

给出：

```
<root>
    <node>
        <A />
    </node>
    <node>
        Text1
    </node>
    <node>
        <B />
    </node>
    <node>
        Text2
    </node>
</root> 
```

而匹配`*`：

```
<xsl:template match="*">
    <star>
        <xsl:copy />
    </star>
    <xsl:apply-templates />
</xsl:template> 
```

与文本节点不匹​​配。

```
<root>
  <star>
    <A />
  </star>
  <star>
    <B />
  </star>
</root> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T10:54:59.560

另请参阅[XSL xsl:template match="/"](https://stackoverflow.com/questions/3127108/xsl-xsltemplate-match) 以了解其他匹配模式。

# c# - 从 NCover CruiseControl.Net 中排除 XSD 文件

> ID：12071404
> 
> 赞同：0
> 
> 时间：2012-08-22T10:46:43.660
> 
> 标签：c#, build, cruisecontrol.net, code-coverage, ncover

我想从 CruiseControl 构建后生成的 NCover 报告中排除 XSD 文件。

搜索后，我从[Ncover 网站发现了以下选项](http://ncover.com/support/docs/v3/ref/3-0/ncover-console/configuration/profiling-options)

```
<ExcludeFiles><SourceFile>D:\castletech\operations\dev\ncover\resources\setting.cs</SourceFile></ExcludeFiles> 
```

但是我不能把它放在 CC.NET 配置文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:42:51.663

It seems all this can be done [from the command line](http://ncover.com/support/docs/v3/ref/3-0/ncover-console/command-line/index), see `//exclude-*` attributes. So, it could be solved by feeding correct command line to ncover task in CC.NET. I didn't try it myself, though.

# wordpress - 如何制作这个 http://www.example.com/demo 到 http://www.example.com

> ID：12071408
> 
> 赞同：0
> 
> 时间：2012-08-22T10:46:49.687
> 
> 标签：wordpress

我想将网站从[http://www.example.com/demo](http://www.example.com/demo) .... 移到[http://www.example.com](http://www.example.com)

在不改变任何东西的情况下如何可能意味着 pages-posts-images

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:01:12.860

如果您已经安装了 Wordpress，`http://www.example.com/demo`现在想在 访问它， [Wordpress Codex 中的](http://codex.wordpress.org/Giving_WordPress_Its_Own_Directory#Using_a_pre-existing_subdirectory_install)`http://www.example.com`这篇文章将为您提供帮助。您将分几步完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:48:59.270

将此添加到您的`.htaccess`文件中：

```
Redirect /demo http://www.example.com 
```

并将其添加到您`index.php`的顶级目录中的文件中：

```
 <?php
 include '/demo';
 ?> 
```

# perl - 让 SQLite 在事务错误上表现得更像 Postgres？

> ID：12071409
> 
> 赞同：3
> 
> 时间：2012-08-22T10:46:55.033
> 
> 标签：perl, sqlite, postgresql

注意：RaiseError 设置为 false。

```
$dbh->begin_work;
$dbh->do("..."); # sql1, ok
$dbh->do("..."); # sql2, fails (e.g. syntax error)
$dbh->do("..."); # sql3, ok
$dbh->commit; 
```

这将导致 sql1 和 sql3 的效果被提交，这是不可取的，因为在这种情况下，我希望 SQL 语句一起成功/失败。目前我的解决方法是这样的：

```
eval {
    local $dbh->{RaiseError} = 1;
    $dbh->begin_work;
    $dbh->do("..."); # sql1, ok
    $dbh->do("..."); # sql2, fails (e.g. syntax error)
    $dbh->do("..."); # sql3, ok
    $dbh->commit;
};
$dbh->rollback if $@; # needed, RaiseError does not automatically rollback 
```

但我不太喜欢它。还有其他更简单的选择吗？我更喜欢 Postgres 的行为：

```
$dbh->begin_work;
$dbh->do("..."); # sql1, ok
$dbh->do("..."); # sql2, fails (e.g. syntax error)
$dbh->do("..."); # sql3, ok but fail because transaction status is now aborted
$dbh->commit;    # becomes rollback 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:31:28.260

一种选择是围绕 DBD::SQLite 的 db 句柄实现一个包装器，它跟踪错误状态并在错误后忽略命令，就像 Pg 一样。我没有看到任何迹象表明 DBD::SQLite 可以做到这一点，或者 SQLite 本身就支持这种模式，因此您可能必须在包装器中实现它。

* * *

我最初认为您可能想要[`ON CONFLICT ROLLBACK`](http://www.sqlite.org/lang_conflict.html)而不是 default [`ON CONFLICT ABORT`](http://www.sqlite.org/lang_conflict.html)，但更多阅读表明它不会完成这项工作。

您可以设置冲突和错误处理解决策略。文档建议它在表或每个语句级别工作，但语法映射显示它实际上是逐列的，[适用于 NOT NULL 约束之类的东西](http://www.sqlite.org/lang_createtable.html#notnullconst)。

我不确定`ON CONFLICT ROLLBACK`是否会使 tx 无效，也不确定它是否适用于所有错误。文档有点不清楚。它可能会回滚并进入下一条语句的自动提交模式，这同样糟糕。

# swing - GridPanel 如何确定大小？

> ID：12071410
> 
> 赞同：3
> 
> 时间：2012-08-22T10:46:55.283
> 
> 标签：swing, scala, grid-layout, gridpanel

这是一个非常简单的 Scala GUI 测试：

```
import scala.swing._

object FirstSwingApp extends SimpleGUIApplication {
  def top = new MainFrame {
    contents = new GridPanel(30, 20) {
      contents ++= 1 to 600 map (_ => new Label("test"))
    }
  }
} 
```

每个包含的标签都显示为所需的大小：

![测试](../Images/d78b2599b107548c1265d99dbf1d4340.png)

现在我想`Label`用自定义类型替换：

```
contents ++= 1 to 600 map (_ => new Foo)

class Foo extends Panel {
  override def minimumSize = {
    println("minimumSize")
    new java.awt.Dimension(32, 32)
  }

  override def preferredSize = {
    println("preferredSize")
    new java.awt.Dimension(32, 32)
  }

  override def maximumSize = {
    println("maximumSize")
    new java.awt.Dimension(32, 32)
  }
} 
```

但结果太小了：

![测试2](../Images/696b81c91c2237072e343a01dfc2fefa.png)

显然，没有`xxxSize`调用任何方法，因为程序不产生控制台输出。我到底需要改变什么才能使每个`Foo`都以 32x32 像素的大小显示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T11:26:15.343

这里的问题是这`scala.swing`只是`javax.swing`. 而且`Label`，在这种情况下，它只是一个实例，它被包裹在`javax.swing.JLabel`.

当组件被传递给`javax.swing`系统时，只有组件被传递，而不是包装器。

因此，覆盖包装器上的方法对您没有好处。

但是您可以覆盖实际组件实例上的方法。例如：

```
import scala.swing._
import javax.swing._
import java.awt.Dimension
import javax.swing.JPanel

object Swg extends SimpleSwingApplication {
  class Foo extends Panel {
    override lazy val peer: JPanel = new JPanel with SuperMixin {
      override def getMinimumSize = new Dimension(32, 32)
      override def getPreferredSize = new Dimension(32, 32)
      override def getMaximumSize = new Dimension(32, 32)
    }
  }

  def top = new MainFrame {
    contents = new GridPanel(30, 20) {
      contents ++= List.fill(600)(new Foo)
    }
  }
} 
```

在我的机器上，这给出了一个 640 像素宽和大约 960 像素高的框架——这可能是你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T14:31:47.813

正如 Rogach 所说，问题是你没有改变底层的对等点。这样做的另一种可能性如下：

```
class Foo extends Panel {
   preferredSize = new Dimension(32, 32)
} 
```

# django - 无法将 id 添加到 django formset

> ID：12071411
> 
> 赞同：0
> 
> 时间：2012-08-22T10:46:56.127
> 
> 标签：django, forms, formsets

我在尝试发布表单时遇到错误，这没有多大意义。

错误：

```
MultiValueDictKeyError at /admin/courses/course-selector/add/
"Key 'form-0-id' not found in <QueryDict: 
```

所以我已经完成了谷歌搜索并解决了这个问题，因为我自己正在绘制表格（我已经建立了一个表格并在我想要的地方打印出每个字段）。

所以我尝试添加一个带有 id 的字段并且它不打印。它只是没有模板中的 id 供我写入表单。我不知道现在该怎么做，因为我已经遵循了谷歌针对此案例的既定建议并发现了一个问题。

模板代码。

```
<form action="." method="POST" id="formset">
<table>
    <tr>
        {{ formset.management_form }}
    </tr>
    <tr>
        <th></th>
        {% for field in formset.forms.0 %}
            {% if not field.is_hidden %}
                <th>{{ field.label }}</th>
            {% endif %}
        {% endfor %}

    </tr>

    {% for f in formset.forms %}
        <tr>
            <td><input type="checkbox" id="checkbox_{{ f.id }}" /></td>
            <td>{{ f.id }}</td>
            {% for field in f %}
                {% if not field.is_hidden %}
                    <td>
                        {{ field.errors }}
                        {{ field }}
                    </td>
                {% else %}
                    <td valign="bottom">{{ field }}</
                {% endif %}
            {% endfor %}
        </tr>
    {% endfor %}

   </table>
</form> 
```

为简洁起见剪掉了...

为什么 {{ f.id }} 不输出任何内容。

edit1 添加生成表单集的代码，这可能是我没有得到 id 的原因。

```
 InstanceFormSet = formset_factory(BulkAddInstanceForm, extra=0)
            # build the list for populating the forms
            n, datalist = 0, []
            while n < int(input_data['copies']):
                datalist.append(data)
                n +=1
            formset = InstanceFormSet(initial=datalist) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:10:28.250

我在您的模板中发现了多个错误：

1.  您正在遍历表单集中的所有表单，但您还显示了第一个表单的所有非隐藏字段。这意味着您有重复的字段
2.  稍后您将遍历所有形式的所有字段。但您也两次显示 id 字段。一次作为一个字段，一个作为复选框 id 的一部分。如果表单没有 id 字段，它不会输出任何内容作为 f.id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-14T22:28:07.330

游戏晚了几年，但这就是答案。把这个放在下面`{% for f in formset.forms %}`

```
{{ forloop.counter }} 
```

这将输出与每个表单关联的数字（例如 1、2、3 等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-28T14:57:48.147

我使用 {{forloop.counter0}} 或 {{forloop.counter}} 来计算表单集中表单的 id 应该是什么

# php - PHP执行curl Oauth

> ID：12071420
> 
> 赞同：0
> 
> 时间：2012-08-22T10:47:56.707
> 
> 标签：php, curl, oauth

我想使用 curl 发送以下标头：

```
curl -H 'Authorization: OAuth oauth_signature_method="PLAINTEXT",⤦
⤥oauth_consumer_key="xxx",oauth_token="xxx",oauth_signature="xxx"' ⤦
⤥'https://external.ningapis.com/xn/rest/apiexample/1.0/Photo/recent⤦
⤥?xn_pretty=true&fields=image.url,title&count=2' 
```

以上命令用于命令行使用。任何人都知道如何使用 PHP curl 执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T10:52:28.963

`-H`from curl 命令行位于`CURLOPT_HTTPHEADER`PHP curl[`curl_setopt`](http://php.net/curl_setopt)中。

这应该是您需要的最基本示例：

```
$auth = 'Authorization: YOUR_KEYS';
$url  = 'https://external.ningapis.com/xn/rest/apiexample/1.0/Photo/recent?xn_pretty=true&fields=image.url,title&count=2';

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_HTTPHEADER, array($auth));
curl_exec($ch);
curl_close($ch); 
```

# clearcase - 另一个开发者的变基流

> ID：12071422
> 
> 赞同：1
> 
> 时间：2012-08-22T10:48:07.590
> 
> 标签：clearcase, clearcase-ucm, cleartool

也许这是一个非常基本的问题：我收到通知说开发人员已经完成了他的工作。
但是开发人员没有使用推荐的基线重新调整他的流。

现在，在我想做一个“从 Stream 传递 -> 到默认值”之前，我想重新设置他的流，由于权限问题我不能这样做。
我应该怎么做才能克服这个？

我应该在这个流中创建一个集成视图来做 rebase 吗？
然后我可以正确地执行“从 Stream 传递 -> 到默认值”吗？
不存在合并冲突。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:07:09.703

任何人都可以对流进行变基：您只需要在要变基的流上拥有自己的视图（而不是在父流上：在目标流上）。

但是变基不是交付。你应该先变基。然后交付。

交付将需要相同的东西：您需要查看目标流（这里是您要交付到的流）

在这两种情况下（交付或变基），为避免任何权限问题，请对要更改的流创建自己的视图：我建议为这些操作创建动态视图：使用这些类型的视图，变基或交付将更快完成（即，动态的）。
（速度很重要，因为 ClearCase 太慢了，正如[这个问题](https://softwareengineering.stackexchange.com/questions/161514/some-questions-about-clearcase/161515#161515)和[这篇文章](http://www.javaworld.com/javaworld/jw-08-2012/120809-10-practices-of--highly-ineffective-software-developers.html)中所详述的那样；））

# c# - 如何在特定位置将文本添加到 Word 文档中？

> ID：12071425
> 
> 赞同：8
> 
> 时间：2012-08-22T10:48:19.180
> 
> 标签：c#, ms-word, office-interop

如何写入 Word 文档中的特定位置，例如第 5 行第 50 个字符？我已经搜索了几个小时，但找不到解决方案。

我在用`Microsoft.Office.Interop.Word`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T11:10:19.577

如果您满足于更简单的句子，而不是行：

```
ActiveDocument.Sentences(1).Characters(5).Select
Selection.Collapse
Selection.InsertBefore "added " 
```

VBA中的五个段落和50个空格

```
Selection.Text = String(5, vbCrLf) 
Selection.Collapse wdCollapseEnd
Selection.Text = String(50, " ") 
```

但是，对于特定位置，我更喜欢文本框：

```
Set sh = doc.Shapes.AddTextbox(1, 10, 344, 575, 80)
sh.Name = "Course1" 
```

具有一些属性：

```
sh.Fill.Visible = False
sh.Line.Visible = False
sh.TextFrame.MarginLeft = 0#
sh.TextFrame.MarginRight = 0#
sh.TextFrame.MarginTop = 0#
sh.TextFrame.MarginBottom = 0# 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-19T17:18:23.003

如果您每次都在同一位置插入文本，一个简单的方法是创建一个 .dotx 模板文件，并在该位置添加一个书签。确保模板包含在构建中

```
Doc = Word.Documents.Add("Directory\Filename")
Doc.Bookmarks.Item("BookmarkName").Range.Text = "Text to be inserted" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T10:58:32.203

[在 Word 文档中查找位置以插入表格](https://stackoverflow.com/questions/9603891/finding-a-position-in-a-word-document-to-insert-a-table)

您可以在上述位置找到一些有用的信息。

# java - 电子邮件地址中带有 + 字符的 Java 邮件

> ID：12071426
> 
> 赞同：0
> 
> 时间：2012-08-22T10:48:21.897
> 
> 标签：java, email, jakarta-mail, mail-server

我正在使用 java 邮件从我的应用程序发送邮件，这适用于在电子邮件部分具有字母数字的普通邮件地址。

但是，如果我尝试将邮件发送到电子邮件地址，例如格式

```
email+@domain.com 
```

此时邮件是发送到`email@domain.com`，而不是发送到`email+@domain.com`。

**更新：**有什么方法可以覆盖邮件服务器中 + 字符（通过预处理）的特殊含义（如编码..）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:02:58.697

电子邮件地址的本地部分的解释取决于接收邮件服务器。如果接收服务器将“email”和“email+”视为同一个邮箱，那么您……或您本地的 javamail 库……对此无能为力。

* * *

> 有什么办法可以覆盖邮件服务器中 + 字符的特殊含义（如编码..）

[维基百科关于电子邮件地址](http://en.wikipedia.org/wiki/Email_address#Local_part)的文章中没有提到标准编码或转义机制，我想不起来了。（但您可以通过阅读相关的 RFC 自行研究。）

如果有这样的机制，它将是特定于邮件服务器的。请查阅相关的邮件服务器文档。

# php - Doctrine2 Symfony2 innerJoin QueryException 预期的 Doctrine\ORM\Query\Lexer::T_WITH，得到 'ON'

> ID：12071431
> 
> 赞同：3
> 
> 时间：2012-08-22T10:48:33.220
> 
> 标签：php, mysql, exception, symfony, doctrine-orm

作为我网站的一部分，我正在尝试使用 Symfony2 和 Doctrine2 创建标记（民间文学）系统。

我正在按照以下文档中的表格和查询示例来创建我的教义实体：[http ://dablog.ulcc.ac.uk/wp-content/uploads/2007/12/tagging_folksonomy.pdf](http://dablog.ulcc.ac.uk/wp-content/uploads/2007/12/tagging_folksonomy.pdf)

当我尝试将 MySQL 查询（在文档中给出）转换为 Doctrine Query Builder 查询时，innerJoins 出现错误。下面的例子：

来自文档的 MySQL 查询：

```
SELECT tag_text
, COUNT(*) as num_tags
FROM Tag2Post t2p
INNER JOIN Tags t
ON t2p.tag_id = t.tag_id
GROUP BY tag_text; 
```

我的教义查询生成器查询：

```
$qb = $em->createQueryBuilder()
          ->select('t.tag_text, COUNT(*) as num_tags')
          ->from('CompanyWebsiteBundle:Tag2Post', 't2p')
          ->innerJoin('CompanyWebsiteBundle:Tags', 't', 'ON', 't2p.tag_id = t.id')
          ->groupBy('t.tag_text')
;
$tags = $qb->getQuery()->getResult(); 
```

错误信息：

```
[2/2] QueryException: [Syntax Error] line 0, col 112: Error: Expected Doctrine\ORM\Query\Lexer::T_WITH, got 'ON'
[1/2] QueryException: SELECT t.tag_text, COUNT(*) as num_tags FROM CompanyWebsiteBundle:Tag2Post t2p INNER JOIN CompanyWebsiteBundle:Tag t ON t2p.tag_id = t.id GROUP BY t.tag_text 
```

当我直接在数据库上运行 MySQL 查询时，它可以工作！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T11:03:36.733

这应该有效。在 DQL 中，`ON`关键字被替换为`WITH`.

```
$qb = $em->createQueryBuilder()
      ->select('t.tag_text, COUNT(*) as num_tags')
      ->from('CompanyWebsiteBundle:Tag2Post', 't2p')
      ->innerJoin('CompanyWebsiteBundle:Tags', 't', 'WITH', 't2p.tag_id = t.id')
      ->groupBy('t.tag_text')
;
$tags = $qb->getQuery()->getResult(); 
```

此外，如果您已正确配置实体，您应该能够省略该`, 'WITH', 't2p.tag_id = t.id'`部分，因为学说应该自动找到关系。

例如：

```
$qb = $em->createQueryBuilder()
      ->select('t.tag_text, COUNT(*) as num_tags')
      ->from('CompanyWebsiteBundle:Tag2Post', 't2p')
      ->innerJoin('t2p.tags', 't')
      ->groupBy('t.tag_text')
;
$tags = $qb->getQuery()->getResult(); 
```

# python - 用boto设置hadoop参数？

> ID：12071436
> 
> 赞同：8
> 
> 时间：2012-08-22T10:48:48.697
> 
> 标签：python, boto, elastic-map-reduce

我正在尝试在我的 Amazon Elastic MapReduce 作业上启用错误输入跳过。我正在遵循这里描述的精彩食谱：

[http://devblog.factual.com/practical-hadoop-streaming-dealing-with-brittle-code](http://devblog.factual.com/practical-hadoop-streaming-dealing-with-brittle-code)

上面的链接说我需要以某种方式在 EMR 作业上设置以下配置参数：

```
mapred.skip.mode.enabled=true
mapred.skip.map.max.skip.records=1
mapred.skip.attempts.to.start.skipping=2
mapred.map.tasks=1000
mapred.map.max.attempts=10 
```

如何使用 Boto 在 JobFlow 上设置这些（和其他）mapred.XXX 参数？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-22T10:48:48.697

经过数小时的挣扎、阅读代码和实验，答案如下：

您需要添加一个新的 BootstrapAction，如下所示：

```
params = ['-s','mapred.skip.mode.enabled=true',
          '-s', 'mapred.skip.map.max.skip.records=1',
          '-s', 'mapred.skip.attempts.to.start.skipping=2',
          '-s', 'mapred.map.max.attempts=5',
          '-s', 'mapred.task.timeout=100000']
config_bootstrapper = BootstrapAction('Enable skip mode', 's3://elasticmapreduce/bootstrap-actions/configure-hadoop', params)

conn = EmrConnection(AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY)
step = StreamingStep(name='My Step', ...)
conn.run_jobflow(..., bootstrap_actions=[config_bootstrapper], steps=[step], ...) 
```

当然，如果您有多个引导操作，则应该将其添加到 bootstrap_actions 数组中。

# javascript - css媒体查询请求后刷新jQuery插件

> ID：12071438
> 
> 赞同：0
> 
> 时间：2012-08-22T10:48:48.647
> 
> 标签：javascript, jquery

有谁知道是否有办法在 css 媒体查询更改下刷新/重新加载 jquery？

我在这种情况下创建了一个示例：[https ://dl.dropbox.com/u/23044665/index.html](https://dl.dropbox.com/u/23044665/index.html)

如果您将浏览器的大小调整为小于 960 像素，则浏览器会应用媒体查询，但 jQuery 插件区域宽度保持在 960 像素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:02:13.670

尝试这个

```
$(window).resize(function() {
        slider.reloadShow();
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:03:02.153

如果你想在屏幕尺寸改变时执行额外的 JavaScript 操作，那么添加监听器来改变方向和调整大小以捕捉浏览器改变尺寸或平板电脑/手机上的倾斜。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T10:57:57.027

问题似乎是插件将幻灯片和容器的宽度添加为 HTML 的属性，例如`style="width:960"`，这将覆盖您的样式表/媒体查询中的任何内容。

我建议您使用不同的滑块插件 tbh -[这个](http://www.woothemes.com/flexslider/)插件专为响应性而构建，并在您调整浏览器大小时自动重新计算所有内容

# python - 在 python 中使用自定义字符串的 Mongodb 查询

> ID：12071439
> 
> 赞同：0
> 
> 时间：2012-08-22T10:48:58.727
> 
> 标签：python, mongodb

我正在尝试查询 mongodb 集合，如下所示..

```
>>> db.ds.find({"from":{'$regex':'Pooja'}}).count()
18 
```

但是当我用自定义字符串附加这个相同的查询时，它给了我一个错误..

```
>>> a = 'Pooja'
>>> querystring = ''
>>> querystring = querystring+"'from':{'$regex':"+a+"}"
>>> querystring
"'from':{'$regex':Pooja}"
>>> db.ds.find({querystring}).count()
SyntaxError: invalid syntax
>>> 
```

我确实需要在查询字符串中明确地使用多个参数，所以我正在使用这种方式。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:00:35.900

您的代码中有一些严重的错误。

首先：

```
db.ds.find({querystring}).count()  # SyntaxError here 
```

这行给出的问题是`SyntaxError`因为`{object}`语法是`set`内置类型的文字，它从 Python 2.7.x 版本开始可用，所以，在这里你试图创建一个由一个字符串组成的集合：

```
{object}  # creates set since Python 2.7
{object1: object2}  # creates dict (object1 should be [hashable][1]) 
```

让我们看一个在 Python 2.7 中创建集合的示例：

```
s = {1, 2, 3}  # Creating set of three unique elements ({} - set literal)
d = {1: 'a', 2: 'b'}  # Creating dict of number->letters ({:} - dict literal) 
```

第二件事是 MongoDB Python 驱动程序（我假设您使用 Pymongo）不接受字符串作为查询。它有自己的 API，所有查询都是通过`dict`s 表示 JSON 对象进行的（注意，Mongo 将所有对象存储在 JSON 的二进制表示中，称为 BSON）。

所以在这里，请记住第一个问题，当您尝试创建`set`而不是`dict`) 时。

结论：

1.  使用[`dict`](http://docs.python.org/tutorial/datastructures.html#dictionaries)s 创建适当的[Pymongo](http://api.mongodb.org/python/current/)查询。
2.  正确创建字典（不是集合）。

# object - 转换对象两次？（电晕SDK）

> ID：12071442
> 
> 赞同：0
> 
> 时间：2012-08-22T10:48:59.923
> 
> 标签：object, sdk, transition, coronasdk

我有过渡的问题！例如：我有一个对象和一个按钮。我希望这个对象在我按下按钮时淡出，然后当我再次按下按钮时，我希望我的对象淡入。但我不能淡入我的对象，感觉就像它消失了一样！对于过渡，我使用 transition.to，例如：

> object = transition.to(object, {time=500, alpha=0})

但是当我在这个确切的场景中执行另一个功能以淡入时，它根本不想工作（按钮正在按下，但什么也没发生，甚至是错误）。

请帮帮我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T18:12:19.063

你的代码：

```
 object = transition.to( object, {time=500, alpha=0}) 
```

您正在将转换处理程序保存到对象。尝试这个：

```
 trans = transition.to( object, {time=500, alpha=0}) 
```

然后，如果您想取消转换，您可以执行此操作

```
 transition.cancel(trans) 
```

你可以在这里查看transition.to的用法[http://developer.coronalabs.com/node/2407](http://developer.coronalabs.com/node/2407)

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:36:27.080

试试这个我不知道正确的代码，但它运作良好：

```
local myRectangle = display.newRect(100, 100, 150, 50)
myRectangle.strokeWidth = 3
myRectangle:setFillColor(140, 140, 140)
myRectangle:setStrokeColor(180, 180, 180)

local button = display.newRect(100, 200, 50, 50)
button.strokeWidth = 3
button:setFillColor(140, 140, 140)
button:setStrokeColor(180, 180, 180)

local buttonfun=function(event)
if event.phase=="ended" then
print("fade")
if myRectangle.alpha ==1.0 then
transition.to( myRectangle, { delay=1, time=1000, alpha=1.0, alpha=0.0} )
myRectangle.alpha=0.0
print("alpha"..myRectangle.alpha)
else
transition.to( myRectangle, { delay=1, time=1000, alpha=0.0, alpha=1.0} )
myRectangle.alpha=1.0
print(myRectangle.alpha)
end
end
return true
end
button:addEventListener("touch", buttonfun) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T07:07:43.647

`trans = transition.to( object, {time=500, alpha=0})` 在您第一次按下按钮时写下此内容后 ，您必须让小鸡制作布尔变量以两次执行此操作。第二次再次淡入你必须使`alpha=1`

例如：

```
local  trans 
function  Listner  (event)
transition.cancel(trans)
trans = nil 
end

function  onPress(event)
if(flage== true) then 

flage = false  
trans = transition.to( object, {time=500, alpha=0 , onComplete =Listner  })

else
flage = true
trans = transition.to( object, {time=500, alpha=1 , onComplete =Listner  })

end 
```

# c# - c#中外部dll的位置

> ID：12071447
> 
> 赞同：-1
> 
> 时间：2012-08-22T10:49:25.457
> 
> 标签：c#, wpf, deployment

我是 C# 的新手，开发了一个小型 WPF 应用程序，它依赖于外部 dll 文件。我已将其添加为 Visual Studio 中的参考，并开始使用其中的方法。

当我将此实用程序部署到其他计算机时，我开始面临这个问题。它要求我将外部 dll 文件放在 WPF exe 文件的同一位置。我想避免这种情况。相反，我希望它看起来是一个特定的文件夹（本地或远程）。

有可能这样做吗？

谢谢， 西塔拉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:53:51.903

最好的解决方案是将引用的 LocalCopy 属性设置为 true。这会将其复制到您的输出 exe。

一个非常糟糕的解决方案是在代码（Assembly.Load）中手动加载程序集并将其添加到您的 AppContext。

# c# - 如何更改图像位置

> ID：12071450
> 
> 赞同：-1
> 
> 时间：2012-08-22T10:49:45.667
> 
> 标签：c#, wpf

我正在用 C# 开发 WPF，我有这段代码可以`angry.png`从`smiles`输出文件夹中的文件夹中获取图片（例如`bin\debug`）：

```
BitmapImage bitmap = new BitmapImage(
    new Uri(@"smiles/angry.png",
        UriKind.RelativeOrAbsolute)); 
```

但我想`angry.png`从另一个位置获取图片，例如`Resources\Image\smiles\angry.png`. 您能告诉我如何更改文件夹位置以使其正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:55:47.950

在那种情况下`..\..\Resources\Image\smiles\angry.png`应该足够了。

# android - Android AsyncTask 在 doInBackground 中返回多个值以用于 onPostExecute

> ID：12071451
> 
> 赞同：8
> 
> 时间：2012-08-22T10:49:48.700
> 
> 标签：android

我最近刚刚阅读并测试了 AsyncTask，现在我需要知道如何在 onPostExecute 部分传递多个值。好吧，我使用 JSON 解析器从 web 获取值，但是我从 JSON 获取的值是多个值，我将这些值传递到一个数组中，该数组由获取的每个数据的列标题分隔，这是我应该返回的部分供 onPostExecute 使用。但据我所知，您每次运行只能使用一次 return（如果我错了，请纠正我）。

到目前为止，这是我的代码：

```
public class GetInfo extends AsyncTask<String, Void, List<String>>{

        private final String TAG = null;
        InputStream is = null;
        StringBuilder sb=null;
        List<String> list = new ArrayList<String>();

        @Override
        protected List<String> doInBackground(String... url) {
            String result = "";

            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

                //CONNECT TO DATABASE
                 try{
                         HttpClient httpclient = new DefaultHttpClient();
                         HttpPost httppost = new HttpPost(url[0]);
                         httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                         HttpResponse response = httpclient.execute(httppost);
                         HttpEntity entity = response.getEntity();
                         is = entity.getContent();
                         Log.v(TAG, "connected");
                 }catch(Exception e){
                         Log.v(TAG, "run failed");

                         Log.e("log_tag", "Error in http connection "+e.toString());
                 }

                 //BUFFERED READER FOR INPUT STREAM
                try{
                     BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                     sb = new StringBuilder();
                     String line = "0";

                     while ((line = reader.readLine()) != null) {
                             sb.append(line + "\n");
                     }
                     is.close();
                     result=sb.toString();
                     Log.v(TAG, "buffered read");
                 }catch(Exception e){
                     Log.v(TAG, "buffered error");
                         Log.e("log_tag", "Error converting result "+e.toString());
                 }

                //CONVERT JSON TO STRING
                try{
                     Log.v(TAG, result);

                         JSONArray jArray = new JSONArray(result);
                         JSONObject json_data=null;

                         for(int i=0;i<jArray.length();i++){
                             Log.v(TAG, "loop start");

                                 json_data = jArray.getJSONObject(i);
                                 list.add(json_data.getString("id"));
                                 list2.add(json_data.getString("city"));
                                 Log.v(TAG, "list added");
                         }

                 }catch(JSONException e){
                     Log.v(TAG, "rest failed");
                         Log.e("log_tag", "Error parsing data "+e.toString());
                 }

                 Log.v(TAG, list.toString());

                return list; //I also need to return the list2 here

        }

        @Override
        protected void onPostExecute(List<String> result) {
            cities = result; //lost in this part hahaha!
            showCities();
        }

    } 
```

补充一下，当我只返回一个字符串数组（列表）时，这段代码可以正常工作，但我现在在第二部分感到困惑。此外，城市在 Main 类中声明， ShowCities() 仅用于显示。所以我不费心添加代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T11:02:02.360

你可以做一件事将你的 ArrayList 设为静态并在需要时访问它。

```
public static List<String> LIST = new ArrayList<String>();
public static List<String> LIST1 = new ArrayList<String>();

public class GetInfo extends AsyncTask<String, Void, List<String>>{

        private final String TAG = null;
        InputStream is = null;
        StringBuilder sb=null;

        @Override
        protected List<String> doInBackground(String... url) {
            String result = "";

            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

                //CONNECT TO DATABASE
                 try{
                         HttpClient httpclient = new DefaultHttpClient();
                         HttpPost httppost = new HttpPost(url[0]);
                         httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                         HttpResponse response = httpclient.execute(httppost);
                         HttpEntity entity = response.getEntity();
                         is = entity.getContent();
                         Log.v(TAG, "connected");
                 }catch(Exception e){
                         Log.v(TAG, "run failed");

                         Log.e("log_tag", "Error in http connection "+e.toString());
                 }

                 //BUFFERED READER FOR INPUT STREAM
                try{
                     BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                     sb = new StringBuilder();
                     String line = "0";

                     while ((line = reader.readLine()) != null) {
                             sb.append(line + "\n");
                     }
                     is.close();
                     result=sb.toString();
                     Log.v(TAG, "buffered read");
                 }catch(Exception e){
                     Log.v(TAG, "buffered error");
                         Log.e("log_tag", "Error converting result "+e.toString());
                 }

                //CONVERT JSON TO STRING
                try{
                     Log.v(TAG, result);

                         JSONArray jArray = new JSONArray(result);
                         JSONObject json_data=null;

                         for(int i=0;i<jArray.length();i++){
                             Log.v(TAG, "loop start");

                                 json_data = jArray.getJSONObject(i);
                                 LIST.add(json_data.getString("id"));
                                 LIST1.add(json_data.getString("city"));
                                 Log.v(TAG, "list added");
                         }

                 }catch(JSONException e){
                     Log.v(TAG, "rest failed");
                         Log.e("log_tag", "Error parsing data "+e.toString());
                 }

                 Log.v(TAG, list.toString());

                return LIST; //I also need to return the list2 here

        }

        @Override
        protected void onPostExecute(List<String> result) {
            cities = result; //lost in this part hahaha!
            showCities();
        }

    } 
```

现在您可以在需要时同时使用 LIST 和 LIST1。您也可能不需要在 DoInBackground 中返回 arraylist。

希望它会帮助你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T11:26:02.737

创建一个包含两个列表的新类。使用该类作为返回类型。

# c# - 如何从 asp.net 调用 java web 服务？

> ID：12071452
> 
> 赞同：0
> 
> 时间：2012-08-22T10:49:48.490
> 
> 标签：c#, asp.net, web-services

当我从 asp.net 调用 java web 服务时。它显示错误

```
java.lang.reflect.invocationtargetexception. 
```

我的代码：

```
WebReference Rs = new WebReference();
string GetXMl = Rs.getPosition("dd/mm/yyyy", "dd/mm/yyyy"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:48:19.627

您必须实例化您的代理类，而不是您的服务器类

您可以按照以下步骤操作

1 转到解决方案资源管理器窗口。

2 右键单击​​项目。弹出一个上下文菜单。

3 单击添加 Web 引用菜单。“添加 Web 引用”对话框打开。

4 将 WSDL URL 从我们的 Web 浏览器的地址栏中复制并粘贴到 Add Web Reference 对话框的地址栏中，然后按 go 按钮。

我们可以看到我们的 Web 服务的所有方法名称。

5 使用你的命名空间；

6 接下来，创建 Web 引用的对象。

```
yourTypeProxy proxy = new yourTypeProxy(); 
```

# highcharts - HighCharts - 如果未达到日期，则不显示线条或更改线条样式

> ID：12071453
> 
> 赞同：0
> 
> 时间：2012-08-22T10:49:58.230
> 
> 标签：highcharts

我们正在使用 highcharts 显示与过去几个月的每日销售比较。

![在此处输入图像描述](../Images/f7d0041f08f40d13b87585eaef4f84c2.png)

红线表示当前周。今天是星期三，请注意红线下降到零（我用黄色突出显示了该部分），仅仅是因为星期四还没有到，所以还没有销售。但是，这有下降的趋势。

有没有办法在尚未到来的日子里将线条更改为不同的样式，例如浅灰色虚线，甚至根本没有线条？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:36:09.290

图表只会显示它的数据，如果你想删除它，你可以传递`null`它的值。
这样，您的图表范围从星期一到星期日，但该线将在星期六停止。

[**演示**](http://jsfiddle.net/ricardolohmann/s9qHH/)

# java - java - 如何在java中停止线程，当它被挂起时？

> ID：12071454
> 
> 赞同：1
> 
> 时间：2012-08-22T10:49:59.883
> 
> 标签：java, android, multithreading

挂起时如何停止Java中的线程？我不能使用中断（），因为我无法检查挂起线程中的中断标志。stop() 也被弃用，因为它不安全。

提前致谢。

更新：线程挂在 Socket.connect() 上：

```
Method m = device.getClass().getMethod("createInsecureRfcommSocket",
            new Class[] { int.class });
final BluetoothSocket socket = (BluetoothSocket) m.invoke(device, port);
socket.connect(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T10:53:39.853

干净地关闭线程的唯一方法是必须优雅地停止自己。

如果线程在 Socket 读取或写入等资源上被阻塞，您可以尝试关闭它，它会触发 IOException。如何解除线程阻塞完全取决于它被阻塞的原因。

如果你强制一个线程停止，你已经放弃了它会优雅地停止的想法，在这种情况下`Thread.stop()`或者`System.exit()`是你唯一的选择。

# android - 在 SQLite DB 中插入记录时出错

> ID：12071456
> 
> 赞同：0
> 
> 时间：2012-08-22T10:50:12.613
> 
> 标签：android, sqlite

在以下几行中，我创建了一个图像路径并将该 pth 存储在 sqlite DB 中：

```
private void commitToDB() {
    imgTitle = "img";
    GenerateRandom gr = new GenerateRandom();
    imgTitle +=gr.getRand()+".jpeg";

    db = mpoh.getWritableDatabase();
    cv = new ContentValues();
    File dir = Environment.getExternalStorageDirectory();
    File file = new File(dir,"/DCIM/"+imgTitle);

    cv.put(imgName, imgTitle);
    cv.put(path,file.getAbsolutePath());
    Toast.makeText(getApplicationContext(),imgTitle, Toast.LENGTH_LONG).show();
        long newID = db.insert("MPData", null, cv);

        if (newID == -1) {
        Toast.makeText(getBaseContext(), "Error Commiting Record(s)",  
        Toast.LENGTH_SHORT).show();
        } else {
        Toast.makeText(getBaseContext(), "Data Commited Successfully",  
        Toast.LENGTH_SHORT).show();
    }
 } 
```

我的 SQLite DB 看起来像：

```
@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    db.execSQL(" CREATE TABLE " + MP_TABLE_NAME + " ( " +
            BaseColumns._ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
            " name TEXT, " +
            " lat REAL, " +
            " lng REAL, " +
            " date TEXT, " +
            " time TEXT, " +
            " path TEXT, " +
            " imgName TEXT " +
            ");" );
} 
```

我的问题是，由于 newID= -1，我收到“错误提交记录”

```
 long newID = db.insert("MPData", null, cv);
        if (newID == -1) 
```

还要注意的是，数据库的一个实例是在 onCreate 内部实例化的。

任何解决此问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:59:01.547

你需要得到你的错误信息，（相对于只是-1）

请参阅此处的“insertOrThrow”：[在哪里获取 Android SQLite 中的数据库错误信息（例如，由于违反 not null 导致插入失败）](https://stackoverflow.com/questions/5390102/where-to-get-database-error-information-in-android-sqlite-e-g-failed-insert-du)

这样至少你可以深入研究问题。

# phpmyadmin - 如何从 phpmyadmin 隐藏 information_schema 数据库

> ID：12071460
> 
> 赞同：23
> 
> 时间：2012-08-22T10:50:17.563
> 
> 标签：phpmyadmin, wamp

我可以隐藏数据库不写这一行

```
$cfg['Servers'][$i]['hide_db'] = 'information_schema'; 
```

在 config.inc.php 文件中 pf phpmyadmin。

[可以通过http://www.test.com/phpmyadmin/index.php?db=information_schema&token=3ba37ae1e41f6a10e4afc7c69b934bba](http://www.test.com/phpmyadmin/index.php?db=information_schema&token=3ba37ae1e41f6a10e4afc7c69b934bba)之类的 url 访问该数据库的内容

如何删除 information_schema 数据库的完全访问权限？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2017-04-15T10:52:07.573

按着这些次序：

1.  如果需要，打开 phpMyAdmin，对自己进行身份验证
2.  转到*设置 > 功能 > 数据库*
3.  将要隐藏的数据库列表放入*隐藏数据库*字段中，用竖线 ( `|`) 分隔每个条目，即：`information_schema|performance_schema|mysql|phpmyadmin`
4.  单击*应用*按钮

根据下面*KeshV*的评论，根据您的操作系统（Linux、Windows 等）和环境配置，您可能需要使*config.inc.php*文件可写，以便在服务器或浏览器重新启动之间保持上述更改。

但是，在某些配置和某些*phpMyAdmin*版本中，上述设置直接存储在 cookie 中，并且即使在*config.inc.php*文件中添加了注释也会保留。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-02-09T05:06:53.563

您甚至可以使用管道分隔符隐藏多个数据库

```
$cfg['Servers'][$i]['hide_db'] = 'information_schema|performance_schema|mysql'; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-29T10:34:34.390

如果您还想限制用户从您发布的 url 访问 information_schema 并且您对`hide_db`配置指令不满意，那么您可以在 phpmyadmin 的 config.inc.php 文件中添加以下行。

```
if($_GET['db'] == 'information_schema')exit; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-05-03T05:08:41.240

我会在最高投票的答案上写此评论，但我还没有足够的声誉。

指定多个数据库时，请记住它在 RegEx 规则下运行（如帮助所述）。因此，虽然这不太可能，但放置“information_schema|performance_schema|mysql”也会隐藏包含这些字符串的任何数据库。

相反，输入“^information_schema|performance_schema|mysql$”。在正则表达式中，^ 表示字符串的开头，$ 表示结尾。

这意味着您还可以通过部分字符串隐藏数据库。虽然您应该始终通过 MySQL 用户权限控制数据库访问，但您可以使用部分匹配隐藏数据库组。例如，如果您不希望所有测试数据库都可见，则可以将“^test_”放在隐藏数据库字段中，它将隐藏所有以 test_ 开头的数据库。例如 test_123、test_456。

# c# - 获取 wcf 回调端口而不在配置文件中指定它

> ID：12071462
> 
> 赞同：1
> 
> 时间：2012-08-22T10:50:26.067
> 
> 标签：c#, wcf, ip-address, wcf-client, firewall

我用来在客户端的防火墙`WSDualHttpBinding.ClientBaseAddress`中打开端口。`callback`如何在不在配置文件中指定端口的情况下获取端口？

有一些默认端口吗？或者获取途径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:23:52.583

IIS 使用端口 80，默认情况下 clientBaseAddress 也使用相同的端口

阿南德·凯萨万

# php - 在 wordpress 中使用 ajax 获取自定义字段值

> ID：12071463
> 
> 赞同：1
> 
> 时间：2012-08-22T10:50:29.420
> 
> 标签：php, jquery, ajax, wordpress

这是场景：

*   一个类别中有多个产品（产品表示特定类别中的帖子）
*   每个产品（帖子）都有几个图像（我通过添加自定义字段来管理它）
*   在前端，产品会一起显示
*   在该页面的页脚中会有一个图像滑块
*   单击每个产品名称，将根据单击的产品更改滑块图像

所以我只需要获取与点击的产品相对应的自定义字段值。是否可以使用 AJAX 请求来做到这一点。这样我就可以管理所有这些过程而无需回发。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:57:29.207

我没有 wordpress 的经验，但我可以向您展示 AJAX 的示例。

据我所知，您必须在点击相关帖子或产品时调用 ajax 函数。

```
<script>
  jQuery(document).ready(function () {

    jQuery("#PRODCUTID").click(function () {
      jQuery.ajax({
         type : "POST"
         ,url :"YOUR_URL_ON_WHICH_YOU_PUT_LOGIC_TO_FETCH_IDS_FOR_SLIDER"
         ,data :"CLICKED_PRODUCT_ID="+CLICKED_PRODUCT_ID // this the variable which will be posted and will find it (particular URL which you passed) on the controller action or in view file
         ,success : function(data){               
            //YOUR CODE HERE WHICH IS REPLACING PRODUCT ID  
         }
         ,beforeSend: function(html){
          //some kind of loader or text mean while data is waiting for the response
                },
          });
      })
})
</script> 
```

希望这会有所帮助，并随时询问 AJAx 请求的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:06:36.317

这很容易。当然感谢 Rajat Modi 对 ajax 的帮助。干得好 ：

将此添加到模板文件中的 functions.php 中：

```
wp_enqueue_script( 'ajax-script', get_stylesheet_directory_uri().'/js/myajax.js', array('jquery'), 1.0 ); // jQuery will be included automatically
    // get_template_directory_uri() . '/js/script.js'; // Inside a parent theme
    // get_stylesheet_directory_uri() . '/js/script.js'; // Inside a child theme
    // plugins_url( '/js/script.js', __FILE__ ); // Inside a plugin
    wp_localize_script( 'ajax-script', 'ajax_object', array( 'ajaxurl' => admin_url( 'admin-ajax.php' ) ) ); // setting ajaxurl

    add_action( 'wp_ajax_ajax_action', 'ajax_action_stuff' ); // ajax for logged in users
    add_action( 'wp_ajax_nopriv_ajax_action', 'ajax_action_stuff' ); // ajax for not logged in users
    function ajax_action_stuff() 
    {
        $post_id = $_POST['post_id']; // getting variables from ajax post
        // doing ajax stuff
        $custom_fields = get_post_custom($post_id);
        $imageurlset = $custom_fields['images'];
        $urlstring = $imageurlset[0];
        $imageurl = explode(',', $urlstring);
        //update_post_meta($post_id, 'post_key', 'meta_value');
        exit(json_encode($imageurl)); // stop executing script
    } 
```

创建以下代码并将其添加到“/js/script.js”：

```
$(document).ready(
    function() {
        $('.prduct_name').click(function () {
        $('.spcl_content').find('.prduct_name').removeClass("selected");
        $(this).addClass("selected");
        var ithis = $(this);
        $.post(ajax_object.ajaxurl, {
            action: 'ajax_action',
            post_id: ithis.attr("id")
        }, function(data) {
            var number_of_images = data.length;
            //console.log(data);
            var image_link="";

            for(var i=0; i<number_of_images; i++)
                {
                     var image_url = data[i];
                     image_link = image_link+'<li><a href="'+image_url+'" rel="scroller" target="temp_win"><img src="'+image_url+'"/></a></li>'

                }

            //console.log(image_link); // alerts 'ajax submitted'
            var starting='<div class="wt-scroller"><div class="prev-btn"></div><div class="slides"><ul class="slider_mania">';
            var ending='</ul></div><div class="next-btn"></div><div class="lower-panel"></div></div>';
            var total=starting+image_link+ending;
            //console.log(total);
            $(".container_carol").html(total).fadeIn("slow");

        },"json");

    return false;

    }); 
```

我希望现在很清楚。再次感谢回复我的朋友。祝你有美好的一天。:)

# nsarray - NSarray 中的 NSObject 是否知道它在数组中的位置？

> ID：12071473
> 
> 赞同：0
> 
> 时间：2012-08-22T10:51:17.130
> 
> 标签：nsarray, nsobject

我在 UITableView 中显示了一个 NSArray 对象。用户可以点击一个单元格，当前行中的项目将显示在新视图中

```
MYItem *selectedItem = [myItems objectAtIndex:[indexPath row]];
[itemViewController setMyItem:selectedItem]; 
```

[self navigationController] pushViewController:itemViewController 动画：YES];

这工作正常。但是从这里，新视图，我想添加一个按钮，将用户带到数组中的下一个项目

```
-(IBAction)nextItem:(id)sender
{
// I imagine that this have to contain something like 
  MyItem *selectedItem =[myItems objectAtCurrentIndex+1];
...
...

} 
```

不幸的是，没有 objectAtCurrentIndex 这样的东西。我是否必须运行一个循环来识别当前的索引号？还是有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:57:22.873

一个对象不知道他开箱即用的位置。循环将是一种解决方案。您可以向代表位置的对象添加一个 int，但您必须自己管理

# html - 将 Div 直接放在文本框下

> ID：12071482
> 
> 赞同：2
> 
> 时间：2012-08-22T10:51:40.723
> 
> 标签：html, css

我在使用 CSS 将 Div 直接放在文本框下时遇到了一些问题。我需要直接在文本框下的 Div，最好只使用 CSS/CSS3 过渡。我已经尝试了我所知道的，但所有尝试似乎都失败了。如果有人可以帮助我，我会很高兴。

图 1 是我尝试放置 Div 的方式，图 2 是现在的方式：http: [//i49.tinypic.com/2h31zjp.jpg](http://i49.tinypic.com/2h31zjp.jpg)

**CSS：**

```
input {
  top:18px; left:20px;
  width:1230px; padding:4px;
  border:1px dashed grey;
  font:16px arial;
  font-weight:bold;
  color:#d8d8d8;
}

input:focus+p {
  height:200px;
}

p {
  overflow:hidden;
  height:0;
  width:1230px;
  background-color: transparent;
  border:1px dashed gray;
  transition:height.5s;
  -moz-transition:height 0.5s;
  -o-transition:height 0.5s;
  -webkit-transition:height 0.5s;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:02:57.650

您必须放置第`<input>`一个，然后是`<div>`. 可以使用换行符将 div 下推`<br>`。由于输入本身有一个默认边框，由浏览器完成，因此有可能在多个浏览器中改变外观。所以你必须为你的 定义一个实心边框`<input>`，比如一个 1px 的边框。您还可以在您的或您的父容器中定义`margin: 0`和。`padding: 0``html``body`

***[这](http://jsfiddle.net/blasteralfred/AmdAc/)***是您所要求的现场演示。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T10:53:34.600

检查 div 元素的边距和填充以及文本元素的边距。它应该全部为0以实现您想要的一切。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T11:01:18.817

试试这个

```
input{

     font-family:Verdana, Geneva, sans-serif; color:#900    ;
     background-color:#CCC; width:100%
}
p{
    padding:0;
     margin:0;
    width:100%;
    height:150px;
    border:#063 dotted 2px;
    background-color:#9C3   
}

<input name="" type="text" />
<p>Lorem ipsum</p> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T11:21:55.213

可能是因为你给定了 padding:4px; 输入。将其替换为 0px；

# excel - 将 excel 中的尺寸重新格式化为标准的 11 位格式

> ID：12071490
> 
> 赞同：1
> 
> 时间：2012-08-22T10:52:29.803
> 
> 标签：excel, format

我正在努力进行一些我试图对其进行计算的测量。我有各种尺寸，例如 287x60x90 或 90x600x90，我想将其重新格式化为 287x060x090 等，因此我可以开始将数据拆分为 3 个单独的列，分别显示长度、宽度、高度。尝试使用以下 =text(A1,"000x000x000") 进行格式化，但它没有用，谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:23:47.070

您可以使用公式尝试这种方式：

![Excel 数据示例](../Images/83e2a96bd08bba5993258fdf2b2f05be.png)

### B2中的公式

```
=MID(A2,1,FIND("x",A2)-1) 
```

*法语版*：

```
=STXT(A2;1;CHERCHE("x";A2)-1) 
```

### C2中的公式

```
=MID(A2,FIND("x",A2)+1,FIND("x",A2,FIND("x",A2,1)+1)-FIND("x",A2)-1) 
```

*法语版*：

```
=STXT(A2;CHERCHE("x";A2)+1;CHERCHE("x";A2;CHERCHE("x";A2;1)+1)-CHERCHE("x";A2)-1) 
```

这个可能有更好的方法，比如使用[这个技巧](http://excel.tips.net/T003324_Finding_the_Nth_Occurrence_of_a_Character.html)，但我没有弄清楚。

### D2 中的公式

```
=MID(A2,FIND("x",A2,FIND("x",A2)+1)+1,LEN(A2)) 
```

*法语版*：

```
=STXT(A2;CHERCHE("x";A2;CHERCHE("x";A2)+1)+1;NBCAR(A2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T18:44:58.787

假设您的数据位于从 A1 开始的 ColumnA 中，最简单的方法可能是将 Text to Columns, Delimited, Delimiters Other (only)`x`应用于 ColumnB 中 ColumnA 的副本。

这可能会绕过您对 11 位格式的需求，但如果需要，则在 E1 中并复制下来以适应：

```
=TEXT(B1,"000x")&TEXT(C1,"000x")&TEXT(D1,"000") 
```

# iphone - UISwitch 不以其他语言显示开/关

> ID：12071496
> 
> 赞同：0
> 
> 时间：2012-08-22T10:52:53.067
> 
> 标签：iphone, objective-c, cocoa-touch, uiviewcontroller, uiswitch

我在 ViewController 中使用 UISwitch，它显示为 ON 和 OFF，但是当我更改为 french 和 spanish 等不同的语言时，UISwitch 显示为 1/0 。是什么原因 ？如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:58:20.617

[在这里](https://stackoverflow.com/questions/3758053/iphone-uiswitch-text-in-non-english-language-is-i-o-instead-of-on-off-in-some-l)找到答案。您无需担心。它在全世界的 iOS 中很常见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:53:20.150

你可以试试这个自定义开关，

[https://github.com/domesticcatsoftware/DCRoundSwitch](https://github.com/domesticcatsoftware/DCRoundSwitch)

# html - 边框图像不会在 chrome 中呈现块的内部背景

> ID：12071504
> 
> 赞同：2
> 
> 时间：2012-08-22T10:53:33.847
> 
> 标签：html, google-chrome, css

当我在块上使用border-image 属性时，块的内部部分——内容所在的地方——保持透明。

那时我的[精灵图像](http://games4e.com/image-border_sprite.png)有一个完全不透明的白色内部。

我可以通过添加具有正确背景的内部 div 来规避这个问题，但这并不优雅。有没有办法让精灵的内部部分显示而无需额外的块变通方法？谢谢

[问题演示页面](http://games4e.com/border-test.php)（请在 Chrome 中查看）

来源：

```
 <style type="text/css">
    body { background: orange; padding: 30px; }
    .filling { background: white; height: inherit; margin-top: -16px; }
    .box {
        margin: auto auto;
        width: 200px; height: 200px;
        border-width: 31px 25px 25px 20px;
        -moz-border-image: url(image-border_sprite.png) 31 25 25 20 / 31px 25px 25px 20px stretch;
        -webkit-border-image: url(image-border_sprite.png) 31 25 25 20 / 31px 25px 25px 20px stretch;
        -o-border-image: url(image-border_sprite.png) 31 25 25 20 / 31px 25px 25px 20px stretch;
        border-image: url(image-border_sprite.png) 31 25 25 20 / 31px 25px 25px 20px stretch;
    }
</style>

<div class="box">
    <p>Why does the page background show through??</p>
</div>
<br /><br />
<div class="box">
    <div class="filling">
        <p>It should look like this!</p>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:50:48.203

我不知道为什么会这样，可能是 chrome 错误。

然而，这是一个修复。

将此添加到您的`.box`CSS

```
-moz-background-clip: padding-box;
-webkit-background-clip: padding-box;
background-clip: padding-box;
background-color: white; 
```

这将添加白色背景颜色并将其剪辑到其内容（包括填充）。更多信息`background-clip`可以在[这里](http://css-tricks.com/transparent-borders-with-background-clip/)找到。

* * *

**工作示例。**

[http://jsfiddle.net/blowsie/u8ctc/](http://jsfiddle.net/blowsie/u8ctc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:44:53.530

对于任何有同样问题的人，我刚刚找到了一个更直接的解决方法：**fill**属性。似乎在最近的边框图像草案中，默认行为设置为保持框的内部*透明*。如果你想从你的图像精灵中渲染内部，你应该添加**fill**。例如，

转这个：border-image: url(image-border_sprite.png) 31 25 25 20 / 31px 25px 25px 20px 拉伸；

变成这样：border-image: url(image-border_sprite.png) 31 25 25 20**填充**/31px 25px 25px 20px 拉伸；

从我的测试来看，这消除了添加背景并将其剪切到填充框的需要（尽管感谢您的回答）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-14T11:03:59.693

在使用具有属性的类时，我在边框上遇到了同样的错误。当我将属性更改为 . 而不是：CSS - img.pic1 {width...} htm -

我用了 ：

CSS - .pic1 {宽度...} html =

修复了我所有的图像错误......

# jquery - 最小化jquery代码

> ID：12071510
> 
> 赞同：0
> 
> 时间：2012-08-22T10:53:42.597
> 
> 标签：jquery

我目前有这个 jquery 代码

```
$('#f1').click(function() {
$('#bg').addClass('f1');
});

$('#f2').click(function() {
$('#bg').addClass('f2');
});

$('#f3').click(function() {
$('#bg').addClass('f3');
}); 
```

问题是，对于我想做的事情，我需要写很多次，所以想知道如何缩短它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T10:55:10.757

使用[多重选择器](http://api.jquery.com/multiple-selector/)或给这些元素一个公共类（如果你有更多元素会更好）：

```
$('#f1, #f2, #f3').click(function() { // $('.foo').click(...)
    $('#bg').addClass(this.id);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:55:49.537

给他们一个选择器类，然后

```
$('.foo').click(function() {
  $('#bg').addClass(this.id);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T11:00:13.687

为所有这些添加一个类，然后执行以下操作：

```
 $('.class').click(function() {
      $('#bg').addClass($(this).attr('id'));
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T12:24:18.693

假设您不想使用课程（正如其他人所说），请将您的功能与点击分配分开。

```
var clickHandler = function(){ 
   $('#bg').addClass(this.id); 
};
$('#f1, #f2, #f3').click(clickHandler); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T10:57:51.037

有多种方法，如果您有许多这样的#fx div，这里还有另一种方法：

```
var prefix = "f";

$("[id^="+prefix+"]").click(function() {
    $('#bg').addClass(this.id);
}); 
```

或者，如果您的所有元素都在一个“容器”元素中：

```
$("#fContainer").children().click(function() {
    $('#bg').addClass(this.id);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T10:55:49.083

我们可以这样做吗。

```
 for(var i=1; i<=3;i++)
 {
    $('#f' + i).click(function() {
       $('#bg').addClass('f' + i);
    });
 } 
```

# forms - Cakephp form submission - $fieldList and Security component

> ID：12071511
> 
> 赞同：0
> 
> 时间：2012-08-22T10:53:46.367
> 
> 标签：forms, security, cakephp, components, fieldlist

Let's assume that the Security Component in cakephp is enabled.

When creating a form, for example for user registration (/users/add), is it needed to use the $fieldList when saving the data in the controller:

```
$this->User->save($this->request->data, true, $fieldList); 
```

Or the allowed fields are already defined and guarded by the Security Component?

Thank you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:56:20.840

If the fields are named correctly, you can just use this:

```
$this->User->save($this->request->data); 
```

If you want to validate the data from the form, you can additionally use the validation that can be implemented through the Model.

# c++ - Boost::python 静态方法返回类的实例

> ID：12071512
> 
> 赞同：2
> 
> 时间：2012-08-22T10:53:50.027
> 
> 标签：c++, boost-python

以下是我的`C++ class`

```
namespace X {
  class ChildFactory: public Father {
  public:
    static ChildFactor* createChildFactory(const properties* ptr = NULLPTR);
  private :
    // no instances allowed
    ChildFactory();
    ChildFactory(const properties* ptr);
    ~ChildFactory();
  };
}; 
```

以下是我定义`Boost::Python`构造的方式。

```
BOOST_PYTHON_MODULE(TestPy) 
{
  boost::python::class_<X::ChildFactory, boost::noncopyable>("ChildFactory")
    .def("createChildFactory", &X::ChildFactory::createChildFactory,  boost::python::return_value_policy<boost::python::manage_new_object>() )
    .staticmethod("createChildFactory")
  ;
} 
```

但它给了我奇怪的编译器模板错误。

错误是

```
destructor could not be generated because a base class destructor is inaccessible 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T07:58:11.027

尝试将您的班级公开为`no_init`：

```
class_<Foo, boost::noncopyable>("Foo", no_init); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:08:09.617

`manage_new_object`可能会使用`auto_ptr<>`which requires `delete pointer_to_ChildFactory`to work which requires access to `~ChildFactory()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T03:07:06.297

`destructor could not be generated because a base class destructor is inaccessible`

那你解决了吗？

如果不是，那意味着您在`private`类的部分中声明了构造函数，这就是无法访问它的原因。事实上你不能实例化那个类，它只能用作单例。

移动你的

```
ChildFactory();
~ChildFactory(); 
```

到公共部分，让我们知道。

# c++ - 如果指向成员函数的指针为 NULL，则方法的部分特化

> ID：12071516
> 
> 赞同：0
> 
> 时间：2012-08-22T10:54:00.170
> 
> 标签：c++, templates, member, partial-specialization

我有一个带有 2 个参数的模板类和一个花哨的 push_back 方法：

```
template<class Element, void (Element::*doWhenPushingBack)()> 
class StorableVector {
    public:
        ...
        void push_back(Handle< Element > e) {
            this->push_back_< IsNull<static_cast<void *>(doWhenPushingBack)>::value >(e);
        };
    private:
        template <int action> void push_back_(Handle< Element > e);
        template<> void push_back_<0>(Handle< Element > e) { m_elements.push_back(e); };
        template<> void push_back_<1>(Handle< Element > e) { ((*e).*(doWhenPushingBack))(); m_elements.push_back(e); };
        std::vector< Handle< Element > > m_elements;
}; 
```

它用

```
template <void * param>   class IsNull {
public:
    enum {value = 0 };
};
template <>   
class IsNull<NULL> {
public:
    enum {value = 1 };
}; 
```

这段代码无法编译（错误 C2440: 'static_cast' : 无法从 'void (__thiscall pal::InterfaceFunction::* const )(void)' 转换为 'void *' 1> 没有进行此转换的上下文是可能的）。

在运行时执行 (!!doWhenPushingBack) 检查工作正常，但看起来有点傻 - 编译时输入的检查需要在编译时进行。

你能帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:30:18.627

您可能会有类似的行为：

```
class Fred
{
public:
  void yabadabadoo() { std::cout << "yabadabadoo" << std::endl; }

  void wilma() { std::cout << "Wilmaaaaaaa!" << std::endl; }
};

template <typename E>
struct Nothing
{
  void operator()(E const &) const { }
};

template <typename E, void (E::* memfun)()>
struct Something
{
  void operator()(E e) const { (e.*memfun)(); }
};

template <typename E, typename Pre = Nothing<E>>
class MyVec
{
public:
  void push_back(E e) { Pre()(e); m_vec.push_back(e); }

protected:
private:
  std::vector<E> m_vec;
};

void stackoverflow() 
{
  MyVec<Fred> silent;
  MyVec<Fred, Something<Fred, &Fred::yabadabadoo>> yab;
  MyVec<Fred, Something<Fred, &Fred::wilma>> wil;

  Fred fred;
  silent.push_back(fred);
  yab.push_back(fred);
  wil.push_back(fred);
} 
```

任何认真的优化编译器（即不超过 20 年左右）都应该优化 Nothing::operator() 的空函数调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:07:56.757

你可以写

```
 void push_back(Handle< Element > e) {
        this->push_back_< doWhenPushingBack == 0 >(e);
    }; 
```

无需使用`IsNull`模板。

# wordpress - 如何用标题查询wordpress页面内容

> ID：12071518
> 
> 赞同：0
> 
> 时间：2012-08-22T10:54:16.237
> 
> 标签：wordpress

我得到了一个代码片段，它将回显特定页面的内容，

```
$id = 123;
$post = get_page($id);
$content = apply_filters('the_content', $post->post_content);
echo $content; 
```

如何插入指定页面的 h1 标题标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:21:18.270

我不确定我是否理解你的问题。如果您希望在 h1 标签中显示帖子标题，请尝试以下操作：

```
<?php
$id=123;
$post = get_page($id);
echo '<h1>' . $post->post_title . '</h1>
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T08:27:47.420

```
<?php
   echo '<pre>';
   $page_id = 107;
   $page_data = get_page( $page_id );
   echo '<h3>'. $page_data->post_title .'</h3>';
   echo apply_filters('the_content', $page_data->post_content); 
 ?> 
```

# android - onPrepareOptionMenu（菜单菜单）有问题吗？

> ID：12071520
> 
> 赞同：0
> 
> 时间：2012-08-22T10:54:28.120
> 
> 标签：android, optionmenu

```
flipper = (ViewFlipper) findViewById(R.id.vFslideshow);

    flipper.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            flipper.showNext();

        }
    });
}

@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    if(flipper.isFlipping()){

        menu.removeItem(0);

    }else{

        menu.removeItem(1);

    }

    return true;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(0, 0, 0, "start slideshow");
    menu.add(0, 1, 1, "stop slideshow");
    menu.add(0, 2, 2, "close");

    return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
    case 0:
        flipper.setFlipInterval(1000);
        flipper.startFlipping();
        break;
    case 1:
        flipper.stopFlipping();
        break;
    case 2:

        this.finish();

        break;
    }

    return true;
} 
```

正如你们所看到的，我正在尝试使用其 onPrepareOptionMenu(Menu menu) 检查某些条件以显示选项菜单

但是我得到的输出有点连线，所以如果有人可以帮助我理解为什么我会得到意外的输出。

输出：当此活动第一次启动/触发时，它显示两个选项（通过按下菜单按钮）“开始幻灯片放映”和“关闭”，并在单击选项菜单中的“开始幻灯片放映”后，翻转器开始翻转，这很好。但现在如果我按下菜单按钮并弹出选项菜单，它只显示一个“关闭”选项。想知道为什么它不显示“停止幻灯片”。

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:47:00.130

所以答案是：为隐藏在 onprepareoptionmenu 中的菜单项实现 onOptionsMenuClosed(Menu menu) 和 setVisible=true。

这是溶胶代码：

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    if(flipper.isFlipping()){

        menu.getItem(0).setVisible(false);

    }else{

        menu.getItem(1).setVisible(false);

    }

    return true;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(0, 0, 0, "start slideshow");
    menu.add(0, 1, 1, "stop slideshow");
    menu.add(0, 2, 2, "close");

    return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
    case 0:
        flipper.setFlipInterval(1000);
        flipper.startFlipping();
        break;
    case 1:
        flipper.stopFlipping();
        break;
    case 2:

        this.finish();

        break;
    }

    return true;
}

@Override
public void onOptionsMenuClosed(Menu menu) {
    super.onOptionsMenuClosed(menu);

             menu.getItem(0).setVisible(true);
             menu.getItem(1).setVisible(true);

} 
```

# javascript - JQuery facebook 订阅插件鼠标事件

> ID：12071527
> 
> 赞同：1
> 
> 时间：2012-08-22T10:55:21.660
> 
> 标签：javascript, jquery, facebook, plugins, mouseevent

我试图在用户单击 Facebook 订阅插件后执行脚本，但是当我单击它时，事件没有触发。

```
 <script type="text/javascript">
   $(document).mousedown(function(){
   alert("clicked");
   });
   </script> 
```

当我单击除订阅按钮本身之外的所有内容时，它会起作用。

帮助？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:48:56.067

好像暂时不可以了……

这可能会回答您的问题： http: [//facebook.stackoverflow.com/questions/10403703/handling-a-click-on-facebooks-subscribe-button](http://facebook.stackoverflow.com/questions/10403703/handling-a-click-on-facebooks-subscribe-button)

希望有帮助！

# c# - 如何确定仅在类库项目中使用的类？

> ID：12071528
> 
> 赞同：1
> 
> 时间：2012-08-22T10:55:21.783
> 
> 标签：c#, oop, class, scope, visibility

我有一个包含一些公共类和许多内部实用程序类的类库。这些实用程序不应该对链接到 DLL 的人可见/不可用。

```
namespace MyProject {
    public class PublicClass { }
}
namespace MyProject {
    internal class UtilClass { }
} 
```

当我这样做时，VS 会触发错误，例如“UtilClass 比 PublicClass.Member 更难访问”

难道我做错了什么？我应该怎么做？我见过我不能使用的带有私有类的库。我如何得到这种行为？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T11:00:47.940

这意味着您**的**. 编译器不允许这样做，因为外部程序集能够访问公共成员，但成员本身的类型是内部的，因此不是不可访问的。`UtilClass``PublicClass`

**使该成员成为内部成员而不是公开成员。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:58:34.650

你的错误很常见。例如，如果您有两个类：

```
public class PublicClass { ... } 
```

和

```
private class PrivateClass { ... } 
```

这将不返回任何错误。但是，如果您将 PublicClass 添加一个属性，例如

```
public PrivateClass MyProperty { ... } 
```

你会得到一个错误。因为该属性对于您的库的用户是可见的，但该属性的类型是不可见的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T11:02:19.180

我怀疑您没有向我们展示完整的代码，因为您提供的代码应该可以工作。

您必须具有返回内部类 EG 实例的公共方法或属性

```
namespace MyProject 
{
    public class PublicClass 
    {
        public UtilClass DoSomething() {} 
        public UtilClass { get; }
        // External assemblies cannot see the UtilClass  type which is
        // why this does not work.
    }
} 
```

这显然不能完成，因为外部程序集需要知道它。

如果您确实需要一个公开行为而不公开您的内部类型的公共属性，那么请考虑拥有一个您的实用程序类可以实现的接口。

这将允许您将帮助程序类保留在内部，但仍将其（通过接口）公开给外部程序集。

```
internal class UtilClass : IMyPublicInterface 
{ 
}

namespace MyProject 
{
    public class PublicClass 
    {
        public IMyPublicInterface DoSomething() {} 
        public IMyPublicInterface { get; }
        // External assemblies now only need to know about the public interface.
    }
} 
```

# mysql - 查询在实时服务器上的运行速度比在本地机器上慢

> ID：12071531
> 
> 赞同：3
> 
> 时间：2012-08-22T10:55:35.043
> 
> 标签：mysql

我有一个从 ASP.Net 应用程序调用的查询。从我的本地机器运行时，它运行大约 0.1 秒。当我将应用程序发布到实时服务器时，相同的查询需要 > 40 秒。

两个代码库完全相同，并且针对完全相同的服务器。我检查了任何防火墙问题，并且我的机器和实时服务器都与数据库服务器位于同一个域中。

我可能错过了什么，什么可能会大大减慢这个查询的速度？

编辑：当前结构的插图。

![在此处输入图像描述](../Images/3e5a7ae07e89196e748f27a3d68baac5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:57:36.117

这难道不能通过还托管其他应用程序/站点的实时服务器来解释 - 即对机器资源的需求？只是一个想法...

# c++ - 为什么 C 和 C++ 没有内置方法来检查整数溢出？

> ID：12071532
> 
> 赞同：21
> 
> 时间：2012-08-22T10:55:36.657
> 
> 标签：c++, c, integer-overflow

为什么 C 和 C++ 不提供一组实现提供的操作来执行每个基本整数操作并提供溢出检查（例如 a `bool safeAdd(int *out, int a, int b)`）。

据我了解，大多数指令集都有方法来判断操作是否溢出（例如 x86 溢出和进位标志），并且在有符号整数的情况下也会发生定义。

因此，编译器不应该比用 C 和 C++ 编写的代码做得更好，创建更简单和更快的操作吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T11:11:53.610

C 和 C++ 遵循“你不需要为不需要的东西付费”的中心原则。因此，默认算术运算不会偏离底层架构的单一算术运算指令。

至于为什么没有标准库函数来添加两个整数和检测溢出，我不能说。首先，该语言似乎将有符号整数溢出定义为[未定义的行为](http://en.wikipedia.org/wiki/Integer_overflow)：

> 在 C 编程语言中，有符号整数溢出会导致未定义的行为，

考虑到有多种方法可以实现有符号整数（一个补码、二进制补码等），并且在创建 C 时，这些架构都很普遍，这是可以理解的为什么这是未定义的。如果没有大量关于底层平台的信息，就很难实现一个“安全*”的*纯 C函数。*它可以在逐个 CPU 的基础上完成。

但这并不意味着不可能。如果有人可以通过更安全的溢出助手找到向 C 或 C++ 标准机构提出的建议，并且能够了解它们被拒绝的原因，我肯定会感兴趣。

无论如何，在实践中有[很多方法](https://stackoverflow.com/questions/199333/best-way-to-detect-integer-overflow-in-c-c)可以检测算术溢出和库来提供帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-22T11:04:43.537

可能是因为没有需求。算术溢出是未定义的行为，明确表示允许实现进行此类检查。如果编译器供应商认为这样做会销售更多编译器，他们会的。

实际上，编译器比程序员更有效地完成它们将非常非常困难。验证所有数字输入的范围几乎是标准程序，可以证明以后的操作不会溢出的范围。所有优秀的程序员都习惯于这样做。所以这意味着`if` 输入后立即快速，无需进一步检查。

尽管如此，众所周知，程序员会犯错误，而且当您稍后更改计算时很容易忘记更正验证。我想在编译器中看到这样的功能。但显然，它不会帮助销售编译器，或者至少供应商认为它不会，所以我们不明白。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-22T11:19:10.543

这个问题经常出现。

首先，请记住，C 被定义为可**移植**且**高效**。因此，它被设计为仅提供由*大量*硬件支持的操作（可能在 x86 甚至出现之前）。

其次，许多编译器为此类操作提供（[或计划提供](http://clang-developers.42468.n3.nabble.com/RFC-Introduce-overflow-builtins-td3838320.html)）内置函数，以便用户可以使用在后台使用这些内置函数的类类型。内置函数实现的质量并不像编译器*意识到*它们的含义可以在它们被证明无用时优化检查这一事实重要（尽管它是）。

最后，还有其他方法可以实际检查程序。例如，静态分析或[特殊编译模式](http://lists.cs.uiuc.edu/pipermail/llvmdev/2012-August/052501.html)和单元测试可以及早检测到这些缺陷并避免（或多或少完全）将这些溢出检查嵌入到发布版本中。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-22T12:15:22.917

因为它很少需要。您何时真正需要检测整数溢出？在几乎所有需要检查某个范围的情况下，通常由您定义实际范围，因为该范围完全取决于应用程序和算法。

什么时候你真的需要知道结果是否超出了范围，`int`而不是知道结果是否在特定算法的允许域内，或者索引是否在数组的范围内？是你给你的变量一个语义，语言规范只为你提供类型的整体范围，如果你选择的类型不符合你的需要，那是你的错。

整数溢出是 UB，因为你很少真正关心它。如果我`unsigned char`在操作过程中溢出，我可能选择了错误的类型来累积 1000 万个数字。但是在运行时了解溢出对我没有帮助，因为我的设计无论如何都被破坏了。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-22T11:30:46.650

一个更好的问题可能是：为什么整数溢出未定义行为？实际上，99.9% 的 CPU 使用二进制补码和进位/溢出位。所以在现实世界中，在汇编器/操作码级别，整数溢出总是定义明确的。事实上，很多汇编程序或与硬件相关的 C 语言都严重依赖于定义明确的整数溢出（尤其是定时器硬件的驱动程序）。

最初的 C 语言，在标准化之前，可能没有详细考虑过这样的事情。但是当 C 被 ANSI 和 ISO 标准化时，它们必须遵循一定的标准化规则。不允许ISO标准偏向于某种技术，从而在竞争中赋予一定的公司优势。

所以他们不得不考虑一些 CPU 可能会实现一些模糊的东西，比如补码、“符号和大小”或“一些实现定义的方式”。他们必须允许有符号的零、填充位和其他晦涩的有符号整数机制。

正因为如此，有符号数的行为变得非常模糊。你不知道当 C 中的有符号整数溢出时会发生什么，因为有符号整数可能用二进制补码、一个补码或其他一些实现定义的疯狂表示。因此整数溢出是未定义的行为。

这个问题的明智解决方案不是发明一些安全范围检查，而是声明 C 语言中的所有有符号整数都应具有二进制补码格式，故事结束。那么 unsigned char 将始终为 0 到 127 并溢出到 -128 并且一切都将被明确定义。但是人为的标准官僚机构阻止了标准变得理智。

C标准中有很多这样的问题。对齐/填充，字节序等。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-08-22T11:11:29.893

为什么？好吧，因为当 C++ 从那开始时它们还没有在 C 中，并且因为从那时起没有人提出这样的函数并成功地说服编译器制造商和委员会成员相信它们足够有用，可以提供。

请注意，编译器[确实](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/gcc/Other-Builtins.html) [提供](http://gcc.gnu.org/onlinedocs/gcc-4.7.1/gcc/Target-Builtins.html)了此类内在函数，因此并不是它们反对它们。

还要注意，有一些命题可以标准化[定点算术](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3352.html)和[无界精度整数类型之类](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3375.html)的东西。

所以可能只是兴趣不够。

# iphone - iOS ViewDidLoad/WillLoad 等 NSURLConnection

> ID：12071541
> 
> 赞同：1
> 
> 时间：2012-08-22T10:56:06.527
> 
> 标签：iphone, objective-c, ios, uitableview, nsurlconnection

我有一个相当复杂的问题，如果有人能回答我将非常感激。所以基本上我有一个 tableView，如果你选择一行，它会转到另一个视图。这个 detailView 将访问 Web 服务器并检索数据。我的问题是找不到服务器。

当由于互联网连接不良或服务器是内部服务器等而无法访问服务器时，它会显示一条警报消息。但是，当我在警报消息上单击“确定”，然后在表格视图中选择另一行时，警报消息不会出现。它甚至也没有进入第二类（在我的例子中是 jsonviewcontroller）。

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
//Navigation logic may go here. Create and push another view controller.
NSLog(@"DID SELECT");
Item *selectedItem = (Item *)[self.fetchedObjectsArray objectAtIndex:indexPath.row];
NSString * urlString = [CONST_FEED_DISCRIPTION_URL stringByAppendingString:selectedItem.guid];
NSDate * dateString = selectedItem.date;
JsonViewController *jsonViewController = [[JsonViewController alloc] initWithURLString:urlString date:dateString];
UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle:@"Back" 
                                                               style:UIBarButtonItemStyleBordered
                                                              target:nil
                                                              action:nil];
self.navigationItem.backBarButtonItem = backButton;
self.navigationController.navigationBar.tintColor = [UIColor colorWithHexString:CONST_NAVIGATIONBAR_COLOR];
[self.navigationController pushViewController:jsonViewController animated:YES];
[backButton release];
[jsonViewController release];
} 
```

当您单击另一行时，它确实进入此方法并更改导航栏等的颜色，如代码中所写，但不完全进入 jsonviewcontroller。虽然第一次这样做。我在想这可能是因为 jSonviewcontroller 的视图从未加载，因为我正在从 viewwillappear 访问服务，并且由于视图从未出现，因此它不会进入 viewdidload。我不知道我在这里缺少什么。

```
- (void)viewWillAppear:(BOOL)animated
 {
     NSMutableURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://x"] cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:60];
_rssFeedDetailViewConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

    while(!finished) {
      [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
  } 
```

}

NSURLConnection 的委托方法也被实现了——

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
responseData = [[NSMutableData alloc] init];
  }

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
      [responseData appendData:data];
      _json_string = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

  }

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    if ([error code] == kCFURLErrorNotConnectedToInternet) {
        // if we can identify the error, we can present a more precise message to the user.
        NSDictionary *userInfo = [NSDictionary dictionaryWithObject:NSLocalizedString(@"No Connection Error", @"Error message displayed when not connected to the Internet.") forKey:NSLocalizedDescriptionKey];
         NSError *noConnectionError = [NSError errorWithDomain:NSCocoaErrorDomain code:kCFURLErrorNotConnectedToInternet userInfo:userInfo];
         [self handleError:noConnectionError];
} else {
     // otherwise handle the error generically
     [self handleError:error];
  }
     finished = FALSE;
     [responseData release];
     [connection release];
   // Show error message
 }

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
      finished = TRUE;
      [responseData release];
      [connection release];
 } 
```

如果有人可以帮助我解决这个问题，那就太好了。谢谢你。我的问题再次是 - 为什么我的 JSONVIEWCONTROLLER 没有第二次从 didselectrow 方法加载。

# ext-direct - Ext Direct 与 sencha touch 2

> ID：12071542
> 
> 赞同：0
> 
> 时间：2012-08-22T10:56:08.437
> 
> 标签：ext-direct

我正在尝试使用 Ext direct 的 Remoting API 来调用远程方法。但是在点击以下 URL 时出现错误：“http://10.112.202.164:8080/TestProject/app.html”

错误：通过 XHR 同步加载失败：'\TestProject\direct\undefined.js' 请验证文件是否存在。
XHR 状态码：404 这个 GET 请求是在 POST 请求之后发送的，POST 请求很好地获取了所需的响应，但是之后这个 GET 请求被触发了，不知道为什么？

我的代码如下：

应用程序.html：

```
<!DOCTYPE html>

<!-- Auto Generated with Sencha Architect -->
<!-- Modifications to this file will be overwritten. -->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>MyExtDirct</title>
    <link rel="stylesheet" type="text/css" href="lib/resources/css/sencha-touch.css"/>
    <script type="text/javascript" src="lib/sencha-touch-all-debug.js"></script>
    <script type="text/javascript">
        Ext.ns("Ext.app.REMOTING_API");
        Ext.app.REMOTING_API =         {"descriptor":"Ext.app.REMOTING_API","url":"http://10.112.202.164:8080/TestProject/AjaxHandler","type":"remoting","actions":{"TestAction":[{"name":"getCountry","len":0,"formHandler":false}]}};
        Ext.Direct.addProvider(Ext.app.REMOTING_API);
    </script>
    <script type="text/javascript" src="app.js"></script>
    <script type="text/javascript">
        if (!Ext.browser.is.WebKit) {
            alert("The current browser is unsupported.\n\nSupported browsers:\n" +
                "Google Chrome\n" +
                "Apple Safari\n" +
                "Mobile Safari (iOS)\n" +
                "Android Browser\n" +
                "BlackBerry Browser"
            );
        }
    </script>
</head>
<body></body>
</html> 
```

应用程序.js：

```
Ext.require([
    'Ext.direct.*'
]);

Ext.application({
    stores: [
        'MyDirectStore'
    ],
    views: [
        'MyFormPanel'
    ],
    name: 'MyApp',

    launch: function() {

        Ext.create('MyApp.view.MyFormPanel', {fullscreen: true});

    }

}); 
```

MyDirectStore.js：

```
Ext.define('MyApp.store.MyDirectStore', {
    extend: 'Ext.data.Store',

    config: {
        autoLoad: true,
        storeId: 'MyDirectStore',
        proxy: {
            type: 'direct',
            directFn: TestAction.getCountry,
            reader: {
                type: 'json',
                record: 'countryName'
           }
        },
        fields: [
            {
                name: 'countryName'
            }
        ],
        listeners: [
            {
                fn: 'onStoreLoad',
                event: 'load'
            }
        ]
    },

    onStoreLoad: function(store, records, successful, operation, eOpts) {
        Ext.Msg.alert( "Information", "Loaded " + records.length + " records");
    }

}); 
```

MyFormPanel.js：

```
Ext.define('MyApp.view.MyFormPanel', {
    extend: 'Ext.form.Panel',

    config: {
        items: [
            {
                xtype: 'textfield',
                itemId: 'mytextfield',
                label: 'Country',
                store: 'MyDirectStore'
            }
        ],
        listeners: [
            {
                fn: 'onMytextfieldFocus',
                event: 'focus',
                delegate: '#mytextfield'
            }
        ]
    },

    onMytextfieldFocus: function(textfield, e, options) {
        var store = Ext.getStore('MyDirectStore');
        store.load();
        TestAction.getCountry(function(result, event) {
            var transaction = event.getTransaction(),
            content;

        if (event.getStatus()) {
            content = Ext.String.format('<b>Successful call to {0}.{1} with response:</b><pre>{2}</pre>',
                transaction.getAction(), transaction.getMethod(), Ext.encode(result));
        } else {
            content = Ext.String.format('<b>Call to {0}.{1} failed with message:</b><pre>{2}</pre>',
                transaction.getAction(), transaction.getMethod(), event.getMessage());
        }

            //updateMain(content);
            //field.reset();
        });
    }

}); 
```

测试动作.java：

```
public class TestAction {
    public String getCountry()throws JSONException{
        String country = "India";
        JSONObject object = new JSONObject();
        object.put("countryName", country);
        object.put("success", true);
        String result = object.toString();
        return result;
    }

} 
```

AjaxHandler.java：

```
public class AjaxHandler extends HttpServlet {
    private static final long serialVersionUID = 1L;
    /**
     * @see HttpServlet#HttpServlet()
     */
    public AjaxHandler() {
        super();
        // TODO Auto-generated constructor stub
       // Object o= SecurityContextHolder.getContext().getAuthentication(); 

    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        handleAjaxRequest(request, response);
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        handleAjaxRequest(request, response);

    }

    private void handleAjaxRequest(HttpServletRequest request, HttpServletResponse response)throws IOException{

        String className = "";
        String methodName = "";
        StringBuffer jb = new StringBuffer();
          String line = null;
          try {
            BufferedReader reader = request. getReader();

            while ((line = reader.readLine()) != null)
              jb.append(line);
          } catch (Exception e) { /*report an error*/ }

          JSONObject jsonObject = null;
          try {
            jsonObject = new JSONObject(jb.toString());
          } catch (Exception e) {
            // crash and burn
            throw new IOException("Error parsing JSON request string");
          }
        try {
            className = jsonObject.getString("action");
            methodName = jsonObject.getString("method");
            if(className!=null && methodName!=null){
            Object obj =Class.forName("com.hcl.ml.bean" +"."+ className).newInstance();
            //Class[] types = new Class[] {HttpServletRequest.class};
            Method method = obj.getClass().getMethod(methodName);
            Object data = method.invoke(obj);   
            reply(response, data.toString());
            }
        } catch (Exception e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }   

    }

    private void reply(HttpServletResponse response,String data) throws IOException{
        response.setContentType("application/json;charset=UTF-8");
        //response.setContentType("text/xml");
        //ServletOutputStream out = response.getOutputStream();
        //out.println(data);
        PrintWriter out = response.getWriter();
        out.print(data);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:32:28.287

请确保您的回复中有`type`=> `rpc`。

`undefined.js`由于内部`direct.type`未定义变量而触发的请求。您应该通过 type:`rpc`填充此变量并避免此错误。

# .net - 如何在我的测试项目中使用来自另一个文件夹/位置的可执行文件/DLL？

> ID：12071546
> 
> 赞同：1
> 
> 时间：2012-08-22T10:56:29.040
> 
> 标签：.net, visual-studio-2010, deployment, dependencies

我正在`Visual Studio 2010`为我现有的项目创建一个测试项目。我添加了一个`DLL`在我正在为其创建此测试项目的项目中使用的参考。

现在的问题是，在添加该 DLL 的引用后，当我尝试执行测试时，我得到一个运行时异常

```
System.IO.FileNotFoundException: Could not load file or assembly 
'SOME NAME, Version=2.5.2.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified 
```

我已经通过将该`Copy Local`引用的属性更改为 True 来解决这个问题。但我不想把它改成真的。因为我不想在测试项目的调试文件夹中复制它。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:48:14.110

这是我几年前问自己的一个**重要问题，并找到了以下实用的解决方案：**

*   将所有应用程序 dll（要测试）放入`$root$\bin\Debug`
*   将所有测试 dll 放入`$root$\bin`
*   对于每个测试 dll 或 exe，都有一个`App.config`类似于以下内容的文件（请注意，我`.\Debug`当然包含在探测路径中，但也`.\NUnit\bin`因为我将 NUnit 程序集放在那里）

<?xml version="1.0" encoding="utf-8" ?> <configuration> <runtime> <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1"> <probing privatePath=" **Debug;NUnit\ bin** " /> </assemblyBinding> </runtime> </configuration>

![在此处输入图像描述](../Images/db4191760c8e875b1bb12be576fb7346.png)

顺便说一句，只是从不使用`Copy Local = true`，我写了关于这个主题的[白皮书](http://www.ndepend.com/WhiteBooks.aspx)（它可以将编译时间减慢**10 倍**！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:39:12.327

当我们谈论 VS 2010 中的测试项目时。然后我们有“Local.testsettings”文件，在“解决方案项目”目录内的测试解决方案中自动创建。

为了提供对测试项目中所需的可执行文件/Dll 的引用，我们需要添加它们的引用，并且如果我们不想创建这些 ececutables/DLL 的本地副本，我们需要修改这个“Local.testsettings”文件。

现在的问题是在这个文件中要改变什么？在 Visual Studio 中双击此“Local.testsettings”文件。转到“单元测试”菜单项。为要加载的程序集提供根文件夹。（这可以是您希望在我们的测试项目中使用可执行文件/DLL 的任何目录）。使用“添加文件夹”按钮在运行测试时使用的文件夹中提供相同的文件夹。

注意：要保存此文件，您需要替换之前的文件。点击“应用”按钮。然后单击“另存为”按钮，选择旧“Local.testsettings”文件的位置并替换该文件。

对我来说，在我的测试项目中，我没有创建测试项目中使用的任何 DLL 的本地副本。更改“Local.testsettings”文件后，我可以成功运行我的测试。

# python - LXML：无法导入 etree

> ID：12071547
> 
> 赞同：8
> 
> 时间：2012-08-22T10:56:37.643
> 
> 标签：python, html-parsing, lxml, python-import

我去了这个页面并下载了 tar 文件：`http://pypi.python.org/pypi/lxml/2.3.4#downloads`

然后我将 lxml 文件夹复制到我的 Python26/Lib 文件夹中。现在，当我转到解释器并键入时，`from lxml import etree`我得到了错误：`cannot import etree`。有人知道出了什么问题吗？我正在运行窗户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T10:58:12.433

最好按照[安装说明进行](http://lxml.de/installation.html)；lxml 有一些需要编译的 C 组件。

我猜你在 Windows 上，在这种情况下[二进制鸡蛋](http://lxml.de/FAQ.html#where-are-the-binary-builds)应该可以工作。在 PyPI 上，包含适用于 Windows 的二进制鸡蛋的最新版本是[2.3](https://pypi.python.org/pypi/lxml/2.3)，但您可以在[其他地方找到更新的（非官方）安装程序](http://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T10:59:33.063

简单地解压缩存档并移动它不是安装 Python 包的方式。您通常`python setup.py install`从文件夹运行；但在 Windows 上有更简单的方法。

转到[此链接](http://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml)下载和您正在使用的 Python 版本的安装程序。

# android - 内存泄漏、位图、碎片

> ID：12071552
> 
> 赞同：2
> 
> 时间：2012-08-22T10:57:02.100
> 
> 标签：android, android-memory

我有一个活动，其中包含一个带有画廊的片段。当我开始另一个活动时，基本上，我想释放充满画廊位图的内存。

我的片段是这样动态插入的：

```
FragmentManager fragmentManager = getSupportFragmentManager();
    FragmentTransaction fragmentTransaction = fragmentManager
            .beginTransaction();

    if (_promoFragment == null) {
        _promoFragment = new TabletPromoFragment();
    }

    fragmentTransaction.replace(_singlePageContainerId, _promoFragment);

    fragmentTransaction.commit(); 
```

我什至在活动的 onPause 中调用 _promoFragment.onDestroyView，但 MAT 仍然显示有一个 Gallery 对象包含对位图的这些引用。

你有什么建议？

ps 如果更清楚，我可以发布 MAT 报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-26T21:35:12.570

在片段和活动的生命周期之后，您会遇到引用和**对象在内存中的问题。**

[看看我对这个帖子的回复](https://stackoverflow.com/questions/38592211/memory-not-freeing-after-fragment-is-removed/38595895#38595895)

**您必须确保在销毁片段/活动时没有留下任何参考**。确保清除其所有使用情况和历史记录，以便 Android 的垃圾收集器成功处理它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:36:18.303

对位图使用弱引用。[http://developer.android.com/reference/java/lang/ref/WeakReference.html](http://developer.android.com/reference/java/lang/ref/WeakReference.html)

# extjs - 在表单中聚焦可编辑网格的行

> ID：12071554
> 
> 赞同：0
> 
> 时间：2012-08-22T10:57:11.033
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

我有一个可编辑`Ext.grid.plugin.RowEditing`的网格 ( ) 网格在一个表单中。表格显示在窗口中

由于通过显示窗口来显示表单，我想关注第一个可编辑行的第一列。

这是窗口的“显示”事件调用的方法

```
onWinShow : function (window, options) {

    var grid = this.down ('#myGrid');
    // focus on first field
    var rowEditStore = grid.getStore ();
    var rowEditor = grid.getPlugin ('rowEditplugin');

    rowEditor.cancelEdit ();

    var r = rowEditStore.getAt (0);
    rowEditor.startEdit (r, 1);
}, 
```

我检查了来源，`RowEditing`其中`RowEditor`有聚焦领域的逻辑。我可以看到焦点出现片刻然后消失，之后表单中的任何字段都没有焦点。

请建议我哪里出错了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:07:38.303

Extjs 中的窗口具有 defaultFocus 属性，允许您设置在打开窗口时哪个组件应该具有焦点。

如果该属性不能满足您的需要，我建议将您当前的焦点函数封装在 Ext.Function.defer 方法中，您将不得不查看您需要多少毫秒（测试您最慢的目标浏览器或使延迟浏览器依赖），这只会在窗口的默认焦点完成后使您的焦点发生：

```
onWinShow : function (window, options) {
    Ext.Function.defer(function (window, options) {

        var grid = this.down ('#myGrid');
        // focus on first field
        var rowEditStore = grid.getStore ();
        var rowEditor = grid.getPlugin ('rowEditplugin');

        rowEditor.cancelEdit ();

        var r = rowEditStore.getAt (0);
        rowEditor.startEdit (r, 1);
    }, 500, this);
} 
```

# jquery - 使 3d 翻译的元素可点击

> ID：12071563
> 
> 赞同：5
> 
> 时间：2012-08-22T10:57:31.143
> 
> 标签：jquery, events, css, click, translate3d

我在 wrapper-div 中有两个 div。第一个通过 translate3d(50px, 50px, 50px) 位于包装器的前面，第二个通过 translate3d(50px, 50px, -50px) 位于包装器的后面。

我想将点击事件绑定到内部 div，但我无法点击位于包装器后面的 div。有人知道这个问题的解决方案吗？

js-fiddle（仅限 webkit）：http: [//jsfiddle.net/rttmax/zrgdQ/16/](http://jsfiddle.net/rttmax/zrgdQ/16/)

谢谢。最大时间

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T09:49:04.130

你必须给你的 wrapper DIV 一个正的 50px Z 值来补偿负的 50px。

[http://jsfiddle.net/zrgdQ/108/](http://jsfiddle.net/zrgdQ/108/)

# sql - 我可以根据 SQL Server 中的查询插入多行吗

> ID：12071564
> 
> 赞同：1
> 
> 时间：2012-08-22T10:57:46.430
> 
> 标签：sql, sql-server

我需要在我的数据库中插入大量的东西

以手写方式写出查询将是这样的（但有更多的东西！）

```
Insert into MyTable (country_id, event) values (1001, 'up')
Insert into MyTable (country_id, event) values (1001, 'down')
Insert into MyTable (country_id, event) values (1002, 'up')
Insert into MyTable (country_id, event) values (1003, 'down')
....
Insert into MyTable (country_id, event) values (9999, 'up')
Insert into MyTable (country_id, event) values (9999, 'down') 
```

我可以编写某种神奇的 sql 连接/合并奇迹查询来获取所有`country_ids`和所有“事件”类型并创建我需要的数百个插入语句吗？

编辑：
有一个国家表。应该插入 MyTable 的是 sql 查询的结果，并且该查询的每个结果都需要 MyTable 中的“向上”和“向下”行。有足够的我不想手动管理查询。

实际上，不仅仅是“向上”和“向下”，但它们可以手动输入，或者作为进一步查询的结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T11:11:40.297

创建国家和事件列表的笛卡尔积并立即插入它们：

```
insert into MyTable (country_id, event)
select countries.country_id, 
       e.[event]
  from countries
 cross join
 (
   select 'Up' [event]
   union all
   select 'Down'
 ) e 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T11:00:03.623

你可以跳过

```
 Insert into MyTable (country_id, event) values 
```

并将其替换为

```
 Insert into MyTable (country_id, event) values (1001, 'down'),
 (1002, 'up'),
 (1003, 'down') 
```

或者您可以查看`BULK INSERT`或者`bcp`您的数据是否来自文件。

或者如果你知道国家和事件是什么，

```
Insert MyTable (country_id, event) 
SELECT countryid, event 
FROM country, events 
```

将所有组合放入您的表中

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T11:01:09.770

你可以这样加入`VALUES`：

```
INSERT INTO MyTable (country_id, event) 
VALUES (1001, 'up'),(1001, 'down'),(1002, 'up'),(1003, 'down') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T11:53:10.740

[http://sqlfiddle.com/#!3/0355b/10](http://sqlfiddle.com/#!3/0355b/10)

**[演示 SQL 小提琴](http://sqlfiddle.com/#!3/0355b/10)**

**注意：**两个表模式必须相同

# api - Shopify - Customer 对象的 orders_count 和 total_spent 字段何时显示实际价值？

> ID：12071570
> 
> 赞同：0
> 
> 时间：2012-08-22T10:58:00.390
> 
> 标签：api, e-commerce, shopify

我想知道 Customer 对象的 orders_count 和 total_spent 字段何时显示真实值。当我获取订单时，对于新客户下的订单，即使订单没有取消，order_count 和 total_spent 字段的值大多分别为 0、0.0。

当我稍后尝试通过获取 Customer 对象再次获取此值时，我确实得到了正确的值。

您是否会在一些间隔后批量更新值？或者它们是否在某些特定的订单状态后正确显示。纠正这种情况的方法是什么？

请让我知道它打破了基于这些价值观的逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-05-17T09:23:00.183

值得一提的是 Shopify 文档中未涵盖的一件事是，使用虚假网关作为付款将导致这些订单无法`{{ customer.orders_count }}`在结帐额外脚本区域中正确计算。我与他们的一位工程师取得了联系，他们建议使用货到付款来检查，你瞧，`{{ customer.orders_count }}`开始返回正确的值。

设置 > 付款 > 人工付款方式 > COD

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T12:01:45.380

订单和客户是独立创建的，并在后台相互关联。这意味着在更新这些值时创建的订单之间会有延迟。您最好的选择是监听订单/更新的 webhook，当客户出现在 webhook 中时，应该设置所有值。

# javascript - 遍历数组时的JS循环位置

> ID：12071573
> 
> 赞同：0
> 
> 时间：2012-08-22T10:58:06.717
> 
> 标签：javascript, html, loops, for-loop

> **可能重复：**
> [循环内的 Javascript 闭包 - 简单的实际示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

我想在遍历列表项数组时输出数组中的悬停位置。然而我的逻辑是完全错误的，因为在循环完成时'i'总是设置为数组的长度，所以我总是得到数组长度值而不是数组中的所需位置。

我需要获取包含相应列表项编号的警报。

**HTML**

```
<ul>
    <li class='listItem'>listitem1</li>
    <li class='listItem'>listitem2</li>
    <li class='listItem'>listitem3</li>
</ul> 
```

**JS**

```
var arr = document.getElementsByClassName('listItem');
for (var i = 0; i < arr.length; i++) {
    arr[i].onmouseover = function() {
        alert(i);
    }
} 
```

[http://jsfiddle.net/EHcDp/4/](http://jsfiddle.net/EHcDp/4/)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:02:53.200

```
var arr = document.getElementsByClassName('listItem');
for (var i = 0; i < arr.length; i++) {
    (function(i) {
        arr[i].onmouseover = function() {
            alert(i);
        }
    }(i));
} 
```

阅读[此副本](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)以了解其工作原理/方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T11:05:07.923

你需要一个[闭包](http://jibbering.com/faq/notes/closures/)：

```
var arr = document.getElementsByClassName('listItem');
for (var i = 0; i < arr.length; i++) {
    arr[i].onmouseover = (function(x) {
        return function() {
            alert(x);
        };
    }(i));
} 
```

# iphone - NSTimer - 非阻塞回调

> ID：12071574
> 
> 赞同：1
> 
> 时间：2012-08-22T10:58:08.223
> 
> 标签：iphone, objective-c, ios, nstimer

我对objective-c有点陌生。所以，如果我的问题或代码看起来很奇怪，那就可以解释原因。我有一个每 0.033 秒触发一次的 NSTimer。

```
timer = [NSTimer scheduledTimerWithTimeInterval:interval target:self selector:@selector(timerCallback) userInfo:nil repeats:YES]; 
```

选择器函数如下所示：

```
BOOL running = false;
- (void) timerCallback
{
   if (running) {
    return;
   }
   running = true;
   //Do some stuff
   running = false;
} 
```

问题是，无论如何保持同步，都必须在这些时间间隔触发 timerCallback 函数。（跳过详细说明）

但是......事实证明，timerCallback 函数会导致 NSTimer 停止并等待它完成，然后再恢复？

我有什么选择来维持间隔？timerCallback 函数可以在单独的线程中执行吗？有比 NSTimer 更好的选择吗？也许一个单独的线程开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:31:20.187

我建议使用类似的东西来防止阻塞。

```
BOOL running = false;
- (void) timerCallback
{
   if (running) {
    return;
   }

  [(NSOperationQueue*)_myOperationQueue addOperationWithBlock:^{
     running = true;
     //do Some Stuff
     running = false 
  }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:44:47.953

计时器将尝试保持所需的平均触发间隔 - 因为由于 NSTimer 和 NSRunLoop 的设计，它无法提供准确的计时。如果您在计时器中的代码占用了 0.033 秒以上，我不确定计时器是否会跳过一个呼叫 - 它可能

试试这个实验 - 设置计时器，然后注释掉你所有的工作，并记录时间。它应该非常接近所需时间。也就是说，在每秒 30 次调用中，如果您完全触摸 UI，这已接近您可以预期获得的最大性能。

最小化变化量的一种策略是将您正在执行的所有代码放在一个块中，并将其分派到主队列，或者更好的是，将其分派到并发线程。这样，您将在很短的时间内从通话中返回。

如果这对您不起作用，请查看 CADisplayLink。您可以使用此功能获得非常精确的回调，因为它以非常高的优先级运行。但是，您不能在回调中做任何实质性的事情，因为您只能获得一小段时间。但是，您可以将块分派到队列以在主队列（主线程）上进行处理。

# ruby - 如何使用 Watir (3.0) 和 name 属性查找 HTML 链接

> ID：12071576
> 
> 赞同：1
> 
> 时间：2012-08-22T10:58:14.390
> 
> 标签：ruby, watir, name-attribute

语境：

*   Win XP 盒子，Ruby 1.9.2p290
*   宝石列表 watir # => watir (3.0.0) watir-classic (3.1.0)
*   gem list sinatra # => sinatra (1.3.3)

给定一个相当简单的网站：

```
require "sinatra"
get '/' do
    "<a href='http://example.com/' name='a_name' >Click me!</a>"
end 
```

当我在默认端口 (4567) 上运行 sinatra 应用程序时......</p>

然后，在命令行中，我尝试通过*name*属性使用链接，但出现异常：

```
j:…&gt;pry -r watir
[1] pry(main)> b = Watir::Browser.new
=> #<Watir::IE:0x1538fd32 url="about:blank" title="">
[2] pry(main)> b.goto "http://localhost:4567/"
=> 0.203129
[3] pry(main)> b.link( name: 'a_name' ).flash
Watir::Exception::MissingWayOfFindingObjectException: name is an unknown way of finding a <a> element (a_name)
from C:/Ruby192/lib/ruby/gems/1.9.1/gems/watir-classic-3.1.0/lib/watir-classic/locator.rb:76:in `rescue in match?' 
```

我做错了吗？在其他按名称搜索的 HTML 元素上仍然可以正常工作。到目前为止，以前的 Watir 版本也运行良好。我错过了什么？或者不再支持使用 name 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:46:42.823

由于错误消息说`name is an unknown way of finding a <a> element`，我猜`name`链接不再支持属性。这对我来说似乎是一个错误，因为据我所知`name`，链接仍然支持属性：http: [//www.w3.org/TR/html401/struct/links.html](http://www.w3.org/TR/html401/struct/links.html)

您可以在此处报告错误：[https ://github.com/watir/watir-classic/issues](https://github.com/watir/watir-classic/issues)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:08:31.027

我猜链接的参数不正确。试试这个：

```
b.link(:name => 'a_name').flash 
```

# python - Python 通过 py2exe 可执行——我怎样才能启用输入？

> ID：12071579
> 
> 赞同：1
> 
> 时间：2012-08-22T10:58:27.493
> 
> 标签：python, executable, py2exe

我知道如何从 python 脚本创建可执行文件，我也可以运行它。但例如，我不知道如何调用我的函数。我希望能够从启动可执行文件的同一命令提示符中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:09:18.303

好的，我*想*我明白你想要做什么。假设你有一个脚本：

```
# module named test.py
def bar():
  print 'bar!'

def foo():
  print 'foo!' 
```

并且您想从命令行调用`bar`或。`foo`

```
> python -c "from test import *; bar(); foo();" 
```

这应该输出以下内容：

```
> bar!
> foo! 
```

该`-c`选项指定一个**命令**。请注意，这仅在您与脚本**位于同一目录**中时将其键入控制台时才有效。`test`

# css - 向导航分隔符添加边距

> ID：12071583
> 
> 赞同：1
> 
> 时间：2012-08-22T10:58:36.903
> 
> 标签：css

作为 CSS 新手，我发现了第一个问题。我很确定这是一些基本的东西，如果有人能给我至少一个提示我应该朝哪个方向移动，我将非常感激。我想我可能只是朝着错误的方向前进。

**问题：**

我得到了这个带有一些分隔符和翻转的导航。问题是我似乎无法添加分隔符和 li 悬停之间的左边距。分隔符始终坚持悬停。添加右边距效果很好，但是当我尝试添加左边距时，它只会使右边距的大小加倍。

这是图片：[http ://bit.ly/OQTMda](http://bit.ly/OQTMda)

```
#nav {
    position: absolute;
    top: 200px;
    width: 946px;
    height: 46px;
    padding: 7px;
    background: url('images/nav_bg.gif') top left repeat-x;
    }

#nav li {
    list-style: none;
    float: left;
    line-height: 46px;
    margin-right: 7px;
    }

#nav li:hover {
    background: url('images/nav_hover.gif') top left repeat-x;
    }

#nav li + li {
    background: url('images/separator.gif') top left no-repeat;
    }

#nav a {
    margin-left: 35px;
    margin-right: 35px;
    color: #ffffff;
    text-transform: uppercase;
    font-weight: bold;
    font-size: 14px;
    } 
```

任何建议表示赞赏。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T10:59:54.273

避免`li`使用边距 - 填充 - 行高的样式元素。而是设计您的内部`a`元素以获得更好的结果。

始终考虑`li`诸如对齐粗鲁的盒子之类的元素来容纳您的设计

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:33:47.657

试试这个

```
#nav li:hover {
    background: url('images/nav_hover.gif') 2% 0 repeat-x;
    }

#nav li + li {
    background: url('images/separator.gif') 2% 0 no-repeat;
    } 
```

# android - 错误：JNI 错误（应用程序错误）：访问过时的全局引用

> ID：12071585
> 
> 赞同：15
> 
> 时间：2012-08-22T10:58:43.793
> 
> 标签：android, mono, xamarin.android, monodevelop, xamarin

当我在 Android OS v4 中运行我的应用程序时，我收到此错误 **JNI ERROR（应用程序错误）：访问过时的全局参考**，但是当我在 Android v2.3 中运行相同的应用程序时，我没有收到此错误。

*这个错误发生在我调用 AsyncTask 类的地方，我将一个字符串数组作为参数传递*

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-10T04:35:38.863

当您调用具有不正确参数类型的方法时，会发生此错误。

确保您的方法签名与您传递的完全匹配。对于字符串数组：

```
jmethodID mid = env->GetMethodID(cls, methodName, "([Ljava/lang/String;)V"); 
```

如果您自己创建它，它看起来像这样：

```
jclass stringCls = env->FindClass("java/lang/String");
jobjectArray mStringArray = env->NewObjectArray( mSize, stringCls, NULL); 
```

在您的特定情况下，您很可能不会在 Android 2.3 上看到崩溃，因为您正在调用 AsyncTask.execute() 直到 API 11（Android 3.0）才可用，并且您的 jmethodID 为空。（在获取 jclass 和 jmethodID 后总是检查它们是否为空是个好主意）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T05:11:26.793

当您调用具有不正确参数类型的方法时，会发生此错误。

此外，在这种情况下，您可能会在与本机代码不同的 Java 代码上注册本机方法。不同之处在于您在 Java 代码和本机代码之间声明了更多或更少的参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-19T10:14:58.413

[ICS 中的 JNI 本地引用更改](http://android-developers.blogspot.com/2011/11/jni-local-reference-changes-in-ics.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-07T18:10:59.950

这适用于 kotlin：

要添加@krys 已经提到的内容，请确保 Kotlin 端的签名与您在 JNI 代码中的签名完全匹配。即使是 kotlin 引用末尾的简单 Void（避免在 JNI 端返回 void 的函数签名末尾的显式 Void）签名也可能会失败，并使您的调试非常令人沮丧。

# reflection - C#：如何使用反射从字典中删除项目？

> ID：12071586
> 
> 赞同：2
> 
> 时间：2012-08-22T10:58:44.820
> 
> 标签：reflection, dictionary

我有一本字典，其中的键可以是字符串或十进制。这些值可以是不同类型的对象。我想编写可以在所有情况下管理删除字典项的代码。

我要替换的代码如下：

```
ConcurrentDictionary<string, Parus.Metadata.Units.Unit> objDict = cacheItem.Value as ConcurrentDictionary<string, Parus.Metadata.Units.Unit>;
foreach (var detaildGrid in this.MasterGridFrameControl.ChildFrames)
{
    foreach (GridDataItem item in detaildGrid.GridControl.SelectedItems)
    {
        object dataKey = item.GetDataKeyValue("SubKey");
        objDict.Remove((string)dataKey);
    }
} 
```

或者如下：

```
ConcurrentDictionary<decimal, Domain> objDict = cacheItem.Value as ConcurrentDictionary<decimal, Domain>;
foreach (GridFrameControl detaildGrid in this.MasterGridFrameControl.ChildFrames)
{
    foreach (GridDataItem item in detaildGrid.GridControl.SelectedItems)
    {
        object dataKey = item.GetDataKeyValue("SubKey");
        objDict.Remove((decimal)dataKey);
    }
} 
```

代码应如下所示：

```
foreach (GridDataItem item in detaildGrid.GridControl.SelectedItems)
{
    object dataKey = item.GetDataKeyValue("SubKey");
    object[] parameters = { dataKey };
    Type t = cacheItem.Value.GetType();
    MethodInfo info = t.GetMethod("Remove");
    info.Invoke(cacheItem.Value, parameters);
} 
```

但是，我收到此错误消息：找到了不明确的匹配项。

我在互联网上阅读了一些文章，他们说我应该在此调用中指定第二个参数：

```
MethodInfo info = t.GetMethod("Remove"); 
```

但是，我不知道该怎么做。

任何帮助表示赞赏。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:22:41.220

尝试这个：

```
var genericArguments = cacheItem.Value.GetType().GetGenericArguments();
var keyType = genericArguments[0]; // Maybe implement some error handling.
MethodInfo info = t.GetMethod("Remove", new [] { keyType }); 
```

# html - HTML5 画布渐变模式“从中心”

> ID：12071591
> 
> 赞同：2
> 
> 时间：2012-08-22T10:59:07.190
> 
> 标签：html, canvas, gradient

HTML5画布中创建这样的渐变样式的本机方式是什么？谢谢 ！！！

[示例图像](http://dl.dropbox.com/u/870146/test.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:16:05.000

我真的怀疑是否有一种方法可以在本地执行此操作，但是您可以创建形状以添加为背景而不是像这样的渐变：[http://edumax.org.ro/extra/new/gradienttut/](http://edumax.org.ro/extra/new/gradienttut/) 这是代码：[http ://edumax.org.ro/extra/new/gradienttut/script.js](http://edumax.org.ro/extra/new/gradienttut/script.js)

```
var canvas, ctx;

function draw_triangle(x1, y1, x2, y2, x3, y3, grd){
    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.lineTo(x3, y3);
    ctx.lineTo(x1, y1);
    ctx.fillStyle = grd;
    ctx.fill();
    ctx.lineWidth=0;
     //ctx.stroke();
     //ctx.strokeStyle="#fff";
   ctx.closePath();
}

function color_triangle(x1, y1, x2, y2, tx1, ty1, tx2, ty2, tx3, ty3){
var grd = ctx.createLinearGradient(x1, y1, x2, y2);
grd.addColorStop(0, "#000000");
    grd.addColorStop(1, "#ffffff");
draw_triangle(tx1, ty1, tx2, ty2, tx3, ty3, grd);
}

function draw_rect(x, y, w, h){
color_triangle(x+w/2, y, x+w/2,y+h/2, x, y, x+w/2, y+h/2, x+w, y);
color_triangle(x+w, y+h/2, x+w/2, y+h/2, x+w/2, y+h/2, x+w,y+ h, x+w, y);
color_triangle(x, y+h/2, x+w/2, y+h/2, x+w/2, y+h/2, x, y+h, x, y);
color_triangle(x+w/2, y+h, x+w/2, y+h/2, x+w/2, y+h/2, x+w, y+h, x, y+h);
 }

 function viewDidLoad(){
canvas = document.getElementById("canvas");
ctx = canvas.getContext("2d");
canvas.height = 800;
canvas.width = 800;
draw_rect(10, 10, 200, 200);
draw_rect(220, 10, 300, 100);
draw_rect(10, 220, 100, 300);
draw_rect(120, 220, 400, 300);
 }
 window.onload = viewDidLoad; 
```

# iphone - NSURL 路径格式错误

> ID：12071596
> 
> 赞同：0
> 
> 时间：2012-08-22T10:59:25.200
> 
> 标签：iphone, ios, xcode, nsurl

我有这样的`NSURL`路径：

`/home?mobile%3Dfalse`

但这无法识别并返回异常。

关于如何正确使用此路径的任何建议。

我的意思是我用它喜欢

```
tempURL = [[NSURL alloc] initWithScheme:@"myapp" host:@"www.abc.com" path:@"/home?mobile%3Dfalse"]; 
```

然而，路径组件返回一个异常，说明它不是绝对的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:56:27.177

“/home?mobile%3Dfalse”不是[RFC1808](http://www.ietf.org/rfc/rfc1808.txt) URL 的有效路径。路径不能包含“？” 特点。换句话说：您不能提供连接到路径的查询字符串。

你想要这样的东西：

```
[NSURL URLwithString:@"myapp://www.abc.com/home?mobile%3Dfalse"] 
```

在 Mac OX 10.8 上，您提供的代码有效。它仅在省略前导“/”时引发异常。

# sql - SQL多sql用户登录及性能

> ID：12071598
> 
> 赞同：0
> 
> 时间：2012-08-22T10:59:32.327
> 
> 标签：sql, performance

我们有一个生产服务器，上面有大约 100 个数据库。我们正在创建一个新模块，该模块需要行级安全性以进行报告。

安全性得到保证，并且依赖于对 sql server 的唯一登录。这维护了数据库访问并引入了一个安全层，用户只能在行级别访问对象和相应的数据。

正如您所看到的，可能有成千上万的个人登录。数据由单个用户保护，每个用户对于数据库和服务器都是唯一的。

在我们继续之前......

我想问论坛以下

1.  有没有另一种方法可以让我们说 100 次登录，而不是数千次登录，每次登录都限制在数据库中，并且仍然保持行级别的安全性。

2.  如果第 1 点的答案是否定的。生产服务器上的大量个人登录可能会对性能产生什么影响（如果有的话）？

非常感谢你提前

亲切的问候

保罗

# ruby-on-rails - 如何在 emacs 中取消缩进精简代码

> ID：12071600
> 
> 赞同：0
> 
> 时间：2012-08-22T10:59:36.120
> 
> 标签：ruby-on-rails, emacs, slim-lang

我正在使用带有 emacs 的 slim 进行开发。我可以通过标记块然后按 Tab 来缩进细长代码块。

但是，我如何取消缩进整个块？任何帮助将不胜感激。

谢谢，穆尔塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:22:30.900

Select the code block, then do `C-u - 4 C-x TAB` to unindent the marked region by 4 spaces.

*   `C-u` allows to specify a [prefix argument](http://www.gnu.org/software/emacs/manual/html_node/emacs/Arguments.html) to the following indent command
*   `- 4` gives the amount of indentation (-4). Since the number is negative, you're indenting to the left.
*   `C-x TAB` indents the region by the given amount.

This answer might also be interesting to you: [https://stackoverflow.com/a/11624677/261142](https://stackoverflow.com/a/11624677/261142)

# vb.net - 错误 - 访问路径被拒绝 - 网络共享

> ID：12071601
> 
> 赞同：0
> 
> 时间：2012-08-22T10:59:44.577
> 
> 标签：vb.net, windows-services

我正在尝试访问网络共享中的文件，但出现此异常。这是 Windows 服务。

```
Error In function Handle_Files(): System.UnauthorizedAccessException: Access to the path '\\tempserver\public\' is denied. 
```

而且我没有 app.config 文件。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:09:04.917

转到您的计算机管理应用程序。打开“服务和应用程序\服务”节点（或在您的 Windows 版本中调用的任何名称）。在服务列表中找到您的服务。右键单击您的服务，然后从上下文菜单中选择“属性”选项。在属性对话框窗口中，打开“登录”选项卡。您可以在此处查看和修改运行服务的用户帐户。您需要向该用户授予对该网络共享的共享访问权限，或者您需要将服务的登录帐户更改为已经有权访问该网络共享的用户。

# ruby-on-rails - 三种模型的非典型关联

> ID：12071605
> 
> 赞同：1
> 
> 时间：2012-08-22T11:00:01.750
> 
> 标签：ruby-on-rails, activerecord, model, associations

我正在写一个关于钓鱼的应用程序。

*   我们有一个`fish`包含一些物种的模型。
*   我们有一个`location`包含钓鱼点的模型。
*   我们有一个`technique`模型，其中包含一些钓鱼技术。

每个`location`可能有多个`fish`，所以：

```
class Location < ActiveRecord::Base
    has_many :fish
end 
```

每个`fish`都可以在多个位置找到，因此：

```
class Fish < ActiveRecord::Base
    has_many :locations
end 
```

令人头疼的是第三种模型，因为每个模型都`fish`可以被多个`techniques`依赖于`location`. 换句话说： 和 之间存在类似多对多的关系`fish`，`technique`每个`location`.

我应该使用什么样的关联？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:00:00.567

```
class Location < ActiveRecord::Base
  has_many :location_fishes
  has_many :fishes, :through => :location_fishes
end

class Fish  < ActiveRecord::Base
  has_many :location_fishes
  has_many :locations, :through => :location_fishes
end

class LocationFish < ActiveRecord::Base
  belongs_to :fish
  belongs_to :location

  has_and_belongs_to_many :techniques
end 
```

请注意，模型和关系的名称可以改进。您还需要为这些创建适当的迁移，尤其是不要忘记创建 habtm 连接表。

使用这些定义，您可以执行以下操作：

```
location = Location.find_by_name("Fancy lake")
some_fish = Fish.find_by_name("Trout")
techniques_for_location_and_fish = location.location_fishes.where(:fish_id => some_fish.id).first.techniques 
```

# php - 在 php 中检查值，更新查询

> ID：12071614
> 
> 赞同：0
> 
> 时间：2012-08-22T11:00:33.717
> 
> 标签：php, mysql

我有这段代码，它允许我选择一个复选框。现在我需要做的是给这段代码一个 if 语句，以便如果它被选中在数据库中发布一个“1”值，否则发布0！

谢谢！

```
echo "<td><input type='checkbox' size='40' name='active[$i] ' value='{$rows['img_active']}' ";?> <?php if($rows['img_active'] == 1) { echo 'checked'; } ?> <?php echo "/>   </td>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:06:02.060

未选中复选框值不会在 POST 中发送。完全没有。所以你需要检查`$_POST`. 如果它在那里 - 则在客户端检查复选框。否则 - 不。并根据此决定将什么放入数据库。

# android - 滚动视图中的 ViewFlipper 不起作用

> ID：12071626
> 
> 赞同：0
> 
> 时间：2012-08-22T11:00:59.673
> 
> 标签：android, viewflipper

好吧，我正在尝试将 viewflipper 放在滚动视图中。

如果我不使用滚动视图，我的 viewflipper 可以正常工作。当我把它放在滚动视图中时，滑动变得很难。仅当我仅从左向右滑动时才会发生滑动，如果我在此操作期间略微向上或向下滑动，我的 viewflipper 不会激活其 onTouch 事件。

我认为scrollview和viewflipper上的onTouch事件有冲突，但我不知道如何正确地持有这个事件。

我在 viewflipper 中看到了很多关于 scrollView 的问题，但这不是我的情况。

@Edit我正在使用Android 2.1。下面的布局是我想要做的。

![viewFlipperInsideScrollView](../Images/b4d0d7d0efdf28281052fc91956de6e9.png)

我将在左侧有一个布局，在右侧有一个取景器。viewFlipper 将支持从左到右的幻灯片，反之亦然以在某些表单之间导航。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:10:43.703

通常android会根据您输入的第一个方向来决定应该激活哪个滚动。

水平移动应该激活 ViewFlipper，而垂直移动应该触发 ScrollView。我不确定 ScrollView 中的 ViewFlipper 是否是一个好主意，因为 ViewFlipper 可能被设计为包含可滚动视图，而 ScrollView 内部不应有任何可滚动内容（至少为了向后兼容）。

您在什么设备和版本上遇到此问题，为什么您在 ScrollView 中有 ViewFlipper 而反之则不然？

编辑：

好吧，android 2.1 已经很老了，而且在可滚动内容中的可滚动内容总是存在问题。即使是 2.3.7（所以低于 3.x）也有问题。

两种解决方案：使用不同的布局或不支持 3.x 以下的 Android。其余的将在尝试时将您撕裂...

# linux - 在linux中停止鼠标与桌面的交互

> ID：12071627
> 
> 赞同：0
> 
> 时间：2012-08-22T11:01:00.553
> 
> 标签：linux, input, mouse

当按下鼠标左键进行一些实验时，我想从鼠标输入坐标，但它与桌面上的东西交互并弄乱了东西。无论如何要阻止鼠标与对象交互，例如禁用鼠标单击或类似的东西。

PS：我已经有 X11 连接到 X 服务器，我正在使用 XQuerryPointer 来获取坐标，这个应用程序是无窗口的，它在终端上输出东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:04:21.340

我假设[http://tronche.com/gui/x/xlib/input/XGrabPointer.html](http://tronche.com/gui/x/xlib/input/XGrabPointer.html)可以做你想做的事。要接收输入坐标，我假设您已经与 X 服务器建立了 X11 连接？

好的，这是有效的代码。

```
Display *dpy;
dpy = XOpenDisplay(NULL);
int g=XGrabPointer(dpy,DefaultRootWindow(dpy), true, ButtonPressMask |
                 ButtonReleaseMask |
                 PointerMotionMask |
                 FocusChangeMask |
                EnterWindowMask |
                  LeaveWindowMask,GrabModeAsync,GrabModeAsync, None, None, CurrentTime); 
```

# silverlight - 在silverlight的网格中动态添加/删除行和控件

> ID：12071630
> 
> 赞同：0
> 
> 时间：2012-08-22T11:01:04.030
> 
> 标签：silverlight

我正在尝试创建一个规则屏幕，用户可以在其中指定不同的规则，保存它们并稍后应用于数据。用户还可以对 AND OR 条件的规则进行分组。我的问题是这是否是正确的方法以及当用户单击删除时应该删除该行，我不知道该怎么做？

以下是我的 XAML：

```
<Grid x:Name="LayoutRoot" Background="White" Width="600" Height="200" ShowGridLines="True">
    <Grid.RowDefinitions><RowDefinition Height="30" /></Grid.RowDefinitions>
    <Grid.ColumnDefinitions><ColumnDefinition Width="135"/><ColumnDefinition Width="25"/><ColumnDefinition Width="135"/><ColumnDefinition Width="135"/>
        <ColumnDefinition Width="135"/><ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <telerik:RadComboBox Name="Header" Grid.Row="0" Width="100" HorizontalAlignment="Left">
            <telerik:RadComboBoxItem Content="And" IsSelected="True"></telerik:RadComboBoxItem>
            <telerik:RadComboBoxItem Content="Or"></telerik:RadComboBoxItem>
        </telerik:RadComboBox>
    <telerik:RadButton Content="+" Height="31" HorizontalAlignment="Left" Margin="106,0,0,0" Name="btnAdd" VerticalAlignment="Top" Width="26" Click="btnAdd_Click" />
</Grid> 
```

后面的代码是：

```
 private void btnAdd_Click(object sender, RoutedEventArgs e)
    {
        var row = new RowDefinition();

        row.Height = new GridLength(30);
        LayoutRoot.RowDefinitions.Add(row);

        var columnCombo = new Telerik.Windows.Controls.RadComboBox() { Width = 100, Height = 30, HorizontalAlignment = HorizontalAlignment.Left };
        columnCombo.Items.Add("Column1");
        columnCombo.Items.Add("Column2");
        columnCombo.Items.Add("Column3");

        var operatorCombo = new Telerik.Windows.Controls.RadComboBox() { Width = 100, Height = 30, HorizontalAlignment = HorizontalAlignment.Left};
        operatorCombo.Items.Add("contains");
        operatorCombo.Items.Add("startsWith");
        operatorCombo.Items.Add("endsWith");

        var btnRemove = new Telerik.Windows.Controls.RadButton() { Width = 20, Height = 30, Content = "X" };
        btnRemove.Click += new RoutedEventHandler(btnRemove_Click);

        var btnGroup = new Telerik.Windows.Controls.RadButton() { Content = "Group", Width = 50, Height = 30 };
        btnGroup.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
        btnGroup.Click += new RoutedEventHandler(btnGroup_Click);

        var calendar = new Telerik.Windows.Controls.RadDatePicker();

        LayoutRoot.Children.Add(btnRemove);
        LayoutRoot.Children.Add(btnGroup);
        LayoutRoot.Children.Add(columnCombo);
        LayoutRoot.Children.Add(operatorCombo);
        LayoutRoot.Children.Add(calendar);

        int newrow = LayoutRoot.RowDefinitions.Count-1;

        Grid.SetRow(btnRemove, newrow);
        Grid.SetColumn(btnRemove, 1);
        Grid.SetRow(columnCombo, newrow);
        Grid.SetColumn(columnCombo, 2);
        Grid.SetRow(operatorCombo, newrow);
        Grid.SetColumn(operatorCombo, 3);
        Grid.SetRow(calendar, newrow);
        Grid.SetColumn(calendar, 4);
        Grid.SetRow(btnGroup, newrow);
        Grid.SetColumn(btnGroup, 5);

    }

    public void btnGroup_Click(object sender, RoutedEventArgs e)
    {
        throw new NotImplementedException();
    }

    public void btnRemove_Click(object sender, RoutedEventArgs e)
    {

        //TODO: Here I want to find out from which Gridrow user has clicked & remove that grid row & controls inside it.
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:03:34.733

您可以使用`Tag`每个按钮的属性来获取要删除的行。

[http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.tag(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.tag(v=vs.95).aspx)

# python - python gobject调用冻结gui

> ID：12071633
> 
> 赞同：0
> 
> 时间：2012-08-22T11:01:13.190
> 
> 标签：python, gtk, gobject

我正在使用带有 gtk 的 python。我想下载一个文件，当这发生时，我在窗口上绘制了一个动画 gif。但是每次下载开始时，gif都会冻结。我认为 gobject 调用应该解决这个问题，但似乎不像。

电话是：

在 gui 类中

```
 ...
  gobject.timeout_add(3000, self.load)
  gtk.main() 
```

和加载功能：

```
 def load(self):
     ul = urllib2.open('http://xxxx/')
     data = ul.read()
     while gtk.events_pending():
          gtk.main_iteration()
     return True 
```

每次调用加载 gui 堆栈。有什么办法可以做得更好吗？

原始代码：

```
self.opener = urllib2.build_opener() 
self.opener.addheaders.append(('Cookie', self.cookie)) 
self.state = self.opener.open('http://'+gd_adress+'/state.cst?Lang=en')
self.state_data = self.state.read() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T11:31:18.713

您需要使用与 GObject 主循环集成的异步调用。

可能最简单的是使用[GIO](http://www.pygtk.org/docs/pygobject/class-giofile.html)：

```
import gio

f = gio.File(uri='http://xxxx/')
def on_ready(gdaemonfile, result):
    data, length, tag = f.load_contents_finish(result)
f.load_contents_async(on_ready) 
```

Jono Bacon 有一篇很棒的文章：http: [//www.jonobacon.org/2010/03/15/download-files-async-with-gio-and-python/](http://www.jonobacon.org/2010/03/15/download-files-async-with-gio-and-python/)

不幸的是，据我所知，GIO 不支持设置 HTTP cookie。在这种情况下，最好的选择可能是使用线程并用于`GLib.idle_add`将数据返回到主循环，就像在[Gtk3 上带有 PyGObject 的 Webkit 线程中一样](https://stackoverflow.com/questions/11070263/webkit-threads-with-pygobject-on-gtk3)：

```
import threading
import glib
glib.threads_init()

def load_data():
    opener = urllib2.build_opener() 
    opener.addheaders.append(('Cookie', cookie)) 
    state = opener.open('http://'+gd_adress+'/state.cst?Lang=en')
    state_data = state.read()
    glib.idle_add(on_read_data, state_data)
thread = threading.Thread(target=load_data)
thread.start() 
```

这个想法是将阻塞调用封装在一个线程中，该线程在准备好时将数据返回给主线程，因此您的其余代码可以忽略线程正在使用的事实。

# php - 获取到今天为止的月份列表 - PHP

> ID：12071635
> 
> 赞同：1
> 
> 时间：2012-08-22T11:01:15.573
> 
> 标签：php, date

我正在建立一个博客档案，我需要列出这些年来的历史月份，例如，今天是 8 月 22 日，所以我的档案应该显示，

*   八月
*   七月
*   六月
*   可能
*   四月
*   行进
*   二月
*   一月

我一生都无法弄清楚如何输出我们尚未拥有的一年中的所有月份。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T11:11:10.373

您应该查看 PHP 的[DateTime 类](http://www.php.net/manual/en/class.datetime.php)。

```
<ul>
<?php
$dateTime = new DateTime();
do {
    $dateTime->modify('+1 month');
    echo '<li>' . $dateTime->format('F') . "</li>\n";
} while ($dateTime->format('m') < 12);
?>
</ul> 
```

你的问题不是很清楚，但根据你的最新评论：

> 谢谢，但是这个列表在 12 月 1 月 2 月 3 月 4 月 5 月 6 月 7 月，我需要输出今年的所有前几个月，包括当前月份

您想要与我在这里所做的完全相反：

```
<ul>
<?php
$dateTime = new DateTime();
echo '<li>' . $dateTime->format('F') . "</li>\n";
$dateTime->modify('-1 month');
while ($dateTime->format('m') != 12) {
    echo '<li>' . $dateTime->format('F') . "</li>\n";
    $dateTime->modify('-1 month');
};
?>
</ul> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T11:05:44.300

php`date()`函数可用于显示当前月份：

您可以像这样获得当前月份：

```
echo date('n'); // Outputs 8 for August. 
```

这也意味着您可以使用这样的简单循环：

```
for($i=1;$i<=date('n');$i++)
{
    echo date('F', mktime(0, 0, 0, $i, 0, 0);
} 
```

作为参考，`date('F')`输出月份的全名，如 August。

编辑：该`mktime()`功能与用户时区相关，您可能会得到错误的月份，因为您不在 0:00 时区（如我自己）。由于您只是在几个月之后，这是一个简单的解决方法：

```
<?php
    for($i=date('n');$i>0;$i--)
    {
        echo date('F', mktime(0, 0, 0, ($i), 2, date('Y')))."<br>";
    }
?> 
```

我还修改了 for 循环，使其反向工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T11:07:08.473

PHP`date()`非常适合这一点。

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

```
$month = date('n'); // Get month, 1-12 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T11:12:37.097

```
<?php
 $month=date('m');

foreach(range(12,1) as $i)
{
  if($i<=$month):    
  echo date('F',mktime(0,0,0,$i));
  echo '<br>';
  endif;
}?> 
```

# java - 在本地覆盖 servlet 启动时加载

> ID：12071637
> 
> 赞同：1
> 
> 时间：2012-08-22T11:01:20.737
> 
> 标签：java, tomcat, tomcat7

在 WEB-INF/web.xml 中给出一个简单的 servlet，例如

```
<servlet>
    <servlet-name>MyServlet</servlet-name>
    <servlet-class>app.MyServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

是否可以在我的本地开发环境中覆盖启动时加载，以便仅在首次请求时加载 servlet，而不更改 MyServlet 类？

只要默认是在 tomcat 启动时加载 servlet，更改 web.xml 是可以接受的，这可以通过 context-param 完成吗？

我正在运行 tomcat 7.0.29

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:16:54.927

不修改`web.xml`? 不，你不能（据我所知）。但是，您可以完全删除声明并使用`@WebServlet`注释，然后可以直接`loadOnStartup`在`.java`文件中进行修改。

```
@WebServlet(name="MyServlet", value="/MyServlet", loadOnStartup=1)
public class MyServlet extends HttpServlet {
    ...
} 
```

# apache - 如何在 Apache 中设置响应超时

> ID：12071638
> 
> 赞同：5
> 
> 时间：2012-08-22T11:01:24.340
> 
> 标签：apache

我的 Apache 服务器在 24 秒后给了我 503 的响应。Apache 中是否有任何设置来配置响应超时？我已经配置了 connection_pool_timeout=600

我的 Apache 重定向请求到我的应用程序服务器。现在我收到 503 请求响应。那么是否有任何设置可以增加响应超时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T11:42:51.977

根据您的设置，您可以设置不同的超时选项（请参阅[mod_proxy](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)）。如果您想要一个快速的解决方案，您可以设置`TimeOut`（请参阅[文档](http://httpd.apache.org/docs/2.2/mod/core.html#timeout)）；`ProxyTimeout`其他超时将`TimeOut`默认使用。

示例：`TimeOut 30`-- 将默认超时设置为 30 秒。

# android - 在 Android 中绘制按钮

> ID：12071642
> 
> 赞同：1
> 
> 时间：2012-08-22T11:01:49.633
> 
> 标签：android, android-layout, android-button

我想在按钮 onClick 上方绘制按钮。例如，如果我有一个共享按钮，并且单击时我想绘制两个按钮 Facebook 和 Twitter 以在其中一个上共享。如何在代码中绘制两个按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:05:00.310

您可以使用自定义对话框，它更简单！
单击对话框将弹出具有 Facebook 按钮和 twitter 按钮的对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:06:44.667

[这](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)正是您所需要的。

# django - 将 django 连接到 Web 服务而不是数据库

> ID：12071643
> 
> 赞同：3
> 
> 时间：2012-08-22T11:01:53.393
> 
> 标签：django, web-services, orm, django-models, django-views

我们想用 web 服务替换 django 数据库层，我们希望尽可能顺利地完成此操作。基本上，django 将处理所有 HTTP 请求、会话、模板、身份验证等，而 web 服务将处理与数据库相关的所有内容。

您如何建议在不重做大部分现有代码的情况下做到这一点的最佳方法？有没有人做过类似的事情？我认为由于 django 松耦合，这应该是可行的。

我们想要这样做的主要原因是因为我们的 java 开发人员比 django 开发人员多，所以我们正在考虑用 java 做 web 服务。这是迄今为止使用我们公司资源的最佳方式，问题是如何做到最好。该项目还很年轻，我们预计它的复杂性会增长很多，因此长期以这种方式拆分我们的开发人员对我们来说是最好的。

谢谢，罗杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T23:30:27.107

[在看到您的帖子http://code.larlet.fr/django-roa/wiki/Home](http://code.larlet.fr/django-roa/wiki/Home)后，我刚刚遇到了这个项目，这 似乎正是您正在寻找的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:23:06.103

在我的公司，我们以完全解耦的方式专门使用 Django。我们的网络服务由 Pyramid + Cornice 提供支持，我们利用优秀的[Python-Requests](http://docs.python-requests.org/en/latest/index.html)库与我们的服务层进行交互。

应用程序的身份验证和权限是使用我们开发的自定义后端通过[Authentic2和 ADFS 完成的。](http://packages.python.org/authentic2/)

因此，我们的应用程序中没有任何模型对象，但我们仍然可以利用 Django 表单和表单集的所有优点。

我们的 Web 服务返回 JSON，因此我们可以非常简单地将键值对列表传递给模板，也可以将初始数据提供给表单等。这实际上与从 Django ORM 调用返回值或 values_lists 没有什么不同。

据我所知，编写连接到 Web 服务的 Django 模型类没有替代品。

# c# - 具有“相同端口”的 WCF 多主机标头导致错误

> ID：12071652
> 
> 赞同：2
> 
> 时间：2012-08-22T11:02:45.010
> 
> 标签：c#, asp.net, wcf

我已经阅读了很多文章来解决这个问题，但我无法解决它。

**场景** 我有一个网站，它有一个 WCF 服务和 2 个主机头

1.  自旋本地主机
2.  spin-localhost.worldwide.co.uk（更改为 spin-localhost2）

但是使用相同的端口**44001**我可以访问 spin-localhost 服务，但无法访问 spin-localhost.worldwide.co.uk（现在是 spin-localhost2）。

**编码**

```
 <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Bbc.Ww.SalesProjections.UI.Services.CilsDataReceiveBehavior">
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <basicHttpBinding>
        <binding name="WindowsAuth" maxReceivedMessageSize="2097152">
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Windows" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <services>
      <service behaviorConfiguration="Bbc.Ww.SalesProjections.UI.Services.CilsDataReceiveBehavior" name="Bbc.Ww.SalesProjections.UI.Services.CilsDataReceive">
        <endpoint address="http://spin-localhost:44001/Services/CilsDataReceive.svc" binding="basicHttpBinding" name="BasicHttpEndpoint" bindingConfiguration="WindowsAuth" contract="Bbc.Ww.SalesProjections.UI.Services.ICilsDataReceive" />
        <endpoint address="http://spin-localhost.worldwide.co.uk:44001/Services/CilsDataReceive.svc" binding="basicHttpBinding" name="BasicHttpEndpoint" bindingConfiguration="WindowsAuth" contract="Bbc.Ww.SalesProjections.UI.Services.ICilsDataReceive" />
      </service>
    </services>
    <serviceHostingEnvironment>
      <baseAddressPrefixFilters>
        <add prefix="http://spin-localhost:44001" />
      </baseAddressPrefixFilters>
    </serviceHostingEnvironment>

  </system.serviceModel> 
```

上述解决方案失败了我在工厂尝试过

```
public class CustomHostFactory : ServiceHostFactory
{
    protected override ServiceHost CreateServiceHost(Type serviceType, Uri[] baseAddresses)
    {
        return new ServiceHost(serviceType, baseAddresses[0]);
    }
} 
```

**编辑：**我使用的是 /Net 3.5 而不是 4。

**参考资料** [http://www.sieena.com/blog/archive/2011/02/01/wcf-service-in-iis-with-multiple-host-headers.aspx](http://www.sieena.com/blog/archive/2011/02/01/wcf-service-in-iis-with-multiple-host-headers.aspx)

[http://blogs.msdn.com/b/rampo/archive/2008/02/11/how-can-wcf-support-multiple-iis-binding-specified-per-site.aspx](http://blogs.msdn.com/b/rampo/archive/2008/02/11/how-can-wcf-support-multiple-iis-binding-specified-per-site.aspx)

[http://blogs.msdn.com/b/rampo/archive/2007/06/15/supporting-multiple-iis-bindings-per-site.aspx](http://blogs.msdn.com/b/rampo/archive/2007/06/15/supporting-multiple-iis-bindings-per-site.aspx)

[http://social.msdn.microsoft.com/forums/en-US/wcf/thread/9e248455-1c4d-4c5c-851c-79d9c1631e21/](http://social.msdn.microsoft.com/forums/en-US/wcf/thread/9e248455-1c4d-4c5c-851c-79d9c1631e21/)

还有很多....

**更新 1：**经过进一步测试，worldwide.bbc.co.uk 似乎存在错误，所以我更改了名称并绑定到 spin-localhost2。

```
<endpoint address="http://spin-localhost2:44001/Services/CilsDataReceive.svc" binding="basicHttpBinding" name="BasicHttpEndpoint" bindingConfiguration="WindowsAuth" contract="Bbc.Ww.SalesProjections.UI.Services.ICilsDataReceive" /> 
```

我可以使用 spin-localhost 访问第一个服务，但 spin-localhost2 给出 401、401 和 400（未找到）。用 Fiddler 查了一下。

**解决方案**（尚未测试）：

```
 <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Bbc.Ww.SalesProjections.UI.Services.CilsDataReceiveBehavior">
          <!--          <serviceMetadata httpGetEnabled="true" />-->
          <serviceDebug includeExceptionDetailInFaults="true"/>
          <serviceCredentials>
            <userNameAuthentication userNamePasswordValidationMode="Windows"/>
          </serviceCredentials>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <basicHttpBinding>
        <binding name="WindowsAuth" maxReceivedMessageSize="2097152">
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Windows"/>
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <services>
      <service behaviorConfiguration="Bbc.Ww.SalesProjections.UI.Services.CilsDataReceiveBehavior" name="Bbc.Ww.SalesProjections.UI.Services.CilsDataReceive">
        <endpoint address="" binding="basicHttpBinding" name="BasicHttpEndpoint" bindingConfiguration="WindowsAuth" contract="Bbc.Ww.SalesProjections.UI.Services.ICilsDataReceive"/>
      </service>
    </services>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:15:07.757

vesion 4 下带有 .NET 的 WCF 不支持多主机头 IIS 托管，对此有一些解决方法，这取决于您的 .NET 版本，或多或少复杂。

.NET 4.0 中的 WCF 支持此作为通过`<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />`在配置中使用启用的选择加入功能。

那里的一切都得到了彻底的解释：http: [//blogs.msdn.com/b/rampo/archive/2008/02/11/how-can-wcf-support-multiple-iis-binding-specified-per-site.aspx](http://blogs.msdn.com/b/rampo/archive/2008/02/11/how-can-wcf-support-multiple-iis-binding-specified-per-site.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:50:15.180

带有 IIS 的 WCF 将支持具有*不同*相对地址的多个端点，[如本博文所示，](http://bartwullems.blogspot.com/2010/02/multiple-endpoints-for-wcf-service.html)但我认为 IIS 不会支持同一端口和同一网站/应用程序中的不同主机头。尝试创建单独的 IIS 网站，每个主机头一个，并为每个服务使用单独的 serviceModel 配置。这样您就可以为您创建的服务使用相同的端口。

# ruby-on-rails - 在 ruby 中设置哈希的默认值

> ID：12071653
> 
> 赞同：0
> 
> 时间：2012-08-22T11:02:50.217
> 
> 标签：ruby-on-rails, ruby, hash, default-value

我有一个嵌套哈希，例如：-

```
profile:
  status:                               
     nil: 3    
     x: 2   

  priority:
     x: 2
     y: 2 
```

有没有办法设置状态的默认值，例如：-

```
profile:
  status:
    default:0
    nil: 3
    x:2 
```

我不想要这样的解决方案或任何其他方法：-

```
h = Hash.new("Go Fish")
h.default = "Go fish" 
```

因为我有一个 yml 文件，其中加载了配置哈希和其他映射哈希，例如上面的状态、优先级映射。所以我的脚本从这些 yml 中提取配置以及其他哈希值并使用它们。现在对于状态和优先级映射，我需要这个状态和优先级子哈希来返回一个值，如果它在这个哈希中没有找到任何匹配的符号（即，如果不存在这样的映射）。我可以使用其他方法在代码中设置该默认值。但重点是我希望任何外行编辑这个 yml 并能够运行我的脚本。因此，我希望在此处设置默认值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T21:34:56.883

由于似乎没有人想出替代方案，所以现在我采用了这种方法。

```
 profile:
  status:
   default: 'x' number
   one: 1
   two: 2
   three: 3 
```

在代码中

```
 profile['status'].default=priority['status']['default'] 
```

# java - 在 GWT 中将文件和 HashMap 发送到服务器

> ID：12071655
> 
> 赞同：8
> 
> 时间：2012-08-22T11:02:51.877
> 
> 标签：java, gwt, servlets, gwt-rpc, gwt2

我必须将文件及其属性发送到 GWT 服务器。

为了发送文件，我使用了表单面板。

```
 public class BrowseFile extends DialogBox {
   // more code
   // ..

        private FormPanel getFormPanel() {
                if (formPanel == null) {
                    formPanel = new FormPanel();
                    formPanel.setMethod(FormPanel.METHOD_POST);

                    formPanel.setEncoding(FormPanel.ENCODING_MULTIPART);
                    formPanel.setAction(GWT.getHostPageBaseURL() +"UploadFileServlet");

                    formPanel.addSubmitHandler(new FormPanel.SubmitHandler(){
                        public void onSubmit(SubmitEvent event) {
                            // TODO Auto-generated method stub
                                    setFilename(fileUpload.getFilename());
                        }

                    });
                }
                return formPanel;
            }
        } 
```

该文件的所有属性都在 Hashmap 中 ![GUI 添加文档](../Images/755f3b60c131ffba04af724b4f123d2b.png)

有2个对话框`Propertybox extends DialogBox`和

```
BrowseFile extends DialogBox 
```

在 PropertyBox 的构造函数里面有 BrowseFile

当 PropertyBox 构造函数

```
 setSize("600px", "670px");
    setHTML("Add Document");

    setWidget(getVerticalPanel());
    browseFile = new BrowseFile(); 
```

PropertyBox里面的自定义Property依赖于选择的类（Class是tree Widget）

**在服务器端**

```
public class FileUpload extends HttpServlet implements Servlet{

    private static final long serialVersionUID = 1L;
    private static final Logger log = Logger.getLogger(FileUpload.class
            .getName());
    protected void doGet(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {

        doPost(request, response);

    }

    protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {

        byte[] buffer = new byte[115200];//
        String fileName = null;
        String mimetype = null;
        String majorVersion = null;
        InputStream stream = null;

        try {

            ServletFileUpload upload = new ServletFileUpload();

            FileItemIterator iterator = upload.getItemIterator(request);
            while (iterator.hasNext()) {
                FileItemStream item = iterator.next();
                 stream = item.openStream();

                if (item.isFormField()) {
        //                                                                      
                } else {

                    fileName = item.getName();
                    mimetype = item.getContentType();

//                                      
                }
            }

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        ByteArrayOutputStream output = new ByteArrayOutputStream();
        int len;

        while ((len = stream.read(buffer, 0, buffer.length)) != -1) {
            output.write(buffer, 0, len);
        }
        ByteArrayInputStream input = new ByteArrayInputStream(output.toByteArray());
        Session session =RootFolder.getSession();
        ContentStream contentStream = session.getObjectFactory()
                .createContentStream(fileName, output.size(), mimetype, input);

} 
```

为了在外部存储库中创建文档，我需要 hasmap 中的文档属性

folder.createDocument（文档属性，contentStream，VersioningState.MAJOR）；

**Document 属性应在Document 属性 Class 的`onClick`事件中发送到此类`Button ADD`**

*****如何在 FileUpload 类中将此文档属性发送到服务器 *****

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T12:16:54.977

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T21:30:55.420

为什么不使用一系列请求？

1.  客户：上传文件。**使用表单面板。**
    服务器：保存文件并返回新的fileId（如果成功）

2.  客户端：（来自 onSubmitCompleted）将文件的数据连同其 fileId 一起发送。**使用您需要的任何数据结构**
    服务器：将文件信息字段存储到数据库中。

# javascript - 世界时钟不滴答作响

> ID：12071667
> 
> 赞同：0
> 
> 时间：2012-08-22T11:03:23.030
> 
> 标签：javascript, html, timezone, settimeout

我正在尝试使用以下 JavaScript 代码创建世界时钟。时钟显示在屏幕上，但没有滴答作响。我的目标是在同一屏幕上为不同时区添加时钟。我可以添加几个时钟，但它们没有滴答作响。

```
 <script language="javascript">

    var timerRunning = false;
    var timezone = "Greenwich Mean Time";  // what time zone are you in ?
    var adjust = 0;

    function timeCheck(diff) {

            if (timerRunning) {
                clearTimeout(updatetime);
                timerRunning = false; 
            }

            gmtOffset = eval(diff);

            var tdate_01 = new checkDateTime("zonetime");
            var tdate_02 = new checkDateTime("testt");
    }

    function checkDateTime(clckID) {

            var today = new Date();
            var year = today.getYear() + 1900;
            var month = today.getMonth()+1;
            var date = today.getDate();
            var day = today.getDay();
            var hour = today.getHours();
            var minute = today.getMinutes();
            var second = today.getSeconds();

            var lastSat = date - (day+1);
            while (lastSat < 32) lastSat+=7;
            if (lastSat > 31) lastSat+=-7;
            var firstSat = date - (day+1);
            while (firstSat > 0) firstSat+=-7;
            if (firstSat < 1) firstSat+=7;
            if ((((month == 4) && (date >= firstSat)) || month > 4) &&
            (month < 11 || ((month == 10) && day <= lastSat))) adjust += 60;
            yourOffset = (new Date()).getTimezoneOffset();
            yourOffset = yourOffset + adjust;

            var xx = navigator.appName
            var xy = navigator.appVersion;
            xy = xy.substring(0,1);
            if ((xy == 4) && (xx == "Netscape")) yourOffset = yourOffset+adjust;
            if ((((month == 4) && (date > 20)) || month > 4) && (month < 11 || ((month == 10) &&
            day < 30))) adjust -= 60;

            ourDifference = eval(gmtOffset - yourOffset);
            var half = eval(ourDifference % 60);
            ourDifference = Math.round(ourDifference / 60);
            hour = eval(hour - ourDifference);
            var m = new Array("",
            "Jan","Feb","Mar",
            "Apr","May","Jun",
            "Jul","Aug","Sept",
            "Oct","Nov","Dec");
            var leap = eval(year % 4);

            if ((half == -30) || (half == 30)) minute += 30;
            if (minute > 59) minute -= 60, hour++;
            if (minute < 0) minute += 60, hour--;
            if (hour > 23) hour -= 24, date += 1;
            if (((month == 4) || (month == 6) ||
            (month == 9) || (month == 11)) && (date==31)) date = 1, month ++;
            if (((month == 2) && (date > 28)) && (leap != 0)) date = 1, month ++;
            if ((month == 2) && (date > 29)) date = 1, month++;
            if (hour < 0) hour += 24, date --;
            if ((date == 32) && (month == 12)) month = m[1], date = 1, year++;
            if (date == 32) date = 1, month++;
            if ((date < 1) && (month == 1)) month= m[12], date = 31, year--;
            if (date < 1) date = 31, month --;
            if (((month == 4) || (month == 6) ||
            (month== 9) || (month == 11)) && (date == 31)) date = 30;
            if ((month == 2) && (date > 28)) date = 29;
            if (((month == 2) && (date > 28)) && (leap != 0)) date=28;

            for (i=1; i<13; i++) {
                    if (month == i) {
                        month = m[i]; break;
                }
            }

            var dateTime = hour;
            dateTime = ((dateTime < 10) ? "0":"") + dateTime;
            dateTime = "   " + dateTime;
            dateTime += ((minute < 10) ? ":0" : ":") + minute;
            dateTime += ((second < 10) ? ":0" : ":") + second;
            dateTime += (hour >= 12) ? " PM, " : " AM, ";
            dateTime += month + " " + date + ", " + year;

            var mainDiv = document.getElementById(clckID).innerHTML = dateTime;

            updatetime=setTimeout("checkDateTime()", 900);
            timerRunning = true;
    }

</script>

 <select onchange="timeCheck(this.value)" size="0" align="center">
                <option value="">SELECT --> COUNTRY</option>
                <option value="+480">Pacific</option> // Australia UTC offset value is 10
                <option value="+420">Central</option>
                <option value="+300">Estern</option>
                <option value="+600">Hawaii</option>
                <option value="+360">Mexico</option>
                <option value="-330">New Delhi</option>
                <option value="-480">HONG KONG</option>
                <option value="-540">TOKYO</option>
                <option value="+0">London</option>
        </select>

    <div id="zonetime"></div>
    <div id="testt"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:07:52.100

`setTimeout`你忘记了身份证

```
updatetime=setTimeout(function(){checkDateTime(clckID);}, 900); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:08:12.183

设置超时时必须传递参数：

```
updatetime=setTimeout("checkDateTime(" + clckID + ")", 900); 
```

# objective-c - 为什么使用 AVFoundation Videoplayer 在模拟器中播放我的视频，而不是在设备 (iPad) 上播放？

> ID：12071668
> 
> 赞同：1
> 
> 时间：2012-08-22T11:03:25.837
> 
> 标签：objective-c, ipad, ios5, ios-simulator, avfoundation

我用[_](https://dl.dropbox.com/u/2896178/AVFoundationVideoPLayer.zip)

AVMoviePlayerView.h

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>

@class AVPlayer;

@interface AVMoviePlayerView : UIView

@property (nonatomic) AVPlayer *player;

- (void)setPlayer:(AVPlayer*)player;
- (void)setVideoFillMode:(NSString *)fillMode;

@end 
```

和

AVMoviePlayerView.m

```
#import "AVMoviePlayerView.h"
#import <CoreMedia/CoreMedia.h>

@implementation AVMoviePlayerView

+ (Class)layerClass {

    return [AVPlayerLayer class];

}

- (AVPlayer*)player
{
    return [(AVPlayerLayer*)[self layer] player];
}

- (void)setPlayer:(AVPlayer*)player
{
    [(AVPlayerLayer*)[self layer] setPlayer:player];
}

- (void)setVideoFillMode:(NSString *)fillMode
{
    AVPlayerLayer *playerLayer = (AVPlayerLayer*)[self layer];
    playerLayer.videoGravity = fillMode;
}

@end 
```

从我的 MainViewController.m 内部调用它 -(void)viewDidLoad

```
 NSURL* url = [[NSBundle mainBundle] URLForResource:@"myVideo.264" withExtension:@"mp4"]; 
    self.avPlayer = [AVPlayer playerWithURL:url];
    [avPlayer addObserver:self forKeyPath:@"status" options:0 context:AVMoviePlayerViewControllerStatusObservationContext];
    [[NSNotificationCenter defaultCenter]   addObserver:self
                                               selector:@selector(playerItemDidReachEnd:)
                                                   name:AVPlayerItemDidPlayToEndTimeNotification
                                                 object:[self.avPlayer currentItem]]; 
```

用方法

```
- (void)observeValueForKeyPath:(NSString*) path ofObject:(id)object change:(NSDictionary*)change context:(void*)context
{
    if (avPlayer.status == AVPlayerStatusReadyToPlay) {
        [self.VideoLoop setPlayer:self.avPlayer];
        [self.avPlayer play];
    }
}
- (void)playerItemDidReachEnd:(NSNotification *)notification {
    AVPlayerItem *p = [notification object];
    [p seekToTime:kCMTimeZero];
} 
```

当然在 MainViewController.h 中定义

```
...
#import <CoreGraphics/CoreGraphics.h>
#import "AVMoviePlayerView.h"
@class AVMoviePlayerView;
@class AVPlayer;
...
IBOutlet AVMoviePlayerView *VideoLoop;
AVPlayer* avPlayer; 
```

它在模拟器中工作正常（循环除外，但这是一个不同的问题），但在设备（iPad3）上没有视频显示。

我错过了什么吗？谢谢！！！

编辑：[为了更容易向我展示我有多愚蠢，请在此处找到一些示例代码。这在模拟器中有效，但在设备上无效。](https://dl.dropbox.com/u/2896178/AVFoundationVideoPLayer.zip)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T13:07:53.327

找到的原因 - 我只花了 50 分... iOS 支持高达 2.5 Mbps 的 MPEG-4 视频和 H.264 1080p。我的视频帧太大了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-10T20:10:00.453

添加到@headkit的答案，这对我有用......

在 QuickTime 中打开您的视频文件，

导出 > 1080p。

不要忘记将扩展名更改为“mov”！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-22T06:18:29.560

对于像我一样来到这里并希望[从 Apple 文档](https://www.apple.com/iphone-6s/specs/)更新规格的其他人：

**iPhone 7、6s**

> 支持的视频格式：高达 4K 的 H.264 视频，每秒 30 帧，High Profile level 4.2，AAC-LC 音频高达 160 Kbps，48kHz，.m4v、.mp4 和 .mov 文件格式的立体声音频；MPEG-4 视频高达 2.5 Mbps，640x480 像素，每秒 30 帧，带有 AAC-LC 音频的简单配置文件，每通道高达 160 Kbps，48kHz，.m4v、.mp4 和 .mov 文件格式的立体声音频；Motion JPEG (M-JPEG) 高达 35 Mbps，1280x720 像素，每秒 30 帧，音频为 ulaw，PCM 立体声音频为 .avi 文件格式

**iPhone 5、5s、6**

> 支持的视频格式：H.264 视频，最高 1080p，每秒 30 帧，High Profile level 4.1，AAC-LC 音频最高 160 Kbps，48kHz，.m4v、.mp4 和 .mov 文件格式的立体声音频；MPEG-4 视频高达 2.5 Mbps、640 x 480 像素、每秒 30 帧、带有 AAC-LC 音频的简单配置文件，每通道高达 160 Kbps、48kHz、.m4v、.mp4 和 .mov 文件格式的立体声音频；Motion JPEG (M-JPEG) 高达 35 Mbps，1280 x 720 像素，每秒 30 帧，音频为 ulaw，PCM 立体声音频为 .avi 文件格式

（有关更新的链接，请在谷歌***iPhone（型号）规格***中搜索并点击 Apple 网站的结果。然后向下滚动到“视频播放”）

# android - 从 Android 向 LEGO NXT 发送消息

> ID：12071674
> 
> 赞同：2
> 
> 时间：2012-08-22T11:03:41.787
> 
> 标签：android, nxt, lego

我只想从我的 Android 向 NXT 发送一条消息，就像字符串/数字一样。但是NXT没有收到数据。我将 ROBOT C 用于 NXT 程序和来自 ROBOT C 的 BluetoothMessage 示例。

[首先，我从Android 和 Lego Mindstorm NXT 之间](https://stackoverflow.com/questions/4969053/bluetooth-connection-between-android-and-lego-mindstorm-nxt)的蓝牙连接尝试 Android 的源代码。但是没有用。

然后我从 Google Play、NXT Mailbox 下载了一个软件，它就可以工作了。

有没有人有 Android 的源代码来向 NXT 发送消息？

# iphone - 如何在 iOS 应用中使用 Google Places API 搜索多种类型

> ID：12071676
> 
> 赞同：2
> 
> 时间：2012-08-22T11:03:49.017
> 
> 标签：iphone, objective-c, ios, google-maps, google-places-api

我需要使用 Google API 为 iOS 应用搜索不止一种类型。

这是我搜索一种类型的方法。在这个例子中，它的类型是**博物馆**，我想同时搜索**博物馆**和**art_gallery**。我将如何去做：

```
NSURL *googlePlacesURL = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api/place/search/xml?location=34.0522222,-118.2427778&radius=500&types=**museum**&sensor=false&key=APIKEY"]; 
```

谢谢你的帮助

:)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-22T11:35:05.560

我添加了两个请求参数，我得到了包含 atm 和 cafe 的响应。您可以参考以下链接来验证响应。 [https://maps.googleapis.com/maps/api/place/search/xml?location=19.148279,72.993874&rankby=distance&types=cafe|atm&sensor=false&key=](https://maps.googleapis.com/maps/api/place/search/xml?location=19.148279,72.993874&rankby=distance&types=cafe|atm&sensor=false&key=)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T11:09:43.320

您可以通过修改请求参数来输入多个类型 types=museum|art_gallery 添加更多类型，以 | 分隔 操作员

# c# - 从 ExchangeUser 对象获取国家/地区信息

> ID：12071677
> 
> 赞同：3
> 
> 时间：2012-08-22T11:03:57.803
> 
> 标签：c#, outlook, vsto, exchange-server, outlook-addin

我正在编写一个 Outlook 互操作应用程序，我需要从交换用户对象中获取国家/地区条目。它不能通过公共属性获得，有什么方法可以得到它吗？

```
ExchangeUser entry = OutlookManager.Instance.GetAddressBookEntry(mail.SenderName, mail.SenderAddress);

if (entry != null)
{
    var licensee = new Licensee();
    licensee.City = entry.City;
    licensee.Company = entry.CompanyName;
    //todo get country
    licensee.Country = ???
    licensee.Department = entry.Department;
    licensee.FirstName = entry.FirstName;
    licensee.LastName = entry.LastName;
    licensee.OutlookDisplayName = entry.Name;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:38:31.497

您可以使用它[`ExchangeUser.PropertyAccessor`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._exchangeuser.propertyaccessor.aspx)来检索**Country**属性。如果该属性不存在，您需要尝试/捕获。请参阅[源参考](http://ramblings.mcpher.com/Home/excelquirks/data-from-outlook)和可用的[邮件用户属性](http://msdn.microsoft.com/en-us/library/bb446002.aspx)。

```
try { 
    licensee.Country = entry.PropertyAccessor.GetProperty("http://schemas.microsoft.com/mapi/proptag/0x3A26001E");
}
catch { licensee.Country = ""; } 
```

# android - Android：无法为 SharedPreferences 文件创建目录

> ID：12071679
> 
> 赞同：9
> 
> 时间：2012-08-22T11:04:06.943
> 
> 标签：android, android-layout, android-intent

我正在尝试`SharedPreferences`通过另一个应用程序编辑一个应用程序，我的代码是这样的

```
try {
Context plutoContext = getApplicationContext().createPackageContext("me.test",Context.MODE_WORLD_WRITEABLE);
SharedPreferences plutoPreferences = PreferenceManager.getDefaultSharedPreferences(plutoContext);
Editor plutoPrefEditor = plutoPreferences.edit();
plutoPrefEditor.putString("country", "India");
plutoPrefEditor.commit();
} 
```

我收到一个错误

`E/SharedPreferencesImpl( 304): Couldn't create directory for SharedPreferences file /data/data/me.test/shared_prefs/me.test_preferences.xml`

我在`me.test`me.test 项目中的另一个项目在哪里我可以轻松地编辑和检索`SharedPreferences`

我正在 Nexus S android 4.0.4 (Samsung) 上对其进行测试，任何人都可以帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-16T13:35:14.013

您需要在 AndroidManifest.xml 中添加权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/> 
```

我和你有同样的问题，我用上面的方法解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:23:22.207

顺便说一句，（它与问题无关，但无论如何）您错误地使用了`createPackageContext()`方法。您在那里传递`MODE_WORLD_WRITEABLE`值为**2**且等于`CONTEXT_IGNORE_SECURITY`flag 的标志，因此这将被逻辑错误地解释，恕我直言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T11:14:15.410

只需在此应用程序中使用不同的包名称。这将在不同的目录中创建首选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T11:17:04.943

如果您的第一个应用程序想要创建可由另一个应用程序读取的 SharedPreference，请确保使用正确的模式创建 SharedPreference。查看[getSharedPreferences()](http://developer.android.com/reference/android/content/Context.html#getSharedPreferences%28java.lang.String,%20int%29)或[PreferenceManager](http://developer.android.com/reference/android/preference/PreferenceManager.html)类以获取更多详细信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-08T10:24:15.293

问题 - 当您已经在项目中创建了默认共享首选项时，将会出现“Android：无法为 SharedPreferences 文件创建目录”。因此，存在一个共享首选项，并且您再次添加同名默认首选项。解决方案 - 在应用程序中仅创建一个默认共享首选项。如果您想创建更多共享首选项，然后使用某个名称创建共享首选项。

注意 - 一个应用程序中只有一个默认共享首选项。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-11T15:04:16.940

在我的情况下，重新启动三星设备解决了同样的问题。

# java - 移动小程序而不重新加载它

> ID：12071680
> 
> 赞同：7
> 
> 时间：2012-08-22T11:04:09.657
> 
> 标签：java, javascript, html, applet

我想将一个小程序从一个`div`元素移动到另一个`div`元素而不重新加载它。我不想使用绝对定位。有没有办法做到这一点 ？

我试试这个，但它不工作：

```
<html>
    <head>
    <script type="text/javascript">
        function toDiv1() {
            var appletElt = document.getElementById('myApplet');
            document.getElementById('div1').appendChild(appletElt);
        }

        function toDiv2() {
            var appletElt = document.getElementById('myApplet');
            document.getElementById('div2').appendChild(appletElt);
        }
    </script>
    </head>
    <body>
        <div id ="myApplet">
            <applet width="200" height="200" 
                codebase="http://mainline.brynmawr.edu/Courses/cs110/spring2002/Applets/Smiley/"
                code="Smiley.class"
                name="Smiley">
            </applet>
        </div>
        <div id="div1"></div>
        <div id="div2"></div>
        <div>
            <button onclick="toDiv1()">toDiv1</button>
            <button onclick="toDiv2()">toDiv2</button>
        </div>
    </body>
</html> 
```

[你可以在这个小提琴](http://fiddle.jshell.net/gontard/JRZXF/)上试试你的答案

* * *

@goldenparrot 提出的解决方案`outerHTML`适用于所有浏览器（至少是 Firefox ESR）。

正如@kritzikratzi 答案和@biziclop 答案中所述，firefox 存在已知问题，即在 firefox 中重新加载 iframe、flash 对象、插件。

我认为（但我不确定）唯一的解决方案是使用绝对定位（@cuzzea）。但是，我问这个问题是因为我想找到另一种方式（“我不想使用绝对定位”）。这就是为什么我不会给予任何答复。

感谢您的贡献。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T18:59:30.580

我不认为你正在寻找的是可能的，但如果你想使用定位，你可以试试这个：

[http://fiddle.jshell.net/JRZXF/12/](http://fiddle.jshell.net/JRZXF/12/)

HTML：

```
<div style="position:relative">
    <div>
        To test your code, make the smiley sad, then move it to another div. It must be still sad.    
    </div>

    <br>
    <div id ="myApplet">
        <applet width="200" height="200"
            codebase="http://mainline.brynmawr.edu/Courses/cs110/spring2002/Applets/Smiley/"
            code="Smiley.class"
            name="Smiley">
        </applet>
    </div>
    <div id="div1"></div>
    <br>
    <div id="div2"></div>
    <br>
    <div>
        <button id="button1">toDiv1</button>
        <button id="button2">toDiv2</button>
    </div> 
​&lt;/div>​​​​​​​​​​​​​​ 
```

Javascript：

```
function toDiv1() {
    $('#div1,#div2').empty();
    var el = $('#myApplet'),
        div = $('#div1'),
        clone_div = $('<div>');
    var width = 200,
        height = 200;
    clone_div.css({width:width,height:height});
    div.append(clone_div);
    el.css({
        position:'absolute'});
    el.css({
        left:clone_div.offset().left,
        top:clone_div.offset().top
    });
}

function toDiv2() {
    $('#div1,#div2').empty();
    var el = $('#myApplet'),
        div = $('#div2'),
        clone_div = $('<div>');
    var width = 200,
        height = 200;
    clone_div.css({width:width,height:height});
    div.append(clone_div);
    el.css({
        position:'absolute'});
    el.css({
        left:clone_div.offset().left,
        top:clone_div.offset().top
    });
}

$('#button1').click(toDiv1);
$('#button2').click(toDiv2);​ 
```

当然，这段代码可以改进很多，并且可以更好地工作。为了使这个示例正常工作，您需要所有嵌套的 div 具有相对位置。我还给了宽度和高度 200，但你可以让它变得动态，比如：

```
var width = el.width() 
```

或者

```
var width = el.children('applet').attr('width'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T09:23:27.373

现在，我想出了一个~~出色的~~（*:D*）解决方案，使用`outerHTML`：

```
function toDiv1() {

  var appletElt = document.getElementById('myApplet');

  var Div1 = document.getElementById('div1');

  var parts = Div1.outerHTML.split(">"+Div1.innerHTML+"<");

  // newHTML can also be appletElt.outerHTML
  var newHTML = Div1.innerHTML + appletElt.outerHTML;

  // Deleting Div1 because you will have multiple divs on page with id='div1'!
  Div1.parentNode.removeChild(Div1);

  appletElt.outerHTML = parts[0] + newHTML + parts[1];

} 
```

* * *

**重要提示：**首先，您的`applet`标签也必须关闭。我的意思是：`<applet></applet>`

**同样重要的是：**

关于解决方案，您应该了解一些事情。

1.  该解决方案仅在第一次有效。也就是说，您可以将其移动到 div1**或**div2。
2.  *如果您多次*单击*两个按钮***或**一个按钮，HTML**将**中断。
*****   您必须通过将单词 ( && )替换为单词( && )来编写`toDiv2()`函数。`Div1``div1``toDiv1()``Div2``div2`****

 ***** * *

即使不是*最好*的解决方案，我也会发布此内容，因为如果您走在正确的轨道上，我相信您可以弄清楚如何使其即使在多次点击时也能正常工作。而且，在看到这个答案之后，你应该是。

* * *

**编辑：**

这是解决方案尝试做的基本事情：

appendChild 将创建一个新元素并附加它。如果创建了一个新元素，它就不是你想要的。

outerHTML 是 HTMLElement 的一个属性，您可以更改它。有关 outerHTML 的演示，请参阅此[小提琴](http://jsfiddle.net/qdRBN/)的工作原理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T03:40:23.253

可能是“完全不走运”的情况，谷歌搜索显示有许多听起来相关的浏览器错误：

不重新加载就无法在 dom 中移动 iframe：

*   [https://bugzilla.mozilla.org/show_bug.cgi?id=254144](https://bugzilla.mozilla.org/show_bug.cgi?id=254144)（开放）
*   [https://bugs.webkit.org/show_bug.cgi?id=13574](https://bugs.webkit.org/show_bug.cgi?id=13574)（开放）

无法在 dom 中移动插件

*   [https://bugzilla.mozilla.org/show_bug.cgi?id=90268](https://bugzilla.mozilla.org/show_bug.cgi?id=90268)（在FF13中修复）

您最好的方法可能是使用 element.adoptNode(...) 和已经提到的 outerHtml。祝你好运 ：）

（很想测试，但由于 os xi 上的所有 java 混乱甚至无法运行 java 插件 atm）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T14:51:05.593

我在IE8上尝试了以下

```
applet=document.getElementById('myapplet');
applet.outerHTML='<div id="my_div">'+applet.outerHTML+'</div>'; 
```

这会导致小程序停止、销毁、初始化并重新启动。所以这似乎表明outerHTML 不起作用。此外，Firefox 13 上的 outerHTML 将换行符作为返回的第一个字符。使用它来搜索由 outerHTML 返回的内容时要小心。

此外，gontard 的原始帖子似乎适用于 Firefox 13（不使用 outerHTML 或其他技巧）****

# vim - 使用 .vimrc 和标记有点挣扎

> ID：12071681
> 
> 赞同：1
> 
> 时间：2012-08-22T11:04:13.853
> 
> 标签：vim

概括：

```
let @c = "dd/##completed <CR> p" 
```

不工作，有什么建议吗？

* * *

我记录了一个宏，它删除一行，移动到另一行（我的##completed 部分）并将该行粘贴到这里。

这工作正常，直到我意识到标记（'c - 指向我的##completed 部分）不粘在文本上，而是粘在行本身上（现在我想到了很明显）。

因此，我更改了我的 .vimrc 以搜索 ##completed 行并将内容粘贴到它下面。

代码如下...

```
let @c = "dd/completed <CR> p" 
```

但这不起作用，而是在我的命令行中显示“/completed p”。所以看来vimrc没有正确处理回车，我这里的语法错误吗？

或者，如果这是一种糟糕的移动线路方式，谁能提供更好的选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T11:29:47.710

我不完全理解你的映射，但你需要`\<CR>`在双引号内写才能得到回车；缺少反斜杠。`Ctrl`或者，您可以通过+ `V`（或`Q`在许多 Windows 安装中）直接插入它，然后是`Enter`.

* * *

一般来说，我不会`c`在你的 .vimrc 中预设一个寄存器 ( ，你错误地称之为“标记”)；如果您经常需要，请通过`:nnoremap`. 您可以将映射分配给任何自由键序列（并且使用`<Leader>`; 即反斜杠，您有一个自由起始键），但您只有 26 个命名寄存器。

* * *

对于移动文本，请查看`:move`命令。这可能会做你想要的：

```
:move /##completed 
```

# windows-7 - 在shell执行后立即运行一个进程windows 7

> ID：12071682
> 
> 赞同：3
> 
> 时间：2012-08-22T11:04:18.590
> 
> 标签：windows-7, registry

我有一种情况，我需要在 Windows 7 中从我的桌面隐藏任务栏和开始按钮，我已经编写了一个代码来执行此操作。问题是我需要在 Windows 完成从 shell 加载 explorer.exe 的那一刻运行它。我尝试使用逗号在 shell（在注册表中）中的 explorer.exe 之后给出我的 exe 路径，但它不运行资源管理器，而是在启动时打开我的计算机。如果我将我的 exe 放在启动阵容中，那么问题是任务栏可见 4-5 秒，然后隐藏。我希望任务栏在登录时根本不可见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:53:58.483

您是否尝试将您的应用程序添加到注册表中的 Run 键？它应该在登录后立即运行。请参阅：http: [//support.microsoft.com/kb/314866](http://support.microsoft.com/kb/314866)

# python-ldap - python-ldap 从服务器 2003 获取数据

> ID：12071684
> 
> 赞同：1
> 
> 时间：2012-08-22T11:04:21.860
> 
> 标签：python-ldap

当我在 Centos 中测试以下命令时

```
ldapsearch -v -d5 ldaps://192.168.0.254 -D "cn=xuqifeng" -w 'xuqifeng' 
```

系统告诉我：</p>

```
ldap_initialize( <DEFAULT> )
ldap_create
ldap_sasl_bind
ldap_send_initial_request
ldap_new_connection 1 1 0
ldap_int_open_connection
ldap_connect_to_host: TCP localhost:389
ldap_new_socket: 3
ldap_prepare_socket: 3
ldap_connect_to_host: Trying ::1 389
ldap_pvt_connect: fd: 3 tm: -1 async: 0
ldap_close_socket: 3
ldap_new_socket: 3
ldap_prepare_socket: 3
ldap_connect_to_host: Trying 127.0.0.1:389
ldap_pvt_connect: fd: 3 tm: -1 async: 0
ldap_close_socket: 3
ldap_err2string
ldap_sasl_bind(SIMPLE): Can't contact LDAP server (-1) 
```

OMG，Help.ps：主机ip为192.168.0.254的系统是Microsoft Server 2003。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:47:44.920

您没有向 ldapsearch 提供正确的主机参数。使用 -H 来实现

ldapsearch -v -d5 -H ldaps://192.168.0.254 -D "cn=xuqifeng" -w 'xuqifeng'

但这与python无关

# html - Ruby on Rails：简单的表单，在每个输入字段旁边添加图像

> ID：12071685
> 
> 赞同：8
> 
> 时间：2012-08-22T11:04:22.607
> 
> 标签：html, ruby-on-rails, ruby, simple-form

当我使用 rails 时，我使用简单的表单 gem 创建了一个简单的表单

我创建一个这样的表格

```
<%= simple_form_for @user do |f| %>
  <%= f.input :username %>
  <%= f.input :password %>
  <%= f.button :submit %>
<% end %> 
```

但我想在每个字段旁边添加一个默认图像元素。我怎样才能做到这一点？

我试试这个

```
<%= simple_form_for @user do |f| %>
      <%= f.input :username % >
      <img xxxx>
      <%= f.input :password %>
      <img xxxx>
      <%= f.button :submit %>
      <img xxxx>
    <% end %> 
```

但我不会工作，因为它会为每个元素字段换行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:46:44.207

那么答案就是这样在 app/ 中创建一个名为 input 的文件夹

并使用 [any_name]_input.rb 创建一个文件，假设您将其命名为 image_tag_input.rb

那么 image_tag_input.rb 里面的代码看起来像这样

```
 class ImageTagInput <  SimpleForm::Inputs::Base
   ## Because image tage doesnot work if not included the below
   include ActionView::Helpers::AssetTagHelper
   def input
    ("#{@builder.text_field(attribute_name, input_html_options)}" + "#{image_tag()}).html_safe
   end
end 
```

然后在 html 端

做这个

```
<%= f.input :username,:as => "image_tag %> 
```

这里和另一个在[wiki](https://github.com/plataformatec/simple_form/wiki/Custom-inputs-examples)中提到的**simple_form_for 示例**

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-24T10:56:14.093

我总是使用 Simple Form Bootstrap 使用的包装器。

来自其默认包装器的示例：

```
SimpleForm.setup do |config|
  config.error_notification_class = 'alert alert-danger'
  config.button_class = 'btn btn-default'
  config.boolean_label_class = nil

  # :vertica_from wrapper
  config.wrappers :vertical_form, tag: 'div', class: 'form-group row', error_class: 'has-error' do |b|
    b.use :html5
    b.use :placeholder
    b.optional :maxlength
    b.optional :pattern
    b.optional :min_max
    b.optional :readonly
    b.use :label, class: 'control-label'

    b.use :input, class: 'form-control'
    b.use :error, wrap_with: { tag: 'span', class: 'help-block' }
    b.use :hint,  wrap_with: { tag: 'p', class: 'help-block' }
  end

  # Rest omitted

  # Change default simple form wrapper settings
  config.default_wrapper = :vertical_form
  config.wrapper_mappings = {
    check_boxes: :vertical_radio_and_checkboxes,
    radio_buttons: :vertical_radio_and_checkboxes,
    file: :vertical_file_input,
    boolean: :vertical_boolean,
    datetime: :multi_select,
    date: :multi_select,
    time: :multi_select
  }
end 
```

当您创建一个简单的表单时

```
<%= form_for(resource, as: resource_name, url: unlock_path(resource_name), html: { method: :post }) do |f| %> 
```

默认情况下（由于设置）将使用`:vertical_form`

现在，如果您想设置自定义包装器，请按照上面的示例，创建自定义类并将其放在`config/initializers`. 这是一个示例自定义包装器，我在上面添加了 Bootstrap 设置：

```
config.wrappers :horizontal_file_input, tag: 'div', class: 'form-group row', error_class: 'has-error' do |b|
    b.use :html5
    b.use :placeholder
    b.optional :maxlength
    b.optional :readonly
    b.wrapper tag: 'div', class: 'col-md-6' do |bb|
      bb.use :label, class: 'col-sm-5 control-label'

      bb.wrapper tag: 'div', class: 'col-sm-7' do |bbb|
        bbb.use :input
        bbb.use :hint,  wrap_with: { tag: 'p', class: 'help-block' }
      end
    end

    b.wrapper tag: 'div', class: 'col-md-3 side-validation' do |bc|
      bc.use :error, wrap_with: { tag: 'span', class: 'help-block' }
    end
  end 
```

然后要使用这个包装器，找到你想应用自定义包装器的输入，然后执行以下操作：

```
<%= f.input :resume, as: :attachment_preview, wrapper: :horizontal_file_input %> 
```

繁荣！它将使用您的自定义设置呈现！此外，您可以将包装器设置为表单以更改其所有输入的默认包装器。所以如果你这样做：

```
<%= simple_form_for(@staff,  as: :staff,
                             url: staffs_path, 
                             method: "post",
                             wrapper:  :horizontal_form) do |f| %> 
```

然后它的所有输入字段将默认使用`:horizontal_form`包装器（这也是另一个简单表单引导包装器）

希望这可以帮助。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-22T17:33:01.200

我建议使用`f.label`and`f.input_field`而不是，`f.input`因为它可以让您根据需要放置组件并将图像添加到您想要的位置。

查看[Simple_Form](https://github.com/plataformatec/simple_form)文档以获取更多信息和示例。

例子：

```
<%= simple_form_for @user do |f| %>
  <%= f.label :username %>
  <%= f.input_field :username %>
  <img xxxx>
  <%= f.button :submit %>
<% end %> 
```

# iphone - 如何选择 UIScreen 的显示模式覆盖整个电视屏幕？

> ID：12071689
> 
> 赞同：1
> 
> 时间：2012-08-22T11:04:32.910
> 
> 标签：iphone, ios, television, uiscreen

我正在编写一个播放器，将视频从与 HDMI 连接的 iOS 设备输出到电视。

我发现首选屏幕模式和 UIScreen 的任何其他屏幕模式可能无法覆盖电视屏幕。它的行为与各种型号的电视不同。

但是，iTunes 视频播放器可以随时覆盖整个电视屏幕。

我想知道它是怎么做到的？

有什么秘密的私有api吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T15:34:30.183

试试这个，风险自负；）

```
// Undocumented, may cause bugs!
[screen setOverscanCompensation:3]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:24:42.020

我可以建议您尝试 GITHub 上的示例源代码 TVOut - [https://github.com/JohnGoodstadt/TVOut](https://github.com/JohnGoodstadt/TVOut)。我发现它涵盖了我尝试过的所有显示器类型的屏幕。它还允许您更改电视屏幕边缘的“边界”（因此您可以从标准边缘移出）。

它使用标准的 IOS api。

# vba - 如何确定宏正在针对哪种类型的 Office 文档运行？

> ID：12071693
> 
> 赞同：0
> 
> 时间：2012-08-22T11:04:48.003
> 
> 标签：vba, ms-office

在宏中，我需要使用`ActiveDocument`(Word)、`ActiveWorkbook`(Excel) 或`ActivePresentation`(PowerPoint)，但首先我需要确定正在运行的应用程序。

如何找出宏正在运行的 Office 文档类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:56:21.357

这是一种获取正在运行的任何应用程序名称的方法：

```
MsgBox Application.Name 
```

# facebook-like - Facebook Like 按钮的样式？

> ID：12071697
> 
> 赞同：0
> 
> 时间：2012-08-22T11:05:01.367
> 
> 标签：facebook-like, x-facebook-platform

我不起诉的第一件事是，是否允许制作自定义按钮，例如在 Photoshop 中设计自定义徽章并使用它而不是标准按钮。对此有什么建议吗？

我找不到有关样式的任何信息。对于 Like Box，我发现旧版本使用“fan”而不是“like-box”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:33:13.360

不允许更改 facebook 的点赞按钮样式，如[品牌权限页面](http://www.facebook.com/brandpermissions/logos.php)中所述（请参阅点赞按钮的“使用”部分）。

老实说，这并不让我感到惊讶。

如果您仍想继续，[这里](http://www.inboundnow.com/apps/facebook-like-button-generator/)有一个自定义按钮生成器。不过，我没有对其进行测试（但您可以看到他们使用的 html）。

# php - Using GET and POST in jQuery

> ID：12071706
> 
> 赞同：0
> 
> 时间：2012-08-22T11:05:17.427
> 
> 标签：php, javascript, jquery, ajax

I am having some trouble posting data through AJAX. I created a small save script which determines in which table a POST must be saved (I am using a different form for each table):

```
$(function() 
{
    $( "#tabs" ).tabs().find( ".ui-tabs-nav" ).sortable({ axis: "x" });
});

function save(target)
{
    switch(target)
    {
        case "praktijk":
            $.ajax({                                                                                                           url: 'webscripts/admin/opslaan.php?type=praktijk',
                type: 'POST',
                data: $("#tabs-2").find('form').serialize(),
                success: function(){
                    alert("gegevens opgeslagen!");
                    $('#popup').dialog('close');
                }
            });
            break;
        case "persoonlijk":
            $.ajax({                                                                                   
                url: 'webscripts/admin/opslaan.php?type=persoonlijk',
                type: 'POST',
                data: $("#tabs-1").find('form').serialize(),
                success: function(){
                    alert("gegevens opgeslagen!");
                    $('#popup').dialog('close');
            }
        });
        break;
    case "vragen":
        $.ajax({
            url: 'webscripts/admin/opslaan.php?type=vragen',
            type: 'POST',
            data: $('#tabs-3').find('form').serialize(),
            success: function(){
                    alert("gegevens opgeslagen!");
                    $('#popup').dialog('close');
            }
        });
        break;
} 
```

}

as you can see, I next determine it for the PHP script by using a GET variable that says which table it needs to save it in. But this doesn't work. The script appears to be crashing at this point. I am not sure where exactly it crashes.. the Firebug terminal doesn't show any obvious errors.

Does somebody know why it doesn't work?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:10:59.877

First of all, if you're using a different form for each table, why not send the right table name ('persoonlijk', 'vragen', etc.) with the form itself?

example:

```
<form ...>
<input type="hidden" name="target" value="persoonlijk" />
...
</form> 
```

And in php:

```
<?php
if($_POST['target'] == 'persoonlijk') {
    // save in table 'persoonlijk'
} else {
   // save it somewhere else
}
?> 
```

Furthermore, reading out a php var can not break your javascript, simply because you are working on the server, and javascript works in the browser. Please print out the get en post vars using `print_r($_GET);`, then explain what 'seems to break' means (what happens, what do you see (error messages and such)).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:15:40.327

`data:`should contain some data. It should be a text or value and your code doesn't seems to have it correctly set up. I recommend you to use some `var` there.

# java - 聚合 JMX

> ID：12071708
> 
> 赞同：1
> 
> 时间：2012-08-22T11:05:25.010
> 
> 标签：java, jmx, aggregation, jconsole

在我们有多个 JVM 的场景中，每个 JVM 都运行它的 JMX 代理和自己的 MBeanServer。将这些不同 MBeanServer 中的所有这些 MBean 聚合为一个的最佳方法是什么，以便我们可以将单个 JConsole 或其他客户端连接到聚合以监视所有 MBean。

最好的，威尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:59:37.673

您可以尝试 Spring 的 JMX 支持：[http ://static.springsource.org/spring/docs/3.0.x/reference/jmx.html#jmx-proxy](http://static.springsource.org/spring/docs/3.0.x/reference/jmx.html#jmx-proxy)

# sql - 用于删除重复项的 SQL 查询

> ID：12071709
> 
> 赞同：2
> 
> 时间：2012-08-22T11:05:28.090
> 
> 标签：sql, sqlite

考虑我有一个包含 id 字段（不是自动增量）的表。该字段将包含重复条目。我想检索该 ID 的不同条目。

考虑我的表是这样的：

```
id    state   city
1      efef   dfdd
2      dwef   sdfsd
1      fdds   fsdfs 
```

现在我必须检索 ID 为 1,2 的州，城市。

我试过这个查询

```
SELECT * 
FROM   Event 
WHERE  Outletid = (SELECT DISTINCT Outletid FROM Event) 
```

但是 id 为 1 的数据即将到来（即） id 为 2 的数据即将到来。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:45:50.450

这应该只返回一个记录`ID`。下面的查询将使用id 字段返回`MIN()`城市和州的值。`GROUP BY`由于您有多个`ID`并且只想返回一个值，那么这只会返回满足要求的第一条记录。

```
select ID, min(city) city, min(state) state
from yourTable
group by ID 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!7/7466b/14)

所以这可以通过以下方式工作

```
YourTable
ID   city    state
1    efef    dfdd
2    dwef    sdfsd
1    fdds    fsdfs 
```

如果我们取`MIN()`city 和 state 列的值以及`GROUP BY`id 你的结果将是：

```
YourTable
ID   city    state
1    efef    dfdd
2    dwef    sdfsd 
```

`MIN()`将返回序列中的最低值。因此，由于`city`with the `ID`of以 and`1`开头`e`并且`e`在此之前`f`，它将被选中。`GROUP BY`将所有匹配的内容组合`ID`成一个集群。

然后，如果您想排除任何具有重复 id 的记录，那么您可以将查询更改为：

```
select ID, min(city)  city, min(state)   state
from yourTable
group by ID
having min(city) = max(city)  
   and min(state) = max(state) 
```

编辑：

您还可以使用：

```
select min(rowid) rowid, ID, city, state
from yourTable
group by ID 
```

或者：

```
select *
from yourTable t1
inner join
(
  select min(rowid) row_id, ID
  from yourTable
  group by ID
) t2
  on t1.rowid = t2.row_id
  and t1.id = t2.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:22:44.470

插入另一个 rowID 或等效的唯一列

```
select id,state,city
from Event e1
where e1.rowID in(
   select min(e2.rowID)
   from Event e2
   group by id) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T11:24:50.117

```
delete * 
  from mytable 
 where rowid not in (
     select min(rowid) 
       from mytable
      group by column1, column2
     ) -- column1, column2 are the duplicate columns with which we want to group the rows 
```

上述查询是删除所有重复项的通用查询。内部查询将返回重复列的单行（column1，column2）

编辑：请注意，上面的查询是在 oracle 中测试的。rowid 是 oracle 为所有行提供的系统生成的 id，并且是唯一的。因此，如果我们在某些列上使用 group by 并且有三行满足条件，oracle 会将 rowid 作为 1,2 和 3 添加到它们。

我确信所有其他数据库都有类似的概念，即向查询的结果数据添加行号

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T11:19:22.490

试试这个：如果你使用的是 sql server

由于该表没有主键，因此很难确定要删除哪条记录。所以你可以做以下

步骤1：

```
;with cte as(
     select  id   , state,   city,
     row_number() over (partition by id order by (select 0))as row_num
     from <table>)
select * into #tmp
from cte where row_num=1 
```

第2步：

```
truncate table <table> 
```

第三步：

```
insert into <table>
select * from #tmp 
```

# c# - 3d 阵列的横截面

> ID：12071711
> 
> 赞同：0
> 
> 时间：2012-08-22T11:05:32.423
> 
> 标签：c#

有没有办法做一个 3D 阵列的横截面？

我的意思是：沿 Z 轴切割阵列，以便获得 X 轴和 Y 轴的 2D 平面。

我需要这样做，以便可以将它们作为单独的部分存储`ArrayList`在`List`.

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T11:15:13.370

我不确定 C# 是否有一种开箱即用的方式来做到这一点，所以你必须自己实现一些东西：

```
T[,] SliceThroughZ<T>(T[,,] threeDee, int zIndex)
{
    var xLength = threeDee.GetLength(0);
    var yLength = threeDee.GetLength(1);
    var twoDee = new T[xLength, yLength];
    for (int i = 0; i < xLength; i++)
        for (int j = 0; j < yLength; j++)
            twoDee[i, j] = threeDee[i, j, zIndex];

    return twoDee;
} 
```

或者，您可以实现一个带有二维索引器的包装类，而不是制作副本，该索引器只查询原始数组。但是，您会丢失特定于数组的方法。

```
class ZSliceWrapper<T>
{
    public T[, ,] Source { get; set; }
    public int ZIndex { get; set; }

    public T this[int xIndex, int yIndex]
    {
        get // you could even implement a set.
        {
            return Source[xIndex, yIndex, ZIndex];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:08:01.063

这取决于你的**Z**轴是什么：

如果你说有

`var array = new int[]{xAxiss1, yAxiss1, zAxiss1, xAxiss2, yAxiss2, zAxiss2...}`.

因此，如果您想在 XY 维度上对该数组进行*切片，只需从中选择第一个和第二个元素。*

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T11:16:13.560

`SomeType[,,]`如果你有一个三阶数组，那么*垂直*于你的 z 轴（即平行于 xy 平面）的切割很容易通过固定一个`z`（你希望你的切割所在的“高度”）并让`x`它们`y`穿过它们范围。

例如

```
static IEnumerable<SomeType> CutInXYDrection(SomeType[,,] threeDimArr, int zValue)
{
  for (int x = 0; x < threeDimArr.GetLength(0); ++x)
  {
    for (int y = 0; y < threeDimArr.GetLength(1); ++y)
    {
      yield return threeDimArr[x, y, zValue];
    }
  }
} 
```

**补充：** 如果您要切入 YZ 方向，则可以利用 foreach 遍历多维数组的顺序（C# 语言规范版本 4.0 中的第 8.8.4 节结束）：

```
static IEnumerable<SomeType> CutInYZDrection(SomeType[,,] threeDimArr, int xValue)
{
  int oneLayer = threeDimArr.GetLength(1) * threeDimArr.GetLength(2);
  return threeDimArr.Skip(xValue * oneLayer).Take(oneLayer);
} 
```

# symfony - 如何通过 WAMP 上的命令行检查 symfony 要求

> ID：12071712
> 
> 赞同：0
> 
> 时间：2012-08-22T11:05:32.960
> 
> 标签：symfony

运行 Symfony2 文档的要求明确指出

> 通过以下方式从命令行检查您的要求也是一个好主意：

```
php app/check.php 
```

如何在我的 WAMP 上运行它？我在 Windows 7 上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T11:11:06.753

只需打开命令行窗口，导航到项目的根目录并执行

```
php app/check.php 
```

如果这不起作用，请检查您的 php 二进制文件是否在您的`PATH`环境变量中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T19:35:56.963

不要忘记在命令行**和**Web 应用程序上进行检查。一些检查取决于您的 php.ini，它们在命令行和 Apache 上可能有所不同。

例如，在我的 WAMP 设置中，我有

*   `C:\wamp\bin\php\php5.3.8\php.ini`对于命令行
*   `C:\wamp\bin\apache\Apache2.2.21\bin\php.ini`对于阿帕奇

# c# - 使用 ParameterName 在 SqlParameter 中获取错误

> ID：12071716
> 
> 赞同：0
> 
> 时间：2012-08-22T11:05:53.913
> 
> 标签：c#, asp.net, ado.net

我在我的项目中使用 SqlDataSource1 控件。

源代码：

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:CTSConnectionString %>" SelectCommand="Vehicle" SelectCommandType="StoredProcedure"  OnSelecting="SqlDataSource1_Selecting">
   <SelectParameters>
      <asp:Parameter Name="veh_regn_no" Type="String" />
      <asp:Parameter Name="start_date" Type="DateTime" />
      <asp:Parameter Name="end_date" Type="DateTime" />
   </SelectParameters>
</asp:SqlDataSource> 
```

后面的代码：

```
Protected Sub SqlDataSource1_Selecting(ByVal sender As Object, ByVal e As SqlDataSourceSelectingEventArgs)
Try
            If (ddlVehicleReg.SelectedIndex > 0) AndAlso (txtStartDate.Text <> "") AndAlso (txtEndDate.Text <> "") Then
                e.Command.Parameters("veh_regn_no").Value = Convert.ToString(ddlVehicleReg.SelectedValue)
                e.Command.Parameters("start_date").Value = DateTime.ParseExact(txtStartDate.Text, "dd/MM/yyyy HH:mm:ss", Nothing)
                e.Command.Parameters("end_date").Value = DateTime.ParseExact(txtEndDate.Text, "dd/MM/yyyy HH:mm:ss", Nothing)
            End If
        Catch ex As Exception
        End Try
    End Sub 
```

我收到错误消息：

> 此 SqlParameterCollection 不包含具有 ParameterName 'veh_regn_no' 的 SqlParameter。

我在哪里犯了错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T04:17:06.630

是的，我得到了上述问题的答案。在 veh_regn_no 之前使用 @ 符号 像这样使用

```
e.Command.Parameters("@veh_regn_no").Value
e.Command.Parameters("@start_date").Value
e.Command.Parameters("@end_date").Value 
```

# c++ - 如何在类定义中声明基本期限计时器

> ID：12071719
> 
> 赞同：0
> 
> 时间：2012-08-22T11:05:57.690
> 
> 标签：c++, boost, boost-asio

很抱歉问了这样一个基本问题，但到目前为止，我在网上看到的所有使用基本期限计时器的示例都只是按如下方式初始化计时器

```
boost::asio::deadline_timer timer(ioservice); 
```

如何将此计时器声明为类的一部分。如果我尝试类似

```
boost::asio::deadline_timer timer; 
```

那么如何将 ioservice 对象分配给它呢？

我没有看到类似**timer.ioservice = ioservice的选项**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:10:10.053

您必须将 IO 服务的引用传递给周围类的构造函数，然后在构造函数初始化列表中构造计时器：

```
class ClassWithTimer
{
public:
    ClassWithTimer(boost::asio::io_service &io_service)
        : timer(io_service)  // Constructs the timer
        { }

private:
    boost::asio::deadline_timer timer;
}; 
```

# php - 上传csv文件时php大小错误

> ID：12071722
> 
> 赞同：2
> 
> 时间：2012-08-22T11:06:11.233
> 
> 标签：php, file-upload, upload

我有一个 PHP 脚本，它上传一个 CSV 文件，然后将 csv 文件的一些内容保存到数据库中。当我使用大约 40 kb、大约 100 行的文件时，脚本上的所有内容都可以正常工作。但是，当我尝试上传 850 kb 或更大的类似结构化文件时，我收到以下错误消息：

> 数组 ( [type] => 2048 [message] => 只有变量应该通过引用分配 [file] => /home/dir_name/uploader.php [line] => 10 )

这是`error_get_last()`函数的输出。

这是我正在使用的脚本：

```
<?php

/*
 * Config
 */

mysql_connect(/* creds */) or die(mysql_error());
mysql_select_db('db_name');

$user =& JFactory::getUser();
$user_id = $user->get('id');

ini_set('error_log','/home/dir_name/error.log');
ini_set('upload_max_filesize', '50M');
ini_set('memory_limit','32M');
ini_set('post_max_size','32M');

/*
 * Upload CSV File
 */

if (isset($_FILES['uploadedfile'])){
    if (substr($_FILES['uploadedfile']['name'],-3,3) == "csv"){
        echo $_FILES['uploadedfile']['name']."<br/>";
        $thefile = fopen($_FILES['uploadedfile']['tmp_name'],'r');
        if ($thefile === false){
            print_r(error_get_last());
            exit;
        }
        while (($data = fgetcsv($thefile, 0, ";",'"')) !== FALSE) {
            if($data[0] == "Item Number"){
                continue;
            }
            /*
             * Do all the stuff to data and save to db
             */
            ...
            ...
        }
        //header("Location: ".$_SERVER['PHP_SELF']);
    }
}

?>
<form enctype="multipart/form-data" method="POST">
    <input type="hidden" name="MAX_FILE_SIZE" value="100000" />
    Choose your CSV file of inventory: <input name="uploadedfile" type="file" />
    <input type="submit" value="Upload File" />
</form> 
```

如您所见，我已经手动设置了`upload_max_filesize`、`memory_limit`和`post_max_size`变量，因为我认为这可能是问题所在......但它似乎没有改变任何东西。任何有关此问题的帮助将不胜感激。我希望能够使用此脚本上传**BIG**文件。:-)

** 编辑 **

请记住，当文件足够小时，此脚本运行良好。我用一个小文件（100行）再次尝试了它，它很好。我从第 10 行删除了 &，现在在尝试更大的文件时出现此错误：

> 数组（ [type] => 2048 [message] => 只有变量应该通过引用分配 [file] => /home/dir_name/plugins/content/jw_simpleImageGallery/jw_simpleImageGallery.php [line] => 32）

这个错误是由第`error_get_last`28 行的函数抛出的，这意味着`fopen`函数返回了`FALSE`. 打开上传的文件肯定有问题。由于某种原因，该`error_get_last`函数显示与文件上传无关的错误（我认为它们是警告）。

** 编辑 2 **

我检查了 PHP ini 变量的值，如下所示：

```
ini_set('error_log','/home/pkind2/tim/error.log');
ini_set('upload_max_filesize', '50M');
ini_set('memory_limit','32M');
ini_set('post_max_size','32M');
echo ini_get('upload_max_filesize').'<br>';
echo ini_get('memory_limit').'<br>';
echo ini_get('post_max_size').'<br>'; 
```

输出是：

```
100 M
50 M
100 M 
```

我想我没有更改这些变量的权限，但默认情况下它们已经设置得非常高，所以看起来这些变量不会妨碍 850 k 文件。

** 编辑 3 **

我检查了 的值`$_FILES['uploadedfile']['tmp_name']`，对于小字段 ( ~ 37 kb )，我得到以下输出：

```
/tmp/php7yto3f 
```

但是当我尝试 850 KB 文件时，它不会为该变量输出任何内容，然后我就崩溃了。所以看起来文件没有被保存到更大的文件大小的临时位置。

** 编辑 4 **

问题原来是`<input type="hidden" name="MAX_FILE_SIZE" value="100000" />` 那必须增加 100,000 字节或 100 kb，所以我增加了这个值并且更大的文件工作了...... :-/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:14:07.193

我认为问题出在第 10 行：

```
$user =& JFactory::getUser(); 
```

尝试删除“&”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:15:24.650

你读过错误吗？

第 10 行：

```
$user =& JFactory::getUser(); 
```

remove `&`from `& JFactory`, 那是旧的 PHP4 风格

# unix - 计算具有不同名称的多个文件中的条目数

> ID：12071723
> 
> 赞同：0
> 
> 时间：2012-08-22T11:06:14.947
> 
> 标签：unix, grep, wc

我在一个文件夹中说文件 A.txt、B.txt、C.text。每个文本文件都包含几个条目。如何计算每个文本文件中有多少条目？并且还想提取到一个列表，其中第一列作为文本文件的名称，第二列作为否。对应文件中的条目。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:47:47.983

“条目”是指“行”吗？如果是这样，这是 bash 中一个非常基本且快速的解决方案：

```
files=(A.txt B.txt C.txt)
echo -e "File\tCount"
for i in "${files[@]}"
do
        ret=$(cat $i | wc -l)
        echo -e "$i\t$ret"
done 
```

这是输出：

```
File    Count
A.txt   2
B.txt   1
C.txt   1 
```

如果你把它变成一个脚本，你可能想要获取文件列表作为参数。

# asp.net - 图像控件在动态设置 ImageURL 时不渲染图像

> ID：12071725
> 
> 赞同：0
> 
> 时间：2012-08-22T11:06:29.387
> 
> 标签：asp.net, .net

我正在创建一个小型应用程序，我正在从数据库中读取图像，将图像存储在文件中，然后将 Image Control **ImageURL**属性设置为创建的文件

代码非常简单

```
Dim m_Bytes As Byte() = DirectCast(command.ExecuteScalar, Byte())

    Dim strfn As String = "D:\" + Convert.ToString(DateTime.Now.ToFileTime()) + ".jpeg"

    Dim fs As New FileStream(strfn, FileMode.CreateNew, FileAccess.Write)

    fs.Write(m_Bytes, 0, m_Bytes.Length)
    fs.Flush()
    fs.Close()

    Image1.ImageUrl = strfn 
```

图像在该位置正确创建，但图像控件不呈现图像。我检查了页面的来源，图像控件指向

```
 <img id="Image1" src="D:\129901061171254403.jpeg" /> 
```

src 指向正确的位置...

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:23:58.057

您必须将图像存储在 IIS 下可访问的位置。

例如，您可以在存储图像的应用程序下有一个文件夹。假设您的应用程序部署在文件夹中`d:\virtualDirs\myApp`，您在 url 上浏览它`http://someserver.com/superapp/`。

然后，您可以将图像存储在（例如）文件夹中`d:\virtualDirs\myApp\dynImages`：

```
d:\virtualDirs\myApp\dynImages\129901061171254403.jpeg 
```

然后设置`ImageUrl`：

```
Image1.ImageUrl = "~/dynImages/129901061171254403.jpeg"; 
```

在网页中发送本地文件夹路径根本行不通，因为那是文件在**服务器**上的位置。

# iphone - 如何在 iOS 中使用 beginBackgroundTaskWithExpirationHandler 已在运行的任务

> ID：12071726
> 
> 赞同：42
> 
> 时间：2012-08-22T11:06:35.103
> 
> 标签：iphone, ios, background-process

在我的应用程序中，我正在将图像从 iPhone 上传到服务器。如果用户按主页按钮进行同步，则应用程序将关闭。

我希望应用程序必须在后台运行直到同步完成。

我的问题是：如何使用“ `beginBackgroundTaskWithExpirationHandler`”添加当前正在运行的任务？

请分享你的想法。

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-08-22T14:02:17.577

尽管它的名字，`beginBackgroundTaskWithExpirationHandler:`实际上并没有“开始”一个任务。将其视为“注册...”而不是“开始...”可能会更好。您只是在告诉系统您正在做某事，如果可以的话，您正在做一些想做的事情。

几点：

*   在几乎所有情况下，您都想`beginBackgroundTaskWithExpirationHandler:`在开始做您想做的事情时打电话，然后`endBackgroundTask:`在您完成时打电话。您几乎从不会在用户按下 Home 按钮时调用它们（除非那是您开始任务的时间点，例如将某些内容保存到服务器）。

*   您可以一次打开任意数量的“后台任务”。他们不花钱。它们就像保留计数。只要你还有一个打开的（一个“开始”，没有到达它的“结束”），那么系统就会认为这个请求需要更多的时间。调用“开始”和“结束”方法的成本非常低，所以使用它们来括号任何你想要额外时间完成的东西。

*   无法确定您将完成同步。这些方法只是发出请求。操作系统可能仍会拒绝该请求。只要操作系统需要一些额外的资源，它仍然可能会杀死你。操作系统不是无限耐心的；如果您花费的时间太长（通常大约 10 分钟），在调用过期处理程序后无论如何它都会杀死您。操作系统可能会因为手机被关闭而杀死你。您的应用程序必须能够处理无法完成的问题。操作系统只是为您提供了这种能力，以便您可以改善用户体验。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-14T19:32:36.640

我将以下代码用于后台任务处理程序：

```
__block UIBackgroundTaskIdentifier backgroundTaskIdentifier = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^{

    NSLog(@"Background Time:%f",[[UIApplication sharedApplication] backgroundTimeRemaining]);

    [[UIApplication sharedApplication] endBackgroundTask:backgroundTaskIdentifier];

    backgroundTaskIdentifier = UIBackgroundTaskInvalid;
}]; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-12-10T10:48:08.103

下面是我使用 beginBackgroundTaskWithExpirationHandler 的方法，包括调用要在后台完成的方法。这包括用于启动新异步任务的代码。所以不完全是问题中的问题。在下面添加代码，认为有人可能正在寻找这种情况：

```
- (void)didReceiveObjList:(CFDataRef)message
{
  // Received Object List. Processing the list can take a few seconds.
  // So doing it in separate thread with expiration handler to ensure it gets some time to do     the task even if the app goes to background.

  UIApplication *application = [UIApplication sharedApplication];
  __block UIBackgroundTaskIdentifier bgTask = [application beginBackgroundTaskWithExpirationHandler:^{
    [application endBackgroundTask:bgTask];
    bgTask = UIBackgroundTaskInvalid;
}];

  dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
      [self processObjList:message];

    [application endBackgroundTask:bgTask];
    bgTask = UIBackgroundTaskInvalid;
  });

  NSLog(@"Main Thread proceeding...");

} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-10-24T08:33:58.257

看看这个页面，Apple 描述了如何在后台保持 iOS 应用程序不被挂起。 [苹果文档](https://developer.apple.com/library/ios/documentation/uikit/reference/UIApplication_Class/index.html#//apple_ref/occ/instm/UIApplication/beginBackgroundTaskWithExpirationHandler:)

这是我已经实现的：

```
UIBackgroundTaskIdentifier bgTask;

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
    NSLog(@"=== DID ENTER BACKGROUND ===");
    bgTask = [[UIApplication  sharedApplication] beginBackgroundTaskWithExpirationHandler:^{
        NSLog(@"End of tolerate time. Application should be suspended now if we do not ask more 'tolerance'");
        // [self askToRunMoreBackgroundTask]; This code seems to be unnecessary. I'll verify it.
    }];

    if (bgTask == UIBackgroundTaskInvalid) {
        NSLog(@"This application does not support background mode");
    } else {
        //if application supports background mode, we'll see this log.
        NSLog(@"Application will continue to run in background");  
    }
}

/*

- (void)askToRunMoreBackgroundTask
{
    [[UIApplication sharedApplication] endBackgroundTask:bgTask];
    NSLog(@"restart background long-running task");
    bgTask = [[UIApplication  sharedApplication] beginBackgroundTaskWithExpirationHandler:^{
        NSLog(@"End of tolerate time. Application should be suspended now if we do not ask more 'tolerance'");
        [self askToRunMoreBackgroundTask]; 
    }];

}

*/

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    NSLog(@"=== GOING BACK FROM IDLE MODE ===");
    //it’s important to stop background task when we do not need it anymore
    [[UIApplication sharedApplication] endBackgroundTask:UIBackgroundTaskInvalid];  
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-06-09T13:46:32.710

这是我在应用程序进入后台时使用的其他答案的轻微变化，我需要在主线程上做一些事情：

```
- (void)applicationWillResignActive:(UIApplication *)application
{
     UIApplication *app = [UIApplication sharedApplication];

    // Register auto expiring background task
    __block UIBackgroundTaskIdentifier bgTaskId =
        [app beginBackgroundTaskWithExpirationHandler:^{
        [app endBackgroundTask:bgTaskId];
        bgTaskId = UIBackgroundTaskInvalid;
    }];

    // Execute background task on the main thread
    dispatch_async( dispatch_get_main_queue(), ^{
        // ------------------
        // DO SOMETHING INVOLVING THE WEBVIEW - WHICH MUST OCCUR ON THE MAIN THREAD!
        // ------------------
        [app endBackgroundTask:bgTaskId];
        bgTaskId = UIBackgroundTaskInvalid;
    });
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-22T11:22:36.290

您应该`beginBackgroundTaskWithExpirationHandler`在应用程序将应用程序的状态更改为后台时运行您的任务或捕获通知，然后取消您当前的任务并使用`beginBackgroundTaskWithExpirationHandler`.

# jquery - 第二组复选框被第一组禁用，但未正确切换

> ID：12071727
> 
> 赞同：0
> 
> 时间：2012-08-22T11:06:38.423
> 
> 标签：jquery, checkbox

我在 SO 上阅读了很多类似的问题，我知道这个问题已经被问了很多。我有禁用部分，它工作正常。但是，当我开始取消选中任一组中的复选框时，一切都将被撤消。基本上，当单击任何组的复选框时，应禁用另一个组。

这是我的 HTML

```
<tr>
    <td><input type="checkbox" class="printgroup"></td>
    <td><input type="checkbox" class="downgroup"></td>
</tr>
<tr>
    <td><input type="checkbox" class="printgroup"></td>
    <td><input type="checkbox" class="downgroup"></td>
</tr>
<tr>
    <td><input type="checkbox" class="printgroup"></td>
    <td><input type="checkbox" class="downgroup"></td>
</tr>
<tr>
    <td><input type="checkbox" class="printgroup"></td>
    <td><input type="checkbox" class="downgroup"></td>
</tr> 
```

这是禁用任何其他组的 JS。我知道 JS 不是最漂亮的，也许你可以帮我把它做得更好？

```
$(function(){
  $(".printgroup").click ( function() {
    if ( !$(this).is ( ":checked" ) )
    {
        $(".downgroup").removeAttr ( "disabled" );
        $('#printdown').attr('value', 'Go');
    }       
    else{
      $(".downgroup").attr ( "disabled" , true );
      $('#printdown').attr('value', 'Print');
    }
  });
});

$(function(){
  $(".downgroup").click ( function() {
    if ( !$(this).is ( ":checked" ) )
    {
        $(".printgroup").removeAttr ( "disabled" );
        $('#printdown').attr('value', 'Go');
    }       
    else{
      $(".printgroup").attr ( "disabled" , true );
      $('#printdown').attr('value', 'Download');
    }
  });
}); 
```

[在这里拉小提琴](http://jsfiddle.net/thetuxracer/wQfKz/)。

编辑：应该更坚持。我在发布几分钟后解决了这个问题。

我只是替换了`!$(this).is ( ":checked" )`to `!$('.downgroup').is ( ":checked" )`Still，第二部分仍然存在：我让 JS 高效吗？我现在有两个功能。我可以将它们减少到一个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:25:39.103

是的，您可以将它们融合在一起，因为它们都做同样的事情。只是组不同。请参阅：http: [//jsfiddle.net/wQfKz/2/](http://jsfiddle.net/wQfKz/2/)。

```
$(".printgroup, .downgroup").on("click", function() {
    var isPrintGroup = $(this).is(".printgroup");
    var anyChecked = $(isPrintGroup ? ".printgroup" : ".downgroup").is(":checked");

    // disable other group depending on whether the current group has anything checked
    $(isPrintGroup ? ".downgroup" : ".printgroup").prop("disabled", anyChecked);

    if(!anyChecked) {
        $("#printdown").val("Go");
    } else {
        $("#printdown").val(isPrintGroup ? "Print" : "Download");
    }
}); 
```

# maven - Maven - 是否可以在 pom.xml 中指定镜像？

> ID：12071733
> 
> 赞同：27
> 
> 时间：2012-08-22T11:07:07.053
> 
> 标签：maven, maven-2

是否可以在 pom.xml 中指定镜像？例如，我想做一个我自己的回购，比如中央回购。我想禁用对中央存储库的请求，并向我自己的存储库发出所有请求。是否可以在 Maven 中禁用默认中央仓库？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-22T15:00:38.613

在[pom 中，不可能定义镜像条目](http://maven.apache.org/ref/3.0.4/maven-model/maven.html)，而且如果可以定义镜像（事实并非如此），那将是不好的做法。[与pom 中的存储库定义](http://www.sonatype.com/people/2009/02/why-putting-repositories-in-your-poms-is-a-bad-idea/)类似（这是可能的，但被认为是不好的做法）。

这种事情的最佳解决方案是安装一个[存储库管理器](http://maven.apache.org/repository-management.html)，它就像一个“自己的中央存储库”。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-04-11T17:59:26.083

镜像不能在 pom.xml 中。但它可以添加到您的项目文件中。

使用 maven 3.3.1+ 时，您可以使用核心扩展[project-settings-extension](https://github.com/gzm55/project-settings-maven-extension#example)来加载项目设置，并将项目特定的镜像放入`${basedir}/.mvn/settings.xml`您的项目中。

在`${basedir}/.mvn/extensions.xml`

```
 <extensions xmlns="http://maven.apache.org/EXTENSIONS/1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/EXTENSIONS/1.0.0 http://maven.apache.org/xsd/core-extensions-1.0.0.xsd">
      <extension>
        <groupId>com.github.gzm55.maven</groupId>
        <artifactId>project-settings-extension</artifactId>
        <version>0.1.1</version>
      </extension>
    </extensions> 
```

在`${basedir}/.mvn/settings.xml`

```
<settings>
  <mirrors>
    <mirror>
      <id>id</id>
      <url>https://url-for-this-project/</url>
      <mirrorOf>central</mirrorOf>
    </mirror>
  </mirrors>
</settings> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T15:14:54.157

那是没有意义的。POM 文件不仅用于构建项目，还可以上传到共享存储库。现在想象你的 POM 最终出现在 Maven Central 上。当我将您的项目作为依赖项添加到我的项目之一时会发生什么？

更好的解决方案是使用[Maven 代理服务器](http://maven.apache.org/repository-management.html)。

# php - mysql_select_db 与使用

> ID：12071737
> 
> 赞同：0
> 
> 时间：2012-08-22T11:07:15.070
> 
> 标签：php, mysql

我很想知道使用`mysql_select_db($db)`和之间有什么功能差异`mysql_query("USE $db")`。

我对此很感兴趣，因为它可以很好地解决我在不同数据库上进行[MySQL 复制时遇到的长期问题。](https://stackoverflow.com/questions/9843260/does-replicate-rewrite-db-have-any-real-world-application)

两者都可以，还是出于某种原因应该避免第二个？

谢谢

ps 请我们不要讨论关于`mysql_*`被弃用的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:17:36.957

正如在[PHP.net](http://php.net/manual/en/function.mysql-select-db.php)上看到的，您可以使用其中任何一个。一位用户也对此发表了评论：

> 您可以不使用此功能选择 MySQL 数据库。连接到 MySQL 后立即

```
<?php $connection = mysql_connect("dabatbasehost", "username", "password"); ?> 
```

> 执行此查询：

```
<?php mysql_query("USE somedatabase", $connection); ?> 
```

* * *

在后来的评论中，没有人拒绝这个想法，我假设不会有问题。

# c# - Visual Studio 2012 与 Visual Studio 2010（增量）的比较

> ID：12071739
> 
> 赞同：17
> 
> 时间：2012-08-22T11:07:21.793
> 
> 标签：c#, visual-studio-2010, visual-studio, visual-studio-2012

是否有资源，其中列出了有关新功能等的增量 Visual Studio 2012 <-> Visual Studio 2010 ......尤其是在 C# 领域（不是语言本身，而是工具，如编辑器/调试器等）？我还没有找到一个@MSDN。

在我们团队升级到 VS 2012 期间，这将非常方便。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-27T20:39:59.197

MSDN has this info now, though maybe not in a side-by-side comparison format:

[What's New in Visual Studio 2012](http://msdn.microsoft.com/en-us/library/bb386063.aspx)
[What's New for Visual C# in Visual Studio 2012](http://msdn.microsoft.com/en-us/library/hh156499.aspx)
[Visual C# Breaking Changes in Visual Studio 2012](http://msdn.microsoft.com/en-US/library/vstudio/hh678682)

You can see MSDN blogger Jason Zander's [top 12 reasons to upgrade](http://blogs.msdn.com/b/jasonz/archive/2012/08/15/visual-studio-2012-and-net-framework-4-5-released-to-the-web.aspx).

And a [slideshow showing new features](http://www.eweek.com/developer/slideshows/visual-studio-2012-rtm-comes-chock-full-of-enhancements/) focusing on Win8/XAML/LightSwitch.

Also, the price of VS Professional [has been lowered](http://www.microsoft.com/visualstudio/11/en-us/products/pricing) from US$799 to US$499 (there's no longer an upgrade option for this version).

The available project types may be interesting to some:
[Comparison Chart: New Project Types Visual Studio 11 vs. Visual Studio 10](http://visualstudiomagazine.com/articles/2012/02/29/chart-visual-studio-11-vs-vs-10-vs-common-project-types.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T16:52:47.987

在真正准备好或修复此“功能”之前不升级的一个很好的理由 -[从 VS2010 升级到 VS2012 后，Linq to EF Join 抛出“索引超出范围”](https://stackoverflow.com/q/12489749/198032)

# ruby-on-rails - 如何在 JRuby 中使 Rails 应用程序异步？

> ID：12071741
> 
> 赞同：1
> 
> 时间：2012-08-22T11:07:28.467
> 
> 标签：ruby-on-rails, ruby, concurrency, jruby

我已经阅读了一些关于如何使 Rails 应用程序异步以提高应用程序吞吐量的教程：

[http://thingsaaronmade.com/blog/improving-application-throughput-900-percent-with-asynchronous-responses-in-rails-3.html](http://thingsaaronmade.com/blog/improving-application-throughput-900-percent-with-asynchronous-responses-in-rails-3.html)

[https://github.com/igrigorik/async-rails](https://github.com/igrigorik/async-rails)

它们都不能在 JRuby 中工作。我知道 Rails/JRuby 比 MRI 更好地处理并发性，但我不知道该怎么做。

JRuby 中的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:25:52.190

由于 JRuby 在 JVM 上运行，它可以很好地扩展，开箱即用。因此，一个简单且相当便宜的解决方案是投入更多资源。如今，托管服务提供商有许多不同的托管计划，因此每月可能需要多花几美元。

您还可以利用[Goliath](https://github.com/postrank-labs/goliath)或[Puma](http://puma.io/)等异步 Web 服务器的强大功能，例如为 RoR 应用程序中需要每秒提供许多连接的部分创建 Web 服务。

最后，有一篇很好的文章涉及异步 Web 服务器和性能主题。你可以在这里找到它：[用于加速的 Web 技术](http://www.businesstechnologyarticles.eu/web-technologies-for-speed-up)

# java - 如何让 Java 日志记录使用修改后的 java.util.logging.Level 类

> ID：12071743
> 
> 赞同：4
> 
> 时间：2012-08-22T11:07:40.657
> 
> 标签：java, swing

在我的 Java 应用程序的首选项中，他们可以将调试级别设置为包含七个默认级别的 JComboBox。该列表包含严重，警告，信息等，这是相当丑陋的，我宁愿用“严重，警告”代替英语。

java logging 使用的 java.util.logging.Level 具有可以采用不同资源包的构造函数，因此我想到了 sublassing Level 以便我可以将资源包更改为我自己的。

但是如何让 java 日志记录使用修改后的级别

**编辑**

使用了下面 kans 答案中给出的示例类的修改版本

```
class LevelItem extends Object
{
    public final Level level;
    public LevelItem(Level level)
    {
        this.level = level;
    }

    public String toString()
    {
        return level.getLocalizedName().substring(0,1)+
               level.getLocalizedName().substring(1).toLowerCase();
    }

    public boolean equals(Object obj) 
    {
        return (obj instanceof LevelItem &&
            (this.level.equals((((LevelItem) obj).level))));
    }
} 
```

但需要添加 equals 方法，以便 setSelectedItem() 在组合框中为我工作

IE

```
 debugLevelCombo = new JComboBox();
 debugLevelCombo.addItem(new LevelItem(Level.SEVERE));
 debugLevelCombo.addItem(new LevelItem(Level.WARNING));
 debugLevelCombo.addItem(new LevelItem(Level.INFO));
 debugLevelCombo.addItem(new LevelItem(Level.CONFIG));
 debugLevelCombo.addItem(new LevelItem(Level.FINE));
 debugLevelCombo.addItem(new LevelItem(Level.FINER));
 debugLevelCombo.addItem(new LevelItem(Level.FINEST));
 debugLevelCombo.setSelectedItem(new
      LevelItem(Level.parse(UserPreferences.getInstance().getDebugLevel()))); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T11:26:10.333

您不得更改“java”包中的类。它是 JDK 的一部分。显然它不是 GUI 的选项。只需了解更多如何使用 JComboBox 以不同方式呈现值。例如，您可以创建一个包装类：

```
class LevelItem
{
   private final Level level;
   public LevelItem(Level level) {this.level=level;}
   public String toString()
   {
     if(Level.WARNING.equals(level) return "Warning";
     if(Level.INFO.equals(level) return "Information";
...
     }
   }
} 
```

并将其用于组合框值。或者也许可以制作自定义渲染器。这是如何创建自定义 rednerer 的示例：[How to use Map element as text of a JComboBox](https://stackoverflow.com/questions/2812850/how-to-use-map-element-as-text-of-a-jcombobox)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:38:28.027

Level 中的每个日志记录级别都有一个对应的 int。如果您想过滤要记录的事件级别，您可以尝试一些很长的内容，

```
if (event.getLevel().intValue() > Level.INFO.intValue()) {
    event.log();
} 
```

这将只记录警告和严重。

如果您想更改这些级别的值，我想您可以创建自己的 MyLevels 类，其中包含具有您想要的值的 Level 静态实例。

# jquery - Jquery幻灯片不工作

> ID：12071744
> 
> 赞同：0
> 
> 时间：2012-08-22T11:07:50.203
> 
> 标签：jquery, jquery-plugins

我正在使用来自[http://www.hugoandcat.com/DualSlider/](http://www.hugoandcat.com/DualSlider/)的幻灯片，我已经添加了所有必需的 css 和 javascript 文件，但幻灯片仍然无法正常工作。我的实现的 url 是[http://geddit.in/](http://geddit.in/) 我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:24:18.037

您似乎在页面上两次加载 jQuery - 第一次在第 28 行，然后在第 64 行。

我会删除第二次出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:27:37.977

```
Please remove 

<script type="text/javascript" src="/assets/ae1550c2/jquery.min.js"></script>

from your code. You have used <script type="text/javascript" src="/css/slideshow/scripts/jquery-1.3.2.min.js"> in top of your page with dualSlider js. 
```

# java - 如何在 jar 中导出多个同名文件？

> ID：12071754
> 
> 赞同：0
> 
> 时间：2012-08-22T11:08:15.050
> 
> 标签：java, eclipse, jar

我有一个项目，其中有一些其他项目作为依赖项。所有这些项目在源文件夹“src”中都有一个名为“forms.properties”的文件。我正在使用以下代码获取这些文件：

```
Enumeration<URL> propFiles = ClassLoader.getSystemClassLoader().getResources("forms.properties"); 
```

当我通过 Eclipse 运行项目时，它运行良好，因为它找到了所有属性文件。问题是当我将它导出为可运行的 jar 时，只导出最后一个“forms.properties”，其他的似乎被覆盖，因为它们具有相同的名称并且它们位于同一个文件夹中，只是更改了项目名称。

你知道如何在没有这种覆盖效果的情况下导出它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:12:45.790

在你把所有东西都变成一个 jar 之前，每个文件都有一个不同的文件夹。

当您构建应用程序时，它们必须在同一个 jar 中具有不同的文件夹或不同的名称，或者位于不同的 jar 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:33:21.973

只需将您读取文件的方式更改为具有不同的位置（即文件夹），它们就会被正确导出。

# jquery - 使用jQuery窗口集中定位一个div

> ID：12071756
> 
> 赞同：0
> 
> 时间：2012-08-22T11:08:20.203
> 
> 标签：jquery, css

谁能帮忙，已经有类似的问题，但没有一个能完全满足我的问题。我正在建立一个视差站点[http://www.bettondesignwork.co.uk/tim/Cayton2](http://www.bettondesignwork.co.uk/tim/Cayton2)并且对于动画，所有 div 和元素都必须绝对定位。这会导致不同窗口大小的问题。有没有办法使用一半的窗口和一半的 div 宽度将 div 设置为水平居中？我已经有了这个，但它不太好用

```
var h = $(window).height();
var w = $(window).width();
var shoptw = $('#shoptitle').css('height');

$('#shoptitle') .css({'left': ((w/2) - (shoptw/2) + "px")
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:14:17.070

这应该做你所追求的：

```
var h = $(window).height();
var w = $(window).width();
var shopth = $('#shoptitle').height();
var shoptw = $('#shoptitle').width();

$('#shoptitle') .css({'left': (w/2) - (shoptw/2), 'top': (h/2) - (shopth/2)}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:17:54.807

使用`parseInt`方法。此方法将字符串转换为整数

```
var h = $(window).height();
var w = $(window).width();
var shoptw = parseInt($('#shoptitle').css('height'));

$('#shoptitle') .css({'left': ((w/2) - (shoptw/2) + "px")
}); 
```

# ruby-on-rails - 如何将 ActiveRecord 属性骆驼化为 JSON 响应？

> ID：12071757
> 
> 赞同：2
> 
> 时间：2012-08-22T11:08:26.303
> 
> 标签：ruby-on-rails, json, rest, rabl

有人有想法吗？

我试图在[Rabl Gem](https://github.com/nesquena/rabl)中找到这个选项，但我的搜索不成功。我认为这是一个相当普遍的行动，并期待早日回复。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:16:46.647

[ActiveSupport::Inflector](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-camelize)支持开箱即用的camlize，您应该可以在任何字符串上调用它。

```
"active_model".camelize                # => "ActiveModel"
"active_model".camelize(:lower)        # => "activeModel" 
```

有关完整文档，请参阅链接。

# mysql - 在 mysql 中创建 Where 子句

> ID：12071765
> 
> 赞同：0
> 
> 时间：2012-08-22T11:08:48.047
> 
> 标签：mysql, ruby-on-rails, activerecord, where-clause

```
find_by_sql("SELECT s.productcode, s.description, CAST(SUM(l.amount) as UNSIGNED) AS amount FROM softwares s LEFT JOIN licenses l ON s.id=l.software_id GROUP BY s.productcode, s.description WHERE s.supplier= 'softcat'") 
```

我目前有这个，我得到了错误`ActiveRecord::StatementInvalid in SoftwaresController#export_softcat`

我试图在最后添加一个 where 子句，只选择某个供应商的记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:11:26.800

```
SELECT s.productcode, s.description, CAST(SUM(l.amount) as UNSIGNED) AS amount
FROM softwares s
    LEFT JOIN licenses l ON s.id=l.software_id
WHERE s.supplier = 'softcat'
GROUP BY s.productcode, s.description 
```

试试这个方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T11:11:10.247

您需要在`WHERE`子句之前添加`GROUP BY`子句，从而有效地将 SQL 更改为：

```
SELECT s.productcode, s.description, CAST(SUM(l.amount) as UNSIGNED) AS amount
FROM softwares s 
LEFT JOIN licenses l ON s.id=l.software_id
WHERE s.supplier= 'softcat'
GROUP BY s.productcode, s.description 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T11:12:21.373

您必须将 GROUP BY 语句放在 WHERE 子句语句之后

# javascript - 如何本地化彩盒？

> ID：12071766
> 
> 赞同：3
> 
> 时间：2012-08-22T11:08:52.933
> 
> 标签：javascript, ruby-on-rails, localization, coffeescript, colorbox

我在我的 ROR 应用程序中安装了 Colorbox。但我需要本地化。在脚本中我有：

文件 images.js.coffee

```
$(document).ready ->
          $(".group1").colorbox({rel:'group1',
 transition:"none", maxWidth:"85%", maxHeight:"85%",
 current: "{current} <%= t('views.image.of') %> {total}"}) 
```

其中 {current} 是当前图像，{total} 是总图像。

如何从 yml 文件（app/config/locales/**.yml）粘贴数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T19:22:46.553

您正在翻译一个 jQuery 插件。在`vendor`目录中执行此操作，而不是在您的应用程序区域设置中。

jQuery ColorBox 维护一个`i18n`带有翻译的目录： [https ://github.com/jackmoore/colorbox/tree/master/i18n](https://github.com/jackmoore/colorbox/tree/master/i18n)

例子

```
/*
  jQuery ColorBox language configuration
    language: Spanish (es)
    translated by: migolo
*/
jQuery.extend(jQuery.colorbox.settings, {
    current: "Imagen {current} de {total}",
    previous: "Anterior",
    next: "Siguiente",
    close: "Cerrar",
    xhrError: "Error en la carga del contenido.",
    imgError: "Error en la carga de la imagen."
}); 
```

您可以下载一个并将其包含在 colorbox 之后（如果您使用[git submodules](http://git-scm.com/book/en/Git-Tools-Submodules)则可以加分）。

*示例`Rails >= 3.1`*

```
//= require jquery.colorbox
//= require jquery.colorbox-es 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T20:42:18.853

我使用 gem [https://github.com/fnando/i18n-js](https://github.com/fnando/i18n-js)

其作品！

```
$(document).ready ->
      $(".group1").colorbox({rel:'group1',
          transition:"none", maxWidth:"85%", maxHeight:"85%",
           current: "{current} <%= I18n.t('views.image.of') %> {total}"}) 
```

# ruby-on-rails - Ruby 程序方法调用似乎不起作用

> ID：12071768
> 
> 赞同：0
> 
> 时间：2012-08-22T11:09:11.360
> 
> 标签：ruby-on-rails

我正在使用 Ruby on Rails 编写一个程序，以允许用户管理大学课程、他们的模块以及注册这些课程的学生。

目前，我有两个类：Application.rb 和 CourseModules.rb：

Application.rb 是我用来与用户交互的类——它目前看起来像这样：

代码：

```
class Application
# To change this template use File | Settings | File Templates.
require './courseModules.rb'
def initialize
  main_menu
end

=begin
  def navigateTo(what)
  what.new(v).display
  mainMenu
  end
=end

def main_menu
  puts "What would you like to do?
      1: Add module to a scheme
      2: Remove module from a scheme
      3: Query modules
      4: Modify module
      5: Register a student on a scheme
      6: Remove a student from a scheme
      7: Register a student on a module
      8: Remove a student from a module"
  case gets.strip
    when "1"
      CourseModules.add_module
    when "2"
      CourseModules.removeModuleFromScheme
    when "3"
      navigateTo CourseModules
    when "4"
      navigateTo CourseModules
    when "5"
      navigateTo Student
    when "6"
      navigateTo Student
    when "7"
      navigateTo Student
    end
  end
  Application.new
end 
```

CourseModules.rb 是我做所有工作的地方——它目前看起来像这样：

代码：

```
class CourseModules
# To change this template use File | Settings | File Templates.
   @@moduleScheme = nil
   @@moduleYear = nil
   #@moduleTitle = ""
   @noOfModulesInScheme = 0

   def self.moduleYear
     @@moduleYear
   end

   def initialize(v)
     @val = v
   end
   # Set and get the @val object value
   def set (v)
     @val = v
   end
   def get
     return @val
   end

# Attempt at add_module method on 21/08/2012 at 16:30
def self.add_module
  schemes = {}
  scheme_exists = false
  add_another_scheme = true
  add_another_module = true

  while add_another_scheme
    print "Enter scheme name: "
    scheme_name = gets
    schemes.has_key?(scheme_name.chop) ? scheme_exists = true : scheme_exists = false

   if !scheme_exists
     schemes[scheme_name.chop] = []
     puts "Scheme #{scheme_name.chop} has been added to the system"
   else
     scheme_exists = false
     puts "This scheme has already been added"
   end

   while add_another_module
     print "Enter module name: "
     module_name = gets
     schemes[scheme_name.chop].include?(module_name.chop) ? true : schemes[scheme_name.chop] << module_name.chop
     print "Add another module? "
     ask_if_user_wants_to_add_another_module = gets
     if(ask_if_user_wants_to_add_another_module.chop == "y" or ask_if_user_wants_to_add_another_module == "yes")
      add_another_scheme = false
     else if(ask_if_user_wants_to_add_another_module.chop != "y" or ask_if_user_wants_to_add_another_module != "yes")
       Application.main_menu
          end
   end

 end

 print "Add another scheme? "
 ask_if_user_wants_to_add_another_scheme = gets
 if !(ask_if_user_wants_to_add_another_scheme.chop == "y" or ask_if_user_wants_to_add_another_scheme.chop == "yes")
   add_another_scheme = false
 end
 puts @schemes

end

 while add_another_module
   print "Enter scheme name: "
   scheme_name = gets
   schemes.has_key?(scheme_name.chop) ? scheme_exists = true : scheme_exists = false

   if !scheme_exists
     print "Enter module name: "
     module_name = gets
     schemes[scheme_name.chop] = module_name.chop
     puts "Scheme #{scheme_name.chop} with module #{module_name} has been added to the system"
   else
     scheme_exists = false
     puts "This scheme has already been added"
     puts "Enter module name: "
     module_name = gets
     schemes[scheme_name.chop] = module_name.chop
     puts "Scheme #{scheme_name.chop} with module #{module_name} has been added to the system"
   end

   print "Add another module? "
   ask_if_user_wants_to_add_another_module = gets
   if !(ask_if_user_wants_to_add_another_module.chop == "y" or ask_if_user_wants_to_add_another_module.chop == "yes")
     add_another_module = false
   end
 end
 puts schemes
end

end 
```

目前，当我从 Application.rb 运行程序时，我会看到菜单，我选择选项 1：“将模块添加到方案”

然后我被要求输入一个方案名称，我这样做了，然后出现一条线，告诉我该方案已添加到系统中。

接下来，我被要求输入模块的名称，我这样做了，然后被问到是否要输入另一个模块。如果我输入“y”或“yes”，我可以输入另一个模块的名称。但是，如果我输入“n”或除“y”或“yes”以外的任何内容，程序就会崩溃，并且在控制台中会出现一些错误。

这些错误中的第一个说：

> 在`add_module': undefined method`main_menu' 中为 Application:Class (NoMethodError)

在线上：

```
Application.main_menu 
```

在里面

```
def self.add_module 
```

我的 CourseModules.rb 类中的方法。

应该发生的情况是，当用户在询问他们是否要添加另一个模块时输入“n”或“y”或“yes”以外的任何内容时，他们应该被收回程序主菜单。

有谁知道我在这里做错了什么？我怎样才能把它正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:42:31.077

It looks like you are trying to call a class method with Application.main_menu when it is defined as an instance method on the Application class which is why you are getting an undefined_method. Try adding self to the main_menu method definition.

```
class Application
  def self.main_menu
    ....
  end
end 
```

Fix based on your comments:

You will need to modify the initialize method as well. You can do so by changing it to this

```
class Application
  def initialize
    self.class.main_menu
  end

  ...

end 
```

By adding just self before main_menu in the initialize method you are just telling initialize that you want to initialize a new method when you create a new Application class. In order to tell initialize that you want this method to be a class method you need to pass in the class as well. I hope this makes sense.

# meteor - 使用流星设计模块化应用程序

> ID：12071771
> 
> 赞同：1
> 
> 时间：2012-08-22T11:09:28.330
> 
> 标签：meteor

我将开发一个模块化应用程序，例如：

一方面是公式设计器（您可以创建一个所见即所得的表单设计器，如 wufoo），另一方面是表单文件管理器（存储数据）和其他数据探索。

（这只是一个例子）

在我看来，我想创建三个流星应用程序并使用 Meteor.connect 来互连所有应用程序。就像每个应用程序都是独立的（除了连接部分（只有很少的数据））。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:49:23.097

我建议将它们构建为单独的智能包，并在 package.js 文件中添加依赖项。有关示例，请参阅[git 存储库](https://github.com/meteor/meteor/tree/master/packages)。

# android - Android选项卡图标未占用全部空间

> ID：12071774
> 
> 赞同：0
> 
> 时间：2012-08-22T11:09:34.583
> 
> 标签：android, tabs

您好，我是 android 开发的初学者。我想创建一个标签结构。我希望每个标签都有图标。当我通过 xml 指定图标时，它确实反映在选项卡中。但图标没有占用全部空间。请帮我解决一下这个。这是我的标签 xml

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000000">

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        >

        <TabWidget
                     android:id="@android:id/tabs"
                     android:layout_width="fill_parent"
                     android:layout_height="wrap_content" 
                     android:layout_alignParentBottom= "true"
                     />
        <FrameLayout
                     android:id="@android:id/tabcontent"
                     android:layout_width="fill_parent"
                     android:layout_height="fill_parent"
                     android:layout_above= "@android:id/tabs"
                     android:padding="5dp" />
    </RelativeLayout>
</TabHost> 
```

以下是我的 xml，我用它来让标签有图标。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/home" android:state_selected="true"/>

<item android:drawable="@drawable/homefade"/>

</selector> 
```

这是我用来应用图标的java代码。

```
 TabHost tabHost = (TabHost)findViewById(android.R.id.tabhost);

    tabHost.addTab(tabHost.newTabSpec(HOME_TAB).setIndicator("", getResources().getDrawable(R.drawable.tab_home_config)).setContent(
            new Intent(this, HomeActivity.class))); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T06:05:06.370

我想通了..需要将填充设置为零就是这样。

```
for (int i = 0; i < tabHost.getTabWidget().getChildCount(); i++)
{
tabHost.getTabWidget().getChildAt(i).setPadding(0,0,0,0);
} 
```

# iphone - 更改我的应用程序包标识符

> ID：12071775
> 
> 赞同：0
> 
> 时间：2012-08-22T11:09:35.397
> 
> 标签：iphone, ios, xcode

在 Xcode 4.4.1 如何更改我的应用程序包标识符。

我从一个示例项目开始，想要收拾残局。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T11:18:02.100

在项目导航器中选择您的项目。在生成的编辑器视图中，从左侧的列表中选择您的目标。Summary 选项卡中的第一个字段是 Bundle Identifier。您还可以通过转到同一视图上的 Info 选项卡并在 Custom iOS Target Properties 部分中编辑 Bundle identifier 属性来更新此值。

# jquery - 单击添加类到 raphael 对象

> ID：12071776
> 
> 赞同：4
> 
> 时间：2012-08-22T11:09:38.973
> 
> 标签：jquery, raphael

嗨，我想在单击 raphael 生成的对象[http://jsfiddle.net/v2Ykt/后添加类](http://jsfiddle.net/v2Ykt/)

我试过这个

```
$('#inter-mapka a').click(function(){
        $('#inter-mapka a').removeClass("active");
        $(this).addClass("active");
    }); 
```

但什么都没有发生，我该怎么做

拉斐尔

```
// A1   
    paper.path("M9,163.334 L12,163.25 L18.5,157 L80.958,157 L80.958,192 L64.5,192 L9,177.084Z").attr({"fill":"#6e3315", "stroke-width": 0, "fill-opacity": 0, "stroke": "transparent", "title": "budynek A1"}).mouseover(
        function () {
                this.animate({"fill-opacity": .7}, 200);
            }).mouseout(function () {
                this.animate({"fill-opacity": .0}, 200);
        }); 
```

生成的 HTML

```
<div id="inter-mapka">

    <a title="budynek A1"><path style="fill-opacity: 0;" fill="#6e3315" stroke="none" d="M9,163.334L12,163.25L18.5,157L80.958,157L80.958,192L64.5,192L9,177.084Z" stroke-width="0" fill-opacity="0"/></a>

...

</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:17:14.310

抱歉耽搁了。我现在玩过这个，唯一能让它做你想做的事情的唯一方法就是完全在 Raphael 中——也许 DOM 元素是由 Rapchael“管理”的，所以 jQuery 并没有真正正确地启动

**编辑**我已经对此进行了重构以简化[http://jsfiddle.net/joevallender/v2Ykt/6/](http://jsfiddle.net/joevallender/v2Ykt/6/)

```
var paper = new Raphael(document.getElementById('inter-mapka'), 172, 276);

var a1 = paper.path("M9,163.334 L12,163.25 L18.5,157 L80.958,157 L80.958,192 L64.5,192 L9,177.084Z").attr({"title": "budynek A1"});

var a2 = paper.path("M3.875,141H38c0,0,7.75-3.875,10-8c0-4.5,0-18.5,0-18.5s0.375-5.625-11.125-5.625    s-30.719,0-30.719,0L6.125,110H5l-0.012,10.969L3.875,121V141z").attr({"title": "budynek A2"});

var a3 = paper.path("M81.125,93.188h-30c0,0-7.125-1.938-9.25-7.438c0-5.625,0-18.875,0-18.875    S42.503,61.75,48.001,61c5.624,0,33.124,0,33.124,0V93.188z").attr({"title": "budynek A3"});    

var a4 = paper.path("M5,39.875l7.875,6H40.75c0,0,8.375-0.25,7.25-7.5c0-7.25,0.104-19,0.104-19L44,10H5V39.875z").attr({"title": "budynek A4"});

var a5 = paper.path("M80,10v30.375c0,0,1.125,5,6,5.5c4.875,0,28.75,0,28.75,0L118.875,40V10H80z").attr({"title": "budynek A5"});

var all = [a1,a2,a3,a4,a5];

for(var i = 0; i < all.length; i++) {
  all[i].attr({"fill":"#6e3315", "stroke-width": 0, "fill-opacity": 0, 'stroke': '#f00'});
  all[i].mouseover(
    function () {
      this.animate({"fill-opacity": .7}, 200);
    }).mouseout(function () {
      this.animate({"fill-opacity": .0}, 200);
    });
  all[i].click(function(){
    clearAll();
    this.attr({"stroke-width": 1});
  });
}

function clearAll(){
  for(var i = 0; i < all.length; i++) {
    all[i].attr({"stroke-width": 0});
  }
} 
```

# objective-c - 填充自定义tableviewcell Xcode

> ID：12071777
> 
> 赞同：0
> 
> 时间：2012-08-22T11:09:41.733
> 
> 标签：objective-c

我正在开发一个 iOS 应用程序，有一些数据是我使用 RestKit 从服务器检索的字符串。数据检索成功，我可以使用 NSlog 打印它。所以我想在下面的 tableviewcell 中查看这些数据。

![在此处输入图像描述](../Images/e0b420f4e22f2bf98669df48a283f00c.png)

那么如何实现由我使用 RestKit 从服务器检索到的设备、描述和日期列表填充的 tableviewcell。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:16:25.930

使用 xib 创建您的自定义单元格。

```
@interface YourCustomCell : UITableViewCell
@property(nonatomic, strong) IBOutlet UILabel* deviceNameLbl;
@property(nonatomic, strong) IBOutlet UILabel* desciptionLbl;
@property(nonatomic, strong) IBOutlet UILabel* dateLbl;
@end

@implementation
@synthesize deviceNameLbl ,.......
...... 
```

![在此处输入图像描述](../Images/e63762bfdb466a14b69f0244b1aad03b.png) 然后在您要显示此单元格的视图控制器中。

```
-(UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath {
    static NSString* cellIdentifier = @"YourCustomCell";
    YourCustomCell *cell = (YourCustomCell*)[tableView dequeueReusableCellWithIdentifier:cellType];
     if (cell == nil) {
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:cellIdentifier owner:nil options:nil];
    cell = (YourCustomCell*)[nib objectAtIndex:0];
      }

   //yourDataArray is a array contains NSDictionary
   cell.deviceNameLbl = [[yourDataArray objectAtIndex:indexPath.row]objectForKey@"deviceName"];
   cell.desciptionLbl = [[yourDataArray objectAtIndex:indexPath.row]objectForKey@"description"];
   cell.dateLbl = [[yourDataArray objectAtIndex:indexPath.row]objectForKey@"date"];

   return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:16:38.643

1.  您需要创建自定义`UITableViewCell`
2.  循环遍历您的数据数组`UITableViewController`
3.  在`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`你必须分配/初始化你的班级

但正如@FaddishWorm 所说，这需要一些时间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T11:13:01.620

这很容易，但需要一些时间。您需要将后端数据放入数组（或类似的东西） - 在扩展 UITableViewController 的类中，然后将您的 UILabel 连接为插座，在`tableView:cellForRowAtIndexPath`函数中，您可以将数据分配给特定索引处的单元格。

`cell.deviceDescription.text = [myDataArray objectAtIndex:[indexPath row];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T11:15:10.330

你设置你的单元格高度

```
tableView.rowHeight=height_you_want;
        or
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return your_row_height;
} 
```

在**cellForRowAtIndexPath 内部：**您可以创建三个 UILabel，修改（背景文本字体颜色大小等）并将它们作为子视图添加到单元格或 cell.contentView

```
UILabel *lbl=[[UILabel alloc]initWithFrame:CGRectMake(<#CGFloat x#>, <#CGFloat y#>, <#CGFloat width#>, <#CGFloat height#>)];    
lbl.text=@"Your text";
lbl.backgroundColor=[UIColor clearColor];    
[cell addSubview:lbl];

//use this accessory type     
cell.accessoryType=UITableViewCellAccessoryDisclosureIndicator; 
```

# php - NodeJS 从 PHP 服务器接收数据

> ID：12071780
> 
> 赞同：2
> 
> 时间：2012-08-22T11:09:44.877
> 
> 标签：php, sockets, node.js

我目前正在开发一个使用网络类连接到 PHP 服务器的简单 NodeJS 客户端。此外，NodeJS 客户端作为 Socket.IO 服务器工作，将从 PHP 服务器接收到的数据发送到与 Socket.IO 连接的浏览器。

到目前为止，一切正常。然而，如果我将另一个客户端连接到 Socket.IO，PHP 服务器必须向每个连接的客户端发送通知。因此，它将一个 JSON 编码的数组发送到处理 JSON 数据的 NodeJS 客户端（对其进行解码和修改）。

现在的问题是，有时 PHP 服务器发送的两条单独的消息在 NodeJS 的 onData 事件处理函数中连接：

```
client.on("data", function(data) {

   var msgData = JSON.parse(data.toString("utf8"));
   [...]
} 
```

变量*数据*现在**有时**（不是每次！）包含两个 JSON 字符串，例如：

```
 { "todo":"message", [...] } { "todo":"message", [...] } 
```

*这当然会导致JSON.parse*函数抛出异常。我预计 onData 函数的两次调用，变量*数据*为：

```
{ "todo":"message", [...] } 
```

在 PHP 服务器端，我必须遍历包含当前服务的所有 Socket.IO 连接的数组：

```
foreach($sockets as $id => $client) {

    $nodeJS->sendData($client, array("todo" => "message", [...]);
} 
```

*$nodeJS->sendData*函数对数组进行 json 编码并将其发送到 NodeJS 客户端：

```
socket_write($nodeClient, json_encode($dataToSend)); 
```

*$nodeJS->sendData*函数最终被调用了两次，就像 socket_write 一样。

我现在不知道是 PHP 还是 NodeJS 连接了这两个字符串。我想要的是，每次调用*$nodeJS->sendData*函数时，NodeJS 都会调用一次 onData 处理程序（例如，sendData 被调用两次→ onData 事件被触发两次）。我当然可以在每个 json 编码字符串的末尾添加一些标志，然后在 onData 函数中将它们拆分为一个数组。但是，我不太喜欢这种解决方案。

有没有更简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T00:00:41.923

重要的是要记住，当您从套接字读取数据时，数据将以任意块的形式出现，并且完全取决于您的代码将它们分成对处理有意义的单元；绝对不能保证每个块都对应一个有意义的单元。

yannisgu 已经为您提供了解决方案的第一部分（用换行符终止每个单元，以便您的代码可以知道它在哪里结束）：现在您需要实现第二部分，即缓冲传入的数据并将其拆分为单元。

在初始化时，做类似的事情

```
var buf = ''; 
```

并将`client`' 的编码设置为 utf8。

在您的`"data"`处理程序中：[更新：合并 josh3736 的建议]

```
buf += data;
var idx;
while ((idx = buf.indexOf('\n')) >= 0) {
   // there's at least one complete unit buffered up
   var unit = buf.slice(0, idx);
   // extract it
   if (unit.slice(-1) == '\r') {
     // CRLF delimited
     unit = unit.slice(0, -1);
   }
   if (unit.length) {
     // ignore empty strings
     var msgData = JSON.parse(unit);
     [...]
     // process it
   }
   buf = buf.slice(idx +1);
   // discard it
}
// at this point, buf is either empty or contains an incomplete
// unit which will be processed as soon as the rest of it comes in 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:16:16.267

尝试在 PHP 端的 JSON-String 之后添加一个新行。

# windows - 为 PC 上的每个用户帐户在 HKCU 中插入一个条目

> ID：12071781
> 
> 赞同：3
> 
> 时间：2012-08-22T11:09:46.820
> 
> 标签：windows, batch-file, registry

我是一名管理员，负责将软件安装到小型 PC 局域网。该软件必须分阶段安装（三个不同的可执行安装包）。

销售布偶以错误的顺序提供阶段，并且由于它们以错误的顺序安装，因此无法正确生成注册表项。

所以我需要在注册表中为每台 PC 上的每个现有用户创建一个 HKCU 条目。

我需要安装的注册表项是

```
Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\Software\AcmeSoft\AcmeApp]
"InstallLocation"="C:\\Program Files (x86)\\AcmeApp"
@="" 
```

我想编写一个脚本（语言不重要，不过我熟悉 C++ 和 python），我可以在每台 PC 上运行一次，将这个新的注册表项部署到 HKCU\Software\AcmeSoft\AcmeApp 配置单元。

Regedit 显示了一个名为 HKEY_USERS 的配置单元，我怀疑它可能包含 PC 上所有用户的条目。

我可以以某种方式迭代 HKEY_USERS 并检查上述密钥并在丢失时安装它吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:49:23.270

我在提供的答案中发现了几个简单的语法错误。对于那些可能需要它的人来说，这是正确的语法。

```
for /F  "delims=\ tokens=2,*" %t in ('reg query HKU') do 
    reg add HKU\%t\Software\AcmeSoft\AcmeApp /ve

for /F  "delims=\ tokens=2,*" %t in ('reg query HKU') do 
    reg add HKU\%t\Software\AcmeSoft\AcmeApp /v InstallLocation /d C:\\Program Files (x86)\\AcmeApp 
```

但这并不完全正确。港大录取名单如下：

![香港大学蜂巢](../Images/071b030eb127a3d70d299cecde656182.png)

系统中唯一看起来是有效帐户的是：S-1-5-21-856089149-4157031032-549160387-500

但是，有很多用户登录这台机器。

![PC 上的用户帐户](../Images/c77d30aae49a5023c4b63d4c6d027ef0.png)

所以我需要一个替代方案。如果我得到它，我会在这里发布它。

**更新** 我找到了一个列出所有用户的命令，但这似乎是在向域控制器查询信息，该信息返回系统上的所有帐户（包括管理员、模板、非活动帐户，例如禁用帐户等）

```
wmic useraccount get name,sid 
```

知道有用，但对我的目的来说太过分了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:41:07.983

如果您不反对使用简单的批处理脚本，则可以使用：

如果您愿意，您甚至可以在 HKU 之前添加一个计算机名（例如：\Computer\HKU），这样您就可以远程运行它。您必须以管理员身份运行它（提升）

```
for /F  "delims=\ tokens=1,*" %%t in ('reg query HKU') do reg add HKU\%%u\Software\AcmeSoft\AcmeApp /ve
for /F  "delims=\ tokens=1,*" %%t in ('reg query HKU') do reg add HKU\%%u\Software\AcmeSoft\AcmeApp /v InstallLocation /d C:\\Program Files (x86)\\AcmeApp 
```

# mysql - 数据库中的 GMT 时间

> ID：12071783
> 
> 赞同：0
> 
> 时间：2012-08-22T11:09:58.397
> 
> 标签：mysql, database, postgresql, ms-access

数据库中是否有任何可能性，无论何时给我应该存储为 GMT 时间戳。如果是这样，请分享给我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T16:14:20.773

对于 PostgreSQL，您的表应该有一个类型[`timestamp with time zone`](http://www.postgresql.org/docs/current/interactive/datatype-datetime.html)（`timestamptz`简称）的列，如下所示：

```
CREATE TABLE tbl (id serial, ts timestamptz); 
```

如果您要存储的（我们称之为`my_ts`）是...

*   一个*local* ，即它与您客户端中`timestamp without time zone`的当前设置一致： 按原样插入，所有内容都在内部自动保存为 UTC：`timezone`

    ```
    INSERT INTO tbl (ts) VALUES my_ts' 
    ```

*   a `timestamp with time zone`：
    按原样插入，所有内容在内部自动保存为 UTC：

    ```
    INSERT INTO tbl (ts) VALUES my_ts; 
    ```

*   a`timestamp without time zone`但来自*另一个时区*：
    假设您从*伦敦*`timestamp without time zone`奥运会获得了价值，但您的客户认为您在不同的时区。使用构造转换时间戳：*[`AT TIME ZONE`](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-ZONECONVERT)*

     *```
    INSERT INTO tbl (ts) VALUES my_ts AT TIME ZONE 'Europe/London'; 
    ```* 

 *如果您使用时区名称（在这种情况下不是时区缩写`BST`），则会自动应用 DST（夏令时）规则。此[相关问题](https://stackoverflow.com/q/12042506/939860)中的详细信息。
有关 PostgreSQL 中时间戳处理的更多信息[，请参阅此相关答案](https://stackoverflow.com/a/9576170/939860)。

* * *

现在，如果您想显示`tbl.ts`为 UTC (~ GMT) `timestamp without time zone`，无论您当前的时区如何，请检索如下值：

```
SELECT ts AT TIME ZONE 'UTC' FROM tbl; 
```

请注意，应用于与使用时`AT TIME ZONE`具有*不同的效果*！[仔细阅读手册](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-ZONECONVERT)。`timestamptz``timestamp`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T12:12:54.873

时间`timestamp with time zone`（和旧式`timestamp`，但您通常不应该使用它）始终存储在 PostgreSQL 中的 UTC（“GMT”）中。它们被转换为 UTC 或从 UTC 转换以供显示。如果您希望将它们视为 UTC 进行输入和输出：

```
SET timezone = 'UTC' 
```

在每个会话中，或在数据库或用户级别设置参数。如果它们位于 UTC 以外的 TZ 中，则您的应用必须发送所有符合时区的时间戳；您已经告诉系统“本地时间”是 UTC。

`AT TIME ZONE`如果您想将时间戳显式转换为默认时区以外的时区，该构造会很有用，例如：

```
regress=# SELECT TIMESTAMP '2012-01-01 00:00:00 UTC' AT TIME ZONE '+08:00';
        timezone        
------------------------
 2012-01-01 16:00:00+08
(1 row) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T12:13:10.720

[http://dev.mysql.com/doc/refman/5.5/en/datetime.html](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)

> MySQL 将 TIMESTAMP 值从当前时区转换为 UTC 进行存储，并从 UTC 转换回当前时区进行检索。（这不会发生在其他类型，例如 DATETIME。）默认情况下，每个连接的当前时区是服务器的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T20:37:54.217

您要查找的关键字是 UTC 而不是 GMT（“对于最常见的目的，UTC 是 GMT 的同义词，但 GMT 不再由科学界精确定义。”，[维基百科](http://en.wikipedia.org/wiki/Coordinated_Universal_Time)）。

对于 MySQL，您可以使用[CONVERT_TZ()](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_convert-tz)函数（请注意手册中有关命名时区的警告，如果设置不正确，它可能会破坏您的查询）。

请注意：没有 100% 可靠的方法来处理 MySQL 和您的应用程序之间的时区转换（请参阅[我关于 mysql 时区转换的博客文章](http://www.webdevelopersdiary.com/1/post/2012/06/good-to-know-how-to-properly-store-date-and-time-values-in-mysql.html)，详细了解为什么会这样）。最好将您的日期时间字符串直接以 UTC 格式传递给 MySQL（例如，通过在应用程序本身中进行转换）。如果您需要可靠性，您几乎总是使用 UTC 格式的日期字符串将日期时间存储在 DATETIME 字段中。*

# java - 如何在java中将http标头添加到soaprequest

> ID：12071798
> 
> 赞同：9
> 
> 时间：2012-08-22T11:10:58.113
> 
> 标签：java, soap, header, axis2

我尝试连接到 Yahoo 网络服务。我通过axis2生成了类。我现在面临的问题是，Web 服务在标头中需要一个特定的键值对，而我绝对不能这样做。我在网上搜索并发现了不同的可能性——它们都不适合我。[最有希望的是几乎在本页](http://www.coderanch.com/t/489196/Web-Services/java/Axis-Http-Header)末尾的帖子，Claude Coulombe 建议更改生成的存根的代码，但这也失败了。谁能告诉我如何解决这个问题？

**编辑**

使用 Options 的建议方式产生了以下异常：

```
Exception in thread "main" org.apache.axis2.AxisFault: Address information does not exist in the Endpoint Reference (EPR).The system cannot infer the transport mechanism. 
```

这是我的代码：

```
val stub = new IndexToolsApiServiceStub("https://api.web.analytics.yahoo.com/IndexTools/services/IndexToolsApiV3")

val client = stub._getServiceClient
val options = new Options
val list = new ArrayList[Header]()
val header = new Header
header.setName("YWA_API_TOKEN")
header.setValue("NOTtheREALvalue")
list.add(header)
options.setProperty(HTTPConstants.HTTP_HEADERS, list)
client.setOptions(options)
stub._setServiceClient(client) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T12:37:49.150

您可能想使用`Axis2`'s [Options](http://axis.apache.org/axis2/java/core/api/org/apache/axis2/client/Options.html)：

```
// Create an instance of org.apache.axis2.client.ServiceClient
ServiceClient client = ...

// Create an instance of org.apache.axis2.client.Options
Options options = new Options();

List list = new ArrayList();

// Create an instance of org.apache.commons.httpclient.Header
Header header = new Header();

// Http header. Name : user, Value : admin
header.setName("user");
header.setValue("admin");

list.add(header);
options.setProperty(org.apache.axis2.transport.http.HTTPConstants.HTTP_HEADERS, list);

client.setOptions(options); 
```

这是该代码的[参考](http://blog.facilelogin.com/2011/02/adding-custom-http-headers-via-axis2.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-21T21:58:12.320

是否要向 SOAP 请求或响应添加 HTTP 标头并不重要。无论哪种方式，您都应该使用 MessageContext。假设 msgContext 是您的 Axis2 请求/响应消息上下文对象 (org.apache.axis2.context.MessageContext)，下面的代码可以解决问题，使用它，您可以添加 HTTP 标头。

```
`//Instantiate an Options object from org.apache.axis2.client.Options
 Options options = new Options();
 //Instantiate an ArrayList of type NamedValue from org.apache.axis2.context.NamedValue
 List<NamedValue> namedValuePairs = new ArrayList<NamedValue>();
 //Add as much as headers you want using below code
 namedValuePairs.add(new NamedValue("sample", "value"));
 //Finally add namedValuePairs to options, and add options to msgContext
 options.setProperty(org.apache.axis2.transport.http.HTTPConstants.HTTP_HEADERS, namedValuePairs);
 msgContext.setOptions(options);` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T16:24:21.813

实际上，您只需从 中检索选项引用，`ServiceClient`而不是替换选项对象。然后添加你想要的属性：

```
ServiceClient sc = awst._getServiceClient();
Options ops = sc.getOptions(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-15T10:32:33.837

我也有同样的问题，解决方案是巴比图里卡：添加标题选项而不

```
 // Create an instance of org.apache.axis2.client.Options
Options options = new Options(); 
```

此页面具有误导性：[参考](http://blog.facilelogin.com/2011/02/adding-custom-http-headers-via-axis2.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T07:19:10.437

两个月前我找到了解决这个问题的方法。您无法使用 Axis2 设置自定义标题。所以我回到了旧的 Axisversion，在那里你可以做到。自己设置 Http-header 不是好的做法，而且大多是不必要的。最重要的是，它不是 SOAP 规范的一部分。这就是为什么你不能用 Axis2 做到这一点的原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-24T09:25:06.013

解决方案 -

```
 MyStub stub = new MyStub();
    ServiceClient serviceClient = stub._getServiceClient();
    Options options = serviceClient.getOptions();
    List<NamedValue> namedValuePairs = new ArrayList<NamedValue>();
    namedValuePairs.add(new NamedValue("Authorization", "Basic JSDFANSKMSLAWQEINCCAKNASKNAS2371BASCKA="));
options.setProperty(org.apache.axis2.transport.http.HTTPConstants.HTTP_HEADERS, namedValuePairs); 
```

只需要在选项上设置一个额外的属性，不要像下面这样创建一个新的选项变量，这对我来说没有帮助。

```
Options options = new Options(); 
```

另外，`HTTPConstants.AUTHENTICATE`直接设置也不行（如下设置）

```
clientOptions.setProperty(HTTPConstants.AUTHENTICATE, auth); 
```

# c - 如何从 LBP 图像中获得 256 个 bin/像素？

> ID：12071800
> 
> 赞同：1
> 
> 时间：2012-08-22T11:10:59.360
> 
> 标签：c, image-processing, pattern-matching, computer-vision, feature-extraction

我在 C 中实现统一的 LBP。但我对这个概念感到困惑。我已经实施了 LBP。假设我有一个 512*512 尺寸的图像。在 LBP 之后，它将是 510*510。现在如何从这个 LBP 图像中获得 256 个 bins/pixels。

```
for(i=1; i < image_src->width - 1; i++)
    {
          for(j=1; j < image_src->height - 1; j++)
          {
              const unsigned char center = image_get_pixel_value(image_src, i, j , 0);
              unsigned char code = 0;
              if(center <= image_get_pixel_value(image_src, i-1, j-1 , 0))
                code += 128;
               if(center <= image_get_pixel_value(image_src, i-1, j , 0))
                code += 64;
              if(center <= image_get_pixel_value(image_src, i-1, j+1 , 0))
                code += 32;
              if(center <= image_get_pixel_value(image_src, i, j+1 , 0))
                code += 16;
              if(center <= image_get_pixel_value(image_src, i+1, j+1 , 0))
                code += 8;
              if(center <= image_get_pixel_value(image_src, i+1, j , 0))
                code += 4;
              if(center <= image_get_pixel_value(image_src, i+1, j-1 , 0))
                code += 2;
              if(center <= image_get_pixel_value(image_src, i, j-1 , 0))
                code += 1;

              image_set_pixel_value(image_tar, i-1, j-1, 0, code);
          }
      } 
```

这是查找表：

```
int  UniformPattern59[16][16] = {
             1,   2,   3,   4,   5,   0,   6,   7,   8,   0,   0,   0,   9,   0,  10,  11,
            12,   0,   0,   0,   0,   0,   0,   0,  13,   0,   0,   0,  14,   0,  15,  16,
            17,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
            18,   0,   0,   0,   0,   0,   0,   0,  19,   0,   0,   0,  20,   0,  21,  22,
            23,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
            0,    0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
            24,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
            25,   0,   0,   0,   0,   0,   0,   0,  26,   0,   0,   0,  27,   0,  28,  29,
            30,  31,   0,  32,   0,   0,   0,  33,   0,   0,   0,   0,   0,   0,   0,  34,
            0,    0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  35,
            0,    0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
            0,    0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  36,
            37,  38,   0,  39,   0,   0,   0,  40,   0,   0,   0,   0,   0,   0,   0,  41,
            0,    0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  42,
            43,  44,   0,  45,   0,   0,   0,  46,   0,   0,   0,   0,   0,   0,   0,  47,
            48,  49,   0,  50,   0,   0,   0,  51,  52,  53,   0,  54,  55,  56,  57,  58
    }; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T01:24:24.683

我猜你可能误解了关于 LBP 的概念。LBP 有几个变体：基本 LBP、统一 LBP 和旋转不变的统一 LBP。

在**基本 LBP**中，我们比较中心像素与其相邻像素之一（内插像素以获得更准确的结果）之间的灰度值，以获得该位的二进制编码（0 或 1）。通常，我们将此编码方案的半径设置为 1，将邻居数设置为 8 作为默认配置。因此，我们可以在比较所有 8 个邻居后得到中心像素的局部二进制模式（LBP），这是一个 8 位二进制数，例如 01011110 或 11110000。在这里，我们可以看到这种类型的范围如果我们将二进制数转换为十进制数，LBP 是从 0 到 255。我们通常将每个像素的 LBP 代码分类为 256 种模式中的一种，形成直方图，用于进一步的分类或识别任务，即您问题中的 256bins/pixels。

但是，均匀和**旋转不变的均匀 LBP**有一些不同。也就是说，模式的数量不是256，其中旋转不变的均匀LBP只有10种模式。旋转均匀 LBP 有 9 个旋转均匀 LBP 和其他 1 个，其中 9 个旋转均匀 LBP 通常覆盖图像上 90% 的模式。

因此，在旋转不变的均匀 LBP 中，您只需要生成一个 10-bin 的直方图以进行进一步处理，例如分类或识别。首先，您将每个像素编码为旋转不变的均匀 LBP，这可能会产生一个 image.rows*image.cols 矩阵。然后，将每个模式（矩阵元素）分类为 10 个模式中的一个，形成一个数组来表示直方图。

*一些文件供您参考：*

1.  Scholarpedia 上的 LBP，[http://www.scholarpedia.org/article/Local_Binary_Patterns](http://www.scholarpedia.org/article/Local_Binary_Patterns)
2.  LBP 作者的 C++ 代码，[http://www.cse.oulu.fi/CMV/Downloads/LBPSoftware](http://www.cse.oulu.fi/CMV/Downloads/LBPSoftware)
3.  具有局部二进制模式的多分辨率灰度和旋转不变纹理分类，[http://www.rafbis.it/biplab15/images/stories/docenti/Danielriccio/Articoliriferimento/LBP.pdf](http://www.rafbis.it/biplab15/images/stories/docenti/Danielriccio/Articoliriferimento/LBP.pdf)

# android - StackView Widget 示例源代码

> ID：12071802
> 
> 赞同：26
> 
> 时间：2012-08-22T11:11:06.957
> 
> 标签：android, android-widget

请提供 StackView Widget 示例源代码。[http://developer.android.com/resources/samples/StackWidget/index.html](http://developer.android.com/resources/samples/StackWidget/index.html)重定向到示例链接[http://developer.android.com/tools/samples/index.html](http://developer.android.com/tools/samples/index.html)。

示例链接表明该示例可以在“/samples/android-/”文件夹下找到。但我没有在我的 Windows 7 PC 中从 api 级别 11 到 16 的这些文件夹下找到任何示例。

在[App 小部件部分](http://developer.android.com/guide/topics/appwidgets/index.html)，经常引用此示例项目，但遗憾的是我找不到源代码。请帮帮我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-12-25T15:42:40.350

我在这里找到了整个分支的压缩 tgz： [https ://android.googlesource.com/platform/development/+/master/samples/StackWidget](https://android.googlesource.com/platform/development/+/master/samples/StackWidget)

7-zip应该可以解压tgz

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-03T17:58:14.710

如果你还在找它就在这里

[http://docs.huihoo.com/android/3.0/resources/samples/StackWidget/](http://docs.huihoo.com/android/3.0/resources/samples/StackWidget/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-27T17:05:41.237

我也错过了一些开发者演示，但我终于在 SDK（更新到 API17）的 docs 子文件夹中找到了它们：

\android-sdk\docs\resources\samples\StackWidget

所以，实际上，你一直都有！

**更新（2013 年 8 月 22 日）：**

2013 年 1 月 27 日，上述文件夹**确实**存在，但是，在使用 ADT 22.05 更新到 Android 4.2 和 4.3 后，文件夹**...\samples\...**已从 SDK 中删除并且不再可用。幸运的是，我仍然有一个未改动的版本和一个可用的 Eclipse 项目。想要副本请联系...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-05T11:30:08.753

在此处查看 Vogella 的 Github： [https ://github.com/vogellacompany/android-examples/tree/master/com.vogella.android.stackview.activity](https://github.com/vogellacompany/android-examples/tree/master/com.vogella.android.stackview.activity)

您可以从这里克隆或下载： [https ://github.com/vogellacompany/android-examples.git](https://github.com/vogellacompany/android-examples.git)

您可以在“com.example.android.stackwidget”目录下找到堆栈小部件演示

# php - 将ajax结果显示到文本框中

> ID：12071810
> 
> 赞同：1
> 
> 时间：2012-08-22T11:11:28.407
> 
> 标签：php, javascript, mysql, ajax

我想将我的 ajax 查询结果插入到文本框中。当用户选择产品代码时，单价应该显示在文本框中。输入数量时，必须将单价乘以数量并显示在文本框中。一旦文本框中的所有数据都可用，则需要将日期上传到 mysql db。这是我的代码。

```
<script type="text/javascript">
function showUP(str) {
    if (str==""){
        document.getElementById("UnitPrice").innerHTML="";
        return;
    }
    if (window.XMLHttpRequest)   {
        // code for IE7+, Firefox, Chrome, Opera, Safari   
        xmlhttp=new XMLHttpRequest();  
    } else {
        // code for IE6, IE5   
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    } 
    xmlhttp.onreadystatechange=function(){   
        if (xmlhttp.readyState==4 && xmlhttp.status==200){
            document.getElementById("UnitPrice").innerHTML=xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET","getunitprice.php?q="+str,true);
    xmlhttp.send();
}

function multiply(Quantity) {
    var totalPrice = parseFloat(document.getElementById("UnitPrice").innerHTML)*Quantity;
    document.getElementById("TotalPrice").innerHTML = totalPrice;
}
</script>

</script>

<form action="addorderitemform.php" method="post" name="addorderitemform">

                <table width="600px" border="0" cellspacing="1" cellpadding="3">
                    <tr>
                <th width-"18%>OrderID:</th>
                <td width="60%">
                    <select name="OrderID">
                    <option value="SelectCategory">Select a existing order</option>

                        <?php
                        $query = 'SELECT OrderID FROM customerorder';
                        $result = mysql_query ( $query );
                        while ( $row = mysql_fetch_assoc ( $result ) ) 
                        {
                             print "<option value=\"".$row['OrderID']."\">".$row['OrderID']."</option>\r";
                        }
                        ?>
                        </select></td>
                    </tr>

                                        <tr>
                <th width-"18%>Product:</th>
                <td width="60%">
                    <select name="ProductCode" id="ProductCode" onchange="showUP(this.value)">
                    <option value="SelectCategory">Select product</option>

                        <?php
                        $query1 = 'SELECT ProductCode, ProductName FROM Product';
                        $result1 = mysql_query ( $query1 );
                        while ( $row1 = mysql_fetch_assoc ( $result1 ) ) 
                        {
                             print "<option value=\"".$row1['ProductCode']."\">".$row1['ProductName']."</option>\r";
                        }
                        ?>
                        </select></td>
                         <br/>

                        </tr>

                    <tr>
                <th width-"18%>UnitPrice:</th>
                <td width="60%">
                <input type-"text" name="UnitPrice" id="UnitPrice" size="60" />

                </td>
                </tr>

                <tr>
                <th width-"18%>Quantity:</th>
                <td width="60%">
                <input type-"text" name="Quantity" id="Quantity" onblur= "multiply (this.value)" size="60" />

                </td>
                </tr>

                <tr>
                <th width-"18%>TotalPrice:</th>
                <td width="60%">
                <input type-"text" name="TotalPrice" id="TotalPrice" size="60" />

                </td>
                </tr>

</table>

<input type="submit" value="Add OrderItem" />
<input type="reset" value="Reset" />

</p>
</form> 
```

GETUNITPRICE.PHP

```
<?php
$q=$_GET["q"];

$con = mysql_connect('localhost', 'root', '');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("Order", $con);

$sql="SELECT CostPrice FROM Product WHERE ProductCode = '".$q."'";

$result2 = mysql_query($sql) or die($sql."<br/><br/>".mysql_error());

while($row2 = mysql_fetch_array($result2)) {

  echo "".$row2['CostPrice']."";

}

mysql_close($con);
?> 
```

* * *

然后将文本框中的详细信息上传到mysql数据库

```
<?php
$OrderID = (trim($_POST['OrderID']));
$ProductCode= (trim($_POST['ProductCode']));
$UnitPrice = (trim($_POST['UnitPrice']));
$Quantity = (trim($_POST['Quantity']));
$TotalPrice= (trim($_POST['TotalPrice']));

$host = "localhost";
$user = "root";
$password = ""; 
$db = "Order";
if (!$con = mysql_connect ($host, $user, $password))
    {$message = "Server is not available. Please try again later";
    echo "$message";
    die ();
    }
//or die ("Cannot connect to Server.");

mysql_select_db ($db) or  die ("Database Order not available.");

$query = "INSERT INTO `OrderItem` (`OrderID`, `ProductCode`, `UnitPrice`, `Quantity`, `TotalPrice`) VALUES ('$OrderID','$ProductCode', '$UnitPrice', '$Quantity', '$TotalPrice')";
$result = mysql_query($query) or die($query."<br/><br/>".mysql_error());
//or die ("Insert into OrderItem failed.".mysql_error());
 echo "<script> alert ('Your Information Was Successfully Saved')</script>";
 header("Location: managesalesorder.php"); 

    exit();
    mysql_close($con);

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:20:17.233

改变

```
document.getElementById("UnitPrice").innerHTML = xmlhttp.responseText; 
```

到

```
document.getElementById("UnitPrice").value = xmlhttp.responseText; 
```

# c++ - 库依赖“转发”，或部分静态库？

> ID：12071818
> 
> 赞同：0
> 
> 时间：2012-08-22T11:11:57.893
> 
> 标签：c++, visual-studio-2010, dll

假设我有**A.lib**和**B.dll**（带有自己的**B.lib**），它们实际上是同一件事（它们共享标头和符号）。

我需要一个应用程序来链接它们，但我只想通过**A.lib**来做到这一点。基本上，我需要链接器能够找到从 B.dll 导出的符号，**而** *无需*显式链接**B.lib**。

理想情况下，我想完全消除**A.lib并在****B.lib**中有一些代码，其余的在**B.dll**中。

### 编辑

我的目标是创建一个库，该库可以在与其链接的应用程序中直接使用某些特殊命名的符号，而无需强制库用户提供指向它们的指针。所述符号（主要是函数）是工具生成的，因此它们的名称通常缺乏任何描述性价值（更不用说它们的数量很多了）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:28:24.367

您可以将静态库项目添加到您的解决方案中，例如 C。只有 A.lib 和 B.lib 作为附加依赖项，没有代码。它运行 lib.exe 并将 A.lib 和 B.lib 合并到 C.lib 中。任何后续项目都可以链接到。

好吧，只要您使用项目依赖项来确保一切都以正确的顺序构建，这应该可以工作。C 项目依赖于 A 和 B，所有使用 C.lib 的东西都依赖于 C。像这样隐藏依赖关系并不是最好的做法。

# google-apps-script - 在新项目中使用 ScriptDb 所需的权限

> ID：12071819
> 
> 赞同：0
> 
> 时间：2012-08-22T11:11:58.053
> 
> 标签：google-apps-script

我尝试`ScriptDb`在网站中作为 GAS 运行的新项目中使用。一旦将行`var stored = db.save(ob);`添加到代码中，即使已注释！，GAS 就不再工作了。它尝试加载 GAS，但屏幕上却出现“您需要权限才能执行此操作”<--免费翻译我的语言！:-) 在旧项目中，数据库工作正常。

实际上，我注意到对于 Example`var results = db.query({employee_id: 1});`的原因相同。所以似乎不允许任何与数据库相关的......

我在两个项目中都使用了相同的代码：

```
var db = ScriptDb.getMyDb();
var ob = {type: "employee",
            employee_id: 1,
            department_id: 52};
var stored = db.save(ob); 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:31:33.757

每次添加需要授权的新服务时，都必须从脚本编辑器显式授权脚本。

打开脚本编辑器，运行任意函数，会提示授权。完成授权过程。

# xcode - Xcode IOKit 构建良好，但没有构建文件夹或驱动程序

> ID：12071820
> 
> 赞同：1
> 
> 时间：2012-08-22T11:12:00.823
> 
> 标签：xcode, build, iokit

我熟悉 Windows 驱动程序开发（WinDDK），但最近更改为 Mac 的 Xcode，现在我绝对是这个领域的新手。我正在尝试从这里的 Apple 教程中制作一个示例项目： [https ://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/KEXTConcept/KEXTConceptIOKit/iokit_tutorial.html](https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/KEXTConcept/KEXTConceptIOKit/iokit_tutorial.html)

我已经添加了所有设置，现在轮到尝试使用 kextlibs，但我找不到任何 Build 文件夹或驱动程序。事实上，在 Xcode 中编写其他程序时，我可以在模拟器中成功运行它们，但在没有模拟器的情况下无法制作 .dmg 文件。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:25:46.000

XCode 项目的文件树中应该有一个“产品”组。它应该包含您的 .kext 包。如果在成功构建后右键单击它，则可以选择“在 Finder 中显示”。与早期版本不同，XCode 4 将构建产品放置在 ~/Library/ 下的某个文件夹中——手动查找并不容易。

# java - <<= 运算符在 Java 中是什么意思？

> ID：12071826
> 
> 赞同：5
> 
> 时间：2012-08-22T11:12:42.480
> 
> 标签：java, hashmap, bit-manipulation, bit

您能否具体解释一下[HashMap 构造函数](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/HashMap.java#HashMap)中的 这段代码片段

> 容量 <<= 1：

```
// Find a power of 2 >= initialCapacity
198         int capacity = 1;
199         while (capacity < initialCapacity)
200             capacity <<= 1; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T11:14:05.400

它相当于`capacity = capacity << 1;`。
该操作将容量的位向左移动一位，相当于乘以 2。

您发布的特定代码找到大于 2 的最小幂`initialCapacity`。

`initialCapacity`因此，例如if是 27，`capacity`在循环之后将是 32 (2^5)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T11:15:58.670

就像`var += 1`是大约等价于`var = var + 1`，您在此处看到的 ( `var <<= 1`) 大致等价于`var = var << 1`，即“设置`var`为 的`1`-position 二进制左移的结果`var`”。

在这个非常具体的情况下，它实际上是一种稍微（运行时）更快的表达方式`capacity *= 2`（因为按位左移 1 个位置相当于乘以 2）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T11:13:53.743

它相当于

```
capacity = capacity << 1; 
```

它将位向左移动`capacity`一个位置（即`00011011`变为`00110110`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T11:48:57.773

每次从循环中出来时，“容量”的值都会增加 2 次幂。

就像最初它是 1 ie2^0; 第一次操作（容量 <<= 1）使其变为 2^1，然后变为 2^2，依此类推。可能你想在 [http://www.tutorialspoint.com/java/java_basic_operators.htm看到更多关于它的信息](http://www.tutorialspoint.com/java/java_basic_operators.htm)

# android - 如何在android中将布局插入布局？

> ID：12071829
> 
> 赞同：12
> 
> 时间：2012-08-22T11:12:45.747
> 
> 标签：android, android-layout

我有两个布局，第一个和第二个，我想插入第二个到第一个。当我按下按钮获取布局时，我想将第二个布局插入到具有 id @+id/layout 的布局中，它在按钮底部显示第二个布局

第一个布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

    <Button
    android:id="@+id/btn_get_layout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Get Layout" />

<LinearLayout
    android:id="@+id/layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

</LinearLayout>

</LinearLayout> 
```

第二种布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/card_base"
android:orientation="vertical" >

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/img_cover"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_margin="10dp"
        android:scaleType="fitXY"
        android:src="@drawable/card_beauty" />

    <ImageView
        android:id="@+id/img_photo"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_margin="20dp"
        android:scaleType="fitXY"
        android:src="@drawable/sample_0" />
</RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-22T11:18:37.253

如果我理解正确，您应该在第一个布局中使用以下代码

```
<include 
     layout="@layout/second_layout"
     android:id="@+id/includedLayout"
     android:visibility="gone"
     android:layout_below="@id/buttonId" /> 
```

然后在您的按钮操作中，您只需使用

```
((RelativeLayout)findViewById(R.id.includedLayout)).setVisibility(View.VISIBLE); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-22T11:20:07.357

```
 LinearLayout placeHolder = (LinearLayout) findViewByid(R.id.layout);
    getLayoutInflater().inflate(R.layout.second_layout, placeHolder); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-01-06T04:17:11.513

# 采用[`include`](https://developer.android.com/training/improving-layouts/reusing-layouts.html)

这是一个更完整的例子。使用 .将方形蓝色布局插入到主布局中`include`。

[![在此处输入图像描述](../Images/7e9218cb82ec28409937550379e1db5e.png)](https://i.stack.imgur.com/KjaXf.png)

***activity_main.xml***

这是主要布局。自定义布局使用`include`. 您也可以在此处覆盖任何属性。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="16dp">

    <!-- Here is the inserted layout -->
    <include layout="@layout/my_layout"/>

</RelativeLayout> 
```

***my_layout.xml***

这是将插入主布局的自定义布局。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:background="@color/colorPrimary">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:padding="5dp"
        android:text="My Layout"/>

</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-12T11:54:58.600

您应该使用此代码片段在另一个布局中添加布局。

```
 parentLayout=(LinearLayout)findViewById(R.id.parentLayout);
    inflateView=View.inflate(this,R.layout.view_video,parentLayout); 
```

这`parentLayout`是根视图，`R.layout.view_video`是您需要插入的布局。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T11:17:19.043

使用 LayoutInflator 将外部布局膨胀到现有布局中。[查看 Android Dev Site 上的 LayoutInflater](http://developer.android.com/reference/android/view/LayoutInflater.html)以获取更多信息。

# mysql - 安装 mysql noinstall zip 存档

> ID：12071834
> 
> 赞同：10
> 
> 时间：2012-08-22T11:13:11.747
> 
> 标签：mysql, installation

我一直在尝试使用我的 mysql noinstall zip 存档，而我在某些网站上找到的步骤不是描述性的。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T11:44:59.503

如果您按照[此处](http://dev.mysql.com/doc/refman/5.1/en/windows-install-archive.html)的说明进行操作，您会没事的。从该页面：

> 从 noinstall 包安装的用户可以使用本节中的说明手动安装 MySQL。从 Zip 存档安装 MySQL 的过程如下：
> 
> *   将存档解压缩到所需的安装目录
> *   创建选项文件
> *   选择 MySQL 服务器类型
> *   启动 MySQL 服务器
> *   保护默认用户帐户

启动服务器运行

```
mysqld --console 
```

然后在那次运行之后

```
mysql -u root 
```

开始做任何你想做的事。

请注意，MySql 的功能与您将其安装或配置为作为服务运行时完全相同。您的架构存储在磁盘上。如果您在停止它后启动它，您以前的数据仍然存在。所以它不会神奇地变成内存数据库。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-12T16:32:03.560

如果要将 MySQL 数据库安装为服务，可以使用以下命令。

`mysqld.exe --install`

# iphone - MPMoviePlayer 警告

> ID：12071835
> 
> 赞同：1
> 
> 时间：2012-08-22T11:13:15.723
> 
> 标签：iphone, objective-c, ios, video, ios4

有时当我的 iPad 开始播放视频时，我收到以下警告
警告：
`under normal conditions, _fillInQueueWithExtraSpace:ignoreExistingItems: should not be re-entered.`
有人知道我为什么收到此警告吗？我在[这里](https://stackoverflow.com/questions/11263323/warning-under-normal-conditions-fillinqueuewithextraspaceignoreexistingitems)和[这里](https://stackoverflow.com/questions/9806826/got-the-message-warning-under-normal-conditions-fillinqueuewithextraspace)发现了这样的问题，但它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:07:30.137

请在播放电影前检查电影播放器​​的 loadState。仅当负载不是 MPMovieLoadStateUnknown 时才播放影片。如果是则 setContentUrl 并调用 perpareToPlay。

# android - Locale FRENCH 与 Locale FRANCE 之间的区别

> ID：12071841
> 
> 赞同：15
> 
> 时间：2012-08-22T11:13:27.180
> 
> 标签：android

[http://developer.android.com/reference/java/util/Locale.html](http://developer.android.com/reference/java/util/Locale.html)

例如有什么区别

```
 Locale FRENCH vs Locale FRANCE 
```

和

```
Locale GERMAN vs Locale GERMANY 
```

我正在搜索，但在文档中找不到任何关于差异的信息。任何的想法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-22T11:20:30.153

法语和德语在更多国家使用，而不仅仅是法国和德国。在不同的国家，他们会有不同的货币、不同的数字书写方式等。这就是为什么您可以同时指明您所在地区的语言和地区，这就是为什么您可以为每种语言/地区组合定义特定资源（例如 de- DE 代表德国，de-AT 代表奥地利，或 fr-FR 代表法国，fr-rCA 代表加拿大）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:20:40.073

一个指地理区域（及其约定，例如在数字中使用逗号或小数点），另一个指一种语言。

例如，法语可以在法国或加拿大使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T11:29:53.657

语言环境包含：

*   语言代码
*   国家或地区代码（可选）
*   可选变体代码（可选）

因此，同一种语言有多个预定义`Locale`对象。有些带有国家代码，有些仅带有语言。

有关更多详细信息，请参见：java.sun.com/developer/technicalArticles/J2SE/locale

# javascript - JavaScript 将字符串解析为等效对象

> ID：12071843
> 
> 赞同：1
> 
> 时间：2012-08-22T11:13:48.647
> 
> 标签：javascript, ecmascript-5, jscript

我正在编写一个 JavaScript 实用程序，它允许用户检测特定对象/函数在运行时是否可用。这是源代码，这是可行的，但是每次您想测试另一个对象时都需要对其进行编辑：

```
<!DOCTYPE html>
<html>
    <head>
        <title>HTML5 Template</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $('#TestObject').click(function() {
                    alert(typeof(HTMLCollection));
                });
            });
        </script>
    </head>
    <body>
        <input id="ObjectType" type="text" />
        <input id="TestObject" type="button" value="Test" />
    </body>
</html> 
```

单击该按钮时，如果项目存在，则显示“对象”或“功能”的警报，如果不存在，则显示“未定义”。

我想要的是有一个文本框`<input id="ObjectType" type="text" />`，我可以在其中输入要测试的对象，然后单击按钮进行测试，这样就无需继续编辑文档了。这可能吗？有什么类似于我可以使用的反射吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:21:00.040

这是可能的，因为 JavaScript 对象属性实际上是关联的键值对，这`obj.property`意味着`obj['property']`.

将此应用于您的问题，以下代码将起作用：

```
alert(typeof(window[$('#ObjectType').val()])); 
```

这是有效的，因为所有“全局”变量实际上都是`window`对象的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:26:54.233

您可以通过执行从字符串类名获取对象`window[className]`。我们将通过从输入文本框中获取类名的字符串值、从类名中获取对象并针对它调用 typeof 来使用它：

保持您的代码相同只需替换`alert(typeof(HTMLCollection));`为`alert(typeof(window[$("#ObjectType").val()]));`

# jquery - 是否可以以编程方式更改 slickgrid 中列的宽度？

> ID：12071844
> 
> 赞同：1
> 
> 时间：2012-08-22T11:13:49.390
> 
> 标签：jquery, slickgrid

我试过 grid.getColumns[index].width = <>。但是，这不会调整列的大小。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T11:40:25.250

修改列宽后，您需要将列设置重新应用到网格。

```
$("#resize").click(function () {
    var cols = grid.getColumns();
    cols[0].width = 120;
    grid.setColumns(cols);
}); 
```

[JSFiddle在这里](http://jsfiddle.net/qvRh5/)

# css - 根据属性数据库jsf2 primefaces更改外观数据表

> ID：12071849
> 
> 赞同：0
> 
> 时间：2012-08-22T11:14:13.357
> 
> 标签：css, flash, jsf-2, datatable, primefaces

我有这个从数据库加载的数据表，这里是：

```
<p:dataTable id="cars" var="car" value="#{acceuilUserController.lc_maj}" tableStyle="width:auto">  
 <p:column headerText="Commande N° : " style="width:100px">  
 <h:outputText value="#{car.commande.id}" />  
 </p:column>  
 <p:column headerText="Date de mise à jour : " style="width:100px">  
 <h:outputText value="#{car.dateMaj}" />  
 </p:column> 
 <p:column headerText="Decision : " style="width:100px">  
 <h:outputText value="#{car.decison}" />  
 </p:column> 
 <p:column headerText="Etat : " style="width:100px">  
 <h:outputText value="#{car.etat}" />  
 </p:column> 
</p:dataTable> 
```

我有另一个`car.lu`接受两个值的属性：`true or false`，我想当它是假的时候线闪烁并变成红色我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:29:00.703

[您可以使用条件着色](http://www.primefaces.org/showcase/ui/datatableColoring.jsf)来实现此目的：

```
<p:dataTable id="cars" var="car" value="#{acceuilUserController.lc_maj}" tableStyle="width:auto" rowStyleClass=#{(car.lu == false) ? 'red' : null}>
    <p:column headerText="Commande N° : " style="width:100px">
        <h:outputText value="#{car.commande.id}" />
    </p:column>

    <p:column headerText="Date de mise à jour : " style="width:100px">
        <h:outputText value="#{car.dateMaj}" />
    </p:column>

    <p:column headerText="Decision : " style="width:100px">
        <h:outputText value="#{car.decison}" />
    </p:column>

    <p:column headerText="Etat : " style="width:100px">
        <h:outputText value="#{car.etat}" />
    </p:column>
</p:dataTable> 
```

如果`car.lu`返回`false`样式类`red`应用于行。所以你必须在你的 CSS 中有这个：

```
.red {
    background-color: red;
} 
```

# java - 动态java项目中jar文件应该可以读取的配置文件放在哪里？

> ID：12071852
> 
> 赞同：-1
> 
> 时间：2012-08-22T11:14:24.037
> 
> 标签：java, jakarta-ee, configuration, web-config

> **可能重复：**
> [在类路径中定位文件时出现问题](https://stackoverflow.com/questions/2666875/problem-locating-file-in-a-classpath)

xml文件之类的配置文件应该放在java动态web项目的哪里，lib文件夹中的外部jar文件应该在运行时读取配置文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:29:37.990

底线是这些文件必须到达您的应用程序类路径。在 web probject 的情况下`WEB-INF/classes`是最佳位置。（正如@Easwaramoorthy Kanaga 已经提到的那样）。

问题是将文件放在项目中的哪个位置。如果您使用的是 Maven，它几乎决定了位置`src/main/resources`。如果您不使用 maven，请将它们放在资源目录中。资源目录应定义在与`src`目录相同的级别。例如，如果您`src`的项目根目录下有目录`resources`，则在同一位置创建目录。配置您的 IDE 以将这些文件复制到目标目录。更新您的构建脚本以执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:14:24.037

您可以将它放在 WEB-INF/classes 文件夹中。即使您可以在类文件夹中放置一个文件夹，它也能完美运行。

还有一件事，jar 文件应该使用硬编码路径读取配置文件，而不是像这样。

```
String xmlFilePath = "configfile.xml";    
InputStream file = this.getClass().getClassLoader().getResourceAsStream(xmlFilePath); 
```

# c# - 检查字符串是否是枚举的实例

> ID：12071854
> 
> 赞同：0
> 
> 时间：2012-08-22T11:14:27.177
> 
> 标签：c#

我有以下`enum`声明：

```
enum MyType
{
   Boolean,
   Int,
   Double,
   String
} 
```

那么如果我有 a `string abc = "anyvalue"`，我如何检查该`abc`值是对应于`myType`枚举值的 bool、int、double 还是 string？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T11:15:37.050

你可以使用[`Enum.TryParse`](http://msdn.microsoft.com/en-us/library/dd783499.aspx)方法。如果该值被成功解析为枚举值之一，同时还输出解析的枚举值，这将返回 true。

如果您想在执行解析时忽略大小写，请使用接受布尔参数的重载。

```
MyType type;
if (Enum.TryParse(abc, out type))
{
    // can be parsed
    switch (type)
   {
       case MyType.Boolean: break;
       case MyType.Int: break;
       case MyType.Double: break;
       case MyType.String: break;
   }
} 
```

也可以使用[`Enum.IsDefined`](http://msdn.microsoft.com/en-us/library/system.enum.isdefined.aspx)，但此方法始终执行区分大小写的搜索，因此它的灵活性不如[`Enum.TryParse`](http://msdn.microsoft.com/en-us/library/dd991317.aspx)并且只能用于了解名称是否已定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:16:31.843

用这个：

```
MyType dummy;
if(bool isEnum = Enum.TryParse(mystring,out dummy))
{
// mystring is a valid enum 
} 
```

# c# - 为什么 ASP.NET MVC 实体编码所有 8 位字符 > ansi 127？

> ID：12071855
> 
> 赞同：2
> 
> 时间：2012-08-22T11:14:32.090
> 
> 标签：c#, asp.net-mvc, html-encode

参考这个问题的公认答案：[ASP.NET - What Characters does Server.HtmlEncode Encode Encode into Named Character Entities](https://stackoverflow.com/questions/10978673/asp-net-what-characters-does-server-htmlencode-encode-into-named-character-ent)

`HtmlEncode`这里引用了源代码。我对以下几行有疑问：

```
 if ((ch >= '\x00a0') && (ch < 'Ā'))
  {
      output.Write("&#");
      output.Write(ch.ToString(NumberFormatInfo.InvariantInfo));
      output.Write(';');
  } 
```

基本上，这会将所有字符从`&nbsp;`(ASCII 代码 127) 转换为 ÿ (ANSI 代码 255) 到其实体编码表示 ( <ansicode>)。

但是，所有 ansi 代码高于 255 的字符都按原样写入输出。

有谁知道这种 ANSI 127 - 255 编码背后的原理？有一个网页看起来有点傻，在 utf-8 中，源代码看起来像

```
"S&#248k:" 
```

代替

```
"Søk:" 
```

（“Søk”是挪威语的“搜索”）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:36:14.343

ASCII，见[http://en.wikipedia.org/wiki/Ascii](http://en.wikipedia.org/wiki/Ascii)，只定义了 0 到 127 之间的值；这是 7 位而不是 8 位（一个字节）。它们是 HTML 编码，以避免发送非法 ASCII（最高有效位）字符。

发送[UTF-8](http://en.wikipedia.org/wiki/UTF-8)（这是 Web 的事实上的编码）时，非 ASCII 字符 (0xA0 - 0xFF) 用于指定多字节字符。因此，为了避免冲突，他们使用了命名字符串。

至少，这就是我会做的。

# regex - 如何将 3 个不同的域名重写为 1 个 REGEX 行？

> ID：12071857
> 
> 赞同：0
> 
> 时间：2012-08-22T11:14:37.050
> 
> 标签：regex, apache, .htaccess, mod-rewrite, alias

给出了三个网站域，每个域都有 .net 和 .org 域：唯一的区别是一个域以单个字母结尾，`i`一个以双字母结尾，一个以`ie`单个字母结尾，`y`都直接在字母之后`R`

> www.XYZARi.com
> www.XYZARie.com
> www.XYZARy.com

以下规则工作正常。但是 apache 有没有更快的方法来重写这些规则？让他们排成一行？如果一条 Apache 线路比以下三条线路快，我该如何实现？谢谢！

```
RewriteCond %{HTTP_HOST} ^www\.xyzari\.(net|org)$ [OR]
RewriteCond %{HTTP_HOST} ^www\.xyzarie\.(net|org)$ [OR]
RewriteCond %{HTTP_HOST} ^www\.xyzary\.(net|org)$
RewriteRule ^$ /index.htm [L] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:19:43.943

试试这个 ：

```
RewriteCond %{HTTP_HOST} ^www\.xyzar(ie?|y)\.(net|org)$
RewriteRule ^$ /index.htm [L] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T11:17:10.970

尝试：

```
RewriteCond %{HTTP_HOST} ^www\.XYZAR[iy]e?\.com$ 
```

或者

```
RewriteCond %{HTTP_HOST} ^www\.XYZAR(i|ie|y)\.com$ 
```

第一个较短，但也可以匹配`XYZARye`

# python - 获取 AWS AMI 属性

> ID：12071859
> 
> 赞同：3
> 
> 时间：2012-08-22T11:14:46.537
> 
> 标签：python, amazon-ec2, boto, ec2-ami

我有一个 AMI 列表，我通过创建 boto 连接获得：

```
conn_eu = boto.ec2.connect_to_region('eu-west-1')
images = conn_eu.get_all_images(owners=['me']) 
```

我希望能够看到这些 AMI 的属性。属性，例如它们的描述、名称和图像 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:46:19.650

查看[image.py](https://code.google.com/p/boto/source/browse/trunk/boto/ec2/image.py?r=978)后，我意识到我可以这样做： image.id 获取图像 id 和 image.description 获取图像描述

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-28T21:38:29.940

以下是每个[打印 Python 类的所有属性的](https://stackoverflow.com/questions/5969806/print-all-properties-of-a-python-class)**boto.ec2.image.Image**对象的所有属性：

```
from boto.ec2 import connect_to_region
ec2_connection = connect_to_region("us-west-2",
          aws_access_key_id="...",
          aws_secret_access_key="...")
images = ec2_connection.get_all_images(image_ids=["ami-xxxxxxxxx"])
for k in vars(images[0]).keys():
       print "{0}".format(k) 
```

（或者，也可以使用打印值）：

```
for k,v in vars(images[0]).iteritems():
       print "{0}:{1}".format(k,v) 
```

`root_device_type ramdisk_id id owner_alias billing_products tags platform state location type virtualization_type sriov_net_support architecture description block_device_mapping kernel_id owner_id is_public instance_lifecycle creationDate name hypervisor region item connection root_device_name ownerId product_codes`

# iphone - iOS：导航栏项目消失和重新出现

> ID：12071867
> 
> 赞同：0
> 
> 时间：2012-08-22T11:15:28.813
> 
> 标签：iphone, objective-c, ios, ipad, uinavigationitem

尝试在导航栏上添加和删除导航栏项目，一些栏项目消失了。

当我在 viewDidLoad 运行下面的代码时，它们工作正常。

```
-(void) resetNavigationBarRearrangeMode {

    NSArray*rightBarItems = [[NSArray alloc] initWithObjects:actionCancel, actionSave, actionAddItem, actionRearrange, nil];

    self.navBar.topItem.rightBarButtonItems = rightBarItems;

} 
```

当我尝试删除一些条形按钮项目时，它看起来很好。

```
- (IBAction)cancelClicked:(id)sender {

    NSArray*rightBarItems = [[NSArray alloc] initWithObjects:actionRearrange, nil];

    self.navBar.topItem.rightBarButtonItems = rightBarItems;

    Log(@"running cancel");
} 
```

但是当我点击重新排列运行下面的代码时，这不起作用。

```
- (IBAction)rearrangeClicked:(id)sender {

        [self resetNavigationBarRearrangeMode];

} 
```

有谁知道怎么了？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:51:55.997

`barButtonItems`每次调用该方法时都会重叠。您需要通过在调用重新排列方法之前`barButtonItems`设置它来重置它。`nil`

```
 - (IBAction)rearrangeClicked:(id)sender {

    self.navigationItem.rightBarButtonItem = nil;
    [self resetNavigationBarRearrangeMode];

    } 
```

它会起作用的。请参阅此[链接](https://stackoverflow.com/questions/5588767/how-do-i-hide-show-the-right-button-in-the-navigation-bar)以获取更多帮助。

# iphone - 如何在 UIViewController 中引用子视图的子视图

> ID：12071873
> 
> 赞同：0
> 
> 时间：2012-08-22T11:15:55.457
> 
> 标签：iphone, uiview, storyboard, iboutlet

通过情节提要，我将一个 UIView（比如 Y）添加到另一个 UIView（比如 X）。

在 Y 中，我有几个控件 A、B - 标签、按钮等。

我有一个视图控制器类，它控制 X 的所有内容。目前它没有对 Y、A 或 B 的引用。

我的问题是：

如果我想以编程方式玩 Y、A 和 B——而不丢弃我的故事板工作——我应该在我的视图控制器中做什么？

我可以直接将 Y、A 和 B 的所有插座放入视图控制器并做我的事情吗？或者我应该放弃我在情节提要上所做的一切，并以编程方式从 X 开始添加内容，然后直到 A、B？

这个问题不仅是从可行性的目的出发，也是从设计原则的角度出发的。是否有任何要求我应该遵守 - 从视图控制器中引用 A、B，例如 xya（和 xyb）（小写字母代表我上面的对象的出口变量）而不是仅仅 ya（和 yb）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:37:12.700

只需将引用添加为 IBOutlets 即可访问代码中的控件。`self.y`使用、`self.a`和访问视图控制器中的控件`self.b`。然后，您可以更改情节提要中的视图层次结构，而不会对代码产生副作用。

# c# - 获取机器的mac地址c#

> ID：12071876
> 
> 赞同：0
> 
> 时间：2012-08-22T11:15:57.813
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我正在开发一个 ASP.NET MVC 应用程序，我想获取用户的 MAC 地址。经过一番研究，我发现了这段代码：

```
string GetMacAddress()
{
    string macAddresses = "";
    foreach (NetworkInterface nic in NetworkInterface.GetAllNetworkInterfaces())
    {
        if (nic.NetworkInterfaceType != NetworkInterfaceType.Ethernet)
            continue;
        if (nic.OperationalStatus == OperationalStatus.Up)
        {
            macAddresses += nic.GetPhysicalAddress().ToString();
            break;
        }
    }

    return macAddresses;
} 
```

没有错误，但我总是得到一个空地址。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T11:19:11.610

> 我正在开发一个 mvc .net 应用程序，我想获取用户的 mac 地址。

你可以忘记它，这是不可能的。您只能获取正在浏览您的网站的客户端的 IP 地址。

实际上有一种方法可以得到它。在您的视图中添加以下内容：

```
@using (Html.BeginForm())
{
    @Html.Label("Mac", "Please enter your MAC address")
    @Html.TextBox("Mac")
    <button type="submit">OK</button>
} 
```

并在相应的控制器动作中：

```
[HttpPost]
public ActionResult SomeAction(string mac)
{
    // if the user was kind enough to provide you his MAC address
    // you could read it from the mac argument
    // Of course he could have entered any MAC address he likes and
    // you have no way of verifying that
    ...
} 
```

另一种可能性是开发一个 ActiveX 控件（只能在 IE 下工作），用户可以安装在他的浏览器中，它可以检索他的 NIC 的 MAC 地址并将其发送到服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:27:20.710

您发布的代码将获得托管该站点的机器的 MAC 地址，而不是用户的 MAC 地址。除非您在他们的机器上运行了一些软件并将其报告给您，否则几乎不可能获得远程 MAC 地址。

如果做不到这一点，您可以考虑获取他们的公共 IP 地址并将其解析为 MAC。我过去曾这样做过（如何......我不记得了，那是在很久以前的“黑客”时代！）。正如我所说，这将获得公共 IP 地址（路由器、防火墙等）的 MAC 解析。

Internet 上某处有一个 IANA 分配的 MAC 地址列表，其中列出了已分配的 MAC 以及分配给哪家公司，这也可能对您有用。

从道德上讲，我认为获取用户的 MAC 地址并不是一个好主意，因为它是指向他们机器的唯一东西，而且只指向他们的机器！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T11:19:59.153

我认为这可能是您的问题；

```
 if (nic.NetworkInterfaceType != NetworkInterfaceType.Ethernet) continue; 
```

因为大多数当前连接将是

```
 NetworkInterfaceType.GigabitEthernet 
```

只需将其包含在选择中

请参阅[http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkinterfacetype.aspx](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkinterfacetype.aspx)

# java - 将 XYErrorRenderer 添加到 ScatterChart

> ID：12071877
> 
> 赞同：0
> 
> 时间：2012-08-22T11:15:58.420
> 
> 标签：java, jfreechart

我正在尝试使用在散点图中的数据点上添加误差线[`XYErrorRenderer`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/renderer/xy/XYErrorRenderer.html)。使用的数据集是`XYDataset`. 我使用的代码是：

```
XYErrorRenderer rendererPoints = new XYErrorRenderer();
rendererPoints.setShapesVisible(true);
rendererPoints.setDrawXError(false);
rendererPoints.setDrawYError(true);
rendererPoints.setCapLength(new Double(0.2));

rendererPoints.setShapesFilled(true);
rendererPoints.setLinesVisible(false); 
```

我想垂直添加误差线，但它不适合我。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:15:09.203

[`XYErrorRenderer`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/renderer/xy/XYErrorRenderer.html)“期望一个[`IntervalXYDataset`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/data/xy/IntervalXYDataset.html)，否则它会恢复到超类的行为。” 这可能解释了为什么`XYDataset`不起作用。[`XYIntervalSeries`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/data/xy/XYIntervalSeries.html)看起来`add()`每个点的两个间隔都有空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:57:01.030

嘿，我已经使用 StatasticalCatagoryDataset、StatisticalLine 和ShapeRenderer 的组合解决了查询......因为它向我证明了要包含在数据点中的偏差......

# ruby-on-rails - 耙中止！开发数据库未配置

> ID：12071879
> 
> 赞同：0
> 
> 时间：2012-08-22T11:16:03.387
> 
> 标签：ruby-on-rails, ruby

我正在帮助一个朋友修改他提供的 Rails 网站，我对 Rails 和 Ruby 的了解只有表面的知识，但足以完成他需要我做的事情。麻烦的是我在设置我的开发环境时遇到了这个错误，我无法弄清楚。

跑步：

```
$ rake db:migrate --trace

** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
rake aborted!
development database is not configured
/var/lib/gems/1.8/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_specification.rb:62:in `establish_connection'
/var/lib/gems/1.8/gems/activerecord-2.3.14/lib/active_record/connection_adapters/abstract/connection_specification.rb:55:in `establish_connection'
/home/rory/projects/project_server/ruby_lib/project/lib/project/model.rb:21:in `init'
/home/rory/projects/project_server/ruby_lib/project/lib/project/model.rb:15:in `each'
/home/rory/projects/project_server/ruby_lib/project/lib/project/model.rb:15:in `init'
/home/rory/projects/project_server/ruby_lib/project/lib/project/project.rb:218:in `init' /home/rory/projects/project_server/rails/project_web/config/environments/development.rb:28:in `load_environment'
/var/lib/gems/1.8/gems/rails-2.3.14/lib/initializer.rb:386:in `load_environment'
/var/lib/gems/1.8/gems/activesupport-2.3.14/lib/active_support/core_ext/kernel/reporting.rb:11:in `silence_warnings'
/var/lib/gems/1.8/gems/rails-2.3.14/lib/initializer.rb:379:in `load_environment'
/var/lib/gems/1.8/gems/rails-2.3.14/lib/initializer.rb:137:in `process'
/var/lib/gems/1.8/gems/rails-2.3.14/lib/initializer.rb:113:in `send'
/var/lib/gems/1.8/gems/rails-2.3.14/lib/initializer.rb:113:in `run'
/home/rory/projects/project_server/rails/project_web/config/environment.rb:9
/usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in `gem_original_require'
/usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:53:in `require'
/var/lib/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `require'
/var/lib/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:547:in `new_constants_in'
/var/lib/gems/1.8/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `require'
/var/lib/gems/1.8/gems/rails-2.3.14/lib/tasks/misc.rake:4
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:636:in `call'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:636:in `execute'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:631:in `each'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:631:in `execute'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:597:in `invoke_with_call_chain'
/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:590:in `invoke_with_call_chain'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:607:in `invoke_prerequisites'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:604:in `each'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:604:in `invoke_prerequisites'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:596:in `invoke_with_call_chain'
/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:590:in `invoke_with_call_chain'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:583:in `invoke'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2051:in `invoke_task'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2029:in `top_level'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2029:in `each'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2029:in `top_level'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2023:in `top_level'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2001:in `run'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:1998:in `run'
/var/lib/gems/1.8/gems/rake-0.8.7/bin/rake:31
/usr/local/bin/rake:19:in `load'
/usr/local/bin/rake:19 
```

跑步

```
$ rake db:create 
```

按预期工作，在 mysql 中创建数据库。

我已经检查了 database.yml 是否正确缩进了空格而不是制表符。已安装所有必需的库。

该站点运行（因此我在我的开发环境中运行）：

红宝石 1.8.7 轨道 2.3.14

数据库.yml：

```
development:
  adapter: mysql
  database: development
  username: developer
  password: devpass
  socket: /var/run/mysqld/mysqld.sock 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:43:45.723

+1 on what Edd Morgan said in a comment.

Also, please paste your database.yml. For me it looks like the problem is trivial. The rake task is expecting that you have development db defined and it looks like you don't have it defined. So it raises "development database is not configured".

Most prolly you're missing a definition like:

```
development:
  adapter: mysql
  encoding: utf8
  host: 'you_host'
  username: 'username'
  password: 'password' 
```

# objective-c - 如何保持未触及单元格的选择完整？

> ID：12071880
> 
> 赞同：4
> 
> 时间：2012-08-22T11:16:06.130
> 
> 标签：objective-c, uitableview

我有一个 tableView，我在其中选择单元格并将数据添加到数组中，我还可以选择滑动然后删除最终从数组中删除数据的特定单元格。

问题是，一旦我删除了一行，我在重新加载表格后就失去了所有的选择状态，

为此，我再次检查了选择数组并重新选择了所有这些单元格，

但是我被困在一个地方，在我真正删除一个单元格并重新加载 tableView 之前，只要我在一个单元格上滑动，所有其他单元格的选择状态也会消失。

注意：我有两个数组，一个包含要在 tableView 中显示的项目列表，一个包含所选项目。

这是一些代码：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 50;  
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [self.contactList count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *MyIdentifier = @"MyIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    if (cell == nil) 
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyIdentifier] autorelease];
    }

    cell.selectionStyle = UITableViewCellSelectionStyleGray;
    [cell.textLabel setTextColor:[UIColor colorWithRed:103.0/255.0 green:103.0/255.0 blue:103.0/255.0 alpha:1.0]];
    [cell.textLabel setFont:[UIFont fontWithName:@"ITCAvantGardeStd-Bk" size:14.0]];

    if (![[[self.contactList objectAtIndex:indexPath.row] objectForKey:@"nickName"] isEqualToString:@""])
        cell.textLabel.text = [NSString stringWithFormat:@"%@",[[self.contactList objectAtIndex:indexPath.row] objectForKey:@"nickName"]];

    else
        cell.textLabel.text = [NSString stringWithFormat:@"%@ %@",[[self.contactList objectAtIndex:indexPath.row] objectForKey:@"firstName"],[[self.contactList objectAtIndex:indexPath.row] objectForKey:@"lastName"]];

    return cell;

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{

    NSLog(@"Selected cell index==>%d\n",indexPath.row);
    //NSString *emailID = [NSString stringWithFormat:@"%@",[[self.contactList objectAtIndex:indexPath.row] objectForKey:@"email_key"]];
    NSLog(@"emailID==>%@\n",[self.contactList objectAtIndex:indexPath.row]);    
    [self.emailShareList addObject:[self.contactList objectAtIndex:indexPath.row]];
    //[self.emailShareList insertObject:emailID atIndex:indexPath.row];
    NSLog(@"Array value==>%@\n",self.emailShareList);
    //[tableView deselectRowAtIndexPath:indexPath animated:YES];
}

- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"deSelected cell index==>%d\n",indexPath.row);
    NSString *emailID = [NSString stringWithFormat:@"%@",[[self.contactList objectAtIndex:indexPath.row] objectForKey:@"email_key"]];
    NSLog(@"emailID==>%@\n",emailID);   

    [self.emailShareList removeObject:[self.contactList objectAtIndex:indexPath.row]];
    NSLog(@"deSelect row Array value==>%@\n",self.emailShareList);
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
        if(indexPath.row != 0)
        {
            NSString *contactID = [[self.contactList objectAtIndex:indexPath.row] objectForKey:@"contactId"];
            NSLog(@"content on delete row==>%@\n",contactID);
            [self.contactList removeObjectAtIndex:indexPath.row];
            [self deleteContactToServer:contactID];
        }
    }

    [contactTableView reloadData];
    for (int i = 0; i < [self.emailShareList count]; i++) 
    {
        for (int j = 0; j < [self.contactList count]; j++) 
        {
            if([[[self.contactList objectAtIndex:j] valueForKey:@"email"]   isEqualToString:         [[self.emailShareList objectAtIndex:i] valueForKey:@"email"]])
            {
                NSIndexPath *path1 = [NSIndexPath indexPathForRow:j inSection:0];
                [contactTableView selectRowAtIndexPath:path1 animated:NO scrollPosition:UITableViewScrollPositionNone];
            }
        }    
    }
}

- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCellEditingStyle style = UITableViewCellEditingStyleNone;

    if(indexPath.row != 0)
        style = UITableViewCellEditingStyleDelete;

    return style;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T12:04:50.160

当您删除一个项目时，您不必重新加载整个表格视图。您可以使用 – deleteRowsAtIndexPaths:withRowAnimation: 方法来删​​除有问题的单元格（以及相应的模型更新）。这可能会保留您的选择。

要在进入编辑模式时保留您的选择（滑动删除也是编辑模式的一种特殊情况），您需要做两件事：

首先，在您的 tableView 上启用allowSelectionDuringEditing：

```
self.tableView.allowsSelectionDuringEditing = YES; 
```

其次，创建一个 UITableView 子类并覆盖 setEditing:animated: 像这样：

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated {
    NSArray *indexPaths = self.indexPathsForSelectedRows;
    [super setEditing:editing animated:animated];
    for (NSIndexPath *ip in indexPaths) {
        [self selectRowAtIndexPath:ip animated:NO scrollPosition:UITableViewScrollPositionNone];
    }
} 
```

就个人而言，当从模型的角度来看，我宁愿使用某种自定义选择机制。我会创建一个自定义单元格子类，向它添加一个选择属性，让它相应地更改单元格样式。影响常规表格视图选择的内置功能不会导致这种方法出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-01T00:27:19.893

这是在编辑模式下保留表格选择的另一种方法，而无需继承 UITableView。将以下内容添加到您的 UITableViewControllerView。

在 viewDidLoad 添加：

```
self.tableView.allowsSelectionDuringEditing = YES; 
```

然后覆盖 setEditing:animated:

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animate
{
    NSArray *selectedIndexPaths = [self.tableView indexPathsForSelectedRows];

    [super setEditing:editing animated:animate];

    for (NSIndexPath *selectedIndexPath in selectedIndexPaths) {
        [self.tableView selectRowAtIndexPath:selectedIndexPath animated:NO scrollPosition:UITableViewScrollPositionNone];
    }
} 
```

# gcc - 为 JNI 创建 .so 时的 gcc 选项

> ID：12071893
> 
> 赞同：0
> 
> 时间：2012-08-22T11:16:43.700
> 
> 标签：gcc, linker, java-native-interface

[我对http://java.sun.com/developer/onlineTraining/Programming/JDCBook/jniexamp.html](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/jniexamp.html)上的 JNI 文章有疑问。

```
gcc  -o libnativelib.so -shared -Wl,-soname,libnative.so  
     -I/export/home/jdk1.2/include 
     -I/export/home/jdk1.2/include/linux nativelib.c  
     -static -lc 
```

我想我对'-o libnativelib.so'和'-Wl，-soname，libnative.so'的功能仍然有些困惑。

'-o libnativelib.so' 指定 gcc 的输出文件名为 libnativelib.so。据我了解，它是从 JAVA 端加载的库名称，如文章所示：

```
 static {
    System.loadLibrary("nativelib");
  } 
```

那么'-Wl,-soname,libnative.so'有什么用呢？

我在 ld 选项手册上找到了以下信息：

> -soname=名称
> 
> 创建 ELF 共享对象时，将内部 DT_SONAME 字段设置为指定名称。当可执行文件与具有 DT_SONAME 字段的共享对象链接时，当可执行文件运行时，动态链接器将尝试加载由 DT_SONAME 字段指定的共享对象，而不是使用链接器提供的文件名。

那么这是什么意思呢？当最终的可执行文件运行时，链接器将尝试加载？？而不是 ？？以？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:48:27.127

这对于一个系统很有用，其中一个库可以以多个名称存在，例如：libz.so、libz.so.1、libz.so.1.2.3。所有这些库都是指向一个文件的符号链接，其中的 DT_SONAME 指向“libz.so.1”。当您将代码链接到 libz.so 时，它将在可执行文件中记录对“libz.so.1”的依赖关系。当您的文件在另一个系统上执行时，例如包含 libz.so.1.2.5，它仍然可以工作，因为它会查找 libz.so.1。但是如果目标系统有更新的版本，比如 libz.2.3.4，它就会失败，因为 libz.so.2 而不是 libz.so.1。

DT_SONAME 字段仅供链接器使用。使用 System.loadLibrary() 时，文件名由您指定，不使用该选项的值。如果你愿意，你可以为你的 libnative 实现一个类似的版本控制方案，以确保你的 java 代码总是加载一个兼容的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:10:15.290

来自 GCC-HOWTO：

每个库都有一个 soname。当链接器在它正在搜索的库中找到其中之一时，它会将 soname 嵌入到二进制文件中，而不是它正在查看的实际文件名。在运行时，动态加载器将搜索一个名为 soname 的文件，而不是库文件名。因此，一个名为 libfoo.so 的库可以有一个 soname libbar.so，并且所有链接到它的程序都会在启动时查找 libbar.so。

在您的情况下， soname`libnative.so`与 file name 不同`libnativelib.so`。您必须进行符号链接`libnative.so`以`libnativelib.so`允许动态加载程序找到共享库。

# c# - 显示带有来自模型属性的动态 html 内容的视图页面

> ID：12071901
> 
> 赞同：0
> 
> 时间：2012-08-22T11:17:16.713
> 
> 标签：c#, jquery, asp.net, asp.net-mvc

在我的 .Net MVC 3 应用程序中，我需要实现此功能：当用户单击按钮时，它应该将他导航到某个页面，但带有我在模型属性中拥有的 html 内容。是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:20:04.863

是的，有可能。在这个新视图上使用

```
@Model YourModel
@{
     Layout = null;
}
@Html.Raw(Model.Propery) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T11:20:54.577

当然，在视图内部：

```
@model MyViewModel
@{
    Layout = null;
}
@Html.Raw(Model.SomePropertyThatContainsHtml) 
```

但这完全荒谬，您宁愿让您的控制器操作直接返回`ContentResult`：

```
public ActionResult SomeAction()
{
    MyViewModel model = ...
    return Content(model.SomePropertyThatContainsHtml, "text/html");
} 
```

# ajax - 如何在 Django 中通过 AJAX 完成的 POST 出错时查看调试内部服务器错误

> ID：12071905
> 
> 赞同：1
> 
> 时间：2012-08-22T11:17:26.563
> 
> 标签：ajax, django, debugging, post

我已经定义了许多执行“手动”ajax 处理的视图，例如：

```
@require_POST
def do_something(request, ...)
    ....
    <some code that bugs>
    ... 
```

如何从中获取正常的 django stacktrace 页面？

由于我当前设置的限制（Django 使用 PyCharm 远程调试器在远程主机上运行，​​并且项目位于 NFS 共享上）停止服务器并在调试器下重新启动服务器不是最佳解决方案，尤其是因为大多数问题会使用堆栈跟踪和局部变量很容易从 django 错误页面中发现。

也欢迎任何其他调试想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:26:38.333

您可以使用 Firefox 或 Google Chrome 在单独的“窗口”中查看任何 ajax 响应。在 Chrome 中，它是开发人员控制台中的网络选项卡。

# java - 如何在 bean 中使用瞬态 getter 进行命名查询？

> ID：12071908
> 
> 赞同：1
> 
> 时间：2012-08-22T11:17:50.623
> 
> 标签：java, ejb-3.0, named-query

我有一个棘手的情况，我有一个 bean 的属性（比如 getX()）。我想在命名查询中使用 X 但不希望 X 被持久化。

如果我将@transient 放在 getX() 上，我的命名查询将失败..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:55:40.967

```
use @NamedNativeQueries instead of named query in your case 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T05:42:17.767

我的问题是元素被填充到 XML 模式中。所以我添加了一个注释来排除 xml 模式的属性（它被忽略）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T04:43:50.160

您可以使用 来注释属性`@Column(insertable=false, updatable=false)`，而不是使用`transient`。对于 JPA 而言，瞬态意味着该值根本不在数据库中表示。就您而言，您似乎只是不想再碰它了。

# android - 在android中更改主题对话框

> ID：12071910
> 
> 赞同：0
> 
> 时间：2012-08-22T11:17:59.213
> 
> 标签：android, android-layout

这可以在代码中更改主题我的对话框吗？这是我的对话框：

```
 Dialog dialog = new Dialog(ActionBarMain.this);
            dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);

            dialog.setContentView(R.layout.log_in_dialog_view);
            dialog.show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:40:04.187

Dialog 有一个带有 Theme 的辅助构造函数：

[http://developer.android.com/reference/android/app/Dialog.html#Dialog(android.content.Context, int)](http://developer.android.com/reference/android/app/Dialog.html#Dialog%28android.content.Context,%20int%29)

尝试：

```
 Dialog dialog = new Dialog(ActionBarMain.this, android.R.style.Theme_Black); 
```

# unit-testing - Qt：QVERIFY 的链接器错误（Qt 单元测试）

> ID：12071913
> 
> 赞同：1
> 
> 时间：2012-08-22T11:18:01.920
> 
> 标签：unit-testing, qt4, qt-creator

基本上我在[这里](http://doc.qt.nokia.com/4.7-snapshot/qtestlib-tutorial1.html)遵循基本示例。我的`.pro`文件包含`QT += core network qtestlib`. [已解决] **testlib**代替错字 qtestlib

当我包含`QVERIFY`时，它得到以下链接器错误：

```
testwaypointlist.obj:-1: error: LNK2019: unresolved external symbol "bool __cdecl
QTest::qVerify(bool,char const *,char const *,char const *,int)"
(?qVerify@QTest@@YA_N_NPBD11H@Z) referenced in function "private: void __thiscall
TestWaypointList::fillWaypoints(void)" (?fillWaypoints@TestWaypointList@@AAEXXZ) 
```

**我错过了链接哪些文件？**没有`QVERIFY`链接器错误就会消失。

头文件：

```
#include <QObject>
#include <QtTest/QtTest>
#include "waypointlist.h"

//
// Testing the waypoint list
//
class TestWaypointList : public QObject
{
    Q_OBJECT

private:
    WaypointList _waypointList;
public:
    explicit TestWaypointList(QObject *parent = 0);
private slots:
    void fillWaypoints();
}; 
```

cp:

```
//
// Fill the waypoint list
//
void TestWaypointList::fillWaypoints()
{
    _waypointList = WaypointList();
    .....

    for (int i=0; i < TESTWPLISTCOUNT; i++) {
        .....
        TestWaypointList::_waypointList.updateOrAppend(id, timeframe);
    }
    QVERIFY(TestWaypointList::_waypointList.count() == 1); // causing the linker error
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T16:05:49.803

在您的 .pro 文件中，您需要更改`QT += qtestlib`为`QT += testlib`（注意没有“q”）。

值得注意的是，您曾经可以这样做：`CONFIG += qtestlib`，但根据[此页面](http://qt-project.org/doc/qt-4.8/qttest.html)上的评论，这不再是链接到测试库的推荐方式。

# android - 如何获取模拟器的 IP 地址以与本地服务器通信

> ID：12071919
> 
> 赞同：0
> 
> 时间：2012-08-22T11:18:25.407
> 
> 标签：android

> **可能重复：**
> [如何获取 Android 模拟器的 IP 地址？](https://stackoverflow.com/questions/1720346/how-to-get-the-android-emulators-ip-address)

谁能给我一些关于获取模拟器的 IP 地址以连接到本地服务器以检索当前正在使用该模拟器运行的特定应用程序的内容的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:20:56.940

要连接到本地服务器，您可以简单地通过`10.0.2.2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:20:48.893

它通常是运行模拟器的 PC 的 IP。网络连接是共享的。您需要确保 PC 上的防火墙不会过滤掉此连接。

# jquery - jquery检查元素是否存在

> ID：12071923
> 
> 赞同：0
> 
> 时间：2012-08-22T11:18:51.467
> 
> 标签：jquery, image

有没有办法使用 jQuery 检查图像是否存在？

我认为以下内容会起作用，但它不起作用，并且如果图像不存在，console.log 会显示图像的错误 404。

```
$("#icon").html("<img src='/assets/img/"+condition+".png'>");
if (!$("#icon")){
    $("#icon").html("nothing to show");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:21:07.930

试试这个 ：

```
$("#icon").html("<img src='/assets/img/"+condition+".png'>");
$("#icon img").error(function() {
       $("#icon").html("nothing to show");
    }); 
```

​</p>

# android - 如何删除 ORMLite 数据库？

> ID：12071924
> 
> 赞同：6
> 
> 时间：2012-08-22T11:18:51.467
> 
> 标签：android, ormlite

我想知道如何使用 ORMLite 删除数据库。是否已经有任何 API 调用？

只是删除所有表并不会删除整个数据库。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T19:46:39.400

**编辑：**

看来你想通了。你做这样的事情：

```
boolean success =
    context.deleteDatabase(
        "/data/data/source.package.goes.here/databases/database-name.db‌​"); 
```

* * *

**编辑：**

使用 ORMLite 删除数据库很奇怪，但我认为可以做到。实际上，当您执行一个[`dao.executeRaw(...)`](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/dao/Dao.html#executeRaw%28java.lang.String,%20java.lang.String...%29)方法时，您会打开一个到数据库引擎的连接，该连接几乎可以执行任何操作。您应该能够：

```
fooDao.executeRaw("drop database foo;"); 
```

这至少在 MySQL 下对我有用，它应该在 Sqlite 下。

* * *

Yes, [ORMLite](http://ormlite.com/) has the [`TableUtils` class which allows you to create and drop tables](http://ormlite.com/docs/table-utils). Here are the [javadocs for the method](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/table/TableUtils.html#dropTable%28com.j256.ormlite.support.ConnectionSource,%20java.lang.Class,%20boolean%29).

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-02T13:16:27.357

你可以做这样的事情，

```
 TableUtils.dropTable(connectionSource, Model_Class.class, false); 
```

对于数据库中的每个表，如果每个表都有模型类，则提供。

参考：

[http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/table/TableUtils.html#dropTable%28com.j256.ormlite.support.ConnectionSource,%20java.lang.Class,%20boolean%29](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/table/TableUtils.html#dropTable%28com.j256.ormlite.support.ConnectionSource,%20java.lang.Class,%20boolean%29)

# c++ - 通过指向函数的指针循环传递数组的一部分

> ID：12071925
> 
> 赞同：-1
> 
> 时间：2012-08-22T11:18:54.707
> 
> 标签：c++, arrays, pointers

我有一个数组 c[7][8]（或 c[56]）。我必须将数组的 8 个元素传递给一个函数（在不同的类中）7 次。从这个函数，我再次必须将它传递给另一个函数。我试过的是

```
int main(){
...
double a[]={2.1,2.2,2.3,....};//7 elements
double b[]={1.1,1.2,1.3,....};//8 elements
double c[]={0.5,0.0,0.4,....};//56 elements. I actually want to use c[7][8]; but I thought c[56] would be easier
for (int i=0; i<7; i++){
  classa.calc(a[i],b[i],&c[i*8]); //assuming I use the 1D array for c. I don't want to pass the array a and b, but ith element.
  //for c, I want to pass 8 consecutive elements of c each time i call the function like c[0-6],c[7-13] etc
}
} 
```

a 和 b 是两个不同的数组，我必须在函数中使用 element(i) 。

现在，在课堂上：

```
class classa{
void function(double* c, double* r) {
  ...
for (int i=0; i<8; i++) c[i]=h*c[i]*pow(x,i));//here an algorithm is used to get the new value of c as an existing function of c. the given function is just a part of the algorithm.
for (int j=0; j<N1; j++)  r[j]=some function of c;

}
public:
//here I want c to be used as a 1D array of 8 elements. same in function too
...
void calc(double a, double b, double* c){ 
  function(&c[0]);
...
}
}; 
```

当我运行程序时，我只得到前 8 个元素的结果，并且给出了分段错误。我如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:34:38.333

其实`array[n][m]`不是`array[n * m]`。您可以`a[n * m]`用作替代品`b[n][m]`，但具有正确的索引功能：

```
b[i][j] == a[i * ROW_SIZE + j]; 
```

其实`&c[0] == c`，`&c[i * 8] == c + i * 8`

在您的代码中，我看到两个常量`7`和`N1`. 你能检查一下`N1`是否与`7`. 我假设你可以在这里越界：

```
for (int j=0; j<N1; j++)  r[j]=some function of c; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:29:29.243

## 根据更新回答

看起来你有更多的逻辑错误。您的循环应该**在函数中从 i=0 运行到 8**（8 次而不是 7 次）。而且我还假设*您正在创建一个**实例**，`classa`*否则创建一个。

```
 class classa{
    void function(double* c) {
      ...
    for (int i=0; i<8; i++)
        c[i]=h*c[i]*pow(x,i);    
    }
    public:
    //here I want c to be used as a 1D array of 8 elements. same in function too
    ...
    void calc(double a, double b, double* c){ 
      function(c);
    ...
    }
    }; 
```

## 旧答案

由于您试图通过 &c[i][0] 七次。这应该足够了（`assumming c is double**`）。

```
for (int i=0; i<7; i++)
{
   classa.calc(a[i],b[i],c[i]); //This is equal to &c[i][0] or *(c+i)
} 
```

并进一步更改`function(&c[0]);`为`function(c[0]);`因为`c[0] is already double*`。[在这里学习](http://pw1.netcom.com/~tjensen/ptr/ch7x.htm)。

```
void calc(double a, double b, double* c)
{
    function(c[0]);
    //Update with Question 
    //You are using wrong overload, it should be something like this:-> 
    function(c[0],&a);//or &b whichever applicable.
 ... 
} 
```

# java - HTTP POST 到 MySQL 数据库 AyncTask 错误。强制关闭

> ID：12071926
> 
> 赞同：0
> 
> 时间：2012-08-22T11:18:55.510
> 
> 标签：java, android, mysql, json

我正在尝试连接到我服务器上的数据库。我刚刚开始使用 AsyncTask，因为它被推荐给我。在此之前，我在主 UI 线程上有 HTTP 请求，这当然意味着它不起作用。它现在工作得更好了，但我仍然遇到问题。如果我的服务器关闭，我会强制关闭。如果您查看下面的代码，我会附上一个祝酒词，告诉我是否无法建立连接。但是，这没有显示。

我需要更改什么以使其停止强制关闭并仅显示敬酒吗？

当我打开服务器并且数据库启动时，我查看了 logcat，我的 android 应用程序确实检索了数据，但它在 logcat 中并且没有显示在页面上。其中一些代码来自教程和搜索谷歌，所以我知道“// PARSING DATA”位现在只计算数据的长度，没有别的。我想那是我需要添加代码才能显示的地方。只是表明这对我来说是多么新鲜。

真的对这一切感到沮丧，这绝对无济于事:(。

这是我的代码：

```
package com.android.history;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.ParseException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.widget.Toast;

public class CurrentSeasonDrivers extends Activity {

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.currentseason_drivers);

    new HttpTask().execute();

}

private static class HttpTask extends AsyncTask<Void, Void, Void> {
    @Override
    protected void onPreExecute() {

    }

    @Override
    protected Void doInBackground(Void... params) {
        doStuff();

        return null;
    }

    public static void doStuff() {
        JSONArray jArray;
        String result = null;
        InputStream is = null;
        StringBuilder sb = null;
        HttpResponse response;
        HttpEntity entity;

        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        // HTTP POST REQUEST
        try {
            HttpClient httpclient = new DefaultHttpClient();

            HttpPost httppost = new HttpPost("http://192.168.0.13/testdatabase.php");

            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            response = httpclient.execute(httppost);

            entity = response.getEntity();

            is = entity.getContent();

        } catch (Exception e) {
            Log.e("log_tag", "Error in http connection" + e.toString());
            Toast.makeText(null, "Could not connect to server", Toast.LENGTH_LONG).show();
        }

        // CONVERT RESPONSE TO STRING
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
            sb = new StringBuilder();
            sb.append(reader.readLine() + "\n");

            String line;
            while ((line = reader.readLine()) != null) {
                sb.append(line);
            }
            is.close();
            result = sb.toString();

            Log.i("json string", result);
        } catch (Exception e) {
            Log.e("log_tag", "Error converting result " + e.toString());
        }

        // PARSING DATA
        String drivername;
        String drivesfor;
        try {
            jArray = new JSONArray(result);
            JSONObject json_data = null;

            System.out.println("Length " + jArray.length());
            Log.d("DB", "Length " + jArray.length());

            for (int i = 0; i < jArray.length(); i++) {

                System.out.println("counter " + i);
                json_data = jArray.getJSONObject(i);
                drivername = json_data.getString("Driver_full_name");
                drivesfor = json_data.getString("Drives_for");

                System.out.println("Drives_for" + drivesfor);
            }
        } catch (JSONException e1) {
            Log.d("DB", "Error somewhere");
        } catch (ParseException e1) {
            e1.printStackTrace();
        }
    }
}
} 
```

以下是我的 log_cat 中的错误：

```
08-22 12:26:39.405: E/log_tag(14327): Error in http connectionorg.apache.http.conn.HttpHostConnectException: Connection to http://192.168.0.13 refused
08-22 12:26:39.405: W/dalvikvm(14327): threadid=13: thread exiting with uncaught exception (group=0x40a051f8)
08-22 12:26:39.455: E/AndroidRuntime(14327): FATAL EXCEPTION: AsyncTask #2
08-22 12:26:39.455: E/AndroidRuntime(14327): java.lang.RuntimeException: An error occured while executing doInBackground()
08-22 12:26:39.455: E/AndroidRuntime(14327):    at android.os.AsyncTask$3.done(AsyncTask.java:278)
08-22 12:26:39.455: E/AndroidRuntime(14327):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
08-22 12:26:39.455: E/AndroidRuntime(14327):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
08-22 12:26:39.455: E/AndroidRuntime(14327):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
08-22 12:26:39.455: E/AndroidRuntime(14327):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-22 12:26:39.455: E/AndroidRuntime(14327):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
08-22 12:26:39.455: E/AndroidRuntime(14327):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
08-22 12:26:39.455: E/AndroidRuntime(14327):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
08-22 12:26:39.455: E/AndroidRuntime(14327):    at java.lang.Thread.run(Thread.java:856)
08-22 12:26:39.455: E/AndroidRuntime(14327): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
08-22 12:26:39.455: E/AndroidRuntime(14327):    at android.os.Handler.<init>(Handler.java:121)
08-22 12:26:39.455: E/AndroidRuntime(14327):    at android.widget.Toast$TN.<init>(Toast.java:317)
08-22 12:26:39.455: E/AndroidRuntime(14327):    at android.widget.Toast.<init>(Toast.java:91)
08-22 12:26:39.455: E/AndroidRuntime(14327):    at android.widget.Toast.makeText(Toast.java:233)
08-22 12:26:39.455: E/AndroidRuntime(14327):    at com.android.history.CurrentSeasonDrivers$HttpTask.doStuff(CurrentSeasonDrivers.java:74)
08-22 12:26:39.455: E/AndroidRuntime(14327):    at com.android.history.CurrentSeasonDrivers$HttpTask.doInBackground(CurrentSeasonDrivers.java:44)
08-22 12:26:39.455: E/AndroidRuntime(14327):    at com.android.history.CurrentSeasonDrivers$HttpTask.doInBackground(CurrentSeasonDrivers.java:1)
08-22 12:26:39.455: E/AndroidRuntime(14327):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
08-22 12:26:39.455: E/AndroidRuntime(14327):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
08-22 12:26:39.455: E/AndroidRuntime(14327):    ... 5 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:25:34.903

doInBackground 在单独的线程上运行。您不能显示来自 chaild 线程的 Toast。

在 catch 块内改用以下代码。

```
 runOnUiThread(new Runnable() {          
   public void run() {                 
    Toast.makeText(null, "Could not connect to server", Toast.LENGTH_LONG).show();     
 }            
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:32:49.087

Toast 应该通过 UI 线程显示。Android 不允许从后台线程修改 UI。正如 Umesh 建议的那样。

还有一件事可能会导致下一行崩溃

```
jArray = new JSONArray(result); 
```

如果代码在上述两个异常之后出现在这一行，则此处为`result`空。

所以你应该在这一行上方添加一个空检查，比如

```
if(null != result){
     jArray = new JSONArray(result);
}
else{ 
    //Do something else 
      } 
```

# javascript - 从 html 访问 jQuery 数据

> ID：12071928
> 
> 赞同：1
> 
> 时间：2012-08-22T11:19:07.890
> 
> 标签：javascript, jquery

我有

```
<div data-text="This is a text">...</div> 
```

我需要在 javascript 中访问数据文本。它适用于`alert($('div').data('text'));`但不适用于`alert($.data($('div'), 'text'));`给我未定义。

为什么？

链接：http: [//jsfiddle.net/tvDzP/2/](http://jsfiddle.net/tvDzP/2/)

（对于我`element.attr('data-text')`用来检索文本的性能问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:26:47.993

通常`$.data`需要一个 DOM 节点，而不是 jQuery 对象。

```
$('div').data('text') // correct
$.data($('div')[0], 'text') // correct
$.data($('div'), 'text') // incorrect 
```

但是，对于`data-*`属性，`$.data`除非该值已经被`$(element).data()`.

从[文档](http://api.jquery.com/jQuery.data/)：

> **关于 HTML5 data-* 属性：**这个低级方法不会检索`data-*`属性，除非更方便的`.data()`方法已经检索了它们。

[演示](http://jsfiddle.net/sErZF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:27:18.710

`element`必须是 DOM 元素，而不是选择器或 jQuery 对象：

```
$.data($('div')[0], 'text') 
```

[http://jsfiddle.net/CGck6/](http://jsfiddle.net/CGck6/)

# javascript - 删除 Internet Explorer 8 中动态添加的元素

> ID：12071932
> 
> 赞同：0
> 
> 时间：2012-08-22T11:19:25.860
> 
> 标签：javascript, jquery, internet-explorer-8

我使用以下方法向我的页面添加一个元素：

```
var di = document.createElement("div");
di.id='container';
document.body.appendChild(di) 
```

现在，当我尝试使用 Internet Explorer 8 和 jQuery 删除元素时，例如：

```
jQuery(di).remove(); 
```

我的行为不一致..这意味着它可以在除 Internet Explorer 8 之外的所有浏览器上运行（在 ie7 上可能相同，但我不再关心 :-)）

有什么想法吗 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:59:19.580

您确定代码在 IE8 中不起作用吗？看起来您必须刷新开发者工具的内容才能看到添加/删除的 div。

我刚刚用下面的代码做了一个测试，它在 FF 和 IE8 中工作

```
<!DOCTYPE html>
<html class="main" lang="en">
<head>
    <meta charset="utf-8">
    <script type="text/javascript">
        function add() {
            var di = document.createElement("div");
            di.id='container';
            di.appendChild(document.createTextNode('Testing'));
            document.body.appendChild(di)
        }
        function remove() {
            document.body.removeChild(document.getElementById('container'));
        }
    </script>
</head>
<body>
    <button onclick="add();">Add</button>
    <button onclick="remove();">Remove</button>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:25:50.363

也许如果元素是用 jQuery 添加的：

```
var di = jQuery("<div/>").attr('id','container').appendTo('body'); 
```

然后 ：

```
di.remove(); 
```

# c++ - 从 stringstream 获取所有内容

> ID：12071933
> 
> 赞同：0
> 
> 时间：2012-08-22T11:19:30.887
> 
> 标签：c++, visual-c++, stringstream

我已将 som 信息放入 stringstream ss：

```
stringstream ss (stringstream::in | stringstream::out);
ss<<"abc 456 ";
ss<<123 
```

然后我决定将字符串内容检索到字符串 g：

```
std::string s;
std::string g;

for (int n=0; n<c; n++)
{
ss >> s;
g=g+s;
}
cout << g <<endl; 
```

出于这个原因，我需要知道对 ss 做了多少展示位置。怎么知道？检索字符串信息的方法可能不是很聪明 - 然后让你的方式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T11:21:49.073

> 我需要知道对 ss 做了多少展示位置。怎么知道？

您需要自己计算，stringstream 无法计算对其进行了多少次插入。

> 检索字符串信息的方法可能不是很聪明 - 然后让你的方式。

怎么样：

```
ss.str() 
```

获取包含插入其中的所有内容的完整字符串。

# scala - 保留特质个性，同时将它们混合

> ID：12071941
> 
> 赞同：7
> 
> 时间：2012-08-22T11:19:59.003
> 
> 标签：scala, design-patterns, traits

我想创建一个基于 Scala 特征的具有一些特殊属性的实体系统。

主要思想是：所有组件都是继承自共同特征的特征：

```
trait Component
trait ComponentA extends Component 
```

有时，在更复杂的层次结构和相互依赖的组件的情况下，它可能会变成这样：

```
trait ComponentN extends ComponentM {
  self: ComponentX with ComponentY =>

  var a = 1
  var b = "hello"
} 
```

等等。我得出的结论是，由于访问速度的原因，与每个组件相关的数据应该包含在其自身中，而不是包含在某个`Entity`或其他地方的某个存储中。作为旁注 - 这也是为什么一切都是可变的，所以没有必要考虑不变性。

然后`Entities`创建，混合特征：

```
class Entity

class EntityANXY extends ComponentA
  with ComponentN
  with ComponentX
  with ComponentY 
```

这里一切都很好，但是我确实有一个特殊要求，我不知道如何用代码来满足。要求是这样的：

每个特征必须提供一种编码方法（？），以促进以通用形式（例如 JSON 或`Map`类似形式）收集特征相关数据，`Map("a" -> "1", "b" -> "hello")`以及将此类映射（如果收到）转换回的解码方法性状相关的变量。另外：1）所有混合特征的所有编码和解码方法都以任意顺序由`Entity`'s 方法以任意顺序调用`encode`，`decode(Map)`并且 2）应该通过指定特征类型来单独调用，或者更好的是，通过字符串参数，如`decode("component-n", Map)`.

不能使用具有相同名称的方法，因为它们会由于遮蔽或覆盖而丢失。我可以想到一个解决方案，其中所有方法都存储在*每个*实体中的`Map[String, Map[String, String] => Unit]`for decode 和`Map[String, () => Map[String, String]]`for encode 中。这会起作用 - 别名和一堆电话肯定会可用。但是，这将导致在每个实体中存储相同的信息，这是不可接受的。

 *也可以将这些映射存储在伴随对象中，这样它就不会在任何地方重复，并使用表示实体特定实例的额外参数调用对象的`encode`和方法。`decode`

这个要求可能看起来很奇怪，但由于所需的速度和模块化，它是必要的。所有这些解决方案都很笨拙，我认为 Scala 中有更好的惯用解决方案，或者我在这里遗漏了一些重要的架构模式。那么有没有比伴生对象更简单、更惯用的方法呢？

**编辑：**我认为聚合而不是继承可能可以解决这些问题，但代价是无法直接在实体上调用方法。

**更新：**探索 Rex Kerr 提出的非常有前途的方法，我偶然发现了一些阻碍。这是测试用例：

```
trait Component {
  def encode: Map[String, String]
  def decode(m: Map[String, String]) 
}

abstract class Entity extends Component // so as to enforce the two methods

trait ComponentA extends Component {
  var a = 10
  def encode: Map[String, String] = Map("a" -> a.toString)
  def decode(m: Map[String, String]) {
    println("ComponentA: decode " + m)
    m.get("a").collect{case aa => a = aa.toInt}
  }
}

trait ComponentB extends ComponentA {
  var b = 100
  override def encode: Map[String, String] = super.encode + ("b" -> b.toString)
  override def decode (m: Map[String, String]) {
    println("ComponentB: decoding " + m)
    super.decode(m)
    m.get("b").foreach{bb => b = bb.toInt}
  } 
}

trait ComponentC extends Component {
  var c = "hey!"
  def encode: Map[String, String] = Map("c" -> c)
  def decode(m: Map[String, String]) {
    println("ComponentC: decode " + m)
    m.get("c").collect{case cc => c = cc}
  }
}

trait ComponentD extends ComponentB with ComponentC {
  var d = 11.6f
  override def encode: Map[String, String] = super.encode + ("d" -> d.toString)
  override def decode(m: Map[String, String]) {
    println("ComponentD: decode " + m)
    super.decode(m)
    m.get("d").collect{case dd => d = dd.toFloat}
  }
} 
```

最后

```
class EntityA extends ComponentA with ComponentB with ComponentC with ComponentD 
```

以便

```
object Main {
  def main(args: Array[String]) {
    val ea = new EntityA
    val map = Map("a" -> "1", "b" -> "3", "c" -> "what?", "d" -> "11.24")
    println("BEFORE: " + ea.encode)
    ea.decode(map)
    println("AFTER: " + ea.encode)
  }
} 
```

这使：

```
BEFORE: Map(c -> hey!, d -> 11.6)
ComponentD: decode Map(a -> 1, b -> 3, c -> what?, d -> 11.24)
ComponentC: decode Map(a -> 1, b -> 3, c -> what?, d -> 11.24)
AFTER: Map(c -> what?, d -> 11.24) 
```

A 和 B 组件不受影响，被继承解析截断。所以这种方法只适用于某些层次结构的情况。在这种情况下，我们看到`ComponentD`已经掩盖了其他一切。欢迎任何意见。

**更新2：**我将回答这个问题的评论放在这里，以便更好地参考：“Scala线性化了所有特征。应该有一个超特征会终止链。在你的情况下，这意味着`C`并且`A`仍然应该调用`super`, 和`Component`应该是用无操作终止链的那个。” ——*雷克斯·克尔*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T18:18:08.537

特拉维斯的答案基本正确。不知道他为什么删除它。但是，无论如何，只要您愿意让您的编码方法采用一个额外的参数，并且当您解码时您很乐意设置可变变量而不是创建新对象，您就可以做到这一点而不会有太多的悲伤。（在运行时有效的复杂特征堆叠范围从困难到不可能。）

基本观察是，当您将特征链接在一起时，它定义了超类调用的层次结构。如果这些调用中的每一个都处理该特征中的数据，那么只要您能找到一种方法来取回所有数据，您就会被设置。所以

```
trait T {
  def encodeMe(s: Seq[String]): Seq[String] = Seq()
  def encode = encodeMe(Seq())
}
trait A extends T {
  override def encodeMe(s: Seq[String]) = super.encodeMe(s) :+ "A"
}
trait B extends T {
  override def encodeMe(s: Seq[String]) = super.encodeMe(s) :+ "B"
} 
```

它有效吗？

```
scala> val a = new A with B
a: java.lang.Object with A with B = $anon$1@41a92be6

scala> a.encode
res8: Seq[String] = List(A, B)

scala> val b = new B with A
b: java.lang.Object with B with A = $anon$1@3774acff

scala> b.encode
res9: Seq[String] = List(B, A) 
```

确实！它不仅有效，而且您可以免费获得订单。

现在我们需要一种基于这种编码设置变量的方法。在这里，我们遵循相同的模式——我们接受一些输入，然后顺着它进入超级链。如果您有很多特征堆叠，您可能希望将文本预解析为地图或过滤掉适用于当前特征的那些部分。如果没有，只需将所有内容都传递给超级，然后让自己追求它。

```
trait T {
  var t = 0
  def decode(m: Map[String,Int]) { m.get("t").foreach{ ti => t = ti } }
}
trait C extends T {
  var c = 1
  override def decode(m: Map[String,Int]) { 
    super.decode(m); m.get("c").foreach{ ci => c = ci }
  }
}
trait D extends T {
  var d = 1
  override def decode(m: Map[String,Int]) {
    super.decode(m); m.get("d").foreach{ di => d = di }
  }
} 
```

这也可以像人们希望的那样工作：

```
scala> val c = new C with D
c: java.lang.Object with C with D = $anon$1@549f9afb

scala> val d = new D with C
d: java.lang.Object with D with C = $anon$1@548ea21d

scala> c.decode(Map("c"->4,"d"->2,"t"->5))

scala> "%d %d %d".format(c.t,c.c,c.d)
res1: String = 5 4 2 
```*

# c++ - cuda 标头包含失败

> ID：12071947
> 
> 赞同：0
> 
> 时间：2012-08-22T11:20:18.273
> 
> 标签：c++, cuda, compiler-errors

我想为另一个使用 MPI 用 C++ 编写的项目构建一个 cuda 插件。我遇到了以下情况：

*   startpoint.cpp 是一个 c++ 文件，包括 cudaintegrator.h 和 datastructure.h
*   cudaintegrator.h 是包含 datastructure.h 的 cuda 文件的头文件
*   cudaintegrator.cpp 是 cudaintegrator.h 的实现
*   datastructure.h 是指定一些数据结构的头文件

这些文件的组织方式如下：

```
/trunk/
   /src
      /folder1
         /folder2
            /startingpoint.cpp
         /folder3 
            /cudaintegrator.h
            /cudaintegrator.cpp
      /folder4
         /folder5
            /datastructure.h 
```

当我`nvcc`使用以下命令从我的主干目录运行时：

```
/usr/local/cuda/bin/nvcc   -c -o src/folder1/folder3/cudaintegrator.o src/folder1/folder3/cudaintegrator.cu 
```

找不到包含的文件`#include“folder4/folder5/datastructure.h”：

```
src/folder1/folder2/cudaintegrator.h:12:33: fatal error: folder4/folder5/datastructure.h: No such file or directory 
```

当我运行使用相同包含`mpic++`的编译时，找到了。`startingpoint.cpp``datastructure.h`

我怀疑 nvcc 和 mpic++ 的工作目录有些不同（？），即使两者都是从主干目录运行的。当我将包含更改为`../../folder4/folder5/datastructure.h`文件本身时，找到了，但随后的包含因同样的原因而失败。`mpic++`我无法更改所有后续文件中的包含，因为在这种情况下无法找到它们。有没有人建议我应该如何在这种情况下正确包含文件，或者如何指示`nvcc`找到包含的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:24:18.023

为 nvcc 调用提供包含路径 ( `-I`) 就足够了（如果没有，它仅使用相对包含路径，这就是添加`../..`单个包含的原因）。

# c# - 图像的 ListView Larget Icon 垂直对齐

> ID：12071948
> 
> 赞同：1
> 
> 时间：2012-08-22T11:20:19.840
> 
> 标签：c#, .net, winforms, listview, imagelist

我有 View 类型为 LargeIcon 的 ListView。ListView 已分配 LargeImageList。分配的 ImageList 的 ImageSize 为 200x200。将添加到 ImageList 的图像的大小与 200x200 ImageList 大小不匹配。它们可以具有较小的宽度或高度。在这两种情况下，我都希望图像按中心对齐，即 Winforms.Label 类的 MiddleCenter 属性

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:04:37.620

ImageList 将调整图像大小以适合 ImageSize。要获得原始大小的图像并居中，您需要创建具有所需属性的新图像。执行此操作的示例代码（未经测试）：

```
public static void AddCenteredImage(ImageList list, Image image) {
    using (var bmp = new Bitmap(list.ImageSize.Width, list.ImageSize.Height))
    using (var gr = Graphics.FromImage(bmp)) {
        gr.Clear(Color.Transparent);   // Change background if necessary
        var size = image.Size;
        if (size.Width > list.ImageSize.Width || size.Height > list.ImageSize.Height) {
            // Image too large, rescale to fit the image list
            double wratio = list.ImageSize.Width / size.Width;
            double hratio = list.ImageSize.Height / size.Height;
            double ratio = Math.Min(wratio, hratio);
            size = new Size((int)(ratio * size.Width), (int)(ratio * size.Height));
        }
        var rc = new Rectangle(
            (list.ImageSize.Width - size.Width) / 2,
            (list.ImageSize.Height - size.Height) / 2,
            size.Width, size.Height);
        gr.DrawImage(image, rc);
        list.Images.Add(bmp);
    }
} 
```

# javascript - 如何通过 JavaScript 正则表达式匹配不同语言的单词？

> ID：12071949
> 
> 赞同：0
> 
> 时间：2012-08-22T11:20:20.200
> 
> 标签：javascript, regex

我有不同语言的字符串。我只需要获取没有数字的字符，'-'，'/'，')'，...但是接缝 JavaScript regexp '\w' 只匹配英语。
[http://jsfiddle.net/d9BRC/](http://jsfiddle.net/d9BRC/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:30:45.200

经过一番研究，似乎`\w`不处理 unicode 字符，您可以使用`\p{L}`(Letters) 执行此操作，但再次 javascript 不支持此操作。

这是一个[解决方案](http://jsfiddle.net/epoch/d9BRC/1/)，取自[这个答案](https://stackoverflow.com/questions/280712/javascript-unicode/8933546#8933546)

# javascript - 在节点 js 中使用闭包

> ID：12071952
> 
> 赞同：0
> 
> 时间：2012-08-22T11:20:31.627
> 
> 标签：javascript, node.js, closures

以下方法的使用有什么区别？

**第一种方法：**

```
for(var i = 0; i < 10; i++) {
    (function(e){
        setTimeout(function() {
            console.log(e); 
        }, 1000);
    })(i);
}

for(var i = 0; i < 10; i++) {
    createTimeoutFunction(i);
} 
```

**第二种方法：**

```
function createTimeoutFunction(e){ 
    setTimeout(function() {
        console.log(e); 
    }, 1000);
}

for(var i = 0; i < 10; i++) {
    createTimeoutFunction(i);
} 
```

我是节点 js 和使用闭包的新手。尽管两种方法都返回相同的输出，但第二种方法运行时出错。我不明白为什么我们需要像第一种方法一样使用两个循环。我们不能像第二种方法一样执行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:33:39.760

在第一个方法中删除第二个`for`，因为除非您希望循环运行两次，否则它是多余的，因为第一个方法中已经发生了一切。第二个循环失败，因为`createTimeoutFunction`从未在第一个循环的范围之外定义，与第二种方法相反。

除此之外，它们都将产生相同的结果，唯一的区别在于第二种方法`createTimeoutFunction`是可重用的。

另请参阅：[JavaScript 闭包如何工作？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:38:49.020

无论您使用何种环境或解释器，javascript 中的闭包都一样。

闭包提供了执行该组代码的特定变量范围。您的闭包（显然）可以访问其内部定义的任何内容，以及任何封闭闭包中定义的任何对象。

你代码的问题是在第一个例子`createTimeoutFunction`中没有在任何地方定义——当你调用它时它会失败。在那个例子中：

```
(function(e){
    setTimeout(function() {
        console.log(e); 
    }, 1000);
})(i); 
```

在这个闭包中定义的函数是一个匿名函数。它没有`name`属性，不能被引用。

第二个版本定义了一个全局变量`createTimeoutFunction`，然后可以在页面上的任何闭包中访问它，因为它是全局对象的一部分。（好吧，我假设因为您没有显示此代码包含在其他任何内容中）。

# xcode - Xcode 支持 git 的原因

> ID：12071955
> 
> 赞同：0
> 
> 时间：2012-08-22T11:20:36.517
> 
> 标签：xcode, git, svn

Apple 仅在 Xcode 中集成 git 支持而不是 SVN 是否有任何具体原因？我知道有一些解决方法可以让 svn 在 Xcode 中工作，但与 git 的直观设置相比，它们似乎很痛苦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:59:02.633

*   因为更多用户要求 Git 而不是 Subversion？
*   因为如果不支持管理和设置 Subversion 存储库，Subversion 支持就没有真正意义，这会比 Git 支持更复杂（因此实施起来更昂贵）？
*   因为 Git 又酷又时髦，而 Apple 也想成为？
*   因为有人在某个地方掷硬币？
*   因为它与 Ruby 支持大致同时添加，而且 Git 是Ruby 社区中占主导地位的 VCS *？*

你真的得问问苹果公司的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:26:28.070

SVN 是一个非常过时的系统。Git 在这里是更好的选择并且工作得很好，所以我认为实现旧系统没有任何罪恶。

有一些解决方案可以将 SVN 导入 GIT。

# prolog - 扩展至 CFG，它是什么？

> ID：12071959
> 
> 赞同：6
> 
> 时间：2012-08-22T11:20:43.960
> 
> 标签：Prolog 中的定句语法dcg, prolog, context-free-grammar, dcg, iso-prolog, dcg-semicontext

考虑以下对上下文无关文法的扩展，它允许规则在左侧具有一个（或多个）终结符在非终结符的右侧。也就是说，形式的规则：

```
A b -> ... 
```

右手边可以是任何东西，比如在上下文无关文法中。特别是，**不需要**右手边的末尾有完全相同的终端符号。在这种情况下，此扩展将是上下文相关的。但终端不仅仅是一个上下文。有时，这个终端被称为“推回”。

显然，这不再是 CFG（类型 2）。它包括类型 1。但它是什么？真的已经是 type-0 了吗？

[Prolog 中的定句语法dcg](/questions/tagged/dcg "显示标记为“dcg”的问题")允许此特定扩展。（为了避免误解，我在这里不考虑 Prolog 的完整扩展。即我假设终端来自有限的字母表而不是任意术语，我也不考虑 DCG 中允许的 Prolog 的附加参数，这些参数也进入类型- 0 已经。）

* * *

编辑：这是描述扩展的更简单方法：添加到表单的 CFG 规则

```
A b -> <epsilon> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T16:44:03.323

这是部分答案：

该文法属于类型 0。[上下文相关文法](http://en.wikipedia.org/wiki/Context-sensitive_grammar) （类型 1）具有以下形式的规则，`wAx -> wBx`其中 w 和 x 是终结符和非终结符字符串，并且 B 不为空。请注意，由于 B 不为空，`|wAx| <= |wBx|`。您的语法具有以下形式的规则，`Ax -> z`其中 z 是一串终结符和非终结符，可以为空，并且可以删除 x。这违反了 CSG 的两个原则。

不满意的是，我没有回答两件事：

*   你的语法是 type-1 生成的*语言吗？*语法是 type-0，但这并不意味着语言不能是 type-1。例如，常规语言（类型 3）可以由 CFG（类型 2）描述。

*   语言是[递归](http://en.wikipedia.org/wiki/Recursive_language)的吗？这很重要，因为如果是这样，语言是可确定的（不会受到停止问题的影响）。

    我目前正在尝试证明第二点，但这可能超出了我的能力。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-12T12:08:50.720

为了回答我关于 Prolog 的 DCG 形式主义的问题，这个扩展现在被称为**semicontext**。参见[DCG 的 N253 DIN 草案 2014-04-08 - ISO/IEC WDTR 13211-3:2014-04-08](http://www.complang.tuwien.ac.at/ulrich/iso-prolog/#dcg)

给定

```
a1, [b] --> ... .

a2, [b,b] --> ... . 
```

终端序列`[b]`现在和终端序列一样是半上下文`[b,b]`。

现在是否会在规则的末尾出现相同的终端序列，我们将有一个上下文：

```
a3, [b,b] --> ..., [b,b]. 
```

所以“半”在这里意味着“一半”——类似于一个半群，其中一个群的一半代数性质成立。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T16:36:11.307

是的，我认为它是 0 型。前 3 种类型（3、2 和 1）的原则是那些不能执行归约。这些是仅生成类型。

在这里，您可以将终端转换为 epsilon，使其类型为 0。

# jquery - Jquery 表操作

> ID：12071961
> 
> 赞同：-1
> 
> 时间：2012-08-22T11:20:49.883
> 
> 标签：jquery

我正在处理表格和单元格。我在每个单元格中都有一个按钮。所以，我想隐藏表格单元格中的所有按钮。它显示当用户单击特定单元格时，用户可以在特定表格单元格中看到该按钮。

（我使用jquery）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:25:45.527

将一个类附加到所有按钮并隐藏（）它们，然后将一个单击事件绑定到每个包含一个匿名函数的单元格，该函数会导致显示作为被单击单元格的子按钮的按钮。我的 jQuery 生锈了，但它基于：

```
$(document).ready(function(){
  $('.button').hide();
  $('.cell').click(function(){
    $('.button').hide(); // hide all others if showing already
    $(this).find('.button').show();

  });

}); 
```

# c# - 在 c# 中写入 CSV 时，数字字段丢失前导零

> ID：12071963
> 
> 赞同：9
> 
> 时间：2012-08-22T11:20:50.683
> 
> 标签：c#, csv

我正在使用将我的客户数据导出到 CSV 的 ASP.NET 应用程序，我需要我的客户电话号码带有前导零。我需要电话号码不带“-”且不带引号，并且由于我的应用程序的性质，我不能使用 EPPLUS 等 3rd 方产品。我试图放置一个空格并让 CSV “理解”我需要将电话号码作为文本，但这似乎不正确。

我想知道如何在不使用第三方产品的情况下使 excel 包含前导零。

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-22T12:22:59.503

使用以下格式更改保存在 csv 中的数据：

```
 ="00023423" 
```

CSV 示例：

```
David,Sooo,="00023423",World 
```

这将在 excel 中显示 00023423 而不是 23423。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-20T16:46:29.253

```
public void CreatingCsvFiles(Client client)
    {
        string filePath = "Your path of the location" + "filename.csv";
        if (!File.Exists(filePath))
        {
            File.Create(filePath).Close();
        }
        string delimiter = ",";
        string[][] output = new string[][]{
        new string[]{ "=\"" + client.phone + "\"", client.name }
        };
        int length = output.GetLength(0);
        StringBuilder sb = new StringBuilder();
        for (int index = 0; index < length; index++)
        sb.AppendLine(string.Join(delimiter, output[index]));
        File.AppendAllText(filePath, sb.ToString());
    } 
```

灵感来自[http://softwaretipz.com/c-sharp-code-to-create-a-csv-file-and-write-data-into-it/](http://softwaretipz.com/c-sharp-code-to-create-a-csv-file-and-write-data-into-it/)

重要的部分：

```
 "=\"" + client.phone + "\"", client.name 
```

如果电话号码是 int，当然要添加 .toString()。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-22T11:24:44.370

将电话号码打印到 CSV，并在前面加上 ' （单引号），所以它看起来像：

```
"Some Name","'0000121212" 
```

Excel 应将其`0000121212`视为字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-12T12:45:33.030

我相信将数字转换为像公认答案这样的公式可能不是对所有人都有帮助的解决方案。

我采用的替代解决方案是在整数值之前添加一个**制表符空格。**

* * *

*例子：*

以`phoneNumber`包含我们的 int 值的字符串变量

*解决方案：*

`"\t" + phoneNumber`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T11:24:04.357

**如果您已经知道手机内必须有**多少号码，您可以这样做

`phoneNumber.ToString("000000000000")`

在这个例子中，我认为`phoneNumber`是`int`并且所需的数字长度是`12`。

# css - 创建一个带有直角三角形/指针的按钮

> ID：12071972
> 
> 赞同：5
> 
> 时间：2012-08-22T11:21:14.080
> 
> 标签：css, css-shapes

希望创建这个：![带右箭头/指针的按钮](../Images/03f79eb98e0379f8431029dcd235541f.png)

实现它的最佳方法是什么？

**它必须：** 我绝对希望将文本保留为文本（因此不使用图像）。另外，我希望它可以重复使用，以便我可以在其中放入不同的文本。理想情况下，箭头部分应与文本一样高。

**很高兴：** 我希望能够将它放在任何背景上（所以它并不总是在白色上）如果它是 ie8+ 那就太好了

谢谢！！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-22T11:25:00.883

您是否尝试过使用 html/css 的东西？

```
#vert_menu{   overflow: hidden;  width: 100%; }
#vert_menu li{  float: left; }
#vert_menu a{
  padding: 8px 20px 8px 40px;
  float: left; text-align:center;
  text-decoration: none; font: normal 16px Myriad Pro, Helvetica, Arial, sans-serif;  text-shadow:0px 1px 0px #000;
  color: #e6e2cf;
  position: relative; text-shadow:1px 0 0 #000;
  background: #525252;  min-width:181px; width:auto
}

#vert_menu a::after,
#vert_menu a::before{
  content: "";
  position: absolute;
  top: 50%;
  margin-top: -19px;   
  border-top: 19px solid transparent;
  border-bottom: 19px solid transparent;
  border-left: 1em solid;
  right: -1em;
}
#vert_menu a::after{   z-index: 2;  border-left-color: #525252;   }
```

```
<ul id="vert_menu">
<li><a href="#" class="current">test</a></li>
</ul>
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T11:29:25.280

你可以在你的 HTML 中这样做；

```
<div>
    <a href="#"><button>Button</button></a>
</div> 
```

这在你的 CSS

```
a {
    background: #950006;
    border: none;
    display: inline-block;
    height: 28px;
    line-height: 28px;
    position: relative;
    text-decoration: none;
    width: 100px
}

a:before{
    background: #950006;
    border: none;
    content: '';
    display: block;
    height: 20px;
    left: 90px;
    position: absolute;
    top: 4px;
    -moz-transform: rotate(45deg);
    -webkit-transform: rotate(45deg);
    -o-transform: rotate(45deg);
    transform: rotate(45deg);
    width: 21px;
}
a button {
    color: #fff;
    background: none;
    border: none;
    font-weight: bold;
    position: relative;
    width: 120px;
    height: 28px;
} 
```

并会输出一个这样的按钮：-![在此处输入图像描述](../Images/2187a06dcfa87e7f5e195aa3b99dae75.png)

***[这](http://jsfiddle.net/blasteralfred/SMJYy/)***是一个有效的现场演示。完成按钮是可点击的。您可以通过更改父 div 的背景来测试按钮。

希望这可以帮助。

# php - Internet Explorer 7 中的 jQuery AJAX

> ID：12071974
> 
> 赞同：0
> 
> 时间：2012-08-22T11:21:19.070
> 
> 标签：php, jquery, ajax, symfony1, symfony-1.4

我正在使用`Symfony`1.4，但我们遇到了问题`IE7`

我们有一个表单和一个 url，当我们单击 url 时，我们想要显示第一个表单的副本。要显示的表格数量上限为 3

现在的问题是当我们第一次点击第二个表单时显示。但在第三次它阻塞。

这是 AJAX 脚本：

```
<script type="text/javascript">
    $('a#add_contact_anchor').click( function() {
        var select_default_values = new Array();
        var array_counter = 0;

        $(this).parents('div#activity_contact_container').find('input').each( function(){
            select_default_values[array_counter] = { value: $(this).val(), name: $(this).attr('id')};
            array_counter++;
        });
        $(this).parents('div#activity_contact_container').find('select').each( function(){
            select_default_values[array_counter] = { value: $(this).val(), name: $(this).attr('id')};
            array_counter++;
        });

        var params = { default_contact_values: select_default_values, contact_num: <?php echo $contact_num; ?> };

        ajaxCallObj = { page: '<?php echo url_for('myCommunication/updateContactsForCatalog', true); ?>', data: params, update: '#activity_contact_container' };
        ajaxCall(ajaxCallObj);  

    });
</script> 
```

这是网址：

```
<a title="<?php echo __('Add new contact 3019'); ?>" href="javascript:void(0);" id="add_contact_anchor"><?php echo __('Add new contact 3019'); ?></a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:31:56.033

尝试将计数器移到 click 函数回调之外，可能您只是继续覆盖第二个表单。

# java - WebDriver 出现“无法定位元素”异常

> ID：12071977
> 
> 赞同：1
> 
> 时间：2012-08-22T11:21:23.707
> 
> 标签：java, selenium, webdriver, selenium-webdriver

运行以下代码时出现“无法定位元素”异常。我的预期输出是`First Page of GoogleResults`.

```
public static void main(String[] args) {
    WebDriver driver;
    driver = new FirefoxDriver();
    driver.get("http://www.google.com");
    driver.manage().timeouts().implicitlyWait(45, TimeUnit.SECONDS);

    WebElement oSearchField = driver.findElement(By.name("q"));
    oSearchField.sendKeys("Selenium");

    WebElement oButton = driver.findElement(By.name("btnG"));
    oButton.click();

    //String oNext = "//td[@class='b navend']/a[@id='pnnext']";
    WebElement oPrevious;
    oPrevious = driver.findElement(By.xpath("//td[@class='b navend']/a[@id='pnprev']"));

    if (!oPrevious.isDisplayed()){
        System.out.println("First Page of GoogleResults");
    }
} 
```

如果我运行上面的代码，我会得到“无法找到元素异常”。我知道上一个按钮元素不在 Google 搜索结果页面的第一页，但我想抑制异常并获取下一步`if`条件的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:42:45.053

Logical mistake -

```
oPrevious = driver.findElement(By.xpath("//td[@class='b navend']/a[@id='pnprev']")); 
```

will fail or give error if WebDriver can't locate the element.

Try using something like -

```
public boolean isElementPresent(By by) {
    try {
        driver.findElement(by);
        return true;
    } catch (NoSuchElementException e) {
        return false;
    }
} 
```

You can pass the xpath to the function like

```
boolean x = isElementPresent(By.xpath("//td[@class='b navend']/a[@id='pnprev']"));
if (!x){
    System.out.println("First Page of GoogleResults");
} 
```

# internet-explorer - 自动化服务器无法创建对象 - EXT JS 错误

> ID：12071981
> 
> 赞同：0
> 
> 时间：2012-08-22T11:21:37.193
> 
> 标签：internet-explorer, extjs, extjs4

我在 IE 8 中遇到了这个错误。它说；

```
SCRIPT429: Automation server can't create object 

app.html, line 1 character 1 
```

`app.html`文件的行是`<!DOCTYPE html>`

# ocean - Petrel 在测试模式下可以加载插件吗？

> ID：12071982
> 
> 赞同：1
> 
> 时间：2012-08-22T11:21:39.590
> 
> 标签：ocean

我们发现开发需要注册域对象的自动化 nunit 集成测试非常麻烦（例如，为了使用所述对象加载和保存项目），因为像 DataSourceFactories 这样的东西需要在 Integrate 或 Initalize 阶段注册。

注册插件似乎在测试模式下被忽略。

从本质上讲，模块似乎需要以老式的方式注册（在测试程序集 .config 中），当我们在各种插件中拥有大量模块时，这变得很难维护。

有没有办法让 Petrel 在测试模式下加载插件？

有没有办法在测试模式下启动 Petrel 时以编程方式注册模块？

在 Petrel 环境中构建和自动化单元/集成测试是否有任何最佳或建议实践，理想情况下，测试应该在插件及其模块已加载和初始化的情况下运行，尽可能接近最终用户体验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:46:11.710

在测试模式下运行 Petrel 时加载插件的唯一方法是在测试程序集 .config 中注册。至于构建插件的测试，我可以建议保留几个 .config 文件的副本，其中包含不同插件/模块的注册实体，并在运行特定测试时将测试程序集 .config 替换为您需要的那个。

# spring - 在 Java Web 应用程序中设置引导文件

> ID：12071985
> 
> 赞同：0
> 
> 时间：2012-08-22T11:21:59.697
> 
> 标签：spring, hibernate, jsf, web-applications, bootstrapping

[我在这里](https://stackoverflow.com/questions/1254542/what-is-bootstrapping)阅读了有关引导的信息。如何在使用 jsf、spring 和 hibernate 编写的 Web 应用程序中设置引导文件。是否有必要在我的应用程序中设置引导文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:57:29.233

Java Web 应用程序由运行它们的 Web 容器（例如 Tomcat）“引导”，您不必自己动手。

但是，如果您想添加在应用程序启动时执行的额外操作（和/或在应用程序关闭时执行的清理操作），servlet API 提供了“上下文侦听器”机制。

基本上，您必须创建一个实现的类，该类`javax.servlet.ServletContextListener`具有 2 个方法，`contextInitialized`和`contextDestroyed`，分别在应用程序启动和关闭时执行。

然后，您必须在 web.xml 中添加配置此类，如下所示：

```
<listener>
    <description>My Context listener</description>
    <display-name>My Context listener</display-name>
    <listener-class>
        com.acme.myapp.MyContextListener
    </listener-class>
</listener> 
```

（或者在 JEE6 中你可以使用`javax.servlet.annotation.WebListener`注解而不是 XML）

谷歌是你的朋友，但这里有一些链接可以开始：

[http://www.roseindia.net/servlets/ServletContextListener-example.shtml](http://www.roseindia.net/servlets/ServletContextListener-example.shtml)

[http://docs.oracle.com/javaee/5/tutorial/doc/bnafi.html](http://docs.oracle.com/javaee/5/tutorial/doc/bnafi.html)

# java - 从 pkcs12 密钥库 usong 别名获取签名证书的简单方法

> ID：12071988
> 
> 赞同：2
> 
> 时间：2012-08-22T11:22:07.730
> 
> 标签：java, xml, security, xml-signature, xades4j

谁能告诉我 xades4j 中是否有一种简单的方法可以使用他的别名从 pkcs12 获取签名证书？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:29:51.513

*KeyStoreKeyingDataProvider.SigningCertSelector*接口缺少条目别名。如果您现在确实需要它，您可以更改*KeyStoreKeyingDataProvider.SigningCertSelector*接口和 KeyStoreKeyingDataProvider 上的[代码](http://code.google.com/p/xades4j/source/browse/trunk/src/main/java/xades4j/providers/impl/KeyStoreKeyingDataProvider.java#187)。可能*SigningCertSelector*应该收到“对”{别名，证书}的列表。

# java - Java Play2- 防止 CSRF

> ID：12071989
> 
> 赞同：0
> 
> 时间：2012-08-22T11:22:13.207
> 
> 标签：java, playframework-2.0, csrf

我看到了[https://github.com/orefalo/play2-authenticitytoken](https://github.com/orefalo/play2-authenticitytoken)但是这个存储库给出了 404 错误，他在他的 git [https://github.com/orefalo/play2-authenticitytoken/issues/4上关闭了这个问题](https://github.com/orefalo/play2-authenticitytoken/issues/4)

也许它不安全，所以他把它放下了？

*   您目前如何防止 Play2 中的 CSRF 攻击？

*   还是我需要手动完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:51:11.530

我是您所指项目的作者。

repo 给出了 404，这很好，我不想涉足维护工件存储库的业务。

但是代码功能齐全，只需将项目内容复制到您自己的项目中即可。

# html - 运行windows8风格应用程序的客户端机器要求？

> ID：12071991
> 
> 赞同：0
> 
> 时间：2012-08-22T11:22:34.970
> 
> 标签：html, windows-8, microsoft-metro, system-requirements

我使用 Windows8 Release Preview 和 Visual Studio2012 RC 来开发我的 windows8 风格的应用程序，我想在另一台机器（客户端）上运行我的应用程序。他们的机器上有 windows8 Release Preview。所以我的问题是：

1.  他们是否需要在他们的机器上安装任何其他软件，如 Visual Studio2012 和 .NetFramework4.5？
2.  谁能给我一些与客户机器要求相关的有用信息以成功运行 Metro 应用程序？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:05:03.933

> **他们是否需要在他们的机器上安装任何其他软件，如 Visual Studio2012 和 .NetFramework4.5？**

您可以使用 进行测试`PowerShell`，它可能需要安装 .net 框架，有关详细信息，请点击以下链接。

请参阅这些：
[如何将 Metro 应用程序部署到桌面？](https://stackoverflow.com/questions/7451536/how-to-deploy-a-metro-app-to-the-desktop)
[Metro 风格的应用程序能否安装在市场框架之外？](https://stackoverflow.com/questions/10264451/will-metro-style-apps-be-able-to-be-installed-outside-the-market-frame)

[将 Metro 风格应用部署到非开发系统](http://social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/7be92f16-7179-4d74-9915-c6f21e0f4c55)
[在本地共享应用包（Metro 风格应用）](http://msdn.microsoft.com/library/windows/apps/hh975356) [从 Visual Studio 部署 Windows Metro 风格应用](http://msdn.microsoft.com/en-us/library/windows/apps/hh771031.aspx)

> **谁能给我一些与客户机器要求相关的有用信息以成功运行 Metro 应用程序？**

检查答案的编辑部分和第二个查询的另一个[答案](https://stackoverflow.com/a/10265361/770710)中的参考视频。

[支持 Metro 风格的设备应用程序](http://msdn.microsoft.com/en-us/library/windows/hardware/hh454840%28v=vs.85%29.aspx)

希望这可以帮助您探索 Metro 应用程序部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:51:32.403

如果需要，您还可以配置您的机器进行远程调试。如果您的开发机器是传统的笔记本电脑或台式机，但您想调试在具有加速度计、GPS、多点触控等的平板上运行的应用程序，这将非常有用。

[http://msdn.microsoft.com/en-us/library/bt727f1t.aspx](http://msdn.microsoft.com/en-us/library/bt727f1t.aspx)提供了有关如何进行设置的信息。

# jquery - jQplot 条形分组

> ID：12071996
> 
> 赞同：1
> 
> 时间：2012-08-22T11:23:09.400
> 
> 标签：jquery, jqplot

这曾经可以正常工作，但自从更新到最新版本的 jQplot 后，条形不再分组：

我想将两个条 [空格] 两个条 [空格] 分组。再一次，这在以前工作得很好......

```
$(document).ready(function(){

     var numCompleted = [4,3,6,5,5,4,0,0,5,4,0,0,0,0];
    var numNotCompleted = [1,1,0,0,2,2,8,7,4,4,11,10,1,1];

     var dates = ['AM<br>Mon 16','PM','AM<br>Tue','PM','AM<br>Wed','PM','AM<br>Thu','PM','AM<br>Fri','PM','AM<br>Sat','PM','AM<br>Sun','PM'];

    plot3 = $.jqplot('complianceChart', [numCompleted,numNotCompleted], {
    // Tell the plot to stack the bars.
    seriesColors: [ "#81a7d4", "#d0d0d0"],
    stackSeries: true,
    shadow: false,
    //title: 'Exercises completed',
    animate: false,
    captureRightClick: false,
    grid:{drawGridLines: false, shadow : false},

    legend: {
      show: true,
      showLabels: true,
      labels: ['Completed exercises','Assigned exercises'],
     showSwatches: true,
    location: 'e',
     placement: 'outsideGrid'
    },
    seriesDefaults:{
      renderer:$.jqplot.BarRenderer,
      rendererOptions: {
          barMargin: 10,
          barPadding: 0,
          shadowOffset: 0,
          groups:7,
          highlightMouseDown: false   
      },
      pointLabels: {show: false,hideZeros: false,edgeTolerance : 10}
    },
    grid: {
            gridLineColor: '#fff',
            borderWidth:0,
            shadow: false,
            background: "white"
        },
    axes: {
      xaxis: {
          renderer: $.jqplot.CategoryAxisRenderer,
          ticks: dates,
          showTickMarks: false
      },
      yaxis: {
        showTicks: false
      }
    }
    }); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-08T02:23:07.773

这是 rev 1111 左右引入的错误。现在应该修复，请从[https://bitbucket.org/cleonello/jqplot/downloads](https://bitbucket.org/cleonello/jqplot/downloads)或[http://www.jqplot.com/deploy/download下载最新发行版](http://www.jqplot.com/deploy/download)

# javascript - 在类的嵌套函数中使用“this”

> ID：12071997
> 
> 赞同：0
> 
> 时间：2012-08-22T11:23:09.070
> 
> 标签：javascript

> **可能重复：**
> [Javascript 中的嵌套函数参数和“this”上下文](https://stackoverflow.com/questions/3139471/nested-function-parameters-and-this-context-in-javascript)

由于在嵌套类函数调用中使用“this”的问题，我目前无法根据需要设计我的 JS 类。不知道如何更好地描述它，所以这是我的意思的示例。

测试.html

```
<!DOCTYPE html>
<html class="main" lang="en">
<head>
    <meta charset="utf-8">
    <script type="text/javascript" src="test.js"></script>
    <script type="text/javascript">
        function doIt() {
            var myTestClass = new TestClass();
        }
    </script>
</head>
<body>
    <button onclick="doIt();">Do it!</button>
</body>
</html> 
```

测试.js

```
function TestClass() {
   // this is working
   this.alertValue('This works');

   // this is not working
   setTimeout(function(){this.alertValue('This does not work!')}, 1000);
}

TestClass.prototype.alertValue = function(value) {
   alert('Value is: ' + value);
} 
```

当然，这只是一个简化的示例来演示我的意思。那么如何在 setTimeout 调用内的函数中使用“this”标识符，或者如何更好/正确地实现这一目标？

非常感谢您提前提供的帮助！干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T11:24:05.327

将 的值保存`this`在变量 ( `self`) 中，然后您可以在 中访问它`setTimeout`。

```
function TestClass() {
   this.alertValue('This works');
   var self = this;
   setTimeout(function() { 
     self.alertValue('This does not work!')
   }, 1000);
} 
```

# java - newCachedThreadPool 如何复用线程？

> ID：12071999
> 
> 赞同：5
> 
> 时间：2012-08-22T11:23:22.003
> 
> 标签：java, multithreading, executorservice

javadoc 说由`Executors.newCachedThreadPool`重用线程返回的服务。这怎么可能？一个线程只能通过调用启动一次`start`。那么他们是如何实现的呢？该服务的线程在无限循环中运行并且它们的`Runnable`-s 按需替换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T11:34:38.353

一个 Runnable 可以调用另一个 Runnable。

每个线程只运行一个主 Runnable，但该 Runnable 从共享的 BlockingQueue 中获取 Runnables 并调用它们，直到它被关闭。

简化它。

```
final BlockingQueue<Runnable> queue = ...

Runnable runs = new Runnable() { public void run() {
    while(running)
        queue.take().run();
}}; 
```

您可以阅读代码以了解它是如何实现的。