# StackOverflow 问答 000598000-000598999

# svn - 具有不同用户的 ssh-keygen 进行颠覆

> ID：598005
> 
> 赞同：4
> 
> 时间：2009-02-28T13:10:15.223
> 
> 标签：svn, ssh-keys

我不知道如何在我的服务器上为其他用户创建公钥/私钥。在我的服务器上，我通过 shell 键入以下内容

(uiserver):john:> ssh-keygen -t dsa

之后，我输入文件名和密码，这成功生成了“john”的私钥和公钥对。现在，当我使用此密钥 ssh 进入我的 subversion 存储库（坐在 john 上）时，所有操作都记录为“john”。那很完美。

所以接下来，我想为“george”创建一个公钥/私钥对，这样他就可以访问我的服务器。我从我的服务器重复了 ssh-keygen。然后我把私钥给了乔治。George 成功安装了密钥，但每次他在 svn 存储库中执行操作时，subversion 都会将他的操作记录为“john”而不是“george”。我如何让颠覆来识别“乔治”和“约翰”之间的区别？

我查看了authorized_keys2，发现两个键的最终注释都是“john@uiserver”。我尝试编辑评论，但颠覆仍然无法识别乔治和约翰之间的区别。

**附加细节**

根据 Juliano 的回答，我有一个半有效的解决方案。我去了“大卫”机器（linux），制作了prv/pub键，将pub键附加到john的authorized_keys2上。完美的！SVN 将 david 的更改记录为 david。

我去了“乔治”机器（windows xp），使用puttygen创建prv/pub密钥，将pub密钥附加到john的authorized_keys2。George 可以访问 svn，但他的所有更改仍然记录为 john。一旦我弄清楚在 TortoiseSVN 中的何处配置它，我就会尝试 bojo 的隧道解决方案。

**回答**

我使用了bojo答案的选项2。最后，我需要做的就是将以下行添加到我的 authorized_keys2

```
command="svnserve -t --tunnel-user=george",no-port-forwarding,no-X11-forwarding,no-agent-forwarding ssh-dss <george's long public key> == meaningful comment 
```

我还添加了行

```
george=george's password 
```

到我的 /pathtorepository/conf/passwd 到我的颠覆密码文件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-28T14:01:24.257

> 然后我把私钥给了乔治。

私钥被称为私有是有原因的。他们绝不打算以这种方式转移。George 应该在自己的用户环境中创建自己的密钥对。但这与您遇到的问题无关。键只是一个非常大的数字的主要因素（为了便于理解而过度简化）。用户身份不是密钥的一部分，而是附加在密钥上的“标签”，SSH 并没有大量使用。

根据您的描述，您要求 George 通过 SSH 登录到 John 的帐户。决定登录 SVN 操作的用户的因素与用于身份验证的密钥对没有任何关系，而是与真正登录的用户有关。

因此，George**必须**有自己的帐户登录 SVN 服务器，存储库**必须**由两个帐户共享，并且 George**必须**使用自己的凭据登录服务器。

约翰的网址：svn+ssh://john@svn-server/path/to/repo

乔治的网址：svn+ssh://george@svn-server/path/to/repo

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-28T14:00:51.513

[在svn 手册](http://svnbook.red-bean.com/en/1.4/svn.serverconfig.svnserve.html#svn.serverconfig.svnserve.sshtricks.fixedcmd)中查看有关如何使用 --tunnel-user 命令的说明。我想乔治出现为约翰的原因是因为你没有告诉 ssh 会话它是哪个用户，所以它默认为约翰的帐户。

为了澄清，原始海报有两个选择。

1.  为 George 创建一个新用户帐户。这假设他具有超级用户访问权限。
2.  生成第二个密钥（最好是 George 这样做），附加到 John 帐户的 .ssh/authorized_keys 文件，然后将上述链接的命令添加到 .ssh/authorized_users 文件中，如所述。该链接还描述了如何限制其他用户对 John 帐户的访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-28T13:55:02.977

这是否与这个[SO 问题有关](https://stackoverflow.com/questions/228183/subversion-asks-for-incorrect-user)，指向博客条目**[svn over ssh 提示输入错误的用户名](http://www.highlevelbits.com/2007/04/svn-over-ssh-prompts-for-wrong-username.html)**？

解决方案是在 george .ssh 目录中创建一个配置文件并将以下内容放入：

```
Host uiserver
User george 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-01-03T17:29:30.610

您可以尝试使用：

```
ssh-keygen -C "george" 
```

# python - 我如何将 TurboMail 3 与 TurboGears 2 一起使用

> ID：598019
> 
> 赞同：1
> 
> 时间：2009-02-28T13:23:42.727
> 
> 标签：python, email, turbogears

嗨，我想将 TurboMail3（[网站](http://www.python-turbomail.org/wiki/3.0/BetaRelease)）与 TurboGears 2（[网站](http://www.turbogears.org/2.0/)）项目一起使用。我必须修改哪些文件才能将 TurboMail 包含到我的 TurboGears 项目中？我在网上找到的所有内容都适用于 TurboMail2 和 TurboGears1。

TurboMail 文档指出实际上存在 TG2 集成，但我从未找到它的文档。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-01T16:51:28.117

集成目前与 Pylons 相同。目前在我们的错误跟踪器中有一张 TG2 特定集成的票。如果您真的想要该主题的答案，请在 turbomail google 组中提问：[http ://groups.google.com/group/turbomail-devel](http://groups.google.com/group/turbomail-devel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-21T05:19:34.000

这可能会对您有所帮助：[让 TurboMail 与 TurboGears 2.0 一起工作](http://www.5dollarwhitebox.org/drupal/node/92)

# objective-c - 使用 Nibs 进行国际化。这真的是个好主意吗？

> ID：598020
> 
> 赞同：7
> 
> 时间：2009-02-28T13:24:56.577
> 
> 标签：objective-c, cocoa, internationalization

在 Apple Docs 中，他们说 Nib 只需将 Nib 翻译成多种语言即可实现国际化。我现在正在考虑一个更糟糕但更现实的场景：您制作了一个巨大的用户界面。然后你把它翻译成 25 种语言。所以你会得到 25 种不同的笔尖。您还会在样式和定义 UI 方面获得巨大的冗余：相同内容的 25 倍。相同的绑定，相同的一切。只是文字不同。

所以，我真的认为这是一个非常糟糕的方法。相反，我宁愿只链接资源包中的所有文本或类似的东西。只是一个带有文本字符串的文件，它在运行时从适当的语言资源链接进来。那么你在文本中只有“麻烦”的链接，这真的没有任何乐趣。但是，您可以在 UI 上进行一次更改，而无需一遍又一遍地执行相同的步骤 25 次。每个笔尖都有一个新的绑定。那将是多么可怕！

现在，请告诉我我错了。苹果不会假设我们做了这么疯狂的事情吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-28T14:37:48.850

本地化情况并不理想。尽管 Cocoa UI 元素在其大小上支持一些动态灵活性（ausoizing 标志），但很难将它们排列在视图中以适应任何大小的文本。

正如 Heng-Cheong 指出的那样，这通常意味着需要在每个本地化的基础上对布局进行一些调整。Apple 使用与您的开发人员工具捆绑在一起的名为“ibtool”的工具支持称为增量本地化的过程。这个过程远非直观，并且似乎有一些细微的错误，但它有助于使该过程比手动单独维护 25 个不同的 nib 更容易。该过程主要涉及将您对主笔尖所做的更改映射到其他本地化笔尖。Apple 更详细地描述了该过程：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html)

为了避免这个痛苦的过程，有些人采取了不同的方法。如果您在视图布局上妥协，您可以实现每个 UI 元素都容纳最大的本地化字符串的情况。使用文本字段等的对齐功能，您可以安排一个可接受的布局，尽管使用最大字符串进行本地化所需的额外间距通常会导致字符串最短的语言的布局不太理想。如果您采用这种方法，您需要设计您的 nib，以便控制器类在运行时使用正确的本地化字符串填充 nib 的 UI 元素。

最后，一些开发人员甚至将他们自己的重新布局应用到 nib 中的元素，针对已设置在它们上的字符串的大小优化它们。这将是上述策略的改进，其中使用单个笔尖并在运行时进行操作以达到所需的效果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-28T14:23:38.807

有时，本地化不仅涉及替换文本，还涉及布局更改。例如，一种语言环境/语言中的字符串可能比另一种语言中的字符串长得多，从而迫使布局发生变化。从右到左的语言通常也意味着布局的一些变化。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-28T14:53:43.227

在前两个答案的基础上，有一个名为[iLocalize](http://www.arizona-software.ch/ilocalize/)的工具，旨在使该过程比 ibtool 更容易（而且它比 ibtool 更老）。我自己从未使用过它，但我的朋友 Evan 在 Adium 和 Growl 上都使用它并且喜欢它。

# performance - 启动多个客户端连接时在 .net35 中使用 AsyncSockets 的好模式是什么

> ID：598022
> 
> 赞同：0
> 
> 时间：2009-02-28T13:27:05.247
> 
> 标签：performance, .net-3.5, sockets, asynchronous

我正在重新构建一个 IM 网关，并希望利用 .net35 的 AsyncSockets 中的新性能特性。

我现有的实现只是根据需要创建数据包并将来自用户的 IM 请求转发到各种 IM 网络，为每个连接的用户会话（套接字）处理请求/响应流。

我现在不得不使用 IasyncResult 并且你知道它不是很漂亮或可扩展的。

我的困惑基本上是这样的：

1) 在 3.5 中使用新的 Begin/End 和 SocketAsyncEventArgs 时，我们还需要为每个套接字创建一个 SocketAsyncEventArgs 吗？

2）我们是否通过预初始化例如 20000 个客户端连接来获得什么，因为我们知道每台服务器的预期 max_connections 是 20000

3）我们是否仍然需要使用 LOH（大对象堆）分配的字节 [] 来处理接收数据，如 MSDN 上的 SocketServers 示例所示，我们不是按照说法构建服务器，但仍在处理大量独立接收每个连接的插座。

4）对于我想要实现的目标，也许有一个更好的模式？

提前致谢。

查尔斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-27T04:48:59.730

1) IAsyncResult/Begin/End 是与使用 SocketAsyncEventArgs 的“xAsync”方法完全不同的系统。你最好使用 SocketAsyncEventArgs 并完全放弃 Begin/End。

2）不是真的。初始化一个较小的数字（50？100？）并使用中间类（即/“资源池”）来管理它们。例如，随着更多请求的到来，将池再增加 50 或 100 个。困难的部分是随着资源需求的下降有效地“缩减”池中项目的数量。大量的sockets/buffers/etc会消耗大量的内存，所以最好只在服务器需要时分批分配。

3）不需要使用它，但它仍然是一个好主意。在每次调用期间，缓冲区仍将被“固定”。

# c++ - 如何为动态数组实现 operator[]？

> ID：598036
> 
> 赞同：1
> 
> 时间：2009-02-28T13:44:30.243
> 
> 标签：c++, arrays, dynamic-data

我需要自己实现一个动态数组才能在简单的内存管理器中使用它。

```
struct Block {       
    int* offset;
    bool used;
    int size;
    Block(int* off=NULL, bool isUsed=false, int sz=0): offset(off), used(isUsed), size(sz) {}
    Block(const Block& b): offset(b.offset), used(b.used), size(b.size) {}
};

class BlockList {
    Block* first;
    int size;
public:
    BlockList(): first(NULL), size(0) {}
    void PushBack(const Block&);
    void DeleteBack();
    void PushMiddle(int, const Block&);
    void DeleteMiddle(int);
    int Size() const { return size; }
    void show();
    Block& operator[](int);
    Block* GetElem(int);
    void SetElem(int, const Block&);
    ~BlockList();
}; 
```

我需要超载`operator[]`。

```
Block& BlockList::operator\[\](int index) {
    try {
        if (index >= size)
            throw out_of_range("index out of range");
        else 
            return (first[sizeof(Block)*index]);
    }
    catch(exception& e) {
        cerr << e.what() << endl;
    }
}

void BlockList::PushBack(const Block& b) {
    if(!size) 
        first = new Block(b);
    else {
        Block* temp = new Block[size + 1];
        int i = 0;
        for (i = 0; i < size; i++) 
            temp[sizeof(Block)*i] = this->operator[](i);
        delete []first;
        temp += sizeof(Block);
        temp->offset = b.offset;
        temp->size = b.size;
        temp->used = b.used;
        first = temp;
    }
    size++;
} 
```

当我使用`PushBack`push第一个元素时，它工作正常，但是当涉及到第二个，第三个，......时，程序并没有崩溃，而是显示了我没想到的结果。

这是我获取数组内容的方法：

```
void BlockList::show() {
    for (int i = 0; i < size; i++) {
        Block current(operator[](i));
        cout << "off: " << current.offset << " size: " << current.size << endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-28T13:50:14.643

*first*是一个*Block*指针，所以你只需要传入*index*。

首先阻止*；...

```
first[0] //returns the first element
first[1] //returns the second element 
```

在您的示例中，您在第一次建立索引时传递了太高的索引值，因为您在内部使用了 sizeof。

更正的代码：

```
Block& BlockList::operator[](int index) {
    try {
        if (index >= size)
            throw out_of_range("index out of range");
        else 
            return (first[index]);//<--- fix was here
    }
    catch(exception& e) {
        cerr << e.what() << endl;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-28T13:52:45.527

数组知道它的元素有多大，所以你不必用`sizeof(Block)`. 只需`i`用作索引。

On a related note, the [C++ FAQ Lite](http://www.parashift.com/c++-faq-lite/operator-overloading.html) has a great section on operator overloading that covers all kinds of useful stuff.

# quickbooks - Quickbooks：使用 QBDSK 向发票添加负值

> ID：598037
> 
> 赞同：3
> 
> 时间：2009-02-28T13:44:45.703
> 
> 标签：quickbooks

有没有办法将包含负金额的行项目添加到现有发票？

我正在使用 QBSDK7 和 QB Enterprise。（如果重要的话.Net 3.5）

我们试图做的是自动化我们创建发票的方式。我们已经在提取员工的时间并将其应用到正确的发票上，但是当我们使用

```
InvoiceLineMod.Amount.SetValue(-1234) 
```

它失败并出现错误“交易必须为正”

我还尝试添加一个负数的服务项目并给它一个正数，我得到了相同的结果。

这似乎很简单，因为我们在过去 10 年一直在手动执行此操作。我猜这有人为的限制。

需要考虑的一些事项： 信用备忘录不好，因为我们需要在同一页面上显示减少的确切细节。

在大多数情况下，我们还没有付款申请。

这需要在应用任何保持器之前完成。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-09-11T11:47:04.403

你能显示你用来修改发票的完整代码吗？您还可以显示您收到的确切错误消息吗？

有*可能*，但您需要确保您使用折扣项目作为您的 ItemRef 类型（服务项目*将不起作用*），并且您需要确保整个交易是一个正数.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-10T15:52:57.200

有时我们的应用程序必须将发票调整为负数。我已经能够使用以下代码添加否定行项目。我必须设置数量和费率，而不是设置数量。

```
IInvoiceLineAdd ila = ia.ORInvoiceLineAddList.Append().InvoiceLineAdd;
ila.ItemRef.ListID.SetValue(GetQBID(JobKey));
ila.Desc.SetValue("Adjustment");
ila.Quantity.SetValue(1);
ila.ORRatePriceLevel.Rate.SetValue(-1.00); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-06-22T15:45:22.990

Quickbooks 不允许您过帐余额为负数的发票。如果您尝试通过 UI 执行此操作，它会提示您创建贷项通知单。（反之亦然，如果您尝试使用贷项通知单。）

您可以在行项目中输入负数量和/或价格，但发票总额必须 >= 0 否则不会过帐（即添加其他行项目以抵消负金额）。

解决方案*是*使用贷项通知单。您的客户端处理将更加复杂，但它是 Quickbooks 的唯一选择。

# sql - 查询存储过程的结果

> ID：598041
> 
> 赞同：7
> 
> 时间：2009-02-28T13:52:25.153
> 
> 标签：sql, stored-procedures, sybase

我有一个返回大量结果的存储过程，并且想要一种比复制/粘贴到 excel 或其他内容更好的调试/解析结果的方法 - 有没有办法将过程的结果传递到查询中？例如，如果过程调用类似于：

```
exec database..proc 'arg1','arg2','arg3' 
```

我的想法是做类似的事情：

```
select distinct column1 from 
(exec database..proc 'arg1','arg2','arg3') 
```

这显然不起作用，否则我不会在这里。如果重要的话，这适用于 sybase 数据库。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-28T14:22:26.767

下面的代码在 MS SQL 2005 中工作。我现在没有安装 Sybase 来测试它。如果它在 Sybase 中工作，您可以在存储过程之外使用临时表（或永久表），这样您就不必更改要测试的代码（通常不是一个很好的测试过程。）

```
CREATE TABLE dbo.Test_Proc_Results_To_Table
(
    my_id       INT         NOT NULL,
    my_string   VARCHAR(20) NOT NULL
)
GO

CREATE PROCEDURE dbo.Test_Proc_Results_To_Table_Proc
AS
BEGIN
    SELECT
        1 AS my_id,
        'one' AS my_string
END
GO

INSERT INTO dbo.Test_Proc_Results_To_Table (my_id, my_string)
EXEC dbo.Test_Proc_Results_To_Table_Proc
GO

SELECT * FROM dbo.Test_Proc_Results_To_Table
GO 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-04T23:29:14.937

在 SQL Anywhere 10 和 11 中（不知道您要询问的是 ASA 还是 ASE）：

```
SELECT DISTINCT Column1
FROM procName(parameter1, parameter2, parameter3); 
```

我没有 ASE，我不确定这是否适用于早期的 ASA 版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-28T14:04:25.513

您可以在 sp 中创建一个临时表 (#temp) 并在其中填充结果集。您可以稍后从同一会话的同一临时表中进行选择。（或者使用 ##temp 语法在 sybase 中使用全局临时表）

这是因为您想要做的（从 exec sp 中选择 *）在 sybase 中无法直接实现

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-28T15:09:13.347

是否可以将存储过程重写为返回表的函数？在 SQL Server 上，这当然是可能的。然后你可以做...

```
select
    <any columns you like>
from
    dbo.myFunc( 'foo', 'bar', 1 )
where
    <whatever clauses you like>
order by
    <same> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-28T15:25:52.137

我不熟悉 Sybase，但在 MySQL 中，您可以使用该`IN`参数为所有这些编写一个 SQL 查询。前任：

`select distinct column1 from table where column1 in (your_first_query_with_all_the_arguments)`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-02T17:46:28.927

解决此问题的唯一真正方法是在数据库中创建一个表来存储临时值。

假设存储过程选择 Column1、Column2 和 Column3。

有一个包含 Column1、Column2、Column3 的表 (tempTable)，并将您的存储过程设置为以下内容：

```
CREATE PROCEDURE database..proc
AS
BEGIN
  DELETE FROM tempTable

  INSERT INTO tempTable (Column1, Column2, Column3)
  SELECT Column1, Column2, Column3 
  FROM Table1 
END

then for your sql code to select the values have:

exec database..proc
SELECT Column1, Column2, Column3 
FROM tempTable 
```

我希望这会有所帮助，我之前遇到过类似的问题，这是我能解决的最好的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-22T09:09:17.713

我现在没有安装 Sybase，所以这里的一些小的语法方面可能是错误的 - 我无法检查，但我过去广泛使用它：**select** * **into** #temp **from** proc_name('arg1','arg2' ,'arg3') 应该使用正确的列自动为您创建本地临时表。在同一个事务或开始/结束块中，您可以通过**select** * **from** #temp 访问#temp。

# sharepoint - 使用 Internet Explorer 到 Sharepoint 站点的文件上传/下载问题

> ID：598045
> 
> 赞同：2
> 
> 时间：2009-02-28T13:55:10.060
> 
> 标签：sharepoint, internet-explorer, firefox, file, upload

第一个可以帮助我理解这一点的人的芝士汉堡。我在使用 Telerik 的 RadUpload 上传文件的 Sharepoint 应用程序中有一个页面。这已经工作了几个月；上周它停止工作（在 Internet Explorer 中，这个细节很重要）。在与同事讨论问题后，我尝试使用 Firefox 上传；有效。不仅如此，来自 Internet Explorer 的所有后续上传都开始工作。快进一小时，上述同事在另一个 Sharepoint 站点上运行在不同的服务器上，下载时遇到问题（使用 Internet Explorer）。半认真半聪明地说，我说“在 Firefox 中试试看”。不仅如此，Internet Explorer 中的所有后续下载都有效！他在另一台机器上重现了这种行为。我担心这是浏览器问题。

一个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-03T03:41:51.883

IE 在尝试连接时将尝试向它知道位于其本地 Intranet 区域中的服务器提供凭据（取决于“仅在 Intranet 区域中自动登录”的设置）。

Firefox 只会在出现提示时提供凭据，并且通常会通过弹出一个框来询问您（除非您已配置站点列表以使其始终向其提供 NTLM 凭据）。

我在 Sharepoint 中看到过类似的案例，您可以通过使用 Firefox 登录来使 IE 正常工作。我推测这是由于对“经过身份验证的用户”的远程资源的许可，并且您正在使您的用户通过强制登录进行身份验证。我们最终将“仅在 Intranet 区域自动登录”设置为“提示”并且它起作用了。我的理论是，由于某种原因，它没有检测到该站点位于本地 Intranet 区域中。如果您没有访问其中没有 . 的域，请尝试设置您的本地 Intranet 站点策略以匹配 Sharepoint 服务器的完整域，而不仅仅是 *.example.com - 我已经读过这可以提供帮助.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-02T02:09:15.233

是不是像 IE 没有重新下载丢失缓存的 .js 文件一样简单，也许，firefox 确实下载了，然后让 IE 工作？

调试起来很麻烦。

# java - Java (J2ME) 将 Image 转换为 byte[]，然后再转换回 Image

> ID：598046
> 
> 赞同：3
> 
> 时间：2009-02-28T13:57:34.097
> 
> 标签：java, image, byte

我正在尝试将 Image 对象转换为字节数组，然后再转换回 Image（以便我可以将图像存储在 Apache Derby 数据库中的 blob 对象中）。

我可以将图像转换为字节数组（下面的代码），但我无法将字节转换回图像。更复杂的是，我使用的是 J2ME，所以我不能使用 javax.image.*。你能帮我吗？

谢谢

```
package six.util;
import java.awt.Image;
import java.awt.image.BufferedImage;
import java.awt.image.ImageObserver; 
import java.awt.Component; 
import java.awt.MediaTracker;
import java.awt.Graphics;
import java.awt.image.DataBufferByte;
import java.awt.image.WritableRaster;
import java.awt.GraphicsConfiguration;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.image.PixelGrabber;
import java.util.ArrayList;

public class ImageConverter extends Component
{

private MediaTracker mediaTracker;
private Image image;

private ImageConverter(Image image)
{
    super();
    this.mediaTracker = new MediaTracker(this);
    this.mediaTracker.addImage(image, 0);
    this.image = image;
}

private BufferedImage convert()
{
    /*
     * Have to wait for image to load.
     */
    try
    {
        this.mediaTracker.waitForID(0);
    }catch(InterruptedException e)
    {

    }
    System.out.println("-1");

    GraphicsConfiguration graphicsConfig = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration();
    BufferedImage bimage = graphicsConfig.createCompatibleImage(this.image.getWidth(null),this.image.getHeight(null));
    System.out.println("-2");
    Graphics g = bimage.getGraphics();
    g.drawImage(image, 0, 0, null);
    return bimage;
}

private static byte[] convertIntToByteArray(int integer)
{
    byte[] bytes = new byte[4];
    bytes[0] =(byte)( integer >> 24 );
    bytes[1] =(byte)( (integer << 8) >> 24 );
    bytes[2] =(byte)( (integer << 16) >> 24 );
    bytes[3] =(byte)( (integer << 24) >> 24 );
    return bytes;
}

private static int convertByteArrayToInt(byte[] bytes)
{
    return (bytes[0] << 32) | (bytes[1] << 24) | (bytes[2] << 16) | (bytes[3] << 8) | bytes[4];
}

private static byte[] convertIntArrayToByteArray(int[] integers)
{
    byte[] bytes = new byte[integers.length*4];
    for (int index = 0; index < integers.length; index++)
    {
        byte[] integerBytes = convertIntToByteArray(integers[index]);
        bytes[index*4] =        integerBytes[0];
        bytes[1 + (index*4)] = integerBytes[1];
        bytes[2 + (index*4)] = integerBytes[2];
        bytes[3 + (index*4)] = integerBytes[3];
    }
    return bytes;
}

private static int[] convertByteArrayToIntArray(byte[] bytes)
{
    ArrayList integers = new ArrayList();
    for (int index = 0; index < bytes.length; index += 4)
    {
        byte[] fourBytes = new byte[4];
        fourBytes[0] = bytes[index];
        fourBytes[1] = bytes[index+1];
        fourBytes[2] = bytes[index+2];
        fourBytes[3] = bytes[index+3];
        int integer = convertByteArrayToInt(fourBytes);
        integers.add(new Integer(integer));
    }
    int[] ints = new int[bytes.length/4];
    for (int index = 0; index < integers.size() ; index++)
    {
        ints[index] = ((Integer)integers.get(index)).intValue();
    }
    return ints;
}

public static byte[] convertToBytes(Image image)
{
    System.out.println("A");
    ImageConverter converter = new ImageConverter(image);
    System.out.println("B");
    BufferedImage bufferedImage = converter.convert();
    System.out.println("C");
    PixelGrabber pixelGrabber = new PixelGrabber(image,0,0,bufferedImage.getWidth(),bufferedImage.getHeight(),true);
    System.out.println("D");
    try
    {
        if(pixelGrabber.grabPixels())
        {
            Object pixels = pixelGrabber.getPixels();
            if (pixels instanceof byte[])
            {   
                return (byte[])pixels;
            }
            return convertIntArrayToByteArray((int[])pixels);
        }
    }catch(InterruptedException e)
    {
    }
    return null;
}

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-20T18:02:15.373

我不知道javame，但这不起作用吗？

```
javax.microedition.lcdui.Image.createImage(new ByteArrayInputStream(byte[])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-28T16:36:52.590

[要重新创建图像，您可以使用 Image 类 ( http://java.sun.com/javame/reference/apis/jsr118/](http://java.sun.com/javame/reference/apis/jsr118/) )中的 createRGBImage 方法，但请注意，您为每个像素使用 4 个字节图片。一个宽度为 200 x 200 像素的图像总共有 40000 像素，这将占用移动设备中 160KB 的内存。

我以前在 J2ME 中处理过图像，但只将图像从服务器发送到客户端。在这种情况下，您可以更改服务器上图像的分辨率（您拥有执行此操作的代码和原始能力），将其编码为 JPEG，然后将其发送到客户端。Image.createImage(...) 方法可以创建运行应用程序的 J2ME 引擎支持的任何编码格式的图像。我相信 JPEG 将永远被接受。

即使您需要这些图像以备将来使用，您也可以将服务器返回的 byte[] 缓冲区保存在 Record Store 中，然后使用它。

# c# - 并行端口的输入和输出

> ID：598053
> 
> 赞同：-1
> 
> 时间：2009-02-28T14:07:10.483
> 
> 标签：c#, windows, parallel-port

我基本上想获得并行端口输入并希望在不使用 inpout32.dll 的情况下在 c#.net 中同时提供输出。谁能指导我如何在没有inpout32.dll的情况下控制c#中的并行端口。以及如何并行获取输入和输出？我在窗口操作系统中将数据引脚用于输出，将控制和状态引脚用于输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-28T14:55:02.367

直到给出它无法工作的原因，只需使用平台提供给您的工具（DLL 等）。

# sql-server-2005 - 如何使用触发器将记录插入到多个表中？

> ID：598057
> 
> 赞同：1
> 
> 时间：2009-02-28T14:10:02.740
> 
> 标签：sql-server-2005

我有两张桌子。

我想同时在两个表上插入相同的记录。
即，当我为第一个表插入一条记录时，同样的记录也使用触发器插入到第二个表中。

你在这个过程中有什么经验/建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-28T14:17:32.690

如果您使用的是存储过程，您可以轻松管理它

```
CREATE PROCEDURE sp_Insert
@Value varchar(10)
AS
insert into table1 (...,...) values (@value,...)
insert into table2 (...,...) values (@value,...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-28T16:33:52.817

我建议在触发器上使用 Erik 的方法。触发器往往会导致性能问题，而且很多时候，您会忘记触发器的存在，并获得意外行为。但是，如果您确实想使用触发器，它将起作用。这是一个例子：

```
CREATE TRIGGER trgTest ON Test
FOR INSERT
AS
INSERT Test2
     (Id, value)
SELECT Id, Value 
FROM Inserted 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-06-15T05:19:41.170

可以使用光标概念！

```
CREATE OR REPLACE TRIGGER bi_order
BEFORE INSERT
ON ord
REFERENCING OLD AS OLD NEW AS NEW
FOR EACH ROW
WHEN (NEW.payment_type = 'CREDIT')
DECLARE
CURSOR cur_check_customer IS
   SELECT 'x'
   FROM   customer
   WHERE  customer_id = :NEW.customer_id
   AND    credit_rating = 'POOR';
lv_temp_txt          VARCHAR2(1);
lv_poor_credit_excep EXCEPTION;
BEGIN
OPEN cur_check_customer;
FETCH cur_check_customer INTO lv_temp_txt;
IF (cur_check_customer%FOUND) THEN
   CLOSE cur_check_customer;
   RAISE lv_poor_credit_excep;
ELSE
   CLOSE cur_check_customer;
END IF;
EXCEPTION
WHEN lv_poor_credit_excep THEN
   RAISE_APPLICATION_ERROR(-20111, 'Cannot process CREDIT ' ||
      'order for a customer with a POOR credit rating.');
WHEN OTHERS THEN
   RAISE_APPLICATION_ERROR(-20122, 'Unhandled error occurred in' ||
      ' BI_ORDER trigger for order#:' || TO_CHAR(:NEW.ORDER_ID));
END bi_order; 
```

# visual-studio - 在 Visual Studio 中使用标签包装选定文本的宏

> ID：598062
> 
> 赞同：8
> 
> 时间：2009-02-28T14:18:49.520
> 
> 标签：visual-studio, ide, macros

我意识到我可能有点懒惰，但是有谁知道 Visual Studio 宏，我可以在其中选择 Visual Studio IDE 中的一些文本，单击一个按钮，然后让它用标签包裹选定的文本？它会产生类似的东西：

```
<strong>My Selected Text</strong> 
```

我什至愿意创建一个宏，只是不确定从哪里开始！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-02-28T19:08:21.510

这样做的代码相当简单：

```
Sub SurroundWithStrongTag()
    DTE.ActiveDocument.Selection.Text = "<strong>" + DTE.ActiveDocument.Selection.Text + "</strong>"
End Sub 
```

现在，如果您对宏不太了解，这里是如何添加它：

*   首先你需要打开宏IDE，点击Tools->Macros->Macros IDE...
*   接下来，我们将为您的自定义宏添加一个模块。在项目资源管理器中右键单击“MyMacros”，单击“添加”->“添加模块...”，输入适当的名称，然后单击“添加”。
*   现在将函数粘贴到模块中，为您想要的任何其他标签制作副本
*   保存并关闭宏 IDE

要将宏连接到按钮：

*   单击工具->自定义...
*   单击新建...，键入适当的名称，单击确定。应该可以看到一个空的工具栏（您可能需要移动窗口才能看到它）
*   单击命令选项卡，然后在类别中选择“宏”
*   找到之前创建的宏并将它们拖到工具栏上
*   右键单击按钮以更改设置（例如显示图标而不是文本）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-12-07T19:49:45.613

我知道这是一个老话题，但也许有人觉得这很有用。

我有以下设置：

```
Sub WrapInH1()
    WrapInTag("h1")
End Sub

Sub WrapInP()
    WrapInTag("p")
End Sub

Sub WrapInStrong()
    WrapInTag("strong")
End Sub

Sub WrapInTag()
    WrapInTag("")
End Sub

Sub WrapInTag(ByVal tagText As String)
    EnableAutoComplete(False)

    If tagText.Length = 0 Then
        tagText = InputBox("Enter Tag")
    End If

    Dim text As String
    text = DTE.ActiveDocument.Selection.Text
    text = Regex.Replace(text, vbCrLf & "$", "") 'Remove the vbCrLf at the end of the line, for when you select the line by clicking in the margin, otherwise your closing tag ends up on it's own line at the end...

    DTE.ActiveDocument.Selection.Text = "<" & tagText & ">" & text & "</" & tagText & ">" & vbCrLf
    EnableAutoComplete(True)
End Sub

Private Sub EnableAutoComplete(ByVal enabled As Boolean)
    Dim HTMLprops As Properties
    Dim aProp As EnvDTE.Property
    HTMLprops = DTE.Properties("Texteditor", "HTML Specific")
    aProp = HTMLprops.Item("AutoInsertCloseTag")
    aProp.Value = enabled
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-02-08T13:21:15.943

```
Dim HTMLprops As Properties = DTE.Properties("Texteditor", "HTML Specific")

Dim aProp As EnvDTE.Property = HTMLprops.Item("AutoInsertCloseTag")

aProp.Value = False 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-29T19:05:34.423

[原始答案](https://stackoverflow.com/questions/191463/how-do-i-wrap-a-selection-with-an-html-tag-in-visual-studio/36803516#36803516)

如果您想要一个开箱即用的解决方案，Visual Studio 2015 带有一个新的快捷方式，Shift+Alt+W 用 div 包装当前选择。此快捷方式使文本“div”处于选中状态，使其可以无缝更改为任何所需的标签。这与自动结束标签更换相结合，可提供快速解决方案。

### 例子

```
Shift+Alt+W > strong > Enter 
```

# javascript - 基于 XULRunner 的应用程序中的页面重新加载和格式错误的 HTML 问题

> ID：598069
> 
> 赞同：1
> 
> 时间：2009-02-28T14:24:57.587
> 
> 标签：javascript, iframe, xulrunner

我正在 XULRunner 上编写一个显示来自网络的 HTML 页面的应用程序：

我有一个非常简单的 XUL 文件，其中只是填充窗口并加载本地 HTML 文件。在我的 HTML 中，我有一个 iframe 来加载内容。XULRunner 最酷的地方在于我可以访问 iframe 的许多内容（显示页面标题、图像......）

一点都不酷的是，与我的应用程序在浏览器中运行时的情况不同，我的一些页面有两个大错误：

1）一些（很多？）页面（如“yahoo.fr”的HTML内容格式错误，特别是对于标签未关闭的标签（IMG标签没有最后的/>）。==>这不会打扰Firefox但在我的应用程序中，XULRunner 不会对 HTML 进行解码，因此会在页面中显示粗略的 HTML 源代码。

2）在某些页面上，比如现在 nytimes.com 的主页、bloglines.com 和 yahoo.fr 的登录页面，“某事”发生在 iframe 中，导致我的标签的 src（那是我的应用那应该永远不会改变）来改变从而关闭我的应用程序。==> 我猜这可能与尝试在另一个窗口中打开有关。

有没有人有解决这两个问题的线索？更好的 XULRunner 版本（我使用的是 1.9.1）？XUL 选项阻止页面在新窗口中打开？其他的？

谢谢你的帮助，

J。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-10-31T03:28:40.987

而不是 a `<iframe/>`，使用 a `<browser type="content-primary"/>`。这将解决您的第二个问题（通过让系统知道该框架的内容属于网络并且不应该改变您）。

第一个问题实际上取决于加载方式。它们是来自 http 还是来自以前保存的本地文件？你对服务器有用的 mime 类型和东西吗？或者，如果是本地的，你最终会得到什么文件扩展名？

# jquery - 这个网站的加载脚本是如何实现的？

> ID：598071
> 
> 赞同：0
> 
> 时间：2009-02-28T14:27:01.623
> 
> 标签：jquery

我发现这个很棒的网站在页面顶部有一个加载栏。加载栏就像浏览器的加载栏，但我觉得它非常漂亮，并希望在我的页面中也实现它。

[![替代文字](https://i.stack.imgur.com/HCWww.jpg)](https://i.stack.imgur.com/HCWww.jpg)

[http://www.cssjockey.com/](http://www.cssjockey.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-28T14:40:08.533

如果您使用[firebug](http://getfirebug.com/)查看该站点，您可以看到作者正在使用 jQuery JavaScript 框架来实现加载栏。

相关代码，可在该部分的`http://www.cssjockey.com/wp-content/themes/cj_pro/scripts/custom.js`脚本中找到`<head>`

```
$(window).load(function(){
$("#loading").addClass("hidden");
});
 $("#loading").ajaxStart(function(){
 $(this).show();
 });
 $("#loading").ajaxStop(function(){
 $(this).hide();
 }); 
```

`loading`包含加载 gif 图像的 div 的 id 在哪里

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-28T14:40:03.387

他正在使用 jQuery 的[ajaxStart](http://docs.jquery.com/Ajax/ajaxStart)和[ajaxStop](http://docs.jquery.com/Ajax/ajaxStop)

```
$("#loading").ajaxStart(function(){ 
  $(this).show(); 
});
$("#loading").ajaxStop(function(){ 
  $(this).hide(); 
}); 
```

这基本上允许他在进行任何异步调用时显示此加载图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-28T14:38:07.197

**编辑：**我的回答是错误的，我在考虑不同的背景下回答。但是，我要离开它，因为当您需要显示加载/进度条时，该信息可能很有用。

他正在使用：[http](http://www.filamentgroup.com/lab/update_automatically_preload_images_from_css_with_jquery/) ://www.filamentgroup.com/lab/update_automatically_preload_images_from_css_with_jquery/ 。

然而，他并没有使用它的全部功能（在上面的 URL 中查看演示）。加载栏只是一个动画 gif 文件。我想你可以在[http://ajaxload.info](http://ajaxload.info)得到它。

希望有帮助。:)

# c# - 如何使用 C# 检索网页？

> ID：598075
> 
> 赞同：21
> 
> 时间：2009-02-28T14:32:44.293
> 
> 标签：c#, http

如何使用 C# 检索网页并将 html 显示到控制台？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2009-02-28T14:34:55.643

使用`System.Net.WebClient`类。

```
System.Console.WriteLine(new System.Net.WebClient().DownloadString(url)); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-02-28T14:38:05.073

我举了一个例子：

```
WebRequest r = WebRequest.Create("http://www.msn.com");
WebResponse resp = r.GetResponse();
using (StreamReader sr = new StreamReader(resp.GetResponseStream()))
{
    Console.WriteLine(sr.ReadToEnd());
}

Console.ReadKey(); 
```

这是另一种选择，这次使用 WebClient 并异步执行：

```
static void Main(string[] args)
{
    System.Net.WebClient c = new WebClient();
    c.DownloadDataCompleted += 
         new DownloadDataCompletedEventHandler(c_DownloadDataCompleted);
    c.DownloadDataAsync(new Uri("http://www.msn.com"));

    Console.ReadKey();
}

static void c_DownloadDataCompleted(object sender, 
                                    DownloadDataCompletedEventArgs e)
{
    Console.WriteLine(Encoding.ASCII.GetString(e.Result));
} 
```

第二个选项很方便，因为它不会阻塞 UI 线程，从而提供更好的体验。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-01T07:37:11.413

```
// Save HTML code to a local file.
WebClient client = new WebClient ();
client.DownloadFile("http://yoursite.com/page.html", @"C:\htmlFile.html");

// Without saving it.
string htmlCode = client.DownloadString("http://yoursite.com/page.html"); 
```

# python - 为什么 Python 中的 @foo.setter 对我不起作用？

> ID：598077
> 
> 赞同：160
> 
> 时间：2009-02-28T14:33:50.873
> 
> 标签：python, decorator, new-style-class

所以，我在 Python 2.6 中使用装饰器，但在让它们工作时遇到了一些麻烦。这是我的类文件：

```
class testDec:

    @property
    def x(self): 
        print 'called getter'
        return self._x

    @x.setter
    def x(self, value): 
        print 'called setter'
        self._x = value 
```

我认为这意味着将其视为`x`属性，但在 get 和 set 上调用这些函数。所以，我启动了 IDLE 并检查了它：

```
>>> from testDec import testDec
from testDec import testDec
>>> t = testDec()
t = testDec()
>>> t.x
t.x
called getter
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "testDec.py", line 18, in x
    return self._x
AttributeError: testDec instance has no attribute '_x'
>>> t.x = 5
t.x = 5
>>> t.x
t.x
5 
```

显然，第一次调用按预期工作，因为我调用了 getter，并且没有默认值，它失败了。好的，好的，我明白了。但是，对 assign 的调用`t.x = 5`似乎创建了一个新属性`x`，现在 getter 不起作用！

我错过了什么？

* * *

## 回答 #1

> 赞同：319
> 
> 时间：2009-02-28T14:43:40.770

您似乎在 python 2 中使用了[经典的旧式类](https://docs.python.org/2/glossary.html#term-classic-class "术语经典类")。为了使[属性](https://docs.python.org/2/library/functions.html#property "财产")正常工作，您需要使用[新式类](https://docs.python.org/2/glossary.html#term-new-style-class "术语新式类")（在 python 2 中，您必须[继承自`object`](https://docs.python.org/2/reference/datamodel.html#newstyle "新风格")）。只需将您的课程声明为`MyClass(object)`：

```
class testDec(object):

    @property
    def x(self): 
        print 'called getter'
        return self._x

    @x.setter
    def x(self, value): 
        print 'called setter'
        self._x = value 
```

有用：

```
>>> k = testDec()
>>> k.x
called getter
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/devel/class_test.py", line 6, in x
    return self._x
AttributeError: 'testDec' object has no attribute '_x'
>>> k.x = 5
called setter
>>> k.x
called getter
5
>>> 
```

另一个可能导致问题的细节是，这两种方法都需要相同的名称才能使属性起作用。**如果您使用这样的不同名称定义设置器，它将不起作用**：

```
@x.setter
def x_setter(self, value):
    ... 
```

还有一件事一开始并不完全容易发现，那就是顺序：**必须首先定义**吸气剂。如果你先定义 setter，你会得到 `name 'x' is not defined`错误。

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2013-06-30T23:20:33.407

对于在这里偶然发现此异常的其他人，请注意：两个函数需要具有相同的名称。如下命名方法将导致异常：

```
@property
def x(self): pass

@x.setter
def x_setter(self, value): pass 
```

而是给这两种方法同名

```
@property
def x(self): pass

@x.setter
def x(self, value): pass 
```

同样重要的是要注意声明的顺序很重要。getter 必须在文件中的 setter 之前定义，否则您将得到一个`NameError: name 'x' is not defined`

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2009-02-28T14:43:22.567

您需要使用通过从对象派生类来执行的新型类：

```
class testDec(object):
   .... 
```

然后它应该工作。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-02-11T21:23:33.210

如果有人从谷歌来这里，除了上面的答案，我想补充一点，在`__init__`根据[这个答案](https://stackoverflow.com/a/3942118/808734)从你的类的方法调用 setter 时需要 特别注意：

```
class testDec(object):                                                                                                                                            

    def __init__(self, value):
        print 'We are in __init__'
        self.x = value # Will call the setter. Note just x here
        #self._x = value # Will not call the setter

    @property
    def x(self):
        print 'called getter'
        return self._x # Note the _x here

    @x.setter
    def x(self, value): 
        print 'called setter'
        self._x = value # Note the _x here

t = testDec(17)
print t.x 

Output:
We are in __init__
called setter
called getter
17 
```

# objective-c - 什么在objective-c / cocoa Nib中最好地描述了“文件的所有者”？

> ID：598082
> 
> 赞同：28
> 
> 时间：2009-02-28T14:39:33.747
> 
> 标签：objective-c, cocoa

不幸的是，Apple 文档中对 File's Owner 的解释非常简短。我知道它是一个代理对象。但是那个“文件的所有者”对象的真正意义是什么？到底有什么好处呢？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-03-11T09:09:44.757

Nib 文件通常被称为“冻干”并可以运行，它们是使您的应用程序更加模块化的好方法，可以减少内存使用。当应用程序需要其中的对象时，可以随时解冻 Nib 文件或将其加载到内存中。

每当一个 nib 文件解冻时，它都需要一个指向解冻它的对象的指针。该对象通常是文件的所有者。文件的所有者允许 nib 文件中的对象访问在 nib 文件解冻之前存在的对象。在某种程度上，文件的所有者充当了新加载对象和旧对象之间的桥梁。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-28T14:53:18.393

如果您阅读并了解 nib 加载过程，则更容易理解 File's Owner 参考的含义。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html)

Cocoa 的框架会自动为您处理许多 nib 加载，其中 Cocoa 自己的内置类之一用作管理或“拥有”nib 文件的实例化对象的控制器类。当您手动加载自己的 nib 时，您可以选择哪个类将作为文件的所有者。

在阅读 nib 加载过程时，请注意许多加载方法上的“owner:”参数。正是这个对象将作为文件所有者连接到您的 nib 文件中的对象

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-28T14:48:50.243

> 我知道它是一个代理对象。

它不是。这是一个真实的对象。笔尖中的图标只是在所有其他图标代表在笔尖中*存档*的对象的意义上的代理，而文件的所有者不是。但是 FO 不是您的应用程序中的代理对象。

> 但是那个“文件的所有者”对象的真正意义是什么？到底有什么好处呢？

它是拥有 nib 中对象的对象。

而已。仅此而已。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-28T16:04:08.457

解释它的最佳方法是通过一个示例来说明如何设置它。假设您有一个 NSWindowController 子类，它是首选项窗口的控制器。首选项窗口位于名为“首选项”的 NIB 中。

在您的 NSWindowController 子类中，您将拥有以下 init 方法：

```
- (id)init {
    if (self = [super initWithWindowNibName:@"Preferences"]) {
        //do initalisation
    }
    return self;
} 
```

这将初始化窗口控制器，将其与应用程序主包中名为“Preferences”的 nib 相关联。请注意，NIB 尚未加载（这将在您第一次在窗口控制器上调用 -window 时发生。

然后在 Preferences NIB 中单击 File's Owner 图标，然后转到 Inspector 的 Class Info 面板。在这里，您可以将类设置为您的窗口控制器类的名称（例如 PreferencesController）。这现在代表了您的窗口控制器的一个实例，因此您可以连接插座和操作。

在 IB 中编辑时，它只是对象的代理，就像您拖动到 NIB 的任何对象一样，但是当 NIB 加载时，它将被设置为您创建的窗口控制器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-28T14:48:31.947

[http://www.cocoadev.com/index.pl?FilesOwner](http://www.cocoadev.com/index.pl?FilesOwner)

> 本质上，加载 NibFile 的任何对象都将成为该 nib 文件的文件所有者。

# asp.net - asp.net中的消息框是什么

> ID：598086
> 
> 赞同：1
> 
> 时间：2009-02-28T14:40:37.767
> 
> 标签：asp.net

在 asp.net 中类似于消息框的内容

```
if (s != "null")
   MessageBox.Show("your in ");
else
   MessageBox.Show("wrong user "); 
```

我想在 C# 代码中替换消息框

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-28T14:43:25.700

asp.net 中没有这样的消息框。最接近这种功能的将是一个 javascript 警报框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-28T14:45:25.820

ASP.NET 是一种服务器端技术。整个 C#/VB/等。代码将在服务器上执行，响应（可能是 HTML/JS/...）将发送到客户端。

您可以发送必要的 Jscript 代码以在客户端上显示消息框。请注意，此代码不会立即执行，而是会发送到浏览器。浏览器将解释它并相应地显示消息框。

```
<script type='text/javascript'>
   alert('Hi');
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-28T14:44:05.823

没有直接的等价物。MessageBox 类是一个 Windows 窗体类。

在 ASP .NET 中，JavaScript 警报最常用于相同目的。

这在客户端上运行，因此如果您需要控制消息服务器端，则需要在生成的 html 中发出 javascript。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-28T14:47:34.567

对于确认，您可以使用ASP.NET AJAX Control Toolkit中的[确认按钮](http://www.asp.net/AJAX/AjaxControlToolkit/Samples/ConfirmButton/ConfirmButton.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-28T15:16:36.917

我发现了一种从 ASP.NET 中的代码隐藏发出 javascript 警报的相当有用的方法，并对其进行了一些修改。我不知道这是否是一个理想的解决方案，但您只需将该函数粘贴到您的代码隐藏中（示例在 VB 中）。

```
Private Sub MessageBox(ByVal msg As String)
    Dim lbl As New Label()
    lbl.Text = "<script type="text/javascript">" & Environment.NewLine & _
               "window.alert('" + msg + "')</script>"
    Page.Controls.Add(lbl)
End Sub 
```

要使用，您只需调用`MessageBox("Here is your Input")`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-28T15:19:03.400

您将使用客户端脚本管理器在页面加载时运行 Javascript，这会向用户显示一个警告框：

```
Page.ClientScript.RegisterStartupScript(Page.GetType(), "message", "window.alert('You are in.');", true); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-28T16:39:25.110

如果您希望用户确认某个操作，您可以使用按钮的 onclientclick 属性

```
<asp:button Id="btnConfirm" runat="server" Text="Confirm Me" OnClick="MyFunction" OnClientClick="return confirm('Are your sure?')" /> 
```

# sql-server - 保存/缓存存储过程结果以获得更好的性能？(SQL Server 2005)

> ID：598088
> 
> 赞同：1
> 
> 时间：2009-02-28T14:42:47.137
> 
> 标签：sql-server, sql-server-2005

我有一个 SP 已经在我的 2 个人身上工作过，但仍然需要 2 分钟或更长时间才能运行。有没有办法让这些预运行并存储在缓存或其他地方，所以当我的客户需要在网络浏览器中查看这些数据时，他不想上吊自己或我？

我离 DBA 不远，所以我有点受雇于我的人来为我解决这个问题，所以预先了解一点知识真的会帮助我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-28T14:48:17.233

如果运行确实需要那么长时间，您可以使用 SQL 代理安排进程运行，并将输出转到表中，然后将 Web 应用程序更改为读取表而不是执行存储过程。您必须决定运行刷新的频率，并处理刷新时出现的请求，但这也可以通过两个输出文件来处理，一个是实时文件，一个用于最新刷新。

但我会再看一下这个过程，看看执行计划，看看哪里慢，确保它没有进行全表扫描。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-28T15:18:06.493

此顺序的首选解决方案：

1.  分析查询并进行相应优化
2.  将其缓存在应用程序中（可以使用 httpRuntime.Cache（即使不是 asp.net 应用程序）
3.  缓存 SPROC 会在数据库中生成一个表，然后添加触发器以使缓存无效（删除表），因此对 SPROC 的调用将首先查看缓存表中是否有任何数据。如果没有，则运行 SPROC 并将结果存储在缓存表中，如果是，则从该表中返回数据。SPROC 的“源”表上的触发器只会从 CacheTable 中删除 * 以“清除缓存”（取决于您的 sproc 正在做什么及其依赖项，您甚至可以根据触发器部分更新缓存表, 但是所有这些很快就会变得难以维护...但是有时您必须做您必须做的...这种方法将允许缓存表根据需要自行更新。您将始终拥有最新的数据，而 SPROC 只会需要时运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-28T14:57:03.017

尝试“查询”菜单中的“在数据库引擎优化顾问中分析查询”。我通常将过程编写到一个新窗口，取出查询定义部分并尝试临时表、常规表和表变量的不同组合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-28T15:06:23.197

您可以将结果集缓存在应用程序中而不是数据库中，或者通过将数据表的实例保存在内存中，或者将其序列化到磁盘中。它返回多少行？在这里发布代码是否太长了？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-01T17:37:53.947

好的，首先，索引：

*   您在表上有哪些索引，执行计划是否使用它们？
*   您是否对所有外键字段都有索引？

其次，proc 是否使用以下任何性能杀手：

*   一个光标
*   子查询
*   用户定义的函数
*   选择 *
*   以通配符开头的搜索条件

第三

*   可以将 where 子句重写为[sargeable](https://stackoverflow.com/questions/799584/what-makes-a-sql-statement-sargable)吗？写几乎所有东西的方法不止一种，有些方法比其他方法表现更好。

我建议你给你的开发者买一些关于性能调优的书。

可能您的 proc 可以修复，但如果没有看到代码，很难猜测问题可能是什么。

# database-design - 如何在磁盘或数据库上存储稀疏的可查询矩阵？

> ID：598089
> 
> 赞同：7
> 
> 时间：2009-02-28T14:42:59.960
> 
> 标签：database-design, data-structures

我需要在磁盘上存储一个稀疏矩阵。它就像一个具有数百万行和数千列的数据库表，其中许多或大多数列是空的。它需要是可查询的，例如在某些列上带有 WHERE 的 SQL SELECT。

我的具体要求是对 Java。一开始想用[Berkeley DB for Java](http://www.oracle.com/technology/documentation/berkeley-db/je/index.html "伯克利数据库")来模拟一个表，但是后来它不支持基于值的查询。

然后，我考虑使用常规的 SQL 数据库。例如，创建仅具有行 ID、列 ID 和值的架构。虚拟行将是具有相同 ID 的所有实际行。但是，这看起来像是数据库滥用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-28T14:59:08.737

阅读问题标题时，我首先想到的是每个 (x,y) 的数据库行，正如您在最后一段中所建议的那样。

另一件需要注意的是，数据库经常压缩行，特别是对于 NULL，所以直接的表示可能不会像你想象的那样浪费空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-28T14:55:31.880

这取决于您对“许多或大多数列为空”的定义，但这听起来是一种非常合理的方法，假设您确实需要随机访问。

如果您可以通过顺序处理（例如按行顺序扫描）来完成所有操作，那么平面文件将是另一个值得考虑的合理选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-28T14:58:21.937

Intersystems Cache 数据库在内部使用结构来存储数据，这些结构是稀疏的多维数组。也许检查一下。您可以查询它，并将其映射到 SQL 表。我不确定您是否可以直接从 java 访问 Intersystems Cache 中的多维数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-28T15:20:29.777

如果您只需要按照您所说的“在磁盘上”保存数据、读回并进行某些查询，您可能需要考虑简单地序列化您自己设计和选择的类。消除了对数据库基础设施的所有需求，但显然也排除了数据库实际上可以帮助您的许多事情，

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-30T15:43:16.127

最近，我对 key-value 类型的存储产生了兴趣，并且偶然发现了一篇描述 FriendFeed 如何使用 MySQL 实现类似需求的博客文章：

[http://bret.appspot.com/entry/how-friendfeed-uses-mysql](http://bret.appspot.com/entry/how-friendfeed-uses-mysql)

# linux - 您如何确定 bash ls 颜色的含义？

> ID：598107
> 
> 赞同：36
> 
> 时间：2009-02-28T14:53:27.080
> 
> 标签：linux, shell, ls, ls-colors

当您`ls`在 bash shell 中执行时，有时会有颜色表示不同的资源类型，您可以使用`--color`参数启用/控制它。

但是手册页和谷歌都没有提供这个问题的答案：

**这些颜色默认表示什么，如何显示当前系统使用的内容？**

* * *

***更新：***

到目前为止，感谢大家的回答，但是为了更容易选择获胜者，任何人都可以更进一步并提供一种方法来输出他们所应用的颜色的描述。

嗯...我的示例在发布时不起作用（仅在预览时），因此如果您预览此代码，它将显示我的意思...

```
<ul style="list-style:none; background:black; margin:0;padding:0.5em; width:10em">
  <li style="color:blue">directory</li>
  <li style="color:aqua">symbolic link</li>
  <li style="color:#A00000;">*.tar files</li>
  <li style="color:white">...</li>
</ul> 
```

谢谢。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2009-02-28T14:58:35.010

颜色由`$LS_COLORS`环境变量定义。根据您的发行版，它会在 shell 启动时自动生成，使用`~/.dircolors`或`/etc/DIR_COLORS`.

**编辑：**

要列出颜色含义，请使用以下脚本：

```
eval $(echo "no:global default;fi:normal file;di:directory;ln:symbolic link;pi:named pipe;so:socket;do:door;bd:block device;cd:character device;or:orphan symlink;mi:missing file;su:set uid;sg:set gid;tw:sticky other writable;ow:other writable;st:sticky;ex:executable;"|sed -e 's/:/="/g; s/\;/"\n/g')
{
  IFS=:
  for i in $LS_COLORS
  do
    echo -e "\e[${i#*=}m$( x=${i%=*}; [ "${!x}" ] && echo "${!x}" || echo "$x" )\e[m"
  done
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-02-28T15:01:28.980

运行该命令`dircolors -p`将打印所有默认颜色设置。请参阅[http://linux.about.com/library/cmd/blcmdl1_dircolors.htm](http://linux.about.com/library/cmd/blcmdl1_dircolors.htm)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-28T14:57:49.740

您应该能够在 /etc/DIR_COLORS 中看到映射列表。您可以通过在主目录中创建 .dir_colors 来覆盖它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-28T15:00:04.290

试试“man 5 dir_colors”看看它是如何在你的系统上设置的。我的没有 /etc/DIR_COLORS 所以它必须设置在其他地方。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-28T15:00:32.773

谷歌搜索**LS_COLORS**以获得一些有用的链接。

**编辑：**要列出颜色，这个简单的 bash 脚本可能会给出一个想法：

```
IFS=:
set $LS_COLORS
for C in $*
do
    IFS='='
    set $C
    echo -e "\033[$2m$1\033[00m"
done 
```

# vim - 终端可以检测吗 或者 ?

> ID：598113
> 
> 赞同：45
> 
> 时间：2009-02-28T14:57:25.107
> 
> 标签：vim, console, terminal

终端是否可以检测到`⇧ Shift`+`Enter↵</kbd> or `Ctrl`+`Enter↵</kbd> keypresses?``

我正在尝试将 vim 配置为使用这些序列进行键映射，虽然它们在 gvim 中工作正常，但它们似乎在任何终端控制台中都不起作用。

奇怪的是，虽然`Ctrl`+`Enter↵</kbd> is not detected in vim, mapping `Enter↵</kbd> to `Esc` maps properly, but then pressing `Ctrl`+`Enter↵</kbd> behaves like `Enter↵</kbd>!````

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-02-28T18:09:15.597

某些终端在按下`<NL>`时发送。`<C-Enter>`这相当于发送`<C-J>`.

要了解您的终端对`<Shift-Enter>`,`<Ctrl-Enter>`和的作用`<Enter>`，请转到您的终端，输入`<Ctrl-V>`（类似于 sykora 对 vim 的建议），然后输入您感兴趣的序列。

使用 gnome-terminal，我得到以下信息：

```
 <Enter> : ^M
<S-Enter> : ^M
<C-Enter> : <NL> 
```

看着`man ascii`表示`^M`给出`<CR>`顺序。

答案是它取决于终端，并且有一种简单的检查方法。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-02-28T16:15:00.147

Gvim 运行自己的按键处理管理器，因此可以获取所有各种组合键。Vim 依赖于特定终端来传递特定的按键，因此按键处理仅与终端一样好或不同。

确定是否可以执行您想做的事情的一种方法是使用密钥找出插入的内容。例如类型：

```
:<C-V><C-Enter> 
```

即在键入组合Control-V 后实际键入要按的组合。之后对输入做同样的事情，即

```
:<C-V><Enter> 
```

如果它们产生相同的代码，那么终端会将两个键组合解释为相同的键码，并且您无法在不弄乱终端的情况下绑定它们。

在我的终端 (urxvt) 中，Control-Enter、Shift-Enter 和 Enter（单独）都会产生 ^M 字符，这意味着我无法映射一个而不映射另一个。Control-Tab 和 Control-I 以及 Control-Space 和 Control-@ 也是如此

编辑：在 Windows 上使用 CQ 而不是 CV。

# c - 使用宏进行配置

> ID：598119
> 
> 赞同：1
> 
> 时间：2009-02-28T14:59:32.357
> 
> 标签：c, macros, hardware, configure, firmware

我正在用 C 语言为嵌入式处理器编写固件。我想将所有配置信息放在一个名为 config.h 的头文件中。这会导致 ADC 初始化出现问题，简单的 #defines 无法解决问题。现在代码是这样的：

配置文件

```
#define NUMBER_OF_POTS  1
#define POT_1_CHANNEL  27 
```

ADC.c

```
#define MAKE_CSS(channel) _CSS##channel
#define CALL_MAKE_CSS(channel) MAKE_CSS(channel)

void initialize_adc() {
   CALL_MAKE_CSS(POT_1_CHANNEL);
} 
```

如果我将 config.h 更改为：

```
#define NUMBER_OF_POTS  2
#define POT_1_CHANNEL  27
#define POT_2_CHANNEL  29 
```

adc.c 应该只是自动添加一个`CALL_MAKE_CSS`带有一些宏技巧的秒。

我想问题是：是否有一个技巧可以为您提供带有宏的 for 循环功能？

谢谢，

史蒂夫。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-28T15:10:27.027

我没有测试这个：

```
// config.h

#define NUMBER_OF_POTS  2
extern int pots[];

// config.c

int pots[NUMBER_OF_POTS] = {
    27,
    29
};

// adc.c

void initialize_adc() {
    for (int i = 0; i < NUMBER_OF_POTS; i++) {
        CALL_MAKE_CSS(pots[i]);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-28T15:07:25.083

您不必完全依赖宏。只需将您的“幻数”定义为#defines。

例如：

在 config.h 中：

```
#define NUMBER_OF_POTS 2
#define POT_1_CHANNEL  27
#define POT_2_CHANNEL  29

unsigned int PotChannelList[NUMBER_OF_POTS] = {POT_1_CHANNEL, POT_2_CHANNEL}; 
```

在 adc.c 中：

```
for(i = 0; i < NUMBER_OF_CHANNELS; i++)
{
  initialize_adc(PotChannelList[i]);
} 
```

您仍然在 config.h 中定义设置，并且在添加通道时不必更改 adc.c。您只需将其添加到列表中。列表顺序还定义了初始化的顺序。

编辑：很抱歉格式混乱......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-28T15:08:23.940

看看[boost.preprocessor](http://www.boost.org/doc/libs/1_38_0/libs/preprocessor/doc/index.html)。尽管 boost 通常用于 C++，但预处理器元编程库可以很好地使用 CPP，因此它可以满足您的需求。它提供了一些数据结构（列表、元组）和迭代宏。

抱歉，如果它真的能做到你想要的，或者至少提供另一种方式，我无法给你任何例子，因为我很少需要它，而且它太早了。

**注意**刚刚看到施罗德的回答。如果没有必要不依赖PP仍然是最好的选择......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-02T01:05:58.973

C 预处理器不能执行循环。您要么必须在 C 代码中执行循环，要么如果您*真的*需要在编译时执行类似循环的操作，您可以编写自己的预处理器（可以只是一个简单的 shell 脚本，例如），生成必要的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-02T02:41:55.467

虽然你不能用预处理器做循环，但你可以做*展开*的循环。所以如果你知道你永远不会拥有超过 4 个底池，你可以这样做；

```
void initialize_adc() {
  #if NUMBER_OF_POTS > 0
    CALL_MAKE_CSS(POT_1_CHANNEL);
  #endif
  #if NUMBER_OF_POTS > 1
    CALL_MAKE_CSS(POT_2_CHANNEL);
  #endif
  #if NUMBER_OF_POTS > 2
    CALL_MAKE_CSS(POT_3_CHANNEL);
  #endif
  #if NUMBER_OF_POTS > 3
    CALL_MAKE_CSS(POT_4_CHANNEL);
  #endif
} 
```

The only benefit of this compared to other solutions here is that there is no runtime overhead at all. Extra inline code "magically" appears if and only if another channel is added, just as the questioner wanted. To extract the ugliness from within the function call (at the cost of putting it earlier in your code instead), define 4 new macros each using the same #if NUMBER_OF_POTS > x technique. Then you'd be able to go simply;

```
void initialize_adc() {
  INIT_CSS_1();
  INIT_CSS_2();
  INIT_CSS_3();
  INIT_CSS_4();
} 
```

# database - 确定数据库服务器返回的记录的大小 (Kb,Mb)？

> ID：598125
> 
> 赞同：1
> 
> 时间：2009-02-28T15:04:34.590
> 
> 标签：database

有没有办法确定数据库服务器返回的记录的大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-28T19:19:43.557

您可以近似记录大小：

*   **在客户端应用程序中**通过更改代码来汇总并打印您检索到的字段的大小（您*需要指定是否可以更改客户端代码*），或者
*   **在操作系统级别**，通过使用`strace`或`truss`跟踪与`read`数据库连接关联的文件句柄上报告的字节量（`lsof`用于获取文件句柄和 TCP/IP 连接之间的映射），前提是操作系统是 Unix 的风格（您*需要指定您的客户端或数据库正在运行的操作系统*），或者
*   **在网络级别**使用诸如`wireshark`或之类的工具`tcpdump`，前提是客户端通过物理网络接口（而不是通过环回——您*需要指定客户端应用程序连接到数据库的方式*）连接到服务器，或者
*   **在数据库级别**通过启用适当的日志记录或查看感兴趣表的平均行大小的数据库统计信息（例如`SHOW TABLE STATUS LIKE "my_table"`，在 MySQL、`SELECT SUM(avg_width) FROM pg_stats WHERE table_name LIKE 'my_table'`Postgres 等），前提是数据库支持它（您*需要指定数据库您正在使用*) 否则，您可以从数据库转储中计算自己的统计信息。

# .net - Visual Studio 项目的依赖关系图

> ID：598129
> 
> 赞同：145
> 
> 时间：2009-02-28T15:08:19.760
> 
> 标签：.net, visual-studio, migration, graph, dependencies

我目前正在将一个大型解决方案（约 70 个项目）从 VS 2005 + .NET 2.0 迁移到 VS 2008 + .NET 3.5。目前我有 VS 2008 + .NET 2.0。

问题是我需要将项目一一移动到新的 .NET 框架，确保没有 .NET 2.0 项目引用 .NET 3.5 项目。有没有什么工具可以给我一个很好的项目依赖关系图？

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2012-05-06T16:52:38.597

我需要类似的东西，但不想支付（或安装）工具来完成它。我[创建了一个快速的 PowerShell 脚本，它遍历项目引用并以](http://blog.dantup.com/2012/05/free-dependency-graph-generation-using-powershell-and-yuml)[yuml.me](http://yuml.me)友好格式将它们吐出：

```
Function Get-ProjectReferences ($rootFolder)
{
    $projectFiles = Get-ChildItem $rootFolder -Filter *.csproj -Recurse
    $ns = @{ defaultNamespace = "http://schemas.microsoft.com/developer/msbuild/2003" }

    $projectFiles | ForEach-Object {
        $projectFile = $_ | Select-Object -ExpandProperty FullName
        $projectName = $_ | Select-Object -ExpandProperty BaseName
        $projectXml = [xml](Get-Content $projectFile)

        $projectReferences = $projectXml | Select-Xml '//defaultNamespace:ProjectReference/defaultNamespace:Name' -Namespace $ns | Select-Object -ExpandProperty Node | Select-Object -ExpandProperty "#text"

        $projectReferences | ForEach-Object {
            "[" + $projectName + "] -> [" + $_ + "]"
        }
    }
}

Get-ProjectReferences "C:\Users\DanTup\Documents\MyProject" | Out-File "C:\Users\DanTup\Documents\MyProject\References.txt" 
```

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2013-03-13T12:34:29.207

更新：ReSharper 自版本 8 以来具有内置的[“查看项目依赖项”](https://www.youtube.com/watch?v=vi_HgZ9U5uA&list=UUGp4UBwpTNegd_4nCpuBcow)功能。

ReSharper 8 之前的版本具有使用 yFiles 查看器显示依赖关系图的[内部功能。](http://ipishukod.blogspot.ru/2013/02/vs-project-dependencies-viewer-one-that.html "请参阅有关它的博客文章")请参阅帖子底部的快速手册。

![在此处输入图像描述](https://i.stack.imgur.com/9G3Wb.png)

**如何**

1.  [从这里](http://www.yworks.com/en/products_download.php)安装 yEd 工具。
2.  使用 /resharper.internal 命令行参数运行 VS。
3.  转到 ReSharper/内部/显示依赖项。
4.  指定要包含在“大图”中的项目。
5.  除非您需要，否则取消选中“排除终端节点...”。
6.  按“显示”。
7.  在 yEd 中使用分层布局 (Alt+Shift+H)
8.  提供反馈 =)

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2009-02-28T15:12:55.553

你试过 NDepend 吗？它将向您显示依赖关系，您还可以分析类和方法的可用性。

他们的网站：

[http://ndepend.com](http://ndepend.com)

* * *

为了在 2020 年 4 月完成 @Eriawan 的回答，NDepend 版本 2020.1 已经发布，[依赖关系图](https://www.ndepend.com/docs/visual-studio-dependency-graph)完全重建。它现在可以扩展到由数百个项目组成的大型解决方案，并提供许多导航设施。

这是[NopCommerce OSS 项目](https://www.nopcommerce.com/)的样子。

[![NopCommerce 上的 NDepend 依赖关系图](https://i.stack.imgur.com/nOsR6.png)](https://i.stack.imgur.com/nOsR6.png)

这是整个 .NET Core 3 类库（176 个程序集）上的样子。

[![在此处输入链接描述](https://i.stack.imgur.com/x9Ros.png)](https://i.stack.imgur.com/x9Ros.png)

*免责声明：我在 NDepend 工作*

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2010-07-30T20:53:42.540

您可以使用 Visual Studio 2010 Ultimate 轻松获取项目依赖关系图，浏览此视频 5 分钟以了解如何：[http ://www.lovettsoftware.com/blogengine.net/post/2010/05/27/Architecture-Explorer .aspx](http://www.lovettsoftware.com/blogengine.net/post/2010/05/27/Architecture-Explorer.aspx)

在 Visual Studio 2010 Ultimate 中：架构 | 生成依赖图 | 通过大会。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2011-03-25T07:35:18.700

我写了一个可以帮助你的工具。[VS Solution Dependency Visualizer](http://devio.wordpress.com/2011/03/09/analyzing-files-and-directories-used-in-visual-studio-solution/)分析解决方案中的项目依赖关系，并根据此信息创建依赖关系图表以及文本报告。

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2020-12-03T02:32:22.237

制作了powershell脚本.etc。在此处发布到 dotnet 工具中。

# 试试[DependenSee](https://github.com/madushans/dependensee)

安装

*   ~~确保您已安装 dotnet 5 运行时~~

*   **确保您已安装 dotnet 6 运行时**

*   跑`dotnet tool install dependensee --global`

*   安装后，运行`dependensee "path/to/root/of/csproj/files" "path/to/output.html"`

*   默认情况下它不包含 nuget 包，但可以通过`-P`switch启用

*   要查看所有选项，请在`dependensee`不带参数的情况下运行。

HTML 输出如下所示

[![DependenSee 图表](https://i.stack.imgur.com/KbmbE.png)](https://i.stack.imgur.com/KbmbE.png)

# 对于持续集成场景

有命令行选项允许您输出 XML 或 JSON 以进行进一步处理，或者将它们写入文件或写入标准输出，从而允许将输出通过管道传输到其他命令行工具，而无需在必要时接触文件系统。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2015-02-13T02:42:33.500

我有一个类似的问题，但它更加复杂，因为几个项目引用了同一程序集的不同版本。

为了获得包含版本信息和检查可能的运行时程序集加载问题的输出，我制作了这个工具：

[https://github.com/smpickett/DependencyViewer](https://github.com/smpickett/DependencyViewer)

（直接链接到 github 版本：[https](https://github.com/smpickett/DependencyViewer/releases) ://github.com/smpickett/DependencyViewer/releases ）

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2010-02-18T23:51:03.270

您可以在 VS 2010 Ultimate 中创建项目的依赖关系图。Architecture Explorer 允许您浏览您的解决方案，选择您想要可视化的项目和关系，然后根据您的选择创建一个依赖关系图。

有关详细信息，请参阅以下主题：

**如何：从代码生成图形文档**：http : [//msdn.microsoft.com/en-us/library/dd409453%28VS.100%29.aspx#SeeSpecificSource](http://msdn.microsoft.com/en-us/library/dd409453%28VS.100%29.aspx#SeeSpecificSource)

**如何：使用架构资源管理器查找代码**：http : [//msdn.microsoft.com/en-us/library/dd409431%28VS.100%29.aspx](http://msdn.microsoft.com/en-us/library/dd409431%28VS.100%29.aspx)

**RC 下载**：[http](http://www.microsoft.com/downloads/details.aspx?displaylang=en&FamilyID=457bab91-5eb2-4b36-b0f4-d6f34683c62a) ://www.microsoft.com/downloads/details.aspx?displaylang=en&FamilyID=457bab91-5eb2-4b36-b0f4-d6f34683c62a 。

**Visual Studio 2010 架构发现和建模工具**论坛：[http ://social.msdn.microsoft.com/Forums/en-US/vsarch/threads](http://social.msdn.microsoft.com/Forums/en-US/vsarch/threads)

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2010-09-06T13:55:19.610

要完成 NDepend 生成的图表上的 eriawan 答案，请参见下面的屏幕截图。您可以[下载并使用 NDepend 的免费试用版](http://www.ndepend.com/NDependDownload.aspx)一段时间。

[更多关于 NDepend 依赖图](http://www.ndepend.com/Doc_VS_Arch.aspx) ![在此处输入图像描述](https://i.stack.imgur.com/D3cYI.png)

[更多关于 NDepend 依赖矩阵](http://www.ndepend.com/Doc_Matrix.aspx)： ![在此处输入图像描述](https://i.stack.imgur.com/zVHhe.png)

*免责声明：我是工具团队的一员*

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2015-05-30T05:36:52.690

[Powershell 解决方案](https://stackoverflow.com/a/10472358/153258)是最好的。我将它改编成可以在我的机器 (TM) 上运行的 bash 脚本：

```
#!/bin/bash

for i in `find . -type f -iname "*.csproj"`; do
    # get only filename
    project=`basename $i`

    # remove csproj extension
    project=${project%.csproj}

    references=`cat $i | grep '<ProjectReference' | cut -d "\"" -f 2`
    for ref in $references; do
        # keep only filename (assume Windows paths)
        ref=${ref##*\\}

        # remove csproj extension
        ref=${ref%.csproj}

        echo "[ $project ] -> [ $ref ]"
    done

done 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2010-03-11T21:33:59.047

您可以为项目中的引用创建一个漂亮的图表。我已经在我的博客[http://www.mellekoning.nl/index.php/2010/03/11/project-references-in-ddd/上描述了我的做法](http://www.mellekoning.nl/index.php/2010/03/11/project-references-in-ddd/)

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2019-10-16T09:33:52.987

VS 2019 已将依赖图模块重命名为 Code Map

这是官方文档：[https ://docs.microsoft.com/en-us/visualstudio/modeling/map-dependencies-across-your-solutions?view=vs-2019](https://docs.microsoft.com/en-us/visualstudio/modeling/map-dependencies-across-your-solutions?view=vs-2019)

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2009-10-12T11:00:37.673

如果您只是想要一个依赖关系图，我发现这是获得依赖关系图的最简洁方法之一：

[依赖分析器](http://www.drewnoakes.com/code/dependancyanalyser/)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-02-07T12:17:23.843

这个来自 Danny Tuppeny 的 PS 脚本的扩展版本显示了项目和外部参考：

```
Function Get-ProjectReferences($rootPath)
{
  $projectFiles = Get-ChildItem $rootPath -Filter *.csproj -Recurse
  $ns = @{ defaultNamespace = "http://schemas.microsoft.com/developer/msbuild/2003" }

  $projectFiles | ForEach-Object {
    $projectFile = $_ | Select-Object -ExpandProperty FullName
    $projectName = $_ | Select-Object -ExpandProperty BaseName
    $projectXml = [xml](Get-Content $projectFile)

    $projectReferences = $projectXml | Select-Xml '//defaultNamespace:ProjectReference/defaultNamespace:Name' -Namespace $ns | Select-Object -ExpandProperty Node | Select-Object -ExpandProperty "#text"
    $projectReferences | ForEach-Object {
        "PR:[" + $projectName + "]:[" + $_ + "]"
    }
  }

  $projectFiles | ForEach-Object {
    $projectFile = $_ | Select-Object -ExpandProperty FullName
    $projectName = $_ | Select-Object -ExpandProperty BaseName
    $projectXml = [xml](Get-Content $projectFile)

    $externalReferences = $projectXml | Select-Xml '//defaultNamespace:Reference/@Include' -Namespace $ns
    $externalReferences | ForEach-Object {
        "ER:[" + $projectName + "]:[" + $_ + "]"
    }

  }

}

Get-ProjectReferences "C:\projects" | Out-File "C:\temp\References.txt" 
```

它将给出一个以冒号分隔的文件，可以在 Excel 中打开和分析。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-01-15T21:06:51.447

我检查了所有答案，但没有一个选项让我满意，所以我编写了自己的工具来预览项目-项目依赖关系。

[https://github.com/Audionysos/VSProjectReferencesViewer](https://github.com/Audionysos/VSProjectReferencesViewer)

这是早期阶段，但它满足我的需求:)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-10-26T14:37:51.103

[这个来自 Danny Tuppeny 的 PS 脚本的](https://stackoverflow.com/a/10472358)扩展版本显示了对 csproj 和 vcxproj 文件的引用**，**并且**还**支持

-Depth - 最大依赖链长度

-Like - 仅打印以具有名称的项目开头的依赖链 -like **$Like**

-UntilLike - 削减项目的依赖链，**名称为 $UntilLike**

-Reverse - 打印反向的依赖链（**[proj] <- [referencing proj]**）

```
[CmdletBinding()]
param (
    [Parameter(Mandatory=$false)]
    [string]$RootFolder = ".",
    [Parameter(Mandatory=$false)]
    [string]$Like = "*",
    [Parameter(Mandatory=$false)]
    [string]$UntilLike = "*",
    [Parameter(Mandatory=$false)]
    [switch]$Reverse,
    [Parameter(Mandatory=$false)]
    [int]$Depth=1
)

$arrow = if ($script:Reverse) { "<-" } else { "->" }

Function PrintTree ($projectNameToProjectNameList, $projectName, $maxDepth = 1, $prefix = "")
{
    $print = $script:UntilLike -eq "*" -or $projectName -Like $script:UntilLike
    $stop = $projectNameToProjectNameList[$projectName].count -eq 0 -or $maxDepth -eq 0 -or ($script:UntilLike -ne "*" -and $projectName -Like $script:UntilLike)

    if ($stop) {
        if ($print) {
            $prefix + "[$projectName]"
        }
    } else {
        $prefix += "[$projectName] $arrow "
        --$maxDepth
        $projectNameToProjectNameList[$projectName] | % { PrintTree $projectNameToProjectNameList $_ $maxDepth $prefix }
    }
}

Function Get-ProjectReferences ($rootFolder)
{
    $projectFiles = Get-ChildItem $rootFolder -Filter *.csproj -Recurse
    $projectFiles += Get-ChildItem $rootFolder -Filter *.vcxproj -Recurse
    $ns = @{ defaultNamespace = "http://schemas.microsoft.com/developer/msbuild/2003" }

    $projectGuidToProjectName = @{}
    $projectNameToProjectReferenceGuidList = @{}

    $projectFiles | ForEach-Object {
        $projectFile = $_ | Select-Object -ExpandProperty FullName
        $projectName = $_ | Select-Object -ExpandProperty BaseName
        $projectXml = [xml](Get-Content $projectFile)

        $projectGuid = $projectXml | Select-Xml '//defaultNamespace:ProjectGuid' -Namespace $ns | Select-Object -ExpandProperty Node | Select-Object -ExpandProperty "#text" | % { $_ -as [Guid] }
        $projectGuidToProjectName[$projectGuid] = $projectName

        $projectReferenceGuids = $projectXml | Select-Xml '//defaultNamespace:ProjectReference/defaultNamespace:Project' -Namespace $ns | Select-Object -ExpandProperty Node | Select-Object -ExpandProperty "#text" | % { $_ -as [Guid] }
        if ($null -eq $projectReferenceGuids) { $projectReferenceGuids = @() }
        $projectNameToProjectReferenceGuidList[$projectName] = $projectReferenceGuids
    }

    $projectNameToProjectReferenceNameList = @{}
    foreach ($projectName in $projectNameToProjectReferenceGuidList.keys) {
        $projectNameToProjectReferenceNameList[$projectName] = $projectNameToProjectReferenceGuidList[$projectName] | % { $projectGuidToProjectName[$_] } | sort
    }

    if ($script:Reverse) {
        $projectReferenceNameToProjectNameList = @{}
        foreach ($projectName in $projectNameToProjectReferenceNameList.keys) {
            foreach ($projectReferenceName in $projectNameToProjectReferenceNameList[$projectName]) {
                if (!$projectReferenceNameToProjectNameList.ContainsKey($projectReferenceName)) { $projectReferenceNameToProjectNameList[$projectReferenceName] = @() } 
                $projectReferenceNameToProjectNameList[$projectReferenceName] += $projectName
            }
        }

        foreach ($projectName in $projectReferenceNameToProjectNameList.keys -Like $script:Like) {
            PrintTree $projectReferenceNameToProjectNameList $projectName $script:Depth
        }
    } else {
        foreach ($projectName in $projectNameToProjectReferenceNameList.keys -Like $script:Like) {
            PrintTree $projectNameToProjectReferenceNameList $projectName $script:Depth
        }
    }
}

Get-ProjectReferences $RootFolder 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-10-28T11:22:03.980

如果您正在寻找一种不需要任何外部工具的方法，您可以导航到项目`obj/project.assets.json`文件。此文件是在构建期间生成的，并且具有依赖项（项目引用和 nuget 包）的分层 JSON 结构。

它对于回答诸如“为什么这个项目 DLL 会被拉入构建目录？”之类的问题很有用。

# php - 在php中如何做会话实例？

> ID：598137
> 
> 赞同：0
> 
> 时间：2009-02-28T15:14:50.417
> 
> 标签：php

我对 php 很陌生，正在努力学习它。

我的问题很简单，但是在谷歌搜索时我有点迷茫。

我只想创建一个对象来管理数据库连接。我已经做了这个对象，现在我面临的问题是：

我如何将它实例化到会话中？（这样我就不需要在每次页面加载时打开/关闭与数据库的连接）然后我该如何调用它？

有没有办法声明一个销毁器，这样当实例死亡时，与数据库的连接就会关闭？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-28T15:24:36.337

如果在对象上定义[__destruct()](http://uk.php.net/__destruct)方法，它将在对象即将被销毁时调用。您可以使用它来关闭数据库连接。

您还可以使用[__sleep() 和 __wakeup()](http://uk.php.net/manual/en/language.oop5.magic.php#language.oop5.magic.sleep)来[序列化您的对象](http://uk.php.net/manual/en/language.oop.serialization.php)。它们将在序列化和反序列化时自动调用。您可以根据需要使用这些方法进行连接和断开连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-28T15:41:22.410

我讨厌通过反驳这个问题来回答，但我认为你在这里以错误的方式解决问题。

与其担心连接被打开/关闭，我建议使用缓存、索引等来解决出现的性能问题，而不是担心建立连接所涉及的资源。

如果您真的关心性能，为什么不缓存受影响的页面并完全避免使用数据库连接呢？

我认为您可以使用此功能获得所需的效果（不要自己使用，假设为 mysql），但请务必阅读评论：

[http://www.php.net/mysql-pconnect](http://www.php.net/mysql-pconnect)

我认为您不想开始使用睡眠/唤醒技术来使其正常工作，因为我理解这将涉及创建一大堆单独的线程，每个线程都有自己的数据库连接，这只会消耗您的资源并产生相反的结果预期的效果。

# sifr - sIFR 似乎加载正确但不显示文本

> ID：598138
> 
> 赞同：0
> 
> 时间：2009-02-28T15:15:08.277
> 
> 标签：sifr

我正在使用 sIFR 3r436，虽然我相信一切设置正确，并且我的控制台显示 .swf 字体文件正在正确加载，但 HTML 类型已隐藏但 sIFR 类型未显示。以下是相关网站的链接：

[谢弗的网站](http://www.schaffers.com)

下面是一个测试站点的链接，该站点使用完全相同的 sifr-config.js、sifr.js、css 和 swf 文件。它有效。两者之间的主要区别在于它们运行的​​服务器。

[谢弗的试验场](http://www.designmeasure.com/clients/schaffers/website/)

我希望也许有人可以看到我无法看到的问题。感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-01T11:33:55.603

服务器为 Flash 电影提供 403 禁止 - 换句话说，它不会加载。

# wpf - 手动更新目标后 OneWay 绑定停止工作

> ID：598139
> 
> 赞同：8
> 
> 时间：2009-02-28T15:15:14.173
> 
> 标签：wpf, binding

我有这样的 WPF 绑定代码：

```
TestModel source = new TestModel();
TestModel target = new TestModel();

Bind(source, target, BindingMode.OneWay);

source.Attribute = "1";
AssertAreEqual(target.Attribute, "1");

target.Attribute = "foo";

source.Attribute = "2";
AssertAreEqual(target.Attribute, "2"); 
```

第二个断言失败！这对我来说似乎很奇怪。

另外，我尝试了“OneWayToSource”而不是“OneWay”，并且所有工作都按预期进行。

```
Bind(source, target, BindingMode.OneWayToSource);

target.Attribute = "1";
AssertAreEqual(source.Attribute, "1");

source.Attribute = "foo";

target.Attribute = "2";
AssertAreEqual(source.Attribute, "2"); 
```

其他详情：

```
void Bind(TestModel source, TestModel target, BindingMode mode)
{
    Binding binding = new Binding();
    binding.Source = source;
    binding.Path = new PropertyPath(TestModel.AttributeProperty);
    binding.Mode = mode;
    BindingOperations.SetBinding(target, TestModel.AttributeProperty, binding);
}

class TestModel : DependencyObject
{
    public static readonly DependencyProperty AttributeProperty =
        DependencyProperty.Register("Attribute", typeof(string), typeof(TestModel), new PropertyMetadata(null));

    public string Attribute
    {
        get { return (string)GetValue(AttributeProperty); }
        set { SetValue(AttributeProperty, value); }
    }
} 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-01T13:16:09.507

设置 target.Attribute = "foo"; 清除绑定。

MSDN：

> 动态资源和绑定不仅以与本地值相同的优先级运行，它们实际上是本地值，但具有延迟的值。这样做的一个后果是，如果您为属性值设置了动态资源或绑定，那么您随后设置的任何本地值都会完全替换动态绑定或绑定。即使调用 ClearValue 清除本地设置的值，动态资源或绑定也不会恢复。事实上，如果您对具有动态资源或绑定（没有“文字”本地值）的属性调用 ClearValue，它们也会被 ClearValue 调用清除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-28T15:51:36.613

不是绑定专家，但我相信您遇到了 WPF 依赖项属性优先级问题。直接设置值可能优先于绑定值。这就是它覆盖绑定的原因。

这是一个完整的依赖属性列表：http: [//msdn.microsoft.com/en-us/library/ms743230.aspx](http://msdn.microsoft.com/en-us/library/ms743230.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-03T07:06:08.330

> 示例：TextProperty 是 TextBox 的“Text”依赖属性。在代码中调用这些应该是：
> 
> TextBox1.TextProperty="值";

WPF 属性可以通过两种方式设置：通过调用 DependencyObject.SetValue 方法（例如 instance.SetValue(TextProperty,"some text")）或使用 CLR Wrapper（例如 instance.Text="some text"）。

TextBox.TextProperty 是静态 DependencyProperty 对象，因此您不能将字符串值分配给引用类型。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-02-28T17:11:24.193

如果将 Binding Mode 设置为 OneWay，这意味着绑定仅以一种方式工作：当源更改时更新目标。

但目标必须是依赖属性，而您拥有的代码是 CLR .NET 属性。您应该使用注册的依赖属性名称来设置目标上的值，而不仅仅是普通的 .NET 属性名称。Jared 的回答非常正确，这可能会在解决 WPF 依赖属性和普通 .NET CLR 属性之间的冲突时带来混乱。

如果按照约定，依赖属性应该是“propertyname”+property的形式。

示例：TextProperty 是 TextBox 的“Text”依赖属性。在代码中调用这些应该是：

```
TextBox1.TextProperty="value"; 
```

有关设置 Binding 源的更多信息：

[http://msdn.microsoft.com/en-us/library/ms743643.aspx](http://msdn.microsoft.com/en-us/library/ms743643.aspx)

# c++ - 解释 C++ 中的链接（外部/内部）？

> ID：598143
> 
> 赞同：2
> 
> 时间：2009-02-28T15:18:23.293
> 
> 标签：c++, templates, function, inline, linkage

解释 C++ 中的链接（外部/内部）？函数、常量、内联函数、模板函数、类和模板类的链接有何不同

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-28T15:45:35.070

你能澄清一下你的问题吗？C++ 链接是一个相当大的话题，在 SO 帖子中给出完整答案可能比您正在寻找的信息多一点（[Litb](https://stackoverflow.com/users/34509/litb)可能证明我错了）。

这是一个链接，它提供了链接的一般概述：http: [//gaubuali.wordpress.com/linkage-in-c-and-c/](http://gaubuali.wordpress.com/linkage-in-c-and-c/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-03T15:44:39.587

[http://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=41](http://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=41)

[检查标准http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2798.pdf](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2798.pdf)中的第 3.5 节

# c++ - 在 C++ 函数调用中使用自增运算符是否合法？

> ID：598148
> 
> 赞同：48
> 
> 时间：2009-02-28T15:22:44.780
> 
> 标签：c++, function, standards

关于以下代码是否合法 C++在[这个问题](https://stackoverflow.com/questions/596162/can-you-remove-elements-from-a-stdlist-while-iterating-through-it/596180#596180)上存在一些争论：

```
std::list<item*>::iterator i = items.begin();
while (i != items.end())
{
    bool isActive = (*i)->update();
    if (!isActive)
    {
        items.erase(i++);  // *** Is this undefined behavior? ***
    }
    else
    {
        other_code_involving(*i);
        ++i;
    }
} 
```

这里的问题是这`erase()`将使有问题的迭代器无效。如果在评估之前发生这种情况`i++`，那么像这样的递增`i`在技术上是未定义的行为，即使它似乎可以与特定的编译器一起使用。争论的一方说，在调用函数之前，所有函数参数都已被完全评估。另一方说，“唯一的保证是 i++ 将在下一条语句之前和使用 i++ 之后发生。无论是在调用 erase(i++) 之前还是之后，都取决于编译器。”

我提出了这个问题，希望能解决这场辩论。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2009-02-28T15:23:51.643

[引用C++ 标准](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2798.pdf)1.9.16 ：

> 调用函数时（无论该函数是否内联），与任何参数表达式或与指定被调用函数的后缀表达式相关的每个值计算和副作用都在执行主体中的每个表达式或语句之前进行排序称为函数。（注意：与不同参数表达式相关的值计算和副作用是未排序的。）

所以在我看来，这段代码：

```
foo(i++); 
```

是完全合法的。它将递增`i`，然后`foo`使用之前的值调用`i`. 但是，这段代码：

```
foo(i++, i++); 
```

产生未定义的行为，因为第 1.9.16 段还说：

> 如果标量对象上的副作用相对于同一标量对象上的另一个副作用或使用同一标量对象的值的值计算是未排序的，则行为未定义。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-02-28T15:31:30.517

以[克里斯托的回答](https://stackoverflow.com/questions/598148/is-it-legal-to-use-the-increment-operator-in-a-c-function-call/598150#598150)为基础，

```
foo(i++, i++); 
```

产生未定义的行为，因为计算函数参数的顺序是未定义的（在更一般的情况下，因为如果您在同时写入变量的表达式中读取变量两次，结果是未定义的）。您不知道哪个参数将首先递增。

```
int i = 1;
foo(i++, i++); 
```

可能会导致函数调用

```
foo(2, 1); 
```

或者

```
foo(1, 2); 
```

甚至

```
foo(1, 1); 
```

运行以下命令以查看您的平台上发生了什么：

```
#include <iostream>

using namespace std;

void foo(int a, int b)
{
    cout << "a: " << a << endl;
    cout << "b: " << b << endl;
}

int main()
{
    int i = 1;
    foo(i++, i++);
} 
```

在我的机器上我得到

```
$ ./a.out
a: 2
b: 1 
```

每次，但这段代码**不可移植**，所以我希望使用不同的编译器看到不同的结果。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-28T17:04:25.347

标准说副作用发生在调用之前，因此代码与以下相同：

```
std::list<item*>::iterator i_before = i;

i = i_before + 1;

items.erase(i_before); 
```

而不是：

```
std::list<item*>::iterator i_before = i;

items.erase(i);

i = i_before + 1; 
```

所以在这种情况下是安全的，因为 list.erase() 不会使除已擦除的迭代器之外的任何迭代器失效。

也就是说，这是不好的风格 - 所有容器的擦除函数专门返回下一个迭代器，因此您不必担心由于重新分配而使迭代器失效，所以惯用代码：

```
i = items.erase(i); 
```

对于列表来说是安全的，对于向量、双端队列和任何其他序列容器来说也是安全的，如果你想改变你的存储的话。

您也不会在没有警告的情况下编译原始代码 - 您必须编写

```
(void)items.erase(i++); 
```

避免出现未使用退货的警告，这将是一个重要线索，表明您正在做一些奇怪的事情。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-28T15:23:58.880

完全没问题。传递的值将是增量之前的“i”值。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-01T09:43:56.083

++克里斯托！

C++ 标准 1.9.16 对于如何为类实现 operator++(postfix) 非常有意义。当调用该 operator++(int) 方法时，它会自增并返回原始值的副本。正如 C++ 规范所说的那样。

很高兴看到标准在提高！

* * *

但是，我清楚地记得使用较旧的（ANSI 之前）C 编译器，其中：

```
foo -> bar(i++) -> charlie(i++); 
```

没有做你想的！相反，它编译为：

```
foo -> bar(i) -> charlie(i); ++i; ++i; 
```

这种行为依赖于编译器实现。（让移植变得有趣。）

* * *

现在可以很容易地测试和验证现代编译器的行为是否正确：

```
#define SHOW(S,X)  cout << S << ":  " # X " = " << (X) << endl

struct Foo
{
  Foo & bar(const char * theString, int theI)
    { SHOW(theString, theI);   return *this; }
};

int
main()
{
  Foo f;
  int i = 0;
  f . bar("A",i) . bar("B",i++) . bar("C",i) . bar("D",i);
  SHOW("END ",i);
} 
```

* * *

* * *

## 回复帖子中的评论...

......并建立在几乎***每个人的***答案......（谢谢大家！）

* * *

我认为我们需要更好地说明这一点：

鉴于：

```
baz(g(),h()); 
```

那么我们不知道*g()是在**h()***之前还是之后** 被调用。它是*“未指定的”*。

 **但我们确实知道***g()*****和*****h()*****都将在*baz()******之前调用。***

 ***鉴于：

```
bar(i++,i++); 
```

同样，我们不知道首先评估哪个*i++*，甚至可能不知道在调用*bar()之前**i*是否会增加一次或两次。 **结果是不确定的！** （给定*i=0*，这可能是*bar(0,0)*或*bar(1,0)*或*bar(0,1)*或一些非常奇怪的东西！）

 ****** * *

鉴于：

```
foo(i++); 
```

我们现在知道*i*将在*foo()*被调用之前递增。正如[Kristo从](https://stackoverflow.com/questions/598148/is-it-legal-to-use-the-increment-operator-in-a-c-function-call/598150#598150)[C++ 标准第 1.9.16 节](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2798.pdf)指出的那样：

> > 调用函数时（无论该函数是否内联），与任何参数表达式或与指定被调用函数的后缀表达式相关的每个值计算和副作用都在执行主体中的每个表达式或语句之前进行排序称为函数。[注意：与不同参数表达式相关的值计算和副作用是无序的。——尾注]

虽然我认为第 5.2.6 节说得更好：

> > 后缀 ++ 表达式的值是其操作数的值。[注：获得的值是原始值的副本——结束注]操作数应为可修改的左值。操作数的类型应为算术类型或指向完整有效对象类型的指针。操作数对象的值通过加 1 来修改，除非该对象是 bool 类型，在这种情况下它被设置为 true。[注意：不推荐使用此用法，请参阅附件 D。 -- 结束注释] ++ 表达式的值计算在操作数对象的修改之前排序。**对于不确定顺序的函数调用，后缀 ++ 的操作是单次求值。[ 注意：因此，函数调用不应干预左值到右值的转换以及与任何单个后缀 ++ 运算符相关的副作用。-- 尾注]**结果是一个右值。结果的类型是操作数类型的 cv 非限定版本。另见 5.7 和 5.17。

该标准在第 1.9.16 节中还列出（作为其示例的一部分）：

```
i = 7, i++, i++;    // i becomes 9 (valid)
f(i = -1, i = -1);  // the behavior is undefined 
```

我们可以通过以下方式简单地证明这一点：

```
#define SHOW(X)  cout << # X " = " << (X) << endl
int i = 0;  /* Yes, it's global! */
void foo(int theI) { SHOW(theI);  SHOW(i); }
int main() { foo(i++); } 
```

所以，是的，*i在**foo()*被调用之前递增。

* * *

从以下角度来看，所有这些都非常有意义：

```
class Foo
{
public:
  Foo operator++(int) {...}  /* Postfix variant */
}

int main() {  Foo f;  delta( f++ ); } 
```

这里*Foo::operator++(int)*必须在*delta()*之前调用。并且增量操作必须在该调用期间完成。

* * *

在我的（也许过于复杂）的例子中：

```
f . bar("A",i) . bar("B",i++) . bar("C",i) . bar("D",i); 
```

*必须执行f.bar("A",i)*以获取用于*object.bar("B",i++)*的对象，以此类推*"C"*和*"D"*。

所以我们知道*i++*在调用*bar("B",i++)*之前增加*i*（即使*bar("B",...)是用**i*的旧值调用的），因此*i*在*bar( "C",i)*和*bar("D",i)*。

 **** * *

回到***j_random_hacker***的评论：

> **j_random_hacker 写道：**
> +1，但我必须仔细阅读标准以说服自己这没问题。我是否正确地认为，如果 bar() 是一个返回say int 的全局函数，f 是一个 int，并且这些调用是通过say "^" 而不是 "." 连接的，那么 A、C 和 D 中的任何一个都可以报告“0”？

这个问题比你想象的要复杂得多……

将您的问题重写为代码...

```
int bar(const char * theString, int theI) { SHOW(...);  return i; }

bar("A",i)   ^   bar("B",i++)   ^   bar("C",i)   ^   bar("D",i); 
```

现在我们只有**一个**表达式。根据标准（第 1.9 节，第 8 页，pdf 第 20 页）：

> > 注意：只有在运算符确实是关联或交换的情况下，运算符才能根据通常的数学规则重新组合。(7) 例如，在以下片段中：a=a+32760+b+5; 表达式语句的行为完全相同： a=(((a+32760)+b)+5); 由于这些运算符的关联性和优先级。因此，和的结果 (a+32760) 接下来被添加到 b，然后将该结果添加到 5，这导致分配给 a 的值。在溢出产生异常并且 int 可表示的值范围为 [-32768,+32767] 的机器上，实现不能将此表达式重写为 a=((a+b)+32765); 因为如果 a 和 b 的值分别为 -32754 和 -15，则 a+b 之和会产生异常，而原始表达式不会；也不能将表达式重写为 a=((a+32765)+b); 或 a=(a+(b+32765)); 因为 a 和 b 的值可能分别为 4 和 -8 或 -17 和 12。**然而，在溢出不会产生异常并且溢出结果是可逆的机器上，上述表达式语句可以由实现以上述任何方式重写，因为将发生相同的结果。——尾注]**

因此，我们可能会认为，由于优先级，我们的表达式将与以下内容相同：

```
(
       (
              ( bar("A",i) ^ bar("B",i++)
              )
          ^  bar("C",i)
       )
    ^ bar("D",i)
); 
```

但是，因为 (a^b)^c==a^(b^c) 没有任何可能的溢出情况，它可以按任何顺序重写......

但是，因为 bar() 正在被调用，并且可能涉及副作用，所以这个表达式不能以任何顺序重写。优先规则仍然适用。

这很好地确定了*bar()*的评估顺序。

现在，什么时候*i+=1*发生？好吧，它仍然必须在调用*bar("B",...)之前发生。*（即使使用旧值调用*bar("B",....) 。）*

因此，它确定性地发生在*bar(C)*和*bar(D)*之前以及*bar(A)*之后。

**答案：没有**。**如果编译器符合标准**，我们将始终有“A=0, B=0, C=1, D=1” 。

 *** * *

但考虑另一个问题：

```
i = 0;
int & j = i;
R = i ^ i++ ^ j; 
```

R的值是多少？

如果*i+=1*发生在*j*之前，我们将有 0^0^1=1。但是如果*i+=1*出现在整个表达式之后，我们就会有 0^0^0=0。

事实上，R 为零。*i+=1*直到表达式被计算之后才会出现。

* * *

我认为这是为什么：

i = 7, i++, i++; // i 变为 9（有效）

是合法的……它有三种表达方式：

*   我 = 7
*   我++
*   我++

在每种情况下，*i*的值都会在每个表达式的结尾发生变化。（在计算任何后续表达式之前。）

* * *

PS：考虑：

```
int foo(int theI) { SHOW(theI);  SHOW(i);  return theI; }
i = 0;
int & j = i;
R = i ^ i++ ^ foo(j); 
```

在这种情况下，必须在*foo(j)*之前评估*i+=1*。 *theI*是 1。而*R*是 0^0^1=1。

 **** * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-28T16:27:36.433

以 MarkusQ 的回答为基础：;)

或者更确切地说，比尔对此的评论：

（**编辑：**哦，评论又消失了……哦，好吧）

它们被*允许*并行评估。它是否在实践中发生在技术上无关紧要。

但是，您不需要线程并行性来实现这一点，只需在第二步（递增 i）之前评估两者的第一步（取 i 的值）。完全合法，一些编译器可能认为它比在开始第二个之前完全评估一个 i++ 更有效。

事实上，我希望它是一种常见的优化。从指令调度的角度来看。您需要评估以下内容：

1.  取 i 的值作为正确的论点
2.  在正确的参数中增加 i
3.  取 i 的值作为左参数
4.  在左参数中增加 i

但是左右论点之间确实没有依赖关系。参数评估以未指定的顺序发生，也不需要按顺序进行（这就是为什么函数参数中的 new() 通常是内存泄漏，即使包装在智能指针中）它也未定义修改相同变量时会发生什么在同一个表达式中出现两次。但是，我们确实在 1 和 2 之间以及在 3 和 4 之间存在依赖关系。那么为什么编译器要等待 2 完成后再计算 3 呢？这会增加延迟，并且在 4 可用之前需要更长的时间。假设每个之间有 1 个周期延迟，从 1 完成到 4 的结果准备好需要 3 个周期，我们可以调用该函数。

但是如果我们对它们重新排序并按照 1、3、2、4 的顺序进行评估，我们可以在 2 个周期内完成。1 和 3 可以在同一个循环中启动（甚至可以合并到一条指令中，因为它是同一个表达式），然后可以计算 2 和 4。所有现代 CPU 每个周期都可以执行 3-4 条指令，一个好的编译器应该尝试利用这一点。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-05T18:34:42.470

Sutter's [Guru of the Week #55](http://www.gotw.ca/gotw/055.htm)（以及“More Exceptional C++”中的相应文章）作为示例讨论了这个确切的案例。

According to him, it is perfectly valid code, and in fact a case where trying to transform the statement into two lines:

```
items.erase(i);
i++;

```

does *not* produce code that is semantically equivalent to the original statement.

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-02-28T15:45:16.223

以蜥蜴比尔的回答为基础：

```
int i = 1;
foo(i++, i++); 
```

也可能导致函数调用

```
foo(1, 1); 
```

（意味着并行评估实际值，然后应用 postops）。

——马库斯

# python - Python中廉价的异常处理？

> ID：598157
> 
> 赞同：30
> 
> 时间：2009-02-28T15:30:19.317
> 
> 标签：python, performance, exception-handling

我在较早的[答案](https://stackoverflow.com/questions/576988/python-specific-antipatterns/577731#577731)中读到，Python 中的异常处理很便宜，因此我们不应该进行前置条件检查。

我以前没有听说过这个，但我对 Python 比较陌生。异常处理是动态调用，静态返回，而`if`语句是静态调用，静态返回。

做检查怎么可能是坏的和`try-except`好的，似乎是相反的。谁可以给我解释一下这个？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-02-28T16:05:27.033

不要为小事出汗。您已经选择了其中一种较慢的脚本语言，因此尝试优化操作码对您没有多大帮助。选择像 Python 这样的解释型动态语言的原因是优化您的时间，而不是 CPU。

如果您使用通用语言习语，那么您将看到快速原型设计和简洁设计的所有好处，并且随着新版本 Python 的发布和计算机硬件的升级，您的代码自然会运行得更快。

如果您有性能问题，请分析您的代码并优化您的慢速算法。但与此同时，在异常情况下使用异常，因为它会使您最终按照这些思路进行的任何重构都变得容易得多。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-02-28T15:40:15.613

您可能会发现这篇文章很有帮助：[**Try / except Performance in Python: A Simple Test**](http://paltman.com/2008/jan/18/try-except-performance-in-python-a-simple-test/)其中 Patrick Altman 做了一些简单的测试，以查看在各种情况下的性能是什么预条件检查（在这种情况下特定于字典键）并且只使用异常. 如果您想对其进行调整以测试其他条件，也提供了代码。

他得出的结论：

> 从这些结果中，我认为快速确定一些结论是公平的：
> 
> 1.  如果元素不存在的可能性很高，那么最好使用 has_key 检查它。
> 2.  如果您不打算对引发的异常做任何事情，那么您最好不要放置一个有异常
> 3.  如果该元素很可能确实存在，那么使用 try/except 块而不是使用 has_key 会有非常小的优势，但是优势非常小。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2009-02-28T19:50:34.480

抛开其他人所说的绩效衡量标准不谈，指导原则通常被构建为“请求宽恕比请求许可更容易”与“先看再跳”。

考虑这两个片段：

```
# Look before you leap
if not os.path.exists(filename):
    raise SomeError("Cannot open configuration file")
f = open(filename) 
```

对比

```
# Ask forgiveness ...
try:
  f = open(filename)
except IOError:
  raise SomeError("Cannot open configuration file") 
```

相等的？并不真地。操作系统是多用途系统。如果在“exists”和“open”调用测试之间删除了文件会发生什么？

如果文件存在但不可读怎么办？如果它是目录名而不是文件怎么办。可能有许多可能的故障模式，检查所有这些模式需要做很多工作。特别是因为“打开”调用已经检查并报告了所有可能的失败。

指导方针应该是减少状态不一致的机会，最好的方法是使用异常而不是测试/调用。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-02-28T16:07:32.927

“谁可以给我解释一下这个？”

依靠。

这是一种解释，但它没有帮助。你的问题源于你的假设。由于现实世界与您的假设相冲突，这一定意味着您的假设是错误的。没有太多解释，但这就是你问的原因。

“异常处理意味着动态调用和静态返回，而 if 语句是静态调用和静态返回。”

“动态调用”是什么意思？搜索处理程序的堆栈帧？我假设这就是你所说的。并且“静态调用”以某种方式在 if 语句之后定位块。

也许这种“动态调用”并不是操作中成本最高的部分。也许 if 语句表达式评估比简单的“尝试失败”稍微贵一些。

事实证明，Python 的内部完整性检查与您的 if 语句几乎相同，并且无论如何都必须完成。由于 Python 总是会进行检查，因此您的 if 语句（大部分）是多余的。

[您可以在http://docs.python.org/c-api/intro.html#exceptions](http://docs.python.org/c-api/intro.html#exceptions)中阅读有关低级异常处理的信息。

* * *

**编辑**

更重要的是： **if vs. except 辩论无关紧要。**

由于异常很便宜，因此不要将它们标记为性能问题。

使用使您的代码**清晰**和**有意义的**东西。不要在这样的微优化上浪费时间。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-02-28T16:04:16.990

使用 Python，很容易检查不同的速度可能性 - 了解[timeit 模块](http://docs.python.org/library/timeit.html#module-timeit)：

> ... 示例会话（使用命令行）比较使用 hasattr() 与 try/except 的成本来测试缺失和当前对象属性。

```
% timeit.py 'try:' '  str.__nonzero__' 'except AttributeError:' '  pass'
100000 loops, best of 3: 15.7 usec per loop
% timeit.py 'if hasattr(str, "__nonzero__"): pass'
100000 loops, best of 3: 4.26 usec per loop
% timeit.py 'try:' '  int.__nonzero__' 'except AttributeError:' '  pass'
1000000 loops, best of 3: 1.43 usec per loop
% timeit.py 'if hasattr(int, "__nonzero__"): pass'
100000 loops, best of 3: 2.23 usec per loop 
```

这些时序结果表明，在这种`hasattr()`情况下，引发异常很慢，但执行测试比不引发异常要慢。因此，就运行时间而言，使用异常处理*异常*情况是有意义的。

编辑：命令行选项`-n`将默认为足够大的计数，以便运行时间有意义。手册中的[引述](http://docs.python.org/library/timeit.html#command-line-interface)：

> 如果未给出 -n，则通过尝试连续的 10 次方来计算合适的循环次数，直到总时间至少为 0.2 秒。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-02-28T15:48:52.953

我也是python初学者。虽然我不能说为什么在该答案的上下文中异常处理被称为便宜，但这是我的想法：

请注意，使用 if-elif-else 进行检查必须每次都评估一个条件。异常处理，包括对异常处理程序的搜索仅在异常情况下发生，这在大多数情况下可能很少见。这是一个明显的效率增益。正如 Jay 所指出的，当密钥很可能不存在时，最好使用条件逻辑而不是异常。这是因为如果密钥大部分时间都不存在，这不是异常情况。

**也就是说，我建议你不要担心效率，而要担心意义。当您想决定某事时，使用异常处理来检测异常情况和检查条件。**就在昨天，S.Lott 提醒我意义的重要性。

**一个例子：**

```
def xyz(key):
   dictOb = {x:1, y:2, z:3}
   #Condition evaluated every time
   if dictOb.has_key(key):  #Access 1 to dict
        print dictOb[key]  #Access 2 
```

相对

```
#Exception mechanism is in play only when the key isn't found.
def xyz(key):
   dictOb = {x:1, y:2, z:3}
   try:
        print dictOb[key]  #Access 1
   except KeyError:
        print "Not Found" 
```

总的来说，有一些代码可以处理一些事情，比如丢失的密钥，**以防万一**需要异常处理，但是在大多数时间不存在密钥的情况下，你真正想要做的是确定密钥是否存在现在 => if-else。Python 强调并鼓励说出你的意思。

为什么异常优于 if-elif ->

1.  当您在代码中寻找***异常***或不寻常/意外的条件时，它更清楚地表达了含义。
2.  它更干净，更具可读性。
3.  它更灵活。
4.  它可以用来编写更简洁的代码。
5.  避免了很多讨厌的检查。
6.  它更易于维护。

**注意** 当我们避免使用 try-except 时，会继续引发异常。未处理的异常只是转到默认处理程序。当您使用 try-except 时，您可以自己处理错误。它可能更有效，因为 if-else 需要条件评估，而寻找异常处理程序可能更便宜。即使这是真的，从中获得的收益也太小了，无需考虑。

我希望我的回答有帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-28T16:03:45.260

什么是静态调用和动态调用和返回，为什么你认为 Python 中的调用和返回有什么不同，这取决于你是否在 try/except 块中执行它？即使您没有捕获异常，Python 仍然必须处理可能引发某些问题的调用，因此在处理调用和返回方面对 Python 没有影响。

Python 中的每个函数调用都涉及将参数压入堆栈并调用可调用对象。在 Python 的内部连线中，调用者跟随每个函数终止，检查成功或异常终止，并相应地处理它。换句话说，如果您认为当您在 try/except 块中时有一些额外的处理，而当您不在其中时会以某种方式跳过，那您就错了。我认为这就是您的“静态”与“动态”区别的意义所在。

此外，这是一种风格问题，有经验的 Python 开发人员会很好地阅读异常捕获，因此当他们在调用周围看到适当的 try/except 时，它比条件检查更具可读性。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-01T21:56:02.347

正如 S.Lott 所说，一般信息是 try/except*不会受到伤害*，因此您应该在合适的时候随意使用它。

这场辩论通常被称为“LBYL 与 EAFP”——即“先看再跳”与“请求宽恕比请求许可更容易”。 [亚历克斯·马泰利](http://en.wikipedia.org/wiki/Alex_Martelli)在这里提出了这个主题：http: [//mail.python.org/pipermail/python-list/2003-May/205182.html](http://mail.python.org/pipermail/python-list/2003-May/205182.html) 这场辩论已经将近六年了，但我认为基本问题没有变化很大。

# oop - 如何对只有某些实体组才能参与角色的复杂角色关系建模？

> ID：598158
> 
> 赞同：5
> 
> 时间：2009-02-28T15:31:12.670
> 
> 标签：oop, model, modeling

假设我必须为餐馆的饭菜建模。

一顿饭可以由几个“组成部分”组成：

1.  （薯条或米饭或楔子）
2.  和（六种不同的饮料之一）
3.  和（七种不同的酱汁中的一种或两种，或者根本没有）

另一餐可以包括：

1.  （沙拉或米饭）
2.  和（大蒜或没有大蒜）

进一步的膳食可以包括：

1.  只是薯条

2.  只是一种饮料

3.  只是 ...

我该如何建模？（UML，实体关系，代码，......任何你能解释得最好的东西）

如果您知道我想要执行的一些任务，也许它会有所帮助，所以：

*   允许客户先选择一餐并显示所有剩余的“附加组件”。
*   从组件列表中检测一顿饭。例如，如果客户点了薯条、酱汁和饮料，则应该可以从第一个示例中检测到餐点。

我曾考虑将所有组件划分为文章，然后添加某种角色映射以将“薯条”标记为“芝士汉堡”、“炸肉排”、“......”的补充，但后来我想知道，我如何建模多个添加-ons，可选的附加组件，n-out-of-m 附加组件...

我希望你能帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-28T16:35:33.327

1.  似乎一个订单可以包含餐点、组件或两者的混合，所以我会说，有一个包含s 和s`Order`列表的类。 应该是子类，或者它们应该实现相同的接口。`Component``Meal``Meal``Component`
2.  A`Meal`由几个“槽”组成，这些槽可以由一组`Component`s 填充。 `Meal`s 应该知道他们有多少个插槽以及什么`Component`可以填充它们。
3.  “`Meal`从 s 列表中检测 a `Component`”问题很棘手。在我的脑海中，我能想到的最好方法是给每个`Meal`方法一个方法，该方法接受一个`Component`s 列表并返回 true，如果`Meal`可以由它们（或者可能是`Component`组成它的 s的子集`Meal`）。 `Order`将遍历`Meal`它所知道的 s 列表，看看是否可以从`Component`current 中的 s 中生成它们中的任何一个`Order`。不过，可能有更好的方法来做到这一点。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-28T17:33:29.957

为所有可能的组件类型创建*组件*类和子类（或对象）。

创建一个抽象的*Meal*类，以及所有可能的 Meals 类型的子类。Meal 可以检查某个组件列表是否与它匹配（用于从组件列表中检测一餐）。一顿饭可以向顾客展示这顿饭的所有成分选择。

我同意阿曼达的观点，即膳食应该由“*插槽*”构建。每个插槽代表膳食的一种成分选择，例如薯条或米饭或楔子。Slot 也可以模拟 m-outof-n 选项。

膳食类：

```
class Meal
{
    class MealSlot
    {
        Add(Component);
        bool DoesItMatch(vector<Component> ComponentsVector)
        {
            //Check if this Slot is filled by some element(s)
            // of ComponentsVector 
        }
        PrintSlotOptions();
        vector<Component> Options;

        // for m-of-n option, if multiple items can be chosen in this slot
        int HowManyNeededToFillIt; 
    };

    bool DoesItMatch(vector<Component> ComponentsVector)
    {
        //Check if all Slots are filled by ComponentsVector elements,
        //using Slot::DoesItMatch function
    }
    void PresentChoices()
    {
        for(i=0; i < Slots.size(); i++)
             Slots[i].PrintSlotOptions;
    }
    vector<Slot> Slots;
}; 
```

具体餐食之一：（沙拉或米饭）和（大蒜或无大蒜）

```
class MealType2 : public Meal
{
    MealType2()
    {
        Slots[0].Add(Salad);
        Slots[0].Add(Rice);
        Slots[1].Add(Garlic);
        Slots[1].Add(NOTHING);
    }    
}; 
```

创建一个包含膳食名称和组件列表的*订单类。*如果订购了餐点，请调用 Meal.PresentChoices() 。如果给出了组件列表，请检查所有膳食并调用 Meal.DoesItMatch 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-28T17:55:20.123

如果这是家庭作业，那可能没关系......但是 - 如果这将在现实世界的应用程序中使用，我强烈建议不要为每个食物项目使用具体类，即。可乐课、沙拉课、米饭课等如上推荐。这是使您的应用程序不灵活的可靠方法。

拥有一个具有名称属性或类似属性的食品类和饮料类会好得多。

想象一下，仅仅因为现在有一个新的特殊或食品项目而不得不重建你的整个应用程序......不酷;）。

我认为其他答案中缺少的是团体的想法。每个食物项目可以与其他项目一起属于一个组，或者单独属于一个组。

假设薯条、米饭和楔子属于 A 组。饮料属于 B 组。然后您可以将组合建模为组列表 - 即。1 组 A 项目和 1 组 B 项目，或 2 组 A 项目和 1 组 B 项目。

您还可以使食物项目能够同时属于多个组...以使选项更加灵活。

db 模型定义所有关系可能会变得复杂，但我认为这是必要的。

也许是这样的：

`group(id, name, desc)` - 一组类似的项目 - 主菜、开胃菜、饮料……或任何东西

`foodItem(id, name, desc)`- 代表单个项目 - 薯条、米饭等。

`foodItem_group(foodIgem_Id, group_Id)`- 将食物映射到他们的组 - 多对多

`combo(id, name, desc)`- 描述一个组合

`combo_group(combo_Id, group_Id)`- 将组映射到组合 - 多对多

我认为这可以表示基本所需的模型 - 您可能需要额外的表来存储客户实际订购的内容。当然，检测客户订单是否与组合匹配取决于您的业务逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-28T16:31:54.427

我认为这最终会存储在数据库中。我建议创建两个表：

1.  将存储组件（薯条，沙拉，大蒜等）
2.  会有：id1，id2，关系。关系是：
    *   属于
    *   搭配

根据“属于”关系，您可以找到所有组件是否属于某餐。也许然后去选择属于该餐的所有成分，如果选择的成分占该餐的 50% 或更多，则建议该餐。

基于“搭配”关系，您可以建议添加到膳食或所选组件中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-28T17:44:00.790

似乎你的饭菜几乎可以是任何食物的集合，所以从一个食物的抽象基类（或接口）开始。制作许多具体的子类，每种食物一个：可乐、茶、牛排、鸡肉、土豆、米饭、意大利面、汤、沙拉等。

让你的组件接口：开胃菜、晚餐、蛋白质、淀粉、甜点、饮料等。

在您编写代码和测试时，将您的具体类重构为它们似乎想要进入的任何层次结构。

散布在有意义的组件接口中。

# jms - Weblogic“放弃交易”警告

> ID：598160
> 
> 赞同：1
> 
> 时间：2009-02-28T15:31:50.140
> 
> 标签：jms, weblogic

我们在 WL 服务器上随机收到如下警告。我们想更好地了解这些警告到底是什么，以及我们应该做些什么来避免它们。

> 86,606 秒后放弃事务：Xid=BEA1-52CE4A8A9B5CD2587CA9(14534444), Status=Committing,numRepliesOwedMe=0,numRepliesOwedOthers=0,seconds since begin=86605, seconds left=0,XAServerResourceInfo[JMS_goJDBCStore]=(ServerResourceInfo[JMS_goJDBCStore]= ( state=committed,assigned=go_server),xar=JMS_goJDBCStore,re-Registered = true),XAServerResourceInfo[weblogic.jdbc.wrapper.JTSXAResourceImpl]= (ServerResourceInfo[weblogic.jdbc.wrapper.JTSXAResourceImpl]=(state=new,assigned= none),xar= weblogic.jdbc.wrapper.JTSXAResourceImpl@1a8fb80,re-Registered = true),SCInfo[go+go_server]= (state=committed),properties=({weblogic.jdbc=t3://10.6.202.37 :18080}),本地属性= ({weblogic.transaction.recoveredTransaction=true}),OwnerTransactionManager= ServerTM[ServerCoordinatorDescriptor=(CoordinatorURL=go_server+10.6.202.37:18080+go+t3+, XAResources={JMS_goJDBCStore, weblogic.jdbc.wrapper.JTSXAResourceImpl},NonXAResources= {})],CoordinatorURL=go_server+10.6.202.37:18080+go+t3+)

我确实理解 BEA 的[解释](http://e-docs.bea.com/wls/docs81/messages/TX.html)：

> **错误**：在 secs 秒后放弃交易：tx
> 
> **描述**：当一个事务被放弃时，该事务的知识将从试图推动该事务完成的事务管理器中删除。JTA 配置属性 AbandonTimeoutSeconds 确定事务管理器在尝试提交或回滚事务时应该坚持多长时间。
> 
> **原因**：资源或参与服务器可能在 AbandonTimeoutSeconds 期间不可用。
> 
> **行动**：检查参与资源的启发式完成并纠正任何数据不一致。

我们观察到您可以通过删除 *.tlog 文件来消除这些警告，但这似乎不是处理警告的正确策略。

警告指的是 JMS 和我们的 JMS 存储。我们确实使用 JMS。我们只是不明白为什么交易在那里挂起，为什么它们会被“放弃”？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-02T20:39:08.903

我知道这不是很令人满意，但我们确实在启动之前在 WLS 7 上托管的应用程序中删除了 *.tlog 文件。

我们的应用程序是一个事件处理后端，主要由 JMS 驱动。我们对在 WLS 重新启动时保留事务不感兴趣。如果它在关闭之前没有完成，它往往不会在重新启动后完成。所以做这个 *.tlog 清理只是消除了一些警告和潜在的不稳定行为。

顺便说一句，我不认为 JMS 是其中的基础。至少我不知道。

顺便说一句，我们从 JDBC JMS 存储转移到本地文件。据说性能更好，我们不需要使用 JDBC 获得的位置独立性。如果这也描述了您的情况，那么移动到本地文件可能会消除您的根本原因？

# php - if 语句切换

> ID：598161
> 
> 赞同：0
> 
> 时间：2009-02-28T15:33:19.670
> 
> 标签：php

```
<?php

if ($_GET['user_id']) $content = $_GET['user_id'];
else $content = $_GET['content'];

switch($content) {

//The default page
default:
include_once('main.php');
break;

//The news related stuff
case 'news':
include_once('news.php');
break;

//Show the profile of a user
case 'user_id':
include_once('profile.php');
break;
 }
?> 
```

`index.php?user_id=id`不会工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-28T15:37:11.143

这个`default`案子必须是最后一个。

```
switch($content) {
    //The news related stuff
    case 'news':
        include_once('news.php');
    break;

    //Show the profile of a user
    case 'user_id':
        include_once('profile.php');
    break;

    //The default page
    default:
        include_once('main.php');
    break;
} 
```

另外，您说这不起作用：`index.php?user_id=id`

该`$content`变量由 _GET 字符串中的值填充`user_id`，因此，如果您想查看默认页面以外的内容，则必须执行以下操作之一：

```
index.php?user_id=news
index.php?user_id=user_id 
```

这可能不是您希望它的行为方式，但鉴于您的代码，这就是它正在做的事情......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-28T15:51:51.793

也许你打算这样做：

```
if (isset($_GET['user_id'])) $content = 'user_id'; 
```

代替：

```
if ($_GET['user_id']) $content = $_GET['user_id'];
else $content = $_GET['content']; 
```

然后`switch`将执行该`user_id`案例并包含`profile.php`.

# asp.net - RegisterClientScriptBlock 与 RegisterClientScriptInclude

> ID：598162
> 
> 赞同：2
> 
> 时间：2009-02-28T15:33:34.380
> 
> 标签：asp.net, javascript, registerclientscriptblock

使用`RegisterClientScriptBlock`I 减少服务器请求。但是`RegisterClientScriptInclude`我可以将 HTML 和 javascript 分开。

我应该更喜欢哪种方法？

*编辑：*附加问题 - 你在哪里存储你的 js 块。我习惯将它们放入资源文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-28T15:42:50.613

如果您想以某种方式修改脚本，RegisterClientScriptBlock 方法很方便。

如果您可以将脚本作为静态文件包含在内，我建议您这样做，因为浏览器会缓存该文件，以便仅在第一次使用时才请求它。当然，鉴于脚本不仅仅是几行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-28T15:35:52.847

使用当时最能满足您需求的方法。我不认为有一条规则说你必须为每一种可能性选择一个或另一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-28T15:45:27.237

这两个函数都应该作为 JS 的最后手段。将 JavaScript 存储和附加到站点的最佳方法是使用静态链接。

# c - 多个目录中的头文件：最佳实践

> ID：598167
> 
> 赞同：8
> 
> 时间：2009-02-28T15:37:14.013
> 
> 标签：c, makefile, header-files

### 我是C新手

我用动态语言（javascript、python、haskell 等）编写了很多代码，但我现在正在为研究生院学习 C，但我不知道自己在做什么。

### 问题

最初，我使用 makefile 在一个目录中构建我的所有源代码，效果非常好。但是，我的项目正在增长，我想将源代码拆分为多个目录（单元测试、实用程序、核心等）。例如，我的目录树可能如下所示：

```
.
|-- src
|   |-- foo.c
|   |-- foo.h
|   `-- main.c
`-- test
    `-- test_foo.c 
```

`test/test_foo.c`同时使用`src/foo.c`和`src/foo.h`。使用makefile，构建它的最佳/标准方法是什么？最好有一条规则用于构建项目，一条规则用于构建测试。

### 笔记

我知道还有其他方法可以做到这一点，包括 autoconf 和其他自动解决方案。但是，我想了解正在发生的事情并能够从头开始编写 makefile，尽管它可能不切实际。

任何指导或提示将不胜感激。谢谢！

### [编辑]

所以目前给出的三种解决方案如下：

*   将全局使用的头文件放在并行`include`目录中
*   使用状态中的路径，`#include`如`#include "../src/foo.h"`
*   使用`-I`开关通知编译器包含位置

到目前为止，我喜欢`-I`switch 解决方案，因为它不涉及在目录结构更改时更改源代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-28T15:57:57.723

对于 test_foo.c，您只需要告诉编译器可以在哪里找到头文件。例如

```
gcc -I../src -c test_foo.c 
```

然后编译器还将查看该目录以查找头文件。然后在 test_foo.c 中编写：

```
#include "foo.h" 
```

**编辑**：要链接到 foo.c，实际上是针对 foo.o，您需要在目标文件列表中提及它。我假设你已经有了目标文件，然后再做：

```
gcc test_foo.o ../src/foo.o -o test 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-28T16:12:04.287

我也很少使用 GNU 自动工具。相反，我将在根目录中放置一个手工制作的 makefile。

要获取源目录中的所有标头，请使用以下内容：

```
get_headers = $(wildcard $(1)/*.h)
headers := $(call get_headers,src) 
```

然后，您可以使用以下命令使测试目录中的目标文件依赖于这些标头：

```
test/%.o : test/%.c $(headers)
    gcc -std=c99 -pedantic -Wall -Wextra -Werror $(flags) -Isrc -g -c -o $@ $< 
```

如您所见，我不喜欢内置指令。还要注意`-I`开关。

获取目录的目标文件列表稍微复杂一些：

```
get_objects = $(patsubst %.c,%.o,$(wildcard $(1)/*.c))
test_objects = $(call get_objects,test) 
```

以下规则将为您的测试创建对象：

```
test : $(test_objects) 
```

该`test`规则不应该只制作目标文件，还应该制作可执行文件。如何编写规则取决于测试的结构：例如，您可以为每个`.c`文件创建一个可执行文件，或者只创建一个测试所有文件的可执行文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-28T15:48:10.460

这样做的一种常见方法是，将单个 C 文件使用的头文件命名为与该 C 文件相同且位于同一目录中，并将许多 C 文件使用的头文件（尤其是整个项目使用的头文件）命名为位于`include`与 C 源目录平行的目录中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-28T15:57:48.550

您的测试文件应该只使用相对路径直接包含头文件，如下所示：

```
#include "../src/foo.h" 
```

# algorithm - DAG 中从源到某些节点之间的最长路径

> ID：598174
> 
> 赞同：4
> 
> 时间：2009-02-28T15:43:34.513
> 
> 标签：algorithm, directed-acyclic-graphs

我如何找到从单个源到所有最终目的地的最长路径，即对于源 i1，给出 i1 -> o1 和 i1 -> o2 之间的最长路径。

[![替代文字](https://i.stack.imgur.com/gX2q4.png)](https://i.stack.imgur.com/gX2q4.png)

上图中描述的图例如下： (i1, i2) 是开始节点 (o1, o2) 是结束节点 (1-8) 是子图 边可能有 +ive/-ive 权重

该网络中最长的路径按以下顺序排列：

最差路径：i1 -> 1 -> 4 -> o1

然后，所有路径 i1 ... -> ... o1

然后 i1 -> 5 -> 6 -> o2

需要一种方法来忽略 (i1 -> 3) 或 (3 -> 4) 子网的选择，即使它们比 i1 -> 5 长

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-28T15:55:14.843

[维基百科](http://en.wikipedia.org/wiki/Longest_path_problem)来拯救！他们关于这个问题的页面表明，在一般情况下，您的问题是 NP-Complete。但是，由于您有一个有向*无环*图，您可以反转所有边权重并运行[Bellman-Ford 算法](http://en.wikipedia.org/wiki/Bellman-Ford_algorithm)来解决它。BF 算法通常计算图中的单源最短路径。使用倒置的边缘权重，它应该产生最长的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-02-05T16:02:52.413

我相信以下将为您提供到达目的地的最大步数（不是实际路径，只是步数）。这没有考虑边缘权重。这通过合并节点来工作，`src`直到除了目标节点之外没有邻居。

```
longestPath (src, dest) =
    if (neighbors(src) == [dest]) then 1
    else 1 + longestPath(newNode(concat (map neighbors (neighbors src))), dest) 
```

# c++ - 如何将对象的成员函数称为 std 算法的 unary_function？

> ID：598175
> 
> 赞同：4
> 
> 时间：2009-02-28T15:43:36.977
> 
> 标签：c++, stl

我有一个看起来像这样的课程。

```
class A 
{
public:
    void doSomething();
} 
```

我有这些类的数组。我想对数组中的每个项目调用 doSomething() 。使用算法标题最简单的方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-28T15:44:00.190

使用 std::mem_fun_ref 将成员函数包装为一元函数。

```
#include <algoritm>
#include <functional>

std::vector<A> the_vector;

...

std::for_each(the_vector.begin(), the_vector.end(),
              std::mem_fun_ref(&A::doSomething)); 
```

如果你的向量包含指向类的指针，而不是对象本身，你也可以使用 std::mem_fun 。

```
std::vector<A*> the_vector;

...

std::for_each(the_vector.begin(), the_vector.end(),
              std::mem_fun(&A::doSomething)); 
```

# ruby-on-rails - ActiveRecord (Rails) 中的图层超类型

> ID：598177
> 
> 赞同：2
> 
> 时间：2009-02-28T15:45:07.287
> 
> 标签：ruby-on-rails, activerecord

我正在开发一个 ruby​​ on rails 应用程序，我希望能够在每次保存之前对每个 AR 对象执行一个方法。

我想我会像这样创建一个图层超级类型：

```
MyObject << DomainObject << ActiveRecord::Base 
```

并使用我的特殊方法在 DomainObject 中放入一个回调（before_save）（基本上从对象的字符串属性中删除所有标签，如“H1”）。

问题是 rails 要求 domain_object 表，我显然没有。

我的第二次尝试是对活动记录进行monkeypatch，如下所示：

```
module ActiveRecord
  class Base
    def my_method .... end
  end
end 
```

并将其放在 lib 文件夹下。

这不起作用，它告诉我 my_method 未定义。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-28T16:10:49.157

尝试为您的域对象使用抽象类。

```
class DomainObject < ActiveRecord::Base
  self.abstract_class = true
  # your stuff goes here
end 
```

使用抽象类，您正在创建一个不能有对象（不能被实例化）并且没有关联表的模型。

从阅读[Rails: Where to put the 'other' files](http://www.strictlyuntyped.com/2008/06/rails-where-to-put-other-files.html) from Strictly Untyped,

> Rails 启动时不会加载 lib 中的文件。Rails 已经覆盖`Class.const_missing`并`Module.const_missing`根据类名动态加载文件。事实上，这正是 Rails 加载模型和控制器的方式。

因此将文件放在 lib 文件夹中，它不会在 Rails 启动时运行，也不会猴子修补 ActiveRecord::Base。您可以将文件放在 中`config/initializers`，但我认为有更好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-28T16:25:37.187

我在之前的工作中使用的另一种从模型中剥离 HTML 标签的方法是创建一个插件。我们剥离的不仅仅是 HTML 标签，这里是 HTML 剥离部分：

初始化程序（供应商/插件/剥离器/init.rb）：

```
require 'active_record/stripper'
ActiveRecord::Base.class_eval do
  include ActiveRecord::Stripper
end 
```

剥离代码（vendor/plugins/stripper/lib/active_record/stripper.rb）：

```
module ActiveRecord
  module Stripper
    module ClassMethods
      def strip_html(*args)
        opts = args.extract_options!
        self.strip_html_fields = args
        before_validation :strip_html
      end
    end

    module InstanceMethods
      def strip_html
        self.class.strip_html_fields.each{ |field| strip_html_field(field) }
      end
    private
      def strip_html_field(field)
        clean_attribute(field, /<\/?[^>]*>/, "")
      end
      def clean_attribute(field, regex, replacement)
        self[field].gsub!(regex, replacement) rescue nil
      end
    end

    def self.included(receiver)
      receiver.class_inheritable_accessor :strip_html_fields
      receiver.extend         ClassMethods
      receiver.send :include, InstanceMethods
    end
  end
end 
```

然后在您的 MyObject 类中，您可以通过调用有选择地从字段中删除 html：

```
class MyObject < ActiveRecord::Base
  strip_html :first_attr, :second_attr, :etc
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-28T16:59:08.357

已经给出的 HTML 剥离插件代码将处理问题中提到的特定用途。通常，将相同的代码添加到多个类（包括一个模块）将很容易做到这一点，而不需要从某个公共基础继承所有内容，或者向 ActiveRecord 本身添加任何方法。

```
module MyBeforeSave
  def self.included(base)
    base.before_save :before_save_tasks
  end

  def before_save_tasks
    puts "in module before_save tasks"
  end
end

class MyModel < ActiveRecord::Base
  include MyBeforeSave
end

>> m = MyModel.new
=> #<MyModel id: nil>
>> m.save
in module before_save tasks
=> true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-28T17:53:01.033

我会猴子补丁 ActiveRecord::Base 并将文件放在配置/初始化程序中：

```
class ActiveRecord::Base

  before_create :some_method

  def some_method
  end

end 
```

# c# - NUnit 测试应用程序，而不是环境或数据库

> ID：598188
> 
> 赞同：1
> 
> 时间：2009-02-28T15:48:44.577
> 
> 标签：c#, unit-testing, nunit

我想更好地使用 NUnit 来测试我编写的应用程序，但我经常发现我编写的单元测试直接链接到开发机器上的环境或底层数据库。

让我举个例子。

我正在编写一个类，它只负责检索一个字符串，该字符串已由另一个应用程序存储在注册表中。密钥存储在 HKCU\Software\CustomApplication\IniPath 中。

我最终写的测试看起来像这样；

```
[Test]
public void GetIniDir()
{
    RegistryReader r = new RegistryReader();
    Assert.AreEqual(@"C:\Programfiles\CustomApplication\SomeDir", r.IniDir);
} 
```

但这里的问题是字符串 @"C:\Programfiles\CustomApplication\SomeDir" 现在真的是正确的。明天它可能会更改为@“C:\Anotherdir\SomeDir”，并且突然间这会破坏我的单元测试，即使代码没有改变。

当我创建一个对数据库执行 CRUD 操作的类时，也会出现这个问题。数据库中的数据可以随时更改，这反过来又会导致测试失败。因此，即使我的课程按预期进行，它也会失败，因为数据库返回的客户比我最初编写测试时拥有的客户多。

```
[Test]
public void GetAllCustomersCount()
{
    DAL d = new DAL();
    Assert.AreEqual(249, d.GetCustomerCount());
} 
```

你们对编写不太依赖周围环境的测试有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-28T16:00:50.647

这个问题的解决方案是众所周知的：[模拟](http://en.wikipedia.org/wiki/Mock_object)。将您的代码重构为接口，然后开发假类来实现这些接口或使用模拟框架模拟它们，例如[RhinoMocks](http://ayende.com/projects/rhino-mocks.aspx)、[easyMock](http://www.easymock.org/)、[Moq](http://code.google.com/p/moq/)等。人。使用假类或模拟类允许您定义接口为您的测试返回的内容，而无需实际与外部实体（例如数据库）进行交互。

有关通过 SO 进行模拟的更多信息，请尝试此 Google 搜索：[http](http://www.google.com/search?q=mock+site:stackoverflow.com) ://www.google.com/search?q=mock+site:stackoverflow.com 。您可能还对以下定义感兴趣：[伪装、模拟和存根之间有什么区别？](https://stackoverflow.com/questions/346372/whats-the-difference-between-faking-mocking-and-stubbing)

此外，良好的开发实践，例如依赖注入（正如@Patrik 建议的那样），它允许将您的类与其依赖关系解耦，以及避免使用静态对象（这使得单元测试更加困难），这将有助于您的测试。使用 TDD 实践——首先开发测试——将帮助您自然地开发包含这些设计原则的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-28T16:09:10.223

最简单的方法是使用依赖注入使依赖项显式化。例如，您的第一个示例对注册表有依赖关系，通过传递 IRegistry（您将定义的接口）实例明确此依赖关系，然后仅使用此传递的依赖项从注册表中读取。这样，您可以在测试时传入 IRegistry-stub 始终返回已知值，而在生产中，您可以使用实际从注册表中读取的实现。

```
public interface IRegistry
{
    string GetCurrentUserValue(string key);
}

public class RegistryReader
{
    public RegistryReader(IRegistry registry)
    { 
        ...
        // make the dependency explicit in the constructor.
    }
}
[TestFixture]
public class RegistryReaderTests
{
    [Test]
    public void Foo_test()
    { 
        var stub = new StubRegistry();
        stub.ReturnValue = "known value";

        RegistryReader testedReader = new RegistryReader(stub);

        // test here...
    }

    public class StubRegistry
        : IRegistry
    {
        public string ReturnValue;

        public string GetCurrentUserValue(string key)
        {
            return ReturnValue;
        }
    }
} 
```

在这个快速示例中，我使用手动存根，当然您可以为此使用任何模拟框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-28T16:01:19.650

另一种方法是为测试创建单独的数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-28T16:13:16.890

你应该阅读控制原理的反转以及如何使用依赖注入技术——这真的可以帮助你编写可测试的代码。

在您的情况下，您可能应该有一个接口 - 例如`IIniDirProvider`- 由 实现`RegistryBasedIniDirProvider`，它负责根据注册表中的特定键提供初始目录。

然后，当某个其他类需要查找初始目录时，该其他类应该具有以下 ctor：

```
public SomeOtherClass(IIniDirProvider iniDirProvider)
{
    this.iniDirProvider = iniDirProvider;
} 
```

`IIniDirProvider`- 允许您在需要进行单元测试时通过模拟`SomeOtherClass`。这样，您的单元测试将不依赖于注册表中存在的任何内容。

# mysql - MySQL：检查用户是否存在并将其删除

> ID：598190
> 
> 赞同：89
> 
> 时间：2009-02-28T15:48:54.390
> 
> 标签：mysql, database

没有标准的方法来检查 MySQL 用户是否存在并基于该删除它。有什么解决方法吗？

编辑：我需要一种直接的方法来运行它而不会引发错误，
例如

```
DROP USER test@localhost; : 
```

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2010-07-13T22:03:52.757

这对我有用：

```
GRANT USAGE ON *.* TO 'username'@'localhost';
DROP USER 'username'@'localhost'; 
```

如果用户不存在，这将创建用户（并授予它无害的特权），然后以任何一种方式将其删除。在这里找到解决方案：http: //bugs.mysql.com/bug.php?id= [19166](http://bugs.mysql.com/bug.php?id=19166)

更新：[@Hao 建议](https://stackoverflow.com/a/22866506/20772)添加`IDENTIFIED BY`; @andreb（在评论中）建议禁用`NO_AUTO_CREATE_USER`.

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2016-04-22T16:08:45.933

从 MySQL 5.7 开始，您可以执行`DROP USER IF EXISTS test`

更多信息：[http ://dev.mysql.com/doc/refman/5.7/en/drop-user.html](http://dev.mysql.com/doc/refman/5.7/en/drop-user.html)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-04-04T15:10:10.103

对于 phyzome 的回答（投票率最高的一个），在我看来，如果您在授权声明的末尾加上“识别者”，则将自动创建用户。但是，如果您不这样做，则不会创建用户。以下代码对我有用，

```
GRANT USAGE ON *.* TO 'username'@'localhost' IDENTIFIED BY 'password';
DROP USER 'username'@'localhost'; 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2009-03-03T10:02:18.830

从 MySQL 论坛之一找到了答案。我们需要使用一个过程来删除用户。

*这里的用户是“test”，“databaseName”是数据库名称。*

```
 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ANSI';
USE `databaseName` ;
DROP PROCEDURE IF EXISTS `databaseName`.`drop_user_if_exists` ;
DELIMITER $$
CREATE PROCEDURE `databaseName`.`drop_user_if_exists`()
BEGIN
  DECLARE foo BIGINT DEFAULT 0 ;
  SELECT COUNT(*)
  INTO foo
    FROM `mysql`.`user`
      WHERE `User` = 'test' and  `Host` = 'localhost';
   IF foo > 0 THEN
         DROP USER 'test'@'localhost' ;
  END IF;
END ;$$
DELIMITER ;
CALL `databaseName`.`drop_user_if_exists`() ;
DROP PROCEDURE IF EXISTS `databaseName`.`drop_users_if_exists` ;
SET SQL_MODE=@OLD_SQL_MODE ;

CREATE USER 'test'@'localhost' IDENTIFIED BY 'a';
GRANT ALL PRIVILEGES  ON databaseName.* TO 'test'@'localhost'
 WITH GRANT OPTION 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-19T20:08:11.130

**更新：** 从 MySQL 5.7 开始，您可以使用`DROP USER IF EXISTS`语句。参考：[https ://dev.mysql.com/doc/refman/5.7/en/drop-user.html](https://dev.mysql.com/doc/refman/5.7/en/drop-user.html)

> 句法：`DROP USER [IF EXISTS] user [, user] ...`
> 
> 例子：`DROP USER IF EXISTS 'jeffrey'@'localhost';`

仅供参考（对于旧版本的 MySQL），这是一个更好的解决方案......！！！

以下 SP 将帮助您`'tempuser'@'%'`通过执行删除用户`CALL DropUserIfExistsAdvanced('tempuser', '%');`

如果要删除所有名为`'tempuser'`（比如`'tempuser'@'%'`,`'tempuser'@'localhost'`和`'tempuser'@'192.168.1.101'`）的用户，请像这样执行 SP`CALL DropUserIfExistsAdvanced('tempuser', NULL);`这将删除所有名为`tempuser`!!!的用户 严重地...

现在请看一下提到的 SP `DropUserIfExistsAdvanced`：

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `DropUserIfExistsAdvanced`$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `DropUserIfExistsAdvanced`(
    MyUserName VARCHAR(100)
    , MyHostName VARCHAR(100)
)
BEGIN
DECLARE pDone INT DEFAULT 0;
DECLARE mUser VARCHAR(100);
DECLARE mHost VARCHAR(100);
DECLARE recUserCursor CURSOR FOR
    SELECT `User`, `Host` FROM `mysql`.`user` WHERE `User` = MyUserName;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET pDone = 1;

IF (MyHostName IS NOT NULL) THEN
    -- 'username'@'hostname' exists
    IF (EXISTS(SELECT NULL FROM `mysql`.`user` WHERE `User` = MyUserName AND `Host` = MyHostName)) THEN
        SET @SQL = (SELECT mResult FROM (SELECT GROUP_CONCAT("DROP USER ", "'", MyUserName, "'@'", MyHostName, "'") AS mResult) AS Q LIMIT 1);
        PREPARE STMT FROM @SQL;
        EXECUTE STMT;
        DEALLOCATE PREPARE STMT;
    END IF;
ELSE
    -- check whether MyUserName exists (MyUserName@'%' , MyUserName@'localhost' etc)
    OPEN recUserCursor;
    REPEAT
        FETCH recUserCursor INTO mUser, mHost;
        IF NOT pDone THEN
            SET @SQL = (SELECT mResult FROM (SELECT GROUP_CONCAT("DROP USER ", "'", mUser, "'@'", mHost, "'") AS mResult) AS Q LIMIT 1);
            PREPARE STMT FROM @SQL;
            EXECUTE STMT;
            DEALLOCATE PREPARE STMT;
        END IF;
    UNTIL pDone END REPEAT;
END IF;
FLUSH PRIVILEGES;
END$$

DELIMITER ; 
```

**用法：**

`CALL DropUserIfExistsAdvanced('tempuser', '%');`删除用户`'tempuser'@'%'`

`CALL DropUserIfExistsAdvanced('tempuser', '192.168.1.101');`删除用户`'tempuser'@'192.168.1.101'`

`CALL DropUserIfExistsAdvanced('tempuser', NULL);`删除所有命名的用户`'tempuser'`（例如，说`'tempuser'@'%'`，`'tempuser'@'localhost'`和`'tempuser'@'192.168.1.101'`）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-07-20T19:11:22.090

嗯...为什么所有的复杂和技巧？

而不是使用 DROP USER... 您可以简单地从 mysql.user 表中删除用户（如果用户不存在，则不会引发错误），然后刷新权限以应用更改。

```
DELETE FROM mysql.user WHERE User = 'SomeUser' AND Host = 'localhost';
FLUSH PRIVILEGES; 
```

- 更新 -

我错了。像这样删除用户是不安全的。您确实需要使用 DROP USER。由于可以将 mysql 选项设置为不通过授权自动创建用户（我使用的一个选项），我仍然不推荐这种技巧。这是一个适用于我的存储过程的片段：

```
DECLARE userCount INT DEFAULT 0;
SELECT COUNT(*) INTO userCount FROM mysql.user WHERE User = userName AND Host='localhost';
IF userCount > 0 THEN
    SET @S=CONCAT("DROP USER ", userName, "@localhost" );
    PREPARE stmt FROM @S;
    EXECUTE stmt;
    SELECT CONCAT("DROPPED PRE-EXISTING USER: ", userName, "@localhost" ) as info;
END IF;
FLUSH PRIVILEGES; 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-05-04T02:26:39.790

```
DROP USER IF EXISTS 'user'@'localhost' ; 
```

这对我有用，不会在 Maria DB 中引发任何错误，它也应该对你有用

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-08-23T18:03:19.223

关于@Charian 的回答，可以删除以下几行：

```
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ANSI';
...
SET SQL_MODE=@OLD_SQL_MODE;
... 
```

这是 5.1.23 之前的错误。在该版本之后，这些不再需要。因此，为方便复制/粘贴，此处与删除上述行相同。同样，例如，“test”是用户，“databaseName”是数据库；这是来自[这个错误](http://bugs.mysql.com/bug.php?id=19166)。

```
DROP PROCEDURE IF EXISTS databaseName.drop_user_if_exists ;
DELIMITER $$
CREATE PROCEDURE databaseName.drop_user_if_exists()
BEGIN
  DECLARE foo BIGINT DEFAULT 0 ;
  SELECT COUNT(*)
  INTO foo
    FROM mysql.user
      WHERE User = 'test' and  Host = 'localhost';
   IF foo > 0 THEN
         DROP USER 'test'@'localhost' ;
  END IF;
END ;$$
DELIMITER ;
CALL databaseName.drop_user_if_exists() ;
DROP PROCEDURE IF EXISTS databaseName.drop_users_if_exists ;

CREATE USER 'test'@'localhost' IDENTIFIED BY 'a';
GRANT ALL PRIVILEGES  ON databaseName.* TO 'test'@'localhost'
 WITH GRANT OPTION 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-09-18T21:28:21.450

我在 Cherian 的回答的启发下编写了这个程序。不同之处在于，在我的版本中，用户名是过程的一个参数（而不是硬编码）。在删除用户后，我也在做一个非常必要的 FLUSH PRIVILEGES 。

```
DROP PROCEDURE IF EXISTS DropUserIfExists;
DELIMITER $$
CREATE PROCEDURE DropUserIfExists(MyUserName VARCHAR(100))
BEGIN
  DECLARE foo BIGINT DEFAULT 0 ;
  SELECT COUNT(*)
  INTO foo
    FROM mysql.user
      WHERE User = MyUserName ;
   IF foo > 0 THEN
         SET @A = (SELECT Result FROM (SELECT GROUP_CONCAT("DROP USER"," ",MyUserName,"@'%'") AS Result) AS Q LIMIT 1);
         PREPARE STMT FROM @A;
         EXECUTE STMT;
         FLUSH PRIVILEGES;
   END IF;
END ;$$
DELIMITER ; 
```

我还在 CodeReview 网站上发布了这段代码（[https://codereview.stackexchange.com/questions/15716/mysql-drop-user-if-exists](https://codereview.stackexchange.com/questions/15716/mysql-drop-user-if-exists)）

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-03-12T15:13:33.177

```
DROP USER 'user'@'localhost'; 
```

上面的命令将从数据库中删除用户，但是，**重要**的是要知道同一用户是否已经在使用数据库，直到用户关闭该会话，该会话才会结束。需要注意的是，删除的用户仍将访问数据库并执行任何操作。 [删除用户不会删除当前用户会话](http://dev.mysql.com/doc/refman/5.1/en/drop-user.html)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-09-09T11:47:56.393

将 phyzome 的答案（对我来说没有立即工作）与 andreb 的评论（这解释了为什么没有）结合起来，我最终得到了这个看似有效的代码，如果它处于活动状态，则暂时禁用 NO_AUTO_CREATE_USER 模式：

```
set @mode = @@SESSION.sql_mode;
set session sql_mode = replace(replace(@mode, 'NO_AUTO_CREATE_USER', ''), ',,', ',');
grant usage on *.* to 'myuser'@'%';
set session sql_mode = @mode;
drop user 'myuser'@'%'; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-11-03T12:52:55.357

在终端做：

```
sudo mysql -u root -p 
```

输入密码。

```
select user from mysql.user; 
```

现在删除用户'the_username'

```
DROP USER the_unername; 
```

将“the_username”替换为您要删除的用户。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2014-01-24T07:08:53.773

如果您有一个学生工作很多的学校服务器。您可以通过以下方式清理混乱：

```
delete from user where User != 'root' and User != 'admin';
delete from db where User != 'root' and User != 'admin';

delete from tables_priv;
delete from columns_priv;

flush privileges; 
```

* * *

## 回答 #14

> 赞同：-6
> 
> 时间：2009-02-28T15:52:04.880

如果您的意思是要从表中删除某个 drop（如果存在），则可以使用该`DELETE`命令，例如：

```
 DELETE FROM users WHERE user_login = 'foobar' 
```

如果没有行匹配，则不是错误。

# apache-flex - 在 flex 画布上绘制矩形是否有比

> ID：598193
> 
> 赞同：2
> 
> 时间：2009-02-28T15:50:01.797
> 
> 标签：apache-flex, actionscript-3, geometry, canvas

要从鼠标向下绘制“选择矩形”，鼠标移动然后在鼠标向上将其删除我目前执行以下操作：

我的板是画布，在鼠标按下时我创建了一个新的 UIcontainer 我设置了他的边框。我更新了与鼠标移动位置相关的宽度和高度，在鼠标向上时我删除了这个子 UIcontainer。

我是否必须为这种任务创建一个新组件，或者在 flex 中有更好（更轻的方式）？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-28T16:29:07.477

我会说你没看错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-28T16:31:28.280

这是一个[Flex 选择矩形](http://blog.jeethukarthik.com/flex-selection-rectangle/)示例，虽然我认为这不是更好/更轻松的方式，但也许您可以从中获得一些不错的想法。

# postgresql - 如何修复 Postgres，使其在突然关闭后启动？

> ID：598200
> 
> 赞同：23
> 
> 时间：2009-02-28T15:53:05.957
> 
> 标签：postgresql, recovery

由于突然断电，在我的本地机器上运行的 Postgres 服务器突然关闭。重新启动后，我尝试重新启动 Postgres，但出现此错误：

**`$ pg_ctl -D /usr/local/pgsql/data restart`**

```
pg_ctl: PID file "/usr/local/pgsql/data/postmaster.pid" does not exist
Is server running?
starting server anyway
server starting
$:/usr/local/pgsql/data$ LOG:  database system shutdown was interrupted at 2009-02-28 21:06:16 
LOG:  checkpoint record is at 2/8FD6F8D0
LOG:  redo record is at 2/8FD6F8D0; undo record is at 0/0; shutdown FALSE
LOG:  next transaction ID: 0/1888104; next OID: 1711752
LOG:  next MultiXactId: 2; next MultiXactOffset: 3
LOG:  database system was not properly shut down; automatic recovery in progress
LOG:  redo starts at 2/8FD6F918
LOG:  record with zero length at 2/8FFD94A8
LOG:  redo done at 2/8FFD9480
LOG:  could not fsync segment 0 of relation 1663/1707047/1707304: No such file or directory
FATAL:  storage sync failed on magnetic disk: No such file or directory
LOG:  startup process (PID 5465) exited with exit code 1
LOG:  aborting startup due to startup process failure 
```

数据目录中没有`postmaster.pid`文件。这种行为的原因可能是什么，当然出路是什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-03-02T10:58:05.663

你需要[pg_resetxlog](http://www.postgresql.org/docs/8.3/static/app-pgresetxlog.html)。但是，在此之后您的数据库可能会处于不一致的状态，因此请使用 转储它`pg_dumpall`，重新创建并重新导入。

造成这种情况的原因可能是：

*   您没有关闭磁盘上的硬件写入缓存，这通常会阻止操作系统在报告成功写入应用程序之前确保数据已写入。检查与

    `hdparm -I /dev/sda`

    如果它在“写入缓存”之前显示“*”，那么可能就是这种情况。[PostgreSQL 的源码](http://www.postgresql.org/ftp/source/v8.3.6/)有一个程序 src/tools/fsync/test_fsync.c，用来测试数据与磁盘同步的速度。运行它 - 如果它报告的所有时间都比你的磁盘对操作系统的欺骗时间短 3 秒 - 在 7500rpm 磁盘上，对同一位置的 1000 次写入测试至少需要 8 秒才能完成（1000/（7500rpm/ 60s))，因为它每条路线只能写一次。如果您的数据库位于 /var/tmp 分区以外的另一个磁盘上，则需要编辑此 test_fsync.c - 更改

    `#define FSYNC_FILENAME "/var/tmp/test_fsync.out"`

    至

    `#define FSYNC_FILENAME "/usr/local/pgsql/data/test_fsync.out"`

*   您的磁盘出现故障并且有坏块，请检查[badblocks](http://en.wikipedia.org/wiki/Badblocks)。

*   你的内存坏了，用[memtest86+](http://www.memtest.org/)检查至少 8 小时。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-28T17:57:00.743

在 PostgreSQL 邮件列表的存档中读取一些类似的消息（“磁盘上的存储同步失败：没有这样的文件或目录”）似乎表明存在非常严重的硬件故障，比简单的电源故障更糟糕。您可能必须准备好从备份中恢复。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-30T20:31:56.513

也有数据库损坏，我的行为

```
docker run -it --rm -v /path/to/db:/var/lib/postgresql/data postgres:10.3 bash
su - postgres
/usr/lib/postgresql/10/bin/pg_resetwal -D /var/lib/postgresql/data -f 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-06T16:21:40.733

我遇到了同样的问题，我正要从 db dump 转储、重新安装和导入（一个非常痛苦的过程），但是我只是尝试将其作为最后一个资源并且它有效！

`brew services start postgresql`

然后我重新启动，就是这样。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-08-07T05:06:40.013

运行启动而不是重新启动。执行以下命令：

```
$pg_ctl -D /usr/local/pgsql/data start 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-26T12:49:48.200

有几次这个问题，当我的笔记本电脑意外关闭时，在后台运行 PSQL 时电池电量非常低。

搜索完后我的解决方案是`Hard delete and Reinstall`，然后从 db dump 导入数据。

使用 brew 卸载并重新安装 psql 9.6 的 Mac 步骤

```
brew uninstall postgresql@9.6
rm -rf rm -rf /usr/local/var/postgresql@9.6
rm -rf .psql.local .psql_history .psqlrc.local l.psqlrc .pgpass

brew install postgresql@9.6

echo 'export PATH="/usr/local/opt/postgresql@9.6/bin:$PATH"' >> ~/.bash_profile
source ~/.bash_profile

brew services start postgresql@9.6

createuser -s postgres
createuser {ENTER_YOUR_USER_HERE} --interactive 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-04T01:23:28.827

正如其他人所说，停止+开始而不是重新启动对我有用。在 Docker 环境中，这将是：

```
docker stop <container_name>
docker start <container_name> 
```

或者在使用 Docker Compose 时：

```
docker-compose stop
docker-compose start 
```

# vb.net - 如何将两种相似的类型视为一种？

> ID：598207
> 
> 赞同：1
> 
> 时间：2009-02-28T15:58:25.537
> 
> 标签：vb.net, properties, types

在 VB.NET 中，我试图与 Web 服务（无法更改）通信以创建和更新客户数据。CreateCustomer 服务需要一个 ConsumerPerson 类型的对象，而 ChangeCustomer 服务需要一个 ChangeData 类型的对象。

这两个对象的属性完全相同，所以我认为只使用一个函数设置属性是明智的。

但是，我无法找到一种方法来告诉我的函数我想要填充 ConsumerPerson 或 ChangeCustomer 对象。

如何在没有后期绑定问题的情况下完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-28T16:00:53.910

使用界面！

声明一个接口 IFoo，并在您的子类 ConsumerPerson 和 ChangeCustomer 中实现其成员。这正是接口的用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-28T16:01:51.783

您创建一个两个类都实现的接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-28T16:05:39.857

界面听起来是您最好的方法。这是一个简短的代码片段。我选择了一个名为“Name”的字符串类型的简单属性。使用类的实际属性应该很容易修改。

```
Public Interface ICustomerData
  ReadOnly Property Name As String
End Interface

Public Class ConsumerPerson
  Implements ICustomerData

  Public ReadOnly Property Name As String Implements ICustomerData.Name
    Get
      return _name 
    End Get
  End Property
End Class

Public Class ChangeData
  Implements ICustomerData

  Public ReadOnly Property Name As String Implements ICustomerData.Name
    Get
      return _name 
    End Get
  End Property
End Class 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-28T16:02:18.023

不能用第二种数据类型重载你的函数吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-28T16:31:09.217

如果您无法更改对象，但它们共享相同的字段名称，则可以 xml 序列化数据并反序列化为其他类。- 您应该**强烈**考虑这对性能的影响；但是，它会为您提供所需的功能。

# php - '&' 在参数名称之前

> ID：598220
> 
> 赞同：23
> 
> 时间：2009-02-28T16:05:18.220
> 
> 标签：php, parameters

只是一个快速且毫无疑问简单的问题。我对 PHP 很陌生，正在查看一些现有的代码。我试图在谷歌上找到我的问题的答案，但无济于事。

有人可以让我知道参数 $var 之前的“&”符号是做什么的吗？

```
function setdefault(&$var, $default="")
{
  if (! isset($var))
  {
    $var = $default;
  }
} 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2009-02-28T16:07:28.307

通过引用传递它。

**嗯？** 通过引用传递意味着您传递变量的地址而不是值。基本上你正在创建一个指向变量的指针。

[http://us.php.net/language.references.pass](http://us.php.net/language.references.pass)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-02-28T16:07:45.827

这意味着该函数获取对参数原始值的引用`$var`，而不是该值的副本。

例子：

```
function add(&$num) { $num++; }

$number = 0;
add($number);
echo $number; // this outputs "1" 
```

如果`add()`函数签名中没有与符号，则回显将输出“0”，因为原始值从未更改。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-28T16:09:51.453

这意味着您通过引用[http://ca3.php.net/language.references.pass](http://ca3.php.net/language.references.pass)传递一个变量。简单地说，这意味着函数正在获取实际变量，而不是变量的副本。您在函数中对该变量所做的任何更改都将反映在调用者中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-28T16:07:20.320

这表明[参数是通过引用](http://docs.php.net/manual/en/language.references.pass.php)而不是通过值传递的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-28T16:07:43.860

`&`指通过引用传递；该代码所做的是检查传递给函数的变量是否实际存在于全局范围内。如果没有它，`&`它会首先尝试获取变量的副本，如果它不存在则会导致错误。

# jquery - jquery append和json数据的问题

> ID：598223
> 
> 赞同：1
> 
> 时间：2009-02-28T16:06:45.907
> 
> 标签：jquery, json, append

我无法完成这项工作：

```
$(function() {
    $(".button").click(function() {
        var newentry = $("input#entry").val();
        $.getJSON("/dictionary_request/", {entry: newentry}, function(json){
            $("span").empty();
            alert(json);
            $("span").append(json);
        });
    });
}); 
```

JSON 请求、清空的 span 和警报都可以正常工作，但 append 不能。我假设这是某种类型错误。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-28T16:10:17.757

[append](http://docs.jquery.com/Manipulation/append#content)方法需要一个字符串或 DOM 节点作为参数。你用一个对象（json）调用它。该对象的内容将取决于服务器发送的数据。警报会在您的屏幕上打印什么？使用[FireBug](http://getfirebug.com/)，您可以检查 json 对象可用的属性：`console.log(json)`.

# asp.net - 一起部署 DotNetNuke 和单独的 ASP.NET 应用程序 - 可能的问题？

> ID：598235
> 
> 赞同：6
> 
> 时间：2009-02-28T16:12:00.620
> 
> 标签：asp.net, deployment, dotnetnuke

我这样做是为了积极尝试阻止可能由此产生的任何潜在问题。情况是我们正在为客户开发一个 ASP.NET 应用程序，该应用程序将处理来自客户的在线订购。这个应用程序将使用他们当前 WinForms 应用程序使用的相同数据库（这里没有真正的问题）。

同时，我们正在使用 DotNetNuke 为他们开发一个新的前端网站。DotNetNuke 应用程序将简单地链接到 ASP.NET 应用程序，以便客户提交订单（无需他们来回通信等）

计划是将两个应用程序托管在客户端位置的同一个盒子上。我正在寻找的是可以防止两个应用程序之间可能发生冲突（web.config 冲突等）的潜在问题或设置提示。将两者托管在同一位置是否存在问题，应如何设置 IIS 等.?

如果还有任何外部资源可以解决这个问题，也请随时链接它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-05T21:58:02.590

选项 1：使所有应用程序将虚拟目录与根网站分开。然后让根文档将您重定向到该网站 (DNN) 的默认应用程序的正确子目录。

选项 2：（DotNetNuke 在根目录中，其他站点在子目录中）如果新应用程序不是使用 DotNetNuke 构建的，那么继承 web.config 会有很多问题，但您可以通过阻止继承根 web.config 来解决这些问题。基本上，您将以下内容添加到您的根 web.config(DNN) 文件中。

```
<location path="." inheritInChildApplications="false">
    <system.web></system.web>
</location> 
```

选项 3：正如 Scott 所说，创建具有不同子域的单独站点并将它们链接在一起。您可以设置重定向，以便whatever.com/order 将用户发送到order.whatever.com。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-13T23:23:01.667

仅供参考，如果您在 DNN 4.7-4.9.2（尚未验证 5.0）中使用 inheritInChildApplications，您将遇到 ScriptManager 错误，以前版本的 DNN 没有问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-02T01:27:37.720

我们在同一个 Windows 2003 服务器上为我们的公司站点托管了一个 DNN 站点，其中包含许多其他站点（.NET 2.0、SugarCRM，甚至一些在 IIS 中具有 PHP 扩展的 WordPress 实例）。这些网站是“独立的”网站，而不是默认网站的子网站。这是一个真正的大熔炉，而且效果很好。我们确实为 PHP、.NET 2.0 和 .NET 3.0/5 站点创建了一些单独的应用程序池，以确保它们不会相互干扰。

# php - 帮助 AJAX PHP 和 MYSQL 实时搜索！

> ID：598239
> 
> 赞同：1
> 
> 时间：2009-02-28T16:13:40.400
> 
> 标签：php, javascript, mysql, ajax, livesearch

我正在尝试为我的网站创建 Ajax 实时搜索。我目前可以在数据库中查询标题并在我的搜索下显示它们（见图 1.0）但是我需要使它们成为可选的，这样当你选择它们时，它会将输入值设置为该标题，非常类似于 wikipdia 搜索[维基百科搜索](http://en.wikipedia.org/wiki/Main_Page)。维基百科的例子基本上就是我要找的。任何帮助都会很棒。

谢谢， CHL 英国

[到目前为止我的搜索 http://www.webquark.co.uk/Search.bmp](http://www.webquark.co.uk/Search.bmp)

图 1.0

代码：PHP 数据库搜索

```
 <?

  // Get value coming from request
  $search = mysql_real_escape_string ($_GET['search']);

  // Connect to DB
  mysql_connect("localhost", "****", "****") or die(mysql_error()) ;
mysql_select_db("*****") or die(mysql_error()) ;
 $result = mysql_query("SELECT * FROM dbArticle WHERE title LIKE '%$search%' OR type LIKE '%$search%'  OR username LIKE '%$search%'");
  while($row = mysql_fetch_array($result))
  // Check if name exists in table
  if (!empty($row['title'])) {
  echo "".$row['title']."<br />";}
  if (!empty($row['type'])) {
  echo "".$row['type']."<br />";}
  if (!empty($row['username'])) {
  echo "".$row['username']."<br />";}
   //Close connection
  mysql_close();

?> 
```

代码：PHP搜索输入

```
<div id="navSearch">
  <form method="post" action="index.php?pageContent=search">
  <li><input type="text" maxlength="30" size="22" name="search" onkeyup="send_requestSearch(this);"/> </li>
  <li><input type="submit" value="Search" name="submit"/></li>
  <div class="liveSearch" id="livesearch"></div>
  </form> 
```

如果您需要查看我的 Javascript，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-28T16:20:23.690

您正在寻找的控件称为建议器。尝试在谷歌搜索“ajax 建议”。您将找到一些有关如何执行此操作的教程。这是一个：[链接](http://www.dynamicajax.com/fr/AJAX_Suggest_Tutorial-271_290_312.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-28T16:22:31.750

您可能需要使每个返回的搜索结果都启用 JavaScript，以便通过 OnClick 将其值填充到输入文本中。`id`使用-property标识 text-input 元素将有助于定位它。我相信你可以弄清楚其余的。我已经开始喜欢使用 JQuery 来完成这些类型的任务了。

您可能还希望结果具有 CSS 规则“ `cursor: pointer`”，以便它看起来像一个可点击的项目。

# javascript - 在 xmlHttpRequest 对象的生命周期中的哪一点被序列化的 XML 解析为 DOM？

> ID：598250
> 
> 赞同：2
> 
> 时间：2009-02-28T16:24:08.347
> 
> 标签：javascript, ajax, dom, xmlhttprequest

在 JavaScript 中，`xmlHttpRequest.responseXML()`返回一个`DOM Document`对象。该`DOM Document`对象是从 XML 结构的 HTTP 响应正文创建的。

在`xmlHttpRequest`对象的生命周期中的什么时候将 XML 字符串解析为`DOM Document`?

我可以想象它可能发生在两个地方之一。

*   什么时候`responseXML()`调用。
    在您知道确实需要它之前，无需浪费资源将 XML 字符串解析为 DOM。

*   收到 HTTP 响应时。
    如果服务器返回 text/xml 内容类型，那么很明显您已经请求了 XML，并且您可能希望将响应正文解析为 DOM，否则您无法对请求的数据做很多事情。

这两个选项都有一些优点，尽管我倾向于说 XML 字符串只有在`responseXML`被调用时才会被解析。

什么时候会解析 XML 字符串？

问的原因：我需要测量基于浏览器的 XML 反序列化性能，目的是将其与 JSON 反序列化性能进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-28T16:28:57.663

如果这取决于浏览器，我不会感到惊讶。为什么不介绍所有三个？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-28T19:22:47.730

将流在接收到时进行解析会很有意义。等待响应完成（或调用 responseXml 属性）意味着在接收最终字节和构建 DOM 之间引入了额外的延迟。似乎更好的方法是在接收流的同时构建 DOM，因此完成后 DOM 就可以使用了。

请注意，如果 Content 类型未指定 XML 类型，则 MSXML 不提供 DOM，并且 Mozilla 的实现允许您告诉它将接收到的内容视为 XML，尽管 Content-Type另有说明。

如果在访问属性之前不解析 DOM，则上述任何一项都不是必需的。该属性也可以简单地尝试解析。因为可以在接收到内容时构建DOM，所以上述是必要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-03-25T20:49:18.460

对于 Chrome，DOM 是在调用 responseXML() 时创建和解析的。

以下是该方法的来源：

```
Document* XMLHttpRequest::responseXML(ExceptionCode& ec)
{
    if (responseTypeCode() != ResponseTypeDefault && responseTypeCode() != ResponseTypeText && responseTypeCode() != ResponseTypeDocument) {
        ec = INVALID_STATE_ERR;
        return 0;
    }

    if (m_state != DONE)
        return 0;

    if (!m_createdDocument) {
        if ((m_response.isHTTP() && !responseIsXML()) || scriptExecutionContext()->isWorkerContext()) {
            // The W3C spec requires this.
            m_responseXML = 0;
        } else {
            m_responseXML = Document::create(0, m_url);
            // FIXME: Set Last-Modified.
            m_responseXML->setContent(m_responseBuilder.toStringPreserveCapacity());
            m_responseXML->setSecurityOrigin(document()->securityOrigin());
            if (!m_responseXML->wellFormed())
                m_responseXML = 0;
        }
        m_createdDocument = true;
    }

    return m_responseXML.get();
} 
```

# asp.net - ASP.NET Javascript 计时器

> ID：598251
> 
> 赞同：0
> 
> 时间：2009-02-28T16:24:34.007
> 
> 标签：asp.net, javascript

我在javascript中有一个倒数计时器，它由使用asp.net VB的代码调用。我找不到跟踪时间的方法，。

问题是，我无法获得回发后经过的时间，以便计时器继续滴答作响。你能帮我吗，。？？我真的很感激。，

这是我的代码片段：

asp.net VB 代码隐藏

```
 on page load{
        If Page.IsPostBack = True Then
            ClientScript.RegisterClientScriptBlock(Me.GetType, "timer_script",
           "<script language='javascript'>function mySubmit()</script>")

            ClientScript.RegisterStartupScript(Me.GetType, "timer_script", 
            "<script>countdown_clock();</script>")
        End If

        If Page.IsPostBack = false Then
            TimerTxtbx.Text = "00:06:10"   'hour:min:sec -> initialize timer
            ClientScript.RegisterClientScriptBlock(Me.GetType, "timer_script",
           "<script language='javascript'>function mySubmit()</script>")

            ClientScript.RegisterStartupScript(Me.GetType, "timer_script", 
            "<script>countdown_clock();</script>")
        End If
    }

    on button click{
        NextBtn.Attributes.Add("onclick", "mySubmit()")   'call a javascript function

        ClientScript.RegisterStartupScript(Me.GetType, "timer_script", 
        "<script>countdown_clock();</script>")
    } 
```

javascript代码：

```
function mySubmit()
{
    document.getElementById('TimerTxtbx').removeAttribute('disabled');
}

    function countdown_clock()
{                   
    var current_time;
    current_time = document.getElementById('TimerTxtbx').value;

    var hours = current_time.substring(0,2);
    var minutes = current_time.substring(3,5);
    var seconds = current_time.substring(6,8);  

    var n_seconds;
    var n_minutes = minutes;
    var n_hours = hours;

    if (seconds == 0)
    {
       n_seconds = 59;

       if (minutes == 0)
        {
        n_minutes = 59;
            if (hours == 0){
            alert('Time is up');
            return;
            }
                else{   
                n_hours = hours - 1;
               if (n_hours < 10)
                   n_hours = "0" + n_hours;
                }
            }
        else
        {
            n_minutes = minutes - 1;
            if (n_minutes < 10)
                n_minutes = "0" + n_minutes;
        }
    }
    else
    {
        n_seconds = seconds - 1;
        if (n_seconds < 10)
            n_seconds = "0" + n_seconds;
    }

      document.getElementById('TimerTxtbx').value = n_hours + ':' + n_minutes + ':' + n_seconds;

      setTimeout("countdown_clock()",1000); //function call and delay by 1sec

      document.getElementById('TimerTxtbx').setAttribute('disabled','disabled');
      }//end function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-28T16:48:46.557

我认为您的问题是您必须在提交时取消禁用文本框，否则文本不会在视图状态中被跟踪。

这段代码对我有用：

```
<form id="form1" runat="server">
<div>
    <asp:TextBox ID="TimerTxtbx" runat="server" />
    <asp:Button runat="server"  OnClientClick="mySubmit()"/>
</div>
</form> 
```

后面有代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        ClientScript.RegisterStartupScript(typeof (Page), "timer_script",
                                           "<script>countdown_clock();</script>");

        if (!IsPostBack)
        {
            TimerTxtbx.Text = "00:00:10";
        }
    } 
```

根据您的更新：

问题是您在按钮的 Click 事件处理程序中设置按钮的 OnClientClick 属性。

这基本上意味着在单击按钮之前它不会有任何效果，然后它对您没有用处。

将 OnClientClick 设置为 OnInit 或 Page_Load 之类的位置，或者像我的示例中那样在 aspx 中进行设置。这对你有意义吗？单击按钮时，必须已设置 OnClientClick 属性。

如果你打算做任何 ASP.NET 的东西，你真的很想阅读并真正了解页面生命周期。起点：

*   [http://www.15seconds.com/issue/020102.htm](http://www.15seconds.com/issue/020102.htm)
*   [http://msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

# xampp - 域到 XAMPP Apache

> ID：598274
> 
> 赞同：1
> 
> 时间：2009-02-28T16:35:33.873
> 
> 标签：xampp

我有一个带有静态 IP 的 WEB 服务器，安装了带有 XAMPP apache 的 Windows。我在 D 驱动器中创建了一个目录 WEBPROG，它是我所有的网站程序。我购买了一个域名并指向我的 WEB 服务器 IP。但我想直接指向 D:\WEBPROG，当我输入 www.mywebsite.com 时，它不会显示该网站。我必须输入 www.mywebsite.com/WEBPROG 然后它才会出现。我尝试了虚拟主机配置，但它似乎不起作用。尽管我已经搜索了许多网站以尝试他们的推荐，但有人可以就此提出建议，但它不起作用。

谢谢

盖德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-28T17:01:58.740

这是 XAMPP (apache/conf/extra) 中 httpd-vhosts.conf 的豁免：

```
NameVirtualHost *:80

<VirtualHost *:80>
    DocumentRoot /www/docs/dummy-host.example.com
    ServerName dummy-host.example.com
    ServerAlias www.dummy-host.example.com
    ErrorLog @rel_logfiledir@/dummy-host.example.com-error_log
    CustomLog @rel_logfiledir@/dummy-host.example.com-access_log common
</VirtualHost> 
```

将此配置用作模板，并确保将 DocumentRoot 指定为 d:/webprog。请注意，您需要 NameVirtualHost 才能使域名与 VirtualHost 指令一起使用。

# javascript - JavaScript/jQuery：事件触发两次

> ID：598276
> 
> 赞同：2
> 
> 时间：2009-02-28T16:35:43.543
> 
> 标签：javascript, jquery, events, google-chrome

我正在尝试使用 jQuery 进行一些事件绑定，并且在我的文档中准备好这个简单的代码：

```
$(document).ready(function() {
    $("p a").each(function(i, selected){
        $(selected).hover(
            function(event) { alert('over: ' + event.type); },
            function(event) { alert('out: ' + event.type); });
        }
    )
}); 
```

因此，当我将鼠标移到段落内的链接上时（选择器是“p a”），会弹出两次警报。因此， mouseenter 和 mouseleave 被触发两次。

这只发生在谷歌浏览器中。在 Internet Explorer 7、[Firefox](http://en.wikipedia.org/wiki/Mozilla_Firefox) 3、[Opera](http://en.wikipedia.org/wiki/Opera_%28web_browser%29)和[Safari](http://en.wikipedia.org/wiki/Safari_%28web_browser%29)中，这两个事件都只触发一次。

为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2011-10-28T01:14:35.803

我想这不能回答你的问题，但是这篇文章是在研究我自己的错误时出现的。原来问题是我无意中包含了两次外部javascript。

Just thought it would be worthwhile to document this for others who have the same problem. An obvious error that took a while to track down!

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-28T17:06:14.860

我认为警报实际上导致了 Chrome 中的额外事件。使用以下代码，我只看到一个事件。

```
$(document).ready(function() {
  $("p a").each(function(i, selected){
    $(selected).hover( 
      function(event) { $("p").append('<br>over: ' + event.type); }, 
      function(event) { $("p").append(' out: ' + event.type); });
    }
  )
}); 
```

# ruby - decode base64 with dollar sign in ruby 1.8.5

> ID：598280
> 
> 赞同：1
> 
> 时间：2009-02-28T16:42:36.727
> 
> 标签：ruby, base64, decode

I have base64-encoded string (with two dollar signs, so it's not a common base64 string)

The problem: Base64.decode64 (or .unpack("m")) decodes it just fine on my local machine(ruby 1.8.6), but with ruby 1.8.5 (the version used by Heroku) it doesn't work

Any ideas ?

**edit:**

I have :

$$YTo1OntzOjM6Im1pZCI7czo3OiI3MTE5Njg3IjtzOjQ6Im5hbWUiO3M6MjE6IkthbnllIFdlc3QgLSBTdHJvbmd lciI7czo0OiJsaW5rIjtzOjQ4OiJodHRwOi8vd3d3LmVhc3kxNS5jb20vMDIgU3Ryb25nZXIgKFNuaXBwZXQpMS5tcD MiO3M6OToiX3BsYXl0aW1lIjtzOjU6IjgzMjAwIjtzOjg6Il9uZXh0aWRzIjtzOjEzNDoiMjc1ODE0MDYsMjc0MDE1 NzAsMjI1MTU0MDMsMTU1ODM2NjYsMTYzMTUzMzksMjgwNDY5MTUsMzAzOTMxODksMzUyMDAyMTMsMjIwNTE1MzAsMj c1NTg1MTQsMTM3ODkyNTYsMTk4MTY5OTgsMzA0NzI4MDEsMTUyNTk5NzksMTg5OTkxMzciO30=

I successed in decoding it with '...'.unpack("m") locally but not on the heroku server (ruby 1.8.5, maybe the ruby version it's not the issue)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-28T17:57:18.357

The dollar sign is not part of the Base64 specification.

Simply strip the leading `$$` before unpacking:

```
str.sub(/^\$*/, '').unpack('m') 
```

To strip all non-Base64 characters, emulating new (Ruby 1.8.6) behaviour,

> `str.gsub(/[^ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\+\/]/, '').unpack('m')`

Ruby 1.8.6 will ignore all non-Base64 symbols (including the `$`) inside the string to decode, whereas 1.8.5 will stop processing at the first such character (see `pack.c` in the Ruby source.)

# facebook - Facebook 的 API 方法签名是否有 XSD 或类似声明？

> ID：598287
> 
> 赞同：2
> 
> 时间：2009-02-28T16:49:55.600
> 
> 标签：facebook, schema

我正在开发一个生成器来为 Facebook 的 API 创建一个 C# API 包装器。我刚刚完成了基本编码，除了似乎没有任何格式正确的所有 API 方法的方法签名声明。

我可以解析[元素类型的模式](http://api.facebook.com/1.0/facebook.xsd)以找出所有方法的名称（它们是结尾的任何东西`_response`——它们都有相应的方法）。签名[记录在他们的 wiki 上](http://wiki.developers.facebook.com/index.php/API)，但似乎没有一个地方都定义了它们，就像在模式中一样。

除了屏幕抓取维基之外，还有什么建议吗？

* * *

更近一步：所有签名似乎都在[API 测试控制台](http://developers.facebook.com/tools.php?api)页面上的 JSON 中定义。当然，这对打字没有帮助，但是如果我要进行屏幕抓取，将它们全部放在一个地方会减少工作量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-01-26T14:59:29.483

Facebook 从未发布过这样的文档，并且与此问题相关的 REST API 已被弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-28T12:32:35.750

[在http://api.facebook.com/1.0/facebook.xsd](http://api.facebook.com/1.0/facebook.xsd)有一个 Facebook XSD 。它定义了完整的架构，并整齐地打包了您正在寻找的信息。无需筛选：-p

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-01-26T13:49:39.357

您应该考虑将 C# SDK 用于 Graph API。它可能没有您正在寻找的类型安全性，但它相当完整，可以与各种 .net 应用程序类型（MVC、WinForms、ASP.NET 等）一起使用

[http://facebooksdk.codeplex.com/](http://facebooksdk.codeplex.com/)

# sql - 多个查询以避免连接？

> ID：598288
> 
> 赞同：4
> 
> 时间：2009-02-28T16:50:11.077
> 
> 标签：sql, linq-to-sql

我注意到，一旦我将联接添加到我的一些查询中，执行这些查询所花费的时间不仅仅是完成多个查询。

时间包括页面加载和平均超过 20 个页面加载。

7-9 个没有连接的查询
159 毫秒

2 个连接的 3 个查询
235 毫秒

考虑到它们似乎对性能有如此重大的影响，我是否应该继续进行多个查询而不是连接？我什至可以优化多查询方法，因为在这些测试期间我什至是延迟加载。

**编辑**

为了这个问题，我会创建一些虚假信息。

Table Objects
ID (int, identity, PK, clustered index)
UserID (int, nonclustered index)
CategoryID (int, nonclustered index)

表用户
ID（int、identity、PK、聚集索引）

表类别
ID（int、identity、PK、聚集索引）

很简单。这是对 Objects 表的双重内连接查询。分别查询所有 3 个似乎比连接更快。

连接的查询计划显示 42% 完成了 2 次聚集索引搜索，23% 是聚集索引扫描，其余的是 Top N 排序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-28T16:54:59.940

如果您无缘无故地进行连接，当然可以。通常，您加入表的原因是能够提取相关数据并进行处理。您上面的问题也没有考虑到您需要将这些数据重新组合在一起的编程时间（可能通过循环结构或类似的东西）。

查询分析应该是这里的第一步。我对您的特殊 SQL 风格不是很熟悉，但它可能类似于 EXPLAIN。

如果我不得不根据我在这里的有限信息给出一个可能的罪魁祸首，那将是缺少索引。您加入的字段是否已正确编入索引？这可以获得巨大的性能提升。第二，你加入合适的领域了吗？例如，如果您将两个字符串连接在一起，您的性能将比连接整数或其他优化字段差得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-28T17:01:40.080

不，您实际上应该尝试另辟蹊径。您应该尽量减少查询。如果做得正确，那是最快的。

检查表上是否有正确的索引。例如，对于这样的查询：

```
select a.Some, b.Other
from TableA a
inner join TableB b on b.Id = a.Id 
```

您应该确保 TableB.Id 字段上有索引。表的主键通常默认获取一个索引，但其他索引你必须自己创建。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-28T16:58:10.447

我建议您查看实际的查询计划并了解响应不同的原因。也许它会突出显示添加索引的表扫描建议？

做连接更昂贵。这并不意味着您不应该使用它们。

将有助于查看您正在编写的 SQL...（由 LINQ to SQL 生成）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-28T16:53:38.227

您是否尝试过通过分析器使用联接运行查询，以查看您是否采取了任何措施来优化它们？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-28T17:21:21.360

如果您运行这些只是为了在查询分析器中获取数据，那么多个查询就可以了，但如果您从 Web 应用程序或控制台应用程序运行它们，那么您将需要优化为 1 个查询。即使需要更长的时间，您也会看到性能上的提升，因为您不会多次访问数据库。您访问数据库的次数越少，您的前端性能就越好。我会努力重新做你的查询，只做一个。看起来您的表已经足够规范化和索引，您应该能够将其归结为一个查询。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-13T13:13:23.433

我会尝试摆脱所有典型的连接。例如，我要修改：

```
select t1.id, t1.name, t2.gpa from t1 join t2 on t1.id =t2.id 
```

这样：

```
select t1.id, t1.name, t2.gpa from t1, t2 where t2.id = t1.id 
```

# asp.net-mvc - 在 .NET 3.5 ASP.NET MVC 应用程序中使用 Google Maps API

> ID：598289
> 
> 赞同：6
> 
> 时间：2009-02-28T16:52:51.037
> 
> 标签：asp.net-mvc, google-maps, .net-3.5

我有一个到目前为止非常简单的 ASP.NET MVC 应用程序，但我想将行车路线页面添加到客户端位置。我看到很多使用传统代码隐藏模型的示例，但没有使用 ASP.NET MVC。该应用程序使用母版页和内容页。

我对 ASP.NET MVC 很陌生，所以请耐心等待。任何这样做的例子将不胜感激。

PS：如果需要，我并不完全反对在应用程序中集成类型页面后面的标准代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-28T18:39:01.970

我认为 tvanfosson 是正确的；您应该查看 JavaScript 示例。您使用 ASP.NET MVC 的事实不会真正影响您的 Google 地图代码。就像在标准 ASP.NET 应用程序中一样，在您的一个视图内容页面中编写 Google 地图代码，甚至只是在纯 HTML + JavaScript 应用程序中编写。唯一的区别是您需要动态添加 JavaScript 变量或参数，以便您的 Google 地图代码可以使用它。

我认为您不应该将任何逻辑放在代码隐藏文件中。将逻辑保留在控制器中将使您的项目更清洁，并且在这里使用代码隐藏不会真正帮助您。而是让您的控制器执行逻辑并将结果交给 ViewData 中的视图。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-28T18:01:00.187

我可能会寻找通过 Javascript 而不是通过 .NET 接口进行交互的示例。查看[http://code.google.com/apis/maps/documentation/index.html](http://code.google.com/apis/maps/documentation/index.html)上的 Google Maps API 文档，http://code.google.com/apis/maps/documentation/examples/index上的示例[。 .html](http://code.google.com/apis/maps/documentation/examples/index.html) _

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-28T18:28:49.327

我使用 Google Maps API 来满足与您完全相同的需求（行车路线，以及燃油经济性计算等）。我通常会做的是从后端的数据库中提取我需要的内容，并将其结构化为某种类型的列表，然后我可以填充隐藏的控件或文字。然后在前端，我将让 JavaScript 代码将其分开并将请求发送到地图 API。

我不知道它可能与 ASP.NET MVC 框架有多大不同，但我想不会有太大的不同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-11T15:12:33.907

这里有一篇关于在 ASP.NET MVC 中使用 Google Maps 的博客文章：[Using Google Maps with the MVC Framework](http://mikehadlow.blogspot.com/2008/10/using-google-maps-with-mvc-framework.html "将 Google 地图与 MVC 框架结合使用")

编辑：该解决方案对我不起作用，可能是由于使用旧版本的 MVC 框架构建的。为了修复它，我必须在项目的 Web.Config 中替换以下行：

```
<add namespace="Microsoft.Web.Mvc"/> 
```

使用以下行：

```
<add namespace="System.Web.Mvc.Html" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-08-12T10:31:55.160

看看这个项目（[Google map control for ASP.NET MVC](http://googlemapmvc.codeplex.com/)）。也许它可以帮助您创建一些包装您想要的功能的助手。

# import - OpenMP：foo() 和 bar() 有什么区别

> ID：598295
> 
> 赞同：3
> 
> 时间：2009-02-28T16:55:02.983
> 
> 标签：import, openmp

```
void foo(void) {
    #pragma omp parallel
    {
        #pragma omp single
            {fprintf(stderr, "first part\n"); }
        #pragma omp barrier   
        #pragma omp single
           { fprintf(stderr, "second part\n"); }
    }
}
void bar (void) {
    #pragma omp parallel
    {
        #pragma  omp sections
        {
            fprintf(stderr, "first part\n"); 
             #pragma  omp section
             fprintf(stderr, "second part\n"); 
         }
    }
} 
```

Q1- foo() 和 bar() 是等价的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-28T17:18:24.003

它们*不是*等价的。

`foo()``fprintf`将依次 执行这两个（部分）。`bar()`可以并行执行它们。

如需详尽的参考资料，您可以参考[IBM 编译器文档](http://publib.boulder.ibm.com/infocenter/cellcomp/v101v121/topic/com.ibm.xlcpp101.cell.doc/compiler_ref/prag_omp_sections.html)。

本质上，在 的情况下`foo()`，单个工作线程处理`first part`，然后完成并与主线程重新同步（`barrier`顺便说一下，隐含在`single`构造的末尾。）一个新的工作线程然后处理`second part`，完成和重新同步与主线程。

在 的情况下`bar()`，一个单独的工作线程处理每个部分（第一个部分，`first part`，是一个隐式部分。）工作线程并行完成工作。

> ### #pragma omp 并行
> 
> omp 并行指令明确指示编译器并行化选定的代码块。当遇到并行区域时，就会形成一个逻辑线程组。团队中的每个线程都执行并行区域内的所有语句，工作共享结构除外。工作共享结构中的工作分布在团队中的线程之间。
> 
> 在可以并行化循环之前，循环迭代必须是独立的。一个隐含的屏障存在于并行化语句块的末尾。
> 
> 嵌套的并行区域始终是序列化的。
> 
> ### #pragma omp 单曲
> 
> omp single 指令标识必须由单个可用线程运行的一段代码。
> 
> 除非指定 nowait 子句，否则在并行化语句块的末尾存在隐含的障碍。
> 
> ### #pragma omp 部分，#pragma omp 部分
> 
> omp section 指令在绑定到定义的并行区域的线程之间分配工作。
> 
> omp section 指令对于 omp section 指令内的第一个程序代码段是可选的。后面的段必须以 omp 段指令开头。所有 omp section 指令必须出现在与 omp section 指令相关的程序源代码段的词法结构中。
> 
> 当程序执行到达 omp section 指令时，由以下 omp section 指令定义的程序段被分配以在可用线程中并行执行。除非指定 nowait 子句，否则在与 omp 节指令关联的较大程序区域的末尾隐式定义屏障。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-28T17:20:04.967

[在此资源](http://www.ncsa.uiuc.edu/UserInfo/Resources/Software/Intel/Compilers/8.1/f_ug2/par_prg.htm)的帮助下，这是我对 OpenMP 的一些记忆。

*   `SECTION`指令“为任意顺序代码块指定并行执行。每个 SECTION 由团队中的一个线程执行一次。”

*   `SINGLE`指定一个代码块“其中只允许一个线程执行代码；未选择执行此部分的线程将忽略该代码。”

*   指令强制所有线程在`BARRIER`该点相遇，从而产生一个块，直到所有线程都赶上。

# python - 什么时候（不）适合将依赖项与应用程序捆绑在一起？

> ID：598299
> 
> 赞同：14
> 
> 时间：2009-02-28T16:59:37.823
> 
> 标签：python, dependencies, distribution, packaging

**概括**

我最近与我的一个应用程序所依赖的框架的创建者进行了对话。在那次谈话中，他顺便提到，如果我将他的框架与我的应用程序捆绑在一起，并向最终用户交付一个我知道与我的代码一致的版本，这将使我的生活更简单。直觉上，我一直试图避免这样做，事实上，我一直在努力分割自己的代码，以便在不占用整个项目的情况下重新分配部分代码（即使任何人都很少有机会重用任何代码）它）。然而，在考虑了一段时间之后，我无法想出一个特别好的理由来*这样*做。事实上，现在我已经考虑过了，我看到了一个非常有说服力的案例来捆绑*我所有*较小的依赖项。我已经列出了利弊清单，我希望有人能指出我遗漏的任何东西。

**优点**

*   版本的一致性意味着更容易测试和故障排除。
*   应用程序可能会覆盖更广泛的受众，因为要安装的组件似乎更少。
*   对依赖项的小调整可以更容易地在下游进行并与应用程序一起交付，而不是等待它们渗透到上游代码库中。

**缺点**

*   包含依赖项的更复杂的打包过程。
*   用户最终可能会在他们的机器上获得多个依赖项副本。
*   根据 bortzmeyer 的回应，无法升级单个组件存在潜在的安全问题。

**笔记**

作为参考，我的应用程序是用 Python 编写的，并且我引用的依赖项是“轻量级”的，我的意思是很小且不常用。（所以它们并不存在于所有机器上，甚至不存在于所有存储库中。）当我说“打包”我的应用程序时，我的意思是在我自己的源代码树下分发，而不是使用驻留在我的包内的脚本安装，所以会有不可能有冲突的版本。我也仅在 Linux 上进行开发，因此无需担心 Windows 安装问题。

话虽如此，我也有兴趣听到关于更广泛（与语言无关）打包依赖问题的任何想法。是我遗漏了什么，还是我只是想多了一个简单的决定？

**附录 1**

值得一提的是，我对下游打包者的需求也相当敏感。我希望尽可能简单地将应用程序包装在特定于发行版的 Deb 或 RPM 中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-28T18:03:58.683

我赞成捆绑依赖关系，*如果*使用系统进行自动依赖关系解析（即 setuptools）是不可行的，并且*如果*你可以做到这一点而不会引入版本冲突。您仍然需要考虑您的应用程序和您的受众；认真的开发人员或爱好者更有可能希望使用特定（最新）版本的依赖项。捆绑东西可能对他们来说很烦人，因为这不是他们所期望的。

但是，特别是对于应用程序的最终用户，我严重怀疑大多数人是否喜欢搜索依赖项。就复制副本而言，我宁愿多花 10 毫秒下载一些额外的千字节，或者在额外兆的磁盘空间上花费一分钱，而不是花 10 多分钟在网站上搜索（可能会下降） )、下载、安装（如果版本不兼容可能会失败）等。

我不在乎我的磁盘上有多少个库副本，只要它们不妨碍彼此。磁盘空间非常非常便宜。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-28T17:24:01.713

你不能只依赖这些依赖项的某个版本吗？[例如，在带有setuptools](http://peak.telecommunity.com/DevCenter/setuptools)的 Python 中，您可以指定它需要的确切版本，甚至可以给出一些条件，例如 <= > 等。这当然仅适用于 Python 和特定的包管理器，但我个人总是首先尝试不要捆绑所有内容。通过将其作为 Python Egg 发布，您还将自动安装所有依赖项。

您当然也可以使用双向策略来为您自己的包提供仅包含依赖项链接的包，但仍以某些安装程序（如时尚）提供完整的设置。但即便如此（在 python 的情况下）我还是建议简单地将鸡蛋与它捆绑在一起。

有关鸡蛋的一些介绍，请参阅[我的这篇文章](http://mrtopf.de/blog/python_zope/a-small-introduction-to-python-eggs/)。

当然，这是 Python 特有的，但我认为其他语言可能有类似的打包工具。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-02T20:20:52.503

如果您为最终用户生产软件，目标是让客户使用您的软件。任何阻碍都会适得其反。如果他们必须自己下载依赖项，他们可能会决定避免使用您的软件。您无法控制库是否向后兼容，并且您不希望您的软件因为用户更新了他们的系统而停止工作。同样，您不希望客户使用旧库安装旧版本的软件并让系统的其余部分中断。

这意味着捆绑通常是要走的路。如果您可以确保您的软件在不捆绑依赖项的情况下顺利安装，而且工作量更少，那么这可能是一个更好的选择。这是关于什么让您的客户满意。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-04T09:32:22.560

在将库/框架/等与应用程序捆绑在一起的缺点中似乎忘记了一个重要的点：安全更新。

大多数 Web 框架都充满了安全漏洞，需要经常打补丁。无论如何，任何库都可能因安全漏洞而不得不在某一天或另一天升级。

如果您不捆绑，系统管理员将只升级库的一份副本并重新启动依赖的应用程序。

如果你捆绑，系统管理员可能甚至不**知道**他们必须升级一些东西。

So, the issue with bundling is not the disk space, it's the risk of letting old and dangerous copies around.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-02T20:05:06.987

对于 Linux，甚至不要考虑捆绑。你并不比包管理器或打包者聪明，而且每个发行版都采用自己的方式——如果你试图按照自己的方式行事，他们不会高兴的。充其量，他们不会费心打包你的应用程序，这不是很好。

请记住，在 Linux 中，会自动为您引入依赖项。这不是让用户得到它们的问题。它已经为你完成了。

对于 Windows，请随意捆绑，您自己在那里。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-28T17:16:29.093

只是我的经验，持保留态度。

我对我编写的几个开源库的偏好是尽可能地独立于其他库。原因是，我不仅要与我的其他库一起分发，而且我还必须更新我的应用程序以实现兼容性，因为其他库也已更新。

从我使用的其他带有“通用”库依赖项的库中，我最终总是需要在我的系统上安装多个版本的通用库。我使用的小众库的相对更新速度并没有那么快，而普通库的更新频率更高。版本控制地狱。

但这是笼统地说。如果我现在可以通过合并依赖项来帮助我的项目和用户，我一直在关注该决定的下游和后期影响。如果我可以管理它，我可以自信地包含依赖项。

与往常一样，您的里程可能会有所不同。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-28T20:14:12.613

我总是包含我的 Web 应用程序的所有依赖项。这不仅使安装更简单，而且即使系统上的其他组件升级，应用程序也能保持稳定并按照您期望的方式工作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-28T20:19:48.217

当心再现经典的 Windows DLL 地狱。一定要尽量减少依赖的数量：理想情况下，只依赖于你的语言及其框架，如果可以的话，别无其他。

毕竟，保留硬盘空间已不再是目标，因此用户不必关心拥有多个副本。此外，除非您的用户数量很少，否则请务必自行承担打包的责任，而不是要求他们获取所有依赖项！

# objective-c - 我在哪里可以找到所有关于 Objective-c 和可可的 Apple 指南？

> ID：598300
> 
> 赞同：2
> 
> 时间：2009-02-28T17:00:07.293
> 
> 标签：objective-c, cocoa

我发现 xcode-builtin-documentation 阅读器很难使用。我想查看所有可用指南的根源，以了解我必须继续阅读多长时间才能开始阅读。一直有一些新指南出现在我面前，我想知道它们有多少。

某处有概述吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-28T17:09:37.737

[从http://developer.apple.com/mac](http://developer.apple.com/mac)开始- 那里有很多文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-28T17:09:05.617

整个文档可以在[developer.apple.com](http://developer.apple.com)上在线浏览。

豹参考
[http://developer.apple.com/reference/](http://developer.apple.com/reference/)

豹指南
[http://developer.apple.com/documentation/](http://developer.apple.com/documentation/)

几乎总是搜索给出相当准确的结果，所以使用谷歌

> NSString 网站：developer.apple.com

或使用页面上的搜索字段。

另外应该说，如果您右键单击 Xcode 帮助中的一篇文章，它会提供您在浏览器中打开文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-10T16:09:53.197

对于 Cocoa，您的起点是[Cocoa 入门](http://developer.apple.com/referencelibrary/GettingStarted/GS_Cocoa/index.html#//apple_ref/doc/uid/TP30001088)。对于 Objective-C，您的出发点是[使用 Objective-C 进行面向对象编程](http://developer.apple.com/documentation/Cocoa/Conceptual/OOP_ObjC/Introduction/chapter_1_section_1.html)。在这些文档中的每一个中，您都可以找到指向其他文档的链接。

Mac OS X API 的根是[Reference Library](http://developer.apple.com/referencelibrary/)。从此时起，您可以访问所有其他文档。

# language-design - 谈到编程语言，Magic 的定义是什么？

> ID：598318
> 
> 赞同：5
> 
> 时间：2009-02-28T17:07:13.907
> 
> 标签：language-design

“魔法”这个词在这里被广泛使用，例如“语言 X 有太多魔法”或“平台 Y 通常避免魔法”。然而，这个词的定义似乎很不明确，人们看到它就知道了。例如，Java 被认为包含的魔法很少，但它的垃圾收集器对程序员隐藏了很多东西。如果魔术只是意味着隐藏细节的抽象，那么既然没有人再用汇编语言编写大型程序，为什么它被认为是一件坏事呢？如果魔法意味着更多，那么它意味着什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-28T17:17:32.960

“任何足够先进的技术都与魔法无异”——Arthur C. Clarke。

实际上并不完全如此——魔法用于复杂和隐藏而不是高级（尽管可能设计者认为他们是高级的），例如在过程调用（COM 线程模型）之前需要特定状态的系统以及“自动”类型转换（VB 变体，Javascript ==，Java 自动装箱）。

一旦系统向程序员隐藏了无法预测的细节，它们就会变得神奇。你被困在用你不懂的语言重复调用，因为它在过去产生了正确的效果。那是坏魔法，或巫术。

还有很好的魔法——http: [//aggregate.org/MAGIC/](http://aggregate.org/MAGIC/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-02-28T17:17:28.123

当你忽略它/你不知道它是如何工作的时候，它就是魔法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-28T17:41:34.510

在微软，这往往有两种使用方式

1）以消极的方式（可能是最常见的用法）。例如，有人可能会说“我不明白；首先您将重构 API，然后您将保留旧 API 并在它们之间有一个执行魔术的层？”

这意味着魔法组件太复杂、太未定义或太“某事”。

另一种负面情况是当某些事情被天真地定义时：这通常发生在有人假设一个复杂问题有一个简单的解决方案时，因为他们没有意识到问题真的很复杂。 [Raymond Chen 的博客](http://blogs.msdn.com/oldnewthing/)充满了这类例子。

2）“魔法”一词很少被积极使用。但它确实发生了。有用地指代执行复杂任务的事物。对我来说，NTFS 就是那种魔法。NTFS 非常非常成熟，并且在一些非常简单的 API 后面隐藏了很多复杂性。编译器也可以通过这种方式被视为“魔法”——你真的深入了解 C++ 编译器的工作原理吗？我不 - 我只是相信他们会这样做。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-28T17:51:12.973

魔术与您的理解非常相关。

在开始用 Java 编写之前，我写了相当多的 C 和 C++。我必须分配和释放我所有的内存。一旦我开始出现内存泄漏，这并不是很有趣。一旦我开始用 Java 编写代码，我就（基本上）知道幕后发生了什么，以便创建我的所有实例对象。因此，对我来说，它不像对开始使用 Java 的人那么神奇（我已经完成了分配，但它如何实际存储对象并知道何时释放它们对我来说更“神奇”） （谁从来没有手动处理内存。）

另一个例子是 ORM。我在项目早期推出了自己的临时对象关系映射结构，直到我有时间真正放下心来学习 Hibernate 或类似的东西。我必须编写诸如 ResultSet 映射器、延迟加载和一些基本缓存之类的东西。现在，当我回去用更成熟的 Hibernate 或 JPA 映射实体替换这些东西时，我仍然会对正在发生的事情有一个基本的了解。如果您从未使用过 JBDC 或类似的东西，那么您将真正知道的是数据从数据库到对象再返回。

每个人在他们的职业生涯中都会处理一定程度的魔法。我们不可能知道一切。魔术真的可以成为抽象的代名词。当它变得“太神奇”时，就是抽象开始掩盖你需要能够控制的东西。前几天的一个例子是，在一个 JSF 程序中，我不知道如何启动一个 JSF 上下文。JSF 只是在您第一次导航到 JSF 页面时执行此操作。我需要从常规 servlet 启动上下文。我最终不得不制作一个虚拟的 JSF 页面来处理它。我根本没有时间在这个项目中学习 JSF 上下文管理的“魔力”。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-02-28T17:20:22.860

魔术具有与其他上下文相同的含义：具有隐藏的复杂性和逻辑的东西。这并不总是坏事，但对于程序员（非技术人员的魔术师）来说却是。当你（可以）知道它是如何工作的时候，魔法就不是魔法。

例如，魔术常量：具有隐藏含义的常量。

当我们谈论一些混淆代码中发生的“黑魔法”时，我们的意思是在这段代码中发生了一些我们不理解的事情；或者发生了一些非书面但对代码阅读器隐藏的事情。

在某些情况下，你会以积极的方式谈论魔法：当你看不到一个简单的东西的真正复杂性时，就很难理解如何使用它。例如，一些非常复杂的代码可以隐藏在一个很小且易于使用的接口类中。这看起来很神奇，因为它用简单的用法做复杂的事情。那是很好的魔法（但很少见）。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-02-28T17:32:26.123

例如，Ruby on Rails 就是 Magic。

在基本层面上，尤​​其是当你天真地接近时，在你的极简代码和数据库之间有一层厚厚的一层，然后魔法发生了，你得到了粗鲁的功能和所有其他的东西。

有些人可以忍受那种非常高水平的体验，但最终你会开始遇到障碍，你需要了解“技巧”的“秘密”，这样你就可以更好地操纵它以达到你的目的。

语言本身并没有太多的魔力（好吧，也许 Prolog ——它的核心有点神奇），但现代框架和中间件可能充满了魔力。

坦率地说，每当你遇到一个系统或组件做“令人惊奇的事情”并且你想知道“他们是如何做到的”时，这就是魔法。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-02-28T18:21:03.480

有趣的是：该术语`magic`与形式编程语言相关，这是计算机科学的理论基础之一。在 Morgan 的《从规范编程》一书中，我们对魔法有这样的定义：

```
w:[true, false] 
```

该符号的形式为：

```
w:[P, Q] 
```

并表示一个程序，当在一个为真的状态下执行时`P`，将在一个为真的状态下终止`Q`，同时仅更改`w`.

因此，在这种情况下，“魔术”是一个不可行的程序，它可以将程序从任何状态（因为`true`总是`true`）变成不可能的（因为`false`永远不可能`true`）。

一个更简单的程序是：

```
w:[true, true] 
```

这是始终终止但不保证特定结果的程序。这可以通过一个简单的`skip`.

显然，当人们谈论程序时，这个技术定义被滥用了`magic`，因为这应该意味着一个可证明不可行的程序。尽管如此，这个术语仍然是通俗的，因为当我们不知道或不了解某事如何运作时，可以想象在幕后发生了一些神奇的事情。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-28T18:45:09.693

当你不理解它时，你称它为“魔法”。

人们习惯于在中世纪做/知道/说一些其他人无法理解的事情时被烧死。他们被指控做“魔术”。

当您不了解代码/框架/语言的作用时，您将其称为“魔术”。称之为“魔法”比花时间去理解它更容易。

魔法不存在！

与其称某事为“魔法”，不如让你的手弄脏并了解那件事在做什么……或者称其为“（你的）知识中未探索的部分”。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-02-24T04:46:59.787

行话文件附录中的经典魔术故事。

[http://catb.org/jargon/html/magic-story.html](http://catb.org/jargon/html/magic-story.html)

去读吧。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-28T17:10:24.803

对于 Java

*   GC - 恕我直言，这*不是魔法*，就像有一个家庭清洁工
*   自动装箱 -*魔法*- 将某物隐形变形为其他东西

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-02-28T17:40:07.023

**未知行为**经常被称为*魔术*。有些事情没有明显的原因发生。

但也有不为人知的国王：

*   开发人员方面缺乏关于事物如何工作的知识。（例如 GC，它不是魔法，只是很少有开发人员真正费心去发现和理解它的基础）

*   未定义的行为*魔术*，事情发生在幕后，并且没有关于它们实际工作的公开知识。这是编程中真正的魔力。

例如 Rails，它不是魔法，而 Ruby 也不是魔法，但对于一些人来说，如果他们从不费心去理解内部结构（这是公共知识并且可用），他们肯定会看起来如此。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-02-28T18:21:57.657

我使用术语“黑魔法”的一个上下文是字节码操作（在 Java 中）——在运行时转换程序代码，使其执行与普通代码不同的操作。很多时候，字节码操作非常有用，但也很容易用它来打自己的脚。

许多框架和中间件使用[AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming)和字节码操作来实现横切关注点。这减少了程序员的工作量，但在某些情况下，它可能会使调试系统行为变得困难。而且很容易在字节码转换中留下一些细微的错误。

我自己做了一些字节码操作，所以基本上我知道如何更改字节码指令，从这个意义上说，这对我来说并不是“魔法”，我不明白它是如何工作的。但我仍然将其称为“魔术”，因为它改变了代码正常工作的方式，并且在被更改的类的源代码中不可见。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-03-01T11:30:47.467

有关黑魔法的一些不错的示例，请查看 perl 源代码中的文档；-)

# php - 将任意 html 传递给弹出窗口

> ID：598331
> 
> 赞同：0
> 
> 时间：2009-02-28T17:14:50.253
> 
> 标签：php, javascript

我从 PHP 文件中调用我的 makewindows 函数，如下所示：

```
echo "<a href='#' onclick=\"makewindows(" . $html . "); return false;\">Click for full description </a></p>"; 
```

这会生成正确的 html，从而生成一个包含来自 $html 的 html 的弹出窗口。例如（大部分 html 已被剪断）：

```
<a href="#" onclick="makewindows(&quot;<P align=center><SPAN style=\&quot;FONT-FAMILY: Arial\&quot;>&quot;); return false;">Click for more</a> 
```

现在，我想使用相同的方法在链接上方制作一个可点击的图像，以显示图像而不是 html。

我在 php 中创建了一个 $imagehtml 变量，如下所示：

```
$imagehtml = "<img src='".$imageSrc."' >"; 
```

$imageSrc 是另一种方法的结果，但始终是图像的有效 url

将 $imageHtml 传递给 makewindows 应该可以工作（它不是标准投诉 html 的事实是无关紧要的，至少关于我尝试失败的原因。独立 html 文件中的同一行 html 显示在每个浏览器中都很好。）

这将产生以下 html：

```
<a href="#" onclick="makewindows(<img src='removed.jpg' >); return false;">
<img src="removed.jpg" width="250" height="250"></a> 
```

这完全失败了。它与图像路径无关，因为根本没有创建窗口。我所做的只是改变传递的变量，不管 html 的内容如何，​​肯定还是应该创建窗口？

即使尝试传递 about:blank 也会失败，例如定义 imagehtml 如下：

```
$imagehtml = "about:blank"; 
```

结果是：

```
<a href="#" onclick="makewindows(about:blank); return false;">Click for full description </a> 
```

仍然没有窗户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-28T17:23:57.813

你可能做错了什么。

假设您想将此 HTML 传递给 HTML 属性内的 JavaScript 函数调用：

```
<img src="removed.jpg" width="250" height="250"> 
```

然后这样做就足够了：

```
$html = '<img src="removed.jpg" width="250" height="250">';
echo '<a href="#" onclick="makewindows(' . htmlspecialchars(var_export($html, true), ENT_QUOTES) . '); return false;">Click for full description</a></p>'; 
```

该[`var_export`函数](http://docs.php.net/var_export)将值转换为 (PHP) 等效表达式，该[`htmlspecialchars`函数](http://docs.php.net/htmlspecialchars)最终将 HTML 元字符转换为字符引用。

这可能不是最优雅的方式，但它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-28T17:26:09.150

你想要这样的东西：

```
$str = '<img src="...">';

echo '<a href="#" onclick="makewindows('
    . htmlspecialchars(json_encode($str))
    . '); return false;">Click for full description</a></p>'; 
```

这将进行正确的编码/转义。

# php - PHP 中的 ORM 框架将如何构建？

> ID：598332
> 
> 赞同：2
> 
> 时间：2009-02-28T17:16:28.050
> 
> 标签：php, orm, oop, frameworks

我想在 PHP中构建一个小型 ORM（[对象关系映射）框架。](http://en.wikipedia.org/wiki/Object-relational_mapping)我想混合使用 MVC 方法，与 CodeIgniter 使用的控制器/方法/变量方法相同。

已经有一些框架可以做到这一点，但是像

*   表单验证
*   分页
*   CRUD
*   和 AJAX

在这些框架中很难做到。我的主要目标，除了让系统的整个功能都使用对象来完成之外，是尽可能多地使用 DRY 原则。这主要意味着用于表单验证和 CRUD 等的重复代码非常少。

我正在寻找关于如何组织这样一个框架、架构是什么以及一个典型的请求（如注册表单和如何验证它）将如何由该框架处理的想法。

请分享您的想法/想法。这将在完成后作为一个开源框架免费发布。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-28T18:36:16.390

我可能会建议，与其围绕表单（ala Zend Framework）构建验证规则，不如在域对象中构建验证。然后将表单数据直接提交给域对象进行验证。我正在使用 Zend Framework，但我使用这个基本结构来满足我的验证需求：

```
/**
 * Contains the domain object properties.
 * @var array
 */
protected $_data = null;

/**
 * @var array
 */
protected $_filters = null;

/**
 * @var array
 */
protected $_validators = null;

public function validate($data = null)
{
    if(!$data) {
        $data = (array) $this->_data;
    } else {
        $data = array_merge((array) $this->_data, $data);
    }

    $this->_input = new Zend_Filter_Input($this->_filters, $this->_validators, $data, $options);
    $this->_input->addValidatorPrefixPath('LP_Validate_', 'LP/Validate/');
    $this->_input->addFilterPrefixPath('LP_Filter_', 'LP/Filter/');

    if($this->_input->isValid()) {
        $this->_data = (object) $this->_input->getEscaped();
        return true;
    } else {
        $this->_data = (object) $data;
        return false;
    }
} 
```

我目前的验证方法的一些限制是我不能在对象属性上调用任何必要的自定义设置器，而且我需要找出一种方法来在运行验证函数后保持对象的原始数据可用. 但除此之外，到目前为止它运作良好。

就 CRUD 而言，答案部分取决于您想要解决的问题的复杂性，部分取决于您熟悉的模式以及您喜欢/不喜欢和不想尝试实施的模式.

显然，要实现的最健壮的设计是使用带有单独域对象的数据映射器。但是，在大多数情况下，这太过分了，因此您可以只使用受到很大（不恰当）诽谤的 Active Record 模式。这基本上是 CodeIgniter 和 Zend Framework 用他们提供的东西所做的。

我最终不得不构建一个使用 Data Mapper 模式的自定义 ORM 层，因为我需要在我的设计中处理继承映射的情况，并且它的工作非常流畅，但我很遗憾失去了 Table and Row Gateway 附带的元数据映射功能Zend 框架中的实现。（如果您能找到一种使用数据映射器有效地创建元数据映射的方法，我希望您向我展示您是如何做到的。：P）。即使您正在尝试构建自己的框架，您也可以考虑查看 Zend Framework，因为它包含一些我见过的最好的 PHP 代码，并且非常接近标准设计模式。

在 Pagination 类中很高兴看到的一件事是能够直接绑定到数据库对象，从而可以根据页面应显示的值范围将限制子句应用于查询。否则，分页的关键组件是跟踪当前页面、每页显示的记录数以及包含要迭代的值的某种集合对象。

至少，您要确保不要预加载整个集合，然后只显示一定范围的记录，因为这会对性能造成巨大影响。

就 Ajax 请求而言，我建议构建某种上下文帮助器，它可以检查 HTTP 请求是否是 XHR，然后根据该上下文专门处理它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-28T17:46:04.950

有很多优秀的开源框架可以比从头开始编写更轻松、更快速地完成您想要做的事情！话虽如此，我开发了一个 MVC 框架，它教会了我很多关于框架开发和面向对象设计的知识。如果您有很多时间并且想将其作为学习实验（可能以一个非常好的框架结束），建议您这样做。

至于您对 ORM 框架的想法……我认为 ORM 是什么可能有些混淆。ORM 是一种将对象映射到关系数据库、处理数据检索和存储的技术。它通常是更大框架中的一个组件，并不一定是框架本身的特征。大多数人都在使用 MVC 框架，用于构建应用程序的基本模型-视图-控制器架构。

一些 PHP 框架提供了更多开箱即用的功能，例如您感兴趣的功能。

因此，这方面还有其他线程，但我想说，如果您有时间并想学习，请构建自己的框架。如果您想在最短的时间内尽可能轻松地做某事，请使用众多现有框架之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-10T15:49:50.000

[gabriel1836 的好帖子，但是Matthew Weier O'Phinney](http://weierophinney.net/matthew/archives/200-Using-Zend_Form-in-Your-Models.html)指出了一种您可以使用的巧妙技术，他在其中展示了一种将表单“附加”到模型并将其用于输入过滤和验证的技术。非常特定于 ZF，但可能会派上用场。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-28T18:07:20.890

使用 Zend，您可以使每个模型对象都“链接”到您的每个表，它确实涵盖了您所说的一切都很好。

看看[http://www.zendframeworkinaction.com/](http://www.zendframeworkinaction.com/)它是一本入门的好书。即使你不使用zend，它也会教你很多它是如何构建的（如果你决定通过自己制作轮子来学习很多关于轮子的知识，它也是一个很好的起点！）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-01T22:44:59.280

我鼓励你看看[http://www.qcodo.com](http://www.qcodo.com)。通过“代码生成器”进行的 CRUD 非常强大，并且似乎满足了您概述的要求。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-12-30T13:21:01.093

正如 OT 所说，AJAX 和分页很难以足够灵活的方式实现。它要求框架知道您屏幕上的内容，但大多数框架只生成 HTML，并不关心客户端呈现。

显然需要 Web 用户界面框架。

这就是我建议研究[Agile Toolkit](http://agiletoolkit.org/)的原因。或许下面的例子会让我们更容易看到集成 AJAX 的威力：

```
$b=$page->add('Button')->setLabel(rand(1,100));
$b->js('click')->reload(); 
```

这将在页面上生成一个带有随机数作为标签的 Button。单击按钮将使用 AJAX 请求重新加载显示新号码的按钮内容。

有了这样的基础，想象如何以非常 AJAX 友好的方式构建分页器是轻而易举的事。太糟糕的分页器已经实现并随工具包一起提供。

涵盖其他主题。CRUD 也是一个类/对象。

```
$page->add('CRUD')->setModel('User'); 
```

表单验证是在服务器端完成的，但错误会很好地显示出来。所有表单都使用 AJAX 请求提交。

# php - counting rows and passing information with mysqli

> ID：598339
> 
> 赞同：0
> 
> 时间：2009-02-28T17:21:08.660
> 
> 标签：php, mysql, mysqli

I have been trying to convert a php page to mysqli, and have encoutnered some problems. Given the code below, and the way which I have ordered things to work, I would like to know what the better way is using mysqli methods.

Is there an mysqli alternative to mysql_num_rows or is a different method of calculating the number of rows required?

How would I do the following using mysqli?:

```
$data = mysql_query($countQuery) or die(mysql_error());
$rowcount = mysql_num_rows($data); 
```

What is an alternative for mysql_fetch_assoc? I feel that I should not be using the current rows method I am using, even if there is a replacement function, so what would be the correct approach?

I apologize for these questions, but I have not been able to determine the answers myself so far.

```
<?php
$con = mysqli_connect("localhost", "user", "", "ebay");
if (!$con) {
    echo "Can't connect to MySQL Server. Errorcode: %s\n". mysqli_connect_error();
    exit;
}
$con->query("SET NAMES 'utf8'");
$cmd = "word";
//normally retrieved from GET
if($cmd=="deleterec") {
    $deleteQuery = "DELETE FROM AUCTIONS1 WHERE ARTICLE_NO = ?";
    if ($delRecord = $con->prepare($deleteQuery)) {
        $delRecord->bind_param("s", $pk);
        $delRecord->execute();
    }
}
$table = 'AUCTIONS';
$brand = "test";
$countQuery = "SELECT ARTICLE_NO FROM ? WHERE upper(ARTICLE_NAME) LIKE '% ? %'";
if ($numRecords = $con->prepare($countQuery)) {
    $numRecords->bind_param("ss", $table, $brand);
    $numRecords->execute();
    $data = $con->query($countQuery) or die(print_r($con->error));
    $rowcount = mysql_num_rows($data);
    $rows = getRowsByArticleSearch($query, $table, $max);
    $last = ceil($rowcount/$page_rows);
}
$self = htmlspecialchars($_SERVER['PHP_SELF'],ENT_QUOTES,'utf-8');
foreach ($rows as $row) // print table rows {
    echo '<tr>' . "\n";
    echo '<td><a href="#" onclick="doThings(\'Layer2\', \'' . $pk . '\')">'.$row['USERNAME'].'</a></td>' . "\n";
    // repeated for each column
}
function getRowsByArticleSearch($searchString, $table, $max) {
    global $con;
    $recordsQuery = "SELECT ARTICLE_NO, USERNAME, ACCESSSTARTS, ARTICLE_NAME, date_format(str_to_date(ACCESSSTARTS, '%d/%m/%Y %k:%i:%s'), '%d %m %Y' ) AS shortDate FROM ? WHERE upper(ARTICLE_NAME) LIKE '%?%' ORDER BY str_to_date(ACCESSSTARTS, '%d/%m/%Y %k:%i:%s')" . $max;
    if ($getRecords = $con->prepare($recordsQuery)) {
        $getRecords->bind_param("ss", $searchString, $table);
        $getRecords->execute();
        $getRecords->bind_result($ARTICLE_NO, $USERNAME, $ACCESSSTARTS, $ARTICLE_NAME, $shortDate);
        while ($getRecords->fetch()) {
            $result = $con->query($recordsQuery);
            $rows = array();
            while($row = mysql_fetch_assoc($result)) {
                $rows[] = $row;
            }
            return $rows;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-28T19:35:23.957

I usually use this directly after my execute:

```
 $query->execute();
 // store the result first
 $query->store_result();
 $rows = $query->num_rows; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-01-30T20:48:12.883

Actually, to answer the first question:

```
$data = mysql_query($countQuery) or die(mysql_error());
$rowcount = mysql_num_rows($data); 
```

If you want to do this using mysqli, mysqli_num_rows works just fine. The only difference is, remember to put the connection parameter in the query.

```
$data = mysqli_query($dbc,$countQuery) or die(mysql_error()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-28T19:06:39.127

You can use:

```
$data->num_rows();
$data->fetch_assoc(); 
```

You can check out the docs for more info [num_rows](http://us.php.net/manual/en/mysqli-result.num-rows.php) and [fetch_assoc](http://us.php.net/manual/en/mysqli-result.fetch-assoc.php).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-01T06:11:54.363

I've rewritten your code sample with the correct property / function calls to fix the two issues that you mention in the question:

```
<?php
$con = mysqli::connect("localhost", "user", "", "ebay");

if (!$con) {
    echo "Can't connect to MySQL Server. Errorcode: %s\n". mysqli_connect_error();
    exit;
}

$con->query("SET NAMES 'utf8'");
$cmd = "word";

//normally retrieved from GET
if($cmd=="deleterec") {
    $deleteQuery = "DELETE FROM AUCTIONS1 WHERE ARTICLE_NO = ?";
    if ($delRecord = $con->prepare($deleteQuery)) {
        $delRecord->bind_param("s", $pk);
        $delRecord->execute();
    }
}

$table = 'AUCTIONS';
$brand = "test";
$countQuery = "SELECT ARTICLE_NO FROM ? WHERE upper(ARTICLE_NAME) LIKE '% ? %'";

if ($numRecords = $con->prepare($countQuery)) {
    $numRecords->bind_param("ss", $table, $brand);
    $numRecords->execute();
    $data = $con->query($countQuery) or die(print_r($con->error));

    // Here is the property that you can reference to determine the affected rows from the previous query. -- gabriel
    $rowcount = $data->num_rows; 
    $rows = getRowsByArticleSearch($query, $table, $max);
    $last = ceil($rowcount/$page_rows);
}

$self = htmlspecialchars($_SERVER['PHP_SELF'],ENT_QUOTES,'utf-8');

foreach ($rows as $row) // print table rows {
    echo '<tr>' . "\n";
    echo '<td><a href="#" onclick="doThings(\'Layer2\', \'' . $pk . '\')">'.$row['USERNAME'].'</a></td>' . "\n";
    // repeated for each column
}

function getRowsByArticleSearch($searchString, $table, $max) {
    //global $con; Globals are BAD!! Please don't use.
    $con = mysqli::connet("localhost", "user", "", "ebay");

    $recordsQuery = "SELECT ARTICLE_NO, USERNAME, ACCESSSTARTS, ARTICLE_NAME, date_format(str_to_date(ACCESSSTARTS, '%d/%m/%Y %k:%i:%s'), '%d %m %Y' ) AS shortDate FROM ? WHERE upper(ARTICLE_NAME) LIKE '%?%' ORDER BY str_to_date(ACCESSSTARTS, '%d/%m/%Y %k:%i:%s')" . $max;
    if ($getRecords = $con->prepare($recordsQuery)) {
        $getRecords->bind_param("ss", $searchString, $table);
        $getRecords->execute();
        $getRecords->bind_result($ARTICLE_NO, $USERNAME, $ACCESSSTARTS, $ARTICLE_NAME, $shortDate);
        while ($getRecords->fetch()) {
                $result = $con->query($recordsQuery);
                $rows = array();

                // Notice the adjusted function call to retrieve the associate array for each record within the result set. -- gabriel
                while($row = $result->fetch_assoc()) {
                        $rows[] = $row;
                }
                return $rows;
        }
    }
} 
```

However, I would like to add that dusoft was correct in the assessment that MySQLi is buggy and is known to create issues. It is for this reason that we had to switch from MySQLi to PDO (which is native to PHP as of at least 5.1) and we haven't had any problems since. I would strongly recommend that you look at PDO or perhaps one of the Pear libraries to actually provide your database connection interface.

# java - Java AudioSystem 和 TargetDataLine

> ID：598344
> 
> 赞同：4
> 
> 时间：2009-02-28T17:24:21.167
> 
> 标签：java, audio, audio-recording, javasound

我正在尝试从我的 PC 的线路中捕获音频，为此我正在使用[AudioSystem](http://java.sun.com/j2se/1.4.2/docs/api/javax/sound/sampled/AudioSystem.html)类。静态 AudioSystem.write 方法有两种选择之一：写入文件或写入流。我可以让它写入文件就好了，但是每当我尝试写入流时，我都会抛出 java.io.IOException （未指定流长度）。至于我的缓冲区，我使用的是 ByteArrayOutputStream。我应该在其他地方使用或弄乱另一种流吗？

**同样**在相关主题中，可以通过调用[read直接对 (](http://java.sun.com/j2se/1.4.2/docs/api/javax/sound/sampled/TargetDataLine.html) [TargetDataLine](http://java.sun.com/j2se/1.4.2/docs/api/javax/sound/sampled/TargetDataLine.html) ) 中的音频线进行采样。这是进行音频捕获或使用 AudioSystem 的首选方式吗？

**更新** 请求的源代码：

```
final private TargetDataLine line;
final private AudioFormat format;
final private AudioFileFormat.Type fileType;
final private AudioInputStream audioInputStream;
final private ByteArrayOutputStream bos;

// Constructor, etc.

public void run()
{
    System.out.println("AudioWorker Started");
    try
    {
        line.open(format);
        line.start();

        // This commented part is regarding the second part
        // of my question
        // byte[] buff = new byte[512];
        // int bytes = line.read(buff, 0, buff.length);

        AudioSystem.write(audioInputStream, fileType, bos);

    }
    catch ( Exception e )
    {
        e.printStackTrace();
    }

    System.out.println("AudioWorker Finished");
}

// Stack trace in console
AudioWorker Started
java.io.IOException: stream length not specified
    at com.sun.media.sound.WaveFileWriter.write(Unknown Source)
    at javax.sound.sampled.AudioSystem.write(Unknown Source)
    at AudioWorker.run(AudioWorker.java:41)
AudioWorker Finished 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-02T21:48:56.690

由于 Wave 格式要求在文件开头写入长度，因此作者正在查询`getFrameLength`您的`AudioInputStream`. 当它返回时`NOT_SPECIFIED`——因为你正在录制尚未指定长度的“实时”数据——作者抛出异常。

-`File`导向通过将虚拟数据写入长度字段来解决此问题，然后在写入完成时重新打开文件并覆盖文件的该区域。

使用不需要提前长度的输出格式 (au)，或者使用`AudioInputStream`返回有效帧长度的输出格式，或者使用`File`API 的版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-11T16:48:06.213

您应该查看[Richard Baldwin](http://www.developer.com/java/other/article.php/1572251#Complete%20Program%20Listings)关于 Java 声音的教程。在文章底部有一个完整的源列表，他使用 TargetDataLine 的读取来捕获音频。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-28T21:39:21.740

来自 AudioSystem.write JavaDoc：

> 将表示指定文件类型的音频文件的字节流写入提供的输出流。有些文件类型要求将长度写入文件头；除非事先知道长度，否则此类文件不能从头到尾写入。如果音频文件类型中的长度为 AudioSystem.NOT_SPECIFIED，则尝试写入此类文件将失败并出现 IOException。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-28T21:49:39.937

您也可以尝试使用 JMF，它有点毛茸茸，但比 javax.sound.sampled 的东西好一点。JMF 页面上有很多教程描述了如何从线路输入或麦克风通道进行录制。

# sql - 结合连接和计数的MySQL语句？

> ID：598355
> 
> 赞同：26
> 
> 时间：2009-02-28T17:33:25.217
> 
> 标签：sql, join, count

我有一个“文件夹”表。我想返回 userId 为 16 的所有记录。

```
SELECT * FROM `folders` WHERE userId = 16; 
```

我有一个“文件”表。对于上面返回的每个“文件夹”，我想返回该“文件夹”内的“文件”计数。

```
SELECT COUNT(*) as "Files" FROM files WHERE Folder = n; 
```

我如何结合这些？我迷路了。谢谢！

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2009-03-01T02:37:54.267

```
SELECT  fol.*
 ,      (       SELECT  COUNT(*)
                FROM    files           fil
                WHERE   fil.Folder      = fol.Folder
        )       AS      "Files"
FROM    folders         fol
WHERE   fol.userId      = 16 
```

它被称为相关子查询。

[http://dev.mysql.com/doc/refman/5.1/en/correlated-subqueries.html](http://dev.mysql.com/doc/refman/5.1/en/correlated-subqueries.html)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-02-28T17:36:15.740

您可能需要使用 GROUP BY 并按 ID 等对其进行分组：

```
SELECT 
    folders.*,
    COUNT(files.*) as filetotal 
FROM folders 
    LEFT JOIN files ON folders.ID=files.folderID 
WHERE userId = 16 
GROUP BY folders.ID 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-28T17:38:52.597

执行按文件夹分组的子查询以获取每个文件夹的计数，然后将其加入到第一个查询中，如下所示：

```
 select
       f.*
       fc.Files
    from
       Folders f
--
       -- Join the sub query with the counts by folder     
       JOIN (select
               Folder,
               count(*) Files
             from
                files
             group by
                Folder ) as fc
          on ( fc.Folder = f.Folder )
    where
       f.userid = 16 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-05-27T08:55:57.047

```
select 
    f.`folder`,
    f.`userId`,
    r.`count`

from
    `folders` f
    left join 
    (
        select 
            `Folder`,
            count(`id`) `count`

        from `files`

            group by `Folder`
    ) r
        on r.`Folder`=f.`folder`

where 
    `userId`=16 
```

如果您不想使用 group by 语句。

我在产品列表中遇到了类似的问题，我想计算另一个表 [1-5] 中产品的星级以及投票支持该特定产品的用户数量。

# iphone - 先学 Cocoa for Leopard 然后再学 Cocoa Touch for iPhone 有意义吗？

> ID：598358
> 
> 赞同：5
> 
> 时间：2009-02-28T17:35:00.860
> 
> 标签：iphone, objective-c, cocoa, cocoa-touch

其实我不太关心 Mac OS X 的开发。我只想做 iPod Touch 和 iPhone 的开发。但无论如何，我开始学习 Cocoa 和 Objective-C。但是 Cocoa 和 Cocoa Touch 之间似乎有很多不同，所以我想知道我是否真的在浪费时间。我应该直接跳入 iPhone 主题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-28T18:23:08.433

有很多重叠，但如果你学习的目的是做 iPhone 编程，那么一定要直接学习 iPhone 编程。

作为副作用，如果您有这样的愿望，您将能够更轻松地学习 Mac 应用程序编程。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-02-28T18:29:16.033

我认为您可以选择 Cocoa-Cocoa Touch 或 Cocoa Touch-Cocoa，并且仍然可以很好地掌握为任一平台编程所需的知识。几年前我在我的 Mac 上尝试过 Cocoa 开发，但很困惑。我最终决定学习 iPhone 编程，并选择了《[开始 iPhone 开发：探索 iPhone SDK](https://rads.stackoverflow.com/amzn/click/com/1430216263) 》，花了几周时间读完那本书，现在我对事情的理解好多了。真的，所需要的只是对 Mac 编程的一个很好的解释。我相当有信心现在可以轻松地学习常规的 Cocoa 编程。如果我从常规的 Cocoa 编程开始，我相当有信心能够相当轻松地学习 iPhone 编程。存在差异，但两个平台之间有很多（非常酷的）相似之处。

PS，如果你真的对 iPhone 开发感兴趣，我强烈推荐这本书。值得每一分钱。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-02-28T23:13:22.747

通常我会同意这里的其他答案：直接学习您感兴趣的主题。但是对于 Cocoa/Cocoa Touch，您最好阅读[Cocoa Programming for Mac OS X, 3rd ed。亚伦·希勒加斯。](https://rads.stackoverflow.com/amzn/click/com/0321503619)简直太好了！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-28T18:46:59.343

有一些相似之处，但如果目标是 iPhone 开发，那么开始在该平台上学习然后升级到 Mac 会更好。在 UI 框架中还有很多事情要做，就 IB 可以做什么而言，您可能已经习惯了 iPhone 上不存在的系统的某些方面（或以不同方式完成）。

NS基础课程大致相同，但即使存在差异。

另请注意，模拟器将编译和运行不会在手机本身上编译或运行的 Mac 代码，使用文档时，请始终将注意力集中在 iPhone SDK 部分。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-10T22:24:07.343

Cocoa Touch 和 Cocoa 之间的一个区别在于内存管理方面。

如果您碰巧是第一次学习 Objective-C（或者可能是第一次学习任何基于 C 的语言），我会从 Cocoa Touch 开始。

我的理由是 iPhone 不支持自动垃圾收集，您可能会发现首先学习（更困难？当然不太自动化）方法更容易，然后当您迁移到 OS X 开发时，请欣赏 OS X 平台提供的快捷方式你。

如果您最初在 Leopard 上学习 Cocoa 开发，您可能会对 iPhone 中看似更原始的内存管理感到沮丧。

不过，两者非常相似。

底线是，如果您想学习为 iPhone 编程，请继续并跳到 iPhone。Mac OS X 开发不是先决条件，只是非常相似的技能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-28T20:16:03.380

我教过 Mac 开发人员和 iPhone 开发人员，我的经验是最好先学习 Mac，特别是因为你可以使用[Cocoa Programming for Mac OS X](https://rads.stackoverflow.com/amzn/click/com/0321503619)获得坚实的 Cocoa 基础，这仍然是学习 Mac 的最佳书籍周围的可可图案。到目前为止，我还没有找到一本好的 iPhone 书籍来教授您需要了解的关键问题，并将 Cocoa/Touch 编程与 Java、.NET 和其他系统区分开来。我最近写了几篇文章，可能对您有所帮助：

[iPhone 课程大纲](http://robnapier.net/blog/iphone-course-syllabus-158)

[iPhone 开发者手册回顾](http://robnapier.net/blog/review-iphone-developers-cookbook-260)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-07-15T09:33:58.320

我遇到了和你差不多的问题，虽然我最初的重点更多是在 Mac 开发上，但后来 iPhone 出现了。我绝不是专家级的可可编码器，但情况正在迅速改善。我发现我在 Mac 上学到的可可知识在 iPhone 上非常方便。开始 iPhone 开发肯定比我在 Mac 上的 cocoa 的第一步要快得多……

在实践中，我发现这两种技能都能派上用场。我正在制作一个 iPhone 游戏，但它使用的数据集（实际的谜题）是使用我为 Mac 开发的一个小型可可应用程序创建的。您不想学习 Mac 开发是否有特定的原因？您的游戏不需要额外的开发/设计工具吗？

（mac应用截图：[http](http://www.qixis.com/images/edit16-screenshot.png) ://www.qixis.com/images/edit16-screenshot.png ）

# c++ - 在 C++ 中转发声明静态 C 结构实例

> ID：598369
> 
> 赞同：3
> 
> 时间：2009-02-28T17:43:16.237
> 
> 标签：c++, c

我正在编写一个代码生成器，实际上是一个数据生成器，它将生成这种形式的数据结构（显然实际的数据结构要复杂得多）：

```
typedef struct Foo {
  int a;
  struct Foo* foo;
} Foo;

extern Foo f1;
extern Foo f2;

Foo f1 = {1, &f2};
Foo f2 = {2, &f1}; 
```

这对于我尝试过的所有 C 和 C++ 编译器都是可移植的。

我想将这些结构实例转发声明为静态，以免污染全局变量空间，如：

```
typedef struct Foo {
  int a;
  struct Foo* foo;
} Foo;

static Foo f1;
static Foo f2;

static Foo f1 = {1, &f2};
static Foo f2 = {2, &f1}; 
```

尽管这适用于 gcc 和可能所有的 C 编译器，但上述代码不适用于 C++ 编译器并导致编译错误：

```
error: redefinition of ‘Foo f1’
error: ‘Foo f1’ previously declared 
```

我理解为什么在 C++ 中会发生这种情况。是否有一个简单的解决方法，不涉及在运行时使用代码来实现可移植到所有 C++ 编译器的相同效果，而无需使用 C 编译器来编译某些文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-28T19:38:13.590

这似乎与乔希的回答有类似的效果，但复杂性较低：

```
#ifdef __cplusplus
namespace {
    extern Foo f1;
    extern Foo f2;

    Foo f1 = {1, &f2};
    Foo f2 = {2, &f1};
}
#else
    static Foo f1;
    static Foo f2;

    Foo f1 = {1, &f2};
    Foo f2 = {2, &f1};
#endif 
```

在为 C++ 编译时，f1 和 f2 的外部定义在目标文件中以可外部链接符号公开；但是，由于它们位于匿名命名空间内，因此符号被以这样一种方式进行了修改，以使其不会与来自另一个翻译单元的符号冲突。

使用宏魔法，您可以进行设置，因此只有一个地方可以声明和定义 f1 和 f2，但如果这是机械生成的，则可能没有太多理由这样做。

就像是：

```
#ifdef __cplusplus
#define START_PRIVATES namespace {
#define END_PRIVATES   }
#define PRIVATE extern
#else
#define START_PRIVATES 
#define END_PRIVATES   
#define PRIVATE static
#endif

START_PRIVATES
    PRIVATE Foo f1;
    PRIVATE Foo f2;

    Foo f1 = {1, &f2};
    Foo f2 = {2, &f1};
END_PRIVATES 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-02-28T18:28:42.650

这应该使用 C 或 C++ 进行编译，并为您提供相同的名称以在两个编译器中访问相同的内容。

```
#ifdef __cplusplus
 namespace // use anonymous namespace to avoid poluting namespace.
 {
    struct StaticFoos
    {
       static Foo f1;
       static Foo f2;
    };

    Foo StaticFoos::f1 = {1, &StaticFoos::f2};
    Foo StaticFoos::f2 = {2, &StaticFoos::f1};
 }

 static const &Foo f1 = StaticFoos::f1;
 static const &Foo f2 = StaticFoos::f2;
#else
 static Foo f1 = {1, &f2_};
 static Foo f2 = {1, &f1_};
#endif 
```

现在在 C 和 C++ 中，您可以访问`f1`和`f2`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-28T18:06:29.240

您试图避免的被称为[静态初始化订单惨败](http://livedocs.adobe.com/flex/3/langref/Array.html)。您将很好地使用函数代替，并使用默认值初始化各个对象，然后重新安装成员指针。

您的代码示例意味着完全不同的东西。你将不得不重新审视。第一个成功是因为您有一个对象的定义和另一个对象的声明。这适用于 C 和 C++。

```
extern Foo f1; 
```

这是一个声明和暂定定义。

```
static Foo f1; 
```

`f1`这是类型对象的声明和定义`struct Foo`。

```
static Foo f2; 
```

同上。

```
static Foo f1 = {1, &f2}; 
```

这是一个重新定义。您违反了[单一定义规则](http://en.wikipedia.org/wiki/One_Definition_Rule)，该规则说，翻译单元中的符号必须有一个且准确的定义。除此之外，您可以有多个定义，但当然每个此类事件都必须具有相同的语法和语义。

```
static Foo f2 = {2, &f1}; 
```

同上。

```
extern Foo fn;
/* some code */
extern Foo fn;
/* some more ... */
Foo fn; /* finally a definition */ 
```

这很好，因为可以有多个临时声明。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-28T18:08:35.507

您不能转发声明对象，只能转发类型。外部解决方案是正确的解决方案。或者，如果您确实需要避免全局命名空间污染，请将它们设为静态并使用您在所有其他人之前调用的函数对其进行初始化。

**编辑：** Michael Burr 在评论中提到了原因，我想我会把它添加到帖子中：

> @dirkgently：它是有效的 C，因为 C 标准说：“在一个翻译单元中，具有内部链接的标识符的每个声明都表示相同的对象或函数”。

C++ 没有这样的规则。

**编辑：**

如另一篇文章所述。您也可以使用匿名命名空间来限制变量的范围。只需将命名空间的东西包装在一个中`#ifdef __cplusplus`，你就可以开始了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-26T13:57:11.740

我遇到过这个问题。这种限制令人沮丧，我看不出 C++ 与 C 有这种无缘无故的不兼容的任何原因。

我的解决方案是使用静态函数——你*可以*转发声明——它只返回 f1 和 f2：

```
typedef struct Foo {
  int a;
  struct Foo* foo;
} Foo;

static Foo* link_f1();
static Foo* link_f2();

static Foo f1 = {1, link_f2()};
static Foo f2 = {2, link_f1()};

static Foo* link_f1() { return &f1; }
static Foo* link_f2() { return &f2; } 
```

不幸的是，这不是有效的 C，因此您仍然需要 C 和 C++ 的不同代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-28T19:04:19.427

我会创建两个文件（.cpp 和 .h）：

代码.h：

```
typedef struct Foo {
  Foo() {}
  Foo(int aa, struct Foo* ff) : a(aa), foo(ff) {}
  int a;
  struct Foo* foo;
} Foo;

static Foo f1;
static Foo f2; 
```

代码.cpp：

```
void myfun()
    {
    f1 = Foo(1, &f2);
    f2 = Foo(2, &f1);
    } 
```

我还希望将所有变量（如 f1、f2 ...）放入某种“存储”对象（属于我自己的类或某些 STL 容器）。然后，我将此对象定义为静态对象。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-08T05:27:55.730

这是我在项目中所做的。我没有尝试使用匿名命名空间来解决这个问题，而是使用了命名命名空间。

[然后感谢 Matt McNabb 的有用评论，事实证明，匿名命名空间将用于一个超级整洁的解决方案，它使用更少的宏，不会产生外部名称污染。]

这允许我有两个独立的程序文本区域，中间有常规文件范围，以获得整洁的解决方案：

一切都隐藏在这些宏后面：

```
#ifdef __cplusplus
#define static_forward(decl) namespace { extern decl; }
#define static_def(def) namespace { def; }
#else
#define static_forward(decl) static decl;
#define static_def(def) static def;
#endif 
```

所以我们可以这样做：

```
static_forward(struct foo foo_instance)

void some_function(void)
{
  do_something_with(&foo_instance);
}

static_def(struct foo foo_instance = { 1, 2, 3 }) 
```

C 扩展很简单，如下所示：

```
static struct foo foo_instance;

void some_function(void)
{
  do_something_with(&foo_instance);
}

static struct foo foo_instance = { 1, 2, 3 }; 
```

C++ 扩展如下所示：

```
namespace { extern struct foo foo_instance; }

void some_function(void)
{
  do_something_with(&foo_instance);
}

namespace { struct foo foo_instance = { 1, 2, 3 }; } 
```

**所以，简而言之，多亏了匿名命名空间，C++ 实际上没有静态前向引用问题，只有以 C 不兼容的方式实现它的问题，这可以与宏桥接。**

同一个翻译单元中的多个匿名命名空间区域是同一个命名空间，并且命名空间之外的周围文件范围可以看到它。

# apache-flex - 是否可以在 Actionstipt 3 中定义泛型类型 Vector？

> ID：598371
> 
> 赞同：9
> 
> 时间：2009-02-28T17:45:08.433
> 
> 标签：apache-flex, actionscript-3, vector, generics

嗨，我需要制作一个 VectorIterator，所以我需要接受任何类型的 Vector。我目前正在尝试将类型定义为 *，如下所示：

```
var collection:Vector.<*> = new Vector<*>() 
```

但是编译器抱怨该类型“不是编译时间常数”。我知道 Vector 类存在一个错误，错误报告将错误类型报告为缺失，例如：

```
var collection:Vector.<Sprite> = new Vector.<Sprite>() 
```

如果没有导入 Sprite，编译器会抱怨找不到 Vector 类。我想知道这是否相关？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-01T10:35:50.063

所以看起来答案是没有办法将类型的 Vector 隐式转换为有效的超类型。它必须使用全局 Vector.<> 函数显式执行。

所以我的*实际*问题是混合问题:)

使用 Vector 是正确的。作为对另一个 Vector 的通用引用，但是，它不能像这样执行：

```
var spriteList:Vector.<Sprite> = new Vector.<Sprite>()
var genericList:Vector.<Object> = new Vector.<Object>()
genericList = spriteList // this will cause a type casting error 
```

应该使用全局 Vector() 函数/强制转换来执行分配，如下所示：

```
var spriteList:Vector.<Sprite> = new Vector.<Sprite>()
var genericList:Vector.<Object> = new Vector.<Object>()
genericList = Vector.<Object>(spriteList) 
```

这是我没有阅读[文档](http://livedocs.adobe.com/flex/gumbo/langref/package.html#Vector())的简单案例。

下面是一些测试代码，我希望是 Vector。隐式转换为 Vector.<*>。

```
public class VectorTest extends Sprite
{
    public function VectorTest()
    {
        // works, due to <*> being strictly the same type as the collection in VectorContainer
        var collection:Vector.<*> = new Vector.<String>() 

        // compiler complains about implicit conversion of <String> to <*>
        var collection:Vector.<String> = new Vector.<String>()
        collection.push("One")
        collection.push("Two")
        collection.push("Three")

        for each (var eachNumber:String in collection)
        {
            trace("eachNumber: " + eachNumber)
        }

        var vectorContainer:VectorContainer = new VectorContainer(collection)

        while(vectorContainer.hasNext())
        {
            trace(vectorContainer.next) 
        }
    }
}

public class VectorContainer
{
    private var _collection:Vector.<*>

    private var _index:int = 0

    public function VectorContainer(collection:Vector.<*>)
    {
        _collection = collection
    }

    public function hasNext():Boolean
    {
        return _index < _collection.length
    }

    public function get next():*
    {
        return _collection[_index++]
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-10-20T11:47:18.470

```
[Bindable]
public var selectedItems:Vector.<Category>;

public function selectionChange(items:Vector.<Object>):void
{
    selectedItems = Vector.<Category>(items);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T09:08:46.800

我相信你可以通过调用它来引用一个无类型的 Vector `Vector`(no `.<>`)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-05T12:25:25.520

使用 Apache Flex 4.11.0，您已经可以为所欲为。它可能从 4.9.0 开始就存在了，但我之前没有尝试过。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-03-01T02:23:02.057

```
var collection:Vector.<Object> = new Vector.<Object>() 
```

也许？但我只是猜测，没有尝试过。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2009-03-01T06:12:55.687

```
var collection:Vector.<Object> = new Vector.<Object>() 
```

但仅针对 Flash Player 10 cs4

# http - 网络视频的最佳 MIME 类型是什么？

> ID：598376
> 
> 赞同：0
> 
> 时间：2009-02-28T17:51:11.630
> 
> 标签：http, browser, video, mime

我是一个大型媒体密集型网站的管理员。我们对视频 MIME 类型进行了一些实验。我们交替使用 Content-Disposition: attachment + Content-type: application/octet-stream 强制下载和实际返回正确的 MIME 类型。

无论我们设置它的方式，我们都有投诉。使用正确的 MIME 类型，许多人尝试播放内容的浏览器插件损坏或不兼容，但由于格式不兼容或其他问题而失败。这给我们留下了支持电子邮件，试图帮助客户配置他们损坏的浏览器。另一方面，不使用正确的 MIME 类型会使喜欢单击文件并在此后不久启动插件的人感到不安。

在强制浏览器下载文件时，我们看到的投诉可能减少了 20%，所以我们很确定我们会坚持下去，但我想听听其他人对此的看法，因为看起来就像一个真正的灰色地带。

作为记录，我们的文件格式是 WMV、XviD、QT mpeg4 mov 和 Ipod m4v 以及流式闪存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-28T17:55:54.257

是否可以同时提供两个链接（有两个链接，一个说“观看电影 [使用浏览器插件]”，另一个只是说“下载文件 [如果观看失败]”和一个常见问题解答条目或类似的东西来解释问题并提供一些典型的解决方案）？

# objective-c - 试图理解 nibs 中的 First Responder 对象

> ID：598378
> 
> 赞同：1
> 
> 时间：2009-02-28T17:52:24.030
> 
> 标签：objective-c, cocoa, nib, first-responder

让我简短地总结一下：nib 文件中的“First Responder”是一个对象，它表示具有用户焦点的 UI 控件元素。因此，如果用户单击一个控件，nib 会将单击的 UI 控件设置为 First Responder。在我的应用程序中，我可以从笔尖向那个“急救人员”提供一个出口，这样我就可以向用户通过点击激活的任何内容发送一条消息“制作红色字体颜色”。

然后，如果此 First Responder UI 控件不理解该消息，则该消息将在响应者链中向上传递，直到父元素或祖父（等等）UI 控件元素理解该消息。否则会被忽略。

因此，First Responder 总是建立一个指向具有焦点的 UI 控件的“链接”。那正确吗？

（ “First Responder”的完全相同的**副本**[- 我没听错吗？](https://stackoverflow.com/questions/598455/objective-c-cocoa-first-responder-did-i-get-that-right)由同一作者）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-28T18:20:07.070

第一响应者只是将被告知（并有机会响应）应用程序中的事件（例如鼠标单击）的对象。

# javascript - Jquery 最佳案例场景

> ID：598384
> 
> 赞同：2
> 
> 时间：2009-02-28T17:55:47.457
> 
> 标签：javascript, jquery, image-preloader

我正在为一个 GUI 加载一堆图像，它将为我的客户产品选择属性。

最好在开始时预加载所有图像（我猜这需要一些时间），然后让 GUI 具有完整的功能，还是动态加载图像更好。

本质上，我正在开发图片/海报框架应用程序。我有大约 20 多个框架可供用户选择，当单击一个框架时，我会更改 GUI 中显示的框架的图像。

我正在使用 Jquery。任何见解都将有助于为此的最佳情况。

如果我将预加载所有图像，我如何将其中一个加载条放在屏幕上，就像您在 Flash 中看到的那样，或者像我在 Ajax 中看到的加载 gif 一样？

谢谢

麦克风

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-28T18:29:10.963

取决于帧图像的大小...如果它们像 1 - 2K 一样小，我会动态加载图像，否则您可以预加载，但请务必正确设置标题，以便下次仅读取一次并从缓存中获取.

至于进度条，我建议您查看[Ajaxian](http://ajaxian.com/archives/preloading-images-with-jquery)上的这篇文章（讨论在 jQuery 中预加载图像并包括进度条） 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-28T18:49:33.020

为什么不两者都做？

您可以懒惰地加载图像，也可以挂钩`$(document).ready()`预加载图像。这样，如果用户在预加载之前访问了图像，那么它就会进入；如果用户等待的时间足够长，它将是瞬时的。

这种技术在菜单栏翻转之类的东西中很常见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-28T18:00:13.357

正确答案取决于许多因素。图片有多大，有多少？一开始加载所有图像会导致严重滞后吗？正如[Jeff Atwood 所说](https://twitter.com/codinghorror/status/1085646128)，性能是一项功能。

我宁愿选择性能更好的应用程序，而不是预先加载所有内容。

# xml - 如何将 XML 中的属性和元素导入 Filemaker？

> ID：598390
> 
> 赞同：0
> 
> 时间：2009-02-28T17:59:03.250
> 
> 标签：xml, xslt, xpath, filemaker

我有一个将其用户数据库存储到 XML 文件的应用程序，我需要将选定的字段导出到 Filemaker，以便我的客户和挖掘 Filemaker 上的数据。我设法使 XSLT 文件导入 XML 元素，但似乎找不到导入任何元素的方法。非常期待解决这个问题的指针。

XML 文件的示例：

```
<?xml version="1.0" encoding="utf-8"?>
<APPLICATION_NAME>
  <USERS>
    <USER>
      <ID>15001</ID>
      <USERNAME>Administrator</USERNAME>
      <!-- other elements -->
      <PROPERTYBAG>
        <ITEM NAME="LastModifiedDate" VALUE="Fri, 05 Sep 2008 13:13:16 GMT"/>
        <ITEM NAME="Registered" VALUE="5.9.2008 16:13:16"/>
        <!-- other elements -->
      </PROPERTYBAG>
    </USER>
    <!-- more users -->
  </USERS>
</APPLICATION_NAME> 
```

到目前为止，我已经按照该站点的说明设法导入了元素：http: [//edoshin.skeletonkey.com/2005/10/use_modular_xsl.html](http://edoshin.skeletonkey.com/2005/10/use_modular_xsl.html)

这是导入这些元素但不导入属性的 XSLT：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
  xmlns="http://www.filemaker.com/fmpxmlresult">

<xsl:include href="FileMaker.xslt"/>

<xsl:template match="/">
  <xsl:call-template name="TABLE">
    <xsl:with-param name="METADATA-FIELDS">
      <xsl:call-template name="FIELD">
        <xsl:with-param name="NAME" select="'ID'"/>
      </xsl:call-template>
      <xsl:call-template name="FIELD">
        <xsl:with-param name="NAME" select="'USERNAME'"/>
      </xsl:call-template>
      <xsl:call-template name="FIELD">
        <xsl:with-param name="NAME" select="'ISADMINISTRATOR'"/>
      </xsl:call-template>
      <xsl:call-template name="FIELD">
        <xsl:with-param name="NAME" select="'LastModifiedDate'"/>
      </xsl:call-template>
      <xsl:call-template name="FIELD">
        <xsl:with-param name="NAME" select="'Registered'"/>
      </xsl:call-template>
    </xsl:with-param>

    <xsl:with-param name="RESULTSET-RECORDS">
      <xsl:for-each select="//USER">
        <xsl:call-template name="ROW">
          <xsl:with-param name="COLS">
            <xsl:call-template name="COL">
              <xsl:with-param name="DATA" select="ID"/>
            </xsl:call-template>
            <xsl:call-template name="COL">
              <xsl:with-param name="DATA" select="USERNAME"/>
            </xsl:call-template>
            <xsl:call-template name="COL">
              <xsl:with-param name="DATA" select="ACCOUNT/ISADMINISTRATOR"/>
            </xsl:call-template>

                <xsl:call-template name="COL">
              <xsl:with-param name="DATA" select="@Registered"/>
            </xsl:call-template>

                </xsl:with-param>
        </xsl:call-template>
      </xsl:for-each>
    </xsl:with-param>
  </xsl:call-template>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-01T15:23:51.913

我不得不说我不确定我是否理解你在这里需要什么。
如果我确实理解 - 你没有得到价值

```
<ITEM NAME="LastModifiedDate" VALUE="Fri, 05 Sep 2008 13:13:16 GMT"/> 
```

通过使用

```
<xsl:call-template name="COL">
      <xsl:with-param name="DATA" select="@Registered"/>
</xsl:call-template> 
```

* * *

**编辑：**
如果是这种情况，请尝试像这样使用 ITEM/@Registered：

```
<xsl:call-template name="COL">
    <xsl:with-param name="DATA" select="PROPERTYBAG/ITEM[@NAME='Registered']/@VALUE"/>
</xsl:call-template> 
```

您希望具有 name 属性的 ITEM 元素的 value 属性等于在每个用户下的 propertybag 元素下注册...

* * *

**原文：**
如果是这种情况，请尝试像这样使用 ITEM/@Registered：

```
<xsl:call-template name="COL">
     <xsl:with-param name="DATA" select="ITEM/@Registered"/>
</xsl:call-template> 
```

你想要每个用户下的项目......

# iphone - 正确检查 nil sqlite 文本列

> ID：598396
> 
> 赞同：2
> 
> 时间：2009-02-28T18:03:49.027
> 
> 标签：iphone, sqlite

我有一个分配给字符串的 sqlite 字符串列。在分配之前，我需要确保它不为零。我正在这样做：

```
char *isNil = sqlite3_column_text(selectstmt, 2);
if(isNil != nil){
  myName = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 2)];} 
```

这给出了警告：

警告：初始化会丢弃来自指针目标类型的限定符

正确的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-28T18:08:33.603

当您忽略 const 时，您会收到警告。API 定义：

```
const unsigned char *sqlite3_column_text(sqlite3_stmt*, int iCol); 
```

您将返回分配给 char*，因此您将删除 const。这就是您收到警告的原因。你应该尊重 const。

```
const unsigned char *isNil = ... 
```

我并不是一个真正的 Objective-c 大佬，但我认为从风格上来说，将原始类型与 NULL 而不是 nil 进行比较是常见的做法。也不需要调用 column_text 两次。

```
const char *columnText = (const char *)sqlite3_column_text(selectstmt, 2);
if(columnText != NULL)
{
    myName = [NSString stringWithUTF8String: columnText ];
} 
```

您可以在上面看到我已将 const unsigned char 指针转换为 const signed char 指针。你应该确保你知道你什么时候放弃警告，这是正确的做法。在这种情况下，强制转换为有符号字符是安全的。一般来说，永远不要抛弃 const，因为制作该 API 的人可能正在做一些需要您将数据视为 const 的事情。

# python - 在 Python 中搜索对象列表

> ID：598398
> 
> 赞同：112
> 
> 时间：2009-02-28T18:06:20.083
> 
> 标签：python

假设我正在创建一个类似于 C 风格结构的简单类，仅用于保存数据元素。我试图弄清楚如何在对象列表中搜索属性等于某个值的对象。下面是一个简单的例子来说明我想要做什么。

例如：

```
class Data:
    pass

myList = []

for i in range(20):
    data = Data()
    data.n = i
    data.n_squared = i * i
    myList.append(data) 
```

我将如何搜索 myList 列表以确定它是否包含 n == 5 的元素？

我一直在谷歌搜索和搜索 Python 文档，我想我可以通过列表理解来做到这一点，但我不确定。我可能会补充一点，顺便说一句，我必须使用 Python 2.4.3，所以我无法使用任何新的 gee-whiz 2.6 或 3.x 功能。

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2009-02-28T18:11:05.437

您可以通过列表推导获得*所有*匹配元素的列表：

```
[x for x in myList if x.n == 30]  # list of all elements with .n==30 
```

如果您只是想确定列表是否包含*任何*匹配的元素并（相对）有效地执行，您可以执行

```
def contains(list, filter):
    for x in list:
        if filter(x):
            return True
    return False

if contains(myList, lambda x: x.n == 3)  # True if any element has .n==3
    # do stuff 
```

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2009-02-28T20:15:28.477

**简单、优雅、强大：**

与内置函数结合的生成器表达式……（python 2.5+）

```
any(x for x in mylist if x.n == 10) 
```

使用 Python[`any()`](http://docs.python.org/2/library/functions.html#any)内置函数，其定义如下：

> **any(iterable)** `->` 如果可迭代的任何元素为真，则返回真。相当于：

```
def any(iterable):
    for element in iterable:
        if element:
            return True
    return False 
```

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2009-02-28T18:20:01.453

为了完整起见，我们不要忘记可能工作的最简单的事情：

```
for i in list:
  if i.n == 5:
     # do something with it
     print "YAY! Found one!" 
```

* * *

## 回答 #4

> 赞同：49
> 
> 时间：2009-02-28T18:19:28.413

```
[x for x in myList if x.n == 30]               # list of all matches
[x.n_squared for x in myList if x.n == 30]     # property of matches
any(x.n == 30 for x in myList)                 # if there is any matches
[i for i,x in enumerate(myList) if x.n == 30]  # indices of all matches

def first(iterable, default=None):
  for item in iterable:
    return item
  return default

first(x for x in myList if x.n == 30)          # the first match, if any 
```

* * *

## 回答 #5

> 赞同：43
> 
> 时间：2009-02-28T18:22:06.847

```
filter(lambda x: x.n == 5, myList) 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2009-02-28T18:23:29.947

您可以使用`in`来查找集合中的项目，并使用列表推导来提取您感兴趣的字段。这（适用于列表、集合、元组以及任何定义`__contains__`或的内容`__getitem__`）。

```
if 5 in [data.n for data in myList]:
    print "Found it" 
```

也可以看看：

*   [包含方法](http://docs.python.org/reference/datamodel.html#object.__contains__)
*   [运行中](http://docs.python.org/reference/expressions.html#in)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2009-02-28T18:10:38.807

您应该向您的类添加一个`__eq__`和一个`__hash__`方法`Data`，它可以检查`__dict__`属性是否相等（相同的属性），然后它们的值是否也相等。

如果你这样做了，你可以使用

```
test = Data()
test.n = 5

found = test in myList 
```

`in`关键字检查`test`是否在`myList`.

如果您只想拥有一个`n`属性，`Data`您可以使用：

```
class Data(object):
    __slots__ = ['n']
    def __init__(self, n):
        self.n = n
    def __eq__(self, other):
        if not isinstance(other, Data):
            return False
        if self.n != other.n:
            return False
        return True
    def __hash__(self):
        return self.n

    myList = [ Data(1), Data(2), Data(3) ]
    Data(2) in myList  #==> True
    Data(5) in myList  #==> False 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-03-01T01:14:25.590

考虑使用字典：

```
myDict = {}

for i in range(20):
    myDict[i] = i * i

print(5 in myDict) 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-06-16T06:01:31.630

另一种方法是使用 next() 函数。

```
matched_obj = next(x for x in list if x.n == 10) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-04-18T18:55:39.253

将以下列表推导与该`index`方法结合使用：

```
data_n = 30
j = [data.n for data in mylist].index(data_n)
print(mylist[j].data.n == data_n) 
```

# delphi - Delphi win32 应用程序中的社交网络

> ID：598400
> 
> 赞同：0
> 
> 时间：2009-02-28T18:07:11.250
> 
> 标签：delphi, winapi, social-networking

我想在我正在创建的应用程序中创建某种“社交”连接/交互。

该应用程序适用于一组有限的专业人士，这将有利于彼此之间的社交联系/互动。

所以现在我不知道该怎么办。做一些新的事情，与现有的整合？

我对想法持开放态度。

- - 更新 - -

一些基本功能应该是：

•私人信息

•博客功能

•出版物

•用户个人资料，包含基本信息

•好友列表

•游泳池

如果可能的话，开源产品。

平台。现在是的win32应用程序。稍后，如果这个概念流行起来，我们就可以上网了。这只是大型应用程序的一个额外功能，而不是主要功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-28T18:57:18.663

你的问题很模糊，但我试着给你一些指示。

首先，您需要在应用程序中定义您想要的功能。您需要一个面向专业人士的社交网站，这样我们就可以排除那些毛茸茸的东西。但是，您可能希望包括社交网站的其他方面：

*   实时聊天（一对一或多，你想包括语音和视图）
*   私人消息（如电子邮件）
*   讨论（如讨论论坛）
*   博客功能
*   出版物
*   用户个人资料，以及您想要包含的内容。
*   我们需要维护朋友列表吗？
*   和特殊目的群体。

然后，您需要决定是否要购买、使用或制作该软件。也许你可以改编一些开源产品。

然后你需要决定一个平台。您已标记此问题 delphi win32。但是为什么不使用基于网络的概念。

如果您有更具体的问题，我们很乐意提供帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-01T05:32:03.507

查看您的要求——您需要一个基于 Web 的应用程序

[使用Drupal](http://drupal.org/)之类的东西，它可以完成您需要的所有基本功能，而且您不必编写一行代码。

它使用 MySql 作为它的数据库——并且有数百个不同的插件

# multithreading - 异步调用是否总是创建/调用新线程？

> ID：598436
> 
> 赞同：32
> 
> 时间：2009-02-28T18:29:31.103
> 
> 标签：multithreading, asynchronous

异步调用是否总是创建一个新线程？

例子：

如果 JavaScript 是单线程的，那么它如何进行异步回发？它实际上是阻塞直到它得到回调吗？如果是这样，这真的是异步调用吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2009-03-05T23:14:38.410

这是个有趣的问题。

异步编程是一种主要是单线程的编程范例，即“跟随一个连续执行的线程”。

您指的是 javascript，所以让我们在 Web 浏览器的环境中讨论该语言。Web 浏览器在每个窗口中运行一个 javascript 执行线程，它处理事件（例如 onclick="someFunction()"）和网络连接（例如 xmlhttprequest 调用）。

```
<script>
function performRequest() {
  xmlhttp.open("GET", "someurl", true);
  xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState == 4) {
      alert(xmlhttp.responseText);
    }
  }
  xmlhttp.send(sometext);
}
</script>
<span onclick="performRequest()">perform request</span> 
```

（这是一个非工作示例，仅用于演示概念）。

为了以异步方式完成所有操作，控制线程具有所谓的“主循环”。主循环看起来像这样：

```
while (true) {
    event = nextEvent(all_event_sources);
    handler = findEventHandler(event);
    handler(event);
} 
```

重要的是要注意这不是一个“忙循环”。这有点像一个睡眠线程，等待活动发生。活动可以是来自用户的输入（鼠标移动、按钮单击、打字），也可以是网络活动（来自服务器的响应）。

所以在上面的例子中，

1.  当用户点击 span 时，会生成一个 ButtonClicked 事件，findEventHandler() 会在 span 标签上找到 onclick 事件，然后该事件将调用该处理程序。
2.  当创建 xmlhttp 请求时，它被添加到事件源的 all_event_sources 列表中。
3.  performRequest() 函数返回后，主循环在 nextEvent() 步骤等待响应。在这一点上，没有什么“阻止”进一步的事件被处理。
4.  数据从远程服务器返回，nextEvent() 返回网络事件，事件处理程序被发现是 onreadystatechange() 方法，该方法被调用，并触发一个 alert() 对话框。

值得注意的是 alert() 是一个阻塞对话框。当该对话框启动时，无法处理更多事件。我们有一个现成的方法会阻止在该页面的上下文中进一步执行，这是网页 javascript 模型的一个怪癖。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-02-28T18:43:47.917

Javascript 模型是*单线程的*。异步调用*不是*新线程，而是中断现有线程。它类似于内核中的中断。

是的，使用单个线程进行异步调用是有意义的。下面是如何考虑的：当你在单个线程中调用一个函数时，当前方法的状态被压入堆栈（即局部变量）。子例程被调用并最终返回，此时原始状态从堆栈中弹出。

使用异步回调，同样的事情也会发生！不同之处在于子程序由系统调用，而不是由当前代码调用子程序。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-07T06:29:10.557

特别是关于 JavaScript 的一些注意事项：

`XMLHttpRequest`s 默认是非阻塞的。该`send()`方法在请求被中继到底层网络堆栈后立即返回。来自服务器的响应将安排在事件循环上调用您的回调，正如其他优秀答案所讨论的那样。

这不需要新线程。底层的套接字 API 是可选择的，类似于[`java.nio.channels`](http://java.sun.com/javase/6/docs/api/java/nio/channels/package-summary.html)Java。

可以通过将*第三* 个参数传递给. 这将导致该方法阻塞，直到从服务器接收到响应，从而将事件循环置于网络延迟的支配下，并可能挂起浏览器直到网络超时。这是一件坏事™。`XMLHttpRequest``false`[`open()`](https://developer.mozilla.org/en/XMLHttpRequest#open())`send()`

Firefox 3.5 将在类中引入诚实的多线程 JavaScript [`Worker`](https://developer.mozilla.org/En/Using_web_workers)。后台代码在完全独立的环境中运行，并通过在事件循环上调度回调与浏览器窗口进行通信。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-28T18:47:53.943

在许多 GUI 应用程序中，异步调用（如 Java 的 invokeLater）只是将 Runnable 对象添加到其 GUI 线程队列中。GUI 线程已经创建，它不会创建新线程。但是异步系统甚至不需要线程。以 libevent 为例，它使用 select/poll/kqueue 等对套接字进行非阻塞调用，然后触发对您的代码的回调，完全没有线程。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-09T16:03:45.293

不，但会涉及多个线程。

异步调用可能会启动另一个线程来完成工作，或者它可能会将消息发布到另一个已经运行的线程上的队列中。调用者继续，被调用者在处理完消息后回拨。

如果您想在这种情况下进行同步调用，您需要发布一条消息并积极等待回调发生。

综上所述：将涉及多个线程，但不一定会创建一个新线程。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-09T18:10:14.647

我不了解 javascript，但例如在 Windows 窗体世界中，可以在没有多个线程的情况下进行异步调用。这与 Windows 消息泵的运行方式有关。基本上，Windows 窗体应用程序设置了一个消息队列，Windows 通过该消息队列放置消息，通知它有关事件的信息。例如，如果您移动鼠标，消息将被放置在该队列中。Windows 窗体应用程序将处于无限循环中，消耗向其抛出的所有消息。根据每条消息包含的内容，它将移动窗口、重新绘制它们甚至调用用户定义的方法等等。对方法的调用由委托标识。当应用程序在队列中找到委托实例时，它会愉快地调用委托所引用的方法。

因此，如果您在一个方法中做某事并且想要在不创建新线程的情况下产生一些异步工作，您所要做的就是使用 Control.BeginInvoke 方法将一个委托实例放入队列中。现在，这实际上不是多线程的，但是如果您将非常小的工作投入到队列中，它看起来就像是多线程的。另一方面，如果你给它一个耗时的方法来执行，应用程序将冻结直到方法完成，这看起来像一个卡住的应用程序，即使它正在做某事。

# mysql - 什么是好的 MySQL 数据库模式工具？

> ID：598437
> 
> 赞同：15
> 
> 时间：2009-02-28T18:32:16.230
> 
> 标签：mysql, database, schema

我即将开始一个新项目，这次我想尝试使用一些更好的工具。最后一个项目，我为 MySQL 手动编写了所有数据库创建 SQL。我希望有一些好的工具可以在 MySQL 中创建、维护和修改数据库模式。我的预算是自掏腰包的，所以免费（如啤酒）可能是最好的。:)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-02-28T18:34:30.390

MySQL 工作台：[http ://dev.mysql.com/workbench/](http://dev.mysql.com/workbench/)

它是免费的并且非常易于使用。我通常创建模式图并将其导出为 .sql 文件以与 phpMyAdmin 一起使用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-28T18:37:42.330

[http://dev.mysql.com/downloads/gui-tools/5.0.html](http://dev.mysql.com/downloads/gui-tools/5.0.html)提供了使用的 GUI 工具列表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-28T18:42:37.950

Mac 选项，请尝试 Querious 或 Sequel Pro - 这是一个比较：

[http://theappleblog.com/2009/02/27/mysql-showdown-querious-vs-sequel-pro/](http://theappleblog.com/2009/02/27/mysql-showdown-querious-vs-sequel-pro/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-03T08:45:40.827

可以在[databaseanwers中找到完整的数据建模工具列表](http://www.databaseanswers.org/modelling_tools.htm)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-01T02:49:49.433

MySQL Workbench 5.1 (Beta 1) 应该在 2009 年 3 月 6 日发布。它将在 MacOS、Fedora、Ubuntu、Windows 上可用。这些是每个平台上的*本机*C++ 实现。WB 5.1 专注于数据建模（取代 Mike Zinner 流行的 DBDesigner 产品）。

MySQL Workbench 5.2 (Alpha 1) 应该在 2009 年 4 月中旬发布（在 MySQL 用户大会 2009 前后）。这将包括彻底重写 MySQL 查询浏览器。

[http://forums.mysql.com/index.php?151](http://forums.mysql.com/index.php?151)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-20T11:04:05.320

我知道这是一个旧线程，但这太好了，不容错过。我最近才发现这个...
[HeidiSQL](http://www.heidisql.com "海蒂SQL")

它支持通过 SSH 隧道连接。它使用 PuTTY (plink.exe) 来执行此操作，但避免了手动修改 PuTTY 设置。如果您使用这个漂亮的便携式 PuTTY 版本，那就更容易了... [http://jakub.kotrla.net/putty/](http://jakub.kotrla.net/putty/)

另外它是开源的。我强烈建议您捐款，因为它是一个很棒的工具。

另一个看起来不错的是[DBeaver](http://dbeaver.jkiss.org/ "海狸")

我曾经非常喜欢 MySQL Administrator，但新的 Workbench 太臃肿了。我只是想要一种快速浏览模式的方法，而不必`SHOW TABLE STATUS`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-22T18:25:49.037

使用 DB Schema 编辑器，但它不是免费软件。[但是您可以在这里](http://www.dbschema.com/download.html)下载免费试用 15 天

# sql - 如何使用 T-Sql 在给定月份检索所有插入的行

> ID：598438
> 
> 赞同：1
> 
> 时间：2009-02-28T18:33:04.153
> 
> 标签：sql, tsql, date-range

我正在尝试检索在特定月份插入的所有行。

```
SELECT 
    dbo.Post.UserId, 
    dbo.Post.Tags, 
    dbo.Post.CommentCount, 
    dbo.Post.Status,  
    dbo.Post.PostDate, 
    dbo.Post.[Content], 
    dbo.Post.Title, 
    dbo.Post.PostId, 
    dbo.[User].DisplayName 
FROM  
    dbo.Post INNER JOIN
    dbo.[User] ON dbo.Post.UserId = dbo.[User].UserId 
Where PostDate >=  DATEADD(mm, 0, DATEDIFF(mm, 0, '01/28/2009')) 
    AND  PostDate <=  DATEADD(mm, 0, DATEDIFF(mm, 0, '01/28/2009')) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-28T18:37:41.503

```
 WHERE PostDate >=  DATEADD(mm, DATEDIFF(mm, 0, '01/28/2009'), 0)
   AND PostDate <  DATEADD(mm, 1 + DATEDIFF(mm, 0, '01/28/2009'), 0) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-28T19:10:23.907

您提到“给定月份”，我假设月份编号从 1 到 12。如果您从日期开始并且只想要该月内的所有内容：

```
@month = datepart(mm, 'given date');
@year  = datepart(yy, 'given date');

Then use:

Where 
   datepart(mm, Post.Postdate) = @month
   and datepart(yy, Post.PostDate) = @year 
```

像那样。

（我添加了年份以防你关心它。:-)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-28T19:08:07.593

您要创建该月的开始时刻和下个月的开始时刻，然后从开始时刻（包括开始时刻）开始日期，直到但不包括下一个开始时刻。

即结果应该等于：

```
Where PostDate >= '01/01/2009' and PostDate < '02/01/2009' 
```

这将使您准确地了解该月，并且不会与下个月重叠。

该表达式`DATEDIFF(mm, 0, '2009-01-28')`将为您提供从 开始的月数`01/01/1900`，因此您应该使用该日期作为 中的第三个参数`DATEADD`：

```
DATEADD(mm, DATEDIFF(mm, 0, '01/28/2009'), '01/01/1900') 
```

要获得下个月的开始时刻，您只需将`'02/01/1900'`其用作偏移量。让我们把它放在条件中：

```
Where
  PostDate >= DATEADD(mm, DATEDIFF(mm, 0, '01/28/2009'), '01/01/1900') and
  PostDate < DATEADD(mm, DATEDIFF(mm, 0, '01/28/2009'), '02/01/1900') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-28T22:16:36.690

这会做到的。

```
Where PostDate >=  DATEADD(mm, DATEDIFF(mm, 0, '01/28/2009'), 0) 
    AND  PostDate <  DATEADD(mm, DATEDIFF(mm, 0, '01/28/2009') + 1, 0) 
```

此外，我通常在查询之前设置我的日期范围，因此我不必将日期函数放在 where 子句中。

```
declare @from datetime;
declare @thru datetime;

set @from = DATEADD(mm, DATEDIFF(mm, 0, '01/28/2009'), 0);
set @thru = DATEADD(mm, 1, @from);

...
Where PostDate >=  @from 
        AND  PostDate <  @thru 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-28T18:47:17.800

```
@dtInput = '01/28/2009'

-- subtract current days (less one) to get to start of month
set @dtStart = dateadd( dd, 1 - datepart( dd, @dtInput ), @dtInput )

-- add a month, then subtract 1 sec to get 23:59:59 on last day of month
set @dtEnd = dateadd( ss, -1, dateadd( mm, 1, @dtStart ))

SELECT ... WHERE PostDate between @dtStart and @dtEnd 
```

# asp.net-mvc - 如何在不输入“Home”的情况下在 HomeController 中进行操作？

> ID：598441
> 
> 赞同：0
> 
> 时间：2009-02-28T18:34:25.863
> 
> 标签：asp.net-mvc, routing

我的 HomeController 正在控制一些页面，如“索引”和其他一些页面，如“联系”、“关于我们”。

但是，如果我输入：

```
www.blabla.com/ 
```

将调用“索引”并且它可以工作。

但是，如果我输入：

```
www.blabla.com/AboutUs 
```

它根本不起作用！如果我输入它就可以工作：

```
www.blabla.com/Home/AboutUs 
```

我怎样才能使 HomeController 中的所有操作都工作而不在它们之前输入“Home”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-28T18:39:13.030

您必须制作一条看起来像这样的路线。

```
routes.MapRoute("AboutUs", "AboutUs",
                new
                {
                    controller = "Home",
                    action = "AboutUs"
                }); 
```

您可以在 Global.asax 文件中找到您的路线。

原因是如果您检查 Global.asax 文件，您应该会看到适用于控制器/操作 url 路由的默认路由。所以如果你想要 /MyMethod 你必须为它创建一个路由。

你也可以尝试类似的东西。

```
routes.MapRoute("HomeActions", "{action}",
                new
                {
                    controller = "Home",
                    action = "Index"
                }); 
```

这应该允许您仅使用 / 来访问所有家庭控制器操作。

# php - 在 FastCGI 下运行时，如何在多个 PHP 进程之间共享 APC 缓存？

> ID：598444
> 
> 赞同：20
> 
> 时间：2009-02-28T18:35:20.183
> 
> 标签：php, fastcgi, apc, mmap

我目前正在运行多个 PHP/FastCGI 副本，并启用了 APC（在 Apache+mod_fastcgi 下，如果重要的话）。我可以在进程之间共享缓存吗？如何检查它是否已经共享？（我认为`apc.mmap_file_mask`可能涉及ini设置，但我不知道如何使用它。）

（我认为它目前*不*共享的原因之一是`apc.mmap_file_mask`，正如 apc.php Web 界面所报告的那样，当我重新加载时，它会在大约 3 个不同的值之间翻转。）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-06-16T23:03:46.170

APC当前**不在**fastcgi 或 fcgid 下运行的多个 php-cgi 工作人员之间共享其缓存。有关详细信息，请参阅[此功能请求](http://pecl.php.net/bugs/bug.php?id=11988)：“此行为是目前的预期行为”。

一种解决方法是允许 PHP 管理自己的工作人员。您可以使用包装脚本中的 PHP_FCGI_CHILDREN 环境变量来执行此操作（网络上为此提供了大量示例）。如果您想使用此方法，您还应该阻止 fastcgi/fcgid 生成多个 PHP 进程。

PHP_FCGI_CHILDREN 的缺点是它对worker 的管理不如fcgid/fastcgi 提供的那样好。

所以，我们到了。fcgid/fastcgi 环境中的 APC 意味着给每个 PHP 工作者自己的缓存，或者禁用 fcgid/fastcgi 的进程生成以支持 PHP 的内置管理。让我们希望这种情况在未来有所改变。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-07-07T18:43:44.417

虽然它并不完美，但 Domster 建议的方法是最好的。我在一些低容量站点上做了很短的时间，没有错误。昨晚我写了一篇关于[如何使用共享操作码缓存设置 mod_fastcgi](http://www.brandonturner.net/blog/2009/07/fastcgi_with_php_opcode_cache/)的详细说明。

我发现使用 mod_fastcgi 而不是较新的 mod_fcgid 非常重要，因为 mod_fcgid 一次只会向 PHP 进程发送一个请求，而不管 PHP 通过 PHP_FCGI_CHILDREN 产生了多少子进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-28T19:22:30.057

缓存应该在进程之间共享。您应该看到 phpinfo() 和 apc.php 调用之间的 mmap 文件的值相同。它适用于我建议的默认 APC 配置设置：

```
extension="apc.so"
apc.enabled=1
apc.shm_segments=1
apc.shm_size=128
apc.ttl=7200
apc.user_ttl=7200
apc.num_files_hint=1024
apc.mmap_file_mask="/tmp/apc.XXXXXX"
apc.enable_cli=1 
```

您可能想要发布您的设置。我看到警告说 mmap_file_mask 必须恰好是它们允许的值之一。因此，如果您缺少其中一个 X，则不知道您会得到什么。

也许它涉及你的 fastcgi+apache 配置。

# vb.net - 奇怪的 Linq 错误

> ID：598445
> 
> 赞同：3
> 
> 时间：2009-02-28T18:35:56.097
> 
> 标签：vb.net, linq

我正在使用 Linq 将任何对象的数组转换为 CSV 列表：

```
String.Join(",", (From item In objectArray Select item.ToString()).ToArray()) 
```

这给了我一个奇怪的错误：***“范围变量名称与'Object'类成员的名称不匹配。”***

我可以通过将字符串包装在 VB StrConv 方法中来绕过它，设置为“Nothing”：

```
String.Join(",", (From item In oArray Select StrConv(item.ToString(), VbStrConv.None)).ToArray()) 
```

但是，这似乎有点像黑客，我想避免它。

出现此问题时，是否有人有任何想法，以及解决此问题的更好方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-28T18:44:12.970

将您的代码修改为：

```
String.Join(",", (From item In objectArray Select stringVal = item.ToString()).ToArray()) 
```

`Select`问题是 VB 为子句返回的变量命名。隐含地，它试图给出`ToString`与方法`item.ToString()`冲突的名称。`ToString`为了防止这种情况，您应该明确指定一个名称（`stringVal`在上面的行中）。

# c# - 如何禁用 C# 组合框中元素的编辑？

> ID：598447
> 
> 赞同：171
> 
> 时间：2009-02-28T18:36:33.503
> 
> 标签：c#, winforms, combobox

我在 ComboBox 中有一些元素（带有 C# 的 WinForms）。我希望他们的内容是静态的，以便用户在运行应用程序时无法更改其中的值。我也不希望用户向 ComboBox 添加新值

* * *

## 回答 #1

> 赞同：324
> 
> 时间：2009-02-28T18:40:28.800

使用 ComboStyle 属性：

```
comboBox.DropDownStyle = ComboBoxStyle.DropDownList; 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-11-07T04:55:49.810

这是我使用的另一种方法，因为更改`DropDownSyle`为`DropDownList`使其看起来是 3D 的，有时它只是丑陋的。

`KeyPress`您可以通过像这样处理 ComboBox 的事件来防止用户输入。

```
private void ComboBox1_KeyPress(object sender, KeyPressEventArgs e)
{
      e.Handled = true;
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-08-25T12:20:13.890

您可以将属性中的 DropDownStyle 更改为 DropDownList。这不会显示过滤器的文本框。

[![DropDownStyle 属性](https://i.stack.imgur.com/fDcRr.png)](https://i.stack.imgur.com/fDcRr.png)
[（屏幕截图由[FUSION CHA0S](https://stackoverflow.com/users/9754937/fusion-cha0s)提供。）]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-31T07:30:32.630

我试过 ComboBox1_KeyPress 但它允许删除字符&你也可以使用复制粘贴命令。我的 DropDownStyle 设置为 DropDownList 但仍然没有用。所以我做了以下步骤来避免组合框文本编辑。

*   下面的代码处理删除和退格键。并且还禁用与控制键的组合（例如 ctr+C 或 ctr+X）

    ```
     Private Sub CmbxInType_KeyDown(sender As Object, e As KeyEventArgs) Handles CmbxInType.KeyDown
        If e.KeyCode = Keys.Delete Or e.KeyCode = Keys.Back Then 
            e.SuppressKeyPress = True
        End If

        If Not (e.Control AndAlso e.KeyCode = Keys.C) Then
            e.SuppressKeyPress = True
        End If
    End Sub 
    ```

*   在表单加载中，使用下面的行禁用右键单击组合框控件，以避免通过鼠标单击进行剪切/粘贴。

    ```
    CmbxInType.ContextMenu = new ContextMenu() 
    ```

# objective-c - “First Responder”——我说对了吗？

> ID：598455
> 
> 赞同：31
> 
> 时间：2009-02-28T18:39:32.060
> 
> 标签：objective-c, cocoa, nib, first-responder

让我简短地总结一下：nib 文件中的“First Responder”是一个对象，它表示具有用户焦点的 UI 控件元素。因此，如果用户单击一个控件，nib 会将单击的 UI 控件设置为 First Responder。在我的应用程序中，我可以从笔尖向那个“急救人员”提供一个出口，这样我就可以向用户通过点击激活的任何内容发送一条消息“制作红色字体颜色”。

然后，如果此 First Responder UI 控件不理解该消息，则该消息将在响应者链中向上传递，直到父元素或祖父（等等）UI 控件元素理解该消息。否则会被忽略。

因此，First Responder 总是建立一个指向具有焦点的 UI 控件的“链接”。是对的吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2009-02-28T20:52:15.800

正确的总体情况，错误的第一段实现细节。

> NibFile 中的“First Responder”是一个对象……</p>

不，实际上，First Responder 是`nil`。在 nib 中将 UI 控件（例如，按钮）连接到 First Responder 相当于`[control setTarget:nil]`在代码中。

在 nib 窗口中出现 First Responder fake-object 的原因是，在 IB 中，您同时设置了 target 和 action（ctrl-drag 到 target，从弹出菜单中选择 action）。您不能像在代码中那样设置操作并保持目标未设置，因此要将其设置为`nil`，您需要明确地这样做。这就是 First Responder 的用途：它是一个代表 的假对象`nil`，因此您可以设置目标和操作，就像将其设置为特定的真实目标时一样。

当然，您不能使用它来设置任何其他内容`nil`，只能设置视图的目标。您只能用它来表示 First Responder，而不是其他任何东西。

> 因此，如果用户单击 UI 控件，则 Nib 会设置……</p>

笔尖什么都不做。它只是存储在磁盘上的冻干对象集合。即使你实例化 NSNib，你所做的只是解冻一些对象。做事的是对象。

在手头的情况下，当您从 nib 取消归档连接到 First Responder 的控件时，它的目标设置为`nil`（请记住，这才是 First Responder 的真正含义： 的目标`nil`）。当控件的目标是`nil`并且用户单击它时，它会将其操作发送给当时是第一响应者的响应者。

你的第二和第三段是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-28T20:43:30.470

你的理解是不完整的。[响应者链](http://developer.apple.com/mac/library/documentation/Cocoa/Conceptual/EventOverview/Introduction/Introduction.html)包含的不仅仅是我们通常认为的“UI 控件”，还包括最重要的当前文档。最大的好处之一是它允许您与概念上“当前”的任何内容（当前窗口、当前文本字段、当前文档等）进行交互，而无需大量寻找它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-28T20:13:33.647

查看此链接，它可以很好地解释。我认为你有它的要点：

[http://cocoadev.com/FirstResponder](http://cocoadev.com/FirstResponder)

从来源：

> FirstResponder 是响应者链中第一个有机会响应事件的对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-12-26T11:30:37.570

响应者是在事件（例如单击按钮）发生时将执行操作（调用函数）的任何对象。响应者链是一系列对象，每个对象都包含在另一个对象中——例如，窗口内面板内的按钮。当一个事件发生时，我们遍历链，直到我们找到一个没有设置响应者`nil`并因此可以响应事件的对象。因此，我们可以为整个窗口提供一个响应者，而不是为窗口中的每个按钮提供一个响应者对象。第一响应者只是响应者链中的第一个对象——将事件链接到第一响应者允许事件向上传递链。

# language-agnostic - 如何获取跨步模式的校验和

> ID：598458
> 
> 赞同：3
> 
> 时间：2009-02-28T18:42:16.347
> 
> 标签：language-agnostic, bit-manipulation, checksum

我有一个 64 位数（但只使用了 42 个低位），并且需要计算 4 位的总和, 和**（**注意`n`：`n+m`任何可以产生总和 >4 的东西都是无效的）对于一些固定的 m 和将所有位放入数字中的 n 的每个值`n+m*2``n+m*3`

作为一个例子，使用`m=3`并给出 16 位数字

```
0010 1011 0110 0001 
```

我需要计算

```
2, 3, 1, 2, 3, 0, 3 
```

有没有人有任何（很酷）的想法来做到这一点？我没问题。

* * *

我目前的想法是制作输入的位移副本以对齐要求和的值，然后构建一个逻辑树来执行 4x 1bit 加法器。

```
v1 = In;
v2 = In<<3;
v3 = In<<6;
v4 = In<<9;

a1 = v1 ^ v2;
a2 = v1 & v2;
b1 = v3 ^ v4;
b2 = v3 & v4;
c2 = a1 & b1;
d2 = a2 ^ b2;

o1 = a1 ^ b1;
o2 = c2 ^ d2;
o4 = a2 & b2; 
```

这最终会导致结果的位分布在 3 个不同的整数中，但是很好。

*编辑：碰巧我需要总和的直方图，所以对 , 进行位计数，[并](http://www-graphics.stanford.edu/~seander/bithacks.html#CountBitsSetNaive)`o4`给我想要的。`o2&o1``o2``o1`*

* * *

第二种解决方案使用完美的散列函数

```
arr = [0, 1, 1, 2, 1, 2, 2, 3, 1, 2, 2, 3, 2, 3, 3, 4];

for(int i = 0; i < N; i++)
{
   out[i] = arr[(In & 0b1001001001) % 30]; 
   In >>= 1;
} 
```

这通过注意到 4 个选定位只能采用 16 种模式并且（通过猜测和检查）可以使用 mod 30 将它们散列为 0-15。从那里，一个计算值表给出了所需的总和。碰巧只有 4 步中的 3 步我需要以这种方式工作。

* * *

ps

正确胜过快速。快胜于清。我预计会运行数百万次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-28T19:38:36.570

也许我疯了，但我很开心 :D 这个解决方案是基于数据并行性的使用和伪造矢量 cpu 而没有实际使用 SSE 内在函数或任何类似的东西。

```
unsigned short out[64];
const unsigned long long mask      = 0x0249024902490249ul;
const unsigned long long shiftmask = 0x0001000100010001ul;

unsigned long long t = (unsigned short)(in >> 38) | (unsigned long long)(unsigned short)(in >> 39) > 40) > 41) << 48;
t &= mask;
*((unsigned long long*)(out + 38)) = (t & shiftmask) + (t >> 3 & shiftmask) + (t >> 6 & shiftmask) + (t >> 9 & shiftmask);

[... snipsnap ...]

t = (unsigned short)(in >> 2) | (unsigned long long)(unsigned short)(in >> 3) > 4) > 5) << 48;
t &= mask;
*((unsigned long long*)(out + 2)) = (t & shiftmask) + (t >> 3 & shiftmask) + (t >> 6 & shiftmask) + (t >> 9 & shiftmask);

t = (unsigned short)in | (unsigned long long)(unsigned short)(in >> 1) << 16;
t &= mask;
*((unsigned int*)out) = (unsigned int)((t & shiftmask) + (t >> 3 & shiftmask) + (t >> 6 & shiftmask) + (t >> 9 & shiftmask)); 
```

* * *

通过重新排序计算，我们可以进一步显着减少执行时间，因为它大大减少了将某些内容加载到 QWORD 中的次数。其他一些优化非常明显且相当次要，但总结起来是另一个有趣的加速。

```
unsigned short out[64];
const unsigned long long Xmask = 0x249024902490249ull;
const unsigned long long Ymask = 0x7000700070007u;

unsigned long long x = (in >> 14 & 0xFFFFu) | (in >> 20 & 0xFFFFu) > 26 & 0xFFFFu) > 32) << 48;
unsigned long long y;
y = x & Xmask;
y += y >> 6;
y += y >> 3;
y &= Ymask;
out[32] = (unsigned short)(y >> 48);
out[26] = (unsigned short)(y >> 32);
out[20] = (unsigned short)(y >> 16);
out[14] = (unsigned short)(y      );

x >>= 1;
y = x & Xmask;
y += y >> 6;
y += y >> 3;
y &= Ymask;
out[33] = (unsigned short)(y >> 48);
out[27] = (unsigned short)(y >> 32);
out[21] = (unsigned short)(y >> 16);
out[15] = (unsigned short)(y      );

[snisnap]

x >>= 1;
y = x & Xmask;
y += y >> 6;
y += y >> 3;
y &= Ymask;
out[37] = (unsigned short)(y >> 48);
out[31] = (unsigned short)(y >> 32);
out[25] = (unsigned short)(y >> 16);
out[19] = (unsigned short)(y      );

x >>= 1;
x &= 0xFFFF000000000000ul;
x |= (in & 0xFFFFu) | (in >> 5 & 0xFFFFu) > 10 & 0xFFFFu) << 32;
y = x & Xmask;
y += y >> 6;
y += y >> 3;
y &= Ymask;
out[38] = (unsigned short)(y >> 48);
out[10] = (unsigned short)(y >> 32);
out[ 5] = (unsigned short)(y >> 16);
out[ 0] = (unsigned short)(y      );

[snipsnap]

x >>= 1;
y = x & Xmask;
y += y >> 6;
y += y >> 3;
y &= Ymask;
out[ 9] = (unsigned short)(y >> 16);
out[ 4] = (unsigned short)(y      ); 
```

在我的电脑上编译为 64 位二进制的原生 c++ 中 5000 万次执行的运行时间（所有输出验证匹配 ^^）：
基于数组的解决方案：~5700 ms
天真的硬编码解决方案：~4200 ms 第
一个解决方案：~2400 ms
第二种解决方案：~1600 ms

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-28T20:03:30.893

我现在不想编码的一个建议是使用循环、一个数组来保存部分结果和常量来一次获取位 m。

```
loop 
   s[3*i] += x & (1 << 0);
   s[3*i+1] += x & (1 << 1);
   s[3*i+2] += x & (1 << 2);
   x >> 3; 
```

这将在每个总和中选择太多位。但是您也可以跟踪中间结果并在进行时从总和中减去，以说明可能不再存在的位。

```
loop 
   s[3*i] += p[3*i]   = x & (1 << 0);
   s[3*i+1] += p[3*i+1] = x & (1 << 1);
   s[3*i+2] += p[3*i+2] = x & (1 << 2);

   s[3*i] -= p[3*i-10];
   s[3*i+1] -= p[3*i-9];
   s[3*i+2] -= p[3*i-8];
   x >> 3; 
```

当然，通过适当的边界检查。

最快的方法是对总和本身进行硬编码。

```
s[0] = (x & (1<<0)) + (x & (1<<3)) + (x & (1<<6)) + (x & (1<<9)); 
```

等等（这些变化发生在编译时。）

# c++ - 奇怪的顶点着色器/像素着色器故障

> ID：598471
> 
> 赞同：1
> 
> 时间：2009-02-28T18:52:42.077
> 
> 标签：c++, directx

我的水效果有点问题

正如你[在这里](http://img23.imageshack.us/img23/6127/psglitch.png)看到的，它没有以正确的方式显示。另一个应用了不同纹理的[屏幕](http://img142.imageshack.us/img142/1696/27198215.png)显示了转换中的错误，更清楚地显示了我的 HLSL 代码：

```
V2P vs(float4 inPos : POSITION, float2 inTex: TEXCOORD)
{    
    V2P Output = (V2P)0;

    float4x4 viewproj = mul (matView, matProjection);
    float4x4 worldviewproj = mul (matWorld,viewproj);

    float4x4 reflviewproj = mul (matRLView, matProjection);
    float4x4 reflworldviewproj = mul (matWorld, reflviewproj);

    Output.Position = mul(inPos, worldviewproj);
    Output.RLMapTex = mul(inPos, reflworldviewproj);

    return Output;
}
P2F ps(V2P PSIn)
{
    P2F Output = (P2F)0;        

    float2 ProjectedTexCoords;
    ProjectedTexCoords.x =   PSIn.RLMapTex.x / PSIn.RLMapTex.w /2.0f + 0.5f;
    ProjectedTexCoords.y =  -PSIn.RLMapTex.y / PSIn.RLMapTex.w /2.0f + 0.5f;    

    float2 ProjectedRefCoords;
    ProjectedRefCoords.x = ( PSIn.Position.x / PSIn.Position.w) /2.0f + 0.5f;
    ProjectedRefCoords.y = (-PSIn.Position.y / PSIn.Position.w) /2.0f + 0.5f; 

    Output.Color = tex2D(samRLMap, ProjectedTexCoords);    

    return Output;
} 
```

反射贴图在渲染目标上渲染，同时沿水高翻转眼睛的 y 值。（并且向上向量 0,-1,0）

所以，我的问题是：这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-28T22:32:02.597

我想我找到了，我用于反射视图的矩阵是错误的。当我使用标准视图时，它工作正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-28T20:40:09.480

我不清楚你为什么要改变 x。它不会和 y 翻转一样吗？如在

```
 float2 ProjectedTexCoords;
    ProjectedTexCoords.x =   PSIn.RLMapTex.x / PSIn.RLMapTex.w;
    ProjectedTexCoords.y =  -PSIn.RLMapTex.y / PSIn.RLMapTex.w /2.0f + 0.5f; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-28T20:59:49.073

看起来像重复其边缘像素的纹理。换句话说，您可能会在纹理边界之外进行纹理查找。你确定你的反射图足够大吗？

如果纹理坐标超出范围，也许尝试将输出颜色设置为红色？（我不会说 HLSL，所以我不知道它的语法，但我确信这是可能的。）

还是放大反射图？

即使您可以看到完整的源代码，这类问题也很难调试，因此这更多的是建议在哪里查看，而不是实际答案。我尝试进行心理调试。

# process - 在决定使用什么流程时是否应该考虑人为因素？

> ID：598472
> 
> 赞同：4
> 
> 时间：2009-02-28T18:52:57.787
> 
> 标签：process, agile

当您决定为您的项目使用什么方法或流程时，您是否应该考虑人为因素？如果对事情有任何阻力，你是顺其自然还是强迫人们改变？

例如，假设您想推动结对编程，但团队成员拒绝以这种模式工作（或表现出不喜欢），您会怎么做？让他们习惯，试着说服他们去做，还是顺其自然，让他们做自己喜欢的事？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-28T18:55:19.793

**人为因素是最重要的因素。**

如果您不考虑其他因素，请考虑该群体的文化和倾向。

想要一个过程失败的人会成功。改变流程比改变人容易得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-28T19:36:59.270

**首先尝试推理，你可能错了：**

如果你对某些事情有抗拒，你通常可以给出你认为它好的原因的观点，并听取他们认为它为什么不好的观点，并得出一些共同点。

你永远不应该强迫人们违背他们的意愿去做某事，而是试图根据你的逻辑推理说服他们。很多时候，您会从他们那里看到改变您观点的原因。

如果您的开发人员太害怕表达他们的意见，那么您应该让他们对发表意见感到自在。如果他们仍然不情愿，那么您应该考虑新的开发人员。

**进门原则：**

如果你想尝试一些你和他们都没有经验的新概念，比如结对编程，那么你可以让他们尝试 1-2 周，然后你可以在这个试用期后再次坐在一起评估效果。我想大多数人会觉得尝试新事物是完全合理的，如果他们没有经验，如果是为了了解方法的有效性，如果只是为了试用期。

如果在此试用期之后，您正在测试的东西是成功的，那么您的开发人员会更愿意接受这个想法。

**不要改变它们，找到适合的人：**

如果你 100% 支持某种做事方式，而你的开发人员 100% 反对，他不会尝试，也没有逻辑理由，与其试图改变他，你最好找一个开发人员将适合您的做事方式。

如果他们 100% 反对您想要更改的内容，您必须做出决定。是开发人员本身对您更重要，还是您要更改的流程更重要。

如果你强迫某人去做他们不想做的事情，他们会想办法让你的方法失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-28T19:10:28.743

是的。您的开发过程需要人性化。也就是说，有更好和更差的开发实践，你应该努力使用更好的实践。最好的方法论了解人类的长处和短处，并有促进前者和弥补后者的实践。

例如，大多数敏捷流程高度重视信任开发人员做正确的事情——努力工作并重视质量。它们允许开发人员对流程和产品进行大量投入。这利用了达到预期的人的素质。另一方面，人类一次很难管理太多复杂性，因此敏捷实践坚持将事情分解成可管理的块。

另一方面，我们知道人们不喜欢做不会直接为他们的工作增加价值的事情。敏捷实践认识到单元测试之类的价值，但坚持这一点，并要求开发人员遵守它，尽管最初并不情愿。使用 TDD 通过为开发测试提供真正的价值来弥补这一点——您首先进行测试，然后让它们指导设计。这是一种胡萝卜加大棒的方法，可以让开发人员摆脱最初的不情愿，让他们能够体验该方法的价值并自行购买。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-28T21:43:07.737

**调整流程**

与您的员工一起制定良好流程的关键在于使流程适应您需要或想要的仪式数量。我们在我工作的地方使用 RUP，RUP 的中心目标之一是在你的过程中调整仪式的数量以适应你的项目和人员。

例如，小型项目需要的仪式和工具支持要少得多。同样，刚接触流程的人也需要时间来适应。最好不要向他们灌输大量信息，让他们按照自己的节奏进行调整。

**给我看看钱款！**

让人们接受新流程就是让他们犯错误（或展示过去的示例），然后向他们展示该流程如何帮助防止错误。试着画一条直线来展示这个过程将如何帮助他们改进他们的工作方式。

例如：如果人们抵制自动化构建和自动运行测试，那么下次他们发布修复程序时，会破坏已经运行的一段代码，利用这个机会来说明自动化测试会在它之前发现错误被释放，节省了每个人的时间和金钱。

**自动化**

确保人们能够适应流程就是尽可能多地消除人为干预。使用自动捕获的信息尽可能多地自动化构建、测试和报告。

这如何帮助支持流程是通过消除“唠叨”因素。许多人抵制新流程，因为他们认为这意味着他们要做更多的工作，或者最终产生很少结果的额外工作。通过自动化现有任务并从中收集数据，您可以获得很多好处，而不会增加任何单个开发人员的工作量。

一个典型的例子是持续集成。CruiseControl、TeamCity 或 Hudson 等持续集成工具可以与版本控制存储库一起使用，以提取最新版本的源代码、构建该代码、执行和存档测试结果以及打包用于部署的内容。这不需要开发人员额外的努力，但您会得到很多额外的“过程”作为回报。你现在知道你的源代码有多好，你可以轻松地分发它，你可以更早地发现错误。

# licensing - 为什么软件有 EULA？

> ID：598482
> 
> 赞同：18
> 
> 时间：2009-02-28T19:00:14.977
> 
> 标签：licensing, history, eula

这是我所知道的唯一一个消费者必须同意只有律师才能（某事）理解的产品。我敢肯定，每年车祸造成的死亡人数比软件事故死亡人数还要多。但是当我买车时，我不会签署 EULA 之类的东西。

那么为什么软件有 EULA 呢？是否发生过严重的事故导致软件公司需要保护自己？（第一个拥有 EULA 的软件是什么？）

[更新] 只是为了澄清我的观点：我不明白为什么软件有 EULA。没有其他我能想到的产品（甚至枪）！那么，是什么让软件与众不同，该产品需要某种“责任限制”呢？

顺便说一句，[维基百科](http://en.wikipedia.org/wiki/Eula)说“美国收缩包装许可证的法律地位有些不清楚。”

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-02-28T19:05:40.203

不同之处在于您购买的是使用软件的许可证，而不是软件本身（软件公司仍然拥有）。EULA 规定了您可以使用该软件的方法。当您租用东西（例如房屋）、租赁设备等时，也有类似的协议。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2010-03-16T14:55:36.157

EULA 旨在成为传达或限制“使用”权利的合同，因此称为最终用户许可协议。它与版权无关，而与我与银行的抵押贷款合同无关。这就是为什么收缩包装许可证的合法性值得怀疑的原因。这是一份您在购买产品后才能阅读的合同。从这里的许多回复中可以清楚地看出，绝大多数人并没有完全理解版权不延伸到“使用”权利的想法。

一位回应者写道：“实际上，这本书是你的，但这本书的权利不是你的。就像在软件中一样，您购买了物理媒体，但受法律约束如何使用它。” 没有什么比真相更遥远。没有法律限制您如何使用这本书。作为销售的一部分，任何使用限制都必须由您和零售商商定。

考虑到在没有版权的情况下，书籍的复制和分发将是完全合法的。一本书将是典型的有形财产，仅此而已。版权限制了您合法复制和分发图书内容的能力。不需要额外的协议。版权绝不规定您可以如何使用您的图书，版权法也没有向作者传达传达、限制或协商“使用”权利的权力。他们可以限制使用权的唯一方法是通过单独的合同，该合同必须作为销售或租赁的一部分完成。

关于 GPL 存在一些混淆。GPL 不是 EULA。它是一种版权许可，只要您遵守许可的限制，就可以复制和分发内容。在没有 GPL 的情况下（假设您选择不接受），您仍然可以使用该软件，但版权法限制您复制或分发该软件。

EULA 出于各种目的而存在。开发软件的公司希望谈判一个让他们处于最低风险并给予他们最大影响力的立场。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-02-28T19:10:37.680

如果消费者收到没有任何许可的软件，请考虑他们可能认为自己的权利：

*   他们可能相信他们可以复制软件，想复制多少次就复制多少。
*   他们可能会考虑转售该软件，并仍然为自己保留一份副本。
*   他们可能认为软件必须完美运行，零错误（因为他们理解错误）
*   他们可能认为它已完全保证不会出现任何感知到的缺陷，并尝试在未来的任何时候将其退回以获得全额退款。

简而言之，EULA 消除了消费者对这些概念的误解。它定义了软件的所有权和版权，对其使用、分发、功能和质量的限制。

现在确实，随着律师越来越多地参与 EULA，越来越陌生的条款逐渐出现，例如您不能在博客上评论软件，或者您不能对媒体说软件的坏话，或者发布者拥有使用该软件创建的内容。

但从根本上说，EULA 应该是关于生产者和消费者了解什么是软件的可接受使用，什么不是该软件的可接受使用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-02-28T19:57:56.773

实际上，有趣的是，在德国 EULA 几乎没有法律约束力，因为您只能在购买后才能看到它们，所以对我们来说，您的问题的答案是： *恐吓**用户**不要做公司不做的事情想*

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-02-28T19:17:10.537

EULA 基本上有三个原因：

1.  软件比我能想到的任何其他产品都更具可复制性。它几乎从未留在其分发介质上。这产生了巨大的诱惑，例如，购买一份 Windows 并将其安装在公司的所有数千台计算机上。开发人员希望明确列出可以安装该软件的计算机数量。
2.  软件经常有未被发现的问题。即使是最好的 QA 部门也永远不会发现软件产品中的所有错误。开发人员知道这一点并希望受到法律保护。
3.  软件通常很容易拆开，以发现开发人员的商业机密或开发人员不想让其他人知道的其他信息。开发人员希望通过法律限制这一点，以保护他们相对于竞争对手的优势。

当然，有时其他术语还有其他原因。例如，Apple Mac 应用程序的 EULA 通常规定您只能在 Apple 品牌的计算机上安装软件；这确保了 Apple 的软件（通常比任何其他开发商便宜得多）增加了 Apple 硬件的销售。GNU GPL 试图确保衍生软件的创新仍然可供开发原始软件的社区使用。有多少条款，就有多少原因。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-28T19:06:30.077

这取决于 EULA 的确切措辞。通常，它的编写是为了通过直接告知用户复制程序是非法的，来加强现有法律，例如版权。它还增加了其他限制，例如禁止逆向工程，限制知识产权。

附加条款可能包括“不得用于核项目”或类似条款。这仅涵盖开发人员的基础，因为核系统开发人员极不可能在没有大量研究的情况下使用非实时、未经批准的系统。

进一步的条款可能会限制开发人员强烈反对的某些类别的用户，例如军队或政府。

至于哪个软件有第一个 EULA，我不知道。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-28T19:17:51.377

汽车和枪支在技术上具有类似于 EULA 的东西……我们只是称它们为“许可证”。您必须了解其操作的局限性和规则，然后进行一些测试并签署一些文件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-28T19:20:10.747

没有人提到提供者的义务，这些义务通常也在 EULA 中。如果我让你的软件成为我公司基础设施的关键部分，而你破产了，我希望能够得到代码，这样你的失败就不会导致我的失败。

正如有人所说，这更像是租赁协议而不是购买协议，这就是为什么用枪进行类比并不真正适用的原因。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-28T19:37:34.247

对于专有软件，许可证说明您**使用特定软件副本**的权利和转售的可能性，以及您和软件作者的权利和费用

对于开源软件，许可证还说明了您对源代码的权利和收费（**分发，不要这样做，有限制地这样做**）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-02T22:12:46.963

当您在射击场使用枪支时，您是否不必签署某种类型的释放或弃权书？逻辑类似。

# c# - 如何在 C# 中从项目的 Resources 文件夹中检索图像

> ID：598484
> 
> 赞同：12
> 
> 时间：2009-02-28T19:00:37.707
> 
> 标签：c#, winforms, resources

我的项目的资源文件夹中有一些图像，但我想从项目的这些资源文件中更改图片框

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-02-28T19:07:17.610

考虑使用[`Properties.Resources.yourImage`](http://msdn.microsoft.com/en-us/library/7k989cfy(VS.80).aspx)

[`Properties.Resources`](http://msdn.microsoft.com/en-us/library/7k989cfy(VS.80).aspx)包含您作为资源添加的所有内容（请参阅您的项目属性、资源选项卡）

除此之外，如果您将图像作为资源嵌入到项目中，则可以通过调用[`GetManifestResourceStream`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getmanifestresourcestream.aspx)嵌入图像的程序集来获取它们，例如

```
Stream imgStream = 
    Assembly.GetExecutingAssembly().GetManifestResourceStream(
    "YourNamespace.resources.ImageName.bmp");
pictureBox.Image = new Bitmap(imgStream); 
```

不要忘记将图像标记为嵌入式资源！（您需要在其属性窗口中设置图像的构建操作）

如果您发现您不断从 回来`null`，[`GetManifestResourceStream`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getmanifestresourcestream.aspx)则您可能输入了错误的名称。（可能很难找到正确的名称）召集[`GetManifestResourceNames`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getmanifestresourcenames.aspx)大会；这将为您返回所有资源名称，您可以在列表中找到您需要的资源名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-02-29T16:51:38.683

```
string img = null;

private void btnShow_Click(object sender, EventArgs e)
{
    string imgName;
    img = textBox1.Text;
    imgName = "images/" + img + ".jpg";

    if (imgName == null)
    {
        MessageBox.Show("no photo");
    }
    else if (imgName != null)
    {
        this.picBox1.Image = Image.FromFile("images/" + img + ".jpg");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-28T06:45:24.370

下面是从资源文件夹中获取图像的代码。通常我们将图像保存在资源文件夹中。但有时我们只有图像名称。在这种情况下，您只能使用图像名称访问资源文件夹中的图像。

下面的代码将对此进行演示。

```
private System.Resources.ResourceManager RM = new System.Resources.ResourceManager("YourAppliacationNameSpace.Properties.Resources", typeof(Resources).Assembly);

PbResultImage.Image = (Image)RM.GetObject(YourPictureName); 
```

*   **YourApplicationNameSpace**表示您的应用程序的名称。
*   **YourPictureName**表示您要从资源文件夹访问的图片。但图片名称必须不带扩展名，例如（PNG、GIF、JPEG 等）

希望我对某人有益。

谢谢你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-02T20:28:37.333

右键单击项目。转到资源选项卡。选择现有选项并添加图像。

[![在此处输入图像描述](https://i.stack.imgur.com/bztT4.png)](https://i.stack.imgur.com/bztT4.png)

现在通过代码访问

```
Image = Properties.Resources.ImageName 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-09T17:51:09.740

如果您需要通过字符串或连接引用调用您的控件，这也适用于您的控件。

只需先调用控件类型（在本例中为图片框）。假设 i=某个数字和 d=某个字符串：

```
var i = <some number>;
var d = <some string>;

((PictureBox)this.Controls["pictureBox" + i.ToString()]).Image = (Image)Properties.Resources.ResourceManager.GetObject("dice" + d); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-22T13:49:28.440

为我工作：

```
(Bitmap) Properties.Resources.ResourceManager.GetObject("ImageName"); 
```

# user-interface - 您将如何设计一个好的搜索 UI？

> ID：598488
> 
> 赞同：21
> 
> 时间：2009-02-28T19:03:52.237
> 
> 标签：user-interface, usability, search-engine

我想为我的用户提供一个“高级”搜索引擎。我基本上有很多搜索条件可供选择：

*   有些非常简单/常见，将大量使用（即时间段、项目 ID）
*   有些不太主流
*   还有一些不会用很多，但我还是想提供

总的来说，我有大约 30 多个标准可供选择

结果是我在网格中显示的数据集。

我在互联网上寻找灵感，甚至[谷歌](http://www.google.com/advanced_search?hl=en)似乎也没有一个很好的高级搜索解决方案。

我过去设计过这种工具，但我对结果并不满意，尽管用户最终能够非常有效地使用它。

*   你认为搜索面板应该一直可见（即显示在我的结果网格顶部）还是以单独的形式提供（这让我可以为所有控件使用更多位置）

*   您认为最好显示所有搜索条件，还是让用户在想要查看/使用更多条件时单击“高级”？

*   您将如何组织标准？按使用频率，或者按区域（即与用户、位置、时间等相关的标准）

*   我应该把“搜索”按钮放在哪里？在更常见的搜索控件旁边，还是在底部，或两者兼而有之？

更一般地说，您是否有关于如何设计一个漂亮的搜索 UI 的提示要分享？在这种“高级”搜索引擎中，您通常会错过哪些功能？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-02-28T19:36:12.237

不是 UI 方面的专家，但我见过很多糟糕的 UI。

*   KISS 是一个好的开始。
*   让它直观。
*   将搜索保留在顶部和底部。我不愿意使用迫使我向上移动页面以键入的东西（请参阅 Flex 文档，他们的分页控件仅在顶部 - 你知道在哪里痛苦的痛苦）。
*   标准的组织应该是双重的：
    *   基本运算符（20%），其中 80% 将预先使用
    *   随时动态编辑可用的标准集。
*   让用户以最少的启动时间开始，并允许他们根据需要添加/删除标准。这个想法是让他使用他需要的东西，而不是让他的思想或工作流程因为你的功能集的光彩而混乱。
*   正如其他人所提到的，并且是现在一般 UI 的趋势，使用隐藏的控件，除非用户明确想要高级/微调（按需 UI）。
*   一个好的经验法则是一个页面上最多有 5-7 个功能。
*   如果您能以这样的方式安排标准以便从中制作故事，那就太好了，即用户可以阅读他的查询并且您的操作员从中获得一些意义。
*   我非常喜欢小文本和易于理解的图标，但这样的设置取决于您的安装环境。您的孙子可以使用那匹强大的主力吗？
*   好的设计还需要你让你的 UI 易于访问。这是一个难以破解的难题，我完全不知道你会如何做到这一点。

祝你好运！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-02-28T19:33:41.433

我倾向于喜欢“规则列表”的方法。你知道一个：

```
Find items that match [ All |v] of these conditions:

[Name            |v]  [Contains   |v] [_____________] (-) (+)
[Start date      |v]  [Is before  |v] [_____________]     (+)

                                            (Cancel) (Search) 
```

这可以防止对话框变得过于混乱，但仍然为用户提供了他们可能需要的所有选项。

但这假设您需要如此先进的东西！您可能会发现智能设计的关键字列表方法可以正常工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-28T19:42:52.953

默认情况下隐藏高级控件。无论您的高级控件是否可见，您的搜索输入和操作按钮都应始终可见并突出显示。确保显示/隐藏高级控件不会改变主要输入或按钮的位置 - 这些需要保持静态，以便用户的空间记忆不受影响。

至于高级控件，在不知道具体需要展示什么类型的数据的情况下，我只能概述潜在的组织方法。就个人而言，我喜欢 LATCH：

*   地点
*   字母
*   时间（时间线或年表 - 想想历史博物馆）
*   类别（想想百货公司）
*   层次结构（从大到小，从最轻到最暗，等等。

根据您的控件，其中之一将最有意义。相应地组织。如果您可以使用滑块或范围输入（例如，'lightest'、'lighter' 等）而不是复选框/收音机列表，则最好这样做，因为它可以减少页面上的视觉元素数量。

忘记“加/减 7”规则——那些没有真正阅读过这项研究的人已经完全断章取义了。简而言之 - 它仅适用于人类对外部刺激的反应，而不适用于屏幕上显示的选项。这并不是说你应该过火，但即使你有很多选择，你也可以在视觉上调整它们。杂乱是设计的失败——而不是信息。

请记住使用大量空白和`<label>`元素为每个选项提供合适的点击目标。这在处理复选框或收音机时尤其重要。

确保在返回结果时，有一个清晰的标题（`<h2>`或`<h3>`通常就足够了）重新说明用户的查询，以及返回了多少结果。不要忘记 0 结果页面！如果可能的话，提供一些关于扩大查询的建议。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-28T19:08:49.637

只是一个一般性建议：保持简单。过多的选择会使用户感到困惑，并增加了某些功能未被使用的机会。

在用户身上尝试不同的原型，找出哪些选项有价值，哪些没有。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-02T13:23:23.507

1）您认为搜索面板应该在我的结果网格顶部可见吗？

像 Google 的基本搜索这样的简单搜索面板可能会出现在结果页面上，因为它很紧凑。这允许用户使用不同的标准重新尝试搜索，而不会浪费时间转到新的页面或窗口。高级搜索更加混乱，因此在轻松访问结果（在较小的窗格中）和轻松访问重新搜索之间有一个更重要的权衡，因此您需要评估用户重新搜索的频率与他们使用结果。例如，如果重新搜索发生 50% 的时间，但在结果页面中包含高级搜索面板需要额外滚动 75% 的时间，您的用户最好不要在结果中使用高级搜索面板。作为一般规则，高级搜索不应出现在“结果”页面上，除非任务真的是对数据进行试探性探索。

结果顶部的“搜索”面板的另一个问题是如果结果不符合条件（例如，如果用户在显示结果之后但再次单击“搜索”之前更改了条件）该怎么办。使用高级搜索，用户更容易忘记或错过他们是否更改了标准，然后对哪些标准对结果有效而感到困惑。将高级搜索放在单独的页面上可以防止这种情况，但如果高级搜索在结果页面上，还有其他方法可以避免这个问题（例如，使用即时应用的“分面”搜索）。

在任何情况下，结果页面都应该显示用于进行搜索的标准。

2）您认为让用户点击“高级”以获得更多标准更好吗？

对于大多数数据库应用程序，特定组（例如，工作职位）的用户有 2 到 5 组特定的搜索条件，这些条件可以让他们完成大部分工作（例如，搜索在用户提供的两个日期之间下达的订单） ，有时包括甚至具有特定标准值的标准（例如，搜索所有处于待处理状态的订单）。在这种情况下，如果您有一个用于即席搜索的高级按钮，用户将最快并且最不可能混淆，而默认搜索具有针对这些特定搜索定制的控件。仅当您的用户*主要*进行探索性临时搜索时才默认为高级搜索。

3) 你将如何组织标准？

如果有某些特别经常使用的条件，那么它们将通过基本搜索进行处理，如 2 所述，因此在高级搜索中按频率排序条件几乎没有优势。它只是让用户很难找到他们正在寻找的标准。通常，您可以依赖具有特定命名字段的用户，因此按字母顺序对标准进行排序，或者，如果用户熟悉结果页面并且其字段的布局方式与用户的想法一致，则使用相同的顺序用于结果列。

4) 我应该把“搜索”按钮放在哪里？

理想情况下，搜索按钮应始终可见。最好的解决方案是在可滚动窗格上使用窗格外的按钮将所有条件设置为。将按钮放在顶部和底部是一种常见但笨拙的选择。我不会使用通用标准，因为如果您的用户从基本搜索转到高级搜索，他们可能没有使用通用标准。如果您可以将响应时间控制在 500 毫秒以下，请考虑*不要*使用搜索按钮，而是提供类似于 Vista 中的即时应用。

5）如何设计一个漂亮的搜索用户界面？

对于基于字段的多条件搜索，有两种基本设计：

一个。所有字段的表单，其中包含为每个字段输入标准值的位置。这样做的问题是具有设置值的字段可以滚动到视图之外，并且用户可能忘记了他们已经设置了一个值。因此，您希望使其尽可能紧凑。有关一种方法，请参阅 Alan Cooper 的 About Face 2.0 中的“改进数据检索”一章。您还可以在用户可以检查的搜索按钮附近提供所选条件的摘要字符串。单击字符串中的每个条件甚至可以将用户跳转到更改它的条件。

湾。用户从字段列表中选择要在标准中使用的字段，然后在合并位置设置标准的值。这里的主要挑战是尽量减少选择字段的“开销”点击次数。理想情况下，字段列表始终可用，单击选择字段，将其置于合并位置，并将光标置于值控件中，如[http://www.zuschlogin.com/content/blogimages/中所示37/FindAdvanced.gif](http://www.zuschlogin.com/content/blogimages/37/FindAdvanced.gif)，仅用于搜索而不是查找。（根据任意约定，“查找”对于用户而言与“搜索”非常不同；查找突出显示当前页面中匹配给定条件的内容，而搜索检索匹配给定条件的内容）

这两种设计都通过逻辑 AND 链接每个字段的标准，并且在基础数据库表之间的连接中受到限制，但这可能会满足您的几乎所有用户。如果任务需要更复杂的连接和布尔组合，请查看图形查询设计（例如，Badre AN、Catarci T、Massari A 和 Santucci G 1996。图表与标志性查询语言的比较易用性。在 J Kennedy 中& P Barclay (Eds) 数据库接口 (IDS-3)：第三届数据库接口国际研讨会论文集，爱丁堡纳皮尔大学，7 月 8 日至 10 日）和示例设计查询。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-02T13:35:39.187

The default design pattern which I use is [Filter Table](http://www.cs.helsinki.fi/u/salaakso/patterns/Continuous-Filter.html). That covers maybe 90% of the use cases. For more complex searches, I would need more specific information on the goals and use cases of the users, so that it would be possible to design a more optimal solution for those situations.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-25T14:31:15.707

简单就好。我推荐一种迭代方法，在进行用户验收测试并查看日志以查看他们使用（或不使用）哪些功能之后慢慢构建功能。您知道要改进什么的唯一方法是观察您的用户。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-28T19:12:13.793

我的想法：

- 仅在需要时显示高级标准。当搜索对试图搜索的人来说尽可能简单时，搜索是一件很棒的事情。

- 如果有一些非常大的高级搜索搜索条件集：不要用它弄乱结果。让用户返回并修改标准变得非常容易和明显，但不要试图通过立即再次给他们标准来浪费结果的空间。

- 标准的组织很难在不知道的情况下说出来。但正如其他人已经/会说的那样：让它变得简单！您可能不需要一次全部显示：如果我想要更多，让我扩展区域，隐藏我不想使用的东西。然后在它的底部放一个搜索按钮。但同样，我不想滚动浏览随机标准页面只是为了找到这个按钮。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-28T19:14:28.997

*   在网站的每个页面上都应该有一个搜索文本框作为桅杆头的一部分。
*   我更喜欢将按钮标记为“查找”而不是“搜索”，因为好处总是比功能更引人注目。
*   应该复杂的是您的搜索算法而不是 GUI。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-02T14:32:02.187

不要认为这已经被提及，但不要忘记，当用户在任何搜索字段中按下回车键时，您还需要启动搜索。可能已经意识到这一点，但无论如何值得一提。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-03-02T13:53:11.797

Please find my answers(in normal text) against each of the questions(in italics) asked.

"1) *Do you think the search panel should be visible all the time (ie displayed on top of my result grid) or available in a separate form (which would let me use more place for all the controls)*"

Display on top of result grid as this leaves extra horizontal space to display search results and thereby to display more columns of search data without scrolling horizontally.

"2) *Do you think it's better to display all the search criteria, or to let the user click on 'advanced' if he wants to see/use more criteria*"

Display all available criteria but in a tabbed fashion. i.e. categorize input search fields into categories and have a tab for each category.

"3) *How would you organize the criteria? by usage frequency, or rather by area (ie. criteria related to user, to location, to time, etc.)*"

Organize 'by area' because different people like using different criteria. Each criteria would have tab of it's own. But organize the tabs in the order of 'more popular' to 'less popular' as you think. In your case tabs may be 'By Name'(containing fields first name, middle name, last name, mother maiden name, nick name, father's name etc), 'By Location' (place name, county name, district name, state name, country name etc) and so on until the advanced tab(where you'd put least used fields).

"4) *Where should I put the 'Search' button? next to the more common search controls, or at the bottom, or both?*"

Put the input fields of search as discussed above in a tabbed fashion categorizing them based on 'type of field'(I'll refer to this area as search grid). Then put action buttons such as 'Search', 'Clear/Reset' just below the search grid aligning to the center(I'll refer to this area as button grid).Then put the search result pane below the button grid as more horizontal area is available for display so that maximum columns can be displayed at once.

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-03-02T14:13:34.557

Take a look at quince, the infragistics ui patterns site: [http://quince.infragistics.com](http://quince.infragistics.com).

Personally, I'd look at using a filterable grid, like the xtragrid from DevExpress: [http://www.devexpress.com/Products/NET/Controls/WinForms/Grid/datafiltering.xml](http://www.devexpress.com/Products/NET/Controls/WinForms/Grid/datafiltering.xml)

coupled with a search bar above it to initially populate the grid.

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-02-28T19:09:16.997

尽量保持界面简单。大多数用户只需要一个文本窗口和一个搜索按钮。其余选项可以放在高级搜索选项中。

这种设置对新用户更友好，并且通过为真正需要它们的人节省更昂贵的高级搜索来帮助节省资源。

# php - 使用 php 从 2 个 mysql 表条目创建单个超链接

> ID：598491
> 
> 赞同：0
> 
> 时间：2009-02-28T19:04:42.237
> 
> 标签：php, mysql, hyperlink

我有一个 mysql 表，其中包含“显示”和“链接”的值。

我想将它们拉入一个显示“显示”值的 php 文件中，该值超链接到“链接”值

我已经连接到数据库并选择了要显示的适当行，但是我不知道如何为此创建 php..

正如您可能会说的那样，我是一个完整的菜鸟，因此任何答案都非常简单。感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-28T19:08:29.730

像这样？

```
$row = mysql_fetch_assoc($result);
echo '<a href="'.$row["link"].'">'.$row["display"].'</a>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-28T20:20:58.510

对以前的海报代码的一个补充。您需要在输出这些值之前对其进行转义，**以防止 html 注入攻击**（如果链接或标题中有特殊字符，则通常会出现问题）。

```
$row = mysql_fetch_assoc($result);
echo '<a href="'.htmlspecialchars($row["link"]_.'">'. htmlspecialchars($row["display"]).'</a>'; 
```

# url - 如何将www重定向到非www？

> ID：598514
> 
> 赞同：1
> 
> 时间：2009-02-28T19:16:09.587
> 
> 标签：url, url-rewriting

我正在使用[http://urlrewriter.net/](http://urlrewriter.net/)站点提供的 URL 重写器模块。谁能告诉我如何使用他们的模块将 www.example.com 重定向到 example.com（301 重定向）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-28T19:28:20.523

如果您只想重定向`www.example.com`：

```
<if header="HTTP_HOST" match="www.example.com">
    <redirect url=".*" to="http://example.com$0" permanent="true" />
</if> 
```

如果您想将所有内容重定向`example.com`到`example.com`：

```
<unless header="HTTP_HOST" match="example.com">
    <redirect url=".*" to="http://example.com$0" permanent="true" />
</unless> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-28T19:20:09.547

```
<redirect url="http://www.example.com/(.+)$" to="http://example.com/$1"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-06-24T14:12:18.247

**重复的内容将无 www 重定向到 www asp.net**

```
<if  header="HTTP_HOST" match="^domain.com" url="/default.aspx$">
     <redirect to="http://www.domain.com/" />
</if>

<if header="HTTP_HOST" match="^domain.com" url="~/(.+)$">
     <redirect to="http://www.domain.com/$1" />
</if> 
```

我测试了这段代码及其正确性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-28T19:20:07.097

我从来没有使用过 urlrewriter，但看起来你会使用以下（或类似的东西：

```
<redirect url="^(.+)$" to="http://example.com/$1" permanent="true" /> 
```

在 www.example.com 网站上。

# c++ - 我应该在学习 C++ 之前学习 C 吗？

> ID：598552
> 
> 赞同：129
> 
> 时间：2009-02-28T19:46:08.407
> 
> 标签：c++, c

我今天参观了大学计算机科学系的开放日，在实验室参观中，我们坐下来玩了几个本科生的最后一年项目。其中一个特别好 - 一种 FPS 小行星游戏。我决定查看`src`目录，发现它是用 C++ 完成的（大多数其他项目都是 Java 3D 应用程序）。

我以前没有做过任何 C，但我之前看过一些 C 代码。从我在这个游戏的 .cpp 代码中看到的，它看起来并没有太大的不同。

我对学习 C 或 C++ 感兴趣，但以后可能会学习另一个。先学**一个对我有什么好处****吗？如果有，是哪一个？**

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2009-02-28T19:48:57.497

在学习 C++ 之前无需学习 C。

**它们是不同的语言**。一种常见的误解是，C++ 在某种程度上依赖于 C 而不是完全指定的语言。

仅仅因为 C++ 共享许多相同的语法和许多相同的语义，并不意味着您需要先学习 C。

如果您学习 C++，您最终将学习 C 的大部分内容，但随着时间的推移您将学习的语言之间存在一些差异。事实上，编写正确的 C++ 是一件非常困难的事情，因为中级 C++ 程序员倾向于编写 C/C++。无论您是从 C 开始还是从 C++ 开始，这都是事实。

如果您首先了解 C，那么这是学习 C++ 的好帮手。您将从了解大量语言开始。如果您首先不了解 C，那么专注于不同的语言是没有意义的。有很多不错的书籍和教程可供您从一无所知开始，并且涵盖了您将从 C 中学到的任何适用于 C++ 的内容。

[请参阅此答案中的进一步推理](https://stackoverflow.com/questions/145096/is-it-true-that-there-is-no-need-to-learn-c-because-c-contains-everything/145098#145098)。

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2009-02-28T20:57:38.437

我喜欢这个问题——就像问“我应该先学什么，单板滑雪还是滑雪”？我认为这取决于你是想滑雪还是滑雪。如果你想两者都做，你必须同时学习。

在这两项运动中，您都使用非常相似的设备在雪地上滑下山坡，从而引发这个问题。然而，它们也有很大的不同，因此学习一个对你来说对另一个没有太大帮助。与 C 和 C++ 相同。虽然它们在语法上看起来是非常相似的语言，但编写 OO 代码和过程代码所需的思维定势却大不相同，因此无论您第二次学习什么语言，您几乎都必须从头开始。

* * *

## 回答 #3

> 赞同：71
> 
> 时间：2009-07-13T21:51:59.953

我首先学习了 C，在学习 C++ 之前，我参加了使用 C 的数据结构课程。这对我来说效果很好。C 中的数据结构课程让我对指针和内存管理有了深入的了解。一旦我了解了它是什么，它也使面向对象范式的好处显而易见。

另一方面，通过首先学习 C，我养成了一些最初导致我编写糟糕的 C++ 代码的习惯，例如过度使用指针（当 C++ 引用会这样做时）和预处理器。

C++ 确实是一种非常复杂的语言，具有许多特性。不过，它并不是真正的 C 超集。相反，有一个 C++ 子集，由基本的过程编程结构（循环、ifs 和函数）组成，它与 C 非常相似。在你的情况下，我将从这个开始，然后逐步了解更高级的概念比如类和模板。

恕我直言，最重要的事情是在你的大脑冻结成一种看待世界的方式之前，尽早接触不同的编程范式，如程序性、面向对象、功能性和逻辑性。顺便说一句，我也强烈建议你学习一门函数式编程语言，比如 Scheme。它真的会扩大你的视野。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2009-03-01T02:24:22.240

如果您决定同时学习两者（正如其他人所提到的，没有明确需要同时学习两者），请先学习 C。从 C 到 C++ 感觉像是一个自然的过程。走另一条路感觉就像故意将一只手绑在背后。:-)

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2009-03-01T01:26:59.540

我觉得你应该先学C，因为我先学了C。C 让我很好地掌握了语法和诸如指针之类的问题，所有这些都流入 C++。

我认为 C++ 可以轻松解决所有这些问题（需要一个在使用 [] 运算符时不会溢出的数组和一个狡猾的索引？当然，创建一个执行边界检查的数组类）但你需要知道什么在您了解为什么以某些方式完成事情之前，它们已经被它们咬了。

总而言之，通常教授 C++ 的方式是“C++ 是带有对象的 C，这是 C 的东西，这就是所有这些 OO 的东西是如何工作的”，所以如果你学习任何真正的 C++ 之前，你可能会先学习基本的 C无论如何都要遵循大多数文本。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2009-03-01T02:41:07.240

我将不同意这里的大多数人。我认为你*应该*在学习 C++ 之前学习 C。这绝对不是必需的，但我认为它使学习 C++ 变得容易得多。C 是 C++ 的核心。你学到的任何关于 C 的东西都适用于 C++，但是 C 更小更容易学习。

拿起 K&R 并通读它。它很短，会给你足够的语言感。一旦掌握了指针和函数调用的基础知识，就可以更轻松地转向 C++。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2009-02-28T19:52:17.300

在学习 C++ 的过程中，您还将学习 C 的大部分内容。但请记住，很多 C++ 代码不是有效的 C。C++ 旨在与 C 代码兼容，所以我想说先学习 C++。布赖恩为此写了一个[很好的答案](https://stackoverflow.com/questions/145096/is-it-true-that-there-is-no-need-to-learn-c-because-c-contains-everything/145098#145098)。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2009-03-01T00:50:41.450

学习 C 会迫使您在编写代码时更加努力地思考一些问题，例如显式和隐式内存管理或基本数据类型的存储大小。

一旦您对 C 的特性**和错误**特性感到满意，您在学习和编写 C++ 时可能会遇到更少的麻烦。

您看到的 C++ 代码完全有可能与标准 C 没有太大区别，但这很可能是因为它不是面向对象的，并且没有使用异常、面向对象、模板或其他高级特性。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2009-02-28T20:33:24.363

不。

学习 C++ 通常更有用，因为它更接近最现代的基于 OO 的语言，如 Eiffel 或 C#。

如果您的目标是学习 C++，那么首先要学习现代的标准 C++。将 malloc 放在一边。

* * *

但[史蒂夫·罗](https://stackoverflow.com/a/599133/96780) [有一点](https://stackoverflow.com/questions/598552/should-i-learn-c-before-learning-c/598632#comment42258026_599133)……

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2009-02-28T23:16:27.840

就像生活中许多其他问题的答案一样，这取决于。这取决于您的编程兴趣和目标是什么。如果您想编写桌面应用程序，可能使用 GUI，那么 C++（和 OOP）可能是更好的选择。如果您对 x86 芯片组以外的硬件编程感兴趣，那么 C 通常是更好的选择，通常是因为它的速度。如果你想创建一个新的媒体播放器或编写一个商业应用程序，我会选择 C++。如果你想对星系碰撞或流体动力学进行科学模拟，看看 C 的力量吧。

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2009-07-13T20:51:57.360

我认为先学习 C 是个好主意。

comp sci 课程仍然使用 C 是有原因的。

在我看来，为了避免主题的所有“拥挤”，要求 OOP 进行的义务。

我认为过程式编程是最自然的第一次学习编程的方式。我认为这是真的，因为归根结底，它就是你所拥有的：一行行代码一个接一个地执行。

今天的许多文本都在推动“对象优先”的方法，并在引入阵列之前开始谈论汽车和换档。

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2009-02-28T22:42:44.053

观察到首先学习 Java 的人在 C++ 中遇到指针和内存管理的概念时，我会说先学习 C 是一个好主意，以便掌握这两个概念，与其他 C++ 的复杂性隔离开来特征。

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2011-01-12T12:21:25.700

我的两分钱：

我建议先学习C，因为：

*   它是一种基础语言——许多语言都源自 C
*   支持 C 编译器的平台多于 C++，无论是嵌入式系统、GPU 芯片等。
*   根据[TIOBE 指数](http://www.tiobe.com/index.php/content/paperinfo/tpci/index.html)，C 的流行度仍然是 C++ 的 2 倍左右。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2010-12-09T21:01:42.743

我认为 c 是一种非常好的编程语言，它结构紧凑且易于学习。但如果你只想学习 c++，就从 c++ 开始。但我建议你两个都学。如果你想这样做；我认为最好从c开始。如前所述：它很小而且很容易学习。可能是向更复杂的编程语言（如 c++）迈出的一步。（因为 c 为您提供了一些基础知识）

祝你好运。

# user-interface - 从两个不同的菜单中使用相同的功能是个好主意吗？

> ID：598557
> 
> 赞同：2
> 
> 时间：2009-02-28T19:49:26.683
> 
> 标签：user-interface, menu, usability

有时会发生一个特征似乎属于多个地方的情况。

简单的例子，假设我有以下菜单：

*   文件
*   挂单
*   接受的订单
*   工具
*   帮助

我有一个搜索功能，相同的搜索窗口适用于待处理和已接受的订单（它只是一个你可以更改的“订单状态”组合）

这个搜索功能属于哪里？

*   工具菜单似乎是一个不错的选择，但我担心用户可能希望搜索接受的订单在接受的订单菜单中，这是有道理的

*   在我看来，在待处理订单和已接受订单中复制菜单条目似乎是*错误*的。

你会怎么办？（假设我们不能将两个订单菜单合并为一个菜单）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-28T20:16:38.910

我认为您遇到的问题是您像程序员一样思考。（代码重复不好）。我没有责怪你，我做同样的事情。到同一个屏幕的多条路径，或处理同一过程的多种方式实际上是非常有益的。我猜想不止一个人会使用你的程序，而且每个人的工作职能可能略有不同。从本质上讲，他们对应用程序有不同的需求，并且会以不同的方式使用它。如果您坚持所有项目都有一种访问方式，那么有些人会发现该应用程序是有益的，而其他人则不会。当然，所有人都可以学习以某种方式完成任务，但对某些用户来说没有意义。他们习惯于处理信息的方式并不直观（读起来很熟悉），这意味着该应用程序最终对他们的好处将减少。当人们发现一个过程（程序等）令人沮丧时，他们不会采用它。他们找到了需要更改或放弃流程的原因。

解决问题的多种方法的一个很好的例子是 Adob​​e Photoshop。通常至少有两种不同的方式来访问一个函数。大多数用户只知道一种，因为这就是他们所关心的全部，但大多数用户对使用一种非常满意，因为这对他们来说最有意义。通过一点额外的工作，Adobe 获得了巨大的胜利，因为更多的人发现他们的产品很直观。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-28T19:54:44.330

在多个位置拥有一个功能并不是一件坏事。考虑查看挂单和已接受订单的整体工作流程，并将您的新功能视为一个组件，而不是一次性实体。

在您准确规划出用户在待处理和已接受订单查看流程中完成的任务后，查看具有搜索能力的哪些地方可以提供价值（通过缩短工作流程或其他方式）。这是您的搜索组件所属的地方。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-28T20:23:09.037

关于 UI，要记住的主要一点是，最终真正重要的是您的设计是否使您的应用程序或网站的使用为您的用户提供了更好的体验。

在上面列出的搜索示例中，您通常会看到应用采用两种方法：

1.  将搜索功能放在一个位置，并允许用户通过选择待处理或接受来过滤搜索，或者
2.  将搜索功能放在两个菜单中，这些菜单已经根据启动它的菜单配置了要完成的搜索类型。

如果您针对多个因素重复上述选择，您会看到一个更高级（又名“复杂”）的搜索界面用于第一名，而一个更简单（又名“限制性”）的搜索界面用于第二名。

哪一个最好完全取决于您的用户。这就是为什么许多通用应用程序默认有一个简单的搜索，并为那些想要或需要额外功能的人提供一个更高级搜索的链接；他们试图让每个人都开心。如果您正在为具有不同需求的各种各样的人写作，那绝对没有错。但是，如果您正在为一组需求有限的用户写作，您可以做出一些更好的选择。

根据我的经验，最好的办法是与一两个主要用户合作，并制定出他们需要采取的所有步骤，以完成应用程序将帮助他们完成的每项任务。如果在该步骤序列中没有很多分支点，则应用程序中不应该有很多选择或设置；否则用户可能会觉得应用程序比它需要的更难使用。

对于上面的搜索示例，如果用户已经导航到 Pending Orders 菜单，他们想要启动 Accepted Orders 搜索的可能性非常小，并且必须做出选择，或者去其他地方进行搜索，将是他们需要采取的额外决定或行动。基本原则是，如果您的用户已经做出决定，就使用它；不要让他们再告诉你。

使用您想出的 UI 作为第一个剪辑。让您的用户或其中的一部分用户尝试并提出建议。如果您有选择，请观看他们使用它。通过查看他们如何使用它，您将学到更多关于如何改进界面的信息，而不是从他们告诉您的内容中学到的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-01T18:02:37.213

通常，您不希望相同的菜单项出现在不同的菜单中。它增加了菜单的复杂性和混乱，用户会怀疑这两个菜单项是否真的相同。当菜单项出现在两个地方时，您的菜单组织可能会遇到更基本的问题。

例如，您的示例显示了一个菜单栏，该菜单栏由其中的命令所作用的对象的类或属性组织。一般来说，菜单栏应该按动作类别而不是对象类型来组织。例如，您可以为搜索和其他显示订单的方式等命令提供检索菜单，并为处理订单（例如，更新、接受、转发）提供修改菜单。两个菜单都有适用于两种类型对象的菜单项，尽管某些命令可能只适用于一种。

按对象类型组织命令实际上是一个好主意，但使用上下文菜单（右键单击）比使用菜单栏更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-28T19:52:03.493

我会尝试在 Accepted Orders 和 Pending Orders 菜单中进行搜索。但是，用户测试将显示这是否是一个好主意。但这也取决于您的用户群。

你在做用户测试吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-28T20:38:04.913

...您可能已经知道这一点，但这是使用[命令\操作](http://en.wikipedia.org/wiki/Command_pattern)模式恕我直言的好地方。

所以回答你的问题：IMO，是的，没关系：）这种情况是绝对有道理的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-01T18:46:46.310

只需将其放在两个菜单下并打开您的搜索窗口，并针对启动它的菜单的订单类型进行预配置。相应地命名它们，瞧，它们实际上是两个不同的动作——即使它们使用相同的代码/组件。

在搜索窗口中保持用户可选择的“您可以更改的状态组合”处于活动状态，这样用户仍然可以调整设置而无需从其他菜单重新启动它......然后也许重新考虑结构，看看一些很棒的答案这里有想法^^

# python - 调用exe中定义的函数

> ID：598569
> 
> 赞同：3
> 
> 时间：2009-02-28T19:55:21.193
> 
> 标签：python

我需要知道一种从 python 脚本调用 exe 中定义的函数的方法。我知道如何从 py 文件中调用整个 exe。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-28T20:04:04.353

除非您的 EXE 是 COM 对象，或者像 dll 那样专门导出某些功能，否则这是不可能的。

对于 COM 方法，请查看以下资源：

*   [Python Programming On Win32](http://oreilly.com/catalog/9781565926219/)书，作者 Mark Hammond 和 Andy Robinson。
*   [COM 和 Python](http://techarttiki.blogspot.com/2008/03/calling-python-from-maxscript.html)快速入门用 python 学习 COM

对于dll方法等导出函数，请使用python的win32模块以及Win32 API LoadLibrary及相关函数。

**如果您可以访问 EXE 的源代码：**

但是，如果您可以访问此 EXE 的源代码，则应该定义命令行参数并将其与调用您要调用的函数联系起来。在这种情况下，您可以使用 python *os.system*调用来启动您的应用程序或subprocess.call *()*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-28T20:05:16.457

不确定它是否适用于Windows。但是您可以将 exe 视为 dll（如果导出了函数）。并且它们可以被其他程序使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-28T19:57:59.033

除非所述可执行文件采用命令行参数来指定要使用的函数，否则我认为这是不可能的。

话虽如此，如果您创建了 EXE，命令行参数是实现您正在寻找的功能的好方法。

# javascript - 启动一个应用程序来记录与greasemonkey保持一致

> ID：598572
> 
> 赞同：5
> 
> 时间：2009-02-28T19:58:05.990
> 
> 标签：javascript, greasemonkey

我让我的greasemonkey 脚本扫描我访问的每个页面以查找特定字符串。我想在sqlite db中记录字符串的变化。我每隔一段时间就会有另一个应用程序处理这个数据库。我不知道如何将数据存储到 sqlite db 中？我在想如果找到字符串，我可以自动启动一个可执行文件，但我不知道如何通过 javascript 来做到这一点。我认为的另一种选择是在某个端口上侦听套接字并具有一些 js 魔法，但我想不出一种静默的方式来发送这样的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-04T05:40:07.767

我建议使用网络服务器来收集数据。您可以设置一个域或 IP 来发送数据。刚开始时，如果需要，您甚至可以在 localhost 上运行。

优点是，一旦创建，相同的体系结构可以在不同的 PC 上使用，因此您运行脚本的任何计算机都可以共享结果。

**更新：** 要与您的服务器通信，您需要使用[GM_xmlhttpRequest](http://diveintogreasemonkey.org/api/gm_xmlhttprequest.html)。我知道一个库添加了一个抽象层以使使用 GM_xmlhttpRequest 更容易：Speakeasy.js。它是一个相对不为人知的轻量级 ActiveResource 接口，用于从 RESTful 网络服务器发送和检索数据。[这是一个 Greasemonkey 脚本示例](http://userscripts.org/scripts/show/42544)，它在每次页面加载时与网络服务器通信。它加载注释并将它们显示在页面上。

这是一个接近您需求的改编版本：

```
// ==UserScript==
// @name           Demo Script
// @namespace      http://example.com
// @description    Sample
// @include        *
//
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.3.1/jquery.min.js
// @require     http://strd6.googlecode.com/svn/trunk/gm_util/d_money.js
// @require     http://strd6.googlecode.com/svn/trunk/gm_util/speakeasy.js
//
// ==/UserScript==

error = D$.error;
log = D$.log;
D$.debug(false);

Speakeasy
  .generateResource('result')
  .configure({
    baseUrl: 'http://localhost:3000/'
  })
;

// Attach all annotations for this page from remote server
var href = window.location.href;
currentUrl = href.substring(href.indexOf('://') + 3);
log(currentUrl);

var result1 = 'something'; // Insert your function to get your result data
var result2 = 'something else'; // Insert your function to get your result data

Speakeasy.result.create({
  data: {
    url: currentUrl, 
    result1: result1, 
    result2: result2
  }
}); 
```

您可以快速创建 Rails 站点或使用您熟悉的任何后端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-02T19:59:46.860

您可能还想考虑使用 Google Gears 扩展，它在后台使用 SQLite 数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-04T16:03:28.207

我不确定如何将它与 Greasemonkey 一起使用，但 Firefox 有一个名为 Storage 的 API 用于使用 sqlite 数据库。在这里查看：[https ://developer.mozilla.org/en/Storage](https://developer.mozilla.org/en/Storage)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-04-03T18:16:46.993

或者你只是使用 LubeMonkey，它是一个改进的 Greasemonkey 分支，支持 sqlite。每个安装的脚本都会创建自己的 sqlite 数据库，您可以在该数据库中执行查询更新等，您甚至可以在数据库或任何数据上缓存图像。在这里获取它[http://www.gamecore.org](http://www.gamecore.org)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-28T19:59:36.050

你可以让greasemonkey 脚本调用一个带有一些变量的url（比如你想要存储的数据）。使用 ajax 请求。您可以在本地设置 Web 服务器来处理它们。

如果您在 Windows 上，则可以使用 WAMP 快速启动 Web 服务器。只要确保启用 php_sqlite 扩展。

这可能会帮助您了解一些实现细节： http: [//www.pathf.com/blogs/2006/07/bjax_with_greas/](http://www.pathf.com/blogs/2006/07/bjax_with_greas/)

# python - Django 的管理界面不应该用来做什么？

> ID：598577
> 
> 赞同：4
> 
> 时间：2009-02-28T20:00:03.007
> 
> 标签：python, django, administration

我一直在将 Django 的自动管理功能应用于一些以前非常难以管理的应用程序。我正在考虑很多方法将它应用到我们使用的其他应用程序（包括使用它来完全替换一些内部应用程序）。不过，在我过火之前，有什么特别的东西我*不应该*使用它吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-28T20:03:46.650

用户特定的权限。我自己一直在尝试将其纳入其中——一些新的（至少在当时是未记录的）功能（来自 newforms-admin）使其成为可能。但是，根据您希望控件的精细程度，您最终可能会非常非常深入地了解 Django/admin 内部结构。仅仅因为你可以并不意味着你应该 - 使用自定义管理应用程序这样做更容易且不那么脆弱。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-01T01:28:57.333

通常，您不应该使用管理员来访问您并不真正信任的人。尽管在锁定和控制访问方面有很大的灵活性（自 Django 1.0 以来更是如此），但管理员的设计仍然假设使用它的人是您员工中受信任的成员。

# cocos2d-iphone - 怎样才能从视野中回到现场？

> ID：598581
> 
> 赞同：0
> 
> 时间：2009-02-28T20:03:54.260
> 
> 标签：cocos2d-iphone

问题：我使用以下代码添加了视图：

[[[Director sharedDirector] openGLView] addSubview:myView];

但是我怎样才能回到游戏场景呢？

如果您询问如何将 UIKit 视图等附加到 cocos2d-iphone 项目，您只需这样做：

[[[Director sharedDirector] 窗口] addSubview:myView];

更新到 cocos 0.7，现在是：

[[[Director sharedDirector] openGLView] addSubview:myView];

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-27T13:40:39.107

只是删除您的视图怎么样？

```
[myView removeFromSuperview]; 
```

# c++ - C++中的内存修改

> ID：598584
> 
> 赞同：3
> 
> 时间：2009-02-28T20:05:16.257
> 
> 标签：c++, memory

我试图学习用 C++ 修改游戏，而不是游戏，只是它用来获取弹药的内存等等，所以有人可以指点我看书

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-01T01:28:03.157

操作远程进程内存的最方便的方法是在该程序的上下文中创建一个线程。这通常是通过将 dll 强制注入目标进程来完成的。一旦您在目标应用程序中执行了代码，您就可以自由地使用标准内存例程。例如（memcpy、malloc、memset）。

我现在可以告诉你，最方便和最容易实现的方法是 CreateRemoteThread / LoadLibrary 技巧。

正如其他人所提到的，可以通过扫描内存中的已知值来执行简单的黑客攻击。但是，如果您想执行更高级的操作，则需要研究调试和死列表分析。（工具：分别为 ollydbg 和 IDA pro）。

您已经触及了一个非常广泛的黑客主题的表面，那里有丰富的知识......

首先是一些互联网资源：

gamedeception.net - 一个致力于游戏 RE（逆向工程）和黑客攻击的社区。

[http://www.edgeofnowhere.cc/viewtopic.php?p=2483118](http://www.edgeofnowhere.cc/viewtopic.php?p=2483118) - 关于各种 DLL 注入方法的优秀教程。

Openrce.org - 逆向代码工程社区。

我还可以向您推荐一本书 - [http://www.exploitingonlinegames.com/](http://www.exploitingonlinegames.com/)

您应该研究的 Windows API 例程 (msdn.com)：

```
CreateRemoteThread
LoadLibraryA
VirtualAllocEx
VirtualProtectEx
WriteProcessMemory
ReadProcessMemory
CreateToolhelp32Snapshot
Process32First
Process32Next 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-28T20:21:00.180

**注入代码：**

我认为最好的方法是修改 exe 以将代码注入其中一个加载的模块。 [检查本教程](http://home.inf.fh-rhein-sieg.de/~ikarim2s/how2injectcode/code_inject.html)

**短篇相关故事：**

不过，在 10 多年前，我确实记得使用一个简单的 C++ 程序在 windows 中成功修改了我在纸牌中的分数。我通过在某个基地址处启动一个 int * 指针并遍历内存地址（使用 try /catch 来捕获异常）来做到这一点。

我会在其中一个指针变量中查找我当前的分数，并将其替换为新的整数值。我只是确保我当前的分数是一些不包含在许多内存地址中的模糊值。

一旦我找到了一组与我的分数相匹配的内存地址，我会在纸牌中手动更改我的分数，并且只查看在最后一次迭代中找到的内存地址。通常这会缩小到包含分数的单个内存地址。此时我有了神奇的简单代码行 *pCode = MY_DESIRED_SCORE;

尽管有了新的内存安全模型，这可能不再可能了。但是这个方法在一个 10-20 行的 C++ 程序上效果很好，只花了大约一分钟就修改了我的分数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-28T20:09:19.537

有足够的程序可以让您修改正在运行的程序的内存。他们经常被用来作弊。但是要小心在网络游戏中使用它们，因为大多数作弊行为都会被检测到，并且您会在没有警告的情况下被禁止。

如果您想自己创建它们，只需查看描述 Windows API 的书籍。你会在那里找到足够的信息。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-02-28T20:11:39.953

它可以使用 Windows 上的钩子来访问进程的内存空间。

# cocoa - 将字符串写入 NSPasteBoard

> ID：598587
> 
> 赞同：29
> 
> 时间：2009-02-28T20:09:08.663
> 
> 标签：cocoa, xcode, pasteboard

我无法让此方法返回 YES：

```
- (BOOL) writeToPasteBoard:(NSString *)stringToWrite
{
    return [pasteBoard setString:stringToWrite forType:NSStringPboardType];
} 
```

我已经验证 stringToWrite 正确通过，该方法总是返回 NO。

有任何想法吗？

这是课程的其余部分：

```
@interface ClipBoard : NSObject {
    NSPasteboard *pasteBoard;
}

- (BOOL) writeToPasteBoard:(NSString *)stringToWrite;
- (NSString *) readFromPasteBoard;
@end

@implementation ClipBoard
- (id) init
{
    [super init];
    pasteBoard = [NSPasteboard generalPasteboard];
    return self;
}

- (BOOL) writeToPasteBoard:(NSString *)stringToWrite
{
    return [pasteBoard setString:stringToWrite forType:NSStringPboardType];
}

- (NSString *) readFromPasteBoard
{
    return [pasteBoard stringForType:NSStringPboardType];
} 
```

@结尾

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-02-28T20:26:04.067

这是该方法的工作版本：

```
- (BOOL) writeToPasteBoard:(NSString *)stringToWrite
{
    [pasteBoard declareTypes:[NSArray arrayWithObject:NSStringPboardType] owner:nil];
    return [pasteBoard setString:stringToWrite forType:NSStringPboardType];
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-01-20T14:37:45.877

## 斯威夫特 2：

使用 Swift 2 将字符串复制到通用粘贴板：

```
let pasteboard = NSPasteboard.generalPasteboard()
pasteboard.declareTypes([NSPasteboardTypeString], owner: nil)
pasteboard.setString("Hello", forType: NSPasteboardTypeString) 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-03-21T08:53:41.203

Apple 建议人们远离 NSStringPboardType 并改用 NSPasteboardTypeString。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2018-02-14T13:08:40.510

在**NSPasteboard**上复制字符串之前，最好清除内容然后保存。

**斯威夫特 4**

```
 // Set string
    NSPasteboard.general.clearContents()
    NSPasteboard.general.setString("I copied a string", forType: .string)
    // Read copied string
    NSPasteboard.general.string(forType: .string) 
```

**Objective-C**

```
 // Set string
    [[NSPasteboard generalPasteboard] clearContents];
    [[NSPasteboard generalPasteboard] setString:@"I copied a string" forType:NSPasteboardTypeString];
    // Read string
    [[NSPasteboard generalPasteboard] stringForType:NSPasteboardTypeString]; 
```

还有其他可用类型可用于在**NSPasteboard**上复制项目。像：

*   NSPasteboardTypeString
*   NSPasteboardTypePDF
*   NSPasteboardTypeTIFF
*   NSPasteboardTypePNG
*   NSPasteboardTypeRTF

[您可以在https://developer.apple.com/documentation/appkit/nspasteboardtype](https://developer.apple.com/documentation/appkit/nspasteboardtype)上找到更多详细信息。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-04-10T12:02:24.553

从 10.6 开始，以下实现也是可能的：

```
- (BOOL) writeToPasteBoard:(NSString *)stringToWrite
{
    [pasteBoard clearContents];
    return [pasteBoard writeObjects:[NSArray arrayWithObject:stringToWrite]];
} 
```

重要的是要注意在将新内容写入粘贴板之前必须调用#clearContents，否则#writeObjects: 会一直返回NO。

新的 #writeObjects: 方法可以用于符合 NSPasteboardWriting 协议的对象。还有一个 NSPasteboardReading 协议，但使用它不会使实现变得更简单。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-10-17T09:10:14.780

斯威夫特 4 版本：

```
NSPasteboard.general.clearContents()
NSPasteboard.general.setString("Hello World", forType: .string) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-07-25T10:47:07.860

这适用于 Mojave 10.14.5，并且不使用任何已弃用的 API：

```
NSPasteboard *pasteboard = [NSPasteboard generalPasteboard];
[pasteboard declareTypes:[NSArray arrayWithObjects:NSPasteboardTypeString, nil] owner:nil];
[pasteboard setString:@"Hello clipboard!" forType:NSPasteboardTypeString]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-10T18:50:16.810

为了记录，要将字符串复制到系统剪贴板，您可以使用

```
NSPasteboard *pasteBoard = [NSPasteboard generalPasteboard];
[pasteBoard declareTypes:[NSArray arrayWithObject:NSStringPboardType] owner:nil];
[pasteBoard setString:string forType:NSStringPboardType]; 
```

# apache-flex - 如何在 Flex 3 中设置 HTTP 中断

> ID：598598
> 
> 赞同：0
> 
> 时间：2009-02-28T20:13:58.683
> 
> 标签：apache-flex, actionscript-3, http

我认为我的 HTTP 没有被正确调用，我正试图在 HTTP 中设置一个中断。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-28T20:19:00.590

您的解析错误可能是因为未设置的[`resultFormat`](http://livedocs.adobe.com/flex/3/langref/mx/rpc/http/HTTPService.html#resultFormat)属性[`HTTPService`](http://livedocs.adobe.com/flex/3/langref/mx/rpc/http/mxml/HTTPService.html)。您要检索什么样的数据？查找文档并尝试设置`resultFormat`为适当的值（即 e4x、xml、文本等之一）

定义一个 resultHandler 和 faulthandler。然后在这两个函数中设置断点。

```
<HTTPService id="myservice" 
             ... 
             resultType="e4x" 
             result="resultHandler(event)" fault="faultHandler(event)"/>
<mx:Script> 
... 
    private function resultHandler(e:ResultEvent):void {
            trace(e.result); // set breakpoint here
    }

    private function resultHandler(e:FaultEvent):void {
            var faultstring:String = event.fault.faultString; // and here
            Alert.show(faultstring); 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-01T01:11:00.140

如果您在 resultHandler() 中没有得到您期望的结果，您可以尝试的另一件事是使用 HTTP 或网络嗅探器来查看正在传输的内容。

我更喜欢 Wireshark，但它有点硬核。Fiddler 也适用于 HTTP 流量。

# python - AppEngine：查询数据存储中的记录 价值

> ID：598605
> 
> 赞同：23
> 
> 时间：2009-02-28T20:16:28.647
> 
> 标签：python, google-app-engine, google-cloud-datastore

我在 Google App Engine 数据存储区中为我的数据库模型创建了一个新属性。

老的：

```
class Logo(db.Model):
  name = db.StringProperty()
  image = db.BlobProperty() 
```

新的：

```
class Logo(db.Model):
  name = db.StringProperty()
  image = db.BlobProperty()
  is_approved = db.BooleanProperty(default=False) 
```

如何查询未设置“is_approved”值的徽标记录？我试过

```
logos.filter("is_approved = ", None) 
```

但它没有用。在数据查看器中，新字段值显示为 。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-03-01T00:26:57.657

根据关于[查询和索引的 App Engine 文档，属性](http://code.google.com/appengine/docs/python/datastore/queriesandindexes.html#Introducing_Indexes)*没有*值的实体和属性值为*空*的实体之间存在区别；和“查询永远不会返回没有过滤属性的实体”。所以不可能为这些旧记录编写查询。

一篇有用的文章是[更新你的模型的架构](http://code.google.com/appengine/articles/update_schema.html)，它说目前唯一支持的查找缺少某些属性的实体的方法是检查所有实体。这篇文章的示例代码展示了如何在大量实体中循环并更新它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-12-22T05:49:05.687

也许这已经改变了，但我能够根据**空**字段过滤记录。

当我尝试 GQL 查询`SELECT * FROM Contact WHERE demo=NULL`时，它只返回缺少演示字段的记录。

根据文档[http://code.google.com/appengine/docs/python/datastore/gqlreference.html](http://code.google.com/appengine/docs/python/datastore/gqlreference.html)：

> 比较的右侧可以是以下之一（根据属性的数据类型而定）： [...] 布尔文字，如 TRUE 或 FALSE；**NULL**文字，表示空值（Python 中的 None）。

我不确定**“null”是否与****“missing”**相同：在我的情况下，这些字段已经存在于我的模型中，但在创建时没有填充。也许 Federico 您可以让我们知道 NULL 查询是否适用于您的特定情况？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-20T13:52:23.170

对我们有帮助的一种做法是为每种类型分配一个“版本”字段。此版本最初在每条记录上设置为 1。如果出现这样的需求（填充大型数据集中的新字段或现有字段），版本字段允许迭代包含“版本 = 1”的所有记录。通过迭代，为新字段设置“null”或其他初始值，将版本提升到 2，存储记录，允许使用默认值填充新字段或现有字段。

“版本”字段的好处是，选择过程可以在尽可能多的会话或尽可能多的时间内继续选择较低版本号（最初设置为 1），直到使用新字段默认值更新所有记录。

# java - 将桌面流式传输到 Flash 播放器

> ID：598609
> 
> 赞同：1
> 
> 时间：2009-02-28T20:17:23.527
> 
> 标签：java, video-streaming, flash

我想通过 Flash 播放器将我的桌面屏幕（或仅一个应用程序）流式传输到互联网。

我有 wowze 媒体播放器来多播它，但我必须创建一个流给 wowze。

有谁知道如何开始做这件事的最佳方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-03-25T22:27:45.073

[http://1.pe-web.ro/dev/flashPlatform/flashBuilder/flexJavaApplet/flexPrintScreen/](http://1.pe-web.ro/dev/flashPlatform/flashBuilder/flexJavaApplet/flexPrintScreen/) 你可以从这里开始。这是一个使用Java截屏并将图片发送到flash的app

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-07T20:48:50.210

[Jing](http://www.jingproject.com/)是一个跨平台（Windows 和 Mac）选项。捕获屏幕和音频。很酷。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-07T20:32:56.847

或者，您可以使用[RED5](http://osflash.org/red5)服务器和 TightVNC 以及自定义版本的 Java 客户端，它将帧作为流发布。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T11:55:42.203

我不知道任何“开箱即用”的软件使用 Flash Player 对您的屏幕进行编码并将其流式传输到 Wowza。我确实相信它必须从头开始开发。

但是我已经使用了一段时间的基于 Java 的桌面编码器，它可以流式传输到 Wowza 媒体服务器。它是 Red5 生态系统的一部分：[red5-screenshare](http://code.google.com/p/red5-screenshare/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-03-02T17:58:44.873

如果您所说的创建流的意思是拥有一个虚拟摄像头，它以您可以在 multicatser 应用程序中选择的方式捕获您的桌面屏幕，那么您应该查看 ScreenCamera。它正是这样做的，您可以选择所需的帧速率。您可以在这里找到 ScreenCamera： [http ://www.pcwinsoft.com/screencamera/download.asp](http://www.pcwinsoft.com/screencamera/download.asp) [http://www.pcwinsoft.com/screencamera/](http://www.pcwinsoft.com/screencamera/)

希望这会有所帮助，亚历克斯

# html - 如何在没有背景图像的情况下获得“中心柱”效果？

> ID：598617
> 
> 赞同：1
> 
> 时间：2009-02-28T20:23:00.847
> 
> 标签：html, css

我正在设计一个网站布局，其中所有内容都保存在固定宽度的中央列中。我希望这个中心列的背景颜色与页面的其余部分不同。我还希望中央列从浏览器的最顶部延伸到最底部。

我能够使用尺寸为 1000x1 的背景图像成功地做到这一点，如下所示：

```
 html
{
    background: #333333 url(./images/global/background.png) repeat-y center;
}

body
{
    margin: auto;
    width: 1000px;
} 
```

这在大多数浏览器中都很好用，但我真的更希望能够在没有图像的情况下做到这一点。

我尝试将“html”和“body”设置为“height: 100%”，然后给“body”一个背景色，但如果有足够的内容需要滚动，则背景的高度仅等于浏览器，当您向下滚动时，背景会留在后面。

任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-28T21:00:32.300

解决方案是使用一个具有 100% 高度的包装 div 和一个单独的内容 div，如果里面的内容足够长，并且设置了背景颜色，它将扩展。这是一个示例（在 Firefox、Chrome 和 IE7 中测试）：

```
<html>
    <head>
        <style type="text/css">
            html {height: 100%}
            body {
                height: 100%; 
                margin: 0; 
                text-align: center;//for IE7
            }
            div#wrapper { 
                background-color: #efefef;
                width: 720px;
                margin: 0 auto;
                height: 100%;
                text-align: left;
            }
            div#content {
                background-color: #efefef;
            }
        </style>
    </head>
    <body>
        <div id="wrapper">
            <div id="content">
                <div style="height: 2000px">test</div>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-28T20:32:48.343

```
body { 
    text-align: center; 
    margin: 5em 0 0 0; 
    vertical-align: middle; 
}

#content { 
    width: 760px; 
    text-align: left; 
    margin: 0 auto; 
} 
```

详情[在这里](http://community.contractwebdevelopment.com/css-fixed-width-center-column)。

# visual-studio-2008 - 无法在 web express 版本中调试

> ID：598625
> 
> 赞同：0
> 
> 时间：2009-02-28T20:28:33.767
> 
> 标签：visual-studio-2008

我有以下配置

Vista家庭溢价

iis7

Studio web 2008 速成版

试图调试 asp.net 3.5 应用程序。但是如果尝试使用 f5 调试它，应用程序会运行但调试不会启动。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-28T20:51:54.410

试试这篇文章：[使用带有 IIS 7.0 的 Visual Studio 2008](http://learn.iis.net/page.aspx/387/using-visual-studio-2008-with-iis-70/)
和这个：[修复 IIS7 Vista 上 ASP.NET 应用程序的 Visual Studio F5 调试问题](http://mvolo.com/blogs/serverside/archive/2006/12/28/Fix-problems-with-Visual-Studio-F5-debugging-of-ASP.NET-applications-on-IIS7-Vista.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-21T20:16:14.493

我使用位置不允许孩子继承配置，工作室不喜欢它。删除位置标签解决了这个问题。

# python - matplotlib 中的 get_example_data 函数在哪里？它似乎不见了，但它在示例/教程中

> ID：598626
> 
> 赞同：2
> 
> 时间：2009-02-28T20:28:37.557
> 
> 标签：python, graph, visualization, matplotlib

在这里查看本教程：[链接文本](http://matplotlib.sourceforge.net/plot_directive/mpl_examples/pylab_examples/finance_work2.py)它引用 matplotlib.get_example_data('goog.npy')。运行此程序时出现错误，此外，在使用 Spotlight 搜索时，我什至无法在我的 matplot lib 的 macosx 安装中找到 mpl-data/ 文件夹。知道这个函数现在叫什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-28T20:45:37.033

它在`__init__.py`（大约第 490 行）中定义，如果这是您要问的。

——马库斯

PS`mpl_data/`目录也在那里（它们都在顶级目录中）。你确定你有一个好的/完整的安装吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-02-22T09:26:26.157

对于 Ubuntu 10.04（Python 2.6.5，MPL 0.99.1.1），我刚刚遇到了类似（相同？）的问题。

没有`get_sample_data`，但是 a`get_example_data`其中`/usr/lib/pymodules/python2.6/matplotlib/__init__.py`并没有真正起作用。目录`/usr/local/lib/python2.6/site-packages`是空的。

作为一种解决方法，我直接下载了文件[goog.npy](https://github.com/matplotlib/sample_data/blob/master/goog.npy)并将数据的加载替换为（可能类似）

```
with open("goog.npy") as f:
  r = np.load(f).view(np.recarray) 
```

# c# - 如何在不引发“提供的行已属于 DataGridView”错误的情况下缓存行？

> ID：598627
> 
> 赞同：2
> 
> 时间：2009-02-28T20:28:43.750
> 
> 标签：c#, .net, winforms, datagridview

我想`DataGridView`在“刷新”之间缓存一行，即 a`Rows.Clear()`和 a之间`Columns.Clear()`。但是似乎调用`Clear()`方法并没有解除`DataGridView`实例中的数据绑定，例如，

```
 public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        DataGridViewRow cachedRow = new DataGridViewRow();

        private void button1_Click(object sender, EventArgs e)
        {
            this.dataGridView1.Rows.Clear();
            this.dataGridView1.Columns.Clear();
            DataGridViewColumn aColumn = new DataGridViewTextBoxColumn();
            this.dataGridView1.Columns.Add(aColumn);
            this.dataGridView1.Rows.Add(cachedRow);
        }
    } 
```

这是在包含 a`DataGridView`和 a的表单上完成的`Button`。单击该按钮两次会出现“提供的行已属于 DataGridView”错误。

网上对此进行了一些讨论，表明这可能是一个错误，但这是在 2004 年左右。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-28T21:24:02.650

一旦一行是网格视图的一部分，您就不能重新添加它。该行本身[会跟踪](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewrow.aspx)它所在的 DataGridView。我建议制作缓存行的副本并将副本添加到视图中。由于您每次都制作新副本，因此它不会出现在视图中。或者，您可以只检查并删除那些尚未从视图中缓存的行，将缓存的行留在后面，这样您就不需要重新添加它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-12-21T18:17:21.100

将其克隆到 a `DataRow()`，然后克隆`DataTable.ImportRow`到原始`DataTable`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-01T08:41:21.150

我不确定你为什么想要这种行为？您应该只删除网格中要删除的行。

您应该研究实现 ObservableCollection 和 Binding 组件。这样，如果一个项目从您的对象模型中删除，那么它会自动从网格中删除。这使您不必执行听起来像手动数据绑定的操作，并完全避免了这个问题。

如果您使用的是 DataSet 或类型化的 DataSet，那么已经为您实现了 observable 功能——您只需要将数据表绑定到网格。如果内存中有一个表对象，您会注意到可以加载另一个表对象，然后使用 DataTable.Merge 函数合并结果。

# c - Windows 上的 GCC：设置 C 可执行文件的“描述”字段？

> ID：598633
> 
> 赞同：6
> 
> 时间：2009-02-28T20:34:00.587
> 
> 标签：c, windows, gcc, executable

如何设置可执行文件的“描述”属性？我的意思是当您在 Windows 资源管理器中右键单击可执行文件时显示的值，它显示“描述：”，似乎只是可执行文件的名称，没有文件扩展名。

我在 Windows XP 上运行 GCC 3.4.5（mingw-vista special r3）。

我已经用谷歌搜索了这无济于事，但我觉得我可能不得不使用带有windres的资源文件......我至少在正确的轨道上吗？

我实际上一直在用 -o 设置一个自定义名称，但我实际上想要一个完全不同的名称。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-28T20:54:16.700

该信息取自版本信息资源。Windows 可执行文件可以包含嵌入其中的资源文件。通常，使用 Microsoft Visual Studio，您会创建一个资源脚本（`.rc`文件），Visual Studio 资源编译器会为您将其编译为可执行文件。VS 还包含一个漂亮的可视化资源编辑器，用于编辑各种类型的资源（字符串表、图标、位图、光标、菜单、对话框、版本信息等）。

使用 GCC，您必须自己创建资源脚本。有关资源类型的更多信息，请参阅[MSDN 。](http://msdn.microsoft.com/en-us/library/aa381058(VS.85).aspx)`VERSIONINFO`一旦你创建了一个有效的资源脚本，你就可以使用[windres](http://sourceware.org/binutils/docs/binutils/windres.html)将它编译成一个目标文件 ( `.o`)。 [这个页面](http://fragglet.livejournal.com/4448.html)有一个很好的例子来说明如何做到这一点。最后，一旦你有了一个目标文件，你只需像往常一样将它与其余的目标文件链接起来。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-02-28T20:55:00.287

是的，您需要一个资源文件。

1.  有关编写您自己的 .rc 资源文件（包括您的`FileDescription`字段）的信息，请参阅：[MSDN: VERSIONINFO Resource](http://msdn.microsoft.com/en-us/library/aa381058.aspx)

2.  要使用 gcc 链接资源文件，请参阅：[“使用 gcc 设置图标 [或 Windows 程序的任何资源”](http://fragglet.livejournal.com/4448.html)：

> Windows 版本的 gcc（MinGW、Cygwin）带有一个名为“windres”的工具。这会将资源文件编译为目标文件，供您在链接阶段包含。作为一个简单的例子，编译文件'chocolate-doom-res.rc'：
> 
> ```
> windres chocolate-doom-res.rc chocolate-doom-res.o 
> ```
> 
> 这为您提供了一个“.o”，您可以方便地将其放入您的构建中，例如。
> 
> ```
> gcc other.o files.o etc.o chocolate-doom-res.o -o chocolate-doom.exe 
> ```

# php - 表单验证：对同一脚本进行的多次检查会出错

> ID：598634
> 
> 赞同：0
> 
> 时间：2009-02-28T20:34:30.303
> 
> 标签：php, ajax

我创建了一个脚本来检查电子邮件是否有效。我有另一个功能可以检查是否使用了用户名。在检查两个文本框时，如果在其中检查这些文本框，我会收到“页面错误”，它工作正常。

下面是我的代码

```
<script type="text/javascript">
function AjaxFunction()
{
var httpxml;
try
{
// Firefox, Opera 8.0+, Safari
httpxml=new XMLHttpRequest();
}
catch (e)
{  
// Internet Explorer
try
{
httpxml=new ActiveXObject("Msxml2.XMLHTTP");
}
catch (e)
{
 try
{
httpxml=new ActiveXObject("Microsoft.XMLHTTP");
}
catch (e)
{
alert("Your browser does not support AJAX!");
return false;
}
}
}
function stateck() 
{
if(httpxml.readyState==4)
{
document.getElementById("msg").innerHTML=httpxml.responseText;

}
}

httpxml.open("GET",ajax.php,true);
httpxml.send(null);
}
</script>

<form name=form action=''>
    Username <input type=text name=username onBlur="AjaxFunction();"><br><div id="msg"></br></div><br>
     Email Address<input type=text name=email onBlur="AjaxFunction();"><div id="msg"></div>
<br>
<input type=submit value=Submit >
</form> 
```

这是我的 ajax.php 文件....注意检查功能不在此页面上，我只是使用 echo $username 作为此不工作的示例。

```
<?

$username=$_GET['username']; 
echo $username;

$email = $_GET['email'];
if (!eregi("^[_a-z0-9-]+(.[_a-z0-9-]+)*@[a-z0-9-]+(.[a-z0-9-]+)*(.[a-z]{2,3})$",     $email)){
echo "<font color=red> Invalid email</font>";
}else{
echo "<font color=green> Valid Email</font>";} 
?> 
```

谢谢 =)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-28T20:52:14.957

我还没有检查过，但我认为具有相同 id 的两个 div 是您的问题的原因。此外，您可能想考虑在 JavaScript 函数中进行电子邮件验证。

/编辑：我在您的代码中注意到了这一点：

```
<br><div id="msg"></br></div><br> 
```

你不应该把 HTML 元素像那样混在一起。考虑使用 HTML 验证器，它将为您省去很多麻烦。

# mysql - 让 MySQL 在 CentOs 5 上运行

> ID：598635
> 
> 赞同：1
> 
> 时间：2009-02-28T20:36:33.903
> 
> 标签：mysql, installation, centos

我一直在努力让 MySQL 5 在 CentOS 5 上运行，但我几乎没有运气。如果我将所有内容都保留为默认值，并启动初始安装，它会很有效，但如果我告诉 my.cnf 使用不同的驱动器来存储数据，我会不断收到“尝试启动 MySQL 守护程序时发生超时错误”。错误。

my.cnf如下：

```
[mysqld]
datadir=/database/mysql
socket=/database/mysql/mysql.sock
user=mysql
old_passwords=1
log-error=/database/log/mysqld.log
long_query_time  = 10
log_slow_queries = /database/log/mysql-slow.log
query-cache-type = 1
query-cache-size = 8M
innodb_file_per_table
skip-bdb
set-variable = local-infile=0

[mysqld_safe]
pid-file=/var/run/mysqld/mysqld.pid 
```

这些文件夹都具有正确的权限，并且 mysqld.log 中没有任何错误消息，据它说，MySQL 已成功启动。哦，/database 是一个挂载的驱动器，但即使我在本地目录上试用它，我也会得到同样的错误。

有什么想法可能会出错吗？我现在已经在这件事上浪费了 5 个多小时 :(

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-28T20:53:12.067

不应该将 datadir 设置为另一个驱动器，并且其他所有内容（套接字）都指向标准安装位置吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T15:16:00.520

你检查selinux设置了吗？确保它被禁用（setenforce disabled），或者花一些时间了解它（chcon 命令） 要在启动时禁用它，请查看 /etc/sysconfig

运行命令：getenforce，如果显示“Enforced”，SE-Linux 开启

# computer-science - 什么是最具挑战性的编码形式？

> ID：598640
> 
> 赞同：7
> 
> 时间：2009-02-28T20:39:22.897
> 
> 标签：computer-science

我正在攻读有机化学的研究生学位。

现在，我所在地区的许多有才华的人都在走向纳米技术。

现代计算机科学中的等效领域是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-02-28T20:44:52.650

对我来说，它是线程。即使是相对“简单”的线程也具有挑战性，如果您深入研究无锁代码领域，它会变得更加棘手。当然，线程范式*不会*引起那么多的心理问题（参与者、消息传递等），但它们往往会带来自己的权衡。

在我看来，这是一种“深度”复杂性，但还有其他编码领域以不同的方式具有挑战性。安全性、i18n 和日期/时间处理（或几乎任何与实际*人类*特征相关的东西）都非常挑剔，需要学习和注意许多极端情况。这当然很难，但与并发的方式不同。

编辑：作为对 twk 回答的回应：是的，有很多人试图让并发更容易。虽然已经有各种平台可以很好地支持并发（例如 Erlang），但目前还有更多的举措来为已经成为主流的平台带来更简单的并发。从我作为 .NET 开发人员的角度来看（好吧，无论如何，一个业余/狂热的 .NET 开发人员；目前是专业的 Java）[并行扩展](http://blogs.msdn.com/pfxteam/)和[协调以及并发运行时](http://en.wikipedia.org/wiki/Concurrency_and_Coordination_Runtime)是最近两个最有趣的发展。我不希望这会使并发*变得容易*-*对凡人来说是可行的*。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-02-28T20:44:37.283

“强大的”[人工智能](http://en.wikipedia.org/wiki/Artificial_intelligence)和[量子计算](http://en.wikipedia.org/wiki/Quantum_computing)将是我与纳米技术等效的投票。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-28T21:40:44.777

[自然语言处理](http://en.wikipedia.org/wiki/Natural_language_processing)(NLP) 是另一个可能应该提及的领域。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-28T21:19:49.197

我同意 Jon Skeet 的观点，即线程/并行执行是一个热门话题，并且正在开辟新领域，或者思考开箱即用的技术，例如[Transactional Memory](http://research.sun.com/spotlight/2007/2007-08-13_transactional_memory.html)。这是一个新概念的开放领域。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-12-29T22:31:55.120

什么是最具挑战性的编码形式？嵌入式固件开发。

现在，我所在地区的许多有才华的人都在走向纳米技术。

现代计算机科学中的等效领域是什么？再次，嵌入式固件开发。

对于任何桌面或互联网开发人员，如果您不认为嵌入式编码比任何其他类型的编码困难得多，那么您就不知道嵌入式。我可以做任何桌面或互联网程序员可以做的事情，但大多数（如果有的话）桌面/互联网程序员能否很好地嵌入，或者根本无法做到这一点，这是非常值得怀疑的。

举个例子，我现在正在处理一个错误，在串行通信端口（中断驱动接收）上成功接收到 4 个字节后，连续字节不会导致 UART 产生中断（因为它们应该）。

那么，Windows 和 Internet 程序员——您认为最可能的原因是什么？你会怎么做？哦，我忘记了，Windows 和 Internet 程序员没有完全和直接的硬件访问权限——所以他们可能从未经历过这种情况。在嵌入式开发世界中，你不能说“它是硬件”就这样——你有责任让它自己工作，从 UI 一直到电源（软件、固件、硬件，它是嵌入式开发人员的所有责任）。这是任何 Windows 或 Internet 程序员都无法遇到的更大挑战。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-28T20:43:52.513

HTML / CSS

好吧，它不完全是编码，但是男人是不是很头疼

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-28T20:47:32.567

我当然希望有一些人忙于让自动使用更多处理器内核变得容易。当然，有像 Intel Thread Building Blocks 这样的东西，甚至还有像 Erlang 这样的语言，但我希望我们在未来 10 年看到这方面的更多进展。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-28T21:09:45.523

至少在局部，热点领域是[信息](http://en.wikipedia.org/wiki/Informatics)学，尤其是生物信息学。收集、组合、关联和分析来自许多来源的信息，并从收集中获得额外的信息，代表了计算机科学与其他活动之间最紧密的联系。这是我们 CS 系提供的最新学位，吸引了来自许多学科的最多研究生进入 CS 课程。

我不知道这在精神上是多么具有挑战性，但是作为新手，有很多想法还没有被想到，更不用说调查了。提出原创想法非常具有挑战性，尽管它们背后的实际编程部分可能并非如此。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-01-16T12:16:11.703

对我来说，很难说出最具精神挑战的名字：我认为没有一个。

恕我直言，系统和嵌入式编程是两个最难的领域。最接近硬件，最难（在你的生活中至少看一次[实模式组装：D）。](http://wiki.osdev.org/Real_Mode)

Jon 完全正确地说并发编程非常棘手，而且很难做到正确。

但对于加密、机器学习或数学编程的某些方面，我会得出相同的结论。我想区分 CS 基础和更高级别的任务是有意义的......

不过，非常主观的问题。

# visual-studio - 在 Vista 中托管 WCF 服务

> ID：598643
> 
> 赞同：4
> 
> 时间：2009-02-28T20:41:24.063
> 
> 标签：visual-studio, wcf, http, windows-vista, service

我在 VS2008 中组装了一个小型 WCF 服务，当我尝试使用 HTTP 协议运行主机时，它会爆炸，因为它没有这样做的适当权限。在我的“Host.Open()”行上，我得到了这个异常：“ **HTTP 无法注册 URL [http://+:9001/](http://+:9001/)。您的进程没有访问此命名空间的权限**。” 我使用 TCP 似乎没有这个问题。我的操作系统是 Vista Home Premium。

当我尝试在 VS2008 中调试它时，就会发生这种情况。经过大量研究，我确定我可以通过构建来运行主机，转到“bin”文件夹，然后右键单击我的可执行文件，选择“以管理员身份运行”。当我尝试使用 WcfSvcHost.exe 时，也发生了同样的事情。在成功让 WcfSvcHost 运行我的服务之前，我必须使用“以管理员身份运行”从我的菜单中打开 VS2008 命令提示符窗口。

有没有办法做到这一点而不是使用这种解决方法？当我下周尝试在 Windows 2003 Server 上部署它时，我会遇到类似的问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-28T20:53:10.150

此链接可能会对您有所帮助：http: [//msdn.microsoft.com/en-us/library/ms733768.aspx](http://msdn.microsoft.com/en-us/library/ms733768.aspx)

短版：从特权控制台预注册 url/命名空间

netsh http 添加 urlacl url= [http://+:9001/](http://+:9001/) user=DOMAIN\user

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-28T20:44:00.373

确保您以管理员身份启动 VS..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-12T13:51:04.777

在本地，您可以将基地址更改为以下内容：

```
 <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8731/Design_Time_Addresses/MyService/" />
      </baseAddresses>
    </host> 
```

主要部分是添加了“设计_时间_地址”。如果您创建 WCF 服务库项目，默认情况下它会像这样为项目设置 App.config。这样一切正常，但是如果您删除“Design_Time_Addresses”并尝试使用“ [http://localhost:8731/MyService/](http://localhost:8731/MyService/) ”运行它，您将遇到您遇到的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-01T01:29:05.523

我在这里遇到了类似的问题：

[WCF ServiceHost basicHttpBinding 503 错误](https://stackoverflow.com/questions/530286/wcf-servicehost-basichttpbinding-503-error)

netsh 命令适用于 Vista，但对于 Windows 2003 服务器，有一个 HttpCfg.exe 实用程序允许您为帐户注册 URL/命名空间。不确定 netsh 是否在 2003 年可用。

我从来没有真正让它在 Vista 上工作，当我尝试访问这些服务时，我仍然收到 503 错误。如果您遇到同样的问题/解决问题，如果您再次发布，我将不胜感激！谢谢

# objective-c - 显示视图列表

> ID：598657
> 
> 赞同：0
> 
> 时间：2009-02-28T20:49:04.560
> 
> 标签：objective-c, cocoa

这是一个样机：

[样机 http://img.skitch.com/20090228-mqdj17xijycc98spf181a8q6q7.jpg](http://img.skitch.com/20090228-mqdj17xijycc98spf181a8q6q7.jpg)

我一直在尝试找到一些示例代码来展示类似这样的内容——带有自定义视图列表的滚动视图。什么都没找到。我一直在尝试找到一些这样做的开源项目（不是具有一百万个文件和代码行的 Adium），但也没有找到任何东西。

有人告诉我，我可以使用 NSMatrix 来实现这一点。同样，还没有找到任何示例代码。

有人有什么建议吗？或示例代码；)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-28T22:47:57.533

您还可以使用`NSTableView`并创建自定义子类`NSCell`来呈现内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-28T22:00:47.397

如果您需要 Leopard，请查看[NSCollectionView](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/NSCollectionView_Class/Introduction/Introduction.html)。API 有点奇怪，但是一旦你掌握了它，它就会非常强大。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-28T23:56:26.200

> 有人告诉我，我可以使用 NSMatrix 来实现这一点。

你不能。NSMatrix 使用单元格，而不是视图。

回答你的问题：詹姆斯威廉姆斯所说的。

# iphone - 在视图可见后添加时 CALayer 不渲染

> ID：598659
> 
> 赞同：0
> 
> 时间：2009-02-28T20:49:47.897
> 
> 标签：iphone, core-animation

我可能只是错过了一些非常简单的东西，但是每当我在视图可见后添加 CALayers 时，它们都不会渲染。这是我正在使用的代码：

```
[[imageLayers objectAtIndex:0] removeFromSuperlayer];
[imageLayers removeObjectAtIndex:0];
[[imageLayers objectAtIndex:0] removeFromSuperlayer];
[imageLayers removeObjectAtIndex:0];
firstImageOffset = (firstImageOffset + 2) % [pieceCache count];
int topIndex = (firstImageOffset + 6) % [pieceCache count];
int bottomIndex = (firstImageOffset + 7) % [pieceCache count];
浮动 xPos = [(CALayer*)[imageLayers lastObject] 位置].x + kShiftXPixels;

CALayer* layer1 = [CALayer 层]；
[layer1 setFrame:CGRectMake(0, 0, kImageWidth, kImageHeight)];
[layer1 setContents:(id)[UIImage imageNamed:[[pieceCache objectAtIndex:topIndex] objectForKey:@"image_name"]]];
[[[self view] layer] addSublayer:layer1];
[layer1 setPosition:CGPointMake(xPos, kTopRowYPos)];
[imageLayers addObject:layer1];

CALayer* layer2 = [CALayer 层]；
[layer2 setFrame:CGRectMake(0, 0, kImageWidth, kImageHeight)];
[layer2 setContents:(id)[UIImage imageNamed:[[pieceCache objectAtIndex:bottomIndex] objectForKey:@"image_name"]]];
[[[self view] layer] addSublayer:layer2];
[layer2 setPosition:CGPointMake(xPos, kBottomRowYPos)];
[imageLayers addObject:layer2];
```

我也尝试过重用相同的图层并将内容设置为不同的 CGImage（通过 setContents:)，这也会导致图层停止渲染（更具体地说，它的动画效果就好像不透明度已设置为 0 以为它仍然是 1 ）。我已经通过枚举视图层的子层验证了这些层实际上是在视图的层树中。他们似乎有正确的图像并且在正确的位置，他们只是不画画。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-28T23:42:19.230

事实证明，这是由拼写错误造成的。在我调用 setContents 的行中，我发送的是 UIImage 而不是 CGImage。发送正确的类型会导致预期的行为。

# python - Python 中的外部类

> ID：598668
> 
> 赞同：6
> 
> 时间：2009-02-28T20:54:02.567
> 
> 标签：python, python-module, python-import

我刚开始使用 Python，我想使用外部 RSS 类。我在哪里放置该类以及如何导入它？我希望最终能够共享 python 程序。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-02-28T21:03:54.540

**关于`import`声明：**

（一篇很好的文章在[http://effbot.org/zone/import-confusion.htm](http://effbot.org/zone/import-confusion.htm)和 python 教程在[http://docs.python.org/tutorial/modules.html](http://docs.python.org/tutorial/modules.html)有详细的介绍）

将代码导入 python 程序有两种常规方法。

1.  模块
2.  套餐

模块**只是**一个以 .py 结尾的文件。对于 python，它必须存在于搜索路径中（如 sys.path 中所定义）。搜索路径通常由正在运行的 .py 的同一目录以及 python 系统目录组成。

给定以下目录结构：

```
myprogram/main.py
myprogram/rss.py 
```

在 main.py 中，您可以通过运行以下命令“导入”rss 类：

```
import rss
rss.rss_class()

#alternativly you can use:
from rss import rss_class
rss_class() 
```

* * *

包提供了一种更结构化的方式来包含更大的 Python 程序。它们只是一个包含一个`__init__.py`以及其他 python 文件的目录。

只要包目录是 on `sys.path`，那么就可以和上面一模一样的使用了。

* * *

要查找当前路径，请运行以下命令：

```
import sys
print(sys.path) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-28T21:32:13.143

我真的不喜欢这么晚回答，但我对现有的答案并不完全满意。

> 我刚开始使用 Python，我想使用外部 RSS 类。我在哪里放置该类以及如何导入它？

你把它放在一个 python 文件中，并给 python 文件一个扩展名 .py 。然后您可以导入代表该文件的模块，并访问该类。假设您要导入它，则必须将 python 文件放在导入搜索路径中的某个位置——您可以在运行时`sys.path`使用和当前目录（''）一般在导入搜索路径中。当你有一个单一的同构项目时，你通常把它和你的其他模块放在同一个目录中，并让它们从同一个目录中相互导入。

> 我希望最终能够共享 python 程序。

[将其设置为独立文件后，您可以使用distutils](http://docs.python.org/distutils/)将其设置为分发。这样你就不必担心它应该安装在哪里——distutils 会为你担心。还有许多其他额外的分发方式，许多特定于操作系统的 - distutils 适用于模块，但是如果您想分发用户应该运行的适当程序，则存在其他选项，例如在 Windows 上使用[py2exe](http://www.py2exe.org/)。

至于模块/包的区别，好吧，就这样吧。如果你有一大堆类要分割，这样你就不会有一大堆的 python 文件，你可以将它分成一个目录中的多个 python 文件，并给目录一个`__init__.py`. 需要注意的重要一点是，在 Python 中，包和任何其他模块之间没有区别。包是一个模块，它只是在文件系统上表示模块的另一种方式。同样，一个模块*不仅仅是*一个 .py 文件——如果是这样的话，`sys`不会是模块，因为它没有 .py 文件。它内置在解释器中。有无数种方法可以在文件系统上表示模块，因为您可以添加导入钩子，这些钩子可以创建目录和 .py 文件以外的方法来表示模块。假设可以创建一个导入钩子，它使用 spidermonkey 将 Javascript 文件作为 Python 模块加载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-28T20:55:38.223

```
from [module] import [classname] 
```

模块在您的 python 路径上的某个位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-28T21:03:26.630

关于模块和包：

*   模块是一个以 . 结尾的文件`.py`。您可以将您的课程放在这样的文件中。正如 Andy 所说，它需要在您的 python 路径（`PYTHONPATH`）中。通常，您会将附加模块放在与您的脚本相同的目录中，但可以直接导入。

*   包是包含一个`__init__.py`（可以为空）并包含模块文件的目录。然后，您可以导入 la `from <package>.<module> import <class>`。同样，这需要在您的 python 路径上。

您可以在文档中找到更多[信息](http://docs.python.org/tutorial/modules.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T07:55:03.367

如果您想将 RSS 文件存储在其他位置，请使用 sys.append("") 并将模块放入该目录并使用 import 或 from import *

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-12T10:38:03.527

创建类的第一个文件是“first.py”

第一.py：

```
class Example:
   ... 
```

* * *

您创建第二个文件，您要在其中使用“first.py”中包含的类，即“second.py”

```
myprogram/first.py
myprogram/second.py 
```

* * *

然后在第二个文件中，要调用第一个文件中包含的类，您只需键入：

第二个.py：

```
from first import Example
... 
```

# c# - C#（Visual Studio）：数据库、数据集、绑定源之间的相关性

> ID：598669
> 
> 赞同：13
> 
> 时间：2009-02-28T20:54:12.317
> 
> 标签：c#, database, visual-studio, dataset, bindingsource

我只是通过 Visual Studio 2008 学习 C#？

我想知道数据库、数据集和绑定源之间到底有什么关系？

还有，表适配器的作用是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-02-28T21:22:24.853

在超高水平：

*   数据库——存储原始数据

*   DataSet -- 一个 .NET 对象，可用于读取、插入、更新和删除数据库中的数据

*   BindingSource - 一个 .NET 对象，可用于控件的数据绑定。BindingSource 可以指向 DataSet，在这种情况下，控件将显示和编辑该数据

*   TableAdapter -- 将数据库表中的数据映射到 DataSet

所有这些还有很多，理解 ADO.NET 的架构方式可能需要一些时间。祝你好运！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-02-28T21:01:37.290

DataSet 通常用于在内存中保存来自数据库的结果，即它包含一个DataTable 对象。DataSet 和 DataTable 对象本身独立于数据库，因此结果不必来自数据库。DataSet 可以包含多个 DataTable，您甚至可以定义它们之间的关系。它就像内存中的迷你数据库。

绑定源是可以提供具有属性的对象列表的任何对象。DataSet 或 DataTable 可以做到这一点，但它基本上可以是包含具有属性的对象的任何类型的列表。

TableAdapter 用于从 Command 对象提供的 DataReader 中读取数据，并将数据放入 DataTable 对象中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-28T21:03:02.950

数据集是数据库的（部分）内存表示。数据库中的表或视图表示为数据集中的数据表。数据适配器是数据库和数据集之间的链接。一旦适配器将数据加载到数据集中，与数据集的物理连接就被释放。这就是为什么它被称为断开连接的数据模型。

# git - 压缩 Git 中的前两个提交？

> ID：598672
> 
> 赞同：628
> 
> 时间：2009-02-28T20:55:09.473
> 
> 标签：git, rebase, git-rebase, squash

你可以将`git rebase --interactive <commit>`任意数量的提交压缩成一个。

除非您想将提交压缩到初始提交中，否则这一切都很好。这似乎是不可能的。

有什么方法可以实现吗？

* * *

### 中度相关：

在一个相关的问题中，我设法提出了一种不同的方法来解决第一次提交的压缩需求，也就是说，使它成为第二次提交。

如果您有兴趣：[git：如何将提交作为第一个插入，然后转移所有其他提交？](https://stackoverflow.com/questions/645450/git-how-to-insert-a-commit-as-the-first-shifting-all-the-others)

* * *

## 回答 #1

> 赞同：864
> 
> 时间：2009-02-28T22:18:47.493

2012 年 7 月更新（[git 1.7.12+](https://github.com/git/git/blob/master/Documentation/RelNotes/1.7.12.txt#L59)）

您现在可以将所有提交 rebase 到 root，并选择第二个提交`Y`与第一个`X`.

```
git rebase -i --root master

pick sha1 X
squash sha1 Y
pick sha1 Z 
```

> ```
> git rebase [-i] --root $tip 
> ```

> 此命令现在可用于重写从 " `$tip`" 到根提交的所有历史记录。

请参阅[Chris Webb (](https://github.com/arachsys) [)](https://github.com/arachsys)在 GitHub上的[提交 df5df20c1308f936ea542c86df1e9c6974168472](https://github.com/git/git/commit/df5df20c1308f936ea542c86df1e9c6974168472)。[`arachsys`](https://github.com/arachsys)

如[评论中所述](https://stackoverflow.com/questions/598672/squash-the-first-two-commits-in-git/598788?noredirect=1#comment21126753_598788)，如果您需要在远程存储库中发布该返工，则在任何操作之后都需要一个[`git push --force-with-lease`](https://stackoverflow.com/a/52937476/6309)（比[Mikko Mantalainen](https://stackoverflow.com/users/334451/mikko-rantalainen)[提醒我们的更安全）。](https://stackoverflow.com/questions/598672/squash-the-first-two-commits-in-git/598788?noredirect=1#comment120433781_598788)`--force` `rebase`

* * *

原始答案（2009 年 2 月）

我相信您会在 SO 问题“**[如何组合 git 存储库的前两个提交？](https://stackoverflow.com/questions/435646/how-do-i-combine-the-first-two-commits-of-a-git-repository)** ”中找到不同的方法。

[Charles Bailey](https://stackoverflow.com/users/19563/charles-bailey)在那里提供了最[详细的答案](https://stackoverflow.com/questions/435646/how-do-i-combine-the-first-two-commits-of-a-git-repository/436530#436530)，提醒我们提交是一棵完整的树（不仅仅是与以前的状态不同）。
在这里，旧提交（“初始提交”）和新提交（挤压的结果）将没有共同的祖先。
这意味着您不能`commit --amend`将初始提交“”转换为新的提交，然后将前一个初始提交的历史重新定位到新的初始提交（很多冲突）

（最后一句话不再适用于`git rebase -i --root <aBranch>`）

而是（使用`A`原始的“初始提交”，并且`B`需要将后续提交压缩到初始提交中）：

1.  回到我们想要形成初始提交的最后一个提交（分离 HEAD）：

    ```
     git checkout <sha1_for_B> 
    ```

2.  将分支指针重置为初始提交，但保持索引和工作树不变：

    ```
     git reset --soft <sha1_for_A> 
    ```

3.  使用“B”中的树修改初始树：

    ```
     git commit --amend 
    ```

4.  临时标记这个新的初始提交（或者您可以手动记住新的提交 sha1）：

    ```
     git tag tmp 
    ```

5.  回到原来的分支（本例假设为 master）：

    ```
     git checkout master 
    ```

6.  将 B 之后的所有提交重播到新的初始提交：

    ```
     git rebase --onto tmp <sha1_for_B> 
    ```

7.  删除临时标签：

    ```
     git tag -d tmp 
    ```

这样，“ `rebase --onto`”不会在合并期间引入冲突，因为它会将在最后一次提交 ( )*之后*`B`的历史记录重新压缩为初始提交 ( )`A`到`tmp`(表示压缩的新初始提交)：微不足道的快进仅合并。

这适用于“ `A-B`”，但也适用于“ `A-...-...-...-B`”（任何数量的提交都可以通过这种方式压缩到最初的提交中）

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2010-04-18T13:05:52.017

我重新编写了 VonC 的脚本以自动完成所有操作，而不要求我做任何事情。你给它两个提交 SHA1，它会将它们之间的所有内容压缩到一个名为“压缩历史”的提交中：

```
#!/bin/sh
# Go back to the last commit that we want
# to form the initial commit (detach HEAD)
git checkout $2

# reset the branch pointer to the initial commit (= $1),
# but leaving the index and working tree intact.
git reset --soft $1

# amend the initial tree using the tree from $2
git commit --amend -m "squashed history"

# remember the new commit sha1
TARGET=`git rev-list HEAD --max-count=1`

# go back to the original branch (assume master for this example)
git checkout master

# Replay all the commits after $2 onto the new initial commit
git rebase --onto $TARGET $2 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2014-05-12T08:57:43.590

如果您只是想将所有提交压缩为一个初始提交，只需重置存储库并修改第一个提交：

```
git reset hash-of-first-commit
git add -A
git commit --amend 
```

Git reset 将保持工作树完好无损，所以一切都还在。因此，只需使用 git add 命令添加文件，并使用这些更改修改第一次提交。与 rebase -i 相比，您将失去合并 git 注释的能力。

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2011-10-07T20:30:37.127

对于它的价值，我总是通过创建一个“无操作”的第一次提交来避免这个问题，其中存储库中唯一的东西是一个空的 .gitignore：

[https://github.com/DarwinAwardWinner/git-custom-commands/blob/master/bin/git-myinit](https://github.com/DarwinAwardWinner/git-custom-commands/blob/master/bin/git-myinit)

这样，就没有任何理由搞乱第一次提交。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-03-16T10:14:38.577

这会将第二次提交压缩到第一次：

`A-B-C-... -> AB-C-...`

```
git filter-branch --commit-filter '
    if [ "$GIT_COMMIT" = <sha1ofA> ];
    then
        skip_commit "$@";
    else
        git commit-tree "$@";
    fi
' HEAD 
```

AB 的提交消息将从 B 获取（尽管我更喜欢从 A 获取）。

与 Uwe Kleine-König 的答案具有相同的效果，但也适用于非初始 A。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-03-01T14:41:54.730

挤压第一次和第二次提交将导致第一次提交被重写。如果您有多个基于第一次提交的分支，您将切断该分支。

考虑以下示例：

```
a---b---HEAD
 \
  \
   '---d 
```

将 a 和 b 压缩成一个新的提交“ab”会产生两个不同的树，这在大多数情况下是不可取的，因为**git-merge**和**git-rebase**将不再在这两个分支上工作。

```
ab---HEAD

a---d 
```

如果你真的想要这个，它可以做到。查看**git-filter-branch**以了解用于重写历史记录的强大（且危险）工具。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2011-01-17T18:22:12.993

您可以为此使用 git filter-branch 。例如

```
git filter-branch --parent-filter \
'if test $GIT_COMMIT != <sha1ofB>; then cat; fi' 
```

这导致 AB-C 丢弃 A 的提交日志。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2011-12-27T18:48:07.357

您可以使用 rebase interactive 来修改最后两个提交，然后再将它们推送到远程

```
git rebase HEAD^^ -i 
```

* * *

## 回答 #9

> 赞同：-6
> 
> 时间：2013-10-25T21:15:12.863

有一种更简单的方法可以做到这一点。假设你在`master`分支上

创建一个新的孤立分支，它将删除所有提交历史记录：

```
$ git checkout --orphan new_branch 
```

添加您的初始提交消息：

```
$ git commit -a 
```

摆脱旧的未合并的 master 分支：

```
$ git branch -D master 
```

将当前分支重命名`new_branch`为`master`：

```
$ git branch -m master 
```

# linq-to-sql - Linq 查询到数据集

> ID：598680
> 
> 赞同：0
> 
> 时间：2009-02-28T20:59:06.110
> 
> 标签：linq-to-sql

我有一个 linq 查询。我想将此查询结果带到数据集。我怎样才能做到这一点 ？

```
var variable = from t in db.Islems
               where t.Tarih >= dateTimePicker1.Value
                     && t.Tarih < dateTimePicker2.Value
               select t;

DataSet ds = new DataSet(); 
```

我想将查询结果加载到数据集，然后在 Crystal Reports 中使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-28T21:07:19.350

检查我在[此处](https://stackoverflow.com/questions/523153/how-do-i-transform-a-listt-into-a-dataset/523168#523168)发布的扩展方法，它使用反射和泛型将任何 IEnumerable<T> 集合转换为 DataTable。

# objective-c - NSTimer 是否自动保留？

> ID：598688
> 
> 赞同：1
> 
> 时间：2009-02-28T21:04:16.893
> 
> 标签：objective-c, iphone, cocoa-touch

我有一个 -(void)save 方法，当用户单击导航栏按钮时会调用该方法。在该方法中是以下 NSTimer：

```
[NSTimer scheduledTimerWithTimeInterval:.25f target:self selector:@selector(flashBackgroundRed) userInfo: nil repeats: flashRepeat]; 
```

由于 flashBackgroundRed 保持计数并在 4 次点击后将 flashRepeat 设置为 NO，因此计时器重复 4 次。用户第一次点击保存时一切正常。但是，如果用户一直使用不正确的数据点击保存，我会将它们保留在当前视图中。出于某种原因，闪光灯增加得更快。好像每个都是前一个间隔的 25%。我不保留这个计时器。它只存在于 save 方法中。

如果用户单击取消按钮，viewB（一个带有 NSTimer 的）被弹出并显示 viewA。从 viewA 回到 viewB 似乎重置了计时器间隔。但越来越快的闪烁周期又开始了。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-28T21:50:23.240

只要 NSTimer 被调度，它就会被运行循环保留。

听起来问题在于您不断在稍微不同的时间创建等效的重复计时器，因此它们在视觉上以与您想要的频率不同的频率结合在一起形成一个效果。尝试存储对计时器的引用并在您要创建新计时器时将其无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-28T21:58:00.617

听起来您安排的计时器比您打算的要多。

一旦安排好，计时器就会保留，直到失效。重复计时器必须手动失效。

repeats参数指定计时器是否重复*。*您无法指定计时器应重复多少次，只能指定是否重复。

此外，您的选择器的方法签名是错误的。它应该看起来像

```
-(void)timerFireMethod:(NSTimer*)theTimer 
```

在您的计时器回调中，您可以确定是否希望计时器继续重复；如果没有，请调用 [timer invalidate]。

# javascript - 需要一些关于 javascript 中自动滚轮编码的帮助

> ID：598692
> 
> 赞同：0
> 
> 时间：2009-02-28T21:09:35.663
> 
> 标签：javascript

我有一个游戏需要你点击一个对象来收集奖品，但我不想给我的用户心皮隧道我想创建一个自动滚轮。我已经完成了一些代码，但我无法让它工作。如果有任何人可以帮助我使此代码正常工作，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-28T22:13:39.737

由于您没有对您的问题进行非常具体的描述，因此我将给您一个有点模糊的答案。但是，您可能会发现它很有帮助：

*   当用户点击对象领取奖品时，将 window.scrollTo() 方法绑定到文档的 mousemove 事件。
*   每次触发 mousemove 事件时，它都会启动 scrollTo 事件。
*   查找 y 参数的变化，然后滚动 + 或 -

不过，我实际上并不建议创建这种行为（就可用性而言）。您可能想要考虑一种更好的方式来布置奖品选择，以便对用户更直观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-28T22:26:53.653

MooTools 有一个[*自动滚动*](http://mootools.net/docs/Plugins/Fx.Scroll)器，[jQuery](http://plugins.jquery.com/search/node/autoscroll)也有。

# iphone - iPhone：在构建过程中自动压缩可执行文件

> ID：598694
> 
> 赞同：1
> 
> 时间：2009-02-28T21:10:40.123
> 
> 标签：iphone, build, zip

我想在我的 iphone 应用程序构建完成后添加一个压缩可执行文件的脚本。我已经尝试通过将 Post Build 脚本添加到目标来做到这一点。但是，在构建过程中，代码签名过程发生在构建脚本运行之后。因此，被压缩的 app bundle 对于 iTunes 提交是没有用的。

有没有人想出办法解决这个问题？

我通过谷歌找到的一个建议是添加一个包含 iphone 应用程序的聚合目标，并将构建后脚本添加到这个聚合目标。尽管如果您的项目中只有一个应用程序目标，这种方法听起来不错，但如果您有多个目标，它似乎效果不佳，这是我的情况（即精简版，付费等......）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-01T02:10:10.310

您可以尝试在构建文件夹上设置文件夹操作，然后通过 Apple 脚本进行压缩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-28T23:00:51.403

聚合的聚合怎么样？

1.  为压缩每个目标的每个目标创建一个聚合
2.  创建每个聚合的聚合

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-05-13T00:53:23.290

Xcode 3.2.2 现在在 Build 菜单上包含**Build and Archive**选项。只要您选择了 Device + Release（或 Distribution），就可以进行选择。它将构建您的项目，为您存档，然后将管理器打开到“存档的应用程序”，您可以在其中验证二进制文件、共享它（临时）或将其提交到 iTunes Connect 以进行分发。

# windows - 自定义时区

> ID：598695
> 
> 赞同：0
> 
> 时间：2009-02-28T21:11:54.783
> 
> 标签：windows, timezone

你是在 Windows 中实现自定义时区的某种方式吗？

我们在加拿大不列颠哥伦比亚省的克雷斯顿有一些电脑（[时区例外](http://www.worldtimeserver.com/current_time_in_CA-BC1.aspx?city=Creston)），它们全年保持相同的时间。所以本质上，Creston 没有观察时区。我可以在 windowsÉ 中实现这种行为吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:58:30.903

我写了一篇关于我们遇到的类似问题的长篇博文：http: [//subjectivecoder.blogspot.com.au/2013/04/creating-custom-windows-timezones.html](http://subjectivecoder.blogspot.com.au/2013/04/creating-custom-windows-timezones.html)

简短的版本是注册表中有一个位置允许您修改或创建新时区 - 但注册表格式相当讨厌。

Microsoft 有一个名为 TZEdit 的 GUI 工具，您可以在这里找到它：http: [//support.microsoft.com/kb/914387](http://support.microsoft.com/kb/914387)（向下滚动到方法 2 并下载 TZEdit.exe）。

如果您想查看幕后发生的事情，我已将源代码发布到我在这里构建的命令行工具中：[https](https://github.com/Rophuine/TimeZoneInfoGenerator) ://github.com/Rophuine/TimeZoneInfoGenerator （它未经测试且快速且肮脏但可能会有所帮助如果你有兴趣，你就会明白发生了什么）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-28T21:29:17.053

除了夏令时，这是正常的 MST (UTC-0700)，对吧？

Windows 曾经有一个复选框，名为“自动调整夏令时时钟”。也许你可以追捕它。即使没有复选框，注册表设置也可能仍然存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-28T21:30:09.843

数据位于：HKLM\SOFTWARE\Microsoft\WindowsNT\CurrentVersion\Time zone。

您可能可以添加自己的区域。

每个区域都有自己的密钥。它们包含大量数据。某些区域具有子项 Dynamic DST。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-28T21:33:46.730

这并不完全是一个答案，但您可能会考虑尝试将 Creston 识别为官方时区。至于究竟如何做到这一点......我想联系微软，并询问他们从哪里获得时区信息。计算机编程中与官方时区数据库最接近的可能是[zoneinfo](http://en.wikipedia.org/wiki/Zoneinfo)，但我不确定 Microsoft 是否使用它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-08-17T02:19:07.027

警告：您应该非常小心地创建自己的时区，即使您认为您的系统是孤立的。

这可能会导致与其他系统交换信息时出现问题，包括转换错误和异常处理。

如果您想要的时区在法律上得到认可，您应该考虑让您的供应商正确地将您添加到他们使用的时区存储库中。

# javascript - TypeError：值未定义（表达式 xmlDoc.load 的结果）不是对象

> ID：598699
> 
> 赞同：4
> 
> 时间：2009-02-28T21:15:14.387
> 
> 标签：javascript, xml, ajax

我正在尝试使用 Javascript 加载 XML 文件，但我还没有找到适用于 IE、Firefox 和 Safari 的好函数。我目前使用的加载函数基本上是 w3schools 教程中的一个：

[http://www.w3schools.com/XML/tryit.asp?filename=tryxml_dom_createelement](http://www.w3schools.com/XML/tryit.asp?filename=tryxml_dom_createelement)

确切的代码如下所示：

```
if (window.ActiveXObject)
{
xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
}
// code for Mozilla, Firefox, Opera, etc.
else if (document.implementation.createDocument)
{
xmlDoc=document.implementation.createDocument("","",null);
}
else
{
alert('Your browser cannot handle this script');
}
xmlDoc.async=false;
xmlDoc.load(dname); 
```

其中 dname = xml 文件的 url。此代码得到“TypeError：未定义的值（表达式 xmlDoc.load 的结果）不是对象。” 在 Safari 中。

我也试过这个网站上的代码：

[http://developer.apple.com/internet/webcontent/xmlhttpreq.html](http://developer.apple.com/internet/webcontent/xmlhttpreq.html)

但是，它会生成一个空 XML 文件。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-31T20:32:52.763

听起来问题在于 Safari 不支持**document.implementation.createDocument**作为**获取和加载**XML 源的方法。您必须使用 XMLHttpRequest 来获取和解析 XML AFAIK。

我已经尝试了您链接的 Apple 教程中代码的修改版本，它似乎对我有用。这段代码**不是**世界上最好的，它缺少很多错误处理，但它是我手头上唯一的概念证明。

**注意：我强烈建议使用库。XMLHttpRequests 和 XML 解析存在大量浏览器不一致。值得投资！**

对于非库版本，我使用了 safari 代码的修改版本来获取 XMLHttpRequest：

```
function getXHR(url,callback) {
    var req = false;
    // branch for native XMLHttpRequest object
    if(window.XMLHttpRequest && !(window.ActiveXObject)) {
        try {
            req = new XMLHttpRequest();
        } catch(e) {
            req = false;
        }
    // branch for IE/Windows ActiveX version
    } else if(window.ActiveXObject) {
        try {
            req = new ActiveXObject("Msxml2.XMLHTTP");
        } catch(e) {
            try {
                req = new ActiveXObject("Microsoft.XMLHTTP");
            } catch(e) {
                req = false;
            }
        }
    }

    if(req) {
        req.onreadystatechange = function() { callback( req ) };
        req.open("GET", url, true);
        req.send("");
    }
} 
```

从结果中获取 XML 也不是没有问题：

```
function getXML( response ) {
    if( response.readyState==4 ) {
        //Get the xml document element for IE or firefox
        var xml;
        if ( response.responseXML ) {
                xml = new ActiveXObject("Microsoft.XMLDOM");
                xml.async = false;
                xml.loadXML(response.responseText);
        } else {
                xml = response.responseXML;
        }

        return xml;
    }

    return null;
} 
```

最后使用你得到的：

```
function callback( response ) {
    var xmlDoc = getXML( response );
    if( xmlDoc ) {
        //do your work here
        ...
    }       
} 
```

如果您仍然发现自己遇到问题，您可以检查一些可能会解决您的问题的事情。

1.  您是否将内容类型设置为 text/xml？
2.  您的请求是否真的发送到服务器并返回？
3.  当您提醒/检查 responseText 时，您是否看到任何不属于的内容？
4.  您的 XML 格式是否正确？通过验证器运行它。

祝你好运！干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-28T21:45:39.663

您可能想查看[<Script> 的 XML](http://xmljs.sourceforge.net/index.html)。我看到一些帖子表明他们已经用它解决了 Safari 上的问题。

# c# - 通用代码共享引用类型的原因和效率影响

> ID：598702
> 
> 赞同：1
> 
> 时间：2009-02-28T21:21:04.903
> 
> 标签：c#, .net, generics

据称，本机代码在使用引用类型实例化时为实例化的泛型类型共享，但不为值类型共享。

这是为什么？有人会解释深入的细节吗？

为了更具体：

类 MyGenericType{

}

```
 MyGenericType<string> and MyGenericType<Shape> 
```

只会生成一个代码，而

```
 MyGenericType<int> and MyGenericType<long> 
```

不会，因此它引出了一个问题，如果使用引用类型更有效——

```
MyGenericType<int> vs. MyGenericType<SomeIntegerWrapper> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-28T21:43:38.547

首先，要纠正问题中的一个谬误，`int`并且`System.Int32`是同义词。`MyGenericType<int>`并且`MyGenericType<Int32>`是完全相同的类型。

其次，要解决这个问题（并稍微扩展 Mehrdad 的回答）：考虑 CLR 需要了解的关于类型的哪些信息。这包括：

*   该类型的值的大小（即，如果您有某种类型的变量，该内存需要多少空间？）
*   如何处理垃圾回收的值：它是对对象的引用，还是可能包含其他引用的值？

对于所有参考类型，这些问题的答案都是相同的。大小只是指针的大小，而值始终只是一个引用（所以如果变量被认为是根，GC 需要递归地下降到它）。

对于值类型，答案可能会有很大差异。例如，考虑：

```
struct First
{
    int x;
    object y;
}

struct Second
{
    object a;
    int b;
} 
```

当 GC 查看某个内存时，它需要知道 and 之间的区别`First`，`Second`因此它可以递归到`y`and`a`而不是`x`and `b`。我相信这些信息是由 JIT 生成的。现在考虑`List<First>`和`List<Second>`- 它的信息不同，因此 JIT 需要区别对待这两者。

抱歉，如果这不是很清楚 - 这是有点深奥的东西，我对 CLR 细节并不像我可能的那样热心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-28T21:24:55.563

从技术上讲，在较低级别上，所有引用类型都是指针，因此具有相同的大小和特性。运行时不需要为引用类型构建单独的本机代码。值类型可以有不同的大小，因此单个本机代码无法处理所有这些。

# .net - Silverlight 和 WPF 之间差异的明确来源

> ID：598703
> 
> 赞同：9
> 
> 时间：2009-02-28T21:21:27.553
> 
> 标签：.net, wpf, silverlight, compatibility

有谁知道一个或多个权威指南，告诉我们 WPF 和 Silverlight 之间的区别。例如，我知道 Silverlight 没有 WPF 拥有的所有控件和所有命名空间。是否有来源可以准确地告诉我 Silverlight 中缺少哪些控件和命名空间？

还有其他一些事情我一目了然，比如只允许使用基本的 http 绑定进行异步通信。此外，Silverlgiht 没有开箱即用的所有类型转换器。

还有其他人对细微差别有有趣的经历或知道解释它们的来源吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-28T21:29:00.967

[Silverlight 和 WPF 之间的 XAML 处理差异](http://msdn.microsoft.com/en-us/library/cc917841(VS.95).aspx)

[WPF 兼容性](http://msdn.microsoft.com/en-us/library/cc903925(VS.95).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-02-24T06:10:22.900

还有两个有用的资源——

> 关于 WPF 和 Silverlight 之间差异的指南： [http ://wpfslguidance.codeplex.com/](http://wpfslguidance.codeplex.com/)
> 
> 对比 Silverlight 和 WPF： http: [//msdn.microsoft.com/en-us/library/ff921107 (v=pandp.20).aspx](http://msdn.microsoft.com/en-us/library/ff921107(v=pandp.20).aspx)

# c# - 关于 C# 泛型的最重要的事情......经验教训

> ID：598710
> 
> 赞同：11
> 
> 时间：2009-02-28T21:25:42.927
> 
> 标签：c#, .net, generics

关于泛型你知道的最重要的事情是什么：隐藏的特性、常见的错误、最佳和最有用的实践、提示......

我开始使用泛型实现我的大部分库/API，并希望收集在实践中发现的最常见的模式、技巧等。

让我正式提出这个问题：关于泛型，你学到的最重要的东西是什么？

**请尝试提供示例——它会更容易理解，而不是复杂和过于枯燥的描述**

谢谢

不过，这个问题有点类似于[Jon 的问题](https://stackoverflow.com/questions/215548/whats-the-hardest-or-most-misunderstood-aspect-of-linq?...I)，只是在不同的主题上。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-02-28T21:32:33.813

我学到的最重要的事情之一是您可以[约束泛型类型参数](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)。这可能非常强大，允许您仅为某些类型的对象自定义类，并允许您在泛型类中使用该类型的成员。我意识到这是非常基本的，但它是使泛型非常有用的事情之一。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-28T22:25:42.267

当涉及到静态成员之类的东西时，泛型类型的每个特化都被视为唯一类型。例如，对于这种类型：

```
class GenericType<T>
{
    public static int SomeValue;
} 
```

如果我们这样做，断言就会成功：

```
GenericType<int>.SomeValue = 3;
Debug.Assert(GenericType<double>.SomeValue == 0); 
```

这是因为：

```
typeof(GenericType<int>) != typeof(GenericType<double>) 
```

虽然

```
typeof(GenericType<int>.GetGenericTypeDefinition() == typeof(GenericType<double>).GetGenericTypeDefinition() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-28T21:38:19.247

了解 C# 中泛型类型推断的功能和限制。深入了解编译器可以根据（例如）您的方法中的参数类型推断什么，可以用来使您的 API 的常见用例更具可读性。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-28T21:48:01.577

我学到的关于泛型的最重要的一课是：你使用的越多越好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-28T22:26:07.867

不知道它们是否最重要，但我学到了以下内容：

如果您不知道 frikkin 类型，泛型只能通过反射实例化。在某些情况下，您可能需要非泛型接口才能在类型未知的情况下使用泛型类。

我几乎要毁了我的头，直到我感到震惊

```
public class Foo<T> where T : Foo<T> {
  public T CloneMe() ...
} 
```

是完全有效的代码，并允许您的基类公开与专用类相关的方法和属性……最终沿着其状态定义状态机：

```
public abstract class Machine<S,M> where S : State<S,M> where M : Machine<S,M>  {
    protected S state;
}

public abstract class State<S,M> where S : State<S,M> where M : Machine<S,M> {
    protected M machine;
} 
```

泛型可能会有点笨拙。前几天我有这个：

```
List<Tuple<Expression<Func<DataTable,object>>,Expression<Func<DataTable,object>>>> 
```

呸...

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-01T03:45:40.127

**没有协方差或逆变**（至少在 3.5 中）。在设计包含泛型类型参数的类层次结构时要注意这一点。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-01T13:10:17.010

两个有趣的教训。第一的; 带清单；尝试从以下方面思考`T`；[有关详细信息，请参见此处](http://marcgravell.blogspot.com/2009/02/what-c-40-covariance-doesn-do.html)，但简而言之，您需要使用：

```
public void Foo<T>(IList<T> data) where T : SomeBaseClassOrInterface {} 
```

并不是：

```
public void Foo(IList<SomeBaseClassOrInterface> data) {} 
```

* * *

第二：[注意边缘情况](https://stackoverflow.com/questions/194484/whats-the-strangest-corner-case-youve-seen-in-c-or-net/194671#194671)；-p

你能看到这里的陷阱吗？

```
static void Foo<T>() where T : new()
{
    T t = new T();
    Console.WriteLine(t.ToString()); // works fine
    Console.WriteLine(t.GetHashCode()); // works fine
    Console.WriteLine(t.Equals(t)); // works fine

    // so it looks like an object and smells like an object...

    // but this throws a NullReferenceException...
    Console.WriteLine(t.GetType()); // BOOM!!!
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-28T22:39:49.237

```
MyGeneric<T> where T : IComparable 
```

没有

```
MyGeneric<IComparable> 
```

它的一个基类。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-01T02:54:51.183

我了解到泛型是非常强大的工具，但滥用会导致代码非常不可读。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-28T22:04:07.950

首先，了解泛型在 C# 中是如何工作的很重要。本文为您提供了 Anders [Hejlsberg](http://www.artima.com/intv/generics.html)（c# 之父）对泛型的一个很好的概述。我认为尽可能多地使用它们并不是那么好。真正有意义时使用泛型。永远记住极限编程中的 KISS 和 YAGNI（保持简单愚蠢；你不需要它）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-02-28T22:15:24.540

泛型委托类型始终是类型不变的。

前几天我遇到了一个类似于下面链接中概述的问题，这引起了一些混乱，因为我不明白为什么我必须投射我的收藏。

[http://www.theserverside.net/blogs/thread.tss?thread_id=47323](http://www.theserverside.net/blogs/thread.tss?thread_id=47323)

# c# - 隐式与显式接口实现

> ID：598714
> 
> 赞同：77
> 
> 时间：2009-02-28T21:29:12.590
> 
> 标签：c#, .net, interface

> **可能重复：**
> [C#：接口 - 隐式和显式实现](https://stackoverflow.com/questions/143405/c-interfaces-implicit-and-explicit-implementation)

有人会解释这两种野兽之间的区别以及如何使用它们。AFAIK，许多 pre.2.0 类是在没有泛型类型的情况下实现的，因此导致后一个版本实现了两种类型的接口。是唯一需要使用它们的情况吗？

您能否也深入解释一下如何使用它们。？

谢谢

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2009-02-28T21:34:53.497

[有一篇关于此的很好且非常详细的博客文章。](https://docs.microsoft.com/en-us/archive/blogs/mhop/implicit-and-explicit-interface-implementations)

基本上，通过隐式接口实现，您可以访问接口方法和属性，就好像它们是类的一部分一样。使用显式接口实现，您只能在将其视为该接口时访问它们。

就何时使用另一个而言，有时您必须使用显式接口实现，因为您要么具有与接口具有相同签名的属性/方法，要么您希望实现具有相同签名并具有不同实现的两个接口那些匹配的属性/方法。

以下规则来自 Brad Abrams[设计指南博客](https://docs.microsoft.com/en-us/archive/blogs/brada/design-guideline-update-explicit-member-implementation)。

*   **不要**使用显式成员作为安全边界。任何将实例转换为接口的客户端都可以调用它们。
*   **使用**显式成员隐藏实现细节
*   **请**使用显式成员来近似私有接口实现。
*   **一定要**公开另一种方法来访问允许子类覆盖的任何显式实现的成员。除非发生冲突，否则请使用相同的方法名称。

Brad 博客的评论中还提到，在值类型上使用显式实现时会涉及装箱，因此请注意性能成本。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-09-21T12:35:36.637

通俗的讲，如果一个类继承了2个或多个接口，并且这些接口碰巧有相同的方法名，那么如果你使用隐式接口实现，该类不知道正在实现哪个接口方法。这是显式实现接口的场景之一。

**隐式接口实现**

```
public class MyClass : InterfaceOne, InterfaceTwo
{
    public void InterfaceMethod()
    {
        Console.WriteLine("Which interface method is this?");
    }
}

interface InterfaceOne
{
    void InterfaceMethod();
}

interface InterfaceTwo
{
    void InterfaceMethod();
} 
```

**显式接口实现**

```
public class MyClass : InterfaceOne, InterfaceTwo
{
    void InterfaceOne.InterfaceMethod()
    {
        Console.WriteLine("Which interface method is this?");
    }

    void InterfaceTwo.InterfaceMethod()
    {
        Console.WriteLine("Which interface method is this?");
    }
}

interface InterfaceOne
{
    void InterfaceMethod();
}

interface InterfaceTwo
{
    void InterfaceMethod();
} 
```

以下链接有一个很好的视频来解释这个概念
[显式接口实现](http://venkatcsharpinterview.blogspot.co.uk/2011/08/explicit-interface-implementation.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-01T09:37:20.857

从迷宫实现本身来看，还有另一种方法可以查看：http: [//blogs.msdn.com/cbrumme/archive/2003/05/03/51381.aspx](http://blogs.msdn.com/cbrumme/archive/2003/05/03/51381.aspx)。

但简而言之，隐式实现为您提供了 is-a 类型转换，除非对象被显式类型转换为该接口类型，否则显式实现将不可访问。

# python - 如何匹配文本节点然后使用 XPath 跟随父节点

> ID：598722
> 
> 赞同：15
> 
> 时间：2009-02-28T21:33:20.210
> 
> 标签：python, html, xpath, lxml

我正在尝试使用 XPath 解析一些 HTML。按照下面的简化 XML 示例，我想匹配字符串“Text 1”，然后获取相关`content`节点的内容。

```
<doc>
    <block>
        <title>Text 1</title>
        <content>Stuff I want</content>
    </block>

    <block>
        <title>Text 2</title>
        <content>Stuff I don't want</content>
    </block>
</doc> 
```

我的 Python 代码不稳定：

```
>>> from lxml import etree
>>>
>>> tree = etree.XML("<doc><block><title>Text 1</title><content>Stuff 
I want</content></block><block><title>Text 2</title><content>Stuff I d
on't want</content></block></doc>")
>>>
>>> # get all titles
... tree.xpath('//title/text()')
['Text 1', 'Text 2']
>>>
>>> # match 'Text 1'
... tree.xpath('//title/text()="Text 1"')
True
>>>
>>> # Follow parent from selected nodes
... tree.xpath('//title/text()/../..//text()')
['Text 1', 'Stuff I want', 'Text 2', "Stuff I don't want"]
>>>
>>> # Follow parent from selected node
... tree.xpath('//title/text()="Text 1"/../..//text()')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "lxml.etree.pyx", line 1330, in lxml.etree._Element.xpath (src/
lxml/lxml.etree.c:14542)
  File "xpath.pxi", line 287, in lxml.etree.XPathElementEvaluator.__ca
ll__ (src/lxml/lxml.etree.c:90093)
  File "xpath.pxi", line 209, in lxml.etree._XPathEvaluatorBase._handl
e_result (src/lxml/lxml.etree.c:89446)
  File "xpath.pxi", line 194, in lxml.etree._XPathEvaluatorBase._raise
_eval_error (src/lxml/lxml.etree.c:89281)
lxml.etree.XPathEvalError: Invalid type 
```

这在 XPath 中可行吗？我需要用不同的方式表达我想做的事吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-02-28T21:40:19.710

你想要那个吗？

```
//title[text()='Text 1']/../content/text() 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-03-01T01:37:19.047

**使用**：

```
string(/*/*/title[. = 'Text 1']/following-sibling::content) 
```

**与目前公认的 Johannes Weiß 解决方案相比，**这代表了至少两个改进：****

 **1.  ****避免****使用非常昂贵的缩写“//”**（通常会导致扫描整个 XML 文档），因为只要事先知道 XML 文档的结构就应该这样做。**

***   **没有返回到父**级（位置步骤“/..”被避免）** 

 **# linux - Cron 不从 /root 运行

> ID：598731
> 
> 赞同：1
> 
> 时间：2009-02-28T21:39:38.883
> 
> 标签：linux, cron

如果我以 root 身份从 运行脚本`/home/<user>/<dir>/script.sh`，则 cron 运行良好。但是如果我从（再次以 root 身份）运行脚本`/root/<dir>/script.sh`，cron 似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-01T06:30:26.907

过去在使用“cron”时与各种默认的 $PATH 发生冲突，我总是为每个可执行文件和每个目标文件拼写完整的绝对 $PATH。我总是假设“cron”没有设置 $PATH 并且没有当前工作目录。

换句话说，不要使用类似的命令

```
 "myprocess  abc*.txt" 
```

但要完整地做

```
 "/usr/localbin/myprocess    /home/jvs/abc*.txt". 
```

或者，创建一个 bash 脚本来完成这项工作，并使用完整的绝对路径调用该 bash 脚本，例如

```
 "/usr/local/bin/myprocess_abc_txts". 
```

如果您需要在脚本中有一些灵活性，请使用在您使用“cron”调用的 bash 脚本中专门设置的环境变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-28T21:46:48.773

我认为您需要添加更多信息。我猜这是一个权限问题。在您的 crontab 中添加文件、目录和行的权限，以便我们提供帮助。另外，如果你把它放在 /root 中，你是在 root 的 crontab 中运行它吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-28T22:20:11.767

记住环境——尤其是当由`cron`而不是由 root 运行时。当 cron 运行某些东西时，您的环境可能没有太多设置，这与您通过`at`. 也不清楚您当前的目录是什么。因此，对于将由 运行的命令`cron`，请使用脚本（正如您已经在做的那样）并确保它设置了足够的环境以使其运行。并确保您的环境设置代码不是交互式的！

在我的机器上，我有一个机制使得 cron 条目读取（例如）：

```
23 1 * * 1-5 /usr/bin/ksh /work1/jleffler/bin/Cron/weekday 
```

目录中的`weekday`脚本`Cron`是一个标准脚本的链接，它首先设置环境，然后运行命令`/work1/jleffler/bin/weekday`（在这种情况下 - 它使用命令的名称来确定要运行的内容）。

目录中的实际脚本`Cron`是：

```
:       "$Id: runcron.sh,v 2.1 2001/02/27 00:53:22 jleffler Exp $"
#
#       Commands to be performed by Cron (no debugging options)

#       Set environment -- not done by cron (usually switches HOME)
. $HOME/.cronfile

base=`basename $0`
cmd=${REAL_HOME:-/real/home}/bin/$base

if [ ! -x $cmd ]
then cmd=${HOME}/bin/$base
fi

exec $cmd ${@:+"$@"} 
```

我已经使用了一段时间了——这个版本是从 2001 年开始的——它对我来说是一种享受。我正在使用的基本（Sun Solaris 10）实现`cron`；其他平台上的新版本中可能会有新功能，`cron`从而使其中一些变得不必要。（这些`$REAL_HOME`东西是我的怪事；假装它说`$HOME`- 尽管这使得某些脚本对你来说是不必要的。）`.cronfile`负责环境设置 - 它做了很多，但这是我的问题，而不是你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T07:47:56.107

运行 sh 脚本的另一种方法是将 bash 脚本放在`/usr/bin`目录中，只需运行命令`bash yourscript.sh`而不添加`/usr/bin/`目录

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-28T21:49:24.663

这可能是因为您正在寻找脚本中的相对目录/文件，这些目录/文件在从 /home/ 运行而不是从 /root 运行时位于，因为 /root 不在 /home/root 中，也不会看起来像用户主文件夹在家/

你能检查一下它是否在寻找相关文件，或者发布脚本吗？

另一方面，您为什么不将其设置为从用户的主文件夹运行呢？

# maven-2 - 我应该从 Ant 迁移到 Maven 吗？

> ID：598735
> 
> 赞同：10
> 
> 时间：2009-02-28T21:42:57.050
> 
> 标签：maven-2, ant, migration

我正在处理一个相当大的项目（包含许多模块、一堆外部库等），我们现在正在考虑从 Ant 切换到 Maven。我理解两者之间的区别，但我不相信花时间转换项目布局、设置所有依赖项、教开发人员和配置经理以“新方式”做事等真的值得。

网上有很多资源描述了如何从 Ant 迁移到 Maven，但我还没有找到很多说明原因的资源:-)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-02-28T21:49:08.487

在改变你的构建系统之前，问问你自己（和团队）你为什么要改变？如果你只是因为 Maven 是“新事物”而改变，不要这样做。如果您确实看到迁移的技术原因，请执行此操作。

一般来说，除非有一个重要的令人信服的理由这样做（新功能或更简单的管理），否则我会说保留当前项目的所有内容，但考虑将 Maven 用于未来的项目。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-02T10:06:14.323

你读过“Maven，权威指南”的[第 1 章吗？](http://www.sonatype.com/books/maven-book/reference/introduction.html)特别是[1.7 Comparing Maven with Ant](http://www.sonatype.com/books/maven-book/reference/installation-sect-compare-ant-maven.html)有一个有趣的讨论。

我同意其他建议谨慎的答案。Maven 有优点，但没有什么是 Ant 构建过程无法完成的：

*   依赖管理：Ant 有[Ivy](http://ant.apache.org/ivy/)子项目，可以与 Maven 存储库交互。

*   约定优于配置：您也可以使用 Ant 来做到这一点，这只是建立规则并执行它们的问题。

*   构建生命周期：与上面相同，您可以对每个构建公开的任务强制执行约定。

*   构建逻辑重用（Maven 插件）：您也可以在 Ant 中使用`macrodef`s 和任务库来实现。

问题是，使用 Maven，您可以获得开箱即用的这些功能，而使用 Ant，您需要一个坚如磐石的构建、一套非常严格的规则和一种强制执行它们的方法（例如，确保每个人都遵循他们创建新子项目时的约定，即他们重用现有块而不是从头开始做所有事情等）。

就个人而言，我会看到现有流程如何很好地解决上述问题：依赖关系如何管理，是否有中央存储库？项目结构是否统一（当我签出一个我不知道的项目时，需要多长时间才能弄清楚如何构建它）？是否有某种形式的构建逻辑重用，或者每个项目都在重新发明轮子？*需要这些功能中的哪些？*

然后我会尝试平衡将缺少的功能添加到现有 Ant 脚本的成本与迁移到 Maven 的成本（如果您不了解 Maven，这还包括[学习它](http://www.sonatype.com/books/maven-book/reference/public-book.html)的成本）。

无论如何，我建议您构建一个小型 Maven 原型（5 到 10 个项目）来说明构建中的常见情况。您可以使用包含少量 java 逻辑的虚拟项目来测试 Maven 的许多功能（使用[原型插件](http://www.sonatype.com/books/maven-book/reference/archetypes.html)生成它们）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-28T22:12:47.603

在 Maven 之前，我们将依赖库（通常是第三方的、开源的品种）检查到源代码控制中——这样我们就可以确保我们的组件编译和打包时使用了预期的精确版本。

现在有了 Maven，我们依靠工件存储库来保存这些版本，我们让 pom.xml 依赖声明成为定义版本依赖的官方方法。事实证明，这是一种简化的方法，可以使版本控制存储库（及其 Hudson 构建项目）中的项目组织更容易设计。我们的本地工件存储库与我们的源代码控制存储库一起处于备份策略之下。使用 Maven 工具去搜索并指定所需的库版本非常好。我们还使用父 pom 文件来指定其他项目 pom 默认继承的依赖项。因此，如果您希望所有项目使用相同的 log4j 版本，则在父 pom 文件中的一处指定。

以下是成功采用 Maven 的秘诀：

*   为新的未开发项目使用 Maven 项目构建方法
*   修改使用 ant build.xml 文件的现有遗留项目以合并 Maven 任务以管理依赖关系（一种混合方法）

好处是你可以在Maven依赖管理下获得所有项目，这当然是最大的好处。

ant 的 Maven 任务的好处是，您在 pom.xml 文件中指定所有依赖项，它只涉及对现有 ant build.xml 文件的适度修改以为此合并 Maven。从 ant 文件的角度来看，Maven 只是定义类路径定义的一种方式，随后被各种 ant 构建任务使用。

定义类路径时可以使用 Maven 范围分类器，以便可以为编译、运行单元测试、打包等设置合适的类路径。pom 中的其他定义也可以作为 ant 属性定义访问。

许多现有的 ant 构建文件相当复杂。将此类项目转换为完整的 Maven 构建过程可能是一项艰巨的任务。这种让 Maven 管理所有依赖项并将大部分 ant build.xml 文件保持原样的混合方法是最实用的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-28T22:11:15.547

首先，我相信很多人都会提到，Ant 和 Maven 并不是完全打算解决相同的目标。既然您说您了解每个提供的内容，我不会详细说明，所以只需说 Ant 允许您定义如何构建单个组件的细节，而 Maven 管理组件之间的依赖关系，而 Maven 允许您以编程方式定义从编译到测试和部署的完整项目构建周期。

过去我在几个项目中使用过 Maven，最近我才开始在另一个项目中使用它。[网上](http://www.google.com/search?hl=en&q=ant+vs+maven&btnG=Search)有很多比较 Ant 和 Maven 的文章，所以你可以看看这些，但根据我的经验，考虑如何改进项目总是值得的。依赖管理和构建生命周期是任何大型项目的两个重要方面，Maven 在这两个方面都有帮助。如果您已经使用 ant 建立了良好的构建系统，并且您的依赖项保存在易于访问的中心位置，并且您不打算扩展构建过程以包含任何更高级的构建管理，那么也许您应该留下用你所拥有的。

另一方面，如果您想使用像 hudson 这样的持续集成服务器或像 nexus 这样的工件存储库，那么将您的项目迁移到 maven 确实有助于提高构建效率和自动化程度。在这些情况下您可能会喜欢 maven，因为从依赖项到构建到工件的完整周期可以使用这些类型的工具来实现，并且您将能够更好地控制您的构建和发布。在我当前的项目中，我们有许多模块和依赖项，就像你提到的那样。迁移到 maven 以便我们可以使用 hudson 和 nexus 确实很有帮助，因为我们可以将所有这些 3rd 方 jar 放到一个 nexus 存储库中，而不必将它们签入版本控制或通过电子邮件发送它们。此外，构建失控是因为 CM 人员有一个构建计划作为他们有时会遵循的文档，但是使项目的那一部分（即 pom.xml）定义了您应该如何构建并让您强制执行它。Maven 是将所有这些东西结合在一起的粘合剂。

最后，这取决于您希望项目持续多长时间，您现在的流程有多好，是否要清理依赖项，是否要强制执行构建计划以及是否要选择使用持续集成和工件管理。如果你有这些东西，Maven 是一个强有力的候选人。

# java - 使用 DAO 模式，您是否曾经将 EntityManager 或 Session 作为参数公开？

> ID：598739
> 
> 赞同：3
> 
> 时间：2009-02-28T21:44:26.937
> 
> 标签：java, orm

在标准 web 应用程序中是否存在将 EntityManager 或 Session 作为参数传递给 DAO 调用的情况，即`findPersonByName(String name, Session session)`？还是应该在实现中抽象会话的打开和关闭？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-28T22:45:33.903

更好的方法是使用`SessionFactory`. 然后你可以做这样的事情：

```
public abstract class AbstractHibernateDao<T extends Object>
    implements AbstractDao<T> {

    private SessionFactory sessionFactory;

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    protected Session getSession() {
        return sessionFactory.getCurrentSession();
    }

    public void save(T t) { getSession().save(t); }

    public void update(T t) { getSession().update(t); }

    ...
} 
```

无需到处传递`Session`s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-28T21:57:51.447

不，它永远不应该被使用，但服务层可能会。想象一下，您有两种不同的方法（可能在不同的 DAO 中）需要封装在同一个事务（提交/回滚）中，而不是您可能希望/必须使用相同的连接对象。

# jquery-ui - 如何在（Google）地图上放置 jQuery 对话框？

> ID：598741
> 
> 赞同：0
> 
> 时间：2009-02-28T21:45:38.837
> 
> 标签：jquery-ui, google-maps, jquery-ui-dialog

如果我的地图上有太多点，我希望我的用户放大以查看更少的点。我还想显示其他通知，不确定我是否应该在地图上执行此操作，但它会直接与地图上的内容相关。

有人知道做这种事情的简单方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-28T21:56:10.280

尝试使用[jQuery UI 对话框](http://jqueryui.com/)插件。它的工作方式非常可定制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-28T21:56:47.237

找到保存地图的 Div 的 X 和 Y，然后在其中放置一个灯箱或其他东西。

# git - 2 个非同地开发人员使用什么 git 工作流程？

> ID：598743
> 
> 赞同：10
> 
> 时间：2009-02-28T21:46:20.223
> 
> 标签：git, workflow

我有一份合同要编写程序的一部分。写另一部分的人在另一个城市。我想找到一种方便的方法来来回发送更改。出于其他原因，我想学习使用 git 作为分布式 VCS 和电子邮件来回更改。（我以前使用过 SCCS、RCS 和 PVCS，总是使用锁定。我想推动自己学习如何更好地使用分支和合并，而不是依赖中央服务器。）

我们需要完成以下两项任务（相当标准的列表）：
(a) 我们每个人都为需要更改两个部分的错误修复和新功能做出贡献。
(b) 为客户编译和打包二进制文件。
（我们还需要单独处理不依赖于另一个的功能，但我认为任何适用于任务（a）的东西也适用于此。）

背景：另一个人以前从未使用过 VCS；他有点抗拒这个想法。他甚至不知道他们并不都还在使用锁定结账。我需要足够深入地了解我们所做的一切，以便我可以帮助他克服困难，而不会让他感到沮丧。他也很不喜欢将源存储在服务器上，这是更喜欢通过电子邮件发送更改的另一个原因。我们可以轻松地加密它们。

其他可能相关的上下文：我们在 Windows 上使用 Delphi 作为我们的开发环境。我们极不可能添加另一个开发人员。如果那样的话，我们每年只需要打包几次客户版本。客户的数量可能永远不会超过十个。

问题：
1）我应该使用这个项目来学习分布式开发的技术吗？或者我应该做一些更简单的事情是不是太过分了？我不介意在学习上花一些额外的时间，但不会超过几周。

2) 假设问题 1 为“是”，我们应该为上述每个任务使用什么工作流程？

3) 哪些 Windows GUI 程序可以完成所有必需的任务？（我对命令行的东西很满意；他不是。

我已经写了一个关于“gitting started”的非常详细的教程，展示了我到目前为止所学到的关于使用 git 的知识。到目前为止，如果您想阅读它，请访问[http://xorandor.com/GittingStarted 。](http://xorandor.com/GittingStarted)我试图为一个对 VCS 了解一点但对 VCS 了解不多的 git 新手编写它。当我了解更多时，我计划添加它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-28T22:02:40.310

你应该使用这个项目来学习 git 吗？我会说是的。

除了[源代码控制的固有好处](http://betterexplained.com/articles/a-visual-guide-to-version-control/)之外，我使用 git 的优点是在每个开发人员系统上都拥有存储库的完整副本。

在每个人都有一个存储库的基础上，我会做的一件事是让你们每个人每天都与中央服务器同步。

工作流程如下：

1.  您可以尽可能多地更改本地 git 存储库。
2.  以固定的时间间隔（一天一次，在一个大的错误修复或功能等之后）将您的存储库推送到位于您的网络主机或另一个 git 托管服务提供商（又名[GitHub](http://github.com/)）上的中央存储库。
3.  始终从中央存储库而不是其他存储库中提取更改。您可以将中央存储库视为您的发布存储库，这样可以避免混淆哪个存储库（您的或他的）是最新的。

我知道分布式版本控制系统的全部意义在于没有中央仓库，但我真的很喜欢在异地拥有额外的副本。如果有的话，它会为您提供另一个存储库副本以用于备份目的。

至于 windows 上的 git，我会查看[在 windows 上运行 git 的图解指南](http://github.com/)。内置的 git-gui 有很多不足之处，但它功能强大且可用。

另外，由于您的合作伙伴是源代码管理的新手，我会推荐 Eric Sink 的优秀[Source Control HOWTO](http://www.ericsink.com/scm/source_control.html)。它为您提供了大量有关*源*代码控制方式的重要信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-01T22:53:38.713

> 另一个人以前从未使用过 VCS；他有点抗拒这个想法。

我一直参与培训和支持被迫从源代码安全切换到颠覆的用户。用户抵制的数量惊人。现在已经一年多了，当“*颠覆破坏了我的东西*”时，我仍然经常被要求修复问题（当然从来没有这样）。

知道了这一点，我会非常犹豫是否尝试帮助某人从根本没有 VCS 切换到 git（这可能不是最用户友好的 VCS）。特别是如果他们讨厌 VCS 的想法。如果你不能在他们的办公桌前帮助他们，那就更是如此。

所以考虑一下：有些原因只是失去的原因。除非您打算与此人长期合作，否则您最好为自己建立一个存储库。您可以让他通过电子邮件将更改的文件发送给您，反之亦然。至少 git 可以让您轻松查看自上次集成点以来哪些文件发生了更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-28T23:55:41.613

根据我的经验，Git 在 Windows 上还没有得到很好的支持。

对于类似但恕我直言，对用户更友好的 DVCS，请参阅 Mercurial（又名 Hg）。它有一个 Tortoise 客户端和一个相当友好的命令行工具。

还有用于 Mercurial 的 Visual Studio 和 Eclipse 插件（我也认为是 NetBeans）。它们工作得相当好，是其他工具的一个很好的附加组件。（东西会自动添加/删除/重命名，基本同步任务（推/拉）工作正常。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-01T00:08:42.847

看起来 git 有内置的[电子邮件补丁功能](http://www.kernel.org/pub/software/scm/git/docs/git-send-email.html)。虽然我没用过，所以我不能说它的用处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-28T22:07:24.793

我是 git 的新手，但也许最快的开始方法是：
使用 git，您可以在计算机上创建两个存储库。
一个用于您的工作，第二个用于他发送给您的工作。
有[很好的教程开始](http://nathanj.github.com/gitguide/tour.html)（正如尼克提到的）
如果你在 [TortoiseGit](http://code.google.com/p/tortoisegit/)

之前使用 windows/subversion，这个工具很好 我的观点：在你对 git 感觉很好之前不要开始教他，在你的仓库电脑。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-28T22:46:27.037

我只是在每个上配置 autosetuprebase，然后从一个非常简单的设置开始。

拥抱你得到的冲突——那些是本来会丢失的变化。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-01T01:34:16.307

由于其他开发人员不熟悉版本控制概念，我建议慢慢开始。

我建议的工作流程包括您身边的一个存储库，他可以“git clone”。向他展示如何从中获取更改并让他将更改邮寄给您。向他展示 git 如何发送变更集。这样，您将不得不担心编辑冲突，这对于以前从未使用过版本控制系统的人来说往往是一个很大的困惑来源。

# jquery - jQuery1.3.2 的位显示为 404

> ID：598756
> 
> 赞同：0
> 
> 时间：2009-02-28T21:57:54.097
> 
> 标签：jquery, ajax, http-status-code-404

我刚开始在我的一个网站上使用 jQuery 1.3.2 - 主要是 DOM 的东西，但有一点点 ajax。我的日志记录显示来自我保存 jQuery 文件的文件夹的一致 404，触发错误的“页面”结果是 jQuery 文件的片段：

*   ){F.html(E?o(
*   ]||!o.suppo
*   rt.html序列化&&[1,

我已经搜索了我的网站以寻找 js 错误，但我没有找到任何错误。但是谷歌搜索这些返回什么（但 jQuery 文件）。

有任何想法吗？

谢谢，

科里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-01T08:02:44.457

以前在日志文件中看到过。认为他们只是试图入侵或试图破坏该网站。

或者也许检查该站点的人让 jQuery 以某种方式出现乱码，并在代码中留下了垃圾。

# iphone - CFReadStreamHasBytesAvailable 轮询 - 最佳实践

> ID：598762
> 
> 赞同：3
> 
> 时间：2009-02-28T22:01:08.270
> 
> 标签：iphone, cocoa, cocoa-touch, network-programming, core-foundation

我目前正在使用 轮询我`CFReadStream`的新数据`CFReadStreamHasBytesAvailable`。

（首先，一些背景：我正在做自己的线程，我不想/不需要弄乱runloop的东西，所以客户端回调的东西在这里并不适用）。

我的问题是：民意调查的公认做法是什么？

[Apple](http://developer.apple.com/documentation/Networking/Conceptual/CFNetwork/CFStreamTasks/chapter_4_section_4.html#//apple_ref/doc/uid/TP30000230-62008)关于该主题的文档似乎没有太大帮助。

他们建议“在等待时做点别的事情”。我目前只是在做一些事情：

```
while(!done)
{
  if(CFReadStreamHasBytesAvailable(readStream))
  {
    CFReadStreamRead(...) ... bla bla bla
  } else {
    usleep(3600); // I made this up
    sched_yield(); // also made this up
    continue;
  }
} 
```

`usleep`和`sched_yield`“足够好”吗？那里有一个“好”的号码可以睡觉`usleep`？

（另外：是的，因为这是在我自己的线程中运行的，所以我可以阻止`CFReadStreamRead`- 这很好，但我也试图阻止上传进度和下载进度，所以阻止那里没有帮助...... ）。

任何见解将不胜感激 - 谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-01T02:47:09.067

我认为这个问题有点自相矛盾，因为你问的是做一些本质上不是最佳实践的事情的最佳实践是什么；）

当有一种非常好的方法来阻止网络 I/O 时，任何导致您轮询的妥协都不是最佳实践。

也就是说，如果您进行民意调查，我认为在您的线程上“运行 runloop 直到日期”可能更合适，而不是使用您想象的任何 posix sleep 或 yield 方法。请记住，每个线程都有自己的 runloop，因此基本上通过运行 runloop，您可以让 Apple 使用其最佳实践的概念来阻塞直到未来的日期。

至于时间延迟，我不知道你是否会得到一个确定的答案，什么是好时光。这是在轮询周期与 CPU 之间的权衡与当 I/O 准备好从网络读取时卡在 runloop 中一会儿。

理想情况下，我认为我会将您的精力重新集中在使用 I/O 阻塞调用来完成这项工作上，但是如果您坚持使用 poll & idle 技术，请不要太担心具体的延迟时间。只需选择有效且似乎不会对任一方向的性能产生负面影响的东西即可。

（另外，我想澄清一下，我对轮询与阻塞的事情并不太虔诚，我只是强调它的价值，因为你显然在寻找一个更高的解决方案）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-14T22:26:16.850

在单独的线程上进行基于 CFStream 的手动连接时（用于带宽监控和限制等自定义操作），我使用 CFReadStreamScheduleWithRunLoop、CFRunLoopRunInMode 和 CFReadStreamSetClient 的组合。基本上我跑了 0.25 秒，然后检查流状态。客户端回调也会自己收到通知。这使我可以定期检查读取状态并执行一些自定义行为，但主要依赖于（流）事件。

```
static const CFOptionFlags kMyNetworkEvents =
kCFStreamEventOpenCompleted
| kCFStreamEventHasBytesAvailable
| kCFStreamEventEndEncountered
| kCFStreamEventErrorOccurred;

static void MyStreamCallBack(CFReadStreamRef readStream, CFStreamEventType type, void *clientCallBackInfo) {
    [(id)clientCallBackInfo _handleNetworkEvent:type];
}

- (void)connect {
  ...

  CFStreamClientContext streamContext = {0, self, NULL, NULL, NULL};
  BOOL success = CFReadStreamSetClient(readStream_, kMyNetworkEvents, MyStreamCallBack, &streamContext);

  CFReadStreamScheduleWithRunLoop(readStream_, CFRunLoopGetCurrent(), kCFRunLoopDefaultMode);

  if (!CFReadStreamOpen(readStream_)) {
    // Notify error
  }

  while(!cancelled_ && !finished_) {

    SInt32 result = CFRunLoopRunInMode(kCFRunLoopDefaultMode, 0.25, NO);

    if (result == kCFRunLoopRunStopped || result == kCFRunLoopRunFinished) {
      break;
    }

    if (([NSDate timeIntervalSinceReferenceDate] - lastRead_) > MyConnectionTimeout) {
      // Call timed out
      break;
    }

    // Also handle stream status CFStreamStatus status = CFReadStreamGetStatus(readStream_);
    if (![self _handleStreamStatus:status]) break;
  }

  CFRunLoopStop(CFRunLoopGetCurrent());

  CFReadStreamSetClient(readStream_, 0, NULL, NULL);
  CFReadStreamUnscheduleFromRunLoop(readStream_, CFRunLoopGetCurrent(), kCFRunLoopDefaultMode);

  CFReadStreamClose(readStream_);       

}

- (void)_handleNetworkEvent:(CFStreamEventType)type {
    switch(type) {
        case kCFStreamEventOpenCompleted:
            // Notify connected
            break;

        case kCFStreamEventHasBytesAvailable:
            [self _handleBytes];
            break;

        case kCFStreamEventErrorOccurred:
            [self _handleError];
            break;

        case kCFStreamEventEndEncountered:
            [self _handleBytes];
            [self _handleEnd];
            break;

        default:
          Debug(@"Received unexpected CFStream event (%d)", type);
            break;
    }
} 
```

# c# - 在 Apple 上开发（新平台）

> ID：598769
> 
> 赞同：5
> 
> 时间：2009-02-28T22:07:06.743
> 
> 标签：c#, macos, development-environment

来自 Microsoft 开发团队，我对 Mac 上可用的开发语言/环境有点困惑。除了 Java，我还应该考虑在 Mac 上使用类似 C# 的语言进行开发吗？MS 到 OSX 的转换更喜欢什么，为什么？我追求的是业务级编程策略，而不是游戏或图形，因此应用程序性能不是我选择平台的整体驱动因素。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-28T22:12:07.557

带有 Cocoa API 的 Objective-C 是要走的路。一旦你完成了这些，在 Ruby 和 Python 与 Cocoa API 之间也有桥梁。不过，我强烈建议您首先使用 Objective-C 学习 Cocoa API。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-04T16:25:15.610

我也刚买了一台 Mac 并且来自 .NET 开发背景。我尝试了一堆不同的语言和环境。如果您要编写 OS X 桌面软件，您将需要使用 Cocoa 和 Interface Builder。IB 没有 Windows 对应物，因为它与 Cocoa 紧密相关。这意味着您将需要同时学习 Cocoa，而通过查看代码来做到这一点并不容易。

Objective-C 是 Mac 的原生语言，它不如 C# 精致。您需要一段时间才能流利地阅读它，因为调用函数看起来不同。在您学习 Cocoa 之前，使用 Python 或 Ruby 代替 Objective-C 只会增加一层复杂性，但之后似乎相当可行。C# via Mono 工作正常，但我不认为整个 Cocoa# 桥都已实现。C# 工具的质量比 Visual Studio 低很多，MonoDevelop 在 Mac 上非常难看。我决定如果我想走这条路，那么我需要学习 Objective-C，但我选择了不同的方向。

如果您正在编写一个网站，那么您将拥有更多的灵活性。整个 Python 和 Ruby 文化都是可用的，尽管在安装一些 Python 库时会遇到一些麻烦。这是我选择的路线，因为我有一些基本的 Python 经验，并且技能几乎 100% 兼容 Linux。iTerm 是比终端更好的客户端。我不喜欢我尝试过的大多数代码编辑器，并从 Smultron 开始，它只不过是一个非常称职的带有语法突出显示的文本编辑器。肯定有很多选择。

无论您如何处理它，您都将花费大量时间学习。我经常偶然发现 Python 语法，但我终于掌握了它。SQLAlchemy (Python ORM) 文档几乎总是有一个打开的浏览器窗口。我也硬着头皮开始使用 Vim（特别是 MacVim），这实际上是一件有趣的事情，因为似乎总有另一个命令可以完全满足您的要求。（例如，我厌倦了去一行，按 $ 到最后，按 a 追加，然后按 enter 开始新行，所以我用 Google 搜索发现我可以按 o。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-28T22:08:26.990

看看[Mono](http://mono-project.com/Main_Page)项目

引用自[维基百科](http://en.wikipedia.org/wiki/Mono_(software))

> Mono 是由 Novell（以前由 Ximian）领导的一个项目，旨在创建符合 Ecma 标准、与 .NET 兼容的工具集，其中包括 C# 编译器和公共语言运行时。Mono 可以在 Linux、BSD、UNIX、Mac OS X、Solaris 和 Windows 操作系统上运行。

但我真的建议走 Cocoa 路线并获得 Aaron Hillegass 的书“Cocoa Programming for Mac OS X”

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-28T22:13:29.863

Objective-C, C, C++, Java, Ruby, Python, Php, ... 有很多语言/开发环境可供选择，包括 @epatel 所说的通过 Mono 的 C#。我想说语言的选择更多地取决于你正在开发什么，而不是你来自什么平台。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-05T03:18:20.580

Objective-C 和 Cocoa 是肯定要走的路。开发人员经常会误以为 Objective-c 没有“那么详细”或“没有微调”。但我可以向你保证，它是业内一些最佳应用程序背后的动力源。有一个明显的学习曲线。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-10T11:19:15.610

我会忘记单声道，它的效果不是很好。分发时，缓慢、错误和 system.drawing/forms 无法正常工作。

使用 c# 我会使用 monomac。您可以使用 c# 访问所有 mac api。这就像一个中途的房子。使用 NSWindow 代替 Forms，使用 NSView 代替控件。您使用图形上下文而不是绘图。缺点是文档有点薄而且成本很高。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-01T00:47:49.803

只要您愿意使用 Mono，C# 可用于 OS X。对于非 UI 和 Web 的东西，它应该可以正常工作。

对于桌面应用程序开发，我使用 REALbasic。它的语法和对象模型与 Visual Basic 非常相似。

对于业务级编程，我不确定 Cocoa/Objective-C 是否会是最高效的开始；它与 .NET 和/或 Java 完全不同。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-28T22:12:21.067

在相关说明中，

[Silverlight](http://silverlight.net/)是一种基于 Web 的“类闪存”技术，支持 Windows 和 Mac，您可以使用大多数 .net 语言进行编码。

# android - Android 从视频中剥离音频

> ID：598771
> 
> 赞同：9
> 
> 时间：2009-02-28T22:08:00.593
> 
> 标签：android, audio, video, video-processing, strip

在我的程序中，它获取 MP4 视频，我希望它输出 MP3（没有任何服务器端的东西。）由于 Android（和我的应用程序）需要在许多不同的硬件配置上运行，这意味着我可能无法使用 FFMPEG . 我知道这可能会消耗大量电池和处理能力，尤其是对于手机而言，但我需要为我的用户提供此选项。我找不到任何不使用 FFMPEG 的 Java 本地库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-08T17:15:25.910

MPEG_4 Part 14（.mp4 文件扩展名）是一种容器格式。换句话说，这指定了如何将多个媒体流打包在一起。处理容器格式的计算成本比压缩或解压缩视频低得多。如果在手机 ARM 处理器上读取 .mp4 文件并提取音频流的计算成本太高，我会感到惊讶。

我也没有看到任何立即合适的 Java 库。构建自己的库可能不会太难。解析容器格式比解压缩视频要简单得多。而且您确实有 ffmpeg 中的 libavformat 实现作为参考。MPEG4 Part 14 标准可以在这里找到：

[http://webstore.iec.ch/preview/info_isoiec14496-14%7Bed1.0%7Den.pdf](http://webstore.iec.ch/preview/info_isoiec14496-14%7Bed1.0%7Den.pdf)

和这里：

[http://standards.iso.org/ittf/PubliclyAvailableStandards/index.html](http://standards.iso.org/ittf/PubliclyAvailableStandards/index.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-10T14:01:38.917

我认为 FFMPEG 没有什么问题，因为[它显然可以在](http://packages.debian.org/sid/ffmpeg)Debian 支持的 11 种架构上运行。只有不支持的架构显然是 m68k，其他是移植到 FreeBSD 内核或 Hurd 内核的旧版本。根据我对 Android 的了解，它基于 ARM 的事实不会很快改变。

当然，围绕本机代码的 Java 包装器可能存在一些问题。是这个问题吗？我不是 Android 也不是 Java 程序员，但我确信您可以检测到平台并动态加载适当的本机包装器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-05T05:08:06.777

我没有使用它，但我下载并正在查看[IBM Toolkit for MPEG-4](http://www.alphaworks.ibm.com/tech/tk4mpeg4)的 API 。不过，它看起来对数据访问功能有点轻描淡写。不过，实现是纯java。看起来他们已经混淆了他们的编解码器 jar。

# vb.net - VB.NET 变量范围

> ID：598775
> 
> 赞同：2
> 
> 时间：2009-02-28T22:11:37.480
> 
> 标签：vb.net, variables, scope

在 case 语句中声明的变量是否是该 case 语句的本地变量 -

例如，在下面的代码中，这样使用 z 是否安全？还是编译器只是将 z 放在过程范围内？

```
 Select Case x
            Case 6
                Dim z As Integer = 6
            Case 7
                Dim z As Integer = 7
        End Select 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-28T22:15:32.587

这样做是安全的。您可以通过尝试编译以下内容来测试它：

```
Dim x As Integer
Select Case x
    Case 6
        Dim z As Integer = 6
    Case 7
        Dim z As Integer = 7
End Select
Console.Write(z) 
```

并注意你会得到一个编译错误。

当然，它会降低 IMO 的可读性。无论如何，也许您应该在程序开始时声明它。

# networking - 如何通过不可靠的网络同步媒体播放？

> ID：598778
> 
> 赞同：6
> 
> 时间：2009-02-28T22:12:34.310
> 
> 标签：networking, synchronization, audio-streaming

我希望我可以在一台计算机上播放音乐或视频，并让另一台计算机同步播放相同的媒体。例如，我可以同时听到两台计算机的扬声器，这听起来并不好笑。

我想通过 Wi-Fi 执行此操作，这有点不可靠。

从算法上讲，解决这个问题的最佳方法是什么？

## 编辑 1

两台计算机是否“播放”相同的媒体，或者一台“播放”媒体并将其流式传输到另一台，对我来说并不重要。

我确信这是一个容易解决的问题，因为我曾经看过一个 Wi-Fi 扬声器的演示。那是 5 年多以前的事了，所以我认为今天的技术应该让它变得更容易。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2011-06-29T02:19:49.593

（当我偶然发现这个问题时，我自己正在寻找一个可以做到这一点的应用程序，希望我不必自己写一个。）

## 概述

您引入了一点缓冲延迟并使用网络时间同步协议来对齐流。也就是说，您将流拆分为数据包，并在每个数据包上加上“稍后在时间 T 播放”的时间戳，其中 T 例如未来 50-100 毫秒（如果网络出现故障，则更多）。您将本地网络上的数据包发送（或多播）到合唱中的所有计算机。由于应用程序时钟已同步，所有计算机将同时播放声音。

请注意，可能还有其他因素，例如操作系统/驱动程序/声卡延迟，可能必须考虑到时间同步协议中。如果你不是太挑剔，同步协议可能就像一台计算机每秒发出哔哔声一样简单——再加上你在节拍中敲击另一台计算机上的一个键。这具有在操作系统/驱动程序/声卡层考虑任何其他滞后源的优点，但具有如果时钟变得不同步则需要手动干预的缺点。

* * *

## 混合手动网络同步

解决其他延迟来源的一种方法，无需持续手动干预，就是将此方法与标准网络时钟同步协议相结合；第一次在新机器上运行协议时：

1.  通过手动节拍式干预使机器同步
2.  使用网络时钟同步协议同步机器
3.  对于合唱中的每台机器，取两次同步的*差值*；这是每台机器的操作系统/驱动程序/声卡延迟，它们各自跟踪

现在，每当网络主干发生变化时，只需使用网络时钟同步协议 ( `#2`) 重新同步，并减去操作系统/驱动程序/声卡延迟，无需手动干预（除非您更改操作系统/驱动程序/声卡）。

* * *

## 自然模仿萤火虫同步

如果你在一个安静的房间里做这个并且所有的机器都有麦克风，你甚至不需要人工干预（`#1`），因为你可以让它们都遵循“萤火虫式”的同步算法。自然界中许多种类的萤火虫都会齐声闪烁。[http://tinkerlog.com/2007/05/11/synchronizing-fireflies/](http://tinkerlog.com/2007/05/11/synchronizing-fireflies/)描述了这些萤火虫使用的算法：“如果萤火虫收到邻居萤火虫的闪光，它会稍早闪烁。” 闪烁对应于哔哔声或蜂鸣声（通过声卡，而不是主板压电蜂鸣器！），看到对应于通过麦克风收听。

由于声速的原因，在非常大的房间距离上这可能有点尴尬，但我怀疑这会是一个问题（如果是这样，请降低哔哔声的速度）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-28T22:29:38.233

同步是相对于听者相对于每个扬声器的位置而言的。我认为网络的可靠性与这种同步的关系并不像音频流的内容那么重要。为了同步，您需要找到每个扬声器和听众之间的距离。找出每个值与最远说话者的值之间的差异。对于每 1.1 英尺的差异，将每个靠近的扬声器延迟 1 毫秒。这将确保音频流同时到达听众。这一切都假设一个开放区域，因为任何靠近您的场景都会产生音频波的反射并产生破坏性干扰。该区域内的物体也可能以较慢的速度传播声音，从而导致它们自己的声音延迟。

# iis - IIS7：查看特定网站使用的资源

> ID：598789
> 
> 赞同：2
> 
> 时间：2009-02-28T22:18:58.633
> 
> 标签：iis, iis-7, hosting

有没有办法查看 IIS 中托管的特定网站使用的资源（RAM、CPU 等）？类似于任务管理器的东西，但专门用于 IIS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-28T23:53:17.080

启动 IIS 管理器并选择您的服务器名称。在功能视图中，选择“iis”部分下方的“工作进程”。您可以看到所有当前正在运行的应用程序池；如果您双击应用程序池，您也可以看到当前活动（如果站点处于低负载状态，则不会显示任何内容，因为它处理它的速度太快而无法成为材料）。

如果您想要更多信息，或者您想要收集历史数据，您将不得不使用性能监视器。

# mysql - SQL查询按字母顺序对除一个以外的所有结果进行排序？

> ID：598793
> 
> 赞同：2
> 
> 时间：2009-02-28T22:23:56.157
> 
> 标签：mysql

我有一个小问题。我正在使用来自 SQL 数据库的结果填充选择标记。我想要的是最后一个添加为顶部条目，其余按字母顺序排序。

所以它会返回：

```
*----------*-------------*
developerID|developerName
*----------*-------------*
| 40       | ZZZ Dev     |
| 39       | A Dev       |
| 38       | Be New Dev  |
*----------*-------------* 
```

目前它只是按降序选择所有条目：

```
"SELECT developerName, developerID FROM developer ORDER BY developerID DESC" 
```

这很好，但没有我想要的那么有用。

使用纯 MySQL 可以实现我想要的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-28T22:31:50.007

假设定义何时添加开发人员的列是 developerAdded（某种时间戳）：

```
SELECT developerName, developerID, 1 AS ordering
    FROM developer
    WHERE developerAdded =  (SELECT MAX(developerAdded)
                                FROM developer)
UNION
SELECT developerName, developerID, 2 AS ordering
    FROM developer
    WHERE developerAdded != (SELECT MAX(developerAdded)
                                FROM developer)
ORDER BY ordering, developername; 
```

如果有其他一些神奇的方法可以确定最近添加的开发者（例如最大开发者 ID），请相应地调整子查询。

请注意，即使多个开发人员满足“最近添加”条件，此查询也可以正常工作；它们按字母顺序出现在已经存在较长时间的开发人员之前。

* * *

由于最近添加的开发者拥有最大的 developerID，因此修改后的查询应该是：

```
SELECT developerName, developerID, 1 AS ordering
    FROM developer
    WHERE developerID =  (SELECT MAX(developerID) FROM developer)
UNION
SELECT developerName, developerID, 2 AS ordering
    FROM developer
    WHERE developerID != (SELECT MAX(developerID) FROM developer)
ORDER BY ordering, developername; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-28T22:32:46.087

我认为最好的方法就是使用两个查询。显示与常规字母列表分开的最新项目，它也会出现在该列表中（因此显示两次）。这很容易做到，而且无论如何可以说更直观和可用。

否则，如果您真的坚持按照自己的方式使用单个 SQL 查询，您可以使用 UNION ALL 和 INTERSECT 或 EXCEPT 来做一些事情。但是 MySQL 不会在 UNION 的结果中保留任何顺序（参见[http://dev.mysql.com/doc/refman/5.1/en/union.html](http://dev.mysql.com/doc/refman/5.1/en/union.html)），因此这样的查询很可能会得到丑的快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-28T22:38:16.543

我建议不要尝试更改列表中项目的排序顺序，因为这会改变用户对列表的“预期行为”。

如果该页面的最常见用途通常处理“最后添加”的名称，您可以将其设为列表中的“默认”选择。因此，当页面出现时，列表中已经选择了最后添加的条目 - 但是如果他们打开列表，所有条目仍然按字母顺序排列，并且它将按预期运行。

这样，您的查询将保持简单，但您也可以实现“可用性”目标。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-08-04T19:41:27.130

另一种解决方案 WHERE main 是时间戳，它设置第一个项目，其他的按地点名称的字母顺序排序。

```
ORDER BY main=(SELECT MAX(main) FROM places WHERE user_ID = 7) DESC,place ASCSELECT ID,place,main FROM places WHERE user_ID = 7 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-28T22:27:42.513

```
SELECT developerName, developerID 
  FROM developer 
  ORDER BY developerID = {last_used},developerID DESC 
```

或者那里的一些变体。这个想法是做一个两部分排序，第一部分拉出最后一个使用的部分。

——马库斯

编辑时：反转感觉（未添加），因为您希望它位于顶部。

第二次编辑，回复我的第一次编辑以回应您对问题的编辑。

# .net - 为什么在执行此 XPath 请求时会抛出 XmlDocument？

> ID：598794
> 
> 赞同：0
> 
> 时间：2009-02-28T22:24:50.693
> 
> 标签：.net, xml, xpath

```
var xmlDoc = new XmlDocument();
xmlDoc.Load("XMLFile1.xml");
XmlNamespaceManager manager = new XmlNamespaceManager(xmlDoc.NameTable);
manager.AddNamespace("frbny", "urn:toto");
var curs = xmlDoc.SelectNodes("/frbny:DataSet/frbny:Series/frbny:Key/frbny:CURR");
var values = xmlDoc.SelectNodes("/frbny:DataSet/frbny:Series/frbny:Obs/frbny:OBS_VALUE"); 
```

为什么这段代码不起作用？它与第一个 xmlDoc.SelectNodes 一起抛出，说他没有找到命名空间管理器或 XsltContext...

我做了和这里一样的事情：http: [//support.microsoft.com/kb/318545](http://support.microsoft.com/kb/318545)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-28T22:29:02.960

您没有将命名空间管理器传递给选择节点调用，而是在 xpath 中使用命名空间。

```
var curs = xmlDoc.SelectNodes("/frbny:DataSet/frbny:Series/frbny:Key/frbny:CURR", manager); 
```

将防止异常。

# java - 允许带空白的 Java 列表

> ID：598796
> 
> 赞同：1
> 
> 时间：2009-02-28T22:25:07.993
> 
> 标签：java, list, outofrangeexception

这可能真的很简单，但我真的无法在谷歌上正确地用词。我有一个 ArrayList 保存每个线程的信息。每个线程都有自己的 ID。所以，一开始：

```
myList.add(theIdOfTheThread, new InfoForTheThread()); //Add new thread info at index theIdOfTheThread 
```

当我想要信息时：

```
myList.get(myId); //The info for the thread 
```

但是，每当较低的线程完成并删除其条目等时，我总是会得到 OutOfRangeExceptions。所以，我确信必须有一个更好的类可以用于此，我可以将条目放在我想要的任何索引处，然后拉取它们在我想要的任何索引上，他们都会留下来。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-28T22:33:21.017

对于这种访问，您应该真正使用数组，或者更好的是 HashMap。为此使用列表非常低效且不必要地复杂。如果您从列表中间删除了一个项目，那么所有内容都会向下移动，并且您删除的索引上方的所有索引都需要向下移动。

InfoForTheThread 数组不会受此影响，但您需要在开始之前知道所需数组的大小。

改用 HashMap - 您可以使用整数作为键，删除不会导致重新排序。

```
HashMap<Integer,InfoForTheThread> myInfos = new HashMap<Integer,InfoForTheThread>( 10 ); 
```

添加、检索和删除条目：

```
myInfos.put( Integer.valueOf( 4 ), new InfoForTheThread() );
InfoForTheThread infoForFour = myInfos.get( Integer.valueOf( 4 ) );
InfoForTheThread infoForFour = myInfos.remove( Integer.valueOf( 4 ) ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-28T22:30:25.953

尝试哈希表。您可以使用线程 ID 作为键，然后将您的信息作为值插入。

# repository - 我在哪里可以找到 UML 图（而不是重新发明轮子）？

> ID：598798
> 
> 赞同：0
> 
> 时间：2009-02-28T22:25:59.973
> 
> 标签：repository, diagram, uml, analysis-patterns

我目前正在尝试绘制一组 UML 图来表示产品、报价、订单、交付和付款。这些图表可能是由我之前的一百万开发人员发明的。

1.  是否有任何努力来标准化这些常见事物的建模？甚至是特定领域的建模（例如汽车制造）。
2.  你知道是否有某种存储库包含 UML 图（类图、序列图、状态图......）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-28T22:54:25.927

为某些领域记录（而不是标准化）模型是一种运动。这些被称为**分析模式**，是 Martin Fowler 提出的一个术语。他实际上写了一本叫做[分析模式](https://rads.stackoverflow.com/amzn/click/com/0201895420)的书。此外，他在他的网站上有一个[专门的部分](http://www.martinfowler.com/articles.html#id22541)，他在其中展示了其中一些模式以及 UML 图。

也许您会找到一些**灵感**来帮助您对您的领域进行建模。我强调了灵感这个词，因为我认为不同的企业有不同的要求，尽管他们经营同一个领域，所以你可能读到的解决方案可能不适合你的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-01-12T00:41:28.423

有很多工具可以两者兼得——但它们通常不是免费的！Microsoft Visio 两者兼而有之，而且是可扩展的。对于 UML 人工制品，它们带有自动生成器到 VB/Java 模板代码中 - 但您可以修改它们以自动生成任何代码。有许多 Visio 用户创建了用作模板的模型。

Artisan Enterprise 是迄今为止最强大的 UML 工具（但它并不便宜）。

有些人会争辩说 Rational Rose 或 RUP 是更好的工具

但是对于汽车制造和其他类似的现实世界建模，迄今为止最好的工具是 Mathworks Simulink（不是因为它是最昂贵的工具之一）。它是迄今为止最好的工具，因为您可以为模型制作动画 - 您可以在生成 slik 代码之前证明模型工作（在您关心的任何语法/语言/其他模型中推送它）！您可以获得大约 180 英镑的学生执照；“真品”售价 4000 英镑（用于与汽车相关的人工制品）。带有所有装饰的完整产品约为 15,000 英镑。Simulink 也可以使用类似 C 的语言进行扩展，尽管有一个 .Net 插件和 API 可以使用大量其他语言。而且，就像 Visio 一样，有一个全球论坛创建可销售、共享软件和免费软件真实世界模型模板。许多全球汽车制造商已经在使用 Simulink。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-12-27T14:55:18.527

我认为 MiniQuark 问题非常好，迟早会由 Omondo、Rational IBM 等供应商提供......用户不仅需要工具，他们需要开箱即用的模型，只需将他们的业务规则添加到现有定义良好的架构。如果工作已经完成，为什么要从头开始开发新架构？在 Java 中，我们使用了大量的框架、现有的方法等……那么为什么不提高一层并重用架构呢？今天不可能猜测一个项目将如何发展，每天都有新的需求出现。因此，我们需要一个稳定的架构，该架构之前已经过测试并且是可扩展的。我见过很多项目从一个不错的架构开始，然后在项目中间意识到这不是最好的，然后改变他们的架构。重命名类，拆分类，创建包等......在第一次迭代之后它变得一团糟。你能想象我们在 10 次迭代后发现了什么吗？一团糟！如果使用之前已经测试过的预定义模型，则可以避免这种混乱，因为已经创建了缺少的类或包等，并且对于体系结构而言，只有类重命名就足够了。添加业务规则方法将结束部署测试之前的编码阶段。将已经创建，并且仅类重命名就足以用于架构目的。添加业务规则方法将结束部署测试之前的编码阶段。将已经创建，并且仅类重命名就足以用于架构目的。添加业务规则方法将结束部署测试之前的编码阶段。

我认为模式和与 UML 模型重用性相关的初始问题之间存在混淆。今天没有任何可重复使用的开箱即用模型已经开发出来。这真的很奇怪，但这项工作从未完成或从未分享过。Omondo 曾试图发起一项倡议，但没有真正成功。我听说他们正在开发数百个开箱即用的模型，这些模型将开源并免费提供给社区。我希望这会完成，因为这对我来说真的很重要，并且会在项目开始时为我节省很多时间。

# c# - Silverlight 和 VS 2005 或 VS 2008 速成版

> ID：598812
> 
> 赞同：0
> 
> 时间：2009-02-28T22:36:36.750
> 
> 标签：c#, visual-studio, silverlight, silverlight-2.0

是否可以使用 Visual Studio 2005 Professional 或 Visual Studio 2008 Express Edition 在 C# 中创建 silverlight 内容？我在 Microsoft 的网站上找不到答案。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-28T22:41:53.930

我相信你可以用 2008 快递。

[确保将 SP1 安装到 2008，然后从此处](http://silverlight.net/GetStarted/)安装其他所有内容（它也有 SP1 下载）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-28T22:47:14.260

我认为你应该看看 Visual Web Developer Express 和[Silverlight Tools](http://www.microsoft.com/downloads/details.aspx?familyid=C22D6A7B-546F-4407-8EF6-D60C8EE221ED&displaylang=en)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-01T11:02:30.483

是，如果速成版是[Visual Web Developer 2008 速成版](http://www.microsoft.com/express/vwd/)。以下是微软 Silverlight 开发团队负责人的[这篇博文中的一段话：](http://weblogs.asp.net/scottgu/archive/2008/11/16/update-on-silverlight-2-and-a-glimpse-of-silverlight-3.aspx)

> 开发人员可以使用 VS 2008 或免费的 Visual Web Developer 2008 Express 来打开和编辑 Silverlight 2 项目，并获得一个强大的、以代码为中心的 .NET 开发环境。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-01T13:04:49.610

2005 我认为你只能创建 1.0 项目；是的，您可以在 VS 2008 express（可视化 Web 开发人员）中创建 SL 2.0 项目，但您需要 SP1，您需要的一切工具都[在这里](http://silverlight.net/GetStarted/)

# python - Python HTML 移除

> ID：598817
> 
> 赞同：6
> 
> 时间：2009-02-28T22:39:55.183
> 
> 标签：python, string

如何从 Python 中的字符串中删除所有 HTML？例如，我该如何转：

```
blah blah <a href="blah">link</a> 
```

进入

```
blah blah link 
```

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-03-01T02:00:18.930

当您的正则表达式解决方案遇到困难时，请尝试这个超级简单（且可靠）[的 BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)程序。

```
from BeautifulSoup import BeautifulSoup

html = "<a> Keep me </a>"
soup = BeautifulSoup(html)

text_parts = soup.findAll(text=True)
text = ''.join(text_parts) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-03-01T14:45:46.857

还有一个名为[stripogram](http://pypi.python.org/pypi/stripogram)的小型库，可用于去除部分或全部 HTML 标签。

你可以像这样使用它：

```
from stripogram import html2text, html2safehtml
# Only allow <b>, <a>, <i>, <br>, and <p> tags
clean_html = html2safehtml(original_html,valid_tags=("b", "a", "i", "br", "p"))
# Don't process <img> tags, just strip them out. Use an indent of 4 spaces 
# and a page that's 80 characters wide.
text = html2text(original_html,ignore_tags=("img",),indent_width=4,page_width=80) 
```

因此，如果您想简单地去除所有 HTML，请将 valid_tags=() 传递给第一个函数。

您可以在[此处找到文档](http://zope.org/Members/chrisw/StripOGram/readme)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-02-28T22:43:17.450

您可以使用正则表达式删除所有标签：

```
>>> import re
>>> s = 'blah blah <a href="blah">link</a>'
>>> re.sub('<[^>]*>', '', s)
'blah blah link' 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-01T20:42:41.837

如果属性中包含**“** **”** ，则正则表达式、BeautifulSoup、html2text**不起作用**。请参阅[“>”（U+003E GREATER-THAN SIGN）是否允许在 html 元素属性值中？](https://stackoverflow.com/questions/94528/is-u003e-greater-than-sign-allowed-inside-an-html-element-attribute-value)**`>`**

在这种情况下，基于“HTML/XML 解析器”的解决方案可能会有所帮助，例如，[@MrTopf](http://pypi.python.org/pypi/stripogram) [建议的条形图](https://stackoverflow.com/questions/598817/python-html-removal/599924#599924)确实有效。

这是基于[ElementTree](http://effbot.org/zone/element-index.htm)的解决方案：

```
####from xml.etree import ElementTree as etree # stdlib
from lxml import etree

str_ = 'blah blah <a href="blah">link</a> END'
root = etree.fromstring('<html>%s</html>' % str_)
print ''.join(root.itertext()) # lxml or ElementTree 1.3+ 
```

输出：

```
blah blah link END 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-02-28T22:52:16.587

试试[美丽的汤](http://www.crummy.com/software/BeautifulSoup/)。扔掉除了文字之外的所有东西。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-01T18:38:03.587

[html2text](http://www.aaronsw.com/2002/html2text/)会做这样的事情。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-29T17:41:43.330

我刚写了这个。我需要它。它使用 html2text 并采用文件路径，尽管我更喜欢 URL。html2text 的输出存储在 TextFromHtml2Text.text 中，打印、存储、喂给您的宠物金丝雀。

```
import html2text
class TextFromHtml2Text:

    def __init__(self, url = ''):
        if url == '':
            raise TypeError("Needs a URL")
        self.text = ""
        self.url = url
        self.html = ""
        self.gethtmlfile()
        self.maytheswartzbewithyou()

    def gethtmlfile(self):
        file = open(self.url)
        for line in file.readlines():
            self.html += line

    def maytheswartzbewithyou(self):
        self.text = html2text.html2text(self.html) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-22T17:31:08.557

有一个简单的方法：

```
def remove_html_markup(s):
    tag = False
    quote = False
    out = ""

    for c in s:
            if c == '<' and not quote:
                tag = True
            elif c == '>' and not quote:
                tag = False
            elif (c == '"' or c == "'") and tag:
                quote = not quote
            elif not tag:
                out = out + c

    return out 
```

这个想法在这里解释：http: [//youtu.be/2tu9LTDujbw](http://youtu.be/2tu9LTDujbw)

你可以在这里看到它的工作：http: [//youtu.be/HPkNPcYed9M ?t=35s](http://youtu.be/HPkNPcYed9M?t=35s)

PS - 如果您对课程感兴趣（关于使用 python 进行智能调试），我给您一个链接：[http](http://www.udacity.com/overview/Course/cs259/CourseRev/1) ://www.udacity.com/overview/Course/cs259/CourseRev/1 。免费！

别客气！:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-28T23:23:36.823

```
>>> import re
>>> s = 'blah blah <a href="blah">link</a>'
>>> q = re.compile(r'<.*?>', re.IGNORECASE)
>>> re.sub(q, '', s)
'blah blah link' 
```

# php - 使我的 LAMP 网站下载速度更快的最佳技术是什么？

> ID：598819
> 
> 赞同：2
> 
> 时间：2009-02-28T22:41:15.553
> 
> 标签：php, apache, optimization, lamp

我为我的工作建立了一些网站，没什么大不了的，主要是人们在离开办公室时可以访问和使用的小工具。作为开发人员，我不是很有经验，但我喜欢修补很多东西，我想知道是否有人可以对我的网站进行任何巧妙的小调整，以使它们下载得更快？我们在南美有一个办公室，互联网连接很差，经常抱怨我的网站使用时间太长。到目前为止，我发现以下站点非常有用，另一个办公室的人说他们看到了服务的不同[www.dev-explorer.com/articles/apache-optimisation](http://www.dev-explorer.com/articles/apache-optimisation)

任何人都知道我可以做更多的点点滴滴吗？

任何帮助深表感谢。

提前致谢

约翰

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-28T22:44:22.737

查看[YSLOW](http://developer.yahoo.com/yslow/)并阅读 Yahoo Dev 博客。通过优化前端可以做很多事情。

*   限制http请求数（css、js、图片）
*   在 apache 中使用 mod_deflate 压缩您的内容
*   尽可能使用远期过期标头
*   使您的 HTML 标记尽可能精简

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-01T02:14:47.693

有两个帮助的东西（来自 YSlow）是**CDN**（内容交付网络）......和**用于静态内容的无 cookie 服务器**。

即使您可以将图像推送到另一台服务器上，您也可以更快地加载您的 HTML 内容，而图像下载可以在其他服务器的后台进行。

如果可能的话，尽量让这些其他服务器（用于图像、CSS 和脚本）不使用 cookie，这会节省一点点，但听起来你正试图挤出最后一滴水。;-)

当然，***缓存***除 HTML 之外的所有内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-01T02:17:31.103

如前所述，我支持 yslow，并且更好（因为 yslow 是基于此）[雅虎卓越绩效团队最佳实践](http://developer.yahoo.com/performance/rules.html/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-28T22:50:13.533

几个简单的技巧：

首先，将自己限制在一个 CSS 和一个 Javascript 文件中。不再。如果您有多个将它们压缩成一个（每个）。理想情况下，您的 Javascript 也应该被缩小。我最近一直在使用 JSMin。

有一些更先进的技术可以进一步优化这一点。您将 expires 标头设置为远在将来，这样浏览器就不会经常下载它。要推送更改，您需要更改指向 css/js 文件的链接。您可以使用 Apache mod_rewrite 和一个小的 PHP 脚本来做到这一点。

更多内容[请参阅什么是强制浏览器重新加载缓存的 CSS/JS 文件的优雅方式？](https://stackoverflow.com/questions/118884/what-is-an-elegant-way-to-force-browsers-to-reload-cached-css-js-files)

您还可以对图像使用过期技巧。

其次，gzip 你的内容。通常，您在 PHP 中要做的就是启动所有脚本：

```
ob_start('ob_gzhandler'); 
```

这会打开输出缓冲（无论如何都是好主意），如果浏览器说它支持 gzip 编码，您的脚本将在发送到客户端之前被 gzip 压缩。

# user-interface - wxPython 对话框

> ID：598821
> 
> 赞同：0
> 
> 时间：2009-02-28T22:41:23.447
> 
> 标签：user-interface, wxpython, icons, dialog

我正在 wxPython 中编写一个显示错误对话框的类。这是我的代码：

```
import wx

class Error:
   def __init__(self, number, string):
      self.error_type = number
      self.error_message = string
      self.choose_error()

   def choose_error(self):
      if self.error_type == 1:
         self.DisplayMessage1()
      elif self.error_type == 2:
         self.DisplayMessage2()
      elif self.error_type == 3:
         self.DisplayMessage3()
      elif self.error_type == 4:
         self.DisplayMessage4()

   def DisplayMessage1(self):
      dial = wx.MessageDialog(None, self.error_message, 'Info', wx.OK)
      dial.ShowModal()

   def DisplayMessage2(self):
      dial = wx.MessageDialog(None, self.error_message, 'Error', wx.OK | 
         wx.ICON_ERROR)
      dial.ShowModal()

   def DisplayMessage3(self):
      dial = wx.MessageDialog(None, self.error_message, 'Question', 
         wx.YES_NO | wx.NO_DEFAULT | wx.ICON_QUESTION)
      dial.ShowModal()

   def DisplayMessage4(self):
      dial = wx.MessageDialog(None, self.error_message, 'Warning', wx.OK | 
         wx.ICON_EXCLAMATION)
      dial.ShowModal() 
```

如何将默认图标更改为自定义图标？我试图用 wx.Icon 替换它们，但它不起作用。wxPython 中的对话框是否仅限于我上面使用的图标？在 Mac OS X 上，它们似乎无法正确显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-01T10:27:34.437

参数 like `wx.ICON_ERROR`or`wx.ICON_EXCLAMATION`不是真正的图标，而是`wx.MessageDialog`构造函数的整数标志。这些消息对话框是通过操作系统调用本地呈现的，因此它们看起来不同，例如在 Windows 和 Mac OS X 上。

由于 wxWidgets 是为 Windows API 设计的，因此`MessageDialog`参数非常类似于 Windows API [MessageBox 函数](http://msdn.microsoft.com/en-us/library/ms645505.aspx)样式标志（`MB_ICONERROR`、`MB_ICONEXCLAMATION`等）。

如果你想使用你自己的对话框图标，你只需要实现你自己的消息对话框类，基于`wx.Dialog`.

# php - 使用 PHP DOM 的具有混合内容的 XML 节点

> ID：598829
> 
> 赞同：2
> 
> 时间：2009-02-28T22:46:36.197
> 
> 标签：php, xml, dom

有没有办法创建一个包含混合 XML 内容和 PHP DOM 的节点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-28T23:01:56.377

如果我理解正确，您需要类似于 JavaScript 中的 innerHTML 的东西。有一个解决方案：

```
$xmlString = 'some <b>mixed</b> content';

$dom = new DOMDocument;
$fragment = $dom->createDocumentFragment();
$fragment->appendXML($xmlString);
$dom->appendChild($fragment);
// done 
```

总结一下。你需要的是：

*   [DOMDocument::createDocumentFragment()](http://www.php.net/manual/en/domdocument.createdocumentfragment.php)
*   [DOMDocumentFragment::appendXML()](http://www.php.net/manual/en/class.domdocumentfragment.php)

尽管您没有问过它，但我将告诉您如何获取 DOM 节点的字符串表示，而不是整个 DOM 文档：

```
// for a DOMDocument you have
$dom->save($file);
$string = $dom->saveXML();

$dom->saveHTML();
$string = $dom->saveHTMLFile($file);

// For a DOMElement you have
$node = $dom->getElementById('some-id');

$string = $node->C14N();
$node->C14NFile($file); 
```

这两种方法目前没有记录。

# domain-driven-design - 在 DDD 中，值 对象的实际优势是什么？

> ID：598832
> 
> 赞同：16
> 
> 时间：2009-02-28T22:48:07.767
> 
> 标签：domain-driven-design, entities, value-objects

到目前为止，我已经了解实体对象有一个 ID，而值对象没有，但在最常见的示例中，您有一个附有地址值对象的人员实体。创建单独的地址对象而不是仅将地址属性保留在 Person 实体中的最大优势是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-18T05:23:39.847

除了已经提到的事情之外，[Greg Young](http://weblogs.asp.net/bsimser/archive/2008/08/16/alt-net-canada-day-2-ddd-and-more-d.aspx)还强调了一个事实，即由于它们是不可变的，您可以在创建时验证它们，而不必再担心验证。如果状态不能改变，那么你知道它总是有效的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-28T23:00:56.253

*   值对象可以用作其他类中其他方法的参数
*   它可以让你的设计更清晰
*   它可能有助于性能优化（例如：fly-weight 模式）
*   值对象可以在不同的实体中重用。（例如：具有地址值对象的用户和位置实体。

不要忘记“没有 id”并不是值对象和实体之间的唯一区别，不可变也很重要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-28T22:58:44.980

将其视为可重用的组件。您可以毫不费力地将其变成家庭住址、工作地址。您可以使用它来将其他系统与人员实体分离。假设您介绍了一个商业实体。它也将有一个地址。

与这个主题相关的是另一个重要主题：组合与继承

# windows - 如何以编程方式实现“打开文件位置”行为（c++ builder）

> ID：598835
> 
> 赞同：0
> 
> 时间：2009-02-28T22:50:21.537
> 
> 标签：windows, filesystems, c++builder

在 Windows Media Player 中，您可以右键单击音乐文件并单击“打开文件位置”，它会打开一个资源管理器窗口，其中包含选定的文件。

我希望能够在应用程序中做到这一点。因此，给定一个文件名（作为 ansi 字符串），我希望能够在新的资源管理器窗口中转到该文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-28T23:16:04.033

尝试使用选项**/select, `<`selected file path`>`**启动 explorer.exe 。就像是：

```
explorer /n, /select,c:\windows\notepad.exe 
```

它应该打开新的资源管理器窗口，打开**c:\windows**文件夹并选择**notepad.exe**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-28T22:59:01.890

您应该使用该[`ShellExecute()`](http://msdn.microsoft.com/en-us/library/bb762153(VS.85).aspx)功能。像这样的东西应该工作：

```
ShellExecute(handle, "explore", @"C:\WINDOWS", NULL, NULL, SW_SHOWNORMAL); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-01T11:37:55.827

这是超过 16 年的 Win2 常见问题解答 (!)

在发布 C 代码已发布 25000 次的如此基本的问题之前，先在 Google Groups 上搜索...

# windows - 如何为 Windows 应用程序注册自定义键盘快捷键

> ID：598837
> 
> 赞同：8
> 
> 时间：2009-02-28T22:52:05.417
> 
> 标签：windows, registry, keyboard-shortcuts

我想创建一个 Windows 实用程序应用程序，可以使用键盘快捷键从任何其他应用程序中随时调用它，例如：

• `Win`+`T`

• `Ctrl`+`T`

• `Alt`+`T`

• `Ctrl`+ `Alt`+`T`

• `Ctrl`+ `Shift`+`T`

**我可以使用哪些组合键以及如何在 Windows 注册表中设置它们？**

（如果快捷方式被其他应用程序使用，它当然应该不起作用。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-01T00:57:01.857

当您的应用程序启动调用此 Windows API 时以编程方式执行此操作的选项：

```
RegisterHotKey(IntPtr hwnd, int id, int fsModifiers, int vk); 
```

并取消注册调用此 API：

```
UnregisterHotKey(IntPtr hwnd, int id); 
```

两者都存在于`user32`API中

[http://www.pinvoke.net/search.aspx?search=RegisterHotKey&namespace=[全部]](http://www.pinvoke.net/search.aspx?search=RegisterHotKey&namespace=%5BAll%5D)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-28T23:16:25.733

如果您的应用程序（或其快捷方式）在您的桌面上可用，您可以右键单击以获取上下文菜单，选择属性，然后在此处输入快捷键。只需单击快捷键文本字段，然后按所需的快捷键。

我已将`WIN`+分配`C`给我的计算器，并将`WIN`+分配`V`给我的音量控制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-01T00:48:55.230

如果您需要更高级的 shell 快捷方式提供的方案，您应该从阅读[Win32 Hooks](http://msdn.microsoft.com/en-us/library/ms997537.aspx)和[Hooks Overview](http://msdn.microsoft.com/en-us/library/ms632589(VS.85).aspx)开始。

更具体地说，您需要使用该函数添加一个`WH_KEYBOARD`钩子。[`SetWindowsHookEx`](http://msdn.microsoft.com/en-us/library/ms644990(VS.85).aspx)完成后，您还需要解开挂钩[`UnhookWindowsHookEx`](http://msdn.microsoft.com/en-us/library/ms644993(VS.85).aspx)。

Dino Esposito 有一篇旧文章如何通过一些 Win32 互操作[在 .NET 中执行 Windows Hooks 。](http://msdn.microsoft.com/en-us/magazine/cc188966.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-30T12:04:33.273

恐怕这不是您可以通过简单地在注册表中设置值来完成的事情，正如在调用某些 Windows API 例程来实现这一点所必需的其他答案中所指出的那样。

# selenium - 使用 Selenium 检索数据

> ID：598840
> 
> 赞同：1
> 
> 时间：2009-02-28T22:55:27.827
> 
> 标签：selenium, information-retrieval

我想从我附近的丰业银行分行获取营业时间。

基本 URL 是： http: [//maps.scotiabank.com/](http://maps.scotiabank.com/)

那我，

单击“分支”单选框。

点击“周六开放”复选框。

在搜索框中输入“B3H 1M7”（我的邮政编码）。

单击搜索按钮。

单击弹出的第一个结果（Micmac 购物中心）。

将营业时间存储为变量（称为 businessHours）。

现在我被困住了。

如何将分配给变量的数据导出到文本文件或以后可以查看的其他任何地方？我不确定 Selenium 是否可以做到这一点，但如果不是，你能告诉我如何做到这一点的替代方法吗？

下面是我拥有的当前 Selenium 脚本的 HTML 代码。

```
<tr>
    <td>open</td>
    <td>/en/index.php</td>
    <td></td>
</tr>
<tr>
    <td>click</td>
    <td>rb_branch</td>
    <td></td>
</tr>
<tr>
    <td>click</td>
    <td>cb_saturday</td>
    <td></td>
</tr>
<tr>
    <td>type</td>
    <td>input_address</td>
    <td>B3H 1M7</td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>btn_search_address</td>
    <td></td>
</tr>
<tr>
    <td>click</td>
    <td>result0</td>
    <td></td>
</tr>
<tr>
    <td>storeTextPresent</td>
    <td>Mon:    9:30 AM - 5:00 PM    Thu:    9:30 AM - 8:00 PM
<br />Tue:    9:30 AM - 5:00 PM    Fri:    9:30 AM - 5:00 PM
<br />Wed:    9:30 AM - 5:00 PM    Sat:    9:00 AM - 1:00 PM</td>
    <td>businessHours</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-28T23:10:17.263

这是一个想法 - 如果您不能写入文件或数据库，您当然可以编写快速的小型 Web 应用程序，并让 selenium 输入数据并单击提交！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-01T13:16:56.900

假设您只想使用 Selenium Core 和/或 IDE 并且想要保留此信息，那么您可以尝试通过 javascript调用**将其发送到某种类型的免费在线服务。**Selenium 可以通过 eval 调用执行任意一段 javascript（[此处](http://www.nabble.com/How-to-call-Javascript-functions-from-Selenium-HTML-TestCase---td16077211.html)为示例）。

一个可能的建议是**Twitter**帐户（或其他具有简单 API 的免费在线公共服务）。**[Twitlet](http://pcsplace.com/web-20/twitlet-easiest-way-to-update-twitter-status-from-any-browser/)**生成的小书签的修改可以将您想要的任何信息发布到 twitter 帐户。

另一种选择可能是**谷歌文档**或其他一些在线笔记服务。

如果您真的不需要 Selenium 来保存信息，但希望在执行结束时将其聚合并显示，您可以将每组营业时间存储在一个变量中，随时追加，然后**让您的最后一个操作成为评估将弹出一个带有结果的警报框的javascript**。然后，您可以手动使用警报框中的数据。

***只是一些想法。祝你好运。***

编辑-

这是一个存储值并检索它以及通过谷歌主页上的 eval 和 runscript 方法执行任意 javascript 的示例：

```
<tr>
    <td>open</td>
    <td>/</td>
    <td></td>
</tr>
<tr>
    <td>type</td>
    <td>q</td>
    <td>dog</td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>btnG</td>
    <td></td>
</tr>
<tr>
    <td>storeValue</td>
    <td>q</td>
    <td>searchWord</td>
</tr>
<tr>
    <td>assertValue</td>
    <td>q</td>
    <td>${searchWord}</td>
</tr>
<tr>
    <td>assertEval</td>
    <td>alert(&quot;${searchWord}&quot;);</td>
    <td>null</td>
</tr>
<tr>
    <td>runScript</td>
    <td>alert(&quot;${searchWord}&quot;);</td>
    <td></td>
</tr>
<tr>
    <td>assertAlert</td>
    <td>dog</td>
    <td></td>
</tr> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-28T11:06:56.717

您可以从 Selenium IDE 导出测试以与 Selenium RC 一起使用。然后，使用您选择的编程语言，您可以写入文件或数据库。

# c# - 如何开始构建 Web 浏览器？

> ID：598841
> 
> 赞同：100
> 
> 时间：2009-02-28T22:55:47.467
> 
> 标签：c#, browser

我决定从头开始构建一个网络浏览器。在开始之前我应该​​了解哪些**现代 Web 浏览器的常见功能、架构和特性？**

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2009-02-28T23:54:07.640

好吧，把它分解成碎片。什么是网络浏览器？它有什么作用？它：

*   **获取外部内容。** 所以你需要一个 HTTP 库或（不推荐）自己编写。HTTP 协议有很多复杂性/微妙之处，例如处理过期标头、不同版本（尽管现在大多是 1.1）等；
*   **处理不同的内容类型。** 有一个 Windos 注册表可以用于这种事情，你可以捎带。我说的是根据 MIME 类型解释内容；
*   **解析 HTML 和 XML**：创建一个 DOM（文档对象模型）；
*   **解析和应用 CSS**：这需要了解所有属性、所有度量单位以及可以指定值的所有方式（例如“边框：1px 纯黑色”与单独的边框宽度等属性）；
*   **实现 W3C 视觉模型**（这是真正的关键）；和
*   **有一个 Javascript 引擎**。

简而言之，这基本上就是一个 Web 浏览器。现在，其中一些任务非常复杂。即使是听起来容易的声音也可能很难。以获取外部内容为例。您需要处理以下用例：

*   要使用多少个并发连接？
*   向用户报告错误；
*   代理；
*   用户选项；
*   等等

我和其他人共同提高我们的眉毛的原因是渲染引擎很难（而且，正如有人指出的那样，他们的开发已经花费了很多年）。主要的渲染引擎有：

*   **Trident：**微软为 Internet Explorer 开发的；
*   **Gecko：**在 Firefox 中使用；
*   **Webkit：**用于 Safari 和 Chrome 0-27；
*   **KHTML：**用于 KDE 桌面环境。Webkit 几年前从 KHTML 派生出来的；
*   **Elektra：**用于 Opera 4-6；
*   **Presto：**用于 Opera 7-12；
*   **Blink：**用于 Chrome 28+、Opera 15+、webkit fork；

前三个必须被认为是当今使用的主要渲染引擎。

Javascript引擎也很难。其中有几个往往与特定的渲染引擎相关联：

*   **SpiderMonkey：**用于 Gecko/Firefox；
*   **TraceMonkey：**将在 Firefox 3.1 中取代 SpiderMonkey，并引入 JIT（即时）编译；
*   **KJS：**由 Konqueror 使用，与 KHTML 绑定；
*   **JScript：** Trident的Javascript引擎，用于Internet Explorer；
*   **JavascriptCore：** Safari浏览器在Webkit中使用；
*   **SquirrelFish：**将在 Webkit 中使用，并像 TraceMonkey 一样添加 JIT；
*   **V8：**谷歌在 Chrome 和 Opera 中使用的 Javascript 引擎；
*   Opera（12.X 及更低版本）也使用它自己的。

当然还有所有用户界面的东西：页面之间的导航、页面历史记录、清除临时文件、输入 URL、自动完成 URL 等等。

这是**很多**工作。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2009-03-01T05:01:34.343

听起来像是一个非常有趣的项目，但它需要你投入巨大的努力。

这不是一件容易的事，但从学术的角度来看，你可以从中学到**很多**东西。

您可以检查的一些资源：

*   [HTMLayout.NET](https://terrainformatica.com/a-homepage-section/htmlayout/)：快速、轻量级和可嵌入的 HTML/CSS 渲染器和布局管理器组件。
*   [GeckoFX](https://code.google.com/archive/p/geckofx)：将 Mozilla Gecko 浏览器控件嵌入任何 Windows 窗体应用程序的 Windows 窗体控件。
*   [SwiftDotNet](https://code.google.com/archive/p/swiftdotnet) : 基于 C# 中 Webkit 的浏览器
*   [Gecko DotNetEmbed](https://mxr.mozilla.org/seamonkey/source/embedding/wrappers/DotNETEmbed/)
*   [壁虎＃](https://www.mono-project.com/GeckoSharp/)
*   [渲染网页 - 一步一步](https://friendlybit.com/css/rendering-a-web-page-step-by-step/)

但从*现实*的角度来看，从头开始编写代码所需的巨大努力让我想起了这部漫画：

[![](https://i.stack.imgur.com/CV3DQ.png)](http://www.geekherocomic.com/2009/02/25/coding-overkill/)
[（来源：[geekherocomic.com](http://www.geekherocomic.com/comics/2009-02-25-coding-overkill.png)）]

祝你好运 ：-）

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-03-20T04:45:00.430

大多数现代网络浏览器都是庞然大物，而且设计可能相当糟糕，因为它们（和网络本身）以一种相当随意的方式发展。

您需要首先使项目的**目标**（以及您希望实现的目标）非常明确。这是您只是为了好玩而做的事情，还是您希望其他人使用您的浏览器？如果你期望别人使用它，他们的动机是什么？期望你从头开始开发一个新的浏览器，每个人都可以用来替代 Chrome、Safari、Firefox、IE、Opera 等是不现实的。所有这些项目都有 10-15 年的领先优势你，当你赶上他们时，他们将比你领先 10-15 年。再加上他们背后有更多的人力，所以如果你想让你的项目成功，你会在某个时候需要这种人力。

这也是苹果和谷歌这两家拥有大量资源的大公司没有从零开始的原因。甚至微软都不是从头开始的。最初的 IE 基于 Mosaic。今天仍然存在的唯一从头开始的重要浏览器是**Opera**、**Konqueror**和**Lynx**，不幸的是，它们的市场份额都很小。让我们暂时忘记 Lynx，因为它是一个纯文本浏览器，大概它仍然存在的唯一原因是因为它服务于特定的利基市场。Opera 可以说是有史以来最好的浏览器之一，但它的市场份额从来没有很大，所以请记住，成功和创新不是一回事。KHTML 是 Konqueror 背后的引擎，它本身从未变得非常成功，但却是 Apple 和 Google 都使用的 WebKit 的基础。我想肯定有人会争辩说，如果从来没有制作过 KHTML，那么 Safari 或 Chrome 都不存在。有趣的是，KHTML 和 Opera 大部分都是由在奥斯陆同一栋大楼工作的挪威程序员制作的。

您需要像构建操作系统一样构建 Web 浏览器，因为这本质上就是浏览器——它是用于运行 Web 应用程序的操作系统。和操作系统一样，网络浏览器是一个非常复杂的软件，包含许多组件。当然，人们已经成功地从头开始创建新的操作系统。Linus Torvalds 浮现在脑海中。他使 Linux 成为有史以来最成功的操作系统之一。

当然，您还面临一个额外的挑战，这使得构建一个新的*成功*的浏览器比构建一个新的*成功*的操作系统更难。浏览器有望完美地运行所有漂浮在网络上的遗留代码。现在假设 Linus Torvalds 被告知他的新操作系统将无关紧要，除非它与 UNIX 或某些现有操作系统完全向后兼容。我怀疑他会打扰，而 Linux 今天可能不会存在。当然，实际上，Linux 流行的唯一原因是它设计得很好，而且 GNU 项目能够制作工具来将大量现有代码移植到 Linux 上。如果没有 GNU 对 Linux 的意识形态支持，它永远不会有机会。

所以假设你真的有足够的野心（或鲁莽）去尝试制作一个新的成功的浏览器，你应该关注的是**架构**和**设计**。除非您确定可以以某种方式改进现有浏览器的设计，否则没有实际理由从头开始构建新浏览器。**这意味着您需要对WebKit**和**Gecko**的代码足够熟悉，以了解他们做出的设计决策，但您不应该尝试复制他们的设计，否则您还不如直接使用他们的代码。

我个人的想法（没有做足够的研究）是今天的浏览器不够模块化。如果我要制作一个新的浏览器，我会找到一种方法来轻松地交换东西（例如用另一个 JavaScript 引擎替换一个 JavaScript 引擎），并为用户提供比现有浏览器更多的控制权. 现代浏览器和网页设计师几乎已经从用户手中夺走了所有的控制权。为什么我，用户不能告诉网络浏览器我希望它如何呈现在我的机器上显示的内容？最初的 HTML 只给出了如何构建内容的指导方针，随着时间的推移，新的标准变得越来越教条，以至于用户现在完全受制于网页设计师。Linux 的吸引力在于它把控制权交还给了用户，而且'

如果我是你，我会花时间研究的另一件事是操作系统设计原则。设计一个好的浏览器，至少在理论上应该需要与设计一个好的操作系统相同的原则——尤其是在并发进程、安全模型等方面。

最后，在做了大量的研究之后，我认为这是你应该开始编码的地方：

1.  重新设计**马赛克**，但有自己的设计理念。如果您只是为了娱乐或您自己的教育利益而这样做，这也是我的建议。阅读原始的 HTML 1.0 和 HTML 2.0 规范，以及 HTTP 1.1 规范和当前的 URI 规范，并确保您的浏览器符合所有这些规范。您当然可以下载已经处理传输协议、URI 约定等的现有软件，但如果您认真设计自己的浏览器，我认为从头开始做这些事情也是一个很好的练习，所以您会得到很好地了解所有拼图是如何组合在一起的。在第 0 步结束时，您应该拥有一个至少可以与 90 年代最先进的浏览器相媲美的浏览器。这是一个很好的第一个里程碑。您实际上可以在以下位置下载原始马赛克[ftp://ftp.ncsa.uiuc.edu/Mosaic/](ftp://ftp.ncsa.uiuc.edu/Mosaic/)并查看它与您的浏览器的比较。看看当前网站如何在像 Mosaic 这样的古老浏览器中呈现也是一个很好的练习。

2.  在浏览器中添加对 DOM 的支持。首先关注 W3C DOM Level 1 和 Level 2，因为几乎所有当前的浏览器都完全支持它们。然后看看 Level 3 和 Level 4。DOM 是 web 编程的基础，所以如果你要真正构建一个现代 web 浏览器，它的整个设计都必须考虑到这一点。由于您使用 C# 编写浏览器，因此您可能需要考虑如何利用现有的 .NET 对象模型来发挥自己的优势。

3.  Look at existing scripting engines and see if you can port them to your project. I'd discourage you from writing your own JavaScript interpreter, not only because that's a very large project in itself, but because so much work has already been put into optimizing JS compilers (e.g. V8). So unless you're a guru in compiler design, your hand-built JS interpreter will likely be inferior to what's already out there, even if it follows the EMCAScript specs flawlessly. Again, I think the scripting engine should be something that is a completely separate module from the actual browser anyway, so I think it would be much more useful to have a framework that allows you to substitute any scripting engine, rather than build a scripting engine that only works with your browser.

4.  查看北美排名前 10-20 的网站（Google、Facebook、YouTube、Twitter、维基百科、亚马逊、流行的博客平台等）的 HTML / CSS / JS 源代码，并设计您的浏览器以与这些网站很好地配合. 这是一个更容易解决的问题，而不是制作一个符合所有现有标准的浏览器（当前的浏览器仍然不能完美地做到这一点）更不用说制作一个能够正确呈现网络上所有网站的浏览器（没有人可以去做）。人们会抱怨您的浏览器违反标准等等，但这并不像人们抱怨他们无法使用您的浏览器访问 Google 或 Facebook 那样大。我想不出任何浏览器在它的第一个版本中正确地遵循了所有（甚至大多数）标准，所以我说不要费心去尝试。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2009-02-28T23:11:30.223

你的意思是写你自己的渲染引擎？

我只能说祝你好运。当前一代的各种浏览器已经有很多年了，如果你想比它们中的任何一个做得更好，你将需要一些严肃的技能。如果你必须问从哪里开始，你可能需要学习几年以上才能尝试这样的任务。

也就是说，这里有一些（明显的）指针：

1.  写很多做小事的代码，比如解决所有[projecteuler.net](http://projecteuler.net)问题
2.  尽可能了解您的工具包及其社区标准
3.  编写更多代码
4.  真正掌握有限状态机
5.  编写更多代码
6.  了解有关 tcp/ip 堆栈以及它如何用于 http 的所有信息
7.  尽你所能了解http
8.  学习标准（html、xml、sgml、css）
9.  庆祝你的 150 岁生日。
10.  开始实际的浏览器项目。

**在下面编辑**

我的意思并不是要激励或消极，只是想向您展示浏览器是一个非常大的项目，而真正的大项目需要大量的思考。直率的诚实洒上幽默。

我已经有超过三分之二的时间在编程，我喜欢认为我是一个相当不错的程序员，但如果我认为我有一半的机会从头开始编写一个像样的网络浏览器，那就太愚蠢了.

当然，如果这是您想要做的，请不要让我的评论妨碍您。您可能比 Internet Explorer 做得更好。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2009-02-28T23:25:40.330

这是一个雄心勃勃的项目（尤其是对于单个开发人员而言），但有一天我很想做——你可以从中学到很多东西。

我不太了解协议的工作原理（您肯定需要研究的东西）或浏览器中发生的事情，但一个很好的起点是开源浏览器的来源，主要是 Chrome 和火狐。Chrome 是一个特别值得一看的项目，因为它们只做我希望你开始做的事情：chrome 和浏览器的后端。首先忘记创建渲染引擎 - 使用 Webkit 或 Gekko。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2009-03-01T05:40:20.943

正如其他人已经说过的那样，网络浏览器是一个巨大的项目。你必须担心 tcp/ip&sockets、渲染 html、使用 css、创建 DOM 模型、执行 javascript、处理格式错误的标记和代码以及处理所有类型的文件，然后你才能考虑人们期望的所有事情浏览器（即书签、历史记录、隐私浏览、安全等）这是一个巨大的项目。

话虽如此，它是可以做到的。我的建议是去看看 Firefox 的源代码。我知道你说你想从头开始构建一个浏览器，但是首先从开源项目中*学习会很有帮助。*

我会下载 Firefox 源代码，然后慢慢剥离它。换句话说，我将获取源并*删除*所有书签功能。然后，我将删除处理插件的能力。然后，我将删除所有有关保存文件的代码。我会继续这个过程，直到我得到一个*非常*基本的网络浏览器。我会查看该代码。

然后，我将开始构建自己的。我会利用我从拆开 Firefox 中获得的知识，并将其用于构建新的浏览器。

祝你*好运*！

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-02-28T22:59:34.090

您可以从格式良好且有效的 XHTML 开始，这应该比浏览器在真实“生活”中遇到的标签汤更容易。

然后，您必须找到一种方法，将 Web 上的真实 HTML 转换为您的需求。

但不要自欺欺人：浏览器不是一个小项目。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-02-28T23:19:08.770

...然后开始担心安全性

（不过，通常应预先考虑非功能性和横切关注点:)）

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-03-01T12:54:09.090

非常雄心勃勃的项目，但一个开发人员无法单独完成您需要一个团队（项目经理，测试人员......），也许您应该检查您选择的语言 c# 仅适用于 windows（我知道 linux 上的单声道，但它不是同样）无论如何我祝你好运，我很乐意使用你的浏览器：D

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-01T13:28:13.533

你真的有很多空闲时间，不是吗？AFAIK，大多数浏览器都是用 C++ 编写的，并非所有用户都在他们的计算机上安装了 .NET 框架，如果他们这样做了，它可能不是您需要的版本。

这可能需要您数年的时间，但无论如何，那里有许多开源浏览器，FireFox，Google Chrome .. 等，您可以先查看代码，祝您好运:)

# user-experience - 如何在不亲眼看到我的用户的情况下收集用户反馈？

> ID：598842
> 
> 赞同：2
> 
> 时间：2009-02-28T22:56:37.903
> 
> 标签：user-experience, user-feedback

可能像很多软件开发人员一样，我几乎从未见过真正的用户使用我的软件。

当然，在这种情况下很难获得良好的用户反馈。即使一些用户同意给我一些关于他们使用软件的方式的信息，但他们真正使用它的方式与他们认为自己使用它的方式之间存在巨大差异。

偶然地，我的软件是客户端/服务器，这意味着我可以很容易地从技术上收集服务器上的一些信息。

当然，没有什么比看真实用户在现实生活中使用该软件更重要，但我认为总比没有好，或者至少值得尝试:)

虽然我在我的数据库中记录了客户端上引发的所有异常，但我还没有离开这一点。

*   有没有人这样做过？
*   你会记录什么信息？
*   有一些法律问题吗？我应该如何处理这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-28T23:48:52.100

当我做 UI 开发时，我曾经收集每个用户命令（按钮推送、菜单选择）并使用我自己的内部调试信息将它们记录到文件中，但几天后会自动删除日志文件。在尝试调试您自己的软件时，此信息非常宝贵（用户很少能准确回忆起问题发生时所采取的步骤）。我还记录了每次应用程序的启动，以防我们遇到与第三方软件的兼容性问题。

*关键是除非确实*发生了问题，否则不会使用该信息，它被保存在本地，没有远程访问，如果没有问题，它会自动被删除。只有当客户因为问题打电话给我们时，我们才会访问日志数据。

主动跟踪用户操作*并将它们送回基地*完全是一个单独的问题，我一直回避这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-28T23:12:58.893

我正在开发的软件也面临同样的问题，尽管我还没有用户。

我通常认为监控应该始终是可选的，并且您应该能够在发送材料之前进行审查。我想大多数人都会同意这一点。

然而，从法律的角度来看，存在更大的问题。出于安全原因，一些公司限制用户安装包含任何“回家”组件的软件。根据使用上下文，任何监控数据都可能泄露秘密。

例如，我的软件在 IDE 中注释了一些东西。如果我传输有关打开文件（而不是哈希）的“家庭”详细信息，即使没有这些文件的内容，我仍然可能会发送机密详细信息。如果您的工具可用于打开图像或文档，则可能存在类似问题。

我建议在客户端散列或寻找混淆结果的方法，并通过充分的测试确保不会出现您的软件未经同意和混淆将信息发送回家的情况。如果我没记错的话，如果你的软件这样做了，即使是错误的，你也可能违反了美国联邦法律。

此外，请确保在通过网络发送详细信息时对其进行加密。

最后，如果您的一些用户在隐私法更严格的欧盟，您的例外数据库本身可能在法律上被视为“数据库”（例如，如果您在 SQL 语句执行和失败时存储它们并且这些语句包含生产值）。因此，您可能必须遵守许多有关个人身份信息的规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-01T00:17:14.807

这并不是您所要求的，但您确实有一些与编程无关的解决方案：

1）[做一些走廊可用性测试](http://www.joelonsoftware.com/articles/fog0000000043.html)（向下滚动到#12）。

2) 尝试像[Morae](http://www.techsmith.com/morae.asp)这样的产品来建立一个更正式但远程的观看会话。

3) 使用 GoToMeeting、CoPilot 或 WinVNC 之类的工具让客户在他们的肩膀上监视。或者去他们的网站呆一天，然后在他们实际的肩膀上闲逛。

这些中的任何一个都会让您很好地了解哪些有效，哪些无效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-01T00:51:59.950

你可以做这样的事情[，](http://pure.rednoize.com/2007/10/18/record-mouse-movement-using-javascript-and-ajax/)它捕捉鼠标移动并重放它们，让你看到使用 javascript 和 ajax。

# php - LAMP 应用程序在初始化时应采取哪些预防措施？

> ID：598844
> 
> 赞同：1
> 
> 时间：2009-02-28T22:58:31.673
> 
> 标签：php, security

我想编写一个 PHP 应用程序，该应用程序将首先进行一些检查，以确保最佳和安全的环境。我敢肯定，我一个人是想不出所有的，所以我错过了什么？

*   确保 MySQL 用户名/密码可以 SELECT、INSERT 等
*   更新 PHP 时区
*   检查 register_globals 并在启用时发出警告
*   确保 /install 被删除
*   如果没有配置文件制作一个
*   确保配置文件没有写权限
*   如果超过 50mb 左右，请擦除缓存文件夹内容
*   确保 GD 和 PDO 已安装并正常工作

请回答任何更多想法，或者如果上述任何一个都不是一个好主意。我可能意识到缓存文件夹应该是每周运行一次的 cron 作业。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-28T23:08:36.597

你检查[过 PHPSecInfo](http://phpsec.org/projects/phpsecinfo/index.html)吗？它将执行一些您应该注意的非常[重要的与 PHP 安全相关的配置测试。](http://phpsec.org/projects/phpsecinfo/tests/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-28T23:09:30.557

添加到您的数据库用户检查 - 检查他们没有您不需要的危险事物的权限 - 例如 DROP。

您可以在安装中检查的内容可能是提示用户在 webroot 之上上传应用程序逻辑。这完全是袖手旁观，但您可以检查当前目录是否是文档根目录，然后您（脚本）是否可以访问上一级。我知道大多数共享主机不提供这个（幸运的是我有一个主机），但我认为应该尽可能利用它。否则，请检查空白 index.html/php 文件是否已放置在“不可访问”目录中以防止文件列出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-01T19:36:47.267

首先检查 php 版本，还检查是否启用了魔术引号，这些在早期版本中默认启用。

# fitnesse - 为什么适合/FitNesse？

> ID：598863
> 
> 赞同：24
> 
> 时间：2009-02-28T23:11:41.487
> 
> 标签：fitnesse, xunit, fit-framework

使用 Fit/FitNesse 而不是 xUnit 样式的集成测试有什么意义？在我看来，它的语法非常奇怪且非常不清楚。

真的只是让产品负责人写测试吗？他们不会！这对他们来说太复杂了。那么，为什么任何人都应该适合/FitNesse？

**更新**所以它完全适合业务规则测试吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-02-28T23:57:54.713

重点是**与**非程序员，甚至是像业务应用程序的潜在用户这样的完全非技术人员一起工作，确定应用程序应该做什么，然后将其投入测试。虽然让测试工作对他们来说确实太复杂了，但他们应该能够讨论用 Word 等填写的示例数据表。最棒的是，与传统规范不同，这些文档与您的应用程序一起存在，因为自动化测试会迫使您更新它们。

请参阅James Shore 的“拟合和[拟合工作流程](http://fit.c2.com/wiki.cgi?FitWorkflow)[简介”](http://fit.c2.com/wiki.cgi?IntroductionToFit)，如果需要，可以点击指向其余文档的链接。

* * *

**更新：**取决于您所说的业务规则是什么意思？;-) 有些人会非常狭隘地理解它（例如在业务规则引擎等中），而其他人则非常广泛。

在我看来，Fit 是一个工具，它允许您在文档中用丰富的实际示例写下业务（如在领域中）用例，最终用户或领域专家（在某些领域中）可以理解、验证和讨论这些用例。同时这些示例是机器可读的形式，因此它们可以用于驱动自动化测试，您既不需要完全自己编写文档，也不需要他们这样做。相反，它是调用和讨论的产物，反映了双方对应用程序将要做什么的理解不断加深。随着您的进步和解决更多极端案例，示例会变得越来越丰富。

重要的是应用程序将做什么，而不是如何。这是功能规范的一种形式。因此，它相当广泛，并没有真正按模块组织，而是按使用场景组织。

来自示例的测试将在从业务角度来看重要的方面测试应用程序的外部行为。是的，你可以称之为业务规则。但是，让我们看看 Diego Jancic 的信用评分示例，只是有点扭曲。如果fit文档的一部分是1）列出属性及其分数，然后2）提供客户数据和检查结果，那么实际的业务规则是什么：评分表（属性及其分数）或应用程序逻辑计算每个客户的分数（基于评分表）？哪些经过测试？

Fit/FitNesse 测试似乎更适合验收测试。其他测试（当您不关心与客户、用户、领域专家等的合作时，您只想自动化测试）可能会更容易以更传统的方式编写和维护。xUnit 非常适合单元测试和 api 测试。每个 Web 框架都应该在其修改-构建-测试-部署周期中集成一些用于 Web 应用程序/服务测试的工具，例如。django 有它的小测试客户端。你有很多选择。

而且您总是可以编写自己的工具（或者最好调整一些现有的工具）以更好地适应（双关语）您感兴趣的特定领域的一些测试。

* * *

一个更普遍的想法。将测试、“业务规则”和几乎任何东西编码为某种形式的定义良好的数据，这些数据由一些简单的通用代码片段解释，通常（并不总是！！！）更好。然后很容易以其他方式使用数据：生成文档，迁移到新的测试框架，将应用程序移植到新的环境/编程语言，用于检查与某些外部规则或其他系统的一致性（请发挥您的想象力）。从代码中提取这些信息要困难得多，例如。简单的硬编码单元测试或业务规则。

Fit 将测试用例存储为数据。由于它的使用方式，采用非常具体的格式，但仍然如此。您的特定领域测试可能使用不同的格式，例如简单的 CSV、JSON 或 YAML。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-01T01:02:53.263

这个想法是您（程序员）定义一个易于理解的格式，例如 Excel 表。然后，产品负责人输入的信息对于非业务人员来说难以理解......您只需验证您的代码是否按照 PO 预期运行 Fit 的方式工作。xUnit中使用的方式，可以供程序员作为输入方便理解或简单的信息。如果你需要在你的 xUnit 测试中输入很多带有多个字段的奇怪示例，那么它会变得难以阅读。

想象一个案例，您必须根据年龄、已婚/单身、子女数量、工资、活动等来决定是否向客户提供贷款……作为程序员，您无法编写该信息；并且风险经理不能编写 xUnit 测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-04T17:44:32.720

有助于减少回归和错误测试中的冗余。构建可管理的测试用例存储库。它就像一次构建并永远使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-04T19:51:21.153

这在 QA 和开发团队的合作中非常有用：QA 可以向开发人员显示失败的测试结果，开发人员将轻松帮助解决环境问题，并了解重现错误的步骤。它适用于 UI 甚至 API 测试。

# stored-procedures - 在存储过程中调用存储过程

> ID：598868
> 
> 赞同：1
> 
> 时间：2009-02-28T23:14:36.363
> 
> 标签：stored-procedures

我正在尝试创建一个如下所示的存储过程：

```
Select 
   ep.EmployeeID, GetEmployeeFirstName(ep.EmployeeID), 
   GetEmployeeLastName(ep.EmployeeID), ed.EmployeeDateOfBirth, 
   ed.EmployeeAddress, ed.EmployeeAddress2, ed.City, ed.State, ed.ZipCode
From
   EmployeeProfile ep, EmployeeDetail ed
Where 
   ep.EmployeeID = ed.EmployeeID 
```

此代码块将是一个存储过程。我的问题是 GetEmployeeFirstName 是一个存储过程，必须传递一个 EmployeeID 才能获取员工的名字和姓氏。

如何在存储过程中调用存储过程。

谢谢

麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-28T23:24:34.060

这些可能更适合作为功能。

GetEmployeeFirstName(ep.EmployeeID)、GetEmployeeLastName(ep.EmployeeID)

更好的是，只需加入具有名称的表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-01T05:29:23.653

我不明白这些存储过程的作用。即使名字和姓氏不在 EmployeeProfile 表中，并且即使在返回字符串之前必须对字符串进行一些操作，连接也是比存储过程或函数更好的解决方案。尤其是考虑到性能时。

如果您有 GetEmployeexName 存储过程，因为您在其他地方使用它们，那很好。无论他们做什么，如果没有从您的查询中调用它们，我都不会认为它是代码重复。

您需要了解，对于结果集中的每一行，都会调用另外两个过程或函数。这是极其昂贵的，并且可能会使应用程序变得非常缓慢，即使对于几千名员工的相对较小的结果集也是如此。我知道我在说什么——在最近的一次数据库调优计划中，我从查询中删除了很多函数调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-28T23:19:12.577

您可以使用[`EXEC`](http://msdn.microsoft.com/en-us/library/ms189915(SQL.90).aspx)或`sp_executesql`从另一个存储过程执行一个存储过程。（顺便说一句，您还没有指定您的 RDBMS）。

您的表 EmployeeDetail 不包含员工的名字和姓氏吗？

```
Select    
    ep.EmployeeID, ed.FirstName 
    ed.LastName, ed.EmployeeDateOfBirth,
    ed.EmployeeAddress, ed.EmployeeAddress2, 
    ed.City, ed.State, ed.ZipCode
From   
    EmployeeProfile ep
    inner join EmployeeDetail ed ON ep.EmployeeID = ed.EmployeeID 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-28T23:25:01.970

在 SQL Server 中，为了在 Select 语句列表中调用 GetEmployeeLastName，我会将其转换为数据库函数。

# asp.net - “用户偏好”数据库表设计

> ID：598877
> 
> 赞同：5
> 
> 时间：2009-02-28T23:20:21.810
> 
> 标签：asp.net, database, sql-server-2005, database-design

我正在寻找为用户偏好创建一个表，但无法找到最好的方法。默认情况下 ASP.NET 执行此操作的方式似乎非常尴尬，并且希望避免这种情况。目前，我每个用户使用一行，其中每个用户偏好都有不同的列（我知道，未标准化）。

所以，我想出的另一个想法是将首选项本身拆分到他们自己的表中，然后在用户首选项表中为每个用户设置一行；但是，这意味着每个偏好都需要是完全相同的数据类型，这对我来说也不太吸引人。

所以，我的问题是：设计数据库以保存用户偏好值的最佳/最合乎逻辑的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-28T23:29:24.220

我在数据库工作中尽量避免的一些想法是数据重复和不必要的复杂化。您还希望避免“[插入、更新和删除异常](http://en.wikipedia.org/wiki/Database_normalization)”。话虽如此，将用户偏好存储在一个表中，每行 = 一个用户和列，可用的不同偏好是有意义的。

现在，如果您可以看到这些首选项在您的数据库中以任何其他形式或方式使用，例如使用相同首选项的多个对象（不仅仅是用户），那么您将希望沿着您的第二条路线并使用 FK/ 引用首选项PK对。

至于你所描述的，我看不出第一条路线行不通的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-28T23:31:34.480

我通常这样做：

```
Users table (user_id, .... etc.)
.
Options table (option_id, data_type, ... etc.)
(list of things that can be set by user)
.
Preferences table (user_id, option_id, setting) 
```

我将新的 SQLVARIANT 数据类型用于设置字段，因此它可以是不同的数据类型，并将选项的数据类型记录为选项表中选项定义的一部分，以便在查询时将其转换回正确的类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-28T23:39:08.767

如果您将所有用户首选项存储在用户表的单行中，您将面临维护噩梦！

每个首选项，每个用户使用一行，并将首选项值存储为 varchar（例如长度为 255，或者某个值足够大以满足您的要求）。显然，您必须将值转换为输入/输出此列。

唯一不能*轻松*工作的情况是，如果您想将一些大型二进制数据存储为用户首选项，但我发现这不是一个常见的要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-28T23:32:35.133

真正快速，一种方法：

```
User(UserID, UserName, ...)

PreferenceDataType(PreferenceDataTypeID, PreferenceDataTypeName)

PreferenceDataValue(PreferenceDataValueID, PreferenceDataTypeID, IntValue, VarcharValue, BitValue, ...)

Preference(PreferenceID, PreferenceDataTypeID, PreferenceName, ...)

UserHasPreference(UserID, PreferenceID, PreferenceDataValueID) 
```

# javascript - 如何在javascript中动态访问本地范围？

> ID：598878
> 
> 赞同：22
> 
> 时间：2009-02-28T23:21:52.087
> 
> 标签：javascript, scope

如果要动态使用全局函数和变量，可以使用：

```
window[functionName](window[varName]); 
```

是否可以对本地范围内的变量做同样的事情？

这段代码可以正常工作，但目前使用的是 eval ，我正在考虑如何去做。

```
var test = function(){
    //this = window
    var a, b, c; //private variables

    var prop = function(name, def){
        //this = window
        eval(name+ ' = ' + (def.toSource() || undefined) + ';');    

        return function(value){
            //this = test object
            if ( !value) {
                return eval('(' + name + ')');
            }
            eval(name + ' = value;')
            return this;
        };

    };

    return {
        a:prop('a', 1),
        b:prop('b', 2),
        c:prop('c', 3),
        d:function(){
            //to show that they are accessible via to methods
            return [a,b,c];
        }
    };
}();

>>>test
Object
>>>test.prop
undefined
>>>test.a
function()
>>>test.a()
1 //returns the default
>>>test.a(123)
Object //returns the object
>>>test.a()
123 //returns the changed private variable
>>>test.d()
[123,2,3] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-01T00:35:58.273

要回答您的问题，不，没有办法在本地范围内进行动态变量查找而不使用`eval()`.

最好的选择是使您的“范围”只是一个常规对象[字面量]（即，`"{}"`），并将您的数据粘贴在那里。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-01T02:22:48.827

不，就像[crescentfresh](https://stackoverflow.com/users/45433/crescentfresh)说的那样。下面是一个示例，说明如何在没有 eval 的情况下使用内部私有对象来实现。

```
var test = function () {
  var prv={ };
  function prop(name, def) {
    prv[name] = def;
    return function(value) {
      // if (!value) is true for 'undefined', 'null', '0', NaN, '' (empty string) and false.
      // I assume you wanted undefined. If you also want null add: || value===null
      // Another way is to check arguments.length to get how many parameters was
      // given to this function when it was called.
      if (typeof value === "undefined"){
        //check if hasOwnProperty so you don't unexpected results from
        //the objects prototype.
        return Object.prototype.hasOwnProperty.call(prv,name) ? prv[name] : undefined;
      }
      prv[name]=value;
      return this;
    }
  };

  return pub = {
    a:prop('a', 1),
    b:prop('b', 2),
    c:prop('c', 3),
    d:function(){
      //to show that they are accessible via two methods
      //This is a case where 'with' could be used since it only reads from the object.
      return [prv.a,prv.b,prv.c];
    }
  };
}(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-07T01:58:49.693

**我认为您实际上** *可以* **，即使不使用 eval！**

我可能错了，所以请纠正我，但我发现如果*私有*变量在本地范围内声明为参数，而不是使用`var`，即：

`function (a, b, c) { ...`

代替

`function () { var a, b, c; ...`

`arguments`这意味着如果在函数调用中为它们提供了任何值，则这些变量/参数将与函数的对象绑定在一起，即：

```
function foo (bar) {
    arguments[0] = 'changed...';
    console.log(bar); // prints 'changed...'

    bar = '...yet again!';
    console.log(arguments[0]); // prints '..yet again!'
}

foo('unchanged'); // it works (the bound is created)
// logs 'changed...'
// logs '...yet again!'

foo(undefined); // it works (the bound is created)
// logs 'changed...'
// logs '...yet again!'

foo(); // it doesn't work if you invoke the function without the 'bar' argument
// logs undefined
// logs 'changed...' 
```

在那些情况下（它工作的地方），如果你以某种方式存储/保存被调用函数的`arguments`对象，那么你可以从`arguments`对象更改任何与参数相关的槽，并且更改将自动反映在变量本身中，即：

```
// using your code as an example, but changing it so it applies this principle
var test = function (a, b, c) {
    //this = window
    var args = arguments, // preserving arguments as args, so we can access it inside prop
        prop = function (i, def) {
            //this = window

            // I've removed .toSource because I couldn't apply it on my tests
            //eval(name+ ' = ' + (def.toSource() || undefined) + ';');
            args[i] = def || undefined;   

            return function (value) {
                //this = test object
                if (!value) {
                    //return eval('(' + name + ')');
                    return args[i];
                }

                //eval(name + ' = value;');
                args[i] = value;
                return this;
            };
        };

    return {
        a: prop(0, 1),
        b: prop(1, 2),
        c: prop(2, 3),
        d: function () {
            // to show that they are accessible via to methods
            return [a, b, c];
        }
    };
}(0, 0, 0); 
```

如果您可以将值作为参数传递给函数这一事实让您感到烦恼，您总是可以用另一个匿名函数包装它，这样您就真的无法访问作为参数传递的第一个定义的值，即：

```
var test = (function () {
    // wrapping the function with another anomymous one
    return (function (a, b, c) {
        var args = arguments, 
            prop = function (i, def) {
                args[i] = def || undefined;   

                return function (value) {
                    if (!value) {
                        return args[i];
                    }

                    args[i] = value;
                    return this;
                };
            };

        return {
            a: prop(0, 1),
            b: prop(1, 2),
            c: prop(2, 3),
            d: function () {
                return [a, b, c];
            }
        };
    })(0, 0, 0);
})(); 
```

**完全动态访问示例**

`arguments.callee`我们可以通过将函数本身 ( ) 作为字符串，并使用正则表达式过滤其参数，将所有参数变量名称映射到一个数组中：

```
var argsIdx = (arguments.callee + '').replace(/function(\s|\t)*?\((.*?)\)(.|\n)*/, '$2').replace(/(\s|\t)+/g, '').split(',') 
```

现在有了数组中的所有变量，我们现在可以知道每个函数的`arguments`槽索引对应的变量名称，然后声明一个函数*（在我们的例子中是**prop**）*来读/写变量：

```
function prop (name, value) {
    var i = argsIdx.indexOf(name);

    if (i === -1) throw name + ' is not a local.';
    if (arguments.hasOwnProperty(1)) args[i] = value;

    return args[i];
} 
```

我们还可以动态地将每个变量添加为属性，就像在问题的示例中一样：

```
argsIdx.forEach(function (name, i) {
    result[name] = prop.bind(null, name);
}); 
```

最后，我们可以添加一个按名称检索变量的方法（默认情况下全部），如果`true`作为第一个参数传递，它会返回硬编码数组，其中包含所有变量的标识符，以证明它们正在被更改：

```
function props (flgIdent) {
    var names = [].slice.call(arguments.length > 0 ? arguments : argsIdx);

    return flgIdent === true ? [a, b, c, d, e, f] : names.map(function (name) {
        return args[argsIdx.indexOf(name)];
    });
} 
```

**prop**和**props**函数可以作为返回对象中的方法使用，最终它可能看起来像这样：

```
var test = (function () {
    return (function (a, b, c, d, e, f) { 
        var argsIdx = (arguments.callee + '').replace(/function(\s|\t)*?\((.*?)\)(.|\n)*/, '$2').replace(/(\s|\t)+/g, '').split(','), 
            args = arguments, 
            result = {
                prop: function (name, value) {
                    var i = argsIdx.indexOf(name);

                    if (i === -1) throw name + ' is not a local.';
                    if (arguments.hasOwnProperty(1)) args[i] = value;

                    return args[i];
                },
                props: function (flgIdent) {
                    var names = [].slice.call(arguments.length > 0 ? arguments : argsIdx);

                    return flgIdent === true ? [a, b, c, d, e, f] : names.map(function (name) {
                        return args[argsIdx.indexOf(name)];
                    });
                }
            };

        args.length = argsIdx.length;
        argsIdx.forEach(function (name, i) {
            result[name] = result.prop.bind(null, name);
        });

        return result;
    })(0, 0, 0, 0, 0, 0);
})(); 
```

**结论**

没有 eval就不可能**读/写**函数的局部范围变量，**但是如果这些变量是函数的参数并且如果它们被赋予了值**，则可以将这些变量标识符绑定到函数的`arguments`对象并从对象本身**间接**`arguments`读/写它们.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-28T23:46:23.417

希望我没有过度简化，但是像使用对象这样简单的事情呢？

```
var test = {
    getValue : function(localName){
        return this[localName];
    },
    setValue : function(localName, value){
        return this[localName] = value;
    }
};

>>> test.a = 123
>>> test.getValue('a')
123
>>> test.a
123

>>> test.setValue('b', 999)
999
>>> test.b
999 
```

# python - 在 python 中使用 MySQL 布尔值

> ID：598879
> 
> 赞同：2
> 
> 时间：2009-02-28T23:22:02.397
> 
> 标签：python, mysql, boolean

我在 python 中查询 MySQL 数据库并选择一个布尔值——所以 MySQL 的响应是字符串“True”或“False”。我想根据 MySQL 的布尔值执行进一步的代码。

例如

```
data = 'False'  # assume this is what was returned by MySQL.
if data:
  print 'Success'  #really this would be where I would execute other if True.
else:
  print 'Fail'  #really this would be where I would execute other code if False 
```

但我不能这样做，因为

```
if data: 
```

将始终返回 True

那么如何将 MySQL 返回的字符串转换为 python 中的布尔值呢？

目前我有：

```
data = 'False'  # assume this is what was returned by MySQL.
if data == 'True':
  print 'Success'
else:
  print 'Fail' 
```

我相信在 python 中必须有更好的方法来做到这一点——很可能我缺少一些简单的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-28T23:24:17.010

MySQL 中的布尔值是 TINYINT(1)。检查 1 或 0 可能有效

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-01T00:19:40.013

如果该列始终是实际字符串之一`"False"`或`"True"`（与整数或其他内容相反），那么我建议对以下内容进行一些更改：

```
value = {'False' : False, 'True' : True}[data] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-01T00:56:37.663

如果您的数据库连接不知道如何为您转换值，那么您需要使用更好的连接。这不应该是您需要自己做的事情。如果这些不是实际的布尔值，而只是一个仅存储 0 或 1 的 int 列，那么您应该修复您的架构。或者，如果您总是得到值“True”和“False”，也许您不小心将它转换为某个地方的字符串？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-02T04:43:23.070

您可以在 MySQLdb 目录中的 converters.py 文件中找到 MySQLDdb 转换值的位置。

这是处理 bool 的片段：

```
conversions = {
    ...
    types.BooleanType: Bool2Str,
    ...
} 
```

和 Bool2Str 函数：

```
def Bool2Str(s, d): return str(int(s)) 
```

如果您想要不同的行为，请导入转换字典并进行更改。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-17T10:21:33.750

您可以使用`ord`which 返回一个表示 Unicode 的整数。

例子：

```
if ord(data):
    print("True")

if not ord(data):
    print("False") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T01:37:21.340

这处理了 MySQLdb 返回的方式。

```
if data == '\x01':
  print 'Success'
else:
  print 'Fail' 
```

验证这适用于 Python 3.6

```
if data == b'\x01':
  print('Success')
else:
  print('Fail') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-01T16:28:36.970

您的解决方案实际上还可以，但还有其他选择：

如果您使用的是 Python 2.5 或更高版本，则可以缩短 if 语句：

```
print 'Success' if data == 'True' else 'Fail' 
```

如果您发现自己经常重复检查，您可能会考虑为其编写一个函数以使其更具可读性：

```
def is_true(mysql_boolean):
    if mysql_boolean == "True":
        return True
    else:
        return False

# now you can use this:
if is_true(data):
    # this is really going to be more than one line of code anyway.
    # or maybe a function call, in which your solution might be enough.
    print "Success"
else:
    print "Fail" 
```

你可以用字典来达到同样的目的，但我不觉得这很优雅：

```
mysql_bool = {'True': True, 'False': False}

if mysql_bool[data]:
    print "Success" 
```

也就是说，你用什么来连接数据库？可能有一种方法可以直接从那里得到一个布尔值。请更新您的问题！

# ruby-on-rails - 使用 Aptana RadRails 创建普通 .rb 文件

> ID：598888
> 
> 赞同：1
> 
> 时间：2009-02-28T23:30:27.307
> 
> 标签：ruby-on-rails, ruby, ide, aptana, radrails

我刚买了一台 MacBook 用于一些 ruby​​ 开发，并且喜欢 Aptana Studio 的外观作为一个非常好的 IDE。

然而，我的问题是我想知道（在深入研究之前，可能会浪费时间）我可以在没有附加 rails 框架的情况下创建普通的旧 .rb 文件吗？另外，我可以直接从 IDE 执行 ruby​​ 文件，还是必须使用终端？

正如我所说，我只是在学习 Ruby，并且正在阅读我买的一些书，虽然我确实希望尽快进入 Rails，但我觉得在要求 Rails 做很多事情之前正确学习语言很重要给我的东西。

任何其他关于最佳实践和其他潜在 IDE 的想法也将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-28T23:35:21.430

对于只是玩弄 Ruby，我建议使用编辑器、命令行和[IRB](http://en.wikipedia.org/wiki/Interactive_Ruby_Shell)。您将获得更多乐趣并更快地了解更多信息。

之后，进入 IDE 和 Rails 以及随之而来的所有复杂性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-01T07:33:11.687

我会推荐[Netbeans](http://www.netbeans.org/downloads/)（显然是 Ruby 版）或 Jetbrain 的[RubyMine](http://www.jetbrains.com/ruby/index.html)而不是 Aptana。我在尝试 Aptana 和 Ruby 时遇到了问题。Rubymine 仍处于公开预览发布状态，但在一个月左右发布后将成为付费产品。它是由制作 IntelliJ IDEA 的同一个人开发的。Netbeans 实际上与 ruby​​ 和 rails 配合得很好，而且它是免费的。两者都允许您从 IDE 中执行 ruby​​ 并支持 rails。

我还发现 irb 非常有用，Netbeans 也允许您从 IDE 中运行 irb。开始时让代码完成和内联文档很有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-05-10T20:36:40.343

是的，您可以在 RadRails 或 Aptana Studio 中创建普通的旧“.rb”文件，它们不必位于 Rails 项目中或“附加到 Rails 框架”中。您还可以通过右键单击文件或在编辑器中并选择 Run As > Ruby Application 或 Debug as > Ruby Application 条目之一在 IDE 中运行或调试 ruby​​ 脚本。使用 Studio 3，您甚至可以从嵌入式终端视图运行它们。RadRails 2.x 有一个 Rails Shell，您也可以在其中从命令行界面运行或调试文件。

作为 RadRails 的开发人员，我有点偏见 - 但我同意用户应该非常熟悉使用命令行，无论他们是否决定使用 IDE 进行日常编程。当然，使用像 irb 这样的交互式 REPL 是另一个有用的入门工具。哎呀，你甚至可以在安装 ruby​​ 之前先使用在线的：http: [//tryruby.org/](http://tryruby.org/)

# optimization - 为什么 DNN 中包含的图像和 javascript 文件在我替换后不再缓存在客户端上？

> ID：598896
> 
> 赞同：6
> 
> 时间：2009-02-28T23:36:07.107
> 
> 标签：optimization, caching, dotnetnuke

我安装了 DotNetNuke 4.9.2 版，我正在使用 Firebug 和 YSLOW 观察准备好的缓存状态......

所有的图片和javascript都缓存在客户端，除非我替换它们......所以如果我上传一个新的LOGO图片，它就不再缓存了。现有的被缓存。如果我替换现有的 .js 文件（我通过压缩器运行了一个），它不再被缓存。如果我用原始文件替换新文件，它们会再次被缓存。

我找不到有关此的任何文档...有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-04T16:07:25.387

我找到了这个参考：

> 解决缓存问题
> 
> 在这里，我很乐意分享我用来解决问题的出色调试和解决问题的技巧。只有我不能，因为我永远无法弄清楚哪里出了问题。对我来说，使用简单的重载 [setCache(key,object)] 似乎无法正常工作。
> 
> 我最终所做的是使用与 Url Dictionary 缓存相同的代码。这是一个不同的重载，因为它使用了回调和固定的过期时间。

这是代码：

```
DateTime absoluteExpiration = DateTime.Now.Add(settings.CacheTime);
DataCache.SetCache(UrlDictKey, urlDict, null, absoluteExpiration, Cache.NoSlidingExpiration, CacheItemPriority.AboveNormal, onRemove, settings.CachePersistRestart); 
```

> 此代码使用不同的重载，并且由于某种原因，可以正常工作。测试证实了这一点：以前，当用请求敲击测试服务器时，最终它会因为数据库一次又一次地加载到同一个表的查询而阻塞。现在，将对 sp 进行一次调用，该项目将被缓存，并且请求可以通过而不会阻塞。

在以下位置找到此参考：[http ://www.ifinity.com.au/Blog/Technical_Blog/EntryId/55/DotNetNuke-Caching-and-a-performance-problem/](http://www.ifinity.com.au/Blog/Technical_Blog/EntryId/55/DotNetNuke-Caching-and-a-performance-problem/)

希望我至少能够帮助您或为您指明正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-09T05:25:41.833

仅供参考，这可能有点偏离主题，但 DotNetNuke 将它的很多模块缓存到 /portals/ 目录中的平面文件中（这是默认缓存设置）。在主机菜单下，您可以清除此缓存和/或更改缓存设置。

DotNetNuke 5.x 已经完全重新架构，因此如果您正在寻找高性能，您可能需要检查一下。DotNetNuke.com 站点的性能在从 4.9.x 迁移到 5.0 时显着提高。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-12T05:13:11.883

我不会想到 DNN 会提供资产/静态文件（例如图像）。我认为他们只会由 IIS 直接提供服务。除非网址是这样的：

```
blah.com/GetImage.aspx?filename=logo.jpg 
```

如果您的 URL 在某处没有“aspx”，那么 IIS 就是问题所在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-16T13:45:32.817

客户端上的缓存依赖于 Web 服务器将发送给您的浏览器的一组特定 HTTP 标头，您的浏览器在后续请求相同对象（即徽标图像）时使用这些标头。

当您替换文件时，Web 服务器将更改它正在生成的响应（HTTP Last-Modified/ETag 标头） - 这将使您的浏览器缓存副本无效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-18T17:03:54.097

确保您的 IIS 实例设置为启用内容过期。我发现在我的几个托管站点上，这没有设置，缓存也没有按照应有的方式完成。我让他们启用它，现在我的图像和“静态”文件正在正确缓存。

好运J

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-05T12:41:12.817

我不了解 DotNetNuke，但您需要通过为相同的文件名提供不同的 URL 来破坏/终止缓存。看看大佬们是怎么做的：

堆栈溢出：/js/question.min.js? **v=2527**

斜线点：images.slashdot.org/idlecore-tided.css？**T_2_5_0_244a**

挖掘：/css/ **176** /global.css

bbc.co.uk：/home/release-29-7 **/style/homepage.min.css** _

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-07T07:00:36.940

您是否查看过我认为的主机设置下的缓存设置？

# winapi - 从 Win32 切换到 Windows Mobile 6：任何提示？

> ID：598898
> 
> 赞同：1
> 
> 时间：2009-02-28T23:36:43.203
> 
> 标签：winapi, windows-mobile

我从一个 Windows Mobile 项目开始（没有 .NET Compact Framework - 只是本机代码）。多年来，我一直是一名 Win32 程序员（托管和本地），我的大脑中可能有一些“桌面主义”，它们不能很好地转化为移动世界。

对于刚开始从桌面进行 WinMo 开发的人，您是否有任何关于典型陷阱的提示？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-28T23:48:56.497

我最大的建议是

*   谨慎使用资源（内存、线程）
*   在实际硬件上测量一切的性能，而不是模拟器。

在所有移动/嵌入式硬件上，这些通常都是好事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-01T22:36:05.057

TTC - 信任编译器（如果它是 VS2005 或 VS2008 中的编译器）。仅仅因为它是一个缩小的系统并不意味着它是一个缩小的编译器。我向你保证，它知道自己在做什么。所以不要试图为“优化”玩肮脏的把戏——它**是**一个很好的编译器。

# sql-server - 使用 ajax 运行 db 查询（sql server 2005）。是否可以？

> ID：598900
> 
> 赞同：0
> 
> 时间：2009-02-28T23:37:48.553
> 
> 标签：sql-server, ajax, sql-server-2005

我从来没有使用过ajax。

我需要知道是否可以使用 ajax 在数据库（sql server 2005）上运行查询。

我的目标是通过刷新页面运行查询。

你有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-28T23:41:26.237

直接说不行。这是一件非常好的事情，因为 JavaScript 通常运行在不受信任的机器上。

但是让你的 AJAX 触发一个回调（例如一个帖子）然后让它在服务器端进行查询应该很容易。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-01T00:44:58.017

正如[MarkusQ](https://stackoverflow.com/questions/598900/run-db-query-sql-server-2005-with-ajax-is-it-possible/598903#598903)所说，直接这样做是不可能的，但是您可以调用 Web 服务或页面方法来执行数据库查询并将结果返回给客户端。

类似这样的页面方法（这是我的头顶，未经测试。我还假设您使用的是 asp.net 3.5）

```
public partial class _Default : Page 
{
  [WebMethod]
  public static string PerformDatabaseQuery()
  {
      using (SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["myConnectionString"].ConnectionString)
      {
          using (SqlCommand cmd = con.CreateCommand())
          {
              cmd.CommandText = "SELECT records FROM myTable";
              cmd.CommandType = CommandType.Text;

              con.Open();

              SqlDataReader reader = cmd.ExecuteReader();
              StringBuilder sb = new StringBuilder();

              while (reader.Read())
              {
                   sb.Append((string)reader["records"]); 
                   //May want to do some other formatting here
              }

              return sb.ToString();
          }
      }
  }
} 
```

然后从客户端调用页面方法。我将在这里使用 jQuery

```
$.ajax({
  type: "POST",
  url: "Default.aspx/PerformDatabaseQuery",
  data: "{}",
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: function(result) {
    //Do something with the returned data
  }
}); 
```

`EnablePageMethods = true`您可以使用 JavaScript 和在控件上设置时生成的 JavaScript 代理类调用它`ScriptManager`。

```
function CallPerformDatabaseQuery()
{
    PageMethods.PerformDatabaseQuery(onSuccess,onFailed);
}

function onSuccess(result,userContext,methodName)
{
  // Do something with returned data
}

function onFailed(error,userContext,methodName)
{
  alert("An error occurred")
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-07T14:31:05.813

AJAX => 客户端 PHP / ASP / X => 服务器端（以及数据库）

基本上，任何客户端“现在”都在发生，而服务器端脚本“已经发生”。

您不能使用 JS 或类似的东西对数据库执行查询，AJAX 只不过是一种用户体验错觉，即使我们可以谈论“通过 AJAX 获取数据库记录”，这实际上并不是正在发生的事情。

如果 AJAX 只是更多的 JavaScript（异步 JS，即发生在它自己的“时间线”/线程中，而不是主线程中），那么这意味着从数据库中获取数据（或通过 AJAX 做任何事情）将是与具有静态执行此操作的脚本的链接相同，这意味着，您单击此处，您将被带到一个获取（服务器端）并显示（客户端）信息的页面。

现在想象一下，您只是这样做，但不是将主线程带到该操作，而是触发一个异步线程（例如，它将像任何其他链接一样工作）将发布/获取数据并获得 X 响应，稍后您可以通过 JS 处理，从而给您“实时查询”的错觉。

# linux - 为什么某些 linux shell 的日期时间是 2009 年 2 月 24 日星期二 13:03:40 SGT 为什么有些是 2009 年 2 月 24 日星期二 1:03:41 PM SGT

> ID：598905
> 
> 赞同：0
> 
> 时间：2009-02-28T23:42:27.573
> 
> 标签：linux

为什么某些 linux shell 的日期时间是 2009 年 2 月 24 日星期二 13:03:40 SGT 为什么有些是 2009 年 2 月 24 日星期二 1:03:41 PM SGT

SYSDATE SQL 语句真的是从服务器 linux date 命令派生的日期/时间吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-01T00:16:19.193

我不完全清楚你在问什么。您是在问为什么格式与一台 Linux 机器不同？如果是这种情况，我能想到你会关心的唯一原因是因为你有一些应用程序正在解析命令的输出。在这种情况下，您应该精确地指定您想要的格式，本地系统设置是什么并不重要。

您发布的第一个日期的格式是“ `%a %b %d %H:%M:%S %Z %Y`”

[您可以在date 命令手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?date)中找到这些选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-28T23:44:52.017

TZ 环境变量是否设置在其中一个 shell 中？TZ 变量可用于设置 shell 的时区，例如，请参见[此处](http://www.gnu.org/software/libtool/manual/libc/TZ-Variable.html)。

# drupal - How can I create a search block with Taxonomy terms and Keyword search in drupal 5?

> ID：598906
> 
> 赞同：1
> 
> 时间：2009-02-28T23:44:38.740
> 
> 标签：drupal, drupal-5

I'm trying to create a search block like the one on [Top Notch Themes](http://www.topnotchthemes.com/browse?page=1) where the users can choose one or more taxonomy terms and then do a keyword search within content that matches those terms. I was trying to figure out how to do this with Views but that didn't work right. It wanted to suggest the terms and then filter the view.

So I found [Faceted Search](http://drupal.org/project/faceted_search) on drupal.org. I'm testing that now, and I'm going to try Views Fast Search as suggested by Jeff

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-01T00:02:44.843

A combination of exposed filters in Views and the use of the [Views Fastsearch](http://drupal.org/project/views_fastsearch) module may be able to help. It lets you set up exposed filters above a View that use the search index itself to do their filtering; It's a lot like building your own custom pre-filtered search form, where you can use Views to control the output.

Depending on how much data you have and how complex the view you're building is, it can be slow: it's doing all of Views' querying, and pulling in the search index on top of it.

# silverlight - Silverlight 页面未捕获输入事件

> ID：598910
> 
> 赞同：-1
> 
> 时间：2009-02-28T23:46:42.137
> 
> 标签：silverlight, xaml, event-handling, user-input, event-routing

我一直在尝试在我的 Silverlight 应用程序中处理 UserControl（页面）的 KeyDown 事件，但 Silverlight 用户输入功能部分似乎存在一些奇怪的行为。在任何情况下都不会引发该事件。我什至尝试将事件处理程序附加到 UserControl 中的每个容器控件，但仍然没有运气。确实，Silverlight 用户输入“事件路由”系统很新颖，对我来说似乎很奇怪，所以也许这只是我的一个误解，尽管我对如何进行相当无知。

以下代码是我正在测试的特定页面的模板。

```
<UserControl x:Class="MyNamespace.CreditsPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
             KeyDown="UserControl_KeyDown">
    <Grid x:Name="LayoutRoot">
        <Border>
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Orientation="Vertical">
                <TextBlock TextAlignment="Center">
                A line of text.<LineBreak />
                <LineBreak />
                A line of text.<LineBreak />
                <LineBreak />
                A line of text.<LineBreak />
                <LineBreak />
                A line of text.<LineBreak />
                </TextBlock>
            </StackPanel>
        </Border>
    </Grid>
</UserControl> 
```

在 WPF 中，此类问题的明显解决方案是处理 PreviewKeyDown 事件，但不幸的是，这在 Silverlight 2 中不可用。欢迎任何想法（以及为什么 Silverlight 事件路由的行为如此的简短解释）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-01T23:46:26.433

您可以从主 UIElement 管理用户输入：Application.Current.RootVisual

```
Application.Current.RootVisual.KeyDown += Application_KeyDown 
```

然后，您可以在 Application_KeyDown 方法中处理来自键盘的所有用户输入。

你也可以看看这个问题：[Handling KeyDown event in a Canvas](http://www.silverlightissues.com/issue.php5?i=18)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-01T03:02:07.877

我尝试了您提供的 xaml，并且在处理 KeyDown 事件时没有问题。

可能导致它的一件事：Silverlight 插件只有在获得焦点时才会看到输入事件。因此，请尝试在浏览器中单击 Silverlight 内容，在按键之前为其提供输入焦点。

让我知道这是否解决了您的问题。

# c++ - 关于 C++ 模板最重要的事情……经验教训

> ID：598913
> 
> 赞同：13
> 
> 时间：2009-02-28T23:47:18.920
> 
> 标签：c++, templates

您对模板了解的最重要的事情是什么：隐藏的功能、常见错误、最佳和最有用的做法、提示...**常见错误/疏忽/假设**

我开始使用模板实现我的大部分库/API，并希望收集在实践中发现的最常见的模式、技巧等。

让我正式提出这个问题：关于模板，您学到的最重要的事情是什么？

请尝试提供示例——这样更容易理解，而不是复杂和过于枯燥的描述

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-03-01T01:22:19.253

From **"Exceptional C++ style", Item 7:** function overload resolution happens *before* templates specialization. Do not mix overloaded function and specializations of template functions, or you are in for a nasty surprise at which function actually gets called.

```
template<class T> void f(T t) { ... }   // (a)
template<class T> void f(T *t) { ... }  // (b)
template<> void f<int*>(int *t) { ... } // (c)
...
int *pi; f(pi); // (b) is called, not (c)! 
```

On top of **Item 7**:

Worse yet, if you omit the type in template specialization, a *different* function template might get specialized depending on the order of definition and as a result a specialized function may or may not be called.

Case 1:

```
template<class T> void f(T t) { ... }  // (a)
template<class T> void f(T *t) { ... } // (b)
template<> void f(int *t) { ... }      // (c) - specializes (b)
...
int *pi; f(pi); // (c) is called 
```

Case 2:

```
template<class T> void f(T t) { ... }  // (a)
template<> void f(int *t) { ... }      // (c) - specializes (a)
template<class T> void f(T *t) { ... } // (b)
...
int *pi; f(pi); // (b) is called 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-01T01:45:56.343

This may not be popular, but I think it needs to be said.

Templates are complicated.

They are awesomely powerful, but use them wisely. Don't go too crazy, don't have too many template arguments... Don't have too many specializations... Remember, other programmers have to read this too.

And most of all, stay away from template metaprogramming...

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-01T01:11:01.060

I'd have to say Coplien's [Curiously Recurring Template Pattern (CRTP)](http://en.wikipedia.org/wiki/Curiously_Recurring_Template_Pattern) is the one template trick that I find myself reaching for over & over again. Essentially it allows you to inject statically customized functionality into a derived class by inheriting from a base class that is parameterized on the derived class name. Mind boggling, but amazingly useful (some call it static polymorphism).

Also, I'll second Neil Butterworth's advice to read "C++ Templates" and throw in Alexandrescu's [Modern C++ Design](https://rads.stackoverflow.com/amzn/click/com/0201704315).

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-01T19:07:50.847

Template Tip of the Day: Did you know you can specialize chosen functions of template instantiations:

```
#include <iostream>
#include <vector>

namespace std {
    template<>
    void vector<int>::clear() {
    std::cout << "Clearing..." << std::endl;
    resize(0);
    }
}

int main() {
    std::vector<int> v;
    v.push_back(1);
    v.clear();
} 
```

ouputs: Clearing...

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-02-28T23:59:56.393

这个问题有点像“我将使用函数来实现我的大部分库，使用函数的常见错误是什么？” 很难对这些问题提出明智的答案，但这是我的建议——读一本好书。我推荐 Vandevoorde & Josuttis 的“ [C++ 模板](http://www.josuttis.com/tmplbook/tmplbook.html)”，

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-03-02T21:13:04.267

One common mistake is that a template constructor or assignment operator will not suppress the compiler generated one:

```
template <typename T>
class A {
public:
  template <typename S>
  A(A<S> const &);

  template <typename S>
  A & operator=(A<S> const &);

private:
  int * i;
}; 
```

Although these functions look like the copy constructor and copy assignment operator, the compiler does not see it that way and generates the implicit versions anyway. The result is that any actions performed by these functions (eg. deep copy of a member) will not take place when the object is copied or assigned to from the same type:

```
void foo (A<int>);

void bar () {
  A<int> a1;
  foo (a1);   // Implicitly generated copy ctor called

  A<long> a2;
  foo (a2);   // Template ctor called.

  A<int> a3;
  a3 = a1;   // Implicitly generated copy assignment operator called

  a3 = a2;   // Template assignment operator called
} 
```

The reason for this behaviour is due to a special rule in overload resolution (13.3.3):

> Given these definitions, a viable function F1 is defined to be a better function than another viable function F2 if for all arguments i, ICSi(F1) is not a worse conversion sequence than ICSi(F2), and then

[...]

> — F1 is a non-template function and F2 is a function template specialization, or, if not that,

In the examples above, overload resolution sees two functions with the same signature, one of which is a template. The non template function (the implicitly generated copy constructor/copy assignment operator) wins and so is called.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-01T00:25:15.133

[STL](http://www.sgi.com/tech/stl/)是您的朋友。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-03-01T01:08:38.647

以下是一些规则：

1.  除非您正在编写一个非常非常通用的库（STL 和 Boost 是两个突出的例子），否则不要编写任何模板。
2.  不要多次实例化任何重要的模板。实例化巨大的模板类尤其过分。您应该考虑使用继承和多态（简单的方法，我的意思是，使用虚函数）。
3.  如果您正在编写任何模板，知道何时使用`const`，`mutable`并且`volatile`将节省模板用户的编译和执行时间。
4.  如果您要实例化任何模板，请使用好的编译器。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-03-01T01:11:38.797

Read Meyers's Effective STL and C++ books, and Alexandrescu's Modern C++ Design.

Meyers will give you the basics on easy mistakes to make and how to avoid them. Alexandrescu introduces you to a template-based programming model that should have you asking "Is this *really* a good idea?" the entire book.

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-03-01T01:37:40.730

I tend to use templates quite a lot to avoid duplication of code, and to increase safety through compile checks.

In general, it helps to think while typing about what the compiler is going to do, and how the code will be generated for each type.

Being very iterative in development and building the template complexity little by little has helped me avoiding sinking in compile error messages. Don't forget to keep a simple (or mock) instantiation of the template somewhere, otherwise you might have some nasty surprises when you instantiate a monster template for the first time.

Finally, when there is no way out, get to read these compile error messages! They might look quite scary at first, but they really are helpful. Maybe at first extracting the first one, copying it in a text editor and making it look pretty will help getting used to them, and it quickly becomes second nature to read through.

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-02-28T23:51:56.710

了解单独编译和导致可执行文件大小增加的可能性很重要。如果您在多个 C++ 文件中实例化具有相同类型的模板，您将多次复制该类型，至少在某些编译器上是这样。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-04-06T18:21:06.467

I've used c++ and templates a lot, including more advanced template metaprogramming and my feeling is that their usefulness is overrated. They were originally added to the c++ language, well after the creation of c++, to tack on a generic programming capability. This simply allows one to focus on the logic of the code without regard for types, potentially making code clearer and reusable.

My programming philosophy is to understand the original purpose and design of the language and it's features in order to really appreciate the language. I feel template metaprogramming is bastardization of templates and should be avoided. Templates are however useful for defining higher level generic types such as the case of Tuples.

# objective-c - Objective-C / Cocoa：Interface Builder / Nib 中的“应用程序”代理对象有什么用？

> ID：598917
> 
> 赞同：3
> 
> 时间：2009-02-28T23:50:46.137
> 
> 标签：objective-c, cocoa

有人有一个易于理解的例子吗？这个 Application 对象有什么好处？为什么会在那里？在什么情况下我需要它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-01T02:49:24.163

它是一个指向共享 NSApplication 对象的指针。请参阅类参考以了解 NSApplication 可以做的所有事情，但基本上您在 IB 窗口中看到它的原因是，您可以轻松地将委托设置为您的控制器对象，并连接菜单命令，如终止：。

# .net - 以提升的权限启动的抓取控制台输出

> ID：598925
> 
> 赞同：0
> 
> 时间：2009-02-28T23:57:34.387
> 
> 标签：.net, redirect, console, uac

我正在编写一个需要提升权限的命令行工具。这可以使用清单成功实现。

但如果从 cmd.exe 或 Far Manager (far.exe) 启动此工具，则会创建一个新的控制台窗口。因此，所有工具控制台输出都会写入其中，并在关闭时丢失。

所以我的想法是实现一个分叉，其中代码的第一部分使用一些参数调用相同的可执行文件并`Process.ProcessStartInfo`获得额外的收益`UseShellExecute = true`，`Verb = "runas"`; 另一部分，称为参数，正在执行提升特权所需的操作。

是否可以通过从第二个实例获取输出并将其重定向到第一个实例来“虚拟化”我的工具重新启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-01T00:06:34.833

如果可能，这是一个潜在的安全问题。如果任何进程可以启动另一个进程（甚至它自己）并拦截其输出，则可能导致信息泄露。

# python - 类（Python）和结构（C）之间的区别

> ID：598931
> 
> 赞同：2
> 
> 时间：2009-03-01T00:03:43.203
> 
> 标签：python, c

我是 python 新手。我研究过 C 并且注意到 C 结构（结构）似乎与 python 中的“类”具有相同的任务。那么，从概念上讲，区别是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-03-01T00:16:32.047

结构封装数据。

类封装行为和数据。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-03-01T00:08:08.700

除了实现方式之间存在许多技术差异之外，它们的用途大致相同：数据的组织。

最大的区别在于，在 Python（以及其他面向对象的语言，如 C++、Java 或 C#）中，一个类也可以有与其关联的函数，这些函数只对类的实例进行操作，而在 C 中，函数希望要对结构进行操作，必须以某种方式将结构作为参数接受，通常是通过指针。

我不会深入研究两者之间的技术差异，因为它们相当重要，但我建议您研究[面向对象编程](http://en.wikipedia.org/wiki/Object-oriented_programming)的概念。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-01T00:10:30.923

无需一页一页地详细介绍，将 C 结构视为一种组织数据的方式，而 Python（或 C++ 或 Objective-C）“类”不仅是一种组织数据的方式，而且是一种组织操作的方式对于该数据。例如，Python“类”可以从其他对象继承，从而为您提供与之关联的数据的交互器（或者您可以在类中编写自己的交互器）。我敢肯定，还有更多要说的，但这很快就进入了“什么是 OOP”，远远超出了这个线程的范围。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-01T00:52:41.260

没有提到的一件事是 C 结构是值类型，而 Python 类是引用类型。

例如，考虑以下语句：

```
var1 = var2 
```

如果 var1 和 var2 是 C 结构，那么该语句会将 var2 的内容复制到 var1 中。那是**按值复制**。

但是，如果 var1 和 var2 是 Python 对象，那么该语句将使 var1 引用 var2 所引用的对象。（它们就像 C 中指向结构的指针。）这是**按引用复制**。

将参数传递给函数时也会发生同样的事情（因为必须将它们复制到函数中）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-01T00:09:14.360

类通常具有与之关联的方法（主要是函数），而 C 结构则没有。如果您想有效地使用 Python（或任何其他面向对象的语言，如 Java 或 C++）中的类，您可能想了解什么是面向对象编程。

当然，可以像使用 C 结构一样使用 Python 类作为数据容器。但这并不经常发生。

# ruby-on-rails - 如何更改默认的“www.example.com”域以在 Rails 中进行测试？

> ID：598933
> 
> 赞同：70
> 
> 时间：2009-03-01T00:05:41.810
> 
> 标签：ruby-on-rails, rspec

我有一个 Rails 应用程序，它的行为取决于它访问的域（例如 www.myapp.com 将调用不同的 user.myapp.com）。在生产使用中，这一切正常，但我的测试代码总是看到“www.example.com”的主机名。

有没有一种干净的方式让测试指定它假装访问的主机名？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2015-03-13T16:36:58.393

我认为这里所有的答案都不完整......列举所有可能的情况：

*   **集成规范**（继承自`ActionDispatch::IntegrationTest`）：

    ```
    host! "my.awesome.host" 
    ```

    请参阅[文档](http://guides.rubyonrails.org/testing.html#integration-testing)，第 5.1 节*可用于集成测试的帮助程序*。

*   **控制器规格**（继承自`ActionController::TestCase`）

    ```
    @request.host = 'my.awesome.host' 
    ```

    请参阅[文档](http://guides.rubyonrails.org/testing.html#functional-tests-for-your-controllers)，第 4.4 节*可用的实例变量*。

*   **功能规格** （通过 Capybara）

    ```
    Capybara.default_host = "http://my.awesome.host"
    # Or to configure domain for route helpers:
    default_url_options[:host] = "my.awesome.host" 
    ```

    来自[@AminAriana 的回答](https://stackoverflow.com/a/28683776/143243)

*   **查看规格**（继承自`ActionView::TestCase`）

    ```
    @request.host = 'my.awesome.host' 
    ```

    ...或通过 RSpec：

    ```
    controller.request.host = "my.awesome.host" 
    ```

    请参阅`rspec-rails` [视图规范文档](http://rspec.info/documentation/3.6/rspec-rails/#View_specs)。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2009-03-01T02:33:03.063

```
@request.host = 'user.myapp.com' 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2015-02-23T21:27:45.043

## 功能规格

在功能规格中，主机！已被弃用。将这些添加到您的`spec_helper.rb`：

```
# Configure Capybara expected host
Capybara.app_host = "http://test.domain"

# Configure actual routes host during test
before(:each) do
  default_url_options[:host] = <myhost>
end 
```

## 请求规格

在请求规范中，继续使用主机！：

```
host! "test.domain" 
```

或者在块中重构它，或者在级别上`before(:each)`为请求规范全局配置它：`spec_helper.rb`

```
RSpec.configure do |config|
  config.before(:each, type: :request) do
    host! "test.domain"
  end
end 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-04-05T20:03:56.570

对于 Rspec 请求规范，请使用`before(:each) { host! 'example.com' }`

查看更多信息： [https ://relishapp.com/rspec/rspec-rails/v/3-6/docs/request-specs/request-spec](https://relishapp.com/rspec/rspec-rails/v/3-6/docs/request-specs/request-spec) [https://github.com/rspec/rspec-rails/issues/1662 #issuecomment-241201056](https://github.com/rspec/rspec-rails/issues/1662#issuecomment-241201056)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-03-01T02:23:10.217

我相信您可以修改`HTTP_HOST`or`SERVER_NAME`环境变量来更改发送到路由器的请求：

```
ENV['SERVER_NAME'] = "user.myapp.com" 
```

参见[actionpack/lib/action_controller/](http://github.com/rails/rails/blob/8607740a29d0f9ceb2ca21c9ef714f74b64d4a88/actionpack/lib/action_controller/request.rb) request.rb `raw_host_with_port`。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-09-24T15:33:59.097

要记住的另一件事是确保使用**正确的会话实例**，以便您可以正确封装 url 助手。

集成测试为您提供默认会话。您可以直接从测试中调用[所有会话方法](http://apidock.com/rails/ActionController/Integration/Session)

```
test "should integrate well" do
  https!
  get users_path
  assert_response :success
end 
```

所有这些助手都使用默认会话实例，如果不更改，则转到“www.example.com”。正如已经提到的，主机可以通过做主机来改变！（“my.new.host”）

如果您使用 open_session 方法创建多个会话，则必须始终使用该实例来调用辅助方法。这将正确封装请求。否则，rails 将调用可能使用不同主机的默认会话实例：

```
test "should integrate well" do
  sess = open_session
  sess.host! "my.awesome.host"
  sess.get users_url             #=> WRONG! will use default session object to build url.
  sess.get sess.users_url        #=> Correctly invoking url writer from my custom session with new host.
  sess.assert_response :success
end 
```

如果您打算使用默认会话对象，那么您还必须更改该主机：

```
test "should integrate well" do
  sess = open_session
  sess.host! "my.awesome.host"
  host! sess.host              #=> Set default session host to my custom session host.
  sess.get users_url
end 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2010-06-18T03:29:40.333

`@request.host = 'user.myapp.com'`是不正确的。应该使用`host!('user.myapp.com')`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-04-08T20:38:53.480

作为控制器测试和功能测试，我尝试了 , 的许多变体`@request.host`，但均未成功。非常令人恼火，因为许多其他人报告说这些方法取得了成功。`host!``post path, args, {'SERVER_NAME' => my_secret_domain}`

我的解决方案是：

```
request.headers["SERVER_NAME"] = my_secret_domain
post path, args 
```

我正在运行 ruby​​ 2.1.5p273、rspec 3.1.7 和 Rails 4.2.0

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-02-19T11:43:20.097

当时其他答案中建议的方法都不适合我。这有效：

```
Capybara.configure { |config| config.default_host = "my.domain.com" } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-04-06T07:07:28.900

还有一个答案：

```
request.host = "user.myapp.com" 
```

我知道它类似于正确答案，但请多多包涵。我不喜欢测试中的赋值操作只是为了设置，我更喜欢显式存根。有趣的是，这样的存根是**行不通**的：

```
allow(request).to receive(:host).and_return("user.myapp.com") 
```

我个人更喜欢存根而不是赋值，这样我可以获得两个好处，一个是它将由**rspec 的 verify double**进行验证，第二个是它明确表示这是一个存根，而不是测试练习的一部分。

# c++ - 为什么在创建支持该接口的对象时会得到 E_NOINTERFACE？

> ID：598939
> 
> 赞同：0
> 
> 时间：2009-03-01T00:08:26.420
> 
> 标签：c++, windows, visual-studio-2008, com

**笔记：**

*   使用[CoGetClassObject](http://msdn.microsoft.com/en-us/library/ms684007(VS.85).aspx) ，通过系统注册表中有 CLSID 的类对象创建**多个对象**

*   单线程公寓

例如**：**

```
hresult = CoInitializeEx(NULL, COINIT_APARTMENTTHREADED);

IClassFactory *pIClassFactory;

hresult = CoGetClassObject (clsid, CLSCTX_LOCAL_SERVER, NULL, IID_IClassFactory, (LPVOID *)&pIClassFactory);

hresult = pIClassFactory->QueryInterface (IID_IUnknown, (LPVOID *)&pUnk);

hresult = pUnk->QueryInterface (__uuidof(IExample), (LPVOID *)&pISimClass); 
```

**笔记：**

*   **返回 **E_NOINTERFACE**

    *   *ppvObject 设置为**NULL**** 

 ****问题：**

*   我如何确认它确实已注册 - 如果这是问题所在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-01T00:34:12.600

这里的问题是您混淆了类对象和对象本身。`CoGetClassObject`将为您提供一个指向对象的指针，该对象实现`IClassFactory`并打算创建您感兴趣的对象的实例。它不是该对象的实际实例。

在您的示例中，您`IUnknown`通过调用指针`QueryInterface`来获取`IClassFactory`指针。该指针仍然指向类对象的实例，因此`QueryInterface`对您感兴趣的接口执行操作会导致错误。相反，您需要调用[`IClassFactory::Createinstance`](http://msdn.microsoft.com/en-us/library/ms682215(VS.85).aspx)以获取`IUnknown`指向实际对象的指针并`QueryInterface`对该指针执行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-01T22:21:06.857

另外，看看 CoCreateInstance 函数。

# c++ - 创建项目，从 Makefile 到 UNIX 中的静态/动态库

> ID：598948
> 
> 赞同：17
> 
> 时间：2009-03-01T00:13:30.340
> 
> 标签：c++, c, makefile, unix

伙计们，你能在 unix 上描述一些关于 c++ 构建块的事情吗？

我想创建一个链接到静态库和动态库（.so）的应用程序。

**问题 1：** *如何使用 gcc/g++ 创建静态库？如何使我的应用程序链接到它。*

**问题2：** *如何在makefile中指定它，链接静态和动态库，假设两个库都有头文件*

简介：多年来，我一直在使用由其他人编写的 makefile 和库。因此，每次修改它，我只是简单地剪切和粘贴周围的东西，并没有真正理解它。现在我想深入了解构建/链接/创建 Makfile 的过程。

*哪本好书详细描述了这些概念？*

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-03-01T00:24:46.520

静态库通常使用命令*归档。*`ar`一旦你构建了所有的目标文件（最好使用`-fPIC`GCC 上的开关），你可以`ar`像这样运行：

```
ar -rs archivename.a list.o of.o objects.o 
```

该`man`页面描述了这些选项。

动态库通常使用`-shared`切换到`gcc`or`ld`和带有`.so`扩展名的输出文件名来构建。

Autotools 用程序处理这个问题`libtool`。我不熟悉它的用途。

链接这些库可以通过使用`-l`(ell) 开关列出库（例如`-lX`链接到`libX.so`）或通过使用绝对路径直接指定它们（例如添加`/usr/lib/libX.so`到您的命令）来完成。静态库通过指定`-static`之前或存档`-l`的适当绝对路径来链接。`.a`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-03-01T00:25:10.093

用于创建由 foo.cpp、bar.cpp 中的代码组成的静态库的基本 Makefile：

```
PROJECT = library.a
OBJECTS = foo.o bar.o
CFLAGS  = -Wall -pedantic

all: $(PROJECT)

.cpp.o:
        g++ -c $(CFLAGS) $<

$(PROJECT): $(OBJECTS)
        libtool -o $(PROJECT) -static $(OBJECTS) 
```

静态链接到 library.a 的应用程序 baz.cpp 的基本 Makefile：

```
PROJECT = baz
CFLAGS  = -Wall -pedantic
OBJECTS = baz.o

all: $(PROJECT)

.cpp.o:
        g++ -c $(CFLAGS) $<

$(PROJECT): $(OBJECTS) library.a
        g++ $(OBJECTS) -L. -llibrary -o $(PROJECT) 
```

留下动态库，咳咳，给读者做个练习。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-01T08:02:12.490

答案 1：要从源文件 foo.c 和 bar.c 创建静态库，请执行以下操作：

```
gcc -c foo.c
gcc -c bar.c
ar rc mylibrary.a foo.o bar.o 
```

有关这方面的更多信息，请阅读[GCC 手册](http://gcc.gnu.org/onlinedocs/) 以了解如何使用编译器以及通过编译器的链接器。[binutils 手册](http://sourceware.org/binutils/docs/binutils/index.html)也应该有所帮助。

答案 2：[GNU Make 手册](http://www.gnu.org/software/make/manual/)非常好。要真正了解库及其工作方式，请阅读 John R. Levine 的**Linkers and Loaders** 一书。

静态库非常简单，但共享库可能非常繁琐，具体取决于平台以及您想要和需要的可移植性。例如，在某些系统上，静态库和共享库必须使用不同的选项编译才能正常工作（一个必须编译，另一个不得编译位置无关代码）。已经开发了整个实用程序框架以使这更容易（libtool），但它们本身并不是没有问题的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-01T08:06:08.097

由于您提到 gcc，我假设您使用的是 GNU Make。我为此找到的最好的文档是[官方手册](http://www.gnu.org/software/make/manual/)，它以易于理解的术语涵盖了您需要了解的所有内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-01T09:22:57.727

当我学习 Linux 编程时，[高级 Linux 编程](http://www.advancedlinuxprogramming.com/alp-folder)对我帮助很大。[您可以查看此 pdf](http://www.advancedlinuxprogramming.com/alp-folder/alp-ch02-writing-good-gnu-linux-software.pdf)中的编写和使用库部分。它解释了很多关于 Linux 中的库的信息。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2010-04-12T13:58:44.473

您可能也想看看这个：http: [//www.faqs.org/docs/Linux-HOWTO/Program-Library-HOWTO.html](http://www.faqs.org/docs/Linux-HOWTO/Program-Library-HOWTO.html)

# c# - C# 安全工具编码

> ID：598949
> 
> 赞同：0
> 
> 时间：2009-03-01T00:14:58.497
> 
> 标签：c#, security

我在学校用 C# 编码大约 3/5 年。问题是我想了解你如何编写键盘记录器之类的东西。在学校里，学习我们像程序员一样思考是最能解决问题的。

那么我应该如何学习编写网络/安全工具。我应该买一本关于 C# 网络编程的书吗？或者你有什么建议从哪里开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-01T00:27:21.383

如果您想构建键盘记录器或网络数据包分析器之类的东西，则必须使用比 C# 通常提供的更低的层。您将需要更多地了解操作系统、它的网络堆栈、它如何与输入设备交互等等。

请记住，有些事情在 C# 中甚至可能不可行。您将不得不进行大量 Win32 互操作，有时甚至需要编写 C++ 代码。

我建议你找一本描述 Windows 内部的书，例如Mark Russinovich 和 David Solomon 的[Windows Internals](https://rads.stackoverflow.com/amzn/click/com/0735625301)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-01T03:52:02.420

正如 Franci 所说，这些事情需要您使用 OS API 并了解很多主题。键盘记录器可以用 C# 完成，几年前我做过一个（不是为了黑客，只是为了在托盘图标运行的应用程序中处理键盘快捷键）。

你应该做的是，首先阅读主题本身（网络、windows 如何管理这些东西、API 等等），然后弄清楚如何在 C# 中访问它。有些资源受操作系统限制，无法访问，但这取决于你想做什么。

PS #1：请注意你的责任。制作有用或有趣的应用程序比将密码窃取给垃圾人要好得多，也更有趣。

PS #2：不，我会给你我的伪键盘记录器源；）

# shell - 如何在 c++ builder 中运行命令行“explorer /n, /select,(filename)”？

> ID：598950
> 
> 赞同：0
> 
> 时间：2009-03-01T00:15:05.750
> 
> 标签：shell, command-line, c++builder

我试过shellexecute，我试过createprocess，我似乎无法让它做任何事情。

手动运行命令行（在控制台窗口中的实际命令提示符处）可以工作，但到目前为止我尝试过的任何操作都不会从 c++ builder 应用程序中运行它。

显然 (filename) 只是一个占位符。它将被赋予一个有效的文件名，例如

资源管理器 /n, /select,c:\123.doc

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-01T00:18:28.253

您是否在文件名中使用了转义的反斜杠？例如：;

```
"c:\123.doc" 
```

应该：

```
"c:\\123.doc" 
```

**编辑：**

```
 execlp("explorer", "/n, /select,c:\\foo.txt", 0) 
```

为我工作。

为避免替换当前进程，请改用**spawnlp**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-01T00:33:24.597

我确信有某种方法可以制作`CreateProcess`和`ShellExecute`使用它，但我怀疑最简单的方法会很古老`system`，例如`system("explorer /n, /select,c:\\123.doc")`.

仅仅因为它困扰着我，我就继续编写了一个简单的程序，用 CreateProcess 来执行此操作：

```
 #define UNICODE
 #include <windows.h>
 #include <string>

 void SimpleWriteConsole(std::wstring msg) {
    DWORD written = 0;
    WriteConsole( GetStdHandle(STD_OUTPUT_HANDLE),
          msg.c_str(), msg.length(), &written, NULL);
 }

 int wmain(int argc, wchar_t **argv, wchar_t **envp) {
    SimpleWriteConsole(L"Opening explorer...\n");
    std::wstring commandLine = L"explorer /n, /select,";
    if( argc < 2 ) {
       SimpleWriteConsole(L"Please include a file to select.\n");
       return EXIT_FAILURE;
    }
    commandLine += argv[1];
    STARTUPINFO startupInfo;
    ZeroMemory(&startupInfo, sizeof(startupInfo));
    startupInfo.cb = sizeof(startupInfo);
    PROCESS_INFORMATION procInfo;

    if( ! CreateProcess(NULL, const_cast<wchar_t*>(commandLine.c_str()), 
             NULL, NULL, 0, 0, NULL, NULL, &startupInfo, &procInfo) ) {
       SimpleWriteConsole(L"Couldn't create process :(\n");
       return EXIT_FAILURE;
    }
    CloseHandle( procInfo.hThread );
    CloseHandle( procInfo.hProcess );
    SimpleWriteConsole(L"Hooray launched explorer.\n");
    return EXIT_SUCCESS;
 } 
```

它将 C:\abc.txt 部分作为命令行上的参数。没有额外的 dos 框，并且不会占用您现有的进程（exec 应该这样做，顺便说一句），并且它不使用已弃用的 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-01T02:03:04.537

好的，这些回复很有用，但不幸的是，它们都有我不想在我的应用程序中出现的缺点......

`execlp()`导致调用进程关闭。

`system()`显示一个dos框，直到我关闭资源管理器窗口。

不过，我很感激你的回答。

我可以使用它`winexec`。即使 winexec 的帮助文件这么说 -

> 注意 提供此功能仅是为了与 16 位 Windows 兼容。应用程序应使用 CreateProcess 函数。

我不能`createprocess`去上班，所以我要坚持`winexec`现在...

```
WinExec(String("explorer /n, /select,"+ FileName).c_str(),SW_SHOWDEFAULT); 
```

# javascript - 检测 HTML 表单上是否至少有一个字段已更改的最简单方法是什么？

> ID：598951
> 
> 赞同：42
> 
> 时间：2009-03-01T00:15:30.787
> 
> 标签：javascript, html

我有一个包含 20 多个字段的 HTML 表单。我在页面上还有几个链接将引导用户离开表单......可能没有保存任何更改。

如果任何表单字段已更改，我想警告（JS 确认）这些链接的用户 onClick，但我不想创建一个巨大的 switch 语句，然后我需要在向表单添加新字段时维护该语句。我知道如何在 Javascript 中创建一长串“if”语句，命名每个字段并检查每个值，但如果我能侥幸逃脱，我不想这样做。

检查用户是否更改了至少一个字段值的最简单方法是什么？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2009-03-01T00:28:12.240

**方法**

1.  在显示之前序列化表单（及其所有值）（[jQuery方式](http://docs.jquery.com/Ajax/serialize)，[原型方式](http://www.prototypejs.org/api/form/serialize)）
2.  [`"onbeforeunload"`](http://www.4guysfromrolla.com/demos/OnBeforeUnloadDemo1.htm)在事件处理程序中再次序列化它

如果两者不匹配，那么它们一定是更改了表单，因此从您的`onbeforeunload`处理程序返回一个字符串（例如“您有未保存的数据”）。

此方法允许表单字段演变，而“确认是否更改”逻辑保持不变。

**示例** *（混合 javascript 和 jquery）*

```
var form_clean;

// serialize clean form
$(function() { 
    form_clean = $("form").serialize();  
});

// compare clean and dirty form before leaving
window.onbeforeunload = function (e) {
    var form_dirty = $("form").serialize();
    if(form_clean != form_dirty) {
        return 'There is unsaved form data.';
    }
}; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-02T20:36:27.227

我很确定这是一个坏主意，但我想把它扔在那里。

表单字段有一种方法可以获取“默认值”（即字段加载时的值），您可以将其与当前值进行比较。如果您将字段添加到表单，则对所有字段进行简单循环即可消除维护需求。

可能有也可能没有与“默认值”属性相关的各种浏览器错误，所以如果没有广泛的测试，我不会相信这种方法。下面的代码是一个概念证明，在任何实际应用程序中都没有（由我使用）。

```
function IsDirty(form) {
    for (var i=0; i<form.elements.length; i++) {
        var field = form.elements[i];
        switch (field.type) {
            case "select-multiple":
            case "select-one":
                var options = field.options;
                for (var j=0; j<options.length; j++) {
                    if(options[j].selected != options[j].defaultSelected) return true;
                }
                break;
            case "text":
            case "file":
            case "password":
                if (field.value != field.defaultValue) return true;
                break;
            case "checkbox":
            case "radio":
                if (field.checked != field.defaultChecked) return true;
                break;
        }
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-03-01T00:22:28.213

使用 jQuery 这很容易。您也应该能够使用相同的前提在 vanilla javascript 中实现相同的结果。

```
var $inps = $('#myForm').find('input,select,textarea')
  , formAltered = false
;
$inps.change(function() {
    formAltered = true;
    $inps.unbind('change'); // saves this function running every time.
}); 
```

唯一的问题是，如果您更改了一个值，然后将其更改回原来的值，它仍会报告表单已更改。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-03-01T00:43:15.337

这是您可以添加到表单中的一个衬里：

```
$(':input',document.myForm).bind("change", function() { 
  enablePrompt(true); }); // Prevent accidental navigation away 
```

然后你可以为你的整个站点创建 enableUnloadPrompt() 函数：

```
function enablePrompt(enabled) {
  window.onbeforeunload = enabled ? "Your changes are not saved!" : null;
} 
```

最后，在您正确提交表单之前，请确保：

```
enablePrompt(false); 
```

这不会检查表单的值是否不同，只有当表单被用户更改时。但是，它简单易用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-01T06:00:09.303

这可以只用一个布尔变量来处理，我们称之为脏位处理。如果您观察到，通常在网页中，一旦用户对任何字段执行某些编辑操作，表单就会被视为脏（已编辑）（即使数据在编辑后保持不变）。当用户尝试离开页面时，系统会提示用户是否要保存更改。

根据标准做法，在编辑某些字段后，如果值实际已更改，则不会检查。例如：如果用户编辑并将“xyz”附加到文本字段，然后删除“xyz”，则表单数据基本上保持与以前相同，但表单仍被视为“脏”，并且当用户收到警告消息时会提示他试图导航离开。

所以，如果你想实现这个事情变得非常简单。您只需将 onchange() 事件处理程序添加到控件中，并在这些事件处理程序内将诸如 isDirty 之类的全局布尔变量设置为 true。

一旦用户想要离开，您可以闪烁一条消息“当前页面上可能有未保存的更改。您希望保存它们吗？”。即使他注意到他的编辑没有改变初始数据，用户也不会失望。

上面给出的答案实现了这种行为。我写这个是因为你似乎有一个想法来检查每个字段的初始值，看看它在编辑后是否真的被改变了。只是想告诉您，根本不需要检查每个字段。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-19T08:42:38.980

多年来，较早发布的答案已经证明了自己（经过一些小的改进）。这是我在 onBeforeUnload 事件函数中使用的函数。

```
/*
** Determines if a form is dirty by comparing the current
** value of each element with its default value.
**
** @param {Form} form the form to be checked.
** @return {Boolean} true if the form is dirty, false otherwise.
*/
function formIsDirty(form) {
    for (var i = 0; i < form.elements.length; i++) {
        var element = form.elements[i];
        var type = element.type;
        switch (element.type) {
        case "checkbox":
        case "radio":
            if (element.checked != element.defaultChecked)
                return true;
            break;
        case "number":
        case "hidden":
        case "password":
        case "date":
        case "text":
        case "textarea":
            if (element.value != element.defaultValue)
                return true;
            break;
        case "select-one":
        case "select-multiple":
            for (var j = 0; j < element.options.length; j++)
                if (element.options[j].selected != element.options[j].defaultSelected)
                    return true;
            break;
        }
    }
    return false;
} 
```

这是 onBeforeUnload 处理函数的示例：

```
 function onBeforeUnload(event) {
        event = event || window.event;
        for (i = 0; i < document.forms.length; i++) {
            switch (document.forms[i].id) {
            case "search":
                break;
            default:
                if (formIsDirty(document.forms[i])) {
                    if (event)
                        event.returnValue = "You have unsaved changes.";
                    return "You have unsaved changes.";
                }
                break;
            }
        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-12T07:15:40.090

就我而言，我结合了@Crescent Fresh 和@nickf 的答案并得到了这个：

```
var formBefore;

var $inps = $('form').find('input,select,textarea');

$(function() {
    formBefore = $("form").serialize();
});

$inps.change(function () {
    var changedForm = $("form").serialize();
    if (formBefore != changedForm) {
        $("#btnSave").css('background-color', 'green');
    } else {
        $("#btnSave").css('background-color', '');
    }
}); 
```

# c# - 为什么在 Javascript 中附加事件处理程序会阻止我的服务器端事件触发？

> ID：598954
> 
> 赞同：1
> 
> 时间：2009-03-01T00:16:27.197
> 
> 标签：c#, asp.net, javascript

多年来我一直在做 C#，但 ASP.NET 的时间不长，这让我很难过。

在我的故障排除示例中，我在 ASP.NET 页面中有一个下拉列表，其中有四个项目，我有一个触发的服务器端事件，`selectedindexchanged`在这种情况下一切都很好。

但是，如果（就像我在进化代码中所做的那样）我为“onchange”事件设置了一个 Javascript 处理程序，（它会启动一个警报）警报工作正常，但服务器端事件不再触发......我确定我错过了一些明显的东西。

重要说明：`Autopostback`在下拉列表控件上设置为 true，viewstate 启用，Javascript 事件处理程序返回 true

任何人？

这不是我必须手动连接`__doPostBack`是吗？

非常感谢任何帮助。

**编辑**

好的，这是代码首先是代码隐藏

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.Text;

namespace TestEvents
{
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected override void OnPreRender(EventArgs e)
    {

        ClientScriptManager csm = Page.ClientScript;
        if (!csm.IsClientScriptBlockRegistered("NotesChangeScript"))
        {
            StringBuilder sb = new StringBuilder();
            sb.Append("\r\n <script type=\"text/javascript\"> \r\n");
            sb.Append(" //<![CDATA[ \r\n");
            sb.Append(" var changesCount = 0; \r\n");

            sb.Append(" function selection_handler()\r\n");
            sb.Append("{ \r\n");
            sb.Append(" changesCount += 1;\r\n");
            sb.Append(" alert('i changed on the client!'); \r\n");
            sb.Append(" return true; \r\n");
            sb.Append(" } \r\n");

            sb.Append(" function SetUpNotesHandler() \r\n");
            sb.Append("{ \r\n");
            sb.Append("          var ctrls = document.getElementsByTagName(\"SELECT\");\r\n");
            sb.Append("          for(i=0;i<ctrls.length;i++)\r\n");
            sb.Append("                  {\r\n");
            sb.Append("                     ctrls[i].onchange = selection_handler; \r\n");
            sb.Append("                 }\r\n");
            sb.Append("}\r\n");

            sb.Append(" //]]> \r\n");
            sb.Append("</script>");

            csm.RegisterClientScriptBlock(this.GetType(), "NotesChangeScript", sb.ToString(), false);

            StringBuilder initScript = new StringBuilder();
            initScript.Append("<script type=\"text/javascript\" >\r\n");
            initScript.Append(" //<![CDATA[\r\n");
            initScript.Append("  SetUpNotesHandler(); \r\n");
            initScript.Append(" //]]> \r\n");
            initScript.Append("</script> \r\n");
            csm.RegisterStartupScript(this.GetType(), "StartUpKey", initScript.ToString(),false);
            base.OnPreRender(e);
        }

    }
    protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        Response.Write("i hit the server event");
    }
} 
```

}

这是页面的标记

```
<%@ Page Language="C#" AutoEventWireup="true"     CodeBehind="Default.aspx.cs"    Inherits="TestEvents._Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
<title>problem</title>
</head>
<body>
<form id="form1" runat="server">
<div>
    <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True" OnSelectedIndexChanged="DropDownList1_SelectedIndexChanged">
        <asp:ListItem>Numero Uno</asp:ListItem>
        <asp:ListItem>Numer Deux</asp:ListItem>
        <asp:ListItem>Number Three</asp:ListItem>
        <asp:ListItem>Nomina Quatros</asp:ListItem>
    </asp:DropDownList>
    <asp:HiddenField ID="hdnFieldChange" runat="server" />
</div>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-01T00:32:01.637

在我看来，您同时有两个同时发生的异步回发，默认情况下，最近的回发优先，您必须更改。您可以在允许下一个继续执行[此处找到的脚本之前强制回发完成每个](http://msdn.microsoft.com/en-us/library/bb386456.aspx)

或者您可以在 onselectedindex 更改事件中处理警报服务器端，例如：

```
 ScriptManager.RegisterClientScriptBlock(Page, Page.GetType(), 
Guid.NewGuid().ToString(),"alert('Person was added 
successfully.');location.replace('people.aspx');",true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-01T00:32:34.473

如果您的 Javascript 事件处理程序取消事件冒泡，调用服务器端代码的 asp.net 插入的事件处理程序将不会运行。

我不熟悉asp.net auto-inserted-things，你还没有发布你的事件处理程序的代码，所以我不能告诉你如何解决这个问题。我的建议是使用 jQuery 来附加您的事件处理程序，而不是返回 false 或以更详细的方式取消事件冒泡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-01T00:43:15.930

将您的脚本分配给这样的 onchange 事件：

```
DropDownList1.Attributes["onchange"] += "alert('alert');"; 
```

不要使用**返回真；**警觉后。

**编辑 ：**

问题出在这里，您通过在其上分配脚本来禁用回发脚本，因此回发脚本不起作用，因为它不再存在：

```
sb.Append("                     ctrls[i].onchange += selection_handler; \r\n"); 
```

希望这可以帮助 ！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-01T23:30:56.127

好的，首先，感谢 ScarletGarden 明确了问题所在，我已经假设了很多，但是当有人证实你的怀疑时，这很好。

其次，向那些认为这是某种n00b问题并认为这个问题的整个前提愚蠢的人道歉，我真的找不到任何文章来澄清这个具体问题......

第三，我现在已经弄清楚了如何在 Javascript 中执行此操作（尽管在几乎每种情况下猩红花园解决方案都简单得多），尽管如果您有多个处理程序并需要它们，attributes.add 方法（如 ScarletGarden 建议的那样）可能会受到影响以某种顺序开火。

在反射器中进行了一些研究后，Attributes.Add 通过分号分隔它们添加事件引用，因此这显然有效，因为它保留了已声明的任何处理程序，并且分号分隔您添加的处理程序。

在 javascript 中，这种链接（一种多播）需要使用 DOM 级别 2 功能（javascript 圣经对于识别这一点很有用），Mozilla 和 IE 有不同的方式来实现相同的事情也就不足为奇了，并且所以，为了添加一个 js 处理程序并在代码隐藏中保留事件处理，我上面示例中的行说

```
ctrls[i].onchange = selection_handler; \r\n 
```

需要替换为以下内容（在人们对这个例子感到珍贵之前，我确实对此有一个很大的警告，进一步向下）

```
sb.Append("                 if (ctrls[i].addEventListener) ctrls[i].addEventListener(\"change\",selection_handler,false);");
sb.Append("                 else if (ctrls[i].attachEvent) ctrls[i].attachEvent(\"on\" + \"change\", selection_handler, false);");
sb.Append("                 else return false;"); 
```

attachEvent 在 IE 中工作，在 Firefox 中使用 addEventListener（注意事件的不同名称，Mozilla 更喜欢删除“on”

添加像这样的事件以 LIFO（后进先出）方式工作，有许多替代方法可以使用更复杂的 javascript 以这种方式对事件进行排序，在一个优秀的，如果有点混乱的线程中覆盖（因为它开始的方式）这里[http ://codingforums.com/showthread.php?t=154673](http://codingforums.com/showthread.php?t=154673)

我希望这些东西能像我一样启发其他人，这是我第一次遇到问题时一直在寻找的线程，现在我觉得有点愚蠢，但是嘿嘿

# javascript - 无法让 TinyMCE 具有自动调整宽度

> ID：598964
> 
> 赞同：5
> 
> 时间：2009-03-01T00:20:28.513
> 
> 标签：javascript, tinymce

我正在尝试将 TinyMCE 合并到我的 CMS 中，但我很难将宽度调整为容器的大小。我正在使用高级工具栏主题，如果宽度变小，按钮不会落在下方以形成另一行。我搜索了很多论坛和 TinyMCE 文档，但找不到适合我的解决方案。

到目前为止，我已经尝试过：

*   在 tinyMCE.init 函数中设置宽度
*   将 auto_resize 设置为 true
*   使用 CSS 更改编辑器容器宽度
*   更改工具栏以使其浮动
*   在 wiki 中使用自定义自动调整大小功能

似乎很多人都对此有疑问，TinyMCE 的论坛版主并不是特别有帮助或礼貌。任何人都可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-07T18:16:51.550

这是适用于我的 TinyMCE 主题/样式文件的 CSS 规则：

```
.sclSkin table.mceToolbar, .sclSkin tr.mceFirst .mceToolbar tr td, .sclSkin tr.mceLast .mceToolbar tr td { float: left; } 
```

确保将上面的 .sclSkin 替换为您的主题/皮肤的名称/标识符；

# c# - 隐式运算符

> ID：598965
> 
> 赞同：22
> 
> 时间：2009-03-01T00:21:48.493
> 
> 标签：c#, implicit-conversion

我刚刚看到它在最近的一个答案中使用：

```
public static implicit operator bool(Savepoint sp)
{
    return sp != null;
} 
```

为什么我们需要这里*隐含*的词，它是什么意思？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-03-01T00:25:03.963

隐式意味着转换不需要在您的代码中进行强制转换。

您现在可以这样做：

```
Savepoint point = new Savepoint();
if(point) // becomes a bool using your operator
{
} 
```

而不必这样做：

```
Savepoint point = new Savepoint();
if((bool)point) // an "explicit" conversion
{
} 
```

为什么这是一个有用的区别的一个例子是数字类型。存在从“较小”​​类型到“较大”类型的隐式转换，例如：

```
float f = 6.5;
double d = f; // implicit conversion 
```

但是将较大的类型转换为较小的类型可能是危险的，因此只有显式转换，迫使用户澄清他确实打算执行相关操作：

```
long l = 20;
// short s = l;
short s = (short)l;  // explicit conversion 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-01T01:38:36.267

这看起来像是对隐式运算符的滥用。我不知道 Savepoint 类的作用，但将其转换为布尔值似乎不合逻辑。隐式运算符使您能够通过简单地评估引用来检查 Savepoint 引用是否为空：

```
if (point) { 
```

代替：

```
if (point != null) { 
```

如果以这种方式使用，那就是隐藏代码实际在做什么，这与 C# 的几乎所有内容背道而驰。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-01T00:29:48.287

只是为了增加 mquander 的答案。

来自 C# 3.0 语言规范：

> 包含关键字的转换运算符声明`implicit`引入了用户定义的隐式转换。隐式转换可以在多种情况下发生，包括函数成员调用、强制转换表达式和赋值。

（第 10.10.3 节）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-01T09:10:55.070

转换运算符从一种类型转换为另一种类型。隐式意味着您不必在代码中键入显式转换即可进行转换，显式要求调用代码中的转换。

当您确定转换不会丢失任何数据时，您可以使用隐式转换运算符。例如，使用扩大的强制（int -> long，float -> double）。当某些状态将丢失或您不希望编译器通过在整个位置插入转换来自动搞砸客户端代码时，使用显式转换运算符。

像您这样的转换确实会造成严重破坏，因为不建议执行这种特定的转换。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-01T00:38:50.327

您需要指定“隐式”，因为还有显式运算符。

这意味着 Boolean 和 Savepoint 之间的转换可以隐式完成，例如 = hidden。

```
Savepoint s = new Savepoint();
bool b = s; 
```

显式转换，例如明显的，可以这样完成：

```
 Savepoint s = new Savepoint();
 bool b = (bool)s; 
```

当没有可能的数据丢失时，通常使用隐式转换，`Int16 (short)`即`Int32 (int)`. 但如果可能，您需要使用显式转换“同意”它。

例如，在您的情况下， if`Savepoint`只是

```
struct Savepoint
{
  public bool data;
} 
```

您可以使用隐式转换，因为不会丢失数据：

```
Savepoint s = new Savepoint();
s.data = true;
bool b = s; 
```

否则我建议您定义显式运算符！

# svn - SVN 问题：仍然包含此代码片段的最新版本是什么？

> ID：598969
> 
> 赞同：10
> 
> 时间：2009-03-01T00:24:23.387
> 
> 标签：svn, language-agnostic, version-control

删除旧代码而不是仅仅将其注释掉是一种很好的做法。人们经常声称，如果需要，旧的代码部分总是可以在旧的 SVN 存储库修订版中再次找到。

但实际上，这并不容易，对吧？如果旧代码在某个*未知*的旧 SVN 修订版中，则可能很难找到。

我现在正是这种情况：有一个我不再需要的功能，我应该把它扔掉，因为它在 SVN 中，但我犹豫了，因为我可能会再次需要它，我担心它会消失在存储库中很难找到。

当然，总是可以发出一条提交消息，说“removed function myFunction”，但有时你无法注意到提交消息中的每一个小代码删除，并且查看所有提交消息以再次查找内容也可能很乏味.

自动工具会更好，例如

```
svn find "void myFunction\(" my-file.cc 
```

这会告诉我不同​​版本的不同结果。存在这样的东西吗？

**编辑：**其他版本控制系统有吗？可能是Git？（我会说，这将是转换的理由。）

**更新：**`shell`因此，除了我或多或少偶然发现的小而脆弱的脚本之外，没有真正的答案（请参阅下面的答案）。我认为，这对 SVN 来说真的是一种耻辱。在早期版本中查找某些内容应该是版本控制的核心功能之一。有人有更多信息吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-01T00:44:21.543

我搜索了更多内容并找到了以下脚本（请参见[此处](http://svn.haxx.se/users/archive-2006-09/1062.shtml)）。我对其进行了简短的测试，它似乎工作正常：

```
rev_grep.sh
=====================
#!/bin/ksh

URL=$1
REGEX=$2

LAST_REV="n/a"

svn log -q $URL | perl -ne 'print "$1\n" if /^r(\d+)/' |
while read r
do
    ##svn cat -r $r $URL | grep "$REGEX" > /dev/null
    BUFFER=`svn cat -r $r $URL | grep "$REGEX"`
    RET=$?
    if [ $RET -eq 0 ]
    then
        echo "Match in revision: $r. Removed in $LAST_REV."
        echo $BUFFER

        exit 0

    elif [ $RET -ne 1 ]
    then
        ## grep hit an error
        exit 2
    fi

    LAST_REV=$r
done
exit 1 
```

唯一的问题是，如果您的存储库需要密码，您将不得不多次输入密码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-01T00:30:25.400

事实证明，Git 正是有这个特性。您可以使用 Git 克隆您的 Subversion 存储库（使用[`git svn`](http://git-scm.com/docs/git-svn)），然后使用 Git 工具（特别是[`gitk`](http://www.kernel.org/pub/software/scm/git/docs/gitk.html)使这变得容易）在存储库历史记录中的任何位置搜索添加或删除的任何文本。

要查找仍包含某些特定文本的*最新*修订，您可以使用[`git bisect`](http://www.kernel.org/pub/software/scm/git/docs/git-bisect.html)有效地搜索历史以查找某些条件发生更改的修订。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-07-16T20:21:37.917

这类似于 dehman 答案中的 shell 脚本，但它是用 python 编写的。这样你只需要 python 来运行脚本，可能对不同的操作系统更友好。

```
import os
import re

filename = 'CustomROIMarker.cpp'
stringToFind = 'ImageMarker::outOfDataSet;'

log = os.popen('svn log ' + filename).read()
versions = re.findall('r\d+',log)
for v in versions:
    numVer =  int(v.strip('r'))
    cmdString = 'svn cat -r ' + str(numVer) + ' ' + filename
    contents = os.popen(cmdString).read()
    if re.search(stringToFind,contents) != None:
        print "Present in " + str(numVer)
    else:
        print "Not Present in " + str(numVer) 
```

您将不得不编辑文件名和 stringToFind 变量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-01T10:35:56.023

我想这会得到一些反对票......

有些事情在非技术方面更容易解决。在日志消息中写下您正在删除该功能。搜索删除将只是解析 svn 日志：

```
$ svn commit file.c -m "Removal of void deprecated_function()" 
```

现在您可以搜索日志。提交应始终以人类可读的简短方式识别更改是什么。

# python - 使用 python 从 linux 连接到 MS SQL Server 的最佳技术是什么？ODBC？

> ID：598979
> 
> 赞同：5
> 
> 时间：2009-03-01T00:29:11.393
> 
> 标签：python

最好，我的意思是最常见的，最容易设置的，免费的。性能无关紧要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-01T13:38:49.123

我认为 pyodbc 是最合适的。非常简单，稳定，受支持：
[http ://code.google.com/p/pyodbc/](http://code.google.com/p/pyodbc/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-01T00:33:49.637

[pymssql](http://pymssql.sourceforge.net/)，简单的 MS SQL Python 扩展模块。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-01T00:36:48.317

您可能会发现此主题很有帮助：

[使用 python 或 ironpython 访问 mssql 的最简单方法是什么？](https://stackoverflow.com/questions/289978/whats-the-simplest-way-to-access-mssql-with-python-or-ironpython)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-02T04:30:41.647

[免费TDS](http://www.freetds.org/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-01T00:32:52.540

我自己只是在学习 Python，但似乎有一些 Python 库看起来更像 Java JDBC 驱动程序。谷歌发现了这些关于[SQLObject](http://www.ibm.com/developerworks/opensource/library/os-pythonsqlo/)和[cx_Oracle](http://www.oracle.com/technology/pub/articles/devlin-python-oracle.html)的文章。

# .net - 从 HTML 生成 PDF（.NET 组件）

> ID：598980
> 
> 赞同：10
> 
> 时间：2009-03-01T00:29:37.947
> 
> 标签：.net, html, pdf, pdf-generation

能否请您指出能够从 HTML 生成 PDF 的开源或价格合理的商业产品？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-03T06:22:40.250

我们目前在我们更复杂的应用程序之一中使用 ABCpdf。它对我们很有帮助，而且一点也不贵。我喜欢这样一个事实，即我可以将原始 HTML 文本发送给它，它会将其呈现为内存中的 PDF 或作为文件，因此我们使用动态生成 PDF 并通过网络提供它们，而实际上从未将其保存在磁盘上。

我们已经使用它大约 3 年了，早期我不得不使用他们的支持来解决一个非常具体的非常奇怪的问题，并且支持非常快速并帮助快速解决了问题。

您可以在他们的网站上找到更多信息： [http ://www.websupergoo.com/abcpdf-1.htm](http://www.websupergoo.com/abcpdf-1.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-07T07:53:59.500

根据任务的性质（HTML 到 PDF 的转换），漂亮的 PDF 生成工具应该能够像 Web 浏览器一样呈现 HTML。幸运的是，它已经存在：[WkHtmlToPdf 开源项目](http://code.google.com/p/wkhtmltopdf/)，但它不提供与 .NET 的任何集成。

不要把时间花在重新发明轮子上：我已经将 WkHtmlToPdf 打包到一个 DLL 中（完全没有外部依赖项），只需将其添加到您的项目中并使用一行代码生成 PDF：

```
var pdfBytes = (new NReco.HtmlToPdfConverter()).GeneratePdf(htmlContent); 
```

此外，可以通过 HtmlToPdfConverter 的属性指定各种选项（如边距、缩放因子等）。

DLL 可以在这里下载（它是免费的）：[PdfGenerator for .NET](http://www.nrecosite.com/pdf_generator_net.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-01T00:39:33.770

[王子XML](http://princexml.com)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-01T00:36:43.887

我们过去使用过[ABCPdf](http://www.websupergoo.com/abcpdf-1.htm)，它能够接受网络请求并从中生成 PDF

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-05-11T14:41:17.150

这是价格合理的[HTML 到 PDF .NET 组件。](http://www.duodimension.com/html_pdf_asp.net/component_html_pdf.aspx)但它有自己的 html/css 阅读和 pdf 渲染引擎。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-12-24T12:40:31.687

多年来成功使用（商业）[Aspose.Pdf 。](http://www.aspose.com/categories/.net-components/aspose.pdf-for-.net/default.aspx)适用于 .NET 和 Java。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-09-07T12:15:03.177

我们在名为“itextsharp”的开源产品上取得了很大的成功——它在 HTML-to-PDF 方面并不那么热门，但对于仔细拼凑特定的 PDF 文档（例如收据）很有好处。它也是免费的，这始终是一种奖励。看：

[http://sourceforge.net/projects/itextsharp/](http://sourceforge.net/projects/itextsharp/)

另一个快速且轻量级的解决方案是 XMLPdf，它由新西兰的一家名为 Ibex 的软件公司编写。该工具有一个模型，您可以在其中创建 XML 模板文件，并在模式中使用 HTML-ish 标记。您还可以在 XML 中定义与后面的 .NET 代码中的对象相关联的标签。有点笨重，但在特定情况下很有用。不是免费的，但很便宜。可以通过在 Google 上搜索 XMLpdf 找到它。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-02-09T15:03:11.073

和[EVO html 到 pdf](http://www.evopdf.com)转换器

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-05-11T14:46:00.820

1.  [PDFSharp](http://www.pdfsharp.com/)
2.  [夏普PDF](http://sharppdf.sourceforge.net/)
3.  [iTextSharp](http://itextpdf.com/)

仅举几个。

万维网

：[http ://www.pdfsharp.com/](http://www.pdfsharp.com/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-01T00:38:12.887

我之前在一个项目中成功地使用[了 HTML to PDF Converter for .NET 。](http://www.winnovative-software.com/html-To-Pdf-Converter.aspx ".NET 的 HTML 到 PDF 转换器")

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-03T06:44:49.480

一种替代解决方案是使用 Web 浏览器控件并将 html 打印到已安装的 PDF 打印机。
有几种免费的 PDF 打印机可用，它们可以设置为直接打印到文件而不显示用户界面。

我曾经使用过这样的解决方案，即使对于大型文档和大量文档也能正常工作。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2011-05-31T12:31:24.737

Abcpdf .Net 8 版有效，但它在安全性和用户权限受到限制的生产服务器中产生了很多问题。

很难直接做 URL->pdf 的转换。我们结束了 URL-将 HTML 保存在本地文件夹中 -> 读取 HTML 并转换为 PDF-> 从文件夹中删除 HTML 文件 - 棘手的方法，但它有效。唯一的缺陷是您需要对服务器上的文件夹授予读/写权限。它仍然比降低安全设置更好。************************