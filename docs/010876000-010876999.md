# StackOverflow 问答 10876000-10876999

# jquery - jquery autocomplete 在 ASP.net MVC 4 mobile 上真的很慢

> ID：10876000
> 
> 赞同：0
> 
> 时间：2012-06-04T03:26:02.703
> 
> 标签：jquery, asp.net-mvc, jquery-mobile

我的 MVC 4 应用程序中有一个自动完成功能，它连接到世界上所有城市的数据库（所以你可以想象它非常大）。它在 PC 上运行良好，但是当我在智能手机上访问该网站时，加载需要 3 秒，而且性能变得非常缓慢。使用 Ajax 或 JSON 会使其更快吗？这是代码（我正在使用来自复数教程的代码）：

**部分视图 + Javascript**

```
<!--Searching through all the hotel locations -->
<p>Hotel Location (City): @Html.TextBoxFor(x => x.booking_instance.Location, 
   new { data_autocomplete = @Url.Action("QuickSearch", "Booking") })</p>

<script type="text/javascript">
$(document).ready(function () {        
    $(":input[data-autocomplete]").each(function () {
        $(this).autocomplete({ source: $(this).attr("data-autocomplete") }); 
    });
  }); 
</script> 
```

**控制器**

```
// this is my database of cities.
TE_TSQL1_HBOSDataContext _db = new TE_TSQL1_HBOSDataContext(); 
public ActionResult QuickSearch(string term)
{
 var cities = _db.Cities
      .Where (r => r.CityName.Contains(term))
      .Select(r => new { label = (r.CityName + ", " + r.CountryName) });
 return Json(cities, JsonRequestBehavior.AllowGet); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T06:44:03.147

是的！使用 Jquery 和 Ajax 肯定会让您的手机更快，因为您不必将完整的数据集加载到手机内存中然后搜索它。您可以让 C# 服务器进行选择，然后只返回您想要的数据。最好的部分是，您的服务器已经在返回 JSON 结果，您可以让移动设备在输入 2 个字符后进行第一次查询，从而极大地限制了返回的数据集的大小。

```
 $( ":input[data-autocomplete]" ).autocomplete({
            source: "controllerPath/QuickSearch",
            minLength: 2

        }); 
```

# sql-server - 加载空数据库表

> ID：10876002
> 
> 赞同：0
> 
> 时间：2012-06-04T03:26:12.483
> 
> 标签：sql-server, visual-studio, unhandled-exception, sqldataadapter

我正在使用 SQL Server Express 和 VS2008。

我有一个带有表的数据库`A`，其中有一`ID`列为`IDENTITY`. ID 是自动递增的。即使该行被删除，`ID`仍然会增加。

经过几次数据操作，当前`ID`已经达到了15个，例如。

当我运行应用程序时

*   如果至少有 1 行：如果我添加新行，则新 ID 为 16。一切都很好。
*   如果表为空（无行）：如果我添加一个新行，新的ID为0，这是一个错误（我认为）。

进一步的数据操作（例如删除或更新）将导致未处理的异常。

有没有人遇到过这个？

PS。在我的表定义中，ID 已选择如下：

```
Identity Increment = 1; Identity Seed =1; 
```

数据库加载代码是：

```
dataSet = gcnew DataSet();

dataAdapter->Fill(dataSet,"A");

dataTable=dataSet->Tables["A"];

dbConnection->Open(); 
```

更新**按钮**方法

```
dataAdapter->Update(dataSet,"tblInFlow");

dataSet->AcceptChanges();

dataTable=dataSet->Tables["tblInFlow"];

dataGrid->DataSource=dataTable; 
```

如果我按更新：

*   如果至少有一行：数据网格视图会更新并正确显示表格。

*   如果表中没有任何内容（无数据行），则 Add 方法将添加一个新行，但从 ID 0 开始。如果我关闭程序并重新启动它：ID 将为 16，这是正确的。

这是添加方法

```
row=dataTable->NewRow();

row["column1"]="something";

dataTable->Rows->Add(row);

dataAdapter->Update(dataSet,"A");

dataSet->AcceptChanges();

dataTable=dataSet->Tables["A"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T04:22:56.930

如果您使用删除日期

```
 Delete from myTable 
```

它不会重置标识列，但另一方面，如果您截断表，那么它将任何标识列重置为默认种子值（在您的情况下从 1 开始）如果您要截断表然后重新播种，则第一个如果你写，identity reseed 值将是 0

```
 DBCC CHECKIDENT(MyTable, RESEED, 0) 
```

即使您的身份列被指定为 Identity=1 和种子 =1 ，插入的第一行将从 Id=0 开始

如果要从 1 开始，则需要将列重新设置为

```
 DBCC CHECKIDENT(MyTable, RESEED, 1) 
```

# php - 检查日期时间值是否来自 php 中的最近 30 天（不在 mysql 查询中）？

> ID：10876006
> 
> 赞同：0
> 
> 时间：2012-06-04T03:26:53.193
> 
> 标签：php

如果从数据库中获取的值来自过去 30 天，我需要检查 php。

这些值的格式如下：

```
2012-03-19 05:00:32 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T03:29:02.013

您可以使用[strtotime](http://php.net/manual/en/function.strtotime.php)将其转换为 unix 时间戳。

```
$db_date = "2012-03-19 05:00:32";
if (time() - strtotime($db_date) <= 30 * 86400) {
  //...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T03:44:13.560

```
$date = '2012-03-19 05:00:32';
if (strtotime($date) >= strtotime('-30 days')) {
    // do something
} 
```

请参阅[strtotime() 参考](http://php.net/strtotime)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T03:29:35.953

您可以在 PHP 中执行此操作，但这意味着通过日期/时间系统来回将字符串处理回日期值：

```
$within_30 = ((strtotime('2012-03-19 05:00:32') + 30*86400) > time()); 
```

假设您使用的是 MySQL，您可以直接在查询中执行此操作，并节省一些时间转换：

```
SELECT ((yourtimefield + INTERVAL 30 DAY) > now()) AS within_30 ... 
```

# ios - 可编辑的 UITextView 可以嵌入到 UIPopoverController 中吗？

> ID：10876008
> 
> 赞同：0
> 
> 时间：2012-06-04T03:27:29.627
> 
> 标签：ios, cocoa-touch, ipad, uiviewcontroller, uipopovercontroller

我正在尝试在 UIPopoverController 中嵌入一个可编辑的 UITextView，结果...奇怪。我采取的步骤是：

1.  创建一个自定义 UIViewController 类，并使用该控制器创建一个 .xib 文件，其中包含一个 UITextView。
2.  当应该调出控制器的 UI 动作发生时（内部修饰），我从 .xib 文件中实例化控制器及其视图。
3.  我创建了一个新的 UIPopoverController，我刚刚将视图控制器实例化为内容视图。
4.  我用 presentPopoverFromRect:inView:permittedArrowDirections:animated:

这是一些示例代码：

```
- (void)noteButtonPressed:(id)sender {
    self.noteview = [[MyTextPopupViewController alloc] initWithNibName:@"MyTextPopupViewController" bundle:nil ];
    UIPopoverController *popoverController = [[UIPopoverController alloc] initWithContentViewController:self.noteview];
    self.popover = popoverController;
    self.popover.delegate = self;
    [self.popover presentPopoverFromRect:((UIView*)sender).frame
                                  inView:self.view
                permittedArrowDirections:UIPopoverArrowDirectionAny
                                animated:YES];
} 
```

然后，在 MyTextPopupViewController 中，我确保文本视图是第一个调出键盘的响应者：

```
- (void)viewDidAppear:(BOOL)animated {
    [self.view becomeFirstResponder];

    [super viewDidAppear:animated];
} 
```

这一切都有效......直到它不起作用。有时，它工作得很好；其他时候，无论是立即还是在几次击键后，应用程序都会通过退出主事件循环（！）而崩溃。不会抛出异常（至少不会被 lldb 捕获），但应用程序只是在模拟器和硬件上停止。

有什么想法吗？有没有人成功地完成了这项工作，或者确定没有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T23:47:55.090

我认为 UIPopoverController 实例需要成为您代码中的一个属性。

# android - 清单与活动中的广播接收器注册

> ID：10876015
> 
> 赞同：73
> 
> 时间：2012-06-04T03:28:15.573
> 
> 标签：android, android-intent, broadcastreceiver, intentfilter

我需要一些帮助来了解我的广播接收器何时可以在刚刚在清单中注册而不是必须从正在运行的活动或服务中注册时工作。

因此，例如，如果我使用以下意图过滤器注册一个独立的接收器，它可以在没有服务/活动引用的情况下工作：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.blk_burn.standalonereceiver"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />
    <uses-permission android:name="android.permission.WAKE_LOCK"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

        <receiver android:name="TestReceiver">
            <intent-filter>
                <action android:name="android.media.AUDIO_BECOMING_NOISY"/>
            </intent-filter>
        </receiver>

    </application>

</manifest> 
```

但是，如果我`android.media.AUDIO_BECOMING_NOISY`用`android.intent.action.HEADSET_PLUG`接收器替换不会触发（[Android 文档](http://developer.android.com/reference/android/content/Intent.html#ACTION_HEADSET_PLUG)）

根据我在本网站上找到的内容，您必须从已经运行的活动或服务中注册此接收器才能使其工作（[发布](https://stackoverflow.com/questions/4202046/which-permission-required-in-order-to-get-action-headset-plug-inside-broadcast-r/4444069#comment14172404_4444069)）。

*   谁能告诉我为什么在清单中调整您的意图过滤器时这不起作用，以及为什么您需要在后台运行一个引用/注册接收器的服务？

*   是否有解决方法，以便我可以使用意图过滤器在我的应用程序清单中注册我的接收器`android.intent.action.HEADSET_PLUG`？

*   如何识别[android 文档](http://developer.android.com/reference/android/content/Intent.html#FLAG_INCLUDE_STOPPED_PACKAGES)中的哪些广播操作需要服务或活动注册它们，而不是在清单中使用正确的过滤器？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-06-04T03:42:24.423

如果您的接收器已在清单中注册，并且您的应用程序未运行，则会创建一个新进程来处理广播。如果您在代码中注册它，它与您注册它的活动/服务的生命周期相关联。对于某些广播，如果它不存在，则创建一个新的应用程序进程实际上没有意义，或者有一些安全性、性能等方面的影响，因此您只能在代码中注册接收器。

至于`HEADSET_PLUG`广播，似乎你的想法是你已经运行的应用程序可以让它对 UI、音量等进行特定于应用程序的调整。如果你的应用程序没有运行，你不应该真正关心耳机被拔掉。

AFAIK，没有为所有广播汇总此信息的单一位置，但每个 Intent 都应在 JavaDoc 中包含有关如何注册和使用它的注释，但显然缺少某些地方。[如果您对Intent.FLAG_RECEIVER_REGISTERED_ONLY](http://developer.android.com/reference/android/content/Intent.html#FLAG_RECEIVER_REGISTERED_ONLY)的 Android 源代码树进行 grep，您应该能够编译一个列表。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2016-11-28T15:43:43.463

像往常一样，可以在清单文件 AndroidManifest.xml 中配置广播接收器。以这种方式配置的 BroadcastReceiver 称为静态注册。

您可以使用以下元素在清单文件中注册您的接收器：

```
<receiver
   android:name=".ConnectivityChangeReceiver">
   <intent-filter>
      <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
   </intent-filter>
</receiver> 
```

嵌套元素用于指定接收者应响应的事件。

动态广播接收器

作为替代方案，您可以在代码中动态注册 BroadcastReceiver 实现。您只需要在 Context 对象上调用 registerReceiver() 方法。

registerReceiver() 方法有两个参数：

registerReceiver() 方法的参数

*   **receiver :** 你要注册的 BroadcastReceiver
*   **filter :** IntentFilter 对象，指定您的接收者应该监听哪个事件。

**当您以这种方式注册接收器时，只要组件存在，它就会一直存在，并且 Android 会向该接收器发送事件，直到创建组件本身被销毁。**

正确处理生命周期是您的任务。因此，当您动态添加接收器时，请注意在 Activity 的 onPause() 方法中取消注册相同的接收器！

我建议在 Activity 的 onResume() 方法中注册接收器，并在 onPause() 方法中取消注册：

```
@Override
protected void onPause() {
   unregisterReceiver(mReceiver);
   super.onPause();
}

@Override
protected void onResume() {
   this.mReceiver = new ConnectivityChangeReceiver();
   registerReceiver(
         this.mReceiver, 
         new IntentFilter(
               ConnectivityManager.CONNECTIVITY_ACTION));
   super.onResume();
} 
```

何时使用哪种方法注册

使用哪种方法注册 BroadcastReceiver 取决于您的应用程序对系统事件的处理方式。我认为您的应用想要了解系统范围的事件基本上有两个原因：

*   您的应用围绕这些事件提供某种服务
*   你的应用想要对状态变化做出优雅的反应

***第一类***的示例是需要在设备启动后立即运行的应用程序，或者在安装应用程序时必须开始某种工作的应用程序。Battery Widget Pro 或 App2SD 是这类应用程序的好例子。对于这种类型，您必须在 Manifest 文件中注册 BroadcastReceiver。

***第二类***的示例是表明您的应用程序可能依赖的环境发生变化的事件。假设您的应用程序依赖于已建立的蓝牙连接。你必须对状态变化做出反应——但只有当你的应用程序处于活动状态时。在这种情况下，不需要静态注册的广播接收器。动态注册的会更合理。

还有一些事件甚至不允许您静态注册。一个例子是每分钟广播一次的 Intent.ACTION_TIME_TICK 事件。这是一个明智的决定，因为静态接收器会不必要地耗尽电池电量。

# hadoop - 如何使用greenplum外部表访问hadoop hdfs

> ID：10876018
> 
> 赞同：0
> 
> 时间：2012-06-04T03:28:38.207
> 
> 标签：hadoop, greenplum

oue 数据仓库是基于 hive 的，现在我们需要将数据从 hive 转换为 greenplum，我们想使用带有 gphdfs 的外部表，但它看起来出了点问题。表创建脚本是

```
CREATE EXTERNAL TABLE flow.http_flow_data(like flow.zb_d_gsdwal21001)
LOCATION ('gphdfs://mdw:8081/user/hive/warehouse/flow.db/d_gsdwal21001/prov_id=018/day_id=22/month_id=201202/data.txt')
FORMAT 'TEXT' (DELIMITER '      '); 
```

当我们跑步时

```
bitest=# select * from flow.http_flow_data limit 1;
ERROR:  external table http_flow_data command ended with error. sh: java: command not found  (seg12 slice1 sdw3:40000 pid=17778)
DETAIL:  Command: gphdfs://mdw:8081/user/hive/warehouse/flow.db/d_gsdwal21001/prov_id=018/day_id=22/month_id=201202/data.txt 
```

我们的 hadoop 是 1.0，greenplum 是 4.1.2.1

我想知道我们是否需要配置一些东西来让 gp 访问 hadoop

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T22:05:50.357

你打开端口（8081）监听month_id=201202目录了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:42:11.187

我会仔细检查管理员指南，我认为您可以使用 gphdfs，但直到 greenplum 4.2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-21T22:03:13.873

你检查过确保你的Greenplum系统上安装了java吗？因为这是 gphdfs 工作所必需的。

# asp.net-mvc-3 - 强制 ASP.NET MVC 3 操作参数使用 URL 中的值，而不是对象

> ID：10876019
> 
> 赞同：0
> 
> 时间：2012-06-04T03:28:38.823
> 
> 标签：asp.net-mvc-3

考虑一个模型类

```
public class MyModel
{
    public string Id { get; set; }

    /* some other properties */
} 
```

和一个控制器

```
public class MyController
{
    [HttpPut]
    public ActionResult Update(string id, MyModel model)
    {
        /* process */
    }
} 
```

路由注册如下：

```
protected override void RegisterRoutes(RouteCollection routes)
{
    routes.MapRoute("MyController", 
                    "api/my/{id}",
                     new { action = "Update", controller = "My"},
                     new { httpMethod = new HttpMethodConstraint(new[] { "PUT" }) });

} 
```

当使用 REST 客户端并将 MyModel 序列化为 JSON 或 XML 请求发送到此控制器时，“MyModel”的空“Id”属性会覆盖操作方法的“id”参数，即使您将其发布到[http:/ /api.example.com/api/my/10](http://api.example.com/api/my/10)。

如何强制 ASP.NET MVC 3 从 URL 填充“id”属性（在本例中为“10”）并忽略“MyModel”的“Id”属性？

请注意，我没有使用 ASP.NET Web API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T05:04:54.487

尝试使用属性**[FromUri]**。它在“System.Web.Http”中。action param id 上的这个属性表明它应该使用 url 请求进行绑定。

```
using System.Web.Http;//at the top
public class MyController
{
    [HttpPut]
    public ActionResult Update([FromUri]string id, MyModel model)
    {
       /* process */
    }
} 
```

对于 MVC3 尝试包含 web-api 包（来自 nuget 或手动）以使用 [FromUri] 属性。如果这是不可能的，那么我能想到的唯一方法就是从`this.HttpContext.Request.QueryString["id"]`

而不是将 id 作为动作方法参数在动作主体中声明它。可能要更改 url 查询 api/my?id=1212。首先尝试使用 api/my/{id} 格式。

```
var id = this.HttpContext.Request.QueryString["id"]; 
```

# javascript - 动态加载的表单不会正确更新

> ID：10876022
> 
> 赞同：-3
> 
> 时间：2012-06-04T03:29:28.440
> 
> 标签：javascript, jquery, twitter-bootstrap, prepend

我有一个表单，它使用`.load()`. 我想用我计算的 HTML 更新表单`str`，但我的代码没有正确更新表单。为什么？

```
if($(this).is('.step3')){
    //Splits the comma seperated values into input fields
    var active_fields = ($('#templateFields').val()).split(',');
    $('#loadedcontent').load('template.html #step3',function(){
        $('#steps').text('Step Three');
        $('#start.btn').text('Save Template & Values').removeClass('step3').addClass('step4');
    });

    str = "";
    for(var i = 0; i<active_fields.length; i++){
        str += '<label>'+active_fields[i]+'</label><input name="'+active_fields[i]+'" type="text"     class="span3">';                
    }
    $('form#values.well').html(str);            
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T03:57:57.960

抱歉，我想我不能在表单中嵌套表单。我认为这就是为什么它不起作用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T03:32:10.717

您必须将表单修改放在加载完成功能中，如下所示：

```
if($(this).is('.step3')){
    //Splits the comma seperated values into input fields
   var active_fields = ($('#templateFields').val()).split(',');
   $('#loadedcontent').load('template.html #step3',function(){
       $('#steps').text('Step Three');
       $('#start.btn').text('Save Template & Values').removeClass('step3').addClass('step4');
       str = "";
       for(var i = 0; i<active_fields.length; i++){
          str += '<label>'+active_fields[i]+'</label><input name="'+active_fields[i]+'" type="text"     class="span3">';                
       }
        $('form#values.well').html(str);            
  });
} 
```

您这样做的方式是，您修改表单的代码在表单完成加载之前运行，因此它找不到内容，因此无法修改它。

# css - IE8没有滚动条

> ID：10876026
> 
> 赞同：2
> 
> 时间：2012-06-04T03:30:11.623
> 
> 标签：css, internet-explorer, overflow, vertical-scrolling

嘿，我的网站工作正常，但在 IE8 中除外。该页面不显示垂直滚动条。我将 html { overflow-y :scroll } 添加到 css 中，但只有一个滚动条不允许您实际向下滚动。我的网站是[eagleview.it](http://eagleview.it/)

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T03:56:35.930

您可以使用它来修复 IE

```
-ms-overflow-y : scroll; 
```

或者这也可以工作

```
html {
   height:101%;
} 
```

# python - 为 django URL Dispatcher 编写的测试不起作用

> ID：10876029
> 
> 赞同：1
> 
> 时间：2012-06-04T03:30:28.830
> 
> 标签：python, django, testing, http-status-code-404

我正在 django 中开发一个简单的 web 服务。这是我在 django/python 中的第一个网络应用程序，所以如果我在这里遗漏了一些明显的东西，我不会感到惊讶，但是......

我目前正在尝试测试过滤 url 的逻辑。

```
 # Works as expected
            response = self.client.post("/mysite/goodurl/")
            self.assertEqual(response.status_code, 200)

            # Has an exception rather than a 404
            response = self.client.post("/mysite/badurl/")
            self.assertEqual(response.status_code, 404) 
```

所以，这个`badurl`案例不仅仅是没有找到并抛出 404，而是我收到了这个错误：

```
Traceback (most recent call last):
  File "/home/user/me/mysite/tests.py", line 55, in test_add_tracker
    response = self.client.post("/mysite/badurl/")
  File "/home/path/to/some/bin/dir/freeware/Python/lib/python2.7/site-packages/django/test/client.py", line 449, in post
    response = super(Client, self).post(path, data=data, content_type=content_type, **extra)
  File "/home/path/to/some/bin/dir/freeware/Python/lib/python2.7/site-packages/django/test/client.py", line 262, in post
    return self.request(**r)
  File "/home/path/to/some/bin/dir/freeware/Python/lib/python2.7/site-packages/django/core/handlers/base.py", line 111, in get_response
    response = callback(request, *callback_args, **callback_kwargs)
  File "/home/path/to/some/bin/dir/freeware/Python/lib/python2.7/site-packages/django/views/decorators/csrf.py", line 77, in wrapped_view
    return view_func(*args, **kwargs)
TypeError: EtimeFetcher() got an unexpected keyword argument 'alias' 
```

我试过用谷歌搜索 EtimeFetcher 消息，但没有运气。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:22:03.933

Uou 可能有一些观点来捕捉所有 Http404 错误。然而，似乎 Django 找到了执行 /badurl 的视图。在代码中搜索包含别名命名参数的语句，例如：“alias=yyyy”。或者可能是一些 url 模式，在 urls.py 中包含“别名”作为额外参数？

# ruby-on-rails - 如何将 CarrierWave 上传器添加到设计注册视图？（导轨宝石）

> ID：10876031
> 
> 赞同：0
> 
> 时间：2012-06-04T03:30:49.140
> 
> 标签：ruby-on-rails, upload, devise, carrierwave

当用户注册时，我希望他们能够上传头像。新的注册 .html.erb 如下所示：

```
<h2>Sign up</h2>

<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => {:multipart => true} ) do |f| %>
<%= devise_error_messages! %>

<div>
<%= f.label :username %><br />
<%= f.text_field :name %>
</div>

<div>
<%= f.label :image %><br />
<%= f.file_field :image %>
</div>

<div><%= f.label :email %><br />
<%= f.email_field :email %></div>

<div><%= f.label :password %><br />
<%= f.password_field :password %></div>

<div><%= f.label :password_confirmation %><br />
<%= f.password_field :password_confirmation %></div>

<div><%= f.submit "Sign up" %></div>
<% end %>

<%= render "links" %> 
```

用户.rb：

```
class User < ActiveRecord::Base
    ....
    mount_uploader :image, ImageUploader 
```

ImageUploader 存在...

当我尝试访问视图时，它告诉我 User::ImageUploader 不存在。当我尝试在用户模型中指定类的完全限定名称时，无论是作为“包含”语句还是作为 mount_uploader 函数的参数，它也找不到。我是否需要在该视图中以某种方式构建单独的 form_tag ？我敢肯定这以前已经做过了。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T06:06:55.697

你：

1.  `:image`在您的用户模型中添加了一个列？
2.  定义上传者`app/uploaders/image_uploader.rb`？
3.  重启了你的服务器？

只要图像属性存在于 User 模型上，您就不需要将其作为单独的表单标签。

您可能需要检查您的表单标记。我注意到你`:username`在标签和`:name`球场上都有。

尝试改变：

```
<%= f.label :username %><br />
<%= f.text_field :name %> 
```

到

```
<%= f.label :name, "username" %><br />
<%= f.text_field :name %> 
```

# html - 如何获取锚标记来填充表格单元格的宽度？

> ID：10876032
> 
> 赞同：7
> 
> 时间：2012-06-04T03:30:52.527
> 
> 标签：html, width, anchor

我有一个带有锚标记的表格单元格，我希望锚标记的宽度（和高度）填充包含表格单元格的宽度。直觉似乎对此不起作用。请帮忙。

HTML：

```
<table>
    <tr>
        <td class="width_is_100px">
            <a href="http://www.doesnotwork.com"><span class="make_width_100px">Some Text</span></a>
        </td>
    </tr>
</table> 
```

CSS：（不起作用）

```
.make_width_100px {
    width:100px !important;
} 
```

锚标记仅与文本“Some Text”一样宽。我希望用户能够单击表格单元格内的任何位置并触发链接。请不要使用javascript。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-04T03:38:37.213

尝试一下：

```
a {
    display: block;
    height: 100%;        
    width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T03:39:14.367

使您的`<a>`元素成为块元素（默认情况下它是内联的）：

```
.width_is_100px a {
    display:block;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-17T09:13:01.403

[当文本换行时](https://jsfiddle.net/950c1284/)，这些答案都不能正常填充宽度和高度。

我发现产生正确结果填充单元格的高度和宽度到边缘的唯一答案是[这个](https://stackoverflow.com/questions/3966027/make-link-in-table-cell-fill-the-entire-row-height#15801081)：

```
td {
    overflow: hidden;
}

td > a {
    display: block;
    margin: -10em;
    padding: 10em;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T03:39:36.810

```
<table>
    <tr>
        <td class="width_is_100px">
            <a href="http://www.doesnotwork.com"><div style="width:100%;">Some Text</div></a>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-21T16:04:14.420

这可能为时已晚，但是，这在内容高度不同的表格中对我有用。

html

```
<table class="example">
    <tr>
        <td><a href="">small content</a></td>
        <td><a href="">multiline<br>content</a></td>
    <tr>
</table> 
```

css

```
table{ 
    padding:10px;  /*for example*/
}
table.example td{
    overflow:hidden;
    padding:0px; /*you can need !important*/
}
table.example a{
    display: block;
    height: 100%;
    width: 100%;
    padding: 10px 10px 500px 10px; /*table default padding except on bottom 500px for example*/
    margin-bottom: -490px; /*same as bottom padding - table padding*/
} 
```

# r - R中的主成分分析

> ID：10876040
> 
> 赞同：3
> 
> 时间：2012-06-04T03:32:25.280
> 
> 标签：r, pca

使用该`prcomp`函数，我如何使用从同一数据集上的数据集派生的**无监督主成分拆分为测试和训练？**

```
train <- sample(1:nrow(auto), 60000)
x <- as.matrix(auto[,-1])  ##Covariates
y <- auto[,1]                   ##Response
pc <- prcomp(x)             ##Find Principal Components

data <- data.frame(y=y, (x %*% pc$rotation[,1:9]))
fit <- glm(y ~ ., data=data[train,], family="binomial")   ##Train It

prediction <- predict(fit, newdata=data) > 0  ##Prediction on Entire Data Set

error <- mean(y[-train]] != prediction[-train])  ##Mean out of Sample error 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T12:46:30.420

这是一个可重现的例子：

```
set.seed(1)
want <- sample(50, 40)
Iris <- iris[c(51:100, 101:150), ] ## only keep versicolor and virginica
## take our training and test sets
train <- droplevels(Iris[c((1:50)[want], (51:100)[want]), , drop = FALSE])
test <- droplevels(Iris[c((1:50)[-want], (51:100)[-want]), , drop = FALSE])

## fit the PCA
pc <- prcomp(train[, 1:4]) 
```

现在请注意，这`pc$x`是旋转后的数据。您使用`X %*% pc$rotation`（`X`训练数据矩阵在哪里）但没有首先将数据居中，但它们是等效的。在回归中居中预测变量可能很有用。

```
## create data frame for logistic regression
mydata <- data.frame(Species = train[, "Species"], pc$x)
## ...and fit the model
mod <- glm(Species ~ PC1, data = mydata, family = binomial) 
```

预测 PC1 上测试集数据的分数；也就是说，使用与形成训练数据的 PC 相同的旋转来旋转测试集。为此，我们可以使用`predict()`类的方法`"prcomp"`

```
test.p <- predict(pc, newdata = test[, 1:4]) 
```

现在用它来预测类

```
pred <- predict(mod, newdata = data.frame(test.p), type = "response")
pred

> pred
         56          66          67          71          72 
0.080427399 0.393133104 0.092661480 0.395813527 0.048277608 
         74          76          82          87          95 
0.226191156 0.333553423 0.003860679 0.617977807 0.029469167 
        106         116         117         121         122 
0.999648054 0.922145431 0.924464339 0.989271655 0.318477762 
        124         126         132         137         145 
0.581235903 0.995224501 0.999770995 0.964825109 0.988121496 
> 1 - pred
          56           66           67           71           72 
0.9195726006 0.6068668957 0.9073385196 0.6041864731 0.9517223918 
          74           76           82           87           95 
0.7738088439 0.6664465767 0.9961393215 0.3820221934 0.9705308332 
         106          116          117          121          122 
0.0003519463 0.0778545688 0.0755356606 0.0107283449 0.6815222382 
         124          126          132          137          145 
0.4187640970 0.0047754987 0.0002290047 0.0351748912 0.0118785036 
```

`pred`包含测试观察是*Iris virginica*的概率。请注意，`glm()`当响应是一个因素（如本例中）时，该因素的第一级（此处`versicolor`）被视为失败或`0`，第二个和后续级别指示成功或`1`。由于在这个例子中只有两个类，模型是根据`versicolor`; `1 - pred`将给出 的预测概率`virginica`。

我不遵循您在问题中包含的错误计算，因此将由您自行解决。然而，可以通过以下方式生成模型成功的交叉分类表：

```
> predSpecies <- factor(ifelse(pred >= 0.5, "virginica", "versicolor"))
> table(test$Species, predSpecies)
            predSpecies
             versicolor virginica
  versicolor          9         1
  virginica           1         9 
```

表明我们的模型有两个测试集观察错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T10:47:44.247

作为第一步，您需要将数据拆分为训练和测试：否则 PC 分数远非独立。

即 PCA 旋转仅从 x [train,] 计算！

然后将相同的旋转应用于 x [test,]

正如@Joran 所说，对于其他一切，都需要可重现的代码。

# redis - 如何组合多个 IRedisTypedTransaction 在 ServiceStack RedisClient 中

> ID：10876043
> 
> 赞同：1
> 
> 时间：2012-06-04T03:32:53.760
> 
> 标签：redis, servicestack

我正在尝试实现事务性 StoreRelatedEntities。所以我需要从 ITypedRedisClient 访问 RedisClient 或者这个：

```
using (var trans1 = redis.As<X>().CreateTransaction())
using (var trans2=  redis.As<Y>().CreateTransaction())
{
   .....
   trans1.Join(trans2); // :) Fantasy
   trans2.Commit(); 
} 
```

这是正确的方法吗？或者我必须

```
using (var trans1=redis.As<X>().CreateTransaction())
{
  trans.QueueCommand(p => ((RedisClient)((RedisTypedClient<T>)p).NativeClient).AddRangeToList(.....);
} 
```

还是我必须？

```
using (var trans=redis.CreateTransaction())
{
   trans.QueueCommand(p=>p.As<X>()....); // Casting to Typed RedisClient in Command
   trans.QueueCommand(p=>p.As<Y>()....);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T05:13:49.140

这看起来是最简单的，所以这是我的选择：

```
using (var trans=redis.CreateTransaction())
{
   trans.QueueCommand(p=>p.As<X>()....); // Casting to Typed RedisClient in Command
   trans.QueueCommand(p=>p.As<Y>()....);
} 
```

但是没有对错之分，只要做你更舒服的事情。每个客户端都继承或包含 RedisNativeClient 的实例，该实例封装了与 Redis 服务器的 tcp 套接字连接。不同类之间的关系如下：

*   **RedisNativeClient**实现[IRedisNativeClient](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/Redis/IRedisNativeClient.cs)

*   **RedisClient**继承**RedisNativeClient**，实现[IRedisClient](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/Redis/IRedisClient.cs)

*   **RedisTypedClient**实现[IRedisTypedClient](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/Redis/Generic/IRedisTypedClient.cs)

    *   包含可通过[RedisClient](https://github.com/ServiceStack/ServiceStack.Redis/blob/master/src/ServiceStack.Redis/Generic/RedisTypedClient.cs#L36)属性访问的**RedisClient实例**

# haskell - 列表元素的模式匹配

> ID：10876046
> 
> 赞同：2
> 
> 时间：2012-06-04T03:33:05.373
> 
> 标签：haskell, pattern-matching

我有一个列表，其中包含具有多个构造函数的类型的元素（例如，像[这样](http://hackage.haskell.org/packages/archive/hsemail/1.7.1/doc/html/Text-ParserCombinators-Parsec-Rfc2822.html#g:12)的东西）。如何提取与特定构造函数匹配的列表元素？

我能想到的一种方法是使用列表理解。例如，给定一个包含上述示例`fields`类型元素的列表`Field`，我可以提取第一个`From`字段：

```
from = head [head f | From f <- fields] 
```

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T05:42:22.780

要过滤与`From`构造函数匹配的列表，可以使用以下`filter`函数：

```
filter (\x -> case x of From {} -> True; _ -> False) fields 
```

然后取`head`第一个元素。

```
head . filter (\x -> case x of From {} -> True; _ -> False) $ fields 
```

# python - 如何使用 Python Tools for Visual Studio (PTVS) 调试在本地 lighttpd 服务器上运行的 Python

> ID：10876048
> 
> 赞同：2
> 
> 时间：2012-06-04T03:33:36.193
> 
> 标签：python, visual-studio, ptvs

Visual Studio 通过适用于 Visual Studio 的 Python 工具提供强大的 Python 支持：http: [//pytools.codeplex.com/](http://pytools.codeplex.com/)

在 Visual Studio 中调试 python 代码按预期工作。我在本地 Windows 机器上设置了一个 lighttpd 服务器，并且我有 python 脚本作为 cgi 脚本运行。从 lighttpd 运行时，我希望能够在 Visual Studio（在同一台 PC 上运行）中调试这些。

我可以使用以下方法调试 cgi 脚本： [http](http://winpdb.org) ://winpdb.org 但我更喜欢 Visual Studio。

根据这个问题： [How to debug a remote python application with (Python Tools for) Visual Studio？](https://stackoverflow.com/questions/7739381/how-to-debug-a-remote-python-application-with-python-tools-for-visual-studio)

暗示几乎有一种方法，但我没有看到设置断点并在 VS 中对其进行调试的特定方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T10:38:59.027

弄清楚了。这确实有效，而且效果很好，一旦你放下步骤。

*   像这样向 python 源文件添加延迟：

    ```
    time.sleep(10) 
    ```

    如果您不使用 FastCGI，这是必要的，因为 python 进程可能会在您附加到它之前很久就开始和结束。我认为这与 FastCGI 不同，但我还没有达到那个阶段。

*   在您的 lighttpd（或 apache？）服务器中运行的 python 文件中设置一个断点。我测试了lighttpd。注意：如果你不将源文件添加到 VS 中的项目中，因此不设置断点，你仍然可以调试，但你必须强制文件中出现错误。我添加了一个有效的“调试器”行。
*   在浏览器中加载页面并允许延迟
*   在 VS 中：调试 -> 附加到进程 -> pythonw.exe （在延迟过去之前完成此操作）

我在 Visual Studio IDE 中添加了一个简短的宏，它可以自动执行附加到 pythonw.exe 的过程。如果有人感兴趣，我会分享。

# java - getFontMetrics() 在 Java Applet 中第一次调用时需要 8000 毫秒

> ID：10876050
> 
> 赞同：1
> 
> 时间：2012-06-04T03:33:58.213
> 
> 标签：java, graphics, applet, awt, fontmetrics

在我的 Java 小程序中调用需要`getFontMetrics()`5000 毫秒到 22000 毫秒才能返回！随后的调用似乎花费的时间可以忽略不计（0-16ms）

我不得不承认我在一台带有基本图形驱动程序的机器上运行（显卡坏了，所以我不能使用 Nvidia 驱动程序），但是，这似乎是对一个原本简单的小程序的天文性能打击！

有谁知道可能是什么原因造成的？我在 stackoveflow 上遇到过其他具有相同问题的示例，但似乎没有令人满意的答案。我在 Eclipse 中运行它，但在 IE、Mozilla 和 Chrome 中运行会产生相同的延迟。

SSCCE 应要求：

```
import java.applet.Applet;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;

public class fontProblems extends Applet{
    Graphics2D g;
    FontMetrics fm;
    Font font=new Font("Roman", Font.BOLD, 36);
    public void paint(Graphics g2){
        g = (Graphics2D) g2;
        fm = g.getFontMetrics(font);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-15T18:31:10.177

根据文档（[http://docs.oracle.com/javase/7/docs/api/java/awt/Font.html），AWT](http://docs.oracle.com/javase/7/docs/api/java/awt/Font.html)组件只能使用逻辑字体。将字体更改为“SansSerif”为我解决了这个问题。

# c++ - 如何使用带有 Code::Blocks 的 OpenCV 2.4.3 编译程序？

> ID：10876052
> 
> 赞同：9
> 
> 时间：2012-06-04T03:34:15.950
> 
> 标签：c++, opencv, codeblocks

我已经[使用 MinGW](http://sourceforge.net/projects/codeblocks/files/Binaries/10.05/Windows/codeblocks-10.05mingw-setup.exe/download)和 OpenCV 2.4.3 安装了 Code::Blocks。我想编译这个简单的程序：

```
#include <opencv2/highgui/highgui.hpp>
#include <iostream>

using namespace cv;
using namespace std;

int main()
{
  Mat im = imread("c:/path/to/lena.jpg");
  if (im.empty()) {
    cout << "Cannot open image!" << endl;
    return 1;
  }
  imshow("Image", im);
  waitKey(0);
} 
```

如何正确设置 CodeBlocks 来编译上面的代码？

我已经在*`c:\opencv`*.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-04T03:34:16.433

要将 OpenCV 与 CodeBlocks 一起使用，您需要告诉 CodeBlocks：

1.  包含 OpenCV 头文件的目录 →*`c:\opencv\build\include`*
2.  链接所需的 OpenCV 库列表 →*`c:\opencv\build\x86\mingw\libs\libopencv_*.dll.a`*

* * *

**1.添加OpenCV头文件目录**

打开**设置**→**编译器和调试器...** →**搜索目录**选项卡 →**编译器**选项卡

![CodeBlock 设置：搜索目录](../Images/ec75049eb07bd078638679ad6f347c0f.png)

单击**添加**按钮以添加新条目。在弹出对话框中，键入*`c:\opencv\build\include`*,

![将 OpenCV 包含目录添加到 CodeBlocks](../Images/cfcd3ed83d8134a8cd92a53573a55c77.png)

并单击**确定**。

* * *

**2.添加链接所需的OpenCV库**

打开**设置**→**编译器和调试器**... →**链接器设置**选项卡。

![CodeBlocks 链接器设置](../Images/b39ac0ea970b11ea59232d6141f11bc1.png)

单击**添加**以添加新条目并打开一个弹出对话框。

![CodeBlock 设置：将库添加到链接](../Images/a3b0bfc0cce1965577aba51370db8455.png)

单击**“...”**按钮打开文件打开对话框。转到*`c:\opencv\build\x86\mingw\lib`*目录并按 Ctrl-A 选择所有文件。

![在此处输入图像描述](../Images/63b95c8307d59cb22712b7de834d2f4c.png)

单击**打开**以添加文件，

![在此处输入图像描述](../Images/6f5cd694ded4a5e5614d23bccb8bdeff.png)

单击**确定**以保存所有设置。

* * *

现在您已经设置了包含目录和链接库，您可以通过按 F9 键编译和运行您的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-05T13:28:33.353

我遇到了同样的问题，最后我不得不用 MINGW 卸载代码块，然后安装 JUST MINGW（使用 mingw-get 从这里[http://sourceforge.net/projects/mingw/files/Installer/](http://sourceforge.net/projects/mingw/files/Installer/)），之后安装代码没有 MINGW 的块（看起来与代码块绑定的 mingw 版本可能与 opencv 的预编译文件存在一些兼容性问题）。

如果在那之后并查看您的路径和代码块编译器和链接器配置，您的程序编译但崩溃并出现 000005 错误，这意味着您的预编译 opencv 文件有一些未知问题（因为一些小精灵弄乱了它们）因此如果发生此错误您，您将需要使用 NENAD BULATOVIC 对这个问题的回答自行编译 opencv[在 Windows 7 上使用 OpenCV 2.4 和 MinGW](https://stackoverflow.com/questions/10860352/getting-started-with-opencv-2-4-and-mingw-on-windows-7)由 @bsdnoobz

# powerbuilder - PowerBuilder中如何在DataWindow中处理

> ID：10876054
> 
> 赞同：1
> 
> 时间：2012-06-04T03:34:27.330
> 
> 标签：powerbuilder, datawindow

我正在用一些数据填充 DataWindow。一些列名称是“请求编号”、“状态”等。

“状态”列可以包含“待定”、“活动”、“过期”等值。

每当填充 DataWindow 时，我想计算 PowerBuilder 中状态为“活动”的记录数。

在获得记录计数后，我将在一些静态文本中填充计数。

任何人都可以帮助我，如何实现这一点，因为我是 PowerBuilder 的新手。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T15:18:01.967

这将为您提供答案，但它会向您介绍我们 PowerBuilder 开发人员所熟知的“波浪号地狱”。

```
ll_Count = Long (dw.Describe ("Evaluate('sum (if((status = ~~~"Active~~~"),1,0))',1)")) 
```

波浪线疯狂与每个级别的字符串评估将表达式归结为下一次评估有关。（~~ 归结为 ~，而 ~" 归结为 " 如果您的字符串用双引号括起来，这很有用）

`Evaluate(<expression>, <row>)`在 a 内`Describe()`将返回`<expression>`给定行的值。（由于与在整个数据集上运行`<row>`的操作无关`sum()`，您需要做的就是确保它是有效的行，即在本例中，至少有一行。）

祝你好运，

特里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T08:55:12.210

一种解决方案是使用您的条件过滤 DW 数据，然后获取行数。

就像是：

```
dw_ctrl.SetFilter("status='Active'")
dw_ctrl.Filter()
ll_count = dw_ctrl.RowCount()
//...
//don't forget to reset filter after that
dw_ctrl.SetFilter("")
dw_ctrl.Filter() 
```

# php - 设置 WURFL 时出错 未加载 ZipArchive 扩展。加载扩展或使用平面 wurfl.xml 文件

> ID：10876058
> 
> 赞同：0
> 
> 时间：2012-06-04T03:35:27.883
> 
> 标签：php, mobile, wurfl

你们有没有人在运行 WURFL 的演示之前遇到过这个错误？我很想让用户 WURFL 将我们的移动网站访问者重定向到不同的内容，但这个错误并没有让我继续。

这是错误详细信息：

致命错误：未捕获的异常“WURFL_WURFLException”带有消息“未加载 ZipArchive 扩展。加载扩展或使用 /var/www/bpaudel/wurfl-php-1.4.1/WURFL/Xml/Utils.php:49 中的扁平 wurfl.xml 文件 堆栈跟踪：#0 /var/www/bpaudel/wurfl -php-1.4.1/WURFL/Xml/Utils.php(36): WURFL_Xml_Utils::getZippedFile('/var/www/bpaude...') #1 /var/www/bpaudel/wurfl-php-1.4\. 1/WURFL/Xml/AbstractIterator.php(47): WURFL_Xml_Utils::getXMLFile('/var/www/bpaude...') #2 /var/www/bpaudel/wurfl-php-1.4.1/WURFL/DeviceRepositoryBuilder .php(83): WURFL_Xml_AbstractIterator->__construct('/var/www/bpaude...') #3 /var/www/bpaudel/wurfl-php-1.4.1/WURFL/WURFLManagerFactory.php(150): WURFL_DeviceRepositoryBuilder ->build('/var/www/bpaude...', NULL) #4 /var/www/bpaudel/wurfl-php-1.4.1/WURFL/WURFLManagerFactory.

在错误中，它还显示“使用平面 wurfl.xml”文件。我们将如何使用 wurfl.xml 作为替代方案？

谢谢，

比什努

# ruby-on-rails - Michael Hartl 的 rails 教程：为多种用户类型重用会话资源

> ID：10876059
> 
> 赞同：3
> 
> 时间：2012-06-04T03:35:30.660
> 
> 标签：ruby-on-rails

我正在通过 Micheal Hartl 的[教程](http://ruby.railstutorial.org)学习 Ruby on Rails 。

在我的 Web 应用程序中，我需要两种类型的用户，称为发布者和订阅者。目前我有一个发布者资源和一个订阅者资源。我希望他们都能够使用会话资源进行登录/注销。

我正在寻找有关如何实现这一点的一些方向。我的发布者和订阅者资源是否应该从 User 资源继承，例如，以下代码通过多态工作？

```
def create
  user = User.find_by_email(params[:session][:email])
  if user && user.authenticate(params[:session][:password])
    # Sign the user in and redirect to the user's show page.
  else
    # Create an error message and re-render the signin form.
  end
end 
```

发布者和订阅者没有很多共同的领域和不同的能力，所以我认为应该将它们建模为两个独立的资源，但是如何让它们共享 Sessions 资源呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T04:35:07.237

一种可能的解决方案是使**User**类仅用于登录，并且用户将通过多态关联属于发布者或订阅者，如下所示：

```
class User < ActiveRecord::Base
  belongs_to :identifiable, :polymorphic => true
end 
```

如果您不知道什么是多态关联，[您应该阅读本教程](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)。

此代码将像这样使用：

```
subscriber = Subscriber.find(1)
user = User.new
user.identifiable = subscriber
user.save 
```

因此，您的**订阅者**或**发布**者将与一个用户相关， :identifiable 字段是与另一个对象的关系（多态关系）。

有了这个，用户可以使用这个可识别的关联作为**订阅者**或**发布**者，并且您的**SessionsController**将被它们两者重用（以及所有身份验证逻辑，因为它存在于**User**而不是这些其他类中）。

# twitter-bootstrap - 如何使用 twitter bootstrap 正确格式化表单

> ID：10876061
> 
> 赞同：3
> 
> 时间：2012-06-04T03:35:54.803
> 
> 标签：twitter-bootstrap

我知道有`.form-inline`和`.form-horizontal`类等，但这让我有几个问题：

1.  这些似乎只与标签如何与其相应的文本字段/复选框等对齐有关。对吗？
2.  我需要创建一个具有：
    *   可能有很多领域和
    *   将它们与 bootstrap 12 col 网格对齐。

我是否需要将每个字段及其标签包装在 a`div`中，并给它`div`一个类名，例如`span3`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-05T20:07:57.903

你的问题不太清楚..无论如何我都会尝试回答！
你想如何在页面中处理输入元素？

下面是创建两个表单的两个 HTML 代码片段。第一个是内联表单，其中所有输入都在同一行上。第二个是水平表单，将表单分成两部分，左侧包含标签，右侧包含输入元素。

```
<form class="form-inline">
    <label>Input One: </label><input type="text" placeholder="Input One" />
    <label>Input Two: </label><input type="password" placeholder="Input Two" />
    <input type="submit" value="Submit" />
</form>

<form class="form-horizontal">
    <fieldset>
        <div class="control-group">
            <label class="control-label" for="input1">Input One:</label>
            <div class="controls">
                <input id="input1" type="text" placeholder="Input One" />
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">Input Two:</label>
            <div class="controls">
                <input type="text" placeholder="Input Two" />
            </div>
        </div>

        <div class="control-group">
            <label class="control-label">Submit</label>
            <div class="controls">
                <input type="submit" value="Submit" />
            </div>
        </div>
    </fieldset>
</form>​ 
```

如果您可以更具体一些，我很乐意为您提供帮助。

# grails - 尝试使用 cucumber-jvm 运行 geb 测试时出错

> ID：10876062
> 
> 赞同：2
> 
> 时间：2012-06-04T03:36:25.000
> 
> 标签：grails, groovy, geb, cucumber-jvm

我正在尝试在 IntelliJ 的 Grails 项目中运行一些 geb 测试，但是遇到了麻烦，经过 2 天的网络搜索和尝试不同的事情后仍然卡住了。之前，我们确实有一些 Groovy 测试运行良好，但到目前为止，geb 没有运气。我们正在使用黄瓜-jvm。

目前我收到以下错误：执行脚本TestApp时出错：groovy.lang.MissingMethodException：没有方法签名：GebConfig.environments（）适用于参数类型：（GebConfig$_run_closure2）值：[GebConfig$_run_closure2@4ad3727e]

我的 GebConfig.groovy 文件在测试/功能中，包含：

```
import org.openqa.selenium.htmlunit.HtmlUnitDriver
import org.openqa.selenium.firefox.FirefoxDriver
import org.openqa.selenium.chrome.ChromeDriver

// Use htmlunit as the default
// See: http://code.google.com/p/selenium/wiki/HtmlUnitDriver
driver = {
    def driver = new HtmlUnitDriver()
    driver.javascriptEnabled = true
    driver
}

environments {Not sure 
    chrome {-Dgeb.env=chrome
        driver = { new ChromeDriver() }
    }
    firefox {
        driver = { new FirefoxDriver() }
    }
} 
```

我在测试/功能中也有 .feature 文件。步骤定义在测试/功能/步骤中，包含：

```
package steps

import geb.*

this.metaClass.mixin (cucumber.runtime.groovy.EN)
this.metaClass.mixin (cucumber.runtime.groovy.Hooks)

def browser = new Browser()

Given (~"I am on the front page") {
    browser.go("http://localhost:8081/whereisOne")
} 
```

在 test/functional/setup 中还有一个 shared_driver.groovy 类，它是为直接的 Groovy 测试而创建的，我不确定这是否仍然需要。

运行配置命令是：test-app --stacktrace，带有 VM 选项：-Dgeb.env=chrome

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:55:39.180

代码中有 -Dgeb.env=chrome 吗？如果是这样，您必须删除此行。其他一切看起来都很好。

# macos - 在 Mac OS X 的 CIFilter 中禁用自动 Gamma 调整

> ID：10876063
> 
> 赞同：1
> 
> 时间：2012-06-04T03:36:49.430
> 
> 标签：macos, quartz-graphics

似乎 CIFilter 的 outputImage 总是经过 gamma 调整，调整值可以是 1.8 或 2.2，具体取决于某些用户偏好。对于 CIColorMatrix 过滤器，具有 0.5 比例矩阵的恒定白色 inputImage 将为所有组件（使用 PaintBrush 选择）生成 173/255（对于 1.8）或 188/255（对于 2.2）的 outputImage，但 128/255 应该被期望

那么，我们如何禁用自动伽玛调整，使数学回归线性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-20T15:17:46.843

我遇到了同样的问题，我使用了以下解决方法序列：

*   使用 CIGammaAdjust，inputPower = 1/2.2
*   应用我的 CIColorMatrix
*   使用 inputPower = 2.2 的 CIGammaAdjust

根据我的测试，CIFilters 实际上补偿了两次：处理之前和处理之后，这解释了我的 2 个 CIGammaAdjust 过滤器。

# android - 在 Wi-Fi 不可用时运行 android 网络应用程序

> ID：10876066
> 
> 赞同：0
> 
> 时间：2012-06-04T03:37:51.827
> 
> 标签：android, wifi

我正在开发的设备同时具有 Wi-Fi 和以太网。用户可以选择使用以太网或 Wi-Fi 接口。然而，一些 android 应用程序假设 Wi-Fi 连接。每当 Wi-Fi 不可用时，它会抱怨“连接丢失”左右。因此，在不修改应用程序本身的情况下，如何在 Wi-Fi 不可用时使其与以太网一起运行？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T06:30:55.873

检查您的代码以获取类似

```
protected boolean testNetwork()
{
    ConnectivityManager networkConnectivity = (ConnectivityManager)instance.getSystemService(Context.CONNECTIVITY_SERVICE);

    final NetworkInfo networkInfo = networkConnectivity.getActiveNetworkInfo();
    if ( networkInfo != null && networkInfo.isConnected() ) 
    {
        if ( networkInfo.getType() == ConnectivityManager.TYPE_WIFI)
        {
        }
        else if(networkInfo.getType() == ConnectivityManager.TYPE_ETHERNET)
        {
        }
        else if(networkInfo.getType() == ConnectivityManager.TYPE_MOBILE)
        {
        }
        return true;
    }
    return false;
} 
```

这应该让您了解应用程序如何访问 Internet。

您必须修改应用程序权限才能访问 WIFI 状态，如果您愿意，您也可以启用和禁用它们。

检查[ConnectivityManager](http://developer.android.com/reference/android/net/ConnectivityManager.html)类，您将获得所有可用选项。

# c++ - C++：仅使用 STL 从字符串中提取标记

> ID：10876071
> 
> 赞同：3
> 
> 时间：2012-06-04T03:40:10.147
> 
> 标签：c++, string, token

我想从给定的分数表达式中提取标记，该表达式作为字符串传递，

```
Fraction s("-5 * 7/27"); 
```

提取的标记包含单个运算符或数字序列作为操作数，仅使用 stl 容器。

有人可以指导我这样做吗？我想知道如何提取标记并将操作数与运算符区分开来，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T04:16:17.523

假设令牌之间总是有空格，下面是如何将它们全部放入队列中：

```
#include <string>
#include <queue>
#include <sstream>
#include <iostream>

using namespace std;

int main()
{
    stringstream formula("-5 * 7/27");
    string a_token;
    queue<string> tokens; 

    // Use getline to extract the tokens, and then push them onto the queue.
    while (getline(formula, a_token, ' ')) {
         tokens.push( a_token );
    }

    // Print and pop each token.
    while (tokens.empty() == false) {
        cout << tokens.front() << endl;
        tokens.pop();
    }
} 
```

运行程序会输出：

```
-5
*
7/27 
```

现在要确定哪些是运算符、数字或分数，您可以在循环中执行以下操作：

```
 if (a_token == "+" || a_token == "-" || a_token == "*" || a_token == "/")
    {
        // It's an operator
        cout << "Operator: " << a_token << endl;
    }
    else
    {
        // Else it's a number or a fraction.

        // Now try find a slash '/'.
        size_t slash_pos = a_token.find('/');

        // If we found one, it's a fraction.
        if (slash_pos != string::npos) {
            // So break it into A / B parts.

            // From the start to before the slash.
            string A = a_token.substr(0, slash_pos);

            // From after the slash to the end.
            string B = a_token.substr(slash_pos + 1);

            cout << "Fraction: " << A << " over " << B << endl;
        }
        else
        {
            // Else it's just a number, not a fraction.
            cout << "Number: " << a_token << endl;
        }
    } 
```

该网站：[http](http://www.cplusplus.com/reference/string/string/) ://www.cplusplus.com/reference/string/string/将为您提供有关字符串函数的信息。

修改代码并再次运行后，您将获得如下输出：

```
Number: -5
Operator: *
Fraction: 7 over 27 
```

# javascript - Classy javascript 框架中的 $super 探针

> ID：10876073
> 
> 赞同：0
> 
> 时间：2012-06-04T03:41:01.533
> 
> 标签：javascript

我无法理解[Classy](http://classy.pocoo.org)框架中的以下几行：

```
/* we check if $super is in use by a class if we can.  But first we have to
 check if the JavaScript interpreter supports that.  This also matches
 to false positives later, but that does not do any harm besides slightly
 slowing calls down. */
  var probe_super = (function(){$super();}).toString().indexOf('$super') > 0;
  function usesSuper(obj) {
    return !probe_super || /\B\$super\b/.test(obj.toString());
  } 
```

何时以及如何使 probe_super 返回 false？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T03:45:56.313

正如评论所说，它是检查 JavaScript 解释器是否支持它，所以你不能对它做任何事情，这取决于 JavaScript 解释器。

# android - org.json.JSONException：值 在这里，我想使用 API 密钥显示 JSON 内容。但我无法获得身份验证。 我在 JsonObject 中收到错误： org.json.JSONException: Value Authorization of type java.lang.String cannot be converted to JSONObject 在我的 and 问问题 问问题 2012-06-04T03:41:51.957 50302 次 This question shows research effort; it is useful and clear 9 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 在这里，我想使用 API 密钥显示 JSON 内容。但我无法获得身份验证。 我在 JsonObject 中收到错误： org.json.JSONException: Value Authorization of type java.lang.String cannot be converted to JSONObject 在我的 android 应用程序中，我只需传递 API 密钥和 URL id 即可在以下 URL 中获取 JSON 响应。我使用 JSON 数组显示 JSON 内容。 但如果我： public class AndroidAPiActivity extends Activity { /* * FlickrQuery = FlickrQuery_url * + FlickrQuery_per_page * + FlickrQuery_nojsoncallback * + FlickrQuery_format * + FlickrQuery_tag + q * + FlickrQuery_key + FlickrApiKey */ String FlickrQuery_url = "http://192.138.11.9/api/interests/"; String FlickrQuery_per_page = "&per_page=1"; String FlickrQuery_nojsoncallback = "&nojsoncallback=1"; String FlickrQuery_format = "&format=json"; String FlickrQuery_tag = "&tags="; String FlickrQuery_key = "&api_key="; // Apply your Flickr API: // www.flickr.com/services/apps/create/apply/? String FlickrApiKey = "f65215602df8f8af"; EditText searchText; Button searchButton; TextView textQueryResult, textJsonResult; ImageView imageFlickrPhoto; Bitmap bmFlickr; /** Called when the activity is first created. */ @Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.main); searchText = (EditText)findViewById(R.id.searchtext); searchButton = (Button)findViewById(R.id.searchbutton); textQueryResult = (TextView)findViewById(R.id.queryresult); textJsonResult = (TextView)findViewById(R.id.jsonresult); imageFlickrPhoto = (ImageView)findViewById(R.id.flickrPhoto); searchButton.setOnClickListener(searchButtonOnClickListener); } private Button.OnClickListener searchButtonOnClickListener = new Button.OnClickListener(){ public void onClick(View arg0) { // TODO Auto-generated method stub String searchQ = searchText.getText().toString(); String searchResult = QueryFlickr(searchQ); textQueryResult.setText(searchResult); String jsonResult = ParseJSON(searchResult); textJsonResult.setText(jsonResult); if (bmFlickr != null){ imageFlickrPhoto.setImageBitmap(bmFlickr); } }}; private String QueryFlickr(String q){ String qResult = null; String qString = FlickrQuery_url + FlickrQuery_per_page + FlickrQuery_nojsoncallback + FlickrQuery_format + FlickrQuery_tag + q + FlickrQuery_key + FlickrApiKey; HttpClient httpClient = new DefaultHttpClient(); HttpGet httpGet = new HttpGet(qString); try { HttpEntity httpEntity = httpClient.execute(httpGet).getEntity(); if (httpEntity != null){ InputStream inputStream = httpEntity.getContent(); Reader in = new InputStreamReader(inputStream); BufferedReader bufferedreader = new BufferedReader(in); StringBuilder stringBuilder = new StringBuilder(); String stringReadLine = null; while ((stringReadLine = bufferedreader.readLine()) != null) { stringBuilder.append(stringReadLine + "\n"); } qResult = stringBuilder.toString(); } } catch (ClientProtocolException e) { // TODO Auto-generated catch block e.printStackTrace(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } return qResult; } private String ParseJSON(String json){ String jResult = null; bmFlickr = null; String key_id; String category; String subcategory; String title; String icon_image; try { JSONObject JsonObject = new JSONObject(json); JSONObject Json_photos = JsonObject.getJSONObject("interests"); JSONArray JsonArray_photo = Json_photos.getJSONArray("interest"); //We have only one photo in this exercise JSONObject FlickrPhoto = JsonArray_photo.getJSONObject(0); key_id = FlickrPhoto.getString("row_key"); category = FlickrPhoto.getString("category"); subcategory = FlickrPhoto.getString("subcategory"); title = FlickrPhoto.getString("title"); jResult = "\n key_id: " + key_id + "\n" + "category: " + category + "\n" + "subcategory: " + subcategory + "\n" + "title: " + title + "\n"; bmFlickr = LoadPhotoFromFlickr(key_id, category, subcategory,title); } catch (JSONException e) { // TODO Auto-generated catch block e.printStackTrace(); } return jResult; } private Bitmap LoadPhotoFromFlickr( String key_id, String category, String subcategory, String title){ Bitmap bm= null; String icon_image = null; // String FlickrPhotoPath =""; String FlickrPhotoPath ="http://182.72.180.34/media/"+icon_image+".jpg"; URL FlickrPhotoUrl = null; try { FlickrPhotoUrl = new URL(FlickrPhotoPath); HttpURLConnection httpConnection = (HttpURLConnection) FlickrPhotoUrl.openConnection(); httpConnection.setDoInput(true); httpConnection.connect(); InputStream inputStream = httpConnection.getInputStream(); bm = BitmapFactory.decodeStream(inputStream); } catch (MalformedURLException e) { // TODO Auto-generated catch block e.printStackTrace(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } return bm; } } 更新： 根据 HTML 响应，我可以告诉您这不是 JSON。响应告诉我您的 Web 服务的 URL 不正确。 您需要检查您的网址。 额外信息/上一个答案： 看起来简单的答案是正确的 - 您的结果不是有效的 JSON 字符串。有关JSON 外观的详细信息，请参阅JSON.org网站。 查看JSON Parser Online - 我发现它在使用 JSON 时非常有用。 奇怪的是您正在请求 JSON，但它没有正确返回它 - 也许我错过了一些东西。 androidjsonapiauthentication 4 6 回答 6 This answer is useful 14 更新： 根据 HTML 响应，我可以告诉您这不是 JSON。响应告诉我您的 Web 服务的 URL 不正确。 您需要检查您的网址。 额外信息/上一个答案： 看起来简单的答案是正确的 - 您的结果不是有效的 JSON 字符串。有关JSON 外观的详细信息，请参阅JSON.org网站。 查看JSON Parser Online - 我发现它在使用 JSON 时非常有用。 奇怪的是您正在请求 JSON，但它没有正确返回它 - 也许我错过了一些东西。 于 2012-06-04T05:15:11.833 回答 This answer is useful 4 是的，当给定的 URL 无效时，我们会收到此类警告。 只需检查一次 URL。 于 2014-05-20T10:51:47.753 回答 This answer is useful 0 从 API 中删除 docType。并设置内容类型 Application/json 。（因为 text/html 不会读取为 json 。因此您看到了错误。） 于 2013-05-20T09:54:20.833 回答 This answer is useful 0 可能这可以帮助 https://teamtreehouse.com/community/solved-exception-cannot-convert-string-type-to-json-object 解决了。 事实证明，运行时错误可以追溯到上一个视频。 我在做 JSONObject 当前 = 新 JSONObject("当前"); 代替 JSONObject currently = forecast.getJSONObject("currently"); 所以我的猜测是 Android 认为我正在尝试设置一个全新的 JSON 对象，而不是尝试从现有对象中检索信息！:) 现在控制台完美显示时间！ 于 2019-12-01T22:39:02.833 回答 This answer is useful 0 我也遇到过这个问题，我将 Internet 连接更改为另一个网络并且它可以工作。 问题是ISP不接受http访问。 另一种解决方案，您可以打开VPN 并重试，也许它可以工作...... 于 2020-03-16T10:25:00.567 回答 This answer is useful -1 "

> ID：10876079
> 
> 赞同：9
> 
> 时间：
> 
> 标签：android, json, api, authentication

在这里，我想使用 API 密钥显示 JSON 内容。但我无法获得身份验证。

我在 JsonObject 中收到错误：

```
org.json.JSONException: Value Authorization of type java.lang.String cannot be converted to JSONObject 
```

在我的 android 应用程序中，我只需传递 API 密钥和 URL id 即可在以下 URL 中获取 JSON 响应。我使用 JSON 数组显示 JSON 内容。

但如果我：

```
public class AndroidAPiActivity extends Activity {

/*
 * FlickrQuery = FlickrQuery_url
 * + FlickrQuery_per_page
 * + FlickrQuery_nojsoncallback
 * + FlickrQuery_format
 * + FlickrQuery_tag + q
 * + FlickrQuery_key + FlickrApiKey
 */

String FlickrQuery_url = "http://192.138.11.9/api/interests/";
String FlickrQuery_per_page = "&per_page=1";
String FlickrQuery_nojsoncallback = "&nojsoncallback=1";
String FlickrQuery_format = "&format=json";
String FlickrQuery_tag = "&tags=";
String FlickrQuery_key = "&api_key=";

// Apply your Flickr API:
// www.flickr.com/services/apps/create/apply/?
   String FlickrApiKey = "f65215602df8f8af";

   EditText searchText;
   Button searchButton;
   TextView textQueryResult, textJsonResult;
   ImageView imageFlickrPhoto;
   Bitmap bmFlickr;

   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       searchText = (EditText)findViewById(R.id.searchtext);
       searchButton = (Button)findViewById(R.id.searchbutton);
       textQueryResult = (TextView)findViewById(R.id.queryresult);
       textJsonResult = (TextView)findViewById(R.id.jsonresult);
       imageFlickrPhoto = (ImageView)findViewById(R.id.flickrPhoto);
       searchButton.setOnClickListener(searchButtonOnClickListener);
   }

   private Button.OnClickListener searchButtonOnClickListener
   = new Button.OnClickListener(){

 public void onClick(View arg0) {
  // TODO Auto-generated method stub
  String searchQ = searchText.getText().toString();
  String searchResult = QueryFlickr(searchQ);
  textQueryResult.setText(searchResult);
  String jsonResult = ParseJSON(searchResult);
  textJsonResult.setText(jsonResult);

  if (bmFlickr != null){
   imageFlickrPhoto.setImageBitmap(bmFlickr);
  }
 }};

   private String QueryFlickr(String q){

    String qResult = null;

    String qString =
      FlickrQuery_url
      + FlickrQuery_per_page
      + FlickrQuery_nojsoncallback
      + FlickrQuery_format
      + FlickrQuery_tag + q 
      + FlickrQuery_key + FlickrApiKey;

    HttpClient httpClient = new DefaultHttpClient();
       HttpGet httpGet = new HttpGet(qString);

       try {
  HttpEntity httpEntity = httpClient.execute(httpGet).getEntity();

  if (httpEntity != null){
   InputStream inputStream = httpEntity.getContent();
   Reader in = new InputStreamReader(inputStream);
   BufferedReader bufferedreader = new BufferedReader(in);
   StringBuilder stringBuilder = new StringBuilder();

   String stringReadLine = null;

   while ((stringReadLine = bufferedreader.readLine()) != null) {
    stringBuilder.append(stringReadLine + "\n");
    }

   qResult = stringBuilder.toString();

  }

 } catch (ClientProtocolException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
 } catch (IOException e) {  
  // TODO Auto-generated catch block
  e.printStackTrace();
 }

       return qResult;
   }

   private String ParseJSON(String json){

    String jResult = null;
    bmFlickr = null;
    String key_id;
    String category;
    String subcategory;
    String title;
    String icon_image;

    try
     {
  JSONObject JsonObject = new JSONObject(json);
  JSONObject Json_photos = JsonObject.getJSONObject("interests");
  JSONArray JsonArray_photo = Json_photos.getJSONArray("interest");

  //We have only one photo in this exercise
  JSONObject FlickrPhoto = JsonArray_photo.getJSONObject(0);

  key_id = FlickrPhoto.getString("row_key");
  category = FlickrPhoto.getString("category");
  subcategory = FlickrPhoto.getString("subcategory");
   title = FlickrPhoto.getString("title");

  jResult = "\n key_id: " + key_id + "\n"
    + "category: " + category + "\n"
    + "subcategory: " + subcategory + "\n"
    + "title: " + title + "\n";

  bmFlickr = LoadPhotoFromFlickr(key_id, category, subcategory,title);

 } catch (JSONException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
 }

    return jResult;
   }

   private Bitmap LoadPhotoFromFlickr(
     String key_id, String category, String subcategory,
     String title){
    Bitmap bm= null;

    String icon_image = null;
 //   String FlickrPhotoPath ="";
   String FlickrPhotoPath ="http://182.72.180.34/media/"+icon_image+".jpg";

    URL FlickrPhotoUrl = null;

    try {

  FlickrPhotoUrl = new URL(FlickrPhotoPath);

  HttpURLConnection httpConnection = (HttpURLConnection) FlickrPhotoUrl.openConnection();
  httpConnection.setDoInput(true);
  httpConnection.connect();
  InputStream inputStream = httpConnection.getInputStream();
  bm = BitmapFactory.decodeStream(inputStream);

 } catch (MalformedURLException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
 } catch (IOException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
 }

    return bm;
   }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-04T05:15:11.833

## 更新：

根据 HTML 响应，我可以告诉您这不是 JSON。响应告诉我您的 Web 服务的 URL 不正确。

您需要检查您的网址。

## 额外信息/上一个答案：

看起来简单的答案是正确的 - 您的结果不是有效的 JSON 字符串。有关JSON 外观的详细信息，请参阅[JSON.org网站。](http://www.json.org/)

查看[JSON Parser Online](http://json.parser.online.fr/) - 我发现它在使用 JSON 时非常有用。

奇怪的是您正在请求 JSON，但它没有正确返回它 - 也许我错过了一些东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-20T10:51:47.753

是的，当给定的 URL 无效时，我们会收到此类警告。

只需检查一次 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T09:54:20.833

从 API 中删除 docType。并设置内容类型 Application/json 。（因为 text/html 不会读取为 json 。因此您看到了错误。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-01T22:39:02.833

可能这可以帮助

[https://teamtreehouse.com/community/solved-exception-cannot-convert-string-type-to-json-object](https://teamtreehouse.com/community/solved-exception-cannot-convert-string-type-to-json-object)

解决了。

事实证明，运行时错误可以追溯到上一个视频。

我在做

JSONObject 当前 = 新 JSONObject("当前"); 代替

```
JSONObject currently = forecast.getJSONObject("currently"); 
```

所以我的猜测是 Android 认为我正在尝试设置一个全新的 JSON 对象，而不是尝试从现有对象中检索信息！:) 现在控制台完美显示时间！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-16T10:25:00.567

我也遇到过这个问题，我**将 Internet 连接更改为另一个网络**并且它可以工作。

问题是**ISP**不接受`http`访问。

另一种解决方案，您可以打开**VPN 并重**试，也许它可以工作......

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-10-21T23:28:37.677

`"<!Doctype..."`使用谷歌翻译的 json 网址时，我收到了同样的错误。然后，我在某处找到了这段代码并且它起作用了：

```
 BasicHttpParams basicHttpParams = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout((HttpParams)basicHttpParams, (int)10000);
        HttpConnectionParams.setSoTimeout((HttpParams)basicHttpParams, (int)10000);
        HttpConnectionParams.setTcpNoDelay((HttpParams)basicHttpParams, (boolean)true);
        DefaultHttpClient defaultHttpClient = new DefaultHttpClient((HttpParams)basicHttpParams);
        HttpGet httpGet = new HttpGet(url);
        BasicResponseHandler basicResponseHandler = new BasicResponseHandler();

        JSONObject json=null;
        try {
            json = new JSONObject((String)defaultHttpClient.execute((HttpUriRequest)httpGet, (ResponseHandler)basicResponseHandler));
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (JSONException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

# javascript - 使用 Javascript 和 Google Calendar API v3，我如何允许用户指定非主日历来添加事件？

> ID：10876083
> 
> 赞同：1
> 
> 时间：2012-06-04T03:43:43.550
> 
> 标签：javascript, google-calendar-api

当谈到 Google Calendar API 时，我是一个初学者，并且仍然是 javascript 的初学者。我试图让我的用户将事件添加到他们选择的日历中。我可以使用 Oauth2 进行身份验证并进行设置，以便他们可以将事件添加到具有硬编码日历 ID 的日历中，但我不知道如何允许他们选择日历。我仔细阅读了网络，但一无所获。任何帮助深表感谢。CRS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T03:53:09.663

这就是我所做的。同样，我只是在学习 javascript，但是下面的函数让我可以获取带有 calendarID 和 calendarSummary 的日历列表。我使用这些值来创建将 calendarID 变量传递到将由服务器处理的页面的链接。该页面将 URL 变量传递给使用 calendarID 插入事件的 javascript 函数。

```
function getAvailableCalendars() {
      gapi.client.load('calendar', 'v3', function() {
        var request = gapi.client.calendar.calendarList.list();
        request.execute(function(resp) {
            var mydiv = document.createElement('div');
            mydiv.innerHTML = 'Choose a calendar to insert the event:<br />'
          for (var i = 0; i < resp.items.length; i++) {
            var calendarID = resp.items[i].id;
            var calendarSummary = resp.items[i].summary;
            var a = document.createElement('a');
            a.title = calendarSummary;
            a.innerHTML += a.title + '<br />';
            a.href='http://mysite.com/intakeCalInsert.cfm?calendar=' +calendarID;
            mydiv.appendChild(a);
            document.getElementById('events').appendChild(mydiv);

          }
        });
      });
    } 
```

我确信这可以更有效地处理，但它对我有用。也许有人可以从这段代码中得到一些想法并让它变得更好。

# android - 自定义背景按钮缺少文本

> ID：10876089
> 
> 赞同：1
> 
> 时间：2012-06-04T03:44:15.523
> 
> 标签：android, button

目前我正在尝试创建具有自定义背景的自定义按钮，关键是我想以编程方式为按钮创建圆角边缘。这是我创建的代码：

```
GradientDrawable gd = new GradientDrawable(Orientation.TOP_BOTTOM, new int[] {Color.parseColor("#ffffff"),Color.parseColor("#999999")});
gd.setCornerRadii(new float[] { 0, 0, 10, 10, 10, 10, 0, 0 });
gd.setStroke(1, Color.parseColor("#33364252"));

Button pillButtonRight = new Button(this);
pillButtonRight.setId(R.id.pillButtonRight);
pillButtonRight.setBackgroundDrawable(gd);  
pillButtonRight.setWidth(ViewUtils.getScreenWidth(getBaseContext())/8);
pillButtonRight.setHeight(ViewUtils.getScreenHeight(getBaseContext())/40);
pillButtonRight.setText("English");     
pillButtonRight.setTextColor(Color.parseColor("#000000"));
pillButtonRight.setTextSize(12); 
```

getscreenwidth 和 getscreenheight 背后的代码是

```
WindowManager wm = (WindowManager) ctx.getSystemService(Context.WINDOW_SERVICE);
Display display = wm.getDefaultDisplay();
int screenWidthDp = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, display.getWidth(), ctx.getResources().getDisplayMetrics()); 
```

结果文字不见了

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T04:48:03.443

更改文本的颜色

```
pillButtonRight.setTextColor(Color.parseColor("#ff00ff00")); 
```

# php - cakephp 2.0 的内部连接？

> ID：10876092
> 
> 赞同：0
> 
> 时间：2012-06-04T03:44:30.493
> 
> 标签：php, mysql, cakephp

我知道在这里问这个问题有点懒惰，因为基本上我只需要阅读文档就可以知道答案。但实际上我没有那么多时间，而且我还是个初学者。

我想在 cakephp 中生成这种查询：

```
SELECT Persons.LastName, Persons.FirstName, Orders.OrderNo
FROM Persons
INNER JOIN Orders
ON Persons.P_Id=Orders.P_Id
ORDER BY Persons.LastName 
```

但问题是我有点困惑，因为如您所见，您将从 2 个不同的表中选择值。所以我的猜测是，我需要为每个和控制器创建两个模型。是不是有点麻烦？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T04:02:24.523

您要做的是 CakePHP 提供的基本模型关联。[http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)

所以是的，你需要为每个模型创建模型，可能有一个关联，所以一个人有很多订单。

此外，使用 MVC 架构，您通常在数据库中的每个表都有一个模型。您的控制器将处理模型和视图之间的通信。因此，如果不需要模型的专用视图，那么您可能不需要控制器。

我真的建议你阅读 CakePHP 的书，并做他们提供的博客演示，并真正尝试根据 MVC 架构提出的概念。

# asp.net-mvc - ASP.NET MVC 3 登陆页面

> ID：10876095
> 
> 赞同：5
> 
> 时间：2012-06-04T03:44:56.610
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我试图找到登陆页面的最佳方式，我希望我的网址是这样的。

*   www.myweb.com <=== 登陆页面
*   www.myweb.com/Home <=== 主页

然后我想出了这个。

```
routes.MapRoute(
    "Landing",
    "",
    new { controller = "Home", action = "Landing" }
);

routes.MapRoute(
   "Home",
   "Home",
   new { controller = "Home", action = "Index" }
);

routes.MapRoute(
    "Default",
    "{controller}/{action}/{id}",
    new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

第一个是 ( `Landing`) 是使 www.myweb.com 重定向到`View/Home/Landing.cshtml`. 第二个 ( `Home`) 是 mke www.myweb.com/Home 重定向到`View/Home/Index.cshtml`.

我想问有没有比这更好的方法？或者这很好？**谢谢你的建议**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T03:47:23.457

对我来说看起来不错。一件小事是第二条规则是多余的。如果你完全忽略它，第三条规则将覆盖它： **/Home**映射到它，**Index**是默认操作。

# google-apps-script - 允许其他人添加 Google 任务

> ID：10876097
> 
> 赞同：0
> 
> 时间：2012-06-04T03:45:04.283
> 
> 标签：google-apps-script, google-tasks-api, google-tasks

我正在寻找一种方法让员工向我发送电子邮件或将信息添加到电子表格中，然后将任务添加到我的任务列表中。理想情况下，脚本将捕获任务列表、任务、截止日期和任何注释。

我已经成功实现了五个脚本（五个任务列表），允许我的员工按照下面显示的脚本将任务添加到特定的任务列表中。这可以正常工作，但无法添加到期日期或注释：

[自动发送电子邮件到任务列表 API](http://www.pipetree.com/qmacro/blog/2011/10/automated-email-to-task-mechanism-with-google-apps-script/)

我最近遇到了对监视任务列表的脚本的引用，然后将它们发布到电子表格中，包括任务、截止日期、注释等。令我震惊的是，电子表格可能是更好的方法，尽管它没有电子邮件的便利性：

[电子表格 API 的任务列表](https://productforums.google.com/forum/?fromgroups#!searchin/apps-script/tasks%2420/apps-script/QXRI4ekF4_E/lqQAFMZnn_oJ)

我想知道 REVERSE 是否可以完成。我设想了一个电子表格，我可以让我的员工访问它，其中包含两个工作表（新的和已处理的），其中包含列：

```
TASKLIST   TASK   DUE DATE   NOTES 
```

并且脚本将每隔一两个小时运行一次。NEW 中的任何内容都将被处理并添加到我的任务列表中，然后移至 PROCESSED 的末尾。

有没有人知道那里有类似的东西？或者，也许有一些方法可以更改电子邮件脚本，以便将电子邮件正文中的任何内容移动到任务的 NOTES 部分。我是这个 BTW 的新手。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T18:45:16.967

存在所有功能来完成此操作，但我不知道是否有预构建的脚本可以满足您的需求。您可能想研究使用将数据保存到电子表格的 Google 表单，然后为表单提交创建一个触发器，该触发器收集数据并使用它创建一个新任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T07:23:43.097

你应该替换
`var newTask = Tasks.newTask().setTitle(title);`
为
`var newTask = Tasks.newTask().setTitle(title).setDue(date).setNotes(notes);`

我也卡在了路上

我可以从电子表格中： - 创建新任务列表 - 在专用任务列表中创建新任务（带有截止日期和注释）

我可以从 Gtasks 中： - 检查任务是否已完成，并在电子表格中将其标记为已完成 - 检查任务是否仍然存在于电子表格中，并在必要时将其删除

当它在电子表格中关闭时，我仍在寻找一种在 GTasks 中完成任务的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T14:35:36.183

这是您正在寻找的[部分]吗？

[https://developers.google.com/apps-script/articles/google_apis_reading_list](https://developers.google.com/apps-script/articles/google_apis_reading_list)

它将基于电子表格的任务列表与您的常规任务列表同步，如果您在 gmail 中将任务标记为已完成，它会将其记录回电子表格中。

// 获取要保持同步的 URL 列表 var articleUrls = SpreadsheetApp.getActiveSheet().getRange("A2:A"); for (var rowNum = 0; rowNum < articleUrls.getNumRows(); rowNum++) {

```
// Limit our range to a single cell containing a URL
var oneUrlCell = articleUrls.offset(rowNum, 0, 1, 1);  
if (oneUrlCell.getComment() === "") {
  // This is a new URL that needs to be shortened/inserted
  var urlText = oneUrlCell.getValue();
  if (urlText !== "") {
    // Shorten the URL
    Logger.log("Adding task for url: " + urlText);
    var toShorten = UrlShortener.newUrl().setLongUrl(urlText);
    var shortened = UrlShortener.Url.insert(toShorten);

    // Insert the shortened URL into our reading list
    var taskToInsert = Tasks.newTask().setTitle(shortened.getId());
    taskToInsert.setNotes(urlText);
    var newTask = Tasks.Tasks.insert(taskToInsert, readingListId);

    // Save the new ID as our comment.
    oneUrlCell.setComment(newTask.getId());
  }
} else {
  // This URL has already been inserted, update the status
  var existingTask = Tasks.Tasks.get(readingListId, oneUrlCell.getComment());
  if (existingTask.getStatus() === "completed") {
    var absRowNum = oneUrlCell.getRow();
    var completedCell = sheet.getRange(absRowNum, 2);
    completedCell.setValue("Yes");
  }
} 
```

应该是解决方案的一部分，不是吗？

我想自己做一些更大的事情。

# c++ - Protobuf：如何在 C++ 中处理嵌套（自定义）可选字段？

> ID：10876099
> 
> 赞同：7
> 
> 时间：2012-06-04T03:45:25.917
> 
> 标签：c++, protocol-buffers

阅读[Protocol Buffer Basics: C++](https://developers.google.com/protocol-buffers/docs/cpptutorial)，没有发现任何符合情况的内容：；使用以下*.proto*处理`--cpp_out`，

```
message A {
 required int32 foo = 1;
}
message B {
 optional A data = 1;
} 
```

没有生成明显的访问器/设置器来设置自定义可选字段（包括我懒得放在这里的“嵌套类型”部分）：

```
 // accessors -------------------------------------------------------

   // optional .A = 1;
   inline bool has_a() const;
   inline void clear_a();
   static const int kAFieldNumber = 1;
   inline const ::A& a() const;
   inline ::A* mutable_a();
   inline ::A* release_a(); 
```

那么，**如何在 C++ 中将 B::A 设置为某个 A 实例？**

* * *

**测试文件**：[.proto](http://www.everfall.com/paste/id.php?3d66cy6gjs27)，生成的结果：[.h](http://www.everfall.com/paste/id.php?xpwqyvusf210)，[.cc](http://www.everfall.com/paste/id.php?6ubwc0wlatct)和一些[.java](http://www.everfall.com/paste/id.php?3iz27edjj8l8)

* * *

更新：在 Java 中，嵌套字段是通过 Builder 设置的：例如，请参见上面的链接（查找*setData*）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-04T04:10:55.530

解决方案：使用 mutable 修改一些返回的 doodad。

```
A a;
A.set_foo(1);

B b;
B.mutable_A()->CopyFrom(a); 
```

# sqlite - 如何比较 SQLite 中的两个日期？

> ID：10876105
> 
> 赞同：16
> 
> 时间：2012-06-04T03:46:18.700
> 
> 标签：sqlite

我有点假设它是一个字符串，所以我将它作为一个字符串进行比较，但并不奇怪它失败了。我相信这就是它在 Mysql 中的工作方式。我可能是错的，因为我有一段时间没有工作了。在任何一种情况下，如何检查 SQLite 中的日期是否相等？我将在 WHERE 子句中使用它。

```
SELECT a._id, b._id, b.start_date,a.event_name, b.start_time, 
b.end_date, b.end_time, b.location FROM events_info b INNER JOIN events a ON
 a._id=b.event_id WHERE b.start_time = '6:00'; 
```

（增加空间以便于查看）

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-04T05:09:48.923

SQLite 没有专用的 DATETIME 类型。通常人们所做的是确保他们将日期存储为一致的格式化字符串；例如，YYYY-MM-DD hh:mm:ss。如果这样做，只要您保持一致，那么您可以直接比较日期：

```
SELECT * FROM a WHERE q_date < '2013-01-01 00:00:00'; 
```

这是有效的，因为即使比较在技术上是按字母顺序进行的比较，而不是数字比较，日期在一致的格式中，如这种按字母顺序和数字顺序排序。

对于这样的模式，我建议以 24 小时格式存储日期（上面的示例是午夜）。用零填充月、日和小时。如果您的日期将跨越多个时区，请将它们全部存储在 UTC 中，并在客户端进行任何您需要的转换以将它们转换为本地时区。

通常日期和时间都存储在一列中。如果您出于某种原因必须将它们分开，请确保您的日期都一致并且您的时间都一致。例如，日期应全部为 YYYY-MM-DD，时间应全部为 hh:mm:ss。

YYYY-MM-DD hh:mm:ss 是首选格式的原因是，当您从最大的日期间隔（年）到最小的（秒）时，您可以非常轻松地对它们进行索引和排序，并且性能很高。

```
SELECT * FROM a WHERE q_date = '2012-06-04 05:06:00'; 
```

将使用索引来磨练日期/时间，而不必进行全表扫描。或者，如果它们位于两个单独的行中：

```
SELECT * FROM a WHERE q_date = '2012-06-04' AND q_time = '05:06:00'; 
```

关键是确保日期和时间以一致的格式进入数据库。为了用户友好的演示，所有转换都在客户端进行，而不是在数据库中。（例如，将“2012-06-04 05:06:00”转换为“1:06am Eastern 6/4/2012”。）

如果这不能回答问题，您能否发布您用于存储日期和时间的确切格式，以及您尝试比较的两个示例日期，这些日期和您期望的方式不同？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-08T12:05:11.643

Sqlite 不能直接比较日期。我们需要在几秒钟内转换它们以及整数。

例子

```
SELECT * FROM Table  
WHERE  
CAST(strftime('%s', date_field)  AS  integer) <=CAST(strftime('%s', '2015-01-01')  AS  integer) ; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T04:09:13.713

从[SQLite 版本 3 中的数据类型](http://www.sqlite.org/datatype3.html)：

> **1.2 日期和时间数据类型**
> 
> SQLite 没有为存储日期和/或时间预留存储类。相反，SQLite 的内置[日期和时间函数](http://www.sqlite.org/lang_datefunc.html)能够将日期和时间存储为 TEXT、REAL 或 INTEGER 值：
> 
> *   **TEXT**作为 ISO8601 字符串（“YYYY-MM-DD HH:MM:SS.SSS”）。
> *   **REAL**作为儒略日数字，根据预测的公历，自公元前 4714 年 11 月 24 日格林威治中午以来的天数。
> *   **INTEGER**作为 Unix 时间，自 1970-01-01 00:00:00 UTC 以来的秒数。
> 
> 应用程序可以选择以任何这些格式存储日期和时间，并使用内置的日期和时间函数在格式之间自由转换。

如果您查看[Date And Time Functions](http://www.sqlite.org/lang_datefunc.html)中的示例，这样的事情应该会让您接近您想要的（我假设是当天的 6:00）：

```
WHERE b.start_time = date('now', 'start of day', '+6 hours') 
```

# matlab - Matlab/Octave one-liner，用于第 i 个位置为 1 的 n 向量

> ID：10876109
> 
> 赞同：9
> 
> 时间：2012-06-04T03:47:39.130
> 
> 标签：matlab, octave

例如，给定`i=5`and `n=8`，我想生成`[0;0;0;0;1;0;0;0]`. 具体来说，我想生成向量`v`，以便：

```
v = zeros(n,1);
v(i) = 1; 
```

有没有一种（合理的）方法可以在一行中做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-05T00:16:02.777

另一种解决方案：

```
I = eye(n);

v = I(:, i); 
```

实际上，您可以有一个`y`从 1 到 n 的数字向量，并为每个元素获取这样的向量：

```
v = I(:, y); 
```

有关此通用解决方案的详细信息，您可以查看我的[博客文章](http://novyden.blogspot.com/2012/06/gentle-intro-to-octave.html)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-04T03:49:08.537

一种方法是`[1:8]'==5`，或更一般地`[1:n]'==i`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-05T00:29:40.323

这是另一种解决方案，[`sparse`](http://www.mathworks.com/help/techdoc/ref/sparse.html)用于创建在第 th 位置`n`具有 1 的长度行向量：`i`

```
v = sparse(1,i,1,1,n) 
```

优点是对于 large `n`，这也是内存高效的，并且可以像往常一样用于矩阵计算。如果您需要完整的向量，只需使用[`full`](http://www.mathworks.com/help/techdoc/ref/full.html).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T06:14:25.743

这是另一个：

```
n = 8;
p = 4;
arrayfun(@str2double,dec2bin(2^(p-1),n)) 
```

还有一个（创建一个行向量）：

```
circshift( [1 zeros(1,n-1)],[0 p]); 
```

或列向量：

```
circshift( [1 ; zeros(n-1,1)],[p 0]); 
```

* * *

这是另一个：

```
subsref( eye(n), struct('type','()', 'subs',{{ p,':' }})) 
```

# haskell - GHC 优化：Collat z 猜想

> ID：10876110
> 
> 赞同：12
> 
> 时间：2012-06-04T03:47:45.547
> 
> 标签：haskell, optimization

我已经用[Haskell](http://ideone.com/ABUPK)和[C++](http://ideone.com/MxeFl)（ideone 链接）为[Project Euler's Challenge 14](http://projecteuler.net/problem=14)编写了代码。他们都记得他们之前在数组中所做的任何计算。

分别使用`ghc -O2`和`g++ -O3`，C++ 的运行速度比 Haskell 版本快 10-15 倍。

虽然我了解 Haskell 版本可能运行速度较慢，并且 Haskell 是一种更好的编写语言，但很高兴知道我可以对 Haskell 版本进行一些代码更改以使其运行得更快（最好在 2 倍或3 C++ 版本）？

* * *

Haskell 代码在这里：

```
import Data.Array
import Data.Word
import Data.List

collatz_array = 
  let
    upperbound = 1000000
    a = array (1, upperbound) [(i :: Word64, f i :: Int) | i <- [1..upperbound]]
    f i = i `seq`
      let
        check_f i = i `seq` if i <= upperbound then a ! i else f i
      in
        if (i == 1) then 0 else (check_f ((if (even i) then i else 3 * i + 1) `div` 2)) + 1
  in a

main = 
  putStrLn $ show $ 
   foldl1' (\(x1,x2) (y1,y2) -> if (x2 >= y2) then (x1, x2) else (y1, y2)) $! (assocs collatz_array) 
```

* * *

**编辑：**

我现在还使用未装箱的可变数组完成了一个版本。它仍然比 C++ 版本慢 5 倍，但有了显着的改进。代码在 ideone[上](http://ideone.com/2M2ww)。

我想知道对可变数组版本的改进，使其更接近 C++ 版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T10:57:49.407

您的（可变数组）代码存在一些问题：

*   您使用折叠来查找最大链长度，因为必须将数组转换为关联列表，这需要时间和分配 C++ 版本不需要。
*   您使用`even`and`div`来测试 resp 除以 2。这些速度很慢。g++ 将这两种操作都优化为更快的位操作（至少在据说更快的平台上），但 GHC 还没有进行这些低级优化，所以暂时，它们必须手动完成.
*   您使用`readArray`和`writeArray`。在 C++ 代码中未完成的额外边界检查也需要时间，一旦处理了其他问题，这相当于运行时间的很大一部分（我的盒子上大约 25%），因为已经完成算法中有很多读写操作。

将其纳入实施，我得到

```
import Data.Array.ST
import Data.Array.Base
import Control.Monad.ST
import Data.Bits

collatz_array :: ST s (STUArray s Int Int)
collatz_array = do
    let upper = 10000000
    arr <- newArray (0,upper) 0
    unsafeWrite arr 2 1
    let check i
            | upper < i = return arr
            | i .&. 1 == 0 = do
                l <- unsafeRead arr (i `shiftR` 1)
                unsafeWrite arr i (l+1)
                check (i+1)
            | otherwise = do
                let j = (3*i+1) `shiftR` 1
                    find k l
                        | upper < k = find (next k) $! l+1
                        | k < i     = do
                            m <- unsafeRead arr k
                            return (m+l)
                        | otherwise = do
                            m <- unsafeRead arr k
                            if m == 0
                              then do
                                  n <- find (next k) 1
                                  unsafeWrite arr k n
                                  return (n+l)
                              else return (m+l)
                          where
                            next h
                                | h .&. 1 == 0 = h `shiftR` 1
                                | otherwise = (3*h+1) `shiftR` 1
                l <- find j 1
                unsafeWrite arr i l
                check (i+1)
    check 3

collatz_max :: ST s (Int,Int)
collatz_max = do
    car <- collatz_array
    (_,upper) <- getBounds car
    let find w m i
            | upper < i = return (w,m)
            | otherwise = do
                l <- unsafeRead car i
                if m < l
                  then find i l (i+1)
                  else find w m (i+1)
    find 1 0 2

main :: IO ()
main = print (runST collatz_max) 
```

以及时间（均为 1000 万）：

```
$ time ./cccoll
8400511 429

real    0m0.210s
user    0m0.200s
sys     0m0.009s
$ time ./stcoll
(8400511,429)

real    0m0.341s
user    0m0.307s
sys     0m0.033s 
```

这看起来还不错。

**重要说明：**该代码仅适用于 64 位 GHC（因此，特别是在 Windows 上，您需要 ghc-7.6.1 或更高版本，以前的 GHC 即使在 64 位 Windows 上也是 32 位），因为中间链元素超过 32位范围。在 32 位系统上，必须使用`Integer`64 位整数类型 ( `Int64`or `Word64`) 来跟踪链，这会带来巨大的性能成本，因为原始的 64 位操作（算术和移位）是作为外部调用实现的32 位 GHC 中的 C 函数（*快速*的外部调用，但仍比直接机器操作慢得多）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T07:03:13.440

ideone 站点使用的是 ghc 6.8.2，它已经很老了。在 ghc 版本 7.4.1 上，差异要小得多。

使用 ghc：

```
$ ghc -O2 euler14.hs && time ./euler14
(837799,329)
./euler14  0.63s user 0.04s system 98% cpu 0.685 total 
```

使用 g++ 4.7.0：

```
$ g++ --std=c++0x -O3 euler14.cpp && time ./a.out
8400511 429
./a.out  0.24s user 0.01s system 99% cpu 0.252 total 
```

对我来说，ghc 版本只比 c++ 版本慢 2.7 倍。此外，这两个程序没有给出相同的结果......（不是一个好兆头，特别是对于基准测试）

# php - 有没有办法从包含的文件中获取顶级 PHP 文件的名称？

> ID：10876111
> 
> 赞同：1
> 
> 时间：2012-06-04T03:48:13.503
> 
> 标签：php

假设我正在编写一个全局 logData 方法，该方法想要写入一个与运行它的 php 同名但扩展名为 .log 的日志文件。

我将此日志记录包含在父 php 中，目的是让它始终写入日志文件，无论 *父文件名是什么（而不是它所在的 tools.php 库）。

所以，我有 /some/arbitrary/directory/parent.php

调用

包括（“/path/to/my/php/libs/tools.php”）；

但是当我运行 tools.php 中的日志记录方法时，它会记录到一个名为

/path/to/my/php/libs/tools.php.log

而不是 /some/arbitrary/directory/parent.php.log （这是我想要的）。

我正在使用`__FILE__`它的行为方式（可能是它的意图）。是否有获取父文件名的命令，以便我可以按我的意愿工作？或者我是否必须将**FILE**作为参数从父 php 传递到我的方法中才能让它写入正确的输出文件？

TIA

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T03:59:50.823

您可能会使用 $_SERVER["SCRIPT_FILENAME"]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T03:58:11.573

debug_backtrace() 会给你你需要的。

[http://php.net/manual/en/function.debug-backtrace.php](http://php.net/manual/en/function.debug-backtrace.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T03:59:33.280

您需要传递`__FILE__`给日志类。

就像是：

```
// file:/some/arbitrary/directory/parent.php
$logger = new Logger(__FILE__);

// file:/path/to/my/php/libs/tools.ph
public function __construct($file) {
  // But it is not good idea to save log file same with php files.
  $this->log_path = $file.'.log';
} 
```

# flash - “.initialize”在 ActionScript 2.0 中有什么作用？

> ID：10876112
> 
> 赞同：0
> 
> 时间：2012-06-04T03:49:06.007
> 
> 标签：flash, actionscript-2

ActionScript 2.0 中有什么作用`.initialize`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T04:06:12.097

查看 ActionScript 2 的索引，只有一个对`.initialize()`属于[`AsBroadcaster`](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000756.html)该类的方法的引用：

![在此处输入图像描述](../Images/b724665e7a7a81f0ea9714e969073d6a.png)

至于它的作用，似乎只是为任何 Object 实例添加了一些功能。

> `initialize(obj: Object) : Void`
>   将事件通知和侦听器管理功能添加到给定对象。

# jquery - 从 simplemodal iframe 弹出窗口返回值到父文本框

> ID：10876114
> 
> 赞同：1
> 
> 时间：2012-06-04T03:49:33.447
> 
> 标签：jquery, simplemodal

我已经创建了一个[simpleModal](http://www.ericmmartin.com/projects/simplemodal/)弹出窗口。我想将弹出窗口上的文本输入中的值返回到父页面上的 asp 文本框。

我已经阅读了所有与此类似的示例，但没有一个回答我的问题。

我的弹出窗口是一个带有文本输入的简单 aspx 页面。这是代码：

### JavaScript

```
 $(document).ready(function() {
    $("a#lookup").click(function () {
      //Load the Lookup page as a modal popup..
      $.modal('<iframe src="TestPopup.aspx" height="200" width="450" style="border:5">', {
        onOpen: function (dialog) {
            dialog.overlay.fadeIn('slow', function () {
                dialog.container.slideDown('100', function () {
                    dialog.data.fadeIn('fast');
            }); 
          }); 
        },
        preventDefault: true,
        containerCss: {
          backgroundColor: "#fff",
          borderColor: "#aaa",
          height: 530,
          padding: 5,
          width: 880,
          escClose: false
        },
        closeHTML: "<a href='#'>Close</a>",
        appendTo: 'form',
        persist: true,
        overlayClose: true,
        onClose: function (dialog) {
          var result = dialog.data.find("#msgText").val();
          $('#txtLookupReturn').attr('value', result);
          dialog.data.fadeOut('200', function () {
            dialog.container.slideUp('200', function () {
              dialog.overlay.fadeOut('200', function () {
                $.modal.close();
              }); 
            });
          });
        }
      }); 
    });    
  }); 
```

### TestPopup.aspx

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="TestPopup.aspx.cs" Inherits="WebServicesTest.TestPopup" %> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">; 
<html xmlns="w3.org/1999/xhtml">; 
<head runat="server"> 
  <title></title> 
</head> 
<body> 
  <form id="form1" runat="server"> 
  <div> 
    <input id="msgText" type="text" value="I love jQuery!" /> 
  </div> 
  </form> 
</body> 
</html> 
```

这是不起作用的代码行：

```
var result = dialog.data.find("#msgText").val();

$('#txtLookupReturn').attr('value', result); 
```

当我尝试获取 的值时`#msgText`，没有错误也没有值。感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:16:15.390

我认为您的选择代码应该是这样的：

```
$("iframe[src='TestPopup.aspx']").contents().find("#msgText").val(); 
```

在 iframe 中选择元素有一些复杂性，在[这个问题](https://stackoverflow.com/questions/2893280/jquery-select-iframe-children)和[这个博客文章](http://seriouscoding.com/2009/05/22/how-to-access-an-iframe-with-jquery/)中都有解决。 [这个问题](https://stackoverflow.com/questions/364952/jquery-javascript-accessing-contents-of-an-iframe)讨论了 JavaScript 和 iframe 的权限。我不知道你的页面是如何组织的，所以我不知道你是否会遇到[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)的问题，但无论如何阅读都是一件好事。

### 更新

我越看你的弹出式 HTML，我就越觉得你不需要使用`iframe`. 当我使用 SimpleModal 时，我通常将我的对话框 HTML 放在一个不可见的`<div>`. 这`iframe`将不必要地缓慢并增加您的服务器流量。如果您需要从服务器加载值，您可能希望将其保留为`iframe`. 但是，如果您只需要用户提供值，请将对话框表单作为 HTML 包含在您的页面上。

# python - Python类定义--import语句

> ID：10876117
> 
> 赞同：2
> 
> 时间：2012-06-04T03:49:46.200
> 
> 标签：python

我已经定义了 2 个类——Person 和 Manager。Manager 继承了 Person 类。尝试导入 Person 类时出现错误..

代码如下。

人物.py

```
class Person:
    def __init__(self, name, age, pay=0, job=None):
        self.name = name
        self.age  = age
        self.pay  = pay
        self.job  = job

    def lastname(self):
        return  self.name.split()[-1]

    def giveraise(self,percent):
        #return self.pay *= (1.0 + percent)
        self.pay *= (1.0 + percent)
        return self.pay 
```

管理器.py

```
from Basics import Person

class Manager(Person):
    def giveRaise(self, percent, bonus=0.1):
        self.pay *= (1.0 + percent + bonus)        
        return self.pay 
```

错误陈述：

C:\Python27\基础>Person.py

C:\Python27\Basics>Manager.py Traceback（最近一次调用最后一次）：文件“C:\Python27\Basics\Manager.py”，第 1 行，从 Basics 导入 Person ImportError：没有名为 Basics 的模块

为什么我会收到 No module found 错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T03:54:26.847

您应该查看[import 和 PYTHONPATH](http://www.stereoplex.com/blog/understanding-imports-and-pythonpath)的工作方式。在您的情况下，您可以使用以下方法解决该问题：

```
from Person import Person 
```

我看到您来自 Java 背景（每个文件必须有一个与文件同名的类），但这不是 Python 模块的工作方式。

简而言之，当您从命令行运行 Python 脚本时，它会在您的当前目录中查找模块（以及其他位置）。当您像以前一样导入（简单）名称时，Python 将查找：

1.  一个名为`Basic.py`; 或者：
2.  一个名为 Basic 的文件夹，其中包含一个名为`__init__.py`.

然后它将在该模块中查找名为`Person`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T03:53:20.183

因为它在`Person.py`，不是`Basics.py`。

```
from Person import Person 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T03:53:23.820

您`Person`在一个名为`Person.py`. 因此，您应该像这样导入它：

```
from Person import Person 
```

请注意，Python 中的约定是使用小写的模块名称。例如，重命名`Person.py`为`person.py`和。然后你会像这样导入类：`Manager.py``manager.py``Person`

```
from person import Person 
```

如果`person`模块是包的一部分，您可能希望像这样导入：

```
from .person import Person 
```

这将简化向 Python 3 的过渡。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T03:54:47.057

`from Basics import Person`应该是`from Person import Person`。您没有要从中导入的 Basics.py 模块。

# android - Android - 如何为布局创建选择器（如 ImageButton 选择器）

> ID：10876119
> 
> 赞同：2
> 
> 时间：2012-06-04T03:50:12.740
> 
> 标签：android, xml, background, selector, imagebutton

我有一个 ImageButton 和一个包装该按钮的 LinearLayout，如下所示：

```
<LinearLayout
        android:id="@+id/homeButtonLayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/p_buttons_background"
        android:orientation="vertical" >

        <ImageButton
            android:id="@+id/homeButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="10px"
            android:background="@drawable/home_icon"
            android:onClick="goBackToCameraScreen" />
    </LinearLayout> 
```

如上所示，我**在 LinearLayout 中**的 ImageButton 周围放置了一个背景。

当用户单击 ImageButton 时，我希望能够更改该背景（即**LinearLayout的背景，而不是 ImageButton 的背景）。**我可以以编程方式做到这一点，但我想通过 XML 做到这一点。我可以通过编写选择器轻松更改**ImageButton的背景，如下所示：**

```
 <?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
     <item android:state_pressed="true"
       android:drawable="@drawable/button_pressed" /> <!-- pressed -->
     <item android:state_focused="true"
       android:drawable="@drawable/button_focused" /> <!-- focused -->
     <item android:drawable="@drawable/button_normal" /> <!-- default -->
</selector> 
```

这***正是***我想要的，除了我想**更改 LinearLayout 背景，而不是 ImageButton 背景**。我怎样才能像上面那样创建一个 XML 选择器，但这实际上改变了 LinearLayout 的背景而不是 ImageButton 背景？

先感谢您！！=)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T04:22:12.693

将选择器设置为您的`LinearLayout`并添加`android:descendantFocusability="blocksDescendants"`到它。

在选择器中，将所有按钮背景替换为布局背景。

```
<LinearLayout
    android:id="@+id/homeButtonLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/layout_bg_selector"
    android:orientation="vertical" 
    android:descendantFocusability="blocksDescendants">

    <ImageButton
        android:id="@+id/homeButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="10px"
        android:background="@drawable/home_icon"
        android:onClick="goBackToCameraScreen" />
</LinearLayout> 
```

选择器`layout_bg_selector.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
     <item android:state_pressed="true"
       android:drawable="#F0F0F0" /> <!-- pressed -->
     <item android:state_focused="true"
       android:drawable="#00F000" /> <!-- focused -->
     <item android:drawable="#0000F0" /> <!-- default -->
</selector> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-15T06:20:13.800

我认为提问者现在已经死了：XD

但这是解决方案

将这两行代码添加到您的布局中：

```
android:clickable = "true" 
```

和

```
android:focusable = "true" 
```

主要样本是

> 我们有这样的约束布局：

```
<androidx.constraintlayout.widget.ConstraintLayout
    android:id="@+id/layoutSample"
    android:layout_width="150dp"
    android:layout_height="120dp"
    android:background="@drawable/layout_selector"
    android:clickable="true"
    android:focusable="true">
</androidx.constraintlayout.widget.ConstraintLayout> 
```

> 和（layout_selector.xml）像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/bg_pressed" android:state_pressed="true" /> <!-- pressed -->
    <item android:drawable="@drawable/bg_focused" android:state_focused="true" /> <!-- focused -->
    <item android:drawable="@drawable/bg_default" /> <!-- default -->
</selector> 
```

以及我们在选择器中使用的（bg_pressed.xml）和（bg_focused.xml）和（bg_default.xml），然后我们需要在drawable文件夹中声明它们，例如：

> bg_pressed.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

    <corners android:radius="8dp" />
    <solid android:color="#ffffff" />

    <stroke
    android:width="2dp"
    android:color="#00ff00" />
</shape> 
```

> bg_focused.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

    <corners android:radius="8dp" />
    <solid android:color="#ffffff" />

    <stroke
    android:width="2dp"
    android:color="#ff0000" />
</shape> 
```

> bg_default.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

    <corners android:radius="8dp" />
    <solid android:color="#ffffff" />
</shape> 
```

> 现在将您的图像视图或其他内容放入布局中并尝试点击：）（阅读问题！）

希望对你有帮助 ...

# ruby-on-rails - 有什么方法可以让 gmaps4rails 在街景中打开地图？

> ID：10876121
> 
> 赞同：3
> 
> 时间：2012-06-04T03:50:16.700
> 
> 标签：ruby-on-rails, google-maps, gmaps4rails, google-street-view

我尝试更改缩放级别，但它始终保持在地图模式下。在wiki上也找不到任何信息。任何帮助或其他建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T19:09:07.593

最终只使用了谷歌的 Javascript API。它是这样的：

```
pos = new google.maps.LatLng( <%= latitude %>, <%= longitude %> );

var div = document.getElementById('streetViewContainer');
var sv = new google.maps.StreetViewPanorama(div);
sv.setPosition( pos );
sv.setVisible( true );

// find the heading by looking from the google car pos to the venue pos
var service = new google.maps.StreetViewService();
service.getPanoramaByLocation( pos, 50, function(result, status) {
    if (status == google.maps.StreetViewStatus.OK) 
    {   
        carPos = result.location.latLng;
        heading = google.maps.geometry.spherical.computeHeading( carPos, pos );
        sv.setPov( { heading: heading, pitch: 0, zoom: 1 } );
    }
} ); 
```

# javascript - 如何确定 XMLHttpRequest.send() 是否有效

> ID：10876123
> 
> 赞同：27
> 
> 时间：2012-06-04T03:50:37.580
> 
> 标签：javascript, xmlhttprequest

我正在使用`XMLHttpRequest`将文件从`javascript`代码发送到`django view`。我需要检测文件是否已发送或是否发生了错误。我使用 jquery 编写了以下 javascript。

理想情况下，我想向用户显示文件未上传的错误消息。有什么方法可以做到这一点`javascript`吗？

我尝试通过`success/failure`从. `django view`_ `success/failed message`_ 我试图打印对象的。 节目`json``django view``xhr.open()` `non-asynchronous``xmlhttpRequest``responseText``console.log(xhr.responseText)`

```
response= {"message": "success"} 
```

我想知道的是，这是否是正确的方法。在许多文章中，我发现警告说

> 不推荐使用 async=false

`xhr.open()`那么，有没有办法在保持异步的同时找出文件是否已发送？

```
$(document).ready(function(){
   $(document).on('change', '#fselect', function(e){
            e.preventDefault();
            sendFile();
        });
});

function sendFile(){
   var form = $('#fileform').get(0);
   var formData = new FormData(form);
   var file = $('#fselect').get(0).files[0];
   var xhr = new XMLHttpRequest();
   formData.append('myfile', file);
   xhr.open('POST', 'uploadfile/', false);
   xhr.send(formData);
   console.log('response=',xhr.responseText);
} 
```

我的`django`视图从表单数据中提取文件并写入目标文件夹。

```
def store_uploaded_file(request):
   message='failed'
   to_return = {}
   if  (request.method == 'POST'):          
      if request.FILES.has_key('myfile'):
         file = request.FILES['myfile']
         with open('/uploadpath/%s' % file.name, 'wb+') as dest:
            for chunk in file.chunks():
               dest.write(chunk)
               message="success"
   to_return['message']= message
   serialized = simplejson.dumps(to_return)
   if store_message == "success":
      return HttpResponse(serialized, mimetype="application/json")
   else:
      return HttpResponseServerError(serialized, mimetype="application/json") 
```

编辑：

我在@FabrícioMatté 的帮助下完成了这项工作

```
xhr.onreadystatechange=function(){
       if (xhr.readyState==4 && xhr.status==200){
          console.log('xhr.readyState=',xhr.readyState);
          console.log('xhr.status=',xhr.status);
          console.log('response=',xhr.responseText);

          var data = $.parseJSON(xhr.responseText);
          var uploadResult = data['message']
          console.log('uploadResult=',uploadResult);

          if (uploadResult=='failure'){
             console.log('failed to upload file');
             displayError('failed to upload');
          }else if (uploadResult=='success'){
             console.log('successfully uploaded file');
          }
       }
    } 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2016-06-06T22:05:43.090

类似以下代码的东西应该可以完成这项工作：

```
 xmlhttp.onreadystatechange = function() {
      if (xmlhttp.readyState === 4) {
        var response = JSON.parse(xmlhttp.responseText);
          if (xmlhttp.status === 200) {
             console.log('successful');
          } else {
             console.log('failed');
          }
      }
    } 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-04T04:22:00.993

`XMLHttpRequest`对象包含`status`和`readyState`属性，您可以在`xhr.onreadystatechange`事件中对其进行测试以检查您的请求是否成功。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-09T15:25:19.703

`XMLHttpRequest`提供侦听处理请求时可能发生的各种事件的能力。这包括定期进度通知、错误通知等。

所以：

```
function sendFile() {
   var form = $('#fileform').get(0);
   var formData = new FormData(form);
   var file = $('#fselect').get(0).files[0]
   var xhr = new XMLHttpRequest();
   formData.append('myfile', file);
   xhr.open('POST', 'uploadfile/', false);
   xhr.addEventListener("load", transferComplete);
   xhr.addEventListener("error", transferFailed);
  }

    function transferComplete(evt) {
        console.log("The transfer is complete.");
        // Do something
    }

    function transferFailed(evt) {
        console.log("An error occurred while transferring the file.");
        // Do something
    } 
```

您可以阅读有关[使用 XMLHttpRequest](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest)的更多信息。

# asp.net - Ext.net 如何设置分页工具栏的总页数？

> ID：10876127
> 
> 赞同：0
> 
> 时间：2012-06-04T03:51:59.150
> 
> 标签：asp.net, sql, ext.net

我有一个数据集，在数据集中我有两个功能： `GetDataMenuPagin(@PageIndex, @PageSize)` `SP_GetCountMenuDataPagin()` 我从一个名为“菜单”的表中获取数据，其中包含 1500 条记录。我将页面大小设置为 10，因此总页面必须为 150 页。但是我如何为 pagingtoolbar 设置总计？

这是我的对象数据源和存储，我使用数据集：

```
<asp:ObjectDataSource ID="MenuDataSource" runat="server" OldValuesParameterFormatString="original_{0}"
        SelectMethod="GetDataMenuPagin" EnablePaging="false" 
        TypeName="dsHorizonTableAdapters.MenuTableAdapter" OnUpdating="MenuDataSourceUpdating"
        DataObjectTypeName="System.Guid" DeleteMethod="Delete" InsertMethod="Insert"
        OnSelecting="MenuDataSource_Selecting">
        <InsertParameters>
            <asp:Parameter DbType="Guid" Name="Id" />
            <asp:Parameter DbType="Guid" Name="ParentMenuId" />
            <asp:Parameter DbType="Guid" Name="PageId" />
            <asp:Parameter Name="Criteria" Type="String" />
            <asp:Parameter Name="Display" Type="String" />
            <asp:Parameter Name="Description" Type="String" />
            <asp:Parameter Name="MenuURL" Type="String" />
            <asp:Parameter Name="Sort" Type="String" />
            <asp:Parameter Name="IsActive" Type="Boolean" />
            <asp:Parameter Name="UpdateDate" Type="DateTime" />
            <asp:Parameter Name="UpdateUser" Type="String" />
            <asp:Parameter DbType="Guid" Name="MethodId" />
            <asp:Parameter Name="Image" Type="String" />
            <asp:Parameter DbType="Guid" Name="ProgramId" />
            <asp:Parameter DbType="Guid" Name="StatusId" />
        </InsertParameters>
        <SelectParameters>
            <asp:Parameter DefaultValue="0" Name="PageIndex" Type="Int32" />
            <asp:Parameter DefaultValue="10" Name="PageSize" Type="Int32" />
        </SelectParameters>
    </asp:ObjectDataSource>
    <ext:Store ID="MenuStore" runat="server" DataSourceID="MenuDataSource" AutoDataBind="false"
        AutoLoad="false" onrefreshdata="MenuStore_RefreshData">
        <Reader>
            <ext:JsonReader IDProperty="Id" AutoDataBind="True">
                <Fields>
                    <ext:RecordField Name="Id" />
                    <ext:RecordField Name="ParentMenuId" />
                    <ext:RecordField Name="PageId" />
                    <ext:RecordField Name="Criteria" />
                    <ext:RecordField Name="Display" />
                    <ext:RecordField Name="Description" />
                    <ext:RecordField Name="MenuURL" />
                    <ext:RecordField Name="IsActive" DefaultValue="true" />
                    <ext:RecordField Name="Sort" DefaultValue="0" />
                    <ext:RecordField Name="UpdateDate" Type="Date" />
                    <ext:RecordField Name="UpdateUser" />
                    <ext:RecordField Name="ParentMenuDisplay" />
                    <ext:RecordField Name="PageDisplay" />
                </Fields>
            </ext:JsonReader>
        </Reader>
        <Listeners>
            <LoadException Handler="Ext.Msg.Alert('Column - Load failed', e.message || e )" />
            <CommitFailed Handler="Ext.Msg.Alert('Column - Commit failed', 'Reason: ' + msg)" />
            <SaveException Handler="Ext.Msg.Alert('Column - Save failed', e.message || e)" />
            <CommitDone Handler="Ext.Msg.Alert('Column - Commit', 'The data successfully saved');" />
        </Listeners>
    </ext:Store> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:53:41.750

所以我有以下内容，我使用的是 VB，但我相信你可以将它转换为 C#

在“SelectParameters”中，我还有一个叫做“TotalPages”的，看起来像这样

```
<ext:Parameter Name="TotalPages" Type="Int32" Direction="Output" /> 
```

在您的 GetDataMenuPagin 方法中，应该看起来类似于...

```
Public Shared Function GetDataMenduPagin(ByVal  PageIndex As Int32, ByVal PageSize as Int32, ByRef TotalPagesas Int32) As List(Of xxxxx)
Dim res = (from i in db.my_table _
           Select i).Skip(PageIndex).Take(PageSize)

TotalPages = res.Count()

Return res.ToList()
End Function 
```

如您所见，我们将 TotalPages 设置为输出，只要您指定它是输出参数，我们就可以在您的 select 方法中绑定数字。

我在 C# 的某个地方看到了这个例子，但是我不记得在哪里。我将在今天晚些时候再次检查

# java - 如何使 *.form 文件显示在 NetBeans GUI 中？

> ID：10876128
> 
> 赞同：2
> 
> 时间：2012-06-04T03:51:59.937
> 
> 标签：java, netbeans

我无法在 NetBeans 项目的 GUI 结构中查看 *.form 文件。但是这些文件存在于目录中，并且可以通过 Windows 资源管理器看到。

我该怎么做才能在“文件”或“项目”窗口中看到它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T09:46:08.940

这些文件不会“按设计”显示在 NB 文件资源管理器视图中。它们是 Swing UI 编辑器的元数据，因此它们不是为手动编辑而设计的。当您在 NetBeans Swing UI 编辑器中处理 Swing 组件的布局时，它们会更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T18:08:49.610

您可以`.form`通过打开相关`.java`文件并单击文件源视图顶部的*设计按钮来查看和修改文件。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-05T16:29:54.530

我不知道如何在 netbeans IDE 中查看它。但是，您可以在保存项目的位置看到它。

文档 > Netbeans_Projects > project_name > 构建 > 类 > project_name

它在上述路径中可见。

# php - php Header函数不起作用，也没有给出任何错误

> ID：10876129
> 
> 赞同：0
> 
> 时间：2012-06-04T03:52:20.987
> 
> 标签：php, function, redirect, header

对于使用标题函数的页面，我有以下代码：

```
 <?php
        if (!defined('pagescope')) die('Please Try your Luck Somewhere else! Your IP Address has been logged!');
        define('pagescope', 'true');
        require'config.php';

                            *some Query processing with no echo command                                      

                            //$query1 = "select * from users";
                            if($query_run = mysql_query($query))
                            {                                                                    

                                $id=mysql_insert_id();

                                header("Location:     http://www.pingcampus.com/mysql/cropupload/jquery_upload_cropv1.2/upload_dp.php?id=$id&email=$contact_email&gender=$gender");
                                } else {
                                    echo mysql_error();

                                }                                               

                               ?> 
```

**我已经确保页面上没有 echo 语句，也没有给出错误！但它只是不重定向！它在我的本地主机上也可以正常工作，但在我的主机上却不行**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T04:04:51.710

试试这个

```
$result = mysql_query($query) or die(mysql_error());
if($result) {
    $id = mysql_insert_id();
    header("Location:http://www.pingcampus.com/mysql/cropupload/jquery_upload_cropv1.2/upload_dp.php?id=$id&email=$contact_email&gender=$gender");
} 
```

更新 ：

您的错误表明标头已被发送，请在脚本的其他部分进行适当的检查。或者您可以做的是使用输出缓冲。

放在`ob_start();`你的脚本之上。

> 这将打开输出缓冲。当输出缓冲处于活动状态时，不会从脚本发送输出（除了标题），而是将输出存储在内部缓冲区中。

更多信息在这里。[http://php.net/ob_start](http://php.net/ob_start)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T04:13:12.460

使用 ob_start() 进行输出缓冲。检查手动链接-[手动链接](http://php.net/manual/en/function.ob-start.php)

# node.js - 什么会导致 node.js 打印 Killed 并退出？

> ID：10876136
> 
> 赞同：57
> 
> 时间：2012-06-04T03:53:55.187
> 
> 标签：node.js

我有一个 Node.js 应用程序，它在应用程序启动时将一些数据从 Mysql 加载到 Redis 中。在我们修改 Mysql 中的数据之前，它一直运行良好。

现在它只是带着一条`Killed`消息退出。

我正在尝试查明问题，但很难使用节点检查器进行调试，因为在 --debug 中运行时不会出现问题。

我不认为我的问题出在数据本身，因为它适用于我的本地机器，但不适用于我的生产机器。

我的问题是，是什么导致了这个`Killed`消息？是 Node.js 还是在 Mysql 驱动程序或其他地方？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-06-04T06:48:25.197

检查系统日志以获取有关 Node 被杀死的消息。您的 Node 应用程序可能正在使用过多的内存并被[Out-Of-Memory 杀手杀死](http://linux-mm.org/OOM_Killer)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T06:42:45.993

不确定 Redis 是否是导致 Killed 消息的原因，但那是我的问题的原因。

我将大量数据发送到 multi 因为我最初认为这是使用流水线的方式（这是自动的）。

# javascript - Googlecharts arraytodatatable 可能的维度问题？

> ID：10876137
> 
> 赞同：0
> 
> 时间：2012-06-04T03:54:19.700
> 
> 标签：javascript, google-visualization

我有一个从 php 获得的 2 个数组，放入一个 2D Javascript 数组中。我正在尝试使用它来自动填充 Google Chart DataTable，但到目前为止我还没有成功。我唯一能想到的可能是数组 ix MxN 维度，而函数需要一个 NxM 数组？

因为第一个数组是由数字组成的，所以它不起作用吗？

```
 <html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Pressure Monitor</title>
    <script type="text/javascript">
    var samptable = new Array();
    samptable[0] = new Array(2);
    samptable[0,0]= nbsamples;  //first array obtained from php
    samptable[0,1]= samples;   //second array obtained from php. both are merged into a 2d array
    </script>

    <script type="text/javascript" src="http://www.google.com/jsapi"></script>

    <script type="text/javascript">
    google.load('visualization', '1', {packages: ['corechart']});
    </script>

    <script type="text/javascript"> 
    //var data; 
    function drawVisualization() {

  var data = google.visualization.arrayToDataTable(samptable[0]);
  // Create and draw the visualization.
  new google.visualization.LineChart(document.getElementById('visualization')).
      draw(data, {curveType: "function",
                  width: 500, height: 400,
                  vAxis: {maxValue: 10}}
          );
    }
    //function draw(){

    //}
    google.setOnLoadCallback(drawVisualization);
    </script>

</head>
<body style="font-family: Arial;border: 0 none;">
<div id="visualization" style="width: 800px; height: 400px;"></div>
</body>
</html> 
```

用于获取 nbsamples 和示例的代码：

```
echo '<script type="text/javascript">';
echo 'var samples = new Array("', join($ydata,'","'), '");';
echo 'var nbsamples = new Array("', join($nbsamples,'","'), '");';
echo '</script>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T04:06:12.573

试试这个来创建数组：

```
var samptable = [];
samptable.push(nbsamples);
samptable.push(samples); 
```

然后，由于您的数组似乎都是数据，请确保将 *opt_firstRowIsData* 选项指定为 true（默认为 false）：

```
var data = google.visualization.arrayToDataTable(samptable, true); 
```

您可能还想通过将*nbsamples*和*samples*记录到控制台来验证它们是否为有效数组：

```
console.log(nbsamples);
console.log(samples); 
```

为了使其有效，它们应分别显示为一行数据（相同数量的项目），例如：

```
[5, 4, 10]
[1, 3, 3] 
```

# javascript - 在Javascript中如何使用正则表达式查找单词

> ID：10876139
> 
> 赞同：-3
> 
> 时间：2012-06-04T03:54:30.473
> 
> 标签：javascript, regex

我需要识别所有具有相似模式的单词 ($"????" )，即

1.  `$"ahmad"`
2.  `$"kokoasddsf"`
3.  `$"asdasd asdas"`

但不是
`$asdasd` 也不是 `$"asdasds`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T04:44:10.847

试试这个正则表达式：

```
/\$"[a-z ]*"/i 
```

# javascript - Google API——需要，但有问题

> ID：10876140
> 
> 赞同：0
> 
> 时间：2012-06-04T03:54:37.713
> 
> 标签：javascript

我正在开发一个应用程序，用户可以在其中搜索图像，然后单击它以使用 Google API 将其选择为他们的网站头像。

现在，我只想说我还没有开始。

1.  最新的 Google API 在哪里（我看到的那个已弃用）

2.  我怎样才能防止它耗尽 CPU（因为不推荐使用的那个给了我一个 CPU 限制超出错误......也许为什么它被弃用了？）

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T05:04:07.520

1.  您看过[Google 自定义搜索 API](https://developers.google.com/custom-search/v1/overview)吗？

# backbone.js - CoffeeScript 错误中的简单 Backbone.JS

> ID：10876144
> 
> 赞同：0
> 
> 时间：2012-06-04T03:55:57.197
> 
> 标签：backbone.js, coffeescript

我开发了一个非常简单的 Backbone.JS 应用程序，用于学习 CoffeeScript + Backbone.JS：

```
class Todo extends Backbone.Model 
    defaults:
        title: ''
        priority: 0
        done: false

class Todo extends Backbone.Collection
    model: Todo
    localStorage: new Backbone.LocalStorage("Todos")

t = new Todo({ title: 'todo 1' })
console.log t 
```

但我得到了（看起来很像一个无限循环）

```
<error>
b.extend
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel
f.extend.add
f.extend.reset
g.Collection
Todo
f.extend._prepareModel 
```

使用普通的 JS，我定义类和继承，例如

```
Todo = Backbone.Model.extend({}) 
```

但在 CoffeeScript 中

```
class Todo extends Backbone.Model 
```

他们是一样的吗？我不这么认为，这是问题的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T04:00:05.397

您的收藏中有错字，您想调用它`Todos`，而不是`Todo`：

```
class Todos extends Backbone.Collection
    model: Todo
    localStorage: new Backbone.LocalStorage("Todos") 
```

如果我这样做：

```
class Todo extends Backbone.Model 
class Todo extends Backbone.Collection
    model: Todo

t = new Todo(title: 'todo 1')
console.log t​​​ 
```

我收到“超出最大调用堆栈大小”。错误：http: [//jsfiddle.net/ambiguous/FTCr2/](http://jsfiddle.net/ambiguous/FTCr2/)

但是如果集合被调用`Todos`，事情就会起作用：http: [//jsfiddle.net/ambiguous/RrA2D/](http://jsfiddle.net/ambiguous/RrA2D/)

您的问题似乎是您的集合的`model`属性是集合本身，因此当集合试图创建一个实际上是集合的模型时，您最终会出现无限递归......

# php - 我如何在核心 php 中创建 pyrocms 登录模块？

> ID：10876145
> 
> 赞同：0
> 
> 时间：2012-06-04T03:56:03.857
> 
> 标签：php, codeigniter, pyrocms

我已经在 pyrocms 中开发了一个 Web 应用程序，并且运行良好。现在我想在核心 php 中创建这个网站的移动版本，因为我的客户要求我这样做。我已经完成了几乎但是在核心 php 中创建登录模块时遇到了问题，因为我希望能够使用 pyrocms 由主站点创建的用户。所以请让我知道如何在核心 php 中创建与 pyrocms 一样工作的登录功能登录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T05:05:50.390

`login`模块驻留在模块中`cms/users`。

它基于[ION auth](http://benedmunds.com/ion_auth/)库，您可以从中获取相关功能。您需要确保通过`cms/users/config`.

Codeigniter 是一个非常轻量和快速的框架。用核心 PHP 编写代码并不能确保网站更快；它只会使维护和升级变得更加困难和更长的过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T06:59:20.230

需要是所有发明之母...... :)

最后我做到了..有几个步骤..

```
1\. Get the email and password from login form.
2\. Select user detail from default_users detail using emailid.
3\. Calcuate the encrypted password using  password  and salt in this `sha1($password . $salt)`
4\. Check the encrypted password value with db password value.. 
```

这是工作代码。

```
$result = fetchuserdetail($email);
            while($row = mysql_fetch_object($result))
                    {
                         $dbpassword =  $row->password;
                         $salt =  $row->salt;
                         $userid =  $row->id;
                    }
            $encrypassword = sha1($password . $salt);
            if($encrypassword == $dbpassword)
            {
                $_SESSION['user_logged_in'] = TRUE;     
                $_SESSION['user_logged_id'] = $userid;                  
                header("Location:$refer");
            }
            else
            {
                $_SESSION['email'] = $email;
                $_SESSION['password'] = $password;
                $_SESSION['loginerro'] = "Please fill the login detail";
                header('Location:login.php');
            } 
```

希望这会对某人有所帮助....感谢您在这个问题上的时间。

# javascript - 在Javascript中通过ID获取元素的效率？

> ID：10876147
> 
> 赞同：2
> 
> 时间：2012-06-04T03:56:41.097
> 
> 标签：javascript, jquery, html, performance, canvas

我注意到我在代码的许多不同位置重复了这行代码：

```
var canvas = document.getElementById("canvas");
var context = canvas.getContext("2d"); 
```

首先，我想知道这对性能的影响。例如，在我经常调用的重绘代码中*，*我就是这样做的。同样，我可以使用 JQuery 来获取对元素的引用。

我想知道这有多大的交易。我不确定如何正确描述网站。我想以某种方式创建对上下文的全局引用，但是当我尝试在全局范围内执行它时它不会运行。拥有一个懒惰地返回对画布的引用的函数的唯一方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T04:20:07.227

立即停止在您的绘图代码中执行此操作。停止在你的绘图代码中做类似的事情。

将上下文保存在某处并将上下文传递给您的绘图代码（就像[我刚刚制作的这个 5 美分示例一样](http://jsfiddle.net/YhxsY/)）。

“触摸” DOM 很慢。慢。随便你切片。尽量少做。Zakas在[高性能 JavaScript](https://rads.stackoverflow.com/amzn/click/com/059680279X)中深入讨论了这个主题。

如果您关心 JavaScript 性能，您绝对应该看看这个标题。

# wpf - 在 WPF 中递归捕获所有 Click 或 Touch 事件

> ID：10876150
> 
> 赞同：3
> 
> 时间：2012-06-04T03:57:44.320
> 
> 标签：wpf, wpf-controls, pixelsense

我对 WPF 很陌生，但我希望在任何人触摸窗口或任何子控件时捕获。

如果我捕获窗口的点击事件，则只有窗口内部空间捕获点击。它的子控件没有。

如何在全尺寸窗口的任何地方递归捕获屏幕上的任何点击/触摸事件？

提前谢谢了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T04:06:42.340

WPF 中的路由事件处理实现旨在为嵌套层次结构中的所有控件提供拦截和处理触摸和鼠标事件的机会。但是，控件具有阻止子级接收事件通知的能力。

这里对事件路由有一个很好的解释：http: [//nui.joshland.org/2010/04/why-wont-wpf-controls-work-with-touch.html](http://nui.joshland.org/2010/04/why-wont-wpf-controls-work-with-touch.html)

所有控件都会收到一个 Preview 事件（点击或触摸），这是无法阻止的。在此之后，事件被“提升”为常规鼠标/触摸事件（在单击之前处理触摸）但是，如果层次结构中的任何控件用于“单击”（WPF 中的_MouseDown）事件处理设置事件的**Handled**属性args 为 true，则不会进一步传播该事件。

除非您正在处理触摸事件或操作，或者在代码中显式设置**e.Handled = true**，否则嵌套堆栈中的所有控件都应该接收 _MouseDown 事件。

如以下评论中所述，某些控件将设置“Handled = true”，这将阻止其*容器*接收相应的 _TouchDown 或 _MouseDown 事件。但是，它们都会*首先*收到 PreviewTouch/PreviewMouseDown。

另请注意，处理触摸事件会阻止处理鼠标事件。

# javascript - OnChange 未在 IE 中触发

> ID：10876152
> 
> 赞同：12
> 
> 时间：2012-06-04T03:58:02.040
> 
> 标签：javascript, internet-explorer

我希望为 DIV 中 Form 元素的所有更改触发 Onchange 事件

这是片段

```
<html>
<body>

<div id="container">
    <input type="checkbox"/>
    <input type="checkbox"/>
    <input type="text"/>
    <input type="text"/>
</div>

<script>
di = document.getElementById("container");
di.onchange = function(a){
alert("On Change Called");
}

di.onclick = function(a){
 alert("On Click Called");
}

</script>

</body>
</html> 
```

该事件被触发，当焦点从任何表单元素丢失到表单的新元素时，当某些内容被更新时（例如：输入框被更新）

上面的代码适用于所有浏览器，但不适用于 IE，任何方法都是 IE

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-19T03:36:56.413

Actually, IE, especially IE7/8 doesn't support `onchange` event very well . I do recommend you use `onclick` event.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T04:08:02.247

`onchange`根据 MSDN ，事件[不会在 IE 中冒泡。](http://msdn.microsoft.com/en-us/library/ms536912%28VS.85%29.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-12T10:55:16.153

避免在 IE 的**jquery的****.change()**函数之前使用**.focus()**或**.select()**，然后它工作正常，我在我的网站中使用它。

 ****谢谢

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-07T08:56:05.110

我在 Edge 中遇到了同样的问题，并使用 EventListener 修复了它。

我的代码如下所示：

HTML：

```
<input type="text" id="my_id" name="my_name" placeholder="my_placeholder" onchange="my_function(this.value.trim())" autofocus> 
```

然后我将其更改为：

HTML：

```
<input type="text" id="my_id" name="my_name" placeholder="my_placeholder" autofocus> 
```

JS：

```
document.getElementById("my_id").addEventListener("change", function() {
    my_function(this.value.trim())
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-17T02:57:00.157

大多数情况下，所有 Web 开发人员都必须面临这个问题。是的，旧版本的 IE 有时不会触发`onChange`事件并将其替换为`onClick`作品。

但最新的 IE 11 不会出现这种情况。在我的案例中，我发现`onChange`事件中调用的函数名称在某处发生冲突。我只是将其更改为其他名称，在整个上下文中听起来应该是独一无二的，然后它就起作用了。

> 结论：IE 11 在系统中发现一些与目标函数匹配的相似名称（甚至是我猜的文件名）时会感到困惑`onchange`，而其他浏览器足够智能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-24T15:13:12.350

我创建了这段代码来触发 Internet Explorer 未触发的 onchange 事件。

与 asp.net 文本框一起使用

```
<!-- LOCAL SCRIPT -->
<script type="text/javascript">
$(document).ready(function () {

  // CTRL - fix explorer bug for OnChange not triggered. Converted to OnBlur + test
  if (navigator.appName == 'Microsoft Internet Explorer')
  {
    var tempControl = $("#<%= textboxNAME.ClientID %>");
    var tempATTRIBUTE = "data-lastvalue";
    // GET - save current value inside attribute
    tempControl.attr(tempATTRIBUTE, tempControl.val());
    // BIND - onblur event
    $("#<%= textboxNAME.ClientID %>").blur(function () {
        var tempPrevValue = tempControl.attr(tempATTRIBUTE);
        // CTRL - is there a difference of value (onchange)
        if (tempControl.val() != tempPrevValue) {
            // SET - trigger change js binded to textbox
            $(this).change();
        }
        });
  }

}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-01T11:37:54.953

实际上 Onchange 在 IE 中并不能很好地工作。这是我在使用 Javascript 时所做的。您可以相应地复制它。

1.  在 HTML 中添加 ondrop 事件以调用现在正在调用的函数，而不是 onchange。
2.  在你的js文件中添加以下代码

    ```
    document.getElementById('--your selector--').ondragover = handle;

    function handle(evt)
    {
         evt.stopPropagation();
         evt.preventDefault();
         evt.dataTransfer.dropEffect = 'copy'
    } 
    ```

3.  ondragover 将被上面的代码设置为 false，然后 ondrop 将在所有浏览器上触发并调用所需的函数****

# ruby-on-rails - 如何修复这个没有我可以识别的特定错误的神秘 Heroku 错误？

> ID：10876153
> 
> 赞同：2
> 
> 时间：2012-06-04T03:58:09.490
> 
> 标签：ruby-on-rails, heroku

如果这是另一个帖子的副本，请原谅我，但我似乎无法在此错误日志中识别出我认为可以修复的任何内容。通常，最重要的错误是我的 rails 应用程序中的一些问题，并且我可以解决一些问题。在这种情况下，我没有线索。

```
2012-06-04T03:53:58+00:00 app[web.1]: 
2012-06-04T03:53:58+00:00 app[web.1]: 
2012-06-04T03:53:58+00:00 app[web.1]: Started GET "/tasks.json" for 24.131.239.67 at 2012-06-03 20:53:58 -0700
2012-06-04T03:53:58+00:00 app[web.1]:   Processing by TasksController#index as JSON
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/abstract_controller/base.rb:150:in `process_action'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/action_controller/metal/rendering.rb:11:in `process_action'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.0.10/lib/active_support/callbacks.rb:451:in `_run__3347105819948830800__process_action__6324466216974895__callbacks'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.0.10/lib/active_support/callbacks.rb:410:in `_run_process_action_callbacks'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.0.10/lib/active_support/callbacks.rb:94:in `run_callbacks'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/abstract_controller/callbacks.rb:17:in `process_action'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/action_controller/metal/rescue.rb:17:in `process_action'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.0.10/lib/active_support/notifications.rb:52:in `block in instrument'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.0.10/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.0.10/lib/active_support/notifications.rb:52:in `instrument'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
2012-06-04T03:53:58+00:00 app[web.1]: /app/vendor/plugins/rpm/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:34:in `block in process_action'
2012-06-04T03:53:58+00:00 app[web.1]: /app/vendor/plugins/rpm/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:255:in `block in perform_action_with_newrelic_trace'
2012-06-04T03:53:58+00:00 app[web.1]: /app/vendor/plugins/rpm/lib/new_relic/agent/method_tracer.rb:242:in `trace_execution_scoped'
2012-06-04T03:53:58+00:00 app[web.1]: /app/vendor/plugins/rpm/lib/new_relic/agent/instrumentation/controller_instrumentation.rb:250:in `perform_action_with_newrelic_trace'
2012-06-04T03:53:58+00:00 app[web.1]: /app/vendor/plugins/rpm/lib/new_relic/agent/instrumentation/rails3/action_controller.rb:33:in `process_action'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/abstract_controller/base.rb:119:in `process'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/abstract_controller/rendering.rb:41:in `process'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/action_controller/metal.rb:138:in `dispatch'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/action_controller/metal.rb:178:in `block in action'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/action_dispatch/routing/route_set.rb:62:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/action_dispatch/routing/route_set.rb:62:in `dispatch'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/action_dispatch/routing/route_set.rb:27:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/rack-mount-0.6.14/lib/rack/mount/route_set.rb:148:in `block in call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/rack-mount-0.6.14/lib/rack/mount/code_generation.rb:93:in `block in recognize'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/rack-mount-0.6.14/lib/rack/mount/code_generation.rb:68:in `optimized_each'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/rack-mount-0.6.14/lib/rack/mount/code_generation.rb:92:in `recognize'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/rack-mount-0.6.14/lib/rack/mount/route_set.rb:139:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/action_dispatch/routing/route_set.rb:493:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/vendor/plugins/rpm/lib/new_relic/rack/browser_monitoring.rb:23:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/warden-1.2.0/lib/warden/manager.rb:35:in `block in call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/warden-1.2.0/lib/warden/manager.rb:34:in `catch'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/warden-1.2.0/lib/warden/manager.rb:34:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/action_dispatch/middleware/head.rb:14:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/rack-1.2.5/lib/rack/methodoverride.rb:24:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/action_dispatch/middleware/flash.rb:182:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/action_dispatch/middleware/session/abstract_store.rb:149:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/action_dispatch/middleware/cookies.rb:302:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/activerecord-3.0.10/lib/active_record/query_cache.rb:32:in `block in call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/activerecord-3.0.10/lib/active_record/connection_adapters/abstract/query_cache.rb:28:in `cache'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/activerecord-3.0.10/lib/active_record/query_cache.rb:12:in `cache'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/activerecord-3.0.10/lib/active_record/query_cache.rb:31:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/activerecord-3.0.10/lib/active_record/connection_adapters/abstract/connection_pool.rb:354:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/action_dispatch/middleware/callbacks.rb:46:in `block in call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.0.10/lib/active_support/callbacks.rb:416:in `_run_call_callbacks'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/action_dispatch/middleware/callbacks.rb:44:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/rack-1.2.5/lib/rack/sendfile.rb:106:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/action_dispatch/middleware/remote_ip.rb:48:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/action_dispatch/middleware/show_exceptions.rb:47:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/railties-3.0.10/lib/rails/rack/logger.rb:13:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/rack-1.2.5/lib/rack/runtime.rb:17:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/rack-1.2.5/lib/rack/lock.rb:13:in `block in call'
2012-06-04T03:53:58+00:00 app[web.1]: <internal:prelude>:10:in `synchronize'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/rack-1.2.5/lib/rack/lock.rb:13:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/actionpack-3.0.10/lib/action_dispatch/middleware/static.rb:30:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/airbrake-3.1.0/lib/airbrake/rack.rb:30:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/airbrake-3.1.0/lib/airbrake/user_informer.rb:12:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/railties-3.0.10/lib/rails/application.rb:168:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/railties-3.0.10/lib/rails/application.rb:77:in `method_missing'
2012-06-04T03:53:58+00:00 app[web.1]: /home/heroku_rack/lib/static_assets.rb:9:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /home/heroku_rack/lib/last_access.rb:15:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/rack-1.2.5/lib/rack/urlmap.rb:47:in `block in call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/rack-1.2.5/lib/rack/urlmap.rb:41:in `each'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/rack-1.2.5/lib/rack/urlmap.rb:41:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /home/heroku_rack/lib/date_header.rb:14:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /app/.bundle/gems/ruby/1.9.1/gems/rack-1.2.5/lib/rack/builder.rb:77:in `call'
2012-06-04T03:53:58+00:00 app[web.1]: /usr/ruby1.9.2/lib/ruby/gems/1.9.1/gems/thin-1.2.6/lib/thin/connection.rb:76:in `block in pre_process'
2012-06-04T03:53:58+00:00 app[web.1]: /usr/ruby1.9.2/lib/ruby/gems/1.9.1/gems/thin-1.2.6/lib/thin/connection.rb:74:in `catch'
2012-06-04T03:53:58+00:00 app[web.1]: /usr/ruby1.9.2/lib/ruby/gems/1.9.1/gems/thin-1.2.6/lib/thin/connection.rb:74:in `pre_process'
2012-06-04T03:53:58+00:00 app[web.1]: /usr/ruby1.9.2/lib/ruby/gems/1.9.1/gems/thin-1.2.6/lib/thin/connection.rb:57:in `process'
2012-06-04T03:53:58+00:00 app[web.1]: /usr/ruby1.9.2/lib/ruby/gems/1.9.1/gems/thin-1.2.6/lib/thin/connection.rb:42:in `receive_data'
2012-06-04T03:53:58+00:00 app[web.1]: /usr/ruby1.9.2/lib/ruby/gems/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run_machine'
2012-06-04T03:53:58+00:00 app[web.1]: /usr/ruby1.9.2/lib/ruby/gems/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run'
2012-06-04T03:53:58+00:00 app[web.1]: /usr/ruby1.9.2/lib/ruby/gems/1.9.1/gems/thin-1.2.6/lib/thin/backends/base.rb:57:in `start'
2012-06-04T03:53:58+00:00 app[web.1]: /usr/ruby1.9.2/lib/ruby/gems/1.9.1/gems/thin-1.2.6/lib/thin/server.rb:156:in `start'
2012-06-04T03:53:58+00:00 app[web.1]: /usr/ruby1.9.2/lib/ruby/gems/1.9.1/gems/thin-1.2.6/lib/thin/controllers/controller.rb:80:in `start'
2012-06-04T03:53:58+00:00 app[web.1]: /usr/ruby1.9.2/lib/ruby/gems/1.9.1/gems/thin-1.2.6/lib/thin/runner.rb:177:in `run_command'
2012-06-04T03:53:58+00:00 app[web.1]: /usr/ruby1.9.2/lib/ruby/gems/1.9.1/gems/thin-1.2.6/lib/thin/runner.rb:143:in `run!'
2012-06-04T03:53:58+00:00 app[web.1]: /usr/ruby1.9.2/lib/ruby/gems/1.9.1/gems/thin-1.2.6/bin/thin:6:in `<top (required)>'
2012-06-04T03:53:58+00:00 app[web.1]: /usr/ruby1.9.2/bin/thin:19:in `load'
2012-06-04T03:53:58+00:00 app[web.1]: /usr/ruby1.9.2/bin/thin:19:in `<main>'
2012-06-04T03:53:58+00:00 app[web.1]: Completed 200 OK in 166ms (Views: 16.4ms | ActiveRecord: 71.9ms) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T07:24:15.770

这似乎是一个与新遗物相关的错误。您是否按照 herokus 的[安装说明](https://devcenter.heroku.com/articles/newrelic)进行操作？

# symfony-1.4 - symfony 1.4 功能测试报告

> ID：10876155
> 
> 赞同：0
> 
> 时间：2012-06-04T03:58:30.170
> 
> 标签：symfony-1.4, functional-testing

我为我的 symfony 软件编写了一个功能测试并从命令提示符运行它。现在我想将功能测试的结果作为报告（在文本文件或 word 文件等中）。

你怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T07:28:58.703

使用 ：

```
$ php symfony test:functional --xml=log.xml 
```

您可以检索 xml。

> 如果您想在持续集成过程中集成您的测试套件，请使用`--xml`选项强制`test:functional`任务生成与 JUnit 兼容的 XML 输出。

# windows-phone-7 - 如何避免 Windows Phone 应用程序的主题（精简和黑暗）效果？

> ID：10876159
> 
> 赞同：2
> 
> 时间：2012-06-04T03:59:50.280
> 
> 标签：windows-phone-7, themes

我开发了一个 Windows Phone 7 应用程序。将应用程序安装到我的移动设备（也在模拟器中）后，我遇到了主题问题。

表示windows phone有两个主题，LITE和DARK。

当我将主题设置为 dark 并执行我的 app 时，它看起来不错，但如果我将主题更改为 LITE，一切都会恢复。

这意味着白色标签变成黑色，黑色背景变成白色。

所以我需要一个解决方案来解决我的应用程序，以便用户可以设置任何主题，但它不会影响应用程序的外观。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:31:21.747

1.  不要对颜色、画笔等进行硬编码，而是使用`{StaticResource ResourceName}`和使用来自[Theme Resources for Windows Phone的资源](http://msdn.microsoft.com/en-us/library/ff769552%28v=VS.92%29.aspx)
2.  确保*每个* `TextBlock`和`TextBox`都有一个`Style`与之关联的（来自同一链接的可用值）
3.  如果您有想要了解主题的自定义资源（颜色、图像等），您可以自由使用`ThemeResourceDictionary`我[在我的博客上发布的内容](http://blog.richardszalay.com/2011/06/11/practical-support-for-light-dark-themes-on-windows-phone-7/)（以及[这个 SO 问题](https://stackoverflow.com/questions/7131982/how-to-setup-button-background-image-either-theme-is-dark-or-white)）。我保证在这些日子里将代码提交到[GitHub](https://github.com/richardszalay/wp-themeresourcedictionary)并创建一个 NuGet 包。

# mysql - mysql 转储查询挂起

> ID：10876161
> 
> 赞同：0
> 
> 时间：2012-06-04T04:00:01.743
> 
> 标签：mysql

我已经运行 mysql -u root -p gf < ~/gf_backup.sql 来恢复我的数据库。但是，当我看到进程列表时，我看到一个查询已经闲置了很长时间。我不知道为什么。

```
mysql> show processlist;
    +-----+------+-----------+-------------+---------+-------+-----------+------------------------------------------------------------------------------------------------------+
    | Id  | User | Host      | db          | Command | Time  | State     | Info                                                                                                 |
    +-----+------+-----------+-------------+---------+-------+-----------+------------------------------------------------------------------------------------------------------+
    | 662 | root | localhost | gf | Query   | 18925 | query end | INSERT INTO `gf_1` VALUES (1767654,'90026','Lddd',3343,34349),(1 |
    | 672 | root | localhost | gf | Query   |     0 | NULL      | show processlist                                                                                     |
    +-----+------+-----------+-------------+---------+-------+-----------+------------------------------------------------------------------------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T05:23:59.773

请使用 df -h 命令（如果在 Linux/Unix 下）检查可用空间，如果空间不足，请不要杀死或重新启动 MySQL，直到它在释放一些空间时赶上更改。

您可能还想检查 my.cnf 中的 max_allowed_pa​​cket 设置并将其设置为 256M，请参阅[http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_max_allowed_pa​​cket](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_max_allowed_packet)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T04:14:44.230

可能您的转储非常大并且包含许多规范化数据（记录分成一堆表，带有一堆外键约束、索引等）。

如果是这样，您可以尝试从 SQL 文件中删除所有约束和索引定义，然后导入数据并重新创建以前删除的指令。这是一个众所周知的加快导入速度的技巧，因为`INSERT`没有验证任何约束的命令要快得多，并且之后创建索引等可以在单个事务中完成。

另见：http: [//support.tigertech.net/mysql-large-inserts](http://support.tigertech.net/mysql-large-inserts)

当然，您应该先终止查询。并删除它已经创建的所有片段。

# sql - sql server中地理多边形区域的中心纬度和经度

> ID：10876162
> 
> 赞同：4
> 
> 时间：2012-06-04T04:00:04.323
> 
> 标签：sql, sql-server, geospatial

我有一个如下创建的地理多边形

```
DECLARE @polyString as varchar(max);
SET @polyString = 'POLYGON((' + @eastAsString + ' ' + @northAsString +',' + @westAsString + ' ' + @northAsString + ',' + @westAsString + ' '+@southAsString +','+ @eastAsString + ' ' + @southAsString +',' +@eastAsString +' ' +@northAsString +'))';

DECLARE @g geography;
SET @g = geography::STPolyFromText(@polyString, 4326) 
```

我想找到多边形的中心纬度/经度？这可能在sql server内部吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T04:43:38.030

您可以使用类型的`EnvelopeCenter()`方法`geography`。

```
DECLARE @polyString as varchar(max);
SET @polyString = 'POLYGON((' + @eastAsString + ' ' + @northAsString +',' + @westAsString + ' ' + @northAsString + ',' + @westAsString + ' '+@southAsString +','+ @eastAsString + ' ' + @southAsString +',' +@eastAsString +' ' +@northAsString +'))';

DECLARE @g geography;
SET @g = geography::STPolyFromText(@polyString, 4326)
SELECT @g.EnvelopeCenter().ToString() 
```

定义多边形中心的确切含义会很有帮助，因为有不同的定义方法。

# visual-studio - Visual Studio 2008 忽略了我网站的断点

> ID：10876165
> 
> 赞同：0
> 
> 时间：2012-06-04T04:00:41.900
> 
> 标签：visual-studio

Visual Studio 2008 突然忽略了我的断点。我正在运行安装了 SP1 的 Visual Studio 2008。如果我运行不同的网站（所有本地网站），则不会忽略断点。

在我的 web.config 中，我有：

```
<compilation debug="true" strict="false" explicit="true"> 
```

对于我的生活，我不明白为什么它会突然不起作用，我真的需要那些断点。

此外，如果我将调试更改为 true 或 false，则没有区别。断点总是被忽略。

我有一个没有任何内容的页面，在 onLoad 后面的代码中我设置了一个 BP，当我点击 F5 Firefox 加载并且页面运行时就好像没有 BP 一样。

然后我添加了一个按钮，并在 onClick 中插入了一个 BP。同样，没有停止。页面加载并运行，就好像它们不存在一样。

设置后

```
<compilation debug="false" 
```

然后按 F5（开始调试）VS 应该要求更改 web.config 以允许调试。但是，它没有。

我还创建了一个新网站，将我所有的网站文件复制到新文件夹中，我得到了相同的结果。

我真的需要你的帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:13:08.040

您是否尝试过明确附加到您的网络服务器进程？

[http://abhijitjana.net/2010/07/15/identifying-worker-process-w3wp-exe-iis-6-0-and-iis-7-0-for-debugging-asp-net-application/](http://abhijitjana.net/2010/07/15/identifying-worker-process-w3wp-exe-iis-6-0-and-iis-7-0-for-debugging-asp-net-application/)

另外，请尝试清除您的临时 asp.net 文件。

[http://blogs.msdn.com/b/dougste/archive/2008/08/11/clearing-out-temporary-asp-net-files.aspx](http://blogs.msdn.com/b/dougste/archive/2008/08/11/clearing-out-temporary-asp-net-files.aspx)

通常对我有用。

# ruby-on-rails - 为什么我的 Rails 应用程序中出现“无效的多字节字符”？

> ID：10876172
> 
> 赞同：1
> 
> 时间：2012-06-04T04:02:25.243
> 
> 标签：ruby-on-rails, ruby

我正在尝试使用 SMTP 设置邮件程序并收到以下错误（来自控制台）：

```
SyntaxError (/Users/nelsonkeating/Desktop/prelaunch/app/mailers/user_mailer.rb:6: invalid multibyte char (US-ASCII)
/Users/nelsonkeating/Desktop/prelaunch/app/mailers/user_mailer.rb:6: syntax error, unexpected $end, expecting ']'
    headers[‘X-MC-Track’] = "opens, clicks"
             ^):
  app/models/user.rb:37:in `send_welcome_email' 
```

user_mailer.rb：

```
class UserMailer < ActionMailer::Base
  default :from => "remindeal@gmail.com"

  def welcome_email(user)
    mail(:to => user.email, :subject => "Invitation Request Received")
    headers[‘X-MC-Track’] = "opens, clicks"
    headers[‘X-MC-GoogleAnalytics’] = "example.com"
    headers[‘X-MC-Tags’] = "welcome"
  end
end 
```

用户.rb：

```
35 def send_welcome_email
36    unless self.email.include?('@example.com')
37      UserMailer.welcome_email(self).deliver
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T04:03:56.873

Ruby 只接受单引号、双引号和反引号来引用字符串。他们每个人都有不同的含义。

由于您`headers`使用多字节前向引号和反引号引用哈希键，因此 ruby​​ 会发出错误。我猜你在某个网站上复制粘贴了一些美化的源代码。

您可以使用单引号替换上面的源代码：

```
headers['X-MC-Track'] = "opens, clicks"
headers['X-MC-GoogleAnalytics'] = "example.com"
headers['X-MC-Tags'] = "welcome" 
```

请注意，通常`:like_this`建议使用符号 ( ) 作为哈希键，但对于上述情况，您需要使用单引号或双引号，因为它包含`-`作为键的一部分。

# c - 函数参数的副作用

> ID：10876174
> 
> 赞同：0
> 
> 时间：2012-06-04T04:02:44.260
> 
> 标签：c

这是一个在函数参数中使用副作用的递归代码。在 K&R 中，我发现一个声明说 C 标准指定参数的所有副作用在调用函数之前生效（第 54 页 K&R 第二版）。但输出到上面代码是矛盾的。谁能帮帮我。

```
void reverse(int* array,int i,int j)
{
  `int temp;
  if(i>j)

    return ;
  else{
    temp=array[i];
    array[i]=array[j];
    array[j]=temp;
    //i++;
    //j--;
    reverse(array,i++,j--);
  }
} ' 
```

PS：输出是分段错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T04:53:22.727

确实，变量在函数调用之前会递增，但是这些变量对于声明它们的函数是局部的（在这种情况下，是一个递归函数调用框架），并且当您使用后缀运算符时，返回的值由运算符不是更新值，而是初始值。因此，您最终作为参数传递的值没有正确更新，您的函数将永远不会终止。为了增加变量并同时返回和传入更新的值，您必须使用前缀运算符，即`++i`和`++j`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T04:07:50.193

所有的副作用都完成了，所以在函数调用之前改变了 i 和 j 的值。

但是 express`i++`和`j--`的值仍然是之前 i 和 j 的值。

# c++ - 在子类中调用父函数

> ID：10876175
> 
> 赞同：0
> 
> 时间：2012-06-04T04:02:44.837
> 
> 标签：c++, inheritance, csv, ifstream

```
class Parent;
class Child;

Parent *parent;

ifstream inf("file.csv");
inf >> *parent;

//in parent class
friend istream& operator>> (istream &is, Parent &parent) {
  return parent.read(is);
}

virtual istream& read(istream &is){
  char temp[80];
  is >> temp;
  // then break temp into strings and assign them to values
  return is;
}

//virtual istream& read 
```

它只读取前两个值并将其分配给 Parent 类。`Child`类有`Parent`自己的类值 + 3。

如何调用我调用父`read()`函数然后调用子函数，`read()`以便父函数读取文件中的前 2 个字段，子函数读取接下来的 3 个字段？

我知道这是语法问题。我只是不知道该怎么做。我试过`Parent::read(is)`在孩子的阅读课内打电话，我试过在孩子的`read()`;之前打电话 我试过`read(is) >> temp`了，但没有一个奏效。当我调用`Parent::read(is)`then`is >> temp`时， parent`is`将返回文件的所有 5 个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:22:08.340

在这种情况下，您通常会让 Child 覆盖`read`Parent 中的函数。这允许派生类在应用它自己的逻辑之前调用父类中的原始函数。

```
class Parent
{
public:
    virtual void read(istream &s)
    {
        s >> value1;
        s >> value2;
    }
};

class Child : public Parent
{
public:
    virtual void read(istream &s)
    {
        Parent::read(s);  // Read the values for the parent

        // Read in the 3 values for Child
        s >> value3;
        s >> value4;
        s >> value5;
    }
}; 
```

执行读取操作”

```
// Instantiate an instance of the derived class
Parent *parent(new Child);

// Call the read function. This will call Child::read() which in turn will
// call Parent::read() 
parent->read(instream); 
```

# jquery - 在 die() 之后让 jQuery live('click') 恢复生机

> ID：10876185
> 
> 赞同：3
> 
> 时间：2012-06-04T04:04:01.527
> 
> 标签：jquery

我有一个分配给日历上的点击事件的功能 - 我需要点击事件，`live()`因为当您在日历中切换月份时，标准`.click()`不会将自身绑定到新显示的日期 - 这会根据所选日历日期触发一些 AJAX。

在上一个请求完成之前，我需要防止用户触发更多 AJAX，因此通过立即取消绑定单击侦听器来实现这一点`.die('click')`。但是，我无法使 eventWrap 单击侦听器`$('.eventWrap').live('click')`从其自身内部再次恢复生机。

我的问题有解决方案吗？

```
$('.eventWrap').live('click', function() {
     $('.eventWrap').die('click');

     do ajax stuff

     //bring the .eventWrap click listener back to life
     //$(.eventWrap).live('click'); does not work as I had hoped

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T04:16:04.233

您可以简单地在单击中添加一个类，并且仅在该类不存在时才执行 ajax

```
$('.eventWrap').live('click', function() {
    if( ! $('.waitingForAjax').length ){
        $('.eventWrap').addClass('waitingForAjax');

         do ajax stuff- use removeClass() within the ajax success handler
    } else{
        alert('Waiting for last ajax to complete');
    }   
}); 
```

使用`on()`而不是`live()`使用 jQuery 1.7

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T04:09:37.020

### 根据你的代码

由于 live 已被弃用，因此请使用[`.on()`](http://api.jquery.com/on)和[`.off()`](http://api.jquery.com/off)

```
$('.eventWrap').on('click', function() {
     $('.eventWrap').off('click');

}); 
```

要重新绑定该关闭事件，请使用

```
$('.eventWrap').on('click'); 
```

### 如果在页面加载后附加到 DOM

如果您`.eventWrap`在页面加载后附加到 dom，那么您应该参加委托事件

```
 $('#container').on('click', '.eventWrap',function() {
     $('#container').off('click', '.eventWrap');
}); 
```

取消绑定该事件

```
 $('#container').off('click', '.eventWrap'); 
```

这里`#container`指向`.eventWrap`页面加载时属于 DOM 的容器，您可能有一些其他选择器来指向`.eventWrap`.

### 但更好的是使用重构

```
 function offmyevent() {
       $('#container').off('click', '.evetWraooer');
    }

    function offmyevent() {
       $('#container').on('click', '.evetWraooer');
    }

   $('#container').on('click', '.eventWrap',function() {
         offmyevent();
         callMyAjax();
   }); 
```

所以对于ajax调用问题

```
function callMyAjax() {
  $.ajax({
      url: '',
      data: '',
      method: '...',
      success: function() {
         onmyevent(); // 
     }
  }) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T04:18:46.133

要打开`on()`和`off()`事件处理程序，您还需要传递函数。

```
$("#container").on("click", ".eventWrap", eventWrapClicked);

function eventWrapClicked(){
    $("#container").off("click", ".eventWrap", eventWrapClicked);

   //Do your AJAX -- on success, reapply the clickhandler.
   // $("#container").on("click", ".eventWrap", eventWrapClicked);
} 
```

# scala - scala：定义一个特征并引用相应的伴随对象

> ID：10876190
> 
> 赞同：3
> 
> 时间：2012-06-04T04:04:11.577
> 
> 标签：scala, inheritance, traits

我正在尝试定义一个使用相应伴随对象的特征，即使用该特征的类的组合对象。

例如，我有：

```
:paste

class Parent {
  def callMyCompanion = print(Parent.salute)
}

object Parent {
  def salute = "Hello from Parent companion object"
}

class Child extends Parent {

}

object Child {
  def salute = "Hello from Child companion object"
} 
```

然后我创建一个父对象：

```
scala> val p = new Parent()
p: Parent = Parent@1ecf669

scala> p.callMyCompanion
Hello from Parent companion object 
```

但是带着孩子：

```
scala> val c = new Child()
c: Child = Child@4fd986

scala> c.callMyCompanion
Hello from Parent companion object 
```

我想得到：来自 Child 伴侣对象的 Hello

我怎样才能实现它？？？

-- 编辑澄清

感谢您的回复，但在这种情况下， callMyCompanion 是我创建的一个虚拟方法，只是为了解释自己，我试图重用父方法，而不必在每个实现它的类中重写它......

到目前为止我找到的解决方案是实现一个使用伴随对象的实例方法......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T05:41:18.830

到目前为止我找到的解决方案是在类中添加对伴随对象的引用，以便每个实例变量都可以访问其类的伴随对象

这样，我只需要重写该方法即可获取对伴随对象的引用...

为此，我必须实现 ParentCompanion 特征......

但我不需要重写 callMyCompanion 或任何其他需要访问伴随对象的方法。

如果我可以通过反射获得伴随对象的引用，这一切都会简单得多......

代码是这样的

```
:paste

trait ParentCompanion {
  def salute: String
}

class Parent {
  def callMyCompanion = print(companion.salute)
  def companion: ParentCompanion = Parent
}

object Parent extends ParentCompanion {
  def salute = "Hello from Parent companion object"
}

class Child extends Parent {
  override def companion = Child
}

object Child extends Companion {
  def salute = "Hello from Child companion object"
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T12:02:18.503

正如我已经在评论中写的那样，也许类型类可以在这里为您提供帮助：

```
trait Greeter[T] {
  def salute: Unit
}
object Greeter {
  implicit def anyToGreeter[A](x: A) = new {
    def salute(implicit greeter: Greeter[A]) = greeter.salute
  }
}

class Foo
class Bar extends Foo

implicit object FooGreeter extends Greeter[Foo] {
  def salute = println("Hello from FooGreeter.")
}
implicit object BarGreeter extends Greeter[Bar] {
  def salute = println("Hello from BarGreeter.")
} 
```

有了这个，我得到以下输出：

```
scala> import Greeter._
import Greeter._

scala> new Foo().salute
Hello from FooGreeter.

scala> new Bar().salute
Hello from BarGreeter. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T04:13:14.053

这个请求无异于静态覆盖。这样的事情在scala，AFAIK中不存在，但是您可以在其中包含一个实例方法覆盖，`Child`该方法将调用其消息的伴随对象。有些东西告诉我你不想那样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T06:59:14.423

实际访问伴随对象而不知道它是哪一个的主要问题是你基本上只有一个`AnyRef`，这根本不是很有帮助。

另一种方法是使用结构类型。我假设你所有不同的伴侣对象都会有一些共同点（比如`salute`你在你的`ParentCompanion`特质中捕获的）。然后您可以执行以下操作：

```
class Parent {
  val companion : {
    def salute : String 
  } = Parent
  def foo = println(companion.salute)
}
object Parent {
  val salute = "Parent Companion"
}
class Child extends Parent {
  override val companion = Child
}
object Child {
  val salute = "Child Companion"
} 
```

鉴于此，每个子类都可以覆盖该`companion`属性以指向其对应的伴生对象，只要它满足给出的结构类型`Parent`（即在这种情况下它必须具有 a `salute`）。然后你可以在你的同伴上调用这个方法，像这样：

```
scala> (new Parent).foo
Parent Companion

scala> (new Child).foo
Child Companion 
```

# sql - 无法在嵌套查询中引用表别名

> ID：10876191
> 
> 赞同：0
> 
> 时间：2012-06-04T04:04:15.507
> 
> 标签：sql, oracle

标题可能看起来有点混乱，但是查询可能有助于理解我的困境。我有这样的查询

```
 SELECT TAB1.USER_ID,
        (SELECT DISTINCT MAX(SYS_CONNECT_BY_PATH(B.COL1, '/'))
           FROM (SELECT A.COL1,
                        ROW_NUMBER() OVER(ORDER BY A.COL1) AS curr,
                        ROW_NUMBER() OVER(ORDER BY A.COL1) - 1 AS prev
                   FROM (SELECT DISTINCT TAB2.COL1
                           FROM TABLE2 TAB2
                          WHERE TAB2.USER_ID = TAB1.USER_ID) A) B
         CONNECT BY PRIOR curr = prev
          START WITH curr = 1)
   FROM TABL1 TAB1
  WHERE TAB1.REC_STATUS = 'L' 
```

我有 2 个表 TABLE1 和 TABLE2。它们都有一个共同的属性，USER_ID。我根据 USER_ID 选择值并将结果行视为表本身（称为 A）。但是，查询未能引用在 A 外部创建的 TABLE1。此查询实际上连接了所有返回的与 USER_ID 条件匹配的所有 COL1 值。当我使用 Oracle 9i 时，唯一可用的字符串连接是 WM_CONCAT。我被告知不要使用它，因为此功能没有记录。

请帮助我如何能够在 A 块内引用 TAB1 的列（在本例中为 USER_ID）。

任何帮助表示赞赏。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T04:22:45.920

你做错了。

子查询不能引用外部查询。只有嵌套查询（例如用 Exists 创建）可以在内部查询中使用外部查询的属性。

在内部查询中使用外部参数的示例。

```
SELECT * FROM R S WHERE EXISTS (SELECT * FROM R WHERE R.a = S.a) 
```

# php - 如何配置netbeans php项目以免将所有文件复制到var/www

> ID：10876192
> 
> 赞同：5
> 
> 时间：2012-06-04T04:04:16.030
> 
> 标签：php, netbeans

我开始使用 netbeans IDE 编写 php。是否可以让 netbeans 将项目文件复制到 var/www 目录？如何配置 netbeans 以便并非所有文件都复制到 var/www ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:04:46.103

您可以通过右键单击您的项目来复制源文件 -> 转到属性 -> 转到源选项卡 -> 勾选从源文件夹复制文件到另一个文件夹 -> 提供 var/www 的路径。

我不知道有任何其他直接方法可以做到这一点，但您可以将项目添加到任何版本控制（SVN），然后您可以从 Netbeans 中选择要提交的文件（甚至是 nbproject 文件夹）。

# jira - 如何在 Jira 中创建动态字段？

> ID：10876193
> 
> 赞同：3
> 
> 时间：2012-06-04T04:04:26.817
> 
> 标签：jira, jira-plugin

我想在 Jira 中创建一些动态字段，类似于我们在 JavaScript 中所做的。

例如，有一个下拉列表，其值为 a、b 和 c。如果我选择a，则会弹出一些仅针对a的字段；如果我选择 b，则会弹出一些仅适用于 b 的字段。

这可以在 Jira 中完成，还是有任何插件可以解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T07:02:09.520

您可以使用[JIRA 行为插件](https://studio.plugins.atlassian.com/wiki/display/JBHV/JIRA+Behaviours+Plugin)根据任何选定的字段更改任何字段，例如：

```
FormField dropdown = getFieldByName("My Dropdown")
FormField other= getFieldByName("Other field")

if (dropdown.getFormValue() == 'A') {
 other.setHidden(false) // set custom filed vlaues
 other.setFormValue("A choosen")
} else {
 other.setHidden(true) // hide any fields you like
} 
```

# c - 在 Linux 中调用“at command”的 C 编程

> ID：10876196
> 
> 赞同：0
> 
> 时间：2012-06-04T04:04:54.163
> 
> 标签：c, linux

我如何使用 at job 延迟或调用 echo 命令？我想在指定的时间打印一些东西……谢谢！

像回声“你好世界” | 在 12:00 并将此命令传递给 system()。我已经尝试使用“在工作”更新数据库，它做得很好，但我也想在更新后打印一些东西......提前谢谢！=)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T04:31:50.713

仅仅运行`echo`并没有多大意义，因为输出无处可去（除非您重定向到文件）。本示例将在 12:34 向所有终端发送广播消息

```
#include <stdio.h>

int main()
{
    FILE *f = popen("at 1234", "w");
    fprintf(f, "echo 'Hello World' | wall");
    fclose(f);
    printf("Job scheduled\n");
    return 0;
} 
```

# asp.net - ASP.NET 单点登录问题

> ID：10876201
> 
> 赞同：0
> 
> 时间：2012-06-04T04:06:11.857
> 
> 标签：asp.net, authentication

我有 2 个网站（.net2 web-forms，另一个是 .net4 mvc3），它们配置为 ASP.NET 单点登录功能。web.config 的 machineKey 元素在两个网站中具有相同的属性：

*   validationKey="某个键"
*   decryptionKey="一些密钥"
*   验证="SHA1"
*   解密="AES"

两个网站共享同一个域。web.config authentication -> forms 具有相同的“name”属性，即身份验证 cookie 的名称。单点登录对我不起作用，网站只是用不同的值覆盖彼此的 cookie。

这是在实时服务器上。在暂存完全相同的代码时工作正常，我在那里进行单点登录。

我已经在这个问题上花了一天的时间，我想我检查了所有可能的东西，我几乎可以肯定这不是代码，而是服务器的一些东西。请帮助您的想法和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:39:43.083

在将 .NET2 ASP.NET WebForms 网站转换为 .NET4 后，我终于让它工作了。除了 web.config 中的默认 Visual Studio 2010 转换向导更改之外，没有进行任何更改。这意味着尽管所有 machineKey 属性都与身份验证 cookie 解密实现相匹配，但在 .NET2 和 .NET4 中有所不同。

我希望这对其他人有帮助。

# plone - 向克隆组成员发送电子邮件

> ID：10876205
> 
> 赞同：1
> 
> 时间：2012-06-04T04:06:21.397
> 
> 标签：plone

可以将克隆用户帐户分配给组。举`Site Administrators`个例子，我如何向这个组的成员发送电子邮件？我在选项卡中看到一个`Email`字段`Group Properties`，我可以利用此电子邮件字段发送群组电子邮件吗？

![克隆组属性截图](../Images/6b03e52554122de9ebddbf1340da13e3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T07:23:53.550

是与否；您在 Plone UI 中看到的电子邮件地址只是一个元数据，它不会自动神奇地向该组的所有成员发送电子邮件。您必须通过单独的方式将分配给该组的每个用户添加到电子邮件列表（无论是使用列表管理器还是手动管理的别名）才能正常工作。

但是，您可以遍历所有组成员，为每个成员获取一个电子邮件地址（前提是他们已经注册了一个），然后通过电子邮件将他们全部发送：

```
group = portal.acl_users.getGroupById('Administrators')
emails = [m.getProperty('email') for m in group.getGroupMembers()]
emails = filter(None, emails) 
```

# iphone - 添加新对象进行存储时核心数据关系丢失

> ID：10876212
> 
> 赞同：0
> 
> 时间：2012-06-04T04:07:54.017
> 
> 标签：iphone, ios, sqlite, core-data

我有一个名为 guestlist 的实体，它与名为 guest 的实体具有一对多的关系。Guestlist 也与 Invite 实体有关系。

当我使用包含来宾对象的来宾列表创建邀请对象时。它可以很好地保存并在应用程序中正常显示。接下来，我创建另一个具有不同标题的邀请，一个新的来宾列表对象，具有相同的来宾。这也可以很好地保存并在应用程序中正常显示。

问题是当我退出应用程序并重新进入时，只有最近的邀请保留客人列表与客人的关系。来宾列表上的时间戳值存在，但与来宾对象的关系为空。

这是我用来设置对象并将它们保存到商店中的代码。

```
Invite *invite = (Invite *)[NSEntityDescription insertNewObjectForEntityForName:@"Invite" 
                                                        inManagedObjectContext:anotherContext];

[invite setTitle:[inviteDetailsModel descriptionOfInvite]];

GuestList *guestlist = [NSEntityDescription insertNewObjectForEntityForName:@"GuestList" 
                                                           inManagedObjectContext:anotherContext];
[guestlist setGuestlist_to_invite:invite];
[guestlist setDateInvited:[NSDate date]];

for (Invitee *invitee in [inviteDetailsModel peopleInvited]) {

        Guest *guest = [NSEntityDescription insertNewObjectForEntityForName:@"Guest" 
                                                                  inManagedObjectContext:anotherContext];
        [guest setFirstName:invitee.firstName];
        [guest setLastName:invitee.lastName];
        [guest setABookID:invitee.guestID];

        [guestlist addGuestObject:guest];
    }
}

[invite setGuestlist:guestlist];

NSError *error = nil;
if(![anotherContext save:&error]) {
    NSLog(@"Couldnt save our invite data %@",error);
    return nil;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T04:13:44.277

如果来宾列表与来宾具有一对多关系，则来宾只能连接到一个来宾列表。实际上，这意味着只有您分配给它的最后一个客人列表（无论是隐式还是显式）都会保留。

您想将这种关系更改为多对多。

# java - 连接MIDI音序器

> ID：10876215
> 
> 赞同：0
> 
> 时间：2012-06-04T04:08:15.380
> 
> 标签：java, midi

我需要“连接”两个音序器：播放器和录音机。播放器可能会收到来自不同来源的 MIDI 事件，而记录器将负责将整个事件记录到文件中。

以下代码只是用于理解机制的示例，但它不能正常工作。它将创建一个在大小和属性上与原始文件非常相似但无法正确播放的文件。输出文件只有 3 秒的长度，并且只产生垃圾声音！

```
import javax.sound.midi.*;
import java.io.File;

public class test {
    public static void main(String[] args) throws Exception {
        Sequence play, record; 
        Sequencer player, recorder;
        Transmitter t;
        Receiver r;
        try {   
            play = MidiSystem.getSequence(new File("input.mid"));
            record = new Sequence(play.getDivisionType(), play.getResolution(), play.getTracks().length);

            player = MidiSystem.getSequencer();
            player.open();
            player.setSequence(play);

            recorder = MidiSystem.getSequencer();
            recorder.open();
            recorder.setSequence(record);

            for (Track track : record.getTracks())
                recorder.recordEnable(track, -1);

            // Do some wiring
            r = recorder.getReceiver();
            t = player.getTransmitter();
            t.setReceiver(r);

            // let the show begin !
            recorder.startRecording();
            player.start();
            Thread.sleep(play.getMicrosecondLength() / 1000);
            while (player.isRunning())
                ;               
            recorder.stopRecording();

            MidiSystem.write(record, MidiSystem.getMidiFileTypes(record)[0], new File("output.mid")); 
        } catch(Exception e) {
            e.printStackTrace();
            System.exit(1);
        }       
        System.exit(0);
    }   
} 
```

任何人都可以查明问题吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:45:51.887

这里只是一个疯狂的猜测，但我敢打赌，如果你将播放器和记录器放在两个单独的线程中，这会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T16:25:47.373

上面代码创建的 MIDI 文件包含所有相关事件，但它们都堆积在第 0 点。

也许这是因为“录音机”中的所有曲目都是空的。

无论如何，将来在适当的滴答声中将（元）事件添加到“记录”中的轨道之一对我有用。

干杯，恩佐

# objective-c - 将 JSON 解析为对象

> ID：10876218
> 
> 赞同：0
> 
> 时间：2012-06-04T04:08:56.673
> 
> 标签：objective-c, ios, json

我有以下 JSON 文件要解析：

```
[
{
    "name": "kkkk",
    "empid": "55628",
    "address": "mumbai",
    "mobile": "9528558"
},
{
    "name": "xtreme",
    "empid": "20",
    "address": "stripes",
    "mobile": "9689597"
},
{
    "name": "xtreme",
    "empid": "20",
    "address": "stripes",
    "mobile": "9689999597"
},
{
    "name": "xtreme",
    "empid": "20",
    "address": "stripes",
    "mobile": "9689999597"
},
{
    "name": "xtreme",
    "empid": "20",
    "address": "stripes",
    "mobile": "9689597"
},
{
    "name": "xtreme",
    "empid": "20",
    "address": "stripes",
    "mobile": "9689999597"
},
{
    "name": "xtreme",
    "empid": "20",
    "address": "stripes",
    "mobile": "9689999597"
},
{
    "name": "xtreme",
    "empid": "20",
    "address": "stripes",
    "mobile": "9689999597"
},
{
    "name": "xtreme",
    "empid": "20",
    "address": "stripes",
    "mobile": "96897"
},
{
    "name": "vx",
    "empid": "96",
    "address": "addre",
    "mobile": "9689999596"
},
{
    "name": "vxx",
    "empid": "96",
    "address": "addre",
    "mobile": "968999"
},
{
    "name": "vx",
    "empid": "96",
    "address": "addre",
    "mobile": "9699596"
},
{
    "name": "vxertdrt",
    "empid": "96",
    "address": "addre",
    "mobile": "968996"
},
{
    "name": "vx",
    "empid": "96",
    "address": "addre",
    "mobile": "999596"
} 
```

]

我有以下解析代码：

```
 SBJSON *parser=[[SBJSON alloc]init];
array=[parser objectWithString:firstParseData];
NSString *secondParseData=[array objectAtIndex:0];
NSLog(@"name=%@",secondParseData); 
```

通过这段代码，我得到以下字符串格式的输出：

```
 name={
address = mumbai;
empid = 55628;
mobile = 9525878558;
name = kkkk; 
```

}

但我想要员工对象形式的输出。我怎样才能从 json 制作员工对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T04:32:17.023

尝试这个 ：

```
NSMutableArray *final_array =[[NSMutableArray alloc]init];
for (NSDictionary *dict in array) {
    Employee *obj =[[Employee alloc]init];
    for (id key in [dict allKeys]) {
        [obj setValue:[dict objectForKey:key] forKey:key];
    }
    [final_array addObject:obj];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T04:28:44.730

您必须有一个`Employee`带有构造函数的类。然后你可以做这样的事情。您不需要创建`SBJson`解析器对象。你可以直接用它就可以了`NSString`，那就是美化了`SBJson`。

```
NSString * data = @"[
{
    "name": "kkkk",
    "empid": "55628",
    "address": "mumbai",
    "mobile": "9528558"
},
...
{
    "name": "vx",
    "empid": "96",
    "address": "addre",
    "mobile": "999596"
}
]";

// Get an array with all the employees inside
NSArray *myArray = [data JSONValue];

// Pick out the first employee
NSDictionary *firstEmployee = myArray[0];

// Create an object for him
Employee *firstEmployeeObject = [[Employee alloc] initWithAddress:[firstEmployee objectForKey:@"address"] andEmpID:[firstEmployee objectForKey:@"empid"] andMobile:[firstEmployee objectForKey:@"mobile"] andName:[firstEmployee objectForKey:@"name"]]; 
```

`release`如果您不使用 ARC ，请不要忘记您的对象。

# ipad - 如何检测我们是否以编程方式关闭键盘并在uitextview中通过点击键盘关闭？

> ID：10876219
> 
> 赞同：0
> 
> 时间：2012-06-04T04:09:01.537
> 
> 标签：ipad, keyboard, uitextview, ios5

我需要获取此信息，如何检测我们是否以编程方式关闭键盘并在 uitextview 中通过点击键盘关闭？他们俩都叫

```
-(BOOL)textViewShouldEndEditing:(UITextView *)textView 
```

但如何检测它的差异？有人可以给我一些线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T04:16:19.733

您可以创建通知观察者并监听某些事件：

## UIWindow 类

```
// Each notification includes a nil object and a userInfo dictionary containing the
// begining and ending keyboard frame in screen coordinates. Use the various UIView and
// UIWindow convertRect facilities to get the frame in the desired coordinate system.
// Animation key/value pairs are only available for the "will" family of notification.
UIKIT_EXTERN NSString *const UIKeyboardWillShowNotification;
UIKIT_EXTERN NSString *const UIKeyboardDidShowNotification; 
UIKIT_EXTERN NSString *const UIKeyboardWillHideNotification; 
UIKIT_EXTERN NSString *const UIKeyboardDidHideNotification; 
```

## 例子

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@(keyboardDidDisappear)
                                             name:UIKeyboardDidHideNotification
                                           object:nil]; 
```

# php - 我的 PHP 应用程序消耗了多少资源？

> ID：10876223
> 
> 赞同：-1
> 
> 时间：2012-06-04T04:09:36.663
> 
> 标签：php, performance

我想知道是否有工具可以测量我的 PHP 应用程序使用了多少资源（CPU/RAM）？

我想通过模拟对不同 url 的多个请求来测试我的应用程序并查看消耗了多少资源？还模拟多个连接，即模拟定义数量的用户正在使用我的应用程序。

是否可以？你有什么建议吗？

问候和感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T04:20:25.827

如果您使用的是 Linux，那么 top 是最好的选择（至少对我而言）。

我保持一个选项卡在顶部运行，这样我可以在加载各种页面/应用程序时观察 ram/cpu/etc。

[http://linux.about.com/od/commands/l/blcmdl1_top.htm](http://linux.about.com/od/commands/l/blcmdl1_top.htm)

# mysql - 运行链接到我的 Django 项目的 mysql 数据库

> ID：10876225
> 
> 赞同：0
> 
> 时间：2012-06-04T04:10:06.940
> 
> 标签：mysql, django

> **可能重复：**
> [致命错误：无法打开和锁定特权表：表 'mysql.host' 不存在](https://stackoverflow.com/questions/9083408/fatal-error-cant-open-and-lock-privilege-tables-table-mysql-host-doesnt-ex)

我正在从头开始观看 Python ( [http://www.youtube.com/watch?v=bRnm8f6Wavk](http://www.youtube.com/watch?v=bRnm8f6Wavk) ) 并试图将 mysql 数据库运行到 django 项目并遇到一些问题

我输入了 mysqld 来运行 mysql 数据库。

我面临的错误信息是：

```
InnoDB: Apply batch completed
120604 12:02:05  InnoDB: Waiting for the background threads to start
120604 12:02:06 InnoDB: 1.1.8 started; log sequence number 1595675
120604 12:02:06 [Note] Server hostname (bind-address): '(null)'; port: 3306
120604 12:02:06 [Note]   - '(null)' resolves to '0.0.0.0';
120604 12:02:06 [Note]   - '(null)' resolves to '::';
120604 12:02:06 [Note] Server socket created on IP: '0.0.0.0'.
120604 12:02:06 [ERROR] Fatal error: Can't open and lock privilege tables: Table 'mysql.host' doesn't exist 
```

不知道如何解决这个问题..需要一些帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:49:30.423

我一直在互联网上查看 3 天，但我所看到的一切都不起作用。试试这个，看看你的mysql文件夹\data中是否有默认创建的文件夹，mysql和performance_schema floders。通常，如果您删除这些文件夹，则会出现该错误。

如果您需要这些文件夹，我建议您在另一台计算机上安装 MySQL 并将这 2 个文件夹复制到 mysql / data 中，那里有您的数据库。

# php - php邮件附件

> ID：10876228
> 
> 赞同：1
> 
> 时间：2012-06-04T04:10:27.837
> 
> 标签：php, html, email, sendmail, phpmailer

我一直在使用此脚本向某些员工发送电子邮件，但由于我的系统发生更改，我现在必须随电子邮件发送附件，并且我尝试了多个代码来完成此操作，但没有成功......我仍然收到电子邮件但没有附件，这在这种情况下毫无意义，我已将我正在使用的脚本放在下面

我删除了我使用的真实地址和 smtp 服务器

```
 require("PHPMailer/class.phpmailer.php");

$mail = new PHPMailer();

$mail->IsSMTP();    // set mailer to use SMTP
$mail->Host = "SMTP.SErver.com";    

$mail->From = "From@email.com";    
$mail->FromName = "HCSC";  
$mail->AddAddress("To@email.com", "Example"); 
$mail->AddReplyTo("Reply@email.com", "Hcsc"); 

$mail->WordWrap = 50;    
$mail->IsHTML(false);    

$mail->Subject = "AuthSMTP Test";
$mail->Body    = "AuthSMTP Test Message!";
$mail->AddAttachment("matt.txt"); //this is basicly what i am trying to attach as a test but will be using excel spreadsheets in the production

if(!$mail->Send())
{
   echo "Message could not be sent. <p>";
   echo "Mailer Error: " . $mail->ErrorInfo;
   exit;
}

echo "Message has been sent"; 
```

我还尝试了其他一些附加文件的方法，但似乎没有任何帮助，非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T04:22:37.043

您的代码看起来相当简单且语法正确。脚本是否返回任何错误消息？

如果您收到的消息没有任何问题，那么问题似乎不在您的代码中。

需要检查的几件事：

*   确保文件“matt.txt”可以被您的网络服务器读取并且路径正确。文件的路径需要包含在**$mail->AddAttachment()**方法调用中，并且应该相对于脚本的位置。
*   验证您的邮件服务器没有因为限制而删除任何附件和/或尝试发送不同的附件文件类型（尝试使用 .zip 或 .jpg 文件）
*   如果您正在运行较新版本的 phpMailer，您可以尝试使用以下语法捕获任何抛出的异常（可能不会阻止消息发出，但只是阻止包含附件）：（[采取来自 phpMailer 示例代码](https://github.com/PHPMailer/PHPMailer/blob/master/examples/smtp.phps)）

    ```
    require 'PHPMailer/PHPMailerAutoload.php';
    $mail = new PHPMailer(true);
    try {

      $mail->IsSMTP();    // set mailer to use SMTP
      $mail->Host = "SMTP.SErver.com";    

      $mail->From = "From@email.com";    
      $mail->FromName = "HCSC";  
      $mail->AddAddress("To@email.com", "Example"); 
      $mail->AddReplyTo("Reply@email.com", "Hcsc"); 

      $mail->WordWrap = 50;    
      $mail->IsHTML(false);    

      $mail->Subject = "AuthSMTP Test";
      $mail->Body    = "AuthSMTP Test Message!";
      $mail->AddAttachment("matt.txt");
      echo "Message Sent OK<p></p>\n";

    } catch (phpmailerException $e) {

      echo $e->errorMessage(); //Pretty error messages from PHPMailer

    } catch (Exception $e) {

      echo $e->getMessage(); //Boring error messages from anything else!

    } 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T04:22:57.420

您需要提供文件的完整路径和文件名函数，除了两个/三个参数

```
// Setup mail class, recipients and body
$mailer->AddAttachment('/home/mywebsite/public_html/file.zip', 'file.zip'); 
```

[http://www.askapache.com/php/phpfreaks-eric-rosebrocks-phpmailer-tutorial.html#File_Attachments_PHP_Mail_PHPMailer](http://www.askapache.com/php/phpfreaks-eric-rosebrocks-phpmailer-tutorial.html#File_Attachments_PHP_Mail_PHPMailer)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-14T23:08:54.053

好的，这还没有结束，所以我想既然我遇到了完全相同的问题，我会给你我的解决方案，它对我有用。我相信以前的邮件是对的。您需要确定文件的绝对路径。这并不总是一件容易的事，特别是如果您在共享服务器上操作。无论如何，我在我的页面上嵌入了以下代码，它回显了该页面的确切路径。从那里开始，很容易弄清楚如何将一个级别放入包含我想要附加的文件的目录中。

```
 'var_dump(stream_resolve_include_path("Thankyou.php"));' 
```

只需复制并粘贴该行并将其放入您的页面中，插入您的页面名称并替换我插入的Thankyou.php（保留语音标记）。运行页面并检索您的绝对路径。只需在后面删除它并在 PHPMailer 的 AddAttachment 段中插入新路径。

# java - (Java) 获取加载到动态类型对象中的字符串的值？

> ID：10876236
> 
> 赞同：0
> 
> 时间：2012-06-04T04:12:53.573
> 
> 标签：java, string

我对 Java 很陌生（大约 10 天），所以我的代码可能很糟糕，但这就是我所拥有的：

```
ArgsDataHolder argsData = new ArgsDataHolder();  // a class that holds two
                                                 // ArrayList's where each element
                                                 // representing key/value args
Class thisArgClass;
String thisArgString;
Object thisArg;

for(int i=2; i< argsString.length; i++) {
    thisToken = argsString[i];
    thisArgClassString = getClassStringFromToken(thisToken).toLowerCase();
    System.out.println("thisArgClassString: " + thisArgClassString);
    thisArgClass = getClassFromClassString(thisArgClassString);

    // find closing tag; concatenate middle
    Integer j = new Integer(i+1);
    thisArgString = getArgValue(argsString, j, "</" + thisArgClassString + ">");

    thisArg = thisArgClass.newInstance();
    thisArg = thisArgClass.valueOf(thisArgString);
    argsData.append(thisArg, thisArgClass);
} 
```

用户基本上必须以这种格式在命令提示符中输入一组键/值参数：`<class>value</class>`例如`<int>62</int>`。使用此示例，`thisArgClass`将等于`Integer.class`，`thisArgString`将是读取“62”的字符串，并且`thisArg`将是等于 62 的 Integer 实例。

我试过了`thisArg.valueOf(thisArgString)`，但我猜`valueOf(<String>)`只是Object的某些子类的一种方法。无论出于何种原因，我似乎无法将 thisArg 转换为 thisArgClass （就像这样：`thisArg = (thisArgClass)thisArgClass.newInstance();`，此时`valueOf(<String>)`应该可以访问。

必须有一种很好、干净的方式来做到这一点，但目前这超出了我的能力范围。如何获取加载到动态类型对象（Integer、Long、Float、Double、String、Character、Boolean 等）中的字符串的值？还是我只是想多了，Java 会为我做转换？：使困惑：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T04:29:56.407

> 我似乎无法将 thisArg 转换为 thisArgClass （就像这样：thisArg = (thisArgClass)thisArgClass.newInstance();,

这不会像这样工作，因为您需要先初始化。这`thisArgClass`将产生编译时错误。更改代码如下：

```
Class thisArgClass = null;
try {
    Object thisArg = thisArgClass.newInstance();
} catch (InstantiationException ex) {
    Logger.getLogger(Test3.class.getName()).log(Level.SEVERE, null, ex);
} catch (IllegalAccessException ex) {
    Logger.getLogger(Test3.class.getName()).log(Level.SEVERE, null, ex);
} 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T04:44:00.333

这里有几件事是错误的。我假设`thisArgClass`已正确设置；对于您的示例，它将包含`Integer.class`. 为了调用`newInstance()`一个`Class`对象，类*必须*有一个无参数的构造函数。类`Integer`没有这样的构造函数，因此您必须使用更迂回的方法调用现有构造函数之一：

```
Constructor<Object> c = thisArgClass.getConstructor(String.class);
Object i = c.newInstance(thisArgString); 
```

由于您直到运行时才知道对象的实际类型，因此您必须`<Object>`在使用该值之前使用并将结果转换为所需的类型。

# javascript - asp.net：资源 .resx 文件中的换行符 \n 不起作用

> ID：10876242
> 
> 赞同：6
> 
> 时间：2012-06-04T04:14:08.180
> 
> 标签：javascript, asp.net, line-breaks, resx, resource-files

“\n”在下面的代码中不起作用，它只是显示为“\n”

```
if (!window.confirm(XXXXX.Globalization.LocalResource.InvalidUrl)) {
    return false;
} 
```

字符串是“无效的 URL！\n 你确定要继续吗？” 在资源 resx 文件中。

如何使它工作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T18:41:48.017

在我的情况下起作用的是：

```
This text has a<br>line break! 
```

见`<br>`那里。

在此处查看详细信息：[在 resx 资源文件中放置换行符](http://scottstoecker.wordpress.com/2012/05/31/putting-a-line-break-in-an-resx-resource-file/)

我在 ASP.NET MVC 中使用 Razor，所以我使用了：

```
@Html.Raw(Localization.NotAnswered) 
```

以便将其输出`<br>`为 HTML 代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T04:16:33.683

尝试 shift-enter 在设计器中创建一个新行。或者从记事本复制并粘贴结果。

另一种方法是手动编辑 RESX xml。

问题是 RESX 设计器 UI 将自动转义字符串。所以你的价值实际上是：

```
"Invalid URL! \\n Are you sure you want to continue?" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T01:10:24.110

我用shift+enter，它认为这是最简单的。

< br >肯定不行，没试过\r\n，但是由于\n不行，我对\r\n不是很有信心

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-29T05:10:37.050

ASP.NET MVC

STEP-1
在我的`Resource.resx`文件中，放在`Shift+Enter`段落 1 和段落 2 之间
我的文本段落1
我的文本段落2

STEP-2
在我的视图页面中

```
<p>@Html.Raw(Regex.Replace(Resource.Mytext, "\r\n", "<br />"))</p> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-04T05:55:40.303

当您输入字符串时，Shift-enter 效果很好，但是如果您已经创建了资源文件，并且您不想编辑每个字符串，您可以这样做

```
String myStringFromResx = myStringFromResx.Replace("\\n," "\n"); 
```

# javascript - 浏览器对 window.location.reload(true) 的支持

> ID：10876244
> 
> 赞同：17
> 
> 时间：2012-06-04T04:14:25.930
> 
> 标签：javascript, browser-support

`window.location.reload()`根据[w3schools ，所有浏览器都支持](http://www.w3schools.com/jsref/met_loc_reload.asp)

但是什么会`window.location.reload(true)`在没有缓存的情况下重新加载页面？它的支持程度如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-25T08:39:43.440

`reload()`应该接受一个参数，告诉它进行硬重新加载，即忽略缓存：

```
location.reload(true); 
```

注意：我不认为只是说它支持FF是正确的，[这里](https://stackoverflow.com/a/5722855/1877909)明确提到它也被其他浏览器支持。

**查看以下链接以获取更多信息**

[我如何使用 jquery 刷新页面](https://stackoverflow.com/questions/5404839/how-can-i-refresh-a-page-with-jquery)

[重新加载没有缓存](https://stackoverflow.com/a/5722855/1877909)

[位置.重新加载](https://developer.mozilla.org/en-US/docs/Web/API/Location.reload)

[重新加载方法](http://msdn.microsoft.com/en-us/library/ie/ms536691%28v=vs.85%29.aspx)

[刷新重新加载页面使用 jquery](http://www.encodedna.com/2013/03/refresh-reload-page-using-jquery.htm)

[是 Window.location.reload(true) 吗？](http://social.microsoft.com/Forums/en-US/8db6dd9b-16de-45d1-a6c9-8a04df0073bd/is-windowlocationreloadtrue?forum=crmdevelopment)

**这个问题中的一些额外信息**

[窗口位置-href-窗口位置-href-和窗口位置之间的差异](https://stackoverflow.com/questions/2405117/difference-between-window-location-href-window-location-href-and-window-location)

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T04:18:09.010

`location.reload()`[规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/history.html#dom-location)中没有参数，所以不要依赖它。不过，它在某些浏览器中实现，包括[Mozilla Firefox](https://developer.mozilla.org/en/DOM/window.location)。

# celery - 禁用 celerybeat 的 pidfile

> ID：10876246
> 
> 赞同：28
> 
> 时间：2012-06-04T04:14:40.423
> 
> 标签：celery, celerybeat

`celeryd`不需要pidfile，但`celerybeat`似乎。有没有办法禁用它？我正在使用 Upstart 来管理进程，因此使用 pidfile 是多余的。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-07-16T10:33:29.390

以下似乎对少数人有用，所以我将其作为答案提交：

```
python manage.py celerybeat --pidfile= --schedule=/var/my_app/celerybeat-schedule 
```

`--pidfile=`（作为 pidfile arg 的空字符串）似乎停止创建一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-01-22T14:35:44.493

所以对我来说，我在我的开发`docker-compose.yml`文件中修改了以下内容：

```
web
    ...
    command: bash -c "python3 manage.py makemigrations && python3 manage.py migrate --run-syncdb && python3 manage.py runserver 0.0.0.0:8982" 
```

至：

```
web
    ...
    command: bash -c "rm -rf celerybeat.pid && python3 manage.py makemigrations && python3 manage.py migrate --run-syncdb && python3 manage.py runserver 0.0.0.0:8982" 
```

我敢肯定有一种更优雅的方法可以在启动甚至关闭时清理这个文件？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-05-22T14:06:06.123

从基本目录中删除 celerybeat.pid 帮助我解决了这个问题 ![在此处输入图像描述](../Images/fe3a2e4bf5120bd4569bb8e74a2368c8.png)

# android - 如何在运行时 android 代码中使用 Eclipse 中的断点？

> ID：10876248
> 
> 赞同：5
> 
> 时间：2012-06-04T04:14:55.540
> 
> 标签：android, eclipse

我确实双击了一条线附近的左侧灰色区域。但是当我运行程序时，它不会停在那里它只是继续运行。它没有停止的原因是什么？我尝试安装 JDT，可能它没有安装，所以我通过 Eclipse 帮助菜单运行更新，但它没有找到任何更新。

所以我无法弄清楚出了什么问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-04T04:40:15.937

**执行以下步骤来调试您的代码：**

要在完整的应用程序中启用调试，在设置断点后只需在调试模式下运行应用程序，如下图所示： ![在此处输入图像描述](../Images/dfe40f1471f03fa4bd1f8cad11f06cf2.png)

**要从某个点开始调试，只需在模拟器/设备中的该点导航您的应用程序，然后执行以下操作：** 1\. 转到 Windows --> 显示视图 --> 其他...

![在此处输入图像描述](../Images/6bd5ce594b165370174398e47b1fa5cb.png)

将打开一个窗口。选择“ **Android** ”文件夹，然后选择**“设备”**并单击“确定”。

![在此处输入图像描述](../Images/0a110e264a42451e0aee0082e6f34625.png)

然后打开设备视图，您可以通过电话图标识别它，从列表中选择您的设备，然后从包列表中选择您的包，然后单击顶部的绿色灯泡。绿色灯泡将出现在包裹的左侧。现在你的断点应该可以工作了。

![在此处输入图像描述](../Images/6fb5e2fc885e17ef1a68c44ea1de2ddf.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-04T04:30:24.280

你在哪种模式下运行你的程序？您需要在调试模式下运行程序，然后它才会在断点处停止。右键单击您的应用程序文件并选择选项“调试为”->“Android 应用程序”。

# configuration - NGINX：给定自定义子域，与 $http_user_agent 条件匹配的位置正则表达式不起作用

> ID：10876252
> 
> 赞同：0
> 
> 时间：2012-06-04T04:15:33.507
> 
> 标签：configuration, nginx

```
server {
    listen 80;
    server_name ~^(?<custom>.+)\.(test)?website\.com$;

    location ~ ^/event/(\d+)$ {
        proxy_pass_header Server;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_intercept_errors on;

        # This is the problematic block
        # This conditional breaks the whole location block.
        # If I commented the if statement, the default proxy_pass works.
        if ($http_user_agent ~* iphone|android) {
            # the proxy_pass indeed works, tested on development machine
            proxy_pass http://frontends/userland/mobile/event/$1;
            break;
        }

        # When above if conditional is enabled, this fails.
        proxy_pass http://frontends/userland/event/$1;
    }
} 
```

注意到 server_name 中的子域匹配器几乎是一个通配符。

为什么 if 条件不起作用？如果我正在做的事情是错误的，那么重写它的最佳方法是什么？

Nginx 版本：1.2.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T12:10:05.647

`^/event/(\d+)$`您通过评估条件`iphone|android`来覆盖您的 PCRE 捕获`if`。因此，在执行重写规则后，`$1`变量为空。

尝试这样的事情：

```
 set $num $1;
    if ($http_user_agent ~* iphone|android) {
        proxy_pass http://frontends/userland/mobile/event/$num;
    }

    proxy_pass http://frontends/userland/event/$num; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:39:34.547

[尤其是](http://agentzh.blogspot.com/2011/03/how-nginx-location-if-works.html)关于为什么“如果”在 Nginx 中可能是邪恶的，请参见[这个](http://wiki.nginx.org/IfIsEvil)和这个。

继承事物的方式通常不能遵循预期的形式和指令，例如“return”和“rewrite”（带有“last”）是在 Nginx“if”块中使用的唯一真正可靠的方式。

我会尝试这样的事情：

```
server {
    listen 80;
    server_name ~^(?<custom>.+)\.(test)?website\.com$;

    location ~ ^/event/(\d+)$ {
        proxy_pass_header Server;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_intercept_errors on;

        if ($http_user_agent ~* iphone|android) {
            return 302 http://frontends/userland/mobile/event/$1;
            # Alternative syntax which should keep original url in browser
            #rewrite ^ http://frontends/userland/mobile/event/$1 last;
        }

        proxy_pass http://frontends/userland/event/$1;
    }
} 
```

# java - 有效地使用位置来控制动作

> ID：10876253
> 
> 赞同：0
> 
> 时间：2012-06-04T04:15:58.100
> 
> 标签：java, android, position

我想使用位置（例如从gridview返回）或类似的数字整数来做各种事情，例如创建一个精灵，或者在任何需要数字以外的东西的命令中，例如我想使用类似的东西：

```
sprites.add(createSprite(R.drawable.image(position)); 
```

，其中 createSprite 使用提供的图像创建一个精灵，

代替：

```
if (position == 1) {sprites.add(createSprite(R.drawable.image1);}
if (position == 2) {sprites.add(createSprite(R.drawable.image2);}
...etc 
```

字符串有一个简单的解决方案：

[使用位置打开 .java 的最有效方法](https://stackoverflow.com/questions/10313315/most-efficient-method-to-use-position-to-open-a-java)

但是对于这样的情况呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T04:39:27.433

您可以将所有资源 ID 保存在一个数组中。然后将该位置作为数组索引，检索对应的图片资源id并加载图片。

```
int resIDs[] = { R.drawwable.1, ...... }; 
```

然后

```
sprites.add(createSprite(resIDs[position]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T04:39:35.763

@abhinav8 的建议的缺点是，你不能免费从不同大小/密度的桶中获得动态加载，这绝对不是一个坏的。或者，您可以只声明一个包含资源 ID 的数组并对其进行迭代。

作为最后的手段，我还想指出`Resources`该类提供的一种方法：

[`getIdentifier(String name, String defType, String defPackage)`](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29).

这允许您按名称动态查找资源标识符，这意味着您可以以类似于链接问答中建议的方式使用它。

但是，有一个问题，在方法的文档中作为注释添加。它说：

> **不鼓励**使用此功能。按标识符检索资源比按名称检索资源效率更高。

这基本上意味着：除非你真的必须，否则不要使用它，即使那样，也很少使用它。只是想我应该指出完整性的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T04:28:00.647

一种方法是将所有图像放在`assest`文件夹中并用于`AssestsManager`检索它们。
像：：

```
String imagePath =  "images/myimage"

InputStream is = getAssets().open( imagePath+position );        
Bitmap bmp = BitmapFactory.decodeStream(is);
sprites.add(createSprite(bmp)); ////modify your createsprite(),so that it can receive Bitmap 
```

# python - Python Shelve 无法检索对象

> ID：10876258
> 
> 赞同：-2
> 
> 时间：2012-06-04T04:16:33.790
> 
> 标签：python

我试图存储对象并且能够成功地做到这一点..但是我遇到了问题，在寻找它时..下面给出了错误

人.py

```
class Person:
    def __init__(self, name, age, pay=0, job=None):
        self.name = name
        self.age  = age
        self.pay  = pay
        self.job  = job

    def lastname(self):
        return  self.name.split()[-1]

    def giveraise(self,percent):
        #return self.pay *= (1.0 + percent)
        self.pay *= (1.0 + percent)
        return self.pay 
```

管理器.py

```
from Person import Person

class Manager(Person):
    def giveRaise(self, percent, bonus=0.1):
        self.pay *= (1.0 + percent + bonus)        
        return self.pay 
```

update_db_classes.py

```
import shelve
from Person import Person
from Manager import Manager
bob = Person('Bob Smith', 42, 30000, 'software')
sue = Person('Sue Jones', 45, 40000, 'hardware')
tom = Manager('Tom Doe',  50, 50000)

db = shelve.open('class-shelve')
db['bob'] = bob
db['sue'] = sue
db['tom'] = tom
db.close() 
```

检索对象的代码.. dump_db_classes.py

```
import shelve
db = shelve.open('class-shelve')
for key in db:
    print(key, '=>\n  ', db[key].name, db[key].pay)

bob = db['bob']
print(bob.lastName())
print(db['tom'].lastName()) 
```

错误：C:\Python27\Basics>dump_db_classes.py bob => Bob Smith 30000 sue => Sue Jones 40000 tom => Tom Doe 50000 Traceback（最近一次调用）：文件“C:\Python27\Basics\dump_db_classes.py "，第 8 行，在 print(bob.lastName()) AttributeError: 'Person' 对象没有属性 'lastName'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T04:19:42.513

Python 区分大小写。你打电话`bob.lastName()`，但`Person`方法是`.lastname()`. 错误消息试图告诉您：

```
AttributeError: 'Person' object has no attribute 'lastName' 
```

# javascript - 我无法在 kineticJs 中使用 toDataURL 保存画布

> ID：10876259
> 
> 赞同：0
> 
> 时间：2012-06-04T04:17:01.890
> 
> 标签：javascript, kineticjs

嗨朋友们我已经按照这个教程：[http ://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/)

我创建了一个具有不同概念的相同程序（我使用了拖放功能，如果将图像拖放到画布上，它将在画布中绘制该图像）。但现在我无法使用 toDataURL 保存画布。请帮我..

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
      canvas {
        border: 1px solid #9C9898;
      }
      #buttons {
        position: absolute;
        left: 10px;
        top: 0px;
      }
      button {
        margin-top: 10px;
        display: block;
      }
    </style>
    <div id="container"></div>
    <script src="http://html5demos.com/h5utils.js"></script>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v3.9.6.js"></script>

    <script>
    function update(group, activeAnchor) {
        var topLeft = group.get(".topLeft")[0];
        var topRight = group.get(".topRight")[0];
        var bottomRight = group.get(".bottomRight")[0];
        var bottomLeft = group.get(".bottomLeft")[0];
        var image = group.get(".image")[0];

        // update anchor positions
        switch (activeAnchor.getName()) {
          case "topLeft":
            topRight.attrs.y = activeAnchor.attrs.y;
            bottomLeft.attrs.x = activeAnchor.attrs.x;
            break;
          case "topRight":
            topLeft.attrs.y = activeAnchor.attrs.y;
            bottomRight.attrs.x = activeAnchor.attrs.x;
            break;
          case "bottomRight":
            bottomLeft.attrs.y = activeAnchor.attrs.y;
            topRight.attrs.x = activeAnchor.attrs.x;
            break;
          case "bottomLeft":
            bottomRight.attrs.y = activeAnchor.attrs.y;
            topLeft.attrs.x = activeAnchor.attrs.x;
            break;
        }

        image.setPosition(topLeft.attrs.x, topLeft.attrs.y);
        image.setSize(topRight.attrs.x - topLeft.attrs.x, bottomLeft.attrs.y - topLeft.attrs.y);
      }
      function addAnchor(group, x, y, name) {
        var stage = group.getStage();
        var layer = group.getLayer();

        var anchor = new Kinetic.Circle({
          x: x,
          y: y,
          stroke: "#666",
          fill: "#ddd",
          strokeWidth: 2,
          radius: 8,
          name: name,
          draggable: true
        });

        anchor.on("dragmove", function() {
          update(group, this);
          layer.draw();
        });
        anchor.on("mousedown touchstart", function() {
          group.draggable(false);
          this.moveToTop();
        });
        anchor.on("dragend", function() {
          group.draggable(true);
          layer.draw();
        });
        // add hover styling
        anchor.on("mouseover", function() {
          var layer = this.getLayer();
          document.body.style.cursor = "pointer";
          this.setStrokeWidth(4);
          layer.draw();
        });
        anchor.on("mouseout", function() {
          var layer = this.getLayer();
          document.body.style.cursor = "default";
          this.setStrokeWidth(2);
          layer.draw();
        });

        group.add(anchor);
      }

      window.onload = function() {

        var stage = new Kinetic.Stage({
          container: "container",
          width: 578,
          height: 200,
        });
        var layer = new Kinetic.Layer();
        var rect = new Kinetic.Rect({
          x: 239,
          y: 75,
          width: 100,
          height: 50,
          fill: "#00D2FF",
          stroke: "black",
          strokeWidth: 4
        });

        function cancel(e) {
            if (e.preventDefault) {
            e.preventDefault();
        }
            return false;
        }

        var drop = document.querySelector('#container');

        // Tells the browser that we *can* drop on this target
        addEvent(drop, 'dragover', cancel);
        addEvent(drop, 'dragenter', cancel);

        addEvent(drop, 'drop', function (e) {
        if (e.preventDefault) e.preventDefault(); // stops the browser from redirecting off to the text.

        var path = e.dataTransfer.getData('Text')

        loadImgs(stage,path);

        });

        // add the shape to the layer
        layer.add(rect);

        // add the layer to the stage
        stage.add(layer);

        document.getElementById("save").addEventListener("click", function() {
          stage.toDataURL(function(dataUrl) {
            window.open(dataUrl);
          });

        }, false);

      };

    function loadImgs(stage,url)
    {
        var yodaGroup = new Kinetic.Group({
          x: 100,
          y: 110,
          draggable: true
        });

        var layer = new Kinetic.Layer();
        layer.add(yodaGroup);
        stage.add(layer);

        var imageObj = new Image();

        imageObj.onload = function() {

          var image = new Kinetic.Image({

            x: 0,
            y: 0,
            image: imageObj,
            width: 93,
            height: 104,
            name : "image"
          });
        yodaGroup.add(image);
            addAnchor(yodaGroup, 0, 0, "topLeft");
            addAnchor(yodaGroup, 93, 0, "topRight");
            addAnchor(yodaGroup, 93, 104, "bottomRight");
            addAnchor(yodaGroup, 0, 104, "bottomLeft");

            yodaGroup.on("dragstart", function() {
                this.moveToTop();
            });

        stage.draw();
    };

    imageObj.src = url;
}
    </script>
  </head>
  <body>
    <img src="http://twitter.com/api/users/profile_image/rem" alt="Remy Sharp" />
    <img src="http://twitter.com/api/users/profile_image/brucel" alt="Bruce Lawson" />
    <img src="http://twitter.com/api/users/profile_image/Rich_Clark" alt="Rich Clark" />
      <div id="buttons">
      <button id="save">
        Save as image
      </button>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:37:42.723

问题是您的图像托管在与您的示例不同的域上。同域安全策略适用于访问画布的 dataURL，因此一旦添加了外部图像，就无法获取 dataURL。

# ms-access - MS Access：制作表格

> ID：10876260
> 
> 赞同：1
> 
> 时间：2012-06-04T04:17:11.017
> 
> 标签：ms-access

对于较大的表，运行一个 maketable 有时可能需要数十分钟。有什么方法可以加快这个过程吗？我只是模糊地知道索引，但我不知道它们是否与可制造的加速相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T14:28:41.190

索引用于加速多个表的连接。它们不会帮助您更快地构建表，除非该表是根据查询提取的数据构建的。如果是这种情况，那就是 QUERY 需要很长时间才能构建，您绝对应该考虑为相关表建立索引。

# ruby - ruby 中的中序遍历仅打印根注释

> ID：10876264
> 
> 赞同：0
> 
> 时间：2012-06-04T04:18:27.747
> 
> 标签：ruby, algorithm, data-structures

我的代码是：

```
class Tree
  attr_accessor :node, :left, :right

  def initialize(*args)
    self.node = args[0]
    self.left = args[1]
    self.right = args[2]
  end

  def inorder
    if self.left
      self.left.inorder
    else
      return
    end
    puts self.node
    if self.right
      self.right.inorder
    else
      return
    end
  end
end

t2 = Tree.new 2
t1 = Tree.new 1
t  = Tree.new 3,t1,t2
t.inorder 
```

仅打印根节点 3。这里出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T04:23:54.780

因为你的代码会`return`在`puts`.

```
 def inorder
    if self.left
      self.left.inorder
    end
    puts self.node
    if self.right
      self.right.inorder
    end
  end 
```

# c# - 将 12 位 int 转换为 16 或 32 位

> ID：10876265
> 
> 赞同：6
> 
> 时间：2012-06-04T04:18:42.260
> 
> 标签：c#, bit-manipulation

所以我正在从一个字节数组中读取一个 12 位整数。该数字可能为负数，但我无法弄清楚如何将其转换为 c# 中的可用变量 int16/int32。有一种感觉，我需要对位移或其他按位运算做一些事情，但到目前为止我一直在努力。有人可以指出我正确的方向。

变量 x = 0xFFF;

这需要打印为 -1，但 c# 自然地转换为 int32 并打印为 4095。如果需要转换为 int16 或 int32，我如何保留负值。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-04T04:25:37.697

32 位：

```
x = (x >> 11) == 0 ? x : -1 ^ 0xFFF | x; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-04T05:05:22.460

没有条件的符号扩展，假设`x`是一个已包含 12 位值的有符号短：

```
x = (x << 4) >> 4; 
```

括号纯粹是为了理解发生了什么。与其他算术和逻辑运算符一样，位移位是左结合的。这样做的原因`>>`是有符号类型的算术右移。这意味着，它不是在最高有效位移入零，而是根据需要多次复制 MSB。

通常从`n`位到位的符号扩展`m`将是：

```
x = (x << (m - n)) >> (m - n); 
```

出于显而易见的原因`m`，将限制为 8`sbyte`个、16 个`short`、32 个`int`和 64 个`long`。同样，括号纯粹是装饰性的。减法绑定比位移更紧密。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-18T06:11:39.357

检测符号位并扩展它。对于 16 位：

```
x = ( x & 0x800 ? x | 0xf000 : x ); 
```

# google-app-engine - 寻找解决方案在appengine java上保存游戏数据

> ID：10876269
> 
> 赞同：0
> 
> 时间：2012-06-04T04:19:02.773
> 
> 标签：google-app-engine

我创建了一个在线游戏，使用 java-appengine 作为后端。// 我的游戏使用 websocket ，使用通道 API 但我的一些对象需要持久性存在于应用程序上。

*   静态对象很好，但在 appengine 中很糟糕，因为无法管理实例的启停
*   - Memcache 是一样的，无法控制它何时 exp（有办法让它永远不会 exp 吗？）
*   - 数据存储非常慢且昂贵

我在 appengine java 上寻找解决方案保存游戏对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T04:40:24.720

您可以在后端运行，但它确实不能扩展。

您可能需要做的是确定 App Engine 是否真的是您要用于构建游戏的平台。如果数据存储性能不适合您，您可能需要另一种架构。您很可能需要更传统的客户端/服务器架构。

此外，如果没有关于游戏架构的更多信息，很难回答您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:39:42.277

Memcached 是要走的路，你无法控制它，但如果你想使用应用程序引擎，就会有妥协。我在 python 上使用 Memcache 的经验是，大多数情况下，当实例运行时，缓存是有效的。即使在关闭的实例之间，它似乎也不会经常过期。当我检查我的日志时，我通常只会在实例之间有很长一段时间（小时+）时看到 Memcache 创建过期对象。

您应该在 Java 和 Python 上分析您的代码，因为具有更快启动时间的 Python 可能更适合您的应用程序。或者，如果您必须使用 java，您可能希望保留几个空闲实例，以便能够在没有启动延迟的情况下处理请求。您也许可以使用 Cron 任务来保持 memcache 新鲜我还没有尝试过这个，因为我的代码通常不是那么敏感。

# c# - 在 Windows azure 中打开和关闭实例的代码

> ID：10876270
> 
> 赞同：3
> 
> 时间：2012-06-04T04:19:17.527
> 
> 标签：c#, .net, azure, cloud, azure-configuration

嗨，我是 Windows azure 的初学者。我想在 Windows azure 中创建一个实例，然后使用 C# 代码以编程方式打开它并关闭它。我已经编写了代码来使用 WMI 在 hyper V 服务器中执行这些操作，但我不明白如何使用 windows azure API 来执行这些操作。请帮助我做到这一点。如果可能的话，请给我代码，以便我可以轻松地遵循它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T04:26:51.387

答案是：你可以按照你的要求去做。部署中的每个*角色*都定义了一个特定的 VM（Windows 2008 Server 以及您编写的任何代码部署到它），并且每个角色必须有一个或多个实例。所以：只要你可以从 1 个实例扩展到 n 个实例（但不是 0 个），你就可以让它工作。

为什么*排序*？当您关闭实例时（例如，从 4 个实例变为 3 个），您无法选择性地选择关闭哪个实例。因此，一个好的模式是使用无状态操作。假设您正在从队列中读取数据并进行一些处理。如果您的角色实例之一被关闭，那么您可以简单地停止处理队列消息，完成正在处理的任何消息（在几分钟内），然后实例关闭并且其他实例继续处理。

好的，现在是最后一部分：要更改实例计数（假设您对到目前为止所描述的内容没有问题），您需要更改部署配置，其中包含每个角色的实例数量的设置。要使用 C# 执行此操作，您需要调用服务管理 API，它基于 REST 并[在此处](http://msdn.microsoft.com/en-us/library/windowsazure/ee460809)完整记录。话虽如此：有 Windows Azure [PowerShell cmdlet](http://wappowershell.codeplex.com/documentation)可以大大简化此操作，并且可以从您的任何角色（或从本地计算机）调用。如果您真的想使用 C# 进行这些调用，请查看用 C# 编写的[csmanage](http://code.msdn.microsoft.com/windowsazure/Windows-Azure-CSManage-e3f1882c)示例。

# java - 用 Java 编写 Midi 软件

> ID：10876272
> 
> 赞同：0
> 
> 时间：2012-06-04T04:19:30.297
> 
> 标签：java, midi

最近我在考虑写一些midi相关的东西。我计划使用音序器进行实时 MIDI 处理，例如交互式编曲器 - 给定一个和弦，它们会产生一个实时的命令序列等。

由于 java 是我的主要语言，所以 javax.midi 包的选择对我来说是显而易见的 :) 但后来我想 - Java...垃圾收集...实时的东西...嗯 - 听起来真的好吗 -没有故障，没有延迟？不用说，我以前没有编写midi软件的经验。

所以我想知道是否真的可以用Java编写midi软件，在编写这样的东西时我应该注意一些一般的经验法则吗？

你能为我解释的任务推荐一些第三方库吗？

非常感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T06:37:16.837

[我在Google Code](http://code.google.com/p/android-midi-lib/)上有一个 MIDI 的 Java 实现；它只是读取和写入 MIDI 数据的基本格式，但它可能是一个不错的起点。根据我的经验，Java 中几乎无法避免实时性能提升，但智能实现通常可以将其保持在可接受的水平。

# node.js - 根据顶部，我的 node.js 应用程序正在使用我 100% 的 CPU

> ID：10876274
> 
> 赞同：1
> 
> 时间：2012-06-04T04:20:06.903
> 
> 标签：node.js

该应用程序实际上是开源的： http: [//www.github.com/zackster/CompassionPit-Node--](http://www.github.com/zackster/CompassionPit-Node--)

分析我的应用程序以查看它在哪里吸收 CPU 资源的高级步骤是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T05:36:09.543

您可以使用[节点检查](https://github.com/dannycoates/node-inspector)器来分析您的代码。这将显示它大部分时间花在哪里。

# ruby-on-rails - 如何在使用 rspec 的 rails 3.1 集成测试中绕过 application_controller 中的 before_filter？

> ID：10876277
> 
> 赞同：1
> 
> 时间：2012-06-04T04:20:47.573
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

我们的 rails 3.1 应用程序中有一个 before_filter 检查会话超时。问题是 rspec 集成测试中无法识别会话并导致 rspec 错误。有没有办法绕过application_controller中的before_filter？controller.should_receive(:my_filter) 在这里不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T04:42:10.403

您可以在之前的过滤器中进行此测试：

```
before_filter :my_filter

def my_filter
  return if Rails.env.test?
  # check session timeout...
end 
```

# c# - 重命名JStree中的文件夹

> ID：10876280
> 
> 赞同：1
> 
> 时间：2012-06-04T04:21:24.543
> 
> 标签：c#, jquery, jstree

我正在尝试重命名我的 jstree 中的一个文件夹，它应该更新数据库中的新名称。在尝试这样做时，我收到以下错误：

```
Microsoft JScript runtime error: Object doesn't support property or method 'css' in jquery.jstree.js file 
```

我的代码：

```
.bind("rename.jstree", function (e, data) {
        $.post(
            "./ajax/server.aspx",
            {
                "operation": "rename_node",
                "id": data.rslt.obj.attr("id"),
                "title": data.rslt.new_name
            },
            function (r) {
                if (!r.status) {
                    $.jstree.rollback(data.rlbk);
                }
            }
        );
    })

Function to update New Name in DB

 private void rename_node()
    {
        int _id = Convert.ToInt32(Request.QueryString["id"]);
        string _folder_name = Request.QueryString["title"];
        try
        {
            _subscription_api.rename(_id, _folder_name);
        }
        catch
        {
            Response.Write("-1");
        }
    } 
```

我是 JS 树和 JQuery 的新手。我正在尝试从我的 js 文件中调用一个函数，以便该函数将新文件夹名称更新为数据库。但是右键单击我的文件夹并单击重命名，我收到上述错误。

# jquery - 使用 JQuery 的 each() 方法在备用行颜色中出现问题

> ID：10876285
> 
> 赞同：1
> 
> 时间：2012-06-04T04:22:10.177
> 
> 标签：jquery

我有一张桌子如下

```
<table >
        <tr>
            <th scope="col">EmpId</th><th scope="col">EmpName</th>
        </tr>
        <tr>
            <td>1</td><td>ABC</td>
        </tr>
        <tr>
            <td>2</td><td>DEF</td>
        </tr>
</table> 
```

**我想只使用 each()**函数来设置表的“td”元素而不是“th”的备用行颜色。我试过了

```
<style type="text/css">   
    tr.even { background-color: green; }   
    tr.odd { background-color: yellow; }
</style>
 $(document).ready(function () {
 $('table > tbody').each(function () {
            $('tr:odd',  this).addClass('odd').removeClass('even');
            $('tr:even', this).addClass('even').removeClass('odd');
        });
 }); 
```

虽然这可行，但它也接受“th”元素。如何避免这种情况？

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T04:27:34.000

一个简单的解决方案是将您的`<th>`行放入 a`<thead>`并添加一个显式`<tbody>`：

```
<table>
    <thead>
        <tr>
            <th scope="col">EmpId</th><th scope="col">EmpName</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td><td>ABC</td>
        </tr>
        <tr>
            <td>2</td><td>DEF</td>
        </tr>
    </tbody>
</table>​ 
```

演示：http: [//jsfiddle.net/ambiguous/bGvA2/](http://jsfiddle.net/ambiguous/bGvA2/)

* * *

如果您无法更改 HTML 以使其合理，那么您可以执行以下操作：

```
$('table tr').not(':first').each(function(i) {
    $(this).addClass(i % 2 ? 'odd' : 'even');
});​ 
```

演示：http: [//jsfiddle.net/ambiguous/TGfrF/](http://jsfiddle.net/ambiguous/TGfrF/)

也许：

```
$('table tr').not(':first')
    .filter(':even').addClass('even').end()
    .filter(':odd' ).addClass('odd'); 
```

演示：http: [//jsfiddle.net/ambiguous/GNFaC/](http://jsfiddle.net/ambiguous/GNFaC/)

这两个确实假设您只有一行`<th>`s。

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T04:38:17.847

**演示：** [**在 Jsfiddle 上**](http://jsfiddle.net/nawazhi/jLY9u/)

```
 $('table tr').not(':first')
    .filter(':even').addClass('even').end()
    .filter(':odd' ).addClass('odd');​
    $('table tr:first-child').addClass('head').removeClass('odd');// will style the heading 
```

或者

```
$(document).ready(function () {
 $('table > tbody').each(function () {
            $('tr:odd',  this).addClass('odd').removeClass('even');
            $('tr:even', this).addClass('even').removeClass('odd');
        });
    $('table tr:first-child').addClass('head').removeClass('odd'); // will style the heading
 }); 
```

**风格**：

```
 tr.even { background-color: green; }   
    tr.odd { background-color: yellow; }
    tr.head { background-color: red; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T05:04:37.610

仅使用 css 进行简单修复：

```
<style type="text/css">   
    tr.even td{ background-color: green; }   
    tr.odd td{ background-color: yellow; }
 </style> 
```

# java - 如何在sql server中获取当前日期时间？

> ID：10876287
> 
> 赞同：1
> 
> 时间：2012-06-04T04:22:26.490
> 
> 标签：java, sql, sql-server, jakarta-ee, struts

我想将 sys 日期传递给我的程序。下面是我的代码片段

```
 DateFormat dateFormat = new SimpleDateFormat("mm/dd/yyyy");
                                           Date date = new Date();
String insertquery="{ call sp_process_job (?,?,?) }";

                    cs = con.prepareCall(insertquery.toString());
                    cs.setString(1,id);
                    cs.setString(2,host);
                    cs.setDate(19,(java.sql.Date) date);
                                          cs.execute();
                          con.commit(); 
```

我的存储过程

```
create procedure sp_process_job (@request_id varchar(25),@host varchar(20),@created_on varchar(25)) as

begin

set dateformat mdy
SELECT CAST(@created_on as datetime)
insert into t_job_details(request_id,host,created_on,run_date) 
                values(@request_id,@host,@created_on)

end 
```

收到此错误

> java.util.Date 不能转换为 java.sql.Date。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T04:28:54.090

您不能`java.util.Date`转换为，`java.sql.Date`因为第二个是第一个的子类。

你可以这样做：

```
cs.setDate(19, new java.sql.Date(date.getTime())); 
```

请记住，`java.sql.Date`除了月份、日期和年份之外，所有内容都将归零。正如[`java.sql.Date`javadoc](http://docs.oracle.com/javase/7/docs/api/java/sql/Date.html)所说：

> 为了符合 SQL DATE 的定义，由`java.sql.Date`实例包装的毫秒值必须通过在与实例关联的特定时区中将小时、分钟、秒和毫秒设置为零来“规范化”。

# iphone - 管理 UIScrollView 的内容滚动

> ID：10876290
> 
> 赞同：-2
> 
> 时间：2012-06-04T04:22:37.463
> 
> 标签：iphone, ipad

我的应用程序中有一个滚动视图，它有这样的颜色调色板
..
![在此处输入图像描述](../Images/628c8d4e2261cab142f8efac5f37e6db.png)

现在在我的应用程序的专业版中，我只想向用户显示 30 种颜色，
并且在他/她购买了所有颜色之后，他们可以完全访问颜色
我如何使用在滚动视图中滚动的内容来维护这个
东西在专业版中，滚动视图必须滚动到只有 30 种颜色，而在完整版中，它必须滚动浏览所有内容
我该如何管理，因为在下面的代码中

```
svcolor.contentSize=CGSizeMake(0, 1970); 
```

它会滚动浏览所有内容，但是当我尝试降低高度时它不会滚动。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T04:40:23.113

首先我不知道什么

```
svcolor.contentSize = CGSizeMake(0, 1970); 
```

很好，因为您将宽度保持为零。您可以使用的一种方法是创建一个功能，首先检查版本并相应地创建具有指定数量图像的滚动，例如

```
[self createPallete]; 
```

通过一些实现，例如

```
- (void)createPallete {
    //Create your scroll 
    if(proVersion == YES) {//proVersion is a BOOL to keep track
        svcolor.contentSize = CGSizeMake(svcolor.frame.size.width, HEIGHT+REQUIREDMARGINS @30objects);
    }
    else {
        svcolor.contentSize = CGSizeMake(svcolor.frame.size.width, HEIGHT+REQUIREDMARGINS @ALL Objects);
    }
} 
```

希望能帮助到你！！！

# ssh - 调试ec2实例启动

> ID：10876293
> 
> 赞同：4
> 
> 时间：2012-06-04T04:22:46.087
> 
> 标签：ssh, amazon-ec2

我创建了一个 ec2 实例用作 Web 服务器。一旦我通过 SSH 登录，我就使用 taskkel 安装了 LAMP。

断开连接并尝试重新连接后，我得到“连接被拒绝”。在做了一些研究之后，似乎安装 LAMP 使得 SSH 守护进程无法启动。

所有建议都说要分离卷并将其附加到另一个实例以纠正问题。这一切都很好，但我不知道如何找到问题所在。我所做的研究表明，某些命令的一些输出表明是什么问题阻止了 SSH 守护程序启动。

那么，如何找到问题以便解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T10:43:03.497

如果您将 EBS 附加到其他实例，那么您应该能够查看日志文件 ( */mnt/wherever/* ***var/log/messages*** ) 或系统启动时存储它们的位置。

另一种方法是使用**chroot**命令从您安装此 EBS 的目录中启动一个 shell。从那里您可以尝试运行应该在启动序列期间运行的所有命令......并找出您的 sshd 失败的原因......或者远程系统是否以某种方式弄乱了网络或密钥，这样它阻止了您的访问。

# c# - c# SendMessage 和 Skype 问题

> ID：10876296
> 
> 赞同：2
> 
> 时间：2012-06-04T04:22:52.877
> 
> 标签：c#, .net, skype, sendmessage

我正在尝试使用 C# 为 Skype 创建一个附加组件。我**不想**使用 Skype4COM，因为我想要消息等方面的体验。不幸的是，这些消息让我绊倒了。我有泵和这样的设置。他们都工作，我的应用程序成功地将“APIDiscover”消息发送到 Skype，获得“PendingAuth”响应，然后是“AttachSuccess”消息。但是，当我尝试向 Skype 发送“ping”（它应该回复“pong”）时，什么也没有发生。

SendMessage 的返回码为**0**，但 Marshall.GetLastWin32Error 为**1400**（无效句柄）。使用 AttachSuccess 方法返回句柄。等效的 C++ 代码确实有效，所以我很茫然。

**首先是我用作指南的 C++ 代码：** 这是（缩减的）消息泵。您可以忽略所有内容，但我将 //<----

```
static LRESULT APIENTRY SkypeAPITest_Windows_WindowProc(
HWND hWindow, UINT uiMessage, WPARAM uiParam, LPARAM ulParam)
{
LRESULT lReturnCode;
bool fIssueDefProc;

lReturnCode=0;
fIssueDefProc=false;
switch(uiMessage)
    {
    case WM_COPYDATA:
        if( hGlobal_SkypeAPIWindowHandle==(HWND)uiParam )
            {
            PCOPYDATASTRUCT poCopyData=(PCOPYDATASTRUCT)ulParam;
            printf( "Message from Skype(%u): %.*s\n", poCopyData->dwData, poCopyData->cbData, poCopyData->lpData);
            lReturnCode=1;
            }
        break;
    default:
        if( uiMessage==uiGlobal_MsgID_SkypeControlAPIAttach )
            {
            switch(ulParam)
                {
                case SKYPECONTROLAPI_ATTACH_SUCCESS:
                    printf("!!! Connected; to terminate issue #disconnect\n");
                    hGlobal_SkypeAPIWindowHandle=(HWND)uiParam;//<---- Right here is where we receive  the handle from Skype.
                    break;
    }
if( fIssueDefProc )
    lReturnCode=DefWindowProc( hWindow, uiMessage, uiParam, ulParam);
return(lReturnCode);
} 
```

这是（再次愚蠢的）“发送消息”代码

```
void __cdecl Global_InputProcessingThread(void *)
{
static char acInputRow[1024];
bool fProcessed;

if( SendMessageTimeout( HWND_BROADCAST, uiGlobal_MsgID_SkypeControlAPIDiscover, (WPARAM)hInit_MainWindowHandle, 0, SMTO_ABORTIFHUNG, 1000, NULL)!=0 )
    {
    while(Global_Console_ReadRow( acInputRow, sizeof(acInputRow)-1))
        {
        if( fProcessed==false && hGlobal_SkypeAPIWindowHandle!=NULL )
            {
            COPYDATASTRUCT oCopyData;

            // send command to skype
            oCopyData.dwData=0;
            oCopyData.lpData=acInputRow;
            oCopyData.cbData=strlen(acInputRow)+1;
            if( oCopyData.cbData!=1 )
                {
                if( SendMessage( hGlobal_SkypeAPIWindowHandle, WM_COPYDATA, (WPARAM)hInit_MainWindowHandle, (LPARAM)&oCopyData)==FALSE )
                    {
                    hGlobal_SkypeAPIWindowHandle=NULL;
                    printf("!!! Disconnected\n");
                    }
                }
            }
        }
    }
SendMessage( hInit_MainWindowHandle, WM_CLOSE, 0, 0);
SetEvent(hGlobal_ThreadShutdownEvent);
fGlobal_ThreadRunning=false;
} 
```

**现在这是我的 C#**

```
 public bool PreFilterMessage(ref Message m)
    {
        Console.WriteLine(m.ToString());
        if (m.Msg == WM_COPYDATA && SkypeAPIWindowHandle == m.WParam)
        {
            SkypeMessage(m);
            return true;
        }
        if (m.Msg == MsgApiAttach)
        {
            switch (m.LParam.ToInt32())
            {
                case (int)SkypeControlAPIAttach.SUCCESS:
                    SkypeAPIWindowHandle = m.WParam; //Here's where we set the Skype Handle
                    AttachSuccess(m);
                    return true;
            }
        }
        return false; //Defer all other messages
    } 
```

这是我的 DLL 导入和发送代码

```
 [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = false)]
    static extern IntPtr SendMessageA(IntPtr hWnd, UInt32 Msg, IntPtr wParam, ref MsgHelper.COPYDATASTRUCT lParam);

    public static void Command(string c)
    {
        if (c.Last() != '\0')
            c += "\0"; //Make string null terminated
        Console.WriteLine();
        MsgHelper.COPYDATASTRUCT cda = new MsgHelper.COPYDATASTRUCT();
        cda.dwData = new IntPtr(0);
        cda.lpData = c;
        cda.cbData = c.Length + 1;
        Marshal.GetLastWin32Error(); //Clear last error
        Console.WriteLine(SendMessageA(mHelper.SkypeAPIWindowHandle, MsgHelper.WM_COPYDATA, IntPtr.Zero, ref cda));
        Console.WriteLine(Marshal.GetLastWin32Error());
    } 
```

COPYDATASTRUCT 是：

```
 public struct COPYDATASTRUCT
    {
        public IntPtr dwData;
        public int cbData;
        [MarshalAs(UnmanagedType.LPStr)]
        public string lpData;
    } 
```

我认为这就是一切。如果我忘记了什么，请告诉我。

任何想法为什么我得到1400？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:24:51.107

嗯，正如我所料，这是一件小事。Skype API 说（不要问我为什么）**处理消息的结果必须不同于零（0），否则 Skype 认为连接断开。**

当然，消息的默认返回值是 0。Skype 将从初始 ApiConnectSuccess 消息中获取零，并立即关闭句柄。当然，当我尝试使用手柄时会产生 1400！所以简单地设置

```
m.Result = new IntPtr(1); 
```

解决它。现在，我收到“拒绝访问”错误。多么有趣。

编辑：通过用我的句柄替换 IntPtr.Zero 来修复“访问被拒绝”（Win32 错误 5）：

```
SendMessageA(mHelper.SkypeAPIWindowHandle, MsgHelper.WM_COPYDATA, mHelper.MyHandle, ref cda) 
```

两个答案合二为一！

# nsis - 执行外部可执行文件以运行并等待它完成并使用 NSIS 继续设置

> ID：10876304
> 
> 赞同：1
> 
> 时间：2012-06-04T04:24:18.210
> 
> 标签：nsis

我是 NSIS 安装创建者的新手，我需要运行一个外部可执行文件，因为这是先决条件，一旦完成，我将继续安装。我尝试了以下代码，但它只是将 exe 复制到安装路径。

```
 Section "example" example
SetOutPath "$INSTDIR"
  MessageBox MB_OK \
    "The applications."
  File "Prerequisites\setup.exe"
  ExecWait '"exec" /i "$INSTDIR\setup.exe"  /passive'
  SetRebootFlag true
SectionEnd 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T06:16:30.133

仅当`exec.exe`最终用户系统上的路径中有 a 时才有效，请尝试`ExecWait '"$INSTDIR\setup.exe" /passive'`

# objective-c - 使用 AVPlayer 播放多个声音的问题（不是 AVAudioPlayer）

> ID：10876311
> 
> 赞同：0
> 
> 时间：2012-06-04T04:26:25.233
> 
> 标签：objective-c, xcode4, avfoundation

我正在尝试使用 AVFoundation 框架和 AVPlayerItem 在我的 iPhone 游戏中播放背景歌曲并且还具有音效。我已经在互联网上搜索了有关 AVPlayerItem 和 AVPlayer 的帮助，但我只找到有关 AVAudioPlayer 的内容。

背景歌曲播放正常，但是当角色跳跃时，我有2个问题：

1) 初始跳跃时（[player play] inside jump方法），跳跃音效打断背景音乐。

2）如果我再次尝试跳转，游戏会崩溃并出现错误“AVPlayerItem cannot be associated with more than one instance of AVPlayer”

我的教授告诉我为我想播放的每个声音创建一个新的 AVPlayer 实例，所以我很困惑。

我正在做数据驱动设计，所以我的声音文件列在 .txt 中，然后加载到 NSDictionary 中。

这是我的代码：

```
- (void) storeSoundNamed:(NSString *) soundName 
        withFileName:(NSString *) soundFileName
{
    NSURL *assetURL = [[NSURL alloc] initFileURLWithPath:[[NSBundle mainBundle] pathForResource:soundName ofType:soundFileName]];

    AVURLAsset *mAsset = [[AVURLAsset alloc] initWithURL:assetURL options:nil];

    AVPlayerItem *mPlayerItem = [AVPlayerItem playerItemWithAsset:mAsset];

    [soundDictionary setObject:mPlayerItem forKey:soundName];

    NSLog(@"Sound added.");
}

- (void) playSound:(NSString *) soundName
{
    // from .h: @property AVPlayer *mPlayer;
    // from .m: @synthesize mPlayer = _mPlayer;       

    _mPlayer = [[AVPlayer alloc] initWithPlayerItem:[soundDictionary valueForKey:soundName]];

    [_mPlayer play];
    NSLog(@"Playing sound.");
} 
```

如果我将此行从第二种方法移到第一种方法中：

```
_mPlayer = [[AVPlayer alloc] initWithPlayerItem:[soundDictionary valueForKey:soundName]]; 
```

游戏不崩溃，背景歌曲播放完美，但不播放跳跃音效，即使控制台显示“正在播放声音”。每次跳跃。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T23:07:01.693

我想到了。

错误消息告诉我我需要知道的一切：每个 AVPlayerItem 不能有多个 AVPlayer，这与我所学的相反。

无论如何，我没有将我的 AVPlayerItems 存储在 soundDictionary 中，而是将 AVURLAssets 存储在 soundDictionary 中，其中 soundName 作为每个 Asset 的键。然后我每次想播放声音时都创建了一个新的 AVPlayerItem*和AVPlayer。*

另一个问题是ARC。我无法跟踪每个不同项目的 AVPlayerItem，所以我必须制作一个 NSMutableArray 来存储 AVPlayerItem 和 AVPlayer。

这是固定代码：

```
- (void) storeSoundNamed:(NSString *) soundName 
        withFileName:(NSString *) soundFileName
{
    NSURL *assetURL = [[NSURL alloc] initFileURLWithPath:[[NSBundle mainBundle] pathForResource:soundName ofType:soundFileName]];

    AVURLAsset *mAsset = [[AVURLAsset alloc] initWithURL:assetURL options:nil];

    [_soundDictionary setObject:mAsset forKey:soundName];

    NSLog(@"Sound added.");
}

- (void) playSound:(NSString *) soundName
{
    // beforehand: @synthesize soundArray;
    // in init: self.soundArray = [[NSMutableArray alloc] init];

    AVPlayerItem *mPlayerItem = [AVPlayerItem playerItemWithAsset:[_soundDictionary valueForKey:soundName]];

    [self.soundArray addObject:mPlayerItem];

    AVPlayer *tempPlayer = [[AVPlayer alloc] initWithPlayerItem:mPlayerItem];

    [self.soundArray addObject:tempPlayer];

    [tempPlayer play];

    NSLog(@"Playing Sound.");
} 
```

# c# - C#串行端口线程，应用程序在一段时间后崩溃

> ID：10876319
> 
> 赞同：3
> 
> 时间：2012-06-04T04:28:31.480
> 
> 标签：c#

我正在编写一个从 COM 端口读取数据并显示在屏幕上的程序。当数据读取频率较低时，它工作得非常好，可以运行一整天。但是，当每秒发送数据时，程序每 30 分钟崩溃一次。错误代码是 c0000005 访问冲突。

```
 void Start()
     {
     _serialPort = new SerialPort(TempPortName, 9600, Parity.None, 8, StopBits.One);        
    _serialPort.Handshake = Handshake.None;
     _serialPort.ReadTimeout = 1000;
     _serialPort.ReadBufferSize = 100000;
    readThread = new Thread(Read);
     readThread.Start();        
     }

void Read()
    {
    string MessageSection = "";
    char[] end = {'\r'};    

    //string MessageSection = "";
    while (readData)
    {           
    Thread.Sleep(10);
        if (_serialPort.IsOpen)
        {

            string message = "test"; 

         try
                {
                    message = ((char)(_serialPort.ReadByte())).ToString();

                }
                catch
                {
                    message = "";
                }

                if (message != "")
                {

                    message = MessageSection + message; 

                    string[] MessageArray = message.Split(end);
                    if (!message.EndsWith("\r"))
                    {
                        MessageSection = MessageArray[MessageArray.Length - 1];                    
                    }
                    else
                    {
        if(message.Length>0)
        {
            doSomething();
        }
                        MessageSection = "";
                    }
                }
        else {
        }

        }
        else
        {
            try
            {
                _serialPort.Open();

            }

            catch
            {
                print("Error"); 
            }
        }
    }

    } 
```

我正在使用 Unity 3D，它与缓冲区大小有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T04:44:07.557

这不是您使用`while loop`. 您正在注册[`SerialPort.DataReceived`事件](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.datareceived.aspx)以接收端口上的传入数据。

这是来自 MSDN 的示例代码

```
using System;
using System.IO.Ports;

class PortDataReceived
{
    public static void Main()
    {
        SerialPort mySerialPort = new SerialPort("COM1");

        mySerialPort.BaudRate = 9600;
        mySerialPort.Parity = Parity.None;
        mySerialPort.StopBits = StopBits.One;
        mySerialPort.DataBits = 8;
        mySerialPort.Handshake = Handshake.None;

        mySerialPort.DataReceived += new SerialDataReceivedEventHandler(DataReceivedHandler);

        mySerialPort.Open();

        Console.WriteLine("Press any key to continue...");
        Console.WriteLine();
        Console.ReadKey();
        mySerialPort.Close();
    }

    private static void DataReceivedHandler(
                        object sender,
                        SerialDataReceivedEventArgs e)
    {
        SerialPort sp = (SerialPort)sender;
        string indata = sp.ReadExisting();
        Console.WriteLine("Data Received:");
        Console.Write(indata);
    }
} 
```

# primefaces - Primefaces Datatable 具有动态 p:column

> ID：10876322
> 
> 赞同：3
> 
> 时间：2012-06-04T04:28:47.807
> 
> 标签：primefaces

我想动态排列 p:column 即 p:column 标题值应该来自数据库，并根据数据库值增加或减少。请建议我..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T05:40:51.087

你应该使用`<p:columns`，看看展示[DataTable - Dynamic Columns](http://www.primefaces.org/showcase/ui/data/datatable/columns.xhtml)

这是展示中的代码片段

```
<p:dataTable id="cars" var="car" value="#{tableBean.carsSmall}">                    
    <p:columns value="#{tableBean.columns}" var="column" columnIndexVar="colIndex" 
                sortBy="#{car[column.property]}" filterBy="#{car[column.property]}">
        <f:facet name="header">
            #{column.header}
        </f:facet>

        #{car[column.property]}
    </p:columns>
</p:dataTable> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T13:28:56.497

我希望这段代码对你有帮助

**索引.xhtml**

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"> 
    <h:head>
        <title>Dynamic DataTable columns</title>
    </h:head>
    <h:body>
        <h:form>
             <p:dataTable id="cars" var="car" value="#{GenerateTable.test}">                      
                  <p:columns value="#{GenerateTable.columns}" var="column" columnIndexVar="colIndex">  
                         <f:facet name="header">  
                               #{column}  
                        </f:facet>  
                        <h:outputText value="#{car[colIndex]}"/>
                   </p:columns> 
              </p:dataTable>     
        </h:form>
     </h:body>
</html> 
```

**生成表.java**

```
import java.sql.*;
import java.util.*;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
@ManagedBean(name="GenerateTable")
@RequestScoped
public class generateTable 
{
    public static List<String> columns=new ArrayList<String>();
    public static ArrayList test=new ArrayList();   
    /*getter and setter for above variables*/
    public List<String> getColumns()
    {
        return columns;
    }
    public void setColumns(List<String> columns)
    {
        this.columns=columns;
    }
    public ArrayList getTest()
    {
        return test;
    }
    public void setTest(ArrayList test)
    {
        this.test=test;
    }
    /*end of getter and setter*/
    public generateTable()
    {
        dynamicColumns();
    }
     public void dynamicColumns()
    {
       test=new ArrayList<String>();
       columns=new ArrayList<String>();      

       try
       {
           Class.forName("com.mysql.jdbc.Driver");
           Connection con=DriverManager.getConnection("jdbc:mysql://localhost/db_test","root","");
           Statement stmt=con.createStatement();
           ResultSet result=stmt.executeQuery("select * from myTable"); 
           ResultSetMetaData md = result.getMetaData();
       int columnCount = md.getColumnCount();
           for(int i=1; i<=columnCount; i++)                            
        columns.add(md.getColumnName(i));    //adding column name dynamicly                 
           while(result.next())
           {
              ArrayList child=new ArrayList();
              for(int i=1;i<=columnCount;i++)
                  child.add(result.getString(i)); //denpends on column add the data
              test.add(child);              
           }
           result.close();
           con.close();
       }
       catch(Exception ex)
       {
           System.out.println(""+ex);
       }
    }
} 
```

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-01T13:38:25.680

如果您不知道要在数据表中显示多少列，可以使用：

```
List <Object[]> resultsValues = service.getResultsValues(...);

List <MyHeader> resultsHeader = service.getResultsHeader(...); 
```

*   每个 Object[] 代表一行。
*   每个 MyHeader 是一个`Object`表示列标题的

这是数据表：

```
<p:dataTable id="myTable" var="lineResult" 
            value="#{yourManagedBean.resultsValues}" paginatorAlwaysVisible="false"
            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
            paginator="true" rows="10" rowKey="#{lineResult}">
            <p:columns value="#{yourManagedBean.resultsHeader}" var="column"  columnIndexVar="i" >
                <f:facet name="header">
                    <h:outputText title="#{column.description}" value= "#{column.label}" />
                </f:facet>
                <h:outputText value= "#{lineResult[i]}" />
            </p:columns>
</p:dataTable> 
```

# python - 根据pygame中的点击更改图像

> ID：10876324
> 
> 赞同：1
> 
> 时间：2012-06-04T04:28:57.490
> 
> 标签：python, button, onclick, pygame

我已经完成了谷歌搜索并搜索了我的两本 python 初学者书籍以找到如何做到这一点。我认为这必须是一项简单的任务。基本上，我正在使用带有 python 的 pygame。

我希望如果我单击 button1_image，它会更改为 button1select_image，对吗？如果单击 button2_image，它会将 button1select_image 设置回 button1_image，并且 button2_image 会更改为 button2select_image。

所以我想知道它是一个简单的 if else 语句还是更复杂。显然，这些按钮稍后会做其他事情，但我找不到关于如何根据用户鼠标点击执行此类操作的教程。

```
# Button Mouse Click Image Change
# Demonstrates changing from one button image to another based on click of mouse.

from livewires import games, color

games.init(screen_width = 281, screen_height = 500, fps = 50)

button1_image = games.load_image("button1.png", transparent = False)
button1 = games.Sprite(image = button1_image, x = 28,y = 18)
games.screen.add(button1)

button1select_image = games.load_image("button1select.png", transparent = False)
button1select = games.Sprite(image = button1select_image, x = 28,y = 18)
games.screen.add(button1select)

button2_image = games.load_image("button2.png", transparent = False)
button2 = games.Sprite(image = button2_image, x = 56,y = 18)
games.screen.add(button2)

button2select_image = games.load_image("button2select.png", transparent = False)
button2select = games.Sprite(image = button2select_image, x = 56,y = 18)
games.screen.add(button2select)

games.screen.mainloop() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T20:47:56.957

在这里，我把它翻了出来，以展示鼠标是如何工作的。该行`if event.button == 1:`检查是否已按下鼠标左键，如果需要鼠标右键，请将 1 更改为 2。

```
import pygame, sys
from pygame.locals import *

TIMER = 30
SCREEN_X = 200
SCREEN_Y = 200

screen = pygame.display.set_mode((SCREEN_X, SCREEN_Y))
clock = pygame.time.Clock() #tick-tock

ending = button1 = button2 = False

corner1 = (28,18)  #Top Left corner of button 1
corner2 = (56,18)  #Top Left corner of button 2

image_length = 100 #length of the buttons
image_height = 100 #height of the buttons

counter = 0

#Main Loop:
while ending==False:
    counter+=1
    clock.tick(TIMER)
    for event in pygame.event.get():
        if event.type == KEYDOWN:
            if event.key == K_ESCAPE:
                ending=True # Time to leave
                print("Game Stopped Early by user")
        elif event.type == MOUSEBUTTONDOWN:
            if event.button == 1:
                mouse_x, mouse_y = event.pos
                if (mouse_x >= corner1[0]) and (mouse_x <= corner1[0]+image_length) and (mouse_y >= corner1[1]) and (mouse_y <= corner1[1]+image_height):
                    print ("Button one is selected")
                    button1=True
                    button2=False
                elif (mouse_x >= corner2[0]) and (mouse_x <= corner2[0]+image_length) and (mouse_y >= corner2[1]) and (mouse_y <= corner2[1]+image_height):
                    print ("Button two is selected")
                    button1=False
                    button2=True
                else:
                    print ("That's not a button")
                    button1=False
                    button2=False
    if counter == TIMER:  #prints the statements once a second
        counter=0
        if button1==True:
            print ("Button one is currently selected")
        elif button2==True:
            print ("Button two is currently selected")
        else:
            print ("No buttons currently selected") 
```

在底部的打印语句中。如果 button1 或 button2 变量分别为 ，则只需将所选图像用于按钮 1 或 2 `True`。否则，如果未选择任何图像，则您将两个图像都作为未选择的按钮。如果您不知道如何使用图像等，请在此处查看：http: [//www.pygame.org/docs/](http://www.pygame.org/docs/)这对我很有帮助。自己尝试一下，如果您仍然遇到问题，Stack Exchange 仍然会在这里解答您的问题 :)

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:15:22.700

这是一些伪代码：

```
selected_button = None
buttons = [button1, button2]

...

for event in pygame.event.get():
  ...
  if event.type == MOUSEBUTTONDOWN:
      for b in buttons:
          if b.rect.collidepoint(event.pos):
              if selected_button == b:
                  # unselect this button
              else:
                  # unselect the old button (if there's one) and select this one
  ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T06:22:40.753

看看这个示例菜单：[https](https://stackoverflow.com/a/10747990/341744) ://stackoverflow.com/a/10747990/341744 特别是他的代码：[https ://gist.github.com/2802185](https://gist.github.com/2802185)

它创建了一个类`Option`，当你鼠标悬停时它会改变颜色。您可以扩展它，因此单击时，按钮会调用一个函数。（即：`new_game()`等`show_options()`）

# ruby-on-rails - tds：无法使用 freetds.conf 文件中指定的服务器名连接到 mssql 服务器

> ID：10876329
> 
> 赞同：2
> 
> 时间：2012-06-04T04:29:38.093
> 
> 标签：ruby-on-rails, sql-server, sql-server-2008, freetds

我正在使用 freetds 从 ubuntu 连接到 mssql 服务器。首先，sql server 正确运行在 1433 端口。我可以远程登录它。以下命令也有效。我可以使用它查询表数据，

```
sqsh -H 192.168.10.249 -p 1433 -H xx -P xxxxxx 
```

但是，此命令不起作用，因此使我的 ror 应用程序崩溃。

```
sqsh -S developer -U xxx -P xxxxxxxxx 
```

这是 freetds.log 中的错误

```
1:24:59.068648 5010 (log.c:190):Starting log file for FreeTDS 0.82 on 2012-06-04 11:24:59 with debug flags 0xffff.
11:24:59.069259 5010 (iconv.c:197):names for ISO-8859-1: ISO-8859-1
11:24:59.069298 5010 (iconv.c:197):names for UTF-8: UTF-8
11:24:59.069317 5010 (iconv.c:197):names for UCS-2LE: UCS-2LE
11:24:59.069335 5010 (iconv.c:197):names for UCS-2BE: UCS-2BE
11:24:59.069352 5010 (iconv.c:363):iconv to convert client-side data to the "UTF-8" character set
11:24:59.069394 5010 (iconv.c:516):tds_iconv_info_init: converting "UTF-8"->"UCS-2LE"
11:24:59.069461 5010 (iconv.c:516):tds_iconv_info_init: converting "ISO-8859-1"->"UCS-2LE"
11:24:59.069492 5010 (net.c:836):tds7_get_instance_port(192.168.10.249, MSSQLSERVER)
11:25:00.070784 5010 (net.c:905):tds7_get_instance_port: timed out on try 0 of 16
11:25:01.072121 5010 (net.c:905):tds7_get_instance_port: timed out on try 1 of 16
11:25:02.073441 5010 (net.c:905):tds7_get_instance_port: timed out on try 2 of 16
11:25:03.074756 5010 (net.c:905):tds7_get_instance_port: timed out on try 3 of 16
...
11:25:15.095377 5010 (net.c:905):tds7_get_instance_port: timed out on try 15 of 16
11:25:15.095480 5010 (net.c:974):instance port is 0
11:25:15.095506 5010 (login.c:418):invalid port number
11:25:15.095532 5010 (mem.c:563):tds_free_all_results()
11:25:15.095580 5010 (ct.c:630):leaving ct_connect() returning 0
11:25:15.095605 5010 (ct.c:334):ct_con_props() action = CS_GET property = 9143
11:25:15.095630 5010 (ct.c:1865):ct_con_drop()
11:25:15.095652 5010 (ct.c:242):ct_exit() 
```

这是我的 freetds.conf 文件

```
[global]
;   tds version = 4.2

    # Whether to write a TDSDUMP file for diagnostic purposes
    # (setting this to /tmp is insecure on a multi-user system)
;   dump file = /tmp/freetds.log
;   debug flags = 0xffff

    # Command and connection timeouts
;   timeout = 10
;   connect timeout = 10

    text size = 64512
[egServer50]
    host = symachine.domain.com
    port = 5000
    tds version = 5.0

[developer]
    host = 192.168.10.249
     port = 1433
    #instance = MSSQLSERVER 
    tds version = 8.0
    client charset = UTF-8
    dump file = /home/daisy/freetds.log
    dump file append = yes
    debug flags = 0xffff 
```

从日志输出中，我可以看到在这种情况下程序没有正确读取 sql server 端口，它读取 0 这是错误的。

它还输出一些与编码有关的信息。所以我想这可能与翻译问题有关。

# php - Virtuemart - 将功能插入结帐

> ID：10876333
> 
> 赞同：0
> 
> 时间：2012-06-04T04:30:16.893
> 
> 标签：php, virtuemart

我目前正在使用 Joomla 1.7.5 和 Virtuemart 2.0.2，需要拦截结帐功能并执行一些操作，然后才能进入“谢谢”页面。

我需要访问的变量是用户的 Joomla 组的 VM 订单 ID（和项目），也许还有订单/用户的运输详细信息。然后，我会将一些项目注入我为跟踪一些数据而制作的自定义表中。

有没有人知道结帐的保存位置，以便我可以插入我的函数，以及如何访问我需要的变量（也许获取 VM 订单 ID 并从那里查询项目等.. 并从 $ 获取 joomla 用户组this->user->groups（如果可用）。/

任何指针将不胜感激。

谢谢，

银虎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:08:03.817

结帐类驻留在`joomla\administrator\components\com_virtuemart\classes\ps_checkout.php`.

# zsh - 错误命令后zsh中的提示以↑255开头？

> ID：10876336
> 
> 赞同：0
> 
> 时间：2012-06-04T04:30:42.033
> 
> 标签：zsh

我是 zsh 的新手，正在使用 ZSH_THEME="jnrowe"，它在一段时间内效果很好。

它开始了，我得到一个如下所示的提示：

```
Ξ ~ → 
```

但是如果我运行如下命令：`ssh`它将变为：

```
↑255 ~ → 
```

我怀疑有些东西弄乱了在第一个中创建三重栏的角色，但不知道到底发生了什么。我可以选择一个不同的主题，但我注意到他们中的大多数在提示中有一个花哨的角色都会做同样的事情。

这是一个特殊的错误代码还是什么？还是只是有些无聊？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:38:16.033

我不知道提示主题“jnrowe”（它不是默认 zsh 发行版 afaics 的一部分），但我怀疑此提示在其输出中包含最后一个命令的错误代码。

尝试运行“ls”或“true”，数字会消失。运行“false”，它将是 1，运行不带参数的 ssh，它将是 255。zsh 会保留这个值，直到你运行下一个命令，所以多次按 ENTER 不会清除它。

（这将与存储在 shell 变量 "$?" 中的值相同）

# javascript - 将 JS 正则表达式捕获组存储在数组中的最佳方法？

> ID：10876338
> 
> 赞同：15
> 
> 时间：2012-06-04T04:31:07.710
> 
> 标签：javascript, regex

正是标题所要求的。在解释我的问题时，我将提供一些示例。

测试字符串：

```
var test = "#foo# #foo# bar #foo#"; 
```

说，我想提取`#`（所有`foo`s 但不是`bar`）之间的所有文本。

```
var matches = test.match(/#(.*?)#/g); 
```

如上所述使用`.match`，它将存储所有匹配项，但它会简单地丢弃看起来的捕获组。

```
var matches2 = /#(.*?)#/g.exec(test); 
```

该`.exec`方法显然仅返回数组位置中第一个结果的匹配字符串，以及该位置`0`中我唯一捕获的匹配组`1`。

我已经筋疲力尽了，谷歌和 MDN 都在寻找无济于事的答案。

所以，我的问题是，有没有更好的方法来存储匹配的捕获组而不是循环遍历它`.exec`并调用`array.push`来存储捕获的组？

我对上述测试的预期数组应该是：

```
 [0] => (string) foo
 [1] => (string) foo
 [2] => (string) foo 
```

接受纯 JS 和 jQuery 答案，如果您使用`console.log`. =]

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-04T04:53:28.957

你也可以`.exec`像下面这样使用来构建一个数组

```
var arr = [],
    s = "#foo# #bar# #test#",
    re = /#(.*?)#/g,
    item;

while (item = re.exec(s))
    arr.push(item[1]);

alert(arr.join(' '));​ 
```

[工作小提琴](http://jsfiddle.net/joycse06/WDKhX/)

从[这里找到](https://stackoverflow.com/a/10864877/344304)

好吧，它仍然有一个循环，如果你不想要一个循环，那么我认为你必须使用`.replace()`. 在这种情况下，代码将像

```
var arr = [];
var str = "#foo# #bar# #test#"
str.replace(/#(.*?)#/g, function(s, match) {
                           arr.push(match);
                        }); 
```

[检查MDN DOC](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/exec)中的这些行，它解释了您对我认为如何`exec`更新`lastIndex`属性的查询，

> 如果您的正则表达式使用“g”标志，您可以多次使用 exec 方法在同一字符串中查找连续匹配项。
> 
> 当您这样做时，搜索将从正则表达式的 lastIndex 属性指定的 str 的子字符串开始（测试也将推进 lastIndex 属性）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T04:43:02.757

我不确定这是否是您正在寻找的答案，但您可以尝试以下代码：

```
var matches = [];

var test = "#foo# #foo# bar #foo#";

test.replace(/#(.*?)#/g, function (string, match) {
    matches.push(match);
});

alert(JSON.stringify(matches));
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T05:08:20.717

`data.replace(/.*?#(.*?#)/g, '$1').split(/#/)`
没有循环，没有函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-01T15:29:20.537

如果有人带着类似的需求到达，我需要一个 Django 风格的 URL 配置处理程序的匹配函数，它可以将路径“参数”传递给控制器​​。我想出了这个。当然，如果匹配 '$'，它不会很好地工作，但它不会在 '$1.00' 上中断。它比必要的要明确一点。您可以只从 else 语句中返回matchedGroups，而不必为for循环测试而烦恼，但是;; 在循环声明的中间有时会吓坏人们。

```
var url = 'http://www.somesite.com/calendar/2014/june/6/';
var calendarMatch = /^http\:\/\/[^\/]*\/calendar\/(\d*)\/(\w*)\/(\d{1,2})\/$/;

function getMatches(str, matcher){
    var matchedGroups = [];
    for(var i=1,groupFail=false;groupFail===false;i++){
        var group = str.replace(matcher,'$'+i);

        groupFailTester = new RegExp('^\\$'+i+'$');

        if(!groupFailTester.test(group) ){
            matchedGroups.push(group);
        }
        else {
            groupFail = true;
        }
    }
    return matchedGroups;
}

console.log( getMatches(url, calendarMatch) ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T05:04:28.660

另一个想法，尽管 exec 一样有效。

```
var s= "#foo# #foo# bar #foo#";
s= s.match(/#([^#])*#/g).join('#').replace(/^#+|#+$/g, '').split(/#+/); 
```

# objective-c - TinyOS 定期 Bcast AMSend 未收到

> ID：10876339
> 
> 赞同：0
> 
> 时间：2012-06-04T04:31:33.620
> 
> 标签：objective-c, broadcasting, transmission, tinyos

我想通过这个程序定期发送消息，消息广播很好，我收到了 sendDone 消息。问题是这些消息没有被很好地接收。我真的很感激任何帮助找出问题所在？

这是代码（请忽略未使用的变量，因为我已经删除了很多代码）：

```
includes lqer;    

module lqer_M{
 provides {
           interface SplitControl;
           interface AMSend[am_id_t id];
           interface Receive[uint8_t id];

       };

    uses {
        interface SplitControl as AMControl;

        interface Timer<TMilli> as LQERTimer;

        interface Random;
        interface AMPacket;
        interface AMSend as SendPacket;

        interface Receive as ReceivePacket;

            interface PacketAcknowledgements;
         interface Packet;

    }
}
implementation{

        message_t lqer_msg_;
        message_t* p_lqer_msg_;
        lqer_table l_table[LQER_FT_SIZE];

        node_info info;
        uint8_t max=0, Pos=0;
        message_t* newADV;
        bool busy = FALSE;

    command error_t SplitControl.start() {
     int i,j;
     p_lqer_msg_ = &lqer_msg_;
    info.hop=1000;
    for(i=0; i<16; i++){
        info.m[i]=1;
    }

    for(i = 0; i< LQER_FT_SIZE; i++) { 
             l_table[i].nid = INVALID_NODE_ID;
        l_table[i].hop  = 1000;
        for (j=0; j<16; j++)
        {            
            l_table[i].m[j]=1;

        } 
        }

        call AMControl.start();
        return SUCCESS;
    }
    command error_t SplitControl.stop() {
        call AMControl.stop();
        return SUCCESS;
    }    

  event void AMControl.startDone( error_t e ) { 
    if ( e == SUCCESS ) { 
      call LQERTimer.startPeriodic( LQER_DEFAULT_PERIOD ); 
      signal SplitControl.startDone(e); 
    } else { 
      call AMControl.start(); 
    } 
  } 

  event void AMControl.stopDone(error_t e){ 
    call LQERTimer.stop(); 
    signal SplitControl.stopDone(e); 
  }

event void LQERTimer.fired() {
        message_t* lqer_adv_msg;

        lqer_adv_hdr* new_ADV=(lqer_adv_hdr*)(lqer_adv_msg->data);
        am_addr_t me = call AMPacket.address();

        if (me==0001){
            new_ADV->src = me;

            new_ADV->hop = 0;

            newADV= (message_t*)(&new_ADV);

            dbg("GRAPE_DBG", "%s\t LQER: Sink address: %d\n", sim_time_string(), me);
                  call PacketAcknowledgements.requestAck(newADV);
            call SendPacket.send( AM_BROADCAST_ADDR, newADV, call Packet.payloadLength(newADV) );

        }

  } 

event message_t* ReceivePacket.receive( message_t* p_msg, void* payload, uint8_t len ) {

    lqer_adv_hdr* lqer_hdr = (lqer_adv_hdr*)(p_msg->data);
    lqer_adv_hdr* msg_lqer_hdr =(lqer_adv_hdr*)(p_lqer_msg_->data);
    uint8_t i;

    lqer_adv_hdr* new_ADV =(lqer_adv_hdr*)(p_lqer_msg_->data);

    dbg("GRAPE_DBG", "%s\t ADV: RecievedADV dst: \n", sim_time_string());
       msg_lqer_hdr->src = lqer_hdr->src; 
       msg_lqer_hdr->hop = lqer_hdr->hop;

        new_ADV->src = msg_lqer_hdr->src;

        new_ADV->hop = msg_lqer_hdr->hop;

        newADV= (message_t*)(&new_ADV);
        call PacketAcknowledgements.requestAck( newADV );
        call SendPacket.send( AM_BROADCAST_ADDR, newADV, call Packet.payloadLength(newADV) );

    return p_msg; 

}

 command error_t AMSend.cancel[am_id_t id](message_t* msg) { 
    return call SendPacket.cancel(msg); 
  } 

  command uint8_t AMSend.maxPayloadLength[am_id_t id]() { 
    return call Packet.maxPayloadLength(); 
  } 

  command void* AMSend.getPayload[am_id_t id](message_t* m, uint8_t len) { 
    return call Packet.getPayload(m, 0); 
  } 

  default event void AMSend.sendDone[uint8_t id](message_t* msg, error_t err) { 
    return; 
  } 

  default event message_t* Receive.receive[am_id_t id](message_t* msg, void* payload, uint8_t len) { 
    return msg; 
  }
 command error_t AMSend.send[am_id_t id](am_addr_t addr, message_t* msg, uint8_t len)
  {

    call SendPacket.send( TOS_BCAST_ADDR , msg, call Packet.payloadLength(msg) );

    return SUCCESS;

  }
  event void SendPacket.sendDone(message_t* p_msg, error_t e) {

    dbg("GRAPE_DBG", "%s\t ADV: SendDone\n", sim_time_string());

        if( p_msg== newADV)
         busy=FALSE;

 } 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:40:18.910

您应该查看 sendDone 事件中的错误值是什么。有可能send返回成功，之后发送失败，在sendDone中返回错误码。这些错误包括 ENOACK、ENOMEM 等。

此外，请检查您的目的地地址和接收器的 AM 地址。

# c++ - 等效于 Linux 上的 SetThreadPriority (pthreads)

> ID：10876342
> 
> 赞同：18
> 
> 时间：2012-06-04T04:32:33.683
> 
> 标签：c++, c, linux, winapi, pthreads

鉴于以下代码，我想知道在 linux 中假设 pthread 甚至使用 Boost.Thread API 的等效代码是什么。

```
#include <windows.h>

int main()
{
   SetThreadPriority(GetCurrentThread(),THREAD_PRIORITY_HIGHEST);
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-04T05:46:58.360

相当于`SetThreadPriority`linux 中的`pthread_setschedprio(pthread_t thread, int priority)`.

检查[手册页](http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_setschedprio.html)。

编辑：这是等效的示例代码：

```
#include <pthread.h>

int main()
{
    pthread_t thId = pthread_self();
    pthread_attr_t thAttr;
    int policy = 0;
    int max_prio_for_policy = 0;

    pthread_attr_init(&thAttr);
    pthread_attr_getschedpolicy(&thAttr, &policy);
    max_prio_for_policy = sched_get_priority_max(policy);

    pthread_setschedprio(thId, max_prio_for_policy);
    pthread_attr_destroy(&thAttr);

    return 0;
} 
```

此示例适用于默认调度策略 SCHED_OTHER。

编辑：线程属性必须在使用前初始化。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-06T06:43:08.097

你要：

```
#include <pthread.h>

int main()
{
    int policy;
    struct sched_param param;

    pthread_getschedparam(pthread_self(), &policy, &param);
    param.sched_priority = sched_get_priority_max(policy);
    pthread_setschedparam(pthread_self(), policy, &param);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-13T08:09:35.233

[`pthread_setschedparam(3)`](http://man7.org/linux/man-pages/man3/pthread_setschedparam.3.html)正如其他各种答案所提到的，POSIX 标准包括。在谈到实时线程时，大多数情况下都会提到这个 POSIX 线程库函数，但 POSIX 标准并不仅仅将其使用限制在实时线程领域。然而，在 Linux 中，只有在使用实时调度类`SCHED_FIFO`或`SCHED_RR`只有那些调度类允许优先级参数有多个值时，它的使用才真正有意义。请参阅此[堆栈溢出答案](https://stackoverflow.com/a/3663250/709646)以获取说明。

幸运或不幸的是，这是一个观点问题，似乎主流 Linux POSIX 线程库实现（过时的 LinuxThreads 和当前的 NPTL 实现）都不完全符合 POSIX，因为“好的价值”不是特定于进程而是特定于线程参数，因此您似乎可以使用它[`setpriority(3)`](http://man7.org/linux/man-pages/man2/setpriority.2.html)来更改 Linux 中线程的好坏。此声明基于[`pthreads(7)`](http://man7.org/linux/man-pages/man7/pthreads.7.html)手册页中的兼容性说明（在该页面中搜索“nice value”）；我还没有在实践中实际测试过（直接做的事情）。

如果您决定使用 POSIX 不合规的方式来更改线程的好坏，请注意，有可能有人决定修复提到的不合规性，在这种情况下，似乎无法更改 Linux 中的线程优先级，如果使用正常的调度类 ( `SCHED_OTHER`)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-04T05:05:18.803

类似`pthread_setschedparam()`政策和优先级的组合。

我想您会使用`SCHED_FIFO, SCHED_RR`可以指定线程优先级的策略。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-03T20:32:37.623

对于那些可能正在搜索基于 BSD 的 OS 解决方案（例如 MacOS 或 iOS）的人，您可能需要考虑在必要时使用 mach 而不是 POSIX 等效项来设置线程的优先级。

```
#include <mach/mach_init.h>
#include <mach/thread_policy.h>
#include <mach/sched.h>
#include <pthread.h>

int set_realtime(int period, int computation, int constraint) {
    struct thread_time_constraint_policy ttcpolicy;
    int ret;
    thread_port_t threadport = pthread_mach_thread_np(pthread_self());

    ttcpolicy.period=period; // HZ/160
    ttcpolicy.computation=computation; // HZ/3300;
    ttcpolicy.constraint=constraint; // HZ/2200;
    ttcpolicy.preemptible=1;

    if ((ret=thread_policy_set(threadport,
        THREAD_TIME_CONSTRAINT_POLICY, (thread_policy_t)&ttcpolicy,
        THREAD_TIME_CONSTRAINT_POLICY_COUNT)) != KERN_SUCCESS) {
            fprintf(stderr, "set_realtime() failed.\n");
            return 0;
    }
    return 1;
} 
```

来源：[https ://developer.apple.com/library/content/documentation/Darwin/Conceptual/KernelProgramming/scheduler/scheduler.html](https://developer.apple.com/library/content/documentation/Darwin/Conceptual/KernelProgramming/scheduler/scheduler.html)

# php - 在 CakePHP 中使用 Coda 2（或 Coda，就此而言）预览功能

> ID：10876344
> 
> 赞同：1
> 
> 时间：2012-06-04T04:32:38.817
> 
> 标签：php, cakephp, mamp, coda

我正在使用 Coda 2 和 MAMP Pro。我建立的许多网站都非常适合这对，而且当它工作时，它就可以工作。通过允许我指定一个特定于站点的 URL，然后让 Coda 知道那个 URL 是什么，预览功能非常棒。直到我开始使用 CakePHP...

问题是说我指定了 URL“myawesomesite”并将其指向我在 MAMP Pro 中的本地站点目录，然后运行服务器。我可以导航到“http://myawesomesite:8888”，一切正常，即使在使用 CakePHP 的网站上也是如此。但是，当我在 Coda 中单击“预览”时，即使在指定了正确的本地 URL 之后，Coda 也会尝试将文件结构（在大多数情况下应该如此）附加到 URL。这意味着我得到一个这样的 URL：“http://myawesomesite:8888/app/View/Passes/index.ctp”

有没有办法覆盖 Coda 2 预览功能的正常 URL 格式？还是有其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:56:37.077

我也使用 Coda 2 和 CakePHP，也有同样的问题。我已经搜索了很多，我 99.9% 肯定没有办法绕过它。许多在 Coda 中使用 Web 框架的人都有同样的问题，因此向 Coda 询问该功能可能是值得的——他们的响应速度非常快。

在其他解决方案方面，我已经开始使用 Live Reload (http://livereload.com/)。我使用两台显示器，在一个屏幕上打开 Coda，在另一个屏幕上打开 Firefox。使用 Live Reload，每当您在 Coda 中保存文件时，Firefox 都会刷新并显示您的更改。无需切换应用程序或按任何键，只需编码并浏览您的另一个窗口即可查看您的更改。它非常棒，但需要两台显示器或至少一个大屏幕才能正常工作。

# c - 结构初始化导致段错误

> ID：10876345
> 
> 赞同：2
> 
> 时间：2012-06-04T04:32:48.340
> 
> 标签：c, struct, gdb, valgrind

以下代码会导致分段错误。可执行文件名为“./struct”

```
#include <stdio.h>
#define VERSION_NUMBER_LEN 32
#define MAX_DESCRIPTION_COUNT 32
#define DESCRIPTION_LEN 128
int main(void)
{
    struct foo {
        char number[VERSION_NUMBER_LEN + 1];
        char description[MAX_DESCRIPTION_COUNT][DESCRIPTION_LEN];
    };

    struct foo asdf = {
        "1.1", { "clap", "clap", "stomp", NULL }
    };

    struct foo hjkl = {
        "1.2", { "clop", "clop", "stamp", NULL }
    };

    int i;
    printf( "%s\n", asdf.number );
    for( i = 0; (asdf.description)[i] != NULL; i++ ){
        printf( "\t%s\n", (asdf.description)[i]);
    }
    printf("\n");
    printf( "%s\n", hjkl.number );
    for( i = 0; (hjkl.description)[i] != NULL; i++ ){
        printf( "\t%s\n", (hjkl.description)[i]);
    }
} 
```

输出如下所示：

```
1.1
    clap
    clap
    stomp

��
    N���~�����������ջ�����e���t�����������A���P���b���������������̽��㽊����,���V���g���y���������������̾��    ���k�����������Ͽ��迊�
    迊�

    ome/tiger
    56
    y
    vZxy/ssh
    ptop:/tmp/.ICE-unix/2710
    usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:~/bin:~/vitetris-0.3.6:/var/lib/gems/1.8/bin/
    baz
    GNOME_KEYRING_PID=2692
    t \w\n\$
    XDG_DATA_DIRS=/usr/share/gnome:/usr/local/share/:/usr/share/
    9a6bf0ef61ded7872065094fca55d1
    se
Segmentation fault 
```

我跑了 valgrind：

```
$ valgrind -v --leak-check=full --track-origins=yes ./struct  

<snip>

==15228== Conditional jump or move depends on uninitialised value(s)
==15228==    at 0x402605B: __GI_strlen (mc_replace_strmem.c:284)
==15228==    by 0x408A79E: vfprintf (vfprintf.c:1617)
==15228==    by 0x40912BF: printf (printf.c:35)
==15228==    by 0x8048910: main (in /home/tiger/dev/development/c/play/struct)
==15228==  Uninitialised value was created by a stack allocation
==15228==    at 0x4060B01: (below main) (libc-start.c:96)
==15228==
==15228== Conditional jump or move depends on uninitialised value(s)
==15228==    at 0x4026067: __GI_strlen (mc_replace_strmem.c:284)
==15228==    by 0x408A79E: vfprintf (vfprintf.c:1617)
==15228==    by 0x40912BF: printf (printf.c:35)
==15228==    by 0x8048910: main (in /home/tiger/dev/development/c/play/struct)
==15228==  Uninitialised value was created by a stack allocation
==15228==    at 0x4060B01: (below main) (libc-start.c:96)
==15228==
==15228== Invalid read of size 1
==15228==    at 0x4026058: __GI_strlen (mc_replace_strmem.c:284)
==15228==    by 0x408A79E: vfprintf (vfprintf.c:1617)
==15228==    by 0x40912BF: printf (printf.c:35)
==15228==    by 0x8048910: main (in /home/tiger/dev/development/c/play/struct)
==15228==  Address 0xbec1007c is not stack'd, malloc'd or (recently) free'd
==15228==
==15228==
==15228== Process terminating with default action of signal 11 (SIGSEGV)
==15228==  Access not within mapped region at address 0xBEC1007C
==15228==    at 0x4026058: __GI_strlen (mc_replace_strmem.c:284)
==15228==    by 0x408A79E: vfprintf (vfprintf.c:1617)
==15228==    by 0x40912BF: printf (printf.c:35)
==15228==    by 0x8048910: main (in /home/tiger/dev/development/c/play/struct)
==15228==  If you believe this happened as a result of a stack
==15228==  overflow in your program's main thread (unlikely but
==15228==  possible), you can try to increase the size of the
==15228==  main thread stack using the --main-stacksize= flag.
==15228==  The main thread stack size used in this run was 8388608.
==15228== Syscall param write(buf) points to uninitialised byte(s)
==15228==    at 0x4107DC3: __write_nocancel (syscall-template.S:82)
==15228==    by 0x40B0A1E: new_do_write (fileops.c:530)
==15228==    by 0x40B0D35: _IO_do_write@@GLIBC_2.1 (fileops.c:503)
==15228==    by 0x40B181C: _IO_file_overflow@@GLIBC_2.1 (fileops.c:881)
==15228==    by 0x40B2DED: _IO_flush_all_lockp (genops.c:849)
==15228==    by 0x40B3A4F: _IO_cleanup (genops.c:1010)
==15228==    by 0x41670F0: ??? (in /lib/tls/i686/cmov/libc-2.11.1.so)
==15228==    by 0x401F4F3: _vgnU_freeres (vg_preloaded.c:62)
==15228==    by 0xBEC0D5F7: ???
==15228==    by 0x408A79E: vfprintf (vfprintf.c:1617)
==15228==    by 0x40912BF: printf (printf.c:35)
==15228==    by 0x8048910: main (in /home/tiger/dev/development/c/play/struct)
==15228==  Address 0x402a054 is not stack'd, malloc'd or (recently) free'd
==15228==  Uninitialised value was created by a stack allocation
==15228==    at 0x4060B01: (below main) (libc-start.c:96)

<snip>

==15228== HEAP SUMMARY:
==15228==     in use at exit: 0 bytes in 0 blocks
==15228==   total heap usage: 0 allocs, 0 frees, 0 bytes allocated
==15228==
==15228== All heap blocks were freed -- no leaks are possible
==15228==
==15228== ERROR SUMMARY: 7 errors from 4 contexts (suppressed: 12 from 7)
==15228==
==15228== 1 errors in context 1 of 4:
==15228== Syscall param write(buf) points to uninitialised byte(s)
==15228==    at 0x4107DC3: __write_nocancel (syscall-template.S:82)
==15228==    by 0x40B0A1E: new_do_write (fileops.c:530)
==15228==    by 0x40B0D35: _IO_do_write@@GLIBC_2.1 (fileops.c:503)
==15228==    by 0x40B181C: _IO_file_overflow@@GLIBC_2.1 (fileops.c:881)
==15228==    by 0x40B2DED: _IO_flush_all_lockp (genops.c:849)
==15228==    by 0x40B3A4F: _IO_cleanup (genops.c:1010)
==15228==    by 0x41670F0: ??? (in /lib/tls/i686/cmov/libc-2.11.1.so)
==15228==    by 0x401F4F3: _vgnU_freeres (vg_preloaded.c:62)
==15228==    by 0xBEC0D5F7: ???
==15228==    by 0x408A79E: vfprintf (vfprintf.c:1617)
==15228==    by 0x40912BF: printf (printf.c:35)
==15228==    by 0x8048910: main (in /home/tiger/dev/development/c/play/struct)
==15228==  Address 0x402a054 is not stack'd, malloc'd or (recently) free'd
==15228==  Uninitialised value was created by a stack allocation
==15228==    at 0x4060B01: (below main) (libc-start.c:96)
==15228==
==15228==

==15228== 1 errors in context 2 of 4:
==15228== Invalid read of size 1
==15228==    at 0x4026058: __GI_strlen (mc_replace_strmem.c:284)
==15228==    by 0x408A79E: vfprintf (vfprintf.c:1617)
==15228==    by 0x40912BF: printf (printf.c:35)
==15228==    by 0x8048910: main (in /home/tiger/dev/development/c/play/struct)
==15228==  Address 0xbec1007c is not stack'd, malloc'd or (recently) free'd
==15228==
==15228==
==15228== 1 errors in context 3 of 4:
==15228== Conditional jump or move depends on uninitialised value(s)
==15228==    at 0x402605B: __GI_strlen (mc_replace_strmem.c:284)
==15228==    by 0x408A79E: vfprintf (vfprintf.c:1617)
==15228==    by 0x40912BF: printf (printf.c:35)
==15228==    by 0x8048910: main (in /home/tiger/dev/development/c/play/struct)
==15228==  Uninitialised value was created by a stack allocation
==15228==    at 0x4060B01: (below main) (libc-start.c:96)
==15228==
==15228==
==15228== 4 errors in context 4 of 4:
==15228== Conditional jump or move depends on uninitialised value(s)
==15228==    at 0x4026067: __GI_strlen (mc_replace_strmem.c:284)
==15228==    by 0x408A79E: vfprintf (vfprintf.c:1617)
==15228==    by 0x40912BF: printf (printf.c:35)
==15228==    by 0x8048910: main (in /home/tiger/dev/development/c/play/struct)
==15228==  Uninitialised value was created by a stack allocation
==15228==    at 0x4060B01: (below main) (libc-start.c:96)
==15228==
--15228--
--15228-- used_suppression:     12 dl-hack3-cond-1
==15228==
==15228== ERROR SUMMARY: 7 errors from 4 contexts (suppressed: 12 from 7) 
```

好的......所以我有几个内存位置，valgrind 显示为未初始化，但我不明白......内部的结构和字符串是如何静态定义的，并且结构的每个实例都被显式声明。

我认为当访问第二个结构（hjkl）中的元素之一时会发生分段错误。

跑gdb...

```
(gdb) p asdf
$1 = {number = "1.1", '\000' <repeats 29 times>, description = {"clap", '\000' <repeats 123 times>, "clap", '\000' <repeats 123 times>, 
"stomp", '\000' <repeats 122 times>, '\000' <repeats 127 times> <repeats 29 times>}}

(gdb) p hjkl
$2 = {number = "1.2", '\000' <repeats 29 times>, description = {"clop", '\000' <repeats   123 times>, "clop", '\000' <repeats 123 times>, 
"stamp", '\000' <repeats 122 times>, '\000' <repeats 127 times> <repeats 29 times>}} 
```

我只是没有看到导致分段错误的原因......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T04:47:29.823

你的测试`(asdf.description)[i] != NULL`失败了，永远不会是真的。这是修复：

```
#include <stdio.h>
#define VERSION_NUMBER_LEN 32
#define MAX_DESCRIPTION_COUNT 32
#define DESCRIPTION_LEN 128
int main(void)
{
    struct foo {
        char number[VERSION_NUMBER_LEN + 1];
        char description[MAX_DESCRIPTION_COUNT][DESCRIPTION_LEN];
    };

    struct foo asdf = {
        "1.1", { "clap", "clap", "stomp", "" }
    };

    struct foo hjkl = {
        "1.2", { "clop", "clop", "stamp", "" }
    };

    int i;
    printf( "%s\n", asdf.number );
    for( i = 0; (asdf.description)[i][0] != 0; i++ ){
        printf( "\t%s\n", (asdf.description)[i]);
    }
    printf("\n");
    printf( "%s\n", hjkl.number );
    for( i = 0; (hjkl.description)[i][0] != 0; i++ ){
        printf( "\t%s\n", (hjkl.description)[i]);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T04:50:01.853

问题不在于您的初始化字符串本身，而在于字符数组与字符指针的混淆。

特别是，这不会像您认为的那样：

```
struct foo asdf = {
    "1.1", { "clap", "clap", "stomp", NULL }
}; 
```

您正在`foo::description[][]`使用字符串 clap、clap 和 stomp OK 进行初始化，但随后您将第二个字符串的第一个*字符*`NULL`分配给. 如果您分配给指针，这将起作用，但是您尝试转换`NULL`为字符数组而不是将指向字符的指针设置为`NULL`，如果这有任何意义的话。

您正在检查*指针*是否为 NULL，因为数组是预先声明的，所以它永远不会是。

所以简单地改变

```
for( i = 0; (hjkl.description)[i] != NULL; i++ ){ 
```

到

```
for( i = 0; *(hjkl.description)[i] != NULL; i++ ){ 
```

也就是说，检查数组中每个`NULL` *字符串*的第一个索引中的字符，而不是尝试检查字符指针本身的（不可能的）条件是`NULL`.

最终完成的代码：

```
#include <stdio.h>
#define VERSION_NUMBER_LEN 32
#define MAX_DESCRIPTION_COUNT 32
#define DESCRIPTION_LEN 128
int main(void)
{
    struct foo {
        char number[VERSION_NUMBER_LEN + 1];
        char description[MAX_DESCRIPTION_COUNT][DESCRIPTION_LEN];
    };

    struct foo asdf = {
        "1.1", { "clap", "clap", "stomp", NULL }
    };

    struct foo hjkl = {
        "1.2", { "clop", "clop", "stamp", NULL }
    };

    int i;
    printf( "%s\n", asdf.number );
    for( i = 0; *(asdf.description)[i] != NULL; i++ ){
        printf( "\t%s\n", (asdf.description)[i]);
    }
    printf("\n");
    printf( "%s\n", hjkl.number );
    for( i = 0; *(hjkl.description)[i] != NULL; i++ ){
        printf( "\t%s\n", (hjkl.description)[i]);
    }
} 
```

* * *

如果结构如下所示，您的代码*将起作用：*

```
struct foo {
    char number[VERSION_NUMBER_LEN + 1];
    char *description[MAX_DESCRIPTION_COUNT];
}; 
```

基本上，（据我所知）没有真正需要对实际描述字符数组本身进行硬编码，只需要对它们的数量进行硬编码。您的其余代码将按原样工作。

此外，如果您在编译期间查看警告（假设在大多数现代 C 编译器上`NULL`定义为`((void *)0)`），您将收到以下警告：

```
test.c:13:43: warning: incompatible pointer to integer conversion initializing
      'char' with an expression of type 'void *';
        "1.1", { "clap", "clap", "stomp", NULL }
                                          ^~~~
/usr/include/stdio.h:82:14: note: expanded from:
#define NULL __DARWIN_NULL
             ^
/usr/include/sys/_types.h:91:23: note: expanded from:
#define __DARWIN_NULL ((void *)0)
                      ^~~~~~~~~~~
test.c:13:43: warning: suggest braces around initialization of subobject
      [-Wmissing-braces]
        "1.1", { "clap", "clap", "stomp", NULL }
                                          ^~~~
/usr/include/stdio.h:82:14: note: expanded from:
#define NULL __DARWIN_NULL
             ^
/usr/include/sys/_types.h:91:23: note: expanded from:
#define __DARWIN_NULL ((void *)0)
                      ^~~~~~~~~~~
test.c:17:43: warning: incompatible pointer to integer conversion initializing
      'char' with an expression of type 'void *';
        "1.2", { "clop", "clop", "stamp", NULL }
                                          ^~~~
/usr/include/stdio.h:82:14: note: expanded from:
#define NULL __DARWIN_NULL
             ^
/usr/include/sys/_types.h:91:23: note: expanded from:
#define __DARWIN_NULL ((void *)0)
                      ^~~~~~~~~~~
test.c:17:43: warning: suggest braces around initialization of subobject
      [-Wmissing-braces]
        "1.2", { "clop", "clop", "stamp", NULL }
                                          ^~~~
/usr/include/stdio.h:82:14: note: expanded from:
#define NULL __DARWIN_NULL
             ^
/usr/include/sys/_types.h:91:23: note: expanded from:
#define __DARWIN_NULL ((void *)0)
                      ^~~~~~~~~~~
4 warnings generated. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T04:54:28.703

虽然宏旨*在*`NULL`（至少是由那些首先定义它的人）专门用作指针值，但它通常是d 一个简单的：*`#define`*

 *```
#define NULL 0 
```

这可能是您的实现的情况（在这里并不重要，除了说明；它可以定义为`(void *)0`不更改下面的结果——但这会导致编译时对您的初始化程序的抱怨）。`for`考虑到上述内容，让我们扩展第一个循环：

```
for (i = 0; (asdf.description)[i] != 0; i++) {
    printf( "\t%s\n", (asdf.description)[i]);
} 
```

（旁注：这里不需要括号，因为`.`和下标运算符的绑定已经是括号强制的。）每个都`asdf.description[i]`命名一个完整的数组（大小`DESCRIPTION_LEN`）`char`。因此，您正在比较：

```
<some array of char> != 0 
```

数组对象的“值”是指向数组第一个元素的指针，所以这与以下含义相同：

```
&asdf.description[i][0] != 0 
```

指针值 ( `&asdf.description[i][0]`) 与整数常量零的比较测试指针是否为 NULL（不是“宏`NULL`，而是“系统的 NULL 指针的内部表示”）。有效指针的地址永远不会比较等于 0，所以循环运行（实际上）“永远”（当然直到 i >= 32）。

最终，调用`printf`传递一个指针值，导致您看到的分段错误。

大概你真正想要做的是用全零字节`char`s（或至少一个初始零字节）在最后一个有效数组之后初始化数组。在这种情况下，循环测试应为：

```
asdf.description[i][0] != '\0' 
```

您还可以考虑 32 元素数组（of 的数组）被有效的字符数组完全填充的`DESCRIPTION_LEN`可能性`char`。`i`在这种情况下，您应该在查看之前检查 的值`asdf.description[i][anything]`：

```
i < MAX_DESCRIPTION_COUNT && asdf.description[i][0] != '\0' 
```*

# asp.net-mvc-3 - 什么是错误 3004？

> ID：10876349
> 
> 赞同：2
> 
> 时间：2012-06-04T04:33:28.660
> 
> 标签：asp.net-mvc-3, database-schema

我更新了我的数据库，我收到了这条消息：

```
 Error 3004: Problem in mapping fragments starting at line
 927:No mapping specified for properties User.Username in Set User.
 An Entity with Key (PK) will not round-trip when:
 Entity is type [Db_AcsModel.User]

C:\Users\User\Desktop\MVC\ACS.Domain\AcsModel.edmx 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T04:39:19.403

您很可能添加了一个新字段或删除了一个字段，但该字段的属性仍然存在于您的设计器和实体类中，您可以手动删除或映射实体变量，或者您可以删除实体并再次更新您的模型。

# embedded - 在 BCM7358 和 SPI NOR 之间使用 M-SPI 实现读操作

> ID：10876350
> 
> 赞同：0
> 
> 时间：2012-06-04T04:34:05.087
> 
> 标签：embedded, spi, flash-memory

位于 BCM7358 和 SPI NOR 闪存之间的 SPI 子系统使用 B-SPI 模块执行读取操作，使用 M-SPI 模块执行写入操作....如果我必须从 M-SPI 执行读取操作而不是 B-SPI ...那我该如何进行...欢迎任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:19:09.973

您将需要找到主 spi 接口的编程信息，或者找到与您的操作系统兼容的驱动程序模块或您可以从中借鉴的示例代码。

假设您想在系统运行时进行访问，而不是为了从 SPI 启动，您想做的事情似乎很合理，因此找到有用信息的机会很大。

如果您尝试这样做来启动，您可能需要从其他可以“手动”使用主 spi 加载映像然后跳转到它的东西启动一个小型引导加载程序。或者看看芯片是否有模式引脚组合或类似的从主 spi 接口启动。

从本质上讲，如果您自己制作电路板并在没有数据表的情况下采购芯片，那么您就有麻烦了，除非您可以使用足够相似的芯片找到其他东西来做婴儿床。同样，如果您在没有任何源代码的情况下对产品进行修改。但是，如果您购买了评估板或模块，则可能您可以访问该板的一些文档或示例代码，即使不是芯片。

# c# - 无法在 Windows 应用程序中加载文件或程序集

> ID：10876351
> 
> 赞同：0
> 
> 时间：2012-06-04T04:34:11.990
> 
> 标签：c#, vb.net, winforms

我正在使用 c# 创建 DLL 文件。为此，我需要一个 DLL 文件。这是在 VB 中创建的。所以我只是通过添加引用选项将该 dll 文件添加到我的项目中。但是当运行项目时出现此错误。

无法加载文件或程序集“BOL3，版本=1.0.0.0，文化=中性，PublicKeyToken=null”或其依赖项之一。该系统找不到指定的文件。

任何机构都可以提出解决此问题的建议。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T07:03:18.037

1 - 如果您的 dll1 使用 dll2，则确保最终项目引用了所有“子”dll，如注释，然后主项目需要引用它。2 - 确保它们都编译在同一个位，即 64 或 86，您可以从项目属性中选择它，如果 1 是 64 而其他 86 编译器将无法识别另一个。

# c# - C# - 应用程序全屏并阻止 Windows 本机键盘命令

> ID：10876353
> 
> 赞同：1
> 
> 时间：2012-06-04T04:34:52.263
> 
> 标签：c#, windows, fullscreen, native

我们目前正在使用 C# 开发全屏应用程序。这是一个测验应用程序，将在学校用于评估学生。

我们目前可以将应用程序置于没有顶栏和边框的全屏状态。问题是学生仍然可以在窗口之间切换并使用 CTRL-ALT-DELETE 和 CTRL-SHIFT-ESC 等 Windows 本地命令。哦，还有 ALT-TAB。

我们想知道是否有一种方法可以阻止这些命令，而无需防病毒软件将应用程序报告为威胁。好吧，首先，如果有一种方法可以简单地阻止命令。我们怀疑它是，但你们经常想出一些惊人的解决方案来解决几乎无法解决的问题，所以我们认为无论如何我们可能会问。

感谢您的关注，希望有人能提出一些好的建议。

编辑 ：

我们希望这样做，以便学生无法使用 Taskmanager 杀死该应用程序，并且他们无法打开任何其他应用程序，例如 Internet 浏览器或聊天实用程序。也许有更安全的做事方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T04:48:00.283

您实际上不能从 windows xp 和 windows 7 中的代码执行此操作。

这是通过注册表执行此操作的一种方法：[保护 Windows 以用作信息亭](http://www.northcode.com/blog.php/2007/07/25/Securing-Windows-For-Use-As-A-Kiosk)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T05:06:42.863

您不能将表单 TopMost 属性设置为 TRUE 并隐藏所有表单控件。所有 ctrl-alt-del 等允许您做的就是关闭进程/应用程序。如果这是您要避免的，请忽略此答案。

另一个答案是使用全局键盘挂钩：

```
[DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern IntPtr SetWindowsHookEx(int idHook,
        LowLevelKeyboardProc lpfn, IntPtr hMod, uint dwThreadId);

    [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool UnhookWindowsHookEx(IntPtr hhk);

    [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern IntPtr CallNextHookEx(IntPtr hhk, int nCode,
        IntPtr wParam, IntPtr lParam); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T05:09:20.717

为什么不在 asp.net 中构建您的应用程序以在浏览器中运行并通过组策略将计算机设置为“kiosk”模式？您可以通过这种方式全屏运行 IE。

# javascript - 动态双倍图像大小

> ID：10876357
> 
> 赞同：1
> 
> 时间：2012-06-04T04:36:13.387
> 
> 标签：javascript

我有一个令人尴尬的简单问题：如何在不硬编码宽度和高度属性的情况下以两倍大小显示图像？这是我尝试过的，但最终我只需要输入 1000 作为宽度和高度。我的功能有问题吗？谢谢！

```
<img onload="double(self.id);" name="bigPic" id="bigPic" src="album1.jpg" height="1000" width="1000"/>

    function double(id) {
        var img = document.getElementById(id);
        var dblWdth = img.width * 2;
        var dblHt = img.height * 2;

        img.height = dblHt;
        img.width = dblWdth;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T05:02:52.753

你真的不需要javascript。你可以用 CSS 来做到这一点。

```
img {
    zoom: 2;
    -webkit-transform: scale(2);
    -moz-transform: scale(2);
    -ms-transform: scale(2);
    -o-transform: scale(2);
    transform: scale(2);
} 
```

当然，这会使页面上所有图像的大小翻倍。也许相反，您想创建一个类并将其分配给所有应该加倍的图像，或者找到其他方法来选择这些图像。您还可以在鼠标悬停（悬停）时将其设置为双倍大小，或者仅使用 css 放大动画（在某些浏览器中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T04:45:00.480

不是`double(self.id);`但`double(this.id);`

[演示](http://jsfiddle.net/LFPWt/)。_

你可以通过`this`，那会更简单。

```
function double(img) {
    img.height *= 2;
    img.width *= 2;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T04:42:00.450

```
window.onload = function() {
     double("bigPic")
}; 
```

这应该够了吧。您可以使用 window onload 方法来完成加载页面时需要完成的所有操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T04:43:31.973

如果你使用 jquery，你可以这样做：

```
<img name="bigPic" id="bigPic" src="album1.jpg" />

<script type="text/javascript">
    $(document).ready(function () {
        $("#bigPic")[0].width *= 2;
        $("#bigPic")[0].height *= 2; // may not be necessary, see note
    });
</script> 
```

没有 jquery：正如 Okonomiyaki3000 所指出的，`double`它不是函数名称的好名称，因为它是 JavaScript 中数据类型的保留字。

```
<img name="bigPic" id="bigPic" src="album1.jpg" onload='superSize(this);' />

function superSize(me) {
    me.width = me.width * 2;
    me.height = me.height * 2; //may not be necessary, see note
} 
```

注意：看起来如果你不指定高度，高度会自动加倍。反之亦然。但我只在 IE9 和 FF12 上测试过。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T04:38:20.040

你必须使用 window.load function() 来实现这一点

```
window.onload=function() {double("bigPic");
    } 
```

# xsd - 在 XML Schema 中指定属性和内容之间的选择

> ID：10876359
> 
> 赞同：1
> 
> 时间：2012-06-04T04:36:26.733
> 
> 标签：xsd

您如何在 XML Schema 中指定元素可能具有属性或内容，但不能同时具有两者。

例子：

这里的元素`<sig>`可以表示为：

```
<sig href="http://static.domain.tld/1231231.sig"/> 
```

或将其内容置于内联：

```
<sig>
  8374a32f4c2de
  12B8374a32f4c
  2de12B8374a32
  f4c2de12B8374
  a32f4c2de12bd
</sig> 
```

干杯。

编辑：错别字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T20:07:43.897

据我所知，这是 XML Schema 不如 Relax NG 的地方之一，您可以在其中指定：

```
 <element name="sig">
        <choice>
            <attribute name="href">
                <data type="anyURI"/>
            </attribute>
            <data type="hexBinary"/>
        </choice>
    </element> 
```

# ruby-on-rails-3 - belongs_to 关联的未定义方法

> ID：10876360
> 
> 赞同：6
> 
> 时间：2012-06-04T04:36:39.703
> 
> 标签：ruby-on-rails-3, activerecord, belongs-to

我的代码：

```
class User < ActiveRecord::Base
    belongs_to :university
end

class University < ActiveRecord::Base
  has_many :users, dependent: :destroy
end 
```

我的模型用户有一个 university_id 属性。

如果我这样做，`University.find(1).users`我会得到用户列表，但如果我这样做`User.find(1).university`（并且我在这里检查了 university_id 不是 nil），我会得到：

```
NoMethodError: undefined method `university' for #<User:0x00000003859fc8>
from /home/mari/.rvm/gems/ruby-1.9.2-p290/gems/activemodel-3.0.10/lib/active_model/attribute_methods.rb :392:in `method_missing'
from /home/mari/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.0.10/lib/active_record/attribute_methods. rb:46:in `method_missing'
from (irb):14
from /home/mari/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.0.10/lib/rails/commands/console.rb:44:in`start'
from /home/mari/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.0.10/lib/rails/commands/console.rb:8:in start'
from /home/mari/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.0.10/lib/rails/commands.rb:23:in
`<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

我究竟做错了什么？我有另一个模型，它们工作得很好。有什么建议么？提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T05:45:12.243

我仍然无法发表评论，所以我会烧掉一个答案：

不知何故，用户模型中的 belongs_to :university 没有被识别。测试时，您确定 User 模型已保存并在正确的位置，并且服务器或控制台已刷新？最常见的是，根据我的经验，当我干预模型时，我必须经常刷新我的服务器和控制台才能获得干净的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-20T06:47:43.640

尝试

```
User.where("id =?", 1).first.university 
```

# ruby-on-rails - 使用资产管道从 s3 提供 GZipped 文件

> ID：10876362
> 
> 赞同：2
> 
> 时间：2012-06-04T04:37:02.430
> 
> 标签：ruby-on-rails, ruby-on-rails-3, amazon-s3, asset-pipeline

我在 Heroku 上有一个 Rails 3.2.3 应用程序，我正在使用[assets_sync gem](https://github.com/rumblelabs/asset_sync)通过[这些说明](https://devcenter.heroku.com/articles/cdn-asset-host-rails31)从 s3 提供我的资产。它工作得很好，除了 s3 没有提供 gzip 压缩的 css/js 文件（只是未压缩的版本）。我启用了 gzip 压缩，但无济于事：

```
config.gzip_compression = true 
```

根据将[GZIP 与从 Amazon S3 提供的 html 页面](https://stackoverflow.com/questions/3384508/using-gzip-with-html-pages-served-from-amazon-s3/3384520#3384520)一起使用，我需要将元数据添加到 s3 对象以进行上传。我将如何与 Asset Pipeline 配合使用？感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T00:14:37.460

在你的 heroku 实例上设置这个环境变量：

```
heroku config:add ASSET_SYNC_GZIP_COMPRESSION=true 
```

[您可以在assets_sync](https://github.com/rumblelabs/asset_sync)的自述文件中看到此选项。

# python-3.x - tkinter python条目未显示

> ID：10876363
> 
> 赞同：0
> 
> 时间：2012-06-04T04:37:35.690
> 
> 标签：python-3.x, tkinter

我创建了一个带有标签和条目的表单..但由于某种原因没有创建条目，

peoplegui.py

```
from tkinter import *
from tkinter.messagebox import showerror
import shelve
shelvename = 'class-shelve'
fieldnames = ('name','age','job','pay')

def makewidgets():
    global entries
    window = Tk()
    window.title('People Shelve')
    form = Frame(window)
    form.pack()
    entries = {}
    for (ix, label) in enumerate(('key',) + fieldnames):
        lab = Label(form, text=label)
        ent = Entry(form)
        lab.grid(row=ix, column=0)
        lab.grid(row=ix, column=1)
        entries[label] = ent
    Button(window, text="Fetch",  command=fetchRecord).pack(side=LEFT)
    Button(window, text="Update", command=updateRecord).pack(side=LEFT)
    Button(window, text="Quit",   command=window.quit).pack(side=RIGHT)    
    return window
def fetchRecord():
    print('In fetch')

def updateRecord():
    print('In update')

if __name__ == '__main__':
    window = makewidgets()
    window.mainloop() 
```

当我运行它时，会创建标签，但不会创建条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:24:59.580

您忘记对条目进行网格化。

# mysql - 一个 GUI 应用程序，在 SQL 查询上运行

> ID：10876364
> 
> 赞同：0
> 
> 时间：2012-06-04T04:37:45.110
> 
> 标签：mysql, user-interface

我有几个简单的查询，它们显示数据库中表中的行。我想创建一个显示这些查询结果的可执行 GUI。假设，如果我在应用程序的对话框中键入名称，它应该显示表中具有该名称的行。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T04:59:07.790

第 1 步：为您选择的操作系统找出合适的开发环境。对于 Windows，您可以使用 Access 之类的工具，但 Visual Studio Express 版本应该可以正常工作。对于 Linux 或跨平台应用程序，我建议使用 Java 之类的东西。如果您有 Web 服务器，则可以将其编码为 Web 应用程序。对于移动设备，您需要一些能够在该设备上生成代码的环境（带有 Android 开发工具的 Eclipse、Mac 上的 Xcode 等）。

第 2 步：编写应用程序以获取输入并向您显示数据。

不幸的是，没有任何迹象表明您正在运行什么操作系统或数据库系统，或者您可以访问或愿意购买哪些开发工具，这就是我们可以给出的最具体的答案。

# python - 在 Plone 中添加自定义文件夹限制

> ID：10876368
> 
> 赞同：1
> 
> 时间：2012-06-04T04:38:10.107
> 
> 标签：python, plone

我可以为 Plone 4.1 中的文件夹内容添加自定义限制吗？例如。将文件夹限制为仅包含扩展名为 *.doc、*.pdf 的文件 我知道 Plone 中可用的文件/文件夹/页面/图像等一般限制

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:16:50.243

并非没有额外的发展；您必须使用验证器扩展 File 类型以限制允许的 mime 类型。

在不深入细节的情况下（如果您遇到困难，请自行尝试并在此处询问更多问题），如果遇到此问题，以下是我将实施的各种活动部分：

1.  创建一个新`IValidator`类来检查允许的内容类型：

    ```
    from zope.interface import implements
    from Products.validation.interfaces.IValidator import IValidator

    class LocalContentTypesValidator(object):
        implements(IValidator)

        def __init__(self, name, title='', description='')
            self.name = name
            self.title = title or name
            self.description = description

        def __call__(value, *args, **kwargs):
            instance = kwargs.get('instance', None)
            field    = kwargs.get('field', None)

            # Get your list of content types from the aq_parent of the instance
            # Verify that the value (*usually* a python file object)
            # I suspect you have to do some content type sniffing here

            # Return True if the content type is allowed, or an error message 
    ```

2.  使用注册器注册您的验证器实例：

    ```
    from Products.validation.config import validation
    validation.register(LocalContentTypesValidator('checkLocalContentTypes')) 
    ```

3.  使用基类模式的副本创建 ATContentTypes ATFile 类的新子类，以将验证器添加到其验证链中：

    ```
    from Products.ATContentTypes.content.file import ATFile, ATFileSchema

    Schema = ATFileSchema.schema.copy()
    Schema['file'].validators = schema['file'].validators + (
        'checkLocalContentTypes',)

    class ContentTypeRestrictedFile(ATFile):
        schema = Schema
        # Everything else you need for a custom Archetype 
    ```

    或者如果您希望将其应用于部署中的所有 File 对象，则只需更改 ATFile 模式本身：

    ```
    from Products.ATContentTypes.content.file import ATFileSchema

    ATFileSchema['file'].validators = ATFileSchema['file'].validators + (
        'checkLocalContentTypes',) 
    ```

4.  将字段添加到文件夹或自定义子类以存储本地允许的内容类型列表。我可能会用[`archetypes.schemaextender`](http://pypi.python.org/pypi/archetypes.schemaextender)这个。[`WebLion has a nice tutorial`](http://weblion.psu.edu/services/documentation/developing-for-plone/products-from-scratch/schemaextender)例如，这些天有很多关于这方面的文档。

    当然，您必须就如何让人们在这里限制 mime 类型做出政策决定；通配符、自由格式文本、词汇表等。

# microcontroller - 内存地址寄存器（MAR）和程序计数器（PC）的区别？

> ID：10876372
> 
> 赞同：12
> 
> 时间：2012-06-04T04:38:55.310
> 
> 标签：microcontroller, microprocessors

内存地址寄存器（MAR）和程序计数器（PC）有何不同？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-22T03:38:10.447

不同之处在于程序计数器指向要获取/执行的下一条指令，而内存地址寄存器指向正在运行的程序将获取一些数据（不是指令）的内存位置。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-06-25T14:05:15.387

PC：程序计数器（PC）保存下一条要执行或解码的指令的地址。

IR：指令寄存器（IR）保存当前正在执行或解码的指令。

MAR：内存地址寄存器（MAR）保存内存中位置的地址，其中包含当前正在执行的指令所需的数据。只需 MAR 指向包含所需数据的内存位置。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-05-14T16:27:51.183

程序计数器 (PC) 存储当前指令执行后要从内存中取出的下一条指令的地址。

这个来自 PC 的地址被加载到地址寄存器 (AR) 中： `AR<--PC`

来自地址寄存器 (AR) 给出的内存位置的指令被加载到指令寄存器 (IR) 中：`IR<--M[AR]`

程序计数器递增到下一条指令的地址：`PC<--PC+1`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-09T06:59:57.350

内存地址寄存器 (MAR) 保存将从中获取数据以带入 CPU 的寄存器组件的地址位置。

程序计数器 (PC) 保存 NEXT 指令的位置（存储在内存中的所有内容都有一个地址）。希望这有帮助

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-04T16:22:40.070

程序计数器 (PC) 是 CPU 正在执行的当前指令的地址。存储器地址寄存器 (MAR) 可以包含被加载或存储指令访问的数据的地址。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-07T07:51:40.223

程序计数器使用逻辑地址（程序生成的虚拟地址），而地址寄存器使用物理地址（实际的真实内存地址）。这是主要区别。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-03-16T07:55:48.957

程序计数器 程序计数器保存下一条要被提取-解码-执行的指令的地址。这将在当前指令被解码时自动增加

内存地址寄存器 (MAR) 保存正在执行的当前指令的地址。它指向所需指令所在的内存中的相关位置（在此阶段，地址只是从程序计数器中复制）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-16T13:09:03.753

我在一本书中读到它

PC 只保存指令的地址

PC 在将指令地址传递给 MAR 后立即添加一个数字

MAR 在寻址周期中保存指令的地址

在后续提取周期中保存数据的地址

这些是差异的一部分（可能还有其他差异）

# java - 向 int [] 的所有元素添加常量值的最短方法是什么？矩阵加法呢？

> ID：10876380
> 
> 赞同：0
> 
> 时间：2012-06-04T04:40:13.463
> 
> 标签：java, arrays

我有一个int数组。我需要为其每个元素添加 1。向每个元素添加给定常量的最短、最通用的方法是什么，即没有显式循环？我在网上查看并不断获取有关将元素添加*到*数组（即连接）的页面。

难道没有比遍历每个元素并添加常数更优雅的东西了吗？有某种标准库方法吗？

就此而言，如何在没有显式循环的情况下将两个数组相加（即矩阵相加）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T05:51:31.327

以下是如何使用[Functional Java](http://functionaljava.org/)编写上述两种情况。

* * *

**1.每个元素加1：**

它是一个函数式编程库，因此它不提供变异操作。但是您可以轻松地自己添加它们。

```
public static <A> void transform(Array<A> xs, F<A, A> f) {
  for(int i = 0; i < xs.length(); i++) {
    xs.set(i, f.f(xs.get(i)));
  }
} 
```

**利用：**

```
transform(yourArray, Integers.add.f(1)); 
```

* * *

**2.添加两个矩阵：**

设`xss`和`yss`为两个矩阵，均为 类型`Array<Array<Integer>>`。然后你可以添加它们：

```
 xss.zip(yss).map(new F<P2<Array<Integer>, Array<Integer>>, Array<Integer>>() {
   public Array<Integer> f(P2<Array<Integer>, Array<Integer>> p) {
     Array<Integer> xs = p._1(); 
     Array<Integer> ys = p._2();
     return xs.zip(ys).map(new F<P2<Integer, Integer>, Integer>() {
       public Integer f(P2<Integer, Integer> q) {
         return q._1() + q._2();
       }
     });  
   }
 }); 
```

* * *

这可能感觉比必要的更冗长，这是因为 Java 还不支持 lambda 表达式。同时，[IDE 可以帮助](http://blogs.jetbrains.com/idea/2009/03/closure-folding-in-intellij-idea-9-maia/)使此类技术更易于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T05:30:59.773

如果一个不可修改的结果是可以的，并且你没有坚持使用数组，你可以使用一个可爱的技巧来延迟添加直到最后可能的时刻。但是一旦您需要访问整个结果数组，任何性能优势都会丢失，并且代码最终会变得比必要的更复杂。

```
public class OffsetArrayList extends AbstractList< Integer > {
    private final List< Integer > liUnderlying;
    private final int iOffset;
    public OffsetArrayList( int iOffset, liUnderlying ) {
        this.iOffset = iOffset;
        this.liUnderlying = liUnderlying;
    }
    @Override
    public Integer get( int iIndex ) {
        return liUnderlying.get( iIndex ) + iOffset;
    }
    @Override
    public Integer set( int iIndex, Integer iNewValue ) {
        return liUnderlying.set( iIndex, iNewValue - iOffset ) + iOffset;
    }
    // etc.
}

// create new array
int[] aiInput = new int[] { 23, 98, -45 };
// two object allocations, but no new array created and no additions performed
OffsetArrayList alPlusOne = new OffsetArrayList( 1, Arrays.asList( aiInput ) );
// one addition performed; constant time
assert( alPlusOne.get( 0 ) == 24 );

// benefit murky, as we are adding to the same element repeatedly
for ( int i = 0; i < 1000000; ++i )
    assert( alPlusOne.get( 2 ) == -44 );

// benefit lost, input destroyed
int[] aiOutput = alPlusOne.toArray( aiInput ); 
```

# css - 使子 div 填充到其容器的高度，而不使用任何显式高度

> ID：10876383
> 
> 赞同：0
> 
> 时间：2012-06-04T04:40:16.017
> 
> 标签：css, css-float

我有一个包含一些子元素的菜单栏（包括一个输入框、2 个下拉菜单和 1 个用于在菜单栏下显示 divbox 的链接）。[http://jsfiddle.net/thapar/GLwRr/](http://jsfiddle.net/thapar/GLwRr/)

菜单栏当前符合高度最大的子元素的高度。我想让菜单栏的其他子元素也尊重最大子元素的高度。但是，除非我给菜单栏一个明确的高度，否则`height:100%`对任何孩子都不起作用。

有没有办法让子元素填充菜单栏的高度而不使用像素/em 的显式高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:13:11.620

将容器上的 CSS 设置为`display: table;`并将子元素设置为`display: table-cell;`可能会给您想要的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T23:24:12.947

如果您的容器是相对的，而您的子容器是相对的，则可以使用 top: 和 bottom: css 属性来做到这一点。

查看这个 jsbin 项目，了解我在说什么。大多数项目都有一个明确定义的头部部分，可以保持其高度，所以这个解决方案可以在这种情况下工作。如果您的布局是完全动态的，我不确定如果没有 javascript 解决方案，您将如何做到这一点。

[http://jsbin.com/onubed/1/](http://jsbin.com/onubed/1/)

# machine-learning - WEKA中的省略值和未知值有什么区别

> ID：10876399
> 
> 赞同：1
> 
> 时间：2012-06-04T04:42:51.367
> 
> 标签：machine-learning, data-mining, weka

WEKA 中属性的未知值和省略值有什么区别？我了解到，对于缺失值，我们将 ? 标记为对应属性的值，0 表示省略的值。有什么不同。

假设我们要在维度空间中绘制数据，那么未知值将如何沿它们的轴表示，因为它们不是零。

谢谢阿布舍克 S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:09:28.353

每个分类器对未知值的处理方式不同。例如，有些人会将该特征的平均值分配给每个未知值。这样可以绘制未知值。

省略的值仅用于稀疏 ARFF 文件。如果您的数据集是稀疏的（即大多数值为 0），这些文件很有用。无需在文件中写入所有 0，您只需写入非零值及其相应位置即可。在这种情况下，所有未表示的值因此被假定为 0。

基本上; 如果您不知道值，则分配未知值`?`。

# c# - 循环后台工作任务

> ID：10876401
> 
> 赞同：0
> 
> 时间：2012-06-04T04:43:08.797
> 
> 标签：c#

我在后台工作人员`DoWork`事件中有一些代码，用于检查进程是否正在运行。中的代码`DoWork`执行以下操作：
-> 如果进程没有运行，请再次检查两次
-> 如果进程正在运行，请检查它是否响应
-> 如果进程正在运行并且正在响应，则不执行任何操作
-> 如果进程正在运行但没有响应，重新启动进程

```
 void bgworker_DoWork(object sender, DoWorkEventArgs e)
        {
            int numberTrials = 0;
            bool isNotRunning = false;
            while (isNotRunning = (someProcess.Length == 0) && numberTrials < 3)
            {
                Debug.WriteLine(String.Format("numTrial = {0}", numberTrials.ToString()));
                Thread.Sleep(3000);
                ++numberTrials;
            }
            if (isNotRunning)
            {
                Debug.WriteLine("Start Task");
                someProcess.Start();
            }
            else
            {
                if(!someProcess.IsKioskResponding)
                {
                    Debug.WriteLine("Kill Task");
                }
            }
        } 
```

上面的东西运行良好，但我必须`DoWork`每 3 分钟循环一次上面的任务。将上述循环任务保留在间隔为 3 分钟的计时器中会是一件好事吗？（这样我就必须注意`Thread.Sleep x numberTrials`不要超过定时器的间隔）。对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T05:43:57.980

您是否也看过[Process.WaitForExit 方法](http://msdn.microsoft.com/en-us/library/fb4aw7b8.aspx)

这里用一个例子来解释：[进程重启循环](https://stackoverflow.com/questions/2466767/c-sharp-process-restart-loop)

# c# - XNA Keys 枚举中的反引号 (`) 键的名称是什么？

> ID：10876402
> 
> 赞同：7
> 
> 时间：2012-06-04T04:43:25.503
> 
> 标签：c#, input, xna, naming

我正在寻找与反引号键（键盘上的键左侧）相对应的[Keys](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.input.keys.aspx)枚举条目的名称。````1`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-04T04:47:30.370

我认为`Keys.OemTilde`是你需要的。

# c# - 当鼠标进入窗口时使WPF网格向上滑动

> ID：10876405
> 
> 赞同：0
> 
> 时间：2012-06-04T04:43:42.270
> 
> 标签：c#, wpf, xaml, triggers, storyboard

我目前有 XAML：

```
<Grid Name="WindowGrid">
    <Grid Height="66" HorizontalAlignment="Stretch" Margin="0" Name="ControlsGrid" VerticalAlignment="Bottom" Background="#B4000000" />
</Grid> 
```

我想要的是当鼠标进入窗口（或者甚至是WindowGrid，最好是）时，ControlGrid 向上滑动，反之亦然（当光标离开时，它向下滑动）。我在 WPF/XAML 方面经验很少，在 WinForms 方面经验最多。我知道有一种方法可以使用故事板/触发器来做到这一点，但是我看到的例子太令人困惑了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T06:16:33.043

使用事件触发器来执行此操作：

```
<Grid Name="WindowGrid">

    <Grid.Triggers>
        <EventTrigger RoutedEvent="MouseEnter">
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation 
                        Storyboard.TargetName="ControlsGrid" 
                        Storyboard.TargetProperty="(Grid.Height)"
                        From="0" 
                        To="66" 
                        Duration="0:0:0.5" />
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
        <EventTrigger RoutedEvent="MouseLeave">
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation 
                        Storyboard.TargetName="ControlsGrid"
                        Storyboard.TargetProperty="(Grid.Height)"
                        From="66" 
                        To="0" 
                        Duration="0:0:0.5" />
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Grid.Triggers>

    <!-- 
        This is a sample content to demostrate animation;
        Without it 'WindowGrid' will be collapsed.
    -->
    <ListBox />

    <Grid Margin="0" Name="ControlsGrid" VerticalAlignment="Bottom" Background="#B4000000" />
</Grid> 
```

# html - 使用 div 对齐表格而不是表格有什么好处？

> ID：10876406
> 
> 赞同：2
> 
> 时间：2012-06-04T04:43:50.557
> 
> 标签：html, tabular

我通常使用表格来对齐表格。保持单列中所有单元格的静态宽度对我有好处。这可能是我的知识不足。我检查了一些流行网站的源代码以确认我是否是唯一一个卡在表格以对齐表格的人，但发现我不是唯一一个。我知道这并不意味着我们可以使用表格来对齐表格，无论如何......

表格用于表示“表格数据”我同意，是 div 用于“对齐数据”吗？请告诉使用 div over table 有什么好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T05:00:31.137

我最喜欢使用 div 的原因，尤其是在表单中，因为它使响应式设计更容易。如果您需要调整不同的屏幕宽度减去表格美丽的垂直对齐中心功能，您可以更好地控制您的内容。移动变得越来越重要。

另一个很酷的事情是，当您需要例如桌面渲染时，您可以使用 css 将 div 转换为表格，以利用表格的优势。注意对 css 表的支持不是通用的。

归根结底，如果您不关心移动渲染并且您的表格没有嵌套死，那么如果您使用表格，那真的没什么大不了的。它们快速且易于实施，并且没有用户会注意到功能上的差异。

另一方面，似乎 div 表单可以[更漂亮](http://www.web3mantra.com/2011/06/10/30-best-css-forms/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T05:05:21.143

对不适合表格的数据使用表格是不符合语义的，只会使您的代码膨胀。它有一个令人讨厌的习惯，即在此过程中编写非常丑陋的代码。

我通常更喜欢使用表单的标签和字段集本身来格式化和构造表单，甚至不需要添加额外的 div。

div 表示完全中性的块级元素。它没有语义意义，这使得它有利于结构化和层次结构。但这并不能使它成为一个神奇的解决方案。

在设计网站时，要强调数据，而不是外观。这样事情就会顺利得多。

# iphone - 使用 CorePlot 库绘制多个图形

> ID：10876409
> 
> 赞同：1
> 
> 时间：2012-06-04T04:44:08.490
> 
> 标签：iphone, objective-c, ios

我必须绘制多个图。我必须考虑一个 Y 值到红色、蓝色图和 Y2 轴值的绿色图。我正在使用核心 plat 库......我做了类似下面的事情并得到如下图所示的图表.但我需要为 y 和 y2 设置不同的值。![在此处输入图像描述](../Images/74f4a0cf6148c4445c33fc96bd2b3da4.png)我不知道怎么画...请帮助我...

```
CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)self.graph.defaultPlotSpace;
    plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromInt(self.xRangeMinVal) length:CPTDecimalFromInt(self.xRangeMaxVal)];
    plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromInt(self.yRangeMinVal) length:CPTDecimalFromInt(self.yRangeMaxVal)];
    //plotSpace.allowsUserInteraction = YES;
    //plotSpace.delegate = self;

    // Grid line styles
    CPTMutableLineStyle *majorGridLineStyle = [CPTMutableLineStyle lineStyle];
    majorGridLineStyle.lineWidth = 0.75;
    majorGridLineStyle.dashPattern = [NSArray arrayWithObjects:[NSNumber numberWithFloat:2.0f], nil];
    majorGridLineStyle.lineColor = [[CPTColor colorWithGenericGray:0.4] colorWithAlphaComponent:0.4];
    CPTMutableLineStyle *minorGridLineStyle = [CPTMutableLineStyle lineStyle];
    minorGridLineStyle.lineWidth = 0.25;
    minorGridLineStyle.lineColor = [[CPTColor colorWithGenericGray:0.4] colorWithAlphaComponent:0.1];    

    CPTMutableTextStyle *textStyle = [CPTTextStyle textStyle];
    textStyle.color                   = [CPTColor blackColor];
    textStyle.fontSize                = 16.0f;
    textStyle.textAlignment           = CPTTextAlignmentCenter;

    CPTMutableLineStyle *axisLineStyle = [CPTMutableLineStyle lineStyle];
    axisLineStyle.lineWidth = 3.0;
    axisLineStyle.lineCap   = kCGLineCapRound;
    // Axes
    // Label x axis with a fixed interval policy
    CPTXYAxisSet *axisSet = (CPTXYAxisSet *)self.graph.axisSet;
    CPTXYAxis *x = axisSet.xAxis;
    x.majorIntervalLength = CPTDecimalFromString(@"2.0");
    x.orthogonalCoordinateDecimal = CPTDecimalFromString(@"0.0");
    x.minorTicksPerInterval = 1;
    x.majorGridLineStyle = majorGridLineStyle;
    x.minorGridLineStyle = minorGridLineStyle;
    //x.preferredNumberOfMajorTicks=;

    x.labelingPolicy = CPTAxisLabelingPolicyAutomatic;
    //x.title = [NSString stringWithFormat:@"goat"];
    //x.titleOffset = 10.0;
    //x.titleLocation = CPTDecimalFromString(@"0.0");
    x.title = self.xLineTitle;
    x.axisLineStyle            = axisLineStyle;
    x.titleTextStyle = textStyle;

    CPTMutableLineStyle *dottedStyle=[CPTMutableLineStyle lineStyle];

    x.minorGridLineStyle=dottedStyle;

    // Label y with an automatic label policy. 
    CPTXYAxis *y = axisSet.yAxis;
    y.labelingPolicy = CPTAxisLabelingPolicyAutomatic;
   // y.orthogonalCoordinateDecimal = CPTDecimalFromString(@"-10.0");
    y.minorTicksPerInterval = 2;
    y.preferredNumberOfMajorTicks = 8;
    y.majorGridLineStyle = majorGridLineStyle;
    y.minorGridLineStyle = minorGridLineStyle;
    //y.labelOffset = 1.0;
    y.title = self.yLineTitle;
    y.titleTextStyle = textStyle;
    y.axisLineStyle            = axisLineStyle;
    y.titleRotation = M_PI * 0.5;
    y.minorGridLineStyle=dottedStyle;

    CPTXYPlotSpace *plotSpace1 = (CPTXYPlotSpace *)self.graph.defaultPlotSpace;
   // CPTXYPlotSpace *plotSpace1 = [[[CPTXYPlotSpace alloc] init] autorelease];
    plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromInt(self.xRangeMinVal) length:CPTDecimalFromInt(self.xRangeMaxVal)];
    plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromInt(0) length:CPTDecimalFromInt(60)];
    CPTXYAxis *y2 = [[[CPTXYAxis alloc] init] autorelease];
    y2.coordinate                  = CPTCoordinateY;
    y2.plotSpace                   = plotSpace1;
    y2.majorGridLineStyle          = majorGridLineStyle;
    y2.minorGridLineStyle          = minorGridLineStyle;
    y2.orthogonalCoordinateDecimal = CPTDecimalFromDouble(self.xRangeMaxVal);
    y2.labelingPolicy              = CPTAxisLabelingPolicyAutomatic;
    //y2.separateLayers            = NO;
    y2.preferredNumberOfMajorTicks = 7;
    y2.minorTicksPerInterval       = 2;//
    y2.tickDirection               = CPTSignPositive;
    y2.axisLineStyle               = axisLineStyle;
    //y2.majorTickLength               = 6.0;
    y2.majorTickLineStyle          = axisLineStyle;
    //y2.minorTickLength               = 4.0;
    y2.title                       = @"Y2 Axis";
    //y2.titleTextStyle            = axisTitleTextStyle;
    y2.titleOffset                 = 40.0;

    //graph.axisSet.axes = [NSArray arrayWithObjects:x, y, y2, nil];
    self.graph.axisSet.axes = [NSArray arrayWithObjects:x, y,y2,nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T07:09:11.673

抱歉，您不能在一个绘图空间中添加多个 x 或 y 轴。

所以你想做的只是在你的情节中制作动态 y 或 x 轴。

只需计算 y 轴的最大值就是 this 和 x 轴的 this 。

但是对于相同的绘图空间，您必须只使用一个 y 轴和 x 轴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T06:20:53.527

问题可能是您将两个绘图空间都添加到 self.graph.defaultPlotSpace。尝试在 CPTGraph 中使用 addPlotSpace 方法。并且还尝试为每个 CPTPlotSpaces 使用唯一的 CPTPlotSpace 标识符属性。

# html - 在下载所有资源文件之前，如何控制或阻止 HTML 页面的呈现？

> ID：10876419
> 
> 赞同：1
> 
> 时间：2012-06-04T04:47:33.537
> 
> 标签：html, uiviewcontroller, html-rendering

如何控制 HTML 页面的渲染，直到它下载所有 HTML、CSS 和 JS 依赖项？

除了上面的问题，如何验证所有依赖项都已成功下载？

我正在使用的框架：- jQuery、Twitter Bootstarp

需要浏览器兼容性：- IE8+、Chrome、Firefox、Safari

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T04:56:47.940

这可能会奏效。基本上，您默认隐藏正文。当一切加载时，你显示它：

**HTML**：

```
<body class="placeholder">
  ...
</body> 
```

**CSS**：

```
.placeholder {
  display: none;
} 
```

**JavaScript**：

```
$(document).load(function() {
  $('body').removeClass('placeholder');
}); 
```

就像一个问题：你为什么需要这样做？

# mysql - 重新运行 Django 项目

> ID：10876420
> 
> 赞同：0
> 
> 时间：2012-06-04T04:47:33.600
> 
> 标签：mysql, django

最初，当我输入 python manage.py runserver 时，我没有任何错误。但是，当我在我的 settings.py 中安装 mysql 并更改管理员和数据库时，我似乎无法再次运行服务器。

设置.py

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': '',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

当我运行 python manage.py 运行服务器时：

```
Traceback (most recent call last):
  File "manage.py", line 8, in <module>
    from django.core.management import execute_from_command_line
ImportError: No module named django.core.management 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:36:25.430

您必须确保`env`按照您的注意激活您的。如您所见，该`django`软件包仅存在于您的环境中。如果您不使用它，那么您将无法访问 django 包的任何部分 ( `django.core.management`)。这里有许多解释 virtualenv 功能的手册。

[http://www.arthurkoziel.com/2008/10/22/working-virtualenv/](http://www.arthurkoziel.com/2008/10/22/working-virtualenv/)

[http://iamzed.com/2009/05/07/a-primer-on-virtualenv/](http://iamzed.com/2009/05/07/a-primer-on-virtualenv/)

# android - 线程和可运行错误

> ID：10876421
> 
> 赞同：0
> 
> 时间：2012-06-04T04:47:46.913
> 
> 标签：android, multithreading, runnable

在这里我如何调用线程...我认为错误也来自这里

```
 private void retrieveDataFromServer(String term){

    nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("text1",term));
    Thread thread =  new Thread(null, ChkSuggestionListConn);
    thread.start();
} 
```

* * *

```
 //check internet connection

        private boolean chkConnectionStatus(){

        ConnectivityManager connMgr = (ConnectivityManager)
        this.getSystemService(Context.CONNECTIVITY_SERVICE);

        final android.net.NetworkInfo wifi =
        connMgr.getNetworkInfo(ConnectivityManager.TYPE_WIFI);

        final android.net.NetworkInfo mobile =
        connMgr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

        if( wifi.isAvailable() ){     
          return true;
         }
         else if( mobile.isAvailable() ){     
              return true;        
         }
         else
         { 
             //Toast.makeText(this, "Kindly check your internet" , Toast.LENGTH_LONG).show();
             startActivity(new Intent(Settings.ACTION_WIFI_SETTINGS));
             return false;
         }
    }
    private Runnable ChkUserPassConn = new Runnable(){
        @Override
    public void run() {
        //Set flag so we cant load new items 2 at the same time
        //ChkItemsConn = true;
            if(chkConnectionStatus()==true){

                name_str = username_edt.getText().toString();
                pass_str = password_edt.getText().toString();
                ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
                nameValuePairs.add(new BasicNameValuePair("user",name_str));
                nameValuePairs.add(new BasicNameValuePair("pass",pass_str));
                try{
                    HttpClient httpclient = new DefaultHttpClient();
                    HttpPost httppost = new HttpPost("http link");
                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                    HttpResponse response = httpclient.execute(httppost); 
                    HttpEntity entity = response.getEntity();
                    InputStream is = entity.getContent();

                    BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                    StringBuilder sb = new StringBuilder();
                    String line = null;
                    while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                    }
                    is.close();

                    result_str=sb.toString();

                }
                catch(Exception e){
                    Log.e("log_tag", "Error converting result "+e.toString());
                    Toast.makeText(search_name.this, "Error : Internet Problem", Toast.LENGTH_LONG).show();
                }

            }else if(chkConnectionStatus()==false){

            }
        //Done! now continue on the UI thread
        runOnUiThread(returnRes0);
        }
    };  

    private Runnable returnRes0 = new Runnable() {
    @Override
    public void run() {
        if (result_str.equals("")==false){
            //Toast.makeText(ShaketimamaActivity.this,result,Toast.LENGTH_SHORT).show();
            //String userid2 = name;
            ProgressDialog progress = new ProgressDialog(search_name.this);
            progress.setMessage("Loading...please wait..");
            progress.setTitle("SmartShopaholic");
            new MyTask(progress).execute();
            Intent intent2 = new Intent(getApplicationContext(), mainpage.class);
            intent2.putExtra("userid",result_str.trim());
            startActivity(intent2);
        }else{
            Toast.makeText(search_name.this,"Failed login!",Toast.LENGTH_SHORT).show();
        }
        }
    };
    private Runnable ChkFavListConn = new Runnable(){
        @Override
    public void run() {
        //Set flag so we cant load new items 2 at the same time
        //ChkItemsConn = true;
            if(userid.equals("")){
                ProgressDialog progressA = new ProgressDialog(search_name.this);
                progressA.setMessage("Loading...please wait..");
                progressA.setTitle("SmartShopaholic");
                new MyTask(progressA).execute();
                Intent intent = new Intent(getApplicationContext(), register.class);
                startActivity(intent);
            }else{
                ArrayList<NameValuePair> passvalue = new ArrayList<NameValuePair>();
                passvalue.add(new BasicNameValuePair("userid",userid.trim()));
                try{
                    HttpClient client = new DefaultHttpClient();
                    HttpPost post = new HttpPost("http link");
                    post.setEntity(new UrlEncodedFormEntity(passvalue));
                    HttpResponse HRes = client.execute(post); 
                    HttpEntity HEn = HRes.getEntity();
                    InputStream stream = HEn.getContent();

                    BufferedReader BRead = new BufferedReader(new InputStreamReader(stream,"iso-8859-1"),8);
                    StringBuilder SBuilder = new StringBuilder();
                    String getline = null;
                    while ((getline = BRead.readLine()) != null) {
                        SBuilder.append(getline + "\n");
                    }
                    stream.close();
                    System.out.println("dsa");
                    answer2=SBuilder.toString().trim();             
                }
                catch(Exception e){
                    Log.e("log_tag", "Error converting result "+e.toString());
                }

            }
        //Done! now continue on the UI thread
        runOnUiThread(returnRes2);
        }
    };  

    private Runnable returnRes2 = new Runnable() {
        @Override
        public void run() {
            if(answer2.equals("yes")){
                ProgressDialog progressA = new ProgressDialog(search_name.this);
                progressA.setMessage("Loading...please wait..");
                progressA.setTitle("SmartShopaholic");
                new MyTask(progressA).execute();
                Intent intent1 = new Intent(getApplicationContext(), favoritelist.class);
                intent1.putExtra("userid",userid);
                startActivity(intent1); 
            }else{
                ProgressDialog progress = new ProgressDialog(search_name.this);
                progress.setMessage("Loading...please wait..");
                progress.setTitle("SmartShopaholic");
                new MyTask(progress).execute();
                Intent intent = new Intent(getApplicationContext(), noresult.class);                    
                startActivity(intent);
            }
            }
        };
        private Runnable ChkSearchListConn = new Runnable(){
            @Override
        public void run() {
            //Set flag so we cant load new items 2 at the same time
            //ChkItemsConn = true;
                if(chkConnectionStatus()==true){
                    name = getname.getText().toString();

                    if((name.equals(""))){

                        Toast.makeText(search_name.this, "Blank Field..Please Enter", Toast.LENGTH_LONG).show();
                    }else{
                        ArrayList<NameValuePair> passvalue = new ArrayList<NameValuePair>();
                         passvalue.add(new BasicNameValuePair("choose","pName"));
                         passvalue.add(new BasicNameValuePair("text1",name));
                            try{
                                HttpClient client = new DefaultHttpClient();
                                HttpPost post = new HttpPost("http link");
                                post.setEntity(new UrlEncodedFormEntity(passvalue));
                                HttpResponse HRes = client.execute(post); 
                                HttpEntity HEn = HRes.getEntity();
                                InputStream stream = HEn.getContent();

                                BufferedReader BRead = new BufferedReader(new InputStreamReader(stream,"iso-8859-1"),8);
                                StringBuilder SBuilder = new StringBuilder();
                                String getline = null;
                                while ((getline = BRead.readLine()) != null) {
                                    SBuilder.append(getline + "\n");
                                }
                                stream.close();
                                System.out.println("dsa");
                                answer=SBuilder.toString().trim();              
                            }
                            catch(Exception e){
                                Log.e("log_tag", "Error converting result "+e.toString());
                            }

                    }
                }else{

                }
            //Done! now continue on the UI thread
            runOnUiThread(returnRes3);
            }
        };  

        private Runnable returnRes3 = new Runnable() {
            @Override
            public void run() {
                if(answer.equals("yes")){
                    ProgressDialog progress = new ProgressDialog(search_name.this);
                    progress.setMessage("Loading...please wait..");
                    progress.setTitle("SmartShopaholic");
                    new MyTask(progress).execute();
                    Intent intent = new Intent(getApplicationContext(), name_result.class);
                    System.out.println("userid="+userid+",productname="+name);
                    intent.putExtra("productname",name);
                    intent.putExtra("userid", userid);

                    startActivity(intent);
                }else{
                    ProgressDialog progress = new ProgressDialog(search_name.this);
                    progress.setMessage("Loading...please wait..");
                    progress.setTitle("SmartShopaholic");
                    new MyTask(progress).execute();
                    Intent intent = new Intent(getApplicationContext(), noresult.class);                    
                    startActivity(intent);
                }
                }
            };
            private Runnable ChkSuggestionListConn = new Runnable(){
                @Override
            public void run() {
                //Set flag so we cant load new items 2 at the same time
                //ChkItemsConn = true;
                    //System.out.println(number);
                    //http post
                    try{
                        HttpClient httpclient = new DefaultHttpClient();
                        HttpPost httppost = new HttpPost("http link");
                        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                        HttpResponse response = httpclient.execute(httppost); 
                        HttpEntity entity = response.getEntity();
                        InputStream is = entity.getContent();

                        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                        StringBuilder sb = new StringBuilder();
                        String line = null;
                        while ((line = reader.readLine()) != null) {
                            sb.append(line + "\n");
                        }
                        is.close();
                        result=sb.toString();
                    }
                    catch(Exception e){
                        Log.e("log_tag", "Error converting result "+e.toString());
                       // Toast.makeText(SearchResult.this, "Error : Internet Problem", Toast.LENGTH_LONG).show();
                    }
                    //parse json data
                    try{
                        JSONArray jArray = new JSONArray(result);
                        myBooks = new ArrayList<HashMap<String,Object>>();
                            HashMap<String, Object> hm;
                          //System.out.println(result);  
                            //With the help of HashMap add Key, Values of Book, like name,price and icon path 
                            JSONObject json_data;
                        String[]slist=new String[jArray.length()];    
                        String nameproduct=null;
                        for(int i=0;i<jArray.length();i++){
                            json_data = jArray.getJSONObject(i);
                            nameproduct=json_data.getString("pName");
                            slist[i]=nameproduct;
                        }
                        Set<Object> uniqueSet = new HashSet<Object>(Arrays.asList(slist));
                        Object[] unique = uniqueSet.toArray();
                        for(int i=0;i<unique.length;i++){
                            hm = new HashMap<String, Object>();
                            hm.put(searchTerm, unique[i]);
                            hm.put(picpic, R.drawable.ic_search);
                            myBooks.add(hm);
                            json_data=null;
                        }  
                    }catch(Exception e){
                        listView.setVisibility(View.GONE);       
                    }
                //Done! now continue on the UI thread
                runOnUiThread(returnRes4);
                }
            };  

            private Runnable returnRes4 = new Runnable() {
                @Override
                public void run() {
                    SimpleAdapter adapter = new SimpleAdapter(getApplicationContext(), myBooks, R.layout.autocomplete_listbox, 
                            new String[]{picpic,searchTerm}, new int[]{R.id.image1,R.id.text1});    
                            listView.setAdapter(adapter);
                            listView.setVisibility(View.VISIBLE);
                            listView.setTextFilterEnabled(true);
                    listView.setOnItemClickListener(new OnItemClickListener() {
                        public void onItemClick(AdapterView<?> parent, View view,
                                int position, long id) {
                            String selection = listView.getItemAtPosition(position).toString();
                            //Example selection:{ companyName=ckwai1990, pname=dsa, pID=P000000005, price=RM 1230.00 } 
                            int begin=selection.indexOf("searchTerm=");  
                            int end=selection.length()-1;
                            String productID=selection.substring(begin+11,end);
                            getname.setText(productID);
                            listView.setVisibility(View.GONE);
                            }
                        });
                    }
                }; 
```

这是我的错误日志

```
06-04 12:26:51.331: E/AndroidRuntime(12711): FATAL EXCEPTION: Thread-17
06-04 12:26:51.331: E/AndroidRuntime(12711): android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
06-04 12:26:51.331: E/AndroidRuntime(12711):    at android.view.ViewRoot.checkThread(ViewRoot.java:3022)
06-04 12:26:51.331: E/AndroidRuntime(12711):    at android.view.ViewRoot.requestLayout(ViewRoot.java:635)
06-04 12:26:51.331: E/AndroidRuntime(12711):    at android.view.View.requestLayout(View.java:8320)
06-04 12:26:51.331: E/AndroidRuntime(12711):    at android.view.View.requestLayout(View.java:8320)
06-04 12:26:51.331: E/AndroidRuntime(12711):    at android.view.View.requestLayout(View.java:8320)
06-04 12:26:51.331: E/AndroidRuntime(12711):    at android.view.View.requestLayout(View.java:8320)
06-04 12:26:51.331: E/AndroidRuntime(12711):    at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:257)
06-04 12:26:51.331: E/AndroidRuntime(12711):    at android.view.View.requestLayout(View.java:8320)
06-04 12:26:51.331: E/AndroidRuntime(12711):    at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:257)
06-04 12:26:51.331: E/AndroidRuntime(12711):    at android.view.View.requestLayout(View.java:8320)
06-04 12:26:51.331: E/AndroidRuntime(12711):    at android.view.View.requestLayout(View.java:8320)
06-04 12:26:51.331: E/AndroidRuntime(12711):    at android.view.View.requestLayout(View.java:8320)
06-04 12:26:51.331: E/AndroidRuntime(12711):    at android.view.View.requestLayout(View.java:8320)
06-04 12:26:51.331: E/AndroidRuntime(12711):    at android.view.View.requestLayout(View.java:8320)
06-04 12:26:51.331: E/AndroidRuntime(12711):    at android.view.View.requestLayout(View.java:8320)
06-04 12:26:51.331: E/AndroidRuntime(12711):    at android.view.View.requestLayout(View.java:8320)
06-04 12:26:51.331: E/AndroidRuntime(12711):    at android.widget.TableLayout.requestLayout(TableLayout.java:226)
06-04 12:26:51.331: E/AndroidRuntime(12711):    at android.view.View.requestLayout(View.java:8320)
06-04 12:26:51.331: E/AndroidRuntime(12711):    at android.view.View.requestLayout(View.java:8320)
06-04 12:26:51.331: E/AndroidRuntime(12711):    at android.widget.AbsListView.requestLayout(AbsListView.java:1202)
06-04 12:26:51.331: E/AndroidRuntime(12711):    at android.view.View.setFlags(View.java:4694)
06-04 12:26:51.331: E/AndroidRuntime(12711):    at android.view.View.setVisibility(View.java:3169)
06-04 12:26:51.331: E/AndroidRuntime(12711):    at com.skyhaw.search_name$7.run(search_name.java:789)
06-04 12:26:51.331: E/AndroidRuntime(12711):    at java.lang.Thread.run(Thread.java:1019) 
```

* * *

上面给出的错误是因为我在线程方法中使用 ListView 进行了更改，如下所示是致命错误部分：

```
 private Runnable ChkSuggestionListConn = new Runnable(){
            @Override
        public void run() {
        try{
        ... here is get my http link connection
        }(Exception e){
        Log.e("log_tag", "Error converting result "+e.toString());
        }
        try{
        ... here is get my http result and put it into array
        }(Exception e){
         listView.setVisibility(View.GONE);
         //so the problem at here
        } 
```

这里给出了我通过句柄方法解决的解决方案

```
 public void handleMessage(Message msg) {
        super.handleMessage(msg);

        if(msg.what == EMPTY_RESULT){
            System.out.println("handleMsg EMPTY_RESULT");
            listView.setVisibility(View.GONE);
            }
          }
        };

        //note that handle method is do at the above OnCreate

        private Runnable ChkSuggestionListConn = new Runnable(){
            @Override
        public void run() {
        try{
        ... here is get my http link connection
        }(Exception e){
        Log.e("log_tag", "Error converting result "+e.toString());
        }
        try{
        ... here is get my http result and put it into array
        }(Exception e){
         messageHandler.sendEmptyMessage(EMPTY_RESULT);

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T05:31:15.053

我认为你的问题在这里：

```
getname.setText(productID);
listView.setVisibility(View.GONE); 
```

您正在尝试从另一个线程修改 IU 线程。您应该使用 post() 方法在 UI 线程中调用 Runnable。这是 SO 中的一个类似问题，尽管这个问题使用 AsyncTask：[android.view.ViewRoot$CalledFromWrongThreadException：只有创建视图层次结构的原始线程才能触摸其视图。](https://stackoverflow.com/questions/7937399/android-view-viewrootcalledfromwrongthreadexception-only-the-original-thread-t)

您还可以在此处查看如何使用 post() 的示例：http: [//developer.android.com/resources/articles/painless-threading.html](http://developer.android.com/resources/articles/painless-threading.html)

# regex - 期间通配符在 Bash 模式替换中不起作用

> ID：10876425
> 
> 赞同：2
> 
> 时间：2012-06-04T04:48:16.470
> 
> 标签：regex, bash

鉴于此 Bash 代码：

```
TEMP="1_2"
echo ${TEMP/_.*/} 
```

为什么它打印出来`1_2`而不是`1`？

我也试过这些，但它们不起作用：

```
echo ${TEMP/_\.*/}
echo ${TEMP/_\\.*/} 
```

这确实有效：

```
echo ${TEMP/_[0-9]*/} 
```

但我想知道：

1.  为什么句号不充当通配符？
2.  我应该改用什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T04:50:21.250

问号是单字符通配符。但是，它不像星号是量词的正则表达式那样工作。在 Bash 中，在参数扩展中，星号是多字符通配符。

```
$ temp=1_2
$ echo "${temp/_*}"
1 
```

以下也适用于这种特殊情况。有关差异的更多信息，请参阅[参数扩展。](http://tiswww.case.edu/php/chet/bash/bash.html#lbBB)`man bash`

```
echo "${temp%_*}"
echo "${temp%%_*}" 
```

我建议不要使用全部大写的变量名称，以减少名称与 shell 或环境变量发生冲突的机会。

# jsf-2 - 如何在 Facelets 页面中从 JSP 页面获取请求参数？

> ID：10876430
> 
> 赞同：3
> 
> 时间：2012-06-04T04:49:36.750
> 
> 标签：jsf-2, facelets

我有一个`login.jsp`页面：

```
<form method="post" action="url:8081/login.xhtml">
    Username : <input type="text" name="txtUsername"/>
    Password : <input type="text" name="txtPassword"/>
    <input type="submit" value="submit"/>
</form> 
```

当我提交它时，我怎样才能得到`txtUsername`和`txtPassword`参数`login.xhtml`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T13:54:42.887

所有请求参数都在`#{param}`地图可用的 EL 中。因此，这应该这样做：

```
<p>Username: #{param.txtUsername}</p>
<p>Password: #{param.txtPassword}</p> 
```

如果需要通过 Java 代码对它们进行预处理，最好将它们作为托管属性或视图参数放在与`login.xhtml`.

托管属性示例：

```
@ManagedBean
@RequestScoped
public class Login {

    @ManagedProperty("#{param.txtUsername}")
    private String username;

    @ManagedProperty("#{param.txtPassword}")
    private String password;

    @PostConstruct
    public void init() {
        // Do here your thing with those parameters.
        System.out.println(username + ", " + password);
    }

    // ...
} 
```

查看参数示例：

```
<f:metadata>
    <f:viewParam name="txtUsername" value="#{login.username}" required="true" />
    <f:viewParam name="txtPassword" value="#{login.password}" required="true" />
    <f:event type="preRenderView" listener="#{login.init}" />
</f:metadata> 
```

和

```
@ManagedBean
@RequestScoped
public class Login {

    private String username;
    private String password;

    public void init() {
        // Do here your thing with those parameters.
        System.out.println(username + ", " + password);
    }

    // ...
} 
```

### 也可以看看：

*   [ViewParam 与 @ManagedProperty(value = "#{param.id}")](https://stackoverflow.com/questions/4888942/viewparam-vs-managedpropertyvalue-param-id)
*   [JSF 2.0 中的通信 - 处理 GET 请求参数](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ProcessingGETRequestParameters)

# ruby-on-rails - 混合自引用、多对多和多态关系

> ID：10876435
> 
> 赞同：0
> 
> 时间：2012-06-04T04:50:23.240
> 
> 标签：ruby-on-rails, activerecord, associations, polymorphism, self-reference

我正在开发一些应用程序，我有用户、帖子和报告模型，因此用户可以报告其他用户或帖子。所以我这样做了：

```
class Report < ActiveRecord::Base
  belongs_to :user
  belongs_to :reportable, :polymorphic => true
  ...

class User < ActiveRecord::Base
  has_many :reports, :dependent => :destroy
  has_many :reported_users, :through => :reports, :source => :reportable, :source_type => 'User'
  has_many :reported_posts, :through => :reports, :source => :reportable, :source_type => 'Post'
  has_many :reports, :as => :reportable, :dependent => :destroy
  ...

class Post < ActiveRecord::Base
  has_many :reports, :as => :reportable, :dependent => :destroy
  ... 
```

我的用户规范看起来像：

```
it 'reports another user' do
  @reporter = FactoryGirl.create(:user)
  @reported = FactoryGirl.create(:user)
  Report.create!(:user => @reporter, :reportable => @reported)
  Report.count.should == 1
  @reporter.reported_users.size.should == 1
end 
```

我收到一条错误消息：

```
User reports another user
Failure/Error: @reporter.reported_users.size.should == 1
  expected: 1
       got: 0 (using ==) 
```

不知道出了什么问题，我可以在模型中一起使用`has_many :reports`和吗？`has_many :reports, :as => :reportable`另外，如何为用户获取记者？假设我想`@user.reporters`获得所有报告特定用户的其他用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:50:44.687

更改第二个`has_many :reports`以`has_many :inverse_reports`解决问题：

```
class User < ActiveRecord::Base
  has_many :reports, :dependent => :destroy
  has_many :reported_users, :through => :reports, :source => :reportable, :source_type => 'User'
  has_many :reported_posts, :through => :reports, :source => :reportable, :source_type => 'Post'
  has_many :inverse_reports, :class_name => 'Report', :as => :reportable, :dependent => :destroy 
```

现在我想我也可以为每个用户获取记者，例如：

```
 has_many :reporters, :through => :inverse_reports, :source => :user 
```

# django - Django MongoDB 嵌入式模型

> ID：10876436
> 
> 赞同：0
> 
> 时间：2012-06-04T04:50:29.630
> 
> 标签：django, mongodb, django-models

当我专门为了嵌入到另一个类/模型中而创建一个类/模型时，我的 mongodb 数据库中仍然为前者编写了一个集合。上述除了不方便外，并没有造成任何麻烦，但我仍然想知道有没有什么办法可以不写合集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:42:22.327

如果您使用`abstract=True`该模型，这是可能的。

但是，您不能使用惰性查找（又名`EmbeddedModelField('SomeModelThatsNotYetDefined')`（https://github.com/django-nonrel/djangotoolbox/issues/15）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T04:53:53.003

我也有一个 nonrel django 项目。它只是 django 所做的事情（并且 nonrel fork 没有专门解决），当您定义一个不是抽象或代理的模型时，它将在 syncdb 期间生成一个集合（表）。是否将任何内容保存到该集合显然进一步取决于您的代码。

如果有一些技巧可以让具体模型不在 nonrel django 中创建集合，那么我也缺少一些东西。

# zend-framework - amazon sqs：阅读消息不按顺序

> ID：10876441
> 
> 赞同：1
> 
> 时间：2012-06-04T04:52:13.633
> 
> 标签：zend-framework, amazon-web-services, amazon-sqs

我想以与插入 sqs 相同的顺序从亚马逊 sqs 获取消息（先进先出模型）。他们有什么方法可以实现吗？我正在使用 zend php 进行编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:14:17.160

无序消息传递是 SQS 设计中固有的。您可以尝试通过对消息进行编号并将无序消息存储在本地直到丢失的消息到达来解决它，但这可能不值得麻烦。

SQS 确实有点奇怪，它按照它所说的去做，但它所做的并不是大多数人在消息总线中寻找的东西。我真的希望亚马逊能提供更像 RabbitMQ 的额外排队解决方案。SQS 实际上只适用于分发甚至没有远程耦合的任务，并且顺序和延迟等事情并不重要。例如，将完成的订单发送到运输中心或安排打印作业会非常有用。

他们自己的文档显示它被用来安排缩略图创建，但是当我最近将它用于这个确切目的时，我很快发现我的用户不会对延迟印象深刻：有时是 30-50 秒。

您仍然可以在 EC2 节点上运行 RabbitMQ，虽然它的可扩展性不如 SQS，但它确实可以集群，并且应该可以带您走很远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T22:18:40.983

The [SQS documentation](http://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/DistributedQueues.html) answers this for you (bold is my emphasis to directly answer your question):

> Amazon SQS makes a best effort to preserve order in messages, but due to the distributed nature of the queue, we cannot guarantee you will receive messages in the exact order you sent them. **If your system requires that order be preserved, we recommend you place sequencing information in each message so you can reorder the messages upon receipt.**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T18:41:24.340

你可以试试[IronMQ](http://www.iron.io/products/mq)。它像 SQS 一样托管，保证了先进先出的顺序，没有最终的一致性延迟，具有超强的可扩展性，您可以在几分钟内启动并运行。

这是一个 PHP 库：[https ://github.com/iron-io/iron_mq_php](https://github.com/iron-io/iron_mq_php)

免责声明：我为 Iron.io 工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-22T06:11:49.030

我试图实现 FIFO 方式以按照发送消息的相同顺序接收消息

为此，您可以使用它每次发送的消息序列号与消息并在接收端验证

通过使用这种方式，您可以按 FIFO 顺序获得所需的输出

# django - 带有 OAuth2 的 Django c2dm

> ID：10876442
> 
> 赞同：0
> 
> 时间：2012-06-04T04:52:25.833
> 
> 标签：django, oauth, android-c2dm, credentials

我想开发一个 Django 应用程序来通过 google c2dm 服务器向 Android 设备发送消息。它使用 OAuth2 进行授权。首先，我获得了凭据并将其作为存储存储在存储中，然后我想从存储中获取凭据并将此凭据与其他参数和标头一起发送到 c2dm api。我可以获得范围[https://android.apis.google.com/c2dm](https://android.apis.google.com/c2dm)的凭据并将其存储在存储中。请有人指导我，我如何使用凭据提出请求并发送到[https://android.clients.google.com/c2dm/send](https://android.clients.google.com/c2dm/send)以进行交付。提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:08:15.790

我想您已经能够在[Google OAuth 2.0 Playground上](https://code.google.com/oauthplayground/)*为令牌执行第 2 步 Exchange 授权代码*。然后您应该已经获得了一个**刷新令牌**和一个**访问令牌**（如果您没有收到刷新令牌，请确认您已检查**强制批准提示**并在*OAuth 2.0 配置*中为*访问类型*选择了**离线**。

 ********访问令牌将在一段时间后（通常为 1 小时）过期，但刷新令牌不会。刷新令牌（连同**OAuth 客户端 ID**和**OAuth 客户端密码**）可用于获取新的访问令牌：

```
curl --data-urlencode "client_id=OAuthClientID"
     --data-urlencode "client_secret=OAuthClientSecret"
     --data-urlencode "refresh_token=RefreshToken"
     -d "grant_type=refresh_token" "https://accounts.google.com/o/oauth2/token" 
```

（替换 OAuthClientID、OAuthClientSecret、RefreshToken）。如需进一步阅读，请参阅：[将 OAuth 2.0 用于 Web 服务器应用程序 - 离线访问](https://developers.google.com/accounts/docs/OAuth2WebServer#offline)

现在您可以使用此访问令牌和设备的注册 ID 使用 C2DM 向该设备发送消息：

```
curl -k -H "Authorization: Bearer AccessToken"
     --data-urlencode "registration_id=RegistrationID"
     --data-urlencode "collapse_key=0"
     --data-urlencode "data.message=YourMessage"
     "https://android.apis.google.com/c2dm/send" 
```

（替换 AccessToken、RegistrationID 和 YourMessage）********

# android - 在列表视图中实现 3 个标签作为表格视图中的详细文本标签，并在每个单元格中实现一个图像

> ID：10876444
> 
> 赞同：-1
> 
> 时间：2012-06-04T04:53:03.057
> 
> 标签：android, iphone, jquery-mobile, cordova

为了在 PhoneGap iPhone 应用程序中实现上述功能，我在 jQuery mobile 中使用了嵌套列表，如下所示。

```
<ul data-role="listview" data-theme="e" data-header-theme="a">
                 <li data-role="list-divider" data-header-theme="a">ABC (123)</li>  <!----------- Section Header -------->
                 <li> <a href="#" data-panel="main"><h3 class="ui-li-heading">DM</h3><p class="ui-li-desc"> 1234 </p> </a></li>
                <li> <a href="#" data-panel="main"><h3 class="ui-li-heading">Def</h3><p class="ui-li-desc"> 11111 </p> </a></li>
</ul> 
```

但现在我需要在右侧边缘添加另一个标签，在左侧边缘添加图像。

如何显示右侧标签？

如何在左侧边缘显示图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T05:03:44.473

对于显示图像：

```
<li>
 <a href="#">
<img src="../images/icons/icon-american.png"
alt="American flag icon"
class="ui-li-icon">
American
</a>
<ul>
<li>Dixon's</li>
<li>Vesta Dipping Grill</li>
<li>Steuben's</li>
</ul>
</li> 
```

# java - 使用 Java (JApplet) 的时钟程序

> ID：10876446
> 
> 赞同：0
> 
> 时间：2012-06-04T04:53:09.847
> 
> 标签：java, applet, user-input, clock

我完全不知道我的时钟程序哪里出错了。

我的程序应该在几小时和几分钟内接受用户输入。然后用户的输入将时针和分针设置到其在弹出窗口中拉出的圆形时钟上的适当位置。

我的程序似乎没有接受用户输入，而是接受来自`ClockApplet.java`. 我不太确定如何让我的程序接受用户的输入。任何建议/输入/帮助将不胜感激！

我的代码如下：

**时钟.java**

```
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.geom.Ellipse2D;
import java.awt.geom.Line2D;
import java.awt.geom.Point2D;

public class Clock
{
public Clock()
{
    this.anHour=12;
    this.aMin=0;
}

public Clock(double hr, double min)
{
    this.anHour=hr;
    this.aMin=min;
}

public void draw(Graphics g)
{
    Graphics2D g2=(Graphics2D)g;

    Ellipse2D.Double clock_face = new Ellipse2D.Double(0, 0, 2 * RADIUS, 
                                    2 * RADIUS);
    ((Graphics2D) g).draw(clock_face);

    Point2D.Double center=new Point2D.Double(RADIUS, RADIUS);
    double angle=Math.PI /2 - 2 * Math.PI * aMin / MINUTES_PER_HOUR;
    Point2D.Double minutePoint=new Point2D.Double(RADIUS + MINUTE_HAND
                                * Math.cos(angle), RADIUS - MINUTE_HAND * Math.sin(angle));
    Line2D.Double minuteHand=new Line2D.Double(center, minutePoint);
    ((Graphics2D) g).draw(minuteHand);

    angle=Math.PI / 2 - 2 * Math.PI * (anHour * MINUTES_PER_HOUR +
            aMin) / (MINUTES_PER_HOUR * HOURS_PER_DAY);
    Point2D.Double hourPoint=new Point2D.Double(RADIUS + HOUR_HAND *
                                Math.cos(angle), RADIUS - HOUR_HAND * Math.sin(angle));
    Line2D.Double hourHand=new Line2D.Double(center, hourPoint);
    ((Graphics2D) g).draw(hourHand);

    Clock clock1=new Clock(anHour, aMin);
}

private double anHour;
private double aMin;

final double RADIUS = 100;
final double MINUTES_PER_HOUR = 60;
final double HOURS_PER_DAY = 12;
final double HOUR_HAND = 75;
final double MINUTE_HAND = 90;
} 
```

**ClockApplet.java**

```
import java.awt.Graphics;
import java.awt.Graphics2D;

import javax.swing.JApplet;
import javax.swing.JOptionPane;

/**
 * This applet draws the clock shape.
 */

public class ClockApplet extends JApplet
{
    public ClockApplet()
    {
        String input;

    input=JOptionPane.showInputDialog(null, "Please enter the time (hh:mm):","Clock Applet", JOptionPane.QUESTION_MESSAGE);

    if((input==null) || (input.equals("")))
    {
        JOptionPane.showMessageDialog(null, "Invalid input", "Alert", JOptionPane.WARNING_MESSAGE);
        System.exit(0);
    }
    else
    {
        int colon1=input.indexOf(":");
        int colon2=input.lastIndexOf(":");

        double hours=findHour(colon1, input);
        double minutes=findMin(colon2, input);

        if(hours!=0 && minutes!=0)
        {
            Clock clock1=new Clock(hours, minutes);
        }
        else
        {
            JOptionPane.showMessageDialog(null, "Invalid input", "Alert", JOptionPane.WARNING_MESSAGE);
            System.exit(0);
        }
    }
}

public double findHour(int colon1, String input)
{
    String userHour=input.substring(colon1+1);
    double aHour=Double.parseDouble(userHour);
    double temp1=0.0;

    if(aHour>0 && aHour<=12)
    {
        temp1=aHour;
    }
    else
    {
        return 0;
    }

    return temp1;
}

public double findMin(int colon2, String input)
{
    String userMin=input.substring(colon2+1);
    double aMin=Double.parseDouble(userMin);
    double temp1=0.0;

    if(aMin>0 && aMin<=60)
    {
        temp1=aMin;
    }
    else
    {
        return 0;
    }

    return temp1;
}

public void paint(Graphics g)
{
    Graphics2D g2=(Graphics2D)g;

    Clock clock1=new Clock(10,10);

    clock1.draw(g2);

}

} 
```

**ClockApplet.html**

```
<applet code="ClockApplet.class" width="50" height="50"> </applet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T05:49:38.687

问题在于小时的解析。如果按照提示指定时间`05:15`，则会得到错误的子串。做这样的陈述：

```
System.out.println(/* the object I now have */); 
```

..当它通过`findHour()`方法时，检查发生了什么。或者，使用调试器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T05:02:04.537

你需要将接受用户输入的代码添加到.so的`life cycle`方法中`applet`。所以将代码添加到applet的init()方法中，但我认为这里缺少它。所以oberride init()方法并添加代码：

```
 @Override
    public void init(){
    input=JOptionPane.showInputDialog(null, "Please enter the time (hh:mm):","Clock Applet", JOptionPane.QUESTION_MESSAGE); 

    } 
```

# android - 如何在Android中控制捏放大，缩小地图？

> ID：10876454
> 
> 赞同：3
> 
> 时间：2012-06-04T04:53:52.007
> 
> 标签：android, google-maps, zooming, pinch

在我的 Android 应用程序中，我有一个 MapActivity，当用两根手指（捏）缩放地图时，它正在缩放，但是当我抬起手指时，它会进一步缩放。意思是，如果伦敦以地图为中心，当我放大伦敦时，它会到达屏幕的边缘；当我抬起手指时，它会离开屏幕，进一步放大。我希望它像 iOS 地图应用程序（无需进一步缩放）。我怎样才能做到这一点？

我尝试了以下代码，但没有奏效。

```
class MapOvelay extends Overlay {
   boolean moveTouch;
   int i;

    @Override
    public boolean onTouchEvent(MotionEvent event, MapView mapView) {
       switch (event.getAction()) {     
         case MotionEvent.ACTION_POINTER_UP://when two fingers are lifted
           mapController.setZoom(i);
           i=0;
           break;

         case MotionEvent.ACTION_MOVE://when two fingers are moving on map
           i = mapView.getZoomLevel();
           moveTouch = true;
           break;
   .... 
  }
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T07:16:44.550

尝试这个

```
 mapview.getController().animateTo(startGP);
    mapview.getController().setZoom(13);        
    mapview.setBuiltInZoomControls(true);
    mapview.invalidate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T06:42:12.823

您是否尝试过 zoomToSpan 功能？

```
mMapController.zoomToSpan(maxLatitude - minLatitude,maxLongitude - minLongitude); 
```

此外，您可以使用类似这样的方式限制最低缩放

```
if (LOWEST_ZOOM_LEVEL < mMap.getZoomLevel() ) {
    mMapController.setZoom(LOWEST_ZOOM_LEVEL);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T07:11:38.503

您可以通过在 MapView 中调用 #getMaxZoomLevel() 来获得可用的最大缩放级别。无论官方 Google 地图应用程序中发生什么情况，这都是您能够获得的最接近的缩放比例。 `mapView.getController().animateTo(geoPoint);` `mapView.getController().setZoom(15);` `mapView.invalidate();`

# c# - IIS 7.0 中的 WCF 服务主机

> ID：10876458
> 
> 赞同：0
> 
> 时间：2012-06-04T04:54:47.330
> 
> 标签：c#, wcf

我有一个 WCF，当我在本地主机上运行它时，它会成功运行。但是在针对特定域地址（www.esimsol.com）运行它时我遇到了一个问题。任何人都可以帮助我如何配置它（“http://www.esimsol.com/evalservicesite/eval.svc”）。我的本地主机配置文件是：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.web>
    <compilation debug="true" />
  </system.web>
  <!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <services>
      <service behaviorConfiguration="EvalServiceLibrary.Service1Behavior"
        name="EvalServiceLibrary.EvalService">
        <endpoint address="" binding="wsHttpBinding" contract="EvalServiceLibrary.IEvalService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8081/EvalServiceLibrary/EvalService/" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="EvalServiceLibrary.Service1Behavior">
          <!-- To avoid disclosing metadata information, 
          set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="True"/>
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

注意：特别是基地址

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T05:08:05.873

[您必须使用名称http://www.esimsol.com](http://www.esimsol.com)将您的解决方案发布到您的 iis 服务器。发布后尝试使用地址运行您的服务：http://www.esimsol.com/evalservicesite/eval.svc 并将您的基地址更改为

将 loacalhost 服务器 8081 发布到任何服务器后，您不能使用它，它应该是 localhost 或您的网站名称[http://www.esimsol.com](http://www.esimsol.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T05:19:05.700

消除

```
 <identity>
      <dns value="localhost" />
   </identity> 
```

&

```
 <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8081/EvalServiceLibrary/EvalService/" />
      </baseAddresses>
    </host> 
```

# c# - C#，命令行应用程序在第一次调用时创建对象，在所有后续调用中使用对象

> ID：10876463
> 
> 赞同：1
> 
> 时间：2012-06-04T04:56:07.097
> 
> 标签：c#, command, cmd

我想在 C# 中创建一个命令行应用程序，用户可以将其用作脚本语言。我的意思是在应用程序第一次运行时，创建一个对象的实例，并在会话的其余部分持续存在。从命令行对应用程序的任何后续调用都使用先前设置的参数。

例如，如果您有一个名为 woo.exe 的应用程序，它创建了一个名为 ball 的对象。Ball 有一个名为 changeColor 的方法，它接受一个字符串作为输入。我们对 changeColor 的命令行调用将是。

> > woo changeColor red

现在如果球有一个方法 getColor() 返回球对象的颜色，调用命令

> > woo getColor 你的颜色是红色（来自 Console.WriteLine("Your color is {0}", color) 的输出）

这样，用户可以创建批处理文件，通过多次调用程序在单个对象上运行方法。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T05:13:26.740

一种可能的方法是：

*   调用woo.exe，创建对象
*   现在 woo.exe 完成了，对吧？以任何方便的格式将对象序列化到磁盘（我会选择 XML，因为它具有表现力且易于在 C# 中解析）
*   使用新参数再次调用 woo.exe。加载对象，进行更改，再次序列化。

另一种可能的方式：

*   woo.exe 首次加载，创建对象并等待。
*   加载另一个实例，通过进程间通信（管道或本地网络）找到第一个实例并向其发送命令（调用方法）。
*   第一个实例充当服务器，保存对象并对其执行更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T05:24:28.070

详细说明@alxx 的建议 - 这完全取决于该对象在属性更改之间的作用。如果它所做的只是记住这些值，请使用第一个建议。如果对象做了某事（如果您将颜色设置为红色，则某事变为红色），那么您可能需要该某物存在于某个进程中的某个地方，这将是您自己的进程，您应该采用第二个建议。

# c++ - 列表迭代器不可递增 - 运行时错误

> ID：10876464
> 
> 赞同：0
> 
> 时间：2012-06-04T04:56:13.320
> 
> 标签：c++, list, stl, stringstream

在为 movieName 添加字符串流之后，我在下面的代码中得到了一个 List Iterator Not incrementable，并且不确定如何解决该错误。我正在尝试从文件中读取并将项目添加到列表中，然后遍历列表并将电影标题中的 eash 单词添加到另一个列表中。任何帮助，将不胜感激！

```
#include <iostream>
#include <string>
#include <list>
#include <fstream>
#include <sstream>

using namespace std;

int main()
{
list <string> movieList;
list <string>::iterator iterMovie; 

list <string> *titleWordList = new list <string>;
list <string>::iterator iterTitleWord; 

ifstream inFile;
inFile.open("JamesBond.txt"); 

if (!inFile)
{
    cout << "Could not find the specified file.";
}
else 
{
    movieList.clear();
    string movieName;

    while(getline(inFile,movieName))
    {
        movieList.push_back((movieName));

        /*
        for each(string movieName in movieList)
        {
            titleWordList->push_back(movieName); 
        }
        */

        stringstream ss(movieName);
        while (ss >> movieName)
        {
             titleWordList->push_back(movieName); 
        }

    }
}

if (movieList.empty())
{
    cout << "No Data Found!" << endl; 
}
else
{
    cout << "Writing Output: \n\n";

    for (iterMovie=movieList.begin(); iterMovie !=movieList.end(); ++iterMovie)
    {
        cout << *iterMovie << endl; 

    }

    for (iterTitleWord=movieList.begin(); iterTitleWord != movieList.end();     ++iterMovie)
    {
        cout << *iterTitleWord << endl;
        cout << &titleWordList; 
    }

  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T04:59:01.723

在第二个`for`有一个复制粘贴错误，它应该是`++iterTitleWord`而不是`++iterMovie`.

此外，正如@Greg 所建议的那样，`iterTitleWord=movieList.begin()`应该`iterTitleWord != movieList.end()`是`iterTitleWord=titleWordList->begin()`和`iterTitleWord != titleWordList->end()`分别。

# c - C指针中的简单函数与传递值

> ID：10876465
> 
> 赞同：0
> 
> 时间：2012-06-04T04:56:15.960
> 
> 标签：c

我想确认一下，当我有这样的功能时

```
int subtract(int a, int b)
{
return a-b;
} 
```

当我调用减法（3,2）而不是指针时，我正在传递值。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T05:01:32.983

是的，你是

*   类型参数`int a`表示将整数按值传递给函数
*   类型参数`int* a`意味着将指向某个整数的指针传递给函数。

所以为此

```
int subtract(int a, int b) 
{ 
   // even if I change a or b  in here - the caller will never know about it....
   return a-b; 
} 
```

你这样称呼：

```
int result  = substract(2, 1); // note passing values 
```

用于指针

```
int subtract(int *a, int *b) 
{ 
   // if I change the contents of where a or b point the  - the caller will know about it....
   // if I say *a = 99;  then x becomes 99 in the caller (*a means the contents of what 'a' points to)
   return *a - *b; 
} 
```

你这样称呼：

```
int x = 2;
int y = 1;
int result  = substract(&x, &y); // '&x means the address of x' or 'a pointer to x' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T05:06:36.367

是的，C 总是按值传递函数参数。要传递指针，您必须指定标识指针类型的星号（星号）。

请记住，即使在指针的情况下， **C 也总是按值函数参数传递**，在这种情况下，指针的地址实际上是被复制的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T04:58:21.383

是的，您正在传递值。指针将在类型名称之后和变量名称之前用星号表示。

# java - 如何保持 Socket 输出流打开并多次写入

> ID：10876466
> 
> 赞同：0
> 
> 时间：2012-06-04T04:56:29.577
> 
> 标签：java, sockets

我正在制作一个接受 TCP 套接字连接并显示它发送的信息的应用程序。这行得通。我已经决定我希望能够多次从客户端向服务器发送信息。现在这就是它的发送方式。

```
socketStream = socket.getOutputStream();
to_send.add(new String[][] {{
ips + ":" + socket.getPort(),
System.getProperty("user.name"),
System.getProperty("os.name")
}});

sendData(to_send);

while(!finished) {
 socketStream = socket.getOutputStream();
 oos = new ObjectOutputStream(socketStream);
 oos.writeObject(new String[][] {{"Open","LOL"}});
 oos.flush();
} 
```

-

```
public void sendData(ArrayList<String[][]> d) {
    try {

        oos = new ObjectOutputStream(socketStream);
        oos.writeObject(d);
        oos.flush();

        System.out.println("Sent: " + to_send.get(0));

    } catch (Exception e) {

        System.out.println(e.toString());
    }
} 
```

我收到此错误：

```
java.net.SocketException: Software caused connection abort: socket write error
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(Unknown Source)
    at java.net.SocketOutputStream.write(Unknown Source)
    at java.io.ObjectOutputStream$BlockDataOutputStream.drain(Unknown Source)
    at java.io.ObjectOutputStream$BlockDataOutputStream.setBlockDataMode(Unknown Source)
    at java.io.ObjectOutputStream.writeNonProxyDesc(Unknown Source)
    at java.io.ObjectOutputStream.writeClassDesc(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeFatalException(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at Server.<init>(Server.java:57)
    at Server.main(Server.java:26) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T04:59:19.057

不要关闭`sendData`. 您将需要在外部处理关闭代码`sendData`。

*编辑：当远程*端终止连接时，可能会导致此异常。可能发生的情况是您使用两个`ObjectOutputStream`s 导致服务器出现异常，这会强制终止连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T05:02:28.100

在完成 Socket 之前不要关闭输出流。关闭输出流或输入流会关闭套接字。

并且不要使用多个`ObjectOutputStreams`and `ObjectInputStreams`。在插座的使用寿命期间，在两端各使用一个。否则你会遇到`StreamCorruptedExceptions`. 这些东西在构造时会写入并期望标头，如果您在流中间打开一个新标头，另一端会出错。

# android - android逐帧动画片段

> ID：10876468
> 
> 赞同：1
> 
> 时间：2012-06-04T04:56:54.567
> 
> 标签：android, animation, android-fragments, frame

如果我的视图基于 Activity，我的动画效果很好，

但是如果我想基于一个片段，我不知道该怎么做？，

这里的代码[作为活动工作]：

```
public class FramesAnimationActivity extends Activity {

    AnimationDrawable animation;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        animation = new AnimationDrawable();
        animation.addFrame(getResources().getDrawable(R.drawable.c_0), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c1), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c2), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c3), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c4), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c5), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c6), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c7), 100);

        animation.setOneShot(false);

        ImageView imageAnim =  (ImageView) findViewById(R.id.img);
        imageAnim.setBackgroundDrawable(animation);

        // run the start() method later on the UI thread
        imageAnim.post(new Starter());

    }

    class Starter implements Runnable {

        public void run() {
            animation.start();        
        }

    }

} 
```

但作为片段，如何使它工作？

```
public class HomeTab extends Fragment {
    /* (non-Javadoc)
     * @see android.support.v4.app.Fragment#onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle)
     */

    AnimationDrawable animation;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        if (container == null) {
            // We have different layouts, and in one of them this
            // fragment's containing frame doesn't exist.  The fragment
            // may still be created from its saved state, but there is
            // no reason to try to create its view hierarchy because it
            // won't be displayed.  Note this is not needed -- we could
            // just run the code below, where we would create and return
            // the view hierarchy; it would just never be used.
            return null;
        }

        animation = new AnimationDrawable();
        animation.addFrame(getResources().getDrawable(R.drawable.c_0), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c1), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c2), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c3), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c4), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c5), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c6), 100);
        animation.addFrame(getResources().getDrawable(R.drawable.c7), 100); 

animation.setOneShot(false);

        ImageView imageAnim =  (ImageView) findViewById(R.id.img);
        imageAnim.setBackgroundDrawable(animation);

        // run the start() method later on the UI thread
        imageAnim.post(new Starter());

        return (LinearLayout)inflater.inflate(R.layout.tab_home_layout, container, false);
    }

    class Starter implements Runnable {

        public void run() {
            animation.start();        
        }

    }

} 
```

所以我在 findViewById(id) is undefined 方法中遇到错误 `ImageView imageAnim = (ImageView) findViewById(R.id.img);` ...

那么如何调整它以使其适用于我的片段？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:17:45.990

首先为您的 LinearLayout 充气，然后调用已创建视图的 findViewById() 方法：

```
 LinearLayout ll = (LinearLayout)inflater.inflate(R.layout.tab_home_layout, container, false);
    ImageView imageAnim =  (ImageView) ll.findViewById(R.id.img);
    imageAnim.setBackgroundDrawable(animation);

    // run the start() method later on the UI thread
    imageAnim.post(new Starter());

    return ll; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-30T22:46:14.930

要使动画可绘制在片段中工作，请调用 onViewCreated 方法中的动画方法，而不是 onCreateView 方法，就像这样。

```
@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
      ImageView animationImageView = (ImageView) view.findViewById(R.id.imageViewSearchAnimation);
      animationImageView.setBackgroundResource(R.drawable.search_animation);
      animation = (AnimationDrawable) animationImageView.getBackground();
      animation.start();
      super.onViewCreated(view, savedInstanceState);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
    Bundle savedInstanceState) {
      View view = inflater.inflate(R.layout.dialog_progress_search,
      container, false);
      return view;
}

@Override
public void onPause() {
      animation.stop();
      super.onPause();
}

@Override
public void onResume() {
      super.onResume();
      animation.start();
} 
```

# python - 如何找到列表python的高度

> ID：10876469
> 
> 赞同：0
> 
> 时间：2012-06-04T04:57:05.443
> 
> 标签：python, list, multidimensional-array

```
p = [[0,0],[0,0],[0,0]]. 
```

我知道 len(p) 返回列表的宽度，但是在这种情况下如何获得列表的高度为 3？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T04:59:12.610

没有列表的“高度”之类的东西。您可能的意思是“当我们选择将矩阵表示为列表列表时，矩阵的高度是多少”？（旁注：有很多方法可以表示矩阵。）

你可以拿第一行：

```
len(p[0]) 
```

但如果你有，你会遇到错误`[]`，所以你想要的是：

```
len(p[0]) if len(p)!=0 else 0 
```

（要记住的其他事项：如果可以接受 Nx0 矩阵表示为`[[],[],[],...]`。我会说不。你是`[]`如何表示空矩阵的？我会说是的。但是有些库喜欢`numpy`选择不同的：`numpy.matrix([]).tolist()`-->`[[]]`和`numpy.matrix([[],[],[]])`- -> `matrix([], shape=(3, 0), dtype=float64)`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:03:36.563

正如其他评论者和答案所提到的，对于什么是长度和高度并没有明确的定义。这一切都归结为测量多维数组的维度。

```
size_of_the_first_dimension = len(p) # length?
size_of_the_second_dimension = max([len(a) for a in p]) # height?
size_of_the_third_dimension = max([len(b) for a in p for b in a]) # depth?
size_of_the_fourth_dimension = max([len(c) for a in p for b in a for c in b]) # colour? 
```

... 等等

一般来说，您可以通过如下函数测量第 n 个维度：

```
def measure(dimension,matrix,aggregator=max):
    if dimension <= 0:
        raise ValueError('dimension must be greater than 0')
    elif dimension == 1:
        return aggregator([len(x) for x in [matrix]])
    else:
        try:
            return aggregator([measure(dimension-1,x) for x in matrix])
        except TypeError:
            raise TypeError('matrix is not uniform or does not have %s dimensions' % dimension)

>>> measure(3,[[[1,2],[],[4]],[[3,4,5]],[[3,2],[],[1,2,3,4,5]],[[]]])
5 
```

如果您对维度大小的定义不同，则`max`可以使用`min`或其他东西（作为第三个参数传入）。

# javascript - 使用 Backbone.js 中的路由管理一页应用程序中的多个视图实例

> ID：10876470
> 
> 赞同：1
> 
> 时间：2012-06-04T04:57:06.510
> 
> 标签：javascript, backbone.js

我正在使用 Backbone.js 开发一个单页应用程序。我遇到的一个问题是，由于没有重新加载页面，当创建视图实例时，我假设视图对象将在应用程序的生命周期内保留在内存中。这对我来说似乎不是很有效，因为如果调用另一条路线，可能不再需要特定的视图。但是，如果返回到该原始路线，则可能稍后需要“显示”特定视图。所以问题是，如何最好地管理 Backbone 中关于路由的视图？

在我的应用程序中，许多视图负责显示特定的“页面”，因此共享相同的 DOM 元素。当这些“页面”视图之一被调用时，它将用前一个视图替换之前放置的 DOM 元素中的内容。因此不再需要先前的视图。

我是否需要以某种方式手动销毁以前的视图（或者这是否由路由器对象以某种方式处理）？还是在视图初始化后离开视图更好？

以下示例代码显示了如何在应用程序的路由器中创建视图实例。

```
/** 
 * View - List of contacts 
 */    
var ListContactsView = Backbone.View.extend({
  el: '#content',
  template: _.template($('#list-contacts-tpl').html()),
  initialize: function() {
    _.bindAll(this, 'render');
    this.collection = new Contacts();
    this.collection.bind('reset', this.render);
    this.collection.fetch();
  },
  render: function() {
    this.$el.hide();
    this.$el.html(this.template({ contacts: this.collection }));
    this.$el.fadeIn(500);
  }
});

/** 
 * View - Display single contact 
 */
var DisplayContactView = Backbone.View.extend({
  el: '#content',
  events: {
    'click #delete-contact-button': 'deleteContact'
  },
  template: _.template($('#display-contact-tpl').html()),
  initialize: function() {
    _.bindAll(this, 'deleteContact', 'render');
    // Create reference to event aggregator object.
    if (typeof this.options.id === 'undefined') {
      throw new Error('View DisplayContactView initialized without _id parameter.');
    }
    this.model = new Contact({ _id: this.options.id });
    // Add parse method since parsing is not done by collection in this 
    // instance, as this model is not called in the scope of collection 
    // Contacts.
    this.model.parse = function(response) {
      return response.data;
    };
    this.model.bind('change', this.render);
    this.model.fetch();
  },
  deleteContact: function(id) {
    // Trigger deleteContact event.
    this.eventAggregator.trigger('deleteContact', id);
  },
  render: function() {
    this.$el.html(this.template({ contact: this.model.attributes }));
  }
});

/**
 * Page routes
 */
var $content = $('#content');
var ClientSideRouter = Backbone.Router.extend({
  routes: {
    'browse': 'browse',
    'browse/view/:id': 'browseViewContact',
    'orgs': 'orgs',
    'orgs/:orgName': 'orgs',
    'orgs/:orgName/:id': 'orgs',
    'contact/add': 'addContact',
    'contact/view/:id': 'viewContact',
    'contact/delete/:id': 'confirmDelete',
    '*path': 'defaultPage'
  },
  addContact: function() {
    // Display contact edit form.
    var editContactFormView = new EditContactFormView();
    // Display email field in edit form.
  },
  browse: function() {
    var listContactsView = new ListContactsView();
  },
  browseViewContact: function(id) {
    var displayContactView = new DisplayContactView({ id: id });
  },
  defaultPage: function(path) {
    $content.html('Default');
  },
  home: function() {
    $content.html('Home');
  },
  viewContact: function(id) {
    $.ajax({
      url: '/contact/view/' + id,
      dataType: 'html',
      success: function(data) {
        $content.html(data);
      }
    });
  }
});

var clientSideRouter = new ClientSideRouter();
Backbone.history.start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T05:20:59.403

*   路由不会破坏视图

路由为您提供与 url 更改交互的便捷方式。为了方便，我指的是当前页面的 url 语义和上下文。例如 url`#/!/create/`将调用一个方法，该方法应该显示一个表单来创建一个模型。这里的上下文是创建模型的视图。

*   视图应由开发人员管理

在 Backbone.js 中管理视图仍然不存在众所周知的方式，但我更喜欢**全局变量**的方式。这将确保您的视图实例在整个应用程序中都可用，并且所有模块都可以访问它们。例如这样做

`window.App.Contacts.ContactView = new App.Contacts.View.ContactView({model:BenContact});` 将使用于显示 Ben 的联系信息的视图通过 window 对象提供给应用程序模块。对于使用相同视图的任何视图，您需要做的`el`就是销毁`ContactView`并呈现新视图。

*   您可以查看删除它们的方法

[Undelegate](http://documentcloud.github.com/backbone/#View-undelegateEvents) Events 和[Remove](http://documentcloud.github.com/backbone/#View-remove)方法可帮助您删除它们。在处理路由哈希更改事件的回调方法内部。例如，在处理`#/!/view/all`（查看所有联系人列表的 url）的回调方法中，您可能会遇到两个视图现在使用相同的情况，`el`因此您应该销毁`ContactView`并在回调中渲染`ListView`，执行此操作

`App.Contacts.ContactView.undelegateEvents();`

`App.Contacts.ContactView.remove();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T05:28:18.627

由于 Backbone.js 没有对视图组合的内置支持，因此在跟踪子视图时可以遵循几种模式。

*   Derick Bailey 说明了扩展 Backbone.View 以允许视图自行清理 - [http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)

*   另一种选择是将子视图添加到父视图的属性中，并在删除父视图状态时手动清理它们。

    var ParentView = Backbone.View.extend({ initialize : function(){ this.childViews = []; }, render: function(){ this.childViews.push(new ChildView); } });

*   第三种选择是让子视图订阅父视图触发的事件，以便在父视图发布“关闭”事件时进行清理。

此外，我从您的代码中注意到，您实际上是在子视图类中获取模型。理想情况下，我建议将模型作为参数传递给构造函数，因为这会将视图与数据分离。它更像是 MVC 风格

# java - 如何比较 EL 中的字符串变量？

> ID：10876472
> 
> 赞同：0
> 
> 时间：2012-06-04T04:57:34.430
> 
> 标签：java, jsf, jsf-2, el

我有一个`Mybean`具有 2 个属性的 bean：

```
ArrayList<String> stringArr = {'a','b','c'};
User user; // With 'name' property. 
```

我需要显示`stringArr`如下`<t:dataList>`：

```
<t:dataList value="#{MyBean.a}" var="i">
     <!-- Compare user.name bean propery with i. -->
     <c:if test="#{???}"></c:if>
</t:dataList> 
```

如何在每次迭代中`test="#{???}"`比较`#{user.name}`with var ？`#{i}`我最终需要检查是否`user.name == i`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T14:42:51.523

如果我没有误读您的问题，您想根据循环变量的状态输出一些东西，例如`h:outputText`：

```
<t:dataList value="#{MyBean.a}" var="i">
  <h:outputText value="#{MyBean.user.name == i ? 'match' : 'no match'}"/>
</t:dataList> 
```

`match`如果条件为真，`no match`否则将打印。

# java - 如何将平假名转换为半角片假名？

> ID：10876484
> 
> 赞同：2
> 
> 时间：2012-06-04T04:59:17.150
> 
> 标签：java, android, unicode, localization, cjk

我想将平假名字符转换为半角片假名字符。我怎样才能在安卓上做到这一点？

我有将平假名转换为片假名的代码，如下所示......

```
 private char hiraganaTokatakana(String hiraganastring) {

    char hiraganachar = Character.valueOf(hiraganastring.charAt(0));
    // convert char to unicode value
    String hiraganahex = Integer.toHexString(hiraganachar & 0xFFFF);
    // convert unicode to decimal
    int hiraganadecimalNumber = Integer.parseInt(hiraganahex, 16);
    // convert hiragana decimal to katakana decimal
    int katakanadecimalNumber = Integer.valueOf(hiraganadecimalNumber) + 96;
    // covert decimal to unicode value
    String katakanahex = Integer.toString(katakanadecimalNumber, 16);
    // convert unicode to char

    return (char) Integer.parseInt(String.valueOf(katakanahex), 16);
} 
```

此代码将平假名转换为片假名但我也想将平假名转换为半角片假名，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T05:28:00.803

这是在 Unicode 标准中形式化的，[java.text.Normalizer](http://developer.android.com/reference/java/text/Normalizer.html)应该能够处理它。我不知道它在 Android 上的效果如何。这是 Java SE 教程：http: [//developer.android.com/reference/java/text/Normalizer.html](http://developer.android.com/reference/java/text/Normalizer.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T18:55:54.577

[http://mariten.github.io/kanatools-java/en/kana-converter/](http://mariten.github.io/kanatools-java/en/kana-converter/)应该可以工作：

```
int conversion_flags = OP_ZEN_HIRA_TO_HAN_KATA;
String output = KanaConverter.convertKana(input, conversion_flags); 
```

# android - 如何更新 TabSpec

> ID：10876487
> 
> 赞同：1
> 
> 时间：2012-06-04T04:59:39.093
> 
> 标签：android

我有 3 个选项卡包含不同的内容。他们从 Internet 加载内容。我使用 3 个 AsyncTasks 来做到这一点。一开始，3 个选项卡显示 3 个 ProgressBar。我希望每次完成一项任务时，它都会更新 TabSpec 并隐藏 ProgressBar。 **问题是我不知道如何更新标签规范。**

这是我在开始时创建 TabHost 的片段。

```
 final List<View> containerList = new ArrayList<View>();
    for(int i = 0; i < 4; ++i) {
        final LinearLayout layout = new LinearLayout(this);
        final ProgressBar progressBar = new ProgressBar(this);
        progressBar.setVisibility(View.VISIBLE);
        layout.addView(progressBar);            
    }

    // Prepare labels and icons.        
    final List<String> tabLabels = Arrays.asList(getResources().getStringArray(R.array.destination_tab_labels));       
    // TODO Prepare icons here later.

    // Populate tabs' contents.
    final TabHost tabHost = getTabHost();
    for(final String label : tabLabels) {
        final TabSpec tab = tabHost.newTabSpec(label);
        tab.setContent(new TabContentFactory() {
            @Override
            public View createTabContent(final String tag) {
                // Return ListView here later.
                return containerList.get(i++);
            }
        });
        //TODO Add icon here later.
        tab.setIndicator(label);
        tabHost.addTab(tab);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T05:26:43.737

创建 3 个活动，每个活动都有自己的内容、AsyncTask 和进度条。对于任务完成的任何活动，它将更新其内容并隐藏进度条。
将这 3 个活动添加到选项卡主机，例如 ::

```
TabHost host = getTabHost(); 
host.addTab(host.newTabSpec("one").setIndicator("TAB1").setContent(new Intent(this, MyActivity1.class)));
host.addTab(host.newTabSpec("two").setIndicator("TAB2").setContent(new Intent(this, MyActivity2.class)));
host.addTab(host.newTabSpec("two").setIndicator("TAB2").setContent(new Intent(this, MyActivity3.class))); 
```

# java - 如何使用 KeyListener

> ID：10876491
> 
> 赞同：5
> 
> 时间：2012-06-04T05:00:01.393
> 
> 标签：java, awt, keylistener

我目前正在尝试在我的程序中实现一个按键监听器，以便当我按下箭头键时它会执行一个操作，我的程序中的对象要么向左要么向右移动。

这是我程序中的移动方法

```
public void moveDirection(KeyEvent e)
    {
        int move = 0;
        int r = K.getRow();
        int c = K.getCol();
        if (e.getKeyCode() == 39) move = 1; //KeyEvent.VK_RIGHT
        if (e.getKeyCode() == 37) move = 2; //KeyEvent.VK_LEFT
        //if (e.getKeyCode() == KeyEvent.VK_DOWN) move = 3;

        switch (move)
        {
            case 1: if (inBound(r, c+1))
                        K.setLocation(r ,c+1); 
                    if (inBound(r, c-1) && frame2[r][c-1] == K)
                        frame2[K.getRow()][K.getCol()-1] = null; 
                    break; //move right 39
            case 2: K.setLocation(K.getRow(), K.getCol()-1); break; //move left 37
            //case 3: b.setLocation(b.getRow()+1, b.getCol()); break; //move down
            default: return;
        }        
        processBlockList();
    } 
```

我想知道程序应该如何读取 (KeyEvent) e。我真的不能输入箭头键....

请帮忙！

编辑：我还需要知道我需要添加到我的代码中，以便我的程序等待大约 700 毫秒的键输入，然后再转到另一种方法

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-04T05:03:32.390

[http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html) 查看本教程

如果它是一个基于 UI 的应用程序，那么“我还需要知道我需要添加到我的代码中的内容，以便我的程序在转到另一个方法之前等待大约 700 毫秒的按键输入”你可以使用 GlassPane 或 Timer 类来实现要求。

对于关键事件：

```
public void keyPressed(KeyEvent e) {

    int key = e.getKeyCode();

    if (key == KeyEvent.VK_LEFT) {
        dx = -1;
    }

    if (key == KeyEvent.VK_RIGHT) {
        dx = 1;
    }

    if (key == KeyEvent.VK_UP) {
        dy = -1;
    }

    if (key == KeyEvent.VK_DOWN) {
        dy = 1;
    }
} 
```

检查这个游戏示例[http://zetcode.com/tutorials/javagamestutorial/movingsprites/](http://zetcode.com/tutorials/javagamestutorial/movingsprites/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-04T05:28:23.760

这是一个[SSCCE](http://sscce.org) ,

```
package experiment;

import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class KeyListenerTester extends JFrame implements KeyListener {

    JLabel label;

    public KeyListenerTester(String s) {
        super(s);
        JPanel p = new JPanel();
        label = new JLabel("Key Listener!");
        p.add(label);
        add(p);
        addKeyListener(this);
        setSize(200, 100);
        setVisible(true);

    }

    @Override
    public void keyTyped(KeyEvent e) {

        if (e.getKeyCode() == KeyEvent.VK_RIGHT) {
            System.out.println("Right key typed");
        }
        if (e.getKeyCode() == KeyEvent.VK_LEFT) {
            System.out.println("Left key typed");
        }

    }

    @Override
    public void keyPressed(KeyEvent e) {

        if (e.getKeyCode() == KeyEvent.VK_RIGHT) {
            System.out.println("Right key pressed");
        }
        if (e.getKeyCode() == KeyEvent.VK_LEFT) {
            System.out.println("Left key pressed");
        }

    }

    @Override
    public void keyReleased(KeyEvent e) {
        if (e.getKeyCode() == KeyEvent.VK_RIGHT) {
            System.out.println("Right key Released");
        }
        if (e.getKeyCode() == KeyEvent.VK_LEFT) {
            System.out.println("Left key Released");
        }
    }

    public static void main(String[] args) {
        new KeyListenerTester("Key Listener Tester");
    }
} 
```

* * *

另外阅读这些链接：[如何编写键监听器](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)和[如何使用键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-01T13:26:12.927

实现`KeyListener`接口的类成为我们自定义的按键事件监听器。这个监听器不能直接监听按键事件。它只能通过`JFrame`. 所以

1.  将一个 Key 侦听器类设为

    ```
    class MyListener implements KeyListener{

       // override all the methods of KeyListener interface.
    } 
    ```

2.  现在我们的班级`MyKeyListener`已经准备好收听关键事件了。但它不能直接这样做。

3.  创建任何对象，例如`JFrame`对象，通过它`MyListener`可以侦听关键事件。为此，您需要将`MyListener`对象添加到`JFrame`对象。

    ```
    JFrame f=new JFrame();
    f.addKeyListener(new MyKeyListener); 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-23T16:41:59.130

除了使用 KeyListener （如其他人的答案所示）外，有时您还必须确保您使用的 JComponent 是 Focusable。这可以通过将其添加到您的组件来设置（如果您是子类化）：

```
@Override
public void setFocusable(boolean b) {
    super.setFocusable(b);
} 
```

并将其添加到您的构造函数中：

```
setFocusable(true); 
```

或者，如果您从父类/容器调用该函数：

```
JComponent childComponent = new JComponent();
childComponent.setFocusable(true); 
```

然后做其他人提到的所有 KeyListener 的东西。

# sql-server - 更新后 SQL Server 似乎没有自动启动

> ID：10876500
> 
> 赞同：1
> 
> 时间：2012-06-04T05:02:04.713
> 
> 标签：sql-server

这是一个很短的问题。我有 SQL Server 2008 R2。几天前，我下载了 Silverlight，它打开了“其他 Microsoft 应用程序的更新”，这反过来又意识到 Visual Studio、SQL Server 和其他一些杂项有很多更新。我都下载并安装了，现在打开电脑似乎SQL Server不再启动了。它仍然设置为自动，并且 SQL Express 可以正常启动。知道为什么不会吗？有什么干扰它？

需要注意的是，一旦我单击“开始”，它就可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T05:30:45.860

我建议将服务从自动更改为自动（延迟启动）。您可以直接从该`Control Panel->Administrative Tools->Services`区域执行此操作。

我个人见过在启动期间发生其他事情阻止服务的情况，但更改为 Auto-Delayed 修复了症状。注意我故意使用了症状这个词。

真正的问题可能仍会被发现并修复 - 但测试自动（延迟启动）至少可以帮助您解决问题。

# php - php中后退按钮的使用

> ID：10876501
> 
> 赞同：0
> 
> 时间：2012-06-04T05:02:05.963
> 
> 标签：php

我对 PHP 世界很陌生。我面临的问题是使用后退按钮。当我单击从 page2 到 page1 的后退按钮时，我在 page1 上选择的选项没有得到保存。所以我需要在 page1 中再次选择所有数据。我正在使用会话。有趣的是，当我在第 1 页上使用文本框问题并将其值提交到第 2 页，然后单击第 2 页上的后退按钮时，数据正在保存。请看一下这段代码，我将此文件命名为 1.php

```
<?php
  session_start();
?>
<html>
<body>
<form action="2.php" method="post">

Name<input type="text" name="name" value="<?php if(isset($_SESSION['name'])) echo $_SESSION['name']; ?>"/>

<input type="submit"  value="next"/>
</form>
</body>
</html>

I named this file as 2.php

<?php
session_start();
$name = $_POST['name'];
session_register('name');

?>
<html>
<body>
<form action="1.php" method="post">

<input type="submit"  value="back"/>
</form>
</body> 
```

问题是我不知道如何在单选按钮上实现这一点。你能帮我吗提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T05:05:59.923

如果您需要一个多步骤的表单，而不是一次提交每个页面，您可以使用 css 隐藏和显示上一步和下一步，并一次提交所有数据，这样对用户来说会更快，因为您的次数与服务器的交谈也减少了。

检查[此链接](http://webexpedition18.com/articles/how-to-create-a-multi-step-signup-form-with-css3-and-jquery/)以了解如何使用 css 和 js 创建多步骤表单

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T05:25:32.687

试试这个，

1.php

```
<?php
  session_start();
?>
<html>
<body>
<form action="2.php" method="post">

Radio1 <input type="radio" name="name" value="radio1" <?php if($_SESSION['name'] == 'radio1') echo "checked='checked'" ?>/><br/>
Radio2 <input type="radio" name="name" value="radio2" <?php if($_SESSION['name'] == 'radio2') echo "checked='checked'" ?>/><br/>
Radio3 <input type="radio" name="name" value="radio3" <?php if($_SESSION['name'] == 'radio3') echo "checked='checked'" ?>/><br/>

<input type="submit"  value="next"/>
</form>
</body>
</html> 
```

2.php

```
<?php
session_start();
$name = $_POST['name'];
$_SESSION['name'] = $name;

?>
<html>
<body>
<form action="1.php" method="post">

<input type="submit"  value="back"/>
</form>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T05:12:11.183

使用单选按钮，您可以确定选择了哪个（基于值），并将`selected`属性添加到其中。

但是，如果您可以使用它，上面 Sandeep 的答案会更好。

# java - 由于缺少类，maven-ant-run 插件失败

> ID：10876508
> 
> 赞同：3
> 
> 时间：2012-06-04T05:03:07.907
> 
> 标签：java, maven-3

早些时候我使用 maven 存储库来下载所有工件，因此我的项目成功构建。但是，当我删除本地存储库并将我的神器作为 maven 站点的镜像时..我在使用 maven 3.0.4 构建时遇到此错误：

```
NFO] ------------------------------------------------------------------------
RROR] Failed to execute goal org.apache.maven.plugins:maven-antrun-plugin:1.5:run (default) on project leida-runtime: Execution default of
oal org.apache.maven.plugins:maven-antrun-plugin:1.5:run failed: Unable to load the mojo 'run' in the plugin 'org.apache.maven.plugins:mav
-antrun-plugin:1.5'. A required class is missing: org/apache/tools/ant/BuildException
RROR] -----------------------------------------------------
RROR] realm =    plugin>org.apache.maven.plugins:maven-antrun-plugin:1.5
RROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy
RROR] urls[0] = file:/C:/Documents%20and%20Settings/user/.m2/repository/org/apache/maven/plugins/maven-antrun-plugin/1.5/maven-antrun-
ugin-1.5.jar
RROR] urls[1] = file:/C:/Documents%20and%20Settings/user/.m2/repository/org/codehaus/plexus/plexus-interpolation/1.1/plexus-interpolat
n-1.1.jar
RROR] urls[2] = file:/C:/Documents%20and%20Settings/user/.m2/repository/junit/junit/3.8.1/junit-3.8.1.jar
RROR] urls[3] = file:/C:/Documents%20and%20Settings/user/.m2/repository/org/codehaus/plexus/plexus-utils/2.0.5/plexus-utils-2.0.5.jar
RROR] urls[4] = file:/C:/Documents%20and%20Settings/user/.m2/repository/org/apache/ant/ant-nodeps/1.8.1/ant-nodeps-1.8.1.jar
RROR] Number of foreign imports: 1
RROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]] 
```

我已经检查了 maven-antrun-plugin 的 jar，它有 Ant-run 类。也在另一个 jar org.apache.ant1.8.1 jar 中，这个类*org/apache/tools/ant/BuildException*仍然存在我得到这个错误..我无法解决这个问题..谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-18T03:24:09.767

也许 m2/repository/org/apache/ant/ant/1.8.1/ant-1.8.1.jar 文件已损坏。您应该删除 m2/repository/org/apache/ant/ant/1.8.1 目录并重试。

# android - 在管理 Android 应用程序设计、开发、维护和升级时需要注意什么

> ID：10876512
> 
> 赞同：2
> 
> 时间：2012-06-04T05:03:48.733
> 
> 标签：android, android-layout

在过去的 10 年里，我一直是一名 Web 开发人员，在我的职业生涯中拥有一点 Java GUI (Swing) 和 VB 6 开发经验。

但是，我的任务是支持一家企业，该企业使用我们无法控制的后端外包了基于 Android 的应用程序的开发，并评估了可能的额外后端提供商。我一直在跟踪过去几年的发展，也熟悉开发者风格指南[http://developer.android.com/design/index.html](http://developer.android.com/design/index.html)

虽然我了解数据库驱动的 Web 应用程序的基本软件开发生命周期，但我想了解有关 Android 开发的问题，其中可能包括：

a) 工具选择

b) 安装在手机上

c) 单元、集成和负载测试

d) 处理连接不良 - 因为这些应用程序可能用于在网络质量低的区域收集数据

e) 本地数据存储注意事项

f) 内存考虑 - 考虑到手机是 PCS 以外的低内存设备

g) 应用流程设计

h) 使用预建的应用小部件和选择小部件供使用

i) 代码质量评估

j) 版本控制 - 是否有任何特殊问题

k) 自动构建、打包、部署和升级 + 无线推送更新

l) 应用设计——线框图和应用流程

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T05:55:34.060

这实际上是一个非常广泛的问题，取决于个人，可以为他的应用选择什么设计模式。任何适用于 OOP 的设计模式都可以在 Android 应用程序中使用。先生，您在您的领域非常有经验，我只是一个新手 android 开发人员，但我仍然想回答您的一些问题。对于您的许多问题， http: [//developer.android.com/design/index.html](http://developer.android.com/design/index.html)足以回答。

**在手机上安装：在手机上**安装应用程序非常简单，因为您只需将您的移动/平板设备连接到您的 PC 并运行您的应用程序，这将自动在设备上安装您的应用程序。另一种方法是复制在模拟器上运行时为您的应用创建的 .APK 文件，并将其粘贴到您的移动/平板设备的任何文件夹中。然后转到该文件夹​​并安装该应用程序。就如此容易。

**Android 中的单元测试：**请参阅[http://developer.android.com/guide/topics/testing/testing_android.html](http://developer.android.com/guide/topics/testing/testing_android.html) 这是一个非常有用的链接。而且，这很容易实现。

**本地数据存储：**请参阅[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

**内存注意事项：**根据我个人的经验，由于手机是低内存设备，或者更具体地说，android OS 为安装在其上的每个应用程序分配固定数量的内存，您需要很好地使用您的资源，并将资源清除为使用后尽快。您遇到的一个常见错误是 android 中的 OOME。有关更多详细信息，请参阅我的回答：[位图大小超出 Vm 预算错误 android](https://stackoverflow.com/questions/10737582/bitmap-size-exceeds-vm-budget-error-android/10738115#10738115)

**代码质量评估：**为此，有一个 Eclipse 插件 PMD，它会检查您的代码并找出您所做的所有编程错误，或者告诉您您使用的哪些语句不符合编程标准。要下载 PMD： http: [//sourceforge.net/projects/pmd-eclipse/](http://sourceforge.net/projects/pmd-eclipse/)并安装它： http: [//pmd.sourceforge.net/eclipse/](http://pmd.sourceforge.net/eclipse/)

**版本控制：**如果这个问题是关于 Android 版本的，那么按照建议，您应该开发一个可以在具有任何 Android 版本的任何设备上运行的应用程序。但是您也可以开发一个应用程序，该应用程序应该只适用于具有特定 android 版本的特定类型的设备。

**处理连接性差：**您最好知道它的答案，因为您是一名 Web 开发人员，但我可以建议的是，每次在做任何需要互联网的事情之前，在继续之前，首先检查互联网是否可用，如果是，则仅继续，否则向用户提供有关该问题的相应消息。

**设计问题：**根据我的说法，您可以使用任何设计模式，但始终可以看到，您可以如何有效地使用可用内存和时间。始终尽量减少点击次数，也就是说，用户应该能够以最少的点击次数使用您的应用提供的任何功能。

我希望我已经解决了你的一些问题，谢谢:)

# nancy - 在 Nancy 中访问超级简单的视图引擎母版页？

> ID：10876529
> 
> 赞同：0
> 
> 时间：2012-06-04T05:06:10.890
> 
> 标签：nancy

我对我正在从事的项目有特定的要求。我喜欢从服务器端更改母版页的 CSS 和属性。我想更改应用程序的主题。

[Nancy - 超级简单的视图引擎：如何在视图中覆盖 MasterPage 的标题？](https://stackoverflow.com/questions/9922691/nancy-super-simple-view-engine-how-do-i-override-a-masterpages-title-in-the)

检查后，我知道如何覆盖母版页的属性。我使用 Nancy 作为 Web 框架和超级简单的视图引擎。这是 Nancy 的默认设置。在这里，根据上一个链接，我需要将主题属性与我传递给视图的每个视图模型一起传递。

所以，我的问题是，除了这个还有什么办法吗？意味着我直接访问数据库以检查主题的当前用户设置并呈现它，并且我的核心应用程序部分保持不变。

如果需要任何进一步的细节，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T12:18:03.630

从评论中改写...链接的帖子向您展示了如何在母版页中使用 ViewModel 中的属性。
您可以以类似的方式传递主题详细信息。
我通常使用包含公共属性的 BaseViewModel 来执行此操作。

# android - android- ADT 18.0 样式

> ID：10876532
> 
> 赞同：3
> 
> 时间：2012-06-04T05:06:18.363
> 
> 标签：android, adt

以前我使用 ADT10.0 。在这个版本中，我没有收到任何关于样式的错误。在我将我的 ADT 更新到 18.0 之后。现在我收到以下错误。

> 错误：检索项目的父项时出错：未找到与给定名称“@android:style/Widget.RatingBar.Small”匹配的资源。

我该如何解决这个问题？[我在某个地方看到了使用http://source.android.com/source/downloading.html](http://source.android.com/source/downloading.html)解决此导入样式的问题，但这是无法理解的，任何人都可以帮助我吗？

```
<style name="reviewRatingBar1" parent="@android:style/Widget.RatingBar.Small" >

    <item name="android:progressDrawable">@drawable/review_rating_bar_full</item>
    <item name="android:minHeight">13dip</item>
    <item name="android:maxHeight">13dip</item>
</style> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T06:27:48.473

根据[`android.R.style`](http://developer.android.com/reference/android/R.style.html)文档，没有`Widget.RatingBar.Small`样式（不再），这似乎是 Eclipse 给您该错误的原因。

比较`styles.xml`来自例如 API 级别 7 和 15 的文件，似乎该样式不再是公开的。如果我尝试在 Eclipse 中引用它，我实际上会收到一条错误消息来确认这一点

> 错误：资源不是公开的。（在 'style' 中，值为 '@android:style/Widget.RatingBar.Small'）。

据我所知，这里有几种选择：

1.  按照@havexz 的建议进行操作并复制原始样式和引用的资源。不幸的是，这将使您的明星在每台设备上都有固定的外观。换句话说：您无法使用设备制造商提供的基于主题的资源，并且星星看起来与用户习惯的不同。
2.  `style="?android:attr/ratingBarStyleSmall"`声明时参考`RatingBar`。但是，您不能从这种基于主题的样式继承，因此对默认“小”样式的任何自定义都必须复制到所有其他小评级栏。
3.  如果您以 Honeycomb 或以上设备为目标，您可以参考`Widget.Holo.RatingBar.Small`或`Widget.Holo.Light.RatingBar.Small`。您可能会根据其中任何一个来设计您的应用程序，因此您会在设计时知道要继承哪种样式。
4.  看来你`RatingBar`无论如何都限制了小尺寸的高度，所以你可以只继承常规`RatingBar`风格吗？

# java - 多对一关联中的外键级联

> ID：10876536
> 
> 赞同：0
> 
> 时间：2012-06-04T05:06:51.127
> 
> 标签：java, mysql, hibernate

我有两个有父子关系的班级

```
<class name="parent">   
   <id name="id">    
      <generator class="assgned"/>   
   </id>   
   <property name="currency"/>
   <property name="description" length="400"> 
</class> 

<class name="child"> 
  <id name="id">    
<generator class="native"/>   
</id>
   <property name="someprop1"/>
   <property name="someprop2">
   <many-to-one class="Parent" column="parent_field" name="parent" cascade="save-    
    update" />
</class> 
```

当我在子类中插入新行时，它会更新子类中的现有行，而不是插入新行并使用外键映射新 id。

我认为我在选择生成器类和级联选项时弄错了。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:03:55.580

级联的映射应该在父类中，并指向子类。如果在子列表中添加新的子对象以及旧的子对象，则保存父类。它将保存在新行中并自动递增id 如果已配置，请记住，如果您将孩子与父母一起保存，并且所有孩子都在对象中设置了主键，他们将更新数据库中的现有行，因为这是正确的工作行为。

# jquery - Firefox 和 Opera 都是 HTML5 浏览器，为什么他们使用 jPlayer 的 Flash 后备？

> ID：10876537
> 
> 赞同：1
> 
> 时间：2012-06-04T05:06:58.770
> 
> 标签：jquery, jplayer

我已阅读常见问题解答，但找不到我的问题的答案。

[http://jplayer.org/support/](http://jplayer.org/support/)

我的要求是，如果 Firefox/Opera/Chrome 浏览器中不存在 flash，它应该使用 HTML5“音频”来播放音频文件。

这是我的代码的样子

```
/*Following code creates URL for M4A and OGG from MP3 url*/
var _oggurl = _url.substring(0, _url.lastIndexOf("."))+".ogg";
var _m4aurl = _url.substring(0, _url.lastIndexOf("."))+".m4a";

$('#jquery_audioPlayer').jPlayer("setMedia", {mp3:_url, m4a:_m4aurl, oga:_oggurl});
$('#jquery_audioPlayer').jPlayer("supplied", "mp3, m4a, oga");
$('#jquery_audioPlayer').jPlayer("play"); 
```

我已将音频转换为 3 种不同格式的 mp3、m4a 和 ogg，并将参数传递给 jPlayer。仍然当从浏览器中删除 Flash 插件时，音频不会播放。我已经通过使用 HTML5 的音频标签（没有 jPlayer）单独嵌入它来检查音频并且它可以正确播放。

我应该合并哪些更改才能使其正常工作。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T06:06:51.800

好的，我想出了解决方案。在 jPlayer 的初始化过程中，我没有通过“提供”。使用 flash 解决方案时不会导致任何问题，但会导致 HTML5 音频出现问题。

```
$("#jquery_audioPlayer").jPlayer({
swfPath: "../js",
supplied: "oga, m4a, mp3",
solution: "html, flash",
wmode: "window"
}); 
```

# eclipse - Eclipse 可执行启动器无法找到它的配套启动器 jar 窗口

> ID：10876538
> 
> 赞同：69
> 
> 时间：2012-06-04T05:07:10.250
> 
> 标签：eclipse

我面临一个小问题，需要帮助。

我不得不在我的笔记本电脑上重新安装 Windows。之后我安装了 Java，解压 Eclipse 并设置环境变量，即 Java bin 目录的路径，还创建了一个 JAVA_HOME 变量并设置它。每次我尝试打开 eclipse.exe 时，都会出现以下错误。

> eclipse 可执行启动器无法找到它的配套启动器 jar。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-06-04T06:41:03.053

出现此消息的最常见原因似乎是错误地解压缩了 eclipse zip 文件（例如在未重新创建目录结构的情况下解压缩）。因此，请使用一个好的解压工具（如 7-zip）再次解压压缩后的 Eclipse，并确保在解压过程中创建了必要的子目录。

还要确保解压后的 Eclipse 的路径不会很长。我已经看到 Eclipse 被解压缩到一个深度嵌套的目录结构中（将它放在某个位置到 SVN 存储库中）并导致相同的错误消息的情况。

如果这仍然不起作用，您可以尝试使用管理权限启动 eclipse.exe。这实际上不是必需的，但是在重新安装 Windows 后，您的访问权限可能会以某种方式被破坏。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-01T07:04:22.913

编辑`eclipse.ini`文件并删除这两行：

```
-startup
plugins\org.eclipse.equinox.launcher_1.0.100.v20080509-1800.jar 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-03-03T14:52:45.830

在我的 Mac 上使用仅解压缩的预打包 RCP 客户端也存在同样的问题。其他答案将我指向所有路径看起来都有效的 eclipse.ini，试图检查我的 Eclipse 包的工作目录，这看起来并不容易。似乎当 Finder 启动应用程序时，它的工作目录是 / 所以这似乎是问题所在。

将我的 eclipse.ini 中的两个引用都更新为绝对路径，瞧！

```
-startup
/Applications/RCPClient/client/eclipse/plugins/org.eclipse.equinox.launcher_1.1.1.R36x_v20101122_1400.jar
--launcher.library
/Applications/RCPClient/eclipse/plugins/org.eclipse.equinox.launcher.cocoa.macosx.x86_64_1.1.2.R36x_v20101019_1345
... 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-17T06:04:08.357

Mac 解决方案

**原因：** Eclipse 从一个位置复制到另一个位置。

**解决方案：**需要更新`eclipse.ini`. 我的`eclipse.ini`被​​发现在`/Applications/eclipse/Eclipse.app/Contents/MacOS/eclipse.ini`.

我们需要更新`plugins\org.eclipse.equinox.launcher_1.0.100.v20080509-1800.jar`.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-04-05T08:51:32.387

当它来自旧位置时，您必须从旧位置复制用户/用户/.p2 和 .eclipse。例如，我从计算机复制到另一台计算机，我遇到了这个错误，然后我复制了这些文件夹并且它工作了！

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-05-17T20:15:32.887

我有同样的问题，下面的解决方案完全适合我......！

编辑`eclipse.ini`文件并删除这两行：

`--launcher.library .%%..\eclipse\plugins\eclipse\plugins\org.eclipse.equinox.launcher.win32.win32.x86_1.1.200.v20120522-1813`

确保在进行任何更改之前制作此文件的单独副本... :)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-02-15T08:55:18.233

你可能想检查那个库

```
**org.eclipse.equinox.launcher_(version).dist.jar**
and 
**plugins/org.eclipse.equinox.launcher.gtk.linux.x86_(version).dist**
exists on your system. 
```

确保 eclipse.ini 中提到的库版本与系统上存在的版本相同。通常在升级后会发生这种不匹配，并且 eclipse 无法找到所需的 jar。请在[此处查看此博客文章](http://codewithgeeks.blogspot.in/2013/11/fixing-eclipse-executable-launcher-was.html)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-05-12T14:12:31.620

我刚遇到这个问题，它似乎与权限有关。我最初将它解压缩到我的 Program Files 文件夹，在 Windows 8 中。直接解压缩到 C 后：程序正常启动。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-12-09T18:42:04.870

请检查“eclipse.ini”文件：

通常不应有任何硬代码路径，例如：（
例如）
P:\eclipse\plugins\org.eclipse.equinox.launcher.win32.win32.x86_1.1.200.v20140603

如果您看到类似的内容，请按照以下步骤操作：
1\. 备份文件
2\. 然后在编辑器中打开文件原始文件
3\. 将静态路径更改为：--plugins/org.eclipse.equinox.launcher.win32。 win32.x86_1.1.200.v20140603 （保存文件并打开你的eclipse它会很棒）

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-09-24T09:24:04.697

打开 eclipse.ini 并用这个替换~

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.200.v20120522-1813
-product
com.android.ide.eclipse.adt.package.product
--launcher.XXMaxPermSize
256M
-showsplash
com.android.ide.eclipse.adt.package.product
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.6
-Xms40m
-Xmx768m
-Declipse.buildId=v21.0.0-531062 
```

这对我有用，祝你好运~

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-09-04T21:56:04.463

我收到此错误是因为在 Windows 上，开始菜单中的 Zend Studio 图标仍指向以前版本的 Zend Studio。一旦我将目标更改为新路径，错误就消失了。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-12-04T07:07:05.470

我的问题要简单得多。我创建了一个快捷方式，通过将 eclipse 可执行文件从文件夹拖到屏幕上来启动它。单击创建的快捷方式图标会出现上述错误。

问题：可执行文件是从桌面位置而不是解压缩它的 eclipse 目录启动的。

解决方案：通过右键单击桌面区域并从浏览窗口提供目标可执行文件来创建新的快捷方式。这会正确创建快捷方式并从正确的主目录启动可执行文件。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-01-04T16:23:01.800

我有同样的问题，似乎 eclipse.ini 文件中的“--launcher.library”地址错误。所以我刚刚改变了它

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-04-01T13:14:40.373

就我而言，我不得不重新下载它，我下载的那个有问题。它的大小远远小于网站上的大小。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-09-15T22:26:56.667

只需在 eclipse.ini 中的 -vmarg 之前添加 -vm C:\Java\JDK\1.6\bin\javaw.exe 这对我有用。希望这会帮助你好运......

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2014-12-24T06:00:21.800

Windows 8 遵循以下 3 个步骤：

1.  找到eclipse文件。
2.  创建桌面快捷方式。
3.  双击eclipse快捷方式打开应用程序。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2015-03-31T09:03:32.267

我在使用 Eclipse JUNO 和 windows XP 时遇到了同样的问题。在更改了很多东西后`eclipse.ini`仍然无法正常工作，然后我将其删除，我不知道为什么在删除此初始化文件后它开始工作。你可以试试你的

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-07-13T20:51:42.213

在 Windows Eclipse 安装程序上，应用程序也在管理员用户目录下写入。当我与普通（另一个）用户启动相同的 Eclipse 时，它​​找不到管理员用户 ecplise 目录。该目录位于 eclipse.ini 文件中。（这个安装程序是为霓虹灯制作的。）

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2019-12-13T21:49:40.010

以管理员身份运行 eclipse.exe 文件。它对我有用

# php - 如何使用 php 从 .accdb 访问中读取数据？（windows & linux）

> ID：10876539
> 
> 赞同：0
> 
> 时间：2012-06-04T05:07:35.307
> 
> 标签：php, windows, ms-access, ubuntu-server

我有一个 Ubuntu 服务器。它运行 Apache、Mysql、PHP。我使用 Xampp 在 Windows 上开发并将文件复制到 Ubuntu 服务器中。我需要对 Windows 和 Linux 使用相同的代码来使用 PHP 读取 Ms-access .accdb 文件。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-24T12:56:18.220

也许没有好的解决方案。

唯一可以处理 Access 文件的库是[mdbtools](http://mdbtools.sourceforge.net/)，它不支持 accdb 文件（2007 版）

# oop - 创建包装对象以对可怕的 Fortran 代码进行去卷积？

> ID：10876543
> 
> 赞同：2
> 
> 时间：2012-06-04T05:08:40.070
> 
> 标签：oop, object, pointers, fortran, legacy-code

尽管我可以使用最新的编译器，但我必须使用一些旧版 Fortran。

该代码将大量数据存储在一维数组中。

例如，

```
PROGRAM horrible_coding
IMPLICIT EVERYTHING ! Sarcasm

REAL, DIMENSION(1000) :: data
INTEGER, DIMENSION(50)   :: info_location

! Somewhere, info is read in and stored temporarily as info_1, info_2, etc.

data(1:3) = info_1
data(4:9) = info_2
...
data(134:192) = info_n 
```

`DATA`数组中的哪些元素与哪些元素之间的关联`info`存储在第二个数组中。就像是：

```
info_location(1) = 1
info_location(2) = 4
info_location(n) = 134 
```

这是正确的。数组的每个元素的值是`info_location`指数据数组的第一个元素，您可以在其中找到相关信息。

因此，例如，如果要获取 info_7 的数据，则必须执行以下操作：

```
size_of_info_7 = info_location(8) - info_location(7)
ALLOCATE(data_for_info_7(size_of_info_7))
data_for_info_7 = data(info_location(7) : info_location(7) + size_of_info_7 - 1) 
```

到现在为止，看到这种精神错乱可能会让你的眼睛开始喷血，所以我很抱歉。

我想创建对象实例并将每条信息的所有相关数据存储为实例数据。当我把事情带到 2003 年时，我会创建实例方法来获取和设置实例数据。

我不想重写代码，但想把这种现代化放在已经存在的东西之上。

我相信我可以通过使对象实例数据简单地指向`data`包含相关信息的数组的实际元素的指针来实现这一点。

这是合理的做法吗？

我可以在 Fortran 中创建实例数据主要是指针的对象吗？

如果没有先将这个想法扔给stackoverflow，我会犹豫是否要开始这项任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T07:29:06.183

> 我可以在 Fortran 中创建实例数据主要是指针的对象吗？

我不确定你的意思，但你绝对可以做一些事情：

```
type data_ptr
  real,dimension(:),pointer :: data
end type 
```

您还可以制作以下类型的数组：

```
type(data_ptr),dimension(:),allocatable :: some_name 
```

（也可以是指针或静态，如你所愿。）

然后，如果原始数据具有`TARGET`属性，则可以使用：

```
some_name(i)%data => data(lower:upper) 
```

您还可以将指针重新映射到不同的下限，上面的过程将其设置为下限 1。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T10:42:04.900

我发现您发布的“代码”有点令人困惑。我希望你知道这些线条

```
data(1:3) :: info_1
data(4:9) :: info_2
...
data(134:192) :: info_n 
```

不是语法上有效的 Fortran（任何一代）。我认为我可以解释您试图告诉我们的内容，但宁愿不提供基于（错误）解释的建议。此外，您将诸如此类`info_1, info_2`的实体混入其中，而没有阐明它们的定义和声明。我不确定是否`info_1`与`info_location(1)`.

如果我了解您发布的内容，那么您有一个相当常见的（在旧的 Fortran 代码中）结构，其中一个固定大小的数据数组（在此处有用地称为`data`）用于存储项目集合。然后，您有一个索引数组（称为`info_location`），其中包含每个项目开头的数据索引。这个索引数组是 REAL 类型是非常奇特的，我希望它是 INTEGER 以便您可以编写如下语句：

```
data(info(3):info(4)-1)) 
```

这当然不会让我的眼球流血，也许我在 Fortran 中编程的时间太长了，但它看起来对我来说完全合理！您应该考虑的一种选择是以`info_location`某种方式转换为 INTEGER 并将其用作索引数组。或者，您可以在需要时进行这些转换，编写如下行：

```
data(int(info(3)):int(info(4))-1)) 
```

我个人会制作一个 INTEGER 索引数组，REAL 是数组索引的错误类型。

然后，你写

> 因此，例如，如果要获取 info_7 的数据，则必须执行以下操作：

```
size_of_info_7 = info_location(8) - info_location(7)
ALLOCATE(data_for_info_7(size_of_info_7))
data_for_info_7 = data(info_location(7) : info_location(7) + size_of_info_7 - 1) 
```

由于您还没有确切地澄清什么，`info_7`或者`data_for_info_7`我对此感到有些困惑。如果您使用隐式类型，那么 size_of_info_7 将是 REAL 并且您的 ALLOCATE 语句将失败，需要一个 INTEGER 来表示分配对象的大小。

我想这`data_for_info_7`可能是一个可分配的 REAL 数组。如果`info_location`是 INTEGER 类型，您可以简单地编写：

```
ALLOCATE(data_for_info_7, source = data(info_location(7) : info_location(8) - 1)) 
```

Vladimir F 已经提供了关于使用指针清理代码的建议。另一种方法是使用 ASSOCIATE 构造。您可以在代码中的适当位置编写如下内容：

```
ASSOCIATE(data_for_info_7 => data(info_location(7) : info_location(8) - 1)) 
```

`END ASSOCIATE`将其与正确位置的语句相匹配。这有效地为 ASSOCIATE 构造中的数组部分定义了一个别名。

所以，总结一下：

1.  `info_location`数组类型错误。
2.  撇开原始设计不谈，其中包含一个数据数组和另一个索引数组，是（当然是）完全合理的。
3.  您有几个用于更新代码的选项，包括指针和关联。

# java - 没有参数的通用方法

> ID：10876544
> 
> 赞同：10
> 
> 时间：2012-06-04T05:09:18.600
> 
> 标签：java, generics

我创建了一个没有参数的通用方法，例如：

```
private <T> TableCell<T> createTableCell(){
return new TableCell<T>();
} 
```

那么，在我的程序中，如何为具体类型调用这个方法呢？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-04T05:26:02.550

通常，类型是推断出来的，但您可以使用以下语法指定类型：

注意：您的方法定义中有错误 - 它没有返回类型：

```
private <T> TableCell<T> createTableCell(){
    return new TableCell<T>();
} 
```

这是你如何称呼它的方法：

```
TableCell<SomeType> tableCell = myObject.<SomeType>createTableCell(); 
```

如果您的方法不访问任何字段，请考虑将其设为`static`方法，您可以将其称为：

```
TableCell<SomeType> tableCell = MyClass.<SomeType>createTableCell(); 
```

顺便说一句，当您使用这种语法时，许多人会惊叹于您的“精英”——这是一种不常见的语法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-04T05:22:29.807

因为无法从上下文中推断出类型（当您调用方法时），所以您必须在以以下方式调用时指定它：

```
obj.<MyType>createTableCell() 
```

where`obj`是包含该方法的类/类型的对象。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-04T05:18:12.157

您可以像调用其中的构造函数一样调用此方法：`createTableCell<TypeName>()`.

# cgi - 重定向到另一个页面的 CGI 登录脚本

> ID：10876547
> 
> 赞同：-1
> 
> 时间：2012-06-04T05:09:21.810
> 
> 标签：cgi

我正在建立一个用户需要登录的网站。当用户点击提交按钮时，我想要一个 CGI 脚本来验证用户信息，如果它是好的，将它们重定向到我设置的另一个页面。如果不是，则显示错误。我很难弄清楚这一点。如果有人能以我的方式提供一些帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:20:35.023

正如您对您选择的服务器端语言只字未提，我假设您对此没有任何问题。

[《万维网上的 CGI 编程》](http://oreilly.com/openbook/cgi/)是一本关于该主题的不错的书，即使是旧书。请参考它。

*   让表单向服务器发送`POST`请求（请注意，密码将在未加密的情况下发送）。
*   要获取提供的用户名和密码，请使用[表单输入](http://oreilly.com/openbook/cgi/ch02_03.html)。
*   检查密码后，将用户[重定向](http://oreilly.com/openbook/cgi/ch03_05.html)`303 See Other`到目标页面或错误页面。

我猜你有一定的理由使用 CGI，但老实说，如果你需要更流畅和优美的东西，请切换到你选择的任何 Web 框架。

# elasticsearch - 没有得到所有的结果

> ID：10876548
> 
> 赞同：0
> 
> 时间：2012-06-04T05:09:29.617
> 
> 标签：elasticsearch

这是我的问题，与我 [在第一场比赛后要求搜索停止的上一个问题有关](https://stackoverflow.com/questions/10783994/search-stops-after-the-first-match#comment14130234_10783994)

在这里，我给你映射。

```
{
    "copy_order_snapshot": {
        "properties": {
            "line_item_info": {
                "dynamic": "true",
                "properties": {
                    "m_product_details": {
                        "dynamic": "true",
                        "properties": {
                            "accessories_colour": {
                                "type": "string"
                            },
                            "status": {
                                "type": "string"
                            }
                        }
                    },
                    "other_details": {
                        "dynamic": "true",
                        "properties": {
                            "accessories_material_type": {
                                "type": "string"
                            }
                            "status": {
                                "type": "string"
                            }
                        }
                    },
                    "product_details": {
                        "dynamic": "true",
                        "properties": {
                            "accessories_colour": {
                                "type": "string"
                            },
                            "status": {
                                "type": "string"
                            }
                        }
                    }
                }
            },
            "order_data": {
                "dynamic": "true",
                "properties": {
                    "state": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string"
                    }                    
                }
            }
        }
    }
} 
```

在我之前谈到的问题中`attribute_set_id`，这里的情况与`status`. 而`order_details->status is "enabled"`其他状态为`"1" and "canceled"`。当我搜索

```
{
    "query":{
        "term":{
            "status":"enabled"
         }
    }
} 
```

我得到结果

但如果我搜索

```
{
    "query":{
        "term":{
            "status":"1"
        }
    }
} 
```

或者

```
{
    "query":{
        "term":{
            "status":"canceled"
        }
    }
} 
```

我没有得到任何结果。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:07:07.410

发生这种情况是因为字段名称“状态”不明确。在查询处理期间，elasticsearch 将字段名称“status”解析为其匹配的第一个完全限定字段名称。当我在我的机器上运行它时，它被解析为 line_item_info.other_details.status。

```
$ curl "localhost:9200/test-orders/_validate/query?q=status:blah&explain=true&pretty=true"
{
  "valid" : true,
  "_shards" : {
    "total" : 1,
    "successful" : 1,
    "failed" : 0
  },
  "explanations" : [ {
    "index" : "test-orders",
    "valid" : true,
    "explanation" : "line_item_info.other_details.status:blah"
  } ]
} 
```

如果您希望查询匹配所有状态字段，您可能需要使用完全限定名称（例如`line_item_info.other_details.status`,`line_item_info.m_product_details.status`等）并使用[Dis Max](http://www.elasticsearch.org/guide/reference/query-dsl/dis-max-query.html)或[Bool Queries](http://www.elasticsearch.org/guide/reference/query-dsl/bool-query.html)组合它们。

例如：

```
$ curl -XGET http://localhost:9200/test-orders/copy_order_snapshot/_search -d '{
    "query":{
        "bool" : {
            "should" : [
                {
                    "term" : { "line_item_info.m_product_details.status" : "1" }
                },
                {
                    "term" : { "line_item_info.other_details.status" : "enabled" }
                }
            ]
        }
    }
}' 
```

# android - 图像显示为gridview

> ID：10876549
> 
> 赞同：1
> 
> 时间：2012-06-04T05:09:37.830
> 
> 标签：android, image, url, gridview

我想使用 imageurl 显示来自 mysql 服务器（在 localhost 中测试）的图像，我在我的服务器上的一个 filder 中有图像，在一个 android 客户端应用程序中作为 gridview 以及 text.how 我如何在我的代码中使用 imageurl？我的主菜单.java

```
public class MainMenu extends Activity {

    GridView gridView;

    static final String[] MOBILE_OS = new String[] { 
        "Android", "iOS","Windows", "Blackberry" };

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.mainmenu_list);

        gridView = (GridView) findViewById(R.id.gridView1);

        gridView.setAdapter(new ImageAdapter(this, MOBILE_OS));

        gridView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long id) {
                Toast.makeText(
                   getApplicationContext(),
                   ((TextView) v.findViewById(R.id.grid_item_label))
                   .getText(), Toast.LENGTH_SHORT).show();

            }
        });

    }

} 
```

我的 imageadapter.java：

```
public class ImageAdapter extends BaseAdapter {
private Context context;
private final String[] mobileValues;
    public ImageAdapter(Context context, String[] mobileValues) {
    this.context = context;
    this.mobileValues = mobileValues;
}

public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View gridView;

    if (convertView == null) {

        gridView = new View(context);

        // get layout from list.xml
        gridView = inflater.inflate(R.layout.list, null);

        // set value into textview
        TextView textView = (TextView) gridView
                .findViewById(R.id.grid_item_label);
        textView.setText(mobileValues[position]);

        // set image based on selected text
        ImageView imageView = (ImageView) gridView
                .findViewById(R.id.grid_item_image);

        String mobile = mobileValues[position];

        if (mobile.equals("Windows")) {
            imageView.setImageResource(R.drawable.imggrid);
        } else if (mobile.equals("iOS")) {
            imageView.setImageResource(R.drawable.imggrid);
        } else if (mobile.equals("Blackberry")) {
            imageView.setImageResource(R.drawable.imggrid);
        } else {
            imageView.setImageResource(R.drawable.imggrid);
        }

    } else {
        gridView = (View) convertView;
    }

    return gridView;
}

@Override
public int getCount() {
    return mobileValues.length;
}

@Override
public Object getItem(int position) {
    return null;
}

@Override
public long getItemId(int position) {
    return 0;
} 
```

}

我不知道如何在我的代码中使用以下内容：

```
try {
            URL url = new URL(imageFileURL);
            URLConnection conn = url.openConnection();                   
            HttpURLConnection httpConn = (HttpURLConnection)conn;
            httpConn.setRequestMethod("GET");
            httpConn.connect();               
            if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {
             InputStream inputStream = httpConn.getInputStream();                     
             Bitmap bitmap = BitmapFactory.decodeStream(inputStream);
             inputStream.close();
             img.setImageBitmap(bitmap);
            }
           } catch (MalformedURLException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
           } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
           } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T05:23:35.483

将图片下载代码放在`AsyncTask`. [这是解释](http://developer.android.com/reference/android/os/AsyncTask.html)。在您的 getView 方法中执行一个异步任务实例，即每次获取一张图像。

```
private class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {
 ImageView mImageView;
 public void setImageView(ImageView img) {
      mImageView = img;
 }

 protected Bitmap doInBackground(String... urls) {
     return loadImageFromNetwork(urls[0]);
 }

 protected void onPostExecute(Bitmap result) {
     mImageView.setImageBitmap(result);
 } 
```

}

`task.setImageView(yourImageViewinGrid)`在执行之前调用你`AsyncTask`，让它知道下载后在哪里设置图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T05:24:30.893

> 我不知道如何在我的代码中使用以下内容：

该代码将为您下载图像，您可以将其放置在单独的线程中，也可以将下载的图像`AsyncTask`设置`Thread`在图像视图中……就这么简单。网上有很多例子，你可以google一下

**EIDTED**

下载图像的代码

```
public class AsyncFetchImage extends AsyncTask<String, Void, Bitmap>{

    private WeakReference<ImageView> imageReference;
//  private WeakReference<Dialog> dialogReferance;

    public AsyncFetchImage(ImageView imageview) {
        imageReference = new WeakReference<ImageView>(imageview);
//      dialogReferance = new WeakReference<Dialog>(dialog);
    }

    @Override
    protected Bitmap doInBackground(String... s) {

        return downloadImage(s[0]);
    }

    private Bitmap downloadImage(String url) {

        final AndroidHttpClient client = AndroidHttpClient.newInstance("Nixit");
        final HttpGet getRequest = new HttpGet(url);
        try {

            HttpResponse response = client.execute(getRequest);
            final int statusCode = response.getStatusLine().getStatusCode();

            if(statusCode != HttpStatus.SC_OK){
                Log.w("ImageDownloader", "Error " + statusCode + " while retrieving bitmap from " + url); 
                return null;
            }
            final HttpEntity entity = response.getEntity();
            if(entity != null){
                InputStream is = null;
                try{
                    is = entity.getContent();
                    final Bitmap bit = BitmapFactory.decodeStream(is);
                    return bit;
                }finally{
                    if(is != null)
                        is.close();
                    entity.consumeContent();
                }
            }

        } catch (IOException e) {
            e.printStackTrace();
            return null;
        } finally{
            if(client != null){
                client.close();
            }
        }
        Log.i("Image Fetch","Image Fetch Complete");
        return null;
    }

    @Override
    protected void onPostExecute(Bitmap result) {
        if(isCancelled()){
            result = null;
        }
        if(imageReference != null){
            ImageView imageView = imageReference.get();
//          Dialog di = dialogReferance.get();
            if (imageView != null) {
                imageView.setImageBitmap(result);
//                di.show();
            }

        }
    }

} 
```

如何使用：-

```
imageView = (ImageView)dialog.findViewById(R.id.imageView1);

AsyncFetchImage fetchImage = new AsyncFetchImage(imageView);
fetchImage.execute(url); 
```

您可以在适配器的 getview 方法中使用它

希望有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T05:30:43.757

要获取图像，您必须执行以下操作：

```
URL new_url = new URL("your url"); 
Bitmap image_bitmap = BitmapFactory.decodeStream(newurl.openConnection() .getInputStream()); ImageView image_view = new ImageView(this);
image_view.setImageBitmap(image_bitmap); 
```

无论如何，最好将图像下载为后台任务。我实际上做的是创建一个自定义视图，其中包含一个扩展 AsyncTask 的私有内部类来为您下载图像。

# java - 如何检查java类中是否有特定的方法？

> ID：10876552
> 
> 赞同：31
> 
> 时间：2012-06-04T05:10:06.583
> 
> 标签：java, jaxb, xsd

我有一个不断变化的 xml 架构（使用 trang 自动生成）。这些变化不是很精细。此架构中仅添加或删除了一些元素。从这个模式中，我正在生成 java 类（使用 cxf），通过这些类我将解组 xml 文档。

随着架构的变化，我的自动生成的 java 类也发生了变化。同样，与模式一样，java 类的变化不是很大。例如，如果一个元素 say`elemA`被添加到模式中；一些相关的功能说`getElemA()`并被`setElemA()`添加到自动生成的java类中。

现在我将如何确保这些自动生成的类中存在特定的函数？一种解决方案是手写模式，以便覆盖 xml 的所有可能元素。这就是我最终要做的。但目前，我还没有固定 xml 文件的格式。

更新 ：

有`getElemA()`可能在自动生成的类中定义方法。我无法控制这些类的自动生成。但是在我的主课中，如果有以下代码，

```
If method getElemA exists then 
     ElemA elemA = getElemA() 
```

这段代码将永远存在于我的主课中。如果方法`getElemA()`是在自动生成的类之一中生成的，那么就没有问题。但是如果没有生成这个方法，那么编译器就会抱怨这个方法在任何类中都不存在。

有什么方法可以让编译器在编译时不抱怨这个函数？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-04T05:32:51.957

@missingfaktor 提到了一种方法，下面是另一种方法（如果您知道 api 的名称和参数）。

假设您有一种不带参数的方法：

```
Method methodToFind = null;
try {
  methodToFind = YouClassName.class.getMethod("myMethodToFind", (Class<?>[]) null);
} catch (NoSuchMethodException | SecurityException e) {
  // Your exception handling goes here
} 
```

如果存在就调用它：

```
if(methodToFind == null) {
   // Method not found.
} else {
   // Method found. You can invoke the method like
   methodToFind.invoke(<object_on_which_to_call_the_method>, (Object[]) null);
} 
```

假设您有一种采用本机`int`参数的方法：

```
Method methodToFind = null;
methodToFind = YouClassName.class.getMethod("myMethodToFind", new Class[] { int.class }); 
```

如果存在就调用它：

```
if(methodToFind == null) {
   // Method not found.
} else {
   // Method found. You can invoke the method like
   methodToFind.invoke(<object_on_which_to_call_the_method>, invoke(this,
      Integer.valueOf(10)));
} 
```

假设您有一种采用盒装`Integer`参数的方法：

```
Method methodToFind = null;
methodToFind = YouClassName.class.getMethod("myMethodToFind", new Class[] { Integer.class }); 
```

如果存在就调用它：

```
if(methodToFind == null) {
   // Method not found.
} else {
   // Method found. You can invoke the method like
   methodToFind.invoke(<object_on_which_to_call_the_method>, invoke(this,
      Integer.valueOf(10)));
} 
```

使用上述解决方案调用方法不会给您编译错误。根据@Foumpie 更新

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-04T05:21:23.767

使用[反射](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)。

```
import java.lang.reflect.Method;

boolean hasMethod = false;
Method[] methods = foo.getClass().getMethods();
for (Method m : methods) {
  if (m.getName().equals(someString)) {
    hasMethod = true;
    break;
  }
} 
```

**编辑：**

因此，如果该方法存在，您想调用该方法。这就是你的做法：

```
if (m.getName().equals(someString)) {
  try {
    Object result = m.invoke(instance, argumentsArray);
    // Do whatever you want with the result.
  } catch (Exception ex) { // For simplicity's sake, I am using Exception.
                           // You should be handling all the possible exceptions
                           // separately.
    // Handle exception.
  }
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-01-07T19:20:15.520

带弹簧：

```
Method method = ReflectionUtils.findMethod(TheClass, "methodName");
if (method != null) {
  //do what you want
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-01-10T13:16:17.470

如果您使用 Spring Framework，最简单的方法是使用实​​用`ReflectionUtils.findMethod()`程序。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-10T14:07:58.113

另一种方法是使用 Java 8 流：

```
 Optional<Method> methodToFind =
                Arrays.stream(clazz.getMethods()).
                        filter(method -> "methodName".equals(method.getName())).
                        findFirst();
        if (methodToFind.isPresent()) {
            // invoke method or any logic needed
            ///methodToFind.get().
        } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-04T05:12:20.390

您可以在 Java [http://docs.oracle.com/javase/tutorial/reflect/index.html中使用反射](http://docs.oracle.com/javase/tutorial/reflect/index.html)

或[http://docs.oracle.com/javase/tutorial/reflect/member/methodType.html](http://docs.oracle.com/javase/tutorial/reflect/member/methodType.html)

# ios - PayPal 移动支付库 MPL 是否在带有 ARC 的 iOS 5.1 上运行？

> ID：10876553
> 
> 赞同：0
> 
> 时间：2012-06-04T05:10:13.010
> 
> 标签：ios, paypal

我无法让这个工作，所有的示例代码似乎都已被弃用。我已经能够更新很多常量，但有没有人有任何样本。我有一个沙盒应用程序 ID。到目前为止，我已经添加了库：

```
@interface PaymentViewController ()
@property (weak, nonatomic) IBOutlet UIButton *paypalButton;
@end

- (void)viewDidLoad {
  [super viewDidLoad];

  // 1\. spawn a new thread to initialize the paypal library
  // TODO: spawn a new thread
  [PayPal initializeWithAppID:SANDBOX_APP_ID forEnvironment:ENV_SANDBOX];

  // 2\. generate the 'pay with paypal' button
  self.paypalButton = [[PayPal getInstance] getPayButtonWithTarget:self 
                                                         andAction:@selector(payWithPayPal) 
                                                     andButtonType:BUTTON_278x43
                                                     andButtonText:BUTTON_TEXT_PAY];
}

  // 3\. add the payment details
  // 4\. wait for callback 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T04:27:04.097

是的。我刚刚让它在带有 ARC 的 iOS 5 上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T21:38:36.610

由于从未真正回答过此问题，因此我将继续为其他人填写。希望能帮助到你。

您将需要找到所有放置在库中的所有内容，它使用“分配”进行属性定义并将任何动态内存指针更改为“保留”，但不要理会任何静态分配的变量。

例如：

```
@property (nonatomic, assign) id<ListChoiceDelegate> choiceDelegate;
@property (nonatomic, assign) NSArray *items; 
```

更改为

```
@property (nonatomic, retain) id<ListChoiceDelegate> choiceDelegate; 
@property (nonatomic, retain) NSArray *items; 
```

但...

```
@property (nonatomic, assign) NSUInteger groupId; 
```

保持不变。

然后你需要找到所有用 [[blah alloc] autorelease]; 包裹的分配。并删除包装自动释放和括号：

```
[[[PaymentSuccessViewController alloc] init] autorelease] 
```

成为

```
[[PaymentSuccessViewController alloc] init] 
```

然后删除其中任何一个：

```
[super dealloc]; 
```

# css - 爱德华时代的脚本到 HTML5 中的文本

> ID：10876554
> 
> 赞同：1
> 
> 时间：2012-06-04T05:10:42.217
> 
> 标签：css, html, font-family

我必须将字体系列的文本显示为`Edwardian Script`.

怎么做？

这是我的html：

```
<div class="sweetest_ride">Sweetest Rides Available Worldwide</div> 
```

这是CSS：

```
.sweetest_ride {
    color: #FFFFFF;
    float: left;
    font-family: "Edwardian Script";
    font-size: 30px;
    font-weight: bold;
    letter-spacing: 2px;
    margin-top: 10px;
    padding-bottom: 10px;
    text-align: center;
    width: 100%;
} 
```

当我使用它时，什么都不会发生。

Edwardian Script 字体系列显示在此链接中：

[www.microsoft.com/typography/fonts/font.aspx?FMID=990](http://www.microsoft.com/typography/fonts/font.aspx?FMID=990)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T05:16:13.077

[`@font-face`您可以在 CSS 中](http://www.w3.org/TR/css3-fonts/#font-face-rule)创建规则：

```
@font-face {
    font-family: "Edwardian Script";
    src: url(path/to/the/font);
} 
```

然后将其用于：

```
font-family: "Edwardian Script"; 
```

有关可以设置的参数的更多信息，请参阅提供的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-24T15:41:54.413

完整的字体名称是“Edwardian Script ITC”。每当我使用它时，它都对我有用。

希望这可以帮助！

# iphone - 如何使用 iPhone SDK 为这样的图像制作动画？

> ID：10876555
> 
> 赞同：4
> 
> 时间：2012-06-04T05:10:43.073
> 
> 标签：iphone, objective-c, ios, cocoa-touch, animation

请检查[此](http://itunes.apple.com/us/app/draw-hearts-happy-valentines/id419003288?mt=8)应用程序：

该应用程序的屏幕截图如下所示：

![在此处输入图像描述](../Images/43449a7bf6c6fad3675dcd7477db22d5.png)

你能告诉我如何在触摸时添加图像并使每张图像都动画吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T05:15:07.110

在**iOS 5**中，您可以使用一系列图像。首先，您需要添加一个新的类别方法：

## 类别

```
@interface UIImage (WrightsCS)
+(UIImage*)animatedImageWithImages:(NSArray*)images duration:(NSTimeInterval)duration;
@end 
```

## 例子

```
+(UIImage*)loadingImage
{
    NSArray *animationFrames = [NSArray arrayWithObjects:
                                        [UIImage imageNamed:@"downloading01.png"],
                                        [UIImage imageNamed:@"downloading02.png"],
                                        [UIImage imageNamed:@"downloading03.png"],
                                        [UIImage imageNamed:@"downloading04.png"],
                                        [UIImage imageNamed:@"downloading05.png"],
                                        [UIImage imageNamed:@"downloading06.png"],
                                        [UIImage imageNamed:@"downloading07.png"],
                                        [UIImage imageNamed:@"downloading08.png"],
                                        [UIImage imageNamed:@"downloading09.png"],
                                        [UIImage imageNamed:@"downloading10.png"],
                                        [UIImage imageNamed:@"downloading11.png"],
                                        [UIImage imageNamed:@"downloading12.png"],
                                        [UIImage imageNamed:@"downloading13.png"],
                                        [UIImage imageNamed:@"downloading14.png"],
                                        [UIImage imageNamed:@"downloading15.png"],
                                        [UIImage imageNamed:@"downloading16.png"],
                                nil];
    return [UIImage animatedImageWithImages:animationFrames duration:1.0f];
} 
```

# authentication - 基于简单 LDAP 的集中式 Web 身份验证存储

> ID：10876557
> 
> 赞同：3
> 
> 时间：2012-06-04T05:11:02.650
> 
> 标签：authentication, web-applications, ldap

在我们的工作组内部，我们的 Web 服务器上运行着许多服务，包括构建服务、wiki、错误跟踪器和一些本土应用程序。目前，这些都需要为每个服务单独登录。

我看到在所有这些服务之间集中用户创建的主要选择是 LDAP，但是我对做完整的企业系统、附加登录名和共享目录等不感兴趣，我想要的只是一种在 Web 服务中集中用户的方法。

从使用 openLDAP 来看，这似乎完全是多余的，而且设置起来很痛苦。有没有更简单的方法，可能是 LDAP 协议或其他集中身份验证的方式，而无需为我的服务破解自定义外部身份验证脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:03:03.937

通过 LDAP 访问的集中式身份验证存储正是您寻求的解决方案。LDAP 是

*   从有线的角度来看一个小协议
*   大多数可用的 LDAP 服务器都非常快
*   协议和实现的服务器很简单
*   容易理解
*   易于管理
*   易于安全

添加复制以实现冗余并增加总吞吐量，很难想象有更好的解决方案。

# javascript - 通过 html 图像元素对象显示图像

> ID：10876558
> 
> 赞同：6
> 
> 时间：2012-06-04T05:11:45.810
> 
> 标签：javascript, jquery, jquery-events

我有以下代码：

```
function createImage(source) {                
var pastedImage = new Image();                
pastedImage.onload = function() {

}
pastedImage.src = source;
} 
```

该函数`createImage`包含包含图像来源的源参数。之后，我创建了`pastedImage`类的对象，`Image`并提醒我正在获取 html 图像元素对象，例如`[object HTMLImageElement]`.

我的问题是如何使用该对象将图像显示到我的 html 页面中。我想在`onload`函数之后显示它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T05:18:57.757

Hiya：**工作演示** [http://jsfiddle.net/wXV3u/](http://jsfiddle.net/wXV3u/)

使用的 API = `.html` [http://api.jquery.com/html/](http://api.jquery.com/html/)

在演示中单击`click me`按钮。

希望这可以帮助！如果我错过了什么，请让我知道！B-)

**代码**

```
$('#foo').click(function() {
    createImage("http://images.wikia.com/maditsmadfunny/images/5/54/Hulk-from-the-movie.jpg");

});

function createImage(source) {
    var pastedImage = new Image();
    pastedImage.onload = function() {

    }
    pastedImage.src = source;
    $(".testimonialhulk").html(pastedImage);
}​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T05:15:36.677

你也可以这样做：

```
 function createImage(source) {
        var pastedImage = new Image();
        pastedImage.onload = function() {

 document.write('<br><br><br>Your image in canvas: <img src="'+pastedImage.src+'" height="100" width="200"/>');                      

        }
        pastedImage.src = source;        
    }​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-18T15:12:30.807

使用javascript dom原语（replaceChild）简单且更好：

获取图像的父级，包含它的 div 或 span，并将旧的 img 标签替换为您使用函数创建的新图像对象

```
 var domImgObj = document.getElementById("image");

 var imgObj = createImage(src); // your function
 imgObj.id = pageimgObj.id; // necessary for future swap-outs

 document.getElementById("container").replaceChild(imgObj,domImgObj); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-06T06:35:43.097

> 文档。[创建范围（）](https://developer.mozilla.org/en-US/docs/Web/API/Document/createRange)。[createContextualFragment](https://developer.mozilla.org/en-US/docs/Web/API/Range/createContextualFragment) (img.outerHTML)

## 例子

```
const img = new Image()
img.src = "https://cdn.sstatic.net/Sites/stackoverflow/Img/favicon.ico"
const frag = document.createRange().createContextualFragment(`${img.outerHTML}`)
document.querySelector(`body`).append(frag)
```

# c# - MDI子窗体绘制问题

> ID：10876564
> 
> 赞同：1
> 
> 时间：2012-06-04T05:12:33.763
> 
> 标签：c#, forms, paint

```
 Do anyone have any comments about this issue. 
```

![在此处输入图像描述](../Images/568cb0396519c0865646740e86d4af26.png)

这是显示在 MDI 客户端内的 MDI 子表单。当我将表单部分重叠到另一个表单上时，它不会完全重新绘制。这是画的问题吗，有人知道吗？

提前感谢苏尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T05:44:10.497

试试这个 ：

```
 Form2 f2;    

private void button1_Click(object sender, EventArgs e)
{
    if (f2 == null) {
       f2 = new Form2();
       f2.MdiParent = this;
       f2.FormClosed += delegate { f2 = null; };
       f2.Show();
    }
    else {
       f2.Activate();
    }
} 
```

# ruby - 如何在 Nokogiri 中使用 SAX 遍历内部节点？

> ID：10876565
> 
> 赞同：0
> 
> 时间：2012-06-04T05:12:37.037
> 
> 标签：ruby, nokogiri, sax

我对 Nokogiri 和 Ruby 很陌生，正在寻求一些帮助。

我正在解析一个非常大的 XML 文件，使用`class MyDoc < Nokogiri::XML::SAX::Document`. 现在我想遍历一个块的内部。

这是我的 XML 文件的格式：

```
<Content id="83087">
    <Title></Title>
    <PublisherEntity id="1067">eBooksLib</PublisherEntity>
    <Publisher>eBooksLib</Publisher>
    ......
</Content> 
```

我已经可以判断是否找到了“内容”标签，现在我想知道如何在其中遍历。这是我的缩短代码：

```
class MyDoc < Nokogiri::XML::SAX::Document
  #check the start element. set flag for each element
  def start_element name, attrs = []
    if(name == 'Content')
      #get the <Title>
      #get the <PublisherEntity>
      #get the Publisher
    end
  end

  def cdata_block(string)
    characters(string)
  end 

  def characters(str)
    puts str
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-13T00:24:22.237

纯粹主义者可能不同意我的观点，但我一直这样做的方式是使用 Nokogiri 遍历大文件，然后使用 XmlSimple 处理文件中的较小对象。这是我的代码片段：

```
require 'nokogiri'
require 'xmlsimple'

def isend(node)
   return (node.node_type == Nokogiri::XML::Reader::TYPE_END_ELEMENT)
end

reader = Nokogiri::XML::Reader(File.open('database.xml', 'r'))

# traverse the file looking for tag "content"
reader.each do |node|
   next if node.name != 'content' || isend(node)
   # if we get here, then we found start of node 'content',
   # so read it into an array and work with the array:
   content = XmlSimple.xml_in(node.outer_xml())
   title = content['title'][0]
   # ...etc.
end 
```

这对我来说非常有效。有些人可能反对在同一代码中混合 SAX 和非 SAX（nokogiri 和 XmlSimple），但就我而言，它可以轻松完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:13:23.103

使用 SAX 比较棘手。我认为解决方案需要看起来像这样：

```
class MyDoc < Nokogiri::XML::SAX::Document
  def start_element name, attrs = []
    @inside_content = true if name == 'Content'
    @current_element = name
  end

  def end_element name
    @inside_content = false if name == 'Content'
    @current_element = nil
  end

  def characters str
    puts "#{@current_element} - #{str}" if @inside_content && %w{Title PublisherEntity Publisher}.include?(@current_element)
  end
end 
```

# jquery - 如何使用 JQuery 函数参数来评估 rails 中的对象字段？

> ID：10876573
> 
> 赞同：0
> 
> 时间：2012-06-04T05:14:25.513
> 
> 标签：jquery, ruby-on-rails

我感谢您的帮助。我在部分 _article.html.erb 中有一个函数。它在脚本标签内有一个功能。该函数有一个参数数据。数据将是 Article 对象的 id。有了这个id，我想得到文章的名称和描述。如何使用此数据参数来评估 Article 对象的其他字段？而且，请原谅我的问题和示例代码的布局。

```
<script type="text/javascript">
    var socket = io.connect('http://127.0.0.1:8000');
    socket.on('news', function (data) {
        $('#test').html(
            '<table><tr><td>' + data + 
            '</td><td><a href="/articles/' + data +
            '">Show</td><td><a href="/articles/' + data + 
            '/edit">Edit</td><tr></table>'
        );
    });
</script> 
```

更新：rails db迁移中定义的文章：

```
 class CreateArticles < ActiveRecord::Migration
     def change
      create_table :articles do |t|
         t.string :name
         t.text :desc

         t.timestamps
      end
    end
  end 
```

在模型中：

```
 class Article < ActiveRecord::Base
    attr_accessible :desc, :name
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:14:28.720

我找到了解决我的问题的方法。但是，我调用了jquery get()方法来调用show.html.erb，其控制器动作以id为参数，获取对象。现在，我在 show.html.erb 中使用该对象来获取其他字段。

在 _article.html.erb

```
<script type="text/javascript">
 var socket = io.connect('http://127.0.0.1:8000');
 socket.on('news', function (data) {
    var url = '/articles/' + data
    $.get(url, function(x) {

            $('#test').append(x);
        });
});

</script>

<div id="test"></div> 
```

我相信这可以使用部分来完成，这就是我现在要做的工作。但是，至少我可以在第一次测试中看到实时更新。

# jquery - For循环中随机添加一个类

> ID：10876574
> 
> 赞同：4
> 
> 时间：2012-06-04T05:14:41.553
> 
> 标签：jquery

在准备好文档后，我正在填充变量并使用它们来运行一个 for 循环，该循环创建了许多具有`box`. 我想`possible`在这些`box` div 中随机添加一个类，以便它们均匀分布。例如，假设最终有 100 个带有 class 的 div `box`，我希望这些 div 的随机数也有一个`possible`.

关于我如何做到这一点的任何想法？我在下面包含了我当前的代码。

谢谢

```
$(document).ready(function() {
    var wrapper = $('.wrapper');
    var wrapperWidth = wrapper.width();
    var wrapperHeight = wrapper.height();
    var wrapperArea = wrapperWidth * wrapperHeight;
    var boxWidthHeight = 30;
    var boxArea = boxWidthHeight * boxWidthHeight;
    var boxCount = wrapperArea / boxArea;
    alert(boxCount);
    for(var i = 0; i < boxCount; i++) {
        $('.wrapper').append('<div class="box"></div>');
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T05:19:00.367

只需使用 Math.random()。

在伪代码中：

```
if (Math.random() < .5) //Or any other fraction
   addDivWithPossibleClass();
else
   addDivWithoutPossibleClass(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T05:19:34.327

你的意思是：

```
for(var i = 0; i < boxCount; i++) {
        var newClass = "box" + ((i % 2 == 0) ? " posible" : "");
        $('.wrapper').append('<div class="'+newClass+'"></div>');
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T05:46:39.040

我不是专业人士，但我通过这样做得到了它

```
$(document).ready(function() {
var wrapper = $('.wrapper');
var wrapperWidth = wrapper.width();
var wrapperHeight = wrapper.height();
var wrapperArea = wrapperWidth * wrapperHeight;
var boxWidthHeight = 31;
var boxArea = boxWidthHeight * boxWidthHeight;
var boxCount = 30;
//alert(boxCount);
for(var i = 0; i < boxCount; i++) { 
    $('.wrapper').append('<div class="box'+getRandom()+'">'+i+'</div>');    
}

function getRandom() {
//get a random number between 1 and 10
var randomSomething = Math.floor((Math.random()*10)+1);
// if the number is over 5 return the "possible" class else dont
    if(randomSomething > 5){
        return ' possible';
        }else{return '';}
}

}); 
```

增加或降低 10 以影响出现多少随机可能性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T06:02:54.827

在这里，这将对您有很大帮助。

```
for(var i = 0; i < boxCount; i++) {

    // generating a random number between boxCount
    var randomnumber = Math.floor(Math.random()*boxCount)

    //checking if that is odd or even, based on that giving out result
    if (randomnumber%2 == 0) {
        $('.wrapper').append('<div class="box"></div>');
    } else {
        $('.wrapper').append('<div class="box possible"></div>');
    }

} 
```

# google-maps - Google Maps Utility Library v3 - 信息框未关闭

> ID：10876579
> 
> 赞同：1
> 
> 时间：2012-06-04T05:15:26.347
> 
> 标签：google-maps, google-maps-api-3

我正在使用 Google Maps Utility Library V3 中的 Infobox，在不跟踪所有信息框或添加事件侦听的情况下一次性删除所有信息框时遇到了一些麻烦。

我目前正在使用以下代码。

```
function initMarkers(map, markerData) {

    for(var i=0; i<markerData.length; i++) {

    var iconimage = "markers/" + trackall + ".png";
    marker = new google.maps.Marker({
            map: map,
            draggable: false,
            position: markerData[i].latLng,
            visible: true,
            icon: iconimage
        }),
        boxText = document.createElement("div"),
        //these are the options for all infoboxes
        infoboxOptions = {

         content: boxText
        ,disableAutoPan: true
        ,maxWidth: 0
        ,pixelOffset: new google.maps.Size(20, -75)
        ,zIndex: null
        ,boxStyle: {
          background: "url('') no-repeat"
          ,opacity: 0.75
          ,width: "140px"
         }
        ,closeBoxMargin: "10px 2px 2px 2px"
        ,closeBoxURL: ""
        ,infoBoxClearance: new google.maps.Size(1, 1)
        ,isHidden: false
        ,pane: "floatPane"
        ,enableEventPropagation: false
    };

        newMarkers.push(marker);
        //define the text and style for all infoboxes
        boxText.style.cssText = "border: 1px solid black; margin-top: 5px; background: #E0E7EF; padding: 5px;";
        boxText.innerHTML = markerData[i].address + "<br>" + markerData[i].state;
        //Define the infobox

        newMarkers[i].infobox = new InfoBox(infoboxOptions);
        //Open box when page is loaded

        newMarkers[i].infobox.open(map, marker);

        //Add event listen, so infobox for marker is opened when user clicks on it.  Notice the return inside the anonymous function - this creates
        //a closure, thereby saving the state of the loop variable i for the new marker.  If we did not return the value from the inner function,
        //the variable i in the anonymous function would always refer to the last i used, i.e., the last infobox. This pattern (or something that
        //serves the same purpose) is often needed when setting function callbacks inside a for-loop.
        google.maps.event.addListener(marker, 'click', (function(marker, i) {
            return function() {
                //newMarkers[i].infobox.open(map, this);
                //map.panTo(markerData[i].latLng);
                //newMarkers[i].infobox.close();
            /}
        })(marker, i));
    }

    return newMarkers;

}

//here the call to initMarkers() is made with the necessary data for each marker.  All markers are then returned as an array into the markers variable
markers = initMarkers(map, [
    { latLng: pointall}

]); 
```

在上面的示例中，我使用了包含不断变化的标记信息的变量 pointall。该站点是一个航班跟踪站点，因此它不断跟踪不同位置的任意数量的飞机。每次有更新，例如。要绘制新标记，我使用以下函数首先删除旧标记。

```
function clearOverlays() {
  if (newMarkers) {
    for (var i = 0; i < newMarkers.length; i++ ) {
    newMarkers[i].setMap(null);
    }
  }
} 
```

以上删除了所有标记，但如果我添加

```
newMarkers[i].infobox.close(); 
```

它删除第一个标记但停止执行代码。

有没有一种简单的方法可以说.. 关闭所有打开的信息框。我不需要知道哪个是哪个，因为它们都需要关闭。目前，信息框使用新标记打开，但旧信息框仍然存在。

注意：我不熟悉 javascript，所以对我来说很容易;)

任何帮助，将不胜感激。

谢谢

编辑：我在这里运气不太好。正如建议的那样，我尝试创建一个数组来保存信息框，但我一定做错了什么。

我尝试添加以下声明：

```
ibArray = []; 
```

然后我尝试添加：

```
ibArray.push(marker); 
```

我已经在几个位置添加了上述内容，包括在将标记推入 newMarkers 数组之后立即添加，但无论我将代码放在哪里，它都会破坏我的其余代码并且不显示任何信息框。

我怀疑我的语法不正确，而且我也不知道在哪里放置代码。

其他人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T07:10:36.290

您应该对标记执行相同的操作，即跟踪 infoWindows 并循环遍历数组，关闭它们（并将它们从数组中删除）。

# java - 有没有办法使用同一个 FileChannel 进行读写？

> ID：10876583
> 
> 赞同：0
> 
> 时间：2012-06-04T05:16:37.073
> 
> 标签：java, nio, filechannel

我是 Java NIO 的新手。我看到一个`FileChannel`对象同时具有读取和写入方法。`FileChannel`但是我无法在单个时间点使用相同的读写器。有没有办法这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T05:25:41.593

`FileChannel`使用“rw”模式从 RandomAccessFile 对象中获取一个。

```
RandomAccessFile aFile     = new RandomAccessFile("abc.txt", "rw");
FileChannel      inChannel = aFile.getChannel(); 
```

您可以参考此链接了解更多信息。 [文件通道教程](http://tutorials.jenkov.com/java-nio/file-channel.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:33:35.743

如果您`FileChannel`从`RandomAccessFile`以“rw”模式打开的文件中获取，则您可以读写。在所有其他情况下，您不能。

# jquery - 时间选择器的 jquery 验证引擎

> ID：10876586
> 
> 赞同：0
> 
> 时间：2012-06-04T05:18:52.673
> 
> 标签：jquery, jquery-validate, timepicker

我正在使用 jquery 验证引擎来检查我的时间选择器中选择的时间...

如果我已经选择了一个时间并且该时间已经显示在输入文本框中，则验证表明该字段仍然是空的并且需要填写。所以我尝试再次选择一个时间，之后没有显示验证消息，它工作正常..

为什么我必须选择两次？

这是代码：

```
 <div>
        START TIME:
        <div style="margin-bottom: 15px">
            <input type="text" class="validate[required]" id="inputStartTime"
                data-bind="value: inputStartTime" /> // this is initialize in my script as $('#inputStartTime').timepicker();
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T08:11:42.293

您需要在选择时间后隐藏验证引擎

```
$('#inputStartTime').validationEngine('hide'); 
```

# jakarta-ee - struts2拦截器的通配符访问

> ID：10876596
> 
> 赞同：0
> 
> 时间：2012-06-04T05:20:04.577
> 
> 标签：jakarta-ee, struts2

我有一个带有通配符 y 的操作我想在拦截器中访问这个变量

行动

```
 @Action(value="{uri}/page",
        results={
            @Result(name=SUCCESS,location="/success.jsp"),
            }
        )
  public String execute(){
    ... 
```

拦截器

```
 public String intercept(ActionInvocation actionInvocation) throws Exception {
         // =( uri is not in the map
        Map<String, Object> params =
              actionInvocation.getInvocationContext().getContextMap();
   ... 
```

我在拦截器中找不到通配符的位置

编辑：

我只是找到如何：

```
 public String intercept(ActionInvocation actionInvocation) throws Exception {
         ActionConfig config = actionInvocation.getProxy().getConfig();
         log.info(config.getParams().get("uri")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T02:37:45.777

我只是找到如何：

```
 public String intercept(ActionInvocation actionInvocation) throws Exception {
     ActionConfig config = actionInvocation.getProxy().getConfig();
     log.info(config.getParams().get("uri")); 
```

我可以做类似的事情

本地主机/站点/campus1/page.action

本地主机/站点/campus2/page.action

拦截器决定“校园”是否存在

# java - 等待 Swing GUI 关闭后再继续

> ID：10876602
> 
> 赞同：4
> 
> 时间：2012-06-04T05:21:18.820
> 
> 标签：java, multithreading, swing, command-line

我正在编写一个应用程序，它要求用户将一些数据输入到应用程序将使用的 Swing GUI 中。用户输入数据后，不再需要 GUI，因为应用程序会将一些数据写入文件。

总体思路是这样的：

```
launchGui();
closeGui();
continueWithComputation(); 
```

我知道 Swing 在后台使用了一些线程，我理解这就是为什么程序在关闭 GUI 之前不会阻塞的原因。

在继续之前是否可以以任何方式等待 GUI 关闭（单`JFrame`关闭`dispose()`）`continueWithComputation()`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T05:22:01.553

> 等待 Swing GUI 关闭后再继续

使用模态对话框。有关详细信息，请参阅以下内容：

*   [如何制作对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)
*   [如何在对话框中使用模态](http://docs.oracle.com/javase/tutorial/uiswing/misc/modality.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T05:39:47.577

> 在继续使用 continueWithComputation() 之前，是否可以以任何方式等待 GUI 关闭（使用 dispose() 关闭单个 JFrame）？

*   用户操作添加[WindowListener](https://stackoverflow.com/a/10873700/714968)

*   从代码到调用`JFrame#setVisible(false)`，然后就可以运行`continueWithComputation()`了，你必须关闭这个JVM `System.exit(0)`，否则会停留在PC的RAM中直到重新启动或断电

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-12T12:05:19.833

我刚刚遇到了类似的问题，但没有`closeGui()`方法，并使用 WindowListener 和一些 Java 同步提出了这个相对较短的代码片段：

```
AtomicBoolean closed = new AtomicBoolean(false);
frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

frame.addWindowListener(new WindowAdapter() {
    @Override
    public void windowClosed(WindowEvent e) {
        synchronized(closed) {
            closed.set(true);
            closed.notify();
        }
        super.windowClosed(e);
    }
} );

frame.setVisible(true);
synchronized(closed) {
    while (!closed.get()) {
        closed.wait();
    }
}

// executes after the Frame has been disposed 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-29T12:08:23.160

我的建议是将 JFrame GUI 作为 Modal 打开，然后一切都会等到它从屏幕上消失。由于 JFrame 不能设置为模态，因此您必须将 GUI 框架作为 JDialog 打开。我在用：

```
public class frameMain extends JDialog{ 
```

确保在您使用的构造函数中：

```
setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE); 
```

无论您需要在哪里启动 GUI 框架，您都应该使用：

```
frameMain frm= new frameMain ();
frm.setModal(true);
frm.setVisible(true); 
```

# javascript - 在 jQuery 中为元素属性使用简写赋值

> ID：10876604
> 
> 赞同：6
> 
> 时间：2012-06-04T05:21:27.137
> 
> 标签：javascript, jquery, html

要将宽度加倍`img`，我可以在 jQuery 中执行此操作：

```
<img src='blah.jpg' id='pic' />

$('#pic').height($(this).height()*2); 
```

效果很好，但我真的很喜欢使用速记作业，例如：

```
var count = 5;
count *= 2; // to get 10. 
```

由于`element.height`在 jQuery 中返回高度函数，我不能使用速记赋值。有没有办法在 jQuery 中为元素属性做速记赋值？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-04T05:26:41.863

可以不使用jQuery修改高度等属性

```
document.getElementById("pic").height *= 2; 
```

或者，如果您想使用 jQuery 选择元素，您可以使用此代码段。它选择元素，然后使用索引器直接访问它。

```
$("#pic")[0].height *= 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T05:35:04.190

```
$('#pic').height($('#pic').height() * 2); 
```

或者

```
 $('#pic')[0].height *= 2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T05:39:50.587

回答如何在 jQuery 中执行此操作的问题

```
$('#pic').height(function( i, ht){
   return ht *2;
}); 
```

请参阅 1.4.1 中的 API 添加功能 [http://api.jquery.com/height/](http://api.jquery.com/height/)

# facebook-graph-api - 查找用户的第一个帖子？

> ID：10876606
> 
> 赞同：0
> 
> 时间：2012-06-04T05:21:51.533
> 
> 标签：facebook-graph-api, sorting, facebook-fql, feed, status

使用 Graph API 或 FQL，有没有办法有效地找到用户的第一个帖子或状态？比如，他们制作的第一个？

我认为，缓慢的方法是通过提要进行分页，但对于像我这样在 2005 年或更早加入的用户来说，这将需要很长时间，因为需要大量 API 调用。

根据我的发现，我们无法获取用户在 Facebook 注册的日期作为一个好的起点，并且我们无法按日期升序排序（不在返回的单页数据之外）以获得最旧的帖子。

有什么合理的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T12:31:13.840

您可以使用 facebook 查询语言 (FQL) 来获取首次发布信息。

请参阅以下查询以获取更多详细信息：-

```
SELECT message, time FROM status WHERE uid= me() ORDER BY time ASC LIMIT 1 
```

如果有任何问题，请检查并告诉我。

感谢和问候杜尔加普拉萨德

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T23:19:30.643

我认为公共 API 仅限于允许查询的信息深度。Facebook 可能出于性能和成本考虑而设置了这些限制。也许他们已经改变了。大约 4 个月前，当我试图通过一个人的流向后退时，我可以回溯多远似乎是有限度的。可能是时间限制或 # 回发限制。如果您知道您的用户第一次发布的时间，那么使用查询中的自/直到时间戳应该相当快。

# android - 以编程方式更改应用小部件背景颜色

> ID：10876610
> 
> 赞同：12
> 
> 时间：2012-06-04T05:22:34.433
> 
> 标签：android, widget, background-color

如何以编程方式设置主屏幕应用程序小部件的背景颜色？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-04T05:59:24.517

记住小部件是 remoteView。你有非常有限的资源来更新小部件的 UI，而不是直接更新。

你可以试试 ：

```
remoteViews.setInt(viewId, "setBackgroundColor", Color.BLACK); 
```

我从未使用过它，但我想它可能是这样的。

我猜你需要动态改变颜色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T12:03:33.067

您可以通过执行以下操作更改“RemoteViews”中 ImageView 图像的颜色：

```
remoteviews.setInt(viewid, "setColorFilter", color); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-14T09:45:01.207

```
Widget.setBackgroundColor(Color.LTGRAY); 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-06-04T05:28:58.150

找到以下代码..

代码：

```
 Button button;

    //to change background color..

    button.setBackgroundColor(Color.Yellow); 
```

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2012-06-04T05:24:59.663

采用

```
 Yourwidget.setBackgroundColor(Color.RED); 
```

希望帮助

# sql - SQL Server 2008：Filestream 如何从文件流组中物理删除上传的文件？

> ID：10876614
> 
> 赞同：1
> 
> 时间：2012-06-04T05:23:56.570
> 
> 标签：sql, sql-server-2008, filestream

我已经创建了文件流组`C:\Test\FilestreamGroup1`

和一个带有 varBinary Filstream 列的表

现在，当文件上传时，它物理存储在 FilestreamGroup1 ...

现在在这里我想知道两件事

*   FilestreamGroup1 以哪种格式文件存储（对于每个上传的文件，我发现 2 个编码文件）？
*   其次如何物理删除上传的文件（即从表中删除记录就像执行删除命令，但是这样做我不会导致从 NTFS 物理删除文件......所以我怎样才能物理删除文件）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T06:13:32.133

如果要立即从文件系统中删除文件，则需要使用检查点

[链接手动强制垃圾收集](https://stackoverflow.com/questions/1625001/filestream-files-being-left-behind-after-row-deleted)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T06:13:49.900

这不是 StackOverflow 问题，这属于 ServerFault（管理员）。虽然它触动了开发者-

> 即从表中删除一条记录就像执行删除命令，但是这样做我不会导致从 NTFS 物理删除文件......所以我怎样才能物理删除文件

您知道拥有数据库的主要原因是什么吗？保证数据完整性。

删除必须保留数据，直到进行备份。您的备份策略是什么？您可能会注意到，当您进行更新时，会创建该文件的另一个副本……原因很简单。旧的必须仍可用于备份，这就是他们集成它的方式。

> FilestreamGroup1 以哪种格式文件存储（对于每个上传的文件，我发现 2 个编码文件）？

不，文件是原始存储的。对它们进行编码有什么意义......如果有 SQL 函数来获取路径并且客户端不使用 SQL 加载文件是受支持的场景（但是：向 SQL 询问文件名和路径，然后通过 NTFS 文件共享访问它）。这也支持互操作（因为任何从网络加载的程序都可以提供一个 SQL 驱动的位置。

我强烈假设您只有 1 个副本，并且以某种方式进行更新，导致写入第二个文件。

[http://msdn.microsoft.com/en-us/library/cc645962.aspx](http://msdn.microsoft.com/en-us/library/cc645962.aspx)

解释了如何使用 SQL 访问 FileSTream 数据。

[http://technet.microsoft.com/en-us/library/cc645940(v=sql.105).aspx](http://technet.microsoft.com/en-us/library/cc645940(v=sql.105).aspx)

解释了如何使用 Win32 访问 FIleStream 数据。

[删除行后遗留的 FILESTREAM 文件](https://stackoverflow.com/questions/1625001/filestream-files-being-left-behind-after-row-deleted)

解释当删除一行时文件被留下。我发现使用极其微不足道的 goodle 搜索“sql filestream delete file”，它是结果列表中的第 1 项 - 你甚至尝试过 google 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T12:09:32.770

> 其次如何物理删除上传的文件（即从表中删除记录就像执行删除命令，但是这样做我不会导致从 NTFS 物理删除文件......所以我怎样才能物理删除文件）

检查点不会删除文件，文件会在后台进程中删除，这可能需要很长时间。强制删除使用

```
sp_filestream_force_garbage_collection 
```

编辑：仅适用于 SQL Server 2012

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-16T11:20:29.187

删除一行后写“检查点”。它将删除文件的物理存在。

运行以下查询并检查，文件自动从文件系统中删除

**从表名检查点删除**

谢谢。

# php - 获取初始化的字符串正则表达式

> ID：10876616
> 
> 赞同：0
> 
> 时间：2012-06-04T05:24:16.087
> 
> 标签：php, regex

`kNO = "Get this value now if you can";`

我如何`Get this value now if you can`从那个字符串中获取？看起来很简单，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T05:26:39.343

首先阅读[PHP PCRE](http://php.net/manual/en/book.pcre.php)并查看示例。对于您的问题：

```
$str = 'kNO = "Get this value now if you can";';
preg_match('/kNO\s+=\s+"([^"]+)"/', $str, $m);
echo $m[1]; // Get this value now if you can 
```

**解释：**

```
kNO        Match with "kNO" in the input string
\s+        Follow by one or more whitespace
"([^"]+)"  Get any characters within double-quotes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T05:38:13.910

根据您获取该输入的方式，您可以使用[`parse_ini_file`](http://php.net/parse_ini_file)或[`parse_ini_string`](http://us2.php.net/manual/en/function.parse-ini-string.php)。死的简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T05:28:16.020

使用字符类开始从一个打开的引号提取到下一个：

```
$str = 'kNO = "Get this value now if you can";'
preg_match('~"([^"]*)"~', $str, $matches); 
print_r($matches[1]); 
```

解释：

```
~    //php requires explicit regex bounds
"    //match the first literal double quotation
(    //begin the capturing group, we want to omit the actual quotes from the result so group the relevant results
[^"] //charater class, matches any character that is NOT a double quote
*    //matches the aforementioned character class zero or more times (empty string case)
)    //end group
"    //closing quote for the string.
~    //close the boundary. 
```

编辑，您可能还想考虑转义引号，请改用以下正则表达式：

```
'~"((?:[^\\\\"]+|\\\\.)*)"~' 
```

这种模式更难缠住你的头。本质上，这分为两个可能的匹配项（由 Regex OR 字符分隔`|`）

```
[^\\\\"]+    //match any character that is NOT a backslash and is NOT a double quote
|            //or
\\\\.        //match a backslash followed by any character. 
```

逻辑非常简单，第一个字符类将匹配除双引号或反斜杠之外的所有字符。如果找到引号或反斜杠，正则表达式会尝试匹配组的第二部分。如果它是反斜杠，它当然会匹配 pattern `\\\\.`，但它也会将匹配提前 1 个字符，有效地跳过反斜杠后面的任何转义字符。该模式唯一会停止匹配的情况是遇到单独的未转义双引号时，

# objective-c - exc_breakpoint 在调试中是什么意思？

> ID：10876619
> 
> 赞同：12
> 
> 时间：2012-06-04T05:24:45.367
> 
> 标签：objective-c, ios, xcode, cocoa-touch

*   此错误仅偶尔显示 xcode 中的错误显示

> exc_breakpoint（代码=exc_i386_bpt，子代码=0x0）

这是错误的屏幕截图： ![在此处输入图像描述](../Images/99a50b914dc9b47320c312db921fcb4f.png)

奖励：如果有人能告诉我如何“复制”错误消息，将不胜感激

在即时窗口中，日志显示：

> 2012-06-04 12:08:17.097 BadgerNew[866:17003] 可达性标志状态：-R --l- networkStatusForFlags

围绕项目的代码几乎是万无一失的。我很惊讶我们那里有一个错误。

```
+(NSString *) Json_StringGetter:(NSString *) URL{
    CM(@"Json string getter");
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:URL]];
    DLog(@"request:%@",request);
    PO(URL);
    PO(request);

    __block NSError *error=nil;
    __block NSURLResponse *urlresponse=nil;
    __block NSData *response = nil;
    __block NSString *json_string=nil;

    //[Tools computeTimeWithName:FUNC block:^{
        response= [NSURLConnection sendSynchronousRequest:request returningResponse:&urlresponse error:&error];
        json_string = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding];
    //}];

    if (error) {
        DLog(@"error at jsonparser:%@",urlresponse);
        DLog(@"error at jsonparser:%@",error);
        DLog(@"I break points here");
    }

    return json_string;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:43:39.507

问题是我在加载 URL 时中断。这就是我遇到这个问题的原因。

它基本上说你按下断点。如果我只是运行代码而不破坏这个问题就永远不会出现。

# python - PySide（或 PyQt）信号和插槽基础知识

> ID：10876621
> 
> 赞同：3
> 
> 时间：2012-06-04T05:25:05.883
> 
> 标签：python, pyqt, signals-slots, pyside

考虑一个像这样的简单示例，它使用信号和插槽链接两个滑块：

```
from PySide.QtCore import *
from PySide.QtGui import *
import sys

class MyMainWindow(QWidget):
 def __init__(self):
  QWidget.__init__(self, None)

  vbox = QVBoxLayout()

  sone = QSlider(Qt.Horizontal)
  vbox.addWidget(sone)

  stwo = QSlider(Qt.Horizontal)
  vbox.addWidget(stwo)

  sone.valueChanged.connect(stwo.setValue)

if __name__ == '__main__':
 app = QApplication(sys.argv)
 w = MyMainWindow()
 w.show()
 sys.exit(app.exec_()) 
```

您将如何更改此设置，以使第二个滑块与第一个滑块朝相反的方向移动？滑块一将使用以下值初始化：

```
 sone.setRange(0,99)
  sone.setValue(0) 
```

滑块二将使用以下值初始化：

```
 stwo.setRange(0,99)
  stwo.setValue(99) 
```

然后 stwo 的值将是`99 - sone.sliderPosition`。

您将如何实现信号和插槽以使其工作？我希望有一个基于上述简单示例的工作示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T05:36:18.280

您可以将信号连接到执行操作的函数。您的代码的结构并不容易做到这一点并且需要重构，因此您可以通过简单的方式来做到这一点：

```
stwo.setInvertedAppearance(True)
sone.valueChanged.connect(stwo.setValue) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T05:38:50.687

您的示例有点损坏，因为您忘记设置布局的父级，并将滑块小部件保存为成员属性以供以后访问...但是要回答您的问题，它实际上就像指向您的连接一样简单到你自己的功能：

```
class MyMainWindow(QWidget):
    def __init__(self):
        QWidget.__init__(self, None)

        vbox = QVBoxLayout(self)

        self.sone = QSlider(Qt.Horizontal)
        self.sone.setRange(0,99)
        self.sone.setValue(0)
        vbox.addWidget(self.sone)

        self.stwo = QSlider(Qt.Horizontal)
        self.stwo.setRange(0,99)
        self.stwo.setValue(99)
        vbox.addWidget(self.stwo)

        self.sone.valueChanged.connect(self.sliderChanged)

    def sliderChanged(self, val):
        self.stwo.setValue(self.stwo.maximum() - val) 
```

请注意如何与原始插槽`sliderChanged()`具有相同的签名。`setValue()`不是将一个小部件直接连接到另一个小部件，而是将其连接到自定义方法，然后将值转换为您想要的值，然后按照您的意愿行事（在 上设置自定义值`stwo`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T05:38:15.733

这是我的做法。我添加了这个重新实现 setValue 的类。（我从[http://zetcode.com/tutorials/pyqt4/eventsandsignals/](http://zetcode.com/tutorials/pyqt4/eventsandsignals/)得到这个想法）

```
class MySlider(QSlider):
    def __init__(self):
        QSlider.__init__(self, Qt.Horizontal)

    def setValue(self, int):
        QSlider.setValue(self, 99-int) 
```

这是完整的代码。这是一个好方法吗？

```
from PySide.QtCore import *
from PySide.QtGui import *
import sys

class MySlider(QSlider):
    def __init__(self):
        QSlider.__init__(self, Qt.Horizontal)

    def setValue(self, int):
        QSlider.setValue(self, 99-int)

class MyMainWindow(QWidget):
 def __init__(self):
  QWidget.__init__(self, None)

  vbox = QVBoxLayout()

  sone = QSlider(Qt.Horizontal)
  sone.setRange(0,99)
  sone.setValue(0)
  vbox.addWidget(sone)

  stwo = MySlider()
  stwo.setRange(0,99)
  stwo.setValue(0)
  vbox.addWidget(stwo)

  sone.valueChanged.connect(stwo.setValue)

  self.setLayout(vbox)

if __name__ == '__main__':
    app = QApplication(sys.argv)
    w = MyMainWindow()
    w.show()
    sys.exit(app.exec_()) 
```

# php - mysqldump 无法转储数据库

> ID：10876623
> 
> 赞同：-1
> 
> 时间：2012-06-04T05:25:24.947
> 
> 标签：php, mysql, mysqldump

我正在使用 php 代码备份我的 mysql 数据库。我使用了以下代码

```
$username =escapeshellcmd($db_user);
$password =escapeshellcmd($db_pass);
$hostname =escapeshellcmd($db_host);
$database =escapeshellcmd($db_name);

$backupFile='/dbBackup/'.date("Y-m-d-H-i-s").'.sql.gz';
$command = "mysqldump -u$username -p$password -h$hostname $database | gzip > $backupFile";

system($command, $result); 
```

我将此代码放在 php 文件中并调用此文件以在 dbBackup 文件夹中生成备份。我在一台服务器上有两台服务器，此代码运行良好，但在第二台服务器上，此代码生成 .sql zip 文件，其中仅包含 sql 的一部分，如下所示

```
-- MySQL dump 10.13  Distrib 5.5.23, for Linux (x86_64)
--
-- Host: localhost    Database: zm3_quizzes
-- ------------------------------------------------------
-- Server version   5.5.23-55

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */; 
```

为什么会这样？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:34:54.640

我最近遇到了同样的问题。事实证明，失败的数据库用户没有“锁定表”权限。我更改了用户的权限（在我的情况下，使用 cPanel）并且我的脚本有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T05:28:35.700

您是否检查过两台服务器上的 MySQL 版本？[这里](http://bugs.mysql.com/bug.php?id=34192)记录了一个可能相关的错误......您的版本应该已修复，但请确保您检查两个服务器是否具有相同的版本，以防万一。

# c++ - 无法在 Linux 上运行 Brief_demo

> ID：10876627
> 
> 赞同：0
> 
> 时间：2012-06-04T05:25:57.833
> 
> 标签：c++, c, linux, opencv

我正在尝试在我的 linux 环境中运行 Brief_demo-0.5。按照自述文件中的说明，我将目录更改为文件 Brief_demo-0.5 并输入 make，但出现以下错误。

```
g++ `pkg-config opencv --libs` main.o BRIEF.o -o BRIEF_demo
main.o: In function `matchDescriptors(CvMat&, CvMat&, std::vector<std::bitset<256ul>, std::allocator<std::bitset<256ul> > >, std::vector<std::bitset<256ul>, std::allocator<std::bitset<256ul> > >, std::vector<cv::KeyPoint, std::allocator<cv::KeyPoint> > const&, std::vector<cv::KeyPoint, std::allocator<cv::KeyPoint> > const&) [clone .constprop.66]':
main.cpp:(.text+0x1f6): undefined reference to `cvInitMatHeader'
main.cpp:(.text+0x218): undefined reference to `cvInitMatHeader'
main.o: In function `drawQuadrangle(_IplImage*, int, int, int, int, int, int, int, int, CvScalar, int) [clone .constprop.71]':
main.cpp:(.text+0x2d5): undefined reference to `cvLine'
main.cpp:(.text+0x333): undefined reference to `cvLine'
main.cpp:(.text+0x398): undefined reference to `cvLine'
main.cpp:(.text+0x3f2): undefined reference to `cvLine'
main.o: In function `waitKeyAndHandleKeyboardInput(int)':
main.cpp:(.text+0x485): undefined reference to `cvWaitKey'
main.o: In function `drawQuadrangle(_IplImage*, int, int, int, int, int, int, int, int, CvScalar, int)':
main.cpp:(.text+0x5c6): undefined reference to `cvLine'
main.cpp:(.text+0x625): undefined reference to `cvLine'
main.cpp:(.text+0x68d): undefined reference to `cvLine'
main.cpp:(.text+0x6e4): undefined reference to `cvLine'
main.o: In function `drawAPlus(_IplImage*, int, int)':
main.cpp:(.text+0x867): undefined reference to `cvLine'
main.o:main.cpp:(.text+0x8ce): more undefined references to `cvLine' follow
main.o: In function `takeNewFrame()':
main.cpp:(.text+0x99c): undefined reference to `cvQueryFrame'
main.cpp:(.text+0x9be): undefined reference to `cvCvtColor'
main.o: In function `showMatches(int)':
main.cpp:(.text+0xb37): undefined reference to `cvLine'
main.o: In function `rotateImage(_IplImage*, _IplImage*, CvPoint2D32f const&, float)':
main.cpp:(.text+0xf0a): undefined reference to `cv2DRotationMatrix'
main.cpp:(.text+0xf68): undefined reference to `cvWarpAffine'
main.cpp:(.text+0xf90): undefined reference to `cvCreateMat'
main.o: In function `fpsCalculation()':
main.cpp:(.text+0x11ac): undefined reference to `cvGetTickCount'
main.cpp:(.text+0x11d0): undefined reference to `cvGetTickFrequency'
main.cpp:(.text+0x1211): undefined reference to `cvGetTickCount'
main.o: In function `showOutput(_IplImage*)':
main.cpp:(.text+0x12f5): undefined reference to `cvPutText'
main.cpp:(.text+0x1308): undefined reference to `cvGetTickFrequency'
main.cpp:(.text+0x13ab): undefined reference to `cvPutText'
main.cpp:(.text+0x13be): undefined reference to `cvGetTickFrequency'
main.cpp:(.text+0x1467): undefined reference to `cvPutText'
main.cpp:(.text+0x147a): undefined reference to `cvGetTickFrequency'
main.cpp:(.text+0x1529): undefined reference to `cvPutText'
main.cpp:(.text+0x153c): undefined reference to `cvGetTickFrequency'
main.cpp:(.text+0x15eb): undefined reference to `cvPutText'
main.cpp:(.text+0x15fe): undefined reference to `cvGetTickFrequency'
main.cpp:(.text+0x16ad): undefined reference to `cvPutText'
main.cpp:(.text+0x174a): undefined reference to `cvPutText'
main.o: In function `extractKeypoints(std::vector<cv::KeyPoint, std::allocator<cv::KeyPoint> >&, int, _IplImage*)':
main.cpp:(.text+0x17b3): undefined reference to `cvSetImageROI'
main.cpp:(.text+0x17c0): undefined reference to `cv::Mat::Mat(_IplImage const*, bool)'
main.cpp:(.text+0x17d3): undefined reference to `cv::FAST(cv::Mat const&, std::vector<cv::KeyPoint, std::allocator<cv::KeyPoint> >&, int, bool)'
main.cpp:(.text+0x183b): undefined reference to `cv::fastFree(void*)'
main.cpp:(.text+0x1843): undefined reference to `cvResetImageROI'
main.cpp:(.text+0x18c4): undefined reference to `cv::Mat::deallocate()'
main.cpp:(.text+0x18ec): undefined reference to `cv::Mat::deallocate()'
main.cpp:(.text+0x1938): undefined reference to `cv::fastFree(void*)'
main.o: In function `chooseFASTThreshold(_IplImage const*, int, int)':
main.cpp:(.text+0x197d): undefined reference to `cvGetSize'
main.cpp:(.text+0x198e): undefined reference to `cvCreateImage'
main.cpp:(.text+0x19ab): undefined reference to `cvCopy'
main.cpp:(.text+0x19f6): undefined reference to `cvReleaseImage'
main.o: In function `saveNewTemplate()':
main.cpp:(.text+0x1b50): undefined reference to `cvCopy'
main.cpp:(.text+0x1b5a): undefined reference to `cvReleaseImage'
main.cpp:(.text+0x1b6c): undefined reference to `cvCreateImage'
main.cpp:(.text+0x1b7d): undefined reference to `cvReleaseImage'
main.cpp:(.text+0x1b8f): undefined reference to `cvCreateImage'
main.cpp:(.text+0x1bab): undefined reference to `cvSetImageROI'
main.cpp:(.text+0x1bc0): undefined reference to `cvCopy'
main.cpp:(.text+0x1bcc): undefined reference to `cvResetImageROI'
main.cpp:(.text+0x1be1): undefined reference to `cvSetImageROI'
main.cpp:(.text+0x1bf6): undefined reference to `cvCopy'
main.cpp:(.text+0x1c02): undefined reference to `cvResetImageROI'
main.o: In function `learnTemplate()':
main.cpp:(.text+0x20da): undefined reference to `cvGetSize'
main.cpp:(.text+0x20ed): undefined reference to `cvCreateImage'
main.cpp:(.text+0x2106): undefined reference to `cvCopy'
main.cpp:(.text+0x2162): undefined reference to `cvReleaseImage'
main.cpp:(.text+0x21c0): undefined reference to `cvCreateImage'
main.cpp:(.text+0x21d9): undefined reference to `cvResize'
main.cpp:(.text+0x2259): undefined reference to `cv2DRotationMatrix'
main.cpp:(.text+0x22b7): undefined reference to `cvWarpAffine'
main.cpp:(.text+0x2323): undefined reference to `cvReleaseImage'
main.cpp:(.text+0x2351): undefined reference to `cvGetSize'
main.cpp:(.text+0x235e): undefined reference to `cvCreateImage'
main.cpp:(.text+0x239e): undefined reference to `cvCreateMat'
main.cpp:(.text+0x23ca): undefined reference to `cvReleaseImage'
main.o: In function `takeNewTemplateImage()':
main.cpp:(.text+0x24a5): undefined reference to `cvCopy'
main.cpp:(.text+0x253f): undefined reference to `cvRectangle'
main.o: In function `matchDescriptors(CvMat&, CvMat&, std::vector<std::bitset<256ul>, std::allocator<std::bitset<256ul> > >, std::vector<std::bitset<256ul>, std::allocator<std::bitset<256ul> > >, std::vector<cv::KeyPoint, std::allocator<cv::KeyPoint> > const&, std::vector<cv::KeyPoint, std::allocator<cv::KeyPoint> > const&)':
main.cpp:(.text+0x2736): undefined reference to `cvInitMatHeader'
main.cpp:(.text+0x2758): undefined reference to `cvInitMatHeader'
main.o: In function `init()':
main.cpp:(.text+0x27b4): undefined reference to `cvCreateCameraCapture'
main.cpp:(.text+0x27d0): undefined reference to `cvSetCaptureProperty'
main.cpp:(.text+0x27e9): undefined reference to `cvSetCaptureProperty'
main.cpp:(.text+0x2802): undefined reference to `cvCreateImage'
main.cpp:(.text+0x2822): undefined reference to `cvCreateImage'
main.cpp:(.text+0x2842): undefined reference to `cvCreateImage'
main.cpp:(.text+0x286c): undefined reference to `cvCreateImage'
main.cpp:(.text+0x2889): undefined reference to `cvCreateImage'
main.o:main.cpp:(.text+0x28a6): more undefined references to `cvCreateImage' follow
main.o: In function `init()':
main.cpp:(.text+0x294b): undefined reference to `cvNamedWindow'
main.cpp:(.text+0x295c): undefined reference to `cvSetMouseCallback'
main.o: In function `doDetection()':
main.cpp:(.text+0x2a4f): undefined reference to `cvGetTickCount'
main.cpp:(.text+0x2a8f): undefined reference to `cvGetTickCount'
main.cpp:(.text+0x2ab7): undefined reference to `cvGetTickCount'
main.cpp:(.text+0x2ae4): undefined reference to `cvGetTickCount'
main.cpp:(.text+0x2b04): undefined reference to `cvGetTickCount'
main.o:main.cpp:(.text+0x2e28): more undefined references to `cvGetTickCount' follow
main.o: In function `doDetection()':
main.cpp:(.text+0x3116): undefined reference to `cvFindHomography'
main.cpp:(.text+0x32b2): undefined reference to `cvCreateMat'
main.cpp:(.text+0x333f): undefined reference to `cvGetTickCount'
main.cpp:(.text+0x336a): undefined reference to `cvPerspectiveTransform'
main.cpp:(.text+0x336f): undefined reference to `cvGetTickCount'
main.o: In function `run()':
main.cpp:(.text+0x34f4): undefined reference to `cvWaitKey'
main.cpp:(.text+0x35a0): undefined reference to `cvQueryFrame'
main.cpp:(.text+0x35c2): undefined reference to `cvCvtColor'
main.cpp:(.text+0x35dc): undefined reference to `cvCopy'
main.cpp:(.text+0x3671): undefined reference to `cvQueryFrame'
main.cpp:(.text+0x3693): undefined reference to `cvCvtColor'
main.cpp:(.text+0x36a8): undefined reference to `cvCopy'
main.o: In function `showOutput(_IplImage*)':
main.cpp:(.text+0x175f): undefined reference to `cvShowImage'
main.o: In function `init()':
main.cpp:(.text+0x298f): undefined reference to `cvInitFont'
BRIEF.o: In function `CVLAB::BRIEF::~BRIEF()':
BRIEF.cpp:(.text+0x1c): undefined reference to `cvReleaseMat'
BRIEF.o: In function `CVLAB::BRIEF::~BRIEF()':
BRIEF.cpp:(.text+0x7c): undefined reference to `cvReleaseMat'
BRIEF.o: In function `CVLAB::BRIEF::BRIEF()':
BRIEF.cpp:(.text+0x1f3): undefined reference to `cvCreateMat'
BRIEF.o: In function `CVLAB::BRIEF::allocateIntegralImage(_IplImage const*)':
BRIEF.cpp:(.text+0x868): undefined reference to `cvReleaseMat'
BRIEF.cpp:(.text+0x877): undefined reference to `cvCreateMat'
BRIEF.o: In function `CVLAB::BRIEF::getBriefDescriptors(std::vector<std::bitset<256ul>, std::allocator<std::bitset<256ul> > >&, std::vector<cv::KeyPoint, std::allocator<cv::KeyPoint> > const&, _IplImage*)':
BRIEF.cpp:(.text+0x9cd): undefined reference to `cvReleaseMat'
BRIEF.cpp:(.text+0x9dd): undefined reference to `cvCreateMat'
BRIEF.cpp:(.text+0x9f0): undefined reference to `cvIntegral'
collect2: ld returned 1 exit status
make: *** [BRIEF_demo] Error 1 
```

所以...按照我在其中一篇文章中的指示，我尝试了命令 g++ main.cpp Brief.cpp -lm -lml -lcvaux -lhighgui -lcv -lcxcore 我得到了

```
/usr/bin/ld: cannot find -lml
/usr/bin/ld: cannot find -lcvaux
/usr/bin/ld: cannot find -lhighgui
/usr/bin/ld: cannot find -lcv
/usr/bin/ld: cannot find -lcxcore
collect2: ld returned 1 exit status 
```

当我输入 pkg-config opencv --libs --cflags 我得到 -I/usr/local/include/opencv -I/usr/local/include -L/usr/local/lib -lopencv_core -lopencv_imgproc -lopencv_highgui -lopencv_ml -lopencv_video -lopencv_features2d -lopencv_calib3d -lopencv_objdetect -lopencv_contrib -lopencv_legacy -lopencv_flann

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:33:09.940

这一行：

```
g++ `pkg-config opencv --libs` main.o BRIEF.o -o BRIEF_demo 
```

应该读：

```
g++ main.o BRIEF.o -o BRIEF_demo `pkg-config opencv --libs` 
```

或者，如果您正在编辑生成文件：

```
$(EXECUTABLE): $(OBJECTS)
    $(CC) $(OBJECTS) -o $@ $(LDFLAGS) 
```

即移动`$(LDFLAGS)`到行尾。

发生的事情是跳过了与依赖库的链接，因为在指定它们时实际上并不需要它们。一旦处理了 main.o 和 Brief.o 文件，就需要它们，因此它们将在那时被链接。

这是链接的怪癖。

# google-app-engine - Google App Engine：“我们找不到数据文件”

> ID：10876630
> 
> 赞同：0
> 
> 时间：2012-06-04T05:26:21.640
> 
> 标签：google-app-engine

我是谷歌应用引擎的初学者。我的目标是将现有网页移植到 GAE。我遇到的困难集中在 .js 文件的位置。为了让它在我的本地机器上运行，我将 .js 文件放在一个静态目录中，并在 html 中引用，例如

```
<link href="/static/tblDz_Qs_clinical.js".... 
```

在我的本地机器上一切正常，但是当我部署时，我收到一条消息

```
 'we cannot locate the datafile
 http://dermdudes.appspot.com/static/tblDz_Qs_clinical.js' 
```

这是main.py：

```
import os
import webapp2
import jinja2

template_dir = os.path.join(os.path.dirname(__file__), 'templates')
jinja_env = jinja2.Environment(loader = jinja2.FileSystemLoader(template_dir), autoescape=False)

class Handler(webapp2.RequestHandler):
    def write(self, *a, **kw):
        self.response.out.write(*a, **kw)
    def render_str(self, template, **params):
        t = jinja_env.get_template(template)
        return t.render(params)
    def render(self, template, **kw):
        self.write(self.render_str(template, **kw))

class MainHandler(Handler):
    def get(self):
        self.render('DD_querydriven2.html')

app = webapp2.WSGIApplication([('/', MainHandler)],
                              debug=True) 
```

这是 app.yaml：

```
application: dermdudes
version: 1
runtime: python27
api_version: 1
threadsafe: yes

handlers:
- url: /static
  static_dir: static

- url: .*
  script: main.app

libraries:
- name: webapp2
  version: "2.5.1"

- name: jinja2
  version: latest 
```

这是触发消息的 html 中的引用：

```
<link href="/static/tblDz_Qs_clinical.js" type="application/json" rel="exhibit/data" /> 
```

如果我只能让 GAE 找到 .js 文件，那么一切都会完美。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T06:11:58.427

心理调试：区分大小写的文件名？，使文件名小写并将引用也更改为小写。

# mysql - 导入多个大型sql转储mysql

> ID：10876632
> 
> 赞同：0
> 
> 时间：2012-06-04T05:26:38.820
> 
> 标签：mysql, windows

`source`我想使用命令（mysql 命令行）将几个 .sql 文件导入数据库。但是当我得到这个错误时：

```
source E:\Progs\Backups\DBs\file01.sql

ERROR:
Unknown command '\P'.
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that
corresponds to your MySQL server version for the right syntax to use near 'sourc
e E:\Progs' at line 1
.... 
```

我使用源命令导入大文件数百次，但现在我不明白我做错了什么。这是我的系统（我正在使用 XAMPP（基础包）1.7.3 版：

*   视窗 7x64
*   带有 PBXT 引擎 1.0.09-rc 的 MySQL 5.1.41（社区服务器）

任何帮助，将不胜感激。谢谢！

**编辑：**
我试过这个，但同样的错误：

```
source 'E:\Progs\Backups\DBs\file01.sql' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T06:13:52.137

MySQL 将`\P`in`E:\Progs`视为命令。因为该命令不存在，所以它会抱怨。

在许多情况下都可以理解正斜杠。尝试：

```
source E:/Progs/Backups/DBs/file01.sql 
```

# c# - 使用 ICC 配置文件将 RGB 值转换为 CMYK？C＃

> ID：10876639
> 
> 赞同：0
> 
> 时间：2012-06-04T05:27:14.697
> 
> 标签：c#, wpf, rgb, cmyk, color-profile

> **可能重复：**
> [C# 使用 ICC 配置文件将 RGB 值转换为 CMYK？](https://stackoverflow.com/questions/5237104/c-sharp-convert-rgb-value-to-cmyk-using-an-icc-profile)

好吧..我已经为此工作了一段时间，发现了关于这个世界的许多事情，但无法执行一次转换。如果我使用：

> ```
> System.Windows.Media.Color color = Color.FromValues(colorValues,
>             new Uri(@"D:\ISOcoated_v2_300_eci.icc")); 
> ```

或任何其他颜色配置文件，我得到了很好的结果！但是参数“colorValues​​”是CMYK，结果值是RGB。=(

我需要传递 RGB 中的值，然后方法返回 CMYK 中的值。最好与上面的转换对应或者一些值接近。

我发现的一些链接：

*   [C# 使用 ICC 配置文件将 RGB 值转换为 CMYK？](https://stackoverflow.com/questions/5237104/c-sharp-convert-rgb-value-to-cmyk-using-an-icc-profile)（我确实做了发布的内容，结果完全错误且不兼容）

*   [http://msdn.microsoft.com/en-us/library/system.windows.media.colorcontext.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.colorcontext.aspx)和 [http://msdn.microsoft.com/en-us/library/system.windows.media.imaging。 formatconvertedbitmap(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.formatconvertedbitmap(v=vs.85).aspx)（我有一些例外..）

*   在 WPF/XAML (..)[中使用 CMYK 颜色](https://stackoverflow.com/questions/4827270/using-cmyk-colours-in-wpf-xaml)

其中，由于各种原因，没有一个对我有帮助..（请不​​要将 RGB 转换为 CMYK 公式我想使用配置文件）

# google-apps-script - 电子邮件转发会删除 Google 应用脚本中的原始发件人电子邮件地址

> ID：10876644
> 
> 赞同：2
> 
> 时间：2012-06-04T05:28:08.010
> 
> 标签：google-apps-script, gmail-api

这是我的 Google App 脚本代码：

```
var messages = threads[x].getMessages();
for (var y in messages) 
{
  messages[y].forward("someone@example.com");
} 
```

这可以正常转发，但会将`from`消息字段重置为执行脚本的帐户的电子邮件 ID。这将删除原始发件人的所有凭据`message`。如何更优雅地转发电子邮件以保留所有原始标题（至少`from`和）？`to`如果原始消息被发送到*人员列表*或*新闻组*，我需要将其保留在转发的消息中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T18:47:40.583

通常，转发的电子邮件不会保留原始发件人和收件人地址。如果您使用 GMail 或 Outlook 转发电子邮件，您会注意到这一点。GMailApp 的行为方式相同。

# c# - asp.net 中的机器是什么？

> ID：10876652
> 
> 赞同：0
> 
> 时间：2012-06-04T05:28:45.960
> 
> 标签：c#, asp.net, webforms

我正在阅读“C# 和 vb.net 中的专业 asp.net 4.0”，我看到了这个声明：

> 该`Application`对象对机器来说不是全局的；它是全球性的`HttpApplication`。

我不知道，这个语句中的机器是什么？！机器是什么意思？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T05:33:36.337

机器是服务器，承载 ASP.NET 进程的进程正在其上运行。

通常，但并非总是如此，这是 IIS。但它可以是托管 ASP.NET 运行时的任何代码——比如[cassini](http://msdn.microsoft.com/en-us/magazine/cc188791.aspx)（VS2008+ 中提供的开源网络服务器，现在[它本身就是一个开源项目](http://weblogs.asp.net/tanzimsaqib/archive/2010/05/10/announcing-cassini-4-0.aspx)）。

无论如何，这意味着如果您有两个托管进程（使用上述标准），则应用程序对象不会被这两个进程共享。每个进程中都有一个 Application 对象。

这是[我最喜欢的关于 ASP.NET 和 HTTP 管道的文章](http://msdn.microsoft.com/en-us/magazine/cc188942.aspx)之一。它提供了很多关于 ASP.net 如何挂起的背景信息，我认为您可能会觉得有用。

# asp.net-mvc - MVC Ajax.BeginForm 插入模式

> ID：10876653
> 
> 赞同：2
> 
> 时间：2012-06-04T05:28:56.550
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-ajax

网络配置：

```
<add key="ClientValidationEnabled" value="true"/>
<add key="UnobtrusiveJavaScriptEnabled" value="true"/> 
```

JavaScript 引用的文件：

```
<script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js") type="text/javascript"></script> 
```

CSHTML 页面：

```
@using (Ajax.BeginForm(new AjaxOptions { UpdateTargetId = "result", LoadingElementId = "progress", InsertionMode = InsertionMode.Replace }))
{
    <div class="form">
        <div class="emailBox">
            <input id="email" name="email">
            <input type="submit" value="Join Us">
        </div>

        <div id="result">
        </div>
        <div id="progress" style="display:none;">
            <img src= "@Url.Content("~/Content/images/Ajax-loader-bar.gif") ">
        </div>
    </div>
} 
```

控制器.cs：

```
 [HttpPost]
    public string Index(SignUpModel model)
    {
        return "Hello";
    } 
```

当我点击提交按钮时，整个页面被一个写着“你好”的白页替换，这是什么原因。我的印象是 Ajax.BeginForm 将替换**DIV RESULT**的内容。

我究竟做错了什么？？

此外，当 AJAX 调用将返回其值时，它会自动隐藏 LoadingElementID
吗？

=========================
**答案**
Firebug 显示未找到引用的 JS 文件之一。
在我修复之后..一切都按预期工作。

多谢你们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T05:43:33.917

确保在您使用的页面上添加了脚本`jquery`文件。此外，检查 firebug（或任何调试器工具）是否存在可能导致 ajax 失败并触发整个页面的完整回发的 javascript 错误。是的，当 ajax post 的结果返回时，loadingelement 应该自动隐藏。 还要确保您的 web.config 包含以下设置`Jquery.unobtrusive-ajax``Ajax.BeginForm`

```
<appSettings>
        <add key="UnobtrusiveJavaScriptEnabled" value="true"/>
    </appSettings> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T05:43:30.190

1) 确保在标题中包含帖子

```
 @using (Ajax.BeginForm(new AjaxOptions 
{ UpdateTargetId = "result", 
LoadingElementId = "progress", 
InsertionMode = InsertionMode.Replace,   
HttpMethod = "POST"  })) 
```

2) 确保在页面上包含所有引用的 JavaScript 文件

而不是返回 hello 尝试返回 View()

# java - 在我的情况下如何使用 Socket？

> ID：10876661
> 
> 赞同：1
> 
> 时间：2012-06-04T05:30:23.393
> 
> 标签：java, sockets

我做了一个使用 Swing 和 Hibernate 设施的应用程序，我的老师告诉我，我必须使用 Socket 进行客户端/服务器通信（这是我大学的家庭作业）。例如，应用程序正在为不同的表执行插入/更新/删除，而我有一个 JFrame，用户正在其中写入数据，并且在按下插入/更新/删除按钮后，正在对数据库进行更改。但我真的不知道如何改变这个程序，以便它使用 Socket。在客户端上必须是具有执行操作的按钮，该按钮调用服务器上的方法，对数据库进行更改，然后将结果返回给客户端？或者我应该如何在这个程序中使用 Socket？

也许有人可以帮助我一些想法。提前致谢！

这是我使用 Swing 和 Hibernate 的代码：

```
public class AdaugaProdus extends javax.swing.JFrame {
private final Session session;

public AdaugaProdus() {
    session = HibernateUtil.getSessionFactory().openSession();
    initComponents();
    initComboBoxes();
}                       

private void initComboBoxes() {
    IdFurnComboBox.removeAllItems();
    IdCatComboBox.removeAllItems();
    IdRaftComboBox.removeAllItems();

    List<Furnizor> furnizori = session.createQuery("from Furnizor").list();
    for (Furnizor furnizor : furnizori)
        IdFurnComboBox.addItem(furnizor);

    List<Categorie> categorii = session.createQuery("from Categorie").list();
    for (Categorie categorie : categorii)
        IdCatComboBox.addItem(categorie);

    List<Istoricprod> rafturi = session.createQuery("from Istoricprod").list();
    for (Istoricprod raft : rafturi)
        IdRaftComboBox.addItem(raft);

}

private void InsereazaButtonActionPerformed(java.awt.event.ActionEvent evt)    {                                                
    runQueryBasedOnInsert();
}                                               

private void runQueryBasedOnInsert(){

try{
    org.hibernate.Transaction tx = session.beginTransaction();

    Produs produs = new Produs();

    int idFurn = ((Furnizor)IdFurnComboBox.getSelectedItem()).getIdfurn();
    Furnizor furnizor = new Furnizor(idFurn);
    produs.setFurnizor(furnizor);

    int idCat = ((Categorie)IdCatComboBox.getSelectedItem()).getIdcat();
    Categorie categorie = new Categorie(idCat);
    produs.setCategorie(categorie);

    int idRaft = ((Istoricprod)IdRaftComboBox.getSelectedItem()).getIdraft();
    Istoricprod istoricprod = new Istoricprod(idRaft);
    produs.setIstoricprod(istoricprod);

    produs.setDenumire(DenumireTextField.getText());
    produs.setCantitate(Integer.parseInt(CantitateTextField.getText()));
    produs.setUnitmas(UnitMasTextField.getText());

    session.save(produs);

    tx.commit();
  }
  catch(Exception e){
  System.out.println(e.getMessage());
  } 
   /*finally{
   session.close();
   }*/
   }

public static void main(String args[]) {

    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            new AdaugaProdus().setVisible(true);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T07:03:19.737

> 在客户端上必须是具有执行操作的按钮，该按钮调用服务器上的方法，对数据库进行更改，然后将结果返回给客户端？

是的，但它不直接调用该方法（您不应该使用 RMI）。你的老师希望你编写一个程序，允许多个客户端通过 java 套接字（而不是通过 odbc）在数据库上工作。

如果您在阅读这些教程之前从未用 Java 编写过客户端-服务器程序：

[http://download.oracle.com/javase/tutorial/networking/sockets/](http://download.oracle.com/javase/tutorial/networking/sockets/)

不幸的是，这涉及到对您的代码的许多更改，例如`org.hibernate.Transaction tx = session.beginTransaction();`必须在服务器上而`IdFurnComboBox.getSelectedItem()`必须在客户端上。根据经验，您可以将访问数据库的所有内容放在服务器程序中，并将与用户（UI）一起工作的所有内容放在客户端中。

服务器必须有一个侦听套接字，然后客户端连接到该套接字。客户端向服务器发送命令：在 GUI 中选择的项目，然后服务器更新数据库。

# actionscript-3 - flash as3 全屏浏览器卡住播放

> ID：10876675
> 
> 赞同：0
> 
> 时间：2012-06-04T05:31:29.193
> 
> 标签：actionscript-3, browser, flash-cs5, fullscreen, playback

我有一个 AS3 项目，当用户单击按钮时，浏览器设置为全屏。这很好用，但是在导航被发送到下一帧后播放仍然存在。第二帧的 MC 播放，但播放头没有向前移动到第 3 帧。一旦按下退出键，全屏就坏了，然后电影跳到正常情况下，如果它没有卡住的话在第二帧（好像项目在后台运行）。在没有全屏 AS3 的情况下也会出现此问题，只需使用投影仪的控件即可进入全屏状态，如果 .swf 文件在没有浏览器的情况下直接在 flashplayer 中播放时也会出现此问题。我不明白，没有全屏，一切都可以完美播放......

这是第一帧的代码：

```
fullscreenMe.addEventListener(MouseEvent.CLICK, fullScreenIt); 

function fullScreenIt(event:MouseEvent):void {
MovieClip(root).gotoAndPlay('two');
stage.displayState=StageDisplayState.FULL_SCREEN;} 
```

这是第 2 帧的代码：

```
var titlesTimer = new Timer(11000,1); 
titlesTimer.addEventListener(TimerEvent.TIMER_COMPLETE, titlesTimerFinished);
titlesTimer.start();

function titlesTimerFinished(e:TimerEvent):void {
//trace("timer is finished");   
MovieClip(root).nextFrame();
}

var creditsSound:credits = new credits();
var creditsChannel:SoundChannel = new SoundChannel();
creditsChannel = creditsSound.play(); 
```

这是第 3 帧的代码：

```
import fl.transitions.Tween;
import fl.transitions.easing.*;

function alphaTween(mc,b,f,d) {
    var Alpha:Tween = new Tween(mc, "alpha", Regular.easeIn, b, f, d, true);
}

alphaTween(moon1,0,1,7);

var moonTimer = new Timer(1000,7);
moonTimer.addEventListener(TimerEvent.TIMER_COMPLETE, moonTimerFinished);
moonTimer.start();

function moonTimerFinished(e:TimerEvent):void {
//trace("timer is finished");   
MovieClip(root).nextFrame();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:45:08.567

嗯，从给出的信息来看，我不确定播放头是处于播放模式还是帧中的停止模式。

在我们解决之前

1.  `this.stop();`在框架中写入任何代码之前是否添加了命令。这可确保播放头不处于播放模式并在当前帧中停止。如果你想让它播放，那么没有问题。但是看看计时器，我想你一定已经添加了 stop() 命令。

2.  [nextFrame 的 MovieClip文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/MovieClip.html#nextFrame%28%29)说它将播放头发送到下一帧并停止它。这发生在帧中所有剩余的动作都完成执行之后。这是故意的吗？

# java - jboss-5.1.0.GA 启动问题

> ID：10876676
> 
> 赞同：0
> 
> 时间：2012-06-04T05:31:37.540
> 
> 标签：java, jboss5.x

我正在尝试为我在 linux 平台上的应用程序配置 jboss-5.1.0.GA 服务器。当我启动服务器时，我可以在日志中看到它成功启动，但是当我尝试访问启动的端口（默认为 8080）时，它没有显示来自服务器的响应，就好像服务器没有启动一样。任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T05:53:34.233

这些只是合理的猜测，但请尝试以下操作：

使用以下选项在命令行上启动您的服务器：

```
-b 0.0.0.0 
```

尝试以下选项来检查您的服务器是否正在运行：

```
http://127.0.0.1:8080/

http://localhost:8080/

http://(your ip):8080/ 
```

祝你好运

# php - 将名称-值对检索到 PHP 数组中

> ID：10876677
> 
> 赞同：-1
> 
> 时间：2012-06-04T05:32:02.057
> 
> 标签：php, multidimensional-array

我需要一些帮助。我有一个包含这个字符串的变量；

`[{"id":"17","value":"123456789"},{"id":"18","value":"2012-06-13"},{"id":"19","value":"Kampala"},{"id":"20","value":"1"},{"id":"21","value":"500g"},{"id":"22","value":"Emirrets"},{"id":"23","value":"q"},{"id":"24","value":"q"},{"id":"25","value":"q"},{"id":"26","value":"q"},{"id":"27","value":"q"},{"id":"28","value":"q"},{"id":"29","value":"2"},{"id":"30","value":"987654321"},{"id":"45","value":"1"},{"id":"46","value":"1"}]`

我需要检索每对的 id 和 value 并使其成为 PHP 中的任何数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T05:41:21.570

您可以使用[json_decode](http://php.net/manual/en/function.json-decode.php)并传递第二个参数，因为`true`它返回一个像这样的数组

```
$json = '[{"id":"17","value":"123456789"},{"id":"18","value":"2012-06-13"},{"id":"19","value":"Kampala"},{"id":"20","value":"1"},{"id":"21","value":"500g"},{"id":"22","value":"Emirrets"},{"id":"23","value":"q"},{"id":"24","value":"q"},{"id":"25","value":"q"},{"id":"26","value":"q"},{"id":"27","value":"q"},{"id":"28","value":"q"},{"id":"29","value":"2"},{"id":"30","value":"987654321"},{"id":"45","value":"1"},{"id":"46","value":"1"}]';

$decoded = json_decode($json,true);

print_r($decoded); 
```

[工作示例](http://codepad.org/rdEfEop8)

输出将是

```
Array
(
    [0] => Array
        (
            [id] => 17
            [value] => 123456789
        )

    [1] => Array
        (
            [id] => 18
            [value] => 2012-06-13
        )

    [2] => Array
        (
            [id] => 19
            [value] => Kampala
        )

    [3] => Array
        (
            [id] => 20
            [value] => 1
        )

    .......

) 
```

您可以使用[foreach 之](http://php.net/manual/en/control-structures.foreach.php)类的循环。

```
foreach($decoded as $de){
   // access id with $de['id']
   // access value with $de['value']

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T05:39:37.990

你有一个 json 字符串。您可以使用函数 json_decode 将其转换为数组检查此代码。

```
$str = '[{"id":"17","value":"123456789"},{"id":"18","value":"2012-06-13"}, {"id":"19","value":"Kampala"},{"id":"20","value":"1"},{"id":"21","value":"500g"},{"id":"22","value":"Emirrets"},{"id":"23","value":"q"},{"id":"24","value":"q"},{"id":"25","value":"q"},{"id":"26","value":"q"},{"id":"27","value":"q"},{"id":"28","value":"q"},{"id":"29","value":"2"},{"id":"30","value":"987654321"},{"id":"45","value":"1"},{"id":"46","value":"1"}]';
$array = json_decode($str);
foreach($array as $temp){
   echo "ID : ".$temp->id."\t Value: ".$temp->value;
   echo "<br />";
} 
```

# ruby-on-rails - 检查参数是否存在于rails中

> ID：10876678
> 
> 赞同：0
> 
> 时间：2012-06-04T05:32:21.433
> 
> 标签：ruby-on-rails, ruby, activerecord, ruby-on-rails-2

这就是我想做的：

我有这段代码：

```
customer = Customer.find(:first, :conditions => {:siteId => params[:siteId], :customerCode => params[:id]}) 
```

如果 :customerCode 为空，我想改用 :temporaryCode。但我不知道怎么做。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T07:04:16.827

```
customer   = Customer.find_by_siteid_and_customercode  params[:siteId], params[:id]
customer ||= Customer.find_by_siteid_and_temporarycode params[:siteId], params[:id] 
```

使用finder更安全、更清洁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T06:21:20.937

我很确定您想在数据库中使用 COALESCE：

```
customer = Customer.where(:siteId => params[:siteId])
                   .where('coalesce(customercode, temporarycode) = ?', params[:id])
                   .first 
```

SQL COALESCE 函数返回其第一个非 NULL 参数。例如：

```
coalesce(column1, column2) 
```

给你`column1`if `column1`is not NULL 和`column2`if `column1`is NULL。

* * *

如果您使用的是 Rails2，那么这样的事情应该可以工作：

```
Customer.find(:first, :conditions => [
    'siteid = ? and coalesce(customercode, temporarycode) = ?',
    params[:siteId], params[:id]
]) 
```

# wcf - 与 Adfs 联合的 Wcf 服务的 Java 客户端

> ID：10876685
> 
> 赞同：0
> 
> 时间：2012-06-04T05:34:48.630
> 
> 标签：wcf, adfs2.0, java-client

我有一个 wcf 服务，它作为中继方连接到 adfs。此 adfs 充当身份提供者。现在在客户端有一个 Java 客户端想要调用 wcf 服务，但在此之前它必须在 adfs 中使用用户名进行身份验证并传递令牌。我已经为.Net客户端成功完成了它，但对java客户端一无所知..有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T19:25:21.107

对于 Web 服务，ADFS 使用 WS-Trust。

Metro 堆栈例如实现了这一点，但对于独立客户端，您可能需要类似 axis2 的东西，它通过[Apache Rampart](http://axis.apache.org/axis2/java/rampart/)实现这一点。

# c# - 如何将线端点（X2，Y2）绑定到点？

> ID：10876690
> 
> 赞同：0
> 
> 时间：2012-06-04T05:35:55.400
> 
> 标签：c#, wpf, binding, line

反正有绑定`Line.X2`和`Line.Y2`到`Point`的`X`和`Y`吗？现在，当我使用

```
line.DataContext=testPoint;
line.SetBinding(Line.X2Property,new Binding("X"));
line.SetBinding(Line.Y2Property,new Binding("Y")); 
```

它第一次工作，然后当我改变`testPoint.X`或`testPoint.Y`它没有改变时。该怎么办？

**[编辑]** 我有很多`Lines`，甚至可能会增加，因为我不能`Point`为每个`Line`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T05:45:39.080

当源更改时，需要更新绑定。您可以使您的 Point 成为 DependencyProperty，或者使包含 Point 的类实现 INotifyPropertyChanged。请注意，无论哪种方式，您都希望将其公开为属性，而不是字段，因为否则如果您直接修改 X 和 Y 值，它仍然不会更新。当您将其作为属性公开时，您可以使用如下语法更新单个值：

```
TestPoint = new Point(newXvalue, TestPoint.Y); 
```

这会更新单个值，但也会触发任何 setter 函数，例如 PropertyChanged。

下面是一个使用 INotifyPropertyChanged 的​​简单示例：

[http://msdn.microsoft.com/en-us/library/ms229614.aspx](http://msdn.microsoft.com/en-us/library/ms229614.aspx)

还有一个创建自己的 DependencyProperty 的简短示例：

[http://www.codeproject.com/Articles/42203/How-to-Implement-a-DependencyProperty](http://www.codeproject.com/Articles/42203/How-to-Implement-a-DependencyProperty)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T07:44:45.887

要使 WPF 绑定起作用，您的 testPoint 必须是能够通知属性更改的对象。如果 testPoint 没有实现 INotifyPropertyChanged 接口，那么您看到的行为是预期的。线端点绑定到原始值并且不会传播更改。要解决您的第一个问题，请确保 testPoint 正确实现所需的接口。

要使 WPF 绑定对对象集合起作用，您必须使用能够通知集合更改的集合。如果 testPoints 的集合没有实现 INotifyCollectionChanged 接口，那么您的线路端点将绑定到原始数​​量的对象。要解决您的第二个问题，请使用 ObservableCollection。

我还建议使用 XAML 来设置绑定而不是后面的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T05:59:55.543

如前所述`Moozhe`：

impelement`INotifyPropertyChanged`并为您的观点编写一个包装器属性：

```
public double X {
    get { return TestPoint.X; }
    set { TestPoint.X = value;
          OnPropertyChanged("X");
        }
} 
```

对`Y`……也一样

和事件：

```
public event PropertyChangedEventHandler PropertyChanged;

private void OnPropertyChanged(String property)
{
    if (PropertyChanged == null) return;
    PropertyChanged(this, new PropertyChangedEventArgs(property));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-19T08:01:23.820

1.  为实现 INotifyPropertyChanged 接口的点编写一个包装类

    ```
    public class BindingPoint : INotifyPropertyChanged
    {
        private Point point;

        public BindingPoint(double x, double y)
        {
            point = new Point(x, y);
        }

        public double X
        {
            get { return point.X; }
            set
            {
                point.X = value;
                OnPropertyChanged();
                OnPropertyChanged("Point");
            }
        }

        public double Y
        {
            get { return point.Y; }
            set
            {
                point.Y = value;
                OnPropertyChanged();
                OnPropertyChanged("Point");
            }
        }

        public Point Point
        {
            get { return point; }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        [NotifyPropertyChangedInvocator]
        protected virtual void OnPropertyChanged([CallerMemberName] string propertyName = null)
        {
            var handler = PropertyChanged;
            if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
        }
    } 
    ```

2.  将 startpoint / endPoint X 和 Y 属性绑定到 line

    ```
    Line line = new Line();
    BindingPoint startPoint = new BindingPoint(0,0);
    BindingPoint endPoint = new BindingPoint(0,0);

    var b = new Binding("X")
    {
        Source = startPoint,
        Mode = BindingMode.TwoWay
    };
    line.SetBinding(Line.X1Property, b);

    b = new Binding("Y")
    {
        Source = startPoint,
        Mode = BindingMode.TwoWay
    };
    line.SetBinding(Line.Y1Property, b);

    b = new Binding("X")
    {
        Source = endPoint,
        Mode = BindingMode.TwoWay
    };
    line.SetBinding(Line.X2Property, b);

    b = new Binding("Y")
    {
        Source = endPoint,
        Mode = BindingMode.TwoWay
    };
    line.SetBinding(Line.Y2Property, b); 
    ```

# ios - 变量突然被移除

> ID：10876691
> 
> 赞同：0
> 
> 时间：2012-06-04T05:35:57.673
> 
> 标签：ios, dealloc

我知道标题可能听起来有点奇怪，但问题也是如此。

我几乎在整个开发过程中都在模拟器上测试我的应用程序，我确实偶尔在真实设备上测试过一次以确保。但是现在我快要完成一个问题了。

每当我执行登录时，我的整个应用程序都会崩溃，说用户名和密码变量已被释放......

这是我的申请流程：

打开应用程序时，它会检查用户名和密码是否已保存或注释

```
- (void)checkIfPreviouslyLoggedIn:(BOOL)didLogin andLogin:(BOOL)doLogin {
     // some logic to get it out of the keychain
     NSLog(@"checkIfPreviouslyLggedIn: ACCOUNT %@ / %@", tmpUsername, tmpPassword);

     // RETURN: checkIfPreviouslyLggedIn: ACCOUNT  /
} 
```

之前什么都没有保存，没什么大不了的，用户只需输入帐户并按登录即可

```
- (void)loginWithUsername:(NSString *)username andPassword:(NSString *)password {
      NSLog(@"loginWithUsername: ACCOUNT %@ / %@", username, password);
      // RETURN: loginWithUsername: ACCOUNT testUser / password

      // save it for later use
      _username = username;
      _password = password;

      NSLog(@"loginWithUsername: ACCOUNT %@ / %@", _username, _password);
      // RETURN: loginWithUsername: ACCOUNT testUser / password

      // Attach a notification handler
      [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(loginCheck:) name:@"LoginCheck" object:nil];

      // call the web API
      [self doRequestFromLocation:@"/groups" withPostType:@"GET" andData:nil whichTriggersNotification:@"LoginCheck"];
} 
```

很酷，用户名和密码都很好地记录了，到目前为止一切都很好，doRequestFromLocation 基本上是一个队列类型的东西，我可以发送任意数量的请求，它会一个一个地处理它们

```
- (void)doRequestFromLocation:(NSString *)location withPostType:(NSString *)type andData:(NSData *)data whichTriggersNotification:(NSString *)notification {
      NSLog(@"doRequestFromLocation: ACCOUNT %@ / %@", _username, _password);
      // RETURN: doRequestFromLocation: ACCOUNT testUser / password
} 
```

然后它转到 doRequest 方法，该方法执行实际的数据请求，我再次在那里记录我的用户名，它返回正确的用户名。

```
NSLog(@"doRequest: ACCOUNT %@ / %@", _username, _password); 
```

在此之后，一切都变得非常糟糕，当请求完成时，调用 loginCheck()

```
- (void)loginCheck:(NSNotification *)notification {
    NSLog(@"loginCheck: ACCOUNT %@ / %@", _username, _password);
} 
```

在这里，我的 _username 和 _password 被释放，甚至在实际通话之前我检查了用户名和密码，它们仍然很好。

所以不知何故（神奇地）这两个变量被无缘无故地释放了。请注意，_username 和 _password 仅在 loginWithUsername 中设置，它们不会在我的应用程序中的任何地方更改。

> 2012-06-04 13:33:28.001 coop[5060:707] *** -[CFString respondsToSelector:]：消息发送到已释放实例 0x1099fc40 2012-06-04 13:33:28.648 coop[5060:707] *** -[CFString _cfTypeID]：发送到已释放实例 0x1099fc40 的消息

可能是什么导致了这种情况，我添加了多个断点，只是意识到在调用和 loginCheck() 之间的某个地方它们消失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T05:46:48.953

问题在这里：

```
 // save it for later use
      _username = username;
      _password = password; 
```

您的变量`_username`并`_password`没有保留，这就是它们被自动释放的原因。

在 NON-ARC 情况下，将它们声明`@property(retain)`为 ARC，对于 ARC，`@property(strong)`使用：

```
self._username = username;
self._password = password; 
```

现在您拥有内存的所有权，现在您必须在完成后释放它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T05:56:13.167

请检查您是如何在头文件中声明属性（_username 和 _password）的。如果它没有被声明为

```
@property (nonatomic, retain) NSString * _username;
@property (nonatomic, retain) NSString * _password; 
```

那么您的属性将自动释放。因此，稍后当您尝试访问此属性时，您会收到它们已释放的消息。

此外，当您在头文件中将变量声明为属性时，请使用“self.”访问它们。

请仅在您完成后解除分配您的属性，无需进一步访问此属性。

请让我知道是否需要更多帮助

# php - 查询PHP中的日期时间

> ID：10876694
> 
> 赞同：0
> 
> 时间：2012-06-04T05:36:22.363
> 
> 标签：php, datetime

的作用是什么

```
 MAX(SUBSTRING(date,15)) 
```

在 PHP 中？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T05:41:23.603

php 也有[max](http://jp.php.net/manual/en/function.max.php)和[substr](http://php.net/manual/en/function.substr.php)。但是如果你的代码是一些数据库函数，它们就完全不同了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T05:42:21.140

那不是 PHP，很可能是 MySql。

`SUBSTRING()`限制从指定起始位置开始的字符串长度`date`，在本例中为第 15 个字符。

`MAX()`将返回最高的结果，这意味着该函数将返回所选数据集中的最新日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T05:43:11.323

这里的日期可能是一些变量，它可能是什么 substr(anything) 将返回单个字符串，但如果只有一个参数，max 需要数组作为输入，所以我认为这个说法是不正确的

参考[最大文档](http://php.net/manual/en/function.max.php)

# iphone - how to paint on live camera using Camera overlay view : issues in code

> ID：10876695
> 
> 赞同：0
> 
> 时间：2012-06-04T05:36:27.313
> 
> 标签：iphone, ios, ios4

I am trying to make application to draw on live camera. In that I have created a class with xib called **`PaintView`**, in which all the paint related functionality is running.

I am adding the `paintview` to `cameraoverlay` view. The view is added properly. But when I am touching the screen of device, the application is not able to draw anything, and the log shows following error

> < Error >: CGContextSetLineWidth: invalid context 0x11b540
> 
> < Error >: CGContextSetRGBStrokeColor: invalid context 0x11b540

my code for adding sub view is

```
// Insert the overlay

overlay = [[PaintView alloc] initWithNibName:@"PaintView" bundle:nil];

//overlay.pickerReference = self.imagePicker;

[self.imagePicker.cameraOverlayView addSubview:overlay.view];

[self.imagePicker.cameraOverlayView bringSubviewToFront:overlay.view];

[self.imagePicker.cameraOverlayView setBackgroundColor:[UIColor clearColor]];

//self.imagePicker.delegate = overlay;

[self presentModalViewController:self.imagePicker animated:YES]; 
```

Please help me, how to draw on live camera !!!

Thanks in advance.

**EDIT**: In Paint view I am creating Image view, which is initialized like

drawImage = [[UIImageView alloc] init];

drawImage.frame = CGRectMake(20, 20, 320, 440);

[self.view addSubview:drawImage];

[self.view bringSubviewToFront:drawImage];

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T06:21:04.687

Hi I have got the solution ,

I was making mistake, as the Context is not necessary to use, it will create issues.

We need to use UIBezierPath, and the issues are solved. I am able to draw on live camera.

[here the reference to the link](http://soulwithmobiletechnology.blogspot.in/2011/05/uibezierpath-tutorial-for-iphone-sdk-40.html).

Yea.....

# javascript - jquery日期选择器，但日月和年在单独的下拉列表中

> ID：10876696
> 
> 赞同：6
> 
> 时间：2012-06-04T05:36:36.070
> 
> 标签：javascript, jquery, html

我正在开发一个 jquery 日期选择器。我需要选择一个日期，但在从日历中选择日期之后，我需要将日期分成三个单独的下拉菜单。一个代表一天，一个代表月份，一个代表年份。这是我的 jquery 脚本。

```
 <script type="text/javascript">
    $(document).ready(function() {

   $(function() {
    $( "#fullDate" ).datepicker({
    onClose: function(dateText, inst) {
       $('#day').val( dateText.split('/')[2] );
       $('#month').val( dateText.split('/')[1] );
   $('#year').val( dateText.split('/')[0] );
    }
 });
});
}); 
</script> 
```

**HTML**

```
<div class="demo">

<p>Date: <input id="fullDate" type="text" style="display:block"></p>
day:<select name="day" id="day" style="width:100px">
<option>1</option>
<option>2</option>
<option>3</option>
<option>4</option>
<option>5</option>
</select>

 month:<select name="month" id="month" style="width:100px">
 <option>1</option>
 <option>2</option>
  <option>3</option>
 <option>4</option>
 <option>5</option>
 </select>

year:<select name="year" id="year" style="width:100px">
<option>1</option>
<option>2</option>
<option>3</option>
<option>4</option>
<option>5</option>
</select>
</div><!-- End demo --> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T05:44:45.450

**工作演示请点击这里**：] [http://jsfiddle.net/gvAbv/13/](http://jsfiddle.net/gvAbv/13/) **或** [http://jsfiddle.net/gvAbv/8/](http://jsfiddle.net/gvAbv/8/)

在演示中单击文本框并选择日期和宾果游戏，您将自动填充下拉菜单。

要注意`dateText.split('/')[2]`的是年份而不是日期:) 如果您要切换代码工作的地方。

即`dateText.split('/')[2]`：年份；`dateText.split('/')[0]`： 月 ; `dateText.split('/')[0]`: day rest demo 会帮助你说清楚。

该演示有额外的部分，但它会帮助你！

**代码**

```
$(function() {
    $("#fullDate").datepicker({
        onClose: function(dateText, inst) {
            $('#year').val(dateText.split('/')[2]);
            $('#month').val(dateText.split('/')[0]);
            $('#day').val(dateText.split('/')[1]);
        }
    });
}); 
```

**图片点击的另一个演示：http:** [//jsfiddle.net/zwwY7/](http://jsfiddle.net/zwwY7/)

**代码**

```
$(function() {
    $("#fullDate").datepicker({
         buttonImage: 'icon_star.jpg',
        buttonImageOnly: true,
        onClose: function(dateText, inst) {
            $('#year').val(dateText.split('/')[2]);
            $('#month').val(dateText.split('/')[0]);
            $('#day').val(dateText.split('/')[1]);
        }
    });
});

​ 
```

**图片** ![在此处输入图像描述](../Images/f2558338468d09f7dda39825f1390ba1.png)

![在此处输入图像描述](../Images/dc6d5c89f7deac8e728e6da4be0e845a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T05:42:46.487

使用 datepicker **onselect**方法获取你需要的日期值 :: [onselect info](http://jqueryui.com/demos/datepicker/#event-onSelect)

像：

```
onSelect: function(dateText, inst) {            
        var datePieces = dateText.split('/');
        var month = datePieces[0];
        var day = datePieces[1];
        var year = datePieces[2];
        //define select option values for
        //corresponding element
        $('select#month').val(month);
        $('select#day').val(day);
        $('select#year').val(year);

} 
```

你的意思是这样的吗

# sql - SQL like 子句不返回任何结果

> ID：10876698
> 
> 赞同：0
> 
> 时间：2012-06-04T05:36:40.923
> 
> 标签：sql, sql-server

我有以下查询，但它不会为 where 子句返回任何结果，即使存在具有这种名称的行所查询的内容。如果我删除 where 子句，则返回 Company 表中具有 OfficeLocation 表的所有记录。我的查询有什么问题？

```
SELECT c.* 
FROM        [MyDb].[dbo].[Company] AS c
INNER JOIN  [MyDb].[dbo].[CompanyOfficeLocation] AS col ON c.Id = col.CompanyId
INNER JOIN  [MyDb].[dbo].[OfficeLocation] AS ol ON ol.Id = col.OfficeLocationId
WHERE ol.Name like '%Actual Name In This Table%'; 
```

表结构：

```
Company
    Id
    etc ...

CompanyOfficeLocation
    CompanyId
    OfficeLocationId

OfficeLocation
    Id
    etc ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T05:43:38.173

我没有发现任何错误，但是我建议您`ON`在加入后切换列以保持标准。

代替 -`INNER JOIN [MyDb].[dbo].[OfficeLocation] AS ol ON ol.Id = col.OfficeLocationId`

做 -`INNER JOIN [MyDb].[dbo].[OfficeLocation] AS ol ON col.OfficeLocationId = ol.Id`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T06:10:32.373

考虑到您的查询，记录要显示的两件事：

1.  您指定的 OfficeLocation（给定 ol.Name 值）必须具有一个 Id 值，该 Id 值由 CompanyOfficeLocation 表中的记录在其 OfficeLocationId 中使用。

2.  您在 #1 中获得的 CompanyOfficeLocation 记录必须具有存在于 Company 表中的 CompanyId。

如果不满足这两个条件中的任何一个，则查询结果中不会显示任何记录。INNER JOIN 本质上是一个“AND”子句。如果一条记录不能与至少一个 INNER JOINed 表相关，那么该记录将根本不会显示。

如果您希望在联接表中没有任何相关记录的情况下显示记录，您可能需要考虑使用[OUTER JOIN](http://msdn.microsoft.com/en-us/library/ms187518%28v=sql.105%29.aspx)。确切地说，在您的情况下是正确的连接。

# iphone - 从类方法调用其他类的实例方法？（目标 C）

> ID：10876700
> 
> 赞同：0
> 
> 时间：2012-06-04T05:37:02.500
> 
> 标签：iphone, objective-c, ios, class, static-methods

我在名为“Item”的类中有以下方法。如您所见，getImage 是一个类/静态方法，但我希望它从不同的类（Item Instance）返回一个实例方法。我不明白为什么它不起作用？

```
+(UIImage*)getImage:(int)itemNumber {
    UIImage *image = [ItemInstance getImage:itemNumber];
    return image;
} 
```

它告诉我在ItemInstance中找不到类方法+getImage，但我试图调用实例方法-getImage，而不是类方法+getImage

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T05:39:55.573

要调用实例方法，您必须有一个实例：

```
+ (UIImage*)getImage:(int)itemNumber {
    ItemInstance *anInstance = [[ItemInstance alloc] init];

    UIImage *image = [anInstance getImage:itemNumber];

    return image;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T05:40:29.693

使用以下代码：

```
+(UIImage*)getImage:(int)itemNumber {
     ItemInstance *obj = [[[ItemInstance alloc]init] autorelease];
     UIImage *image = [obj getImage:itemNumber];
     return image;
} 
```

# c# - LINQ - 获取总查询结果时间

> ID：10876702
> 
> 赞同：5
> 
> 时间：2012-06-04T05:37:22.023
> 
> 标签：c#, linq

我想知道是否可以获得查询“搜索结果”的时间？就像谷歌在每个查询下都有时间一样——**这是完成搜索所花费的时间**。

这是如何实现的？我没有尝试任何东西（因此没有代码），因为，我不知道从哪里开始。

LINQPad 内置了此功能，但我想在我正在开发的内部 mvc 应用程序上进行类似的操作。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-04T05:41:45.253

您可以使用[`Stopwatch`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)该类来测量查询（或任何其他代码）执行的持续时间。

```
Stopwatch sw = Stopwatch.StartNew();
var result = query.ToList();
TimeSpan elapsed = sw.Elapsed;
Console.WriteLine("Query took: " + elapsed); 
```

在 LINQ 查询的情况下，不要忘记这些查询仅使用延迟执行按需评估。因此，您可能希望强制枚举它们（例如，使用`ToList`），以便真正衡量它们的执行持续时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T05:41:52.950

您可以使用[System.Diagnostics.Stopwatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)对象，在页面开始呈现时启动它并在最后停止它。

# perl - 在 Perl 中检查空字符串

> ID：10876703
> 
> 赞同：1
> 
> 时间：2012-06-04T05:37:23.423
> 
> 标签：perl, string

我只是在寻找一些关于最佳实践的建议。检查空字符串或仅包含空格字符的字符串的最佳方法是什么？

我通常使用这样的正则表达式`$string =~/^\s*$/`来查看变量是否为空白。有没有更被接受的方式，或者这和其他方式一样好？使用正则表达式或 chomp 然后检查空字符串更好吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T06:50:19.600

就个人而言，我通常会颠倒意义，并搜索单个非空白字符。所以我会说：

```
next unless $string =~ /\S/; 
```

正如 ikegami 所提到的，`\s`(and `\S`) 对于究竟哪些字符被视为空白可能有点特殊，您可以使用`\p{Whitespace}`（或在我的情况下`\P{Whitespace}`）以获得更一致的结果。

出于好奇，我`not /\S/`对`/^\s*\z/`. 在 80 个字符的字符串（使用 Perl 5.14.2）上，我发现`not /\S/`空格字符串的速度大约快 20% `/^\s*\z/`，非空格字符串的速度大约快 30%。检查空行不太可能成为程序的瓶颈，但使用更简单的正则表达式肯定没有坏处。

```
use Benchmark 'cmpthese';

our $text = ' ' x 80;
#our $text = 'abcd' x 20;

cmpthese(-3, {
    'pos'  => '$text =~ /^\s*\z/',
    'neg'  => 'not $text =~ /\S/',
    'negU' => 'not $text =~ /\P{Whitespace}/',
}); 
```

空格的示例结果：

```
 Rate  pos negU  neg
pos  3562012/s   --  -2% -15%
negU 3651619/s   3%   -- -13%
neg  4194275/s  18%  15%   -- 
```

非空格的示例结果：

```
 Rate negU  neg  pos
negU 4951234/s   --  -3% -24%
neg  5112271/s   3%   -- -22%
pos  6555251/s  32%  28%   -- 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T05:48:57.657

这非常好（虽然`/^\s*\z/`会少一些冗余）。

注意：它不会匹配垂直制表符 (U+000B)。你可以使用`\p{Whitespace}`它。

注意：一个错误使它在某些时候只匹配无间断空格 (U+00A0)，除非使用`use 5.012;`or `/u`。`\p{Whitespace}`不受该错误的影响。

# .net - 简单的 WCF 调用需要很多时间

> ID：10876704
> 
> 赞同：8
> 
> 时间：2012-06-04T05:37:29.060
> 
> 标签：.net, wcf, debugging, soap, wshttpbinding

我正在创建一个 WCF 服务器-客户端应用程序。但是，在我的第一个测试中，一个简单的调用（该方法基本上只是`return true;`）需要很多时间（~5 秒）

我试图追踪它，这是呼叫追踪的截图 ![在此处输入图像描述](../Images/bb80c11de3f2e42f0e4928cd7c3b0b2b.png)

正如您在第 2 行和第 3 行之间看到的那样，间隔了 5 秒（虽然老实说我不知道​​第 2 行和第 3 行是什么意思）

在客户端（调用者）的配置下，绑定是这样的（多为Visual Studio生成

```
 <wsHttpBinding>
        <binding name="WSHttpBinding_IAgent" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
          maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text"
          textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="00:10:00"
            enabled="false" />
          <security mode="None">
          </security>
        </binding>
      </wsHttpBinding> 
```

并在服务器上

```
<wsHttpBinding>
    <binding name="WSHttpBinding_IAgent" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:05:00" sendTimeout="00:05:00"
      bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
      maxBufferPoolSize="16777216" maxReceivedMessageSize="16777216"
      messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
      allowCookies="false">
      <readerQuotas maxDepth="32" maxStringContentLength="16777216"
        maxArrayLength="16384" maxBytesPerRead="16384" maxNameTableCharCount="16384" />
      <reliableSession ordered="true" inactivityTimeout="00:10:00"
        enabled="false" />
      <security mode="None"/>
    </binding> 
```

我称之为这样的方式

```
var client = new AgentClient(binding, BuildEndpointAddress(hostName, port));
for(int i =0; i<10; i++)
    client.IsAlive(); //this call is very slow despite just returning true;
    // subsequent calls are also slow so probably not because of wake-up time 
```

请注意此测试，服务器和客户端都在同一台计算机上，因此它不会是网络问题。知道是什么导致了速度缓慢，或者我如何找到更多信息来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T02:12:02.107

您的帖子中未指定应用程序的生命周期，我将假设您在第一次启动客户端应用程序并调用 WCF 服务时没有对其进行预热。

在这种情况下，时间安排是有意义的。

尽管使用了轻量级绑定和消息，但如果没有预热，.NET 会做很多隐藏的工作来初始化 ChannelFactory 和 Server。

这是 WCF 的本质，不会引起太多问题，因为预热后通信速度非常快。

尝试在一个应用会话中连续两次调用您的服务，测量两次调用的时间。如果两个电话都花费相当的时间，我的假设是错误的。

如果您想查看我的问题并比较环境 -

[为什么第一个 WCF 客户端调用很慢？](https://stackoverflow.com/questions/10859832/why-is-the-first-wcf-client-call-slow)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T07:33:21.677

尝试配置 WCF 跟踪日志记录 - 此处的详细信息：http: [//msdn.microsoft.com/en-us/library/ms733025.aspx](http://msdn.microsoft.com/en-us/library/ms733025.aspx)

我在使用 WCF 时遇到过各种令人毛骨悚然的问题，但是我以前从未见过在同一个盒子上出现的那种性能问题。正如其他人所说，最可能的原因是服务器“预热”，但如果您多次调用它，那么这应该不是问题。您是否尝试过从客户端应用程序中多次调用代码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T14:41:32.380

要查找更多信息，您可能希望通过 BCL 团队的 codeplex 站点中的[Perfmonitor](http://bcl.codeplex.com/releases/view/42784)工具来利用 Windows 事件跟踪 (ETW) 。该工具的众多功能之一是它可以每毫秒对指令指针进行一次采样，并为您提供每个样本的托管调用堆栈。这可以让您了解代码在这些时间流逝期间正在做什么。

附言。这是使用此工具的文章的另一个链接：http: [//naveensrinivasan.com/category/net/etw-net/](http://naveensrinivasan.com/category/net/etw-net/)

# mysql - phpMyAdmin 没有从 Linux CentOS 开始？

> ID：10876705
> 
> 赞同：-2
> 
> 时间：2012-06-04T05:37:33.220
> 
> 标签：mysql, phpmyadmin, centos

我已经使用以下命令在 Linux CentOS 服务器上安装了**MySQL 服务器-**

**须藤百胜安装mysql**

我能够启动 mysqld 服务。然后我用命令安装了**phpMyAdmin**

**须藤百胜安装phpmyadmin**

我已经更改了配置的**config.inc.php**文件。然后我重新启动了**httpd**服务。我还更改了**iptables**以访问 mysql 端口 3306。

但我仍然无法在浏览器上启动**phpMyAdmin 。**

**另外我没有为root**用户设置密码，但是当我通过命令行连接到mysql时，它会要求输入密码。我尝试使用空白密码，但现在可以使用。

那么请有人建议我如何启动**phpMyAdmin**并连接到**mysql**吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:03:14.710

可能是您的 SELinux 阻止了它。我以前曾在 SELinux 阻止我访问它的地方看到过这种情况。跑步`sestatus`会告诉你。

要禁用它，请编辑文件`/etc/selinux/config`以将 SELINUX 设置为禁用。然后重新启动服务器并运行`sestatus`检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:19:30.327

phpMyAdmin 应该可以完美运行，我通常在安装 MySQL 和 PHP 后从官方网站安装。那么，你已经安装 PHP 了吗？

在负面情况下，您必须在运行 phpMyAdmin 之前执行此操作。

```
sudo yum install php5 php5-mysql 
```

# opencv - 将 IplImage 转换为 osg::Image

> ID：10876706
> 
> 赞同：1
> 
> 时间：2012-06-04T05:37:37.960
> 
> 标签：opencv, openscenegraph

如何正确地将 OpenCV IplImage 转换为 OpenSceneGraph 的 osg::Image？

这是我目前的方法。但我得到的颜色数据不正确。

```
// IplImage* cvImg is a webcam output image captured using cvQueryFrame(capture)
osg::ref_ptr<osg::Image> osgImage = new osg::Image;
osgImage->setImage(cvImg->width,cvImg->height, 3,
                           GL_RGB, GL_RGB, GL_UNSIGNED_BYTE,
                           (BYTE*)(cvImg->imageData),
                           osg::Image::AllocationMode::NO_DELETE,1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:38:12.203

This is likely an issue involving OpenCV's native BGR color space. You don't mention which version of OpenCV you are using, but modern versions define `CV_BGR2RGB` for use with [cvCvtColor](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html?highlight=cvcvtcolor#void%20cvCvtColor%28const%20CvArr%2a%20src,%20CvArr%2a%20dst,%20int%20code%29). Possibly doing the conversion like this

```
IplImage* pImg = cvLoadImage("lines.jpg", CV_LOAD_IMAGE_COLOR);
cvCvtColor(pImg, pImg, CV_BGR2RGB);
cvReleaseImage(&pImg); 
```

If you can't use that another option would be use [cvSplit](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=cvsplit#void%20cvSplit%28const%20CvArr%2a%20src,%20CvArr%2a%20dst0,%20CvArr%2a%20dst1,%20CvArr%2a%20dst2,%20CvArr%2a%20dst3%29) to separate and reorder the channels and then combine them with [cvMerge](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=cvsplit#void%20merge%28const%20Mat%2a%20mv,%20size_t%20count,%20OutputArray%20dst%29).

On a side note, I would definitely recommend using the C++ interface as it is much easier memory management, and has more features than the C interface.

Hope that helps!

# android - 设置 inputType textFilter 和 textPassword 停止显示为密码点而不是它们本身

> ID：10876711
> 
> 赞同：2
> 
> 时间：2012-06-04T05:38:24.183
> 
> 标签：android, xml

我一直在尝试使用一组字符来限制密码字段。所以尝试使用 textFilter 并完成它。当我设置 inputType textFilter 和 textPassword 时，它会停止显示为密码点并显示我在 Editext 中键入的文本。当我删除 textFilter 时，该字段的字符将显示为密码点而不是它们本身。

这是我的 XML 资源中使用的片段

**主要的.xml**

```
<EditText android:id="@+id/password" android:layout_width="wrap_content"
                    android:layout_height="wrap_content" android:layout_weight="1"
                    android:layout_gravity="center_vertical|center_horizontal"
                    android:layout_marginTop="2.0dip" android:singleLine="true"
                    android:scrollHorizontally="true" android:inputType="textPassword|textFilter"
                    android:hint="@string/input_field_here" android:digits="@string/only_alpha_numeric"></EditText> 
```

**字符串.xml**

```
<string name="only_alpha_numeric">abcdefghijklmnopqrstuvwxyz1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ/> 
```

请让我知道，有没有可能达到我想要的结果的方法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T09:04:22.670

您好在 xml 文件中使用以下行。从此，您也可以保留 textFilter 属性以及密码提示属性。希望这对您有很大帮助。

android:password="true" android:inputType="textFilter"

# c - 如何从 C 中的文件中读取两个双引号之间的完整字符串

> ID：10876718
> 
> 赞同：0
> 
> 时间：2012-06-04T05:39:46.673
> 
> 标签：c

我需要一个 C 程序从文件中读取双引号内的字符串并存储它们。文件不是固定的，这意味着它可能会发生变化，但会有如下数据：

```
MY_NAME( tra_ctrl_1, "T_aa1")
MY_NAME( tra_ctrl_2, "A_bb1")
MY_NAME( tra_ctrl_3, "C_x")
MY_NAME( tra_ctrl_4, "M_cc1")
MY_NAME( tra_ctrl_5, "xx")
MY_NAME( tra_ctrl_6, "yy")
............ and so on.. 
```

我想在读取文件行后存储 T_aa1、A_bb1、C_x、M_cc1、xx 和 yy。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T05:43:24.587

您可以使用[正则表达式](http://www.gnu.org/software/libc/manual/html_node/POSIX-Regexp-Compilation.html#POSIX-Regexp-Compilation)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T09:20:11.613

只有scanf的一个简单方法

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main() {
    FILE *fp;
    char buff[1024];
    char str[128];

    fp=fopen("data.txt","r");

    while (NULL!=fgets(buff, sizeof(buff), fp)){
        sscanf(buff, "%*[^\"]%*c%[^\"]%*c%*[^\n]%*c", str);
        printf("%s\n", str);
    }
    fclose(fp);
    return 0;
}
/*
T_aa1
A_bb1
C_x
M_cc1
xx
yy
*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T05:48:38.720

1）手动编写解析器。我假设您要么将整个文件保存在内存中，要么至少保存整行。在这种情况下， strtok() 对于简单的解析操作来说已经足够好了。应该很容易。

2) 使用[lex 和 yacc](http://www.bing.com/search?q=lex%20and%20yacc&form=MOZSBR&pc=MOZI)（或 flex 和 bison）为您生成解析器。您可能只需要 (f)lex。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T09:35:38.813

strchr 只是一个简单的方法

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main() {
    FILE *fp;
    char buff[1024];
    char str[128];

    fp=fopen("data.txt","r");

    while (NULL!=fgets(buff, sizeof(buff), fp)){
        char *pf,*pb;
        int len;
        pf=strchr(buff, '\"');
        pb=strchr(pf+1, '\"');
        len = pb - pf - 1;
        memcpy(str, pf + 1, len);
        str[len]='\0';
        printf("%s\n", str);
    }
    fclose(fp);
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T07:30:24.200

您可以使用 strtok() 函数通过将“”转换为键并制作条件代码以使用其中的表达式（字符串）来实现进一步的目的。

# ios - libPayPalMPL.a 需要哪些框架？

> ID：10876722
> 
> 赞同：0
> 
> 时间：2012-06-04T05:40:06.010
> 
> 标签：ios, paypal

该线程说我需要三个，但是我有几个带有这些前缀的选项，并且不知道要准确链接哪三个。我正在使用 iOS 5.1、XCode 4.3.2

[在 iOS5 中实现库时获取“apple mach-o linker id error undefined symbols for architecture i386”](https://stackoverflow.com/questions/8670162/getting-apple-mach-o-linker-id-error-undefined-symbols-for-architecture-i386-w)

我一直在处理似乎已弃用的文档、带有作者提问的教程、不完整的文档、不起作用的示例代码……不酷的贝宝，不酷。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T05:46:59.680

你必须准确地加载这些 -

1.  安全框架
2.  libxml2.dylib
3.  libz.1.2.5.dylib

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T06:15:34.140

没关系，我只是查看了演示应用程序并开始添加每个应用程序。
libxml2.dylib libz.dylib Security.framework

# haskell - Haskell：最大/最小函数

> ID：10876723
> 
> 赞同：3
> 
> 时间：2012-06-04T05:40:12.953
> 
> 标签：haskell

Haskell 中是否有这样的功能：

```
max_of_type :: (Num a) => a 
```

所以：

```
max_of_type :: Int == 2 ^ 31 - 1 // for example, implementation dependent 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T05:41:41.473

是的，它叫`maxBound`.

还有`minBound`. 它们都是`Bounded`类型类的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T05:42:06.290

哎呀，这只是`maxBound`和`minBound`。

# iphone - 来自 Cocos2d 操作的随机崩溃

> ID：10876726
> 
> 赞同：0
> 
> 时间：2012-06-04T05:40:32.380
> 
> 标签：iphone, ios, cocos2d-iphone, box2d-iphone

每当将某些 CCAction 应用于精灵时，我都会遇到一些不一致的崩溃。

前任：`*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[CCScaleBy actionWithDuration:scale:]: unrecognized selector sent to class 0x1860a4'`

CCBlink 有时我也会得到同样的结果。这些操作是从调度程序内部调用的（使用 BOOL 标志来确保它们只运行一次）。

关于我为什么会出现这些错误的任何想法？它非常不一致。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T05:58:31.553

你有 NSInvalidArgumentException。确保将所需的值传递给方法。例如，当方法等待浮点数时，您不要尝试传递 BOOL 值等。

# richfaces - rich:comboBox 中的间距问题

> ID：10876729
> 
> 赞同：0
> 
> 时间：2012-06-04T05:41:04.263
> 
> 标签：richfaces, jsf-1.2

我遇到了一个与rich:ComboBox 相关的问题

```
<rich:comboBox id="colorBox" value="#{formInputBean.color}">
                                <f:selectItem itemValue="Red" />
                                <f:selectItem itemValue="White" />
                                <f:selectItem itemValue="Blue" />
                                <f:selectItem itemValue="green" />
                                <f:selectItem itemValue="black" />
                                <f:selectItem itemValue="pink" />
                            </rich:comboBox> 
```

这是我的组合框的代码。但这在组合框字段和组合框下拉按钮之间显示了一个空白区域。这是示例：![在此处输入图像描述](../Images/9205031694532ba57fb1a85fc6c24298.png)

请指导我，如何解决它

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T06:22:29.627

这个问题纯粹是 doctype 相关的。如果页面以 Quirks 模式运行，则会产生此问题。

# java - 如何在java中创建.mpp文件？

> ID：10876730
> 
> 赞同：6
> 
> 时间：2012-06-04T05:41:05.947
> 
> 标签：java, ms-project, mpxj

我能够创建 . **mpx**文件通过在 java 中使用***mpxj***库。
我需要写（创建）。java中的**mpp文件可以*****请***任何人建议我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T21:03:16.010

我维护 MPXJ，对您的询问的简短回答是，目前 MPXJ 不编写 MPP 文件。

造成这种情况的主要原因很简单，尽管在理解 MPP 文件结构方面付出了很多努力，但仍有很多内容没有被很好地理解，因此难以可靠地生成。另一个问题是，即使我要生成一些可以生成 MPP 文件的代码，它可以写入该文件的功能也可能落后于 MPXJ 在 MSPDI 文件格式中支持的功能，这也是由于我对 MSPDI 文件格式的不完全理解。 MPP 格式。

我怀疑下一个版本的 MS 项目（项目 15？项目 2013？）可能会提供“.mppx”文件格式，类似于 MS Office 套件中其他应用程序使用的“.docx”等格式。这将是基于 XML 的，并且比目前的二进制 MPP 文件格式更容易生成……让我们看看微软想出了什么！

乔恩

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-02T12:25:31.327

访问[http://www.mpxj.org/faq/](http://www.mpxj.org/faq/)
我可以使用 MPXJ 编写 MPP 文件吗？

```
Not at present. Although it is technically feasible to generate an MPP   file, the knowledge we have of the file structure is still relatively   incomplete, despite the amount of data we are able to correctly extract. It   is therefore likely to take a considerable amount of development effort   to make this work, and it is conceivable that we will not be ablet  to write   the full set of attributes that MPXJ supports back into the MPP  file - simply because we don't understand the format well enough. You are  therefore probably better off using MSPDI which does support the full range  of data items present in an MPP file. 
```

你可以

试试这个：[http ://www.aspose.com/java/project-management-component.aspx](http://www.aspose.com/java/project-management-component.aspx)

它编写 MPP 和 Microsoft Project XML。

**但这不是免费的**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-08T23:50:41.577

试试这个：[http ://www.aspose.com/java/project-management-component.aspx](http://www.aspose.com/java/project-management-component.aspx)

它编写 MPP 和 Microsoft Project XML。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-04T05:49:04.897

我认为“mpp”可能是指“Microsoft PowerPoint”，对吗？

问：为什么您认为 MPXJ（Microsoft Project Exchange/Java）不能做到这一点？

> [http://www.mpxj.org/](http://www.mpxj.org/)
> 
> 欢迎来到 MPXJ！该库提供了一组工具，允许在 Java 和 .Net 中操作项目信息。MPXJ 支持多种数据格式：Microsoft Project Exchange (MPX)、Microsoft Project (MPP、MPT)、Microsoft Project Data Interchange (MSPDI XML)、Microsoft Project Database (MPD)、Planner (XML)、Primavera (PM XML、XER和数据库）和 Asta Powerproject（PP、MDB）。

# php - 在 php mysql 中创建安装文件

> ID：10876732
> 
> 赞同：0
> 
> 时间：2012-06-04T05:41:15.010
> 
> 标签：php, mysql

我正在为我的站点创建用户界面。我创建表单以输入表单用户，输入字段是输入主机名，输入数据库名称，输入密码。我设法创建数据库并导入 .sql 文件。但现在我需要连接文件中的主机名、数据库名称和密码。请帮助我在哪里存储该变量或如何在连接文件中对其进行硬编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T06:02:40.830

据我了解您的问题，您可以将此类详细信息存储为常量，例如创建文件，例如**config.php**并添加：

```
define("HOSTNAME", "your_host");
define("DB_NAME", "your_database_name");
define("DB_USERNAME", "your_database_username");
define("DB_PASSWORD", "your_database_password"); 
```

并包含这个 config.php 文件

你的意思是这样的吗

# php - 从 sql 查询中计算列数

> ID：10876736
> 
> 赞同：-1
> 
> 时间：2012-06-04T05:41:35.203
> 
> 标签：php, mysql, sql, aggregate-functions

我正在尝试使用 count() 函数计算从表中选择的行数。但它总是为每个选择了一行/行的查询返回一个“2”，或者为每个没有选择行的查询返回一个“1”。

```
 $sql_usb="select item_name from req_item where item_name='USB Dongle'";
 $result_usb=mysql_query($sql_usb);
 $row_usb=mysql_fetch_array($result_usb);

 $sql_router="select item_name from req_item where item_name='Access Point/Router'";
 $result_router=mysql_query($sql_router);
 $row_router=mysql_fetch_array($result_router);

 $sql_laptop="select item_name from req_item where item_name='Laptop'";
 $result_laptop=mysql_query($sql_laptop);
 $row_laptop=mysql_fetch_array($result_laptop);

 $usb_inv=count($row_usb);
 $router_inv=count($row_router);
 $laptop_inv=count($row_laptop);

 $total_inv=$usb_inv+$router_inv+$laptop_inv; 
```

我也尝试添加 isset() (ie `$usb_inv=count(isset($row_usb));`) 和 mysql_num_rows() (ie `$usb_inv=mysql_num_rows($row_usb));`)

两者都给出 1 的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T05:43:06.647

你应该使用

`SELECT COUNT(*) WHERE ....`

检查[文档](http://dev.mysql.com/doc/refman/5.6/en/counting-rows.html)。

如果只需要总数，那么只需要 1 个 sql 就足够了。

```
// please add error handing yourself.
$sql = "select count(*) from req_item where item_name
        where item_name in('USB Dongle', 'Access Point/Router', 'Laptop')";
$result = mysql_query($sql);
$row = mysql_fetch_array($result)
$total = $row[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T05:47:30.973

你应该在结果集上使用 mysql_num_rows 。

像这样。

```
$usb_inv=mysql_num_rows($result_usb);
$router_inv=mysql_num_rows($result_router);
$laptop_inv=mysql_num_rows($result_laptop); 
```

这会给你正确的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T05:49:44.680

你应该使用

```
$usb_inv = mysql_num_rows($result_usb); 
```

代替

```
$usb_inv=count($row_usb); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T05:50:07.423

mysql_fetch_array 正在返回类似

```
$row[0] = ...;
$row[item_name] = ...; 
```

如果您使用数组的计数，它将始终返回一个 2，
因为它返回一个包含索引和关联键的数组。

> 数组 mysql_fetch_array ( 资源 $result [, int $result_type = MYSQL_BOTH ] )
> 
> mysql_fetch_array — 以关联数组、数值数组或两者的形式获取结果行

尽管 mysql_fetch_array 使用错误，
你可能应该只使用一个查询

```
$sql ="select item_name from req_item 
       where item_name in('USB Dongle', 'Access Point/Router', 'Laptop')"; 
```

之后，

```
$count = array();
while ($row = mysql_fetch_array($result, MYSQL_ASSOC))
{
  // do something else ...

  // to get count for each item name
  $count[$row["item_name"]]++;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T05:50:25.800

你必须像这样在你的mysql查询中使用count

```
$SelectQuery = 'select Count(item_name) as [TotalUSB] from req_item where item_name='USB Dongle' 
```

然后你可以得到结果

```
$result = mysql_query($SelectQuery);
$row = mysql_fetch_array($result);

$USBCount = $row['TotalUSB']; 
```

# matlab - 在 matlab 中混合 plotyy 和 semilogy 时，yticks 无法正确显示

> ID：10876741
> 
> 赞同：0
> 
> 时间：2012-06-04T05:41:53.627
> 
> 标签：matlab, plot

我正在使用 plotyy 在同一图中的不同轴上绘制两条曲线。第一条曲线的范围从 10^-4 到 10^-1，第二条曲线的范围从 0 到 10。如果我按以下方式绘制，

[AX, H1, H2] = plotyy(x, y1, x, y2, 'semilogy', 'semilogy');

它们都将绘制为符号学并在 y 中具有正确的比例。但我不想以 log10 比例显示 y2，所以我改变了

[AX, H1, H2] = plotyy(x, y1, x, y2, 'semilogy', 'plot');

但是，在左右 y 轴上，刻度只显示最小和最大范围，中间的所有细节都消失了。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T10:06:34.610

你可以试试这个：

```
[AX, H1, H2] = plotyy(x, y1, x, y2, 'semilogy', 'plot');

% set yticks for the left axis 
set(AX(1), 'ytick', yourDesiredYticks1)
set(AX(1), 'box', 'off') % to remove corresponding yticks on the right side of the plot

% set yticks for the right axis
set(AX(2), 'ytick', yourDesiredYticks2)
set(AX(2), 'box', 'off') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T16:33:16.703

试试这个：

```
%# create some data resembling what you described
x = 1:100;
y1 = rand(size(x))*1e-1 + 1e-4;
y2 = rand(size(x))*10;

%# plot
hAx = plotyy(x,y1, x,y2, 'semilogy', 'semilogy');
set(hAx(2), 'YScale','linear') 
```

![截屏](../Images/812fd536c86ba4ec6d3590d0597edce6.png)

# java - Netbeans ImageIcon 不显示

> ID：10876742
> 
> 赞同：0
> 
> 时间：2012-06-04T05:42:01.890
> 
> 标签：java, image, netbeans, imageicon, gui-builder

我正在使用 NetBeans GUIBuilder 制作 JPanel 表单。我添加了一个 JLabel 并使用 NetBeans 的界面为它提供了一个来自外部图像 (.png) 的图标。路径已验证，图像显示在 GUIBuilder 屏幕上。当我单击“预览设计”按钮时，它甚至会显示出来。当我运行项目时它没有出现。GUI 的其余部分按原样显示。你们中有人知道为什么会发生这种情况和/或如何解决吗？

你们中的很多人一直在要求获得 SSCCE。由于代码是由 NetBeans 表单生成器生成的，因此我包含了制作 JLabel 所采取的步骤。重点区域以红色圈出。

1.  将 JLabel 拖放到 Form Builder 中。 ![将 JLabel 拖放到 Form Builder 中。](../Images/8c9e172684bb71c0801ee7042c6344cc.png)

2.  打开 JLabel 的属性菜单。为该`text`字段输入空字符串 ("")。单击 旁边的省略号`icon`。 ![打开 JLabel 的属性菜单。 单击图标旁边的省略号。](../Images/d93504d49492ad420329561eebd42495.png)

3.  选择外部图像并单击省略号。 ![选择外部图像并单击省略号。](../Images/55e1832ce845dbd2e6e238b704a6667c.png)

4.  选择选择的图像。就我而言，它是一个.png。 ![选择选择的图像。](../Images/ddd5df8ecb28ad2e5373dcde82fd48be.png)

5.  请注意，图像出现在图标预览中。 ![请注意，图像出现在图标预览中。](../Images/d1dabd8f2c524bc7c67caddd47343c33.png)

6.  关闭图标菜单和属性菜单，注意图像在 Form Builder 上显示为 JLabel 的图标。 ![关闭图标菜单和属性菜单，注意图像出现在表单生成器上。](../Images/39f495f475310c5ef4991ef18b1a2602.png)

感谢您接受非正统的 SSCCE，并提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:20:34.587

我发现依靠 Netbeans GUI builder 为您做所有事情的艰难方式是一个错误。

只需创建一个如下所示的图标获取类，将图标放入它的包中，然后使用“自定义代码”而不是“图像选择器”。当然，图标在 NB 内是不可见的。但如果他们在应用程序运行时出现，谁在乎呢。

```
package com.example.resource.icons;

import javax.swing.ImageIcon;

public class IconFetch {

    private static IconFetch instance;

    private IconFetch(){
    }

    public static IconFetch getInstance() {
        if (instance == null)
            instance = new IconFetch();
        return instance;
    }

    public ImageIcon getIcon(String iconName) {
        java.net.URL imgUrl = getClass().getResource(iconName);
        if (imgUrl != null) {
            return new ImageIcon(imgUrl);
        } else {
            throw new IllegalArgumentException("This icon file does not exist");
        }
    }

    public static final String MINESWEEPER_ONE = "one.png";
} 
```

用法：

```
IconFetch.getInstance().getIcon(IconFetch.MINESWEEPER_ONE); 
```

如果在尝试此操作后图标仍未显示，那么您在表单中布置组件的方式可能有问题（标签在那里但您看不到它）。

希望这会有所帮助，即使它是一个长镜头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-07T09:01:41.310

我也有同样的问题。但我找到了解决方案。

1.  我在项目中创建包并将图像放在那里。
2.  当我构建项目时，Netbeans 将创建“目标”文件夹并构建 .class 文件。
3.  我发现我复制到包中的图像没有传输到“目标”文件夹。

**临时解决方案。** 4.我将所有图像复制到具有相同结构的目标文件夹。然后我可以直接从 Netbeans 运行该项目。5\. 如果您清理项目。再做4号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-10T09:15:27.363

我遇到了同样的问题，predi 的解决方案也不起作用。然后我创建了一个包而不是文件夹，并在那里添加了图像，它现在可以工作了。

# ruby-on-rails - 使以下代码通过的输出是什么？

> ID：10876750
> 
> 赞同：1
> 
> 时间：2012-06-04T05:42:50.703
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, github, ruby-on-rails-3.2

嗨，我目前正在阅读 Ruby on Rails 指南的最后一章，我似乎无法弄清楚我目前遇到的问题。这是输入此特定代码后我的本地主机/主页中的输出：`@user.followed_users.count`

```
2: <div class="stats">
3:   <a href="<%= following_user_path(@user) %>">
4:     <strong id="following" class="stat">
5:       <%= @user.followed_users.count %>
6:     </strong>
7:     following
8:   </a> 
```

这是我收到的错误。

`app/views/shared/_stats.html.erb:5:in`

`app/views/static_pages/home.html.erb:8:in`

但问题是，当我删除代码时`@user.followed_users.count`，它可以完美运行，但我无法看到我的以下计数（就像在 twitter 中一样），这不是指南的一部分……也是类似 twitter 的应用程序的一部分。

这是两个文件的全部要点，我希望有人能提供帮助并找到解决这个问题的方法..

[https://gist.github.com/2866551](https://gist.github.com/2866551)

任何帮助将不胜感激。-马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T07:12:35.410

您在用户模型中的关系应该是这样的，`has_many :followed_users, through: :relationships, source: :followed`而不是`has_many :followed_users, through: :relationships, source: "followed_id"`您进行此更改，它将正常工作。

# java - Android Java有一种方法可以将特定索引处的一些对象附加到arraylist中吗？

> ID：10876753
> 
> 赞同：-2
> 
> 时间：2012-06-04T05:43:13.953
> 
> 标签：java, android, arraylist

你好，我有`ArrayList<String>`一些字符串。我想在特定索引处插入一个字符串，而不会丢失该索引上的字符串。我知道如何使用`list.add(index, string)`，但它将索引处的字符串替换为新字符串。

例如我有这个 ArrayList：

```
index 0 => Orange
index 1 => Melon
index 2 => Apple
index 3 => Strawberry
index 4 => Pear
index 5 => Banana 
```

现在我想将*Cherry*添加到索引 2，所以结果应该是：

```
index 0 => Orange
index 1 => Melon
index 2 => Cherry 
index 3 => Apple
index 4 => Strawberry
index 5 => Pear
index 6 => Banana 
```

有没有一种简单的方法可以做到这一点，因为它让我头疼。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T05:46:00.293

参考：[ArrayList.add(index, element)](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#add%28int,%20E%29)

```
 void add(int index, E element) 
```

> 在此列表中的指定位置插入指定元素。将当前位于该位置的元素（如果有）和任何后续元素向右移动（将其索引加一）。

应该也可以在android上运行...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T05:47:32.510

`add(int index, E element)`效果很好：

```
List<String> list = new ArrayList<String>(Arrays.asList(
                               "Orange", "Melon", "Apple",
                               "Strawberry", "Pear", "Banana"));
System.out.println(list);
list.add(2, "Cherry");
System.out.println(list); 
```

**输出：**

```
[Orange, Melon, Apple, Strawberry, Pear, Banana]
[Orange, Melon, Cherry, Apple, Strawberry, Pear, Banana] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T05:48:33.400

由于您需要附加到现有索引，因此您需要像这样 -

```
list.add(index, string + list.remove(index)); 
```

list.remove(index) 将返回索引处的元素并将其删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T05:53:44.803

请参阅：http: [//developer.android.com/reference/java/util/ArrayList.html](http://developer.android.com/reference/java/util/ArrayList.html)

```
void add(int index, E object) 
```

将指定对象插入到此 ArrayList 的指定位置。该对象被插入到指定位置的任何先前元素之前。如果位置等于此 ArrayList 的大小，则将对象添加到末尾。

参数：

index：插入对象的索引。

object：要添加的对象。

投掷

位置 < 0 时的 IndexOutOfBoundsException || > 尺寸（）

# ruby-on-rails - Ruby on rails 在运行时更改状态

> ID：10876754
> 
> 赞同：0
> 
> 时间：2012-06-04T05:43:18.640
> 
> 标签：ruby-on-rails, ruby, database

我在 rails 3.0.9 中做了一个应用程序......在那个应用程序中，我有一个具有地址字段的表单。现在如果用户第一次输入地址字段（比如“ABC”）状态应该是 1，但是当另一个用户输入新地址（比如“XYZ”）然后提交 ts 状态应该是 1 而 ABC 状态应该是 0 .
如果现在用户输入另一个地址说“PQR”并提交，那么它的状态应该是1，XYZ状态应该是0，依此类推。
例如，数据库中有 10 个地址，前 9 个地址的状态为 0，第 10 个地址为 1。如果用户输入另一个地址，则第 11 个地址应为 1，第 10 个应为 0。
我不知道如何在运行时更改值在表...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:09:56.480

这可以通过[ActiveRecord 的 update_all 方法](http://apidock.com/rails/ActiveRecord/Relation/update_all)来完成。只需在模型中定义一个回调：

```
before_create :update_address_statuses

def update_address_statuses
  MyModel.update_all("status = 0")
  self.status = 1
end 
```

但是，正如 blackbird07 指出的那样，您可能需要重新考虑如何在应用程序中使用地址，并简单地获取最近更新的地址，而不是更新表的每个字段。

# php - ajax 发布到 php 文件

> ID：10876760
> 
> 赞同：1
> 
> 时间：2012-06-04T05:43:51.537
> 
> 标签：php, jquery

我无法让它工作 - 这是我第一次尝试。我确实意识到信息还没有被序列化，我只是想让它先工作。

有什么想法我在这里做错了吗？它不会将信息保存到 mysql 数据库中。

索引.html：

```
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="purchase.js"></script>
</head>

<form name="paypal_form" onsubmit="return validate_form();" method="post">
<input type="text" size="25" name="os0" value="">
<input type="text" size="25" name="os1" value="">
<input type="hidden" name="item_name" value="product">
<input type="image" src="images/paypal.gif" name="submit">
</form> 
```

付款.js：

```
function validate_form()
{

// code to validate form data 
//  ....

    valid = true;

    var regcode = document.paypal_form.os0.value;
    var email = document.paypal_form.os1.value;
    var product = document.paypal_form.item_name.value;

    var dataString = 'regcode=' + regcode + '&email=' + email + '&product=' + product;

    $.ajax({
        url: "/process.php",
        type: "POST",
        data: dataString,
        success: function()
        {
            alert("Order Submitted");
        }
    });

    return valid;
} 
```

进程.php：

```
$dbhost = "localhost";
$dbuser = "dbuser";
$dbpass = "dbpass";
$dbname = "dbname";

$date = date('Y/m/d');

$RegCode = $_POST['regcode'];
$Email = $_POST['email'];
$Product = $_POST['product'];

mysql_connect($dbhost, $dbuser, $dbpass);

// Store the transaction ID in the database
mysql_query("INSERT into payment (date, regcode, sentemail, status) values ('$date', '$RegCode', '$Email', '$Product')"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T05:50:48.467

如果 process.php 在同一个文件夹中，请将其设为 url:'process.php' 并且

```
mysql_connect($dbhost, $dbuser, $dbpass);
mysql_select_db("dbname", $con); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T06:03:04.430

在表单标签中添加以下属性并尝试

```
action="javascript:void(0);" 
```

# python - 在 Plone 中更改工作流状态后，如何使用内容规则将表单保存的数据作为邮件附件发送

> ID：10876763
> 
> 赞同：1
> 
> 时间：2012-06-04T05:44:20.390
> 
> 标签：python, plone, ploneformgen

我希望将使用 plone formgen 提交的数据作为“邮件附件”发送到特定邮件 ID 以供批准。我使用内容规则来更改工作流状态，以触发邮件，说明数据已准备好批准邮件 ID。但我也希望使用 plone 4.1邮寄**数据**

# jquery - 如何使用自定义函数扩展 jQuery 自动完成选择方法？

> ID：10876766
> 
> 赞同：0
> 
> 时间：2012-06-04T05:44:37.923
> 
> 标签：jquery, jquery-ui, jquery-autocomplete

如何使用自定义函数扩展自动完成选择方法

```
$( ".selector" ).autocomplete({
   select: function(event, ui) { 
    ui.item.option.selected = true;
    self._trigger( "selected", event, {
        item: ui.item.option
    });
}
}); 
```

我改为

```
$( ".selector" ).autocomplete({
   select: customSelect
});

function customSelect(event, ui) { 
    ui.item.option.selected = true;
    self._trigger( "selected", event, {
        item: ui.item.option
    });
} 
```

但是这里`self._trigger`会出错`self._trigger is not a function`。如何从 select 传递实例或在扩展 select 时如何更正？

# c# - HttpRuntime.Cache 在哪里存储数据？

> ID：10876768
> 
> 赞同：5
> 
> 时间：2012-06-04T05:44:52.927
> 
> 标签：c#, asp.net

我正在尝试实现一个具有缓存功能的 Web 应用程序。我需要缓存的原因是我们有一个应用程序可以让用户访问在线课程。现在，一旦用户登录，我就会根据我们的数据库验证他。验证后，我想将用户 ID 和课程 ID 存储在缓存中 20 分钟，这样如果他再次请求，我可以从缓存中检索用户 ID 和课程 ID 的值，如果有效，则为他提供访问权限由于某些原因我不能在此应用程序中使用会话变量，因此它们不是一个选项。

现在，我的应用程序中的缓存代码位于 HTTP 处理程序（.ashx 文件）中。现在我尝试像调用 aspx 页面一样调用缓存对象，但我不能，可能是因为它是处理程序而不是网页。所以，

```
Cache.Insert("Id", 123); 
```

在处理程序中不起作用。于是我尝试了 HTTPRuntime.cache。但在做了一些研究后，我发现 HTTPRuntime.cache 对整个应用程序是通用的。我不完全理解“整个应用程序”。这是否意味着它由访问我们应用程序的不同计算机上的所有用户共享？或者这是否意味着它由**一台计算机上**访问我们应用程序的所有用户共享。因为如果是后者，我可以接受。那么 HTTPRuntime.cache 是一种为一个浏览器（或一台计算机）缓存数据的好方法，还是有一种不同的更好的方法来实现浏览器缓存来存储数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T05:57:09.697

缓存存储在 Web 服务器内存中。

你应该了解[Viewstate、Cache 和 Session 之间的区别](http://www.codeproject.com/KB/aspnet/PTCacheSessionViewState.aspx)

# c# - 实体框架：访问关联

> ID：10876770
> 
> 赞同：0
> 
> 时间：2012-06-04T05:45:00.857
> 
> 标签：c#, entity-framework

我的具有关联的域模型如下：

*   `Project`有很多`Task`s
*   `Task`有很多`User`s

根据 a 的状态`User`，我需要更新项目中的一个字段。我的查询如下：

```
var projects = from project in _data.projects
               join task in _data.tasks on project.ProjectID equals task.ProjectID
               join user in _data.usersactive on task.TaskID equals user.TaskID
               where user.Active == false
               select project; 
```

这使我可以获取具有非活动用户的项目。

```
foreach (Project project in projects)
{
    bool needUpdate = false;

    foreach (Task task in project.tasks)
    {
        foreach (User user in task.users)
        {
            // Depending on state of user
            // needUpdate = true;
        }
    }

    // If needUpdate = true
    // Do something
} 
```

显然，这段代码会让我：

`There is already an open DataReader associated with this Connection which must be closed first.`

但是，我在 MySQL 上，因此无法简单地利用`MultipleActiveResultSets=True`.

我如何能够急切地加载这些关联并让它们在`foreach`循环中访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T05:50:31.830

急切地加载一个 linq 集：

```
var projects = (from project in _data.projects
               join task in 
                       _data.tasks on project.ProjectID equals task.ProjectID
               join user in 
                       _data.usersactive on task.TaskID equals user.TaskID
               where user.Active == false
               select project).ToList(); 
```

# html - css div 对齐，top:50% 不起作用

> ID：10876771
> 
> 赞同：5
> 
> 时间：2012-06-04T05:45:08.300
> 
> 标签：html, css

太棒了，我似乎无法让一些 div 对齐工作。基本上，我有一个容器 div，我想要 div 内的左列和右列，基本上右列总是垂直大于左列。所以我希望左列在右列旁边垂直居中。这是我的CSS：

```
.recipe_container{
    float:center;
    width:800px;
    position:relative;
    padding:0px;
    border:5px solid #B22222;
    margin:0px auto;
}
.recipe_container_left{
    float:left;
    width:390px;
    position:relative;
    top:50%;
    padding:4px;
    border-right:1px solid;
    margin:0px auto;
}
.recipe_container_right{
    float:right;
    width:390px;
    position:relative;
    padding:4px;
    border-right:1px solid;
    margin:0px auto;
 } 
```

并且 html 像这样依偎

```
<div class="recipe_container">
    <div class="recipe_container_left">
         recipe title and ingredients
    </div>
    <div class="recipe_container_right">
         recipe cooking instructions
    </div>
 </div> 
```

但左侧“recipe_container_left”div 不在父“recipe_container”div 内垂直居中。我已经在谷歌上搜索了一段时间，似乎无法得到任何工作。我知道，新手问题。有什么帮助吗？

就像这就是我想要的结果（动态缩放到浏览器窗口）：

```
------------------------------------------------------------
recipe_container             ============================
                             |                          |
                             |  recipe_container_right  |
 =========================== |  recipe cooking-         | 
 | recipe_container_left   | |  -instructions           |                   
 | recipe title+ingredients| |                          |
 |                         | |                          |
 =========================== |                          |
                             |                          |
                             |                          | 
                             ============================
------------------------------------------------------------
(repeat) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T07:11:00.443

`top`语句仅适用于绝对、固定或相对定位的元素。哦，没有浮动：中心

CSS 中的垂直对齐可能有点混乱，您应该阅读： [Vertically centering a div inside another div](https://stackoverflow.com/questions/6490252/vertically-centering-a-div-inside-another-div/6490283#6490283)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T07:08:50.217

最好的方法是使用 javascript 对齐左侧 div，或者如果你真的想使用 css，你可以尝试

```
<div class="recipe_container_left">
   <div class="left_inner"></div>
</div>

.recipe_container_left{
   position:relative;
   top: 50%;
}
.left_inner{
   position:relative;
   top: -50%;
} 
```

编辑：这种方法需要设置一个高度才能使顶部位置起作用。试试这个表格方法，在不设置任何固定高度的情况下效果更好。

```
<div class="recipe_container">
    <div class="recipe_container_left">
        recipe title and ingredients
     </div>

    <div class="recipe_container_right">
       recipe cooking instructions
       recipe cooking instructions
       recipe cooking instructions
       recipe cooking instructions
       recipe cooking instructions
       recipe cooking instructions
       recipe cooking instructions
       recipe cooking instructions
       recipe cooking instructions
       recipe cooking instructions
       recipe cooking instructions
   </div>
</div> 
```

​​​​​​​​​​​​​​​​​​​​​​​​</p>

```
.recipe_container{
display: table;
}
.recipe_container_left{
display: table-cell;
vertical-align: middle;
width: 300px;
}
.recipe_container_right{
width: 400px;
} 
```

jsfiddle 来看看它的[实际](http://jsfiddle.net/killerbytes/6WPnf/)效果​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T06:26:37.953

尝试简单地将 height 属性添加到`recipe_container`.

# c - 为什么你可以在 C 中使用多个分号？

> ID：10876776
> 
> 赞同：11
> 
> 时间：2012-06-04T05:45:35.310
> 
> 标签：c

在 CI 中可以做到以下几点：

```
int main()
{
 printf("HELLO WORLD");;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
} 
```

它有效！这是为什么？

我个人的想法：分号是一个 NO OPERATION（来自维基百科）指示符，拥有一个巨大的字符串与拥有一个并告诉 C 语句已经结束的想法相同。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-04T05:52:13.570

分号终止语句......连续的分号表示无操作语句（如您所说）。考虑：

```
while (x[i++] = y[j++])
    ; 
```

在这里，所有的工作都是在循环测试条件下完成的，所以需要一个空语句。但是，即使没有控制循环，也允许空语句。

## 为什么？

好吧，预处理器的许多用途可能会扩展到一些实际的 C 代码，或者根据一些早期的定义被删除，但是给定......

```
 MY_MACRO1();
 MY_MACRO2(); 
```

...预处理器只能替换`MY_MACROX()`文本，将尾随分号留在那里，可能在空语句之后。如果编译器拒绝了这个，那么使用预处理器会更加困难，或者预处理器调用不像非预处理器函数调用（它们必须在替换中输出分号，并且调用者必须避免尾随分号使用它们时）——这将使实现更难无缝地用聪明的宏代替函数来实现性能、调试和定制目的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-04T05:49:20.373

C 允许空语句。它们对于空循环之类的东西很有用：

```
while (*d++ = *s++)
   ; // null statement. 
```

您刚刚创建了一系列。

它还允许非完全空语句，例如：

```
0;
1+1; 
```

这两个都包含表达式，但没有副作用，因此它们实际上并没有做任何事情。它们是允许的，尽管编译器可能会警告它们。

一个体面的编译器通常不会为上述任何内容生成任何代码（大多数即使关闭优化也不会生成，我无法想象打开优化的编译器会这样）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-04T05:47:30.257

两个分号一起构成一个空语句。C 不介意有空语句——它们不生成任何代码。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-04T05:48:44.020

因为分号标识 C 中语句的结尾，而在您的情况下，更多分号标识更多空语句……没有错，它们只是空语句。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T05:55:47.023

分号是行终止符，意思是它们告诉代码已经到达行尾，然后，执行下一行代码。

一个证据是您可以在一行中编写代码，不包括指令。

```
main() { cout << "ENTER TWO NUMBERS"; cin >> a; cin >> b; cout << "The sum of two numbers are" << a+b; << return 0;} 
```

这可能意味着 main() { cout << "ENTER TWO NUMBERS"[THEN] cin >> a[THEN] cin >> b[THEN] cout << "The sum of two numbers are" << a+b[THEN ] << 返回 0[然后]}

所以如果你要放置多个分号，就像一个 THEN, THEN, THEN, THEN，你个人的想法确实是正确的。

# asp-classic - 如何使用vbscript对列的值求和

> ID：10876777
> 
> 赞同：0
> 
> 时间：2012-06-04T05:45:36.170
> 
> 标签：asp-classic, vbscript, ado

我正在尝试获取一列的值的总和，因为我在我的选择语句中使用了 SUM() 。

```
<%
            sql = "select SUM(OpcCalEstQuantity) as qt_total from [Sheet1$] where cInt(JobEstimateNumber) = '"&cint(request.QueryString("no"))&"' and MccDescription = 'CTP Plate Making & Plates' and MaoOperationDescription = 'Plate Making'"
            rs1.open sql, con, 1, 2
            do while not rs1.eof
            %>
            <td style="padding:3px; text-align:right;"><%=rs1("qt_total")%></td>
            <%
                rs1.movenext
                loop
                rs1.close
            %> 
```

但是在浏览器上显示它时出现此错误。

```
Microsoft JET Database Engine error '80040e14'

Invalid use of Null 
```

所以我认为解决方法是使用 vbscript 来计算值。但是没有这样的函数来计算列中的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:29:48.753

如果您想在 SQL 中解决这个问题，coalesce 是一个很好的建议。
如果你想纯粹在 vbscript/asp 中解决它，你将不得不自己循环并计算总数，试试这个：

```
<%
    sql = "select OpcCalEstQuantity from [Sheet1$] where cInt(JobEstimateNumber) = '"&cint(request.QueryString("no"))&"' and MccDescription = 'CTP Plate Making & Plates' and MaoOperationDescription = 'Plate Making'"
    rs1.open sql, con, 1, 2
%>

<%  dim total : total = 0
    do while not rs1.eof 
        if NOT(isNull(rs1("OpcCalEstQuantity")) OR rs1("OpcCalEstQuantity")="") then total = total + cDbl(rs1("OpcCalEstQuantity"))
        rs1.movenext
    loop
    rs1.close
%>
<td style="padding:3px; text-align:right;"><%=total%></td> 
```

希望这会有所帮助，
埃里克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T08:34:13.863

我不是很喜欢 SQL 和 MS Jet 引擎，但我认为你想要求和的列包含一些 NULL 值。要摆脱它们并且如果您的数据库支持它，您可以使用以下[`coalesce`](http://msdn.microsoft.com/en-us/library/aa258244.aspx)功能：

```
sql = "select SUM(COALESCE(OpcCalEstQuantity, 0)) as qt_total from ......" 
```

# ado.net - 下面这行代码是什么意思？

> ID：10876779
> 
> 赞同：0
> 
> 时间：2012-06-04T05:45:39.470
> 
> 标签：ado.net, sqldatareader

我正在学习 ADO.NET，现在我正在尝试了解 SqlDataReader。我正在尝试通过使用[本教程](http://www.csharp-station.com/Tutorial/AdoDotNet)进行学习，现在在理解[此处](http://www.csharp-station.com/Tutorial/AdoDotNet/Lesson04)提到的以下代码部分时遇到了一些困难：

```
while (rdr.Read())
    {
        // get the results of each column
        string contact = (string)rdr["ContactName"];
        string company = (string)rdr["CompanyName"];
        string city    = (string)rdr["City"];

        // print out the results
        Console.Write("{0,-25}", contact);
        Console.Write("{0,-20}", city);
        Console.Write("{0,-25}", company);
        Console.WriteLine();
    } 
```

我想了解“{0, -25}”的含义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T05:49:38.883

这是 .NET Console.Write() 的格式说明符。请参阅此处解释的文档：http: [//msdn.microsoft.com/en-us/library/9xdyw6yk.aspx](http://msdn.microsoft.com/en-us/library/9xdyw6yk.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T05:51:02.563

这意味着该`WriteLine`方法应该将第一个参数的值（在您的情况下为联系人）打印到 25 个字符的宽度。25 前面的减号表示左对齐输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T05:49:46.193

在 SqlDataReader 中，它根据查询从数据库中读取记录。sqlDataReader 一次读取记录单行。这意味着 rdr["ContactName"] 是一个值，它读取并移动到字符串联系人等每个字段。它在while循环中获取所有记录。Console.Write("{0,-25}", contact) 用于格式化输出。

# c# - 从子构造函数调用基构造函数

> ID：10876782
> 
> 赞同：-3
> 
> 时间：2012-06-04T05:46:22.310
> 
> 标签：c#, inheritance, abstract-class

从子构造函数调用基本构造函数是最佳实践吗？这里的基地是一个`abstract class`。

这是示例代码

```
abstract class MyBase
{
    String l_strChildName;
    public MyBase(String Name)
    {
        l_strChildName = Name;
    }

    public abstract void func();
}

class MyChild_One : MyBase
{
    public MyChild_One() : base("MyChild One") { }

    public override void func()
    {

    }
}

class MyChild_Two : MyBase
{
    public MyChild_Two() : base("MyChild Two") { }

    public override void func()
    {

    }
} 
```

这种调用机制是最佳实践吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T05:51:23.197

根据设计，基类应该封装所有派生类共有的功能（因为它会被它们继承）。如果您通过基类构造函数初始化的字段/属性与所有派生类的初始化相关，那么是的，通过`base`关键字将其传递给基类构造函数是正确的方法。

在您的情况下，由于基类是抽象的，并且它的唯一构造函数需要一个参数，因此使用`base`关键字实际上是强制性的；没有其他方法可以从类层次结构中初始化实例。

我假设您提供的示例是为了这个问题而设计的。你不应该*硬*编码一个类名；您可以使用`GetType`方法（或`is`关键字）在运行时识别实例的实际类型：

```
MyBase x = new MyChild_One();
Console.WriteLine(x.GetType().Name);   // Outputs "MyChild_One" 
```

对于值永远不会改变的字段/属性，您还可以使用被所有派生类覆盖的抽象只读属性：

```
abstract class MyBase
{
    public abstract String l_strChildName { get; }
}

class MyChild_One : MyBase
{
    public override String l_strChildName 
    { 
        get { return "MyChild One"; }
    }
}

class MyChild_Two : MyBase
{
    public override String l_strChildName 
    { 
        get { return "MyChild Two"; }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T05:53:41.030

您的基类构造函数需要一个参数，而子类不需要，所以我看不出在这种情况下如何避免调用基类构造函数 - 这是必需的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T05:57:13.480

类的基构造函数总是在类自己的构造函数执行之前被调用。":base( *value* )" 语法只是向它传递参数的一种方式，如果你想调用默认构造函数，你不必编写 ":base()" 它无论如何都会被调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T06:01:03.017

是的，它很好，如果派生类需要相同的基类构造函数。最好使用**base**
关键字来调用基类构造函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T05:57:12.670

因为只有一个构造函数为基类定义，所以**必须**调用它。

如果有多个定义，您可以选择调用哪一个。

如果基类有一个默认构造函数，你可以省略显式调用它。例如。

```
: base() 
```

不需要。然而，这并不意味着它不仅被调用，编译器发出调用，而您不必显式声明它

# post - 请问为什么“POST”方法没有传递“type=file”变量？

> ID：10876803
> 
> 赞同：0
> 
> 时间：2012-06-04T05:48:40.497
> 
> 标签：post, file-upload, html5-video

我的代码正在上传视频文件，但在我扩展表单后它停止上传。所有其他变量都通过了 OK，但文件变量不是空白的。

我尝试将上传逻辑与网络上的类似示例进行比较，但看不到我所做的更改导致它失败。在下面的清单中，我删除了所有不相关的代码。当此代码运行时，它返回“错误”。

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', '1');
if (isset($_FILES['urlvideo'])) {
  move_uploaded_file($_FILES['urlvideo']['tmp_name'], "{$_FILES['urlvideo']['name']}");
} else {
  echo('Error');
  exit();
}
?>  
<!DOCTYPE HTML>
<html>
  <body>
    <form action="videotest.php"
          method="post"
         enctype="multipart/form-data">   
      Upload video:
      <input type="file" name="urlvideo" /><br>
      <input type="submit"
            value="Submit"/>
    </form>
  </body>
</html>
<?php ob_end_flush(); ?> 
```

感谢您抽出时间来阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T05:58:22.343

使用此代码。

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', '1');
if ( $_POST ) {
    if (isset($_FILES['urlvideo'])) {
      move_uploaded_file($_FILES['urlvideo']['tmp_name'], "{$_FILES['urlvideo']['name']}");
    } else {
      echo('Error');
      exit();
    }
}
?>  
<!DOCTYPE HTML>
<html>
  <body>
    <form action="testup.php"
          method="post"
         enctype="multipart/form-data">   
        <input type="hidden" name="method" value="post" /><!-- for check $_POST before if isset $_FILES-->
      Upload video:
      <input type="file" name="urlvideo" /><br>
      <input type="submit"
            value="Submit"/>
    </form>
  </body>
</html> 
```

这是因为您在显示表单之前放置​​了**if ( isset( $_FILES 。**

# windows - 当用户登录 Windows 时，我需要运行我的 exe，请告诉我执行此操作的步骤

> ID：10876805
> 
> 赞同：0
> 
> 时间：2012-06-04T05:48:55.177
> 
> 标签：windows, vb.net, exe, startup-folder

我已将我的 exe 复制到启动文件夹，它在 Windows 重新启动时工作正常，但是当计算机从休眠或睡眠模式恢复时我也需要运行 exe。请帮助我！

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T06:01:18.063

如果您找不到更简单的方法，您的事件日志将为您提供有关休眠和睡眠模式的提示。您可以创建一个小应用程序并在这些事件到达时运行您的 exe。 [https://superuser.com/questions/28567/at-what-time-did-my-windows-xp-machine-come-out-of-hibernation](https://superuser.com/questions/28567/at-what-time-did-my-windows-xp-machine-come-out-of-) _

# asp.net - 其他控件的必需字段验证器触发

> ID：10876823
> 
> 赞同：0
> 
> 时间：2012-06-04T05:50:22.733
> 
> 标签：asp.net, requiredfieldvalidator

我有一个用于修改客户信息的页面，我允许在页面上为每条客户信息设置两个文本框，所以如果客户有 5 条信息，那么我的页面将有 10 个文本框，一个用于显示旧值，一个用于输入新值。所有具有原始信息的文本框都是可见的，然后基于用户选择修改该列的列文本框可见。

所有文本框都有必填字段验证器，用于输入新值。我们允许单个字段修改。我面临的问题是，假设用户选择修改用户的指定字段并且指定字段没有任何值，然后其他一些字段假设组织名称没有值，只有选定的字段相应的文本框将可见，当我尝试提交信息时，它给了我需要组织名称的错误，即使组织名称的新文本框不可见，关于为什么会发生这种情况的任何想法？

**编辑：**

```
<td align="right"><span>Designation:</span></td>
<td>
    <asp:TextBox runat="server" ID="ModifyCustomerByCategorytxtDesignation"
        class="ModifyCustomerByCategoryTextbox"></asp:TextBox>
</td>
<td>
    <asp:TextBox runat="server" ID="ModifyCustomerByCategorytxtNewDesignation"
        class="ModifyCustomerByCategoryTextbox"></asp:TextBox>
    <asp:RequiredFieldValidator ValidationGroup="Group6"
        ControlToValidate="ModifyCustomerByCategorytxtNewDesignation" runat="server"
        EnableClientScript="true" Display="Dynamic" 
        ErrorMessage="The Designation field is required." Text="*">
    </asp:RequiredFieldValidator>
</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:06:02.380

如果您只允许修改单个字段，则为每个字段添加一个单独的按钮，并使其`ValidatinGroup`与该字段验证器共享一个唯一的（您的问题是因为它们都共享一个`ValidatinGroup`，所以它们都得到验证，可见与否）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T09:08:47.903

```
 <asp:TextBox runat="server" ID="ModifyCustomerByCategorytxtDesignation"
    class="ModifyCustomerByCategoryTextbox"></asp:TextBox>
 <asp:CustomValidator ID="cvmodify" runat="server" 
    ClientValidationFunction="modify" CssClass="validators" ErrorMessage="*" 
        Display="Dynamic" SetFocusOnError="True" ></asp:CustomValidator>
 <td>
 <asp:TextBox runat="server" ID="ModifyCustomerByCategorytxtNewDesignation"
    class="ModifyCustomerByCategoryTextbox"></asp:TextBox>
 <asp:CustomValidator ID="cvModify" runat="server" 
    ClientValidationFunction="modify" CssClass="validators" ErrorMessage="*" 
        Display="Dynamic" SetFocusOnError="True" ></asp:CustomValidator>

 <script language="javascript" type="text/javascript">
   function modify(oSrouce, args) {
     var myTextBox = document.getElementById('<%= ModifyCustomerByCategorytxtDesignation.ClientID %>');
     var myTextBox = document.getElementById('<%= ModifyCustomerByCategorytxtDesignation.ClientID %>');

                if (myTextBox.value) {
                    if (myTextBox.value == "")
                        args.IsValid = false;
                    else
                        args.IsValid = true;
                }
            }
 </script> 
```

# c++ - 此代码中的分段错误在哪里？

> ID：10876831
> 
> 赞同：1
> 
> 时间：2012-06-04T05:51:17.790
> 
> 标签：c++, segmentation-fault

你好，我是一名业余程序员，更糟糕的是，我已经有一段时间没有进行任何编程了，所以我决定用一些简单的 Topcoder 问题来刷新我的记忆。我做的第一个最终是段错误，现在这超出了我自己的能力范围，谁能帮助我了解段错误的来源。这是代码。

```
vector<int> Bonuses (vector<int> points)
{
    int totalPoints = 0;
    for (int i = 0; i != points.size(); ++i)
    {
        totalPoints += points[i];
    }

    vector<int> percentage;
    int percentageLeft = 100;
    int truncatedPercentage;

    for (int i = 0; i != points.size(); ++i)
    {
        truncatedPercentage = points[i]/totalPoints;
        percentage.push_back(truncatedPercentage);
        percentageLeft -= truncatedPercentage;
    }
    for (int i = 1;i <= percentageLeft; ++i)
    {
        percentage[percentage.size() - i] += 1;
    }
    return percentage;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T06:51:41.987

您的程序中有逻辑错误。改变这个：

```
truncatedPercentage = points[i]/totalPoints; 
```

对此：

```
truncatedPercentage = points[i] * 100 / totalPoints; 
```

否则，百分比几乎总是 0，而`percentageLeft`100。这就是为什么`percentage[percentage.size() - i] += 1`AndersK 在我之前已经发现了段错误。该指数通常为负数。

也就是说，我不确定混合推回和直接分配是否会给你在这里可以拥有的最易读的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T05:55:17.107

大概在这里

```
for (int i = 1;i <= percentageLeft; ++i)
{
    percentage[percentage.size() - i] += 1;
} 
```

如果`percentageLeft`大于向量的大小。如果`i`超过向量的大小，则您在其内存位置之前读取会导致访问冲突（段错误）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T06:08:37.377

```
percentage[percentage.size() - i] += 1; 
```

`std::map`会比`std::vector`“百分比”更好地满足您的目的。

# php - IE上的codeIgniter Facebook登录错误

> ID：10876834
> 
> 赞同：0
> 
> 时间：2012-06-04T05:51:28.153
> 
> 标签：php, facebook

我正在开发一个具有 facebook 身份验证 3.1 的网站。在所有其他浏览器中登录成功，但在 IE 上它返回 0。

网址是： http: [//gou_c.mymoje.com/](http://gou_c.mymoje.com/)

实际上 facebook->getuser() 返回 0，我试过但没有结果。

有谁知道那有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T07:26:45.387

这可能又是旧的第三方 cookie 问题。搜索那个或类似的词；通常发送 P3P 标头会有所帮助。

# ruby - Bundler 安装 gem 不在来自 github 的存储库的根目录中

> ID：10876837
> 
> 赞同：1
> 
> 时间：2012-06-04T05:51:53.610
> 
> 标签：ruby, github, bundler

我想安装这个 gem [https://github.com/datamapper/do/tree/master/do_oracle](https://github.com/datamapper/do/tree/master/do_oracle)问题是你可以看到它不在存储库的根目录中，所以使用带有 git 选项的捆绑器不起作用，是还有另一种安装这个gem的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T06:05:01.580

如果您只想安装此 gem，请将以下行添加到`Gemfile`：

```
gem "do_oracle", "~> 0.10.8" 
```

但是，如果您想从 git repo 安装它，那么您就没有运气了 - 目前 bundler 不支持为 git repos 指定路径（此功能仍然是一个悬而未决的问题。有关更多信息，请参阅 Github 上的[#396 ）。](https://github.com/carlhuda/bundler/issues/396)

一种可能的解决方法是将它分叉并将 gem 移动到根目录。

# android - Android自定义设备摄像头权限

> ID：10876839
> 
> 赞同：1
> 
> 时间：2012-06-04T05:52:27.700
> 
> 标签：android, permissions, camera, external

我正在尝试解决一个问题，其中自定义 Android 设备（PDA 的种类）连接了外部摄像头。当我打开“相机”应用程序时，相机工作正常，但 Skype 等其他应用程序无法访问该相机。

因此，作为 Android 内核/硬件方面的新手，我是否必须更改一些权限并重新编译操作系统，或者是否可以通过其他方式对其进行修复。

任何帮助深表感谢，

干杯，基思

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T06:08:25.963

您必须为需要访问相机但无法访问的应用添加相机权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T06:03:39.227

> 相机是设备上的应用程序共享的资源。您的应用程序可以在获取 Camera 实例后使用相机，并且您必须特别小心在应用程序停止使用相机对象时以及在您的应用程序暂停时立即释放相机对象（Activity.onPause()）。如果您的应用程序没有正确释放相机，所有后续访问相机的尝试，包括您自己的应用程序的尝试，都将失败，并可能导致您或其他应用程序关闭。

请阅读[http://developer.android.com/guide/topics/media/camera.html](http://developer.android.com/guide/topics/media/camera.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T05:56:53.730

您是否在清单文件中添加了这些权限？

```
 <uses-permission android:name="android.permission.CAMERA" />
  <uses-feature android:name="android.hardware.camera" /> 
```

# ios5 - 如何使用 JSON 序列化 NSDictionary 中的自定义对象？

> ID：10876844
> 
> 赞同：2
> 
> 时间：2012-06-04T05:53:16.297
> 
> 标签：ios5, nsdictionary, nsjsonserialization, custom-object

我有以下代码：

```
NSDictionary *dict = [[NSDictionary alloc] initWithObjectsAndKeys:@"one", @"oneKey", 
@"two", @"twoKey", customObject, @"customObjectKey", nil];
if([NSJSONSerialization isValidJSONObject:dict])
{
    NSLog(@"Went through.");
} 
```

如果对象是`NSString`'s，它将通过，但是一旦我将 customObject 添加到字典中，它就不再有效。我该如何解决？任何帮助深表感谢。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T19:29:22.040

简单的事实是：你不能。阅读 NSJSONSerialization 的文档，其中没有列出 NSCoding。:(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T06:20:26.967

您不能将自定义对象设置为 Dictionary 的键。确定，你的键是什么 NSStrings

来自 func +(BOOL) isValidJSONObject:(id)obj 的 Foundatoin.framework 的文本；

```
- All dictionary keys are NSStrings 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-08T09:26:10.793

原因：这是因为“customObject”不是：NSArray、NSDictionary 或 NSString。很可能是用户定义的类，这是 isValidJSONOperation 的约定：

```
/* 如果给定对象可以转换为 JSON 数据，则返回 YES，否则返回 NO。该对象必须具有以下属性：
    - 顶级对象是 NSArray 或 NSDictionary
    - 所有对象都是 NSString、NSNumber、NSArray、NSDictionary 或 NSNull
    - 所有字典键都是 NSStrings
    - NSNumbers 不是 NaN 或无穷大
 其他规则可能适用。调用此方法或尝试转换是判断给定对象是否可以转换为 JSON 数据的确定方法。
 */
+ (BOOL)isValidJSONObject:(id)obj;
```

可能的解决方案 1：将另一个类型为 NSDictonary 的属性添加到您的 customObject 类中，该属性由示例字典调用，该字典包含要添加到 JSON 中的属性。

```
NSDictionary *dict = [[NSDictionary alloc] initWithObjectsAndKeys:@"one", @"oneKey",
@"two", @"twoKey", customObject.dictionary, @"customObjectKey", nil];
```

可能的解决方案 2：使用要从 customObject 的 JSON 添加的属性（和值）创建一个新字典。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T19:20:56.610

键是字符串，但值可以是任何对象，包括 NSNull。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-01-16T15:22:54.677

***“如何在 XCode 中使用 JSON 序列化 NSDictionary 中的自定义对象？”***

找出我讨厌 XCode 的另一个原因，并希望有人能把它从 1990 年代拖出来。

让我们通过一个示例来说明我们期望如何序列化自定义对象。

假设您有一个非常简单的 UserRecord 类，其 .h 文件如下所示：

```
@interface UserRecord : NSObject

@property(nonatomic) int UserID;
@property(nonatomic, strong) NSString* FirstName;
@property(nonatomic, strong) NSString* LastName;
@property(nonatomic) int Age;

@end 
```

像这样的 .m ：

```
@implementation UserRecord

@synthesize UserID;
@synthesize FirstName;
@synthesize LastName;
@synthesize Age;

@end 
```

如果您尝试创建一个 UserRecord 对象，并使用 NSJSONSerialization 类对其进行序列化..

```
UserRecord* sampleRecord = [[UserRecord alloc] init];
sampleRecord.UserID = 13;
sampleRecord.FirstName = @"Mike";
sampleRecord.LastName = @"Gledhill";
sampleRecord.Age = 82;

NSError* error = nil;
NSData* jsonData2 = [NSJSONSerialization dataWithJSONObject:sampleRecord options:NSJSONWritingPrettyPrinted error:&error]; 
```

..它会嘲笑你，抛出异常并使你的应用程序崩溃：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** +[NSJSONSerialization dataWithJSONObject:options:error:]: Invalid top-level type in JSON write' 
```

解决这个闹剧的一种方法是向您添加一个函数，`NSObject`将您的数据转换为`NSDictionary`.，然后将其序列*化*。

这是我班级的新 .m 文件：

```
@implementation UserRecord

@synthesize UserID;
@synthesize FirstName;
@synthesize LastName;
@synthesize Age;

-(NSDictionary*)fetchInDictionaryForm
{
    NSMutableDictionary* dict = [[NSMutableDictionary alloc] init];

    [dict setObject:[NSNumber numberWithInt:UserID] forKey:@"UserID"];
    [dict setObject:FirstName forKey:@"FirstName"];
    [dict setObject:LastName forKey:@"LastName"];
    [dict setObject:[NSNumber numberWithInt:Age] forKey:@"Age"];

    return dict;
}

@end 
```

实际上，`NSDictionary`如果您想：

```
-(NSDictionary*)fetchInDictionaryForm
{
    NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:
                         [NSNumber numberWithInt:UserID], @"UserID",
                         FirstName, @"FirstName",
                         LastName,@"LastName",
                         [NSNumber numberWithInt:Age], @"Age",
                         nil];
    return dict;
} 
```

完成此操作后，您*可以*`NSJSONSerialization`序列化`NSDictionary`对象的版本：

```
UserRecord* sampleRecord = [[UserRecord alloc] init];
sampleRecord.UserID = 13;
sampleRecord.FirstName = @"Mike";
sampleRecord.LastName = @"Gledhill";
sampleRecord.Age = 82;

NSDictionary* dictionary = [sampleRecord fetchInDictionaryForm];
if ([NSJSONSerialization isValidJSONObject:dictionary])
{
    NSError* error = nil;
    NSData* jsonData = [NSJSONSerialization dataWithJSONObject:dictionary options:NSJSONWritingPrettyPrinted error:&error];
    NSString* jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];

    NSLog(@"%@", jsonString);
} 
```

这将产生我们想要的 JSON 输出：

```
{
  "UserID" : 13,
  "FirstName" : "Mike",
  "LastName" : "Gledhill",
  "Age" : 82
} 
```

令人震惊。即使在 2015 年，Apple 的 SDK 也无法将一组简单的`int`s 和`NSString`s 序列化为 JSON。

希望这可以帮助其他 XCode 受害者。

* * *

## 回答 #6

> 赞同：-7
> 
> 时间：2012-06-04T06:19:04.890

您需要使用[NSCoding](https://developer.apple.com/library/ios/#documentation/cocoa/reference/foundation/Protocols/NSCoding_Protocol/Reference/Reference.html)协议来序列化自定义对象。

在 .h 文件中实现`NSCoding`协议，并在自定义类的 .m 文件中实现以下方法。

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
   if(self = [super init]) // this needs to be [super initWithCoder:aDecoder] if the superclass implements NSCoding
   {
      aString = [[aDecoder decodeObjectForKey:@"aStringkey"] retain];
      anotherString = [[aDecoder decodeObjectForKey:@"anotherStringkey"] retain];
   }
   return self;
} 
```

和

```
- (void)encodeWithCoder:(NSCoder *)encoder
{
   // add [super encodeWithCoder:encoder] if the superclass implements NSCoding
   [encoder encodeObject:aString forKey:@"aStringkey"];
   [encoder encodeObject:anotherString forKey:@"anotherStringkey"];
} 
```

# android - 在 Android 2.2 中设置按钮布局

> ID：10876851
> 
> 赞同：1
> 
> 时间：2012-06-04T05:53:46.197
> 
> 标签：android, layout, button, timer, position

我在这里有一个小问题：我想在我的计时器中制作一个按钮......但我想在我的视图中放置随机位置......注意：我在 Android 2.2 API 8 工作......谢谢大家！

这是我的代码：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final int i=1;
    Button a = (Button) findViewById(R.id.button1);
    a.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        new CountDownTimer(20000,1000) {

            @Override
            public void onTick(long millisUntilFinished) {
                // TODO Auto-generated method stub
                //how to create a button here!
                LinearLayout linearLayout = (LinearLayout) findViewById(R.id.mainan);
                Button btn = new Button(NyaActivity.this);
                btn.setId(i+1);                    
                btn.setText("Button"+(i+1));    
                // i want to set position of button randomly ..                
                linearLayout.addView(btn);                                  
            }

            @Override
            public void onFinish() {
                // TODO Auto-generated method stub

            }
        }.start();
    }
});
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T06:07:15.770

```
Math.random()*width 
```

范围的maxValue在哪里`width`会给你一个随机的x位置，当然你可以对高度做同样的事情

然后你设置你的 LinearLayout.LayoutParams

```
LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
params.setMargins(marginLeft, marginTop, 0, 0);
btn.setLayoutParams(params); 
```

瞧，布局内的随机位置

# javascript - 如何使用 javascript 并根据提供的输入获取 JSON 数据？

> ID：10876854
> 
> 赞同：0
> 
> 时间：2012-06-04T05:54:10.370
> 
> 标签：javascript

如何使用 javascript 并根据提供的输入获取我的 JSON 数据？

我的 JSON 文件如下所示...

```
{
    "Name1": {
        "id": "32313",
        "latitude": "57.1",
        "longitude": "9.85",
        "timezone": "2",
        "city": "Aalborg",
        "country": "Denmark",
        "country_code": "DK"
    },
    "Name2": {
        "id": "32314",
        "latitude": "56.15",
        "longitude": "10.2167",
        "timezone": "2",
        "city": "Aarhus",
        "country": "Denmark",
        "country_code": "DK"
    },
    "Name3": {
        "id": "122109",
        "airport_name": "Aasiaat",
        "latitude": "68.7",
        "longitude": "-52.75",
        "timezone": "-3",
        "city": "Aasiaat",
        "country": "Greenland",
        "country_code": "GL"
    },
    "Name4": {
        "id": "116713",
        "latitude": "30.371111",
        "longitude": "48.228333",
        "timezone": "4",
        "city": "Abadan",
        "country": "Iran",
        "country_code": "IR"
    },
    "Name5": {
        "id": "116711",
        "latitude": "53.74",
        "longitude": "91.385",
        "timezone": "7",
        "city": "Abakan",
        "country": "Russia",
        "country_code": "RU"
    },
    "Name6": {
        "id": "120587",
        "latitude": "49.05",
        "longitude": "-122.2833",
        "timezone": "-7",
        "city": "Abbotsford",
        "country": "Canada",
        "country_code": "CA"
    },
    "Name7": {
        "id": "116759",
        "latitude": "13.847",
        "longitude": "20.844333",
        "timezone": "1",
        "city": "Abeche",
        "country": "Chad",
        "country_code": "TD"
    },
    "Name8": {
        "id": "32325",
        "latitude": "57.2",
        "longitude": "-2.2",
        "timezone": "1",
        "city": "Aberdeen",
        "country": "United Kingdom",
        "country_code": "GB"
    }
} 
```

从上面的 JSON 文件中......我需要得到以下内容：

1.  获取国家列表
2.  根据提供的国家名称获取城市名称。

请帮我解析上面的 JSON 文件....

谢谢， 尤甘达

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T06:11:31.243

```
var info = {
    "Name1": {
        "id": "32313",
        "latitude": "57.1",
        "longitude": "9.85",
        "timezone": "2",
        "city": "Aalborg",
        "country": "Denmark",
        "country_code": "DK"
    },
    ....
    "Name8": {
        "id": "32325",
        "latitude": "57.2",
        "longitude": "-2.2",
        "timezone": "1",
        "city": "Aberdeen",
        "country": "United Kingdom",
        "country_code": "GB"
    }
}

//stores countries in an array
var countries = [];
//stores cities in an object keyed on the contrycode
var cities = {};        
var keyNames = {};
for(var prop in ​info){
   var country = info[prop]["country"];
   var country_code = info[prop]["country_code"];
   var cityname = info[prop]["city"];

   countries.push(country);
   var city = cities[country_code];
   if(typeof city == "undefined"){
        cities[country_code] = [];         
   }

   var key = keyNames[country_code];
   if(typeof key == "undefined"){
        keyNames[country_code] = []; 
   }

   cities[country_code].push(cityname);
   keyNames[country_code].push(prop);
}

console.log(cities);
console.log(countries); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T06:17:16.383

```
var countries = [];
// Vanilla Javascript
// Get Array of countries
for( var name in json ){
  countries.push(json[name]["country"]);
}
// Get city name based on country name

var getCities =  function(country){
  var cities = [];
  for( var name in json ){
    if (country === json[name]["country"]){
      cities.push(name);
    }
  }
  return cities;
}

// Usage
var cities = getCities("Denmark"); // 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T15:41:37.097

Underscore.js ( [http://documentcloud.github.com/underscore/](http://documentcloud.github.com/underscore/) ) 是 javascript 库的瑞士军刀，在处理这种情况下的数据集时非常有用。

我创建了一个 jsfiddle 来解决你的两个用例[http://jsfiddle.net/4NJPc/](http://jsfiddle.net/4NJPc/)

以下是重要部分：

```
function getCityData(country) {
    return _(data)
        .filter(function(el) {
            return el.country === country;
        });           
}

function getCountries() {
    return _(data).chain().pluck("country").uniq().value();
} 
```

# javascript - 使用 Phonegap 显示 iOS 文档目录中可用的本地 pdf 文件

> ID：10876855
> 
> 赞同：0
> 
> 时间：2012-06-04T05:54:19.520
> 
> 标签：javascript, html, cordova, phonegap-plugins

我在使用 html 或 phonegap 或 javascript 显示 pdf 时遇到问题。它是我在 Sencha Touch 2 中开发的一个 Web 应用程序。我的确切要求如下：

*   我想在 Web 视图中使用 phonegap/html5/javascript（我提到的任何技术都可以）显示文档目录中存在的 pdf 文件。目前我正在使用 iframe 在桌面浏览器上显示它的工作正常，但是当我在 iPhone 上运行它时，它没有显示整个 pdf（滚动在 iPhone 上不起作用）。

*   如果有人能给我最好的解决方案，那将是 gr8。这很紧急...：）

提前致谢...：）

问候，沙希坎特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T02:55:14.173

我推荐使用iOS的[Child Browser Plugin](https://github.com/purplecabbage/phonegap-plugins/tree/master/iPhone/ChildBrowser)

```
window.plugins.childBrowser.showWebPage(pathToPdf); 
```

对于 Android，在外部 PDF 查看器中打开文件

```
navigator.app.loadUrl(pathToPdf); 
```

# c# - 如何让用户最大化我的窗口并保持窗口与他的比例？

> ID：10876856
> 
> 赞同：0
> 
> 时间：2012-06-04T05:54:43.497
> 
> 标签：c#, wpf

当用户按下全屏按钮时，所有项目都停留在左上角。我想防止这种情况并保持窗口原样全屏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T06:33:02.553

**全屏模式**

**C＃ ：**

```
WindowStyle = WindowStyle.None;
WindowState = WindowState.Maximized; 
```

**XAML：**

```
< Window ... WindowStyle="None" WindowState="Maximized" ... /> 
```

* * *

**保持 Windows 比例**

**XAML：**

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />         // Auto Rule
        <RowDefinition Height="*" />            // Star Rule
        <RowDefinition Height="100" />          // Fixed Rule
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />       // Auto Rule
        <ColumnDefinition Height="*" />         // Star Rule
        <ColumnDefinition Width="100" />        // Fixed Rule
    </Grid.ColumnDefinitions>
</Grid> 
```

**规则：**

*   固定的

    固定大小的逻辑单元（1/96 英寸）

*   汽车

    占用包含控件所需的尽可能多的空间

*   星星

    占用尽可能多的空间（在填充所有自动和固定大小的列之后）

网格让您享受两个世界 - 只要您将所有元素放入一个单元格中，您就可以同时获得：任意定位和自动调整大小。

请参阅本[教程](http://www.wpftutorial.net/gridlayout.html)，了解如何使用行和列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T06:04:36.497

您只需将所有项目都放在画布中，然后将其边缘放置在要放置的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T06:50:51.293

```
WindowStyle = WindowStyle.None; 
WindowState = WindowState.Maximized; 
```

使用控件的锚属性，以及与该控件关联的停靠属性

# delphi - VoIP、SIP、降噪、回声消除

> ID：10876857
> 
> 赞同：1
> 
> 时间：2012-06-04T05:54:47.110
> 
> 标签：delphi, sip, voip

我正在为星号 VoIP 调整现有的 SIP 解决方案。它正在工作，但它没有声音质量控制或没有过滤器来改善坏线路上的声音。我一遍又一遍地在google上搜索该领域现有的Delphi解决方案或一些算法，但似乎Delphi在这里很差。我知道那里有商业图书馆至少提供其中的一些。但我正在寻找免费的源代码，所以我可以使用它或自己实现它。

我已经实现了抖动信息和抖动缓冲区。我现在正在寻找的是：

1.  过滤器：降噪，回声消除...等
2.  当出现滞后并且通常线路质量很差时，任何其他改善声音的方法。

你们中有人知道从哪里得到这些吗？如果不出意外，您可以提供算法或其他语言代码。

附言

我提出的任何解决方案都将发布回社区。我将很快释放抖动缓冲区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:13:34.127

[SpanDSP](http://www.soft-switch.org/downloads/spandsp/snapshots/)有许多用于回声消除和自适应去抖动的算法

# android - 获取空指针异常

> ID：10876861
> 
> 赞同：0
> 
> 时间：2012-06-04T05:55:24.440
> 
> 标签：android

> **可能重复：**
> [单击按钮时引发空指针异常](https://stackoverflow.com/questions/11080994/nullpointer-exception-raises-when-i-click-on-the-button)

```
case R.id.Button01check:
            startActivity(new Intent (SaveData.this,CheckData.class));
            break; 
```

这是我的 CheckData.java

```
 public class CheckData extends ListActivity  {     
TextView selection;
DataManipulator dm;
private DataManipulator DataManipulator;

    protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.check);
    dm = new DataManipulator(this);

    LinearLayout layout = new LinearLayout(this);
    ImageView image = new ImageView(this);
    DataManipulator = new DataManipulator(this);

    Certificates testCertificates = new Certificates(BitmapFactory.decodeFile(Context.STORAGE_SERVICE));

    DataManipulator.open();
    DataManipulator.createCertificatesEntry( (Certificates) testCertificates);
    DataManipulator.close(); 

    testCertificates = null;

    DataManipulator.open();
    testCertificates = DataManipulator.getFirstCertificatesFromDB();
    DataManipulator.close();

    image.setImageBitmap(((Certificates) testCertificates).getBitmap());

    setContentView(layout);
} 
```

这是第 29 行**DataManipulator.createCertificatesEntry( (Certificates) testCertificates);**

这是我的 DataManipulator.java

```
 public class DataManipulator {
public static final String KEY_IMG = "image";

 private DatabaseHelper mDbHelper;
    private SQLiteDatabase mDb;

    private static final String DATABASE_NAME = "DBtest";
    private static final int DATABASE_VERSION = 1;

    private static final String CERTIFICATES_TABLE = "certificates";

    private static final String CREATE_CERTIFICATES_TABLE = "create table "+CERTIFICATES_TABLE+" (" +KEY_IMG+" blob not null) ";

    private final Context mCtx;
    private static class DatabaseHelper extends SQLiteOpenHelper {
        DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        public void onCreate(SQLiteDatabase db) {
            db.execSQL(CREATE_CERTIFICATES_TABLE);
        }

        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS "+CERTIFICATES_TABLE);
            onCreate(db);
        }
    }
    public void Reset() { mDbHelper.onUpgrade(this.mDb, 1, 1); }

    public DataManipulator(Context ctx) {
        mCtx = ctx;
        mDbHelper = new DatabaseHelper(mCtx);
    }

    public DataManipulator open() throws SQLException {
        mDb = mDbHelper.getWritableDatabase();
        return this;
    }

    public void close() { mDbHelper.close(); }

    public void createCertificatesEntry(Certificates certificates) {
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        certificates.getBitmap().compress(Bitmap.CompressFormat.PNG, 100, out);
        ContentValues cv = new ContentValues();
        cv.put(KEY_IMG, out.toByteArray());
        mDb.insert(CERTIFICATES_TABLE,  null, cv);
    }
    public Certificates getFirstCertificatesFromDB() throws SQLException {
        Cursor cur = mDb.query(true, CERTIFICATES_TABLE,  new String[] {KEY_IMG}, null, null, null, null, null, null);
        if(cur.moveToFirst()) {
            byte[] blob = cur.getBlob(cur.getColumnIndex(KEY_IMG));
            ByteArrayInputStream inputStream = new ByteArrayInputStream(blob);
            Bitmap bitmap = BitmapFactory.decodeStream(inputStream);
            cur.close();
            return new Certificates(bitmap);
        }
        cur.close();
        return null;
    }    
} 
```

这是第 60 行 **证书。getBitmap().compress(Bitmap.CompressFormat.PNG, 100, out);**

这是我的 logcat 输出

```
06-04 11:09:41.824: E/AndroidRuntime(693): FATAL EXCEPTION: main
06-04 11:09:41.824: E/AndroidRuntime(693): java.lang.RuntimeException: Unable to start activity ComponentInfo{list.certificates/list.certificates.CheckData}: java.lang.NullPointerException
06-04 11:09:41.824: E/AndroidRuntime(693):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
06-04 11:09:41.824: E/AndroidRuntime(693):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
06-04 11:09:41.824: E/AndroidRuntime(693):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
06-04 11:09:41.824: E/AndroidRuntime(693):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
06-04 11:09:41.824: E/AndroidRuntime(693):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-04 11:09:41.824: E/AndroidRuntime(693):  at android.os.Looper.loop(Looper.java:137)
06-04 11:09:41.824: E/AndroidRuntime(693):  at android.app.ActivityThread.main(ActivityThread.java:4340)
06-04 11:09:41.824: E/AndroidRuntime(693):  at java.lang.reflect.Method.invokeNative(Native Method)
06-04 11:09:41.824: E/AndroidRuntime(693):  at java.lang.reflect.Method.invoke(Method.java:511)
06-04 11:09:41.824: E/AndroidRuntime(693):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-04 11:09:41.824: E/AndroidRuntime(693):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-04 11:09:41.824: E/AndroidRuntime(693):  at dalvik.system.NativeStart.main(Native Method)
06-04 11:09:41.824: E/AndroidRuntime(693): Caused by: java.lang.NullPointerException
06-04 11:09:41.824: E/AndroidRuntime(693):  at list.certificates.DataManipulator.createCertificatesEntry(DataManipulator.java:60)
06-04 11:09:41.824: E/AndroidRuntime(693):  at list.certificates.CheckData.onCreate(CheckData.java:29)
06-04 11:09:41.824: E/AndroidRuntime(693):  at android.app.Activity.performCreate(Activity.java:4465)
06-04 11:09:41.824: E/AndroidRuntime(693):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-04 11:09:41.824: E/AndroidRuntime(693):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
06-04 11:09:41.824: E/AndroidRuntime(693):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T06:07:09.553

在你的情况下......我只能说你的`certificates`变量或`certificates.getBitmap()`api返回null。

```
Certificates testCertificates = new Certificates(BitmapFactory.decodeFile(Context.STORAGE_SERVICE)); 
```

在上面的代码[`decodeFile`](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeFile%28java.lang.String%29)中需要图像的完整路径。您传递的不是文件的完整路径。所以从以上两种情况`certificates.getBitmap()`来看是最可能的异常原因。[Context.STORAGE_SERVICE](http://developer.android.com/reference/android/content/Context.html#STORAGE_SERVICE)不是图像的完整路径。

一旦你有了图像的 Uri。使用以下代码获取图像：

```
Bitmap bmp = MediaStore.Images.Media.getBitmap(getContentResolver(), uri);

Certificates testCertificates = new Certificates(bmp);

DataManipulator.open();
DataManipulator.createCertificatesEntry( (Certificates) testCertificates);
DataManipulator.close(); 
```

参考：

[图像媒体商店](http://developer.android.com/reference/android/provider/MediaStore.Images.Media.html#getBitmap%28android.content.ContentResolver,%20android.net.Uri%29)

# java - 我如何定义一个用于反序列化json的javabean使用Jackson？

> ID：10876866
> 
> 赞同：0
> 
> 时间：2012-06-04T05:55:54.370
> 
> 标签：java, json, serialization, jackson

JSON 看起来像这样：

```
{
  "favorited": false,
  "truncated": false,
  "annotations": [
      {
          "wpinfo": {
              "type": "place",
              "url": "http://m.weibo.cn/"
          }
      }
  ],
  "reposts_count": 0
}; 
```

我不知道我将使用属性“注释”声明哪种类型。我不会说太多英语，希望你能理解我。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T06:06:13.543

annotations 是一个对象数组（在您的情况下仅包含一个对象）。所以你可以这样声明：

```
MyObject[] annotation; 
```

其中 MyObject 是一个包含字段 wpinfo 的类。

注意：如果你的需求只是解析一些 JSon，你不需要创建类，Jackson 有一个[流式 API](http://wiki.fasterxml.com/JacksonStreamingApi)

# powershell - 计数包含所有匹配字符串的文件，即 AND 运算符？

> ID：10876867
> 
> 赞同：4
> 
> 时间：2012-06-04T05:56:00.440
> 
> 标签：powershell

我试图计算一个文件夹中的所有文本文件，该文件夹包含一组字符串中的所有字符串，即基本上是一个 AND 运算符。每个文件中字符串的顺序可能会，最好我正在寻找一个单行。

即我正在尝试完成类似的事情：

```
(Get-ChildItem -filter "file*" C:\temp |
Select-String -Pattern @(“str1", "str2")).Count 
```

但不同的是，上面的语句计算了所有包含“str1”或“str2”的文件，但我正在尝试执行 AND 操作而不是 OR，因此只计算同时包含“str1”和“str2”的文件.

问候， 奥拉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T08:03:34.280

这也许可以通过`-AND`操作员完成这项工作：

```
(Get-ChildItem . -include *.txt -recurse |
    % {(Select-String $_ -Pattern "str1") -AND (select-string $_ -pattern "str2")} |
        where {$_ -eq $true}).count 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T10:50:13.210

如果输入字符串的数量是固定的，那么利用管道可以非常巧妙地完成：

```
get-childitem c:\temp\file* |
    select-string -l str1   |
    get-childitem           |
    select-string -l str2   |
    measure-object 
```

如果您只想获取计数，而不是`Measure-Object`返回的统计信息，请添加`| select -exp Count`到管道的末尾。

我发现将以下内容添加到 my`$profile`以进一步减少此类事情很有用。

```
Set-Alias ss Select-String
${function:...} = { process { $_.($args[0]) } } 
```

然后，解决方案（假设默认别名）变为：

```
gci c:\temp\file* | ss -l str1 | gci | ss -l str2 | measure | ... Count 
```

参考资料：[Power 和 Pith - Windows PowerShell 博客](http://blogs.msdn.com/b/powershell/archive/2006/10/21/power-and-pith.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T06:16:14.053

据我所知，这不能很好地完成。所以也许是这样的（未经测试）：

```
@(Get-ChildItem |
    Where-Object {
      $failed = $false
      $file = Get-Content $_
      $strings | ForEach-Object {
        if (!($file -match $_)) { $failed = $true }
      }
      !$failed
    }).Count 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T08:51:17.493

```
@(Get-ChildItem C:\temp -Filter "file*" | 
  where { ($_ | Select-String str1 -Quiet) -and ($_ | Select-String str2 -Quiet)}
).Count 
```

# iphone - xtify 返回我的代码 3000

> ID：10876869
> 
> 赞同：0
> 
> 时间：2012-06-04T05:56:10.570
> 
> 标签：iphone, xtify

我正在尝试将 xtify 推送与生产证书和临时配置一起使用，但是当我在设置正确的证书并尝试安装应用程序后运行 xtify 示例时，它在控制台中显示代码 3000 错误，如下所示：-

```
2012-06-04 11:17:40.133 SampleRich[4945:707] Attempt to register for push notifications...
2012-06-04 11:17:40.147 SampleRich[4945:707] Device currentDevice.systemVersion=5.100000
2012-06-04 11:17:40.151 SampleRich[4945:707] __IPHONE_OS_VERSION_MAX_ALLOWED=50100
2012-06-04 11:17:40.413 SampleRich[4945:707] Application moved from inactive to Active state
2012-06-04 11:17:40.507 SampleRich[4945:707] Failed to register with error: Error Domain=NSCocoaErrorDomain Code=3000 "no valid 'aps-environment' entitlement string found for application" UserInfo=0x17cfe0 {NSLocalizedDescription=no valid 'aps-environment' entitlement string found for application}
2012-06-04 11:18:05.134 SampleRich[4945:707] *** ERROR *** App key not set yet 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T06:28:28.107

**“没有为应用程序找到有效的‘aps-environment’权利字符串”**

您尚未为应用程序启用推送，或者您尚未使用已启用推送的证书对应用程序进行签名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:54:08.383

我建议使用开发证书进行尝试，然后再转到生产证书。正如 WrightsCS 所说，您需要使用正确的启用推送证书对应用程序进行签名。该错误不是来自 Xtify，而是来自 Apple。

[这](http://developer.xtify.com/display/sdk/1.+Register+your+iOS+application+with+Apple)有帮助您使用推送证书的说明。如果您有更多问题，请告诉我。

# iphone - 如何在 IOS5 中跟踪崩溃？

> ID：10876874
> 
> 赞同：2
> 
> 时间：2012-06-04T05:56:58.653
> 
> 标签：iphone, ios, ipad, crash, crash-log

我是IOS开发的新手。我发生了崩溃，但它没有在我的程序中显示崩溃位置。有什么方法可以在 IOS 5.1 中显示崩溃位置。

谢谢你。

# google-maps - 来自 Web 应用程序 + 网站的 Google 地图定价混乱

> ID：10876878
> 
> 赞同：1
> 
> 时间：2012-06-04T05:57:27.653
> 
> 标签：google-maps

我们正在为一个客户端创建一个 Web 应用程序，该应用程序将用于使用谷歌地理编码和谷歌地图标记一些专有数据。它还有一个面向公众的页面，允许任何用户搜索这些数据并在地图上查看。并非所有信息都是可见的，但用户可以与客户端连接以请求完整信息。最终用户查看地图数据不收取任何费用

内部员工将使用相同的数据来生成报告和进行其他分析

它有资格获得免费的谷歌地图吗？

除了地图实现之外，该应用程序还有其他模块（没有地图），这些模块对公众不可见

我们仅通过 javascript v3 api 使用客户端脚本。没有对地图 api 的服务器端调用

# php - 隐藏网页上的特定文本

> ID：10876879
> 
> 赞同：-1
> 
> 时间：2012-06-04T05:57:39.883
> 
> 标签：php, javascript, html, cloaking

有什么方法可以让我的网页上的特定文本字符串“不可见”？

例如，

如果我要指定字符串“hxxp://nullrefer.com/?”，我将需要该文本自动在我的页面上所有提到它的地方显示为不可见。

因此，如果在我的页面上提及 url “hxxp://nullrefer.com/?hxxp://www.Amazon.com”，观众将只能看到“hxxp://www.Amazon.com”。 com”的一部分。几乎就像您要将文本的不透明度降低到仅针对该特定字符串的 0%，它会自动出现在页面上的任何位置。我需要它仍然在物理上，但尽可能不可见。

有这样的脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T07:53:01.210

这将用您指定的任何内容而不是 nullrefer 替换页面上的所有链接。此外，如果您只希望它影响某个 id/class，您可以使用

`a[i].parentNode.id == "someid"` `a[i].parentNode.className == "someid"`

非常基本和糟糕，但它会做你想要的。将其添加到页面底部。

```
<script type="text/javascript">

var a = document.getElementsByTagName('a');
for(i=0;i<a.length;i++)
{
    if(a[i].parentNode.id == "someid")
    a[i].href = "hxxp://www.nullrefer.com/?" + a[i].href;
}
</script> 
```

# ruby - 微云代工厂 - VCAP ROUTER: 404 - DESTINATION NOT FOUND？

> ID：10876881
> 
> 赞同：0
> 
> 时间：2012-06-04T05:58:05.247
> 
> 标签：ruby, linux, ssh, cloud-foundry, vmc

我让微云代工厂 vmware 在网桥模式下运行。安装了从微云代工厂网站生成的令牌。我已经部署了两个应用程序，一个来自 spring 套件，另一个使用 windows 的 vmc 命令行。这两个应用程序都可以通过外部的 url 获得。我已经从 STS 更改了内存限制并更新了应用程序，之后这两个应用程序在从浏览器访问时都显示 vcap 错误。

我发现有一个 network.rb 文件编辑来解决这个问题，但我不知道如何从微云代工控制台做到这一点？

找到上面提示的url是[http://support.cloudfoundry.com/entries/21042938-mcf-1-2-0-configuration-error-s](http://support.cloudfoundry.com/entries/21042938-mcf-1-2-0-configuration-error-s)

但是我的微云代工厂 url [http://api.demo22.cloudfoundry.me/](http://api.demo22.cloudfoundry.me/)仍然显示没有错误。

请帮助解决这个问题.. 提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:30:51.853

如果您仔细查看该论坛帖子，您将看到描述如何获取用于编辑 network.rb 文件的命令行的部分。试试这个链接：

[http://support.cloudfoundry.com/entries/21042938-mcf-1-2-0-configuration-error-s#post_21058483](http://support.cloudfoundry.com/entries/21042938-mcf-1-2-0-configuration-error-s#post_21058483)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T04:35:13.010

应用程序的内存选择问题。必须为每个应用程序提供 512MB（默认）。选择下面的内存会导致应用程序出错。我从 STS（spring 工具套件）中选择了 64MB 用于我推送到 mcf 的应用程序，但它无法启动应用程序。我删除了这些应用程序并使用默认的 512 MB 和它的工作重新部署它。

感谢所有的线索...

# c++ - GetAdaptersInfo 的缓冲区大小

> ID：10876882
> 
> 赞同：1
> 
> 时间：2012-06-04T05:58:07.903
> 
> 标签：c++, winapi

为了：

```
DWORD GetAdaptersInfo(
  __out    PIP_ADAPTER_INFO pAdapterInfo,
  __inout  PULONG pOutBufLen
); 
```

的描述`pOutBufLen`如下：

> pOutBufLen
> 
> [in, out] 指向由 pAdapterInfo 参数指示的缓冲区大小（以字节为单位）的指针。如果此大小不足以容纳适配器信息，则此函数将缓冲区填充为所需大小，并返回错误代码 ERROR_BUFFER_OVERFLOW。

现在我的问题是，我们如何知道缓冲区大小（即 pOutBufLen）应该是多少？如果我们有超过 16 个 NIC，那么正确的方法是什么？

来源[msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365917%28v=vs.85%29.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T06:14:25.977

通常的使用方式是这样的：

```
IP_ADAPTER_INFO *buffer= NULL;
ULONG length = 0;

// call with length of 0\. It'll fail, but tell us needed size.
GetAdaptersInfo(buffer, &length);

// allocate space needed.
buffer = malloc(length);

// Call again, with necessary size.
if (buffer != NULL)
    GetAdaptersInfo(bufer, &length); 
```

至少在理论上，您应该真正在一个`while`循环中执行此操作，或者按该顺序执行此操作——调用、分配、再次调用，然后继续重新分配和重新调用，直到它成功。

这将让它（最终）成功，即使用户碰巧在第一次和第二次调用之间插入了网络适配器*，*所以即使你分配了它认为需要的空间，在你进行第二次调用之前它变得不够用了称呼。

# http - 实现 HTTP 代理

> ID：10876883
> 
> 赞同：2
> 
> 时间：2012-06-04T05:58:08.913
> 
> 标签：http, protocols, rfc, http-proxy, http-protocols

我想实现 HTTP 代理服务器，以更深入地了解协议的一些细节，并在此过程中学习一些套接字编程，但我不想实现一个成熟的 HTTP 服务器。如果我只想实现代理，我应该关注哪些相关的 RFC 页面和这些页面中的部分？

该计划是从常规 HTTP 代理开始，然后可能将其扩展到 HTTPS 代理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T06:23:20.997

我会看看[HTTP 1.0 (RFC 1945)](http://www.w3.org/Protocols/rfc1945/rfc1945)和[HTTP 1.1 (RFC 2616)](http://www.w3.org/Protocols/rfc2616/rfc2616.html)。你也可以看看：

*   [RFC 822 - Internet 文本消息的结构，包括标头字段](http://www.cis.ohio-state.edu/htbin/rfc/rfc822.html)
*   [RFC 2396 - URL/URI 语法的定义（替换 RFC 1738 和 RFC 1808）](http://www.cis.ohio-state.edu/htbin/rfc/rfc2396.html)
*   [RFC 1521 - MIME 和 MIME 类型的定义](http://www.cis.ohio-state.edu/htbin/rfc/rfc1521.html)

您可以通过 Google 找到很多示例代码！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T03:55:02.297

我目前也在努力。基本实现很简单。侦听套接字端口，找到主机，连接到远程服务器，发送 http 头，从服务器接收，然后发送回客户端。困难的部分是一致的连接和流水线。

至于 HTTPs，它的 header 是这样的：

```
CONNECT addons.mozilla.org:443 HTTP/1.1
User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:18.0) Gecko/20100101 Firefox/18.0
Host: addons.mozilla.org 
```

代理应该连接到服务器，然后向客户端回复 200 消息，然后作为重定向器来回重定向。

检查这个：[https ://datatracker.ietf.org/doc/html/draft-luotonen-ssl-tunneling-03](https://datatracker.ietf.org/doc/html/draft-luotonen-ssl-tunneling-03)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T01:40:39.087

您可能还会发现 IETF 中 HTTPbis 小组的工作很有帮助；我们正在重新编写规范，以使它们更加清晰和易于实施。

有关详细信息，请参阅 [http://trac.tools.ietf.org/wg/httpbis/trac/wiki](http://trac.tools.ietf.org/wg/httpbis/trac/wiki) 。

# iphone - 如何使用iphone中的核心图在x轴上绘制一年中的月份

> ID：10876884
> 
> 赞同：-1
> 
> 时间：2012-06-04T05:58:10.583
> 
> 标签：iphone, graph, core-plot

如何使用核心图在 x 轴上绘制一年中的月份，在 y 轴上我需要 200 的倍数，而且这些数据是我以前从 Excel 表中获得的。任何人都可以帮助我解决这个问题。提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-30T20:08:38.927

Use CPTCalendarFormatter instead of CPTTimeFormatter as stated in the other answers. CPTTimeFormatter is good when you have to set time interval offset in seconds (ex. hour= 60*60, day=24*60*60), but months have a variable number of days/seconds (30*24*60*60 or 31*24*60*60, 28, leap years ecc.). CPTCalendarFormatter let you decide the calendar unit for date calculations on labels. In this way, fixed a reference date and a reference calendar unit, in the datasource method you will have to return the number of those units starting from the reference date.

Here's full code, enjoy.

In your viewDidLoad or elsewhere you initialize the graph:

```
[...]

// Graph host view
CPTGraphHostingView* hostView = [[CPTGraphHostingView alloc] initWithFrame:self.view.frame];
[self.view addSubview: hostView];

// Your graph
CPTGraph* graph = [[CPTXYGraph alloc] initWithFrame:hostView.bounds];
hostView.hostedGraph = graph;
CPTXYAxisSet *axisSet = (CPTXYAxisSet *)[graph axisSet];    

// xAxis configuration
CPTXYAxis *xAxis = [axisSet xAxis];
[xAxis setLabelingPolicy:CPTAxisLabelingPolicyFixedInterval];
// Prepare dateFormat for current Locale, we want "JAN 2014" "FEB 2014" and so on
NSString *dateComponents = @"MMMYY";
NSString *localDateFormat = [NSDateFormatter dateFormatFromTemplate:dateComponents options:0 locale:[NSLocale currentLocale]];
NSDateFormatter *labelDateFormatter=[[NSDateFormatter alloc] init];
labelDateFormatter.dateFormat=localDateFormat;    
// Set xAxis date Formatter
CPTCalendarFormatter *xDateYearFormatter = [[CPTCalendarFormatter alloc] initWithDateFormatter:labelDateFormatter];
//Keep in mind this reference date, it will be used to calculate NSNumber in dataSource method
xDateYearFormatter.referenceDate = [NSDate dateWithTimeIntervalSince1970:0];
xDateYearFormatter.referenceCalendarUnit=NSMonthCalendarUnit;    
[xAxis setLabelFormatter:xDateYearFormatter];

// yAxis configuration
CPTXYAxis *yAxis = [axisSet yAxis];
[yAxis setMajorIntervalLength:CPTDecimalFromFloat(_YOURYINTERVAL_)];
[yAxis setLabelingPolicy:CPTAxisLabelingPolicyFixedInterval];
[yAxis setLabelFormatter:_YOURYFORMATTER_];
[yAxis setAxisConstraints:[CPTConstraints constraintWithLowerOffset:0.0]]

// Get the (default) plotspace from the graph so we can set its x/y ranges
CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *) graph.defaultPlotSpace;
NSDate *startDate=_YOURSTARTINGDATE_
//Number of months since the reference date
NSInteger xStart=[[[NSCalendar currentCalendar] components: NSCalendarUnitMonth
                                 fromDate: xDateYearFormatter.referenceDate
                                   toDate: _YOURSTARTINGDATE_
                                  options: 0] month];    
[plotSpace setXRange: [CPTPlotRange plotRangeWithLocation:CPTDecimalFromInteger(xStart)     length:CPTDecimalFromInteger(_YOURDATESARRAY_.count-1)]];
[plotSpace setYRange: [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0.0) length:CPTDecimalFromFloat(_YOURMAXYVALUE_)]];

[...] 
```

Datasource method to return values on axis:

```
 -(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index
{
    switch (fieldEnum) {

        case CPTScatterPlotFieldX: {

            NSInteger monthsOffset=[[[NSCalendar currentCalendar] components: NSCalendarUnitMonth  fromDate: [NSDate dateWithTimeIntervalSince1970:0] toDate: [_YOURDATESARRAY_ objectAtIndex:index] options: 0] month];                
            NSNumber *val = [NSNumber numberWithInteger:monthsOffset];    
            return val;
            break;
        }
        case CPTScatterPlotFieldY: {
            NSNumber *val=_YOURVALUEFORYAXIS_;
            return val;
            break;
        }
        default:
            break;
    }

    return nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T07:04:35.373

我已经做了一些你想要的事情，比如这段代码。抱歉，我在这里没有明确代码，只是粘贴了我在这里使用的整个方法。

我希望这可以帮助你想要什么。在这里，我以新的方式实现了图形，您可以像 tableview 一样刷新它。只需更改数组的值，然后调用 [graph reloadData];

```
- (void)constructScatterPlotForFeedback
 {
// Create graph from theme
[graph release];

graph = [[CPXYGraph alloc] initWithFrame:CGRectZero];
graph.delegate = self;
CPTheme *theme = [CPTheme themeNamed:kCPPlainWhiteTheme];
[graph applyTheme:theme];
feedbackChart.hostedGraph = graph;
[feedbackChart setBackgroundColor:[UIColor clearColor]];

graph.paddingLeft = 0.0;
graph.paddingTop = 0.0;
graph.paddingRight = 0.0;
graph.paddingBottom = 0.0;

graph.plotAreaFrame.paddingLeft = 5.0;
graph.plotAreaFrame.paddingTop = 10.0;
graph.plotAreaFrame.paddingRight = 10.0;
graph.plotAreaFrame.paddingBottom = 10.0;

NSTimeInterval oneHour =  60 * 60;

// Setup plot space
CPXYPlotSpace *plotSpace = (CPXYPlotSpace *)graph.defaultPlotSpace;
plotSpace.allowsUserInteraction = YES;
plotSpace.delegate = self;

float xRange;
xRange = [chartData count] + 1.0;

if (xRange>5) {
    xRange = 5.0;
}
plotSpace.xRange = [CPPlotRange plotRangeWithLocation:CPDecimalFromFloat(0.0) length:CPDecimalFromFloat(fiveHour*3)];
plotSpace.yRange = [CPPlotRange plotRangeWithLocation:CPDecimalFromFloat(-20.0) length:CPDecimalFromFloat(40.0)];

CPLineStyle *gridline = [CPLineStyle lineStyle];
gridline.lineColor = [CPColor grayColor];
gridline.lineWidth = 1.0f;  

// Axes
CPXYAxisSet *axisSet = (CPXYAxisSet *)graph.axisSet;
    CPXYAxis *x = axisSet.xAxis;
   //   x.orthogonalCoordinateDecimal = CPDecimalFromString(@"0");
x.majorIntervalLength = CPDecimalFromFloat(fiveHour);
 //x.majorIntervalLength = CPDecimalFromFloat(10.0);
//x.majorIntervalLength = CPDecimalFromString(@"10");
x.minorTicksPerInterval = 0;
x.labelOffset=0;
   //   x.labelingPolicy = CPAxisLabelingPolicyNone;

 NSDate *refDate = [NSDate date];
 NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
  //    dateFormatter.dateStyle = kCFTimeZoneNameStyleShortGeneric;
 dateFormatter.dateFormat = @"HH:mm:ss";
  //    dateFormatter.dateStyle = kCFDateFormatterShortStyle;
CPTimeFormatter *timeFormatter = [[[CPTimeFormatter alloc] init   WithDateFormatter:dateFormatter] autorelease];
timeFormatter.referenceDate = refDate;
x.labelFormatter = timeFormatter;

//NSLog(@"refence date : %@", timeFormatter);
CPXYAxis *y = axisSet.yAxis;

y.minorTicksPerInterval = 0;
y.orthogonalCoordinateDecimal = CPDecimalFromString(@"0.0");
y.majorIntervalLength = CPDecimalFromString(@"5");
y.majorGridLineStyle = nil;
   //y.visibleRect 

 y.visibleRange = [CPPlotRange plotRangeWithLocation:CPDecimalFromFloat(-20.0f)   length:CPDecimalFromFloat(40.0f)];
CPConstraints yConstraints = {CPConstraintNone, CPConstraintFixed};
y.isFloatingAxis=YES;
y.constraints=yConstraints;

    // Create a green plot area
CPScatterPlot *dataSourceLinePlot = [[[CPScatterPlot alloc] init] autorelease];
   dataSourceLinePlot.identifier = @"FeedBack Plot";
dataSourceLinePlot.dataLineStyle.lineWidth = 3.f;
dataSourceLinePlot.dataLineStyle.lineColor = [CPColor blackColor];
dataSourceLinePlot.dataLineStyle.dashPattern = [NSArray arrayWithObjects:[NSNumber numberWithFloat:1.0f], [NSNumber numberWithFloat:1.0f], nil];
dataSourceLinePlot.dataSource = self;

// Animate in the new plot, as an example
dataSourceLinePlot.opacity = 0.0f;
dataSourceLinePlot.cachePrecision = CPPlotCachePrecisionDecimal;

CABasicAnimation *fadeInAnimation = [CABasicAnimation animationWithKeyPath:@"opacity"];
fadeInAnimation.duration = 1.0f;
fadeInAnimation.removedOnCompletion = NO;
fadeInAnimation.fillMode = kCAFillModeForwards;
fadeInAnimation.toValue = [NSNumber numberWithFloat:1.0];
[dataSourceLinePlot addAnimation:fadeInAnimation forKey:@"animateOpacity"];

CPColor *areaColor1 = [CPColor colorWithComponentRed:0.3 green:0.3 blue:1.0 alpha:0.8];
CPGradient *areaGradient1 = [CPGradient gradientWithBeginningColor:areaColor1 endingColor:[CPColor clearColor]];
areaGradient1.angle = -90.0f;

NSUInteger i;

[graph addPlot:dataSourceLinePlot];

NSMutableArray *contentArray1 = [NSMutableArray arrayWithCapacity:100];

NSMutableArray *customTickLocations = [[NSMutableArray alloc] init];
NSMutableArray *xAxisLabels = [[NSMutableArray alloc] init];
for ( i = 0; i < [chartData count]; i++ ) {
//for ( i = 0; i < 10; i++ ) {  
    [customTickLocations addObject:[NSDecimalNumber numberWithInt:i]];
    [xAxisLabels addObject:[NSString stringWithFormat:@"%0.1f", 5.0 * i]];
    Pulse *objPulse1 = (Pulse *)[chartData objectAtIndex:i];
          //id x = [NSNumber numberWithFloat:i*fiveHour];
    id x = [NSNumber numberWithFloat:i];
    id y = [NSNumber numberWithFloat:[objPulse1.feedBack floatValue]];
    NSLog(@"point of gragh for Performance x:%@, y : %@ ", x, y);
    [contentArray1 addObject:[NSMutableDictionary dictionaryWithObjectsAndKeys:x, @"x", y, @"y", nil]];
}

NSLog(@"Axis lable count : %d", [xAxisLabels count]);
NSMutableArray *customLabels = [NSMutableArray arrayWithCapacity:[chartData count]];
NSUInteger labelLocation = 0;

for (NSNumber *tickLocation in customTickLocations) {
    NSLog(@">>>>>>>>>>>>>>>>> tick location");
    CPAxisLabel *newLabel = [[CPAxisLabel alloc] initWithText: [xAxisLabels objectAtIndex:labelLocation++] textStyle:x.labelTextStyle];
    newLabel.tickLocation = [tickLocation decimalValue];
    newLabel.offset = x.labelOffset + x.majorTickLength - 5.0f;
     // newLabel.rotation = M_PI/(2);
    newLabel.rotation = 0;
    [customLabels addObject:newLabel];
    [newLabel release];
}

x.axisLabels =  [NSSet setWithArray:customLabels];

  //    [arrScatter removeAllObjects];
arrScatter = contentArray1;
[arrScatter retain];
  //    NSLog(@">>>>>>>>>>>> :%d", [arrScatter count]);
   }

  -(NSUInteger)numberOfRecordsForPlot:(CPPlot *)plot 
  {

if ( [(NSString *)plot.identifier isEqualToString:@"FeedBack Plot"] ) {
    return [chartData count];
   //       return 10;
}

return 0;
   }

  -(NSNumber *)numberForPlot:(CPPlot *)plot field:(NSUInteger)fieldEnum recordIndex:( NSUInteger)index
   {
switch ( fieldEnum ) {
    case CPScatterPlotFieldX:
        return (NSDecimalNumber *)[NSDecimalNumber numberWithUnsignedInteger:index*fiveHour];
    case CPScatterPlotFieldY:
    {
        Pulse *objPulse1 = (Pulse *)[chartData objectAtIndex:index];
        return [NSNumber numberWithFloat:[objPulse1.feedBack floatValue]];          
    }
}
return nil;
   }

   -(CGPoint)plotSpace:(CPPlotSpace *)space willDisplaceBy:(CGPoint)displacement {

  //    NSLog(@">>>>>>>>>>>>>>>>>> : %f", displacement.x);
   return CGPointMake(displacement.x, 0);
   }

  /*
  -(NSNumber *)numberForPlot:(CPPlot *)plot field:(NSUInteger)fieldEnum recordIndex:   (NSUInteger)index 
  {
     NSDecimalNumber *num = nil;

if ( [(NSString *)plot.identifier isEqualToString:@"FeedBack Plot"] ) {
    if ( [arrScatter count] != 0) {
        num = [[arrScatter objectAtIndex:index] valueForKey:(fieldEnum == CPScatterPlotFieldX ? @"x" : @"y")];
    }
}
   return num;
   }
   */

    -(CPLayer *)dataLabelForPlot:(CPPlot *)plot recordIndex:(NSUInteger)index {

    Pulse *objPulse1 = (Pulse *)[chartData objectAtIndex:index];
    float value = [objPulse1.feedBack floatValue];       
    //CPTextLayer *textLayer = [[CPTextLayer alloc] initWithText:[NSString stringWithFormat:@"%d", value]];

    CPTextStyle *textStyle = [CPTextStyle textStyle];
    textStyle.color = [CPColor blackColor];

    CPTextLayer *textLayer = [[CPTextLayer alloc] initWithText:[NSString stringWithFormat:@"%0.1f", value] style:textStyle];
    return textLayer;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T06:32:04.470

这是从最近的项目中获取的一些示例代码。我的 x 轴数据是 NSDates 数组。我正常设置了我的axisSet，然后在下面添加了以下代码：

```
axisSet.xAxis.labelingPolicy = CPTAxisLabelingPolicyNone;

NSMutableArray *countingXPoints=[[NSMutableArray alloc] init];
NSMutableArray *datesAsStrings=[[NSMutableArray alloc] init];

NSDateFormatter *df=[[NSDateFormatter alloc] init];
[df setDateFormat:@"MM-yy"];

for(int i=0; i<[self.xAxisData count]; i++)
{
    [countingXPoints addObject:[NSNumber numberWithInt:i]];
    [datesAsStrings addObject:[df stringFromDate:[self.xAxisData objectAtIndex:i]]];
}

NSArray *xCustomTickLocations = [NSArray arrayWithArray:(NSArray *)countingXPoints];
NSArray *xAxisLabels = [NSArray arrayWithArray:(NSArray *) datesAsStrings];
NSUInteger xLabelLocation = 0;
NSMutableArray *xCustomLabels = [[NSMutableArray alloc] initWithCapacity:[xAxisLabels count]];
for (NSNumber *xTickLocation in xCustomTickLocations)
{
    CPTAxisLabel *newXLabel = [[CPTAxisLabel alloc] initWithText: [xAxisLabels objectAtIndex:xLabelLocation++] textStyle:axisSet.xAxis.labelTextStyle];

    newXLabel.tickLocation = [xTickLocation decimalValue];
    newXLabel.offset = 0.0f;
    newXLabel.rotation = M_PI/4.0;
    [xCustomLabels addObject:newXLabel];
}

axisSet.xAxis.axisLabels=[NSSet setWithArray:xCustomLabels]; 
```

对于问题的 y 轴部分，您可以调整刻度间隔（CPTXYAxis 的属性）。要获得正确的轴高度/长度，请查看绘图空间的 xRange、yRange、globalXRange 和 globalYRance 属性。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-10-20T20:49:06.460

答案有点晚了，但我碰巧刚刚这样做了：

首先必须定义标签：

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init]; [dateFormatter setDateFormat:@"MMM"]; CPTTimeFormatter *timeFormatter = [[CPTTimeFormatter alloc] initWithDateFormatter:dateFormatter];

这给出了以下结果：1 月、2 月、3 月等。

然后将轴设置为天：在 Core Plot 示例中，您可以在日期图中看到这一点。粗略估计是每个月 30 天，因此使用以下定义：

定义 ONE_DAY (24*60*60) 定义 ONE_MONTH (30*ONE_DAY)

然后设置X轴：

x.majorIntervalLength = CPTDecimalFromFloat(ONE_MONTH);

Y轴为：y.majorIntervalLength = CPTDecimalFromFloat(200);

# iphone - iphone将导航控制器作为参数传递

> ID：10876886
> 
> 赞同：0
> 
> 时间：2012-06-04T05:58:19.417
> 
> 标签：iphone, uinavigationcontroller, uibutton, parameter-passing, custom-cell

我的应用程序具有如下结构：

一个带有 5 个按钮的 UIView（这是一个导航控制器）。当每个按钮被按下时，我在导航控制器中推送一个 UItableView。我现在的问题是，我创建了几个自定义单元，它们有自己的类。这些单元格中有几个按钮。当每个按钮被按下时，我想在导航控制器中“推”另一个视图。问题是当我为单元格类中的按钮创建选择器时，它无法识别“self.navigationcontroller”来推送新视图。例如，如何在单元格的 init 方法中将导航控制器作为参数传递？

请不要建议我将选择器作为参数传递。我想有一个类来初始化一个自定义 UIToolBar 稍后将放置在我几乎所有的视图中，所以我想将导航控制器作为参数传递，这样我就不必在我的每个视图中再次创建所有方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T06:15:54.217

你可以做几件事：

1.  使用委托协议设计模式。为您的单元创建一个委托协议，并将您的视图控制器分配为这些单元的委托。然后，当按下按钮时，向委托（也就是您的视图控制器）发送消息。
2.  使用 NSNotifications 和 NSNotificationCenter
3.  使用积木（虽然这不是一个很好的路线）
4.  或者您可以将视图控制器添加为单元格中按钮的目标，如下所示：

    `// this would be in the cellForRowAtIndexPath method of your UITableViewDataSource (probably your UIViewController)`

    `[cell.button1 addTarget:self action:@selector(cellButton1Pressed:) forControlEvents:UIControlEventTouchUpInside];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T06:18:23.550

您可以在 ViewController 而不是单元类中处理按钮操作。

# smartgwt - 分组网格列表隐藏列

> ID：10876890
> 
> 赞同：0
> 
> 时间：2012-06-04T05:58:30.850
> 
> 标签：smartgwt

> **可能重复：**
> [SmartGWT：隐藏分组网格中的列（这使得组）](https://stackoverflow.com/questions/10834024/smartgwt-hide-a-column-in-a-grouped-grid-which-makes-the-group)

我在 SmartGWT 中有一个分组网格，其中一列构成该组，
但我不想看到此列，只希望看到
作为其所属组标题的字段。

我试过.hideField，但这会破坏我的团队......

但是，当代码在浏览器上运行时，我可以手动
取消选择网格标题上下文菜单下的列，
该列消失，但组仍然存在。

因此，如果它通过单击在 gui 上运行，那么我的代码中一定有办法做到这一点？！

非常感谢！

罗马。

# solr - Solr - 搜索“B”不返回“AB”、“BA”、“ABA”

> ID：10876895
> 
> 赞同：2
> 
> 时间：2012-06-04T05:58:42.550
> 
> 标签：solr

我正在使用 Apache Solr，假设我搜索“B”我希望 Solr 返回“AB”、“BA”、“ABA”

```
 SolrQuery query = new SolrQuery();
    query.setQuery("*:*");
    query.addFilterQuery("color:*B*"); 
```

但是，它抛出异常，我该怎么办？

```
Caused by: org.apache.lucene.queryParser.ParseException: Cannot parse 'color:*B*': '*' or '?' not allowed as first character in WildcardQuery
    at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:211)
    at org.apache.solr.search.LuceneQParser.parse(LuceneQParserPlugin.java:80)
    at org.apache.solr.search.QParser.getQuery(QParser.java:142)
    at org.apache.solr.handler.component.QueryComponent.prepare(QueryComponent.java:114)
    ... 17 more
Caused by: org.apache.lucene.queryParser.ParseException: '*' or '?' not allowed as first character in WildcardQuery 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T06:33:16.700

当您说 AB 或 ABA 或 BA 时，它们是一个单独的单位或一个单词。当您对它们进行索引时，它们按原样存储在倒排索引中，即 ABA 或 BA 等。当您在倒排索引中搜索 B 时，找不到它。您需要做的是将您的字段标记为 n-gram 索引（而不是 schema.xml 中的 type="text" 或 type="string" 将它们标记为 type="NGram"），这也会在顶部索引部分单词完整的话。一旦你完成了你的 N-Gram 索引，然后当你搜索 B 时，你会得到所有的 AB 或 BA 或 ABA。但请记住，N-Gram 索引是空间/时间密集型的。

例如，假设您的字段名称是 color，然后在您的 schema.xml 中：

```
<field name="color" type="nGram" indexed="true" stored="true" required="false" /> 
```

还要检查这部分 XML 是否存在于您的 schema.xml 中（如果没有，则复制粘贴）：

```
<fieldType name="nGram" class="solr.TextField"
positionIncrementGap="100" stored="false" multiValued="true">
<analyzer type="index">
<tokenizer class="solr.StandardTokenizerFactory"/>
<!-- potentially word delimiter, synonym filter, stop words,
NOT stemming -->
<filter class="solr.LowerCaseFilterFactory"/>
<filter class="solr.NGramFilterFactory" minGramSize="1"
maxGramSize="15"/>
</analyzer>
<analyzer type="query">
<tokenizer class="solr.StandardTokenizerFactory"/>
<!-- potentially word delimiter, synonym filter, stop words,
NOT stemming -->
<filter class="solr.LowerCaseFilterFactory"/>
</analyzer>
</fieldType> 
```

# datepicker - django admin 中的日期选择器

> ID：10876897
> 
> 赞同：1
> 
> 时间：2012-06-04T05:58:55.320
> 
> 标签：datepicker, django-admin-filters

我有一个模型，响应，它使用选择框中的日期字段值进行过滤。但过滤选项提供日期范围。如何使用特定日期过滤响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:00:42.753

我在这里回答：

[在 Django admin 中按自定义日期范围过滤](https://stackoverflow.com/questions/1668220/filtering-by-custom-date-range-in-django-admin/10590443#10590443)

您可以使用[django-admin-filtrate](https://github.com/runekaagaard/django-admin-filtrate)。如果您使用的是 django 1.4，请将我发送的补丁放在问题评论中。

# asp.net - 无法将数据库连接到 Web 管理工具 2010

> ID：10876900
> 
> 赞同：0
> 
> 时间：2012-06-04T05:59:23.030
> 
> 标签：asp.net

我使用 web developer 2010，无法将我的数据库连接到 web 管理工具。每当我注册新会员时，数据都不会保存到网络管理工具中。

是不是因为：

```
<connectionStrings>
        <add name="xxxConnectionString"
            connectionString="Data Source=rainbowinthedar\sqlexpress;Initial Catalog=xxx;Integrated Security=True"
            providerName="System.Data.SqlClient" />
    </connectionStrings> 
```

或者

```
<membership>
        <providers>
          <remove name="AspNetSqlMembershipProvider"/>
          <add name="AspNetSqlMembershipProvider"
               type="System.Web.Security.SqlMembershipProvider"
               connectionStringName="LocalSqlServer"
               minRequiredPasswordLength="5"
               minRequiredNonalphanumericCharacters="0"
               passwordAttemptWindow="10"
               passwordStrengthRegularExpression=""
               />
        </providers>
      </membership> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T06:23:33.237

您的连接字符串名称不匹配。我猜它正在被保存到不同的数据库中。

```
name="xxxConnectionString" 
```

对比

```
connectionStringName="LocalSqlServer" 
```

# c++ - 从 C++ 中的 posix 信号处理程序获取对象属性

> ID：10876904
> 
> 赞同：3
> 
> 时间：2012-06-04T05:59:32.920
> 
> 标签：c++, linux, signals, posix

我试图让信号处理程序在 C++ 中工作，但不知道如何使用某些类属性。

信号处理程序在收到 SIGIO 信号时触发，我需要检查它是否用于正确的套接字。

我需要做的就是能够访问 private`socket_`和 public `received()`。

```
namespace sigh {

 template<typename SomeType>
 class WorkWithSignals
 {
 public:
   void received( unsigned char* data, size_t len, unsigned int from );

 private:
   static void sigio_handler ( int sig, siginfo_t* siginfo, void* empty );
   int socket_;
 };

 extern "C" {
   void sigio_handler ( int sig, siginfo_t* siginfo, void* empty ) {
      if (siginfo->si_fd == ***socket_*** )
        ***received*** ();
   }
 }

} 
```

除其他外，我尝试在定义之前定义一个静态结构变量，将其`sigio_handler`填充到定义之后的类构造函数中`sigio_handler`，但`sigio_handler`抱怨它不在范围内。

任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:02:07.803

您不能从静态方法访问成员变量（只是没有对象）。您也可以使您`socket_`的静态变量，并通过`WorkWithSignals<...>::socket_`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T14:16:02.963

信号处理程序是一个静态方法，因此它不会绑定到您的类的任何实例。

sigaction 手册页包含以下段落（与 siginfo_t 参数有关）：

```
 * SIGPOLL/SIGIO fills in si_band and si_fd.  The si_band event is a bit
     mask containing the same values as are filled in the revents field by
     poll(2).  The si_fd field indicates the file descriptor for which the
     I/O event occurred. 
```

假设您想继续当前基于信号的设计（poll() 可能更容易），我建议将文件描述符静态映射到 WorkWithSignals 类的实例。

然后在静态信号处理程序中，查找与给定文件描述符（您的 socket_ 字段）相关的实例，然后调用非静态方法对特定对象进行所需的工作。

在 WorkWithSignals 的声明中添加

```
static std::map<int, WorkWithSignals*> object_registry_; 
```

以及源文件中所需的def。通过在注册信号处理程序之前添加到地图并在销毁对象之前从地图中删除来管理地图中的成员资格。然后：

```
 void sigio_handler ( int sig, siginfo_t* siginfo, void* empty ) {
      std::map<int, WorkWithSignals*>::iterator it = object_registry_.find(siginfo->si_fd);
      if(it == object_registry_.end())
          // handle error case
          assert(false);

      // Check that si_band is masked with the read flag as in the poll() call (look for revents)
      WorkWithSignals* obj = it->second;
      obj->received();
   } 
```

# google-maps - 谷歌地图与安卓

> ID：10876905
> 
> 赞同：0
> 
> 时间：2012-06-04T05:59:32.903
> 
> 标签：google-maps

我的应用程序包括简单的谷歌地图，我注册了密钥，我得到了 api 如果我在使用导出签名的应用程序包后通过 cmd 命令安装应用程序没有问题，但是如果我直接从 eclipse 运行应用程序，它将显示一个没有地图的空网格在我的安卓手机上。我该怎么办，请任何人帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T20:29:55.063

你用过谷歌 api 控制台吗？在那里你只能使用一把钥匙。如果您通过签名证书使用密钥，则不能在 Eclipse 上使用该密钥。Eclipse APK 由调试证书签名，其中密钥不适合调试。

# mysql - 在组中获得最大行数？

> ID：10876910
> 
> 赞同：0
> 
> 时间：2012-06-04T06:00:27.427
> 
> 标签：mysql

我需要获取每组 UID 中的最大 ID。

```
ID   UID 
23    1  
24    1  
25    2  
26    2 
```

会给：

```
ID   UID 
24    1  
26    2 
```

如何获得每组中的最大行数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T06:04:32.577

使用[`MAX`](http://dev.mysql.com/doc/refman/5.1/en/group-by-functions.html#function_max)-operator 和 group by `UID`。

```
SELECT MAX(t.ID), t.UID
FROM yourtable AS t
GROUP BY t.UID; 
```

# linux - 解析文件 perl

> ID：10876911
> 
> 赞同：-3
> 
> 时间：2012-06-04T06:00:35.510
> 
> 标签：linux, perl, parsing

该程序将 $rf_id、$date、$qf_id 和 $failure_msg 实际打印到文件中，问题是在获取第一个值时，它将 $rf_id 的值存储为 0，其余的值根据需要打印。rf_id是 sumhow 在其他行中仅在第一行中设置为 0 就可以了。

```
#!/usr/bin/perl

use strict;
use warnings;

my $mailqdir = "/mail1.txt";
my $mqueue_directory = "/var/spool/mqueue/";
my $messages_removed = 0;
my $rf_id;
my $date;
my $temp;
my $tmp;
my @write_array;
my $to;
my $from;
my $subject;
my $path_to_sendmail = "/usr/sbin/sendmail -f";
my $mailsubject = "Subject: Deleted Queued Mails from LSMGR sendmail \n\n\n";

$ENV{"PATH"}="/usr/sbin/:/usr/sbin";
my $currentfile = `sendmail -bp`;
my $qf_id = 0;
my $failure_msg;
my $qf_file;
my $df_file;

open (MYFILE, ">/queue.txt");
print MYFILE "$currentfile";
close (MYFILE);
system("/etc/init.d/sendmail stop");
open(MYFILE,$mailqdir);
 while (<MYFILE>){
    if(/(?<=<)[^>]+(?=>\s*$)/g){
        $temp=$_;
        $temp =~ s/^\s+|s+$//g;
        $rf_id = "$temp";
        my $tmp = "$temp";
    }
    if (/(\w{14})/){
        $qf_id=$1;
        $qf_file = 'qf' . $1;
        $df_file = 'df' . $1;
        $date = substr($_,24,17);
        next unless /(\w{14})/;
        $temp = scalar <MYFILE>;   
        $temp =~ s/^\s+|s+$//g;
        $failure_msg=$temp;
    }
    push(@write_array,"$qf_file:$failure_msg:$date:$rf_id");
    $ENV{"PATH"}="/var/run/:/etc/rc.d/init.d/functions:/var/lock/subsys/:/etc/init.d/sendmail:/etc/init.d:/bin/:/usr/local/bin/:/var/spool/mqueue";
    print "Removing $qf_file... \n";
    print "Removing $df_file...\n";
    system ("rm $mqueue_directory$qf_file");
    system ("rm $mqueue_directory$df_file");
    $messages_removed++;
}
close (MYFILE);
open (CODE,">/mail.txt");
print CODE "@write_array";
close (CODE);
system("/etc/init.d/sendmail start");
$to='';
$from='';
$ENV{"PATH"}="/usr/sbin/:/usr/sbin";
#system ("$path_to_sendmail $from $to < /mail.txt");
print "\n$messages_removed total \"Deferred Mails\" message(s) removed from ";
print "mail queue.\n"; 
```

* * *

这是我要解析的一种记录，这是示例之一：

```
 q2VDWKkY010407  2221878 Sat Mar 31 19:37 <Mailer-daemon>
                     (host map: lookup (my.local.domain): deferred)
                                             <yagyavalkbhatt@yahoo.com>
q2VDWKkY010408  2221878 Sat Mar 31 19:37 <Mailer-daemon>
                     (host map: lookup (my.local.domain): deferred)
                                             <yagyavalkbhatt@yahoo.com>
q2VDWKkY010409  2221878 Sat Mar 31 19:37 <Mailer-daemon>
                     (host map: lookup (my.local.domain): deferred)
                                             <yagyavalkbhatt@yahoo.com>
q2VDWKkY010410  2221878 Sat Mar 31 19:37 <Mailer-daemon>
                     (host map: lookup (my.local.domain): deferred)
                                             <yagyavalkbhatt@yahoo.com> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T08:49:58.327

我无法重现您的问题。在简化和修复之后（不需要环顾，`s`在替换之前缺少反斜杠）您的代码

```
#!/usr/bin/perl

use strict;
use warnings;

my $temp;
my $rf_id;
my $failure_msg;
my $messages_removed;
my @write_array;

while (<DATA>){
    chomp;
    if(/<[^>]+>\s*$/g){
        $temp  = $_;
        $temp  =~ s/^\s+|\s+$//g;
        $rf_id = $temp;
    }
    my ($qf_file, $df_file, $date);
    if (/^(\w{14})/){
        $qf_file = 'qf' . $1;
        $df_file = 'df' . $1;
        $date = substr $_, 24, 17;
        next unless /(\w{14})/;
        $temp =  scalar <DATA>;
        $temp =~ s/^\s+|s+$//g;
        $failure_msg = $temp;
    }
    push(@write_array,"$qf_file:$failure_msg:$date:$rf_id\n");
    print "rm $qf_file $df_file\n";
    $messages_removed++;
}

print "\n\nCODE\n@write_array\n";
print "\n$messages_removed total \"Deferred Mails\" message(s) removed from ";
print "mail queue.\n";

__DATA__
q2VDWKkY010407  2221878 Sat Mar 31 19:37 <Mailer-daemon>
                     (host map: lookup (my.local.domain): deferred)
                                             <yagyavalkbhatt@yahoo.com>
q2VDWKkY010408  2221878 Sat Mar 31 19:37 <Mailer-daemon>
                     (host map: lookup (my.local.domain): deferred)
                                             <yagyavalkbhatt@yahoo.com>
q2VDWKkY010409  2221878 Sat Mar 31 19:37 <Mailer-daemon>
                     (host map: lookup (my.local.domain): deferred)
                                             <yagyavalkbhatt@yahoo.com>
q2VDWKkY010410  2221878 Sat Mar 31 19:37 <Mailer-daemon>
                     (host map: lookup (my.local.domain): deferred)
                                             <yagyavalkbhatt@yahoo.com> 
```

我得到这个输出：

```
rm qfq2VDWKkY010407 dfq2VDWKkY010407
Use of uninitialized value $qf_file in concatenation (.) or string at 1.pl line 29, <DATA> line 3.
Use of uninitialized value $date in concatenation (.) or string at 1.pl line 29, <DATA> line 3.
Use of uninitialized value $qf_file in concatenation (.) or string at 1.pl line 30, <DATA> line 3.
Use of uninitialized value $df_file in concatenation (.) or string at 1.pl line 30, <DATA> line 3.
rm  
rm qfq2VDWKkY010408 dfq2VDWKkY010408
Use of uninitialized value $qf_file in concatenation (.) or string at 1.pl line 29, <DATA> line 6.
Use of uninitialized value $date in concatenation (.) or string at 1.pl line 29, <DATA> line 6.
Use of uninitialized value $qf_file in concatenation (.) or string at 1.pl line 30, <DATA> line 6.
Use of uninitialized value $df_file in concatenation (.) or string at 1.pl line 30, <DATA> line 6.
rm  
rm qfq2VDWKkY010409 dfq2VDWKkY010409
Use of uninitialized value $qf_file in concatenation (.) or string at 1.pl line 29, <DATA> line 9.
Use of uninitialized value $date in concatenation (.) or string at 1.pl line 29, <DATA> line 9.
Use of uninitialized value $qf_file in concatenation (.) or string at 1.pl line 30, <DATA> line 9.
Use of uninitialized value $df_file in concatenation (.) or string at 1.pl line 30, <DATA> line 9.
rm  
rm qfq2VDWKkY010410 dfq2VDWKkY010410
Use of uninitialized value $qf_file in concatenation (.) or string at 1.pl line 29, <DATA> line 12.
Use of uninitialized value $date in concatenation (.) or string at 1.pl line 29, <DATA> line 12.
Use of uninitialized value $qf_file in concatenation (.) or string at 1.pl line 30, <DATA> line 12.
Use of uninitialized value $df_file in concatenation (.) or string at 1.pl line 30, <DATA> line 12.
rm  

CODE
qfq2VDWKkY010407:(host map: lookup (my.local.domain): deferred)
:Sat Mar 31 19:37 :q2VDWKkY010407  2221878 Sat Mar 31 19:37 <Mailer-daemon>
 :(host map: lookup (my.local.domain): deferred)
::<yagyavalkbhatt@yahoo.com>
 qfq2VDWKkY010408:(host map: lookup (my.local.domain): deferred)
:Sat Mar 31 19:37 :q2VDWKkY010408  2221878 Sat Mar 31 19:37 <Mailer-daemon>
 :(host map: lookup (my.local.domain): deferred)
::<yagyavalkbhatt@yahoo.com>
 qfq2VDWKkY010409:(host map: lookup (my.local.domain): deferred)
:Sat Mar 31 19:37 :q2VDWKkY010409  2221878 Sat Mar 31 19:37 <Mailer-daemon>
 :(host map: lookup (my.local.domain): deferred)
::<yagyavalkbhatt@yahoo.com>
 qfq2VDWKkY010410:(host map: lookup (my.local.domain): deferred)
:Sat Mar 31 19:37 :q2VDWKkY010410  2221878 Sat Mar 31 19:37 <Mailer-daemon>
 :(host map: lookup (my.local.domain): deferred)
::<yagyavalkbhatt@yahoo.com>

8 total "Deferred Mails" message(s) removed from mail queue. 
```

请尝试解释您要达到的目标。运行代码时，请注意您收到的警告 - 您正在一个空文件名上运行`rm`（可以被 Perl 替换）。`unlink`

**更新：**疯狂猜测你可能在做什么：

```
#!/usr/bin/perl

use strict;
use warnings;

my %matched;
my @out;

while (<DATA>) {
    chomp;
    if (/^(?<id>\S{14})\s+
          (?<num>[0-9]+)\s+
          (?<day>...)\s+
          (?<month>...)\s+
          (?<monthday>[0-9]+)\s+
          (?<time>[0-9]+:[0-9]+)\s+
         <(?<from>.*)>/x) {
        %matched = %+;

    } elsif (/^\s+<(.*)>/) {
        $out[-1] .= ":$1";

    } elsif (s/^\s+\(/(/) {
        print "rm qf$matched{id} df$matched{id}\n";
        push @out, join ':', "qf$matched{id}",
                              $_,
                              join ' ',@matched{qw/day month monthday time/};

    } else {
        die "Cannot parse: $_\n";
    }
}

print "$_\n" for @out;
print scalar @out, " messages removed.\n";

__DATA__
q2VDWKkY010407  2221878 Sat Mar 31 19:37 <Mailer-daemon>
                     (host map: lookup (my.local.domain): deferred)
                                             <yagyavalkbhatt@yahoo.com>
q2VDWKkY010408  2221878 Sat Mar 31 19:37 <Mailer-daemon>
                     (host map: lookup (my.local.domain): deferred)
                                             <yagyavalkbhatt@yahoo.com>
q2VDWKkY010409  2221878 Sat Mar 31 19:37 <Mailer-daemon>
                     (host map: lookup (my.local.domain): deferred)
                                             <yagyavalkbhatt@yahoo.com>
q2VDWKkY010410  2221878 Sat Mar 31 19:37 <Mailer-daemon>
                     (host map: lookup (my.local.domain): deferred)
                                             <yagyavalkbhatt@yahoo.com> 
```

请注意，`:`作为分隔符可能不是最好的选择：它在消息中使用时间和两次，也是。

# ios - iOS 蓝牙 HID 上的 Monotouch 支持

> ID：10876921
> 
> 赞同：0
> 
> 时间：2012-06-04T06:01:59.220
> 
> 标签：ios, mono, xamarin.ios, bluetooth, hid

我一直在寻找蓝牙上的单点触控支持，特别是蓝牙 HID 支持，但没有找到。我们在 Monotouch 中有吗？示例代码，讨论？或任何关于蓝牙 HID 上的 MonoTouch 支持的事情。我在那里工作。它是单触式的，所以它适用于 iOS，但如果你有 monodroid 的经验，你也可以给我们一些想法。谢谢你..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:30:43.620

苹果似乎没有为此提供任何公共 API。MT 提供了对 iOS API 的访问，所以如果 iOS 不提供它，那么 MT 也不能这样做。

[iOS USB HID 编程](https://stackoverflow.com/questions/9373453/ios-usb-hid-programming)

# javascript - 我可以有条件地展示 Google 广告吗？

> ID：10876924
> 
> 赞同：3
> 
> 时间：2012-06-04T06:02:31.713
> 
> 标签：javascript, adsense

我的网站上有一种“免费增值”模式，这样如果用户订阅了，他们就看不到我在页面上的 Google Adsense 广告。

所以我想根据`if()`我的 Javasript 代码中的条件语句来制作 Adsense 广告是否显示。

然而，从 Google 获得的代码被设计为直接插入 HTML，而且更重要的是，他们正在做一些棘手的事情，包括在评论区域中设置一些变量，我无法理解。

这是代码的样子：

```
<script type="text/javascript"><!--
google_ad_client = "xx-xxx-00000000000000000000";
/* karamoh */
google_ad_slot = "0000000000";
google_ad_width = 320;
google_ad_height = 50;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script> 
```

是否有可能以这种方式转换它，以便我可以`if()`围绕它包装一个语句？

*（我想我可以把它全部放在一个`document.write()`函数中，但这似乎很不雅。肯定有一种方法可以更直接地利用 Javascript 吗？）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T08:55:29.300

最干净的方法是检查服务器端您的客户端是否是高级的，并且根本不要在发送给客户端的页面中插入标签。

如果您由于某种原因无法访问它并且不介意对 show_ads.js 的额外请求，似乎设置一个无意义的`google_ad_client`Adsense 服务会回复 400 并且根本不绘制任何广告，所以您可以使用它而不是广告代码的第一行：

```
if(premiumClient)
    google_ad_client = "some-nonsense-value"
else
    google_ad_client = "your-correct-value"
end 
```

测试还表明，如果您输出`<script>`带有它的标签`document.write`会阻止执行，就像它在文档中一样，所以无论是您自己建议的，还是侵入性较小的以下代码也可能起作用：

```
<script type="text/javascript"><!--
google_ad_client = "xx-xxx-00000000000000000000";
/* karamoh */
google_ad_slot = "0000000000";
google_ad_width = 320;
google_ad_height = 50;
//-->
if(!premiumUser)
    document.write('<scr'+'ipt type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"><'+'/script>')
</script> 
```

我不记得是否确实可以保证它确实会阻止其余的执行，因此，由于`document.write`show_ads.js 中的另一个原因，它现在可能会在某些浏览器中失败，或者将来突然开始失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T06:08:12.843

类似的东西怎么样：

```
if(userIsNotSubscribed)
    document.getElementById("advertisementDiv").innerHTML = advertisement;
    // Where advertisement = The Code given to you by Google 
```

# java - 如何在java中将纯文本转换为html超链接？

> ID：10876925
> 
> 赞同：2
> 
> 时间：2012-06-04T06:02:40.357
> 
> 标签：java

我正在使用当前表达式将纯文本超链接（如 http 或 https）转换为 html 超链接

```
String pattern = "(?:https|http)://([^\\s\\|]+)"; 
```

但是，在将通过此正则表达式模式的消息内容中，我的内容如下`[video]http://www.yahoo.com[video].`

对于在两个视频括号之间的此类内容。我不希望它被转换为 html 超链接，因为它会显示在页面上。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T06:10:51.377

`(?<!...)`使用and使用负前瞻和后瞻`(?!...)`：

```
String link = "(?:https|http)://([^\\s\\|]+)";
String pattern = "(?<!\\[video\\])" + link + "(?!\\[video\\])";

Pattern p = Pattern.compile(pattern);
System.out.println(p.matcher("[video]http://www.yahoo.com[video]").matches());
System.out.println(p.matcher("http://www.yahoo.com").matches()); 
```

输出：

```
false
true 
```

* * *

## 完整示例：

```
public static void main(String... args) {

    Pattern pattern = Pattern.compile(
            "(?<!\\[video\\])(?:https|http)://([^\\s\\|]+)(?!\\[video\\])");

    String text = "This is some example text with a link" +
        "[video]http://videolink[video] that should not be replaced" + 
        "and another link that should be" +
        "replaced http://www.example.com";

    Matcher m = pattern.matcher(text);

    StringBuffer sb = new StringBuffer();
    while (m.find())
        m.appendReplacement(sb, "<a href=\""+m.group()+"\">"+m.group() +"</a>");
    m.appendTail(sb);

    System.out.println(sb);
} 
```

输出：

> 这是一些示例文本，其中包含不应替换的链接 [video]http://videolink[video] 和应替换的另一个链接[http://www.example.com](http://www.example.com)

# c++ - 永远不要使用静态内联函数吗？

> ID：10876930
> 
> 赞同：84
> 
> 时间：2012-06-04T06:02:53.183
> 
> 标签：c++, static, inline

`inline`使用关键字（§ 7.1.3/4）有两个含义：

1.  它*提示*编译器在调用点替换函数体优于通常的函数调用机制。
2.  即使省略了内联替换，也会遵循内联的其他规则（尤其是*一个定义规则*）。

通常，如果需要，任何主流编译器都会在调用点替换函数体，因此`inline`仅仅为函数标记`#1`并不是真正需要的。

进一步`#2`说，据我所知，当您将函数声明为`static inline`函数时，

函数上的`static`关键字强制`inline`函数具有内部链接（*内联函数具有外部链接*）此类函数的每个实例都被视为单独的函数（*每个函数的地址不同*）并且这些函数的每个实例都有自己的副本静态局部变量和字符串文字（*内联函数只有一个副本*）

因此，这样的功能就像任何其他`static`功能一样，关键字`inline`不再重要，它变得多余。

因此，实际上标记一个功能`static`，`inline`两者都没有任何用处。它应该是`static`（*不是最喜欢*的）或`inline`（*最喜欢*的），
那么，在一个函数上使用`static`and`inline`一起*实际上*没有用吗？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-06-04T06:22:26.023

您的分析是正确的，但并不一定意味着无用。即使大多数编译器都会自动内联函数（原因 #1），最好只声明`inline`意图来描述。

忽略与 , 的交互`inline`，`static`应谨慎使用函数。命名空间范围的`static`修饰符以前被弃用，取而代之的是未命名的命名空间（C++03 §D.2）。由于某些模糊的原因，我不记得它在 C++11 中已从弃用中删除，但您应该很少需要它。

> 因此，实际上将函数标记为静态和内联都没有任何用处。它应该是静态的（不是最喜欢的）或内联的（最喜欢的），

没有偏好的概念。`static`意味着具有相同签名的不同函数可能存在于不同的`.cpp`文件（翻译单元）中。`inline`without`static`意味着不同的翻译单元可以用相同的定义定义相同的函数。

首选是使用未命名的命名空间，而*不是*`static`：

```
namespace {
    inline void better(); // give the function a unique name
}

static inline void worse(); // kludge the linker to allowing duplicates 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-06-04T06:40:47.583

静态和内联是正交的（独立的）。静态意味着函数不应该在翻译单元之外可见，内联是对编译器的提示，程序员希望内联这个函数。这两个没有关系。

当内联函数不在翻译单元之外使用时，使用`static inline`是有意义的。通过使用它，您可以通过在另一个翻译单元中使用相同的名称命名另一个内联函数来防止意外违反 ODR 规则的情况。

例子：

源1.cpp：

```
inline int Foo()
{
  return 1;
}

int Bar1()
{
  return Foo();
} 
```

源2.cpp：

```
inline int Foo()
{
  return 2;
}

int Bar2()
{
  return Foo();
} 
```

如果不在 Foo 上使用 static（或不使用匿名命名空间，这是大多数 C++ 程序员首选的方式），此示例违反了 ODR 并且结果未定义。您可以使用 Visual Studio 测试 Bar1/Bar2 的结果将取决于编译器设置 - 在调试配置中，Bar1 和 Bar2 都将返回相同的值（不使用内联，链接器随机选择一个实现），在发布配置中它们每个将返回预期值。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-05-10T02:09:28.397

我可能对此并不完全正确，但据我所知，声明一个函数 `static inline`是使（或允许）编译器生成一个机器代码的唯一方法，而该函数实际上根本没有在编译代码中定义，并且您所拥有的只是将函数调用直接替换为一系列指令，就像它只是一个常规过程体一样，在与源代码中的函数定义相关的过程调用的机器代码中没有任何痕迹。

也就是说，只有用`static inline`你可以真正替代使用的宏，仅靠`inline`它本身是不够的。

一个简单的谷歌搜索“静态内联”将向您显示讨论它的编译器文档页面。我想这应该足以回答你的问题，并说，“不，它实际上并不是没用的”。这是一个讨论使用的网站示例`inline`，特别是`static inline` [http://www.greenend.org.uk/rjk/tech/inline.html](http://www.greenend.org.uk/rjk/tech/inline.html)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-06-04T06:25:03.070

如果您谈论*自由*功能（`namespace`范围），那么您的假设是正确的。`static inline`功能确实没有太大价值。所以`static inline`只是一个`static`函数，它自动满足 ODR 并且`inline`对于 ODR 目的是多余的。

但是，当我们谈论*成员*方法（`class`作用域）时，`static inline`函数确实具有价值。
一旦你将一个`class`方法声明为`inline`，它的全部内容必须对所有包含它的翻译单元可见`class`。

请记住，`static`当涉及到 a 时，关键字具有不同的含义`class`。
**编辑**：您可能知道`static`a 中的函数`class`没有内部链接，换句话说，*一个类不能有其`static`方法的不同副本，具体取决于翻译 (.cpp) 单位*。
但是 /global 范围内的免费`static`功能`namespace`确实每个翻译单元都有不同的副本。

例如

```
// file.h
static void foo () {}
struct A {
  static void foo () {}
};

// file1.cpp
#include"file.h"
void x1 ()
{
  foo();  // different function exclusive to file1.cpp
  A::foo();  // same function
}

// file2.cpp
#include"file.h"
void x2 ()
{
  foo();  // different function exclusive to file2.cpp
  A::foo();  // same function
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-02-02T09:05:27.097

我刚刚阅读了 gcc 的手册页，它特别说明了使用带有编译器标志的静态内联。在 flag 的情况下，它内联函数，如果它也是静态的并且在它被调用的每个实例中都内联，那么它会摆脱在创建的目标文件中永远不会使用的函数定义，从而减少生成代码的大小。

# css - 使元素的宽度相对于其高度？

> ID：10876932
> 
> 赞同：11
> 
> 时间：2012-06-04T06:02:56.210
> 
> 标签：css

我知道可以[相对于其宽度指定元素的高度](http://ansciath.tumblr.com/post/7347495869/css-aspect-ratio)，因为百分比边距和填充值是相对于其宽度计算的。是否可以做相反的事情 - 相对于高度的宽度？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T06:21:57.637

我找到了一种无需 Javascript 的方法。制作具有比例的图像，并将其嵌入到 HTML 中，并相应地对其进行缩放，以便父元素可以`inline-block`适合图像大小。

```
<!-- height of the outer container -->
<div style="height: 200px">

    <!-- this will resize to 200px and maintain its aspect ratio --->
    <div style="display: inline-block; position: relative;">
        <img src="aspectratio.png" style="height: 100%; width: auto;" />
        <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0">
            <!-- Everything in here can party on the fact that their parent
                 has the correct aspect ratio -->
        </div>
    </div>

</div> 
```

# asp.net-mvc - @htmlTextboxFor 日期格式？

> ID：10876936
> 
> 赞同：0
> 
> 时间：2012-06-04T06:03:08.507
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有一个 @Html.TextboxFor 并且它连接到 datepicker 类，它还显示一个数据库的日期。它如何以错误的格式显示日期。当日期显示在数据库中时，这是日期格式错误的唯一时间。

```
@Html.TextBoxFor(model => model.AdvertiserSignDate, new { id = "txtAdvDate", @readonly = "true", @class = "DatePicker" }) 
```

下面的代码以正确的格式显示日期，但只是在文本框下方的一行上。

```
@(Model == null ? string.Empty : String.Format("{0:dd MMM yyyy}", Model.AdvertiserSignDate)) 
```

我想将上面一行的格式添加到第一行，以便我的文本框以正确的格式显示日期并具有日期选择器的功能。

如何合并这两行代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T06:13:47.637

试试这个也许有帮助

```
[DisplayName("Advertiser Sign Date")]
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd/MM/yyyy}")]
public DateTime AdvertiserSignDate { get; set; }

@Html.EditorFor(model => model.AdvertiserSignDate) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T06:28:57.013

试试这个

```
@Html.TextBoxFor(model => model.AdvertiserSignDate, new { id = "txtAdvDate", @readonly = "true", @class = "DatePicker", @Value = (Model == null ? string.Empty : Model.AdvertiserSignDate.ToString("dd MMM yyyy")) }) 
```

**编辑**

如果`AdvertiserSignDate`DateTime 可以为空，请执行此操作

```
@Html.TextBoxFor(model => model.AdvertiserSignDate, new { id = "txtAdvDate", @readonly = "true", @class = "DatePicker", @Value = (Model == null || Model.AdvertiserSignDate == null? string.Empty : Convert.ToDateTime(Model.AdvertiserSignDate).ToString("dd MMM yyyy")) }) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T06:45:17.723

这行得通。

```
@Html.TextBox("AdvertiserSignDate", String.Format("{0:dd MMM yyyy}", Model.AdvertiserSignDate), new { id = "txtAdvDate", @readonly = "true", @class = "DatePicker" }) 
```

# graphics - 什么技术更适合信息图表和数据可视化项目？

> ID：10876939
> 
> 赞同：2
> 
> 时间：2012-06-04T06:03:44.730
> 
> 标签：graphics, visualization, data-visualization

我想可视化各个商店的销售数据。我认为可视化应该有两个部分：

*   地图：显示带有平移/缩放控件的地图，允许用户查看在不同区域收集的销售信息。

*   数据表：只是一堆带有分页/过滤的标准数据网格。

任何人都可以建议框架或库来创建这样的东西吗？我更喜欢与 Borland Delphi 或 .NET Framework 一起使用的东西。在这一点上，我不知道它应该是桌面应用程序还是网络应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T13:45:38.870

我会以通用格式（如 JSON）公开我的数据。这使您能够与大量理解 JSON[的基于 JavaScript 的数据可视化工具集成。](http://selection.datavisualization.ch/)这让您为 Web 做好了准备，尤其是考虑到 SVG 渲染在浏览器中的支持越来越广泛。而且，如果你需要做一个桌面应用程序，你总是可以将你的网络应用程序包装成一个 SPA（例如，将它作为一个 Chrome 插件分发）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T04:44:27.473

我会使用 Raphael.js 和 jQuery 来绘制地图并添加一些交互性。

[http://jquery.com/](http://jquery.com/) http://raphaeljs.com/

顺便说一句，我使用两者做了一些例子（法语）：[http ://www.quicumule.fr](http://www.quicumule.fr)

在这个例子中，我使用 PHP 来生成 javascript。您还可以使用 PHP 生成 JSON 表，并将数据存储在数据库中。然后，你使用 Raphael 和 jQuery 让它变得花哨。

如果您需要进一步的帮助，请随时询问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T04:16:32.480

我建议您使用[Choosel Mashup Framework](http://code.google.com/p/choosel/)或看看它是如何构建的。您可以在[网上看到一个视频](http://vimeo.com/16109235#)，向您展示如何使用它和一个[演示网站](http://choosel-mashups.appspot.com/)来玩。有一个应用程序可以在短时间内[搜索基于选择器构建的出租场所。](http://victoria.rentalmap.co/)

它是用 Java 编写的（使用 GWT），因此如果您确实想要 .NET 的某些东西，您可以查看并了解 Choosel 是如何构建的。

# php - 将数组顺序插入数据库

> ID：10876940
> 
> 赞同：1
> 
> 时间：2012-06-04T06:03:46.367
> 
> 标签：php, javascript, arrays, zend-framework

我使用 javascript 和 php 创建了一个表单。我使用了一个文本框，例如

```
 <input type="textbox" name="listid" value="" /> 
```

我将从 $_POST['listid']; 得到一个像 4,6,12,9 等的数组；我可以使用序列化将此值插入数据库并通过反序列化检索它。但是我需要做的是，为listid = 4插入1，为listid = 6插入2，为listid = 12插入3，为listid = 9插入4。我用过

```
$count=0;

 foreach($_POST['listid]' as $id)
        {

            $count++;
    $db->update('lists',array('order'=>$count),'id ='.$db->quote($id));

        } 
```

但它不起作用。只更新第一个值（listid=4）

我需要做什么？有人请帮忙吗？？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T06:08:41.727

试试这个。

```
<?php
$count=0;
 foreach($_POST['listid'] as $id)
        {

            $count++;
    $db->update('lists',array('order'=>$count),'id ='.$db->quote($id));

        }

?> 
```

**删除 $count=0; 在 for 循环之外**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T06:47:22.287

你可以试试

```
$count=0;
foreach($_POST['listid]' as $id)
{   
    $count++;
    $data   =   array('order'=>$count);
    $db->update('lists',$data,$this->_db->quoteInto('id = ?',$id));
} 
```

我希望这可能有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T06:58:45.700

你不会收到来自 $_POST['listid] 的数组，你会得到一个字符串。首先将该字符串拆分为一个数组，然后实现逻辑。

```
$arrListId = split(',', $_POST['listid]); 
```

# java - WEKA Instance.ClassAttribute() 方法

> ID：10876941
> 
> 赞同：1
> 
> 时间：2012-06-04T06:03:55.137
> 
> 标签：java, data-mining, weka

我WEKA，我遇到了以下代码：

```
Instances train = DataSource.read(args[0]);
train.setClassIndex(train.numAttributes() - 1);
Instances test = DataSource.read(args[1]);
test.setClassIndex(test.numAttributes() - 1);
// train classifier
J48 cls = new J48();
cls.buildClassifier(train);
// output predictions
System.out.println("# - actual - predicted - distribution");
for (int i = 0; i < test.numInstances(); i++) {
    double pred = cls.classifyInstance(test.instance(i));
    double[] dist = cls.distributionForInstance(test.instance(i));
    System.out.print((i+1) + " - ");
    System.out.print(test.instance(i).toString(test.classIndex()) + " - ");
    System.out.print(test.classAttribute().value((int) pred) + " - ");
    System.out.println(Utils.arrayToString(dist));
} 
```

这里的目标是在测试数据集上运行一个预先构建的分类器，然后打印实际类、预测类和类成员值分布。我理解除了一行之外的所有内容：

```
System.out.print(test.classAttribute().value((int) pred) + " - "); 
```

如果“test”是一组实例，上面的语句如何能够在 for 循环中打印当前实例的预测类值？

谢谢阿布舍克 S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:59:31.597

我认为这`test.classAttribute()`为您提供了可以分配测试实例的所有类。然后第二部分`.value((int) pred)`从该组中选择与 匹配的`pred`类，这是当前测试实例的预测类。

# javascript - 如何在常规 jQuery 包装器中使用 jQuery-mobile 函数？

> ID：10876942
> 
> 赞同：0
> 
> 时间：2012-06-04T06:04:15.083
> 
> 标签：javascript, jquery, mobile, jquery-mobile, cordova

我们有一个基于 jQuery 的 PhoneGap 应用程序，它在触摸事件方面存在一些问题（`touchstart`根据手机型号 [例如 Galaxy 与 HTC] 和`div`内容有选择性的行为......长篇大论......）。

我们只想将 jQuery-mobile 用于触摸事件（目前仅找到好的工作解决方案），因为代码库非常大，我们不会在一夜之间将它完全移植到 jQuery mobile。

如何在常规 jQuery 环境中仅使用 jQuery 移动事件处理程序？意思是，代码是：

```
(function($){
    ...
})(jQuery) 
```

那么在该函数中，我如何使用 jQuery 移动函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:20:46.097

虽然我没有明确尝试过，但 jQuery Mobile 遵循[AMD 模式](http://jquerymobile.com/blog/2012/01/10/upcoming-releases-1-0-1-1-1-and-beyond/)（>1.0.1），因此应该可以独立使用核心库的某些部分。

[https://github.com/jquery/jquery-mobile/blob/master/js/jquery.mobile.events.touch.js](https://github.com/jquery/jquery-mobile/blob/master/js/jquery.mobile.events.touch.js)

# php - Codeigniter 中的路由问题

> ID：10876943
> 
> 赞同：2
> 
> 时间：2012-06-04T06:04:26.720
> 
> 标签：php, codeigniter, routes

我正在使用 codeigniter 开发一个 Web 应用程序。我在控制器中创建了一个名为“Administration”的文件夹。在这个文件夹中，我保留了与管理面板相关的所有控制器。

现在，我希望如果任何用户将 url 键入为 www.mywebsite.com/administration，则用户应该被重定向到相应的控制器，无论管理后的下一个段是什么。就像如果用户键入 wwww.mywebsite.com/administration/login，那么应该执行登录控制器。嗯，这是一件很明显的事情。

现在我想要的是，当有人键入任何内容 www.mywebsite.com/anything_else 时，默认情况下它应该被定向到其他控制器。我正在使用以下路线设置：

```
$route['default_controller'] = 'welcome';
$route['404_override'] = ''; 
$route['administration/(:any)']='administration/$1';
$route['(:any)']='fetch_pages'; 
```

请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T07:22:03.683

```
$route['^(?!administration).*'] = "fetch_pages";
$route['administration/(:any)']='Administration/$1'; 
```

我认为您在管理中创建了带有大写字母“A”的文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T07:10:17.143

我建议你做另一种方法：

```
$route['default_controller'] = 'welcome';
$route['404_override'] = 'fetch_pages/index'; 
```

此解决方案使您能够跳过声明明显的`administration`路由，所有其他路径都将通过`fetch_pages`控制器调用。

[阅读更多关于 404_override](http://codeigniter.com/user_guide/general/routing.html#footer)

根据您的需要，您可能需要考虑[`show_404()`](http://codeigniter.com/user_guide/general/errors.html)在找不到基于[uri](http://codeigniter.com/user_guide/libraries/uri.html)的数据时运行。

# c# - 冻结datagridview中的顶行和前两列

> ID：10876951
> 
> 赞同：7
> 
> 时间：2012-06-04T06:05:35.223
> 
> 标签：c#, winforms, datagridview

我有一个 datagridview 并试图实现以下目标： 1\. 垂直滚动时应冻结顶行。2\. 水平滚动时应冻结前两列。

我应用了 column.Freeze = true 并且它工作正常，但是当应用 row[0].freeze = true 时，它​​不适用于行冻结。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T06:38:08.633

创建 DataGridView 时，我将其与 DataTable 关联，然后立即将前两行设置为冻结。行不会冻结。但是，如果我处理按钮单击并将行设置为在该按钮单击中冻结，则行成功冻结。那么，如何在关联表时立即冻结行？

这是一些代码：

```
 DataTable dataTable = new DataTable();

    // Just add a bunch of columns
    for (int i = 0; i < 15; i++)
    {
    dataTable.Columns.Add("Col" + i.ToString(), typeof
    (string));
    }

    // Add a bunch of rows to the DataTable, with some dummy
    values
    for (int i = 0; i < 100; i++)
    {
    DataRow row = dataTable.NewRow();
    for (int j = 0; j < 15; j++)
    {
    row["Col" + j.ToString()] = "Val" + i.ToString() +
    "-" + j.ToString();
    }
    dataTable.Rows.Add(row);
    }

    gridView.DataSource = dataTable;

    gridView.Rows[1].Frozen = true; 
```

这行不通。行未冻结。但是，如果我将`gridView.Rows[1].Frozen = true;`线路放在按钮事件处理程序中，它就可以工作。那么，在不需要用户触发事件的情况下，我将如何做到这一点？我看到两个解决方案：

1.  以这种方式绑定数据：

    ```
    for (int i = 0; i < 15; i++)
    {
    DataGridViewTextBoxColumn c = new DataGridViewTextBoxColumn();
    c.Name = "Col" + i.ToString();
    gridView.Columns.Add(c);
    }
    gridView.Rows.Add(100);
    for (int i = 0; i < 100; i++)
    for (int j = 0; j < 15; j++)
    gridView.Rows[i].Cells[j].Value = "Val" + i.ToString() + "-" + j.ToString();
    gridView.Rows[0].Frozen = true; 
    ```

2.  在此事件中选择冻结的行：

    ```
    private void gridView_DataBindingComplete(object sender,
    DataGridViewBindingCompleteEventArgs e)
    {
    FrozeFirstRow();
    } 
    ```

# javascript - 如何通过单击取消选中单选按钮？

> ID：10876953
> 
> 赞同：99
> 
> 时间：2012-06-04T06:05:42.250
> 
> 标签：javascript, html, radio-button

与复选框不同，用户无法在单击单选按钮后取消选择它们。有什么方法可以使用 Javascript 以编程方式切换它们？最好不使用 jQuery。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-06-04T06:13:14.783

您可以将 HTML 对象的属性设置`checked`为`false`：

```
document.getElementById('desiredInput').checked = false; 
```

* * *

### 例子

**`Plain JavaScript`**：

```
var radios = document.getElementsByTagName('input');
for(i=0; i<radios.length; i++ ) {
    radios[i].onclick = function(e) {
        if(e.ctrlKey || e.metaKey) {
            this.checked = false;
        }
    }
}
```

```
<input type="radio" name="test" value="1" />
<input type="radio" name="test" value="2" checked="checked" />
<input type="radio" name="test" value="3" />
```

**`jQuery`**：

```
$('input').click(function(e){
    if (e.ctrlKey || e.metaKey) {
        $(this).prop('checked', false);
    }
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<input type="radio" name="test" value="1" />
<input type="radio" name="test" value="2" checked="checked" />
<input type="radio" name="test" value="3" />
```

### 按住`Ctrl`(`⌘</kbd> on mac) key to uncheck.`

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-06-04T06:13:51.483

单选按钮旨在用于组中，由它们共享相同的`name`属性定义。然后单击其中一个取消选择当前选定的一个。为了允许用户取消他所做的“真实”选择，您可以包含一个对应于空选择的单选按钮，例如“不知道”或“无答案”。

如果您想要一个可以选中或取消选中的按钮，请使用复选框。

可以（但通常不相关）取消选中 JavaScript 中的单选按钮，只需将其`checked`属性设置为 false，例如

```
<input type=radio name=foo id=foo value=var>
<input type=button value="Uncheck" onclick=
"document.getElementById('foo').checked = false"> 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2016-01-13T22:57:44.723

这是我的答案（虽然我是用 jQuery 做的，但只是为了选择元素以及添加和删除一个类，所以你可以很容易地用纯 JS 选择器和纯 JS 添加属性替换它）

```
<input type='radio' name='radioBtn'>
<input type='radio' name='radioBtn'>
<input type='radio' name='radioBtn'>

$(document).on("click", "input[name='radioBtn']", function(){
    thisRadio = $(this);
    if (thisRadio.hasClass("imChecked")) {
        thisRadio.removeClass("imChecked");
        thisRadio.prop('checked', false);
    } else { 
        thisRadio.prop('checked', true);
        thisRadio.addClass("imChecked");
    };
}) 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2020-06-05T09:15:31.210

## 取消选中收音机如何（不）工作

你不能轻易地通过 , 实现 uncheck `if(this.checked) this.checked = false`（如果你真的想，请看最后的黑客方式），因为事件按以下顺序触发：

1.  `mousedown`或者`keydown`
2.  `mouseup`或者`keyup`
3.  如果没有选中，现在设置选中的属性
4.  `click`
5.  `input`（仅当状态改变时）
6.  `change`（仅当状态改变时）

现在在哪种情况下执行提到的取消选中？

*   `mouseup`或`mousedown`：然后在步骤 3 中将值设置回 true 并且更改和输入事件甚至不会触发，因为在序列中调用它们时状态没有改变 - 所以你不能在这里取消选中它
*   `click`：那么状态总是假的，输入和更改也不会触发 - 所以你不能检查它
*   `input`或`change`：当状态没有改变并且单击选定元素不会改变状态时它不会触发 - 所以你不能在这里做任何有用的事情

## 天真的方式

正如您可以从上面的序列中学到的那样，方法是：

1.  读取之前的状态`mouseup`
2.  将状态设置`click`为先前状态的否定

如果要将先前的状态存储在 data 属性中，请记住它保存为**string**，而 checked 属性是**boolean**。所以你可以像这样实现它：

```
radio.onmouseup = function() { this.dataset.checked = this.checked? 1 : ""; }
radio.onclick = function() { this.checked = !this.dataset.checked; } 
```

它似乎有效，但由于以下原因，您不应该这样做：

*   用户可以在`mousedown`其他地方，然后将鼠标悬停在单选按钮上方，然后`mouseup`：在这种情况下 mouseup 触发并且单击不会
*   用户可以`Tab`用来聚焦无线电组，然后`arrows`更改：mouseup 不触发，click 不触发

## 正确的方法

还有另一个问题：动态添加的单选按钮。有两种方法：

1.  `element.appendChild(radio)`- 如果您在`DOMContentLoaded`事件中对所有无线电启用取消选择，则此动态添加的无线电不受影响
2.  `element.innerHTML+= '<input type="radio">'`- 有效地替换元素的 HTML 内容并在其中重新创建 DOM - 因此所有事件侦听器都被丢弃

为了解决（2），我推荐**onclick content attribute**。请注意，`element.onclick = fn`和`element.setAttribute("onclick", "fn()")`是两个不同的东西。另请注意，`onclick`每次用户激活无线电时都会触发，无论他使用什么界面。

还有一个问题：如果您启用取消选择，那么您还应该启用切换`Space`以模仿复选框的行为。以下代码解决了所有提到的问题：

```
function deselectableRadios(rootElement) {
  if(!rootElement) rootElement = document;
  if(!window.radioChecked) window.radioChecked = {};
  window.radioClick = function(e) {
    const obj = e.target, name = obj.name || "unnamed";
    if(e.keyCode) return obj.checked = e.keyCode!=32;
    obj.checked = window.radioChecked[name] != obj;
    window.radioChecked[name] = obj.checked ? obj : null;
  }
  rootElement.querySelectorAll("input[type='radio']").forEach( radio => {
    radio.setAttribute("onclick", "radioClick(event)");
    radio.setAttribute("onkeyup", "radioClick(event)");
  });
}

deselectableRadios();
```

```
<label><input type="radio" name="tag1">one</label>
<label><input type="radio" name="tag1">two</label>
<label><input type="radio" name="tag1">three</label>

<br><br>

<label><input type="radio" name="tag2">one</label>
<label><input type="radio" name="tag2">two</label>
<label><input type="radio" name="tag2">three</label>
```

现在，您可以`deselectableRadios()`随时调用动态添加内容，并且在收音机上多次调用它不会破坏它。您还可以指定`rootElement`仅更新 HTML DOM 的子树并让您的 Web 更快。如果不喜欢全局状态，可以使用hacker方式：

## 黑客之道

`setTimeout`关键是在检查属性设置后滥用`mouseup`调用它：

```
function deselectable() {
  setTimeout(checked => this.checked = !checked, 0, this.checked);
} 
```

现在您可以取消选择任何单选按钮：

```
radio.onmouseup = deselectable; 
```

但是这个简单的单行只需要点击就可以工作，并不能解决上面提到的问题。

## 被遗弃的未来

可取消选择的单选基本上是复选框，其中只能选中组中的一个。有一个有希望的直接希望将其编码为

```
<input type="checkbox" name="foo" style="appearance: radio"> 
```

但是，该`radio`值现在被定义为[compat-auto](https://developer.mozilla.org/en-US/docs/Web/API/Element/keydown_event)类型，被视为`auto`，即没有视觉变化。看来以后这里不会有[什么进展](https://wiki.csswg.org/spec/css4-ui#appearance)了。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2016-05-09T04:31:02.313

封装在一个插件中

限制：

1.  需要表单元素
2.  以编程方式更改单选按钮时必须触发点击事件

```
(function($) {
  $.fn.uncheckableRadio = function() {
    var $root = this;
    $root.each(function() {
      var $radio = $(this);
      if ($radio.prop('checked')) {
        $radio.data('checked', true);
      } else {
        $radio.data('checked', false);
      }

      $radio.click(function() {
        var $this = $(this);
        if ($this.data('checked')) {
          $this.prop('checked', false);
          $this.data('checked', false);
          $this.trigger('change');
        } else {
          $this.data('checked', true);
          $this.closest('form').find('[name="' + $this.prop('name') + '"]').not($this).data('checked', false);
        }
      });
    });
    return $root;
  };
}(jQuery));

$('[type=radio]').uncheckableRadio();
$('button').click(function() {
  $('[value=V2]').prop('checked', true).trigger('change').trigger('click');
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<form>
  <label><input name="myRadio" type="radio" value="V1" /> R1</label>
  <label><input name="myRadio" type="radio" value="V2" /> R2</label>
  <label><input name="myRadio" type="radio" value="V3" /> R3</label>
  <button type="button">Change R2</button>
</form>
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2014-06-06T18:38:34.093

`getElementsByName( ' ' );`由于单选按钮主要用于组中，因此在您的脚本标签中获取它们要容易得多。这将返回一个数组，在每个数组子节点上放置一个事件监听器并设置检查状态。看看这个样本。

```
var myRadios = document.getElementsByName('subscribe');
var setCheck;
var x = 0;
for(x = 0; x < myRadios.length; x++){

    myRadios[x].onclick = function(){
        if(setCheck != this){
             setCheck = this;
        }else{
            this.checked = false;
            setCheck = null;
    }
    };

} 
```

[本指南解释了代码如何与可视化演示一起工作。](http://www.techmips.com/radio-buttons-complete-solution-build-style-and-unchecking-javascript-tweak/)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-10-22T15:48:31.120

虽然它是用 javascript 来询问的，但 jquery 的适应是微不足道的......使用这种方法，您可以检查“null”值并传递它......

```
var checked_val = "null";
$(".no_option").on("click", function(){
  if($(this).val() == checked_val){
    $('input[name=group][value=null]').prop("checked",true);
    checked_val = "null";
  } else {
    checked_val = $(this).val();
  }
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<input type="radio" name="group" class="no_option" value="0">option 0<br>
<input type="radio" name="group" class="no_option" value="1">option 1<br>
<input type="radio" name="group" class="no_option" value="2">option 2<br>
<input type="radio" name="group" class="no_option" value="3">option 3<br>
<input type="radio" name="group" class="no_option" value="4">option 4<br>
<input type="radio" name="group" class="no_option" value="5">option 5<br>
<input type="radio" name="group" class="no_option" value="6">option 6<br>
<input type="radio" name="group" class="no_option" value="null" style="display:none">
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-08-14T01:32:12.713

老问题，但人们一直来自谷歌，OP 最好在没有 jQuery 的情况下询问，所以这是我的镜头。

甚至应该在 IE 9 上工作

```
// iterate using Array method for compatibility
Array.prototype.forEach.call(document.querySelectorAll('[type=radio]'), function(radio) {
	radio.addEventListener('click', function(){
		var self = this;
		// get all elements with same name but itself and mark them unchecked
		Array.prototype.filter.call(document.getElementsByName(this.name), function(filterEl) {
			return self !== filterEl;
		}).forEach(function(otherEl) {
			delete otherEl.dataset.check
		})

		// set state based on previous one
		if (this.dataset.hasOwnProperty('check')) {
			this.checked = false
			delete this.dataset.check
		} else {
			this.dataset.check = ''
		}
	}, false)
})
```

```
<label><input type="radio" name="foo" value="1"/>foo = 1</label><br/>
<label><input type="radio" name="foo" value="2"/>foo = 2</label><br/>
<label><input type="radio" name="foo" value="3"/>foo = 3</label><br/>
<br/>
<label><input type="radio" name="bar" value="1"/>bar = 1</label><br/>
<label><input type="radio" name="bar" value="2"/>bar = 2</label><br/>
<label><input type="radio" name="bar" value="3"/>bar = 3</label><br/>
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-03-08T07:51:04.730

我来这里是因为我有同样的问题。我想向用户展示这些选项，同时将选项留空。尽管可以使用会使后端复杂化的复选框来显式编码。

让用户 Control+click 几乎与让他们通过控制台取消选中它一样好。抓住 mousedown 为时过早，而 onclick 为时已晚。

好吧，终于有一个解决方案了！只需将这几行放在页面上一次，您就可以为页面上的所有单选按钮制作它。您甚至可以摆弄选择器来自定义它。

```
window.onload = function() {
  document.querySelectorAll("INPUT[type='radio']").forEach(function(rd) {
    rd.addEventListener("mousedown", function() {
      if(this.checked) {
        this.onclick=function() {
          this.checked=false
        }
      } else {
        this.onclick=null
      }
    })
  })
}
```

```
<input type=radio name=unchecksample> Number One<br>
<input type=radio name=unchecksample> Number Two<br>
<input type=radio name=unchecksample> Number Three<br>
<input type=radio name=unchecksample> Number Four<br>
<input type=radio name=unchecksample> Number Five<br>
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-04-23T20:12:28.483

我就是这样来的：

```
function uncheck_radio_before_click(radio) {
    if(radio.prop('checked'))
        radio.one('click', function(){ radio.prop('checked', false); } );
}
$('body').on('mouseup', 'input[type="radio"]', function(){
    var radio=$(this);
    uncheck_radio_before_click(radio);
})
$('body').on('mouseup', 'label', function(){
    var label=$(this);
    var radio;
    if(label.attr('for'))
        radio=$('#'+label.attr('for')).filter('input[type="radio"]');
    else
        radio=label.children('input[type="radio"]');
    if(radio.length)
        uncheck_radio_before_click(radio);
}) 
```

[http://jsfiddle.net/24vft2of/2/](http://jsfiddle.net/24vft2of/2/)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-05-11T08:14:41.093

在单选按钮对象创建代码中包括以下三行：

```
 obj.check2 = false;    // add 'check2', a user-defined object property
  obj.onmouseup = function() { this.check2 = this.checked };
  obj.onclick = function() { this.checked = !this.check2 }; 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-07-19T13:33:22.653

纯 JavaScript 中的完整示例：

```
box.onmouseup = function() {
  var temp = this.children[0];
  if (temp.checked) {
    setTimeout(function() {
      temp.checked = false;
    }, 0);
  }
}
```

```
<label id='box' style='margin-right: 1em;'>
  <input type='radio' name='chk_préf_méd_perso' value='valeur'>
  libellé
</label>
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-11-25T10:59:53.073

我很惊讶没有人发布这个**不使用任何 JavaScript的“***巧妙*”版本，它只使用 CSS。

 **```
#radio1 {
    display: none;
}

#wrapper {
    /* NOTE: This wrapper div is not needed provided you can position the label for #radio1 on top of #radio2 using some other technique. */
    position: relative;
}

#radio1:not(:checked) ~ * label[for="radio1"] {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
}
#radio1:checked ~ * label[for="radio1"] {
    display: none;
}

/* Non-essential styles: */ 

label[for],
label:not([for="radio1"]) {
    cursor: pointer;
    border-radius: 7px;
}
label[for]:hover + label,
label:not([for="radio1"]):hover {
    background-color: #ccc;
}
```

```
<input type="radio" name="group1" id="radio1" checked="checked"  />

<p>Look mum, <strong>no JavaScript!</strong></p>

<div id="wrapper">
    <label for="radio1"></label>
    <label>
        <input type="radio" name="group1" id="radio2" />
        You can toggle me on and off!
    </label>
</div>
```

* * *

### 解释：

*   `#radio1`( `<input type="radio" id="radio2" />`) 总是隐藏的。
*   将 CSS`:checked`和`:not(:checked)`伪类选择器与同级选择器 ( `+`and `~`) 一起使用允许其他元素的样式受到影响，具体取决于是否选中 `<input type="checkbox" />`或。`<input type="radio" />`
    *   因此，何时`#radio1`未**选中**（或何时`#radio2`选中）会导致 a`<label>`覆盖在该标签的顶部`#radio2`并且*该*标签具有`for="radio1"`，因此单击它将导致`#radio1`被选中，而不是`#radio2`.
    *   **重要警告**：CSS 的兄弟选择器规则仅允许选择器根据其祖先和其祖先*更早的兄弟*选择元素。因此，您不能根据其祖先的任何*其他*后代设置元素的样式。
        *   当支持 CSS4 的选择器功能时，此限制将被删除，`:has()`但截至 2020 年 11 月，只有 PrinceXML 支持`:has()`，由于实施困难，目前看起来`:has()`将完全从 CSS4 中删除。

* * *

这种方法可以扩展以支持多个单选按钮：

```
#uncheckAll {
    display: none;
}

#uncheckAll:checked ~ * label[for="uncheckAll"] {
    display: none;
}

label {
    cursor: pointer;
}

label:not([for]) {
    position: relative;
}

label[for="uncheckAll"] {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
}

input[name="group1"]:not(:checked) + label[for="uncheckAll"] {
    display: none;
}
```

```
<input type="radio" name="group1" id="uncheckAll" checked="checked"  />

<label>
    <input type="radio" name="group1" id="radio2" />
    <label for="uncheckAll"></label>
    You can toggle me on and off!
</label>

<label>
    <input type="radio" name="group1" id="radio3" />
    <label for="uncheckAll"></label>
    And me!
</label>

<label>
    <input type="radio" name="group1" id="aragorn" />
    <label for="uncheckAll"></label>
    And my sword!
</label>

<label>
    <input type="radio" name="group1" id="gimli" />
    <label for="uncheckAll"></label>
    And my axe!
</label>
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-06-15T16:31:26.513

扩展 user3716078 的答案以允许多个独立的单选按钮组以及将事件侦听器分配给多个元素的更简洁的方式......

```
window.onload = function() {

    var acc_checked=[];

    [].slice.call(document.querySelectorAll('.accordion input[type="radio"]')).forEach(function(el,i){
        /**
         * i represents the integer value of where we are in the loop
         * el represents the element in question in the current loop
         */
        el.addEventListener('click', function(e){

            if(acc_checked[this.name] != this) {
                acc_checked[this.name] = this;
            } else {
                this.checked = false;
                acc_checked[this.name] = null;
            }

        }, false);

    });

} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-07-24T02:14:10.750

我会尝试用 3 个单选按钮做一个小答案，你可以稍后添加东西。

```
const radios = Array.from(document.getElementsByClassName('radio'))

for(let i of radios) {
    i.state = false

    i.onclick = () => {
        i.checked = i.state = !i.state

        for(let j of radios)
            if(j !== i) j.checked = j.state = false
    }
}
```

```
<input class="radio" type="radio">X
<input class="radio" type="radio">Y
<input class="radio" type="radio">Z
```

这适用于单一形式。如果您有多个带有 class="radio" 的表单，那么一旦您单击一个单选按钮，其他的就会被禁用。如果这是您想要的，请使用它。

* * *

现在我想在我的 rails 项目上实现这个，它有多个表单（取决于，从数据库中获取），每个表单都有 2 个可见的单选按钮 + 1 个隐藏的单选按钮。

我希望用户选择/取消选择每个表单的单选按钮。并且在表单上选择一个不应取消选择另一个表单上的另一个选定按钮。所以我宁愿这样做：

```
var radios = Array.from(document.getElementsByClassName('radio'))

for (let i of radios) {
  i.state = false

  i.onclick = () => {
    i.checked = i.state = !i.state

    for (let j of radios)
      if (j !== i) j.state = false
  }
}
```

```
<form>
  <input class="radio" name="A" type="radio">A
  <input class="radio" name="A" type="radio">B
  <input class="radio" name="A" type="radio">C
</form>

<form>
  <input class="radio" name="A" type="radio">D
  <input class="radio" name="A" type="radio">E
  <input class="radio" name="A" type="radio">F
</form>

<form>
  <input class="radio" name="SOMETHING" type="radio">G
  <input class="radio" name="SOMETHING" type="radio">H
  <input class="radio" name="SOMETHING" type="radio">I
</form>
```

您会看到它们都具有相同的名称，但它们采用不同的形式，按 3 分组，因此这适用于多种形式。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2021-07-23T20:53:35.287

我知道已经很晚了（现在甚至没有必要），这里有很多解决方案，但是我找不到任何特定于所问问题的解决方案，或者对于这个简单的场景，其中有太多代码，在寻找时可以轻松忽略它答案。

所以在这里，我提出我的解决方案，因为它可能对任何新手都有帮助。这个想法很简单，只是

*   **在我的情况下，它的“切换”在所需的切换上**设置相同的类****
***   获取鼠标悬停动作**切换的当前值***   **反转**切换值。**

 **通过这种方式，您可以选择任何切换或完全忽略它们，但再次单击已选择的切换。您还可以使用给定的代码段对此进行测试。

```
var val;
$('.toggles').mouseup(function(){
  val = this.checked
}).click(function(){
  this.checked = val == true ? false : true
})
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div class="form-group">
    <input class="toggles form-check-input" type="radio" value="true" name="enabled" id="enabled_true">
    <label class="form-check-label" for="enabled_true">Enabled</label>
    <input class="toggles form-check-input" type="radio" value="false" name="enabled" id="enabled_false">
    <label class="form-check-label" for="enabled_false">Disabled</label>
</div>
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-11-02T16:41:38.997

大多数现代浏览器都`checked="anything"`认为`checked="true"`.

如果这对您的情况有意义，您可能必须删除选中的属性，其中之一可能与您加载页面的时间有关。

```
$(this).removeAttr('checked') 
```

如果您希望根据某些条件检查单选按钮，这可能会对您有所帮助。您可以简单地删除该属性来实现这一点。

PS：在所有情况下都没有帮助。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-11-06T11:07:32.697

这是普通 JS 的方式，它`onchange`和`onclick`事件相结合（`onchange`用于检查而`onclick`取消检查）。

```
document.querySelector("input").onchange = function() {
    this.onclick = function() {
        this.checked = false;
        this.onclick = null;
    }
}; 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-11-18T07:53:36.090

如果您正在寻找 jQuery 中的解决方案，这里就是。它类似于[这个](https://stackoverflow.com/a/57487114/8635907)

```
 $('input:radio').click(function() { 
      let name = $(this).attr('name');
      let self = $(this);
      [].filter.call($(`input[name=${name}]`), function(ele){
        return self[0] !== $(ele)[0];
      }).forEach(function(otherEle){
        $(otherEle).removeAttr('data-check');
      });

      if($(this).attr('data-check')){
        $(this).prop("checked", false);
        $(this).removeAttr('data-check');
      }else{
        $(this).attr("data-check", "1");
      }
    });
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<form>
  <input class="radio" name="A" type="radio">A
  <input class="radio" name="A" type="radio">B
  <input class="radio" name="A" type="radio">C
</form>

<form>
  <input class="radio" name="B" type="radio">D
  <input class="radio" name="B" type="radio">E
  <input class="radio" name="B" type="radio">F
</form>

<form>
  <input class="radio" name="C" type="radio">G
  <input class="radio" name="C" type="radio">H
  <input class="radio" name="C" type="radio">I
</form>
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-09-10T19:00:17.687

此 javascript 有助于取消选择文档中的每个收音机：

```
function toggleRadio(event)
{
    if(event.target.type === 'radio' && event.target.checked === true)
    {
        setTimeout(()=>{ event.target.checked = false; },0);
    }
}
document.addEventListener('mouseup', toggleRadio);
```

```
body { font-size: .55em; }
table { border-collapse: collapse; margin: 0 auto; }
td, th { border: 1px solid #333333; }
td:first-child { padding: 0 0.7em; }
#scale { font-weight:bold; text-align:center; }
```

```
<p id="scale">
  5 = Excellent | 4 = Satisfactory | 3 = About Average | 2 = Unsatisfactory | 1 = Very Poor
</p>
<table>
  <thead>
    <tr>
      <th>&nbsp;</th> <th>5</th> <th>4</th> <th>3</th> <th>2</th> <th>1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>How do rate the default behavior of radios inputs in HTML?</td>
      <td><input type="radio" name="r1" value="5" required></td>
      <td><input type="radio" name="r1" value="4"></td>
      <td><input type="radio" name="r1" value="3"></td>
      <td><input type="radio" name="r1" value="2"></td>
      <td><input type="radio" name="r1" value="1"></td>
    </tr>
    <tr>
      <td>How do rate this code's ability to deselect radios?</td>
      <td><input type="radio" name="r2" value="5" required></td>
      <td><input type="radio" name="r2" value="4"></td>
      <td><input type="radio" name="r2" value="3"></td>
      <td><input type="radio" name="r2" value="2"></td>
      <td><input type="radio" name="r2" value="1"></td>
    </tr>
  </tbody>
</table>
```

**这种方法的优点：**

1.  取消选择是通过单击当前选择的单选来实现的。
2.  代码不需要任何 DOM 搜索来获取单选元素。
3.  页面加载后以编程方式添加到文档的单选输入也将是可取消选择的。
4.  只创建一个事件侦听器来服务所有无线电（而不是每个无线电一个）。
5.  代码可以在页面加载之前或之后运行，它仍然可以正常工作。

[此处](https://ux.stackexchange.com/a/140978)讨论了此代码的用户体验注意事项。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-09-15T10:18:45.303

我遇到了这个问题，我的解决方案相当简单，我只是将它们变成了复选框，当一个复选框被切换时，我取消选择了组中的所有其他复选框。

我知道它有点 hacky，并且具有很大的 O 复杂度（虽然 n 很小），但它确实有效！（待办事项：为变量考虑更多原始名称）

```
$(document).ready(function() {
  $("input[name=days]").each((_, el) => {
    el.addEventListener("click", function () {
      $("input[name=days]").each((_, myEl) => {
        if (el != myEl) {
          myEl.checked = false;
        }
      });
      // Do other stuff
    });
  });
});
```

```
.radio-selector {
  display: inline-flex;
  flex-wrap: wrap;
  vertical-align: top;
  justify-content: center;
  align-items: center;
  margin: 0 auto;
  border: 0;
}
.radio-selector input {
  position: absolute !important;
  clip: rect(0, 0, 0, 0);
}
.radio-selector label {
  margin: 0 1rem 1rem 0;
  padding: 0.75rem 1rem;
  min-width: 10rem;
  font-size: 1.6rem;
  border-radius: 2rem;
  text-align: center;
  color: #333;
  border: 1px solid #333;
  transition: all 0.3s ease-in-out;
}
.radio-selector label:hover {
  background-color: lightpink;
  cursor: pointer;
}
.radio-selector input:checked + label {
  color: white;
  background-color: purple;
  border: 1px solid transparent;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<fieldset class="radio-selector">
  <input type="checkbox" id="day-1" name="days" value="1" />
  <label for=day-1 class="radio-btn">+- 1 day</label>
  <input type="checkbox" id="day-3" name="days" value="3" />
  <label for=day-3 class="radio-btn">+- 3 days</label>
  <input type="checkbox" id="day-7" name="days" value="7" />
  <label for=day-7 class="radio-btn">+- 7 days</label>
</fieldset>
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2022-03-06T04:35:01.293

对不起，如果我的答案已经得到回答，但老实说，我很快就读完了，因为有很多

我不是很熟练，但我想我找到了一种非常简单的方法来取消选中已选中的单选按钮，只需再次单击它......只需使用全局变量、一个小函数和 onclick 事件

```
<script>
  var lastChecked = null;

  function unckeck(myRadio)
  {
    if ( lastChecked == myRadio )
    {
      lastChecked = null;
      myRadio.checked = false;
    }
    else
      lastChecked = myRadio;
  }
</script>

<form>
  <input type='radio' name='someCommonName' value='foo' onclick='uncheck(this)'/> foo <br/>
  <input type='radio' name='someCommonName' value='bar' onclick='uncheck(this)'/> bar <br/>
  <input type='radio' name='someCommonName' value='baz' onclick='uncheck(this)'/> baz <br/>
</form> 
```

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2012-06-04T06:16:16.810

您可以使用`checked`单选按钮的属性来取消选中它。

像这样的东西：

```
<script>
 function uncheck()
 {
  document.getElementById('myRadio').checked = false;        
 }
 function check()
 {
  document.getElementById('myRadio').checked = true;        
 }
</script>
<input id="myRadio" type="radio" checked="checked"/>
<button onclick="uncheck();">Uncheck</button>
<button onclick="check();">Check</button> 
```

在这里查看实际操作：http: [//jsfiddle.net/wgYNa/](http://jsfiddle.net/wgYNa/)

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2012-06-04T06:25:09.607

完整的代码看起来像这样

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<input name="radio" type="radio" id="myRadio" value="myRadio" checked="checked"     onclick="setRadio(this)" />
<label for="myRadio"></label>

<script language="javascript">
function setRadio(obj) 
{
    obj.checked = false;
}
</script>
</body>
</html> 
```

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2013-03-18T17:01:25.537

这是一个可以说是取消选中单选按钮而不是进行新选择的示例。我有一本字典，可以使用各种索引来选择其条目。通过一组单选按钮选择要使用的索引。但是，如果用户只想浏览，也可以使用“随机输入”按钮。当通过随机输入按钮选择条目时保留索引会产生误导，因此当按下此按钮时，我取消选中所有索引选择单选按钮并将索引框架的内容替换为空白页面.

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2018-01-12T15:53:20.677

如果您使用 Iclick 插件，它就像您在下面看到的一样简单。

```
 $('#radio1').iCheck('uncheck'); 
```

* * *

## 回答 #27

> 赞同：-1
> 
> 时间：2018-09-24T20:03:13.540

不幸的是，它在 Chrome 或 Edge 中不起作用，但它在 FireFox 中起作用：

```
$(document)
// uncheck it when clicked
.on("click","input[type='radio']", function(){ $(this).prop("checked",false); })
// re-check it if value is changed to this input
.on("change","input[type='radio']", function(){ $(this).prop("checked",true); }); 
```

* * *

## 回答 #28

> 赞同：-1
> 
> 时间：2019-08-22T08:52:13.173

对 Shmili Breuer 答案的无错误更新。

```
(function() {
    $( "input[type='radio'].revertible" ).click(function() {
        var $this = $( this );

        // update and remove the previous checked class
        var $prevChecked = $('input[name=' + $this.attr('name') + ']:not(:checked).checked');
            $prevChecked.removeClass('checked');

        if( $this.hasClass("checked") ) {
            $this.removeClass("checked");
            $this.prop("checked", false);
        }
        else {
            $this.addClass("checked");
        }
    });
})(); 
```

* * *

## 回答 #29

> 赞同：-1
> 
> 时间：2020-04-01T07:30:30.470

这几乎对我有用。

```
<input type='radio' name='radioBtn'>
<input type='radio' name='radioBtn'>
<input type='radio' name='radioBtn'>

$(document).on("click", "input[name='radioBtn']", function(){
    thisRadio = $(this);
    if (thisRadio.hasClass("imChecked")) {
        thisRadio.removeClass("imChecked");
        thisRadio.prop('checked', false);
    } else { 
        thisRadio.prop('checked', true);
        thisRadio.addClass("imChecked");
    };
}) 
```

但是如果我检查一个单选按钮，然后检查另一个并尝试再次检查第一个，我必须单击两次。这是因为它具有 imChecked 类。我只需要在验证之前取消选中其他单选按钮。

添加此行使其工作：

$("input[name='radioBtn']").not(thisRadio).removeClass("imChecked");

```
<input type='radio' name='radioBtn'>
<input type='radio' name='radioBtn'>
<input type='radio' name='radioBtn'>

$(document).on("click", "input[name='radioBtn']", function(){
    thisRadio = $(this);
    $("input[name='radioBtn']").not(thisRadio).removeClass("imChecked");
    if (thisRadio.hasClass("imChecked")) {
        thisRadio.removeClass("imChecked");
        thisRadio.prop('checked', false);
    } else { 
        thisRadio.prop('checked', true);
        thisRadio.addClass("imChecked");
    };
}) 
```

* * *

## 回答 #30

> 赞同：-1
> 
> 时间：2020-05-09T10:11:50.270

下面的代码可以解决问题。

```
$('input[type=radio]').click(function() {
        if($(this).hasClass("checked")){
            this.checked = false;
            $(this).removeClass("checked")
        }else{
            $(this).addClass("checked")
        }
    });
```

* * *

## 回答 #31

> 赞同：-1
> 
> 时间：2020-06-03T05:30:29.623

假设您有一个按钮，在单击它时，您可以将所有单选按钮选择设置为 false。您可以在 onclick 处理程序中编写以下代码。
下面的代码采用基于类名的单选按钮，并且对于每个元素，它会将其标记为 false。

```
var elements=document.getElementsByClassName('Button');

Array.prototype.forEach.call(elements, function(element) {
  element.checked = false;
}); 
```****

# php - 如何将变量从 Joomla 控制器传递到模型？

> ID：10876955
> 
> 赞同：0
> 
> 时间：2012-06-04T06:05:48.237
> 
> 标签：php, joomla, joomla2.5

我试图找到有关它的信息。仍然没有办法做到这一点，知道怎么做吗？

ps 我在 Joomla 2.5 上工作，创建一个 MVC 组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:04:34.363

尝试使用类似这样的东西。

```
$model = $this->getModel('mymodel');
$item=$model->filterSection($variable); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:09:40.540

getModel 在 JController 类中定义。代替

```
$this->getModel('yourmodel'); 
```

尝试

```
parent::getModel('yourmodel'); 
```

向我们展示您的代码，然后我们可以快速找到问题。

# php - 验证表单 wordpress

> ID：10876956
> 
> 赞同：0
> 
> 时间：2012-06-04T06:05:50.420
> 
> 标签：php, wordpress, validation

我无法验证在 wordpress 中发布的此表单，发送提交变为空白且未显示错误

**广告post.php**

```
<?php
/*
Template Name: Publicar Post
*/
$wpdb->hide_errors(); 
nocache_headers();
global $userdata;
get_currentuserinfo(); // grabs the user info and puts into vars
require_once dirname( __FILE__ ) . '/post-process.php';
 get_header(); ?>
        <div id="page">
            <div class="categories">
                <h2 style="border: 1px solid #ccc; border-bottom: none; background: url(<?php echo csp_images_url; ?>/sprite.png) left -738px repeat-x;text-align:center; padding-top: 5px; margin-top: 10px;">Categor&iacute;as</h2>
                <ul id="menu">
                    <?php wp_list_categories('title_li=&orderby=name&exclude='.$category_id.''); ?>
                </ul>
                <?php get_sidebar('o'); ?>
            </div>
            <div class="publish-form">
                <div class="post-form">
                    <h2>Envia tu Anuncio</h2>

                            <div class="box-yellow">
                                La publicaci&oacute;n de avisos es gratuito, sin embargo si usted desea destacar su anuncio o contratar publicidad en lugares estrat&eacute;gicos de la web, por favor <a href="<?php bloginfo('url'); ?>" title="Contacte con Nosotros">p&oacute;ngase en contacto con nosotros</a>, estaremos
                                dispuestos a su disposici&oacute;n. 
                                <?php
                                $ok = classy_filter($_GET['ok']);
                                if ($err != "") { echo "<div id=\"err\" class=\"err\"><a id='closelink' href=\"#\" onClick=\"document.getElementById('err').style.display = 'none';\">X</a>$err</div>"; }

                                if ($ok == "ok") {
                                    echo "<div class=\"ok\"><strong>" . __('Muchas gracias!, su art&iacute;culo ha sido enviado satisfactoriamente.') . "</strong><br />";

                                if ( get_option("post_status") == "publish") { 
                                    echo __('Alguien revisar&aacute; su publicaci&ocute;n en breve. Si usted tiene alguna pregunta, p&oacute;ngase en contacto con el propietario del sitio.') . "<br />";
                                        }
                                    echo "</div>";
                                }
                                ?>
                            </div>

                        <form action="" method="post" enctype="multipart/form-data" id="new_post" name="new_post">
                            <input type="hidden" name="action" value="post" />
                            <?php wp_nonce_field('new-post'); ?>

                            <label for="title" class="post_tags"><?php _e('T&iacute;tulo de la Publicaci&oacute;n'); ?> <span>*</span></label>
                            <input type="text" id="title" class="mid" name="post_title" size="100" maxlength="100" value="<?php echo $_POST['post_title'];?>" style="padding: 5px;" /><br /><br />

                            <label for="cat" class="post_tags">Por favor seleccione una categor&iacute;a <span>*</span>:</label>
                            <?php wp_dropdown_categories('show_option_none=Seleccione una Categoria&hide_empty=0&hierarchical=1&class=adfields&exclude='.$category_id.''); ?>
                            <br /><br />

                            <label for="post_tags">Suba una imagen<br /><br />
                            <small>(Las im&aacute;genes no deben ser mayores de 1MB, los formatos soportados son: jpg, png, gif y jpeg.)</small></label>
                            <input type="file" name="imgs[]" class="wwIconified" style="padding: 5px;" /><br />
                            <br />
                            <label for="description" class="post_tags"><?php _e('Escriba aqu&iacute; la descripci&oacute;n de su Aviso Clasificado'); ?> <span>*</span><br /><small>(Mientras mejor se explique, mejores resultados podr&aacute; obtener).</small></label><br />
                            <?php wp_editor(''. $_POST['content'].'', 'content', $settings ); ?>
                            <div class="clear"></div>
                            <br />

                            <label for="post_tags" class="post_tags">Etiquetas <span>*</span> <small class="mini"><?php _e('(las etiquetas ayuda a mejorar la indexaci&oacute;n de su aviso, sep&aacute;relas con comas)'); ?></small></label>
                            <input type="text" id="post_tags" class="adfields" name="post_tags" size="60" maxlength="100" value="<?php echo $_POST['post_tags']; ?>" style="padding: 5px;" />
                            <br /><br />

                            <label for="price" class="post_tags">Precio <span>*</span></label><br /><br />
                            <p><small>(Es necesario que inserte el monto con su respectivo s&iacute;mbolo; ejm. S/.10.00, $20.00 USD, etc.)</small></p>
                            <input type="text" id="price" class="adfields price" name="price" size="50" maxlength="250" value="<?php echo $_POST['price']; ?>" /><br />
                            <br />
                            <label for="post_tags" class="post_tags">Direcci&oacute;n/Ubicaci&oacute;n <span>*</span></label><br />
                            <input type="text" id="location" class="adfields location" name="location" size="50" maxlength="250" value="<?php echo $_POST['location']; ?>" /><br />
                            <br />                        
                            <label for="post_tags" class="post_tags">Agregar URL <small><?php _e('(i.e. http://www.misitio.com)'); ?></small></label><br />
                            <input type="text" id="addURL" class="adfields url" name="addURL" size="50" maxlength="250" value="<?php echo $_POST['addURL']; ?>" /><br />

                            <label for="post_tags" class="post_tags">Nombre de Contacto <span>*</span></label><br />
                            <input type="text" id="name" class="adfields name" name="name" size="50" maxlength="250" value="<?php echo $_POST['name']; ?>" /><br />

                            <label for="post_tags" class="post_tags">Tel&eacute;fono</label><br />
                            <input type="text" id="phone" class="adfields phone" name="phone" size="50" maxlength="250" value="<?php echo $_POST['phone']; ?>" /><br />

                            <label for="post_tags" class="post_tags">Correo Electr&oacute;nico <span>*</span></label><br />
                            <input type="text" id="email" class="adfields email" name="email" size="50" maxlength="250" value="<?php echo $_POST['email']; ?>" /><br />

                            <input id="submit" type="submit" value="Publicar el Aviso" class="submit_btn" /> 
                        </form>
                        <?php // } //if the form is ok don't display the form anymore ?>
                </div>
            </div>
            <div class="clear"></div>
        </div>
<?php get_footer(); ?> 
```

**后处理.php**

这是处理验证的文件，似乎不起作用

```
<?php
set_time_limit(0);
if (isset($_POST['action']) && $_POST['action'] == 'post') {

if ( get_option("permissions") == "no" ) {
    if ( !is_user_logged_in() ){
        wp_redirect( get_bloginfo( 'url' ) . '/' );
        exit;
    };
}

    check_admin_referer( 'new-post' );
    $err = ""; $ok = "";
    $user_id        = $current_user->user_id;
    $post_title     = classy_filter($_POST['post_title']);
    $post_cat       = (int)classy_filter($_POST['cat']);
    $post_cat_array = array("$post_cat");

    if (isset ($_POST['content'])) { 
        $content = trim($_POST['content']); 
    } else { 
        echo 'Please enter the content'; 
    }

    //$title        = classy_filter($_POST['title']);
    $post_tags      = classy_filter($_POST['post_tags']);
    $addURL         = classy_filter($_POST['addURL']);
    $location       = classy_filter($_POST['location']);
    $price          = classy_filter($_POST['price']);
    $name           = classy_filter($_POST['name']);
    $phone          = classy_filter($_POST['phone']);
    $email          = classy_filter($_POST['email']);

    $imgs = strip_tags($_POST['imgs']);

    if ( $post_cat == "-1") {
        $err .= __('Por favor seleccione una categor&iacute;a') . "<br />";
    } else {
        global $wpdb;
        $cat_ids = (array) $wpdb->get_col("SELECT `term_id` FROM $wpdb->terms");
        if ( !in_array($post_cat, $cat_ids) && $post_cat != "-1") {
            $err .= __('La categor&iacute;a Seleccionada no Existe') . "<br />";
        }
    }

    if ($post_title == "" || $post_cat == "" || $post_tags == "" || $price == "" || $location == "" || $name == "") {
        $err .= __('Por favor llene los campos marcados como obligatorios *') . "<br />";
    }

    if ( !check_email($email) ) {
        $err .= __('Por favor ingrese un Correo Electr&oacute;nico V&aacute;lido') . "<br />";
    }

    if ( $total != $nr1nr2 ) {
        $err .= __('Los datos ingresados en el captcha son incorrectos') . "<br />";
    }

    if ( $err == "" ) {

//imgs
   //1024 bytes = 1kb
   //1024000 bytes = 1mb
   $image_folder_name = "imgs";
   $size_bytes = 1024000;
   $size_mb = $size_bytes / 1024000;
   $limitedext = array(".gif",".png",".jpg",".jpeg",".bmp");

        // http://codex.wordpress.org/Function_Reference/wp_upload_dir
        $upload_arr = wp_upload_dir();
        $dir_to_make = trailingslashit($upload_arr['basedir']) . $image_folder_name;
        // $dir_to_make = "wp-content/uploads/imgs";
        $image_baseurl = trailingslashit($upload_arr['baseurl']) . $image_folder_name;
        $image_name = substr(sanitize_title(alphanumericAndSpace($post_title)), 0, 20);

        $i = rand();
        $imgs = "";
        $err2 = "";

        while(list($key,$value) = each($_FILES['imgs']['name'])) {
            if(!empty($value)) {
                $filename = strtolower($value);
                $filename = str_replace(" ", "-", $filename);
                //get image extension
                $tipul = strrchr($filename,'.');
                $filename = $image_name."-$i".$tipul;
                $add = "$dir_to_make/$filename";
                $image = "$image_baseurl/$filename";
                //$add = "$filename";

           //Make sure that file size is correct
                $file_size = $_FILES['imgs']['size'][$key]; //getting the right size that coresponds with the image uploaded
                if ($file_size == "0"){
                    $err2 .= __('El archivo $value tiene 0 bytes.') . "<br />";
                } else {
                    if ($file_size > $size_bytes){
                        $err2 .= __('El archivo $value es mayor de 5MB.') . "<br />";
                    }
                }
                //check file extension
                $ext = strrchr($filename,'.');
                if ( (!in_array(strtolower($ext),$limitedext)) ) {
                    $err2 .= __('El archivo $value no es una imagen v&aacute;lida.') . "<br />";
                }

                //echo $_FILES['archive']['type'][$key];
                if ( $err2 == "" ) {
                    if (!file_exists($dir_to_make)) { mkdir($dir_to_make, 0777); }
                    copy($_FILES['imgs']['tmp_name'][$key], $add);
                    chmod("$add",0777);

                    //$imgs .= get_option('home')."/".$add.",";
                    $imgs .= $image . ",";

                }
                $err2 = "";
                $i++;
            }//if empty $value
        }//end while

        $post_code = time();
        $post_status = "publish";   

        $post_id = wp_insert_post( array(
            'post_title'    => $post_title,
            'post_content'  => $content,
            'post_category' => $post_cat_array,
            'post_status'   => $post_status,
            'tags_input'    => $post_tags
        ) );
        add_post_meta($post_id, 'imgs', $imgs, true);
        add_post_meta($post_id, 'addURL', $addURL, true);
        add_post_meta($post_id, 'location', $location, true);
        add_post_meta($post_id, 'price', $price, true);
        add_post_meta($post_id, 'name', $name, true);
        add_post_meta($post_id, 'phone', $phone, true);
        add_post_meta($post_id, 'email', $email, true);

        $ok = "ok";

            wp_redirect( get_bloginfo( 'url' ) . '/' );
        }
        exit;
    }

?> 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T06:13:17.943

尝试改变：

```
<form action="" method="post" enctype="multipart/form-data" id="new_post" name="new_post"> 
```

至：

```
<form action="post-process.php" method="post" enctype="multipart/form-data" id="new_post" name="new_post"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-01T02:01:34.017

你有一个额外的; 在你的第一行

```
set_time_limit(0);
if (isset($_POST['action']) && $_POST['action'] == 'post') {

if ( get_option("permissions") == "no" ) {
    if ( !is_user_logged_in() ){
        wp_redirect( get_bloginfo( 'url' ) . '/' );
        exit;
    };   <----------------------------Get rid of this SemiColon
} 
```

[http://phpcodechecker.com/](http://phpcodechecker.com/)检查您的代码，即使使用 ; 也没有错误。但我会先去做。

# actionscript-3 - AS3：通过代码进行反锯齿动画

> ID：10876957
> 
> 赞同：0
> 
> 时间：2012-06-04T06:05:53.007
> 
> 标签：actionscript-3, antialiasing

那么高级抗锯齿中有哪些参数接近Flash IDE中的“动画”预设呢？

我需要为一堆文本（平移和旋转）设置动画，并且设置锐度和厚度似乎对子像素渲染没有帮助......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T06:36:36.910

我想你是为了[`.gridFitType`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#gridFitType)财产。

> 用于此文本字段的网格拟合类型。仅当文本字段的 flash.text.AntiAliasType 属性设置为 时，此属性才适用`flash.text.AntiAliasType.ADVANCED`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T06:36:30.567

当我使用锐度时，我几乎总是将其设置为最大值 255。

我建议您将 TextField 绘制到 BitmapData 对象，然后旋转 BitmapData。

```
 var myTextHolder:BitmapData = new BitmapData(myText.width,myText.height,true,0x00000000); 
```

myTextHolder.draw(myText);

如果你想让文本非常清晰，我建议：

1.  创建两倍于您需要的文本
2.  把它放在一个位图数据中
3.  在每一帧上，旋转位图数据
4.  然后将位图数据缩小到正常大小
5.  在屏幕上绘制结果

我相信您可以使用 Matrix 类来执行您需要的所有操作 - 平移、旋转和缩放。

# android - 如何从字符串显示图片

> ID：10876958
> 
> 赞同：0
> 
> 时间：2012-06-04T06:05:59.520
> 
> 标签：android, imageview, image

我的图片有问题。我有一张图片`picture=sites/default/files/arrow_green_right_0.png`。在我的应用程序中，我只得到这个字符串。我想在我的 imageView 中显示来自这个字符串的图片。我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T06:14:15.150

您好您必须先设置图像的路径，并确保您处理它以防止它崩溃。请遵循以下代码：-

```
File imgFile = new  File(“/sdcard/Images/test_image.jpg”);
 if(imgFile.exists()){

Bitmap myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());

ImageView myImage = (ImageView) findViewById(R.id.imageviewTest);
myImage.setImageBitmap(myBitmap);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T06:17:41.597

尝试这个：

```
ImageView img = new ImageView(this);
File file = new File(YOUR PATH TO THE IMAGE);
if (file.exists()) {
   img.setImageURI(Uri.fromFile(file));
} 
```

# android - 下载管理器android中的错误

> ID：10876959
> 
> 赞同：5
> 
> 时间：2012-06-04T06:06:06.663
> 
> 标签：android, download, onresume, download-manager

使用 Android 下载管理器我试图同步实现多个 pdf 文件的下载（即，在成功完成上一个请求后生成请求的实例），在广播接收器中的 DOWNLOAD_SUCCESS 通知之后不久，相同的副本生成请求（具有相同的请求 id）并隐式启动 DownlaodManager。第二次下载失败，DownlaodManager 给出 DownloadManager.status = ERROR CANNOT RESUME.因此，未下载 pdf。仅当我尝试同步时才会发生这种情况多次下载。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T05:51:33.663

我注意到，如果您在当前完成后立即开始另一个下载，则会发生此错误。所以，我通过在完成和下一次下载开始之间在当前线程中插入睡眠时间来解决这个问题......我使用了 Thread.sleep(1000)，但你可以尝试其他值。（确保您没有在 UIThread 中执行此操作）。对我很好；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T19:39:01.327

您是否在三星设备上运行您的应用程序？我对 Nexus S、Galaxy Tab 10.1 和一个我不记得的名字（他们有 Android 版本 2.3.6、3.2 和 4.0.4）有同样的问题，但在 HTC Nexus One、HTC Sensation (4.0.x ) 和 HTC Explorer (2.3.5) 或模拟器。

我有这个后果：

```
06-05 17:42:26.756: INFO/DownloadManager(12113): Initiating request for download 1551
06-05 17:42:27.057: INFO/ololo(17021): Status for content://downloads/my_downloads/1551: file exists
06-05 17:42:27.137: INFO/DownloadManager(12113): Initiating request for download 1551
06-05 17:42:27.197: WARN/DownloadManager(12113): Aborting request for download 1551: Trying to resume a download that can't be resumed
06-05 17:42:27.247: WARN/ImageView(17021): Unable to open content: content://downloads/my_downloads/1551 
```

我认为这是一个非常有趣的问题。

[有人](http://code.google.com/p/android/issues/detail?id=18462)说这是三星和其他一些厂商的问题。我的解决方案是实现我自己的 DownloadManager 或使用别人的。

# sql-server-2008 - 为什么存储过程不返回阿拉伯文本匹配值

> ID：10876960
> 
> 赞同：1
> 
> 时间：2012-06-04T06:06:12.663
> 
> 标签：sql-server-2008, stored-procedures

我正在尝试使用存储过程从 SQL Server 2008 数据库中获取阿拉伯语匹配值。但它不返回匹配的值.. 为什么？

我的桌子设计是这样的：

```
CREATE TABLE #test1
(
col1 nVARCHAR(100)  ,
col2 nVARCHAR(100)  ,
col3 NVARCHAR(100)
)

INSERT INTO #test1 VALUES(N'لا أتكلم العربية',N'لا أتكلم العربية',N'لا أتكلم العربية')
INSERT INTO #test1 VALUES( ' fdfdf', 'dfdfdf', '45dfdf')

SELECT * FROM #test1 
```

它很好地显示了下面的结果......

```
col1    col2    col3
لا أتكلم العربية    لا أتكلم العربية    لا أتكلم العربية
 fdfdf  dfdfdf  45dfdf 
```

在我搜索阿拉伯语单词时，给定的查询给出了确切的结果..

```
declare @ColVal nvarchar(100)

 set @ColVal=   N'لا أتكلم العربية'
print @ColVal
select * from #test1 where col2 like @ColVal 
```

但是当我尝试使用存储过程检索相同的数据时，即使它们存在于表中，它也不再显示匹配的行。

我的存储过程是

```
create proc Sp_TestArabic1 (@colValue nvarchar(100))
as
declare @ColVal nvarchar(100)
begin
set @ColVal=  'N'+@colValue
print @ColVal
select * from #test1 where col2 like @ColVal
end

exec Sp_TestArabic1 'لا أتكلم العربية' 
```

没有给出任何结果，我尝试调试存储过程，所有列都很好地传递了值，但它没有返回正确的结果..

请提供根据条件搜索阿拉伯语单词的确切解决方案...

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T06:13:18.137

您在指定 unicode 文字的方式上有几个问题 - 在传递给 proc 的常量上执行此操作，并且不要在搜索前添加“N”，否则它将查找`'Nلا أتكلم العربية'`

```
CREATE  proc Sp_TestArabic1 (@colValue nvarchar(100))
as
  begin
    select * from #test1 where col2 like @colValue
  end

exec Sp_TestArabic1 N'لا أتكلم العربية' 
```

出于兴趣，在 SQL 2008 intellisense 中使用阿拉伯文本上的箭头键被颠倒了 - 非常奇怪:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T06:59:17.420

利用

```
exec Sp_TestArabic N'لا أتكلم العربية' 
```

不是

```
exec Sp_TestArabic 'لا أتكلم العربية' 
```

# java - 为什么 Slick 给我这个关于 PNG 数据的警告？

> ID：10876968
> 
> 赞同：1
> 
> 时间：2012-06-04T06:07:28.367
> 
> 标签：java, image, png, slick2d

我在控制台中收到此警告：

```
WARN:class org.newdawn.slick.opengl.PNGImageData failed to read the data 
```

在 png 文件之间切换后，似乎出现了警告，因为我使用的是 16 位 PNG 图像。为什么是这样？我应该忽略它并坚持使用 16 位还是使用 8 位？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:36:13.327

对于那些在谷歌上搜索这个错误的人（就像我一样），我的回答是我的 PNG 是交错的。它们仍会加载，但会显示上述错误。简短的回答，当您保存图像编辑器（我使用的是 Photoshop CS6）时，将交错切换为无。

# java - 检查预定义的字符串值 Hibernate Validator

> ID：10876969
> 
> 赞同：0
> 
> 时间：2012-06-04T06:07:41.913
> 
> 标签：java, hibernate, validation, spring-mvc, hibernate-validator

我正在尝试在我的 Spring MVC 应用程序中使用 Hibernate Validator 验证我的表单数据。我有一个要求，我需要检查用户输入的预定义值，这些值在系统中是不允许的。

例如，如果 firstName 字段的值为 firstName，我想验证失败并告诉用户该值是不允许的。

谁能告诉我如何使用休眠验证来实现这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T06:12:32.630

您可以创建一个自定义验证器来实现`ConstraintValidator`. 请阅读此链接： [Hibernate 验证器](http://java.dzone.com/articles/using-hibernate-validator)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T08:18:24.557

您还可以`@Pattern`在字段声明之上使用注释。使用此注释，您需要指定将与用户输入的值匹配的 java 正则表达式模式，如果失败，您可以在 jsp 中向用户显示正确的验证消息。

希望这对您有所帮助。干杯。

# iphone - 如何管理 Zip 文件以在 iphone 中发送邮件

> ID：10876973
> 
> 赞同：1
> 
> 时间：2012-06-04T06:07:53.233
> 
> 标签：iphone, objective-c

我正在创建文件夹的 zip 文件我想知道如何从 zip 中删除 sqlite 文件我只需要 zip 中的其他文件但它会将文件夹目录中保存的所有文件都提供给 zip 我不希望 zip 文件中的 sqlite 文件

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docDirectory = [paths objectAtIndex:0];
    BOOL isDir=NO;
    NSArray *subpaths;
    NSString *exportPath = docDirectory;
    NSFileManager *fileManager = [NSFileManager defaultManager];    
    if ([fileManager fileExistsAtPath:exportPath isDirectory:&isDir] && isDir){
        subpaths = [fileManager subpathsAtPath:exportPath];
    }

    NSString *archivePath = [docDirectory stringByAppendingString:@".zip"];

    ZipArchive *archiver = [[ZipArchive alloc] init];
    [archiver CreateZipFile2:archivePath];
    for(NSString *path in subpaths)
    {
        NSString *longPath = [exportPath stringByAppendingPathComponent:path];
        if([fileManager fileExistsAtPath:longPath isDirectory:&isDir] && !isDir)
        {
            [archiver addFileToZip:longPath newname:path];      
        }
    }
    BOOL successCompressing = [archiver CloseZipFile2];
    if(successCompressing)
        NSLog(@"Success");
    else
        NSLog(@"Fail");

    MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
    picker.mailComposeDelegate = self;

    NSString *emailBody =@""; 
    [picker setMessageBody:emailBody isHTML:NO];

    [picker addAttachmentData:myData mimeType:@"" fileName:@"Document.Zip"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T06:24:29.013

您要做的是使用 dataWithContentsOfFile: 创建一个 NSData 对象，并带有一个 zip 存档的路径，然后将 mime 类型设置为 application/zip。

# c++ - 界面的帮助字符串应该包含什么？

> ID：10876975
> 
> 赞同：0
> 
> 时间：2012-06-04T06:08:07.723
> 
> 标签：c++, interface, idl

我观察到不同的开发人员对帮助字符串中指定的文本有不同的选择。一些例子，

```
[
    helpstring ("My Interface"),
]
interface MyInterface : IUnknown
{
} 
```

我不知道这个帮助字符串是否有用（！？）。

```
[
    helpstring ("Interface used with Module A to do some stuff."),
]
interface MyInterface : IUnknown
{
} 
```

好的？

```
[
    helpstring ("Used to implement certain functionality."),
]
interface MyInterface : IUnknown
{
} 
```

好多其它的。

`helpstring`指定接口时是否遵循任何准则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:19:40.427

没有我知道的指导方针。我见过很多形式是“我的界面”，这是没用的。

如果您了解您的目标受众（内部开发人员、经验丰富的第三方开发人员、IT 人员等），请考虑他们可能拥有的技能（并且可能需要使用您的界面）以及对他们有帮助的技能。

# unix - （修改描述） Shell scripting to 如何显示搜索字符串的具体内容？

> ID：10876976
> 
> 赞同：0
> 
> 时间：2012-06-04T06:08:11.807
> 
> 标签：unix

这是我的查询：

```
/path/newdir/newtext.csv 
```

newtext.csv 如下所示：

## 记录 1

第 1 行第 2 行样品编号：123456789（第 3 行）| | | | | 时间：2012-05-29T10:21:06Z（第 21 行）| | | 超时：2012-05-29T13:07:46Z（第 30 行）

## 记录 2

第 1 行第 2 行样品编号：363214563（第 3 行）| | | | | 时间：2012-05-29T10:21:06Z（第 21 行）| | | 超时：2012-05-29T13:07:46Z（第 30 行）

## 记录 3

第 1 行第 2 行样品编号：987654321（第 3 行）| | | | | 时间：2012-05-29T10:21:06Z（第 21 行）| | | 超时：2012-05-29T13:07:46Z（第 30 行）

假设 newtext.csv 中有这样 100 条记录所以，现在我需要输入的 i/p 字符串的参数，如下所示

示例输入搜索字符串：

```
123456789 
```

示例输出：

```
Sample Number: 123456789
Time In: 2012-05-29T10:21:06Z
Time Out: 2012-05-29T13:07:46Z 
```

这正是我需要的。你能帮我么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T07:22:26.683

`Perl`应该更*适合*这个任务。

```
 $ cat newtext.csv 
    line 1 line 2 Sample Number: 123456789 (line no. 3) | | | | | Time In: 2012-05-29T10:21:06Z (line no. 21) | | | Time Out: 2012-05-29T13:07:46Z (line no. 30)
    line 1 line 2 Sample Number: 363214563 (line no. 3) | | | | | Time In: 2012-05-29T10:21:06Z (line no. 21) | | | Time Out: 2012-05-29T13:07:46Z (line no. 30)
    line 1 line 2 Sample Number: 987654321 (line no. 3) | | | | | Time In: 2012-05-29T10:21:06Z (line no. 21) | | | Time Out: 2012-05-29T13:07:46Z (line no. 30) 
```

您可以使用*one-liner*获得预期结果，无论字段数量如何，只需编写正则表达式即可。

```
# perl -lane '/(Sample Number:\s*\d+).*(Time In:\s*\S+).*(Time Out:\s*\S+)/;print $1."\n".$2."\n".$3' newtext.csv
Sample Number: 123456789
Time In: 2012-05-29T10:21:06Z
Time Out: 2012-05-29T13:07:46Z
Sample Number: 363214563
Time In: 2012-05-29T10:21:06Z
Time Out: 2012-05-29T13:07:46Z
Sample Number: 987654321
Time In: 2012-05-29T10:21:06Z
Time Out: 2012-05-29T13:07:46Z 
```

# django - 在同一模型的两个不同字段中使用相同的选项

> ID：10876983
> 
> 赞同：0
> 
> 时间：2012-06-04T06:09:00.127
> 
> 标签：django, django-models, django-forms

有什么理由这不起作用吗？/ 有什么办法让它工作吗？（不定义另一个选择集）

```
class Foo(models.Model):
    BAR_CHOICES = ((str(x), str(x)) for x in range(5))

    bar = models.CharField(max_length = 1, choices = BAR_CHOICES)
    barbar = models.CharField(max_length = 1, choices = BAR_CHOICES)

class FooForm(forms.ModelForm):
    class Meta:
        model = Foo

class FooAdmin(admin.ModelAdmin):
    pass

admin.site.register(Foo, FooAdmin) 
```

然后，如果您转到该`admin`页面或进行 a `ModelForm`，则选择仅显示在第一个字段

像这样：

```
>> foo_form = FooForm()
>> print foo_form
<tr><th><label for="id_bar">Bar:</label></th><td><select name="bar" id="id_bar">
<option value="" selected="selected">---------</option>
<option value="0">0</option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
</select></td></tr>
<tr><th><label for="id_barbar">Barbar:</label></th><td><select name="barbar" id="id_barbar">
<option value="" selected="selected">---------</option>
</select></td></tr> 
```

![在此处输入图像描述](../Images/39b6d88039a469a1f27d2762a01400ac.png)

[**编辑以显示 FooForm、FooAdmin 和 Admin img**]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T07:39:22.700

您已经`Foo.BAR_CHOICES`通过基因定义。改用 LC，以便它可以迭代多次。

# django - Django MongoDB 字段（空和 null）

> ID：10876985
> 
> 赞同：1
> 
> 时间：2012-06-04T06:09:10.357
> 
> 标签：django, mongodb, django-models

我编写了一个模型，该模型的字段可以为空白，不为空，并且不是必需的。当我创建并保存模型的实例而不包含与此类字段对应的数据时，django 仍然使用空字符串值保存此类字段。我的问题是，有什么办法可以避免这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:03:24.487

`default=None`在您的字段定义中设置： `foo = models.CharField(..., default=None)`.

# php - MySQL：插入和更新时出错：无法添加或更新子行：外键约束失败

> ID：10876987
> 
> 赞同：0
> 
> 时间：2012-06-04T06:09:17.547
> 
> 标签：php, mysql, insert, foreign-keys

我一直在阅读一些与我有同样问题但没有找到解决方案的问题

**数据库结构**

```
CREATE TABLE material (
  cve_mat varchar(12),
  type_mat varchar(20),
  author_mat varchar(40),
  status varchar(2),
  primary key(cve_mat)   
) ENGINE = INNODB;

CREATE TABLE users (
  cve_user varchar(8),
  name_user varchar(25),
  lastn_user varchar(25),
  email_user varchar(25),
  primary key(cve_user)
)ENGINE = INNODB;

CREATE TABLE material_user (
  cve_mat varchar(8),
  cve_user varchar(8),
  start_mat date,
  end_mat date,
  foreign key(cve_mat) references material(cve_mat)
    ON UPDATE CASCADE
    ON DELETE CASCADE,
  foreign key(cve_user) references users(cve_user)
    ON UPDATE CASCADE
    ON DELETE CASCADE
) ENGINE = INNODB; 
```

**当执行这些指令时：**

```
......
$query = "INSERT INTO material_user VALUES ('$cvemat','$ncontrol',NOW(),DATE_ADD(current_date, interval '$days' day))";
$result = mysql_query($query) or die(mysql_error());

if ($result) {
$query = "UPDATE material SET status = 'YES' WHERE material.cve_mat = '$cvemat'";
$result = mysql_query($query) or die(mysql_error());

if ($result){
    return true;
} else {
    return false;
}
} else {
return false;
} 
```

**并显示此错误：**

```
Cannot add or update a child row: a foreign key constraint fails (`biblioteca/material_prestamo`, CONSTRAINT `material_prestamo_ibfk_1` FOREIGN KEY (`cve_mat`) REFERENCES `material` (`cve_mat`) ON DELETE CASCADE ON UPDATE CASCADE) 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T06:20:13.447

您有外键约束，因此您需要先执行第二个查询，然后再执行您的第一个查询。它可能对你有帮助

```
$query = "UPDATE material SET status = 'YES' WHERE material.cve_mat = '$cvemat'";
$result = mysql_query($query) or die(mysql_error());

if ($result) {
   $query = "INSERT INTO material_user VALUES  ('$cvemat','$ncontrol',NOW(),DATE_ADD(current_date, interval '$days' day))";
   $result = mysql_query($query) or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T06:32:27.420

首先，外键的列类型应该与引用表匹配：

**材料用户**

```
cve_mat varchar(8), 
```

**材料**

```
cve_mat varchar(12), 
```

这两种列类型应该相等。

在插入语句之前，您可以执行一些调试：

```
SELECT * FROM material WHERE cve_mat='$cvemat' 
```

如果一切正常，您可以运行它以了解更多详细信息：

```
SHOW INNODB STATUS; 
```

# extjs - 全屏不显示加载蒙版

> ID：10876988
> 
> 赞同：1
> 
> 时间：2012-06-04T06:09:18.047
> 
> 标签：extjs

如何将加载屏幕掩码加载到整个窗口而不是 extjs 中的特定对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T06:13:50.770

```
Ext.getBody().mask('这是一个全身面具');

```

[文档](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Element-method-mask)

# android - 如何在 Android 中查看 Gstreamer 日志？

> ID：10876990
> 
> 赞同：3
> 
> 时间：2012-06-04T06:09:34.753
> 
> 标签：android, logging, gstreamer

如何在Android环境中查看GST_CAT_INFO、GST_DEBUG等日志函数的输出？我可以在 logcat 中查看它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:03:57.450

日志被写入标准错误。您可以将其重定向到一个文件 (2>debug.log) 并将其下载到您的计算机上。在那里，您可以使用“less”或“more”来阅读它。或者禁用 ansi 颜色 (GST_DEBUG_NO_COLOR=1) 并使用[gst-debug-viewer](http://cgit.freedesktop.org/~cymacs/gst-debug-viewer/)以交互方式浏览它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T17:09:34.833

有一种方法可以将 stdio 重定向到日志，以便在 logcat 中可见：

[在 Android NDK 中将标准输出重定向到 logcat](https://stackoverflow.com/questions/10531050/redirect-stdout-to-logcat-in-android-ndk)

我已经使用过几次了。我还在 android 上重新挂载 /system 读写并编辑“/system/build.prop”以添加设置，使其在重启后仍然存在。在开发平台上，您甚至可以在 adb shell 中使用“vi”来编辑文件。

# iphone - 如何从 NSMutableArray (iPhone) 中获取第一个值？

> ID：10876992
> 
> 赞同：5
> 
> 时间：2012-06-04T06:09:52.063
> 
> 标签：iphone, ios, arrays, nsmutablearray

现在我正在使用简单的 iphone 应用程序，我已经存储了一些价值，所以我`NSMutableArray`想 `"{54.399, 196}","{-268.246, 273}".`首先获得 54.399 `indexpath`，如何获得这个，请帮助我

提前致谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-04T06:11:56.523

看起来你有一个数组数组，所以它是：

```
[[myArray objectAtIndex:0] objectAtIndex:0]; 
```

或使用下标：

```
myArray[0][0]; 
```

* * *

**编辑**：

好的，你有一个`NSStrings`. 做你想做的事（得到 53.399）执行以下操作：

```
NSString *myString = [myArray objectAtIndex:0];
NSArray *stringComponents = [myString componentsSeparatedByString:@","];
NSString *myFinalString = [stringComponents objectAtIndex:0]; 
```

带下标：

```
NSString *myFinalString = [[myArray[0] componentsSeparatedByString:@","][0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T06:14:19.163

您可以使用

```
[[arrayObj objectAtIndex:0] objectAtIndex:0]; 
```

# android - 在我的应用程序中显示画廊的图像

> ID：10876996
> 
> 赞同：1
> 
> 时间：2012-06-04T06:10:47.310
> 
> 标签：android, android-gallery

我想从其数据库中检索图库中的所有图像，并希望在我的应用程序中显示在 gridview 中。请告诉怎么做..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T06:55:57.740

```
import java.io.BufferedInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.ArrayList;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.database.Cursor;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.drawable.BitmapDrawable;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.util.Log;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.AdapterView.OnItemLongClickListener;

/**
 * Class will Display all gallery images in grid view This class has the
 * functionality to move images from public gallery to Private
 * 
 */

public class AndroidGallery extends Activity implements OnItemLongClickListener {

    private GridView sdcardImages;
    private ImageAdapter imageAdapter;

    private String TAG = this.getClass().getSimpleName();
    private ArrayList<LoadedImage> photos = new ArrayList<LoadedImage>();

    private String thumb_Image_Path;
    private String crypto = null;

    private FileInputStream is = null;
    private BufferedInputStream bis = null;
    private Bitmap bitmap;
    private ByteArrayOutputStream bytes;
    private File galleryThumbFile, galleryImageFile,galleryThumbFolder, galleryImageFolder;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.sdcard);

    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();

        photos.clear();                             // If photos array list has any previous value then clear it
        setViews();                                 // set views 
        setProgressBarIndeterminateVisibility(true);
        sdcardImages.setAdapter(imageAdapter);      // Fill adapter 
        loadImages();                               // Load images from default gallery 

    }

    /**
     * Free up bitmap related resources.
     */

    protected void onDestroy() {
        super.onDestroy();
        final GridView grid = sdcardImages;
        final int count = grid.getChildCount();
        ImageView v = null;
        for (int i = 0; i < count; i++) {
            v = (ImageView) grid.getChildAt(i);
            ((BitmapDrawable) v.getDrawable()).setCallback(null);
        }
    }

    /**
     * Load images...
     */
    private void loadImages() {

        final Object data = getLastNonConfigurationInstance();

        if (data == null) {

            new LoadImagesFromSDCard().execute();
        } else {

            final LoadedImage[] photos = (LoadedImage[]) data;
            if (photos.length == 0) {
                new LoadImagesFromSDCard().execute();
            }
            for (LoadedImage photo : photos) {
                addImage(photo);
            }
        }
    }

    /**
     * Load images from SD Card in the background, and display each image on the
     * screen.
     * 
     * @see android.os.AsyncTask#doInBackground(Params[])
     */

    private class LoadImagesFromSDCard extends
            AsyncTask<Object, LoadedImage, Object> {

        @Override
        protected Object doInBackground(Object... params) {

               Uri uri = null;      
               Bitmap bitmap = null;
               Bitmap newBitmap = null;

              String[] projection = {MediaStore.Images.Thumbnails._ID};

              Cursor cursor = managedQuery( MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI,
                        projection, // Which columns to return
                        null,       // Return all rows
                        null,       
                        null); 

              int columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Images.Thumbnails._ID);
              int size = cursor.getCount();
               int imageID = 0;

              for (int i = 0; i < size; i++) {
                    cursor.moveToPosition(i);
                    imageID = cursor.getInt(columnIndex);
                    uri = Uri.withAppendedPath(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, "" + imageID);
                    try {
                        bitmap = BitmapFactory.decodeStream(getContentResolver().openInputStream(uri));
                        if (bitmap != null) {
                            newBitmap = Bitmap.createScaledBitmap(bitmap, 70, 70, true);
                            bitmap.recycle();
                            if (newBitmap != null) {
                                publishProgress(new LoadedImage(newBitmap,String.valueOf(imageID)));
                            }
                        }
                    } catch (IOException e) {
                        //Error fetching image, try to recover
                        Log.e(TAG, e.toString());
                    }
                }

            return null;
        }

        /**
         * Add a new LoadedImage in the images grid.
         * 
         * @param value
         *            The image.
         */
        @Override
        public void onProgressUpdate(LoadedImage... value) {
            addImage(value);
        }

        /**
         * Set the visibility of the progress bar to false.
         * 
         * @see android.os.AsyncTask#onPostExecute(java.lang.Object)
         */
        @Override
        protected void onPostExecute(Object result) {
            setProgressBarIndeterminateVisibility(false);
        }
    }

    /**
     * Add image(s) to the grid view adapter.
     * 
     * @param value
     *            Array of LoadedImages references
     */
    private void addImage(LoadedImage... value) {
        for (LoadedImage image : value) {
            imageAdapter.addPhoto(image);
            imageAdapter.notifyDataSetChanged();
        }
    }

    /**
     * Set view function will set views 
     * 
     */

    private void setViews() {

        sdcardImages = (GridView) findViewById(R.id.sdcard);

        sdcardImages.setOnItemLongClickListener(this); // Set Listener on GridView

        imageAdapter = new ImageAdapter(getApplicationContext());

        imageAdapter.notifyDataSetChanged();

    }

/**
 * Function will return bitmap of Gallery big image
 * @param imagePath
 * @return
 */

private Bitmap getImageBitmap(String imagePath) {
    // TODO Auto-generated method stub

    try {
        is = new FileInputStream(new File(imagePath));
        bis = new BufferedInputStream(is);
        bitmap = BitmapFactory.decodeStream(bis);

    } catch (Exception e) {
        // Try to recover
    } finally {
        try {
            if (bis != null) {
                bis.close();
            }
            if (is != null) {
                is.close();
            }

        } catch (Exception e) {
        }
    }

    System.gc();
    return bitmap;

} 
```

/** * 函数将返回从图库中选择的缩略图 * @param thumbImagePath * @return */

```
private Bitmap getThumbnailBitmap(String thumbImagePath) {

        try {
            is = new FileInputStream(new File(thumbImagePath));
            bis = new BufferedInputStream(is);
            bitmap = BitmapFactory.decodeStream(bis);

        } catch (Exception e) {
            // Try to recover
        } finally {
            try {
                if (bis != null) {
                    bis.close();
                }
                if (is != null) {
                    is.close();
                }

            } catch (Exception e) {
            }
        }

        System.gc();
        return bitmap;

    }

    }

    /**
     * This class is used for image adapter
     * @author 
     *
     */
    class ImageAdapter extends BaseAdapter {

        private Context mContext;

        ImageAdapter(Context context) {
            mContext = context;
        }

        public void addPhoto(LoadedImage photo) {
            photos.add(photo);
        }

        public int getCount() {
            return photos.size();
        }

        public Object getItem(int position) {
            return photos.get(position);
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            final ImageView imageView;
            if (convertView == null) {
                imageView = new ImageView(mContext);
                imageView.setLayoutParams(new GridView.LayoutParams(90, 90));
                imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            } else {
                imageView = (ImageView) convertView;
            }

            imageView.setImageBitmap(photos.get(position).getImage());

            return imageView;
        }
    }

} 
```

布局：

```
 <?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/sdcard"
    android:layout_width="fill_parent"

    android:layout_height="fill_parent" android:stretchMode="columnWidth"
        android:gravity="center" android:layout_below="@id/RelativeWallTopBar"
        android:numColumns="auto_fit" android:columnWidth="90dp"
        android:horizontalSpacing="5dip" android:verticalSpacing="15dip" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T07:21:53.900

这里我采用了 main.xml，其中包含一个按钮和一个 Imageview。当我按下按钮时，图像会从图库中显示，当我单击图像时，它会显示在图像视图中。

main.java

```
public class GalleryImagePickActivity extends Activity {
/** Called when the activity is first created. */

private static final int SELECT_PICTURE = 1;
ImageView imgBG;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    imgBG = (ImageView) findViewById(R.id.imgBG);
}

public void btnChooseBGClick(View v) {
    Intent i = new Intent(Intent.ACTION_PICK,
            android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
    startActivityForResult(i, SELECT_PICTURE);
}

protected void onActivityResult(int requestCode, int resultCode,
        Intent imageReturnedIntent) {
    super.onActivityResult(requestCode, resultCode, imageReturnedIntent);

    switch (requestCode) {
    case SELECT_PICTURE:
        if (resultCode == RESULT_OK) {
            Uri uri = imageReturnedIntent.getData();
            String[] projection = { MediaStore.Images.Media.DATA };

            Cursor cursor = getContentResolver().query(uri, projection,
                    null, null, null);
            cursor.moveToFirst();

            int columnIndex = cursor.getColumnIndex(projection[0]);
            String filePath = cursor.getString(columnIndex);
            cursor.close();

            Bitmap yourSelectedImage = BitmapFactory.decodeFile(filePath);
            Drawable d = new BitmapDrawable(yourSelectedImage);
            imgBG.setBackgroundDrawable(d);
        }
    }
}
} 
```

我希望它对你有帮助。