# StackOverflow 问答 10110000-10110999

# iphone - 当前视图再次添加到我的窗口中，然后再次点击自定义标签栏

> ID：10110003
> 
> 赞同：0
> 
> 时间：2012-04-11T16:26:08.750
> 
> 标签：iphone, objective-c, ios4

我在我的应用程序中创建了一个自定义选项卡栏...再次单击相同的选项卡栏按钮时，视图会添加...请告诉我如何管理视图，以便如果视图在窗口上并且我按下选项卡栏再次不应添加或加载视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:57:18.447

检查 viewcontroller 是否为 nil。如果 viewcontroller 为 nil，则添加新的，否则只需 popToRootViewController。你可以找到很多标签栏的实现，请参考下面的链接

[https://github.com/boctor/idev-recipes/tree/master/TabBarAnimation](https://github.com/boctor/idev-recipes/tree/master/TabBarAnimation)

[https://github.com/iosdeveloper/InfiniTabBar](https://github.com/iosdeveloper/InfiniTabBar)

[https://github.com/i300/TweetBotTabBar](https://github.com/i300/TweetBotTabBar)

# javascript - 如何将计算的 observable 添加到 knockoutjs 映射

> ID：10110010
> 
> 赞同：4
> 
> 时间：2012-04-11T16:26:20.250
> 
> 标签：javascript, jquery, knockout.js, knockout-mapping-plugin

我正在使用映射插件来创建基于从服务器发送的对象的客户端视图模型。对象是基本地址信息，即：address1、address2、city、state、postal 等...

绑定视图模型后，如果用户更改地址，我希望更新谷歌地图画布。我创建了一个计算的 observable，它检查输入的值并调用地图更新函数。当我不使用映射插件时，我之前有这个工作，即模型是在本地定义的，但是一旦我引入映射，我就无法将计算的 observable 附加到视图模型。

我尝试按照映射插件[文档](http://knockoutjs.com/documentation/plugins-mapping.html)中的说明进行操作，但计算出的 observable 没有触发更新。我有一个自定义映射，它调用一个 mapModel，其中包含示例中计算的 observable，但没有更新。

有任何想法吗？

```
$.getJSON("@Url.RouteUrl("
ContactUs_default ", new { action = "
GetPageModel ",  Model.BusinessID})", function(result) {
    //create map property
    result.Data.Map = null;
    var mapping = {
        'Map': {
            create: function(options) {
                return new mapModel(options.data);
            }
        }
    };

    var viewModel = ko.mapping.fromJS(result.Data, mapping);    

    ko.applyBindings(viewModel);

});

var mapModel = function(data) {
    ko.mapping.fromJS(data, {}, this);

    this.Map = ko.computed(function() {
        var address = "";
        var enteredElements = 0;

        if (this.Address1 != helpText) {
            address += " " + this.Address1;
            enteredElements++;
        }

        if (this.Address2 != helpText) {
            address += " " + this.Address2;
        }

        if (this.City != helpText) {
            address += " " + this.City;
            enteredElements++;
        }

        if (this.State != helpText) {
            address += " " + this.County;
            enteredElements++;
        }

        if (this.PostalCode != helpText) {
            address += " " + this.Postal;
        }
        alert("hi");

        //only upate map if enough data has been entered to give accruate location
        if (enteredElements >= 3) {
            MYMAP.placeMarkers(address);
        }
    }, this);
};​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:31:10.177

当您通过映射插件发送数据时，您的所有属性都将成为可观察对象。

这意味着您需要像以下函数一样访问它们：

```
 if (this.Address1() != helpText) {
        address += " " + this.Address1();
        enteredElements++;
    } 
```

当您在计算的可观察对象中将它们作为可观察对象访问时，它将创建一个依赖项。因此，目前您计算的 observable 最初会被评估，但它永远不会再次更新，因为它不访问任何 observable 的值。

# c# - LINQ 扩展方法的顺序不影响性能？

> ID：10110013
> 
> 赞同：20
> 
> 时间：2012-04-11T16:26:33.590
> 
> 标签：c#, .net, linq

我很惊讶我是否预先或附加 LINQ 扩展方法显然无关紧要。

经测试[`Enumerable.FirstOrDefault`](http://msdn.microsoft.com/en-us/library/bb340482.aspx)：

1.  `hugeList.Where(x => x.Text.Contains("10000")).FirstOrDefault();`
2.  `hugeList.FirstOrDefault(x => x.Text.Contains("10000"));`

    ```
    var hugeList = Enumerable.Range(1, 50000000)
        .Select(i => new { ID = i, Text = "Item" + i });

    var sw1 = new System.Diagnostics.Stopwatch();
    var sw2 = new System.Diagnostics.Stopwatch();

    sw1.Start();
    for(int i=0;i<1000;i++)
        hugeList.Where(x => x.Text.Contains("10000")).FirstOrDefault();
    sw1.Stop();

    sw2.Start();
    for(int i=0;i<1000;i++)
        hugeList.FirstOrDefault(x => x.Text.Contains("10000"));
    sw2.Stop();

    var result1 = String.Format("FirstOrDefault after: {0} FirstOrDefault before: {1}", sw1.Elapsed,  sw2.Elapsed);
    //result1: FirstOrDefault after: 00:00:03.3169683 FirstOrDefault before: 00:00:03.0463219

    sw2.Restart();
    for (int i = 0; i < 1000; i++)
        hugeList.FirstOrDefault(x => x.Text.Contains("10000"));
    sw2.Stop();

    sw1.Restart();
    for (int i = 0; i < 1000; i++)
        hugeList.Where(x => x.Text.Contains("10000")).FirstOrDefault();
    sw1.Stop();

    var result2 = String.Format("FirstOrDefault before: {0} FirstOrDefault after: {1}", sw2.Elapsed, sw1.Elapsed);
    //result2: FirstOrDefault before: 00:00:03.6833079 FirstOrDefault after: 00:00:03.1675611

    //average after:3.2422647 before: 3.3648149 (all seconds) 
    ```

我猜想它会更慢，`Where`因为它必须找到所有匹配的项目，然后取第一个，而前面的`FirstOrDefault`可以产生第一个找到的项目。

**问：**有人可以解释为什么我走错了路吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-04-11T16:42:22.640

> 我猜想在 Where 之前添加会更慢，因为它必须找到所有匹配的项目然后取第一个，而前面的 FirstOrDefault 可以产生第一个找到的项目。有人可以解释为什么我在错误的轨道上吗？

您走错了路，因为您的第一个陈述根本不正确。*不需要*`Where`在获取第一个匹配项*之前*找到所有匹配项。“按需”获取匹配项；如果您只要求第一个，它只会获取第一个。如果您只要求前两个，它只会获取前两个。**`Where`**

 **Jon Skeet 在舞台上表现不错。想象一下，你有三个人。第一个人有一副洗过的牌。第二个人有一件 T 恤，上面写着“卡片是红色的”。第三个人戳第二个人说“给我第一张卡片”。第二个人一遍又一遍地戳第一个人，*直到*第一个人交出一张红牌，然后第二个人将红牌交给第三个人。第二个人没有理由继续戳第一个人；任务完成！

现在，如果第二个人的 T 恤上写着“按等级升序排列”，那么我们的情况就大不相同了。现在第二个人确实需要从第一个人那里拿到每张牌，以便找到牌堆中最低的牌，然后再将第一张牌交给第三个人。

现在，这应该为您提供必要的直觉，以判断何时出于性能原因订单确实很重要。“给我红卡然后排序”的最终结果与“排序所有卡然后给我红卡”完全相同，但前者要快得多，因为你不必花任何时间排序你要丢弃的黑牌。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-11T16:31:44.677

该方法使用延迟执行，并*在请求*`Where()`时提供下一个匹配项。也就是说，不会评估并立即返回所有候选对象的序列，而是在迭代时一次提供一个。*`Where()`*

 *由于`FirstOrDefault()`在第一项之后停止，这将导致`Where()`停止迭代。

`FirstOrDefault()`将 的 的执行想象成`Where()`它执行了`break`. 当然，这并不是那么简单，但本质上因为`FirstOrDefault()`一旦找到一个项目就会停止迭代，因此`Where()`不需要进一步进行。

当然，这是在子句`FirstOrDefault()`上应用 a 的简单情况`Where()`，如果您有其他子句暗示需要考虑所有项目，这可能会产生影响，但这在使用`Where().FirstOrDefault()' combo or just`FirstOrDefault()' 和谓词。***

# c# - 非托管代码是否需要清单文件？

> ID：10110014
> 
> 赞同：1
> 
> 时间：2012-04-11T16:26:38.657
> 
> 标签：c#, c++, security, manifest, uac

在开始之前，让我为我几乎不具备 UAC 编程知识而道歉。也就是说……</p>

我有启动一个完全不同程序的 setup.exe 的 ac# 应用程序。它的主要目的是帮助第二个程序在 UAC 下运行。因此，简而言之，它会在提升的命令提示符下运行该程序 setup.exe 文件。我无法控制第二个程序，因此无法将其与 UAC 兼容。我在 Vista 首次发布时编写了我的程序，并且几乎找不到 UAC 信息。现在请记住，以这种方式运行 setup.exe 文件实际上是可行的，并且允许程序在 UAC 开启的情况下运行。但是我的程序的一部分还添加了一个“theirapp.exe.manifest”文件，其中“requireAdministrator”作为执行级别。所以我的问题是，当我最终尝试运行的程序是非托管应用程序（CBuilder C++）时，我什至需要那个文件。在此过程中，我认为需要一个清单文件。

谢谢

编辑：总结一下……在 UAC 下运行非托管程序是否需要清单文件？

```
<trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
  <security>
    <requestedPrivileges>
      <requestedExecutionLevel
        level="requireAdministrator"
        uiAccess="false"/>
    </requestedPrivileges>
  </security>
</trustInfo> 
```

编辑：我运行其他程序 setup.exe 的主要方法

```
private void RunElevated()
{
    ProcessStartInfo processInfo = new ProcessStartInfo("cmd.exe", @"/C " + AppDomain.CurrentDomain.BaseDirectory + @"setup.exe");
    processInfo.Verb = "runas";

    try
    {
        Process.Start(processInfo);
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message.ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T16:32:06.060

在 Visual C++ 中，您会在 Manifest 选项（链接器设置的一部分）下找到选项：

![Visual Studio 11（测试版）中的 UAC 设置](../Images/ceff6e03ad51db19ec2560b0174e54bc.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T21:45:30.220

这个[链接](https://stackoverflow.com/questions/348877/what-purpose-do-unmanaged-dll-manifest-files-serve)回答了我的问题。我想它引用非托管 DLL 的清单文件这一事实使我无法搜索。

# c# - 用于导出到 SQL Azure 的 DatePicker 类型

> ID：10110020
> 
> 赞同：0
> 
> 时间：2012-04-11T16:26:42.540
> 
> 标签：c#, windows-phone-7, datetimepicker

我正在尝试从 DatePicker 中获取日期选择（其中的选择被放回到屏幕上的 TextBox 中），然后将其保存到我的 SQL Azure 数据库中，其中类型定义为日期。但是，我似乎找不到要编译的方法的正确结尾/格式。

抛出的确切错误是：

> 错误 1“Microsoft.Phone.Controls.DatePicker”不包含“XXX”的定义，并且找不到接受“Microsoft.Phone.Controls.DatePicker”类型的第一个参数的扩展方法“XXX”（您是否缺少使用指令或程序集引用？） C:\Users\Kristian Schuhmacher\Documents\Visual Studio 2010\Projects\AT2\App\AT2App\AT2App\Settings\DriverCreator.xaml.cs 40 89 AT2App

以下是一些代码片段：

```
 private void addAccountBtn_Click(object sender, RoutedEventArgs e)
    {
        _ServiceClient.AddDriverAsync(fnameTxtBox.Text, snameTxtBox.Text, BirthDate.XXX, phonemobNumBox.Text);
    } 
```

^( **xxx**是我要填写的内容)

```
 private void BirthDate_ValueChanged(object sernder, DateTimeValueChangedEventArgs e)
    {
        var date = (DateTime)BirthDate.Value;
        MessageBox.Show(date.ToString("d"));
    } 
```

^这是一些与 DatePicker 一起使用的代码

```
 <toolkit:DatePicker  Name="BirthDate" ValueChanged="BirthDate_ValueChanged" Margin="2,180,-2,940" /> 
```

^这是来自 .xaml 的行

DatePicker 可以正常工作，只是我无法将代码的“xxx”部分正确发送到 WCF 服务，WCF 服务会将其放回我的 SQL Azure 数据库。

对此的任何帮助都会很棒。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:31:13.893

我*希望*您能够使用与 BirthDate_ValueChanged 处理程序中相同的代码：

```
_ServiceClient.AddDriverAsync(fnameTxtBox.Text, snameTxtBox.Text,
                              (DateTime) BirthDate.Value, phonemobNumBox.Text); 
```

那不行吗？如果没有，声明是`AddDriverAsync`什么样的？如果在第二个参数后按 Ctrl-Shift-Space，Intellisense 会显示什么？

# c++ - 模板化函数和放置新的构造函数参数

> ID：10110021
> 
> 赞同：1
> 
> 时间：2012-04-11T16:26:45.863
> 
> 标签：c++, templates, memory-management, placement-new

我在内存管理器类中声明了几个模板化方法：

```
template <class T>
inline T* AllocateObject() { return new (Allocate(sizeof(T))) T(); }
template <class T, class arg0>
inline T* AllocateObject(arg0 a0) { return new (Allocate(sizeof(T))) T(a0); }
template <class T, class arg0, class arg1>
inline T* AllocateObject(arg0 a0, arg1 a1) { return new (Allocate(sizeof(T))) T(a0,a1); }
template <class T, class arg0, class arg1, class arg2>
inline T* AllocateObject(arg0 a0, arg1 a1, arg2 a2) { return new (Allocate(sizeof(T))) T(a0,a1,a2); } 
```

这个想法是，这些方法将为给定的任何类分配内存并调用构造函数。

问题是如果你想提供构造函数参数..我唯一的解决方案是在上面为每个变体重载函数。我觉得它不是很可行。

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:29:57.027

救援可变参数模板：

```
template <typename T, typename ...Args>
T * AllocateObject(Args &&... args)
{
    return ::new (Allocate(sizeof(T)) T(std::forward<Args>(args)...);
} 
```

# sql - 按分组列值的变化顺序分组数据

> ID：10110026
> 
> 赞同：18
> 
> 时间：2012-04-11T16:26:57.237
> 
> 标签：sql, sql-server-2008, tsql, gaps-and-islands

有以下数据

```
create table #ph (product int, [date] date, price int)
insert into #ph select 1, '20120101', 1
insert into #ph select 1, '20120102', 1
insert into #ph select 1, '20120103', 1
insert into #ph select 1, '20120104', 1
insert into #ph select 1, '20120105', 2
insert into #ph select 1, '20120106', 2
insert into #ph select 1, '20120107', 2
insert into #ph select 1, '20120108', 2
insert into #ph select 1, '20120109', 1
insert into #ph select 1, '20120110', 1
insert into #ph select 1, '20120111', 1
insert into #ph select 1, '20120112', 1 
```

我想产生以下输出：

```
product | date_from | date_to  | price
  1     | 20120101  | 20120105 |   1
  1     | 20120105  | 20120109 |   2
  1     | 20120109  | 20120112 |   1 
```

如果我按价格分组并显示最大和最小日期，那么我将得到以下不是我想要的（请参阅日期重叠）。

```
product | date_from | date_to  | price
  1     | 20120101  | 20120112 |   1
  1     | 20120105  | 20120108 |   2 
```

所以基本上我想要做的是根据组列产品和价格对数据的步进变化进行分组。

实现这一目标的最干净的方法是什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-28T19:53:46.977

有一种（或多或少）已知的解决此类问题的技术，涉及两个[`ROW_NUMBER()`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)调用，如下所示：

```
WITH marked AS (
  SELECT
    *,
    grp = ROW_NUMBER() OVER (PARTITION BY product        ORDER BY date)
        - ROW_NUMBER() OVER (PARTITION BY product, price ORDER BY date)
  FROM #ph
)
SELECT
  product,
  date_from = MIN(date),
  date_to   = MAX(date),
  price
FROM marked
GROUP BY
  product,
  price,
  grp
ORDER BY
  product,
  MIN(date) 
```

输出：

```
product  date_from   date_to        price 
-------  ----------  -------------  ----- 
1        2012-01-01  2012-01-04     1     
1        2012-01-05  2012-01-08     2     
1        2012-01-09  2012-01-12     1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T18:16:48.983

我是这个论坛的新手，所以希望我的贡献是有帮助的。

如果您真的不想使用 CTE（尽管我认为这可能是最好的方法），您可以使用基于集合的代码获得解决方案。您将需要测试此代码的性能！。

我已经添加了一个额外的临时表，以便我可以为每条记录使用一个唯一标识符，但我怀疑你的源表中已经有了这个列。所以这里是临时表。

```
 If Exists (SELECT Name FROM tempdb.sys.tables WHERE name LIKE '#phwithId%')
        DROP TABLE #phwithId    

    CREATE TABLE #phwithId
    (
        SaleId INT
        , ProductID INT
        , Price Money
        , SaleDate Date 
    )
    INSERT INTO #phwithId SELECT row_number() over(partition by product order by [date] asc) as SalesId, Product, Price, Date FROM ph 
```

现在是 Select 语句的主体

```
 SELECT 
        productId 
        , date_from
        , date_to
        , Price
    FROM
        (   
            SELECT 
                dfr.ProductId
                , ROW_NUMBER() OVER (PARTITION BY ProductId ORDER BY ChangeDate) AS rowno1          
                , ChangeDate AS date_from
                , dfr.Price
            FROM
                (       
                    SELECT
                        sl1.ProductId AS ProductId
                        , sl1.SaleDate AS ChangeDate
                        , sl1.price
                    FROM
                        #phwithId sl1
                    LEFT JOIN
                        #phwithId sl2
                        ON sl1.SaleId = sl2.SaleId + 1
                    WHERE
                        sl1.Price <> sl2.Price OR sl2.Price IS NULL
                ) dfr
        ) da1
    LEFT JOIN
        (   
            SELECT 
                ROW_NUMBER() OVER (PARTITION BY ProductId ORDER BY ChangeDate) AS rowno2
                , ChangeDate AS date_to     
            FROM
                (   
                    SELECT 
                        sl1.ProductId
                        , sl1.SaleDate AS ChangeDate
                    FROM
                        #phwithId sl1
                    LEFT JOIN
                        #phwithId sl3
                        ON sl1.SaleId = sl3.SaleId - 1  
                    WHERE
                        sl1.Price <> sl3.Price OR sl3.Price IS NULL         
                ) dto

        ) da2 
        ON da1.rowno1 = da2.rowno2 
```

通过将数据源偏移量绑定 1 条记录（+或-），我们可以识别价格桶何时发生变化，然后只需将桶的开始和结束日期返回到单个记录中即可。

有点繁琐，我不确定它是否会提供更好的性能，但我喜欢挑战。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-24T02:36:03.643

```
WITH marked AS (
  SELECT
    *,
  case
   when (lag(price,1,'') over (partition by product order by date_from)) = price
   then 0 else 1
  end is_price_change
  FROM #ph
),
marked_as_group AS
( SELECT m.*,
       SUM(is_price_change) over (PARTITION BY product order by date_from ROWS 
      BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) AS price_change_group
  FROM marked m
),
SELECT
  product,
  date_from = MIN(date_from),
  date_to   = MAX(date_to),
  price = MIN(price)
FROM marked_as_group 
GROUP BY
  product,
  price_change_group
ORDER BY
  product,
  date_to 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T07:56:38.940

我提出的一种相对“干净”的解决方案是：

```
;with cte_sort (product, [date], price, [row])
as
    (select product, [date], price, row_number() over(partition by product order by [date] asc) as row
     from #ph)

select a.product, a.[date] as date_from, c.[date] as date_to, a.price 
from cte_sort a
left outer join cte_sort b on a.product = b.product and (a.row+1) = b.row and a.price = b.price
outer apply (select top 1 [date] from cte_sort z where z.product = a.product and z.row > a.row order by z.row) c
where b.row is null
order by a.[date] 
```

我使用了 CTE，`row_number`因为如果您使用诸如`dateadd`. 如果您想拥有 date_to 列（我这样做），您显然只需要外部应用。

这个解决方案确实解决了我的问题，但是我遇到了一个小问题，让它在我的 500 万行表上尽可能快地执行。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-10-01T00:31:49.220

```
Create function [dbo].[AF_TableColumns](@table_name nvarchar(55))
returns nvarchar(4000) as
begin
declare @str nvarchar(4000)
    select @str = cast(rtrim(ltrim(column_name)) as nvarchar(500)) + coalesce('         ' + @str , '            ') 
    from information_schema.columns
    where table_name = @table_name
    group by table_name, column_name, ordinal_position 
    order by ordinal_position DESC
return @str
end

--select dbo.AF_TableColumns('YourTable') Select * from YourTable 
```

# emacs - 如何使 Emacs 以“文本模式”启动并摆脱 LISP 消息？

> ID：10110027
> 
> 赞同：15
> 
> 时间：2012-04-11T16:26:58.690
> 
> 标签：emacs

如何让 Emacs 启动`text-mode`并摆脱以下消息？

```
;; This buffer is for notes you don't want to save, and for Lisp evaluation.
;; If you want to create a file, visit that file with C-x C-f,
;; then enter the text in that file's own buffer. 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-11T16:32:15.853

要摆脱启动消息，只需将`initial-scratch-message`变量设置为`""`

```
(setq initial-scratch-message "") 
```

要在文本模式下启动暂存缓冲区，您需要`initial-major-mode`更改

```
(setq initial-major-mode 'text-mode) 
```

要在启动特定主模式时设置自动模式，您需要将事件添加到模式挂钩

```
(add-hook 'text-mode-hook 'turn-on-auto-fill) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:48:41.763

我建议您使用文件参数打开 Emacs，而不是摆弄*暂存缓冲区的工作方式。*例如，如果您执行“emacs foo.txt”，那么它很可能已经以文本模式启动，而您不必为它做任何特别的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-17T23:13:11.323

您只在*暂存*缓冲区中执行 Mx 文本模式。就这样。

# php - 递归地为 Propel 中的所有相关对象补水

> ID：10110033
> 
> 赞同：1
> 
> 时间：2012-04-11T16:27:27.387
> 
> 标签：php, propel

在执行查询时，是否有一种简单的方法可以递归地对所有相关对象进行水合？

假设我有以下表格：

```
Song
Composer
Century 
```

当我做 a 时，`SongPeer::doSelectJoinAll()`只有相关的作曲家是水合的，所以如果我再做类似的事情`$song->getComposer()->getCentury()`，将执行一个新的查询。

我只想对数据库执行一个查询，因此当我`$song->getComposer()->getCentury()`在所有歌曲对象的循环中调用时，它不会以 n 个额外的查询结束。

希望我很清楚:)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T16:42:23.200

您使用的是 Propel 1.2 吗？那个有克里奥尔语的？

如果是这样，请尝试`doSelectJoinAll`在 SongPeer 上实现您自己的，以在其他表（如世纪）上手动添加连接。

如果您使用的是最新版本，则只需在查询中[显式显示`joinWith`该表](http://www.propelorm.org/reference/model-criteria.html#minimizing_queries)：

```
<?php
$song = SongQuery::create()
  ->joinWith('Song.Composer')
  ->joinWith('Composer.Century');
$century = $song->getComposer()->getCentury(); 
```

# mysql - 哪个数据库适合我的应用程序 mysql 或 mongodb ？使用 Node.js 、 Backbone 、 Now.js

> ID：10110035
> 
> 赞同：22
> 
> 时间：2012-04-11T16:27:33.573
> 
> 标签：mysql, node.js, mongodb, backbone.js

我想使用前端：主干后端：节点制作像 docs.google.com 这样的应用程序（没有它的 api，完全在我自己的服务器上）

你认为哪个数据库更好？mysql还是mongodb？应该支持良好的可扩展性。我熟悉 mysql 和 php，如果答案是 mysql，我会很高兴。但是我看到的很多教程，他们使用的是mongodb，为什么他们使用没有mysql的mongodb？我应该用什么？

谁能给我一些使用主干、节点、mysql（或mongo）构建的示例应用程序（带有源代码）的链接。或至少应用程序。使用 Node 和 mysql

谢谢

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-11T16:45:52.920

使用 MongoDB，您可以只*存储*JSON 对象并以完整格式检索它们，因此您实际上不需要 ORM 层，并且来回转换数据所花费的 CPU 时间更少。MongoDB 背后的开发人员还使水平扩展数据库具有更高的优先级，并允许您运行任意 Javascript 代码来预处理 DB 端的数据（允许对数据进行 map-reduce 样式过滤）。

但是您会因为这些收益而损失一些：您无法加入记录。实际上，您存储的 JSON 结构只能通过 SQL 中的连接来完成，但在 MongoDB 中，您的数据只有一种结构，而在 SQL 中，您可以以不同的方式查询并以其他方式更容易地表示您的数据，所以如果您需要对您的数据库进行大量分析，MongoDB 会使这变得更加困难。

在我看来，MongoDB 中的查询语言比 SQL 更“粗糙”，部分原因是它不太熟悉，部分原因是查询功能“感觉”很随意，部分是为了使其成为有效的 JSON，部分是因为字面上有一个做同一件事的几种方法，有些是较旧的方法，它们不如其他方法有用或格式不规则。与 SQL 的简单的基于行的设计相比，数组和子对象类型的复杂性增加了，因此语法必须能够处理对包含您定义的*某些*值的数组的查询，包含您定义的*所有*值，*仅*包含您定义的值，并且*不包含*您定义的值。同样的区别也适用于对象键及其值，这使得查询语法更难掌握。（虽然我可以看到对极端情况的需求，但`$where`查询参数，它采用一个在数据的每条记录上运行并返回一个布尔值的 javascript 函数，是一首 Siren 歌曲，因为您可以轻松定义您想要的对象是否返回，但它必须在数据库中的*每条*记录上运行，不能使用索引。）

所以，这取决于你想做什么，但既然你说它是为了一个谷歌文档克隆，你*可能*不关心任何表示*，但*文档表示本身，你*可能*只会根据文档进行查询ID，文件名称，或所有者的 ID/名称，在查询中没有什么太复杂的。

然后，我会说能够获取用户正在编辑的文档的 JSON 表示，并将其放入数据库并让它自动索引这些重要字段，值得学习新数据库的代价。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-26T13:08:41.360

我也在为这个选择而苦苦挣扎，看看使用 MongoDB 来执行它不是为它构建的任务所创造的炒作。所以我的 2 美分是：

1.  正如 David 所说，在 MongoDB 中存储和检索分层对象（可能是您的文档）更容易。如果你想存储大于 16Mb 的文档，它会变得更加复杂——MongoDB 的答案是 GridFS。

2.  使用 MySQL 将文档组织在文件夹、组中，跟踪哪个用户拥有哪些文档以及他/她提供了对它们的访问权限肯定更容易 - 您拥有强大的 SQL 查询和连接等优势，内置 EXPLAIN 优化、触发器、函数、存储过程等。 MongoDB 远非如此。

那么是什么阻止您使用 MySQL 来组织文档和 MongoDB 来存储一个由 id 标识的文档集合（或多个集合 - 每个文档类型一个）？在我看来，这是最好的选择，并且在一个应用程序中使用两个数据库确实不是问题。

MySQL 将存储用户、组、文件夹、权限——无论你喜欢什么——并且对于每个文档，它将存储对集合的引用和文档 ID（MongoDB 有一种特殊的格式——DBRefs）。MongoDB会将文档本身存储在集合中，如果它们都小于16MB，或者集合中文档的预览和元数据以及GridFS中的整个文档。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-11T17:31:03.570

大卫提供了一个很好的答案。有几件事要补充。

1.  MongoDB 的灵活特性允许轻松敏捷/迭代开发。
2.  像 node.js 这样的 MongoDB 本质上是异步的，并且在异步环境中运行良好。
3.  Mongoose 是一个很好的 ODM（对象文档映射器），它使得使用 Node.js 使用 MongoDB 感觉非常自然。与 ORM 不同，这是一个非常薄的层。

对于类似 Google Doc 的功能，MongoDB 提供的灵活性和非常丰富的数据结构感觉更合适。

您可以通过搜索 mongoose、node 和 MongoDB 找到一些很好的示例帖子。

这是一个也使用backbone.js并且看起来不错[http://mattkopala.com/blog/2012/02/12/getting-started-with-nodejs/](http://mattkopala.com/blog/2012/02/12/getting-started-with-nodejs/)

# math - 板球物理学，基本模拟

> ID：10110039
> 
> 赞同：3
> 
> 时间：2012-04-11T16:27:44.120
> 
> 标签：math, physics, simulation

我正在编写一个模拟板球运动员投球的代码，我已经来到了球员投球的部分。我不认为我对球的模拟非常准确，我不太确定为什么（不知道在物理学中要寻找什么）。到目前为止，我所拥有的与此类似，手臂具有旋转速度，并且在某个点释放球。所以我使用从手臂到球的向量来接近这个，我想出了球应该在正确的法线方向上移动的方向。所以这就是我的方向。

```
throwSpeedHorz = -1*sin(bowlerArmRotation * (3.14159/180)); // * rotationSpeed
throwSpeedVert = cos(bowlerArmRotation * (3.14159/180)); // * rotationSpeed 
```

我遇到的问题是如何使用手臂的速度来获得每个手臂的总速度。我尝试将它乘以旋转速度，这给出了一个太高的速度数字。如果有人能指出我正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:40:46.370

速度通常以每秒转数为单位给出，因此投球手“手​​臂”尖端的速度由下式给出

```
speed = rotationSpeed * 2 * PI * bowlerArmLength 
```

（或更准确地说是球到旋转轴的距离）。然后，您可以按照问题中的描述提取水平和垂直分量。

# xcode - 归档项目不在管理器中；在 Finder 中找到，但文件为 0 字节

> ID：10110040
> 
> 赞同：5
> 
> 时间：2012-04-11T16:27:44.437
> 
> 标签：xcode, archive

我存档了我的项目，并浏览到 Window>Organizer>Archives，但我没有看到存档文件。因此，我无法为我的项目创建 .ipa 文件。

我有另一个项目，所以我把它存档了，而且令人惊讶的是它奏效了。因此，我右键单击存档文件并选择“在 Finder 中打开”。在那里我找到了我以前存档的文件（没有出现在管理器>存档中的文件）。它说它的大小为零字节。这是什么意思？

我该如何解决这个问题？

我已经从 Target 弹出窗口中选择了 iOS 设备，然后选择了模拟器，并且还按照这篇[博文中的](http://www.weston-fl.com/blog/?p=2429)建议将“是”添加到了 Skip Install 中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-09-15T13:27:48.070

将跳过安装更改为**“否”**对我有用。

*我已经从 Target 弹出窗口中选择了 iOS 设备，然后选择了模拟器，并且还按照这篇博文中的建议在 Skip Install 中添加了“是”。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:34:26.167

不确定Reetu Raj 的[本教程](http://soulwithmobiletechnology.blogspot.co.uk/2011/03/how-to-create-distribution-build-with.html)是否会有所帮助，尽管它确实涉及存档，并且它是其他方面的优秀读物。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-18T01:02:51.213

Vern Jensen 所说的正确答案是您需要确保将“安装目录”设置为“/Application/”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-23T03:28:36.120

我花了8个小时解决了这个问题，尝试了所有的解决方案，最后发现我的Archives输出硬盘已经满了……

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T16:34:00.760

根据您使用 .ipa 的目的，确保您的存档方案看起来有点像这样 ![产品 --> 编辑方案](../Images/b9b4cc3cbe3491b963ee09d98118cf11.png)

产品 --> 编辑方案

# oop - 会员“Is-A”人或人“Has-A”注册

> ID：10110044
> 
> 赞同：0
> 
> 时间：2012-04-11T16:28:18.420
> 
> 标签：oop, domain-driven-design

我正在尝试为我们的企业应用程序创建一组模型。它从来没有让它们与数据库非常紧密地联系在一起。在这一点上，我试图简单地回答“Is-A”或“Has-A”问题。我是基于数据库结构的，但我不想被束缚。

首先，我有一个非常明显的 Person 模型，带有典型的“Has-A”电话和地址。几乎所有东西都使用那个 Person 模型并且是“Has-A”。

但是，我们有会员。在我们的数据库/当前系统中，成员是具有注册的人。*具体来说，是取消注册（按日期*） 的某种类型的注册。

一方面，我觉得 Member 会继承形式 Person 作为“Is-A”关系。但是我对这种类型的事情很陌生，我想知道我是否想多了。我的人是“有一个”注册还是暗示其他什么？

这让我想知道，如果我有会员，我是否应该有不同的“Is-A”模型用于预注册、注册、前注册？似乎这更像是一个国家问题，但同样，我对此并不陌生。如果这是一个状态问题，我是否回到只是拥有一个“有-A”注册的 Person 模型？

我理解这在某种程度上是基于意见的，我欢迎每个人对此发表意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:37:41.953

Person 在层次结构中更高更有意义。在所有人的群体中，你有一些成员、一些前成员和一些未来成员。

如果你试着换个角度看，说从所有成员的组中，所有人都是人……但有些人被取消注册？这样就没有多大意义了，因为如果他们被取消注册，那么他们就不再是会员。

除非成为会员和注册没有关联（即，如果您可以取消注册但仍然是会员）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T19:24:46.703

好吧，我会试着回答你的问题，虽然我不完全理解什么是“注册”（我不是以英语为母语的人）我猜它是某种会员资格。

假设您将决定使用 IS-A 关系，因此您最终会得到：Member:Person、VIPMember:Member、ExMember:Member 等。如果您将 Person 对象更改为 Member 或其他任何东西，您会怎么做？您必须将您的对象转换为这种类型，从 Person 对象创建一个 Member 对象复制值......这是很多样板工作。

如果 Object 在创建后更改它的类型，最好使用一些属性来区分它的类型。Cosider Apple : Fruit (Apple 总是 Fruit, 它不能变成 Tomato) 和 CanceledOrder : Order (Order 可以变成 CanceledOrder 所以我更喜欢 Order.State)。对于语言来说尤其如此，因为一旦创建了对象就无法更改它的类型（如 C#）。

至于您的情况，据我了解，我将创建：

```
public class Person
{
    public IEnumerable<Membership> Memberships {get;}

    public bool IsMember 
    {
        get
        {
            return Memberships.Any();
            //Or what ever logic you imply
        }
    }
} 
```

# c++ - 使用字符串流的 C++ iostream 损坏

> ID：10110048
> 
> 赞同：3
> 
> 时间：2012-04-11T16:28:35.803
> 
> 标签：c++, multithreading, thread-safety, iostream

我正在尝试编写一个非常简单的线程安全记录器。理想情况下，我希望它像 一样工作`std::cout`，您可以只重载`<<`运算符，然后让所有内容神奇地显示在日志中。我在 Windows 机器上，所以这是我尝试的方法：

```
// Threadsafe logger
class Logger
{
public:
  Logger()
  {
    InitializeCriticalSection(&s);
  }

  ~Logger()
  {
    DeleteCriticalSection(&s);
  }

  void Log(std::ostream const& os)
  {
    EnterCriticalSection(&s);
    //std::cout << static_cast<std::stringstream const&>(os).str();
    std::cout << os.rdbuf();
    LeaveCriticalSection(&s);
  }

private:
  CRITICAL_SECTION s;
}; 
```

请注意，我已经尝试了两种方法来实现该`Log()`功能。我接受 an 的原因`ostream`是因为这`stringstream`似乎`<<`是在调用运算符之后产生的。当我运行此代码时，该函数的两种变体`Log()`都以相同的方式失败：

```
#include <iostream>
#include <sstream>
#include <Windows.h>

int main(int argc, char* argv[])
{
  Logger logger;
  //logger.Log(std::stringstream("Test"));
  logger.Log(std::stringstream("Another ") << "test");
  std::cin.get();
} 
```

使用 Log 函数的两种变体输出第一行（“测试”）可以正常工作并正确显示。第二行输出一个错位的输出：

`testher`

这显然是`test`写在上面`Another`。我对这些流的工作方式缺少什么？我试着`flush`打电话希望能解决问题，但它什么也没做。

如何在线程安全记录器上尝试与流一起正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T17:05:20.960

至少在我看来，这种解决问题的方法至少使用起来有些笨拙，因为它需要您创建某种辅助`ostream`对象，将数据流式传输到其中，然后将其传递给您的日志。这似乎与你所说的你真正喜欢的不太吻合。

对于您如何完成线程锁定代码，我也有点不高兴。举个例子，如果你在你的过程中遇到异常`std::cout << os.rdbuf();`，你可以退出作用域*而不*离开临界区。

我想我会从关键部分的薄包装开始，添加一个 RAII 样式的类来锁定关键部分（并在超出范围时自动解锁它），然后在实现`Log`类时使用它们。此外，我会作弊并让`Log`该类使用模板成员函数一举接受几乎任何类型的输出：

编辑：经过深思熟虑，我决定接受这样一个概念，即每个问题都可以通过另一个间接级别来解决。为此，我添加了一个中间体`transaction`，它封装了将多个项目的输出链接到 a`stringstream`中，然后将该结果作为线程安全事务写出。

```
#include <windows.h>
#include <iostream>
#include <sstream>

class crit_sect {
    CRITICAL_SECTION cs;

    void lock() { EnterCriticalSection(&cs); }
    void unlock() { LeaveCriticalSection(&cs); }
    friend class lock;

    crit_sect(crit_sect const &); /* = delete; */
    crit_sect &operator=(crit_sect const &other); /* = delete; */
public:
    crit_sect() { InitializeCriticalSection(&cs); }
    ~crit_sect() { DeleteCriticalSection(&cs); }
};

class lock {
    crit_sect &cs;
public:
    lock(crit_sect &c) : cs(c) { cs.lock(); }
    ~lock() { cs.unlock(); }
};

class transaction {
    std::ostringstream buffer;
public:
    transaction(std::string const &s="") : buffer(s, std::ios::out | std::ios::ate) {}

    template <class T>
    transaction &operator<<(T const &t) {
        buffer << t;
        return *this;
    }

    friend std::ostream &operator<<(std::ostream &os, transaction const &t) {
        return os << t.buffer.str();
    }
};

class Log {
    std::ostream &out;
    crit_sect mutex;
public:
    Log(std::ostream &sink) : out(sink) { }

    template <class T>
    void operator<<(T const &t) {
        lock l(mutex);
        out << t;
    }    
};

int main() {
    Log l(std::cout);

    l << "This is a string\n";

    l << (transaction("Another ") << "Test");
    return 0;
} 
```

由于该`log`类型不支持链接，因此任何不使用 a 链接输出的尝试`transaction`都会失败（不会编译）。与原来的相比，用法仍然更简洁——ctor 所需的额外参数`ostringstream`被隐藏了，并且名称`transaction`清楚地说明了正在做什么，或者更确切地说，完成了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T17:35:10.817

使用可变参数模板：

```
void Log_impl(std::ostream &os) {} // recursion base case

template<typename T,typename... Us>
void Log_impl(std::ostream &os,T &&t,Us &&... us) {
    os << std::forward<T>(t);
    Log_impl(os,std::forward<Us>(us)...);
}

template<typename... Ts> void Log(Ts &&... ts) {
    std::stringstream ss;
    Log_impl(ss,std::forward<Ts>(ts)...);
    fprintf(stdout,"%s\n",ss.str().c_str()); // thread safe output
} 
```

用法：

```
Log("Another"," test ",100); 
```

我还没有实际测试过这段代码......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T16:46:39.647

问题不在于记录器，而在于您对 stringstream 的使用。初始化 std::stringstream 时，流的位置指示符位于流的开头。

现在，当您开始使用 '<<' 写入字符串时，您开始在位置指示器处写入，替换之前的任何内容。

要解决此问题，您可以使用 std::stringstream("Another ", stringstream::in | stringstream::out | std::stringstream::ate) 初始化字符串流

（根据[http://www.cplusplus.com/reference/iostream/stringstream/stringstream/](http://www.cplusplus.com/reference/iostream/stringstream/stringstream/)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T16:35:58.083

<< 不会将“test”末尾的空字节发送到您创建的临时字符串流（“Another”）中，这就是您看到“testher”的原因。

# regex - 带有两个有序字符串的 Grep（如正则表达式中的逻辑与）

> ID：10110051
> 
> 赞同：2
> 
> 时间：2012-04-11T16:28:49.553
> 
> 标签：regex, grep

我正在尝试 grep 文件中包含两个字符串的行，因此*string1* logical_ **AND** *string2*。

示例行`grep`：

```
The quick brown fox and the cat 
```

我想`grep`通过匹配*"quick"*和*"the cat"*来消除该行，注意*"the"*和*"cat"*之间的空格。这就是让我失望的原因。

```
grep .*quick.*cat myfile 
```

这很好用，但我想用 grep 搜索*“猫”*；

```
grep .*quick.*the cat myfile 
```

由于空间的原因，显然不起作用。我不明白如何将*“猫”*与其中的空间一起包含在内？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T16:31:20.057

试试这个：

```
grep ".*quick.*the cat" myfile 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T16:32:48.483

尝试在要搜索的字符串周围加上引号，即

```
grep ".*quick.*the cat" myfile 
```

# perforce - 强制更改默认编辑器

> ID：10110052
> 
> 赞同：12
> 
> 时间：2012-04-11T16:28:51.077
> 
> 标签：perforce

我使用 perforce 进行修订控制，当我点击“p4 change”时，它总是会在 emacs 上打开列表，我们都知道删除其中的文本的痛苦。我如何将其更改为 gedit 或 vim 或其他任何东西？我的默认文本编辑器是 gedit。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-11T21:43:39.867

在命令行上，将 P4EDITOR 设置为环境变量或在 P4CONFIG 文件中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-16T17:28:44.110

从命令行，

> p4 设置 P4EDITOR="C:\文件编辑器\editor.exe"

您可以通过运行以下命令来测试这是否成功，这应该会启动您想要的编辑器。

> p4 工作区

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-25T05:52:17.037

我在我的 Windows 系统上遇到了类似的问题。
它总是用来打开笨拙的记事本。我更喜欢`TextPad`，因此要更改默认的 perforce 编辑器，我进行了以下更改：我打开了系统属性并添加了新的环境变量，如下所示：

```
Name: `P4EDITOR` 
Value: `C:\Program Files (x86)\TextPad 4\TextPad.exe` 
```

之后打开一个新的`CMD`，然后就可以了！！！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-11-18T05:25:23.283

对于记事本++，我需要使用此命令`-multiInst`来触发编辑。

```
p4 set P4EDITOR="C:\Program Files (x86)\Notepad++\notepad++.exe -multiInst" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-11T16:34:28.787

尝试设置`EDITOR`环境变量。此外，命令行`p4`应该有一个选项来指定编辑器。此外，该`.p4config`文件可能也有一些东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-22T16:04:10.417

还需要检查 EDITOR/P4EDITOR 路径是否正确。如果路径错误，perforce 将选择以前工作的编辑器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-19T18:13:56.490

在 WSL 的情况下，您的`p4`二进制文件可能是为 Windows 平台提供的，因为那里的路径和操作最兼容，所以`p4.exe`很有可能。那么简单的设置编辑器`P4EDITOR`是不够的，我们必须将基于 Windows 提供的文件路径的输入参数转换为 Linux 路径。

[这个](https://perforce-user.perforce.narkive.com/BKU5iAfe/p4-cygwin-and-windows-paths#post2)19 年前的解决方案仍然有效

这个概念是

*   创建一个接受参数的 bash/shell 脚本。
*   然后在脚本中我们可以使用`wslpath $1`将 Windows 路径转换为 ​​Linux 路径。
*   脚本可以只是

```
#!/bin/bash
vim `wslpath $1` 
```

我想我可能无法使用 Vim 来编辑更改或 perforce 的客户端规范，并且最终不得不使用像记事本这样提供的任何东西（不是反对它，但我只想使用 Vim）。这个解决方案对我有用。

# c# - 从后台线程更新 UI - 我怎么知道我的 GUI 没有被释放？

> ID：10110054
> 
> 赞同：1
> 
> 时间：2012-04-11T16:28:55.070
> 
> 标签：c#, multithreading, user-interface, dispose

我有一个后台线程，一旦完成就会更新 UI。我尽量保证安全，以免调用已处置的 GUI。

```
void DoInBackground()
{
    try 
    {
       string result = ServerSideProcess();
*       if (!IsDisposed && !Disposing)
*          BeginInvoke(new StringDelegate(UpdateText), result);
    }
    catch (Exception ex)
    {
*       if (!IsDisposed && !Disposing)
*          BeginInvoke(new VoidDelegate(UpdateFailed));
    }
}

void UpdateText(string txt)
{
    if (!IsDisposed && !Disposing)
        textbox1.Text = txt;
}

void UpdateFailed() 
{
    if (!IsDisposed && !Disposing)
        textbox1.Text = "failed to get data from server";
}

override Dispose(bool disposing)
{
    if (disposing)
    {
        if (components != null)
            components.Dispose();
    }
    base.Dispose(disposing);
} 
```

我认为我在 GUI 方法中足够安全 - 当我在 UpdateText(string) 或 UpdateFailed() 中时不会调用 Dispose() 因为它们都在同一个线程中运行，所以我假设检查对于 IsDisposing 和稍后执行就足够了。但是我怎么能确定 (*) 中的部分不会在两者之间获得 Dispose()，这将导致 BeginInvoke 在处理类上被调用，并最终导致应用程序崩溃？

我通过在 (*) 部分之间添加 Thread.Sleep(2000) 来测试它，在 Thread.Sleep 之前和之后放置断点，并移出控制使其在到达 BeginInvoke 之前获得 Dispose()d。结果 - 我的应用程序崩溃了。我怎么知道运行时不会给我这种不幸的上下文切换场景？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T16:35:28.120

它看起来像是一个由 Backgroundworker 免费完全解决的问题。

有什么理由不使用它？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T16:34:19.863

我将其称为异常情况——在 BeginInvokes 周围使用 try/catch 来捕获并显式处理抛出的异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T21:24:16.583

以下内容在执行时不会显示任何错误消息：

```
BackgroundWorker bw = new BackgroundWorker();

public Form1()
{
    InitializeComponent();

    bw.DoWork += bw_DoWork;
    bw.RunWorkerCompleted += bw_RunWorkerCompleted;

    Shown += Form1_Shown;
}

void Form1_Shown(object sender, EventArgs e)
{
    bw.RunWorkerAsync();
    Thread.Sleep(1000);
    Dispose();
}

void bw_DoWork(object sender, DoWorkEventArgs e)
{
    //This is your second thread.
    Thread.Sleep(2000);
}

void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    //This runs when the second thread is finished. Update here.
    Text = "Done";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T23:59:16.237

在某些情况下，您可以通过让`Dispose`控件的例程获取锁、设置标志并释放锁来实现干净关闭；您的更新例程应该获取锁，`BeginInvoke`如果未设置标志，则执行该操作，然后释放锁。锁的主要目的是确保一旦更新例程决定调用`BeginInvoke`，在更新发生之前控件不会被释放。

话虽如此，在很多方面，我认为只执行`BeginInvoke`并吞下如果控件从您的下方处置时将发生的异常会更清洁。确实应该有一个`TryBeginInvoke`which 会执行 a`BeginInvoke`并`True`在控件处于活动状态时返回，否则返回`False`，但遗憾的是，没有，也没有任何无竞争的方式来创建一个，而无需将自己注入控件的`Dispose`进程或让异常发生并扼杀它。

# c++ - 递归目录和文件流和搜索字符串

> ID：10110055
> 
> 赞同：0
> 
> 时间：2012-04-11T16:29:03.170
> 
> 标签：c++, c, recursion, directory

我对 walkThroughFunction 中的递归调用有疑问。该代码应该遍历目录并计算子目录，如果找到一个文件，它应该打开它并搜索某个字符串。代码只经过一个目录。有人可以帮我弄这个吗。你会发现牙套有点错位。请忽略那些。

```
int directories=0;
void walkThroughDirectory(char *directory_name,char  *searchString){

DIR * directory;
struct dirent * walker;
char d_name[PATH_MAX];
int path_length;
char path[PATH_MAX];
directory=opendir(directory_name);
if(directory==NULL){
    cout<<"Error"<<endl;
    cout<<directory_name<<"  Cannot be Opened"<<endl;
    exit(10000);
}
while((walker=readdir(directory)) !=NULL){

    strcpy(d_name,walker->d_name);
    cout<<directory_name<<"/"<<endl;
    if (strcmp (d_name, "..") == 0 &&
            strcmp (d_name, ".") == 0){
        continue;
    }
    else{

        path_length =      snprintf(path,PATH_MAX,"%s/%s\n",directory_name,d_name);
        cout<<"HELLO"<<endl;
        cout<<path<<endl;
        if (path_length >= PATH_MAX){
            cout<<"Path is too long"<<endl;
            exit (1000);
        }
        if(walker->d_type==DT_DIR){
            cout<<"Hello"<<endl;
            directories++;
            walkThroughDirectory (path,searchString);
        }
        else if(walker->d_type==DT_REG){   
            ifstream openFile;
            openFile.open(path);
            char line[1500];
            int currentLine = 0;
            if (openFile.is_open()){
                while (openFile.good()){
                    currentLine++;
                    openFile.getline(line, 1500);
                    if (strstr(line, searchString) != NULL)
                        cout<<path<<": "<<currentLine<<": "<<line<<endl;
                }
            }
            openFile.close();    
        }
        /*
        struct stat directory_stat;
        if (stat(path, &directory_stat) == -1){

            return;
        }
        if (S_ISDIR(directory_stat.st_mode)){
            cout<<"HELLO"<<endl;

            directories++;
            walkThroughDirectory(path, searchString);
        } 
        else if (S_ISREG(directory_stat.st_mode)){

            ifstream openFile;
            openFile.open(path);
            char line[1500];
            int currentLine = 0;
            if (openFile.is_open()){
                while (openFile.good()){
                    currentLine++;
                    openFile.getline(line, 1500);
                    if (strstr(line, searchString) != NULL)
                        cout<<path<<": "<<currentLine<<": "<<line<<endl;

                }

            }
            // it's a file so search for text in file

        }
        */

    }

}

if (closedir (directory)) 
{
    cout<<"Unable to close  "<<directory_name<<endl;
    exit (1000);
}
}

int main(){

    char * name;
    name=new char;

    cout<<"Total Directories  "<< directories<<endl;

    name=get_current_dir_name();
    cout<<"Current Directory is:  "<<name<<endl;
    /*
    cout<<"Now Enter The Desired Directory from the root or the current path"<<endl;
    char *desiredDirectory;
    desiredDirectory=new char;
    cin>>desiredDirectory;
    cout<<"Enter The String You want to search"<<endl;
    char *searchString;
    searchString=new char;
    cin>>searchString;
    */
    char ourpath[400];
    strcpy(ourpath,name);

    walkThroughDirectory(ourpath,"diminutive");
    cout<<"Total Directories  "<< directories<<endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:18:44.777

这段代码有几个问题。首先，当您执行时`strcmp`检查是否`d_name`为“。” 或“..”，您需要使用 OR，而不是 AND。其次，当您调用`sprintf`创建 c-string时，字符串`path`末尾不应有换行符。这就是导致您的代码仅深入一级的原因。第三，当您调用时`get_current_dir_name`，它会`malloc`为您完成所有工作。您正在做的是为单个字符分配空间，这本身不起作用，也不是 API 的正确使用。请参阅[get_current_dir_name 的手册页](http://linux.die.net/man/3/get_current_dir_name)。

下面的代码解决了这些问题（并且也有适当的缩进）。

```
#include <iostream>
#include <fstream>
#include <stdlib.h>
#include <unistd.h>
#include <dirent.h>
#include <limits.h>
#include <string.h>

int directories=0;
void walkThroughDirectory(char *directory_name,char *searchString)
{
    DIR *directory;
    struct dirent *walker;
    char d_name[PATH_MAX];
    int path_length;
    char path[PATH_MAX];
    directory = opendir(directory_name);

    if(directory == NULL)
    {
        std::cout << directory_name << "  Cannot be Opened" << std::endl;
        exit(1);
    }

    while((walker=readdir(directory)) != NULL)
    {
        strcpy(d_name, walker->d_name);

        // Needs to be || not &&
        if (strcmp(d_name, "..") == 0 || strcmp(d_name, ".") == 0) 
        {
            continue;
        }
        else
        {
            // No newline on the path name.
            path_length = snprintf(path, PATH_MAX, "%s/%s", directory_name, d_name);

            if (path_length >= PATH_MAX) 
            {
                std::cout << "Path is too long" << std::endl;
                exit(2);
            }

            if(walker->d_type == DT_DIR)
            {
                directories++;
                walkThroughDirectory(path, searchString);
            }
            else if(walker->d_type==DT_REG)
            {
                std::ifstream openFile;
                openFile.open(path);
                char line[1500];
                int currentLine = 0;

                if (openFile.is_open())
                {
                    while (openFile.good())
                    {
                        currentLine++;
                        openFile.getline(line, 1500);
                        if (strstr(line, searchString) != NULL)
                        std::cout << path << ": " << currentLine << ": " << line << std::endl;
                    }
                }
                openFile.close();    
            }
        }
    }

    if (closedir(directory)) 
    {
        std::cout << "Unable to close " << directory_name << std::endl;
        exit(3);
    }
}

int main()
{
    // get_current_dir_name() mallocs a string for you.
    char *name;

    name = get_current_dir_name();
    walkThroughDirectory(name, "matthew");
    free(name);
    std::cout << "Total Directories: " <<  directories << std::endl;

    return 0;
} 
```

# memory-leaks - JavaFX 2.0 创建多个场景时的内存泄漏

> ID：10110058
> 
> 赞同：5
> 
> 时间：2012-04-11T16:29:34.557
> 
> 标签：memory-leaks, garbage-collection, javafx

我创建了一个引发内存泄漏的示例应用程序。

问题是我需要“重新加载”场景。如果我有两个场景（Bar 和 Foo），每个场景都有一个按钮（ButtonBar 和 ButtonFoo），则这些按钮会更改当前场景并创建一个新场景。如果我一直单击 ButtonBar 和 ButtonFoo 5 分钟（或更短时间），那么这个简单程序的内存消耗会越来越高。

酒吧.java

```
public class Bar implements Initializable {

@FXML
private Label label;

@FXML
private void toFoo(ActionEvent event) {
    try {
        Button button = (Button) event.getSource();
        Parent root = FXMLLoader.load(getClass().getResource("Foo.fxml"));
        Stage currentStage = (Stage) button.getScene().getWindow();
        currentStage.setScene(new Scene(root));
    } catch (IOException ex) {
        Logger.getLogger(Bar.class.getName()).log(Level.SEVERE, null, ex);
    }
}

@Override
public void initialize(URL url, ResourceBundle rb) {
    // TODO
}    
} 
```

Foo.java 是相同的改变 de fxml 加载。

fxml 只包含一个按钮：

```
<Button id="buttonBar" layoutX="126" layoutY="90" text="Bar!" onAction="#toFoo" fx:id="buttonBar" /> 
```

是否存在真正的内存泄漏问题？有谁知道另一种方法来做到这一点？我希望这个应用程序保持活力并永远进行更改，就像一项服务一样。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:00:50.130

我不确定内存泄漏，但出于性能原因，我会避免重复加载资源。

我所做的是将根 Parent 保存在一个变量中并将其添加到场景中，或者在我的情况下根据需要添加到另一个场景的特定部分，通过控制器类的静态方法更新值。

我有几个这样的预加载场景，每次用户从列表中选择某些值时，它们都会更新更大场景的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-08T01:22:46.587

我建议你试试FX8。那里已经对内存泄漏进行了大量修复。

如果您无法更新到最新版本的 JavaFX，我建议您不要`onAction="#toFoo"`在 FXML 中使用。

相反，声明一个事件处理程序并调用以下内容：`buttonBar.addEventHandler(MouseEvent.MOUSE_CLICKED, declaredEventHandler);`.

在退出当前屏幕之前释放事件处理程序：`buttonBar.removeEventHandler(declaredEventHandler);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T14:00:40.430

我有类似的问题。

当我在现场移动鼠标时。内存使用量增加并且**永远不会**下降。

我相信这与鼠标事件有关。

祝你好运！

# c++ - 如何在 ATL/WTL 对话框上注册自定义控件？

> ID：10110061
> 
> 赞同：2
> 
> 时间：2012-04-11T16:29:50.913
> 
> 标签：c++, winapi, visual-c++, atl, wtl

我已经派生了一个自定义控件`ATL::CWindowImpl<CMyCustomControl>`并声明了`DECLARE_WND_CLASS(_T("CMyCustomControl"))`.

我还制作了一个带有类名的自定义控件的对话框资源`CMyCustomControl`。

如何正确注册控件以便在对话框中显示它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T19:40:45.667

在 WTL 中创建自定义控件有三种典型的方法。

1.  `DECLARE_WND_CLASS`/ `DECLARE_WND_SUPERCLASS`+ `RegisterClassEx`API 按名称注册类 + 对话框模板中的自定义控件引用通过类名称实例化控件
2.  实现窗口类，尤其是。继承自`CWindowImpl`，并手动创建控件，尤其是。从`OnCreate`/`OnInitDialog`
3.  实现窗口类，通过对话框模板实例化标准控件，并子类化控件实例以改变其行为（例如，带有超链接的静态、自定义列表视图、带有颜色突出显示的编辑控件等）

对于所有这三个，您需要做的不仅仅是类定义中的宏。你会在这里找到很好的例子：http: [//www.viksoe.dk/code/all_wtl.htm](http://www.viksoe.dk/code/all_wtl.htm)在“控制”部分。

当然，第四种方法是实现一个 ActiveX 控件。

# gwt - GWTTestCase 与 RequestFactory 返回 404

> ID：10110067
> 
> 赞同：0
> 
> 时间：2012-04-11T16:30:07.390
> 
> 标签：gwt, junit, requestfactory, gwttestcase

我无法让 RequestFactory 与 GWTTestCase 一起工作。我看到以下内容：

```
[WARN] 404 - POST /com.traviswebb.MyApp.JUnit/gwtRequest (127.0.0.1) 1439 bytes 
```

在我的 MyAppJUnit.gwt.xml 文件中，我有这个：

```
<servlet path='/gwtRequest' class='com.google.web.bindery.requestfactory.server.RequestFactoryServlet'/> 
```

当我在浏览器中运行它时，它只是请求`/myApp/gwtRequest`，因为我已经`rename-to`在模块文件中设置了。我尝试在 JUnit 模块中设置相同的内容，但没有效果。绝望中我什至尝试添加

```
<url-pattern>/com.traviswebb.MyApp.JUnit/gwtRequest</url-pattern> 
```

到我的 web.xml，但这也不起作用。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:58:07.860

按照我通常的 Stackoverflow 流程，我再次回答我自己的问题。作为最后的手段，我检查了`maven-surefire-plugin`我使用的版本，它实际上是 2.5。这是两岁多了！这就是我直接从教程中复制代码所得到的。无论如何，我升级到 2.12 并且没有更改配置，问题就消失了。

# php - 从第二个表中计算行数

> ID：10110069
> 
> 赞同：1
> 
> 时间：2012-04-11T16:30:14.877
> 
> 标签：php, mysql, count, left-join

我在mysql数据库中有两个表

团体

```
id|name
_______
1 |red
2 |blue
3 |green
4 |white 
```

和用户

```
id|name  |group
_______________
1 |joe   |1
2 |max   |1
3 |anna  |2
4 |lisa  |2 
```

所以... joe 和 max 属于“red”组，anna 和 lisa 属于“blue”组。

如何制作包含该组中人数的组的简单列表 例如

```
red - 2
blue - 2
green - 0
white - 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:35:32.353

检查这是否有效....

```
SELECT COUNT(*), groups.name FROM groups, users WHERE users.group=groups.id GROUP BY groups.name 
```

**更新**

```
SELECT groups.name, COUNT(users.*) FROM groups LEFT JOIN users
ON groups.id=users.group GROUP BY groups.name 
```

这将保留颜色，即使它们没有任何相关的名称

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:42:24.157

大多数其他答案基本上是正确的，但忘记了一个重要的细节：`GROUP`是SQL中的保留字，所以你的列名必须转义：

```
SELECT groups.name, COUNT(*) AS total_members
FROM groups 
LEFT OUTER JOIN users 
ON users.`group` = groups.id
GROUP BY groups.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T16:37:23.997

试试这个：

```
select g.name, count(u.id) from groups g
left join users u on g.id = u.group
group by g.id, g.name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T16:37:31.847

试试这个

```
SELECT COUNT(g.id) as count, g.name 
FROM groups as g
LEFT JOIN users as u 
ON u.group = g.id
GROUP BY g.id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T16:46:02.223

这应该工作

```
SELECT g.*, COUNT(DISTINCT u.id) FROM `groups` g
INNER JOIN `users` u on g.id = u.group
GROUP BY u.id 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T17:00:07.770

也许这应该工作

```
SELECT g.name, COUNT( u.id ) AS Totoal
FROM  `groups` g
INNER JOIN  `users` u ON g.id = u.group
GROUP BY g.id 
```

# c# - 我的 javascript 变量在函数调用之间变得未定义

> ID：10110070
> 
> 赞同：0
> 
> 时间：2012-04-11T16:30:18.997
> 
> 标签：c#, javascript

我有一个表单，当按下链接按钮时，它会调用一些 javascript 和一些代码（对我来说是 C#）。正常操作应该是这样的：单击从表单上的标签获取文本的链接按钮，打开 HTML 编辑器，通过单击文本编辑器上的“完成”保存文本，然后再次在表单上显示文本。它将完成所有这些，但我收到一个错误（控件未定义），然后阻止我在表单上执行任何其他工作。

首先，这是我的 aspx 代码，它是一个包含 HTML 编辑器和 HTML 编辑器的窗口。

```
<asp:Panel ID="EditCommentPopup" runat="server" SkinID="PopupPanel" HorizontalAlign="Center" Width="500px" Style="display:none;">
                <div id="SendCommentHeader" class="modalPopupHeader">
                    <table width="100%" style="vertical-align: middle">
                        <tr>
                            <td style="width: 50%; text-align: left; padding-left: 5px;">
                                <asp:Label ID="EditCommentHeaderLBL" runat="server" Font-Bold="true" Text="Change Comment" ></asp:Label>
                            </td>
                            <td style="width: 50%; text-align: right; padding-right: 3px;">
                                <asp:Button SkinID="SubmitButton" ID="SaveComment" runat="server" Text="Done" OnClientClick="submitEditorPopup(); return true;" OnClick="SubmitCommentButton_Click"/>
                                <asp:Button SkinID="CancelButton" ID="cancelCommentButton" runat="server" Text="Cancel"/>
                            </td>
                        </tr>
                    </table>
                </div>
                <ajaxToolkit:ModalPopupExtender ID="EditCommentPopupExtender" runat="server" TargetControlID="EditCommentHeaderLBL"
                        PopupControlID="EditCommentPopup" BackgroundCssClass="modalBackground" PopupDragHandleControlID="EditCommentPopup"
                        DropShadow="False" CancelControlID="cancelCommentButton" BehaviorID="ChangeCommentsPopup" >
                </ajaxToolkit:ModalPopupExtender>
                <asp:Panel ID="EditCommentInnerPanel" SkinID="PopupInnerPanel" HorizontalAlign="Center" runat="server" >
                    <asp:Label ID="CommandArgLBL" runat="server" Visible="false"></asp:Label>
                    <custom:CustomTextEditor ID="EditCommentsTextBox" runat="server" Width="100%" Height="300px" NoScript="true" />
                </asp:Panel>
            </asp:Panel> 
```

这是我的javascript函数

```
var contentLBL;
var editorControl;
var hiddenField;
function LoadEditorPopup(labelID, editorID, hiddenID, linkID) {
    editorControl = document.getElementById(editorID);
    contentLBL = document.getElementById(labelID);
    hiddenField = document.getElementById(hiddenID);
    editorControl.control.set_content(contentLBL.innerHTML);
    var popup = $find("ChangeCommentsPopup");
    popup.show();

}

function submitEditorPopup() {
    var tmp = editorControl.control.get_content(); //error flags here
    contentLBL.innerHTML = tmp;
    var str= new String();
    str = tmp;
    str = str.replace(/</g, "{%");
    str = str.replace(/>/g, "%}"); //stripping out html tags to prevent sql insertion
    hiddenField.value = str;
    var popup = $find("ChangeCommentsPopup");
    popup.hide();
} 
```

这是我的 C# 函数

```
protected void ShowEditCommentPopup(object sender, EventArgs e)
{
    string arg = ((LinkButton)sender).CommandArgument;
    string content = "";
    string title = "";
    switch (arg)
    {
        //doing stuff, setting content and title
    }
    EditCommentHeaderLBL.Text = title;
    CommandArgLBL.Text = arg;
    EditCommentsTextBox.Content = content;
    EditCommentPopupExtender.Show();

    EditModalPopupExtender.Show(); //this is the form
} 
```

所以，这里发生了什么，我单击一个链接按钮（未显示在 aspx 代码中），它会触发 javascript 中的 LoadEditorPopup 函数。它完成了它的工作，我在 onclientclick 调用中有一个“return true”，以便调用后面代码中的下一个函数 ShowEditCommentPopup。编辑器弹出，我可以很好地使用它。当我单击“完成”时，在 javascript 中触发了 SubmitEditorPopup 事件，并且我收到一条错误消息，指出变量 EditorControl 未定义。我发现，如果我不调用 ShowEditCommentPopup 方法，则不会发生错误，但是我又回到了我最初遇到的另一个问题，我希望如果这个问题得到解决，这个问题将得到解决。

我真的希望这已经足够清楚了。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:36:09.820

您有一个带有 javascript 函数的片段。该代码在哪里？它在可能被第二次调用的类或函数中？如果是这样，`var editorControl;`可能会再次运行并覆盖您以前的 editorControl 变量。我会发出警报`var editorControl;`以确保。

```
alert( 'Should only happen once' );
var editorControl; 
```

由于这没有帮助，我想你可以尝试更换

```
var tmp = editorControl.control.get_content(); 
```

和

```
tmp = document.getElementById(editorID); 
```

在提交编辑器弹出窗口中。

# javascript - 如何使用 Keydown 事件在多种语言/键盘布局中获取正确的字符？

> ID：10110073
> 
> 赞同：5
> 
> 时间：2012-04-11T16:30:27.800
> 
> 标签：javascript, jquery

我在 jquery 中使用 keydown 事件，但问题是输入语言是无状态的。它无法确定输入是英语还是希伯来语或阿拉伯语......？它只返回键码，我无法获得字符。

有什么解决办法吗？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T21:52:04.390

要确定实际字符，您应该使用[keypress](http://api.jquery.com/keypress/)事件而不是`keydown`. 同时`keydown`为您提供一个键码，`keypress`表示用户输入的字符。

另一个区别是，当用户按住某个键时，一个`keydown`事件只触发一次，但`keypress`每个插入的字符都会触发单独的事件。

下面是一个使用`keypress`事件的例子：

```
<body>
<form>
  <input id="target" type="text" />
</form>

<script src="http://api.jquery.com/scripts/events.js"></script>
<script>
  $("#target").keypress(function(event) {
    var charCode = event.which; // charCode will contain the code of the character inputted
    var theChar = String.fromCharCode(charCode); // theChar will contain the actual character
  });
</script>
</body> 
```

# jquery - 漏洞？Jquery Mobile Event 仅使用 live() 和 pageshow 事件触发一次

> ID：10110075
> 
> 赞同：0
> 
> 时间：2012-04-11T16:30:32.153
> 
> 标签：jquery, jquery-mobile, cordova

尝试使用 jquery mobile 触发事件（登录单击按钮），但它只能工作一次。

我让它在'pageshow'事件上触发（因为整个jquery ajax pageload的东西，文档准备不适用）但它只在第一次加载时起作用，我尝试了一个可以触发的警报。所以一定是$('.check-login')中的.live()事件。我希望你们能对此有所了解。

jQuery代码：

```
 $('#home').live('pageshow', function(event){
                             alert('home');//fires okay

                             //fires once only
                             $('.check-login').live('click', function() {
                                        var email = $("#email").val();
                                        var password = $("#password").val();
                                        if(email !="" || password !=""){
                                        var datastring = "useremail=" + email + "&userpassword=" + password;                 
                                                              $.ajax({
                                                              type: "POST",
                                                              url: 'http://creativetree.co/creativetreeBeta/mobileImageUpload.php',
                                                              data: datastring,
                                                              success: function(data){
                                                              //success
                                                              $('.check-login').slideUp();
                                                              $('.upload-page').fadeIn();
                                                              $('#userlogin').slideUp();  
                                                              }
                                                              });

                                        }else{
                                        alert('Please fill in all fields');
                                        }
                             });
                             }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:11:06.643

浏览：[JqueryMobile - 脚本页面](http://jquerymobile.com/demos/1.0b2/#/demos/1.0b2/docs/pages/page-scripting.html)

这是因为当您在 jQuery Mobile 网站上为同一个项目（内部）点击链接时，页面会加载 AJAX 并且仅替换正文。因此，如果您想在页面加载后添加的任何 dom 元素上触发任何事件，您需要使用 .live() 函数而不是单击。当您遍历页面时，它不会重新加载页面，它只是来自 jQuery-Mobile 本身的内部 ajax 调用。

# asp.net-mvc-3 - MVC3 URL 参数 - 避免恶意攻击/安全漏洞

> ID：10110078
> 
> 赞同：0
> 
> 时间：2012-04-11T16:30:35.713
> 
> 标签：asp.net-mvc-3, security, url, parameters

导航到新网页时，是否有传递 ID 的“最佳实践”。

例如，一个人注册使用一个网站，他们得到一个 ID，这需要在用于从数据库中检索相关数据的网站/页面的其余部分传递。

如果 Id 在 url 中传递： [http://myWebsite.com/User/Details/1234](http://myWebsite.com/User/Details/1234)，用户可以将其更改为 [http://myWebsite.com/User/Details/4567](http://myWebsite.com/User/Details/4567)并可能收回其他用户的详细信息。

将此值放在隐藏字段中然后发布也不会很好，因为“查看源代码”会显示该值。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T16:32:06.293

这就是为什么您应该始终验证此 id 属于当前经过身份验证的用户的原因。当前已通过身份验证的用户存储在表单身份验证 cookie 中，并且用户无法更改，因为该值已加密。此 cookie 在用户登录时发出，您可以在任何有实例的地方访问它`HttpContextBase`（这几乎是 MVC 模式的 V 和 C 部分的任何地方）。

例如，像这样：

```
[Authorize]
public ActionResult Foo(int id)
{
    string currentUser = httpContext.User.Identity.Name;
    // TODO: go ahead and check in your backed that the id 
    // belongs to the currently connected user
    ...
} 
```

显然，在所有控制器操作中一遍又一遍地编写这些检查很快就会变得无聊，更不用说这种方法的干燥性了。这就是为什么建议编写一个自定义的 Authorize 属性，该属性将在进入控制器操作之前执行这些检查。然后，您将使用此自定义属性装饰您的控制器操作，并且您将确定如果代码已到达操作内部，则意味着当前用户是作为参数传递的 id 的所有者。这个 id 作为参数传递的方式并不重要。可以是路由数据、查询字符串、POST 等等。用户可以随意修改它。重要的部分是您确保他输入的值与您的域授权逻辑一致。

所以：

```
public class AuthorizeOwnerAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var authorized = base.AuthorizeCore(httpContext);
        if (!authorized)
        {
            // the user is either not authenticated or not authorized
            // no need to continue any further
            return false;
        }

        // at this stage we know that the user is authenticated and
        // authorized (in roles), so let's go ahead and see who this 
        // user is
        string username = httpContext.User.Identity.Name;

        // now let's read the id. In this example I fetch it from
        // the route data but you could adapt according to your needs
        string id = httpContext.Request.RequestContext.RouteData.Values["id"] as string;

        // Now that we know the user and the id let's go ahead and 
        // check in our backend if the user is really the owner
        // of this id:
        return IsOwner(username, id);
    }

    private bool IsOwner(string username, string id)
    {
        // go ahead and hit the backend             
        throw new NotImplementedException();
    }
} 
```

进而：

```
[AuthorizeOwner]
public ActionResult Foo(int id)
{
    ...
} 
```

# perl - 来自多个名称服务器的 DNS 解析器结果

> ID：10110079
> 
> 赞同：1
> 
> 时间：2012-04-11T16:30:38.907
> 
> 标签：perl, dns

我将两个名称服务器传递给[`Net::DNS::Resolver`](https://metacpan.org/module/Net%3a%3aDNS%3a%3aResolver)构造函数，但我只得到一个结果。

我应该如何更改代码以接收来自所有名称服务器的结果？

```
sub resolve_dns()
{
    my $dns = $_[0];
    my $res   = Net::DNS::Resolver->new(

                nameservers => [qw(24.116.197.232 114.130.11.67 )],
                recurse     => 0,
                debug       => 1,
                tcp_timeout => 3
                );
    my $query = $res->search($dns);

    if ($query) {
        foreach my $rr ($query->answer) {
            next unless $rr->type eq "A";
            print $rr->address, "\n";
        }
    } else {
        warn "query failed: ", $res->errorstring, "\n";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T17:29:48.833

我认为第一个 DNS 服务器之后的 DNS 服务器是出于后备目的，并且只会返回一个回复。

最好的方法似乎是操纵`Net::DNS::Resolver`服务器列表并明确地向每个人发出请求。

此示例代码演示了原理

```
sub resolve_dns {

  my $address = shift;

  my $res = Net::DNS::Resolver->new
    recurse     => 0,
    debug       => 1,
    tcp_timeout => 3,
  );

  for my $ns (qw( 24.116.197.232  114.130.11.67 )) {

    $res->nameservers($ns);

    my $reply = $res->send($address);

    if ($reply) {
      my @type_a = grep $_->type eq 'A', $reply->answer;
      print $_->address, "\n" for @type_a;
    }
    else {
      warn sprintf "Query to %s failed: %s\n", $ns, $res->errorstring;
    }
  }

} 
```

# java - 在 Hibernate 中使用原语或包装类？

> ID：10110081
> 
> 赞同：5
> 
> 时间：2012-04-11T16:30:47.637
> 
> 标签：java, hibernate, mapping, double, primitive

使用 Hibernate 映射数据库。

我们应该使用带有 @NotNull 约束的 Double 或使用 double 原始类型。最佳做法是什么？（使用 Java 6）

```
@Column(name = "price_after_tax", nullable=false)
@NotNull
public Double getPriceAfterTax() {
    return priceAfterTax;
} 
```

或者

```
@Column(name = "price_after_tax")
public double getPriceAfterTax() {
    return priceAfterTax;
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T16:42:43.703

我认为您应该使用`Double`它，因为它甚至可以保存空值。因此，将来如果您决定使 DB 列可以为空，那么您是安全的。在这种情况下，您只需要删除`@NotNull'. You can not use the primitive`double`。

无论如何，hibernate 是对象关系映射，我总是坚持在我的实体 bean 中使用对象。这是一个有争议的观点。

原语甚至存在逻辑问题，比如您不知道或没有`priceAfterTax`. 如果您使用原语，则默认值将始终存在`0.0`。上面说**没有税！**. 但是当我使用`Double`它时`null`，默认情况下意味着**我不知道税是多少。**

# c++ - 向成员函数添加 const 限定符

> ID：10110082
> 
> 赞同：5
> 
> 时间：2012-04-11T16:30:48.357
> 
> 标签：c++, templates, c++11, template-meta-programming, typetraits

我目前正在编写一个接口类，它应该提供对复杂结构的内部元素作为 const 或非 const 引用的访问。这个想法是某些模块被授予 const 访问权限，而某些模块被授予完全访问权限。

我已经使用 'type_traits' 'std::add_const' 有条件地限定内部成员函数的返回类型，不幸的是我想不出有条件地将成员函数限定为 const 或非 const 的方法。

这甚至可能吗？如果是这样怎么办？

例如：

```
template< typename T, bool isConst  >
struct apply_const
{
    typedef T type;
};

template<typename T>
struct apply_const<T, true>
{
    typedef typename std::add_const<T>::type type;
};

template< bool isConst >
const Interface
{
    /// @brief get the TypeA member
    typename apply_const<TypeA, isConst >::type& GetXpo3Container()  // how do I conditionally add a const qualifier
    {
        return config_.type_a_member_;
    }

    typename apply_const<Profile, isConst >::type& GetProfile( unint32_t id )  // qualifier ???
    {
        return config_.profiles.get( id );
    }

    // .... lots more access functions

    ConfigType config_; // the config
}; 
```

注意：分离/创建两个版本的接口的根本原因是它们将提供对不同实例的访问`config`——一个是可写的，一个是不可写的。正在开发的子系统是一个嵌入式Netconf Agent，它支持`<running>`和`<candidate>`配置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T16:40:38.643

这似乎最容易通过专业化来完成：

```
template< bool isConst >
struct Interface;

template <>
struct Interface<false>
{
    TypeA& GetXpo3Container()
    {
        return config_.type_a_member_;
    }
};

template <>
struct Interface<true>
{
    const TypeA& GetXpo3Container() const
    {
        return config_.type_a_member_;
    }
}; 
```

*编辑*：虽然我不完全确定这增加了什么。拥有会不会更容易

```
struct Interface
{
    TypeA::type& GetXpo3Container()
    {
        return config_.type_a_member_;
    }
    const TypeA::type& GetXpo3Container() const
    {
        return config_.type_a_member_;
    }
}; 
```

并`const Interface`在适当的地方使用？或者这不是出于其他原因的选择吗？

*编辑2*：我的`std::enable_if`使用是错误的，现在已经消失了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T16:50:45.000

您可以使用 SFINAE：

```
template<bool isConst>
struct Interface
{
    template<
        bool Cond = isConst
        , typename std::enable_if<!Cond, int>::type = 0            
    >
    TypeA&
    GetXpo3Container() const
    {
        return config_.type_a_member_;
    }

    template<
        bool Cond = isConst
        , typename std::enable_if<Cond, int>::type = 0
    >
    TypeA const&
    GetXpo3Container() const
    {
        return config_.type_a_member_;
    }
}; 
```

请注意，这两个成员需要成为模板，并且我使用默认参数强制`typename std::enable_if<Cond, int>::type`依赖 - 在类的范围内`std::enable_if<isConst, int>::type`不*依赖*，因此在实例化类时会产生硬错误，而我们想要 SFINAE。

然而，默认参数意味着有人可以做例如`Interface<true> f; TypeA& ref = f.GetXpo3Container<false>();`. 如果您想避免这种情况（例如，您不相信用户不会滥用您界面中未指定的部分），这里有另一种方法可以让成员再次`type`成为`std::enable_if`dependent，这可能更合适，但更神秘：

```
template<typename T, T Value, typename>
struct depend_on_c {
    static constexpr T value = Value;
};

/* and in the scope of Interface: */
    template<
        typename Dummy = void
        , typename std::enable_if<
            depend_on_c<bool, isConst, Dummy>::value
            , int
         >::type = 0
    >
    /* rest as before */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T16:41:18.117

您可以针对正确的情况专门化您的模板`isConst`，并在这种情况下制作所有成员函数`const`，同时将它们留在非`const`主模板中。

或者，编写两个版本的成员函数（一个版本`const`和一个不版本），并使用`enable_if`仅启用适当的重载。

# python - 在 python 中将 wiki 文本转换为 html 以在网站中显示

> ID：10110083
> 
> 赞同：3
> 
> 时间：2012-04-11T16:30:51.670
> 
> 标签：python, html, markup, wikipedia, wikitext

我知道关于这个主题有很多问题，但是经过 6 小时的尝试这个和尝试那个工具后，我仍然找不到一个采用 wikitext 形式的工具

```
'<center>Welcome to the world's foremost open content<br><big><big><big>'''Organic Chemistry Textbook'''</big></big></big><br>on the web!</center> {| cellpadding="5" |- | <noinclude><big>'''[[Organic Chemistry|Go&nbsp;to&nbsp;contents&nbsp;>>]]'''</big> </noinclude> | [[Image:Ethane3D.png]] | This '''free''' online text is intended to become a ''complete replacement'' for your printed book. |} == The Study of Organic Chemistry == Organic chemistry is primarily devoted to the unique properties of the carbon atom and its compounds. These compounds play a critical role in biology and ecology, Earth sciences and geology, physics, industry, medicine and &mdash; of course &mdash; chemistry. At first glance, the new material that organic chemistry brings to the table may seem complicated and daunting, but all it takes is concentration and perseverance. Millions of students before you have successfully passed this course and you can too! This field of chemistry is based less on formulas and more on reactions between various molecules under different conditions. Whereas a typical general chemistry question may ask a student to compute an answer with an equation from the chapter that they memorized, a more typical organic chemistry question is along the lines of "what product will form when substance X is treated with solution Y and bombarded by light". The key to learning organic chemistry is to ''understand'' it rather than cram it in the night before a test. It is all well and good to memorize the mechanism of Michael addition, but a superior accomplishment would be the ability to explain ''why'' such a reaction would take place. As in all things, it is easier to build up a body of new knowledge on a foundation of solid prior knowledge. Students will be well served by much of the knowledge brought to this subject from the subject of [[General Chemistry]]. Concepts with particular importance to organic chemists are covalent bonding, Molecular Orbit theory, VSEPR Modeling, understanding acid/base chemistry vis-a-vis pKa values, and even trends of the periodic table. This is by no means a comprehensive list of the knowledge you should have gained already in order to fully understand the subject of organic chemistry, but it should give you some idea of the things you need to know to succeed in an organic chemistry test or course. Organic Chemistry is one of the subjects which are varying useful and close to our daily life. We always try to figure out some of the unknown mysteries of our daily life through our factious thinking habit, which generates superstitions. Through the help of chemistry we can help ourselves to get out of this kind of superstition.     We always try to find the ultimate truth through our own convenience. In the ancient past we had struggled to make things to go as per our need. In that context we have found fire, house, food, transportation, etc… Now the burning question is: "how can chemistry help our daily life?" To find the answer of this questions, we have to know the subject thoroughly. Let us start it from now. {{BookCat}}' 
```

并返回我相应`html`的 . 请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-05T23:54:24.720

在 Python 中？我不知道该语言的wikitext有什么好的解析器。如果你愿意运行 node.js，你可以使用[Parsoid](https://www.mediawiki.org/wiki/Parsoid)。否则，您将不得不使用[API](https://en.wikipedia.org/w/api.php?action=help&modules=parse)。确保您在获得 wikitext 的域上运行它，以便正确解析图像和嵌入等内容。

# arrays - 数组中的 AS3 按钮引用

> ID：10110087
> 
> 赞同：0
> 
> 时间：2012-04-11T16:31:04.330
> 
> 标签：arrays, actionscript-3, flash-cs5

我在一个影片剪辑中有两个按钮，我如何像使用下面的 2 个按钮一样引用它们，以便可以将它们添加到数组中？

container.anotherButton 和 container.anotherButton2 是我要添加到数组中的按钮。

```
var agreeButton:SimpleButton;
var disagreeButton:SimpleButton;

var buttonArray:Array = new Array(agreeButton, disagreeButton);

for (var i:int = 0; i < buttonArray.length; i++) {    
   buttonArray[i].addEventListener(MouseEvent.CLICK, mouseClick);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:37:23.857

我不确定问题是什么，我认为这就是您所需要的。

```
var buttonArray:Array = new Array(container.anotherButton, container.anotherButton2); 
```

即使您移动容器/按钮，引用也将保持不变。

# c# - 从 DataGridView 和数据库中删除选定的行

> ID：10110096
> 
> 赞同：1
> 
> 时间：2012-04-11T16:31:20.067
> 
> 标签：c#, winforms, entity-framework, datagridview

我想从中删除选定的行`DataGridView`，这个删除应该会影响数据库。我正在使用`Entity Framework`，那是我的代码不起作用。

```
private void button4_Click(object sender, EventArgs e)
{
    var toBeDeleted = (int)dataGridView1.SelectedRows[0].Cells[0].Value;
    var TE = new TaskEntities();
    var UD = new userdata();
    UD = TE.userdatas.First(c => c.ID == toBeDeleted);
    TE.DeleteObject(UD);
    TE.SaveChanges();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:03:51.637

尝试这个：

```
private void button4_Click(object sender, EventArgs e)
{
     var toBeDeleted = (int)dataGridView1.SelectedRows[0].Cells[0].Value;
     var TE = new TaskEntities();
     var userdata = TE.userdatas.First(c => c.ID == toBeDeleted);
     TE.userdatas.Remove(userdata);
     TE.SaveChanges();
     dataGridView1.DataSource = TE.userdatas;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T04:47:17.727

您的 DGV 是否绑定到任何数据源？是这样，从数据源中删除行，然后使用更新命令（或更新 sql 查询）在数据库中进行更改。

# search-engine - “分类引擎”？

> ID：10110097
> 
> 赞同：0
> 
> 时间：2012-04-11T16:31:23.667
> 
> 标签：search-engine, code-search-engine, search-engine-bots

任何人都可以解释搜索引擎领域中的“分类引擎”吗？我用谷歌搜索了它，但找不到任何令人满意的解释。即使是参考链接也会有所帮助！

### PS：提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:35:23.097

如果您可以提供更多上下文会更容易，但通常我认为您指的是自然语言处理领域，称为分类或文本分类。

该学科是关于解析自然语言文本（例如英语或其他）并将该文本分配给一个或多个类别。演讲者是否在谈论汽车、新的医疗产品、最新的流行趋势等？

一些参考资料：

整个文档的分类：

[http://en.wikipedia.org/wiki/Document_classification](http://en.wikipedia.org/wiki/Document_classification)

在文档中搜索概念：

[http://en.wikipedia.org/wiki/Concept_Mining](http://en.wikipedia.org/wiki/Concept_Mining)

自动文本分类：

[http://nlp.hivefire.com/articles/11632/fully-automatic-text-categorization-by-exploiting-/](http://nlp.hivefire.com/articles/11632/fully-automatic-text-categorization-by-exploiting-/)

商业分类引擎：

[http://www.sightup.com/en/produits_sightis.html](http://www.sightup.com/en/produits_sightis.html)

如果您想使用搜索引擎查找更多参考资料，我建议您搜索*“自然语言处理”分类*

# django - 无法在 Ubuntu 上安装 gunicorn

> ID：10110098
> 
> 赞同：1
> 
> 时间：2012-04-11T16:31:25.680
> 
> 标签：django, ubuntu, gunicorn

我正在尝试在我的虚拟环境中安装 gunicorn，但得到以下信息：

$ pip 安装 gunicorn

```
Downloading/unpacking gunicorn
  Downloading gunicorn-0.14.2.tar.gz (203Kb): 203Kb downloaded 
  Running setup.py egg_info for package gunicorn

    warning: no files found matching '*' under directory 'debian'
Installing collected packages: gunicorn   Found existing installation: gunicorn 0.14.2
  Uninstalling gunicorn:
    Successfully uninstalled gunicorn
  Running setup.py install for gunicorn

    warning: no files found matching '*' under directory 'debian'
    Installing gunicorn_paster script to /home/aemdy/Documents/projects/reborn/env/bin
    Installing gunicorn script to /home/aemdy/Documents/projects/reborn/env/bin
    Installing gunicorn_django script to /home/aemdy/Documents/projects/reborn/env/bin
    Successfully installed gunicorn
    Cleaning up... 
```

当我`python manage.py run_gunicorn`用于 django 时，它说这是未知命令。我已将 gunicorn 添加到 INSTALLED_APPS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:22:03.463

安装应用程序时有时会出现类似的警告。我相信这与清理 pip 尝试做的事情有关，但无论如何都没关系。正如控制台输出显示“成功安装 gunicorn”。所以那里没有问题。

安装 gunicorn 后，唯一的其他要求是添加`gunicorn`到`INSTALLED_APPS`. 如果你也这样做了，你就完成了。`run_gunicorn`将可用。

因此，如果它*不起作用*，则以下其中一项正在发挥作用：

1.  Gunicorn 实际上并没有安装。但是，在这种情况下，您应该会在尝试引用 in 时遇到错误`INSTALLED_APPS`。检查您的 virtualenv 的 site-packages 目录以确保那里有 gunicorn 文件夹。

2.  您将 Gunicorn 安装在不同的 virtualenv 中。同样，您应该得到一个错误，就像在 #1 中一样。而且，就像 #1 一样，检查以确保它实际上在正确的 virtualenv 的 site-packages 目录中

3.  您没有激活 virtualenv。但是，与 #1 和 #2 相同的错误适用于此。

4.  您确实没有`gunicorn`in`INSTALLED_APPS` *或*正在使用的 settings.py 的编译版本没有 in `INSTALLED_APPS`。`settings.pyc`如果存在则删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T17:26:31.363

我刚遇到这个问题。我所做的是尝试使用 runserver 运行应用程序，这导致我看到服务器上的主机名未设置（因此无法获取 IP 地址）。一旦我们解决了这个问题，命令就会再次起作用。

看到有点误导：

```
Unknown command: 'run_gunicorn'
Type 'manage.py help' for usage. 
```

当未设置主机名时...我知道这很令人困惑，但我希望这对将来的某人有所帮助。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-11T17:03:07.437

您是否记得将 gunicorn 添加到您的 INSTALLED_APPS 中？

# c++ - C++ 对象块分配与单独分配

> ID：10110100
> 
> 赞同：4
> 
> 时间：2012-04-11T16:31:31.437
> 
> 标签：c++, memory

块分配与单个对象分配的主要区别是什么。让我们说

```
int iCount = 5;

int i = 0;
while(i < iCount)
{
  f = new foo();
 i++;
}

//////////////////
foo* f = new foo[iCount]; 
```

第二种方法会为我节省一些内存空间吗？我听说我们分配的每个对象都被 16 个管理字节包围。因此块分配将仅使用一个标头保护。是真的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T17:05:14.337

您所做的每个分配还分配分配标头（有时还分配一些页脚保护结构），这取决于分配器使用的算法。[在这里](http://g.oswego.edu/dl/html/malloc.html)，您可以找到其中一种算法的描述。

当您分配数组时，分配器（主要`malloc()`是`sizeof(element) * count`底部）。

[无论如何（因为问题是用c++](/questions/tagged/c%2b%2b "显示标记为“c++”的问题")标记的），优秀的 C++ 程序员应该避免手动管理内存。对于数组，使用标准库类（`vector`、、`map`等`list`）。尽可能使用 RAII，不要使用原始指针，而是使用“智能”指针。

* * *

注意：我在这里写的所有内容都完全取决于所使用的算法，因此关于数组分配的段落可能不适用于所有可能的内存分配算法。因此，直接回答“块分配与单个对象分配之间的主要区别是什么”也取决于算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:06:01.070

另一个非常重要的区别是异常安全。在您的代码中：

```
int iCount = 5;
int i = 0;
while(i < iCount)
{
    f = new foo();
    i++;
} 
```

您必须非常非常小心，以免产生内存泄漏；您绝对必须记住所有内容`foo`才能在出现异常时正确清理它。如果这段代码在构造函数中，那么在析构函数中释放是不够的，因为如果抛出异常，你的对象永远不会复活，析构函数也不会被调用。这进一步传播到编写正确的复制构造和复制分配、每个异常安全等。

道德：使用标准容器，如`vector`、`list`或`deque`（还有更多）。

```
//////////////////
foo* f = new foo[iCount]; 
```

`foo`如果在分配 first 和 last 之间抛出异常，这至少会破坏每个构造的`foo`。

当然，您必须注意`f`将被正确删除，特别是如果执行此分配的代码还有其他抛出点。

道德：使用标准容器。乍一看，手动内存管理似乎微不足道，尤其是如果您来自 C 语言，但编写异常安全代码并非易事且至关重要。

# javascript - 我如何告诉骨干模型不是新的

> ID：10110103
> 
> 赞同：11
> 
> 时间：2012-04-11T16:31:41.983
> 
> 标签：javascript, backbone.js, backbone-model

我有一个对象也保存在服务器中，我正在从该对象创建一个主干模型。

但是当我保存模型时，它正在执行 PUT 请求，这不是我想要的。如何告诉 Backbone 数据已经在服务器中而不进行获取？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-11T16:51:01.670

Backbone 通过[检查是否设置了 id 来](http://backbonejs.org/#Model-isNew)确定模型的新鲜度：

> **是新的** `model.isNew()`
> 
> 这个模型已经保存到服务器了吗？如果模型还没有`id`，则认为它是新的。

当你保存模型时，

*   如果是新的，将发出一个 POST 请求，
*   如果是更新（已设置 id），将发送 PUT 请求

[骨干同步文档](http://backbonejs.org/#Sync)

* * *

正如[@JayC](https://stackoverflow.com/questions/10110103/how-do-i-tell-backbone-that-the-model-is-not-new#comment12954464_10110429)在评论中指出的那样：

如果存在 id 不能从字面上理解的问题`id`，您可以用[`idAttribute`](http://backbonejs.org/#Model-idAttribute)它来说明哪个是“身份”或关键字段。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-10T01:53:59.900

在这里加上我的两分钱，希望它能避免我不得不做的一些头发拉扯。

直接通过构造函数将模型的 id 属性设置为 false 或 null 不会成功，您必须通过 delete 将其从内存中实际删除

例如，我只是努力将属性从一种模型类型复制到另一种类型作为新模型：

```
copy = Trip.clone()
#doesn't unset the id attribute
schedule = new models.Schedule(_.extend(copy.attributes, {id:null, trip_id:id})
#does unset the id attribute
delete schedule.id
schedule.save null, success: =>
  # back from POST vs PUT   
  ... 
```

# spring - 如何以独立于 Spring Container 的方式提供静态内容？

> ID：10110106
> 
> 赞同：0
> 
> 时间：2012-04-11T16:31:49.573
> 
> 标签：spring, spring-mvc, handlers

如何以独立于 Spring Container 的方式提供静态内容

我无法使用`<mvc:resources../>`

渴望尽快听到...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T21:15:02.730

如果你不能使用 Springs ，我建议你使用[nginx](http://nginx.org/)`ResourceHttpRequestHandler`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T03:32:08.520

这个SO问题的答案中提到了许多可能的方法：

[Spring MVC 3 和处理静态内容 - 我错过了什么吗？](https://stackoverflow.com/questions/1483063/spring-mvc-3-and-handling-static-content-am-i-missing-something)

# javascript - Javascript 自定义调整大小事件

> ID：10110108
> 
> 赞同：2
> 
> 时间：2012-04-11T16:31:57.710
> 
> 标签：javascript, events, resize

我有一个非常简单的问题，或者至少看起来是这样。

我有一个 DIV 元素，它会立即调整大小。我希望能够捕捉到调整大小的时刻。

像这样的东西：

```
function myFunction(){
 alert('The DIV was resized');
}

divElement.addEventListener("resize", myFunction, false); 
```

有人知道答案吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T16:35:37.340

截至 2011 年 12 月，没有内置事件可以检测 div 何时调整大小，仅当窗口调整大小时。

查看这个相关问题：[Detecting when a div's height changes using jQuery](https://stackoverflow.com/questions/172821/detecting-when-a-divs-height-changes-using-jquery)，以及该问题的解决方案中的这个插件：http: [//benalman.com/projects/jquery-resize-plugin/](http://benalman.com/projects/jquery-resize-plugin/)

> 使用 jQuery 调整大小事件，您现在可以将调整大小事件处理程序绑定到窗口以外的元素，以获得超棒的调整大小！
> 
> **为什么调整大小事件需要插件？**
> 
> 很久以前，当权者决定 resize 事件只会在浏览器的 window 对象上触发。不幸的是，这意味着如果您想知道另一个元素何时调整大小，则需要定期手动测试其宽度和高度以进行更改。虽然这个插件在内部并没有做任何花哨的事情来避免这种方法，但它提供的用于绑定事件的接口与 window 已经存在的接口完全相同。
> 
> 对于所有元素，将启动一个内部轮询循环，该循环会定期检查元素大小的变化并在适当的时候触发事件。轮询循环仅在事件实际绑定到某处时运行，并在所有调整大小事件都未绑定时停止。

**示例代码**

```
// You know this one already, right?
$(window).resize(function(e){
  // do something when the window resizes
});

// Well, try this on for size!
$("#unicorns").resize(function(e){
  // do something when #unicorns element resizes
});

// And of course, you can still use .bind with namespaces!
$("span.rainbows").bind( "resize.rainbows", function(e){
  // do something when any span.rainbows element resizes
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-17T04:20:01.540

你可以试试这个插件 - [http://benalman.com/code/projects/jquery-resize/examples/resize/](http://benalman.com/code/projects/jquery-resize/examples/resize/)

有各种各样的例子。尝试调整窗口大小并查看容器元素内的元素如何调整。

[js小提琴的例子](http://jsfiddle.net/sgsqJ/4/)

在那个 resize() 事件绑定到具有类“test”的元素以及窗口对象，并且在窗口对象的调整大小回调中调用 $('.test').resize()。

例如

```
$('#test_div').bind('resize', function(){
     console.log('resized');
});

$(window).resize(function(){
   $('#test_div').resize();
}); 
```

[看到这个](http://help.dottoro.com/ljorlllt.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-17T03:56:56.420

有一种非常有效的方法可以确定元素的大小是否已更改。

[http://marcj.github.io/css-element-queries/](http://marcj.github.io/css-element-queries/)

这个库有一个类 ResizeSensor 可用于调整大小检测。它使用基于事件的方法，因此速度非常快并且不会浪费 CPU 时间。

请不要**使用**jQuery onresize 插件，因为它使用`setTimeout()`循环来检查更改。这是非常缓慢且不准确的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T16:55:09.130

我的第一个想法是使用自定义事件系统。你可以在这里找到一个纯 javascript ( [http://www.nczonline.net/blog/2010/03/09/custom-events-in-javascript/](http://www.nczonline.net/blog/2010/03/09/custom-events-in-javascript/) )

包含他的代码后，您可以执行以下操作：

```
function myFunction(){
 alert('The DIV was resized');
}

div_elm = document.getElmentById('div-to-resize');
EventTarget.call(div_elm);
div_elm.addListener("resize", myFunction); 
```

然后，只需在要调整 div 大小的任何位置添加一行。

```
div_elm.width += 100 //or however you are resizing your div
div_elm.fire("resize"); 
```

我认为这应该对你有用。

编辑：

如果您不是编码调整大小的人，那么我的第一个想法是这样的：

```
var resizeScannerInterval_id = (function(div) {
    var width = div.offsetWidth;
    var height = div.offsetHeight;

    var interval_id = setInterval(function() {
        if( div.offsetWidth != width || div.offsetHeight != height )
            width = div.offsetWidth;
            height = div.offsetHeight;
            div.fire();
        }
    },250);

})(document.getElementById('div-id')) 
```

# zip - rsync 将本地文件结构复制到远程框

> ID：10110109
> 
> 赞同：0
> 
> 时间：2012-04-11T16:31:59.297
> 
> 标签：zip, rsync, fabric

我正在尝试将 .zip 文件上传到远程服务器上的某个位置。

在我的`fabfile.py`我有这一行：

```
local("rsync files.zip webfaction:~/webapps/app") 
```

这完全没有问题。但是，当我 ssh 到盒子上时，我发现 rsync 将`files.zip`文件放入

```
~/webapps/app/Users/kevin/resources/files.zip 
```

我真的只想把它放在 webapps/app 中而不复制本地文件结构。我可以做些什么来避免在本地文件结构上与文件一起进行 rsync 复制？

谢谢，凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:37:26.397

既然您使用的是 Fabric，为什么不使用 put() api 调用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:37:44.830

如果本地文件夹结构未包含在您的命令中，rysnc 不会复制它（即使您指定它也不要认为它会复制）。

你确定你的命令正确吗？如果是这样，我想这可能与 Python 如何通过 local() 方法定位文件有关。

没有太大帮助，但我希望它会提供一些线索......

# mongodb - 在 MongoDB GridFS 中存储带有图像的产品

> ID：10110119
> 
> 赞同：0
> 
> 时间：2012-04-11T16:32:35.890
> 
> 标签：mongodb, database

我正在将 MongoDB 用于电子商务网站，我们计划使用 GridFS 来存储产品图像。

使用 GridFS 时，将产品描述、定价等存储为元数据会更好吗？或者您是否拥有可以存储所有这些内容的 Products 集合，而您只需将产品 ID 存储在元数据中？

之前没有使用过 GridFS，所以非常感谢任何评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:46:42.577

如果您决定将产品描述作为元数据存储在文件集合中，那么如果您有同一产品的多个图像，则可能会很不方便，因为您最终不得不复制该产品信息以放入每个图像的元数据文档中。

将产品信息存储在自己的集合中。然后在 gridFS 中，为每个图像的元数据添加一个字段，该字段存储其所属产品的 _id。使用此策略，您将能够通过对该字段的单个查询来检索给定产品的所有图像。

[这是](https://groups.google.com/forum/?fromgroups#!searchin/mongodb-user/gridfs/mongodb-user/vohnxfczW0A/9iPBooLz9GIJ)其他一些有用的 gridFS 问题的链接。

# asp.net-mvc-3 - KnockoutJS 如何将一组下拉列表数据绑定到可观察数组

> ID：10110125
> 
> 赞同：2
> 
> 时间：2012-04-11T16:32:52.983
> 
> 标签：asp.net-mvc-3, drop-down-menu, knockout.js

我的视图绑定到一个模型并显示几个下拉列表，它们的数量和选项基于模型中的一些属性。

我想使用knockout js将下拉列表的每个选定值数据绑定到一个可观察的数组，跟踪哪个值属于哪个ddl。

每个下拉列表都使用以下代码显示：

```
@for (var i = 0; i < Model.ProductProfiles.Count; i++)
        {
            var productProfile = Model.ProductProfiles[i];
            if (productProfile.IsVarying)
            {
                var lastItem = 0;           
                <div class="tab-pane" id="@productProfile.Name">                        
                    @for (var j = 0; j < productProfile.Attributes.Count; j++)
                    {           

                        <text>@productProfile.Attributes[j].Name</text>                                                     
                        @Html.DropDownListFor(m => m.ProductProfiles[i].SelectedValues[j], (SelectList)ViewData["Levels_" + i + "_" + j],
                        new { @class = "ddl-levels" })
                        <br />
                    }
                </div>
            }
        } 
```

正确填写了下拉列表并正确设置了默认值（同时使用模型和在 ViewData 中传递的选择列表）。

有没有办法将数据绑定到看起来像这样的数组：

array[0]["0", "1", "3", "1",....] 其中 array[0] 指的是 Model.ProductProfiles[0] 并且数组的第二维保存选定的值对于 for 循环中显示的 ddl ？

我尝试将我的视图模型设置为

```
var viewModel = {
    selectedValues: ko.observableArray([])              
}; 
```

出于绝望，我尝试修改数据绑定值以模拟可观察数组中的位置访问：

```
@Html.DropDownListFor(m => m.ProductProfiles[i].SelectedValues[j], (SelectList)ViewData["Levels_" + i + "_" + j],
                        new { @class = "ddl-levels", data_bind = "value: productProfiles([" + i + "][" + j + "])" }) 
```

不幸的是它没有工作......

我希望已经清楚，否则我很乐意在被要求澄清时澄清。有谁能帮助我吗？

谢谢

编辑：根据评论建议，我将多维数组拆分为 3 个可观察数组，如下所示：

```
var viewModel = {        
    selectedValuesProd0: ko.observableArray(),
    selectedValuesProd1: ko.observableArray(),
    selectedValuesProd2: ko.observableArray()
} 
```

然后我修改了 HTML 代码

```
var observableArrayProduct = "selectedValuesProd0";
                    if (i == 1)
                    {
                        observableArrayProduct = "selectedValuesProd1";
                    }
                    else if (i == 2)
                    {
                        observableArrayProduct = "selectedValuesProd2";
                    }

@Html.DropDownListFor(m => m.ProductProfiles[i].SelectedValues[j], (SelectList)ViewData["Levels_" + i + "_" + j], new { @class = "ddl-levels", data_bind = "value: " + observableArrayProduct + "()[" + j+ "]" }) 
```

如您所见，我仍在尝试对一维可观察数组进行位置访问，但是当用户更改 DropDown 列表中的某些内容时，它仍然没有跟踪所选值。

在这一点上，我开始认为位置访问不起作用，但如果是这样，我还能做什么？

编辑 2：已解决！

好的，我错过了一个关键步骤：可观察数组中的每个项目本身就是一个可观察值，因此我将其修复如下：

```
var viewModel = {        
    selectedValuesProd0: ko.observableArray(ko.utils.arrayMap(selectedValuesPerProduct[0], function(item) {
        return ko.observable(item);
    })),
    selectedValuesProd1: ko.observableArray(ko.utils.arrayMap(selectedValuesPerProduct[1], function(item) {
        return ko.observable(item);
    })),
    selectedValuesProd2: ko.observableArray(ko.utils.arrayMap(selectedValuesPerProduct[2], function(item) {
        return ko.observable(item);
    }))
} 
```

其中 selectedValuesPerProduct 是使用从服务器端代码传递到视图（序列化之后）的模型构建的二维数组。

我希望这能有所帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:32:40.053

我建议像这样传递下拉列表： {firstArray: [1,2,3], secondArray: [4,5,6]}

基本上，您不会按照您建议的方式保存任何工作。你可以让'firstArray'和'secondArray'不像你的索引器那样对人类友好。虽然我不确定为什么这会是一个有价值的目标；）我尽可能地追求可维护的代码。任何在你之后进来并看到多级索引器的人都不会欣赏你的聪明或后来他们的头痛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:42:01.683

我意识到我从未关闭过这个问题，所以我在这里添加一个回复：

好的，我错过了一个关键步骤：可观察数组中的每个项目本身就是一个可观察值，因此我将其修复如下：

```
var viewModel = {        
selectedValuesProd0: ko.observableArray(ko.utils.arrayMap(selectedValuesPerProduct[0], function(item) {
    return ko.observable(item);
})),
selectedValuesProd1: ko.observableArray(ko.utils.arrayMap(selectedValuesPerProduct[1], function(item) {
    return ko.observable(item);
})),
selectedValuesProd2: ko.observableArray(ko.utils.arrayMap(selectedValuesPerProduct[2], function(item) {
    return ko.observable(item);
})) 
```

}

其中 selectedValuesPerProduct 是使用从服务器端代码传递到视图（序列化之后）的模型构建的二维数组。

# image - 创建实时立体视频matlab

> ID：10110126
> 
> 赞同：1
> 
> 时间：2012-04-11T16:32:54.083
> 
> 标签：image, matlab, 3d, real-time, webcam

我目前有这个代码覆盖两个图像，但它只是半实时的。任何人都可以为我指出如何在 matlab 中创建实时立体图预览的正确方向。谢谢

```
clear all
close all
clc;
vid = videoinput('winvideo',1, 'YUY2_640x480');
vid1 = videoinput('winvideo',2, 'YUY2_640x480');
% to convert to rgb colors
vid.ReturnedColorSpace = 'rgb';
vid1.ReturnedColorSpace = 'rgb';
set(vid,'FramesPerTrigger',1);
set(vid1,'FramesPerTrigger',1);
% set(vid, 'TriggerRepeat',inf);
% set(vid1, 'TriggerRepeat',inf);

while (1)
start(vid);
start(vid1);

%retrieves all the frames acquired at the last trigger
data = getdata(vid);
data1 = getdata(vid1);

% processes the color channels of the videos
data(:,:,1)=0;
data(:,:,2)=0;
data1(:,:,2)=0;
data1(:,:,3)=0;

%to display them in one video
result=data+data1;
imshow(result);
drawnow;
end
stop(vid),delete(vid),clear vid; 
```

# javascript - RadDatePicker SetDate() 不工作

> ID：10110128
> 
> 赞同：0
> 
> 时间：2012-04-11T16:33:05.033
> 
> 标签：javascript, telerik, rad

我相信我使用的是 RadDatePicker 控件的 2008 版。在 JavaScript 中获取 datePicker 的引用后，我尝试使用 SetDate() 函数设置日期。但是它给了我“对象不支持此属性或方法”。Telik 网站上显示的当前 javascript 函数在我使用的控件中不存在。但是我从调试器中发现 datePicker 控件的方法中有一个函数 SetDate(_2c)。我尝试为 SetDate 函数提供以下内容

```
 datePicker.SetDate('1/1'2012') gives me "Object doesn't support this property or method" 
```

如果我尝试以下操作：

```
 datePicker.SetDate(new Date('1/1/2012')) it gives me undefined 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:45:45.533

在您后面的代码中，您是否设置了最小和最大日期？

```
 datePicker.MinDate = new DateTime(1900, 1, 1);
  datePicker.MaxDate = new DateTime(2100, 12, 31); 
```

在您的客户端，您是否尝试过：

```
var myDate=new Date();
// set to Jan 1, 2012
//(months are from 0-11 not 1-12)
myDate.setFullYear(2012,0,1);

datePicker.SetDate(myDate);
datePicker.DateInput.SetDate(myDate); 
```

# html - 边界半径仅围绕我的 div 顶部？

> ID：10110130
> 
> 赞同：4
> 
> 时间：2012-04-11T16:33:12.263
> 
> 标签：html, css

我一直在使用新的 CSS 边框半径函数有一段时间了，但我今天难住了！我有一个背景图片 (120px x 60px) 并设置了 5px 的边框半径，但它只是将前两个角变圆？！

我正在使用的 CSS 代码在这里：

```
#buttonRow {
    position:relative;
    width:980px;
    height:60px;
    margin-left:51px;
    margin-bottom:25px;
    float:left;
}

#button {
    position:relative;
    float:left;
    width:120px;
    height:60px;
    margin-left:25px;
    padding-top:10px;
    border-radius:5px;
    background-image:url('../assets/buttons/generic_button.png');
    background-repeat:no-repeat;
}

#singleLineButton {
    position:relative;
    float:left;
    width:120px;
    height:60px;
    margin-left:25px;
    padding-top:20px;
    border-radius:5px;
    background-image:url('../assets/buttons/generic_button.png');
    background-repeat:no-repeat;
}

#buttonText {
    width:120px;
    height:auto;
    color:#FFFFFF;
    text-align:center;
    font-size:16px;
    font-family: Adobe Kaiti Std R;
} 
```

输出是这样的：

![圆角 div](../Images/0d2800876112a385efd9ad0b9079629e.png)

为什么它只将顶角显示为圆形？！

任何帮助将不胜感激！

谢谢，祖鲁语

**编辑**

这是为那些询问的人提供的 HTML：

```
<div id="buttonRow">
    <a href="http://www.zuluirminger.com/SchoolAdmin/individual_table_management.php">
        <div id="button"><div id="buttonText">Individual Table Management</div></div>
    </a>
    <a href="http://www.zuluirminger.com/SchoolAdmin/attendance_index.php">
        <div id="singleLineButton"><div id="buttonText">Attendance</div></div>
    </a>
    <a href="http://www.zuluirminger.com/SchoolAdmin/school_members.php">
        <div id="singleLineButton"><div id="buttonText">School Members</div></div>
    </a>
    <a href="http://www.zuluirminger.com/SchoolAdmin/search_choice.php">
        <div id="singleLineButton"><div id="buttonText">Search</div></div>
    </a>
    <a href="http://www.zuluirminger.com/SchoolAdmin/school_details.php">
        <div id="singleLineButton"><div id="buttonText">School Details</div></div>
    </a>
    <a href="http://www.zuluirminger.com/SchoolAdmin/user_management.php">
        <div id="singleLineButton"><div id="buttonText">Users</div></div>
    </a>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T18:36:27.820

可能是您的图像不够长，因此您看不到底部的圆角。我今天遇到了，实际上。

我只是设置了背景颜色，它向我展示了问题所在。因此，只需将您的 CSS 修改为：

```
background-image: #00ff00 url('../assets/buttons/generic_button.png'); 
```

或者：

```
background-color: #00ff00; /* bright green for contrast */
background-image: url('../assets/buttons/generic_button.png'); 
```

这至少会告诉您您的图像是否覆盖整个区域，并且您将知道从那里该做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T19:17:54.723

在 CSS3 中是这样完成的：

```
border-top-right-radius: 8px;
border-top-left-radius: 8px 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-31T03:13:14.910

如前所述，您的图像不够大。您的 div 为 120x60px 以匹配您的图像，但您的 padding-top 为 10px，这会将 div 的大小扩展到总共 120x70px - 太大而无法显示四舍五入。要么更改背景图像的大小，要么将 div 的大小调整为 50px 高——使用填充，它最终会以适当的大小结束。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T16:35:31.217

底部很可能会从溢出中被切断。确保包含元素足够高以容纳这些元素的高度，或者将所有祖先的溢出设置为`overflow: visible`.

此外，使用 jsfiddle.net 发布实时示例，而不仅仅是在真空中发布 CSS。CSS 需要上下文。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-18T13:14:09.180

您可以使用此代码

```
#buttonRow {
    width: 1170px;
    margin: 0 auto;
    display: block;
}
#button {
    position:relative;
    float:left;
    width:120px;
    height:60px;
    margin-left:25px;
    padding-top:10px;
    border-radius: 5px;
    background-image:url('../assets/buttons/generic_button.png');
    background-repeat:no-repeat;
    background: red;
}
#singleLineButton {
    position:relative;
    float:left;
    width:120px;
    height:60px;
    margin-left:25px;
    padding-top:20px;
    border-radius: 5px;
    background-image:url('../assets/buttons/generic_button.png');
    background-repeat:no-repeat;
    background: red;
}
#buttonText {
    width:120px;
    height:auto;
    color:#FFFFFF;
    text-align:center;
    font-size:16px;
    font-family: Adobe Kaiti Std R;
} 
```

```
<div id="buttonRow">
    <a href="http://www.zuluirminger.com/SchoolAdmin/individual_table_management.php">
        <div id="button"><div id="buttonText">Individual Table Management</div></div>
    </a>
    <a href="http://www.zuluirminger.com/SchoolAdmin/attendance_index.php">
        <div id="singleLineButton"><div id="buttonText">Attendance</div></div>
    </a>
    <a href="http://www.zuluirminger.com/SchoolAdmin/school_members.php">
        <div id="singleLineButton"><div id="buttonText">School Members</div></div>
    </a>
    <a href="http://www.zuluirminger.com/SchoolAdmin/search_choice.php">
        <div id="singleLineButton"><div id="buttonText">Search</div></div>
    </a>
    <a href="http://www.zuluirminger.com/SchoolAdmin/school_details.php">
        <div id="singleLineButton"><div id="buttonText">School Details</div></div>
    </a>
    <a href="http://www.zuluirminger.com/SchoolAdmin/user_management.php">
        <div id="singleLineButton"><div id="buttonText">Users</div></div>
    </a>
</div> 
```

# lua - LuaSocket - 尝试调用字段'try'（一个零值）

> ID：10110134
> 
> 赞同：1
> 
> 时间：2012-04-11T16:33:24.267
> 
> 标签：lua, luasocket

平台：（Lua 和 LuaSocket 移植的地方）一个使用 ARM 7 开发板的嵌入式系统，运行带有 TCP/IP 堆栈的第 3 方 RTOS。

什么有效：

*   使用 Lua 标准库，例如“io”调用、打印、断言等
*   使用 udp = assert(socket.udp) 方法发送 UDP 数据包，assert(udp:send(something))

问题：执行示例 smtp lua 脚本时：

```
local smtp = require("socket.smtp")
from = "myEmail"
rcpt = {"<someOne's Email>"}
mesgt = { heasers = {someHeader}, body = "Hello World" } 
r, e = smtp.send {
    from = from,
    rcpt = rcpt, 
    source = smtp.message(mesgt),
    server = "someServer",
    port = 25,
}

-- an error returns after execution: 
-- lua\socket\smtp.lua:115: attempt to call field 'try' (a nil value)

-- Corresponding code in smtp.lua around line 115:

function open(server, port, create)
    local tp = socket.try(tp.connect(server or SERVER, port or PORT,
        TIMEOUT, create))
    local s = base.setmetatable({tp = tp}, metat)
    -- make sure tp is closed if we get an exception
    s.try = socket.newtry(function()
        s:close()
    end)
    return s
end

// Where try = newtry() in socket.lua and the corresponding C code is the same
// from the one provided with the library for UNIX:
static int global_newtry(lua_State *L) {
    lua_settop(L, 1);
    if (lua_isnil(L, 1)) lua_pushcfunction(L, do_nothing);
    lua_pushcclosure(L, finalize, 1);
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:59:04.607

好吧，既然错误说“try is nil”，那么我最好的猜测是C lib没有正确或不完全链接到你的Lua。这可能是安装错误、缺少库或类似原因的结果。

# parsing - 我在 .txt 文件中有 30 个左右的项目，我想在 wp7 的列表框中显示这些项目

> ID：10110136
> 
> 赞同：0
> 
> 时间：2012-04-11T16:33:34.167
> 
> 标签：parsing, windows-phone-7, collections, listbox, text-files

.txt 文件看起来像

```
Euro
US Dollar
Australian Dollar
Pounds Sterling
Swiss Franc 
```

等等。我已经尝试过类似但似乎无法让它们工作的`XDocument`东西。`ObservableCollection`我宁愿不要在 xaml 中硬编码这么多。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:59:36.167

假设您要发送带有项目的文件（文件构建操作设置为“内容”），这就是您需要的：

首先，在页面中添加一个名为 CurrenciesListBox 的 ListBox，然后在页面加载事件或构造函数中添加以下代码：

```
var xapResolver = new System.Xml.XmlXapResolver();

using (var currenciesStream = (Stream)xapResolver.GetEntity(new Uri("Currencies.txt", UriKind.RelativeOrAbsolute), "", typeof(Stream)))
{
    using (var streamReader = new StreamReader(currenciesStream))
    {
        while (!streamReader.EndOfStream)
        {
            CurrenciesListBox.Items.Add(streamReader.ReadLine());
        }
    }
} 
```

请记住更改上面的文件名以匹配您的文件！

这是初学者，有更好的方法来完成这项工作（使用 MVVM）！

# sql - 在存储过程中动态创建更新 SQL

> ID：10110141
> 
> 赞同：0
> 
> 时间：2012-04-11T16:33:58.237
> 
> 标签：sql, tsql

我尝试创建一个存储过程来更新其 sql 语句是动态创建的表记录。我写了一些代码，但我停下来动态运行这个查询，我怎样才能运行这个查询或者这个问题有更好的解决方案。

这个 SP 是如何工作的？=> 我将需要更新的记录的列名称、值和数据类型发送到 SP，如下所示

```
<e columnName=''PaymentStatus'' value=''99'' type=''nvarchar''/>
<e columnName=''HotelProvider'' value=''GAT2'' type=''nvarchar''/> 
```

然后遍历节点并创建一个更新语句，但不能执行它:))

我正在提供 SP 的一部分以更好地理解这个问题。

```
 DECLARE @UpdateXml xml = '
<xml>
<e columnName=''PaymentStatus'' value=''99'' type=''nvarchar''/>
<e columnName=''HotelProvider'' value=''GAT2'' type=''nvarchar''/>
</xml>';

DROP TABLE ##UpdateFields
SELECT
t.c.value('@columnName', 'varchar(max)') AS ColumnName,
t.c.value('@value', 'varchar(max)') AS Value,
t.c.value('@property', 'varchar(max)') AS PropertyOf,
t.c.value('@type', 'varchar(max)') AS ColumnType
INTO ##UpdateFields
from @UpdateXml.nodes('/xml/e') as t(c)

DECLARE @SQL nvarchar(MAX) = 'UPDATE HotelBooking ';

DECLARE @SQLUpdatePart nvarchar(MAX);
SET @SQLUpdatePart = 'SET ';
SELECT @SQLUpdatePart= @SQLUpdatePart+ColumnName +'='+'@QP_'+ColumnName+',' FROM ##UpdateFields WHERE PropertyOf IS NULL;

DECLARE @SQLWherePart nvarchar(MAX);
SET @SQLWherePart = ' WHERE Id=2';

DECLARE @ParmDefinition nvarchar(MAX)='';
SELECT @ParmDefinition = @ParmDefinition+'@QP_'+ColumnName+' '+ColumnType+',' FROM ##UpdateFields;

SELECT @ParmDefinition
SELECT @SQL + @SQLUpdatePart + @SQLWHerePart; 
```

最后两个选择语句的结果是：

```
@QP_PaymentStatus nvarchar,@QP_HotelProvider nvarchar,@QP_TransactionId uniqueidentifier,@QP_UpdatedDate datetime 
```

和

```
UPDATE HotelBooking SET PaymentStatus=@QP_PaymentStatus,HotelProvider=@QP_HotelProvider,UpdatedDate=@QP_UpdatedDate,TransactionId=@QP_TransactionId WHERE Id=2 
```

现在如何动态地将@QP 参数提供给 sp_executesql() 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:31:49.583

您可以通过将 sp_executesql 调用包装在另一个中来做到这一点`exec`：

```
declare @updateStr nvarchar(1000)
-- @updateStr = N'select * from ATable where ID = @p1'
set @updateStr = N'N''select * from ATable where ID = @p1'''
declare @paramStr nvarchar(100)
-- @paramStr = N'@p1 int'
set @paramStr = N'N''@p1 int'''
declare @actualParameters nvarchar(100)
set @actualParameters = N'@p1 = 10'
-- Concatenate parts of query into a variable
declare @sql nvarchar(max)
set @sql = N'sp_executesql ' + @updateStr + ',' + @paramStr + ', ' +  @actualParameters
-- And voila!
exec (@sql) 
```

# wget - 从 Apple 网站下载源代码

> ID：10110146
> 
> 赞同：43
> 
> 时间：2012-04-11T16:34:16.093
> 
> 标签：wget

如何从 Apple 网站 (http://opensource.apple.com/source/) 下载源代码。特别是，我对[http://opensource.apple.com/source/Security/Security-55110/](http://opensource.apple.com/source/Security/Security-55110/)感兴趣。

`wget -r`正在下载 HTML 文件而不是源文件。谢谢！

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-04-12T05:44:15.510

我终于想通了，可以从 [http://opensource.apple.com/tarballs/方便地下载源代码](http://opensource.apple.com/tarballs/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T05:47:58.473

可以直接从[http://opensource.apple.com/tarballs/Security/Security-55110.tar.gz下载](http://opensource.apple.com/tarballs/Security/Security-55110.tar.gz)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-22T01:55:50.263

github下有苹果源码的克隆： [Unofficial Fruit Company Open Source Git Mirror](https://github.com/aosm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-24T04:24:51.577

[您可以使用mkAppleOpenSourceDownload](https://github.com/mythkiven/mkAppleOpenSourceDownload)下载所有苹果开源代码

# .net - 如何使用 WCF 客户端从响应中读取自定义 SOAP 标头

> ID：10110149
> 
> 赞同：1
> 
> 时间：2012-04-11T16:34:22.497
> 
> 标签：.net, wcf, service, header

所以我的问题是：当服务是 asmx 时，我无法通过使用生成的 wcf 代理（服务引用）从 Web 服务响应中获取标头。

```
ManagerSoapClient client = new ManagerSoapClient();
client.Authenticate(...);
using (OperationContextScope scope = new OperationContextScope(client.InnerChannel))
{
    //headers = null
    var headers = OperationContext.Current.IncomingMessageHeaders;
} 
```

这很奇怪，因为 SOAP 响应有一些标头：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <soap:Header>
      <OperationResult xmlns="http://tempuri.org/">
         <Status>Success</Status>
      </OperationResult>
   </soap:Header>
   <soap:Body>
      ...
   </soap:Body>
</soap:Envelope> 
```

好的，我添加了自定义`IClientMessageInspector`来检查标题：

```
public class OperationResultMessageInspector : IClientMessageInspector
{
    public object BeforeSendRequest(ref Message request, IClientChannel channel)
    {           
        return channel;
    }

    public void AfterReceiveReply(ref Message reply, object correlationState)
    {
        //It founds header at position 0!!
        int headerIndex = reply.Headers.FindHeader("OperationResult", "http://tempuri.org/");
    }
} 
```

所以毕竟有一个标题......但是为什么我不能使用它来访问它`OperationContext.Current.IncomingMessageHeaders`？

好的。现在我只想将此标头保存在某个地方，以便在服务调用后能够访问它。我决定使用扩展`IExtension<OperationContext>`
所以我的代码现在是下一个：

```
public class ManagerProxy
{
    public void Authenticate()
    {
        ManagerSoapClient client = new ManagerSoapClient();
        client.Endpoint.Behaviors.Add(new OperationResultBehavior());
        client.Authenticate(...);

        using (OperationContextScope scope = new OperationContextScope(client.InnerChannel))
        {
            //headers = null
            var headers = OperationContext.Current.IncomingMessageHeaders;
            //header = null
            OperationResultContextExtension header = OperationContext.Current.Extensions.Find<OperationResultContextExtension>();
        }
    }
}

public class OperationResultMessageInspector : IClientMessageInspector
{
    public object BeforeSendRequest(ref Message request, IClientChannel channel)
    {           
        return channel;
    }

    public void AfterReceiveReply(ref Message reply, object correlationState)
    {
        IClientChannel channel = (IClientChannel)correlationState;

        //It founds header at position 0!!
        int headerIndex = reply.Headers.FindHeader("OperationResult", "http://tempuri.org/");
        XmlDictionaryReader reader = reply.Headers.GetReaderAtHeader(headerIndex);

        OperationResultContextExtension extension = new OperationResultContextExtension
        {
            SomeData = reader.ReadString()
        };          

        using (OperationContextScope scope = new OperationContextScope(channel))
        {               
            OperationContext.Current.Extensions.Add(extension);
        }
        reader.Close();
    }

}

public class OperationResultContextExtension : IExtension<OperationContext>
{
    public string SomeData { get; set; }
    public void Attach(OperationContext owner) { }
    public void Detach(OperationContext owner) { }
}

public class OperationResultBehavior : IEndpointBehavior
{
    public void AddBindingParameters(ServiceEndpoint endpoint, BindingParameterCollection bindingParameters) { }
    public void ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher) { }
    public void Validate(ServiceEndpoint endpoint) { }
    public void ApplyClientBehavior(ServiceEndpoint endpoint, ClientRuntime clientRuntime)
    { clientRuntime.MessageInspectors.Add(new OperationResultMessageInspector()); }
} 
```

它应该可以工作，但出乎意料的是，对我来说`OperationContext.Current.Extensions.Find<OperationResultContextExtension>();`也是`null`如此。

所以有我的问题：
1\. 为什么在正确找到标题时`OperationContext.Current.IncomingMessageHeaders`返回 2\. 扩展看起来很顺利，为什么我在. 3.是否有更好/更简单或至少工作良好的方法来从响应中获取此标头？ `null``reply.Headers.FindHeader``AfterReceiveReply`
`OperationResultContextExtension``null``OperationContext.Current.Extensions.Find<OperationResultContextExtension>()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-18T00:37:44.330

我有一个类似的问题，在我的情况下，我通过将客户端调用放入`OperationContestScope`

```
ManagerSoapClient client = new ManagerSoapClient();

using (OperationContextScope scope = new OperationContextScope(client.InnerChannel))
{
    client.Authenticate(...); // <---- The change
    var headers = OperationContext.Current.IncomingMessageHeaders;
} 
```

# javascript - 输入框的onKeyPress（在html中）调用servlet而不更改浏览器地址栏中的url

> ID：10110150
> 
> 赞同：1
> 
> 时间：2012-04-11T16:34:22.823
> 
> 标签：javascript, html

我有一个 html 形式的输入框和该框的 onKeyPress 我需要使用与谷歌相同的 servlet 在该输入文本框中搜索文本。但是当我按下回车键时，浏览器地址栏中的 url 会发生变化，并且请求不会发送到 servlet。可以做些什么来避免这种情况？

HTML 文件中的输入文本框

```
<input type="text" id="query" name="query" size="45" onkeypress="searchKeyPress(event)"> 
```

SearchKeyPress(e) 代码

```
function searchKeyPress(e)
    {
        if (typeof e == 'undefined' && window.event) { e = window.event; }
        if (e.keyCode == 13)
        {
            createHttpRequest();
        }
    } 
```

createHttpRequest 用于调用servlet SearchService：

```
var url="http://localhost:8080/final_project/SearchService?user_query="+getQueryString();

        request.onreadystatechange = handleSearchResult;
        request.open("GET",url,true);

        request.send(null); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:38:20.170

更改您的脚本：

```
if (e.keyCode == 13)
{
    createHttpRequest();
    return false;
} 
```

和你的 html 到这个

```
onkeypress="return searchKeyPress(event)" 
```

这将阻止提交表单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:37:21.297

您需要防止提交表单的默认行为。文档[在这里](https://developer.mozilla.org/en/DOM/event.preventDefault)。

# cocoa - RestKit 与 Core Data 多对多：它有效，但我做得对吗？

> ID：10110156
> 
> 赞同：3
> 
> 时间：2012-04-11T16:34:38.853
> 
> 标签：cocoa, restkit

我是 RestKit 的新手。我正在尝试在实体空间和用户之间映射多对多关系。出于本问题的目的，假设所有 Space 对象都已正确存储在 Core Data 存储中。

在 REST API 中，我可以进行一次调用来获取给定空间的所有用户。首先，当我初始化我的网络获取类时，我设置了一个适合解析用户列表的映射：

```
RKManagedObjectMapping *teamMapping = [RKManagedObjectMapping mappingForEntity:[NSEntityDescription entityForName:@"User" inManagedObjectContext:self.manager.objectStore.primaryManagedObjectContext] inManagedObjectStore:self.manager.objectStore];

[teamMapping mapKeyPath:@"id" toAttribute:@"userID"];
[teamMapping mapKeyPath:@"name" toAttribute:@"name"];
teamMapping.primaryKeyAttribute = @"userID";
[self.manager.mappingProvider setMapping:teamMapping forKeyPath:@"users.user"]; 
```

然后，为了填充用户到空间的链接，我这样做：

```
NSArray *spaces = [self.managedObjectContext executeFetchRequest:[NSFetchRequest fetchRequestWithEntityName:@"Space"] error:nil];

for (QBSpace *space in spaces)
{
    [self.manager loadObjectsAtResourcePath:[NSString stringWithFormat:@"space/%@/users", space.wikiName] usingBlock:^(RKObjectLoader *loader) {
        loader.onDidLoadObjects = ^(NSArray *objects){
            space.team = nil;
            for (QBUser *user in objects)
            {
                [space addTeamObject:user];
            }

        };
    }];
} 
```

也就是说，我根据返回的对象数组手动添加了空格->用户链接。

这是正确的方法吗？它似乎工作正常，但我担心我错过了关于 RestKit 自动做事的技巧。

返回的相关文件的 XML 看起来像

```
<users type="array">
<user>
<id>aPrimaryKey</id>
<login>loginName</login>
<login_name warning="deprecated">loginName</login_name>
<name>Real Name</name>
</user> 
```

所以返回的文件中没有任何内容表明我试图链接到的空间：我在我请求的 URL 中传递了它，但返回的文档中没有关于它的任何内容，这就是我想出这个块的原因基于的解决方案。

对于所有 RestKit 用户来说，这看起来像是形成多对多链接的可接受方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:23:54.430

如果有效的话，好吗？

您可以考虑拥有一个 Space 自定义 ManagedObject。让它响应`RKObjectLoaderDelegate`.

然后，当您收到回复时，您可以`loadAtResourcePath`在其 `objectLoader:didLoadObject:(id)object`或`objectLoader:didLoadObjectDictionary:` 方法中触发 from。

您还可以让您的 Space 类响应来自 User 的代表，然后将它们绑定到他们的空间中？

可能会更好，但这取决于您要达到的目标。总之值得深思。:)

# c - 内存和静态/共享库中的程序位置

> ID：10110160
> 
> 赞同：0
> 
> 时间：2012-04-11T16:35:06.043
> 
> 标签：c, caching, memory, shared-libraries, static-libraries

当我运行一个程序（在 linux 中）时，它是否都被加载到物理内存中？如果是这样，在缓存方面是否使用共享库而不是静态库？一般来说，什么时候应该使用共享库，什么时候应该使用静态库？如果重要的话，我的代码是用 C 或 C++ 编写的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T16:40:05.853

这篇[文章](http://www.ilkda.com/compile/Static_Versus_Dynamic.htm)涵盖了您想要的一些不错的基础。本文更深入地介绍了共享库的[优势](http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html)

SO 也深入探讨了这个话题

[静态库和共享库的区别？](https://stackoverflow.com/questions/2649334/difference-between-static-and-shared-libraries)

[何时使用动态库与静态库](https://stackoverflow.com/questions/140061/when-to-use-dynamic-vs-static-libraries)

几乎所有上述文章都偏向共享库。维基百科试图拯救静态库:)

来自[维基](http://en.wikipedia.org/wiki/Static_library#Advantages_of_static_linking)，

> 将库与可执行文件静态链接而不是动态链接它们有几个优点。最重要的是应用程序可以确定它的所有库都存在并且它们是正确的版本。这避免了依赖问题。通常，静态链接会带来显着的性能提升。
> 
> 静态链接还可以允许将应用程序包含在单个可执行文件中，从而简化分发和安装。
> 
> 使用静态链接，包含目标可执行文件（或目标库）直接和间接引用的库的那些部分就足够了。
> 
> 使用动态库时，会加载整个库，因为事先不知道应用程序将调用哪些函数。这种优势在实践中是否显着取决于库的结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:42:36.370

当您具有可以在不同程序之间使用和“共享”的功能时，主要使用共享库。在这种情况下，您将有一个点，所有程序都将获得它们的方法。但是，这会产生依赖性问题，因为现在您编译的程序依赖于该库的特定版本。

当您不想遇到依赖问题并且不希望您的程序关心目标系统上安装了哪些 X 或 Y 库时，通常会使用静态库。

那么，使用哪一个呢？为此，您应该回答以下问题：

1.  您的程序会在不同的平台或 Linux 发行版上使用吗？（例如红帽、Debian、SLES11-SP1）
2.  您是否复制了不同二进制文件正在使用的代码？
3.  您是否设想将来其他程序可以从您的工作中受益？

我认为这是一个个案决定，它不是一个适合所有类型的答案。

# oracle - Devart dotConnect For Oracle 和 Enterprise Library 自定义提供程序映射

> ID：10110161
> 
> 赞同：2
> 
> 时间：2012-04-11T16:35:06.077
> 
> 标签：oracle, enterprise-library, provider, devart, dotconnect

我正在尝试使用 Devart 的 dotConnect for Oracle 试用来获得一个简单的概念验证，因为我们目前使用 .Net 框架 OracleClient（由于不推荐使用），但我们还需要在不需要连接的情况下进行连接Oracle 客户端甚至即时客户端。出于这个原因，我试图向我的老板证明 dotConnect 是这项工作的工具，因为它的直接模式和与 Enterprise Library 5 一起工作的能力（用于我们的数据访问层）。我遵循了 Devart 提供的示例，包括在测试应用程序的 app.config 中添加自定义提供程序映射。这一切似乎在我的开发机器上都可以在 IDe 和已编译的应用程序中运行，所以我将它包装在一个简单的设置和部署项目中，

它只是不想工作。测试执行一个简单的选择语句并在列表视图中显示结果（如果有的话 - 如果没有，您会收到一条消息）。我实际上并不关心结果本身，而只是得到它们的行为。问题是当我执行测试时，我得到了无用的 EL 错误：

```
Activation error occured while trying to get instance of type Database, key "Testing26_devart" 
```

这是有问题的代码行：

```
Dim db As Database = EnterpriseLibraryContainer.Current.GetInstance(Of Database)(EnvironmentName) 
```

这是 app.config 文件中的提供程序映射：

```
<add databaseType="Devart.Data.Oracle.EnterpriseLibrary.OracleDatabase, Devart.Data.Oracle.EnterpriseLibrary, Version=3.5.4456.40828, Culture=neutral, PublicKeyToken=null" name="Devart.Data.Oracle" /> 
```

这是 app.config 中的连接字符串：

```
<add name="Testing26_devart" connectionString="User Id=Testing26;Password=Testing26;Server=ORACLE-SERVER;Direct=True;Sid=DEVORA;Port=1523;"
        providerName="Devart.Data.Oracle" /> 
```

我知道这个错误可能是由于使用了错误的连接字符串名称（除其他外）引起的，但我知道这是正确的，因为我首先从配置文件中检索它。这也与开发环境中使用的配置完全相同。内部例外是这样的：

```
Microsoft.Practices.Unity.ResolutionFailedException: Resolution of the dependency failed, type = "Microsoft.Practices.EnterpriseLibrary.Data.Database", name = "Testing26_devart".

Exception occurred while: while resolving.

Exception is: InvalidOperationException - The type Database cannot be constructed. You must configure the container to supply this value. 
```

我怀疑提供程序映射是罪魁祸首，因为如果我将连接字符串中的提供程序更改为`System.Data.OracleClient`then 它完全没有问题找到连接字符串，而是抱怨不支持的关键字`Direct`（来自 dotConnect Direct 模式开关），这是有道理的。

我看不出我在提供者映射方面做错了什么。我以前没有使用过它，但我使用了 EL 配置工具来确保它的正确性，自定义库包含在可执行文件（和其他 EL 库）中。我看过几个例子，所有这些都表明我有正确的配置，那么我错过了什么？这让我发疯了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:37:13.567

听起来 DbProviderFactory 没有配置。可能当您安装 Devart 软件时，它会在 machine.config 中安装 DbProviderFactory。检查开发机器上的 machine.config 是否存在 DbProviderFactory。

如果您不想修改 machine.config，您可以将配置信息添加到您的 app.config。它看起来像：

```
 <system.data>
    <DbProviderFactories>
      <add name="dotConnect for Oracle" invariant="Devart.Data.Oracle" 
description="Devart dotConnect for Oracle" type="Devart.Data.Oracle.OracleProviderFactory, Devart.Data.Oracle" />        
    </DbProviderFactories>
  </system.data> 
```

我不熟悉 Devart 库，所以我不确定 Version 或 PublicKeyToken 是什么。

如果 Enterprise Library 找不到 DbProviderFactory，则不会注册数据库，当您尝试访问数据库时，您将收到在容器中找不到对象的消息。

# php - Symfony2：PHP模板中的会话全局变量

> ID：10110169
> 
> 赞同：8
> 
> 时间：2012-04-11T16:35:27.167
> 
> 标签：php, templates, session, symfony

Symfony 文档 说：

> 在每次请求期间，Symfony2 默认会在 Twig 和 PHP 模板引擎中设置一个全局模板变量 app。app 变量是一个 GlobalVariables 实例，它可以让您自动访问一些特定于应用程序的变量：
> app.security - 安全上下文。
> app.user - 当前用户对象。
> app.request - 请求对象。
> app.session - 会话对象。
> app.environment - 当前环境（dev、prod 等）。
> app.debug - 如果处于调试模式，则为真。否则为假。

示例：
在树枝中：`{{ app.request.method }}`
在 PHP 中：`echo $app->getRequest()->getMethod()` 在树枝中：`{{ app.user.username }}`
但对于会话对象：
在树枝中：`{{ app.session.varname }}`
在 PHP 中：`// I don't know, do you know how to call it?`

我尝试过：`$session = $app->getSession('uid');`但是当我尝试将其存储到数据库时，它告诉我：

> 可捕获的致命错误：无法将 Symfony\Component\HttpFoundation\Session 类的对象转换为 C:\wamp\www 中的字符串...

PHP模板缺乏资源，但在我的情况下，由于某些原因我无法切换。

换句话说，PHP 模板中的等价物是：
`{{ app.session.varname }}`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-11T18:54:41.077

在树枝中：`{{ app.session.varname }}`

在 PHP 中：`echo $app->getSession()->get('uid');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:16:31.820

```
$session = $this->get('session');

if ($session->has('varname')) {
    echo $session->varname
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T19:39:03.207

您是否尝试过 error_log $app->getSession() 以查看它返回的内容？

```
error_log(var_dump($app->getSession(), true)); 
```

# c# - 设计用于 F# 和 C# 的 F# 库的最佳方法

> ID：10110174
> 
> 赞同：116
> 
> 时间：2012-04-11T16:35:37.647
> 
> 标签：c#, f#

我正在尝试在 F# 中设计一个库。该库应该*对 F# 和 C# 的使用都很*友好。

这就是我有点卡住的地方。我可以使它对 F# 友好，或者我可以使它对 C# 友好，但问题是如何使它对两者都友好。

这是一个例子。想象一下我在 F# 中有以下函数：

```
let compose (f: 'T -> 'TResult) (a : 'TResult -> unit) = f >> a 
```

这在 F# 中完全可用：

```
let useComposeInFsharp() =
    let composite = compose (fun item -> item.ToString) (fun item -> printfn "%A" item)
    composite "foo"
    composite "bar" 
```

在 C# 中，该`compose`函数具有以下签名：

```
FSharpFunc<T, Unit> compose<T, TResult>(FSharpFunc<T, TResult> f, FSharpFunc<TResult, Unit> a); 
```

但当然，我不想`FSharpFunc`在签名中，我想要的是`Func`，`Action`相反，像这样：

```
Action<T> compose2<T, TResult>(Func<T, TResult> f, Action<TResult> a); 
```

为此，我可以创建`compose2`这样的函数：

```
let compose2 (f: Func<'T, 'TResult>) (a : Action<'TResult> ) = 
    new Action<'T>(f.Invoke >> a.Invoke) 
```

现在，这在 C# 中完全可用：

```
void UseCompose2FromCs()
{
    compose2((string s) => s.ToUpper(), Console.WriteLine);
} 
```

但是现在我们在使用`compose2`F# 时遇到了问题！现在我必须将所有标准 F# 包装`funs`到`Func`and`Action`中，如下所示：

```
let useCompose2InFsharp() =
    let f = Func<_,_>(fun item -> item.ToString())
    let a = Action<_>(fun item -> printfn "%A" item)
    let composite2 = compose2 f a

    composite2.Invoke "foo"
    composite2.Invoke "bar" 
```

**问题：**对于 F# 和 C# 用户，我们如何才能为 F# 编写的库提供一流的体验？

到目前为止，我想不出比这两种方法更好的方法：

1.  两个单独的程序集：一个针对 F# 用户，第二个针对 C# 用户。
2.  一个程序集但不同的命名空间：一个用于 F# 用户，第二个用于 C# 用户。

对于第一种方法，我会这样做：

1.  创建一个 F# 项目，将其命名为 FooBarFs 并将其编译为 FooBarFs.dll。

    *   将库完全定位到 F# 用户。
    *   从 .fsi 文件中隐藏所有不必要的内容。
2.  创建另一个 F# 项目，调用 if FooBarCs 并将其编译为 FooFar.dll

    *   在源代码级别重用第一个 F# 项目。
    *   创建隐藏该项目所有内容的 .fsi 文件。
    *   创建以 C# 方式公开库的 .fsi 文件，使用 C# 习惯用法作为名称、命名空间等。
    *   创建委托给核心库的包装器，在必要时进行转换。

我认为使用命名空间的第二种方法可能会让用户感到困惑，但是你有一个程序集。

**问题：**这些都不理想，也许我缺少某种编译器标志/开关/属性或某种技巧，有更好的方法吗？

**问题：**有没有其他人试图实现类似的东西，如果是这样，你是怎么做到的？

编辑：澄清一下，问题不仅在于函数和委托，还在于 C# 用户使用 F# 库的整体体验。这包括 C# 原生的命名空间、命名约定、惯用语等。基本上，C# 用户不应该能够检测到该库是用 F# 编写的。反之亦然，F# 用户应该喜欢处理 C# 库。

* * *

**编辑2：**

从到目前为止的答案和评论中，我可以看出我的问题缺乏必要的深度，这可能主要是由于仅使用了一个示例，即出现 F# 和 C# 之间的互操作性问题，即函数值问题。我认为这是最明显的例子，所以这导致我用它来问这个问题，但出于同样的原因，给人的印象是这是我唯一关心的问题。

让我提供更具体的例子。我已经阅读了最优秀的 [F# 组件设计指南](http://fsharp.org/specs/component-design-guidelines/) 文档（非常感谢@gradbot！）。文档中的指南（如果使用）确实解决了一些问题，但不是全部。

该文档分为两个主要部分：1）针对 F# 用户的指南；2) 针对 C# 用户的指南。它甚至没有试图假装可以有一个统一的方法，这正好呼应了我的问题：我们可以针对 F#，我们可以针对 C#，但是针对两者的实际解决方案是什么？

提醒一下，我们的目标是拥有一个用 F# 编写的库，并且可以在 F# 和 C# 语言中*惯用地使用它。*

这里的关键字是*惯用*的。问题不在于一般的互操作性，它只是可以使用不同语言的库。

现在来看示例，这些示例直接来自 [F# 组件设计指南](http://fsharp.org/specs/component-design-guidelines/)。

1.  模块+函数（F#）与命名空间+类型+函数

    *   F#：请使用命名空间或模块来包含您的类型和模块。惯用的用法是将函数放在模块中，例如：

        ```
        // library
        module Foo
        let bar() = ...
        let zoo() = ...

        // Use from F#
        open Foo
        bar()
        zoo() 
        ```

    *   C#：对于 vanilla .NET API，请务必使用命名空间、类型和成员作为组件（相对于模块）的主要组织结构。

        这与 F# 指南不兼容，需要重新编写示例以适应 C# 用户：

        ```
        [<AbstractClass; Sealed>]
        type Foo =
            static member bar() = ...
            static member zoo() = ... 
        ```

        但是，通过这样做，我们打破了 F# 的惯用用法，因为我们不能再使用`bar`并且`zoo`没有前缀`Foo`.

2.  元组的使用

    *   F#：在适合返回值时使用元组。

    *   C#：避免在 vanilla .NET API 中使用元组作为返回值。

3.  异步

    *   F#：在 F# API 边界处使用 Async 进行异步编程。

    *   C#：使用 .NET 异步编程模型（BeginFoo、EndFoo）或作为返回 .NET 任务的方法（Task）公开异步操作，而不是作为 F# Async 对象。

4.  用于`Option`

    *   F#：考虑对返回类型使用选项值，而不是引发异常（对于面向 F# 的代码）。

    *   考虑使用 TryGetValue 模式而不是在 vanilla .NET API 中返回 F# 选项值（选项），并且更喜欢方法重载而不是将 F# 选项值作为参数。

5.  受歧视的工会

    *   F#：使用可区分联合作为类层次结构的替代方法来创建树结构数据

    *   C#：*对此没有具体的指导方针，但区分联合的概念对 C# 来说是陌生的*

6.  咖喱函数

    *   F#：*柯里化函数是 F# 的惯用语*

    *   C#：不要在 vanilla .NET API 中使用参数柯里化。

7.  检查空值

    *   F#：*这不是 F# 的惯用语*

    *   C#：考虑检查 vanilla .NET API 边界上的空值。

8.  使用 F# 类型`list`, `map`, `set`, 等

    *   F#：*在 F# 中使用这些是惯用的*

    *   C#：考虑将 .NET 集合接口类型 IEnumerable 和 IDictionary 用于原始 .NET API 中的参数和返回值。（*即不要使用 F# `list`, `map`,`set`*）

9.  函数类型（显而易见的）

    *   F#：*使用 F# 函数作为值是 F# 的惯用语，显然*

    *   C#：在 vanilla .NET API 中使用 .NET 委托类型而不是 F# 函数类型。

我认为这些应该足以证明我的问题的性质。

顺便说一句，指南也有部分答案：

> ...在为 vanilla .NET 库开发高阶方法时，一种常见的实现策略是使用 F# 函数类型编写所有实现，然后使用委托创建公共 API，作为实际 F# 实现的薄外观。

**总结一下。**

有一个明确的答案：*没有我错过的编译器技巧*。

根据指南文档，似乎首先为 F# 创作，然后为 .NET 创建外观包装器是一种合理的策略。

那么问题仍然是关于这个的实际实施：

*   单独的组件？或者

*   不同的命名空间？

如果我的解释是正确的，Tomas 建议使用单独的命名空间就足够了，并且应该是一个可以接受的解决方案。

我想我会同意这一点，因为命名空间的选择不会让 .NET/C# 用户感到惊讶或困惑，这意味着他们的命名空间应该看起来像是他们的主要命名空间。F# 用户将不得不承担选择 F# 特定命名空间的负担。例如：

*   FSharp.Foo.Bar -> 面向库的 F# 命名空间

*   Foo.Bar -> .NET 包装器的命名空间，C# 的惯用语

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-11T19:59:31.650

Daniel 已经解释了如何定义您编写的 F# 函数的 C# 友好版本，因此我将添加一些更高级别的注释。首先，您应该阅读[F# 组件设计指南](https://docs.microsoft.com/en-us/dotnet/fsharp/style-guide/component-design-guidelines)（已被 gradbot 引用）。这是一个解释如何使用 F# 设计 F# 和 .NET 库的文档，它应该回答您的许多问题。

使用 F# 时，基本上可以编写两种库：

*   **F# 库**被设计为*只能*从 F# 中使用，因此它的公共接口以函数式样式编写（使用 F# 函数类型、元组、可区分联合等）

*   **.NET 库**旨在用于*任何*.NET 语言（包括 C# 和 F#），它通常遵循 .NET 面向对象的风格。这意味着您将把大部分功能公开为带有方法的类（有时是扩展方法或静态方法，但大部分代码应该在 OO 设计中编写）。

在您的问题中，您问的是如何将函数组合公开为 .NET 库，但我认为`compose`从 .NET 库的角度来看，像您这样的函数是太低级的概念。您可以将它们公开为使用`Func`and的方法`Action`，但这可能不是您最初设计普通 .NET 库的方式（也许您会使用 Builder 模式或类似的东西）。

在某些情况下（即在设计与 .NET 库样式不太匹配的数值库时），设计一个在单个库中混合**F#**和**.NET样式的库是很有意义的。**做到这一点的最好方法是拥有普通的 F#（或普通的 .NET）API，然后提供包装器以在其他样式中自然使用。包装器可以位于单独的命名空间中（如`MyLibrary.FSharp`and `MyLibrary`）。

在您的示例中，您可以保留 F# 实现，`MyLibrary.FSharp`然后在命名空间中添加 .NET（C# 友好）包装器（类似于 Daniel 发布的代码）`MyLibrary`作为某个类的静态方法。但同样，.NET 库可能具有比函数组合更具体的 API。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-11T16:54:40.653

您只需用or包装函数*值*（部分应用的函数等），其余的将自动转换。例如：`Func``Action`

```
type A(arg) =
  member x.Invoke(f: Func<_,_>) = f.Invoke(arg)

let a = A(1)
a.Invoke(fun i -> i + 1) 
```

因此，在适用的情况下使用`Func`/是有意义的。`Action`这是否消除了您的担忧？我认为您提出的解决方案过于复杂。您可以用 F# 编写整个库，并在 F#*和*C# 中轻松使用它（我一直这样做）。

此外，在互操作性方面，F# 比 C# 更灵活，因此如果担心这一点，通常最好遵循传统的 .NET 样式。

编辑

我认为，在单独的命名空间中创建两个公共接口所需的工作只有在它们互补或不能从 C# 中使用 F# 功能（例如内联函数，它依赖于 F# 特定的元数据）时才得到保证。

依次考虑你的观点：

1.  模块 +`let`绑定和无构造函数类型 + 静态成员在 C# 中看起来完全一样，所以尽可能使用模块。您可以使用[`CompiledNameAttribute`](http://msdn.microsoft.com/en-us/library/ee340493.aspx)为成员提供 C# 友好的名称。

2.  我可能错了，但我的猜测是组件指南是在`System.Tuple`添加到框架之前编写的。（在早期版本中，F# 定义了它自己的元组类型。）从那以后，`Tuple`在普通类型的公共接口中使用它变得更容易接受。

3.  这就是我认为您以 C# 方式做事的地方，因为 F#`Task`与`Async`. 您可以在内部使用异步，然后[`Async.StartAsTask`](http://msdn.microsoft.com/en-us/library/ee821132.aspx)在从公共方法返回之前调用。

4.  从 C# 开发 API 时， Embrace of`null`可能是最大的缺点。过去，我尝试了各种技巧来避免在内部 F# 代码中考虑 null，但最后，最好使用公共构造函数标记类型`[<AllowNullLiteral>]`并检查 args 是否为 null。在这方面它并不比 C# 差。

5.  可区分联合通常编译为类层次结构，但在 C# 中始终具有相对友好的表示形式。我会说，用它们标记`[<AllowNullLiteral>]`并使用它们。

6.  柯里化函数产生函数*值*，不应使用。

7.  我发现拥抱 null 比依赖它在公共接口中被捕获并在内部忽略它更好。YMMV。

8.  在内部使用`list`//很有意义`map`。`set`它们都可以通过公共接口公开为`IEnumerable<_>`. 此外，[`seq`](http://msdn.microsoft.com/en-us/library/ee353788.aspx)、[`dict`](http://msdn.microsoft.com/en-us/library/ee353774.aspx)和[`Seq.readonly`](http://msdn.microsoft.com/en-us/library/ee340408.aspx)经常有用。

9.  见#6。

采取哪种策略取决于库的类型和大小，但根据我的经验，从长远来看，找到 F# 和 C# 之间的最佳点比创建单独的 API 需要更少的工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T22:58:58.543

尽管这可能是一种矫枉过正，但您可以考虑使用[Mono.Cecil](http://www.mono-project.com/Cecil)编写一个应用程序（它在邮件列表中提供了非常棒的支持），它将在 IL 级别自动转换。例如，您使用 F# 样式的公共 API 在 F# 中实现您的程序集，然后该工具将在其上生成一个 C# 友好的包装器。

例如，在 F# 中，您显然会使用`option<'T>`( `None`，特别是) 而不是`null`在 C# 中使用 like。为这种情况编写一个包装器生成器应该相当容易：包装器方法将调用原始方法：如果它的返回值是`Some x`，则返回`x`，否则返回`null`。

您将需要处理何时`T`是值类型的情况，即不可为空；您必须将包装方法的返回值包装到`Nullable<T>`中，这有点痛苦。

同样，我很确定在您的场景中编写这样的工具会有所回报，除非您将定期使用这样的库（可从 F# 和 C# 无缝使用）。无论如何，我认为这将是一个有趣的实验，我什至可能会在某个时候进行探索。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T16:42:21.077

[F# 组件设计指南草案（2010 年 8 月）](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/fsharp-component-design-guidelines.pdf)

> **概述** 本文档着眼于与 F# 组件设计和编码相关的一些问题。特别是，它涵盖：
> 
> *   设计用于任何 .NET 语言的“vanilla”.NET 库的指南。
> *   F# 到 F# 库和 F# 实现代码的指南。
> *   F#实现代码的编码约定建议

# macos - 如何让 UNIX 'cp' 命令识别 OS X 别名？

> ID：10110182
> 
> 赞同：0
> 
> 时间：2012-04-11T16:36:10.883
> 
> 标签：macos, filesystems, cp

我正在 OS X 上开发一个备份实用程序，我注意到我的程序没有复制别名。通过一些调试，我发现当您尝试使用`cp`它复制别名时，就好像该文件不存在一样。

例子：

```
cp -p "/Users/spurlock/Desktop/IT3 Backups/IT3 HD1/Users/spurlock/Library/Caches/Desktop/iPhoto Albums/Photos/2008-00070.2.JPG" .
cp: /Users/spurlock/Desktop/IT3 Backups/IT3 HD1/Users/spurlock/Library/Caches/Desktop/iPhoto Albums/Photos/2008-00070.2.JPG: No such file or directory 
```

有没有办法`cp`识别 OS X 别名？如果没有，我如何以编程方式复制它们（C、C++、Obj C）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:39:52.453

您没有足够仔细地查看错误。

`cp`存在于 Macintosh 上，通常效果很好。您的问题似乎是该文件在您期望的位置不存在。

尝试做：

```
ls "/Users/spurlock/Desktop/IT3 Backups/IT3 HD1/Users/spurlock/Library/Caches/Desktop/iPhoto Albums/Photos/2008-00070.2.JPG" 
```

看看这是否有效。

# mysql - 首先按用户排序数据库结果集，然后按日期排序

> ID：10110184
> 
> 赞同：0
> 
> 时间：2012-04-11T16:36:26.697
> 
> 标签：mysql, sql

考虑下表（“推文”）：

```
+---------+------------+----------+
| user_id | _date      | tweet_id |
+---------+------------+----------+
| 1       | 2011-03-17 | 12       |
| 1       | 2011-03-17 | 16       |
| 1       | 2011-01-18 | 17       |
| 2       | 2011-03-18 | 23       |
| 2       | 2011-01-17 | 29       |
| 2       | 2011-03-17 | 32       |
| 2       | 2011-01-17 | 33       |
| 2       | 2011-03-18 | 34       |
| 2       | 2011-01-19 | 45       |
| 2       | 2011-03-19 | 48       |
| 3       | 2011-01-19 | 50       |
| 3       | 2011-03-19 | 51       |
| 3       | 2011-01-19 | 52       |
| 3       | 2011-01-20 | 53       |
+---------+------------+----------+ 
```

我想要以下输出： 每个用户按日期排序的推文：

```
user_id  _date       cnt
------------------------
1        2011-03-17  2
1        2011-03-18  1
2        2011-03-17  3
2        2011-03-18  2
2        2011-03-19  2
3        2011-03-19  3
3        2011-03-20  1 
```

我不明白为什么，但这不起作用：

```
SELECT user_id, _date, COUNT(tweet_id) AS cnt FROM tweets 
GROUP BY nyse_date ORDER BY sp100_id ASC 
```

有人可以向我解释为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:39:45.857

你几乎明白了。不知道为什么你有`nyse_date`和`sp100_id`在那里？您需要将 和 组合在一起`user_id`，`_date`并按它们排序。这应该为你做：

```
SELECT user_id, _date, COUNT(tweet_id) AS cnt FROM tweets 
GROUP BY user_id, _date ORDER BY user_id, _date ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:39:55.873

尝试：

```
SELECT user_id, _date, count(*) AS cnt
FROM tweets
GROUP BY user_id, _date
ORDER BY _date ASC 
```

# asp.net - 如何解决“对象引用未设置为对象的实例”错误？

> ID：10110185
> 
> 赞同：0
> 
> 时间：2012-04-11T16:36:41.357
> 
> 标签：asp.net, vb.net

我通过 codeBehind 中的请求对象传递以下内容：

获取要创建的请求代码。

```
Dim Code As String = Request("code").ToString() 
```

以下是我的标记页面`barcodes.aspx`：

```
 <form id="Form1" method="post" runat="server">
  <img src="barcodes.aspx?code=XXXXX" alt="barcode" /> 

   <asp:Image id="myBarCode"  runat="server"></asp:Image>
  </form> 
```

为什么我会收到上述错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T16:40:34.630

如果`Request("code")`为空，调用`.ToString()`它会给你一个空引用异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:41:40.103

检查是否`Request("code")`为空。如果为null，则调用时会出现对象引用错误`ToString()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T17:01:46.063

我认为这必须处理您试图获取页面上图像的查询字符串值的事实。`Request()`只会获取“请求页面”的查询字符串，这是您所在的页面，而不是图像本身。因此，如果您希望它从图像源中提取，您的代码将始终为空

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T17:04:16.667

您可以简单地删除 ToString()，因为 Request(item key) 返回 String：

```
Dim Code As String = Request("code") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T17:11:41.913

检查查询字符串值是否存在：

```
Dim Code as String = String.Empty
If Not Request.QueryString("code") Is Nothing Then
    Code = Request.QueryString("code")
End If 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T19:54:38.623

您还可以使用 string.isnullorempty() 函数来测试 request.querystring 值的内容

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-11T21:14:39.513

您需要实际提交表单 (POST) 或传递 URL 中的参数 (GET) 以通过 Request 对象获取请求参数。（许多）两种简单的方法可以做到这一点：

选项 1\. 只保留你的`barcodes.aspx`and `barcodes.aspx.vb`。投入`barcodes.aspx`：

```
<form id="Form1" method="post" runat="server">
  <input type="hidden" name="code" value="XXXXX" /> 

  <asp:Image id="myBarCode"  runat="server"></asp:Image>
  <asp:Button runat="server" Text="Submit"></asp:Button>
</form> 
```

`barcodes.aspx.vb`放入`Page_Load`：_

```
If PostBack Then
  Dim code As String = Request.Form("code")
  If Not String.IsNullOrEmpty(code) Then
    ' Generate your image here, a code has been specified
  End If
End If 
```

然后只需点击您的 aspx 页面上的提交按钮。

选项 2\. 将其拆分为两个 aspx 页面，但与上述基本相同。

输入`submitme.aspx`这个（对于 POST，单击按钮）：

```
<form id="Form1" method="post" runat="server">
  <input type="hidden" name="code" value="XXXXX" /> 

  <asp:Button runat="server" Text="Submit" PostBackURL="barcodes.aspx"></asp:Button>
</form> 
```

或者这个（对于 GET，请单击链接）：

```
<a href="barcodes.aspx?code=XXXXX">Click Me</a> 
```

将其放入 Page_Load（适用于`barcodes.aspx.vb`GET 或 POST 选项）：

```
Dim code As String = Request("code")
If Not String.IsNullOrEmpty(code) Then
  ' Generate your image here, a code has been specified
End If 
```

然后`barcodes.aspx`你只需要：

```
<asp:Image id="myBarCode"  runat="server"></asp:Image> 
```

# orchardcms - 为什么 Orchard Zones 中缺少 EDIT 按钮（以管理员身份登录时）？

> ID：10110186
> 
> 赞同：8
> 
> 时间：2012-04-11T16:36:43.830
> 
> 标签：orchardcms

> **可能重复：**
> [编辑链接围绕缺少的内容](https://stackoverflow.com/questions/9565814/edit-link-arround-the-contents-missing)

我正在通过一些在线视频教程学习如何使用 Orchard CMS。所有教程都表明，当您以管理员身份登录时，页面上的每个区域周围都有框，右上角有一个编辑按钮。

对于我自己和另一位开发人员，该框或“编辑”按钮均未显示。我们正在使用 Orchard 1.4。我在 Visual Studio 中从源代码使用 Orchard。另一位开发人员正在使用 Web Matrix。

有人可以告诉我如何获取框和编辑按钮，还是在 1.4 版中删除了该按钮？或者是别的什么？

赛斯

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-11T17:51:53.037

默认情况下它们是关闭的。

要打开它，请尝试在 Orchard Dashboard 的 Modules 部分中启用和禁用 Content Control Wrapper 和 Widget Control Wrapper 功能。

# facebook - 如何访问 facebook 智能列表？

> ID：10110187
> 
> 赞同：0
> 
> 时间：2012-04-11T16:36:49.067
> 
> 标签：facebook, facebook-graph-api

我希望我的应用程序在用户墙上发布一个只有该区域设置的人才能看到的状态？如何在 facebook apis 中限制它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:50:42.097

帖子的[文档包含](http://developers.facebook.com/docs/reference/api/post/)所有字段的详细列表，其中一个是*“隐私”*，它控制谁将看到帖子，它说：

> 包含值字段和可选朋友、网络、允许、拒绝和描述字段的对象。.... 如果指定页面的帖子定位（按位置/语言），描述字段可能包含逗号分隔的有效国家、城市和语言列表。

我建议你去检查一下，因为它在这个字段上写了更多的文字。

# c# - 如何将包含扩展 ascii 字符的字符串传递给非托管 C++ dll

> ID：10110190
> 
> 赞同：3
> 
> 时间：2012-04-11T16:36:53.063
> 
> 标签：c#, marshalling, unmanaged

我有一个通过 C DLL 与 USB 外围设备通信的 C# 应用程序。

C DLL 实现了一个函数：

```
long WriteText(char* data, long length); 
```

如果从 C/C++ 调用它，我可以发送常规 ASCII 文本，也可以发送一些扩展字符，例如“£”（0x9C 十六进制）。

但是，我已将其封装在 C# 类中

```
[DllImport("c:\\USBPD.DLL", EntryPoint = "WriteText")]
public static extern int WriteText(string data, int length); 
```

但是，当我向它发送一个带有“£”的字符串时，我会在它的位置得到一个 'u^'。其余的字符串很好。我玩过编码类型，但似乎仍然有问题。

感谢 Anand

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T17:25:01.823

你有没有尝试过：

```
[DllImport("c:\\USBPD.DLL")]
private static extern int WriteText([In] byte[] text, int length);

public static int WriteText(string text)
{
    Encoding enc = Encoding.GetEncoding(437); // 437 is the original IBM PC code page
    byte[] bytes = enc.GetBytes(text);
    return WriteText(bytes, bytes.Length);
} 
```

请注意，如果方法的名称相同，则不需要 EntryPoint。

# java - 如何从持久性单元获取所有 @Entity 类？

> ID：10110202
> 
> 赞同：14
> 
> 时间：2012-04-11T16:37:36.010
> 
> 标签：java, jakarta-ee, jpa, jpa-2.0

# 问题

我正在编写一个独立的实用程序，给定一个包含 JPA-2 注释持久性单元的 jar，需要以编程方式获取我在特定持久性单元中的所有 @Entity 类的列表。

我想决定两种方法中的哪一种是获取这些信息的方法，以及为什么；或者如果有另一种我没有想到的更好的方法。

## 解决方案 1

Java 程序将 jar 放在类路径中，使用 JavaSE 方法从 jar 中的类创建持久性单元。然后它使用 javax.persistence 类来获取 JPA 元模型，从中拉回类标记列表。

```
EntityManagerFactory emf = Persistence.createEntityManagerFactory("MY_ PERSISTENCE_UNIT");
Metamodel mm = emf.getMetamodel();

// loop these, using getJavaType() from Type sub-interface to get 
// Class tokens for managed classes.
mm.getManagedTypes(); 
```

## 解决方案 2

程序扫描指定 jar 中的目录和文件以查找 persistence.xml 文件，然后找到具有指定持久性单元名称的文件。然后 XPath 文件以获取`<class>`XML 元素列表并从那里读取完全限定的类名。根据名称，构建类令牌。

# 限制/担忧

*   如果可能的话，我想采用方法 1。
*   此实用程序不会在容器内运行，但 jar 是一个 EJB 项目，旨在在容器内运行。这将如何成为问题？
*   该实用程序将在类路径上提供 Open-EJB，以获取所有 Java EE 6 类的实现。
*   尽管 EJB 项目是为在 Hibernate 上运行而构建的，但该实用程序不应该是特定于 Hibernate 的。
*   有没有绊脚石？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-14T02:20:06.990

如果有人感兴趣，解决方案 1 有效。这基本上是我必须做的：

```
public MySQLSchemaGenerator() throws ClassNotFoundException {
    Properties mySQLDialectProps = new Properties();
    mySQLDialectProps.setProperty("javax.persistence.transactionType", "RESOURCE_LOCAL");
    mySQLDialectProps.setProperty("javax.persistence.jtaDataSource", "");

    final EntityManagerFactory emf = Persistence.createEntityManagerFactory("<persistence_unit_name>", mySQLDialectProps);
    final Metamodel mm = emf.getMetamodel();
    for (final ManagedType<?> managedType : mm.getManagedTypes()) {
      managedType.getJavaType(); // this returns the java class of the @Entity object
    }
  } 
```

关键是覆盖我的事务类型并清除我的 persistence.xml 中定义的 jtaDataSource。原来一切都是不必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T03:21:31.207

如果您的 jar 格式正确（persistence.xml 在正确的位置 - 在 META-INF 文件夹中），那么一切看起来都很好。

不必在容器内运行您的实用程序，JPA 不是 JavaEE 规范的一部分。

# c# - SelectedListViewItemCollection 如何实现 IList 但没有 Add()？

> ID：10110205
> 
> 赞同：1
> 
> 时间：2012-04-11T16:37:47.727
> 
> 标签：c#, winforms, interface, .net-2.0

我试图模仿 ListView 和其他控件处理 SelectedItems 集合的方式。我有一个包含项目集合的类，每个项目都有一个 Selected 属性。

我想模仿 Item 可以更改其自己的 Selected 属性的智能行为，并且这样做会在父类中引发 SelectedItemsChanged 事件，并且 SelectedItems 集合现在应该反映更改。

我正在尝试实现一个 SelectedItemsCollection 类，它不包含内部列表，而是检查主 Items 列表中每个项目的 Selected 状态。这样它就不需要不断地更新和与主列表同步。

我正在查看 ListView.SelectedListViewItemCollection 的元数据，它具有以下声明：

```
public class SelectedListViewItemCollection : IList, ICollection, IEnumerable 
```

它没有实现Add、Remove、RemoveAt等，这不违反IList接口的使用规则吗？如果不实现它们，我就无法编译。这只是元数据创建方式的一个小故障吗？

我应该如何去模拟这个功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T16:45:32.973

这些方法是[**明确**](http://msdn.microsoft.com/en-us/library/ms173157%28v=vs.90%29.aspx)实现的。
例如用ILspy反汇编类可以看到`Add()`方法实现如下：

```
int IList.Add(object value)
{
    throw new NotSupportedException();
} 
```

因此，例如，如果您有一个实例`SelectedItemsCollection`并且想要调用该`Add()`方法，则必须将该对象强制转换为`IList`eg：

```
((IList)mySelectedItemsCollection).Add(...) 
```

是的，如果你通过 Visual Studio 查看类的元数据，显式实现的方法是隐藏的。

关于`Selected`属性......好吧，*“诀窍”*是每个项目都有`ListView`对其所属的引用。当`Selected`属性更改时，项目调用 `SetSelectedState()`引发`SelectedChanged`事件的 listView 的方法。

也是`SelectedItemsCollection`通过`ListView`构造函数中的引用创建的，这样元素的枚举实际上是在 ListView 的内部成员上执行的，`SelectedItemsCollection`因为它是一个嵌套类，所以可以从中访问。

# c# - 如何在所有 TextBox 中自动设置 ValidatesOnExceptions、ValidatesOnDataErrors 和 NotifyOnValidationError？

> ID：10110207
> 
> 赞同：1
> 
> 时间：2012-04-11T16:37:55.077
> 
> 标签：c#, wpf, xaml, setter

目前，我正在创建文本框并在每次创建绑定时指定 ValidatesOnExceptions=True, ValidatesOnDataErrors=True, NotifyOnValidationError=True：

```
<TextBox Width="150" Text="{Binding Expander1Name, ElementName=Window, 
         Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, 
         ValidatesOnExceptions=True, ValidatesOnDataErrors=True, 
         NotifyOnValidationError=True}" Background="#FFF5EECC"></TextBox> 
```

我想使用全局 XAML 设置器设置 ValidatesOnExceptions=True, ValidatesOnDataErrors=True, NotifyOnValidationError=True。

这里的任何人都可以给出一个明确的答案是否可以这样做，如果不能 - 为什么，如果是 - 如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:48:21.980

以您描述的方式不可能，因为这些属性存在于s`Binding`内的实例上，`DependencyObject`而不是作为`DependencyObject`s 本身的属性公开。不可能创建以s 为`Style`目标的 a `Binding`。

也就是说，有几种方法可以解决这个问题：

1.  定义您自己的类来扩展`Binding`和设置您想要的任何默认值。然后，您将在当前使用的任何地方使用该类`Binding`。
2.  `Binding`定义一个附加行为，在它所附加的对象中查找所有s 并设置所需的默认值。

第一个选项对我来说更可取，因为第二个选项可能会产生无法预料的后果（如果有一个您*不*希望它采用默认值的绑定怎么办？）。第二个选项也会慢得多，因为它需要动态搜索它所附加到的项目的所有依赖属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:57:13.673

前一段时间我问了几乎相同的问题，也许你也可以在那里看看：

[装订样式？](https://stackoverflow.com/questions/5743158/style-for-bindings)

# asp.net - 如何访问中继器内部的网格视图（嵌套中继器）

> ID：10110208
> 
> 赞同：0
> 
> 时间：2012-04-11T16:37:55.787
> 
> 标签：asp.net, vb.net, repeater

我怎样才能访问`rep_DataSimilarToBacthid`？

我需要绑定 GridView 并调用 GridView RowDataBound 或 InitializeRow

```
<asp:Repeater ID="rep_UnAssignComps" runat="server">

                 <ItemTemplate>
         <asp:Repeater ID="rep_UnAssignComps" runat="server">

                 <ItemTemplate>
                    <asp:GridView ID="rep_DataSimilarToBacthid" runat="server" Style="text-align: center;
                        width: 375px;" AutoGenerateColumns="false">
                        <Columns>
                            <asp:BoundField HeaderText="Test" DataField="Test" />
                        </Columns>

                    </asp:GridView>
        </ItemTemplate>
    </asp:Repeater>
            </ItemTemplate>
        </asp:Repeater> 
```

**我正在使用带有框架版本 2.0 的 VB.Net。谢谢**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:50:18.170

在你的代码后面添加这样的功能：

```
Protected Sub grid_RowDataBound(sender As Object, e As GridViewRowEventArgs)

End Sub 
```

在您的 GridView 控件中添加 OnRowDataBound="grid_RowDataBound" 以便您获得：

```
<asp:GridView ID="rep_DataSimilarToBacthid" runat="server" OnRowDataBound="grid_RowDataBound" ... 
```

# jquery - jQuery 如何使用设置选择组获取单选按钮的选定值？

> ID：10110210
> 
> 赞同：0
> 
> 时间：2012-04-11T16:38:09.307
> 
> 标签：jquery

我有输入：

```
<input type="radio" name='lang' value='3' />
<input type="radio" name='lang' value='4' /> 
```

我尝试获取所选单选按钮的值。为此，我正在使用代码

> $('input[name="lang"]').val()

但它总是返回`3`。为什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:40:45.393

它总是返回“3”，因为它返回找到的第一个。

要获得选中的，请使用：

```
$('input[name="lang"]:checked').val() 
```

# c++ - 如何使用 OpenSSL 编码/解码任意数据？

> ID：10110211
> 
> 赞同：0
> 
> 时间：2012-04-11T16:38:13.750
> 
> 标签：c++, linux, encryption, openssl, aes

我有一个 C++ 应用程序，它有自己的例程来发送和接收数据。我想使用 OpenSSL 对部分数据应用 AES 加密。不幸的是，我无法像大多数示例那样将整个连接移交给 OpenSSL，我什至无法为 OpenSSL 提供用于从中读取数据的套接字。

我想将我的数据作为内存缓冲区传入和传出，并且我还分别传输了密钥。有没有人有一个例子如何使用 OpenSSL API 来完成？

我已经看到代码会摆弄 OpenSSL 的内部指针和结构，但依赖于某个 OpenSSL 版本，我非常希望避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:48:05.020

我认为你应该看看 cryptlib [http://www.cs.auckland.ac.nz/~pgut001/cryptlib/](http://www.cs.auckland.ac.nz/~pgut001/cryptlib/)

以下是 cryptlib 网站上示例链接的片段：

```
CRYPT_SESSION cryptSession;

/* Create the session */
cryptCreateSession( &cryptSession, cryptUser, CRYPT_SESSION_SSL_SERVER );

/* Add the server key/certificate and activate the session */
cryptSetAttribute( cryptSession, CRYPT_SESSINFO_PRIVATEKEY, privateKey );
cryptSetAttribute( cryptSession, CRYPT_SESSINFO_ACTIVE, 1 ); 
```

看起来很简单，但对我来说，我花了一些时间（并且仍然需要一些时间）来学习如何使用 cryptlib 做我想做的事情。我想它会解决你的问题！源代码可用并且 DLL 有一个 C API。试试看。（听起来像一个商业广告，但我与 cryptlib 没有任何联系，除非是它的用户）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:51:39.933

我认为您实际上想使用加密库，它是 OpenSSL 的一部分。以下是如何使用它的示例：

[http://saju.net.in/code/misc/openssl_aes.c.txt](http://saju.net.in/code/misc/openssl_aes.c.txt)

# web-services - 如何在 websphere 5 的 webservice 客户端中配置 jks 证书

> ID：10110213
> 
> 赞同：0
> 
> 时间：2012-04-11T16:38:26.163
> 
> 标签：web-services, ssl, client, websphere, jks

我在没有解决方案的情况下遵循了不同的互联网谷歌搜索指南。我在后端层为存根和存根端点 https URL 配置了代理。使用 SoapUI 和相同的 jks 文件和代理都可以正常工作。在 websphere 中出现地址不存在的远程异常...有人可以帮我逐步配置 jks 并在 SSL 中调用 webService 方法吗？

THKS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:21:01.273

解决了：

打开运行时目录的 jre/lib/security/java.security 文件并设置正确的提供程序：

security.provider.1=com.ibm.jsse2.IBMJSSEProvider2

您可以将其用作提供者 IBMJSSE2 并且一切正常。

# python - 联合进程循环 [ArcGis10/Python]

> ID：10110214
> 
> 赞同：0
> 
> 时间：2012-04-11T16:38:35.457
> 
> 标签：python, loops, union

我在 ArcGIS 10 上工作，我想实现图层之间的多个联合。但是那个联合任务有点特殊。事实上，正如我的代码开头所示，我有七层（这些层有一个特定的分类）。

```
import arcpy
from arcpy import env

workspace_2 = "V:/DONNEES/1_referentiels/mnt/1_france/1_dep_17/ign/litto3d/Litto3D_livraison_2011_10_24/traitements_lienss/tests/Workspace_chev/"
M0 = workspace_2 + "0.shp"
M1 = workspace_2 + "1.shp"
M2 = workspace_2 + "2.shp"
M3 = workspace_2 + "3.shp"
M4 = workspace_2 + "4.shp"
M5 = workspace_2 + "5.shp"
M6 = workspace_2 + "6.shp"
M7 = workspace_2 + "7.shp" 
```

我的目标是在 M0 - M4、M1 - M5、M2 - M6 等之间建立一个联盟。也就是说工会**每四层都要做**出来。所以我决定做一个循环，但我必须承认我完全迷路了。我试过了，但没有用：

```
Union_1 = {"M0":M0, "M1":M1, "M2":M2, "M3":M3}
Union_2 = {"M4":M4, "M5":M5, "M6":M6, "M7":M7}

for i in Union_1:
    for j in Union_2:
        InFeatures = [Union_1[i], Union_2[j]]
        arcpy.Union_analysis (InFeatures, i + "_" + j + ".shp", "NO_FID", 0.0003, "")
        print "ok" 
```

你能帮我循环那个联合过程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:47:20.210

可以完成此循环的一种方法如下

```
r = [m0, m1, m2, ..... , mN]
for n in range(0, len(r), 4):
   InFeatures = r[n:n+4]
   arcpy.Union_analysis (InFeatures, str(n) + "_" + str(n+4) + ".shp", "NO_FID", 0.0003, "") 
```

这是如果您总是希望对四个连续的形状文件执行 union_analysis。

# c# - 在 .NET 框架中的 WebBrowser 控件上显示 PPT 幻灯片时，如何禁用所有通过鼠标/键盘进行的用户交互？

> ID：10110215
> 
> 赞同：2
> 
> 时间：2012-04-11T16:38:37.040
> 
> 标签：c#, .net, office-interop

在 .NET 框架中的 WebBrowser 控件上显示 PPT 幻灯片时，如何禁用所有通过鼠标/键盘进行的用户交互？

我试图通过将鼠标输入放置在用户控件中来拦截对 WebBrowser 的鼠标输入，但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:31:24.840

据我所知 - Webbrowser 组件不提供一些功能来控制鼠标或键盘输入，而不是提供控制链接的功能 - 鼠标点击和 DOM 文档模型的其他事件。因此，正如我所见，实现这一目标的唯一方法是在您的应用程序上设置全局挂钩。全局钩子不是一件简单的事情，但是有很多关于这个的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T13:05:49.533

如果您不想要任何用户交互，为什么不将 PowerPoint 转换为视频？它可以以编程方式完成。看到[这个](http://msdn.microsoft.com/en-us/library/office/gg985312%28v=office.14%29.aspx)。

# opengl-es - OpenGL ES 2.0 中的旋转三角形

> ID：10110217
> 
> 赞同：0
> 
> 时间：2012-04-11T16:38:50.613
> 
> 标签：opengl-es, opengl-es-2.0

我正在尝试扩展一个简单的 Hello Triangle 应用程序以使三角形围绕 Y 轴旋转。我尝试使用 Android Hello Triangle 作为参考，只是将代码调整为 C++ 并使用 PowerVR SDK。到目前为止，我的运气并不好。三角形就在那里，静止不动。不确定是什么问题。这是我的初始化函数：

```
int Init(ESContext* esContext)
{
    UserData* userData = (UserData *)esContext->userData;
    const char *vShaderStr =
        "attribute vec4 vPosition;  \n"
        "uniform mat4 MVPMatrix;"
        "void main()                \n"
        "{                          \n"
        "   gl_Position = MVPMatrix * vPosition;\n"
        "}                          \n";

    const char *fShaderStr =
        "precision mediump float;   \n"
        "void main()                \n"
        "{                          \n"
        "   gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0); \n"
        "}                          \n";

    GLuint vertexShader;
    GLuint fragmentShader;
    GLuint programObject;
    GLint linked;
    GLfloat ratio = 320.0f/240.0f;

    vertexShader = LoadShader(GL_VERTEX_SHADER, vShaderStr);
    fragmentShader = LoadShader(GL_FRAGMENT_SHADER, fShaderStr);

    programObject = glCreateProgram();

    if (programObject == 0)
        return 0;

    glAttachShader(programObject, vertexShader);
    glAttachShader(programObject, fragmentShader);

    glBindAttribLocation(programObject, 0, "vPosition");
    glLinkProgram(programObject);
    glGetProgramiv(programObject, GL_INFO_LOG_LENGTH, &linked);

    if (!linked)
    {
        GLint infoLen = 0;
        glGetProgramiv(programObject, GL_INFO_LOG_LENGTH, &infoLen);

        if (infoLen > 1)
        {
            char* infoLog = (char *)malloc(sizeof(char) * infoLen);
            glGetProgramInfoLog(programObject, infoLen, NULL, infoLog);

            free(infoLog);
        }

        glDeleteProgram(programObject);
        return FALSE;
    }

    userData->programObject = programObject;

    glClearColor(0.0f, 0.0f, 0.0f, 1.0f);

    glViewport(0, 0, esContext->width, esContext->height);
    glClear(GL_COLOR_BUFFER_BIT);

    glUseProgram(userData->programObject);

    userData->angle = 0.0f;
    userData->start = time(NULL);
    userData->ProjMatrix = PVRTMat4::Perspective(ratio*2.0f, 2.0f, 3.0f, 7.0f, PVRTMat4::eClipspace::OGL, false, false);
    userData->ViewMatrix = PVRTMat4::LookAtLH(PVRTVec3(0.0f, 0.0f, -3.0f), PVRTVec3(0.0f, 0.0f, 0.0f), PVRTVec3(0.0f, 1.0f, 0.0f));
    return TRUE;
} 
```

这是绘制函数：

```
void Draw(ESContext *esContext)
{
    GLfloat vVertices[] = {0.0f, 0.5f, 0.0f,
                          -0.5f, -0.5f, 0.0f,
                           0.5f, -0.5f, 0.0f};

    GLint MVPHandle;

    PVRTMat4 MVPMatrix = PVRTMat4::Identity();
    UserData* userData = (UserData *)esContext->userData;

    if((GLint)(difftime(time(NULL), userData->start)) % 2 == 0)
    {
        if (userData->angle > 360.0f)
        {
            userData->angle = 0.0f;
        }
        else
        {
            userData->angle += 0.1f;
        }
    }

    userData->ModelMatrix = PVRTMat4::RotationY(userData->angle);

    MVPMatrix = userData->ViewMatrix * userData->ModelMatrix;
    MVPMatrix = userData->ProjMatrix * MVPMatrix;

    MVPHandle = glGetUniformLocation(userData->programObject, "MVPMatrix");
    glUniformMatrix4fv(MVPHandle, 1, FALSE, MVPMatrix.ptr());

    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, vVertices);
    glEnableVertexAttribArray(0);

    glDrawArrays(GL_TRIANGLES, 0, 3);
    eglSwapBuffers(esContext->eglDisplay, esContext->eglSurface);
} 
```

所以基本上我在我的初始化中设置了视图和投影矩阵。然后，在 Draw 函数中，我使用旋转矩阵和新角度定期重新计算模型矩阵。当角度达到 360 度时，我将其重置为 0，冲洗，重复。

我检查了矩阵值，它们随着角度的变化而变化。所以我猜它在将值传递给着色器时会在某个地方发生故障。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:57:46.690

你能在绘制循环结束时调用 glGetError 并检查它是否始终为 0？这通常是最好的起点。你的统一相关代码对我来说看起来不错（虽然我不知道 PVRTMat4 的细节，但我现在假设它正在做它应该做的事情）。

我确实看到了一个小错误，但我不确定它是否相关。

这：`glGetProgramiv(programObject, GL_INFO_LOG_LENGTH, &linked);`

应该：`glGetProgramiv(programObject, GL_LINK_STATUS, &linked);`

您不想将信息日志长度作为通过/失败条件进行检查，因为在成功链接的情况下不能保证为 0。

===编辑===

啊，我看到了问题。您只清除 中的颜色缓冲区`Init`，您应该在`Draw`每一帧中清除它。您的三角形可能正在旋转，但您看不到它，因为它被永远不会清除的原始三角形所遮蔽。

# objective-c - 阅读 Dock 信息 OSX？

> ID：10110220
> 
> 赞同：6
> 
> 时间：2012-04-11T16:38:58.727
> 
> 标签：objective-c, macos, cocoa, dock

我正在尝试阅读有关扩展坞的信息并检索应用程序及其在扩展坞上的位置。

谁能给我一个关于如何做到这一点的指针？

**编辑**：从 ~/Library/Preferences/com.apple.dock.plist，我可以获得与静态（固定）应用程序和文件夹相关的所有信息，但不是关于启动和最小化的应用程序磁贴的信息。

对于已启动的应用程序，我们可以使用 NSWorkspace。

大问题仍然是最小化应用程序图块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:50:10.523

~/Library/Preferences/com.apple.dock.plist 包含有关在 Dock 中显示哪些应用程序的信息。但是，它只列出了哪些永久存储在那里，而不列出任何其他可能打开的应用程序。

# php - 提高多个 RSS 提要请求的 PHP 性能？

> ID：10110223
> 
> 赞同：0
> 
> 时间：2012-04-11T16:39:00.407
> 
> 标签：php, html, performance, mobile, rss

我正在开发 www.sciencedaily.com 的小型移动应用版本。只是一个小项目。

我正在使用 RSS_PHP 来获取 XML 提要，我拥有的代码（效果很好）在 DOCTYPE 之前看起来像这样：

```
require_once '_/rss_php.php';

$featuredRSS = new rss_php;
$healthMedRSS = new rss_php;
$mindBrainRSS = new rss_php;
$plantsAnimalsRSS = new rss_php;
$earthClimateRSS = new rss_php;
$spaceTimeRSS = new rss_php;
$matterEnergyRSS = new rss_php;
$compMathRSS = new rss_php;
$archaeoRSS = new rss_php;

$featuredRSS->load('http://www.sciencedaily.com/rss/top_news/top_science.xml');
$healthMedRSS->load('http://www.sciencedaily.com/rss/health_medicine.xml');
$mindBrainRSS->load('http://www.sciencedaily.com/rss/mind_brain.xml');
$plantsAnimalsRSS->load('http://www.sciencedaily.com/rss/plants_animals.xml');
$earthClimateRSS->load('http://www.sciencedaily.com/rss/earth_climate.xml');
$spaceTimeRSS->load('http://www.sciencedaily.com/rss/space_time.xml');
$matterEnergyRSS->load('http://www.sciencedaily.com/rss/matter_energy.xml');
$compMathRSS->load('http://www.sciencedaily.com/rss/computers_math.xml');
$archaeoRSS->load('http://www.sciencedaily.com/rss/fossils_ruins.xml');

$featuredItems = $featuredRSS->getItems();
$healthMedItems = $healthMedRSS->getItems();
$mindBrainItems = $mindBrainRSS->getItems();
$plantsAnimalsItems = $plantsAnimalsRSS->getItems();
$earthClimateItems = $earthClimateRSS->getItems();
$spaceTimeItems = $spaceTimeRSS->getItems();
$matterEnergyItems = $matterEnergyRSS->getItems();
$compMathItems = $compMathRSS->getItems();
$archaeoItems = $archaeoRSS->getItems(); 
```

然后，在内容中，我通过使用经典的东西来呼应结果，比如

```
foreach($items as $item) {

    echo $item['title'];
}
etc... 
```

就像我说的，一切都很好。但它*慢*得要命。我知道应用程序的速度会受到限制，因为它必须抓取提要，但是 RSS_PHP 没有像 SimplePie 那样的缓存能力。

关于提高速度的任何想法？也许先加载精选内容然后再加载其他所有内容？

提前致谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T16:45:12.860

使用[CURL 库](http://www.php.net/manual/en/book.curl.php)。同时有多个请求的选项。所有请求将同时并行运行。检查此链接以获取示例和教程。[php curl 并行请求](http://www.somacon.com/p537.php)

**更新**

查找有关[php_rss](http://rssphp.net/documentation/#RSS_PHP.Properties)的文档。利用

```
$testRSS->loadRSS($res); //$Res is string data from Curl instead of url 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T21:02:12.660

我将尝试让您开始使用线程。为了清楚起见，我使用了减少数量的 RSS 提要。

```
require_once '_/rss_php.php';

public class loadFeeds(){

private int workers = 0;

private function launchWorker(&$feed, $url) {//NOTE: pass by reference!
  $pid = pcntl_fork();
  switch ($pid) {
  case -1: // fork failed
    $this->clog("ERROR: Worker fork failure. Running inline.");
    $feed->load($url);
    break;
  case 0: // child fork
    $feed->load($url));
    break;
  default: // parent fork?
    $this->workers++;
    echo "$this->workers launched.\n";
    break;
}

public function load() {
  $featuredRSS = new rss_php;
  $healthMedRSS = new rss_php;
  $mindBrainRSS = new rss_php;

  //Start some threads
  launchWorker($featuredRSS, 'http://www.sciencedaily.com/rss/top_news/top_science.xml');
  launchWorker($healthMedRSS, 'http://www.sciencedaily.com/rss/top_news/top_science.xml');
  launchWorker($mindBrainRSS, 'http://www.sciencedaily.com/rss/top_news/top_science.xml');

  $status = 0;
  while ($this->workers > 0) {//wait until all workers are done.
    while ($pid = pcntl_wait($status, WNOHANG OR WUNTRACED)) {//wait for a thread to report
      if ($pid > 0) { // if we have a valid pid 
        $this->workers--;//recover worker
      }
    }
  }

  $featuredItems = $featuredRSS->getItems();
  $healthMedItems = $healthMedRSS->getItems();
  $mindBrainItems = $mindBrainRSS->getItems();
} 
```

请注意，我没有对此进行测试，因为我目前还没有准备好，但它为您提供了主要组件。如果遇到问题，您可以在此处提出其他问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T16:48:29.517

实现缓存服务器端，这是我几年前创建的一个脚本（根据需要更正）：

**rss-fetch.sh：**

```
#!/bin/bash
#------------------------------------------------------------------
#
# This script will run via CRONTAB and fetch RSS feeds from the
# urls.txt file, which can be used internally.  This way we minimize
# the number of requests externally for data.
#
# - created by Jakub - March 26 2008
#
#------------------------------------------------------------------

basedir=/htdocs/RSS
storedir=/htdocs/RSS/read/
sourcefile=/htdocs/RSS/urls.txt

#------------------------------------------------------------------
# Read the URLS.TXT file to get the URL/filename
#
# Formatted:
# http://rss.slashdot.org/Slashdot/slashdot/slashdot.xml
# ^- URL                    ^- filename to save as

for s in `cat "$sourcefile"`; 
    do  
        geturl=`dirname $s`;
        filename=`basename $s`;
        wget -qN $geturl -pO "$storedir"$filename;
done;

#------------------------------------------------------------------ 
```

然后将本地 rss 提要拉入您的 PHP 进行解析，您的延迟在于获取外部源。

如果您在 CRON 上设置上面的脚本，它将以您想要的任何频率获取。享受！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T16:42:51.547

你可以：

*   实现某种形式的缓存，这在任何情况下都会有所帮助。
*   也许考虑使用一些ajax，页面加载速度很快，RSS一进入就会一个一个显示。你也可以同时运行几个调用。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-11T16:45:04.657

根据[文档](http://rssphp.net/documentation/#RSS_PHP.load)，它也可以从本地 URI 加载数据 - 为什么不在单独的脚本中获取远程提要，例如，每 15 分钟一次，并在此处仅加载本地版本？它将减少远程服务器上的负载*并*减少您的带宽使用。

# javascript - CSS hover does NOT work after KEYUP function executes

> ID：10110227
> 
> 赞同：0
> 
> 时间：2012-04-11T16:39:29.210
> 
> 标签：javascript, jquery, function, keyup

I have a problem. My script works perfectly, but I loose the CSS hover effect if I go back to the input field and delete the data inside it. I no longer see the hover effect.

Before executing the keyup function, the hover effect works correctly, but after executing the keyup function I loose the hovering no longer works **IF I delete the data in the input**.

Can anyone see a problem or conflict and a possible solution?

```
$(document).ready(function(){

   $("#r1 input").keyup(function() { 
   if($("#r1 input").val().length > 0 ) 
     $("#r1 .bx").css("background-color", "#2F2F2F").css("color", "#FFF");
   else {if($("#r1 input").val().length == 0) 
     $("#r1 .bx").css("background-color", "#E8E8E8").css("color", "#000"); }});
}); 
```

My CSS:

```
#r1:hover div.bx, #r1:hover input { background-color: #A9A9A9; cursor:pointer} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:05:51.460

`.css()` will use inline styling to change the style of your elements. This will prevent pseudo classes like `:hover`.

Define classes and use `.addClass()` and `.removeClass()` instead ([JSFiddle](http://jsfiddle.net/sX2sK/)):

```
$(document).ready(function(){
   $("#r1 input").keyup(function() {
   if($("#r1 input").val().length > 0 )
          $("#r1 .bx").removeClass('b').addClass('f');
   else {if($("#r1 input").val().length == 0)
      $("#r1 .bx").removeClass('f').addClass('b');; }});
}); 
```

```
#r1:hover div.bx, #r1:hover input { 
    background-color: #A9A9A9; cursor:pointer;
}

.f {background-color:#2f2f2f;color:#fff;}
.b {background-color:#e8e8e8;color:#000;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:05:27.917

Style tag (What javascript uses) always have preference over CSS rules, including :hover; you can obtain the desired effect this way:

```
$(document).ready(function(){

   $("#r1 input").keyup(function() { 
   if($("#r1 input").val().length > 0 ) 
     $("#r1 .bx").css("background-color", "#2F2F2F").css("color", "#FFF");
   else {
     $("#r1 .bx").removeAttr("style"); }});
}); 
```

Or you can do it better with classes

```
$(document).ready(function(){

   $("#r1 input").keyup(function() { 
   if($("#r1 input").val().length > 0 ) 
     $("#r1 .bx").addClass("ligth");
   else {
     $("#r1 .bx").removeClass("ligth");
}}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T17:07:27.423

Your CSS class may be being overridden by the presence of style information on the element itself.

Rather than directly specifying colours in your keyup, add or remove a CSS class:

```
.hasData {color:#FFF;} 
```

using the following:

```
$(document).ready(function(){
    $("#r1 input").keyup(function(ev) {
        $("#r1 .bx").toggleClass('hasData', !!$(this).val());
    });
}); 
```

Note that I'm using the 'this' from the event handler rather than searching the entire document again for the input element, and that the toggling is done with the second signature of [.toggleClass()](http://api.jquery.com/toggleClass/) after coercing the value to boolean (so, true if non-empty).

# android - 如何在Android中从SQLite中搜索带有单引号和双引号的字符串？

> ID：10110228
> 
> 赞同：0
> 
> 时间：2012-04-11T16:39:31.847
> 
> 标签：android, string, sqlite, quotes, double-quotes

我正在通过以下方式使用游标从 Android 查询 SQLite

```
Cursor searchCusor = getCursorForSearchQuery(str); 
```

其中 str 是一个字符串。此字符串可能包含单引号和双引号。因此，当光标尝试搜索时，它会引发异常

```
04-12 17:32:11.961: E/AndroidRuntime(2337): FATAL EXCEPTION: main
04-12 17:32:11.961: E/AndroidRuntime(2337): android.database.sqlite.SQLiteException: unrecognized token: "' AND latitude != 0 AND longitude != 0 ORDER BY title ASC": , while compiling: SELECT _id, title FROM node WHERE title LIKE '%'%' AND latitude != 0 AND longitude != 0 ORDER BY title ASC
04-12 17:32:11.961: E/AndroidRuntime(2337):     at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:91)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:64)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:80)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:46)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:53)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1412)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1296)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1251)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1331)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at com.mid.kew.apies.KewDatabaseHelper.getCursorForSearchMapPage(KewDatabaseHelper.java:285)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at com.mid.kew.activities.MapFragment.getCursorForSearchQuery(MapFragment.java:538)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at com.mid.kew.activities.MapFragment.access$12(MapFragment.java:537)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at com.mid.kew.activities.MapFragment$6.afterTextChanged(MapFragment.java:348)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at android.widget.TextView.sendAfterTextChanged(TextView.java:6271)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at android.widget.TextView$ChangeWatcher.afterTextChanged(TextView.java:6454)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at android.text.SpannableStringBuilder.sendTextHasChanged(SpannableStringBuilder.java:903)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:359)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:275)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:438)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:415)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:28)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at android.view.inputmethod.BaseInputConnection.replaceText(BaseInputConnection.java:583)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at android.view.inputmethod.BaseInputConnection.commitText(BaseInputConnection.java:174)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at com.android.internal.widget.EditableInputConnection.commitText(EditableInputConnection.java:120)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at com.android.internal.view.IInputConnectionWrapper.executeMessage(IInputConnectionWrapper.java:247)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at com.android.internal.view.IInputConnectionWrapper$MyHandler.handleMessage(IInputConnectionWrapper.java:73)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at android.os.Looper.loop(Looper.java:144)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at android.app.ActivityThread.main(ActivityThread.java:4937)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at java.lang.reflect.Method.invokeNative(Native Method)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at java.lang.reflect.Method.invoke(Method.java:521)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-12 17:32:11.961: E/AndroidRuntime(2337):     at dalvik.system.NativeStart.main(Native Method) 
```

我尝试如下替换单引号

```
str.replace("'", "\' "); 
```

但这没有成功，并给出了同样的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:42:34.467

你还没有展示你的`getCursorForSearchQuery`方法做了什么，但我猜它只是直接在 SQL 中包含了值。不要那样做。使用带有 的参数化 SQL 查询`PreparedStatement`，一切都应该很好。您当前的错误不仅会消失，而且您还将关闭 SQL 注入攻击漏洞，并且您将能够更好地处理其他数据类型而不会出现转换问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:32:41.563

我之前使用了以下语句

```
myDatabase.query("node", new String[]{"_id","title"}, "title LIKE \'%" + stringToSearch +"%\' AND latitude != 0 AND longitude != 0" ,null, null,null, "title ASC"); 
```

这造成了我提到的问题

所以我将查询修改为

```
myDb.query("node", new String[]{"_id","title"}, "title LIKE ? AND latitude != 0 AND longitude != 0" ,new String[]{"%"+stringToSearch+"%"}, null,null, "title ASC"); 
```

现在工作正常。

# ios - iOS - 本地通知 - 自定义振动或振动更长时间

> ID：10110235
> 
> 赞同：5
> 
> 时间：2012-04-11T16:40:06.620
> 
> 标签：ios, uilocalnotification, iphone-vibrate

我正在尝试构建一个像警报一样工作的 iPhone 应用程序，我正在使用 UILocalNotification

**问题**

*   我希望手机振动更长时间。然而目前它只振动一次。

**替代方法**

1.  是否可以使用自定义振动模式？（http://www.pcworld.com/article/242238/how_to_use_custom_vibrations_in_ios_5.html）

2.  触发推送通知时是否可以执行方法？（但应用程序可能甚至没有运行，但它需要工作）

3.  NSTimer 是一个选项吗？（但应用程序可能甚至没有运行，但它需要工作）

4.  还有其他替代品吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T04:18:36.120

您无法更改振动的持续时间，也无法进行振动，例如，振动几次（直到您不发出多次通知）。

进行自定义振动的唯一方法是在应用程序运行时从应用程序中进行，对您来说没有其他方法。

# model-view-controller - 在 renderPartial 中刷新 viewData 对象

> ID：10110238
> 
> 赞同：0
> 
> 时间：2012-04-11T16:40:12.517
> 
> 标签：model-view-controller, viewdata

我需要这方面的帮助..

我有一个包含客户端列表的视图数据，并在调用 Index 操作方法时提供它。

/* 索引动作是打开视图的方法。*/

一旦调用了 Index 方法，就会输入变量并显示视图。

然后，我有一个对话框，其中呈现一个部分视图，其中有一个包含客户列表的表格。

```
<div id="popupClients" class="popUp" style= "display:none">
    <% Html.RenderPartial("ClientsPartialView", ViewData["clients"]); %> 
```

/* popupClients 是对话框。*/

/* ClientsPartialView 是一个部分视图，其中包含一个显示客户端 ID 和名称的表。*/

问题是如何在显示之前刷新 viewdata 的数据？

我问这个是因为，如果有人插入新客户端，则必须在 partialView 中显示

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:42:36.870

您可以使用[Ajax](http://api.jquery.com/category/ajax/)在显示该对话框之前刷新代表 popupClients 的页面部分。

例如，如果您的局部视图呈现`div`包含弹出窗口的所有内容的 a，您可以使用 Ajax 来刷新它`div`，类似于：

```
function getCustomerList(searchCriteria) {
    $.ajax({
        url: 'Home/GetClientList',
        type: 'POST',
        async: false,
        data: { searchString: searchCriteria },
        success: function (result) {
            $("#popupClients").html(result);
            $( /*... do whatever you do now to show your dialog....*/ ;
        }
    });
}; 
```

**更新**

*根据您的评论...*

每次您的服务器端代码运行（并且您刚刚在评论中向我展示了服务器端代码）时，您都可以获取新数据。当您的局部视图回调您的控制器时，如果这是业务需求，您的控制器应该从数据库中更新模型。

类似于以下内容：

```
[OutputCache(Duration = 0)]
public ActionResult _ClientList()
{
    List<Clients> clientList = GetCurrentClientListsFromDB();

    return PartialView(clientList);
} 
```

这将导致每次调用控制器时对数据库进行检查。如果错过最近的更新是可以接受的，您可以更改[OutputCache](http://msdn.microsoft.com/en-us/library/system.web.mvc.outputcacheattribute%28v=vs.98%29.aspx)的值以通知 MVC 引擎将结果缓存给定的秒数。您还可以将 OutputCache 配置为基于[SQL 依赖](http://msdn.microsoft.com/en-us/library/e3w8402y%28v=vs.100%29.aspx)项进行刷新，以便在基础表发生更改时自动失效，而不仅仅是基于经过的时间进行刷新。设置起来更复杂，但会给出更准确的结果。

# matlab - 如何检查一个向量是否是另一个向量的子集？

> ID：10110240
> 
> 赞同：9
> 
> 时间：2012-04-11T16:40:20.910
> 
> 标签：matlab

我正在寻找一种matlab方式来做到这一点。循环似乎很容易。我有两个向量，比如说`a = [1 2 3]`和`b = [1 54 2 4 6 3]`。我想确定是否`a`是`b`. 这是怎么做到的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T16:43:46.400

可能最简单快捷的方法是使用函数[ISMEMBER](http://www.mathworks.com/help/techdoc/ref/ismember.html)和[ALL](http://www.mathworks.com/help/techdoc/ref/all.html)：

```
isSubset = all(ismember(a, b)); 
```

您也可以使用[SETDIFF](http://www.mathworks.com/help/techdoc/ref/setdiff.html)和[ISEMPTY](http://www.mathworks.com/help/techdoc/ref/isempty.html)，但这似乎效率较低（它在 R2010b 中的运行速度比上面的要慢一些）：

```
isSubset = isempty(setdiff(a, b)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T21:03:34.373

您也可以对两组进行相交，看看它是否为空。C = intersect(A,B) 返回 A 和 B 共有的数据，不重复。

# php - 从 gmail 应用程序中获取未读邮件

> ID：10110244
> 
> 赞同：2
> 
> 时间：2012-04-11T16:40:44.613
> 
> 标签：php, gmail, imap

我试图从谷歌应用程序邮件帐户中获取未读邮件。

我一直在尝试以下脚本：

```
$email = 'name@domain.com';
$pass  = 'password';
$inbox = imap_open('{imap.gmail.com:993/imap/ssl}INBOX', $email, $pass, NULL, 1) or die('Cannot connect to Gmail'); 
```

..但我收到以下错误：

```
Warning: imap_open() [function.imap-open]: Couldn't open stream {imap.gmail.com:993/imap/ssl}INBOX in /var/www/zvinx.dk/test/gmail.php on line 5
Cannot connect to Gmail 
```

我已经联系了我的虚拟主机，他说 webhotel 支持 imap_open。有什么方法可以检查吗？

基本上，如何使用 php 显示和标记已读邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:00:14.207

PHP 的 imap_last_error() 和 imap_errors() 函数可能会告诉您发生了什么。

```
<?php
$mbox = imap_open ("{www.yoursite.com:143}INBOX", "$username", "$password");
if ( $mbox === false ) {
       exit ("Can't connect: " . imap_last_error() ."\n");
}
else
{
       echo "Login worked!";
       //do stuff
}
?> 
```

更多：[http ://us.php.net/manual/en/function.imap-last-error.php](http://us.php.net/manual/en/function.imap-last-error.php)

# git - 如何在 ubuntu 11.04 上安装 Gerrit？

> ID：10110247
> 
> 赞同：2
> 
> 时间：2012-04-11T16:40:47.477
> 
> 标签：git, gerrit

有人可以发布一些简单的教程，如何通过命令行在 Ubuntu 11.04 上使用 gerrit 安装和配置 git。我找到了这个教程： http: [//gerrit.googlecode.com/svn/documentation/2.0/install.html](http://gerrit.googlecode.com/svn/documentation/2.0/install.html)

但我可以弄清楚我必须如何设置数据库。我是否必须为每个将提交到存储库的人创建一个单独的用户？

如果你有一些有用的链接或建议，甚至想发布教程（我希望你这样做:)）请与我分享。

现在我初始化了gerrit，但我之后得到的唯一消息是：

```
Initialized /home/administrator 
```

并且没有创建 *.sh 文件。我究竟做错了什么？

好的，如果有人正在阅读此链接，我想更新状态。我设法在 Ubuntu 上（在 http 上）安装和运行 Gerrit，但是当我浏览 Web UI 时，有时会出现内部服务器错误。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:45:35.677

在数据库设置期间，**您为 Gerrit 与数据库连接创建用户**。这与用户帐户完全不同。

您只创建一个这样的用户（如安装说明中所示），它用于验证与数据库的连接。

[稍后](http://gerrit.googlecode.com/svn/documentation/2.0/install.html#administrator_setup)，您创建用户管理员帐户。**可以使用网络浏览器创建**下一个用户帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-10T11:40:05.443

Gerrit 服务公司**[gerritforge](https://www.linkedin.com/company/gerritforge-llp)****的非官方软件包：**

```
echo 'deb mirror://mirrorlist.gerritforge.com/deb gerrit contrib' | sudo tee /etc/apt/sources.list.d/gerritforge.list
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 1871F775
sudo apt-get update
sudo /etc/init.d/gerrit start
firefox http://localhost:8080 
```

当前运行 Gerrit 2.12。

您可以从左上角`Become`链接创建并切换到无限多个帐户，包括管理员，无需密码。

在 Ubuntu 15.10 上测试。

# java - Spring 3.1，Aspect，Tomcat - 循环错误

> ID：10110248
> 
> 赞同：4
> 
> 时间：2012-04-11T16:40:51.253
> 
> 标签：java, spring, tomcat, aspectj

我有一个非常复杂的 Web 应用程序，其中整个 DAO 已外包给一个`@Aspect`类，该类将在访问需要这些实体的方法时加载数据库实体。

当从 netbeans 启动 Web 应用程序时，整个方法运行得非常好。但是，当我尝试将相同的 .war 部署到独立的 tomcat（相同版本的 tomcat，相同版本的 java）时，启动时出现以下异常：

`Caused by: java.lang.IllegalArgumentException: Advice precedence circularity error`

**而且我只是无法弄清楚是什么导致了问题以及为什么应用程序在通过 netbeans 启动时运行良好。**

**Maven**配置：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <fork>false</fork>
                <meminitial>256m</meminitial>
                <maxmem>768m</maxmem>
                <source>1.6</source>
                <target>1.6</target>
                <encoding>${project.build.sourceEncoding}</encoding>
                <showWarnings>true</showWarnings>
                <showDeprecation>false</showDeprecation>
                <debug>true</debug>
                <debuglevel>lines,vars,source</debuglevel>
            </configuration>
        </plugin>
        <plugin>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.2</version>
            <configuration>
                <archive>
                    <manifest>
                        <addClasspath>true</addClasspath>
                    </manifest>
                </archive>
                <webXml>src\main\webapp\WEB-INF\web.xml</webXml>
            </configuration>
        </plugin> 
```

**春天**：3.1.0.发布：

```
<context:annotation-config />
<context:component-scan base-package="my.package" />
<mvc:annotation-driven />
<mvc:resources mapping="/resources/**" location="/resources/" />
<aop:aspectj-autoproxy /> 
```

爪哇版：

```
java -version
java version "1.6.0_26"
Java(TM) SE Runtime Environment (build 1.6.0_26-b03)
Java HotSpot(TM) 64-Bit Server VM (build 20.1-b02, mixed mode) 
```

老实说，我不知道我应该在这篇文章中包含哪些信息，因为我什至不知道从哪里开始......如果需要，请随时询问更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:09:14.800

这不一定是一个完整的答案，但链接应该会有所帮助：

听起来好像这里的区别在于您的机器正在以不同的方式返回特定类的声明方法的顺序，这会改变 Aspect 建议的运行方式：

> Spring 使用 getDeclaredMethods 来确定通知的顺序，但 getDeclaredMethods 以未指定的顺序返回方法。（[查看更多](http://zeroturnaround.com/forum/topic.php?id=779)）

还有一个与您的问题非常相似的问题的 Spring 票： [SPR-5314](https://jira.springsource.org/browse/SPR-5314)

希望这有点帮助。祝你好运。

# login - 移除 FBML

> ID：10110250
> 
> 赞同：0
> 
> 时间：2012-04-11T16:40:58.163
> 
> 标签：login, facebook-fbml

1

我想知道如果我目前在我的页面上使用的只是带有代码的 Facebook 登录按钮，是否需要提供任何更改：

```
<script type='text/javascript'>
            window.fbAsyncInit = function() {FB.init({ appId: #FBApplicationID#', status: true, cookie: true, xfbml: true, oauth: true}); FB.getLoginStatus(function(response) {if (response.status === 'connected') {raisepostback();}
        FB.Event.subscribe('auth.login', function() {
        ...            
           }); /* end FB.init */ 
        }; /* end window.fbAsyncInit */
       window.fbAsyncInit(); </script>
<div><fb:login-button scope="email,user_about_me,user_likes, user_birthday" size="large" length="long" ></fb:login-button></div> 
```

它会在 2012 年 6 月 1 日之后工作吗？请指教。

谢谢你，彼得。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:18:36.240

As Juicy Scripter mentioned in the [comments](http://facebook.stackoverflow.com/questions/10110250/removal-of-fbml#comment12954184_10110250), the removal of FBML will not affect your code.

XFBML is different from FBML.

All social plugins and SDK utilizing XFBML are perfectly valid to use after June.

# python - 有没有办法让 pyPortMidi 在 Win7-64 上工作？

> ID：10110252
> 
> 赞同：1
> 
> 时间：2012-04-11T16:41:01.670
> 
> 标签：python, pyportmidi

我正在尝试将 pyPortMidi 用于我为 OSX、win32 和 win64 构建的应用程序。我已经让它在 OSX 和 win32 上工作，但我一直试图让它在 win64 上工作。

pyPortMidi 是一个名为 PortMidi 的 C 库的包装器，可从[PortMidi 源代码下载](http://sourceforge.net/projects/portmedia/files/portmidi/217/)0.7 版和[John Harrison 的网站](http://alumni.media.mit.edu/~harrison/code.html)下载0.9 版。我已经尝试了具有相同故障模式的两个版本。

首先，我使用面向 X64 的 MSVC++ 2008 Express 构建了 PortMidi。包含的测试程序可以工作并且能够与midi端口通信，所以我认为PortMidi构建很好。

接下来我构建了 pyPortMidi。对于 0.7 版，我不得不稍微修改 setup.py 文件以说明包含文件的正确位置（从 ../win32 移动到 ../pm_common）并且它构建时没有错误。虽然 0.7 版使用 cython 构建 _pyportmidi.c，但 0.9 版使用 pyrex 做同样的事情；为了让它工作，我必须使用使用 easy_install 安装的 pyrex 版本。它也没有错误地构建。

我可以将库导入 Python，但是当我第一次调用它时，它会立即使 Python 崩溃：

```
>>> import pypm
>>> pypm.Initialize()
Problem signature:
  Problem Event Name:   APPCRASH
  Application Name: python.exe
  Application Version:  0.0.0.0
  Application Timestamp:    4e70d55f
  Fault Module Name:    pypm.pyd
  Fault Module Version: 0.0.0.0
  Fault Module Timestamp:   4f8383fc
  Exception Code:   c0000005
  Exception Offset: 0000000000009000
  OS Version:   6.1.7601.2.1.0.256.1
  Locale ID:    1033
  Additional Information 1: 0f1f
  Additional Information 2: 0f1f1099a7fb7a2294c21b52e8fe20f2
  Additional Information 3: 07a8
  Additional Information 4: 07a8c952d5efd7a04abd16111aad6ab0 
```

有没有人让 pyPortMidi 在 X64 上运行？关于如何调试此问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:53:24.930

更新的 pypm 模块以[pygame.pypm](https://bitbucket.org/pygame/pygame/src/01b2cb16dc17/src/pypm.pyx)的形式提供。[使用来自http://www.lfd.uci.edu/~gohlke/pythonlibs/#pygame](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pygame)的win-amd64-py2.7 二进制文件，以下工作：

```
>>> from pygame import pypm
>>> pypm.Initialize() 
```

# java - 如何在 Spring 中注入具有受保护方法的 JDK 代理类？

> ID：10110253
> 
> 赞同：2
> 
> 时间：2012-04-11T16:41:11.633
> 
> 标签：java, spring, aop, cglib

我有一组相当奇怪的情况。我正在使用带有实现和接口的 bean 的 Spring 3.0.6。到目前为止，很正常的东西。我的 bean 也有一些受保护的方法。我正在使用一些 AOP（JDK 代理）并且一切正常。

当我想将此 bean 注入另一个包类时，我的问题就出现了。在正常情况下，我将能够注入实现并访问受保护的方法。不幸的是，由于是JDK代理，我只能基于接口注入。

由于我需要访问受保护的方法，我无法在接口中声明这些方法，所以我有点处于 catch-22 的情况。我尝试切换到 CGLIB 代理，但它们与其他顾问一起使用最终方法等建议 bean 时崩溃，因此这并不是真正的解决方案。

关于我能做什么的任何建议？我尝试使用 @PostConstruct 方法从应用程序上下文中检索 bean，但是（并不奇怪）它也只能检索 Proxied bean，因此无法将其转换为所需的实现。

任何建议，将不胜感激。

谢谢！

埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:35:09.307

我能想到的解决方案是从代理对象中获取实现。

[http://www.techper.net/2009/06/05/how-to-acess-target-object-behind-a-spring-proxy/](http://www.techper.net/2009/06/05/how-to-acess-target-object-behind-a-spring-proxy/)

如上面的链接“((Advised)proxy).getTargetSource().getTarget()”中给出的，从代理对象返回目标实现。现在您可以将此目标对象转换为 Impl 类，然后在该 impl 类上调用受保护的方法。

看看这是否有效。

# c++ - Qt 连接到 WebSockets 服务器

> ID：10110254
> 
> 赞同：2
> 
> 时间：2012-04-11T16:41:15.977
> 
> 标签：c++, qt, node.js, websocket, socket.io

有人可以为我指出正确的方向，让 Qt 连接到运行 Socket.io 服务器的 Node.JS 吗？

我找到了将 Qt 作为服务器运行的示例，但没有一个可以读取数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T17:04:41.877

在 Qt 中，至少有两种方法可以做到这一点。使用阻塞或非阻塞调用。如果您使用非阻塞调用，则您将信号“连接”到您正在使用的 TcpSocket 类的插槽。当一些数据到达时，您会触发事件/回调。这不是一个完整的例子：

在您的 .h 文件中声明

```
#include <QtNetwork>
...
class MyClient : public QObject
{
  std::unique_ptr<QTcpSocket> tcpSocket_;
...
public slots:
  void readTcpData();
... 
```

然后在您的 .cpp 文件中执行以下操作：

```
MyClient::MyClient()
{
  tcpSocket_ = std::unique_ptr<QTcpSocket>(new QTcpSocket(this));
  connect(tcpSocket_.get(), SIGNAL(readyRead()), this, SLOT(readTcpData()));
}

void MyClient::readTcpData()
{
  QByteArray rawData = tcpSocket_->readAll();
  QString textData(rawData);
... do something with the received data.
} 
```

要写入数据，您可以使用 tcpSocket_->write(...)。因此，每当数据到达时，readReady() 信号就会触发 readTcpData() 函数，并且您知道有“一些”数据可从套接字读取。希望它可以帮助并回答您的问题。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T10:09:01.340

你可以看看[QWebSockets](https://github.com/KurtPattyn/QWebSockets/)，它使用 Qt 实现了 websockets。我还构建了客户端和服务器 socket.io 类，它们很快就会开源。

# c# - 将 XmlRoot 或 XmlType 与 RestSharp 一起使用

> ID：10110257
> 
> 赞同：2
> 
> 时间：2012-04-11T16:41:20.557
> 
> 标签：c#, xml, serialization, xml-deserialization, restsharp

我一直在尝试使用 RestSharp 反序列化 XmlResponse，但无法在 RestSharp 中获得正确的 xml 根目录。

从服务器返回一个 MyObject 列表（以 xml 格式），客户端我想将该 xml 序列化为一个列表。

MyObject 和 MyObjectDto 之间的所有内容都相互关联，除了类的名称。

将 XmlRoot 和/或 XmlType 属性应用于类似乎没有帮助（它们在 RestSharp 反序列化器中被忽略）。

有什么办法可以在 RestSharp 中做到这一点？我需要构建自定义 xml 反序列化器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T20:56:36.547

在 John Sheehan 在另一篇文章中的评论中找到了答案：

[使用 RestSharp 发布数据时序列化对象](https://stackoverflow.com/questions/6753663/how-should-i-serialze-data-in-conjunction-with-restsharp)

RestSharp 似乎不支持 XmlRoot 装饰，但是如果您的模型和 xml 不精确匹配，您可以创建自定义序列化程序来获得所需的功能。

我最终选择了一条完全不同的路线，并使用 .NET xml 库对数据进行了序列化。

# bash - 对标准输入上的文件列表执行 bash 命令并将标准输出重定向到相关文件

> ID：10110259
> 
> 赞同：0
> 
> 时间：2012-04-11T16:41:38.130
> 
> 标签：bash, shell

我想在文本文件列表上执行 bash 脚本（`for`我猜是使用循环），将 stdout 重定向到与来自 stdin 的文本文件具有相同路径的文件加上扩展名（例如 .txt 或 .sam，或只需在标准输入路径的末尾添加一个 ~ 以使其不同）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T16:48:36.000

好的，假设列表不是太长，您可以从

```
 for i in `cat list`
  do
      # do stuff here
  done 
```

如果列表足够长，可能会导致命令行过长，则有一段时间的变体

```
 cat list | while read i
  do
       # do stuff here
  done 
```

您可以使用 basename(1) 构造文件名以摆脱旧的扩展后缀；说 .txt 到 .bak 使用

```
 `basename .txt ${i}`.bak 
```

您可以使用 dirname(1) 获取路径部分

由于宏扩展较早，您可以简单地在变量中构造命令行并扩展它们。其中 op 和 np 是您的路径名

```
 command < $op > $np 
```

有一本可爱的在线书籍，[bash Advanced Scripting Guide](http://tldp.org/LDP/abs/html/)涵盖了这一点以及更多内容。

# wicket - 什么是 Wicket PageParameters 建议？

> ID：10110262
> 
> 赞同：1
> 
> 时间：2012-04-11T16:41:55.790
> 
> 标签：wicket

假设我在 PageA 中，并且想要将具有两个字符串属性（名称和姓氏）的 Person 对象传递给 PageB。推荐的方法是什么？

A) 设置 2 个 PageParameters 值，每个字符串一个。B）通过页面参数传递整个人（如果可能的话。）

对不起，我在一个大学项目中，时间迫使我尽快问，所以我忘了写背景。

就是这个：

在 pageA 中，我有一个 Person 对象，假设我要在 PageB 中编辑该人，即编辑人员的页面。我已经有了对象，我不想再次查询它只是为了好玩哈哈。我正在使用 JPA，我想编辑我已经阅读的对象，然后使用实体管理器将其合并到数据库中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T22:47:08.003

您应该使用哪种技术的问题无法通过将它们相互比较来回答。你不能说一个比另一个更好。就像 rotsch 说的，这取决于你的要求。例如，如果您需要保持无状态和可书签，您应该通过 POST 或 GET 以无状态方式传递参数，可能使用 PageParameters。您不能通过 PageParameters 传递复杂的对象。如果您是否无状态对您来说并不重要，因为您可能已经有一个会话，那么我建议您自己实例化您的页面并将对象传递给构造函数或您喜欢的任何方式。

兼顾两者的良好做法是通过页面参数为您的对象传递一个唯一标识符，并根据该 ID 检索您的对象及其属性。通过这种方式，您可以获得对用户不透明的 url 参数、最小的参数大小、无状态和可书签的分页以及您正在使用的数据的更高可靠性。

但就这一切对您而言无关紧要，只需将您的对象放在会话中；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T16:49:55.437

取决于用例。使用 PageParameters，这 2 个值通过 URL 中的 GET-Variables 发送。这样在编辑 URL 时很容易更改变量。

传递人员对象使这更安全，并允许您传递整个对象以及与之关联的所有数据。

# asp.net-mvc - 为什么 LINQ to Entities 无法识别方法“System.String ToString()？

> ID：10110266
> 
> 赞同：30
> 
> 时间：2012-04-11T16:42:06.343
> 
> 标签：asp.net-mvc, linq, entity-framework

在 MVC3 Web 应用程序中出现错误。 `LINQ to Entities does not recognize the method 'System.String ToString()' method, and this method cannot be translated into a store expression.`

当我尝试使用 EF 从查询中获取值时：

```
public class DataRepository
    {
        public mydataEntities1 dbContext = new mydataEntities1();

        public List<SelectListItem> GetPricingSecurityID()
        {
        var pricingSecurityID = (from m in dbContext.Reporting_DailyNAV_Pricing
                                     select new SelectListItem
                                         {
                                                Text = m.PricingSecurityID.ToString(),
                                                Value = m.PricingSecurityID.ToString()
                                         });

        return pricingSecurityID.ToList();
        }
    } 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-04-11T16:47:26.693

那不能转换为SQL。我想，理论上，它可以，但没有实现。

您只需要在获得结果后执行投影：

```
var pricingSecurityID = (from m in dbContext.Reporting_DailyNAV_Pricing
                                     select m.PricingSecurityID).AsEnumerable()
    .Select(x => new SelectListItem{ Text = x.ToString(), Value = x.ToString() }); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-11T16:45:51.813

如果它已经是一个字符串，你为什么还要费心打电话`ToString`呢？我怀疑翻译没有包含在 LINQ to Entities 中，因为它没有意义。将您的 select 子句更改为：

```
select new SelectListItem
{
    Text = m.PricingSecurityID,
    Value = m.PricingSecurityID
} 
```

如果您*确实*需要执行 LINQ to Entities 不支持的操作，请使用`AsEnumerable`从数据库查询转换为进程内查询：

```
public List<SelectListItem> GetPricingSecurityID()
{
    return dbContext.Reporting_DailyNAV_Pricing
                    .Select(m => m.PricingSecurityID)
                    .AsEnumerable() // Rest of query is local
                    // Add calls to ToString() if you really need them...
                    .Select(id => new SelectListItem { Text = id, Value = id })
                    .ToList();
} 
```

我也同意杰森的反对意见，顺便说一句。你最好返回一个`List<string>`在其他地方渲染的。

另请注意，如果您*只想*使用单个`select`子句或仅使用一个`where`子句，则查询表达式实际上并不会增加太多 - 调用 LINQ 扩展方法最终会减少混乱，特别是如果您想调用*“ t*在查询表达式中支持（例如`ToList`）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-11T16:42:49.270

因为它试图将其转换为 SQL，但它不能。挂断对 的呼叫`ToString`，并在返回呼叫者之前进行投影。因此，将您的`select`条款替换为

```
select m.PricingSecurityID 
```

然后说

```
return pricingSecurityID
           .AsEnumerable()
           .Select(x => x.ToString())
           .Select(x => new SelectListItem { Text = x, Value = x })
           .ToList(); 
```

另外，我注意到您将 UI 问题和数据查询问题混为一谈。这通常是一种不好的做法。实际上，您应该只返回 ID 列表，并让代码的 UI 部分担心将其调整为正确的形式。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-13T14:28:23.437

这个怎么样。在此示例中，db 中的 VDN 字段和 Skill 字段都是整数。我正在寻找两个字段的匹配项，所以我有 2 个比较。

包括这个：

```
using System.Data.Objects.SqlClient; // needed to convert numbers to strings for linq 
```

比较数字时，请执行以下操作：

```
 // Search Code
            if (!String.IsNullOrEmpty(searchString))
            {
                depts = depts.Where(d => SqlFunctions.StringConvert((double)d.VDN).Contains(searchString.ToUpper())
                || SqlFunctions.StringConvert((double)d.Skill).Contains(searchString.ToUpper()));
            }
        // End Search Code 
```

工作人员。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-08-24T15:54:19.297

遗憾的是，EF 不知道如何转换 .ToString() 您必须使用嵌入式函数 SqlFunctions.StringConvert：http: [//msdn.microsoft.com/en-us/library/dd466292.aspx](http://msdn.microsoft.com/en-us/library/dd466292.aspx)另外 int 没有重载，因此您必须类型转换为双倍:-(

```
var vendors = 
   from v in Vendors  
   select new
   {             
       Code = SqlFunctions.StringConvert((double)v.VendorId)
   }; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-04-06T17:51:48.077

我知道这个问题得到了回答，我同意使用`AsEnumerable()`是要走的路。但是，我想强调一个常见的场景，我通常会遇到`AsEnumerable()`使用效率低下来解决此错误的地方。

来自[关系数据的 .NET 语言集成查询](https://msdn.microsoft.com/en-us/library/bb425822.aspx)

> AsEnumerable() 运算符与 ToList() 和 ToArray() 不同，不会导致执行查询。它仍然被推迟。AsEnumerable() 运算符仅更改查询的静态类型，将 IQueryable 转换为 IEnumerable，欺骗编译器将查询的其余部分视为本地执行。

**参考**

1.  [我是否误解了 LINQ to SQL .AsEnumerable()？](https://stackoverflow.com/questions/3389855/am-i-misunderstanding-linq-to-sql-asenumerable/44400508#44400508)
2.  [了解 LINQ to SQL 中的 .AsEnumerable()](https://stackoverflow.com/questions/3311244/understanding-asenumerable-in-linq-to-sql/3321136#3321136)

**低效的方式**

```
IEnumerable<InvoiceDTO> inefficientEnumerable = 
     (from a in db.Invoices
     where a.Practice_Key == practiceKey.FirstOrDefault()
     select a
     ).AsEnumerable().
     Select(x => new InvoiceDTO
                             {
                                 InvoiceID = x.InvoiceID,
                                 PracticeShortName = x.Dim_Practice.Short_Name,
                                 InvoiceDate = x.InvoiceDate,
                                 InvoiceTotal = x.InvoiceAmount,
                                 IsApproved = x.IsApproved,
                                 InvoiceStatus = (
                                                  x.IsApproved == null ? "Pending" :
                                                  x.IsApproved == true ? "Approved" :
                                                  x.IsApproved == false ? "Rejected" : "Unknown"
                                                ),
                                 InvoicePeriodStartDateText = x.InvoicePeriodStart.ToShortDateString(),
                                 InvoicePeriodEndDateText = x.InvoicePeriodEnd.ToShortDateString(),
                                 InvoicePeriodStartDate = x.InvoicePeriodStart,
                                 InvoicePeriodEndDate = x.InvoicePeriodEnd
                             }
                             );

            invoices = inefficientEnumerable.ToList(); 
```

这里`AsEnumerable`用于整个表。所有列都被选中，即使它们不是必需的。

**更好的方法**

```
 IQueryable<InvoiceDTO> invoicesQuery = 
   (from a in db.Invoices
   where a.Practice_Key == practiceKey.FirstOrDefault()
   select new InvoiceDTO
            {
             InvoiceID = a.InvoiceID,
             PracticeShortName = a.Dim_Practice.Short_Name,
             InvoiceDate = a.InvoiceDate,
             InvoiceTotal = a.InvoiceAmount,
             IsApproved = a.IsApproved,
             InvoiceStatus = (
                               a.IsApproved == null ? "Pending" :
                               a.IsApproved == true ? "Approved" :
                               a.IsApproved == false ? "Rejected" :"Unknown"
                               ),
             InvoicePeriodStartDate = a.InvoicePeriodStart,
             InvoicePeriodEndDate = a.InvoicePeriodEnd
          });

          IEnumerable<InvoiceDTO> betterEnumerable = invoicesQuery.AsEnumerable().
          Select(x => new InvoiceDTO
                                 {
                                     InvoiceID = x.InvoiceID,
                                     PracticeShortName = x.PracticeShortName,
                                     InvoiceDate = x.InvoiceDate,
                                     InvoiceTotal = x.InvoiceTotal,
                                     IsApproved = x.IsApproved,
                                     InvoiceStatus = x.InvoiceStatus,
                                     InvoicePeriodStartDateText = x.InvoicePeriodStartDate.ToShortDateString(),
                                     InvoicePeriodEndDateText = x.InvoicePeriodEndDate.ToShortDateString(),
                                     InvoicePeriodStartDate = x.InvoicePeriodStartDate,
                                     InvoicePeriodEndDate = x.InvoicePeriodEndDate
                                 }
                                 ); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-20T18:12:50.233

尝试使用 VB.NET，重点是您需要获取答案中提到的 AsEnumerable 的结果。

```
Dim _EventsDaysResult = From ED In TAdbContext.EventPolicies.AsEnumerable
                                    Where ED.EventID = EID
                                    Select New With {ED.EventID, 
                                    .DayInfo = 
                                    ED.EventDay.GetValueOrDefault.ToShortDateString & " ( " & ED.EventDayTitle & " ) "} 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2015-05-07T12:36:21.910

```
return dbContext.Reporting_DailyNAV_Pricing.AsEnumerable().Select(x => new SelectListItem
{
    Text = x.PricingSecurityID.ToString(),
    Value = x.PricingSecurityID.ToString()
}).ToList(); 
```

# wcf - jQuery ajax 跨域发布到 WCF 休息服务

> ID：10110267
> 
> 赞同：0
> 
> 时间：2012-04-11T16:42:06.260
> 
> 标签：wcf, rest, jquery

我正在尝试对 WCF 休息服务进行跨域 POST。以下是我获取请求的服务代码

```
[WebInvoke(UriTemplate = "", Method = "POST", BodyStyle = WebMessageBodyStyle.Wrapped, RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
    public SampleItem Create(SampleItem instance)
    {

        instance.StringValue += " -success";
        return instance;
    } 
```

在客户端，我有以下 jquery ajax 调用

```
 var input = { "Id": 10, "StringValue": "Test Value" };

                $("#post").click(function () {
                    $.ajax({
                        type: "POST",
                        url: "http://localhost:50577/Service1/",
                        dataType: "jsonp",
                        data: JSON.stringify(input),
                        processData: false,
                        success: function(item) {
                            $("#itemId").val(item.Id);
                            $("#name").val(item.StringValue);
                        },
                        error: function(xhr) {
                            alert("error " + xhr.responseText);
                        }
                    }); 
```

当我在服务器端调试代码时，请求到达方法，但实例参数为空。在同一个项目中，我有一个跨域获取，它可以正常工作。如果我将客户端更改为在同一个域中并将数据类型更改为 json 它工作正常。

那么跨域发布是不可能的吗？或者我还需要做些什么来让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:23:02.823

您回答了第一个问题，因为您可以调试服务！

AJAX 调用的 JSON 输入格式不正确。尝试这个：

```
...
data: JSON.stringify({instance : input}),
... 
```

# java - 如何在一个类中按顺序执行两个线程

> ID：10110268
> 
> 赞同：1
> 
> 时间：2012-04-11T16:42:12.470
> 
> 标签：java, multithreading

我正在用java进行线程编程，我遇到了一个问题，我必须一个接一个地执行2个线程。下面是简要概括我的问题的代码片段。

```
class A{
  //default execute method of this class
  String a="thread1";
  String b="thread2";
  public void execute(){
    if(a=="thread1"){
       CreateThread1 t1 = new CreateThread1(this);
       t1.call();
    }
    else if(b=="thread2") {
      CreateThread1 t2 = new CreateThread1(this);
       t2.call();
    }
  }//end of execute
  public void UpdateUI(){
    try{
      Display.getDefault.asyncExec(new Runnable(){
        public void run(){
            //ui update code here
        }
      });
    }
    catch(SWTException e){
    }
  }   
}

Class CreateThread1{
    private A object;
    public CreateThread1(A object){
      this.object=object
    }
    public void call(){
      Thread t = new Thread(this);
      t.start();
    }
    public void run(){ 
      //business logic here 
       object.UpdateUI();//updates UI 
    }
} 
```

这里的 A 类是显示线程任务进度的用户界面类，在上面的代码中，即使 CreateThread1 没有被杀死，CreateThread1 也会启动，C​​reateThread2 也会启动，我希望只有在 CreateThread1 完成任务后才触发 CreateThread2。这可能吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T16:47:28.220

您可以使用[`FixedThreadPool`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool%28int%29)大小为 1 的 a。这将保证顺序执行。

```
ExecutorService executor = Executors.newFixedThreadPool(1);
executor.submit(runnable1);
executor.submit(runnable2);
executor.shutdown();
executor.awaitTermination(10, TimeUnit.SECONDS); //waits until both runnables have finished. 
```

**编辑**

ExecutorService 在内部使用同步结构，因此您可以放心地假设 runnable1 将在 runnable2 之前运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:46:09.533

[`Thread#join`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join%28%29)，虽然我更喜欢使用[`java.util.concurrent`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)包中的类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T16:46:31.927

我很快就阅读了您的问题，但您可能需要的是 join() 您看过 Java 并发教程吗？ [http://docs.oracle.com/javase/tutorial/essential/concurrency/join.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/join.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T16:45:34.063

您可以将[ThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)与[SynchronousQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/SynchronousQueue.html)一起使用。这在 ThreadPoolExecutor 的文档中有所描述。

# asp.net - 为什么我不能在 asp.net 中注释掉更新面板？

> ID：10110272
> 
> 赞同：0
> 
> 时间：2012-04-11T16:42:27.367
> 
> 标签：asp.net, comments, repeater

我制作了一个空白页面并添加了以下内容，从而导致页面正确运行：

```
 <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
    </asp:UpdatePanel> 
```

然后我将其更改为以下内容：

```
 <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <!--<asp:UpdatePanel ID="UpdatePanel1" runat="server">-->
    <!--</asp:UpdatePanel>--> 
```

为什么这会导致错误说我在更新面板中不能有“-->”文字！？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T16:44:45.777

这是错误的：

```
<!--<asp:UpdatePanel ID="UpdatePanel1" runat="server">-->
<!--</asp:UpdatePanel>--> 
```

这是对的：

```
<%--<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    </asp:UpdatePanel>--%> 
```

编辑：

**ASP.NET 支持一个鲜为人知的功能，称为“服务器端注释”，您可以使用它来完全禁用页面中的代码/控件/html。ASP.NET 中的服务器端注释使用 <%-- --%> 分隔**

**关键区别在于，对于客户端评论，浏览器会忽略其中的内容。客户端注释中的代码/控件仍将在服务器上执行并发送到浏览器。因此，如果其中导致服务器错误，它将阻止运行该页面。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T16:50:22.820

客户端注释之类`<!--`的不会影响服务器端控件解析。因此，当您的页面被解析时，解析器仍在处理 UpdatePanel，解析器看起来像这样：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">-->     
<!--</asp:UpdatePanel> 
```

并且解析器不理解如何处理标签之间的内部内容。您需要使用服务器端注释，然后解析器将忽略该面板。

```
<%--<asp:UpdatePanel ID="UpdatePanel1" runat="server">
</asp:UpdatePanel>--%> 
```

# css - div 内的表单未正确对齐

> ID：10110273
> 
> 赞同：0
> 
> 时间：2012-04-11T16:42:28.533
> 
> 标签：css, forms, html, alignment

我在 a 中有一个表格，无论我做什么，它都会向左对齐到侧边栏。前段时间我让它正常工作，现在改变了一些东西，我无法让它回到中心。

这是我正在测试所有内容的链接。

[http://amfotography.com/newsite/contact.html](http://amfotography.com/newsite/contact.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:06:04.010

#liston 之后好像有一些奇怪的字符

```
#liston {
    font-family:Verdana, Geneva, sans-serif;
    font-weight: bold;
    color: #d00101;
    font-size: 18px;
    text-align:left;
    }â <================== here
#form {
    font-family:Verdana, Geneva, sans-serif;
    color:#ffffff;
    width:30em;
   margin:auto;
} 
```

当我删除它们时，它工作正常（您仍然需要将边距：自动设置为边距左：200px）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:49:05.260

您可以添加一个`margin-left`来弥补固定侧栏的偏移量：

例子：

```
#form{
   margin-left: 200px;
} 
```

# webserver - 页面在 web 服务 url 上中断，但在 host:port 上工作

> ID：10110274
> 
> 赞同：0
> 
> 时间：2012-04-11T16:42:34.670
> 
> 标签：webserver

我有一个总是为其 Web 服务器 url 生成 404 的页面，但是在日志中没有错误，如果我通过 host:port 访问该页面，则加载正常。Web 服务器似乎有问题，但我找不到问题所在。有人以前见过这个问题吗？谢谢你。

问题解决：网络服务插件有问题，它没有为网络服务器拾取地图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:23:15.877

端口不是 443 或 80 吗？至少在公司环境中，http/s-ports 不是默认的。

# vim - 终端的配色方案问题

> ID：10110276
> 
> 赞同：2
> 
> 时间：2012-04-11T16:42:36.523
> 
> 标签：vim

我正在尝试为 vim 安装自定义颜色方案

首先我创建了所需的文件夹

> mkdir -p ~/.vim/colors
> cp wombat.vim ~/.vim/colors "wombat.vim 是一个配色方案

然后我加了

> 配色方案 wombat.vim

到 .vimrc

然而，当我尝试在更改后加载 vim 文件时，我收到消息“E185：找不到配色方案 wombat.vim”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T16:44:46.677

只需使用

```
colorscheme wombat 
```

...没有`.vim`最后。

在 vim 里面，你可以用

```
:colorscheme wombat 
```

或使用 tab-completion after`:colorscheme`循环浏览可用的颜色方案。

```
:colorscheme<Tab> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:21:06.153

您需要将您的配色方案文件放在：

`~/.vim/colors`

或者：

`$HOME/.vim/colors`

让 Vim 找到它们。

那是在 OS X 和 Linux 上。我没有要测试的 Windows 框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-13T23:23:55.773

将此[wombat.vim](http://files.werx.dk/wombat.vim)添加到 ~/.vim/colors/wombat.vim

# jquery - jquery：使用包含的可拖动时垂直扩展div

> ID：10110279
> 
> 赞同：0
> 
> 时间：2012-04-11T16:42:39.507
> 
> 标签：jquery, css

我有一些纯文本段落，其中包含特定的单词。hilited 的单词是可拖动的。开始拖动时，我希望以更高的 z 顺序扩展顶部和底部范围（仅垂直）的 div，并允许向上和向下拖动单词（#word）那个空间（容器：父）。计划在某个时候将它放在该区域内的一个可丢弃物上。

在这一点上，我的问题是我用填充扩展#hilite ...这会增加 div 的大小而不会增加可用空间。使用 Resizable 会更好吗？还是动画？我已经看到了许多使用 Resizable 的建议，但我认为这是针对用户调整大小而不是编程。

对于 droppables，我认为一旦创建了空间，我将换出 .css('display', '[none|block]') 以在#hilite div 中显示它们并使它们成为有效目标。

[http://jsfiddle.net/monsto/GCsnM/](http://jsfiddle.net/monsto/GCsnM/)我有自动取款机。

*（哦，顺便说一句，我讨厌人们想出 jsfiddle。这简直**太天才了。**）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:13:39.527

您的容器是一个跨度，默认情况下是一个内联元素，它不能显示块属性。你必须告诉它表现得像块

```
#hilite { display: inline-block; } 
```

[演示](http://jsfiddle.net/GCsnM/12/)

而你给的选项`vertically`是假的，给`Y`。^([在这里阅读](http://jqueryui.com/demos/draggable/#option-axis))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:56:35.893

我不完全知道你想做什么，但如果你有`#word`一个包含父项的可拖动对象，即`#hilite`，则不会移动。并且`'vertically'`不是可拖动的正确参数，而是使用`'x'`or `'y'`。

更新 JSFiddle：http: [//jsfiddle.net/GCsnM/9/](http://jsfiddle.net/GCsnM/9/)

# php - 使用 php 代码通过 Google 分析跟踪页面

> ID：10110283
> 
> 赞同：1
> 
> 时间：2012-04-11T16:42:45.710
> 
> 标签：php, google-analytics

这是我用来跟踪电子邮件打开率的页面 这是一个 php 重定向到 gif 文件

问题是，我在 GA 中使用同一个帐户创建了两个campagin，它只适用于第一个帐户，是我的设置问题吗？？谢谢

```
 <?
$var_utmac = 'UA-id-1'; //enter the new urchin code
$var_utmhn = 'mywebsite2.com'; //enter your domain
$var_utmn = rand(1000000000,9999999999); //random request number
$var_cookie = rand(10000000,99999999); //random cookie number
$var_random = rand(1000000000,2147483647); //number under 2147483647
$var_today = time(); //today
$utm_source = 'newsletter';
$utm_medium = 'email';
$utm_campaign = 'newsletter';
$var_uservar = '-'; //enter your own user defined variable
$var_utmp = 'http://dl.dropbox.com/u/15672207/web.png'; //this example adds a fake file request to the (fake) tracker directory (the image/pdf filename).
$urchinUrl = 'http://www.google-analytics.com/__utm.gif?utmwv=1&utmn='.$var_utmn.'&utmsr=-&utmsc=-&utmul=-&utmje=0&utmfl=-&utmdt=-&utmhn='.$var_utmhn.'&utm_source='.$utm_source.'&utm_medium='.$utm_medium.'&utm_campaign='.$utm_campaign.'&utmp='.$var_utmp.'&utmac='.$var_utmac.'&utmcc=__utma%3D'.$var_cookie.'.'.$var_random.'.'.$var_today.'.'.$var_today.'.'.$var_today.'.2%3B%2B__utmb%3D'.$var_cookie.'%3B%2B__utmc%3D'.$var_cookie.'%3B%2B__utmz%3D'.$var_cookie.'.'.$var_today.'.2.2.utmccn%3D(direct)%7Cutmcsr%3D(direct)%7Cutmcmd%3D(none)%3B%2B__utmv%3D'.$var_cookie.'.'.$var_uservar.'%3B';
// Now fire off the HTTP request
$handle = fopen ($urchinUrl, "r");
$test = fgets($handle);
fclose($handle);
// Redirect this script as an actual GIF file sitting on this web server
header('Location: http://dl.dropbox.com/u/15672207/web.png');
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:20:56.883

[使用 Google Analytics 进行像素跟踪](http://code.google.com/intl/en/apis/analytics/docs/concepts/gaConceptsOverview.html#gifParameters)的代码看起来不错，但如果您更改参数，这可能会有所不同。注意对您的请求进行 URL 编码。

您可以使用[http_build_query](http://www.php.net/manual/en/function.http-build-query.php)组合 URL 编码和参数包装：

```
$data['utmac'] = 'UA-2202604-2';
$data['utmhn'] = 'mywebsite.com';
...
$url = 'http://www.google-analytics.com/__utm.gif?' . http_build_query($data, '', '&');
$handle = fopen($url, "r");
$test = fgets($handle);
fclose($handle); 
```

# c# - 遍历实体框架对象的表和列

> ID：10110284
> 
> 赞同：2
> 
> 时间：2012-04-11T16:42:45.887
> 
> 标签：c#, entity-framework, c#-4.0, entity-framework-4

我有一个名称`BookLibrary`为 3 个表的数据库`Author`，`Payroll`并且`Article`. 我正在使用实体框架连接到数据库。我创建了它的一个实例。

```
BookLibrary bookLibraryContext = new BookLibrary(); 
```

现在我想将其转换为数据集（将数据集作为参数传递）。怎么做？

此外，通过使用`T4`模板，我想将所有列名生成为只读字符串属性。为此，我需要遍历数据库中的所有表和列名（我想通过我的实体对象来做到这一点`bookLibraryContext`）。但我不确定如何遍历实体对象的所有表和列？我在谷歌上搜索过，但很多人建议使用反射进行循环或直接使用 SQL。我想通过 C# 来做，我对反射不太熟悉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T20:06:55.290

> 现在我想将其转换为数据集（将数据集作为参数传递）。怎么做？

手动。EF 和数据集是完全不同的技术，它们都不包含任何对转换为另一个的支持。因此，您必须手动创建要使用的数据集和所有数据表，并从上下文中手动填充它们。

如果您想使用数据集，请不要使用实体框架。直接使用数据集。

> 但我不确定如何遍历实体对象的所有表和列？

实体对象没有此信息。此信息隐藏在 EF 映射的深处，可通过`bookLibraryContext.MetadataWorkspace`. 您无需反思即可获得此信息。您只需要了解 EDM 及其存储信息的方式。

尝试这样的事情：

```
foreach (var entityType in context.MetadataWorkspace
                                  .GetItems<EntityType>(DataSpace.SSpace))
{
     string tableName = entityType.MetadataProperties
                                  .Single(m => m.Name == "Name")
                                  .Value
                                  .ToString();

     var members = (ReadOnlyMetadataCollection<EdmMember>)entityType
                                              .MetadataProperties
                                              .Single(m => m.Name == "Members")
                                              .Value;

     foreach (var columnName in members.Select(m => m.Name))
     {

     }
} 
```

# legacy - .DBF 文件无法在共享模式下打开

> ID：10110291
> 
> 赞同：0
> 
> 时间：2012-04-11T16:43:03.850
> 
> 标签：legacy, foxpro, dbf, visual-foxpro

我目前正在尝试调试我公司遗留系统的问题。最初的项目是在 90 年代中期开发的，知道该系统的每个人都离开了公司。目前，我们发现其中一个 .DBF 文件出现错误，这是一个包含不超过 4-5 列且几乎没有任何行的简单表。系统向我们发送的消息是我们无法在共享模式下打开 Message.dbf。

有没有办法以独占模式打开数据库？我们有一个带有 DBFManager 和 Visual FoxPro 6.0 设置的系统。任何提示或这些类型数据库信息的链接都会有所帮助。我们没有人了解这些系统。我希望我能提供更详细的信息，但我在这里不知所措。

到目前为止，我们已经尝试用系统上的多个备份替换该文件，并重新启动 .DBF 文件所在的服务器（以防出现锁定问题）。到目前为止，还没有解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:38:01.823

你提到你有 VFP 6 ......我将从打开 VFP 开始。在命令窗口中，键入

```
CD "C:\wherever Your Application Data is"    (enter)
use Message SHARED   (enter)
browse normal    (enter) 
```

如果您可以看到数据的内容，则说明文件没有损坏。

对于这样一个旧应用程序来说，这显然是一个最近的问题。当您提到以“共享”模式打开文件时。是否添加了代码来打开文件？如果是这样，“消息”表是否已经打开并由同一个别名使用？如果是这样，那将导致它失败。您不能在两个不同的工作区中打开具有相同“别名”名称的同一个表。如果是这种情况，您可以尝试通过执行类似...

```
if used( "Message" )
   select Message
else
   select 0
   use Message
endif 

... continue with rest of code... 
```

每个评论/反馈

如果它是从服务器关闭的，我已经看到，在文件似乎被用户锁定之前，由于无效断开连接。有时，它只要求所有用户再次注销/登录以强制将其所有资源释放到服务器......但如果实际的服务器被关闭并重新启动，那么无论如何用户会话都会被清除。我会检查服务器仍然认为谁仍然打开 Message.dbf 表。此外，如果需要，将所有用户踢出并手动使用 VFP 中的表格，仅用于微笑，打包它

我还将通过简单复制/粘贴数据所在的整个文件夹进行备份...然后启动 VFP 并执行以下操作...

```
cd "whatever path"
use Message EXCLUSIVE
PACK
use 
```

如果它是数据库的一部分，则数据库可能会以某种方式/某处损坏。为了测试...

```
cd "whatever path"
close all
open database YourDatabase Exclusive
Validate Database 
```

看看它给了你什么

...

再来一条评论。我看到你提到 NetWare (Novell)。我过去看到的东西... 最近是否有任何用户从系统中删除（即：从 NetWare）？如果是这样，并且文件最初是由“该用户”创建的，那么一旦该用户消失，所有对该文件执行任何操作的权限也将消失。您最好以管理员身份登录，选择所有文件并以管理员身份“获得所有权”。管理员永远不会有添加/编辑的限制，也永远不会作为用户被删除，因此再也不会出现这个问题。同样，这只是我从历史中记得的另一个选择，可能是问题的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T16:19:51.497

我已经很多年没有遇到过 NetWare，但在过去我经常与它发生争执，因为 Client32 For Windows 在使用默认设置时，不能很好地与 FoxPro / Clipper DBF 锁定机制配合使用。例如，[这个。](http://support.novell.com/docs/Tids/Solutions/10016234.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:53:25.683

我们无法准确调试打开 .dbf 文件的问题。相反，我们找到了几周前的系统备份，并且能够将整个系统恢复到该状态。该程序目前运行良好，但我们最初无法找到问题的原因。

# sql - 推荐的应用程序来测试 vb.net 应用程序的 SQL Server 2008 查询？

> ID：10110292
> 
> 赞同：0
> 
> 时间：2012-04-11T16:43:04.640
> 
> 标签：sql, sql-server, vb.net, sql-server-2008, testing

我是使用 SQL 数据库（和一般数据库）的新手，所以我对查询的工作方式以及如何练习它们没有很多经验。当我第一次学习 xml 和 XPath 时，我发现 XPath Visualizer 非常有用，因为堆栈溢出的人向我提到了它。因此，我想知道 SQL 数据库是否存在类似的工具？基本上是一个允许我连接到数据库、输入查询并以某种方式查看结果的工具。

我在网上看了一点，但是我发现任何可以做我想要的实用程序的选项相对较少，而且看起来很可靠。

我最终将编写一个应用程序来与 vb.net 中的 SQL 2008 服务器进行交互，但是现在我只是在试验，所以当我真正想要创建我的应用程序时我会知道我在做什么。到目前为止，我已经设法使用 OLE DB 连接连接到数据库，但我现在正在寻找一种方法来体验查询，而不仅仅是查询和找出解释程序中结果的方法。基本上我希望能够删除事物的编程方面，这样我就可以尝试查询，而无需质疑我的代码中与特定查询无关的任何内容。提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T16:48:37.230

Microsoft SQL Server Management Studio 似乎正是您正在寻找的。我不确定您当前是如何设置数据库的，但由于您正在编写一个 VB.NET 应用程序，我假设您希望留在 Microsoft 大家庭中。 [http://www.microsoft.com/download/en/details.aspx?id=7593](http://www.microsoft.com/download/en/details.aspx?id=7593) 有快递版。有很多有用的工具，例如查询可视化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T16:46:46.893

理想情况下，您会在本地安装它并实际创建一个数据库并进行处理。您还可以使用[http://www.sqlfiddle.com](http://www.sqlfiddle.com)进行一些测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T16:53:28.900

Stack Exchange 是使用真实数据工作和学习 SQL 的最佳场所之一：

[https://data.stackexchange.com/](https://data.stackexchange.com/)

整个站点数据每月转储一次。一个美妙的数据游乐场。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T16:46:06.600

首选： [http ://www.heidisql.com/](http://www.heidisql.com/)

HeidiSQL 是开源的、免费的并且非常快速和可靠。我发现界面经过深思熟虑，它提供了商业替代品的大部分功能。

第二选择： http: [//navicat.com/](http://navicat.com/)

有很多功能，非常稳定并且相当快。我觉得它的界面没有经过深思熟虑，这就是为什么它在我的列表中排名第二。

希望有帮助...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-11T17:07:38.500

我目前也在学习 SQL 2008。我不知道如何，但我偶然发现了一些可以让我练习的在线内容。

没有下载。

没有安装。

只需输入查询并针对示例进行尝试。答案可供您比较，并且使用的数据库简短而实用。它也有参考页。很棒的教程工具！

[http://sqlzoo.net/](http://sqlzoo.net/)

请在自己检查后提高此响应。这对其他 SQL 新手很有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T22:57:52.690

SQL Server Management Studio (SSMS) 非常适合编写即席查询和 T-SQL 编程。它还具有内置调试器，因此您可以逐步运行您的 T-SQL 存储过程。

如果您想尝试将更改写入数据库的查询，请了解如何`CREATE SNAPSHOT`和`RESTORE .. FROM SNAPSHOT`，以便您可以轻松地重新尝试查询。快照仅在 Enterprise 和 Developer 版本中可用。您可以下载免费的 180 天企业评估版。

使用 SQL Profiler 检查从您的应用发送到 SQL Server 的查询。

如果您的系统有安装问题，请将干净的 Windows Server (eval) 安装为虚拟机，然后在其上安装 SQL Server。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-12T15:25:27.343

我认为[http://sqlzoo.net/](http://sqlzoo.net/)建议是一个好的开始。你说

> 基本上是一个允许我连接到数据库、输入查询并以某种方式查看结果的工具。

从我所看到的，这正是你可以在那里做的。

# replication - RavenDB 复制设置基础

> ID：10110293
> 
> 赞同：5
> 
> 时间：2012-04-11T16:43:06.243
> 
> 标签：replication, ravendb

有人可以解释为 RavenDB 设置复制的基本步骤吗？我正在使用 build 888。根据我在网上找到的内容，我可以猜测可能需要做什么，但我宁愿确定。

我相信这是复制的官方文档： [http ://ravendb.net/docs/server/bundles/replication](http://ravendb.net/docs/server/bundles/replication)

首先，该文档指出：

“可以通过将 Raven.Bundles.Replication.dll 放到 Raven 的插件目录中来启用 Raven 复制。”

我在 Bundles 文件夹中看到该 DLL，但没有 Plugins 文件夹。我应该创造那个吗？它应该已经存在了吗？

看起来我们需要这样做来指定复制服务器：

![在此处输入图像描述](../Images/5903a5d996ff6334671d807a040f963b.png)

那是什么？我是否需要将此文档实际保存到数据库中？还是在某个文件系统上的配置文件中？如果我需要将其写入数据库，我是否只需将其放入我的应用程序并让它第一次运行？每次？

如果这些问题可以得到解答，我可能已经有了开始的基本信息。然后，也许我可以逐步将博客作为教程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T16:57:06.843

Bob，是的，您需要将您的 raven 根目录的 Bundles 文件夹中的 dll 放入 Plugins 文件夹中，默认情况下，该文件夹位于 Server 文件夹下。但是，您可以根据需要使用 app.config 设置更改该位置。

Raven/Replication/Destinations 实际上是您需要创建的文档的 id，以便告诉 ravenb 复制集群中其他服务器的 url。复制确实是一个基础架构问题，所以我根本不会把这个文档放在你的应用程序中——相反，我会由我自己的管理工作室创建这个文档，这是我向你建议的。

# python - 帮助从 if 循环中细化搜索结果？

> ID：10110295
> 
> 赞同：0
> 
> 时间：2012-04-11T16:43:24.043
> 
> 标签：python, dirname

我正在寻找一些帮助来从我的循环中获得所需的输出。

我正在尝试编译通向任何名为“已发布”的文件夹的路径列表。它几乎可以工作，但如果有人能告诉我一种方法来阻止循环吐出任何“已发布”的子目录，我将不胜感激。

```
import os

file = open('published_directories_list.txt', 'w');
top = "T:\PROJECTS";

for root, dirs, files in os.walk(top, topdown=False):
    for name in dirs:
        myPath = os.path.join(root, name);

        if 'published' in myPath:
            print (myPath);
            file.write(myPath + '\n');
        else:
            print (myPath + ' - no published directory!');

file.close();

print('DONE!'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:07:08.157

发生的事情是`os.walk`遍历`top`. 因此，如果您的目录结构如下：

```
top
  |
  - published
  |  |
  |  - something
  |
  - other 
```

在您的循环中的某个时刻，您的线路：

```
myPath = os.path.join(root, name) 
```

将加入 的根`/top/published`和 的名称`something`。显然，那么，当您检查`if "published" is in myPath`它时。即使您正在查看 的子目录`published`，您仍然会在路径中看到名称“已发布”。

解决此问题的一种简单方法是检查是否`myPath`以“已发布”结尾（使用[endswith](http://docs.python.org/library/stdtypes.html#str.endswith)字符串方法），而不是检查它是否仅包含它。您可以将您的`if`声明修改为：

```
if myPath.endswith('/published') 
```

请注意，我在检查内容的开头包含了一个反斜杠。这应该可以解决 DSM 的观点，即我们也不想匹配“未发布”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:17:55.547

```
>>> import os
>>> folder = 'MUI'
>>> for root, dirs, files in os.walk('C:\\windows'):
    for dir_ in dirs:
        if folder.lower() == dir_.lower():
            print os.path.join(root, folder)
            dirs.remove(dir_)

C:\windows\MUI
C:\windows\AppPatch\MUI
C:\windows\Help\MUI
C:\windows\Help\Tours\htmlTour\MUI
C:\windows\Help\Tours\mmTour\MUI
C:\windows\Help\Tours\WindowsMediaPlayer\MUI
C:\windows\Microsoft.NET\Framework\v2.0.50727\MUI
C:\windows\Microsoft.NET\Framework\v3.0\Windows Communication Foundation\MUI
C:\windows\pchealth\MUI
C:\windows\Resources\Themes\Luna\MUI
C:\windows\Resources\Themes\Luna\Shell\Homestead\MUI
C:\windows\Resources\Themes\Luna\Shell\Metallic\MUI
C:\windows\Resources\Themes\Luna\Shell\NormalColor\MUI
C:\windows\srchasst\MUI
C:\windows\system32\MUI
C:\windows\system32\oobe\MUI
C:\windows\system32\wbem\MUI
C:\windows\Web\MUI 
```

是的，您可以在迭代时触摸`dirs`（所以这里不会浏览儿童）！

我使用小写比较，因为 Windows 不关心大小写，但它会显示它。在类 Unix 系统上，`if folder in dirs`没有循环的比较将是一个好方法。

# jquery - 为什么 jquery GET 不应该缓存结果？

> ID：10110296
> 
> 赞同：2
> 
> 时间：2012-04-11T16:43:35.150
> 
> 标签：jquery, ajax, caching, click

我正在通过 ajax 函数获取我的网站子页面。一切运作良好。但是当我在控制台中检查请求时，我收到以下报告

```
Cache-Control   no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Connection  close
Content-Length  6663
Content-Type    text/html
Date    Wed, 11 Apr 2012 16:29:51 GMT
Expires Thu, 19 Nov 1981 08:52:00 GMT
Pragma  no-cache
Server  LiteSpeed
Vary    Accept-Encoding, User-Agent
X-Powered-By    PHP/5.3.10 
```

它表明内容没有被缓存。它显示过去日期的标头到期。但是在[ajax()](http://api.jquery.com/jQuery.ajax/)的 jquery 页面中，我读到默认情况下所有 ajax 调用都被缓存。有什么问题？这是我的代码

```
 <script type="text/javascript">
  $("#subpage1").click(function() {
    $("#wrapper").empty();      
    $("#wrapper").html('loading');
    $.ajax({
        url: 'subpage/1.html',
        success: function(data) {
            $("#wrapper").html(data);   
        }
    });
});
</script> 
```

我是 jquery 和 ajax 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:48:22.323

您只是错误地解释了控制台的输出：这是来自服务器的响应标头，它明确告诉客户端不要将该响应存储在缓存中。

如果您希望它被缓存，您需要在事务的服务器端进行更改，而不是在客户端进行更改。这将主要通过发送正确的标头来完成：提供未来的到期日期或根本不提供。并删除那些“缓存”标头。然后，客户端将发送最后一个缓存请求的日期及其下一个请求（在 If-Modified-Since 标头中），您只需要确保您的脚本检查自该日期时间以来是否确实有修改 - 如果是, 像往常一样返回内容，否则只响应 http 状态码 304 Not modified。Google 关于缓存控制相关的http headers，这个有点棘手。

# joomla - Joomla 1.6 前端显示蓝色错误消息“您必须先登录”。不应该显示

> ID：10110300
> 
> 赞同：0
> 
> 时间：2012-04-11T16:43:47.690
> 
> 标签：joomla

Joomla 1.6 前端显示蓝色错误消息“您必须先登录”。不应该出现。网站 2 天前刚刚上线，昨天这个错误开始出现。似乎是权限问题，但一切看起来都很好。有没有办法隐藏错误？

*   我将如何解决这个错误，看看它为什么会发生？

单击几页，您将看到错误。

*   用户登录时不显示。
*   仅发生在 1 个组件上

[http://www.alumnifootballusa.com/index.php/sign-up-1](http://www.alumnifootballusa.com/index.php/sign-up-1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:58:08.377

我看到它发生在所有页面上，单击任何链接两次。

我认为这可能与使用`enqueMessage`.

搜索`you must login first`（奇怪的英文，很容易找到）。如果您在语言文件中找到它，请再次搜索该语言键。

# python - 调用 Integer 导致的 IndexError

> ID：10110301
> 
> 赞同：0
> 
> 时间：2012-04-11T16:43:49.463
> 
> 标签：python, python-3.x, stack-overflow

我正在使用堆栈类为程序添加前缀。但是，每当我调用整数时，push() 方法都会引发 IndexError，即使我有一个异常处理程序并且我引用的是整数本身，而不是列表。

堆栈.py：

```
class stack():
    def __init__(self,n):
        self.n = n
        self.top = -1
        self.stack = [""] * n

    #...

    def push(self,c):
        try:
            print(self.top)
            self.top += 1
            self.stack[self.top] = c
        except IndexError:
            print("Stack is full.") 
```

点子.py：

```
def toPrefix(input):
    instack = stack(15)
    prefix = ""

    for i in range(0,len(input)):
        for c in range(0,len(input[i])):
            if(input[i][c].isalpha()):
                instack.push(input[i][c]) 
```

错误：

```
Traceback (most recent call last):
  File "<string>", line 247, in run_nodebug
  File "P:\Scripts\Python\ascl-pip.py", line 42, in <module>
    toPrefix(infix)
  File "P:\Scripts\Python\ascl-pip.py", line 37, in toPrefix
    instack.push(input[i][c])
  File "P:\Scripts\Python\stack.py", line 36, in push
    print(self.top)
IndexError: list assignment index out of range 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:52:08.180

您的回溯不一致。它声称这条线

```
print(self.top) 
```

是的原因`IndexError`，但`print()`永远不会引发这样的错误。

发生这种情况的唯一方法是您使用的是仍然加载在解释器实例中的旧版本的模块。重新启动您的解释器。

如果您真的需要实现自己的堆栈类，则可以使用如下愚蠢的方法：

```
class Stack(list):
    push = list.append 
```

此堆栈将具有无限大小。

# javascript - 使用 jQuery 以编程方式点击功能键

> ID：10110302
> 
> 赞同：1
> 
> 时间：2012-04-11T16:43:50.453
> 
> 标签：javascript, jquery

> **可能重复：**
> [使用 jQuery 模拟按键](https://stackoverflow.com/questions/1468384/simulate-keypress-with-jquery)
> [为什么触发 F11 按下事件不起作用？](https://stackoverflow.com/questions/6428242/why-trigger-f11-press-event-doesnt-work)

如何使用 jQuery 以编程方式点击功能键？有没有办法用 jQuery 模拟功能键？

谢谢，纳文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:50:50.163

```
jQuery.trigger({ type: 'keypress', which: character }); 
```

这[是](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)您可以通过的关键代码列表

# mysql - 如何有效地合并两个mysql查询以返回匹配记录？

> ID：10110303
> 
> 赞同：-1
> 
> 时间：2012-04-11T16:43:56.603
> 
> 标签：mysql, sql, join

我相当愚蠢（！），但无法找到编写mysql查询的最佳方法，并认为我会在此处发布它以查看是否有人可以提供帮助（仅供参考，我正在使用PHP）。我有 5 张桌子：

```
TUsers (ID, Name) 
TJobTypes (ID, Name) 
TJobs (ID, JobTypeID, JobName) 
TJobsRequested (ID, JobID, UserID) 
TJobsOffered (ID, JobID, UserID) 
```

仅供参考 TJobsTypes 到 TJobs 是一对多的关系。

用户可以根据他们可以做的工作和需要/提供的工作来搜索工作交换。因此，如果 User1 搜索并说他需要 'JobA' 做并且可以提供 'JobB' 并且 User2 被列为需要 'JobB' 做并且可以提供 'JobA' 那么这将是匹配的。如果 User2 需要 JobB 做但不能提供 JobA，那么它不匹配。编写查询以正确匹配此内容很容易，但是用户还需要能够根据一般工作类型（而不是特定工作）进行搜索。

因此，如果 UserA 正在搜索：“需要 JobTypeA”和“可以提供 JobTypeB”，则匹配项应该是所有在 JobTypeA 类别中提供工作并且在 JobTypeB 类别中请求工作的用户（如果这有意义的话！）

如果您只是搜索一种方式（例如，在 JobType=$typecanhelp 中显示所有被列为需要工作的用户），那么这很容易，可以通过以下方式完成：

```
SELECT DISTINCT TUsers.Fid, TUsers.FUsername, TUsers.FGender 
FROM TUsers, TJobsRequested, TJobs, TJobTypes 
WHERE TJobTypes.Fid='$typecanhelp' 
AND TJobs.FJobTypeID=TJobTypes.Fid 
AND TJobs.Fid=TJobsRequested.FJobID 
AND TUsers.Fid=TJobsRequested.FUserID 
ORDER BY TUsers.Fid 
```

或（用于显示所有被列为提供 JobType=$typeneedhelp 工作的用户）：

```
SELECT DISTINCT TUsers.Fid, TUsers.FUsername, TUsers.FGender 
FROM TUsers, TJobsOffered, TJobs, TJobTypes 
WHERE TJobTypes.Fid='$typeneedhelp' 
AND TJobs.FJobTypeID=TJobTypes.Fid 
AND TJobs.Fid=TJobsOffered.FJobID 
AND TUsers.Fid=TJobsOffered.FUserID 
ORDER BY TUsers.Fid 
```

但是，我无法弄清楚如何将两者合并在一起，因为它们使用相同的基表（TJobs 和 TJobTypes）。有人可以为我指出正确的方向，如何合并上述两个查询，以便返回提供 JobType==$jobcanhelp 工作并需要 JobType=$jobsneedhelp 工作的用户？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-11T16:49:59.627

如果我理解正确，您想做一个我认为mysql不支持的[INTERSECT 。](http://msdn.microsoft.com/en-us/library/ms188055.aspx)看来您可以使用 INNER JOIN 来完成与 mysql 相同的操作。看看[这个类似的问题](https://stackoverflow.com/questions/2621382/intersect-in-mysql)或[这个页面](http://www.bitbybit.dk/carsten/blog/?p=71)了解更多信息。

# actionscript-3 - AS3 Flash Builder 对话框文本显示

> ID：10110304
> 
> 赞同：0
> 
> 时间：2012-04-11T16:43:58.273
> 
> 标签：actionscript-3, flash, dialog, flash-builder

在做了一些阅读之后，我了解到多线程在 AS3 中是不可能的，我仍然无法理解“伪造它”的想法。但是，我正在努力创建两个角色之间的对话对话，并考虑了一种我有点怀疑的方法。如果这不是我应该做的，请纠正我>:)。

*   我添加了一个 Event.ENTER_FRAME 监听器，它调用了一个名为“update”的函数。

*   然后开始对话，我创建了一个 MouseEvent.CLICK 监听器，每次用户点击它时，它都会将一个名为“moreDialog”的布尔值设置为 true。

*   现在“moreDialog”设置为 true，在每帧调用的“update”方法中，有一个 if 循环检查 moreDialog 是否为 true，如果是，那么它将*子串*一个单词并将其放入一个文本字段，之后的每一帧都会使子字符串变大 1，直到单词完全显示出来，以使其具有字母显示的视觉效果，就好像它们在说话一样。

这是最好的处理方法吗？它可以满足我的需求，但我不确定在我开始添加更多功能时它是否可能存在性能问题或任何其他问题。如果不是，最好的选择是什么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T20:10:01.790

您的问题不是很清楚，听起来您并不是在寻找与多线程相关的任何内容。

如果您的目标是逐步将文本添加到 TextField....

有不同的补间类，例如[TweenMax](http://www.greensock.com/tweenmax/)或[Tweener](http://code.google.com/p/tweener/)，但您可以使用[Timer轻松完成此操作](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Timer.html)

使用计时器，您可以使用类似这样的东西

```
private var myTextString:String = "The string you want to display 1 char at a time";

private function myButtonClickHandler(e:MouseEvent):void{
     if(!timer.running){ //so you don't click twice
         var timer:Timer = new Timer(1000, myTextString.length); //1000 is the delay (in ms), myString.length is the amout of times we want it to fire (once or every letter)
         timer.addEventListener(TimerEvent.TIMER, timerTick);
         timer.start();
     }
} 
```

这假设您有一个名为 myTextField 的文本文件

```
private function timerTick(e:TimerEvent):void{
    myTextField.text += myTextString.charAt(e.currentTarget.currentCount) //using the current count to add the next char to your text field
} 
```

您还需要使用 timerComplete 处理程序重置此方法

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Timer.html#event:timerComplete](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Timer.html#event:timerComplete)

# android - android被动位置提供

> ID：10110306
> 
> 赞同：3
> 
> 时间：2012-04-11T16:44:08.303
> 
> 标签：android, location

在我的应用程序中，我不想实时定位只想比较一些值，所以我需要使用被动位置提供程序（从其他应用程序获取位置）。我尝试 从博客[http://android-developers](http://android-developers.blogspot.in/2011/06/deep-dive-into-location.html)读取代码[链接](https://code.google.com/p/android-protips-location/source/browse/trunk/src/com/radioactiveyak/location_best_practices/receivers/PassiveLocationChangedReceiver.java)[.blogspot.in/2011/06/deep-dive-into-location.html](http://android-developers.blogspot.in/2011/06/deep-dive-into-location.html)但我可以得到广播，谁能告诉我如何实现它？在清单中，我已授予许可和广播接收器。

```
<receiver android:name=".PassiveLocationChangedReceiver" android:enabled="true"> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T17:45:50.480

当请求位置更新的其他应用程序获取其数据时，被动位置提供程序将为您提供位置数据。因此，如果手机上没有其他应用程序正在获取位置更新，您也不会得到它们。

如果您想查看每个提供商过去获得的最后一个值，那么您必须将 getLastKnownLocation 与网络或 gps 提供商一起使用。
[http://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation(java.lang.String)](http://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation(java.lang.String))

有关获取位置更新的全面详细信息，请参阅：
[http ://android-developers.blogspot.com/2011/06/deep-dive-into-location.html](http://android-developers.blogspot.com/2011/06/deep-dive-into-location.html)

在那篇文章中，请查看名为“新鲜意味着始终保持最新。如果我们可以将启动延迟减少到零会怎样？”。请参阅 Froyo+ 被动位置更新的链接代码。

# php - 在 SQL 的插入语句中我有一个错误？

> ID：10110307
> 
> 赞同：1
> 
> 时间：2012-04-11T16:44:09.787
> 
> 标签：php, mysql, html

我编写了这段代码来向我的数据库插入一个名为“Barezkk”的参数，并使用表格数据，但是当按下提交时我有一个错误

```
mysql_query("INSERT INTO data(FulName) 
VALUES ( $_POST['in2']) 
```

值的语法是错误的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T16:45:12.417

你真的需要包装你的`$_POST`部分......

```
mysql_query("INSERT INTO data(FulName) VALUES ({$_POST['in2']})"); 
```

如果该值是一个字符串，你应该这样做：

```
mysql_query("INSERT INTO data(FulName) VALUES ('{$_POST['in2']}')"); 
```

或者你可以连接它：

```
mysql_query("INSERT INTO data(FulName) VALUES ('" . $_POST['in2'] . "')"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:54:12.347

您缺少引号（单引号和双引号）

```
 mysql_query("INSERT INTO Persons (FulName)
           VALUES ('$_POST['in2']')"); 
```

# java - 需要正则表达式建议

> ID：10110312
> 
> 赞同：0
> 
> 时间：2012-04-11T16:44:21.217
> 
> 标签：java, regex, expression

```
<img[^>]+src\\s*=\\s*['\"]([^'\"]+)['\"][^>]*> 
```

我知道这个正则表达式用于检索 src 的值。谁能教我应该如何解释这个表达？坚持下去。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:56:27.343

解释：

*   `<img`完全匹配字符串`"<img"`
*   `[^>]+`匹配所有内容的多次 but `>`，因此标签不会被关闭
*   `src`完全匹配字符串“src”
*   `\\s*`匹配任意数量的空白字符
*   `=`完全匹配字符串“=”
*   `\\s*`匹配任意数量的空白字符
*   `['\"]`匹配两个引号。双引号被转义，否则它将终止正则表达式的字符串
*   `([^'\"]+)`除了引号以外的所有东西都要计算多次。内容被括在括号中，以便它们被声明为组并且可以稍后检索
*   `['\"]`匹配两个引号。双引号被转义，否则它将终止正则表达式的字符串
*   `[^>]*`匹配剩余的非`">"`字符
*   `>`完全匹配 string `">"`，标签的右括号。

我不同意这个表达是废话，只是有点复杂。

**编辑**这里有一些示例代码：

```
String str = "<img[^>]+src\\s*=\\s*['\"]([^'\"]+)['\"][^>]*>";
String text = "<img alt=\"booo\" src=\"image.jpg\"/>";
Pattern pattern = Pattern.compile (str);
Matcher matcher = pattern.matcher (text);

if (matcher.matches ())
{
      int n = matcher.groupCount ();
      for (int i = 0; i <= n; ++i)
          System.out.println (matcher.group (i));
} 
```

输出是：

```
<img alt="booo" src="image.jpg"/>
image.jpg 
```

所以`matcher.group(1)`返回你想要的。用这段代码做一些实验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:54:13.883

您好，请查看网上可用的教程之一 - 例如[http://www.vogella.com/articles/JavaRegularExpressions/article.html](http://www.vogella.com/articles/JavaRegularExpressions/article.html)。第 3.1 节和第 3.2 节常用匹配符号简要解释了每个符号及其替换的内容以及元字符。把你在这里的东西分成更小的块，以便更容易理解。例如，您在两个地方有 \s 它是空白字符的元字符。反斜杠是 Java 中的转义字符，因此您使用 \s 而不是 \s。在他们每个人之后，您都有一个*. 第 3.3 节解释了量词——这个特定的意味着它出现 0 次或多次。因此 \s*表示“搜索出现 0 次或更多次的空白字符”。你对其他块做同样的事情。

希望能帮助到你。

# android - jQuery Mobile：页面转换不能在 Android 上设置为无

> ID：10110313
> 
> 赞同：1
> 
> 时间：2012-04-11T16:44:22.173
> 
> 标签：android, jquery-mobile, dialog, transitions

好吧，无论如何都不是我的情况。

由于 jQueryMobile 开发的页面转换在特定的 Android 设备上使用时非常不稳定，我想关闭它们。

所以我已将每个链接和按钮上的数据转换属性设置为“无”。

此外，我在对话框的每个链接上都使用设置 $.mobile.defaultDialogTransitions = 'none' 和设置 data-transition='none' 。默认设置可能无法通过，因为 mobileinit 事件（您应该在其中设置默认值）未触发。

然而，当我在我的 Android 上启动时，所有对话框都会在打开/关闭时进行弹出/弹出转换，并通过幻灯片移动到任何常规页面转换。

这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:32:59.967

我不确定回答我自己的问题有多礼貌。但部分感谢丹，我想通了。

mobileinit 事件没有触发，因为我没有按照指定的方式精确绑定它（即：在 jquery 脚本之后，但在 jquery 移动脚本之前）。

当我让它开火时，转换的行为就像我想要的那样。

我还没有弄清楚为什么当默认值不起作用时数据转换属性没有发挥作用。但那是理论。

当然，一旦它在一个浏览器上运行，它就可以在任何地方运行。

# java - 这种情况有什么区别：STRING.equals("myValue") vs STRING == "myValue"？

> ID：10110335
> 
> 赞同：-3
> 
> 时间：2012-04-11T16:45:57.683
> 
> 标签：java

`STRING.equals("myValue")`vs有什么区别`STRING == "myValue"`？

我第一次使用`STRING == "myValue"`，但我的 IDE 建议切换到使用`.equals()`. 这样做有什么特别的好处吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T16:47:13.023

是的。使用 == 只比较参考值；equals() 函数实际上检查字符串内容是否相同。

```
String x = new String("foo");
String y = new String("foo");
System.out.println(x == y); // prints false
System.out.println(x.equals(y)); // prints true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:47:17.447

我很确定`==`比较引用而不是值，而`.equals()`比较值。

[进一步参考](http://www.leepoint.net/notes-java/data/expressions/22compareobjects.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T16:48:03.580

是的，STRING == "myValue" 不起作用，因为它会尝试比较对字符串的引用，而不是字符串本身。

.equals() 方式是正确的方式，会给你你想要的回应。

# sql - 按时间分组记录

> ID：10110341
> 
> 赞同：5
> 
> 时间：2012-04-11T16:46:21.813
> 
> 标签：sql, sqlite, aggregate, group-by

我有一个包含日期时间列和一些其他列的表。datetime 列表示正在发生的事件。它可以包含时间（事件当时发生）或 NULL（事件未发生）

我现在想计算特定间隔（15 分钟）内发生的记录数，但不知道该怎么做。

例子：

```
id | time                | foreign_key
1  | 2012-01-01 00:00:01 | 2
2  | 2012-01-01 00:02:01 | 4
3  | 2012-01-01 00:16:00 | 1
4  | 2012-01-01 00:17:00 | 9
5  | 2012-01-01 00:31:00 | 6 
```

我现在想创建一个查询来创建类似于以下内容的结果集：

```
interval            | COUNT(id)
2012-01-01 00:00:00 | 2
2012-01-01 00:15:00 | 2
2012-01-01 00:30:00 | 1 
```

这在 SQL 中是否可行，或者任何人都可以建议我可以使用哪些其他工具？（例如，将数据导出到电子表格程序不会有问题）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-11T17:15:29.063

试试这个：

```
select datetime((strftime('%s', time) / 900) * 900, 'unixepoch') interval,
       count(*) cnt
from t
group by interval
order by interval 
```

[在这里](http://sqlfiddle.com/#!7/91967/1)检查小提琴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:03:35.540

我的 SQLite 背景有限（并且没有实践实例），但我会尝试使用

```
strftime( FORMAT, TIMESTRING, MOD, MOD, ...) 
```

使用`%M`修饰符（[http://souptonuts.sourceforge.net/readme_sqlite_tutorial.html](http://souptonuts.sourceforge.net/readme_sqlite_tutorial.html)）

然后将其除以 15 并得到商的 FLOOR 以计算出您所处的一刻钟（例如，0、1、2 或 3）

```
cast(x as int) 
```

[在 SQLite 中获取数字的底值？](https://stackoverflow.com/questions/7129249/getting-the-floor-value-of-a-number-in-sqlite)

串在一起可能看起来像：

```
Select cast( (strftime( 'YYYY-MM-DD HH:MI:SS', your_time_field, '%M') / 15) as int) from your_table 
```

（您可能还需要在除以 15 之前进行转换，因为`strftime`可能会返回一个字符串）

然后按一刻钟分组。

抱歉，我没有为您提供确切的语法，但这种方法应该使您能够获得*功能*分组，之后您可以按摩输出以使其看起来像您想要的那样。

# apache-camel - 使用 Apache Camel JXPath 表达式语言时如何设置交换体

> ID：10110344
> 
> 赞同：-1
> 
> 时间：2012-04-11T16:46:31.533
> 
> 标签：apache-camel

我需要测试谓词对象是否与各种表达式语言的交换相匹配。我需要知道我需要设置什么交换值来交换来验证谓词。

```
public void test() { 
   String expression="//orders/value>10"'; 
   CamelContext context = new DefaultCamelContext(); 
   Predicate predicate=new JXpathExpression(expression,boolean.class); 
   Exchange exchange = new DefaultExchange(context); 
   Message in = exchange.getIn(); 
   in.setBody(""); // how i need to set the message in exchange in order to evaluate it against predicate 
   exchange.setIn(in); 
   boolean check=predicate.matches(exchange); 
} 
```

对于 JXPath，谓词对象`JXpath[//orders/value>10]`在我使用`predicate.toString()`.

如何设置交换以便可以验证此表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:29:38.053

JXPath 适用于 java 对象。所以你必须在消息体中设置一个合适的对象。如果您在那里设置的对象有 o.getOrders().getValue() 并返回一个 > 10 的数值，那么谓词应该评估为真。

# entity-framework - 更新部分模型

> ID：10110349
> 
> 赞同：0
> 
> 时间：2012-04-11T16:46:40.297
> 
> 标签：entity-framework, entity-framework-4

我有一个模型类，它包含 5 个属性，但视图中只显示了 3 个属性。当我调用创建操作时，我只需要更新这 3 个！！

我正在尝试这个：

```
[HttpPost]
public ActionResult Create([Bind(Exclude = "Id")]Location location) 
{
     if (ModelState.IsValid) 
        {
            db.Location.Add(location);

            bool car_in_database = db.Car.Any(c => c.Id == location.Car.Id);
            if (car_in_database)
            {
                db.Entry(location.Car).State = EntityState.Modified;
                db.Entry(location.Car).Property(l => l.ClientId).IsModified = false;
            }

            db.SaveChanges();  

            return RedirectToAction("Index");
        } 
```

但它不起作用..任何人都知道为什么或我必须做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T20:10:26.303

[只有 .NET 4.5 和 EF 5.0 支持取消将属性标记为未修改](http://blog.oneunicorn.com/2012/03/24/ef5-rejecting-changes-to-a-single-property/)，因此如果您使用的是 .NET 4.0，则不得将实体状态设置为已修改。相反，您必须手动设置要修改的每个属性`IsModified = true`

# javascript - 如何判断 Javascript 在哪里花费的时间最多？

> ID：10110351
> 
> 赞同：0
> 
> 时间：2012-04-11T16:46:51.543
> 
> 标签：javascript, jquery, google-chrome, google-chrome-devtools

我有一个页面需要大约 15 秒才能加载，因为我正在进行一些循环，克隆 DIV 并将内容加载到其中。Chrome 检查器中是否有某种方法可以让我轻松查看脚本中的阻塞位置？

编辑：我在检查器中尝试了“配置文件”选项卡，但它没有显示我的实际脚本。它显示了没有用的 jquery.js 源代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T16:48:36.327

查看检查器的[Profiles 选项卡](http://fuelyourcoding.com/webkits-javascript-profiler-explained/)。*注意：这只是 webkit*

可以找到有关特定浏览器分析器的更多信息...

铬：[https ://developers.google.com/chrome-developer-tools/docs/profiles](https://developers.google.com/chrome-developer-tools/docs/profiles)

火狐： http: [//getfirebug.com/javascript](http://getfirebug.com/javascript)

歌剧：[http ://dev.opera.com/articles/view/opera-developer-tools/](http://dev.opera.com/articles/view/opera-developer-tools/)

甚至 IE 也有开发工具：http: [//blogs.msdn.com/b/ie/archive/2008/09/11/introducing-the-ie8-developer-tools-jscript-profiler.aspx](http://blogs.msdn.com/b/ie/archive/2008/09/11/introducing-the-ie8-developer-tools-jscript-profiler.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:53:04.930

在您要检查的内容的开头放置：

```
var startTime = new Date().getTime(); 
```

最后：

```
console.log(new Date().getTime()-startTime) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:05:40.767

如果问题与 javascript 的性能有关，那么 Safari WebInspector 或 Chrome DevTools 中的 Profiles 选项卡将为您提供帮助。

它们在 Safari JSC 和 Chrome V8 的分析代码中的区别。JSC 有 Instrumenting profiler，V8 有 Statistical profiler。第一个更精确，第二个对页面性能的影响较小。

Safari 和 Chrome 中的 UI 相同。

分析数据有两种不同的排序顺序。重（自下而上）和树（自上而下）。您可以在配置文件页面底部的组合框中更改它。

如果最耗时的条目是“（程序）”，那么我建议使用时间轴面板。

Chrome 版本的时间轴面板提供了更多信息。

# plone - 从站点策略产品附加组件的设置配置文件安装克隆首页内容

> ID：10110354
> 
> 赞同：2
> 
> 时间：2012-04-11T16:46:55.103
> 
> 标签：plone

Plone 的基本设置配置文件——在 Products.CMFPlone.setuphandlers.setupPortalContent() 中——查询名为“plone-frontpage-setup”的注册视图，以获取填充到新站点的首页的正文。

附加站点策略产品包可以注册一个视图（遗憾的是，没有限制它的层接口）以覆盖默认值——但是，这将适用于在实例中创建的所有新站点。

是否有一种*可插入*的方式来使用 GenericSetup 扩展配置文件在附加安装时安装新的首页内容，或者这是否需要 DIY 设置处理程序/导入步骤？

阅读基本 setupPortalContent() 的源代码，似乎这是为了方便开箱即用的 i18n 而设置的，但（还）不是为通过附加组件进行可插入扩展而设置的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:50:23.340

您是否尝试过使用通用设置生成内容？

以下示例应重置 setupPortalContent() 生成的内容：

1.  添加`structure`在您的站点策略产品的默认配置文件文件夹下命名的文件夹（*例如 src/my.site.policy/my/site/policy/profiles/default/structure/*）。

2.  在该文件夹下，添加一个名为`.delete`content的新文件

    ```
    events
    front-page
    Members
    news 
    ```

3.  在同一文件夹下，添加一个名为`.objects`content的新文件

    ```
    front-page,Document 
    ```

4.  还是在同一个文件夹下，添加一个名为`front-page`content的新文件

    ```
    id: front-page
    title: Foo
    description: Bar
    Content-Type: text/html

    <p>Hello World!</p> 
    ```

使用此策略创建的新 Plone 站点应仅包含上述首页。（请注意，新的首页具有其默认工作流程的初始状态，默认情况下是*私有*的。）

我认为，进一步尝试内容生成的最简单方法就是创建一些东西，然后导出`Content`并`portal_setup`检查结果。此外，Six Feet Up 的[Generic Setup Quick Reference](http://www.sixfeetup.com/technologies/plone-content-management/quick-reference-cards/generic_setup.pdf)概述了 Generic Setup 中的内容生成支持。

# java - 多组数据的Java tablemodel

> ID：10110363
> 
> 赞同：3
> 
> 时间：2012-04-11T16:47:10.163
> 
> 标签：java, swing, jlist, tablemodel

我目前正在构建一个 Java GUI 应用程序，并且我将要实现一些看似需要大量思考的东西，至少对于像我这样相对缺乏经验的人来说是这样。

# 情况

如下：我有一个`Customer`域级别的类，它包含一组作业，它也是一个类（`Job`）。该应用程序适用于一家虚构的园艺公司，该公司希望管理其客户及其为他们所做的工作。

在 GUI 级别，我为所有客户提供了一个 jList，其自定义列表模型扩展了`AbstractListModel`. 我的应用程序的这一部分运行良好，我可以轻松地添加/编辑/删除客户，而且应该如此。

# 目标

现在是实现一个**jTable**，它应该显示在**jList 中选择的客户的工作**。

毫无疑问，我需要一个 custom `TableModel`，问题是：从哪里获取数据？需要注意的是，`Customer`类中作业的集合是一个`ArrayList`，并且该类没有*直接*返回这个ArrayList的方法，只能得到一个副本，因为我不希望它可以改变集合在课堂上直接从公共环境中。

# 我的点子

就是让tablemodel有一个改变内部集合的方法，带一个`customer`参数。当索引中的索引`jList`发生变化时，应该调用该方法，以便 jTable 代表`Job`已为客户完成的 s。当我必须**编辑/创建/删除**作业时，更改总是**首先在 tablemodel**上完成，这会将**更改传播到`customer`对象**（在新作业或作业删除的情况下）。

# 问题

这是实现它的好方法吗？我感觉**不是**`Job`，因为如果我忘记通过tablemodel对a做任何更改，而直接放在`Customer`or上`Job`，就会出现**不一致和麻烦**。有没有更好的方法？如果它涉及改变其他东西，我不介意。

## （可选）小子问题

`Collection`我对java中的不同s缺乏一些知识。我通常只选择`ArrayList`，就像在这种情况下`Customer`（可变）工作一样。有更好的收藏吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T16:55:57.090

并不是说这是实现这一点的最佳方式，但我会这样做

*   确保客户工作列表是可观察的。通过使用提供触发事件的集合的第 3 方库（我认为 Google 有一些可用的），或者只是确保`Customer`更新`Job`集合的每个方法都会触发事件
*   `Job`然后，代表某个特定的 s 的表模型`Customer`可以侦听这些事件并相应地更新自身
*   目前尚不清楚您是否允许对表格 ui 进行更改，但如果您允许，表格模型应该负责将这些更改再次传播到`Customer`

因此，您当前的编辑/创建/删除/添加作业代码没有任何变化。那一直与您合作，`Customer`甚至不知道`TableModel`存在。该`TableModel`作品也直接针对，`Customer`甚至不知道可能有 UI 来编辑/创建/删除/添加作业。它只是侦听对作业集合所做的任何更改并相应地更新自身。

通过表模型对代码的所有部分中的作业列表进行更改似乎是一个非常糟糕的主意。是您的`Customer`模型，而`JTable`是视图（MVC 模式任何人）。`JTable`需要模型（a）的不同表示的事实`TableModel`是副作用。

# regex - 使用 rexep 和 bash 的条件语句

> ID：10110365
> 
> 赞同：4
> 
> 时间：2012-04-11T16:47:14.213
> 
> 标签：regex, bash

我想使用 bash 中的“条件正则表达式”结构，该结构自 bash 的第三版（大约 2004 年）以来一直存在。它应该是这样的：

```
if [[ $string =~ $regexp ]]; then
#do smthg
else
#do somthg else
fi 
```

所以这是我的代码，遵循这个结构，它的作用是检查 SSID 中包含的名称是否存在于*iw dev wlan0 link*的输出中：

```
if [[ $(iw dev wlan0 link) =~ $SSID+ ]]; then 
    #do sthming 
else
    echo "wrong network"

fi 
```

出于某种我无法理解的原因，如果我将它直接运行到 bash shell 中，这个语句就可以很好地工作，比如

```
if [[ $(iw dev wlan0 link) =~ $SSID+ ]]; then echo found; else echo not found; fi 
```

但是如果我在它包含的脚本中运行它，它会吐出：

```
scripts/ssidchecker.sh: 22: [[: not found 
```

22 是“fi”关键字的行。**最奇怪的是，它总是会执行“else”语句中包含的代码**

“未找到”是否意味着表明正则表达式在该字符串中找不到任何内容？这是一个真正的错误信息吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T05:58:21.653

起始注释：使用来自相关评论的输入创建的答案，尤其是对最后一条评论的回复。

首先，什么是`[[`？它是一个 shell 关键字。

```
samveen@maverick:~$ type [[
[[ is a shell keyword 
```

这意味着这`[[`是 bash 的内部关键字，而不是命令，因此不适用于其他 shell。因此，您的错误输出

```
scripts/ssidchecker.sh: 22: [[: not found 
```

表示您正在使用的外壳可能是

*   不是 bash
*   早于 2.02 的 bash 版本（`[[`在 Bash-2.02 中引入）

鉴于 2.02 是一个非常旧的版本（Y2K 之前），所有这一切都表明您用来运行脚本的 shell 可能不是`/bin/bash`，而是可能是`/bin/sh`Bourne shell 脚本最常用的路径`shebang`( `#!`) 行。

请将其更改为`/bin/bash`或显式运行`bash scripts/ssidchecker.sh`，您就可以开始了。

至于为什么`else`总是执行该部分`[[`，从`if`. 因此该`else`部分被执行。

```
samveen@maverick:~$ /bin/whosyourdaddy
-bash: /bin/whosyourdaddy: No such file or directory
samveen@maverick:~$ echo $?
127 
```

作为可移植性的旁注，bash 黑客 wiki 还对`[[`关键字进行了以下说明：

> 在确实具有 的主要“POSIX-shell 超集语言”（缺少更好的术语）中`[[`，测试表达式复合命令是最便携的非 POSIX 功能之一。**除了 =~ 运算符之外**，几乎每个主要功能在 Ksh88、Ksh93、mksh、Zsh 和 Bash 之间都是一致的。Ksh93 还添加了大量其他 shell 不支持的独特模式匹配功能，包括对几种不同的正则表达式方言的支持，这些方言使用与 Bash 不同的语法调用`=~`，尽管`=~`ksh 仍然支持并且默认为 ERE。

`=~`因此，即使 shell 支持，您的脚本也可能会失败`[[`，以防 shell 不`bash`支持但支持`[[`。

# spring - 预授权不起作用

> ID：10110374
> 
> 赞同：6
> 
> 时间：2012-04-11T16:47:38.590
> 
> 标签：spring, spring-security

我正在编写一个套接字服务器（没有 Web 应用程序！）应用程序，并希望使用基于方法的安全性来处理我的 ACL 需求。我遵循了一个小教程，我[通过示例找到了 Spring Security](http://blog.solidcraft.eu/2011/03/spring-security-by-example-securing.html)

到目前为止我配置：

```
<security:global-method-security pre-post-annotations="enabled">
    <security:expression-handler ref="expressionHandler" />
</security:global-method-security>
<bean id="expressionHandler" class="org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler">
    <property name="permissionEvaluator">
        <bean id="permissionEvaluator" class="myPermissionEvaluator" />
    </property>
</bean>

<security:authentication-manager id="authenticationmanager">
    <security:authentication-provider ref="authenticationprovider" />
</security:authentication-manager>
<bean id="authenticationprovider" class="myAuthenticationProvider" /> 
```

使用服务 bean：

```
@Named
public class ChannelService {
    @PreAuthorize("isAuthenticated() and hasPermission(#channel, 'CHANNEL_WRITE')")
    public void writeMessage(Channel channel, String message) { ... }
} 
```

一切都编译，应用程序启动并正常工作，但没有访问控制。我的调试日志显示我的 Evaluator 从未被调用过。

当我尝试使用注释进行类似操作时，`@Secured`注释被评估并且访问被拒绝。但简单的基于角色的安全性不足以满足我的要求。

**EDIT** 做了更多测试：当我只配置secure-annotations="enabled" 时，基于角色的安全工作。在 ADDITION 中配置 pre-post-annotations="enabled" 时，既不保护也不预授权作品。当我只配置前后注释时，它仍然不起作用。

**编辑2**

更多测试：只有secure_annotations="enabled"，只要我激活pre-post-annotations，对我的channelservice的调用就会通过Cglib2AopProxy，调用直接在channelservice中。没有拦截器，没有代理，什么都没有。

我有点绝望了……

**编辑3**

我在这里调试记录了我的测试运行是 spring-security 的一部分

只有安全注释=“启用”

```
2012-04-12 13:36:46,171 INFO  [main] o.s.s.c.SpringSecurityCoreVersion - You are running with Spring Security Core 3.1.0.RELEASE
2012-04-12 13:36:46,174 INFO  [main] o.s.s.c.SecurityNamespaceHandler - Spring Security 'config' module version is 3.1.0.RELEASE
2012-04-12 13:36:49,042 DEBUG [main] o.s.s.a.m.DelegatingMethodSecurityMetadataSource - Caching method [CacheKey[mystuff.UserService; public void mystuff.UserService.serverBan(java.lang.String,mystuff.models.User,org.joda.time.DateTime)]] with attributes [user]
2012-04-12 13:36:49,138 DEBUG [main] o.s.s.a.i.a.MethodSecurityInterceptor - Validated configuration attributes
2012-04-12 13:36:49,221 DEBUG [main] o.s.s.a.m.DelegatingMethodSecurityMetadataSource - Caching method [CacheKey[mystuff.ChannelService; public void mystuff.ChannelService.writeMessage(mystuff.models.Channel,java.lang.String)]] with attributes [blubb]
2012-04-12 13:36:51,159 DEBUG [main] o.s.s.a.ProviderManager - Authentication attempt using mystuff.GlobalchatAuthenticationProvider
2012-04-12 13:36:56,166 DEBUG [Timer-1] o.s.s.a.ProviderManager - Authentication attempt using mystuff.GlobalchatAuthenticationProvider
2012-04-12 13:36:56,183 DEBUG [Timer-1] o.s.s.a.i.a.MethodSecurityInterceptor - Secure object: ReflectiveMethodInvocation: public void mystuff.ChannelService.writeMessage(mystuff.models.Channel,java.lang.String); target is of class [mystuff.ChannelService]; Attributes: [blubb]
2012-04-12 13:36:56,184 DEBUG [Timer-1] o.s.s.a.i.a.MethodSecurityInterceptor - Previously Authenticated: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@312e8aef: Principal: mystuff.UserId@ced1752b; Credentials: [PROTECTED]; Authenticated: true; Details: null; Not granted any authorities
Exception in thread "Timer-1" org.springframework.security.access.AccessDeniedException: Access is denied
    at org.springframework.security.access.vote.AbstractAccessDecisionManager.checkAllowIfAllAbstainDecisions(AbstractAccessDecisionManager.java:70)
    at org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:88)
    at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:205)
    at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:59)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
    at mystuff.ChannelService$$EnhancerByCGLIB$$3ad5e57f.writeMessage(<generated>)
    at mystuff.run(DataGenerator.java:109)
    at java.util.TimerThread.mainLoop(Timer.java:512)
    at java.util.TimerThread.run(Timer.java:462)
2012-04-12 13:36:56,185 DEBUG [Timer-1] o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.access.vote.RoleVoter@1cfe174, returned: 0
2012-04-12 13:36:56,185 DEBUG [Timer-1] o.s.s.access.vote.AffirmativeBased - Voter: org.springframework.security.access.vote.AuthenticatedVoter@da89a7, returned: 0 
```

使用 pre-post-annotations="enabled"

```
2012-04-12 13:39:54,926 INFO  [main] o.s.s.c.SpringSecurityCoreVersion - You are running with Spring Security Core 3.1.0.RELEASE
2012-04-12 13:39:54,929 INFO  [main] o.s.s.c.SecurityNamespaceHandler - Spring Security 'config' module version is 3.1.0.RELEASE
2012-04-12 13:39:54,989 INFO  [main] o.s.s.c.m.GlobalMethodSecurityBeanDefinitionParser - Using bean 'expressionHandler' as method ExpressionHandler implementation
2012-04-12 13:39:59,812 DEBUG [main] o.s.s.a.ProviderManager - Authentication attempt mystuff.GlobalchatAuthenticationProvider
2012-04-12 13:39:59,850 DEBUG [main] o.s.s.a.i.a.MethodSecurityInterceptor - Validated configuration attributes 
```

据我了解，这个日志输出 spring 没有意识到我的 bean 需要被代理，所以它们不是，所以我没有得到安全性。

**编辑4**

我调试记录了完整的 sprint 启动...（那是一个大日志），在那里我发现：

```
2012-04-12 14:40:41,385 INFO [main] o.s.c.s.ClassPathXmlApplicationContext - Bean 'channelService' of type [class mystuff.ChannelService] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 
```

有没有办法找出原因？因为据我了解。因为@preauthorize bean 应该是合格的。只有secure-annotations="enabled" 我得到一个后处理日志。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T20:26:13.000

这个配置对我来说就像预期的那样工作：

```
<bean id="securityExpressionHandler"
    class="org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler" /> 

<bean id="preInvocationAdvice"
    class="org.springframework.security.access.expression.method.ExpressionBasedPreInvocationAdvice"
    p:expressionHandler-ref="securityExpressionHandler" />

<util:list id="decisionVoters">
    <bean class="org.springframework.security.access.vote.AuthenticatedVoter" />
    <bean class="org.springframework.security.access.vote.RoleVoter" />
    <bean class="org.springframework.security.access.prepost.PreInvocationAuthorizationAdviceVoter"
        c:pre-ref="preInvocationAdvice" />
</util:list>

<bean id="accessDecisionManager"
    class="org.springframework.security.access.vote.UnanimousBased"
    c:decisionVoters-ref="decisionVoters" />

<sec:global-method-security
    authentication-manager-ref="authenticationManager"
    access-decision-manager-ref="accessDecisionManager"
    pre-post-annotations="enabled" /> 
```

我收到了日志消息：

```
WARN  org.springframework.security.access.expression.DenyAllPermissionEvaluator - 
    Denying user jack permission 'CHANNEL_WRITE' on object Channel[ name=null ] 
```

还有一个例外：

```
org.springframework.security.access.AccessDeniedException: Access is denied 
```

从一个简单的测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:META-INF/spring/application-context.xml")
public class SpringSecurityPrePostTest {

    @Autowired
    ChannelService channelService;

    @Test
    public void shouldSecureService() throws Exception {
        Authentication authentication = new UsernamePasswordAuthenticationToken("jack", "sparrow");
        SecurityContext securityContext = SecurityContextHolder.getContext();
        securityContext.setAuthentication(authentication);

        channelService.writeMessage(new Channel(), "test");
    }
} 
```

我做的不同的一件事是在服务和 JDK 代理上使用接口而不是 cglib：

```
public interface ChannelService {

    void writeMessage(Channel channel, String message);
} 
```

和：

```
@Component
public class ChannelServiceImpl implements ChannelService {

    private static final Logger LOG = LoggerFactory.getLogger(ChannelServiceImpl.class);

    @Override
    @PreAuthorize("isAuthenticated() and hasPermission(#channel, 'CHANNEL_WRITE')")
    public void writeMessage(Channel channel, String message) {
        LOG.info("Writing message {} to: {}" , message, channel);
    }

} 
```

* * *

**更新1：**

* * *

通过这个简化的配置，我得到了相同的结果：

```
<bean id="securityExpressionHandler"
    class="org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler" /> 

<sec:global-method-security
    authentication-manager-ref="authenticationManager"
    pre-post-annotations="enabled">
    <sec:expression-handler ref="securityExpressionHandler" />
</sec:global-method-security> 
```

* * *

**更新2：**

* * *

来自 Edit4 的调试消息表明它`channelService`可能根本没有代理 bean，因为它被归类为[`not eligible for auto-proxying`](http://www.google.pl/#q=not+eligible+for+auto-proxying). [这个](https://stackoverflow.com/questions/1201726/tracking-down-cause-of-springs-not-eligible-for-auto-proxying)问题回答了类似的问题——尽量不要使用`@Autowired`或任何其他基于`BeanPostProcessors`设置涉及安全检查的 bean 的机制（即`myPermissionEvaluator`）。

* * *

**更新3：**

* * *

您**不能**在负责安全检查的 bean 中使用安全资源（即服务）！这会创建一个依赖循环，并且是您的配置中的错误。您**必须**使用情人级别访问（即 DAO）来检查权限，任何**不安全**的东西！使用安全资源实施安全检查**不是您想要做的**。

If despite using not secured resources with `@Autowired` things don't work as expected, try using old-school XML confiuration style for all beans involved in security checks. Also remember that `<context:component-scan />` is in fact a `BeanDefinitionRegistryPostProcessor` and introduces the scanned beans into the `BeanFactory` after all the ones declared in XML are already there.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-11T17:15:08.057

它可以工作，确保你`<sec:global-method-security pre-post-annotations="enabled"/>`在你的spring servlet中有（即你可能有你的`<mvc:annotation-driven/>`）

“秒”来自 `xmlns:sec="http://www.springframework.org/schema/security"`

# java - 奇怪的 Java for 循环格式

> ID：10110376
> 
> 赞同：1
> 
> 时间：2012-04-11T16:47:47.253
> 
> 标签：java, syntax, for-loop, processing

我遇到了一个以我以前从未见过的方式构造的 for 循环。我想知道你是否可以向我解释它在做什么？它作为处理中 verlet 集成的示例之一提供：

[http://www.openprocessing.org/sketch/17191](http://www.openprocessing.org/sketch/17191)

这是代码：

```
for(VerletParticle2D p : physics.particles) {
    ellipse(p.x, p.y, 5, 5);
} 
```

是否只是简单地添加一个“p”粒子，直到达到之前设置的数量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T16:49:01.983

这就是所谓的“for each”循环。它只是遍历集合（或数组）的`physics.particles`所有元素，依次将每个元素分配给`p`.

有关详细信息，请参阅[Oracle 文档](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T16:49:21.310

这是Java“For-Each”循环。它遍历集合中的所有元素。

[http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T16:50:36.777

那是一个`for-each`循环。它遍历一个集合。

在这种情况下，集合是physics.particles。`p`将代表每次迭代中的当前对象。`VerletParticle2D`是对象的编译器类型。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-11T16:50:47.053

for 循环正在遍历physics.particles 中的“粒子”，并且对于其中的每个元素，它正在调用椭圆函数调用。

# c# - 如何将 ListBox 的项目设置为顶部？

> ID：10110377
> 
> 赞同：1
> 
> 时间：2012-04-11T16:47:48.737
> 
> 标签：c#, windows-phone-7, listbox

我有书签列表，当我点击书签时，另一个页面加载了一个 listA 由几个项目组成。

现在假设，我点击一个书签，它指向 listA 的项目索引 100...打开另一个 listA，我设法将 listA 的 SelectedIndex 设置为 100，这是在列表下方的某个地方不可见。

问题是，SelectedIndex 设置为 100，但列表仍然显示最顶部的项目，在顶部。

*   加载内容时，如何在顶部设置项目编号 100？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:16:31.897

与 ScrollViewer.ScrollToVerticalOffset 方法完美配合

Step I. 调用listA的Loaded事件

```
<ListBox Name="ListA"  Loaded="HookScrollViewer"> 
```

第二步。定义“HookScrollViewer”方法

```
 private void HookScrollViewer(object sender, RoutedEventArgs e)
    {
        var element = (FrameworkElement)sender;
        var scrollViewer = FindChildOfType<ScrollViewer>(element);

        if (scrollViewer == null)
            return;

        scrollViewer.ScrollToVerticalOffset(lstA.SelectedIndex);
    } 
```

第三步。定义“FindChildOfType”方法

```
 public static T FindChildOfType<T>(DependencyObject root) where T : class
    {
        var queue = new Queue<DependencyObject>();
        queue.Enqueue(root);

        while (queue.Count > 0)
        {
            var current = queue.Dequeue();
            for (int i = VisualTreeHelper.GetChildrenCount(current) - 1; 0 <= i; i--)
            {
                var child = VisualTreeHelper.GetChild(current, i);
                var typedChild = child as T;
                if (typedChild != null)
                {
                    return typedChild;
                }
                queue.Enqueue(child);
            }
        }
        return null;
    } 
```

它适用于“ListA”（将 ListA 替换为您的 ListBox 的名称）

参考：[WP7 中的 ListBox 偏移量](https://stackoverflow.com/questions/9078579/listbox-offset-in-wp7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:54:07.763

ListBox 真的很让人头疼（尤其是复杂的数据模板和虚拟化）。您应该使用此解决方法：

```
listbox.SelectedIndex = 1000; //I mean index of the last item
listbox.UpdateLayout();
listbox.SelectedIndex = 100;
listbox.UpdateLayout(); 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T16:59:24.970

试试这个：

```
listBox2.TopIndex = listBox2.SelectedIndex; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T03:16:33.897

我不确定我是否正确理解了您的问题。但是，如果您只想在列表框项目之上设置一个项目，那么我会这样做..

listbox.Items.Insert(0, "某事);

或者

使用 linq 订购它们

listbox.Items.OrderBy("something");

# python - 如何在 linux (CentOS) 上构建 pgmagick？

> ID：10110378
> 
> 赞同：1
> 
> 时间：2012-04-11T16:47:52.223
> 
> 标签：python, centos, graphicsmagick, pgmagick

`pgmagick`尝试在 CentOS 5.6 上构建时，我没有取得太大的成功。

我通过以下方式安装了以下内容`yum`：

```
boost-1.33.1
boost-devel-1.33.1
GraphicsMagick-1.3.14
GraphicsMagick-c++-1.3.14
GraphicsMagick-devel-1.3.14
GraphicsMagick-c++-devel-1.3.14
python-2.6.5
python-devel-2.6.5 
```

但是，每当我尝试构建时，都会`pgmagick`出现以下错误：

```
/usr/include/boost/python/converter/registered.hpp: In instantiation of ‘const boost::python::converter::registration& boost::python::converter::detail::registered_base<const volatile void>::converters’:
/usr/include/boost/python/converter/arg_from_python.hpp:269:   instantiated from ‘boost::python::converter::pointer_arg_from_python<T>::pointer_arg_from_python(PyObject*) [with T = void*]’
/usr/include/boost/python/arg_from_python.hpp:70:   instantiated from ‘boost::python::arg_from_python<T>::arg_from_python(PyObject*) [with T = void*]’
/usr/include/boost/preprocessor/iteration/detail/local.hpp:37:   instantiated from ‘PyObject* boost::python::detail::caller_arity<3u>::impl<F, Policies, Sig>::operator()(PyObject*, PyObject*) [with F = void (*)(Magick::Blob&, void*, long unsigned int), Policies = boost::python::default_call_policies, Sig = boost::mpl::vector4<void, Magick::Blob&, void*, long unsigned int>]’
/usr/include/boost/python/object/py_function.hpp:38:   instantiated from ‘PyObject* boost::python::objects::caller_py_function_impl<Caller>::operator()(PyObject*, PyObject*) [with Caller = boost::python::detail::caller<void (*)(Magick::Blob&, void*, long unsigned int), boost::python::default_call_policies, boost::mpl::vector4<void, Magick::Blob&, void*, long unsigned int> >]’
./src/_Blob.cpp:43:   instantiated from here
/usr/include/boost/python/converter/registered.hpp:88: error: no matching function for call to ‘registry_lookup(const volatile void (*)())’
error: command 'gcc' failed with exit status 1 
```

我也尝试过安装`boost141`，`boost141-devel`但`boost141-python`pgmagick 不会针对这些库进行构建。

关于如何解决问题或进一步诊断问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:35:56.693

事实证明，让这个工作的唯一方法是：

*   从系统中删除所有预编译的`boost`rpm
*   从系统中删除所有预编译的`GraphicsMagick`rpm
*   `boost-1.49.0`手动编译，使用`./configure --prefix=/usr --enable-shared=yes`
*   重新安装`GraphicsMagick-1.3.14`,`GraphicsMagick-c++-1.3.14`和`GraphicsMagick-devel-1.3.14`via`GraphicsMagick-c++-devel-1.3.14``yum`
*   `pgmagick`从 bitbucket克隆存储库
*   在目录中`python setup.py install`再次运行`pgmagick`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T14:35:46.013

当您运行配置时，我假设您将其执行为`./configure --enable-shared=yes`（注意参数）。如果你这样做了（就像教程所说的那样），我看不出它不应该工作的原因。如果你没有，这可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T11:17:57.067

好像是版本不兼容的问题，试试**boost-1.34**

# c - C - 静态分配的字符数组的 memset 段错误

> ID：10110381
> 
> 赞同：1
> 
> 时间：2012-04-11T16:48:00.097
> 
> 标签：c, segmentation-fault, memset

尝试`memset`静态分配的字符数组时出现段错误，但对于使用`malloc`.

变量定义：

```
 //static
    char inBuff[IN_BUFF_LEN];
    //dynamic
    char * inBuffD; 
```

函数调用：

```
 //static, cast used because char** != char (*) [n]
    serverInit(portNum, (char**) &inBuff, &serv_addr, &sockfd)
    //dynamic
    serverInit(portNum, &inBuffD, &serv_addr, &sockfd) 
```

在函数内使用：

```
 memset(*inBuffAdr, 0, IN_BUFF_LEN); 
```

我怀疑我的问题在于函数调用的差异，或者更准确地说，我对“char**！= char (*) [n]”情况的不完全理解。但我一直在敲打这个太久了，不能从树上看到森林，所以任何提示和建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T16:56:20.023

只需发送 inBuff（不是 **inBuff）然后 memset inBuffAdr 而不是 *inBufAdr（您的其他 memset 可能也不起作用，您只是还不知道）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:58:24.857

为什么需要将双指针传递给`serverInit()`函数？如果函数可以修改指针指向的位置，则不能传递静态分配的数组。如果函数无法修改指针指向的位置，则不需要双指针。

的类型`&inBuff`是指向`char`大小数组的指针`IN_BUFF_LEN`，这与 a 完全不同`char **`。你已经让编译器不抱怨了，声称你比编译器更了解你在做什么。除非您确定您确实比编译器了解更多，否则不要使用这样的强制转换。

坦率地说，鉴于目前的原型，你可能最好：

```
//static
char inBuff[IN_BUFF_LEN];
char *inBuffS = inBuff;
//dynamic
char *inBuffD;

serverInit(portNum, &inBuffS, &serv_addr, &sockfd); 
```

但是，我非常怀疑您应该修改`serverInit()`为采用简单`char *`的而不是`char **`第二个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T16:56:41.807

为什么不定义`serverInit()`以下方式：

```
serverInit(...., char * inBuff, ....) 
```

然后调用它

```
serverInit(...., inBuff, ....) 
```

然后像这样在内部`serverInit()`调用`memset()`：

```
memset(inBuff, 0, IN_BUFF_LEN); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T17:25:13.807

您的部分困惑在于认为`&inBuff`可以取消引用 get `inBuff`。如果你运行这个简单的测试程序：

```
#include <stdio.h>
char inBuff[1000];
int main( int argc, char *argv[])
{
    printf( "%p %p\n", inBuff, &inBuff);
    return 0;
} 
```

您会看到它为两种表示法打印相同的地址。如果您尝试取消引用`&inBuff`，您将把数组的前几个字节作为地址。

正如其他人所说，您应该只传递一个指向您要设置的内存的指针。希望这个答案能帮助您进行未来的调试会话。

# jquery-ui - 在列上使用格式化程序时，JQGrid 过滤器工具栏不过滤行

> ID：10110393
> 
> 赞同：2
> 
> 时间：2012-04-11T16:48:40.710
> 
> 标签：jquery-ui, jquery, jqgrid, jqgrid-formatter

所以在当前的应用程序中，我必须在我的 jqGrid 中的几行上使用自定义格式化程序。所有这些都是从我的 ajax 调用中获取一些字段，将它们连接成一个，然后将它们放在一行中。

EG ( data.toStreet + data.toCity + data.toState + data.toZip ) 以“Street City, State Zip”的形式返回到“To Address”列。这工作正常，数据显示正确，但使用过滤工具栏时，过滤器仅基于第一个 val (data.street)。下面是相关代码的超级简化版本。

```
$('#grid').jqGrid({
...
colNames:["AddressTo", "AddressFrom"],
colModel:[
     {name:"toStreet" formatter: ToAddressFormatter},
     {name:"fromStreet" formatter: FromAddressFormatter}
],
...
}),
 $('#grid').jqGrid('filterToolbar',
    {
        stringResult:true,
        searchOnenter: true,
        defaultSearch: 'cn'
    }
 });
ToAddressFormatter = function(el, opt, rowObj){
    var address = rowObj.toStreet+ " " + rowObj.toCity + ", " + rowObj.toState + " " + rowObj.toZip;
    return address;
},
FromAddressFormatter = function(el, opt, rowObj){
    var address = rowObj.fromStreet+ " " + rowObj.fromCity + ", " + rowObj.fromState + "  " + rowObj.fromZip;
    return address;
} 
```

因此，如果格式化后的 cel 中的值显示为“123 fake st, springfield, Va 22344”，则过滤器工具栏只能搜索“123 fake st”而不能搜索其他内容。有没有人知道如何解决这个问题，或者可能为什么会发生这种情况以及一个好的解决方法？

编辑：我已经包括了我的网格的开头。此外，result.d 的属性地址是在下面的代码中创建的，而不是从 web 服务返回的。我的列被映射到正确显示格式的“地址”，但仍无法按预期搜索。

```
 $('#grdDisasters').jqGrid({
                datatype: function(postdata) {
                    var obj = { "showActive": $('#btnFilterActive.pressed').length > 0 ? true : false, "showInactive": $('#btnFilterActive.pressed').length > 0 ? true : false,
                        'page': postdata.page, 'rows': postdata.rows, 'sortIndex': postdata.sidx, 'sortDirection': postdata.sord, 'search': postdata._search,
                        'filters': postdata.filters || ''
                    };
                    $.ajax({
                        url: "/GetGrid",
                        data: JSON.stringify(obj),
                        success: function(result) {
                            for (var i = 0, il = result.d.rows.length; i < il; i++) {
                                LoadedDisasters[i] = result.d.rows[i];
                                result.d.rows[i].cells.Address = result.d.rows[i].cells.Street + " " + result.d.rows[i].cells.City + ", "+ result.d.rows[i].cells.State+ " "+ result.d.rows[i].cells.Zip;
                            }
                            result.d = NET.format(result.d);//just correctly format dates
                            UpdateJQGridData($('#grdDisasters'), result.d);
                        },
                        error: function(result) {
                            //alert("Test failed");
                        }
                    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T21:41:32.737

我认为您以错误的方式填充网格。如果您的源数据具有 toStreet、toCity、toState、toZip、fromStreet、fromCity、fromState、fromZip 属性，并且您需要组合`addressTo`并且`addressFrom`应该以其他方式执行此操作。您的问题是，`toStreet`它将`fromStreet`以*原始格式*`data`保存在本地内部参数中，就像您从服务器获取它一样。本地搜索使用该参数，因此将使用您从服务器到达那里的and like。*`data``toStreet``fromStreet`*

 *您没有发布您使用的更完整的 jqGrid 代码。所以我想你使用`datatype: 'json'`,`datatype: 'jsonp'`或`datatype: 'xml'`结合`loadonce: true`. 你应该定义`colModel`

```
$('#grid').jqGrid({
    ...
    colNames:["AddressTo", "AddressFrom"],
    colModel:[
        {name: "addressTo", ...},
        {name: "addressFrom", ...}
    ],
    beforeProcessing: function (data) {
        var i, rows = data.rows, l = rows.length, item;
        for (i = 0; i < l; i++) {
            item = rows[i];
            item.addressTo = item.toStreet + " " + item.toCity + ", " +
                item.toState + " " + item.toZip;
            item.addressFrom = item.fromStreet+ " " + item.fromCity + ", " +
                item.fromState + "  " + item.fromZip;
        }
    }
    ...
}); 
```

确切的代码取决于输入数据的格式。使用的好处是在jqGrid处理数据*之前*`beforeProcessing`会调用它。因此，您可以对数据进行任何修改，或者像上面那样进行修改。

 ***更新：可以使用标准**jqGrid**`datatype`选项以另一种方式轻松实现代码。所以我建议使用以下设置：**

 **```
datatype: "json",
url: "/GetGrid",
postData: {
    // add and to the list of parameters sent to the web service
    showActive: function () {
        return $('#btnFilterActive.pressed').length > 0;
    },
    showInactive: function () {
        return $('#btnFilterActive.pressed').length > 0;
    }
},
prmNames: {
    // rename some parameters sent to the web service
    sort: "sortIndex",
    order: "sortDirection",
    search: "search",
    // don't send nd parameter to the server
    nd: null
    // you leave the nd is you don't set any "Cache-Control" HTTP header
    // I would recommend you to set "Cache-Control: private, max-age=0"
    // For example
    // HttpContext.Current.Response.Cache.SetMaxAge (new TimeSpan(0));
},
serializeGridData: function (postData) {
    // control modification of the the data (parameters) which will be sent
    // to the web method
    if (typeof postData.filters === "undefined") {
        postData.filters = "";
    }
    return JSON.stringify(postData);
},
ajaxGridOptions: { contentType: "application/json" },
jsonReader: {
    root: "d.rows",
    page: function (obj) { return obj.d.page; },
    total: function (obj) { return obj.d.total; },
    records: function (obj) { return obj.d.rows.length; },
    repeatitems: false
},
loadError: function (jqXHR, textStatus, errorThrown) {
    // see an implementation example in the answers
    // https://stackoverflow.com/a/6969114/315935
    // and
    // https://stackoverflow.com/a/5501644/315935
},
colNames:["AddressTo", "AddressFrom"],
colModel:[
    {name: "addressTo", ...},
    {name: "addressFrom", ...}
],
beforeProcessing: function (data) {
    var i, rows, l, item;

    data.d = NET.format(data.d); // just correctly format dates
    rows = data.d.rows;
    l = rows.length;
    for (i = 0; i < l; i++) {
        item = rows[i];
        LoadedDisasters[i] = item;
        item.addressTo = item.toStreet + " " + item.toCity + ", " +
            item.toState + " " + item.toZip;
        item.addressFrom = item.fromStreet+ " " + item.fromCity + ", " +
            item.fromState + "  " + item.fromZip;
    }
}
... 
```

[我在答案](https://stackoverflow.com/a/7877286/315935)`nd: null`中描述的“Cache-Control：private，max-age = 0”设置的用法。您可以下载使用它的相应演示项目。通常，您只需在其中添加一条附加线路即可`SetMaxAge`

```
[WebMethod]
[ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)]
public MyGridData GetGrid(...) {
    HttpContext.Current.Response.Cache.SetMaxAge (new TimeSpan(0));
    ...
} 
```

查看更多关于缓存控制的信息，您可以[在此处](https://stackoverflow.com/a/3885956/315935)阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T18:33:59.037

当使用自定义/预定义格式化程序格式化数据时，jqGrid 过滤行时出现问题。

您必须在服务器端过滤行。

在控制器中添加 2 个请求参数来处理 jqgrid 搜索请求：

当 jqGrid 请求过滤后的原始数据时，它将添加一个参数：`_search`with value:`true` 和所有搜索参数，例如`col1=abc&col4=123`用户想要分别使用名为列和以值命名的`col1`列进行过滤：和`col4``abc``123`

使用这些值并使用类似操作查询数据库，如下所示：

```
select id, concat(street1, street2, city, state, zip) as address 
 where address like "%abc%" and id like "%123%" 
```

将这些行作为 json 返回到 jqGrid 并在当前页面中显示这些行。所以基本上你必须有一个带有服务器端分页、排序和搜索的 jqGrid。您不能使用客户端分页、排序和搜索功能。另外，请确保您没有`loadonce: true`设置。****

# javascript - Objective C - UIWebview - 将 javascript 文本范围转换为目标 c 对象，反之亦然

> ID：10110395
> 
> 赞同：3
> 
> 时间：2012-04-11T16:48:44.537
> 
> 标签：javascript, objective-c, uiwebview, range

我有一个 UIWebview，其中正在显示 html 内容。当用户选择一段文本时，我想使用目标 c 保存该文本的范围，然后在稍后阶段调用该保存的范围以重新选择 UIWebview 中的文本。

我能得到的最接近的是以下javascript：

```
var selection = window.getSelection();
var range = selection.getRangeAt(selection.rangeCount); 
```

但是我不知道如何将范围对象返回到目标 c 以保存它并在以后重用它。任何人都可以指出我正确的方向吗？

谢谢， EZFrag

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:38:04.877

您可以将范围序列化为一个字符串，该字符串表示通过 DOM 到达起点和终点的路径。我的[Rangy](http://code.google.com/p/rangy)库有[一个序列化模块可以执行此操作](http://code.google.com/p/rangy/wiki/SerializerModule)，但对于 Mobile Safari，仅依靠一个相对较大的库来完成此任务可能是矫枉过正。有关使用相同想法的更轻量级脚本，请参见 Martin Honnen 的脚本：http: [//home.arcor.de/martin.honnen/javascript/storingSelection1.html](http://home.arcor.de/martin.honnen/javascript/storingSelection1.html)

# javascript - 从 IFrame 中设置 IFrame 大小

> ID：10110397
> 
> 赞同：1
> 
> 时间：2012-04-11T16:48:58.297
> 
> 标签：javascript, jquery

我一直在尝试一些类似以下的尝试，试图从 iframe 中重置 iframe，但我不确定我做错了什么。想法？

```
 window.top.$("#ID").width(324);
    window.top.$("#ID").height(369); 
```

没有工作。

# git - 为什么在中止因拉入更改而触发的合并时 GIT 不清理？

> ID：10110401
> 
> 赞同：1
> 
> 时间：2012-04-11T16:49:08.603
> 
> 标签：git, tortoisegit, git-pull, git-gui

我的团队最近在使用 GIT 时遇到了很多麻烦，因为 pull 命令中止。

如果用户在索引上没有进行本地修改并进行拉取，我已经看到 git 尝试开始将合并应用到 master 并中止。然后整个结帐处于几乎无法恢复的可怕状态。过去，我认为 GIT 会在尝试合并之前运行某种检查来识别这些问题。

即使处于干净的状态（无需提交），我也至少看到过同样的事情随机发生一次。我知道如果不重新设置基准，您可能会在拉取时被迫解决合并冲突，但这并不是正在发生的事情。

我们正在使用 gitolite。我主要使用命令行，还没有遇到这些问题。团队的其他成员正在使用 git-gui，或者在 1 种情况下使用 TortoiseGit。

git-gui 版本 0.13.GITGUI
git 版本 1.7.8.msysgit.0
Tcl/Tk 版本 8.5.1
TortoiseGit 1.7.6.0

我们没有尽可能多地与分支机构合作，但感觉这应该是可行的。
为什么 GIT 允许您在火车失事时尝试拉动？
为什么 GIT 不能干净地中止？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:54:46.653

“git pull”与“git fetch + git merge”相同。因此，当 git 中止时，它处于合并状态。

当 git 尝试合并一个分支时，它会“尽可能”地进行。可以合并的文件被合并，不能自动合并的文件处于“都修改”的状态。开发人员必须手动检查文件才能完成合并。

如果您在不完整的“git pull”（或“git merge”）之后更喜欢干净的状态，您可以使用以下命令轻松返回到合并前的最后一个修订：

```
git reset --hard my_local_branch 
```

在您的情况下，我认为“my_local_branch”是“master”。

# java - 用于在数据挖掘系统中配置模型的 Java 模式

> ID：10110402
> 
> 赞同：1
> 
> 时间：2012-04-11T16:49:14.540
> 
> 标签：java, oop, design-patterns, configuration, data-mining

# tl;博士：

我正在寻找枚举特定对象的变量的最佳模式，以及这些变量可能采用的范围。然后我想根据特定的变量设置配置对象。

# 长版：

我正在浏览一些旧代码，试图清理我过去制作的一些丑陋的黑客行为。我有一个不错的机器学习和数据挖掘库。在这个库中有各种统计模型（和其他组件），可以通过给定足够数据（称为训练）的数学优化来学习它们自己的许多参数。但是，还有其他参数（超参数）在训练之前设置为输入之一。可以通过选择许多有效设置、为每个设置构建模型并选择获胜者来“调整”超参数。可以在此过程中使用递归来调整几个超参数。

## 问题：

在我看来，优雅地处理超参数（更一般地，选项）的有效系统所需的组件是：

1.  一个静态变量，枚举所有不同类型的所有不同选项（枚举、浮点数、布尔值等）、有效值范围等。这些还可以存储每个选项的默认值。
2.  一个构造函数，它接受配置并使用此选项设置构建对象。
3.  很高兴拥有：例如，能够从 .properties、gnu cli 或 yaml 进行“配置”。

## 我遇到的困难：

这里的主要困难之一似乎是1）。Java 没有任何真正的机制来支持静态抽象变量，以防止强制实现“可配置”接口的给定类存储它们自己的默认配置实现。有没有解决这个问题的好方法？

父类的默认配置应传递给子类。

我可以创建一个采用配置对象的构造函数，但是将其扩展为也采用此配置的（cli、yaml、.properties）表现形式有点棘手。

我很想有任何关于解决 stackoverflow 可以提供的问题的建议。我一直在考虑这个问题，目前我所拥有的只是丑陋的黑客，而不是漂亮的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:49:20.783

You might want to have a look at how the data mining framework [ELKI](http://elki.dbs.ifi.lmu.de/) solves this. Judging from their wiki page on [parameterization](http://elki.dbs.ifi.lmu.de/wiki/Parameterization), they've gone through a couple of iterations. The current version seems to use plain java constructors, but a static public inner class that handles the parameterization stuff.

It can do a number of interesting things, such as returning an optimized implementation (e.g. when you use Lp-Norm with p=2, it will return the static instance of Euclidean distance). Plus, it won't throw an exception on the first parameterization error, but can report multiple errors in one configuration pass.

The MiniGUI UI they have has content assist (e.g. a dropdown of implementations or enum values), tooltips etc., and there also is a command line interface. It will also list valid parameter information, such as range constraints or available implementations.

I don't know if they also have a tool to automatically vary the parameters to find a local optimum. I think I at least saw some plans along these lines announced.

# node.js - node.js socket.io 如何发射到特定的客户端？

> ID：10110411
> 
> 赞同：22
> 
> 时间：2012-04-11T16:50:07.983
> 
> 标签：node.js, socket.io

我想向特定客户端“发送”一条消息，该消息是根据在不同客户端收到的另一条消息选择的，我该怎么做？

我正在考虑将每个客户加入他们自己的“房间”，然后进行广播。有没有更好的办法？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-11T17:47:32.037

**socket.io 1.0 及更高版本的更新**

```
io.to(socketid).emit('message', 'whatever'); 
```

对于旧版本：

您可以将每个客户端作为属性存储在对象中。然后您可以根据消息查找套接字：

```
var basket = {};

io.sockets.on('connection', function (socket) {
  socket.on("register", function(data) {
    basket[data.nickname] = socket.id;
  });
  socket.on("privmessage", function(data){
    var to = basket[data.to];
    io.sockets.socket(to).emit(data.msg);
  });
}); 
```

未经测试......但它应该给你一个想法

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-07-13T11:14:14.920

对于 socket.io 1.0 版，请使用：

```
io.to(socketid).emit('message', 'whatever'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-27T21:34:14.790

使用 socketID 发送给特定的客户端。

**服务器/包：socket.io：**

```
io.to(socketID).emit('testEvent', 'yourMessage'); 
```

**客户端/包socket.io-client：**

```
io.sockets.on('connection',(socket) => {
  socket.on("testEvent", data => {
    console.log(data);
  });
}); 
```

您可以通过以下方式访问 socketID：

```
io.on('connection', (socket, next) => {
    const ID = socket.id // id property on the socket Object
}) 
```

它只是`socket`对象上的一个属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-26T21:07:53.210

对于 socket.io v1.0< 使用：

`io.to(socketID).emit('testEvent', 'yourMessage');`

# javascript - Firefox 中的 HTML 位置问题（适用于 IE 和 Chrome）

> ID：10110412
> 
> 赞同：1
> 
> 时间：2012-04-11T16:50:08.267
> 
> 标签：javascript, jquery, asp.net, html, css

我有以下代码。当我将鼠标悬停在“代码”上时，它应该在位置 100 X100 上显示 div。它在 IE 和 Chrome 中运行良好；但是 div 不会移动到 Firefox 中的所需位置。需要进行哪些更改才能使其正常工作？

注意：我使用以下代码来定位 div

```
$('#tooltip').css({ left: 100 + "px", top: 100 + "px", position: "absolute" }) 
```

--完整代码--

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>

<title>Test</title>

<style type="text/css">

    .tooltip

    {

        background-color: Orange;

        position: absolute;

        border-style: solid;

        border-width: 2px;

        border-bottom: solid 2px black;

    }

</style>

<script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>

<script type="text/javascript">

    function showDiv(batchId, vendorId) {

        tooltip.style.display = "block";

        batch.innerHTML = batchId;

        vendor.innerHTML = vendorId;

        $('#tooltip').css({ left: 100 + "px", top: 100 + "px", position: "absolute" })

    }

</script>

</head>

<body>

<div>

    <div>

        <table cellspacing="0" rules="all" border="1" id="MainContent_grdTooltip" style="border-collapse: collapse;">

            <tr>

                <th scope="col">MainID</th>

                <th scope="col">SecondID</th>

                <th scope="col">CODE</th>

            </tr>

            <tr>

                <td>101</td>

                <td>999999991</td>

                <td onmouseover="showDiv(101,999999991)">55789</td>

            </tr>

        </table>

    </div>

    <div id="tooltip" class="tooltip">

        <table>

            <tr>

                <td>Main Id:</td>

                <td id="batch"></td>

            </tr>

            <tr>

                <td>Second Id:</td>

                <td id="vendor"></td>

            </tr>

        </table>

    </div>

</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T19:04:58.560

这是一个演示您的代码的 jsfiddle。

[http://jsfiddle.net/6GaEA/1/](http://jsfiddle.net/6GaEA/1/)

问题（根据萤火虫）在于您的脚本。您引用了一个未定义的变量“工具提示”。Chrome 和 IE 似乎吞下了这个错误并继续，而 firefox 则窒息而死。

改变这个：

```
 function showDiv(batchId, vendorId) {

    tooltip.style.display = "block";

    batch.innerHTML = batchId;

    vendor.innerHTML = vendorId;

    $('#tooltip').css({ left: 100 + "px", top: 100 + "px", position: "absolute" })

} 
```

对此：

```
function showDiv(batchId, vendorId) {

    $('#tooltip').css('display',"block");

    $('#batch').html(batchId);

    $('#vendor').html(vendorId);

    $('#tooltip').css({ left: 100 + "px", top: 100 + "px", position: "absolute" })

} 
```

编辑：我知道 jQuery css 函数在 $("#tooltip") 上被调用了两次。我试图尽可能地保持相同的代码流:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:21:29.107

要使“绝对”作为元素的位置，父元素必须将其位置设置为相对或绝对。也就是说，在您的情况下，将 css“位置：相对”添加到具有 onmouseover 事件的 TD。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T17:31:58.683

jQuery CSS 方法应该这样使用：

```
$("#something").css(propertyName,value); 
```

并且最好以这种方式处理脚本中的事件：

```
$("#something").mouseover(function() {
    $("#tooltip").css("display","block");
  }); 
```

并且为了绝对定位一个元素，它的父元素应该相对定位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T17:49:10.120

试试这个方法

```
 <script type="text/javascript">
            function showDiv(batchId, vendorId) {
                document.getElementById('tooltip').style.display = "block";
                document.getElementById('batch').innerHTML = batchId;
               // batch.innerHTML = batchId;
                document.getElementById('vendor').innerHTML = vendorId;
                //vendor.innerHTML = vendorId;
            }

        </script> 
```

# objective-c - UIPopoverController 无法出现在 presentPopoverFrom 上

> ID：10110416
> 
> 赞同：0
> 
> 时间：2012-04-11T16:50:22.967
> 
> 标签：objective-c, ios, ipad, uipopovercontroller

**编辑：这是我的错，请参阅下面的答案。**

我对为什么现在不起作用感到非常困惑，我希望你们中的一个可以提供一些建议：

```
// Initialise and setup the sharing view:
sharePopVC = [[SharePopViewController alloc] init];

// Create the pop-over we're gonna put it in:
myPopover = [[UIPopoverController alloc] initWithContentViewController:sharePopVC];

// Confirm nothing is null or anything odd:
NSLog(@"sharePopVC = %@", sharePopVC);
NSLog(@"myPopover = %@",myPopOver);

// Present the popover:
// Not my ideal parameters but 'safe' ones:
[myPopover presentPopoverFromRect:CGRectMake(100,100,100,100) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

// Does it even believe that it's visible.
if (myPopOver.isPopoverVisible) {
    NSLog(@"Popover is there, apparently..");
} else {
    NSLog(@"We concede the popover is NOT visible..");
} 
```

控制台输出：

```
2012-04-11 17:31:37.345 sharePopVC = <SharePopViewController: 0x19c720> 
2012-04-11 17:31:37.348 myPopover = <UIPopoverController: 0x14b180> 
2012-04-11 17:31:37.349 We concede the popover is NOT visible.. 
```

当然，没有任何显示。我在其他地方有几乎相同的代码工作正常。是什么阻止它出现？

我已经尝试从 UIBarButtonItem 呈现它，以防它与我的矩形有关，但它没有帮助。我也尝试过强行设置我的框架，`sharePopVC.view`以防它以某种方式全部设置为 0 并导致问题但也没有乐趣。

`self.view`在这种情况下，主视图包含一些子视图，如 UINavigationController 和 UIScrollView。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:37:01.977

我想通了，我很抱歉说**这是我愚蠢的。**

我已经`myPopover`并且`myPopOver` **都**宣布了，并且我在上面的它们之间跳跃，所以显然它不起作用..

所以我想教训是；如果某些东西不起作用，请仔细阅读！

# python - 为什么此递归复制功能将所有文件复制到正确目录之上的每个目录中？

> ID：10110417
> 
> 赞同：0
> 
> 时间：2012-04-11T16:50:23.493
> 
> 标签：python, recursion, os.walk

我编写了一个函数来递归地将文件从目录 A 复制到目录 B。代码是这样的：

```
import os
import shutil
import sys
from os.path import join, exists

def copy_file(src, dest):
    for path, dirs, files in os.walk(src, topdown=True):
        if len(dirs) > 0:
            for di in dirs:
                copy_file(join(path, di), join(dest,  di))

        if not exists(dest):
            os.makedirs(dest)
        for fi in files:
            shutil.copy(join(path, fi), dest) 
```

在我的测试中，输入参数是这样的：

```
src = d:/dev

```

它有一个名为`py`. 此外，`py`有一个名为的子目录`test`

```
dest = d:/dev_bak

```

所以，当我测试我的代码时，发生了一些奇怪的事情。在我的`dest`目录中`d:/dev_bak`，创建了三个子目录。即：`d:/dev_bak/py`; `d:/dev_bak/py/test`; `d:/dev_bak/test`.

在我的设计中， 的结构`dev_bak`将与`dev`. 那么，为什么会这样！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:00:19.627

您可以通过放置轻松诊断此问题

```
 print path, dirs, files 
```

正下方

```
for path, dirs, files in os.walk(src, topdown=True): 
```

本质上，你递归两次。

本身，`os.walk`下降到子目录。您通过递归调用自己的函数来进行双降。以下是该`print`语句的一些示例输出：

```
>>> copy_file("c:\Intel", "c:\Intel-Bak")
c:\Intel ['ExtremeGraphics', 'Logs'] []
c:\Intel\ExtremeGraphics ['CUI'] []
c:\Intel\ExtremeGraphics\CUI ['资源'] []
c:\Intel\ExtremeGraphics\CUI\Resource [] ['Intel\xae Graphics and Media Control Panel.lnk', 'Intel\xae HD Graphics.lnk']
c:\Intel\ExtremeGraphics\CUI\Resource [] ['Intel\xae Graphics and Media Control Panel.lnk', 'Intel\xae HD Graphics.lnk']
c:\Intel\ExtremeGraphics\CUI ['资源'] []
c:\Intel\ExtremeGraphics\CUI\Resource [] ['Intel\xae Graphics and Media Control Panel.lnk', 'Intel\xae HD Graphics.lnk']
c:\Intel\ExtremeGraphics\CUI\Resource [] ['Intel\xae Graphics and Media Control Panel.lnk', 'Intel\xae HD Graphics.lnk']
c:\Intel\Logs [] ['IntelChipset.log', 'IntelControlCenter.log', 'IntelGFX.log', 'IntelGFXCoin.log']
c:\Intel\ExtremeGraphics ['CUI'] []
c:\Intel\ExtremeGraphics\CUI ['资源'] []
c:\Intel\ExtremeGraphics\CUI\Resource [] ['Intel\xae Graphics and Media Control Panel.lnk', 'Intel\xae HD Graphics.lnk']
c:\Intel\ExtremeGraphics\CUI\Resource [] ['Intel\xae Graphics and Media Control Panel.lnk', 'Intel\xae HD Graphics.lnk']
c:\Intel\ExtremeGraphics\CUI ['资源'] []
c:\Intel\ExtremeGraphics\CUI\Resource [] ['Intel\xae Graphics and Media Control Panel.lnk', 'Intel\xae HD Graphics.lnk']
c:\Intel\ExtremeGraphics\CUI\Resource [] ['Intel\xae Graphics and Media Control Panel.lnk', 'Intel\xae HD Graphics.lnk']
c:\Intel\Logs [] ['IntelChipset.log', 'IntelControlCenter.log', 'IntelGFX.log', 'IntelGFXCoin.log']

```

如您所见，目录被访问了两次。

您应该修复程序的逻辑，使其仅访问每个目录一次，但理论上您可以忽略您已经访问过的任何目录：

```
visited = []
def copy_file(src, dest):
    for path, dirs, files in os.walk(src, topdown=True):
        if path not in visited:
            for di in dirs:
                print dest, di
                copy_file(join(path, di), join(dest,  di))
            if not exists(dest):
                os.makedirs(dest)
            for fi in files:
                shutil.copy(join(path, fi), dest)
            visited.append(path) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:54:16.827

shutil模块已经有一个[copytree](http://docs.python.org/library/shutil.html)函数，它将递归地复制目录。您可能想要使用它而不是提供自己的实现。

# css - 如何覆盖 jQuery 验证文本颜色？

> ID：10110420
> 
> 赞同：0
> 
> 时间：2012-04-11T16:50:38.580
> 
> 标签：css, jquery-validate

我使用 jQuery Validate 插件来突出显示错误。它用红色替换文本的颜色，这对于除一个 - 之外的所有元素都可以`.help-block`，它应该保持蓝色。

这是没有错误的代码：

```
<div class="control-group">
    <label class="control-label" for="place-of-birth">Place of birth</label>
    <div class="controls">
      <p class="help-block">Please input place of birth below, 2-80 symbols</p>
      <input type="text" class="input-xlarge" id="place-of-birth" name="place-of-birth" minlength="2" maxlength="80" autocomplete="off">
    </div>
</div> 
```

这是错误消息：

```
<div class="control-group error"> <!-- STYLE IS CHANGED HERE -->
    <label class="control-label" for="place-of-birth">Place of birth</label>
    <div class="controls">
      <p class="help-block">Please input place of birth below, 2-80 symbols</p>
      <input type="text" class="input-xlarge" id="place-of-birth" name="place-of-birth" minlength="2" maxlength="80" autocomplete="off">
      <div class="help-block" generated="true" for="place-of-birth">Please enter at least 2 characters.</div> <!-- THIS LINE IS ADDED -->
    </div>
</div> 
```

我试图用以下 CSS 覆盖它：

```
.control-group .error .help-block { color: blue; } 
```

但这没有帮助。[演示](http://jsbin.com/ukecog/6)。

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:52:12.550

像这样改变它：

```
.control-group.error .help-block { color: blue; } 
```

如果一个元素上有两个类，则选择器之间不能有空格。如果有空格，则表示该类属于子标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:52:29.230

CSS 规则是这样的：

```
.control-group.error .input-prepend .add-on, .control-group.error .input-append .add-on {
  color: #B94A48;
  background-color: #F2DEDE;
  border-color: #B94A48;
} 
```

修改文件中的这些值`bootstrap.css`或自己创建。

# html - wygwam / ckeditor 嵌套 div

> ID：10110428
> 
> 赞同：0
> 
> 时间：2012-04-11T16:50:59.633
> 
> 标签：html, ckeditor, expressionengine

所以..我真的很想使用 EE 的 Wygwam 扩展，它建立在 CKeditor 上，将预定义的 div 放入 wygwam 字段。我的意思是我想从下拉列表中选择一种样式，并插入类似下面的内容...

```
<div class="factwrapper220">
    <div class="smNumCentre">ONE IN TWO</div>
    <div class="factTextCentre">Nunc non est feugiat enim imperdiet commodo eu non eros.</div>
    <div style="clear:both"></div>
</div> 
```

一些 div 将被预填充，然后内容编辑器可以更改这些值/文本。我只是想知道这种方法是否可行？如果不是，那么允许内容创建者填充预定义的 div 结构的更好方法是什么。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:24:01.717

不要使用样式组合来更改当前选择的样式，您应该使用模板按钮，这样您就可以将其配置为插入您想要的任何内容。

如果您想使用组合窗格而不是对话框，您应该尝试搜索现有插件（这个插件应该很容易）或自己创建它，但使用样式组合是错误的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:17:45.567

Wygwam 支持模板（工具栏上有一个按钮），您还需要在 fieldtype 设置中的 Advanced Settings 下选择 template_files 选项。您可能还需要使用“模板”设置来定义可用模板列表。

更多详细信息：http: [//docs.cksource.com/CKEditor_3.x/Developers_Guide/Templates](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Templates)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T19:02:00.213

我建议将此作为[Pixel 和 Tonic](http://help.pixelandtonic.com/brandonkelly/products/brandonkelly_wygwam)的支持问题发布。

# android - 带有正文参数的 Android 短信链接

> ID：10110432
> 
> 赞同：5
> 
> 时间：2012-04-11T16:51:13.200
> 
> 标签：android, html, sms

我在网页上有一个短信链接：

```
<a href="sms:+15553332222?body=message">SMS Link</a> 
```

这在我的 Nexus（运行库存姜饼）上效果很好，但另外两部手机（HTC 都在带有 Sense UI 的姜饼上）不会打开显示“收件人无效”的链接。如果我删除链接上的 body 参数，它可以正常工作，但我需要 body 参数。我尝试了不同的数字格式，包括`+15553332222`, `15553332222`, `5553332222`,`+1-555-333-2222`和`555-333-2222`. 我也尝试过使用`sms:`,`smsto:`和`mms:`，结果相同。

我做错了吗？这是 HTC 手机的已知问题吗？如果是，是否有解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-02-05T15:39:56.960

尝试

```
<a href="sms://+35555&body=Helloworld"> 
```

使用 ：//

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T15:42:29.743

我也有同样的问题，而且离得更近了一点。

使用

`<a href="sms:+351234567;body=hello%20world">One number with body text sep ;</a>`

正确设置 msisdn 但失败并出现错误“无效收件人：`<body=hello world>`”

安卓 4.0.3

HTC Sence 3.6

# algorithm - 我们可以在 O(1) 中获得 LRU（最近最少使用）页面替换算法吗？

> ID：10110433
> 
> 赞同：2
> 
> 时间：2012-04-11T16:51:13.573
> 
> 标签：algorithm, data-structures, operating-system

`O(1)`我们能否在（即恒定时间）内获得 LRU（最近最少使用）页面替换算法？

如果可能，请给出算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:31:18.467

双向链表可以使用 O(1) 操作实现 LRU 队列。已使用的节点可以从其旧位置取消链接，并在恒定时间内重新链接到队列的头部。

请注意，如果您想将其用作页面替换方法，您仍然需要弄清楚如何使用 MMU 统计信息来有效地更新队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:33:52.940

在维基百科中，有几个 LRU 页面算法的[引用](http://en.wikipedia.org/wiki/Page_replacement_algorithm#Least_recently_used)，包括实现的链接。选项包括：

*   链表
*   LRU-K
*   弧
*   硬件支持

# javascript - 这个 CSS 菜单是如何创建的？

> ID：10110434
> 
> 赞同：5
> 
> 时间：2012-04-11T16:51:19.043
> 
> 标签：javascript, html, css

我一直在考虑创建一个圆形菜单，到目前为止，我可以使用 Javascript 获得圆形定位，但仍然对实现纯 CSS 替代方案感兴趣。

在我的研究中，我发现了这个菜单：[http](http://www.cssplay.co.uk/menus/cssplay-round-and-round.html) ://www.cssplay.co.uk/menus/cssplay-round-and-round.html 。

因此，该菜单是通过为每个列表项提供一个具有索引（p1、p2、p3 ...）的类来完成的，然后子圈子具有类（s1、s2、s3...）。然后这些项目从它们的类中被 -webkit-transformed 到适当的位置。

有没有办法做到这一点，而不必将类硬编码到元素上并为每种类型写出 CSS 规则？如果不是，那么使用 JS 执行此操作的最佳方法是什么？

* * *

到目前为止我所拥有的

通过使用 Javascript 绝对定位元素，我已经达到了预期的效果，但是我对这种解决方案并不感兴趣。代码如下所示：

```
var circles = document.getElementsByClassName('circle');
var radius = circles.style.height / 2;

for(var i = 0; i < circles.length; i++) {
    var items = circles.children;
    for(var i = 0; i < items.length) {
        items.style.left = 0 + cos((i / items.length) * 360) * radius;
        items.style.top = 0 + cos((i / items.length) * 360) * radius;
    }
} 
```

由于 style.width 返回的对象性质，实际代码稍微复杂一些，但作为示例，这应该可以为您提供要点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:25:22.820

您可以使用第[n 个类型的](http://www.w3.org/TR/2005/WD-css3-selectors-20051215/#nth-of-type-pseudo)伪类。例如，而不是

```
ul.circles:hover li.p1 { ... }
ul.circles:hover li.p2 { ... }
ul.circles:hover li.p3 { ... }
... 
```

您可以使用

```
ul.circles:hover li:nth-of-type(1) { ... }
ul.circles:hover li:nth-of-type(2) { ... }
ul.circles:hover li:nth-of-type(3) { ... }
... 
```

因此从 HTML 中删除 (p1, p2, p3...) 和 (s1, s2, s3 ...) 类。

不幸的是，您仍然需要知道菜单中的项目数量并为每个项目写出规则。

如果在 CSS 中可以提供更优雅的解决方案，则必须有类似`display: table-row`行环绕一个圆圈的地方。如果您可以使每个 li 的转换相对于前一个转换，您可能会获得一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:51:07.757

如果你真的想发疯，你总是可以[在 DOM 中构建 CSS](http://www.w3.org/TR/DOM-Level-2-Style/css.html#CSS-CSSStyleSheet)。

# c++ - 如何从 vc++ 触发以下命令？

> ID：10110435
> 
> 赞同：0
> 
> 时间：2012-04-11T16:51:21.337
> 
> 标签：c++, visual-c++, command-prompt, exif

我想更改图像的 exif 数据。为此，我使用[了 Exiv2.exe](http://www.exiv2.org/download.html)。现在我想从我用 vc++ 08 编写的程序中触发命令。要修改图像的 GPS 数据，exive 命令是

`exiv2 -M"set Exif.GPSInfo.GPSLatitude 4/1 15/1 33/1" D:\test\image.jpg`

我已将 exiv2.exe 放入 system32 文件夹。这个命令在命令提示符下工作正常。例如，

```
C:\Users\Me>exiv2 -M"set Exif.GPSInfo.GPSLatitude 4/1 15/1 33/1" D:\test\image.jpg 
```

现在如何从我的 c++ 程序中触发相同的命令？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:56:10.290

[查看ShellExecute()](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153%28v=vs.85%29.aspx)或[CreateProcess()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)的文档- 这些中的任何一个都应该让您到达您想去的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:50:21.240

终于明白了，

```
const char *change_latitude = "exiv2 -M\"set Exif.GPSInfo.GPSLatitude 14/1 15/1 13/1\" D:\\test\\image.jpg";
system(change_latitude); 
```

在此示例中，假设是：system32 文件夹中的 exiv2.exe。

谢谢...

# sql-server - SSMS可以用VS2010 Express代替SQL开发吗？

> ID：10110437
> 
> 赞同：0
> 
> 时间：2012-04-11T16:51:24.193
> 
> 标签：sql-server, visual-studio-2010

我想知道我是否可以利用 VS2010 Express 来创建表、管理/设计和完成查询，或者 SSMS 是否仍需要用于此类工作？我的谷歌搜索没有提供关于单独使用 VS2010 进行 SQL 开发的详细信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T16:57:23.123

我仍然会使用 SSMS。虽然您可以从 Visual Studio 2010 进行一些表管理，但 SSMS 将包含更多功能。从 Visual Studio 管理表的另一个缺点是 UI 比使用 SSMS 慢得多，尤其是当您有一个大型项目时。

# winapi - 在winsock中，我如何通过域名连接到服务器？

> ID：10110438
> 
> 赞同：2
> 
> 时间：2012-04-11T16:51:31.510
> 
> 标签：winapi, winsock

当我为连接函数填写一个 SOCKADDR_IN 结构时，我倾向于用确切的 IP 地址填写它，但是假设我想在线设置一个动态域名来表示一个偶尔变化的 IP 地址？给定一个域名，我不太确定如何填写该结构。我现在要做的是：

```
#define DEFAULT_PORT 12345
SOCKADDR_IN serverInfo;

serverInfo.sin_port=htons(DEFAULT_PORT);
serverInfo.sin_family=AF_INET;
serverInfo.sin_addr.s_addr= inet_addr("127.0.0.1");  // actual ip normally here 
```

但是如何解析域名以获取该结构的服务器 ip？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:53:39.807

您想使用该`gethostbyname`功能

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms738524%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738524%28v=vs.85%29.aspx)

# blackberry - 如何从 BlackBerry 设备获取 console.log() 输出？

> ID：10110446
> 
> 赞同：3
> 
> 时间：2012-04-11T16:52:02.467
> 
> 标签：blackberry, blackberry-webworks

我想调试在设备上运行的应用程序。我为平板电脑找到了这个：

[http://devblog.blackberry.com/2011/06/debugging-blackberry-web-apps/](http://devblog.blackberry.com/2011/06/debugging-blackberry-web-apps/)

我希望为黑莓智能手机做同样的事情。尤其：

1.  如何找到我手机的IP地址？我可以在设备管理器中看到设备已连接到我的电脑，但如何获取 IP 地址？

2.  如何在手机上启用 Web Inspector？我在 OS7 上使用 9790。在我的设备上找不到上述文章中描述的相同选项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T17:02:14.223

**- 寻找你的IP地址**：如果你的BB只连接到3G网络，它不会有一个有效的IP地址，但如果你通过Wi-Fi连接，它会被分配一个IP地址（除非那个网络不使用DHCP - 不那么频繁）。假设您的设备有一个 IP，并且您想查看它。尝试打开选项菜单 -> 设备 -> 设备和状态信息。您的 IP 应该显示在那里。如果是 0.0.0.0，则您的设备没有活动 IP。

**- 要打开 Web Inspector**：打开浏览器 -> 菜单 -> 选项 -> 启用开发人员工具。保存。再次点击菜单 -> 开发者工具 -> 启用 Web Inspector。一个弹出窗口会显示您的 Web Inspector 会话的 IP 地址。接下来，打开 Safari 并输入您的 URL，包括您给定的 IP 地址和端口号。BlackBerry 浏览器上的这些选项卡显示有链接。单击其中任何一个以打开 Web Inspector。

希望能帮助到你。

# html - 当您的页面在服务器上显示不正确，但在 jsFiddle 中正确显示时，您会怎么做？

> ID：10110450
> 
> 赞同：1
> 
> 时间：2012-04-11T16:52:18.187
> 
> 标签：html, css

我有一个页面在 Firefox 和 Chrome 中显示不正确（因为 tbodies 不显示边框）；但是它在 jsfiddle 中正确显示（这里：http: [//jsfiddle.net/JwkrD/](http://jsfiddle.net/JwkrD/) - 两个浏览器）。

我不确定如何继续 - 如何让 tbodies 以与 jsfiddle 中相同的方式显示在我的页面上？

我使用相同的 DOCTYPE，两个页面都使用 text/html 类型提供。我找不到任何其他差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:13:24.997

JS fiddle 应用 normaize.css 增加

```
table {
    border-collapse: collapse;
} 
```

添加它可以解决问题。

# asp.net-mvc-3 - Jquery Mobile MVC3 iPad Web App 链接

> ID：10110451
> 
> 赞同：0
> 
> 时间：2012-04-11T16:52:21.223
> 
> 标签：asp.net-mvc-3, ipad, jquery-mobile, mobile-safari

使用 JQuery Mobile 和 MVC3 ASP.NET，在 iPad 上创建了一个主屏幕书签。该应用程序启动没有问题，它不显示 safari 的酒吧。我登录到我的应用程序并单击一个链接，***链接 OPENS SAFARI，NOT INTENDED***。

我的问题是如何防止点击的链接在我的书签应用程序之外打开？我试过了：

```
$(document).bind("pageinit", function () {
    $("a").click(function (e) {
        e.preventDefault();
        $.mobile.changePage($(this).attr('href'));
    });
}); 
```

上面的代码似乎应该基于 jquery mobile 的文档工作。当我单击链接/按钮时，链接/按钮会突出显示，但没有错误或页面加载。

另外，另一个问题是为什么当我离开应用程序并回来时会话消失了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:30:59.840

iOS 会将您规定 data-ajax="false" 的链接视为应由 Safari 打开的链接。我在使用 jQueryMobile 的 MVC 站点中遇到了同样的问题。我发现[这篇文章](https://stackoverflow.com/questions/2898740/iphone-safari-web-app-opens-links-in-new-window)很有帮助，以下代码在我的应用程序中运行良好。

```
$("a[data-ajax='false']").live("click", function (event) {
    if (this.href) {
        event.preventDefault();
        location.href = this.href;
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:32:49.957

您链接到的这个网页是否与应用程序一起打包？你需要这样做。该应用程序找不到它并转到浏览器。

代码本身很好。 [http://jsfiddle.net/m35BU/5/](http://jsfiddle.net/m35BU/5/)

会话变量存储在服务器上...您是在谈论 javascript cookie 吗？

如果是这样，除非您为 cookie 设置过期日期（mktime()+3600*7 7 天）或其他任何内容，否则它将在应用程序关闭时过期。

# java - 使用 htmlunit 访问 html 表

> ID：10110452
> 
> 赞同：2
> 
> 时间：2012-04-11T16:52:26.297
> 
> 标签：java, htmlunit

我想访问包含在 html 文件中的表。这是我的代码：

```
 import java.io.*; 
  import com.gargoylesoftware.htmlunit.html.HtmlPage;
  import com.gargoylesoftware.htmlunit.html.HtmlTable;
  import com.gargoylesoftware.htmlunit.html.*;
  import com.gargoylesoftware.htmlunit.WebClient;

  public class test {

  public static void main(String[] args) throws Exception {

    WebClient client = new WebClient();
    HtmlPage currentPage = client.getPage("http://www.mysite.com");
    client.waitForBackgroundJavaScript(10000);

final HtmlDivision div = (HtmlDivision) currentPage.getByXPath("//div[@id='table-matches-time']");

   String textSource = div.toString();
    //String textSource = currentPage.asXml();

FileWriter fstream = new FileWriter("index.txt");
BufferedWriter out = new BufferedWriter(fstream);
out.write(textSource);

out.close();

    client.closeAllWindows();

  }

 } 
```

表格是这样的：

```
 <div id="table-matches-time" class="">
                    <table class=" table-main"> 
```

但我收到此错误：

```
 Exception in thread "main" java.lang.ClassCastException: java.util.ArrayList cannot be cast to com.gargoylesoftware.htmlunit.html.HtmlDivision
at test.main(test.java:20) 
```

我怎样才能读到这张表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T08:32:29.673

这有效（并返回给我一个 csv 文件；））：

```
 import java.io.*; 
    import com.gargoylesoftware.htmlunit.html.HtmlPage;
    import com.gargoylesoftware.htmlunit.html.HtmlTable;
    import com.gargoylesoftware.htmlunit.html.HtmlTableRow;
    import com.gargoylesoftware.htmlunit.html.*;
    import com.gargoylesoftware.htmlunit.WebClient;

    public class test {

    public static void main(String[] args) throws Exception {

    WebClient client = new WebClient();
    HtmlPage currentPage = client.getPage("http://www.mysite.com");
    client.waitForBackgroundJavaScript(10000);

FileWriter fstream = new FileWriter("index.txt");
BufferedWriter out = new BufferedWriter(fstream);

   for (int i=0;i<2;i++){

final HtmlTable table = (HtmlTable) currentPage.getByXPath("//table[@class=' table-main']").get(i);

   for (final HtmlTableRow row : table.getRows()) {

   for (final HtmlTableCell cell : row.getCells()) {
    out.write(cell.asText()+',');
   }
out.write('\n');
   }

   }

out.close();

    client.closeAllWindows();

   }

   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:55:59.797

看起来您的查询返回的是节点列表，而不是单个 div。您是否有多个具有该 ID 的项目？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T17:24:19.387

替换这部分代码：

```
(HtmlDivision) currentPage.getByXPath("//div[@id='table-matches-time']"); 
```

和：

```
(HtmlDivision) currentPage.getFirstByXPath("//div[@id='table-matches-time']"); 
```

第一种方法总是返回一个元素的集合，即使它是一个，而第二种方法总是返回一个元素，即使有更多。

**编辑：**

由于您有两个相同的元素`id`（根本不建议这样做），因此您应该使用它：

```
(HtmlDivision) currentPage.getByXPath("//div[@id='table-matches-time']").get(0); 
```

这样，您将获得集合的第一个元素。`.get(1);`会给你第二个。

# extjs - Sencha Touch 2：如何使用主页上的按钮导航到其他视图？

> ID：10110455
> 
> 赞同：3
> 
> 时间：2012-04-11T16:53:01.443
> 
> 标签：extjs, sencha-touch-2

如果您打算更进一步地观看“Sencha Touch 2 入门”视频，并在主页上添加按钮导航以允许您转到博客和联系页面，您会怎么做？我已经像线程 Sencha Touch 2 MVC 一样设置了所有内容[- 如何使用按钮切换视图](https://stackoverflow.com/questions/7883097/sencha-touch-2-mvc-how-to-switch-views-with-button)

我遇到的问题是，如果我创建一个按钮以转到 Home.js 页面中的博客页面，该按钮将起作用，但是 Blog.js 页面上的嵌套列表不再起作用，并且 Main 中的 TitleBar .js 也不再出现在 Blog.js 上。我的控制器代码如下所示

```
control: {
    'blog list': {
        itemtap: 'showPost'
    },
    'button[go]':{
        tap: function(){
            Ext.Viewport.setActiveItem({
                xtype: 'blog'
            })
        }
    }
} 
```

其中 showPost 与 GS 视频的功能相同。我在 Home.js 文件上的按钮如下所示

```
items:[
    {
        xtype: 'button',
        text: 'text',
        go: 'buttonPage'
    }]
} 
```

其他一切都与 GS 视频完全相同。我希望 Home.js 页面上的按钮与入门视频中 Main.js 中 TitleBar 上的按钮完全相同。我错过了什么？提前致谢。

2012 年 4 月 13 日更新：所有 js 文件。它们本质上都是原始的 GS 视频代码。

查看/Main.js

```
Ext.define("GS.view.Main", {
    extend: 'Ext.tab.Panel',
    requires: ['Ext.TitleBar'],

    config: {
        xtype: 'bottombar',
        tabBarPosition: 'bottom',

        items:[{xtype: 'homepanel'},
            {xtype: 'blog'}]}
}); 
```

查看/Home.js

```
Ext.define('GS.view.Home', {
    extend: 'Ext.Panel',
    xtype: 'homepanel',

    config:  {
        title: 'Home',
        iconCls: 'home',

        items:[{
                xtype: 'button',
                text: 'text',
                go: 'buttonPage'}]
        }
}) 
```

查看/Blog.js

```
Ext.define('GS.view.Blog',{
    extend: 'Ext.navigation.View',
    xtype: 'blog',
    requires: ['Ext.dataview.List', 'Ext.data.proxy.JsonP', 'Ext.data.Store'],
    config: {
        title: 'Blog',
        iconCls: 'star',
        items: [{
                xtype: 'list',
                itemTpl: '{title}',
                title: 'Recent Posts',
                store:{
                    autoLoad: true,
                    fields: ['title', 'author', 'content'],
                    proxy: {
                        type: 'jsonp',
                        url: 'https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&q=http://data.9msn.com.au/Services/Service.axd/feeds/rss/news/headlines',
                        reader: {
                            type: 'json',
                            rootProperty: 'responseData.feed.entries'
                        }
                    }
                }
            }]
    }
}) 
```

控制器/Main.js

```
Ext.define('GS.controller.Main', {
    extend: 'Ext.app.Controller',
    config: {
        refs: {
            blog: 'blog'
        },
        control: {
            'blog list': {
                itemtap: 'showPost'
            },
            'button[go]':{
                tap: function(){
                    Ext.Viewport.setActiveItem({
                        xtype: 'blog'
                    })
                }
            }
        }
    },

    showPost: function(list, index, element, record){
        this.getBlog().push({
            xtype: 'panel',
            title: record.get('title'),
            html: record.get('content'),
            scrollable: true,
            styleHtmlContent: true,
        })
    }

}); 
```

应用程序.js

```
Ext.application({
    name: 'GS',
    requires: ['Ext.MessageBox'],
    controllers: ['Main'],
    views: ['Main', 'Home', 'Blog'],
    launch: function() {
        Ext.Viewport.add(Ext.create('GS.view.Main'));
    },
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:16:04.640

由于使用 Ext.Viewport.setActiveItem({xtype: 'blog'}) 不会重用您创建的 xtype，因此在尝试使用博客列表时会感到困惑。我使用了[Roberto 所说](https://stackoverflow.com/questions/7883097/sencha-touch-2-mvc-how-to-switch-views-with-button)的一些内容和一些我自己的代码，最终得到了如下所示的控制器 'button[go]' 函数：

```
'button[go]':{
    tap: function(btn){
        if(Ext.ComponentQuery.query(btn.go) == '')
        {   
            Ext.Viewport.setActiveItem({
                xtype: btn.go
            })
        }
        else                    
            target = Ext.ComponentQuery.query(btn.go);
            Ext.Viewport.setActiveItem(target[0])
    }
} 
```

第一次创建了 xtype，然后每次都重复使用它，因此下一个列表中的导航和主页上的导航一样有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T05:36:59.230

如果您使用的是navigationView，您可以通过点击按钮轻松切换视图。

*   将您的主视图作为 navigationView 。
*   将按钮放入 navigationView 。
*   将以下代码写入按钮的 Tap-listener

    this.up('你的 navigationView xtype').push({
              xtype: '你想通过按钮点击的视图的 xtype'
    });

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:21:25.753

您必须遵循的 2 个步骤

1.  在视图中

    ```
     {
                xtype: "button",
                //text: "Book Bus Ticket",
                ui: 'action',                      
                action:"book" ,   // button Action
             },

            {
                 xtype: "button",
                 text: "Get Ticket Details",
                 ui: 'action',                                  
                 action:"getticket" ,  // button Action
             }, 
    ```

注意按钮操作

2.在控制器中

首先将特定视图 xtype 指定为该控制器中的 ref

```
 Ext.define('jetbus.controller.BookticketController', {
   extend: 'Ext.app.Controller',

        refs: {

              'busdetails':"busDetailsList",   // object:xtype

    },

   control: {
    'busdetails button[action=book]': {   // button action
        tap: 'book'
    },

    ' button[action=getticket]': {     // button action
        tap: 'getticket'
    },
    }

     book: function(){
var mn=Ext.create('abc.view.Main'); // Functionname the page you want to redirect
Ext.Viewport.add(mn);
Ext.Viewport.setActiveItem(mn);
         }, 
```

# scala - Scala DRYing try/catch

> ID：10110457
> 
> 赞同：7
> 
> 时间：2012-04-11T16:53:22.153
> 
> 标签：scala, logging, try-catch, dry

我发现自己在重复简单的 try/catch 块，IMO 应该是 1-liners。

例如，假设我需要将 yyyymmdd 格式的 uri 字符串日期转换为 Joda-Time。使用标准的 try/catch 块，转换方法如下所示：

```
def ymd2Date(ymd: Option[String]) = ymd match {
  case Some(date) =>
    try { Right( ymdFormat.parseDateTime(date) ) }
    catch { case e => 
      log.info(e.getMessage)
      Left(None) 
    }
  case None => 
    Left(None) // no uri date param
}
val ymdFormat = DateTimeFormat.forPattern("yyyyMMdd") 
```

*工作得很好，意图很明确，但是当我对所有*非关键事件进行这种尝试/捕获日志记录时，我会寻找一种方法来将其干燥。搜索使我找到了关于 scala.util.control.Exception[的 SO 帖子。](https://stackoverflow.com/questions/2903481/using-scala-util-control-exception)有帮助，但仍然有点难以摸索/让它以我想要的方式工作。用简单的英语我只想说，“catch some-action get-result log-error-type”。

所以，我根据 control.Exception 我感兴趣的部分破解了这个（或理解为有用）：

```
class Catcher[T](f: => T) {   
  type Logger = (=> Any) => Unit

  def either[T]( logger: => Logger ) = {
    try { Right(f) }
    catch { case e => 
      logger(e.getMessage)
      Left(None)
    }
  }
}
def catching[T](f: => T) = new Catcher(f) 
```

然后像这样代替 try/catch 使用：

```
catching( ymdFormat.parseDateTime(date) ) either log.info 
```

可以添加选项、msg 前缀等，但是......最好找到一种方法来获得 control.Exception 像上面一样工作，因为 TypeSafe 工作人员将比我更好地生成代码世界永远想象写作。

有谁知道如何使用 control.Exception 创建这种语法，其中可以按名称传入记录器函数以在 catch 块中使用？

如果有 control.Exception 的“用例”会很棒，但我觉得这个实用程序适用于更高级的 Scala 开发人员

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T17:22:21.397

这应该做你想要的：

```
import scala.util.control.Exception
def log(logger: => Logger)(e: Throwable) = {
    logger(e.getMessage)
    None
}
Exception.allCatch withApply log(logger) apply Some(ymdFormat.parseDateTime(date)) 
```

`Validation`但在我看来，这种东西最好由 Scalaz 处理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T17:21:51.763

一个简单的例子：

```
import scala.util.control.Exception._

def throwingStuff {
  throw new Exception("Hello World!")
}

catching(classOf[Exception]).withApply{err => println(err.toString); None}.apply(Some(throwingStuff)) 
```

您可以使用`withApply`覆盖类的应用程序逻辑`Catch`来执行诸如写入日志之类的操作。

# java - JPA 和 Spring MVC 配置错误？

> ID：10110462
> 
> 赞同：0
> 
> 时间：2012-04-11T16:54:12.120
> 
> 标签：java, spring, jpa, spring-mvc

当我尝试运行我的测试 Web 应用程序时出现此异常：

```
org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name 'myDAO': 
Injection of persistence dependencies failed; 
nested exception is org.springframework.beans.factory.BeanCreationException:
Error creating bean with name 'emf' defined in ServletContext resource 
[/WEB-INF/testapp-servlet.xml]:
Invocation of init method failed; 
nested exception is javax.persistence.PersistenceException: 
No Persistence provider for EntityManager named testapp 
```

我的`persistence.xml`文件在`META-INF`文件夹中：

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence      http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
version="2.0" xmlns="http://java.sun.com/xml/ns/persistence">
<persistence-unit name="testapp" transaction-type="RESOURCE_LOCAL">
    <class>it.testapp.entities.Person</class>
    <class>it.testapp.entities.Group</class>
    <properties>
        <property name="javax.persistence.jdbc.driver" value="com.microsoft.sqlserver.jdbc.SQLServerDriver" />
        <property name="javax.persistence.jdbc.url"
            value="jdbc:sqlserver://localhost;databaseName=db_testapp" />
        <property name="javax.persistence.jdbc.user" value="user1" />
        <property name="javax.persistence.jdbc.password" value="" />
    </properties>

</persistence-unit> 
```

我的`data-context.xml`bean 定义文件在`WEB-INF`文件夹中：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

<context:annotation-config />
<context:component-scan base-package="it.testapp.dao" />

<bean id="emf"
    class="org.springframework.orm.jpa.LocalEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="testapp"></property>
</bean>

<bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

<bean id="aDao" class="it.testapp.dao.jpa.PersonJpaDAO" /> 
```

哪里有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:58:17.507

你需要在`<provider>`下面添加标签`<persistence-unit>`吗？

（例如`<provider>org.hibernate.ejb.HibernatePersistence</provider>`）

此外，[此答案](https://stackoverflow.com/a/1856503/836738)表明没有您的`persistence.xml`参与`/WEB-INF/classes/META-INF`也可能会触发此错误。

# actionscript-3 - AS3 参考按钮

> ID：10110466
> 
> 赞同：1
> 
> 时间：2012-04-11T16:54:20.390
> 
> 标签：actionscript-3, flash-cs5

我怎样才能使这项工作？我需要从引用中删除单词 Button 以引用将被着色的实际项目。先感谢您。

```
disagreeButton.addEventListener(MouseEvent.ROLL_OVER, mouseRollOver);
contentMain.clickButton1.addEventListener(MouseEvent.ROLL_OVER, mouseRollOver);

function mouseRollOver(e:MouseEvent):void { 
    var c:Color = new Color();
    c.setTint (0xFFFFFF, 1);
    //the issue is this line:
    this[e.target.name.replace( "Button", "" )].transform.colorTransform = c;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:58:59.013

既然我理解了你的问题，我会推荐以下内容。

1.  `this`对 in和 in`contentMain`以及任何其他按钮有单独的方法。然后在适当的情况下通过`this[...]`或访问对象。`contentMain[...]`

    ```
    disagreeButton.addEventListener(MouseEvent.ROLL_OVER, mainMouseRollOver);
    contentMain.clickButton1.addEventListener(MouseEvent.ROLL_OVER, contentMainMouseRollOver);

    function mainMouseRollOver(e:MouseEvent):void { 
        mouseRolloverLogic(this[e.target.name.replace( "Button", "" )];
    }

    function contentMainMouseRollOver(e:MouseEvent):void { 
        mouseRolloverLogic(contentMain[e.target.name.replace( "Button", "" )];
    }

    function mouseRolloverLogic(item:DisplayObject):void {
        var c:Color = new Color();
        c.setTint (0xFFFFFF, 1);
        item.transform.colorTransform = c;
    } 
    ```

2.  为您拥有的方法添加额外的逻辑。

    ```
    if (this[...] != null) {
        ...
    }else if (contentMain[...] != null) {
        ...
    } 
    ```

# java - 窗口的内容在最小化时消失

> ID：10110467
> 
> 赞同：6
> 
> 时间：2012-04-11T16:54:21.227
> 
> 标签：java, swing, graphics, awt, paint

我有一个简单的类，它在鼠标拖动时画一条线，或者在鼠标按下（释放）时画一个点。

当我最小化应用程序然后恢复它时，窗口的内容会消失，除了最后一个点（像素）。我知道`super.paint(g)`每次窗口更改时该方法都会重新绘制背景，但无论我是否使用它，结果似乎都是一样的。两者的区别在于，当我不使用它时，窗口上只画了一个像素，但不是我的全部画。我怎样才能解决这个问题？

这是课程。

```
package painting;

import java.awt.*;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionAdapter;
import javax.swing.JFrame;
import javax.swing.JPanel;

class CustomCanvas extends Canvas{   
    Point oldLocation= new Point(10, 10);
    Point location= new Point(10, 10);
    Dimension dimension = new Dimension(2, 2);     
    CustomCanvas(Dimension dimension){  
        this.dimension = dimension;   
        this.init();
        addListeners();
    }    
    private void init(){                     
        oldLocation= new Point(0, 0);
        location= new Point(0, 0);
    }
    public void paintLine(){
        if ((location.x!=oldLocation.x) || (location.y!=oldLocation.y)) {         
            repaint(location.x,location.y,1,1);                                   
        } 
    }
    private void addListeners(){
        addMouseListener(new MouseAdapter(){
            @Override
            public void mousePressed(MouseEvent me){                   
                oldLocation = location;
                location = new Point(me.getX(), me.getY());
                paintLine();
            }
            @Override
            public void mouseReleased(MouseEvent me){                
                oldLocation = location;
                location = new Point(me.getX(), me.getY());
                paintLine();
            }
        });
        addMouseMotionListener(new MouseMotionAdapter() {
            @Override
            public void mouseDragged(MouseEvent me){                
                oldLocation = location;
                location = new Point(me.getX(), me.getY());
                paintLine();
            }
        });
    }
    @Override
    public void paint(Graphics g){  
        super.paint(g);
        g.setColor(Color.red);       
        g.drawLine(location.x, location.y, oldLocation.x, oldLocation.y);                
    }
    @Override
    public Dimension getMinimumSize() {
        return dimension; 
    }
    @Override
    public Dimension getPreferredSize() {
        return dimension;
    }

}
class CustomFrame extends JPanel {
    JPanel displayPanel = new JPanel(new BorderLayout());
    CustomCanvas canvas = new CustomCanvas(new Dimension(200, 200));        
    public CustomFrame(String titlu) {            
        canvas.setBackground(Color.white);
        displayPanel.add(canvas, BorderLayout.CENTER);            
        this.add(displayPanel);
    }   
}
public class CustomCanvasFrame {
    public static void main(String args[]) {
        CustomFrame panel = new CustomFrame("Test Paint");
        JFrame f = new JFrame();
        f.add(panel);
        f.pack();
        SwingConsole.run(f, 700, 700);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T18:58:03.877

> 这是否意味着每次按下或拖动鼠标时我都会绘制所有点（而不是一个）？

是的，但是@Dave 的方法对于数千个节点来说是完全令人满意的，如[`GraphPanel`](http://sites.google.com/site/drjohnbmatthews/graphpanel). 除此之外，请考虑[渲染器使用的](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)[*享元模式*](http://en.wikipedia.org/wiki/Flyweight_pattern)，并[在此处](https://stackoverflow.com/a/7776211/230513)说明。[`JTable`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)

附录：针对您的问题，下面的变化可能说明了[*系统触发绘画和应用触发绘画*](http://java.sun.com/products/jfc/tsc/articles/painting/index.html#triggers)[`AWTPainting`](https://stackoverflow.com/a/10148826/230513)之间的区别。当鼠标被拖动时，调用，调用; 这是应用程序触发的。当您调整窗口大小时，仅调用（不绘制红色数字）；这是系统触发的。请注意，调整大小后释放鼠标时*会出现闪烁。*[](http://java.sun.com/products/jfc/tsc/articles/painting/index.html#triggers)*`repaint()``update()``paint()``paint()`*

 **当整个组件的背景被清除并重绘时，通常会发生闪烁：

> 4\. 如果组件没有*覆盖*，`update()`默认实现`update()`清除组件的背景（如果不是轻量级组件），简单调用`paint()`.

![AWT绘画](../Images/d801ea23ffdbb96e75fa48cac4260aff.png)

```
import java.awt.Canvas;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Frame;
import java.awt.Graphics;
import java.awt.Panel;
import java.awt.Point;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.util.ArrayList;
import java.util.List;

public class AWTPainting {

    public static void main(String args[]) {
        CustomPanel panel = new CustomPanel();
        Frame f = new Frame();
        f.addWindowListener(new WindowAdapter() {

            @Override
            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });
        f.add(panel);
        f.pack();
        f.setVisible(true);
    }
}

class CustomPanel extends Panel {

    public CustomPanel() {
        this.add(new CustomCanvas(new Dimension(320, 240)));
    }
}

class CustomCanvas extends Canvas {

    private MouseAdapter handler = new MouseHandler();
    private List<Point> locations = new ArrayList<Point>();
    private Point sentinel = new Point();
    private Dimension dimension;

    CustomCanvas(Dimension dimension) {
        this.dimension = dimension;
        this.setBackground(Color.white);
        this.addMouseListener(handler);
        this.addMouseMotionListener(handler);
        this.locations.add(sentinel);
    }

    @Override
    public void paint(Graphics g) {
        g.setColor(Color.blue);
        Point p1 = locations.get(0);
        for (Point p2 : locations.subList(1, locations.size())) {
            g.drawLine(p1.x, p1.y, p2.x, p2.y);
            p1 = p2;
        }
    }

    @Override
    public void update(Graphics g) {
        paint(g);
        g.clearRect(0, getHeight() - 24, 50, 20); // to background
        g.setColor(Color.red);
        g.drawString(String.valueOf(locations.size()), 8, getHeight() - 8);
    }

    private class MouseHandler extends MouseAdapter {

        @Override
        public void mousePressed(MouseEvent e) {
            if (locations.get(0) == sentinel) { // reference identity
                locations.set(0, new Point(e.getX(), e.getY()));
            }
        }

        @Override
        public void mouseDragged(MouseEvent e) {
            locations.add(new Point(e.getX(), e.getY()));
            repaint();
        }
    }

    @Override
    public Dimension getPreferredSize() {
        return dimension;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T17:13:47.623

您没有存储正在绘制的点的状态。重新绘制面板时，它只包含它绘制的最后一个点的信息。

* * *

回复评论：

例如，您需要收集积分`ArrayList<Point> location = new ArrayList<Point>();`

然后，在你的听众中：`location.add(new Point(me.getX(), me.getY()));`

最后，在paintLine() 中：

```
for (Point location : locations) {
  repaint(location.x,location.y,1,1); 
} 
```

该集合`locations`通常称为显示列表。大多数图形程序都使用它们。

* * *

回复评论：

是的，我希望如此。我只是根据您的代码提出了一个想法，以便为您提供一个起点。完全按照我的描述去做几乎肯定是个坏主意。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T21:55:38.510

@Andrew，@Dave，@trashgod 嗨，我对此进行了一些研究，最后，这就是我所拥有的。如果我错了，请纠正我。您不能覆盖paint()，因此每次需要执行应用程序触发的绘画时都调用repaint()。Repaint() 调用 update()，其默认行为是调用 paint()。update() 用于增量绘制；这解释了当paint() 完成所有工作时闪烁的屏幕，这实际上意味着它在每一步都在绘制整个图像。但是，我的问题是，如果我在更新方法中添加“locationsAdded = 0”，这意味着每次拖动鼠标时我都会绘制整个图像（就像在绘制中一样），那么为什么它不像以前那样闪烁呢？我也读过一些关于摇摆绘画的文章，但我不明白为什么从不为摇摆调用 update()。你能解释一下为什么吗？

```
import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;

class CustomCanvas extends Canvas{ 
    ArrayList<Point> locations;        
    int locationsAdded;    
    Point oldLocation;
    Point location;
    Dimension dimension;
    CustomCanvas(Dimension dimension){  
        locations = new ArrayList<>();        
        this.dimension = dimension;   
        this.init();
        addListeners();
    }    
    private void init(){                          
        oldLocation= new Point(0, 0);
        location= new Point(0, 0);
    }
    public void paintLine(Graphics g, int x){
        Point p1 = (Point)locations.get(x);
        Point p2 = (Point)locations.get(x+1);
        g.drawLine(p1.x, p1.y, p2.x, p2.y);
        locationsAdded++;
    }
    @Override
    public void paint(Graphics g){          
        locationsAdded = 0;        
        g.setColor(Color.red);                  
        for(int i = locationsAdded; i < locations.size()-1; i++){
            paintLine(g, i);
        }             
    }
    public void update(Graphics g) {        
    //locationsAdded = 0;
        for (int i = locationsAdded; i < locations.size()-1; i++) {            
            paintLine(g, i);
        }
    }
    private void addListeners(){
        addMouseMotionListener(new MouseMotionAdapter() {
            @Override
            public void mouseDragged(MouseEvent me){                                   
                oldLocation = location;
                location = new Point(me.getX(), me.getY());
                locations.add(location);
                repaint();
            }
        }); 
    }

    @Override
    public Dimension getMinimumSize() {
        return dimension; 
    }
    @Override
    public Dimension getPreferredSize() {
        return dimension;
    }
}
class CustomFrame extends Panel {
    Panel displayPanel = new Panel(new BorderLayout());
    CustomCanvas canvas = new CustomCanvas(new Dimension(700, 700));        
    public CustomFrame(String titlu) {            
        canvas.setBackground(Color.white);
        displayPanel.add(canvas, BorderLayout.CENTER);            
        this.add(displayPanel);
    }  
}
public class AWTPainting {
    public static void main(String args[]) {
        CustomFrame panel = new CustomFrame("Test Paint");
        Frame f = new Frame();
        f.add(panel);
        f.pack();        
        f.setSize(700,700);                    
        f.show();                
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-11T00:13:34.973

将您的布​​局设置为 Null 布局**

# ruby-on-rails - 搜索表单结果的分页不返回后续页面（Kaminari + Rails）

> ID：10110476
> 
> 赞同：0
> 
> 时间：2012-04-11T16:55:04.657
> 
> 标签：ruby-on-rails, pagination, kaminari

所以我有一个返回 Kaminari 分页数组的搜索表单。第一页总是返回一个结果列表，但是所有后续页面链接的“GET”都没有返回结果，我不知道为什么！

**这是我在控制器中的搜索方法**

```
def writer_search
  @writers = Kaminari.paginate_array(@results).page(params[:page]).per(10)
end

def writer_search_submit
  @results = #my big array of results, this part works fine
  @writers = Kaminari.paginate_array(@results).page(params[:page]).per(10)
  render 'writer_search'
end 
```

**查看代码**

```
 =form_tag(writer_search_submit_path, :method => 'post') do
   %input{:name => 'keywords', :id => 'keywords', :value => params[:keywords]}
   = submit_tag "Search"

 - @writers.each do |writer|
   #show the results

 = paginate @writers 
```

**单击分页链接时的服务器日志**

```
Started GET "/editors/writer_search?commit=Search&keywords=business&page=2"
  Processing by EditorsController#writer_search as HTML
  Parameters: {"commit"=>"Search", "keywords"=>"business", "page"=>"2", "utf8"=>"✓"} 
```

第一个呈现的页面包含我的数组的前 10 个结果（在本例中，有数百个结果）。单击任何分页链接都会生成一个 GET 并返回一个没有结果的页面。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T17:13:35.340

看起来你已经`@results`在`writer_search_submit`但没有定义`writer_search`。

GET 请求`"/editors/writer_search?commit=Search&keywords=business&page=2"`通过`EditorsController#writer_search`where`@results`是未定义的（因此您会得到一个没有结果的页面）。

**更新：（**感谢蒂洛）

也许您可以使用 before_filter 为所有需要它的操作加载@results？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:40:40.043

Rails 不会在实际搜索页面上呈现搜索结果，而是在您正在搜索的任何路线的默认索引页面上呈现搜索结果。

# java - 分块上传视频文件

> ID：10110479
> 
> 赞同：10
> 
> 时间：2012-04-11T16:55:15.833
> 
> 标签：java, api, upload, vimeo, scribe

**是的，这是一个很长的问题，包含很多细节......**所以，我的问题是：如何将上传的内容分段流式传输到 Vimeo？

**对于想要在自己的机器上进行复制和调试的任何人：**以下是您需要的东西：

*   我的代码[在这里](http://collabedit.com/8hwwy)。
*   [包括在此处](https://github.com/fernandezpablo85/scribe-java)找到的 Scribe 库
*   拥有一个至少大于 10 MB 的有效视频文件 (mp4) 并将其放在目录中`C:\test.mp4`或更改该代码以指向您所在的任何位置。
*   就是这样！谢谢你的协助！

**重大更新：**我在[这里](http://collabedit.com/8hwwy)的代码中为 Vimeo 留下了一个有效的 API 密钥和秘密。因此，只要您拥有 Vimeo 帐户，一旦您允许该应用程序并输入您的令牌，所有代码都应该可以正常工作。只需将该链接中的代码复制到您最喜欢的 IDE 上的项目中，看看您是否可以与我一起解决此问题。我会赏金给给我工作代码的人。谢谢！哦，不要指望长时间使用这个密钥和秘密。一旦这个问题得到解决，我会删除它。:)

**问题概述：**问题是当我将最后一个字节块发送到Vimeo然后验证上传时，响应返回所有内容的长度只是最后一个块的长度，而不是所有块组合的长度应该。

**SSCCE 注意：我**[在这里](http://collabedit.com/8hwwy)有我的整个 SSCCE 。我把它放在别的地方，这样它就可以**编译**了。它不是很短（大约 300 行），但希望你发现它是**自**包含的，它肯定是一个**E****示例**！）。但是，我在这篇文章中发布了我的代码的相关部分。

 ******它是这样工作的：**当您通过流式传输方法将视频上传到 Vimeo 时（请参阅[此处](http://vimeo.com/api/docs/upload)的上传 API 文档以了解如何设置），您必须提供一些标头：端点、内容长度和内容类型. 文档说它忽略了任何其他标题。您还可以为您上传的文件提供字节信息的有效负载。然后签名并发送（我有一个方法可以使用[scribe](https://github.com/fernandezpablo85/scribe-java)来完成）。

**我的问题：**当我只在一个请求中发送视频时，一切都很好。我的问题是，当我上传几个更大的文件时，我使用的计算机没有足够的内存来加载所有字节信息并将其放入 HTTP PUT 请求中，所以我必须将其拆分为1 MB 段。这就是事情变得棘手的地方。文档提到可以“恢复”上传，所以我试图用我的代码来做到这一点，但它的工作并不完全正确。下面，您将看到发送视频的代码。**记住**我的 SSCCE 在[这里](http://collabedit.com/8hwwy)。

**我尝试过的事情：**我认为它与 Content-Range 标头有关...所以这是我尝试更改 Content-Range 标头所说的内容...

*   不将内容范围标头添加到第一个块
*   向内容范围标头添加前缀（每个都带有前一个标头的组合）：

    *   “字节”
    *   “bytes”（引发连接错误，请参阅错误的最底部）-> 在[文档](http://vimeo.com/api/docs/upload)中显示这是他们正在寻找的内容，但我很确定文档中存在拼写错误，因为它们有他们的“简历”示例中的内容范围标题为：`1001-339108/339108`何时应该是`1001-339107/339108`. 是的...
    *   “字节%20”
    *   “字节：”
    *   “字节：”
    *   “字节=”
    *   “字节=”
*   不向内容范围标题添加任何内容作为前缀

这是代码：

```
/**
* Send the video data
*
* @return whether the video successfully sent
*/
private static boolean sendVideo(String endpoint, File file) throws FileNotFoundException, IOException {
  // Setup File
  long contentLength = file.length();
  String contentLengthString = Long.toString(contentLength);
  FileInputStream is = new FileInputStream(file);
  int bufferSize = 10485760; // 10 MB = 10485760 bytes
  byte[] bytesPortion = new byte[bufferSize];
  int byteNumber = 0;
  int maxAttempts = 1;
  while (is.read(bytesPortion, 0, bufferSize) != -1) {
    String contentRange = Integer.toString(byteNumber);
    long bytesLeft = contentLength - byteNumber;
    System.out.println(newline + newline + "Bytes Left: " + bytesLeft);
    if (bytesLeft < bufferSize) {
      //copy the bytesPortion array into a smaller array containing only the remaining bytes
      bytesPortion = Arrays.copyOf(bytesPortion, (int) bytesLeft);
      //This just makes it so it doesn't throw an IndexOutOfBounds exception on the next while iteration. It shouldn't get past another iteration
      bufferSize = (int) bytesLeft;
    }
    byteNumber += bytesPortion.length;
    contentRange += "-" + (byteNumber - 1) + "/" + contentLengthString;
    int attempts = 0;
    boolean success = false;
    while (attempts < maxAttempts && !success) {
      int bytesOnServer = sendVideoBytes("Test video", endpoint, contentLengthString, "video/mp4", contentRange, bytesPortion, first);
      if (bytesOnServer == byteNumber) {
        success = true;
      } else {
        System.out.println(bytesOnServer + " != " + byteNumber);
        System.out.println("Success is not true!");
      }
      attempts++;
    }
    first = true;
    if (!success) {
      return false;
    }
  }
  return true;
}

/**
* Sends the given bytes to the given endpoint
*
* @return the last byte on the server (from verifyUpload(endpoint))
*/
private static int sendVideoBytes(String videoTitle, String endpoint, String contentLength, String fileType, String contentRange, byte[] fileBytes, boolean addContentRange) throws FileNotFoundException, IOException {
  OAuthRequest request = new OAuthRequest(Verb.PUT, endpoint);
  request.addHeader("Content-Length", contentLength);
  request.addHeader("Content-Type", fileType);
  if (addContentRange) {
    request.addHeader("Content-Range", contentRangeHeaderPrefix + contentRange);
  }
  request.addPayload(fileBytes);
  Response response = signAndSendToVimeo(request, "sendVideo on " + videoTitle, false);
  if (response.getCode() != 200 && !response.isSuccessful()) {
    return -1;
  }
  return verifyUpload(endpoint);
}

/**
* Verifies the upload and returns whether it's successful
*
* @param endpoint to verify upload to
* @return the last byte on the server
*/
public static int verifyUpload(String endpoint) {
  // Verify the upload
  OAuthRequest request = new OAuthRequest(Verb.PUT, endpoint);
  request.addHeader("Content-Length", "0");
  request.addHeader("Content-Range", "bytes */*");
  Response response = signAndSendToVimeo(request, "verifyUpload to " + endpoint, true);
  if (response.getCode() != 308 || !response.isSuccessful()) {
    return -1;
  }
  String range = response.getHeader("Range");
  //range = "bytes=0-10485759"
  return Integer.parseInt(range.substring(range.lastIndexOf("-") + 1)) + 1;
  //The + 1 at the end is because Vimeo gives you 0-whatever byte where 0 = the first byte
} 
```

这是 signAndSendToVimeo 方法：

```
/**
* Signs the request and sends it. Returns the response.
*
* @param service
* @param accessToken
* @param request
* @return response
*/
public static Response signAndSendToVimeo(OAuthRequest request, String description, boolean printBody) throws org.scribe.exceptions.OAuthException {
  System.out.println(newline + newline
          + "Signing " + description + " request:"
          + ((printBody && !request.getBodyContents().isEmpty()) ? newline + "\tBody Contents:" + request.getBodyContents() : "")
          + ((!request.getHeaders().isEmpty()) ? newline + "\tHeaders: " + request.getHeaders() : ""));
  service.signRequest(accessToken, request);
  printRequest(request, description);
  Response response = request.send();
  printResponse(response, description, printBody);
  return response;
} 
```

这里是 printRequest 和 printResponse 方法的输出的**一些**（一个例子......所有的输出都可以在[这里找到）：](http://collabedit.com/aqk8n)**注意**这个输出会根据`contentRangeHeaderPrefix`设置的内容和`first`布尔值的设置（指定是否不要在第一个块上包含 Content-Range 标头）。

```
We're sending the video for upload!

Bytes Left: 15125120

Signing sendVideo on Test video request:
    Headers: {Content-Length=15125120, Content-Type=video/mp4, Content-Range=bytes%200-10485759/15125120}

sendVideo on Test video >>> Request
Headers: {Authorization=OAuth oauth_signature="zUdkaaoJyvz%2Bt6zoMvAFvX0DRkc%3D", oauth_version="1.0", oauth_nonce="340477132", oauth_signature_method="HMAC-SHA1", oauth_consumer_key="5cb447d1fc4c3308e2c6531e45bcadf1", oauth_token="460633205c55d3f1806bcab04174ae09", oauth_timestamp="1334336004", Content-Length=15125120, Content-Type=video/mp4, Content-Range=bytes: 0-10485759/15125120}
Verb: PUT
Complete URL: http://174.129.125.96:8080/upload?ticket_id=5ea64d64547e38e5e3c121852b2d306d

sendVideo on Test video >>> Response
Code: 200
Headers: {null=HTTP/1.1 200 OK, Content-Length=0, Connection=close, Content-Type=text/plain, Server=Vimeo/1.0}

Signing verifyUpload to http://174.129.125.96:8080/upload?ticket_id=5ea64d64547e38e5e3c121852b2d306d request:
    Headers: {Content-Length=0, Content-Range=bytes */*}

verifyUpload to http://174.129.125.96:8080/upload?ticket_id=5ea64d64547e38e5e3c121852b2d306d >>> Request
Headers: {Authorization=OAuth oauth_signature="FQg8HJe84nrUTdyvMJGM37dpNpI%3D", oauth_version="1.0", oauth_nonce="298157825", oauth_signature_method="HMAC-SHA1", oauth_consumer_key="5cb447d1fc4c3308e2c6531e45bcadf1", oauth_token="460633205c55d3f1806bcab04174ae09", oauth_timestamp="1334336015", Content-Length=0, Content-Range=bytes */*}
Verb: PUT
Complete URL: http://174.129.125.96:8080/upload?ticket_id=5ea64d64547e38e5e3c121852b2d306d

verifyUpload to http://174.129.125.96:8080/upload?ticket_id=5ea64d64547e38e5e3c121852b2d306d >>> Response
Code: 308
Headers: {null=HTTP/1.1 308 Resume Incomplete, Range=bytes=0-10485759, Content-Length=0, Connection=close, Content-Type=text/plain, Server=Vimeo/1.0}
Body: 

Bytes Left: 4639360

Signing sendVideo on Test video request:
    Headers: {Content-Length=15125120, Content-Type=video/mp4, Content-Range=bytes: 10485760-15125119/15125120}

sendVideo on Test video >>> Request
Headers: {Authorization=OAuth oauth_signature="qspQBu42HVhQ7sDpzKGeu3%2Bn8tM%3D", oauth_version="1.0", oauth_nonce="183131870", oauth_signature_method="HMAC-SHA1", oauth_consumer_key="5cb447d1fc4c3308e2c6531e45bcadf1", oauth_token="460633205c55d3f1806bcab04174ae09", oauth_timestamp="1334336015", Content-Length=15125120, Content-Type=video/mp4, Content-Range=bytes%2010485760-15125119/15125120}
Verb: PUT
Complete URL: http://174.129.125.96:8080/upload?ticket_id=5ea64d64547e38e5e3c121852b2d306d

sendVideo on Test video >>> Response
Code: 200
Headers: {null=HTTP/1.1 200 OK, Content-Length=0, Connection=close, Content-Type=text/plain, Server=Vimeo/1.0}

Signing verifyUpload to http://174.129.125.96:8080/upload?ticket_id=5ea64d64547e38e5e3c121852b2d306d request:
    Headers: {Content-Length=0, Content-Range=bytes */*}

verifyUpload to http://174.129.125.96:8080/upload?ticket_id=5ea64d64547e38e5e3c121852b2d306d >>> Request
Headers: {Authorization=OAuth oauth_signature="IdhhhBryzCa5eYqSPKAQfnVFpIg%3D", oauth_version="1.0", oauth_nonce="442087608", oauth_signature_method="HMAC-SHA1", oauth_consumer_key="5cb447d1fc4c3308e2c6531e45bcadf1", oauth_token="460633205c55d3f1806bcab04174ae09", oauth_timestamp="1334336020", Content-Length=0, Content-Range=bytes */*}
Verb: PUT
Complete URL: http://174.129.125.96:8080/upload?ticket_id=5ea64d64547e38e5e3c121852b2d306d

4639359 != 15125120
verifyUpload to http://174.129.125.96:8080/upload?ticket_id=5ea64d64547e38e5e3c121852b2d306d >>> Response
Success is not true!
Code: 308
Headers: {null=HTTP/1.1 308 Resume Incomplete, Range=bytes=0-4639359, Content-Length=0, Connection=close, Content-Type=text/plain, Server=Vimeo/1.0}
Body: 
```

然后代码继续完成上传和设置视频信息（你可以在[我的完整代码](http://collabedit.com/8hwwy)中看到）。

**编辑 2：**尝试从内容范围中删除“%20”并收到此错误建立连接。我必须使用“bytes%20”或根本不添加“bytes”......

```
Exception in thread "main" org.scribe.exceptions.OAuthException: Problems while creating connection.
    at org.scribe.model.Request.send(Request.java:70)
    at org.scribe.model.OAuthRequest.send(OAuthRequest.java:12)
    at autouploadermodel.VimeoTest.signAndSendToVimeo(VimeoTest.java:282)
    at autouploadermodel.VimeoTest.sendVideoBytes(VimeoTest.java:130)
    at autouploadermodel.VimeoTest.sendVideo(VimeoTest.java:105)
    at autouploadermodel.VimeoTest.main(VimeoTest.java:62)
Caused by: java.io.IOException: Error writing to server
    at sun.net.www.protocol.http.HttpURLConnection.writeRequests(HttpURLConnection.java:622)
    at sun.net.www.protocol.http.HttpURLConnection.writeRequests(HttpURLConnection.java:634)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1317)
    at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:468)
    at org.scribe.model.Response.<init>(Response.java:28)
    at org.scribe.model.Request.doSend(Request.java:110)
    at org.scribe.model.Request.send(Request.java:62)
    ... 5 more
Java Result: 1 
```

**编辑 1：**更新了代码和输出。还是需要帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T00:00:57.170

我认为您的问题可能只是这一行的结果：

```
request.addHeader("Content-Range", "bytes%20" + contentRange); 
```

尝试并`"bytes%20"`简单地替换`"bytes "`

在您的输出中，您会看到相应的标题内容不正确：

```
Headers: {
    Content-Length=15125120,
    Content-Type=video/mp4,
    Content-Range=bytes%200-10485759/15125120     <-- INCORRECT
} 
```

*关于`Content-Range`...的话题*

您是对的，示例最终内容块的范围应类似于`14680064-15125119/15125120`. 这是 HTTP 1.1 规范的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T18:37:13.853

这里

```
 String contentRange = Integer.toString(byteNumber + 1); 
```

您在第一次迭代时从 1 开始，而不是从 0 开始。

这里

```
 request.addHeader("Content-Length", contentLength); 
```

您放置整个文件内容长度而不是当前块的长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T00:57:47.670

vimeo API 页面说：“最后一步是调用 vimeo.videos.upload.complete 以将视频排队进行转码。此调用将返回 video_id，然后您可以在其他调用中使用它（设置标题、描述，隐私等）。如果不调用此方法，则视频不会被处理。

我在最后添加了这段代码并让它工作：

```
 request = new OAuthRequest(Verb.PUT, "http://vimeo.com/api/rest/v2");
    request.addQuerystringParameter("method", "vimeo.videos.upload.complete");
    request.addQuerystringParameter("filename", video.getName());
    request.addQuerystringParameter("ticket_id", ticket);
    service.signRequest(token, request);        

    response = request.send(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-12-05T07:52:11.527

检查这个：

```
String contentRange="bytes "+lastBytesSend+"-"+ ((totalSize - lastBytesSend)-1)+"/"+totalSize ;

request.addHeader("Content-Range",contentRange); 
```****

# iphone - 触摸注释iphone时弹出

> ID：10110481
> 
> 赞同：0
> 
> 时间：2012-04-11T16:55:28.040
> 
> 标签：iphone, xcode, map, annotations

我开发了一些在地图上显示注释的代码。现在的问题是我在地图的一个点上有多个注释（我的 10 种产品）。如果用户触及这一点，我想打开一个新的弹出窗口，其中显示 10 个产品。用户可以从弹出窗口中选择任何产品！我不知道如何实现它。我怎样才能 ？

谁能帮我 ？

这是一个特殊的问题。谁能说在附近点的情况下如何实施？

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T04:37:31.500

看看这个：

[http://cocoacontrols.com/platforms/ios/controls/gikanimatedcallout](http://cocoacontrols.com/platforms/ios/controls/gikanimatedcallout)

# asp.net-mvc - ASP.NET MVC 3 - 将复杂的 JSON 模型发布到行动

> ID：10110482
> 
> 赞同：14
> 
> 时间：2012-04-11T16:55:41.710
> 
> 标签：asp.net-mvc, json, asp.net-mvc-3

我正在尝试将以下 JSON 数据发布到我的控制器上的 Action 方法...

```
{
"Id": "0",
"VendorId": "5",
"FirstName": "g",
"LastName": "g",
"Sex": "m",
"DateOfBirth": "",
"Address": "",
"City": "",
"State": "",
"PostCode": "",
"Country": "",
"Email": "",
"AirportCity": "s",
"AirportState": "s",
"CurrencyCode": "1",
"UsTaxId": "",
"ForeignTaxId": "",
"GstNumber": "",
"TaxExemptCalifornia": false,
"TaxExemptCanada": false,
"DateContracted": "",
"DateTerminated": "",
"TerminationStatus": "",
"FirstSeminarDate": "",
"FirstOnsiteDate": "",
"LastSeminarDate": "",
"DateCertified": "",
"CertificationCall": "",
"CertificationMaterials": "",
"FacultyTrainer": "",
"PassportIssued": "",
"PassportExpired": "",
"TnVisa": false,
"BrochurePermission": false,
"Phones": [{
        "Id": 0,
        "Type": "cell",
        "Number": "222-333-4444",
        "IsPrimary": false
    }, {
        "Id": 0,
        "Type": "home",
        "Number": "333-444-5555",
        "IsPrimary": false
    }
] 
```

}

在这种情况下，重要的部分是最后的“电话”属性。仅供参考：我通过在 javascript 控制台中调用 JSON.stringify(profileData) 获得了我在此处发布的这个 JSON 字符串。在 profileData 中是一个实际的对象。

这是发布帖子的ajax调用...

```
$.ajax({
    url: '/Trainer/SaveProfile',
    type: 'POST',
    dataType: 'json',
    success: function (data) {
        //...
    },
    error: function (jqXHR, textStatus, errorThrown) {
        //...
    },
    data: profileData
}); 
```

profileData 是我在上面发布的 JSON。

这是我使用 AJAX 帖子调用的操作的方法签名...

```
[HttpPost]
public ActionResult SaveProfile(TrainerEditModel model) 
```

这是 TrainerEditModel（对不起，它太大了）...

```
public class TrainerEditModel
{
    public TrainerEditModel()
    {
        Phones = new List<Phone>();
    }

    [Display(Name = "Trainer Id")]
    public Int32 Id { get; set; }

    [Display(Name = "Vendor Id")]
    [Required(ErrorMessage = "Vendor ID is required.")]
    public Int32? VendorId { get; set; }

    [Display(Name = "First Name")]
    [Required(ErrorMessage = "First Name is required.")]
    public String FirstName { get; set; }

    [Display(Name = "Last Name")]
    [Required(ErrorMessage = "Last Name is required.")]
    public String LastName { get; set; }

    public String Address { get; set; }

    public String City { get; set; }

    public String State { get; set; }

    [Display(Name = "Postal Code")]
    public String PostCode { get; set; }

    public String Country { get; set; }

    [DataType(DataType.EmailAddress, ErrorMessage = "Must be a valid email address.")]
    public String Email { get; set; }

    [Display(Name = "Airport City")]
    [Required(ErrorMessage = "Airport City is required.")]
    public String AirportCity { get; set; }

    [Display(Name = "Airport State")]
    [Required(ErrorMessage = "Airport State is required.")]
    public String AirportState { get; set; }

    [Display(Name = "Currency Code")]
    [Required(ErrorMessage = "Currency Code is required.")]
    public String CurrencyCode { get; set; }

    [Display(Name = "US Tax Id")]
    [RegularExpression(@"^\d{3}-\d{2}-\d{4}$|^\d{2}-\d{7}$", ErrorMessage = "US Tax Id must be a valid Social Security Number or Tax ID.")]
    public String UsTaxId { get; set; }

    [Display(Name = "Foreign Tax Id")]
    public String ForeignTaxId { get; set; }

    [Display(Name = "Tax Exempt California")]
    public Boolean TaxExemptCalifornia { get; set; }

    [Display(Name = "Tax Exempt Canada")]
    public Boolean TaxExemptCanada { get; set; }

    [Display(Name = "GST Number")]
    public String GstNumber { get; set; }

    [Display(Name = "Gender")]
    [Required(ErrorMessage = "Gender is required.")]
    public String Sex { get; set; }

    [Display(Name = "Date of Birth")]
    [DataType(DataType.Date, ErrorMessage = "Must be a valid date.")]
    public DateTime? DateOfBirth { get; set; }

    [Display(Name = "Date Contracted")]
    [DataType(DataType.Date, ErrorMessage = "Must be a valid date.")]
    public DateTime? DateContracted { get; set; }

    [Display(Name = "Date Terminated")]
    [DataType(DataType.Date, ErrorMessage = "Must be a valid date.")]
    public DateTime? DateTerminated { get; set; }

    [Display(Name = "Termination Status")]
    public String TerminationStatus { get; set; }

    [Display(Name = "First Seminar Date")]
    [DataType(DataType.Date, ErrorMessage = "Must be a valid date.")]
    public DateTime? FirstSeminarDate { get; set; }

    [Display(Name = "First On Site Date")]
    [DataType(DataType.Date, ErrorMessage = "Must be a valid date.")]
    public DateTime? FirstOnsiteDate { get; set; }

    [Display(Name = "Last Seminar Date")]
    [DataType(DataType.Date, ErrorMessage = "Must be a valid date.")]
    public DateTime? LastSeminarDate { get; set; }

    [Display(Name = "Date Certified")]
    [DataType(DataType.Date, ErrorMessage = "Must be a valid date.")]
    public DateTime? DateCertified { get; set; }

    [Display(Name = "Certification Call")]
    public DateTime? CertificationCall { get; set; }

    [Display(Name = "Certification Materials")]
    public DateTime? CertificationMaterials { get; set; }

    [Display(Name = "Faculty Trainer")]
    public String FacultyTrainer { get; set; }

    [Display(Name = "Passport Issued")]
    public DateTime? PassportIssued { get; set; }

    [Display(Name = "Passport Expired")]
    public DateTime? PassportExpired { get; set; }

    [Display(Name = "TN Visa")]
    public Boolean TnVisa { get; set; }

    [Display(Name = "Brochure Permission")]
    public Boolean BrochurePermission { get; set; }

    public List<Phone> Phones { get; set; }
} 
```

这是在通用列表中使用的电话对象...

```
public class Phone : IHaveAnId
{
    public Int32 Id { get; set; }
    public String Type { get; set; }
    public String Number { get; set; }
    public Boolean IsPrimary { get; set; }

    public virtual Trainer Trainer { get; set; }
} 
```

所以，这就是问题所在。HTTP Post 成功到达 Action 方法，并且除 Phones 之外的所有属性都正确映射。List 对象甚至填充了正确数量的 Phone 对象，但它们的所有字段都具有默认值，即 null 或 0 或 false。所以我不确定我做错了什么，但是当我尝试从 JSON 数组中填充模型中的列表时，我得到了正确数量的空白对象的列表。

有什么想法我在这里做错了吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-11T16:57:22.447

尝试设置正确的内容类型并确保您发送的是真正的 JSON 请求（使用`JSON.stringify`方法）：

```
var profileData = {"Id":"0","VendorId":"5","FirstName":"g","LastName":"g","Sex":"m","DateOfBirth":"","Address":"","City":"","State":"","PostCode":"","Country":"","Email":"","AirportCity":"s","AirportState":"s","CurrencyCode":"1","UsTaxId":"","ForeignTaxId":"","GstNumber":"","TaxExemptCalifornia":false,"TaxExemptCanada":false,"DateContracted":"","DateTerminated":"","TerminationStatus":"","FirstSeminarDate":"","FirstOnsiteDate":"","LastSeminarDate":"","DateCertified":"","CertificationCall":"","CertificationMaterials":"","FacultyTrainer":"","PassportIssued":"","PassportExpired":"","TnVisa":false,"BrochurePermission":false,"Phones":[{"Id":0,"Type":"cell","Number":"222-333-4444","IsPrimary":false},{"Id":0,"Type":"home","Number":"333-444-5555","IsPrimary":false}]}

$.ajax({
    url: '/Trainer/SaveProfile',
    type: 'POST',
    dataType: 'json',
    contentType: 'application/json',
    data: JSON.stringify({ model: profileData }),
    success: function (data) {
        //...
    },
    error: function (jqXHR, textStatus, errorThrown) {
        //...
    }
}); 
```

原生`JSON.stringify`内置于现代浏览器中，但如果您需要支持旧版浏览器，您可以将[json2.js](https://github.com/douglascrockford/JSON-js)脚本包含到您的页面中。

# c# - c#图像坐标处理

> ID：10110486
> 
> 赞同：-1
> 
> 时间：2012-04-11T16:55:56.393
> 
> 标签：c#

如果我们有 2 个相同的图像。一个很小，一个很大。现在我们在小图像上有 xy 值

然后我们将如何将它映射到大图像上的相同位置。谁能用公式告诉我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T16:58:13.273

我想你只是缩放它：

```
int bigX = smallX * (bigWidth / smallWidth);
int bigY = smallY * (bigHeight / smallHeight); 
```

请注意，您可能希望使用浮点运算来避免整数运算问题：

```
int bigX = (int) (smallX * ((double) bigWidth / smallWidth));
int bigY = (int) (smallY * ((double) bigHeight / smallHeight)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:00:46.157

只需使用比例。

```
Point bigpoint = new Point((int)(smallpoint.X * bigwidth/smallwidth), 
             (int)(smallpoint.Y * bigheight/smallheight));

// Assuming that Point smallpoint is the pixel of small image 
```

# sql - 使用多列连接的 SQL Server 更新语句

> ID：10110496
> 
> 赞同：0
> 
> 时间：2012-04-11T16:56:40.737
> 
> 标签：sql, sql-server

这里有点麻烦。

表格1：

```
CID, Name, HID
(001-233, Test1, 12345) 
```

表 2：

```
CID, Name, HID, Primary
(001-233, Test1, 12345, '') 
```

想要使用一个名为的常量值更新`Table2`连接存在的位置`Table1``'Y'`

所以声明如下：

```
UPDATE T2 SET T2.Primary = 'Y'
FROM T2 
INNER JOIN T1 
    ON (T1.CID = T2.CID 
        AND T1.HID = T2.HID) 
```

该语句最终只是更新了所有行，就好像它只在一个 id 上而不是另一个上进行连接？我终于放弃了，`WHERE IN`通过连接两个 ide 字段 CID+HID 使用单个“id”进行子查询。但我想了解为什么使用正确的连接不起作用。

`Table1`是CTE..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:13:13.087

```
update t2 
set (t2.primary) = (select 'Y' from t1 where T1.CID = T2.CID AND T1.HID = T2.HID) 
```

# java - 使用不同的对象作为参数调用相同的方法

> ID：10110498
> 
> 赞同：0
> 
> 时间：2012-04-11T16:56:42.343
> 
> 标签：java

我有一个向服务器发送请求的程序。有许多不同类型的请求，每个都有自己的类。例如，我有一个`checkServerOnlineRequest`向服务器发送一条短消息，或者一个`getAmountOfGoldRequest`发送非常不同的消息。

```
class CheckServerOnlineReq{
    static final byte requestID = 1;
    byte[] message;

    void setMessage(byte messageNumber){
        message = new byte[2];
        message[0] = messageNumber;
        message[1] = requestID;
    }
} 
```

为了发送请求，我有一`Client`堂课。它有一个`static`方法调用`send`，我想接受任何类型的请求（即许多不同的类）

我的问题是，如何设置`send()`'s 参数以允许将任何类型的请求作为参数给出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:59:08.790

您的所有请求类都应该从`Request`您定义的基类扩展。您的静态方法应采用`Request request`. 你的基`Request`类（可能是抽象的，可能实现一个接口——细节取决于具体发生了什么）应该定义请求使用的所有方法，而不管请求的实际类型如何。

如果做不到这一点，你的`send`方法可以接受 type 的参数`Object`，但这真的很糟糕，因为你只能在`Object`没有强制转换的情况下访问方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:00:26.453

规范的方法是声明一个接口，并使具体的请求类实现该接口：

```
public interface IRequest { ... }

public class CheckServerOnlineRequest implements IRequest { ... }
public class GetAmountOfGoldRequest implements IRequest { ... } 
```

然后该`send()`方法可以接受`IRequest`作为其参数。

```
public static void send(IRequest request) { ... } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T17:01:14.347

使所有请求子类/实现一个请求类/接口，并使您的发送方法具有请求作为参数。

例如类 CheckServerOnlineReq 扩展/实现请求..

发送（请求请求）

# php - PHP / RegEx - 通过检测 .com/.net/.org/.edu 等将 URL 转换为链接

> ID：10110505
> 
> 赞同：3
> 
> 时间：2012-04-11T16:57:09.040
> 
> 标签：php, regex, url, hyperlink

我知道有很多问题要求帮助将 URL 转换为字符串中的可点击链接，但我还没有找到我正在寻找的东西。

我希望能够匹配以下任何示例并将它们变成可点击的链接：

```
http://www.domain.com
https://www.domain.net
http://subdomain.domain.org
www.domain.com/folder
subdomain.domain.net
subdomain.domain.edu/folder/subfolder
domain.net
domain.com/folder 
```

我不想匹配 random.stuff.separated.with.periods。

编辑：请记住，这些 URL 需要在较大的“普通”文本字符串中找到。例如，我想在“Hello！Come check out domain.net！”中匹配“domain.net”。

我认为这可以通过一个正则表达式来完成，该表达式可以确定匹配的 url 是否包含 .com、.net、.org 或 .edu，后跟正斜杠或空格。除了用户拼写错误之外，我无法想象在任何其他情况下，一个有效的 URL 会包含其中一个，然后是其他任何内容。

我意识到那里有许多有效的域扩展，但我不需要全部支持。我可以在正则表达式中选择支持 (com|net|org|edu) 之类的内容。不幸的是，我对正则表达式还不够熟练，还不知道如何正确实现这一点。

我希望有人可以帮助我找到一个正则表达式（用于 PHP 的 preg_replace），它可以根据几乎任何由一个或多个点连接的文本匹配 URL，并且以指定扩展名之一结尾，后跟空格或包含一个指定的扩展名后跟一个斜杠和可能的文件夹。

我做了几次搜索，到目前为止还没有找到我要找的东西。如果已经存在回答此问题的 SO 帖子，我深表歉意。

提前致谢。

--- 编辑 3 ---

经过几天的反复试验和 SO 的一些帮助，以下是有效的方法：

```
preg_replace_callback('#(\s|^)((https?://)?(\w|-)+(\.(\w+|-)*)+(?<=\.net|org|edu|com|cc|br|jp|dk|gs|de)(\:[0-9]+)?(?:/[^\s]*)?)(?=\s|\b)#is',
                create_function('$m', 'if (!preg_match("#^(https?://)#", $m[2]))
                return $m[1]."<a href=\"http://".$m[2]."\">".$m[2]."</a>"; else return $m[1]."<a href=\"".$m[2]."\">".$m[2]."</a>";'),
                $event_desc); 
```

这是下面 anubhava 代码的修改版本，到目前为止似乎完全符合我的要求。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T17:12:52.827

您可以使用此正则表达式：

```
#(\s|^)((?:https?://)?\w+(?:\.\w+)+(?<=\.(net|org|edu|com))(?:/[^\s]*|))(?=\s|\b)#is 
```

**代码：**

```
$arr = array(
'http://www.domain.com/?foo=bar',
'http://www.that"sallfolks.com',
'This is really cool site: https://www.domain.net/ isn\'t it?',
'http://subdomain.domain.org',
'www.domain.com/folder',
'Hello! You can visit vertigofx.com/mysite/rocks for some awesome pictures, or just go to vertigofx.com by itself',
'subdomain.domain.net',
'subdomain.domain.edu/folder/subfolder',
'Hello! Check out my site at domain.net!',
'welcome.to.computers',
'Hello.Come visit oursite.com!',
'foo.bar',
'domain.com/folder',

);
foreach($arr as $url) {   
   $link = preg_replace_callback('#(\s|^)((?:https?://)?\w+(?:\.\w+)+(?<=\.(net|org|edu|com))(?:/[^\s]*|))(?=\s|\b)#is',
           create_function('$m', 'if (!preg_match("#^(https?://)#", $m[2]))
               return $m[1]."<a href=\"http://".$m[2]."\">".$m[2]."</a>"; else return $m[1]."<a href=\"".$m[2]."\">".$m[2]."</a>";'),
           $url);
   echo $link . "\n"; 
```

**输出：**

```
<a href="http://www.domain.com/?foo=bar">http://www.domain.com/?foo=bar</a>
http://www.that"sallfolks.com
This is really cool site: <a href="https://www.domain.net">https://www.domain.net</a>/ isn't it?
<a href="http://subdomain.domain.org">http://subdomain.domain.org</a>
<a href="http://www.domain.com/folder">www.domain.com/folder</a>
Hello! You can visit <a href="http://vertigofx.com/mysite/rocks">vertigofx.com/mysite/rocks</a> for some awesome pictures, or just go to <a href="http://vertigofx.com">vertigofx.com</a> by itself
<a href="http://subdomain.domain.net">subdomain.domain.net</a>
<a href="http://subdomain.domain.edu/folder/subfolder">subdomain.domain.edu/folder/subfolder</a>
Hello! Check out my site at <a href="http://domain.net">domain.net</a>!
welcome.to.computers
Hello.Come visit <a href="http://oursite.com">oursite.com</a>!
foo.bar
<a href="http://domain.com/folder">domain.com/folder</a> 
```

**PS：**此正则表达式仅支持 URL 中的 http 和 https 方案。例如：如果你也想支持 ftp，那么你需要稍微修改一下正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:18:29.150

```
'/(http(s)?:\/\/)?[\w\/\.]+(\.((com)|(edu)|(net)|(org)))[\w\/]*/' 
```

这适用于您的示例。您可能希望在最后一个括号中添加对“-”、“&”、“?”、“:”等的额外字符支持。

```
'/(http(s)?:\/\/)?[\w\/\.]+(\.((com)|(edu)|(net)|(org)))[\w\/\?=&-;]*/' 
```

这将支持参数和端口号。

例如：www.foo.ca:8888/test?param1=val1¶m2=val2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T20:22:39.327

万分感谢。我修改了他的最终解决方案以允许所有域（.ca、.co.uk），而不仅仅是指定的域。

```
$html = preg_replace_callback('#(\s|^)((https?://)?(\w|-)+(\.[a-z]{2,3})+(\:[0-9]+)?(?:/[^\s]*)?)(?=\s|\b)#is',
    create_function('$m', 'if (!preg_match("#^(https?://)#", $m[2])) return $m[1]."<a href=\"http://".$m[2]."\" target=\"blank\">".$m[2]."</a>"; else return $m[1]."<a href=\"".$m[2]."\" target=\"blank\">".$m[2]."</a>";'),
    $url); 
```

# javascript - underscore.js - 确定数组数组中的所有值是否匹配

> ID：10110510
> 
> 赞同：19
> 
> 时间：2012-04-11T16:57:41.767
> 
> 标签：javascript, underscore.js

我有一个数组数组，看起来像这样：

```
[["Some string", "Some other string"],["Some third string", "some fourth string"]] 
```

我想我可以使用[Underscore](http://documentcloud.github.com/underscore/#all)`_.all`中的方法来确定是否所有数组都匹配 100%（即它们的所有值都匹配），但我不确定如何编写所需的迭代器来运行检查。

有人有想法吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-11T17:26:09.610

为什么不是交叉路口？（如果你真的想为此使用一些下划线函数） [http://underscorejs.org/#intersection](http://underscorejs.org/#intersection)

如果数组的长度相同，并且交集的长度等于数组的长度，那么它们都包含相同的值。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-01-10T23:40:04.313

我的偏好：

```
_.isEqual(_.sortBy(first), _.sortBy(second)) 
```

如果订单很重要：

```
_(first).isEqual(second) 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-04-11T17:05:49.250

试试这个人（与订单无关）：

```
function allArraysAlike(arrays) {
  return _.all(arrays, function(array) {
    return array.length == arrays[0].length && _.difference(array, arrays[0]).length == 0;
  });
} 
```

这是假设您希望所有数组以彼此~~相同的顺序~~`false`包含所有相同的元素（因此对于您的示例输入，函数应该返回）。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-05-13T02:12:20.277

使用下划线确定两者之间的差异，并检查数组的长度。一个简单的方法是：

```
_.isEmpty(_.difference(array1, array2)) && _.isEmpty(_.difference(array2, array1)) 
```

`true`如果它们相同或不同，这将返回`false`。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-07-22T14:03:37.887

```
_.isEmpty(_.xor(array1, array2)) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-03T07:37:31.397

如果您想检查元素是否相同且顺序相同，我会选择：

```
arrayEq = function(a, b) {
  return _.all(_.zip(a, b), function(x) {
    return x[0] === x[1];
  });
}; 
```

在咖啡脚本中更整洁：

```
arrayEq = (a,b) ->
    _.all _.zip(a,b), (x) -> x[0]==x[1] 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-02-02T13:53:15.823

我使用[http://underscorejs.org/的实现](http://underscorejs.org/)

```
/**
 * Returns true if the arrays are equal
 *
 * @param {Array} array1
 * @param {Array} array2
 * @returns {boolean}
 */
equal: function ( array1, array2 )
{
    return ( array1.length === array2.length)
        && (array1.length === _.intersection( array1, array2 ).length);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-12T23:52:33.187

如果您不需要知道*哪些*元素不相等，请使用传递性：

```
function allEqual(list) {
  return _.all(list.slice(1), _.partial(_.isEqual, list[0]));
}
allEqual([2, 2, 2, 2]) //=> true
allEqual([2, 2, 3, 2]) //=> false
allEqual([false])      //=> true
allEqual([])           //=> true 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-03-04T15:24:38.723

我无法评论 Dan Tao 的回答，小改动跳过了对自身的第一个数组检查（不必要的 _.difference 调用）

```
function allArraysAlike(arrays) {
    return _.all(arrays, function(array) {
        if(array === arrays[0]) return true;
        return array.length == arrays[0].length && _.difference(array, arrays[0]).length == 0;
    });
} 
```

# java - ant javadoc 不构建

> ID：10110517
> 
> 赞同：1
> 
> 时间：2012-04-11T16:58:09.247
> 
> 标签：java, ant

这是我第一个部署 ant 的 java 项目。我必须尽快提交我的代码，并且没有时间为 Ant 做 Hello World 之类的事情。在做了一些谷歌之后，我试图为我的项目制作一个 build.xml，但现在我被卡住了！

ant javadoc 对我不起作用。以下是给出命令时显示的错误：ant javadoc -debug

```
Attempting to create object of type org.apache.tools.ant.helper.DefaultExecutor
Adding reference: ant.executor

BUILD FAILED
Target "javadoc" does not exist in the project "Ant-Test".
    at org.apache.tools.ant.Project.tsort(Project.java:1912)
    at org.apache.tools.ant.Project.topoSort(Project.java:1820)
    at org.apache.tools.ant.Project.topoSort(Project.java:1783)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExe
cutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    at org.apache.tools.ant.Main.runBuild(Main.java:811)
    at org.apache.tools.ant.Main.startAnt(Main.java:217)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)

Total time: 0 seconds 
```

我创建了所有四个类的包

```
package org.acrusys.customers; 
```

最后但并非最不重要的是目录结构

```
Directory of C:\Users\Salman\JavaWorkspace\Arcusys\src\org\acrusys\customers

04/11/2012  07:40 PM    <DIR>          .
04/11/2012  07:40 PM    <DIR>          ..
04/11/2012  06:20 PM               757 AllCustomers.class 
04/11/2012  12:22 PM               520 AllCustomers.java
04/11/2012  07:40 PM    <DIR>          build
04/11/2012  07:30 PM             1,746 build.xml
04/11/2012  03:09 PM    <DIR>          classes
04/11/2012  06:20 PM             1,470 Customer.class
04/11/2012  05:27 PM             1,456 Customer.java
04/11/2012  06:20 PM             1,396 CustomerFullAddress.class
04/10/2012  11:55 PM             1,343 CustomerFullAddress.java
04/11/2012  06:20 PM             2,890 CustomerMain.class
04/11/2012  06:19 PM             2,392 CustomerMain.java
04/11/2012  07:40 PM    <DIR>          dist
04/11/2012  07:40 PM    <DIR>          docs
04/11/2012  06:55 PM    <DIR>          src 
```

这是Javadoc（我最初忘记粘贴它）

```
<target name="docs" depends="compile">
<javadoc packagenames="org.acrusys.customers.*" sourcepath="${src.dir}"    destdir="${docs.dir}">
<!-- Define which files / directory should get included, we include all -->
<fileset dir="${src.dir}">
<include name="**" />
</fileset>
</javadoc>
</target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:22:14.197

这段代码对我有用。我在这里只给出你需要使用这个目标的目标。

```
<target name="docs" depends="compile">
    <javadoc packagenames="src" sourcepath="${src.dir}" destdir="${docs.dir}">
      <!-- Define which files / directory should get included, we include all -->
       <fileset dir="${src.dir}">
                <include name="**" />
           </fileset>
    </javadoc>
  </target> 
```

运行此目标后，您会将所有文档放入您的 doc 文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:12:46.417

[Javadoc](http://en.wikipedia.org/wiki/Javadoc)通常与您以注释形式写入代码的文档相关联，并自动提取到 HTML 文件中。

尝试运行：ant jar

您在构建文件中指定的目标是“jar”。这不会解决您的所有问题，因为我看不到您的编译目标。似乎您的源代码位于错误的位置（它应该位于 src 目录中，在正确的包结构下），并且构建的 .class 文件也没有在 build 目录中结束。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T17:30:03.140

你在做什么：

```
$ ant javadoc 
```

或者

```
$ ant docs 
```

你的目标名称是`docs`而不是`javadoc`。你应该做后者。

# php - 如何使用 Wideimage 将图像上传到 Amazon S3

> ID：10110525
> 
> 赞同：1
> 
> 时间：2012-04-11T16:58:30.527
> 
> 标签：php, amazon-s3

我正在使用[Amazon SDK for PHP](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#m=AmazonS3/create_object)和[wideimage](http://wideimage.sourceforge.net/wp-content/current/doc/WideImage/WideImage_Image.html#methodresize)。我正在使用宽幅图像调整图像大小，然后尝试将该调整大小的图像上传到 Amazon S3。

```
$resized = $image->resize($width,$height); 
```

上传

```
$response = $s3->create_object($myBucket, $newFilename, array(
    'fileUpload' => $resized, //this does not work          
)); 
```

有谁知道这样做的正确方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:21:22.860

您可以使用流包装器并使用 WideImage 的 saveToFile 方法。S3 有许多流包装器，这是一个示例：[https](https://github.com/jakajancar/S3StreamWrapper) ://github.com/jakajancar/S3StreamWrapper 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T02:48:28.767

您无需保存图像然后从那里上传。

调整图像大小时，必须转换为字符串。您可以使用 WideImage 类来做到这一点。

例子：

```
$image = WideImage::load($_FILES["file"]['tmp_name']);
$resized = $image->resize(1024);
$data = $resized->asString('jpg'); 
```

然后当你在亚马逊上上传时，你必须使用参数'body'而不是'fileUpload'。

例子：

```
$response = $s3->create_object($myBucket, $newFilename, array(
'body' => $data, 
```

));

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-31T20:13:16.167

我想指出一些事情可能会帮助某人做出选择。

首先，我认为您最好先尝试在服务器上调整图像大小，然后将其移动到亚马逊，因为假设如果有某种方法可以同时调整大小和上传图像，那么您的脚本将执行缓慢，因为脚本必须调整大小并将其保存到目的地很远的服务器。如果图像很少，这将是次要的，但是当它即使在高速带宽上进行巨大的调整大小时也可能是一个问题，因为 PHP 将无法释放其用于调整图像大小的资源，直到它没有完全保存目标图像。

其次，如果您使用 CDN（内容交付网络），那么 CDN 使用**PULL SERVER**技术意味着我们不会将静态内容推送到 CDN 服务器，但是当用户/客户端请求静态内容时，CDN 首先检查其整个服务器，如果没有找到然后它询问我们的主服务器。

***Amazon S3**不是真正的 CDN*。S3 专为内容存储而设计。用于内容交付的正确 Amazon 服务是[**Amazon CloudFront**](http://aws.amazon.com/cloudfront/)。如果我们将文件保存到我们的任何文件到任何存储服务器或 CDN，那么这称为**PUSH SERVER**

可以在[http://www.binarymoon.co.uk/2010/11/timthumb-cdn-amazon-s3-good/](http://www.binarymoon.co.uk/2010/11/timthumb-cdn-amazon-s3-good/)上阅读详尽的文章。这实际上是关于 TimThumb 但值得深入了解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T22:45:05.213

我最终将文件保存到服务器，然后从那里上传文件。如果有更好的方法，请告诉我。

# java - 在Android中根据TextView中的文本更改背景

> ID：10110528
> 
> 赞同：0
> 
> 时间：2012-04-11T16:58:41.313
> 
> 标签：java, android

我正在尝试根据文本视图中的内容来更改布局的背景。我知道如何在 Java 中设置背景：

```
mainbg.setBackgroundResource(R.drawable.erburrows); 
```

但是如果我将该调用包装在 if 语句中，则什么也不会发生。没有错误标志或任何东西，它只是在后台不显示任何东西。这是我正在使用的代码：

```
 //--- BACKGROUND CHANGE ---
    String tvString = showBook.getText().toString();
    bookDisp.setText(tvString);
    View mainbg = bgview.getRootView();
    if(bookDisp.equals("Green Eggs")){
    mainbg.setBackgroundResource(R.drawable.seuss);
    }else if (bookDisp.equals("Tarzan")){
        mainbg.setBackgroundResource(R.drawable.erburrows);
    }

    //--- END BACKGROUND CHANGE --- 
```

知道为什么它不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:07:43.680

您正在设置文本`bookDisp`（我猜这是`TextView`），然后不是使用其中的文本，而是在object( ) 和将失败的测试`TextView`之间进行比较。您可能想要这样做：`TextView``bookDisp``String`

```
if(tvString.equals("Green Eggs")){
    mainbg.setBackgroundResource(R.drawable.seuss);
    }else if (tvString.equals("Tarzan")){
        mainbg.setBackgroundResource(R.drawable.erburrows);
    }
//... 
```

if`tvString`是来自目标的文本`TextView`或获取字符串：

```
bookDisp.getText().toString() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:07:34.870

尝试：

```
mainbg.setBackgroundDrawable(getResources().getDrawable(R.drawable.erburrows)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T17:48:05.837

```
if(bookDisp.equals("Green Eggs")){
    mainbg.setBackgroundResource(R.drawable.seuss);
    }else if (bookDisp.equals("Tarzan")){
        mainbg.setBackgroundResource(R.drawable.erburrows);
    } 
```

用下面的代码替换上面的代码并尝试:::

```
if(bookDisp.getText().toString().equals("Green Eggs")){
    mainbg.setBackgroundResource(R.drawable.seuss);
    }else if (bookDisp.getText().toString().equals("Tarzan")){
        mainbg.setBackgroundResource(R.drawable.erburrows);
    } 
```

# android - Android：无法使用 sharedpreferences 从首选项 xml 文件加载默认值

> ID：10110531
> 
> 赞同：0
> 
> 时间：2012-04-11T16:58:45.340
> 
> 标签：android, sharedpreferences, default-value, android-preferences

尝试从preference.xml 文件加载默认值。并使用 sharedpreferences 加载它们，但 xml 文件中的 defaultValues 不会为我加载。这是我的代码。

/res/xml/prefs.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" android:key="prefs" android:title="prefs">
        <Preference android:key="bild" android:title="bild" android:defaultValue="This is bild,0,false"/>
        <Preference android:key="bild2" android:title="bild2" android:defaultValue="This is bild2,1,false"/>
        <Preference android:key="bild3" android:title="bild3" android:defaultValue="This is bild3,2,false"/>
    </PreferenceScreen> 
```

和Android代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);
    PreferenceManager.setDefaultValues(this, R.xml.prefs, false);
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
    String picture = prefs.getString("bild", "dosen't exist");
    Log.e("test", "This is the picture Value: " + picture);
} 
```

它总是打印“dosent't exist”，这意味着在这个例子中它没有正确加载？并且无法弄清楚为什么会这样。

任何帮助将不胜感激，谢谢

/艾多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:05:40.333

根据[这个](https://stackoverflow.com/questions/6125296/delete-sharedpreferences-file)问题，您共享首选项文件的位置是错误的。另外，如果我没记错（感觉不太好，所以可能记错了），如果你想读取带有键值对的文件，最好将它们放在 assets 文件夹中并从那里读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T18:58:19.610

*我认为将首选项保存在prefs.xml*中没有任何问题。在重新创建你的代码并稍微修改它之后，我不得不怀疑普通的*<Preference>-Tag*代替：

*字符串.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="app_name">TestPreference</string>
    <string name="action_settings">Settings</string>

    <string name="pref_header_1">Preference Category</string>

    <string name="pref_default_1">Image 1</string>
    <string name="pref_default_2">Image 2</string>

    <string name="pref_title_1">Title 1</string>
    <string name="pref_title_2">Title 2</string>
    <string name="pref_title_3">Title 3</string>

    <string name="pref_key_1">pref_key_1</string>
    <string name="pref_key_2">pref_key_2</string>
    <string name="pref_key_3">pref_key_3</string>

    <string-array name="pref_entries_3">
        <item>One</item>
        <item>Two</item>
        <item>Five</item>
    </string-array>
    <string-array name="pref_values_3">
        <item>1</item>
        <item>2</item>
        <item>3</item>
    </string-array>
</resources> 
```

*偏好.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <PreferenceCategory android:title="@string/pref_header_1" >
        <Preference
            android:defaultValue="@string/pref_default_1"
            android:key="@string/pref_key_1"
            android:title="@string/pref_title_1" />

        <EditTextPreference
            android:defaultValue="@string/pref_default_2"
            android:key="@string/pref_key_2"
            android:title="@string/pref_title_2" />

        <ListPreference
            android:defaultValue="1"
            android:entries="@array/pref_entries_3"
            android:entryValues="@array/pref_values_3"
            android:key="@string/pref_key_3"
            android:negativeButtonText="@null"
            android:positiveButtonText="@null"
            android:title="@string/pref_title_3" />
    </PreferenceCategory>

</PreferenceScreen> 
```

*MainActivity.java*

```
private Logger log = LoggerFactory.getLogger(getClass());

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Get default preferences and load default values
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
    PreferenceManager.setDefaultValues(this, R.xml.preference, false);

    // Check if keys exist in sharedPreferences
    log.debug("Contains keys #1: {}; #2: {}; #3: {}", new Object[] {
            prefs.contains(getString(R.string.pref_key_1)),
            prefs.contains(getString(R.string.pref_key_2)),
            prefs.contains(getString(R.string.pref_key_3))
    });

    // Get preferences values
    String value1 = prefs.getString(getString(R.string.pref_key_1), "not found");
    String value2 = prefs.getString(getString(R.string.pref_key_2), "not found");
    String value3 = prefs.getString(getString(R.string.pref_key_3), "not found");
    log.debug("Values #1: {}; #2: {}; #3: {}", new Object[] { value1, value2, value3 });

    // prefs.edit().putString(getString(R.string.pref_key_1), getString(R.string.pref_default_1)).apply();
} 
```

*记录结果*

```
"Contains keys #1: false; #2: true; #3: true"
"Values #1: not found; #2: Image 2; #3: 1" 
```

# 结论

如果您希望某个首选项是用户可编辑的，您可能最好使用**具体的首选项**，例如 EditTextPreference、ListPreference、CheckboxPreferencete（[在此处查看](http://developer.android.com/reference/android/preference/Preference.html)适合您需要的子类的完整列表。

如果出于某种原因您仍然想要要使用普通首选项，我想您必须像这样手动加载它们：

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
        prefs.edit().putString(getString(R.string.pref_key_1), getString(R.string.pref_default_1)).apply(); 
```

# android - android从一个activity绑定到一个服务来获取一个填充的hashmap

> ID：10110533
> 
> 赞同：0
> 
> 时间：2012-04-11T16:58:49.477
> 
> 标签：android, service

您是否建议使用下面博客中提到的步骤绑定到正在运行的服务？我需要一种方法来从我的服务中获取填充的哈希图。

[http://www.ozdroid.com/#!BLOG/2010/12/19/How_to_make_a_local_Service_and_bind_to_it_in_Android](http://www.ozdroid.com/#!BLOG/2010/12/19/How_to_make_a_local_Service_and_bind_to_it_in_Android)

我不想使用和返回数据库，而是想返回一个哈希图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:42:46.083

I think I can use what is described below

[http://developer.android.com/guide/topics/fundamentals/bound-services.html](http://developer.android.com/guide/topics/fundamentals/bound-services.html)

# php - 用 PHP 显示 MSQL。想要将选定的行移动到另一个 sql 表并从现有表中删除

> ID：10110534
> 
> 赞同：3
> 
> 时间：2012-04-11T16:58:58.043
> 
> 标签：php, mysql, html

我正在为我的部门设计一个移动帮助台系统。我目前有一个将数据提交到 MySQL 表的 HTML 表单。然后，我将该表格显示在单独的页面上，每行旁边都有复选框。目前，完整按钮被编码为简单地删除任何已检查的记录。但是，按下此按钮似乎什么也没做。我想知道我做错了什么。

这是代码：

```
<?php
$host="localhost";
$username="root";
$password="";
$db_name="opentix";
$tbl_name="opentix";

//Connect and Select
mysql_connect("$host","$username","$password") or die("Cannot Connect");
mysql_select_db("$db_name")or die("Cannot Select Database");

$sql="SELECT * FROM $tbl_name";
$result=mysql_query($sql);

$count=mysql_num_rows($result);

?>

<table width="400" border="0" cellspacing="0" cellpadding="0">
<tr>
    <td><form name="OpenTickets" method="post" action"">
<table width="400" border="0" cellspacing="3" cellpadding="0" bgcolor="#CCCCCC">
<tr>
<td bgcolor="#FFFFFF"></td>
<td align="center" colspan="15" bgcolor="#FFFFFF"><strong>Open Tickets</strong>
</td>
</tr>
<tr>
    <td align="center" bgcolor="#FFFFFF"><strong></stong></td>
    <td align="center" bgcolor="#FFFFFF"><strong>Ticket Number</stong></td>
    <td align="center" bgcolor="#FFFFFF"><strong>Time Created</stong></td>
    <td align="center" bgcolor="#FFFFFF"><strong>Room</stong></td>
    <td align="center" bgcolor="#FFFFFF"><strong>If Other</stong></td>
    <td align="center" bgcolor="#FFFFFF"><strong>Problem Type</stong></td>
    <td align="center" bgcolor="#FFFFFF"><strong>Machine Name</stong></td>
    <td align="center" bgcolor="#FFFFFF"><strong>Operating System</stong></td>  
    <td align="center" bgcolor="#FFFFFF"><strong>Problem Description</stong></td>
    <td align="center" bgcolor="#FFFFFF"><strong>Troubleshooting</stong></td>
    <td align="center" bgcolor="#FFFFFF"><strong>Request</stong></td>
    <td align="center" bgcolor="#FFFFFF"><strong>Email</stong></td>
</tr>

<?php
while($rows=mysql_fetch_array($result)){
    ?>
<tr>
    <td><input name="checkbox[]" type="checkbox" id="checkbox[]" value="<? echo $rows['tixnum']; ?>".</td>
    <td bgcolor="#FFFFFF"><? echo $rows['tixnum']; ?></td>
    <td bgcolor="#FFFFFF"><? echo $rows['timecreated']; ?></td>
    <td bgcolor="#FFFFFF"><? echo $rows['Room']; ?></td>
    <td bgcolor="#FFFFFF"><? echo $rows['Other']; ?></td>
    <td bgcolor="#FFFFFF"><? echo $rows['Type']; ?></td>
    <td bgcolor="#FFFFFF"><? echo $rows['Name']; ?></td>
    <td bgcolor="#FFFFFF"><? echo $rows['System']; ?></td>
    <td bgcolor="#FFFFFF"><? echo $rows['Problem']; ?></td>
    <td bgcolor="#FFFFFF"><? echo $rows['Troubleshooting']; ?></td>
    <td bgcolor="#FFFFFF"><? echo $rows['Request']; ?></td>
    <td bgcolor="#FFFFFF"><? echo $rows['Email']; ?></td>
</tr>
<?php
}
?>
<tr>
    <td colspan="15" align="center" bgcolor="#FFFFFF"><input name="complete" type ="submit" id="complete" value="Complete"></td>
</tr>
<?php
    if($complete){
        for($i=0;$i<$count;$i++){
            $del_id = $checkbox[$i];
            $sql = "DELETE FROM opentix WHERE id='$del_id'";
            $result = mysql_querry($sql);
        }
if($result){
    echo"<meta http-equiv=\"refresh\"content=\"0;URL=pcsehelpdesk\completeopen.php\">";
}
}
mysql_close();
?>

</table>
</form>
</td>
</tr>
</table> 
```

任何对我做错的事情的投入都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:07:16.527

看起来您需要告诉表单发布给自己。将此添加到您的标签中：

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" 
```

更多阅读：http: [//tycoontalk.freelancer.com/php-forum/51903-php-self-submitting-form.html](http://tycoontalk.freelancer.com/php-forum/51903-php-self-submitting-form.html)

# jquery - jQuery 手风琴，简约风格 - 无边距和 1px 或无边框

> ID：10110535
> 
> 赞同：0
> 
> 时间：2012-04-11T16:58:59.487
> 
> 标签：jquery, border, accordion, margin

首先，边距：手风琴对象到外部 div 的边距似乎总是 7px 10px（即使使用“fillSpace: true”），我似乎无法删除它们。有办法吗？

删除边距后，我需要完全删除手风琴的外边框，因为手风琴外部的 div 已经有边框（或者我最终会出现双边框）。

最后，默认情况下，手风琴在每个选项卡周围都有一个边框。这意味着在两个选项卡相交的地方，您有双边框，以及它们之间的 1px 空间。这个外观对我来说并不吸引人，所以我想删除这 2 个边框 + 1px 空间，并用一个简单的 1px 边框替换它们。

有没有人知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:00:13.910

事实上，高坤是对的。这都是关于 CSS 的。我无法更早地删除边距，因为边距只是因为父元素而存在。

# php - SOAP PHP 客户端返回缺少的参数，但soapUI 工作正常

> ID：10110536
> 
> 赞同：0
> 
> 时间：2012-04-11T16:59:08.450
> 
> 标签：php

我创建了以下 php soap 客户端，该服务继续报告缺少或无效的 adminPassword、版本。当我使用soapUI时，传递的方法和参数工作正常，所以不确定为什么php客户端不起作用。

我还收到一条通知消息，所以不确定这是否与它有关“注意：第 5 行 stdClass 上 /var/www/html/index.php 中的数组到字符串转换”

响应： ( [method] => getUsageReport_v1 [statusCode] => GEN006 [statusMessage] => 以下必需参数缺失或无效：adminPassword,version. [version] => 1.0 [monthlyReceiveReports] => [monthlySendReports] => [接收报告] => [发送报告] => )

客户端（屏蔽 adminId 和 adminPassword）：

```
$client = new SoapClient("https://www.efaxcorporate.com/corp/services/CorpAdmin?wsdl");
$parm = array("adminId" => "*****","version" => "1.0", "adminPassword" => "***",);
print_r($client->getUsageReport_v1(array($parm))); 
```

感谢您对此的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T00:18:18.740

我相信您缺少用户名：

```
<wsdl:message name="getUsageReport_v1Request">
<wsdl:part name="adminId" type="xsd:string"/>
<wsdl:part name="adminUserName" type="xsd:string"/>
<wsdl:part name="adminPassword" type="xsd:string"/>
<wsdl:part name="version" type="xsd:string"/>
</wsdl:message> 
```

# matlab - 使用命令从 matlab 外部打开文件

> ID：10110538
> 
> 赞同：0
> 
> 时间：2012-04-11T16:59:13.960
> 
> 标签：matlab

我正在尝试做 !ce-04.doc 工作正常，但文件名不会相同，因为它是用户指定的，所以我必须执行以下操作。

```
fname = 'ce-04.doc'
str = ['!',nameString];
str; 
```

尝试这个没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:03:21.733

而不是`!command`，你可以这样做`system('command');`，所以尝试：

```
system(nameString) 
```

# web2py - web2py：加密上传的文件

> ID：10110544
> 
> 赞同：1
> 
> 时间：2012-04-11T16:59:56.860
> 
> 标签：web2py

我正在用 web2py 编写医疗保健应用程序，它需要符合 HIPAA。许多要求之一是对患者识别数据进行加密。我需要最好使用 AES 加密上传的文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T15:45:39.043

您可以使用许多 python 加密库：

pycrypto [https://www.dlitz.net/software/pycrypto/doc/](https://www.dlitz.net/software/pycrypto/doc/) pyopenssl [http://pyopenssl.sourceforge.net/](http://pyopenssl.sourceforge.net/) （包装 openssl） pyNSS（包装 NSS）

如果您真的关心密码完整性，我会坚持使用符合 FIPS 或 NSA Suite B 的密码库。还有一些基于 C/C++ 的专有密码库。您始终可以使用 python ctypes 或 SWIG 来包装它们。

# html - IE7 IE8 IE9 颜色：透明属性

> ID：10110547
> 
> 赞同：0
> 
> 时间：2012-04-11T17:00:12.503
> 
> 标签：html, css, internet-explorer-9

我可能没有足够的信息来在这里生成一个完整的问题，但如果有人有想法或需要更多信息，我会试一试，我会尽可能多地获取信息。

我正在处理一些我没有编写的代码中的问题。该页面使用 javascript 日期选择器并将该日期放入输入框中。跟踪代码并点击 f12 我将属性从

```
 style="color:transparent" 
```

到

```
 style="color:black" 
```

我可以看到输入字段的日期。

但是，透明文本只出现在 IE9 中，并且在 IE7 和 IE8 中正确显示。所以我有一个解决这个问题的方法，但我的问题是，在造成这种情况之前，是否有人遇到过这个问题。如果要归咎于 IE 版本之间的差异，是否有办法使用样式表使其在所有版本中都能正常工作，因为更改源代码充其量是危险的，我正在尝试找到一种方法来对此进行更改而不更改页面.

感谢您的任何意见或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:05:54.130

原因是 IE7 和 IE8 显然不支持`color: transparent`，而 IE9 支持。据我所知，IE9 是正确的，而 IE7 和 IE8 是错误的，而不是相反。

对我来说，“最好的”解决办法是改变来源。我不确定您要如何“在不更改页面的情况下”修复任何内容，您必须进行一些更改。

如果您真的不会更改日期选择器的来源，则可以将`!important`其用作最后的手段。

```
<some selector>{
    color: black !important;
} 
```

# php - PHP：使用 POST/AJAX 取消正在运行的脚本？

> ID：10110554
> 
> 赞同：1
> 
> 时间：2012-04-11T17:00:28.420
> 
> 标签：php, jquery, process

我的 php 脚本使用 php simplehtmldom 来解析 html 并获取我想要的所有链接和图像，这可以运行一段时间，具体取决于要下载的图像数量。

我认为在这种情况下允许取消是个好主意。目前我使用 Jquery-Ajax 调用我的 php，我能找到的最接近的是 php register_shutdown_function 但不确定它是否适用于我的情况。有任何想法吗？

那么php一旦启动就不能被打扰了？像再次触发 ajax 来调用同一个 php 文件的退出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:13:58.167

这仅在您通过 AJAX 处理大量数据负载的情况下才有用。对于其他情况，只需在 JS 中处理，取消后不显示结果。

但正如我所说，如果您正在处理大量数据，那么您可以在运行脚本的每 n 步中添加一个中断条件，并使用另一个脚本来满足该条件。例如你可以使用一个文件来存储一个中断数据，或者 MySQL MEMORY 表。

例子。

1、process.php（ajax脚本处理数据负载）

```
// clean up previous potential interrupt flag
$fileHandler = fopen('interrupt_condition.txt', 'w+');
fwrite($fileHandler, '0');
fclose($fileHandler);

function interrupt_check() {
   $interruptfile = file('interrupt_condition.txt');
   if (trim($interruptfile[0]) == "1") {    // read first line, trim it and parse value - if value == 1 interrupt script
      echo json_encode("interrupted" => 1);
      die();
   }
}

$i = 0;
foreach ($huge_load_of_data as $object) {
   $i++;
   if ($i % 10 == 0) { // check for interrupt condition every 10th record
      interrupt_check();
   }

   // your processing code
}
interrupt_check(); // check for last time (if something changed while processing the last 10 entries) 
```

2、interrupt_process.php（将取消事件传播到文件的ajax脚本）

```
$fileHandler = fopen('interrupt_condition.txt', 'w+');
fwrite($fileHandler, '1');
fclose($fileHandler); 
```

这肯定会影响脚本的性能，但会使您成为关闭执行的后门。这是一个非常简单的示例 - 您需要使其更复杂以使其同时为更多用户工作，等等。

您还可以使用**MySQL MEMORY Table**、**MEMCACHE - 非持久缓存服务器**或任何您能找到的非持久存储。

# c++ - 我想在while循环c ++中将计数器加一

> ID：10110556
> 
> 赞同：0
> 
> 时间：2012-04-11T17:00:36.367
> 
> 标签：c++, loops, counter

我正在尝试将我的游戏中的圈数计数器增加一，但因为我必须将此代码放入游戏循环中，所以我的计数器每次都会增加约 500，而不是向上移动一。这是我的代码。该`checkpointPassed`变量仅在通过检查点时为真。我知道这可行，检查点编号是当前检查点，它们从 0 开始。

```
if(checkpointNumber == 0 && checkpointPassed == true)
{
    lapNumber += 1;
} 
```

我无法发布游戏循环，因为它非常大。

任何帮助表示赞赏。

**编辑**

这是更多代码，因此您可以看到我要做什么。

```
if(distance > carRadius && markerCounter < 5000)
{
    if(checkpointPassed == true)
    {
        markerCounter++;
    }
}
if(checkpointNumber == 0 && checkpointPassed == true)
{
    lapNumber += 1;
}
if(distance < carRadius)
{
    markerCounter++;
    cross->SetX(checkpointX);
    cross->SetY(checkpointY);
    cross->SetZ(checkpointZ);
    checkpointNumber += 1;
    checkpointPassed = true;
}
if(markerCounter > 4999)
{
    checkpointPassed = false;
    cross->SetPosition(0,-50,0);
    markerCounter = 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:07:17.783

添加另外两个名为 的变量`inCheckpoint`，它存储用户当前是否在检查点“内部”。这允许您检测用户何时进入检查点并仅增加`lapNumber`then。代码如下所示：

```
if(checkpointNumber == 0 && checkpointPassed == true)
{
    if (inCheckpoint == false) /* previously not inside a checkpoint */
        lapNumber += 1;
    inCheckpoint = true;
}
else
{
    inCheckpoint = false;
} 
```

更新：不要依赖`checkpointPassed`：

```
if(distance < carRadius)
{
    if (inCheckpoint == false) /* previously not inside a checkpoint */
        lapNumber += 1;
    inCheckpoint = true;
}
else
{
    inCheckpoint = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:03:43.617

您可以设置/传递一个 gueard 值，该值指示您在游戏循环中的迭代次数（或者这是否是第一次迭代）。如果是第一次迭代（在当前圈内），像现在一样增加变量，否则不要

您需要为每一圈重新设置此保护值——例如，在您增加之后`lapNumber`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T17:06:02.200

您可能需要取消“checkpointPassed”状态。

```
if (checkpointNumber == 0 && checkpointPassed == true)
{
    lapNumber += 1;
    checkpointPassed = false;
} 
```

这意味着在下一次通过检查点之前，您不会再次计算圈数，这大概是您需要计算圈数的时候。

但是，如果您`checkpointPassed`在循环的后面需要 true ，那么您需要考虑是否需要另一个变量，例如`lapCounted`，它被设置为`false`when`checkpointPassed`被设置为`true`，并由上面的代码重置为`true`（而不是设置`checkpointPassed`，而不是以及设置它）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T17:07:35.510

如果我正确理解您所说的话，您的“if”语句在主循环内，当您通过检查点时，“checkpointPassed”变为真。多长时间？

如果它在几次迭代中保持“真”，那么每次你的游戏循环进行迭代时，你的圈数计数器都会增加。在这种情况下，您应该在迭代结束时将 checkPointPassed 设置为 false，或者使用不同的变量，在 checkPointPassed 在递增后变为 true 和 false 的同时设置为 true。

如果这不能回答您的问题，您能否提供更多上下文，因为只有这部分代码，很难弄清楚您想要做什么。

# asp.net - 如何在 asp.net 中获取搜索引擎中使用的关键字

> ID：10110558
> 
> 赞同：1
> 
> 时间：2012-04-11T17:00:51.430
> 
> 标签：asp.net

嗨，我如何使用在搜索引擎中输入的关键字，然后使用 asp.net webform 导航到我的网站？请帮助我谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:58:47.407

获取推荐人 - 如果是谷歌，他们使用的关键字在网址中

例如在您的代码中

```
string referrer = Request.ServerVariables("HTTP_REFERER"); 
```

如果它来自谷歌，则推荐人将类似于
[https://www.google.co.uk/search?sourceid=chrome&ie=UTF-8&q=serverVariables](https://www.google.co.uk/search?sourceid=chrome&ie=UTF-8&q=serverVariables)

您可以在其中看到 &q 参数并将其删除。

# php - 定义 2 个连接对象的结果的类

> ID：10110560
> 
> 赞同：1
> 
> 时间：2012-04-11T17:00:59.133
> 
> 标签：php, oop, object

我有三个类来定义对象`Users`：`Members`和`Projects`。

*   该类定义了详细信息，`User`例如和 。`id``email_address``name`
*   `Member`该类定义了诸如`id`、`user_id`和 之类`project_id`的细节`datetime_accepted`。
*   `Project`该类定义了诸如`id`和-之类的细节，`title`但这并不重要。

该系统具有`Users`和`Projects`。A`Member`是一个`User`工作在 a 上`Project`。换句话说，`Member`类定义了两个对象之间的链接。

**我的问题是这样的：**

我想获取属于某个项目的成员列表，并且我想从我的结果集中的两个类（`Member`和`User`- 例如`User`:`name`和`Member`: ）中收集变量。`datetime_accepted`

我是否需要定义一个包含两个类的所有变量的新类，或者是否有其他更有效的结构可以用来以面向对象的方式巧妙地处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:06:20.050

您可以通过以下方式轻松地将 StdObject 转换为数组：

```
$result = array_merge((array)$user, (array)$member); 
```

那么你将有一个你需要的变量数组。将此添加到 Project 类中的新函数中，或考虑使用 Member 作为 User 类的子级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:22:08.787

我最终解决这个问题的方法`Project`是`User`在`Member`. 对象是在构造成员时创建的。工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:33:51.343

使用 Active Record 模型时，您通常会在一个对象中使用一个方法来获取相关对象。如果您想将 SQL 简化为一个查询，那么您将远离 Active Record 模型。这很好，它只是改变了你解决问题的方式。

我过去所做的是两种方法之一：

1.  例如，要将“虚拟属性”添加到 AR，我的登录（用户）类有一个属性“角色”，该属性由 JOIN 在其标准加载查询中填充。

2.  创建一个我为更复杂的情况扩展的报告对象。Report 子类有一个属性，即多表查询，以及表示 WHERE 子句参数的其他属性。该类生成一个数组数组。

# c++ - 在其构造函数的成员初始化列表中使用对对象的引用

> ID：10110565
> 
> 赞同：4
> 
> 时间：2012-04-11T17:01:13.560
> 
> 标签：c++, constructor, pass-by-reference

是否可以在其构造函数的成员初始化列表中传递对对象（类型）的引用，以便按如下`Container`方式初始化成员：（ [ideone](http://ideone.com/6iv41)上的代码）。`Container`

```
#include <cstdlib>
#include <iostream>

struct Container;

struct Member
{
    Member( Container& container ) : m_container( container )
    {
    }

    Container& m_container;
};

struct Container
{
    Container() : m_member( *this )
    {
    }

    Member m_member;
};

int main()
{
    Container c;
    return EXIT_SUCCESS;
} 
```

代码可以编译，但我不确定它是否标准。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T17:03:59.040

没关系; 成员引用被初始化为引用作为参数传递的对象。

但是，由于`Container`仍在构建中，因此您不能在该构造函数中访问它；对引用唯一能做的就是初始化另一个引用。

You must also make sure that you don't use that reference after the container is destroyed. In this example, it's fine - `m_member`, and the reference it contains, are destroyed along with the container.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T17:04:02.933

That's ok, **but** do note that `container` in `Member`'s constructor is not completely constructed yet, so you can't do anything with it except store that reference.

# java - 发生碰撞时从 LinkedHashMap 检索元素的时间复杂度是多少？

> ID：10110568
> 
> 赞同：2
> 
> 时间：2012-04-11T17:01:21.010
> 
> 标签：java, collections, hashmap, linkedhashmap

假设我有一个 LinkedHashMap 对象，其中只有 8 个桶，编号从 0 到 7。现在我想添加元素。我添加了7个元素，结果如下：

1）Element_1：桶号2。这成为LinkedHashMap维护的链表的开始，以维护插入顺序。
1) Element_2：桶号 3。这链接到 Element_1
2) Element_3：桶号 1。这链接到 Element_2
3) Element_4：桶号 4。这链接到 Elemetn_3
4) Element_5：桶号 5。这链接到 Element_4
5) Element_6: Bucket Number 3\. 这与 Element_5 相关联（发生碰撞）
6) Element_7: Bucket Number 3\. 这与 Element_6 相关联（再次发生碰撞）

现在假设我要检索 Element_7。这个元素的散列给了我***桶号 3***。现在***3 号桶***中的元素是**Element_2**，**Element_6**，**Element_7**。
那么下面两个的遍历顺序是什么：
a）Element_2->Element_3->Element_4->Element_5->Element_6->Element_7。
**或**
b) Element_2->Element_6->Element_7。

我认为答案是（a），因为 LinkedHashMap 维护了一个链表来维护插入顺序。因此，如果顺序为 (b)，则表示特定元素正在存储两个引用，一个用于按插入顺序排列的下一个元素，一个用于同一桶中的下一个元素。

如果答案是 (b)，特定元素如何决定访问哪一个，即从两个引用中选择哪一个。

用例场景是假设性的，它可能与元素数量少于桶数的事实不相关，碰撞的机会更小。请记住上述情况进行回答。
提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:08:48.937

LinkedHashMap 扩展了 HashMap ，因此链接与 无关`get`，因此在添加链接时，它们不应该降低 LinkedHashMap 的效率`get`- 因为 get 不需要该链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:10:19.050

LinkedHashMap 扩展了 HashMap，它的`get`方法调用了 HashMap 的`getEntry`方法。HashMap 的实现将每个桶存储在一个单独的数组中，因此它不需要遍历整个数据集，只需要对该桶中的数据进行循环。取自 Oracle JDK 7：

```
final Entry<K,V> getEntry(Object key) {
    int hash = (key == null) ? 0 : hash(key.hashCode());
    for (Entry<K,V> e = table[indexFor(hash, table.length)];
         e != null;
         e = e.next) {
        Object k;
        if (e.hash == hash &&
            ((k = e.key) == key || (key != null && key.equals(k))))
            return e;
    }
    return null;
} 
```

**编辑**

`e.next`定义在`HashMap.Entry`同一个桶中，而不是`e.after`定义`e.before`在`LinkedHasMap.Entry`不同的桶中。

# java - 如何在 Spring 配置文件中混合 CGLIB 和 JDK 代理？

> ID：10110569
> 
> 赞同：5
> 
> 时间：2012-04-11T17:01:25.510
> 
> 标签：java, spring, aop, cglib, proxies

该线程与我在[这里遇到的一个问题有关，即需要访问建议类的受保护方法](https://stackoverflow.com/q/10110253/827480)。我正在使用 Spring 3.0.6，并创建了一个 Spring 分析方面，我将其应用于使用 JDK 代理的大量 bean。

但是，由于需要访问一个特定 bean 中的受保护方法，我想建议它使用 CGLIB。我想继续使用 JDK 代理的所有其他 bean。

我混合使用了注释和 xml 配置，但这个特定方面是在 XML 配置中定义的。

我知道有`<aop:scoped-proxy>`标签，但据我所知，这适用于所有方面。

无论如何定义一个方面来使用CGLIB吗？

```
<aop:config>
    <aop:aspect id="Profiler" ref="lendingSimulationServiceProfilerInterceptor">
        <!-- info -->
        <aop:around method="infoProfiler"
                    pointcut="execution(* com.cws.cs.lendingsimulationservice.service.LendingSimulationServiceImpl.calculate*(..))"  />

        <!-- debug -->
        <aop:around method="infoProfiler"
                    pointcut="execution(* com.cws.cs.lendingsimulationservice.process.LendingSimulationProcessImpl.calculate(..))"  />

        <aop:around method="infoProfiler"
                    pointcut="execution(* com.blaze.BlazeEngine.invokeService(..))"  />

        <!-- trace -->
        <aop:around method="traceProfiler" 
                    pointcut="execution(* com.calculator.dao.impl.LendingSimulationDaoImpl.*(..))"  />

        <!-- NEED TO DEFINE THIS PARTICULAR ASPECT AS CGLIB -->
        <aop:around method="traceProfiler" 
                    pointcut="execution(* com.cws.cs.lendingsimulationservice.util.pool.JAXBPoolImpl.*(..))"    />
    </aop:aspect>
</aop:config> 
```

我试图将配置分成两部分，一个配置指定`target-class="true"`另一个`target-class="false"`，但它似乎在那时将 CGLIB 应用于所有配置。

有没有办法做到这一点？

谢谢，

埃里克

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T18:58:27.767

不幸的是，所有或没有 bean 都使用 CGLIB，如果您在一个地方使用目标类的代理，则在所有其他地方都强制使用它。引用官方文档的[8.6 Proxying机制：](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/aop.html#aop-proxying)

> ### 笔记
> 
> 多个`<aop:config/>`部分在运行时被折叠成一个统一的自动代理创建器，它应用任何`<aop:config/>`部分（通常来自不同的 XML bean 定义文件）指定的最强代理设置。这也适用于`<tx:annotation-driven/>`and`<aop:aspectj-autoproxy/>`元素。
> 
> 明确一点：使用`'proxy-target-class="true"'`on `<tx:annotation-driven/>`，`<aop:aspectj-autoproxy/>`or`<aop:config/>`元素将强制*对所有三个*使用 CGLIB 代理。

# android - Android 程序启动失败

> ID：10110570
> 
> 赞同：0
> 
> 时间：2012-04-11T17:01:37.583
> 
> 标签：android, eclipse

我对使用 eclipse android 插件并不完全陌生，但我是从头开始编写项目的新手。所以我去安卓开发者网站学习了“Hello World”教程。

当我运行我的程序时，模拟器会弹出一个屏幕，不幸的是你好，Android 已停止工作。我的代码是：

你好Android.Java

```
package daniel.android.projects;

import android.app.Activity;
import android.os.Bundle;

    public class HelloAndroid extends Activity {
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            Object o = null;
            o.toString();
            setContentView(R.layout.main);
        }
    } 
```

主.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/textview"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:text="@string/hello"/> 
```

字符串.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="hello">Hello, Android! I am a string resource!</string>
    <string name="app_name">Hello, Android</string>
</resources> 
```

清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="daniel.android.projects"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".AndroidTesterActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:06:03.963

你有一个空指针异常，你分配`null`给它`o`然后调用`toString()`它：

```
Object o = null;
o.toString(); 
```

无论如何，它似乎在您的应用程序中没有任何作用，它不应该存在。

此外，查看您的代码，您创建`HelloAndroid`类，但在其中声明

```
android:name=".AndroidTesterActivity" 
```

它应该是

```
android:name=".HelloAndroid" 
```

# hosting - 我需要专业人士的一些指导和帮助来托管我的新应用程序。（请阅读所有内容）

> ID：10110572
> 
> 赞同：-1
> 
> 时间：2012-04-11T17:01:46.647
> 
> 标签：hosting

过去几年我一直在制作桌面应用程序。但现在我有了这份工作，并考虑为自己工作。我经历了很多想法。最后我决定开发在线计费应用程序。由于我是 Web 应用程序的新手，所以我对 Web 技术知之甚少。

我正在考虑使用 mysql 数据库在 php 或 asp.net 中开发该应用程序。我不知道哪个更好。（你可以在这里指导我）。我不知道这是否是个好主意。但我不想为自己工作和工作，这是肯定的。

这将是一个大项目，所以我正在为整个项目制定预算，但我不知道这个应用程序需要什么样的托管，因为数据库负载会非常高，因为它的计费应用程序。我不知道要花多少钱。我会给用户免费试用 30 天以使用应用程序，如果他们愿意，他们可以升级他们的帐户。

所以我需要你的帮助来决定什么样的托管是合适的。如果我使用我们用来托管网站的网络托管，这将花费我每月 10 到 15 美元，或者我将不得不使用云托管，这将花费我很多？

我希望这个链接能给你一些想法。我想做这样的应用程序： [http](http://www.rapid-billing.com) ://www.rapid-billing.com 。

请帮帮我。这对你来说可能是小事，但对我来说很重要。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:09:31.370

最初，您不会有很高的流量，因此使用便宜的共享服务器应该没问题。如果你超过它，那么你必须有一些钱进来，所以云托管的额外费用将是更可以忍受的。在你开始之前，没有必要全押。

也就是说，许多云主机提供一定数量的免费托管，这在初始开发期间可能同样适合您。从云开始的另一个好处是您以后不必迁移。在我的脑海中，[Google App Engine](https://developers.google.com/appengine/)和[Heroku](http://www.heroku.com/)被认为是具有免费层级的知名云主机。[Microsoft Azure](http://www.windowsazure.com/en-us/pricing/free-trial/)还提供 3 个月的免费试用，我想如果您选择使用 ASP，他们将是一个很好的主机。

# php - 在笔记本电脑上测试 PHP CURL 文件上传（被诺顿阻止）

> ID：10110573
> 
> 赞同：1
> 
> 时间：2012-04-11T17:01:50.300
> 
> 标签：php, file-upload, curl

我正在笔记本电脑上测试 PHP CURL，但由于内容长度为负，Norton 阻止了文件上传。

所以，我认为 CURL 正在发送 Content-Length: -1。

我该如何解决？通过手动设置内容长度？如果是这样，最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:56:18.687

看起来我有`curl_setopt($CURL, CURLOPT_POST, TRUE)`，这不是一个好主意。我删除了它，诺顿没有抱怨并且脚本有效。

# php - PHP 在索引之前和之后首次出现字符串

> ID：10110574
> 
> 赞同：0
> 
> 时间：2012-04-11T17:01:51.740
> 
> 标签：php, string

我有一个字符串前。`abcd.something.dcba`我有一个索引前。9 （在这种情况下是`e`），我必须得到两个`.`s 之间的字符串。我不知道第一个点离索引有多远，也不知道第二个点有多远。那么有没有简单的方法在php中做到这一点？字符串 ex 中还有很多`.`s。`a.b.c.d.something.d.c.b.a`

其他几个例子：

`bef.ore.something.af.t.er`指数：12 =`something`

`bef.ore.something.af.t.er`指数：5 =`ore`

`bef.ore.something.af.t.er`指数：19 =`af`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T17:17:30.123

作为起点，您可以尝试：

```
$input = 'a.b.something.c.def';
$index = 9;
$delimiter = '.';

/*
 * get length of input string
 */
$len = strlen($input);

/*
 * find the index of the first delimiter *after* the index
 */
$afterIdx = strpos($input, $delimiter, $index);

/*
 * find the index of the last delimiter *before* the index 
 * figure out how many characters are left after the index and negate that - 
 * this makes the function ignore that many characters from the end of the string,
 * effectively inspecting only the part of the string up to the index
 * and add +1 to that because we are interested in the location of the first symbol after that
 */
$beforeIdx = strrpos($input, $delimiter, -($len - $index)) + 1; 

/*
 * grab the part of the string beginning at the last delimiter 
 * and spanning up to the next delimiter
 */
$sub = substr($input, $beforeIdx, $afterIdx - $beforeIdx);
echo $sub; 
```

请注意，对于索引之前/之后没有符号的情况，您至少需要添加一些完整性检查。

*   [斯特伦](http://us.php.net/strlen)
*   [strpos](http://us.php.net/strpos)
*   [strrpos](http://us.php.net/strrpos)
*   [子串](http://us.php.net/substr)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:08:23.600

在这种情况下，正则表达式将是您的朋友：

```
$regex = '/\.?([\w]+)/';
$string = 'a.b.c.d.something.d.c.b.a';
preg_match_all($regex, $string, $result);
print_r($result[1]); 
```

注意：如果您要查找特定单词，只需将 [\w]+ 替换为您要查找的单词。

@ 19greg96 我知道你现在想要什么，'DCoder 示例的另一种但类似的方法是：

```
$string = 'a.b.something.d.c.b.a';
$index = 9;
$delimiter = '.';

$last_index = strpos($string, $delimiter, $index);
$substr = substr($string, 0, $last_index);
$substr = substr($substr, strrpos($substr, $delimiter) + 1);
echo $substr; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T17:09:27.773

将字符串分解成一个数组并通过 foreach() 传递：

```
$str='a.b.c.d.something.d.c.b.a';
$parts=explode('.',$str);
foreach($parts as $part) {
    if($part=='something') {
        echo('Found it!');
        break;
    }
} 
```

# iphone - iphone定时器倒计时在后台

> ID：10110576
> 
> 赞同：0
> 
> 时间：2012-04-11T17:02:08.047
> 
> 标签：iphone, timer, countdown

嗨，我想做一个简单的计时器白色选择器和标签。

在我的应用程序进入后台之前一切正常，我不明白为什么？我忘记了什么？

这是我的 .m 中设置倒计时并计算它的部分

```
 - (void)tick {

//sottraiamo uno dal countdown
countdown--;

//controlliamo che il valore di countdown sia minore di zero
if (countdown < 0) {
    NSLog(@"controllo");

    //se è minore di zero allora il timer è finito
    //Incvochiamo l'azione playSound per suonare l'allarme
    [self playSound];

    //Invochiamo il metodo fermaIlTimer per fermare il timer
    [self fermaIlTimer];

    //Arrestiamo il codice
    return;

    //Inibisce lo standby
    [UIApplication sharedApplication].idleTimerDisabled = YES;
}

//Assegnamo alla proprietà text della UILabel la stringa restituita dal metodo formattazioneLabel
self.countdownLabel.text = [self formattazioneLabel];
 }

#pragma mark Azioni

//Impostiamo l'azione del pulsante newTime
- (IBAction)newTime:(id)sender {

    //controlliamo se sta andando e se si fermiamo il blocco di codice con il return
    if (isRunning) return;

    //Impostiamo il countdown con il metodo dateWithTimeIntervalSinceNow prendendo il tempo dal valore della ruota di selezione + 1
    countdown = [self getPickerTime];

    //Assegnamo alla proprietà text della UILabel la stringa restituita dal metodo formattazioneLabel
    self.countdownLabel.text = [self formattazioneLabel];
}

//Start
- (IBAction)start:(id)sender {

    if (isRunning == NO && isPlay == NO){

    //Impostiamo su si il booleano isRunning
    isRunning = YES;

    //Impostiamo il countdown con il metodo personalizzato
    countdown = [self getPickerTime];

    //Invochiamo il primo tick 
    [self tick];

    //Avviamo la data con il metodo scheduledTimerWithTimeInterval che ogni secondo invoca il metodo tick
    self.theTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(tick) userInfo:nil repeats:YES];

    //imposta la font di rosso
    self.countdownLabel.textColor = [UIColor redColor];

        //modifiche fondo

        fondo.image = [UIImage imageNamed: @"Bck_timerII.png"];
        myPicker.hidden = YES;
        copertura.hidden = YES;
        start.hidden = YES;
        stop.hidden = NO;
        pausa.hidden = NO;

        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:09:26.773

你的线路 -

```
[UIApplication sharedApplication].idleTimerDisabled = YES; 
```

永远不会执行，因为您有“回报”；在上一行。

# php - 只删除第一个“/”的正则表达式

> ID：10110579
> 
> 赞同：3
> 
> 时间：2012-04-11T17:02:35.550
> 
> 标签：php, javascript, expression

我是正则表达式的新手，似乎不知道如何解决这个问题：

我需要一个“只允许”的正则表达式`numbers`,`letters`和`/`. 我写了这个：

`/[^a-zA-Z0-9/]/g`

我认为有可能剥离第一个`/`，但不知道如何。

所以`#/register/step1`变成`register/step1`

谁知道我怎么能得到这个结果？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:17:44.637

如果模式在字符串中是连续的，则可以使用非全局匹配：

```
var rx=/(([a-zA-Z0-9]+\/*)+)/;

var s='#/register/step1';

var s1=(s.match(rx) || [])[0];

alert(s1)>>>  returned value: (String) "register/step1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:16:20.957

编辑：不知道为什么我不首先建议这个，但如果你只是强制执行模式而不是替换，你可以在检查模式之前替换那个斜杠（如果它存在），使用 strpos(), substr () 或类似的东西。如果您已经在使用 preg_replace()，那么您应该查看函数文档上的示例，它们非常相关

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T17:26:49.140

```
"/register/step1".match(/[a-zA-Z0-9][a-zA-Z0-9/]*/); // ["register/step1"] 
```

\w 等价于 [^A-Za-z0-9_]，所以：

```
"/register/step1".match(/\w[\w/]*/); // ["register/step1"] 
```

# java - 用于日期的 Eclipse JFace 字段编辑器？

> ID：10110581
> 
> 赞同：1
> 
> 时间：2012-04-11T17:02:54.010
> 
> 标签：java, eclipse, eclipse-rcp, jface, rcp

我正在使用现有`IWorkbenchPreferencePage`框架为我的 Eclipse RCP 应用程序构建一个首选项编辑器（请参阅[http://www.eclipse.org/articles/Article-Field-Editors/field_editors.html](http://www.eclipse.org/articles/Article-Field-Editors/field_editors.html)以获得一个很好的教程）。

它有许多不同类型数据的编辑器：

*   布尔字段编辑器
*   整数字段编辑器
*   字符串字段编辑器
*   RadioGroupFieldEditor
*   颜色字段编辑器
*   字体编辑器
*   目录字段编辑器
*   文件字段编辑器
*   路径编辑器

**但是，似乎不存在的一件事是一个不错的 DateFieldEditor（最好带有一个按钮来调出日历以允许选择特定日期）。**

所以我的问题是，这样的`org.eclipse.jface.preference.FieldEditor`子类是否存在，无论是在标准`JFace`中还是在第三方插件或项目中？

或者，即使是 SWT 日历组件也会很有用，因为我可以很容易地在此之上构建其余部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T07:16:47.447

JFace 没有这样的`FieldEditor`. 但是有[一个 DateFieldEditor 的官方功能请求，](https://bugs.eclipse.org/bugs/show_bug.cgi?id=194162)它甚至附有一个基本的实现。至少你可以使用它作为模板来创建你自己的字段编辑器，如果它不适合你的话。

# r - 解码 R中的其他字符

> ID：10110585
> 
> 赞同：3
> 
> 时间：2012-04-11T17:03:08.957
> 
> 标签：r, encoding

如何在不使用该选项保存的表中解码 Base 64 字符，如`<e9>`(é) 或(°)？`<b0>``write.table``UTF-8`

如果答案很明显，我们深表歉意，但 R 文档页面仅提及`enc2utf8()`（此处不起作用）。

**注意：**如果没有解决方案，我知道我可以`gsub()`完成整个事情，但这会很长而且很混乱，或者我可以再次生成数据，但这需要一些实时（爬虫数据）。

# asp.net - 在 Web 应用程序项目中使用代码文件

> ID：10110587
> 
> 赞同：4
> 
> 时间：2012-04-11T17:03:10.517
> 
> 标签：asp.net

只需阅读有关在 Web 应用程序项目中使用 codefile=somefile.aspx.cs 而不是 codebehind=somefile.aspx.cs 的可能性（[在此处描述](http://blog.kjeldby.dk/2008/11/dynamic-compilation-in-a-web-application/)）。显然，这会导致文件仅在加载页面时编译，不再预编译（对吗？）。

在 Web 应用程序项目中使用 codefile 而不是 codebehind 是否有任何负面或意外的副作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:32:04.460

我认为，如果您的站点并非全部是其中之一，那么您可能会遇到可支持性问题。（代码文件或代码隐藏）

即，如果您试图找出您的生产站点上的问题，而您的错误处理告诉您在某个文件或命名空间中，您将不得不停下来检查您支持的每个文件和控件，然后再进行故障排除以查看是否该页面作为已编译程序集的一部分运行或从站点上的代码隐藏运行。

如果您尝试使用混合环境，也可能会遇到命名空间冲突或丢失的情况。

我在 CodeFile 中看到的优点：

*   您的生产源代码可以放在您的生产网站上。如果代码全部编译在您的 bin 目录中的 DLL 中，则不能绝对保证您在开发环境或源代码管理中拥有的代码就是那里的代码。（当然应该如此，但如果一切都像它应该的那样，我们中的许多人就不会有工作来修复其他人的代码了！）
*   对于更新，您只需推出单个文件，而不是整个程序集。
*   您将能够在其他页面上进行开发，在重新编译和发布到生产之前不需要退出这些页面。

缺点：

*   由于您没有推出已编译的程序集，因此您可能在单个文件中存在错误，除非有人访问每个特定页面或者您确定在部署之前进行编译，否则不一定会被捕获。
*   您可能在代码文件中存在冲突的名称空间，这些名称空间可能永远不会被捕获，并可能导致混淆或错误。
*   动态编译的性能问题

# asp.net-mvc - 传入字典的模型项的类型为“需要一个类型为“System.Collections.Generic.IEnumerable”的模型项

> ID：10110591
> 
> 赞同：1
> 
> 时间：2012-04-11T17:03:21.437
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

我在 mvc3 中创建了一个 Web 应用程序，并创建了两个部分视图，其中一个具有下拉列表等控件。第二个有 webgrid，它显示来自数据库的数据。

```
partialview1.cshtml
@model Mapping.Models.SecurityIdentifierMapping

@using (Html.BeginForm("Mapping", "Home"))
{
    @Html.DropDownList("SecurityID", Model.PricingSecurityID, "-- Select SecurityID --")
    <br />    
    @Html.DropDownList("CUSIPID", Model.PricingSecurityID, "-- Select CUSIPID --")
    <br />
    <button type="submit">Map</button>
}

partialview2.cshtml
@model IEnumerable<Mapping.Models.SecurityIdentifierMapping>

@{
    ViewBag.Title = "Mapping";
    WebGrid grid = null;
    if (Model.Count() > 0 ){
    grid = new WebGrid(source: Model,
                            defaultSort: "Id",
                            canPage: true,
                            canSort: true,
                            rowsPerPage:20);
    }
}

<h2>Mapping</h2>

@if (grid != null)
{
@grid.GetHtml(
                tableStyle: "grid",
                headerStyle: "head",
                alternatingRowStyle: "alt",
                columns: grid.Columns(
                                            grid.Column("", header: null, format: @<text>@Html.ActionLink("Edit", "Edit", new { id = (int)item.id })  @Html.ActionLink("Delete", "Delete", new { id = (int)item.id })</text>),
                                            grid.Column("PricingSecurityID"),
                                            grid.Column("CUSIP")
                                          )

                )
}
<br />
<p>
    @Html.ActionLink("Back", "Index")
</p>

in index.cshtml

<div>
@Html.Partial("_ControlsPartial",)
</div>

<div>
@Html.Partial("_WebGridPartial")
</div>

HomeController.cs
  public ActionResult Index()
        {
            SecurityIdentifierMapping objModel = new SecurityIdentifierMapping();
            objModel.PricingSecurityID = objRepository.GetPricingSecurityID();
            objModel.CUSIP = objRepository.GetCUSIP();
            return View(objModel);

        } 
```

我如何显示 webgrid 并使用相同的 Index() 填充下拉列表？

出现错误:(@Html.Partial() 中的第二个参数应该是什么，以便网格和控件在同一页面上都可以正常工作。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:30:42.700

您正在将`SecurityIdentifierMapping`模型传递给`Index`视图。在此索引视图中，您调用了 2 个部分：

```
@Html.Partial("_ControlsPartial") 
```

和：

```
@Html.Partial("_WebGridPartial") 
```

第一个工作正常，因为它是强类型的，`SecurityIdentifierMapping`但第二个（带有网格的）不起作用，因为它是强类型的`IEnumerable<SecurityIdentifierMapping>`。因此你得到的例外。

我建议您使用包含 2 个属性的视图模型：一个`SecurityIdentifierMapping`可以传递给第一个部分的简单`IEnumerable<SecurityIdentifierMapping>`属性和一个将传递给第二个部分的属性。控制器操作将填充此视图模型并将其传递给索引视图：

`Index.cshtml`：

```
@model MyViewModel

<div>
    @Html.Partial("_ControlsPartial", Model.SecurityIdentifier)
</div>

<div>
    @Html.Partial("_WebGridPartial", Model.Identifiers)
</div> 
```

# charts - 如何将 x-ticklabels 舍入到最接近的 50

> ID：10110594
> 
> 赞同：0
> 
> 时间：2012-04-11T17:03:35.460
> 
> 标签：charts, excel, vba

我需要将 Excel 图表中的 X-ticklabels 舍入到最接近的 50。图表是在 VBA 中创建的，数据系列在工作表中，所以我很乐意在其中使用任何一个解决方案。我编写了以下四舍五入到最接近 50 的函数：

```
 Function RoundTo50(number As Double) As Double
      RoundTo50 = WorksheetFunction.Round(number * 2, -2) / 2
  End Function 
```

我已将它应用于图表的最小和最大 x 限制并且它适用于它们，但我无法弄清楚如何将它应用于两者之间的所有刻度标签。我想在绘图之前将其应用于所有数据，但这会改变我不想做的绘图。由于四舍五入，我希望刻度标签略微未对齐。

你能用格式化字符串做到这一点吗？还是有什么其他方式？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:47:22.643

所以答案如下（感谢 Sam Ward 的评论将我推向了正确的方向）：

使用我的 RoundTo50() 函数将最小和最大限制四舍五入到最接近的 50。计算合理数量的网格线的间隔应该是多少，在我的例子中是 12。将此间隔四舍五入到最接近的 50。

```
Function RoundTo50(number As Double) As Double
    RoundTo50 = WorksheetFunction.Round(number * 2, -2) / 2
End Function 
```

和

```
With Sheets("Report").ChartObjects.Add(...)
    .Chart.Axes(xlCategory).MinimumScale = RoundTo50(Sheets(sheetName).Range("M4"))
    .Chart.Axes(xlCategory).MaximumScale = RoundTo50(Sheets(sheetName).Range("M124"))
    .Chart.Axes(xlCategory).MajorUnit = RoundTo50((.Chart.Axes(xlCategory).MaximumScale - .Chart.Axes(xlCategory).MinimumScale) / 12)
    .Chart.Axes(xlCategory).MinorUnit = .Chart.Axes(xlCategory).MajorUnit / 3 
```

我仍然对能够使用格式化字符串执行此操作非常感兴趣，因为我有一个以百分比表示的辅助轴，并且从舍入到 50 的网格线与辅助轴的刻度线略有偏移。使用格式化字符串，它们将完全对齐（因为它们会稍微放在错误的位置，但我更喜欢这样）。

# vb.net - 我的累加器在 VB 中不起作用（Visual Studio 2010）

> ID：10110597
> 
> 赞同：1
> 
> 时间：2012-04-11T17:03:48.107
> 
> 标签：vb.net

我的累加器 (decTotalCredits) 工作不正常，每次输入时都重置为零。我需要累加器添加每个用户输入，直到达到 125。通常情况下，我确信它很小。提前感谢您的所有帮助！

```
 ' Declaring variable for Credit Entered by User
    Dim decCredit As Decimal = CDec(txtCredit.Text)
    ' Declaring the accumulator
    Dim decTotalCredits As Decimal

    If IsNumeric(txtCredit.Text) Then
        decCredit = Convert.ToDecimal(txtCredit.Text)
        Select Case decCredit
            Case Is = 5
            Case Is = 10
            Case Is = 25
            Case Is = 100
            Case Else
                MsgBox("Please enter a valid coin amount", , "Invalid Amount Entered")
        End Select

        If decTotalCredits < 125 Then

            decTotalCredits += decCredit
            lblTotal.Text = CStr(decTotalCredits)
            lblTotal.Visible = True

            txtCredit.Clear()
            txtCredit.Focus()

        Else

            ' Once the credits are reached the prompt to make selection is visible. 
            lblMakeSelection.Visible = True

            ' Once the credits are reached, the buttons for selection become enabled.
            btnDietPepsi.Enabled = True
            btnPepsi.Enabled = True
            btnSierraMist.Enabled = True
            btnLemonade.Enabled = True
            btnDrPepper.Enabled = True
            btnWater.Enabled = True
        End If
    Else
        MsgBox("Please enter a valid Coin amount", , "Input Error")

    End If 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T17:14:30.493

正在重新声明..

*   如果这是在循环中，则需要在循环之外声明 DecTotalCredits。
*   如果这是在事件处理程序中，则需要在代码顶部（在类声明的正下方）声明 DecTotalCredits 这样它就不会在每次处理程序运行时重新声明

# sockets - 我应该在长时间运行的过程中保持套接字打开吗？

> ID：10110600
> 
> 赞同：1
> 
> 时间：2012-04-11T17:03:58.890
> 
> 标签：sockets, graphite

我有一些程序偶尔（从每隔几分钟到每小时一次）需要将指标发送到[Graphite](http://graphite.wikidot.com/)。我应该在我的过程中保持到石墨服务器的套接字打开还是每次我需要发送一些指标时建立一个新的连接？做一个或另一个时有哪些注意事项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:07:31.833

听起来你需要一个 TCP 连接。

您是否应该保持连接处于活动状态取决于对以下几点的回答： - 您想在任何给定时间监视服务器上的“连接”客户端吗？- 相对于前一点，服务器端是否有限制？- 此类客户端“连接”到服务器的数量？- 如果连接创建需要一些时间，会不会有问题？

如果您保持连接打开，只需确保不时发送保持活动消息（提供应用程序级别）。

连接到服务器的大量客户端，即使不活动，也可能会消耗内存或对象资源（例如，如果每个连接有一个线程）。另一方面，保持连接打开，将允许客户端更快地检测到服务器是否存在连接问题（如果这甚至很重要）。

这完全取决于何时需要。

# spring - Spring：如何通过 GET HTTP 请求构造这个命令对象？

> ID：10110604
> 
> 赞同：0
> 
> 时间：2012-04-11T17:04:11.320
> 
> 标签：spring, search, command-objects

我正在使用 Spring 3.1.0.RELEASE 和 Hibernate 4.0.1.Final。我想在控制器中调用一个搜索方法，该控制器将搜索bean（下面的事件bean）作为输入......

```
@RequestMapping(value = "/search_results.jsp")
public ModelAndView processSearch(final HttpServletRequest request, final Event searchBean, final BindingResult result) {
    ...
} 
```

事件 bean 包含以下字段...

```
@Entity
@Table(name = "EVENTS")
public class Event implements Comparable {

    ...
    @OneToOne(cascade = CascadeType.ALL)
    @JoinColumn(name="EVENT_FEED_ID")
    private EventFeed eventFeed;
    ...
} 
```

其中 EventFeed 对象包含以下字段...

```
@Entity
@Table(name = "EVENT_FEEDS")
public class EventFeed {

    @Id
    @Column(name = "ID")
    @GeneratedValue(strategy=GenerationType.AUTO)
    private Integer id;

    @NotEmpty
    @Column(name = "TITLE")
    private String title;

    ... 
} 
```

如何构造一个 URL，以便填充搜索 bean 的 Event.getEventFeed().getId() 字段？

我意识到我可以使用“eventFeedId=2”之类的参数提交一个 GET 请求并手动填充所有内容，但由于其他页面正在提交填充命令对象的请求，我想继续使用相同的逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:18:46.323

这将是

```
/search_results.jsp?event.eventFeed.id=...&event.eventFeed.title=... 
```

`event`是定义的默认模型属性名称[`@ModelAttribute`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/bind/annotation/ModelAttribute.html)，其他绑定规则在[5.4.1 设置和获取基本和嵌套属性](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/validation.html#beans-beans-conventions)中描述。

但是请注意，如果您稍后将这些 bean 与 Hibernate 会话相关联，这种方法可能会导致问题。例如，如果您想通过调用将 new 附加`Event`到现有的，它也会覆盖该属性。因此，在这种情况下，最好避免过度使用数据绑定，而是将原语作为参数传递。`EventFeed``merge()``title`

# django - django admin 使用 through= 和 filter_horizo ntal 的多对多中间模型

> ID：10110606
> 
> 赞同：19
> 
> 时间：2012-04-11T17:04:21.303
> 
> 标签：django, django-models, django-admin

这是我的模型的外观：

```
class QuestionTagM2M(models.Model):
    tag = models.ForeignKey('Tag')
    question = models.ForeignKey('Question')
    date_added = models.DateTimeField(auto_now_add=True)

class Tag(models.Model):
    description = models.CharField(max_length=100, unique=True)

class Question(models.Model):
    tags = models.ManyToManyField(Tag, through=QuestionTagM2M, related_name='questions') 
```

我真正想做的就是在创建给定的多对多关系时添加一个时间戳。这是有道理的，但它也增加了一些复杂性。除了删除 .add() 功能[尽管我真正添加的唯一字段是自动创建的，因此从技术上讲它不应该再干扰这一点]。`QuestionTagM2M.objects.create(question=,tag=)`但我可以忍受这一点，因为如果这意味着获得额外的时间戳功能，我不介意做额外的事情。

我的问题是我真的很希望能够`filter_horizontal`在管理员中保留我的 javascript 小部件。我知道文档说我可以使用内联，但这太笨拙了，因为除了外键之外，实际上没有其他字段可以在内联中`Tag`。

此外，在我的数据库架构的更大方案中，我的`Question`对象已经在我的管理页面上显示为内联，并且由于 Django 不支持管理中的嵌套内联 [尚未]，我无法为给定选择标签问题。

有没有什么方法可以覆盖`formfield_for_manytomany(self, db_field, request=None, **kwargs)`或类似的东西来允许我使用漂亮的`filter_horizontal`小部件并自动创建`date_added`数据库的列？

这似乎是 django 应该能够在本机上做的事情，只要您指定中间的所有列都是自动创建的（除了外键），也许是`auto_created=True`? 或类似的东西

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T05:15:05.573

有*办法*做到这一点

*   正如@obsoleter 在[下面的评论中](https://stackoverflow.com/questions/10110606/django-admin-many-to-many-intermediary-models-using-through-and-filter-horizont/10203192?noredirect=1#comment18228487_10203192)所提供的：设置`QuestionTagM2M._meta.auto_created = True`和处理同步数据库很重要。
*   在models.py`date_added`中为model的M2M模型动态添加字段`Question`

    ```
    class Question(models.Model):
        # use auto-created M2M model
        tags = models.ManyToMany(Tag, related_name='questions')

    # add date_added field to the M2M model
    models.DateTimeField(auto_now_add=True).contribute_to_class(
             Question.tags.through, 'date_added') 
    ```

    然后你可以像平常一样在 admin 中使用它`ManyToManyField`。
    在 Python shell 中，`Question.tags.through`用来指代 M2M 模型。

    *注意*，如果你不使用`South`，那就`syncdb`足够了；如果这样做，`South`不喜欢这种方式并且不会冻结`date_added`字段，则需要手动编写迁移以添加/删除相应的列。

*   自定义 ModelAdmin：

    1.  不要`fields`在自定义的 ModelAdmin 内部定义，只定义`filter_horizontal`. 这将绕过 Irfan 的回答中提到的字段验证。
    2.  自定义`formfield_for_dbfield()`或`formfield_for_manytomany()`使 Django 管理员`widgets.FilteredSelectMultiple`用于该`tags`字段。
    3.  `save_related()`在 ModelAdmin 类中自定义方法，例如

```
def save_related(self, request, form, *args, **kwargs):
    tags = form.cleaned_data.pop('tags', ())
    question = form.instance
    for tag in tags:
        QuestionTagM2M.objects.create(tag=tag, question=question)
    super(QuestionAdmin, self).save_related(request, form, *args, **kwargs) 
```

*   此外，您可以修补ManyToManyField 的字段描述符`__set__()`以保存 M2M 实例而不会引发异常。`ReverseManyRelatedObjectsDescriptor``date_added`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T18:01:05.477

来自[https://docs.djangoproject.com/en/dev/ref/contrib/admin/#working-with-many-to-many-intermediary-models](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#working-with-many-to-many-intermediary-models)

> 当您使用 ManyToManyField 的 through 参数指定中间模型时，管理员默认不会显示小部件。这是因为该中间模型的每个实例都需要比单个小部件中显示的更多信息，并且多个小部件所需的布局将根据中间模型而有所不同。

但是，您可以尝试使用`fields = ('tags',)`in admin 显式包含 tags 字段。这将导致此验证异常

> “QuestionAdmin.fields”不能包含 ManyToManyField 字段“tags”，因为“tags”手动指定了“通过”模型。

此验证在[https://github.com/django/django/blob/master/django/contrib/admin/validation.py#L256中实现](https://github.com/django/django/blob/master/django/contrib/admin/validation.py#L256)

```
 if isinstance(f, models.ManyToManyField) and not f.rel.through._meta.auto_created:
            raise ImproperlyConfigured("'%s.%s' "
                "can't include the ManyToManyField field '%s' because "
                "'%s' manually specifies a 'through' model." % (
                    cls.__name__, label, field, field)) 
```

我不认为您可以绕过此验证，除非您实现自己的自定义字段以用作 ManyToManyField。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-22T17:25:35.270

自发布先前的答案以来，文档可能已更改。我查看了@Irfan 提到的[django 文档](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#working-with-many-to-many-intermediary-models)链接，它似乎比以前更直接。

为您添加一个内联类`admin.py`并将模型设置为您的 M2M 模型

```
class QuestionTagM2MInline(admin.TabularInline):
    model = QuestionTagM2M
    extra = 1 
```

在您的管理类中设置`inlines`以包含您刚刚定义的内联

```
class QuestionAdmin(admin.ModelAdmin):
    #...other stuff here
    inlines = (QuestionTagM2MInline,) 
```

不要忘记注册这个管理类

```
admin.site.register(Question, QuestionAdmin) 
```

完成上述操作后，当我单击一个问题时，我有一个表格可以对其进行所有正常编辑，下面是我的 m2m 关系中的元素列表，我可以在其中添加条目或编辑现有条目。

# asp.net - 用 MVC 和 Win Forms 背景学习 ASP.NET Webforms

> ID：10110607
> 
> 赞同：1
> 
> 时间：2012-04-11T17:04:21.773
> 
> 标签：asp.net, webforms

好的，这会很奇怪，但我的上一个项目都是 ASP.NET MVC 3、WCF/REST/SOAP 和 Win Forms 和 WPF。

我知道 HTTP 是无状态的，我开始对 Web Forms 在幕后关于 Web 控件所做的 VooDoo 感到奇怪。我真的在努力将我的思想包裹在 DataBinding 上。显然，它与 Win Forms DataBinding 技术有很大不同。

是否有任何好的模式和示例可以解释有关 DataBinding 和 Web 控件的实际情况？当我为 Win Forms 编程时，我似乎一直将其视为不断绑定到某些数据源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T17:33:54.017

您应该了解的第一件事是[ASP.NET 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)。一旦您了解了这一点，您将开始了解 Web 表单的机制。它可能看起来很神奇，因为它已经融入了架构，但是一旦你理解了它就真的很简单。

*   [对 ASP.NET 体系结构的低级了解](http://www.west-wind.com/presentations/howaspnetworks/howaspnetworks.asp)
*   [ASP.NET 数据绑定概述](http://support.microsoft.com/kb/307860)

ASP.NET 和 WinForms 中的数据绑定存在很多差异，但基本概念仍然适用。了解数据绑定的最简单方法是查看数据绑定服务器控件的源。

以下是幕后发生的事情：

```
/// <summary>
/// Binds the data source to the control.
/// </summary>
public override void DataBind()
{
    this.PerformSelect();
}

/// <summary>
/// Retrieves data from the associated data source.
/// </summary>
protected override void PerformSelect()
{  
    //if the control is bound from a datasource control then
    //fire the ondatabinding event
    if (!this.IsBoundUsingDataSourceID)
        this.OnDataBinding(EventArgs.Empty);

    //retrive the data source view object and bind the data to the control
    this.GetData().Select(CreateDataSourceSelectArguments(), PerformDataBinding);

    //mark that the control has been bound to the source
    this.RequiresDataBinding = false;
    this.MarkAsDataBound();

    //fire the on data bound event so it can be 
    //handled from the parent object
    this.OnDataBound(EventArgs.Empty);
}

/// <summary>
/// Binds data from the data source to the control.
/// </summary>
/// <param name="retrievedData"></param>
protected override void PerformDataBinding(IEnumerable retrievedData)
{
    //call the base method
    base.PerformDataBinding(retrievedData);

    //clear all controls and viewstate data and reset
    //the viewstate tracking mechanism
    this.Controls.Clear();
    this.ClearChildViewState();
    this.TrackViewState();

    //generate all child controls within the hierarchy
    this.CreateControlHierarchy(true, retrievedData);

    //mark child controls created as true
    this.ChildControlsCreated = true;            
} 
```

由于控件负责处理所有繁重的工作，因此在前端绑定数据非常容易；只需设置`DataSource`并调用`DataBind()`上面示例中的方法：

```
//assign the datasource to the control
GridView1.DataSource = new DataTable("DataSource"); 

//bind the datasource to the control
GridView1.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:16:39.740

看看[4guysfromrolla](http://aspnet.4guysfromrolla.com/default.aspx)。从记忆中，那里的文章非常全面。

# asp.net - 如何使用 aspnet_personalization Windows 身份验证进行模拟

> ID：10110609
> 
> 赞同：0
> 
> 时间：2012-04-11T17:04:32.060
> 
> 标签：asp.net, authentication, web-parts

在将 aspnet_personalization 与 Windows 身份验证结合使用时，无法弄清楚如何模拟其他用户。

我在我的页面上使用了 asp.net 的个性化框架：

```
 <asp:WebPartManager ID="WebPartManager1" runat="server" >
            <Personalization Enabled="True" />
        </asp:WebPartManager> 
```

我的页面位于使用 AuthenticationMode="Windows" 的现有 Web 应用程序中（我无法更改，并且 IIS 也设置为 Windows 身份验证）。这个网络应用程序有一个页面，允许超级用户模拟任何其他用户。这是通过操作每次访问数据库时动态构建的连接字符串来实现的。

我的问题是 aspnet_personalization 仍然使用 Windows 身份验证。当我尝试动态编辑 aspnet_personalization 使用的连接字符串时，aspnet 似乎没有使用它——它仍然使用当前 NT 帐户的用户名。

我的 web.config 的配置标签中有以下内容：

```
 <connectionStrings>
    <remove name="LocalSqlServer"/>
    <add name="AnotherConnectionString" connectionString="Data Source=serverName;Initial Catalog=dbName;Integrated Security=True" providerName="System.Data.SqlClient"/>
  </connectionStrings>
<system.web>
  <membership>
    <providers>
      <remove name="AspNetSqlMembershipProvider"/>
      <add name="AspNetSqlMembershipProvider"  
         type="System.Web.Security.SqlMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral,PublicKeyToken=b03f5f7f11d50a3a" 
         applicationName="/" 
         connectionStringName="AnotherConnectionString" />
    </providers>
  </membership>
  <profile enabled="true" defaultProvider="TableProfileProvider">
    <providers>
      <clear />
      <add name="TableProfileProvider" type="Microsoft.Samples.SqlTableProfileProvider" connectionStringName="AnotherConnectionString" table="aspnet_Profile" applicationName="/" />
    </providers>
  <!--<properties></properties>-->
  </profile> 
```

每当我们模拟用户时，我尝试通过添加如下代码来编辑连接字符串，希望 asp.net 会使用它，但它没有：

```
 Dim settings = ConfigurationManager.ConnectionStrings("AnotherConnectionString")
    Dim fi = GetType(ConfigurationElement).GetField("_bReadOnly", BindingFlags.Instance Or BindingFlags.NonPublic)
    fi.SetValue(settings, False)
    settings.ConnectionString = "data source=serverName;database=dbName;user id=" & login & "; password=" & password 
```

我确实在包含 webPartManager 的页面的 page_load 上确认“AnotherConnectionString”确实包含所需的用户名，但 asp.net_personalization 仍然使用 NT 用户名调用其存储的过程。

回答：

Stackoverflow 不会让我发布答案。这太荒谬了，所以在我在问题中发布答案后，我将删除我的帐户并鼓励其他人也这样做。

我通过扩展 SqlPersonalizationProvider 解决了这个问题：

```
Imports System.Web.UI.WebControls.WebParts
Public Class MySqlPersonalizationProvider
   Inherits SqlPersonalizationProvider

    Protected Overrides Sub LoadPersonalizationBlobs(ByVal webPartManager As System.Web.UI.WebControls.WebParts.WebPartManager, ByVal path As String, ByVal userName As String, ByRef sharedDataBlob() As Byte, ByRef userDataBlob() As Byte)
        Dim impersonatedName As String = MySession.UserLoginName()
        path = path & "|" & impersonatedName
        userName = impersonatedName
        MyBase.LoadPersonalizationBlobs(webPartManager, path, userName, sharedDataBlob, userDataBlob)
    End Sub

    Protected Overrides Sub SavePersonalizationBlob(ByVal webPartManager As System.Web.UI.WebControls.WebParts.WebPartManager, ByVal path As String, ByVal userName As String, ByVal dataBlob() As Byte)
        Dim impersonatedName As String = MySession.UserLoginName()
        path = path & "|" & impersonatedName
        userName = impersonatedName
        MyBase.SavePersonalizationBlob(webPartManager, path, userName, dataBlob)
    End Sub
End Class 
```

然后在 web.config 中：

```
<system.web>
  <webParts>
    <personalization defaultProvider="AspNetSqlPersonalizationProvider">
      <providers>
        <remove name="AspNetSqlPersonalizationProvider"/>
        <add name="AspNetSqlPersonalizationProvider"
             type="MyProject.MySqlPersonalizationProvider"
             connectionStringName="MyConnectionString"
             applicationName="/"></add>
      </providers>
    </personalization>
  </webParts>

  <profile enabled="true" defaultProvider="TableProfileProvider">
    <providers>
      <clear />
      <add name="TableProfileProvider" type="Microsoft.Samples.SqlTableProfileProvider" connectionStringName="iCaseHomepage" table="aspnet_Profile" applicationName="/" />
    </providers>
  </profile>
</system.web>
<connectionStrings>
  <remove name="LocalSqlServer"/>
  <add name="MyConnectionString" connectionString="Data Source=MyServerName;Initial Catalog=MyDatabaseName;Integrated Security=True" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

并在页面上：

```
 <asp:WebPartManager ID="WebPartManager1" runat="server" >
            <Personalization Enabled="True" />
        </asp:WebPartManager> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:32:44.983

看来我现在可以发布答案了。我想我毕竟不会删除我的帐户。但是，天哪，SO对菜鸟不是很友好。

无论如何，我通过扩展 SqlPersonalizationProvider 解决了这个问题：

```
Imports System.Web.UI.WebControls.WebParts
Public Class MySqlPersonalizationProvider
   Inherits SqlPersonalizationProvider

    Protected Overrides Sub LoadPersonalizationBlobs(ByVal webPartManager As System.Web.UI.WebControls.WebParts.WebPartManager, ByVal path As String, ByVal userName As String, ByRef sharedDataBlob() As Byte, ByRef userDataBlob() As Byte)
        Dim impersonatedName As String = MySession.UserLoginName()
        path = path & "|" & impersonatedName
        userName = impersonatedName
        MyBase.LoadPersonalizationBlobs(webPartManager, path, userName, sharedDataBlob, userDataBlob)
    End Sub

    Protected Overrides Sub SavePersonalizationBlob(ByVal webPartManager As System.Web.UI.WebControls.WebParts.WebPartManager, ByVal path As String, ByVal userName As String, ByVal dataBlob() As Byte)
        Dim impersonatedName As String = MySession.UserLoginName()
        path = path & "|" & impersonatedName
        userName = impersonatedName
        MyBase.SavePersonalizationBlob(webPartManager, path, userName, dataBlob)
    End Sub
End Class 
```

然后在 web.config 中：

```
<system.web>
  <webParts>
    <personalization defaultProvider="AspNetSqlPersonalizationProvider">
      <providers>
        <remove name="AspNetSqlPersonalizationProvider"/>
        <add name="AspNetSqlPersonalizationProvider"
             type="MyProject.MySqlPersonalizationProvider"
             connectionStringName="MyConnectionString"
             applicationName="/"></add>
      </providers>
    </personalization>
  </webParts>

  <profile enabled="true" defaultProvider="TableProfileProvider">
    <providers>
      <clear />
      <add name="TableProfileProvider" type="Microsoft.Samples.SqlTableProfileProvider" connectionStringName="iCaseHomepage" table="aspnet_Profile" applicationName="/" />
    </providers>
  </profile>
</system.web>
<connectionStrings>
  <remove name="LocalSqlServer"/>
  <add name="MyConnectionString" connectionString="Data Source=MyServerName;Initial Catalog=MyDatabaseName;Integrated Security=True" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

并在页面上：

```
 <asp:WebPartManager ID="WebPartManager1" runat="server" >
            <Personalization Enabled="True" />
        </asp:WebPartManager> 
```

# iphone - 目标 C 中的通用数组

> ID：10110613
> 
> 赞同：1
> 
> 时间：2012-04-11T17:04:45.310
> 
> 标签：iphone, objective-c, ios, arrays

我正在制作我的第一个应用程序，并且已经在 android 上制作了它，现在正试图在 iphone 上制作它，但没有客观的 c 经验。该应用程序非常简单，除了一个部分，即数组。

该应用程序有一个按钮，按下时需要将信息存储到数组中。我遇到的问题是，当我在发生按钮单击操作的方法中创建数组时，每次单击按钮时，它都会创建一个新数组，从而破坏了数组的点。当我在方法之外创建数组时，它要么没有传递到方法中（错误显示未定义），要么当我在 .h 文件中声明对象时，程序编译，但是当我点击按钮时它崩溃了。

任何帮助将不胜感激。例子会很好，但即使有人能指出我要查找的正确方向，这也能让我免于秃顶。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T17:18:56.003

尝试这样的事情（这不是 ARC） -

```
@interface MyViewController : UIViewController {

    NSMutableArray *myArray;

}

@implementation MyViewController

-(id)init {

    self = [super init];

    if (self) {

        myArray = [[NSMutableArray alloc] init];

    }

    return self;

}

-(void)dealloc {

    [myArray release];

    [super dealloc];

}

-(IBAction)buttonPressed {

    [myArray addObject:someObject];

}

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T17:12:52.767

您需要在 .h 文件的接口声明的花括号部分内将数组声明为实例变量（又名“ivar”），并*在*指定的初始化程序中对其进行初始化*。*

在 .h 文件中：

```
@interface MyClass : NSObject {
    NSMutableArray *myArray
}
// methods
@end 
```

在 .m 文件中：

```
-(id)init {
    self = [super init];
    if (self) {
        myArray = [NSMutableArray array];
    }
    return self;
} 
```

现在您可以`myArray`在类的所有*实例方法*中使用。

**编辑**：此示例假定您正在使用自动引用计数。由于这是您的第一个应用程序，因此使用 ARC 是一个好主意（XCode 会在您创建新项目时询问您是否愿意使用它）。

# sql-server-2008 - 插入 exec 语句不能嵌套

> ID：10110615
> 
> 赞同：5
> 
> 时间：2012-04-11T17:05:05.170
> 
> 标签：sql-server-2008

您好，我有一个调用的过程`Test_ProcA`，我想调用`Test_ProcB`。我创建了一个名为的临时表`#temp`，其名称和返回的数据类型匹配`Test_ProcB`。

如何将返回的结果集插入`Test_ProcB`到`#temp`. 当我尝试这样做时，我不断收到此错误：

> `INSERT EXEC`语句不能嵌套。

关于需要做什么的任何想法和建议。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T18:25:50.477

You're heading for a total maintenance nightmare. Here is an old article (which still receives updates) on the problem you're experiencing with some alternate ways to do the same thing.

[http://www.sommarskog.se/share_data.html](http://www.sommarskog.se/share_data.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T10:19:39.397

当您创建 SQL Server 存储过程时，您可以从其他 exec sp_xxx 获得 INSERT INTO #TempTable 但您必须控制在第二个存储过程中没有类似的技术来管理数据。您只能拥有“一个级别”，而“嵌套”的级别会导致错误。

您必须提取代码并在第一级存储过程中对其进行管理，这是我的方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-09-30T14:53:22.060

如果您从链接服务器执行 SP，这句话有效，

我认为这是由于@Massimo Sedda 提到的“级别”

问候！

# r - 丢弃第一行和最后 n 行

> ID：10110616
> 
> 赞同：5
> 
> 时间：2012-04-11T17:05:05.503
> 
> 标签：r, data.table

我`data.table`在 R 中有一个我想丢弃第一行和最后 n 行的地方。我想在之前应用一些过滤，然后截断结果。我知道我可以这样做：

```
example=data.table(row1=seq(1,1000,1),row2=seq(2, 3000,3))
e2=example[row1%%2==0]
e2[100:(nrow(e2)-100)] 
```

是否有可能在一行中执行此操作？我想到了类似的东西：

```
example[row1%%2==0][100:-100] 
```

这当然行不通，但是有没有不需要额外变量的更简单的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T17:22:01.373

```
 example=data.table(row1=seq(1,1000,1),row2=seq(2, 3000,3))
 n = 5
 str(example[!rownames(example) %in% 
                 c( head(rownames(example), n), tail(rownames(example), n)), ])
Classes ‘data.table’ and 'data.frame':  990 obs. of  2 variables:
 $ row1: num  6 7 8 9 10 11 12 13 14 15 ...
 $ row2: num  17 20 23 26 29 32 35 38 41 44 ...
 - attr(*, ".internal.selfref")=<externalptr> 
```

添加了带有选择标准的单行版本

```
str( 
     (res <- example[row1 %% 2 == 0])[ n:( nrow(res)-n ),  ] 
      )
Classes ‘data.table’ and 'data.frame':  491 obs. of  2 variables:
 $ row1: num  10 12 14 16 18 20 22 24 26 28 ...
 $ row2: num  29 35 41 47 53 59 65 71 77 83 ...
 - attr(*, ".internal.selfref")=<externalptr> 
```

并进一步添加了这个不使用中间命名值的版本

```
str(  
example[row1 %% 2 == 0][n:(sum( row1 %% 2==0)-n ),  ] 
   )
Classes ‘data.table’ and 'data.frame':  491 obs. of  2 variables:
 $ row1: num  10 12 14 16 18 20 22 24 26 28 ...
 $ row2: num  29 35 41 47 53 59 65 71 77 83 ...
 - attr(*, ".internal.selfref")=<externalptr> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T09:34:35.923

在这种情况下，您知道存在的一列 ( `row1`) 的名称，因此 using`length(<any column>)`返回未命名临时中的行数`data.table`：

```
example=data.table(row1=seq(1,1000,1),row2=seq(2, 3000,3))

e2=example[row1%%2==0]
ans1 = e2[100:(nrow(e2)-100)]

ans2 = example[row1%%2==0][100:(length(row1)-100)]

identical(ans1,ans2)
[1] TRUE 
```

# php - PHP中的代码循环优化

> ID：10110617
> 
> 赞同：3
> 
> 时间：2012-04-11T17:05:06.993
> 
> 标签：php, optimization

有没有办法优化这段代码以更快地工作？我会很感激任何建议！

这段代码在图创建过程中处理边的转移。

```
foreach($times_arrival as $city_id => $time_points) {
// if city is not prohibited for transfers and there is and exists any departure times for this city
if (isset($times_departure[$city_id]) && isset($cities[$city_id]))
{
    foreach($times_arrival[$city_id] as $t1_info) 
    {
        foreach($times_departure[$city_id] as $t2_info) 
        {
            if ($t1_info[0] != $t2_info[0]) //transfers are allowed only for different passages
            {
                $t1 = $t1_info[1];
                $t2 = $t2_info[1];

                $vertex_key = new Vertex($city_id, $t1, 1);
                $vertex_key = $vertex_key->toString();

                //minimum transfer time is 10 min.
                if (date('H:i', strtotime($t2)) > date('H:i', strtotime('+ 10 minutes', strtotime($t1))))
                {
                    $this->graph[$vertex_key][] = new Edge(
                        NULL,
                        $vertex_key, 
                        new Vertex($city_id, $t2, 0),
                        (float) 0,
                        $f((strtotime($t2) - strtotime($t1)) / 60, 0, 1) //edge weight
                    );
                }
                //if transfer is on the bound of the twenty-four hours
                else if (date('H:i', strtotime('+ 24 hours', strtotime($t2))) > date('H:i', strtotime('+ 10 minutes', strtotime($t1))))
                {
                    $this->graph[$vertex_key][] = new Edge(
                        NULL, 
                        $vertex_key,
                        new Vertex($city_id, $t2, 0),
                        (float) 0,
                        $f(strtotime('+ 24 hours', strtotime($t2)) - strtotime($t1) / 60, 0, 1) //edge weight
                    );
                }
            }
        }
    }
}
} 
```

变量示例：

```
var_dump($times_arrival); //$times_departure have the same structure
array
  3 => 
    array
      0 => 
        array
          0 => string '1' (length=1)
          1 => string '08:12' (length=5)
      1 => 
        array
          0 => string '2' (length=1)
          1 => string '08:40' (length=5)
  41 => 
    array
      0 => 
        array
          0 => string '21' (length=2)
          1 => string '12:40' (length=5) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T21:42:33.490

谢谢你们！速度慢的原因是因为使用函数`strtotime()`和`date()`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-11T18:44:11.300

在这种情况下，只有你可以说你选择了一个好的还是坏的算法。在我看来，您的代码没有额外的计算。

只有一个建议——如果可能的话，使用 Xdebug 来分析你的代码并找出瓶颈所在。

# linux - RedHat yum subversion 安装

> ID：10110619
> 
> 赞同：3
> 
> 时间：2012-04-11T17:05:09.293
> 
> 标签：linux, svn, centos, redhat, yum

我正在尝试在 RedHat linux 上安装 subversion。但是损坏的 yum 包管理器有点问题。我已经从 CentOS 配置了一些自己的存储库，但不幸的是仍然有一个损坏的依赖项：

libneon.so.27

我试过自己下载它，但是它的依赖关系相当复杂，我要花很多时间来下载它们。你有什么提示吗？（链接到带有该 libneon 的一些存储库（rpmforge 我尝试过但没有成功））

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T17:53:27.030

您可以根据您的机器配置从[32 位](http://packages.sw.be/rpmforge-release/rpmforge-release-0.5.2-2.el6.rf.i686.rpm)或[64 位](http://packages.sw.be/rpmforge-release/rpmforge-release-0.5.2-2.el6.rf.x86_64.rpm)链接下载[rpm forge存储库。](http://wiki.centos.org/AdditionalResources/Repositories/RPMForge/)rpm forge 包具有大部分有用的包和依赖项。之后尝试以下命令：

```
yum install mod_dav_svn subversion 
```

或者试试

```
yum install subversion 
```

除了 subversion 你还可以使用与 svn 类似但有其额外好处的 GIT。如果您愿意，可以使用以下命令安装[git ：-](http://git-scm.com/)

```
yum install git 
```

# c# - Asp.net - 下载文件后无法更改面板的可见性

> ID：10110620
> 
> 赞同：0
> 
> 时间：2012-04-11T17:05:09.727
> 
> 标签：c#, asp.net, download, panel, response

我正在显示一个包含按钮的面板。当用户单击按钮时，它会进行一些处理，然后为用户下载文件。代码如下所示：

```
 private void OpenForm(string content, string formName)
    {
        Byte[] bytes = System.Text.Encoding.Default.GetBytes(content);

        this.Response.AppendHeader("Content-Type", "application/msword");
        this.Response.AppendHeader("Content-Length", bytes.Length.ToString());
        this.Response.AppendHeader("Content-disposition", "attachment; filename=" + formName);
        this.Response.BinaryWrite(bytes);

        ReturnToMemberScreen();

        this.Response.Flush();
        this.Context.ApplicationInstance.CompleteRequest();
    } 
```

在 ReturnToMemberScreen 函数中，我正在更改某些面板的可见性。这是功能：

```
 private void ReturnToMemberScreen()
    {
        this.panelMappings.Visible = false;
        this.MemberEditPNL.Visible = true;
    } 
```

我可以很好地下载文件，我的问题是我的面板的可见性没有改变。它与像我一样写到响应中有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:08:46.003

不要使用 Visible = false ，因为这会导致元素不被渲染。尝试：

```
// To hide:
 Panel1.Style.Add("display", "none");
// To show:
 Panel1.Style.Add("display", "block"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T19:31:23.587

仔细观察，我认为我无法对页面进行任何更改，因为我在执行此操作时将响应的 Content-Type 从“text/html”更改为 application/msword：

```
this.Response.AppendHeader("Content-Type", "application/msword"); 
```

结果，我改为使用 CSS 和 Javascript 进行所有更改。默认情况下，我使用 css 将面板设置为显示或隐藏：

```
.hide     
{         
    display:none;     
}

.show
{
    display:block;
} 
```

然后我将`OnClientClick`按钮的 设置为以下 Javascript 函数以更改显示：

```
function visible() 
{
    document.getElementById('<%=panelForms.ClientID %>').style.display = 'none';
    document.getElementById('<%=MemberEditPNL.ClientID %>').style.display = 'block';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T17:10:28.747

您是否在 Page_Load 事件中设置面板的可见性？如果是这样，并且您没有在事件中处理回发，那么可见性设置可能会覆盖 ReturnToMemberScreen 中的设置。

# git - 我可以从这个 git 错误中恢复吗？“致命：重复的 ref，并且 SHA1 不匹配：refs/heads/BranchName”

> ID：10110625
> 
> 赞同：2
> 
> 时间：2012-04-11T17:05:27.810
> 
> 标签：git, fatal-error

```
fatal: Duplicated ref, and SHA1s don't match: refs/heads/BranchName 
```

我应该注意到我在 Ubuntu Lucid 上，这与一些文件系统注释相关。

我在本地主机上执行 git pull origin master 后立即收到此错误。很平常的事情。拉动本身似乎有效，我看到了所有被拉下的文件的列表。但在那之后就什么都没有了。

我查看了关于 SO 的其他一些答案，但它们都涉及运行 git 命令。此时我无法运行任何 git 命令，包括 fsck。我只是得到同样的信息。有人建议我删除 .git/refs/heads/BranchName 但它没有用。虽然我看到了一件有趣的事情：/refs/heads 中唯一的东西是坏分支，带有 ? 最后（可能是一些未知字符）。那里没有列出其他分支机构。

过去我遇到过 git fsck 会失败的问题，然后又神奇地又好了。听起来很像 HD 失败，但 smartctl 的长期测试告诉我之前发生的情况并没有什么不好。我刚刚尝试了快速状态检查，它似乎仍然很好。

没什么大不了的，我可以重新克隆。我并没有失去太多。但是把它拿回来会很好，也可以在这里为遇到同样问题的其他人提供这个。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T17:37:42.703

我设法重现了这个问题：该文件`.git/packed-refs`有两个条目`refs/heads/BranchName`，它们有不同的 SHA，git 不知道哪个是正确的，并且给你留下了那个致命的错误。

删除其中一个以解决冲突，您的`BranchName`分支可能最终指向不存在的提交，但您将能够再次运行 git 命令。

# linux - Centos yum 崩溃，无法安装任何东西

> ID：10110626
> 
> 赞同：0
> 
> 时间：2012-04-11T17:05:29.860
> 
> 标签：linux, centos, yum

我在 centos 上有一个专用服务器。我想通过 makefile 安装软件，所以我需要“make”包。我尝试使用“yum install make”安装“make”软件包。

在安装过程中，它冻结了大约 30 分钟，所以我终止了该过程。

从那以后，我无法安装任何软件包。我试过重新安装“make”（从来没有完成过）和另一个包。

Yum 似乎开始了，但没有写任何东西并冻结在那里。

有没有办法“重启”百胜？还是一种“修复”它的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:24:04.787

说什么`yum install`？尝试通过设置禁用所有插件`enabled=0`并`/etc/yum.conf`重新安装。

# javascript - 编写 jQuery rolodex 风格的时钟翻转动画？

> ID：10110628
> 
> 赞同：6
> 
> 时间：2012-04-11T17:05:35.527
> 
> 标签：javascript, jquery, jquery-ui, animation

我正在努力根据那些带有向下翻转数字的旧时钟构建一个简单的动画。我在下面添加了一张从 Premium Pixels 上找到的免费赠品 PSD 复制的图像：

![翻转时钟 PSD](../Images/2c73ed0cf9ec317777bc1f75286855cb.png)

我遇到的最大问题是**在 HTML/CSS/JavaScript 中**使用 jQuery 构建“翻转”动画。我发现的唯一教程来自这篇实际使用图像[的网络 tuts+ 文章。](http://net.tutsplus.com/tutorials/html-css-techniques/learn-how-to-create-a-retro-animated-flip-down-clock/)它将时钟的上半部分和下半部分分成两个不同的图像集，并在每一秒经过时替换它们......

这种方法在网站中是不现实的，因为它没有为读者提供实际的上下文。我更喜欢将数字硬编码到 HTML 中，并仅通过 jQuery 执行翻转动画 - 除了背景自动收报机框之外最好没有图像。或者换句话说，**数字**被编码成 HTML，但时钟本身是一系列 rolodex 风格的 bg 图像。

我希望我已经解释得足够好。我已经为此苦苦挣扎了几天，老实说，我不知道如何处理这个脚本。也许通过将上半部分和下半部分分成不同的 div，然后改变每一秒的内部数字？我在 jQuery 方面相当富裕，但我在动画方面很弱。

提前感谢您的任何支持！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:05:57.420

我想我会尝试做一些文本在顶部和底部重复的事情。然后使用图像和 css 仅适当地显示每一半。

下一步将是创建文本与图像一起翻转的错觉。我不确定你想怎么做。我认为这是大小和速度的问题。文本相对于图像的大小以及它从底部顶部翻转的速度。

动画的最后一部分是让上半部分准备好下一个数字，下半部分在完成时排队。

我没有任何实际的代码可以提供帮助，但我希望这个概念能够奏效。

# android - 使用 OpenGL ES 对图像应用视觉效果

> ID：10110630
> 
> 赞同：2
> 
> 时间：2012-04-11T17:05:39.130
> 
> 标签：android, opengl-es, textures, libgdx

我正在使用 libgdx 制作一个将使用 TextureRegions 的 Android 应用程序，它定义了一个矩形的纹理区域。现在我不想使用 OpenGL ES 对 TextureRegion 应用一些视觉效果（它可以包括从模糊效果到渐变到发光效果到纹理的部分或全部部分的任何东西）。在通过互联网搜索并浏览了一些流行的教程之后，我对如何以动态方式应用这些效果感到迷茫。我尝试搜索一些库，这些库通过降低 OpenGL 的复杂性使这项任务变得更容易，并遇到了[Clutter](http://www.clutter-project.org/)，它对于这样一个简单的任务来说过于广泛。

任何人都可以指导我使用OpenGL ES操作和应用视觉效果到纹理的一些起点。任何库或教程/方法和解释都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T19:37:20.067

假设您使用的是 libgdx 支持的 GLES2.0。您可以将着色器应用于纹理。不幸的是，着色器并不容易掌握，您将不得不花费大量时间来学习它们。

libgdx 中的着色器示例 [http://www.badlogicgames.com/wordpress/?p=471](http://www.badlogicgames.com/wordpress/?p=471)

Rajawali 是另一个 GLES2.0 引擎，虽然它远不及 libgdx 的级别，但它确实包含许多基本着色器，这可能对您学习着色器有用。

# html - 如何选择要使用的搜索表单？

> ID：10110647
> 
> 赞同：1
> 
> 时间：2012-04-11T17:06:43.253
> 
> 标签：html, html-select, search-form

我正在尝试制作一个选择框以从一个搜索表单切换到另一个，但我对 HTML 表单非常缺乏经验。

这两个选项应该是“博客”和“商店”。（仅供参考，Wordpress 的博客和 Opencart 的商店。）

对于 Wordpress，搜索 url 将是：/?s=TEST 对于 Opencart：/shop/?route=product/search&filter_name=TEST

目前有两种形式：

```
<form method="get" id="blogsform" class="form-search" action="/">
 <input type="search" name="s" id="s" placeholder="Blog durchsuchen ...">
 <input type="submit" class="submit" id="searchsubmit" value="Durchsuchen">
</form>

<form method="get" id="shopsform" class="form-search" action="/shop/">
 <input type="hidden" name="route" value="product/search">
 <input type="search" name="filter_name" placeholder="Shop durchsuchen ...">
 <input type="submit" class="submit" id="searchsubmit" value="Durchsuchen">
</form> 
```

提前感谢您的帮助，马库斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:38:10.910

使用 jQuery，这些是在`onchange`选择框事件中应用的简单更改：

```
<select id="chooseform">
    <option value="">Select Form...</option>
    <option value="Blog">Blog</option>
    <option value="Shops">Shops</option>
</select> 
```

* * *

如果您想要两个表单，并根据选择显示/隐藏每个表单，您可以执行以下操作：

```
$('#chooseform').change(function() {
    var choice = $(this).val();
    if (choice == "Blog")
    {
        $('#blogsform').show();
        $('#shopsform').hide();
    }
    else if (choice == "Shops")
    {
        $('#blogsform').hide();
        $('#shopsform').show();
    }
    else
    {
        $('#blogsform').hide();
        $('#shopsform').hide();
    }
});​ 
```

演示：http: [//jsfiddle.net/Pf9QQ/](http://jsfiddle.net/Pf9QQ/)

* * *

如果您想要一个表单，但要根据选择动态更改表单的操作/方法和显示属性，您可以这样做：

```
$('#chooseform').change(function() {
    var choice = $(this).val();
    if (choice == "Blog")
    {
        $('#theform').attr('action', '/');
        $('#s').attr('name', 's');
        $('#s').attr('placeholder', 'Blog durchsuchen ...');
        $('#theform').show();
    }
    else if (choice == "Shops")
    {
        $('#theform').attr('action', '/shop/');
        $('#s').attr('name', 'filter_name');
        $('#s').attr('placeholder', 'Shop durchsuchen ...');
        $('#theform').show();
    }
    else
    {
        $('#theform').hide();
    }
});​ 
```

演示：http: [//jsfiddle.net/JgLSE/](http://jsfiddle.net/JgLSE/)

* * *

您选择哪种方法取决于哪种方法更易于维护。如果您的表格非常大，只有一些细微差别，您可以使用第二种方法。如果表单非常不同，我将只维护两个单独的完整表单并根据用户的选择适当地显示/隐藏它们，因为这样会减少混乱或复杂。

# mysql - 如何构造mysql表以避免多余的行

> ID：10110648
> 
> 赞同：0
> 
> 时间：2012-04-11T17:06:49.047
> 
> 标签：mysql, database, database-design, data-structures

我正在维护费用记录，费用表如下所示

```
Expenses(id,name)
Expenses_data(id,amount,expense_id) 
```

费用是按年计算的，假设是 10 年，我将其保存为几个月，所以它将是 120 个月

如果我有 10 个费用，那么费用数据将有 120*10 = 1200 行

我想将它从 1200 行保存到 120 行，当我在 excel 中输入时，数据将是这样的

```
id   month    marketing   electricity   bank charges
1    month-1    100          200           300
2    month-2    95.5         5000          100 
```

请建议是否可能以及如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:13:42.690

我认为您可能要坚持已有的数据库结构，但使用查询以您希望的格式显示数据。

如果您考虑要存储的数据点的数量，您所寻求的架构与您已经拥有的架构之间并没有太大的区别——它仍然是 1200 个数据点的费用。每次添加费用列时都必须升级架构，这将是非常具有侵入性的。

坚持查询您的 excel 导出将使数据库能够理解费用类别的概念，并且更新您的导出查询以包含新类别将比修改架构容易得多。甚至可以通过迭代“已知哪些费用类别？”的初始查询以编程方式计算必要的 JOIN。

# php - 发布到数据库后的 PHP 重定向

> ID：10110656
> 
> 赞同：4
> 
> 时间：2012-04-11T17:07:19.230
> 
> 标签：php, sql, redirect

我正在使用此代码...

```
<?php
if (isset($_POST['submitButton'])) { 
mysql_query("UPDATE notes SET Note=('$_POST[note]')
WHERE UserID='19'");

mysql_close($con);
header('Location: editrem3.htm'); //clears POST
}
?> 
```

用户点击提交并发布数据后如何重定向页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:08:31.407

首先，确保您通过在块内输入某些内容来进入`if()`条件。`echo``if()`

如果它工作正常，请确保在`header()`执行之前您没有发送任何内容。因为当您`header()`在 PHP 文件中使用时，在此之前不得有任何其他输出语句。因此，请检查之前的任何 HTML 代码或`echo`s。

然后，如果您确定它`header()`正在执行，但仍然没有重定向，请确保目标文件存在。

额外：总是在重定向`exit()`后立即添加。`header()`否则代码将继续执行并可能泄露您的敏感数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:49:50.037

使用文件的相对路径可能会导致问题。尝试使用完整路径（也可能在 if{} 之外更有意义）。

PHP 可能能够解析相对路径，但[w3 规范明确声明使用绝对 URI](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30)

编辑：详细地说，将相对路径交给浏览器进行重定向是在玩火。浏览器可能认为它知道它在您网站的层次结构中的位置，但它实际上可能位于不同的位置。

此外，如果您没有获得 404 页面或类似的页面，那么相对路径*可能*不是您的问题，但它可能会在以后帮助您

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:08:22.103

使用元重定向，比如

```
<meta http-equiv="refresh" content="0; url=http://example.com/"> 
```

但你可以做类似的事情

```
<meta http-equiv="refresh" content="0; url=index.php"> 
```

适合我

# objective-c - 以编程方式获取 OS X 中的 GPU 使用百分比

> ID：10110658
> 
> 赞同：6
> 
> 时间：2012-04-11T17:07:24.320
> 
> 标签：objective-c, macos, gpu

是否有在 OS X（10.6 和 10.7）上的 Cocoa/Objective-C 中获取 GPU 百分比使用率的标准方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-16T17:25:49.360

享受它，GPU 和 RAM 的使用，顺便说一句，在谨慎的 GPU 上不起作用，因为它没有公开性能监控字典。我的 MBP 有一个 NVIDIA gpu，应该也可以在 ATI 上工作，但我不确定 100%

```
#include <CoreFoundation/CoreFoundation.h>
#include <Cocoa/Cocoa.h>
#include <IOKit/IOKitLib.h>

int main(int argc, const char * argv[])
{

while (1) {

    // Get dictionary of all the PCI Devicces
    CFMutableDictionaryRef matchDict = IOServiceMatching(kIOAcceleratorClassName);

    // Create an iterator
    io_iterator_t iterator;

    if (IOServiceGetMatchingServices(kIOMasterPortDefault,matchDict,
                                     &iterator) == kIOReturnSuccess)
    {
        // Iterator for devices found
        io_registry_entry_t regEntry;

        while ((regEntry = IOIteratorNext(iterator))) {
            // Put this services object into a dictionary object.
            CFMutableDictionaryRef serviceDictionary;
            if (IORegistryEntryCreateCFProperties(regEntry,
                                                  &serviceDictionary,
                                                  kCFAllocatorDefault,
                                                  kNilOptions) != kIOReturnSuccess)
            {
                // Service dictionary creation failed.
                IOObjectRelease(regEntry);
                continue;
            }

            CFMutableDictionaryRef perf_properties = (CFMutableDictionaryRef) CFDictionaryGetValue( serviceDictionary, CFSTR("PerformanceStatistics") );
            if (perf_properties) {

                static ssize_t gpuCoreUse=0;
                static ssize_t freeVramCount=0;
                static ssize_t usedVramCount=0;

                const void* gpuCoreUtilization = CFDictionaryGetValue(perf_properties, CFSTR("GPU Core Utilization"));
                const void* freeVram = CFDictionaryGetValue(perf_properties, CFSTR("vramFreeBytes"));
                const void* usedVram = CFDictionaryGetValue(perf_properties, CFSTR("vramUsedBytes"));
                if (gpuCoreUtilization && freeVram && usedVram)
                {
                    CFNumberGetValue( (CFNumberRef) gpuCoreUtilization, kCFNumberSInt64Type, &gpuCoreUse);
                    CFNumberGetValue( (CFNumberRef) freeVram, kCFNumberSInt64Type, &freeVramCount);
                    CFNumberGetValue( (CFNumberRef) usedVram, kCFNumberSInt64Type, &usedVramCount);
                    NSLog(@"GPU: %.3f%% VRAM: %.3f%%",gpuCoreUse/(double)10000000,usedVramCount/(double)(freeVramCount+usedVramCount)*100.0);

                }

            }

            CFRelease(serviceDictionary);
            IOObjectRelease(regEntry);
        }
        IOObjectRelease(iterator);
    }

   sleep(1);
}
return 0;
} 
```

# multithreading - 误解单线程和多线程编程的区别

> ID：10110660
> 
> 赞同：38
> 
> 时间：2012-04-11T17:07:27.440
> 
> 标签：multithreading, language-agnostic

我对单线程和多线程编程之间的区别有一个误解，所以我想回答下面的问题，以使一切清楚。

假设有 9 个独立的任务，我想用一个单线程程序和一个多线程程序来完成它们。基本上它会是这样的：

**单线程：**

```
- Execute task 1
- Execute task 2
- Execute task 3
- Execute task 4
- Execute task 5
- Execute task 6
- Execute task 7
- Execute task 8
- Execute task 9 
```

**多线程：**

**线程1：**

```
- Execute task 1
- Execute task 2
- Execute task 3 
```

**线程2：**

```
- Execute task 4
- Execute task 5
- Execute task 6 
```

**线程3：**

```
- Execute task 7
- Execute task 8
- Execute task 9 
```

据我了解，一次只会执行*一个*线程（获取CPU），一旦量子完成，线程调度程序会将CPU时间分配给另一个线程。

那么，哪个节目会更早完成呢？它是多线程程序（逻辑上）吗？还是单线程程序（因为多线程有很多上下文切换需要一些时间）？为什么？我需要一个很好的解释：）

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-11T17:10:02.017

这取决于。

你有多少个CPU？您的任务涉及多少 I/O？

1.  如果您只有 1 个 CPU，并且任务没有阻塞 I/O，那么单线程的完成速度将等于或快于多线程，因为切换线程会产生开销。

2.  如果您有 1 个 CPU，但任务涉及大量阻塞 I/O，您可能会看到使用线程的加速，假设工作可以在 I/O 进行时完成。

3.  如果您有多个 CPU，那么您应该会看到多线程实现比单线程加速，因为可以并行执行多个线程。当然，除非任务以 I/O 为主，在这种情况下，限制因素是您的设备速度，而不是 CPU 功率。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-11T17:10:32.347

> 据我了解，一次只会执行一个线程

如果 CPU 只有一个内核，就会出现这种情况。现代 CPU 具有多个内核，并且可以并行运行多个线程。

运行三个线程的程序运行速度几乎快三倍。即使任务是独立的，计算机中仍有一些资源必须在线程之间共享，例如内存访问。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T17:28:42.007

假设集：单核，无超线程；任务受 CPU 限制；每个任务需要 3 个 quanta 的时间；每个调度程序分配限制为 1 个时间量；FIFO 调度器 非抢占式；所有线程同时命中调度器；所有上下文切换都需要相同的时间；

流程描述如下：

*   测试1：单进程，单线程（包含所有9个任务）
*   测试 2：单进程，三个线程（每个包含 3 个任务）
*   测试 3：三个进程，每个单线程（每个包含 3 个任务）
*   测试 4：三个进程，每个进程有三个线程（每个包含一个任务）

有了上述假设，它们都同时完成。这是因为为 CPU 安排了相同的时间量，上下文切换是相同的，没有中断处理，没有任何东西在等待 IO。

如需更深入地了解其本质，请参阅[这本书](https://rads.stackoverflow.com/amzn/click/com/0471489050)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-11T17:12:58.837

好吧，这并不完全与语言无关。一些解释型编程语言不支持真正的线程。也就是说，执行线程可以由程序定义，但解释器是单线程的，因此所有执行都在 CPU 的一个核心上。

对于编译语言和支持真正多线程的语言，单个 CPU 可以有多个内核。实际上，现在大多数台式计算机都有 2 或 4 个内核。因此，执行真正独立任务的多线程程序可以根据 CPU 中可用内核的数量快 2-4 倍。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-04T09:28:54.737

Java中单线程和多线程的主要区别在于，单线程执行一个进程的任务，而在多线程中，多个线程执行一个进程的任务。

进程是正在执行的程序。进程创建是一项消耗资源的任务。因此，可以将一个进程划分为多个称为线程的单元。线程是一个轻量级进程。可以将单个进程划分为多个线程并为它们分配任务。当一个进程中有一个线程时，它被称为单线程应用程序。当一个进程中有多个线程时，称为多线程应用程序。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-02-22T02:11:27.567

ruby vs python vs nodejs : web 应用程序中的性能，需要大量的 I/O 非阻塞rest/dbQuery 会影响很多。作为所有 3 个中唯一的多线程，nodejs 是领先差距很大的赢家

# css - 文件上传css

> ID：10110676
> 
> 赞同：0
> 
> 时间：2012-04-11T17:08:48.667
> 
> 标签：css

我很难弄清楚哪个 css 规则弄乱了文件上传表单元素，因为它与其他表单元素没有完全对齐。

[http://jsfiddle.net/emRr2/](http://jsfiddle.net/emRr2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:16:19.660

有一些相互冲突的风格。

此样式会覆盖自定义元素的宽度和填充：

```
form .section > div {
    [...]
    padding: 0 10px 0 1%;
    width: 75%;
} 
```

在自定义字段周围添加 DIV 将固定宽度：

```
<div class="section _100">
    <label for="file">Image</label>
    <div> <!-- New DIV -->
        <div class="customfile">
            <button class="customfile-button" aria-hidden="true">Browse</button>
            <span class="customfile-feedback" aria-hidden="true">No file selected...</span>
            <input type="file" style="left: -53.4167px; top: 24.1667px; margin: 0px;" name="file" value="" class="required customfile-input">
        </div>
    </div> <!-- /New DIV -->
</div> 
```

在我看来，您还应该删除以下内容，即偏移按钮并增加高度：

```
.customfile-button {
    margin-top:6px;
} 
```

# java - 运行 docx4j createhtml.java 文件时出错

> ID：10110680
> 
> 赞同：0
> 
> 时间：2012-04-11T17:09:21.100
> 
> 标签：java, html, xml, docx4j

```
C:\Users\Agastheswar\Desktop\RESUME2.docx
log4j:WARN No appenders could be found for logger (org.docx4j.utils.ResourceUtils).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
16 [main] INFO org.docx4j.utils.Log4jConfigurator  - Since your log4j configuration (if any) was not found, docx4j has configured log4j automatically.
32 [main] INFO org.docx4j.jaxb.Context  - JAXB: RI not present.  Trying Java 6 implementation.
32 [main] INFO org.docx4j.jaxb.Context  - JAXB: Using Java 6 implementation.
32 [main] INFO org.docx4j.jaxb.Context  - loading Context jc
9813 [main] INFO org.docx4j.jaxb.Context  - loaded com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl .. loading others ..
10360 [main] INFO org.docx4j.jaxb.Context  - .. others loaded ..
10439 [main] INFO org.docx4j.openpackaging.contenttype.ContentTypeManager  - Detected WordProcessingML package 
10458 [main] INFO org.docx4j.openpackaging.parts.Part  - /_rels/.rels
10458 [main] INFO org.docx4j.openpackaging.parts.relationships.RelationshipsPart  - unmarshalling org.docx4j.openpackaging.parts.relationships.RelationshipsPart
10467 [main] INFO org.docx4j.openpackaging.parts.Part  - /docProps/app.xml
10467 [main] INFO org.docx4j.openpackaging.parts.DocPropsExtendedPart  - unmarshalling org.docx4j.openpackaging.parts.DocPropsExtendedPart
10474 [main] INFO org.docx4j.openpackaging.parts.Part  - /docProps/core.xml
10474 [main] INFO org.docx4j.openpackaging.parts.DocPropsCorePart  - unmarshalling org.docx4j.openpackaging.parts.DocPropsCorePart
10483 [main] INFO org.docx4j.openpackaging.parts.Part  - /word/document.xml
10483 [main] INFO org.docx4j.openpackaging.parts.WordprocessingML.MainDocumentPart  - For MDP, unmarshall via binder
10748 [main] INFO org.docx4j.openpackaging.parts.Part  - /word/_rels/document.xml.rels
10748 [main] INFO org.docx4j.openpackaging.parts.relationships.RelationshipsPart  - unmarshalling org.docx4j.openpackaging.parts.relationships.RelationshipsPart
10751 [main] INFO org.docx4j.openpackaging.parts.Part  - /word/fontTable.xml
10821 [main] ERROR org.docx4j.XmlUtils  - javax.xml.transform.TransformerFactoryConfigurationError: Provider org.apache.xalan.processor.TransformerFactoryImpl not found
Warning: Xalan jar missing from classpath; xslt not supported
10823 [main] WARN org.docx4j.XmlUtils  - Using default SAXParserFactory: null
10824 [main] INFO org.docx4j.openpackaging.parts.Part  - /word/styles.xml
10850 [main] INFO org.docx4j.openpackaging.io.LoadFromZipNG  - Encountered (but not loading) hyperlink mailto:agastheswar@gmail.com
10851 [main] INFO org.docx4j.openpackaging.parts.Part  - /word/numbering.xml
10886 [main] INFO org.docx4j.openpackaging.contenttype.ContentTypeManager  - Looking at extension 'xml
10887 [main] INFO org.docx4j.openpackaging.contenttype.ContentTypeManager  - Found content type 'application/xml' for /customXml/item1.xml
10887 [main] INFO org.docx4j.openpackaging.parts.Part  - /customXml/item1.xml
10889 [main] INFO org.docx4j.openpackaging.parts.Part  - /customXml/item1.xml
10890 [main] INFO org.docx4j.openpackaging.parts.Part  - /customXml/_rels/item1.xml.rels
10890 [main] INFO org.docx4j.openpackaging.parts.relationships.RelationshipsPart  - unmarshalling org.docx4j.openpackaging.parts.relationships.RelationshipsPart
10901 [main] INFO org.docx4j.openpackaging.parts.Part  - /customXml/itemProps1.xml
10903 [main] INFO org.docx4j.openpackaging.parts.Part  - /word/webSettings.xml
10906 [main] INFO org.docx4j.openpackaging.parts.Part  - /word/settings.xml
10936 [main] WARN org.docx4j.jaxb.JaxbValidationEventHandler  - [ERROR] : unexpected element (uri:"http://schemas.openxmlformats.org/wordprocessingml/2006/main", local:"compatSetting"). Expected
10936 [main] INFO org.docx4j.jaxb.JaxbValidationEventHandler  - continuing (with possible element/attribute loss)
10939 [main] INFO org.docx4j.openpackaging.parts.JaxbXmlPart  - encountered unexpected content; pre-processing
11233 [main] ERROR org.docx4j.XmlUtils  - Detected com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl, but require org.apache.xalan.transformer.TransformerImpl. Ensure Xalan 2.7.0 is on your classpath!
11263 [main] WARN org.docx4j.jaxb.JaxbValidationEventHandler  - [ERROR] : unexpected element (uri:"http://schemas.openxmlformats.org/wordprocessingml/2006/main", local:"compatSetting"). Expected
11263 [main] INFO org.docx4j.jaxb.JaxbValidationEventHandler  - continuing (with possible element/attribute loss)
11264 [main] WARN org.docx4j.jaxb.JaxbValidationEventHandler  - [ERROR] : unexpected element (uri:"http://schemas.openxmlformats.org/wordprocessingml/2006/main", local:"compatSetting"). Expected
11264 [main] INFO org.docx4j.jaxb.JaxbValidationEventHandler  - continuing (with possible element/attribute loss)
11265 [main] WARN org.docx4j.jaxb.JaxbValidationEventHandler  - [ERROR] : unexpected element (uri:"http://schemas.openxmlformats.org/wordprocessingml/2006/main", local:"compatSetting"). Expected
11265 [main] INFO org.docx4j.jaxb.JaxbValidationEventHandler  - continuing (with possible element/attribute loss)
11266 [main] WARN org.docx4j.jaxb.JaxbValidationEventHandler  - [ERROR] : unexpected element (uri:"http://schemas.openxmlformats.org/wordprocessingml/2006/main", local:"compatSetting"). Expected
11266 [main] INFO org.docx4j.jaxb.JaxbValidationEventHandler  - continuing (with possible element/attribute loss)
11275 [main] WARN org.docx4j.openpackaging.contenttype.ContentTypeManager  - DefaultPart used for part '/word/stylesWithEffects.xml' of content type 'application/vnd.ms-word.stylesWithEffects+xml'
11278 [main] INFO org.docx4j.openpackaging.parts.Part  - /word/stylesWithEffects.xml
11296 [main] INFO org.docx4j.openpackaging.parts.Part  - /word/theme/theme1.xml
11296 [main] INFO org.docx4j.openpackaging.parts.ThemePart  - unmarshalling org.docx4j.openpackaging.parts.ThemePart
11469 [main] ERROR org.docx4j.XmlUtils  - Cannot convert argument/return type in call to method 'org.docx4j.convert.out.html.HtmlExporterNG2.getCssForTableCells(reference, node-set)'
javax.xml.transform.TransformerException: Cannot convert argument/return type in call to method 'org.docx4j.convert.out.html.HtmlExporterNG2.getCssForTableCells(reference, node-set)'
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.passErrorsToListener(Unknown Source)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTemplates(Unknown Source)
    at org.docx4j.XmlUtils.getTransformerTemplate(XmlUtils.java:733)
    at org.docx4j.convert.out.html.HtmlExporterNG2.<clinit>(HtmlExporterNG2.java:126)
    at CreateHtml.main(CreateHtml.java:51)
11472 [main] ERROR org.docx4j.XmlUtils  - Cannot convert argument/return type in call to method 'org.docx4j.convert.out.html.HtmlExporterNG2.createBlockForPPr(reference, node-set, string, result-tree)'
javax.xml.transform.TransformerException: Cannot convert argument/return type in call to method 'org.docx4j.convert.out.html.HtmlExporterNG2.createBlockForPPr(reference, node-set, string, result-tree)'
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.passErrorsToListener(Unknown Source)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTemplates(Unknown Source)
    at org.docx4j.XmlUtils.getTransformerTemplate(XmlUtils.java:733)
    at org.docx4j.convert.out.html.HtmlExporterNG2.<clinit>(HtmlExporterNG2.java:126)
    at CreateHtml.main(CreateHtml.java:51)
11473 [main] ERROR org.docx4j.XmlUtils  - Cannot convert argument/return type in call to method 'org.docx4j.convert.out.html.HtmlExporterNG2.createBlockForRPr(reference, string, node-set, result-tree)'
javax.xml.transform.TransformerException: Cannot convert argument/return type in call to method 'org.docx4j.convert.out.html.HtmlExporterNG2.createBlockForRPr(reference, string, node-set, result-tree)'
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.passErrorsToListener(Unknown Source)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTemplates(Unknown Source)
    at org.docx4j.XmlUtils.getTransformerTemplate(XmlUtils.java:733)
    at org.docx4j.convert.out.html.HtmlExporterNG2.<clinit>(HtmlExporterNG2.java:126)
    at CreateHtml.main(CreateHtml.java:51)
11473 [main] ERROR org.docx4j.XmlUtils  - Cannot convert argument/return type in call to method 'org.docx4j.convert.out.html.SdtWriter.toNode(reference, node-set, result-tree)'
javax.xml.transform.TransformerException: Cannot convert argument/return type in call to method 'org.docx4j.convert.out.html.SdtWriter.toNode(reference, node-set, result-tree)'
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.passErrorsToListener(Unknown Source)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTemplates(Unknown Source)
    at org.docx4j.XmlUtils.getTransformerTemplate(XmlUtils.java:733)
    at org.docx4j.convert.out.html.HtmlExporterNG2.<clinit>(HtmlExporterNG2.java:126)
    at CreateHtml.main(CreateHtml.java:51)
11473 [main] ERROR org.docx4j.XmlUtils  - Cannot convert argument/return type in call to method 'org.docx4j.model.images.WordXmlPictureE20.createHtmlImgE20(reference, reference, node-type)'
javax.xml.transform.TransformerException: Cannot convert argument/return type in call to method 'org.docx4j.model.images.WordXmlPictureE20.createHtmlImgE20(reference, reference, node-type)'
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.passErrorsToListener(Unknown Source)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTemplates(Unknown Source)
    at org.docx4j.XmlUtils.getTransformerTemplate(XmlUtils.java:733)
    at org.docx4j.convert.out.html.HtmlExporterNG2.<clinit>(HtmlExporterNG2.java:126)
    at CreateHtml.main(CreateHtml.java:51)
11474 [main] ERROR org.docx4j.XmlUtils  - Cannot convert argument/return type in call to method 'org.docx4j.convert.out.html.HtmlExporterNG2.notImplemented(node-type, string)'
javax.xml.transform.TransformerException: Cannot convert argument/return type in call to method 'org.docx4j.convert.out.html.HtmlExporterNG2.notImplemented(node-type, string)'
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.passErrorsToListener(Unknown Source)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTemplates(Unknown Source)
    at org.docx4j.XmlUtils.getTransformerTemplate(XmlUtils.java:733)
    at org.docx4j.convert.out.html.HtmlExporterNG2.<clinit>(HtmlExporterNG2.java:126)
    at CreateHtml.main(CreateHtml.java:51)
11476 [main] ERROR org.docx4j.XmlUtils  - Cannot convert argument/return type in call to method 'org.docx4j.model.images.WordXmlPictureE10.createHtmlImgE10(reference, reference, node-type)'
javax.xml.transform.TransformerException: Cannot convert argument/return type in call to method 'org.docx4j.model.images.WordXmlPictureE10.createHtmlImgE10(reference, reference, node-type)'
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.passErrorsToListener(Unknown Source)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTemplates(Unknown Source)
    at org.docx4j.XmlUtils.getTransformerTemplate(XmlUtils.java:733)
    at org.docx4j.convert.out.html.HtmlExporterNG2.<clinit>(HtmlExporterNG2.java:126)
    at CreateHtml.main(CreateHtml.java:51)
11501 [main] ERROR org.docx4j.XmlUtils  - Cannot convert argument/return type in call to method 'org.docx4j.convert.out.html.HtmlExporterNG2.notImplemented(node-type, string)'
javax.xml.transform.TransformerException: Cannot convert argument/return type in call to method 'org.docx4j.convert.out.html.HtmlExporterNG2.notImplemented(node-type, string)'
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.passErrorsToListener(Unknown Source)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTemplates(Unknown Source)
    at org.docx4j.XmlUtils.getTransformerTemplate(XmlUtils.java:733)
    at org.docx4j.convert.out.html.HtmlExporterNG2.<clinit>(HtmlExporterNG2.java:126)
    at CreateHtml.main(CreateHtml.java:51)
11501 [main] ERROR org.docx4j.XmlUtils  - Cannot convert argument/return type in call to method 'org.docx4j.convert.out.html.HtmlExporterNG2.notImplemented(node-type, string)'
javax.xml.transform.TransformerException: Cannot convert argument/return type in call to method 'org.docx4j.convert.out.html.HtmlExporterNG2.notImplemented(node-type, string)'
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.passErrorsToListener(Unknown Source)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTemplates(Unknown Source)
    at org.docx4j.XmlUtils.getTransformerTemplate(XmlUtils.java:733)
    at org.docx4j.convert.out.html.HtmlExporterNG2.<clinit>(HtmlExporterNG2.java:126)
    at CreateHtml.main(CreateHtml.java:51)
11501 [main] ERROR org.docx4j.XmlUtils  - Cannot convert argument/return type in call to method 'org.docx4j.convert.out.html.HtmlExporterNG2.notImplemented(node-type, string)'
javax.xml.transform.TransformerException: Cannot convert argument/return type in call to method 'org.docx4j.convert.out.html.HtmlExporterNG2.notImplemented(node-type, string)'
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.passErrorsToListener(Unknown Source)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTemplates(Unknown Source)
    at org.docx4j.XmlUtils.getTransformerTemplate(XmlUtils.java:733)
    at org.docx4j.convert.out.html.HtmlExporterNG2.<clinit>(HtmlExporterNG2.java:126)
    at CreateHtml.main(CreateHtml.java:51)
11502 [main] ERROR org.docx4j.XmlUtils  - Cannot convert argument/return type in call to method 'org.docx4j.convert.out.html.HtmlExporterNG2.notImplemented(node-type, string)'
javax.xml.transform.TransformerException: Cannot convert argument/return type in call to method 'org.docx4j.convert.out.html.HtmlExporterNG2.notImplemented(node-type, string)'
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.passErrorsToListener(Unknown Source)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTemplates(Unknown Source)
    at org.docx4j.XmlUtils.getTransformerTemplate(XmlUtils.java:733)
    at org.docx4j.convert.out.html.HtmlExporterNG2.<clinit>(HtmlExporterNG2.java:126)
    at CreateHtml.main(CreateHtml.java:51)
11502 [main] ERROR org.docx4j.XmlUtils  - Cannot convert argument/return type in call to method 'org.docx4j.convert.out.html.HtmlExporterNG2.notImplemented(node-type, string)'
javax.xml.transform.TransformerException: Cannot convert argument/return type in call to method 'org.docx4j.convert.out.html.HtmlExporterNG2.notImplemented(node-type, string)'
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.passErrorsToListener(Unknown Source)
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTemplates(Unknown Source)
    at org.docx4j.XmlUtils.getTransformerTemplate(XmlUtils.java:733)
    at org.docx4j.convert.out.html.HtmlExporterNG2.<clinit>(HtmlExporterNG2.java:126)
    at CreateHtml.main(CreateHtml.java:51)
javax.xml.transform.TransformerConfigurationException: Could not compile stylesheet
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTemplates(Unknown Source)
    at org.docx4j.XmlUtils.getTransformerTemplate(XmlUtils.java:733)
    at org.docx4j.convert.out.html.HtmlExporterNG2.<clinit>(HtmlExporterNG2.java:126)
    at CreateHtml.main(CreateHtml.java:51)
11502 [main] ERROR org.docx4j.XmlUtils  - Could not compile stylesheet
javax.xml.transform.TransformerConfigurationException: Could not compile stylesheet
    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTemplates(Unknown Source)
    at org.docx4j.XmlUtils.getTransformerTemplate(XmlUtils.java:733)
    at org.docx4j.convert.out.html.HtmlExporterNG2.<clinit>(HtmlExporterNG2.java:126)
    at CreateHtml.main(CreateHtml.java:51)
13086 [main] WARN org.docx4j.fonts.PhysicalFonts  - Aborting: file:/C:/Windows/FONTS/ALGER.TTF (can't get EmbedFontInfo[] .. try deleting fop-fonts.cache?)
13102 [main] WARN org.docx4j.fonts.PhysicalFonts  - Aborting: file:/C:/Windows/FONTS/BAUHS93.TTF (can't get EmbedFontInfo[] .. try deleting fop-fonts.cache?)
13102 [main] WARN org.docx4j.fonts.PhysicalFonts  - Aborting: file:/C:/Windows/FONTS/BERNHC.TTF (can't get EmbedFontInfo[] .. try deleting fop-fonts.cache?)
13119 [main] WARN org.docx4j.fonts.PhysicalFonts  - Aborting: file:/C:/Windows/FONTS/BROADW.TTF (can't get EmbedFontInfo[] .. try deleting fop-fonts.cache?)
13134 [main] WARN org.docx4j.fonts.PhysicalFonts  - Aborting: file:/C:/Windows/FONTS/CHILLER.TTF (can't get EmbedFontInfo[] .. try deleting fop-fonts.cache?)
13165 [main] WARN org.docx4j.fonts.PhysicalFonts  - Aborting: file:/C:/Windows/FONTS/ELEPHNTI.TTF (can't get EmbedFontInfo[] .. try deleting fop-fonts.cache?)
13181 [main] WARN org.docx4j.fonts.PhysicalFonts  - Aborting: file:/C:/Windows/FONTS/Gabriola.ttf (can't get EmbedFontInfo[] .. try deleting fop-fonts.cache?)
13197 [main] WARN org.docx4j.fonts.PhysicalFonts  - Aborting: file:/C:/Windows/FONTS/GIGI.TTF (can't get EmbedFontInfo[] .. try deleting fop-fonts.cache?)
13212 [main] WARN org.docx4j.fonts.PhysicalFonts  - Aborting: file:/C:/Windows/FONTS/HARLOWSI.TTF (can't get EmbedFontInfo[] .. try deleting fop-fonts.cache?)
13212 [main] WARN org.docx4j.fonts.PhysicalFonts  - Aborting: file:/C:/Windows/FONTS/HARNGTON.TTF (can't get EmbedFontInfo[] .. try deleting fop-fonts.cache?)
13212 [main] WARN org.docx4j.fonts.PhysicalFonts  - Aborting: file:/C:/Windows/FONTS/HATTEN.TTF (can't get EmbedFontInfo[] .. try deleting fop-fonts.cache?)
13212 [main] WARN org.docx4j.fonts.PhysicalFonts  - Aborting: file:/C:/Windows/FONTS/impact.ttf (can't get EmbedFontInfo[] .. try deleting fop-fonts.cache?)
13228 [main] WARN org.docx4j.fonts.PhysicalFonts  - Aborting: file:/C:/Windows/FONTS/ITCBLKAD.TTF (can't get EmbedFontInfo[] .. try deleting fop-fonts.cache?)
13228 [main] WARN org.docx4j.fonts.PhysicalFonts  - Aborting: file:/C:/Windows/FONTS/JOKERMAN.TTF (can't get EmbedFontInfo[] .. try deleting fop-fonts.cache?)
13228 [main] WARN org.docx4j.fonts.PhysicalFonts  - Aborting: file:/C:/Windows/FONTS/JUICE___.TTF (can't get EmbedFontInfo[] .. try deleting fop-fonts.cache?)
13306 [main] WARN org.docx4j.fonts.PhysicalFonts  - Aborting: file:/C:/Windows/FONTS/PLAYBILL.TTF (can't get EmbedFontInfo[] .. try deleting fop-fonts.cache?)
13337 [main] WARN org.docx4j.fonts.PhysicalFonts  - Aborting: file:/C:/Windows/FONTS/SNAP____.TTF (can't get EmbedFontInfo[] .. try deleting fop-fonts.cache?)
13353 [main] WARN org.docx4j.fonts.PhysicalFonts  - Aborting: file:/C:/Windows/FONTS/STENCIL.TTF (can't get EmbedFontInfo[] .. try deleting fop-fonts.cache?)
13353 [main] WARN org.docx4j.fonts.PhysicalFonts  - Aborting: file:/C:/Windows/FONTS/SWMacro.otf (can't get EmbedFontInfo[] .. try deleting fop-fonts.cache?)
13353 [main] WARN org.docx4j.fonts.PhysicalFonts  - Aborting: file:/C:/Windows/FONTS/TEMPSITC.TTF (can't get EmbedFontInfo[] .. try deleting fop-fonts.cache?)
13415 [main] INFO org.docx4j.openpackaging.parts.WordprocessingML.StyleDefinitionsPart  - Style with name Normal, id 'Normal' is default paragraph style
13431 [main] INFO org.docx4j.openpackaging.parts.WordprocessingML.StyleDefinitionsPart  - Style with name Default Paragraph Font, id 'DefaultParagraphFont' is default character style
Exception in thread "main" java.lang.NullPointerException
    at org.docx4j.XmlUtils.transform(XmlUtils.java:763)
    at org.docx4j.XmlUtils.transform(XmlUtils.java:723)
    at org.docx4j.convert.out.html.HtmlExporterNG2.html(HtmlExporterNG2.java:269)
    at CreateHtml.main(CreateHtml.java:76) 
```

首先无法修复日志文件接下来无法理解错误并修复它们我使用了以下代码：

```
public class CreateHtml extends AbstractSample {

    public static void main(String[] args) 
            throws Exception {

        try {
            getInputFilePath(args);
        } catch (IllegalArgumentException e) {

            inputfilepath = System.getProperty("user.dir") + "/sample-docs/word/sample-docx.xml";
        }
        System.out.println(inputfilepath);          

        boolean save = true;            

        WordprocessingMLPackage wordMLPackage = WordprocessingMLPackage.load(new java.io.File(inputfilepath));

        AbstractHtmlExporter exporter = new HtmlExporterNG2();  

        HtmlSettings htmlSettings = new HtmlSettings();

        htmlSettings.setImageDirPath(inputfilepath + "_files"); 
        htmlSettings.setImageTargetUri(inputfilepath.substring(inputfilepath.lastIndexOf("/")+1) 
                + "_files");

        htmlSettings.setUserBodyTop("<H1>TOP!</H1>");
        htmlSettings.setUserBodyTail("<H1>TAIL!</H1>");

        SdtWriter.registerTagHandler(Containerization.TAG_BORDERS, new TagSingleBox() );
        SdtWriter.registerTagHandler(Containerization.TAG_SHADING, new TagSingleBox() );

        OutputStream os; 
        if (save) {
            os = new java.io.FileOutputStream(inputfilepath + ".html");
        } else {
            os = System.out;

        }

        javax.xml.transform.stream.StreamResult result = new javax.xml.transform.stream.StreamResult(os);
        exporter.html(wordMLPackage, result, htmlSettings);
        if (save) {
            System.out.println("Saved: " + inputfilepath + ".html using " +  exporter.getClass().getName() );
        }

    }
} 
```

这是我使用的代码！！！我已经从我的桌面给输入文件一个 docx 文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T22:36:52.033

从您提供的日志中：

```
10821 [main] ERROR org.docx4j.XmlUtils  - javax.xml.transform.TransformerFactoryConfigurationError: Provider org.apache.xalan.processor.TransformerFactoryImpl not found
Warning: Xalan jar missing from classpath; xslt not supported
10823 [main] WARN org.docx4j.XmlUtils  - Using default SAXParserFactory: null 
```

尝试将 Xalan 添加到您的类路径中。

# c# - Entity Framework Code First Find vs SingleOrDefault (Eager Loading)

> ID：10110682
> 
> 赞同：18
> 
> 时间：2012-04-11T17:09:27.100
> 
> 标签：c#, entity-framework, ef-code-first

我正在使用 Entity Framework 4.2（代码优先）来访问我的数据库。我假设如果我使用`SingleOrDefault`它查询一个实体，如果该实体尚未被跟踪，则只会查询数据库，但情况似乎并非如此。`Find`另一方面，该方法似乎确实这样做了。问题`Find`在于它似乎不允许我加载相关数据。

有没有办法使用该`Find`方法但也急切地加载数据？例如，我想加载一本书及其所有评论：

```
// Load book from the database
Book book = context.Books.Find(1); 
context.Entry<Book>(book).Collection<Review>.Load(); // Book.Reviews is now populated

// Load book from the change tracker
// This will include all Reviews as well
Book book2 = context.Books.Find(1); 
```

当`SingleOrDefault`我使用 Include 获得图书时，我可以加载评论：

```
// Load book + reviews from the database
Book book = Book.Include("Reviews").SingleOrDefault(b => b.Id == 1);

// Doing the same thing again requeries the database
Book book2 = Book.Include("Reviews").SingleOrDefault(b => b.Id == 1); 
```

`Find`有没有办法通过急切的加载来获得 的行为`SingleOrDefault`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-11T19:44:27.513

该`Find`方法用于按键搜索单个实体。该`SingleOrDefault`方法用于执行查询。急切加载只能是在数据库上真正执行的查询的一部分，因此不能与`Find`.

作为一种解决方法，您可以这样重写它：

```
// This will check only on in-memory collection of loaded entities
Book book = context.Books.Local.SingleOrDefault(b => b.Id == 1);
if (book == null)
{
    book = context.Books.Include(b => b.Review).SingleOrDefault(b => b.Id == 1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T19:15:46.303

如果启用延迟加载，查找将为您工作。试试这个：

```
Book book = context.Books.Find(1);
int n = book.Reviews.Count; 
```

检查“n”变量的值。EF 必须在您第一次访问该集合时加载它。

# asp.net-mvc - 使用 KendoGridBinder 使用按钮获取剑道网格过滤器以发布

> ID：10110685
> 
> 赞同：1
> 
> 时间：2012-04-11T17:09:31.360
> 
> 标签：asp.net-mvc, asp.net-mvc-3, export-to-csv, kendo-ui

我有一个剑道 ui 网格，希望有一个导出按钮，这样当它们导出到 CSV 时，它们可以具有与显示的网格相同的过滤。

我希望帖子接受 KendoGridRequest 就像

```
 [HttpPost]
    public JsonResult Grid(KendoGridRequest request)
    {
        var employees = GetEmployees();
        var grid = new KendoGrid<Employee>(request, employees);
        return Json(grid);
    } 
```

我想添加一个**导出**按钮，该按钮将在帖子中使用相同的过滤器，以便**导出**操作也可以接受 KendoGridRequest 并返回一个 CSV 文件

```
 [HttpPost]
    public ActionResult Export(KendoGridRequest request)
    {
        var employees = GetEmployees();
        var grid = new KendoGrid<Employee>(request, employees);
        return ToCsv(grid);
    } 
```

KendoGridRequest 类来自[KendoGridBinder](http://github.com/rwhitmire/KendoGridBinder)项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:19:22.940

基本上，您可以找到 Grid 对象公开的 dataSource 字段中包含的所有项目（创建 KendoGridRequest 对象所需），并在将数据发布到 Export 操作方法时发送它们。

IE

 `````
 var dataSource = $('#yourGridID').data('kendoGrid').dataSource;
    var page = dataSource._page;
    var skip = dataSource._skip;
    var take = dataSource._take;
    //etc. 
`````

# ant - 使用 ivy 和 ant 将 jar 上传到 nexus sonatype repo

> ID：10110686
> 
> 赞同：1
> 
> 时间：2012-04-11T17:09:34.817
> 
> 标签：ant, ivy

我正在尝试使用 ivy 和 ant 将我的项目工件发布到 nexus sonatype 存储库。使用三个文件： 1>-- build.xml

```
<project name="abc" basedir="." 

default="create-jar" xmlns:ivy="antlib:org.apache.ivy.ant">

<property name="build.dir" value="classes"/>

<property name="src.dir" value="src"/>

<property name="webinf.dir" value="../WEB-INF"/>

<property name="weblib.dir" value="${webinf.dir}/lib"/>

<path id="master-classpath">

<fileset dir="${weblib.dir}">

<include name="*.jar"/>

</fileset>

</path>

<target name="clean" description="Clean output dirs (build, weblib, dist)">

<delete dir="${build.dir}"/>

<mkdir dir="${build.dir}"/>

<delete dir="dist"/>

<mkdir dir="dist"/>

</target>

<target name="create-jar" depends="clean">

<javac destdir="${build.dir}" source="1.5" target="1.5" debug="true" deprecation="false" optimize="false" failonerror="true" nowarn="true">

<classpath refid="master-classpath"/>

<src path="${src.dir}"/>

</javac>

<jar destfile="dist/mws-pojos.jar" basedir="${build.dir}"/>

</target>

<target name="prepare" description="Generate POM" depends="create-jar">

<!-- Optional: Intermediate file containing resolved version numbers -->

<!--ivy:deliver deliverpattern="${build.dir}/ivy.xml" pubrevision="${publish.revision}" status="release"/-->
<!-- Generate the Maven POM -->
<ivy:makepom ivyfile="ivy.xml" pomfile="test.pom"/>
</target>
<target name="resolve" description="retreive dependencies with ivy"
depends="publish">
<ivy:retrieve />
</target>
<target name="publish" depends="prepare,create-jar" 
description="Upload to Nexus">
<ivy:publish organisation="my.org" module="mws-pojos" 
revision="1.0" resolver="nexus-deploy" 
pubrevision="${publish.revision}"             
overwrite="true" publishivy="false" >
<artifacts pattern="${build.dir}/[artifact](-[classifier]).[ext]"/>
</ivy:publish>
</target>
</project> 
```

2-->常春藤.xml

```
<ivy-module version='2.0' xmlns:e="http://ant.apache.org/ivy/extra">
<info organisation="my.org" module="mws-pojos" revision="1.0"/>
<publications>
<artifact name="mws-pojos" type="jar" e:classifier="disto"/>
</publications>
</ivy-module> 
```

3--> ivysettings.xml

```
<ivysettings>
<settings defaultResolver="nexus-central"/>
<credentials host="http://somehost/nexus" realm="Sonatype Nexus Repository Manager" username="user1" passwd="deploy"/>
<resolvers>
<ibiblio name="nexus-central" root="http://somehost/nexus/content/repositories/central/" m2compatible="true"/>
<ibiblio name="nexus-deploy" root="http://somehost/nexus/content/repositories/repo" m2compatible="true"/>
</resolvers>
</ivysettings> 
```

但在编译时出现以下错误：

```
BUILD FAILED

/home/someuser/mobilewebservice/mws-pojos/build.xml:40: impossible to publish artifacts for mmt#mws-pojos;1.0: java.lang.IllegalStateException: ivy file not found in cache for mmt#mws-pojos;1.0: please resolve dependencies before publishing (/home/someuser/.ivy2/cache/resolved-mmt-mws-pojos-1.0.xml)

at org.apache.ivy.core.publish.PublishEngine.publish(PublishEngine.java:105)

at org.apache.ivy.Ivy.publish(Ivy.java:600)

at org.apache.ivy.ant.IvyPublish.doExecute(IvyPublish.java:311)

at org.apache.ivy.ant.IvyTask.execute(IvyTask.java:277)

at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:11:20.123

你需要一个额外的[决心](https://ant.apache.org/ivy/history/2.2.0/use/resolve.html)

```
<ivy:resolve>...</ivy:resolve> 
```

在发布之前。

# c - 从文件扫描到C中的数组

> ID：10110687
> 
> 赞同：0
> 
> 时间：2012-04-11T17:09:34.963
> 
> 标签：c

尝试从文件扫描到 C 数组，但出现错误。当我使用每行只有数字的文件时，它对我有用，例如：

```
1.2  
3.4  
5.2 
```

但现在我有这个文件：

```
0001:Satriani:Joe:6:38.0
0002:Vai:Steve:1:44.5
0003:Morse:Steve:10:50.0
0004:Van Halen:Eddie:3:25.75
0005:Petrucci:John:8:42.25
0006:Beck:Jeff:3:62.0 
```

这是我尝试将其扫描到数组中的方法，但出现分段错误！

```
FILE *employeesTXT;
int empID[100];
char lastName[100];
char firstName[100];
int payGroup[100];
double hoursWorked[100];

employeesTXT = fopen("employees.txt", "r");
if (employeesTXT == NULL)
{
    printf("Error: file cannot be opened.\n");
} else {
    while (fscanf(employeesTXT, "%[^:]:%[^:]:%[^:]:%d:%lf\n", &empID[i], lastName[i], firstName[i], &payGroup[i], &hoursWorked[i]) != EOF)
    {
        i++;
    }

    fclose(employeesTXT);
    numRecords = i;

    for(i = 0; i < numRecords; i++){
        printf("%d - %s - %s - %d - %.2lf\n", empID[i], lastName[i], firstName[i], payGroup[i], hoursWorked[i]);
    }
} 
```

它必须是这一行的东西...... `%[^:]:%[^:]:%[^:]:%d:%lf\n`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:17:26.537

您的参数参数对于字符串是错误的：

```
fscanf(employeesTXT, "%[^:]:%[^:]:%[^:]:%d:%lf\n",
    &empID[i], lastName[i], firstName[i], &payGroup[i], &hoursWorked[i]) 
```

`lastName`并`firstName`声明为 100 的数组`char`。您希望这些是字符串，因此您需要将它们定义为 100 个“缓冲区”的数组。

尝试将声明更改为：

```
char lastName[100][50]; /* 50 or whatever the max length you'd expect + 1 */
char firstName[100][50]; 
```

我相信应该像那样工作。

您还有一个不同的问题`empID`，您将值作为字符串而不是整数读取。`%d`在格式中，如果这些确实是您输入中的整数，则应该是整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:22:24.157

改变

```
char lastName[100];
char firstName[100]; 
```

到

```
char lastName[100][100];
char firstName[100][100]; 
```

阅读时`empID[i]`也不要使用`%[^:]`，`%d`而是使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T17:54:16.073

As pointed out, for the names you are assigning each new employees' information into an one dimensional array, thereby overwriting the previous employee's information (except the first character). This eventually leads to your error when you try to assign a long enough name to an index near the end of your array which causing it to write over the last index. You can use a two dimensional array as suggested for the names:

`char lastname[number_of_employees][maximum_length_of_name];`

and each lastname[i] will be a null terminated string.

But, this is what structures are made for.

```
// Define it before main()
struct employee_type{
    int empID;
    char *lastname;
    char *firstname;
    int paygroup;
    double hoursworked;
}

// In main()
struct employee_type employees[100]; // Declare an array of employee_type structures. 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-11T17:17:37.160

您需要将地址作为参数`fscanf`，这不能作为参数，因为它只是一个字符：

```
 lastName[i] 
```

# c - dm365 mpeg4 编码器 P 帧

> ID：10110688
> 
> 赞同：0
> 
> 时间：2012-04-11T17:09:43.967
> 
> 标签：c, ffmpeg, embedded, mpeg-4

我正在使用 TI DM365 mpeg4 编码器实现视频编码操作，并使用虚拟 FMP4 编解码器使用 ffmpeg mp4 容器将其容器化以生成页眉和页脚。虽然使用类似的基于 Intel 的 mpeg4 编码器证明容器可以正常工作，但如果完全使用 P 帧，dm365 会给出马赛克结果。仅使用 I 框架有效，但我想尽量减少存储的数据量。

可以在[此处](http://e2e.ti.com/cfs-file.ashx/__key/CommunityServer-Discussions-Components-Files/100/0336.test.mp4)查看结果示例。设置为 1-Iframe、9-Pframe

TI 开发人员在 2 天内没有回答我的问题，所以我想在这里寻求帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:03:22.197

这可能会有所帮助，有关各种设置/参数及其效果的 TI 数据表。如果它告诉您您已经知道的内容，我们深表歉意... [TI 数据表 spraba9.pdf](http://www.ti.com/lit/an/spraba9/spraba9.pdf)

# java - HelloWorld App Engine 教程给我错误 500

> ID：10110689
> 
> 赞同：0
> 
> 时间：2012-04-11T17:09:44.117
> 
> 标签：java, google-app-engine

我刚刚将 HelloWorld Java 教程上传到我的应用引擎帐户，尝试加载它时遇到错误 500。

如果我连接到[主页](http://tiwiz-test-00.appspot.com/)，一切正常，但如果我点击 Trdev（即教程），我只会收到此错误：

> 错误：服务器错误
> 
> 服务器遇到错误，无法完成您的请求。如果问题仍然存在，请报告您的问题并提及此错误消息和导致它的查询。

我查看了该网站，发现了很多解决方案，甚至删除了评论，但没有任何效果，我无法弄清楚可能是什么......

任何人都可以帮助我吗？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T02:31:14.947

您应该能够在管理控制台的日志中找到堆栈跟踪。这将告诉您错误发生的行号，并希望您可以从那里找到问题和解决方案。

编辑：根据您的堆栈跟踪，看起来您正在使用错误版本的 Java 进行编译。您需要使您的类与 Java 1.6 兼容，方法是使用 JDK 版本 1.6 或通过在 javac 中将二进制兼容性设置为 1.6（不幸的是，这意味着源代码也需要与 1.6 兼容）。

```
javac -target 1.6 -source 1.6 
```

在 Netbeans 中，您可以在项目的属性下设置 Source/Binary Format。

在 Eclipse 中，您在 Window -> Preferences -> Java -> Compiler -> Compliance Level 下设置 Compliance Level。

请注意，您必须进行完全干净的构建 - 删除所有 .class 文件和您创建的任何 .jar 文件。

# java - 无法让 FileNameExtensionFilter 工作

> ID：10110692
> 
> 赞同：1
> 
> 时间：2012-04-11T17:09:59.533
> 
> 标签：java, jfilechooser

我无法让我的 JFileChooser 只显示我想要的扩展名（文本文件）。

```
JFileChooser fc = new JFileChooser();
            FileNameExtensionFilter textFilter = new FileNameExtensionFilter("Text Files","txt");
            fc.addChoosableFileFilter(textFilter); 
```

我究竟做错了什么？如果我删除过滤器，则会显示文本文件。问题可能看起来很愚蠢，但我试图找到一个解决方案，我的代码看起来与其他示例相同。可能我只是脑子有问题。

感谢您的时间

我尝试了建议的方法，但我仍然遇到同样的问题。所以其他地方肯定有问题。我将加载类代码 - 也许有人可以发现我做错了什么：

```
import java.awt.event.ActionEvent;

 import java.awt.event.ActionListener;
 import javax.swing.JButton;
 import javax.swing.JFileChooser;
 import javax.swing.JFrame;
 import javax.swing.filechooser.FileNameExtensionFilter;

public class ButtonListener implements ActionListener {

private JFrame fr;

public ButtonListener (JFrame frame){
    fr = frame;
}

public void actionPerformed(ActionEvent event) {
    if(event.getSource() instanceof JButton) {
        String action = event.getActionCommand();

        if (action.equals("First text")){

            JFileChooser fc = new JFileChooser();
            FileNameExtensionFilter textFilter = new FileNameExtensionFilter("Text Files","txt");
            fc.addChoosableFileFilter(textFilter);
            int returnVal = fc.showOpenDialog(fr);
            }
        else if (action.equals("Second text")){

            }
        else {
            System.out.println("Error in ButtonListener");
        }
    }

} 
```

}

它还没有完成，但它仍然应该能够处理我遇到的扩展问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:28:46.703

尝试`setFileFilter`改用。

我从未使用过 FileNameExtensionFilter，但很高兴他们将这个便利类添加到 Java 1.6

我一直只是扩展 FileFilter 然后覆盖接受。使用下面定义的我的类，您可以编写

```
chooser.setFileFilter(new OpenFileFilter("txt")); 
```

* * *

```
/**
 * This class defines which file types are opened (by default) by the program.
 * This file filter is used to associate a single file type (extension) with the program.
 * You could add more than one file type to the open file dialog using this class by repeatedly
 *    calling addFileFilter.
 */
import java.io.File;
import javax.swing.filechooser.*;

public class OpenFileFilter extends FileFilter {
    public String fileExt = "";
    String txtExt = ".txt";

    public OpenFileFilter() {
        this(".pxml");  //default file type extension.
    }

    public OpenFileFilter(String extension) {
        fileExt = extension;
    }

     @Override public boolean accept(File f) {
        if (f.isDirectory())
            return true;
        return  (f.getName().toLowerCase().endsWith(fileExt)); 
    }

    public String getDescription() {
        if(fileExt.equals(txtExt ))
            return  "Text Files (*" + fileExt + ")";
        else
            return ("Other File");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-21T12:05:29.067

我知道您的问题已经得到解答，但以防万一您不知道...您也可以使用 FileNameExtensionFilter 并执行以下操作：

```
fc.setFileFilter(textFilter); 
```

我被困在同一个问题上。像你一样。;)

# windows - 复制拒绝访问

> ID：10110696
> 
> 赞同：1
> 
> 时间：2012-04-11T17:10:10.373
> 
> 标签：windows, file, permissions, copy

经过多次安全设置实验并获得：

```
"you need permission to perform this action<br>
you require permission from **xxx\user** to make changes to this file" 
```

我尝试了以下方法：

```
C:\folder>takeown /f "c:\software\file.exe"

SUCCESS: The file (or folder): "c:\software\file.exe" now owned by user "xxx\user".

C:\folder>copy "c:\software\file.exe" "c:\Program Files (x86)\some_folder"
Access is denied.
        0 file(s) copied. 
```

如何复制文件？提前致谢

# php - 寻找避免 eval() 的解决方案

> ID：10110699
> 
> 赞同：-1
> 
> 时间：2012-04-11T17:10:13.897
> 
> 标签：php, mysql

我需要为更新创建某种知识数据库（使用 PHP 和 MySQL）。我使用数据库以 HTML 格式存储每个更新。使用系统的人使用不同的语言（有关用户的信息存储在数据库中）。有时更新包含应翻译和显示的文本，同时考虑到用户正在使用的语言。

你会建议什么方法，记住我想避免在数据库中存储 PHP 和 HTML。

我正在考虑为每种语言创建一个 col 并在那里存储每个更新的翻译，但是更新包含 2 种不同的翻译会发生什么。

更新原型：

一些初始文本

* * *

部分文本的翻译

* * *

还有一些文字

* * *

第二次翻译

* * *

最终更新文本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:21:04.353

另一种解决方案是使用某种 cdata 标签，或者您可以轻松解析的东西。但这将是一个非常基于“wiki”的解决方案，因此需要遵循一些模式来避免混合。

例子：

```
[English<-[This is the best update ever]->]
[Swedish<-[Detta är den bästa uppdateringen någonsin]->] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:16:21.207

我会创建一个语言表和一个更新表。然后创建一个将语言链接到更新的表。一列 id，一列语言 id，一列更新 id。然后，您将能够处理具有多个翻译的更新。

# java - Python 在接收到的行的末尾添加了一个额外的 CR

> ID：10110702
> 
> 赞同：7
> 
> 时间：2012-04-11T17:10:31.723
> 
> 标签：java, python, sockets, client-server, carriage-return

Java 应用程序将 XML 发送到 Python 应用程序。它们都在同一台机器上。当我打开收到的文件时，我可以看到额外的行（因为额外的 CR）。这可能是什么原因？

这是接收器：

```
f = open('c:/python/python.xml', 'w')
while 1:
    print("xxx")        
    data = socket.recv(recv_frame)
    remain_byte = remain_byte - len(data)
    print(remain_byte)
    f.write(data)
    if (something):
        break 
```

这是发件人：

```
 while ((bytesRead = file_inp.read(buffer)) > 0) {
        output_local.write(buffer, 0, bytesRead);
    } 
```

这是原始文件：

```
<root><CR><LF>
    <SONG><CR><LF>
        <ARTIST>Coldplay</ARTIST><CR><LF>
    </SONG><CR><LF>
</root><CR><LF> 
```

这是收到的：

```
<root><CR>
<CR><LF>
    <SONG><CR>
<CR><LF>
        <ARTIST>Coldplay</ARTIST><CR>
<CR><LF>
    </SONG><CR>
<CR><LF>
</root><CR>
<CR><LF> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T17:55:32.313

将filemode 从 更改`'w'`为`'wb'`，否则 Python 会将任何换行符 ( `'\n'`) 转换为特定于平台的表示形式（`'\r\n'`对于 Windows）。二进制模式会抑制这种转换。

# django - 如何在django的数据库中提交数据

> ID：10110704
> 
> 赞同：-1
> 
> 时间：2012-04-11T17:10:43.117
> 
> 标签：django

我有一个关于如何在 django 的数据库中输入数据的问题。我有以下模板，其中“ E ”是获取字符串的变量：

```
<form action="." method="GET"><input type="text" name="E" style="width: 450px;height: 30px;" /></form> 
```

这是我的models.py，其中我有一个名为“Company”的类，我希望将此变量“E”保存在“Subject”中：

```
class Company(models.Model):
    Subject = models.CharField(max_length=30)
    start_time = models.DateTimeField()
    end_time = models.DateTimeField()

    def __unicode__(self):
        return self.Subject 
```

然后在views.py中我写了这样的东西来保存主题字段中的变量，它不完整，我希望你能帮助我：

```
def Text_Box(request):
    T = request.GET.get(E,' ')
    if T:
        # I don't know how to make an object of class 'Company' so then I save ' T ' in Company.Subject
    else:
        return render_to_response("Base.html") # Base.html is my basic template file 
```

如果您能帮助我，我将不胜感激。提前致谢。

索菲亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T17:32:06.720

我的第一条建议是熟悉 PEP 8，可在此处找到：http: [//www.python.org/dev/peps/pep-0008/](http://www.python.org/dev/peps/pep-0008/)

虽然大写或不大写似乎很自然，但它对 Python 程序员来说具有真正的意义。

我的第二条建议是，从这里找到的 django 教程（前提是你已经了解 Python）开始：

[https://docs.djangoproject.com/en/1.4/intro/tutorial01/](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)

还有 django 书，在这里找到：

[http://www.djangobook.com/en/2.0/](http://www.djangobook.com/en/2.0/)

根据您提出的问题，我的第三条建议是，我认为您应该总体上熟悉 Python。

要具体回答您的问题，请参阅上面 okm 的评论，但您可以通过将模型类的参数传递给模型来实例化模型。这个实例你将分配给一个变量，让我们 my_variable 然后在它上面调用“save”。但是，在您的情况下，保存将失败，因为您还需要传入 start_time 和 end_time 参数。哪些不是可选的。

这些也可以在实例化后保存到模型中，例如 my_variable.start_time = xx/xxx/xx。

# eclipse - Maven在Eclipse中添加源码目录

> ID：10110705
> 
> 赞同：4
> 
> 时间：2012-04-11T17:10:53.633
> 
> 标签：eclipse, maven, jaxb, code-generation, buildpath

我的代码是从`maven-jaxb2-plugin`maven 插件生成的。它将代码放入目标/生成源中。现在我必须手动*左键单击项目 -> 属性-> Java Build Path-> 添加文件夹*...。对于从 SVN 下载它的人来说，这有点烦人。

有什么方法可以通过我的 pom 自动获得那个圆顶吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T19:55:30.463

这种东西是 IDE 的 Maven 插件的责任，幸运的是 M2E 最近（终于！）通过 M2E 连接器的概念支持它，即 M2E 扩展了解某些插件的性质和生命周期绑定。而且因为从最近开始，没有多少 Maven 插件有他们的 M2E 连接器。

但是，您很幸运，因为实际上已经支持 Jaxb2 插件。我假设您已经在使用 M2E。然后转到*Preferences -> Maven -> Discovery*，然后*打开 Catalog*，然后找到 Jaxb2 连接器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-12T19:48:04.900

maven add-sources 应该为 netbeans 或 eclipse 解决问题

[M2E 并将 maven 生成的源文件夹作为 eclipse 源文件夹](https://stackoverflow.com/questions/7160006/m2e-and-having-maven-generated-source-folders-as-eclipse-source-folders)

# java - 使用通用双向链表实现 Comparable

> ID：10110706
> 
> 赞同：0
> 
> 时间：2012-04-11T17:10:55.653
> 
> 标签：java, list, generics

我正在编写一个双向链表，当添加从我的类“家具”扩展的对象时，使用 compareTo 方法对它们进行排序。

我的列表和节点代码：

```
class Node<E extends Comparable<E>> { ....... }

class DList<E extends Comparable<E>>
{

[..]

    public void add(E c)
    {
        Node<E> finger = head;
        while (finger != null && ((finger.value().compareTo(c)) > 0))
            finger = finger.Next();

    }
} 
```

我的 compareTo 方法位于家具类的子类中，例如：

```
class Chair extends Furniture
{

[.....]

    public int compareTo(Chair c)
    {
    if(this.getStyle().equals(c.getStyle()))
        return this.getColor().compareToIgnoreCase(c.getColor());
    return this.getStyle().compareToIgnoreCase(c.getStyle());
    }

} 
```

然后我尝试通过

```
 DList<Furniture> DD = new DList<Furniture>(); 
```

我收到错误：类型参数家具不在类型变量 E 内

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T17:14:19.953

确保`Furniture`实现`Comparable<Furniture>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:21:08.330

您的 Furniture 类应该是抽象的并且应该扩展 Comparable，您的 Chair 类应该实现您的 Furniture 类。

另一种方法是让您的 Furniture 类实现 Comparable。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T17:16:21.753

也许你的`Forniture`类没有实现`Comparable<Forniture>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T17:22:54.167

`<E extends Comparable<E>>`手段`E`必须是扩展`Comparable<E>`的，因此请确保家具扩展了 Comparable。

# javascript - 在 Rails 中使用 Ruby 和 Javascript 实现日历

> ID：10110707
> 
> 赞同：0
> 
> 时间：2012-04-11T17:11:06.487
> 
> 标签：javascript, ruby-on-rails, ajax, ruby-on-rails-3, calendar

我正在尝试在 Rails 中使用 Ruby 和 Javascript 实现日历。我正在使用一个日历助手，它创建一个带有给定年份和月份以及事件作为参数（`<%= calendar(:year => 2012, :month => 4, :events => @events %>`）的日历。

我还有三个按钮，下一个、今天和上一个，用户应该可以使用它们来导航日历。我还将实现一些 js，使在日历中选择日期成为可能。所以我想做的是用javascript在DOM中插入日历，以便在用户单击其中一个按钮时生成一个新日历。这样我就可以控制按钮的行为并添加选择功能。

问题是我不能只在 javascript 中插入我的 erb 代码，而且我什至不确定这是正确的方法吗？任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:26:36.767

您是否考虑过使用现有的工具，例如[jQuery DatePicker](http://jqueryui.com/demos/datepicker/)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T21:28:53.617

宝石慢性怎么样？它是时代的自然语言解析器

# javascript - Javascript 正则表达式匹配前后字符

> ID：10110710
> 
> 赞同：0
> 
> 时间：2012-04-11T17:11:10.757
> 
> 标签：javascript, regex

我在一个对象中有这个字符串：

```
<FLD>dsfgsdfgdsfg;NEW-7db5-32a8-c907-82cd82206788</FLD><FLD>dsfgsdfgsd;NEW-480e-e87c-75dc-d70cd731c664</FLD><FLD>dfsgsdfgdfsgfd;NEW-0aad-440a-629c-3e8f7eda4632</FLD> 
```

`this.model.get('value_long').match(/[<FLD>\w+;](NEW[-|\d|\w]+)[</FLD>]/g)`

回报：

```
[";NEW-7db5-32a8-c907-82cd82206788<", ";NEW-480e-e87c-75dc-d70cd731c664<", ";NEW-0aad-440a-629c-3e8f7eda4632<"] 
```

我的正则表达式有什么问题，它正在拾取前面`;`和尾随`<`

这是正则表达式的链接 [http://regexr.com?30k3m](http://regexr.com?30k3m)

更新：

这是我想要返回的：

```
["NEW-7db5-32a8-c907-82cd82206788", "NEW-480e-e87c-75dc-d70cd731c664", "NEW-0aad-440a-629c-3e8f7eda4632"] 
```

这是一个 JSfiddle

[http://jsfiddle.net/mwagner72/HHMLK/](http://jsfiddle.net/mwagner72/HHMLK/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:14:30.833

方括号创建一个字符类，您不希望在这里，尝试将您的正则表达式更改为以下内容：

```
<FLD>\w+;(NEW[-\d\w]+)</FLD> 
```

由于看起来您想从每个匹配项中获取捕获组，您可以使用以下代码构造一个包含捕获组的数组：

```
var regex = /<FLD>\w+;(NEW[\-\d\w]+)<\/FLD>/g;
var match = regex.exec(string);
var matches = [];
while (match !== null) {
    matches.push(match[1]);
    match = regex.exec(string);
} 
```

`[<FLD>\w+;]`将匹配方括号内的字符之一，而我认为您真正想要做的是匹配所有这些字符。同样对于其他字符类，`[-|\d|\w]`您可以删除 ，`|`因为它已经隐含在字符类中，`|`只能用于组内的交替。

这是新正则表达式的更新链接：http: [//jsfiddle.net/RTkzx/1](http://jsfiddle.net/RTkzx/1)

# string - 在 Crystal Reports XI 中的文本字段中格式化字符串

> ID：10110711
> 
> 赞同：2
> 
> 时间：2012-04-11T17:11:17.790
> 
> 标签：string, vba, crystal-reports, crystal-reports-xi

早上好！

我希望有人可以帮助我解决一个可能很简单的问题，但我无法让事情按照我想要的方式工作。我目前正在处理具有“包罗万象”文本字段的报告。在此字段中，用户可以输入他们想要的任何内容，并且有时会以列格式输入信息（例如 1.1）。此字段允许用于在此字段中创建“行”的回车。问题是用户希望此字段中的“列”在报告中对齐，而不必在输入信息时计算列之间的空格（例如 1.2）。问题是即使输入了此类信息，也没有设置协议或格式指南。可能有多个“字幕”，行，由字幕分隔的行等。

我目前正在尝试将每一行分开，根据需要对每一行进行格式化，然后将其重新组合在一起，如下所示：

```
 Dim output As String
    Dim sections as String
    Dim returnCount as Int 
    Dim leftText as String
    Dim rightText as String
    Dim sectionTogether as String
    Dim totalText as String
    Dim textLength as Int

    output = {table.textfield}

    sections = ExtractString(output, Chr(10), Chr(10))

    If Instr(sections,"  ") > 0 Then
      leftText = Left(sections, Instr(sections, "  "))
      textLength = Length(Left(sections, Instr(sections, "  "))
      rightText = Right(sections, Instr(sections, "  "))
      Replace(sections,"  "," ")
      sectionTogether = rightText + (Space(20) - (textLength - 3)) + leftText
      totalText = totalText + sectionTogether
      formula = totalText
    else
      formula = output 
```

这是我正在尝试做的事情的要点。几点注意事项：1）我知道我缺少某种循环来格式化每个部分，但我不知道如何在水晶中设置它 2）我有 VB 编程经验，但我对水晶及其有限的工具不熟悉所以我感到手足无措，我很难找到我将在 Visual Studio 3 中使用的方法和工具）我的语法也可能在一些地方不正确，因为我仍在学习如何设置它，我真的很想念调试器。

我希望有人可以帮助我，我已经研究了一个多星期，感觉就像我的头撞到了墙上。

先感谢您。

```
The output examples
ex. 1.1
"Your current charges are:
Jan          12.89
Feb         117.44
Mar          15.02
Apr        4.17"

ex. 1.2
"Your current charges are:
Jan                       12.89
Feb                      117.44
Mar                       15.02
Apr                        4.17" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T18:26:35.703

您要做的第一件事是通过 split() 拆分行，如下所示：

`local stringvar array wallOText := split({table.textfield},chr(10));`

这将为您提供一个字符串数组，其中每个数组条目都是一个“行”。现在您可以使用以下内容遍历您的行：

`for i := 1 to ubound(wallOText) step 1 do <some stuff to wallOText[i]>`

现在，让列右对齐有点棘手，但这里有一些代码可以帮助您入门。您可以根据需要调整列宽（在本例中为 20 个空格）。另请注意，**您必须使用固定宽度的字体。**

```
local stringvar output;
local stringvar array row;
local numbervar i;
local numbervar j;
local stringvar array wallOText := split({@some text},chr(10));
local stringvar elem;

for i := 1 to ubound(wallOText) do  //loop over lines
    (row := split(wallOText[i]," ");
     for j := 1 to ubound(row) do //loop over words
        (elem := trim(row[j]); //get current element and cut white space
         if not(elem="") then 
         output := output + space(20-len(elem)) + elem); //build output string
     output := output + chr(10));

output
```

# asynchronous - GMainContext 在 unref 之后有 ref_count > 0

> ID：10110713
> 
> 赞同：0
> 
> 时间：2012-04-11T17:11:31.463
> 
> 标签：asynchronous, glib

我没有让我的 GMainContext 正确减少 ref_count。这里的示例程序是大型程序的一个小版本（它使用线程，因此需要创建一个上下文并将其推送到线程上）。

```
GMainLoop *loop;
GMainContext *ctx;

struct conn
{
    GSocketClient *client;

    GSocketConnection *conn;
    GInputStream *in;
    GOutputStream *out;

    gchar data[8192];
    unsigned int count;
};

static void
read_done_cb(GObject *source_object, GAsyncResult *res, gpointer user_data)
{
    struct conn *c = (struct conn *)user_data;
    gssize len = g_input_stream_read_finish(c->in, res, NULL);

    g_input_stream_read_async(c->in, c->data, sizeof c->data / sizeof *c->data, G_PRIORITY_DEFAULT, NULL, read_done_cb, c);
    if (c->count++ == 1) {
        printf("End of life as I know it...\n");
        g_main_loop_quit(loop);
    }
}

static void
write_done_cb(GObject *source_object, GAsyncResult *res, gpointer user_data)
{
}

static void
connect_done_cb(GObject *source_object, GAsyncResult *res, gpointer user_data)
{
    printf("## %s\n", __FUNCTION__);

    struct conn *c = (struct conn *)user_data;
    c->conn = g_socket_client_connect_to_host_finish(c->client, res, NULL);

    c->in  = g_io_stream_get_input_stream(G_IO_STREAM(c->conn));
    c->out = g_io_stream_get_output_stream(G_IO_STREAM(c->conn));

    char *data = "GET /axis-cgi/mjpg/video.cgi HTTP/1.0\r\n\r\n";

    g_output_stream_write_async(c->out, data, strlen(data), G_PRIORITY_DEFAULT, NULL, write_done_cb, c);
    g_input_stream_read_async(c->in, c->data, sizeof c->data / sizeof *c->data, G_PRIORITY_DEFAULT, NULL, read_done_cb, c);
}

int
main(int argc, char **argv)
{
    g_type_init();

    struct conn *c = g_malloc0(sizeof *c);
    ctx = g_main_context_new();
    loop = g_main_loop_new(ctx, FALSE);
    g_main_context_push_thread_default(ctx);

    c->client = g_socket_client_new();
    g_socket_client_connect_to_host_async(c->client, "10.85.25.20", 80, NULL, connect_done_cb, c);

    g_main_loop_run(loop);

    g_io_stream_close(G_IO_STREAM(c->conn), NULL, NULL);
    g_object_unref(c->client);
    g_object_unref(c->conn);
    g_main_context_pop_thread_default(ctx);
    g_main_loop_unref(loop);
    g_main_context_unref(ctx);

    return 0;
} 
```

使用 gdb，在返回之前插入断点，我可以看到 ctx 仍然有一个引用计数：

```
(gdb) p ctx->ref_count
 $2 = 1 
```

如果我再做一次`g_main_context_unref(ctx);`，一切都会按预期关闭。我不明白我从哪里获得这种所有权。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:34:31.337

我发现了错误。我在退出主循环后立即`read_done_cb`发出另一个。增加了 ref_count 但从来没有机会返回我的回调（并减少我的 ref_count ）。`g_input_stream_read_async``g_input_stream_read_async``GMainLoop``GMainContext`

将`g_input_stream_read_async`我的回调中的调用移至 if 语句下方

```
static void
read_done_cb(GObject *source_object, GAsyncResult *res, gpointer user_data)
{
    struct conn *c = (struct conn *)user_data;
    gssize len = g_input_stream_read_finish(c->in, res, NULL);

    if (c->count++ == 1) {
        printf("End of life as I know it...\n");
        g_main_loop_quit(loop);
    }

    g_input_stream_read_async(c->in, c->data, sizeof c->data / sizeof *c->data, G_PRIORITY_DEFAULT, NULL, read_done_cb, c);

} 
```

正确解决了我的主要上下文中的引用计数。

愚蠢的错误。希望至少有人会发现我的帖子有一些用处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T10:41:06.893

`g_main_context_new()`, `g_main_loop_new()`, 和`g_main_context_push_thread_default()`所有参考上下文。`g_main_context_pop_thread_default()`, `g_main_loop_unref()`, 和`g_main_context_unref()`所有 unref 它。所以你的直觉是正确的。

我会在 gdb: 中使用一个观察点`watch ctx->ref_count`来找出添加额外引用的位置。

# c# - 无法在运行时加载程序集

> ID：10110719
> 
> 赞同：0
> 
> 时间：2012-04-11T17:11:58.723
> 
> 标签：c#, .net-assembly, fusion

这很奇怪...

在我的一个项目中，我需要在运行时加载外部 dll。我以前经常这样做，我以为我已经踩到了那里的所有地雷，但到目前为止，这个地雷已经让我做得最好了。

这真的非常非常基本。我使用`Assembly.LoadFrom("c:\\test\\mytestlibrary.dll")`但 Fusion 找不到文件（我得到一个`FileNotFoundException`）。

我像往常一样检查了融合日志，但这没有任何意义。即使我提供了完整的绝对路径，是否存在某些情况会以某种方式阻止 Fusion 找到文件？我怀疑有问题的 dll 需要一些其他程序集，但查看融合日志并不能表明这一点。此外，测试库不引用主机程序集未引用的任何内容。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:22:22.467

也许 Suzzanne Cook 的这篇博文会提供一些线索？

> 对于 FileNotFoundException：日志底部将是 Fusion 尝试探测此程序集的路径。如果这是按路径加载（如在 Assembly.LoadFrom() 中），则只有一个路径，并且您的程序集需要在那里才能找到。否则，您的程序集将需要位于列出的探测路径之一或 GAC 中（如果要找到它）。
> 
> **如果程序集的非托管依赖项或内部模块加载失败，您也可能会收到此异常**。尝试在文件上运行depends.exe 以验证是否可以加载非托管依赖项。请注意，如果您使用的是 ASP.NET，则它使用的 PATH 环境变量可能与命令行使用的不同。如果所有这些都可以加载，请在文件上尝试 ildasm.exe，双击“MANIFEST”并查找“.file”条目。这些文件中的每一个都需要与包含清单的文件位于同一目录中。-- [http://blogs.msdn.com/b/suzcook/archive/2003/05/29/57120.aspx](http://blogs.msdn.com/b/suzcook/archive/2003/05/29/57120.aspx)

IIRC，融合日志还应该显示寻求的路径列表。你的路径包括吗？此外，该程序集是否已经作为项目引用加载，或者以前在同一个应用程序域中？

# jquery - Bookmarklet 加载 jQuery 并在完全加载后运行函数？

> ID：10110720
> 
> 赞同：0
> 
> 时间：2012-04-11T17:11:59.633
> 
> 标签：jquery, bookmarklet

我想做几件事：

1.  创建一个在外部脚本中加载和运行代码的小书签
2.  外部脚本应该通过 Google 的 CDN 加载 jquery 并在完全加载后运行一个函数。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:39:03.267

是的。

[http://benalman.com/projects/run-jquery-code-bookmarklet/](http://benalman.com/projects/run-jquery-code-bookmarklet/)

以及使用外部文件作为书签的代码：

```
document.body.appendChild(document.createElement('script')).src = 'http://domain.com/script.js'; 
```

请注意，如果您使用链接中的代码作为书签，并加载外部脚本，您可能希望外部文件中的代码能够使用 jQuery。在这种情况下，您需要`.noConflict(1)`从链接中的代码中删除。

另一种可能更好的方法是使用外部文件内链接中的代码，并替换`/* YOUR JQUERY CODE GOES HERE */`为您自己的代码。

# objective-c - 无法识别的选择器发送到 deviceOrientationDidChange 上的实例

> ID：10110721
> 
> 赞同：0
> 
> 时间：2012-04-11T17:12:05.437
> 
> 标签：objective-c, portrait, device-orientation, unrecognized-selector

现在我的应用应该只支持肖像。在摘要/支持的设备方向上，我只选择了纵向，所以我希望我的应用程序不会旋转。我正在设备上测试应用程序，突然我随机收到以下错误：

```
[UIButtonContent deviceOrientationDidChange:]: unrecognized selector sent to instance 
```

当我有时旋转设备时会发生这种情况，不一致，并且并不总是超过 UIBUttonContent。我认为如果我只选择肖像，则不应调用或忽略 deviceOrientationDidChange。

其他时候我的应用程序因 EXC_BAD_ACCESS (code=1, address=something) 而崩溃，但它发生在我旋转设备时，所以我猜测这两个错误是相关的。

我不知道该怎么做，很难调试，因为我没有反馈，没有调用 All Exceptions Breakpoint，所以我不知道发生这种情况的位置和确切原因。欢迎任何关于如何调试的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:25:23.197

这些是内存管理错误的典型迹象。您已经过度释放了一些对象，并且它已被释放，而其他东西仍在引用它。后来，有东西给它发消息。在某些情况下，一个新对象取代了它的位置，但该对象不理解它正在接收的消息。在其他情况下，没有有效的对象并且您会崩溃。

编辑了使用 Zombies 工具查找过度释放的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:25:10.797

你有一个应该被调用的类`deviceOrientationDidChange:`吗？发生这种情况时，通常意味着您对已释放对象有一个悬空引用。您应该尝试在“僵尸”模式下使用 Instruments 分析您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T11:43:31.130

我很久以前就解决了这个问题，但我认为分享这个案例对我的实际帮助是件好事。

在用 Instruments 尝试了一切都没有结果之后，我开始调试老派。我知道错误在“哪里”，所以我只是评论了该部分的所有代码。我是对的，该错误与一些功能一起消失了。之后我做了“二进制取消注释”（取消注释一半）直到我得到错误行。这是一个第三方库，我有一个未正确释放的对象。

# vb.net - 如何将所需弹出窗口的 URL 解析为弹出表单并在 WebKit 组件中显示提示/工具提示？

> ID：10110723
> 
> 赞同：2
> 
> 时间：2012-04-11T17:12:29.383
> 
> 标签：vb.net, visual-studio-2008, webkit, popup, hints

我正在尝试在 Visual Studio 2008 的帮助下在 VB 中使用 WebKit 组件（http://www.webkit.org/）。

这运行没有问题，除了以下两个问题： 1\. 未显示提示/工具提示（例如，如果您将鼠标悬停在 Google 徽标上，通常会出现一个） 2\. 如果有一个弹出窗口，我不知道如何获取新的所需 URL。

我已经在这件事上工作了几天，但还没有找到任何解决方案:(

也许你知道解决这个问题的方法。

干杯马库斯G。

PS：如果你需要多于下面的Source Code来分析问题，那就让我知道...

源代码表格1

```
Imports System.IO
Imports WebKit

Public Class frmMain

  Private _url As String
  Private _mode As String
  Private _popupUrl As String

  Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    On Error Resume Next
    Dim bLogging As Boolean

    setWindowAndBrowserSettings()

    _url = "http://www.google.com"
    browserComp.Navigate(_url)
  End Sub

  Private Sub setWindowAndBrowserSettings()
    Me.Text = "Test - Browser"
    Me.WindowState = FormWindowState.Maximized
    browserComp.Dock = DockStyle.Fill
    browserComp.Visible = True
  End Sub

  Private Sub browserComp_NewWindowCreated(ByVal sender As Object, ByVal e As WebKit.NewWindowCreatedEventArgs) Handles browserComp.NewWindowCreated
    'frmPopup.WindowState = FormWindowState.Maximized
    frmPopup.Text = "ixserv - POPUP"
    frmPopup.popup.Navigate(_popupUrl)
    frmPopup.Show()
  End Sub

  Private Sub browserComp_NewWindowRequest(ByVal sender As Object, ByVal e As WebKit.NewWindowRequestEventArgs) Handles browserComp.NewWindowRequest
    e.Cancel = False
    _popupUrl = browserComp.Url.ToString  ' WHERE can I get the clicked URL? This is the old one of the remaining window
  End Sub
End Class 
```

代码表格2

```
Public Class frmPopup

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:05:44.580

以下 popup/new-Window-Create-function 对我有用：

```
Private Sub browserComp_NewWindowCreated(ByVal sender As Object, ByVal e As WebKit.NewWindowCreatedEventArgs) Handles browserComp.NewWindowCreated
    frmPopup.Text = "POPUP"
    Dim popupBrowser As WebKit.WebKitBrowser
    popupBrowser = e.WebKitBrowser
    frmPopup.Controls.Add(popupBrowser)
    frmPopup.Show()
End Sub 
```

而 frmPopup 是一种新形式。

在我尝试这个之前，我已经将 Webkit 组件添加到新表单中，这可能是问题所在。我假设，诀窍是创建一个`WebKitBrower`直接连接到参数的新元素，`e.WebkitBrowser`而不是重载表单中现有的 webkitbrowser 组件。现在不要问我这个原因（我真的不知道）：P

哦，我应该补充一点，我使用了 Webkit.NET 组件。同样的技巧也适用于 OpenWebkitSharp-wrapper

提示问题仍然存在......

# sql - 使用 SurroundsWith SnippetType 时，如何自动标记所有选定的文本？

> ID：10110727
> 
> 赞同：2
> 
> 时间：2012-04-11T17:12:46.263
> 
> 标签：sql, visual-studio, code-snippets

下面是我用来包围现有 SQL 的 SQL 片段。在突出显示一些 SQL 并插入此代码段后，我希望**所有**选定的文本都由一个制表符或几个空格缩进。我的代码片段目前只会缩进第一行突出显示的代码。

我怎样才能使所有选定的文本缩进？

这是我的 SQL 片段。

```
<?xml version="1.0" encoding="utf-8"?>
<CodeSnippets xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
    <CodeSnippet Format="1.0.0">
        <Header>
            <Title>Insert a comment header for SQL</Title>
            <Shortcut>header</Shortcut>
            <Description>SQL Snippet will add comment area for header to break up code</Description>
            <Author>Mike Adams</Author>
            <SnippetTypes>
                <SnippetType>SurroundsWith</SnippetType>
                <SnippetType>Expansion</SnippetType>
            </SnippetTypes>
        </Header>
        <Snippet>
            <Declarations>
                <Literal Editable="true">
                    <ID>headerText</ID>
                    <ToolTip>Header Text</ToolTip>
                    <Default></Default>
                    <Function></Function>
                </Literal>
            </Declarations>
            <Code Language="sql">
                <![CDATA[
-- $headerText$
---------------------------------------------------------
     $selected$

$end$
]]>
            </Code>
        </Snippet>
    </CodeSnippet>
</CodeSnippets> 
```

# c# - 媒体播放器控件仅适用于 IE（不适用于 FF/Chrome）

> ID：10110731
> 
> 赞同：0
> 
> 时间：2012-04-11T17:12:57.227
> 
> 标签：c#, css

我的网页中有媒体播放器控件，我只能在 Internet Explorer 中获得媒体播放器，我无法在任何其他浏览器（如 Chrome 或 Firefox）中获得媒体播放器，代码是**media.aspx.cs：**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>
<%@ Register Assembly="Media-Player-ASP.NET-Control" Namespace="Media_Player_ASP.NET_Control"
TagPrefix="cc1" %>
  <cc1:media_player_control id="Media_Player_Control1" runat="server" 
       Height="314px" Width="518px" 
       style="z-index: 100; left: 4px; position: absolute; top: 9px">
    </cc1:media_player_control> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:26:18.883

通常 ActiveX 控件只能在 IE 中工作，因此 Media Player 是一个 ActiveX 控件，默认情况下它在其他浏览器中不起作用。

对于 Firefox，您可以查看[Using the Windows Media Player Control with Firefox](http://msdn.microsoft.com/en-us/library/windows/desktop/dd564583%28v=vs.85%29.aspx)

# django - 用于测试的临时 TEMPLATE_DIRS 覆盖不起作用

> ID：10110737
> 
> 赞同：1
> 
> 时间：2012-04-11T17:13:06.823
> 
> 标签：django, django-testing

为了测试自定义模板标签，我需要测试一个返回渲染模板的函数。为了能够比较输出而不必了解用户生成的生产模板（不时更改），我尝试覆盖 TEMPLATE_DIRS 设置。看起来像是 Django 1.4 的新 override_settings 装饰器的完美使用场景：

```
@override_settings(TEMPLATE_DIRS='%s/templates' % os.path.abspath(os.path.dirname(__file__)) )
    def test_render_as_list(self):
        self.node.type = 'list'
        self.node.listtemplate = 'testtemplate.html'
        self.node.items = ['a', 'b', 'c']

        # these lines print the correct path to the template
        from django.conf import settings
        print(settings.TEMPLATE_DIRS)

        # inserted debug trace here
        import ipdb;ipdb.set_trace()            

        response = render_as_list(self.node, self.context)
        self.assertEqual(response,'item a, item b, item c') 
```

这是我的目录结构的样子：

```
- project
    - app_to_test
        - fixtures
        - templatetags
        - tests
            __init__.py
            test_templatetags.py (containing the test shown above)
            templates
                testtemplate.html 
```

据我了解我的代码，settings.TEMPLATE_DIRS 现在应该指向

```
/some/path/project/app_to_test/tests/templates 
```

打印新 settings.TEMPLATE_DIRS 值的行显示装饰器工作，但 render_as_list 函数仍然返回

> TemplateDoesNotExist：testtemplate.html

几个小时以来，我一直坚持这一点，只是找不到其他可以尝试的方法。

**编辑：** 路径创建工作，文件存在，但 Django 仍然不加载模板：

```
ipdb> from django.conf import settings
ipdb> path = settings.TEMPLATE_DIRS
ipdb> templatename = path+'testtemplate.html'
ipdb> templatename
'/Volumes/Data/project/my_app/tests/templates/testtemplate.html'
ipdb> template.loader.get_template(templatename)
*** TemplateDoesNotExist: /Volumes/Data/project/my_app/tests/templates/testtemplate.html
ipdb> f = file(templatename)
ipdb> f
<open file '/Volumes/Data/project/my_app/tests/templates/testtemplate.html', mode 'r' at 0x102e95d78>
ipdb> f.read()
'testtemplate content' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:20:47.387

`TEMPLATE_DIRS`需要是一个或多个字符串的序列，而不是单个字符串。它试图将字符串的每个字符用作自己的目录。

尝试：

```
@override_settings(TEMPLATE_DIRS=['%s/templates' % os.path.abspath(os.path.dirname(__file__))] ) 
```

如果需要转义空格，可以使用：

```
os.path.abspath(os.path.dirname(__file__)).replace(' ', r'\ ') 
```

* * *

您显示一个名为

```
 testtemplate.py 
```

你的错误说

```
 TemplateDoesNotExist: testtemplate.html 
```

你的代码说

```
 self.node.listtemplate = 'testtemplate.html' 
```

它正在寻找一个`.html`文件，而您的文件是`.py`.

# meteor - 在客户端访问数据库，就像在服务器端使用流星一样

> ID：10110743
> 
> 赞同：8
> 
> 时间：2012-04-11T17:13:30.700
> 
> 标签：meteor

我在文档中读到了这个：

> 无处不在的数据库。使用相同的透明 API 从客户端或服务器访问您的数据库。

这很好，但我认为存在一些安全问题。在客户端提供对数据库的完全和透明的访问，您会暴露给不良用户，这些用户会修改您的 JS 代码（实际上是在他的浏览器中，他可以做到）并添加任何可以检索/删除/更新数据的数据库操作可能是明智的。

如果我错了，请纠正我。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T18:01:08.070

你是对的。开发人员目前正在处理身份验证和安全问题。到目前为止，一切都是开放的，非常适合创建原型和测试应用程序，但是它们很容易受到用户随意检索/删除/更新数据的攻击。

在此处查看开发人员对此问题的回复：[链接](https://stackoverflow.com/a/10101516/432284)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T01:16:35.343

Meteor 现在包括对客户端数据库写入（[`allow`](http://docs.meteor.com/#allow)和[`deny`](http://docs.meteor.com/#deny)）的限制以及完整的[用户帐户系统](http://docs.meteor.com/#accounts_api)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-20T15:52:55.617

通过删除不安全和自动发布的包来保护您的应用程序：

```
meteor remove insecure autopublish 
```

# jquery - jQuery - 在下一个开始淡入之前，div没有完全淡出

> ID：10110749
> 
> 赞同：3
> 
> 时间：2012-04-11T17:13:49.523
> 
> 标签：jquery, fade

这个问题很简单，我知道，但我花了很长时间试图弄清楚。我在一个页面上有 8 个 div，其中包含开始隐藏的图像库。当用户单击图标查看图库时，他们选择的第一个图库会淡出所有闪亮。但是当他们选择另一个时，他们正在查看的那个开始淡出，而另一个在它下面淡入，然后在第一个 div 被隐藏时向上移动到正确的位置。

见[jsfiddle](http://jsfiddle.net/wnTte/7/)。

所以，我的问题很明显：
我如何让他们正在查看的画廊在下一个淡入正确空间之前完全淡出。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T17:23:47.270

文档中的这句话解释了您的问题（[fadeOut](http://api.jquery.com/fadeOut/)）：

> 如果为多个元素设置了动画，请务必注意，每个匹配的元素都会执行一次回调，而不是对整个动画执行一次。

换句话说，因为您正在为两件事设置动画，所以回调将被调用两次。因为您的一个 div 已经隐藏，所以`fadeOut`立即完成*，并立即回调。

**如果已经显示/隐藏，则立即完成是显示/隐藏类型辅助功能所独有的。如果您构建自己的淡入淡出动画，无论当前状态如何，它总是需要指定的时间。*

您可以通过多种方式解决此问题。最简单的方法是将您的`fadeOut()`调用链接在一起，而不是在两个元素上调用一个：

```
$('.icon_one').click(function() {
    $('#image_two').fadeOut(function() {
        $('#image_three').fadeOut(function() {
            $('#image_one').fadeIn();
        });
    });
}); 
```

因为一个通常已经被隐藏，它会立即消失，但另一个需要时间。无论哪种方式，只有在两者都完成之后才会发生淡入。

演示：http: [//jsfiddle.net/jtbowden/XQnhs/](http://jsfiddle.net/jtbowden/XQnhs/)

当然，只需对您的 HTML 稍作改动，您就可以通过单击处理程序完成所有**三个操作：**

```
<div id="image_one" class="imageBox" style="background-color:red;height:50px;width:50px">&nbsp;</div>  
<div id="image_two" class="imageBox" style="background-color:blue;height:50px;width:50px">&nbsp;</div>
<div id="image_three" class="imageBox" style="background-color:yellow;height:50px;width:50px">&nbsp;</div>

<div data-num="one" class="icon_show">Red</div>
<div data-num="two" class="icon_show">Blue</div>
<div data-num="three" class="icon_show">Yellow</div> 
```

脚本：

```
$('.icon_show').click(function() {
    var showID = '#image_' + $(this).data('num');
    $('.imageBox:visible').fadeOut(function() {
        $(showID).fadeIn(400);
    });
}); 
```

演示：http: [//jsfiddle.net/jtbowden/NAcPW/](http://jsfiddle.net/jtbowden/NAcPW/)

关键是您会根据单击的链接自动确定要显示的链接。在这种情况下，我通过在数据属性中存储一个数字来做到这一点。您也可以只使用 ID 的一部分，或者通过使用计算偏移量`index`然后将其输入`eq`.

演示：http: [//jsfiddle.net/jtbowden/NnN58/](http://jsfiddle.net/jtbowden/NnN58/)

有很多方法可以简化此代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T17:33:36.103

这很有趣……我喜欢你设置 jsfiddle 的方式——它使玩起来更容易。看看这是否有帮助..fadeOuts 绑定的不仅仅是元素。只淡出可见的。我认为你的问题是淡出被调用已经淡出的元素。

这是您的 jsfiddle 的细微变化..

```
$(function(){
        $('#image_two,#image_three').hide();

//1//       

          $('.icon_one').click(function(){                
              $('#image_two:visible,#image_three:visible').fadeOut(
                  function(){

                     $('#image_one').fadeIn();
                  }
              );
           });

//2//
alert("binding");
   $('.icon_two').click(function(){
       $('#image_one:visible,#image_three:visible').fadeOut(
            function(){
                $('#image_two').fadeIn();
             }
                                            );
  });

    //3//

   $('.icon_three').click(function(){
       $('#image_one:visible,#image_two:visible').fadeOut(function(){
        $('#image_three').fadeIn();
        });
  });

}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T17:31:51.627

您可以将 div 放在彼此之上`position:absolute;`

工作示例：http: [//jsfiddle.net/Ghokun/wnTte/13/](http://jsfiddle.net/Ghokun/wnTte/13/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T17:19:14.860

换个怎么样

```
$('#image_one').fadeIn(); 
```

和

```
$('#image_one').delay(500).fadeIn(); 
```

和明智的....

# css - 防止 div 取代另一个 div

> ID：10110750
> 
> 赞同：0
> 
> 时间：2012-04-11T17:14:05.173
> 
> 标签：css, html

我在一个容器中有两个*元素*`div`，一个`div`位于第一个. 我还运行了一个 JS 函数，它将抓取第一个，并将其置于屏幕中心以进行显示。JS 函数然后将第一个重新定位到它的位置。问题是，第二个移出时会向上移动以取代第一个的位置，而当第一个移回原位时它们会重叠。如何防止第二个向上移动并取代第一个？ *`div``div``div``div``div``div``div``div`*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:16:17.873

我猜你正在设置你`position: absolute`正在`div`移动？

在这种情况下，请改用`position: relative`它，这`div`仍将保留其在文档中的原始空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:27:59.670

也许您可以在 var 'before' 中以第一个为中心捕获容器 div 的内容，当您需要回到原来的样子时，您可以将初始内容替换回来

```
var initialHtml = $(containerDiv).html()
//center the first div
//after the purpose of centering is achieved
$(containerDiv).html(initialHtml) 
```*

# asp.net - 用于检查方法返回类型的自定义 .NET 属性

> ID：10110752
> 
> 赞同：0
> 
> 时间：2012-04-11T17:14:14.550
> 
> 标签：asp.net, asp.net-mvc, attributes, custom-attributes

在我的公司，我们使用 MVC.NET 和 Entity Framework 来执行 SQL 连接。我想知道是否有一种方法可以在类上创建自定义属性，如果方法的返回类型不是 IEnumberable，则会创建警告？这个想法是为了避免开发人员默认使用一个集合，从而降低函数的通用性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:28:43.593

.Net 属性是在运行时评估的，并且在开发人员大量编写代码时对发出警告没有用处。您可能可以查看 FxCop / StyleCop 等静态分析工具，以便在编译时显示这些警告。在您的特定情况下，您可能必须编写一个自定义规则来进行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:31:52.523

编写一个单元测试来检查返回类型，而不是属性或其他任何东西。这样你就不会丑化你的代码。

# html - div 在 Firefox 中水平显示，但在 IE9 中（错误地）垂直堆叠

> ID：10110754
> 
> 赞同：-1
> 
> 时间：2012-04-11T17:14:29.677
> 
> 标签：html, firefox, internet-explorer-9, css

在 Firefox 版本 10、11 中，以下 div 按我的意愿出现——从左到右，水平：

```
 .containerForListStyles
   {
       width: 100%;
       margin: 0 auto;
       display:inline-block;
   }

   .listStyle1
   {
       font-family: Arial, sans-serif;
       display:inline-block;
       width: 250px;
       margin-right: 5px;
       margin-left: 3%;
   }

  .listStyle2
  {
      font-family: Arial, sans-serif;
      display:inline-block;
      width: 250px;
      margin-left: 5px;
      margin-right: 3%;
  }

     <div class="containerForListStyles">
       <a href="www.oursite.com"><img src="www.oursite.com/images/logo-landing2.png"</img></a>
       <div class="listStyle1">  
               This is the center div's text
       </div>
       <div class="listStyle2">     
               This is the right side text...
       </div>
    </div> 
```

在 Firefox 中，图像在左侧，然后 listStyle1 div 在其右侧，然后 listStyle2 div 在其右侧，都在同一行。

在 IE9 中，3 个元素（图像锚、div 1 和 div 2）*垂直堆叠。*

所以我研究了一些关于 inline-block 和 IE 问题的 SO 帖子，但这些帖子都说“pre-IE8”或“pre-IE7”有问题。

我需要更改什么以便 IE9 显示这 3 个 div 的水平左/中/右布局？似乎 IE9 忽略了“内联块”。

注意：我的 Android 智能手机 (HTC Evo) 正确显示了与 Firefox 相同的所需水平布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:39:32.177

为什么不尝试浮动元素？

# c# - 自定义成员和角色数据库？

> ID：10110780
> 
> 赞同：0
> 
> 时间：2012-04-11T17:16:27.347
> 
> 标签：c#, asp.net, sql, asp.net-membership

新手在这里，我还没有为asp.net 做过很多会员活动。我正在尝试为我正在构建的新应用程序利用 asp.net 会员机制，但我希望将会员信息存储在我自己的数据库中。我有什么选择？我需要编写自定义会员提供程序吗？还是 asp.net 有一个标准的 sql 提供程序（具有指定的表和列名）？

快速编辑：每个成员都使用他们的 Windows 身份验证登录，但我还需要存储有关他们的额外信息，例如他们的部门、年龄、等级等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T21:31:35.157

您可能需要考虑使用新的[Universal Membership Provider](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)

会员提供者是一个陡峭的学习曲线。如果您不熟悉 Membership Provider，请使用默认的，而不是实现自定义的 Membership Provider。

然后使用 User 表的 UserId 作为存储用户相关信息的其他表中的主键。

![在此处输入图像描述](../Images/a71deefef0a693f3a96fa923dd64ad20.png)

# c - 自修改代码，堆中复制/跳转失败

> ID：10110782
> 
> 赞同：6
> 
> 时间：2012-04-11T17:16:32.387
> 
> 标签：c, assembly, gdb, objdump, self-modifying

首先我很抱歉这篇文章的长度，但我想清楚地解释这个问题。

我尝试用 C 编写一种小型的**自我修改程序，**但我遇到了一些麻烦，我不知道究竟是为什么。

**平台是：** Ubuntu/Linux 2.6.32-40 x86_64，prog 基于 x86 arch，gcc (Ubuntu 4.4.3-4ubuntu5.1) 4.4.3，GNU ld (GNU Binutils for Ubuntu) 2.20.1-system.20100303

该程序的目的是创建一个**读/写/执行**内存块（使用**memalign(3)**和**mprotect(2)**），在这块内存中复制一个名为`p()`（在`.text`段中定义）的小函数，然后执行通过指针复制函数。该`p()`函数仅使用显示一条消息`printf(puts)`。

为了获取`p()`（复制它）的代码的起始地址和结束地址，我使用了函数本身的地址和在in`dummy()`之后创建的函数的地址。`p()``.text`

```
int p() { ... }       <- address where the copy starts
int dummy() { ... }   <- address where the copy stops 
```

块内存创建和复制已成功完成，但是**当块中的代码运行时会发生段错误**。通过使用`gdb`很明显，我们输入了块的代码（复制的函数的主体），但是对**printf 的调用失败了**。反汇编`p()`块中的函数和代码时，我发现“调用”中使用的地址不一样。

而且我不知道为什么地址不正确，复制代码时会显示它，这与我反汇编`p()`函数时objdump（或gdb）给我的一样。

创建二进制文件是`-static`为了避免. 在 上运行代码似乎不是问题，因为复制函数的开头已执行（检查下）。`got/plt``ld.so``heap``gdb`

程序的简化 src ：

```
<... skip include/checks ...>
#define newline()   putchar('\n')

/* - function copied in the chunk */ 
int p()
{
    printf("hello world\n");
    return 0;
}

/* - dummy function to get last address of p() */
int dummy() { return 0; }

int main()
{
    char *s, *code, *chunk;
    unsigned int pagesz, sz;
    int (*ptr)(void);

    pagesz = sysconf(_SC_PAGE_SIZE);
    chunk = (char*)memalign(pagesz, 4 * pagesz);
    mprotect(chunk, 4 * pagesz, PROT_WRITE|PROT_EXEC|PROT_READ);

    /* - get size, display addr */
    sz = (char *)dummy - (char *)p;
    printf("Copy between  : %p - %p\n", (char *)p, (char *)dummy);
    printf("Copy in chunk : %p - %p\n", chunk, chunk + sz, sz);

    /* - copy code (1 byte in supp) */
    printf("Copied code   : ");
    for(s = (char *)p, code = chunk; \
            s <= (char *)dummy; s++, code++) {

       *code = *s;     
       /* - write in console -- to check if code of p() after disas
        * it with objdump(1) is the same, RESULT : ok */
        printf("%02x ", *(unsigned char *)code);
    }
    newline();

    /* - run once orginal function */
    ptr = p;
    ptr();

    /* - run copied function (in chunk) */
    ptr = (int (*)(void))chunk;
    ptr(); 

    newline();
    free(chunk);
    return 0;
} 
```

`p()`反汇编的函数`objdump(1)`：

```
080483c3 <p>:
 80482c0:       55                      push   %ebp
 80482c1:       89 e5                   mov    %esp,%ebp
 80482c3:       83 ec 18                sub    $0x18,%esp
 80482c6:       c7 04 24 a8 d9 0a 08    movl   $0x80ad9a8,(%esp)
 80482cd:       e8 7e 0c 00 00          call   8048f50 <_IO_puts>
 80482d2:       b8 00 00 00 00          mov    $0x0,%eax
 80482d7:       c9                      leave  
 80482d8:       c3                      ret    

080483dc <dummy>:
 .... 
```

当程序在 gdb(1) 下运行时，复制的代码与上面提供的 objdump(1) 相同（十六进制值）：

```
# gcc -m32 -o selfmodif_light selfmodif_light.c -static -g -O0

# gdb -q ./selfmodif_light
Reading symbols from /path/.../selfmodif_light...done.

(gdb) list 55
50          /* - run once orginal function */
51          ptr = p;
52          ptr();
53
54          /* - run copied function (in chunk) */
55          ptr = (int (*)(void))chunk;

<<< The problem is here >>>

56          ptr();
57      
58          newline();
59          free(chunk);

(gdb) br 56
Breakpoint 1 at 0x8048413: file tmp.c, line 56.

(gdb) run
Starting program: /path/.../selfmodif_light
Copy between  : 0x80482c0 - 0x80482d9
Copy in chunk : 0x80d2000 - 0x80d2019
Copied code   : 55 89 e5 83 ec 18 c7 04 24 a8 d9 0a 08 e8 7e 0c 00 00 b8 00 00 00 00 c9 c3 55
hello world

Breakpoint 1, main () at tmp.c:56
56          ptr(); 
```

如果我们查看 main ，我们接下来会进入块：

```
(gdb) disas main
Dump of assembler code for function main:
   0x080482e3 <+0>: push   %ebp
    ... <skip> ...

=> 0x08048413 <+304>:   mov    0x18(%esp),%eax
   0x08048417 <+308>:   call   *%eax

    ... <skip> ...
   0x08048437 <+340>:   ret
End of assembler dump. 
```

**但是当 p() 和 chunk 被反汇编时，我们`call 0x80d2c90`在内存块中有 a 而不是`call 0x8048f50 <puts>`p() 函数中的 like 吗？由于这个原因显示的地址不一样。**

```
(gdb) disas p
Dump of assembler code for function p:
   0x080482c0 <+0>:     push   %ebp
   0x080482c1 <+1>:     mov    %esp,%ebp
   0x080482c3 <+3>:     sub    $0x18,%esp
   0x080482c6 <+6>:     movl   $0x80ad9a8,(%esp)
   0x080482cd <+13>:    call   0x8048f50 <puts> <<= it is not the same address
   0x080482d2 <+18>:    mov    $0x0,%eax
   0x080482d7 <+23>:    leave  
   0x080482d8 <+24>:    ret
End of assembler dump.
(gdb) disas 0x80d2000,0x80d2019
Dump of assembler code from 0x80d2000 to 0x80d2019:
   0x080d2000:  push   %ebp
   0x080d2001:  mov    %esp,%ebp
   0x080d2003:  sub    $0x18,%esp
   0x080d2006:  movl   $0x80ad9a8,(%esp)
   0x080d200d:  call   0x80d2c90             <<= than here (but it should be ??)
   0x080d2012:  mov    $0x0,%eax
   0x080d2017:  leave  
   0x080d2018:  ret
End of assembler dump. 
```

**检查内存时，代码似乎相同。在这一点上我不明白发生了什么，有什么问题？gdb的解释失败，代码副本还是什么？**

```
(gdb) x/25bx p // code of p in .text
0x80482c0 <p>:  0x55    0x89    0xe5    0x83    0xec    0x18    0xc7    0x04
0x80482c8 <p+8>:    0x24    0xa8    0xd9    0x0a    0x08    0xe8    0x7e    0x0c
0x80482d0 <p+16>:   0x00    0x00    0xb8    0x00    0x00    0x00    0x00    0xc9
0x80482d8 <p+24>:   0xc3

(gdb) x/25bx 0x80d2000 // code of copy in the chunk
0x80d2000:  0x55    0x89    0xe5    0x83    0xec    0x18    0xc7    0x04
0x80d2008:  0x24    0xa8    0xd9    0x0a    0x08    0xe8    0x7e    0x0c
0x80d2010:  0x00    0x00    0xb8    0x00    0x00    0x00    0x00    0xc9
0x80d2018:  0xc3 
```

如果设置了断点，则在内存块中继续执行：

```
(gdb) br *0x080d200d
Breakpoint 2 at 0x80d200d
(gdb) cont
Continuing.

Breakpoint 2, 0x080d200d in ?? ()
(gdb) disas 0x80d2000,0x80d2019
Dump of assembler code from 0x80d2000 to 0x80d2019:
   0x080d2000:  push   %ebp
   0x080d2001:  mov    %esp,%ebp
   0x080d2003:  sub    $0x18,%esp
   0x080d2006:  movl   $0x80ad9a8,(%esp)
=> 0x080d200d:  call   0x80d2c90
   0x080d2012:  mov    $0x0,%eax
   0x080d2017:  leave
   0x080d2018:  ret
End of assembler dump.
(gdb) info reg eip
eip            0x80d200d    0x80d200d
(gdb) nexti
0x080d2c90 in ?? ()
(gdb) info reg eip
eip            0x80d2c90    0x80d2c90
(gdb) bt
#0  0x080d2c90 in ?? ()
#1  0x08048419 in main () at selfmodif_light.c:56 
```

因此，此时程序要么像那样运行并且发生段错误，要么 $eip 被更改并且程序结束而没有错误。

```
(gdb) set $eip = 0x8048f50
(gdb) cont
Continuing.
hello world

Program exited normally.
(gdb) 
```

我不明白发生了什么，什么失败了。代码的副本似乎还可以，也可以跳转到内存块中，那么为什么（调用的）地址不好？

感谢您的回答和您的时间

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T17:21:40.873

```
80482cd:       e8 7e 0c 00 00          call   8048f50 
```

这是一个[相对的 CALL](http://faydoc.tripod.com/cpu/call.htm)（到 +0xC7E）。当您将该指令移动到不同的 EIP 时，您需要修改偏移量。

# php - 转换为数组的最佳字符串格式是什么？

> ID：10110786
> 
> 赞同：0
> 
> 时间：2012-04-11T17:16:49.827
> 
> 标签：php, mysql

我在 MySQL 中使用 GROUP_CONCAT 生成一个字符串。

我需要为每一行选择 2 列作为 id 和 name，我应该如何格式化查询中的字符串，以便我可以生成一个以最佳速度耦合 PHP 中的 id 和名称的数组？

例如（我的尝试）： GROUP_CONCAT 生产

```
{"id":1,"name":"python"},{"id":2,"name":"ruby"} 
```

然后将其转换为 PHP 中的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:30:47.633

您是否正在`GROUP_CONCAT()`生成 JSON 字符串？在这种情况下， （ [PHP 文档](http://ar.php.net/json_decode)`json_decode($string, true)`上的 json_decode() ）会做这件事。

但这不会比上面建议的跳跃青蛙更快。`mysql_fetch_array()`将为您解析字符串（用于`MYSQL_NUM`避免额外开销），您还将避免 MySQL 在`GROUP_CONCAT()`;上的额外时间

如果您只想在数据库中存储一些 JSON 数据（这会使将来的搜索和索引变得复杂，但有时当您不想创建大量数据库字段时这是一个不错的选择，Wordpress 一直都在这样做），您可以`json_encode()`在存储之前使用并`json_decode()`为此检索原始数组/对象。你也可以使用 PHP`serialize()`和`unserialize()`，但我认为 JSON 更可取，因为你提到你在哪里使用 Javascript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:43:44.250

像这样的东西-

```
<?php

$db = new PDO('mysql:dbname=test;host=127.0.0.1', 'user', 'pass');
$stmt = $db->prepare("SELECT some_field, GROUP_CONCAT(CONCAT_WS('::', id, name) SEPARATOR '||') AS grp
                      FROM `table`
                      GROUP BY some_field");
$stmt->execute();

while($row = $stmt->fetchObject()) {
    foreach(explode('||', $row->grp) as $pair) {
        $tmp = explode('::', $pair);
        $array[$row->some_field][$tmp[0]] = $tmp[1];
    }
}
print_r($array); 
```

正如 safarov 所指出的，您需要注意 group_concat_max_len 限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T17:36:01.000

我不知道你为什么要这样做。但是这个查询应该有效

```
SELECT * FROM `yourtable` GROUP_CONCAT(
    CONCAT('{"id":"',id,'","name":"',name,'"}') 
    separator ',') 
```

# windows-phone-7 - 在 WP7 中一张一张地显示多张图片？

> ID：10110788
> 
> 赞同：1
> 
> 时间：2012-04-11T17:16:57.653
> 
> 标签：windows-phone-7, data-binding, panel

哪个控件适合像 WP7 中的照片库一样一张一张地显示图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:15:26.687

Coding4Fun Toolkit 中的 MetroFlow 工具将帮助您实现这一目标：http: [//www.windowsphonegeek.com/articles/Getting-Started-with-the-Coding4Fun-toolkit-MetroFlow-Control](http://www.windowsphonegeek.com/articles/Getting-Started-with-the-Coding4Fun-toolkit-MetroFlow-Control)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:21:38.737

这实际上取决于您要如何堆叠它们以及从哪里获取它们。例如，您可以将 a`ListBox`与 custom 一起使用`DataTemplate`。或者，您可以使用[Silverlight Toolkit](http://silverlight.codeplex.com/)中的[StackPanel](http://msdn.microsoft.com/en-us/library/system.windows.controls.stackpanel%28v=vs.95%29.aspx)或[WrapPanel](http://www.windowsphonegeek.com/articles/WP7-WrapPanel-in-depth)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T21:35:47.030

Telerik 的 RadSlideView 控件怎么样？

[http://www.telerik.com/products/windows-phone/overview/all-controls.aspx#slideview](http://www.telerik.com/products/windows-phone/overview/all-controls.aspx#slideview)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T12:55:16.933

如果图像很小，只需使用 StackPanel：

```
<StackPanel>
  <Image ... />
  <Image ... />
</StackPanel> 
```

您也可以使用 ListBox（您将获得开箱即用的 Scrolling 和 Virtualization）：

```
<ListBox>
  <Image ... />
  <Image ... />
</ListBox> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T16:47:32.443

我所做的是使用包装面板控件在网格中显示图像的缩略图，然后在选择图像时，我导航到一个通用页面，其中几乎只有一个数据绑定枢轴控件，源绑定到我的集合的照片。您可以将枢轴的索引设置为您收藏中所选照片的​​索引，然后在照片之间滑动。

# gcc - 无法编译 Lex 和 Yacc 程序

> ID：10110789
> 
> 赞同：1
> 
> 时间：2012-04-11T17:17:03.233
> 
> 标签：gcc, yacc, lex

我正在尝试编译一些 lex 和 yacc 程序。在大学里，我们使用 Fedora Core 4。我在家里的虚拟机上使用相同的操作系统，但我无法编译该程序。以下是lex和yacc代码

莱克斯代码

```
%{
#include "y.tab.h"
%}
%%
[ \t]+ {;}
\n {return;}
[a-zA-Z][a-zA-Z0-9]* {return ID;}
[0-9]+ {return NUMBER;}
. {return yytext[0];} 
%% 
```

YACC 代码

```
%{
#include<stdio.h>
%}
%token NUMBER ID
%left '+' '-'
%left '*' '/'
%%
input:e'+'e
|e'-'e
|e'*'e
|e'/'e
|'('e')'
;
e:NUMBER
|ID
;
%%
int main()
{
printf("\n\nEnter an expression");
yyparse();
printf("\n\nValid Expression\n\n");
}
void yyerror()
{
printf("\n\nInvalid Expression\n\n");
exit(0);
}

While executing the above code, I get the following linker error

$ lex program_name.l                      //executes without error
$ yacc -d program_name.y                  //executes without error
$ cc lex.yy.c y.tab.c -ll -ly
/usr/bin/ld: cannot find -ly
collect2: ld returned 1 exit status 
```

请帮我解决这个错误。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:24:21.983

[此转换](http://www.linuxquestions.org/questions/fedora-35/gcc-ly-not-working-675032/)概述了您的问题：您需要安装 liby，并且编译器需要设置正确的库路径（例如 -L/usr/lib）

该`-ly`选项告诉链接器与liby库链接，但根据错误，它找不到那个库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T01:43:41.440

没有这样的事情`-ly`。Lex 和 flex 生成的扫描器使用运行时支持库。yacc 生成的解析器不会。只需取出并重`-ly`试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T17:23:10.867

这与您的 yacc 库有关...您需要将目录包含在`-L"/some/path/to/lib-directory"`选项中

或者您可能需要安装适当的库...

# jsp - Spring控制器正确转发到另一个控制器，但视图未呈现

> ID：10110794
> 
> 赞同：0
> 
> 时间：2012-04-11T17:17:30.830
> 
> 标签：jsp, spring-mvc, controller

我有两个带有两个控制器的 JSP 页面（每个 JSP 一个）。

*   Landing.jspx 是一个搜索表单，它通过 POST 提交给登陆控制器。
*   appt.jspx 是我的第二个页面，由 appt 控制器提供服务。

我正在尝试从登陆 jsp 转发到 appt jsp。我的着陆控制器标记如下：

```
@Controller
@SessionAttributes("state")
@RequestMapping(value = "/landing")
public class LandingController {

    @RequestMapping(value = "/postData", method = RequestMethod.POST)
    public String lookup(@ModelAttribute("state") State state, Model model)  {
        // something useful goes here
        return "appt";
    }
} 
```

还有我的 ApptController：

从 Spring 调试日志信息中，我可以看出：

*   我的登陆控制器正在返回并呈现 appt.jspx
*   我在 InternalResourceView 'appt' 中看到“转发到资源 [/WEB-INF/jsp/appt.jspx]”

我在浏览器中没有看到新页面，也没有看到任何关于 Spring 尝试将 URL 与日志中的 appt 控制器方法匹配的信息。我必须假设 appt 控制器从未看到该请求。

这是我的 appt 控制器方法（Spring 正在执行）：

```
@Controller
@SessionAttributes("state")
@RequestMapping(value="/appt")
public class ApptController {

    @RequestMapping(method = RequestMethod.GET)
    public String home(@ModelAttribute("state") PAWState state, Model model) {

        model.addAttribute("state", state);
        return "appt";
    } 
```

使用：

```
return "redirect:/appt" 
```

这让我更接近，我看到：

*   我的登陆控制器正在返回并呈现 appt.jspx
*   我看到 DispatcherServlet 试图匹配 URL /appt 并在我的 appt 控制器中找到正确的方法。
*   我看到 appt 控制器方法返回 Spring 所说的视图“appt”渲染

我没有看到浏览器中的新渲染。我看到相同的搜索页面。

我错过了什么？

日志（返回“redirect:/appt”）：

```
12:53:40,451 DEBUG - DispatcherServlet with name 'XServlet' processing POST request for /X/landing/postData]
12:53:40,451 DEBUG - Looking up handler method for path /landing/postData
12:53:40,451 DEBUG - Returning handler method [public java.lang.String x.x.x.x.controller.LandingController.lookup(x.x.x.x.controller.valuebeans.XState,org.springframework.ui.Model) throws x.x.x.x.common.exception.XException]
12:53:40,451 DEBUG - Returning cached instance of singleton bean 'LandingController'
12:53:40,732 DEBUG - Invoking afterPropertiesSet() on bean with name 'redirect:/appt'
12:53:40,732 DEBUG - Rendering view [org.springframework.web.servlet.view.RedirectView: name 'redirect:/appt'; URL [/appt]] in DispatcherServlet with name 'XServlet'
12:53:40,732 DEBUG - Successfully completed request
12:53:40,732 DEBUG - DispatcherServlet with name 'XServlet' processing GET request for [/X/appt]
12:53:40,732 DEBUG - Looking up handler method for path /appt
12:53:40,732 DEBUG - Returning handler method [public java.lang.String x.x.x.x.controller.ApptController.home(x.x.x.x.controller.valuebeans.XState,org.springframework.ui.Model) throws x.x.x.x.common.exception.XException]
12:53:40,732 DEBUG - Returning cached instance of singleton bean 'apptController'
12:53:40,732 DEBUG - Last-Modified value for [/X/appt] is: -1
12:53:40,732 DEBUG - Invoking afterPropertiesSet() on bean with name 'appt'
12:53:40,732 DEBUG - Rendering view [org.springframework.web.servlet.view.JstlView: name 'appt'; URL [/WEB-INF/jsp/appt.jspx]] in DispatcherServlet with name 'XServlet'
12:53:40,732 DEBUG - Added model object 'org.springframework.validation.BindingResult.state' of type [org.springframework.validation.BeanPropertyBindingResult] to request in view with name 'appt'
12:53:40,732 DEBUG - Added model object 'state' of type [x.x.x.x.controller.valuebeans.XState] to request in view with name 'appt'
12:53:40,732 DEBUG - Forwarding to resource [/WEB-INF/jsp/appt.jspx] in InternalResourceView 'appt'
12:53:42,979 DEBUG - No properties file found for [file:/C:/Work/x/WEB-INF/messageSource/content_en_US] - neither plain properties nor XML
12:53:42,979 DEBUG - No properties file found for [file:/C:/Work/x/WEB-INF/messageSource/content_en] - neither plain properties nor XML
12:53:42,979 DEBUG - Loading properties [content.properties]
12:53:43,010 DEBUG - No property editor [java.lang.BooleanEditor] found for type java.lang.Boolean according to 'Editor' suffix convention
12:53:43,026 DEBUG - Successfully completed request 
```

**编辑：**这是通过 Spring 3.1.1 使用注释

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T04:35:16.170

如果您确实返回“forward:appt”而不是返回“redirect:appt”，那么即使使用 AJAX 请求也应该可以正常工作。这是因为重定向会导致向客户端发送 HTTP 重定向状态代码，而不会在响应终止之前呈现视图；而转发导致响应被转发到下一个控制器，并且在响应终止之前呈现关联的视图。

# spring - Spring 不使用 JAX-WS Web 服务端点自动装配 bean

> ID：10110801
> 
> 赞同：2
> 
> 时间：2012-04-11T17:18:07.710
> 
> 标签：spring, jax-ws, autowired

我正在尝试使用我编写的**JAX-WS Web 服务。**我总是得到`nullPointerException`spring autowired annotated beans。但是，在 web 上的 serverSide 中一切正常，但通过**JAX-WS webservice**访问 bean 。

我尝试过扩展`SpringBeanAutowiringSupport`，但仍然没有运气。我怎样才能做到这一点。

问候，罗希特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:15:25.380

我没有扩展 SpringBeanAutowiringSupport 的经验，但成功地使用了这种方法：

1.  以这样的方式注释 webService 类：

    ```
    @Component("yourWebService")  
    @WebService(endpointInterface ="your.package.YourServicePort") 
    ```

2.  为 webService 创建新的 spring-context xml 并定义 JAX-WS 端点：

    ```
    <jaxws:endpoint
        id="yourServiceEndpoint"
        implementor="#yourWebService"
        address="${yourWebService.wsdl.url}"> //load url from properties file
    </jaxws:endpoint> 
    ```

3.  我想你知道如何在 spring 中使用 props，但会解释一下以防万一。您还应该创建`yourWebService.properties`文件并在 spring 上下文中定义它以使用此构造`${yourWebService.wsdl.url}`：

    ```
    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
       <property name="locations">
          <list>
              <value>yourWebService.properties</value>
          </list>
       </property> 
    ```

使用这种方法，我成功地将 JAX 与 Spring 结合使用

# jquery - JQuery 将 JSON 对象发布到服务器

> ID：10110805
> 
> 赞同：44
> 
> 时间：2012-04-11T17:18:22.343
> 
> 标签：jquery, json

我创建了一个需要在 jersey 中发布的 json，由 grizzly 运行的具有 REST Web 服务的服务器获取需要输出的传入 json 对象。我正在尝试，但不确定如何正确实施。

```
import java.io.IOException;
import java.io.InputStream;

import net.sf.json.JSONObject;
import net.sf.json.JSONSerializer;

import org.apache.commons.io.IOUtils;

import javax.ws.rs.*;

    @Path("/helloworld")
    public class GetData {
        @GET
        @Consumes("application/json")
        public String getResource() {

            JSONObject obj = new JSONObject();
            String result = obj.getString("name");

            return result;      
        }                   

    } 
```

我有一个在加载时运行此方法的 html 文件

```
 function sendData() {
        $.ajax({
                url: '/helloworld',
                type: 'POST',
                contentType: 'application/json',
                data: {
                    name:"Bob",

                },
                dataType: 'json'
            });
            alert("json posted!");
        }; 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-04-11T17:27:18.860

要将 json 发送到服务器，首先必须创建 json

```
function sendData() {
    $.ajax({
        url: '/helloworld',
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({
            name:"Bob",
            ...
        }),
        dataType: 'json'
    });
} 
```

这就是构建 ajax 请求以将 json 作为 post var 发送的方式。

```
function sendData() {
    $.ajax({
        url: '/helloworld',
        type: 'POST',
        data: { json: JSON.stringify({
            name:"Bob",
            ...
        })},
        dataType: 'json'
    });
} 
```

json 现在将位于`json`post var 中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-28T00:23:20.813

也可以使用`FormData()`. 但是您需要设置`contentType`为`false`：

```
var data = new FormData();
data.append('name', 'Bob'); 

function sendData() {
    $.ajax({
        url: '/helloworld',
        type: 'POST',
        contentType: false,
        data: data,
        dataType: 'json'
    });
} 
```

# .htaccess - htaccess 共享主机子域的永久重定向

> ID：10110807
> 
> 赞同：1
> 
> 时间：2012-04-11T17:18:27.770
> 
> 标签：.htaccess, redirect

我有这样的域：

someword.com.s123234.gridserver.com

我正在尝试 .htaccess 重定向

```
RewriteEngine on

RewriteCond %{HTTP_HOST} !^someword.com.s123234.gridserver.com/$

RewriteRule ^/(.*)$ http://www.someword.com/$1 [R=301,L] 
```

但重定向不起作用。

如何永久重定向此类域？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:17:19.127

由于该点对 htaccess 意味着某些东西（即“所有字符），因此您必须写 . 代替。

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^someword\.com\.s123234\.gridserver\.com$
RewriteRule ^/(.*)$ http://www.someword.com/$1 [R=301,L] 
```

# castle-activerecord - 你忘了 ActiveRecordStarter.Initialize

> ID：10110809
> 
> 赞同：0
> 
> 时间：2012-04-11T17:18:31.140
> 
> 标签：castle-activerecord, castle, castle-monorail

我是城堡项目的新手，所以我会尽力解释。在 example.com 上有一个 .net 程序正在运行。我创建了一个子域 sub.example.com 我希望 .net 程序在其中运行。我将所有文件移至 sub.example.com 站点。当我运行该站点时，我可以登录，但页面给了我这个错误。

> 使用了 ActiveRecord 类 (web.exp.Vims.Model.Configuration)，但框架似乎 > 未正确初始化。你忘了 ActiveRecordStarter.Initialize() 吗？
> 
> StackTrace：在 Castle.ActiveRecord.ActiveRecordBase.EnsureInitialized(Type type) at Castle.ActiveRecord.ActiveRecordBase.FindAll(Type targetType, Order[] orders, > > >ICriterion[] criteria) at web.exp.Vims.Model.Configuration。 expOnRails.Controllers.HomeController.Index() 处的 GetBySection(String sectionName)

我无权访问代码，我只是希望可以将其移至子域。任何提示将不胜感激。

# php - CakePHP 属于多个模型？

> ID：10110814
> 
> 赞同：3
> 
> 时间：2012-04-11T17:18:48.923
> 
> 标签：php, cakephp, associations, belongs-to

如果此问题已在其他地方得到解答，我提前道歉；我搜索了一个现有的答案，但结果是空的。也许我正在寻找错误的关键字。

我有三个模型，其中两个（学生和导师）与一个与其他模型都有`$hasMany`关系的通用模型（约会）有`$belongsTo`关系。具体型号如下...

一个学生有很多约会...

```
class Student extends AppModel {
    var $hasMany = array (
        'Appointment' => array (
            'foreignKey' => 'student_id'
        )
    ); 
```

一个导师有很多约会...

```
class Tutor extends AppModel {
    var $hasMany = array (
        'Appointment' => array (
            "foreignKey" => 'tutor_id'
        )
    ); 
```

约会属于学生和导师...

```
class Appointment extends AppModel {
    var $belongsTo = array (
        'Student' => array (
            'foreignKey' => 'student_id'
        ),
        'Tutor' => array (
            'foreignKey' => 'tutor_id'
        )   
    ); 
```

在查看学生的记录时（例如“app/student/view/4”），我需要能够列出他们即将到来的约会的日期以及该约会的导师姓名。因此，我需要在查看 Student 模型时从 Tutor 模型（名称）访问数据。现在我只能通过`$this->Student->query()`拉取相关的导师记录来完成此操作，但这会导致学生的信息在结果数组中重复。

所有的`$hasMany`和`$belongsTo`关系都工作得很好。CakePHP 是否有一个我缺少的内置函数来获取相关信息，或者这需要在某个地方直接完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T17:46:27.433

您应该考虑使用[Containable](http://book.cakephp.org/1.3/en/view/1323/Containable)。如果您不熟悉它，它是一种[行为](http://book.cakephp.org/1.3/view/1071/Behaviors)，您可以将其附加到模型并使用它来精确定义要包含在 a 中的关联模型，模型的数量`find`和深度都可以。

我总是将它用于所有模型，方法是在 AppModel 中设置它：

```
var $actsAs = array('Containable'); 
```

然后在控制器中：

```
$this->Student->find('first', array(
    'conditions' => ...,
    'contain' => array('Appointment' => 'Tutor'),
    ...
)); 
```

# sql - 以 1:1 关系向 EF4 模型添加视图

> ID：10110815
> 
> 赞同：1
> 
> 时间：2012-04-11T17:18:50.533
> 
> 标签：sql, entity-framework, database-view

我正在使用 EF4 并尝试将 SQL 视图添加到模型中。

它们之间的关系是1-1，一侧是Order，一侧是OrderSummary（摘要是视图，包含聚合数据）。

当我添加视图时，它会检测视图上的键（OrderID），但我必须手动创建 1-1 关系。

我遇到的问题是，当我尝试构建应用程序时出现错误：

**没有为以下 EntitySet/AssociationSet - OrderOrderSummary 指定映射。**

我一直在寻找，在使用视图时找不到解决这个特定问题的方法，大多数错误似乎都与错误配置的数据库模式有关，但据我所知，我的视图还可以：

```
CREATE VIEW [store].[OrderSummary]
AS
SELECT        store.Orders.OrderID, COUNT(*) AS LineCount
FROM          store.Orders INNER JOIN
              store.OrderLines ON store.Orders.OrderID = store.OrderLines.OrderID
GROUP BY store.Orders.OrderID, store.OrderLines.OrderLineID 
```

我是否需要对我的观点做更多的事情才能使其在 EF 和 1:1 关系中发挥作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:39:14.010

我解决了这个问题。它出现在我创建关联时我没有指定引用约束（通过双击表/视图之间的线）。

花了一点时间，但希望我的痛苦可以帮助别人！

# r - data.tables 和扫描功能

> ID：10110817
> 
> 赞同：6
> 
> 时间：2012-04-11T17:18:53.810
> 
> 标签：r, data.table

使用 data.table，这将是在选择的列中“扫描”统计信息的最快方法？

从（相当大的）DT 开始

```
p <- 3
DT <- data.table(id=c("A","B","C"),x1=c(10,20,30),x2=c(20,30,10))
DT.totals <- DT[, list(id,total = x1+x2) ] 
```

我想通过索引目标列（2：p）来获得以下 data.table 结果以跳过键：

```
 id  x1  x2
[1,]    A   0.33    0.67
[2,]    B   0.40    0.60
[3,]    C   0.75    0.25 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T17:54:50.963

我相信接近以下的东西（使用相对较新的`set()`功能）将是最快的：

```
DT <- data.table(id = c("A","B","C"), x1 = c(10,20,30), x2 = c(20,30,10))
total <- DT[ , x1 + x2]

rr <- seq_len(nrow(DT))
for(j in 2:3) set(DT, rr, j, DT[[j]]/total) 
DT
#      id        x1        x2
# [1,]  A 0.3333333 0.6666667
# [2,]  B 0.4000000 0.6000000
# [3,]  C 0.7500000 0.2500000 
```

FWIW，调用`set()`采用以下形式：

```
# set(x, i, j, value), where: 
#     x is a data.table 
#     i contains row indices
#     j contains column indices 
#     value is the value to be assigned into the specified cells 
```

* * *

与其他解决方案相比，我对此的相对速度的怀疑是基于[data.table 的 NEWS 文件](http://cran.r-project.org/web/packages/data.table/NEWS)中的这段话，在版本 1.8.0 的更改部分中：

> ```
> o   New function set(DT,i,j,value) allows fast assignment to elements
>     of DT. Similar to := but avoids the overhead of [.data.table, so is
>     much faster inside a loop. Less flexible than :=, but as flexible
>     as matrix subassignment. Similar in spirit to setnames(), setcolorder(),
>     setkey() and setattr(); i.e., assigns by reference with no copy at all.
> 
>         M = matrix(1,nrow=100000,ncol=100)
>         DF = as.data.frame(M)
>         DT = as.data.table(M)
>         system.time(for (i in 1:1000) DF[i,1L] <- i)   # 591.000s
>         system.time(for (i in 1:1000) DT[i,V1:=i])     #   1.158s
>         system.time(for (i in 1:1000) M[i,1L] <- i)    #   0.016s
>         system.time(for (i in 1:1000) set(DT,i,1L,i))  #   0.027s 
> ```

# php - 未执行带有 javascript onsubmit 的 PHP 和 HTML 表单

> ID：10110820
> 
> 赞同：4
> 
> 时间：2012-04-11T17:19:09.440
> 
> 标签：php, javascript, forms

我有一个要求用户输入的 HTML 表单。javascript 函数用于验证表单，应在执行 PHP 代码之前触发（使用 onsubmit）。（头文件中引用了js文件`<script type="text/javascript" src="js/javascript.js"></script>`）

但是 javascript 永远不会执行，而是 PHP 代码执行并（正确地）包含新文件。

我怎样才能使 javascript 根据需要执行？

HTML 文件：

```
<form name="details" action="" method="post" 
     onSubmit="return ValidateForm(details);">
...
<input type="submit" name="post-this-form" value="Next"/>
</form> 
```

PHP 文件：

```
if (isset($_POST['post-this-form']) and 
     $_POST['post-this-form'] == 'Next')
{
...
some php 
...
include 'shipping-details.html.php';
exit();
} 
```

**编辑**

这是所要求的javascript。它已经过测试和工作，没有涉及任何 PHP。通过传递`details`（表单的名称），我使所有表单字段都可以访问。

```
function ValidateForm(details)
        {
        var firstName=document.forms.details.firstName.value;
        var lastName=document.forms.details.lastName.value;
        var streetAddress=document.forms.details.streetAddress.value;
        var town=document.forms.details.town.value;
        var city=document.forms.details.city.value;
        var zip=document.forms.details.zip.value;
        var country=document.forms.details.country.value;       
        var creditCard=document.forms.details.creditcard.value;                 

                ...

        //Checks firstName
        if ((firstName=="")||(!firstName.match(alphabetExpression)))
            {
            alert ("Invalid first name, please re-enter");
            return false;
            }
                 ...

        //Checks creditCard
        if ((creditCard=="")||(!creditCard.match(numericExpression))||(creditCardLength!=16))
            {
            alert ("Invalid credit card entry, please re-enter");
            return false;
            }       
        }// end function 
```

**编辑 2**

我添加`alert ("Hi");`到 javascript 的开头并且警报从未出现，这让我认为该函数根本没有执行。

**编辑 3**

我最初怀疑这个问题可能是由于 PHP 是错误的。正如 Jason 在他的评论中提到的，问题出在 javascript 本身。这是一个有点奇怪的想法，因为相同的 javascript 代码在没有 PHP 和我的本地机器上“独立”工作。有这么多需要考虑的因素......谢谢大家花时间看看我的问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:30:04.357

以下是您必须了解的有关您尝试构建的功能的几件事

```
function ValidateForm() {
     this; // this contains the form name no need for any variable declaration

     return true; // or false This is very important to continue the execution
                  // false stops the submittion
} 
```

当您解决这两个问题时，它应该可以按您的意愿工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T19:44:04.633

***评论转换为答案***

“我敢打赌有一个 javascript 错误。打开错误控制台。在 firefox 中按 ctrl+shift+j。”

很高兴这有帮助。

# apache - htaccess 将子目录限制为我的 IP 不起作用

> ID：10110822
> 
> 赞同：2
> 
> 时间：2012-04-11T17:19:20.150
> 
> 标签：apache

```
Order deny,allow
deny from all
allow from xx.xx.x.xx  
RewriteRule . - [F] 
```

我在我网站的子目录中的 .hta 文件中有上述内容，我试图将对该目录及其子目录的访问限制为仅限我的 IP。我有一个静态 IP，我检查了输入的 IP 是否正确，但它不允许我的 IP ...

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:33:28.200

您需要删除 RewriteRule。`RewriteRule . - [F]`不会区分 IP，并且将始终应用规则，因此无论请求是什么（除了`/`），您将始终被禁止（**[F]**）。

* * *

更新：

如果它是父母的指令，请尝试添加`AllowOverride Limit`到文件的顶部（并且仍然删除 RewriteRule）

如果*仍有*一些东西阻止您覆盖父目录规则，您可以完全通过 RewriteEngine 来完成：

```
RewriteCond %{REMOTE_ADDR} !^xx.xx.x.xx$
RewriteRule . - [F] 
```

这会将远程地址（连接的客户端）*不是*xx.xx.x.xx 的条件添加到禁止规则中，如果是，则条件失败并且不会应用该规则。

# matlab - 单击按钮时是否按下了“Ctrl”键？

> ID：10110823
> 
> 赞同：10
> 
> 时间：2012-04-11T17:19:30.020
> 
> 标签：matlab, user-interface

我需要知道用户`ctrl`在单击按钮时是否按住键。因为它是一个按钮而不是一个图形，所以我不能在图形等上使用“selectionType”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T20:12:13.933

这个怎么样：

```
modifiers = get(gcf,'currentModifier');        %(Use an actual figure number if known)
ctrlIsPressed = ismember('control',modifiers); 
```

图形类有许多有用的`Current*`属性，这些属性在处理回调时很有用。这是检索当前鼠标位置、选定图形对象和（如这里）按下的键的方法。其中包括：CurrentAxes、CurrentCharacter、CurrentKey、CurrentModifier、CurrentObject 和 CurrentPosition。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-24T23:08:41.687

按退出键重新初始化 CurrentModifier。到目前为止，我的解决方案是指示我的用户（就在 GUI 中）按退出键以恢复默认行为。

总体而言，Matlab 的 CurrentModifier 行为似乎是修饰键“粘住”，直到发生以下情况之一：按下不同的修饰符、选择了不同的窗口或按下了转义键。

# javascript - JavaScript 中操作的“上下文”是什么意思

> ID：10110826
> 
> 赞同：0
> 
> 时间：2012-04-11T17:19:54.620
> 
> 标签：javascript, backbone.js, socket.io

我正在尝试将 socket.io 与backbone.js 结合起来。

我在网上找了一段起始代码，我理解99%。我唯一的问题是理解以下行：

> 在下面的代码中，唯一添加到默认模型或集合的项目是 this.ctx，它是可选的。它用于为操作提供 **上下文**，应在初始化 Backbone 模型或集合时定义。

什么是眼中钉。是用来传递变量的吗？？它是用来传递回调的吗？？

完整的代码可以在这里找到：[Backbone.js 和 socket.io](http://developer.teradata.com/blog/jasonstrimpel/2011/11/backbone-js-and-socket-io)

我已经尝试自己解决这个问题已经有一段时间了，我可以在解决它的同时让代码工作。但我很好奇作者的真正意图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:06:14.047

通常在 JS 中，上下文是指在函数中引用的对象，`this`例如事件处理程序。例如，假设下面的事件注册函数接受一个回调作为它的第三个参数，一个上下文作为它的第四个参数，你可以这样调用它：

```
var contextObject = { 'testProperty' : 'test' };

registerEvent(someElement, 'click', function() {
    var a = this.testProperty; // 'a' is 'test'
}, contextObject); 
```

# java - 使用 Java 将两个 XML 文件合并为一个 XML 文件

> ID：10110827
> 
> 赞同：0
> 
> 时间：2012-04-11T17:20:01.063
> 
> 标签：java, xml, merge, io

我不知道如何继续组合两个不同的 XML 文件（具有相同的结构）。当我对它进行一些研究时，人们说必须使用像 DOM 或 StAX 这样的 XML 解析器。但是我不能用常规的 IOStream 来做吗？我目前正在尝试在 IOStream 的帮助下进行，但这并不能解决我的目的，它更复杂。

例如，我尝试过的是；

```
 public class GUI {

           public static void main(String[] args) throws Exception {

           // Creates file to write to
           Writer output = null;
           output = new BufferedWriter(new   FileWriter("C:\\merged.xml"));
           String newline = System.getProperty("line.separator");

           output.write("");

           // Read in xml file 1
           FileInputStream in = new FileInputStream("C:\\1.xml");
           BufferedReader br = new BufferedReader(new InputStreamReader(in));
           String strLine;

           while ((strLine = br.readLine()) != null) {

           if (strLine.contains("<MemoryDump>")){
           strLine = strLine.replace("<MemoryDump>", "xmlns:xsi");
           }
           if (strLine.contains("</MemoryDump>")){
           strLine = strLine.replace("</MemoryDump>", "xmlns:xsd");
          }

          output.write(newline);
          output.write(strLine);

          System.out.println(strLine);
          }

           // Read in xml file 2
           FileInputStream in = new FileInputStream("C:\\2.xml");
           BufferedReader br1 = new BufferedReader(new InputStreamReader(in));
           String strLine1;

           while ((strLine1 = br1.readLine()) != null) {

           if (strLine1.contains("<MemoryDump>")){
           strLine1 = strLine1.replace("<MemoryDump>", "");
           }
           if (strLine1.contains("</MemoryDump>")){
           strLine1 = strLine1.replace("</MemoryDump>", "");
          }

          output.write(newline);
          output.write(strLine1); 
```

我请求您让我知道如何通过添加其他内容来合并两个 XML 文件。如果您也可以提供一些示例链接，那就太好了..！

先感谢您..！System.out.println(strLine1); }

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:22:59.133

作为一般规则，永远不要在词法级别对 XML 进行任何处理：始终使用 XML 解析器。（如果 (a) 您是 XML 专家，因此您知道可能会出现什么问题，并且 (b) 您知道结果不一定总是正确的，则您可以打破此规则。）

其次，进行这种处理的最简单方法是使用专为这项工作设计的语言，例如 XSLT 或 XQuery。使用 Java 让它变得非常简单。

如果您更具体地了解要合并的文件类型以及您希望输出的外观，我们可以为您提供更准确的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:27:50.823

不完全确定您要做什么。合并是指：

一个。您想要合并 2 个 DOM 的内容并提出一个带有附加节点的对象模型（一个有效的模型）

湾。您想一个接一个地合并 2 个文件，而不关心实际内容

如果是，请使用 XML 解析器。当然，您可以手动编写内容并尝试将流处理为 dom 对象，但您将重写很多这些解析器的用途。为什么要重写已经存在的东西。

如果是b，就做一个愚蠢的副本。复制第一个文件（再次使用实用程序，像 apache common 的 FileUtil 之类的东西允许您复制文件。除非必要，否则不要写入），打开复制文件的 IO 流，然后读取和写入第二个文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-23T06:49:19.770

```
package com.cts.sterling.order;

//package com.academy.ecommerce.sterling.userexits;
import java.io.File;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;
import com.cts.sterling.custom.accelerators.util.XMLUtil;

public class MergeXml {

    public static Document mergeXml(Document doc1, Document doc2)

            throws Exception {

        // Getting the attributes of OrderLine from document2 and document1
        NodeList objOrderLineList2 = doc2.getElementsByTagName("OrderLine");
        NodeList objOrderLineList1 = doc1.getElementsByTagName("OrderLine");

        // Creating Element for OrderLine
        Element eleOrderline2 = (Element) objOrderLineList2.item(0);
        Element eleOrderline1 = (Element) objOrderLineList1.item(0);

        // Declaring attributes as String array 
        String[] Line1={"LineType","LevelOfService"};

        // Copying attributes from document2 to document1
        XMLUtil.copyAttributes(eleOrderline2, eleOrderline1, Line1);

        // Getting the attributes of Extn from document2 and document1
        NodeList objExtn2 = doc2.getElementsByTagName("Extn");
        NodeList objExtn1 =doc1.getElementsByTagName("Extn");

        // Creating Element for Extn
        Element eleExtn2 = (Element) objExtn2.item(0);
        Element eleExtn1 = (Element) objExtn1.item(0);

        // Declaring attributes as String array
        String[] Line2={"ExtnMediaCode","ExtnLastName","ExtnGroupID"};

        // Copying attributes from document2 to document1
        XMLUtil.copyAttributes(eleExtn2, eleExtn1, Line2);

        // Getting the attributes of WSIAddnlOrderLineData from document2 and document1
        NodeList objAddln2 = doc2.getElementsByTagName("WSIAddnlOrderLineData");
        NodeList objAddln1 =doc1.getElementsByTagName("WSIAddnlOrderLineData");

        // Creating Element for WSIAddnlOrderLineData
        Element eleAddln2 = (Element) objAddln2.item(0);
        Element eleAddln1 = (Element) objAddln1.item(0);

        // Declaring attributes as String array
        String[] Line3 ={"ExtnShipMode" , "ExtnDeliverTogether","ExtnComponentReplacementIndicator","ExtnGiftCardRequiredIndicator","ExtnReplOriginalItemID", 
                "ExtnSpecialHandlingIndicator","ExtnSpecialHandlingReasonCode","ExtnCardType","ExtnCardClass","ExtnEcomSuborderNo","ExtnEcomOrderLineNo",
                "ExtnPFSFlag","ExtnSVCCarrierServiceCode","ExtnSVCSCAC","ExtnSVCUpgradeFlag","ExtnSVCSKUType","ExtnSVCTo","ExtnSVCFrom"};   

        // Copying attributes from document2 to document1
        XMLUtil.copyAttributes(eleAddln2, eleAddln1, Line3);

        // Getting the attributes of Instruction from document2 and document1
        NodeList objInst2 = doc2.getElementsByTagName("Instruction");
        NodeList objInst1 =doc1.getElementsByTagName("Instruction");

        // Creating Element for Instruction
        Element eleInst2 = (Element) objInst2.item(0);
        Element eleInst1 = (Element) objInst1.item(0);

        // Declaring attributes as String array
        String[] Line4 ={"InstructionText","InstructionType","SequenceNo","InstructionURL","InstructionUsage"}; 

        // Copying attributes from document2 to document1
        XMLUtil.copyAttributes(eleInst2, eleInst1, Line4);

        //Printing output document
        System.out.println(XMLUtil.getString(doc1));
        return doc1;

    }
    //Main method
    public static void main(String[] args) {
        try{

            File file1 = new File("D:/Handson/merge1.xml");
            DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
            Document doc1 = dBuilder.parse(file1);
            File file2 = new File("D:/Handson/merge2.xml");
            Document doc2 = dBuilder.parse(file2);

            //calling the method
            mergeXml(doc1,doc2);
        }
        catch (Exception e) {
            e.printStackTrace();
        }

    }
} 
```

# c# - 使用单个源但不同绑定模式的多个绑定目标

> ID：10110828
> 
> 赞同：0
> 
> 时间：2012-04-11T17:20:07.863
> 
> 标签：c#, wpf, silverlight

我创建了一个自定义集合类，我试图将其绑定到 Silverlight 中的两个不同的树视图。集合实现 INotifyCollectionChanged，集合持有的类型实现 INotifyPropertyChanged。GUI 上有一个位于两个树视图之间的 DataGrid。这是一个可以从左侧树视图拖动项目并进行操作的区域。然后，更改会反映在第二个树视图中。第一个树视图应该只绑定一次，而第二个树视图应该在源发生更改时更新。然而，出于某种原因，第一个树视图上的 OneTime 绑定似乎根本不起作用。树视图仍然得到更新。如果类型实现 INotifyCollectionChanged 或 INotifyPropertyChanged，OneTime 绑定是否有效？树视图的标记是' t 正常工作看起来与此类似。我删除了一些与问题无关的细节。树视图的DataContext被设置为一个叫做Client的类型，例如，`_tv.DataContext = client`. 每个客户都有一个计划集合，每个计划又都有一个分配集合。我正在为树视图使用 HierarchicalDataTemplate。我忽略了什么吗？INotifyPropertyChanged 和 INotifyCollectionChanged 已正确实现。我不认为这是一个逻辑问题。

```
<sdk:TreeView Name="_tv" ItemsSource="{Binding Plans, Mode=OneTime}">
  <sdk:TreeView.ItemTemplate>
    <sdk:HierarchicalDataTemplate ItemsSource="{Binding Allocations, Mode=OneTime}">
      <TextBlock Text="{Binding Name, Mode=OneTime}"/>
        <sdk:HierarchicalDataTemplate.ItemTemplate>
          <DataTemplate>
            <TextBlock>
              <Run Text="{Binding Fund.Allocations.Count}"></Run>
              <Run Text="{Binding Fund.Symbol}"></Run>
              <Run Text="{Binding Fund.Name}"></Run>
              <Run Text="{Binding Fund.AssetClass}"></Run>
            </TextBlock>
          </DataTemplate>
        </sdk:HierarchicalDataTemplate.ItemTemplate>
      </sdk:HierarchicalDataTemplate>
  </sdk:TreeView.ItemTemplate>
</sdk:TreeView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:28:44.740

绑定到`Plans`实际上并没有改变，因为`Plans`实际上并没有改变。它的内容*正在*`Plans`改变，因此`OneTime`指令不会抑制这些更改的显示。

# javascript - 在 Rhino 中运行 fill.js？

> ID：10110832
> 
> 赞同：1
> 
> 时间：2012-04-11T17:20:44.790
> 
> 标签：javascript, node.js, template-engine, rhino

我正在寻找一个模板引擎——经过严格检查，[fill.js 似乎](https://github.com/profit-strategies/fill)可以按照我想要的方式工作：服务器上的初始数据填充，然后通过浏览器中的 JSON 填充。对于 node.js，它有据可查，但我的后端是 Java。所以我想知道如何使用 Rhino 来运行 fill.js？非常感谢代码示例。

# php - CakePHP 2.0：从模型或其控制器访问未关联的模型？

> ID：10110834
> 
> 赞同：1
> 
> 时间：2012-04-11T17:20:49.830
> 
> 标签：php, controller, cakephp-2.0, cakephp-model

假设我有**Model1**，它没有通过 hasOne 或任何其他关系与**Model2关联。**如何访问 Model2 的信息？

我尝试了以下方法：

## 模型/Model1.php

```
class Model1 extends AppModel{

public function getInfo(){

  App::uses('Model2','Model');

  $mod2_info=$this->Model2->find('all');
  return $mod2_info;

 }
}//end of class 
```

## 控制器/Model1sController.php

```
class Model1sController extends AppController{

public function index(){

 set('info', $this->Model1->find('all'));

 }
}//end of class 
```

## 查看/Model1/index.ctp

```
 <?php var_dump($info);   ?> 
```

**浏览器输出：**
致命错误：调用 Model/Model1.php 中非对象上的成员函数 find()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:31:43.340

那么有一种[方法`bindModel`，](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#creating-and-destroying-associations-on-the-fly)它允许您创建临时关联。

当然，使用`bindModel`模型的数据库表中仍然必须有有效的外键。或者，您可以[`loadModel`](http://book.cakephp.org/2.0/en/controllers.html#Controller%3a%3aloadModel)在*Model1sController*中使用：

`$this->loadModel('Model2');`

*然后Model2*的 find 方法可用。`loadModel`虽然严格来说是一种控制器方法，因此您不能在模型中使用它，并且可能不是您想要的。

最后，在*Model1*中，您可以通过执行以下操作获取*Model2*实例并使用其 find 方法：

```
$Model2 = ClassRegistry::init('Model2');
$Model2->find('all'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T15:19:59.867

有两种方法可以解决这个问题，`$uses`如果 Controller 中的每个方法都需要使用模型，则可以使用数组。当控制器必须依赖这些模型时使用它。

在这个例子中，ProductionController 在它的所有方法中都使用了这三个模型，因此它们被`$uses`包含在控制器的必要部分中。

```
 var $uses = array('DailyProdn', 'ProdnMode', 'Prod'); 
```

请注意，这会增加一些开销，因此仅`$uses`当此模型是控制器的*必要部分*时才使用。否则，加载模型即席。您可以使用`$this->loadModel()`即席样式在方法内加载模型。

在这里，ProductionController 正在加载 Plant 模型。在您尝试访问植物模型之前，请将其放入方法中`find()`。当您需要在几个方法中临时使用模型时，这非常有用。

```
 $this->loadModel('Plant'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-14T12:54:32.163

在您的第一个模型之上写下：

```
App::uses('MyModel', 'Model'); 
```

但是你需要用不同的方式来称呼它：

```
$my_model = new MyModel();
$my_model->anyOtherMethod();
$my_model->read(null, '1'); 
```

[更多信息从这里](https://stackoverflow.com/questions/9584152/best-way-to-load-models-in-cakephp-2-0)

# css - 在覆盖的 div 中单击一个按钮

> ID：10110839
> 
> 赞同：2
> 
> 时间：2012-04-11T17:21:22.170
> 
> 标签：css, html, styles, css-position

我有一些正常的内容。然后我制作了另一个 div，它将覆盖所有内容，用一个按钮触发。

这个div是绝对位置，背景颜色：rgba，所以可以是透明的。

当显示 div 时，用户应该不能点击它下面的任何东西，只能点击一个按钮（刚才提到的那个）。

我无法做到这一点，如果我使用指针事件，它可以点击访问它下面的所有内容。

我只希望底部 div 中的按钮在 div 打开时可以点击。

非常感谢。！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:57:16.210

如果您只希望在叠加层处于活动状态时可以点击一个按钮，为什么不让该按钮成为叠加层上方的唯一东西呢？

然后，您可以使用 jquery 来修改给定对象的 css。如果覆盖是活动的 z-index 按钮到顶部。如果它处于非活动状态，则将按钮返回到其正常状态并隐藏覆盖。如果您真的希望按钮看起来像在覆盖层下，您甚至可以设置一种样式以使其看起来褪色（通过 CSS 不透明度或替代图像）

[http://jsfiddle.net/ckaufman/b6gza/](http://jsfiddle.net/ckaufman/b6gza/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:42:46.683

首先，您为什么要在所有内容上覆盖“透明 div”？

其次，您可以通过检查每个点击事件以了解透明 div 的可见性来解决您的问题。

```
function anyclick()
if(transparent div is visible)
   do nothing
else
   do something 
```

从技术上讲，尽管它不会触发任何事件，但仍然可以使按钮可点击。

编辑 编辑：你是否在索引你的“透明 div”？这也可能导致问题。

# c# - “使用”指令有什么好处吗？

> ID：10110841
> 
> 赞同：2
> 
> 时间：2012-04-11T17:21:29.497
> 
> 标签：c#, .net

`using`使用语句有编程上的好处吗？

请注意此示例之间的区别：

```
using Application.Data;
namespace Application.Web
{
    public class SampleClass
    {
        public void SampleMethod()
        {            
            List<Category> categories = CreateCategoriesData();
            Category expected = categories[0];
            ...
        ...
        }
    }
} 
```

和这个：

```
namespace Application.Web
{
    public class SampleClass
    {
        public void SampleMethod()
        {            
            List<Data.Category> categories = CreateCategoriesData();
            Data.Category expected = categories[0];
            ...
        ...
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T17:22:29.267

使您的代码更短且更具可读性。我不知道其他人是怎么想的，但我个人觉得在代码中完全限定类型名称是绝对可怕的。

也代替：

```
List<Data.Category> categories = CreateCategoriesData(); 
```

你可以写

```
var categories = CreateCategoriesData(); 
```

从而摆脱`using`并使您的代码更短。然后，当明天您决定重命名一个类或命名空间时，您需要担心的事情就会减少。

就发出的 IL 而言，两者是完全等价的，所以如果你在一个开发团队中工作，你应该真正使用对你来说更具可读性的东西，当然也应该尊重既定的编码标准。我已经看到两者都实际使用过，并且已经为第二个版本投入了 2 美分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T17:26:26.567

没有“程序化”的好处：一旦代码被编译，生成的库或可执行文件没有区别。这是您的组织的偏好问题，有时是编码标准。我们公司更喜欢使用`using`除了极少数情况下不可能的情况。

# vb.net - 希望使用 VB.Net 代码中的参数调用 SSRS 报告

> ID：10110843
> 
> 赞同：1
> 
> 时间：2012-04-11T17:21:32.353
> 
> 标签：vb.net, reporting-services, parameters, ssrs-2008, parameter-passing

我有一个 SSRS 报告，其中包含一个名为 @playerID 的参数

你能告诉我我需要添加什么编码，以便可以使用参数运行报告吗？

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    Dim reportParameters() As Int16 = {10}

    Me.ReportViewer1.ServerReport.SetParameters(reportParameters)
End Sub 
```

当我运行报告时，除非我注释掉第二行代码并使用 RefreshReport，否则不会显示任何数据，在这种情况下，它会提示我输入 10 的参数并且有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:00:33.107

此代码将循环遍历一组参数并将它们添加到报表查看器。您应该制定一种`getParameterName(int)`方法来获取 rv 的名称。

```
int[] parameters = new int[1];
parameters[0] = 10;

//Create Parameter Collection Array
Microsoft.Reporting.WebForms.ReportParameter[] reportParameterCollection = new       Microsoft.Reporting.WebForms.ReportParameter[parameters.Length];
//Loop through each parameter and load the name and value into the parameter collection
int i = 0;
foreach (int parameter in parameters)
{
   reportParameterCollection[i] = new Microsoft.Reporting.WebForms.ReportParameter();
   reportParameterCollection[i].Name = getParameterName(i);
   reportParameterCollection[i].Values.Add((parameters[i]);
   i++;
}

//Load Parameters into the ReportViewer
ReportViewer1.ServerReport.SetParameters(reportParameterCollection);
ReportViewer1.ServerReport.Refresh(); 
```

**我自己更像是一个 C# 人，但这是我在 5 秒后在 vb.net 上的手：**

```
Dim paramList As New Generic.List(Of ReportParameter)

paramList.Add(New ReportParameter("Report_Parameter1","")

Me.ReportViewer1.LocalReport.SetParameters(paramList)
ReportViewer1.RefreshReport() 
```

# asp.net-mvc - 为什么这种 Razor 语法会产生编译错误？

> ID：10110844
> 
> 赞同：0
> 
> 时间：2012-04-11T17:21:32.653
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我要么得到“你需要一个 ; 这里”或“最佳重载匹配有无效参数”错误。

```
 <tbody>
            <tr>
            @for (int i = 0; i < startDay; ++i)
            {
                @:<td><span></span><span></span></td>
            }
            @for (int j = startDay; j < ((numberOfDays + startDay) - 1); ++j)
            {
                <td>
                    <span>@startCount</span>
                    <br />
                    <span>
                        @{
                            var todaysEvents = Model.ToList().FindAll(d => d.CalDate.Day == j);
                            foreach(HTMLMVCCalendar.Models.CalendarModel eventsToday in todaysEvents)
                            {
                                foreach(HTMLMVCCalendar.Models.EventModel eventToday in eventsToday.CalEvents)
                                {
                                    @eventToday.DayCode.ToString // error here
                                    @:<br />
                                    @eventToday.Subject // error here
                                    @:<br />
                                    @eventToday.EventDesc //error here
                                } 
                                @:<br /> 
                            }
                        }
                    </span>
                </td>
                if ((j + 1) % 7 == 0)
                {
                    @:</tr><tr>
                }
                @++startCount;
            }
            </tr>
        </tbody> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T17:25:23.057

使用`<text>`元素而不是`@`在要显示的每条文本之前使用。兑换：

```
foreach(HTMLMVCCalendar.Models.EventModel eventToday in eventsToday.CalEvents)
{
    @eventToday.DayCode.ToString // error here
    @:<br />
    @eventToday.Subject // error here
    @:<br />
    @eventToday.EventDesc //error here
} 
```

至：

```
foreach(HTMLMVCCalendar.Models.EventModel eventToday in eventsToday.CalEvents)
{
    <text>
        @eventToday.DayCode:<br />
        @eventToday.Subject:<br />
        @eventToday.EventDesc
    </text>
} 
```

我还删除了`.ToString`（缺少括号），因为在使用`@`符号时对象被隐式转换为字符串。

另一件事，你有这个代码：

```
@{
    var todaysEvents = Model.ToList().FindAll(d => d.CalDate.Day == j);
    foreach(HTMLMVCCalendar.Models.EventModel eventToday in eventsToday.CalEvents) 
    {
        ...
    }
} 
```

这不必要地增加了你的嵌套。与我们的直觉相反，以 开头的 Razor 块`@`实际上并没有像在 C# 中那样形成一个封闭的范围。因此，您可以将其写为：

```
@{
    var todaysEvents = Model.ToList().FindAll(d => d.CalDate.Day == j);
}
@foreach(HTMLMVCCalendar.Models.EventModel eventToday in todaysEvents.CalEvents) 
{
    ...
} 
```

如您所见（如果您运行它），`todaysEvents`仍然可以访问。

# spotify - 如何创建/登录 Spotify 开发者帐户？

> ID：10110852
> 
> 赞同：0
> 
> 时间：2012-04-11T17:22:14.010
> 
> 标签：spotify

开发人员登录拒绝了我用于普通 Spotify 帐户的 Facebook 凭据。我怎样才能登录？我需要创建一个单独的开发者帐户吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T19:50:08.370

你必须登录 true 这个 url [Spotify Developer login](https://developer.spotify.com/login/)。登录后，您可以为 Spotify 应用程序开发部分启用您的 Spotify 帐户，请参阅此链接：[Spotify 应用程序](https://developer.spotify.com/technologies/apps/#developer-account)。

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T11:27:08.053

在此处设置您的设备号和密码

[http://www.spotify.com/us/help/faq/devices/connect-devices/](http://www.spotify.com/us/help/faq/devices/connect-devices/)

并使用这些凭据登录开发者网站。

# php - 仅向从数据库中删除的用户发送电子邮件的问题

> ID：10110860
> 
> 赞同：0
> 
> 时间：2012-04-11T17:22:46.020
> 
> 标签：php, mysql, html

```
 // Show the members that are in the Database
    $query = "SELECT user_id, membership_id, user_email, first_name, last_name, approved        FROM vintage_user ORDER BY user_id ";
$result = mysql_query( $query, $mysql )
or die( mysql_error() );

if (mysql_num_rows($result) > 0){
$members = "<ul class='theApprovalList'>";
while($ev = mysql_fetch_array($result)){
    $row_id = $ev['user_id'];
    $first_name = $ev["first_name"];
    $last_name = $ev["last_name"];
    $email_member = $ev["user_email"];
    $membership_id = $ev["membership_id"];
    $members .= "<li><p>Members Name: ".$first_name." ".$last_name."</p></br>    <p>Member's Email: ".$email_member."</p></br><p>Membership ID: ".$membership_id."</p></li>";
    $members .= "<li><form action=".$myPage."  method=\"post\"><input class=\"event_item_box\"  id=".$row_id." type=\"checkbox\"  name=members_cbox[] value=".$row_id."></li><p  class=\"event_item_border\"><p/>";

if (sizeof($_POST['members_cbox'])) {
foreach($_POST['members_cbox'] AS $row_id ) { 
                $email_query_member = "SELECT user_email FROM `vintage_user` WHERE user_id='" .$row_id. "'";
            $the_result_member = mysql_query( $email_query_member, $mysql )
                or die( mysql_error() );
            if (mysql_num_rows($the_result_member)){
                $email_list_member = "";
                while($ev5 = mysql_fetch_array($the_result_member)){
                    $user_emails_member = $ev5["user_email"];
                    $email_list_member .= "".$user_emails_member.",";
                }
                mysql_free_result($the_result_member);
            }
        $to2 = $email_list_member;
        $from = "";
        $subject2 ="";
        $headers = "From: {$from}" . "\r\n";
        $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
        mail($to2, $from, $subject2, $headers);
        mysql_query("DELETE FROM `vintage_user` WHERE user_id='" .$row_id. "'"); 
```

这就是我现在使用的，它根据列表中有多少用户发送大量电子邮件，但只发送给被删除的用户，这是一个非常奇怪的错误。也许我应该使用限制或实际抓住目标用户的数量？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:21:00.430

看起来您的问题（除了此代码可能使用主要重构的事实）在 while 循环中：

```
while($ev5 = mysql_fetch_array($the_result_member)){
    $user_emails_member = $ev5["user_email"];
    $email_list_member .= "".$user_emails_member.","; // Problem
} 
```

对于`email_list_member`在 foreach 循环中找到的每个用户，都将附加 。尝试只分配值而不是附加它。

- 更新 -

呃，不想进行重构，但试试这个（未经测试）：

```
if (sizeof($_POST['members_cbox'])) {

    $membersToDelete = $_POST['members_cbox'];

    // If this doesn't work
    $membersToDelete = array_map('mysql_real_escape_string', $membersToDelete);

    // Use this
    $membersToDelete = array_map('intval', $membersToDelete);

    $email_query_member = "SELECT user_email FROM `vintage_user` WHERE user_id IN (" . implode(',' $membersToDelete) . ")";

    $the_result_member = mysql_query( $email_query_member, $mysql ) or die( mysql_error() );

    while($ev5 = mysql_fetch_array($the_result_member)) {

        $user_emails_member = $ev5["user_email"];           

        $to2 = $user_emails_member;
        $from = "";
        $subject2 ="";
        $headers = "From: {$from}" . "\r\n";
        $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
        mail($to2, $from, $subject2, $headers);
    }

    mysql_query("DELETE FROM `vintage_user` WHERE user_id IN (" . implode(',' $membersToDelete) . ")";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:39:09.380

目前尚不清楚您想要什么或在做什么，但是对 `SELECT`每个元素运行查询`$_POST['members_cbox']`似乎不是一个好主意。声明也是`DELETE`如此。

算法应该是：

1.  `where user_id in(...)`使用语法获取要从数据库中删除的所有成员
2.  向他们每个人发送电子邮件
3.  使用与以前类似的语法删除所有这些

最重要的是，至少将代码模块化为 3 个方法/函数！

# javascript - 检查表单的更正条目，当输入错误时，显示 div 几秒钟

> ID：10110861
> 
> 赞同：0
> 
> 时间：2012-04-11T17:22:48.067
> 
> 标签：javascript, hide, registration

我有两个 JS 脚本。一种是检查更正的表格条目（单击“注册”按钮后）：

```
 Zikula.Users.NewUser.setup = function() {
            Zikula.Users.NewUser.formId = '{{$formData->getFormId()}}';

            Zikula.Users.NewUser.fieldId = {
                submit:         '{{$formData->getFormId()}}_submitnewuser',
                checkUser:      '{{$formData->getFormId()}}_checkuserajax',
                checkMessage:   '{{$formData->getFormId()}}_checkmessage',
                validMessage:   '{{$formData->getFormId()}}_validmessage',

                userName:       '{{$formData->getFieldId('uname')}}',
                email:          '{{$formData->getFieldId('email')}}',
            };
        } 
```

当某些条目错误时，会显示一个 div（警告消息）。我想在一段时间后隐藏这个 div，例如使用这个 JS：

```
 var timePeriodInMs = 5000;
        setTimeout(function() 
        { 
        document.getElementById("mydiv").style.display = "none"; 
        }, 
        timePeriodInMs); 
```

我知道当第一个加载（用户单击按钮）时，第二个必须以*某种方式*一起执行，但我不确定如何加入它们。有人可以帮忙吗？

更新：

注册按钮有这样的代码：

{button id=$formData->getFormId()|cat:'_submitnewuser' type='image' src='btn_register.png' set='icons/extrasmall'}

非常感谢。马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:28:19.707

您的问题中可能缺少关键信息，但假设没有，这个答案应该会有所帮助。

将第二段代码包装在一个函数中，然后从处理相应事件的代码中调用它。像这样的东西：

```
Zikula.Users.NewUser.setup = function() {
    Zikula.Users.NewUser.formId = '{{$formData->getFormId()}}';

    Zikula.Users.NewUser.fieldId = {
        submit:         '{{$formData->getFormId()}}_submitnewuser',
        checkUser:      '{{$formData->getFormId()}}_checkuserajax',
        checkMessage:   '{{$formData->getFormId()}}_checkmessage',
        validMessage:   '{{$formData->getFormId()}}_validmessage',

        userName:       '{{$formData->getFieldId('uname')}}',
        email:          '{{$formData->getFieldId('email')}}',
    };
    hideErrors();
}

function hideErrors() {
    var timePeriodInMs = 5000;
    setTimeout(function() 
    { 
    document.getElementById("mydiv").style.display = "none"; 
    }, 
    timePeriodInMs); 
} 
```

# javascript - 为什么博主在页面加载之前显示齿轮图像？

> ID：10110862
> 
> 赞同：2
> 
> 时间：2012-04-11T17:22:49.810
> 
> 标签：javascript, css, usability

即，点击此链接：http: [//googleblog.blogspot.com/2012/04/toward-simpler-more-beautiful-google.html](http://googleblog.blogspot.com/2012/04/toward-simpler-more-beautiful-google.html)

请注意，您会看到一些旋转的齿轮，然后页面加载。

这是否有一些我不太了解的可用性或性能目的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T17:28:39.770

发生这种情况是因为如果库允许接管整个屏幕，谷歌用来构建许多在线网站的谷歌[gwt](https://developers.google.com/web-toolkit/)库的一些 UI 部分工作得更好。因此，当 gwt 正在初始化时，它会显示给用户一个体面的体验。

我个人不喜欢这种设计。我认为，如果您可以在没有延迟的情况下启动 UI，那将是可取的。但显然，如果要花一些时间来加载，在屏幕上放置一个“加载”指示器总比*不*放置指示器要好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:33:54.083

它纯粹是面向用户体验的。从您在地址栏中输入任何网址到服务器返回网页之间总是存在时间差。他们没有在这个时间范围内显示任何内容，而是显示一个小 gif。

# javascript - BxSlider 停止问题

> ID：10110863
> 
> 赞同：0
> 
> 时间：2012-04-11T17:22:53.657
> 
> 标签：javascript, jquery, bxslider

我正在使用 BXSlider 进行简单的幻灯片放映，我想知道当您单击“下一个”或“上一个”按钮时是否有办法停止滑块。我已经想出了一种方法来阻止它在鼠标悬停时停止，但是当您单击下一步或单击幻灯片内部时，有没有办法做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:00:28.110

您可以将侦听器绑定到控件并使用该侦听器来停止幻灯片放映。

```
var slider = $("#slider").bxSlider();

$(".slider_control").click(function(e){
    slider.stopShow();
}); 
```

捕获所有点击（在控件和滑块本身上）的一种方法是将滑块和控件包装在外部 div 中，然后侦听冒泡的点击。

```
<div class="slider_wrap"><!-- put slider here --></div>
<script>
    var slider = $("#slider").bxSlider();

    $(".slider_wrap").click(function(e){
        slider.stopShow();
    });
</script> 
```

# jquery - 获取属性 Jquery 的值

> ID：10110869
> 
> 赞同：1
> 
> 时间：2012-04-11T17:23:15.900
> 
> 标签：jquery, jquery-ui

更新的问题：

```
$(this).attr("EmployeeId", 'A42345'); 

 $.ajax({
       type: "POST",
       url: url,
       data: "{EmployeeId: '" + id + "'}",
       contentType: "application/json; charset=utf-8",
       dataType: "json",
       success: function (response) {
      var obj = (typeof response.d) == 'string' ? eval('(' + response.d + ')') : response.d;

      var o = obj[$(this).attr("EmployeeId")]; //<<<<undefined 
```

**结束更新**

我正在尝试在 DOM 中获取 EmployeeId，如下所示：

```
var o = obj[$(this).attr("EmployeeId")]; 
```

但得到`undefined`

当我调试时，我看到以下内容：

```
$(this)[0].data

     data    "{EmployeeId: 'A42345'}" 
```

这是我的源代码：

```
$.ajax({
           type: "POST",
           url: url,
           data: "{EmployeeId: '" + id + "'}",
           contentType: "application/json; charset=utf-8",
           dataType: "json",
      success: function (response) {
                  var obj = (typeof response.d) == 'string' ? eval('(' + response.d + ')') : response.d;

                  var o = obj[$(this).attr("EmployeeId")]; //<<<<undefined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:30:51.843

`this`在您给出的示例中指的是您的功能。因此，您的选择器不匹配任何内容。

我猜你是从点击处理程序或其他类型的事件处理程序中调用 ajax 函数。

将 $(this) 分配给第一个函数中的变量，并在成功回调中引用该变量。

```
$(el).click(function() {
    var $this = $(this);
    $.ajax({
       type: "POST",
       url: url,
       data: "{EmployeeId: '" + id + "'}",
       contentType: "application/json; charset=utf-8",
       dataType: "json",
       success: function (response) {
              var obj = (typeof response.d) == 'string' ? eval('(' + response.d + ')') : response.d;

              var o = obj[$this.attr("EmployeeId")]; //<<<<undefined
// rest of code... 
```

发布更多代码会有所帮助..

您可能还试图访问您传入的数据..在这种情况下，将其解析为 json，或者首先不将其作为字符串传递.. .attr 将无法正常工作`$(this)`，因为`this`是指功能..

`$(this)[0].data`是函数的数据。它没有属性，它不是 DOM 元素。

你正在使用一些不匹配的功能，我很难弄清楚你的意图是什么。你说你试图从 DOM 中获取它，但是你正在显示函数的数据，这是两个完全不同的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:34:47.353

我认为你必须先解析`$(this)[0].data`到 json 的内容。

也许这样的事情可以工作。

```
var jsonData = jQuery.parseJson($(this)[0].data);  
var o = jsonData.EmployeeId; 
```

# javascript - 如何通知所有连接的用户？

> ID：10110870
> 
> 赞同：0
> 
> 时间：2012-04-11T17:23:22.997
> 
> 标签：javascript, meteor

我正在使用 Meteor 创建聊天，我想创建一个按钮，在所有连接的客户端上播放声音（以引起人们的注意）。有什么方法可以实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:23:05.287

这里有几个想法：

1）“事件”的集合。每次有人发出哔哔声时，都会添加一个新事件。在客户端，使用 Events.find().observe() 并连接一个“添加”回调，以便在新事件上引起哔声。不利的一面是，随着更多事件的添加，数据库将继续增长。您可以通过仅向客户端发布最近的 10 个事件来限制这一点。

2) 数据库中带有“last beeped”字段的单个文档。客户端存储他们最后一次看到的时间，如果数据库中的时间更改为更新的时间，则发出哔声。这里的优点是数据库是固定大小的。缺点是逻辑稍微复杂一些（我认为。也许这实际上更简单）

# firefox - 在特定情况下，YUI 2 富文本编辑器在 firefox 上的错误

> ID：10110871
> 
> 赞同：1
> 
> 时间：2012-04-11T17:23:34.040
> 
> 标签：firefox, yui, rich-text-editor, yui2

我无法让 YUI 2 的富文本编辑器（请参阅[http://developer.yahoo.com/yui/editor/](http://developer.yahoo.com/yui/editor/)）在 Firefox 中工作

我的项目--> 一个论坛

以下是正在发生的事情的图片：

在 IE 中没有评论：http: [//imageshack.us/photo/my-images/39/ienocomment.jpg/](http://imageshack.us/photo/my-images/39/ienocomment.jpg/)

在带有评论的 IE 中：http: [//imageshack.us/photo/my-images/13/iecomment.jpg/](http://imageshack.us/photo/my-images/13/iecomment.jpg/)

在带有评论的 Firefox 中：http: [//imageshack.us/photo/my-images/217/firefoxcomment.jpg/](http://imageshack.us/photo/my-images/217/firefoxcomment.jpg/)

**错误发生在这里：**

在没有评论的 Firefox 中：http: [//imageshack.us/photo/my-images/444/firefoxnocomment.jpg/](http://imageshack.us/photo/my-images/444/firefoxnocomment.jpg/)

出于某种原因，用户界面显示 XXXXX 并且顶部栏有错误......我不知道为什么在没有答案的情况下它会在 Firefox 中这样做......

为了解决这个问题，我尝试下载 YUI 3 Editor，但我似乎无法正确添加工具栏属性。我想要的只是一个可行的文本区域，以粗体显示内容、指定颜色等（基本内容）。如果你能给我一个能做到这一点的编辑器，我会很高兴。

如果您需要其他信息，请告诉我，谢谢。

这是代码： http: [//pastebin.com/yiEiYH2V](http://pastebin.com/yiEiYH2V)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T15:15:42.737

Firefox 的默认边距指定为：

```
$(".test_div").css("margin-top","5px"); 
```

这揭示了`xxxx`隐藏的工具栏占位符标签。由于[折叠边距，添加注释会抑制边距](http://reference.sitepoint.com/css/collapsingmargins)。

# c# - 时间：2019-05-10 标签：c#list 如何在两个值之间插入一个新值

> ID：10110872
> 
> 赞同：39
> 
> 时间：2012-04-11T17:23:37.330
> 
> 标签：c#, asp.net, list

所以我有一个列表，我需要不断地添加新值，但是当我这样做时，我需要增加它并将其插入两个值之间。

```
List<int> initializers = new List <int>();

initializers.Add(1);
initializers.Add(3); 
```

因此初始化程序将具有 1、3 个值。

然后我会处理一组新的数字。初始化程序将需要具有值。

1、5、3、7

如果我处理另一组数字，它应该变成

1、9、5、13、3、11、7、15

我知道如何正确生成插入的新值，我只需要一些帮助来将其插入到初始化器的现有值之间，而无需再添加 2 或 3 个循环来移动值的位置。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-04-11T17:26:29.660

```
List<int> initializers = new List <int>();

initializers.Add(1);
initializers.Add(3);

int index = initializers.IndexOf(3);
initializers.Insert(index, 2); 
```

给你1,2,3。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-04-11T17:25:32.060

使用[`List<T>.Insert`](http://msdn.microsoft.com/en-us/library/sey5k5z4.aspx)：

```
initializers.Insert(index, value); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-11T17:26:52.133

您可以只使用[List.Insert()](http://msdn.microsoft.com/en-us/library/sey5k5z4.aspx)而不是 List.Add() 在特定位置插入项目。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-04-23T12:13:25.683

对于那些正在寻找更复杂的东西（*在 2 个值之间插入多个项目，或者不知道如何`index`在列表中找到项目的*）的人，这里是答案：

正如其他人已经提到的那样，在 2 个值之间插入一项非常容易：

```
myList.Insert(index, newItem); 
```

由于方法，插入多个项目也很容易[`InsertRange`](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.list-1.insertrange)：

```
myList.InsertRange(index, newItems); 
```

最后使用以下代码，您可以在列表中找到项目的索引：

```
var index = myList.FindIndex(x => x.Whatever == whatever); // e.g x.Id == id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T20:58:07.407

如果有一种计算上可行的对元素进行排序的方法，另一种方法是：

```
list.Insert(num);
// ...
list.Insert(otherNum);

// Sorting function. Let's sort by absolute value
list.Sort((x, y) => return Math.Abs(x) - Math.Abs(y)); 
```

# c# - 循环画框

> ID：10110873
> 
> 赞同：0
> 
> 时间：2012-04-11T17:23:38.030
> 
> 标签：c#, for-loop, picturebox

我需要在一个周期内处理很多图片框。我怎样才能做到这一点？我试过这个：

```
 for (int i = 1; i <= 10; i++)
    {
        PictureBox[] pb = new PictureBox[i];
        pb[i].Image = global::Ippodrom.Properties.Resources.horse;
    } 
```

但它崩溃了：

```
An unhandled exception of type 'System.IndexOutOfRangeException' occurred in Ippodrom.exe

Additional information: Index was outside the bounds of the array. 
```

我该怎么办？

**UPD：**我需要更改创建的图片框中的图片，而不是创建新的图片框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:00:03.480

您需要遍历表单上现有的图片框。

此过程假定您在表单上有图片框，而不是在另一个容器（如面板）中。如果是这样，请相应地调整此代码：

```
foreach (PictureBox pb in this.Controls.OfType<PictureBox>()) {
  pb.Image = global::Ippodrom.Properties.Resources.horse;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:45:03.077

如果您创建 PictureBox 数组，则不会创建任何实例。您只声明“空间”来保存对实例的引用。

我猜你想要做的是这个（但我可能错了）

```
PictureBox[] pb = new PictureBox[10]; // creates space for 10 elements, first one is 0
for(int i = 0; i < 10; i++) { // from 0..9 
    pb[i] = new PictureBox(); // we create the actual thing
    pb[i].Image = global::Ippodrom.Properties.Resources.horse;
} 
```

在这里使用列表可能要容易得多

```
IList<PictureBox> pb = new List<PictureBox>();
for(int i = 0; i < 10; i++) { // if you want exactly 10
    var theBox = new PictureBox();
    theBox.Image = global::Ippodrom.Properties.Resources.horse;
    pb.add(theBox);
} 
```

如果你想改变它们

```
IList<PictureBox> pb = new List<PictureBox>() { pictureBox1 /* etc */ };
foreach(PictureBox p in pb) {
    p.Image = global::Ippodrom.Properties.Resources.horse;
} 
```

如果您希望控件中的每个图片框都使用 LarsTech :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T17:38:44.590

你想要的是创建一个包含 10 个 PictureBox 的数组并初始化它们中的每一个。

您所做的是创建 10 个数组，每个数组的大小为 N，其中 N 为`[1..10]`。

首先创建一个数组：

```
PictureBox[] pb = new PictureBox[10]; 
```

现在您有一个包含 10 个 PixtureBox 引用的数组。它们中的每一个都包含值“null”。

```
for (int i = 0; i < 10; i++) // C# arrays are zero-indexed, not one
{
    // Create a new PictureBox and assign it to the array
    pb[i] = new PictureBox();

    // Assign an image to this new PictureBox
    pb[i].Image = global::Ippodrom.Properties.Resources.horse;
} 
```

发生 IndexOutOfRangeException 是因为您使用了从一开始的索引而不是零，但代码一开始就有缺陷，因此不相关。

# javascript - 覆盖javascript函数局部变量

> ID：10110874
> 
> 赞同：0
> 
> 时间：2012-04-11T17:23:44.007
> 
> 标签：javascript, jquery, html, sharepoint

javascript 文件 search.js 中存在一个外部函数 GoSearch

如何覆盖 GoSearch 函数的私有/局部变量 (b)。示例**修改变量 b="?" 到 b="?cs=This Site&u=http://google.com"**

```
GoSearch(q, G, p, E, r, F, D, C, B, j, n, z, y, x, w, A, l, v) {
ULShpi: ;
try {
    AddSearchoptionsToQuery()
} catch (H) {}
var i = document.forms[0].elements[G].value;
i = i.replace(/\s*$/, "");
var u = "1";
if (q) u = document.forms[0].elements[q].Value;
if (i == "" || u == "0") {
    alert(v);
    if (null != event) {
        event.returnValue = false;
        return false
    } else return
}
var b = "?";
if (suggestedQuery) b += "sq=1&";
b += "k=" + encodeURIComponent(i);
for (var k = ["rm", "rm1", "rm2", "rm3", "rm4", "rm5", "ql", "ql1", "ql2", "ql3", "ql4", "ql5", "v", "v1", "v2", "v3", "v4", "v5", "hs", "hs1", "hs2", "hs3", "hs4", "hs5"], h = 0; h < k.length; h++) {
    var m = GetUrlKeyValue(k[h], true);
    if (m && m.length > 0) b += "&" + k[h] + "=" + m
}
if (l != null && l != "") b += "&r=" + encodeURIComponent(l);
if (null != p) {
    var t = document.forms[0].elements[p].value;
    if (E) b += canonicalizedUtf8FromUnicode(" " + t);
    else b += "&a=" + canonicalizedUtf8FromUnicode(" " + t)
}
var a = null,
    c = "",
    d = "",
    o = null != j;
if (o) {
    c = j;
    d = j
} else if (r) {
    a = document.forms[0].elements[F];
    c = a.options[a.selectedIndex].getAttribute("scope");
    d = a.options[a.selectedIndex].value
}
if (r || o) {
    var f = "",
        g = "",
        e = false;
    if (d == z) {
        f = d;
        c = "";
        g = document.forms[0].elements[D].value;
        e = true
    }
    if (d == y) {
        f = d;
        c = "";
        g = document.forms[0].elements[C].value;
        e = true
    }
    if (d == x) {
        f = c;
        c = "";
        g = document.forms[0].elements[B].value;
        e = true
    }
    if (c == w) {
        c = a.options[a.selectedIndex].value;
        e = true
    }
    if (e) n = A;
    if (c != "") {
        b += "&s=" + encodeURIComponent(c);
        if (a.options[a.selectedIndex].value != "" && !e) n = a.options[a.selectedIndex].value
    }
    if (f != "") b += "&cs=" + encodeURIComponent(f);
    if (g != "") b += "&u=" + encodeURIComponent(g)
}
var I = document.forms[0];
try {
    external.AutoCompleteSaveForm(I)
} catch (s) {}
window.location = n + b;
try {
    if (null != event) event.returnValue = false
} catch (s) {}
return 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:28:06.117

`GoSearch`您可以在带有搜索框的页面上用您自己的功能替换该功能 - 通过[*委托控件*](http://msdn.microsoft.com/en-us/library/ms470880.aspx)。

创建一个用户控件 (ASCX)，将 JavaScript 代码放在具有修改`GoSearch`功能的页面上。创建一个 SP 解决方案，该解决方案具有将控件放置到`AdditionalPageHead`您激活该功能的网站或网站集上的每个页眉的功能。

查看如何`search.js`在您的页面上加载。如果不是直接在页头中完成而是延迟，则必须在加载`GoSearch`后动态执行替换：`search.js`

```
function ReplaceGoSearch {
    GoSearch = function(...) {
        ...
    };
}
ExecuteOrDelayUntilScriptLoaded(ReplaceGoSearch, "search.js"); 
```

--- 费尔达

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:28:34.293

最快的方法是不要直接链接到外部文件。下载您的文件版本，更改您需要的内容，然后将其提供给您的页面。

您甚至可以将文件即时下载到您的服务器，对其进行修改，然后将其推送到请求页面。

# internet-explorer - 检查打开的 IE 窗口的忙碌状态

> ID：10110876
> 
> 赞同：1
> 
> 时间：2012-04-11T17:24:04.647
> 
> 标签：internet-explorer, vbscript

我对 Vbscript 很陌生，但它是我目前工作中唯一可用的工具之一。我们有一个基于网络的系统，我正在尝试与之交互。网页经常重新加载。例如选择一个下拉框，页面将在重新加载页面时暂停片刻。我的脚本目前在每个命令之间暂停几秒钟，但有时等待的时间不够长。我想知道是否可以从现有窗口创建一个 IE 对象并检查其繁忙状态。所以当它完成处理后，我可以继续下一个命令。

我已经尝试过： Set IE = GetObject(, "internetexplorer.application") 但是它给了我一个错误：ActiveX 组件无法创建对象'GetObject'

我花了很多时间搜索谷歌和其他一些地方，看看是否有一个简单的替代方案，但没有找到。这将是一个 HTA 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:25:45.733

`GetObject`您可以使用此链接上的代码[重用 Internet Explorer COM 自动化对象](https://stackoverflow.com/q/941767/641067)，而不是尝试使用来锁定现有实例

但是相反，我认为您应该采用如下方法来检查`ReadyState`自动 ie 对象是否已准备就绪

```
Dim ieObject
Set ieObject = CreateObject("internetexplorer.application")
ieObject.Navigate "www.google.com"
Do While ieObject.readystate <> 4
WScript.Sleep 100
Loop 
```

# powershell - Powershell 脚本默认值未显示在 Get-Help -full

> ID：10110879
> 
> 赞同：5
> 
> 时间：2012-04-11T17:24:15.697
> 
> 标签：powershell, parameters

我正在尝试设置我的 PowerShell 命令，因此`Get-Help -full`它将显示有关如何运行我的脚本的完整信息。我有要在此帮助中显示的默认值。我有以下内容：

```
<#
    .PARAMETER SenderEmail
    The name of the user who is sending the email message. Although not
    officially required, it will be checked to make sure it's not blank.
#>

Param (

   [String]
   [Parameter(
        Position=1,
        HelpMessage="Sender's Email Address")]
   $SenderEmail = "bob@fubar.com"
) 
```

然而，当我输入 Get-Help -detail 时，会显示以下内容。

```
-SenderEmail <String>
    The name of the user who is sending the email message. Although not
    officially required, it will be checked to make sure it's not blank.

    Required?                    false
    Position?                    2
    Default value
    Accept pipeline input?       false
    Accept wildcard characters? 
```

如何获得显示此参数默认值的帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T17:36:46.493

我认为您无法在 V2 的高级功能中显示默认值。我什至没有运气尝试过 [System.ComponentModel.DefaultValueAttribute("")]。但是，如果有什么安慰的话，这似乎在 V3 中按原样工作。

```
V3 ONLY!!
PS> Get-Help .\help.ps1 -full

NAME
    C:\temp\help.ps1

SYNOPSIS

SYNTAX
    C:\temp\help.ps1 [[-SenderEmail] <String>] [<CommonParameters>]

DESCRIPTION

PARAMETERS
    -SenderEmail <String>
        The name of the user who is sending the email message. Although not
        officially required, it will be checked to make sure it's not blank.

        Required?                    false
        Position?                    2
        Default value                bob@fubar.com
        Accept pipeline input?       false
        Accept wildcard characters?  false

    <CommonParameters>
        This cmdlet supports the common parameters: Verbose, Debug,
        ErrorAction, ErrorVariable, WarningAction, WarningVariable,
        OutBuffer and OutVariable. For more information, see 
        about_CommonParameters (http://go.microsoft.com/fwlink/?LinkID=113216). 

INPUTS

OUTPUTS

RELATED LINKS 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T17:40:02.223

似乎没有办法指定参数的默认值。您需要在参数的描述中指定它。

```
<#
.PARAMETER SenderEmail
The name of the user who is sending the email message. If not 
specified, a default value of bob@fubar.com will be used
#> 
```

这篇文章在故障排除部分[http://technet.microsoft.com/en-us/library/dd819489.aspx](http://technet.microsoft.com/en-us/library/dd819489.aspx)中有信息。

```
Default values and a value for "Accept Wildcard characters" do not appear in
the parameter attribute table even when they are defined in the function or
script. To help users, provide this information in the parameter description. 
```

正如@KeithHill 所指出的，似乎将在下一个修订版中修复

# iphone - UITableView 上的 GCD 实现

> ID：10110884
> 
> 赞同：1
> 
> 时间：2012-04-11T17:24:20.653
> 
> 标签：iphone, ios, multithreading, concurrency, grand-central-dispatch

创建单元格时，我正在做一些繁重的计算。我试图找出保持 UITableView 流畅的最佳方法，但在同一类型的背景下进行计算（保持 UI 线程没有太多处理）。

仅出于测试目的，我将其用作我的繁重计算方法：

```
+(NSString*)bigCalculation
{
    int finalValue=0;
    int j=0;
    int i=0;

    for (i=0; i<1000; i++) {
        for (j=0; j<10000000; j++) {
            j++;
        }
        finalValue+=j/100*i;
    }

    return [NSString stringWithFormat:@"%d",finalValue];
} 
```

在 cellForRowAtIndexPath 中，我只执行以下操作：

```
- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *identifier=@"identifier";

    UITableViewCell *cell=nil;
    cell=[aTableView dequeueReusableCellWithIdentifier:identifier];
    if(!cell)
    {
        cell=[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:identifier];
    }

    NSString *text=[dataSource objectForKey:[[dataSource allKeys] objectAtIndex:indexPath.row]];

    dispatch_queue_t a_queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0);
;
    dispatch_async(a_queue, ^{

        NSString *subtitle=[CalculationEngine bigCalculation];
        dispatch_async(dispatch_get_main_queue(), ^{
            [[cell detailTextLabel] setText:subtitle];
            dispatch_release(a_queue); 
        });
    });

    [[cell textLabel] setText:text];
    return cell;
} 
```

目前我有 UITableView 流体，而在后台一切正常。所以我的问题是：

**1）**这是实现我想要的最佳方式吗，KVO 也可以是答案吗？

**2）**在这样做之前：

```
dispatch_queue_t a_queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0); 
```

我在做：

```
dispatch_queue_create("com.mydomain.app.newimagesinbackground", DISPATCH_QUEUE_SERIAL) 
```

而且表现很差。你能解释一下为什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T13:18:37.450

## 首先

您的实施存在根本缺陷。您将对单元格的引用放入在后台执行的块中。当您滚动并从屏幕上取下单元格时，它们将被放入重用池中。当新的细胞出现在屏幕上时，它们就会从这个池中被拉出来。当您的块完成时，单元格可能不再位于同一行中。为了说明这一点，我将这个语句放在工作块的开头：

```
NSLog(@"my Row is: %d myCell is: %x", indexPath.row, (unsigned int)cell); 
```

这导致：

> 我的行是：0 myCell 是：16fd20
> 我的行是：13 myCell 是：16fd20
> 我的行是：24 myCell 是：16fd20
> 我的行是：35 myCell 是：16fd20
> 我的行是：44 myCell 是：16fd20
> 我的行是：56 myCell 是：16fd20
> 我的行是：66 myCell 是：16fd20

所以在这里你可以看到 7 个块，它们都在计算不同的行，但都指向同一个单元格。
如果用户在块完成时滚动，则会更新错误的单元格。

您还希望`dispatch_sync(dispatch_get_main_queue(),0)`在更新单元格时使用以确保立即对其进行处理。

KVO 是解决此问题的一种方法，导致..

* * *

## 你的第一个问题：

KVO 将是一个很好的方法来做到这一点。正如 Rob Napier 提到的，您应该为列表中的每个项目都有一个单独的模型对象。为了管理 tableView 中单元格的更新，您希望继承 UITableViewCell。然后单元格订阅模型对象以获取通知，并且可以在收到通知时自行更新。如果单元格模型对象发生更改，您只需退出旧模型对象的通知并订阅新模型对象。

这应该保证您永远不会像当前代码那样在单元格中显示不准确的信息。

需要注意的一点：KVO 在设置新值的同一线程上发送通知。这意味着您需要确保在主线程上设置新值或在`observeValueForKeyPath:`方法中的主线程上分派一个块。

* * *

## 你的第二个问题：

以这种方式排队的原因：

```
dispatch_queue_create("com.mydomain.app.newimagesinbackground", DISPATCH_QUEUE_SERIAL); 
```

太慢了，以至于您为每个计划的块生成一个串行队列。这些队列将同时执行。由于您只有少量内核，队列有越来越小的时间片来执行自己。主队列（运行 UI）只是另一个队列，它必须执行的时间也越来越少，并且更小。

在我的测试中，我发现每个队列都有一个线程。与单元格一样多的线程。

使用全局并发队列：

```
dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0); 
```

允许系统管理一次执行的块数。这样做的最终结果是，你有一个队列，而不是数百个队列和数百个线程，而在我的 iPhone 4s 上，有两个线程。每个核心一个线程。这使得调度更简单，并为线程分配更准确的优先级。最终结果是主线程有足够的时间执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T17:42:29.553

这不是一个好方法。您通过将计算工作推入视图控制器来破坏 MVC。您应该将数据保存在模型对象中并在那里管理计算。然后，表格视图应该只显示模型中的当前值，`reloadRowsAtIndexPaths:withRowAnimation:`在数据更改时使用。KVO 是确定数据何时更改的一种合理方法。

如果你想在计算中偷懒，那么你可以调用模型`recalculateIfNeeded`，让模型知道有人（在这种情况下是表视图）想要一个新的值。但是，如果输入数据实际上没有更改，则不应重新计算。模型是跟踪数据是否发生变化的地方。

# ios - “缺少屏幕截图” 将应用程序上传到应用商店后？

> ID：10110886
> 
> 赞同：1
> 
> 时间：2012-04-11T17:24:26.007
> 
> 标签：ios, iphone, app-store, itunes

我已经尝试将我的游戏上传到应用商店几个小时了，老实说，这个过程让我发疯，我认为 Apple 在解释如何做到这一点方面做得并不好，

无论如何，在实际上传我的游戏后，我那里有一个红色图标，它说“缺少截图”

在google之类的搜索之后，我意识到这可能与我一直在为其构建游戏的设备系列有关，所以我将其更改为仅限 iPhone，

但是现在当我尝试重新上传我的游戏时，我不能。应用程序管理器不允许我上传任何内容，我什至无法从列表中删除该应用程序并重新启动该过程，

我很高兴听到我能做些什么来解决它并让这个烦人的过程消失在我身后。太感谢了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T18:11:34.697

1.  登录 iTunes Connect 并转到“管理您的应用程序”
2.  选择您的应用，然后选择当前版本
3.  在“链接”标题下，选择“二进制详细信息”
4.  在页面的右上角，您将看到“拒绝此二进制文件”，单击并确认
5.  返回您的应用页面，然后再次按“准备上传二进制文件”。并像第一次上传时一样继续。

如果您没有看到“准备上传二进制文件”，您只需等待拒绝通过（完成后您应该会收到一封电子邮件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:31:43.270

无论是针对特定国家或全球的应用程序，还是针对 iPhone、iPad 或 Universal 的应用程序，如果您已将 info.plist 文件中的“本地化原生开发”键设置为 true，您将拥有上传特定于每个区域的屏幕截图。

# iphone - 将 html 文件加载到 Web 视图

> ID：10110887
> 
> 赞同：0
> 
> 时间：2012-04-11T17:24:35.820
> 
> 标签：iphone, objective-c

我有一个包含很多项目的表格视图，当我单击表格中的一个单元格时，它会加载一个带有 web 视图插座的视图，在 viewdidload 的 web 视图中，我有这行代码来加载 html 文件，它位于项目文件

```
NSString *name = pagename.text;
[WebView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:name ofType:@"html"]isDirectory:NO]]]; 
```

从所选单元格推送到该 Web 视图的代码称为 Test 是

```
if (indexPath.row == 0) 
{

    Test *test = [[Test alloc] initWithNibName:nil bundle:nil];
    test.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentModalViewController:test animated:YES];

    NSString *name1 = @"ba";
    [[test pagename] setText:[NSString stringWithString:(NSString *)name1]];

}

else if (indexPath.row == 1) 
{

    Test *test = [[Test alloc] initWithNibName:nil bundle:nil];
    test.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentModalViewController:test animated:YES];

    NSString *name1 = @"bb";
    [[test pagename] setText:[NSString stringWithString:(NSString *)name1]];

}

else if (indexPath.row == 2) 
{

    Test *test = [[Test alloc] initWithNibName:nil bundle:nil];
    test.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentModalViewController:test animated:YES];

    NSString *name1 = @"bc";
    [[test pagename] setText:[NSString stringWithString:(NSString *)name1]];

} 
```

html 文件称为 ba、bb、bc 和 bd .html

问题是当我选择表格中四个单元格中的任何一个单元格时，它会显示相同的 html 文件“ba.html”

我尝试了一切，清理项目，删除文件并将它们复制回来，更改模拟器，重新启动单圈，甚至更改文件名。

有什么帮助吗？

提前致谢

更新 ：

这是洞码

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [array count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"CustomCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    [[cell textLabel] setTextAlignment:UITextAlignmentRight];

    cell.textLabel.text = [array objectAtIndex:indexPath.row];
    cell.textLabel.font = [UIFont systemFontOfSize:18];
    cell.textLabel.numberOfLines = 3;

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    if (indexPath.row == 0) 
    {

        Test *test = [[Test alloc] initWithNibName:nil bundle:nil];
        test.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        [self presentModalViewController:test animated:YES];

        NSString *name1 = @"ba";
        [[test pagename] setText:name1];

    }

    else if (indexPath.row == 1) 
    {

        Test *test = [[Test alloc] initWithNibName:nil bundle:nil];
        test.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        [self presentModalViewController:test animated:YES];

        NSString *name1 = @"bb";
        [[test pagename] setText:name1];        
    }

    else if (indexPath.row == 2) 
    {

        Test *test = [[Test alloc] initWithNibName:nil bundle:nil];
        test.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        [self presentModalViewController:test animated:YES];

        NSString *name1 = @"bc";
        [[test pagename] setText:name1];
    }

    else if (indexPath.row == 3) 
    {

        Test *test = [[Test alloc] initWithNibName:nil bundle:nil];
        test.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        [self presentModalViewController:test animated:YES];

        NSString *name1 = @"bd";
        [[test pagename] setText:name1];

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:34:44.363

您在设置页面之前呈现控制器。

在您的 webview 类中将 'name' 设为 NSString 实例变量。使其成为一个属性（非原子，保留）并合成它。

设置名称，而不是设置视图控制器的标签。然后在 viewDidLoad 中，从名称中设置标签。

根据名称设置标签，而不是相反。

在单元格中被选中：

```
Test *test = [[Test alloc] initWithNibName:nil bundle:nil];
test.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
NSString *name1 = @"bc";
[test setName:[NSString stringWithString:(NSString *)name1]];
[self presentModalViewController:test animated:YES]; 
```

在 Web 视图中 viewdidload

```
-(void)viewDidLoad {
    pagename.text = self.name;
    [WebView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:name ofType:@"html"]isDirectory:NO]]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:38:36.150

能不能放个断点或者日志看看indexPath.row是不是一直为0？

如果是这种情况，那么您的表可能是以每个元素都在其自己的部分中的方式创建的。然后，您将不得不使用 indexPath.section，因为每个对象都是其自己部分的第 0 行。

另外，我不知道“pagename”是哪种类型的对象，但是设置器通常会保留参数，因此您不必在其中创建 name1 的副本

```
[[test pagename] setText:[NSString stringWithString:(NSString *)name1]]; 
```

注意：这实际上取决于如何在类中声明属性，但通常会保留这些类型的属性。

# monodevelop - MonoDevelop：更改符号使用突出显示颜色

> ID：10110891
> 
> 赞同：1
> 
> 时间：2012-04-11T17:25:06.320
> 
> 标签：monodevelop, highlighting

符号使用突出显示在 2.4 版本中添加到 MonoDevelop 中，描述如下：

> 将光标放在符号上时，MonoDevelop 现在将在编辑器中自动突出显示该符号的所有用法。按键 control+shift+up/down 可以让用户在符号实例之间跳转。

我似乎找不到如何更改与此新功能相关的颜色（我假设 Options\Syntax Highlighting 会像对其他所有内容一样保留颜色，但我没有看到与 SUH 相关联的条目）。

我无法下载更新版本的 MonoDevelop，因为我在 Unity 中使用它，这样做会导致调试器出现问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T05:54:34.270

1.  首选项 > 语法高亮
2.  创建一个新方案。编辑它
3.  修改“括号标记”的前景色

括号突出显示颜色与变量相同并不好，但它有效。

我正在使用版本 2.8.2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T17:51:53.243

符号使用突出显示似乎使用括号标记的前景色。这是条目中的颜色参数：

```
<Style name="marker.bracket" color="#CB4915" bgColor="#67322C" /> 
```

至少在使用 MonoDevelop 3.0.1 时是这样。

# zend-framework - PHPUnit 3.6.10 + ZendFramework 1.11.11 + NetBeans 7.1

> ID：10110894
> 
> 赞同：2
> 
> 时间：2012-04-11T17:25:16.527
> 
> 标签：zend-framework, phpunit, wamp

当我通过 Zend_Tool 命令创建一个控制器时：

`create controller NameController`

... netbeans 成功创建了一个新控制器。但是，它会在输出窗口中发送一条消息：

`PHPUnit is required in order to generate controller test stubs.`

如何让 Netbeans 使用 phpunit 测试自动创建一个类？我搜索了网络和数千个解决方案到目前为止无法解决......

重要笔记：

*   已经安装了pear
*   已经安装了 phpunit
*   已在 include_path 中包含“phpunit”
*   已创建文件并在 include_path 中也包含 zf.ini
*   选项已经配置了netbeans，我通知目录phpunit.bat。

它是 NetBeans 中的错误吗？

看：

![http://img545.imageshack.us/img545/262/001hxw.jpg](../Images/884dbd757825124c147930683698a46b.png)

![http://img855.imageshack.us/img855/8918/002jfy.jpg](../Images/59d106cfb4d5cdf86966040830355f30.png)

[![http://img196.imageshack.us/img196/378/003sfu.jpg](../Images/94dbeeb55c6b3dc5ea3aa7619079a106.png)](https://i.stack.imgur.com/Ot7aX.jpg)

[![http://img834.imageshack.us/img834/1858/004qc.jpg](../Images/9e43ddc69296de2b6fdb405a8c3524bf.png)](https://i.stack.imgur.com/A5kkg.jpg)

[![http://img444.imageshack.us/img444/1020/005jx.jpg](../Images/fadba97cd13155709db49e13814acf08.png)](https://i.stack.imgur.com/fxrbm.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:30:12.073

我不认为这是一个*Neatbeans*问题，而是一个`Zend_Tool`(zf.bat) 问题。
您可能正在使用`Zend_Tool`在正确安装 phpunit 之前构建的项目。
在这种情况下，该部分或您的*.zfproject.xml*没有使用 phpunit 所需的信息。
*Netbeans*实际上并没有做任何事情，`Zend_Tool`除了提供图形界面。
我希望我能快速解决这个问题，但我没有。我过去通过以下方式解决了这个问题：

1.  确保 phpunit 正确设置并在[Netbeans中工作](http://netbeans.org/kb/docs/php/phpunit.html)

现在您有 2 个选择：

1.  重新制作您的项目目录，`Zend_Tool`并让*.zfproject.xml*文件使用工作的 phpunit 生成。（这适用于新项目）

2.  使用 新建一个项目，使用编辑器`Zend_Tool`查看*.zfproject.xml*并更改项目的*.zfproject.xml*以包含 phpunit 信息。这种方法可能需要一些试验和错误才能正确。

在这里要完整的是我的*.zfproject.xml*文件之一的摘录：

```
<testsDirectory>
      <testPHPUnitConfigFile filesystemName="phpunit.xml"/>
      <testPHPUnitBootstrapFile filesystemName="bootstrap.php"/>
      <testApplicationDirectory>
        <testApplicationControllerDirectory>
          <testApplicationControllerFile forControllerName="Index"/>
        </testApplicationControllerDirectory>
      </testApplicationDirectory>
      <testLibraryDirectory/>
    </testsDirectory> 
```

我还没有找到一种方法来重新生成*.zfproject.xml*文件以反映对环境的更改。

我希望其他人有更简单的解决方法...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T13:31:42.310

**我找到了解决方案。**

在*c:/user/you profile user/.zf.ini*中，配置文件是这样的：

`php.include_path = ".C:/wamp/bin/php/php5.3.8/pear/PHPUnit;C:/Program Files/NetBeans 7.1/php/zend;C:/wamp/apps/ZendFramework/library" basicloader.classes.0 = "NetBeansCommandsProvider"`

我取了 php.include_path，留下的文件如下：

`basicloader.classes.0 = "NetBeansCommandsProvider"`

好吧..这太疯狂了，不明白，因为它对我很有效。

*注意：*请注意，设置应该已经在 C:\wamp\bin\php\php5.3.8 和 C:\wamp\bin\apache\Apache2.2.21\bin 的 php.ini 中设置 include_path

谢谢大家！

# c++ - 内存泄漏返回 QIcon

> ID：10110896
> 
> 赞同：0
> 
> 时间：2012-04-11T17:25:22.747
> 
> 标签：c++, qt, memory-leaks, qt4

我开始使用 Qt，但遇到了一个大问题：我实现了从 QAbstractListModel 类继承的自定义模型。我想要做的是显示一个带有图标的列表。一切正常，图像与我的代码一起显示，但它会造成内存泄漏。如果我不返回图标，则不会检测到内存泄漏。

```
class MyModel : public QAbstractListModel
{
public:
    ...

private:
    QIcon myicon;
}

QVariant MyModel::data(const QModelIndex &index, int role) const
{
    ...

    if (role == Qt::DecorationRole)
    {
        return this->myicon;
    }

    ...
} 
```

**编辑 1**

```
#define _CRTDBG_MAP_ALLOC
#include <stdlib.h>
#include <crtdbg.h>

_CrtSetDbgFlag(_CRTDBG_ALLOC_MEM_DF | _CRTDBG_LEAK_CHECK_DF);

MyModel::MyModel(...)
{
    ...

    ui.listWidget->addItem(new QListWidgetItem(QIcon("myicon"), "my text"));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:39:37.990

我没有看到`QVariant`with`QIcon`作为参数的构造函数，我很惊讶它可以编译。当您在预期 a 时返回 a `QIcon`时`QVariant`，必须进行一些疯狂的隐式转换。您必须知道，在某些情况下，当您创建 a 时，`QVariant`会有初始对象的深层副本。`QVariant::clear()`当您不再需要它们时，跟踪您创建和使用的 qvariants 。

**编辑：**
顺便说一句，您隐式使用运算符

```
QIcon::operator QVariant () const 
```

它返回一个`QVariant`. 这个变体不包含初始的`QIcon`，而是一个深拷贝。因此，请按照我之前的建议摆脱泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:54:22.203

我不认为代码中存在内存泄漏，你展示了。

`QIcon`已转换为`QVarint`（用 定义`operator QVariant`），它被标准项目模型/项目小部件广泛使用。

您也不管理任何指针，也不使用一些显式转换。

所以，这段代码看起来不错，但它可以是代码中的记忆，*使用*图标。

# mysql - Mysql存储过程不存在吗？

> ID：10110899
> 
> 赞同：0
> 
> 时间：2012-04-11T17:25:30.577
> 
> 标签：mysql, sql, stored-procedures

我有这个存储过程。当我在 Wamp 上的 PhpMyAdmin 中执行它时，它说它执行了一切。当我尝试在查询中使用它时，它说该功能不存在。我究竟做错了什么？

```
DELIMITER //

CREATE PROCEDURE `sql_level`(IN exp INT)
BEGIN
    SELECT id
    FROM `levels`
    WHERE experience <= exp DESC LIMIT 1;
      id = id-1;
END //

DELIMITER ; 
```

这是我要运行的查询。

```
$id = 1;
if($stmt->prepare("SELECT sql_level(attack) FROM `users` WHERE id = ?")) { 
$stmt->bind_param('i',$id); 
$stmt->execute(); 
$stmt->bind_result($attack); 
$stmt->fetch(); echo "<h1 align='center'>".$attack."</h1>";  } 
else { die($stmt->error); } 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:17:44.433

您希望将例程创建为[函数](http://dev.mysql.com/doc/refman/5.1/en/create-function.html)而不是存储过程。

```
DELIMITER //

CREATE FUNCTION `sql_level`(exp INT)
RETURNS INT
BEGIN
    DECLARE ReturnId INT;

    SELECT id-1 INTO ReturnId
    FROM `levels`
    WHERE experience <= exp DESC LIMIT 1;

    RETURN ReturnId;
END //

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T04:18:55.360

```
DELIMITER |
CREATE FUNCTION `sql_level`(exp INT)
RETURNS INT
DETERMINISTIC
BEGIN
DECLARE ReturnId INT;

SELECT id-1 INTO ReturnId
FROM `levels`
WHERE experience <= exp;

RETURN ReturnId;
END; 
```

这就是我最终用来使它工作的东西。谢谢！希望这对某人有帮助！

# c# - C# HttpRequest - 访问 url 中的主题标签

> ID：10110901
> 
> 赞同：5
> 
> 时间：2012-04-11T17:25:41.587
> 
> 标签：c#, asp.net-mvc-3, httprequest, code-behind, hashtag

不幸的是，由于“hashtag”和“httprequest”这个词的广泛使用，我找不到任何搜索结果来回答我是否有可能这样的事情。

如果我有这样的网址：

> /订单/产品#12345

HttpRequest 类向我展示了 FilePath、RawUrl 和所有其他将 url 显示为的成员

> /订单/产品

它只是摆脱了标签，我找不到查看它的地方。

有什么方法可以让我从代码隐藏中查看 URL 末尾的主题标签吗？我知道我可以轻松地将其设为 QueryString 参数，但我喜欢这样看起来更好的方式，所以如果有办法做到这一点，我想知道它是什么:)

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T17:30:48.757

> 它只是摆脱了标签，我找不到查看它的地方。

那是因为它没有被发送到服务器。它不是请求的一部分 - 它*仅*与客户端相关。如果你需要用它做任何聪明的事情，你需要编写一些 Javascript 来访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:33:37.530

正如其他人所说，这个值不会发送到服务器。虽然可以使用 JavaScript 将值发送到服务器，但在这种情况下，您应该将其设为查询字符串参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T20:42:36.377

如果您在视图中使用它：

```
<a href="@Url.Action("JavascriptPlugins", "Docs")#typeahead">Typeahead</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T17:30:55.930

如果导航到同一页面上的书签（#12345 是什么），浏览器不需要执行 GET 请求。因此，您可以重新考虑将其用于正常请求。

# html - Facebook 分享链接内容

> ID：10110903
> 
> 赞同：0
> 
> 时间：2012-04-11T17:25:51.170
> 
> 标签：html, facebook

我的网站上有一个分享按钮，我知道链接是 www.facebook.com/share.php?u=myurl。一切正常，但是当你点击它时它说什么，现在它显示我的网站，然后“即将推出 - 未来之家非常酷的东西”......我确实尝试添加 &t=mytitle 但没有任何改变。贝娄是截图。谢谢你。![截屏](../Images/15da4c34b30a595fc8fdfae03d5e9c68.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:35:46.507

我将首先通知您 facebook “sharer”已被弃用并且不再受支持，因为它[在此处](http://developers.facebook.com/docs/share/)声明：

> Share 按钮已被弃用，取而代之的是 Like 按钮，并且将不再受支持。请尽可能使用“赞”按钮为您的应用带来最大流量。

[在](http://developers.facebook.com/docs/reference/plugins/like/)这里：

> **旧的“分享”按钮怎么了？**
> 
> 当我们启动“赞”按钮时，我们弃用了“分享”按钮，因为“赞”按钮允许用户一键连接，并允许他们查看他们的哪些朋友已经连接，从而提高了点击率。

您应该改用“[赞”](http://developers.facebook.com/docs/reference/plugins/like/)或“[发送](http://developers.facebook.com/docs/reference/plugins/send/)”按钮。

至于提要中呈现的内容，您可以通过向希望用户共享的页面添加[开放图形标签来控制它，当 facebook 抓取您的页面时，它会提取这些标签并创建提要故事。](http://developers.facebook.com/docs/opengraph/)

为了调试并查看 facebook 如何“看到”您的页面，您可以使用[Facebook 调试器](http://developers.facebook.com/tools/debug)，它还将清除 facebook 已经为您的页面拥有的缓存。

# c++ - C++ 中带有 SDL 的简单声波发生器

> ID：10110905
> 
> 赞同：11
> 
> 时间：2012-04-11T17:26:05.003
> 
> 标签：c++, audio, sdl

我现在无法理解 sdl 库的音频部分是如何工作的，我知道当你初始化它时，你必须指定频率和一个 >>callback<< 函数，我认为它会以给定的频率自动调用. 使用 sdl 库的任何人都可以编写一个简单的示例，使用 sdl_audio 以 44000 hz 的采样频率生成 440 hz 方波（因为它是最简单的波形）？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-11T18:11:42.640

SDL[简介](https://wiki.libsdl.org/Introduction)（*2011 年缓存版本：[2](http://web.archive.org/web/20110514062325/http://www.libsdl.org/intro.php)*）有一个使用 SDL 声音库的简洁示例，可以帮助您入门：[http ://www.libsdl.org/intro.en/usingsound.html](http://www.libsdl.org/intro.en/usingsound.html)

编辑：这是一个可以满足您要求的工作程序。我修改了这里找到的代码：[http ://www.dgames.org/beep-sound-with-sdl/](https://web.archive.org/web/20120313055436/http://www.dgames.org/beep-sound-with-sdl/)

```
#include <SDL/SDL.h>
#include <SDL/SDL_audio.h>
#include <queue>
#include <cmath>

const int AMPLITUDE = 28000;
const int FREQUENCY = 44100;

struct BeepObject
{
    double freq;
    int samplesLeft;
};

class Beeper
{
private:
    double v;
    std::queue<BeepObject> beeps;
public:
    Beeper();
    ~Beeper();
    void beep(double freq, int duration);
    void generateSamples(Sint16 *stream, int length);
    void wait();
};

void audio_callback(void*, Uint8*, int);

Beeper::Beeper()
{
    SDL_AudioSpec desiredSpec;

    desiredSpec.freq = FREQUENCY;
    desiredSpec.format = AUDIO_S16SYS;
    desiredSpec.channels = 1;
    desiredSpec.samples = 2048;
    desiredSpec.callback = audio_callback;
    desiredSpec.userdata = this;

    SDL_AudioSpec obtainedSpec;

    // you might want to look for errors here
    SDL_OpenAudio(&desiredSpec, &obtainedSpec);

    // start play audio
    SDL_PauseAudio(0);
}

Beeper::~Beeper()
{
    SDL_CloseAudio();
}

void Beeper::generateSamples(Sint16 *stream, int length)
{
    int i = 0;
    while (i < length) {

        if (beeps.empty()) {
            while (i < length) {
                stream[i] = 0;
                i++;
            }
            return;
        }
        BeepObject& bo = beeps.front();

        int samplesToDo = std::min(i + bo.samplesLeft, length);
        bo.samplesLeft -= samplesToDo - i;

        while (i < samplesToDo) {
            stream[i] = AMPLITUDE * std::sin(v * 2 * M_PI / FREQUENCY);
            i++;
            v += bo.freq;
        }

        if (bo.samplesLeft == 0) {
            beeps.pop();
        }
    }
}

void Beeper::beep(double freq, int duration)
{
    BeepObject bo;
    bo.freq = freq;
    bo.samplesLeft = duration * FREQUENCY / 1000;

    SDL_LockAudio();
    beeps.push(bo);
    SDL_UnlockAudio();
}

void Beeper::wait()
{
    int size;
    do {
        SDL_Delay(20);
        SDL_LockAudio();
        size = beeps.size();
        SDL_UnlockAudio();
    } while (size > 0);

}

void audio_callback(void *_beeper, Uint8 *_stream, int _length)
{
    Sint16 *stream = (Sint16*) _stream;
    int length = _length / 2;
    Beeper* beeper = (Beeper*) _beeper;

    beeper->generateSamples(stream, length);
}

int main(int argc, char* argv[])
{
    SDL_Init(SDL_INIT_AUDIO);

    int duration = 1000;
    double Hz = 440;

    Beeper b;
    b.beep(Hz, duration);
    b.wait();

    return 0;
} 
```

祝你好运。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-07-10T01:27:45.633

蜂鸣器示例的简化变体，减少到最低限度（带有错误处理）。

```
#include <math.h>
#include <SDL.h>
#include <SDL_audio.h>

const int AMPLITUDE = 28000;
const int SAMPLE_RATE = 44100;

void audio_callback(void *user_data, Uint8 *raw_buffer, int bytes)
{
    Sint16 *buffer = (Sint16*)raw_buffer;
    int length = bytes / 2; // 2 bytes per sample for AUDIO_S16SYS
    int &sample_nr(*(int*)user_data);

    for(int i = 0; i < length; i++, sample_nr++)
    {
        double time = (double)sample_nr / (double)SAMPLE_RATE;
        buffer[i] = (Sint16)(AMPLITUDE * sin(2.0f * M_PI * 441.0f * time)); // render 441 HZ sine wave
    }
}

int main(int argc, char *argv[])
{
    if(SDL_Init(SDL_INIT_AUDIO) != 0) SDL_Log("Failed to initialize SDL: %s", SDL_GetError());

    int sample_nr = 0;

    SDL_AudioSpec want;
    want.freq = SAMPLE_RATE; // number of samples per second
    want.format = AUDIO_S16SYS; // sample type (here: signed short i.e. 16 bit)
    want.channels = 1; // only one channel
    want.samples = 2048; // buffer-size
    want.callback = audio_callback; // function SDL calls periodically to refill the buffer
    want.userdata = &sample_nr; // counter, keeping track of current sample number

    SDL_AudioSpec have;
    if(SDL_OpenAudio(&want, &have) != 0) SDL_LogError(SDL_LOG_CATEGORY_AUDIO, "Failed to open audio: %s", SDL_GetError());
    if(want.format != have.format) SDL_LogError(SDL_LOG_CATEGORY_AUDIO, "Failed to get the desired AudioSpec");

    SDL_PauseAudio(0); // start playing sound
    SDL_Delay(1000); // wait while sound is playing
    SDL_PauseAudio(1); // stop playing sound

    SDL_CloseAudio();

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-04-11T13:35:04.360

**SDL 2 C 示例**

以下代码产生正弦声音，改编自：[https ://codereview.stackexchange.com/questions/41086/play-some-sine-waves-with-sdl2](https://codereview.stackexchange.com/questions/41086/play-some-sine-waves-with-sdl2)

主程序

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <SDL2/SDL.h>

const double ChromaticRatio = 1.059463094359295264562;
const double Tao = 6.283185307179586476925;

Uint32 sampleRate = 48000;
Uint32  frameRate =    60;
Uint32 floatStreamLength = 1024;
Uint32 samplesPerFrame;
Uint32 msPerFrame;
double practicallySilent = 0.001;

Uint32 audioBufferLength = 48000;
float *audioBuffer;

SDL_atomic_t audioCallbackLeftOff;
Sint32 audioMainLeftOff;
Uint8 audioMainAccumulator;

SDL_AudioDeviceID AudioDevice;
SDL_AudioSpec audioSpec;

SDL_Event event;
SDL_bool running = SDL_TRUE;

typedef struct {
    float *waveform;
    Uint32 waveformLength;
    double volume;
    double pan;
    double frequency;
    double phase;
} voice;

void speak(voice *v) {
    float sample;
    Uint32 sourceIndex;
    double phaseIncrement = v->frequency/sampleRate;
    Uint32 i;
    if (v->volume > practicallySilent) {
        for (i = 0; (i + 1) < samplesPerFrame; i += 2) {
            v->phase += phaseIncrement;
            if (v->phase > 1)
                v->phase -= 1;

            sourceIndex = v->phase*v->waveformLength;
            sample = v->waveform[sourceIndex]*v->volume;

            audioBuffer[audioMainLeftOff+i] += sample*(1-v->pan);
            audioBuffer[audioMainLeftOff+i+1] += sample*v->pan;
        }
    }
    else {
        for (i=0; i<samplesPerFrame; i+=1)
            audioBuffer[audioMainLeftOff+i] = 0;
    }
    audioMainAccumulator++;
}

double getFrequency(double pitch) {
    return pow(ChromaticRatio, pitch-57)*440;
}

int getWaveformLength(double pitch) {
    return sampleRate / getFrequency(pitch)+0.5f;
}

void buildSineWave(float *data, Uint32 length) {
    Uint32 i;
    for (i=0; i < length; i++)
        data[i] = sin(i*(Tao/length));
}

void logSpec(SDL_AudioSpec *as) {
    printf(
        " freq______%5d\n"
        " format____%5d\n"
        " channels__%5d\n"
        " silence___%5d\n"
        " samples___%5d\n"
        " size______%5d\n\n",
        (int) as->freq,
        (int) as->format,
        (int) as->channels,
        (int) as->silence,
        (int) as->samples,
        (int) as->size
    );
}

void logVoice(voice *v) {
    printf(
        " waveformLength__%d\n"
        " volume__________%f\n"
        " pan_____________%f\n"
        " frequency_______%f\n"
        " phase___________%f\n",
        v->waveformLength,
        v->volume,
        v->pan,
        v->frequency,
        v->phase
    );
}

void logWavedata(float *floatStream, Uint32 floatStreamLength, Uint32 increment) {
    printf("\n\nwaveform data:\n\n");
    Uint32 i=0;
    for (i = 0; i < floatStreamLength; i += increment)
        printf("%4d:%2.16f\n", i, floatStream[i]);
    printf("\n\n");
}

void audioCallback(void *unused, Uint8 *byteStream, int byteStreamLength) {
    float* floatStream = (float*) byteStream;
    Sint32 localAudioCallbackLeftOff = SDL_AtomicGet(&audioCallbackLeftOff);
    Uint32 i;
    for (i = 0; i < floatStreamLength; i++) {
        floatStream[i] = audioBuffer[localAudioCallbackLeftOff];
        localAudioCallbackLeftOff++;
        if (localAudioCallbackLeftOff == audioBufferLength)
            localAudioCallbackLeftOff = 0;
    }
    SDL_AtomicSet(&audioCallbackLeftOff, localAudioCallbackLeftOff);
}

int init(void) {
    SDL_Init(SDL_INIT_AUDIO | SDL_INIT_TIMER);
    SDL_AudioSpec want;
    SDL_zero(want);

    want.freq = sampleRate;
    want.format = AUDIO_F32;
    want.channels = 2;
    want.samples = floatStreamLength;
    want.callback = audioCallback;

    AudioDevice = SDL_OpenAudioDevice(NULL, 0, &want, &audioSpec, SDL_AUDIO_ALLOW_FORMAT_CHANGE);
    if (AudioDevice == 0) {
        printf("\nFailed to open audio: %s\n", SDL_GetError());
        return 1;
    }

    printf("want:\n");
    logSpec(&want);
    printf("audioSpec:\n");
    logSpec(&audioSpec);

    if (audioSpec.format != want.format) {
        printf("\nCouldn't get Float32 audio format.\n");
        return 2;
    }

    sampleRate = audioSpec.freq;
    floatStreamLength = audioSpec.size / 4;
    samplesPerFrame = sampleRate / frameRate;
    msPerFrame = 1000 / frameRate;
    audioMainLeftOff = samplesPerFrame * 8;
    SDL_AtomicSet(&audioCallbackLeftOff, 0);

    if (audioBufferLength % samplesPerFrame)
        audioBufferLength += samplesPerFrame - (audioBufferLength % samplesPerFrame);
    audioBuffer = malloc(sizeof(float) * audioBufferLength);

    return 0;
}

int onExit(void) {
    SDL_CloseAudioDevice(AudioDevice);
    SDL_Quit();
    return 0;
}

int main(int argc, char *argv[]) {
    float  syncCompensationFactor = 0.0016;
    Sint32 mainAudioLead;
    Uint32 i;

    voice testVoiceA;
    voice testVoiceB;
    voice testVoiceC;
    testVoiceA.volume = 1;
    testVoiceB.volume = 1;
    testVoiceC.volume = 1;
    testVoiceA.pan = 0.5;
    testVoiceB.pan = 0;
    testVoiceC.pan = 1;
    testVoiceA.phase = 0;
    testVoiceB.phase = 0;
    testVoiceC.phase = 0;
    testVoiceA.frequency = getFrequency(45);
    testVoiceB.frequency = getFrequency(49);
    testVoiceC.frequency = getFrequency(52);
    Uint16 C0waveformLength = getWaveformLength(0);
    testVoiceA.waveformLength = C0waveformLength;
    testVoiceB.waveformLength = C0waveformLength;
    testVoiceC.waveformLength = C0waveformLength;
    float sineWave[C0waveformLength];
    buildSineWave(sineWave, C0waveformLength);
    testVoiceA.waveform = sineWave;
    testVoiceB.waveform = sineWave;
    testVoiceC.waveform = sineWave;

    if (init())
        return 1;

    SDL_Delay(42);
    SDL_PauseAudioDevice(AudioDevice, 0);
    while (running) {
        while (SDL_PollEvent(&event) != 0) {
            if (event.type == SDL_QUIT) {
                running = SDL_FALSE;
            }
        }
        for (i = 0; i < samplesPerFrame; i++)
            audioBuffer[audioMainLeftOff+i] = 0;
        speak(&testVoiceA);
        speak(&testVoiceB);
        speak(&testVoiceC);
        if (audioMainAccumulator > 1) {
            for (i=0; i<samplesPerFrame; i++) {
                audioBuffer[audioMainLeftOff+i] /= audioMainAccumulator;
            }
        }
        audioMainAccumulator = 0;
        audioMainLeftOff += samplesPerFrame;
        if (audioMainLeftOff == audioBufferLength)
            audioMainLeftOff = 0;
        mainAudioLead = audioMainLeftOff - SDL_AtomicGet(&audioCallbackLeftOff);
        if (mainAudioLead < 0)
            mainAudioLead += audioBufferLength;
        if (mainAudioLead < floatStreamLength)
            printf("An audio collision may have occured!\n");
        SDL_Delay(mainAudioLead * syncCompensationFactor);
    }
    onExit();
    return 0;
} 
```

编译并运行：

```
gcc -ggdb3 -O3 -std=c99 -Wall -Wextra -pedantic -o main.out main.c -lSDL2 -lm
./main.out 
```

应该很容易把它变成一个简单的钢琴：[https ://github.com/cirosantilli/cpp-cheat/blob/f734a2e76fbcfc67f707ae06be7a2a2ef5db47d1/c/interactive/audio_gen.c#L44](https://github.com/cirosantilli/cpp-cheat/blob/f734a2e76fbcfc67f707ae06be7a2a2ef5db47d1/c/interactive/audio_gen.c#L44)

对于 wav 操作，还可以查看官方示例：

*   [http://hg.libsdl.org/SDL/file/e12c38730512/test/testresample.c](http://hg.libsdl.org/SDL/file/e12c38730512/test/testresample.c)
*   [http://hg.libsdl.org/SDL/file/e12c38730512/test/loopwave.c](http://hg.libsdl.org/SDL/file/e12c38730512/test/loopwave.c)

在 Ubuntu 19.10、SDL 2.0.10 上测试。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-02-10T17:14:34.777

这是一个关于如何在 SDL2 中播放正弦波的最小示例。确保`SDL_Init(SDL_INIT_AUDIO)`在创建`Sound`.

声音.h

```
#include <cstdint>
#include <SDL2/SDL.h>

class Sound
{
public:
    Sound();
    ~Sound();
    void play();
    void stop();

    const double m_sineFreq;
    const double m_sampleFreq;
    const double m_samplesPerSine;
    uint32_t m_samplePos;

private:
    static void SDLAudioCallback(void *data, Uint8 *buffer, int length);

    SDL_AudioDeviceID m_device;
}; 
```

声音.cpp

```
#include "Sound.h"
#include <cmath>
#include <iostream>

Sound::Sound()
    : m_sineFreq(1000),
      m_sampleFreq(44100),
      m_samplesPerSine(m_sampleFreq / m_sineFreq),
      m_samplePos(0)
{
    SDL_AudioSpec wantSpec, haveSpec;

    SDL_zero(wantSpec);
    wantSpec.freq = m_sampleFreq;
    wantSpec.format = AUDIO_U8;
    wantSpec.channels = 1;
    wantSpec.samples = 2048;
    wantSpec.callback = SDLAudioCallback;
    wantSpec.userdata = this;

    m_device = SDL_OpenAudioDevice(NULL, 0, &wantSpec, &haveSpec, SDL_AUDIO_ALLOW_FORMAT_CHANGE);
    if (m_device == 0)
    {
        std::cout << "Failed to open audio: " << SDL_GetError() << std::endl;
    }
}

Sound::~Sound()
{
    SDL_CloseAudioDevice(m_device);
}

void Sound::play()
{
    SDL_PauseAudioDevice(m_device, 0);
}

void Sound::stop()
{
    SDL_PauseAudioDevice(m_device, 1);
}

void Sound::SDLAudioCallback(void *data, Uint8 *buffer, int length)
{
    Sound *sound = reinterpret_cast<Sound*>(data);

    for(int i = 0; i < length; ++i)
    {
        buffer[i] = (std::sin(sound->m_samplePos / sound->m_samplesPerSine * M_PI * 2) + 1) * 127.5;
        ++sound->m_samplePos;
    }
} 
```

# .net - vb.net系统在XP上的提示音

> ID：10110911
> 
> 赞同：5
> 
> 时间：2012-04-11T17:26:28.123
> 
> 标签：.net, vb.net, winapi, beep

是否可以让 vb.net 程序在 PC 的内部扬声器中发出声音？你知道产生 C 的`\a`BELL 的那个我试过`beep()`，但这只会在声卡上产生错误声音。我也试过

```
<Runtime.InteropServices.DllImport("KERNEL32.DLL", EntryPoint:="Beep", SetLastError:=True, _
CharSet:=Runtime.InteropServices.CharSet.Unicode, ExactSpelling:=True, _
CallingConvention:=Runtime.InteropServices.CallingConvention.StdCall)> _
Public Shared Function _
   aBeep(ByVal dwFreq As Integer, ByVal dwDuration As Integer) _
     As Boolean
End Function 
```

显然，它在 Vista 及更高版本上的唯一好处是没有任何乐趣。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T17:38:39.380

使用`My`VB.NET 中的命名空间，您可以通过`My.Computer.Audio`. 这有一个`Play`带有许多重载的方法，允许您通过文件位置或作为 Byte 数组或 Stream 传入 .wav 声音，但它也有一个`PlaySystemSound`采用[enum](http://msdn.microsoft.com/en-us/library/system.media.systemsounds.aspx)的方法，其中之一是`Beep`. 所以播放这个声音的完整行是：

```
My.Computer.Audio.PlaySystemSound(Media.SystemSounds.Beep) 
```

没有保证，但由于它是.Net框架的一部分，我认为这*应该*适用于XP和Vista......

# apache-flex - 检查 CallResponder 是否正在处理

> ID：10110915
> 
> 赞同：1
> 
> 时间：2012-04-11T17:26:38.123
> 
> 标签：apache-flex, asynchronous

我正在使用 Flash Builder 4.6。作为一个简单的例子，假设我有以下应用程序：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" xmlns:sdk="services.sdk.*">
    <fx:Script>
        <![CDATA[
            private function btnGetValue_clickHandler():void
            {
                getValueResult.token = sdk.getValue();
            }

            private function getValueResultHandler():void
            {
                // ...
            }
        ]]>
    </fx:Script>
    <fx:Declarations>
        <sdk:SDK id="sdk" fault="{Alert.show(event.fault.faultString +'\n\n'+ event.fault.faultDetail, 'SDK ERROR');}" showBusyCursor="false"/>
        <s:CallResponder id="getValueResult" result="getValueResultHandler()"/>
    </fx:Declarations>
    <s:Button id="btnGetValue" click="btnGetValue_clickHandler()" label="Get Value" />
</s:Application> 
```

所以当你点击按钮时，它会调用一个 PHP 文件，当它得到结果时，它会调用`getValueResultHandler()`. 很容易。

但是如果来自 PHP 文件的响应需要一两秒并且用户快速单击按钮怎么办？然后结果处理函数可能不会每次都被调用，因为调用响应者在收到最后一个响应之前获得了一个新的令牌。

有解决此问题的标准方法吗？我想出了以下解决方法，它工作正常，但似乎这个问题很常见，可以有一个更内置的解决方案。

我的解决方法是：

```
var getValueResultProcessing:Boolean = false;

private function btnGetValue_clickHandler():void
{
    var interval:uint = setInterval(function():void
    {
        if (!getValueResultProcessing)
        {
            getValueResultProcessing = true;
            getValueResult.token = sdk.getValue();
            clearInterval(interval);
        }
    }, 100);
    getValueResult.token = sdk.getValue();
}

private function getValueResultHandler():void
{
    getValueResultProcessing = false;
    // ...
} 
```

有没有更好的方法来解决这个问题？

* * *

**编辑：**

我需要解决方案的实际场景之一是循环时：

```
private function btnGetValue_clickHandler():void
{
    var arr:Array = new Array("value1", "value2", "value3");
    for each (var value:String in arr)
        getValueResult.token = sdk.getValue(value);
} 
```

因此，为了解决这个问题，我创建`arr`了一个全局变量并使用`setInterval`我之前描述的方法`shift`关闭第一个元素，然后在结果函数中执行相同的操作，直到`arr`为空。

再次，寻找更“标准”的解决方案，如果存在这样的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T23:21:44.263

`CallResponder`您可能希望自己管理对服务调用的响应，而不是使用。HTTPService（或类似的 Flex 服务）`AsyncToken`在您调用该`HTTPService.send()`方法时返回一个。然后，您可以使用该`AsyncToken.addResponder()`方法添加“结果”和“故障”处理程序。

如果你这样做，每个响应者都会根据需要触发它的结果或错误处理程序。然后使用 Sam DeHaan 建议的最后一种方法，在调用时将每个令牌存储在一个数组中，并在执行“结果”或“故障”处理程序时从数组中删除该令牌。从数组中删除令牌时，如果数组为空，您可以重新启用按钮。

你可以这样做（从内存中输入代码）：

```
var service:HTTPService = new HTTPService();
// configure the service...
var token:AsyncToken = service.send();
// resultHandlerMethod and faultHandler method are functions that you should define
// their signatures look like this:
// resultHandlerMethod(event:ResultEvent)
// faultHandlerMethod(event:FaultEvent)
token.addResponder(new Responder(resultHandlerMethod, faultHandlerMethod); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:42:16.103

如果调用是基于按钮的，请在单击时禁用该按钮。在回调结束时启用按钮。简单的。

# database - 到底如何才能获得 10.1b 进度数据库的 CSV 转储？

> ID：10110922
> 
> 赞同：3
> 
> 时间：2012-04-11T17:26:59.933
> 
> 标签：database, csv, openedge, progress-db

我正在尝试从 Progress / OpenEdge 10.1b 数据库中获取 CSV 转储。这是一个用于 Intergy EHR 的数据库，因此应用程序附带的 openEdge 版本只是运行时的。我无法编译转储脚本或使用服务器上的数据管理工具导出。我有所有数据文件/结构文件的原始副本。我可以使用评估套件版本 11 提取这些数据吗？哦.. 我已经联系 Progress 软件尝试购买 10.1b 的完整许可证，他们只是让我四处奔走。有谁知道另一种解决方案？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:10:03.260

缺少该程序的开发人员客户端，我看到的选项是：

1) 使用 TCP 连接从 11.0 评估套件连接到 10.1B db，然后编写一些代码来导出表 CSV，如下所示：

```
FOR EACH table-name NO-LOCK: 
   EXPORT DELIMITER "," table-name.
END. 
```

2) 找人为你的 10.1B 系统写一个 CSV 导出器，

3) 转储所有 10.1B 数据，然后将其加载到 11.0 数据库中，然后从中导出

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T21:14:18.023

如果您可以访问数据字典，您可以将数据导出为文本（Admin -> Export Data -> Text..）。导出选项之一是指定分隔符。默认值为逗号。

您可能需要指定 -rx 或 -rq 客户端连接参数才能使用运行时许可证访问数据字典。您可以使用不同的参数获得不同的选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-24T02:46:23.047

我会使用提供的实用程序 sqldump 来执行此操作。它会将您想要的表直接转储到后缀为 .dsql 的 CSV 文件中。适用于所有平台。table 参数与通配符一起使用，因此您可以选择一次转储所有表（在下面的示例中将 PUB.ABCCode 更改为 PUB.%。

在我的测试中，这比在 4GL 代码中使用 EXPORT 命令快 80%。

```
c:\program files\epicor\>sqldump -u XXXX -a XXXX -t PUB.ABCCode progress:T:l 
```

本地主机：9450：mfgsys

```
OpenEdge Release 10.2A0329  as of Thu Apr 19 10:02:30 EDT 2012

Table      : PUB.ABCCode
Dump file  : PUB.ABCCode.dsql

Dumped 10 Records, 1647 bytes, 1 seconds.

Dumped 1 Tables

c:\program files\epicor\> 
```

# c++ - c++中关于重载流操作符的几个问题

> ID：10110925
> 
> 赞同：2
> 
> 时间：2012-04-11T17:27:25.643
> 
> 标签：c++, class, function, operator-overloading

我正在开发一个刽子手程序，我想在每次猜测后向用户输出状态报告。当我使用类时，我需要使用“朋友”关键字。我对班级和朋友的概念很满意，但是我正在努力在我的程序中正确实现它。

主要问题是没有计算元音的数量，并且用户可以尝试的字母数量没有更新。每次都显示完整的字母表。

我的程序代码很丰富，我不打算在这里全部发布。我遇到的问题是功能`remainingLetters()`；和`vowelCount()`。我附上了相关的代码片段。这段代码显然不会编译。我只是希望有人可能会看到我错过的明显错误。

```
**Hangman.h:**
{
public:
...
int vowelCount()const; //to be implemented
char* remainingLetters()const;//to be implemented
friend ostream& operator<< (ostream &out, Hangman &game);

private:
...
int vowel_count;
char secretWord[MAXWORDLENGTH];
char* remaining_letters;
}

**hangman.cpp:**
{
...
int Hangman::vowelCount()const
{
  int vowel_count = 0;
  int i;
  secretWord[i];

  for(i=0; i<strlen(secretWord); i++)
  {

if(secretWord[i]=='a'||secretWord[i]=='e'||secretWord[i]=='i'||secretWord[i]=='o'||secretWord[i]=='u')
    {
      vowel_count++;
    }
  }
  return vowel_count;
}

char* Hangman::remainingLetters()const
{
  char alphabet[26]={'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'};
  char *remaining_letters=new char[ALPHABETSIZE];

  for(int i=0; i<strlen(secretWord); i++)
  {
  for(int j=0; j<ALPHABETSIZE; j++)
    {
       if(secretWord[i]!=alphabet[j])
       {
     remaining_letters[j]=alphabet[j];
       }
    }
  } 
 return remaining_letters;
}

ostream& operator<< (ostream &out, Hangman &game)
{
    out << "Number of guesses remaining is: " << game.numGuessesAllowed-game.numWrongGuesses << endl
     << "Number of incorrect guesses so far is: "<<game.numWrongGuesses <<endl
     << "Letters remaining are: "<<game.remaining_letters <<endl
     << "Hint: The secret word contains "<<game.vowel_count <<" vowels"<<endl;

    return out;
}
}

**main.cpp**
{
...
 cout << game;
...
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:37:55.933

您需要调用函数`vowelCount()`并`remainingLetters()`计算相应的变量（以便您可以输出它们）。

此外，`char *remaining_letters=new char[ALPHABETSIZE];`将为字母分配内存并用 0 初始化每个位置——这也恰好是字符串终止值。所以如果第一个位置（字母`'a'`）没有设置，`out<<game.remaining_letters`就不会输出任何东西

此外，该函数`vowelCount()`定义了隐藏类中的局部变量`vowel_count`（成员变量），因此成员变量不会被更新（除非您将返回值显式分配`vowelCount()`给该成员变量）我建议您删除局部变量声明从`vowelCount()`函数中，它将使用成员变量，这是您所需要的

上一段也适用于成员变量`remaining_letters`

还有一件事：分配的内存`new`不会自动释放，一旦你从函数调用返回，分配的内存就会丢失（因为没有办法再次访问它，但它仍然使用内存），除非你分配它当函数返回时。您需要将每个`new[]`呼叫与其对应的`delete[]`呼叫相匹配。更好的是：在类的构造函数中分配内存并在成员变量的析构函数中删除它

注意：此逻辑中还有另一个错误：

```
for(int i=0; i<strlen(secretWord); i++) 
{ 
  for(int j=0; j<ALPHABETSIZE; j++) 
  { 
    if(secretWord[i]!=alphabet[j]) 
    { 
      remaining_letters[j]=alphabet[j]; 
    } 
  } 
} 
```

您在字母表中循环，每次密码中的当前字母不匹配时，您分配给`remaining_letters`. 每次都会发生这种分配，因为字母表中会有一个字母与当前的 secretWord 字母不匹配。

要解决此问题，您需要执行以下操作（注意循环的反转）：

```
int secret_len = strlen(secretWord); // cache length, so we don't recalculate it
                                     // every time: secretWord does not change
for(int j=0; j<ALPHABETSIZE; j++) 
{ 
  bool found = false; // assume the current ABC letter is not in secretWord
  for(int i=0; i<secret_len; i++) 
  { 
    if(secretWord[i]!=alphabet[j]) 
    { 
      found = true; // but it was
    } 
  } 
  if (!found) // if it wasn't
  {
    remaining_letters[j]=alphabet[j]; 
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:38:17.997

您的主要问题是您没有在班级成员中保留元音计数`vowel_count`。您将它存储在局部变量中`vowel_count`并返回它，但类成员永远不会更新。

# java - 在android的共享首选项中禁用对话框通知

> ID：10110926
> 
> 赞同：2
> 
> 时间：2012-04-11T17:27:26.087
> 
> 标签：java, android, sharedpreferences

我在具有铃声的应用程序中具有共享偏好..

我想禁用通知短信和彩信以及来自应用程序的通知，例如警报通知

```
 <?xml version="1.0" encoding="utf-8"?>
    <PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">  
      <CheckBoxPreference 
      android:title="Disable Notification"
      android:defaultValue="true"
      android:key="checkbox"
      android:summary="Check the Box"/>

   </PreferenceScreen> 
```

这是我的对话通知代码之一：

```
 //Alert Code
    final AlertDialog alertDialog = new AlertDialog.Builder(this).create();
        alertDialog.setTitle("Reset...");
        alertDialog.setMessage("Are you sure?");

        Alert.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // TODO Auto-generated method stub

                alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        // here you can add functions
                    }
                });

                alertDialog.setIcon(android.R.drawable.ic_dialog_alert);
                alertDialog.show();
            }
        });

    } 
```

我尝试运行它，但是当我尝试使用警报通知时它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T19:10:52.130

```
SharedPreferences sharedPreferences = this.getPreferences(MODE_PRIVATE);
boolean hideNotification = sharedPreferences.getBoolean("checkbox", false);

if(!hideNotification)
    alertDialog.show(); 
```

# java - 如何解决两个具有相同名称但在不同父级下的节点？

> ID：10110928
> 
> 赞同：0
> 
> 时间：2012-04-11T17:27:32.247
> 
> 标签：java, xml, xpath, xmldocument

```
 <PublicRecords>
      <USBankruptcies>
         <USBanktruptcy>...<USBankruptcy>
         <CourtId>...</CourtId>
         <USBanktruptcy>...<USBankruptcy>
         <CourtId>...</CourtId>
      </USBankruptcies>             
      <USTaxLiens>
         <USTaxLien>...<USTaxLien>
         <CourtId>...</CourtId>
         <USTaxLien>...<USTaxLien>
         <CourtId>...</CourtId>
      </USTaxLiens>       
      <USLegalItems>
         <USLegalItem><USLegalItem>
         <CourtId></CourtId>
          <USLegalItem><USLegalItem>
         <CourtId></CourtId>
      </USLegalItems>       
  </PubicRecords> 
```

我正在使用 doc 和 xpath 对象的组合来提取属性和节点内容。

```
 NodeList bp = doc.getElementsByTagName("USBankruptcy");
    NodeList nl = doc.getElementsByTagName("CourtId");
    long itrBP;
    for (itrBP = 0; itrBP < bp.getLength(); itrBP++ )
    {

        Element docElement = (Element) bp.item(itrBP);
        Element courtElement = (Element) nl.item(itrBP);

        NodeList df = docElement.getElementsByTagName("DateFiled");
        if(df.getLength() > 0)
        {
            dateFiled = nullIfBlank(((Element)df.item(0)).getFirstChild().getTextContent());
            dateFiled = df.format(dateFiled);
        } 
```

但是，当我说获取标签名称 CourtID 的元素时，它将获取所有 CourtID，而不仅仅是 USBankruptcy 下的那些。

有没有办法指定父母？

我试过 NodeList nl = doc.getElementsByTagName("USBankruptcies/CourtId");

它在运行时给了我一个 dom 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:53:54.853

不要`getElementsByTagName("CourtId")`在 Document 上调用该方法，而是在子元素（在您的情况下为`<USBankruptcies>`元素）上调用它。

```
NodeList bankruptcyNodes = doc.getElementsByTagName("USBankruptcies");
Element bankruptcyElement = (Element) bankruptcyNodes.item(0);

NodeList bankruptcyCourtNodes = bankruptcyElement.getElementsByTagName("CourtId");
// etc... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:41:58.720

请在此处找到代码：

```
DocumentBuilderFactory domFactory = DocumentBuilderFactory
            .newInstance();
    domFactory.setNamespaceAware(true);
    DocumentBuilder builder = domFactory.newDocumentBuilder();
    Document doc = builder.parse("test.xml");
    XPath xpath = XPathFactory.newInstance().newXPath();
    XPathExpression expr = xpath.compile("*//USBankruptcies/CourtId");
    Object result = expr.evaluate(doc, XPathConstants.NODESET);
    NodeList nodes = (NodeList) result;
    for (int i = 0; i < nodes.getLength(); i++) {
        System.out.println(nodes.item(i));
    } 
```

# php - php如何以字符串形式表示多级数组

> ID：10110931
> 
> 赞同：3
> 
> 时间：2012-04-11T17:27:49.217
> 
> 标签：php, arrays, deserialization

这是 php 中混合的、多级的、不规则数组的示例：

```
$settings['style_formats'] = array(
  array('title' => 'Center table', 'selector' => 'table', 'styles' => array('margin-left' => 'auto', 'margin-right' => 'auto')),
  array('title' => 'Menu style', 'selector' => 'ul,ol', 'classes' => 'menu'),
  array('title' => 'Layer2', 'inline' => 'div', 'styles' => array('background-color' => 'orange')),
  array('title' => 'Bold text', 'inline' => 'b'),
  array('title' => 'Red text', 'inline' => 'span', 'styles' => array('color' => '#ff0000')),
  array('title' => 'Red header', 'block' => 'h1', 'styles' => array('color' => '#ff0000')),
  array('title' => 'Example 1', 'inline' => 'span', 'classes' => 'example1'),
  array('title' => 'Example 2', 'inline' => 'span', 'classes' => 'example2'),
  array('title' => 'Table styles'),
  array('title' => 'Table row 1', 'selector' => 'tr', 'classes' => 'tablerow1'),
); 
```

我需要找到一种方法来表示并将这种数组从字符串格式转换为 php 数组。初始字符串格式必须是人类使用文本编辑器可读和可写的。因此，例如，它不应该是使用“serialize”的结果，因为“serialize”是一个 php 函数（而且不可能由人创建），并且必须可以在文本编辑器中手动创建字符串。

该字符串将作为参数传递给一个函数，该函数将把它转换为一个像上面那样的 php 数组。

如果它是一个简单的数组，我会使用逗号分隔的字符串和“explode”。但它是多级的，因此使用“explode”将不起作用，因为它会拆分内部数组。preg_split 看起来也不乐观，因为数组非常不规则。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:33:22.653

尝试将其转换为 xml 文档怎么样，这将是人类和机器可读的吗？

有许多 php 库可以这样做并将 xml 文件读入 php 数组...

对于底漆

[http://www.phpbuilder.com/columns/adam_delves20060206.php3](http://www.phpbuilder.com/columns/adam_delves20060206.php3)

[http://www.php.net/manual/en/book.simplexml.php](http://www.php.net/manual/en/book.simplexml.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:39:47.467

[JSON](http://php.net/manual/en/book.json.php)是众多解决方案之一，如下所示：（请原谅我没有格式化）

```
{"style_formats":[{"title":"Center table","selector":"table","styles":{"margin-left":"auto","margin-right":"auto"}},{"title":"Menu style","selector":"ul,ol","classes":"menu"},{"title":"Layer2","inline":"div","styles":{"background-color":"orange"}},{"title":"Bold text","inline":"b"},{"title":"Red text","inline":"span","styles":{"color":"#ff0000"}},{"title":"Red header","block":"h1","styles":{"color":"#ff0000"}},{"title":"Example 1","inline":"span","classes":"example1"},{"title":"Example 2","inline":"span","classes":"example2"},{"title":"Table styles"},{"title":"Table row 1","selector":"tr","classes":"tablerow1"}]} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T17:49:02.080

如果这是由人类编写的，[YAML](http://en.wikipedia.org/wiki/YAML#Sample_document)可能是你最好的选择。

有一些[PHP 实现](http://en.wikipedia.org/wiki/YAML#Bindings)可用。

# ruby - ruby DateTime#strptime 无法处理“%6N”？

> ID：10110934
> 
> 赞同：2
> 
> 时间：2012-04-11T17:28:08.860
> 
> 标签：ruby

```
time_format = '%H.%M.%S.%6N'
timestamp = DateTime.now.strftime(time_format)  # this works, it shows something like "10.09.53.595977"
DateTime.strptime(timestamp, time_format)  # error, in `strptime': invalid date (ArgumentError) 
```

那么如果我真的想解析微秒（6位数字），是否可以让#strptime工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:46:32.467

查看 ext/date/date_strptime.c 的 ruby​​ 源代码，似乎考虑了 N 情况，试试这个：

```
DateTime.strptime(timestamp, '%H.%M.%S.%N') 
```

并检查秒分数被解析试试这个：

```
d = DateTime.strptime(timestamp, '%H.%M.%S.%N')
p d.sec_fraction 
```

并将其与 *time_format* 中的内容进行比较。

# python - Python中的多处理/多线程..？

> ID：10110938
> 
> 赞同：0
> 
> 时间：2012-04-11T17:28:17.353
> 
> 标签：python, performance, algorithm, memory-management

我有一个我希望多次处理的代码（多处理），并且多个进程中的每一个的输出都应该存储在一个公共内存中，然后进行相应的处理。

每个单独的进程执行一段代码（维护一个字典），并且每个进程应该将数据并排存储在一个公共内存中（或者并排或者如果不可能，那么最后存储所有字典。）

对于.eg

```
process1 ->  dict1,  
process2 -> dict2, 
process3 -> dict3

>main_dict = dict1 + dict2 + dict3 
```

我正在用 Python 执行这段代码。

我也可以在这里进行多线程处理，但实际上多线程并不像我听说的那样并行......所以我可以进行多处理。请告诉我在多处理模式下维护这种场景的过程，而不会浪费太多时间或让处理器保持理想状态..

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T17:37:02.703

你会想看看[多处理](http://docs.python.org/library/multiprocessing.html)模块，虽然我不认为你可以用 Python 中的字典来共享内存——我认为你需要序列化它们并通过队列发送它们。

> 多线程实际上并不像我听说的*那样并行......所以我可以进行多处理。*请告诉我在多处理模式下维护这种场景的过程，而不会浪费太多时间或*让处理器保持*理想状态..

如果您不想离开处理器，那么您将不会获得任何额外的并行性，除非您受 IO 限制。

这意味着，如果你正在做大量的 CPU 工作，那么留在同一个处理器上*并*进行多处理*只会减慢你的速度*。增加并行度的唯一方法是使用其他处理器。（即使它们是“虚拟”超线程 CPU。）

另一方面，如果您因从内存或网络中读取内容而减慢了速度（似乎并非如此），那么[线程](http://docs.python.org/library/threading.html)模块会更合理。[但是由于GIL](http://wiki.python.org/moin/GlobalInterpreterLock)，它不会增加您的 CPU 并行度

简而言之：你要求的是矛盾的东西。弄清楚你真正需要什么，然后选择一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:31:27.813

查看[子流程](http://docs.python.org/library/subprocess.html)模块。

在文档中有很多例子，你可以用它做什么。
最终，这可以帮助你解决你的问题......

# c# - 拆分平衡字符串 C# 的更有效方法

> ID：10110941
> 
> 赞同：1
> 
> 时间：2012-04-11T17:28:36.330
> 
> 标签：c#, string, string-parsing

当我只有一个平衡角色时，我已经通过平衡 Regex 来做到这一点......但是有了更多平衡角色，它变得更加复杂和丑陋。

就我目前的目的而言，我改为编写了一个方法来通过对字符串进行标记来做到这一点，但它非常慢（而且效率非常低）。最昂贵的部分似乎是我正在做的无偿使用子字符串（是的，我知道这很糟糕）。

基本上，我想采取以下

```
 hello("(abc d)", efg (hijk)) and,some more<%lmn, "o(\")pq", (xy(z))%> 
```

最后得到

```
hello("(abc d)", efg (hijk)) 
[space] (the actual character)
and
,
some more
<%lmn, "o()pq", (xy(z))%> 
```

换句话说，我正在拆分（我希望这些包含在数组结果中）

```
[space]
, 
```

....我有“平衡的分组字符串”

```
" "
( )
<% %> 
```

...而且我有转义字符

```
\ 
```

我不想为此目的编写一个完整的大解析器......

这是代码：

```
 public static IEnumerable<string> SplitNotEnclosed(this string s, IEnumerable<string> separators, Dictionary<string, string> enclosingValues = null, IEnumerable<char> escapeCharacters = null, bool includeSeparators = false, StringComparison comparisonType = StringComparison.Ordinal)
    {
        var results = new List<string>();

        var enclosureStack = new Stack<KeyValuePair<string, string>>();
        bool atEscapedCharacter = false;

        if (escapeCharacters == null) escapeCharacters = new[] { '\\' };
        if (enclosingValues == null) enclosingValues = new[] { "\"" }.ToDictionary(i => i);

        var orderedEnclosingValues = enclosingValues.OrderByDescending(i => i.Key.Length).ToArray();
        separators = separators.OrderByDescending(v => v.Length).ToArray();

        var currentPart = new StringBuilder();

        while (s.Length > 0)
        {
            int addToIndex = 0;

            var newEnclosingValue = orderedEnclosingValues.FirstOrDefault(v => s.StartsWith(v.Key, comparisonType));

            if (enclosureStack.Count > 0 && !atEscapedCharacter && s.StartsWith(enclosureStack.Peek().Value))
            {
                addToIndex = enclosureStack.Peek().Value.Length;
                enclosureStack.Pop();
            }
            else if (newEnclosingValue.Key != null && !atEscapedCharacter)
            {
                enclosureStack.Push(newEnclosingValue);
                addToIndex = newEnclosingValue.Key.Length;
            }
            else if (escapeCharacters.Contains(s[0]) && enclosureStack.Count > 0)
            {
                atEscapedCharacter = !atEscapedCharacter;
                addToIndex = 1;
            }
            else if (enclosureStack.Count > 0)
            {
                atEscapedCharacter = false;
                addToIndex = 1;
            }

            if (enclosureStack.Count == 0)
            {
                string separator = separators.FirstOrDefault(v => s.StartsWith(v, comparisonType));

                if (separator != null)
                {
                    if (currentPart.Length > 0) results.Add(currentPart.ToString());
                    results.Add(separator);
                    s = s.Substring(separator.Length);
                    currentPart = new StringBuilder();

                    addToIndex = 0;
                }
                else
                {
                    addToIndex = 1;
                }
            }

            currentPart.Append(s.Substring(0, addToIndex));
            s = s.Substring(addToIndex);
        }

        if (currentPart.Length > 0) results.Add(currentPart.ToString());

        if (!includeSeparators)
        {
            results = results.Except(separators).ToList();
        }

        return results.ToArray();
    } 
```

# javascript - 在 Chrome 中，聚焦 HTML 文本输入字段会选择内容。如何取消选择？

> ID：10110945
> 
> 赞同：1
> 
> 时间：2012-04-11T17:28:44.090
> 
> 标签：javascript, jquery, focus, forms, html-input

> **可能重复：**
> [使用 JQuery 聚焦输入字段而不选择当前值文本](https://stackoverflow.com/questions/1756926/focus-input-field-with-jquery-without-selecting-current-value-text)

使用以下代码聚焦表单中的第一个字段：

```
$(document).ready(function(){
  $("form input:visible:enabled:first").focus();        
}); 
```

为什么它选择字段中的文本？如何在不选择文本的情况下聚焦输入？

在 Ruby on Rails 中工作。在 Chrome 上测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T20:12:31.587

```
$(document).ready(function(){
   $("form input:visible:enabled:first").focus().val('Yeah');        
});​ 
```

如果你不知道价值是什么，你可以这样做：

```
var $firstInput = $("form input:visible:enabled:first")
$firstInput.focus().val($firstInput.val()); 
```

不过，我将尝试找到更好的解决方案。

# c++ - 如何在 libcurl 中使用成员函数指针

> ID：10110948
> 
> 赞同：3
> 
> 时间：2012-04-11T17:28:53.540
> 
> 标签：c++, curl, function-pointers, libcurl, member-function-pointers

我正在使用 libcurl 我在一个类中下载了文件，我想看到一个进度功能。我注意到我可以设置一个典型的函数指针

```
curl_easy_setopt(mCurl, CURLOPT_PROGRESSFUNCTION, progress_func3); 
```

但是，我想将它设置为指向我的类的函数指针。我可以得到代码来编译

```
curl_easy_setopt(mCurl, CURLOPT_PROGRESSFUNCTION, &MyClass::progress_func3); 
```

并且该`progress_func3`函数将被调用。问题是，一旦它返回，就会出现“检测到缓冲区溢出！” 错误通过，表示程序不能安全地继续执行，必须终止。（这是一个 Microsoft Visual C++ 运行时库错误窗口，我使用的是 Visual Studio 2010）。

当我使用函数时，没有问题，但是当我使用成员函数指针时，我会得到这个错误。如何在 libcurl 中使用成员函数指针？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T17:33:44.590

非静态成员函数需要一个`this`可调用的指针。您不能为`this`这种类型的接口提供该指针，因此无法使用非静态成员函数。

您应该创建一个“普通 C”函数作为回调，并让该函数在适当的`MyClass`实例上调用成员函数。

尝试类似：

```
int my_progress_func(void *clientp, ...)
{
   MyClass *mc = static_cast<MyClass*>(clientp);
   mc->your_function(...);
   return 0; // or something else
} 
```

然后：

```
curl_easy_setopt(mCurl, CURLOPT_PROGRESSDATA,     &your_myclass_object);
curl_easy_setopt(mCurl, CURLOPT_PROGRESSFUNCTION, my_progress_func); 
```

（很明显，您要负责这里的类型匹配。如果您附加了除`MyClass`指向进度数据的指针之外的任何其他内容，那么您就只能靠自己了。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:36:53.137

你可以使用 boost::bind() 来实现。例如：

```
boost::bind(&MyClass::progress_func3, this); 
```

是一个指向返回 void 且没有参数的方法的指针。如果您的回调需要参数，请使用占位符，如下所示：

```
boost::bind(&MyClass::progress_func3, this, _1, _2) 
```

指针可以替换为`this`指向`MyClass`.

编辑：您应该能够使用 boost::function<> 和函数 ptr 类型相对可互换。例如：

```
typedef boost::function< void (int, short) > Callback; 
```

相当于

```
typedef void (Callback)(int); 
```

您可能必须在其间添加一个函数以使编译器满意。我知道我已经使用 boost::function<> 定义了一个回调并传入了一个常规函数指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-28T09:12:02.910

类实例“this”有效：

```
static int progressCallback( void * p, double dltotal, double dlnow, double ultotal, double ulnow )
{
    QTWindow * w{ static_cast< QTWindow * >( p ) };
    emit w->uploadProgressData( ulnow, ultotal );
    return 0;
}

curl_easy_setopt( curl, CURLOPT_NOPROGRESS, 0L );
curl_easy_setopt( curl, CURLOPT_PROGRESSFUNCTION, progressCallback );
curl_easy_setopt( curl, CURLOPT_PROGRESSDATA, this ); 
```

# jquery - 如何在jQuery中鼠标移动时放大和缩小屏幕的一部分？

> ID：10110952
> 
> 赞同：2
> 
> 时间：2012-04-11T17:29:29.700
> 
> 标签：jquery, zooming

我有两个`div`相互重叠的 s，每个都包含一个画布和一些可拖动/可拖放的图像（我的意思是我的显示不仅仅是一个简单的`div`）。

我想在鼠标离开时放大并在鼠标离开时缩小。我需要这样的东西：http: [//www.mind-projects.it/projects/jqzoom/demos.php#demo1](http://www.mind-projects.it/projects/jqzoom/demos.php#demo1)

但是，这个应用于图像，我的只是屏幕的一部分（无论您从`div`s、`canvas`es 和其他可拖放/可拖放的对象中看到什么，现在都在鼠标指针和周围的一个小区域下）。我该怎么做呢？

# android - Android动态RelativeLayout

> ID：10110953
> 
> 赞同：1
> 
> 时间：2012-04-11T17:29:35.933
> 
> 标签：android, android-layout, dynamic

我的`layout.xml`文件如下所示：

```
<ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="270dp"
        android:layout_weight="0.47" >

        <LinearLayout
            android:id="@+id/linearLayout2"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >
        </LinearLayout>

    </ScrollView> 
```

我使用以下代码在循环中创建`TextView`s 和`Button`s ：`for`

```
 View linearLayout =  findViewById(R.id.linearLayout2);

for (int i=0 ; i<10; i++){
     TextView textview = new TextView(this);
     textview.setText("Text view" + i);
     textview.setId(i);

     textview.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
     ((LinearLayout) linearLayout).addView(textview);

    Button button = new Button(this);
    button.setText("View");
    button.setId(i);
    int width=90;
    int height=60;
    button.setLayoutParams(new LayoutParams(width, height));
    ((LinearLayout) linearLayout).addView(button);

} 
```

我得到`Button`下面的TextView。任何人都可以帮我替换它`LinearLayout`，`RelativeLayout`以便我并排得到`TextView`和吗？`Button`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T18:58:44.723

修改你的布局，让你有一个`RelativeLayout`而不是`LinearLayout`：

```
<ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="270dp"
        android:layout_weight="0.47" >

        <RelativeLayout
            android:id="@+id/relativeLayout"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            >
        </RelativeLayout>

</ScrollView> 
```

然后试试这个让`TextView`s 和`Button`s 坐在同一行：

```
 RelativeLayout rl = (RelativeLayout) findViewById(R.id.relativeLayout);
    for (int i = 0; i < 10; i++) {
        Button button = new Button(this);
        button.setText("View" + i);
        button.setId(1000 + i);
        int width = 90;
        int height = 60;

        TextView textview = new TextView(this);
        textview.setText("Text view" + i);
        textview.setId(2000 + i);

        if (i == 0) {
            RelativeLayout.LayoutParams rlp2 = new RelativeLayout.LayoutParams(
                    RelativeLayout.LayoutParams.FILL_PARENT,
                    RelativeLayout.LayoutParams.WRAP_CONTENT);
            rlp2.addRule(RelativeLayout.ALIGN_PARENT_TOP);
            rlp2.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
            textview.setLayoutParams(rlp2);
            rl.addView(textview);
            RelativeLayout.LayoutParams rlp1 = new RelativeLayout.LayoutParams(
                    width, height);
            rlp1.addRule(RelativeLayout.ALIGN_PARENT_TOP);
            rlp1.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
            button.setLayoutParams(rlp1);
            rl.addView(button);
        } else {
            RelativeLayout.LayoutParams rlp2 = new RelativeLayout.LayoutParams(
                    RelativeLayout.LayoutParams.FILL_PARENT,
                    RelativeLayout.LayoutParams.WRAP_CONTENT);
            rlp2.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
            rlp2.addRule(RelativeLayout.BELOW, button.getId() - 1);
            textview.setLayoutParams(rlp2);
            rl.addView(textview);
            RelativeLayout.LayoutParams rlp1 = new RelativeLayout.LayoutParams(
                    width, height);
            rlp1.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
            rlp1.addRule(RelativeLayout.BELOW, button.getId() - 1);
            button.setLayoutParams(rlp1);
            rl.addView(button);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:11:48.893

您正在使用 定义 LinearLayout `android:orientation="vertical"`，因此它往往在另一个之下。

将您的文本视图和按钮添加到单个线性布局，方向为水平，并将此线性布局添加到原始垂直线性布局。

**编辑：**尝试以下操作：

```
View linearLayout =  findViewById(R.id.linearLayout2);

for (int i=0 ; i<10; i++){
 View indiLyt = new View(this);
 indiLyt.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
 indiLyt.setOrientation(LinearLayout.HORIZONTAL);

 TextView textview = new TextView(this);
 textview.setText("Text view" + i);
 textview.setId(i);

 textview.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
 ((LinearLayout) indiLyt).addView(textview);

 Button button = new Button(this);
 button.setText("View");
 button.setId(i);
 int width=90;
 int height=60;
 button.setLayoutParams(new LayoutParams(width, height));
 ((LinearLayout) indiLyt).addView(button);
 ((LinearLayout) linearLayout).addView(indiLyt);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:20:02.170

试试这个解决方案::;

在项目的 res/layout 中有一个新的 xml 文件，如下所示。

将此另存为 linear.xml

```
< LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linear"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
            android:orientation="horizontal" >

        <TextView
            android:id="@+id/text"
            android:layout_width=" wrap_content "
            android:layout_height=" wrap_content " />
<Button            android:id="@+id/button"
            android:layout_width="90dp"
            android:layout_height="60dp" />
    </ LinearLayout > 
```

和下面的代码:::

```
LinearLayout linearLayout =  (LinearLayout)findViewById(R.id.linearLayout2);
LayoutInflater inflater = (LayoutInflater)getApplicationContext().getSystemService
      (Context.LAYOUT_INFLATER_SERVICE);

for (int i=0 ; i<10; i++){
View view = inflater.inflate(R.layout.linear,null);
view.findViewById(R.id.text).setText("Text view" + i);
view.findViewById(R.id.text).setTextColor(Color.BLUE);
view.findViewById(R.id.button).setText(“View");
view.findViewById(R.id.button).setTextColor(Color.BLUE);
linearLayout.addView(view);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T17:42:12.563

```
 View linearLayout =  findViewById(R.id.linearLayout2);

for (int i=0 ; i<10; i++){
     TextView textview = new TextView(this);
     textview.setText("Text view" + i);
     textview.setId(i);

     textview.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
     ((LinearLayout) linearLayout).addView(textview);

    Button button = new Button(this);
    button.setText("View");
    button.setId(i);
    int width=90;
    int height=60;
    button.setLayoutParams(new LayoutParams(width, height));
    ((LinearLayout) linearLayout).addView(button);

} 
```

用下面的代码替换上面的::

```
LinearLayout linearLayout =  (LinearLayout)findViewById(R.id.linearLayout2);
for (int i=0 ; i<10; i++){
LinearLayout l = new LinearLayout(this);
l.setOrientation(LinearLayout.HORIZONTAL);

TextView textview = new TextView(this);
textview.setText("Text view" + i);
textview.setId(i);

l.addView(textview);
Button button = new Button(this);
button.setText("View");
button.setId(i);
button.setWidth(90);
button.setHeight(60);
l.addView(button);
linearLayout.addView(l);//if you want you can layout params linearlayout
} 
```

# haskell - Haskell 中的显式递归

> ID：10110954
> 
> 赞同：1
> 
> 时间：2012-04-11T17:29:36.657
> 
> 标签：haskell, recursion

**任务：**我正在尝试编写一个类型为 signature 的函数`minimum_recursive :: (a -> a -> Bool) -> [a] -> a`。对于它的第一个参数，它接受我将调用的带有`less`两个参数的函数，如果第一个参数小于第二个参数，则返回 True，否则返回 False。`minimum_recursive`也接受一个列表作为它的第二个参数。使用显式递归，`minimum_recursive`应该确定其输入列表 [a] 中的最小值。

**我的想法：**我想把实际的递归放在一个也接受累加器的辅助函数中。我会用第一项作为累加器来调用辅助函数。

**到目前为止我有什么：**到目前为止，我有以下内容：

```
-- function as first parameter to min'
-- accepts two params, returns True if
-- first must come before second in sorted
-- order
less :: Ord a => a -> a -> Bool
less a b = a < b

-- Subpart B
minimum_recursive :: (a -> a -> Bool) -> [a] -> a
minimum_recursive func list = minimum_recursive_h func list [] 
```

**我**什至不知道如何开始写作`minimum_recursive_h`。

**注意：**我知道可能有一种更简单的方法可以完成这项任务，但我需要按照上面的说明进行操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:58:15.423

你可以这样做：

```
minimum_recursive _ [] = error "no minimum of empty list"
minimum_recursive _ [x] = x
minimum_recursive f (x:xs) = let m = minimum_recursive f xs
                             in if f x m then x else m 
```

或者，使用累加器：

```
minimum_recursive _ [] = error "no minimum of empty list"
minimum_recursive f (x:xs) = helper f x xs
    where
      helper _ m [] = m
      helper f m (x:xs) 
          | f m x = helper f m xs
          | otherwise = helper f x xs 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:44:48.510

如果您想要列表中的最小元素，我建议您将当前拥有的最小元素作为参数添加到函数中。

```
minimum_recursive :: (a -> a -> Bool) -> a -> [a] -> a
minimum_recursive f min [] = min
minimum_recursive f min (x:xs) | f min x   = minimum_recursive f min xs
                               | otherwise = minimum_recursive f x   xs 
```

您还应该更改调用它的函数中的类型，`a`因为`Maybe a`在空列表中没有最小的元素。[这里有一些关于Maybe的帮助](http://en.wikibooks.org/wiki/Haskell/Hierarchical_libraries/Maybe)

如果您想在没有额外参数的情况下执行此操作，您也可以将最小的元素存储在列表的开头。在这种情况下，使用 Maybe 很重要

```
minimum_recursive :: (a -> a -> Bool) -> [a] ->Maybe a
minimum_recursive f [] = Nothing
minimum_recursive f (x:[]) = Just x
minimum_recursive f (y:(x:xs)) | f y x     = minimum_recursive f (y:xs)
                               | otherwise = minimum_recursive f (x:xs) 
```

这就是如何在折叠中找到最小值。看看函数式编程的美妙之处。但这不适用于空列表

```
simplefold :: [a] -> a
simplefold (x:xs) = foldl min x xs 
```

但是我们可以将这个函数嵌入到一个检查列表是否为空并在这种情况下返回 Nothing 的函数中。

```
betterfold :: [a] -> Maybe a
betterfold [] = Nothing
beterfold l   = Just (simplefold l) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T18:49:54.170

递归解决问题的经典方法如下：

1.  假设你几乎解决了这个问题，除了最后一步。
2.  编写代码，给定除最后一步之外的所有解决方案，计算最后一步产生的解决方案。
3.  写出基本情况。

在列表的情况下，这转化为这种模式：

1.  基本案例：解决方案应该是`[]`什么？（如果有的话；就您的`minimum_recursive`函数而言，这将是一个错误）。
2.  对于非空列表`x:xs`，假设您已经拥有`almostTheResult = minimum_recursive f xs`. 鉴于此，您如何计算`minimum_recursive (x:xs)`？

我会给你一个很大的提示：你`minimum_recursive`可以用[`foldr`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3afoldr)这个函数来实现：

```
minBy :: (a -> a -> Bool) -> a -> a -> a
minBy pred x y = if pred x y then x else y 
```

该`foldr`功能完全符合我上面描述的功能。的第一个参数`foldr`是计算给定列表头和尾的部分解的最终解的函数，第二个参数是结果基本情况。

# android - Android C2DM 200 错误

> ID：10110958
> 
> 赞同：0
> 
> 时间：2012-04-11T17:29:50.367
> 
> 标签：android, tomcat, websphere, android-c2dm

我正在尝试开发一个使用推送通知的 android 应用程序。在使用 Tomcat 服务器时，我能够成功注册并将通知推送到设备。我得到的回复是：

```
HTTP/1.1 200 OK [Connection: Keep-Alive, Transfer-Encoding: chunked, Content-Type: text/plain, Cache-control: no-cache, no-store, Pragma: no-cache, Expires: Mon, 01-Jan-1990 00:00:00 GMT, Date: Wed, 11 Apr 2012 17:25:31 GMT, X-Content-Type-Options: nosniff, X-XSS-Protection: 1; mode=block, Server: GSE] 
```

但是在尝试使用 WebSphere 实现相同的代码时，我遇到以下注册错误：

```
Exception :Exception in executing http post request for Android Registration: HTTP/1.1 200 Error 
```

谁能指出我在这两种不同环境之间可能缺少的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T18:15:59.960

我将首先使用 curl 和/或网络监控/日志记录来准确列出正在发送到 C2DM 服务器的请求。

WebSphere 收到 200 似乎很奇怪，但将其显示为错误。那就是我要找的地方。

# android - ActivityNotFoundException 调用内部类活动

> ID：10110959
> 
> 赞同：0
> 
> 时间：2012-04-11T17:29:51.393
> 
> 标签：android

我有一个非 Activity 类（我们称之为“NonActivity”），它需要发布消息并获得用户反馈。我有一个消息活动 (MsgActivity) 类来执行此操作。但是只有 Activity 类可以调用*startActivityForResult()*所以我在 NoActivity 中做了一个内部帮助类：

```
 // just to provide an Activity to launch MsgActivity
  class ActivityMsgClass extends Activity  {

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            Intent iMA = new Intent(this, MsgActivity.class);
            iMA.putExtra("MsgText", mParams[0]);
       ...blah blah ...
            iMA.putExtra("ButtonCode", iBtns);
            startActivityForResult(iMA,3);          
        }     
  } 
```

因此，我的 Activity 类在 Manifest 中声明：

```
<activity android:name="ActivityMsgClass"
          android:configChanges="orientation"
          android:screenOrientation="portrait"
          android:launchMode="singleInstance"></activity> 
```

但是当我尝试调用它时。. .

```
 Intent i = new Intent(ctx, ActivityMsgClass.class);
                i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                ctx.startActivity(i); 
```

...我得到一个 ActivityNotFound 异常。我也试过没有 FLAG_ACTIVITY_NEW_TASK，我也试过在清单中限定名称，例如，

```
<activity android:name=".NoActivity.ActivityMsgClass" 
```

. . . 无济于事。我究竟做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:32:43.860

技术方案是在清单中指定完全限定的活动路径。

实际的解决方案是避免这样做。让活动成为公共类，而不是内部类，这不是一个好习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:35:48.320

在您的清单文件中进行如下更改并尝试...

```
<activity android:name=".ActivityMsgClass"
          android:configChanges="orientation"
          android:screenOrientation="portrait"
          android:launchMode="singleInstance"></activity>
<activity android:name=".MsgActivity"
              android:configChanges="orientation"
              android:screenOrientation="portrait"
              android:launchMode="singleInstance"></activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T17:37:54.920

您的活动名称声明应以句点开头。以这种方式声明它。

```
<activity android:name=".ActivityMsgClass"
      android:configChanges="orientation"
      android:screenOrientation="portrait"
      android:launchMode="singleInstance"></activity> 
```

还要确保该活动`MsgActivity`也在清单中声明。

# javascript - 跨连接的可排序的 JQueryUI 可排序排序更改事件

> ID：10110960
> 
> 赞同：0
> 
> 时间：2012-04-11T17:29:52.070
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-sortable

我需要检测可排序的顺序何时发生变化。无论排序项目来自何处，我都需要它来触发更改事件。

但是，ui.sortable 中可能存在一个缺陷，当从一个连接的可排序对象拖动到另一个时，该缺陷不会触发事件。

考虑：

1.  用户将一个项目从 Sortable#A 拖到 Sortable#B 但尚未放下它。**更改事件在 Sortable#A 上触发**。
2.  然后，用户在 Sortable#A 中拖动项目以更改排序顺序。**NOTHING 触发** 示例： [http ://screencast.com/t/rW4xj485OEc](http://screencast.com/t/rW4xj485OEc)

相反，当用户从同一个 Sortable#A 中开始排序时，Change Event 每次都会在 Sortable#A 上触发。 [http://screencast.com/t/uirpg1E5nA](http://screencast.com/t/uirpg1E5nA)

首先，这似乎是 ui.sortable 中的一个缺陷。其次，有没有人建议我如何得到我的蛋糕并吃掉它？如果需要，我很乐意分叉 ui.sortable 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:21:53.170

change 事件确实只在连接的可排序对象上触发一次，但每次连接的可排序对象的位置发生变化时，它都会在原始可排序对象上触发。

见[小提琴](http://jsfiddle.net/orig/r4Phf/2/)

根据您要达到的具体目标，您可以使用事件组合来获取所需的信息：

*   `start`告诉你`$(ui.item)`当前的可排序。
*   `over``$(this)`告诉您项目被拖入的连接的可排序 ( )。
*   `change`告诉您该项目在可排序的最后一个`over`-ed 或`start`-ed 内移动。

因此，将项目的当前可排序存储在其数据中，并在`start`&上对其进行修改`over`，并可能在 上将其删除`stop`。

不过我同意你的观点，这应该更容易。

# cocoa - 减慢或暂停 NSAnimationContext

> ID：10110961
> 
> 赞同：4
> 
> 时间：2012-04-11T17:29:56.050
> 
> 标签：cocoa, nsanimationcontext

我有一个 NSAnimationContext （只是一个滚动视图），只要光标进入视图，我想放慢速度和/或暂停。我已经实现了对何时发生这种情况的检测——现在我只需要弄清楚如何减慢已经在进行中的动画。我已经想出了如何使用 CALayers 来做到这一点 - 但我需要使用动画代理无法在此动画中使用多个 AppKit 视图，因此核心动画将无法工作。有谁知道如何做到这一点？有没有办法跟踪 NSAnimationContexts 然后稍后更改它们？

这是我的代码的一小部分，第一个块被循环调用。每次一个 agnation 完成时，下一个将开始。

```
[NSAnimationContext runAnimationGroup:^(NSAnimationContext *context){
    context.duration = pixels/speed;
    [[currentTweetView animator] setFrame:endRect];
} completionHandler:^{
    [currentTweetView removeFromSuperview];
    currentTweetView = nil;
    [self nextAnimationWithAnimationIndex:currentIndex];
}]; 
```

这是 mouseEntered: 方法中的代码。每当调用它时，都不会调用 completionHandler 并且应用程序会冻结。

```
[NSAnimationContext runAnimationGroup:^(NSAnimationContext *context){
    [[[self.subviews objectAtIndex:0] animator] setFrame:finalRect];
    context.duration = 100.0;
} completionHandler:^{
    NSLog(@"done");
}]; 
```

另外，有没有办法提前结束 NSAnimationContext 而不是调用完成处理程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:53:30.630

我想如果你只是通过`animator`代理再次设置属性，在不同的情况下`NSAnimationContext,`它将替换正在进行的动画。这类似于重新定位动画（例如到新的目的地）。

# facebook - Facebook 事件订阅评论。创建响应 URL

> ID：10110968
> 
> 赞同：0
> 
> 时间：2012-04-11T17:30:18.963
> 
> 标签：facebook

我在我的网页上使用 Facebook 社交评论插件。我使用事件订阅方法来获取评论并将其保存到本地数据库。除了评论链接的响应外，一切都运行良好。事件订阅代码片段：

```
window.fbAsyncInit = function(){
    FB.Event.subscribe("comment.create", function(response){           
          alert(response.href);
    });
}; 
```

假设我在某个页面上有 Facebook 评论插件，其 url 是：

> [http://mywebpage.com/index.php?article_id=10](http://mywebpage.com/index.php?article_id=10)

所以事件订阅返回的 url 等于：

> [http://www.facebook.com/http://mywebpage.com/index.php?article_id=10](http://www.facebook.com/http://mywebpage.com/index.php?article_id=10)

但是那个网址不存在……那有什么问题呢？如何获得正确的网址？

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:54:28.757

问题在于我在将页面 url 传递给 Facebook 插件之前用于对页面 url 进行编码的 PHP urlencode 函数。因此，只需将其删除，事情就解决了。

# java - 闭包和访问者模式之间是否存在显着差异？

> ID：10110971
> 
> 赞同：2
> 
> 时间：2012-04-11T17:30:26.353
> 
> 标签：java, oop, design-patterns, groovy, closures

我最近一直在玩 Groovy，之前也玩过 JRuby，很欣赏`.each{}`在他们的集合中使用闭包。

也就是说，我不禁觉得这不过是访问者模式的语法糖。如果您将代码封装在一个类中的闭包主体中，并使用访问者模式传递该类的一个实例，这似乎是完全相同的事情，尽管麻烦较少。

那么，是否还有其他我还没有看到的闭包功能使它们与访问者模式有根本的不同，或者人们真的对这种语法糖感到兴奋吗？

对我来说，这似乎更像是一个图书馆问题而不是语言问题。

* * *

这是一个 Java 列表的快速模型，它的行为似乎类似于`each`Groovy 列表中的闭包。

```
public class ClosureList<E> extends ArrayList<E>{

    interface Visitor<E>{
            void visit( E e );
    }

    void accept( Visitor<E> v ){
        for( Iterator<E> myItr = this.iterator(); myItr.hasNext() )
            v.visit( myItr.next() );
    }

} 
```

然后就拥有

```
public class ClosureTest{
    public static void main( String[] args ){
        ClosureList<String> myList = new ClosureList<String>();
        myList.add( "green eggs" );
        myList.add( "green ham"  );

        clStr.accept(
                new Visitor<String>(){
                    void visit( String s ){
                        System.out.println( s )
                    }
                }
            );
    }
} 
```

这在 Groovy 中似乎相同：

```
def l = [ "green eggs", "green ham" ]
l.each{ println it } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T18:25:00.123

如果您的意思是说每个函数是访问者模式的实现，那么您是对的。不是传递接口的匿名实现，而是传递闭包。

闭包不是访客。在这种情况下，闭包用于实现访问者。

当然，在幕后，闭包是通过内部类实现的，所以如果你的意思是说闭包没有什么神奇之处，我们大多数人都会同意。

关于 java 中闭包和匿名类之间的区别，有一些重要的范围界定点，最值得注意的是对非最终变量的访问和可配置的委托策略。

在 groovy 中，您还可以通过表示对实例方法的一种引用来实例化闭包，如下所示：

```
def c=this.&doSomething 
```

这将创建一个 MethodClosure，您将能够使用它来传输您的方法，并减少从类到方法的模块化粒度。

所以我们开始远离访问者模式了，不是吗？

我认为最后在我的理解中，闭包是一种使方法成为一等公民并获得函数式编程的好处的 OO 方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T17:33:54.017

缺少的关键部分是被**访问**的对象需要有一个`accept`方法。在您上面描述的示例中，`each`不保证构造中的项目具有任何方法...

`each`结构更类似于循环。

我还要指出，闭包是一种作用域构造，而访问者模式是一种设计模式。所以从这个角度来看，他们绝对*没有任何*关系。

# asp.net-mvc - ActionLink 是否考虑 Global.asax 路由？

> ID：10110972
> 
> 赞同：1
> 
> 时间：2012-04-11T17:30:27.500
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我有这样的动作：

```
@Html.ActionLink(dinner.Title, "Details", new { id=dinner.DinnerID }) 
```

和这样定义的路线：

```
routes.MapRoute(
                    "PrettyDetails",
                    "{Id}",
                        new { controller = "Dinners", action = "Details" },
                        new { Id = @"\d+" }
                    ); 
```

动作链接呈现`<a href="/234">My Dinner</a>`

为什么链接中不显示`"Details"`？是因为它知道 Global.asax 中定义的路由，因此以某种方式匹配模式吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:33:53.373

答案是“是”，ActionLink 在呈现 URL 时会考虑定义的路由。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T17:32:21.527

> 为什么链接中不显示“详细信息”？

因为您在 Global.asax 中定义的路由模式是`{Id}`id 必须是整数。因此，要回答您的问题，是的，`Html.ActionLink`助手尊重您在 Global.asax 中定义的路线。

如果您希望能够传递不同的操作`details`，则必须修改您的模式。例如像这样：`{action}/{id}`。显然，控制器部分也是如此。

`Html.RouteLink`如果您不希望按照 Global.asax 中路由定义的顺序进行评估，您可以使用which 允许您指定路由名称。这样您就可以定位特定路线。当然，您传递的参数必须与这条路线保持一致。

# .net - 如何仅在尚未安装 .NET Framework 时才安装它？

> ID：10110978
> 
> 赞同：12
> 
> 时间：2012-04-11T17:30:50.433
> 
> 标签：.net, inno-setup

有没有办法检查 .NET Framework 4 是否已安装并仅在它不在系统中时才安装？

我知道，如何通过检查以下注册表项来确定是否安装了 .NET Framework 4？

```
hasDotnet4 :=
  RegKeyExists(HKEY_LOCAL_MACHINE, 'SOFTWARE\Microsoft\.NETFramework\policy\v4.0'); 
```

如何根据上述检查有条件地运行 .NET Framework 4 安装？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-11T17:43:25.170

您可以做的最简单的事情是使用[`Check`](http://jrsoftware.org/ishelp/topic_scriptcheck.htm)参数，它允许您控制是否将提取该部分中的某个文件，或者是否将执行[`[Files]`](http://jrsoftware.org/ishelp/topic_filessection.htm)该部分中的某个程序。[`[Run]`](http://jrsoftware.org/ishelp/topic_runsection.htm)以下脚本代码显示了它在 .NET Framework 4 的有条件安装中的用法：

```
[Files]
Source: "dotNetFx40_Full_setup.exe"; DestDir: {tmp}; \
  Flags: deleteafterinstall; Check: FrameworkIsNotInstalled

[Run]
Filename: "{tmp}\dotNetFx40_Full_setup.exe"; Check: FrameworkIsNotInstalled

[Code]

function FrameworkIsNotInstalled: Boolean;
begin
  Result :=
    not RegKeyExists(
      HKEY_LOCAL_MACHINE, 'SOFTWARE\Microsoft\.NETFramework\policy\v4.0');
end; 
```

# php - 注册表单 - 检查是否输入了数据 ($_SERVER['PHP_SELFf'])

> ID：10110983
> 
> 赞同：2
> 
> 时间：2012-04-11T17:31:09.947
> 
> 标签：php

我想做的是，

1.  用户来到注册表。
2.  填好，按回车，注册继续。
3.  如果他不填写，则回显 Data Missing。

我被困在哪里，

1.  使用 isset，它会在第一次访问时回显 Data Missing，这是不应该发生的。

有什么建议么？

我不是在寻找任何代码，因为我想自己学习它。只是这个想法就行了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T17:33:34.283

在第一次加载表单时，检查内容`$_SERVER['REQUEST_METHOD']`

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
  // Verify the form has been filled in 
  // If any are missing, display missing data message
  // and display the form again
}
else {
  // Just display the form for the first time
} 
```

我还建议阅读[post-redirect-get 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)，其中您从一个脚本中显示表单，该脚本本身不进行表单处理。表单发布到另一个处理程序脚本（而不是返回到自身），该脚本执行所有验证和操作，最后重定向到新位置或返回到错误或不完整数据的原始表单。

阅读有关[`$_SERVER`超全局数组](http://php.net/manual/reserved.variables.server.php)的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:36:44.203

你能把“动作”代码放在另一个页面吗？

这就是我通常应该做的，主要是为了防止用户在页面刷新时重新提交数据，但这也可以解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T17:43:03.767

或者，您可以考虑[PHP 上传 - 为什么 isset($_POST['submit']) 始终为 FALSE](https://stackoverflow.com/questions/3337682/php-upload-why-isset-postsubmit-is-always-false)，其中他们对 isset 函数提出了一些有效观点。

# hibernate - 休眠执行更新性能

> ID：10110985
> 
> 赞同：1
> 
> 时间：2012-04-11T17:31:16.230
> 
> 标签：hibernate, orm, jdbc

我正在比较旧方式和使用 Hibernate 之间的数据库“更新”性能。

这是我的数据库结构：文档 -> 代码 -> Code_Details。父表和子表之间存在一对多的关系。

现在我有大约 850 个 Code_Details 条目需要在数据库中更新。

下面是旧方法，它的执行速度是原来的两倍：

```
public void executeDBUpdate(int status1, int status2, int status3){
...
...
java.sql.Statement statement = connection.createStatement();
statement.executeUpdate("update Code_Details set status1="+status1+", status2"+=status2+", status3="+status3");

...
} 
```

以下是休眠版本：

```
public void executeDBUpdate(int status1, int status2, int status3){
...
...
Query query = session.createQuery("update Code_Details set status1=:status1,   status2=:status2,status3=:status3);          
query.setParameter("status", status_);
        query.setParameter("status1",status1);
        query.setParameter("status2",status2);
        query.setParameter("status3",status3); 
        query.executeUpdate();
        HibernateUtils.commitTransaction("emscribedx");

...
} 
```

请注意，在这两个版本中，我的“executeDBUpdate(int,int,int)”方法被调用了 850 次以执行每个数据库更新。

以旧方式执行这 850 次更新的总时间为：

```
954 milliseconds 
```

使用 Hibernate 执行相同的 850 次更新的总时间是：

```
1979 milliseconds 
```

我将其分解并注意到 Hibernate 版本中的大部分时间都在“query.executeUpdate()”-> 954 毫秒和“hibernateTransaction.commit()”-> 750 毫秒。

执行大量更新时如何提高 Hibernate 性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T00:19:35.830

好吧，我现在在同一个事务中调用了 850 次“query.executeUpdate()”，它确实减少了处理时间。所以基本上“query.executeUpdate()”被调用了 850 次，但 session.commit() 只被调用了一次。

# adb - 为什么不能 ecilpse 连接到我的 Android 设备？

> ID：10110995
> 
> 赞同：1
> 
> 时间：2012-04-11T17:31:51.460
> 
> 标签：adb

我做了一些搜索并找到了建议的解决方案，但没有任何效果。当我尝试在手机上运行我的 Android 程序时，出现以下错误：

```
2012-04-11 10:25:00 - Android Cheater Physics] Android Launch!
[2012-04-11 10:25:00 - Android Cheater Physics] Connection with adb was interrupted.
[2012-04-11 10:25:00 - Android Cheater Physics] 0 attempts have been made to reconnect.
[2012-04-11 10:25:00 - Android Cheater Physics] You may want to manually restart adb from the Devices view. 
```

重新启动 adb 给我这个错误：

```
[2012-04-11 10:05:40 - ddms]Failed to initialize Monitor Thread: Unable to establish loopback connection
[2012-04-11 10:08:46 - DeviceMonitor]Adb connection Error:An existing connection was forcibly closed by the remote host
[2012-04-11 10:08:46 - Logcat]An existing connection was forcibly closed by the remote host
java.io.IOException: An existing connection was forcibly closed by the remote host
    at sun.nio.ch.SocketDispatcher.read0(Native Method)
    at sun.nio.ch.SocketDispatcher.read(Unknown Source)
    at sun.nio.ch.IOUtil.readIntoNativeBuffer(Unknown Source)
    at sun.nio.ch.IOUtil.read(Unknown Source)
    at sun.nio.ch.SocketChannelImpl.read(Unknown Source)
    at com.android.ddmlib.AdbHelper.executeRemoteCommand(AdbHelper.java:395)
    at com.android.ddmlib.Device.executeShellCommand(Device.java:284)
    at com.android.ddmuilib.logcat.LogPanel$3.run(LogPanel.java:527)

[2012-04-11 10:08:47 - DeviceMonitor]Connection attempts: 1
[2012-04-11 10:09:18 - DeviceMonitor]Adb connection Error:An existing connection was forcibly closed by the remote host 
```

我也尝试取消选中并重新检查调试器。我在学校的电脑上，还没有机会在我的家用电脑上试用。虽然它以前工作过，但也许防火墙现在阻止了它或其他什么？有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T01:07:21.383

去**DDMS**，==>**重置 adb** ==>**重启**Eclipse

![在此处输入图像描述](../Images/be188bd7390c961fa5fd7bae6945aac8.png)

# ruby-on-rails - 未初始化的常量 ApplicationController::Bitly

> ID：10110998
> 
> 赞同：0
> 
> 时间：2012-04-11T17:31:58.640
> 
> 标签：ruby-on-rails, gem

我安装了 bitly gem，并在我的 ApplicationController 中设置它以使用版本 3 的 API，但它抛出了上述错误。这是我的 application_controller.rb 的开头

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  Bitly.use_api_version_3
  before_filter { @cart = find_or_create_cart_from_session }
  before_filter { @bitly = Bitly.new('myusername', 'XXXXXX_API_KEY_XXXXX') } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:40:54.617

你说你已经安装了 Gem，但是你的 Gemfile 中包含了它吗？如果 Gem 不在您的 Gemfile 中，您的应用程序将找不到它，这将导致未初始化的常量错误。