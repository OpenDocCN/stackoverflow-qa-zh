# StackOverflow 问答 11203000-11203999

# ruby-on-rails - Rails 谷歌地图检查点是否在一定半径内

> ID：11203003
> 
> 赞同：0
> 
> 时间：2012-06-26T07:57:34.553
> 
> 标签：ruby-on-rails, google-maps, geolocation

我有一个用户模型，它将用户的纬度和日志存储在纬度和经度字段中。

现在我有一个任意点（纬度和经度）。

现在找到位于该任意点10公里半径内的所有用户的最佳方法是什么。

地理编码器宝石可以吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:52:03.920

地理编码器似乎确实有[你需要](https://github.com/alexreisner/geocoder#distance-and-bearing)的东西。你也可以[自己滚动](http://vinsol.com/blog/2011/08/30/geoproximity-search-with-mysql/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:34:29.910

是的，地理编码器具有此功能，即检查是否有任何点（纬度、经度）位于特定点的特定半径内。

假设模型**X**的任意对象，其字段**latitude** = x 和**longitude** = y 是**obj**

**现在要在距obj的****m 英里**半径范围内找到任何类似的对象，我们可以这样做

 **```
 obj.nearbys(m) 
```

此查询将返回位于 x 英里半径范围内的所有 X，形成 obj**

# tfs - 将单独的项目合并到一个解决方案中，并且不会丢失 TFS 中的历史记录

> ID：11203004
> 
> 赞同：0
> 
> 时间：2012-06-26T07:57:38.400
> 
> 标签：tfs

我在 TFS 中有 2 个单独的解决方案，结构如下图所示：

```
App.A1
 App.A1.Web

App.A2
 App.A2.Core
 App.A2.Web 
```

现在我想将它合并到一个解决方案中。另外，我希望 App.A2.Core 成为 2 个 Web 项目的通用核心项目，所以最后它应该如下所示：

```
App.B
 App.B.Core
 App.B.A1.Web
 App.B.A2.Web 
```

我正在使用 TFS。怎样才能不丢失历史？

是否有以下步骤：

1.  在源代码管理中创建 App.B 解决方案文件夹
2.  将 App.A1.Web、App.A2.Web 和 App.A2.Core 分支到此文件夹
3.  更改名称 App.A1.Web -> App.B.A1.Web，App.A2.Web -> App.B.A2.Web，App.A2.Core -> App.B.Core

一个好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T21:49:10.697

在 TFS2010 中重命名和移动文件会断开历史记录但不会丢失。

因此，如果我将文件夹 A 中的文件 X 移动到文件夹 B，则 X 的历史记录会在 B 中重新开始。但是，它仍会在 A 中（如果您打开查看已删除文件的功能），您可以在其中查看完整的历史记录X。

如果您将文件 X 重命名为 Y，类似的故事。 Y 的历史开始，“删除”的 X 仍然有完整的历史。

这对你来说意味着历史永远不会丢失。

至于你想做什么，这就是我要做的：

1.  将 App.A1 解决方案重新用作 App.B 解决方案
2.  移动所有 App.A2 项目以使用 App.A1/B 解决方案
3.  删除 App.A2 解决方案

# php - 将数组分成更小的部分？

> ID：11203008
> 
> 赞同：0
> 
> 时间：2012-06-26T07:57:47.290
> 
> 标签：php

数据以单个长数组的形式来自 Wordpress 元框。

我在 metabox 中插入的数据如下所示：

```
Rhine Riesling1|0,75 l|9,50 &euro

Rhine Riesling2|0,75 l|9,50 &euro

Rhine Riesling3|0,75 l|9,50 &euro

Rhine Riesling4|0,75 l|9,50 &euro 
```

最终输出应如下所示：

```
<ul class="listmenuitems" id="listingmenu_1">
    <li><p>Rhine Riesling1 <span>0,75 l</span></p> <span class="listmenuprice">9,50 &euro;</span></li>
    <li><p>Rhine Riesling2 <span>0,75 l</span></p> <span class="listmenuprice">9,50 &euro;</span></li>
    <li><p>Rhine Riesling3 <span>0,75 l</span></p> <span class="listmenuprice">9,50 &euro;</span></li>
    <li><p>Rhine Riesling4 <span>0,75 l</span></p> <span class="listmenuprice">9,50 &euro;</span></li>
</ul> 
```

考虑到分隔符，我将如何将数组切成小块`|`，然后循环遍历它以创建正确格式的数组`<li><p>`？

我正在阅读php explode atm。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T08:03:43.303

```
list($name,$content,$price) = explode("|",$line) 
printf('<li><p>%s<span>%s</span></p> <span class="listmenuprice">%s</span></li>',$name,$content,$price) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:01:51.370

您可以使用 PHP 爆炸命令。 [http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

在每个条目调用上循环遍历您的数组：explode("|", $entry); 然后你可以像这样打印出你想要的：

```
$input_arr[];
echo '<ul class="listmenuitems" id="listingmenu_1">';
for($i=0;i<sizeof($input_arr);$i++) {

    $e = explode("|",$input_arr[$i]);
    echo "<li><p>" . $e[0] . "<span>" . $e[1] . "</span></p> <span class=\"listmenuprice\">" . $e[2] . "</span></li>";

} 
```

请注意，有错误检查，并且假设您有一个完整且格式良好的数组输入。

更新以添加 foreach ;) 如果你喜欢 foreach 循环......

```
$input_arr[];
echo '<ul class="listmenuitems" id="listingmenu_1">';
foreach($input_arr as $i) {

    $e = explode("|",$i);
    echo "<li><p>" . $e[0] . "<span>" . $e[1] . "</span></p> <span class=\"listmenuprice\">" . $e[2] . "</span></li>";

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-26T08:02:03.473

假设你的数组是

```
$metabox; 
```

然后

```
echo '<ul class="listmenuitems" id="listingmenu_1">';
foreach($metabox as $val)
{
$petabox=explode("|",$val);
echo '<li><p>'.$petabox[0].'<span>'.$petabox[1].'</span></p> <span class="listmenuprice">'.$petabox[2].'</span></li>';
}
echo '</ul>'; 
```

# c - 使用运算符进行整数提升 <<

> ID：11203015
> 
> 赞同：10
> 
> 时间：2012-06-26T07:58:10.057
> 
> 标签：c, integer-promotion

类似于问题[Bitshift and integer Promotion？](https://stackoverflow.com/questions/3482262/bitshift-and-integer-promotion)，我有一个关于使用左移位时整数提升的问题。

```
unsigned int test(void)
{
  unsigned char value8;
  unsigned int result;

  value8 = 0x12;
  result = value8 << 8;
  return result;
} 
```

**在这种情况下， value8 将首先提升为 unsiged int 还是特定于实现？**

> 6.5.7 位移位运算符*... 3 Sematics ...*
> 整数提升在每个操作数上执行。结果的类型是提升的左操作数的类型。如果右操作数的值为负数或大于或等于提升的左操作数的宽度，则行为未定义。

它说*“对每个操作数执行整数提升”。*，但是这里的推广规则是什么？

我认为它应该是`convert to int if lesser rank than int`，但我找不到它。

我问这个，因为一个编译器（Renesas nc30wa）没有升级为 int，所以我的样本的结果总是 0。

在这个平台上，char 为 8 位宽，int 为 16 位。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-26T08:07:28.880

短语“整数促销”是一个*非常*具体的东西，可以在（对于 C99）部分找到`6.3.1.1 Booleans, characters, and integers`：

> 如果 an`int`可以表示原始类型的所有值，则将该值转换为`int`; 否则，将其转换为`unsigned int`. 这些被称为整数促销。整数提升不会改变所有其他类型。

因此，假设您`unsigned char`可以在 中举行`int`，它将被提升为`int`。在那些稀有`unsigned char`的和a一样宽的平台上`int`，它会升级为a `unsigned int`。

这在 C11 中仅略有改变：

> 如果 an`int`可以表示原始类型的所有值（受宽度限制，对于位域），则该值将转换为`int`; 否则，将其转换为`unsigned int`. 这些被称为整数促销。整数提升不会改变所有其他类型。

如果一个特定的编译器不遵循这种行为，那么它就不是真正的符合。但是，鉴于您列出的编译器是针对嵌入式系统的，这并不奇怪。

许多是为特定目的而构建的，并且一致性在要求列表中并不总是很高。可能有编译器标志可以使其更符合标准。

* * *

查看您的*特定*环境，`M16C Series,R8C Family C Compiler Package V.5.45 C Compiler`在 section `2.1.4 nc30 Command Line Options`， subsection中有`f. Generated code modification options`：

> **`-fextend_to_int`, `-fETI`:**`char`将-type 数据扩展为该类型后执行操作`int`。根据 ANSI 标准进行扩展。

尽管我怀疑`-fansi`可能是一个更好的选择，因为它还涵盖了其他一些内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T08:06:19.400

`value8`被提升为`int`，假设 的转换排名`unsigned char`低于 的转换排名`int`（通常在大多数平台上都是这种情况）。

整数的转换等级在 C99 的 6.3.1.1 中描述。

请注意，某些编译器默认禁用整数提升规则。例如，MicroChip 编译器 MPLAB C18。在编译器的文档中查找 ISO 一致性。

# android - 如何在点击另一个活动时制作警报对话框

> ID：11203017
> 
> 赞同：0
> 
> 时间：2012-06-26T07:58:12.697
> 
> 标签：android, eclipse, android-alertdialog

我尝试制作 alertdialog 以便单击时会显示另一个活动，但这不起作用。这是我的代码：

```
protected void onListItemClick(ListView l, View v, int position, long id) {

    final Entity_Brand brand = adapterBrand.getItem(position);

    CharSequence[] items = { "Cross Country(XC)", "All Mountain(AM)",
            "Free Ride(FR)", "DownHill(DH)", "DirtJump(DJ)", "Road Bike" };
    AlertDialog.Builder builder = new AlertDialog.Builder(
            Brand_ListView_Activity.this);
    builder.setIcon(R.drawable.icon_alert);
    builder.setTitle(brand.getNama_brand());
    builder.setItems(items, new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int item) {
            switch (item) {
            case 0:
                Toast.makeText(Brand_ListView_Activity.this,
                        R.layout.test, Toast.LENGTH_LONG).show();
                break;
            }
        }
    });
    AlertDialog alert = builder.create();
    alert.show();
} 
```

我真的很需要帮助。太感谢了 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:16:23.583

```
Dialog d = new Dialog(this);
d.setContentView(R.layout.your_layout);
d.show(); 
```

在哪里引用你的活动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:05:09.647

我猜你想创建一个[自定义对话框](http://developer.android.com/guide/topics/ui/dialogs.html#CustomDialog)

# function - Application.MacroOptions 和错误 1004

> ID：11203020
> 
> 赞同：3
> 
> 时间：2012-06-26T07:58:16.777
> 
> 标签：function, excel, user-defined-functions, vba

`CalculateHours(work_hour, rest_hour)`我想在像 Works.xla 这样的插件中向 Excel VBA 注册一种函数

我尝试使用`Application.MacroOptions`来注册该功能。以下代码在一个`Class`文件中，函数在另一个模块文件中。当我们打开 Excel 和插件时，它们会加载。

**代码：**

```
Private Function AddFunctions()    
    With MyFunction       
        Application.MacroOptions .Name, _
            .Description, , , , , .Category, , , .HelpFilePath                
    End With    
End Function 
```

**期待：**

我想获得参数帮助，Excel 函数向导中的函数描述作为其他内置函数。使用帮助按钮链接到我的帮助文件。

**结果：**

```
Error number: 1004 Application-defined or object-defined error 
```

或者

```
Method "MacroOptions" of object "_Application" failed 
```

有什么（或一切）错了吗？

我有 10 个函数，每次加载插件时都需要将它们自动添加到 Excel 函数向导中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-07-12T21:04:23.370

2016 年 7 月 12 日，在遵循一些帖子的建议并做了一些其他无意义的事情之后，我发现如果 Application.MacroOptions Description:=FuncDesc 超过 255 个字符，则会发生此错误。所以基本上不要对用户定义函数的描述过于冗长，或者只是添加一个

如果 Len(FuncDesc) > 255 那么关于运行时错误 '1004' 的可怕警告消息 End if

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-04T08:21:08.950

我知道这个问题很老，但会发布我对此错误的解决方案，因为它可能很常见并且异常消息没有提供信息。
我通过将宏/UDF 持有人工作簿名称传递给“宏”参数来修复它，例如“'Workbook.xls(x/m/b)'!Macro/UDF_Name”：

```
' Adding a macro from Personal.xlsb
Application.MacroOptions _
                             Macro:="'PERSONAL.xlsb'!Macro/UDF_Name", _
                             Description:="Description", _
                             ArgumentDescriptions:=ArgumentsDescription() 
```

# ruby - 机架：找不到命令

> ID：11203024
> 
> 赞同：7
> 
> 时间：2012-06-26T07:58:43.317
> 
> 标签：ruby, ubuntu, rubygems, rack, rackup

我目前正在开发一个需要 ubuntu 11.04 上的 rackup 命令的项目，但我收到一个错误：`-bash: rackup: command not found`. 我已经安装了 rails 和 rack ruby​​ gems。

对此的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-26T08:03:48.710

如果您使用的是 bundler，那么也许您需要使用 bundle exec

```
bundle exec rackup 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:32:43.723

看起来rackup真的是rackup1.8。之后问题就解决了！任何遇到类似问题的人，一定要尝试 rackup[version] 和 rackup。

# iphone - UITableView 中的 UIWebView 变慢

> ID：11203026
> 
> 赞同：0
> 
> 时间：2012-06-26T07:58:50.840
> 
> 标签：iphone, ios, uitableview, uiwebview

我得到 `UITableView`了例如 5 个部分。每个部分的 headerViews 是`UIWebViews`（显示 html 格式的文本）。

滚动到以前不在窗口中的部分标题时。html 内容为空，直到滚动动画停止。停止`UIWebView`加载其内容后。

是否可以像标签一样滚动查看文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:41:10.257

您可以`coretext`用于此目的。就像使用`UILabel`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:41:47.657

你应该阅读这篇文章： http: [//nickharris.wordpress.com/2010/06/17/fast-uitableviewcell-with-a-uiwebview/](http://nickharris.wordpress.com/2010/06/17/fast-uitableviewcell-with-a-uiwebview/)

它很好地解释了您的问题，并且还附带了一些可以帮助您的代码！

[编辑]还有[这个](http://gavrix.wordpress.com/2011/04/28/uiwebview-inside-uitableviewcell/)，这里有一个[github 演示](https://github.com/gavrix/UISynchedWebView-demo)

# g++ - 使 Qt Creator 生成正确的 .pro 文件，用于在 Windows 上包含 g++ 静态库

> ID：11203027
> 
> 赞同：0
> 
> 时间：2012-06-26T07:58:51.313
> 
> 标签：g++, qt-creator, static-linking, qmake

使用 mingw g++ 时，我在 Windows 7 上的 Qt Creator 中创建和链接静态库时遇到问题。我通过手动破解自动生成的文件找到了一种解决方案，但我不喜欢它。

假设您有一个包含应用程序子项目和库子项目的子目录项目，如下所示。

`parent.pro`

```
TEMPLATE = subdirs
SUBDIRS += \
    utilities \
    program 
```

`utilities.pro`

```
CONFIG += staticlib
TARGET = utilities
TEMPLATE = lib
HEADERS += ...
SOURCES += ... 
```

`program.pro`

```
TEMPLATE = app
INCLUDEPATH += ../utilities/
HEADERS += ...
SOURCES += ... 
```

如果您使用 Qt Creator 内置功能将内部库添加到应用程序，它会在应用程序`.pro`文件中生成以下行：

```
win32:CONFIG(release, debug|release): LIBS += \
    -L$$OUT_PWD/../utilities/release/ -lutilities
else:win32:CONFIG(debug, debug|release): LIBS += \
    -L$$OUT_PWD/../utilities/debug/ -lutilities
else:symbian: LIBS += \
    -lutilities
else:unix: LIBS += \
    -L$$OUT_PWD/../utilities/ -lutilities

INCLUDEPATH += $$PWD/../utilities
DEPENDPATH += $$PWD/../utilities

win32:CONFIG(release, debug|release): PRE_TARGETDEPS += \
    $$OUT_PWD/../utilities/release/utilities.lib
else:win32:CONFIG(debug, debug|release): PRE_TARGETDEPS += \
    $$OUT_PWD/../utilities/debug/utilities.lib
else:unix:!symbian: PRE_TARGETDEPS += \
    $$OUT_PWD/../utilities/libutilities.a 
```

这非常有用，除了它似乎假定名称与自动生成的名称不相关。我的技巧是通过并将最后一段更改为...

```
win32:CONFIG(release, debug|release): PRE_TARGETDEPS += \
    $$OUT_PWD/../utils/release/libutils.a
else:win32:CONFIG(debug, debug|release): PRE_TARGETDEPS += \
    $$OUT_PWD/../utils/debug/libutils.a
else:unix:!symbian: PRE_TARGETDEPS += \
    $$OUT_PWD/../utils/libutils.a 
```

...因此它与 g++ 生成的库名称匹配。

是否有一个设置/定义可以添加到库或应用程序 .pro 文件中，以便名称最终匹配（并且最好适合正在使用的工具链）？执行此步骤是一种常见的刺激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:13:18.543

据我所知，库名称的方式是使用的 QMAKESPEC 的一部分。对于 MingW 来说应该是“win32-g++”。

在 Qt Creator 中，您可以通过选择“工具链”通过项目设置间接更改 QMakeSpec。

# java - 列表的休眠条件

> ID：11203034
> 
> 赞同：3
> 
> 时间：2012-06-26T07:59:19.567
> 
> 标签：java, hibernate, criteria, contains

再会，

我有一个看起来像这样的 Hibernate 映射：

```
public class Item implements Serializable {
      private lond id;
      private String Name;
      private boolean status;
      ...

}

public class ItemHolder  implements Serializable {
      private long id;
      private List<Item> items;
      ...
} 
```

如何查询以获取所有物品持有者的女巫包含我的物品？（有标准）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T08:07:11.643

您只需要加入：

```
Criteria c = session.createCriteria(ItemHolder.class, "itemHolder");
c.createAlias("itemHolder.items", "item");
c.add(Restrictions.eq("item.id", theItemId); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T08:08:49.577

```
Criteria criteria=session.createCriteria(ItemHolder.class);
criteria.createAlias("items", "item"); 
criteria.add(Restrictions.eq("item.Name", "my Item").ignoreCase()); 
```

您可以根据您的要求进行限制：id 或 name..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T08:08:39.160

查询可能类似于：

```
Item loadedItem = ...;
Query query = session.createQuery("from ItemHolder ih where :item in elements(ih.items)");
query.setParameter("item", loadedItem);
List list = query.list(); 
```

# android - 一旦调用完成，如何从堆栈中完全删除活动？

> ID：11203041
> 
> 赞同：0
> 
> 时间：2012-06-26T07:59:56.677
> 
> 标签：android, memory-management

当我启动应用程序时，我的第一个活动的堆大小增加到 10MB，然后当我进入下一个活动时，我的堆大小增加到 37 MB。在第二个活动中，我通过`bitmap.recycle()`单击按钮释放一些内存，因此当单击特定按钮时，堆大小减小到 32MB。现在，当我对第二个活动调用完成时，我的内存大小减少到 16MB，因此暗示它没有完全从堆栈中删除，因为第一个活动的原始内存大小为 10MB。

现在，当我回到第二个活动时，它会出现以下崩溃，表明我在单击按钮时释放的位图没有被重新创建。每次用户进入该活动时，我都会在第二个活动上使用相同的 onCreate 方法，因此它应该再次从 xml 获取位图。

```
06-26 08:45:39.636: E/AndroidRuntime(6265): java.lang.RuntimeException: Canvas: trying to use a recycled bitmap android.graphics.Bitmap@41361ef0 
```

我在这里缺少什么？一旦调用完成，如何从堆栈中完全删除活动？

我尝试在活动一中使用`android:launchMode="singleTop"`and`android:clearTaskOnLaunch="true"``android:launchMode="singleTop" android:noHistory="true"`活动二上

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:24:20.510

为了从系统的应用程序堆栈中删除应用程序，您可以终止它的进程。也许这有帮助？

```
/**************************************************************************************
*   Removes this application from the stack by killing it's process.
**************************************************************************************/
public static final void killProcess()
{
    //get current process id
    int processId = android.os.Process.myPid();

    //tell android to kill this process
    android.os.Process.killProcess( processId );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:01:22.793

一旦调用完成，onDestroy 也将被调用，整个活动将被清除，但即使您想手动尝试某些操作，您也可以尝试清除堆栈或调用垃圾收集器。供你参考 ：

```
// For stack clear
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

// For calling GC
System.runFinalization();
System.exit(0); 
```

# javascript - JS从二进制文件流式传输

> ID：11203042
> 
> 赞同：0
> 
> 时间：2012-06-26T07:59:57.237
> 
> 标签：javascript, streaming, mouse

所以我知道像 SoundManager2 这样的 JavaScript 库能够将音乐“流式传输”到客户端。我说的是“流”

1) 文件存储在服务器上并由应用程序从用户请求中获取 2) 文件像视频一样被“缓冲” 3) 文件然后在一种播放器中为用户播放

据我了解，这对于 MP3 文件来说没有问题，它基本上只是一个（复杂）文件，带有一些标题和基本上是二进制信息。如何为包含例如有关鼠标位置的信息的二进制文件进行这种流式传输。

我的目标是创造一种可能性，将鼠标移动保存在文件中，然后将其作为流播放给其他用户，并提供在鼠标记录中来回切换的可能性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:41:09.650

我会制作一个服务器端脚本，它能够分割你正在谈论的文件。

然后，你会这样称呼它

```
.../file.php?name=mousepositions.json&start=34&length=10 
```

您将在哪里收到零件 34-43。然后您可以显示这些部分，同时获取下一部分

```
.../file.php?name=mousepositions.json&start=44&length=10 
```

在客户端，您可以使用接收到的部分来填充一个数组（或对象），以便您知道哪些部分您已经拥有，哪些是您缺少的。然后，当用户正在寻找时，您可以从本地对象/数组中获取，并且只获取那些丢失的部分。

# regex - Tcl 正则表达式中的反斜杠

> ID：11203043
> 
> 赞同：0
> 
> 时间：2012-06-26T08:00:00.410
> 
> 标签：regex, tcl

关于 TCL 中的正则表达式，如果我使用以下正则表达式：

```
regexp "helloworld\[\\s]+.name." 
```

匹配以下输出：

```
helloworld  (name) 
```

有用。但是我想知道是否需要在“ `\`”前面添加“ `]`”，我看到一些别人的代码，他们没有`]`用“ ”关闭“ `\`”，我想知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:39:31.627

一个原因可能是 Utkanos 解释的，另一个可能是由于 Tcl 特定的行为：该`[`字符在允许命令替换的地方具有特殊含义。观察：

```
% proc foo {} { return y }
% puts x[foo]z
xyz 
```

因此，当您在 Tcl 中使用正则表达式时（通过尝试按字面意思指定它，或在运行时构造等），您必须考虑形成此正则表达式的字符串将如何被 Tcl 处理。

这就是为什么大多数时候你会看到正则表达式的字符直接传递给`regexp`使用花括号分组的命令，`{`并且`}`：它禁止（大部分）Tcl 的替换，因此允许“按原样”编写正则表达式规范，几乎在它的简单的语法，没有任何转义。

但这显然不适用于您想要动态构建规范的情况（例如，将变量的内容嵌入其中）。通常人们使用双引号对正则表达式字符进行分组，因此需要进行特殊转义以防止某些 Tcl 的替换。更干净的方法可能是使用`append`命令构造模式。

更多关于分组的信息在[这里](http://www.tcl.tk/man/tcl8.5/tutorial/Tcl3.html)、[这里](http://www.tcl.tk/man/tcl8.5/tutorial/Tcl4.html)和[这里](http://www.tcl.tk/man/tcl8.5/tutorial/Tcl5.html)。

至于在网上找这本书，[《精通正则表达式》](http://shop.oreilly.com/product/9780596528126.do)通常被认为是这方面*的书*。

作为旁注，在您的特定示例中，根本不需要方括号：在正则表达式中，它们用于创建“字符范围” - 匹配指定范围之外的单个字符的模式， - 在您的情况下，范围仅包含一个（元）字符，定义为匹配输入中的单个空白字符。所以在这种特殊情况下，模式`helloworld\s+.name.`会做得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:56:09.027

不，因为您正在使用`[`它的特殊含义，即定义一个范围。只有当你想匹配一个文字时，你才会用反斜杠转义它`[`。反斜杠用于转义字符，否则会在 REGEXP 中调用特殊行为。

(Javascript)

```
var str = "[hello]";
str.match(/[a-z]+/); //resultant array: ['hello']
str.match(/\[[a-z]+\]/); //resultant array: ['[hello]'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T20:29:55.253

我相信这个表达是你想要的：

```
regexp {helloworld\s+.name.} $the_string 
```

您根本不需要任何方括号。

# java - SMTPAddressFailedException: 550-验证失败

> ID：11203050
> 
> 赞同：1
> 
> 时间：2012-06-26T08:00:22.527
> 
> 标签：java, email, smtp

我正在使用以下代码使用 java 发送电子邮件

```
 function send(){
   String host1 = "domainname";
   String to = "test@domain.com";
   String from="dontreply@domain.com";
   String subject = "test mail";
   String messageText = "test content";
   boolean sessionDebug = false;
   Properties props = System.getProperties();
   props.put("mail.host", host1);
   props.put("mail.transport.protocol", "smtp");
   Authenticator authenticator = new Authenticator();
   Session mailSession = Session.getInstance(props, authenticator);

       mailSession.setDebug(sessionDebug);
           Message msg = new MimeMessage(mailSession);
   msg.setFrom(new InternetAddress(from));
   InternetAddress[] address = {new InternetAddress(to)};
   msg.setRecipients(Message.RecipientType.TO, address);
   msg.setSubject(subject);
   //msg.setSentDate(new Date());
   msg.setContent(messageText,"text/html");
   Transport.send(msg);
   }
   private class Authenticator extends javax.mail.Authenticator implements java.io.Serializable {
    private PasswordAuthentication authentication;

    public Authenticator() {
         String username = "support@domain.com";

        String password = "**********";
        authentication = new PasswordAuthentication(username, password);
    }
    protected PasswordAuthentication getPasswordAuthentication() {
        return authentication;
    }
} 
```

效果很好。但是现在我需要更改发件人地址“someother@domain.com”，并且我必须使用与以前相同的身份验证详细信息发送邮件。如果我只是使用相同的身份验证更改我的发件人地址，则会收到以下错误：

```
exceptionjavax.mail.SendFailedException: Invalid Addresses;
  nested exception is:
    com.sun.mail.smtp.SMTPAddressFailedException: 550-Verification failed for <someother@domain.com>
550-No Such User Here"
550 Sender verify failed 
```

这是否可以发送具有相同身份验证但地址不同的邮件.....

任何人都可以帮助我找到问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:28:04.643

我怀疑有一些配置或策略可以阻止`from`未注册地址的外发邮件。如果您的问题是配置用户可以回复的地址（并且应该与您正在验证的地址不同），那么`reply-to`您可以设置一个标题。

# javascript - JavaScript replace() 方法

> ID：11203051
> 
> 赞同：0
> 
> 时间：2012-06-26T08:00:26.063
> 
> 标签：javascript, function, methods, replace

我想制作一个简单的生成器.. 使用 replace() 方法。好吧，我的问题是替换值

```
 <html>
     <head>
            <meta content="Wordpress V. 3.3.2" name="Generator">
            <meta content="MemoGeek, WGCracker, MG, MemoryGeek, Mu\'min Azad" name="Programmer">
            <meta content="I'm A Developer, Programmer, Photographer, Nerd, Geek, Cracker, Designer, Feel Free To Request" name="About">
            <meta content="MemoGeek, WGCracker, MG, MemoryGeek, Mu\'min Azad" name="Designer">
            <meta content="Http://YouTube.com/WindowsGhostCracker" name="YouTube Channel">
            <meta content="Http://Facebook.com/WGCracker" name="Facebook">
            <meta content="Http://Twitter.com/WGCracker" name="Twitter">
            <meta content="Http://Gplus.to/WGCracker" name="Google Plus">
            <meta content="Http://Gplus.to/WGCracker" name="Google Plus">
            <title>Garbled Javascript Encoder / Decoder</title>
            <link rel="stylesheet" href="jquery-ui.css"> 
            <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js" ></script>
            <script src="jquery-ui-1.8.16-custom.js" ></script>
   </head> 

</div></div>
<div id="home-header"><!-- blank --></div>
<div id="home-page"><!-- blank --></div>
<div id="home-main"><!-- blank --></div>
<div id="home-content">
<div id="crosscol-wrapper" style="display:none;">
<div class="crosscol section" id="crosscol"></div>
</div>
<div id="home-blog-info">
<div class="header section" id="header"><div class="widget Header" id="Header1">
<div id="header-inner">
<div class="titlewrapper">
<h1 class="title">Developer<font color="#0CBAB0"></font>
<font color="#7AEEDD">G</font>
<font color="#924463">a</font>
<font color="#EBB070">r</font>
<font color="#9A0C59">l</font>
<font color="#74DF7E">e</font>
<font color="#2DB2E0">d</font>
<font color="#077EDD"> </font>
<font color="#0BD91C">J</font>
<font color="#ffffff">a</font>
<font color="#7A7BC3">v</font>
<font color="#0E306E">a</font>
<font color="#75709A">S</font>
<font color="#435854">c</font>
<font color="#52CACB">r</font>
<font color="#CE7BE9">i</font>
<font color="#61C47D">p</font> 
<font color="#924463">t</font>
Generator
</h1>
</div>
<div class="descriptionwrapper">
<p class="description"><span>
</span></p>
</div>
</div>
</div></div>
<div class="home-descriptionsec section" id="home-descriptionsec"><div class="widget HTML" id="HTML1">
<div class="widget-content">
<div style="overflow: hidden; width: 10px; height: 12px; position: absolute; filter:alpha(opacity=0); -moz-opacity:0.0; -

khtml-opacity: 0.0; opacity: 0.0;" id="icontainer">

</div>
<div>
<script language="JavaScript" type="text/javascript">
var thisString;
function startText() {
thisString = document.myjsg.box1.value;
thisString = thisString.replace(/A/g, "\\x41");
thisString = thisString.replace(/B/g, "\\x42");
thisString = thisString.replace(/C/g, "\\x43");
thisString = thisString.replace(/D/g, "\\x44");
thisString = thisString.replace(/E/g, "\\x45");
thisString = thisString.replace(/F/g, "\\x46");
thisString = thisString.replace(/G/g, "\\x47");
thisString = thisString.replace(/H/g, "\\x48");
thisString = thisString.replace(/I/g, "\\x49");
thisString = thisString.replace(/J/g, "\\x4a");
thisString = thisString.replace(/K/g, "\\x4b");
thisString = thisString.replace(/L/g, "\\x4c");
thisString = thisString.replace(/M/g, "\\x4d");
thisString = thisString.replace(/N/g, "\\x4e");
thisString = thisString.replace(/O/g, "\\x4f");
thisString = thisString.replace(/P/g, "\\x50");
thisString = thisString.replace(/Q/g, "\\x51");
thisString = thisString.replace(/R/g, "\\x52");
thisString = thisString.replace(/S/g, "\\x53");
thisString = thisString.replace(/T/g, "\\x54");
thisString = thisString.replace(/U/g, "\\x55");
thisString = thisString.replace(/V/g, "\\x56");
thisString = thisString.replace(/W/g, "\\x57");
thisString = thisString.replace(/X/g, "\\x58");
thisString = thisString.replace(/Y/g, "\\x59");
thisString = thisString.replace(/Z/g, "\\x5a");
/* 
Start Of Small Letters
*/
thisString = thisString.replace(/a/g, "\\x61");
thisString = thisString.replace(/b/g, "\\x62");
thisString = thisString.replace(/c/g, "\\x63");
thisString = thisString.replace(/d/g, "\\x64");
thisString = thisString.replace(/e/g, "\\x65");
thisString = thisString.replace(/f/g, "\\x66");
thisString = thisString.replace(/g/g, "\\x67");
thisString = thisString.replace(/h/g, "\\x68");
thisString = thisString.replace(/i/g, "\\x69");
thisString = thisString.replace(/j/g, "\\x6a");
thisString = thisString.replace(/k/g, "\\x6b");
thisString = thisString.replace(/l/g, "\\x6c");
thisString = thisString.replace(/m/g, "\\x6d");
thisString = thisString.replace(/n/g, "\\x6e");
thisString = thisString.replace(/o/g, "\\x6f");
thisString = thisString.replace(/p/g, "\\x70");
thisString = thisString.replace(/q/g, "\\x71");
thisString = thisString.replace(/r/g, "\\x72");
thisString = thisString.replace(/s/g, "\\x73");
thisString = thisString.replace(/t/g, "\\x74");
thisString = thisString.replace(/u/g, "\\x75");
thisString = thisString.replace(/v/g, "\\x76");
thisString = thisString.replace(/w/g, "\\x77");
thisString = thisString.replace(/x/g, "\\x78");
thisString = thisString.replace(/y/g, "\\x79");
thisString = thisString.replace(/z/g, "\\x7a");
/*
Numbers
*/
thisString = thisString.replace(/0/g, "\\x30");
thisString = thisString.replace(/1/g, "\\x31");
thisString = thisString.replace(/2/g, "\\x32");
thisString = thisString.replace(/3/g, "\\x33");
thisString = thisString.replace(/4/g, "\\x34");
thisString = thisString.replace(/5/g, "\\x35");
thisString = thisString.replace(/6/g, "\\x36");
thisString = thisString.replace(/7/g, "\\x37");
thisString = thisString.replace(/8/g, "\\x38");
thisString = thisString.replace(/9/g, "\\x39");
/*
Unicodes, Tags And More
*/
thisString = thisString.replace(/\@/g, "\\x40");
thisString = thisString.replace(/\`/g, "\\x60");
thisString = thisString.replace(/\!/g, "\\x21");
thisString = thisString.replace(/\"/g, "\\x22");
thisString = thisString.replace(/\#/g, "\\x23");
thisString = thisString.replace(/\$/g, "\\x24");
thisString = thisString.replace(/\%/g, "\\x25");
thisString = thisString.replace(/\&/g, "\\x26");
thisString = thisString.replace(/\"/g, "\\x27");
thisString = thisString.replace(/\(/g, "\\x28");
thisString = thisString.replace(/\)/g, "\\x29");
document.myjsg.box2.value=thisString;
}

</script>
<script language="JavaScript" type="text/JavaScript">
<!--
function combine(form) {
form.field3.value = form.box2.value + form.subject.value;
}
//-->
</script>
<form id="myjsg" name="myjsg">
<textarea name="box1" cols="40"></textarea>
<input type="hidden" name="subject" id="subject" value="">                             

   <br>

<input onClick="startText();combine(this.form);" type="button" value="    Encode    "> 
  <br>
                     <input name="box2" size="70" type="hidden" value="">
  <textarea name="field3" cols="40"></textarea>
</form>
</div>

</body>
</html> 
```

和 jquery-ui-1.8.16-custom：

```
(function() {
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = '//pagead2.googlesyndication.com/pagead/js/google_top.js';
var head = document.getElementsByTagName('head')[0];
if (head) {
head.appendChild(script);
}})(); 
```

这个html文件有什么问题是“\”反斜杠吗？当我放一个字符串示例时它的工作原理

```
thisString = thisString.replace(/Q/g, "\\x51"); 
```

结果是：\x51

我感谢任何帮助或调试

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:42:53.583

只是一个注释——大量重复的代码可以用一个基于[String.prototype.charCodeAt](http://es5.github.com/#x15.5.4.5)的简单函数代替：

```
function replaceWithCode(s) {
  var t = '';
  for (var i=0, iLen=s.length; i<iLen; i++) {
    t +='\\x' + s.charCodeAt(i).toString(16);
  }
  return t;
}

replaceWithCode('A9$'); // \x41\x39\x24 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T08:04:51.753

你不需要逃避斜线；"\x51" 就足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T08:05:21.690

我猜您在`m`这里缺少多行模式修饰符：

```
thisString = thisString.replace(/Q/mg, "\\x51"); 
```

# python - 在 setup.py (setuptools) 中包含静态数据

> ID：11203054
> 
> 赞同：8
> 
> 时间：2012-06-26T08:00:31.747
> 
> 标签：python, setuptools

我目前正在使用 setuptools 对 setup.py 进行编码。我想将静态数据（不是 Python 模块）复制到站点包。

问题是，当前文件夹层次结构如下所示：

```
setup.py
src
    Pure Python Module
skeleton
    example
        __init__.py
    resources
        static
            error.css
            example.css
            logo_shadow.png
        template
            error.html
            example.html
    server.tmplt 
```

我想在**维护文件夹结构/层次结构**的同时将骨架目录复制到站点包，但是我应该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:08:07.687

我通过单独处理静态文件解决了这个问题，而不是使用 setuptools。

```
from sys import argv
try:
    if argv[1] == 'install':
        from os.path import join
        from distutils.sysconfig import get_python_lib
        from shutil import copytree
        OrigSkeleton = join('src', 'skeleton')
        DestSkeleton = join(get_python_lib(), 'cumulus', 'skeleton')
        copytree(OrigSkeleton, DestSkeleton)

except IndexError: pass 
```

# java - PHP-Java Bridge vs RESTful WebService：关于性能哪个更好？

> ID：11203055
> 
> 赞同：2
> 
> 时间：2012-06-26T08:00:34.583
> 
> 标签：java, php, performance, php-java-bridge

我们有一个 drupal (PHP) CMS 系统，它很快就超出了最初的需求。此后构建了一个 Java 后端，它现在可以完成大部分功能。这两个通讯使用 RESTful WS。两个系统都运行在同一台服务器上，所以这是一个本地 WS 调用。尽管这是一个本地呼叫，但感觉太笨拙了，而且我觉得我们不应该真正使用 Web 服务来进行这种集成。

我相信 php-java 桥的性能会更好（http://php-java-bridge.sourceforge.net/pjb/），因为他们声称比通过 SOAP 进行本地 RPC 调用快 50 倍。我看到 php-java 桥使用 XML 流，所以我认为性能会类似于 XML-RPC。

我知道回答这个问题的最佳方法是编写 POC，但由于时间限制（截止日期紧迫），这是不可能的。所以我的问题是，是否有人对这些进行了基准测试，或者任何人都可以提供有关他们与这两种技术相关的经验的见解。特别是与性能有关的信息。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:43:44.143

一些想法

1.  您的 RESTFul WS 是否以 JSON 格式公开资源？与 XML 相比，JSON 格式处理起来更轻、更快
2.  请记住 SOAP 通过给定的 XSD 进行验证，也许这个框架没有使用 XSD 来执行验证（这可能是有风险的）
3.  上面的解决方案符合 JSR 223，即脚本引擎 JSR - 这很好 - 如果需要，您可以用其他供应商替换它

4.  我看到它使用了一个快速的 CGI HTTP 服务器——据我所知，这是一个高度可扩展且具有非常好的 CGI 性能的服务器。

听起来这可能是一个很好的候选 - 与 SOAP 相比，该协议进行了优化（我有 SOAP 经验）。

总而言之 - 如果您的 RESTFul Web 服务不能公开 SOAP - 我会考虑这种方法，但是您需要验证 drupal 是否可以与 FastCGI 一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-22T10:04:36.053

我也遇到过类似的情况，但最终决定使用 JSON 和 REST 而不是 php-java 桥来实现。降低复杂性和更多地重用作为 REST 公开的服务的重要性超过了对更好性能的需求。

# c# - WMEncoder 在一次迭代后抛出 OutOfMemoryException

> ID：11203057
> 
> 赞同：3
> 
> 时间：2012-06-26T08:00:51.763
> 
> 标签：c#, .net, out-of-memory, encoder, windows-media-encoder

我正在使用 WMEncoder 进行屏幕录制。
第一次一切正常，
但第二次`Start()`方法抛出我`OutOfMemoryException`：

```
System.OutOfMemoryException was caught
  HResult=-2147024882
  Message=Not enough storage is available to complete this operation. 
```

我的代码看起来像这样，它在 .Net4 上：

```
// Initialize encoder and set recording parameters
mEncoder = new WMEncoder();
SetRecordingParams(); // If it's relevant I can attach this function

// Set the output file.
mEncoder.EnableAutoArchive = true;
mEncoder.AutoIndex = true;
mEncoder.File.LocalFileName = tempRecFile;

// Start the encoding process.
mEncoder.PrepareToEncode(true);
mEncoder.Start();

// If currently recording, stop recording
if (mEncoder != null &&
    mEncoder.RunState != WMENC_ENCODER_STATE.WMENC_ENCODER_STOPPED)
{

    // Stop recording
    mEncoder.Stop();
}

// Releasing Com object
if (mEncoder != null)
{
    Marshal.FinalReleaseComObject(mEncoder);
    mEncoder = null;
} 
```

帮我！

# 更新

```
 private void SetRecordingParams()
        {
            // Create a source group collection object from the WMEncoder object.
            srcGrpColl = mEncoder.SourceGroupCollection;

            // Add a source group named SG1 to the collection.
            // Create a source object for each type of multimedia content
            // in the source group.
            srcGrp = (IWMEncSourceGroup2)srcGrpColl.Add("SG_1");
            srcVideo = (IWMEncVideoSource2)srcGrp.AddSource(WMENC_SOURCE_TYPE.WMENC_VIDEO);
            srcVideo.SetInput("ScreenCap://ScreenCapture1", "", "");

            // Create a profile collection object from the WMEncoder object.
            mEncoder.ProfileCollection.ProfileDirectory = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
            mEncoder.ProfileCollection.Refresh();
            proColl = mEncoder.ProfileCollection;

            // Create a profile object
            IEnumerator profEnum = proColl.GetEnumerator();
            while (profEnum.MoveNext())
            {
                profile = (IWMEncProfile)profEnum.Current;
                if (profile.Name == "Screen Recording")
                {
                    // Load profile
                    newProfile = new WMEncProfile2();
                    newProfile.LoadFromIWMProfile(profile);

                    audience = newProfile.get_Audience(0);

                    audience.set_VideoFPS(0, paramMaps.fpsMapping[fpsKey] * 1000);
                    audience.set_VideoKeyFrameDistance(0, keyFrameInt * 1000);
                    audience.set_VideoWidth(0, Screen.PrimaryScreen.Bounds.Width * paramMaps.imageQualityMapping[qualityRatioKey] / 100);
                    audience.set_VideoHeight(0, Screen.PrimaryScreen.Bounds.Height * paramMaps.imageQualityMapping[qualityRatioKey] / 100);

                    // Set profile language to client machine's locale.
                    // When recording is done this way, it will assume server's locale when extracted from the DB.
                    // This enables us to know which locale should be used for the file merge.
                    // We have found that when profile is set to the same language as user's locale, the recording
                    // has a "flexible" language definition.
                    int langCount = newProfile.get_LanguageCount(WMENC_SOURCE_TYPE.WMENC_VIDEO, 0);
                    // Remove all existing language definitions from profile
                    for (int i = 0; i < langCount; i++)
                    {
                        newProfile.RemoveLanguage(WMENC_SOURCE_TYPE.WMENC_VIDEO, 0, newProfile.get_Language(WMENC_SOURCE_TYPE.WMENC_VIDEO, 0, i));
                    }
                    // Add current locale as profile language.
                    int lcid = Thread.CurrentThread.CurrentCulture.LCID;
                    newProfile.AddLanguage(WMENC_SOURCE_TYPE.WMENC_VIDEO, 0, lcid);

                    // Specify this profile object as the profile to use in source group.
                    srcGrp.set_Profile(newProfile);
                }
            }
            mEncoder.VideoComplexity = WMENC_VIDEOCOMPLEXITY.WMENC_COMPLEXITY_LEVEL20;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T10:26:51.680

微软显然不再支持 WMEncoder。我建议查看使屏幕捕获非常容易的表达式编码器 - [http://www.microsoft.com/expression/products/Encoder4_Overview.aspx](http://www.microsoft.com/expression/products/Encoder4_Overview.aspx)。它为您省去了编组和处理 COM 的麻烦。

# c++ - 如何在 DirectShow 中将捕获的视频/音频渲染并保存为自定义文件/过滤器格式？

> ID：11203063
> 
> 赞同：0
> 
> 时间：2012-06-26T08:01:13.723
> 
> 标签：c++, com, directshow

基本上，我想捕获音频/视频。通过 mp4 多路复用器运行它并将其保存到磁盘上的文件中。在我使用 ICaptureGraphBuilder2 之前，但在保存为自定义格式时似乎无法使用。

到目前为止我的代码，

我列举了视频/音频设备。在此示例中，我仅尝试捕获音频。我得到了正确的设备并使用 GetPin 枚举过滤器引脚以获取其输出引脚。

```
hr = pMoniker2->BindToObject(0, 0, IID_IBaseFilter, (void**)&pSrc2);
hr = pGraph->AddFilter(pSrc2, L"AudioCap");

hr = GetPin(pSrc2, PINDIR_OUTPUT, &outPin); 
```

这是自定义过滤器，一个 MP4 多路复用器。它正确加载，我可以获得输入引脚并将其与我的输出引脚连接。到目前为止，一切都很好。

```
HRESULT hr = CreateObjectFromPath(TEXT("c:\\filters\\mp4mux.dll"), clsid, &pUnk);
if (SUCCEEDED(hr))
{
    IBaseFilterPtr pFilter = pUnk;
    HRESULT hr = pGraph->AddFilter(pFilter, L"Private Filter");
    hr = GetPin(pFilter, PINDIR_INPUT, &inPin);
}

hr = pGraph->Connect(outPin, inPin); 
```

这是我迷路的地方，我不知道如何采取下一步渲染并将输出保存到磁盘上的文件中。因此，对于后续步骤的任何帮助将不胜感激，在此先感谢！

**编辑：文件接收器代码**

```
AM_MEDIA_TYPE mType;

mType.majortype = MEDIATYPE_Video;
mType.subtype = MEDIASUBTYPE_H264;
mType.bFixedSizeSamples = FALSE;
mType.bTemporalCompression = TRUE;
mType.lSampleSize = 0;
mType.formattype = FORMAT_None;
mType.pUnk = NULL;
mType.cbFormat = 0;
mType.pbFormat = NULL;
//Not 100% sure about the setup of the media format.

IBaseFilter * iFiltera = NULL; 
IFileSinkFilter* iFilter = NULL; 
IGraphBuilder *pGraph;

hr = pMoniker2->BindToObject(0, 0, IID_IBaseFilter, (void**)&pSrc2); //audio capture
hr = CoCreateInstance(CLSID_FilterGraph, NULL, CLSCTX_INPROC_SERVER,  IID_IGraphBuilder, (void**)&pGraph);
hr = CoCreateInstance(CLSID_FileWriter, NULL, CLSCTX_INPROC_SERVER, IID_IBaseFilter, (void**)&iFiltera);

hr = pBuild->SetFiltergraph(pGraph);

hr = pGraph->AddFilter(pSrc2, L"AudioCap");
hr = GetPin(pSrc2, PINDIR_OUTPUT, &outPin); //ADDED

hr = pGraph->AddFilter(iFiltera, L"FileWriter");
hr = iFiltera->QueryInterface(IID_IFileSinkFilter, (void**)&iFilter);

iFilter->SetFileName((LPCOLESTR)"c:\\wav\\tester.mp4", NULL); //UPDATED mType set to NULL

HRESULT hr = CreateObjectFromPath(TEXT("c:\\filters\\mp4mux.dll"), clsid, &pUnk);

IBaseFilterPtr pFilter = pUnk;
if (SUCCEEDED(hr))
{

    HRESULT hr = pGraph->AddFilter(pFilter, L"Private Filter");
    hr = GetPin(pFilter, PINDIR_INPUT, &inPin); //mux in

    hr = GetPin(pFilter, PINDIR_OUTPUT, &mOutPin); //mux out
    hr = GetPin(iFiltera, PINDIR_INPUT, &filePin); // filewriter in
}

hr = pGraph->Connect(outPin, inPin); //connect audio out and mux in
hr = pGraph->Connect(mOutPin, filePin); //connect mux out and file in; Error 0x80040217(VFW_E_CANNOT_CONNECT?) //works now

//ADDED code
IMediaControl *pMC = NULL;
hr = pGraph->QueryInterface(IID_IMediaControl, (void **)&pMC);

hr = pMC->Run();
Sleep(4000);
hr = pMC->Stop(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:51:35.610

您需要了解特定任务所需的过滤器图形拓扑。你正在捕捉，在这里 - 很好。所以你有你提供代码片段的音频捕获过滤器。然后你要么压缩音频（你的首选应该是`AAC`AKA MPEG-4 Part 3，前提是你要制作 MP4 文件），或者保持音频未压缩的 PCM。然后像你一样连接 MPEG-4 多路复用器。多路复用器产生输出流，您应该使用[File Writer Filter](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375644.aspx)完成管道。

您可以在 GraphEdit SDK 应用程序中手动构建链（或者有其他更丰富的工具）。您的过滤器图如下所示：

![过滤器图](../Images/00b247c5b92b684a0856445231144a87.png)

请注意，您可以在应用程序中公开过滤器图，并远程连接到它并检查拓扑。这使得调试更容易。启动/停止过滤器图（`IMediaControl::Run`来自`::Stop`代码）会为您创建文件。

我的理解是，添加多路复用器后您会立即迷路。现在您需要找到它的输出引脚，添加`File Writer`，查询它`IFileSinkFilter`，使用它设置目标文件名，找到它的输入引脚，连接两个未连接的引脚（多路复用器输出，写入器输入）。您的管道已准备好运行。

# python - TurboMail 嵌入图像时未添加 Content-ID

> ID：11203072
> 
> 赞同：0
> 
> 时间：2012-06-26T08:01:47.853
> 
> 标签：python, email, sendmail, pylons, embedding

### 我的错。邮戳显然不支持内联图像。通过更改 smtp-mail 提供商解决。

我正在尝试使用 pylons 通过 TurboMail 发送电子邮件。

一切正常，除了在 html-content 中使用嵌入的图像。似乎每个图像的 Content-ID 标头都在途中丢失了。

这是我的代码：

```
def sendMail(to,subject,html_content,plain_content,images):
    from turbomail import Message as Mail
    mail = Mail(to=to,subject=subject)
    mail.plain = plain_content
    mail.rich = html_content

    for cid,path in images.iteritems():
        mail.embed(path,cid)

    mail.send() 
```

在我的测试中，html内容是：

```
<html>
  <header/>
  <body>
  <h1>Send images using TurboMail</h1>
  <img src="cid:img0" />
 </body>
</html> 
```

和图像字典：

```
{"img0":"path/to/img0"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:01:38.027

当您同时传入文件名和 cid 时，TurboMail 会*忽略*cid 并使用文件的基本名称。我怀疑你的文件名有扩展名，而你的 cids 没有：

```
{"img0":"path/to/img0.png"} 
```

如果是这样，图像将嵌入一个 cid of`img0.png`代替。

你可以传入一个打开的图像文件；TurboMail 将不会忽略该名称：

```
def sendMail(to,subject,html_content,plain_content,images):
    from turbomail import Message as Mail
    mail = Mail(to=to,subject=subject)
    mail.plain = plain_content
    mail.rich = html_content

    for cid,path in images.iteritems():
        mail.embed(open(path, 'rb'), cid)

    mail.send() 
```

我会[`marrow.mailer`](https://pypi.python.org/pypi/marrow.mailer)改用；它是同一个包的新名称，但该`.embed`方法在处理嵌入式图像和 cid 时变得更加理智。

*该答案的早期版本使骨髓和 TurboMail 混淆，而是指骨髓`.embed`签名。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:17:36.643

显然，Postmarkapp 不支持内联图像。

# javascript - 使用 slideToggle() 使容器内的链接工作

> ID：11203082
> 
> 赞同：0
> 
> 时间：2012-06-26T08:02:19.040
> 
> 标签：javascript, jquery, user-interface

我有这个标记：

```
<ul><li id="link-notifications">
  <ul class="list-notifications" style="display:none">
    <li><a href="/link/to">Item 1</a></li>
  </ul>
</li>
</ul> 
```

使用这个 Jquery：

```
$('#link-notifications').click(function(e){
   e.preventDefault();
   e.stopPropagation();           
   $(this).find('.list-notifications').slideToggle('medium');       
}); 
```

但是每当列表向下滑动时，我单击链接，列表就会向上滑动。我听说 stopPropagation 有效，所以我添加了它，但它不起作用。我什至尝试将它添加到 slideToggle 回调中，但它只是停止了 slideUp 操作。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:11:31.717

`click`仅将事件绑定到`#link-notifications`转义其内部内容的 ans。

```
$('#link-notifications, :not("#link-notifications > *")').click(function(e){
   e.stopPropagation();           
   $(this).find('.list-notifications').slideToggle('medium');       
}); 
```

**[工作样本](http://jsfiddle.net/9dCeD/5/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:11:01.323

您不需要 `e.stopPropagation()`在该事件中，而是在单击链接时。

只需添加

```
$('.list-notifications').click(function(e){
    e.stopPropagation();
}); 
```

[http://jsfiddle.net/N6pYU/1/](http://jsfiddle.net/N6pYU/1/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-26T08:05:17.137

HTML

```
<ul>
    <li id="link-notifications">
    <a href="#">link-notifications</a>
        <ul class="list-notifications">
            <li><a href="#">Item 1</a></li>
        </ul>
    </li>
</ul>​ 
```

jQuery

```
$('#link-notifications>a').click(function(event){
   $(this).siblings('ul.list-notifications').slideToggle('medium');      
});​ 
```

我没有将事件附加到我想要滑动的父级，而是一个兄弟级。这可以防止奇怪的事件冒泡。

小提琴：http: [//jsfiddle.net/iambriansreed/59e3F/](http://jsfiddle.net/iambriansreed/59e3F/)

# iphone - 在ios中调用一定时间的警报

> ID：11203083
> 
> 赞同：4
> 
> 时间：2012-06-26T08:02:21.670
> 
> 标签：iphone, ios, alarm

我正在开发应用程序，它将根据用户输入在 ios 上设置一段时间的警报。

含义：如果用户选择表的第 1 行，那么它将查看字典（可能会说 20 分钟），然后它应该在 ios 中设置警报（当前时间+ 20 分钟）。

有人可以告诉我解决这个问题的最佳方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T08:10:15.520

您可以使用 UILocalNotification：

```
UILocalNotification *local = [[UILocalNotification alloc] init];

// create date/time information
local.fireDate = [NSDate dateWithTimeIntervalSinceNow:20*60]; //time in seconds
local.timeZone = [NSTimeZone defaultTimeZone];

// set notification details
local.alertBody = @"Alarm!";
local.alertAction = @"Okay!";

local.soundName = [NSString stringWithFormat:@"Default.caf"];

// Gather any custom data you need to save with the notification
NSDictionary *customInfo = 
[NSDictionary dictionaryWithObject:@"ABCD1234" forKey:@"yourKey"];
local.userInfo = customInfo;

// Schedule it!
[[UIApplication sharedApplication] scheduleLocalNotification:local];

[local release]; 
```

# iphone - 生成文档缩略图

> ID：11203088
> 
> 赞同：0
> 
> 时间：2012-06-26T08:02:44.103
> 
> 标签：iphone, objective-c, ios, ipad, qlpreviewcontroller

我正在尝试显示文档网格（保存在文档目录中），但我不知道如何生成文档的缩略图。文档可以是 a`QLPreviewController`可以显示的任何内容。PDF 和图像很好，但我不知道 .doc 之类的其他内容。任何指导都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:37:34.500

您可以使用 uiwebview 更好的选择，您可以在其中加载提供文件路径的文件。然后使用 Matic Oblak 上面给出的代码截取屏幕截图，您就完成了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T10:37:40.767

由于您有一个 UIView 可以显示这些文档中的任何一个，因此您可以使用快捷方式：

-使用显示的文档创建预览控制器的实例

-不要将此视图/控制器添加到任何东西

- 从其图层创建图像

这可能会有所帮助：

```
+ (UIImage *)imageFromView:(UIView *)view {
    CALayer *layer = view.layer;
    UIGraphicsBeginImageContext([layer frame].size);
    [layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *outputImage = UIGraphicsGetImageFromCurrentImageContext();    
    UIGraphicsEndImageContext();    
    return outputImage;
} 
```

因为我没有测试代码，所以玩了一下图层和初始化。

# jquery - 从 jquery 传递一个变量值来上传 php 文件

> ID：11203095
> 
> 赞同：0
> 
> 时间：2012-06-26T08:03:30.730
> 
> 标签：jquery, codeigniter, jquery-plugins, uploadify

jQuery

```
 function uploadpho(){
    $foldername=$("#storeloyaltyid").val();
    $('#uploadpho').uploadify({
        uploader:urljs+"/jslib/clUploadify.swf",
        cancelImage:urljs+"/image/cancel.png",
        buttonImage:urljs+"/image/browse_button.png",
        'scriptData'     :{folder:$("#storeloyaltyid").val()},//photoxyz
        uploadUrl:urljs+"/jslib/uploadify.php",
                    formData :  jQuery.parseJSON('{"folder":"'+$("#storeloyaltyid").val()+'"}'),
        onComplete: function(event,status,data,imgs){   
        //alert($foldername);
            $("#uploadpho").val(imgs);
        },

        onRemove:function(event,imgs){
            $("#uploadpho").val(imgs);
        }
    });
} 
```

上传 php

```
<?php
if (!empty($_FILES)) {

$filename = $_FILES['Filedata']['name'];
$filetmpname = $_FILES['Filedata']['tmp_name'];
$fileType = $_FILES["Filedata"]["type"];
$fileSizeMB = ($_FILES["Filedata"]["size"] / 1024 / 1024);
$targetPath=$_POST['folder'];//not able to get the value here??
    if($targetPath==''){
    $targetPath='tmp';
     mkdir('../uploaded_photos/' .$targetPath, 0755, true);// comes to loop and creates a tmp folder
  }else{
     mkdir('../uploaded_photos/' .$targetPath, 0755, true);
}
// Place file on server, into the images folder
move_uploaded_file($_FILES['Filedata']['tmp_name'], "../uploaded_photos/".$targetPath.'/'.$filename);
//echo $filename;
}elseif($_POST['d']){
$filename = $_POST['d'];
$dFile = "../uploaded_photos/".$filename;
unlink($dFile);

    }
    ?> 
```

我需要知道如何将值从 jquery uploadify 传递到 uploadify.php 以获取文件夹名称

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T04:21:42.130

在旧版本的uploadify中存在这个问题，后来升级到`uploadify 3.1`我能够通过scriptData获取它。

# windows-phone-7 - 如何避免 login_sucess.html？

> ID：11203097
> 
> 赞同：1
> 
> 时间：2012-06-26T08:03:35.330
> 
> 标签：windows-phone-7, facebook-c#-sdk

每次使用 WP7 应用程序登录时，如何避免必须显示此 redirect_uri = "https://www.facebook.com/connect/login_success.html"。

我的应用程序中有一个分享按钮，它应该将内容发布到登录用户的 Facebook 页面。目前，当用户已经输入用户名/密码时，他们仍然可以先看到白屏“login_success.html”，然后再看到项目被发布并返回到应用程序页面。

如何在应用流程中避免出现此屏幕？

我正在使用 facebook sdk C# v6 ...

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:45:14.897

获得访问令牌后，您可以使浏览器控件不可见

# php - MySQL 表锁，或其他可能的解决方案？

> ID：11203106
> 
> 赞同：0
> 
> 时间：2012-06-26T08:04:17.510
> 
> 标签：php, mysql, myisam

我有一个安全问题。我认为锁定一个表将是一个解决方案，只是我不知道如何在 MySQL、PHP 中正确执行它，并且没有足够的时间搜索 Google 和文档了。

因此，**任务**：
创建一个数据库并编写一个 php 代码以随机获取彩票。
我有一个表，它只包含几行。（身份证、姓名、数量）

*例如：*

1 - 没有获胜 - 20000
2 - Hello Kitty 包 - 200
3 - 一支非常漂亮的笔 - 50 等等。

我写了 php，所以逻辑如下：
1) 从数据库中获取每张门票的数量，并创建一个包含间隔的 PHP 数组，例如：
no win: 20000,
Hello Kitty bag: 20200,
一支非常不错的笔: 20250\.
2) 生成一个从 1 到最大的随机数，这样我就知道用户拿到了什么票。
3）更新数据库：从正确的行中减去1。

现在，这很好用，**但是问题**是：
如果我有大量用户，并且其中两个或三个同时点击，随机相同的数字，（假设它是 hello kitty）但只有 1 个那个项目？
他们三个都从数据库中减去，而不是在 0 处停止。（在这个例子中，我们将有 -2 hello kitty bag）

大问题，至少对我来说。
所以总而言之，我的**问题**是：
1）我怎样才能从选择中锁定表格，直到我准备好减去？这是一个很好的解决方案吗？
2）我可以使它成为一个查询，还是 MySQL 无法处理？
3）其他解决方案？

我很感激每一个答案，真的！
在此先感谢，也很抱歉发了这么长的帖子，但想保持直截了当。
**[已解决]**
我使用了存储过程，这是详细信息。我的服务器版本高于 5.x 很幸运，因为当我阅读时，MyISAM 系统仅支持此版本以上的存储过程。我将在这里编写一些代码，希望将来有人会发现它有用：

```
delimiter //
CREATE PROCEDURE `name`(IN a_parameter INT(20))
  DECLARE some_text VARCHAR(50) DEFAULT '';
  #now using all this stuff
  SELECT `name` INTO some_text FROM `users_table` WHERE `table_id` = a_parameter;
  SELECT some_text
END//
delimiter ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:12:34.740

您需要使用事务（[此处](http://dev.mysql.com/doc/refman/5.0/en/commit.html)的文档）和表锁（在此处阅读有关表锁和事务之间的交互的[信息](http://dev.mysql.com/doc/refman/5.0/en/lock-tables-and-transactions.html)）。

要在一个查询中执行此操作，您可以构建一个存储过程（[此处](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)的文档）。我会去一个程序。

如果您使用的是 PHP PDO，您可以阅读手册中的所有内容（[这里](http://www.php.net/manual/en/class.pdo.php)是最重要的 PDO:: beginTransaction 和 PDO:: commit）。如果您仍在使用`mysql`扩展，则需要像这样显式地进行：

```
mysql_query('START TRANSACTION');
// Because you cannot nest lock's and transactions, this is a workaround to lock the table
mysql_query('SELECT * FROM foo FOR UPDATE'); // Lock issued, the important part is "FOR UPDATE"
//[ your query's here ]

// if something goes wront, revert the changes
mysql_query('ROLLBACK');
// at the end commit the changes
mysql_query('COMMIT'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:11:02.487

查找“事务”.. 使用 mysqli/pdo 及其事务功能

[http://tympanus.net/codrops/2009/09/01/using-mysql-transactions-with-php/](http://tympanus.net/codrops/2009/09/01/using-mysql-transactions-with-php/)

[http://www.shotdev.com/php/php-mysql/php-mysql-and-transaction-begin-commit-rollback/](http://www.shotdev.com/php/php-mysql/php-mysql-and-transaction-begin-commit-rollback/)

ETC

# java - 下载 Spring MVC 生成的文件在 IE 中不起作用

> ID：11203111
> 
> 赞同：4
> 
> 时间：2012-06-26T08:04:40.590
> 
> 标签：java, spring, internet-explorer, spring-mvc

我有以下代码用于在 Spring MVC Web 应用程序中生成 RTF 字母，该应用程序在 Firefox 中可以正常工作，但在 IE 9 中不能。

```
public ResponseEntity<String> downloadLetter() {
    String letter = generateLetter();
    final HttpHeaders responseHeaders = new HttpHeaders();
    responseHeaders.setContentType(new MediaType("text", "rtf"));
    responseHeaders.add("Content-Disposition", "attachment; filename=\"letter.rtf\"");
    return new ResponseEntity<String>(letter, responseHeaders, HttpStatus.CREATED);
} 
```

IE 尝试下载名为 url ( `letter?param=23`) 的最后一部分的文件，而不是 letter.rtf，然后完全失败，说无法下载。任何想法出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-20T21:26:55.287

IE 不支持 http 状态码 201 Created。相反，对成功的 http 请求使用标准响应，即 200 OK。

```
return new ResponseEntity<String>(letter, responseHeaders, HttpStatus.OK); 
```

# cakephp - 电子邮件上的 Cakephp 2.0 SMTP 设置不起作用

> ID：11203112
> 
> 赞同：5
> 
> 时间：2012-06-26T08:04:49.233
> 
> 标签：cakephp, smtp, cakephp-2.0

我在我的 CAKEPHP 项目中使用 SMTP 发送电子邮件。我的电子邮件配置如下

```
class EmailConfig {

    public $Smtp = array(
         'transport' => 'Smtp',
         'from' => array('contact@mydomainname.com' => 'domainname.com'),
         'host' => 'myhostingserver',
         'port' => 2525,
         'timeout' => 60,
         'username' => 'username@mydomainname.com',
         'password' => 'secret',
         'client' => null,
         'log' => false
    ); 
```

和我的邮件功能代码如下

```
 $email    = new CakeEmail('Smtp');
    $result   = $email->template('welcome_mail','default')
                       ->emailFormat('html')
                        ->to($to_email)
                        ->from('contact@mydomainname.com')
                        ->subject('Welcome to my domain name')
                        ->viewVars($contents);

    if($email ->send('Smtp'))
    {   
        echo ('success');

    } 
```

当我发送邮件时，它会抛出以下错误 **SMTP 超时。**我的 SMTP 服务器详细信息是正确的，它在现有服务器中工作正常。我不知道我错在哪里

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T12:45:59.067

检查加密类型（如果适用），例如 ssl 或 tls

在这种情况下，您的主机 URL 应如下所示

```
'host' => 'ssl://myhostingserver' 
```

或者

```
'host' => 'tls://myhostingserver' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:57:50.177

如果您的 SMTP 服务器有 SSL，您必须启用`php_openssl`in`php.ini`才能使用此服务。您可以使用此代码进行测试

```
if(!in_array('openssl',get_loaded_extensions())){
    die('you have to enable php_openssl in php.ini to use this service');       
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T19:44:15.747

除了这里已经建议必须加载模块之外。我发现某些服务器的某些端口被阻止。我用这个脚本来测试一些服务器：

```
<?php

if(!in_array('openssl',get_loaded_extensions())){
    die('you have to enable php_openssl in php.ini to use this service');       
} else {
    echo "php_openssl in php.ini is enabled <br />";
}

// fill out here the smpt server that you want to use
$host = 'ssl://smtp.gmail.com';
// add here the port that you use for for the smpt server
$ports = array(80, 465);

foreach ($ports as $port)
{
    $connection = @fsockopen($host, $port);
    if (is_resource($connection))
    {
        echo $host . ':' . $port . ' ' . '(' . getservbyport($port, 'tcp') . ') is open.<br />' . "\n";
        fclose($connection);
    } else {
        echo $host . ':' . $port . ' is not responding.<br />' . "\n";
    }
}

?> 
```

# c# - 如何使用 XPathNavigator 来评估 XPath 1.0 中的重复节点？

> ID：11203117
> 
> 赞同：2
> 
> 时间：2012-06-26T08:05:05.420
> 
> 标签：c#, .net, vb.net, xpath

我正在尝试使用 XPath 1.0 从以下 xml 中识别重复的序列号，然后使用 .Net 在 .Net 中对其进行评估`XPathNavigator`。

```
<?xml version="1.0" encoding="utf-16"?>
<Inventory xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <Items>
        <Item>
            <SerialNumber>1111</SerialNumber>
        </Item>
        <Item>
            <SerialNumber>1112</SerialNumber>
        </Item>
        <Item>
            <SerialNumber>1112</SerialNumber>
        </Item>
    </Items>
</Inventory> 
```

我试图通过评估来做到这一点

```
//Items/Item/SerialNumber 
```

.Net中的自定义 XSLT 上下文函数（`IXsltContextFunction` [像此 MSDN 示例那样](http://msdn.microsoft.com/en-us/library/dd567715)实现）中的表达式，但 Invoke 函数一次被调用一个结果，因此我看不到其他结果以查找重复项。

**1) 有没有办法使用单个 XPath 1.0 表达式来做到这一点？**

或者

**2) 有没有办法将元素数组传递到自定义 XSLT 上下文函数类的单个 Invoke 调用中？**我在 VB.Net 工作，但对任何人都可以分享的任何 C# 示例都很满意。

谢谢，

加文

**编辑**

感谢 OR Mapper 和 Dimitre 的回复。我最初接受了 OR Mapper 的回复，因为它确实按照我的要求进行。我已经接受了 Dimitre 的回答，因为我喜欢它提供了一个独特的值列表。不过，这两种回答都非常有帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T08:07:56.087

*我要回答**1)**，所以**2)**应该不再重要了：*

您可以使用元素`preceding-sibling`上的轴来查找具有相同序列号的`<Item>`任何前面的元素。`<Item>`

试试这个（写成它只返回序列号本身而不是元​​素 - 如果这不是你想要的，并且你不知道如何更改结果，请告诉我）：

```
/Inventory/Items/Item/SerialNumber/node()[.=../../preceding-sibling::Item/SerialNumber/node()] 
```

对于您的示例文档，它返回

```
1112 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T13:01:28.897

**使用**：

```
/*/*/Item
      [SerialNumber = following-sibling::Item/SerialNumber
     and
       not(SerialNumber = preceding-sibling::Item/SerialNumber)
      ] 
```

这将为具有相同字符串值的子`Item`元素的任何一组`Item`元素选择一个元素。`SerialNumber`

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
      "/*/*/Item
          [SerialNumber = following-sibling::Item/SerialNumber
         and
           not(SerialNumber = preceding-sibling::Item/SerialNumber)
          ]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于此 XML 文档时**（基于提供的转换，但更有趣）：

```
<Inventory>
    <Items>
        <Item>
            <SerialNumber>1111</SerialNumber>
        </Item>
        <Item>
            <SerialNumber>2222</SerialNumber>
        </Item>
        <Item>
            <SerialNumber>2222</SerialNumber>
        </Item>
        <Item>
            <SerialNumber>2222</SerialNumber>
        </Item>
        <Item>
            <SerialNumber>1111</SerialNumber>
        </Item>
        <Item>
            <SerialNumber>1111</SerialNumber>
        </Item>
        <Item>
            <SerialNumber>3333</SerialNumber>
        </Item>
    </Items>
</Inventory> 
```

**转换计算 XPath 表达式并将所选节点复制到输出：**

```
<Item>
   <SerialNumber>1111</SerialNumber>
</Item>
<Item>
   <SerialNumber>2222</SerialNumber>
</Item> 
```

**最后，如果您只想获取`SerialNumber`重复值，请使用**：

```
 /*/*/Item
          [SerialNumber = following-sibling::Item/SerialNumber
         and
           not(SerialNumber = preceding-sibling::Item/SerialNumber)
          ]
           /SerialNumber/text() 
```

# nhibernate - NHibernate 查询和两次相同的位置参数

> ID：11203119
> 
> 赞同：0
> 
> 时间：2012-06-26T08:05:08.520
> 
> 标签：nhibernate, parameters

在使用 NHibernate 1.x 时，我们突然遇到了这个错误，在一个非常糟糕的工作中：

```
25/06/2012 22:50:59 (Error) : could not execute query 
[ SELECT xxxx WHERE this_.A = ? and this_.B = ? ]
Positional parameters:   
  0 117
  0 b93094d2-a934-4400-9350-53fd3dbc6494 
```

你可以看到参数的索引两次都是0。`?`如果我在将两者替换为参数值后自己执行查询，就可以了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:20:52.980

原来是SQL Serveur 2012同时出现故障（错误605）。

# android - 如何使用 android desfire 中提供的安全功能？

> ID：11203120
> 
> 赞同：2
> 
> 时间：2012-06-26T08:05:09.500
> 
> 标签：android, security, nfc, mifare

我知道如何从 Mifare DESFire 标签读取和写入 ndef 消息，但在与 Android 通信时，我很难理解如何使用 DESFire 支持的命令集。

1.  我知道这与`transceive(byte[])`有助于通过原始字节进行通信的功能有关。我如何使用它？

2.  如何使用自定义密钥锁定消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T11:24:29.697

`IsoDep.transceive()`确实是正确的方法。您可以将 ISO7816-4 APDU（如来自[NFC 论坛 Type 4 标签规范](http://www.nfc-forum.org/specs/spec_list/)的那些）发送到标签或使用特定于 DESfire 的命令集与标签进行通信（请参阅[http://www.nxp.com/documents/ short_data_sheet/MF3ICDX21_41_81_SDS.pdf](http://www.nxp.com/documents/short_data_sheet/MF3ICDX21_41_81_SDS.pdf)以获得高级概述）。

使用自定义密钥锁定消息需要使用 DESFire 特定的命令。数据表中描述了详细信息，可应 NXP 要求提供；见[http://www.nxp.com/products/identification_and_security/smart_card_ics/mifare_smart_card_ics/mifare_desfire/MF3ICD2101DUD.html](http://www.nxp.com/products/identification_and_security/smart_card_ics/mifare_smart_card_ics/mifare_desfire/MF3ICD2101DUD.html)

# c# - 受保护的内部构造函数

> ID：11203124
> 
> 赞同：4
> 
> 时间：2012-06-26T08:05:15.997
> 
> 标签：c#, inheritance

我有一个类`ClassA`是其他类的基类。我希望这个类构造函数是内部的和受保护的，这样它就不能从我的程序集外部继承和实例化（我不能使它密封，因为我有其他内部类继承自它，你可以看到我的其他相关问题[这里](https://stackoverflow.com/questions/11190765/public-class-extends-internal-class)）所以我修改它是这样的：

```
public abstract ClassA{
    internal protected ClassA(){
    }
} 
```

有人告诉我这不起作用，因为组合`internal protected`被解释为`internal`OR`protected`这显然只使构造函数`protected`:(（从外部可见）

**问题**

1.  如果这是真的，为什么被`internal protected`解释为`internal`OR`protected`而不是`internal`AND `protected`？
2.  有没有办法可以在内部声明一个构造函数并受保护？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T08:09:08.027

指定内部就足够了。

它是一个抽象类——暗示它的构造函数是受保护的，因为你不能创建它的实例——你什么都不能做，只能继承它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T09:11:43.577

如果您将构造函数指定为**internal**，它将对程序集中的所有类可见，而对其外部的类不可见，这正是您想要实现的。简而言之，如果类 A 的构造函数或类成员是：

*   **受保护**- 对在其和任何其他程序集中从 A 继承的所有类可见
*   **内部**- 对 A 类程序集中的所有类可见
*   **受保护的内部**- 对在其和任何其他程序集中从 A 继承的所有类以及对 A 程序集中的所有类可见

因此，在您的情况下，您只需将构造函数指定为内部的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T08:09:00.793

你试过了吗 ？

msdn 告诉我们

> 构造函数可以标记为公共的、私有的、受保护的、内部的或受保护的内部的。

[http://msdn.microsoft.com/en-us/library/ms173115%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms173115%28v=vs.100%29.aspx)

# c# - 基于 HTML 的电子邮件在 asp.net 网络表单中无法正常工作

> ID：11203129
> 
> 赞同：0
> 
> 时间：2012-06-26T08:05:30.530
> 
> 标签：c#, asp.net, webforms

我正在研究从用户那里收集某些用户信息并通过电子邮件发送确认的网络表单。我正在尝试使用以下方法发送 HTML 电子邮件，因为它使管理基于 HTML 的电子邮件变得容易。

[https://gist.github.com/1668751](https://gist.github.com/1668751)

我对代码进行了必要的更改，但它不起作用。我阅读了其他相关文章以使其正常工作，但我做错了。

以下代码行生成错误`The replacements dictionary must contain only strings.`

`MailMessage msgHtml = mailDef.CreateMailMessage(to, replacements, MessageBody, new System.Web.UI.Control());`

我对代码做了很多更改，但它似乎对我不起作用。我将不胜感激帮助使此代码正常工作。

如果我用其他一些更改评论上面的代码行，那么我可以发送电子邮件但我不能替换令牌。也欢迎任何简单的替换令牌的方法。

以下是我现在正在使用的完整代码

```
String to, subject, Name;
subject = "Booking Confirmation";
Name = txtName.text;

ListDictionary replacements = new ListDictionary();
replacements.Add("<%Name%>", Name);
replacements.Add("<%Email%>", objVR.Email);
replacements.Add("<%CompanyName%>", objVR.CompanyName);
replacements.Add("<%BookingDate%>", objVR.BookingDate);
replacements.Add("<%BookingTime%>", objVR.TimeSlot);
replacements.Add("<%NoOfVisitors%>", objVR.NoOfVisitors);
replacements.Add("<%BookingCode%>", objVR.BookingUniqueID);

MailDefinition mailDef = new MailDefinition();

string MessageBody = String.Empty;
string filePath = System.Web.HttpContext.Current.Request.PhysicalApplicationPath;

using (StreamReader sr = new StreamReader(filePath + @"\en\VREmailEnglish.htm"))
{
    MessageBody = sr.ReadToEnd();
}

MailMessage msgHtml = mailDef.CreateMailMessage(to, replacements, MessageBody, new System.Web.UI.Control()); 
```

字符串消息 = msgHtml.Body.ToString();

```
Helper.SendTokenEmail(to, subject, msgHtml, isHtml);

public static void SendTokenEmail(string to, string subject, string mailMessage, bool isHtml)
        {
            try
            {
                // Create a new message
                var mail = new MailMessage();

                // Set the to and from addresses.
                mail.From = new MailAddress("noreply@somedomain.net");
                mail.To.Add(new MailAddress(to));

                // Define the message
                mail.Subject = subject;
                mail.IsBodyHtml = isHtml;
                mail.Body = mailMessage.ToString();
                //Object userState = mailMessage;

                // Create a new Smpt Client using Google's servers
                var mailclient = new SmtpClient();
                mailclient.Host = "mail.XYZ.net";
                //mailclient.Port = 587; //ForGmail
                mailclient.Port = 2525;

                mailclient.EnableSsl = false;
                mailclient.UseDefaultCredentials = true;

                // Specify your authentication details

                mailclient.Credentials = new System.Net.NetworkCredential("noreply@somedomain.net", "XYZPassword");

                mailclient.Send(mail);
                mailclient.Dispose();
            }
            catch (Exception ex)
            {
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:35:06.417

正如 HatSoft 指出的那样，ListDictionary 接受对象作为键和值，所以这看起来应该可以工作。

但是在这里阅读 CreateMailMessage() 方法的文档[http://msdn.microsoft.com/en-us/library/0002kwb2.aspx](http://msdn.microsoft.com/en-us/library/0002kwb2.aspx)表明您需要将值转换为字符串，否则它将引发 ArgumentException。

因此，要修复确保您添加到 ListDictionary 的所有值都转换为字符串，即

```
objVR.BookingDate.ToString() 
```

# javascript - IE7 忽略了我的 .js css 规则 - CSS/Javascript 问题？

> ID：11203131
> 
> 赞同：2
> 
> 时间：2012-06-26T08:05:42.197
> 
> 标签：javascript, css, internet-explorer-7

我在 <html> 元素上使用 .js 和 .no-js 类来区分具有 Javascript 和不具有 Javascript 的布局。

使用 <html> 元素，我添加了一个默认类“no-js”。然后我在标题中包含一行脚本，`document.getElementsByTagName("html")[0].setAttribute("class","js");`以将 html 类切换为“js”。显然这行代码只适用于启用了 js 的浏览器，因此 <html> 元素将变为 <html class="js"> 而未启用 js 的浏览器将继续读取 <html class="no-js" >。

然后我将简单地使用`.js someElement{ font-weight:bold;}`vs`.no-js someElement{ font-weight:normal;}`来设置不同的页面样式。

但是，我发现这种方法在 IE7 上失败了。在 IE7 上，该脚本有效——至少看起来如此。在开发者工具上，它显示 <html class="js">。但是，所有以 .js 开头的 css 样式都会被 IE7 忽略，并且 IE7 的行为就像 <html> 元素具有 .no-js 类一样。（查看[http://bit.ly/LMre3N](http://bit.ly/LMre3N)以获得更清晰的图片。）

我无法想象这里到底出了什么问题：这是 IE7 在呈现 CSS 时行为错误的情况，还是脚本无法正常工作的情况？这是我尝试过的：

**CSS**

1.  更改 .js 和 .no-js 声明的顺序，因为我认为后者可能会覆盖导致问题的前者 - 不。
2.  更改脚本和样式表的顺序，因为这可能是因为 IE7 在读取脚本之前读取了 .no-js 样式表 - 不。
3.  更改声明的具体性——也许更具体会导致 IE7 读取 .js 声明——不。
4.  从文档中完全删除 .no-js 类，希望 IE7 能够读取 .js 声明。NOPE - 它只是忽略 .no-js 和 .js 声明。

简而言之，IE7 完全完全忽略了存在 .js 声明的事实。所以我认为可能是脚本有问题，这就是我所做的：

**Javascript**

1.  我在 <script> 中添加了 'type="text-javascript"' - 没有效果。
2.  我试过`document.documentElement`而不是`document.getElementsByTagName('html')[0]`- 还是一样。
3.  我使用`var htmlOrWhat=document.getElementsByTagName("html")[0]; alert(htmlOrWhat);`了 、FF、Chrome、Opera、Safari、IE8 和 IE9 返回 '[object HTMLHtmlElement]'，而 IE7 返回 [object]，导致我认为 IE7 没有正确读取 <html> 元素。
4.  然后我尝试读取 <html> 的 id 和 lang 属性来测试 IE7 是否真的正确读取了元素，是的，它正确地检索了这些属性，它只是简单地拒绝对其应用 .js css 声明。

到目前为止，我已经束手无策了（尽管我怀疑 [object] 异常与我的问题有关），我希望 Stackoverflow 的某个人能够帮助我。*如果有人能在此处准确*指出 IE7 有什么问题以及如何修复它，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T08:31:22.183

`setAttribute()`并且`getAttribute()`通常在 IE7 及更早版本（以及更高版本的兼容模式）中被破坏。请改用元素的 className 属性。

`document.getElementsByTagName("html")[0].className = "js";`

这是一个小提琴演示 - [http://jsfiddle.net/ajcw/6Yz8x/1/](http://jsfiddle.net/ajcw/6Yz8x/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T08:33:38.750

SetAttribute() 不像您在 IE7 中所期望的那样工作。创建项目后，它不会在项目上设置属性。您将需要另一种方法来处理 IE7 中的更改。

下面的答案建议使用 className 属性。或者您可能只使用 jQuery。

（更多：[IE7 和 setAttribute() 删除类](https://stackoverflow.com/questions/6465269/ie7-and-setattribute-to-remove-classes)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T08:39:14.907

setAttribute() 和 getAttribute() 在 IE 7 中被破坏

看看这个： [IE7 和 setAttribute() 删除类](https://stackoverflow.com/questions/6465269/ie7-and-setattribute-to-remove-classes)

# c# - 在滚动文件的顶部仅包含一次标题

> ID：11203136
> 
> 赞同：10
> 
> 时间：2012-06-26T08:06:07.477
> 
> 标签：c#, logging, log4net

是否可以只在滚动文件的顶部包含标题信息？

我有以下配置文件：

```
<appender name="RollingFileAppender" type="log4net.Appender.RollingFileAppender">
            <file value="d:\temp\TTTest.log"/>
            <layout type="log4net.Layout.PatternLayout">
                <header value="[Header]&#13;&#10;" />
                <param name="ConversionPattern" value="%-25utcdate{dd/MM/yyyy HH:mm:ss.fff}%-20property{log4net:HostName}%-30logger%-30thread%-7level%message%newline"/>
            </layout>
            <lockingModel type="log4net.Appender.FileAppender+MinimalLock"/>
            <maximumFileSize value="5MB"/>
            <rollingStyle value="Size"/>
            <maxSizeRollBackups value="-1"/>
            <countDirection value="1"/>
        </appender> 
```

当我运行我的应用程序时，例如两次，我得到两次标题信息，例如

```
 [Header] 
 The Log line
 [Header]
 The Log line 
 etc 
```

我希望实现以下目标：

```
 [Header] 
 The Log line
 The Log line 
 etc 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-09-12T17:08:04.107

我发现最简单的方法是创建一个继承自 RollingFileAppender 的类，并像这样覆盖 WriteHeader 方法：

```
using System.IO;
using System.Text;
using log4net.Core;
using log4net.Layout;
using log4net.Util;
using log4net.Appender;

namespace CsvLogging
{
    public class HeaderOnceAppender : RollingFileAppender 
    {
        protected override void WriteHeader()
        {
            try
            {
                if (LockingModel.AcquireLock().Length == 0)
                {
                    base.WriteHeader();
                }
            }
            finally
            {
                LockingModel.ReleaseLock();
            }
        }
    }
} 
```

然后将此类用作附加程序：

```
<appender name="CsvFileAppender" type="CsvLogging.HeaderOnceAppender"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-17T22:38:15.153

创建 log4net.Layout.PatternLayout 的具体实现：

```
namespace MyApplication
{
    using log4net.Layout;

    public class MyConcretePatternLayout : PatternLayout
    {
        public override string Header => "My Header text here"
    }
} 
```

修改您的 log4net.config 文件以使用这个新的自定义模式布局：

```
 <appender name="MyFileAppender" type="log4net.Appender.RollingFileAppender">
      ...
      <layout type="MyApplication.MyConcretePatternLayout">
        <conversionPattern...
      </layout>

    </appender> 
```

现在，每当文件由于您的标准而滚动时，您应该在每个文件的顶部看到“我的标题文本”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T15:34:03.663

您需要一个继承自 RollingFileAppender 的自定义 appender。请参阅下面的帖子。

[Log4net - 如何知道文件何时滚动？](https://stackoverflow.com/questions/2228060/log4net-how-to-know-when-a-file-is-rolled)

基本上，您需要在自定义附加程序中提供自己的逻辑，以将您的标头写入每个新文件。您可能会在 RollOverSize 中执行此操作。获取 log4net 源代码的副本以供参考是个好主意。

# java - 时间色彩理论

> ID：11203137
> 
> 赞同：0
> 
> 时间：2012-06-26T08:06:10.350
> 
> 标签：java, animation, colors

我有一个矩形。矩形的宽度取决于开始时间和结束时间。如果开始时间为 0，结束时间为 20000，那么它将有大约 200 的宽度和 100 的高度。这里的高度是恒定的。矩形的颜色是根据开始颜色和结束颜色计算的。所以如果我只给出起始颜色，那么矩形颜色的背景设置为该颜色。如果我给出开始颜色和结束颜色，那么它将部分绘制开始颜色，矩形的一半的其余部分将是结束颜色。

例如

开始时间 0；结束时间20000；

所有时间都以毫秒为单位。

开始颜色是红色 结束颜色是绿色。

o-10000 为红色，10001 - 20000 为绿色。

现在，如果我想获得第 100 毫秒，该矩形的颜色是什么。我必须使用什么逻辑。我不想使用任何 HashMap 概念。是否有任何颜色时间插值理论？我对计算所有这些东西非常感兴趣。请帮我。我对这个插值理论的知识为零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:33:40.143

您正在寻找的是渐变。对于如何显示红色和绿色之间的渐变，没有任何严格的规则。我可以想象你可以从 RGB {255, 0, 0}（非常红）开始，然后在减少红色部分的同时增加绿色部分 {0, 255, 0}。您现在可以看到那里将有 510 (255+255) 步。20000 毫秒 / 510 个颜色值 = 你的步数。

这里描述了一个类似的渐变矩形的绘制： [https](https://stackoverflow.com/a/4424501/211197) ://stackoverflow.com/a/4424501/211197 根据您的需要更新它，添加您的时间步长，我猜应该是它。

# java - Java 反射从相同的上下文调用方法

> ID：11203140
> 
> 赞同：0
> 
> 时间：2012-06-26T08:06:19.587
> 
> 标签：java, performance, reflection

在过去的 1 到 2 个小时里，我一直在深入研究 Java 反射。我想我开始有了正确的理解。

但是，我找不到一些我正在寻找的答案。

我开始理解的是，反射在类查找中受到了很大的（最大的？）性能影响。

我有 2 个问题。

您如何从当前上下文中调用方法（甚至可能吗？）？在当前上下文中调用时，类查找对性能的影响会被抵消吗？

例如：

```
class User {
   private String name;

   public getName(){ return name; }
   public setName(String name){ this.name = name; }

   public void doSomething() {
       //some random stuff
       //I would like this method to invoke randomMethod();
       //Since it is within the same context(this)
       //Will this reduce the performance cost?

       //Please assume from my goals that I will ALWAYS know the name of the method i                  want to call.
      //So I wont need to loop through all available methods.

   }

   public void randomMethod() {

   }
} 
```

我试图实现某种调度程序。例如用于 Java 中的 Web 开发。

我对框架等不感兴趣。

所以如果用户输入一个 url [http://www.hiurl.com/home/index](http://www.hiurl.com/home/index)

其中 home 是控制器并索引操作（要通过反射调用的方法名称）。

如果您有充分的论据，除了失败的许多机会之外，为什么要绝对避免这种情况，也请告诉我。

我希望我的问题很清楚。感谢您花时间阅读，我期待阅读您的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T08:53:34.780

不，不幸的是，即使所有方法调用都在同一个实例上执行，也无法通过反射优化后续方法调用。其原因基本上是调用反射方法的签名：

```
// in java.lang.reflect.Method
Object invoke(Object instance, Object... args);

// in java.lang.reflect.Field
Object get(Object instance) 
```

使用反射优化调用的唯一方法是存储对 , 等的引用`Method`，`Field`以`Constructor`避免每次调用都进行昂贵的查找，例如：

```
public class User {

    public void methodToBeCalledUsingReflection() {
        // some logic
    }

    public void invocationWithPerformanceHit() {
        // lookup of Method instance - costly operation!
        Method method = User.class.getMethod("methodToBeCalledUsingReflection");
        // actual invocation of method
        method.invoke(this);
    }

    public void invocationWithoutPerformanceHit() {
        // only actual invocation of method
        method.invoke(this);
    }

    // moving Method instance to static field which is initialized (looked up) only once
    public static final Method method = getMethodReference("methodToBeCalledUsingReflection");

    private static Method getMethodReference(String methodName) {
        try {
            return User.class.getMethod(methodName);
        } catch(Exception ex) {
            throw new RuntimeException(ex);
        }
    }
} 
```

除此之外，我建议仅在高度合理的情况下使用反射，因为它会妨碍性能，类型安全性较低并且具有其他一些缺点。如果可以不使用反射，则不应使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T08:37:57.923

如果我理解正确，您想为给定的字符串执行不同部分的代码。

我认为如果有更“常规”的方式来做这件事，你应该避免反思，这仅仅是因为代码可读性更好。

考虑使用类似[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)的东西。在您的情况下应该可以正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T09:19:17.467

如果您所做的只是调度到控制器方法，那么您绝对不应该担心性能。反射速度慢的整个问题是当您比较直接调用方法所需的 1ns 与查找 + 调用可能需要 100ns 时。顺便说一句，我更喜欢对策略模式进行反思，但这两者确实非常接近，所以这是你的决定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T08:41:26.547

与您要调用方法的上下文类型没有区别，在所有情况下，您都以相同的方式执行此操作。您需要将“this”对象传递给调用方法。

看：[http ://www.java2s.com/Code/Java/Reflection/CallamethoddynamicallyReflection.htm](http://www.java2s.com/Code/Java/Reflection/CallamethoddynamicallyReflection.htm)

# java - 在java中运行fortran exe

> ID：11203145
> 
> 赞同：1
> 
> 时间：2012-06-26T08:06:37.960
> 
> 标签：java, java-native-interface, fortran

尊敬的先生/女士，

我有一个fortran exe，它接受输入文件并通过对输入文件进行一些操作来生成输出文件。我能够在linux终端中运行该命令。（我认为fortran编译器在linux中可用）。现在请建议如何运行这个使用 java 的 fortran 可执行文件（在 Linux 机器中）。

我尝试的是，

```
 String cmd="fortranExe arg1 arg2";
 //fortranExe=exe path
 //arg1,arg2 are arguments to fortran executable program
 Process p=Runtime.getRuntime().exec(cmd); 
```

但是我没有得到输出。当我尝试运行 ls 等 Linux 命令时，dir 给出了输出。在 java 中运行 fortran 代码需要什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:15:57.067

尝试使用这样的东西

```
Process process = new ProcessBuilder("C:\\PathToExe\\fortran.exe","param1","param2").start(); 
```

从那里得到这个

[Java编程：从Java调用exe并传递参数](https://stackoverflow.com/questions/5604698/java-programming-call-an-exe-from-java-and-passing-parameters)

有关 ProcessBuilder 的更多信息：http: [//docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:26:59.640

不，如果它是您运行 JVM 的平台的常规二进制文件，那应该没关系。

当您从控制台运行时，您是如何运行二进制文件的？

成功生成进程后，您可以像这样读取其标准输出：

```
BufferedReader br = new BufferedReader(new InputStreamReader(process.getInputStream()));

String line;
while ((line = br.readLine()) != null)
{
    System.out.println(line);
}
br.close(); 
```

如果执行该进程时出现任何运行时问题，例如没有运行二进制文件的权限等，则 process.exitValue() 将返回 127。

编辑：看到其他评论，我可以看到您正在使用重定向输入/输出到您的二进制文件。

所以实际上没有参数，但是你需要打开 InputFileName.txt 并使用 process.getOutputStream() 对象来写入你的进程。无需设置 OutputFilename.txt，因为您从 InputStream 读取输出，如有必要，您可以自己将其写入文件。

这个答案详细解释了它：

[https://stackoverflow.com/a/3644288/435583](https://stackoverflow.com/a/3644288/435583)

[https://stackoverflow.com/a/6796053/435583](https://stackoverflow.com/a/6796053/435583)

干杯，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T08:27:51.420

除了使用 Runtime 之外，更简洁的**方法**是使用[JNA](http://en.wikipedia.org/wiki/Java_Native_Access)。[请在此处查看 Fortran](http://www.javaforge.com/wiki/66061)的具体示例。

您甚至可以直接从 Java 调用 Fortan 程序的**子例程等各个部分。**JNA**通常用于**调用 C/C++ 程序，并且通常适合这种类型的用例，我猜你的用例在这里很合适。

# hbase - 如何在 HBase 集群中获取 regionservers 的起始码？

> ID：11203147
> 
> 赞同：6
> 
> 时间：2012-06-26T08:06:41.627
> 
> 标签：hbase, regions

我的 HBase 集群的负载不平衡，所以我想将表的某些区域从一个区域服务器移动到另一个区域，但似乎需要一个区域服务器的起始代码来执行此操作，我怎样才能获得这个起始代码？

我注意到有人的主状态页面是这样的： ![其他人的主状态页面](../Images/a2a71cf0181204264fe51e89af18690f.png)

但我的是这样的： ![我的主状态页面](../Images/ad4207810431d6bb67fe4c17e511fdc7.png)

我在哪里可以获得起始码？

实际上，我想将一个区域从 regionserver k3 移动到 regionserver k2，k3 上的区域是： ![k3 上的区域](../Images/08ae1dc73e4d9056f968e7ade26f7865.png)

我怎样才能做到这一点？详细地 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T12:22:24.810

好的，最后我解决了。

```
/*
 * Copyright: Copyright (c) 2012 Kaliumn
 * 
 * @Description: get regionservers' startcode in a hbase cluster
 * 
 */

package test.hbase;

import java.util.Collection;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.hbase.HServerInfo;
import org.apache.hadoop.hbase.MasterNotRunningException;
import org.apache.hadoop.hbase.ServerName;
import org.apache.hadoop.hbase.ZooKeeperConnectionException;
import org.apache.hadoop.hbase.client.HBaseAdmin;
import org.apache.hadoop.hbase.ipc.HMasterInterface;
import org.gfg.kalium.server.hbaseutil.HConfUtils;

/**
 * class <code> GetStartcode </code> is used to get regionservers' startcode
 * 
 * @author <a href="mailto:ml.huang@kaliumn.com">Meilong Huang</a>
 * @version v1.0.0
 * @date 2012-6-26 05:24:10
 * 
 */

public class GetStartcode {

    /**
     * get regionservers' startcode
     * 
     * @param args
     * @throws ZooKeeperConnectionException
     * @throws MasterNotRunningException
     */
    public static void main(String[] args) throws MasterNotRunningException,
            ZooKeeperConnectionException {
        Configuration conf = HConfUtils
                .setHbaseConf("k2.ccntgrid.org,k3.ccntgrid.org,k4.ccntgrid.org");
        HBaseAdmin admin = new HBaseAdmin(conf);
        HMasterInterface master = admin.getMaster();
        Collection<ServerName> rs = master.getClusterStatus().getServerInfo();
        for (ServerName r : rs) {
            System.out.println(r.getHostname());
            System.out.println(r.getServerName());
            System.out.println(r.getStartcode());
            System.out.println("+++++++++++++++++");
        }
    }
} 
```

实际上，startcode 是“服务器名”的最后一部分。

这些命令将完成将区域从一个区域服务器移动到另一个：

```
> ka@k1 bin % pwd
> /opt/kalium/hbase/bin

> ka@k1 bin % echo "move '3504a80cd4047f78834bcf58bf169e62', 'k4.ccntgrid.org,60020,1340682441023'" | ./hbase shell 
> HBase Shell; enter 'help<RETURN>' for list of supported commands.
Type "exit<RETURN>" to leave the HBase Shell
Version 0.92.1, r1298924, Fri Mar  9 16:58:34 UTC 2012

> move '3504a80cd4047f78834bcf58bf169e62', 'k4.ccntgrid.org,60020,1340682441023'
0 row(s) in 0.5380 seconds 
```

你需要地区代码来完成这个。区域代码是区域名称的最后一部分（在点 (.) 后面）。
![地区代码](../Images/0a9938a5c1c205c19469f564e11f4344.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-02T13:07:01.153

您可以在 hbase shell 中使用命令 status：

```
hbase(main):001:0> status 'simple' 
```

它将打印带有服务器名称、端口和起始码的区域服务器列表。

# android - 为备份/恢复实现 Android App DB 文件的副本是正确的方法吗？

> ID：11203154
> 
> 赞同：0
> 
> 时间：2012-06-26T08:07:11.410
> 
> 标签：android

我正在使用 java 方法将我的应用程序 sqlite db 从应用程序数据目录复制到 sd 中的文件夹，并有代码将这些文件恢复到应用程序数据目录。这是一种正确的做法吗？由于它是数据库文件，是否存在潜在的错误或数据损坏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:18:10.683

这样做完全没问题。SQLite 文件与其他文件没有任何依赖关系，因此将它们复制到 SD 卡将实现您的目标。如果您想确定，可以使用[SQLite 浏览器](http://sqlitebrowser.sourceforge.net/)检查 SQLite 文件的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:22:27.767

我建议将您的数据库导出为 JSON 格式，并将其保存在外部位置以进行备份/恢复。这样，您可以控制您备份的数据（也许您想跳过备份一些机密数据？）并且您可以允许高级恢复功能（仅恢复数据而不是首选项）。

为此，您需要用一个类表示每个表（如果您使用 ORM - 无论如何都需要），然后只需使用其中一个 JSON 库，如“Gson”，即可获取数据库的 JSON 表示. 之后，您可以将其保存到任何您想要的文件中。

# mysql - 如何在mysql中为非关键字段唯一地连接一个值

> ID：11203164
> 
> 赞同：0
> 
> 时间：2012-06-26T08:08:20.267
> 
> 标签：mysql, sql, unique, concatenation

我正在使用第三方 mysql 表（即我无法更改其任何属性），并且我有一行具有 id（键）、名称和值。

我想将唯一的缓存键存储到名为 cacheKeys.. 的行中，这是我的 sql 语句

```
$query = "INSERT INTO ".$tableName." (name, value) VALUES ('CacheKeys', '".$key."') ON
DUPLICATE KEY UPDATE value = CONCAT_WS (',', $tableName.value, '$key')"; 
```

我已经实现了我的缓存算法，所以每次有人添加缓存键时，我都会检查它是否已经存在（从上面的 CacheKeys 行），如果存在，我会从缓存中获取它。否则我存储它。

问题是sql写入操作似乎需要时间，并且它经常存储重复的cacheKeys ie：currency,defaultCurrencyId,user19,currency1,currency1,currency1,currency1,currency1

所以我需要检查一下，我没有在 cacheKeys 字段中添加重复的键。我需要使用 SQL 来做到这一点（使用 php，即正则表达式等会非常昂贵）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:32:11.430

尝试这个：：

```
 INSERT INTO tb (firstname, lastname) VALUES ('Jack', 'Doe') IF NOT  
 EXISTS ( SELECT * FROM tb WHERE firstname='Jack' AND lastname='Doe' ); 
```

# mysql - 使用 REGEXP 将字符串变量添加到 MySQL SELECT 时是否需要添加引号？

> ID：11203166
> 
> 赞同：0
> 
> 时间：2012-06-26T08:08:27.787
> 
> 标签：mysql, regex, variables

在我正在做的网站上，用户可以输入搜索字符串，例如

```
 "do you have foo bar" 
```

我正在使用 Coldfusion8 创建一个 | 分隔的列表，如下所示：

```
<cfif len(LOCAL.Search.s_artikelbezeichnung) GT 0>
    <cfloop list="#LOCAL.Search.s_artikelbezeichnung#" delimiters=", " index="terms">
        <cfset variables.searchTerms = variables.searchTerms & terms & '|'>;
    </cfloop>   
    <cfset variables.searchTerms = Left(variables.searchTerms, len(variables.searchTerms)-1)>
</cfif> 
```

这应该给我：

```
 do|you|have|foo|bar    // param_artikelbezeichnung 
```

在MySQL中，我正在做一个正则表达式：

```
...
AND ( (param_artikelbezeichnung = '') AND (1=1) 
    OR (
        a.artikelbezeichnung REGEXP param_artikelbezeichnung 
        ) 
```

**我的问题：**
我必须在变量周围添加引号 '' 还是可以这样输入？我有一堆动态条件需要添加到搜索中，所以我正在寻找一些一般信息。

感谢帮助！

**编辑**：
好的，这就是我从数据库中得到的：

```
 a.artikelbezeichnung REGEXP param_artikelbezeichnung 
     >> using foo|bar OK
  a.artikelbezeichnung REGEXP param_artikelbezeichnung
     >> not passing a value > ERROR 
```

所以我不需要引号，但我需要将一些东西传递给正则表达式，以免在空字段上产生错误。像这样的工作：

```
 AND ( (param_artikelbezeichnung = '') AND (0=1) 
      OR (  a.artikelbezeichnung REGEXP param_artikelbezeichnung ) 
```

几乎是另一个问题。谢谢回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:37:13.400

根据[mysql doc](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)，您需要将搜索字符串/正则表达式放在单引号中，如下所示：

```
AND ( (param_artikelbezeichnung = '') AND (1=1) 
    OR (
        a.artikelbezeichnung REGEXP 'do|you|have|foo|bar'
        ) 
```

否则会在 mysql 中产生语法错误。

* * *

**更新：**

由于您处于存储过程中，因此您可以这样做。对于其他读者：`param_artikelbezeichnung`是coldfusion调用的存储过程的一个参数。

```
SELECT COUNT(a.id) AS recs, a.artikelnummer, a.nos, a.nos_anzeige
FROM artikel AS a
WHERE a.aktiv = 'ja'
AND a.artikelbezeichnung REGEXP IF(artikelbezeichnung = '', '.', artikelbezeichnung ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:29:45.143

如果你把它放在引号中，引擎会将它视为一个字符串，否则它在该行的值。

# python - 如何在 python 中启动子进程而不是等待它返回

> ID：11203167
> 
> 赞同：3
> 
> 时间：2012-06-26T08:08:31.007
> 
> 标签：python, django, r, subprocess

我正在 django 中构建一个与用 R 编写的大型程序交互的站点，并且我希望在运行 R 程序的站点上有一个按钮。我有那个工作，使用`subprocess.call()`，但是，正如预期的那样，服务器在返回之前不会继续渲染视图`subprocess.call()`。由于这个程序可能需要几个小时才能运行，所以这不是一个真正的选择。
有什么方法可以运行 R 程序并继续执行 python 代码？我已经四处搜索，并查看了`subprocess.Popen()`，但我无法让它工作。
这是我在视图中使用的通用代码：

```
if 'button' in request.POST:
    subprocess.call('R CMD BATCH /path/to/script.R', shell=True)
    return HttpResponseRedirect('') 
```

希望我只是忽略了一些简单的事情。
谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T08:11:38.300

```
subprocess.Popen(['R', 'CMD', 'BATCH', '/path/to/script.R']) 
```

该过程将异步启动。

例子：

```
$ cat 1.py
import time
import subprocess

print time.time()
subprocess.Popen(['sleep', '1000'])
print time.time()

$ python 1.py
1340698384.08
1340698384.08 
```

您必须注意，即使在主进程停止后，子进程也会运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:11:57.660

您可以为 subprocess.call() 使用包装器，该包装器将拥有自己的线程，在其中调用 subprocess.call() 方法。

# apache - .htaccess 重写路径而不更改可见 URL

> ID：11203170
> 
> 赞同：1
> 
> 时间：2012-06-26T08:08:42.420
> 
> 标签：apache, .htaccess, mod-rewrite

我有一个看起来像这样的链接：

```
www.domain.com/file.php 
```

我想创建 .htaccess 条目，这样如果有人去

```
www.domain.com/folder/name 
```

他们将被重定向到

```
www.domain.com/file.php 
```

我创建了有效的 .htaccess 条目，它看起来像这样：

```
RewriteRule ^folder/name$ /file.php [L,R=301,L] 
```

我唯一的问题是在浏览器地址字段中用户看到

```
www.domain.com/file.php 
```

我想让他看到的地方

```
www.domain.com/folder/name 
```

是否可以这样做，如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:30:34.097

您不需要重定向，这会导致它重新加载页面，从而导致新 URL 出现在地址字段中。您只想告诉服务器“友好”URL 代表什么目录路径。试试这个：

`RewriteRule ^folder/name$ /file.php [L]`

# c# - 在 Linux 上开发 C#

> ID：11203171
> 
> 赞同：118
> 
> 时间：2012-06-26T08:08:43.943
> 
> 标签：c#, .net, linux, winforms, ide

我想知道是否有有效的开源工具可以在 Linux（Ubuntu）上开发 C# 应用程序。特别是，我必须开发 Windows 窗体应用程序。

我知道**[Mono](https://en.wikipedia.org/wiki/Mono_%28software%29)项目**，但我从未使用过它。在 Ubuntu 上设置 .NET 开发环境的最佳工具（IDE、编译器等）是什么？

在 Linux 上开发的软件可以在 Windows 上运行吗？是否存在不同的行为或不兼容？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-06-26T08:11:45.827

MonoDevelop，与 Mono Project 相关的 IDE 应该足以在 Linux 上进行 C# 开发。现在我不知道在 Linux 上用于 C# 开发的任何好的分析器和其他工具。但是再次提醒您，C# 是一种更原生于 Windows 的语言。与 linux 相比，你更适合为 windows 开发 C# 应用程序。

编辑：当您从 Ubuntu 软件中心下载 MonoDevelop 时，它将包含您立即开始所需的几乎所有内容（编译器、运行时环境、IDE）。如果您想了解更多信息，请参阅以下链接：

*   [http://monodevelop.com/](http://monodevelop.com/)
*   [http://en.wikipedia.org/wiki/MonoDevelop](http://en.wikipedia.org/wiki/MonoDevelop)
*   [http://en.wikipedia.org/wiki/Mono_%28software%29](http://en.wikipedia.org/wiki/Mono_%28software%29)
*   [http://www.mono-project.com/Development_Environments](http://www.mono-project.com/Development_Environments)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-03-30T07:44:05.320

现在微软正在迁移到开源 - 请参阅*[CoreFX](https://github.com/dotnet/corefx)* (GitHub)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-26T08:13:59.507

Mono Develop 是您想要的，如果您使用过 Visual Studio，您应该会发现它足够简单，可以开始使用。

如果我没记错的话，你应该可以安装`sudo apt-get install monodevelop`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-26T08:16:17.103

我建议使用 MonoDevelop。

它非常明确地设计用于 Mono，并且全部设置为在 C# 中开发。

在 Ubuntu 上安装它的最简单方法是在 Ubuntu 中安装 monodevelop 包。（[ubuntu.com](http://packages.ubuntu.com/search?keywords=monodevelop)[上 Mono 上的链接](http://mono-project.com/DistroPackages/Ubuntu) ）（但是，如果您想安装更新的版本，我不确定哪个 PPA 合适）

但是，我不建议使用 WinForms 工具包进行开发 - 我不希望它在 Windows 和 Mono 中具有相同的行为（实现非常不同）。有关与 Mono 一起使用的 UI 工具包的概述，您可以转到[Mono-project 上的信息页面](http://mono-project.com/Gui_Toolkits)。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2020-11-08T15:58:15.180

这是一个老问题，但查看次数很高，所以我认为应该添加一些新信息：同时发生了很多变化，您现在也可以[在 linux 上使用微软自己的 .NET Core](https://docs.microsoft.com/en-us/dotnet/core/install/linux)。它也可用于 32 位和 64 位的 ARM 版本。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-06-26T08:15:46.447

[Mono](http://www.mono-project.com/Main_Page)是一个运行时环境，可以运行 .NET 应用程序，并且可以在 Windows 和 Linux 上运行。它包括一个 C# 编译器。

作为 IDE，您可以使用[MonoDevelop](http://monodevelop.com/)，我想也有一些可用于 Eclipse 的东西。

请注意，对 Mono 的 WinForms 支持是存在的，但有些欠缺。一般来说，Mono 开发人员似乎更喜欢不同的 GUI 工具包，例如 Gtk#。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-26T11:34:12.897

您也可以使用[conda](https://docs.conda.io/en/latest/miniconda.html)安装它（在 Ubuntu 上测试）：

```
conda create --name csharp
conda activate csharp
conda install -c conda-forge mono 
```

# sql-server - 如何合并来自 2 个表的查询并将其分组到 WCF 服务上的 JSON 数组中？

> ID：11203182
> 
> 赞同：0
> 
> 时间：2012-06-26T08:09:15.063
> 
> 标签：sql-server, json, wcf

我的`SQL Server`数据库上有 2 个表，然后我想合并到我的 WCF 服务上的 1 个 JSON 数组中。

表格1：

```
----------------
| type | total |
----------------
|   A  |   2   |
|   B  |   3   |
|   C  |   4   |
---------------- 
```

表2：

```
----------------
| type | total |
----------------
|   A  |   5   |
|   B  |   6   |
|   C  |   7   |
---------------- 
```

我想要这样的 JSON 数组：

```
{"GetResult":
        [
          {"table1":
               [
                 {"type":"A", "total":"2"},
                 {"type":"B", "total":"3"},
                 {"type":"C", "total":"4"}
               ]
          },
          {"table2":
               [
                 {"type":"A", "total":"5"},
                 {"type":"B", "total":"6"},
                 {"type":"C", "total":"7"}
               ]
          }
        ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:43:44.237

首先，您需要将数据表转换为`JSONArray`. 此[链接](http://rpnc-shivanjali.blogspot.in/2012/04/convert-datatable-to-jsonarray-in-net.html)将为您提供帮助。

然后你需要组合 json 数组的 using ，如[组合 JSON 数组](https://stackoverflow.com/questions/2822079/combining-json-arrays)`JavaScript`中所做的那样

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:58:37.760

您可以创建您的数据合同，例如

```
[DataContract]
public class ResultData
{
    [DataMember]
    public List<DataItem> Table1 { get; set; }

    [DataMember]
    public List<DataItem> Table2 { get; set; }
}

[DataContract]
public class DataItem
{
    [DataMember]
    public string Type { get; set; }

    [DataMember]
    public string Total{ get; set; }

} 
```

然后将服务合同添加为

```
 [WebGet(UriTemplate = "/ResultData", ResponseFormat = WebMessageFormat.Json)]
 ResultData GetJsonData(); 
```

# c# - 函数上的 C# 重载 ++ 运算符

> ID：11203188
> 
> 赞同：0
> 
> 时间：2012-06-26T08:10:10.873
> 
> 标签：c#, operators, log4net, indentation

我正在寻找一种方法来缩进我的日志语句。在进行了一些谷歌搜索和搜索之后，我在我的 log4net 包装器中实现了一个 Indent 类来处理我的记录器语句的缩进。

现在我需要调用这些方法来增加和减少缩进。

```
_logger.Indent.Increase();
_logger.Debug(msg);
...
_logger.Indent.Decrease(); 
```

但是在每个函数中都有这两条额外的行等等会不必要地污染代码。是否有一些语法糖果方法可以更好地做到这一点，或者我应该以完全不同的方式做到这一点？

无论如何，这会很好！:P

```
_logger.Debug(msg)++; //Increase indent for this logger statement and all to come.
_logger.Debug(msg)--; //Decrease Indent and logg... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:57:16.297

您可以为记录器本身定义`++`and`--`运算符以分别增加和减少缩进，并让`Debug`（和`Warn`等`Error`）也返回记录器，然后您可以使用更好的，（但由于括号中的括号可能并不完美预增量）语法：

```
// Increment the indent, then log a message
(++_logger).Debug(msg);

// Log a message then decrement the indent
_logger.Debug(msg)--; 
```

对我来说，这更有意义，因为使用 [inc|dec]rement 之前的运算符你说“[inc|dec]rease the indent, **then** log a message”，而使用 [inc|dec]之后的rement 运算符的意思是“记录一条消息**，然后**[inc|dec]rease the indent”。

这样做还允许您使用以下方法调整增量：

```
++_logger;
--_logger; 
```

您还可以定义一个新类，如下所示：

```
public sealed class LogScope : IDisposable
{
    private readonly Logger _logger;

    public LogScope(Logger logger)
    {
        _logger = logger;
        ++_logger;
    }

    public void Dispose()
    {
        --_logger;
    }
} 
```

然后你可以这样做：

```
_logger.Debug("This message is not indented");

using (new LogScope(_logger))
{
    // Anything logged within the using block will be indented
    _logger.Debug("This message is indented");
    using (new LogScope(_logger))
    {
        // LogScopes can be nested such that logging here will be double-indented
        _logger.Debug("This message is double-indented");
    }
    _logger.Debug("This message is back to single-indent");
}

// Logging here will revert to the original indent
_logger.Debug("This message is not indented"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:15:24.787

如果您让 Debug 函数返回 loggers Indent 对象，并且在 Indent 类中您有 ++ 和 -- 的静态隐式运算符，您可以这样做。你是这个意思吗？

# c++ - PThread 初学者 - 启动、同步、停止工作线程

> ID：11203194
> 
> 赞同：4
> 
> 时间：2012-06-26T08:10:26.117
> 
> 标签：c++, synchronization, pthreads, backgroundworker

我有以下经理<->工人情况：

```
class Manager {
private:
    pthread_attr_t workerSettings;
    pthread_t worker;
    pthread_cond_t condition;
    pthread_mutex_t mutex;
    bool workerRunning;

    static void* worker_function(void* args) {
        Manager* manager = (Manager*)args;

        while(true) {
            while(true) {
                pthread_mutex_lock(&manager->mutex);
                if(/* new data available */)
                {
                    /* copy new data from shared to thread memory */
                    pthread_mutex_unlock(&manager->mutex);
                }
                else
                {
                    pthread_mutex_unlock(&manager->mutex);
                    break;
                }

                /* process the data in thread memory */

                pthread_mutex_lock(&manager->mutex);
                /* copy results back to shared memory */
                pthread_mutex_unlock(&manager->mutex);
            }

            pthread_mutex_lock(&manager->mutex);

            // wait for new data to arrive
            while(manager->workerRunning && !/* new data available*/)
                pthread_cond_wait(&manager->condition, &manager->mutex);

            // check if we should continue running
            if(!manager->workerRunning)
            {
                pthread_mutex_unlock(&manager->mutex);
                break;
            }

            pthread_mutex_unlock(&manager->mutex);
        }

        pthread_exit(NULL);
        return NULL; // just to avoid the missing return statement compiler warning
    }

public:
    Manager() : workerRunning(true) {
        pthread_cond_init(&condition, NULL);
        pthread_mutex_init(&mutex, NULL);
        pthread_attr_init(&workerSettings);
        pthread_attr_setdetachstate(&workerSettings, PTHREAD_CREATE_JOINABLE);
        pthread_create(&worker, &workerSettings, worker_function, (void*)this);
    }

    // this *may* be called repeatedly or very seldom
    void addData(void) {
        pthread_mutex_lock(&mutex);
        /* copy new data into shared memory */
        pthread_cond_signal(&condition);
        pthread_mutex_unlock(&mutex);
    }

    ~Manager()
    {
        // set workerRunning to false and signal the worker
        pthread_mutex_lock(&mutex);
        workerRunning = false;
        pthread_cond_signal(&condition);
        pthread_mutex_unlock(&mutex);

        // wait for the worker to exit
        pthread_join(worker, NULL);

        // cleanup
        pthread_attr_destroy(&workerSettings);
        pthread_mutex_destroy(&mutex);
        pthread_cond_destroy(&condition);
    }
}; 
```

我在几个地方对此并不完全确定：

*   Manager 在其构造函数中生成一个新线程这一事实是否被认为是一种不好的做法？（我只会有一个 Manager 对象，所以我想应该没问题）
*   pthread_exit 怎么样 - 我在很多教程中都看到了这一点，但我不太明白为什么它应该在那里？我不能简单地返回函数以退出线程吗？我还认为返回 NULL 是死代码，但是 gcc 在它丢失时会发出警告，因为它显然不知道 pthread_exit 在那个时候已经杀死了线程。
*   关于构造函数 - 我可以在生成线程后立即销毁线程 attr 对象（workerSettings）还是必须在线程的整个生命周期内保持有效？
*   关于析构函数：这是正确的方法吗？

最重要的是：

*   您有经验的眼睛是否看到那里有任何同步问题？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:44:32.260

你问...

> Manager 在其构造函数中生成一个新线程这一事实是否被认为是一种不好的做法？

在大多数情况下，RAII 足以处理对象创建和资源获取。在某些情况下，您可能希望实现延迟资源初始化：当您第一次构造对象时，然后您继续进行初始化。例如，这可以通过 ctor（默认或参数化）和打开/启动例程来实现。尽管您也可以在 ctor 中执行此操作，并通过在进程堆中分配对象（通过 operator new）来实现延迟对象创建。这取决于您的要求、软件设计注意事项和公司软件开发标准。因此，您可以在 ctor 中创建一个线程，或者可能希望或需要在应用程序/对象生命周期的后期生成它。

> pthread_exit 怎么样

这不是必需的。它终止调用线程，使其退出状态可用于任何等待线程（即通过 pthread_join()）。当任何线程从其启动例程返回时，会发生对 pthread_exit() 的隐式调用。基本上，pthread_exit() 函数提供了一个类似于 exit() 的接口，但基于每个线程（包括取消清理处理程序）。但要注意从取消清除处理程序或从 TSD（线程特定数据区域）中分配的对象的析构函数调用 pthread_exit() - 这可能会导致不良副作用。

> 关于构造函数 - 我可以在生成线程后立即销毁线程 attr 对象（workerSettings）还是必须在线程的整个生命周期内保持有效？

是的，您可以立即销毁它：它不会影响已创建的线程。

> 关于析构函数：这是正确的方法吗？

与 ctor 相同：您可以使用 dtor 和关闭/停止例程，或者可以在 dtor 中完成所有操作：取决于您的特定需求（例如对象可重用性等）。只是让 dtor 不扔。

> 您有经验的眼睛是否看到那里有任何同步问题？

我可能建议使用 pthread_testcancel()，在线程中引入显式取消点，并在控制线程中发出 pthread_cancel() + pthread_join()（应该返回 PTHREAD_CANCELED）来停止子线程，而不是同步变量 workerRunning。当然，如果它适用于您的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T15:43:03.497

您应该在返回后立即检查新数据`pthread_cond_wait`，如果没有新数据则再次等待。如果你得到一个虚假的唤醒，就会发生这种情况（把它想象成内核不小心把重物从楼梯上掉下来把你吵醒了），最好立即等待而不是更改，`workerWaiting`然后解锁和重新锁定互斥锁两次，然后再次等待.

RAII 锁类型会使代码更加简洁：

```
 while(true) {
        while(true) {
            {
                scoped_lock l(&manager->mutex);
                if(/* new data available */)
                {
                    /* copy new data from shared to thread memory */
                }
                else
                    break;
            }

            /* process the data in thread memory */

            scoped_lock l(&manager->mutex);
            /* copy results back to shared memory */
        }

        scoped_lock l(&manager->mutex);
        // check if we should continue running
        if(!manager->workerRunning)
            break;

        // wait for new data to arrive
        manager->workerWaiting = true;
        while (!/* new data available */)
            pthread_cond_wait(&manager->condition, &manager->mutex);
        manager->workerWaiting = false;
    } 
```

按照奥列格的建议使用`pthread_cancel`会进一步简化它。

在您编辑代码以处理虚假唤醒之后，如果您使用 RAII 并对其进行重组，它会变得更加简单：

```
 while(true)
    {
        {
            scoped_lock l(&manager->mutex);
            // wait for new data to arrive
            while(manager->workerRunning && !/* new data available*/)
                pthread_cond_wait(&manager->condition, &manager->mutex);

            // check if we should continue running
            if(!manager->workerRunning)
                break;

            /* copy new data from shared to thread memory */
        }

        /* process the data in thread memory */

        scoped_lock l(&manager->mutex);
        /* copy results back to shared memory */
    }
    return NULL; 
```

如果没有 scoped_lock 之类的东西，如果`/* copy new data from shared to thread memory */`或`/* process the data in thread memory */`抛出异常会发生什么？你永远不会解锁互斥锁。

RAII 类型可以很简单：

```
struct scoped_lock {
  explicit scoped_lock(pthrad_mutex_t* m) : mx(m) {
    pthread_mutex_lock(mx);
  }
  ~scoped_lock() { pthread_mutex_unlock(mx); }
private:
  pthread_mutex_t* mx;
  scoped_lock(const scoped_lock&);
  scoped_lock operator=(const scoped_lock&);
}; 
```

# ajax - JSF/PrimeFaces ajax 请求上的会话超时和 ViewExpiredException 处理

> ID：11203195
> 
> 赞同：46
> 
> 时间：2012-06-26T08:10:29.927
> 
> 标签：ajax, jsf-2, primefaces, session-timeout, viewexpiredexception

我发现这篇文章对非 ajax 请求很有用[How to handle session expire and ViewExpiredException in JSF 2?](https://stackoverflow.com/questions/4992526/how-to-handle-session-expiration-and-viewexpiredexception-in-jsf-2) 但是当我使用 AJAX 调用提交时，我无法使用它。

假设在 primefaces 对话框中，我正在使用 AJAX 进行发布请求，并且会话已经超时。我看到我的页面卡住了。

如何解决这种情况，以便当我使用 AJAX 发布时，我可以将他重定向到我的视图过期页面，然后将他转发到类似于上面链接中的解决方案的登录页面？

JSF2/Primefaces/Glassfish

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-26T11:14:11.623

默认情况下，在 ajax 请求期间抛出的异常在客户端完全没有反馈。只有当您在项目阶段设置为`Development`和使用的情况下运行 Mojarra 时`<f:ajax>`，您才会收到带有异常类型和消息的纯 JavaScript 警报。但除此之外，在 PrimeFaces 中，默认情况下根本没有反馈。但是，您可以在服务器日志和 ajax 响应中看到异常（在 webbrowser 的开发人员工具集的“网络”部分）。

您需要实现一个自定义，当队列中[`ExceptionHandler`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExceptionHandler.html)有 a 时，它基本上完成以下工作：`ViewExpiredException`

```
String errorPageLocation = "/WEB-INF/errorpages/expired.xhtml";
context.setViewRoot(context.getApplication().getViewHandler().createView(context, errorPageLocation));
context.getPartialViewContext().setRenderAll(true);
context.renderResponse(); 
```

或者，您可以使用 JSF 实用程序库[OmniFaces](http://omnifaces.org)。它有一个[`FullAjaxExceptionHandler`](http://omnifaces.org/docs/javadoc/current/org/omnifaces/exceptionhandler/FullAjaxExceptionHandler.html)正是为了这个目的（源代码[在这里](https://github.com/omnifaces/omnifaces/blob/master/src/main/java/org/omnifaces/exceptionhandler/FullAjaxExceptionHandler.java)，展示演示[在这里](http://showcase.omnifaces.org/exceptionhandlers/FullAjaxExceptionHandler)）。

### 也可以看看：

*   [为什么使用 JSF ExceptionHandlerFactory 而不是 <error-page> 重定向？](https://stackoverflow.com/questions/10534187/why-use-a-jsf-exceptionhandlerfactory-instead-of-error-page-redirection)
*   [处理 AJAXified 组件的 JSF 2.0 异常的正确方法是什么？](https://stackoverflow.com/questions/10449862/what-is-the-correct-way-to-deal-with-jsf-2-0-exceptions-for-ajaxified-components)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-02-19T18:23:52.047

@BalusC 的答案和[这篇文章](https://wmarkito.wordpress.com/2012/04/05/adding-global-exception-handling-using-jsf-2-x-exceptionhandler/)的合并，我解决了我的问题！

我的 ExceptionHandlerWrapper：

```
public class CustomExceptionHandler extends ExceptionHandlerWrapper {

    private ExceptionHandler wrapped;

    CustomExceptionHandler(ExceptionHandler exception) {
        this.wrapped = exception;
    }

    @Override
    public ExceptionHandler getWrapped() {
        return wrapped;
    }

    @Override
    public void handle() throws FacesException {
        final Iterator<ExceptionQueuedEvent> i = getUnhandledExceptionQueuedEvents().iterator();
        while (i.hasNext()) {
            ExceptionQueuedEvent event = i.next();
            ExceptionQueuedEventContext context
                    = (ExceptionQueuedEventContext) event.getSource();

            // get the exception from context
            Throwable t = context.getException();

            final FacesContext fc = FacesContext.getCurrentInstance();
            final Map<String, Object> requestMap = fc.getExternalContext().getRequestMap();
            final NavigationHandler nav = fc.getApplication().getNavigationHandler();

            //here you do what ever you want with exception
            try {

                //log error ?
                //log.log(Level.SEVERE, "Critical Exception!", t);
                if (t instanceof ViewExpiredException) {
                    requestMap.put("javax.servlet.error.message", "Session expired, try again!");
                    String errorPageLocation = "/erro.xhtml";
                    fc.setViewRoot(fc.getApplication().getViewHandler().createView(fc, errorPageLocation));
                    fc.getPartialViewContext().setRenderAll(true);
                    fc.renderResponse();
                } else {
                    //redirect error page
                    requestMap.put("javax.servlet.error.message", t.getMessage());
                    nav.handleNavigation(fc, null, "/erro.xhtml");
                }

                fc.renderResponse();
                // remove the comment below if you want to report the error in a jsf error message
                //JsfUtil.addErrorMessage(t.getMessage());
            } finally {
                //remove it from queue
                i.remove();
            }
        }
        //parent hanle
        getWrapped().handle();
    }
} 
```

我的异常处理器工厂：

```
public class CustomExceptionHandlerFactory extends ExceptionHandlerFactory {

    private ExceptionHandlerFactory parent;

    // this injection handles jsf
    public CustomExceptionHandlerFactory(ExceptionHandlerFactory parent) {
        this.parent = parent;
    }

    @Override
    public ExceptionHandler getExceptionHandler() {
        ExceptionHandler handler = new CustomExceptionHandler(parent.getExceptionHandler());
        return handler;
    }

} 
```

我的面孔-config.xml

```
<?xml version='1.0' encoding='UTF-8'?>
<faces-config version="2.2"
              xmlns="http://xmlns.jcp.org/xml/ns/javaee"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-facesconfig_2_2.xsd">

    <factory>
        <exception-handler-factory>
            your.package.here.CustomExceptionHandlerFactory
        </exception-handler-factory>
    </factory>
</faces-config> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-06T00:55:46.853

我在生产模式下使用 Mojarra 2.1.7 和 JBoss 7。会话到期后，AJAX 调用返回错误 XML 文档。您可以使用 f:ajax 的常用 onerror 处理程序轻松捕获此错误。

```
<script type="text/javascript">
    function showError(data) {
        alert("An error happened");
        console.log(data);
    }
</script>

<h:commandLink action="...">
    <f:ajax execute="..." render="..." onerror="showError"/>
</h:commandLink> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T09:30:11.437

我已将它包含在我的 ViewExpiredExceptionHandler 类中，它在 WAS 中对我来说效果很好

```
 public void handle() throws FacesException {
    FacesContext facesContext = FacesContext.getCurrentInstance();
                 for (Iterator<ExceptionQueuedEvent> iter = getUnhandledExceptionQueuedEvents()
            .iterator(); iter.hasNext();) {
        Throwable exception = iter.next().getContext().getException();

        if (exception instanceof ViewExpiredException) {

            final ExternalContext externalContext = facesContext
                    .getExternalContext();

            try {

                facesContext.setViewRoot(facesContext.getApplication()
                        .getViewHandler()
                        .createView(facesContext, "/Login.xhtml"));     //Login.xhtml is the page to to be viewed. Better not to give /WEB-INF/Login.xhtml
                externalContext.redirect("ibm_security_logout?logoutExitPage=/Login.xhtml");    //  when browser back button is pressed after session timeout, I used this.         
                facesContext.getPartialViewContext().setRenderAll(true);
                facesContext.renderResponse();

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } finally {
                iter.remove();
            }
        }

    }

    getWrapped().handle();
} 
```

希望这可以帮助

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-10T09:28:41.010

我遇到了这个问题，当用户在会话超时后执行任何操作时，需要显示一个确认弹出窗口，我提出的解决方案是：

```
<security:http use-expressions="true" auto-config="true" entry-point-ref="authenticationEntryPoint">
            <security:intercept-url pattern="/common/auth/**" access="permitAll" />
            <security:intercept-url pattern="/javax.faces.resource/**" access="permitAll" />
            <security:intercept-url pattern="/**/   *.*" access="hasRole('ROLE_ADMIN')" />
            <security:form-login login-page="/common/auth/login.jsf" />
            <!-- <security:remember-me key="secret" services-ref="rememberMeServices" /> -->
            <security:logout invalidate-session="true" logout-success-url="/common/auth/login.jsf" />
        </security:http>
        <bean id="authenticationEntryPoint" class="com.x.y.MyRedirectEntryPoint" >
           <property name="loginFormUrl" value="/common/auth/login.jsf"/>
        </bean> 
```

MyRedirectEntryPoint 应该扩展 AuthenticationProcessingFilterEntryPoint 并覆盖开始方法

```
public void commence(HttpServletRequest request, HttpServletResponse response,   AuthenticationException authException)
        throws IOException, ServletException {
    boolean ajaxRedirect = request.getHeader("faces-request") != null
            && request.getHeader("faces-request").toLowerCase().indexOf("ajax") > -1;
    if (ajaxRedirect) {
        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
        if (authentication == null) {
            response.sendError(403);

        }
    } else {

        super.commence(request, response, authException);
    }
} 
```

现在你可以简单地绑定一个回调 javascript 函数来捕获抛出的 403 错误并做任何你想做的事情：

```
$(document).bind('ajaxError',
                    function(event, request, settings, exception){
                          if (request.status==403){
                             //do whatever you wanted may be show a popup or just redirect
                             window.location = '#{request.contextPath}/';
                             }
                             }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-02-28T10:22:01.380

对我来说，一个简单的客户端 javascript 处理程序有效：

```
function handleAjaxExpired(xhr,status,args) {
    // handler for "oncomplete" ajax callback
    if ( xhr.responseXML.getElementsByTagName('error-name').length ) {
        // "<error-name>" tag is present -> check for "view expired" exception
        html = xhr.responseXML.getElementsByTagName('error-name')[0].innerHTML;

        if ( html.indexOf('ViewExpiredException') > -1 ) {
            // view expired exception thrown
            // do something / reload page
            if ( confirm('session expired -> reload page?') ) {
                document.location.href=document.location.href;
            }
        }
    }
} 
```

此处理程序在触发 UI 元素时从“oncomplete”属性调用，例如这里从 Primefaces 数据表中的 rowSelect 事件调用：

```
<p:ajax event="rowSelect" oncomplete="handleAjaxExpired(xhr,status,args)" /> 
```

**更新：**为避免向每个启用 ajax 的元素添加“oncomplete”属性，此 javascript 代码在所有 ajax 响应中全局搜索错误：

```
(function() {
    // intercept all ajax requests
    var origXHROpen = XMLHttpRequest.prototype.open;

    XMLHttpRequest.prototype.open = function() {

        this.addEventListener('load', function() {
            handleAjaxExpired(this);
        });
        origXHROpen.apply(this, arguments);
    };
})(); 
```

此代码使 PrimeFaces UI 元素中的“oncomplete”属性过时。

# javascript - 如何将 JSON 文本转换为 JSON 对象？

> ID：11203197
> 
> 赞同：1
> 
> 时间：2012-06-26T08:10:53.353
> 
> 标签：javascript, json

> **可能重复：**
> [如何在 JavaScript 中解析 JSON](https://stackoverflow.com/questions/4935632/how-to-parse-json-in-javascript)

```
{
 "data": [
          {
             "name": "JoongBum Lee",
             "id": "526210623"
          },
          {
             "name": "\uc774\uc778\uaddc",
             "id": "560021193"
          },
          {
             "name": "SunAh Han",
             "id": "589325702"
          }
    ]
} 
```

我有 JSON 数据，我想将此数据转换为 javacript 对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:12:50.683

使用[`JSON.parse`^([MDN])](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse)。它是在 ECMAScript 5 中引入的，因此 <=IE7 不支持。你可以找到一个[JSON 库](https://github.com/douglascrockford/JSON-js)来填充对旧浏览器的支持，或者如果你使用 jQuery，你可以使用[`$.parseJSON`^([jQuery docs])](http://api.jquery.com/jQuery.parseJSON/)。

```
var str = '"data": [ { "name": "JoongBum Lee", "id": "526210623" }, { "name": "\uc774\uc778\uaddc", "id": "560021193" }, { "name": "SunAh Han", "id": "589325702" } ] }';
var obj = JSON.parse(str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:19:11.507

```
var dataString = "{/* SOMETHING */}"
var obj = eval("(" + dataString + ")"); 
```

# bash - 如何优雅地停止bash脚本中的无限循环？

> ID：11203201
> 
> 赞同：8
> 
> 时间：2012-06-26T08:11:03.517
> 
> 标签：bash, shell, infinite-loop

我需要每隔 X 秒运行一次应用程序，因此，只要 cron 不能以这种方式使用秒数，我就编写了一个带有无限循环的 bash 脚本，其中有 X 秒睡眠。

当我必须手动停止正在运行的脚本时，我想以正确的方式进行 - 让应用程序完成运行，并且下次不要进入循环。

你有什么想法，如何实现？我考虑过传递参数，但我找不到如何将参数传递给正在运行的脚本。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-26T08:32:20.393

你可以捕获一个信号，比如 SIGUSR1：

```
echo "My pid is: $$"
finish=0
trap 'finish=1' SIGUSR1

while (( finish != 1 ))
do
    stuff
    sleep 42
done 
```

然后，当您想在下一次迭代中退出循环时：

```
kill -SIGUSR1 pid 
```

`pid`脚本的进程 ID在哪里。如果在睡眠期间发出信号，它将唤醒（睡眠一直到任何信号出现）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T08:16:55.253

您可以通过文件传递一些参数。在每次迭代中，您都可以阅读此文件并查看您的运行条件是否已更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T10:45:29.693

前面发布的陷阱解决方案适用于大型循环，但对于仅循环单个或几个命令的常见情况来说很麻烦。在这种情况下，我推荐以下解决方案：

```
while whatever; do
    command || break
done 
```

如果命令有一个非零退出代码，这将退出循环，如果它被中断就会发生。因此，除非`command`handle `SIGINT`，否则按 ctrl-C 将停止当前命令并退出循环。

编辑：更仔细地阅读您的问题后，我看到您希望当前命令继续执行。在这种情况下，此解决方案不适用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T12:29:42.230

如果您无论如何都必须进行一些清理，则以下结构可能是合适的。如 cdarke 的答案所示使用 kill 。

```
#===============================================================
#  FUNCTION DEFINITIONS
#===============================================================
# . . .

#===  FUNCTION  ================================================
#          NAME:  cleanup
#   DESCRIPTION:  
#===============================================================
cleanup ()
{
  # wait for active children, remove empty logfile, ..., exit
  exit 0
} # ----------  end of function cleanup  ----------

#===============================================================
#   TRAPS
#===============================================================
trap  cleanup SIGUSR1

#===============================================================
#   MAIN SCRIPT
#===============================================================
echo -e "Script '$0' / PID ${$}"

while : ; do                                # infinite loop
  # . . .
  sleep 10
done
# . . .

#===============================================================
#   STATISTICS / CLEANUP
#===============================================================
cleanup 
```

# c# - 反序列化结构数组

> ID：11203202
> 
> 赞同：1
> 
> 时间：2012-06-26T08:11:18.370
> 
> 标签：c#, arrays, struct, deserialization

我再次通过 UDP 从 C++ 程序接收结构，现在我将结构移植到 C#，例如：

```
[Serializable]
struct sample
{
public int in;
public byte[] arr;
public int[] arr2;
public float fl;
} 
```

好的，那么解串器如何知道一个数组何时结束而另一个数组何时开始？可以以某种方式指定数组有多大？我不想使用fixed，因为这使我的代码不安全，而且我也不能使用构造函数，因为不允许结构包含没有参数的构造函数。

有什么建议么？

//编辑：

已知阵列的长度为 32 和 4。问题是我不知道如何将此信息传递给反序列化器

然后发件人是 C++ 一个像这样的作品：

```
char* pr = &sample;
int i=0;
while (i<sizeof(sample))
{
 udp.send(*(pr+i))
 i++;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:26:40.600

既然您已经告诉我们长度是预定义的长度，那么下面的陈述就变得更清楚了：

> 我不知道如何将此信息传递给反序列化器

事实上，它变得*毫无意义*。没有预定义的序列化程序可以在这里为您提供帮助。你有两个选择：

A：编写您自己的序列化程序，并在您知道格式后处理数据 - 可能使用`BinaryReader`：

```
using(var reader = new BinaryReader(source)) {

    int in = reader.ReadInt32();
    byte[] arr = reader.ReadBytes(32);
    int[] arr2 = new int[4];
    for(int i = 0 ; i < 4 ; i++) arr2[i] = reader.ReadInt32();
    float fl = reader.ReadSingle();

    var obj = /* something involving ^^^ */
} 
```

B：缓冲 56 字节，并使用非常讨厌的`unsafe`//`fixed`指针碰撞代码

我强烈建议第一个。特别是，如果需要，这也将允许您解决字节顺序问题。

***以对你来说神圣的一切的名义，不要这样做：***

```
using System;
using System.Runtime.InteropServices;
[StructLayout(LayoutKind.Explicit)]
unsafe struct sample
{
    [FieldOffset(0)] public int @in;
    [FieldOffset(4)] public fixed byte arr[32];
    [FieldOffset(36)] public fixed int arr2[4];
    [FieldOffset(52)] public float fl;    
}

static class Program
{
    unsafe static void Main()
    {
        byte[] buffer = new byte[56];
        new Random().NextBytes(buffer); // some data...

        sample result;
        fixed(byte* tmp = buffer)
        {
            sample* ptr = (sample*) tmp;
            result = ptr[0];
        }

        Console.WriteLine(result.@in);
        Console.WriteLine(result.fl);
    }    
} 
```

对于较大的缓冲区，您可以将`ptr`其视为一个不安全的 multiple 数组`sample`，按索引访问：

```
int @in = ptr[i].@in; 
```

（ETC）

但老实说......有很多“邪恶”的东西，我真的不知道从哪里开始......只是......除非你**绝对**知道那里的每一行都在做什么，以前做过，而且了解所有的陷阱...**不要想它**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:18:15.633

这取决于用于通过线路传递结构的格式。

如果说是json，那么每个字段都会有一个key，数组会被[]包围。

如果说它是 xml，那么您会期望一个带有子节点的 arr 节点。

如果是任意格式，则需要知道格式。

反序列化器有一些默认行为，但如果传递的数据不是默认格式，您需要准确地告诉他们如何反序列化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T08:19:40.307

以及如何记录原始数据？我希望这里能告诉你一些事情，例如，我可能希望它说格式是（纯粹是一个例子）

*   4 字节 NBO Int32 ( `in`)
*   4 字节 NBO Int32（长度为`arr`）
*   len 个字节 ( `arr`)
*   4 字节 NBO（长度为`arr2`）
*   4 * len 个字节（`arr2`每个在 NBO Int32 中）
*   4 字节 IEEE-754 ( `fl`)

你需要知道格式。

编辑：如果 C++ 数组具有已知的固定长度，那么您只需要提前知道这些长度。

# ios - 故事板中的背景音乐

> ID：11203206
> 
> 赞同：0
> 
> 时间：2012-06-26T08:11:32.177
> 
> 标签：ios, xcode

更改情节提要中的视图时如何停止音乐？因为故事板没有 viewwilldissappear 选项。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:14:49.713

但他们确实有**segues**。

查看本教程：[故事板和转场。](http://www.scott-sherwood.com/?p=219)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:15:28.690

`viewDidUnload`，`viewDidDisappear`根据具体情况，你的问题很模糊。那么你所要做的就是打电话`[yourPlayer stop];`。`AVFoundation`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T08:16:06.157

故事板只是您创建界面的一种方式。它允许您定义之间的转换，`UIViewControllers`并为您提供应用程序工作流程的总体视图（尽管如果您想指定应用程序的工作流程，您应该使用其他工具）。至于您的问题，`viewWillDisappear:`称为，我现在在使用 StoryBoards 的应用程序上对其进行了测试。

# javascript - 适用于 Mac 的 ApplicationUpdaterUI 失败

> ID：11203213
> 
> 赞同：0
> 
> 时间：2012-06-26T08:11:54.903
> 
> 标签：javascript, html, macos, air, adobe

日志：

```
Runtime Installer begin with version 3.3.0.3650 on Mac OS 10.7.4 x86
Commandline is: -updatecheck
Installed runtime (3.3.0.3650) located at /Library/Frameworks/Adobe AIR.framework
Performing pingback request
Failure during pingback request: [ErrorEvent type="error" bubbles=false cancelable=falsr eventPhase=2 text="Unhandled exception Error: Error #3001" errorID=3001]
Runtime Installer end with exit code 0 
```

它在 Windows 上运行良好，但在 Mac 上失败。

四处挖掘我发现错误代码＃3001与文件/目录权限问题有关。

检查 /Users/internetslave/Library/Application Support/Adobe 权限似乎没问题。[来源](http://forums.adobe.com/message/2984830#2984830)。

检查 /Library/Frameworks/Adobe AIR.framework 似乎也可以。

两者都有 drwxr-xr-x。

更新：权限不是问题，成功更新了同一系统上的其他应用程序。

```
var appUpdater;

function checkForUpdates() {
    appUpdater = new air.ApplicationUpdaterUI();
    appUpdater.configurationFile = new air.File("app:/update/update-config.xml");
    appUpdater.addEventListener(air.ErrorEvent.ERROR, onCheckForUpdatesError);
    appUpdater.initialize();

    setTimeout(function() { 
        appUpdater.checkNow(); 
    }, 500);
}

function onCheckForUpdatesError(event) {
    alert(event.toString());
} 
```

似乎无法在此处发布更新配置和描述符文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:59:59.217

因为那些人​​可能会偶然发现同样的问题。

问题是调用方法 checkNow 时 ApplicationUpdaterUI 尚未完成初始化。

因此，要么将 setTimeout 的第二个参数更改为更高的值，要么将这部分

```
appUpdater = new air.ApplicationUpdaterUI();
appUpdater.configurationFile = new air.File("app:/update/update-config.xml");
appUpdater.addEventListener(air.ErrorEvent.ERROR, onCheckForUpdatesError);
appUpdater.initialize(); 
```

在页面 onLoad 事件处理程序中并将 checkNow 方法附加到按钮 onClick 事件

```
function checkUpdates() {
    appUpdater.checkNow();
}

<input type="button" onclick="checkUpdates()" /> 
```

谢谢！

# python - 在tastepie的相关表中插入数据

> ID：11203215
> 
> 赞同：2
> 
> 时间：2012-06-26T08:11:59.793
> 
> 标签：python, django, curl, tastypie

我使用 auth_user 和另一个自定义模型来保存更多值

我的模型如下

```
class ExProfile(models.Model):
    user = models.ForeignKey(User, unique=True)
    cell_phone = models.CharField(max_length=200, blank=True)
    api_key=      models.CharField(max_length=200, blank=True)
    termination_date=models.DateField()
    picture=models.ImageField(upload_to='profile',blank=True)
    homeAddress=models.CharField(max_length=200,blank=True)
    homeNumber=models.CharField(max_length=200,blank=True) 
```

现在我想创建一个用于注册目的的rest api，它涉及auth_user和Exprofile ...现在我面临的问题是如何在tastepie中设计一个资源，以便我可以一起插入两个表

资源

```
class UserResource(ModelResource):
        class Meta:
            queryset = User.objects.all()
            resource_name = 'user'
            excludes = ['email', 'password', 'is_active', 'is_staff', 'is_superuser']
            filtering = {
               }
            #authorization = Authorization()
            #authentication=MyAuthentication()

class ProfileResource(ModelResource):

        username = fields.CharField(attribute='user__username', readonly=True)
        class Meta:
             queryset =ExProfile.objects.select_related('User')
             resource_name = 'entry'
             #authorization = Authorization()
             #authentication = MyAuthentication()
             fields = ['username','api_key','email','homeAddress']
             filtering = {
                 'username':ALL,
                 'api_key': ALL,
                 'homeAddress': ALL,
                 'email': ALL,
                 'query': ['icontains',],
                 } 
```

发布数据.........

```
curl -v -H "Content-Type: application/json" -X POST --data '{"username":"test", "password":"123456", "entry":{"cell_phone":"somewhere","api_key":"7378237827827".....}}' http://myhost:8000/api/user/ 
```

# windows-7 - 在 Windows 7（64 位）上编译 openCV 的问题

> ID：11203216
> 
> 赞同：0
> 
> 时间：2012-06-26T08:12:06.380
> 
> 标签：windows-7, opencv, cmake, mingw, msys

我达到大约 80%，然后突然停止并显示以下消息。我正在使用 MingGW 和 MSYS make 和 Cmake 进行配置。

```
[ 80%] Building CXX object modules/gpu/CMakeFiles/opencv_test_gpu.dir/test/test_
warp_perspective.cpp.obj
[ 80%] Building CXX object modules/gpu/CMakeFiles/opencv_test_gpu.dir/test/utili
ty.cpp.obj
Linking CXX executable ../../bin/opencv_test_gpu.exe
Info: resolving vtable for cv::_OutputArray by linking to __imp___ZTVN2cv12_Outp
utArrayE (auto-import)
Info: resolving vtable for cv::_InputArray by linking to __imp___ZTVN2cv11_Input
ArrayE (auto-import)
Info: resolving vtable for cv::BFMatcher by linking to __imp___ZTVN2cv9BFMatcher
E (auto-import)
Info: resolving vtable for cv::SURF by linking to __imp___ZTVN2cv4SURFE (auto-im
port)
Info: resolving VTT for cv::SURF by linking to __imp___ZTTN2cv4SURFE (auto-impor
t)
Info: resolving vtable for cv::ORB by linking to __imp___ZTVN2cv3ORBE (auto-impo
rt)
Info: resolving VTT for cv::ORB by linking to __imp___ZTTN2cv3ORBE (auto-import)

Info: resolving vtable for cv::Exception by linking to __imp___ZTVN2cv9Exception
E (auto-import)
Creating library file: ../../bin/libopencv_test_gpu.dll.a
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: warn
ing: auto-importing has been activated without --enable-auto-import specified on
 the command line.
This should work unless it involves constant data structures referencing symbols
 from auto-imported DLLs.
Cannot export _ZN12_GLOBAL__N_110ReduceCodeC1Ei: symbol not found
Cannot export _ZN12_GLOBAL__N_113ORB_ScoreTypeC1Ei: symbol not found
Cannot export _ZN12_GLOBAL__N_114TemplateMethodC1Ei: symbol not found
Cannot export _ZN12_GLOBAL__N_121FarnebackOptFlowFlagsC1Ei: symbol not found
Cannot export _ZN12_GLOBAL__N_17CmpCodeC1Ei: symbol not found
Cannot export _ZN12_GLOBAL__N_17MorphOpC1Ei: symbol not found
Cannot export _ZN12_GLOBAL__N_18DftFlagsC1Ei: symbol not found
Cannot export _ZN12_GLOBAL__N_18DistTypeC1Ei: symbol not found
Cannot export _ZN12_GLOBAL__N_18FlipCodeC1Ei: symbol not found
Cannot export _ZN12_GLOBAL__N_19GemmFlagsC1Ei: symbol not found
Cannot export _ZNK12_GLOBAL__N_110ReduceCode7PrintToEPSo: symbol not found
Cannot export _ZNK12_GLOBAL__N_110ReduceCodecviEv: symbol not found
Cannot export _ZNK12_GLOBAL__N_113ORB_ScoreType7PrintToEPSo: symbol not found
Cannot export _ZNK12_GLOBAL__N_113ORB_ScoreTypecviEv: symbol not found
Cannot export _ZNK12_GLOBAL__N_114TemplateMethod7PrintToEPSo: symbol not found
Cannot export _ZNK12_GLOBAL__N_114TemplateMethodcviEv: symbol not found
Cannot export _ZNK12_GLOBAL__N_121FarnebackOptFlowFlags7PrintToEPSo: symbol not
found
Cannot export _ZNK12_GLOBAL__N_121FarnebackOptFlowFlagscviEv: symbol not found
Cannot export _ZNK12_GLOBAL__N_17CmpCode7PrintToEPSo: symbol not found
Cannot export _ZNK12_GLOBAL__N_17CmpCodecviEv: symbol not found
Cannot export _ZNK12_GLOBAL__N_17MorphOp7PrintToEPSo: symbol not found
Cannot export _ZNK12_GLOBAL__N_17MorphOpcviEv: symbol not found
Cannot export _ZNK12_GLOBAL__N_18DftFlags7PrintToEPSo: symbol not found
Cannot export _ZNK12_GLOBAL__N_18DftFlagscviEv: symbol not found
Cannot export _ZNK12_GLOBAL__N_18DistType7PrintToEPSo: symbol not found
Cannot export _ZNK12_GLOBAL__N_18DistTypecviEv: symbol not found
Cannot export _ZNK12_GLOBAL__N_18FlipCode7PrintToEPSo: symbol not found
Cannot export _ZNK12_GLOBAL__N_18FlipCodecviEv: symbol not found
Cannot export _ZNK12_GLOBAL__N_19GemmFlags7PrintToEPSo: symbol not found
Cannot export _ZNK12_GLOBAL__N_19GemmFlagscviEv: symbol not found
collect2: ld returned 1 exit status
make[2]: *** [bin/opencv_test_gpu.exe] Error 1
make[1]: *** [modules/gpu/CMakeFiles/opencv_test_gpu.dir/all] Error 2
make: *** [all] Error 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:43:23.133

看起来 GPU 代码遇到了问题。您可以尝试几件事：

*   确保 CUDA 安装正确并且 CMake 可以找到它。
*   禁止构建 GPU 库。
*   如果您使用的是 SVN 主干，我有时会遇到构建中断的 GPU 部分。您可能需要使用较早的版本或提交错误报告。

此外，如果您还没有查看 OpenCV 的构建指南；看看[这里](https://stackoverflow.com/questions/10860352/getting-started-with-opencv-2-4-and-mingw-on-windows-7)和[这里](https://stackoverflow.com/questions/7011238/opencv-2-3-c-visual-studio-2010/7014918#7014918)。

# jquery - jqgrid 与 asp.net mvc

> ID：11203218
> 
> 赞同：0
> 
> 时间：2012-06-26T08:12:14.163
> 
> 标签：jquery, asp.net-mvc, jqgrid

我将 JQGrid 与我的 mvc 代码一起使用。

我的控制器是

 `````
//
        // GET: /Leave/

        public ActionResult CompOff()
        {
            var compoffs = db.RegisterCompOffs.Where(l => l.Employee.Id == this.EmployeeId).ToList();
            return Json(compoffs, JsonRequestBehavior.AllowGet);

        }</code> 
```

compoffs is not null here.. and my view is` 

```
@model AGS.Hrms.Models.RegisterCompOff

@{
    ViewBag.Title = "CompOff";
}

<table id="jqgProducts" cellpadding="0" cellspacing="0"></table>
<div id="jqgpProducts" style="text-align:center;"></div>

<script src="@Url.Content("~/Scripts/jquery.jqGrid.min.js")" type="text/javascript"></script>
 <script type="text/javascript">
     $(document).ready(function () {
         $('#jqgProducts').jqGrid({
             //url from wich data should be requested
             url: this.href,
             //type of data
             datatype: 'json',
             //url access method type
             mtype: 'GET',
             //columns names
             colNames: ['CompOffDate', 'IsApproved', 'Description', 'ExpiryDate','IsUtilized'],
             //columns model
             colModel: [
                            { name: 'CompOffDate', index: 'CompOffDate', align: 'left' },
                            { name: 'IsApproved', index: 'IsApproved', align: 'left' },
                            { name: 'Description', index: 'Description', align: 'left' },
                            { name: 'ExpiryDate', index: 'ExpiryDate', align: 'left' }
                            { name: 'IsUtilized', index: 'IsUtilized', align: 'left' }

                          ],
             //pager for grid
             pager: $('#jqgpProducts'),
             //number of rows per page
             rowNum: 10,
             //initial sorting column
             sortname: 'CompOffDate',
             //initial sorting direction
             sortorder: 'asc',
             //we want to display total records count
             viewrecords: true,
             //grid height
             height: '100%'
         });
     });
    </script></code> 
```

在请求此视图时，我在 Firebug 的控制台窗口中收到此 500 Internal server error。有人可以告诉我我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:24:25.743

想到了两种可能：

1.  以下行`var compoffs = db.RegisterCompOffs.Where(l => l.Employee.Id == this.EmployeeId).ToList();`引发异常。要查看是否是这种情况，只需在控制器操作中放置一个断点。要修复此错误，您必须分析异常及其原因。
2.  查询返回的`compoffs`对象包含循环引用，不能进行 JSON 序列化。要查看是否是这种情况，请在 FireBug 控制台中探索 AJAX 请求的响应，并查找从服务器发送的响应中包含的确切错误消息。它将类似于以下内容：*无法序列化 blablah，因为它包含循环引用*。要修复此错误，您必须使用视图模型并仅将其实际需要的内容传递给视图，而不是传递整个域对象图。

您的代码有问题的另一件事是以下行：

```
url: this.href, 
```

`this.href`处理程序内部没有，`document.ready`所以我猜 AJAX 请求甚至没有到达控制器。确保您已为应该返回 JSON 的控制器操作指定正确的 url：

```
url: '@Url.Action("CompOff")', 
````

# android - android - LayoutParams 是如何工作的？

> ID：11203219
> 
> 赞同：0
> 
> 时间：2012-06-26T08:12:21.247
> 
> 标签：android, android-relativelayout, textview, layoutparams

我对此有点困惑。我有一个应用程序，用户可以在其中绘制矩形文本对象。我在 xml 的相对布局中添加了一些文本视图（假设我最多有 3 个文本对象）。对象可以移动和调整大小。我为每个 textView 添加了这段代码

```
TextView tv=(TextView) findViewById(R.id.text1);            
RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT);
System.out.println(texts.get(i).Sx+ " , "+texts.get(i).Sy+ " , "+ texts.get(i).Lx+ " , "+texts.get(i).Ly);
if(texts.get(i).Sx<=texts.get(i).Lx){
    if(texts.get(i).Sy<=texts.get(i).Ly){                       
        lp.setMargins((int)texts.get(i).Sx, (int)texts.get(i).Sy, (int)texts.get(i).Lx, (int)texts.get(i).Ly);
    } else{
        lp.setMargins((int)texts.get(i).Sx, (int)texts.get(i).Ly, (int)texts.get(i).Lx, (int)texts.get(i).Sy);
    }
} else{
    if(texts.get(i).Sy<=texts.get(i).Ly){
        lp.setMargins((int)texts.get(i).Lx, (int)texts.get(i).Sy, (int)texts.get(i).Sx, (int)texts.get(i).Ly);
    } else{
        lp.setMargins((int)texts.get(i).Lx, (int)texts.get(i).Ly, (int)texts.get(i).Sx, (int)texts.get(i).Sy);
    }
}           
tv.setLayoutParams(lp);
tv.setWidth((int)(texts.get(i).width));
tv.setHeight((int)(texts.get(i).height));
tv.setTextSize(texts.get(i).textSize);
tv.setText(text.text);
tv.setTextColor(Color.WHITE);
tv.requestLayout(); 
```

Sx, Sy 是对象的起始坐标（以像素为单位），Lx, Ly 是结束坐标。

在xml中我添加了这个：

```
<RelativeLayout 
    android:layout_height="fill_parent"
    android:layout_width="fill_parent" 
    android:id="@+id/texts" >

    <TextView 
        android:layout_height="fill_parent"
        android:layout_width="fill_parent" 
        android:id="@+id/text1" />

    <TextView 
        android:layout_height="fill_parent"
        android:layout_width="fill_parent" 
        android:id="@+id/text2" />

    <TextView 
        android:layout_height="fill_parent"
        android:layout_width="fill_parent" 
        android:id="@+id/text3" />              

</RelativeLayout> 
```

这似乎可以将文本放置在正确的位置。但是textview的宽度和高度似乎不对。这是以像素为单位设置边距的问题吗？一些启蒙现在会非常有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:35:05.387

LayoutParams 用于动态对齐视图。您可以将规则添加到您的参数中，例如下方、上方、底部、顶部、对齐、边距和所有（与通过 xml 执行的操作相同），最后您可以将此布局参数设置到您的视图中。例如：

```
 // Set the params eg. for a button.

    RelativeLayout.LayoutParams button_params = new RelativeLayout.LayoutParams(RelativeLayout
        .LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);

    button_params.addRule(RelativeLayout.LEFT_OF,
                          any_view.getId());
    button_params.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM,
                          RelativeLayout.TRUE);
    button_params.bottomMargin = screen_height / 15;
    button_params.rightMargin = 20;
    button.setLayoutParams(button_params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:45:59.970

您首先将宽度/高度设置为 FILL_PARENT，然后用 px 覆盖它？

尝试这样的事情

```
View temp = this.findViewById(recent);
RelativeLayout.LayoutParams relativeParams = (LayoutParams) temp.getLayoutParams();

relativeParams.setMargins(0, 0, 0, 50); // llp.setMargins(left, top, right, bottom);
relativeParams.width = 123;
relativeParams.height = 123;
temp.setLayoutParams(relativeParams); 
```

# asp.net - 如何显示标题行列表视图是否有数据？

> ID：11203220
> 
> 赞同：0
> 
> 时间：2012-06-26T08:12:25.787
> 
> 标签：asp.net, c#-4.0, listview

我有一个列表视图，我想在其中添加一个标题行，当列表视图有数据时会出现。在每一种情况下，我都希望它在那里。我已经使用 LayOut 模板来执行此操作，但仅当列表视图有数据时才显示标题行。然后我尝试了 EmptydataTemplate，它显示标题行但现在其中的按钮不起作用。我的代码是

```
<asp:UpdatePanel ID="upViewSchedule" runat="server">
        <ContentTemplate>
            <asp:ListView ID="lstuser" runat="server" ItemPlaceholderID="trItem" DataKeyNames="id"
                OnItemDataBound="lstuser_ItemDataBound">
                <LayoutTemplate>
                    <table cellspacing="0">
                        <tr class="hdrRowColor1">
                            <td align="left">
                                &nbsp;name
                            </td>
                            <td align="left">
                                salary
                            </td>
                            <td align="left">
                                address
                            </td>
                            <td align="left" style="border-right: 1px solid #6398cc">
                                Actions
                            </td>
                        </tr>
                        <tr class="OddRowColor">
                            <td align="left">
                                <asp:DropDownList ID="drphdrname" runat="server" Width="120px">
                                </asp:DropDownList>
                                <ajaxCtrl:CascadingDropDown ID="csddrphdrName" runat="server" TargetControlID="drpname"
                                    Category="Name" ServicePath="~/Resources/WebService.asmx" ServiceMethod="GetName">
                                </ajaxCtrl:CascadingDropDown>
                            </td>
                            <td>
                                <asp:TextBox ID="txtaddress" runat="server" Width="110px"></asp:TextBox>
                            </td>
                            <td width="50px" class="last">
                                <asp:ImageButton ID="imgBtnHdrAdd" runat="server" ImageUrl="~/App_Themes/ThemeNew/Images/add_new.png"
                                    OnClick="imgBtnHdrAdd_Click" ToolTip="Add user." />
                            </td>
                        </tr>
                        <tr id="trItem" runat="server">
                        </tr>
                    </table>
                </LayoutTemplate>
                <ItemTemplate>
                    <tr class='<%# Convert.ToBoolean(Container.DataItemIndex % 2) ? "OddRowColor" : "EvenRowColor" %>'>
                        <td align="left" width="138px">
                            <asp:DropDownList ID="drpname" runat="server" Width="120px">
                            </asp:DropDownList>
                            <asp:Label ID="lblCreatedBY" Text='<%# Eval("CreatedBy") %>' runat="server" Visible="false"></asp:Label>
                            <asp:Label ID="lblId" runat="server" Visible="false"></asp:Label>
                            <ajaxCtrl:CascadingDropDown ID="casddrpContacts" runat="server" TargetControlID="drpname"
                                Category="name" ServicePath="~/Resources/WebService.asmx" ServiceMethod="Getuser">
                            </ajaxCtrl:CascadingDropDown>
                        </td>
                        <td align="left" width="138px">
                            <asp:TextBox ID="TextBox1" runat="server" Text='<%# Eval("salary") %>' Width="110px"></asp:TextBox>
                        </td>
                        <td align="left" width="138px">
                            <asp:TextBox ID="TextBox2" runat="server" Text='<%# Eval("address") %>' Width="110px"></asp:TextBox>
                        </td>
                        <td align="left" class="last">
                            <asp:ImageButton ID="imgBtnEdit" runat="server" ImageUrl="~/App_Themes/ThemeNew2/images/update.png"
                                CommandArgument='<%# Eval("id") %>' OnClick="imgBtnEdit_Click" ToolTip="Update user" />
                            <asp:ImageButton ID="imgBtnDelete" runat="server" ImageUrl="~/App_Themes/ThemeNew/Images/delete.png"
                                CommandArgument='<%# Eval("id") %>' OnClientClick="return confirm('Are you sure you want to delete this user ?');"
                                ToolTip="Delete user" OnClick="imgBtnDelete_OnClick" />
                        </td>
                    </tr>
                </ItemTemplate>
                <EmptyDataTemplate>
                    <table cellspacing="0">
                        <tr class="hdrRowColor1">
                            <td align="left">
                                &nbsp;name
                            </td>
                            <td align="left">
                                salary
                            </td>
                            <td align="left">
                                address
                            </td>
                            <td align="left" style="border-right: 1px solid #6398cc">
                                Actions
                            </td>
                        </tr>
                        <tr class="OddRowColor">
                            <td align="left">
                                <asp:DropDownList ID="drphdrname" runat="server" Width="120px">
                                </asp:DropDownList>
                                <ajaxCtrl:CascadingDropDown ID="csddrphdrName" runat="server" TargetControlID="drpname"
                                    Category="Name" ServicePath="~/Resources/WebService.asmx" ServiceMethod="GetName">
                                </ajaxCtrl:CascadingDropDown>
                            </td>
                            <td>
                                <asp:TextBox ID="txtaddress" runat="server" Width="110px"></asp:TextBox>
                            </td>
                            <td width="50px" class="last">
                                <asp:ImageButton ID="imgBtnHdrAdd" runat="server" ImageUrl="~/App_Themes/ThemeNew/Images/add_new.png"
                                    OnClick="imgBtnHdrAdd_Click" ToolTip="Add user." />
                            </td>
                        </tr>
                        <tr id="trItem" runat="server">
                        </tr>
                    </table>
                </EmptyDataTemplate>
            </asp:ListView>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

我的代码背后的代码是

```
 protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        BIndAddress();
        // BindRoleDrop();
        drpAddress.Items.Insert(0, new ListItem("Select Area", ""));
        drpRoom.Items.Insert(0, new ListItem("Select Room", ""));
        ViewState["sortCol"] = "tblUser.id";
        ViewState["sortDir"] = "Desc";
        ViewState["nmbr"] = 1;
        BindData(ViewState["sortCol"].ToString(), ViewState["sortDir"].ToString(), Convert.ToInt32(ViewState["nmbr"]), 7999);

    }
    else
    {
        lblMessage.Visible = false;

    }

} 
```

还有一件事，请让我知道如何对这些应用验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:53:23.200

我在本地做了一些测试。我发现如果我在 EmptyDataTemplate 中有一个按钮，只要您在事件触发之前不修改 ListView 的状态，它的 OnClick 事件就会按预期触发。

因此，我猜测您有一些代码可以修改在`imgBtnHdrAdd_Click`相关按钮的事件处理程序之前运行的 ListView 的状态（例如重新绑定它）。

Page_Load 方法可能是主要嫌疑人，但根据您的代码，它正在正确检查`!IsPostBack`.

我假设它是`BindData`用于设置数据绑定 ListView 的调用。在代码中查找调用该方法的其他位置，并验证在按钮的事件处理程序之前没有运行这些位置。

# android - 为上传程序添加进度条

> ID：11203222
> 
> 赞同：0
> 
> 时间：2012-06-26T08:12:29.397
> 
> 标签：android, file-upload, progress-bar

我制作了一个程序，将选定的视频从 SD 卡上传到 ASP.NET 服务器。现在我想添加一个进度条来显示上传文件的状态？谁能帮我解决这个问题？我有点困惑。我尝试了很多方法来显示状态，但我没有成功。

感谢您的帮助。

```
package com.isoft.uploder;

import java.io.DataOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.net.ParseException;
import android.net.Uri;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.provider.MediaStore;
import android.util.Log;
import android.view.View;
import android.widget.Button; 
import android.widget.ProgressBar;

public class VideoUploader extends Activity 
{
  /** Called when the activity is first created. */

public static final int SELECT_VIDEO=1;
public static final String TAG="UploadActivity";
String path="";

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Button camera =(Button)findViewById(R.id.camera);
    Button back= (Button)findViewById(R.id.back1);
    Button select=(Button)findViewById(R.id.select);
    //Video Çek
    camera.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            startActivity(intent);
        }
    });
    //
    //Video Seç
    select.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            openGaleryVideo();
        }
    });
    //
    //Geri Dön
    back.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            finish();
        }
    });
    //
}

//Gallery'i aç
public void openGaleryVideo()
{
    Intent intent=new Intent();
    intent.setType("video/*");
    intent.setAction(Intent.ACTION_GET_CONTENT);
    startActivityForResult(Intent.createChooser(intent, "Select Video"),SELECT_VIDEO);
}

//Dosyayı seç ve yükle
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) 
{
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK) {
        if (requestCode == SELECT_VIDEO) {
            Uri videoUri = data.getData();
            path= getPath(videoUri);
            doFileUpload();
        }
    }
}

//SD carddan yerini al
public String getPath(Uri uri)
{   
    String[] projection = { MediaStore.Video.Media.DATA};
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
}

//upload et
public void doFileUpload()
{   
        File file=new File(path);  
        String urlServer = "http://192.168.10.177/androidweb/default.aspx";
        String filename=file.getName();
        int bytesRead, bytesAvailable, bufferSize;
        byte[] buffer;
        int maxBufferSize = 10*1024*1024;
        try
        {
        FileInputStream fileInputStream = new FileInputStream(file);
        URL url = new URL(urlServer);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setFixedLengthStreamingMode((int) file.length());

        // Allow Inputs & Outputs
        connection.setDoInput(true);
        connection.setDoOutput(true);
        connection.setUseCaches(false);

        // Enable POST method
        connection.setRequestMethod("POST");
        connection.setRequestProperty("Connection", "Keep-Alive");
        connection.setRequestProperty("Content-Type",  "multipart/form-data");
        connection.setRequestProperty("SD-FileName", filename);//This will be the file name
        DataOutputStream outputStream = new DataOutputStream(connection.getOutputStream());
        bytesAvailable = fileInputStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        buffer = new byte[bufferSize];

        // Read file
        bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        while (bytesRead > 0)
        {   
            outputStream.write(buffer, 0, bufferSize);
            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        }//end of while statement

            //Tekrar video seçmek için
            setContentView(R.layout.end);
            //event
            Button back2=(Button)findViewById(R.id.back2);
            Button select2=(Button)findViewById(R.id.new1);
            back2.setOnClickListener(new View.OnClickListener() 
            {
                @Override
                public void onClick(View arg0) {
                    // TODO Auto-generated method stub
                    finish();
                }
            });
            select2.setOnClickListener(new View.OnClickListener() 
            {
                @Override
                public void onClick(View arg0) {
                    // TODO Auto-generated method stub
                    openGaleryVideo();
                }
            });
            //

         //int serverResponseCode = connection.getResponseCode();
         //String serverResponseMessage = connection.getResponseMessage();
         //Log.d("ServerCode",""+serverResponseCode);
         //Log.d("serverResponseMessage",""+serverResponseMessage);
         fileInputStream.close();
         outputStream.flush();
         outputStream.close();
        }//end of try body

        catch (Exception ex)
        {
            //ex.printStackTrace();
            Log.e("Error: ", ex.getMessage());
        }
      }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:19:33.610

我做了同样的工作，看看我的代码，

```
public class LogUploaderActivity extends Activity 
{
    private static LogUploaderActivity thisAct = null;
    private ButtonListener buttonClickListener = null;
    private MyDialogInterfaceListener dListener = null;

    private RadioButton rbServer;
    private RadioButton rbEmail;

    private Button cmdOK;
    private Button cmdCancel;

    // Progress Bar Variables
    private static AlertDialog alertDialog = null;
    private static ProgressDialog progressDialog = null;

    private int delay = 1000;    
    private ProgressThread progThread;
    private int maxBarValue;

    private String[] fileName;

    private static File directory = null;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        thisAct = this;

//        directory = Environment.getExternalStorageDirectory();

        rbServer = (RadioButton) findViewById( R.id.rdWebServer );
        rbEmail = (RadioButton) findViewById( R.id.rdLTLogs );

        cmdOK = (Button) findViewById( R.id.cmdOK );
        cmdCancel = (Button) findViewById( R.id.cmdCancel );

        cmdOK.setOnClickListener(getListener());
        cmdCancel.setOnClickListener(getListener());

    }

    private int readLogList( String filePath )
    {
        directory = Environment.getExternalStorageDirectory();

//      System.out.println ( directory + ConstantCodes.FILE_SEPARATOR + filePath );

        File folder = new File( directory + ConstantCodes.FILE_SEPARATOR + filePath );

        if ( !folder.exists() )
        {
            return 0;
        }

        fileName = folder.list();

        return  folder.list().length;
    }

    private String readSingleFile( String filePath, String fileName )
    {
        try
        {
//          File directory = Environment.getExternalStorageDirectory();

//          System.out.println ( "Dir : " + directory );

            System.gc();

            File file = new File ( directory + ConstantCodes.FILE_SEPARATOR + filePath , fileName );

            BufferedReader br = new BufferedReader ( new FileReader ( file) );
            String line;
            StringBuffer sb = new StringBuffer();

            while ( ( line = br.readLine() ) != null )
            {
                sb.append(line);
            }

//          byte[] fileData = sb.toString().trim().getBytes();

//          String content = sb.toString().trim();

            System.out.println ( "File Size : " + sb.toString().length() );

            return sb.toString().trim();
        }
        catch ( Exception e )
        {
            System.out.println ( "Error while reading File " + e.toString() );
            return null;
        }
    }

    private MyDialogInterfaceListener getDialogListener()
    {
        if ( dListener == null )
        {
            dListener = new MyDialogInterfaceListener();
        }
        return dListener;
    }

    private ButtonListener getListener()
    {
        if ( buttonClickListener == null )
        {
            buttonClickListener = new ButtonListener();
        }
        return buttonClickListener;
    }

    private class MyDialogInterfaceListener implements DialogInterface.OnClickListener
    {
        public void onClick(DialogInterface dialog, int which)
        {
            alertDialog.dismiss();
        }
    }

    private class ButtonListener implements Button.OnClickListener
    {
        public void onClick ( View view )
        {
            if ( view == cmdCancel )
            {
                finish();
            }
            else if ( view == cmdOK )
            {
                // First Check which Radio Button is selected 
                if ( rbServer.isChecked() )
                {
                    try
                    {
                        maxBarValue = readLogList( ConstantCodes.APPLICATION_LOG_PATH );
                        Thread.sleep(1000);
                    }
                    catch ( Exception e ) { }

                    if ( maxBarValue > 0 )
                    {
                        progressDialog = new ProgressDialog ( thisAct );
                        progressDialog.setProgressStyle( ProgressDialog.STYLE_HORIZONTAL );
                        progressDialog.setMax(maxBarValue);
                        progressDialog.setMessage( "Uploading Files" );
                        progressDialog.show();

                        progThread = new ProgressThread( handler, ConstantCodes.APPLICATION_LOG_PATH, ConstantCodes.TEXT_FILE_METHOD_NAME );
                        progThread.start();
                    }
                    else
                    {
                        alertDialog = new AlertDialog.Builder(thisAct).create();
                        alertDialog.setTitle( "Error" );
                        alertDialog.setMessage( "No More Logs to Upload" );
                        alertDialog.setButton( "OK", getDialogListener());
                        alertDialog.show();
                    }
                }
                else if ( rbEmail.isChecked() )
                {
                    try
                    {
                        maxBarValue = readLogList( ConstantCodes.LOCATION_TRACKER_PATH );
                        Thread.sleep(1000);
                    }
                    catch ( Exception e ) { }

                    if ( maxBarValue > 0 )
                    {
                        progressDialog = new ProgressDialog ( thisAct );
                        progressDialog.setProgressStyle( ProgressDialog.STYLE_HORIZONTAL );
                        progressDialog.setMax(maxBarValue);
                        progressDialog.setMessage( "Uploading Files" );
                        progressDialog.show();
                    }
                    else
                    {
                        alertDialog = new AlertDialog.Builder(thisAct).create();
                        alertDialog.setTitle( "Error" );
                        alertDialog.setMessage( "No More Logs to Upload" );
                        alertDialog.setButton( "OK", getDialogListener());
                        alertDialog.show();
                    }

                    progThread = new ProgressThread( handler,ConstantCodes.LOCATION_TRACKER_PATH, ConstantCodes.LOCATION_TRACKER_METHOD_NAME );
                    progThread.start();
                }
                else
                {
                    alertDialog = new AlertDialog.Builder(thisAct).create();
                    alertDialog.setTitle( "Error" );
                    alertDialog.setMessage( "Please Select Any One Option" );
                    alertDialog.setButton( "OK", getDialogListener());
                    alertDialog.show();
                }
            }   
        }
    }

    final Handler handler = new Handler()
    {
        public void handleMessage(Message msg)
        {
            int total = msg.getData().getInt("total");  
            progressDialog.setProgress(total);
            if (total >= maxBarValue)
            {
                progressDialog.dismiss();
                progThread.setState(ProgressThread.DONE);
            }
        }
    };

    private class ProgressThread extends Thread
    {
        final static int DONE = 0;
        final static int RUNNING = 1; 
        int status;
        int total;
        String filePath;
        String METHOD_NAME;

        Handler mHandler;

        ProgressThread(Handler h, String filePath,String METHOD_NAME ) 
        {
            mHandler = h;
            this.filePath = filePath;
            this.METHOD_NAME = METHOD_NAME;
        }

        @Override
        public void run()
        {
            status = RUNNING;
            while ( status == RUNNING )
            {
                try
                {
                    Thread.sleep(delay);
                }
                catch ( Exception e ) { }

                Message msg = mHandler.obtainMessage();
                Bundle b = new Bundle();
                b.putInt("total", total);
                msg.setData(b);
                mHandler.sendMessage(msg);

//              if ( total < fileName.length )
                {
//                  System.out.println ( "Uploading File Name : " + fileName[total] );

                    try
                    {

//                      System.out.println ( "Method Name : " + METHOD_NAME );

                        int response = WebService.fileUpload( METHOD_NAME, fileName[total], readSingleFile( filePath,fileName[total] ) );

                        System.out.println ( "response  " + response );

                        if ( response == 404 )
                        {
                            progressDialog.dismiss();
                            setState(ProgressThread.DONE);

//                          Thread.sleep(500);
//                          
//                          alertDialog = new AlertDialog.Builder( getActivity() ).create();
//                          alertDialog.setTitle( "Error" );
//                          alertDialog.setMessage( "Error While Uploading" );
////                            alertDialog.setButton( "OK", getDialogListener());
//                          alertDialog.show();
                        }
                    }
                    catch ( Exception e )
                    {
//                      alertDialog = new AlertDialog.Builder( thisAct ).create();
//                      alertDialog.setTitle( "Error" );
//                      alertDialog.setMessage( "Error While Uploading" );
//                      alertDialog.setButton( "OK", getDialogListener());
//                      alertDialog.show();
                    }
                }
                total++;
            }
        }

        public void setState(int state) 
        {
            status = state;
        }
    }

    public static LogUploaderActivity getActivity()
    {
        return thisAct;
    }

    public void onDestroy() 
    {
        super.onDestroy();
    }
} 
```

它显示了sd卡中的文件总数，并将它们一个一个上传到服务器，并显示状态为2/20正在上传对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:39:52.083

如果您打算在通知区域中显示进度条，请参考我的答案：[Android：在下载应用程序时显示通知栏](https://stackoverflow.com/questions/11135389/android-show-notification-bar-on-downloading-application/11135489#11135489)

# html - 嵌入对象影片无法开始播放

> ID：11203228
> 
> 赞同：0
> 
> 时间：2012-06-26T08:12:48.327
> 
> 标签：html, windows-media-player

我有这个代码：

```
<object id="MediaPlayer1" width="280" height="256" classid="clsid:6bf52a52-394a-11d3-b153-00c04f79faa6" codebase="http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701">
<param name="fileName" value="/wp-content/uploads/2012/06/GM-Oh.avi" />
<param name="animationatStart" value="true" />
<param name="transparentatStart" value="true" />
<param name="autoStart" value="true" />
<param name="showControls" value="true" />
<param name="Volume" value="-450" />
<param name="url" value="/wp-content/uploads/2012/06/GM-Oh.avi" />
<param name="pluginspage" value="http://www.microsoft.com/Windows/MediaPlayer/" />
<param name="autostart" value="1" />
<param name="showcontrols" value="1" />
<param name="volume" value="-450" />
<embed id="MediaPlayer1" width="280" height="256" type="application/x-mplayer2" src="/wp-content/uploads/2012/06/GM-Oh.avi" fileName="/wp-content/uploads/2012/06/GM-Oh.avi" animationatStart="true" transparentatStart="true" autoStart="true" showControls="false" Volume="-450" pluginspage="http://www.microsoft.com/Windows/MediaPlayer/" autostart="1" showcontrols="1" volume="-450" />
</object> 
```

问题是，我的电影对象出现了，但电影不会开始播放。

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:36:16.457

我建议您将文档类型更改为`<!DOCTYPE html>`并使用 HTML5 播放器。

```
<video width="280" height="256"controls="controls" autoplay="autoplay">
  <source src="/wp-content/uploads/2012/06/GM-Oh.avi" type="video/avi" />
  Your browser does not support HTML5 video. Upgrade to <a href="http://abetterbrowser.org/">a better browser</a>.
</video> 
```

您可能需要将视频文件转换为 OGG、WebM 或 MP4，因为我不确定 AVI 是否会播放。

有关 HTML5 视频的更多信息：http: [//www.w3schools.com/html5/html5_video.asp](http://www.w3schools.com/html5/html5_video.asp)

# php - CakePHP - 创建一个没有锚标记的链接 URL

> ID：11203230
> 
> 赞同：5
> 
> 时间：2012-06-26T08:12:53.587
> 
> 标签：php, cakephp-2.0

我正在使用 CakePHP 并希望创建一个指向控制器/视图的 URL，而不包括锚标记。

换句话说，如果我使用

```
$this->Html->link('foo',array('controller'=>'bar','action'=>'display')); 
```

然后输出是一个可以显示的格式化链接......但我只想要没有 HTML 的 URL。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T08:18:59.730

```
echo $this->Html->url(array('controller' => 'bar', 'action' => 'display')); 
```

使用可选的第二个参数使其成为完整的 URL `http://`，包括：

```
echo $this->Html->url(array('controller' => 'bar', 'action' => 'display'), true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-05T21:16:34.523

我只需要同样的东西，但它在 Cake 3 上改变了。现在我们必须使用：

```
echo $this->Url->build(["controller" => "bar", "action" => "display","bar"]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T08:18:51.790

如果您只需要网址：

```
echo $this->Html->url(array('controller'=>'bar','action'=>'display')); 
```

# windows - 已销毁窗口的未决消息会发生什么情况？

> ID：11203231
> 
> 赞同：4
> 
> 时间：2012-06-26T08:12:53.880
> 
> 标签：windows, message

当一个窗口被销毁而仍然有消息等待它时会发生什么？

考虑以下场景：

共有三个线程，A、B 和 C。线程 C 拥有一个窗口。

线程 A 和 B 用于`SendMessage`将消息发布到窗口。来自 A 的消息首先到达。当 C 处理来自 A 的消息时，它使用`DestroyWindow`.

来自线程 B 的消息会发生什么？线程B的调用是否`SendMessage`返回？

这在内部如何运作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:29:06.820

According to [MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632682%28v=vs.85%29.aspx), `DestroyWindow` "[...], flushes the thread message queue, [...]". I was not sure whether this meant processing the messages or dumping them, so I tried. It turned out to be the latter: all pending posted messages are removed from the queue and ignored. As for non-queued messages: in my tests the pending `SendMessage` call returned and set the last error to `ERROR_INVALID_PARAMETER - 87 (0x57)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T00:35:09.680

原则上，你提议做的事情是不安全的。线程 C 无法保证线程 B 已经发送了消息；如果窗口在线程 B 发送消息之前被销毁，并且窗口句柄恰好在此期间被重用，则线程 B 可能最终将消息发送到错误的窗口，该窗口可能位于不同的应用程序中。

最佳实践是确保在调用 DestroyWindow*之前已通知所有线程特定窗口句柄已变为无效。*

但是，实际上，在错误的时间重新使用手柄的风险非常低。如果提前通知其他线程是不合理的，那么您不太可能因此陷入困境。我相信 kicsit 断言消息不会最终在线程 C 的消息队列中等待是正确的，尽管据我所知文档并没有明确承诺这一点。

# java - Java的富文本显示组件

> ID：11203233
> 
> 赞同：0
> 
> 时间：2012-06-26T08:13:07.070
> 
> 标签：java

是否有任何库提供具有基本格式功能的文本面板。如行号、关键字着色等。

我想在我的应用程序窗口中显示一个代码。我已经尝试使用 JTextPane。但是如果存在任何满足我要求的 UI 组件就很容易了。

注意：我想显示与使用 notepad++ 或任何代码编辑器打开时相同的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:17:39.930

我已经成功使用[了 jsyntaxpane](http://code.google.com/p/jsyntaxpane/)。

# c# - 如何避免 GUI 冻结？

> ID：11203236
> 
> 赞同：4
> 
> 时间：2012-06-26T08:13:12.063
> 
> 标签：c#, winforms, multithreading, user-interface, freeze

我有一个这样的代码：

```
private void testToolStripMenuItem_Click(object sender, EventArgs e)
{
    toolStripStatusLabel1.Text = " Device Testing...";

    positive = false;

    clearsensors_gui();
    datarec = false;
    cmd = 04;
    datarec = serialport_FT(0, 1);

    if (datarec)
    {
        char ab = Convert.ToChar(rec_data[1]);
        //MessageBox.Show("\n" + ab + "\n");
        int cab = Convert.ToInt16(ab);
        int cabc1 = cab & 1;
        int cabc2 = cab & 2;
        int cabc3 = cab & 4;
        int cabc4 = cab & 8;
        int cabc5 = cab & 16;
        int cabc6 = cab & 32;

        if (cabc1 == 1)
            ovalShape1.FillColor = Color.Green;
        else
            ovalShape1.FillColor = Color.Red;

        if (cabc2 == 2)
            ovalShape2.FillColor = Color.Green;
        else
            ovalShape2.FillColor = Color.Red;

        if (cabc3 == 4)
            ovalShape3.FillColor = Color.Green;
        else
            ovalShape3.FillColor = Color.Red;

        if (cabc4 == 8)
            ovalShape4.FillColor = Color.Green;
        else
            ovalShape4.FillColor = Color.Red;

        if (cabc5 == 16)
            ovalShape5.FillColor = Color.Green;
        else
            ovalShape5.FillColor = Color.Red;

        if (cabc6 == 32)
            ovalShape6.FillColor = Color.Green;
        else
            ovalShape6.FillColor = Color.Red;

        toolStripStatusLabel1.Text = " Device Tested";
    }
    else
    {
        toolStripStatusLabel1.Text = "Try Again or Communication With Device Failure....";
    }
} 
```

上面的代码是读取传感器，即 datarec = serialport_FT(0, 1); 函数在 GUI 端为我提供了一个传感器输出，稍后将用红色\绿色的椭圆形ShapeX(1-6) 进行描述

问题：`datarec = serialport_FT(0, 1);`这个函数需要 liltime ，所以 GUI 冻结到那个时候如何避免这种情况？

我尝试使用后台工作人员，但没有找到将整个过程放在哪里的地方，当它转到椭圆形形状并更改其属性时，也遇到了跨线程操作错误。

我没有得到要在后台使用的函数的哪一部分以及何时何地回到第一个线程

如果我必须使用线程，请帮助我使用 backgroundworker 或使用调用

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T08:28:02.507

你可以这样做：

```
toolStripStatusLabel1.Text = " Device Testing...";
positive = false;
clearsensors_gui();
datarec = false;
cmd = 04;

BackgroundWorker worker = new BackgroundWorker();

worker.DoWork += delegate(object s, DoWorkEventArgs args)
{
    // Will be run on background thread
    args.Result = serialport_FT(0, 1);
};

worker.RunWorkerCompleted += delegate(object s, RunWorkerCompletedEventArgs args)
{
    bool result = (bool)args.Result;

    if (result)
    {
        // Do your UI updates here
    }
};

worker.RunWorkerAsync(); 
```

一项改进可能是将`datarec`和`rec_data`作为 args.Result 中的元组进行组合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T08:19:36.153

在后台工作人员中，您使用该`DoWork`事件。

```
worker.DoWork += new DoWorkEventHandler(yourEventHandler); 

void yourEventHandler(object sender, DoWorkEventArgs e)
{
//your work here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T08:29:31.103

当您使用 WinForms 时，这是一篇很棒的 MSDN 文章，可帮助您开始在应用程序中使用多个线程：为[您的基于 .NET 的应用程序提供具有多线程的快速响应式 UI](http://msdn.microsoft.com/en-us/magazine/cc300429.aspx)

这篇文章是“几天前的”，但这些原则在今天仍然绝对有效。

如果您使用的是 .NET 4.x 版本，您还可以使用[任务并行库](http://msdn.microsoft.com/en-us/library/dd460717.aspx)来更轻松地处理多个线程。

即将推出的 .NET 4.5 还提供了更加舒适的 await 和 asyc 关键字：[使用 Async 和 Await 进行异步编程](http://msdn.microsoft.com/en-us/library/hh191443%28v=vs.110%29.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T08:29:11.107

使用随任务进行实时更新的标签。您可以尝试此代码 [使用 BackGroundWorker]。查看`DoWork`您将业务逻辑放在哪里 [查看`BusinessClass`代码中的用法]，然后查看`ProgressChanged`后台任务在任务进行时实时向 UI 发出信号的位置，最后查看`RunWorkerCompleted`您在任务完成、错误或取消后处理代码的位置。

```
using System.ComponentModel;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form3 : Form
    {
        private BackgroundWorker _worker;
        BusinessClass _biz = new BusinessClass();
        public Form3()
        {
            InitializeComponent();
            InitWorker();
        }

        private void InitWorker()
        {
            if (_worker != null)
            {
                _worker.Dispose();
            }

            _worker = new BackgroundWorker
            {
                WorkerReportsProgress = true,
                WorkerSupportsCancellation = true
            };
            _worker.DoWork += DoWork;
            _worker.RunWorkerCompleted += RunWorkerCompleted;
            _worker.ProgressChanged += ProgressChanged;
            _worker.RunWorkerAsync();
        }

        void DoWork(object sender, DoWorkEventArgs e)
        {
            int highestPercentageReached = 0;
            if (_worker.CancellationPending)
            {
                e.Cancel = true;
            }
            else
            {
                double i = 0.0d;
                int junk = 0;
                for (i = 0; i <= 199990000; i++)
                {
                    int result = _biz.MyFunction(junk);
                    junk++;

                    // Report progress as a percentage of the total task.
                    var percentComplete = (int)(i / 199990000 * 100);
                    if (percentComplete > highestPercentageReached)
                    {
                        highestPercentageReached = percentComplete;
                        // note I can pass the business class result also and display the same in the LABEL  
                        _worker.ReportProgress(percentComplete, result);
                        _worker.CancelAsync();
                    }
                }

            }
        }

        void RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            if (e.Cancelled)
            {
                // Display some message to the user that task has been
                // cancelled
            }
            else if (e.Error != null)
            {
                // Do something with the error
            }
        }

        void ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            label1.Text =  string.Format("Result {0}: Percent {1}",e.UserState, e.ProgressPercentage);
        }
    }

    public class BusinessClass
    {
        public int MyFunction(int input)
        {
            return input+10;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T08:22:48.893

将它放在您已经尝试过的后台线程中（或者更好的是[Task](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)），但要小心仅通过[Control.Invoke](http://msdn.microsoft.com/en-us/library/30s4t80c)（对于 WinForms）或[Dispatcher.Invoke](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.invoke.aspx)（对于 WPF）调用与 GUI 相关的操作。

# jquery - jquery 和 ruby on rails 在 click post 上插入变量

> ID：11203237
> 
> 赞同：0
> 
> 时间：2012-06-26T08:13:14.727
> 
> 标签：jquery, ruby-on-rails, variables, post

我有这个代码

```
 %button.aristo-default.accept{:href => "#", :onclick => "$.post('/sessions/accept_invite', { user_id: 1, friend_id: 1 }) " } 
```

想将@friend.id 放在 1 中，这样我就可以使用变量而不是硬编码的 1，该怎么做？一定很简单，但我尝试了几种方法都无济于事。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:50:19.140

您可以使用`#{@friend.id}`来获取实际值：

```
%button.aristo-default.accept{:href => "#", :onclick => "$.post('/sessions/accept_invite', { user_id: 1, friend_id: #{@friend.id} }) " } 
```

# linq - 组合 Lambda 动态创建

> ID：11203239
> 
> 赞同：1
> 
> 时间：2012-06-26T08:13:22.673
> 
> 标签：linq, lambda, expression, predicatebuilder

我想构建 lambda 表达式：

```
Expression<Func<MyObject, bool>> predicate = PredicateBuilder.False<MyObject>();
var param = Expression.Parameter(typeof(MyObject), "f");

if (myOperator == OperateurEnum.EG)
{
    var body = Expression.Equal(
        Expression.PropertyOrField(param, myProperty),
        Expression.Constant(myFilterValue)
    );

    var lambda = Expression.Lambda<Func<MyObject, bool>>(body, param);
    predicate = predicate.Or(lambda);
}
else if (myOperator == OperateurEnum.CT)
{
    var body = Expression.Call(
        Expression.PropertyOrField(param, myProperty),
        "StartsWith",
        null,
        Expression.Constant(myFilterValue)
    );

    var lambda = Expression.Lambda<Func<MyObject, bool>>(body, param);
    predicate = predicate.Or(lambda);
}
else if ()
{
    ...
}

var myEx = Expression.Lambda<Func<MyObject, bool>>(predicate.Body, param);
Func<MyObject, bool> lambdaDelegate = myEx.Compile(); 
```

我使用 PredicateBuilder，但出现此错误：

从范围“”引用的“ProactisMvc.Web.ProactisWsServiceReference.Offre”类型的变量“f”，但未定义

怎么了 ？还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:22:28.007

最后一点是错误的：

```
var myEx = Expression.Lambda<Func<MyObject, bool>>(predicate.Body, param);
Func<MyObject, bool> lambdaDelegate = myEx.Compile(); 
```

您正在使用`predicate`的主体创建一个新表达式，但带有*一些其他*参数。这意味着在表达式主体中使用的参数表达式将不是顶级表达式所接受的！

也许您对 PredicateBuilder 的魔力感到困惑，但`.Or`所做的只是使用表达式组合两个谓词`||`，使用第一个谓词的参数调用第二个谓词。

我想你只是想要：

```
var myDelegate = predicate.Compile(); 
```

# android - 需要在小部件 onClick 事件中打开上下文菜单

> ID：11203243
> 
> 赞同：0
> 
> 时间：2012-06-26T08:14:00.460
> 
> 标签：android, android-widget, android-contextmenu

我`widget`在我的应用程序中创建了一个，现在*当单击一个小部件时，我想在 a 中显示几个选项* `context menu`并允许用户选择其中一个。

我的小部件包含图标和文本，因此当用户单击小部件图标时，我想显示上下文菜单。

有办法吗？我`android 2.3.X`也在使用和android支持兼容包。

这就是我想要的

![在此处输入图像描述](../Images/f0b9f6da512407396f246a6e254cfa34.png)

我创建的小部件是从`AppWidgetProvider`类派生的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:33:10.387

我认为当我们单击小部件时无法打开上下文菜单。

但或者，我们可以打开一个活动并使其透明，然后打开一个包含 ListView 的对话框，这样我们就可以模仿上下文菜单的外观。

这就是我最终在我的应用程序中所做的。

# asp.net - 什么是 Interop.MSutil.dll

> ID：11203245
> 
> 赞同：8
> 
> 时间：2012-06-26T08:14:10.503
> 
> 标签：asp.net, .net, visual-studio-2010, visual-studio, dll

首先我想说我还是 ASP.NET 开发的初学者。我认为这是一个简单的问题，但我无法在任何地方找到答案。以下是我的问题：

我有一个用 .NET 2.0 开发的大型 ASP.NET 项目。现在我必须将这个项目更新到 .NET 4.0。我认为当我使用 VS2010 加载并将其转换为 .NET 4.0 时它工作得很好，但是缺少这个参考。

缺少的参考是 MSutil.dll，我不知道该参考是什么，因为我也无法在任何地方找到该 dll。在 cs 代码中，它的使用如下：

```
using LogQuery = MSUtil.LogQueryClassClass;
using IisW3cLogInputClass = MSUtil.COMIISW3CInputContextClassClass;
using LogRecordSet = MSUtil.ILogRecordset;
using LogRecord = MSUtil.ILogRecord; 
```

谁能告诉我...

*   这个参考是干什么用的？
*   我在哪里可以找到/下载它？
*   我如何在我的解决方案中包含/安装它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-26T08:45:37.420

这用于读取 IIS 日志文件并解析它们。

要获取该 DLL，请执行以下步骤：

1.  [在此处](http://www.microsoft.com/en-us/download/details.aspx?id=24659)下载 Log Parser 包。（免费下载，小`.msi`文件）

2.  使用您的项目和 Visual Studio 在计算机上安装日志解析器。

3.  浏览到已安装程序的位置，您将在其中看到名为“LogParser.dll”的文件。将文件复制到某个简单的位置，例如“C:\Temp”，原因见下文。

4.  转到 All Programs --> Microsoft Visual Studio 2010 --> Visual Studio Tools 并右键单击“Visual Studio 命令提示符”，然后选择*Run as administrator*。

5.  从控制台类型中：

    ```
    tlbimp "C:\temp\LogParser.dll" /out:"C:\temp\Interop.MSUtil.dll" 
    ```

就是这样 - 在此之后，您将`Interop.MSUtil.dll`在您的机器上丢失，将其复制到您的项目位置并添加对它的引用，就像添加到任何其他外部 DLL 文件一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-06T15:50:48.283

`Interop.MSutil.dll`是一个 .NET 接口`LogParser.dll`，主要用于解析 IIS 日志。

要使用它，您需要在您的机器上安装**并**注册[LogParser 2.2 。](https://www.microsoft.com/en-us/download/details.aspx?id=24659) **`LogParser.dll`**

 **`Interop.MSUtil`现在可通过[nuget](https://www.nuget.org/packages/Interop.MSUtil.dll/)获得，因此您不再需要自己创建它，但安装后您必须在解决方案的包文件夹中手动添加对 DLL 的引用。

添加引用后，右键单击并设置`Embed Interop Types`为，`false`以避免收到无法嵌入类的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T08:19:43.287

它似乎是一个`Interop`对象。

互操作对象是 .Net dll 和 COM 对象之间的桥梁

也许这个链接可以帮助你

[http://www.fixdllexe.com/Interop.MSUtil.dll-149085.html](http://www.fixdllexe.com/Interop.MSUtil.dll-149085.html)**

# c# - 结构图使用（功能 ) - 只解析一次

> ID：11203246
> 
> 赞同：1
> 
> 时间：2012-06-26T08:14:14.647
> 
> 标签：c#, structuremap

我正在使用结构映射来解决我的依赖关系，但是我有一个相当特殊的情况，我希望通过方法调用来构建依赖关系。每次我无法 GetInstance() 时都应该调用此方法，但它只执行一次。

我的声明如下所示：

```
x.For<UserService>().Use(c => { return MultiObjectProvider.GetInstance<UserService>(); }); 
```

也在尝试

```
x.For<UserService>().LifecycleIs(new ThreadLocalStorageLifecycle()).Use(c => { return MultiObjectProvider.GetInstance<UserService>(); }); 
```

这并没有改变任何东西。有谁知道我如何让结构图每次都解析？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:52:40.553

那应该行得通。我认为问题可能出在您的`MultiObjectProvider.GetInstance`方法中（可能在连续调用中返回相同的实例）而不是在这里。

这是我汇总的一个快速单元测试，以模仿您所拥有的（我只是使用 System.Guid 而不是您的 UserService），并且通过了。

```
 [TestInitialize]
    public void Initialize()
    {
        ObjectFactory.Initialize(x =>
        {
            x.For<Guid>().Use(c => { return Guid.NewGuid(); });
        });
    }

    [TestMethod]
    public void Test()
    {
        var o1 = ObjectFactory.GetInstance<Guid>();
        var o2 = ObjectFactory.GetInstance<Guid>();
        Assert.AreNotSame(o1, o2);
    } 
```

**旁注**：您可以按如下方式简化语法：

```
x.For<UserService>().Use(() => MultiObjectProvider.GetInstance<UserService>()); 
```

乃至

```
x.For<UserService>().Use(MultiObjectProvider.GetInstance<UserService>()); 
```

# rubymotion - Rubymotion 没有显示错误回溯？

> ID：11203248
> 
> 赞同：2
> 
> 时间：2012-06-26T08:14:22.250
> 
> 标签：rubymotion

我正在将一个 XCode iOS 应用程序转置到 Rubymotion，并且在这样做的过程中，我遇到了很多错误。

问题是，当我运行 rake 来构建应用程序时，我从未看到任何错误消息或回溯。该应用程序只是崩溃而没有任何反馈。

知道为什么会发生这种情况以及如何解决吗？

这是我的 rake 配置，以防它有助于阐明

```
build_dir              : "./build"
codesign_certificate   : "iPhone Developer: Bodacious (ABCXXX)"
delegate_class         : "AppDelegate"
deployment_target      : "5.1"
device_family          : :iphone
entitlements           : {}
files                  : [ # ... array of file names ]
fonts                  : []
frameworks             : ["UIKit", "Foundation", "CoreGraphics", "CoreLocation", "MapKit", "SystemConfiguration"]
icons                  : ["Default.png", "icons/logo.png", "icons/logo@2x.png"]
identifier             : "com.bodacious.MyApp"
interface_orientations : [:portrait]
libs                   : ["/usr/lib/libz.dylib"]
name                   : "My App"
pods                   : # long array of data
prerendered_icon       : false
provisioning_profile   : "/Users/Bodacious/Library/MobileDevice/Provisioning Profiles/MyHex.mobileprovision"
resources_dir          : "./resources"
sdk_version            : "5.1"
seed_id                : "ABC123"
specs_dir              : "./spec"
testflight             : {:sdk=>"vendor/TestFlight", :api_token=>"XXX", :team_token=>"XXX", :distribution_lists=>nil}
version                : "0.21.0"
xcode_dir              : "/Applications/Xcode.app/Contents/Developer" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T05:23:10.160

万一其他人将来偶然发现了这个问题，可以尝试打开调试器：

```
rake debug=1 
```

这将暂停崩溃，因此您可以检查（在 REPL 中）您当前的状态以尝试找出正在发生的事情。

除此之外，我发现注释掉我的应用程序的大部分并逐渐重新启用它们直到我将错误缩小到特定行是有帮助的。是的，老式的调试。:)

# silverlight - 有silverlight3 ui测试的工具吗？

> ID：11203251
> 
> 赞同：0
> 
> 时间：2012-06-26T08:14:41.743
> 
> 标签：silverlight, testing, user-interface

我只是想知道是否有任何工具可以与 silverlight3 一起用于 UI 测试。我知道 Coded UI Test，但它不支持 silverlight3。

谢谢！</p>

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-26T08:22:02.163

使用[SilverlightSpy](http://firstfloorsoftware.com/silverlightspy/download-silverlight-spy) - 从[这里获取](http://visualstudiogallery.msdn.microsoft.com/4d50ee31-6426-4968-b00f-bd50ba54d74f)

**对于 UI 自动化测试：**

[UI Spy 工具](http://msdn2.microsoft.com/en-us/library/ms727247.aspx)使开发人员和测试人员能够查看应用程序的用户界面 (UI) 元素并与之交互。通过查看应用程序的 UI 层次结构、属性值和引发的事件，开发人员和测试人员可以验证他们正在创建的 UI 是否可供屏幕阅读器等辅助技术设备以编程方式访问。

我希望这能帮到您。

更多详细信息：[Silverlight 中的 UI 自动化](http://blogs.msdn.com/b/windowssdk/archive/2008/02/18/where-is-uispy-exe.aspx)

# c# - 将对象列表更改为对象的属性

> ID：11203252
> 
> 赞同：1
> 
> 时间：2012-06-26T08:14:48.060
> 
> 标签：c#, silverlight, casting

我有一个对象列表（主要是 int、string、double）

我想将该列表中的项目转换为对象的属性。

结果应如下所示： MyObject.ItemOfList1 ， MyObject.ItemOfList2

我应该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:26:44.167

你可以试试这样的 -

```
 var listobj = new List<object>() { 1, 2, "3", "4", 1.2 };    
 var x = new ExpandoObject() as IDictionary<string, Object>;

 foreach (var obj in listobj)
 {
      //Add a property dynamically - property name and value
      x.Add(obj.ToString(), obj.ToString());  
 } 
```

# sql - 如何在 PostgreSQL 中创建只读用户？

> ID：11203254
> 
> 赞同：3
> 
> 时间：2012-06-26T08:14:52.213
> 
> 标签：sql, postgresql, postgresql-9.1, postgresql-8.4, postgresql-9.0

我想在 PostgreSQL 中创建一个只读用户。

目的是拥有一个可公开访问的数据浏览器，用户可以在其中编写自定义 SQL 查询。

我这样做是为了创建用户：

```
CREATE USER MyReadOnlyUser WITH ENCRYPTED PASSWORD 'MY_WEAK_PASSWORD';

GRANT ALL PRIVILEGES ON DATABASE "MY_DB_NAME" to MyReadOnlyUser;

GRANT ALL ON SCHEMA public TO MyReadOnlyUser; 
GRANT SELECT ON ALL TABLES IN SCHEMA public TO MyReadOnlyUser; 
```

目的是为用户提供对所有表的 SELECT 访问权限，然后撤销对敏感表的选择访问权限，然后用户可以使用该 db 用户运行自定义查询，而无需我清理输入。

特别是，他可能不会：

**插入、删除、截断、删除表、删除数据库、创建表、创建函数/过程，请参阅/执行/创建/删除存储过程/函数。**等等

Sooo - 现在我的问题是：
为什么这个用户可以访问 information_schema ？
它没有被授予访问任何视图的权限，也没有被授予模式 information_schema 的访问权限......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:28:05.400

> *为什么这个用户可以访问 information_schema*

我认为在 information_schema 上默认授予 PUBLIC 选择权限。

你应该能够做到：

```
revoke all on all tables in schema information_schema from public; 
```

您可能还需要撤销对 pg_catalog 模式中的视图/表的选择权限。但我不确定如果 psql 或其他客户端工具无法访问该信息，这会破坏什么。

# axapta - 如何将按钮添加到对话框并为单击事件创建方法

> ID：11203256
> 
> 赞同：4
> 
> 时间：2012-06-26T08:15:06.417
> 
> 标签：axapta, dynamics-ax-2009

在 Axapta 中，如何在对话框中添加按钮并拦截点击事件？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T09:31:14.013

**选项1;**

对话框 run() 中需要此行

```
element.controlMethodOverload(true); 
```

你可以重载点击事件；

```
public void MyButton_clicked()
{
//bla
} 
```

**选项 2；**

将你的按钮动作代码放在一个单独的类中，并创建一个菜单选项，添加一个菜单项按钮来执行你的代码；

```
dialog.addMenuItemButton(MenuItemType::Action,"YourNewMenuItem"); 
```

您使用哪个取决于您真正想要实现的目标。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-24T20:17:50.690

如果您在`RunBaseBatch`框架之外，您可以通过以下方式进行操作：

**请注意**，这种方式也不需要虚拟菜单项按钮。

对话框创建：

```
private void dialog()
{
    Dialog                  dlg             = new Dialog();
    DialogGroup             dlgGroup;
    FormBuildGroupControl   buttonGroup;
    FormBuildButtonControl  buttonControl;

    dlgGroup        = dlg.addGroup('ButtonGroup');
    buttonGroup     = dlg.formBuildDesign().control(dlgGroup.formBuildGroup().id());
    buttonControl   = buttonGroup.addControl(FormControlType::Button, 'A Button');

    buttonControl.registerOverrideMethod(methodStr(FormButtonControl, clicked), 
                                         methodStr(MyClass, myClickedMethod), 
                                         this);

    dlg.run();
} 
```

覆盖点击方法：

```
private void myClickedMethod(FormButtonControl _formButtonControl)
{
    info('hello world');
} 
```

# sql - SQL 语句更改特定用户的 db_owner 值

> ID：11203264
> 
> 赞同：1
> 
> 时间：2012-06-26T08:15:34.047
> 
> 标签：sql, sql-server

我需要将用户 BUILTIN\Users 的 db_owner 字段更改为 true。

我需要在 sql server 2008 中执行的 SQL 是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:18:18.113

试试这个：

```
EXEC sp_addrolemember 'db_owner', 'BUILTIN\Users' 
```

通常，Windows 登录的格式应为：

```
EXEC sp_addrolemember 'db_owner', '<computer>\<user>' 
```

[MSDN 链接](http://msdn.microsoft.com/en-us/library/ms187750.aspx)

# c++ - 创建监听 QLabel

> ID：11203265
> 
> 赞同：0
> 
> 时间：2012-06-26T08:15:43.270
> 
> 标签：c++, qt

我习惯了 Java 和 QT/C++ 的新手，我在创建一个 QLabel 时遇到了一些问题，当一个人选择 QListWidgetItem 时它会更改文本。

在我的 ui_GraphicsView.h 中，我有 setupUI() 来制作对象。我尝试将布局设为其父级。

```
label = new QLabel(verticalLayout);
   label->setObjectName(QString::fromUtf8("label"));
   verticalLayout->addWidget(label); 
```

在我的 .cpp 文件中，我在构造函数中使用了 connect ：

```
connect(list_widget, SIGNAL(itemSelectionChanged(), this, SLOT(updataDetails()))); 
```

updateDetails() 在我的 selectionChanged() 方法中执行，它传递一个字符串。

```
void GraphicsView::updateDetails(QString details){
    label->setText(details);
} 
```

这会导致以下错误：

```
error: no matching function for call to ‘QLabel::QLabel(QVBoxLayout*&)
note: candidates are: QLabel::QLabel(const QLabel&)
note: QLabel::QLabel(const QString&, QWidget*, Qt::WindowFlags)
note: QLabel::QLabel(QWidget*, Qt::WindowFlags) 
```

在我进行上述调整之前，一切都很顺利。知道是什么导致了这个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:28:06.363

阅读错误。QLabel::QLabel 是构造函数。构造函数期望指向小部件的指针，而不是布局。实际上，您想要执行以下操作：

```
label = new QLabel(parent_widget);
label->setLayout(layout) 
```

编辑：奇怪，没有人注意到我的错误。在标签上设置布局很奇怪。更好的是

```
label=new QLabel();
layout->addWidget(label). 
```

标签将获得布局的所有者作为父级。

# multithreading - 为什么我的 ActiveX 冻结了 IE 选项卡，但 Flash 等其他东西却没有？

> ID：11203267
> 
> 赞同：0
> 
> 时间：2012-06-26T08:15:52.180
> 
> 标签：multithreading, flash, internet-explorer, activex

通过参考[Another Question About ActiveX freezes IE](https://stackoverflow.com/questions/853902/activex-freezes-ie)，我也像作者一样写了一个Active，当activex做某事时，整个IE都被冻结了。不能选择其他选项卡，也不能关闭其中包含 activex 的选项卡。

我知道我可以编写一些线程代码来完成这项工作。但是，我的问题是，Flash 或 Silverlight 等其他 activex，它们如何解决？我不相信他们所有的工作都是异步的，也许他们把所有的工作都保持得很短，所以我们从来没有注意到延迟？

欢迎任何建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T03:45:13.900

您不能在 IE 的 UI 线程上执行长时间运行的操作，否则选项卡将挂起。UI 线程是您的控件实例化的线程；它是调用的那个`IObjectWithSite::SetSite()`。你在做什么工作？长时间运行的操作包括文件处理、HTTP 请求以及任何涉及获取任何类型的锁的操作。

您对 Flash 是如何工作的猜想也是错误的；Flash 确实使用了多个线程。

# scala - 什么是密封特性？

> ID：11203268
> 
> 赞同：360
> 
> 时间：2012-06-26T08:15:54.030
> 
> 标签：scala, sealed, traits

密封类在“Scala 编程”中进行了描述，但密封特性没有。我在哪里可以找到有关密封特性的更多信息？

我想知道，如果密封特征与密封类相同？或者，如果不是，有什么区别？什么时候使用密封特性是个好主意（什么时候不）？

* * *

## 回答 #1

> 赞同：510
> 
> 时间：2012-06-26T08:55:30.240

`sealed`特征只能在与其声明相同的文件中扩展。

它们通常用于提供`enums`. 由于它们只能在单个文件中扩展，因此编译器知道所有可能的子类型并且可以对其进行推理。

例如声明：

```
sealed trait Answer
case object Yes extends Answer
case object No extends Answer 
```

如果匹配不完整，编译器将发出警告：

```
scala> val x: Answer = Yes
x: Answer = Yes

scala> x match {
     |   case No => println("No")
     | }
<console>:12: warning: match is not exhaustive!
missing combination            Yes 
```

因此，如果可能的子类型的数量是有限的并且事先已知，则应该使用密封特征（或密封抽象类）。有关更多示例，您可以查看[列表](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/immutable/List.scala#L76)和[选项](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/Option.scala#L85)实现。

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2012-06-26T16:48:33.107

> 密封特征与密封类相同吗？

就目前`sealed`而言，是的。`trait`当然，它们共享和之间的正常差异`class`。

> 或者，如果不是，有什么区别？

没有实际意义。

> 什么时候使用密封特性是个好主意（什么时候不）？

如果您有`sealed class X`，那么您必须检查`X`任何子类。`sealed abstract class X`或的情况并非如此`sealed trait X`。所以你可以这样做`sealed abstract class X`，但这比仅仅更冗长`trait`而且几乎没有优势。

使用`abstract class`over a的主要优点`trait`是它可以接收参数。在使用类型类时，这一优势尤为重要。例如，假设您要构建一个排序树。你可以这样写：

```
sealed abstract class Tree[T : Ordering] 
```

但你不能这样做：

```
sealed trait Tree[T : Ordering] 
```

因为上下文边界（和视图边界）是使用隐式参数实现的。鉴于特征不能接收参数，你不能这样做。

就个人而言，我更喜欢`sealed trait`并使用它，除非某些特殊原因让我使用`sealed abstract class`. 而且我不是在谈论微妙的原因，而是您不能忽视的表面原因，例如使用类型类。

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2012-06-26T08:20:15.967

来自[Daily-scala 博客](http://daily-scala.blogspot.com/2010/02/self-annotation-vs-inheritance.html)：

> 当一个特征被“密封”时，它的所有子类都在同一个文件中声明，这使得子类集是有限的，这允许某些编译器检查。

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2013-09-03T15:03:19.347

我也觉得有必要指出你的规格：

> **密封**修饰符适用于类定义。**密封**类不能直接继承，除非继承模板与被继承类定义在同一个源文件中。但是，密封类的子类可以在任何地方继承。
> 
> — [M.奥德斯基。Scala 语言规范，2.8 版。在线，2013 年 9 月。](http://www.scala-lang.org/files/archive/nightly/pdfs/ScalaReference.pdf)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-07-29T18:45:09.120

简要地：

*   密封特征只能在同一个文件中扩展
*   列出这个让编译器很容易知道所有可能的子类型
*   当可能的亚型数量有限且事先已知时，使用密封特征
*   一种在 Java 中创建类似枚举的方法
*   帮助定义代数数据类型 (ADT)

以及更多细节 [关于 Scala 中的密封特征的一切](https://underscore.io/blog/posts/2015/06/02/everything-about-sealed.html)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-08-05T16:53:43.123

特征也可以被定义为**密封**的，并且只能通过一组固定的`case classes`. **普通性状**和**封印性状**的核心区别可以总结如下：

*   **普通 trait**是开放的，因此任何数量的类都可以从 trait 继承，只要它们提供所有必需的方法，并且这些类的实例可以通过 trait 的必需方法互换使用。一个**正常的 trait**层次结构可以很容易地添加额外的子类：只需定义你的类并实现必要的方法。但是，添加新方法变得困难：需要将新方法添加到所有现有子类中，其中可能有很多。

*   **Sealed trait**是封闭的：它们只允许一组固定的类从它们继承，并且所有继承类必须与 trait 本身一起定义在同一个文件或 REPL 命令中。密封的**trait**层次结构则相反：添加新方法很容易，因为新方法可以简单地对每个子类进行模式匹配并决定要为每个子类做什么。但是，添加新的子类很困难，因为您需要转到所有现有的模式匹配并添加案例来处理您的新子类。

举个例子

```
object SealedTraits extends App{
  sealed trait Point
  case class Point2D(x: Double, y: Double) extends Point
  case class Point3D(x: Double, y: Double, z: Double) extends Point

  def hypotenuse(p: Point) = p match {
    case Point2D(x, y) => math.sqrt(x  x + y  y)
    case Point3D(x, y, z) => math.sqrt(x  x + y  y + z  z)
  }

  val points: Array[Point] = Array(Point2D(1, 2), Point3D(4, 5, 6))

  for (p <- points) println(hypotenuse(p))
  // 2.23606797749979
  // 8.774964387392123 
```

一般而言，**密封特征**适用于对您期望子类数量变化很小或根本不变化的层次结构进行建模。可以使用**密封特征**建模的一个很好的例子是 `JSON`.

*   值`JSON`只能是`JSON`null、布尔值、数字、字符串、数组或字典。
*   `JSON`20 年来没有改变，所以不太可能有人需要`JSON` 用额外的子类来扩展我们的。
*   虽然子类的集合是固定的，但我们可能想要对`JSON`blob 执行的操作范围是无限的：解析它、序列化它、漂亮打印它、缩小它、清理它等等。因此建模是有意义的作为封闭密封特征层次结构的`JSON`数据结构，而不是正常的开放特征层次结构。

```
 sealed trait Json
  case class Null() extends Json
  case class Bool(value: Boolean) extends Json
  case class Str(value: String) extends Json
  case class Num(value: Double) extends Json
  case class Arr(value: Seq[Json]) extends Json
  case class Dict(value: Map[String, Json]) extends Json 
```

# grails - 为保存模型编写单元测试

> ID：11203277
> 
> 赞同：1
> 
> 时间：2012-06-26T08:16:20.817
> 
> 标签：grails, groovy, grails-2.0

我是一个 grails 初学者.. 并学习编写单元测试用例

我有 2 个域

```
class Employee {

    String name
    String department

    static hasOne =[address: Address]   

    public String toString() {
        name
    }
} 
```

* * *

```
class Address {

    String line1
    String line2

    Employee employee

    static constraints = {
    }
} 
```

所以这是我的 AddressControllerTest.groovy

```
 void testSave() {

        def address = new Address(line1: "Kaser Road", line2: "Bridage Town")
        .addToEmployee(new Employee(name: "monda", department:"IT")).save()

        controller.save()

        assert model.addressInstance != null
} 
```

给出错误报告

```
No signature of method: trip.side.Address.addToEmployee() is applicable for argument types: (trip.side.Employee) values: [monda] Possible solutions: setEmployee(trip.side.Employee), getEmployee()
groovy.lang.MissingMethodException: No signature of method: trip.side.Address.addToEmployee() is applicable for argument types: (trip.side.Employee) values: [monda]
Possible solutions: setEmployee(trip.side.Employee), getEmployee()
    at trip.side.AddressControllerTests.testSave(AddressControllerTests.groovy:41) 
```

谁能建议我正确的做法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:39:23.437

你需要告诉 Grails，你想模拟哪些域类，所以使用：

```
mockDomain( Employee )
mockDomain( Address ) 
```

这与 Grails 1.x 有关，2.x 版本使用注解：

```
@Mock( [ Employee, Address ] ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T22:29:56.493

虽然您仍然需要像汤姆所说的那样进行模拟，但您使用`addTo*`不正确 - 这正是错误消息告诉您的内容。 `addTo*`用于一对多和多对多关系，而不是一对一关系。您可以按照设置域的方式执行以下操作：

```
def employee = new Employee(name: "monda", department:"IT", address: new Address(line1: "Kaser Road", line2: "Bridage Town")).save() 
```

# android - Android：如何在不同的时间段内为不同的对象设置动画？

> ID：11203278
> 
> 赞同：0
> 
> 时间：2012-06-26T08:16:22.093
> 
> 标签：android, android-animation

如何在不同的持续时间内为不同的对象集设置动画？

JAVA代码：

```
ImageButton home = (ImageButton)findViewById(R.id.homeicon);
ImageButton settings = (ImageButton)findViewById(R.id.settingsicon); 

Animation alpha_anim = AnimationUtils.loadAnimation(this, R.anim.alpha);
home.startAnimation(alpha_anim);
settings.startAnimation(alpha_anim); 
```

动画文件：

```
<?xml version="1.0" encoding="utf-8"?>
<alpha
xmlns:android="http://schemas.android.com/apk/res/android"
android:fromAlpha="0.0"
android:toAlpha="0.9"
android:duration="8000" /> 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:25:28.443

您可以为第二个动画添加第一个动画应该花费的时间。请意识到这可能不足以满足您的需要，如果不是，那么您可能需要走[AnimationListener的路线](http://developer.android.com/reference/android/view/animation/Animation.AnimationListener.html)

```
home.startAnimation(alpha_anim);
alpha_anim.setStartOffset(8000);
settings.startAnimation(alpha_anim); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:54:25.067

我有一个屏幕需要为第一个布局设置动画，一旦完成，我想在第二个布局上开始动画。

所以我当时就习惯`handler`这样做，像这样

```
Handler handler = new Handler(); // create Handler object
handler.post(homeRun);
Runnable homeRun = new Runnable() { // create runnable to start home anim
    public void run() {
        home.startAnimation(alpha_anim);
        handler.postDelayed(settingsRun, 1000); // start setting anim after the time the home takes to animate
    }
};

Runnable setingsRun = new Runnable() { // runnable to start settings anim
    public void run() {
        settings.startAnimation(alpha_anim);
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:09:44.733

如果您想一个接一个地执行，您可以使用此代码。通过使用侦听器，您可以确定动画已完成。

```
animation.setDuration(8000);
    animation.setAnimationListener(new AnimationListener() {

        @Override
        public void onAnimationEnd(Animation animation) {
            animation.setDuration(6000);
                                 animation.setAnimationListener(null);
            settings.startAnimation(animation);
        }

        @Override
        public void onAnimationRepeat(Animation animation) {

        }

        @Override
        public void onAnimationStart(Animation animation) {
        }

    });
    home.startAnimation(alpha_anim); 
```

# sql - 过程试图返回 NULL 状态，这是不允许的。将返回状态 0

> ID：11203281
> 
> 赞同：1
> 
> 时间：2012-06-26T08:16:26.760
> 
> 标签：sql, sql-server, tsql

我正在使用`execute sp_executesql`在 sp 中执行插入查询。查询已执行，插入正确发生。在我使用之后`scope indentity()`，值被设置为一个输出参数。但我收到错误：

> `procedure attempted to return a status of NULL, which is not allowed. A status of 0 will be returned instead.`

如何解决？有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:52:38.673

该`SCOPE_IDENTITY()`函数返回插入**当前范围**的最后一个标识值。您正在执行的动态查询`EXEC sp_executesql`不在*当前*范围内。您需要调用`SCOPE_IDENTITY()`动态查询或使用不同的方法来获得所需的结果。

这是您可以使用的方法`SCOPE_IDENTITY()`：

```
DECLARE @ID int;

EXEC sp_executesql N'
  INSERT INTO …;
  SET @ID = SCOPE_IDENTITY();
', N'@ID int OUTPUT', @ID OUTPUT;

RETURN @ID; 
```

或者您可以尝试以下方法：

```
DECLARE @LastID TABLE (ID int);

INSERT INTO @LastID (ID)
EXEC  sp_executesql N'
  INSERT INTO …;
  SELECT SCOPE_IDENTITY();
';

RETURN (SELECT TOP 1 ID FROM @LastID); 
```

如果您使用的是 SQL Server 2005+，则可以修改上述方法以使用`OUTPUT`子句 of`INSERT`而不是`SELECT SCOPE_IDENTITY()`.

# c# - 使用 Monotouch 生成 .rtf 文件

> ID：11203282
> 
> 赞同：0
> 
> 时间：2012-06-26T08:16:32.500
> 
> 标签：c#, xamarin.ios, rtf

我需要在我的 Monotouch 开发的 iOS 应用程序中生成 .rtf 文件。我找到了适用于 .Net 平台但不适用于 Monotouch 的库。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:35:02.913

有一些开源项目可以创建 RTF 文档，如果您自己为 MonoTouch 重新编译它们，您可能会使用这些项目。这个似乎是在没有外部依赖的情况下构建的，所以如果只是重新编译它应该可以在 MonoTouch 上正常工作。

[http://sourceforge.net/projects/netrtfwriter/](http://sourceforge.net/projects/netrtfwriter/)

# magento - Magento 在创建可配置产品时出错

> ID：11203284
> 
> 赞同：-1
> 
> 时间：2012-06-26T08:16:39.587
> 
> 标签：magento

我最近创建了一个名为的属性`tshirt_color`，并使用该属性创建了一个可配置的产品。但是在保存该可配置产品时，我遇到了这个错误

`SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '111-0-1' for key 1`

请分享您的意见以解决此问题....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:22:54.737

这发生在 magento v1.6 上

您可以先尝试截断以“log_”开头的日志表，此[链接](http://phpmysqltalk.com/1099-magento-1-6-upgrade-errors-with-solutions.html)也可以提供帮助

# dojo - dojo 要求失败

> ID：11203285
> 
> 赞同：0
> 
> 时间：2012-06-26T08:16:41.880
> 
> 标签：dojo, dijit.tree

看到[这个小提琴](http://jsfiddle.net/kcDz9/)。这在运行时会在控制台中出现错误。我目前正在使用铬。这是一个错误吗？

做`require(["dijit/tree" ]`应该加载`.../digit/tree.js`，但它给出了一个`404`

```
GET http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dijit//tree.js 404 (Not Found) 
```

应该只有一个`/` ，但有两个！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:43:31.460

你需要大写树

```
require(["dijit/Tree"] 
```

# doctrine - Symfony 1.4 具有多个应用程序和不同的数据库

> ID：11203290
> 
> 赞同：1
> 
> 时间：2012-06-26T08:16:58.857
> 
> 标签：doctrine, symfony-1.4, multiple-databases

我有一个重要的 Symfony 项目，其中有不同的应用程序。我想要不同的数据库，每个应用程序一个。

我发现我可以有多个数据库连接，但是当我创建模式、模型表单和过滤器时，symfony 将所有这些类放到 /lib/folder 中。

有没有一种方法可以根据每个应用程序自己的模式为每个应用程序创建模型、表单、过滤器，并将生成的类放入 /apps/myApp/lib 之类的东西中？

非常感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:49:40.190

您可以在架构中使用“package”参数，如下所示：

```
Model:
  connection:                           doctrine
  package:                              your_package
  tableName:                            model
  columns:
    ... 
```

# html - 直接链接到视频，没有任何反应

> ID：11203294
> 
> 赞同：0
> 
> 时间：2012-06-26T08:17:29.380
> 
> 标签：html, video, filestream

我不确定为什么我认为文件应该由浏览器处理（在我的情况下是 chrome）然后做一些事情（对于 chrome，我认为它使用 QuickTime 来播放）但我只是得到一个无标题的浏览器标题和页面实际上并没有加载，就好像它加载了一个空的 html 页面

无论如何地址是： [www.motionvideos.tv/video/1022_market_review_february_2012_taylors.mp4](http://www.motionvideos.tv/video/1022_market_review_february_2012_taylors.mp4)

可能影响它的其他细节：该站点使用 WordPress，由于某人的摆弄，该站点当前无法运行，并且将关闭一天左右（愚蠢的宙斯服务器重定向）

视频不到 9MB。

可能的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:51:44.813

此链接用于视频下载。你想让它显示在页面上吗？如果是这样，您需要打开一个 HTML 页面来嵌入它。

这是您通过代码嵌入它的方式： [http ://www.mediacollege.com/video/format/mpeg4/streaming/example.html](http://www.mediacollege.com/video/format/mpeg4/streaming/example.html)

对于 WP，您需要打开一个帖子并使用专用插件进行嵌入。

另外，您应该知道：

1.  MP4 不是普遍通用的编解码器 - 一些用户（很多？）将无法查看它

2.  文件本身将直接从服务器加载，从而显着影响总带宽使用（可以反映站点速度、托管成本等）

3.  此外，并非所有托管商都支持（默认情况下）媒体托管。这与上述带宽问题有很大关系。

我建议重新编码为更常见的编解码器 + 使用 3-rd 方提供商（IE Flash + Youtube 是一种流行的选择，但您也可以使用 AVI + Media Hosting Provider X）

希望这可以帮助。

# javascript - 如何在javascript中循环另一个数组时制作数组

> ID：11203299
> 
> 赞同：0
> 
> 时间：2012-06-26T08:17:45.987
> 
> 标签：javascript

```
for (var i = 0; i < input.files.length; ++i) {
     name = name.push(input.files[i].name)
} 
```

我想获取文件的名称并将它们放在一个数组中，这样我就可以将它们发布到一个 php 文件中进行上传。请帮忙。

变量名是我要发布的数组。

javascript中是否有一个循环，例如php中的foreach

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T08:21:33.227

这个怎么样：

```
var name = [];
for (var i = 0; i < input.files.length; ++i) {
     name.push(input.files[i].name);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:21:28.147

试试这个方法

```
var name = new Array();

for (var i = 0; i < input.files.length; ++i) {
   name[i] = name.push(input.files[i].name)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T02:41:22.597

我找到了代码同时使用 for loop 和 jquery $.each loop Thanx 的答案

```
for (var i = 0; i < input.files.length; ++i) {
   $.each(input.files.name,function(index,value){
     if(index == 'name'){
       name.push(value)
     }
   })
} 
```

# oracle - 无法通过 VBA 连接到 Oracle - 驱动程序的 SQLSetConnectAttr 失败

> ID：11203305
> 
> 赞同：1
> 
> 时间：2012-06-26T08:17:59.907
> 
> 标签：oracle, vba, excel, odbc

我在用户 DSN 下使用“Microsoft ODBC for Oracle”驱动程序为 oracle 创建了一个 ODBC 连接。我可以使用 SQL 开发人员连接到 oracle 10g，但是当我尝试通过 ODBC 连接时，它会说

> **[Microsoft][ODBC DRIVER Manager] 驱动程序的 SQLSetConnectAttr 失败**

我已尝试使用以下代码进行连接。

```
data_src = Oracle
Database = sys
Uid = <my id>
pwd = <my pwd>
Set cn=new ADOBB.Connection
Cn.open "DataSource=" + data_src + ";" + Database + "; persist security Infor = True; UserID= " + Uid + "; Password=" + pwd + "; SessionMode = ANSI;" 
```

我已经使用具有不同设置的相同代码连接到 Teradata。请帮我从 VBA 连接 Oracle 10g

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:20:50.950

已知问题 - 请参阅[IBM 支持帖子](http://www-01.ibm.com/support/docview.wss?uid=swg21541694)。解决方案 - 使用 Oracle 驱动程序。

此外 - 不同数据库驱动程序之间的连接字符串不同。例如，Microsoft Oracle 驱动程序的连接字符串如下所示

```
Driver={Microsoft ODBC for Oracle};Server=myServerAddress;Uid=myUsername;Pwd=myPassword; 
```

而甲骨文自己的驱动程序将类似于

```
Driver={Oracle in OraHome92};Dbq=myTNSServiceName;Uid=myUsername;Pwd=myPassword; 
```

分享和享受。

# ruby-on-rails-3 - 部署时无迁移

> ID：11203308
> 
> 赞同：0
> 
> 时间：2012-06-26T08:18:13.740
> 
> 标签：ruby-on-rails-3, deployment, capistrano

我有一个简单的问题。我在部署时的应用程序不是从`rake db:migrate`生产环境开始的。我没有创建`deploy.rb`我已经准备好了。`deploy.rb`正在工作，但命令`'deploy:migrate'`不起作用。我不知道，问这个问题有多正确。但我认为这个问题与`:role`. 也许`rake db:migrate`需要描述？像这样：

```
namespace :db do

  desc "Rake migration"
    task :migrate, :roles => :db do
      run "cd #{current_path} && #{rake} RAILS_ENV=production db:migrate"
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:42:34.537

我不确定我是否理解了你的问题......

已经有一个`deploy:migrate`任务定义为 capistrano 的一部分，您只需在其中添加一个钩子，`deploy.rb`它就会运行。有关执行此操作的详细信息，请参阅[此答案](https://stackoverflow.com/a/4897555/152786)。

您不需要上面定义的代码，但如果您这样做，请注意您没有定义`deploy:migrate`您正在定义`db:migrate`.

# heroku - 在 heroku 上部署 playframework 应用程序

> ID：11203319
> 
> 赞同：0
> 
> 时间：2012-06-26T08:19:01.833
> 
> 标签：heroku, playframework, playframework-1.x

我正在尝试将 playframework 应用程序部署到 Heroku。部署后，我尝试访问 Heroku 给我的 URL，它只显示一个欢迎页面，如下所示：

赫罗库 | 欢迎使用您的新应用！如果您需要帮助部署，请参阅文档。

有错吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:17:29.107

Heroku 无法识别您的应用程序（Heroku 不知道如何启动您的应用程序）。

`Procfile`您需要在 Play 的顶层目录中创建一个名为的文件！应用：

```
web: play run --http.port=$PORT $PLAY_OPTS 
```

您将在[本文档](http://blog.heroku.com/archives/2011/8/29/play/)中获得更多详细信息。

# r - 函数和运算符的区别

> ID：11203320
> 
> 赞同：0
> 
> 时间：2012-06-26T08:19:07.530
> 
> 标签：r

我已经定义了一个绑定函数，

```
b <- function(f,...) function(x) f(x, ...) 
```

所以我可以做类似的事情（这是一个假的例子）

```
d = data.frame(x=c(1,2,1), y=c(10, 20, 5))
ddply(d, ~x, b(transform, y=sum(y))) 
```

代替

```
ddply(d, ~x, function (df) { transform(df, y=sum(y)) } 
```

现在，我正在尝试定义一个运算符

```
'%b%' <- function(x,...) b(x,...) 
```

并尝试

```
ddply(d, ~x, transform %b% (z=y*10))) 
```

它不起作用。有什么不同 ？

当我做

```
> b(transform, y=y/sum(y))(d)
x         y c.1..2..1.
1 1 0.2857143          1
2 2 0.5714286          2
3 1 0.1428571          1 
```

这行得通，但是

```
> transform %b% (y=y/sum(y))(d)
Error in transform %b% (y = y/sum(y))(d) : object 'y' not found 
```

我了解，存在“捕获”差异，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:18:12.160

为了使您的示例工作，您需要将函数参数与现有函数匹配，使用`match.fun()`：

```
`%b%` <- function(x,...) match.fun(b)(x,...)
ddply(d, ~x, transform %b% (z=y*10))

  x  y
1 1 10
2 1  5
3 2 20 
```

`match.fun()`如果你在你的第一个定义中使用它也会更安全`f`：

```
b <- function(f, ...) function(x) match.fun(f)(x, ...)
ddply(d, ~x, b(transform, y=sum(y)))
  x  y
1 1 10
2 1  5
3 2 20 
```

* * *

回答了您的问题后，我现在必须指出，我不明白您为什么要这样做，因为`plyr`像`ddply`基础 R 函数这样的`apply`函数已经这样做了。

所以，我会像这样写你原来的例子：

```
ddply(d, ~x, transform, y=sum(y))
  x  y
1 1 15
2 1 15
3 2 20

ddply(d, ~x, transform, y=y/sum(y))
  x         y
1 1 0.6666667
2 1 0.3333333
3 2 1.0000000 
```

* * *

*编辑*：

我又看了你的问题。您只是在函数定义中犯了语法错误。这与中缀运算符完美配合：

```
'%b%' <- function(f,...) function(x) f(x, ...)
ddply(d, ~x, transform %b% (z=y*10))
  x  y
1 1 10
2 1  5
3 2 20 
```

# javascript - Javascript 小书签：如何使用当前页面 url 自动填充字段？

> ID：11203321
> 
> 赞同：1
> 
> 时间：2012-06-26T08:19:08.557
> 
> 标签：javascript, jquery, bookmarklet

我在 www.example.com/fill_url 有一个页面，只有一个字段（id="url_field"）。我想要一个可以获取我所在页面的当前 url 并自动填充“url_field”的小书签。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:32:06.970

尝试：

```
javascript:document.getElementById('url_field').value = window.location.href; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:22:18.477

url 可通过`location.href`，您可以访问要使用的元素`document.forms['formname'].elements['urlfield']`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T08:22:26.703

尝试：

```
javascript:document.getElementById('url_field').value = 'your value'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-20T18:48:01.727

为了让原始请求正常工作，我在我的页面版本中添加了一些 JavaScript，上面有表单字段，以便它可以捕获通过这个小书签传递给它的查询字符串值：

```
javascript:window.location='http://codepen.io/Realto619/pen/RPGaVd?url='+location.href; 
```

[http://codepen.io/Realto619/pen/RPGaVd](http://codepen.io/Realto619/pen/RPGaVd)

# javascript - Javascript 定位问题

> ID：11203323
> 
> 赞同：-1
> 
> 时间：2012-06-26T08:19:13.677
> 
> 标签：javascript

我正在处理一个共享点页面，我需要定位顶部菜单标题和菜单项。

但出于某种原因，脚本似乎确实想知道：

脚本

```
<script type="text/javascript">
    alert('zz1_TopNavigationMenuV4');
    var topNav = $get('zz1_TopNavigationMenuV4');
    alert(topNav);
    var links = topNav.getElementsByTagName('A');
    for (var i=0; i < links.length; i++)
    {
        var link = links[i];alert(link)
    }
</script> 
```

HTML

```
<div id="zz1_TopNavigationMenuV4" class="s4-tn">
<div class="menu horizontal menu-horizontal">
<ul class="root static">
<li class="static"><a class="static menu-item" href="/sites/99991/SitePages/hold/highlights%20hold.aspx" accesskey="1"><span class="additional-background"><span class="menu-item-text">highlights hold</span></span></a></li><li class="static"><a class="static menu-item" href="/sites/99991/SitePages/promo/highlights%20promo.aspx"><span class="additional-background"><span class="menu-item-text">highlights promo</span></span></a></li><li class="static"><a class="static menu-item" href="/sites/99991/SitePages/live/action%20live.aspx"><span class="additional-background"><span class="menu-item-text">action live</span></span></a></li><li class="static"><a class="static menu-item" href="/sites/99991/SitePages/hold/action%20hold.aspx"><span class="additional-background"><span class="menu-item-text">action hold</span></span></a></li><li class="static"><a class="static menu-item" href="/sites/99991/SitePages/promo/action%20promo.aspx"><span class="additional-background"><span class="menu-item-text">action promo</span></span></a></li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T08:23:52.733

您正在使用`$get`但似乎您不知道在此使用 jquery。如果您的意图只是使用 javascript`getElementById(yourelementId)`就是您想要的。

# c# - 在属性上设置绑定时是否会触发事件？

> ID：11203324
> 
> 赞同：10
> 
> 时间：2012-06-26T08:19:17.713
> 
> 标签：c#, .net, wpf, xaml

我遇到了一个问题，我需要了解对对象的依赖属性所做的所有绑定。目前，每当我的数据上下文发生变化时，我都会迭代依赖属性，并寻找绑定表达式。但我发现在某些情况下（TabControls），数据上下文似乎是首先设置的，然后是来自 XAML 的绑定。

那么，有没有一种方法可以检测应用到我的依赖属性之一的绑定？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T13:11:02.433

假设您在 UserControl 中，您应该能够为此使用[Loaded](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.loaded.aspx)事件。当“元素布局、渲染并准备好进行交互”时触发该事件。我只能假设这意味着绑定已经完成。

然后，您可以在`Loaded`事件处理程序中告诉您的数据上下文您正在绑定它。

如果您希望数据上下文发生变化，您还需要将其与`DataContextChanged`事件处理程序结合起来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T08:35:30.747

我假设您使用私有静态 DataContextChanged 事件来知道您的数据上下文何时正确更改

这是我的一些代码这就是我所做的

```
 public static readonly DependencyProperty ApplicationDataContextProperty =
            DependencyProperty.Register("ApplicationDataContext",
            typeof(Object),
            typeof(MyControl),
            new PropertyMetadata(MyControl_DataContextChanged));

// my constructor

        public MyControl()
        {

                InitializeComponent();

                if (!DesignerProperties.GetIsInDesignMode(new DependencyObject()))
                {
                    SetBinding(ApplicationDataContextProperty, new Binding());
                }

        }

// my event
        private static void MyControl_DataContextChanged(object sender, DependencyPropertyChangedEventArgs e)
        {

                MyControl thisControl = sender as MyControl
                if (thisControl != null)
                {
                    INotifyPropertyChanged propertyChanged;
                    propertyChanged = e.OldValue as INotifyPropertyChanged;
                    if (propertyChanged != null)
                        propertyChanged.PropertyChanged -= thisControl.propertyChanged_PropertyChanged;

                    propertyChanged = e.NewValue as INotifyPropertyChanged;
                    if (propertyChanged != null)
                        propertyChanged.PropertyChanged += thisControl.propertyChanged_PropertyChanged;
                }

        }

// my 2e event
        void propertyChanged_PropertyChanged(object sender, PropertyChangedEventArgs e)
        {

                if (e.PropertyName == "ListWithUsers")
                    LoadGrid();

        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T13:11:13.923

尝试`NotifyOnSourceUpdated`在关键绑定上使用

[http://msdn.microsoft.com/en-us/library/system.windows.data.binding.notifyonsourceupdated.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.notifyonsourceupdated.aspx)

或者，您可以使用 PresentationTraceSources 在输出窗口中获取详细的绑定信息

例如

```
<TextBlock Text="{Binding Name, PresentationTraceSources.TraceLevel=High}" /> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-26T08:26:01.880

当属性更改时引发事件正是 INotifyPropertyChanged 所做的。实现 INotifyPropertyChanged 需要一个成员，即 PropertyChanged 事件

示例和更多详细信息：[每当属性值更改时引发事件？](https://stackoverflow.com/questions/2246777/raise-an-event-whenever-a-propertys-value-changed)

# java - 新Java程序员，基本Java组合

> ID：11203325
> 
> 赞同：5
> 
> 时间：2012-06-26T08:19:20.497
> 
> 标签：java, composition

我是一名新的计算机编程学生。我看了一个关于 Java、基本组成的视频，视频中的人就这个话题做了一个这样的例子：

```
public class PaperTray
{
  int pages = 0;
  ....
  public boolean isEmpty()
  {
    return pages > 0;
  }
} 
```

* * *

```
public class Printer extends Machine
{
  private PaperTray paperTray = new PaperTray();
  ....
  public void print(int copies)
  {
  ....
  while(copies > 0 && !paperTray.isEmpty() )
  {
    System.out.println("some text to print");
    copies--;
  }
  if(paperTray.isEmpty())
  {
    System.out.println("load paper");
  }
} 
```

我的问题是如果纸盘是空的，那么在 PaperTray 类中，方法 isEmpty() 将返回 false。因此，Printer 类中的 if 语句将不会被执行。如果纸盘不为空，PaperTray 类中的 isEmpty() 方法将返回 true，因此 Printer 类中的 while 语句将不会被执行。是我错了，还是视频剪辑中的教练犯了一些错误？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T08:22:40.090

的逻辑`isEmpty`没有意义：我也希望

```
public boolean isEmpty() {
    return pages == 0;
} 
```

或者

```
public boolean isNotEmpty() {
    return pages > 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T08:21:06.943

> 如果纸盘是空的，那么在类`PaperTray`中该方法`isEmpty()`将返回`false`

它应该返回`true`（对于任何合理的实现，即:-)。对于名为 的方法`isEmpty()`，常识规定它`true`在封闭对象/集合*为空*时返回，并且`false`在*不*为空时返回。

换句话说，您在上面显示的实现有一个错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T20:19:32.213

我是视频中的导师。感谢您发现此错误。你是对的。在录制视频的某个时候，我必须在那里有 > 0 而不是 <= 0。

接得好。它应该是

```
public class PaperTray
{
  int pages = 0;
  ....
  public boolean isEmpty()
  {
    return pages <= 0;
  }
} 
```

我检查了可下载课程的示例代码，它在那里以及课程中出现的其他任何地方都是正确的，所以它一定只是那个地方。

再次感谢您发现该错误，并为该错误和它给您带来的困惑表示歉意。希望您仍然能够从课程中受益。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T08:24:15.697

代码中缺少一些东西：在制作副本时，只会`copies`减少。但是代码也应该减少`pages`in的值`PaperTray`，否则就没有纸被用来制作副本。

发生这种情况时，代码很好：

```
while(copies > 0 && !paperTray.isEmpty() )
{
System.out.println("some text to print");
copies--;
}
if(paperTray.isEmpty())
{
System.out.println("load paper");
} 
```

只要纸盒中有纸，它将继续制作所需数量的副本。当没有纸了时，while循环将退出。无论哪种方式，最后都会执行检查，以告知用户在纸盘为空时重新填充纸盘。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T08:41:33.550

这段代码似乎有几个问题：

```
public boolean isEmpty(){
    //return pages > 0; this doesnt make sense
    return pages==0; 
}

public void print(int copies){
    while(copies > 0 && !paperTray.isEmpty()){
        System.out.println("some text to print");
        pages--;//this is not enough. You need to decrement copies as well
    }

    if(paperTray.isEmpty())
        System.out.println("load paper");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T08:23:59.183

是的，你说的是对的。`isEmpty()`为空时应返回 true。可能是导师的错误。

# macos - 终端打开时运行的未知 bash 脚本？

> ID：11203326
> 
> 赞同：1
> 
> 时间：2012-06-26T08:19:21.003
> 
> 标签：macos, bash, unix, terminal

我不确定这里发生了什么 - 我在我的 Mac 上打开一个终端窗口并看到以下内容：

```
Last login: Tue Jun 26 00:36:08 on ttys002
-bash: : command not found
-bash: : command not found 
```

在我看来，每当我打开一个新的终端窗口时，就会执行一些文件，但我不知道如何找到这个文件。是否有一些我可以轻松找到的终端打开时运行的文件列表？我很想知道这里发生了什么（以及它最初是如何发生的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:23:47.710

```
grep Sorry $(grep -l Thank /etc/profile /etc/bash* ~/.bashrc ~/.bash_profile ~/.profile) /dev/null 
```

而且（如果幸运的话）你会发现这些奇怪的命令在哪里`Thank`和`Sorry`。

尽管这些行是在某些命令替换期间产生的，但这是可能的。在这种情况下，您将找不到字符串。我建议然后添加`set -x`到`~/.bash_profile`以查找产生这些消息的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:21:59.170

检查和。`.bashrc`_ 具体来说，我感觉您有一个标有引号的字符串，然后正在尝试执行`.profile``.bash_profile`

从 bash 手册：

> 当 bash 作为交互式登录 shell 或作为带有 --login 选项的非交互式 shell 调用时，它首先从文件 /etc/profile 中读取并执行命令（如果该文件存在）。读取该文件后，它会按顺序查找 ~/.bash_profile、~/.bash_login 和 ~/.profile，并从第一个存在且可读的文件中读取并执行命令。

# mysql - 使用对游戏结果的查询结果优化更新玩家分数表

> ID：11203330
> 
> 赞同：1
> 
> 时间：2012-06-26T08:19:40.383
> 
> 标签：mysql, optimization

我有一张包含游戏结果的表格。我为每个玩家准备了另一张桌子，显示胜利、失败、平局。我想通过分析游戏表来更新玩家结果表。目前计算是在php中完成的，由于游戏数量导致我们的数据库延迟大约4秒，这通常会导致延迟。我正在考虑将操作移至存储过程以使其更快。任何人都可以推荐一种聪明的方法来计算和后续更新 player_chan_stats。我想完全在 mysql 查询中完成，因为这可能比 php 更快（假设）。

这是我们游戏结果表的摘录

```
 CREATE TABLE IF NOT EXISTS `temp_game_result` (
  `gam_key` bigint(20) NOT NULL COMMENT 'the game key',
  `gam_pla_1` bigint(20) NOT NULL COMMENT 'player 1',
  `gam_pla_2` bigint(20) NOT NULL COMMENT 'player2',
  `gam_to_play` tinyint(4) NOT NULL COMMENT 'who started',
  `gam_start` datetime NOT NULL,
  `gam_stop` datetime DEFAULT NULL,
  `gam_status` enum('playing','win','draw','lose','error') NOT NULL COMMENT 'result with reference to gam_pla_1',
  `mg_cleaned` tinyint(4) NOT NULL DEFAULT '0' COMMENT '0 if it has not passed thru cleanup, 1 otherwise',
  `chn_key` bigint(20) NOT NULL COMMENT 'the tournament the game was for',
  PRIMARY KEY (`gam_key`),
  KEY `gam_status` (`gam_status`),
  KEY `gam_start` (`gam_start`),
  KEY `gam_stop` (`gam_stop`),
  KEY `mg_cleaned` (`mg_cleaned`),
  KEY `gam_pla_1` (`gam_pla_1`),
  KEY `gam_pla_2` (`gam_pla_2`),
  KEY `chn_key` (`chn_key`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

INSERT INTO `temp_game_result` (`gam_key`, `gam_pla_1`, `gam_pla_2`, `gam_to_play`, `gam_start`, `gam_stop`, `gam_status`, `mg_cleaned`, `chn_key`) VALUES
(1, 1, 2, 2, '2011-05-02 20:12:13', '2011-05-02 20:42:46', 'lose', 1, 1),
(2, 1, 2, 1, '2011-05-02 20:43:00', '2011-05-02 21:55:19', 'error', 1, 1),
(3, 2, 1, 1, '2011-05-03 21:13:18', '2011-05-03 21:14:21', 'win', 1, 1); 
```

这是我们玩家结果表的摘录

```
CREATE TABLE IF NOT EXISTS `player_chan_stats` (
  `pcs_key` bigint(20) NOT NULL AUTO_INCREMENT,
  `pla_key` bigint(20) NOT NULL,
  `chn_key` bigint(20) NOT NULL,
  `pcs_seed` int(11) NOT NULL,
  `pcs_rank` int(11) NOT NULL,
  `pcs_games` int(11) NOT NULL DEFAULT '0',
  `pcs_wins` int(11) NOT NULL DEFAULT '0',
  `pcs_losses` int(11) NOT NULL DEFAULT '0',
  `pcs_draws` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`pcs_key`),
  UNIQUE KEY `pla_key_2` (`pla_key`,`chn_key`),
  KEY `pla_key` (`pla_key`),
  KEY `pcs_seed` (`pcs_seed`),
  KEY `pcs_rank` (`pcs_rank`),
  KEY `chn_key` (`chn_key`),
  KEY `pcs_wins` (`pcs_wins`),
  KEY `pcs_losses` (`pcs_losses`),
  KEY `pcs_draws` (`pcs_draws`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 COMMENT='Stats of player per channel' AUTO_INCREMENT=26354 ;

INSERT INTO `player_chan_stats` (`pcs_key`, `pla_key`, `chn_key`, `pcs_seed`, `pcs_rank`, `pcs_games`, `pcs_wins`, `pcs_losses`, `pcs_draws`) VALUES
(1, 1, 1, 1552, 1844, 325, 146, 176, 3),
(2, 2, 1, 1543, 2272, 93, 48, 43, 2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:32:19.987

触发器可能是您的解决方案[http://dev.mysql.com/doc/refman/5.0/en/triggers.html](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)

如果 gam_status 是 win update +1 to wins of the player，则对您有帮助的触发器将在 temp_game_result 中插入（或更新）...

将（或多或少）

```
CREATE TRIGGER update_wins AFTER UPDATE ON account
     FOR EACH ROW
     BEGIN
         IF NEW.gam_status = 'win' THEN
            update player_chan_stats set pcs_wins=pcs_wins+1 where psc_key=NEW.gam_pla_1;
            update player_chan_stats set pcs_losses=pcs_losses +1 where psc_key=NEW.gam_pla_2;
         ELSEIF NEW.gam_status = 'lose' 
                  [...]
         END IF;
     END; 
```

# android - 如何避免 Android Gallery 中的后端空间

> ID：11203333
> 
> 赞同：0
> 
> 时间：2012-06-26T08:20:04.657
> 
> 标签：android, gallery, android-gallery, spacing

问题是，我想避免通常画廊视图在画廊末尾显示的额外空间；如（图1）

![图 1 - 错误的方式](../Images/5ee3d28dd5dfb60104eb71b779f5ccab.png)

我需要像图 2 那样调整它

![图 2 - 正确方法](../Images/f382ad7461b60db90fc0d0cf575c6fc7.png)

[如果不使用此处描述的Horizo​​ntalListView](https://stackoverflow.com/questions/6606547/how-to-avoid-spacing-in-the-start-and-end-of-gallery)或扩展 Gallery ，如何实现这一点。

谢谢 ：-）

# c++ - 如何在 C 或 C++ 中获取 .bmp 文件中 RGB 的每个比率？

> ID：11203334
> 
> 赞同：0
> 
> 时间：2012-06-26T08:20:09.467
> 
> 标签：c++, rgb, bmp

如果我定义了这样的结构：

```
struct rgb
{
    double r;
    double g;
    double b;
}; 
```

每个元素都是一个百分比。如何从 C 或 C++ 中的 .bmp 文件中获取这些值？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:28:36.147

BMP 文件的[维基百科条目对](http://en.wikipedia.org/wiki/BMP_file_format)文件格式有很好的描述。在该页面的底部有一个指向此文件[bitmap.h](http://www.kalytta.com/bitmap.h)的链接，我以前用它来读取 BMP 文件。

基本上，一旦您读取了 BMP 文件，您只需将 RGBA 结构中的每个红色、绿色和蓝色值除以 255 即可获得百分比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:26:35.937

我不确定，但您可以参考以下链接以了解如何获取 rgb 值。

[RGB_Info](https://stackoverflow.com/questions/3291923/how-to-get-rgb-value-by-cimg)

如果他们提到了下面提到的示例，还请检查以下链接：-

[RGB_Info_MSDN_Link](http://social.msdn.microsoft.com/Forums/en/vcgeneral/thread/79d828ff-7479-40e9-b02e-025ca4155a97)

```
//Pass the handle to the window on which you may want to draw
struct vRGB
{
    vRGB():R(0), G(0), B(0){}
    vRGB(BYTE r, BYTE g, BYTE b):R(r), G(b), B(b){}
    BYTE R, G, B;
};

void GetBitmapPixel(HWND hwnd, std::vector<std::vector<vRGB>> &pixel){
BITMAP bi;

//Load Bitmap from resource file
HBITMAP hBmp = LoadBitmap(GetModuleHandle(0),MAKEINTRESOURCE(IDB_BITMAP1));

//Get the Height and Width
::GetObject(hBmp, sizeof(bi), &bi);
int Width = bi.bmWidth; int Height = bi.bmHeight;

//Allocate and Initialize enough memory for external (Y-dimension) array
pixel.resize(Height);

//Create a memory device context and place your bitmap
HDC hDC = GetDC(hwnd);
HDC hMemDC = ::CreateCompatibleDC(hDC);
SelectObject(hMemDC, hBmp);

DWORD pixelData = 0;

for (int y = 0; y < Height; ++y)
{
    //Reserve memory for each internel (X-dimension) array
    pixel[y].reserve(Width);

    for (int x = 0; x < Width; ++x)
    {
        //Add the RGB pixel information to array.
        pixelData = GetPixel(hMemDC, x, y);
        pixel[y].push_back(vRGB(GetRValue(pixelData), GetGValue(pixelData), GetBValue(pixelData)));
    }
}

//Cleanup device contexts
DeleteDC(hMemDC);
ReleaseDC(hwnd, hDC);
} 
```

# iphone - iOS 在通知到达时推送特定视图

> ID：11203336
> 
> 赞同：0
> 
> 时间：2012-06-26T08:20:10.760
> 
> 标签：iphone, ios, xcode, uilocalnotification, pushviewcontroller

```
- (void)application:(UIApplication *)app didReceiveLocalNotification:(UILocalNotification *)notif {
    // Handle the notificaton when the app is running

    NSLog(@"Recieved Notification %@",notif);

    NSLog(@"local notifications count = %d", [[[UIApplication sharedApplication] scheduledLocalNotifications] count]);

    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundFileURLRef;
    soundFileURLRef =CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"everything9", CFSTR ("mp3"), NULL);
    UInt32 soundID;
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);

    [[NSNotificationCenter defaultCenter] postNotificationName:@"RELOAD_DATA"object:nil];

} 
```

当应用程序到达时（例如，当用户在 iPhone 锁定时滑动应用程序图标时）我可以在这里实现什么来推送特定视图...我正在尝试`[self.navigationController pushViewController:CompletedViewController animated:YES];`并且我遇到了一些错误...是否有特定的我应该怎么做？也许在`didFinishLaunchingWithOptions`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T10:37:28.903

也许你应该称之为

~~[_window.rootViewController pushViewController:CompletedViewController 动画：YES];~~

上面的代码现在不起作用。您应该尝试改用它。

```
 //We take the rootViewController first which is expected to be a UINavigationController in your case
 UINavigationController *naviController = _window.rootViewController;  
 //We then call the push view controller code    
 [naviController pushViewController:CompletedViewController animated:YES]; 
```

如果您使用情节提要，这就是您从 AppDelegate 推送到当前导航控制器的方式。特别是如果您在故事板上的起点是导航控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:35:13.907

“[self.navigationController pushViewController:viewController Animation:YES];”

**这不能在 AppDelegate.m 中使用（即来自 didReceiveLocalNotification）。**

使用 didReceiveLocalNotification 中的“self.pushViewController”尝试一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T08:39:36.407

我认为[这](http://www.ralfebert.de/tutorials/iosdev/navigationcontroller/)将满足您的需求。它将教如何使用`UINavigationController`里面的`AppDelegate`. 如果您还有其他问题，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-03T06:26:50.910

```
if ([EntNotStrApp isEqualToString:@"1"])
{
    EntNotStrApp=@"0";

    UIWindow *window = [[[UIApplication sharedApplication] windows] objectAtIndex:0];
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Main" bundle: nil];

    UINavigationController *navController = (UINavigationController *)window.rootViewController;

    DumpFeed *dump = [storyboard instantiateViewControllerWithIdentifier:@"DumpFeed"];

    dump.isPushed=YES;

    dump.strUserId = appDelegate.strFriendid;

    [navController pushViewController:dump animated:YES];

}else
{
     [[iToast makeText:NotMess] show];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T08:53:34.747

在旧版本的 Xcode 中，我们在创建应用程序时有一个选项是基于导航的应用程序。但是在最新一代的 Xcode 中，我们可以创建基于单视图或基于窗口的应用程序。所以，如果你想使用导航控制器的属性，你需要为 UINavigationController 创建实例并且需要设置 rootViewController。代码如下，

appDelegate.h

```
@property (strong, nonatomic) UINavigationController *navigationController; 
```

appDelegate.m

```
@implementation AppDelegate
@synthesize navigationController = _navigationController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
    self.navigationController = [[UINavigationController alloc] initWithRootViewController:self.viewController];
    self.window.rootViewController = self.navigationController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

这样，您就可以在整个应用程序中使用导航属性。

我认为这可能对你有帮助。

# emacs - org-mode 错误地将数学方程中的 * 作为粗体标记

> ID：11203339
> 
> 赞同：1
> 
> 时间：2012-06-26T08:20:27.103
> 
> 标签：emacs, org-mode

我在 org-mode 中编写了以下行，其中包含两个方程。

```
$(Z^{*}_{m}, \cdot m)$  $(Z^{*}_{m}, \cdot m)$ 
```

但是 org-mode 并没有将它们识别为方程式。相反，它突出显示了两个`*`s 之间的部分，即使`}_{m}, \cdot m)$ $(Z^{`这部分加粗。这是 org-mode 的错误还是我自己的错误？

更新：如果包含“*”的大括号被删除（如下所示），org-mode 可以正确解析它。奇怪的...

```
$(Z^*_{m}, \cdot m)$  $(Z^*_{m}, \cdot m)$ 
```

# objective-c - 登录网络服务

> ID：11203342
> 
> 赞同：0
> 
> 时间：2012-06-26T08:20:30.027
> 
> 标签：objective-c, xcode, web-services, login, web

我目前被困在用户使用他的用户名和密码来查看他的数据的部分。我确实尝试了这个网站上的每一条信息，以找出如何让它在没有运气的情况下工作，如果有人能指出我正确的方向，我将不胜感激。

这是我的 .h 文件：

```
#import <UIKit/UIKit.h>

@interface ePaymentLoginViewController : UIViewController {
IBOutlet UITextField *__weak usernameField;
IBOutlet UITextField *__weak passwordField;
IBOutlet UIButton *__weak loginButton;
IBOutlet UIActivityIndicatorView *__weak loginIndicator;

}

@property (weak, nonatomic) UITextField *usernameField;

@property (weak, nonatomic) UITextField *passwordField;

@property (weak, nonatomic) UIButton *loginButton;

@property (weak, nonatomic) UIActivityIndicatorView *loginIndicator;

- (IBAction) login: (id) sender;

- (IBAction)backButton:(id)sender;

- (IBAction)cancelButton:(id)sender;

@end 
```

这是我的 .m 文件：

```
#import "ePaymentLoginViewController.h"

@interface ePaymentLoginViewController ()

@end

@implementation ePaymentLoginViewController

@synthesize usernameField;
@synthesize passwordField;
@synthesize loginButton;
@synthesize loginIndicator;

- (IBAction) login: (id) sender
{
NSString *post =[NSString stringWithFormat:@"%@/%@",usernameField.text, passwordField.text];

NSString *hostStr = @"http://ourserver/mobilepay/MobilePayService.svc/verify/%@/%@";
hostStr = [hostStr stringByAppendingString:post];

NSData *dataURL =  [NSData dataWithContentsOfURL: [ NSURL URLWithString: hostStr ]];    
NSString *serverOutput = [[NSString alloc] initWithData:dataURL encoding: NSASCIIStringEncoding];

if([serverOutput isEqualToString:@"text/json"]){

    UIAlertView *alertsuccess = [[UIAlertView alloc] initWithTitle:@"Congrats" message:@"You are authorized" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];

    [alertsuccess show];

} else {

    UIAlertView *alertsuccess = [[UIAlertView alloc] initWithTitle:@"Login Failed" message:@"Username or Password Incorrect" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];

    [alertsuccess show];

    loginIndicator.hidden = TRUE;
    loginButton.enabled = TRUE;

 [loginIndicator startAnimating];

}

}

- (void)didReceiveMemoryWarning {
// Releases the view if it doesn’t have a superview.
[super didReceiveMemoryWarning];

// Release any cached data, images, etc that aren’t in use.
}

- (void)viewDidUnload {
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

-(IBAction)backButton:(id)sender{

[self dismissViewControllerAnimated:YES completion:nil];

}
-(IBAction)cancelButton:(id)sender{

[self dismissViewControllerAnimated:YES completion:nil];

}

@end 
```

成功登录后，这是 url 的外观，它将发送 JSON 数据

```
http://ourserver/mobilepay/MobilePayService.svc/verify/user123/test123    

{
   "Table": [
     {
       "comp_filenum": 1006842,
      "comp_namar": "username123",
      "comp_civid": "100000"
    }
  ],
  "Table1": [
    {
      "tran_num": 30301,
      "inst_val": 1725,
      "balance": 3450,
      "late_amount": 3450,
      "late_inst_no": 2,
      "legal_status": 0,
      "baloon_balance": 0,
      "late_bal_no": 0,
      "remain_bal_no": 0,
      "clienttype": 2,
      "filenumber": 1006842,
      "customername": "username123",
      "civilid": "100000",
      "saleprice": 82800,
      "costprice": 66005,
      "last_receiptnumber": "e22512",
      "last_paydate": "2012-05-02T00:00:00",
      "last_payamount": 1725,
      "paidamount": 79350,
      "remaininginstallment": 16
    }, 
```

那么我在这一点上做错了什么，正确的方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:34:28.843

尝试以下行：

```
NSString *hostStr = [NSString stringWithFormat:@"http://ourserver/mobilepay/MobilePayService.svc/verify/%@/%@",usernameField.text, passwordField.text]; 
NSURL *aURL = [NSURL URLWithString: hostStr]; 
NSLog(@"%@",aURL); // check the log 

NSData *dataURL =  [NSData dataWithContentsOfURL:aURL]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:35:10.150

尝试显示**hostStr的值**

```
NSString *post =[NSString stringWithFormat:@"%@/%@",usernameField.text, passwordField.text];

NSString *hostStr = @"http://ourserver/mobilepay/MobilePayService.svc/verify/%@/%@";
hostStr = [hostStr stringByAppendingString:post]; 
```

它将显示： `http://ourserver/mobilepay/MobilePayService.svc/verify/%@/%@username/password`

试试这个：

```
NSString *hostStr = @"http://ourserver/mobilepay/MobilePayService.svc/verify/%@/%@";

NSString *url = [NSString  stringWithFormat:hostStr,usernameField.text, passwordField.text]; 
```

# php - 使用 ajax 和 jquery 发送数据 - textarea.live('blur')

> ID：11203344
> 
> 赞同：0
> 
> 时间：2012-06-26T08:20:39.703
> 
> 标签：php, javascript, jquery, ajax

我想创建脚本来编辑画廊中的照片。我有文本框来插入照片的标题，在其中插入标题并留下文本框后，它将在数据库中更新。它工作正常，当我只更改一张照片的标题时，但是当我更改更多标题然后我重新加载页面时，所有更改的照片都有相同的标题（最后插入）。有人可以帮我看看有什么问题吗？

我现在使用的代码是：

```
function UpdateTitle(idPhoto) {
    var id = idPhoto;
    $(document).ready(function(){
        $('textarea').live('blur',function () {
            var titleVal = $(this).val();        

            $.ajax({
                 type: "POST",
                 url: "changeTitle.php",
                 data: {title:titleVal , id:id},
                 success: function(msg) {
                     $('.'+id).html(msg);
                 }
           })

       });
    });     
} 
```

* * *

```
<textarea name='title' id='title' onchange='UpdateTitle($idPhoto);' rows='2' cols='22'>$title</textarea> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:30:17.863

更多的是一个好的编程技巧，而不是回答这个问题，因为它已经被回答了，但这会更干净：

```
$('textarea').on('blur',function () {
    var titleVal = $(this).val(), id = $(this).data('id');        

    $.ajax({
         type: "POST",
         url: "changeTitle.php",
         data: {title:titleVal , id:id},
         success: function(msg) {
             $('#'+id).html(msg);
         }
   })
}); 
```

使用此 HTML：

```
<textarea name='title' id='title' data-id='$idPhoto' rows='2' cols='22'>$title</textarea> 
```

会工作得更好，而且不会那么混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:23:43.277

使用`$('#'+id)`代替`$('.'+id)`

并使用[val](http://api.jquery.com/val/)而不是`html`填充文本区域。

所以基本上你应该有

```
$('#'+id).val(msg); 
```

（假设味精直接是预期的内容）

但是[live](http://api.jquery.com/live/)现在已经被弃用了。建议您使用[on](http://api.jquery.com/on/)，如下所示：

```
 $(document).on('blur', 'textarea',function () { // something more precise than "document" would be better 
```

# android - Android Building From Source 错误：无法加载 boot.img

> ID：11203346
> 
> 赞同：0
> 
> 时间：2012-06-26T08:20:52.617
> 
> 标签：android, android-source

我已按照[http://source.android.com/source/index.html](http://source.android.com/source/index.html)上发布的说明构建 Android 源代码环境。我正在使用 Ubuntu 10.04。这个过程没有问题。在下载了几个小时的源代码树（我已经尝试了几个，包括 2.1 和 4.0.1）并执行了 make 命令后，除了 boot.img 之外，所有图像文件都在目录“/WORKING_DIRECTORY/out/target/product/generic”中创建文件。我在互联网上读到可以使用“mkbootimg”创建自己的 boot.img 文件。但是，我想首先避免这种情况，并且仅将此选项用作最后的手段，因为我不熟悉该过程，因为它需要一些头文件，我不确定在哪里可以找到它们。我很好奇为什么没有创建 boot.img 文件。

是否有人面临同样的问题，或者可能已经解决了这个问题？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:45:59.547

您已经为模拟器构建了映像。因此，您不需要 boot.img 来运行模拟器，这就是它不在您的目录中的原因。您应该为特定设备进行构建。如果此设备是 Google 设备，您将没有问题 - 只需按照网页上的说明进行操作：http: [//source.android.com/source/building-devices.html](http://source.android.com/source/building-devices.html)

# objective-c - ASIHttpRequest 未正确处理响应状态 304

> ID：11203347
> 
> 赞同：0
> 
> 时间：2012-06-26T08:21:03.443
> 
> 标签：objective-c, asihttprequest

我有一个与返回 json 的 web 服务通信的应用程序。我使用 ASIHttpRequest 框架。我添加了以下代码片段来处理此 Web 服务的 HTTP 304 响应。

```
[[ASIDownloadCache sharedCache] setShouldRespectCacheControlHeaders:NO];
[request setDownloadCache:[ASIDownloadCache sharedCache]];
[request setCachePolicy:ASIAskServerIfModifiedCachePolicy];
[request setSecondsToCache:60 * 60 * 24 * 1];       // Cache for 1 day

[request startSynchronous]; 
```

304 响应的处理似乎工作正常，但 ASIHttpRequest 有时会从缓存中返回旧数据，而不是来自服务器的真实响应，尽管服务器返回的是 HTTP 200。

有没有人认识到这种行为并找到了解决方案？

谢谢你的帮助弗兰克

# javascript - 将隐藏行的值获取到javascript中

> ID：11203357
> 
> 赞同：0
> 
> 时间：2012-06-26T08:22:06.283
> 
> 标签：javascript, vb.net, arrays, client-side

我有一个网格列，其中 X 行是隐藏的。我想选择每列第 x 行的值，在客户端执行一些计算并将其显示在第 y 行（通过客户端代码）。

我无法从客户端的隐藏字段中选择值。

有没有办法可以使用javascript代码将这些值放入客户端数组中，并将其用于我的计算。此外，当页面回发时，数组应该更新为最新值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:25:45.517

```
var value= document.getElementById("hiddenId").value; 
```

hiddenId 是隐藏元素的 id。然后，您可以在客户端根据需要使用该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:05:30.630

var span = document.all("FpSpread1_colFooter"); span.firstChild.rows(2).style.display = 'none';

我在客户端隐藏了行，解决了从服务器端获取数据的问题。

# wpf - 如何使 2 个控件共享同一个列表框

> ID：11203358
> 
> 赞同：1
> 
> 时间：2012-06-26T08:22:11.633
> 
> 标签：wpf, user-controls, listbox, share, items

是否可以让一个列表框使用控件模板显示其项目以更改它们在列表框中的外观，并且还有一个画布以另一种外观显示 listboxItems？

为了更准确，

我有一个名为 InfoControl 的 UserControl 和另一个名为 DesignerControl 的具有相同 DataContext：一个 DesignerVM，其中包含 CurveVM 的 ObservableCollection。

在我的 InfoControl 中，我有一个列表框，其项目绑定到 OC 并使用模板显示为堆栈面板。

现在我想在 DesignerControl（画布）中显示我的项目，但要换个外观。

我是否必须创建另一个列表框并将其与第一个列表框同步，还是有办法实现我的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:32:26.363

两个控件不应共享一个列表框。相反，创建两个单独的列表框并将它们绑定到相同的 ItemsSource 或 DataContext。[使用 DataTemplateSelector](http://www.switchonthecode.com/tutorials/wpf-tutorial-how-to-use-a-datatemplateselector)来控制使用哪个模板。

编辑：欢迎来到 StackOverflow :)

# jquery - 如何验证是否已从外部 html 表单完成了可变数量的 Ajax 表单？

> ID：11203360
> 
> 赞同：-1
> 
> 时间：2012-06-26T08:22:18.093
> 
> 标签：jquery, html, ajax, validation

为清楚起见：同级 HTML 表单用于前进到下一页。单独的 Ajax 表单需要独立验证数据。外部（对于 ajax 表单）HTML 表单需要能够验证所有 ajax 表单是否已完成，然后才能进入下一个网页。

我在同一个网页上有不同数量的 Ajax 表单和一个 HTML 表单。HTML 表单是 ajax 表单的兄弟，因为在 html 表单中嵌套 ajax 表单不起作用。我能够在每个 ajax 表单和 HTML 表单中进行验证，但我要做的是验证所有这些 ajax 表单都是从外部 HTML 表单填写的。我怎么能用 JQuery 完成这个？我希望能够将所有表单（ajax 和 html）的整体验证与 HTML 表单的按钮联系起来。我会很感激你的建议和一些示例代码。另外，我会很感激可能需要的任何插件的链接。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:31:55.770

$('#field-name').val() 如果还不够好，还有一个 .find() 等。你也可以在每个元素和 $(this).val() 东西上设置一个事件处理程序。hth

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:43:20.540

不能自己写提交函数吗？

```
 $('#some_form').on('submit', function(event){
        event.preventDefault()

     //make an array of data in fields per form (each form needs an unique id)
     var data = $('#some_form').serializeArray();
     var other_data = $('#other_form').serializeArray();

      //you can now loop through each field
           $.each(data, function(id, post_data) {
                //should check your data here
                console.log (post_data.name);
                console.log (post_data.value);
         });

        //you can now loop through each field
           $.each(other_data, function(id, post_data) {
                //should check your data here
                console.log (post_data.name);
                console.log (post_data.value);
         });

      //everything right? ok do what you need to do. Show another page, save data 
    } 
```

# java - 使用 Jboss 7.1.1 在 http/s 上的 RMI

> ID：11203367
> 
> 赞同：1
> 
> 时间：2012-06-26T08:22:33.470
> 
> 标签：java, jboss, rmi, jboss7.x

我们正在从 JBoss 4 升级到 JBoss 7.1.1。我们现有的客户端通过 http/s 上的 RMI 与服务器通信。我们将很快使用 REST/SOAP 进行通信。但是目前有一种方法（解决方法）可以使用 JBoss 7.1.1 通过 http/s 调用 RMI 调用。

# python - 无法在 ubuntu 12.04 上使用 mkl 构建 scipy

> ID：11203370
> 
> 赞同：3
> 
> 时间：2012-06-26T08:22:48.370
> 
> 标签：python, scipy, intel-mkl

我正在尝试使用 Intel MKL 在 64 位 Ubuntu 12.04 上构建 numpy 和 scipy。

我已经安装了所有的先决条件。INTEL C++ 编译器和 Fortran 编译器版本都是 2011 sp1 10.319，MKL 是其中的版本。

我正在按照[INTEL 网站上](http://software.intel.com/en-us/articles/numpy-scipy-with-mkl/)的安装说明进行操作。

我已经成功构建并安装了 numpy。

在构建 scipy 时，我遇到了如下问题：

```
error: could note create '/usr/local/lib/python2.7/dist-packages/scipy': Permission denied 
```

当我尝试将 sudo 放在安装行的前面时，我得到了：

```
numpy.distutils.fcompiler.CompilerNotFound: intelem: f90 nor f77 
```

有人可以帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:35:57.177

您需要指定要对 numpy 和 scipy 使用 intel 编译*器*。（Numpy 不需要 fortran 编译器，但如果存在，它将使用它。）

尝试做：

```
python setup.py build --fcompiler=ifort
sudo python setup.py install 
```

（或类似的东西）对于 numpy 和 scipy。

# c# - 最佳实践 - 不同的程序模式/使用变量以编程方式决定表单的创建方式

> ID：11203372
> 
> 赞同：2
> 
> 时间：2012-06-26T08:22:52.803
> 
> 标签：c#, winforms, class

在我最近的一个项目中，我已经达到了一个很好的阶段，那里有相当多的工作，但没有什么是不能轻易改变/修改的。我现在被要求为我的程序添加..如何描述这个..不同的“模式”，例如；

*   地图视图模式，其中程序更多是图形显示，一切都基于绘制到地图/其他显示器上。
*   一种数据网格模式，其中程序更多地基于文本等。

我可以将这些信息存储在一个变量中，例如，即使是一个包含“map”或“datagrid”的字符串，程序也会根据这个或一个枚举创建 gui/它的进程，尽管这意味着我需要移动一些东西我想多了一点。

```
public string mode; 
// then use dropdowntools to set this to "map" or "datagrid"

public enum mode
{
   map,
   datagrid
};
// again use dropdowntools 
```

我是否最好将我的 UI 编码/表单的主要部分移动到 2 个单独的类，一个用于地图，一个用于数据网格，并根据用户的选择和不可避免的变量创建它们？

我已经在大多数用户可以更改这些选项的应用程序中看到了这一点，但从未见过编码它的最佳实践。

目前我已经考虑过这样安排；

```
 public void pollDevices()
    {

            if (mode == "Map")
            {
                timer = new System.Timers.Timer(500);

                 for (int i = 0; i <= mDevices.Count - 1; i++)
                 {
                     IDeviceInterface deviceToPoll = mDevices[i];
                     timer.Elapsed += delegate { deviceToPoll.connect(deviceToPoll, this, exit); };

                 }
            timer.Enabled = true;
            }

            else if (mode == "Datagrid")
            {

            }
        } 
```

但是我最好将不同模式的代码块移动到其他类中，从 mainGUI 调用这些，这样它更整洁更容易阅读吗？

```
 public void pollDevices()
{

        if (mode == "Map")
        {
            //call method in map class that does this stuff.

        }

        else if (mode == "Datagrid")
        {
             //call method in datagrid class that does this stuff
        }
    } 
```

如果有人对他们将如何做这类事情有任何意见，那将是一个很大的帮助。如果您需要我提供任何进一步的信息，请询问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:27:50.317

1.  将显示组件分解为单独的控件，一个用于地图，一个用于网格
2.  创建两个控件使用的通用接口和数据源
3.  创建一个公共类或一组类，为任一控件提供数据

# configuration - 如何指定哪个 FlaggedRevs 标记对应于页面的稳定版本

> ID：11203374
> 
> 赞同：1
> 
> 时间：2012-06-26T08:23:07.633
> 
> 标签：configuration, mediawiki

我正在尝试将[FlaggedRevs](http://www.mediawiki.org/wiki/Extension%3aFlaggedRevs)扩展配置为基于[MediaWiki](http://www.mediawiki.org/)（当前为 V1.19.1）的 Wiki。我已经仔细阅读了几次文档，但我无法完全实现我想要的。

我的目标是向用户显示稳定版本的页面。任何编辑都必须针对具有四个标志的单一规模进行审查。只有在页面被审核到标尺的顶部标志后，当前版本才能成为稳定版本。

到目前为止我所做的：我已经配置了我自己的规模，称为*内容*及其组件标志；我已经配置了用户、编辑和审阅者。关键尺度配置代码为：

```
$wgFlaggedRevsTags = array(
    'content' => array( 'levels' => 3, 'quality' => 2, 'pristine' => 3 ),
); 
```

我的结果：当我编辑页面时，这些编辑被视为待处理。用户看到页面的稳定版本。到目前为止一切都很好。但是，一旦我查看页面并将刻度从最低标志 (0) 升级到下一个标志 (1)，当前版本将变为稳定版本。这不是我想要的；升级到稳定应该需要顶部标志 (3)，而不是任何标志，而是最少 (0)。

如何配置 FlaggedRevs 使页面的*稳定*版本对应于*原始*标记？

编辑添加：我的经验和 jpatokal 的答案似乎不同。'levels' => 3 是否给我标志（0,1,2）或（0,1,2,3）。我得到后者，但是扩展是为我添加了 0=Unreviewed 标志还是我指定了它？*质量*和*原始*设置如何工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T01:56:31.120

我能够通过他们的 Mediawiki 讨论页面联系到其中一位扩展作者。原来扩展文档有点过时了。这是最新的：

> 标志确定修订是否经过检查/质量/原始。可以在 UnreviewedPages 和 PendingChanges（特殊页面）查询这些层，以使质量/原始版本保持最新。通过它们“异步”更新。那是更新的“检查”版本在被标记为“质量”或更好之前“上线”。这减少了人们进行编辑的平均时间，并简化了 UI。

所以我的观察符合当前预期的操作。可见（稳定）版本取决于*选中*的标记，*质量*和*原始*标记与此无关（但仍然具有提高质量的价值）。

所以我的问题的答案，也许是没有答案。也就是说，我所追求的不能直接实现，因为这不是扩展的意图。

# php - PHP DateTime 不允许使用日期格式

> ID：11203382
> 
> 赞同：0
> 
> 时间：2012-06-26T08:23:52.350
> 
> 标签：php, datetime, date, php-5.3

> **可能重复：**
> [strtotime 在 mm-dd-yyyy hh:mm 上失败](https://stackoverflow.com/questions/5133703/strtotime-failing-on-mm-dd-yyyy-hhmm)

我有一个如下所示的日期，但 DateTime 函数不允许它：

```
 $start = new DateTime('13/10/2012');
            echo $start->format("Y-m-d"); 
```

它允许所有其他方法，即使使用“2012 年 10 月 13 日”，但我无法更改它，因为这是我接收日期的格式。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:26:31.220

尝试 DateTime::createFromFormat 之类的

```
$start = DateTime::createFromFormat('d/m/Y', '13/10/2012'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:26:58.700

您是否尝试过 createFromFormat() ？

```
$start = DateTime::createFromFormat('d/m/Y', '13/10/2012'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T08:32:39.247

根据文档，它只接受特定格式的日期，其中之一是“美国月、日、年”，如果您提供 13 作为月份，显然会失败。

我总是尽量避免使用格式不明确的日期。在代码中主要使用“2012-10-13”，面向用户的日期使用“13 Oct, 2012”。两者都可以通过我有经验的任何日期格式 API 可靠地解析。

但是当被迫使用模棱两可的格式时，我手动解析它，而不是依赖 PHP 的内置 API，因为我完全理解它会做什么。例如：

```
list($day, $month, $year) = preg_split('/[^0-9]+/', '13/10/2012');
$start = new DateTime("$year-$month-$day"); 
```

# java - 重点组件参考

> ID：11203385
> 
> 赞同：2
> 
> 时间：2012-06-26T08:23:53.763
> 
> 标签：java, swing, focus, components, textfield

我正在开发一个简单的基于 java swing 的应用程序。如何获取和设置表单当前聚焦的文本字段/文本区域的文本？

我知道如何确定哪个组件具有焦点，但我不知道如何获取组件的选定文本。我使用 getFocusOwner()，但它返回一个组件，因此没有实现方法 getSelectedText()。我是否需要以某种方式进行类型转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T08:34:00.307

是的：

```
Component focusOwner = ...
if(focusOwner instanceof JTextComponent) { // a textfield or textarea is focused
    JTextComponent textComp = (JTextComponent) focusOwner;
    String s = textComp.getText();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T10:05:29.767

根据您的确切上下文，您可能会考虑使用自定义 TextAction：它的方法`getTextComponent(ActionEvent)`返回最新的焦点文本组件。一段代码：

```
 Action logSelected = new TextAction("log selected") {

        @Override
        public void actionPerformed(ActionEvent e) {
            JTextComponent text = getTextComponent(e);
            System.out.println("selected: " + text.getSelectedText());
        }

    };

    JComponent content = new JPanel();
    content.add(new JTextField("sometext", 20));
    content.add(new JTextField("other content", 20));
    content.add(new JCheckBox("just some focusable comp"));
    content.add(new JButton(logSelected)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T08:55:57.743

> 我使用 getFocusOwner()，但它返回一个组件，因此没有实现方法 getSelectedText()。我是否需要以某种方式进行类型转换？

一种方法是测试`instanceof`@user1235867 +1

另一个也是最有效的方法是帮助数组`J/Components`和简单地确定哪些`J/Component`有电流`KeyboardFocusManager#getFocusOwner()`在`Window`

`FocusOwner`注意在两个[顶级容器](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)之间切换是非常异步的，并且需要将事件包装到`invokeLater`

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
//http://www.coderanch.com/t/342205/GUI/java/Tab-order-swing-components
public class Testing {

    private static final long serialVersionUID = 1L;
    private Component[] focusList;
    private int focusNumber = 0;
    private JFrame frame;

    public Testing() {
        JTextField tf1 = new JTextField(5);
        JTextField tf2 = new JTextField(5);
        JTextField tf3 = new JTextField(5);
        JButton b1 = new JButton("B1");
        JButton b2 = new JButton("B2");
        tf2.setEnabled(false);
        focusList = new Component[]{tf1, b1, tf2, b2, tf3};
        JPanel panel = new JPanel(new GridLayout(5, 1));
        panel.add(tf1);
        panel.add(b1);
        panel.add(tf2);
        panel.add(b2);
        panel.add(tf3);
        frame = new JFrame();
        frame.setFocusTraversalPolicy(new MyFocusTraversalPolicy());
        frame.add(panel);
        frame.pack();
        frame.setLocation(150, 100);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
        KeyboardFocusManager.getCurrentKeyboardFocusManager().addKeyEventDispatcher(new KeyEventDispatcher() {

            public boolean dispatchKeyEvent(KeyEvent ke) {
                if (ke.getID() == KeyEvent.KEY_PRESSED) {
                    if (ke.getKeyCode() == KeyEvent.VK_TAB) {
                        Component comp = KeyboardFocusManager.getCurrentKeyboardFocusManager().getFocusOwner();
                        if (comp.isEnabled() == false) {
                            if (ke.isShiftDown()) {
                                KeyboardFocusManager.getCurrentKeyboardFocusManager().focusPreviousComponent();
                            } else {
                                KeyboardFocusManager.getCurrentKeyboardFocusManager().focusNextComponent();
                            }
                        }
                    }
                }
                return false;
            }
        });
    }

    private class MyFocusTraversalPolicy extends FocusTraversalPolicy {

        public Component getComponentAfter(Container focusCycleRoot, Component aComponent) {
            focusNumber = (focusNumber + 1) % focusList.length;
            return focusList[focusNumber];
        }

        public Component getComponentBefore(Container focusCycleRoot, Component aComponent) {
            focusNumber = (focusList.length + focusNumber - 1) % focusList.length;
            return focusList[focusNumber];
        }

        public Component getDefaultComponent(Container focusCycleRoot) {
            return focusList[0];
        }

        public Component getLastComponent(Container focusCycleRoot) {
            return focusList[focusList.length - 1];
        }

        public Component getFirstComponent(Container focusCycleRoot) {
            return focusList[0];
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                Testing testing = new Testing();
            }
        });
    }
} 
```

# jquery - 海边pharo smalltalk中的JQPlot错误

> ID：11203388
> 
> 赞同：2
> 
> 时间：2012-06-26T08:24:06.730
> 
> 标签：jquery, smalltalk, jqplot, pharo, seaside

我使用了以下代码，并且收到了 firefox firebug 错误。

代码：

```
(canvas anchor)
    id:(canvas nextId);
    onClick:  'alert("Thank you");';
    with:'help me'. 
```

我可以在 updateRoot 中成功加载 jqplot 库，如下所示：

```
updateRoot: t1

super updateRoot: t1.

t1 javascript resourceUrl:'gemstone/scripts/dist/jquery.min.js'.
t1 javascript resourceUrl:'gemstone/scripts/dist/jquery.jqplot.min.js'.
t1 javascript resourceUrl:'gemstone/scripts/dist/plugins/jqplot.blockRenderer.min.js'.
t1 javascript resourceUrl:'gemstone/scripts/dist/plugins/jqplot.enhancedLegendRenderer.min.js'.
t1 javascript resourceUrl:'gemstone/scripts/dist/plugins/jqplot.bubbleRenderer.min.js'.

t1 javascript resourceUrl:'gemstone/scripts/dist/plugins/jqplot.barRenderer.min.js'.
t1 javascript resourceUrl:'gemstone/scripts/dist/plugins/jqplot.pieRenderer.min.js'.
t1 javascript resourceUrl:'gemstone/scripts/dist/plugins/jqplot.categoryAxisRenderer.min.js'.
t1 javascript resourceUrl:'gemstone/scripts/dist/plugins/jqplot.pointLabels.min.js'.
t1 stylesheet resourceUrl:'gemstone/scripts/dist/jquery.jqplot.min.css'.**. 
```

我没有收到任何警报，并且在 firefox 的 firebug 中收到以下 javascript 错误。

**$("#id1").on 不是函数**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:04:45.970

去除 '**。' 在您的#updateRoot: 方法结束时，看看会发生什么。

检查页面正文中呈现的 html 以查找您的根组件。它应该是：

```
<a id="id1" onclick="alert("Thank you");">help me</a> 
```

你所展示的一切都不应该改变这一点。如果不是，那么您需要提供更多信息。

# php - 可选的基于 URL 的授权以避免登录 cookie

> ID：11203400
> 
> 赞同：1
> 
> 时间：2012-06-26T08:25:24.647
> 
> 标签：php, security, url, authentication, cookies

基本上，我想要的是使用登录 cookie 的替代方案，因为它们在技术上*可以*被猜到（有办法解决这个问题，但为什么不完全消除威胁）？

我在想的是一个系统，它有一个大的**不要在公共计算机上使用**警告，它允许用户不使用 cookie 自动登录，而是通过遵循**/login/email@example.com/myPassword 之**类的 URL 来自动登录。

我想问的是，我应该费心创建这样的系统还是会产生更多的安全漏洞？一方面，基于 cookie 的人*可以*简单地再次请求密码，例如，如果 IP 或用户代理不匹配，另一方面，我可以通过不必存储 cookie 名称来节省相当多的数据库空间.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T08:28:38.200

使用您的方法，用户的密码现在被公开：在他们的浏览器历史记录中，在您的服务器日志中，在任何网络嗅探工具中，等等。用户的密码不应出现在 URL 中。所以不，这不是一个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T08:44:22.933

我同意 Simeon 的观点，但只想指出一些额外的事情：

*   Cookie*可以*被劫持，你是对的，但是 SSL 之类的东西在合理的范围内可以很好地防止这种情况发生。
*   如果您使用 SSL，两种方法（您的方法和 cookie）都会被窃听者隐藏。
*   正如 Simeon 指出的那样，所请求的 URL 恰好存储在比 cookie 更多的地方，这使得意外妥协或故意妥协的可能性更大。
*   然而，更重要的是，cookie 只是随机生成的字符串，特定于您的站点和您的站点，而纯文本密码更有价值。您网站的明文密码可能与数百个其他网站使用的密码相同。换句话说，被泄露的 cookie 对一个站点的影响最大。另一方面，泄露的密码可能会产生更广泛的影响。
*   因为您注意到猜测，PHP 会话 ID 比典型的密码长得多。PHP 通常会生成 27 到 40 个字符之间的会话 ID，是平均密码大小的 4 倍以上。此外，密码通常可以通过（修改的）字典攻击之类的方法找到，所需时间只是对整个搜索空间进行暴力搜索所需时间的一小部分。换句话说，猜测明文密码比猜测 cookie 的内容*要*容易得多，如果您担心 cookie 的安全性，请增加长度并包含服务器端逻辑以仅接受来自同一 /24 中的客户端的 cookie地址空间。如果您仍然担心，请强制用户更频繁地重新进行身份验证。

# xml - 将xml转换为xls

> ID：11203403
> 
> 赞同：1
> 
> 时间：2012-06-26T08:25:40.073
> 
> 标签：xml, excel, vba, xls

我正在寻找有关如何实现将基于 Web 的 XML 数据放入电子表格的方法的想法。理想的解决方案是在每次打开电子表格时更新电子表格，几乎没有用户交互（即，我宁愿不必告诉人们运行宏）。

然而，我的第一个想法（可能是我最终会想到的）是一个 Perl 脚本，它下载 XML、解析它并输出一个电子表格——这不会更新电子表格，我必须生成记录某种类型的时间表（是的，我更喜欢完全自动化和编码自己的工作:)）。我（我想我）想要的是接受 URI 的 XML 的 odbc，这可能是理想的。这样，也许我可以将 XPath 映射到列，并且电子表格每次打开时都会自动更新。或者，也许 VBA 中有一种方法可以获取 URI 并解析 XML 并在打开工作簿时运行它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:28:48.887

xml文件在哪里？这个位置修复了吗？

如果是，您可以在 Excel 中创建到此 xml 文件的数据连接。

然后设置 xml 连接以在 excel 文件打开时刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:27:05.780

使用 DOM 解析 XML 文件，然后将相关值吐出到工作表上。这是一个简单的工作示例，可以帮助您入门：

```
Dim d As DOMDocument
Dim n As IXMLDOMNode
Dim s As String

Set d = New DOMDocument
d.async = False 
d.Load "http://www.democracynow.org/podcast-video.xml" ' or "C:\myfile.xml"

Set n = d.SelectSingleNode("//channel/description")
s = n.Text
Range("A1") = s 
```

此早期绑定需要如下引用集：工具 > 引用... > Microsoft XML

请注意，`d.async = False`在继续进行之前强制加载完成；这在加载远程文件时尤其重要。

你想要

> 每次打开电子表格时都会更新它，几乎没有用户交互（即，我宁愿不必告诉人们运行宏）。”

然后将宏放入`Workbook_Open`事件中！这就是它的用途。

# android - 上标影响行高

> ID：11203406
> 
> 赞同：1
> 
> 时间：2012-06-26T08:25:50.397
> 
> 标签：android, textview

当我显示`TextView`包含上标的文本时，我注意到写上标的行的行高更大。线高差非常明显。

无论我有上标还是下标，如何使所有行的行高相同？或者有没有办法设置上标不消耗太多的行高？

我的上标代码是：`<sup>123</sup>`. 然后我`Html.fromHtml`用来确保它将使用 Html 标签呈现。

我也尝试过使用：`<sup><small>123</small></sup>`。但它只是让文字变小了，文字并没有变成上标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T01:08:16.030

显然，`<small>`标签有效。我不确定为什么它在我第一次尝试时不起作用，但这一定是因为我必须先清理 Eclipse。无论如何，为了使效果更明显，使用`<small>`两次标签就可以了。因此它将是：

```
<small><small>superscript</small></small> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:27:24.610

对该链接使用 unicode "\u2122"

[http://www.fileformat.info/info/unicode/char/2122/index.htm](http://www.fileformat.info/info/unicode/char/2122/index.htm)

所以找到相同的 1 ,2 ,3

[http://www.fileformat.info/info/unicode/char/00b9/index.htm](http://www.fileformat.info/info/unicode/char/00b9/index.htm)

Unicode 字符“SUPERSCRIPT ONE”：\u00B9

[http://www.fileformat.info/info/unicode/char/search.htm?q=2&preview=entity](http://www.fileformat.info/info/unicode/char/search.htm?q=2&preview=entity)

# levenshtein-distance - *非常*有效地计算“levenshtein 社交网络”

> ID：11203411
> 
> 赞同：1
> 
> 时间：2012-06-26T08:26:32.053
> 
> 标签：levenshtein-distance, performance

我正在在线进行代码挑战，涉及找到通过 Levenshtein 距离相关的单词的“社交网络”。我的 Levenshtein 函数是正确的。我递归地添加到一个全局集，并且我使用元组映射到布尔值来缓存任何一对单词的 Levenshtein 距离是否为 1。代码应该在*5 秒内终止。* 我不确定这怎么可能。我确信有一些*aha*洞察力使这成为可能。任何人都可以立即看到这一点吗？

**问题陈述：** 如果两个单词的 Levenshtein 距离为 1，则它们是朋友。也就是说，您可以添加、删除或替换单词 X 中的一个字母来创建单词 Y。一个单词的社交网络由它的所有朋友组成，加上他们所有的朋友，以及他们所有朋友的朋友，等等。使用这个单词列表编写一个程序，告诉我们“hello”这个词的社交网络有多大

**我的伪代码：**

```
get_network(friend)
  if friend not in network
    add friend to network
    friends = []
    check friend against all words in network
      consult cache or calculate lev distance
      cache if necessary, append to friends if necessary
    for all friends
      get_network(friend) 
```

**换个说法：** “使效率大幅提升的基本洞察力是什么？”

# python - 绘制具有离散分量的分布的直方图

> ID：11203419
> 
> 赞同：1
> 
> 时间：2012-06-26T08:27:18.510
> 
> 标签：python, visualization, distribution, histogram, data-visualization

我正在使用`SimPy`. 关于系统的问题之一是访客的等待时间分布是什么。我所做的是绘制我在模拟过程中获得的样本的标准化直方图。

![只需使用直方图](../Images/c6d487ab2c8a384aa0eac8a5143b07ea.png)

这种分布不是纯粹连续的，我们有一个非零概率等待时间正好为零，因此在左端附近出现峰值。我希望它从图片中以某种方式**显而易见，****准确****击中的实际概率是多少`0`**。现在，峰值的高度不能正确显示，高度甚至高于 1（原因是许多点都在接近零的小段上）。

所以问题是这种分布的一般可视化技术，这些分布是连续和离散的混合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:57:50.140

（基于对 OP 的评论中的讨论）。

对于某个变量的分布，称为它`t`，作为离散和连续分量的混合，我将 pdf 编写为一组 delta-peaks 和一个连续部分的总和，

`p(t) = \sum_{a} p_a \delta(t-t_a) + f(t)`

其中`a`枚举离散值`t_a`，`p_a`是 的概率`t_a`，`f(t)`是分布的连续部分的 pdf，因此是属于`f(t)dt`的概率。`t``[t,t+dt)`

请注意，整个事情是标准化的，`\int p(t) =1`其中积分超过了 的适当范围`t`。

现在，为了可视化这一点，我将分离离散组件，并将它们绘制为离散值（作为窄箱或作为带有下降线的点等）。然后对于其余部分，我将使用直方图，您可以从上面的等式中知道正确的归一化：直方图下的面积总和应为`1-\sum_a p_a`.

我并没有声称这是*方式*，这正是我会做的。

# algorithm - 最近空闲单元格的二维网格数据结构

> ID：11203420
> 
> 赞同：3
> 
> 时间：2012-06-26T08:27:22.563
> 
> 标签：algorithm, data-structures

考虑一个 2000 x 2000 2D 布尔数组。100,000 个元素设置为 true，其余为 false。

给定一个单元格 (x1,y1)，我们需要找到最近的错误单元格 (x2,y2)（按曼哈顿距离：abs(x1-x2) + abs(y1-y2)）。

一种方法是：

```
for (int dist = 0; true; dist++)
    for ((x2,y2) in all cells dist away from (x1,y1))
        if (!array[x2,y2])
            return (x2,y2); 
```

在最坏的情况下，我们必须遍历 100,000 个单元格才能找到空闲的单元格。

有没有我们可以使用的数据结构而不是二维数组来让我们更快地执行这个搜索？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T08:39:35.517

如果数据是恒定的并且您有很多查询：
您可能想要使用[kd 树](http://en.wikipedia.org/wiki/K-d_tree)，并寻找最近的邻居。插入`(i,j)`每个元素，使得`arr[i][j] = false`. 标准 kd 树使用欧几里得距离，但我*认为*可以修改它以使用曼哈顿距离。

如果数据用于一个查询：
您至少需要`Omega(n*m)`操作来读取数据并将其插入到任何数据结构中 - 所以这样做没有意义 - 建议的解决方案只会胜过任何数据结构的构建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T13:04:48.020

您可能有兴趣查看[Region QuadTree](http://en.wikipedia.org/wiki/Quadtree)。这里最初将整个图像建模为根，因为图像包含全 0（假设）。然后在设置特定像素时，首先将图像分为 4 个象限，将不包括该像素的 3 个象限留作叶子。剩余的象限再次细分，以此类推。直到我们有 4 个点叶子，其中一个被设置。这种表示将有助于在搜索期间排除整个区域，并且搜索时间可以优化到 O(log n)

# objective-c - 我怎么知道我的视图窗口？

> ID：11203423
> 
> 赞同：0
> 
> 时间：2012-06-26T08:27:41.790
> 
> 标签：objective-c, xcode4.3

`ViewWillAppear`永远不会自动调用我必须手动调用它们。`ViewWillDisappear`虽然经常被称为。

我不知道在哪里调试这个。

我想问题是因为我在 4.1 上创建了人们必须`viewWillAppear`明确调用的应用程序。

我想，因为`viewWillAppear`将根据它与窗口的关系被调用，所以我可以检查我`viewController`的窗口是否有出口。

我该怎么做？

我怀疑问题出在我的代表身上：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [Crashlytics startWithAPIKey:@"a08863b514ef09558ba82fec070cc7468fdbeeae"];
    if(getenv("NSZombieEnabled") || getenv("NSAutoreleaseFreedObjectCheckEnabled"))
    {
        NSLog(@"NSZombieEnabled/NSAutoreleaseFreedObjectCheckEnabled enabled!");
    }

    [self.window addSubview:self.navController.view]; //This seem to be the problem. I should have specified the viewController and not the view

    [self.navController pushViewController:self.MainBadgerApplication animated:YES];
    //[cachedProperties singleton].lastAnchor =[cachedProperties currentLocation];
    [cachedProperties singleton].currentAnchor=[cachedProperties currentLocation];
    self.MainBadgerApplication.selectedIndex=0;
    [BNUtilitiesQuick tabBarController:self.MainBadgerApplication didSelectViewController:self.MainBadgerApplication.selectedViewController];
    [self.window makeKeyAndVisible];

    return YES;
} 
```

我怀疑 [self.window addSubview:self.navController.view]; 是问题。

我在 ios5 之前也听说过你必须显式调用 viewController。那么我是否应该为 ios5 和 ios4 创建一个不同的程序（不像为我的程序调用两次 viewController 有任何危险）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:11:55.960

> 我怀疑这`[self.window addSubview:self.navController.view];`是问题所在。

大概。你应该这样做：

```
self.window.rootViewController = self.navController; 
```

仅仅添加视图并不能将您的视图控制器正确地放入层次结构中。有关更多信息，请参阅 WWDC 2011 视图控制器包含视频。

# r - 从外部文件加载函数而没有副作用的最佳方法

> ID：11203429
> 
> 赞同：0
> 
> 时间：2012-06-26T08:27:55.250
> 
> 标签：r

我需要从外部文件加载自定义函数，但不会产生副作用。

目前，我正在这样做：

```
src <- "function(x,y) { return(x + y) }"
# parse the source
ptree <- parse(text=src)
# execute the evaluation using a data.frame as environment (like a sandbox)
f <- eval(ptree, envir=data.frame()) 
if(!is.function(f))
  stop('The given source does not contain a valid function')
f(1,1) 
```

这样，“恶意”代码不会影响当前环境，例如：

```
src <- "a <- 1" 
```

因此，函数`"a"`不会更改现有变量。`eval`

你觉得这有什么缺点吗？
有没有更好的方法？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:36:11.113

您可以将函数存储在自定义环境中。您可以通过指定环境来访问它。

```
llamegid <- new.env(parent = baseenv())
f <- function(x) x*x
src <- "function(x,y) { return(x + y) }"
assign("f", src, envir = llamegid)

f
function(x) x*x

get("f", envir = llamegid)
[1] "function(x,y) { return(x + y) }"

exists("f", envir = llamegid)
[1] TRUE 
```

# php - PHP：str_replace 仅替换第一次出现

> ID：11203434
> 
> 赞同：0
> 
> 时间：2012-06-26T08:28:19.347
> 
> 标签：php

对于这段代码，有谁知道为什么只`$unuseful`替换字符串中的第一个单词？

```
$unuseful = array(" is ", " the ", " for ", " and ", " with "," that ", " this "," or ", ",",";","/","?","!",".");
$aux = str_replace($unuseful, " " , $statement); 
```

"dude cost that free the dude the "-> dude cost free dude the

“dude cost that free the dude the the”-> dude cost free dude the the

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T08:32:39.390

那是因为您放置了前导和尾随空格。

它替换了“ the ”一次，因为“ the ”只有 3 个空格，而您正在寻找替换 4 个空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T08:33:43.030

```
 for($i=0;$i<count($unuseful);$i++)
    {$statement = str_replace($unuseful[$i], " " , $statement);}
$aux=$statement; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T09:06:37.387

```
<?php
$unuseful = array('/\s+is\s+/', '/\s+the\s+/', '/\s+for\s+/', '/\s+and\s+/', '/\s+with\s+/','/\s+that\s+/', '/\s+this\s+/','/\s+or\s+/', '/,/','/;/','/\//','/\?/','/\!/','/\./');

$challenge = 'dude cost that free the dude the the';
echo preg_replace($unuseful, ' ', $challenge)."\n";
?> 
```

给出：

花花公子免费花花公子

# ruby-on-rails - 如何实现无效字节序列（UTF-8 错误）的解决方案？

> ID：11203439
> 
> 赞同：0
> 
> 时间：2012-06-26T08:28:38.387
> 
> 标签：ruby-on-rails, utf-8

所以，这可能是一个非常非常愚蠢的问题。：/对不起，我是个新手。嗯，我收到很多“UTF-8 中的无效字节序列”类型错误。我在[这里](https://stackoverflow.com/questions/2982677/ruby-1-9-invalid-byte-sequence-in-utf-8)找到了一个解决方案（向下滚动查看+24），但我不知道如何实际实现它。我是否在受影响文件的开头键入它？我必须安装其他东西吗？另外，哪种解决方案更好，忽略一种还是双重编码？

还有奖金菜鸟问题！我现在摆弄的代码实际上是共享代码，这意味着它可能适用于许多其他没有 UTF-8 问题的人。知道为什么我的电脑似乎无法正常工作吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:03:23.990

就放

```
# encoding: utf-8 
```

在受影响文件的第一行。

# batch-file - 批处理文件：用户输入操作

> ID：11203445
> 
> 赞同：0
> 
> 时间：2012-06-26T08:28:59.107
> 
> 标签：batch-file

我有一批要求提供一些信息，所以我决定使用命令 set /p "var=" ，但我想先做一些操作或限制

1.  如果我想询问日期`set /p "DATE=insert date like this 2012/07/15="`，我只想在输入以这种方式 2012/07/15 的情况下接受答案

2.如果我想询问优惠券号码`set /p "NUMBER=insert number="`，我想做 IF THE CODE FIRST CHARACTER WAS Z THEN NUMBER=NUMBER IGNORING Z ，例如如果用户插入 z12345 我想要 NUMBER=12345 ，所以我做了这半个`IF '%var:~0,1%'=='z' then ???` 命令我不知道怎么做剩下的

我还注意到，如果我想做第 4 个字符，这是行不通的`IF '%var:~4,1%'=='g'`，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:38:29.617

您可以使用`findstr /R`正则表达式检查输入。

就像是

```
setlocal EnableDelayedExpansion
set "myDate="
set /p myDate=
if defined myDate (
  echo !myDate! | findstr /R "^[0123456789][0123456789][0123456789][0123456789]/[0123456789][0123456789]/[0123456789][0123456789]" >nul && Echo ok || echo fail
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T20:00:55.500

在[这篇文章](http://www.dostips.com/forum/viewtopic.php?f=3&t=3428)中，解释了一种编写您自己的“SET /P”例程的方法，因此您可以对其进行修改以满足您的特定需求。请注意，这不是读取字符串后的测试，而是在读取字符串时处于活动状态的交互式测试。您甚至可以限制用户必须完成输入的时间！

查找“3 **-GetKey.exe.hex** ”辅助程序，然后查找“Readline 子程序”。

我希望它有所帮助。

安东尼奥

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-16T21:31:17.327

您可以将 ReadFormattedLine 子例程用于所有类型的格式化输入。例如，下面的命令读取日期格式的一行；当用户键入字符时，斜线会自动插入：

```
call :ReadFormattedLine myDate="####/##/##" /M "insert date like this 2012/07/15: " 
```

下面的命令读取一个由 5 位数字组成的数字；该子例程不接受非数字字符：

```
call :ReadFormattedLine NUMBER="#####" /M "insert number: " 
```

这个子程序是用纯 Batch 编写的，因此它不需要任何额外的程序，并且它允许多种格式化输入操作，例如读取密码。您可以从[Read a line with specific format](http://www.dostips.com/forum/viewtopic.php?f=3&t=5775)下载它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T09:02:34.783

以下脚本显示了如何执行这两项任务：

```
 @setlocal enableextensions enabledelayedexpansion
    @echo off

    set /p "dt=Enter date as yyyy/mm/dd: "
    set rc=1
    echo x%dt%x| findstr /r "^x[0-9][0-9][0-9][0-9]/[0-9][0-9]/[0-9][0-9]x$" >nul: && set rc=0
    if %rc%==1 (
        echo Invalid date
        goto :endl
    )
    echo Date was %dt%

    set /p "num=Enter number as z99999 or 99999: "
    if %num:~0,1%==xz set num=!num:~1!
    echo Number was %num%

:endl
    endlocal 
```

第一部分展示了如何使用`findstr`它的正则表达式功能来设置一个`rc`返回代码变量，然后可以检查该变量。

第二部分展示了如何从字符串中删除第一个字符（如果是）`z`，尽管您可能会发现这`findstr`在那里也可能很有用，因此您可以检查整个字符串，例如：

```
 set /p "num=Enter number as z99999 or 99999: "
    if %num:~0,1%==xz set num=!num:~1!
    set rc=1
    echo x%num%x| findstr /r "^x[0-9][0-9][0-9][0-9][0-9]x$" >nul: && set rc=0
    if %rc%==1 (
        echo Invalid number
        goto :endl
    )
    echo Number was %num% 
```

# jquery - 加载后用Jquery动态点击

> ID：11203450
> 
> 赞同：0
> 
> 时间：2012-06-26T08:29:30.170
> 
> 标签：jquery, onload, jstree

首先我解释上下文然后是问题。我正在使用 jstree 将列表转换为树视图，儿子 onPostBack 我得到一个 HTML 列表，jsTree jQuery 代码将其转换为树视图。我选择使用复选框。

现在，当我收到回帖时，我丢失了所有选中的框（这是正常的），但我想用与前一个相同的值重新选中它们。我将它们保存到会话中，我真的不知道如何重新检查；我在 Google 上搜索并找到了很多解决方案，但使用 Json 数据绑定，我使用 Html 数据。所以我认为也许我可以在加载后动态单击需要检查的每个框。

我知道这可能不是正确的方法，但我真的想这样做是为了了解更多的 Jquery，这样我就可以找到更好的方法。

所以我写了一个回调会话的函数，并动态地点击每个带有正确 id 的复选框。当我将它放入按钮单击时，它起作用了，但我认为这是因为单击是在 onload 之后完成的。我想要的是在加载时使用该功能，但在 jstree Jquery 完成将列表转换为树视图之后。

我尝试了一些没有成功的方法（可能是因为我对 Jquery 太陌生并且对 javascript 过敏 :] 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:33:55.050

你应该使用[触发器](http://api.jquery.com/trigger/)。

```
$('input[type=checkbox]').trigger('click'); 
```

您可以`loaded`像这样在 jstree 的事件中执行此操作：

```
$('element').bind("loaded.jstree", function (event, data) {
    $('input[type=checkbox]').trigger('click');
}).jstree(...); 
```

# c# - 向量的奇怪算术错误

> ID：11203452
> 
> 赞同：1
> 
> 时间：2012-06-26T08:29:44.737
> 
> 标签：c#

我正在使用 DirectX 在屏幕上绘图。

我想在保持尺寸的同时制作图像，所以我为顶点分配了一些算术：

```
float boxPosFactorX = (869-3)+(100/100 * (1063 - 869));
float boxPosFactorY = (940-3)+(100/100 * (1038 - 940));

vertexes[0].Position = new Vector4((50 * boxScale) + boxPosFactorX, (50 * boxScale) +     boxPosFactorY, 0, 1.0f);

// other vertexes with same structure just different constants (e.g. 50 above is the constant values of that vertex. 
```

现在这是真正奇怪的部分，上面的代码按预期工作，但是一旦将比率“100/100”更改为低于“99/100”或更低的任何值，它的行为就好像代码是：

```
float boxPosFactorX = (869-3)
float boxPosFactorY = (940-3) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T08:30:45.600

`99/100`是`0`（并且`101/100`正是`1`）。那就是整数算术。如果要浮点运算，请使用`99F/100`.

# css - Django中没有CSS

> ID：11203454
> 
> 赞同：1
> 
> 时间：2012-06-26T08:29:56.283
> 
> 标签：css, django, apache

我使用 mod_wsgi 在 Apache 服务器上本地部署了 Django 应用程序。我看不到 CSS。以前的所有帖子都是关于管理员的，但我没有在我的应用程序中使用管理员。

Css 文件位于文件夹 C:/Pakel/Resman/main/static/ 所以我添加 Alias /static/ "C:/Pakel/Resman/main/static/" 到 httpd.conf

# php - 由 PHP pdfLib 创建的 PDF 无法在 Windows 7 或 XP 上打开

> ID：11203463
> 
> 赞同：2
> 
> 时间：2012-06-26T08:30:50.577
> 
> 标签：php, windows, pdf, acrobat, pdflib

我使用 PHP 的 pdflib 创建了一个 PDF。

PDF 包含图像和一些文本。pdf生成成功。我使用的是 Ubuntu 11.10 服务器，我的开发机器也运行相同。生成的 PDF 在我的开发机器或任何其他 Ubuntu 机器上成功打开。它还使用默认阅读器在 Windows 8 上打开。但它不能在 Window 7 或更低的窗口中使用 Adob​​e Reader 打开。

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T20:38:01.620

虽然这篇文章很旧，但也许我的回答可以提供帮助。

我也有一个看起来相似的问题。我的 PDF 生成正确，但我无法在我的网络浏览器中看到它。

不要直接在您的网络浏览器中显示您的 pdf，而是尝试将其另存为 pdf 在您的桌面上，然后在 Windows 中将其作为普通文件打开。

# c# - MessageBoxIcon.Exclamation 和 MessageBoxIcon.Warning 有什么区别？

> ID：11203468
> 
> 赞同：11
> 
> 时间：2012-06-26T08:31:27.577
> 
> 标签：c#, vb.net

MessageBoxIcon.Exclamation 和 MessageBoxIcon.Warning 有什么区别？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-26T08:36:04.880

没有区别，它们是相同数字 (48) 的别名。

```
public enum MessageBoxIcon
{
   None = 0,
   Error = 16,
   Hand = 16,
   Stop = 16,
   Question = 32,
   Exclamation = 48,
   Warning = 48,
   Asterisk = 64,
   Information = 64,
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:33:46.563

它们是同义词。一样。显示相同的图标。

事实上，它们都等于 48。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T08:34:21.970

一个简单的谷歌就足够了......

[消息框图标](http://msdn.microsoft.com/en-us/library/system.windows.forms.messageboxicon.aspx)

**感叹号**：`The message box contains a symbol consisting of an exclamation point in a triangle with a yellow background.`

**警告**：`The message box contains a symbol consisting of an exclamation point in a triangle with a yellow background.`

所以不多...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T08:34:22.007

[http://msdn.microsoft.com/en-us/library/system.windows.forms.messageboxicon.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.messageboxicon.aspx)

感叹号 消息框包含一个符号，该符号由黄色背景的三角形中的感叹号组成。

警告 消息框包含一个符号，该符号由黄色背景的三角形中的感叹号组成。

苏……什么都没有！

# android - android 用 AudioTrack 播放声音

> ID：11203474
> 
> 赞同：3
> 
> 时间：2012-06-26T08:32:07.907
> 
> 标签：android, audio-streaming, android-audiomanager

你好我有这个代码

```
AudioTrack audioTrack;

public void playAccordeon() {
    int minBufferSize = AudioTrack.getMinBufferSize(44100,
            AudioFormat.CHANNEL_CONFIGURATION_MONO,
            AudioFormat.ENCODING_PCM_16BIT);
    int bufferSize = 512;
    if (audioTrack == null) {
        audioTrack = new AudioTrack(AudioManager.STREAM_MUSIC, 44100,
                AudioFormat.CHANNEL_CONFIGURATION_MONO,
                AudioFormat.ENCODING_PCM_16BIT, minBufferSize,
                AudioTrack.MODE_STREAM);
        audioTrack.play();
    }

    int i = 0;
    byte[] s = new byte[bufferSize];
    try {
        InputStream fin = getResources().openRawResource(R.raw.accordeon);

        while ((i = fin.read(s)) != -1) {
            audioTrack.write(s, 0, i);
        }

        fin.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

它的作品，但有一个问题，当我第一次播放声音时，它可以正常播放，但第二次和第三次......播放的声音像“点击”（我尝试了很多声音文件）

该怎么办？谢谢

# java - 在 Linux 上将 Java 应用程序作为服务运行

> ID：11203483
> 
> 赞同：134
> 
> 时间：2012-06-26T08:32:33.970
> 
> 标签：java, linux, service

我编写了一个在标准虚拟托管 Linux 解决方案上运行的 Java 服务器应用程序。应用程序一直在运行，侦听套接字连接并为它们创建新的处理程序。它是客户端-服务器应用程序的服务器端实现。

我启动它的方式是将它包含在服务器的启动*rc.local*脚本中。但是，一旦启动，我不知道如何访问它来停止它以及是否要安装更新，所以我必须重新启动服务器才能重新启动应用程序。

在 Windows PC 上，对于这种类型的应用程序，我可能会创建一个 Windows 服务，然后我可以根据需要停止和启动它。在 Linux 机器上是否有类似的东西，所以如果我启动这个应用程序，我可以停止它并重新启动它，而无需完全重新启动服务器。

我的应用程序称为 WebServer.exe。它在服务器启动时通过将其包含在我的*rc.local*中来启动，如下所示：

```
java -jar /var/www/vhosts/myweb.com/phpserv/WebServer.jar & 
```

我在 Linux 上有点菜鸟，所以任何例子都会在任何帖子中得到赞赏。但是我确实有 SSH 和对盒子的完整 FTP 访问权限以安装任何更新以及对 Plesk 面板的访问权限。

* * *

## 回答 #1

> 赞同：243
> 
> 时间：2014-01-22T12:53:49.893

我在这里写了另一个简单的包装器：

```
#!/bin/sh
SERVICE_NAME=MyService
PATH_TO_JAR=/usr/local/MyProject/MyJar.jar
PID_PATH_NAME=/tmp/MyService-pid
case $1 in
    start)
        echo "Starting $SERVICE_NAME ..."
        if [ ! -f $PID_PATH_NAME ]; then
            nohup java -jar $PATH_TO_JAR /tmp 2>> /dev/null >> /dev/null &
            echo $! > $PID_PATH_NAME
            echo "$SERVICE_NAME started ..."
        else
            echo "$SERVICE_NAME is already running ..."
        fi
    ;;
    stop)
        if [ -f $PID_PATH_NAME ]; then
            PID=$(cat $PID_PATH_NAME);
            echo "$SERVICE_NAME stoping ..."
            kill $PID;
            echo "$SERVICE_NAME stopped ..."
            rm $PID_PATH_NAME
        else
            echo "$SERVICE_NAME is not running ..."
        fi
    ;;
    restart)
        if [ -f $PID_PATH_NAME ]; then
            PID=$(cat $PID_PATH_NAME);
            echo "$SERVICE_NAME stopping ...";
            kill $PID;
            echo "$SERVICE_NAME stopped ...";
            rm $PID_PATH_NAME
            echo "$SERVICE_NAME starting ..."
            nohup java -jar $PATH_TO_JAR /tmp 2>> /dev/null >> /dev/null &
            echo $! > $PID_PATH_NAME
            echo "$SERVICE_NAME started ..."
        else
            echo "$SERVICE_NAME is not running ..."
        fi
    ;;
esac 
```

您可以在此处遵循 init.d 的完整教程，并[在此处](http://www.jcgonzalez.com/linux-java-service-wrapper-example)遵循systemd (ubuntu 16+)的完整[教程](http://www.jcgonzalez.com/ubuntu-16-java-service-wrapper-example)

如果您需要输出日志，请替换`2`

```
nohup java -jar $PATH_TO_JAR /tmp 2>> /dev/null >> /dev/null & 
```

线为

```
nohup java -jar $PATH_TO_JAR >> myService.out 2>&1& 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-06-26T08:41:43.670

一个简单的解决方案是创建一个脚本 start.sh，它通过 nohup 运行 Java，然后将 PID 存储到一个文件中：

```
nohup java -jar myapplication.jar > log.txt 2> errors.txt < /dev/null &
PID=$!
echo $PID > pid.txt 
```

然后您的停止脚本 stop.sh 将从文件中读取 PID 并终止应用程序：

```
PID=$(cat pid.txt)
kill $PID 
```

当然，我遗漏了一些细节，比如检查进程是否存在，`pid.txt`如果完成则删除。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2012-06-26T08:41:25.907

Linux 服务初始化脚本存储在`/etc/init.d`. 您可以复制和自定义`/etc/init.d/skeleton`文件，然后调用

```
service [yourservice] start|stop|restart 
```

请参阅[http://www.ralfebert.de/blog/java/debian_daemon/](http://www.ralfebert.de/blog/java/debian_daemon/)。它适用于 Debian（因此，Ubuntu 也是如此），但适合更多发行版。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-06-13T21:21:16.970

也许不是最好的 dev-ops 解决方案，但对于局域网派对或类似的服务器的一般用途很有用。

用于`screen`运行您的服务器，然后在注销之前分离，这将保持进程运行，然后您可以随时重新连接。

**工作流程：**

启动屏幕：`screen`

启动你的服务器：`java -jar minecraft-server.jar`

按下分离: `Ctl-a`,`d`

重新连接：`screen -r`

更多信息：[https ://www.gnu.org/software/screen/manual/screen.html](https://www.gnu.org/software/screen/manual/screen.html)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-06-26T08:40:23.880

另一种也很流行的替代方法是[Java Service Wrapper](http://wrapper.tanukisoftware.org)。这在 OSS 社区中也很流行。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-08-17T20:07:46.913

将[Spring Boot 应用程序也称为服务](https://stackoverflow.com/questions/21503883/spring-boot-application-as-a-service/22121547#22121547 "Spring Boot 应用程序即服务")，我会选择该`systemd`版本，因为它是最简单、最不冗长并且最好地集成到现代发行版（甚至是不太现代的发行版，如 CentOS 7.x）中。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-11-22T23:38:39.527

最简单的方法是使用`supervisord`. 请在此处查看完整的详细信息：http: [//supervisord.org/](http://supervisord.org/)

更多信息：

[https://askubuntu.com/questions/779830/running-an-executable-jar-file-when-the-system-starts/852485#852485](https://askubuntu.com/questions/779830/running-an-executable-jar-file-when-the-system-starts/852485#852485)

[https://www.digitalocean.com/community/tutorials/how-to-install-and-manage-supervisor-on-ubuntu-and-debian-vps](https://www.digitalocean.com/community/tutorials/how-to-install-and-manage-supervisor-on-ubuntu-and-debian-vps)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-03-20T14:43:13.260

这是一个示例 shell 脚本（确保将 MATH 名称替换为应用程序的名称）：

```
#!/bin/bash

### BEGIN INIT INFO
# Provides:                 MATH
# Required-Start:           $java
# Required-Stop:            $java
# Short-Description:        Start and stop MATH service.
# Description:              -
# Date-Creation:            -
# Date-Last-Modification:   -
# Author:                   -
### END INIT INFO

# Variables
PGREP=/usr/bin/pgrep
JAVA=/usr/bin/java
ZERO=0

# Start the MATH
start() {
    echo "Starting MATH..."
    #Verify if the service is running
    $PGREP -f MATH > /dev/null
    VERIFIER=$?
    if [ $ZERO = $VERIFIER ]
    then
        echo "The service is already running"
    else
        #Run the jar file MATH service
        $JAVA -jar /opt/MATH/MATH.jar > /dev/null 2>&1 &
        #sleep time before the service verification
        sleep 10
        #Verify if the service is running
        $PGREP -f MATH  > /dev/null
        VERIFIER=$?
        if [ $ZERO = $VERIFIER ]
        then
            echo "Service was successfully started"
        else
            echo "Failed to start service"
        fi
    fi
    echo
}

# Stop the MATH
stop() {
    echo "Stopping MATH..."
    #Verify if the service is running
    $PGREP -f MATH > /dev/null
    VERIFIER=$?
    if [ $ZERO = $VERIFIER ]
    then
        #Kill the pid of java with the service name
        kill -9 $($PGREP -f MATH)
        #Sleep time before the service verification
        sleep 10
        #Verify if the service is running
        $PGREP -f MATH  > /dev/null
        VERIFIER=$?
        if [ $ZERO = $VERIFIER ]
        then
            echo "Failed to stop service"
        else
            echo "Service was successfully stopped"
        fi
    else
        echo "The service is already stopped"
    fi
    echo
}

# Verify the status of MATH
status() {
    echo "Checking status of MATH..."
    #Verify if the service is running
    $PGREP -f MATH > /dev/null
    VERIFIER=$?
    if [ $ZERO = $VERIFIER ]
    then
        echo "Service is running"
    else
        echo "Service is stopped"
    fi
    echo
}

# Main logic
case "$1" in
    start)
        start
        ;;
    stop)
        stop
        ;;
    status)
        status
        ;;
    restart|reload)
        stop
        start
        ;;
  *)
    echo $"Usage: $0 {start|stop|status|restart|reload}"
    exit 1
esac
exit 0 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-01-06T10:23:51.360

从[Spring Boot application as a Service](https://stackoverflow.com/questions/21503883/spring-boot-application-as-a-service "Spring Boot 应用程序即服务")，我可以推荐基于 Python 的`supervisord`应用程序。有关更多信息，请参阅该堆栈溢出问题。设置起来非常简单。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-03-16T03:40:43.740

其他答案可以很好地根据您的平台提供自定义脚本和设置。除此之外，还有我所知道的成熟的、特殊用途的程序：

*   TanukiSoftware 的 JSW
*   [YAJSW](http://yajsw.sourceforge.net/)是上述的开源克隆。它是用Java编写的，是一个根据配置管理子进程（你的代码）的nanny进程。适用于windows/linux。
*   [JSVC](https://commons.apache.org/proper/commons-daemon/jsvc.html)是一个原生应用程序。它也是一个保姆进程，但它通过 JNI 调用您的子应用程序，而不是作为子进程。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-06-26T09:35:55.400

您可以使用[Thrift 服务器](http://thrift.apache.org/)或[JMX](http://www.oracle.com/technetwork/java/javase/tech/javamanagement-140525.html)与您的 Java 服务进行通信。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-06-05T07:34:05.600

要将 Java 代码作为守护程序（服务）运行，您可以编写基于 JNI 的存根。

[http://jnicookbook.owsiak.org/recipe-no-022/](http://jnicookbook.owsiak.org/recipe-no-022/)

获取基于 JNI 的示例代码。在这种情况下，您将对作为 Java 启动的代码进行守护，并在 C 中执行主循环。但也可以将主、守护、服务循环放在 Java 中。

[https://github.com/mkowsiak/jnicookbook/tree/master/recipes/recipeNo029](https://github.com/mkowsiak/jnicookbook/tree/master/recipes/recipeNo029)

JNI 玩得开心！

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-01-29T15:54:00.350

*来自[Spring Boot 参考指南](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#deployment-initd-service)*

> ### 作为 init.d 服务安装（系统 V）
> 
> 只需将 jar 符号链接到以`init.d`支持标准`start`、`stop`和命令。假设您在 /var/myapp 中安装了 Spring Boot 应用程序，要将 Spring Boot 应用程序安装为 init.d 服务，只需创建一个符号链接：`restart``status`
> 
> ```
> $ sudo ln -s /var/myapp/myapp.jar /etc/init.d/myapp 
> ```
> 
> 安装后，您可以按常规方式启动和停止服务。例如，在基于 Debian 的系统上：
> 
> ```
> $ service myapp start 
> ```
> 
> [![提示](../Images/3362fb32d44b803c96ab6eb32a0776e1.png)](https://i.stack.imgur.com/ayuM4.png)如果您的应用程序无法启动，请检查写入的日志文件是否`/var/log/<appname>.log`有错误。

[继续阅读](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#deployment-initd-service-securing)以了解如何保护已部署的服务。

按照所写的操作后，我发现我的服务无法启动，并在日志中显示此错误消息：[start-stop-daemon: unrecognized option --no-close](https://stackoverflow.com/q/35843614/1429387)。我已经设法通过创建一个`/var/myapp/myapp.conf`包含以下内容的配置文件来修复它

```
USE_START_STOP_DAEMON=false 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-03-14T00:46:26.823

可以将战争作为 Linux 服务运行，并且您可能希望在打包之前强制输入 pom.xml 文件，因为某些发行版可能无法在自动模式下识别。为此，请在 spring-boot-maven-plugin 插件中添加以下属性。

```
 <embeddedLaunchScriptProperties>
                        <mode>service</mode>
                    </embeddedLaunchScriptProperties> 
```

接下来，使用以下命令设置您的 init.d：

```
ln -s myapp.war /etc/init.d/myapp 
```

你就可以跑了

```
service myapp start|stop|restart 
```

您可以在[Spring Boot 文档](https://docs.spring.io/spring-boot/docs/current/reference/html/deployment-install.html)中找到许多其他选项，包括 Windows 服务。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-11-19T07:55:10.033

我有 Netty java 应用程序，我想用 systemd 将它作为服务运行。不幸的是，无论我使用什么类型，应用程序都会停止。最后，我将 java start 包装在屏幕中。以下是配置文件：

服务

```
[Unit]
Description=Netty service
After=network.target
[Service]
User=user
Type=forking
WorkingDirectory=/home/user/app
ExecStart=/home/user/app/start.sh
TimeoutStopSec=10
Restart=on-failure
RestartSec=5
[Install]
WantedBy=multi-user.target 
```

开始

```
#!/bin/sh
/usr/bin/screen -L -dmS netty_app java -cp app.jar classPath 
```

从那时起，您可以使用`systemctl [start|stop|status] service`.

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2012-06-26T08:41:07.430

> 但是一旦开始，我不知道如何访问它来阻止它

您可以编写一个简单的停止脚本，对您的 java 进程进行 greps，提取 PID 并对其调用 kill。这不是花哨的，但它是直截了当的。像这样的东西可能会有所帮助：

```
#!/bin/bash
PID = ps ax | grep "name of your app" | cut -d ' ' -f 1
kill $PID 
```

# c++ - 转换和向上转换

> ID：11203488
> 
> 赞同：3
> 
> 时间：2012-06-26T08:32:40.277
> 
> 标签：c++, reference, implicit-conversion, upcasting

我想完全理解转换，即确保我知道函数调用何时会导致隐式转换，以及何时会导致编译错误。我了解到，当且仅当有一种单一的方法可以通过以下列表中的最多两个步骤（按优先级排序）转换变量时才可以进行转换：

```
1\. Exact match
2\. Promotion
3\. Conversion
4\. User defined conversion 
```

我理解的方式（你可以纠正我）是提升是将基元转换为更大的基元类型，例如 short 到 int、float 到 double 等；转换是非提升的基元之间的任何转换，例如 int 到 char 等；用户定义的转换是使用转换构造函数和转换运算符对类进行的转换。现在，我也知道继承意味着和 Is-A 关系，这意味着派生类是基类，因此将派生类发送到期望对基类的引用的函数应该可以工作。结合上面的两个概念，我们应该知道我写的下面的例子应该可以工作：

```
class C {};
class D: public C
{
public:
D(int x){}
};
void f(C& c) {}
f(3); 
```

因为 D 可以从 int 转换为，并且 D 是 C。但是这段代码没有被编译。这是为什么？矛盾如何化解？你能解释一下这件事吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T08:34:36.627

代码无法编译，因为转换会创建一个临时的，它不能绑定到非`const`引用。

如果您通过`const`引用（或按值，但我不建议您这样做）传递参数，它将起作用。

您还需要基类中的转换构造函数（如下所述）。

```
class C {
public:
   C(int x){}
};
class D: public C
{
public:
   D(int x):C(x){}
};

void f(const C& c) {}
f(3); 
```

这是因为**隐式转换最多只应用一次**。在您的情况下，有一个 from`int -> D`和一个 from的直接转换`D -> C`，因此 an`int`不能隐式转换为`C`.

# pagespeed - windows xp中Tomcat的mod_pagespeed？

> ID：11203492
> 
> 赞同：0
> 
> 时间：2012-06-26T08:32:47.923
> 
> 标签：pagespeed, mod-pagespeed

我可以在**windows xp**中为 Tomcat 7 使用 mod_pagespeed吗？如果可以，有人可以向我提供如何操作的详细信息吗？[我在 SO how to install mod_pagespeed on apache with windows, and from where to downlaod 上](https://stackoverflow.com/questions/4415984/how-to-install-mod-pagespeed-on-apache-with-windows-and-from-where-to-downlaod)发现了一个类似的问题，但那是一段时间以前的事了，当时事实证明，如果不更改源代码就不容易做到。所以我希望自那篇帖子以来有所改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:52:40.563

AFAIK，没有人将 mod_pagespeed 移植到 Tomcat。您必须编辑源代码才能执行此操作。或者，您可以在 Tomcat 前面放置一个 Apache HTTPD 服务器，但也不直接支持 windows 上的 mod_pagespeed。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T19:02:27.730

最接近的是[http://requestreduce.org/](http://requestreduce.org/)（免费）或 Aptimize（$$$），但两者都是 IIS 插件，因此您需要 Tomcat 前面的 IIS

# android-layout - 带有空格的文本的 TextView setEllipsize

> ID：11203496
> 
> 赞同：0
> 
> 时间：2012-06-26T08:33:02.663
> 
> 标签：android-layout

我正在使用具有以下布局设置的 TextView 元素

```
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:maxLines="1" android:lines="1" 
    android:ellipsize="end"
    android:text="AAAAAAAAA  AAAAAAAAAAA  AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/> 
```

正如您所看到的，我正在尝试在长文本的末尾添加三个点，但由于某种原因，它对包含空格的文本所做的只是剪切短语而不在末尾添加任何点。这个问题有什么解决方法吗？

谢谢。

UPD：它实际上删除了下一行空格之后的所有内容。这对于 android:maxLines="1" android:lines="1" 的事实很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:03:11.583

使用属性：`android:singleLine="true"`.

之后您可以删除您的`android:maxLines="1"`和`android:lines="1"`属性。

# jquery - jQuery 上的 getElementsByName

> ID：11203497
> 
> 赞同：1
> 
> 时间：2012-06-26T08:33:12.610
> 
> 标签：jquery, arrays, getelementsbyname

当我在 Javascript 中按名称选择元素时，我通常使用以下代码：

```
document.GetElementsByName('pencil')[0] 
```

这样，它通过名称“铅笔”获得第一个元素，如果我想获得第二个、第三个等，我只需将零更改为一个，依此类推。

现在我正在尝试通过使用这个选择器在 jQuery 中执行此操作：

```
$('div[name|="pencil"]') 
```

显然这将是一个名为“铅笔”的 div 数组。

我怎样才能让它引用一个特定的名称，就像我使用纯 javascript 所做的那样？谢谢你。

* * *

我正在尝试使用以下代码获取其 innerHTML：

```
alert( $('div[name|="ball"]').html() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T08:44:08.483

我会使用[.eq()](http://api.jquery.com/eq/)方法并这样做：

```
$('div[name="pencil"]').eq(0) 
```

我觉得它读起来容易一些。

我不确定你为什么要使用管道。这将选择名称=“铅笔”或名称=“铅笔-”的 div。

*未来的读者*：你不应该给`div`元素`name`属性。表单元素通常被赋予`name`s，并且它们应该是唯一的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T08:35:42.033

```
$('div[name|="pencil"]')[0] 
```

或者

```
$('div[name|="pencil"]:first') 
```

或者

```
$('div[name|="pencil"]:eq(0)') 
```

# python - 在 Google App Engine 上的数据存储区中更新大量实体

> ID：11203500
> 
> 赞同：7
> 
> 时间：2012-06-26T08:33:26.893
> 
> 标签：python, google-app-engine, datastore

我想对特定类型的所有实体执行一个小操作并将它们重写到数据存储区。我目前有 20,000 个此类实体，但想要一个可以扩展到任意数量的解决方案。

我有哪些选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T08:44:37.363

使用[映射器](http://code.google.com/p/appengine-mapreduce/wiki/GettingStartedInPython)- 这是 MapReduce 框架的一部分，但您只需要第一个组件 map，因为如果您只是改变数据存储实体，则不需要 shuffle/reduce 步骤。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T09:35:48.533

Daniel 是正确的，但如果您不想弄乱映射器，这需要您向应用程序添加另一个库，您可以使用[任务队列](https://developers.google.com/appengine/docs/python/taskqueue/)来完成，或者使用自 SDK 1.2.3 以来包含的[延迟库](https://developers.google.com/appengine/articles/deferred)更简单.

20.000 个实体并没有那么戏剧化，我认为这项任务不会定期执行（但即使这样做，也是可行的）。

这是一个使用[NDB](https://developers.google.com/appengine/docs/python/ndb/queries)和延迟库的示例（您可以使用 DB 轻松做到这一点，但如果您还没有使用它，请考虑切换到 NDB）。这是一种非常直接的方式，但不太关心超时：

```
def update_model(limit=1000):
  more_cursor = None
  more = True
  while more:
    model_dbs, more_cursor, more = Model.query().fetch_page(limit, start_cursor=more_cursor)
    for model_db in model_dbs:
      model_db.updated = True
    ndb.put_multi(model_dbs)
    logging.info('### %d entities were updated' % len(model_dbs))

class UpdateModelHandler(webapp2.RequestHandler):
  def get(self):
    deferred.defer(update_model, _queue='queue')
    self.response.headers['Content-Type'] = 'text/html'
    self.response.out.write('The task has been started!') 
```

# java - 使用 elem.absUrl 提取 URL

> ID：11203511
> 
> 赞同：1
> 
> 时间：2012-06-26T08:33:55.457
> 
> 标签：java, parsing, networking, jsoup, web-crawler

我有一个程序，我需要它做的就是从文本文件中提取 URL 并将它们保存到另一个文本文件中。代码调用 ExtractHTML2.getURL2(url,input); 这只是为给定链接提取 HTML 代码（可以正常工作且无需在此处包含其代码）。

**编辑：**代码解析页数，在每个页面上，它将其 html 代码保存在文本文件中，然后解析此文本文件，以提取 10 个链接。

现在，下面的代码假设解析提取的 HTML 代码并提取 URL。这对我不起作用。它不提取任何东西。

**代码编辑：**

```
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import java.io.*;

public class ExtractLinks2 {

    public static void getLinks2(String url, int pages) throws IOException {
    {   
        Document doc;
        Element link; 
        String elementLink=null; 
        int linkId=1; //represent the Id of the href tag inside the HTML code

        //The file that contains the extracted HTML code for the web page. 
        File input = new File
         ("extracted.txt");

        //To write the extracted links
        FileWriter fstream = new FileWriter
         ("links.txt");

        BufferedWriter out = new BufferedWriter(fstream);

        // Loop to traverse the pages
           for (int z=1; z<=pages; z++) 
           {
               /*get the HTML code for that page and save 
                 it in input (extracted.txt)*/
               ExtractHTML2.getURL2(url, input);

               //Using parse function from JSoup library
               doc = Jsoup.parse(input, "UTF-8");

               //Loop for 10 times to extract 10 links per page
               for(int e=1; e<=10; e++) 
               {
                 link = doc.getElementById("link-"+linkId); //the href tag Id
                 System.out.println("This is link no."+linkId);
                 elementLink=link.absUrl("href"); 
                  //write the extracted link to text file
                        out.write(elementLink);
                 out.write(","); //add a comma
                 linkId++; 
                } //end for loop

               linkId=1; //reset the linkId
            }//end for loop

        out.close();            
        } //end the getLinks function
    } //end IOExceptions

    } //end ExtractDNs class 
```

正如我所说，我的程序不会提取 URL。我对 Jsoup.parse 的语法有疑问。参考： http: [//jsoup.org/cookbook/input/load-document-from-file](http://jsoup.org/cookbook/input/load-document-from-file) 有可选的第三个参数，我忽略了它，因为我认为在我的情况下不需要它。我需要从文本文件而不是 html 页面中提取。

如果我输入以下内容，我的程序能够提取 href 标记文本：eURL =elem.text(); 但我不需要文本，我需要 URL 本身，例如：如果我有以下内容：

```
<a id="link-1" class="yschttl spt" href="/r/_ylt=A7x9QXi_UOlPrmgAYKpLBQx.;
_ylu=X3oDMTBzcG12Mm9lBHNlYwNzcgRwb3MDMTEEY29sbwNpcmQEdnRpZAM-/SIG=1329l4otf/
EXP=1340719423/**http%3a//www.which.co.uk/technology/computing/guides/how-to-buy
-the-best-laptop/" data-bk="5040.1">How to <b>buy</b> the best <b>laptop</b> 
- <b>Laptop</b> <wbr />reviews - Computing ...</a> 
```

如果有办法，我只需要“www.which.co.uk”甚至更好的“which.co.uk”。

为什么上面的程序没有提取 URL 以及如何纠正这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T02:40:27.880

问题出在这一行：

```
link = doc.getElementById("link-"+linkId); 
```

它应该是：

```
link = doc.getElementById("link-" + Integer.toString(linkId)); 
```

因为`linkId`是整数，并`getElementById`以字符串为参数。所以，我必须先将 Id 转换为 int，所以输入`getElementById`的形式变为：link-1、link-2 等。

# objective-c - Apple DVDPlayer 类似截图的行为（应用部分审查）

> ID：11203515
> 
> 赞同：1
> 
> 时间：2012-06-26T08:34:19.550
> 
> 标签：objective-c, macos, events, handler, screenshot

我正在尝试在使用常用快捷键（⌘ + ⇧ + 3、⌘ + ⇧ + 4 等）执行屏幕捕获时实现类似 Apple DVD 播放器的行为。

事情是虽然我遇到了事件处理并发的问题。通常我的应用程序在屏幕捕获实用程序之前处理组合键，但有时（30% 的情况）事件会在截屏后被捕获，因此隐藏我感兴趣的元素是没有意义的。

只是为了清楚起见-我不是在寻找万无一失的屏幕截图保护方法（我完全知道使用第三方应用程序、终端或外部摄像头实现屏幕截图的无数方法）。

**是否可以提高我的应用程序优先级（在启动时、运行时等），它会以任何方式帮助吗？**

我正在使用 Cocoa 事件处理程序、Objective-C 和 Mac OS X 范围从 10.4 到 10.8。

# java - spring中indexcontroller和viewresolver的区别

> ID：11203516
> 
> 赞同：1
> 
> 时间：2012-06-26T08:34:20.743
> 
> 标签：java, spring, spring-mvc

我是 Spring 框架的新手。我开始从[这个链接](http://netbeans.org/kb/68/web/quickstart-webapps-spring.html)学习一些基本的东西。我被这个话题困住了。黑白视图和索引有什么区别。在 tat doc 中不太清楚

```
<bean id="viewResolver"
      class="org.springframework.web.servlet.view.InternalResourceViewResolver"
      p:prefix="/WEB-INF/jsp/"
      p:suffix=".jsp" />

<bean name="indexController"
      class="org.springframework.web.servlet.mvc.ParameterizableViewController"
      p:viewName="index" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:24:32.083

您会看到 indexController 扩展了 PrameterizedViewController，这是一个始终返回命名视图的基本控制器。这个控制器的优点是客户端不会暴露于具体的视图技术，而只会暴露于控制器 url。

ViewResolver 是 InternalViewResolver 类型，这意味着它将解析诸如 jsp、servlet 等视图。

因此，您将使用 viewResolver 链接到另一个 jsp 或 servlet，并使用 indexController 以便您的请求由 @Controller 类处理。

# c# - 跨线程，访问不是为它创建的线程

> ID：11203523
> 
> 赞同：4
> 
> 时间：2012-06-26T08:34:40.560
> 
> 标签：c#, thread-safety, c#-2.0, multithreading

我正在努力学习交叉/多线程，但我对这个概念很困惑。我做了一个示例应用程序，假设通过线程在 label.text 上显示 i 。它不起作用，因为我试图访问一个不是创建它的线程，我研究了很多，但我仍然对调用、委托等感到困惑......这是我的代码：

```
private void s1_Click(object sender, EventArgs e)
{
    Thread Thread1 = new Thread(new ThreadStart(Start1));
    Thread1.Start();
}

public void Start1()
{
    for (int i = 0; i < 1000; i++)
    {
        displaytext("Working.........", i);
        Thread.Sleep(100);
    }
}

public void displaytext(string thetext, int number)
{
    t1.Text = thetext + " " + number;
} 
```

什么是让这个工作的好方法？任何帮助是极大的赞赏。我是出于对编程的热爱而学习这个的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T08:38:59.293

> 我正在尝试访问不是在其上创建的线程

实际错误是在创建它的线程以外的线程上访问 Windows 窗体控件。

修复：使用`Invoke`.

```
public void Start1()
{
    for (int i = 0; i < 1000; i++)
    {
        t1.Invoke(() => displaytext("Working.........", i));
        Thread.Sleep(100);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T08:44:10.510

您必须`Invoke`通过该功能`delegate`才能使其正常工作。

```
private void s1_Click(object sender, EventArgs e)  
{  
    Thread Thread1 = new Thread(new ThreadStart(Start1));  
    Thread1.Start();  
}  

public void Start1()  
{  
    for (int i = 0; i < 1000; i++)  
    {  
        if(t1.InvokeRequired)
        {
             t1.Invoke(new MethodInvoker( () => displaytext("Working.........", i)));  
        }
        else
        {
             displaytext("Working........", i);
        }
        Thread.sleep(100); 
    }  
}  

public void displaytext(string thetext, int number)  
{  
    t1.Text = thetext + " " + number;  
} 
```

# c# - 新创建的项目字段值

> ID：11203524
> 
> 赞同：0
> 
> 时间：2012-06-26T08:34:42.023
> 
> 标签：c#, .net, linq, entity-framework, linq-to-entities

创建新项目时；有什么方法可以访问所有设置的字段值。

由于我使用`Entity.GetModifiedMembers()`方法来访问在更新时更改以进行日志记录的字段的值，因此目的是在创建时通过实体获得等效的结果，例如方法`Entity.GetSetMembers()`。

所以总的来说，我只需要一个带有“成员名称”和“值”项的键值对。

**例子：**

```
public class SomethingEntity
{
    public int Id {get;set;}
    public string Name {get;set;}
    public DateTime Created {get;set;}
    public DateTime Modified {get;set;}
}

public Dictionary<string, string> GetFieldsAndValuesOfCreatedItem(object entity)
{
    //This is what I need, that can take all the objects from an entity and give
    //the property-value pairs for the object instance
    return RequieredMethod(entity);
}

public ExampleMethod()
{
    var newObject = new SomethingEntity() { Name = "SomeName", Created = DateTime.Now };
    Entity.insetOnSubmit(newObject);
    Entity.SubmitChanges();

    var resultList = GetFieldsAndValuesOfCreatedItem(newObject);

    foreach (var propertyKeyValue in resultList)
    {
        var propertyString = "Property Name: " + propertyKeyValue.Key;
        var valueString = "Value : " + propertyKeyValue.Value; 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:33:49.477

我发现，反射是我所能找到的答案：所以这是我想出的方法：

```
public static Dictionary<string, string> GetFieldsAndValuesOfCreatedItem(object item)
{
    var propertyInfoList = item.GetType().GetProperties(BindingFlags.DeclaredOnly |
                                                            BindingFlags.Public |
                                                            BindingFlags.Instance);

    var list = new Dictionary<string, string>();

    foreach (var propertyInfo in propertyInfoList)
    {
        var valueObject = propertyInfo.GetValue(item, null);
        var value = valueObject != null ? valueObject.ToString() : string.Empty;

        if (!string.IsNullOrEmpty(value))
        {
            list.Add(propertyInfo.Name, value);
        }
    }

    return list;
} 
```

# elasticsearch - 弹性搜索多面查询返回不正确的计数

> ID：11203525
> 
> 赞同：-2
> 
> 时间：2012-06-26T08:34:45.033
> 
> 标签：elasticsearch

我需要弹性搜索中的聚合/多面查询方面的帮助。我已经使用多面查询对结果进行分组，但我没有得到正确计数的分组结果。

请就如何从弹性搜索中获取分组结果提出建议。

```
{ 
   "query" : { 
     "query_string" : {"query" : "pared_cat_id:1"} } ,
     "facets" : { 
        "subcategory" : { 
           "terms" : { 
                        "field": "sub_cat_id", 
                         "size" : 50, 
                         "order" : "term", 
                         "all_terms" : true 
                     }
                 } 
           }, 
     "from" : 0, 
     "size": 50 
  } 
```

尝试为传递的父类别 ID 获取子类别 ID 的分组结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-06T10:30:55.377

“查询字符串”：{“查询”：“pared_cat_id：1”}}，

这适用于整体数据，而不是方面计数。

为此，您需要使用方面查询，您可以在其中指定您在主查询字符串中指定的相同内容。

因此，现在向您显示的方面计数基于未应用 "query_string" : {"query" : "pared_cat_id:1"} } 的结果，即。到整个数据。如果您在应用 "query_string" : {"query" : "pared_cat_id:1"} } 后想要构面计数，请在构面查询中提供它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:37:18.713

Elasticsearch 分面查询在准确性方面工作得非常好，至少我还没有看到任何问题。
只是几个问题：

1.  这个字符串或数字是什么字段，举个例子？
2.  您是否应用了任何自定义映射或者您使用了默认的“标准”分析器

请说明哪种不准确，`"aa" should have count 100 but its 50`或者是否有任何其他类型的不准确？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-24T07:04:02.627

如果分片数大于 1，则 Elasticsearch facets 查询返回不正确的计数，因此目前 Facets 已被弃用，并将在未来的版本中删除。鼓励您改为迁移到聚合。

我建议您看一下[这篇](https://www.found.no/foundation/elasticsearch-aggregations/)博文，其中 Alex Brasetvik 给出了很好的描述以及一些关于如何正确使用聚合功能的示例。

# razor - 如何在 umbraco 5 中使用户站点安全

> ID：11203526
> 
> 赞同：0
> 
> 时间：2012-06-26T08:34:45.597
> 
> 标签：razor, umbraco, umbraco5

我是 umbraco 的新手，我不想在 umbraco 5 中使用“LoginPartial.cshtml”并向“RegisterPartial.cshtml”添加新字段来使用户站点安全。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:16:24.527

如您所知，Umbraco V5 即将退役；您可以尝试 4.x 并使用用户控件执行上述操作。

# jquery - 使用 jQuery 在焦点上选择多行文本

> ID：11203528
> 
> 赞同：0
> 
> 时间：2012-06-26T08:35:01.057
> 
> 标签：jquery

此指令不适用于多行文本框：

```
$("input:text").mouseup(function () { $(this).select(); }); 
```

我必须在我的页面上简单地选择 texbox 内的所有文本。

有什么问题吗？

# doctrine-orm - Symfony2，Doctrine 数据持久性

> ID：11203536
> 
> 赞同：0
> 
> 时间：2012-06-26T08:35:23.773
> 
> 标签：doctrine-orm, relationship

我有 5 个有关系的表。

表用户和文章有关系：

在用户中：

```
/**
 * @ORM\OneToMany(targetEntity="Article", mappedBy="author")
 *      
 * @var ArrayCollection $articles
 */
protected $articles; 
```

在文章中：

```
/**
 * @ORM\ManyToOne(targetEntity="User", inversedBy="articles")
 *
 */
protected $author; 
```

我创建新文章：

```
$article = new Article();
$article->setTitle("title");
$article->setText("Text test");
$article->setType("image");
$em->persist($article);
$em->flush(); 
```

我将文章添加到用户：

```
$user->addarticle($article);
$em->persist($user);
$em->flush(); 
```

文章保存在数据库中，但在字段中没有任何数据：`author_id`。

当我将文章添加到用户以自动保存在表格文章中时如何建立关系`author_id`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:46:04.383

试试这个架构。在用户中：

```
/**
 * @ORM\OneToMany(targetEntity="Article", mappedBy="author")
 */
protected $articles; 
```

在文章中：

```
/**
 * @ORM\ManyToOne(targetEntity="User", inversedBy="articles")
 * @ORM\JoinColumn(name="author_id", referencedColumnName="id")
 */
protected $author; 
```

生成实体并更新架构。

```
$article = new Article();
$article->setTitle("title");
$article->setText("Text test");
$article->setType("image");
$article->setAuthor($user);
$em->persist($article);
$em->flush(); 
```

# templates - Team Foundation Server 签入注释模板

> ID：11203543
> 
> 赞同：1
> 
> 时间：2012-06-26T08:36:02.947
> 
> 标签：templates, tfs, comments, checkin

当开发人员将项目签入 TFS 时，我希望能够提供默认的评论模板。

例如

“描述：代码审查员：事件 #：”

我知道 Power Tools 有一项政策可以检查是否输入了任何文本，但我希望提供一些预定义的文本，以供开发人员填写其余部分。

我知道还有一个“签到说明”部分，但我试图避免这种情况，以尽可能简化流程。

评论也是用户在历史列表中看到的第一件事。这就是为什么我想在其他可用选项上使用评论框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:05:06.870

我不认为你可以按照你想要的方式做到这一点。签入策略仅在某种意义上是单向的，您只能读取数据并进行验证，但不能更新 Pending Changes 对话框中的内容。

您不应该直接与 Visual Studio 的待定更改对话框进行交互（无论如何，它已在 2012 版本中进行了改进），所以我认为没有解决方案。

# jsf-2 - 更改 p:dataTable 列中非标题单元格的背景颜色

> ID：11203544
> 
> 赞同：3
> 
> 时间：2012-06-26T08:36:03.020
> 
> 标签：jsf-2, primefaces

我想知道如何为数据表中的特定列设置背景颜色。我尝试了下面的 css 代码

```
.mystyle.ui-datatable .ui-datatable-data td, .mystyle.ui-datatable .ui-datatable-data td{
background-color:#B5D3A5;   
} 
```

但以上似乎改变了数据表中所有列的背景颜色。请让我知道如何更改数据表中特定列的背景颜色。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T08:51:37.480

您可以为此使用 的`style`和`styleClass`属性`p:column`：

```
<p:column style="background-color: red" ...> 
```

这将为表格单元格*和*标题单元格着色。

如果您不想更改标题单元格，您可以执行以下操作：

给列一个 styleClass 属性：

```
<p:column styleClass="foo" ...> 
```

然后将以下样式定义添加到您的 css/html 中：

```
td.foo {
    background-color: red;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:15:20.327

使用 p:dataTable 的 headerClass 属性作为标题样式，并使用内联样式作为您需要的列 style="text-align:center;background-color:red"

# asp.net-mvc - WebForms 应用程序中的 MVC 服务层验证

> ID：11203548
> 
> 赞同：2
> 
> 时间：2012-06-26T08:36:14.533
> 
> 标签：asp.net-mvc, validation, webforms, service-layer

我们在 MVC3 应用程序中有一个服务层，使用与此处描述的几乎相同的方法：[http ://www.asp.net/mvc/tutorials/older-versions/models-(data)/validating-with-a-service-图层-cs](http://www.asp.net/mvc/tutorials/older-versions/models-(data)/validating-with-a-service-layer-cs)

服务层不依赖于 MVC。

问题是我们有一个遗留的 webforms 应用程序也需要创建这些服务，我正在尝试提出如何实例化这些服务的最佳方法。让 Validate() 方法返回验证错误也很好。

单个服务在构造时需要一个 IValidationDictionary，在我们的 MVC 应用程序中我们只需使用 ModelStateWrapper(this.modelstate) 但是在 Webforms 中我们显然没有 ModelState 的概念（如在 Controller.ModelState 中）

***所以我的问题是如何构建一个可以在 MVC 和 Webforms 应用程序中使用的具有模型验证的服务层？***

在这个阶段，我们不考虑 IoC

**附带说明：**

ModelStateDictionary 是否遗漏了一些明显的东西？它在 MVC 命名空间内，但似乎不依赖于 MVC 框架？它不只是带有设置的字典的包装器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:11:13.647

这`ModelStateWrapper`对于 MVC 来说是一个很好的方法，但就像它是`IValidationDictionary`. 您可以执行 Web 表单实现，但使用验证摘要控件而不是模型状态。

抱歉，我目前没有任何代码可显示给您。

# postgresql - Java Swing 应用程序和 Postgres 数据库之间的密码加密

> ID：11203550
> 
> 赞同：0
> 
> 时间：2012-06-26T08:36:17.157
> 
> 标签：postgresql, encryption, passwords, crypt, jasypt

我正在构建一个具有 Java Swing 前端访问 postgres 数据库的系统。在本周发现[Jasypt](http://www.jasypt.org/)之前，我原本打算使用 Postgres 自己的加密机制。它工作得很好，但我现在也希望对网络上的密码进行加密，因此我求助于 Jasypt。

问题是，我需要一个固定密码才能输入到我的 Postgres 存储函数中。即如果输入密码是“aaa”，那么任何其他输入到 Postgres 存储函数中的密码（“aaa”除外）都将不匹配。

有没有办法让这两种加密机制协同工作，还是我必须转储 Postgres？

我的用户表：

```
CREATE TABLE "user"
(
  id serial NOT NULL,
  cryptpwd text NOT NULL,
  md5pwd text NOT NULL,
  ...
) 
```

加密密码：

```
cryptedPassword = crypt(passwordIn, gen_salt('md5'));
md5Password = md5(passwordIn);
INSERT INTO "user"(username, cryptpwd, md5pwd, ...)
      VALUES (usernameIn, cryptedPassword, md5Password, ...); 
```

解密密码：

```
select ..... from "user" .... where username = usernameIn and cryptpwd = crypt(passwordIn, cryptpwd); 
```

如果我不能让他们两个一起工作，那么我将不得不转储 Postgres 的机制，因为我需要通过网络进行加密。

此外，关于数据库连接字符串和数据库用户名和密码（不使用任何框架......希望使用 SSL 的普通旧 jdbc 连接 - 尚未实现），我认为我无法使用 Jasypt，因为我需要在数据库级别对其进行解密。对于这种情况，仅 SSL 就足够了吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:04:41.607

我认为在每条路径上单独使用 SSL 就足够了。在 LedgerSMB（尽管我们是基于 Perl 的）中，我们做一些不同的事情，并依赖于服务器之间以及服务器和客户端之间的 SSL 保护链接。不过，您的方法需要考虑一些事情。

实际上，我们通过 SSL 连接以可重用格式（纯文本）从客户端将 db 用户名和密码传递给中间件，然后使用另一个 SSL 连接登录 PostgreSQL 以通过这种方式进行身份验证。这很好用，但我们面临的问题领域与您将面临的问题领域有些相似。这些包括：

1.  记录。密码是否可能会被意外记录？这是 LedgerSMB 的一个问题，我们会采取我们可以采取的措施，但配置不当的服务器或被篡改的程序可能会记录用户名和密码。在我们的例子中，这主要来自中间件级别，但在你的例子中，查询日志也可以做到这一点，对吧？

2.  是否有可能无意中重复使用凭据？我们通过多种方式防止这种情况发生，但值得考虑。

总的来说，我们信任 SSL。除此之外，添加额外的加密并没有什么好处，而且密钥管理增加了很多复杂性，这不值得 IMO 的边际收益。

# magento - jcarousel 在谷歌浏览器中不起作用

> ID：11203552
> 
> 赞同：0
> 
> 时间：2012-06-26T08:36:24.973
> 
> 标签：magento, google-chrome, jcarousel

我的 Magento 网上商店中的 jcarousel 有问题。我为我的网上商店买了一个模板，这样我就不必自己做任何编程，因为我没有任何编程知识。

在我的网上商店的产品页面底部，显示了一个 jcarousel，其中显示了相关产品。此功能适用于除 Google Chrome 以外的所有浏览器。在这里看不到轮播中的任何产品。

另一个论坛上的某个人告诉我，这与轮播的宽度有关。这条特定的线路造成了麻烦：

由于我对编程一无所知，所以我不知道如何调整宽度。你们中的任何人都可以告诉我这是否确实是问题以及我该如何解决？

为了让您了解它的全部内容，这是一个不起作用的页面的网址：http: [//supplementendeal.nl/index.php/creatine/scitec-crea-bomb.html](http://supplementendeal.nl/index.php/creatine/scitec-crea-bomb.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:00:39.433

Well the problem is that a width of 179769313486231600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000px

被插入到无序列表的 li 标签中。如果没有实际的 javascript，很难说如何解决这个问题。

# android - 手机屏幕中的可见地理点

> ID：11203553
> 
> 赞同：2
> 
> 时间：2012-06-26T08:36:28.110
> 
> 标签：android, map, overlay, markers

我在地图上显示一些标记。我想找出手机屏幕中可见的地理点（标记）。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:02:43.283

可以在地理位置上添加标记。[看到这个](http://android-er.blogspot.in/2009/11/display-marker-on-mapview-using.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:10:38.810

如果您想在触摸某些区域后在地图上放置标记，请检查此：

[在用户触摸 MapView Android 上返回 GeoPoint](https://stackoverflow.com/questions/7975862/returning-a-geopoint-on-user-touch-mapview-android/7976012#7976012)

# language-agnostic - 与领域知识匹配的项目

> ID：11203556
> 
> 赞同：3
> 
> 时间：2012-06-26T08:36:34.080
> 
> 标签：language-agnostic, nlp, string-matching

我有各种产品项目，我需要确定它们是否相同。一个简单的例子：

`Microsoft RS400 mouse with middle button`应该匹配`Microsoft Red Style 400 three buttoned mouse`但不匹配`Microsoft Red Style 500 mouse`

除了名称之外，我没有其他可以匹配的好东西，仅仅根据匹配词的比例来做还不够好（错误率太高了）

我确实知道域，所以我可以（例如）手写一个三键鼠标可能与带有中键的鼠标相同的事实。我也知道制造商（或者可以很好地猜测他们）。

到目前为止我唯一的想法是通过尝试使用手写规则来减小字符串的大小然后检查匹配的单词来匹配它们，但我想知道是否有人有任何想法进行这种匹配的最佳方法是使用更好的准确性和精确度（或从哪里开始寻找）以及是否有人知道在该领域所做的任何工作？（论文，例子等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:51:35.040

> “我确实知道域……”

*你对域名到底*了解多少？如果您了解有关该域的所有信息，那么最好为您的所有制造商产品建立索引（基本上是制造商网页上的产品描述）。然后，不要尝试将您的描述相互匹配，而是将它们与您的产品索引匹配。

这种方法的优点：

*   大概在产品描述中使用的所有词都在促销文献中的某个地方使用过
*   如果在构建索引时您能够对某些信息（例如产品代码）进行加权，那么您可能会取得更大的成功

缺点：

*   创建索引可能需要很长时间（尤其是手动完成时）

* * *

如果您对自己的域一无所知，那么您可能会考虑对非常常见的单词进行降级（您可以从互联网上获取常用单词列表），以及对字典中没有的数字和单词进行排序（您可以从互联网上获取单词列表/大多数 linux/unix 发行版都附带用于拼写检查）。

* * *

我不知道您对搜索了解多少，但过去我发现 W. Bruce Croft、Donald Metzler、Trevor Strohman 所著的“搜索引擎：实践中的信息检索”一书很有用。出版商网站上有一些示例章节会告诉您这本书是否适合您：[pearsonhighered.com](http://www.pearsonhighered.com/croft1epreview/index.html)

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:57:11.077

只需标记化（您也应该在该步骤中将数字与字母分开，所以不仅仅是空格标记器），词干，过滤停用词和无趣的词，如鼠标。也许你应该有一个包含单词生产者的列表，并将所有非生产者和数字缩短到他们的第一个字母。（如果你这样做，你必须在标记器中分隔大写字母）

```
Microsoft RS400 mouse with middle button -> Microsoft R S 400
Microsoft Red Style 400 three buttoned mouse -> Microsoft R S 400
Microsoft Red Style 500 mouse -> Microsoft R S 500 
```

如果你想要一个更好的解决方案 vsm （向量空间模型）来自抄袭检测会很好。（每个单词都有一个权重，根据它们的判别值，这些权重被投影到一个多维空间中。之后你只需测量两个文本之间的角度）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T15:21:48.490

我会建议一些更普遍适用的东西。据我了解，您需要一些 nlp 处理来处理您识别为同义词的事物。我认为这是一个非常简单的实现。

如果我是你，我会创建一个关键字对象，其中包含同义词列表作为参数，然后编写一个脚本，该脚本将抓取你拥有的任何文本以获取仅偶尔出现的单词（有一些上限频率，关键字实际上被认为适用)，然后添加关键字列表作为包含其同义词的每个关键字的参数。如果您愿意更进一步，我会在同义词列表上设置权重，以显示它们的相似程度。

对于这种 nlp 问题，您获得 100% 准确率的机会是 0，但您很可能会超过 90%，我建议添加一个元素，您可以通过该元素以自动方式调整权重。我必须在这里相当模糊，但在我的上一份工作中，我的任务是类似的问题，并且能够在 90 年代获得准确度。我的实现也可能比您需要的更复杂，但即使是简单的实现也应该会给您带来不错的回报，但是如果您不处理相当大的数据集（〜数百+），则可能不值得编写脚本。

快速示例，在您的示例中，可以非常准确地提取差异，只是说“中间”和“三”是同义词。如果需要，您可以变得更复杂，但这会匹配很多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T11:49:17.983

除了手写规则之外，您还可以尝试使用带有特征提取的监督学习。

让特征成为描述中的词，而不是将描述视为特征向量。在教授算法时，让它显示两个看起来相似的向量，如果是相同的项目，让算法改进这些词的权重。

例如，每对单词的权重可能比简单的比率更大，就像您所做的那样。

```
[3-button]    [middle]
[wheel]       [button]
[mouse]       [mouse] 
```

通过您的算法，它将给出 1/3 的相似度比率。当您将其设置为“相同项目”时，算法应该为这对单词添加更多价值，当它下次到达它们时。

# php - php 5.4 不支持检索windows进程

> ID：11203561
> 
> 赞同：0
> 
> 时间：2012-06-26T08:36:47.017
> 
> 标签：php, pear

我是 PHP 新手，最近我安装了 PHP 5.4。但是，我发现 php 有很多困难。我找不到与 php 5.4 兼容的检索 Windows 进程的正确 dll。我仍然在努力是否有其他方法可以检索 Windows 进程而不是 php_win32ps.dll。我从 pecl 网站下载 php_win32ps.dll，但它们都不兼容。

任何建议。

谢谢你。

问候一郎

# c++ - 参考的使用

> ID：11203565
> 
> 赞同：0
> 
> 时间：2012-06-26T08:37:04.267
> 
> 标签：c++

```
void fn(string &s)
{
    //....
}

//use the function    
fn("helloworld"); 
```

首先，使用 const char 字符串启动非常量字符串是错误的。

在参数中添加 const 后，它会编译。

但是在堆栈上引用临时对象字符串（“helloworld”）是否正确？

确定调用了 string("helloworld") 吗？

--

编辑。

如果创建了临时字符串，编译器如何从std::string(const char*)的构造函数判断对象string("helloworld")是const？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T08:39:55.550

> 但是在堆栈上引用临时对象字符串（“helloworld”）是否正确？

是的，只要引用是`const`，临时的生命周期就会延长。

> 确定调用了 string("helloworld") 吗？

是的，使用转换构造函数创建一个临时的`std::string(const char*)`。但是请注意，编译器*可以*优化此步骤。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T08:56:51.130

> 但是在堆栈上引用临时对象字符串（“helloworld”）是否正确？

在这种情况下，可能，但您必须注意对象的生命周期。临时将在完整表达式结束时不复存在；如果`fn`保存一个指针或对它的引用，你就有麻烦了。这通常不是自由功能的问题，比如你的`fn`（但它可以）；如果临时变量是`new`表达式中构造函数的参数，则可能会出现问题（但该类的作者应记录超出构造函数调用的任何生命周期要求）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T08:42:26.340

> 但是在堆栈上引用临时对象字符串（“helloworld”）是否正确？

是的，为什么不？

> 确定调用了 string("helloworld") 吗？

是的，只要`string`使用 const char* 参数提供一个隐式构造函数，这就是保证（`std::string`这样做）。

# linux - 通过 FTP 将 SVN 存储库导出到远程服务器

> ID：11203566
> 
> 赞同：0
> 
> 时间：2012-06-26T08:37:12.317
> 
> 标签：linux, svn, command-line, ftp

我正在使用以下命令将我的存储库导出到本地路径：

```
svn export --force svn://localhost/repo_name /share/Web/projects/project_name 
```

是否有任何非常简单的方法（这里是 Linux 新手）通过 FTP 协议执行相同操作，将存储库导出到远程服务器？

AFAIK 的最后一个参数`svn export`必须是本地路径，并且 AFAIK 此命令不支持以 URL 形式提供路径，例如：

```
ftp://user:pass@server:path/ 
```

所以，我认为应该在这里雇用一些脚本来完成这项工作。

我问过一些人，并被告知最简单的方法是将存储库导出到本地路径，将其传输到 FTP 服务器，然后清除本地路径。不幸的是，我在第一步之后失败了（提取到本地路径！:) 所以，支持问题是，是否可以即时完成，或者真的必须分成两个步骤：导出 + ftp 传输？

有人还建议我在远程服务器上设置本地 SVN 客户端，并从我的存储库中进行简单的签出/更新。但只有在其他一切都失败的情况下，这才是可能的解决方案。因为我想提取纯存储库结构，没有 SVN 文件，我会得到，当这样走时。

顺便说一句：我使用的是 QNAP TS-210，一个简单的 NAS 设备，板载的 Linux 非常有限。因此，我无法使用许多与 GUI 一样好的命令行命令。

**编辑**：这是我的“链”中的第二个问题。即使，如果你帮助我在这里取得成功，如果没有你的帮助，我将无法自动化这项工作（正如我愿意的那样）“ [SVN：强制 svn 守护进程在不同的用户下运行](https://stackoverflow.com/questions/11188825/svn-force-svn-daemon-to-run-under-different-user)”。请问有人也可以看看那里吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T09:12:17.487

好吧，如果您使用的是 Linux，您应该能够挂载***ftpfs***。我相信 Linux 内核中有一个模块可以解决这个问题。那么我认为你还需要 FUSE。

基本上，如果您可以挂载***ftpfs***，则可以将 svn export 直接写入挂载的文件夹。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T09:12:43.227

不确定 FTP，但 SSH 会容易得多，并且应该有更好的压缩。通过 SSH 发送 repo 的示例可能如下所示：

> svnadmin dump /path/to/repository |ssh -C username@servername 'svnadmin -q load /path/to/repository/on/server'

URL 我发现该信息在[Martin Ankerl 的网站上](http://martin.ankerl.com/2006/01/24/svnadmin-dump-and-load-over-ssh/)

[更新]

根据@trejder 对该问题的评论，要通过 ssh 进行导出，我的建议如下：

svn 导出到本地文件夹，然后使用以下命令：

> cd && tar czv ​​src | ssh example.com 'tar xz'

其中 src 是您导出到的文件夹，example.com 是服务器。

这将获取源文件夹中的文件，将它们 tar 和 gzip 并通过 ssh 发送，然后在 ssh 上，将文件直接解压缩到机器......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-05T11:32:19.657

我前段时间写了这个——也许在这里会有一些用处：[exup](https://github.com/janeklb/exup)

# ios - 在 NSMutableArray 中删除

> ID：11203568
> 
> 赞同：1
> 
> 时间：2012-06-26T08:37:17.963
> 
> 标签：ios, iphone, xcode, nsmutablearray

我在这里有一个数组，例如我每列有 4 个图像，每个都响应其默认索引： ![在此处输入图像描述](../Images/64f7f1c1f9d139ba94f9c77971e5ba7c.png)

当删除图像时，例如索引 1。如下图所示：

![在此处输入图像描述](../Images/33d33943581f6b7f493be17cc0a5ffcf.png)

索引变为 0,1,2 ：

![在此处输入图像描述](../Images/9315dd20b7faafa1aeb43544208c9376.png)

我想要的是 0,2,3 （这是原始数组索引）：

![在此处输入图像描述](../Images/2f106d32816639684260b784f56ac7d0.png)

谁能帮助我如何实现这一目标？

我的数组代码：

```
self.myImages = [NSMutableArray array];
for(int i = 0; i <= 10; i++) 
{ 
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];

    NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"myImages%d.png", i]]; 
    if([[NSFileManager defaultManager] fileExistsAtPath:savedImagePath]){ 
        [images addObject:[UIImage imageWithContentsOfFile:savedImagePath]]; 
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:41:07.797

您可以在您的字典中放置另一个键，该键将在删除任何对象之前与索引相对应。显示它而不是索引，您将获得所需的结果。

编辑2：

```
self.myImages = [NSMutableArray array];
for(int i = 0; i <= 10; i++) 
{ 
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];

    NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"myImages%d.png", i]]; 
    if([[NSFileManager defaultManager] fileExistsAtPath:savedImagePath]){ 
        NSMutableDictionary *container = [[NSMutableDictionary alloc] init];
        [container setObject:[UIImage imageWithContentsOfFile:savedImagePath] forKey:@"image"];
        [container setObject:[NSNumber numberWithInt:i] forKey:@"index"];
        [images addObject:container];
        [container release]; // if not using ARC 
    } 
} 
```

当您获得相应的对象时，您可以：

```
NSDictionary *obj = [images objectAtIndex:someIndex];
UIImage *objImg = [obj objectForKey:@"image"];
int objIndex = [[obj objectForKey:@"index"] intValue]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:38:52.853

改用 NSMutableDictionary

```
NSMutableDictionary *dictionary = [[NSMutableDictionary alloc] init];
[dictionary setValue:@"Item 0" forKey:@"0"];
[dictionary setValue:@"Item 1" forKey:@"1"];
[dictionary setValue:@"Item 2" forKey:@"2"];
[dictionary setValue:@"Item 3" forKey:@"3"];

//    0 = "Item 0";
//    1 = "Item 1";
//    2 = "Item 2";
//    3 = "Item 3";
NSLog(@"%@", dictionary);

//Remove the item 1
[dictionary removeObjectForKey:@"1"];

//    0 = "Item 0";
//     2 = "Item 2";
//    3 = "Item 3";
NSLog(@"%@", dictionary); 
```

# api - REST API：如何搜索其他属性

> ID：11203569
> 
> 赞同：2
> 
> 时间：2012-06-26T08:37:23.927
> 
> 标签：api, node.js, rest, express

我使用 node.js 作为 REST API。有以下可用操作：

1.  /contacts, GET, 查找所有联系人
2.  /contacts, POST, 创建新联系人
3.  /contacts/:id, GET, 通过它的 id 显示或获取指定联系人
4.  /contacts/:id, PUT, 更新特定联系人
5.  /contacts/:id, DELETE, 删除特定联系人

现在搜索、查询用户的逻辑路径是什么？我应该把它放到 3\. 路线还是应该创建一个额外的路线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:58:33.190

我相信你会在这个问题上得到很多不同的意见。就我个人而言，我会将“搜索”视为对“所有联系人”的过滤：

获取 /contacts?filter=your_filter_statement

您可能已经在 GET /contacts 上有了过滤参数，以允许分页与过滤器语句一起工作。

编辑：使用它来解析您的查询字符串：

```
var url = require('url'); 
```

并在您的处理程序中（“请求”是您的 nodejs http-request 对象）：

```
var parsedUrl = url.parse(request.url, true);
var filterStatement = parsedUrl.query.filter; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:52:33.550

有趣的问题。这是我多次讨论过的问题。

我认为没有明确的答案，或者可能有，但我只是不知道或不同意。我会说您应该添加一个新路由：**/contacts/_search**在联系人列表上执行操作，在本例中为搜索。清楚并定义你当时所做的事情。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-26T14:38:25.350

`GET /contacts`查找所有联系人。您想要所有联系人的子集。URI 中的什么分隔符表示子集？它不是 ”？”; 这是非等级的。“/”字符用于分隔分层路径段。因此，对于一部分联系人，请尝试使用 URI，例如`/contacts/like/dave/`or `/contacts/by_name/susan/`。

这种按路径段对数据进行子集化的概念不仅仅适用于集合——它的应用范围更广。您的整个站点是一个集合，每个顶级路径段都定义了它`http://yoursite.example/contacts`的一个子集：是`http://yoursite.example/`. 它也适用于更狭窄的范围：`/contacts/:id`是 的子集`/contacts`，并且`/contacts/:id/firstname`是 的子集`/contacts/:id`。

# c# - 选择具有所有给定标签的 EF 实体（其中标签是 EF 实体）

> ID：11203571
> 
> 赞同：3
> 
> 时间：2012-06-26T08:37:55.097
> 
> 标签：c#, .net, linq, entity-framework, linq-to-entities

我有以下情况：一个“对话”实体/表，它有多个与之关联的标签。Tag 也是一个实体/表 - 键/id 是 tagName（一个字符串）。

在客户端（javascript）处理标签时，我使用字符串数组。

*现在我想检索具有**所有**给定标签的所有对话。*

* * *

输入是字符串数组，输出应该是对话的集合

我试过了：

```
var filterTags = new List<EFModels.Tag>();
foreach (var tagName in tags)
            {
               filterTags.Add(new EFModels.Tag() { Name = tagName});
            }

var conversations = from c in context.Conversations where !c.Tags.Except(filterTags).Any() select c ; 
```

这样做的问题是：`Unable to create a constant value of type 'EFModels.Tag'. Only primitive types or enumeration types are supported in this context`- 这是有道理的。

现在我该怎么做我的选择？最好的方法是什么？（我还是想用linq，不写sql select）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:53:04.803

您可以将 c.Tags 投影到标签名称。

我想它会看起来像这样

```
var conversations = from c in context.Conversations where !c.Tags.Select(tag => tag.Name ).Except(filterTags).Any() select c ; 
```

其中 filterTags 是包含标签名称的字符串列表

# java - 由 eclipse 和 ant 脚本构建的构建问题

> ID：11203572
> 
> 赞同：0
> 
> 时间：2012-06-26T08:37:55.940
> 
> 标签：java, eclipse, ant, jboss

我正在尝试通过 Eclipse 使用 ANT 脚本构建我的项目。到星期五它工作正常......但是从最后两天开始，无论我从我的工作区构建哪个构建，构建都成功完成，但是当我尝试部署那个耳朵时，它让我跟随错误并且我的耳朵没有得到部署。

```
[DispatcherPortlet] Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'PreReportController' defined in PortletContext resource [/WEB-INF/context/PreReport-portlet.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.adgo.portlet.PreReportController]: Constructor threw exception; nested exception is java.lang.Error: Unresolved compilation problems:
    The import com.adgo.usercommon cannot be resolved
    The import app cannot be resolved
    The import app cannot be resolved
    The import app cannot be resolved
    The import app cannot be resolved
    The import app cannot be resolved
    The import app cannot be resolved
    The import app cannot be resolved
    The import com.k2.event cannot be resolved
    The import com.k2.util cannot be resolved
    The import com.k2.util cannot be resolved
    CustomeLogger cannot be resolved 
```

我不知道出了什么问题。我有 5 个工作区，所有工作区都处于运行状态。但是现在所有这些工作空间的构建都给了我同样的错误。我没有为 Eclipse 和 JBoss 更改我的 java。请给我建议。我不知道我的 Java/Eclipse/System/Jboss 是不是这个问题.......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:13:59.807

该类似乎存在某种编译问题`com.adgo.portlet.PreReportController`。

尝试解决它们。确保您拥有所有需要的库。您可能还必须将一些库放在服务器端文件夹中。

如果检查了以上两个，则您不应该遇到此错误。

# regex - 正则表达式中的贪婪匹配

> ID：11203575
> 
> 赞同：0
> 
> 时间：2012-06-26T08:38:07.733
> 
> 标签：regex, tcl

我有以下输出：

```
Player name: RON_98
Player name: RON_97
player name: RON_96 
```

我需要获取 RON 部分和它之后的数字部分（例如 98），我使用了以下正则表达式：`regexp "(RON)_(\[0-9]*)"`，这会匹配最后一行的 RON_96 吗？`"*"`是贪心匹配，如何只匹配输出的第一行？我们有类似（RON）_（仅匹配数字）的东西吗？并且可以防止它与该行的其余部分匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:26:57.947

即使您选择您声明的正则表达式来匹配多行，它也不会匹配超过您所说的第一次出现的内容，这是“RON_98”。它将在第一场比赛的最后一位数字之后停止。您甚至可以通过在 RegEx 末尾使用 $ 来强制它在读取一行后停止（匹配行尾）。

作为参考，[0-9] 可以更容易地写为 \d（数字）：

```
(RON)_\d* 
```

更容易阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:26:14.257

# 在 Tcl 中，总是将正则表达式放在大括号中。

这在技术上不是必需的（您可以使用 Tcl 的语言定义来准确计算出以任何其他方式执行此操作所需的反斜杠）但在您可能会正常遇到的所有情况下它都更简单。

下面的示例将使用它。

* * *

正则表达式会尽快开始匹配。然后，在正常（贪婪）情况下，它们匹配尽可能多的文本。因此，使用您的示例代码和文本，匹配器开始尝试在`R`第一行匹配并继续消耗到`8`，此时它有一个匹配并*停止*。您可以通过要求`regexp`将索引报告到匹配发生的字符串而不是匹配的子字符串来验证这一点（通过`-indices`手册页上记录的选项）。

要获取字符串中的*所有*匹配项，您有两种选择：

1.  `-all -inline`将选项传递给`regexp`并处理结果列表`foreach`：

    ```
    # Three variables in foreach; one for whole match, one for each substring
    foreach {a b c} [regexp -all -inline {(RON)_([0-9]*)} $thedata] {
        puts "matched '$a', with b=$b and c=$c"
    } 
    ```

2.  将`-indices`选项与选项一起使用`-start`，全部在一个`while`循环中，因此您可以单步执行字符串：

    ```
    set idx 0
    while {[regexp -start $idx -indices {(RON)_([0-9]*)} $thedata a b c]} {
        puts "matched at '$a', with subranges '$b' and '$c'"
        set extracted [string range $thedata {*}$c]
        puts "the extracted value is '$extracted'"

        # Advance the place where the next search will start from
        set idx [expr {[lindex $a 1] + 1}]
    } 
    ```

我通常建议使用第一个选项；它更容易使用！有时第二个更好，因为它提供更多信息并使用更少的中间存储，但要正确也更棘手。

# android - android中的偏好活动监听器

> ID：11203576
> 
> 赞同：0
> 
> 时间：2012-06-26T08:38:12.033
> 
> 标签：android, android-preferences

我正在使用以下代码在prefernceactivity 中添加监听器。但它不起作用。请为此提供一个想法。

```
public class Preference extends PreferenceActivity implements OnSharedPreferenceChangeListener {
OnSharedPreferenceChangeListener listener;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.settings);
    }
@Override
public void onSharedPreferenceChanged(SharedPreferences sharedPreferences,
        String key) {
    // TODO Auto-generated method stub

}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T08:40:57.810

您必须先注册您的听众。

最好的方法是注册`onResume`和注销`onPause`：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    //...
    prefs = PreferenceManager.getDefaultSharedPreferences(this);
}

@Override
protected void onResume() {
    super.onResume();
    prefs.registerOnSharedPreferenceChangeListener(this);
}

@Override
protected void onPause() {      
    super.onPause();
    prefs.unregisterOnSharedPreferenceChangeListener(this);
} 
```

# c# - 改进重复检查方法

> ID：11203577
> 
> 赞同：0
> 
> 时间：2012-06-26T08:38:17.717
> 
> 标签：c#, .net, winforms, datagridview, duplicates

各位早安。

使用 C sharp .net4 和 MS Visual Studio 2010。

我为我的 Windows 窗体程序开发了一个重复检查器。当有几百条记录时，它完美地工作并且在我的 Datagrid 上几乎是即时的。

我注意到的问题是，当显示 6000 条记录时，它根本不够高效，需要几分钟。

如果有人有一些好的技巧可以让这种方法更快地改进现有设计，或者我已经看过的不同方法，我正在徘徊。

再次非常感谢您的帮助！

这是代码：

```
public void CheckForDuplicate()
{
    DataGridViewRowCollection coll = ParetoGrid.Rows;
    DataGridViewRowCollection colls = ParetoGrid.Rows;
    IList<String> listParts = new List<String>();
    int count = 0;

    foreach (DataGridViewRow item in coll)
    {
        foreach (DataGridViewRow items in colls)
        {
            count++;
            if ((items.Cells["NewPareto"].Value != null) && (items.Cells["NewPareto"].Value != DBNull.Value))
            {
                if ((items.Cells["NewPareto"].Value != DBNull.Value) && (items.Cells["NewPareto"].Value != null) && (items.Cells["NewPareto"].Value.Equals(item.Cells["NewPareto"].Value)))
                {
                    if ((items.Cells["Part"].Value != DBNull.Value) && (items.Cells["Part"].Value != null) && !(items.Cells["Part"].Value.Equals(item.Cells["Part"].Value)))
                    {
                        listParts.Add(items.Cells["Part"].Value.ToString());

                        dupi = true; //boolean toggle
                    }
                }
            }
        }
    }  
    MyErrorGrid.DataSource = listParts.Select(x => new { Part = x }).ToList();     
} 
```

任何问题让我知道，我会尽力回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:42:19.743

有一种方法可以提高效率。您需要计算每个项目的*哈希值*。具有不同哈希的项目不可能重复。

一旦你有了散列，你可以按散列排序或使用具有高效键检索的数据结构（如`Dictionary<TKey,TValue>`）来查找所有重复项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:58:03.687

如果可以，您应该尝试在基础数据上而不是在 UI 对象上执行此操作 - 但是我有一种预感，您正在从一组 DataRows 中播种它，在这种情况下您可能无法做到这一点。

我认为这里问题的很大一部分是按名称重复取消引用单元格，以及您重复尊重第二组单元格的事实。所以提前做这一切：

```
var first = (from row in coll.Cast<DataGridViewRow>()
            let newpareto = row.Cells["NewPareto"].Value ?? DBNull.Value
            let part = row.Cells["Part"].Value ?? DBNull.Value
            where newpareto != DBNull.Value && part != DBNull.Value
            select new 
            { newpareto = newpareto, part = part }).ToArray();

//identical - so a copy-paste job (if not using anonymous type we could refactor)
var second = (from row in colls.Cast<DataGridViewRow>()
            let newpareto = row.Cells["NewPareto"].Value ?? DBNull.Value
            let part = row.Cells["Part"].Value ?? DBNull.Value
            where newpareto != DBNull.Value && part != DBNull.Value
            select new 
            { newpareto = newpareto, part = part }).ToArray();

//now produce our list of strings
var listParts = (from f in first
                where second.Any(v => v.newpareto.Equals(f.newpareto)
                                   && !v.part.Equals(f.part))
                select f.part.ToString()).ToList(); //if you want it as a list. 
```

# apache - 如何从 htaccess RewriteRule 中删除查询字符串。鉴于解决方案似乎没有这样做

> ID：11203578
> 
> 赞同：1
> 
> 时间：2012-06-26T08:38:17.880
> 
> 标签：apache, .htaccess, mod-rewrite

[使用 htaccess 从重定向的 URL 中删除查询字符串](https://stackoverflow.com/questions/8956475/remove-query-string-from-redirected-url-with-htaccess) 询问如何在重定向时删除查询字符串。给出的答案（添加？）正是 Apache 手册中给出的答案。但是，它似乎不起作用（是的，可能是我）。使用相同的示例

起始网址：

```
http://www.myurl.org.uk/viewtopic.php?f=3&t=44207&start=2265 
```

重写代码：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On

RewriteRule ^viewtopic.php http://www.myurl.org.uk/? [R=301] 
```

输出网址：

```
http://www.myurl.org.uk/?f=3&t=44207&start=2265 
```

我希望：

```
http://www.myurl.org.uk/ 
```

这已经在 htaccess.madewithlove.be/ 上进行了测试

非常感谢

# mysql - 更改 MySQL 存储过程后未刷新 SSRS 数据集

> ID：11203580
> 
> 赞同：10
> 
> 时间：2012-06-26T08:38:26.063
> 
> 标签：mysql, ssrs-2008

更改 MySQL 存储过程后未刷新 SSRS 数据集。

我创建了一个 SSRS 报告，其中数据集从 MySQL 存储过程中获取数据。在这种情况下，输出正确生成，报告也是如此。

后来我修改了存储过程中的一些内容。我在查询设计器中运行存储过程。在查询设计器中，它给出了正确的输出。

但是，当我在预览选项卡中看到报告时，它会给出旧值。更改不会出现在呈现报告中。

请告诉我有什么问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-26T14:20:36.363

尝试删除 MySolution\MyProject\MyRDL.data 文件——BIDS 缓存相当积极。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T09:00:00.960

这是 Visual Studio 中的一个错误，我认为它也发生在我身上。通常在 Visual Studio 中关闭报表并重新打开会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T14:23:00.103

该报告可能会在 BIDS 上缓存片刻。

重新打开它应该没问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-25T12:34:36.480

我在 VS2012 中测试过

**注意：** **1\. 转到您的报告设计器 2\. 记住（或在某处复制）您的 (A) 数据源名称和 (B) 数据集名称**

现在第 1 步：在项目解决方案中探索删除数据集（与 Note(A) 数据源名称中的名称相同）不要担心您的报告不会有任何问题 :) 第 2 步：打开报告的报告数据工具 步骤3：*选择数据集-->右键单击---->选择数据集属性*在“数据源”中单击新建按钮---->下一步----> *选择您的表/sp/views/-- --->**将数据集名称设置为：（注2。记住您的（A）数据源名称）**

*   现在完成... :) 现在您可以在 SP 中获取新添加的字段

注意：只记得您的旧数据源和数据集名称

谢谢，享受...问候， SRSahoo@gmail.com

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-15T15:29:51.187

还要确保它是报告而不是你。

我切换了数据集中的排序字段，它们在报告预览中没有改变，因为我没有改变分组。

# linq - Linq Query - 获取当前月份加上前几个月

> ID：11203583
> 
> 赞同：0
> 
> 时间：2012-06-26T08:38:38.957
> 
> 标签：linq

我需要构建一个 Linq 查询，它将显示如下结果：

```
Data:

Sales   Month
----------------------
10      January
20      February
30      March
40      April
50      May
60      June
70      July
80      August
90      September
100     October
110     November
120     December 
```

我需要根据这种情况获得结果： **月 x = 月 x + 上个月** ，这将导致：

```
Sales   Month
--------------------
10      January
30      February (30 = February 20 + January 10)
60      March    (60 = March 30 + February 30)
100     April    (100 = April 40 + March 60)
......... 
```

对如何构建此查询有任何帮助吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T02:30:35.603

既然你想在 LINQ 中使用它...

```
void Main()
{
    List<SaleCount> sales = new List<SaleCount>() {
        new SaleCount() { Sales = 10, Month = 1 },
        new SaleCount() { Sales = 20, Month = 2 },
        new SaleCount() { Sales = 30, Month = 3 },
        new SaleCount() { Sales = 40, Month = 4 },
        ...
    };

    var query = sales.Select ((s, i) => new
    {
        CurrentMonth = s.Month,
        CurrentAndPreviousSales = s.Sales + sales.Take(i).Sum(sa => sa.Sales)
    });
}

public class SaleCount
{
    public int Sales { get; set; }
    public int Month { get; set; }
} 
```

...但在我看来，在这种情况下，提出一些花哨的 LINQ 并不像写出 LINQ 查询将生成的代码那样清晰。这也无法扩展。例如，如果只是以“老式方式”写出，则包含多年价值的数据会变得更加棘手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T04:35:23.127

如果您不想将每个月以前的所有销售额相加，则必须以某种方式跟踪总销售额。Aggregate 函数可以正常工作，因为我们可以构建一个列表并使用它的最后一个元素作为当前总数来计算下一个元素。

```
var sales = Enumerable.Range(1,12).Select(x => x * 10).ToList();
var sums = sales.Aggregate(new List<int>(), (list, sale) => list.Concat(new List<int>{list.LastOrDefault() + sale}); 
```

# iphone - 如何检查并确定情节提要中当前显示的视图控制器？

> ID：11203585
> 
> 赞同：2
> 
> 时间：2012-06-26T08:38:46.573
> 
> 标签：iphone, ios, storyboard

如果应用程序以前在后台，什么时候`applicationDidBecomeActive`被调用，我怎样才能有选择地刷新用户界面？

我希望当前视图控制器始终是故事板中的初始视图控制器。我无法在我的 main 中获得指向故事板的指针`AppDelegate.m`。

如何检查并确定当前显示的是哪个视图控制器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T10:11:35.070

如果你只想要一个指向你的故事板的指针，那么你可以这样做：

```
UIStoryboard *sb = [[[self window] rootViewController] storyboard]; 
```

`rootViewController`实际上，故事板的初始视图控制器在哪里。如果您希望此控制器成为当前控制器（如您所说），那么您很高兴，但如果您想实际更新您的 UI，那么我想您可以从委托（内部`applicationDidBecomeActive`）发布自定义通知，并且注册每个可能有兴趣捕获它的控制器，以便它可以更新其 UI（或者只是添加`self`为观察者`UIApplicationDidBecomeActiveNotification`以捕获与您的委托捕获的相同的控制器......）。

PS。如果您`rootViewController`是 a `UINavigationController`，您可以像这样获得当前显示的控制器：

```
id currentController = [[[self window] rootViewController] visibleViewController]; 
```

# jquery - Jquery 下拉内容面板

> ID：11203586
> 
> 赞同：0
> 
> 时间：2012-06-26T08:38:50.697
> 
> 标签：jquery, panel, slide, hoverintent

任何人都可以给我一些帮助吗？内容需要在悬停一秒钟后出现（我尝试使用 hoverIntent 但我无法让它工作）并且它需要保持打开状态，只有在单击按钮时才会关闭/向上滑动。

这是在 jfiddle [http://jsfiddle.net/VDcL4/4/](http://jsfiddle.net/VDcL4/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:50:21.193

您需要做的就是替换 slideToggle slideDown() -

```
 $(document).ready(function() {
    $(".btn-slide").hover(function() {
        $('#panel').slideDown(1000);
        $(this).addClass("active");
        return false;
    });
});​ 
```

你为什么首先使用slideToggle？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:51:31.360

像这样？

[jsfiddle](http://jsfiddle.net/VDcL4/5/)

```
$(".btn-slide").on('mouseenter click', function(e) {
    switch(e.type) {
        case 'mouseenter':
            $("#panel").stop().slideDown("slow");
            break;
        case 'click':
            $("#panel").stop().slideUp("slow");
            break;
    }
    return false;
}); 
```

# c++ - C++ Bitset << 运算符不起作用。指向位集变量的指针

> ID：11203588
> 
> 赞同：0
> 
> 时间：2012-06-26T08:38:53.500
> 
> 标签：c++, pointers, bitset, bit-shift

我在 unordered_map 中有一组位集指针

```
static unordered_map< size_t, bitset<BITSIZE>* > systemBits; 
```

我的功能

```
template<typename system>
     static bitset<BITSIZE> & getBitFor() {

    size_t hash = typeid(system).hash_code();

    bitset<BITSIZE> * bit = systemBits[hash];

    if(bit == NULL) {
        bit = new bitset<BITSIZE>(0);
        (*bit) << POS++; // tried *bit << POS++ as well;
        systemBits[hash] = bit;
    }

    return *bit;
} 
```

而 POS 最初是一个 int 设置为 1。

我要做的就是用每个新位集的位置量来移动位集。

```
 (*bit) << POS++; 
```

但是，这似乎不起作用。当我*cout*返回的位集时，它的所有位都设置为 0。如果我执行以下操作：

```
bit->flip(); 
```

或 (*bit).flip();

返回的位集确实将所有 0 翻转为 1。

是什么赋予了？为什么移位运算符根本没有效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:43:33.037

因为您没有将结果分配给任何东西。如果你试图转移一个 int，你会遇到同样的问题。

此外，您已将 bitset 初始化为零，并且零移位任意量始终为零。

# boost - 对采用常量对象引用的函数的增强信号调用

> ID：11203591
> 
> 赞同：2
> 
> 时间：2012-06-26T08:39:02.127
> 
> 标签：boost, signals-slots

这是升压信号定义

```
 boost::signal<void (const MetaData&)> sigChangeTrackMD; 
```

应该调用命名空间 GSTREAMER 中的函数 changeTrack

```
void changeTrack(const MetaData& md){.....} 
```

信号连接

```
sigChangeTrackMD.connect(GSTREAMER::changeTrack); 
```

但是以下错误来了。声明错了吗？

```
Engine/GSTAdaptor.cpp:21:44: error: no match for call to '(boost::signal<void(const MetaData&)>) (<unresolved overloaded function type>)'
/usr/include/boost/signal.hpp:329:9: note: candidates are:
/usr/include/boost/signals/signal_template.hpp:330:1: note: boost::signal1<R, T1, Combiner, Group, GroupCompare, SlotFunction>::result_type boost::signal1<R, T1, Combiner, Group, GroupCompare, SlotFunction>::operator()(T1) [with R = void, T1 = const MetaData&, Combiner = boost::last_value<void>, Group = int, GroupCompare = std::less<int>, SlotFunction = boost::function<void(const MetaData&)>, boost::signal1<R, T1, Combiner, Group, GroupCompare, SlotFunction>::result_type = void]
/usr/include/boost/signals/signal_template.hpp:330:1: note:   no known conversion for argument 1 from '<unresolved overloaded function type>' to 'const MetaData&'
/usr/include/boost/signals/signal_template.hpp:370:1: note: boost::signal1<R, T1, Combiner, Group, GroupCompare, SlotFunction>::result_type boost::signal1<R, T1, Combiner, Group, GroupCompare, SlotFunction>::operator()(T1) const [with R = void, T1 = const MetaData&, Combiner = boost::last_value<void>, Group = int, GroupCompare = std::less<int>, SlotFunction = boost::function<void(const MetaData&)>, boost::signal1<R, T1, Combiner, Group, GroupCompare, SlotFunction>::result_type = void]
/usr/include/boost/signals/signal_template.hpp:370:1: note:   no known conversion for argument 1 from '<unresolved overloaded function type>' to 'const MetaData&'
Engine/GSTAdaptor.cpp:22:42: error: no match for call to '(boost::signal<void(std::basic_string<char>&)>) (<unresolved overloaded function type>)'
/usr/include/boost/signal.hpp:329:9: note: candidates are:
/usr/include/boost/signals/signal_template.hpp:330:1: note: boost::signal1<R, T1, Combiner, Group, GroupCompare, SlotFunction>::result_type boost::signal1<R, T1, Combiner, Group, GroupCompare, SlotFunction>::operator()(T1) [with R = void, T1 = std::basic_string<char>&, Combiner = boost::last_value<void>, Group = int, GroupCompare = std::less<int>, SlotFunction = boost::function<void(std::basic_string<char>&)>, boost::signal1<R, T1, Combiner, Group, GroupCompare, SlotFunction>::result_type = void]
/usr/include/boost/signals/signal_template.hpp:330:1: note:   no known conversion for argument 1 from '<unresolved overloaded function type>' to 'std::basic_string<char>&'
/usr/include/boost/signals/signal_template.hpp:370:1: note: boost::signal1<R, T1, Combiner, Group, GroupCompare, SlotFunction>::result_type boost::signal1<R, T1, Combiner, Group, GroupCompare, SlotFunction>::operator()(T1) const [with R = void, T1 = std::basic_string<char>&, Combiner = boost::last_value<void>, Group = int, GroupCompare = std::less<int>, SlotFunction = boost::function<void(std::basic_string<char>&)>, boost::signal1<R, T1, Combiner, Group, GroupCompare, SlotFunction>::result_type = void]
/usr/include/boost/signals/signal_template.hpp:370:1: note:   no known conversion for argument 1 from '<unresolved overloaded function type>' to 'std::basic_string<char>&'
make: *** [GSTAdaptor.o] Error 1 
```

# c# - 如何从 Outlook 邮件 ID 跟踪未送达的邮件消息

> ID：11203598
> 
> 赞同：0
> 
> 时间：2012-06-26T08:39:37.547
> 
> 标签：c#, .net, email

```
public void SendMAil()
{
    MailMessage newMail = new MailMessage();
    newMail.To.Add("xxxx@example.com");
    newMail.From = new MailAddress(ConfigurationManager.AppSettings["FromMail"].ToString(), ConfigurationManager.AppSettings["FromMailDisplayName"].ToString());
    newMail.Subject = "Hi";
    newMail.Body = "this is the body";
    SmtpClient SurveyMailClient = new SmtpClient(ConfigurationManager.AppSettings["SEMailServerIP"].ToString(), Convert.ToInt32(ConfigurationManager.AppSettings["SEMailServerPortNumber"]));
    SurveyMailClient.DeliveryMethod = SmtpDeliveryMethod.Network;
    SurveyMailClient.UseDefaultCredentials = true;
    SurveyMailClient.Send(newMail);
} 
```

使用上面的代码，我无法在我的 Outlook 邮箱（发件人地址）中跟踪未投递的邮件。如果邮件投递成功，则已发送邮件未保存在已发送邮件文件夹中，如果邮件未投递，则邮件投递失败通知没有进入我的收件箱。所以请帮助我如何使用上面的代码从我的应用程序端跟踪未送达的邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:46:34.673

SMTP 只会传递邮件，您必须以某种方式手动将副本“发送”到“已发送邮件”文件夹中。我最好的选择是使用 IMAP。

# android - 服务显示视图 getLayoutInflater

> ID：11203599
> 
> 赞同：0
> 
> 时间：2012-06-26T08:39:41.977
> 
> 标签：android, android-service, android-inflate

我想在服务上下文中显示两个视图。一个是 TextView，另一个是我开发的扩展基本 View 类的类。
提示.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mtPrompt"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@android:color/background_dark"
    android:text="@string/demoString"
    android:textColor="@android:color/white"
    android:minLines="2"
    android:textSize="25dp" >
</TextView> 
```

和 input.xml：

```
<com.xxx.ime.sssView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/inputView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/translucent_gray"
    android:cacheColorHint="@null" >

</com.xxx.ime.sssView> 
```

在我的 onInitializeInterface() 实现中，我将它们膨胀如下：

```
 sssView sv = 
        (sssView) getLayoutInflater().inflate(R.layout.input, null);
 TextView tv = 
        (TextView) getLayoutInflater().inflate(R.layout.prompt, null); 
```

我看到了 sssView，但没有看到 TextView。任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:02:43.850

这不是一个完整的答案，但它是一个解决方案。我需要做的不是拥有两个单独的视图，而是从 TextView 而不是视图继承我的 sssView。然后我放大了一个视图，并使用重力将我的文本放置在我想要的位置。

# iphone - 代码签名：可用配置文件与项目和目标屏幕不同

> ID：11203600
> 
> 赞同：1
> 
> 时间：2012-06-26T08:39:45.630
> 
> 标签：iphone, ios, xcode, code-signing

我必须更改我的包标识符才能访问正确的配置文件来为商店构建我的项目。为此，我更改了项目 plist (`bundle identifier`和`bundle versions string, short`)，并更改了我的项目“目标”的摘要选项卡中的相同字段。

当我单击项目 -> 构建设置 -> 代码签名时，我会看到新包标识符的所有正确配置文件。

当我单击目标 -> 构建设置 -> 代码签名时，我会看到旧包标识符的所有旧配置文件。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:37:15.460

在设置配置文件时，您需要交叉检查以下内容，

```
1\. is your certificate valid for your provisioning profile?

2\. is bundle identifier of provisioning profile and info.plist are same?

3\. is the compiler settings for project and targets are same?

4\. is deployment target is valid? 
```

请检查以上所有情况。如果这些都很好，那么问题就不同了。让我知道这些是否完美？

# c++ - 顶点位置/法线/坐标未正确渲染

> ID：11203601
> 
> 赞同：1
> 
> 时间：2012-06-26T08:39:45.690
> 
> 标签：c++, opengl-es-2.0

我无法将法线和 au,v 对发送到我的着色器。如果我删除正常，事情会按预期工作。

**编辑** 看起来 v_normal 正在接收用于 v_coord 的值。我仍然不知道。 **/编辑**

这是我的顶点：

```
struct Vertex{
    Vertex(vec3 const & v) : pos(v) {}

    vec3 pos;
    vec3 normal;
    real u, v;
}; 
```

这是初始化代码：

```
 const int VERTEX_POS_INDX = 0;
    const int VERTEX_NORMAL_INDX = 1;
    const int VERTEX_TEXCOORD_INDX = 2;

    const int VERTEX_POS_SIZE = 3;
    const int VERTEX_NORMAL_SIZE = 3;
    const int VERTEX_TEXCOORD_SIZE = 2;

    GLuint vbo, ibo;
    glGenBuffers(1, &vbo);
    glBindBuffer(GL_ARRAY_BUFFER, vbo);
    glBufferData(GL_ARRAY_BUFFER, sphere->vertices.size()*sizeof(Vertex), &sphere->vertices[0], GL_STATIC_DRAW);

    glGenBuffers(1, &ibo);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ibo);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sphere->indices.size()*sizeof(unsigned short), &sphere->indices[0], GL_STATIC_DRAW);

    glEnableVertexAttribArray ( VERTEX_POS_INDX );
    glEnableVertexAttribArray ( VERTEX_NORMAL_INDX );
    glEnableVertexAttribArray ( VERTEX_TEXCOORD_INDX );

    int offset = 0;

    glVertexAttribPointer ( VERTEX_POS_INDX, VERTEX_POS_SIZE, GL_FLOAT, GL_FALSE, sizeof(Vertex), (void*)offset );
    offset += VERTEX_POS_SIZE * sizeof(real);

    glVertexAttribPointer ( VERTEX_NORMAL_INDX, VERTEX_NORMAL_SIZE, GL_FLOAT, GL_FALSE, sizeof(Vertex), (void*)offset );
    offset += VERTEX_NORMAL_SIZE * sizeof(real);

    glVertexAttribPointer ( VERTEX_TEXCOORD_INDX, VERTEX_TEXCOORD_INDX, GL_FLOAT, GL_FALSE, sizeof(Vertex), (void*)offset );

    glBindAttribLocation ( programObject, VERTEX_POS_INDX, "a_position" );
    glBindAttribLocation ( programObject, VERTEX_NORMAL_INDX, "a_normal" );
    glBindAttribLocation ( programObject, VERTEX_TEXCOORD_INDX, "a_coord" ); 
```

顶点着色器：

```
precision highp float;

uniform mat4 u_mv;
uniform mat4 u_mvp;
uniform vec3 u_light;
uniform vec3 u_up;

attribute vec3 a_position;
attribute vec2 a_coord;
attribute vec3 a_normal;

varying vec2 v_coord;
varying vec3 v_normal;

void main() {    
    v_coord = a_coord;
    v_normal = a_normal;
    gl_Position = u_mvp * vec4(a_position, 1);
} 
```

片段着色器：

```
precision highp float;

uniform vec3 u_up;

varying vec3 v_normal;
varying vec2 v_coord;

precision highp float;

uniform vec3 u_up;

varying vec3 v_normal;
varying vec2 v_coord;

void main()
{
    vec2 coord = v_coord;
    vec3 normal = v_normal;
    coord.x = mod(v_coord.x * 5.0, 1.0);
    coord.y = mod(v_coord.y * 5.0, 1.0);
    gl_FragColor = vec4 (
        mod(coord.x*1.0,1.0),
        mod(coord.y*1.0,1.0),
        mod(normal.z*5.0,1.0)*0.0,
        1.0 );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:28:52.067

我只需要使用 glGetAttributeLocation 来定义索引，而不是假设 glBindAttributeLocation 可以解决问题。

**编辑** 在链接程序之前使用绑定属性函数可以解决问题并保留我对代码的意图。

# jquery - jquery scoll 文本需要在鼠标悬停时保持静止

> ID：11203602
> 
> 赞同：0
> 
> 时间：2012-06-26T08:39:47.487
> 
> 标签：jquery, html

我已经在我的 php 网站中实现了 jquery 滚动文本。查看我的代码

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function() {

        $('.scrollingtext').bind('marquee', function() {
            var ob = $(this);
            var tw = ob.width();
            var ww = ob.parent().width();
            ob.css({ left: -tw });
            ob.animate({ left: ww }, 20000, 'linear', function() {
                ob.trigger('marquee');
            });
        }).trigger('marquee');

    });
    </script> 
```

正文部分内

```
<div class="jp-title">

    <ul>
    <li class="scrollingtext" >

    <a href="index"   >welcome </span>

    </li>
    </ul>

</div> 
```

当鼠标悬停在文本上时，我需要使此滚动文本保持静止。但我不知道怎么做？

请回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:00:30.147

您必须将一个`mouseenter`或`hover`事件绑定到`scrollingtext`停止动画的元素，如下所示：

```
$(".scrollingtext").bind("mouseenter", function() {
    $(this).stop();
}); 
```

我猜在鼠标离开后你想重新开始滚动。尝试这个：

```
$(".scrollingtext").bind("hover", function() {
    // equivalent to mouseenter. stop() stops all animation
    $(this).stop();
}, function() {
    // equivalent to mouseleave. this triggers your already existing 'marquee' event
    $(this).trigger("marquee");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:54:43.457

您可以尝试使用 jquery marquee 插件。默认情况下，它会在悬停时停止选取框。

[http://remysharp.com/2008/09/10/the-silky-smooth-marquee/](http://remysharp.com/2008/09/10/the-silky-smooth-marquee/)

# mysql - #1242 - 子查询返回多于 1 行

> ID：11203607
> 
> 赞同：1
> 
> 时间：2012-06-26T08:40:06.203
> 
> 标签：mysql

```
SELECT tblorder.fld_userid
FROM `tblordereditems`
inner JOIN tblorder ON tblorder.fld_id = tblordereditems.fld_order_id
where (SELECT sum( tblordereditems.fld_product_quantity )FROM tblordereditems inner JOIN tblorder ON tblorder.fld_id =tblordereditems.fld_order_id GROUP BY tblorder.fld_userid)>5 
```

这是我的查询，但会引发错误。任何机构都可以帮忙吗？谢谢

这里有三张桌子。

1.  tbluser
2.  tblorder
3.  tblordereditems

tbluser 的字段 fld_id 是 tblorder 作为 fld_userid 的外键。
tblorder 的 fld_id 是 tblordereditems 作为 fld_order_id 的外键，我得到结果 fld_userid 订购了 5 件以上的产品，即。fld_product_quantity 按 tblorder.fld_userid 分组的总和

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:48:20.173

它返回超过 1 行，因为您正在请求所有用户的计数。

尝试：

```
Select tb1.fld_userid
FROM `tblordereditems` tbi1
inner JOIN tblorder tb1 ON tb1.fld_id = tbi1.fld_order_id
where (
        SELECT sum( tbi2.fld_product_quantity ) 
        FROM tblordereditems tbi2 inner JOIN tblorder tb2 ON tb2.fld_id =tbi2 .fld_order_id 
         where tb2.fld_userid = tb1.fld_userid
)>5 
```

# sql - SQL Select by condition on a integer field

> ID：11203612
> 
> 赞同：0
> 
> 时间：2012-06-26T08:40:49.400
> 
> 标签：sql, select, conditional-statements

我的表中有一个整数列。它是`product id`并且具有像

```
112233001  
112233002  
113311001  
225577001 
```

此编号 (AABBCCDDD) 由 4 个部分组成：

```
AA : first level category  
BB : second level category  
CC : third level category  
DDD : counter 
```

我想在我的`SELECT`语句中检查条件以选择例如具有 BB = 33 和 AA = 11 的行

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T08:43:18.393

这是否足够：

```
select x from table where field >= 113300000 and field < 113400000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:41:46.530

```
 Select field from table where substr(field,,) = value 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T08:44:41.047

```
SELECT * FROM YOURTABLE

WHERE 

substr(PRODUCT_ID, 3, 2)='33'
AND
substr(PRODUCT_ID, 1, 2)='11' 
```

或者

```
SELECT * FROM YOURTABLE

WHERE 

PRODUCT_ID LIKE '11%33%' 
```

**是的，简而言之，您必须转换为字符串**

[substr 的引用](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions162.htm)

**目的**

SUBSTR 函数返回字符的一部分，从字符位置开始，substring_length 个字符长。SUBSTR 使用输入字符集定义的字符计算长度。SUBSTRB 使用字节而不是字符。SUBSTRC 使用 Unicode 完整字符。SUBSTR2 使用 UCS2 代码点。SUBSTR4 使用 UCS4 代码点。

```
If position is 0, then it is treated as 1.

If position is positive, then Oracle Database counts from the beginning of char to find the first character.

If position is negative, then Oracle counts backward from the end of char.

If substring_length is omitted, then Oracle returns all characters to the end of char. If substring_length is less than 1, then Oracle returns null. 
```

char 可以是任何数据类型`CHAR, VARCHAR2, NCHAR, NVARCHAR2, CLOB, or NCLOB`。position 和 substring_length `must be of datatype NUMBER`，或任何可以隐式转换为 NUMBER 的数据类型，并且必须解析为整数。返回值与 char 的数据类型相同。作为参数传递给 SUBSTR 的浮点数会自动转换为整数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T08:47:48.073

这似乎可以工作。否则，您可能必须将它们转换为字符串并解析出您需要的值，这会使您的查询慢得多。

```
SELECT * 
    FROM table t
WHERE t.field >= 113300000
AND t.field < 113400000 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T09:00:17.677

你需要使用`_`通配符 -

```
SELECT * 
FROM TABLE
WHERE
FIELD LIKE '1133_____' 
```

在这里，每个`_`都是一个字符。所以你需要放置相同数量的`_`以保持长度相同

# r - 有没有办法更改 Rstudio 项目的文件路径？

> ID：11203613
> 
> 赞同：16
> 
> 时间：2012-06-26T08:40:50.697
> 
> 标签：r, git, rstudio

我正在使用 GIT，我注意到如果我只是在 Windows 中移动整个文件夹（或重命名它），它会破坏所有路径。然后我陷入无限循环，试图退出 Rstudio 并且 Rstudio 无法找到要保存（或不保存）的文件路径。

有没有办法移动项目文件夹的位置，同时保持它完好无损？

对不起，让我说得更清楚一点。

1.  启动 Rstudio 并创建一个版本控制的项目（我正在使用 GIT）
2.  意识到您将项目放在计算机的错误文件夹中
3.  通过 (a) 使用 Windows 资源管理器将 Rstudio 和 GIT 文件移动到另一个位置，将项目移动到新文件夹。（断开所有链接）或（b）在“正确”位置开始一个新项目。（丢失您的编辑版本）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-11-11T21:22:44.793

关闭 RStudio 后，我将项目文件夹（使用 Windows 资源管理器）移动到新位置。我的 RStudio 项目从那里打开得很好。我进行了编辑并将其推送到 Github。

如果您`here`在 Cran 上使用该软件包，则无需更新任何链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-20T17:20:48.083

如果您使用 GitHub Desktop，它将检测到项目已被移动，并允许您将其定位（设置）到不同的文件夹。

# twitter-bootstrap - Twitter 引导容器

> ID：11203614
> 
> 赞同：17
> 
> 时间：2012-06-26T08:40:52.513
> 
> 标签：twitter-bootstrap, containers, html

我已经使用 bootstrap 几个月了，并希望澄清一些作为最佳实践的一部分。

我的问题是我是为每一行创建一个容器还是为整个页面创建一个大容器。

示例 1（封闭容器）

```
<div class="container">
    <div class="row">
        <div class="span8 offest2">
            <h1>Content</h1>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="span8 offest2">
            <h1>More Content</h1>
        </div>
    </div>
</div> 
```

示例 2（1 个大容器）

```
<div class="container">

    <div class="row">
        <div class="span8 offest2">
            <h1>Content</h1>
        </div>
    </div>

    <div class="row">
        <div class="span8 offest2">
            <h1>Content</h1>
        </div>
    </div>

</div> 
```

任何帮助表示赞赏，只是不想早日养成坏习惯

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-30T11:29:01.003

多行在逻辑上可以是同一个网格的一部分，就像表中的行一样。.container 代表一个网格。因此，示例 2 将是可行的方法。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-26T09:06:10.483

我会推荐第二个例子。首先，您有重复的代码，这没有任何意义。始终考虑“不要重复自己”的原则。

# c# - 如何使用 c# 从 sql 表中检索行并在 asp.net 中的标签中显示每个项目

> ID：11203615
> 
> 赞同：-3
> 
> 时间：2012-06-26T08:40:55.110
> 
> 标签：c#, asp.net, sql, stored-procedures

我有 5 张桌子，每张桌子有 4 行。所以我需要获取所有行，并且行中的每个元素都应该显示在表格中。

但问题是我在一个存储过程中编写了五个表的所有选择语句。那么如何找回它们呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:30:24.173

您可以在数据集中检索它们并通过 dataset.tables["TableName or Index"] 访问每个表

**例子：**

```
// SqlCommand cmd=new SqlCommand("ProcedureName","Connection");
// cmd.CommandType = CommandType.StoredProcedure;
// SqlDataAdapter da=new SqlDataAdapter(cmd);
// Dataset ds=new Dataset();
// da.Fill(ds);
// Now after Filling the Dataset you can Retrieve it by

dataset.tables["TableName or Index"] 
```

# c++ - 地图中的处理对象

> ID：11203616
> 
> 赞同：1
> 
> 时间：2012-06-26T08:40:57.333
> 
> 标签：c++, map, handle

我有一个`std::map<std::string, HANDLE> SampleMap`将`HANDLE`对象存储为值。使用地图后，我正在清除所有地图条目。

```
SampleMap.clear(); 
```

通过这样做，句柄对象会发生什么。他们会被删除吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T08:44:33.707

HANDLE 只是 typedef 或指针的定义（AFAIK `void*`）。

清除地图时，它们不会被删除，您必须自己关闭/释放它们。

或者编写一个包装类来为你做这件事。请参阅此线程[如何将 C++ 标准智能指针与 Windows HANDLE 一起使用？](https://stackoverflow.com/questions/9842938/how-to-use-c-standard-smart-pointers-with-windows-handles)一些初步的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:44:16.747

s 是一种指针，因此`HANDLE`删除它们并没有多大作用，要正确释放这些`HANDLE`s 指向的资源，您必须显式调用相应的函数（如`CloseHandle`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T08:45:37.980

它们不会被删除，它们会变成悬空指针/句柄。

如果要自动删除，请使用 std::unique_ptr 并覆盖删除器对象以删除包含的任何类型的句柄。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T08:44:07.990

我很确定这与不关闭句柄并仅删除本地对象引用的情况相同。恐怕您`CloseHandle`每次都必须使用功能。正如您可能知道的那样，操作系统会跟踪对对象的引用次数，并仅在它等于零时将其删除。通知操作系统您不再需要该对象的唯一方法是使用`CloseHandle`函数。否则句柄会留在某个句柄表中，不会被删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T08:44:28.763

> 通过这样做，句柄对象会发生什么

没有什么。

> 他们会被删除吗？

不。

# objective-c - 两个内容写入一个可编辑单元格

> ID：11203623
> 
> 赞同：0
> 
> 时间：2012-06-26T08:41:16.030
> 
> 标签：objective-c, ios, xcode, xcode4

我有 3 个表格单元格，它以某种方式显示最后一个单元格中的最后两个内容。我在代码的某个地方做错了，但我不知道在哪里，因为我只是按照教程并尝试在教程中做同样的事情，但是我想要 3 个可编辑的单元格而不是 2 个单元格。

![在此处输入图像描述](../Images/5086557bf10076022fe553ac75e9766e.png)

完整代码：

```
#import "LocationAddViewController.h"
#import "Location.h"

@interface LocationAddViewController ()
- (void)prepareCell:(UITableViewCell *)cell forIndexPath:(NSIndexPath *)indexPath;
- (UIBarButtonItem *)newCancelButton;
- (UIBarButtonItem *)newSaveButton;
- (UITextField *)newTextField;
@end

@implementation LocationAddViewController

@synthesize location;
@synthesize titleField;
@synthesize authorField;
@synthesize atextField;
@synthesize delegate;

- (void)dealloc {
    [location release];
    [titleField release];
    [authorField release];
    [atextField release];
    [super dealloc];
}

- (id)initWithLocation:(Location *)aLocation andDelegate:(id)aDelegate {
    if (self = [super initWithStyle:UITableViewStyleGrouped]) {
        self.location = aLocation;
        self.delegate = aDelegate;
    }
    return self;
}

- (void)viewDidLoad {
    [super viewDidLoad];

    self.tableView.allowsSelection = NO;

    titleField = [self newTextField];
    titleField.keyboardType = UIKeyboardTypeASCIICapable;
    [titleField becomeFirstResponder];

    authorField = [self newTextField];
    authorField.keyboardType = UIKeyboardTypeASCIICapable;

    atextField = [self newTextField];
    atextField.keyboardType = UIKeyboardTypeASCIICapable;

    if (location.onelocationId) {
        titleField.text = location.title;
        authorField.text = location.author;
        atextField.text = location.text;
    } else {
        titleField.placeholder = @"Title";
        authorField.placeholder = @"Author";
        atextField.placeholder = @"Text";
    }

    UIBarButtonItem *cancelButton = [self newCancelButton];
    self.navigationItem.leftBarButtonItem = cancelButton;
    [cancelButton release];

    UIBarButtonItem *saveButton = [self newSaveButton];
    self.navigationItem.rightBarButtonItem = saveButton;
    saveButton.enabled = NO;
    [saveButton release];        
} 

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    if (location.onelocationId) {
        self.title = @"Edit Location";
    } else {
        self.title = @"Add Location";
    }
}

-(IBAction)cancel {
    [self.navigationController popViewControllerAnimated:YES];
}

-(IBAction)save {
    location.title = titleField.text;
    location.author = authorField.text;
    location.text = atextField.text;

    [self.delegate didChangeLocation:location];
    [self.navigationController popViewControllerAnimated:YES];
}

- (NSInteger)tableView:(UITableView *)tableView 
 numberOfRowsInSection:(NSInteger)section {
    return 3;
}

- (UITableViewCell *)tableView:(UITableView *)aTableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = 
    [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault 
                            reuseIdentifier:nil] autorelease];

    [self prepareCell:cell forIndexPath:indexPath];

    return cell;
}

- (void)prepareCell:(UITableViewCell *)cell forIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.row == 0)  {
        [cell.contentView addSubview:titleField];   
    } else { 
        [cell.contentView addSubview:authorField];
        [cell.contentView addSubview:atextField];
    }
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField { 
    [textField resignFirstResponder];
    if (textField == titleField) {
        [authorField becomeFirstResponder];
    }
    if (titleField == authorField) {
        [self save];
    }
    return YES;
} 

- (IBAction)textFieldChanged:(id)sender {
    BOOL enableSaveButton = 
    ([self.titleField.text length] > 0) && ([self.authorField.text length] > 0) && ([self.atextField.text length] > 0);
    [self.navigationItem.rightBarButtonItem setEnabled:enableSaveButton];
}

- (UIBarButtonItem *)newCancelButton {
    return [[UIBarButtonItem alloc] 
            initWithTitle:@"Cancel" 
            //auch im Original gelb
            style:UIBarButtonSystemItemCancel 
            target:self 
            action:@selector(cancel)];
}

- (UIBarButtonItem *)newSaveButton {
    return [[UIBarButtonItem alloc]
            initWithTitle:@"Save" 
            //auch im Original gelb
            style:UIBarButtonSystemItemSave
            target:self 
            action:@selector(save)];
}

- (UITextField *)newTextField {
    UITextField *textField = 
    [[UITextField alloc] initWithFrame:CGRectMake(10, 10, 285, 25)];
    textField.font = [UIFont systemFontOfSize:16];
    textField.delegate = self;
    textField.returnKeyType = UIReturnKeyDone;
    textField.clearButtonMode = UITextFieldViewModeWhileEditing;
    [textField addTarget:self 
                  action:@selector(textFieldChanged:) 
        forControlEvents:UIControlEventEditingChanged];
    return textField;
}  

@end 
```

我想问题出在这里：

```
 - (void)prepareCell:(UITableViewCell *)cell forIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.row == 0)  {
        [cell.contentView addSubview:titleField];   
    } else { 
        [cell.contentView addSubview:authorField];
        [cell.contentView addSubview:atextField];
    }
} 
```

我对整个编程并不太感兴趣，但我想我必须编写 3 个 if 子句？（类似`if (...) elsif (...) else (...)`）有人比我更了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:44:56.203

您对错误的来源是正确的。您在相同的坐标处添加`authorField`& 。`atextField`包含 s 的 3 个原因的正确方法`if`是：

```
if (/* condition 1 */) {

}
else if ( /* condition 2 */) {

}
else if ( /* condition 3 */) {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:45:11.747

在您的 prepareCell:forIndexPath 中，您将两个子视图添加到最后一个单元格中。您可以按照您的描述使用 elseif，因此您的方法看起来像这样

```
if (indexPath.row == 0)  {
    [cell.contentView addSubview:titleField];   
} else if (indexPath.row == 1) { 
    [cell.contentView addSubview:authorField];
} else {
    [cell.contentView addSubview:atextField];
} 
```

您可以在 if 之后添加任意数量的 else if。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T08:45:41.263

做这个：

```
- (void)prepareCell:(UITableViewCell *)cell forIndexPath:(NSIndexPath *)indexPath {
if (indexPath.row == 0)  {
    [cell.contentView addSubview:titleField];   
} else if(indexPath.row == 1) { 
    [cell.contentView addSubview:authorField];
}else if(indexPath.row == 2) { 
    [cell.contentView addSubview:atextField];
}
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T08:46:41.887

```
if (indexPath.row == 0)  {
    [cell.contentView addSubview:titleField];   
} else if(indexPath.row == 1) { 
    [cell.contentView addSubview:authorField];
}else if(indexPath.row == 2) { 
    [cell.contentView addSubview:atextField];
} 
```

# ruby-on-rails - 我希望系统每周根据用户在 rails 中输入的日期向用户发送电子邮件

> ID：11203630
> 
> 赞同：-3
> 
> 时间：2012-06-26T08:41:33.457
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

> **可能重复：**
> [如何根据 Rails 中的用户日期输入每周继续向用户发送电子邮件](https://stackoverflow.com/questions/11205195/how-to-keep-sending-emails-to-users-every-week-depending-on-user-date-input-in-r)

我正在构建一个允许用户插入信息名称、日期和电子邮件的系统。我希望系统在用户插入后每 7 天自动向其用户发送电子邮件。

这是我的邮件

```
class UserMailer < ActionMailer::Base
  default from: "from@example.com"
   def welcome_email(dop)
    @dop = dop
    @url  = "http://example.com/login"
    mail(:to => dop.mail, :subject => "Welcome to My Awesome Site")
  end
end 
```

这是控制器：

```
def create
    @dop = Dop.new(params[:dop])

    respond_to do |format|
      if @dop.save
        UserMailer.welcome_email(@dop).deliver
        format.html { redirect_to @dop, notice: 'Dop was successfully created.' }
        format.json { render json: @dop, status: :created, location: @dop }
      else
        format.html { render action: "new" }
        format.json { render json: @dop.errors, status: :unprocessable_entity }
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T08:50:51.537

您需要编写一个 rake 任务并通过 cron 调用该任务。

例如：

```
task :send_email => :environment do
  Dop.where('last_email <= ?', 7.days.ago).each do |dop|
    UserMailer.welcome_email(dop).deliver
    dop.update_attribute('last_email', Time.now)
  end
end 
```

现在设置您的机器 Cron 调度程序以每隔几分钟调用此 Rake 任务以自动发送电子邮件。

[Cron](http://en.wikipedia.org/wiki/Cron)是一个 Unix 调度程序，它以预定的时间间隔执行程序。

您需要使用以下命令编辑 crontab 文件`crontab -e`并输入以下内容：

```
*/5 * * * *  /bin/bash cd <path_to_your_app> && rake send_email 
```

`*/5 * * * *`说你每5分钟运行一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:00:23.260

寻找一个名为`whenever`

它完全符合您的要求。

# arrays - 将具有相同属性的对象分组

> ID：11203633
> 
> 赞同：4
> 
> 时间：2012-06-26T08:41:37.950
> 
> 标签：arrays, algorithm, list, language-agnostic

我有一些任意对象的列表，出于示例的目的，假设它们是`(integer, something-else)`成对的，但它们本质上可能是任何东西：

```
[(5, a), (3, c), (2, f), (3, a), (4, c), (1, d), (5, b), (5, d)] 
```

我想根据它们的属性之一对这些对象进行分组，以便共享所述属性的相同值的元素在结果列表中相邻。例如，上面的列表按整数值分组：

```
[(3, a), (3, c), (1, d), (4, c), (2, f), (5, b), (5, a), (5, d)] 
```

如您所见，不需要任何顺序，操作也不需要稳定。

* * *

天真的方法是对列表进行排序。这具有众所周知、经过充分测试和足够快的优点。

不过，我很好奇：是否有一种不涉及排序的算法，同时在复杂性（`O(n)`时间与`O(n)`空间**或** `O(n log n)`时间与`O(1)`空间）方面具有竞争力？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:48:58.223

最简单的方法就是使用哈希表。这将导致 O(n) 操作。

伪代码：

```
foreach (e in list)
  hashtable[e.key].append(e.value)

; then 'flatten'

var out = new list

foreach (kv in hashtable)
  foreach (v in kv.values)
    out.add( new kv(kv.key, v)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:58:08.130

考虑从整数数组中删除非唯一条目的问题。这个问题可以通过解决你的问题（在线性时间和恒定空间）来解决，所以你的问题不能比这更简单。

不幸的是，我找不到一个可以很好回答这个问题的好问题，但是这个问题肯定更普遍和众所周知，我相信你会证明这个问题的最佳解决方案。

# objective-c - IOS如何知道正在查看哪个viewController，因此需要调用viewWillAppear

> ID：11203637
> 
> 赞同：-3
> 
> 时间：2012-06-26T08:41:50.050
> 
> 标签：objective-c, xcode4, uiviewcontroller, viewwillappear

iOs是怎么知道的？

每个视图是否都有指向其控制器的指针？

发生了什么？

当我们从导航中弹出一个 viewController 时，navigationController 是否安排了应该调用哪个视图？

例如：

如果我添加：

```
 [[BNUtilitiesQuick window] addSubview:[BNUtilitiesQuick searchController].view]; 
```

viewWillAppear 将被调用。

即使在问题的情况下，ios 也知道应该调用哪个 viewControler viewwillappear。如果没有从视图到视图控制器的指针，我无法想象他们是如何知道的。

但是，window 不知道 viewController。我正在通过控制器的视图出口而不是控制器。iOs 5 怎么知道它必须调用 [[BNUtilitiesQuick searchController] viewWillAppear:YES]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:45:34.697

Navigation Controller 维护着一堆视图控制器。

一旦一个视图控制器被弹出，它就会从堆栈中移除，现在正好在它下面的视图控制器是第一个视图控制器。这就是它的工作原理。

您可以查看文档以获取更多详细信息 - [http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457)

[http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/NavigationControllers.html#//apple_ref/doc/uid/TP40011313-CH2](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/NavigationControllers.html#//apple_ref/doc/uid/TP40011313-CH2)

# sonarqube - 使用 Maven 将信息从 MKS 添加到 Sonar

> ID：11203639
> 
> 赞同：0
> 
> 时间：2012-06-26T08:42:07.130
> 
> 标签：sonarqube, maven-scm, mks, mks-integrity

根据来自 Sonar Webiste ( [http://docs.codehaus.org/display/SONAR/SCM+Activity+Plugin](http://docs.codehaus.org/display/SONAR/SCM+Activity+Plugin) ) 的 SCM Activity 插件信息，应该可以连接到 MKS。在 Maven 站点上，还存在 MKS 提供程序代码。

但是，当我在命令行中运行 mvn sonar:sonar 时，出现错误：

> [错误] 无法在项目 example-it-jacoco-maven 上执行目标 org.codehaus.mojo:sonar-maven-plugin:2.0:sonar (default-cli)：无法执行 Sonar：不支持的 SCM：[svn:integrity] . [在http://docs.codehaus.org/display/SONAR/SCM+Activity+Plugin](http://docs.codehaus.org/display/SONAR/SCM+Activity+Plugin)检查兼容性。请检查参数“sonar.scm.url”或Maven pom部分。-> [帮助 1]

我是否需要以某种方式导入提供程序（编码到 pom.xml 中？）或者我在 pom 中的代码有问题：

```
scm:svn:integrity|myuser@mkssvr1:7001|#/SonarScm/TestCode 
```

有人知道如何让它工作吗？

干杯，

克里斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T05:07:10.233

我相信正确的 URL 看起来像：scm:integrity|myuser@mkssvr1:7001|#/SonarScm/TestCode

# iphone - iOs5 中的“应用程序试图以模态方式呈现活动控制器”问题

> ID：11203640
> 
> 赞同：2
> 
> 时间：2012-06-26T08:42:09.747
> 
> 标签：iphone, ios5, navigation, apple-push-notifications, modalviewcontroller

在我的 iPhone 应用程序中，我有两个视图，分别是 VC1 和 VC2。在 VC1 中，我有一个按钮可以导航到 VC2。这是VC1中按钮动作的代码：

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
if (!appDelegate.vc2) {
    appDelegate.vc2 = [[VC2 alloc]initWithNibName:@"VC2" bundle:nil];
}
[self presentModalViewController:appDelegate.vc2 animated:NO]; 
```

（我必须在 VC2 中保留一些状态，这就是我在 appdelegate 文件中声明 VC2 的原因）

在 VC2 中，为了回去我使用`[self dismissModalViewControllerAnimated:NO];`

当我重复进入 VC2 并使用按钮操作返回的过程时，没有问题。但我也在我的应用程序中实现了推送通知。因此，当我收到推送时，我在推送通知警报视图的 Ok 按钮单击上发送 nsnotification，并且在 VC1 中编写的接收通知方法将接收事件，导航到 VC2。

我在接收通知方法中使用了与上面相同的代码来导航到 VC2。

我第二次尝试通过单击警报视图的 Ok 按钮导航到 VC2 时出现错误`Application tried to present modally an active controller`，并且仅在 iPhone 4S (iO5) 中出现此错误。但如果我使用 VC1 中的按钮操作重复它，它工作正常。

**编辑** 详细添加代码：

在 appdelegate 文件中，推送通知警报视图确定按钮的操作：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"VC1" object:nil]; 
```

并在 VC1 中收到通知时：

```
- (void)recieveNotification:(NSNotification *) notification{
        AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
        if (!appDelegate.menuVC) {
            appDelegate.menuVC = [[MenuScreenVC alloc]initWithNibName:@"MenuScreenVC" bundle:nil];
        }
        [self presentModalViewController:appDelegate.menuVC animated:NO];
} 
```

以及 VC1 中按钮的按钮操作：

```
- (IBAction)viewMenuScreen:(id)sender{

            AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
            if (!appDelegate.menuVC) {
                appDelegate.menuVC = [[MenuScreenVC alloc]initWithNibName:@"MenuScreenVC" bundle:nil];
            }
            [self presentModalViewController:appDelegate.menuVC animated:NO];
} 
```

在 VC2 中：

```
- (IBAction)backToVC1:(id)sender{
    [self dismissModalViewControllerAnimated:NO];
} 
```

# javascript - 动力学拖动文本

> ID：11203642
> 
> 赞同：1
> 
> 时间：2012-06-26T08:42:24.083
> 
> 标签：javascript, kineticjs

使用 Kinetic，是否可以在文本上设置鼠标悬停？下面的代码不起作用。如果用矩形替换文本，它工作正常。

```
...
var layer = new Kinetic.Layer();

var test = new Kinetic.Text({
    x: 20,
    y: 20,
    text: "test",
    textFill:"black"
});

test.on("mouseover", function(){
    alert("mouseover");
});

layer.add(test); 
```

谢谢您的帮助！

## 更新：

好的，我搜索了一下，似乎有必要使用像素检测。

[有关更多详细信息，请参阅本教程](http://www.html5canvastutorials.com/kineticjs/html5-canvas-pixel-detection-with-kineticjs/)

结果目前并不完美，但总比没有好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:03:49.437

我在处理类似的文本行为时遇到了麻烦，在深入了解存储库历史之后，我发现现在 Text 默认将 detectionType 设置为“像素”。

尝试更改您的 Text 声明，如下所示：

```
var test = new Kinetic.Text({
    x: 20,
    y: 20,
    text: "test",
    textFill: 'black',
    detectionType: 'path',
    draggable: true         
}); 
```

# php - PHP Imagick 扩展而不是命令/执行

> ID：11203645
> 
> 赞同：0
> 
> 时间：2012-06-26T08:42:41.943
> 
> 标签：php, imagemagick, imagick, dreamhost

使用 PHP GD 一段时间后，我决定转向 Imagemagick。在主机上运行的方式如下：

```
$command = "/usr/local/bin/convert $commands";
exec($command); 
```

有什么方法可以切换实现，以便我可以使用 php Imagick 扩展（这对我来说似乎更合乎逻辑）？

该网站由 Dreamhost 托管。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:40:07.240

我的网站上有很多带有 Imagemagick 示例的 php，并且已经开始使用一些 Imagick 示例。

如您所知，您可以通过 exec() 运行 Imagemagick，这是我这样做的方式，因为我认为它更简单，并且可以访问您的版本中包含的所有 Imagemagick 运算符。

php 5 中内置了 Imagick，它比 exec() 稍微快一些，但你会从其他帖子中看到它没有很好的文档记录并且很难学习。

我这样写我的代码，它的好处是回显 $cmd 并检查它是你在代码中使用变量时想要的。

```
$cmd = " $input -resize 500x500 $output ";
exec(" convert $cmd "); 
```

# jquery - 省略文本相似的元素，只保留一个与 jquery

> ID：11203648
> 
> 赞同：0
> 
> 时间：2012-06-26T08:43:04.313
> 
> 标签：jquery

我有一个这样的列表：

```
<ul>
   <li>
     <span>USA:</span> Newyork
     <span>USA:</span> Dallas
   </li>
   <li>
     <span>France:</span> Paris
     <span>France:</span> Lyon
     <span>France:</span> Toulouse
   </li>
</ul> 
```

编辑：我想要这个：

```
<ul>
   <li>
     <span>USA:</span> 
        Newyork
        Dallas
   </li>
   <li>
     <span>France:</span> 
        Paris
        Lyon
        Toulouse
   </li>
</ul> 
```

我只想留下一个`USA`，`France`并在国家下面列出他们的城市。我怎么能用 jQuery 做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:58:29.663

像这样的东西应该可以解决问题。

```
$('ul li').each(function(){

    $(this).find('span').filter('span:not(:first)').remove();

}); 
```

希望有帮助:)

（但请记住，您不会有任何换行符，当页面实际在浏览器中呈现时，它看起来会有点紧凑。）

# jquery - 使用 css 禁用 jquery chechbox - 有什么问题？

> ID：11203649
> 
> 赞同：0
> 
> 时间：2012-06-26T08:43:12.990
> 
> 标签：jquery, css

我有一段工作代码：

```
"zoomend": function(node) {
   if (map.getZoom() >= 8) {
      $(".dynatree-checkbox").css("disabled", "disabled"); // line 3
   }
} 
```

`$(".dynatree-checkbox")`复选框在哪里。我正在尝试在第 3 行中使用 css，但之后不会禁用复选框。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:46:52.793

`disabled`用作元素属性/属性而不是 CSS 属性。

相反，您可以使用：

```
$(".dynatree-checkbox").prop("disabled", true); 
```

见：http: [//jsfiddle.net/eDCKA/6/](http://jsfiddle.net/eDCKA/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:15:45.937

嘿，你在 css 中禁用了复选框，而不是你为什么使用 jquery

像这样

```
<INPUT TYPE="checkbox" disabled>  // disabled check box

<INPUT TYPE="checkbox" enabled> // enabled check box 
```

现场演示[http://jsfiddle.net/MrzAS/](http://jsfiddle.net/MrzAS/)

# android - html字符串中字体大小的单位是什么？

> ID：11203658
> 
> 赞同：2
> 
> 时间：2012-06-26T08:43:30.540
> 
> 标签：android, string

如果我在其中使用`<font size='5'>abc</font>`标签`strings.xml`并将其呈现为 Html 稍后使用`Html.fromHtml()`，“abc”的字体大小单位是多少？是 5 px 还是 5 sp？如何声明它使用`sp`？`sp`字体标签是否支持？我打算像这样处理它`<font size='5sp'>abc</font>`。它会起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:15:35.623

该`size`属性将在几个 android 版本上被忽略，您应该避免它。

相反，使用`<h1>`, `<h2>`, ... 标签来增加文本大小 :`<h1>abc</h1>`或`<small>abc</small>`使文本更小。它不是很灵活，但`Html.fromHtml()`也不是真正的 HTML 解析器，只能处理非常有限的一组标签。

# python - 调用l subprocess.popen后python中线程锁的状态是什么

> ID：11203661
> 
> 赞同：0
> 
> 时间：2012-06-26T08:43:40.297
> 
> 标签：python, multithreading, multiprocessing

痛苦地解决了多线程程序在打开文件和在一个线程中设置'close on exec'位和在另一个线程中调用 subprocess.Popen 之间存在竞争风险 - 这可能导致意外的句柄被传递给第二个孩子，在我看来，我需要用锁来保护这种访问（我知道可以从 subprocess.Popen 关闭所有句柄，但这可能有点过头了）。

那会安全吗？子进程将立即执行一个 shell，但我不确定 python 线程锁在这种情况下是如何表现的。

PS我知道linux有一个'close on exec'位用于打开，但我没有在linux上运行，无论如何，python tempfile（或至少是2.6）不使用该设施。

当然，理想情况下，python 会自己处理这种讨厌的事情，但我找不到任何暗示它可能的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:04:10.067

听起来很安全。如果你这样做

```
with my_exec_lock:
    open_file()
    set_coe() 
```

在一个线程中和

```
with my_exec_lock:
    popen() 
```

另一方面，你应该是安全的。

但请注意，这样一来，第一个线程可能会被阻塞，直到`popen()`完成。

也许其他[`Threading`](http://docs.python.org/library/threading.html)机制之一可能更合适。

# java - AlertDialog：显示对话框后，后台 Canvas 渲染继续，但对话框永远不会关闭

> ID：11203662
> 
> 赞同：1
> 
> 时间：2012-06-26T08:43:43.160
> 
> 标签：java, android, android-alertdialog, android-canvas, looper

这是我的 AlertDialog 无响应状态的屏幕截图：

![来自 DDMS 的屏幕截图显示对话框无响应，但渲染线程继续运行。](../Images/264d150ba39be1057d1ac0d692720524.png)

在背景中，绿色瓷砖，黑白目标内的红球，所有三个位图都在渲染线程上连续渲染，该渲染线程锁定/解锁我手机上的背景画布。无论我在 EditText 中输入了什么文本，当我按下 OK 按钮时，总是会执行这个无响应的操作。

这是代码：

**PlayActivity 类：**

```
package nttu.edu.activities;

import nttu.edu.graphics.RenderView;
import nttu.edu.handler.Accelero;
import nttu.edu.handler.TouchHandler;
import nttu.edu.score.Score;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.content.res.AssetManager;
import android.os.Bundle;
import android.os.Handler;
import android.os.Looper;
import android.os.Message;
import android.util.Log;
import android.view.Window;
import android.view.WindowManager;
import android.widget.EditText;

public class PlayActivity extends Activity implements OnClickListener
{
    public RenderView renderView = null;
    public Accelero accelerometer = null;
    public AssetManager assetManager = null;
    public TouchHandler touchHandler = null;
    public Score leaderboard = null;
    final int REQUEST_CODE = 0x1;

    private EditText input = null;
    private AlertDialog.Builder dialog = null;

    public void onCreate(Bundle b)
    {
        super.onCreate(b);
        accelerometer = new Accelero();
        touchHandler = new TouchHandler();
        leaderboard = new Score(this);
        renderView = new RenderView(this, accelerometer, touchHandler);
        renderView.setOnTouchListener(touchHandler);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        input = new EditText(this);
        dialog = new AlertDialog.Builder(this);
        dialog.setTitle("Enter High Score!");
        dialog.setMessage("Enter your name: ");
        dialog.setView(input);
        dialog.setPositiveButton("OK", PlayActivity.this);
        setContentView(renderView);
    }

    public void onResume()
    {
        super.onResume();
        if(renderView != null)
            renderView.resume();
        if(accelerometer != null)
            accelerometer.resume(this);
    }

    public void onPause()
    {
        super.onPause();
        if(renderView != null)
            renderView.pause();
        if(accelerometer != null)
            accelerometer.pause();
    }

    public void addPlayer()
    {
        // FIXME: The dialog won't exit.

        Looper.prepare();
        dialog.show();
        Looper.loop();
    }

    public void onClick(DialogInterface dialog, int button)
    {
        String name = input.getText().toString();
        if(name == null)
            name = "Player";
        this.leaderboard.open();
        this.leaderboard.createEntry(name, this.renderView.getScore());
        this.leaderboard.close();
        if (Looper.myLooper() != null)
            Looper.myLooper().quit();
        else if (Looper.getMainLooper() != null)
            Looper.getMainLooper().quit();
        Log.d("PlayActivity.onClick()", "I'm escaping from Looper.loop()"); 
        //renderView.running = false;
        //PlayActivity.this.finish();

    }
} 
```

由于某些未知原因，AlertDialog 仅在调用 AlertDialog.show() 之前存在准备好的 Looper 时才会执行。

**问题是在调用 AlertDialog.show() 之后，在调用 Looper.quit() 之后，AlertDialog 不知何故没有退出，这使得手机无响应。**

当我在 onClick() 方法中调用 PlayActivity.this.finish() 时，我可以退出对话框，停止后台渲染，然后返回主菜单（这是我想要的），但是 Eclipse DDMS 报告了这个：

```
06-26 16:40:29.049: E/WindowManager(1642):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
06-26 16:40:29.049: E/WindowManager(1642):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
06-26 16:40:29.049: E/WindowManager(1642):  at android.view.Window$LocalWindowManager.addView(Window.java:433)
06-26 16:40:29.049: E/WindowManager(1642):  at android.app.Dialog.show(Dialog.java:265)
06-26 16:40:29.049: E/WindowManager(1642):  at android.app.AlertDialog$Builder.show(AlertDialog.java:802)
06-26 16:40:29.049: E/WindowManager(1642):  at nttu.edu.activities.PlayActivity.addPlayer(PlayActivity.java:77)
06-26 16:40:29.049: E/WindowManager(1642):  at nttu.edu.graphics.RenderView.tick(RenderView.java:119)
06-26 16:40:29.049: E/WindowManager(1642):  at nttu.edu.graphics.RenderView.run(RenderView.java:69)
06-26 16:40:29.049: E/WindowManager(1642):  at java.lang.Thread.run(Thread.java:1027)
06-26 16:40:29.079: W/MessageQueue(1642): Handler{405399b8} sending message to a Handler on a dead thread
06-26 16:40:29.079: W/MessageQueue(1642): java.lang.RuntimeException: Handler{405399b8} sending message to a Handler on a dead thread
06-26 16:40:29.079: W/MessageQueue(1642):   at android.os.MessageQueue.enqueueMessage(MessageQueue.java:196) 
```

简而言之，当我想通过调用 finish() 退出 PlayActivity 时，AlertDialog 会泄漏。我不知道还能做些什么来解决这个问题。

请帮我。谢谢！如果您需要更多源代码，请告诉我。

编辑：

就在泄漏错误出现之前，这是 DDMS 记录的内容：

```
06-26 16:40:22.182: D/Level.render()(1642): Drawing Tee.
06-26 16:40:22.182: D/Level.render()(1642): Drawing Hole.
06-26 16:40:22.182: D/Level.render()(1642): Drawing Ball.
06-26 16:40:22.192: D/Level.render()(1642): Drawing background.
06-26 16:40:22.202: D/Level.render()(1642): Drawing Tee.
06-26 16:40:22.202: D/Level.render()(1642): Drawing Hole.
06-26 16:40:22.202: D/Level.render()(1642): Drawing Ball.
06-26 16:40:22.212: D/Level.render()(1642): Drawing background.
06-26 16:40:22.212: D/Level.render()(1642): Drawing Tee.
06-26 16:40:22.222: D/Level.render()(1642): Drawing Hole.
06-26 16:40:22.222: D/Level.render()(1642): Drawing Ball.
06-26 16:40:22.222: D/FrameRate(1642): 59
06-26 16:40:22.232: D/Level.tick()(1642): Obtaining score.
06-26 16:40:22.232: D/Level.render()(1642): Drawing background.
06-26 16:40:22.232: D/Level.render()(1642): Drawing Tee.
06-26 16:40:22.242: D/Level.render()(1642): Drawing Hole.
06-26 16:40:22.242: D/Level.render()(1642): Drawing Ball.
06-26 16:40:22.242: D/Level.render()(1642): Outputting the phrase: Game Over
06-26 16:40:23.713: D/Database(1642): dbopen(): path = /data/data/nttu.edu/databases/Scoreboard, flag = 6, file size = 5120
06-26 16:40:23.713: D/Database(1642): dbopen(): path = /data/data/nttu.edu/databases/Scoreboard, mode: wal, disk free size: 1014 M, handle: 0x38b4a8
06-26 16:40:23.844: D/Database(1642): dbclose(): path = /data/data/nttu.edu/databases/Scoreboard, handle = 0x38b4a8
06-26 16:40:28.608: D/PlayActivity.onClick()(1642): I'm escaping from Looper.loop()
06-26 16:40:28.618: D/Level.render()(1642): Drawing background.
06-26 16:40:28.628: D/Level.render()(1642): Drawing Tee.
06-26 16:40:28.628: D/Level.render()(1642): Drawing Hole.
06-26 16:40:28.628: D/Level.render()(1642): Drawing Ball.
06-26 16:40:28.628: D/Level.render()(1642): Outputting the phrase: Game Over
06-26 16:40:28.648: D/FrameRate(1642): 2
06-26 16:40:28.798: W/MessageQueue(1642): Handler{4053dbd0} sending message to a Handler on a dead thread
06-26 16:40:28.798: W/MessageQueue(1642): java.lang.RuntimeException: Handler{4053dbd0} sending message to a Handler on a dead thread
06-26 16:40:28.798: W/MessageQueue(1642):   at android.os.MessageQueue.enqueueMessage(MessageQueue.java:196)
06-26 16:40:28.798: W/MessageQueue(1642):   at android.os.Handler.sendMessageAtTime(Handler.java:457)
06-26 16:40:28.798: W/MessageQueue(1642):   at android.os.Handler.sendMessageDelayed(Handler.java:430)
06-26 16:40:28.798: W/MessageQueue(1642):   at android.os.Handler.sendMessage(Handler.java:367)
06-26 16:40:28.798: W/MessageQueue(1642):   at com.android.internal.view.IInputConnectionWrapper.dispatchMessage(IInputConnectionWrapper.java:240)
06-26 16:40:28.798: W/MessageQueue(1642):   at com.android.internal.view.IInputConnectionWrapper.finishComposingText(IInputConnectionWrapper.java:151)
06-26 16:40:28.798: W/MessageQueue(1642):   at com.android.internal.view.IInputContext$Stub.onTransact(IInputContext.java:137)
06-26 16:40:28.798: W/MessageQueue(1642):   at android.os.Binder.execTransact(Binder.java:320)
06-26 16:40:28.798: W/MessageQueue(1642):   at dalvik.system.NativeStart.run(Native Method)
06-26 16:40:28.888: W/MessageQueue(1642): Handler{405399b8} sending message to a Handler on a dead thread
06-26 16:40:28.888: W/MessageQueue(1642): java.lang.RuntimeException: Handler{405399b8} sending message to a Handler on a dead thread
06-26 16:40:28.888: W/MessageQueue(1642):   at android.os.MessageQueue.enqueueMessage(MessageQueue.java:196)
06-26 16:40:28.888: W/MessageQueue(1642):   at android.os.Handler.sendMessageAtTime(Handler.java:457)
06-26 16:40:28.888: W/MessageQueue(1642):   at android.os.Handler.sendMessageDelayed(Handler.java:430) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:51:26.153

您应该检测应用程序最终会进入和使用的所有地方`Dialog.dismiss()`

# flex4 - 使用源代码或仅使用 asdoc 编译 swc

> ID：11203665
> 
> 赞同：0
> 
> 时间：2012-06-26T08:43:48.730
> 
> 标签：flex4, flash-builder, swc, asdoc

如何在*Flash Builder 4.6中使用文档 (* **asdoc** ) 和源代码编译 swc-library ？如果我编译*Flex-application*我可以设置 check *compile with sources*，但对于*库项目*我没有这个选项。

 ***flex 编译器是否有一些选项，可以添加到 asdoc 文档中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T18:13:29.270

当您创建库项目时，您将右键单击要添加的源文件，然后单击“在库中包含类”。然后您可以导出一个 swc，您选择的所有文件都将被编译到其中。***

# android - 拍照时出错

> ID：11203666
> 
> 赞同：2
> 
> 时间：2012-06-26T08:44:01.160
> 
> 标签：android

我正在编写一个必须拍照并将其发送到 Web 服务的应用程序。有我用来的代码：

```
i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
outputFileUri = Uri.fromFile(new File(Environment.getExternalStorageDirectory()+"/appicture.jpg"));
Log.i("URI", outputFileUri.toString());
i.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
startActivityForResult(i, cameraData); 
```

URI 看起来像：

> 文件：///sdcard/appicture.jpg

但是，如果我将“outputFileUri”变量放在 i.putExtra 中，我的应用程序就会退出。如果没有，我可以拍照，但无法获取她的 URI，然后无法将其发送到我的网络服务。

编辑 1：错误日志（关于活动 resylt）

> 06-26 09:17:46.108: I/Cam 错误 (699): java.lang.NullPointerException

编辑 2：如果我删除“outputFileUri”，我正确地得到了图像。但是，然后我无法将位图转换为文件以便能够发送它。

```
if(resultCode == RESULT_OK){

            Bundle extras = data.getExtras();
            _bmp = (Bitmap) extras.get("data"); 

        } 
```

编辑 3：

问题来自

> _bmp = (Bitmap) extras.get("data");

并且图片已正确保存在 SD 卡中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T08:46:21.820

在 Manifest 中添加**WRITE_EXTERNAL_STORAGE**权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

**编辑：** 如果您在 Intent 中传递 Image Uri 以捕获图像，则获取图像，如下所示`onActiityResult`：

```
@Override  
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {    
        if (requestCode == cameraData) {  
            File picture = new File(Environment.getExternalStorageDirectory() + "/appicture.jpg"); 
            Uri imguri=Uri.fromFile(picture);
            }
        super.onActivityResult(requestCode, resultCode, data);  
    } 
```

如果您想将图像作为数据获取，`onActiityResult`则将 Camra 启动为：

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);  
startActivityForResult(intent, cameraData); 
```

在 onActivityResult 中：

```
 onActivityResult(int requestCode, int resultCode, Intent data) {  
        if (requestCode == 1) {  
            if (resultCode == cameraData) {  
                Bundle extras = data.getExtras();
                _bmp = (Bitmap) extras.get("data"); //Get data here

            }  
        }  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:47:25.017

请将此添加到清单文件中

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission> 
```

快乐编码..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T08:59:25.093

如果您已经添加了权限并且路径正确。您能否尝试在路径末尾删除“.jpg”

# php - 阻止用户使用空格注册用户名

> ID：11203668
> 
> 赞同：0
> 
> 时间：2012-06-26T08:44:06.687
> 
> 标签：php, mysql, html

我遇到了一个错误，我的注册是允许用户注册带有空格的用户名，即“用户名”，而它应该只是没有空格的“用户名”。

我已经尝试搜索和阅读许多教程，但大多数都对我没有帮助。

谁能指出我正确的工作教程方向，或者告诉我我做错了什么。

注册页面

```
<?
session_start();
include("config.php");
include("clean.php");
$act = clean($_GET[act]); 
$sqlcontent = mysql_query("select * from usr_config");
$content = mysql_fetch_array($sqlcontent);
$rand = rand(0,999);
?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" href="css.css" type="text/css" />
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Usersystem Register Page &bull; <? echo("$content[site]");?></title>
</head>

<body>
    <tr>
      <? if($content[regen]==1) { 
      if($act!=register)
      { ?>
      <form action="register_new.php?act=register" method="post">
        <div align="center">Username:<br />
            <input type="text" name="username" class="login" maxlength="20" />
          <br />
          <br />
          Password:<br />
          <input type="password" name="password" />
          <br />
          <br />
          Email Address:<br />
          <input type="text" name="email" />
          <br />
          <br />
    Country:<br />
        <SELECT name="countrywhere">
    <option value="Afghanistan">Afghanistan</option>
    <option value="&#197;land&nbsp;Islands">&#197;land Islands</option>
    <option value="Albania">Albania</option>
    <option value="Algeria">Algeria</option>
    <option value="American&nbsp;Samoa">American Samoa</option>
    <option value="Andorra">Andorra</option>
    <option value="Angola">Angola</option>
    <option value="Anguilla">Anguilla</option>
    <option value="Antarctica">Antarctica</option>
    <option value="Antigua&nbsp;and&nbsp;Barbuda">Antigua and Barbuda</option>
    <option value="Argentina">Argentina</option>
    <option value="Armenia">Armenia</option>
    <option value="Aruba">Aruba</option>
    <option value="Australia">Australia</option>
    <option value="Austria">Austria</option>
    <option value="Azerbaijan">Azerbaijan</option>
    <option value="Bahamas">Bahamas</option>
    <option value="Bahrain">Bahrain</option>
    <option value="Bangladesh">Bangladesh</option>
    <option value="Barbados">Barbados</option>
    <option value="Belarus">Belarus</option>
    <option value="Belgium">Belgium</option>
    <option value="Belize">Belize</option>
    <option value="Benin">Benin</option>
    <option value="Bermuda">Bermuda</option>
    <option value="Bhutan">Bhutan</option>
    <option value="Bolivia">Bolivia</option>
    <option value="Bosnia&nbsp;and&nbsp;Herzegovina">Bosnia and Herzegovina</option>
    <option value="Botswana">Botswana</option>
    <option value="Bouvet&nbsp;Island">Bouvet Island</option>
    <option value="Brazil">Brazil</option>
    <option value="British&nbsp;Indian&nbsp;Ocean&nbsp;Territory">British Indian Ocean Territory</option>
    <option value="Brunei&nbsp;Darussalam">Brunei Darussalam</option>
    <option value="Bulgaria">Bulgaria</option>
    <option value="Burkina&nbsp;Faso">Burkina Faso</option>
    <option value="Burundi">Burundi</option>
    <option value="Cambodia">Cambodia</option>
    <option value="Cameroon">Cameroon</option>
    <option value="Canada">Canada</option>
    <option value="Cape&nbsp;Verde">Cape Verde</option>
    <option value="Cayman&nbsp;Islands">Cayman Islands</option>
    <option value="Central&nbsp;African&nbsp;Republic">Central African Republic</option>
    <option value="Chad">Chad</option>
    <option value="Chile">Chile</option>
    <option value="China">China</option>
    <option value="Christmas&nbsp;Island">Christmas Island</option>
    <option value="Cocos&nbsp;(Keeling)&nbsp;Islands">Cocos (Keeling) Islands</option>
    <option value="Colombia">Colombia</option>
    <option value="Comoros">Comoros</option>
    <option value="Congo">Congo</option>
    <option value="Congo,&nbsp;The&nbsp;Democratic&nbsp;Republic&nbsp;of&nbsp;the">Congo, The Democratic Republic of the</option>
    <option value="Cook&nbsp;Islands">Cook Islands</option>
    <option value="Costa&nbsp;Rica">Costa Rica</option>
    <option value="C&#244;te&nbsp;d'Ivoire">C&#244;te d'Ivoire</option>
    <option value="Croatia">Croatia</option>
    <option value="Cuba">Cuba</option>
    <option value="Cyprus">Cyprus</option>
    <option value="Czech&nbsp;Republic">Czech Republic</option>
    <option value="Denmark">Denmark</option>
    <option value="Djibouti">Djibouti</option>
    <option value="Dominica">Dominica</option>
    <option value="Dominican&nbsp;Republic">Dominican Republic</option>
    <option value="Ecuador">Ecuador</option>
    <option value="Egypt">Egypt</option>
    <option value="El&nbsp;Salvador">El Salvador</option>
    <option value="Equatorial&nbsp;Guinea">Equatorial Guinea</option>
    <option value="Eritrea">Eritrea</option>
    <option value="Estonia">Estonia</option>
    <option value="Ethiopia">Ethiopia</option>
    <option value="Falkland&nbsp;Islands&nbsp;(Malvinas)">Falkland Islands (Malvinas)</option>
    <option value="Faroe&nbsp;Islands">Faroe Islands</option>
    <option value="Fiji">Fiji</option>
    <option value="Finland">Finland</option>
    <option value="France">France</option>
    <option value="French&nbsp;Guiana">French Guiana</option>
    <option value="French&nbsp;Polynesia">French Polynesia</option>
    <option value="French&nbsp;Southern&nbsp;Territories">French Southern Territories</option>
    <option value="Gabon">Gabon</option>
    <option value="Gambia">Gambia</option>
    <option value="Georgia">Georgia</option>
    <option value="Germany">Germany</option>
    <option value="Ghana">Ghana</option>
    <option value="Gibraltar">Gibraltar</option>
    <option value="Greece">Greece</option>
    <option value="Greenland">Greenland</option>
    <option value="Grenada">Grenada</option>
    <option value="Guadeloupe">Guadeloupe</option>
    <option value="Guam">Guam</option>
    <option value="Guatemala">Guatemala</option>
    <option value="Guinea">Guinea</option>
    <option value="Guinea-Bissau">Guinea-Bissau</option>
    <option value="Guyana">Guyana</option>
    <option value="Haiti">Haiti</option>
    <option value="Heard&nbsp;Island&nbsp;and&nbsp;McDonald&nbsp;Islands">Heard Island and McDonald Islands</option>
    <option value="Holy&nbsp;See&nbsp;(Vatican&nbsp;City&nbsp;State)">Holy See (Vatican City State)</option>
    <option value="Honduras">Honduras</option>
    <option value="Hong&nbsp;Kong">Hong Kong</option>
    <option value="Hungary">Hungary</option>
    <option value="Iceland">Iceland</option>
    <option value="India">India</option>
    <option value="Indonesia">Indonesia</option>
    <option value="Iran,&nbsp;Islamic&nbsp;Republic&nbsp;of">Iran, Islamic Republic of</option>
    <option value="Iraq">Iraq</option>
    <option value="Ireland">Ireland</option>
    <option value="Israel">Israel</option>
    <option value="Italy">Italy</option>
    <option value="Jamaica">Jamaica</option>
    <option value="Japan">Japan</option>
    <option value="Jordan">Jordan</option>
    <option value="Kazakhstan">Kazakhstan</option>
    <option value="Kenya">Kenya</option>
    <option value="Kiribati">Kiribati</option>
    <option value="Korea,&nbsp;Democratic&nbsp;People's&nbsp;Republic&nbsp;of">Korea, Democratic People's Republic of</option>
    <option value="Korea,&nbsp;Republic&nbsp;of">Korea, Republic of</option>
    <option value="Kuwait">Kuwait</option>
    <option value="Kyrgyzstan">Kyrgyzstan</option>
    <option value="Lao&nbsp;People's&nbsp;Democratic&nbsp;Republic">Lao People's Democratic Republic</option>
    <option value="Latvia">Latvia</option>
    <option value="Lebanon">Lebanon</option>
    <option value="Lesotho">Lesotho</option>
    <option value="Liberia">Liberia</option>
    <option value="Libyan&nbsp;Arab&nbsp;Jamahiriya">Libyan Arab Jamahiriya</option>
    <option value="Liechtenstein">Liechtenstein</option>
    <option value="Lithuania">Lithuania</option>
    <option value="Luxembourg">Luxembourg</option>
    <option value="Macau">Macau</option>
    <option value="Macedonia">Macedonia</option>
    <option value="Madagascar">Madagascar</option>
    <option value="Malawi">Malawi</option>
    <option value="Malaysia">Malaysia</option>
    <option value="Maldives">Maldives</option>
    <option value="Mali">Mali</option>
    <option value="Malta">Malta</option>
    <option value="Marshall&nbsp;Islands">Marshall Islands</option>
    <option value="Martinique">Martinique</option>
    <option value="Mauritania">Mauritania</option>
    <option value="Mauritius">Mauritius</option>
    <option value="Mayotte">Mayotte</option>
    <option value="Mexico">Mexico</option>
    <option value="Micronesia,&nbsp;Federated&nbsp;States&nbsp;of">Micronesia, Federated States of</option>
    <option value="Moldova,&nbsp;Republic&nbsp;of">Moldova, Republic of</option>
    <option value="Monaco">Monaco</option>
    <option value="Mongolia">Mongolia</option>
    <option value="Montserrat">Montserrat</option>
    <option value="Morocco">Morocco</option>
    <option value="Mozambique">Mozambique</option>
    <option value="Myanmar">Myanmar</option>
    <option value="Namibia">Namibia</option>
    <option value="Nauru">Nauru</option>
    <option value="Nepal">Nepal</option>
    <option value="Netherlands">Netherlands</option>
    <option value="Netherlands&nbsp;Antilles">Netherlands Antilles</option>
    <option value="New&nbsp;Caledonia">New Caledonia</option>
    <option value="New&nbsp;Zealand">New Zealand</option>
    <option value="Nicaragua">Nicaragua</option>
    <option value="Niger">Niger</option>
    <option value="Nigeria">Nigeria</option>
    <option value="Niue">Niue</option>
    <option value="Norfolk&nbsp;Island">Norfolk Island</option>
    <option value="Northern&nbsp;Mariana&nbsp;Islands">Northern Mariana Islands</option>
    <option value="Norway">Norway</option>
    <option value="Oman">Oman</option>
    <option value="Pakistan">Pakistan</option>
    <option value="Palau">Palau</option>
    <option value="Palestinian&nbsp;Territory,&nbsp;Occupied">Palestinian Territory, Occupied</option>
    <option value="Panama">Panama</option>
    <option value="Papua&nbsp;New&nbsp;Guinea">Papua New Guinea</option>
    <option value="Paraguay">Paraguay</option>
    <option value="Peru">Peru</option>
    <option value="Philippines">Philippines</option>
    <option value="Pitcairn">Pitcairn</option>
    <option value="Poland">Poland</option>
    <option value="Portugal">Portugal</option>
    <option value="Puerto&nbsp;Rico">Puerto Rico</option>
    <option value="Qatar">Qatar</option>
    <option value="R&#233;union">R&#233;union</option>
    <option value="Romania">Romania</option>
    <option value="Russian&nbsp;Federation">Russian Federation</option>
    <option value="Rwanda">Rwanda</option>
    <option value="Saint&nbsp;Helena">Saint Helena</option>
    <option value="Saint&nbsp;Kitts&nbsp;and&nbsp;Nevis">Saint Kitts and Nevis</option>
    <option value="Saint&nbsp;Lucia">Saint Lucia</option>
    <option value="Saint&nbsp;Pierre&nbsp;and&nbsp;Miquelon">Saint Pierre and Miquelon</option>
    <option value="Saint&nbsp;Vincent&nbsp;and&nbsp;the&nbsp;Grenadines">Saint Vincent and the Grenadines</option>
    <option value="Samoa">Samoa</option>
    <option value="San&nbsp;Marino">San Marino</option>
    <option value="Sao&nbsp;Tome&nbsp;and&nbsp;Principe">Sao Tome and Principe</option>
    <option value="Saudi&nbsp;Arabia">Saudi Arabia</option>
    <option value="Senegal">Senegal</option>
    <option value="Serbia&nbsp;and&nbsp;Montenegro">Serbia and Montenegro</option>
    <option value="Seychelles">Seychelles</option>
    <option value="Sierra&nbsp;Leone">Sierra Leone</option>
    <option value="Singapore">Singapore</option>
    <option value="Slovakia">Slovakia</option>
    <option value="Slovenia">Slovenia</option>
    <option value="Solomon&nbsp;Islands">Solomon Islands</option>
    <option value="Somalia">Somalia</option>
    <option value="South&nbsp;Africa">South Africa</option>
    <option value="Spain">Spain</option>
    <option value="Sri&nbsp;Lanka">Sri Lanka</option>
    <option value="Sudan">Sudan</option>
    <option value="Suriname">Suriname</option>
    <option value="Svalbard&nbsp;and&nbsp;Jan&nbsp;Mayen">Svalbard and Jan Mayen</option>
    <option value="Swaziland">Swaziland</option>
    <option value="Sweden">Sweden</option>
    <option value="Switzerland">Switzerland</option>
    <option value="Syrian&nbsp;Arab&nbsp;Republic">Syrian Arab Republic</option>
    <option value="Taiwan,&nbsp;Province&nbsp;of&nbsp;China">Taiwan, Province of China</option>
    <option value="Tajikistan">Tajikistan</option>
    <option value="Tanzania,&nbsp;United&nbsp;Republic&nbsp;of">Tanzania, United Republic of</option>
    <option value="Thailand">Thailand</option>
    <option value="Timor-Leste">Timor-Leste</option>
    <option value="Togo">Togo</option>
    <option value="Tokelau">Tokelau</option>
    <option value="Tonga">Tonga</option>
    <option value="Trinidad&nbsp;and&nbsp;Tobago">Trinidad and Tobago</option>
    <option value="Tunisia">Tunisia</option>
    <option value="Turkey">Turkey</option>
    <option value="Turkmenistan">Turkmenistan</option>
    <option value="Turks&nbsp;and&nbsp;Caicos&nbsp;Islands">Turks and Caicos Islands</option>
    <option value="Tuvalu">Tuvalu</option>
    <option value="Uganda">Uganda</option>
    <option value="Ukraine">Ukraine</option>
    <option value="United&nbsp;Arab&nbsp;Emirates">United Arab Emirates</option>
    <option value="United&nbsp;Kingdom">United Kingdom</option>
    <option value="United&nbsp;States">United States</option>
    <option value="United&nbsp;States&nbsp;Minor&nbsp;Outlying&nbsp;Islands">United States Minor Outlying Islands</option>
    <option value="Uruguay">Uruguay</option>
    <option value="Uzbekistan">Uzbekistan</option>
    <option value="Vanuatu">Vanuatu</option>
    <option value="Venezuela">Venezuela</option>
    <option value="Viet&nbsp;Nam">Viet Nam</option>
    <option value="Virgin&nbsp;Islands,&nbsp;British">Virgin Islands, British</option>
    <option value="Virgin&nbsp;Islands,&nbsp;U.S.">Virgin Islands, U.S.</option>
    <option value="Wallis&nbsp;and&nbsp;Futuna">Wallis and Futuna</option>
    <option value="Western&nbsp;Sahara">Western Sahara</option>
    <option value="Yemen">Yemen</option>
    <option value="Zambia">Zambia</option>
    <option value="Zimbabwe">Zimbabwe</option>
        </SELECT>
          <br />
          <br />
          Username Colour:<br />
          <select name="usercolour">
        <OPTION value="#000000">Black</OPTION>
        <OPTION value="#FF0000">Red</OPTION>
        <OPTION value="#00FF00">Green</OPTION>
        <OPTION value="#0000FF">Blue</OPTION>
        <OPTION value="#FFFF00">Yellow</OPTION>
        <OPTION value="#FF00FF">Pink</OPTION>
        <OPTION value="#C0C0C0">Grey</OPTION>
        <OPTION value="#FF6600">Orange</OPTION>
        <OPTION value="#990066">Purple</OPTION>
        <OPTION value="#4682B4">Steelblue</OPTION>
        <OPTION value="#DDA0DD">Plum</OPTION>
        <OPTION value="#AFEEEE">Paleturquoise</OPTION>
        <OPTION value="#D87093">Palevioletred</OPTION>
        <OPTION value="#191970">Midnightblue</OPTION>
        <OPTION value="#8A2BE2">Blue Violet</OPTION>
        <OPTION value="#7FFF00">Chartreuse</OPTION>
        <OPTION value="#DC143C">Crimson</OPTION>
        <OPTION value="#008B8B">Dark Cyan</OPTION>
        <OPTION value="#8B0000">Dark Red</OPTION>
        <OPTION value="#FF1493">Deep Pink</OPTION>
          </select>
          <br />
          <br />
          Gender:<br />
         <SELECT name="sexmalefemale">
         <OPTION value="Boy">Boy</OPTION>
         <OPTION value="Girl">Girl</OPTION>
         </SELECT>
          <br />
          <br />
    About Yourself:<br />
        <textarea name="abouturself" cols=30 rows=5 wrap=physical></textarea>
          <br />
          <br />
          <input type="hidden" name="random" value="<? echo("$rand");?>" />
          Special word<br />
          <input type="text" name="word" />
          <input type="hidden" name="dateofjoin" value="<? print(Date("F d, Y")); ?>" />
          <input type="hidden" name="msg" value="Welcome" />
          <br />
          <br />
          Enter the number shown below<br />
          <strong><? echo("$rand");?></strong><br />
          <input type="text" name="rand" />
    <input type="hidden" name="lastedited" value="Registered an account @ <?php 

/** 
 * Just add this in your page where you 
 * want the date/time to appear 
 * 
 * For more configuration options look 
 * in the PHP manual at http://uk2.php.net/date 
 */ 

// Displays in the format Saturday, November 22, 2003 11.38 
echo date("l, F d, Y h:i" ,time()); 

?> " />
          <br />
          <br />
          <input type="submit" value="Register" />
            </div>
      </form>
      <? 
      }
      if($act==register)
      {
      $username = clean($_POST[username]);
          $msg = clean($_POST[msg]);
          $subject = "Welcome";
          $sendto = $username;
          $sentfrom = "admin";
          $user = "$username";
          $reason = "joining the site";
          $badge = "member.png";
          $display = "1";
          $privmsg = $msg;
      $password2 = clean($_POST[password]);
      $password = md5($_POST[password]);
      $email = clean($_POST[email]);
      $countrywhere = clean($_POST[countrywhere]);
      $avator = clean($_POST[avator]);
      $sexmalefemale = clean($_POST[sexmalefemale]);
      $usercolour = clean($_POST[usercolour]);
      $abouturself = clean($_POST[abouturself]);
      $rand = clean($_POST[rand]);
      $lastedited = clean($_POST[lastedited]);
      $random = $_POST[random];
      $word = clean($_POST[word]);
      $dateofjoin = clean($_POST[dateofjoin]);
      $check = mysql_query("select * from usr_users where username = '$username'");
      $check2 = mysql_num_rows($check);
      if($check2==0)
      {
      if($username!="" && $password!="")
      {
      if($rand==$random)
      {
          $qry = mysql_query("insert into usr_pm(subject, sendto, sentfrom, privmsg) values('$subject', '$sendto', '$sentfrom', '$privmsg')");
          $result = @mysql_query($qry);
      $gry2 = mysql_query("insert into usr_users(username, password, word, dateofjoin, email, countrywhere, avator, sexmalefemale, usercolour, abouturself, lastedited) values('$username', '$password', '$word', '$dateofjoin', '$email', '$countrywhere', '$avator', '$sexmalefemale', '$usercolour', '$abouturself', '$lastedited')");
          $result = @mysql_query($qry2);
          $qry3 = mysql_query("insert into usr_badge(user, reason, badge, display) values('$user', '$reason', '$badge', '$display')");
          $result = @mysql_query($qry3);
      echo("You are now signed up to our site!");
      if($content[emailvert]==1)
      {
      $emailbody = "Thanks for registering at the $content[site] usersystem! \n \n We'd like to take this chance to confirm all of your details, just so you know how to log in and get the most out of your experience! \n \n --- \n username: $username \n Password: $password2 \n Your secret code: $sec \n Your secret word: $word \n \n -- \n \n Thanks, \n $content[site] Management --";
     $mail =  mail($email,"Welcome to the $content[site] usersystem!", $emailbody, "From: <$content[email]>");
     if(!$mail)
     echo("<br />Could not send the email at this time, please check you filled out the previous page completely and try again..");
     else echo("<br /></br></br><b>Please go to the email you provided to us and confirm your account, after 1 week we will suspend your account if you do not confirm.</b>");
      }
      }
      else echo("The number you entered did not match that displayed!");
      }
      else echo("You have not entered filled out all the required fields, you need to do so in order to continue..");
      }
      else
      echo("username is already in use!");
      }
      ?>
      <? }
      else echo("Register disabled"); ?> 
```

clean.php （意味着去除空格）

```
<?php
function clean($str)
{
$cleaned = strip_tags(htmlspecialchars(addslashes(stripslashes( $str ))));

return $cleaned;
}
?> 
```

功能

```
/*
Clean Variables
*/
function clean($str)
{
$cleaned = strip_tags(htmlspecialchars(addslashes(stripslashes( $str ))));
return $cleaned;
}
/*
End Function
*/ 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:50:02.707

欢迎来到 php 编程的美妙世界！

要回答您的直接问题：您可以使用

```
if (substr_count($username,' ') > 0) { 
   // Output an appropriate error message
} 
```

但是您可能想检查用户名是否仅包含对于您网站上的用户名而言实际上合法的字符 - 或者您是否还希望能够在这些名称中包含任何 UTF 字符？

但还有两句话：

1.  请查看有关将数据插入数据库的准备好的语句 ( `mysqli_prepare()`)。有很多关于这方面的教程，它会让你省去很多麻烦，尤其是关于清理和绑定变量的时候。
2.  通常认为不仅提示输入密码一次，而是提示两次的好形式。如果用户碰巧在输入时输错了密码，使用您的解决方案，他只会将自己锁定在应用程序之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:52:22.360

我不会删除空格并继续注册，而是检查空格，然后将错误返回给用户。

```
if ( strpos($username, " ") !== false ) {
   /* error */
} 
```

您也可以在客户端快速发送消息，但它必须始终在服务器端。

# mysql - mysql中两列的MAX

> ID：11203669
> 
> 赞同：0
> 
> 时间：2012-06-26T08:44:07.177
> 
> 标签：mysql, sql, query-optimization, aggregate-functions

我想知道是否有更好的方法从 c1 列获取最大值，然后从 c2 列获取选定行的最大值，而不是

```
SELECT MAX(c1) , MAX(c2) FROM t GROUP BY c1 HAVING c1 = MAX(c1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T08:48:05.093

```
SELECT Max(t2.c1) as C1, 
       Max(t1.c2) as C2 
FROM   t t1 
       INNER JOIN (SELECT Max(c1) AS C1 
                   FROM   t) t2 
               ON t1.c1 = t2.c1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:48:05.417

只需阅读您对 hkutluay 回复的评论，这可能就是您想要的：

```
select MAX(colName)
from
(select col1 as colName
from tableName
union
select col2
from tableName) subqueryName 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T09:58:45.980

我不太确定你是想要所有不同的 c1 还是只想要最大值。

如果你想要所有 c1：

```
SELECT c1, MAX(c2) FROM t GROUP BY c1; 
```

如果您只想要最大 c1：

```
SELECT c1, c2 FROM t ORDER BY c1 DESC, c2 DESC LIMIT 1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T09:41:31.613

我知道mysql没有CTE；但是因为问题也被标记为 SQL，并且 CTE 是子查询的合理干净解决方案，所以为了完整起见，这里是 CTE 版本：

```
WITH zmax AS (
        SELECT MAX(v1) AS v1
        FROM ztable
        )
SELECT zt.v1
        , MAX(zt.v2) AS v2
FROM ztable zt
JOIN zmax mx ON zt.v1 = mx.v1
GROUP BY zt.v1
        ; 
```

# perl - Perl 中浮点等价的单元测试

> ID：11203686
> 
> 赞同：4
> 
> 时间：2012-06-26T08:45:01.273
> 
> 标签：perl, unit-testing, testing, floating-point

我正在使用 Perl 编写单元测试[Test::More](http://search.cpan.org/perldoc?Test%3a%3aMore)。我已经习惯了[cxxunit](http://sourceforge.net/projects/cxxunit/)的一些构造，特别是我缺少[TS_ASSERT_DELTA](http://cxxtest.com/cxxtest/doc/guide.html#ts_assert_delta)。对于那些没有看过[TS_ASSERT_DELTA](http://cxxtest.com/cxxtest/doc/guide.html#ts_assert_delta)的人来说，它看起来像这样：

```
TS_ASSERT_DELTA( 1.0, 1.1, 0.5 );   // this test will pass
TS_ASSERT_DELTA( 1.0, 1.1, 1e-10 ); // this test will fail 
```

是否有 Perl 等效的浮点比较？还是每个人都为此编写了一个明显的函数？我目前正在处理这个：

```
sub compare_float_delta {
    my $n1    = shift;
    my $n2    = shift;
    my $delta = shift;
    return( abs($n1-$n2) < $delta );
} 
```

对我来说，这似乎是测试框架应该提供的东西。这个想法对吗，还是我应该打电话给 float_compare_delta 并继续我的生活？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T08:56:25.400

您可以使用 CPAN 中的特定模块：[Test::Number::Delta](http://search.cpan.org/perldoc?Test::Number::Delta)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-26T10:33:47.753

请参阅 中的[`num`函数`Test::Deep`](http://p3rl.org/Test%3a%3aDeep#num-number-tolerance-)。

# c++ - C++ Basic 中的类模板

> ID：11203688
> 
> 赞同：1
> 
> 时间：2012-06-26T08:45:04.423
> 
> 标签：c++, templates, undeclared-identifier

```
template<class T>
class Stack 
{
public:
    Stack()
    {
        cout<<"Enter size\n";
        cin>>size;
        //stackPtr=new int[size];
        stackPtr= new T[size];
        top =0;
    }

    ~Stack()
    {
        delete[] stackPtr;
    }

    void display()
    {
        cout<<"*****************************\n";
        for(int i=0;i<top;i++)
            cout<<stackPtr[i]<<endl;
        cout<<"*****************************\n";
    }

    bool Push()
    {
        int a;
        cout<<"Enter element\n";
        cin>>a;
        if(isFull()==false)
        {
            stackPtr[top++]=a;
            return true;
        }
        else
            return false;
    }

    bool Pop()
    {
        if(isEmpty()==false)
        {   
            top--;
            return true;
        }
        else 
            return false;
    }

    bool isEmpty()
    {
        if(top==0)
            return true;
        else
            return false;
    }

    bool isFull()
    {
        if(top==size)
            return true;
        else
            return false;
    }

private:
    //int *stackPtr;
    T *stackPtr;
    int size;
    int top;
    //location of the last element added, -1 means empty stack
};

void main()
{

    int typeArray;
    cout<<"What type of array do you want\n1.Integer\n2.Character\n";
    cin>>typeArray;
    //If instead of these if statements, i simply
        //write Stack<int> Stacks, everything works fine
        //So i think theres something wrong with using char or float or ANY other 
        //datatype?

    if(typeArray==1)
        Stack <int>Stacks;
    else 
        Stack <float>Stacks;

    cout<<"1.PUsh\n2.Pop\n3.Display all\n4.exit\n";
    int ch=1;
    cin>>ch;
    while(ch!=-1)
    {

        switch(ch)
        {
        case 1: if(Stacks.Push())
            {
                cout<<"Stack Full\nPop to enter other        values\n";

            }
            break;
        case 2: if(Stacks.Pop()==false)
                    cout<<"Stack EMpty\n";
            break;
        case 3: Stacks.display();
            break;
        case 4: exit(0);
        default:cout<<"Reenter you option\n";
            break;
        }
        cout<<"1.PUsh\n2.Pop\n3.Display all\n4.exit\n";
        cin>>ch;
    }
} 
```

这些是我得到的错误。我正在使用 VS 2010

```
test.cpp(104): error C2065: 'Stacks' : undeclared identifier
test.cpp(104): error C2228: left of '.Push' must have class/struct/union type
                            is ''unknown-type''
test.cpp(110): error C2065: 'Stacks' : undeclared identifier 
test.cpp(110): error C2228: left of '.Pop' must have class/struct/union type
                            is ''unknown-type''
test.cpp(113): error C2065: 'Stacks' : undeclared identifier
test.cpp(113): error C2228: left of '.display'  must have class/struct/union type
                            is ''unknown-type'' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T08:46:27.463

```
if(typeArray==1)
    Stack <int>Stacks;
else 
    Stack <float>Stacks; 
```

此代码段创建的变量`Stacks`的生命周期和范围仅限于`if`语句。它对程序的其余部分不可见。

你需要重新思考你的设计。

另外，我在这里看到一个逻辑错误：

```
bool Push()
{
    int a;
    cout<<"Enter element\n";
    cin>>a; 
```

那不应该`T`代替`int`吗？这样，`int`无论模板专业化如何，您都只会阅读 s 。

# php - 与您的 MySQL 服务器版本相对应的手册，以便在附近使用正确的语法

> ID：11203691
> 
> 赞同：0
> 
> 时间：2012-06-26T08:45:12.260
> 
> 标签：php, mysql

我正在尝试将记录插入数据库，但它给了我一个错误。

我正在使用 PHP 和 MySQL。

我需要一个成功的结果，但我收到一个错误，这是我的代码：

```
 $Pname = $_POST[Pname];
    $P_Price = $_POST[P_Price];
    $P_Desc = $_POST[P_Desc];
    $P_City = $_POST[P_City];
    $P_Size = $_POST[P_Size];
    $P_Rooms = $_POST[P_Rooms];
    $P_garage = $_POST[P_garage];
    $P_Address = $_POST[P_Address];
    $P_Long = $_POST[P_Long];
    $P_Lat = $_POST[P_Lat];
    $Provinces_idProvinces = $_POST[Provinces_idProvinces];

    // array for JSON response
    $response = array();

        $result = mysql_query("INSERT INTO property(Pname,P_Price,P_Desc,P_City,P_Size,P_Rooms,P_garage,P_Address,P_Long,P_Lat,Provinces_idProvinces)
        VALUES ('".$Pname."',".$P_Price.",'".$P_Desc."','".$P_City."','".$P_Size."','".$P_Rooms."',".$P_garage.",'".$P_Address."',".$P_Long.",".$P_Lat.",".$Provinces_idProvinces."'");

     if ($result) {
            // successfully inserted into database
            $response["success"] = 1;
            $response["message"] = $result ;

            // echoing JSON response
            echo json_encode($response);
        } else {
            // failed to insert row
            $response["success"] = 0;
            $response["message"] = mysql_error(); 
```

这是我的错误：

```
{"success":0,"message":"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''','','','',,'',,,'' at line 2"} 
```

我检查了所有内容，但它仍然给我同样的错误。请帮忙，现在快3天了。

这是 MySQL 查询：

```
delimiter $$

CREATE TABLE `property` (
  `idProperty` int(11) NOT NULL AUTO_INCREMENT,
  `Pname` varchar(45) DEFAULT NULL,
  `P_Price` double DEFAULT NULL,
  `P_Desc` varchar(45) DEFAULT NULL,
  `P_City` varchar(45) DEFAULT NULL,
  `P_Size` varchar(45) DEFAULT NULL,
  `P_Rooms` varchar(45) DEFAULT NULL,
  `P_garage` int(11) DEFAULT NULL,
  `P_Address` varchar(45) DEFAULT NULL,
  `P_Long` int(11) DEFAULT NULL,
  `P_Lat` int(11) DEFAULT NULL,
  `P_Sold` tinyint(1) DEFAULT '0',
  `Provinces_idProvinces` int(11) NOT NULL,
  PRIMARY KEY (`idProperty`),
  KEY `fk_Property_Provinces` (`Provinces_idProvinces`),
  CONSTRAINT `fk_Property_Provinces` FOREIGN KEY (`Provinces_idProvinces`) REFERENCES `provinces` (`idProvinces`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=latin1$$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T09:00:48.117

您的查询有很多问题：

1.  您没有清理用户输入（`$_GET`或`$_POST`）中的值 - 至少`mysql_real_escape_string`用于此...
2.  您的查询包含一些空值，因此您`,,,`的查询中有...在提交后验证表单并检查每个属性是否具有以其他方式设置的值，将其设置为`''`（空字符串）或`0`（零）或`null`
3.  您不假思索地使用撇号和引号......这是Yoyr查询（不是格式化为能够做粗体的代码） - 粗体是错误的撇号：INSERT INTO property (Pname, P_Price, P_Desc, P_City, P_Size, P_Rooms, P_garage, P_Address, P_Long, P_Lat, Provinces_idProvinces) 值 ('".$Pname."', ".$P_Price.", '".$P_Desc."', '".$P_City."', '".$ P_Size."', '".$P_Rooms."', ".$P_garage.", '".$P_Address."', ".$P_Long.", ".$P_Lat.", ".$Provinces_idProvinces. **" '"** );

修复这三个错误/错误后，你应该很好。

几点建议：

1.  始终清理每个用户输入！（这可能不是推荐）
2.  您应该验证表单并为空字段设置默认值
3.  而不是使用如今已弃用的`mysql_*`功能我们至少`mysqli_*`或 PDO。

此外，您正在使用不带引号的数组索引：

```
$P_Price = $_POST[P_Price]; 
```

除非`P_Price`是一个常数，你需要引用它：

```
$P_Price = $_POST['P_Price']; 
```

激活错误报告以查看您导致的所有错误，然后修复它们：

```
error_reporting(E_ALL);
ini_set('display_errors', true); 
```

# c# - 'html-in-font' 页面叫什么？

> ID：11203692
> 
> 赞同：1
> 
> 时间：2012-06-26T08:45:12.833
> 
> 标签：c#, asp.net

很简单的问题。

什么是“aspx”或“ascx”页面？我需要正确的术语来正确搜索谷歌或在这里定义一个应该相当容易回答的问题，但我确定我没有使用正确的词汇，所以我的问题和谷歌搜索并没有给我带来任何好处。

需要明确的是，“代码隐藏”页面是用 c# 编写的，我想知道包含 HTML 和 <% %> 标记的页面将被调用。

我问是因为我的另一个问题回答得非常糟糕，然后被其他人忽略了，我认为这是因为我不确定如何正确命名该页面。稍微绕过房子，但一旦我的条件正确，我就可以进入解决问题的下一个阶段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:08:15.700

aspx 页面实际上是 Web 表单页面，您可以在其中定义诸如“<%”或 html 代码之类的标记。为了简单起见，我们可以使用单独的“代码背后”来编写 c# 代码。但是，在 aspx (webform) 中我们也可以编写 c# 代码，我相信您一定知道这一点。

ASCX 页面不仅仅是一个用户控制页面。

我希望我已经回答了你的问题。仅供阅读这篇文章的人参考，ASPX 是经典 ASP 页面的增强版本，其文件扩展名曾经是“asp”。因此，当微软推出 ASP.NET 时，他们需要能够反映这种进步的东西。所以他们将他们的页面命名为 ASP+。由于 Windows 不允许将 + 号作为文件扩展名，因此他们倾斜了“+”号并将其设为“x”。这就是 ASPX 的派生方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:47:01.427

我一直将该页面称为“标记”页面，这就是您所追求的吗？

# xcode - 并排有 2 个 xcode 窗口

> ID：11203693
> 
> 赞同：0
> 
> 时间：2012-06-26T08:45:16.943
> 
> 标签：xcode, screen-resolution

所以我有一个 1920x1080 的显示器，当我尝试并排运行两个 xcode 窗口时，它们相互重叠。我最初在我的 MBP 1650x1050 屏幕上遇到了这个问题，但我期待屏幕空间。

任何人都知道如何让它并排运行而不会裁剪 xcode 窗口？我正在使用 BetterTouchTool 将窗口向左和向右对齐。

这是裁剪的图片：

![在此处输入图像描述](../Images/a1e3be163b39a293da1c4fb3366b4021.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-02T21:56:46.783

隐藏工具栏（**View > Hide Toolbar**），您将能够将 Xcode 窗口的大小调整为比工具栏可见时更小的尺寸。

您可能还想隐藏导航器（**视图 > 导航器 > 隐藏导航器**）以为编辑器视图腾出更多空间。

这是一个 1440x900 分辨率的屏幕截图：

![分辨率为 1440x900 的屏幕截图](../Images/c12f228afcb2bf01a54b726258190896.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T09:53:41.623

这是不可能的，OS X 应用程序具有预先确定的最小高度和宽度属性，据我所知不能被覆盖。相信我，我正在处理同样的问题。这很令人沮丧，但是您对此无能为力。

# jquery - 动态文本和带有 jCanvas 的链接

> ID：11203694
> 
> 赞同：1
> 
> 时间：2012-06-26T08:45:18.590
> 
> 标签：jquery, canvas, jcanvas

我有一个画布，我使用 jCanva (http://calebevans.me/projects/jcanvas/docs.php?p=layers)s 来创建带有事件的圈子。

我希望每个圆圈都有文本（用于鼠标悬停事件）和 id（用于单击事件）。问题是事件是动态的，并且“i”始终是最后一个 i（data.length），因此所有圆圈都获得相同的值......我该如何解决？

```
 for (i = 0; i < data.length; i++) {
                var id = data[i][0];
                var text = data[i][2];

                $("#mapCanvas").drawArc({
                    layer: true,
                    fillStyle: "yellow",
                    strokeStyle: "#000",
                    strokeWidth: 1,
                    x: Math.random() * c.clientWidth,
                    y: Math.random() * c.clientHeight,
                    radius: 6,
                    click: function (layer) {
                        window.open("Edit/" + id);
                    },
                    mouseover: function (layer) {
                       $("canvas")
                       .addLayer({
                            method: "drawRect",
                            name: "BackgroundLabel",
                            group: "ItemLabel",
                            fillStyle: "#FFFFD4",
                            x: layer.x + 10,
                            y: layer.y - 15,
                            width: 100,
                            height: 20
                       })
                       .drawLayers();

                       $("#mapCanvas").drawText({
                        layer: true,
                        fillStyle: "white",
                        strokeWidth: 0,
                        x: layer.x + 10,
                        y: layer.y - 10,
                        font: "14pt Arial, Verdana, sans-serif",
                        text: text
                        });
                    }
                }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:17:52.617

我修复了它 - 我创建了一个单独的函数“drawOneCircle”，它获取变量并使用它们。“drawOneCircle”现在包含原始“for”循环的内容。

```
 for (i = 0; i < data.length; i++) {
                var id = data[i][0];
                var text = data[i][2];
                drawOneCircle(c, id, text);
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:15:31.310

@TamarG：要理解为什么你的“i”总是最后一个 i（data.length），我强烈推荐Trevor Burnham的一本名为“ [Async JavaScript ”的书。](https://rads.stackoverflow.com/amzn/click/com/1475247362)我用过很多语言编程，在读这本书之前我以为我知道 JavaScript。JavaScript 事件管理是不直观的——事件的管理方式与我使用过的任何其他语言不同。直到我读了这本书，我才明白。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T18:19:25.167

我知道这并不完全符合您的要求，但请查看这个库 - [http://d3js.org/](http://d3js.org/) 它非常适合创建数据驱动的文档，并且会让您的工作更加轻松。我认为使用 svg 会给你比使用画布更好的性能。

# uitableview - 数据发送回 Utableview

> ID：11203695
> 
> 赞同：0
> 
> 时间：2012-06-26T08:45:34.300
> 
> 标签：uitableview, ios5

我有一个，我在“didSelectRow ..”方法中`UITableviewController`推送另一个。`UIViewController`

我在这个 viewController 中有用户输入控件（组合框、步进器），当它`UIViewController`被弹出时，我想接收新输入的数据`UITableviewController`（并相应地更新 tableview）。

我看到了一些问题/答案，有些人说要使用“委托/协议”的方法，但没有找到任何具体的例子来实现这一点。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:21:18.963

为您的项目创建一个新文件并选择协议文件类型。（我们称它为`CallBackProtocol`。）在您推送的视图控制器中，创建一个类型为`id<CallBackProtocol> delegate;`. 让您的表控制器采用该协议，并在创建视图控制器时设置`controller.delegate = self;`.

在协议中定义一个方法，让您将所需的任何数据传回给调用者。在表控制器中实现该方法并在弹出它之前从第二个视图控制器调用它。

（或使用`NSNotification`.）

# c# - 分配多个 JsonProperties？

> ID：11203701
> 
> 赞同：14
> 
> 时间：2012-06-26T08:45:44.563
> 
> 标签：c#, json, serialization

我正在尝试制作一个包含来自 Facebook 和 Twitter 的信息的单个数据类。

但在我来自 twitter 的 JSON 回复中，我需要`id_str`并且从 FaceBook 我得到`id`.

我需要将这两个放入`id`-string。

现在我知道`[JsonProperty("id_str")]`如果我想将 Twitter 反序列化`id_str`到我的`id`-string 中，我可以使用它。

但是，如果我需要将 Facebook`id`和 Twitter都反序列化到我的数据类`id_str`中的同一个字符串中怎么办？`id`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T09:22:48.837

我想我以最简单的方式解决了它......

```
 public string id_str { 
        get{return id;}
        set{id = id_str;}
    }

    public string id { get; set; } 
```

只需将两者都添加并制作一个，然后设置另一个.. 它可以工作：P 有时简单的解决方案是最好的？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-26T08:54:03.420

不，这是不可能的。

让我们看一下[Json.NET 文档](http://james.newtonking.com/projects/json/help/)。特别是关于[JsonPropertyAttribute](http://james.newtonking.com/projects/json/help/html/T_Newtonsoft_Json_JsonPropertyAttribute.htm)类的帮助页面。

去引用：

“指示 JsonSerializer 始终序列化具有指定名称的成员。”

它在 Newtonsoft.Json 命名空间中声明。我们需要确定它是如何声明的。让我们看一下 CodePlex 上的 Json.NET 的源代码：

[http://json.codeplex.com/](http://json.codeplex.com/)

```
[AttributeUsage(AttributeTargets.Field | AttributeTargets.Property |     
 AttributeTargets.Parameter, AllowMultiple = false)]
public sealed class JsonPropertyAttribute : Attribute
{
    //...
} 
```

猜猜这回答了这个问题。该特性的[AllowMultiple](http://msdn.microsoft.com/en-us/library/system.attributeusageattribute.allowmultiple.aspx)属性设置为 false。所以你不能用这个属性多次装饰一个属性、字段或参数。

即使您可以期望 Json.net 确定要使用哪个属性？我会分别为 Twitter 和 Facebook 创建类型，您可以将接收到的 JSON 数据反序列化到其中。

所以：

```
Twitter -> JSON -> Twitter specific types
Facebook -> JSON -> Facebook spefic types 
```

然后创建一个您的应用程序使用的抽象，而不是直接寻址这些类型。它们只是属于特定的社交媒体实现。

Twitter / Facebook / ...特定类型->您的类型

如果您直接尝试将数据反序列化为“常见类型”，那么您将继续挣扎，因为它们与接收到的数据没有 100% 对齐，您最终会遇到一些时髦、难以维护的反序列化逻辑.

另一种选择是创建您自己的自定义 Json.NET 转换器。

[http://geekswithblogs.net/DavidHoerster/archive/2011/07/26/json.net-custom-convertersndasha-quick-tour.aspx](http://geekswithblogs.net/DavidHoerster/archive/2011/07/26/json.net-custom-convertersndasha-quick-tour.aspx)

只需为 Twitter 和 Facebook 创建一个转换器，当您反序列化 JSON 数据时，只需指定您要使用的转换器。

*   推特转换器
*   Facebook转换器

例如：

```
MySocialType myType = JsonConvert.DeserializeObject<Mapped>(json, 
    new TwitterConverter()); 
```

无论如何，我会尽量避免用反序列化逻辑本身污染你的类类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-16T21:32:43.043

如果您正在寻找要使用的泛型类模型，您可以按如下方式进行。

```
public class GenericClass
{
    public virtual string ID {get;set;}
}
public class FaceBook : GenericClass
{
    [JsonProperty("id")]
    public override string ID { get => base.ID; set => base.ID = value; }
}
public class Twitter : GenericClass
{
    [JsonProperty("id_str")]
    public override string ID { get => base.ID; set => base.ID = value; }
} 
```

对于脸书，

```
GenericClass genericClass = JsonConvert.DeserializeObject<FaceBook>(json); 
```

推特，

```
GenericClass genericClass = JsonConvert.DeserializeObject<Twitter>(json); 
```

你可以忘记使用什么模型类，只使用 GenericClass

# javascript - 提交后修改外部投票的宽度

> ID：11203702
> 
> 赞同：0
> 
> 时间：2012-06-26T08:45:50.283
> 
> 标签：javascript, jquery

我创建了一个简单的 polldaddy 民意调查。一旦使用 jQuery 加载投票，我将修改宽度并隐藏投票的一些元素，如下所示：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    $(".pds-pd-link").hide();
    $(".a2a_dd.pds-share").hide();
    $(".pds-box").width(220);
  });
</script>
<script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/5968383.js"></script>
<noscript><a href="http://polldaddy.com/poll/5968383/">This is a test question ?</a></noscript> 
```

问题是一旦我投票，投票的宽度就会恢复到原来的宽度。是否可以将 with 保留在 220 ？我意识到以这种方式修改宽度有点小技巧，一旦购买了许可证，就可以进行完全定制。我现在只想修改宽度。

这是民意调查的小提琴：http: [//jsfiddle.net/Wx5mM/](http://jsfiddle.net/Wx5mM/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:49:14.843

使用 CSS 代替：http `!important`: [//jsfiddle.net/Wx5mM/1/](http://jsfiddle.net/Wx5mM/1/)。

```
.pds-box {
    width: 200px !important;
}​ 
```

# php - 设计小地图：更有效的方法

> ID：11203712
> 
> 赞同：0
> 
> 时间：2012-06-26T08:46:24.027
> 
> 标签：php, performance, gd

我正在制作一个带有小地图的 wap 游戏。它基本上是一个 5x5 的 div，带有 (a) 20x20 像素的背景图像。

不过，我陷入了僵局，试图弄清楚如何设计它们。

为每个“位置”制作一个 100x100 像素的图像并不是一个好主意，因为如果其中一个 20x20 位置发生变化，我将不得不更新 15 个 100x100 图像。

那么剩下两个选择：

*   使用 GD 将 20x20 像素的图像组合成一个 100x100 像素的大图像
*   为小地图中的每个 div 提供一个带有 20x20 位置图像的背景。

在第二种情况下，我会发出很多 HTTP 请求来获取图像，在第一种情况下，服务器资源将用于将它们组合成一个大图像。

您认为哪个选项更有效？基本上我认为这是一种双输的情况，但必须决定哪种损失更不痛苦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:10:56.963

你为什么不看看 CSS SPRITES？

[http://spriteme.org/](http://spriteme.org/)

然后，您可以使用随机选择 CSS 类（及其相对背景）的 php 函数生成地图。

如果您假设地图 20x20 的 9 个不同部分要组合成 3x3 网格，您只需为每张地图创建一个类。您可以动态生成它（将 0px 0px 替换为“$x = rand(0,3)*20; $y = rand = rand(0,3)*20;" 左右。

```
.map1 {
    background-image:url(/images/css_sprite.png);
    background-position:0px 0px;
    background-size:20px 20px;
} 
```

1个HTTP请求被调用，GD没有服务器资源浪费！

# android - 我无法在 android 中单击 ListView？

> ID：11203713
> 
> 赞同：7
> 
> 时间：2012-06-26T08:46:25.267
> 
> 标签：android, listview, android-listview

我使用联系人同步制作了一个应用程序。我列出了以下联系信息，包括照片、姓名和电话号码。**我成功地在自定义ListView**中列出了所有这些内容，但我无法单击**ListView**。它看起来像被锁定，无法单击它。

但我对另一个活动做了同样的程序。使用自定义**ListView**但我可以单击此视图并且它工作正常。

问题是什么？这是我的示例编码：

```
 ListView settingsList = (ListView) findViewById(R.id.manage_track_listView);
    ArrayList<ContactList> MySettingsList = new ArrayList<ContactList>();

    ContactList setting1 = new ContactList("contact name 1", "Number 1", null);
    ContactList setting2 = new ContactList("contact name 2", "Number 2", null);
    ContactList setting3 = new ContactList("contact name 3", "Number 3", null);

    MySettingsList.add(setting1);
    MySettingsList.add(setting2);
    MySettingsList.add(setting3);

    ContactList list[] = new ContactList[MySettingsList.size()];

    for(int i=0;i<MySettingsList.size();i++) {

        ContactList mySettings = MySettingsList.get(i);
        list[i] = new ContactList(mySettings.getName(), mySettings.getNumber(), mySettings.getImageIcon());
    }

    ContactListAdapter adapter = new ContactListAdapter(this, R.layout.manage_track_list_custom_view, list);
    settingsList.setAdapter(adapter);
    System.out.println("before listener");
    settingsList.setOnItemClickListener(new OnItemClickListener() {

        @Override

        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            // TODO Auto-generated method stub

            System.out.println("Clicked " + position);
        }
    });
    System.out.println("after listener"); 
```

这里的 ContactList 是一个类，它具有联系人姓名、号码和 imageBlob 的 byte[]。如果图像为空，我将默认 ic_launcher 设置为联系人图像。适配器类是：

```
public class ContactListAdapter extends ArrayAdapter<ContactList> {

    Context context;
    int layoutResourceId;
    ContactList objects[] = null;

    View row;

    public ContactListAdapter(Context context, int layoutResourceId, ContactList[] objects) {
        super(context, layoutResourceId, objects);
        // TODO Auto-generated constructor stub

        this.context = context;
        this.layoutResourceId = layoutResourceId;
        this.objects = objects; 
        System.out.println(objects[1].getName());
        System.out.println(objects[1].getNumber());
        System.out.println(objects[1].getImageIcon());
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        row = convertView;
        final ContactListHolder holder;

        if ( row == null ) {

            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new ContactListHolder();
            holder.image    = (ImageView) row.findViewById(R.id.contactImage);
            holder.name     = (TextView) row.findViewById(R.id.contactName);
            holder.number   = (TextView) row.findViewById(R.id.contactNumber);
            holder.check    = (CheckBox) row.findViewById(R.id.selectedContact);

            row.setTag(holder);

        } else {

            holder = (ContactListHolder)row.getTag();
        }

        ContactList contact = objects[position];
        if(contact.imageIcon != null) {

            Bitmap imgBitmap = BitmapFactory.decodeByteArray(contact.imageIcon, 0, contact.imageIcon.length);
            holder.image.setImageBitmap(imgBitmap);
        } else {

            holder.image.setImageResource(R.drawable.ic_launcher);
        }

        holder.name.setText(contact.name);
        holder.number.setText(contact.number);
        holder.check.setChecked(objects[position].isSelected());    

        return row;

    }

    static class ContactListHolder {

        ImageView image;
        TextView name;
        TextView number;
        CheckBox check;
    }
} 
```

我有 100 多个联系人，所以只添加了 3 个对象。在此联系人列表中，我成功收到联系人图片、姓名、号码。

**ListView**无法点击是什么问题？我希望你们中的任何人都会指导我。提前致谢。

* * *

谢谢大家。现在只需添加`android:focusable="false"`我的所有子视图即可得到结果。感谢您的指导。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T08:49:19.010

在嵌套视图中，子视图总是首先获取所有的触摸事件。如果您希望父视图（在您的情况下为 listView 行）获取触摸事件，则必须在子事件上返回 false 或将它们设置`android:clickable="false"`在清单中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-26T09:14:52.757

添加

```
 android:focusable="false" 
```

和

```
 android:clickable="false" 
```

对于每个子视图，如 imageview、textview、checkbox 等......您的行布局意味着在**manage_track_list_custom_view.xml**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T09:17:50.957

我认为你必须设置所有可点击的东西，例如。复选框、按钮等不可聚焦（在适配器类中）。

```
 holder.yourButton.setFocusable(false);
        holder.yourButton.setFocusableInTouchMode(false);

        holder.yourCheckbox.setFocusable(false);
        holder.yourCheckbox.setFocusableInTouchMode(false); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T09:19:37.940

试试这个：

添加 listView 时，调用

```
setDescendantFocusability(FOCUS_BLOCK_DESCENDANTS); 
```

在[这里](http://code.google.com/p/android/issues/detail?id=3414&can=1&q=listview&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)查看更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T09:18:38.227

您可以将 onclick listner 设置为 ContactListAdapter 类中的 View 行。

```
 holder.check.setChecked(objects[position].isSelected());    
       row.setOnclickListner(new Onclicklistner(){
          // Your code here
       });
    return row; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-19T07:31:38.697

当我无法在列表视图中单击项目的其他部分时，我遇到了同样的问题，只能单击该项目内的 textview 或 imageview。所以我设置了我的文本视图：

```
android:layout_width="fill_parent" 
```

我的项目是这样的：

```
<relative>
[image][textview]
relative/> 
```

并且单击事件工作正常，因为我单击了文本视图。希望能帮助任何有同样问题的人。

# jmx - 类似于 Spring JMX exporter 的 JMX 导出框架

> ID：11203715
> 
> 赞同：5
> 
> 时间：2012-06-26T08:46:29.870
> 
> 标签：jmx, spring-jmx, simplejmx

**在不**使用 Spring 框架的情况下，有没有类似于 Spring JMX 导出器的东西？

[SimpleJMX](http://256stuff.com/sources/simplejmx/)似乎是合理的，但似乎也是一个非常年轻的框架，仅由一个人推动。

我需要将一大堆属性、方法和类公开为 JMX，但不想摆弄 JMX API 并编写大量 JMX 接口。

并且没有办法在项目中引入 Spring（以防万一）。非常感谢任何提示或想法:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:11:03.507

好的，我已经快速评估[了 SimpleJMX](http://256stuff.com/sources/simplejmx/)和[JMXUtils](https://github.com/martint/jmxutils)。两者都按预期工作，并且与 Spring JMX 导出器非常相似。但是，我发现 JMXUtils 在我的情况下更有用。

使用 JMXUtils，将 MBean 注册/注销到已经启动的平台 mbean 服务器非常容易。在我的例子中，我使用 GlassFish V3 作为应用程序服务器，我不想仅仅为我自己的 mbeans 启动另一个 MBean 服务器。

据我所见，SimpleJMX 的 API 不允许这样做，您要么被迫使用 SimpleJMX API 启动另一个 MBeanServer 并注册创建的 mbean（使用 API 非常容易），要么你开始摆弄尝试注册 mbean进入平台 mbean 服务器。后者稍微复杂一些，因此我决定使用 JMXUtils。

JMXUtils 的缺点是对 bean 名称的操作。SimpleJMX 在注解中使用属性（domainName、beanName），这非常有用，但是使用 JMXUtils 时，您必须知道在使用 mbean 域时命名 mbean 的语法。总而言之，没什么大不了的，但就我的口味而言，SimpleJMX 对此有更好的解决方案。

最重要的是，这两个库都很棒并且可以完成他们的工作。我决定使用 JMXUtils。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T08:55:21.580

我[`org.weakref.jmxutils`](http://repo1.maven.org/maven2/org/weakref/jmxutils/)在[commons-dbcp-jmx](https://github.com/nicoulaj/commons-dbcp-jmx)中访问库。查看[`ManagedBasicDataSource.java`](https://github.com/nicoulaj/commons-dbcp-jmx/blob/master/jdbc4/src/main/java/org/apache/commons/dbcp/ManagedBasicDataSource.java)示例：

```
@Managed(description = "The current number of active connections that have been allocated from this data source.")
public synchronized int getNumActive() {
    return super.getNumActive();
} 
```

我自己从未使用过那个库，但似乎可以工作。

# iphone - 目标 C - 实现和扩展之间的区别

> ID：11203717
> 
> 赞同：1
> 
> 时间：2012-06-26T08:46:30.587
> 
> 标签：iphone, objective-c, cocoa

只是一个关于扩展类和实现它的区别的一般问题。

```
@interface AppDelegate : UIResponder <UIApplicationDelegate> 
```

在我的示例中，我的类 AppDelegate 从 UIResponder 类扩展，但实现了 UIApplicationDelegate 类。

有人可以解释一下...您是否也有可能访问 UIApplicationDelegate 对象/类的方法？差异在哪里？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:50:40.770

如果您用 Java 术语说话，那么在您的示例中，您正在扩展（通常称为子类化） UIResponder 类。

您的示例还实现了 UIApplicationDelegate，这类似于实现一个接口，您必须定义 UIApplicationDelegate 协议的所需方法，并且您可以选择实现可选方法。

与 Java 类似，您只能扩展或子类一个类，但您可以在您的类中实现多个委托协议

如果您想了解更多，Apple 的协议指南非常方便：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:51:52.703

在非常基础的层面上，我们可以看到这是在目标 C 中实现多重继承的一种形式。

由于Objective C只支持单继承，但我们可以通过协议实现多继承（类似于java中的接口）。

所以当我们继承一个类时——我们说我们扩展了它。

当我们使用协议来访问通用功能时（为了有多个继承） - 我们说它实现了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T08:52:32.350

扩展一个类 = 继承它。即，您不覆盖的方法将在超类中调用。

实现委托协议只是说明您的类应该实现哪些方法。

参见（例如）[https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/Chapters/ocProtocols.html#//apple_ref/doc/uid/TP30001163-CH15-SW1](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/Chapters/ocProtocols.html#//apple_ref/doc/uid/TP30001163-CH15-SW1)

和

[http://www.thepensiveprogrammer.com/2010/05/objective-c-protocols-and-delegates.html](http://www.thepensiveprogrammer.com/2010/05/objective-c-protocols-and-delegates.html)

# c# - 类中的Perdiodic Event，不阻塞线程，线程定时器

> ID：11203722
> 
> 赞同：1
> 
> 时间：2012-06-26T08:46:58.643
> 
> 标签：c#, .net

我对 C# 和编程很陌生。目前我出现以下问题，我希望你能帮助我。我有一个目前看起来像这样的程序：

```
public class myClass
{
    public void SetSomething(Parameter)
    {
        ///Here something is set
    }

    private void DoSomething()
    {
        ///Here something is done using paramaters from the SetSomething()
    }

    public void Run()
    {
        DoSomething(); //this needs to be done periodicly after started one time
    }

    public void Stop()
    {
        //Stop doing something periodically
    }
} 
```

从外部函数（用户通过表单输入）调用 SetSomething、Run 和 Stop。如果调用 Run() 直到调用 Stop()，DoSomething 必须定期运行。问题是：这不应该阻塞当前线程。所以 Sleep(x) 不是一个选项。SetSomething 参数更改非常频繁，因此之前调用 Stop() 和之后调用另一个 Run() 不是更改 DoSomething() 参数的选项

计时器很可能是这里的完美解决方案。但由于该程序在 WinCE6 上使用 compact.Net 框架 System.Timers 命名空间不可用。我尝试使用 system.windows.forms.Timer 但这永远不会触发给定的事件（可能是因为它在错误的线程中。我没有编写表单并且不能更改它）。所以我唯一的选择似乎是 System.threading.timer。

我试图让它运行几个小时，但在某一时刻，我所有的尝试都结束了：因为我需要从不同的方法启动和停止计时器，所以我需要在方法之外声明它。问题是：我只能在这里将静态方法声明为委托。如果该方法是静态的，我无法更改计时器委托方法使用的参数。

我知道我的英语和解释不是最好的，但我希望你能明白我的意思。我怎样才能实现这个功能？问题是：我不能更改调用我的类的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:50:47.717

为什么你必须声明你的定时器是静态的？你不应该。只需在您的类中将其声明为常规变量即可。

# function - 如何让 Lua 暂停运行一段时间？

> ID：11203728
> 
> 赞同：1
> 
> 时间：2012-06-26T08:47:09.017
> 
> 标签：function, lua

我正在寻找一种方法来暂停我的程序以允许用户在它关闭之前阅读，但函数 (os.sleep(timeSeconds)) 显然不存在。有人知道解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:55:28.663

你可以利用`os.clock()`and `os.time()`。前任：

```
function sleep(n)
  local t = os.clock()
  while os.clock() - t <= n do
    -- nothing
  end
end 
```

n 以秒为单位。随意制作`os.time()`版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T10:22:27.770

更好地使用 OS 内置设施来保留输出窗口，而不是引入人为延迟。如果用户从已经打开的命令窗口运行您的程序或将输出重定向到文件怎么办？你强迫他白白浪费时间。

# php - 在同一个表中插入和更新

> ID：11203730
> 
> 赞同：1
> 
> 时间：2012-06-26T08:47:43.223
> 
> 标签：php, mysql

我有桌子

```
table1
****************************
id | start_date | end_date  
1    30/06/2012   01/01/9999 
```

当我插入新行时

```
id | start_date | end_date
1    30/06/2012   26/06/2012 <- Now it is the start date of the next row2
2    26/06/2012   01/01/9999 
```

插入行的开始日期将成为前一行的结束日期，依此类推。

```
 $sql = "INSERT INTO 
                    table1(cate_id,task_id,obj,end_date,start_date,line)
                    SELECT 
                        $cate_id ,
                        $task_id,
                        $obj,
                        '2011-02-28', -> this what I am trying to do
                        '9999-01-01', -> this what I am trying to do
                        line1 
                    FROM 
                        line_task
                    WHERE 
                         line_task_id = (
                                            SELECT 
                                                line_task_id 
                                            FROM 
                                                task 
                                            WHERE 
                                                task_id = 2
                                           )"; 
```

当我尝试这样的事情时：

```
insert into table1(cate_id,task_id,obj, start_date, end_date,line) 
values (4,3,23, (Select max(end_date) from table1),end_date,'value_line'); 
```

我收到消息：

```
 Error code 1093, SQL state HY000: You can't specify target table 'table1' for update     in FROM clause
Line 1, column 1 
```

0 秒后执行完成，发生 1 个错误

能告诉我如何用mysql做到这一点吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:52:11.053

试试这个：：

```
 Set @max_date = Select max(end_date) from table;

    Insert into table(id, start_date, end_date) values (id, @max_date ,end_date); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:23:48.710

首先，获取最后一条记录 end_date ：

```
$sql = mysql_query("Select * from table1 ORDER BY ID Desc");

    if ($row=mysql_fetch_array($sql))
    {
        $end_date=$row['end_date'];
    } 
```

然后插入带有前一个 $end_date 的新记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T01:26:30.377

您可以在一个查询中完成

```
INSERT INTO table1(cate_id,task_id,obj, start_date, end_date,line) 
SELECT 4,3,23, MAX(end_date), end_date, 'value_line'
FROM table1; 
```

只需遵循正确的语法（第二个示例）：[http ://dev.mysql.com/doc/refman/5.5/en/insert-select.html](http://dev.mysql.com/doc/refman/5.5/en/insert-select.html)

# java - 使用什么容器来保持索引自动更新？

> ID：11203731
> 
> 赞同：1
> 
> 时间：2012-06-26T08:47:47.147
> 
> 标签：java, swing, collections, indexing, tablemodel

以下情况：我需要一个带有 rowindex 的数据容器。目前我们在 tablemodels 中使用普通的 ArrayList 并手动更新 tablerownumbers（使用疯狂的算法，在该容器中添加、删除、移动数据后保持更新。

在发现更新这些表行的第三个错误后，我考虑最终使用不同的容器来自动更新它们。我的第一个想法是使用 LinkedList。我唯一不喜欢的是，在 LinkedList 中，我无法在不删除/读取它们的情况下移动项目，但似乎仍然令人满意。

Rowheader 本身是一个自己的表，需要为每个事件更新，以保持两者同步。

![行标题示例](../Images/f7e1fb9babd623f8017d34c678bd0092.png)

只是想知道，如果你可以推荐替代品。所以我很好奇你会用什么样的容器？

谢谢，伊梅内

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:59:43.093

我不确定我是否完全理解这个问题。但是假设你有一个`List<Person>`，并且你需要一个显示行号、人名和人姓的表格，你不需要 Person 甚至列表中的任何索引来做到这一点：

```
public class PersonTableModel extends AbstractTableModel {

    private List<Person> persons;

    public int getRowCount() {
        return persons.size();
    }

    public int getColumnCount() {
        return 3;
    }

    public Object getValueAt(int row, int col) {
        if (col == 0) {
            return row + 1;
        }
        else if (col == 1) {
            return persons.get(row).getFirstName();
        }
        else {
            return persons.get(row).getLastName();
        }
    }
    ...
} 
```

ArrayList 将比 LinkedList 更有效，因为对于 LinkedList，索引访问是 O(1) 而不是 O(n)。

# python - MongoEngine 不会保存默认的 False 值

> ID：11203741
> 
> 赞同：0
> 
> 时间：2012-06-26T08:48:17.560
> 
> 标签：python, mongodb, mongoengine

我已经定义了一个用户模型并向`featured`它添加了一个字段：

```
class User(Document):
    email = EmailField(required=True)
    featured = BooleanField(default=False, required=True) 
```

然后我从这个模型创建一个用户并保存它：

```
user = User(email=email, featured=False)
user.save() 
```

但是，即使有默认值和必需标志，如果 BooleanField 设置为 False，我也看不到在 db 中创建该字段。当我在模型中将其设置为 True 或创建用户时，它会创建它并为其保存正确的 True 值。如果该字段为 False 或 True，我希望该字段始终存在于创建中。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:26:42.097

你运行的是什么版本？对于这个问题，我们有一个通过的测试用例：

见：[https ://github.com/MongoEngine/mongoengine/blob/master/tests/test_document.py#L2881-2893](https://github.com/MongoEngine/mongoengine/blob/master/tests/test_document.py#L2881-2893)

# wcf - 带有 tcp 绑定的 wcf 服务：如何知道客户端是否插入登录名/密码？

> ID：11203743
> 
> 赞同：0
> 
> 时间：2012-06-26T08:48:21.333
> 
> 标签：wcf, tcp

好吧，在我的服务的第一个版本中，我有一个双工合同，所以我可以保存客户端的信息，例如它的用户名，如果它已正确登录......等等。目标是只允许调用方法，如果客户端已正确登录。

但是，我需要处理大文件，所以我决定我的服务必须使用流传输模式，但是如果我使用流作为传输模式，我不能使用双工合同。

所以我的问题是我怎么知道我的客户是否已登录？我不想在每次通话中都发送用户名和密码。

此外，出于可扩展性的原因，我想在每次通话时使用一项服务，因此我无法将通话中的信息保存给其他人。或者我可以对所有已记录的客户端使用静态列表？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:24:43.560

如果它的 TCP 绑定即使您在每个请求中传递用户名和密码，如果将保护级别设置为 EncryptAndSign 也会非常安全。如果设置了 Windows 身份验证模式，则通道会自动将此信息嵌入到每个请求中。

```
<security mode = "Transport">
            <transport
               clientCredentialType = "Windows"
               protectionLevel = "EncryptAndSign"
            />
</security> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T19:09:53.057

“简单”的方式：

1.  在您的服务上创建一个方法，该方法根据用户名和密码对您的用户进行身份验证。如果身份验证成功完成，则生成一个令牌 (GUID)。使用高性能外部缓存系统（例如 CouchBase）来存储您的令牌。

2.  在每个客户端请求中，将令牌传递到消息头中，以便在您的服务级别上，使用消息检查器可以检索它。一旦你得到它，检查你的外部缓存中是否存在相同的令牌。如果是，那么您可以允许请求继续其行程，如果不是，则抛出异常（错误）以通知客户端使用了错误的凭据。

3.  当您将令牌保存在缓存设置和过期策略上时，每个成功请求都会更新该令牌。

所有这一切都有一个问题，因为您将在没有会话的情况下使用每个调用，您无法确切知道您的客户端何时停止使用该服务（如 Windows 应用程序/浏览器已关闭）。因此，您的令牌将在缓存中驻留一段时间（由您的缓存策略定义）。

“复杂”的方式：

1.  使用安全令牌服务 (STS) [http://msdn.microsoft.com/en-us/library/ee804740.aspx](http://msdn.microsoft.com/en-us/library/ee804740.aspx)

# c# - 尝试将图像嵌入 Word 文档时出现关系错误

> ID：11203745
> 
> 赞同：1
> 
> 时间：2012-06-26T08:48:22.520
> 
> 标签：c#, openxml, openxml-sdk, wordml, wordprocessingml

我将 PNG 图像添加到 word 2010 文档中，如下所示：

```
var imagePart = report.MainDocumentPart.AddImagePart(ImagePartType.Png);
var imagePath = Path.Combine(imageFolder, "1.png");
var stream = new FileStream(imagePath, FileMode.Open);
imagePart.FeedData(stream);
stream.Close(); 
```

我找到了一个空的 Picture 内容控件的 blip 元素，并将其引用属性更改为指向新图像：

```
var blip = image.Descendants<Blip>().Single();
blip.Embed = report.MainDocumentPart.GetIdOfPart(imagePart); 
```

我保存生成的文档，并使用 Open XML Productivity Tool 对其进行验证。我收到此错误：

```
The relationship 'Ra4d8ccdc5256bb1' referenced by attribute 'http://schemas.openxmlformats.org/officeDocument/2006/relationships:embed' does not exist. 
```

什么是关系？为什么不`AddImagePart`创建一个？如何修复此错误？当我在 Word 中打开生成的文档时，图像不显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:00:34.623

我找到了解决方案。我不知道为什么，但我必须附上

```
WordprocessingDocument report = WordprocessingDocument.Open(path, true) 
```

有这样的`using`声明：

```
using(WordprocessingDocument report = WordprocessingDocument.Open(path, true)) {
    //embed the image
} 
```

没有正确保存`using`文档：没有创建关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:03:22.807

您可以找到一个示例@http: [//msdn.microsoft.com/en-us/library/bb497430.aspx](http://msdn.microsoft.com/en-us/library/bb497430.aspx)

# c# - 是否可以在推特上附上经纬度发帖到推特上？

> ID：11203748
> 
> 赞同：1
> 
> 时间：2012-06-26T08:48:38.990
> 
> 标签：c#, .net, twitter

我们运行一个 ASP.NET MVC 应用程序，并希望它在 Twitter 上发布地理定位的推文，这可能吗？我知道有一些 c# API 可以发布到 Twitter，但我真的不知道他们是否允许这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:58:05.617

是的。POST[状态文档](https://dev.twitter.com/docs/api/1/post/statuses/update)非常清晰

除了发布状态消息外，您还可以包括纬度和经度。

这就是它最基本的。您实际如何验证和执行 HTTP 请求取决于您选择的框架。

# joomla - 点击后 CSS Sprites 在移动设备和平板电脑上消失

> ID：11203750
> 
> 赞同：1
> 
> 时间：2012-06-26T08:48:44.210
> 
> 标签：joomla, tablet, css-sprites

我创建了一个漂亮的 joomla 网站，其精灵导航在 pc 上运行良好，但在移动设备和平板电脑上存在一些问题：在我“触摸”链接后，背景图像消失......我该如何解决这个问题？

请参阅[http://www.kartika.eu/index.php?option=com_content&view=category&layout=blog&id=15&Itemid=239&lang=en](http://www.kartika.eu/index.php?option=com_content&view=category&layout=blog&id=15&Itemid=239&lang=en)

这是我的 CSS 示例：

```
#brands_menu   {
  margin: auto;
}
.tab td {
  display: inline-block;
  height: 153px;
  width: 153px;
  border: none;
}
a.license1:link {
  display:block;
  width:153px;
  height:153px;
  text-indent:-9999px;
  background:url(../images/sprite.png) 0px 0px no-repeat;
  float: left;
  border: none;
}
a.license1:hover {
  display:block;
  width:153px;
  height:153px;
  text-indent:-9999px;
  background:url(../images/sprite.png) 0px -153px no-repeat;
  float: left;
  border: none; 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T09:53:08.440

我自己修！我只需将此代码添加到我的 css 中即可解决问题

```
a.license1 {
  display:block;
  width:153px;
  height:153px;
  text-indent:-9999px;
  background:url(../images/sprite.png) 0px 0px no-repeat;
  float: left;
  border: none;
} 
```

它并不完美，但它有效

# c# - 在使用 SharpCompress 压缩目录中的所有文件时丢弃文件扩展名

> ID：11203755
> 
> 赞同：1
> 
> 时间：2012-06-26T08:49:08.317
> 
> 标签：c#, compression

我正在使用[http://sharpcompress.codeplex.com/](http://sharpcompress.codeplex.com/)来压缩目录：

```
using (var archive = ZipArchive.Create())
{
    archive.AddAllFromDirectory(folderPath);
} 
```

是否可以丢弃具有特殊扩展名的文件：所选文件夹中的 .dll 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:04:34.390

单独添加文件并过滤掉不需要的文件。

```
using (var zip = File.OpenWrite("C:\\test.zip"))
  using (var zipWriter = WriterFactory.Open(ArchiveType.Zip, zip))
  {

  FileInfo[] fi = Directory.GetFiles(folderPath);
  foreach(var f in fi)
  {
    if(f.Extension != ".dll")
      zipWriter.Write(Path.GetFileName(file), filePath);
  }

} 
```

上面单独添加文件的代码取自Sharpcompress[文档](http://sharpcompress.codeplex.com/wikipage?title=Composite%20API%20Examples&referringTitle=Documentation)，还有几行用于过滤掉dll文件。

# .htaccess - 当我添加查询字符串时，Mod_Rewrite 不起作用

> ID：11203758
> 
> 赞同：1
> 
> 时间：2012-06-26T08:49:13.400
> 
> 标签：.htaccess, mod-rewrite, redirect

我在我的 .htaccess 文件中使用以下重写规则，但是每当我向字符串添加参数时，它都会导致重写失败

```
RewriteRule ^c([0-9]+)/[a-zA-z0-9\-]+$ category.php?id=$1 [L] 
```

例如：

如果我执行以下操作，一切正常：

```
c87/newest-post 
```

但如果我去：

```
c87/newest-post?param1=this&param2=that
c87/newest-post/?param1=this&param2=that 
```

它重定向错误并失败。我认为这与 QSA 标签有关，但由于我对重定向的了解不足，我看不出我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:53:56.233

该[`QSA`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_qsa)标志是必需的，因为您在替换 URL 中指定了查询字符串：

> 当替换 URI 包含查询字符串时，RewriteRule 的默认行为是丢弃现有的查询字符串，并将其替换为新生成的查询字符串。使用 [QSA] 标志会合并查询字符串。

对于尾部斜线，您需要进行额外的调整。建议的 RewriteRule 是：

```
RewriteRule ^c([0-9]+)/[a-zA-z0-9\-]+/?$ category.php?id=$1 [QSA,L]
# c87/newest-post?param1=this&param2=that  -> category.php?id=87&param1=this&param2=that
# c87/newest-post/?param1=this&param2=that -> category.php?id=87&param1=this&param2=that 
```

# linux - 高效“cd”进入编程工作区

> ID：11203763
> 
> 赞同：1
> 
> 时间：2012-06-26T08:49:22.833
> 
> 标签：linux, text, editing

我的所有东西编程的*目录结构*目前是这样的 -

文件夹位于此目录下：

```
/home/borax12/programming

-android
-java
-GoogleApps 
```

*每次`cd`对这个目录*进行任何编程都很痛苦。所以我想知道有效访问您的编程文档的*最佳实践是什么。*

我的意见是为所有这些文件夹*创建符号链接*，但我不希望我的主文件夹看起来杂乱无章。

即使我制作了符号链接，我能以某种方式隐藏它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:57:09.727

您可以使用别名（将它们放在您的 中`~/.bashrc`）：

```
alias ,p='cd /home/borax12/programming'
alias ,pj='cd /home/borax12/programming/java'
alias ,pa='cd /home/borax12/programming/android' 
```

所以这些别名以逗号开头，并让您远离代码 3-4 个字符。

```
,p<CR> 
```

然后是[`autojump`](https://github.com/joelthelion/autojump/wiki)整体`cd`优点（由 StackOverflow 用户 IIRC 编写）。

# php - rand() 在 php 中是否与时间相关？

> ID：11203770
> 
> 赞同：5
> 
> 时间：2012-06-26T08:49:46.037
> 
> 标签：php, random

让我们解释一下我的意思。

前段时间，在用c#编写程序时，我犯了以下错误：

```
int Randomize()
{
    Random r=new Random();
    return  r.Next(0,10);
} 
```

在 c# 中，这是一个错误，因为连续调用多次，此函数将返回相同的值。这是因为 Random 构造函数使用时间种子，并且调用之间的时间差太小（我花了一个小时才找到那个:)）。

现在我`rand(...)`在 php 中使用，我需要输出总是不同的，即使同时执行了 2 个脚本。

我是否必须做一些事情才能得到这个结果，或者它是否旨在以这种方式工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T09:00:27.333

`rand()`and 也`mt_rand()`调用`srand()`and`mt_srand()`来产生随机的结果。但这里有一篇关于 php.net 的有趣帖子：

> 请注意，自动播种似乎是使用当前秒数完成的，这意味着您可以在快速服务器上多次运行获得相同的结果。要么使用更频繁更改的种子自己调用 srand()，要么使用似乎没有受到问题影响的 mt_rand()。

因此，只需`srand`更频繁地调用或`mt_rand`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T09:03:15.280

关于`mt_rand()`功能...

来自[http://php.net/manual/en/function.mt-srand.php](http://php.net/manual/en/function.mt-srand.php)

> 从 PHP 4.2.0 开始，不需要使用 srand() 或 mt_srand() 为随机数生成器播种，因为现在这是自动完成的。
> 
> （对于 PHP 5.2.1）PHP 中的 Mersenne Twister 实现现在使用 Richard Wagner 的新播种算法。相同的种子不再产生与以前版本相同的值序列。这种行为预计不会再次改变，但仍然认为依赖它是不安全的。

这是[链接](http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/ewhat-is-mt.html)，描述了“ **Mersenne Twister(MT)** ”伪随机数生成算法（以及C、C++、C# 中的[实现）](http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/VERSIONS/C-LANG/c-lang.html)

[在这里](https://github.com/php/php-src/blob/master/ext/standard/rand.c)你可以找到这个函数在 PHP 5 中的实现

在`php_rand.h`我发现这个：

```
#ifdef PHP_WIN32
#define GENERATE_SEED() (((long) (time(0) * GetCurrentProcessId())) ^ ((long) (1000000.0 * php_combined_lcg(TSRMLS_C))))
#else
#define GENERATE_SEED() (((long) (time(0) * getpid())) ^ ((long) (1000000.0 * php_combined_lcg(TSRMLS_C))))
#endif 
```

所以现在你可以看到，PHP 中的随机函数依赖于`time`函数......

# magento - Magento 1.7 CatalogSearch 与 Sphinx

> ID：11203771
> 
> 赞同：0
> 
> 时间：2012-06-26T08:49:49.437
> 
> 标签：magento, sphinx

我正在尝试将我的 Sphinx 与 Magento 1.7 连接起来。我可以很容易地使用 1.5 使用这个[文档](http://tonyhb.co.uk/2012/05/using-sphinx-within-magento-plus-optimising-search-result-rankings-weights-and-relevancy/)，但是由于 Magento 核心代码自 1.5 以来发生了变化，我无法编辑相同的 magento 源文件，它不会明显地工作。任何人都知道如何做到这一点？

我有需要更改的文件的空类，并且我已经搜索了要修改的这些方法，但它们不再存在。

干杯，Zsolt

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:00:19.033

要编辑的文件：

```
/app/code/core/Mage/CatalogSearch/Model/Resource/Fulltext.php
/app/code/core/Mage/CatalogSearch/Model/Resource/Fulltext/Engine.php
/app/code/core/Mage/CatalogSearch/Helper/Data.php 
```

# html - 如何获取 html5 音频的持续时间

> ID：11203773
> 
> 赞同：39
> 
> 时间：2012-06-26T08:50:06.997
> 
> 标签：html, audio, duration

我在页面中有一个 html5`<audio>`标签，但我怎么知道它的持续时间？

```
<audio controls="">
    <source src="p4.2.mp3">
</audio> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2017-12-17T08:17:54.197

**2020年解决方案：**

当尚未加载音频元数据时，您将获得`undefined`or （不是数字）。`NaN`因此有人建议使用`onloadedmetadata`确保首先获取音频文件的元数据。此外，大多数人没有提到的是，您必须`[0]`像这样定位音频 DOM 元素的第一个索引：

-- 原版 Javascript：

```
var audio = document.getElementById('audio-1');
audio.onloadedmetadata = function() {
  alert(audio.duration);
}; 
```

如果这不起作用，试试这个，但不是那么可靠并且依赖于用户连接：

```
setTimeout(function () {
    var audio = document.getElementById('audio-1');
    console.log("audio", audio.duration);
}, 100); 
```

-- jQuery:

```
$(document).ready(function() {
   var audio = $("#audio-1")[0];
   $("#audio-1").on("loadedmetadata", function() {
       alert(audio.duration);
   }); 
}); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-11-25T16:07:42.907

```
var au = document.createElement('audio');
au.addEventListener('loadedmetadata',function(){
    au.setAttribute('data-time',au.duration);
},false); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-01-30T05:39:09.293

在上面的评论中，提到解决方案是将事件句柄绑定到事件加载的元数据。我就是这样做的——

```
audio.onloadedmetadata = function() {
  alert(audio.duration);
}; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-28T02:46:52.157

我一直在努力在 React 组件中加载持续时间，因此遵循@AlexioVay 的解决方案，如果您使用的是 React，这是一个答案：

这假设您使用的`ref`是音频组件类，您需要将`audio`元素定位为播放/暂停处理程序的元素。

`<audio />`元素：

```
<audio ref={audio => { this.audio = audio }} src={this.props.src} preload="auto" /> 
```

然后在你的`componentDidMount()`：

```
componentDidMount() {

    const audio = this.audio

    audio.onloadedmetadata = () => {
        console.log(audio.duration)
        this.setState({
           duration: this.formatTime(audio.duration.toFixed(0))
        })
    }
} 
```

最后是`formatTime()`函数：

```
formatTime(seconds) {
    const h = Math.floor(seconds / 3600)
    const m = Math.floor((seconds % 3600) / 60)
    const s = seconds % 60
    return [h, m > 9 ? m : h ? '0' + m : m || '0', s > 9 ? s : '0' + s]
        .filter(a => a)
        .join(':')
} 
```

有了这个，`h:mm:ss`格式的持续时间将在音频 src 数据加载后立即显示。甜蜜。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-09T17:27:02.053

我使用“canplaythrough”事件来获取曲目持续时间。我有一个案例，我有两个玩家，我想在第一个玩家完成前 2 秒停止第二个玩家。

```
$('#' + _currentPlayerID).on("canplaythrough", function (e) {   
    var seconds = e.currentTarget.duration;    
    var trackmills = seconds * 1000;
    var subTimeout = trackmills - 2000; //2 seconds before end

    //console.log('seconds ' + seconds);
    //console.log('trackmills ' + trackmills);
    //console.log('subTimeout ' + subTimeout);

    //Stop playing before the end of thet track
    //clear this event in the Pause Event
    _player2TimeoutEvent = setTimeout(function () { pausePlayer2(); }, subTimeout);

}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T08:56:06.620

只需使用`audioElement.duration`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-03-02T09:25:00.733

为了获得阅读的结束，有必要在事件“onended”的情况下使用“loop = false”。如果 loop = true，onended 不起作用；）

要制作播放列表，您必须设置 loop = false 以使用 'onended' 事件来播放下一首歌曲。

如果您的脚本正确完成，您可以在任何地方恢复持续时间。如果 'duration' 的值为 NaN，则浏览器找不到该文件。如果值为'Infinity' 'INF' 它是一个流，在这种情况下，与读取时间'currentime'相比增加了1 mn。对于* IE，它是废话。当前时间可能大于持续时间，在这种情况下，您会这样做： var duration = (this.currentime> this.duration)? this.currenttime: this.duration;

那是（O_°）

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2019-03-13T16:07:35.087

最好使用这样的事件......

```
ObjectAudio.onprogress  =function(){
    if(this.buffered.length){
    var itimeend = (this.buffered.length>1)? this.buffered.end(this.buffered.length-1):this.buffered.end(0);
    ....
        Your code here.......
    }
} 
```

# matlab - 我怎样才能消除他们后面带有“x”的名字？

> ID：11203774
> 
> 赞同：-1
> 
> 时间：2012-06-26T08:50:08.340
> 
> 标签：matlab

嗨，我将 Excel 数据导入 MATLAB，它是一个包含大约 200 个仪表名称的列表，每个名称大约有 28 行。
问题在于，对于每个方向，另一个方向都有一个重复项，其仪表名称相同，`'x'`后面有一个。

有谁知道我`'x'`以后如何消除这些？
以下是我导入数据的代码部分：全部清除

```
fid=fopen('sue1.csv'); % Open the file sue1.csv and read it all and put it into an array
data = textscan(fid,'%s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s','Delimiter',',','CollectOutput',1);
fclose(fid)

j = 1; k = 1; % j - turbine number, k - date number

for i = 1:length(data{1,1}) % Run through all the data
    if strcmp(data{1,1}(i),'') == 0

        meterold{j}(k,:) = data{1,1}(i,:);
%         if strcmp(data{1,1}(i),'MeterName') == 0
%             nummeter{j}(k,:) = str2num(data{1,1}(i,3:end));
%         end
        k = k + 1; 

    else
        % These commands are followed in the strings match (empty line)
        k = 1; % Reset the day counter as we're back to the beginning
        j = j + 1; % Add one to the meter counter as we're now looking at
        % a new turbine
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:10:25.177

很难用样本来回答这个问题，但也许这会有所帮助。

您可以判断一个字符串是否以 'x' 结尾，如下所示：

```
if myString(end) == 'x' 
```

你可以像这样从矩阵中删除一行：

```
M = [1 2 3; 4 5 6; 7 8 9]
M(2,:) = []; 
```

希望您可以将这两者结合起来解决您的问题。

# deployment - Jboss EAR 部署

> ID：11203775
> 
> 赞同：0
> 
> 时间：2012-06-26T08:50:15.080
> 
> 标签：deployment, jboss, ear

我在 Eclipse 下在 jboss 中部署耳朵时遇到了麻烦。我得到了很多 NoClassDefFoundError （例如 Spring 框架），它将通过将 spring 库添加到类路径来解决。但是所有这些类都保存在 EAR 的 APP-INF/lib 路径下，为什么这不起作用？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:22:00.350

保持你的耳朵在 D:\jboss5.1.0-GA-3\server\default\deploy 路径就足够了，请尝试一次问候 Nalika Paul

# iphone - iPhone地图应用程序上的多针点

> ID：11203776
> 
> 赞同：1
> 
> 时间：2012-06-26T08:50:17.077
> 
> 标签：iphone, objective-c, map, xcode4.2

我正在尝试在地图上显示多个点。

我试过

```
DisplayMap *ann = [[DisplayMap alloc] init];   

 for( int i =1;i<=5;i++ ){
     region.center.latitude = 26.438047+i;
     region.center.longitude = 50.116422+i;
     ann.title = [NSString stringWithFormat:@"title %d",i)];
     ann.subtitle =[NSString stringWithFormat:@"subtitle %d",i)];
     ann.image = [NSString stringWithFormat@"image_%d.png",i];

     ann.coordinate=region.center;
     [mapView addAnnotation:ann];
  }
 [ann release]; 
```

此代码，但只有最后一个引脚在地图上。

我可以通过 listArray 或类似的方式解决这个问题吗？如果可以的话，如何使用 objective-c 为对象创建 Array ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T08:56:42.157

您想为每个注释创建 DisplayMap 对象修改您的代码如下

```
for( int i =1;i<=5;i++ ){
  DisplayMap *ann = [[DisplayMap alloc] init];   
  region.center.latitude = 26.438047+i;
  region.center.longitude = 50.116422+i;
  ann.title = [NSString stringWithFormat:@"title %d",i)];
  ann.subtitle =[NSString stringWithFormat:@"subtitle %d",i)];
  ann.image = [NSString stringWithFormat@"image_%d.png",i];

  ann.coordinate=region.center;
  [mapView addAnnotation:ann]; 
```

这将工作

或者你可以使用数组

```
 NSMutableArray *annotationArray = [NSMutableArray alloc]init];
 for(int i = 0; i <= 5; i++) {

   DisplayMap *ann = [[DisplayMap alloc] init];   
   region.center.latitude = 26.438047+i;
   region.center.longitude = 50.116422+i;
   ann.title = [NSString stringWithFormat:@"title %d",i)];
   ann.subtitle =[NSString stringWithFormat:@"subtitle %d",i)];
   ann.image = [NSString stringWithFormat@"image_%d.png",i];
   ann.coordinate=region.center;

   [annotationArray addObject:ann];
 }
 for(DisplayMap *ann in annotationArray) {
  [mapView addAnnotation:ann];
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T08:55:48.460

您应该在 for 循环中分配和释放 ann。

```
 for( int i =1;i<=5;i++ ){

 region.center.latitude = 26.438047+i;
 region.center.longitude = 50.116422+i;

 ann = [[Annotation alloc]init];  //Replace according to your code
 ann.title = [NSString stringWithFormat:@"title %d",i)];
 ann.subtitle =[NSString stringWithFormat:@"subtitle %d",i)];
 ann.image = [NSString stringWithFormat@"image_%d.png",i];

 ann.coordinate=region.center;
 [mapView addAnnotation:ann];
 [ann release];

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T09:08:02.283

试试这个

```
for (int i=0; i<5; i++) {

        lat=m_strLatittude+i;
        lon=m_strLongitude+i;

        MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } }; 
        region.center.latitude = [lat doubleValue];
        region.center.longitude = [lon doubleValue] ;

        region.span.latitudeDelta=mapView.region.span.latitudeDelta;
        region.span.longitudeDelta=mapView.region.span.longitudeDelta;
        [mapView setRegion:region animated:YES]; 

        [mapView setDelegate:self];
        DisplayMap *ann = [[DisplayMap alloc]init]; 
        ann.title = name1;
        ann.subtitle = Address2; 
        ann.coordinate = region.center; 

        [mapView addAnnotation:ann];
        [ann release];
    } 
```

# sql - 使用 iOS 应用更新保存 SQLite 数据

> ID：11203781
> 
> 赞同：0
> 
> 时间：2012-06-26T08:50:27.067
> 
> 标签：sql, ios, xcode, sqlite

这似乎是一个荒谬的问题，但我认为我最好事先仔细检查。

我正在决定使用哪种数据存储方法，目前正在使用 SQLite (libsqllite2.dylib)。

如果我通过应用商店发布应用的更新，那么一旦 iPhone 应用更新，数据库中的数据会被保留还是删除？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:55:33.453

沙箱中未包含在捆绑包中的所有内容（您放入 Documents 文件夹、Library 文件夹等的所有内容）都将被保留。仅替换应用程序包本身。

# android - 为什么在缩放谷歌地图时出现 Nullpointer 异常？

> ID：11203783
> 
> 赞同：1
> 
> 时间：2012-06-26T08:50:29.757
> 
> 标签：android, google-maps

在我的应用程序中，有时并非总是如此，缩放护目镜地图时出现空指针异常，我已经设置了检查条件，但问题仍然存在，请任何人帮助我堆栈跟踪是：-

```
06-25 20:02:31.207: W/System.err(10102): java.lang.NullPointerException
06-25 20:02:31.207: W/System.err(10102):    at com.google.android.maps.ItemizedOverlay.populate(ItemizedOverlay.java:312)
06-25 20:02:31.207: W/System.err(10102):    at com.rentfaster.home.GoogleMapView$GoogleMapViewOverlay.addItem(GoogleMapView.java:1668)
06-25 20:02:31.211: W/System.err(10102):    at com.rentfaster.home.GoogleMapView$Mapdatatask.onPostExecute(GoogleMapView.java:1417)
06-25 20:02:31.211: W/System.err(10102):    at com.rentfaster.home.GoogleMapView$Mapdatatask.onPostExecute(GoogleMapView.java:1)
06-25 20:02:31.215: W/System.err(10102):    at android.os.AsyncTask.finish(AsyncTask.java:602)
06-25 20:02:31.218: W/System.err(10102):    at android.os.AsyncTask.access$600(AsyncTask.java:156)
06-25 20:02:31.218: W/System.err(10102):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
06-25 20:02:31.218: W/System.err(10102):    at android.os.Handler.dispatchMessage(Handler.java:99)
  06-25 20:02:31.222: W/System.err(10102):  at android.os.Looper.loop(Looper.java:137)
  06-25 20:02:31.222: W/System.err(10102):  at android.app.ActivityThread.main(ActivityThread.java:4424)
  06-25 20:02:31.222: W/System.err(10102):  at java.lang.reflect.Method.invokeNative(Native Method)
  06-25 20:02:31.226: W/System.err(10102):  at java.lang.reflect.Method.invoke(Method.java:511)
   06-25 20:02:31.226: W/System.err(10102):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
   06-25 20:02:31.226: W/System.err(10102):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    06-25 20:02:31.230: W/System.err(10102):    at dalvik.system.NativeStart.main(Native Method) 
```

每次都不会出现此问题，这就是为什么我无法找到问题所在，请任何人查看我的代码并建议我：-

```
 @Override
    protected void onPostExecute(Integer result) 
    {
        if(!valueoftotal.equalsIgnoreCase("") && !valueoftotal.equalsIgnoreCase(null))
        {
            if(Integer.parseInt(valueoftotal) > 0 && Integer.parseInt(valueoftotal) <= 100)
            {
                OverlayItem oi;
                if(myHandler.getParsedData()!=null)
                {
                    arrayList = myHandler.getParsedData();      
                }
                linearbottom2.setClickable(true);
                mapOverlays.clear();
                overlay.removeAll();
                lineartabbar.setBackgroundResource(R.drawable.mapbar);

                if(arrayList.size()!=0 && arrayList.size()>1  )
                {
                    for(int i = 0; i < arrayList.size(); i++) { 

                        String latvalue = arrayList.get(i).getLatitude().toString();
                        String lonvalue = arrayList.get(i).getLongitude().toString();

                        GeoPoint point = null;

                        try
                        {
                            point = new GeoPoint((int)(Double.parseDouble(latvalue)*1E6),(int)(Double.parseDouble(lonvalue)*1E6));
                        }
                        catch (NumberFormatException e) 
                        {
                        }

                        if(point != null)
                        {
                            if(arrayList.get(i).getUnitstotal().equalsIgnoreCase("1"))
                            {  
                                oi = overlay.createItem(i);
                                if(overlay!=null && oi!=null)
                                {
                                overlay.addItem(oi);
                                }
                            }
                            else if(!arrayList.get(i).getUnitstotal().equalsIgnoreCase("1"))
                            {
                                oi = overlay.createItem(i);
                                if(overlay!=null && oi!=null)
                                {
                                    overlay.addItem(oi);

                                }

                            }
                        }
                    }
                    mapOverlays.add(overlay);
                    mapView.invalidate();

                }
                else if( arrayList.size()!=0 && arrayList.size()==1 )
                {
                    for(int i = 0; i < arrayList.size(); i++) { 

                        String latvalue = arrayList.get(i).getLatitude().toString();
                        String lonvalue = arrayList.get(i).getLongitude().toString();

                        GeoPoint point = null;
                        try
                        {
                            point = new GeoPoint((int)(Double.parseDouble(latvalue)*1E6),(int)(Double.parseDouble(lonvalue)*1E6));
                        }
                        catch (NumberFormatException e) {
                            // TODO: handle exception
                        }

                        if(point != null)
                        {
                            if(arrayList.get(i).getUnitstotal().equalsIgnoreCase("1"))
                            {  

                                oi = overlay.createItem(i);
                                System.out.println("listing when 1 value is  "+arrayList.get(i).getUnitstotal());

                                overlay.addItem(oi);
                                mc.animateTo(point);
                                mc.setCenter(point);
                                mc.setZoom(16);
                            }
                            else if(!arrayList.get(i).getUnitstotal().equalsIgnoreCase("1"))
                            {

                                oi = overlay.createItem(i);
                                System.out.println("listing when more value is  "+ arrayList.get(i).getUnitstotal());

                                overlay.addItem(oi);
                                mc.animateTo(point);
                                mc.setCenter(point);
                                mc.setZoom(12);

                            }
                        }
                    }

                    mapOverlays.add(overlay);
                    mapView.invalidate();

                    MapController mcontrller =mapView.getController();

                    /*mcontrller.animateTo(arg0)
                    mcontrller.setCenter();
                    mcontrller.setZoom(zoomLevel);
                    */

                }

                textViewpopup.setText(valueoftotal+" listings found.");
                linearlayoutpopup.setVisibility(View.VISIBLE);
                RunAnimationslisting();

            }
            else if(Integer.parseInt(valueoftotal) > 100)
            {

                Eyelidmessage(valueoftotal+" listings found. \n Zoom-in, press the locate button below or select the refine button above to display fewer properties. ");
                lineartabbar.setBackgroundResource(R.drawable.mapwithoutlist);
                linearbottom2.setClickable(false);                  

            }
            else if(Integer.parseInt(valueoftotal) == 0)
            {
                GoneAnimations();
                lineartabbar.setBackgroundResource(R.drawable.mapwithoutlist);
                linearbottom2.setClickable(false);
                customizeDialog = new CustomizeDialog(activity);  
                customizeDialog.setTitle("Sorry");  
                customizeDialog.setMessage("No Listing Found");  
                customizeDialog.show();
            }
        }

        super.onPostExecute(result);
    } 
```

对不起我的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:09:25.577

而不是写

```
protected void onPostExecute(Integer result) 
{
    if(!valueoftotal.equalsIgnoreCase("") && !valueoftotal.equalsIgnoreCase(null))
    {
    }
} 
```

试试这个

```
protected void onPostExecute(Integer result) 
{
    if(valueoftotal!=null)
    if(!valueoftotal.equalsIgnoreCase(""))
    {
    }
} 
```

# c# - WebBrowser 控件中的 Google 字体仅在受到外部“帮助”时才会显示

> ID：11203784
> 
> 赞同：5
> 
> 时间：2012-06-26T08:50:34.153
> 
> 标签：c#, winforms, webbrowser-control, webfonts, google-webfonts

目前，我在 .NET 2.0 WinForms 应用程序中看到了一个奇怪的行为。

托管一个从其自己的应用程序内置 Web 服务器（[这个）中提取数据的](http://webserver.codeplex.com/)[`WebBrowser`控件](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)，一切正常，直到涉及到[Google Web Fonts](http://www.google.com/webfonts)。

**脚步：**

在 Windows 7 下，会出现以下行为：

1.) 启动应用程序。该页面不*显示*Google Web 字体：

![在此处输入图像描述](../Images/f7cbec4468f4aeb8b2a9d7e5776ad8cd.png)

2.) 在独立的 Internet Explorer 实例中打开内置 Web 服务器的 URL：

![在此处输入图像描述](../Images/44c4eef9971621e08d7dc7966c31d6ba.png)

3.) 回到 C# 应用程序，按 F5：

![在此处输入图像描述](../Images/719f8dbe2dfd63f5824c1ef4ecd2d916.png)

现在，字体在我的应用程序中也是可见的。

**行为：**

似乎独立的 IE 做了额外的事情，我的应用程序中的托管 IE 是不允许做的。

在独立 IE 中打开 URL 后，我可以同时关闭我的应用程序和 IE，然后重新启动我的应用程序，仍然可以得到正确的行为。

清除 IE 数据（缓存、cookie 等）时，再次需要执行步骤 1-3 才能将 Google Web 字体导入托管的 Web 浏览器。

**我的假设：**

我猜这与 IE 似乎需要在其语言环境缓存中“安装”网络字体的权限有关。我刚刚`Access-Control-Allow-Origin:*`在我的请求标头中添加了一个，但这似乎并没有改善任何东西。

**我的问题：**

您是否对如何使 Google Web Fonts 在我的场景中工作而无需启动独立 IE 有任何提示？

**2013-08-22 更新 - 解决方案：**

根据[亚当的建议](https://stackoverflow.com/a/12648705/107625)，我更改了`WebBrowser`控件的用户代理，这很有效。现在，我的 WinForms 应用程序中确实有 Web 字体和托管浏览器。

[代码](https://stackoverflow.com/q/937573/107625)看起来像：

```
public void ChangeUserAgent()
{
    // https://stackoverflow.com/a/12648705/107625
    const string ua = @"Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; WOW64; Trident/6.0)";

    // https://stackoverflow.com/q/937573/107625
    UrlMkSetSessionOption(UrlmonOptionUseragent, ua, ua.Length, 0);
} 
```

使用这些 P/Invoke 辅助函数：

```
[DllImport(@"urlmon.dll", CharSet = CharSet.Ansi)]
private static extern int UrlMkSetSessionOption(
    int dwOption, 
    string pBuffer, 
    int dwBufferLength, 
    int dwReserved);

private const int UrlmonOptionUseragent = 0x10000001; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T23:52:18.313

您是否尝试过从您的网络服务器而不是 Google 的服务器下载字体并运行它们？您应该能够从 Google 的网络服务器下载 CSS 文件和 WOFF/EOT 文件并将它们本地放置在您的网络服务器上。之后，您需要更改 Google 的 CSS 文件以指向您的本地 WOFF 文件。

我知道这并不能真正解决 WebBrowser 控件的奇怪行为，但它可以作为一种解决方法。

编辑：似乎CSS是每个浏览器动态生成的。我为 Chrome 获得的 CSS 与我为 IE 获得的 CSS 不同。不过，这可能仍然对您有用，因为它似乎通过 WebBrowser 控件在受控环境中运行，因此它应该始终是 IE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T22:23:53.657

您看到的差异*可能是*因为托管 Web 浏览器控件以怪异模式运行。[尝试关闭怪癖模式](https://stackoverflow.com/questions/646742/how-to-programmatically-turn-off-quirks-mode-in-ie8-webbrowser-control)，看看它是否有任何效果。

# ruby-on-rails - Rails、关联、路由、控制器、kerfuffle

> ID：11203786
> 
> 赞同：1
> 
> 时间：2012-06-26T08:50:44.763
> 
> 标签：ruby-on-rails, ruby, controller, routes

我的模型

```
class Client < ActiveRecord::Base
  attr_accessible :name
  has_many :bookings
  validates_presence_of :name
end

class Agent < ActiveRecord::Base
  attr_accessible :name
  has_many :bookings
  validates_presence_of :name
end

class Booking < ActiveRecord::Base
  attr_accessible :booking_time, :agent_id
  belongs_to :client
  belongs_to :agent
  validates_presence_of :booking_time
end 
```

这让我很头疼。我希望从代理和客户双方查看预订，但是预订控制器的索引方法如何处理路线？

`agents/agent_id/bookings and clients/client_id/bookings`?

第二个问题：只有客户创建预订，但我如何正确维护预订和代理之间的关系？

```
 def create
    @client = Client.find(params[:client_id])
    @booking = @client.bookings.build(params[:booking])
    @agent = Agent.find(params[:booking][:agent_id])
    @agent.bookings << @booking

    if (@booking.save and @agent.save)
      redirect_to [@client, @booking]
    else
      render :action => "new", :notice => "Booking could not be created"
    end
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T13:32:18.387

至于第一个问题，您只需将其放在您的路线（config/routes.rb）中：

```
resources :agents do
    resources :bookings
end

resources :clients do
    resources :bookings
end 
```

这将在您的 URL 上创建嵌套。有关 Rails 指南的更多信息：http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

至于第二个问题：我不确定您要做什么。这实际上取决于您要从代理商和预订中拯救什么。我不知道他们之间的行为是如何运作的。

您如何测试您的应用程序？

# iphone - 像 UIImage 这样的 iOS 视频在哪里存储？

> ID：11203791
> 
> 赞同：0
> 
> 时间：2012-06-26T08:50:58.633
> 
> 标签：iphone, objective-c, ios

我在 UIImage 中保存图像，例如：

```
 newImage=[UIImage imageWithData:[NSData dataWithContentsOfURL:imageUrl options:0 error:&err]]; 
```

在此之后，我想从网络上获取视频并将其存储以供进一步使用我应该使用哪种类型的变量来存储视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:02:32.607

您只需要从服务器下载视频。然后将下载的数据保存到 Document 目录。您可以使用 AVPlayer 或 MPMoviePlayer 播放视频。参考这篇文章[播放本地视频文件](https://stackoverflow.com/questions/10012444/mpmovieplayercontroller-doesnt-play-newly-saved-video-file)

# javascript - JavaScript WebSocket 非空终止字符串

> ID：11203794
> 
> 赞同：1
> 
> 时间：2012-06-26T08:51:10.647
> 
> 标签：javascript, string, websocket, null-terminated

我有一个非常奇怪的问题。我有一个开放的 WebSocket，通信完美。我还有窗口的 onblur 和 onfocus 事件，它们通过所述连接通知服务器。但是，在这种情况下，我收到的字符串是非空终止的。否则，即使发送在那些相应的模糊/焦点事件上发送的相同字符串，通信也绝对无可挑剔。为什么会这样，如何解决？

这是一些代码：

```
$(document).ready(function(){

    initializeEverything();

    window.onblur = function(){ notifyFocusChange(false); };

    window.onfocus = function(){ notifyFocusChange(true); };

});

function notifyFocusChange(present){

    if(present){
        webSocket.send('presence:present');
    }else{
        webSocket.send('presence:absent');
    }

} 
```

这是事件触发时我收到的非空终止字符串的示例：

`presence:absentÏ┘ê÷/à°äJ÷ÝÿLÓ▓ùM÷Ýÿ[`

编辑：有人建议这可能是服务器错误，所以这里是解码传入消息的代码：

```
private function decode($payload) {

    $length = ord($payload[1]) & 127;

    if ($length == 126) {
        $masks = substr($payload, 4, 4);
        $data = substr($payload, 8);
    } elseif ($length == 127) {
        $masks = substr($payload, 10, 4);
        $data = substr($payload, 14);
    } else {
        $masks = substr($payload, 2, 4);
        $data = substr($payload, 6);
    }

    $text = '';
    for ($i = 0; $i < strlen($data); ++$i) {
        $text .= $data[$i] ^ $masks[$i % 4];
    }

    return $text;

} 
```

编辑：它只发生在 Chrome 中。我在 Firefox 上检查了它，它使用相同的 WebSocket 协议，在那里一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:17:41.173

onblur 和 onfocus 事件可能会快速连续发生几次。这意味着 websocket.send 调用也被快速连续多次快速调用。

如果多个发送调用发生得足够近，那么您很可能会在服务器的一次读取中收到多个帧，我相信这就是您所看到的。换句话说，有效载荷中的“垃圾”实际上是一个或多个后续 WebSocket 帧。

您可以手动复制问题，在同一个 Javascript 上下文中执行两次单独的发送：

```
function do_test () {
    ws.send("data1");
    ws.send("data2");
} 
```

这将发送两个足够接近的 WebSocket 帧，服务器可能会从套接字一次读取它们。

为了正确处理帧，您必须解析有效负载长度字段，并且只读取/取消屏蔽指定数量的有效负载数据。剩下的任何东西都需要排队作为新帧的开始。

此外，从套接字读取的一次读取不仅可以返回多个 Websocket 帧，而且您不能依赖作为整个帧读取的帧：您可能在一次读取中读取一半帧，在下一帧读取另一半帧。换句话说，第一次从套接字读取时，您可能会得到 3 个完整的 websocket 帧加上第 4 帧的 1 个字节，然后在下一次从套接字读取时，您会得到第 4 帧的其余部分。

这通常可以这样总结：WebSockets 是基于消息的传输协议，而 TCP 套接字是流式协议。由于 WebSockets 在 TCP 上分层，这意味着 WebSocket 服务器（和客户端）必须进行转换以将整个消息呈现给应用程序，即使底层传输不是基于消息的。

# c# - 如何移动和调整通过绘图创建的线的大小？

> ID：11203796
> 
> 赞同：4
> 
> 时间：2012-06-26T08:51:17.977
> 
> 标签：c#, visual-studio-2010

我用这段代码在面板中画了一条线。

```
 private bool isMoving = false;
    private Point mouseDownPosition = Point.Empty;
    private Point mouseMovePosition = Point.Empty;
    private List<Tuple<Point, Point>> lines = new List<Tuple<Point, Point>>();

    private void PanelPaint(object sender, PaintEventArgs e)
    {
        var g = e.Graphics;
        Pen p = new Pen(Color.Red, 7);
        if (isMoving)
        {
            e.Graphics.SmoothingMode = SmoothingMode.AntiAlias;
            g.Clear(panel1.BackColor);

            g.DrawLine(p, mouseDownPosition, mouseMovePosition);
            foreach (var line in lines)
            {
                g.DrawLine(p, line.Item1, line.Item2);
            }
        }
    }

    private void PanelMouseDown(object sender, MouseEventArgs e)
    {
        isMoving = true;
        mouseDownPosition = e.Location;
    }

    private void PanelMouseMove(object sender, MouseEventArgs e)
    {
        if (isMoving)
        {
            mouseMovePosition = e.Location;
            panel1.Invalidate();
        }
    }

    private void PanelMouseUp(object sender, MouseEventArgs e)
    {
        if (isMoving)
        {
            lines.Add(Tuple.Create(mouseDownPosition, mouseMovePosition));
        }
        isMoving = false;
    } 
```

然后我需要能够通过鼠标调整和移动线条，但我不知道我该怎么做。

如果您对此有任何想法或教程，我将不胜感激。

谢谢大家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T20:48:27.787

![线移动](../Images/1ec22d46e87a4e505a6d3f45e334b05a.png)

```
public class LineMover : Form
{
  public LineMover()
  {

    this.DoubleBuffered = true;

    this.Paint += new PaintEventHandler(LineMover_Paint);
    this.MouseMove += new MouseEventHandler(LineMover_MouseMove);
    this.MouseDown += new MouseEventHandler(LineMover_MouseDown);
    this.MouseUp += new MouseEventHandler(LineMover_MouseUp);

    this.Lines = new List<GraphLine>()
    {
      new GraphLine (10, 10, 100, 200),
      new GraphLine (10, 150, 120, 40),
    };
  }

  void LineMover_MouseUp(object sender, MouseEventArgs e)
  {
    if (Moving != null)
    {
      this.Capture = false;
      Moving = null;
    }
    RefreshLineSelection(e.Location);

  }

  void  LineMover_MouseDown(object sender, MouseEventArgs e)
  {
    RefreshLineSelection(e.Location);
    if (this.SelectedLine != null && Moving == null)
    {
      this.Capture = true;
      Moving = new MoveInfo 
       {
          Line = this.SelectedLine, 
          StartLinePoint = SelectedLine.StartPoint, 
          EndLinePoint = SelectedLine.EndPoint, 
          StartMoveMousePoint = e.Location 
       };
    }
    RefreshLineSelection(e.Location);
  }

  void LineMover_Paint(object sender, PaintEventArgs e)
  {
    e.Graphics.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.High;
    e.Graphics.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;
    foreach (var line in Lines)
    {
      var color = line == SelectedLine ? Color.Red : Color.Black;
      var pen = new Pen(color, 2);
      e.Graphics.DrawLine(pen, line.StartPoint, line.EndPoint);
    }
  }
  void LineMover_MouseMove(object sender, MouseEventArgs e)
  {
    if (Moving != null)
    {
      Moving.Line.StartPoint = new PointF(Moving.StartLinePoint.X + e.X - Moving.StartMoveMousePoint.X, Moving.StartLinePoint.Y + e.Y - Moving.StartMoveMousePoint.Y);
      Moving.Line.EndPoint = new PointF(Moving.EndLinePoint.X + e.X - Moving.StartMoveMousePoint.X, Moving.EndLinePoint.Y + e.Y - Moving.StartMoveMousePoint.Y);
    }
    RefreshLineSelection(e.Location);
  }

  private void RefreshLineSelection(Point point)
  {
    var selectedLine = FindLineByPoint(Lines, point);
    if (selectedLine != this.SelectedLine)
    {
      this.SelectedLine = selectedLine;
      this.Invalidate();
    }
    if (Moving != null)
      this.Invalidate();

    this.Cursor =
        Moving != null ? Cursors.Hand :
        SelectedLine != null ? Cursors.SizeAll :
          Cursors.Default;

  }

  public List<GraphLine> Lines = new List<GraphLine>();
  GraphLine SelectedLine = null;
  MoveInfo Moving = null;

  static GraphLine FindLineByPoint(List<GraphLine> lines, Point p)
  {
    var size = 10;
    var buffer = new Bitmap(size * 2, size * 2);
    foreach (var line in lines)
    {
      //draw each line on small region around current point p and check pixel in point p 

      using (var g = Graphics.FromImage(buffer))
      {
        g.Clear(Color.Black);
        g.DrawLine(new Pen(Color.Green, 3), line.StartPoint.X - p.X + size, line.StartPoint.Y - p.Y + size, line.EndPoint.X - p.X + size, line.EndPoint.Y - p.Y + size);
      }

      if (buffer.GetPixel(size, size).ToArgb() != Color.Black.ToArgb())
        return line;
    }
    return null;
  }

  public static void Main()
  {
    Application.Run(new LineMover());
  }
}

public class MoveInfo
{
  public GraphLine Line;
  public PointF StartLinePoint;
  public PointF EndLinePoint;
  public Point StartMoveMousePoint;
}
public class GraphLine
{
  public GraphLine(float x1, float y1, float x2, float y2)
  {
    this.StartPoint = new PointF(x1, y1);
    this.EndPoint = new PointF(x2, y2);
  }
  public PointF StartPoint;
  public PointF EndPoint;
} 
```

由深灰色。在链接...[图形 - DrawLine - 画线并移动它](https://stackoverflow.com/questions/10768570/graphic-drawline-draw-line-and-move-it/10770616#10770616)

# c# - 在 2 个 dll 中具有命名空间名称的模棱两可的类

> ID：11203813
> 
> 赞同：20
> 
> 时间：2012-06-26T08:52:24.030
> 
> 标签：c#, instance, ddl

我已经向我的应用程序（第三方）导入了 2 个 dll 现在它们都有一个同名的命名空间。例如 AB 并且在它们两者中都有一个具有相同名称的类。现在我想创建其中一个的实例，但由于命名空间和类名相同，编译器变得模棱两可。如何指定在该地方使用的女巫 dll？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-26T09:10:55.567

假设您有 2 个程序集 (`ClassLibrary1.dll`和`ClassLibrary2.dll`)，它们都在同一个命名空间中定义了同一个类：

```
namespace Foo
{
    public class Bar
    {
    }
} 
```

现在在消费项目中，您可以在类库的引用中定义一个额外的别名：

![在此处输入图像描述](../Images/f0c713b1dd5557ee0eba233349a8132d.png)

现在您可以执行以下操作来帮助编译器消除歧义：

```
extern alias lib1;
extern alias lib2;

class Program
{
    static void Main()
    {
        var barFromLib1 = new lib1::Foo.Bar();
        var barFromLib2 = new lib2::Foo.Bar();
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-07-19T10:08:39.717

只是一点改进或增强的信息：如果您有多个使用，“外部别名 lib1;”-line 必须是这些使用中的第一个（但 MS VS 也会通知您）。

# python - 在 classes/def 中传递变量并在 Tkinter 中使用命令

> ID：11203814
> 
> 赞同：1
> 
> 时间：2012-06-26T08:52:24.257
> 
> 标签：python, class, tkinter, ttk

下面的代码（没有全部显示）是我第一次尝试使用类。我试图主要传递变量框，因为我希望从 Tkinter 中的 Entry 小部件中检索值。

我似乎可能已经完成了课程，但我很难通过 Tkinter 小部件中的“命令”从内部调用定义。

如果有人能解释我写得很糟糕的类代码哪里出错了，以及是否有可能获得框值，我会非常高兴。

如果这是对以前任何问题的重复，我深表歉意。

```
class Start():
    def ChoiceBox(self, choice):

        column = 0
        if choice == "Fixed":
            choice_frame.grid_forget()      
            tkMessageBox.showinfo("Message", "No optimisation, value fixed.")
        elif choice == "List":
            i = [0, 1, 2, 3]

            for i in i:
                choice_title = Label(choice_frame, text='Value %g'% float(i+1), bg='white', borderwidth=0, width=0)
                choice_title.grid(row=0, column=column+i, sticky="nsew", padx=1, pady=1)

                self.box = Entry(choice_frame, bg='white', borderwidth=0, width=0)
                self.box.grid(row=1, column=column+i, sticky="ew", padx=1, pady=1)

                tkMessageBox.showinfo("Message", "Please fill in list values.")

        elif choice == "Interval" or "Optimisation":
            i = [0, 1]
            choice_title1 = Label(choice_frame, text='Min Value', bg='white', borderwidth=0, width=0)
            choice_title1.grid(row=0, column=column, sticky="nsew", padx=1, pady=1)
            choice_title2 = Label(choice_frame, text='Max Value', bg='white', borderwidth=0, width=0)
            choice_title2.grid(row=0, column=column+1, sticky="nsew", padx=1, pady=1)
            for i in i:
                box = Entry(choice_frame, bg='white', borderwidth=0, width=0)
                box.grid(row=1, column=column+i, sticky="nsew", padx=1, pady=1)
                tkMessageBox.showinfo("Message", "Enter Min/Max values.")

    def StartBut(self):
    if self.box.get() == "":
            pass
        else:
            value = self.box.get()

list1 = OptionMenu(frame_table, variablelist, 'Fixed', 'List', 'Interval', 'Optimisation', command=Start.ChoiceBox)

but1 = Button(frame_but, text='Start', command=Start.StartBut) 
```

更新：我现在得到的错误：'unbound method'ChoiceBox()' 必须以 Start 实例作为第一个参数来调用（取而代之的是 str 实例）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:53:38.597

`def ChoiceBox(choice):`这应该是`def ChoiceBox(self, choice)`：

在此处阅读有关 python 类如何工作的更多信息[。](http://docs.python.org/tutorial/classes.html)

# php - 如何使用 Sencha Touch 2 (Native Packaging) 创建 Widget？

> ID：11203819
> 
> 赞同：0
> 
> 时间：2012-06-26T08:52:33.873
> 
> 标签：php, mysql, sencha-touch-2

我是 Sencha Touch 2 的新手，并使用 sencha 和 PHP/MySQL 作为后端创建了一个基本应用程序。目前我正在通过移动网络浏览器访问网络服务。

有什么方法可以创建像“AndroidMarket”这样的应用程序小部件，这样用户就可以在没有任何网络浏览器的情况下访问它？

如果是，是否有任何链接或教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:24:46.360

这是一个很好的起点：

[Sencha Touch 2 Android 原生打包](http://docs.sencha.com/touch/2-0/#!/guide/native_android)

# visual-studio-2010 - Debug.WriteLine 未将输出写入 Visual Studio 2010 中的 OutputWindows

> ID：11203826
> 
> 赞同：5
> 
> 时间：2012-06-26T08:53:03.857
> 
> 标签：visual-studio-2010, debugging

工具|选项|调试将所有输出重定向到立即未选中。
工具|选项|调试|输出窗口 常规输出设置全部开启。调试配置被激活，define DEBUG 常量被选中。

仍然 Debug.WriteLine("test") 没有向输出窗口写入任何内容（也无法从 sysinternals 在 DebugView 中捕获它）。什么会导致这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-28T17:04:42.723

或使用这个：

System.Diagnostics.Debug.Listeners(0).WriteLine

而不仅仅是 Debug.WriteLine

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T12:49:39.467

在配置文件中有这个，希望可以帮助别人：

```
<system.diagnostics>
    <trace>
      <listeners>
          <clear/>
      </listeners>
    </trace>
  </system.diagnostics> 
```

清除清除，现在一切正常。谢谢@Hans Passant。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T14:16:15.230

我解决了关闭项目的问题，删除了“bin”和“obj”文件夹。重新打开项目和 Debug.WriteLine 工作......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-03T12:08:21.927

只想对任何提出这个问题的人说，给出的答案是 0，System.Diagnostics.Debug.Listeners(0).WriteLine 在 VS2013 中对我有用。将 console.writeLine 和/或 debug.WriteLine 更改为上述内容，打开您的即时窗口并在那里输出。祝你好运

# asp.net-mvc-3 - 在 Specflow 中替换 Gherkin

> ID：11203828
> 
> 赞同：1
> 
> 时间：2012-06-26T08:53:07.897
> 
> 标签：asp.net-mvc-3, specflow, gherkin

我们刚刚决定在我们的 .Net MVC 项目中使用 Specflow。

有什么方法可以用任何替代语言替换当前使用的语言，即 Gherkin？有没有可用的替代品？

干杯，

哈桑

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T09:24:26.497

如果您对“替代语言”的意思是**本地化**（即将“给定”、“何时”、“那么”、“为了”……翻译成德语“Angenommen”、“Wenn”、“Dann”…… ) 你可以在配置文件中做

```
<configuration>
  <configSections>
    <section name="specFlow" type="TechTalk.SpecFlow.Configuration.ConfigurationSectionHandler, TechTalk.SpecFlow"/>
  </configSections>
  <specFlow>
    <language feature="de-DE" tool="" />
  </specFlow>
</configuration> 
```

有关详细信息，请参阅[使 SpecFlow / Cuke4VS 理解非英语 .feature 文件](https://stackoverflow.com/questions/10529222/make-specflow-cuke4vs-understand-non-english-feature-files)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:00:08.753

我不相信在 specflow 中使用替代语言是可能的。

我不确定你为什么要替换 Gherkin，我发现通过使用 Gherkin，企业能够为创建和运行的测试用例提供有价值的输入，这是因为 Gherkin 语言非常人性化可读。

# java - 如何在 itext 5.2.1 中将图像添加到标题

> ID：11203831
> 
> 赞同：-2
> 
> 时间：2012-06-26T08:53:21.753
> 
> 标签：java, pdf, itext

![在此处输入图像描述](../Images/439c545581191f1678d5c04933dd4c1f.png) 如何在 itext 5.2.1 中将图像添加到标题？

如图所示，徽标应填满标题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T08:59:16.657

尝试使用它：

```
Image logo = Image.getInstance("/image.gif");
logo.setAlignment(Image.MIDDLE);
logo.scaleAbsoluteHeight(20);
logo.scaleAbsoluteWidth(20);
logo.scalePercent(100);
Chunk chunk = new Chunk(logo, 0, -45);
HeaderFooter header = new HeaderFooter(new Phrase(chunk), false);
header.setAlignment(Element.ALIGN_CENTER);
header.setBorder(Rectangle.NO_BORDER);
document.setHeader(header); 
```

当然对象文档是： Document document = new Document();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:25:55.277

几天前您已经发布了一个非常[相似的问题。](https://stackoverflow.com/q/11117154/1065525)在我对这个问题的回答中，我指出了[另一个答案](https://stackoverflow.com/a/9175638/1065525)。您可以添加一个图像，而不是像那里描述的那样向标题表添加文本。

# mocking - 生成的服务模拟：除了 RhinoMocks 之外的一切都失败了？

> ID：11203833
> 
> 赞同：2
> 
> 时间：2012-06-26T08:53:23.863
> 
> 标签：mocking, moq, rhino-mocks, fakeiteasy, nsubstitute

请参阅此代码：

```
TicketStoreService fakeTicketStoreService = 
                                        MockRepository.GenerateMock<TicketStoreService>(); 

fakeTicketStoreService.Expect(service => service.DoSomething(Arg.Is(new Guid()))
                      .Return(new Guid());

fakeTicketStoreService.DoSomething(Arg.Is(new Guid()));
fakeTicketStoreService.VerifyAllExpectations(); 
```

**请注意，这`DoSomething`是从 NO 接口继承的自动生成类中的非虚拟方法调用。**因此，根据常识，它不应该起作用。**但确实如此。**

问题是它是唯一可以做到这一点的（非商业）框架：

*   Rhino.Mocks 有效，验证也有效
*   FakeItEasy 说它没有找到默认构造函数（可能只是错误的异常消息）：`No default constructor was found on the type SomeNamespace.TicketStoreService`
*   起订量给出了一些理智和可以理解的东西：`Invalid setup on a non-virtual (overridable in VB) member: service=> service.DoSomething`
*   Nsubstitute 给消息`System.NotSupportedException: Cannot serialize member System.ComponentModel.Component.Site of type System.ComponentModel.ISite because it is an interface.`

我真的很想知道框架在这里发生了什么，除了起订量。“花哨的新”框架似乎也有一个初步的性能命中，可能准备了一些类型缓存和序列化的东西，而 RhinoMocks 不知何故设法创建了一个非常“苗条”的模拟而没有递归。我不得不承认我不太喜欢 RhinoMocks，但它在这里闪耀……不幸的是。

**那么，有没有办法让它与更新的（非商业的！）模拟框架一起工作，或者以某种方式从 Rhino.Mocks 中得到一个理智的错误消息（描述我实际使用的 6 个参数中的哪一个是不同的） ? 为什么 Rhino.Mocks 能做到这一点，当每个 Mocking 框架都明确表示它只能在给定具体类时使用虚拟方法时？**

*我们不要通过讨论替代方法（例如 Extract&Override 或运行时代理 Mocking 框架（例如 JustMock/TypeMock/Moles）或新的 Fakes 框架）来破坏讨论，我知道这些，但由于本主题之外的原因，这不是理想的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T00:19:46.033

您可以尝试使用 il weaving 使所有成员虚拟化的 Fody 插件[Virtuosity](https://github.com/Fody/Virtuosity)，因此任何基于动态代理的库都可以使用它。检查[Fody 示例](https://github.com/Fody/Fody/wiki/SampleUsage)以了解连接它所涉及的内容。

至于为什么 Rhino Mocks 有效，我无法理解：

```
[Test]
public void FieldTest() {
    var fakeTicketStoreService = MockRepository.GenerateMock<TicketStoreService>(); 
    fakeTicketStoreService.Expect(service => service.DoSomething(Arg.Is(new Guid()))).Return(new Guid());
    fakeTicketStoreService.DoSomething(Arg.Is(new Guid()));
    fakeTicketStoreService.VerifyAllExpectations();
}

public class TicketStoreService {
    public Guid DoSomething(Guid guid) { return guid; }
} 
```

它失败了：

```
System.InvalidOperationException : Invalid call, the last call has been used or no call has been made (make sure that you are calling a virtual (C#) / Overridable (VB) method).
   at Rhino.Mocks.LastCall.GetOptions()
   at Rhino.Mocks.RhinoMocksExtensions.Expect(T mock, Function`2 action) 
```

看起来这里还发生了其他事情。你能发布一个独立的、最小的案例来重现这个吗？

最后，您提到的所有库都是开源的，因此最好选择您最喜欢的库，看看您是否可以改进错误消息或性能。如果您在看起来有点令人生畏之前还没有为开源做出过贡献，但是项目中的人们通常非常乐意尝试帮助任何有兴趣做出贡献的人。:)

*   [起订量来源](http://code.google.com/p/moq/source/checkout)
*   [FakeItEasy 源](https://github.com/FakeItEasy/FakeItEasy)
*   [N替代源](https://github.com/nsubstitute/NSubstitute/)
*   [Rhino Mocks 源](https://github.com/RhinoMocks/RhinoMocks)（我认为这是它现在的家）

# objective-c - 通过 Objective-C/Cocoa 使用 OpenGL

> ID：11203836
> 
> 赞同：0
> 
> 时间：2012-06-26T08:53:30.957
> 
> 标签：objective-c, macos, opengl

我一直在研究 Mac OS X 上的 OpenGL 编程。虽然对于那些用纯 C、C++ 甚至 Python 进行编程的人来说，关于这个主题的信息量相当可观，但对于 Objective-C/Cocoa 开发人员来说却很少，而且还有很多存在已经*过时*了（我们说的是 2002-2006 年，技术上的一个永恒之前）。正因为如此，很难找到准确、最新的信息，导致我提出这个问题：Obj-C/Cocoa 开发人员现在最常通过什么途径使用 OpenGL（特别是在 3D 渲染中）？

此外，我被引导相信大部分 OpenGL 都没有 Objective-C/Cocoa 绑定。这是真的？

如有必要，我可以学习另一种语言，但如果可能的话，我更愿意坚持使用 Obj-C，这样我就可以专注于学习 OpenGL 而不是整个编程语言（C++ 看起来特别令人生畏）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T09:28:07.647

据我所知，OpenGL 函数没有 Obj-C 包装器，所以你不得不使用 C API。此外，尝试将其包装在对象中是没有用的，因为编写 3D 图形完全是为了性能，使用 C 函数比使用对象的方法快得多。

Objective-C 基于 C，因此您可以在 Cocoa 应用程序中自由使用 C OpenGL API。至于绑定，在 Cocoa 中，您可以将 NSOpenGLView 子类化以绑定到 OpenGL。您可以覆盖以下方法：

`- (void)prepareOpenGL;`生成纹理、设置绘图状态等。

`- (void)reshape;`在调整视图大小时更新您的投影。

最重要的是，您可以覆盖：

`- (void)drawRect:`做你的自定义绘图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:48:43.277

到目前为止，没有广泛的 Objective-C 绑定到 OpenGL。如果你有 Apple 开发者帐户，我建议你查看今年的 WWDC 视频，看看在不久的将来这种情况是否会发生变化。

如果您想了解如何使用 Objective-C/Cocoa 中的 OpenGL 3.2，请查看[我之前创建的教程](http://hci.rwth-aachen.de/opengl_3_2_tutorial)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T14:04:03.420

由于 Objective-C 是 C 的超集，您可以在 Objective-C 代码中/从其中自由地包含/调用 C 代码。同样，Objective-C++（扩展名为**.mm**）可以允许 Onjective-C++ 中的 C++ 模块。我相信这是 Cocoa 没有为 OpenGL API 提供包装器的主要原因。

我会将整个 OpenGL 部分与使用[MVC 设计](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)的 Cocoa 项目分开。即编写一个Model组件，包含所有用C/C++编写的OpenGL代码，并在Cocoa内部制作Controllere和View组件，例如NSOpenGLView可以是Controller和View组件。

MVC 的主要优点是模型组件（OpenGL 部分）完全独立于操作系统，无需任何修改即可在其他平台上复用。缺点是您需要在 Cocoa 环境中同时使用 C/C++ 和 Objectivie-C。

我有[一个使用 MVC 设计](http://songho.ca/opengl/gl_transform.html#example1)（带有源代码）的 OpenGL GUI 程序示例。Windows 和 Mac 版本都使用相同的 OpenGL 模块。

# android - 在android中显示部分视频

> ID：11203841
> 
> 赞同：1
> 
> 时间：2012-06-26T08:53:42.413
> 
> 标签：android, video, media-player

我正在开发一个支持视频墙的应用程序。所以我需要在屏幕上显示视频的一部分。视频的某些部分意味着：

假设我有一个分辨率为**600*400 px**且长度为**10 min**的视频。我想向用户显示特定像素而不是特定长度。我的意思是让我想显示**300*200 像素（0 像素到 300 像素宽度和 0 像素到 200 像素高度）**。

我正在考虑这三个选项来实现这一目标

1.  扩展 VideoView/Mediaplayer 以仅播放视频的特定坐标。
2.  将 videoview 的布局参数设置为特定值，这将使得只有一部分视频在屏幕上可见。
3.  将视频转换为图像帧数并根据要求拆分这些图像位图，然后再次合并这些小图像块以形成视频。

我想知道哪个选项更适合我。请推荐一个好的，这样我就可以继续下去。如果您有其他更好的选择，请提出建议。请不要忘记提及为什么您的建议比其他建议更好。

如果您知道一些可以帮助我实现此目标的链接，请分享。

谢谢。

# android - 在 UI 中使用片段

> ID：11203843
> 
> 赞同：0
> 
> 时间：2012-06-26T08:53:55.923
> 
> 标签：android, android-widget, android-ui

问：我必须创建一个平板电脑应用程序。在这个我想利用片段。在一个片段中会有列表，在第二个片段中会有网格。我已经阅读了[Android](http://www.android.com/)开发者网站上的文章，但对此我不确定。请指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:30:58.157

我探索了各种教程，但我发现[http://www.vogella.com/articles/Android/article.html#fragments_tutorial](http://www.vogella.com/articles/Android/article.html#fragments_tutorial)非常有帮助。该实现是逐步提供的，并带有很好的解释。这对那些不熟悉 Fragment 的人来说真的很有帮助。

# android - ListView 图形布局中的自定义列表行

> ID：11203846
> 
> 赞同：2
> 
> 时间：2012-06-26T08:54:14.797
> 
> 标签：android, xml, listview

关于如何创建自定义行并将其添加到 ListView 有很多帖子和无数问题。但是，我找到的所有帖子都使用 Java 代码将自定义行布局文件设置为列表。大多数样本都是这样的：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>
    (this,R.layout.row_layout,R.id.text1,colors); 
```

我想知道是否没有办法直接在 XML 文件中执行此操作？ListView 上没有可以为行设置自定义布局文件的属性吗？

我问的原因是因为我试图在 Eclipse 的图形布局工具中完成所有（大部分）布局工作，我希望能够在不启动应用程序的情况下预览我的布局。

当然，这应该以一种或另一种方式实现吗？如果我可以在 XML 中使用它，我会非常高兴，但如果我必须编写一个自定义类，该类将显示在图形布局编辑器的“自定义”部分中，也可以。

非常感谢您的时间。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T10:17:10.343

可以在图形编辑器中预览 ListView。只需右键单击 ListView 并选择“预览列表内容”。然后选择“自定义”并选择自定义行布局。

这是一个例子：

my_custom_list.xml

```
 <ListView android:id="@android:id/list"
           android:layout_width="match_parent"
           android:layout_height="match_parent"
           android:layout_weight="1"
           android:drawSelectorOnTop="false">
     <!-- Preview: listitem=@layout/account_list_item -->
 </ListView> 
```

my_custom_row.xml

```
<CheckBox
    android:id="@+id/icon"

    android:layout_width="wrap_content"
    android:layout_height="fill_parent"

    android:layout_alignParentTop="true"
    android:layout_alignParentBottom="true"
    android:layout_marginRight="6dip"
     />

<TextView  
    android:id="@+id/secondLine"

    android:layout_width="fill_parent"
    android:layout_height="26dip" 

    android:layout_toRightOf="@id/icon"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"

    android:singleLine="true"
    android:ellipsize="marquee"
    android:text="mail@mail.com" />

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"

    android:layout_toRightOf="@id/icon"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_above="@id/secondLine"
    android:layout_alignWithParentIfMissing="true"

    android:gravity="center_vertical"
    android:text="Account name" /> 
```

在 my_custom_list.xml 的图形编辑器中，右键单击列表。从“预览列表内容”中的“自定义”选项中选择 my_custom_row。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:24:30.817

当然可以，但是您首先需要创建一个扩展 ArrayAdapter<> 的类

这个类可能是这样的：

```
public class Mylistcustom extends ArrayAdapter<String> {

private LayoutInflater mInflater;
private int mViewResourceId;
private String[] your_date;

    public Mylistcustom(Context ctx, int viewResourceId, String[] data) {

    super(ctx, viewResourceId,data);
    this.contexto=ctx;
    mInflater = (LayoutInflater)ctx.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    mViewResourceId = viewResourceId;
    this.your_data=data;

    @Override
    public int getCount() {
    return your_data.length;
}

@Override
    public String getItem(int position) {
    return your_data[position];
}

@Override
    public long getItemId(int position) {
    return 0;
}

@Override
    public View getView(final int position, View convertView, ViewGroup parent) {

    rowView = mInflater.inflate(mViewResourceId, null);// you are inflating your xml layout
    text=(textView) rowView.findViewById(R.id.textView);//find a textview in your layout, of course you can add whatever you want such as ImaveView Buttons ....
    text.setText(your_data[position]); // and set text from your_data
    return rowView; 
```

} }

在列表视图活动中，您只需调用构造函数并传递您的数据、布局和上下文

```
Myadapter = new Mylistcustom(context, R.layout.YOUR_XML_LAYOUT,DATA);

// and finally set the adapter to your list
ListView lv = (ListView) findViewById(android.R.id.list);
lv.setAdapter(Myadapter); 
```

# php - 如何在 mysql 中使用 Magpie 在 php 中存储 rss

> ID：11203848
> 
> 赞同：0
> 
> 时间：2012-06-26T08:54:25.683
> 
> 标签：php, mysql, magpie

我需要从 12 个不同的网站获取 RSS 提要。我只想在主页上向用户显示选定的提要。我正在使用 Magpie RSS 解析器来显示 RSS 提要。但是我如何将它们存储在数据库中。我使用以下代码来获取提要。

```
<?php
include('magpierss/rss_fetch.inc');
define('MAGPIE_CACHE_DIR', '/var/cache');
$rss = fetch_rss(' here is url link');
$items = array_slice($rss->items, 0, 10);

foreach ($items as $item) {
    $href = $item['link'];
    $title = $item['title'];
    $desc = $item['description'];
    echo "<p><a href='$href'>$title</a><br>";
    if ($desc) {
        if (strlen($desc) >= 125) {
            $desc = substr($desc, 0, 124) . "...";
        }
    }
    echo $desc;
}
;
?> 
```

现在我如何将它存储到数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:09:53.677

试试这个逻辑，我希望它对你有用......

```
<?php
include('magpierss/rss_fetch.inc');
define('MAGPIE_CACHE_DIR', '/var/cache');
$rss = fetch_rss(' here is url link');
$items = array_slice($rss->items, 0, 10);

$data = array();
$i = 0;
foreach ($items as $item) {
        $href = $item['link'];
        $title = $item['title'];
        $desc = $item['description'];
        echo "<p><a href='$href'>$title</a><br>";
        if($desc)
        if (strlen($desc) >= 125)
        {
                $desc = substr($desc,0,124)."...";
        }
        echo $desc;

        $data[$i]['href'] = $href;
        $data[$i]['title'] = $title;
        $data[$i]['desc'] = $desc;

        //create insert function like this InsertDbEntry($data) and set in function $data as argument;

$i++;
}
;

function InsertDbEntry($data){
    // Also you can add if condition for check this title is already exists in database or not
    foreach($data as $dbData){
        mysql_query("insert into table ('href','title','desc') values ('".$dbData['href']."','".$dbData['title']."','".$dbData['desc']."')");
    }
} 
```

# c# - 如何在富文本框中获取单个新行以显示为单行距

> ID：11203849
> 
> 赞同：11
> 
> 时间：2012-06-26T08:54:42.740
> 
> 标签：c#, wpf, richtextbox

我在 WPF 窗口上有一个 RichTextBox，我使用的有点像控制台输出（仅输出）。当我添加一个 NewLine 时：

```
rtx_report.AppendText(lclFileInfo.pathOnly + System.Environment.NewLine); 
```

它正确地只添加了一个新行。（我通过从框中复制文本并将其粘贴到其他地方知道这一点。）但是，在显示中它显示了一个额外的空白行。所以我开始浏览 RichTextBox 属性，但我不确定是哪个设置控制它。

看起来它只是默认为双倍行距文本，但我没有看到任何控制它的东西。谁能解释如何让它成为单行距或不显示额外的行？

TIA,

保罗

== 编辑 ==

PS HatSoft 要求的更多信息

lclFileInfo.pathOnly 的字符串内容为 C:\Users\Paul\Documents\Roadway

但是，所有这些代码行都会出现同样的问题：

```
rtx_report.AppendText("File Changed:" + System.Environment.NewLine);
rtx_report.AppendText(lclFileInfo.pathOnly + System.Environment.NewLine);
if (lclFileInfo.isDirectory == false)
        rtx_report.AppendText(lclFileInfo.fileNameOnly + System.Environment.NewLine);
rtx_report.AppendText("Changed On: " + lclFileInfo.currentTimestamp + System.Environment.NewLine); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-26T10:38:12.110

试试这个

```
rtx_report.AppendText(lclFileInfo.pathOnly + "\r"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-05-25T06:12:23.053

在 Xaml 中，将`RichTextBox`段落属性边距设置为零。通过设置为`0`不会添加额外的行距。

```
<RichTextBox AcceptsReturn="True">
    <RichTextBox.Resources>
        <Style TargetType="{x:Type Paragraph}">
            <Setter Property="Margin" Value="0" />
        </Style>
    </RichTextBox.Resources>
</RichTextBox> 
```

# visual-c++ - VC++中符号“向量删除析构函数”是什么意思？

> ID：11203851
> 
> 赞同：10
> 
> 时间：2012-06-26T08:54:44.267
> 
> 标签：visual-c++, destructor

这个符号似乎是编译器生成的析构函数。这个“编译器生成的析构函数”和“标量删除析构函数”有什么区别？是否有任何其他类型的编译器生成 ctor/dtor？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T12:16:17.287

名为`'scalar deleting destructor'`和的函数是 VC 编译器在为语句`'vector deleting destructor'`生成代码时创建的辅助函数。`delete`不要将它们与也可能由编译器生成的类析构函数混淆。前者可以用伪代码表示为

```
void scalar_deleting_destructor(A* pa)
{
pa->~A();
A::operator delete(pa);
} 
```

后者作为

```
void vector_deleting_destructor(A* pa, size_t count)
{
for (size_t i = 0; i < count; ++i)
pa[i].~A();
A::operator delete[](pa);
} 
```

# symfony - 填写所有强制参数

> ID：11203852
> 
> 赞同：3
> 
> 时间：2012-06-26T08:54:45.030
> 
> 标签：symfony, routing, twig

Symfony2 内置了一个多语言网站。在基本布局中，有这样的语言切换：

```
<a href="{{ path(app.request.attributes.get('_route'), {_locale: 'en'}) }}">EN</a>
<a href="{{ path(app.request.attributes.get('_route'), {_locale: 'fr'}) }}">FR</a> 
```

这可以在不更改当前页面的情况下很好地切换语言。但是，如果有其他参数，它会因为“缺少强制参数”而引发异常。如何克服这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T09:11:29.570

您可以执行以下操作：

```
<a href="{{ path(app.request.attributes.get('_route'), app.request.query.all|merge({'_locale': 'en'})) }}">EN</a>
<a href="{{ path(app.request.attributes.get('_route'), app.request.query.all|merge({'_locale': 'fr'})) }}">FR</a> 
```

这样做是将 _locale 参数与现有查询参数合并。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T18:34:01.970

这是我的解决方案，使用 Symfony 2.2 到 2.5

```
<a href="{{ path(app.request.get('_route'), app.request.get('_route_params')|merge({'_locale': 'en'})) }}">English</a>
<a href="{{ path(app.request.get('_route'), app.request.get('_route_params')|merge({'_locale': 'fr'})) }}">Français</a>
<a href="{{ path(app.request.get('_route'), app.request.get('_route_params')|merge({'_locale': 'es'})) }}">Español</a> 
```

这是我的解决方案，使用 Symfony 2.0 到 2.1

```
<a href="{{ path(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')|merge({'_locale': 'en'})) }}">English</a>
<a href="{{ path(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')|merge({'_locale': 'fr'})) }}">Français</a>
<a href="{{ path(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')|merge({'_locale': 'es'})) }}">Español</a> 
```

# https - 如果所有 API 调用都是通过 https 进行的，是否需要 HMAC？

> ID：11203856
> 
> 赞同：25
> 
> 时间：2012-06-26T08:55:16.400
> 
> 标签：https, oauth-2.0, hmac

如果所有 api 调用都是通过 https 发送的，HMAC 是否会增加任何额外的安全性？例如，在 oauth 2 中，客户端将其密钥发送给提供者，而无需任何散列。这是否被认为是安全的，因为它是通过 https 的？虽然不是严格的 oauth，但在此调用中使用 HMAC 会使 oauth 2 更安全吗？如果是这样，为什么这不是 oauth 2 的标准部分？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-27T08:47:47.247

OAuth 2 标准要求授权服务器必须在其所有端点上使用 HTTPS，并且客户端应该使用受 HTTPS 保护的回调。由于消息内容（考虑 OAuth 的标头、查询参数和片段）只有服务器和客户端知道，所以使用 HTTPS 连接被认为是安全的。因此，对授权请求使用单独的签名没有任何好处，这就是为什么标准中甚至没有提到这种签名的原因。

但是，这不一定适用于响应。如果客户端收到对未受保护回调的授权响应，则无法验证其有效性。在这种情况下，攻击者可以向客户端发送任意授权结果。添加带有回调参数的签名，您可以避免这种情况。但是，使用带有 HTTPS 回调的相互客户端/服务器身份验证似乎是一个更好的解决方案。

虽然在授权期间使用签名并没有真正的好处，但它们对于访问受保护的资源以避免窃取访问令牌可能很有用。这就是 MAC 令牌类型在标准中的原因，请参阅[第 7.1 节](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-28#section-7.1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-24T09:35:25.383

HMAC 用于确定您是谁的身份验证，https 用于传输安全性，以确保中间的一个人可以看到您的传输内容。

Oauth 2 授权服务器使用密钥或密码来确定您的身份。Oauth2 资源服务器使用来自授权服务器的令牌来确定您的身份。是否使用 https 取决于您是否要保护您的密钥和令牌。

# mysql - Mysql 上的 Zend 框架查询

> ID：11203860
> 
> 赞同：0
> 
> 时间：2012-06-26T08:55:22.750
> 
> 标签：mysql, zend-framework

我正在使用 zend 框架，我是新手。建立的站点有很多与 mysql 之间的交易，并且有很多错误。有什么方法可以理解 Zend Framework 的查询吗？如果我能看到它们，我可以轻松地更改它们，但不幸的是我没有找到如何做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:16:10.283

ZF 中的查询是 Zend_Db_Select 的实例，简单地说

```
$query = Zend_Db_Table::getDefaultAdapter()->select()->from('user')->where('id = ?',1); 
```

要查看其 sql 表示，只需执行

```
echo $query ; 

or 

echo $query->__toString(); 
```

# prism - InitializeShell 中的模块依赖项与 Prism

> ID：11203866
> 
> 赞同：0
> 
> 时间：2012-06-26T08:55:29.647
> 
> 标签：prism, unity-container

在我的 Shell 窗口中，我有一个工作区区域允许通过 RequestNavigate 进行视图切换。我将 Unity 与 View-First 方法一起使用，以便视图初始化如下所示：

```
public partial class WelcomeView : UserControl
{
    public WelcomeView(WelcomeViewModel vm)
    {
        InitializeComponent();
        this.DataContext = vm;
    }
} 
```

当应用程序加载时，我想导航到默认视图，因此我的 BootStrappers InitializeShell 如下所示：

```
protected override void InitializeShell()
{
    Application.Current.MainWindow = (Window)Shell;
    Application.Current.MainWindow.Show();

    var regionManager = ServiceLocator.Current.GetInstance<IRegionManager>();
    regionManager.RequestNavigate("MainWorkspaceRegion", "WelcomeView");
} 
```

现在，我的默认视图 WelcomeView 需要在构造函数中注入 WelcomeViewModel，而 WelcomeViewModel 需要在其构造函数中注入一些服务：

```
public class WelcomeViewModel : INotifyPropertyChanged
{
    public WelcomeViewModel(ISomeService someService)
    {
         // Use some service
         someService.SomeEventOccured += new Action(someService_SomeEventOccured);
    }

    ...
} 
```

问题是当 ISomeService 由模块提供时，由于在调用 InitializeShell 时模块未初始化，因此无法构造 WelcomeViewModel，进而也无法构造 WelcomeView。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T14:22:05.050

正确的方法是使用模块依赖

所以具有依赖关系的模块将包含

```
[ModuleDependency("SomeModule")] 
[ModuleDependency("SomeOtherModule")] 
public class MyModule : IModule { } 
```

它所依赖的模块将包含：

```
[Module(ModuleName = "SomeModule")] 
public class MyOtherModule: IModule 
```

不使用“魔术字符串”也是有意义的，就像我在这里使用的那样，而是在您的公共/基础设施项目中有一个包含所有模块名称的静态类。

这将允许 prism 以正确的顺序加载模块，以便您的依赖关系始终得到解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T20:07:09.713

只需将您请求导航的部分移动到稍后的时刻。调用引导程序并对其进行总结有一个特定的顺序。

1.  调用 CreateShell 方法
2.  调用 InitializeShell 方法
3.  InitializeModules 方法被调用。

    ```
    protected override void InitializeModules()
    {
        base.InitializeModules();

        var regionManager = ServiceLocator.Current.GetInstance<IRegionManager>();
        regionManager.RequestNavigate("MainWorkspaceRegion", "WelcomeView");
    } 
    ```

创建模块依赖项将不起作用，因为当您尝试导航到依赖于它们的视图时甚至没有加载模块。另外我想指出您为什么使用服务定位器？当您因为在引导程序中工作而可以直接访问容器时。完整的加载顺序可以在[这里找到](http://msdn.microsoft.com/en-us/library/gg430868%28v=pandp.40%29)

# oracle - 无法通过 IBM Oracle ODBC 驱动程序连接到 Oracle

> ID：11203869
> 
> 赞同：0
> 
> 时间：2012-06-26T08:55:35.277
> 
> 标签：oracle, vba, odbc

> **可能重复：**
> [无法通过 VBA 连接到 Oracle - 驱动程序的 SQLSetConnectAttr 失败](https://stackoverflow.com/questions/11203305/can-not-connect-to-oracle-via-vba-drivers-sqlsetconnectattr-failed)

我正在尝试为 Oracle 设置 ODBC 连接以通过 VBA 进行连接。我在 USER DSN（使用 IBM Oracle 驱动程序）创建了一个 ODBC 条目，但是当我测试连接时，它说

> ORA-12154 错误 - TNS: 无法解析指定的连接标识符

我已经正确给出了服务器名称和用户名，我曾经通过 SQL 开发人员登录 Oracle。

我检查了 tnsnames.ora 文件，服务器条目在那里。我已将主机名作为 USER DSN 中的服务器。

设置 ODBC 连接以连接 oracle 的任何想法或建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:13:07.307

tnsora.names 文件有问题。我已经解决了 TNS 问题得到了解决。但我无法通过 IBM Oracle ODBC 检索数据，因为它说通过 IBM datadirect 访问数据需要付费。所以我要关闭这个线程。

# java - Java中的快速双值优先级队列实现

> ID：11203875
> 
> 赞同：1
> 
> 时间：2012-06-26T08:55:58.913
> 
> 标签：java, performance, algorithm, priority-queue, stanford-nlp

我正在寻找一个优先级队列的实现，它使用常`double`量值作为键的优先级。我相信，如果实施得当，这可以比`PriorityQueue`使用灵活比较器的默认实施更快。不需要减少键操作（=降低队列中已有元素的优先级）。

我[从斯坦福的 NLP 小组找到了一个实现](http://www.jarvana.com/jarvana/view/edu/stanford/nlp/stanford-corenlp/1.3.0/stanford-corenlp-1.3.0-javadoc.jar!/javadoc/edu/stanford/nlp/util/PriorityQueue.html)，但他们声称它的*速度*是原始实现的两倍。是否有一个 PQ 实现可以胜过`PriorityQueue`我们用例的默认实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T02:47:05.627

我们最终实现了我们自己的堆结构。具有优化`remove()`操作的 d-ary 堆结果证明性能相当好，尤其是在加载的共享内存机器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:44:37.843

尝试使用 Sedgewick-Wayne 代码

[http://algs4.cs.princeton.edu/24pq/MaxPQ.java.html](http://algs4.cs.princeton.edu/24pq/MaxPQ.java.html)

但用 double 替换通用 Key 类型并删除 Comparable/Comparator 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T05:55:55.913

您引用的斯坦福 NLP 版本的速度较慢是因为它确实支持 reduceKey()。正如其 Javadoc 中所提到的，您可以尝试这个不支持 reduceKey() 的类：

[http://www.jarvana.com/jarvana/view/edu/stanford/nlp/stanford-corenlp/1.3.0/stanford-corenlp-1.3.0-javadoc.jar!/javadoc/edu/stanford/nlp/util /FixedPrioritiesPriorityQueue.html](http://www.jarvana.com/jarvana/view/edu/stanford/nlp/stanford-corenlp/1.3.0/stanford-corenlp-1.3.0-javadoc.jar!/javadoc/edu/stanford/nlp/util/FixedPrioritiesPriorityQueue.html)

# json - Grails 对请求和响应的通用 JSON 处理

> ID：11203876
> 
> 赞同：1
> 
> 时间：2012-06-26T08:56:03.423
> 
> 标签：json, grails

我问自己是否有一种通用的方法，我可以用一种通用的方式解析请求，或者在发送每个响应时向 JSON 响应添加字段。

我想接收和解析类似的东西：

```
{
    transactionId:456, // every response contains this
    statuscode:1,
    content:{ // only content is changing
          {
              class:"org.something.test",
              id:123,
              name:"test",
              referenceIdToOtherClass:345
          }
    }

} 
```

“内容”的内容应该被转换为例如给定类的一个实例。

响应也应该以这种通用方式工作（总是改变内容，某些字段）。

你会推荐 JSON 编组器、过滤器或其他不同的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:09:47.620

您可以使用 JSON.parse 将 json 转换为地图

```
import grails.converters.*
import org.codehaus.groovy.grails.web.json.*; // package containing JSONObject, JSONArray,...

def o = JSON.parse("{ foo: 'bar' }"); // Parse a JSON String
assert o instanceof JSONObject // In this case, JSON.parse returns a JSONObject instance
assert o instanceof Map // which implements the Map interface
assert o.foo == 'bar' // access a property 
```

然后您可以将地图传递给您的构造函数以创建一个新实例

来自[http://grails.org/Converters+Reference](http://grails.org/Converters+Reference)

# iphone - 使用带有 FB API 的 xcode 在人们的墙上发帖

> ID：11203877
> 
> 赞同：0
> 
> 时间：2012-06-26T08:56:04.160
> 
> 标签：iphone, ios, xcode, facebook, facebook-graph-api

我正在使用 FB API 并集成 FB，以便当他们接受它时，我可以在用户墙上发帖，

我有这个代码 sao 远离 fb 网站，它工作一切正常，但用户可以在邮箱中输入自己的消息。

```
- (void)fbDidLogin {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];

    NSArray *permissions = [[NSArray alloc] initWithObjects:
                            @"user_likes", 
                            @"read_stream",
                            nil];
    [facebook authorize:permissions];
    [permissions release];

        [facebook dialog:@"feed" andDelegate:self];

} 
```

我想知道我是否可以在框中显示一条预设消息，类似于下面的代码。

```
[NSString stringWithFormat:@" My New High Score i%",highscore] 
```

并锁定，使他们无法编辑它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:01:51.947

我发现通过使用它可以发布我需要的所有内容，并允许用户在那里添加评论，而且他们不能在那里编辑我想要的高分。

```
- (void)postwall
{
    NSString *string = @"I reached a score of ";
    string = [string stringByAppendingString:[NSString stringWithFormat:@"%d", highscore]];
    string = [string stringByAppendingString:@" can you beat me?"];

    NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   //kAppId, @"app_id",
                                   @"https://developers.facebook.com/docs/reference/dialogs/", @"link",
                                   @"http://fbrell.com/f8.jpg", @"picture",
                                   @"Watch Ma Balls", @"name",
                                   @"How long can you keep out of the way of ma balls for", @"caption",
                                   string, @"description",
                                   nil];

    [facebook dialog:@"feed" andParams:params andDelegate:self];
} 
```

# .htaccess - 配置 htaccess 加载静态页面

> ID：11203879
> 
> 赞同：0
> 
> 时间：2012-06-26T08:56:06.850
> 
> 标签：.htaccess

我在具有以下 htaccess 的服务器上工作：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule .* index.php
RewriteRule  ^[^/]*\.html$ index.php
RewriteRule ^/(typo3|typo3temp|typo3conf|t3lib|tslib|fileadmin|uploads|showpic\.php)/ - [L]
RewriteRule ^/(typo3|typo3temp|typo3conf|t3lib|tslib|fileadmin|uploads|showpic\.php)/.*$ - [L] 
```

现在他们要求我在他们的服务器中准备一个静态页面，我们称之为[http://www.myserver.com/mystaticpage.html](http://www.myserver.com/mystaticpage.html)

问题是当我尝试访问该 url 时，它会重定向到 index.php。我怎样才能改变 htacces 文件来解决这个问题而不会弄乱已安装的 CMS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:23:52.170

尝试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteCond ${REQUEST_URI} !^/(typo3|typo3temp|typo3conf|t3lib|tslib|fileadmin|uploads|showpic\.php)
RewriteRule .* index.php 
```

*   您之前使用的规则是多余的：如果`.*`被重写为 index.php 那为什么还要重写`^[^/]*\.html$ index.php`它呢？它已经符合以前的规则...
*   它们也重叠 - 因为这三个`RewriteCond`条件仅适用于第一条规则。所以第二条规则也适用于磁盘上的静态文件。
*   而且，最后列出的两条规则也没有任何作用。要么你需要先列出它们，要么根本不需要。我将它们转换为额外的`RewriteCond`，因为它们只是试图避免重写某些 uri

# vb.net - 在 VB 中转换儒略日

> ID：11203881
> 
> 赞同：1
> 
> 时间：2012-06-26T08:56:24.887
> 
> 标签：vb.net, datetime, calendar, julian-date

我需要将一组儒略日转换为正确的日期时间格式 dd/mm/yyyy HH:MM:SS

问题似乎是他们是某个日期的朱利安日，我假设标准是 1970 年？下面是我的代码：

功能：

```
 Public Function ConvertJulianDate(ByVal JulianDate As Double) As DateTime
    Dim julianRoot As DateTime

    julianRoot = "01/01/1970 00:00:00"

    ConvertJulianDate = julianRoot.AddDays(JulianDate)

    End Function 
```

调用（我现在已经硬编码了一个值）：

```
 Dim result As DateTime
     Dim JulianDate As Double
     JulianDate = 140.708368

     result = Utilities.ConvertJulianDate(JulianDate) 
```

这给了我价值“5/21/1970 5:00:02 PM”

看来这一年已经过去了，因为我知道数据来自 2011 年。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:18:48.160

在对 Julian Date 格式进行大量研究之后，我意识到我需要知道正确的 julianRoot - 如果没有与 Julian Day 相关的纪元，那么 Year 的值是无用的。

# java - 如何使用正则表达式匹配字符串

> ID：11203885
> 
> 赞同：0
> 
> 时间：2012-06-26T08:56:41.360
> 
> 标签：java, android, regex

我有一个字符串，其中包含多次出现的`"<p class=a> ... </p>"` where ... 是不同的文本。

我正在使用`"<p class=a>(.*)</p>"`正则表达式模式将文本分成块。但这不起作用。什么是正确的正则表达式？

PS 相同的正则表达式模式在使用 NSRegularExpression 的 iOS 中工作，但在使用 Pattern 的 android 中不起作用。

为了更多地解释我的问题：我正在做以下事情

```
Pattern regex3 = Pattern.compile("(?s)<P Class=ENCC>(.*?)</P>", CASE_INSENSITIVE);
String[] result = p.split(str); 
```

结果数组仅包含 1 项，它是整个字符串

以下是我正在阅读的文件的一部分：

```
<BODY>
    <SYNC Start=200>
      <P Class=ENCC><i>Cerita, Watak, Adegan dalam</i><br/><i>Drama Ini Rekaan Semata-Mata.</i></P>
    </SYNC>
    <SYNC Start=2440>
      <P Class=ENCC>&nbsp;</P>
    </SYNC>
    <SYNC Start=2560>
      <P Class=ENCC><i>Kami Tidak Berniat</i><br/><i>Melukakan Hati Sesiapa.</i></P>
    </SYNC>
    <SYNC Start=4560>
      <P Class=ENCC>&nbsp;</P>
    </SYNC>
    <SYNC Start=66160>
      <P Class=ENCC>Hai kawan-kawan.<br/>Inilah bandaraya Banting.</P>
    </SYNC> 
```

更新 ：：：：

大家好，我有问题。问题实际上与我正在阅读的文件的编码有关。该文件采用 UTF-16（小端）编码。这导致正则表达式无法正常工作的所有问题。我将其更改为 UTF-8，一切都开始工作了。感谢大家的支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:04:05.553

用正则表达式解析 HTML 并不是一个好主意（原因[在这里](https://stackoverflow.com/questions/6751105/why-its-not-possible-to-use-regex-to-parse-html-xml-a-formal-explanation-in-la)）。您应该在诸如[this](http://htmlcleaner.sourceforge.net/)的 HTML 解析器中使用什么。

话虽如此，您的问题很可能是`*`运营商贪婪的事实。在您的问题中，您只是说它不起作用，所以我认为您的问题是因为它匹配 first`<p class=a>`和 last `</p>`。使正则表达式不贪心，如下所示：（注意使运算符不贪心`<p class=a>(.*?)</p>`的额外内容）应该可以解决问题（假设您的问题是我之前所说的问题）。`?``*`

话虽如此，我真的建议您放弃正则表达式方法并使用适当的 HTML 解析器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:20:34.513

**编辑：**

现在您已经发布了要匹配的代码和文本，一件事立即浮现在脑海：

您正在匹配`<p class...`，但您的字符串包含`<P Class...`. 正则表达式区分大小写。

然后，`.`不匹配换行符。而且很可能您的段落确实包含换行符。

因此，尝试`"(?si)<p class=a>(.*?)</p>"`. `(?s)`修饰符也允许点匹配换行符，并且修饰符`(?i)`使正则表达式不区分大小写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:01:52.237

我想问题是你的模式是贪婪的。您应该改用它。

```
"<p class=a>(.*?)</p>" 
```

如果你有这个字符串：

```
"<p class=a>fist</p><p class=a>second</p>" 
```

您的模式 ( `"<p class=a>(.*)</p>"`) 将与此匹配

```
"<p class=a>fist</p><p class=a>second</p>" 
```

虽然`"<p class=a>(.*?)</p>"`只匹配

```
"<p class=a>fist</p>" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T09:05:53.167

. *****可能匹配**<**。你可以试试 ：

```
<p class=a>([^<]*)</p> 
```

# node.js - 为什么MongoDB无法连续两次插入相同的JSON？

> ID：11203888
> 
> 赞同：4
> 
> 时间：2012-06-26T08:56:57.230
> 
> 标签：node.js, mongodb

我正在使用 Node.js 本机驱动程序。以下工作正常

```
db.collection("test").insert({hello:'world_safe'}, {safe: true}, function(err, result) {
    if (err) throw err;
    db.collection("test").insert({hello:'world_safe'}, {safe: true}, function(err, result) {
        if (err) throw err;
        db.close();
    });
}); 
```

我在数据库中得到以下信息

> {“你好”：“world_safe”，“_id”：ObjectId（“4fe978c8b8a5937d62000001”）} {“你好”：“world_safe”，“_id”：ObjectId（“4fe978c8b8a5937d62000002”）}

但是，当我进行如下调整时

```
var json = {hello:'world_safe'};
db.collection("test").insert(json, {safe: true}, function(err, result) {
    if (err) throw err;
    db.collection("test").insert(json, {safe: true}, function(err, result) {
        if (err) throw err;
        db.close();
    });
}); 
```

我收到以下错误

> MongoError: E11000 重复键错误索引：

为什么我会收到错误消息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T09:00:09.353

驱动程序在第一次插入时`_id`为您的对象添加了一个键`json`，因此在第二次插入时，您`json`的`_id`女巫是重复的。

[https://github.com/mongodb/node-mongodb-native/blob/master/lib/mongodb/collection.js](https://github.com/mongodb/node-mongodb-native/blob/master/lib/mongodb/collection.js)

```
// Add id to each document if it's not already defined
    if (!(Buffer.isBuffer(doc)) && doc['_id'] == null && self.db.forceServerObjectId != true) {
      doc['_id'] = self.pkFactory.createPk();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T04:05:42.290

我同意 CD，但解决方案比这更容易：

```
/* ... before insert */

if(typeof(collection._id) != 'undefined')
        delete collection._id;

/* ... now insert */ 
```

# visual-studio-2008 - 如何将 VS2008 从版本 9.0.21022.8 RTM 升级到 9.0.30729.4462 QFE（希望能解决 __forceCRTManifestCUR 错误）

> ID：11203893
> 
> 赞同：4
> 
> 时间：2012-06-26T08:57:19.550
> 
> 标签：visual-studio-2008, visual-studio-2008-sp1

我最近在一台新机器上安装了 VS2008，现在发现它不会与旧机器上构建的 DLL 链接，给出错误 LNK2001：未解析的外部符号 __forceCRTManifestCUR。我认为这与 Side-By-Side 的问题有关。

经过一番研究，我现在怀疑问题在于旧的 VS2008 安装升级到版本 9.0.30729.4462 QFE，而新的 VS2008 安装在 9.0.21022.8 RTM 上。

在进一步研究中，我读到我需要将 SQL Server 2008 至少安装到 SP1 才能将 VS2008 升级到更高版本。然而，我在新机器上安装了 SQL Server 2008，它现在是 SR3，但 VS2008 仍然在版本 9.0.21022.8 上。我怀疑我安装的 SQL Server 是预先服务打包到 SR2 的，这可能是问题所在。

Windows (Microsoft) 更新显示 SQL Server 2008 或 Visual Studio 2008 没有挂起的更新。

请问您能否建议一种强制 Visual Studio 升级到 9.0.30729.4462 QFE 版本的方法？

或者，是否有任何其他不涉及重新编译我所有预编译的 DLL 的问题的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-11T11:35:21.997

我知道，一个迟到的回复，以及更多的后代，但我在两台机器上安装 VS 2008 之间存在类似的差异。一个报告版本“9.0.30729.1 SP”，另一个报告版本“9.0.30729.4462 QFE”。我希望它们是一样的，并且知道第一个已经安装了服务包。

这篇文章启发了我尝试首先安装 SQL 2008 R2，结果证明这是关键。在此之后，两个 VS 版本都是“.4462 QFE”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T14:46:50.077

哎呀-看起来我完全被微软误导了。

原来是 Visual Studio Service Pack 1 将版本从 9.0.21022 更新到 9.0.30729。

我确信我已经安装了 SP1，因为：

a) About 对话框明确提到了 SP1（尽管结果是 .Net 3.5 SP1 而不是 Visual Studio 2008 SP1）

b) Windows Update 不提供 SP1 供下载，所有“检查更新”链接都指向一个指示您使用 Windows Update 的页面。

在我最初的问题之后，我设法通过安装 VS2008 的 C++ 功能包来构建我的源代码库，但由于并排错误，什么都不会运行。最终我想到可能没有安装 SP1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T10:52:07.220

> 然而 VS2008 仍在版本 9.0.21022.8

事实并非如此，当您安装修补程序/服务包/安全补丁时，您的#includes 和 CRT 库实际上确实升级到了 9.0.30729.4462。

打开 vc/include/crtassem.h 可以看到宏汤。重要的是编译代码时生效的 _BIND_TO_CURRENT_CRT_VERSION 宏值。设置为 0 时，您将声明对 CRT 的原始 RTM 版本 (9.0.21022.8) 的依赖关系。当你在安装了发布者策略并重定向到更高版本的 CRT 的机器上运行时，微软没有在 CRT 中进行任何会破坏你的代码的更改。

将其设置为 1，您将声明对您实际测试代码的 CRT 版本的依赖关系，即安装在您的开发机器上的版本。这是更明智的做法。尽管微软在确保 CRT 的服务补丁不会破坏任何东西方面遇到了一些麻烦，但我从未听说过发生这种情况的案例。

链接器警告试图笨拙地告诉您的是，您正在尝试将使用 _BIND_TO_CURRENT_CRT_VERSION 设置为 0 编译的代码与设置为 1 编译的代码链接。这当然没有意义，您可以不能两全其美。

修复编译器设置，对于您链接的所有代码，它们必须相同。

# asp.net - 如何关闭 radwindow 管理器表单服务器端按钮单击

> ID：11203894
> 
> 赞同：4
> 
> 时间：2012-06-26T08:57:25.900
> 
> 标签：asp.net, telerik, radwindow

大家好，我设计了一个 radwindow 管理器，它有一个下拉菜单、一个文本框和一个按钮，它们位于更新面板内。

一切正常，但单击按钮时，我正在关闭窗口管理器，如下所示

`RadWindowManager1.Windows[0].VisibleOnPageLoad = false;`

但这不起作用有人可以帮助我这是我的设计和代码

```
<telerik:RadWindowManager ID="RadWindowManager1" runat="server" Behavior="Default"
        InitialBehavior="None">
        <Windows>
            <telerik:RadWindow ID="RadWindow1" runat="server" Behaviors="Default" InitialBehaviors="None"
                OpenerElementID="btn" Width="650" Height="480" VisibleOnPageLoad="false">                    
                <ContentTemplate>
                    <asp:UpdatePanel ID="up" runat="server" OnUnload="up_Unload">
                    <Triggers>
                    <asp:AsyncPostBackTrigger ControlID="rdcmb" EventName="SelectedIndexChanged" />
                    <asp:AsyncPostBackTrigger ControlID="radbtn" EventName="Click" />
                    </Triggers>
                        <ContentTemplate>
                            <telerik:RadComboBox ID="rdcmb" runat="server" AutoPostBack="true" OnSelectedIndexChanged="sel">
                                <Items>
                                    <telerik:RadComboBoxItem Text="One" Value="One" />
                                    <telerik:RadComboBoxItem Text="Two" Value="Two" />
                                    <telerik:RadComboBoxItem Text="Three" Value="Three" />
                                    <telerik:RadComboBoxItem Text="Four" Value="Four" />
                                </Items>
                            </telerik:RadComboBox>
                            <telerik:RadTextBox ID="rdText" runat="server">
                            </telerik:RadTextBox>
                            <telerik:RadButton ID="radbtn" runat="server" Text="Save" OnClick="btn_Click">
                            </telerik:RadButton>
                        </ContentTemplate>
                    </asp:UpdatePanel>
                </ContentTemplate>
            </telerik:RadWindow>
        </Windows>
    </telerik:RadWindowManager>
    <telerik:RadButton ID="rdbtnwhAnother" Text="Add WithHolding" runat="server" ButtonType="LinkButton"
        OnClick="rdbtnwhAnother_Click">
    </telerik:RadButton> 
```

代码

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        RadWindowManager1.Windows[0].VisibleOnPageLoad = false;
    }
}

protected void rdbtnwhAnother_Click(object sender, EventArgs e)
{
    RadWindowManager1.Windows[0].VisibleOnPageLoad = true;
}

protected void btn_Click(object sender, EventArgs e)
{
    RadWindowManager1.Windows[0].VisibleOnPageLoad = false;
}

protected void sel(object sender, EventArgs e)
{
    rdText.Text = rdcmb.SelectedItem.Text;
}

protected void up_Unload(object sender, EventArgs e)
{
    /* Cast sender as an updatePanel, and use reflection to invoke * * the page's scriptmanger registerUpdatePanel() method * * */
    //RadWindowManager1.Windows[0].VisibleOnPageLoad = false;
    UpdatePanel aUpdatePanel = sender as UpdatePanel;

    MethodInfo m = (
        from methods in typeof(ScriptManager).GetMethods(
            BindingFlags.NonPublic | BindingFlags.Instance
            )
        where methods.Name.Equals("System.Web.UI.IScriptManagerInternal.RegisterUpdatePanel")
        select methods).First<MethodInfo>();

    m.Invoke(ScriptManager.GetCurrent(aUpdatePanel.Page), new object[] { aUpdatePanel });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T22:55:25.877

```
<script type="text/javascript">

   function getRadWindow() {
      var oWindow = null;
      if (window.radWindow) oWindow = window.radWindow;
      else if (window.frameElement.radWindow) oWindow = window.frameElement.radWindow;
      return oWindow;
   }

   function clientClose(arg) {   
      getRadWindow().close(arg);
   }

</script>

<telerik:RadButton ID="radbtn" runat="server" Text="Save" OnClick="btn_Click">
</telerik:RadButton>

protected void btn_Click(object sender, EventArgs e)
{         
   string script = "clientClose('');"; 

   ScriptManager.RegisterStartupScript(Page, typeof(Page), 
      "closeScript", script, true);
} 
```

# tinymce - 在 TinyMCE 中拥有自己的默认表格样式

> ID：11203896
> 
> 赞同：1
> 
> 时间：2012-06-26T08:57:38.717
> 
> 标签：tinymce, default, moodle

我想在 TinyMCE 编辑器（Moodle 2.2.3 中的 3.4.9 版本）中将自己的表格样式设置为默认样式。现在，我的新样式显示在下拉列表中，但我无法将其作为默认表格样式。默认值始终是“-- not set --”，这意味着不会使用表格样式。

这是目前的样子： [https ://img.skitch.com/20111226-f4wgp8kudx45t6e2s17yse4cq6.jpg](https://img.skitch.com/20111226-f4wgp8kudx45t6e2s17yse4cq6.jpg)

这就是它最后的样子（“Tircia Style”应该是默认的）： [https ://img.skitch.com/20111226-dcf3t3w7qxagst1xgr2ieas26b.jpg](https://img.skitch.com/20111226-dcf3t3w7qxagst1xgr2ieas26b.jpg)

图片来自 TinyMCE 论坛。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-17T11:10:14.970

初始化 tinymce 时，请将路径添加到新的 css 文件，该文件将定义编辑器中使用的样式。

```
tinymce.init({
        content_css: [
        '/css/innerLayout.css'
      ]
}); 
```

表格的 innerLayout.css 的一些示例样式 -

```
.mce-content-body table{width:100%;border-spacing:0;border-collapse:separate;border:0}
.mce-content-body table tr:nth-child(even){background:#FAFAFA}
.mce-content-body table caption,.mce-content-body table td,.mce-content-body table th{padding:15px 7px;border:0;font:inherit}
.mce-content-body table th{font-weight:400;color:#6E6E6E;border-bottom:2px solid #B9B9B9!important; 
```

其他样式可以在这里找到 -[链接](https://www.tinymce.com/css/codepen.min.css)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-28T07:06:34.970

不要修改核心文件。我意识到以前没有选择，但是在 TinyMCE 4.x 中，现在有一种方法可以使用`table_default_styles`.

[http://fiddle.tinymce.com/iUeaab](http://fiddle.tinymce.com/iUeaab)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-08T17:03:01.337

如果您使用的是未缩小的 tinyMCE.js，则可以编辑 plugin.js(\tinymce\js\tinymce\plugins\table\plugin.js)。在当前版本中，它是第 1872 行。我添加以使默认表格样式响应。

```
html = '<div class="table-responsive"><table class="table"><tbody>';  // line 1882 or 1916
html += '</tbody></table></div>'; // line 1884 or 1928 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T15:39:45.713

我有同样的问题，我试图通过传递配置或更改库 JavaScript 文件来解决它。`table.js`我开始对（[/tiny_mce/plugins/table/js/table.js](http://www.tinymce.com/js/tinymce/jscripts/tiny_mce/plugins/table/js/table.js)）进行逆向工程。但是，没有运气。

所以，我去了`table.htm`（[/tiny_mce/plugins/table/table.htm](http://www.tinymce.com/js/tinymce/jscripts/tiny_mce/plugins/table/table.htm)），这是表格插件模式对话框的模板文件。`{#not_set}`从选择控件中注释掉预设选项。

```
<tr id="styleSelectRow">
    <td><label id="classlabel" for="class">{#class_name}</label></td>
    <td colspan="3">
        <select id="class" name="class" class="mceEditableSelect">
            <!--<option value="" selected="selected">{#not_set}</option>-->
        </select>
    </td>
</tr> 
```

现在，当我们启动 TinyMCE 时，您应该`table_styles`始终传递到初始配置。

```
var varTimyMCE = $("textarea").tinymce({
    table_styles : "Custom 1=classTable1",
}); 
```

这不是理想的解决方案，但它现在有效。我希望 TinyMCE 开发者在未来的版本中提供配置选项来控制选择控件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T09:07:43.750

在 tables.js 中添加以下代码：

```
 function init() {
   settings = tinyMCE.settings;       
   settings["table_styles"] =  "default1=red;default2=blue;" + settings["table_styles"];
   tinyMCE.settings["table_styles"] = settings["table_styles"]; 
```

# three.js - 三.js 和 ssao

> ID：11203901
> 
> 赞同：0
> 
> 时间：2012-06-26T08:58:04.750
> 
> 标签：three.js, webgl, ssao

我无法设法将 ssao 与three.js 一起使用。我试图遵循 webgl_postprocessing_dof.html 示例：这是函数 initPostprocessing

```
function initPostprocessing() {
    postprocessing.scene = new THREE.Scene();

    postprocessing.camera = new THREE.OrthographicCamera( window.innerWidth / - 2, window.innerWidth / 2,  window.innerHeight / 2, window.innerHeight / - 2, -10000, 10000 );
    postprocessing.camera.position.z = 100;             

    postprocessing.scene.add( postprocessing.camera );

    var pars = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBFormat };
    postprocessing.rtTextureDepth = new THREE.WebGLRenderTarget( window.innerWidth, height, pars );  //modifier 500
    postprocessing.rtTextureColor = new THREE.WebGLRenderTarget( window.innerWidth, height, pars );

    var ssao_shader = new THREE.ShaderMaterial(THREE.ShaderExtras[ "ssao" ]);  //modification

    postprocessing.ssao_uniforms = THREE.UniformsUtils.clone( ssao_shader.uniforms );
    postprocessing.ssao_uniforms[ "tDepth" ].value=1;
    postprocessing.ssao_uniforms[ "tDiffuse" ].value=1;
    postprocessing.ssao_uniforms[ "fogEnabled" ].value=1;
    postprocessing.ssao_uniforms[ "fogFar" ].value=100;
    postprocessing.ssao_uniforms[ "fogNear" ].value=0;
    postprocessing.ssao_uniforms[ "onlyAO" ].value=0;
    postprocessing.ssao_uniforms[ "aoClamp" ].value=0.1;
    postprocessing.ssao_uniforms[ "lumInfluence" ].value=0.1;

    postprocessing.materialSSAO = new THREE.ShaderMaterial( {
        uniforms: postprocessing.ssao_uniforms,
        vertexShader: ssao_shader.vertexShader,
        fragmentShader: ssao_shader.fragmentShader
    });

} 
```

和渲染功能：

```
function render() {
    renderer.clear();

    // Render depth into texture                    
    scene.overrideMaterial=material_depth;
    renderer.render( scene, camera, postprocessing.rtTextureDepth, true );

    // Render color into texture
    scene.overrideMaterial = null;
    renderer.render( scene, camera, postprocessing.rtTextureColor);

    // 
    postprocessing.materialSSAO.uniforms[ "tDepth" ].texture=postprocessing.rtTextureDepth;
    postprocessing.materialSSAO.uniforms[ "tDiffuse" ].texture=postprocessing.rtTextureColor;
    postprocessing.scene.overrideMaterial = postprocessing.materialSSAO;
    renderer.render( postprocessing.scene, postprocessing.camera );
} 
```

也许我误解了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T19:54:12.200

我不相信您可以像现在这样使用 SSAO 着色器作为材质。材料与几何图形相结合以绘制网格。SSAO 着色器的目的不是将其输出绘制在多个几何体之上，而是绘制到屏幕对齐的四边形。

通常你会使用效果作曲家类来完成这个。

```
composer = new THREE.EffectComposer( renderer );
composer.addPass( new THREE.RenderPass( postprocessing.scene, postprocessing.camera ) ); 
```

然后将 SSAO 作为着色器通道添加到作曲家并渲染到屏幕上，而不是创建材质

```
var effect = new THREE.ShaderPass( THREE.SSAOShader );
effect.uniforms[ 'tDepth' ].value = postprocessing.rtTextureDepth;
effect.uniforms[ 'size' ].value.set( window.innerWidth, window.innerHeight );
effect.uniforms[ 'cameraNear' ].value = postprocessing.camera.near;
effect.uniforms[ 'cameraFar' ].value = postprocessing.camera.far;
effect.renderToScreen = true;
composer.addPass( effect ); 
```

最后在渲染功能中，您使用作曲家进行渲染，而不是渲染器

```
function render(){
    scene.overrideMaterial = material_depth;
    renderer.render( postprocessing.scene, postprocessing.camera, postprocessing.rtTextureDepth );
    scene.overrideMaterial = null;
    composer.render();
} 
```

这也消除了拥有单独的漫反射渲染目标的必要性，因为作曲家通过渲染通道为您处理了这一点。

有关没有插件的 SSAO 的完整示例，请参见 alterqualia：[http ://bit.ly/ZIPj2J](http://bit.ly/ZIPj2J)

# ruby-on-rails - Rails 根据控制器呈现不同的视图

> ID：11203904
> 
> 赞同：1
> 
> 时间：2012-06-26T08:58:16.510
> 
> 标签：ruby-on-rails, render, renderpartial

我的 rails 应用程序中有一个标签导航页面，它在我的所有视图中共享。在里面我有一个小的文本区域，它应该根据用户所在的页面而改变。

目前我通过向控制器添加一个变量并在渲染部分路径中使用它来做到这一点，如下所示：

```
class Myapp::WebsitesController < MyappController
  def set_up
    @page = 'websites/left_text_info'
  end 
```

然后在我的部分：

```
<%= render :partial => @page %> 
```

这行得通，但感觉不是最好的“红宝石”做事方式。任何人都可以建议更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:09:22.657

您可以`controller_name`直接在视图中使用辅助方法并跳过控制器部分：

```
<%= render "#{controller_name}/left_text_info" %> 
```

或者，如果唯一改变的是文本区域的内容，那么最好的方法可能是定义一个只返回其内容的辅助方法，这样您就不需要多个非常相似的部分文件。

```
module ApplicationHelper
  def text_area_content
    case controller_name
    when "users"
      "content for users"
    when "articles"
      "content for articles"
    else
      "other content"
    end
  end
end 
```

# c++ - 将 uint16 dicom 图像转换为 qimage

> ID：11203906
> 
> 赞同：0
> 
> 时间：2012-06-26T08:58:17.450
> 
> 标签：c++, qt, qimage, gdcm

我试图转换从 gdcm 图像阅读器读取的 dicom 图像，该图像阅读器具有光度解释为“单色 2”和像素格式为无符号整数 16 或 uint16，我尝试了以下代码，但没有提供所需的图像，请帮忙。

```
 QVector<QRgb> table(2);
        for(int c=0;c<256;c++)
        {
            table.append(qRgb(c,c,c));
        }
        std::cout << "this is the format UINT16" << std::endl;
        int size = dimX*dimY*2; // length of data in buffer, in bytes
        quint8 * output = reinterpret_cast<quint8*>(buffer);
        const quint16 * input = reinterpret_cast<const quint16*>(buffer);
        do {
            *output++ = (*input) >> 8;
        } while (size -= 2);
        imageQt = new QImage(output, dimX, dimY, QImage::Format_Indexed8);
        imageQt->setColorTable(table); 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:24:59.070

我想我看到了你的问题。您正在将数据写入输出并在进行过程中递增指向输出的指针。

然后创建指向位图末尾的 QImage。

您需要执行以下操作：

```
imageQt = new QImage( reinterpret_cast< uchar* >( buffer ), dimX, dimY, QImage::Format_Indexed8); 
```

编辑：你也不要推进输入指针。

您需要将内部循环更改为以下内容：

```
*output++ = (*input++) >> 8; 
```

# model-view-controller - Spring Controller 的 URL 请求映射未按预期工作

> ID：11203907
> 
> 赞同：5
> 
> 时间：2012-06-26T08:58:21.193
> 
> 标签：model-view-controller, spring-mvc, controller, web.xml, url-mapping

我在 web.xml 中创建了一个映射，如下所示：

```
<servlet>  
        <servlet-name>dispatcher</servlet-name>  
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>  
        <load-on-startup>1</load-on-startup>  
</servlet>
<servlet-mapping>  
        <servlet-name>dispatcher</servlet-name>  
        <url-pattern>/about/*</url-pattern>  
</servlet-mapping> 
```

在我的控制器中，我有这样的东西：

```
import org.springframework.stereotype.Controller;  
@Controller  
public class MyController{  
    @RequestMapping(value="/about/us", method=RequestMethod.GET)
    public ModelAndView myMethod1(ModelMap model){  
        //some code  
        return new ModelAndView("aboutus1.jsp",model);  
    }  
    @RequestMapping(value="/about", method=RequestMethod.GET)
    public ModelAndView myMethod2(ModelMap model){  
        //some code  
        return new ModelAndView("aboutus2.jsp",model);  
    }  
} 
```

我的 dispatcher-servlet.xml 有视图解析器，如：

```
<mvc:annotation-driven/>  
<bean id="viewResolver"
          class="org.springframework.web.servlet.view.InternalResourceViewResolver"
          p:viewClass="org.springframework.web.servlet.view.JstlView"
          p:prefix="/WEB-INF/jsp/"
          p:suffix=".jsp"/> 
```

令我惊讶的是：请求`.../about/us`没有到达控制器中的 myMethod1。浏览器显示 404 错误。我在方法中放置了一个记录器，但它没有打印任何内容，这意味着它没有被执行。
`.../about`工作正常！可以做些什么来使`.../about/us`请求起作用？有什么建议么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T09:13:22.470

您需要使用`@RequestMapping(value="/us", method=RequestMethod.GET)`或需要请求`about/about/us`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-26T09:39:16.937

由于您在 web.xml 中映射了“/about”，它将传递的 url 将像这样 www.xyz.com/about/*

正如您的配置所说，它将适用于

1.  www.xyz.com/about/about/us
2.  www.xyz.com/about/about

为了正常工作，要么 `/*`在 web.xml 中使用，而不是`/about`

或将控制器的端点更改为

`@RequestMapping(value="/us", method=RequestMethod.GET)`

`@RequestMapping(value="/", method=RequestMethod.GET)`

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-26T10:50:19.513

好的，我得到了工作，这是我在 dispatcher-servlet.xml 中添加的内容：

```
<bean
    class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
        <property name="alwaysUseFullPath" value="true" />
    </bean>

    <bean
    class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
        <property name="alwaysUseFullPath" value="true" />
</bean> 
```

# paypal - PayPal 没有向我的处理程序发送 IPN？

> ID：11203908
> 
> 赞同：0
> 
> 时间：2012-06-26T08:58:29.050
> 
> 标签：paypal, paypal-ipn

我有一个 IPN 处理程序，但似乎没有从 PayPal 获得任何 IPN。当我点击订阅按钮时，我的付款通过了，但我的 IPN 处理程序没有收到*任何*请求。

我尝试通过 Firebug 的 javascript 控制台调用

```
$.post('http://mysite.com/ipn', {'foo': 'bar'}) 
```

我可以在我的日志中看到收到了请求（尽管我的处理程序失败了，正如预期的那样）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:10:51.910

除非您遵循以下规则，否则调试 IPN 很困难：

*   检查 IPN URL 域是否正确解析为外部 IP
*   确保可以从本地网络外部访问 URL
*   不要期望使用 echo 或 print 进行调试 - 将所有内容记录到文件中。

为买家和卖家创建一个“沙盒”帐户，以便您可以从卖家和买家的角度进行测试。阅读[PayPal 沙盒用户指南](https://developer.paypal.com/en_US/pdf/PP_Sandbox_UserGuide.pdf)。

确保按照设置沙盒测试环境的所有说明进行操作，包括添加假银行账户和信用卡。

# ruby-on-rails - 在 rspec 中编写测试用例时出错

> ID：11203914
> 
> 赞同：0
> 
> 时间：2012-06-26T08:58:57.213
> 
> 标签：ruby-on-rails, ruby, testing, rspec

嗨，我正在学习在 ruby​​ 中使用 Rspec 编写测试用例，并且正在关注此[链接](http://net.tutsplus.com/tutorials/ruby/ruby-for-newbies-testing-with-rspec/)。所以在测试以下案例时

```
 require 'spec_helper'

describe "Library object" do
before :all do
    lib_obj = [
        Book.new ("Javascript: The Good Parts", "Douglas Crockford", :development),
        Book.new ("Designing with Web Standards", "Jeffrey Zeldman", :design),
        Book.new ("Don't make me Think", "Steve krug", :usability),
        Book.new ("Javascript Patterns", "Stoyam Stefanov", :development),
        Book.new ("Responsive Web Design", "Ethan Marcotte", :design)
    ]       
    File.open "books.yml", "w" do |f|
        f.write YAML::dump lib_obj
    end
end

before :each do
    @lib = Library.new "books.yml"
end

describe "#new" do
    context "with no parameters" do
        it "has no books" do
            lib = Library.new
            lib.should have(0).books
        end
    end
    context "with a yaml file paramater" do
        it "has five books" do
            @lib.should have(5).books
        end
    end
end

it "returns all the books in a given category" do
    @lib.get_books_in_category(:development).length.should == 2
end

it "accepts new books" do
    @lib.add_book(Book.new("Designing for the Web", "Mark Boulton", :design))
    @lib.get_book("Designing for the Web").should be_an_instance_of Book
end

it "saves the library" do
    books = @lib.books.map { |book| book.title  }
    @lib.save
    lib2 = Library.new "books.yml"
    books2 = lib2.books.map { |book| book.title  }
    books.should eql books2
end 
```

结尾

我收到以下错误：-

```
syntax error, unexpected ',', expecting keyword_end
 Book.new ("Don't make me Think", "Steve krug", :usability), 
```

这代表数组 lib_obj 中的所有条目。我正在使用 ruby​​ 1.9.3 和 rails 3.2.6

请帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T09:09:32.633

您的方法调用和参数列表之间有一个额外的空间。

```
Book.new (...) 
```

...与以下内容不同：

```
Book.new(...) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T09:08:23.043

我看到您正在为新的 Book 类传递字符串值，尽管您没有指定要将其绑定到的属性。

尝试：

```
new_book = Book.new(:name => "string", :cover_image => "string") etc. 
```

还要确保您的模型验证和 mass_assignment 安全设置正确，但您的测试很快就会将您指向那里。

# java - 我可以使用 Java 中的哪个接口来存储唯一对象？

> ID：11203917
> 
> 赞同：1
> 
> 时间：2012-06-26T08:59:06.980
> 
> 标签：java

我需要创建一个将存储唯一对象元素的类。我不需要对这些元素进行排序，但它们必须是唯一的。

有人可以就我应该使用什么界面给我建议吗？一个人向我建议我可以使用 Set，然后另一个人说 Vector 或 List。现在我完全糊涂了:-(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T09:00:03.690

[`Set`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)正是您正在寻找的

```
Set<Integer> uniqueValues = new HashSet<Integer>();
uniqueValues.add(1);
uniqueValues.add(2);
uniqueValues.add(3);
uniqueValues.add(2);// will be ignored 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T09:01:32.283

[来自Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)的文档：

> *不包含重复元素的集合*。更正式地说，集合不包含一对元素 e1 和 e2 使得 e1.equals(e2)，并且最多包含一个空元素。正如它的名字所暗示的，这个接口模拟了数学集合抽象。

（我的重点）

请注意，这些对象不应该是可变的以影响它们的相等性。否则，您可以插入一个对象，然后将其更改`equal()`为集合中的另一个对象。我不希望一个`Set`对象追溯地强制执行唯一性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T09:02:37.410

**好吧，你应该设置像HashSet**这样的集合。请记住以下几点。

1.  不要忘记在您的 Set 将包含其对象的类中实现**equals**方法。

2.  此外，使用良好的算法实现**hashcode方法，该方法同样将您的集合划分为桶。**您可以通过考虑您在 equals 方法中考虑的对象的特定属性来做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T09:00:10.337

你必须使用`Set`. 它旨在存储独特的对象。更正式地说，集合不包含一对元素`e1`和`e2`这样的`e1.equals(e2)`，并且最多包含一个空元素。这就是为什么你必须记住`equals`在类中实现方法，哪些对象将存储在一个集合中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T09:01:54.733

使用 set 接口存储唯一对象....

# python - 如何使用 xmpppy 向聊天室发送消息？

> ID：11203921
> 
> 赞同：1
> 
> 时间：2012-06-26T08:59:21.910
> 
> 标签：python, xmpp, chatroom, xmpppy

我已成功向个人用户发送消息。如何向房间发送消息？我正在尝试以下代码：

```
cl.send(xmpp.Message('99999_myroom@chat.hipchat.com', 'test message', typ='groupchat')) 
```

另外，我发送此消息时未发送出席信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:06:18.690

一些较旧的 XMPP 服务器需要初始状态通知。在你之前试试这个`cl.send`：

```
cl.SendInitPresence(requestRoster=0) 
```

另请参阅[http://xmpppy.sourceforge.net/examples/xsend.py](http://xmpppy.sourceforge.net/examples/xsend.py)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T22:46:10.293

要向房间发送消息，您必须先加入该房间。来自[XEP-0045，第 7.2.2 节](http://xmpp.org/extensions/xep-0045.html#enter-muc)：

```
<presence to='99999_myroom@chat.hipchat.com/my_nickname'>
  <x xmlns='http://jabber.org/protocol/muc'/>
</presence> 
```

那么你的信息应该有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-21T12:03:58.623

这是向聊天室发送消息的基本实现。您需要将您的状态发送到群组，并将消息类型设置为“群聊”。

用 Openfire 服务器测试

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
import sys,time,xmpp

def sendMessageToGroup(server, user, password, room, message):

    jid = xmpp.protocol.JID(user)
    user = jid.getNode()
    client = xmpp.Client(server)
    connection = client.connect(secure=False)
    if not connection:
        print 'connection failed'
        sys.exit(1)

    auth = client.auth(user, password)
    if not auth:
        print 'authentication failed'
        sys.exit(1)

    # Join a room by sending your presence to the room
    client.send(xmpp.Presence(to="%s/%s" % (room, user)))

    msgObj = xmpp.protocol.Message(room, message)
    #Set message type to 'groupchat' for conference messages
    msgObj.setType('groupchat')

    client.send(msgObj)

    # some older servers will not send the message if you disconnect immediately after sending
    time.sleep(1)   

    client.disconnect() 
```

# android - 适用于 ANDROID 的任何云打印 API

> ID：11203924
> 
> 赞同：2
> 
> 时间：2012-06-26T08:59:27.287
> 
> 标签：android, java, google-cloud-print

有谁知道是否有适用于 Android 的云打印 API？.为Android设备开发我们自己的云打印Apk。任何教程或示例代码都会有所帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:18:00.847

有一个可用的谷歌云打印 API，我写了一段时间： [http ://cloudx.fun2code.de/en/api.html](http://cloudx.fun2code.de/en/api.html)

JavaDoc 和示例也可用。

有关更详细的示例，请查看博客条目： http: [//fun2code-blog.blogspot.de/2011/10/setting-up-cloud-print-printer-using.html](http://fun2code-blog.blogspot.de/2011/10/setting-up-cloud-print-printer-using.html)

希望有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-13T07:02:28.807

检查此以了解与 Android 的 Google Cloud Print 集成。

[https://developers.google.com/cloud-print/docs/android](https://developers.google.com/cloud-print/docs/android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:13:47.463

Android 尚不支持打印。您必须为此使用第 3 方解决方案！！

通过与 Google [Cloud Print集成，您可以将打印功能添加到您的 Android 应用程序](https://developers.google.com/cloud-print/docs/android)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T13:25:07.600

您可以使用 iPrint sdk，但按用户付费。

链接：[http ://www.iprintsdk.com/](http://www.iprintsdk.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T01:11:36.130

你没有提到你要打印什么所以......

对于普通打印机和 letter 大小的文档，您应该按照之前的建议使用 Google 云打印。谷歌云打印是这些打印机的最佳和最简单的解决方案。

其他替代方法是编写您自己的打印机驱动程序，这可能甚至不值得尝试，因为实现完美支持或通过已经制作的第三方打印应用程序发送您的打印作业非常复杂，这可能不会为您提供定制级别想提供。

对于收据打印机，Star Micronics 提供了一个文档齐全的 Android SDK 包，其中包含大量打印示例：http: [//www.starmicronics.com/support/SDKDocumentation.aspx](http://www.starmicronics.com/support/SDKDocumentation.aspx)

包含一个打印 API 来处理状态、打开/关闭端口和基本通信。SDK 包含一个示例应用程序，其中包含一堆示例，您可以尝试让您的收据看起来完全符合您的要求。

# html - 自版本 12 起，Opera 中具有“不透明度：0”的可见选择元素

> ID：11203927
> 
> 赞同：1
> 
> 时间：2012-06-26T08:59:40.517
> 
> 标签：html, css, opera

[演示](http://jsfiddle.net/mRBsX/3/)。从第 12 版开始，在 Opera 中选择可见，尽管“不透明度：0”！在版本 11.x 中没问题。在其他浏览器中看起来还可以。

另外，我做了一个没有复杂css的简单演示，“不透明度0”-select在哪里——它实际上是透明的！我的风格有问题，我找不到是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:15:12.640

为了解决这个问题，我添加了新样式

```
 .selectnewstyle
            {
                position: relative;
                left: -160px;
                opacity: 0;

                width: 160px;
                padding: 4px 4px;
            } 
```

并将其应用于选择

```
<select class="selectnewstyle" id="catid" name="catid"> 
```

**这一定是一个兼容性问题，每个不同的浏览器大脑是如何工作的**

这是修改后的演示

[Opera 12 工作演示](http://jsfiddle.net/sssonline2/MAn29/1/)

**更新**

令人惊讶的是，解决方案是在 div 和 select 标签之间添加一个空格，我不知道为什么它只是 jsfiddle 错误；看上面的演示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-17T08:11:14.433

您还可以使用另一个 CSS 规则：

```
visibility: [visible | hidden] 
```

它几乎像不透明度一样工作。唯一的区别是它与音频浏览器的拼写方式。但视觉渲染与规则相同`opacity`。

# twitter - 如何在推特中搜索用户时间线

> ID：11203938
> 
> 赞同：1
> 
> 时间：2012-06-26T09:00:20.017
> 
> 标签：twitter

我可以在我的站点中显示主页时间线。但是我的站点中还有一个功能，我们可以在其中搜索用户的主页时间线。我知道有一个搜索可以让我获得与关键字相关的推文。但是我只想获得特定家庭时间线的结果。任何指向那个非常感谢

史密斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:50:54.037

如果您使用[twitter.com/search](http://twitter.com/search)搜索推文，请在搜索表单中使用“from:USERNAME”作为关键字，以便按用户获取推文。

查看上面链接的页面上的所有运营商。

那是你搜索的吗？

# android - 在第二个帐户登录时未提取 Facebook 数据

> ID：11203950
> 
> 赞同：0
> 
> 时间：2012-06-26T09:01:20.937
> 
> 标签：android, facebook

我创建了我的 android 代码，其中我从 facebook 获取所有数据，然后将其显示在 textView 中，它在我的帐户上运行良好。但是在我尝试连接我的虚拟帐户后，没有获取任何详细信息，我也不知道这个问题的原因。好吧，这是我要查看的代码：

```
private void getFbName() {
    mProgress.setMessage("Finalizing ...");
    mProgress.show();

    new Thread() {
        @Override
        public void run() {
            String name = "";
            int what = 1;

            try {
                String me = mFacebook.request("me");

                JSONObject jsonObj = (JSONObject) new JSONTokener(me).nextValue();
                name = jsonObj.getString("first_name") + "|" + jsonObj.getString("last_name") + "|" + jsonObj.getString("email") + "|" + jsonObj.getString("id");
                what = 0;
            }
            catch (Exception ex) {
                ex.printStackTrace();
            }

            mFbHandler.sendMessage(mFbHandler.obtainMessage(what, name));
        }
    }.start();
}

private Handler mFbHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        mProgress.dismiss();

        if (msg.what == 0) {
            String username = (String) msg.obj;
            username = (username.equals("")) ? "No Name" : username;

            //SPLITTER
            String tokens[] = username.split("\\|");
            TextView fname = (TextView) findViewById(R.id.textView1);
            fname.setText(tokens[0]);

            TextView lname = (TextView) findViewById(R.id.textView2);
            lname.setText(tokens[1]);

            TextView eadd = (TextView) findViewById(R.id.textView3);
            eadd.setText(tokens[2]);

            TextView fbid = (TextView) findViewById(R.id.textView4);
            fbid.setText(tokens[3]);

            SessionStore.saveName(username, Main.this);
            //mFacebookBtn.setText("       Facebook (" + username + ")");

            Toast.makeText(Main.this, "Connected to Facebook as " + username, Toast.LENGTH_SHORT).show();
        }
        else {
            Toast.makeText(Main.this, "Connected to Facebook", Toast.LENGTH_SHORT).show();
        }
    }
}; 
```

好吧，我只按照本教程对我的代码进行了一些修改，其中我使用 1 个按钮进行登录，另一个用于注销，然后在 4 个文本视图中显示结果。

* * *

**编辑**
这是我的注销代码：

```
private void fbLogout() {
    mProgress.setMessage("Disconnecting from Facebook");
    mProgress.show();

    new Thread() {
        @Override public void run() {
            SessionStore.clear(Main.this);
            int what = 1;
            try {
                mFacebook.logout(Main.this);
                what = 0;
            }
            catch (Exception ex) {
                ex.printStackTrace();
            }

            mHandler.sendMessage(mHandler.obtainMessage(what));
        }
    }.start(); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:23:46.303

使用 facebook android SDK 时，你们两个有两种类型的身份验证：

1.  使用 SDK 身份验证对话框，该对话框将询问用户他的电子邮件/密码。
2.  使用单点登录 (SSO)，该单点登录 (SSO) 仅在设备安装了 facebook 应用程序 (katana) 时才有效。如果是这种情况，该应用程序将负责创建更好的用户体验的身份验证，因为用户已经登录并且不需要重新输入他的凭据。

如果您遵循本教程，那么您正在使用 SSO（如果应用程序已安装），因此，当您使用该`facebook.authorize`方法时，您要求 fb 应用程序为当前登录用户授权您的应用程序。
如果您希望其他用户使用您的应用程序，您需要该用户退出主 facebook 应用程序。

您可以按照此处的建议使用 sdk 身份验证并绕过 SSO：[How to disable Facebook single sign on for android - Facebook-android-sdk](https://stackoverflow.com/questions/4521013/how-to-disable-facebook-single-sign-on-for-android-facebook-android-sdk)，但正如我之前所说，我认为它会导致糟糕的用户体验。

另一件事是您继续使用线程来实现事物，但是 facebook android SDK 已经为此提供了一个帮助程序类，它是[AsyncFacebookRunner](https://github.com/facebook/facebook-android-sdk/blob/master/facebook/src/com/facebook/android/AsyncFacebookRunner.java)异步发出 api 请求，请阅读[Async API Requests](http://developers.facebook.com/docs/reference/androidsdk/ayncrequest/)。

# proguard - ProGuard java和反射

> ID：11203951
> 
> 赞同：3
> 
> 时间：2012-06-26T09:01:22.887
> 
> 标签：proguard, obfuscation

我用 proguard 混淆了我的 jar 应用程序。当我运行程序时，我收到以下错误：

```
java.lang.ClassCastException: java.lang.Class cannot be cast to java.lang.reflec
t.ParameterizedType
    at gr.analysis.synchronizer.bridge.dao.HibernateDAO.HibernateGenericDAO.
<init>(Unknown Source)
    at gr.analysis.synchronizer.bridge.dao.HibernateDAO.HibernateDBSynchroni
zerDAO.<init>(Unknown Source)
 at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Sou
rce)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at     gr.analysis.synchronizer.bridge.dao.HibernateDAO.HibernateBridgeDAOFactory.instantiateDAO(Unknown Source)
    at gr.analysis.synchronizer.bridge.dao.HibernateDAO.HibernateBridgeDAOFactory.getDBSynchronizerDAO(Unknown Source)
    at gr.analysis.synchronizer.forms.synchronizer.SynchronizersDialog.initSynchronizers(Unknown Source)
    at gr.analysis.synchronizer.forms.synchronizer.SynchronizersDialog.perform(Unknown Source)
    at gr.analysis.synchronizer.forms.synchronizer.SynchronizersDialog.access$1400(Unknown Source)
    at gr.analysis.synchronizer.forms.synchronizer.SynchronizersDialog$13$1.
run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
ERROR [Performer] (?:?) - java.lang.RuntimeException: Can not instantiate DAO: class     gr.analysis.synchronizer.bridge.dao.HibernateDAO.HibernateDBSynchronizerDAO 
```

我使用带有注释和 dao 模式的休眠

proguard的配置是：

```
-dontnote
-verbose
-printmapping out.map

-keepattributes *Annotation*
-keepdirectories

# The main entry points.

-keep public class gr.analysis.synchronizer.ApplicationSupport {
    public static void main(java.lang.String[]);
}

-keep class  gr.analysis.synchronizer.**{*; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-10T20:59:11.373

问题是proguard + java 反射，例如Class.forName("com.example.class").getInstance()。

也适用于非android java项目，见：[Proguard and Reflection in Android](https://stackoverflow.com/questions/4447145/proguard-and-reflection-in-android)

# android - Android MapView 中的性能问题

> ID：11203952
> 
> 赞同：0
> 
> 时间：2012-06-26T09:01:28.050
> 
> 标签：android, android-mapview, android-maps

我正在开发**自定义地图**应用程序，我可以在其中从 Web 服务获取数据并根据该数据显示叠加项目。这是我运行我的应用程序时的问题，它会正确显示地图和叠加层，但是当我尝试缩放它或尝试点击它时，它变得很慢，性能非常慢。所以这里提出了一些性能问题。事实上，它不包含大量数据，只有 50 个叠加层。

我怀疑添加项目覆盖有问题，请检查并帮助我。

**代码：**

```
private void showWhaleDophinSightingsToMap() {
    mapOverlays = mapView.getOverlays();
    progressDialog.dismiss();
    // Show overlay for whale sightings
    Log.i(TAG, "whaleWatchingInfoList >>>>>> " + whaleWatchingInfoList);
    Log.i(TAG, "whaleWatchingInfoList >>>>>> "+ whaleWatchingInfoList.size());
    if(whaleWatchingInfoList != null && whaleWatchingInfoList.size() > 0) {
            drawable = getResources().getDrawable(R.drawable.north);            
            customItemizedOverlay = new CustomItemizedOverlay<CustomOverlayItem>(drawable, mapView);
            for(int i = 0; i < whaleWatchingInfoList.size(); i++) {
                    if(i == 0) {
                            MapController mc = mapView.getController();
                            mc.setZoom(7);
                            // Zoom Level 
                            mapView.getController().setCenter(new GeoPoint((int)(whaleWatchingInfoList.get(i).getLatitude() * 1E6),
                            (int)(whaleWatchingInfoList.get(i).getLongtitude() * 1E6)));
                    }else {
                            geoPoint = new GeoPoint((int)(whaleWatchingInfoList.get(i).getLatitude() * 1E6),
                            (int)(whaleWatchingInfoList.get(i).getLongtitude() * 1E6));
                            CustomOverlayItem customOverlayItem = new CustomOverlayItem(geoPoint, whaleWatchingInfoList.get(i).getName(), whaleWatchingInfoList.get(i).getDescription(), whaleWatchingInfoList.get(i).getImageUrl(), whaleWatchingInfoList.get(i).getAtdwProductUrl());
                            customItemizedOverlay.addOverlay(customOverlayItem);    
                            mapOverlays.add(customItemizedOverlay);
                    }
            }
    }
    mapView.postInvalidate();   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:26:06.573

我不确定能否回答。就我而言，我在获取地图视图时添加了 2 行，它在地图移动或缩放时提高了很多性能。它解决了我的问题。

```
mapView.setAlwaysDrawnWithCacheEnabled(true);
mapView.setPersistentDrawingCache(MapView.PERSISTENT_ALL_CACHES); 
```

希望它有所帮助。

# rtsp - 为什么我得到 RTSP/1.0 404 Not Found？

> ID：11203953
> 
> 赞同：1
> 
> 时间：2012-06-26T09:01:29.633
> 
> 标签：rtsp

这是我的 RTSP 对话：

```
 ANNOUNCE rtsp://216.224.181.197/bstream.sdp RTSP/1.0
    CSeq: 1
    Content-Type: application/sdp
    User-Agent: C.U.
    Authorization: Digest username="gidon", realm="null", nonce="null", uri="/bstream.sdp", response="239fcac559661c17436e427e75f3d6a0"
    Content-Length: 313

    v=0
    s=CameraStream
    m=video 5006 RTP/AVP 96
    b=RR:0
    a=rtpmap:96 H264/90000
    a=fmtp:96 packetization-mode=1;profile-level-id=42000c;sprop-parameter-sets=Z0IADJZUCg+I,aM44gA==;
    a=control:trackID=0
    m=audio 5004 RTP/AVP 96
    b=AS:128
    b=RR:0
    a=rtpmap:96 AMR/8000
    a=fmtp:96 octet-align=1;
    a=control:trackID=1

    RTSP/1.0 401 Unauthorized
    Server: DSS/6.0.3 (Build/526.3; Platform/Linux; Release/Darwin Streaming Server; State/Development; )
    Cseq: 1
    WWW-Authenticate: Digest realm="Streaming Server", nonce="e5c0b7aff71820962027d73f55fe48c8"

    ANNOUNCE rtsp://216.224.181.197/bstream.sdp RTSP/1.0
    CSeq: 2
    Content-Type: application/sdp
    User-Agent: C.U.
    Authorization: Digest username="gidon", realm="Streaming Server", nonce="e5c0b7aff71820962027d73f55fe48c8", uri="/bstream.sdp", response="6e3aa3be3f5c04a324491fe9ab341918"
    Content-Length: 313

    v=0
    s=CameraStream
    m=video 5006 RTP/AVP 96
    b=RR:0
    a=rtpmap:96 H264/90000
    a=fmtp:96 packetization-mode=1;profile-level-id=42000c;sprop-parameter-sets=Z0IADJZUCg+I,aM44gA==;
    a=control:trackID=0
    m=audio 5004 RTP/AVP 96
    b=AS:128
    b=RR:0
    a=rtpmap:96 AMR/8000
    a=fmtp:96 octet-align=1;
    a=control:trackID=1

    RTSP/1.0 200 OK
    Server: DSS/6.0.3 (Build/526.3; Platform/Linux; Release/Darwin Streaming Server; State/Development; )
    Cseq: 2

    OPTIONS * RTSP/1.0
    CSeq: 3
    User-Agent: C.U.
    Authorization: Digest username="gidon", realm="Streaming Server", nonce="e5c0b7aff71820962027d73f55fe48c8", uri="/bstream.sdp", response="0042e3981657cc43737f3076b241f422"

    RTSP/1.0 200 OK
    Server: DSS/6.0.3 (Build/526.3; Platform/Linux; Release/Darwin Streaming Server; State/Development; )
    Cseq: 3
    Public: DESCRIBE, SETUP, TEARDOWN, PLAY, PAUSE, OPTIONS, ANNOUNCE, RECORD

    SETUP rtsp://216.224.181.197/bstream.sdp/trackID=0 RTSP/1.0
    CSeq: 4
    Transport: RTP/AVP;unicast;client_port=6970-6971;mode=record
    User-Agent: C.U.
    Accept-Language: en-US
    Authorization: Digest username="gidon", realm="Streaming Server", nonce="e5c0b7aff71820962027d73f55fe48c8", uri="/bstream.sdp", response="a9c762c9c456f85d3b913f5b6365e44d"

    RTSP/1.0 404 Not Found
    Server: DSS/6.0.3 (Build/526.3; Platform/Linux; Release/Darwin Streaming Server; State/Development; )
    Cseq: 4
    Connection: Close 
```

这不是服务器错误，我之前已经让它与不同的客户端一起工作。

不是我正在实施我自己的客户......

当我打电话给 ANNOUNCE 时，我会返回 OK (200)

但是当我尝试调用 SETUP 时，我得到的并不存在（404）

为什么我得到 404？

DSS 配置：

```
<?xml version ="1.0"?>
<!-- The Document Type Definition (DTD) for the file -->
<!DOCTYPE CONFIGURATION [
<!ELEMENT CONFIGURATION (SERVER, MODULE*)>
<!ELEMENT SERVER (PREF|LIST-PREF|OBJECT|LIST-OBJECT)*>
<!ELEMENT MODULE (PREF|LIST-PREF|OBJECT|LIST-OBJECT)*>
<!ATTLIST MODULE
    NAME CDATA #REQUIRED>
<!ELEMENT PREF (#PCDATA)>
<!ATTLIST PREF
    NAME CDATA #REQUIRED
    TYPE (UInt8|SInt8|UInt16|SInt16|UInt32|SInt32|UInt64|SInt64|Float32|Float64|Bool16|Bool8|char) "char">
<!ELEMENT LIST-PREF (VALUE*)>
<!ELEMENT VALUE (#PCDATA)>
<!ATTLIST LIST-PREF
    NAME CDATA #REQUIRED
    TYPE  (UInt8|SInt8|UInt16|SInt16|UInt32|SInt32|UInt64|SInt64|Float32|Float64|Bool16|Bool8|char) "char">
<!ELEMENT OBJECT (PREF|LIST-PREF|OBJECT|LIST-OBJECT)*>
<!ATTLIST OBJECT
    NAME CDATA #REQUIRED>
<!ELEMENT LIST-OBJECT (OBJECT-VALUE*)>
<!ELEMENT OBJECT-VALUE (PREF|LIST-PREF|OBJECT|LIST-OBJECT)*>
<!ATTLIST LIST-OBJECT
    NAME CDATA #REQUIRED>
]>
<CONFIGURATION>
    <SERVER>
        <PREF NAME="rtsp_timeout" TYPE="UInt32" >0</PREF>
        <PREF NAME="real_rtsp_timeout" TYPE="UInt32" >180</PREF>
        <PREF NAME="rtp_timeout" TYPE="UInt32" >120</PREF>
        <PREF NAME="maximum_connections" TYPE="SInt32" >1000</PREF>
        <PREF NAME="maximum_bandwidth" TYPE="SInt32" >102400</PREF>
        <PREF NAME="movie_folder" >/usr/local/movies/</PREF>
        <PREF NAME="bind_ip_addr" >0</PREF>
        <PREF NAME="break_on_assert" TYPE="Bool16" >false</PREF>
        <PREF NAME="auto_restart" TYPE="Bool16" >true</PREF>
        <PREF NAME="total_bytes_update" TYPE="UInt32" >1</PREF>
        <PREF NAME="average_bandwidth_update" TYPE="UInt32" >60</PREF>
        <PREF NAME="safe_play_duration" TYPE="UInt32" >600</PREF>
        <PREF NAME="module_folder" >/usr/local/sbin/StreamingServerModules/</PREF>
        <PREF NAME="error_logfile_name" >Error</PREF>
        <PREF NAME="error_logfile_dir" >/var/streaming/logs/</PREF>
        <PREF NAME="error_logfile_interval" TYPE="UInt32" >7</PREF>
        <PREF NAME="error_logfile_size" TYPE="UInt32" >256000</PREF>
        <PREF NAME="error_logfile_verbosity" TYPE="UInt32" >2</PREF>
        <PREF NAME="screen_logging" TYPE="Bool16" >true</PREF>
        <PREF NAME="error_logging" TYPE="Bool16" >true</PREF>
        <PREF NAME="drop_all_video_delay" TYPE="SInt32" >1750</PREF>
        <PREF NAME="start_thinning_delay" TYPE="SInt32" >0</PREF>
        <PREF NAME="large_window_size" TYPE="UInt32" >64</PREF>
        <PREF NAME="window_size_threshold" TYPE="UInt32" >200</PREF>
        <PREF NAME="min_tcp_buffer_size" TYPE="UInt32" >8192</PREF>
        <PREF NAME="max_tcp_buffer_size" TYPE="UInt32" >200000</PREF>
        <PREF NAME="tcp_seconds_to_buffer" TYPE="Float32" >.5</PREF>
        <PREF NAME="do_report_http_connection_ip_address" TYPE="Bool16" >false</PREF>
        <PREF NAME="default_authorization_realm" >Streaming Server</PREF>
        <PREF NAME="run_user_name" >qtss</PREF>
        <PREF NAME="run_group_name" >qtss</PREF>
        <PREF NAME="append_source_addr_in_transport" TYPE="Bool16" >false</PREF>
        <LIST-PREF NAME="rtsp_port" TYPE="UInt16" >
            <VALUE>554</VALUE>
            <VALUE>7070</VALUE>
            <VALUE>8000</VALUE>
            <VALUE>8001</VALUE>
        </LIST-PREF>
        <PREF NAME="max_retransmit_delay" TYPE="UInt32" >500</PREF>
        <PREF NAME="small_window_size" TYPE="UInt32" >24</PREF>
        <PREF NAME="ack_logging_enabled" TYPE="Bool16" >false</PREF>
        <PREF NAME="rtcp_poll_interval" TYPE="UInt32" >100</PREF>
        <PREF NAME="rtcp_rcv_buf_size" TYPE="UInt32" >768</PREF>
        <PREF NAME="send_interval" TYPE="UInt32" >50</PREF>
        <PREF NAME="thick_all_the_way_delay" TYPE="SInt32" >-2000</PREF>
        <PREF NAME="alt_transport_src_ipaddr" ></PREF>
        <PREF NAME="max_send_ahead_time" TYPE="UInt32" >25</PREF>
        <PREF NAME="reliable_udp_slow_start" TYPE="Bool16" >true</PREF>
        <PREF NAME="auto_delete_sdp_files" TYPE="Bool16" >false</PREF>
        <PREF NAME="authentication_scheme" >digest</PREF>
        <PREF NAME="sdp_file_delete_interval_seconds" TYPE="UInt32" >10</PREF>
        <PREF NAME="auto_start" TYPE="Bool16" >false</PREF>
        <PREF NAME="reliable_udp" TYPE="Bool16" >true</PREF>
        <PREF NAME="reliable_udp_dirs" >/</PREF>
        <PREF NAME="reliable_udp_printfs" TYPE="Bool16" >false</PREF>
        <PREF NAME="drop_all_packets_delay" TYPE="SInt32" >2500</PREF>
        <PREF NAME="thin_all_the_way_delay" TYPE="SInt32" >1500</PREF>
        <PREF NAME="always_thin_delay" TYPE="SInt32" >750</PREF>
        <PREF NAME="start_thicking_delay" TYPE="SInt32" >250</PREF>
        <PREF NAME="quality_check_interval" TYPE="UInt32" >1000</PREF>
        <PREF NAME="RTSP_error_message" TYPE="Bool16" >false</PREF>
        <PREF NAME="RTSP_debug_printfs" TYPE="Bool16" >false</PREF>
        <PREF NAME="enable_monitor_stats_file" TYPE="Bool16" >false</PREF>
        <PREF NAME="monitor_stats_file_interval_seconds" TYPE="UInt32" >10</PREF>
        <PREF NAME="monitor_stats_file_name" >server_status</PREF>
        <PREF NAME="enable_packet_header_printfs" TYPE="Bool16" >false</PREF>
        <PREF NAME="packet_header_printf_options" >rtp;rr;sr;app;ack;</PREF>
        <PREF NAME="overbuffer_rate" TYPE="Float32" >2.0</PREF>
        <PREF NAME="medium_window_size" TYPE="UInt32" >48</PREF>
        <PREF NAME="window_size_max_threshold" TYPE="UInt32" >1000</PREF>
        <PREF NAME="RTSP_server_info" TYPE="Bool16" >true</PREF>
        <PREF NAME="run_num_threads" TYPE="UInt32" >0</PREF>
        <PREF NAME="pid_file" >/var/run/DarwinStreamingServer.pid</PREF>
        <PREF NAME="force_logs_close_on_write" TYPE="Bool16" >false</PREF>
        <PREF NAME="disable_thinning" TYPE="Bool16" >false</PREF>
        <LIST-PREF NAME="player_requires_rtp_header_info" >
            <VALUE>Nokia</VALUE>
            <VALUE>Real</VALUE>
        </LIST-PREF>
        <LIST-PREF NAME="player_requires_bandwidth_adjustment" >
            <VALUE>Nokia</VALUE>
            <VALUE>Real</VALUE>
        </LIST-PREF>
        <LIST-PREF NAME="player_requires_no_pause_time_adjustment" >
            <VALUE>Nokia</VALUE>
            <VALUE>Real</VALUE>
            <VALUE>PVPlayer</VALUE>
        </LIST-PREF>
        <PREF NAME="enable_3gpp_protocol" TYPE="Bool16" >true</PREF>
        <PREF NAME="enable_3gpp_protocol_rate_adaptation" TYPE="Bool16" >true</PREF>
        <PREF NAME="3gpp_protocol_rate_adaptation_report_frequency" TYPE="UInt16" >1</PREF>
        <PREF NAME="default_stream_quality" TYPE="UInt16" >0</PREF>
        <PREF NAME="player_requires_rtp_start_time_adjust" >Real</PREF>
        <PREF NAME="enable_3gpp_debug_printfs" TYPE="Bool16" >false</PREF>
        <PREF NAME="enable_udp_monitor_stream" TYPE="Bool16" >false</PREF>
        <PREF NAME="udp_monitor_video_port" TYPE="UInt16" >5002</PREF>
        <PREF NAME="udp_monitor_audio_port" TYPE="UInt16" >5004</PREF>
        <PREF NAME="udp_monitor_dest_ip" >127.0.0.1</PREF>
        <PREF NAME="udp_monitor_src_ip" >0.0.0.0</PREF>
        <PREF NAME="enable_allow_guest_default" TYPE="Bool16" >true</PREF>
        <PREF NAME="run_num_rtsp_threads" TYPE="UInt32" >1</PREF>
        <PREF NAME="player_requires_disable_3gpp_rate_adapt" ></PREF>
        <PREF NAME="player_requires_3gpp_target_time" ></PREF>
        <PREF NAME="3gpp_target_time_milliseconds" TYPE="UInt32" >3000</PREF>
        <PREF NAME="player_requires_disable_thinning" ></PREF>
    </SERVER>
    <MODULE NAME="QTSSErrorLogModule" ></MODULE>
    <MODULE NAME="QTSSFileModule" >
        <PREF NAME="flow_control_probe_interval" TYPE="UInt32" >10</PREF>
        <PREF NAME="max_allowed_speed" TYPE="Float32" >4.000000</PREF>
        <PREF NAME="enable_shared_file_buffers" TYPE="Bool16" >true</PREF>
        <PREF NAME="enable_private_file_buffers" TYPE="Bool16" >false</PREF>
        <PREF NAME="num_shared_buffer_increase_per_session" TYPE="UInt32" >8</PREF>
        <PREF NAME="shared_buffer_unit_k_size" TYPE="UInt32" >256</PREF>
        <PREF NAME="private_buffer_unit_k_size" TYPE="UInt32" >256</PREF>
        <PREF NAME="num_shared_buffer_units_per_buffer" TYPE="UInt32" >1</PREF>
        <PREF NAME="num_private_buffer_units_per_buffer" TYPE="UInt32" >1</PREF>
        <PREF NAME="max_shared_buffer_units_per_buffer" TYPE="UInt32" >8</PREF>
        <PREF NAME="max_private_buffer_units_per_buffer" TYPE="UInt32" >8</PREF>
        <PREF NAME="add_seconds_to_client_buffer_delay" TYPE="Float32" >0.000000</PREF>
        <PREF NAME="record_movie_file_sdp" TYPE="Bool16" >false</PREF>
        <PREF NAME="enable_movie_file_sdp" TYPE="Bool16" >false</PREF>
        <PREF NAME="enable_player_compatibility" TYPE="Bool16" >true</PREF>
        <PREF NAME="compatibility_adjust_sdp_media_bandwidth_percent" TYPE="UInt32" >50</PREF>
        <PREF NAME="compatibility_adjust_rtp_start_time_milli" TYPE="SInt64" >500</PREF>
        <PREF NAME="allow_invalid_hint_track_refs" TYPE="Bool16" >false</PREF>
        <PREF NAME="sdp_url" ></PREF>
        <PREF NAME="admin_email" ></PREF>
    </MODULE>
    <MODULE NAME="QTSSReflectorModule" >
        <PREF NAME="reflector_bucket_offset_delay_msec" TYPE="UInt32" >73</PREF>
        <PREF NAME="reflector_buffer_size_sec" TYPE="UInt32" >10</PREF>
        <PREF NAME="reflector_use_in_packet_receive_time" TYPE="Bool16" >false</PREF>
        <PREF NAME="reflector_in_packet_max_receive_sec" TYPE="UInt32" >60</PREF>
        <PREF NAME="reflector_rtp_info_offset_msec" TYPE="UInt32" >500</PREF>
        <PREF NAME="disable_rtp_play_info" TYPE="Bool16" >false</PREF>
        <PREF NAME="allow_non_sdp_urls" TYPE="Bool16" >true</PREF>
        <PREF NAME="enable_broadcast_announce" TYPE="Bool16" >true</PREF>
        <PREF NAME="enable_broadcast_push" TYPE="Bool16" >true</PREF>
        <PREF NAME="max_broadcast_announce_duration_secs" TYPE="UInt32" >0</PREF>
        <PREF NAME="allow_duplicate_broadcasts" TYPE="Bool16" >false</PREF>
        <PREF NAME="enforce_static_sdp_port_range" TYPE="Bool16" >false</PREF>
        <PREF NAME="minimum_static_sdp_port" TYPE="UInt16" >20000</PREF>
        <PREF NAME="maximum_static_sdp_port" TYPE="UInt16" >65535</PREF>
        <PREF NAME="kill_clients_when_broadcast_stops" TYPE="Bool16" >false</PREF>
        <PREF NAME="use_one_SSRC_per_stream" TYPE="Bool16" >true</PREF>
        <PREF NAME="timeout_stream_SSRC_secs" TYPE="UInt32" >30</PREF>
        <PREF NAME="timeout_broadcaster_session_secs" TYPE="UInt32" >20</PREF>
        <PREF NAME="authenticate_local_broadcast" TYPE="Bool16" >false</PREF>
        <PREF NAME="disable_overbuffering" TYPE="Bool16" >false</PREF>
        <PREF NAME="allow_broadcasts" TYPE="Bool16" >true</PREF>
        <PREF NAME="allow_announced_kill" TYPE="Bool16" >true</PREF>
        <PREF NAME="enable_play_response_range_header" TYPE="Bool16" >true</PREF>
        <PREF NAME="enable_player_compatibility" TYPE="Bool16" >true</PREF>
        <PREF NAME="compatibility_adjust_sdp_media_bandwidth_percent" TYPE="UInt32" >100</PREF>
        <PREF NAME="force_rtp_info_sequence_and_time" TYPE="Bool16" >false</PREF>
        <PREF NAME="BroadcasterGroup" >broadcaster</PREF>
        <PREF NAME="redirect_broadcast_keyword" ></PREF>
        <PREF NAME="redirect_broadcasts_dir" ></PREF>
        <PREF NAME="broadcast_dir_list" ></PREF>
        <PREF NAME="ip_allow_list" >127.0.0.*</PREF>
    </MODULE>
    <MODULE NAME="QTSSRelayModule" >
        <PREF NAME="relay_prefs_file" >/etc/streaming/relayconfig.xml</PREF>
        <PREF NAME="relay_stats_url" ></PREF>
    </MODULE>
    <MODULE NAME="QTSSAccessLogModule" >
        <PREF NAME="request_logging" TYPE="Bool16" >true</PREF>
        <PREF NAME="request_logfile_size" TYPE="UInt32" >10240000</PREF>
        <PREF NAME="request_logfile_interval" TYPE="UInt32" >7</PREF>
        <PREF NAME="request_logtime_in_gmt" TYPE="Bool16" >true</PREF>
        <PREF NAME="request_logfile_dir" >/var/streaming/logs/</PREF>
        <PREF NAME="request_logfile_name" >StreamingServer</PREF>
    </MODULE>
    <MODULE NAME="QTSSFlowControlModule" >
        <PREF NAME="loss_thin_tolerance" TYPE="UInt32" >30</PREF>
        <PREF NAME="num_losses_to_thin" TYPE="UInt32" >3</PREF>
        <PREF NAME="loss_thick_tolerance" TYPE="UInt32" >5</PREF>
        <PREF NAME="num_losses_to_thick" TYPE="UInt32" >6</PREF>
        <PREF NAME="num_worses_to_thin" TYPE="UInt32" >2</PREF>
        <PREF NAME="flow_control_udp_thinning_module_enabled" TYPE="Bool16" >true</PREF>
    </MODULE>
    <MODULE NAME="QTSSPosixFileSysModule" ></MODULE>
    <MODULE NAME="QTSSAdminModule" >
        <PREF NAME="IPAccessList" >127.0.0.*</PREF>
        <PREF NAME="Authenticate" TYPE="Bool16" >true</PREF>
        <PREF NAME="LocalAccessOnly" TYPE="Bool16" >true</PREF>
        <PREF NAME="RequestTimeIntervalMilli" TYPE="UInt32" >50</PREF>
        <PREF NAME="enable_remote_admin" TYPE="Bool16" >true</PREF>
        <PREF NAME="AdministratorGroup" >admin</PREF>
    </MODULE>
    <MODULE NAME="QTSSMP3StreamingModule" >
        <PREF NAME="mp3_request_logfile_name" >mp3_access</PREF>
        <PREF NAME="mp3_request_logfile_dir" >/var/streaming/logs/</PREF>
        <PREF NAME="mp3_streaming_enabled" TYPE="Bool16" >true</PREF>
        <PREF NAME="mp3_broadcast_password" >*****</PREF>
        <PREF NAME="mp3_broadcast_buffer_size" TYPE="UInt32" >8192</PREF>
        <PREF NAME="mp3_max_flow_control_time" TYPE="SInt32" >10000</PREF>
        <PREF NAME="mp3_request_logging" TYPE="Bool16" >true</PREF>
        <PREF NAME="mp3_request_logfile_size" TYPE="UInt32" >10240000</PREF>
        <PREF NAME="mp3_request_logfile_interval" TYPE="UInt32" >7</PREF>
        <PREF NAME="mp3_request_logtime_in_gmt" TYPE="Bool16" >true</PREF>
    </MODULE>
    <MODULE NAME="QTSSAccessModule" >
        <PREF NAME="modAccess_enabled" TYPE="Bool16" >true</PREF>
        <PREF NAME="modAccess_usersfilepath" >/etc/streaming/qtusers</PREF>
        <PREF NAME="modAccess_groupsfilepath" >/etc/streaming/qtgroups</PREF>
        <PREF NAME="modAccess_qtaccessfilename" >qtaccess</PREF>
    </MODULE>
</CONFIGURATION> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:24:54.577

添加

```
c=IN IP4 216.224.181.197 
```

修复了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:08:15.873

也许是为了

> , uri="/bstream.sdp",

/bstream.sdp 文件存在吗？

您尝试过使用 avi、wmv、rmvb 或 mp4 文件吗？

# resolution - gravatar 最高分辨率

> ID：11203954
> 
> 赞同：20
> 
> 时间：2012-06-26T09:01:30.017
> 
> 标签：resolution, gravatar

我在我的网站中显示用户的 gravatr 图像。我如何知道要使用的最佳最高分辨率？例如应该是哪个参数“s”。

```
https://secure.gravatar.com/avatar/?s=250 
```

当然这取决于用户图像，但 gravatr 必须知道初始图像的分辨率，并且可以建议我最好的最大尺寸。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-11T20:34:19.000

在过去 9 个月中，最大尺寸似乎发生了巨大变化

> 您可以请求从 1 像素到 2048 像素的任何图像，但请注意，许多用户的图像分辨率较低，因此请求更大的尺寸可能会导致像素化/低质量图像。

引用自[Gravatar 图片请求教程](https://en.gravatar.com/site/implement/images/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-06-11T14:24:48.297

我不认为这是可能的，我只是对这件事做了一些研究，因为我有同样的需求，但我认为 Gravatar 是为网站设计的，这些网站将以相同的大小显示所有头像，这意味着小头像，如果是对他们中的一些人来说太大了，他们会接受自动升级的。

它们应该包含一个“?s=native”来获得原生大小。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-26T09:07:37.963

这是 Gravatar 写的关于化身分辨率的内容：

> 您可以请求从 1 像素到 2048 像素的任何图像，但请注意，许多用户的图像分辨率较低，因此请求更大的尺寸可能会导致像素化/低质量图像。

默认图像的最高分辨率为 2048px :)

[在https://en.gravatar.com/site/implement/images/](https://en.gravatar.com/site/implement/images/)上阅读有关 Gravatar 图像（包括默认图像）的更多信息

**编辑：**即使您设置 s=3000，您也会看到图片不能超过 2048px x 2048px :)

**编辑 2：**显然最大尺寸从 512px 更改为 2048px

# ruby-on-rails - form_for 嵌套资源中的路由

> ID：11203961
> 
> 赞同：1
> 
> 时间：2012-06-26T09:02:12.440
> 
> 标签：ruby-on-rails, routing

我正在尝试完成一个应用程序，用户可以打开一个主题，其他用户可以用帖子发表评论。我将资源嵌套在 routes.rb 中：

```
resources :users

resources :sessions, only: [:new, :create, :destroy]
resources :topics, only: [:show, :create, :destroy] do

resources :posts 
```

我的 rake 路线显示：

```
 topic_posts GET    /topics/:topic_id/posts(.:format)          posts#index
                POST   /topics/:topic_id/posts(.:format)          posts#create
 new_topic_post GET    /topics/:topic_id/posts/new(.:format)      posts#new
edit_topic_post GET    /topics/:topic_id/posts/:id/edit(.:format) posts#edit
     topic_post GET    /topics/:topic_id/posts/:id(.:format)      posts#show
                PUT    /topics/:topic_id/posts/:id(.:format)      posts#update
                DELETE /topics/:topic_id/posts/:id(.:format)      posts#destroy
         topics POST   /topics(.:format)                          topics#create
          topic GET    /topics/:id(.:format)                      topics#show 
```

在我的主页中，我构建了一个可点击的主题列表和一个可以打开主题的文本区域。现在，如果您单击主题链接，我希望它向您显示顶部显示主题名称的页面，下面的帖子和同一页面下的帖子表单。显示.html.erb：

```
<div class="row">
<div class="span6 offset4">
    <h3><%= @topic.title %></h3>
    <h4><%= render 'shared/posts'%></h4>
<%= render 'shared/post_form' %>
</div>
</div>
</div> 
```

我的posts_controller 是：

```
# encoding: utf-8

class PostsController < ApplicationController
    before_filter :signed_in_user, only: [:create, :destroy]
  before_filter :correct_user, only: :destroy

    def new
        @topic= Topic.find_by_id(params[:id])
        @post = @topic.build_post
    end

    def show
    @topic = Topic.find(params[:id])
    @posts = @topic.posts.paginate(page: params[:page])
  end 

    def create
        @topic = Topic.find(params[:id])
        @post = @topic.posts.build(params[:post])
        if @post.save
            flash[:success] = "Konu oluşturuldu!"
            redirect_to root_path
        else
            render 'static_pages/home'
        end
    end

  def destroy
    @post.destroy
    redirect_to root_path
  end
  private

    def correct_user
      @post = current_user.posts.find_by_id(params[:id])
      redirect_to root_path if @post.nil?
    end
end 
```

和 _posts.html.erb ：

```
%  @posts.each do |post| %>  
  <li><%= post.content %></li>  

 <%= will_paginate @posts %>
<% end %> 
```

_post_form.html.erb ：

```
<%= form_for([@topic, @post]) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field">
        <%= f.text_area :content, placeholder: "yorumunuzu girin..." %>
  </div>
  <%= f.submit "Gönder", class: "btn btn-large btn-primary" %>
<% end %> 
```

错误在 _post_form.html.erb as =>

```
undefined method `model_name' for NilClass:Class

Extracted source (around line #1):

1: <%= form_for([@topic, @post]) do |f| %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T15:39:52.557

您的控制器的显示操作中没有@post 变量（只有@posts）。

尝试添加：

```
@new_post = @topic.build_post 
```

并将表格更改为：

```
<%= form_for([@topic, @new_post]) do |f| %> 
```

# javascript - 检查页面上的文本，然后重定向

> ID：11203963
> 
> 赞同：0
> 
> 时间：2012-06-26T09:02:25.820
> 
> 标签：javascript, jquery

如果我的页面显示：

> “代码不正确，请重试”

那么我的 URL 重定向应该是：

```
http://site.site.co.uk/index.php#contact 
```

我想使用 Jquery，但不确定如何在页面上检查这个然后重定向？

**我试过了：**

`$("div#contact-form:contains('Code incorect please try again')").attr("location","http://site.site.co.uk/index.php#contact");`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:11:20.900

您可以使用以下内容：

```
if ($("#contact-form").is(":contains('Code incorect please try again')")) {
    window.location.href = "http://site.site.co.uk/index.php#contact";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:10:47.080

如果它是一个内部服务器的东西（或者你是精确的并且任何页面说无论如何都应该被重定向），js不会帮助你。为此，您需要查看 Web 服务器 - 如果想到 apache、mod_proxy，或者其他一些模块可以评估 apache 的 req/res 链并从那里开始（如果它像 mod_perl，这不是很有趣） . iirc，你可以用 nginx 做类似的事情。

但是，如果这是一个 js 事件，请将其绑定并更改 window.location 或其他任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T09:18:41.460

这样做： -

```
if ($("div#contact-form:contains('Code incorect please try again')").length == 1)
    window.location.replace("http://site.site.co.uk/index.php#contact"); 
```

参考**[演示](http://jsfiddle.net/SivaCharan/f2GaR/5/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T09:10:44.797

```
var myDiv = $('div#contact-form:containt('Code incorrect please try again'));

if(myDiv.length === 0) {
    location = "http://site.site.co.uk/index.php#contact";
} 
```

# java - 从java中的msaccess数据库中检索图像

> ID：11203965
> 
> 赞同：0
> 
> 时间：2012-06-26T09:02:32.347
> 
> 标签：java, ms-access

我在 Ms 访问数据库中存储了一个图像，列的数据类型是 OLE OBJECT。但我无法从数据库中检索图像。请帮忙..

当我尝试打开图像时显示错误

**未知文件格式或未找到文件。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:08:41.710

我们需要做的第一件事是将列类型设置为`OLE Object`. 在将数据保存到类型的列中时`OLE Object`，将数据另存为`byte array`，在从列中检索图像时读取值，将值放入`byte array`然后转换`byte array`为`image type`并显示相同。这很简单。

# macos - 带有雪豹的 Mac 应用程序无法在 leopard os 中运行

> ID：11203973
> 
> 赞同：0
> 
> 时间：2012-06-26T09:03:12.627
> 
> 标签：macos, xcode4.2, osx-snow-leopard, osx-leopard

我在一个带有雪豹的mac应用程序中工作。这个应用程序是用leopard os创建的，但是由于一些外部应用程序，这在lion中不支持。所以我们将它转​​换为雪豹并且工作正常。现在客户需要将此应用程序转换为leopard 版本，为此我使用 xcode 4.2 和 lion os 并将 bsec SDK 转换为 Mac osx 10.5 并将 Architecture 转换为 32_bit intel，但出现错误`"The run destination My Mac 64-bit is not valid for Running the scheme 'AppName'."` 如何避免此错误？

我想用 10.5 osx 测试这个应用程序，但我们只有 10.6 和 10.7 osx，1）我们在哪里得到 leopard osx？2）Apple现在有leopard osx吗？3) 将豹操作系统安装到新的MAC系统（iMac，Macmini，Macbook）有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T14:32:44.587

不久前我遇到了同样的问题，但我正在回忆解决方案，因为我的公司同时放弃了 10.5 支持。细节可能有点偏离，但它应该让你朝着正确的方向前进：

1.  从 Apple 网站获取最新版本的 Xcode 3
2.  在 Mac 上安装它。（如果这台 Mac 已经安装了另一个版本的 Xcode，请确保删除了 Developer 目录）。
3.  在 /Developer 下，找到 10.5.sdk 目录。将此目录移动到保存位置（/Developer 之外）。
4.  安装 Xcode 4.2。
5.  查看 Xcode 4.2 安装它的 sdk 的位置。将之前保存的 10.5.sdk 目录放在它旁边。
6.  重新启动 Xcode。现在 SDK 下拉菜单中应该有 10.5 SDK 选项。

# python - 读取文件行和字符

> ID：11203978
> 
> 赞同：1
> 
> 时间：2012-06-26T09:03:45.920
> 
> 标签：python, python-2.7

我有一个看起来像这样的输入文件

```
some data...
some data...
some data...
...
some data...
<binary size="2358" width="32" height="24">
data of size 2358 bytes
</binary>
some data...
some data... 
```

二进制大小中的值 2358 可以针对不同的文件进行更改。现在我想为这个文件（它是一个变量）提取 2358 字节的数据并写入另一个文件。

我为此编写了以下代码。但这给了我一个错误。问题是，我无法提取这 2358 字节的二进制数据并写入另一个文件。

```
c = responseFile.read(1)
ValueError: Mixing iteration and read methods would lose data 
```

代码是 -

```
import re

outputFile = open('output', 'w')    
inputFile = open('input.txt', 'r')
fileSize=0
width=0
height=0

for line in inputFile:
    if "<binary size" in line:
        x = re.findall('\w+', line)
        fileSize = int(x[2])
        width = int(x[4])
        height = int(x[6])
        break

print x
# Here the file will point to the start location of 2358 bytes.
for i in range(0,fileSize,1):
    c = inputFile.read(1)
    outputFile.write(c)

outputFile.close()
inputFile.close() 
```

我的问题的最终答案 -

```
#!/usr/local/bin/python

import os
inputFile = open('input', 'r')
outputFile = open('output', 'w')

flag = False

for line in inputFile:
    if line.startswith("<binary size"):
        print 'Start of Data'
        flag = True
    elif line.startswith("</binary>"):
        flag = False
        print 'End of Data'
    elif flag:
        outputFile.write(line) # remove newline

inputFile.close()
outputFile.close()

# I have to delete the last extra new line character from the output.
size = os.path.getsize('output')
outputFile = open('output', 'ab')
outputFile.truncate(size-1)
outputFile.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T09:15:00.600

不同的方法怎么样？在伪代码中：

```
for each line in input file:
    if line starts with binary tag: set output flag to True
    if line starts with binary-termination tag: set output flag to False
    if output flag is True: copy line to the output file 
```

在实际代码中：

```
outputFile = open('./output', 'w')    
inputFile = open('./input.txt', 'r')

flag = False

for line in inputFile:

    if line.startswith("<binary size"):
        flag = True
    elif line.startswith("</binary>"):
        flag = False
    elif flag:
        outputFile.write(line[:-1]) # remove newline

outputFile.close()
inputFile.close() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T09:16:07.933

尝试将您的第一个循环更改为以下内容：

```
while True:
    line = inputFile.readline()
    # continue the loop as it was 
```

这摆脱了迭代，只留下读取方法，所以问题应该消失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T09:08:14.937

考虑这种方法：

```
import re

line = '<binary size="2358" width="32" height="24">'

m = re.search('size="(\d*)"', line)

print m.group(1)  # 2358 
```

它因您的代码而异，因此它不是直接替代品，但正则表达式功能不同。

这使用了 Python 的正则表达式组捕获功能，并且比您的字符串拆分方法要好得多。

例如，考虑如果重新排序属性会发生什么。例如：

```
<binary width="32" size="2358" height="24">'
instead of
<binary size="2358" width="32" height="24">' 
```

你的代码还能用吗？我的会。:-)

* * *

***编辑***：回答你的问题：

如果要从文件开头读取*n*个字节的数据，可以执行类似的操作

```
bytes = ifile.read(n) 
```

请注意，如果输入文件不够长，您可能会得到少于*n个字节。*

如果您不想从“第 0”字节开始，而是从其他字节开始，`seek()`请先使用，如下所示：

```
ifile.seek(9)
bytes = ifile.read(5) 
```

这会给你字节 9:13 或第 10 到第 14 个字节。

# mysql - 如果一个字段将在两个单独的 WHERE 子句中使用，是否应该在此处使用复合索引？

> ID：11203980
> 
> 赞同：0
> 
> 时间：2012-06-26T09:03:54.530
> 
> 标签：mysql, select, indexing, where-clause, database-performance

好的，我知道何时应该使用索引以及使用它的利弊的基础知识。

这些是我的查询的（唯一）两种方式：

```
SELECT target_id FROM map WHERE table_name = '' AND fingerprint = '' AND source_id = 1; 
```

和

```
SELECT fingerprint, source_id FROM map WHERE table_name = '' AND target_id = 1; 
```

我知道我必须索引字段`table_name`，`fingerprint`并`source_id`通过第一次查询。也`target_id`通过第二个查询。我可以单独做。但是我听说如果我可以将所有字段作为一个索引，复合键会提供更好的性能。由于我的情况非常具体，不会有另一个 WHERE 子句，我想创建这样的复合键：

```
(table_name, fingerprint, source_id) 
```

和

```
(table_name, target_id) 
```

但由于`table_name`两个复合索引都有重叠，我不确定这是否是要走的路。这种重叠是否会对性能产生影响？

当我进行一些测试时，我没有得到任何性能改进，两者都同样快。我现在只有几万条记录，可能就是这个原因。但数据将扩展到数百万条记录。所以我想征求专家意见。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:24:08.747

就您尝试运行的查询而言，您拥有的两个索引是正确的。但是，我不确定在 table_name 字段上建立索引。VARCHAR 字段上的索引往往非常慢（[这个答案](https://stackoverflow.com/a/2346973/1335244)指的是 PostgreSQL，但基本概念是相同的）并且可以扩大数据库的大小，同时使 INSERT 慢得多。

我使用的解决方案是创建一个查找表，如果我需要一个可以为我提供 VARCHAR 字段的查询，我只需在查找表上运行一个 JOIN。INT 上的 JOIN 往往相当快速且可扩展。

# css - Twitter Widget 覆盖页面

> ID：11203982
> 
> 赞同：0
> 
> 时间：2012-06-26T09:03:57.823
> 
> 标签：css, positioning

侧边栏右下角的 twitter 小部件在某些页面加载时覆盖页面，同时在页面刷新后转到其正确位置。这怎么能纠正。 [在这里检查](http://tinyurl.com/7hq7lz2)

编辑：我猜这是一个 CSS 问题，但不确定。

# android - 没有设置listview android onClick但导致错误

> ID：11203987
> 
> 赞同：0
> 
> 时间：2012-06-26T09:04:27.840
> 
> 标签：android

```
 i=Integer.parseInt(sendPostDataToInternet("ss"));
    int j=i-4;
    int h=0;
    while(i>j){
        String stringValue = Integer.toString(i);
    tt[h] = sendPostDataToInternet(stringValue);
    i--;
    h++;
    }
    ListView listView = (ListView) findViewById(R.id.mylist);
    ArrayAdapter<CharSequence> adapter = new ArrayAdapter<CharSequence>(ShouterActivity.this,
    android.R.layout.simple_list_item_1, android.R.id.text1, tt);
    listView.setAdapter(adapter); 
```

请参阅我没有为 onClickListener 设置任何内容，但在 LogCat 中导致错误。我可以在模拟器中显示列表，但是当我单击它或只是想滚动时，它会强制关闭。我认为我的循环没有任何问题，因为我得到了：

```
06-26 12:10:05.528: E/AndroidRuntime(461):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1691)
06-26 12:10:05.528: E/AndroidRuntime(461):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1125)
06-26 12:10:05.528: E/AndroidRuntime(461):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1675)
06-26 12:10:05.528: E/AndroidRuntime(461):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-26 12:10:05.528: E/AndroidRuntime(461):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 
```

我的程序没有

按要求编辑：

```
06-26 12:23:45.398: I/ActivityManager(61): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.pwrutls.sht/.ShouterActivity } from pid 487
06-26 12:23:45.468: I/ActivityManager(61): Start proc com.pwrutls.sht for activity com.pwrutls.sht/.ShouterActivity: pid=496 uid=10034 gids={3003}
06-26 12:23:51.368: I/ActivityManager(61): Displayed com.pwrutls.sht/.ShouterActivity: +5s910ms
06-26 12:24:04.808: E/AndroidRuntime(496):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1691)
06-26 12:24:04.808: E/AndroidRuntime(496):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1125)
06-26 12:24:04.808: E/AndroidRuntime(496):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1675)
06-26 12:24:04.808: E/AndroidRuntime(496):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-26 12:24:04.808: E/AndroidRuntime(496):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-26 12:24:04.818: W/ActivityManager(61):   Force finishing activity com.pwrutls.sht/.ShouterActivity
06-26 12:24:05.338: W/ActivityManager(61): Activity pause timeout for HistoryRecord{40680538 com.pwrutls.sht/.ShouterActivity}
06-26 12:24:10.567: I/InputDispatcher(61): Application is not responding: Window{406b45d0 com.pwrutls.sht/com.pwrutls.sht.ShouterActivity paused=false}.  5000.4ms since event, 5000.2ms since wait started
06-26 12:24:10.567: I/WindowManager(61): Input event dispatching timed out sending to com.pwrutls.sht/com.pwrutls.sht.ShouterActivity
06-26 12:24:10.588: I/ActivityManager(61): Process com.pwrutls.sht (pid 496) has died.
06-26 12:24:10.588: I/WindowManager(61): WIN DEATH: Window{406b45d0 com.pwrutls.sht/com.pwrutls.sht.ShouterActivity paused=false}
06-26 12:24:16.037: W/ActivityManager(61): Activity destroy timeout for HistoryRecord{40680538 com.pwrutls.sht/.ShouterActivity} 
```

# shell - 用于从 ftp 删除旧文件的 Linux shell 脚本

> ID：11203988
> 
> 赞同：9
> 
> 时间：2012-06-26T09:04:29.000
> 
> 标签：shell, ftp

有一个问题 - 需要将数据库备份存储在 FTP 上。在 FTP 上备份不应该超过 10 个，即在你添加备份到 FTP 之后，应该删除最旧的文件，使文件总数不能超过 10 个。我们怎样才能从 ftp 中实现这样的删除呢？我正在尝试编写脚本，但无法删除：

```
x=1
ftp -vn $FTP_SERVER<<!
user $FTP_LOGIN $FTP_PASSWORD
binary
put $DUMP_FILE_NAME

for i in `ls -t` do
    if [ $x -le $keep ] then
        ((x++))
        continue
    fi
    delete $i
done

bye
EOF
</i> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-23T13:38:13.760

这是我为删除远程 ftp 站点上超过 7 天的所有文件而编写的脚本。它的工作原理是检索目录列表，解析修改日期，然后重新连接以删除任何早于 ndays 的文件。

我怀疑硬编码到循环中的数字（元素日期）可能会根据系统的设置而改变。ls 命令的返回格式取决于本地系统设置。

假设您每天都进行备份，那么将 ndays 设置为 10 可能会解决您的问题。

```
#!/bin/bash
# get a list of files and dates from ftp and remove files older than ndays
ftpsite="ftp.yourserver.com"
ftpuser="loginusername"
ftppass="password"
putdir="/public_ftp/admin/logs"

ndays=7

# work out our cutoff date
MM=`date --date="$ndays days ago" +%b`
DD=`date --date="$ndays days ago" +%d`

echo removing files older than $MM $DD

# get directory listing from remote source
listing=`ftp -i -n $ftpsite <<EOMYF 
user $ftpuser $ftppass
binary
cd $putdir
ls
quit
EOMYF
`
lista=( $listing )

# loop over our files
for ((FNO=0; FNO<${#lista[@]}; FNO+=9));do
  # month (element 5), day (element 6) and filename (element 8)
  #echo Date ${lista[`expr $FNO+5`]} ${lista[`expr $FNO+6`]}          File: ${lista[`expr $FNO+8`]}

  # check the date stamp
  if [ ${lista[`expr $FNO+5`]}=$MM ];
  then
    if [[ ${lista[`expr $FNO+6`]} -lt $DD ]];
    then
      # Remove this file
      echo "Removing ${lista[`expr $FNO+8`]}"
      ftp -i -n $ftpsite <<EOMYF2 
      user $ftpuser $ftppass
      binary
      cd $putdir
      delete ${lista[`expr $FNO+8`]}
      quit
EOMYF2

    fi
  fi
done 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-20T08:52:51.133

这个是处理 sftp 并且有适当的日期检查，因为来自@Graeme 的脚本只在一个月内工作：

```
#!/bin/bash
# get a list of files and dates from ftp and remove files older than ndays
ftpsite="sftp -b-  -oIdentityFile=<KEYFILE> -oPort=<PORT>  <USER>@<HOST>"
putdir="/data"

ndays=19

# work out our cutoff date
MM=`date --date="$ndays days ago" +%b`
DD=`date --date="$ndays days ago" +%d`
TT=`date --date="$ndays days ago" +%s`

echo removing files older than $MM $DD

# get directory listing from remote source
echo "
cd $putdir
ls -l
"|$ftpsite >dirlist

# skip first three and last line, ftp command echo
listing="`tail -n+4 dirlist|head -n-1`"

lista=( $listing )

# loop over our files
for ((FNO=0; FNO<${#lista[@]}; FNO+=9));do
  # month (element 5), day (element 6) and filename (element 8)
  # echo Date ${lista[`expr $FNO+5`]} ${lista[`expr $FNO+6`]}          File: ${lista[`expr $FNO+8`]}

  fdate="${lista[`expr $FNO+5`]} ${lista[`expr $FNO+6`]} ${lista[`expr $FNO+7`]}"
  sdate=`date --date="$fdate" +%s`
  # check the date stamp
  if [ $sdate -lt $TT ]
  then
      # Remove this file
      echo "$MM $DD: Removing  ${lista[`expr $FNO+5`]} /  ${lista[`expr $FNO+6`]} / ${lista[`expr $FNO+8`]}"
      $ftpsite <<EOMYF2
      cd $putdir
      delete ${lista[`expr $FNO+8`]}
      quit
EOMYF2

  fi
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-10T05:48:01.533

它已经过去了几年，虽然[格雷姆的回答](https://stackoverflow.com/a/12552795/5197662)对我有所帮助，但我遇到了一些问题，这里是如何解决它们。

有时like这个句子在变量`Trying aaaa:bbb:ccc:dddd::0...`的第一行`listing`。你必须删除它。

```
rem="Trying aaaa:bbb:ccc:dddd::0...";
rep="";
listing=${listing/$rem/$rep} 
```

jsan 还评论说他面临其他问题：“对于 base 的值太大（错误标记为“08”）”当 $DD 为 0x 时，它被解释为八进制中的 x（8 和 9 的问题）

我遇到了同样的问题。因此，您最好确保 or 中没有非数字字符，`$MM`然后`$DD`从开头删除 0。喜欢`08`应该变成`8`.

所以在循环文件之前，添加以下代码：

```
MM=$(tr -dc '0-9' <<< $MM)
DD=$(tr -dc '0-9' <<< $DD)
MM=${MM#0}
DD=${DD#0} 
```

前两行删除非数字字符，倒数第二行解决了问题`08`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-27T07:50:01.580

这是一个更短的解决方案`lftp`，它也适用于子目录：

```
#!/bin/bash
# get a list of files and dates from ftp and remove files older than ndays
ftpsite="ftpback-xxx.ovh.net"
ftpuser="user"
ftppass="pass"
#remote folder in which you want to delete files
putdir="/"
nullfolder="/tmp/null"

ndays=19

mkdir -p nullfolder
MM=`date --date="$ndays days ago" +%b`
DD=`date --date="$ndays days ago" +%d`

echo removing files older than $MM $DD
#The no-ssl is there because it's on a local network and remote doesn't support ftp
lftp -e "set ftp:ssl-allow no; mirror $putdir $nullfolder --older-than=now-${ndays}days --Remove-source-files; exit" -u $ftpuser,$ftppass $ftpsite

rm $nullfolder/* -Rf 
```

但它有两个缺点：

*   它将首先下载那些旧文件（在稍后删除它们之前），因此它会使用更多带宽
*   这些旧文件在被删除之前会占用本地磁盘上的一些空间。您可以使用[nullfs](https://github.com/xrgtn/nullfs)来解决这个问题

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-06-26T09:25:09.477

不要使用 FTP（有很多原因）。但是，如果您在 ssh 中执行此操作，您将获得 tty、环境和其他所有内容。此外，如果您希望删除一个 10 天前的文件（而不是一个 10 个日历天过时的文件），那么一个简单的文件`find -mtime +10 -delete`将替换该 for 循环。所以：

```
ssh user@host 'find $DIR -mtime +10 -delete' 
```

如果您想要 FTP，请查看 NcFTP，如果我没记错的话，那里有一些相当不错的脚本功能。

# python - 删除带有和不带有'：'运算符的python中的列表

> ID：11203990
> 
> 赞同：2
> 
> 时间：2012-06-26T09:04:44.633
> 
> 标签：python, list, memory, garbage-collection

我使用 python 已经有很长一段时间了，我对垃圾收集、内存管理以及删除变量和释放内存的实际处理方面的一些问题感到困惑。

```
>>> pop = range(1000)
>>> p = pop[100:700]
>>> del pop[:]
>>> pop
[]
>>> p
[100.. ,200.. 300...699] 
```

在上面的代码中，发生了这种情况。但，

```
>>> pop = range(1000)
>>> k = pop   
>>> del pop[:]
>>> pop 
[]
>>> k
[] 
```

在第二种情况下，这意味着 k 只是指向列表“pop”。

**问题的第一部分：**

但是，第一个代码块中发生了什么？包含 [100:700] 元素的内存没有被删除还是在创建列表“p”时重复？

**问题的第二部分：**

此外，我尝试在可能的情况下在两者之间包含 gc.enable 和 gc.collect 语句，但是这两个代码中的内存利用率都没有变化。这有点令人费解。python没有将空闲内存返回给操作系统，这不是很糟糕吗？如果我在我所做的小研究中错了，请纠正我。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T09:10:28.180

对序列进行切片会产生一个新序列，其中包含适当元素的浅表副本。

将内存返回给操作系统*可能会*很糟糕，因为脚本可能会转身并创建新对象，此时 Python 将不得不再次向操作系统请求内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:18:04.363

第一部分：

在第一个代码块中，您创建一个新对象，在删除旧对象之前复制旧对象的元素。

但是，在第二个代码块中，您只需将对同一对象的引用分配给另一个变量。然后清空列表，当然，这两个引用都可以看到。

第二部分：适当时返回内存，但并非总是如此。在 Python 的底层，有一个内存分配器可以控制内存的来源。有两种方式：通过`brk()/sbrk()`机制（用于较小的内存块）和通过`mmap()`（较大的块）。

在这里，我们有相当小的块，它们直接在数据段的末尾分配：

```
datadatadata object1object1 object2object2 
```

如果我们只释放 object1，我们就会有一个内存间隙，可以为下一个对象重用，但不能轻易释放并返回给操作系统。

如果我们释放两个对象，内存可能会被返回。但是可能有一个将内存保留一段时间的阈值，因为立即返回所有内容并不是最好的事情。

# excel - 如何根据另一个单元格小数点修正小数点

> ID：11203992
> 
> 赞同：0
> 
> 时间：2012-06-26T09:04:47.317
> 
> 标签：excel, vba

我有一个excel文件，我需要做的是，根据另一个单元格格式化单元格。如果单元格“S1”有 3 位小数，则单元格“T1”应该有相同的小数位数并且它是计算字段。例如：S1 = 11.123 ---- T1 = 1.099

我需要为整个专栏做。

我可以通过将代码放在 worksheet_change 上来计算单元格上的小数位数。但我不知道如何格式化它。

请在这方面提供帮助。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:59:33.870

既然你想要一个例子，那就是:) 但请注意，这**不是**答案。只是评论将无法保存所有这些数据，而且还会破坏格式。话虽如此，它几乎和答案一样好，因为它几乎涵盖了您想要的所有方面......

我的假设：

1.  数据在 Sheet1
2.  Col S 和 Col T 相同

实现你想要的逻辑

1.  获取 Col S 的最后一行。例如看[这个](https://stackoverflow.com/questions/11169445/error-finding-last-used-cell-in-vba)
2.  循环遍历 Col S 中的单元格并检查小数点
3.  用于`.Numberformat`根据 Col S 中相应单元格中的小数位数格式化 Col T 中的单元格

少量代码片段

循环遍历 Col S 中的单元格

```
For i = 1 To LastRow
    If Sheets("Sheet1").Range("S" & i) .... Then

    End If
Next i 
```

在上述循环中设置单元格T的数字格式

```
'~~> n below is the number of decimal places that you want
Sheets("Sheet1").Range("T" & i).NumberFormat = "0." & String(n, "0") 
```

结合所有这些，然后尝试提出代码。让使用知道你卡在哪里，我们会从那里拿走它。

# batch-file - 如何保护批处理源代码？

> ID：11203994
> 
> 赞同：0
> 
> 时间：2012-06-26T09:04:50.867
> 
> 标签：batch-file, data-protection

好的，所以我尝试使用许多程序将 bat 转换为 exe，但最后它们都只是将 bat 文件放在 temp 文件夹中，所以我想知道是否有另一种方法来保护代码

我想有没有办法在执行exe文件后从临时文件夹中删除那个bat？

我什至认为有没有办法让 exe 将 temp bat 放入内存？我听说这是可能的，但我不知道该怎么做

任何想法

我想要这个，因为我给了客户一个示例 exe（完成了一半的工作）文件来测试它，然后支付了一个我花了很多时间在上面的程序，但是 2 天后他回答我说他不是不感兴趣，所以我认为他确实得到了源代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:10:36.017

经过一番搜索，我发现[这](http://www.howtogeek.com/50364/convert-a-batch-bat-script-to-an-executable-exe-file/)是一个批处理脚本，它使用[7-Zip](http://www.7-zip.org/)将批处理编译成 exe。它仍然会将其转储到 %temp% 中，但它确实说它会在完成后删除所有临时文件，这是你说你想要的。

您的另一个选择是用适当的编程语言（如 C 或 C++）重新编写代码。尽管反编译代码可能并非不可能，但我认为没有人会费心尝试！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-27T14:44:11.167

您也可以让它在完成后自行删除。

[请参阅如何使 .BAT 文件在完成后自行删除的](https://stackoverflow.com/questions/2888976/how-to-make-bat-file-delete-it-self-after-completion/20333152#20333152)答案？

# android - 适用于 Android 的 WSDL2OBJC？

> ID：11203995
> 
> 赞同：0
> 
> 时间：2012-06-26T09:04:53.953
> 
> 标签：android, iphone, wsdl2objc

我一直在使用 Wsdl2Objc 为我的 Web 服务生成代理，以便在 iPhone 开发期间使用......它工作得很好！

我现在需要一个与之类似的版本，它会以同样的方式生成 Java 代码。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:05:22.373

存在 wsdltoksoap 可用于与 ksoap2 android 库交互。

但是，我一直在使用该应用程序时遇到问题。它在我的特定 WSDL 上出现空指针异常，但它对其他人有用

[http://code.google.com/p/wsdltoksoap/](http://code.google.com/p/wsdltoksoap/)

# build-automation - 如何在 TFS2010 Binaries 输出文件夹中添加生成的项目

> ID：11203997
> 
> 赞同：0
> 
> 时间：2012-06-26T09:05:09.717
> 
> 标签：build-automation

使用 TFS2010 构建，构建具有 Web 项目的解决方案会在 Binaries 输出文件夹中创建一个“_PublishedWebsites”，并删除 Sources 文件夹中的所有 Bin 文件夹。所以不可能通过脚本移动另一个生成的项目。

如何将同一解决方案中的另一个生成的 projets no web 移动到 Binaries 文件夹？因为，在我的解决方案中，我有一个 Web 项目、一个 Service Web 项目和一个控制台项目。只有 Console 项目不会在 Binaries 文件夹中移动。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T02:24:45.773

我通过使用 Web 项目 (MVC 3)、Windows 服务和控制台应用程序创建解决方案来重新创建您的解决方案。起初一切都建立了，然后我将平台更改为“任何 CPU”。我注意到默认情况下 Windows 服务和控制台应用程序只有 x86 平台。当我使用 Any CPU 平台运行构建时，它只构建了 Web 应用程序。

您是否为构建定义选择了“任何 CPU”？如果是这样，那可能就是它跳过该项目的原因。如果您转到构建 > 配置管理器，您可以查看可用的配置/平台。您可以通过将平台留空来更新构建定义以构建两者。

让我知道是否是这种情况，以及是否还有其他我可以尝试重新创建的内容。

麦克风

# iphone - 从存储在 Documents 文件夹中的文件解析后在 TableView 中显示内容 - Objective C

> ID：11203998
> 
> 赞同：0
> 
> 时间：2012-06-26T09:05:18.743
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一个名为“hhhh.txt”的文件，其中包含以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <dict>
            <key>aa</key>
            <string>2012-06-26 14:25:43</string>
    </dict>
    <dict>
            <key>bb</key>
            <string>2012-06-26 14:25:49</string>
    </dict>
    <dict>
            <key>cc</key>
            <string>2012-06-26 14:25:51</string>
    </dict>
</array>
</plist> 
```

我还有一个名为“显示历史记录”的按钮。单击它时，我想在一个小窗口中的 tableview 中显示键的名称，即“aa”、“bb”、“cc”。

目前，我在 .m 文件的“showHistoryPressed”函数中编写了以下代码行::

```
NSString *hisDir = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
NSString *historyFilePath = [hisDir stringByAppendingPathComponent:@"hhhh.txt"]; 
```

我想读取 hhhh.txt 文件，然后解析键.. 然后单击“显示历史记录”按钮在 tableView 中显示它们的名称。

我现在应该如何进行？谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:15:29.133

```
NSArray *array = [NSArray arrayWithContentsOfFile:historyFilePath ]; 
```

将是包含字典的数组。
为了获得所有钥匙，你可以拥有这个

```
NSMutableArray *keys = [[NSMutableArray alloc] init];
for (NSDictionary *dict in array) {
  [keys addObjectsFromArray:[dict allKeys]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:20:22.770

```
NSArray *arrayOfDictionary = [[NSArray alloc] initWithContentsOfFile:historyFilePath ]; 
```

上面的代码错误地获取文本文件中存在的字典数组

现在您可以从字典中获取与键关联的字符串，如下所示

```
NSMutableArray *strings = [[NSMutableArray alloc] init];
for (NSDictionary *dict in arrayOfDictionary) 
{
  [strings addObjectsFromArray:[dict allKeys]];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:10:56.687

```
NSArray *arr = [NSArray arrayWithContentsOfFile:historyFilePath ];

NSMutableArray *tableContentArray = [[NSMutableArray alloc] init];
for (NSDictionary *dict in arr) {
  [tableContentArray addObject:[dict objectForKey:@"key"]];
}

now load your table view with this tableContentArray 
```

希望这会帮助你..

# jquery - 使用 jquery 在 ruby on rails 中动态选择

> ID：11203999
> 
> 赞同：2
> 
> 时间：2012-06-26T09:05:21.933
> 
> 标签：jquery, ruby-on-rails-3

我正在尝试在以下代码中实现动态选择。我有产品，产品有很多批号。一旦我选择与产品相关的批次号，就应该显示出来。表格详情如下。

```
<div class ="prod"><%= f.association :product, :collection => Product.in_stock %> </div><br/>

<div class ="batch"><%= f.grouped_collection_select :batch_no, Product.in_stock, :store_opening_stocks, :title, :batch_no, :batch_no, :prompt => "Select Batch"%></div> 
```

表单的jquery如下

```
jQuery(document).ready(function(){
  var child = jQuery('.batch').html();
  jQuery('.prod').change(function() {
   var parent = jQuery('.prod :selected').text();
   var escaped_parent = parent.replace(/([ #;&,.+*~\':"!^$[\]()=>|\/@])/g, '\\$1')  
    var options = jQuery(child).filter("optgroup[label='#{escaped_parent}']").html()
     if (options) {
      jQuery('.batch').html(options);
      return jQuery('.batch').parent().show();
    } else {
      jQuery('.batch').empty();
    }
   });
}); 
```

现在的问题`options`是返回null。当我这样做时，我发现`alert(options)`它显示为空。任何人都可以请我指出正确的方向吗？有没有其他方法可以完成我的任务。提前致谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T09:55:44.673

```
jQuery(document).ready(function(){
  var child = jQuery('.batch').html();
  jQuery('.prod').change(function() {
   var parent = jQuery('.prod :selected').text();
   /* var escaped_parent = parent.replace(/([ #;&,.+*~\':"!^$[\]()=>|\/@])/g, '\\$1') */  
    var options = jQuery(child).filter("optgroup[label='" + parent + "']").html()
     if (options) {
      jQuery('.batch').html(options);
      return jQuery('.batch').parent().show();
    } else {
      jQuery('.batch').empty();
    }
   });
}); 
```

这对你有什么魔力吗？

对控制器进行 ajax 调用并返回一组选项，然后用返回的选项填充批处理可能会更干净。

就像是

```
var data = {
  product_id: jQuery('.prod :selected').attr("data-id")           
}
jQuery.ajax({
  url: controller/get_batch,
  type: 'GET',
  dataType: 'script',
  data: data
}); 
```

用 get_batch.js 你放的地方

```
jQuery('.batch').html(<%= escape_javascript(render :partial => "select_box_for_batch") %>); 
```

代码不完整，你仍然需要在产品选择和东西中添加一个 ID，但我想你会明白的。

**编辑：我用一个简单的例子做了一个[存储库](https://github.com/Vikko/bharath)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:12:16.317

经过一番努力，这对我有用....但欢迎任何其他比这更好的答案。因为我不太了解 ajax 调用以及如何将其连接到控制器和其他东西......我只用 jquery 进行了修改。

这是代码。

```
 jQuery(document).ready(function(){
      var batchNo = jQuery('.batch').html();
      jQuery('.prod').bind('change',function() {
      var  productSelected = jQuery('.prod :selected').val();
    var options = jQuery(batchNo).find("optgroup[label='" + productSelected + "']").html();
   ;  if (options) {
      jQuery('.batch select').html(options);
      return jQuery('.batch').parent().show();
    } else {
      jQuery('.batch').empty();
    }
    });
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T00:44:29.527

看起来你被包含`div`标签上的类选择器绊倒了。

具体来说， 的目标`var child`是返回一个`option`标签数组。理想情况下，您应该使用`ID`表单构建器分配给每个元素的属性。不知道您如何打开表单（即不知道父模型），让我们假设您的 open 语句看起来像：

```
<%= form_for @product_batch do |f| %> 
```

这将使您的`product`和 `batch_no`选择的字段看起来像：

```
<select name="product_batch[product_id]" id="product_batch_product_id">
<select name="product_batch[batch_no]" id="product_batch_batch_no"> 
```

现在，我们可以按如下方式重构您的 jQuery：

```
jQuery(function() {
  var child = $('#product_batch_batch_no').html();
  $('#product_batch_product_id').live("change", function() {
    var escaped_parent, parent, options;
    parent = $('#product_batch_product_id :selected').text();
    escaped_parent = parent.replace(/([ #;&,.+*~\':"!^$[\]()=>|\/@])/g, '\\$1');
    options = $(child).filter("optgroup[label='" + escaped_parent + "']").html();
    $('#product_batch_batch_no').html(options);
  });
}); 
```

您的代码的最后一点：

```
if (options) {
  jQuery('.batch').html(options);
  return jQuery('.batch').parent().show();
} else {
  jQuery('.batch').empty();
} 
```

从字面上看是破坏性的。当一个产品没有`batch_nojQuery('.batch').empty();`删除里面的html时：

```
<div class="batch"></div> 
```

删除后，此代码就消失了……这可能不是您想要的。

无论如何，我同意 Ryan Bates 的观点，即这是实现动态选择框的一种很好的、​​不显眼的方式。[您可能想在http://railscasts.com/episodes/88-dynamic-select-menus-revised](http://railscasts.com/episodes/88-dynamic-select-menus-revised)查看修改后的 RailsCast

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-23T20:17:36.303

我喜欢 Vikko 使用 Ajax 调用仅加载所需内容的方法，尤其是随着数据库的增长。

但是对于问题中的特定代码，这对我有用：（在咖啡脚本中）。请注意关键区别在于分配选项变量的行

```
jQuery ->
  child = $('.batch').html()
  $('.prod').change ->
    parent = $('.prod :selected').text()
    options = $(child).filter((index) ->
      $(this).attr("label") is parent)

    if options
        $('.batch').html(options)
        $(".batch").parent().show()
    else
    $(".batch").empty()
    return 
```