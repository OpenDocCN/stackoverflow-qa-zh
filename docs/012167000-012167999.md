# StackOverflow 问答 12167000-12167999

# highcharts - 使 Highchart 和 Highstock 对不同的数据点具有统一的时间 X 轴

> ID：12167000
> 
> 赞同：2
> 
> 时间：2012-08-28T20:24:23.083
> 
> 标签：highcharts, highstock

我的数据随时间分散。我碰巧有很多八月份的样品。Highstock 目前调整 x 轴以适应我拥有的数据，但我想强制它是统一的，所以每个月都均匀地显示在 x 轴上。我该怎么做呢？

![在此处输入图像描述](../Images/97490c631a1275c6666d1362552843b8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T20:35:20.233

设置[`ordinal: false`](http://api.highcharts.com/highstock#xAxis.ordinal)你的`xAxis`定义。

# android - 使用 startActivityForResult() 的代码流

> ID：12167003
> 
> 赞同：3
> 
> 时间：2012-08-28T20:24:33.643
> 
> 标签：android, start-activity

我正在开发一个 Android 应用程序。我有一个活动来检查我的设备上是否存在 XML 文件。如果它不存在，我会调用一个例程来做很多事情，包括从 URL 下载该文件。

如果确实存在，我想提示（是/否）用户查看他们是否要重新下载文件，或者只是跳过它。

我从使用对话框开始。我看到的讨论说Dialogs只是异步的，所以我切换到使用Activity来提示Yes/No。

进一步阅读后，我相信真正的答案是使用`startActivity()`异步启动一个活动，但使用`startActivityForResult()`同步设置它（阻塞）。这个说法正确吗？

好的，假设我上面的陈述是正确的，我一直在研究如何回到我在代码流中的原始起点，知道用户选择了哪个按钮（是/否）。

所有的例子都告诉我，我需要使用它来获得我的结果。

```
protected void onActivityResult(int requestCode, int resultCode,Intent data) {

} 
```

我正在努力解决如何将其放入我的代码中以使其更容易流动。我看到很多示例显示所需的代码片段，但我不清楚它们是如何组合在一起的。我的代码结构是否最终是这样的：

```
public class MainScreen extends Activity    {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    protected void onButtonClick(parameters)    {
        /* Do some work to see if the file exists */
        if (!file.exists()) {
            runComplexRoutine(various_parameters);

        } else {
            Intent myIntent = new Intent(getBaseContext(), PromptingActivity.class);
            myIntent.putExtra("filename", variable_holding_filename);   // Just passing a parameter to use in the title of the caled Activity
            startActivityForResult(myIntent, 1);
                        // Point A
        }
    }

    protected void onActivityResult(int requestCode, int resultCode,Intent data) {
        if (resultsCode == Activity.RESULT_OK)  {
            runComplexRoutine(various_parameters);
        }
        // else, do nothing...
    }

} 
```

我的问题是我必须通过很多`various_parameters`地方。如果我能在 处恢复流量就好了`Point A`，但这似乎是不可能的。我在这里正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:29:56.323

`startActivityForResult()`是异步的。由于 UI 会发生变化，并且您的调用活动将被暂停（您的`onPause()`方法将被调用），因此它对用户来说可能是同步的。

但是，您的调用活动仍然能够运行代码；您将实现一个回调，以便在您为结果启动的活动完成时调用（这使它非常像一个对话框）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-26T02:18:13.967

我发现使用`startActivityForResult`and`onActivityResult`将在`startActivityForResult`to`onActivityResult`和 break flow之后移动流`startActivityForResult`。我想着如何在`startActivityForResult`不破坏它的情况下继续流动。在思索着合适的方法时，我终于找到了**“Getting a result from an activity”**的内容。希望这可以帮助。

**这是[一个链接](https://developer.android.com/training/basics/intents/result)！**

# c# - 文件路径很长的文件上的 C# SHA256

> ID：12167006
> 
> 赞同：0
> 
> 时间：2012-08-28T20:24:41.663
> 
> 标签：c#, windows, filepath, sha256

我通过win32 api（kernel32的DllImport）`List<string>`递归获得了一个文件。`FileFinderEx`（有几个问题可以解决这个问题）。

我处理的完全限定路径大于`MAX_PATH`使用`\\?\UNC\`and `\\?\`。

此外，从 win32 api 我可以通过`GetShortPathNameW`.

现在我有了`List<string>`文件的完全限定路径，我想遍历每个路径并将它们`SHA256`放入另一个列表（相同的索引）。粗略地说，是这样的：

```
List<string> files = new List<string>();
//win api function populates files ...
List<string> hash = new List<string>();
for (int i = 0; i < files.Count; i++)
{
    using (var stream = new BufferedStream(File.OpenRead(files[i]), 1200000))
    {
        SHA256Managed sha = new SHA256Managed();
        byte[] checksum = sha.ComputeHash(stream);
        hash.Add(BitConverter.ToString(checksum).Replace("-", String.Empty));
        stream.Close();
    }
} 
```

我面临的问题是，即使我给它“短路径”（8.3 名称），`File.OpenRead`如果完全限定的 UNC 名称大于`MAX_PATH`（我相信是 260），总是会抛出异常。

那么现在怎么办？我可以导入一些win32 api函数来代替阅读`File.OpenRead`吗？或者是否有其他一些 .NET 方法来打开具有长文件路径的文件？有什么技巧可以绕过这个限制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T20:57:45.993

看一下[`CreateFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)kernel32.dll 中的函数。尽管它的名字，你可以使用它来读取或创建一个文件，并且 Unicode 版本将允许你使用比`MAX_PATH`.

```
[DllImport("kernel32.dll", CharSet = CharSet.Unicode)]
internal static extern SafeFileHandle CreateFile(
    string lpFileName,
    EFileAccess dwDesiredAccess,
    EFileShare dwShareMode,
    IntPtr lpSecurityAttributes,
    ECreationDisposition dwCreationDisposition,
    EFileAttributes dwFlagsAndAttributes,
    IntPtr hTemplateFile); 
```

几年前，BCL 团队的博客上有一系列很好的文章（[此处为第 1 部分），涵盖了 Windows 和 .NET 中的长路径主题，我认为您会发现这些文章很有用。](http://blogs.msdn.com/b/bclteam/archive/2007/02/13/long-paths-in-net-part-1-of-3-kim-hamilton.aspx)

# winapi - 在 winapi 中使用 _tcstok_s 解析 tchars

> ID：12167016
> 
> 赞同：1
> 
> 时间：2012-08-28T20:25:13.593
> 
> 标签：winapi, parsing, token, delimiter, tchar

使用以下代码，我收到错误“simpleWindow.exe 中 0x59be5d2e (msvcr100d.dll) 处的未处理异常：0xC0000005：访问冲突写入位置 0x00e750f8。”

```
TCHAR *string1 = _T("last.first");
TCHAR *delim = _T(".");
TCHAR *context;
TCHAR *name = _tcstok_s(string1, delim, &context); 
```

这只是我正在使用的一个例子，最终我试图从另一个类中提取一个字符串，但我想让解析首先工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:33:32.030

改成：-

```
TCHAR string1[] = _T("last.first"); 
```

# python - 无法弄清楚 Web2py Ticket 错误

> ID：12167019
> 
> 赞同：0
> 
> 时间：2012-08-28T20:25:39.537
> 
> 标签：python, web2py

我是 Web2py 的新手，无法理解票证抛出的错误。有人可以解释错误及其发生的原因吗？

这是门票：

票号

127.0.0.1.2012-08-29.01-43-16.edfb1953-fd71-4aa6-a768-815fe46fe273 'Expression' 对象没有属性 'strip'

追溯

```
   回溯（最近一次通话最后）：
      文件“/home/user/Web2py/web2py/gluon/restricted.py”，第 205 行，在环境中的受限 exec ccode 中
      文件“/home/user/Web2py/web2py/applications/SocialImage/models/db.py”，第 12 行，格式 = '%(title)s')
      文件“/home/user/Web2py/web2py/gluon/dal.py”，第 6320 行，在 define_table
    多模型=多模型）
      文件“/home/user/Web2py/web2py/gluon/dal.py”，第 598 行，create_table referenced = field.type[10:].strip()
   AttributeError：“Expression”对象没有属性“strip”

```

```
错误快照

（'Expression' 对象没有属性 'strip'）

```

```
函数参数列表

(self=, table=, 'id': }>, migrate=True, fake_migrate=False, polymodel=None)
代码清单

            可排序 += 1
            k = 字段名
            if isinstance(field.type,SQLCustomType):
                ftype = field.type.native 或 field.type.type
            elif field.type.startswith('reference'):
                引用 = field.type[10:].strip()

                约束名 = self.constraint_name（表名，字段名）
                如果有属性（表，'_primarykey'）：
                    rtablename,rfieldname = referenced.split('.')
                    rtable = table._db[rtablename]

```

代码：

```
    db = DAL("sqlite://storage.sqlite")

    db.define_table('用户',
        字段('uname',unique=True),
        字段（'名称'），
        字段（'电子邮件'））

    db.define_table('图像',
        字段（'标题'，唯一=真），
        字段（'文件'，'上传'），
        字段（'uploader_name'，db.user.uname），
        格式 = '%(title)s')

    db.define_table('评论',
        字段（'image_id'，db.image），
        字段（'作者'，db.user.uname），
        字段（'正文'，'文本'））

    db.user.email.requires=IS_EMAIL()
    db.user.uname.requires=IS_NOT_IN_DB(db,db.uname)
    db.user.name=IS_NOT_EMPTY()
    db.image.uploader.requires=IS_IN_DB(db,db.user.uname)
    db.comment.image_id.requires=IS_IN_DB(db,db.image.id,'%(title)s')
    db.comment.image_id.writable=db.comment.image_id.readable=False

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:20:53.550

您错误地定义了参考字段——它们应该引用一个表，而不是该表中的特定字段。例如，您有：

```
Field('uploader_name', db.user.uname) 
```

应该是：

```
Field('uploader_name', db.user) 
```

请注意，引用字段不会存储用户表中的实际 uname ——它将存储用户表中引用记录的 id。如果需要，您可以从该参考中获取 uname。

此外，即将发布的 web2py 2.0 版本包括一个新的“惰性表”特性，它可以惰性地定义表（完整定义被推迟到第一次通过 db.tablename 引用访问表时）。因此，为了让您的表保持惰性，定义引用字段的首选方法是：

```
Field('uploader_name', 'reference user') 
```

这避免了使用`db.user`，这将立即强制定义用户表。

最后，向被引用的表添加“格式”属性是个好主意——默认情况下，引用字段使用被引用表的“格式”属性来确定如何在表单下拉列表中显示字段的值，网格/表格和只读表格。对于用户表，您可以执行以下操作：

```
db.define_table('user',
    Field('uname',unique=True),
    Field('name'),
    Field('email'),
    format='%(uname)s') 
```

In that case, all fields that reference the user table will display the uname value instead of the underlying record id (even though the reference field itself will store the record id).

# python - matplotlib 坐标轴格式

> ID：12167023
> 
> 赞同：0
> 
> 时间：2012-08-28T20:26:07.107
> 
> 标签：python, matplotlib, pyqt

我正在 matplotlib 中创建一个实时图，hpwever 我无法让 x 轴实时更新刻度，我想要做的是每个刻度的发生时间，例如，如果刻度设置为 5 分钟间隔会的`10:20,10:25,10:30,etc`。我目前所做的不起作用，我将新时间附加到数组中，然后将数组调用到 xtick。大批：

```
self.datetime1 = time.localtime()
self.datetime1 = timeString  = time.strftime("%m-%d %H:%M:%S", self.datetime1)
self.date.append(self.datetime1) 
```

xticks：

```
self.ax1.set_xticklabels(self.date) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:45:13.417

让我知道这对您是否有意义。我把这个例子放在一起，它不是最漂亮的。我认为关键是使用 plot_time(ars...) 告诉 matplotlib 查找数字并正确格式化。

使用 python[2.7.2]、matplotlib、numpy：

```
import numpy as np
from matplotlib import pyplot as plt
import random, sys
from datetime import datetime, timedelta
import time

tWindow=1 #moving window in minutes

timeList=[datetime.now()]
valList=[random.randint(1, 20)]

fig = plt.figure() #Make a figure
ax = fig.add_subplot(111) #Add a subplot

#Create the line with initial data using plot_date to add time to the x axis
line,=plt.plot_date(timeList, valList, linestyle='-') 

#Set the x limits to the time window
ax.set_xlim([datetime.now()-timedelta(seconds=tWindow*60),datetime.now()])

#set the y limits
ax.set_ylim(0,20)

#grab the blank background to clear the plot later
background = fig.canvas.copy_from_bbox(ax.bbox)

#show the figure
fig.show()

#loop
for i in range(100):
    #restore the background
    fig.canvas.restore_region(background)

    #add time to time list
    timeList.append(datetime.now())

    #add random value to values
    valList.append(random.randint(1, 20))

    #update the line data
    line.set_data(timeList,valList)

    #update x limits
    ax.set_xlim([datetime.now()-timedelta(seconds=tWindow*60),datetime.now()])

    #redraw widnow
    fig.canvas.draw()

    #pause the loop for .5 seconds
    time.sleep(0.5) 
```

**产生：** ![代码输出](../Images/dfe4bc6909e8954e95ec52a0f8657baf.png)

## 更新：

我刚刚找到了您的另[一篇帖子](https://stackoverflow.com/questions/11960339/add-date-time-to-real-time-matplotlib-plot)，其中包含我猜您正在处理的代码。

尝试更换

```
self.l_user, = self.ax.plot([],self.user, label='Total %') 
```

和

```
self.l_user, = self.ax.plot_date([],self.user, label='Total %') 
```

现在您可以将时间戳传递给 matplotlib，而不是

```
def timerEvent(self, evt):
        # get the cpu percentage usage
        result = self.get_cpu_usage()
        # append new data to the datasets
        self.user.append(result[0])
        # update lines data using the lists with new data
        self.l_user.set_data(range(len(self.user)), self.user)
        # force a redraw of the Figure
        self.fig.canvas.draw()
           #else, we increment the counter
        self.cnt += 1 
```

尝试按照以下方式做一些事情

```
def timerEvent(self, evt):
        # get the cpu percentage usage
        result = self.get_cpu_usage()
        # append new data to the datasets
        self.user.append(result[0])
        #save the current time
        self.timeStamp.append(datetime.now())
        # update lines data using the lists with new data
        self.l_user.set_data(self.timeStamp, self.user)
        #rescale the x axis maintaining a 5 minutes window
        self.ax.set_xlim([datetime.now()-timedelta(seconds=5*60),datetime.now()])
        # force a redraw of the Figure, this might not update the x axis limits??
        self.fig.canvas.draw()
           #else, we increment the counter
        self.cnt += 1 
```

使用适当的导入和变量初始化

```
from datetime import datetime, timedelta

class CPUMonitor(FigureCanvas):
    """Matplotlib Figure widget to display CPU utilization"""
    def __init__(self):
        ...
        self.timeStamp=[]
        ... 
```

# c# - 将 where 子句添加到 linq 查询

> ID：12167028
> 
> 赞同：1
> 
> 时间：2012-08-28T20:26:36.297
> 
> 标签：c#, linq

我找到了如何“动态”向 linq 查询添加更多 where 子句的示例，但我不确定如何使其适用于我的特定查询。

这是[一个例子](https://stackoverflow.com/questions/2493412/build-dynamic-linq)，这是[另一个](https://stackoverflow.com/questions/6359980/proper-linq-where-clauses)例子。现在看看我的查询：

```
var result = (from EventLogEntry elog in el.Entries
              where (elog.InstanceId == 4107)
              orderby elog.TimeGenerated descending
              select elog).ToList();

var query = from EventLogEntry elog in el.Entries
            orderby elog.TimeGenerated descending
            select elog; 
```

第一个示例显示了硬编码`InstanceID == 4107`，但我希望能够添加更多 where 子句。我见过的所有例子都说要做：

```
query = query.Where(el.Entries => el.Entries.Message.Contains("error")); 
```

或类似的东西。但是我的查询设置将“源”定义为 EventLogEntry 对象，因此当我尝试扩展 where 子句时，它无法识别我想要在哪里执行的字段......

有什么帮助吗？

这是我尝试添加的内容，而智能感知无法识别其中的任何内容：

```
if (!String.IsNullOrEmpty(sc.Message))
    query = query.Where(elog.Message.Contains(sc.Message)); 
```

更新（这是工作版本）：

```
var query = from EventLogEntry elog in el.Entries select elog;

try
{
    if (!String.IsNullOrEmpty(sc.Message))
        query = query.Where(elog => elog.Message.Contains(sc.Message));

    query = query.OrderBy(elog => elog.TimeGenerated);

    var result = query.ToList();
}
catch
{
    throw;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:30:04.450

where 只需要一个布尔结果表达式。您可以使用 ands、ors、比较器，甚至是数学方程式。只需使用逻辑运算符来扩展括号内的表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:33:40.190

`.Where()`接受一个表达式：

```
if (!String.IsNullOrEmpty(sc.Message))
    query = query.Where(elog => elog.Message.Contains(sc.Message)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T20:33:25.487

您可以添加更多表达式，就像使用 if 时一样：

```
where (elog.InstanceId == 4107 || elog.InstanceId == 4108) 
```

# c# - 用于表示由两个外键索引的表的 OOP 数据结构

> ID：12167033
> 
> 赞同：0
> 
> 时间：2012-08-28T20:26:50.303
> 
> 标签：c#, wpf, oop, .net-4.0

我的任务是将“表驱动”程序转换为面向对象的程序。过去一切都是通过在内存中创建大表、添加和删除行和列以及将所有内容解析为字符串来完成的。这太可怕了。这些表直接反映了存储所有内容的底层数据库的结构。

对于这个问题，我有`Layer`大约 100 个属性的`Event`对象，并且我有大约 20 个属性的对象。然后，我为每对有一组大约 10 个计算值`Layer/Event`。这些被存储为第三个表，外键指向其他每个表。

我想创建一个适当的面向对象的类来存储这些数据并像在字典中一样快速访问值。

我的第一个想法是在字典中索引结果，但我觉得它的使用是不直观的：

```
struct EventLayerResult { Decimal sum = 0; Long events = 0; Decimal average; ...}
//Performing Calculations
Dictionary<Tuple<Event,Layer>, EventLayerResult> _EventLayerResults ...;
foreach(Event evt in _Events)
    foreach(Layer lyr in _Layers)
        EventLayerResult elr = newLayerLosses[Tuple.Create(evt, lyr)];
        elr.sum += currentValue;
        elr.events += 1;
        elr.average += elr.Sum/elr.Events;
        etc...
//Using results
EventLayerResult temp = _EventLayerResults.TryGetValue(Tuple.Create(evt, lyr))
someLoss = temp == null ? 0 : temp.expectedLoss; 
```

我不喜欢每次创建值时都必须调用 Tuple.Create 或创建临时对象的新实例的想法。而且，和表格不同，如果我想在 UI 中绑定这个表格，我不能只绑定到 Field="Layer"、Field="Event"、Field="Loss" 等，我必须想出提取`Key.Layer`, `Key.Event`,`Value.Loss`等的复杂绑定表达式。出于这个原因，我想避免这种数据结构。

我可以将它包装在一个对象中，这样我就可以轻松地查找事件/层组合的每个值，但我不认为我应该为每个计算的属性创建一个“get”方法，这样我就可以像这样使用它：

```
thisSum = _EventLayerResults.getSum(evt, lyr);
thisEvent = _EventLayerResults.getExpectedLoss(evt, lyr); 
```

我还认为绑定到这种结构中包含的完整结果列表是不可能的。

我的最终想法（我认为最接近我必须使用的解决方案）是一个简单的对象/结构集合，其中包含我需要引用的所有字段：

```
class EventLayerResult { Event oevent; Layer layer; Decimal sum; Long events...}
ObservableCollection<EventLayerResult> _EventLayerResults = ....
_EventLayerResults.Add( new EventLayerResult(){ oevent = evt, layer = lyr } ); 
```

这非常容易绑定，但问题是这个集合上没有“索引”。我正在查看 O(Nevts * Nlyrs) 时间来稍后查找特定的事件/层结果，除非我开始添加所有这些额外的包袱，例如监视集合的自定义包装类添加事件并索引字典中的集合项， ETC。

我无法想象其他人每次想要将由两个外键索引的简单表转换为对象模型时都会经历所有这些。是否有一种我不知道的标准方法或数据结构可以使这种数据集易于使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:13:57.383

到目前为止，我提出的最佳解决方案是使用字典将集合和索引包装在外键上，就像我在 OP 中建议的那样。不过似乎工作量很大：

```
public class EventGroupIDLayerTuple : Tuple<Int32, Layer>
{
    public EventGroupIDLayerTuple(Int32 EventGroupID, Layer Layer) : base(EventGroupID, Layer) { }
    public Int32 EventGroupID { get { return this.Item1; } }
    public Layer Layer { get { return this.Item2; } }
}
public class EventGroupLayerResult
{
    public Int32 EventGroupID { get; set; }
    public Layer Layer { get; set; }
    //Computed Values
    public Decimal Sum { get; set; }
    public Decimal Average { get; set; }
    //...
}

/// <summary>ObservableCollection of computed EventGroup/Layer results that are also indexed
/// in a dictionary for rapid retrieval.</summary>
public class EventGroupLayerResultCollection : ObservableCollection<EventGroupLayerResult>
{
    Dictionary<EventGroupIDLayerTuple, EventGroupLayerResult> _Index = 
        new Dictionary<EventGroupIDLayerTuple,EventGroupLayerResult>();

    public EventGroupLayerResultCollection() : base() { }

    /// <summary>Will return the result for the specified eventGroupID/Layer
    /// combination, or create a new result and return it.</summary>
    public EventGroupLayerResult this[Int32 eventGroupID, Layer layer]
    {
        get
        {
            EventGroupLayerResult retval;
            if( !_Index.TryGetValue(new EventGroupIDLayerTuple(eventGroupID, layer), out retval) )
            {
                retval = new EventGroupLayerResult() { EventGroupID = eventGroupID, Layer = layer };
                this.Add(retval);
            }
            return retval;
        }
    }

    public bool Contains(Int32 eventGroupID, Layer layer)
    {
        return _Index.ContainsKey(new EventGroupIDLayerTuple(eventGroupID, layer));
    }

    #region Index Maintenance
    protected override void ClearItems()
    {
        _Index.Clear();
        base.ClearItems();
    }
    protected override void InsertItem(int index, EventGroupLayerResult item)
    {
        _Index.Add(new EventGroupIDLayerTuple(item.EventGroupID, item.Layer), item);
        base.InsertItem(index, item);
    }
    protected override void RemoveItem(int index)
    {
        _Index.Remove(new EventGroupIDLayerTuple(this[index].EventGroupID, this[index].Layer));
        base.RemoveItem(index);
    }
    protected override void SetItem(int index, EventGroupLayerResult item)
    {
        _Index.Remove(new EventGroupIDLayerTuple(this[index].EventGroupID, this[index].Layer));
        _Index.Add(new EventGroupIDLayerTuple(item.EventGroupID, item.Layer), item);
        base.SetItem(index, item);
    }
    #endregion
} 
```

这段代码让我可以快速创建/访问/修改集合中的元素，如下所示：

```
eventGroupLayerResults[evt.GroupID, lyr].Sum += value; 
```

同时仍然允许我轻松地将集合绑定到 UI。

尽管如此，一个更好的解决方案仍然会受到赞赏，因为我必须重写一堆 ObservableCollection 方法来做到这一点。

# c# - Windows 8：在扩展初始屏幕中使用 LiveSDK 登录

> ID：12167034
> 
> 赞同：1
> 
> 时间：2012-08-28T20:26:55.207
> 
> 标签：c#, windows-8, microsoft-metro, windows-live

我想在显示扩展启动画面的同时让我的用户登录。但是 Live Sdk 总是抛出一个意想不到的错误！

```
Microsoft.Live.LiveAuthException: An error occurred while performing the operation. Please try again later. ---> System.Exception: Die Anforderung wird nicht unterstützt. (Ausnahme von HRESULT: 0x80070032)
   at Windows.Security.Authentication.OnlineId.OnlineIdAuthenticator.AuthenticateUserAsync(IEnumerable`1 requests, CredentialPromptType credentialPromptType)
   at Microsoft.Live.TailoredAuthClient.<GetAccessToken>d__b.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.Live.TailoredAuthClient.<AuthenticateAsync>d__0.MoveNext()
   --- End of inner exception stack trace ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at WitzeWindows8.ExtendedSplashScreen.<DismissedEventHandler>d__13.MoveNext() in c:\Users\Michi\Documents\Visual Studio 2012\Projects\WitzeWindows8\WitzeWindows8\ExtendedSpashScreen.xaml.cs:line 135 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:07:22.780

查看如何使用本教程使用 LiveSDK：[http ://www.silverlightshow.net/items/Using-the-Live-SDK-in-Windows-8-XAML-C-Metro-Applications.aspx](http://www.silverlightshow.net/items/Using-the-Live-SDK-in-Windows-8-XAML-C-Metro-Applications.aspx)

您的扩展启动画面可能是问题的根源，您应该尝试不使用扩展启动画面并显示此窗口，如教程中所述： ![在此处输入图像描述](../Images/96d7ba5f9a8269c8c28a000fc7ca64b4.png)

# javascript - 如何使用 javascript、jquery 或其他一些 javascript 框架过滤数据？

> ID：12167038
> 
> 赞同：0
> 
> 时间：2012-08-28T20:27:13.797
> 
> 标签：javascript, jquery, backbone.js, knockout.js

例如，我有 3 个复选框：

```
<input type="checkbox" name="filter[]" value="1">
<input type="checkbox" name="filter[]" value="2">
<input type="checkbox" name="filter[]" value="3"> 
```

我正在使用 PHP 发送一些 json，如下所示：

```
{'name': 'John Doe', 'title': 'CEO', 'filters': {'1':'2', '2':'3'}},
{'name': 'Jane Doe', 'title': 'COO', 'filters': {'1':'1', '2':'3'}},
{'name': 'Tim Doe', 'title': 'CFO', 'filters': {'1':'2'}} 
```

我试图弄清楚如何单击复选框并仅显示具有相应过滤器的记录。jquery 中是否有一些东西可以使这个简单，或者可能是像 Backbone 或 Knockout 这样的框架？我在 Knockout 中看到过示例，它似乎不必要地复杂......但也许它比我想象的更复杂。

感谢您的帮助，或者能够为我指明正确的方向。

*编辑*- 我完全愿意重新格式化 json，如果这样更容易的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:48:34.667

我有点不确定您发送的过滤器对象，但我想这是您要过滤的值而不是键。而且我还猜想响应是一个包含对象的数组。

首先，我将创建一个数组，复选框添加和删除值。此处显示一个输入，但所有输入都应指向同一个数组：

```
var filterArray = [];
var input = document.createElement("INPUT");
input.value = "1";
input.onclick = function() {
    if (this.checked)
        filterArray.push(this.value); // Add value to array
    else
        filterArray.splice(filterArray.indexOf(this.value), 1); // Remove value from Array
    filterPersons(); // Run the filter function

} 
```

然后我会运行这样的东西：

```
function filterPersons() {
    var persons = phpResponse;
    var result = [];
    for (var x = 0; x < persons.length; x++) {
        var personFilters = persons[x].filters;
        for (var filter in personFilters) {
            if (personFilters.hasOwnProperty(filter) && filterArray.indexOf(personFilters[filter]) >= 0) // Check if value is in filterArray
                result.push(persons[x]); // Add person to a result array
        }

        displayResult(result); // Display the result somewhere

    } 
```

当您单击复选框时，这也将使其“即时”工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T02:40:22.880

看看 ExtJS。它具有对象“存储”，它能够存储结构化数据并允许对其进行操作，例如排序、过滤、查询。例如，您的任务可以这样解决：

```
Ext.application({
name: 'HelloExt',
launch: function() {
    Ext.create('Ext.data.Store', {
        storeId:'UsersStore',
        model: 'User',
        fields: [ 'id', 'name', 'title', 'filter1', 'filter2', 'filter3' ],
        data: [
            { name: 'Ed',    title: 'CEO', filter1: true, filter2: false, filter3: true },
            { name: 'Tommy', title: 'CTO', filter1: false, filter2: false, filter3: false },
            { name: 'Aaron', title: 'COO', filter1: true, filter2: true, filter3: true },
            { name: 'Jamie', title: 'CFO', filter1: true, filter2: true, filter3: false }
        ]
    });

    function filterStore() {
        var store = Ext.data.StoreManager.lookup('UsersStore');
        store.clearFilter();
        store.filter([
            { property: 'filter1', value: Ext.getCmp('Filter1CB').getValue() },
            { property: 'filter2', value: Ext.getCmp('Filter2CB').getValue() },
            { property: 'filter3', value: Ext.getCmp('Filter3CB').getValue() }
        ]);
    }

    Ext.create('Ext.container.Viewport', {
        layout: 'vbox',
        layoutConfig: {
            vbox: {
                align: 'stretch'
            }
        },
        items: [
            {
                xtype: 'panel',
                border: false,
                padding: 10,
                items: {
                    flex: 1,
                    xtype: 'fieldcontainer',
                    items: [
                        { fieldLabel: 'Filter1', xtype: 'checkbox', id: 'Filter1CB', handler: filterStore },
                        { fieldLabel: 'Filter2', xtype: 'checkbox', id: 'Filter2CB', handler: filterStore },
                        { fieldLabel: 'Filter3', xtype: 'checkbox', id: 'Filter3CB', handler: filterStore }
                    ]
                }
            },
            {
                flex: 1,
                xtype: 'gridpanel',
                title: 'Users',
                store: Ext.data.StoreManager.lookup('UsersStore'),
                columns: [
                    { header: 'Name',  dataIndex: 'name' },
                    { header: 'Title', dataIndex: 'title' }
                ]
            }
        ]
    });
} 
```

});

小提琴：http: [//jsfiddle.net/Q55ym/1/](http://jsfiddle.net/Q55ym/1/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-28T20:45:36.730

您的意思是遍历 JSON 以仅查找带有过滤器的条目？首先，将 JSON 中的过滤器更改为`'filters':'1'`or`'filters':'12'`或`'filters':'13'`or 其他。只需将过滤器放入 1 个字符串中。

然后使用这个：

```
function filter(){
  var loadedJSON;  // load the json from php here,
                   //sort 'filter' by number from smallest to largest
                   //(so '312' becomes '123')

  for(var i in loadedJSON){
    String check="";

    if($("checkbox[name='filter[]'][value='1']").is(":checked"))check="1";
    if($("checkbox[name='filter[]'][value='2']").is(":checked"))check+="2";
    if($("checkbox[name='filter[]'][value='3']").is(":checked"))check+="3";

    if(i.filters.indexOf(check)>-1) // passed filters
  }
} 
```

我使用 jquery 来确定复选框是否被选中，但你也可以这样做`document.getElementsByName('filter[]')[0].checked`

# asp.net-mvc-3 - 从其他项目加载非嵌入式视图

> ID：12167045
> 
> 赞同：0
> 
> 时间：2012-08-28T20:27:40.807
> 
> 标签：asp.net-mvc-3, views, virtualpathprovider, griffin.mvccontrib

我正在开发一个应该支持模块的 mvc3 项目。例如，我有一个 MVC3 核心项目和一个 MVC3 模块项目（MyModule）。

现在我希望在核心项目中加载并显示来自 MVC3 模块项目的视图。我编写了一个自定义 VirtualPathProvider 类和一个 VirtualFile 类，它从核心项目以外的其他位置获取视图。

不知何故，我收到以下错误：`CS0103: The name 'ViewBag' does not exist in the current context.`

我正在做的是使用核心项目中 AssemblyInfo 类中的以下代码行从我的核心项目中的模块项目加载程序集：

```
[assembly: PreApplicationStartMethod(typeof(ModuleLoader), "Init")] 
```

ModuleLoader 类获取 DLL 并用于`BuildManager.AddReferencedAssembly`添加程序集。

现在我可以通过导航到 MyModuleController.cs 来调用操作方法`http://localhost/MyModule`。在 MyModuleController.cs 的 Index ActionResult 方法中，我返回如下视图：

```
return View("~/Modules/MyModule/Index.cshtml"); 
```

VirtualPathProvider 检查路径是否以 ~/Modules/ 开头，并从模块项目中获取视图（MyModule -> Views -> Index.cshtml）。

现在我搜索了错误并阅读了有关缺少 Web.config 文件的信息，但我在模块项目中拥有所有内容，因为它是一个完整的 MVC3 Web 项目。

我读了很多关于从程序集中加载**嵌入式**视图的内容，但我上面描述的内容是否可能？

提前致谢！

**编辑：**

决定采用 Griffin-MvcContrib 的方式并使用它的插件系统，它似乎提供了我需要的一切，最重要的是它使用了 Autofac，我已经决定将其用于 IOC！

[Griffin.MvcContrib - 插件系统](http://blog.gauffin.org/2012/05/griffin-mvccontrib-the-plugin-system/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:04:08.380

使用自定义`VirtualPathProvider`并添加对 的引用`BuildManager`只是解决方案的一部分。您还需要修改视图并为 DLL 中的每个视图指定要使用的布局。

接下来，您还必须使用`@inherits`而不是`@model`视图。

或者您可以简单地使用 Griffin.MvcContrib 为您处理一切：http: [//blog.gauffin.org/2012/05/griffin-mvccontrib-the-plugin-system/](http://blog.gauffin.org/2012/05/griffin-mvccontrib-the-plugin-system/)

# php - file_get_contents() 不起作用，因为 url 包含 & 和 %20

> ID：12167047
> 
> 赞同：1
> 
> 时间：2012-08-28T20:27:45.497
> 
> 标签：php

我使用 file_get_contents() 来读取远程文件。它适用于普通字符的 url，但是，客户端有一些文件，就像

```
http://www.site.org/?m=sp_view_doc&file=publicpolicy/shared%20documents/therapeutic%20discovery%20project%20credit%20general%20guide.pdf 
```

它在源代码中显示了这一点

```
http://www.site.org/?m=sp_view_doc&amp;file=publicpolicy/shared%20documents/therapeutic%20discovery%20project%20credit%20general%20guide.pdf 
```

我尝试了 urldecode()，但没有成功。我怎样才能避免这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T20:30:40.393

只是一个简单的`str_replace("&amp;","&",$url)`就可以了。

`%20`在 URL 中完全可以，因为它只代表一个空格，所以你不必担心它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:28:59.333

你试过`html_entity_decode(urldecode($string))`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T20:32:26.883

使用[rawurldecode](http://us3.php.net/manual/en/function.rawurldecode.php)它会将 %20s 变成空格，而不是像 urldecode 这样的加号。

# ruby-on-rails-3 - 将自定义列添加到 delay_jobs 表

> ID：12167049
> 
> 赞同：3
> 
> 时间：2012-08-28T20:27:59.103
> 
> 标签：ruby-on-rails-3, delayed-job

有人可以告诉我如何扩展delayed_jobs gem 以允许我添加几个自定义列吗？

我添加了几列，但是当我尝试“干净地”使用它们时，我得到：

无法批量分配受保护的属性：owner_type、owner_id

所以我需要将列添加到 cattr_accessor：

```
module Delayed
  class Worker
    DEFAULT_SLEEP_DELAY      = 5
    DEFAULT_MAX_ATTEMPTS     = 25
    DEFAULT_MAX_RUN_TIME     = 4.hours
    DEFAULT_DEFAULT_PRIORITY = 0
    DEFAULT_DELAY_JOBS       = true
    DEFAULT_QUEUES           = []
    DEFAULT_READ_AHEAD       = 5

    cattr_accessor :min_priority, :max_priority, :max_attempts, :max_run_time,
      :default_priority, :sleep_delay, :logger, :delay_jobs, :queues,
      :read_ahead, :plugins, :destroy_failed_jobs, **:owner_id, :owner_type** 
```

但是，不确定扩展它的最佳方法。我的猜测/尝试是创建一个文件并将其添加到初始化程序目录中。但是，由于某种原因，它不起作用。

任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:46:49.600

你真的需要扩展delayed_jobs 表吗？我的方法是不理会它并使用以下两种技术之一：

*   为正在排队的对象添加 owner_id 和 owner_type 字段。
*   创建一个与 delay_jobs 有 :belongs_to 关系的单独表。然后，您使用 DJ 的钩子在工作的整个生命周期中使两者保持同步。

第一种方法更简单，但并不适合所有情况。这些中的任何一个都对你有用吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-31T15:48:43.963

其他答案可能有用，但他们没有回答问题。要将自定义列添加到`delayed_jobs`表中，您可以按照[以下步骤](http://sunilkumarn.wordpress.com/2013/05/19/delayed-jobs-in-rails-adding-custom-attributes/)操作。我这样做并成功地创建了`Delayed::Job`与其他对象之间的关联。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T23:35:08.207

另一种选择是在初始化程序中简单地添加以下行（例如 config/initializers/delayed_job.rb）：

```
Delayed::Job.attr_accessible :owner_type, :owner_id 
```

# xcode - xCode 4.2 仅显示 iPhone 5.0 和 iPad 5.0 的模拟器

> ID：12167050
> 
> 赞同：0
> 
> 时间：2012-08-28T20:28:05.703
> 
> 标签：xcode, ios-simulator

如图所示，我的 Xcode 4.2 仅显示 iPhone 5.0 模拟器和 iPad 5.0 模拟器。我已经在 Preference/Download 中下载了所有版本的 os iOS，并在 iOS Deployment Target 中设置为 3.0。为什么它不像以前版本的 Xcode 那样显示从 3.0 到 5.1 的所有 iOS 模拟器？

![](../Images/fc78c6c591a95dd34f0d7cb509f4e900.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:39:16.720

已放弃对这些模拟器的支持。目前 Xcode 支持的唯一模拟器是 iOS 5+ SDK。

# mercurial - 合并不相关的存储库后推送分支

> ID：12167053
> 
> 赞同：0
> 
> 时间：2012-08-28T20:28:15.970
> 
> 标签：mercurial, push, branching-and-merging

我将两个存储库与 mqextension 合并在一起，给了我一个如下所示的存储库：

```
.. [a] --- [b] --- [c] --- [d]<- default branch
                  / 
       [x] --- [y] <- feature branch 
```

问题是，当我尝试推动这个时，我得到：

```
hg push --new-branch
abort: push creates new remote head x!
(did you forget to merge? use push -f to force) 
```

我怎样才能解决这个问题？我假设我需要将 [a] 与 [x] 合并，以便我有一个共同的祖先。这可能吗？如果我只是强行推动，我会引起问题吗？

**编辑**- 经过更多研究后，我发现我试图简化存储库有点太多了。存储库看起来像这样：

```
.. [a] --- [b] --- [c] --- [d]<- default branch
      \                   
       [f] --- [g] --- [z] <- integration branch
                      / 
           [x] --- [y] <- feature branch
          /
       [w] <- default branch from old repository. 
```

我认为正在发生的事情是我有两个用于默认分支的头，而 hg 不想将它们都推到 master 上。

我应该将两个默认值合并在一起吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:27:49.627

没有理由合并两个不相关的存储库会导致此问题。我刚刚尝试过，它完全没有问题。

如果时间在您的图表中从左到右流动，那么您只有一个 head `[d]`。在合并两个存储库后，该图看起来与我预期的一样。

该错误消息看起来像是其他人已将更改推送到中央存储库，因此您需要将他们`hg pull`的`hg merge`更改合并到您的分支中。

**编辑**- 在您的编辑添加更多信息之后，您似乎确实在默认分支上有两个头，是的，您应该将它们与`hg merge`.

# c# - ASP 电子邮件表单不会发送

> ID：12167054
> 
> 赞同：1
> 
> 时间：2012-08-28T20:28:26.873
> 
> 标签：c#, asp.net, webforms, smtp, gmail

我的表单已启动并运行，没有任何错误。但是，当我按发送时，浏览器说等待本地主机然后停止并且不发送任何电子邮件。所有的 smtp 设置似乎都是正确的。这是我的代码，但是我已经取出了我的电子邮件和密码详细信息。

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master"        Inherits="System.Web.Mvc.ViewPage<dynamic>" %>
 <%@Import Namespace="System.Web.Mail" %>
 <%@Import Namespace="System.Net" %>
<script language="c#" runat="server">

 protected void SendMail()
    {
        // Gmail Address from where you send the mail
        var fromAddress = "[removed]";
        // any address where the email will be sending
        var toAddress = YourEmail.Text.ToString();
        //Password of your gmail address
        const string fromPassword = "[removed]";
        // Passing the values and make a email formate to display
        string subject = YourSubject.Text.ToString();
        string body = "From: " + YourName.Text + "\n";
        body += "Email: " + YourEmail.Text + "\n";
        body += "Subject: " + YourSubject.Text + "\n";
        body += "Question: \n" + Comments.Text + "\n";
        // smtp settings

        var smtp = new System.Net.Mail.SmtpClient();
        {
            smtp.Host = "smtp.gmail.com";
            smtp.Port = 587;
            smtp.EnableSsl = true;
            smtp.DeliveryMethod = System.Net.Mail.SmtpDeliveryMethod.Network;
            smtp.Credentials = new NetworkCredential(fromAddress, fromPassword);
            smtp.Timeout = 20000;
        }
        // Passing values to smtp object
        smtp.Send(fromAddress, toAddress, subject, body);
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        try
        {
            //here on button click what will done 
            SendMail();
            DisplayMessage.Text = "Your Comments after sending the mail";
            DisplayMessage.Visible = true;
            YourSubject.Text = "";
            YourEmail.Text = "";
            YourName.Text = "";
            Comments.Text = "";
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());

        }
    }

</script>
<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
Tickets
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<asp:Panel ID="Panel1" runat="server" DefaultButton="btnSubmit">
<p>
    Please Fill the Following to Send Mail.</p>
<p>
    Your name:
    <asp:RequiredFieldValidator ID="RequiredFieldValidator11" runat="server" ErrorMessage="*"
        ControlToValidate="YourName" ValidationGroup="save" /><br />
    <asp:TextBox ID="YourName" runat="server" Width="250px" /><br />
    Your email address:
    <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ErrorMessage="*"
        ControlToValidate="YourEmail" ValidationGroup="save" /><br />
    <asp:TextBox ID="YourEmail" runat="server" Width="250px" />
    <asp:RegularExpressionValidator runat="server" ID="RegularExpressionValidator23"
        SetFocusOnError="true" Text="Example: username@gmail.com" ControlToValidate="YourEmail"
        ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*" Display="Dynamic"
        ValidationGroup="save" /><br />
    Subject:
    <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" ErrorMessage="*"
        ControlToValidate="YourSubject" ValidationGroup="save" /><br />
    <asp:TextBox ID="YourSubject" runat="server" Width="400px" /><br />
    Your Question:
    <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" ErrorMessage="*"
        ControlToValidate="Comments" ValidationGroup="save" /><br />
    <asp:TextBox ID="Comments" runat="server" 
            TextMode="MultiLine" Rows="10" Width="400px" />
</p>
<p>
    <asp:Button ID="btnSubmit" runat="server" Text="Send" 
                OnClick="Button1_Click" ValidationGroup="save" />
</p>
</asp:Panel>
<p>
<asp:Label ID="DisplayMessage" runat="server" Visible="false" />
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:51:35.277

尝试以下操作：

1.  `ValidationGroup="save"`从您的`asp:Button`标签中删除
2.  替换`Console.WriteLine(ex.ToString());`为

    DisplayMessage.Text = ex.ToString();

    DisplayMessage.Visible = true;

让我知道发生什么事。

# c# - 在 NetSuite 中解析搜索结果中的多连接记录的最有效方法

> ID：12167056
> 
> 赞同：0
> 
> 时间：2012-08-28T20:28:30.050
> 
> 标签：c#, netsuite

我必须从保存的搜索中提取数据并将每一列放入 csv 文件中。此搜索通常超过 300 行，我需要将每条记录解析为单独的 csv 文件（因此需要创建 300 多个 csv 文件）

在之前的所有搜索中，我已经完成了这项工作，所需的列数量很少（少于 10 个），并且连接的数量很少甚至没有，因此效率并不是一个大问题。

我现在有一个项目，在已保存的搜索中包含 42 个字段。搜索建立在销售订单之上，包括对客户记录和项目记录的连接。

搜索广泛使用自定义字段和公式。

**什么是我逐步完成所有这些的最有效方法？**

我在想最简单的方法（也许是最快的）是将它包装在

```
foreach (TransactionSearchRow row in searchResult.searchRowList)
{
     using (var sw = System.IO.File.CreateText(path+filename))
     {
      ....
     }
 } 
```

阻止，但我想尽量避免

```
 if (customFieldRef is SelectCustomFieldRef)
 {
     SelectCustomFieldRef selectCustomFieldRef = (SelectCustomFieldRef)customFieldRef;
     if (selectCustomFieldRef.internalId.Equals("custom_field_name"))
     {
       ....
     }
  } 
```

因为我希望这段代码在这个过程中变得过长。因此，任何想法都会受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:43:12.453

使用 NetSuite WSDL 生成的 API，在读取自定义字段时，除了嵌套类型/名称测试之外别无他法。它很糟糕，你必须忍受它。

您可以下拉到手动 SOAP 并自己解析 XML 响应。这对我来说听起来像是折磨，但是通过一些辅助函数，您可以使读取自定义字段的过程更加合乎逻辑。

另一种选择是完全放弃 SuiteTalk 并在 SuiteScript RESTlet 中进行搜索。JavaScript API 比 SOAP API 更简单、更直接地访问自定义字段。在将数据（可以是 JSON、XML、纯文本，甚至是最终的 CSV）返回到调用应用程序之前，您可以在服务器端进行任何数量的预处理。

# excel - Powerbuilder - 保存为 Excel 格式时保留列名

> ID：12167057
> 
> 赞同：0
> 
> 时间：2012-08-28T20:28:40.703
> 
> 标签：excel, save, export-to-excel, powerbuilder

我是 PowerBuilder 的新手，我想知道在使用 DataWindow 的 SaveAs() 方法时是否可以保持列名的“可见”值。目前，我的报告显示诸如“Numéro PB”或“Poste 1-3”之类的列，但是当我保存时，它会显示数据库的名称。即：“no_pb”和“pos_1_3”...

当我正在开发一个已部署的应用程序时，我必须使我的更改和实现尽可能地对用户友好，而他们不会理解其中的任何内容。

我已经使用 dw2xls api 来保存报告的精确副本，但他们希望有一个仅保存原始数据的选项，我认为我无法使用他们的 API 来实现它。

另外，我被要求不要使用 Excel OLE 对象来执行此操作...

有人有想法吗？

谢谢，迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:16:06.013

`dw.saveas(<string with filename and path>,CSV!,TRUE)`将数据窗口数据保存为逗号分隔值文本文件，第一行具有列标题（dw 画家中的数据库名称）。

要在保存中设置列标题，您可以首先访问数据

```
any la_dwdata[]              // declare array   
la_dwdata = dw_1.Object.Data // get all data for all rows in dw_1 in the Primary! buffer 
```

从这里您将创建一个输出文件，该文件最初包含一系列字符串以及所需的列名，然后将数组中的数据转换为字符串（循环遍历数组）。如果您在值之间插入逗号并使用“CSV”扩展名命名文件，它将加载到 Excel 中。由于这种方法还将包括任何不可见的数据，如果用户不想看到它，您可能必须使用其他逻辑来排除它们。

因此，现在您有了一个字符串，该字符串由由制表符分隔的数据行以及每行末尾的 crlf 组成。您使用用户友好的列名创建您的“标题字符串”，格式为“blah,blah,blah~r~n”（这是三个用逗号分隔的“blah”字符串，末尾有一个 crlf）。

现在您解析从 dw_1.Object.Data 获得的字符串以找到第一行，将其剥离，然后将其替换为您创建的标题字符串。您可以使用 replace 方法将剩余的选项卡替换为逗号。现在您将字符串保存到扩展名为 .CSV 的文件中，然后可以将其加载到 Excel 中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:59:04.157

这假设您的显示列与您的原始列匹配。创建一个数据存储`ds_head`。将您的报表 DW 设置为 DataObject（无数据）。我正在使用您要保存的报告调用 DataWindow `dw_report`。完成后，您需要删除这两个临时文件。您可能需要指定`EncodingUTF8!`其他编码而不是 ANSI，具体取决于 DataWindow 中的数据。注意：Excel 将打开此 CSV，但其他一些程序可能不喜欢它，因为标题行有一个尾随逗号。

``

```
ds_head.saveAsFormattedText("file1.csv", EncodingANSI!, ",")
dw_report.saveAs("file2.csv", CSV!, FALSE, EncodingANSI!)
run("copy file1.csv file2.csv output.csv") 
```

# c - 此文本文件上的 fscanf() 错误？

> ID：12167058
> 
> 赞同：0
> 
> 时间：2012-08-28T20:28:49.553
> 
> 标签：c, file, text, stream, stdin

测试.txt：

```
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
ccccccccccccccccccccccccccccccccccc
The color of the car is blue 
```

代码：

```
FILE *fp;
char var[30];
int result

if( (fp = fopen( "test.txt", "r")) == NULL)  //open for read
    printf("ERROR");

result = fscanf( fp, "The color of the car is %s", &var); 
```

执行后：

> 打开文件（不为 NULL 并且在测试时能够执行追加）
> 结果 = 0 //zero- 在匹配失败的情况下......？
> 错误号 = 0;
> var 是垃圾。

我期待 fscanf() 匹配“蓝色”。

我应该如何正确地将蓝色变为 var？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T20:32:32.027

如何`fgets`改用：

```
char *search = "The color of the..";
char *p;
while (fgets(var, SIZE, stdin)) {
    /* Does it have what we want ? */
    if ((p = strstr(var, search)))
        break;
}

if (p)
    p += strlen(str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:48:56.317

这里还有另一个错误，如果 test.txt 不存在，您的代码将继续使用 fscanf ，使您的检查无用。这几乎肯定会导致程序崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T20:50:28.737

使用正则表达式

```
char p[100];
char q[100];
char r[100];
fscanf(fp, "%[^\n]\n%[^\n]\n%[^\n]\nThe color of the car is %s",p,q,r, &var); 
```

根据您的要求进行修改。我知道这不是你的实际字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T20:31:37.807

Fscanf 不是这样工作的。它不会环顾四周，也不会扫描字符串以查找要匹配的内容。您必须提供与格式说明符*完全匹配的字符串。*所以你可以做类似的事情

```
result = fscanf(fp, "aaaaaaaaaaaaa\nbbbbbbbbbbb\ncccccccccc\nThe color of the car is %s", &var); 
```

达到你想要的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-28T20:42:38.203

你有一个错误`fscanf`，当你应该传递一个指向 char 的指针时，你将指针传递给一个 char 数组。碰巧数组的地址等于数组的第一个元素的地址，所以它是偶然的。但是，传入了错误的类型。

此外，您想找到为您提供匹配的行，并且您似乎想存储`"blue"`到`var`. 为此，您应该测试一行输入是否与您的扫描模式匹配。您可以使用`fgets`读取一行，并使用`sscanf`扫描该行。

```
while (fgets(buf, sizeof(buf), fp) != 0) {
    result = sscanf(buf, "The color of the car is %s", var);
    if (result == 1) break;
} 
```

`sscanf`将返回它成功扫描的指令数。在这种情况下，只有一个`%s`指令。

这样做可以防止扫描错误“干扰”您的输入解析。也就是说，如果`fscanf`返回错误，它将无法越过导致错误的输入，直到您调用`clearerr()`.

# clojure - 在箭头运算符内切换

> ID：12167060
> 
> 赞同：2
> 
> 时间：2012-08-28T20:29:04.577
> 
> 标签：clojure

我正在学习clojure。我的问题是可以在 (-> ) 中使用 (case)。例如，我想要这样的东西（这段代码不起作用）：

```
 (defn eval-xpath [document xpath return-type]
       (-> (XPathFactory/newInstance)
         .newXPath
         (.compile xpath)
         (case return-type
           :node-list (.evaluate document XPathConstants/NODESET)
           :node (.evaluate document XPathConstants/NODE)
           :number (.evaluate document XPathConstants/NUMBER)
         )
      )) 
```

还是改用多方法会更好？什么是正确的'clojure方式？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T21:02:42.500

箭头宏 (->) 只是重写了它的参数，以便将第 n 种形式的值作为第 n+1 种形式的第一个参数插入。您正在编写的内容相当于：

```
(case 
  (.compile 
    (.newXPath (XPathFactory/newInstance)) 
    xpath) 
  return-type 
  :node-list (.evaluate document XPathConstants/NODESET) 
  :node (.evaluate document XPathConstants/NODE) 
  :number (.evaluate document XPathConstants/NUMBER) 
```

在一般情况下，您可以使用 提前选择三种形式中的一种作为您的尾部形式`let`，然后在线程宏的末尾将其穿入。像这样：

```
(defn eval-xpath [document xpath return-type]
  (let [evaluator (case return-type
                    :node-list #(.evaluate % document XPathConstants/NODESET)
                    :node #(.evaluate % document XPathConstants/NODE)
                    :number #(.evaluate % document XPathConstants/NUMBER))]
    (-> (XPathFactory/newInstance)
        .newXPath
        (.compile xpath)
        (evaluator)))) 
```

但是，您真正想做的是将关键字映射到 XPathConstants 上的常量。这可以通过地图来完成。考虑以下：

```
(defn eval-xpath [document xpath return-type]
  (let [constants-mapping {:node-list XPathConstants/NODESET
                           :node XPathConstants/NODE
                           :number XPathConstants/NUMBER}]
    (-> (XPathFactory/newInstance)
        .newXPath
        (.compile xpath)
        (.evaluate document (constants-mapping return-type))))) 
```

你有一个关键字到常量的映射，所以使用 Clojure 的数据结构来表达它。此外，线程宏的真正价值在于帮助您编译 xpath。不要害怕提供您正在使用本地范围名称的数据，以帮助您跟踪您正在做的事情。它还可以帮助您避免尝试将真正不想适应的东西塞入线程宏中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:48:36.853

查看以下 clojure 库以使用 xpath 表达式：[https ://github.com/kyleburton/clj-xpath](https://github.com/kyleburton/clj-xpath)

# ios - 无论如何，图标尺寸都不符合尺寸要求

> ID：12167065
> 
> 赞同：5
> 
> 时间：2012-08-28T20:29:14.270
> 
> 标签：ios, iphone, xcode, ipad

我正在尝试将我的应用程序投放市场，并且每次尝试时都会出现此错误：

```
Ipad: icon.png: dimensions (57 x 57) don't meet the size requirements.   The icon file must be 72x72 pixels in .png format. 
```

我已经看到关于修改 .plist 以及编辑项目设置 -> 构建 -> 取消选中压缩 PNG 文件（[通用应用程序中的 Icon.png 文件错误](https://stackoverflow.com/questions/5401184/icon-png-file-error-in-universal-app)）的无休止的帖子。这两个我都做过。我还阅读了通用应用程序图标的苹果指南并遵循了该指南。但是，我注意到我拥有的 .plist 文件和他们拥有的文件有所不同（[http://developer.apple.com/library/ios/#qa/qa1686/_index.html](http://developer.apple.com/library/ios/#qa/qa1686/_index.html)）。（我的有一个 Primary Icon 属性）我有什么遗漏或者苹果文档是我们的日期吗？ ![在此处输入图像描述](../Images/be5032934586da70c5d3fb206388fde4.png)

当我将图标更改为 72x72 时，我得到了同样的错误，只是它说图标文件必须是 57x57。当它应该使用 icon-72.png 用于 ipad 和 icon.png 用于 iphone 时，它​​似乎正在尝试将 icon.png 用于 iphone 和 ipad 图标。这是在其他地方定义的吗？

![在此处输入图像描述](../Images/96b7d30f120d51c2cceff6a830aa240f.png) ![在此处输入图像描述](../Images/734c4a24e9eff31228bba312d53130da.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-28T21:11:39.740

首先，我不确定这是否是一个规则，或者这只是一种常见的做法，但你的图标应该以大写的“I”开头。其次，您的 iPad 图标应该是 72x72 而不是 iPhone 图标那样的 57x57。最后，您缺少 iPad 视网膜图标“Icon-72@2x.png”144x144px。

完全分解图标。

1.  Icon.png = 57x57 iPhone 非视网膜
2.  Icon@2x.png = 114x114 iPhone视网膜
3.  Icon-72.png = 72x72 iPad 非视网膜
4.  Icon-72@2x.png = 144x144 iPad 视网膜

如果您确保您的图标与我列出的完全一样，那么您将不会有任何问题。

如果您在进行这些更改后仍然遇到问题，请尝试从项目中删除所有图标图像，并从 .plist 文件中删除图标键。然后通过将图像直接拖动到 Xcode 导航器的摘要选项卡中的相应占位符来将图像重新添加到项目中。

![在此处输入图像描述](../Images/9c290f52c4bc7da72a9fc258dbcd71bc.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-28T21:22:04.063

好吧，我同意@NSPostWhenIdle，但就命名约定而言，他是正确的，如果您直接添加到 plist，

但是当它涉及 Xcode 时，从 Xcode 4.2 开始，当您打开目标设置 - > 摘要时

我希望你使用的是 4.2 之后的 Xcode

当您将鼠标悬停在 App Icons 部分时，它将显示图标的大小，然后右键单击并添加图标。Xcode 本身会根据您选择的图标的大小来修复图标的名称，如下所示

![对于普通图像](../Images/87208579f88bd52424a0cffe018c172c.png)

![对于视网膜图像](../Images/1328877f6a8d7d8d58bb6ee847105452.png)

因此，无论是否与 iCons 的命名约定作斗争，如果您像这样添加，这些图标名称在我的 Xcode 本身中是固定的，并且这些图标也会自动添加到 plist 文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T14:10:06.747

我通过文件系统从我的项目中删除了图标，并按照 NSPostWhenIdle 和 sree charan 的建议重命名了它们。然后我将它们拖放到应用程序图标部分，并通过文本编辑器删除并读取 .plist 中的条目。然而这仍然不够有效，我认为从文件系统中的项目中删除文件会删除项目中的引用，这不是真的。我建议任何在此之后出现图标问题的人按照我之前所说的去做，并在重新添加之前通过项目而**不是文件系统删除所有图标引用/文件。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T20:49:07.450

您的 icon.png 可能不完全是 57x57。在finder中，右键单击icon.png，获取信息。如果它仍然显示 57x57，那么我不确定它为什么会抛出该错误。

当我的 icon.png 为 57x56 时，我遇到了类似的问题（直到 xcode 抱怨我才检查过）。

如果这些不起作用，请重新启动您的 Xcode 和/或 Mac，进行干净的构建。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-25T22:34:14.047

我只是想补充一下（对于发现这个问题的其他人）我最近遇到了这个错误，但在我的情况下，它抱怨 76x76 不符合 72x72 的要求，这对我来说没有任何意义，因为我们的 iPad 应用程序仅适用于 iOS 7，因此根据所有官方文档，仅需要大小为 76x76 和 152x152 的图标。

> 图标尺寸 (76 x 76) 不符合尺寸要求。图标文件必须为 72x72 像素，采用 .png 格式。

无论如何，事实证明上传二进制文件的人使用的是旧版本的 Application Loader（来自 Xcode 4.6），并且此检查甚至在上传之前就在客户端发生。

使用 Xcode 5 中较新的 Application Loader 提交相同的二进制文件没有问题！

# plugins - 在 SublimeText2 插件中获取文件夹内容

> ID：12167069
> 
> 赞同：0
> 
> 时间：2012-08-28T20:29:34.187
> 
> 标签：plugins, packages, sublimetext2, sublimetext

一开始我想说我是 Python 的初学者，所以这个问题可能真的很愚蠢。我目前正在尝试学习新东西，并正在为 SublimeText2 开发一个插件。

我可以在 SublimeText2 文件夹中的某个目录中获取文件和文件夹的列表`Packages`吗，我基本上想要的是一个简单的列表。如果是，如何做到这一点？

我已经在[API](http://www.sublimetext.com/docs/2/api_reference.html)中搜索了类似的东西，但唯一的东西是操作当前打开的文件夹（侧边栏中的文件夹）的命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:40:52.887

好的，这真的很愚蠢，我不会结束这个问题，因为我认为它可能会帮助其他人从这里开始。我在 SublimeText2 API 中没有找到任何东西的原因是因为这是`os`库中的默认 Python 功能。

```
import sublime, sublime_plugin, os

#...

print(os.listdir(sublime.packages_path())) 
```

方法`sublime.packages_path()`返回包文件夹的路径。

# rss - 我怎样才能让这个 Google RSS 小工具工作？

> ID：12167070
> 
> 赞同：0
> 
> 时间：2012-08-28T20:29:37.530
> 
> 标签：rss, google-gadget

我正在尝试在我正在设计的网页上嵌入 RSS 提要。该提要适用于德克萨斯州奥斯汀的 Craigslist 页面：

[http://austin.craigslist.org/search/fua?query=%22modern+salvage%22&srchType=A&minAsk=&maxAsk=](http://austin.craigslist.org/search/fua?query=%22modern+salvage%22&srchType=A&minAsk=&maxAsk=)

根据我用于提要的 URL，我会得到以下结果之一：

```
**Feed URL**

    http://www.gmodules.com/ig/creator?url=http://austin.craigslist.org/search/fua?query=%22modern%20salvage%22&srchType=A&format=rss

    Error parsing module spec:
    Not a properly formatted file
    missing xml header

**<link> in the XML for the above URL**

    http://www.gmodules.com/ig/creator?url=http://austin.craigslist.org/search/fua?query=&#x26;quot;modern%20salvage&#x26;quot;&#x26;amp;srchType=A

    Information is temporarily unavailable

**I have also tried the URL in the head of the HTML doc:**

    http://austin.craigslist.org/search/fua?query=&quot;modernsalvage&quot;&amp;srchType=A&amp;format=rss" title="RSS feed for craigslist | furniture - all &quot;&quot;modern salvage&quot;&quot; in austin

    Information is temporarily unavailable. 
```

尽管 Craigslist 鼓励用户嵌入 RSS 提要，但我想知道 Craigslist 服务器是否拒绝了该请求。我有设计背景，而不是编程。有什么建议么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T01:33:31.190

我不确定我是否了解您使用的小工具...

无论如何，我能够使用[Google 协作平台页面](https://sites.google.com/site/fuhrmanator/)上的[RSS Reader+ 小工具](http://www.google.ca/ig/directory?dpos=top&root=/ig&url=www.ajaxgaier.com/iGoogle/rss-reader%2B.xml)加载您的页面（不会永远保持不变）。

尝试使其与[http://www.gstatic.com/sites-gadgets/rss-sites/rss_sites.xml](http://www.gstatic.com/sites-gadgets/rss-sites/rss_sites.xml)一起工作没有成功。根据对[http://www.google.ca/ig/directory?type=gadgets&url=www.google.com/ig/modules/reader.xml的评论，我认为该小工具已损坏](http://www.google.ca/ig/directory?type=gadgets&url=www.google.com/ig/modules/reader.xml)

# ios - TabBarController 的界面方向

> ID：12167071
> 
> 赞同：1
> 
> 时间：2012-08-28T20:29:39.900
> 
> 标签：ios, xcode, uiwebview, uiinterfaceorientation

我在我的应用程序中使用标签栏控制器。在应用程序的大部分行为中，我们只有一个方向（interfaceOrientationPortrait）。但我有一个在 WebView 中运行视频的视图。当我运行这个视频时，方向仍然是纵向的。我想把所有的方向。

好吧，我在我的视频类中使用了返回类型 YES。什么也没有变。我在 RootViewController 类中将返回类型更改为 YES。什么也没有变。

我只想更改视频的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:36:50.387

如果任何选项卡栏控制器无法旋转到该方向（至少在选项卡栏可见的情况下），作为选项卡栏控制器一部分的视图控制器将不会旋转到该方向。因此，如果 Web 视图控制器在标签栏控制器上可见，也许您想更新所有控制器的方法，以便让旋转发生。

如果您需要更深入的解释，请询问。祝你好运！

**编辑（示例代码）**

这可能是您的标签栏控制器视图控制器的旋转方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ((self.tabBarController.selectedIndex == kMyWebViewControllerIndex))
    {
        return YES;
    } else
    {
        return (orientation == UIInterfaceOrientationPortrait);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:36:41.093

您的 Web 视图是否位于 tabBarController 内的视图控制器中？

尝试在模态呈现的视图控制器中显示它，它应该可以工作

# c++ - 我可以使用什么工具来分析内存使用情况？

> ID：12167074
> 
> 赞同：4
> 
> 时间：2012-08-28T20:29:50.510
> 
> 标签：c++, windows, memory-leaks, profiling

我有一个使用 Visual Studio 2008 使用 C++ 编写的 Windows 应用程序。我想获取有关内存使用情况的统计信息，以找到处理内存使用情况的瓶颈和位置。理想情况下，我希望有一个工具可以做到这一点，而不必进入并将计数器/分析逻辑添加到代码本身。基本上我正在寻找的是：

*   所有分配的列表（释放与否无关紧要，我想知道每次分配的东西）
*   每个分配的调用堆栈和一个计数器，表示调用代码和分配内存的次数。
*   有关已释放内存与未释放内存的信息（以查找泄漏）。理想情况下，它应该足够智能来确定内存是否仍在使用中，或者它是否真的已经泄漏（通过范围或其他一些智能机制）。

我不在乎它是否是免费工具。以下是我已经看过的一些工具：

*   **Rational PurifyPlus**：老实说，我无法充分利用这个工具。它返回很多误报。此外，它并没有给我上面列表中的前两项，而是似乎只关注内存错误和泄漏。
*   **Sysinternals VMMap**：这个工具很有趣，可以让我看到内存是如何分布的（堆栈、堆和共享堆等）。它还让我看到分配的调用树，但不是很直观或有用。很难从数据中理解。
*   **DevPartner Boundschecker**：我真的认为这是迄今为止最没用的工具。几年前我在他们被 DevPartner 收购之前使用了它，我记得它工作得更好。但它并没有真正给我我需要的统计数据，它似乎也无法正确检测内存泄漏。

我提前感谢任何帮助/建议。我的应用程序是一个服务器，在压力测试期间随着时间的推移会遇到严重的内存增长问题（最终由于虚拟字节超过 32 位应用程序的限制而崩溃）。拥有正确的工具将帮助我隔离我们分配内存的位置以及我们可能泄漏内存的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:08:55.490

您能否修改您的代码以使用 和 的调试`malloc`版本？如果是，请检查和。`realloc``free`[`_malloc_dbg`](http://msdn.microsoft.com/en-us/library/faz3a37z.aspx)[`_realloc_dbg`](http://msdn.microsoft.com/en-us/library/ydfebz1c)[`_free_dbg`](http://msdn.microsoft.com/en-us/library/16swbsbc)

（您可以根据这些函数编写自己的`new`和运算符。）`delete`

```
#ifdef _DEBUG
# define _CRTDBG_MAP_ALLOC 1
# include <Crtdbg.h>
# define malloc(size)       _malloc_dbg(size,_CLIENT_BLOCK,__FILE__,__LINE__)
# define realloc(addr,size) _realloc_dbg(addr,size,_CLIENT_BLOCK,__FILE__,__LINE__)
# define free(addr)         _free_dbg(addr,_CLIENT_BLOCK)
void * operator new ( size_t size, const char * filename, int linenumber )
{
  void * addr = _malloc_dbg( size, _CLIENT_BLOCK, filename, linenumber );
  if ( addr == 0 )
    throw std::bad_alloc;
  return addr;
}
void * operator new ( size_t size, const std::nothrow_t &no_throw, const char * filename, int linenumber )
{
  return _malloc_dbg( size, _CLIENT_BLOCK, filename, linenumber );
}
void * operator new [] ( size_t size, const char * filename, int linenumber )
{
  void * addr = _malloc_dbg( size, _CLIENT_BLOCK, filename, linenumber );
  if ( addr == 0 )
    throw std::bad_alloc;
  return addr;
}
void * operator new [] ( size_t size, const std::nothrow_t &no_throw, const char * filename, int linenumber )
{
  return _malloc_dbg( size, _CLIENT_BLOCK, filename, linenumber );
}
void operator delete( void *p, const char * filename, int linenumber )
{
  _free_dbg(p,_CLIENT_BLOCK);
}
void operator delete [] ( void *p, const char * filename, int linenumber )
{
  _free_dbg(p,_CLIENT_BLOCK);
}
# define DEBUG_NEW_HEAP new( __FILE__, __LINE__ )
# define new DEBUG_NEW_HEAP
#endif 
```

（参考：[上一个主题](https://stackoverflow.com/questions/10625832/in-vs-c-6-0-what-debug-tools-are-good-to-find-where-memory-is-leaking)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T21:55:29.137

在我的工作地点，我们使用[Software Verification 的](http://www.softwareverify.com/) [Memory Validator](http://www.softwareverify.com/memory-leak-detection.php)。它将为您提供各种内存统计信息、分配列表、每个分配的调用堆栈和内存泄漏。它已被证明在我的工作经验中偶尔有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T21:13:37.527

Visual Studio 中的 CRT 内存调试功能大有帮助。您想要的额外内容需要记录每个分配。CRT 为这种事情提供了[_CrtSetAllocHook 。](http://msdn.microsoft.com/en-us/library/820k4tb8%28v=vs.100%29.aspx)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-28T20:33:21.140

你可以试试[Valgrind 。](http://valgrind.org/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-28T20:42:01.850

如果你还没有看到这个，你可能希望看看这里。它似乎是最近更新的。

[Sysinternals 套件，作者 Mark Russinovich](http://technet.microsoft.com/en-us/sysinternals/bb842062.aspx) [http://technet.microsoft.com/en-us/sysinternals/bb842062.aspx](http://technet.microsoft.com/en-us/sysinternals/bb842062.aspx)

# javascript - 使用格式将 jquery 移动组件动态添加到列表视图

> ID：12167075
> 
> 赞同：0
> 
> 时间：2012-08-28T20:29:54.700
> 
> 标签：javascript, jquery, html, jquery-mobile

当我动态插入以下代码时，我可以强制页面刷新，以便它应用 jQuery 移动格式。
由于某种原因，它不允许我设置按钮格式。它真的很奇怪，因为它允许动态插入列表和按钮，但我似乎无法格式化按钮，除了名称。
它可以通过 CSS 进行操作，但我想使用**jQuery API**。

```
$('#cartList').append('<li>'
    + '<h3>' + game.Title+'</h3>'
    + '<p>' + '£' + game.Price + '</p>' 
    + '<a href="#cartList" data-role="button" data-icon="none" data-inline="true" onclick="removeItem()">Remove</a>'
    + '<h3 class="ui-li-aside">' + game.Format + '</h3>'
    + '</li>').trigger("create"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:43:31.293

[jQuery Mobile Doc](http://jquerymobile.com/test/docs/lists/docs-lists.html)提到，如果将新列表项添加到列表中或从中删除，则分隔符不会自动更新，您应该在列表视图上调用 refresh() 来重绘自动分隔符。

尝试添加：`$('#cartList').listview('refresh');`填充列表后。

例子：

```
<!doctype html>
<html lang="en">
    <head>
        <title></title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>   

         <script>
            $(document).ready(function(){
                $("#add-li-button").click(function(){ 
                    $('#listList').append("<li data-role=\"collapsible\"> <h3>New List</h3> <div data-role=\"fieldcontain\"></div> </li>").listview("refresh");
                });
            });
        </script>   
   </head>
   <body>
        <div data-role="page" id="page">
            <ul id="listList" data-role="listview">
            </ul>
            <input type="button" id="add-li-button" value="add a checkbox to list1" />
        </div>    
    </body>
</html> 
```

# php - imagecopyresampled 裁剪 黑条

> ID：12167077
> 
> 赞同：1
> 
> 时间：2012-08-28T20:29:55.970
> 
> 标签：php, image-processing, crop

我正在拍摄源图像并尝试根据用户选择对其进行裁剪。虽然它总是留下一个黑色的空白空间，但我假设它与我以错误顺序使用的参数有关。在查看了 imagecopyresampled() 的 php 文档之后，我仍然没有找到一种方法来完成这项工作。

这就是我所拥有的。我在示例中使用了硬编码值，但每个`$targ_`变量都会针对每个图像进行更改。

```
$targ_w = 183;      // width of cropped selection
$targ_h = 140;      // height of cropped selection
$targ_x = 79;           // x-coordinate of cropped selection
$targ_y = 59;           // y-coordinate of cropped selection
$targ_x2 = 263;         // x-coordinate of 2nd point (end of selection)
$targ_y2 = 199;     // y-coordinate of 2nd point (end of selection)

$src = '/uploads/test.png';
$img_r = imagecreatefrompng($src);
$dst_r = ImageCreateTrueColor( $targ_w, $targ_h );

imagecopyresampled($dst_r,$img_r,0,0,$targ_x,$targ_y,$targ_x2,$targ_y2,$targ_w,$targ_h);

$newFileName = '/uploads/test2.png';
imagepng($dst_r, $newFileName, 9); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T21:52:53.483

也许只是因为您没有正确计算裁剪区域的尺寸。除此之外，您使用坐标，应该使用尺寸。比较参数七和八。请注意，这不会保留透明度。

```
<?php
$targ_x1 = 59;      // x-coordinate of cropped selection
$targ_y1 = 69;      // y-coordinate of cropped selection
$targ_x2 = 160;     // x-coordinate of 2nd point (end of selection)
$targ_y2 = 82;      // y-coordinate of 2nd point (end of selection)

//1st: dynamically calculate the dimensions
$crop_area_width = $targ_x2-$targ_x1;      // width of cropped selection
$crop_area_height = $targ_y2-$targ_y1;      // height of cropped selection

$image_path = 'http://cdn.sstatic.net/stackoverflow/img/sprites.png';
$src_img = imagecreatefrompng($image_path);
$dst_img = imagecreatetruecolor($crop_area_width, $crop_area_height);

//2nd: cropping does not change scale so source and target dimensions are the same
imagecopyresampled( $dst_img, $src_img, 0, 0, $targ_x1, $targ_y1, $crop_area_width, $crop_area_height, $crop_area_width, $crop_area_height);

header('Content-Type: image/png');
imagepng($dst_img);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:36:54.177

见以下网址：-

[在没有 fopen 的 PHP 中使用 imagecopyresampled() 裁剪图像](https://stackoverflow.com/questions/7005501/cropping-an-image-with-imagecopyresampled-in-php-without-fopen)

尝试这个：-

```
<?php

function load_file_from_url($url) {
    $curl = curl_init();
    curl_setopt($curl, CURLOPT_URL, $url);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
    $str = curl_exec($curl);
    curl_close($curl);
    return $str;
}

class cropImage{
 var $imgSrc,$myImage,$thumb;
 function setImage($image) {
       //Your Image
         $this->imgSrc = $image; 

       //create image from the jpeg
         $this->myImage = imagecreatefromstring($this->imgSrc) or die("Error: Cannot find image!");
         $this->thumb = imagecreatetruecolor(200, 112);

        //imagecopyresampled($this->thumb, $this->myImage, 0, 0, 0, 45, 200, 112, 480, 270);
         imagecopy($this->thumb, $this->myImage, 0, 0, 0, 45, 200, 112, 480, 270); 
    }
    function renderImage()
    {                            
         header('Content-type: image/jpeg');
         imagejpeg($this->thumb);
         imagedestroy($this->thumb); 
         //imagejpeg($this->myImage);
         //imagedestroy($this->myImage); 
    }
}  

    $image = new cropImage;
    $image->setImage(load_file_from_url($_GET['src']));
    $image->renderImage();

?> 
```

# ruby-on-rails - 如何将 kaminari 当前页面保存为变量，以便链接使用返回到左侧页面

> ID：12167079
> 
> 赞同：2
> 
> 时间：2012-08-28T20:30:00.563
> 
> 标签：ruby-on-rails, pagination, kaminari

我正在使用 kaminari pagination ruby​​ on rails gem。我要提取的每个条目都有一个编辑链接，该链接将用户带到他们可以编辑的另一个页面。目前，在我的链接中为 href 值设置 :back 后，它总是会转到第一页。

我试图在单击时保存页面的 url 变量，然后将反向链接设置为该变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:02:20.553

您可以使用 javascript 访问浏览器历史记录并执行

```
onclick="window.history.back();" 
```

或者您可以将变量添加到分页视图上的 href 中，例如。

```
<%= link_to "mymodel", model_path(:prevpage => params[:page]) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T01:36:29.173

我将它添加到 cookie 中，例如`cookies[:current_page]`.

并在显示视图（或其他一些操作页面）中，添加一个参数以链接重定向到索引操作页面，例如`articles_path(grid:{page:cookies[:current_page]})`

这不是最好的方法，但可以解决问题。

# jquery - .fadeIn() 作用于什么？| $("#id") 返回什么？

> ID：12167088
> 
> 赞同：1
> 
> 时间：2012-08-28T20:30:38.057
> 
> 标签：jquery

这是[fadeIn() 的 jQuery API](http://api.jquery.com/fadeIn/)。

如果我使用这样的简单 id。

```
$("#id").fadeIn(); 
```

返回什么`$("#id")`，它是一个简单的 DOM 元素吗？

我再次查看了 jQuery API，但他们没有注意到函数原型中的返回类型：

[http://api.jquery.com/jQuery/](http://api.jquery.com/jQuery/)

作为一个附带问题：

如果是简单的 DOM 元素，jQuery 是如何将fadeIn() 与返回的元素关联起来的呢？编译器如何知道找到元素的 fadeIn()？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T20:33:01.373

这是一个 jQuery[选择器，它返回一个包裹在](http://api.jquery.com/category/selectors/)[jQuery 对象](http://api.jquery.com/jQuery/)中的 DOM 元素数组。您可以使用以下方法解开原始 DOM 元素：

```
$("#id")[0] 
```

包装对象的好处在于它将方法委托给包装数组的每个元素，例如，如果您使用：

```
$('div.content').fadeIn(); 
```

它将淡入您文档中找到的所有`<div>`元素。`class="content"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T20:34:25.460

`What does $("#id") return, is it a simple DOM element?`

不，它是一个包裹在 jQuery 对象中的 DOM 元素。

有几种方法可以打开它，例如`$("#id").get(0)`或`$("#id")[0]`。从基准测试来看，`$("#id")[0]`似乎是最快的。

`What does .fadeIn() act on?`

fadeIn 调用这个 jquery 代码：

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

```
function (d, e, f) {
 //.animate( properties [, duration] [, easing] [, complete] )
 return this.animate(b, d, e, f);
} 
```

然后调用动画代码：

```
animate: function( prop, speed, easing, callback ) {
    var optall = jQuery.speed(speed, easing, callback);

    if ( jQuery.isEmptyObject( prop ) ) {
        return this.each( optall.complete );
    }

    return this[ optall.queue === false ? "each" : "queue" ](function() {
        // XXX 'this' does not always have a nodeName when running the
        // test suite

        var opt = jQuery.extend({}, optall), p,
            isElement = this.nodeType === 1,
            hidden = isElement && jQuery(this).is(":hidden"),
            self = this;

        for ( p in prop ) {
            var name = jQuery.camelCase( p );

            if ( p !== name ) {
                prop[ name ] = prop[ p ];
                delete prop[ p ];
                p = name;
            }

            if ( prop[p] === "hide" && hidden || prop[p] === "show" && !hidden ) {
                return opt.complete.call(this);
            }

            if ( isElement && ( p === "height" || p === "width" ) ) {
                // Make sure that nothing sneaks out
                // Record all 3 overflow attributes because IE does not
                // change the overflow attribute when overflowX and
                // overflowY are set to the same value
                opt.overflow = [ this.style.overflow, this.style.overflowX, this.style.overflowY ];

                // Set display property to inline-block for height/width
                // animations on inline elements that are having width/height
                // animated
                if ( jQuery.css( this, "display" ) === "inline" &&
                        jQuery.css( this, "float" ) === "none" ) {
                    if ( !jQuery.support.inlineBlockNeedsLayout ) {
                        this.style.display = "inline-block";

                    } else {
                        var display = defaultDisplay(this.nodeName);

                        // inline-level elements accept inline-block;
                        // block-level elements need to be inline with layout
                        if ( display === "inline" ) {
                            this.style.display = "inline-block";

                        } else {
                            this.style.display = "inline";
                            this.style.zoom = 1;
                        }
                    }
                }
            }

            if ( jQuery.isArray( prop[p] ) ) {
                // Create (if needed) and add to specialEasing
                (opt.specialEasing = opt.specialEasing || {})[p] = prop[p][1];
                prop[p] = prop[p][0];
            }
        }

        if ( opt.overflow != null ) {
            this.style.overflow = "hidden";
        }

        opt.curAnim = jQuery.extend({}, prop);

        jQuery.each( prop, function( name, val ) {
            var e = new jQuery.fx( self, opt, name );

            if ( rfxtypes.test(val) ) {
                e[ val === "toggle" ? hidden ? "show" : "hide" : val ]( prop );

            } else {
                var parts = rfxnum.exec(val),
                    start = e.cur() || 0;

                if ( parts ) {
                    var end = parseFloat( parts[2] ),
                        unit = parts[3] || "px";

                    // We need to compute starting value
                    if ( unit !== "px" ) {
                        jQuery.style( self, name, (end || 1) + unit);
                        start = ((end || 1) / e.cur()) * start;
                        jQuery.style( self, name, start + unit);
                    }

                    // If a +=/-= token was provided, we're doing a relative animation
                    if ( parts[1] ) {
                        end = ((parts[1] === "-=" ? -1 : 1) * end) + start;
                    }

                    e.custom( start, end, unit );

                } else {
                    e.custom( start, val, "" );
                }
            }
        });

        // For JS strict compliance
        return true;
    });
} 
```

# javascript - 隐藏选择的 optgroups 及其内容，除了选中的那个

> ID：12167092
> 
> 赞同：3
> 
> 时间：2012-08-28T20:30:45.297
> 
> 标签：javascript, html, jquery, jquery-events

我想为国家/地区创建一个选择标签，当我们选择国家/地区时，它会隐藏所有 optgroups 及其状态的选择标签的内容，除了 optgroup 及其与所选国家/地区选项具有相同标签的内容，例如

```
<select name="country">
<option value="United States">United States</option>     <!-- if I select US -->
<option value="Canada">Canada</option>
<option value="Mexico">Mexico</option>
</select>

<select name="country">
<optgroup label="United States">
<option value="California">California</option>           <!-- Only these states -->
<option value="New York">New York</option>               <!-- are displayed -->
</optgroup>
<optgroup label="Canada">                                <!-- hidden-->
<option value="Ontario">Ontario</option>                 <!-- hidden-->
<option value="Quebec">Quebec</option>                   <!-- hidden-->
</optgroup>
<optgroup label="Mexico">                                <!-- hidden-->
<option value="Baja California">Baja California</option> <!-- hidden-->
<option value="Mexico Estado">Mexico Estado</option>     <!-- hidden-->
</optgroup>
</select> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T20:41:25.203

这对我来说似乎很好用：

```
​$("select[name='country']:eq(0)"​).on("change", function() {
    $("select[name='country']:eq(1)")
        .find("optgroup,option")
        .hide()
        .filter("[label='" + this.value + "'],[label='" + this.value + "'] > *")
        .show();
});​​​​​​​​ 
```

**演示：http:** [//jsfiddle.net/MVkXg/](http://jsfiddle.net/MVkXg/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:36:27.113

我认为您不能以跨浏览器的方式做到这一点。我想说最好的选择是存储所有选项并使用过滤选项重新创建选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-28T03:16:04.227

从 HTML 5 开始，我们有了这个`hidden`属性。我最近不得不做类似的事情，虽然使用 React，所以我将把确切的管道留给你，但你可以将你的设置`optgroup`为`hidden`la

```
<select name="country">
  <optgroup label="United States">
    <option value="California">California</option>           <!-- Only these states -->
    <option value="New York">New York</option>               <!-- are displayed -->
  </optgroup>
  <optgroup label="Canada" hidden>                                <!-- hidden-->
    <option value="Ontario">Ontario</option>                 <!-- hidden-->
    <option value="Quebec">Quebec</option>                   <!-- hidden-->
  </optgroup>
</select> 
```

# c - 查找最后一个字符出现的最有效方法

> ID：12167093
> 
> 赞同：5
> 
> 时间：2012-08-28T20:30:45.387
> 
> 标签：c, performance, strrchr

考虑一下我写的这个函数，它可以快速找到字符串中给定字符的最后一次出现，并返回它在物理上是字符串的字符数组中的位置：

```
size_t strlstchar(const char *str, const char ch)
{
    char *chptr = strrchr(str, ch);
    return chptr - str;
} 
```

我只是在这里快速输入（尚未编译或尚未编译），只是因为我对一些事情有疑问。

对我来说，这似乎是查找哪个数组元素包含特定字符的最后一个实例的最简单的解决方案，但我不知道它是如何工作的。我只是按照 strrchr 的文档制作的，所以从技术上讲，它是 strrchr 完成所有工作。我只是无法想象这是实现这一目标的最佳方式（就性能而言），并希望有人可以就什么是实现这一目标的最佳方式提供一些意见。

strrchr 是一种有效的方法吗？还是 strrchr 最好留作其他用途？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T20:34:15.540

您使用的方法非常好 - 不幸的是，数组操作很昂贵。大多数实现中的 Strrcr 只是从字符串的末尾开始逐步遍历字符串，直到找到匹配的字符。是`O(n)`时候了。然后执行减法，即`O(1)`。这还不错。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T20:37:34.253

从文档：

> 返回指向 C 字符串 str 中最后出现的字符的指针。

所以它正是你想要的。它存在的目的就是这个。

> strrchr 是一种有效的方法吗？

几乎可以肯定，它写得至少和你自己写的一样好或更好。

> 还是 strrchr 最好留作其他用途？

不，它正是为此目的而写的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T20:38:57.780

如果您可以提供字符串的长度然后向后循环，它会更快。当您找到第一次出现的字符时，立即返回。

如果您不知道长度，请使用 strrchr。

# ruby - 机架“未找到方法”

> ID：12167094
> 
> 赞同：0
> 
> 时间：2012-08-28T20:30:52.143
> 
> 标签：ruby, rack

我似乎看不出这段代码是怎么回事：

```
class Cherry
    class << self
        def call env
            self::Application.call
        end
    end
end

class Cherry
    class Application
        def call env
            #Framework logic
        end
    end
end

run Cherry 
```

那是我的应用程序不起作用的部分。我不知道为什么： `NoMethodError at / undefined method 'call' for Cherry::Application:Class`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T20:49:39.393

你需要调整几件事。

当您在`call`内部定义方法时`Application`，您将其定义为实例方法，然后您尝试将其作为类方法调用，因此让我们将定义修复为类方法定义：

```
class Cherry
    class Application
        def self.call env
            #Framework logic
        end
    end
end 
```

接下来会有一个新错误，关于没有将正确数量的参数传递给`call`方法，因此我们将`env`参数添加到您调用`call`方法的位置。

```
class Cherry
    class << self
        def call env
            self::Application.call env
        end
    end
end 
```

希望有帮助！

# ruby - Ruby“diff-lcs”差异输出的一般格式是什么？

> ID：12167095
> 
> 赞同：5
> 
> 时间：2012-08-28T20:30:57.367
> 
> 标签：ruby, diff, lcs

[Ruby`diff-lcs`库](https://github.com/halostatue/diff-lcs)在生成从一个序列到另一个序列所需的变更集方面做得很好，但是输出的格式让我有些困惑。我希望有一个更改列表，但输出始终是一个包含一个或两个更改列表的列表。拥有多个更改列表的含义/意图是什么？

考虑以下简单示例：

```
> Diff::LCS.diff('abc', 'a-c')
# => [[#<Diff::LCS::Change:0x01 @action="-", @position=1, @element="b">,
#      #<Diff::LCS::Change:0x02 @action="+", @position=1, @element="-">],
#     [#<Diff::LCS::Change:0x03 @action="-", @position=3, @element="">]] 
```

[忽略最后一个更改是空白](https://github.com/halostatue/diff-lcs/issues/2)的事实，为什么有两个更改列表而不是一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T23:07:55.210

如果有一个更好的例子，你可能会有更好的运气。如果你这样做：

```
Diff::LCS.diff('ab cd', 'a- c_') 
```

然后输出看起来像这样（去除了噪音）：

```
[
  [
    <@action="-", @position=1, @element="b">,
    <@action="+", @position=1, @element="-">
  ], [
    <@action="-", @position=4, @element="d">,
    <@action="+", @position=4, @element="_">
  ]
] 
```

如果我们看`Diff::LCS.diff('ab cd ef', 'a- c_ e+')`，那么我们会得到三个内部数组而不是两个。

这可能有什么原因？diff 中有三个操作：

1.  添加一个字符串。
2.  删除字符串。
3.  换一个字符串。

更改实际上只是删除和添加的组合，因此我们只剩下*删除*和*添加*作为基本操作；这些与`@action`价值观非常吻合。但是，当人们查看差异时，我们希望将*更改*视为一个不同的操作，我们希望看到它`b`已经变成`-`，“删除`b`，添加`-`”版本是一个实现细节。

如果我们只有这样：

```
[
  <@action="-", @position=1, @element="b">,
  <@action="+", @position=1, @element="-">,
  <@action="-", @position=4, @element="d">,
  <@action="+", @position=4, @element="_">
] 
```

然后你必须弄清楚哪些`+/-`对是真正的变化，哪些是单独的添加和删除。

因此，内部数组将两个基本操作（*添加*、*删除*）映射到人类希望看到的三个操作（*添加*、*删除*、*更改）。*

您可能还想检查这些输出的结构：

*   `Diff::LCS.diff('ab cd', 'a- x c_')`
*   `Diff::LCS.diff('ab', 'abx')`
*   `Diff::LCS.diff('ab', 'xbx')`

我认为显式*更改* `@action`for`Diff::LCS::Change`会更好，但至少内部数组可以让您将单独的添加和删除分组到更高级别的*编辑*中。

# java - 列出 Android 中所有可用的通知铃声

> ID：12167096
> 
> 赞同：4
> 
> 时间：2012-08-28T20:31:04.697
> 
> 标签：java, android, audio, notifications, android-notifications

我正在尝试更改通知的默认声音，我喜欢这样：

```
 private void showNotification(Context context, String reminderid, String title, String shortinfo, String longinfo) 
     {
         mNM = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
         NOTIFICATION=Integer.parseInt(reminderid);
         Notification notification = new Notification(R.drawable.icon, title,
             System.currentTimeMillis());
         PendingIntent contentIntent = PendingIntent.getActivity(context, 0,
             new Intent(context, RemindersActivity.class).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);
         notification.setLatestEventInfo(context, shortinfo,
                    longinfo, contentIntent);  
         notification.flags |= Notification.FLAG_AUTO_CANCEL;
         notification.sound = Uri.withAppendedPath(Audio.Media.INTERNAL_CONTENT_URI, "6");
         notification.defaults |= Notification.DEFAULT_VIBRATE;

         mNM.notify(NOTIFICATION, notification);
     } 
```

但是你可以注意到我给数字“6”的ID `URI.withAppendedPath()`，我需要为用户列出所有可用的通知铃声并让他选择，我将传递他选择的ID而不是“6” .

谷歌在这里说：

> 在这种情况下，媒体文件的确切 ID（“6”）是已知的并附加到内容 Uri。如果您不知道确切的 ID，则必须使用 ContentResolver 查询 MediaStore 中可用的所有媒体。有关使用 ContentResolver 的更多信息，请参阅 Content Providers 文档。

我该如何做他们所说的（请注意，我从未与内容提供商或解析器合作过）？并让用户选择选择通知铃声，就像在手机设置中选择它一样？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:37:25.613

您可以将声音添加到原始文件夹中，对其进行初始化

```
MediaPlayer mpSplash = MediaPlayer.create(this, R.raw.slow); 
```

并在需要的地方调用它

```
 mpSplash.start(); 
```

# php - ajax注销重定向

> ID：12167102
> 
> 赞同：0
> 
> 时间：2012-08-28T20:31:33.423
> 
> 标签：php, ajax

```
public static function logout(){
        DB::query("DELETE FROM webchat_users WHERE name = '".DB::esc($_SESSION['user']['name'])."'");

        $_SESSION = array();
        unset($_SESSION);

        return array('status' => 1);
        window.location.replace("http://domain.com/index.php");

    } 
```

这是我用来注销聊天窗口的代码，它是使用 AJAX 运行的。我只是想知道是否有一种方法可以在按下按钮时进行重定向。这是在.click 上运行的过程。我目前已经尝试过，`window.location.`但这似乎并没有奏效。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:38:40.620

如果是 Ajax 调用，则无法重定向用户。如果使用`header('Location: ...')`，您将重定向 Ajax 请求，这对用户没有影响。

您可以：

1.  将用户重定向到注销页面，而不是发送 Ajax 请求并用于`header('Location: ...')`将他发送回您的主页
2.  使用 ajax 调用，但`window.location`必须在ajax 调用**之后**在 javascript par 中完成。例如在这种`onSuccess`情况下

# r - R中的垃圾收集com对象

> ID：12167106
> 
> 赞同：3
> 
> 时间：2012-08-28T20:31:53.940
> 
> 标签：r, com, garbage-collection

我希望能够从 R 打开一个 excel 会话，写入它，然后从 R 关闭 excel 会话。虽然我可以在同一个函数中完成这一切，但我正在尝试概括用于清理 excel 的代码。但是，不知何故，当我通过传入 excel 对象从函数调用 gc() 时，它不会进行垃圾收集。下面是代码：

```
opentest<-function() {
    excel<-comCreateObject("Excel.Application")
    comSetProperty(excel,"Visible",T)
    comSetProperty(excel,"DisplayAlerts",FALSE)

    comSetProperty(excel, "SheetsInNewWorkbook", 1)
    wb <- comGetProperty(excel, "Workbooks")
    wb <- comInvoke(wb, "Add")
    excel
}

cleanupexcel<-function(excelobj) {
    comInvoke(excelobj,"Quit")
    rm(excelobj, envir=globalenv()) 
    eapply(env=globalenv(), gc)
} 
```

通过以下对函数的调用：

```
excelobj<-  opentest()
cleanupexcel(excelobj) 
```

当我调用上面的两个函数时，我仍然可以在我的任务管理器中看到正在运行的 excel 会话。但是，如果我在从 cleanupexcel() 返回后调用 gc()，它会成功终止 excel 会话。

关于如何从通用函数中成功 gc 的任何想法，或者我在这里还有其他问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T22:03:51.517

这是对您的代码的一个小改动，应该可以工作（我现在在 Linux 上，所以我无法测试它）。主要解决方法是将 excel 实例包装在一个环境中并返回它。

然后 close 可以访问该实例，然后在调用之前将其删除（确保不保留对它的引用）`gc()`：

```
opentest<-function() {
    excel<-comCreateObject("Excel.Application")
    comSetProperty(excel,"Visible",T)
    comSetProperty(excel,"DisplayAlerts",FALSE)

    comSetProperty(excel, "SheetsInNewWorkbook", 1)
    wb <- comGetProperty(excel, "Workbooks")
    wb <- comInvoke(wb, "Add")

    # wrap excel in an environment
    env <- new.env(parent=emptyenv())
    env$instance <- excel
    env
}

cleanupexcel<-function(excel) {
    comInvoke(excel$instance,"Quit")
    rm("instance", envir=excel)
    gc() 
}

myexcel <- opentest()
cleanupexcel(myexcel) 
```

...请注意，您的旧代码需要将变量命名为“excelobj”，因为您将其从`cleanupexcel`函数中删除。那不是很好。

好的，有非常微妙的问题在起作用，所以这是一个没有 excel 的可重现示例：

```
opentest<-function() {
    excel<-new.env()
    reg.finalizer(excel, function(x) { cat("FINALIZING EXCEL!\n") }, FALSE)

    # wrap excel in an environment
    env <- new.env(parent=emptyenv())
    env$instance <- excel
    env
}

cleanupexcel<-function(excel) {
    cat(excel$instance,"\n")
    rm("instance", envir=excel)
    gc() 
}

myexcel <- opentest()
cleanupexcel(myexcel)
# Prints "FINALIZING EXCEL!" 
```

# oracle - 使用 Oracle JDBC 驱动程序隐式缓存功能

> ID：12167108
> 
> 赞同：4
> 
> 时间：2012-08-28T20:32:04.197
> 
> 标签：oracle, jdbc, oracle11g, driver

我很确定其他人已经问过这个问题，但我仍然找不到满意的答案。所以，这是我的场景：我想使用 Oracle 的 JDBC 驱动程序隐式语句缓存（记录在这里：[http](http://docs.oracle.com/cd/B28359_01/java.111/b31224/stmtcach.htm#i1072607) ://docs.oracle.com/cd/B28359_01/java.111/b31224/stmtcach.htm#i1072607 ）

我需要使用来自第 3 方 JDBC 池提供程序（更具体地说，是 Tomcat JDBC）的连接，但我别无选择。

问题是启用隐式缓存的方法是一个两步过程（根据文档）：

1.

> 在连接上调用 setImplicitCachingEnabled(true) 或调用 OracleDataSource.getConnection 并将 ImplicitCachingEnabled 属性设置为 true。您通过调用 OracleDataSource.setImplicitCachingEnabled(true) 设置 ImplicitCachingEnabled

2.

> 除了调用这些方法之一，您还需要在物理连接上调用 OracleConnection.setStatementCacheSize。您提供的参数是缓存中的最大语句数。参数 0 指定不缓存。

我可以忍受 1 （不知何故，我可以将我的池配置`OracleDataSource`为用作主要连接工厂，并在其上设置`OracleDataSource.setImplicitCachingEnabled(true)`）。但在第二步，我已经需要存在连接才能调用`setStatementCacheSize`.

我的问题是是否有可能在数据源级别指定默认值，`statementCacheSize`以便我可以从`OracleDataSource`已经启用隐式缓存的连接中获取。

PS：我在这里找到了一些相关的问题： [Oracle jdbc driver:implicit statement cache or setPoolable(true)?](https://stackoverflow.com/questions/4499179/oracle-jdbc-driver-implicit-statement-cache-or-setpoolabletrue)

**更新（可能的解决方案）：**

最终我这样做了：

1.  使用 . 创建了本机连接池`oracle.jdbc.pool.OracleDataSource`。
2.  使用本机连接池创建了一个 tomcat JDBC 连接池`org.apache.tomcat.jdbc.pool.DataSource`（请参阅属性`dataSource`）。
3.  通过 AOP 启用一个切入点，以便在执行 'execution(public java.sql.Connection oracle.jdbc.pool.OracleDataSource.getConnection())' 后我拾取对象并执行我想要的设置。

该解决方案效果很好；我只是不高兴我不得不写一些样板来做到这一点（我期待一个直截了当的属性）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-05-06T08:50:50.330

白皮书[Oracle JDBC 内存管理](http://www.oracle.com/technetwork/topics/memory.pdf)说

> 11.2 驱动程序还添加了一个新属性来启用隐式语句缓存。
> 
> `oracle.jdbc.implicitStatementCacheSize`
> 
> 该属性的值是一个整数字符串，例如“100”。它是语句缓存的初始大小。将该属性设置为正值会启用隐式语句缓存。**默认值为“0”。该属性可以通过 -D 设置为系统属性，也可以**通过 getConnection 设置为连接属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:53:28.440

您只能通过`OracleConnection.setStatementCacheSize`方法更改语句缓存大小。

`OracleConnection.setStatementCacheSize`您可以创建一个**JDBC 拦截器**，而不是修改您的应用程序以在每个连接上调用。

```
@Override
public void reset(ConnectionPool pool, PooledConnection connection) {

    if (connection == null) {
        return;
    }

    Connection original = connection.getConnection();

    if (!(original instanceof OracleConnection)) {
        return;
    }

    try {
        if (!((OracleConnection) original).getImplicitCachingEnabled() && implicitCachingEnabled) {

            ((OracleConnection) original).setImplicitCachingEnabled(implicitCachingEnabled);

            log.info("Activated statement cache");

            ((OracleConnection) original).setStatementCacheSize(statementCacheSize);

            log.info("Statement cache size set to " + statementCacheSize);
        }
    } catch (SQLException e) {
        log.error(e.getMessage(), e);
    }
} 
```

# css - 有没有办法在响应式设计中调整 google adsense 的大小？

> ID：12167113
> 
> 赞同：24
> 
> 时间：2012-08-28T20:32:25.570
> 
> 标签：css, wordpress, twitter-bootstrap, responsive-design, adsense

我在我的响应式 wordpress 设计中使用了 google adsense（那是使用 twitter 引导程序）。现在，当网站调整广告大小时，广告会伸出很远，而且看起来很糟糕。

我能做些什么来帮助解决这个问题吗？实际上，我看到一个网站看起来像是有人在较小的屏幕上调整广告大小...我不确定这是怎么可能的，因为它是 java 脚本，对吧？

任何反馈都会非常有帮助。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T04:17:03.550

理想情况下，CSS 媒体查询可以自动缩小广告，并且在理想情况下，广告会根据新尺寸自动更改其布局。但是，Google Ads*不*支持，甚至*不允许*这样做——根据他们[的服务条款](https://www.google.com/adsense/localized-terms)（删除了标有`[...]`) 的文本：

> 5.**禁止使用。**您不得也不得授权或鼓励任何第三方：(i) [...] (ii)编辑、修改、过滤、截断或更改任何广告、链接、广告单元中***包含的信息的顺序，******未经 Google 授权，以任何方式******删除、隐藏或最小化任何广告***、链接、广告单元、搜索结果或推荐按钮；[[...]](https://www.google.com/adsense/localized-terms)

 *另一种解决方案是有条件地通过 JavaScript 提供广告。例如，当页面加载时，[检索浏览器视口的大小，](https://stackoverflow.com/questions/1248081/get-the-browser-viewport-dimensions-with-javascript)如果浏览器的视口宽度小于首选广告的宽度，则提供较小的广告。它应该类似于 CSS 媒体查询，除了在用户调整浏览器大小时*不*提供新广告，因为这会产生错误印象（单个页面上的多个印象，没有刷新），这也违反了他们[的服务条款](https://www.google.com/adsense/localized-terms)：

> 5.**禁止使用。**您不得，也不得授权或鼓励任何第三方：(i)直接或间接产生对任何广告、链接、搜索结果或推荐按钮的***查询、推荐事件或印象或点击（******包括但不限于点击任何视频广告的“播放”***）***通过任何自动***、欺骗、欺诈或其他无效方式，包括但不限于通过重复手动点击、使用机器人或其他自动查询工具和/或计算机生成的搜索请求，和/或未经授权使用其他搜索引擎优化服务和/或软件；[[...]](https://www.google.com/adsense/localized-terms)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-06T21:56:53.747

现有的答案已经过时。Google[于 2013 年 7 月推出了响应式广告](http://adsense.blogspot.com/2013/07/the-responsive-web-adsense.html)：

> 新的响应式广告单元允许您通过使用响应式设计网页来支持各种设备。您现在可以动态指定将要投放的广告的大小，使其适应您的网站在特定设备上呈现页面的方式。

响应式广告适用于固定、流畅和响应式布局。您需要做的就是将“Smart Sizing”版本的代码放在您希望广告出现的位置。广告将水平拉伸以占据所有可用空间，并垂直拉伸以显示最佳标准尺寸的广告。如果您的网站根据设备方向更改其布局，则广告将根据设备方向更改事件自动调整大小。使用 CSS 和 HTML5 数据属性可以进行高级定制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-16T18:35:31.180

Google 现在正式支持响应式广告（目前处于 BETA 阶段）。这里有一个很好的功能描述，带有官方谷歌文档的链接。

[http://exisweb.net/using-google-adsense-async-tags-for-responsive-design](http://exisweb.net/using-google-adsense-async-tags-for-responsive-design)

它有效，但一个缺点是当您调整视口大小时，广告不会自动调整大小。据我了解，在视口调整大小时尝试调用广告服务器是违反 TOS 的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T18:00:23.933

有一个名为**[Responsive Adsense](http://wordpress.org/extend/plugins/responsive-adsense/)**的插件。它添加了一个带有 5 个广告字段的小部件，您可以在其中输入`pub id`和输入`ad id`。然后根据屏幕大小呈现 5 个广告中的 1 个。我在移动浏览器上进行了尝试，它呈现了一个块大小的广告而不是移动广告。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-27T08:04:01.590

为了保持我的页面响应，我这样做了：

```
<div class="table table-responsive">    
        <div class="text-center text-muted">
            <hr><br>
            <small>advertisement</small>
            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
            <!-- bottom -->
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client=""
                 data-ad-slot=""
                 data-ad-format="auto"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>  
            <br>
        </div>       
</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-21T22:54:06.627

我同意 Equilibrium3 发布的内容。选择广告尺寸 = 自适应广告单元（测试版）。获得广告代码后，您可以将其放置在 a`<div class="span12">`中，即 a 中`<div class="row">`。这对我来说可以放置水平广告并使其居中。

这是我有那个横向广告的页面-> [http://www.espaciodigital.mx/](http://www.espaciodigital.mx/)

现在，如果您想将广告代码放在侧边栏上，请执行与上述相同的操作，但使用`<div class="span3">`侧边栏和`<div class="span9">`页面其余部分来拆分页面。

我在下一页中做到了这一点，方形广告在左侧 -> [http://www.espaciodigital.mx/quienes_somos.html](http://www.espaciodigital.mx/quienes_somos.html)

在移动设备上看到这两个广告都可以正常工作。试试看。希望有帮助！*

# c# - 渲染嵌套评论

> ID：12167117
> 
> 赞同：3
> 
> 时间：2012-08-28T20:32:43.043
> 
> 标签：c#, asp.net, tree, rendering, nested-sets

我通常在一个简单的转发器中呈现评论。

我有一个需要嵌套评论的社交应用程序（能够评论评论）。

所以我有看起来像这样的对象：

```
class Comment
{
    public string Body { get; set; }
    public User Creator { get; set; }
    public List<Comment> ChildComments { get; set; }
} 
```

我可以使用嵌套中继器吗？这甚至是个好主意吗？我是否需要在递归循环中预渲染 HTML 并将其发送到文字？

不知道该怎么处理这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:52:39.777

听起来您需要在这里使用 UserControls。为知道如何呈现自己的评论创建一个用户控件，并且有 0...N 个其他 CommentUserControls（可能使用转发器呈现）。这实际上以嵌套的中继器（有点）结束，但是通过将其中一个中继器封装在 UserControl 中，它应该使它不那么混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:56:51.350

您可以使用 HTML 源代码块，然后遍历注释，为每个注释添加一个 <DIV> 开始，然后在每个注释之后，为该注释调用嵌套列表上的迭代器，然后添加结束 </DIV>

# java - Granule - JavaScript/CSS 缩小 SIMPLE/ADVANCED 优化不起作用

> ID：12167118
> 
> 赞同：1
> 
> 时间：2012-08-28T20:32:42.947
> 
> 标签：java, javascript, jsp, minify, google-closure-compiler

我按照本页底部的安装步骤为我的 Web 应用程序设置了[Granule 优化解决方案（不是构建过程）：](https://github.com/JonathanWalsh/Granule) [https](https://github.com/JonathanWalsh/Granule) ://github.com/JonathanWalsh/Granule Granule 使用[Closure Compiler](https://developers.google.com/closure/compiler/)压缩和缩小 JavaScript 和 CSS文件。

在属性文件中，我打开/关闭了一些设置。它工作得很好......

当我尝试设置closure-compiler.compilation_level 设置（值：WHITESPACE_ONLY/SIMPLE_OPTIMIZATIONS/ADVANCED_OPTIMIZATIONS）时，组合文件没有改变。当我将其设置为 SIMPLE_OPTIMIZATIONS 或 ADVANCED_OPTIMIZATIONS 时，它只会删除空格。它没有使用简单/高级的缩小算法。

有没有人有这方面的经验？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:44:57.010

您还需要在 web-inf/lib 目录中包含 Granule-Closure-Compiler (https://github.com/JonathanWalsh/Granule-Closure-Compiler)

# powershell - 检查Powershell中是否存在通讯组

> ID：12167126
> 
> 赞同：2
> 
> 时间：2012-08-28T20:33:17.270
> 
> 标签：powershell, exchange-server

我正在编写一个脚本来快速创建一个新的通讯组并用 CSV 填充它。我无法测试组名是否已存在。

如果我做了 a`get-distributiongroup -id $NewGroupName`并且它不存在，我会得到一个异常，这是我期望发生的。如果该组确实存在，那么它会列出该组，这也是我所期望的。但是，在尝试创建组之前，我找不到测试组是否存在的好方法。我尝试过使用 try/catch，并且还这样做：

```
Get-DistributionGroup -id $NewGroupName -ErrorAction "Stop" 
```

这使得 try/catch 工作得更好（据我了解非终止错误）。

基本上，我需要让用户输入一个新的组名来检查它是否可行。如果是，则创建该组，如果不是，则应提示用户输入另一个名称。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T20:53:06.943

您可以使用`SilentlyContinue`erroraction 以便不显示异常/错误：

```
$done = $false
while(-not $done)
{
   $newGroupName = Read-Host "Enter group name"
   $existingGroup = Get-DistributionGroup -Id $newGroupName -ErrorAction 'SilentlyContinue'

   if(-not $existingGroup)
   {
      # create distribution group here
      $done = $true
   }
   else
   {
      Write-Host "Group already exists"
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:13:09.587

这应该可以解决问题：

```
((Get-DistributionGroup $NewGroupName -ErrorAction 'SilentlyContinue').IsValid) -eq $true 
```

# java - 使用 Java EE 和 Tomcat 定位创建的文件

> ID：12167135
> 
> 赞同：0
> 
> 时间：2012-08-28T20:33:48.287
> 
> 标签：java, jsp, jakarta-ee, tomcat, file-io

我创建了一个动态 Web 项目，并使用 Apache Tomcat 作为服务器。

在我的 servlet 中，我正在创建一个文本文件并希望在 JSP 中重用它。但是，当我执行以下简单操作时，默认情况下会在 Eclipse 的安装文件夹中创建它们：

```
File f = new file("test.txt"). 
```

我不知道为什么会这样。有没有办法在`WebContent`目录中创建文件，因为我想让该文件在我的 JSP 中可供下载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:50:52.967

Java有一个“当前目录”的概念。当您通过 Eclipse 启动应用程序时，这可能确实指向您的安装目录。如果您不指定任何路径，则会在当前目录中创建一个文件。`test.txt`因此，你最终在那里的原因。

该`WebContent`目录是 Eclipse 特有的。您的代码不应依赖于将任何内容放在那里。只有在开发应用程序时才通过 Eclipse 启动应用程序，而不是在将其部署到实时服务器时。

此目录的内容将成为`root`您的 .war 的内容，这是一个众所周知的位置，与您如何启动和部署应用程序无关，但您仍然不能依赖在运行时向该位置写入任何内容。您可以将您的应用程序部署为打包的 .war（可能用于实时部署），或者您可以将您的应用程序未打包部署，但您的应用程序服务器可能根本无法获取运行时所做的任何更改。

如果您确定您的应用程序仅在单个服务器上运行，您可以做什么将文件写入文件系统上的一个众所周知的位置，例如`/tmp`，或`/var/yourapp/files`等。然后，提供这些文件的代码可以从中获取它们地点。

如果您想根据 Java EE 规则 100% 安全地播放它，您可以将文件存储在具有可配置地址的 FTP 服务器之类的东西上。从技术上讲，您的战争可以在集群上的节点之间传送，并且请求最终可能会发送到不同的机器，因此依赖于本地文件系统将无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-23T02:04:49.307

执行此语句`this.getServletContext().getRealPath ("")`，您将获得 Tomcat WebServer 在运行时指向的路径。您可以添加一个文件夹“MyFolder”并调用此语句：

新文件（this.getServletContext（）.getRealPath（“”）+“/MyFolder/test.txt”）；

无论如何，默认路径看起来像：

```
...\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\<NameOfYourProject> 
```

请注意，当您创建一个新文件时，它不会出现在您的直接工作区中（检查*.metadata*路径），除非您更改了 Tomcat 应该指向的运行时位置。

# java - Struts 2 使用 # 语法访问动作标签属性

> ID：12167139
> 
> 赞同：0
> 
> 时间：2012-08-28T20:33:58.070
> 
> 标签：java, model-view-controller, jsp, struts2

是否可以从 JSP 页面访问在操作中使用的 Beans/Forms 中定义的字段？

目前我可以使用这个：

```
<s:action name="actionName" var="foo" executeResult="false" /> 
```

并使用访问该操作类中定义的任何字段

```
<s:property value="#foo.bar" /> 
```

但这似乎不适用于在 bean 或表单中定义的值，我通常可以使用结果 JSP 页面中的属性标记来访问这些值以执行操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T20:49:24.460

刚刚使用 Struts 2 版本 2.3.4.1 对此进行了测试，它对我来说可以获取 kuPerson bean 的 displayName 值。请注意，在我的 Struts 动作类中，我有一个 getKuPerson 方法，它返回一个 KuPerson 类型的对象，而 KuPerson 类有一个 getDisplayName 方法，它返回一个字符串。

```
<s:action name="person" var="personAction" executeResult="false" />

Display name: <s:property value="#personAction.kuPerson.displayName" /> 
```

# entity-framework-4 - 使用 EntityFramework 插入时防止标识列同步

> ID：12167144
> 
> 赞同：0
> 
> 时间：2012-08-28T20:34:19.063
> 
> 标签：entity-framework-4

使用 EF4 /w SQL Server 2008。

以下代码（针对具有 PK 的表，定义为`Int IDENTITY(1,1)`：

```
ctx.AddObject(GetEntitySetName(), newEntity);
ctx.SaveChanges(); 
```

分析 SQL 时的结果是插入语句，然后是对我要插入的表的查找：

```
SELECT ID FROM Table
WHERE ID = @@ScopeIdentity AND @@RowCount > 0 
```

有没有办法防止`EntityFramework`收回`Identity`种子？我不需要在我的 .Net 代码中返回 ID，在大量情况下，这似乎是一种浪费的操作。

或者，有没有办法告诉 EF 改变它执行此操作的方式？使用的策略与 Microsoft 在此缺陷报告中提出的建议背道而驰：

[http://connect.microsoft.com/SQL/feedback/ViewFeedback.aspx?FeedbackID=328811](http://connect.microsoft.com/SQL/feedback/ViewFeedback.aspx?FeedbackID=328811)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:02:52.017

使用数据库生成的键（用 标记的属性）时，您无法更改此行为`StorgeGeneratedPattern.Identity`。EF 需要插入实体的真实键值，因此避免查询的唯一方法是根本不使用数据库生成的键并在应用程序中自行处理。

# java - 为什么在Java中使用以下两个移位运算符语句时返回两个不同的结果

> ID：12167147
> 
> 赞同：1
> 
> 时间：2012-08-28T20:34:28.810
> 
> 标签：java, bit-shift

什么时候：

```
byte[] b = {-128, 0, 0, 0};
long total = 0; 
```

第一个表达式返回 -2,147,483,648：

```
for (int i = 0; i < b.length; i++) {
   int shift = (b.length - 1 - i) * 8;
   total += (b[i] & 255) << shift;
} 
```

第二个返回 2,147,483,648：

```
for (int i = 0; i < b.length; i++) {
   int shift = (b.length - 1 - i) * 8;
   long tmp = (b[i] & 255);
   total += tmp << shift;
} 
```

我的问题是；为什么第一个陈述是肯定的，而第二个陈述看起来是相同的陈述？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T20:43:24.377

在这一行

```
total += (b[i] & 255) << shift; 
```

带括号的表达式是类型`int`，左移将其最左边的位设置为 1，使其成为负数。`long`只有在所有计算完成后才会转换为。

```
long tmp = (b[i] & 255); 
```

这里的表达式是`long`，移位后最左边的位将保持为零。

如果要保留第一个表达式，只需`long`为带括号的表达式添加强制转换或使用`long`常量`255L`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:44:08.853

将 int 移入符号位会导致负数 将 long 移位相同的量会导致正数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T20:45:42.930

如果您运行以下代码，您可能会了解发生了什么：

```
System.out.println(Integer.toBinaryString(-2147483648));
System.out.println(Long.toBinaryString(2147483648L)); 
```

它打印

```
10000000000000000000000000000000
10000000000000000000000000000000 
```

`long`对于和，相同的位有不同的解释`int`。

# javascript - 如何根据身体高度动态更改元素边距顶部

> ID：12167148
> 
> 赞同：0
> 
> 时间：2012-08-28T20:34:34.970
> 
> 标签：javascript, jquery, css, height

我的身体中有一个容器，我需要将此元素设置为居中垂直对齐。我需要这样做也取决于身高，并动态改变它。

我尝试了类似下面的代码，但它不能完美地工作，最重要的是不是动态的。注意：我不能用 css 做到这一点。

```
var ah = $('body').height();
var ph = $('#main_container').parent().height();
var mh = Math.ceil((ph-ah) / 2);
$('#main_container').css('margin-top', mh); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T20:39:24.690

将其绑定到`resize`事件：

```
$(window).on('resize', function() {
    var $container = $('#main_container');
    var height = Math.ceil(($container.parent().height() - $('body').height()) / 2);

    $container.css({marginTop: height});
}).trigger('resize'); 
```

它不会像 CSS 那样流畅，但它会起作用。为什么你不能用 CSS 来做呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T21:05:29.793

您可以使用 JQuery 注入 CSS：

```
$('#main_container').css("position", "absolute");
$('#main_container').css("margin-top", "auto");
$('#main_container').css("margin-bottom", "auto");
$('#main_container').css("top", 0);
$('#main_container').css("bottom", 0); 
```

如果你还想水平居中，你可以删除`margin-top`和`margin-bottom`行，并添加：

```
$('#main_container').css("margin", "auto");
$('#main_container').css("left", 0);
$('#main_container').css("right", 0); 
```

# vba - 在 VBA 中翻译文件关联

> ID：12167151
> 
> 赞同：0
> 
> 时间：2012-08-28T20:35:04.393
> 
> 标签：vba, excel, ms-word

好吧，这是我第二次尝试编写代码，也是我被分配从事的第二个 VBA 宏项目。在过去的一个半星期里，我一直在努力学习 VBA 作为我的第一门编码语言，所以我为愚蠢的错误道歉。话虽如此，直奔业务。这是我为 word 文档宏汇总的内容：

```
Sub MacroToUpdateWordDocs()
    'the following code gets and sets a open file command bar for word documents
    Dim Filter, Caption, SelectedFile As String
    Dim Finalrow As String
    Dim FinalrowName As String
    Filter = "xlsx Files (*.xlsx),*.xlsx"
    Caption = "Please Select A .xlsx File, " & TheUser
    SelectedFile = Application.GetOpenFilename(Filter, , Caption)
    'check if value is blank if it is exit
    Finalrow = Cells(Rows.Count, 1).End(xlUp).Row
    FinalrowName = Finalrow + 1
    If (Trim(SelectedFile) = "") Then
        Exit Sub
    Else
        'setting up the inital word application object
        Set auditmaster = CreateObject("excel.sheet")
        'opening the document that is defined in the open file dialog
        auditmaster.Application.Workbooks.Open (SelectedFile)
        'ability to change wether it needs to burn cycles updating the UI
        auditmaster.Visible = False
        'declare excel sheet
        Dim wdoc As Document
        'set active sheet
        Set wdoc = Application.ActiveDocument
        Dim i As Integer
        Dim u As Integer
        Dim ColumnAOldAddy As String
        Dim ColumnCNewAddy As String
        u = 1
        i = 1
        'MsgBox (wordapp.ActiveDocument.Hyperlinks.Count)
        'Sets up a loop to go through the Excel Audit file rows.
        For i = 1 To auditmaster.ActiveSheet.Rows.Count
            'Identifies ColumnAOldAddy and ColumnCNewAddy as columns A and C for each row i.  Column A is the current hyperlink.address, C is the updated one.
            ColumnAOldAddy = auditmaster.Cells(i, 1)
            ColumnCNewAddy = auditmaster.Cells(i, 3)
            'If C has a new hyperlink in it, then scan the hyperlinks in wdoc for a match to A, and replace it with C
            If ColumnCNewAddy = Not Nothing Then
                For u = 1 To doc.Hyperlinks.Count
                    'If the hyperlink matches.
                    If doc.Hyperlinks(u).Address = ColumnAOldAddy Then
                        'Change the links address.
                        doc.Hyperlinks(u).Address = ColumnCNewAddy
                    End If
                'check the next hyperlink in wdoc
                Next
            End If
            'makes sure the macro doesn't run on into infinity.
            If i = Finalrow + 1 Then GoTo Donenow
        'Cycles to the next row in the auditmaster workbook.
        Next
Donenow:
        'Now that we've gone through the auditmaster file, we close it.
        auditmaster.ActiveSheet.Close SaveChanges:=wdDoNotSaveChanges
        auditmaster.Quit SaveChanges:=wdDoNotSaveChanges
        Set auditmaster = Nothing
    End If
End Sub 
```

因此，此代码假设采用由我的第一个宏创建的超链接审核文件（最后一个错误已修复并且功能非常好，感谢 Stack Overflow 社区！）。对于在目标 .docx 中找到的每个超链接，审计文件有 3 列和一行：A = 超链接地址，B = 超链接显示文本，C = 新超链接地址

当代码从要更新的 .docx 文件运行时，它允许用户选择审计文件。从那里，它逐行检查更新的超链接地址是否已由旧的审核地址/显示名称写入 C 列，然后在 .docx 文件中搜索旧的超链接地址并将其替换为新的超链接地址. 此时，它完成了对文档的搜索，然后移动到审计 Excel 文件中的下一行。

我的问题是大部分代码都是从excel宏中复制/粘贴的。我一直在弄清楚如何将该代码翻译成适当地识别/引用单词/excel文档的东西。我希望有更多经验的人可以看看这个宏，让我知道我在哪里完全搞砸了。目前，它一直给我“找不到方法或数据成员”错误，主要是关于我尝试引用审计 Excel 文件的位置。我很确定这是一个相对简单的解决方法，但我没有词汇来弄清楚如何用谷歌搜索答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:47:12.837

编译正常，但未经测试：

```
Sub MacroToUpdateWordDocs()

    Dim Filter, Caption, SelectedFile As String
    Dim Finalrow As String
    Dim appXL As Object
    Dim oWB As Object
    Dim oSht As Object
    Dim wdoc As Document
    Dim ColumnAOldAddy As String
    Dim ColumnCNewAddy As String
    Dim i As Long
    Dim h As Word.Hyperlink
    Dim TheUser As String

    Filter = "xlsx Files (*.xlsx),*.xlsx"
    Caption = "Please Select A .xlsx File, " & TheUser

    Set appXL = CreateObject("excel.application")
    appXL.Visible = True
    SelectedFile = appXL.GetOpenFilename(Filter, , Caption)
    appXL.Visible = False

    If Trim(SelectedFile) = "" Then
        appXL.Quit
        Exit Sub
    Else
        Set oWB = appXL.Workbooks.Open(SelectedFile)
        Set oSht = oWB.worksheets(1)
        Finalrow = oSht.Cells(oSht.Rows.Count, 1).End(-4162).Row '-4162=xlUp
    End If

    Set wdoc = Application.ActiveDocument

    For i = 1 To Finalrow

        ColumnAOldAddy = oSht.Cells(i, 1).Value
        ColumnCNewAddy = oSht.Cells(i, 3).Value

        If ColumnCNewAddy <> ColumnAOldAddy Then
            For Each h In wdoc.Hyperlinks
                If h.Address = ColumnAOldAddy Then
                    h.Address = ColumnCNewAddy
                End If
            Next h
        End If

    Next i

    oWB.Close False
    appXL.Quit

End Sub 
```

# dynamics-crm-2011 - 如果激活/停用/合并操作触发了 crm dynamics 2011 更新插件，我如何获得？

> ID：12167154
> 
> 赞同：2
> 
> 时间：2012-08-28T20:35:18.247
> 
> 标签：dynamics-crm-2011

我构建了一个在帐户更新消息中运行的插件，该插件进行了一些验证以不重复记录。但是，如果我尝试禁用该帐户或与另一个帐户合并，则会触发该插件。

如何判断插件是由激活/停用/合并操作触发，还是由 CRM Dynamics 2011 [Save Event Arguments Reference](http://msdn.microsoft.com/en-us/library/gg509060.aspx)中的事件模式触发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:05:58.290

要添加到 Pete Oakey 的答案，您实际上可以通过更改插件步骤的“过滤属性”来告诉您的插件仅在*注册*阶段更改某些字段时触发，此外还可以在实际代码@运行时对此进行测试。因此，除非您的验证逻辑特别需要`StateCode`/`StatusCode`属性来正确处理，否则您可以过滤掉这两个属性，或者只包含您的验证逻辑所需的属性。

![插件步骤](../Images/d5a75ee62b7eed873a7b894f47a078d1.png)

~~原答案：~~

我相信你可以参考对象[`IExecutionContext.Depth Property`](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.iexecutioncontext.depth.aspx "IExecutionContext.Depth 属性")的。`IPluginExecutionContext`

> 每当一个正在运行的插件或工作流向 Web 服务发出一个触发另一个插件或工作流执行的消息请求时，执行上下文的深度属性就会增加。如果深度属性在配置的时间限制内增加到其最大值，则平台将此行为视为无限循环，并中止进一步的插件或工作流执行。最大深度 (8) 和时间限制（一小时）可由 Microsoft Dynamics CRM 管理员配置。

~~因此，您可以使用 if 语句来检查 if `Depth > 1`。~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T21:04:13.767

一种方法是比较插件中帐户实体上更改的前后值。例如，如果您在值中只有`active`（如果这是正确的属性名称） - 您可以查看 after 值以了解发生了什么。

另一种方法是为这些消息添加一个特定的插件并设置一些属性/标志，您可以在更新插件中检查它们。显然，这必须在更新插件之前运行。

# ruby-on-rails - 为什么当带有转储值的散列发生变化时，OpenStruct 值会发生变化？

> ID：12167157
> 
> 赞同：1
> 
> 时间：2012-08-28T20:35:30.063
> 
> 标签：ruby-on-rails, ruby, openstruct

我想知道发生了什么。

当我执行以下操作时：

```
new_struct = OpenStruct.new()
new_struct.color = 'Red'
new_struct.number = 4 
```

这导致：

```
#<OpenStruct color="Red", number=4> 
```

如果我然后创建并更改一些参数：

```
params = { first: new_struct.marshal_dump }

params[:first][:color] = 'Orange' 
```

这导致 OpenStruct 更改为：

```
#<OpenStruct color="Orange", number=4> 
```

如果我更改参数哈希，为什么这个 OpenStruct 会改变？有没有办法在不更改 OpenStruct 的情况下更改参数哈希？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T20:40:36.333

这并不`marshal_dump`令人惊讶，它返回带有 OpenStruct 对象命名空间的哈希，它像任何其他哈希一样是可变的。如果你想防止这种行为，克隆它：

```
params = {first: new_struct.marshal_dump.clone} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:41:54.223

从 ruby​​-doc 上 OpenStruct 的 marshal_dump() 条目：

> 提供编组支持以供 Marshal 库使用。返回包含定义为键的函数和分配给它们的值的基础哈希表。

您从中获得的散列`marshal_dump()`实际上是 OpenStruct 的底层表示，因此散列中的任何更改都将反映在对象中。你总是可以克隆哈希来解决这个问题。

# c# - asp.net mvc 4 c#加mongodb驱动

> ID：12167158
> 
> 赞同：1
> 
> 时间：2012-08-28T20:36:02.570
> 
> 标签：c#, mongodb, webserver, shared-hosting

我想知道我是否在共享主机的生产中使用我的网络应用程序，使用 mongodb 驱动程序 c#（驱动程序嵌入在项目中或需要主机支持）会有问题吗？

因为我打算使用专用的 mongodb 服务器。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:40:57.670

C# 驱动程序只是一组 DLL，所以你很好。

唯一需要检查的是共享主机将允许任何 MongoDB 端口上的流量（默认情况下它使用 27017，尽管您可以更改它）。

# objective-c - 如何从 NSIndexSet 中删除重复项？

> ID：12167159
> 
> 赞同：0
> 
> 时间：2012-08-28T20:36:16.317
> 
> 标签：objective-c, nsindexset

从 NSIndexSet 中删除重复索引的最佳方法是什么？例如，假设我的 NSIndexSet 看起来像这样：

```
[ 1, 3, 3, 6, 7, 12, 12, 12 ] 
```

我希望它看起来像：

```
[ 1, 3, 6, 7, 12 ] 
```

实现这一目标的最有效方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T20:39:05.520

`NSIndexSet`不可能包含重复项。是什么让你觉得你有什么？

更具体地说，文档状态

> NSIndexSet 类表示唯一无符号整数的不可变集合，由于它们的使用方式而被称为**索引。**该集合称为**索引**集。

这里的重点是“唯一”一词，这意味着它不能包含重复项。尝试将索引添加到已经存在的索引集将不会导致任何更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:40:49.110

NSIndexSet 是一个不可变的类。另外，从文档中：

> NSIndexSet 类表示唯一无符号整数的不可变集合，由于它们的使用方式而被称为索引。该集合称为索引集。

长话短说，你没有任何重复。

# javascript - Jquery 选择器为空，我应该使用哪个范围

> ID：12167165
> 
> 赞同：0
> 
> 时间：2012-08-28T20:36:51.887
> 
> 标签：javascript, jquery, unobtrusive-javascript

我尝试通过单击两个不同的链接来显示和隐藏 div。（实际上我的页面有很多这样的部分，所以我必须给他们一个 ID）。

我的 html 看起来像这样

```
<div id="meta-503d22ceaf32609515000003" class="answer-form">
    <form action="..." method="...">
        <p>
            <textarea name=".."></textarea>
        </p>
        <p>
            <input type="submit" value=".."> 
            <a href="#" data-action="cancel" data-id="503526f7e8d08ecb0c000003">cancel</a>
        </p>
    </form>
</div>
<span class="content-nav">
    <a href="#" data-action="open" data-id="503d22ceaf32609515000003">open form</a>
</span> 
```

当我`span` `content-navigation`单击链接时，我`data-action=open`会打开表单。这工作得很好。但是当我单击取消时，它应该隐藏/关闭/向上滑动这个答案表单 div。

这是我的 jQuery-Javascript：

```
$(document).ready(function() {

    $("a[data-action=open]").on('click', function(e) {
        var id = $(this).data('id');
        console.log($("div#meta-" + id));
        $("div#meta-" + id).slideDown('slow');
    });

    $("a[data-action=cancel]").on('click', function(e) {
        var id = $(this).data('id');
        console.log(id);
        console.log(e);
        console.log($("#meta-" + id));
    });

});​ 
```

在第二个绑定点击方法中，它检索 id 但查询

```
$("#meta-"+id) 
```

在第二个方法中没有找到任何东西，而同一个调用在第一个方法中找到了一些东西。

如何找到表格并关闭它？这是一个范围问题，因为取消调用（绑定）嵌套在表单中吗？

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:42:12.383

如果我没记错的话，取消按钮的 ID 看起来与 div 的 ID 不同

# c# - 使用 InternalsVisibleTo 属性时的混淆？

> ID：12167169
> 
> 赞同：2
> 
> 时间：2012-08-28T20:37:33.277
> 
> 标签：c#, obfuscation, internalsvisibleto

我只想使用该`InternalsVisibleTo`属性来进行有意义的单元测试。

但是，我担心当我为发布而构建时，`internal`成员不会被混淆，即使没有朋友程序集会成为发布构建的一部分。

有什么我可以/需要做的事情会导致这些`internal`成员被真正考虑`internal`用于发布版本吗？在此在线上无法找到明确的答案。

仅供参考：我还没有选择特定的混淆器。这个问题的任何答案都可能影响这个选择。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T01:28:02.160

尝试使用[预处理器指令](http://msdn.microsoft.com/en-us/library/4y6tbswk%28v=vs.71%29.aspx)。您可以定义自己的符号或使用内置的 RELEASE 或 DEBUG 符号

```
#if !RELEASE
[assembly: InternalsVisibleTo("X")]
#endif 
```

# .net - 图像如何存储在字节数组中

> ID：12167174
> 
> 赞同：1
> 
> 时间：2012-08-28T20:37:57.203
> 
> 标签：.net, image, bytearray, ascii

图像如何在内部存储在字节数组中？在 Visual Studio 中调试时，我可以看到 ASCII 代码（我猜）。但是请有人解释一下。

说，我们有一个存储在表中的图像（BLOB）。将该 BLOB 提取到代码（在 .net 中）中的数据表中，如下所示，

```
byte[] image = new image();
DataTable dt = new DataTable();
dt.Columns.Add("Image", typeof(byte[]));
\\Consider the BLOB from the DB is fetched into DataTable Image column.
image = dt[Row]["Image"]; 
```

现在，BLOB 如何在内部存储在 byte[] 图像中？

我在互联网上搜索过，但找不到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T20:50:12.340

任何图像都只是根据用于表示它的任何底层格式构造的字节序列，例如颜色数据、层、尺寸等。您在调试期间看到的任何字节的重要性完全取决于原始格式图像，例如 PNG、TIFF、JPEG、BMP 等。

希望这就是你要找的。如果您需要更具体的内容，请修改您的原始帖子，也许有人可以为您提供更多详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T20:54:40.803

我不确定你不清楚什么，但也许这段代码可以提供帮助

```
MemoryStream m = new MemoryStream();

Image img = Image.FromFile(file);
img.Save(m, System.Drawing.Imaging.ImageFormat.Jpeg);

byte[] bytes = m.ToArray();

m.Position = 0;
Image img2 = Image.FromStream(m); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T20:52:12.950

图像通常是文件中由某种算法编码的一组颜色。我熟悉 GIF 图像格式。看下面的图片，看看一个红色的“V”存储在白色背景中的例子。此示例中的图像宽度可能为 7 像素，高度为 4 像素。每个图像总是有一个颜色表，指示图像中使用的颜色数量。R 标记的像素是红色的，w 标记的像素是白色的。

```
RwwwwwR
wRwwwRw
wwRwRww
wwwRwww 
```

每个像素都是一个 32 位宽的整数，用于告诉 r(red)g(green)b(blue) 分量和透明度分量。

# css - 使用 twitter bootstrap 时导航栏 css 未加载

> ID：12167176
> 
> 赞同：0
> 
> 时间：2012-08-28T20:38:02.723
> 
> 标签：css, twitter-bootstrap

我正在使用 twitter 引导 css 框架。我已经在我的应用程序的 /js 文件夹中安装了一个本地副本。

我的 home.php 文件中有一段代码：

```
 <link href="../css/bootstrap-responsive.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="../js/jquery-1.8.0.min.js"></script>
    <script type="text/javascript" src="../js/bootstrap.min.js"></script> 
```

基本上，它很好地加载了 css，span5 部门工作。但是导航栏似乎没有出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:22:50.970

我认为您还需要在页面上包含基本的 bootstrap.css 文件以及 bootstrap-responsive.css 文件。

看这个例子：

[http://twitter.github.com/bootstrap/examples/fluid.html](http://twitter.github.com/bootstrap/examples/fluid.html)

# javascript - 将页面片段加载到 Twitter 引导模式中

> ID：12167177
> 
> 赞同：4
> 
> 时间：2012-08-28T20:38:22.170
> 
> 标签：javascript, jquery, twitter-bootstrap

是否可以使用 Twitter 引导程序的模式组件加载页面片段？我想将一个页面加载到模式中，但我只想要它的一部分。例如，我希望页面上的表单没有环绕导航。在使用 jquery 工具覆盖和 jquery 的 .load 函数之前，我已经完成了这种类型的事情。但是模态的东西不允许传入这种类型的信息。

这是我正在使用的一些示例文本：

```
 <a tabindex="-1"
    href="metadata.html"
    id="metadata-link"
    data-target="#modal"
    data-toggle="modal">Metadata</a>

 <div id="modal" class="modal hide fade in" style="display:none;">
   <div class="modal-header">header<a class="close" data-dismiss="modal">x</a></div>
   <div class="modal-body"></div>
   <div class="model-footer">footer</div>
 </div>

 <script>
   $(document).ready(function() {
     $('#metadata-link').modal({show:false});
   });
 </script> 
```

“metadata.html”页面是一个完整的 html 文档。此页面的内容按预期加载到“.modal-body”元素中。但是什么都没有显示...

如果我将“metadata.html”页面切换为仅包含“div”内容的页面，则会显示模式。

有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T11:47:12.840

您可以手动执行此操作：

```
<script>
$(document).ready(function() {

     $('#metadata-link').click(function(){
       $.ajax(
       {
          url:'url-to-load-page',
          success: function(response){
            //do what ever you want here to extract the part you want
            $('#modal-div-content').html(adapted-response);
            $('#modal').modal('show');
          }
       });
     });
   });
 </script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T21:07:49.843

bootstrap 使用 jquery load 方法，该方法允许指定 URL 和片段选择器：

> .load() 方法与 $.get() 不同，它允许我们指定要插入的远程文档的一部分。这是通过 url 参数的特殊语法实现的。如果字符串中包含一个或多个空格字符，则假定字符串中第一个空格后面的部分是确定要加载的内容的 jQuery 选择器。

所以在我的情况下（添加音乐家）我可以使用这样的普通链接标签：

```
<a href="/musicians/new?editMode  .container form" class="btn pull-right newItem" data-toggle="modal" data-target="#newItemModal" ><i class="icon-plus-sign"></i> Add</a> 
```

它从容器 div 中提取表单元素并将其显示在 newItemModal 模式中。这种方法允许我将模态重新用于其他项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-24T02:31:46.433

**使用数据远程声明片段 ID 对我有用：**

```
<a href="remote.html" data-remote="remote.html #fragment" data-toggle="modal" data-target="#modal"> 
```

# linux - 使用 sed 替换大量文件中的 Windows 换行符 - 但它没有

> ID：12167178
> 
> 赞同：4
> 
> 时间：2012-08-28T20:38:28.143
> 
> 标签：linux, sed

我有很多以 classic 结尾的文件，这`^M`是我 Windows 时代的产物。由于这都是源代码，git 实际上认为这些文件已更改，所以我想一劳永逸地删除那些讨厌的行。

这是我创建的：

```
sed -i 's/^M//g' file 
```

但这不起作用。当然，我没有输入文字`^M`，而是`^V^M`（ctrl V，ctrl M）。在 vim 中它可以工作 ( `:%s/s/^M//g`) 如果我像这样修改它：

```
sed -i 's/^M/a/g' file 
```

它也有效，即它以'a' 结束每一行。它也可以做到这一点：

```
sed -i 's/random_string//g' file 
```

`random_string`存在于哪里`file`。所以我可以用`^M`任何字符替换，我可以删除行但我不能删除`^M`. 为什么？

注意：重要的是它只是被删除，而不是被另一个不可见的字符或其他东西替换。我还想避免双重执行并添加任意字符串并在之后将其删除。我想*了解*为什么会失败（但它不报告错误）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T20:44:50.420

该字符与`\r`by匹配`sed`。采用：

```
sed -e "s/\r//g" input-file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-16T08:18:40.337

就我而言，我必须这样做

```
sed -e "s/\r/\n/g" filename.csv 
```

之后`wc -l filename`显示正确的输出而不是 0 行。

# multithreading - 基本 AS3 工人课程的问题

> ID：12167182
> 
> 赞同：1
> 
> 时间：2012-08-28T20:38:41.247
> 
> 标签：multithreading, actionscript-3

我遵循了 Lee Brimelow 的教程（[第 1](http://www.gotoandlearn.com/play.php?id=162)部分，[第 2 部分](http://www.gotoandlearn.com/play.php?id=163)），但不知何故，我的项目没有按预期工作。

目前，将“src/Secondary.as”发布到“www/assets/swf/secondary.swf”可以正常工作，但是当尝试运行“src/Main.as”时，会出现错误：

```
Exception fault: TypeError: Error #1007: Instantiation attempted on a non-constructor.
    at Main/init()[/Volumes/DOCUMENTS/Tests/AS3/test-workers/src/Main.as:52]
    at Main()[/Volumes/DOCUMENTS/Tests/AS3/test-workers/src/Main.as:32] 
```

如果有人有时间，你可以看看[我在 Github 上的代码](http://github.com/jansensan/test-as3-workers)，也许看看我在哪里搞砸了？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T21:16:36.067

正如您的错误消息所述：您的`Main.init()`方法中第 52 行中提出的问题。你在那里尝试做的是创建一个新的`SecondarySWF`. 我会说你的`Secondary`类嵌入`SecondarySWF`不能正常工作，所以它在你的 init 方法中不可用。您应该在 init-method 的第一行设置一个断点，当调试器到达这一点时检查`SecondarySWF`. 我希望该变量中没有任何内容，所以您`new SecondarySWF()`then 的意思实际上是`new null()`.

因为您使用指定的 MIME 类型嵌入了 secondary.swf，所以 Flex 编译器会忽略它，因为它无法检测加载文件中的实际数据类型。我[在 Adob​​e 的食谱页面上找到了这篇文章，](http://cookbooks.adobe.com/post_How_to_embed_swf_file_containing_ActionScript_code-12871.html)它解释了除了使用`[Embed]`. 希望这能满足您的需求。

# jquery - 使用 Jquery 隐藏表中的列

> ID：12167184
> 
> 赞同：0
> 
> 时间：2012-08-28T20:38:53.540
> 
> 标签：jquery, html

我找到了一个以前建议用于满足其必要需求的其他人的示例，（[建议修复的演示链接](http://jsfiddle.net/highwayoflife/8BahZ/4/)）我尝试通过使用 col 标记使每个列隐藏来简化过程。然而，当我将类添加到 col 标记时，它破坏了该功能，我不知道如何修复它。

我的演示：[这里](http://jsfiddle.net/8BahZ/393/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:45:18.227

如果我理解正确，那么您只需要在`th`下面添加类，

```
<tr>
 <th class="first_name">First Name</th>
 <th class="last_name">Last Name</th>
 <th class="email">Email</th>
</tr> 
```

并修改您的脚本，如下所示，

```
$("input:checkbox:not(:checked)").each(function() {
    var column = $("." + $(this).attr("name"));
    $(column).hide();
});

$("input:checkbox").click(function(){
    var column = $("." + $(this).attr("name"));
    $(column).toggle();
}); 
```

**演示：http:** [//jsfiddle.net/8BahZ/400/](http://jsfiddle.net/8BahZ/400/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:45:33.210

您似乎在切换`col`标签而不是列本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T20:45:35.637

对我来说，在 Chrome 中，一个`col`标签会扩展到其他标签（`thead`, `th`），所以选择`col`不会给你任何东西。即使你会得到它们，你也只是切换列标题。

无论如何，正如控制台告诉你的那样，你有一个语法错误——你不能`;`在一个表达式中出现，因为它终止了一个语句。

可能使用更清洁的解决方案：http `:nth-child`: [//jsfiddle.net/8BahZ/402/](http://jsfiddle.net/8BahZ/402/)。

```
var f = function() {
    var index = $(":checkbox").index(this) + 1;
    $("table > * > * > :nth-child(" + index + ")").toggle(this.checked);
};

$(":checkbox").click(f).each(f);  // bind handler and run it once 
```

# javascript - 你知道使用javascript游戏引擎的简单方法吗？

> ID：12167187
> 
> 赞同：0
> 
> 时间：2012-08-28T20:39:13.243
> 
> 标签：javascript, jquery, ruby-on-rails, html, game-engine

对于一个学校开发项目，我需要用 javascript 创建一个类似炸弹人的游戏，该游戏将以人对人在线游戏为特色。我可以使用任何我想要的开源库/框架。

问题是 javascript 是一种很难从头开始学习的语言，我可能无法及时完成。要知道我只知道我将用于后端、保存、生根等的 ruby​​ on rails 女巫......

所以我去寻找一个非常容易和快速在javascript中使用的游戏引擎。[我已经在https://gist.github.com/768272](https://gist.github.com/768272)上找到了一些非常流行的，例如 Gamejs、box2dweb 或 tapjs，甚至是完整列表，但我无法选择其中任何一个。

哪一个提供最好的教程、文档等...

欢迎任何帮助...如您所见，我是游戏开发的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:06:25.267

您可以使用[Crafty](http://craftyjs.com/)，它是一个不错且易于使用的 Javascript 游戏库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T00:19:44.517

我从 Google I/O 的这两个视频中学到了很多东西

[GRITS：使用 HTML5 进行 PVP 游戏](http://www.youtube.com/watch?v=Prkyd5n0P7k)

[云端游戏](http://www.youtube.com/watch?v=5lMcNPDR6uw)

他们为您提供了关于他们如何使用 HTML5 和 Javascript 制作整个游戏的描述性演示。它非常深入，但我强烈建议您观看。他们还开源了游戏，如果你想查看源代码等，你可以在 Github 上创建它。虽然这不是一个 javascript 框架，但它确实教会了你很多如何从 SCRATCH 制作 HTML5 游戏。

就库而言，是的，[Box2d](http://sourceforge.net/projects/box2d-js/)是一个非常好的库，并且广为人知。如果你正在尝试制作 3D 游戏，我想知道，但如果你是的话，[three.js](http://mrdoob.github.com/three.js/)引起了我的注意（它被用来制作这款名为[HexGL](http://hexgl.bkcore.com/)的 HTML5 赛车游戏）。最后，我还建议您看看[Ludei](http://ludei.com/)，因为他们有一些非常棒的演示，您只需复制和粘贴即可。如果您想将游戏转移到移动空间，它们也会为您提供帮助。

不过，根据您所说的，我会坚持使用 Box2d。我会尝试找到一些好的教程，如果我发现任何东西，我可能会在以后用更多的库/教程更新我的答案。希望最好的！

# internet-explorer - 溢出功能问题

> ID：12167188
> 
> 赞同：-2
> 
> 时间：2012-08-28T20:39:18.013
> 
> 标签：internet-explorer, css, overflow

谁能告诉我如何解决我遇到的问题：

[http://www.turdidesigns.com/bin/ebay/antic_arte/cabecero.html](http://www.turdidesigns.com/bin/ebay/antic_arte/cabecero.html)

用资源管理器打开它，你会注意到菜单中的移动，我不想要它，我需要它像在 chrome 中一样运行。

对不起这样的问题，但我被困住了......

我想用css悬停，所以一般来说文本是隐藏的，但是当悬停时，文本会出现在下面。溢出方法在 chrome 中运行良好，但我无法使其在 IE 中运行。

Ps 不能使用任何javascript。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:56:57.527

在火狐上它也不起作用。

以下代码在 Firefox 上为我工作：

```
#navi li {
    vertical-align: top;
} 
```

但是你需要

```
#navi {
    bottom: 50px;
} 
```

代替`45px`

为什么你的页面在一个只有一个单元格的表格中？您应该避免使用表格，但在您的情况下，这似乎是无稽之谈。

# javascript - 全屏背景图像+旋转图像？

> ID：12167190
> 
> 赞同：2
> 
> 时间：2012-08-28T20:39:28.487
> 
> 标签：javascript, jquery

我知道如何实现全屏/可扩展背景图像；我通常使用 jQuery 方法。例如：http : [//tinyurl.com/9yl4rbw](http://tinyurl.com/9yl4rbw)

但！我正在尝试使背景图像在每次访问页面时都不同。不是幻灯片；但就像旧的 javascript (EG: [http://www.computerhope.com/j18.htm](http://www.computerhope.com/j18.htm) )

我怎么能把两者结合起来；jQuery可扩展背景和页面刷新新图像javascript？

有人遇到过这种效果的优质插件吗？

*编辑*_* _ _*

我在上面的参考 URL 中使用 jQuery 方法；基本上如下：

```
<!--Expandable BG code IE 7 +-->

  <style>

                #bg { position: fixed; top: 0; left: 0; }
                .bgwidth { width: 100%; }
                .bgheight { height: 100%; }

                #page-wrap { position: relative; width: 950px; margin-left: auto; margin-right: auto;;  }

  </style> 

 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
        <script>
                $(function() {   

                        var theWindow        = $(window),
                            $bg              = $("#bg"),
                            aspectRatio      = $bg.width() / $bg.height();

                        function resizeBg() {

                                if ( (theWindow.width() / theWindow.height()) < aspectRatio ) {
                                    $bg
                                        .removeClass()
                                        .addClass('bgheight');
                                } else {
                                    $bg
                                        .removeClass()
                                        .addClass('bgwidth');
                                }

                        }

                        theWindow.resize(function() {
                                resizeBg();
                        }).trigger("resize");

                });
        </script>

<!--Expandable BG code IE 7 +-->

<!--Full BG Call-->

<img src="Sandwichfullbg.jpg" id="bg" >

<div id="page-wrap">

<!--End Full BG Call--> 
```

**我想找到一个简单的解决方案，在新页面访问或页面刷新时更改背景；理想情况下保存大约 30 张图像。**EG：刷新页面 > 新 rad 图像；刷新页面 > 新辐射图像；（×30）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T21:41:04.007

将此代码添加到您的 JS 顶部。它将图像的 src 属性设置为从 Sandwichfullbg0.jpg 到 Sandwichfullbg29.jpg 的随机值（总共 30 个不同的图像）

```
$('#bg').attr('src', 'Sandwichfullbg' + Math.floor(Math.random() * 30) + '.jpg'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:59:05.577

看看[这个](http://images.alexmeub.com.s3.amazonaws.com/resize_bg.html)。查看源代码并进行检查。我使用 z-index 较低的图像，因为它使调整大小更容易。另外，我会优化你的背景图片，所以它不是那么大。它几乎是一个 MB，加载时间太长。当纵横比不是宽屏时，您的版本无法很好地调整大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T21:31:49.897

为什么不直接使用 new `background-size:cover`, 作为背景，然后使用 jQuery 按照正常方法随机更改此背景图像？

我为您创建了一个[jsfiddle](http://jsfiddle.net/wigster/CqGwx/1/)，基本上可以满足您的所有需求。（在 jsfiddle 中继续单击运行，您将随机看到背景图像循环）。

请注意，background-size:cover 主要适用于较新的凉亭，但通过使用[Modernizr](http://modernizr.com/)可以克服这一问题。

通过在标题中链接来安装 Modernizr

```
<script src="http://www.modernizr.com/downloads/modernizr-latest.js"></script> 
```

在你的 HTML 标签中，

```
<html class="no-js"> 
```

编辑：根据评论，我采用了另一种具有更多浏览器支持的方式：
[jsfiddle](http://jsfiddle.net/wigster/36cL6/)

这次我只是让它随机应用一个类，其中这个类有供应商前缀和修复 ie-7/ie-8 以及所有其他的。它在 IE8 中看起来并不完美，但图像会完全拉伸以适合身体的高度/宽度。

# python - pythonic方法来创建3d dict

> ID：12167192
> 
> 赞同：11
> 
> 时间：2012-08-28T20:39:38.547
> 
> 标签：python

我想创建一个可以访问的字典：

```
d[id_1][id_2][id_3] = amount 
```

到目前为止，我有一个巨大的丑陋功能：

```
 def parse_dict(id1,id2,id3,principal, data_dict):
        if data_dict.has_key(id1):
           values = data_dict[id1]
           if values.has_key[id2]
              ..
        else:
            inner_inner_dict = {}
             # and so on 
```

这样做的pythonic方法是什么？

请注意，我输入了本金..但我想要的是金额..所以如果所有三个键都在那里..将本金添加到之前的金额！

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-28T20:43:51.347

您可能要考虑使用[`defaultdict`](http://docs.python.org/library/collections.html)：

例如：

```
json_dict = defaultdict(lambda: defaultdict(dict)) 
```

将创建s of `defaultdict`s （我知道..但它是正确的），要访问它，您可以简单地执行以下操作：`defaultdict``dict`

```
json_dict['context']['name']['id'] = '42' 
```

而不必诉诸于使用`if...else`来初始化。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-28T20:45:51.927

```
from collections import defaultdict

d = defaultdict(lambda : defaultdict(dict))

d[id_1][id_2][id_3] = amount 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-28T20:50:01.717

```
>>> from collections import defaultdict
>>> import json

>>> def tree(): return defaultdict(tree)

>>> t = tree()
>>> t['a']['b']['c'] = 'foo'
>>> t['a']['b']['d'] = 'bar'
>>> json.dumps(t)
'{"a": {"b": {"c": "foo", "d": "bar"}}}' 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-28T20:46:51.283

您可以制作一个简单的字典来创建新字典（使用[Autovivification](http://en.wikipedia.org/wiki/Autovivification)）：

```
>>> class AutoDict(dict):
    def __missing__(self, key):
        x = AutoDict()
        self[key] = x
        return x

>>> d = AutoDict()
>>> d[1][2][3] = 4
>>> d
{1: {2: {3: 4}}} 
```

这将没有尺寸限制，因为带有 dict 的 defaultdict 具有。

或者使用更简单的版本`defaultdict`（来自上面的 wiki 链接）：

```
def auto_dict():
    return defaultdict(auto_dict) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T20:44:52.173

也许你需要看看多维数组——例如在 numpy 中：

[http://docs.scipy.org/doc/numpy/reference/arrays.ndarray.html](http://docs.scipy.org/doc/numpy/reference/arrays.ndarray.html)

# php - MySQL 更新不起作用

> ID：12167198
> 
> 赞同：1
> 
> 时间：2012-08-28T20:40:32.990
> 
> 标签：php, mysql

我想根据用户输入更新我的数据库的 2 个字段。我的代码是这样的：

```
 <body>
<?php
 $db_server["host"] = "localhost"; //database server
$db_server["username"] = "root"; // DB username
$db_server["password"] = "mypass"; // DB password
$db_server["database"] = "mudb";// database name

$dbc = mysql_connect($db_server["host"], $db_server["username"], $db_server["password"]);
mysql_select_db($db_server["database"], $dbc);
$user =  $_COOKIE['mycookie'];

    $q = "SELECT * FROM members WHERE username='$user'"; 
    $r = mysql_query( $q,$dbc);
    while ($row = mysql_fetch_array($r, MYSQLI_ASSOC)) { 
    echo 'username: '.$row['username'], '<br/>';

    $password=$row['password'];
?>

<form method="post" id="changepasswordform" > 
<input type="password" id="newpassword" name="newpassword"/>
<input type="submit"  name="changepasswordbutton"  >  
       </form>

<?php

        echo 'email:        '.$row['email'], '<br/>'; 
        }
?>

<form method="post" id="changeemailform" >  

        <input type="text" id="newemail" name="newemail"/>

       <input type="submit" value="αλλαγή"  name="changeemailbutton"  >
       </form>

<?php
}

    if (isset($_POST['changepasswordbutton'])){

                       $newpassword=$_POST['newpassword'];
                $q2 = "UPDATE members SET password=$newpassword WHERE username='$user'"; 

                $r2 = mysql_query($q2,$dbc);

}   

if (isset($_POST['changeemailbutton'])){
                    $newemail=$_POST['newemail'];
                    $q3 = "UPDATE members SET email=$newemail WHERE username='$user'"; 
                $r3 = @mysql_query( $q3,$dbc);  
}
?>
</body> 
```

但是，尽管当我尝试 UPDATE 时我与数据库的连接正常（SELECT 按预期显示结果），但我的数据库中的值保持不变。我检查了 $newpassword 和 $newemail 的值，它们每次都包含用户输入.我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T20:42:02.527

您缺少`''`应该围绕密码字段的（引号）。改变：

```
UPDATE members SET password=$newpassword WHERE username='$user' 
```

至：

```
UPDATE members SET password='{mysql_real_escape_string($password)}' 
WHERE username='{mysql_real_escape_string($user)}' 
```

**重要提示：**
即使它不相关，请不要使用`mysql_*`函数 - 它已被弃用并且容易受到 sql-injection 的影响。最好使用 PDO 或 MySQLi。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T20:47:25.537

这将解决问题，并为 sql 注入 ( `mysql_real_escape_string`) 保存：

```
 $q2 = "UPDATE members SET 
   password='". mysql_real_escape_string($password) ."' 
   WHERE username='". mysql_real_escape_string($user) ."'; 
```

但是当然你不应该再使用`mysql_*`了，我只是为你的具体情况举一个例子。

# ruby-on-rails - 带有嵌套资源的 rails 自定义控制器：routes.rb

> ID：12167201
> 
> 赞同：0
> 
> 时间：2012-08-28T20:40:38.873
> 
> 标签：ruby-on-rails, model-view-controller, routing, controller

我有一个用户控制器和用于索引、更新等的相关视图。项目规范发生了变化，现在我们有一个自定义的仪表板控制器和相关的索引页面，由 localhost:3000/dashboard 访问

```
match 'dashboard' => 'dashboard#index', as: 'dashboard' 
```

仪表板索引页面的行为类似于（旧）用户索引页面，所以我想我可以简单地重用用户控制器操作。我怎样才能简单地将用户“嵌套”到仪表板中，以实现类似`localhost:3000/dashboard/users/new`or的路线`localhost:3000/dashboard/users/1/edit`？请注意，Dashboard 控制器没有关联模型，它是一个自定义模型，只是根据查看 Rails 应用程序的人创建自定义主页。它将具有与用户无关的其他功能。

我试过了

```
match 'dashboard' => 'dashboard#index', as: 'dashboard' do
  resources :users do

    member do
     #more custom actions
    end

    collection do
     #more custom actions
    end

 end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:46:14.583

命名空间应该这样做：

```
namespace :dashboard do
    root to: "dashboard#index"

    resources :users do
    end
end 
```

仪表板索引的路径应该是`dashboard_root_path`.

```
app
    controllers
         dashboard
             dashboard_controller.rb
             users_controller.rb 
```

# python - 如何围绕第三方 servlet 包装 Plone 身份验证？

> ID：12167202
> 
> 赞同：2
> 
> 时间：2012-08-28T20:40:44.783
> 
> 标签：python, authentication, nginx, plone

我们正在使用 Plone 来提供一些第三方中间件。

不幸的是，中间件有一个特定的 servlet，它可以从 Java 小程序中调用，并且不进行任何类型的身份验证。我想将其关闭并以某种方式围绕它进行身份验证，最好使用用户将在 Plone 上拥有的现有会话。

我的第一个想法是配置 nginx（我们将其用作反向代理）来检查 cookie，并且仅在用户具有有效会话时才代理（按照[本示例](https://gist.github.com/2031652)的行）。但是，如何对照 Plone 检查会话 ID，因为它都存储在 Zope 数据库中？

或者，我们可以有一个 Plone python 脚本，它在身份验证后基本上将所有内容传递到后端，但我不知道该怎么做。

有什么建议么？或者替代的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T09:37:03.723

Plone 使用`auth_tkt`会话 cookie；任何支持此类会话 cookie*并且*配置了与 Plone 相同的秘密的系统都可以验证 cookie。

不幸的是，我无法找到 auth_tkt 的 nginx 实现；该标准源于 Apache[`mod_auth_tkt`模块](http://www.openfusion.com.au/labs/mod_auth_tkt/)，因此如果 Apache 是一个选项，您可以使用它。有关如何配置此类设置的详细信息，请参阅[使用 mod_auth_tkt 进行 Plone 和 CGI​​ 单点登录。](https://stackoverflow.com/questions/5215004/plone-cgi-single-sign-on-using-mod-auth-tkt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T05:39:33.993

您可以编写自己的 Plone 自定义插件，它提供了一个浏览器视图，为您在 Plone 进程中进行会话检查。如何从 Nginx 中涉及到这一点对我来说是一个谜。

[http://collective-docs.readthedocs.org/en/latest/views/browserviews.html](http://collective-docs.readthedocs.org/en/latest/views/browserviews.html)

检查身份验证凭据是否有效

[http://collective-docs.readthedocs.org/en/latest/sessions/login.html?highlight=login#extracting-credentials](http://collective-docs.readthedocs.org/en/latest/sessions/login.html?highlight=login#extracting-credentials)

有关 Plone 身份验证和 cookie 的更多信息

[http://collective-docs.readthedocs.org/en/latest/sessions/cookies.html?highlight=cookies#default-plone-cookies](http://collective-docs.readthedocs.org/en/latest/sessions/cookies.html?highlight=cookies#default-plone-cookies)

# wcf - 公开元数据交换以与 svcutil 一起使用

> ID：12167209
> 
> 赞同：0
> 
> 时间：2012-08-28T20:40:58.077
> 
> 标签：wcf, service, metadata, svcutil.exe

我正在尝试使用我拥有的一个非常简单（基本上是空/无功能）的服务，并使用 svcutil.exe 生成一个代理。这是我的服务器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.Serialization;
using System.ServiceModel;

class Server2
{
    static void Main(string[] args)
    {
        Console.WriteLine("Server");

        Uri baseAddress = new Uri("http://localhost:1234");
        var host = new ServiceHost(typeof(TheContractService), baseAddress);
        //host.AddServiceEndpoint(typeof(TheContractService), new WSHttpBinding(), "ContractService");
        host.Open();

        Console.ReadLine();
    }
}

[ServiceContract]
class TheContractService
{
    [OperationContract]
    void Expose()
    {
        Console.WriteLine("Exposed");
    }
}

[DataContract]
class TheContract
{
    [DataMember]
    public string PublicProperty { get; set; }
    [DataMember]
    public string PublicField;
    [DataMember]
    private string PrivateProperty { get; set; }
    [DataMember]
    private string PrivateField;
    [DataMember (Name = "BetterName")]
    private string fudshjguhf;
} 
```

现在我只需要设置我的 .config 文件以允许 MEX - 这是我的服务器配置：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.serviceModel>    
    <services>
      <service name="ContractService"
               behaviorConfiguration="MexServiceBehavior">

        <endpoint address="ContractService"
                  binding="basicHttpBinding"
                  contract="TheContractService"
        />

        <endpoint address="mex"
                  binding="mexHttpBinding"
                  contract="IMetadataExchange"
        />
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior name="MexServiceBehavior">
          <serviceMetadata httpGetEnabled="true"/>
        </behavior>                  
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

我在这里做错了什么？当我尝试运行此命令时： `svcutil /t:code http://localhost:1234/mex /out ContractService.cs /config: ContractService.config`

我收到 400 或 405 错误，并且客户端代理未成功生成。任何人都可以看到我目前拥有的任何问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:22:49.903

您的类名是`TheContractService`，但在您的配置中，元素的`name`属性是**ContractService**。确保该属性的值是*完全限定的名称*（命名空间，如果有的话，加上类名），否则配置将不会被拾取。`<service>`

# wpf - 从 ResourceDictionary 覆盖单个属性设置器

> ID：12167210
> 
> 赞同：0
> 
> 时间：2012-08-28T20:41:02.273
> 
> 标签：wpf

我在名为 MyStyles.xaml 的文件中定义了一个样式：

```
<Style TargetType="{x:Type igDP:XamDataGrid}">
    <Setter Property="FontSize" Value="10" />
    <Setter Property="FontFamily" Value="Arial" />
    <EventSetter Event="CellUpdating" Handler="grid_CellUpdating"/>
</Style> 
```

在我的一个观点中，我定义了一个 XamDataGrid：

```
<igDP:XamDataGrid>
    <igDP:XamDataGrid.Resources>
      <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
          <ResourceDictionary Source="/MyProject.TheViews;component/Views/MyStyles.xaml"/>
        </ResourceDictionary.MergedDictionaries>
        <Style TargetType="{x:Type igDP:XamDataGrid}" BasedOn="{StaticResource {x:Type igDP:XamDataGrid}}">
          <Setter Property="FontSize" Value="70"/>
        </Style>
      </ResourceDictionary>
     </igDP:XamDataGrid.Resources> 
```

基本上，我想保留 MyStyles.xaml 中 XamDatagrid 样式中定义的所有内容，但我希望将其设置为 70 的字体大小除外。

我似乎无法让它工作。使用上述方法，字体设置为 70，但我丢失了 MyStyles 中定义的其他设置（例如事件处理和字体系列）。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:50:26.243

（从上面的评论中提取答案。）

为了覆盖样式，我建议以下内容：

在中定义 2 种样式`MyStyles.xaml`：一个包含样式的命名样式，以及仅基于命名样式的未命名样式（这将是默认样式）

```
<Style x:Key="XamDataGridDefaultStyle" TargetType="{x:Type igDP:XamDataGrid}">
    <Setter Property="FontSize" Value="10" />
    <Setter Property="FontFamily" Value="Arial" />
    <EventSetter Event="CellUpdating" Handler="grid_CellUpdating"/>
</Style>

<Style TargetType="{x:Type igDP:XamDataGrid}"
       BasedOn="{StaticResource XamDataGridDefaultStyle}"/> 
```

这将为所有视图定义所需的默认样式。

对于需要自定义的视图资源，定义以下覆盖：

```
<Style TargetType="{x:Type igDP:XamDataGrid}"
       BasedOn="{StaticResource XamDataGridDefaultStyle}">
    <Setter Property="FontSize" Value="70"/>
</Style> 
```

您可能需要`MyStyles.xaml`在自定义视图的资源中引用合并字典`StaticResource`才能工作。

# c - 如何在 NIOS II 上加载图像？

> ID：12167215
> 
> 赞同：1
> 
> 时间：2012-08-28T20:41:19.413
> 
> 标签：c, nios

好吧，我目前正在使用 NIOS II，Quartus II 12.0 并且我面临一些问题。

我想知道如何在 Nios II 上操作图像，如果有任何库可以让我这样做，比如写下图片、读取像素，以及如果可能的话读取图像。

即使您不知道如何加载图像，但您知道我可以在其中使用的图形库，请告诉我。

谢谢，圭亚基。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T05:32:40.517

有描述 Nios II VGA 控制器的[在线文本。](http://www.scribd.com/doc/73916393/Embedded-SoPC-Design-With-Nios-II-Processor-and-VHDL-Examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T03:33:22.477

我使用了 DE2-115 DVD 中的 Demonstration 项目并获得了一个 FAT 库，现在我可以打开文件了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-28T13:27:02.023

您可以在 niosii bsp 中使用只读 zip 文件系统库。它要求图像需要存储在闪存中。您可以使用基于 c 的文件操作函数来读取图像

# c++ - 几个函数的指针

> ID：12167220
> 
> 赞同：7
> 
> 时间：2012-08-28T20:41:45.737
> 
> 标签：c++, c

是否可以保证仅通过名称（也不是参数和返回类型）不同的函数不能在 C 和 C++ 中共享相同的地址？我在标准中没有看到任何关于它的内容。

```
#include <cassert>

void foo() {}

void bar() {}

int main()
{
    assert(foo != bar);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T20:52:19.480

C++11 标准说

> **5.10 相等运算符**
> 可以比较相同类型的指针（指针转换后）是否相等。相同类型的两个指针比较相等当且仅当它们都为空、都指向相同的函数或都表示相同的地址 (3.9.2)。

如果您没有任何指向函数的指针，它们可能具有相同的地址，但我们不知道。如果要*比较*指向两个不同函数的指针，它们不能比较相等。

* * *

造成混淆的一个原因可能是已知 MSVC 编译器会组合模板函数的代码，而这些模板函数恰好为不同类型（如`int`和`long`）生成相同的机器代码。这是不合规的。

但是，这是针对具有*不同*签名的函数，而不是这个问题的确切含义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T20:48:30.667

是的。C99 6.5.10:6

> **两个指针比较相等当且仅当**两者都是空指针，**都是指向同一个**对象（包括指向对象的指针和其开头的子对象）或**函数**的指针，...</p>

编辑：本段的其余部分，因为事实证明它具有一定的重要性：

> 两者都是指向同一数组对象最后一个元素之后的指针，或者一个是指向一个数组对象末尾之后的指针，另一个是指向恰好紧随第一个数组对象的不同数组对象开头的指针地址空间中的数组对象。

我从中得到的：

*   应用到错误的操作数上的相等，用很多话来说，是未指定的。由于无关的原因，它可能是偶然的，但是当你使用它错误时它不是未定义的，当你使用它错误时它`<`是未定义的。
*   据我所知，本段的其余部分不适用于函数，因为函数既不是对象，也不能是数组的元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T20:49:39.690

许多打开优化的编译器会使两个函数具有相同的地址。例如，来自[msdn](http://msdn.microsoft.com/en-us/library/bxwfs976%28v=vs.110%29.aspx)：

> /OPT:ICF**可能导致将相同的地址分配给不同的函数**或只读数据成员（使用 /Gy 编译的 const 变量）。因此，/OPT:ICF 可以破坏依赖于函数地址或只读数据成员不同的程序。有关详细信息，请参阅 /Gy（启用功能级链接）。

**ICF** : 相同的代码折叠

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T20:47:30.993

实施细节。

> （C99，5.1.2.3p1）“本国际标准中的语义描述描述了抽象机器的行为，其中优化问题无关紧要。”

# ruby-on-rails - 在 Rails 资产管道中以编程方式排除/包含某些 js 文件/目录的方法

> ID：12167221
> 
> 赞同：1
> 
> 时间：2012-08-28T20:41:51.223
> 
> 标签：ruby-on-rails, asset-pipeline

我尝试了多种方法，通过 .erb 扩展名，在 application.js 文件中使用 //= require xyz 包含/排除文件。但是它不起作用，它只是将要求作为注释。基本上我想在 Rails.env.test 时包含一个 js 目录？是真的，否则我不想包括它。有没有办法做到这一点？

```
 <% if Rails.env.test? %>
    //= require mapper.base
    //= require mapper.google
    <% end %> 
```

# asp.net-mvc-3 - 单个属性未绑定到 HttpPost

> ID：12167227
> 
> 赞同：0
> 
> 时间：2012-08-28T20:42:13.627
> 
> 标签：asp.net-mvc-3, c#-4.0

我正在我们公司的第一个 MVC3 项目上工作，但我遇到了障碍。似乎没有人能弄清楚发生了什么事。

我在页面上使用了一个复杂的模型：

```
public class SpaceModels : List<SpaceModel> {
    public bool HideValidation { get; set; }
    [Required(ErrorMessage=Utilities.EffectiveDate + Utilities.NotBlank)]
    public DateTime EffectiveDate { get; set; }

    public bool DisplayEffectiveDate { get; set; }
} 
```

在控制器中，我创建了一个带有空白 SpaceModels 的 SpaceModels 对象，用于合并 Spaces 时（这将是目标 Space）。

```
// Need a list of the models for the View.
SpaceModels models = new SpaceModels();
models.EffectiveDate = DateTime.Now.Date;
models.DisplayEffectiveDate = true;
models.Add(new SpaceModel { StoreID = storeID, SiteID = siteID, IsActive = true });

        return View("CombineSpaces", models); 
```

然后在视图中，我使用该 SpaceModels 对象作为模型，并以为生效日期制作文本框的形式：

```
@model Data.SpaceModels

@using (Html.BeginForm("CombineSpaces", "Space")) {
    <div class="EditLine">
        <span class="EditLabel LongText">
            New Space Open Date
        </span>
        @Html.TextBoxFor(m => m.EffectiveDate, new {
                        size = "20",
                        @class = "datecontrol",
                        // Make this as a nullable DateTime for Display purposes so we don't start the Calendar at 1/1/0000.
                        @Value = Utilities.ToStringOrDefault(Model.EffectiveDate == DateTime.MinValue ? null : (DateTime?)Model.EffectiveDate, "MM/dd/yyyy", string.Empty)
        })
        @Html.ValidationMessageFor(m => m.EffectiveDate)
    </div>

    <hr />        

    Html.RenderPartial("_SpaceEntry", Model);
} 
```

被渲染的局部视图遍历所有 SpaceModel，并创建一个包含各个 SpaceModel 对象的 Edit 字段。（当空间被细分时，我使用列表来使用相同的视图。）

然后在 HttpPost 上，EffectiveDate 仍然回到它的 DateTime.MinValue 默认值：

```
[HttpPost]
public ActionResult CombineSpaces(SpaceModels model, long siteID, long storeID, DateTime? effectiveDate) {
// processing code
} 
```

我添加了那个日期时间？effectiveDate 参数来证明更改时的值确实会返回。我什至尝试将 TextBox 的渲染移到 _SpaceEntry 部分视图中，但那里也没有任何效果。

我也尝试使用`@Html.EditorFor(m => m.EffectiveDate)`代替`@Html.TextBoxFor()`，但仍然返回 DateTime.MinValue。（顺便说一句，我的老板不喜欢放弃对渲染的控制`@Html.EditorForModel`。）

必须有一些我想念的简单的东西。如果您需要其他任何东西，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:20:53.900

查看[源代码](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/e7526daecf9d#src/System.Web.Mvc/DefaultModelBinder.cs)，`DefaultModelBinder`特别是`BindComplexModel()`，如果它检测到集合类型，它将绑定单个元素，但不会尝试绑定列表对象本身的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T16:53:25.250

模型绑定所做的是尝试将视图中的事物或元素的名称与模型中的属性或操作方法中的参数相匹配。您不必传递所有这些参数，您所要做的就是将它们添加到您的视图模型中，然后调用`TryUpdateModel`您的操作方法。我不确定您要使用 SpaceModel 或 List 做什么，但我认为不需要从 List 继承。我相信你有充分的理由这样做。这是我将如何做到的。

视图模型

```
public class SpacesViewModel
{
    public DateTime? EffectiveDate { get; set; }
    public bool DisplayEffectiveDate { get; set; }
    public List<SpaceModel> SpaceModels { get; set; }
} 
```

GET 操作方法

```
[ActionName("_SpaceEntry")]
public PartialViewResult SpaceEntry()
{
    var spaceModels = new List<SpaceModel>();
    spaceModels.Add(
        new SpaceModel { StoreID = storeID, SiteID = siteID, IsActive = true });

    var spacesVm = new SpacesViewModel
    {
        EffectiveDate = DateTime.Now,
        DisplayEffectiveDate = true,
        SpaceModels = spaceModels
    };

    return PartialView("_SpaceEntry", spacesVm);
} 
```

POST 动作方法

```
[HttpPost]
public ActionResult CombineSpaces() 
{
    var spacesVm = new SpacesViewModel();

    // this forces model binding and calls ModelState.IsValid 
    // and returns true if the model is Valid
    if (TryUpdateModel(spacesVm))
    {
        // process your data here
    }
    return RedirectToAction("Index", "Home");
} 
```

和视图

```
<label>Effective date: </label>
@Html.TextBox("EffectiveDate", Model.EffectiveDate.HasValue ?
    Model.EffectiveDate.Value.ToString("MM/dd/yyyy") : string.empty, 
    new { @class = "datecontrol" }) 
```

有时您需要使用隐藏字段显式绑定表单数据，例如

```
@Html.HiddenField("EffectiveDate", Model.EfectiveDate.) 
```

为了绑定 SpaceModel 对象的属性，您可以将 SiteID 等单个属性添加到视图模型或为单个 SpaceModel 添加 SpaceModel 属性。如果要成功绑定复杂模型，请将其添加为`Dictionary`填充键值对而不是列表。然后，您应该将字典添加到视图模型。您甚至可以为分层数据添加字典字典。

我希望这有帮助 ：）

# python - argparse 通过全局选项增加子命令默认值

> ID：12167228
> 
> 赞同：5
> 
> 时间：2012-08-28T20:42:22.713
> 
> 标签：python, arguments, default, command-line-arguments, argparse

我希望能够使用 argparse.ArgumentParser 对象中的全局选项来覆盖/增加子命令的默认值。

一个示例是显示的帮助反映了全局更新，即，对于以下玩具示例：

```
import argparse
import os
import sys

# Global parser and options.
parser = argparse.ArgumentParser(
    formatter_class=argparse.ArgumentDefaultsHelpFormatter)

parser.add_argument("--user", 
                    dest="user", 
                    default=os.environ.get("USER"),
                    help="Override the setting of the $USER variable.")

# Sub-command parser and options.
subparsers = parser.add_subparsers()

command = subparsers.add_parser(
    "command",
    formatter_class=argparse.ArgumentDefaultsHelpFormatter)

command.add_argument("--config",
                     dest="config",
                     default="~%s/config" % os.environ.get("USER"),
                     help="The config file.")

options = parser.parse_args() 
```

理想情况下，当我在帮助模式下运行它时，我会得到，

```
> python example.py --user thing command --help
usage: example.py command [-h] [--config CONFIG]

optional arguments:
  -h, --help       show this help message and exit
  --config CONFIG  The config file. (default: ~thing/config) 
```

即，配置文件路径是用户特定的（事物）。我意识到我可以将默认配置更改为`"~%(user)s/config"`，然后在运行时使用 options 命名空间解决这个问题，但是我希望帮助更明确。

我收集另一种解决方案是尝试解析参数一次以获得全局选项，即

```
if "--help" in sys.argv:

    # Parse the command minus the help to obtain the global options. 
    args = sys.argv[1:]
    args.remove("--help")

    # Update the defaults with the global options.
    options = parser.parse_args(args) 
    command.set_defaults(config="~%s/config" % options.user)

    # Re-parse the options.
    parser.parse_args() 
```

虽然这看起来有点 hacky。有更好的方法/解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T21:20:31.553

在定义全局选项之后，但在定义子命令之前，调用`parse_known_args`以找出值`--user`是什么。然后，在调用解析命令行上的所有选项之前，完成子解析器命令的定义，使用 的值`--user`定义默认值。`--config``parse_args`

这与您的替代方案略有不同，但它将所有命令行处理保留在`argparse`对象内。

（我稍微缩减​​了你的代码只是为了缩短这个答案。）

```
import os
import argparse

# Global preparser and options.
preparser = argparse.ArgumentParser(add_help=False)
preparser.add_argument("--user", dest="user", default=os.environ.get("USER"))

# ****** NEW *******
options, _ = preparser.parse_known_args() # Ignore what we haven't defined yet
user = options.user                       # Use this to define the default of --config

parser = argparse.ArgumentParser(parents=[ preparser ], add_help=True,
                   formatter_class=argparse.ArgumentDefaultsHelpFormatter)

# Sub-command parser and options.
subparsers = parser.add_subparsers()

command = subparsers.add_parser("command")

# ****** MODIFIED *******
command.add_argument("--config", dest="config", default="~%s/config" % (user,))

options = parser.parse_args() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T03:18:43.410

这是一个在运行时直接修改帮助行的解决方案。它也可以修改`os.environ`或其他一些全局的，但我会保持简单。关键是将创建的操作分配给`add_argument('--config'...)`变量。 `help`只是该变量的一个属性。您可以自由修改。

```
class FooAction(argparse.Action):
    def __call__(self, parser, namespace, values, option_string=None):
        config.help = 'new user (%s)'% values
        setattr(namespace, self.dest, values)

parser = argparse.ArgumentParser()
parser.add_argument('--user',action=FooAction)
sub = parser.add_subparsers()
cmd = sub.add_parser('cmd')
config = cmd.add_argument('--config',help='initial help')
config.help = 'default help' # alt way of setting 'help'
# print config  # to see other attributes of the config action
args = parser.parse_args()
print args 
```

调用`cmd -h`我们得到`default help`

```
$ python stack12167228.py cmd -h
usage: stack12167228.py cmd [-h] [--config CONFIG]

optional arguments:
  -h, --help       show this help message and exit
  --config CONFIG  default help 
```

调用时`--user xxx cmd -h`，帮助是自定义的

```
$ python stack12167228.py --user xxx cmd -h
usage: stack12167228.py cmd [-h] [--config CONFIG]

optional arguments:
  -h, --help       show this help message and exit
  --config CONFIG  new user (xxx) 
```

# silverlight - 组合框的 Silverlight 控件模板

> ID：12167232
> 
> 赞同：0
> 
> 时间：2012-08-28T20:42:48.320
> 
> 标签：silverlight

使用 Silverlight 5.0，我在网格中有一组复选框，如下所示：

```
<Border Grid.Column="1" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,25,10,0" Background="LightGray" Opacity="0.7" >
    <Grid Margin="5" >
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition />
            <RowDefinition />
            <RowDefinition />
            <RowDefinition />
            <RowDefinition />
        </Grid.RowDefinitions>
        <CheckBox Grid.Row="0" Content="Item 1" Margin="0" />
        <CheckBox Grid.Row="1" Content="Item 1A" Margin="20,0,0,0" />
        <CheckBox Grid.Row="2" Content="Item 2" Margin="0" />
        <CheckBox Grid.Row="3" Content="Item 2A" Margin="20,0,0,0" />
        <CheckBox Grid.Row="4" Content="Item 2B" Margin="20,0,0,0" />
        <CheckBox Grid.Row="5" Content="Item 3" Margin="0" />
    </Grid>
</Border> 
```

通过设置Margin，就得到了我想要的效果，就是Item 1A在Item 1下缩进，Item 2A和2B在Item 2下缩进。

然而，这只是一个示例。这些项目还有很多，所以我真的更愿意使用某种绑定来布置它们。

我从一个具有 Name、IsSelected 和 Level（0 表示正常，20 表示缩进）和 xaml 的类开始，如下所示：

```
<Border Grid.Column="1" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,25,10,0" Background="LightGray" Opacity="0.7" >
      <data:DataGrid x:Name="LayerOptionsGrid" AutoGenerateColumns="False" HeadersVisibility="None"> 
          <data:DataGrid.Columns>
              <data:DataGridCheckBoxColumn Binding="{Binding IsSelected}" />                                                     
              <data:DataGridTemplateColumn>
                   <data:DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                             <ContentControl >
                                  <ContentPresenter Content="{Binding Name}" Margin="{Binding Level}" />
                             </ContentControl>
                        </DataTemplate>
                   </data:DataGridTemplateColumn.CellTemplate>
               </data:DataGridTemplateColumn>
           </data:DataGrid.Columns>
       </data:DataGrid>
   </Grid>
</Border> 
```

我得到的是一个复选框和名称的网格，还不错，但是有两个主要问题：1）我没有让 Margin 工作，所以没有缩进和 2）网格的工作方式，我必须单击复选框两次以更改它（我猜是选择一次）。我正在寻找一种更好的方法来获得这个结果：

```
(Checkbox) Item 1
    (Checkbox) Item 1A 
(Checkbox) Item 2
    (Checkbox) Item 2A
    (Checkbox) Item 2B 
```

等等，这是我最初的蛮力方法提供的（尽管缺乏我需要的灵活性）。

注意：如果我提供一个名为 Margin 的厚度属性并在 ContentControl 上添加 Margin="{Binding Margin}" ，我会得到文本的缩进，而不是 CheckBox 的缩进。

我愿意接受任何选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:14:44.487

我在查看问题的单击选择部分时找到了答案：我将整个 CellTemplate 替换为以下 CellEditingTemplate：

```
<data:DataGridTemplateColumn>
    <data:DataGridTemplateColumn.CellEditingTemplate>
        <DataTemplate>
            <CheckBox Margin="{Binding Margin}" IsThreeState="False" IsChecked="{Binding Path=IsSelected, Mode=TwoWay}" Content="{Binding Name}" />
        </DataTemplate>
    </data:DataGridTemplateColumn.CellEditingTemplate>
</data:DataGridTemplateColumn> 
```

我也删除了这条线

```
<data:DataGridCheckBoxColumn Binding="{Binding IsSelected}" /> 
```

解决了这两个问题。

# c# - 为什么我们不能在派生类中使用带参数的构造函数

> ID：12167234
> 
> 赞同：1
> 
> 时间：2012-08-28T20:42:55.030
> 
> 标签：c#, generics, parameters, constructor, derived-class

为什么这是不可能的？使用构造函数参数实例化“DerivedClass”时出现以下编译器错误：

'GenericParameterizedConstructor.DerivedClass' 不包含采用 1 个参数的构造函数

但是调用一个非常相似的方法是有效的。

为什么？

```
class Program
{
    static void Main(string[] args)
    {
        // This one produces a compile error 
        // DerivedClass cls = new DerivedClass("Some value");

        // This one works;
        DerivedClass cls2 = new DerivedClass();
        cls2.SomeMethod("Some value");
    }
}

public class BaseClass<T>
{
    internal T Value;

    public BaseClass()
    {
    }

    public BaseClass(T value)
    {
        this.Value = value;
    }

    public void SomeMethod(T value)
    {
        this.Value = value;
    }
}

public class DerivedClass : BaseClass<String>
{
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T20:45:41.963

构造函数不是继承的——就这么简单。`DerivedClass`包含一个构造函数 - 编译器默认提供的公共无参数构造函数，因为您没有指定任何构造函数。

请注意，这与泛型*无关。*如果`BaseClass`不是通用的，你会看到同样的事情。

虽然很容易为以下内容*提供*构造函数`DerivedClass`：

```
public class DerivedClass : BaseClass<String>
{
    public DerivedClass() : base()
    {
    }

    public DerivedClass(string value) : base(value)
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:46:27.727

派生类需要暴露构造函数

```
public class DerivedClass : BaseClass<String>
{
    public DerivedClass(string str) :base(str) {}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:07:28.250

如果有一种方法可以指示编译器为特定的派生类自动生成精确模仿和包装所有基类的构造函数，这有时会很有帮助。但是，默认情况下会发生这种行为是有问题的。许多派生类期望在创建其类型的实例时调用它们的某些代码。假设一个父类型有两个构造函数：

```
父类型（int foo）{...}
父类型（字符串 foo）{...}

```

派生类型有一个：

```
派生类型（字符串 foo）{...}

```

应该是什么效果`new derivedType(7);`？编译器会知道如何创建`new baseType(7);`，但如果它创建了一个新的“空白”派生类型对象，然后简单地调用父类型构造函数，则结果将是一个`derivedType`从未运行过任何`derivedType`构造代码的对象。虽然有些课程对此没有任何问题（对于此类课程，前面提到的假设功能会有所帮助），但很多课程会。

顺便说一句，受保护的构造函数会出现一个有点相关的问题。在某些 .net 语言中，至少包括当前版本的 C#，如果非抽象类型`Foo`定义了受保护的构造函数，则该构造函数只能用于创建派生类型的实例。在其他语言中，包括当前的 vb.net，派生类型中的代码可以调用基类型的受保护构造函数来创建新的基类型实例。

# c# - listview 持久插入值

> ID：12167235
> 
> 赞同：0
> 
> 时间：2012-08-28T20:43:17.717
> 
> 标签：c#, asp.net, listview

“我有一个 ListView，其中包含要编辑的项目和一个插入项。

插入项模板有几个文本框，但是我想将其中一个文本框设为只读，并在其中保留一个值，该值将在每次插入后持续存在。

```
<InsertItemTemplate>
<tr style="">
<td>
    <asp:Button ID="InsertButton" runat="server" CommandName="Insert" Text="Insert" />
    <asp:Button ID="CancelButton" runat="server" CommandName="Cancel"  Text="Clear" />
</td>
<td>
    <asp:TextBox ID="tc_dateTextBox" runat="server" Text='<%# Bind("tc_date") %>' />
</td>
<td>
    <asp:TextBox ID="tc_costTextBox" runat="server" Text='<%# Bind("tc_cost") %>' />
</td>
<td>
    <asp:TextBox ID="tc_typeTextBox" runat="server" Text='<%# Bind("tc_type") %>' />
</td>
<td>
    <asp:TextBox ID="tc_commentTextBox" runat="server" Text='<%# Bind("tc_comment") %>' />
</td>
<td> &nbsp;</td>
<td>
    <asp:TextBox ID="tc_t_idTextBox" runat="server" Text='<%# Bind("tc_t_id") %>' Width="15" ReadOnly="true"  />
</td>
</tr>
</InsertItemTemplate> 
```

tc_t_idTextBox 是我只读的，希望它成为在每次插入时保持相同值的框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:42:42.853

为了使 TextBox 只读，您需要设置 ReadOnly=true

例子：

```
<asp:TextBox ReadOnly="True"... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T18:19:13.277

我终于想出了如何解决我的问题。我的解决方法是在页面中添加一个隐藏字段。

```
<asp:HiddenField ID="h_tc_t_id_holder" Value="0" runat="server" /> 
```

在后面的代码中，我将值设置为隐藏字段。

```
h_tc_t_id_holder.Value = App_id; 
```

在列表视图中我添加

```
OnPreRender="ListView1_OnPreRender" 
```

在代码隐藏中

```
protected void ListView1_OnPreRender(object sender, EventArgs e)
{   
    ListView1.DataBind();
    ((TextBox)ListView1.InsertItem.FindControl("tc_t_idTextBox")).Text = h_tc_t_id_holder.Value;
} 
```

# javascript - 创建一个与所有浏览器兼容的类似 Web 服务“活动指示器”的指示器

> ID：12167239
> 
> 赞同：0
> 
> 时间：2012-08-28T20:43:27.140
> 
> 标签：javascript, html, css, ajax

我的 Web 服务涉及大量数据库（PHP、mySQL）活动，这使用户盯着空白屏幕数秒。

用户单击 HTML 页面上的链接，该链接调用一个 javascript 函数，该函数又调用 AJAX，该 AJAX 调用一个 PHP 脚本，然后返回。

如果可能的话，我想显示一个类似 IOS 的活动指示器，也许作为“子视图”，以向用户显示正在发生的事情。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:46:45.097

您所要做的就是在某个被 AJAX 回调覆盖或删除的地方写下“正在加载...”。

虽然……“很多秒”？我在任何给定时刻都在运行一个拥有数百名用户在线的网站，并且有很多服务器端活动，而且我几乎从来没有获得超过 0.2 秒的页面加载时间......

# visual-studio - 以编程方式在 Visual Studio 中打开远程 url

> ID：12167242
> 
> 赞同：0
> 
> 时间：2012-08-28T20:43:45.827
> 
> 标签：visual-studio, visual-studio-extensions, vsip

有什么方法可以在 Visual Studio 中打开远程 url（即 http url）。

IVsUIShellOpenDocument.OpenStandardEditor方法听起来[很有](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.interop.ivsuishellopendocument.openstandardeditor%28v=vs.80%29.aspx)希望，但它需要一个现有的文档。

有没有人设法让这个工作？

# c# - 使用 Rackspace 上传文件

> ID：12167244
> 
> 赞同：1
> 
> 时间：2012-08-28T20:43:56.067
> 
> 标签：c#, file-upload, restsharp, rackspace, cloudfiles

我在[这里](http://docs.rackspace.com/files/api/v1/cf-devguide/content/Create_Update_Object-d1e1965.html)使用 RestSharp 来使用 Rackspace restful API 。该文档向您展示了如何创建请求，但我看不到我需要在哪里指定数据源（我想上传到机架空间的文件）。

```
 PUT /<api version>/<account>/<container>/<object> HTTP/1.1
  Host: storage.clouddrive.com
  X-Auth-Token: eaaafd18-0fed-4b3a-81b4-663c99ec1cbb
  ETag: 8a964ee2a5e88be344f36c22562a6486
  Content-Length: 512000
  X-Object-Meta-PIN: 1234 
```

这就是我创建请求的方式：

```
string cloudPath = MainContainerName + "/"  + file + "." + "wav";
string localPath =  Path.Combine(System.Web.HttpContext.Current.Server.MapPath("~/Audio/Clean"), file + ".wav");

byte[] data = System.IO.File.ReadAllBytes(localPath);

RackUserAuthToken authUser = CloudLib.RackAuth.AuthenticateUser(userName, userPassword);

//Request

var containers = new RObject();
string svAddress =ConfigurationManager.AppSettings["RackSpaceStorage"];

var restClient = new RestClient();
restClient.BaseUrl = svAddress;
var request = new RestRequest(cloudPath, Method.PUT);
request.AddHeader("X-Auth-Token", authUser.AuthToken);
//request.AddHeader("ETag", localPath);
request.AddHeader("Content-Length",data.Length.ToString());
request.RequestFormat = DataFormat.Json;
var response = restClient.Execute(request); 
```

回应是：

```
[{
"bytes": 0,
"content_type": "audio\/x-wav",
"hash": "d41d8cd98f00b204e9800998ecf8427e",
"last_modified": "2012-08-29T17:21:23.423150",
"name": "newTest.wav"
}] 
```

因此文件被创建但文件中没有任何内容，因为大小为 0 字节。

任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:50:04.500

```
request.AddFile(localPath); 
```

来自[http://restsharp.org/](http://restsharp.org/)

# delphi - 如何消除Delphi中的重复常量？

> ID：12167245
> 
> 赞同：1
> 
> 时间：2012-08-28T20:44:00.903
> 
> 标签：delphi

我有使用两个常量的代码，每个常量都以不同的方式描述数组的大小：

```
const  ArraySize = 1024;
       ArrayBits = 10;    //2^10 = 1024 bits 
```

我如何用另一个来表达其中一个？编译器不允许在常量中使用 Log2 或 LdExp。

任何版本的 Delphi 的答案都可以。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T20:46:59.087

好吧，你可以这样做：

```
const  
  ArrayBits = 10;
  ArraySize = 1 shl ArrayBits; 
```

但我可能会回避这一点。对我来说感觉有点太模糊了。在我看来，在执行算术运算时应该使用算术运算符。

我可能会保留您的代码，并在运行时代码中添加一个断言，表明这两个常量是适当相关的。也用评论记录它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-28T20:46:04.433

```
const
  ArrayBits = 10;
  ArraySize = 1 shl ArrayBits; 
```

a shl b 的值等于 a * 2^b，所以 1 shl ArrayBits 等于 2^ArrayBits。

# symfony - Symfony2 ACL 访问多个用户的多个对象

> ID：12167248
> 
> 赞同：5
> 
> 时间：2012-08-28T20:44:15.200
> 
> 标签：symfony, permissions, acl, symfony-2.1

我正忙于需要一些 ACL 权限的 Symfony2 应用程序。

我是 Symfony2 的新手，所以不确定我是否以正确的方式看待这个问题。

我有多个客户，每个客户都有多个帐户。

我有一个超级管理员 (ROLE_SUPER_ADMIN) 可以访问所有客户和所有帐户。然后我有一个管理员角色 (ROLE_ADMIN)，它只被允许访问特定客户端和该客户端的所有帐户。然后是代理（ROLE_AGENT），它应该只对客户的某些帐户具有权限。

我在 symfony 文档中看到要让用户访问特定对象，我可以使用以下代码：

```
// creating the ACL
$aclProvider = $this->get('security.acl.provider');
$objectIdentity = ObjectIdentity::fromDomainObject($account);
$acl = $aclProvider->createAcl($objectIdentity);

// retrieving the security identity of the currently logged-in user
$securityContext = $this->get('security.context');
$user = $securityContext->getToken()->getUser();
$securityIdentity = UserSecurityIdentity::fromAccount($user);

// grant owner access    
$acl->insertObjectAce($securityIdentity, MaskBuilder::MASK_OWNER);
$aclProvider->updateAcl($acl); 
```

所以在创建新帐户时，我可以让当前登录的用户访问新创建的帐户。但是，我如何授予客户端访问帐户的所有其他用户的访问权限？

我不想遍历所有用户并为每个用户运行上述代码。

因此，例如在查看所有客户端时，我需要知道用户可以访问哪些客户端，或者在查看帐户时，我需要知道用户可以访问哪些帐户。

此外，当向客户端添加新用户时，用户自动需要访问该客户端的所有帐户。

作为旁注，我只需要知道用户是否有权访问帐户/客户端。如果用户有权访问，那么他们将被自动允许查看/编辑/删除等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T10:31:58.733

对于这种情况，我使用了一个自定义安全服务来验证实体之间的多对多关系。这不是理想的决定，但请记住。

首先，我们需要制作将在每个控制器操作时触发的侦听器。

```
class SecurityListener
{
    protected $appSecurity;

    function __construct(AppSecurity $appSecurity)
    {
        $this->appSecurity = $appSecurity;
    }

    public function onKernelController(FilterControllerEvent $event)
    {
        $c = $event->getController();

        /*
         * $controller passed can be either a class or a Closure. This is not usual in Symfony2 but it may happen.
         * If it is a class, it comes in array format
         */
        if (!is_array($c)) {
            return;
        }

        $hasAccess = $this->appSecurity->hasAccessToContoller($c[0], $c[1], $event->getRequest());

        if(!$hasAccess) {
            throw new AccessDeniedHttpException('Access denied.');
        }

    }
} 
```

在服务中，我们可以访问请求、控制器实例和被调用的操作。所以我们可以决定是否有用户访问权限。

```
class AppSecurity
{
    protected $em;
    protected $security;
    /** @var $user User */
    protected $user;

    public function __construct(EntityManager $em, SecurityContext $security)
    {
        $this->em = $em;
        $this->security = $security;

        if($security->getToken() !== null && !$security->getToken() instanceof AnonymousToken) {
            $this->user = $security->getToken()->getUser();
        }
    }

    /**
     * @param $controller
     * @param string $action
     */
    public function hasAccessToContoller($controller, $action, Request $request)
    {
        $attrs = $request->attributes->all();
        $client = $attrs['client'];

        /* db query to check link between logged user and request client */
    }
} 
```

如果您使用非常讨厌的注释，`ParamConverter`您可以轻松地从请求中提取准备使用的实体。

# awk - 组合多个 awk 命令

> ID：12167250
> 
> 赞同：6
> 
> 时间：2012-08-28T20:44:25.797
> 
> 标签：awk

假设以下输入：

```
$ cat example
{many lines of text}

Col1 Col2  Col3
foo  bar   2 
bar  baz   3
baz  bar   8
bar  foo   0
foo  baz   9
baz  bar   3

{many more lines of text} 
```

以下两个 awk 片段解析出我所追求的数据：

```
cat example | awk -v 'RS=\n\n' '/^Col1 /' | awk '$2 == "bar" && $3 > 1 {print $1}'
foo
baz
baz 
```

如何将这两个片段组合成一个 awk，例如

```
awk '
...
...
...
' example 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T21:18:11.630

你可以做：

```
awk '/^Col1 /,/^$/{ if( $2 == "bar" && $3 > 1 ) print $1}' example 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T21:11:35.297

这似乎有效。

```
gawk '/^$/{getline;if(/^Col1/){doit=1}else{doit=0;}} doit && $2=="bar" && $3>1 {print $1}' example 
```

用注释分解成可读的块，这是：

```
/^$/ {                      # Look for a blank line
  getline;                  # Get the next line
  if (/^Col1/) {            # See if your column heads exist.
    doit=1                  # If they do, set a boolean to true
  } else {
    doit=0;                 # Otherwise, false.
  }
}

doit && $2=="bar" && $3>1 { # Check the boolean AND your conditions, then
  print $1                  # print.
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T20:51:40.983

使用标志，当找到“Col1”作为第一列时将其设置，并在设置后找到空行时将其重置。在此之间，检查最后一个管道的状况：

```
awk '
    $1 == "Col1" { 
        block = 1; 
    } 
    block == 1 && $2 == "bar" && $3 > 1 { 
        print $1; 
    } 
    block == 1 && $0 ~ /^[[:blank:]]*$/ { 
        exit 0; 
    }
' infile 
```

输出：

```
foo
baz
baz 
```

# jquery - 使用 Jquery，从 html 表中连续读取第三列的最佳方法是什么

> ID：12167251
> 
> 赞同：1
> 
> 时间：2012-08-28T20:44:26.283
> 
> 标签：jquery, html, html-table

我有这段代码可以读取 html 表中的第一个值

```
var firstNameinFirstCol = $(this).parents('tr:first').find('td:first').text(); 
```

这项工作很棒，但现在我需要读取同一行中第三列的东西。像这样的东西

```
var lastNameinThirdCol = $(this).parents('tr:first').find('td:third').text(); 
```

Jquery 是否支持类似的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T20:45:40.877

如何使用[`closest`](http://api.jquery.com/closest/)（而不是`parents`）和[`:eq()`](http://api.jquery.com/eq-selector/)？

```
var lastNameinThirdCol = $(this).closest('tr').find('td:eq(2)').text(); 
```

# tfs - 如何在 TFS 2012 中进行简单的跨项目搜索？

> ID：12167253
> 
> 赞同：3
> 
> 时间：2012-08-28T20:44:44.113
> 
> 标签：tfs, tfs-web-access

我们计划将我们的项目（包括缺陷数据库）迁移到 TFS。我看到我可以创建一个跨项目的工作项查询，但“快速搜索”字段似乎不支持跨项目搜索。实现这一目标的最佳方法是什么？我们有“轻量级用户”，他们只想进入并在所有项目中搜索某些关键字。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T23:57:01.220

在新的查询编辑器中，右键单击 Project 子句，然后选择 Delete Clause。然后，当您运行查询时，您会看到所有内容。结果没有“项目”列。您可以单击列选项，然后选择“所有项目”。然后选择“团队项目”并将其推到右侧。这将显示该项目属于哪个项目。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T01:16:23.880

无法跨项目搜索，因为在服务器上运行搜索查询时，Web Access 总是将搜索限制在当前项目。

我可以建议的唯一解决方案是使用工作项查询并明确指定项目。

# android - 在 Eclipse 中调试期间缺少 AVD

> ID：12167254
> 
> 赞同：1
> 
> 时间：2012-08-28T20:44:45.450
> 
> 标签：android, eclipse, debugging, avd

我正在开发一个在*AndroidManifest.xml中具有以下**Sdk*设置的小部件：

 *```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" /> 
```

我已经定义了一些带有 android 4.0.3（英特尔）的设备，一些带有 2.3.3（Arm 和英特尔）的设备，我还有一个 4.0.4 的物理设备： ![开发的 Android 虚拟设备](../Images/7ac59cddc9eca489ac228326dae0af64.png)

当我尝试调试我的小部件应用程序时，唯一可用的设备（正在运行或可以启动）是 4.0.3 和 4.0.4 的设备。我尝试从 AVD Manager 手动启动 2.3.3 的设备之一，然后它出现在正在运行的设备列表中，但是带有红色 X （我认为）意味着存在一些问题： ![在此处输入图像描述](../Images/03fde3d9effd189509b1bc21d70cb8e8.png)

然后我可以在 2.3.3 设备上调试应用程序，但我遇到了一些问题（尚未调查）......你能告诉我 AVD 没有出现在调试窗口中的可能原因吗？

如果我创建另一个`targetSdkVersion=10`显示所有设备的空白项目，但它们也应该显示在我的项目中，给定`minSdkVersion="8"`，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:48:52.433

AVD 未显示在“选择正在运行的 Android 设备”面板中，因为它们尚未启动。您需要在计算机上手动启动 AVD 才能在其上运行您的应用程序。另一种选择是将其设置为在您想要运行应用程序并且没有连接任何设备时自动启动 AVD，但这有时会妨碍您。

此外，红色 X 通常是因为您正在为高于设备运行版本的 Android 版本构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:48:12.227

我有同样的问题。唯一有帮助的是升级 ADT/SDK。如果您确实想测试您的应用程序，请在 AVD 管理器中启动模拟器并等待它启动。然后，您将能够在按“运行”时选择它。

红色 X 不是问题。这只是意味着它不符合应用程序的构建目标。哪个...如果您正在开发，您应该针对最高版本。*

# javascript - 如何获取范围内的 Facebook 地点列表

> ID：12167258
> 
> 赞同：0
> 
> 时间：2012-08-28T20:45:05.183
> 
> 标签：javascript, facebook, facebook-fql

我需要接收给定范围内的 facebook 位置列表（由 NE 和 WS 坐标定义）

我从 javascript 应用程序调用以下 fql.query：

```
 FB.api({
    method: "fql.query",

    query: "SELECT name,description,geometry,latitude,longitude,checkin_count,display_subtext FROM place WHERE latitude < '" + bounds.getNorthEast().lat() + "' and longitude < '" + bounds.getNorthEast().lng() + "' and latitude > '" +  bounds.getSouthWest().lat() + "' and longitude > '" +  bounds.getSouthWest().lng() +"'"
  },
  function(response) {
     /// 
 } 
```

但我收到错误 604

```
Your statement is not indexable. The WHERE clause must contain an indexable column. Such columns are marked with * in the tables linked from http://developers.facebook.com/docs/reference/fql 
```

据我所知，`place`表[http://developers.facebook.com/docs/reference/fql/place/](http://developers.facebook.com/docs/reference/fql/place/)中唯一的索引列是`page_id`. 但我看不出有什么办法可以`page_id`从其他桌子上得到这个。

有没有（可能更简单）的方式来接收给定范围内的 facebook 位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:01:57.593

你是对的，因为这些列没有被索引，所以不能使用 FQL 表。
但是您可以尝试调用 Graph API 来搜索特定位置内的地点。
例如 - [https://graph.facebook.com/search?type=place¢er=37.76,-122.427&distance=1000&access_token=](https://graph.facebook.com/search?type=place&center=37.76,-122.427&distance=1000&access_token=) ...
这来自此处的 Graph API 文档 - [https://developers.facebook.com/docs/参考/api/](https://developers.facebook.com/docs/reference/api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:45:58.757

我是用 f​​ql 做的，我受到这个答案的启发：

[Facebook 地点：按距离排序结果](https://stackoverflow.com/questions/8166500/facebook-places-order-results-by-distance?rq=1)

我不是在界限内搜索，而是在距离中心点的距离内搜索，而是使用 fql.query 语言：

```
 FB.api({
      method: "fql.query",
      query: "SELECT page_id, name, description, latitude, longitude, checkin_count, distance(latitude, longitude, '"  + centerlat + "', '" + centerlon + "') FROM place WHERE distance(latitude, longitude, '" + centerlat + "', '" + centerlon + "') < '" + distance +"'" 
      },
      function(response) {

      }); 
```

它正是我需要的——给了我可以使用的地方列表。

# python - 将 Python 环境迁移到新的操作系统安装

> ID：12167261
> 
> 赞同：4
> 
> 时间：2012-08-28T20:45:29.023
> 
> 标签：python, windows, copy, installation

我已经重新安装了我的操作系统（从 Windows XP 移动到 Windows 7）。我已经重新安装了 Python 2.7。

但是我在旧环境中安装了很多软件包。（Django、sciPy、jinja2、matplotlib、numpy、networkx，仅举一个视图）

我的旧 Python 安装仍然在数据分区上，所以我想知道是否可以将旧 Python 库文件夹复制粘贴到新安装上？还是我需要重新安装每个软件包？

软件包是否在注册表、系统变量或类似物中保留任何信息？

它取决于包吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:06:03.810

这就是您必须能够对项目进行布局的地方，因此需要专门的工具。

通常，Python 包不会做诸如处理注册表之类的奇怪事情（除非它们是通过 MSI 安装程序打包的）。问题可能从包含 C 扩展的包开始，因此迁移到另一个版本的操作系统或从 32 位架构到 64 位架构将需要重新编译/重建这些。因此，最好将所有软件包重新安装到新系统，如下所述。

您的需求可能会有所不同，但您绝对必须选择构建环境的方式。如果您没有并且计划拥有大量项目，您可以考虑以下第一种方法，第二种方法更有可能为不同项目或同一项目的不同版本设置开发环境。

1.  **全局环境**（您系统中的 Python 安装以及已安装的软件包）。

    在这里你可以考虑使用[pip](http://www.pip-installer.org/en/latest/index.html)。在这种情况下，您的项目可以拥有包含项目所需的所有包的[需求文件。](http://www.pip-installer.org/en/latest/requirements.html)基本上，需求文件是一个包含包名称的文本文件（在 PyPI 及其版本上）。

2.  **隔离环境**。它可以使用特殊工具或专门组织的路径来实现。

    在这里 pip 可以与[virtualenv](http://www.virtualenv.org/en/latest/index.html)优雅地结合起来。这种方式被很多开发者强烈推荐（我必须提醒一下，即将发布的 Python 3.3 包含 virtualenv 作为标准库的一部分）。这种方法假设使用自己的 Python 解释器实例和已安装的包创建虚拟 shell。

    实现隔离环境的另一种流行工具称为 buildout。它将您的项目源代码和依赖项布置在一个路径中，因此您可以实现与 virtualenv 创建相同的效果。buildout 的巨大优势在于它建立在可插拔配方（实现不同常见项目部署任务的代码片段）的想法之上，并且互联网上有数百个稳定可靠的配方。

    virtualenv 和 buildout 都可以帮助您在安装依赖项时消除头痛，并解决同一包的不同版本保存在一台机器上的问题。

选择你的命运...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T22:32:23.037

对这个问题的简短回答是“不”，因为包可以在安装时执行任意代码，并在系统上的任何地方做他们想做的任何事情。

只需重新安装所有这些。

# javascript - 将 json 命令发送到本地应用程序，该应用程序通过 Web 浏览器中的 javascript 侦听 TCP 端口 5500

> ID：12167263
> 
> 赞同：0
> 
> 时间：2012-08-28T20:45:33.690
> 
> 标签：javascript, json, tcp, web

我有一个侦听 TCP 端口号 5500 的应用程序，并有一个响应 json 命令的 API。我要做的就是通过 JavaScript 从 Web 浏览器向应用程序发送 json 消息，并从应用程序接收 json 响应。

我曾尝试使用 JQuery 这样做，如下所示：

```
<!DOCTYPE html>
<html>
<head>
   <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
   <form action="/" id="searchForm">
     <input type="submit" value="Call" />
   </form>
<!-- the result of the search will be rendered inside this div -->
<div id="result"></div>

<script>
 /* attach a submit handler to the form */
  $("#searchForm").submit(function(event) {

    /* stop form from submitting normally */
    event.preventDefault(); 

   /* get some values from elements on the page: */
   var $form = $( this ),
     term = '{"type" : "command","command" : "call","target" :"demo@vsee.com"}',
     url = "http://localhost:5500";

   /* Send the data using post and put the results in a div */
   $.post( url, term);

});
</script> 
```

但它不起作用，

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:26:49.647

假设您的应用程序已成功发送响应，您需要对其进行处理。尝试这样的事情：

```
$.post( url, term, function(response){
    // I'm assuming you're getting a plain text response
    // If it's JSON, you'll want to parse it first
    $('#result').text(response);
}); 
```

# ruby-on-rails - 使用模板创建 Rails 项目的问题

> ID：12167271
> 
> 赞同：3
> 
> 时间：2012-08-28T20:45:53.627
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试使用[此处的模板创建项目](https://github.com/RailsApps/rails3-application-templates/blob/master/rails3-bootstrap-devise-cancan-template.rb)

但是当我试图执行时

```
rails new app -m https://raw.github.com/rails3-application-templates/blob/master/rails3-bootstrap-devise-cancan-template.rb -T 
```

它说

```
/Users/alex/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find railties (>= 0) amongst [bigdecimal-1.1.0, io-console-0.3, json-1.5.4, minitest-2.5.1, rake-0.9.2.2, rdoc-3.9.4] (Gem::LoadError)
    from /Users/alex/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
    from /Users/alex/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems.rb:1231:in `gem'
    from /Users/alex/.rvm/gems/ruby-1.9.3-p194/bin/rails:18:in `<main>'
    from /Users/alex/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
    from /Users/alex/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>' 
```

我用谷歌搜索了这个问题，在stackoverflow上找到了几个答案，但没有任何帮助。我尝试重新安装 rails\ruby、rvm、设置 ruby​​ 的默认版本等等。知道要尝试什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T21:12:29.490

模板已弃用，似乎不起作用。页面上是模板的弃用消息，[请参见此处](https://github.com/RailsApps/rails3-application-templates)。请尝试使用[Rails Composer](http://railsapps.github.com/rails-composer/)。

# android - 减小 TimePicker 大小

> ID：12167273
> 
> 赞同：3
> 
> 时间：2012-08-28T20:46:07.183
> 
> 标签：android, datapicker

我想创建一个应用程序，但时间选择器太大。我想让它变小并尝试调整它的大小，但是当我这样做时，我减少了一部分时间选择器，有没有办法让它变小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T21:41:55.667

Android 允许用户选择日期和时间作为准备使用的对话框。您不需要在 XML 中包含选择器

检查这个[Android 选择器](http://developer.android.com/guide/topics/ui/controls/pickers.html)

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-13T22:09:56.333

尝试在受限容器内使用权重总和（例如通过屏幕大小或强制填充）。我已经在[另一个线程](https://stackoverflow.com/a/33702510/2584698 "另一个线程")中发布了它是如何为我工作的。

# php - 是否可以在 PHP 函数/方法中使用接口参数

> ID：12167274
> 
> 赞同：1
> 
> 时间：2012-08-28T20:46:11.673
> 
> 标签：php, interface

我想知道是否可以在 PHP 函数/方法中使用接口参数。

我习惯在 .Net 中编码，使用 .Net 这是可能的，例如具有以下接口：

```
interface IVehicleDataProvider
{
    public void Create(IVehicle Vehicle);
} 
```

然后我可以在这样的类中实现它：

```
class CarDataProvider : IVehicleDataProvider
{
    public void Create(Car Car)
    {
        //do something
    }
} 
```

或者

```
class TruckDataProvider : IVehicleDataProvider
{
    public void Create(Truck Truck)
    {
        //do something
    }
} 
```

只要 Car 或 Truck 实现 IVehicle 接口。

可以在 PHP 中完成同样的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T20:53:44.783

不，您不能在接口中定义一种类型，而在实现者中定义不同的类型（即使它是子类），实现者必须完全遵循接口。

但即使你定义

```
function create(IVehicle $vehicle); 
```

你仍然可以传入`Car`s 和`Truck`s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:53:15.727

不，它不起作用，因为类中的声明必须与接口声明完全兼容，因此您必须使用 IVehicle 作为参数类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T20:57:44.567

是的，您可以在 PHP 5 中使用接口，尽管它们还相对不成熟。对于上面的示例，您将使用如下内容：

```
interface IVehicleDataProvider
{
    public function create(IVehicle $vehicle);
}

class CarDataProvider implements IVehicleDataProvider
{
    public function create(IVehicle $car) {
        //do something
    }
} 
```

PHP 不支持返回类型声明，因此您不能声明函数 void（尽管您应该在函数文档中记下返回类型）。

您也不能扩展接口，因此如果您声明接口中的`create`函数`IVehicleDataProvider`接受 的实例`IVehicle`，则`CarDataProvider::create`, 函数必须接受 IVehicle 接口的实例。

# jquery - 监控网页的变化

> ID：12167278
> 
> 赞同：1
> 
> 时间：2012-08-28T20:46:40.610
> 
> 标签：jquery, twitter-bootstrap

我有一个表格，它被分成“部分”，可以通过选项卡式格式（选项卡式左侧）访问。

如果该选项卡中的任何项目已更改，我希望能够让该选项卡更改文本颜色。

我正在使用引导框架和 jQuery。

并非所有字段都是文本，有些是单选字段，有些是选择字段。

关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:02:23.330

考虑创建一个自定义事件并使用选项卡中所有文本区域、选择和输入的更改事件来触发它。

```
$(document).ready( function() {
  $('.tab').bind( "tabedited", function(){
        alert("Content edited");
  });

  $('input, textarea, select').change(function () {
      $(this).parent().trigger('tabedited');
  });
});​ 
```

# powershell - 与 Powershell 进行远程目录比较的最佳方法

> ID：12167279
> 
> 赞同：0
> 
> 时间：2012-08-28T20:46:41.017
> 
> 标签：powershell, deployment, scripting

我有 2 个文件夹：

```
$srcPath = \\stagingserver
$destPath = \\productionserver 
```

我想比较这两者以确定 $src 文件夹中的哪些更改尚未推送到生产环境。该项目是超过 100 个目录的约 4000 个文件，总计约 80mb。我目前正在像这样进行哈希比较：

```
$src = Get-ChildItem $srcPath -Recurse
$dest = Get-ChildItem $destPath -Recurse 
$same = Compare-Object $src $dest -Property Name, Length, LastWriteTime -passthru -includeequal -excludeDifferent

$srcTree = Get-ChildItem $src -Recurse -exclude $same | Where-Object {!$_.psiscontainer } | get-hash
$destTree = Get-ChildItem $dest -Recurse -exclude $same | Where-Object {!$_.psiscontainer } | get-hash  

$diff = Compare-Object -ReferenceObject $srcTree -differenceObject $destTree | ? {$_.SideIndicator -eq "<=" } | % {$_.InputObject.Path} 
```

大约需要 5 分钟。我接受它是因为它需要在本地复制所有内容以执行散列。我怎样才能更快地做到这一点？有没有办法为服务器上的每个文件维护一个哈希值？我应该远程执行脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:41:01.357

`robocopy`您可以使用将暂存共享内容同步到生产共享中，而不是比较文件。`/MIR`flag 可用于镜像，即从目标中删除不存在的文件。Robocopy 使用时间戳来确定是否需要复制文件，因此有一些注意事项。

如果需要哈希，您可以在远程服务器上创建一个脚本，将文件哈希存储在 CSV 文件中。之后，导入 CSV 文件并将本地哈希与文件内容进行比较应该很容易。

# android - 为什么我的浏览器不能在片段中工作？

> ID：12167282
> 
> 赞同：3
> 
> 时间：2012-08-28T20:46:49.960
> 
> 标签：android, android-fragments, android-viewpager, actionbarsherlock, viewpagerindicator

我的片段有以下代码。我几乎从一个基本的视图寻呼机示例中得到了这个，并将它拍成一个片段来测试我正在处理的项目。

我正在使用 ACtionBarSherlock 和 viewPagerIndicator 库。下面的 Fragment 包含一个 viewPager，在这个例子中应该在简单的标题字符串之间滑动。

我在活动中尝试了 ViewPager 和 ViewPagerIndicator 的示例，没有问题。但第二次我把它变成了一个片段。BOOM，只是黑屏...没有错误，只是黑屏...我觉得我一定是在膨胀，或者访问布局不正确或其他什么...有什么想法吗？

这是代码：

```
public class TestFragment extends SherlockFragment {

    //~Constants----------------------------------------------

    //~Data Fields--------------------------------------------

    //~Constructors--------------------------------------------
    @Override
    public void onCreate(Bundle savedInstanceState) {

        //Setup view
        super.onCreate(savedInstanceState);
        View view = onCreateView(getLayoutInflater(savedInstanceState), null, savedInstanceState);

        ViewPagerAdapter adapter = new ViewPagerAdapter( this.getSherlockActivity() );
        ViewPager pager = 
            (ViewPager)view.findViewById(R.id.free_time_day_pager);
        TitlePageIndicator indicator = 
            (TitlePageIndicator)view.findViewById(R.id.titles);
        pager.setAdapter( adapter );
        indicator.setViewPager( pager );
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.free_time_fragment_layout, null, false);
        return view;
    }

    //~Methods-------------------------------------------------
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T21:11:50.640

不要`onCreateView`说那是错误的。

`onCreateView`是一个被重写的方法，由`FragmentManger`来处理`Fragment`生命周期。

```
private ViewPager mViewPager;
private TitlePagerIndicator mIndicator;

// Called first
@Override
public void onCreate(Bundle savedInstanceState) {
    //Setup view
    super.onCreate(savedInstanceState);
}

// Called second
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.free_time_fragment_layout, null, false);
    return view;
}

// Called third
@Override
public View onViewCreated(View v){
    super.onViewCreated(v);
    mViewPager = (ViewPager) v.findViewById(R.id.free_time_day_pager);
    mIndicator = (TitlePageIndicator)v.findViewById(R.id.titles);

}

public void onActivityCreated(Bundle bdl){
    super.onActivityCreated(bdl);
    ViewPagerAdapter adapter = new ViewPagerAdapter( getSherlockActivity() );
    mViewPager.setAdapter(adapter);
    mIndicator.setViewPager(pager);
} 
```

另请注意，如果您使用的是 FragmentPagerAdapter，则需要一种特殊的方法来创建 ViewPagerFragment，这有点棘手，但请参阅此[要点。](https://gist.github.com/3405429)

[也可以在此处](https://developer.android.com/reference/android/app/Fragment.html#Lifecycle)阅读有关`Fragment`生命周期的信息。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-18T12:02:20.007

用这个。

```
compile 'com.android.support:appcompat-v7:23.0.1' 
```

为我工作。

# jquery - 如何在jquery中为deg属性设置动画

> ID：12167289
> 
> 赞同：0
> 
> 时间：2012-08-28T20:47:00.993
> 
> 标签：jquery

考虑以下CSS

```
.meter .arrow,.banner2 .meter .arrow {-moz-transform: rotate(8deg);
        -webkit-transform: rotate(8deg); 
```

我想在几秒钟内从 0° 动画到 8°。

这可能吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:49:39.470

您使用这些 CSS 规则定位的浏览器支持 CSS 过渡。在 CSS 中为旋转状态添加一个类，并给 div 一个转换规则：http: [//jsfiddle.net/4JK7q/](http://jsfiddle.net/4JK7q/)。

```
-webkit-transition: -webkit-transform 2s linear; 
```

# java-me - 如何在诺基亚 C6 中模拟摄像头 midlet？

> ID：12167290
> 
> 赞同：3
> 
> 时间：2012-08-28T20:47:03.497
> 
> 标签：java-me, camera, nokia, mmapi

我需要模拟诺基亚默认相机 midlet 的行为。

它适用于诺基亚 C6，我正在用 J2ME 编写它。

我使用 MMAPI，问题是 VideoControl 项目的大小，我做到了，`videoControl.setDisplayFulscreen(true);`但它根本不是全屏，setDisplaySize 方法没有帮助，videoControl 本身的大小大约是显示的三分之一（所需的其余部分displaySize 只是黑色），这是一个代码示例：

```
public CameraCanvas (Evidence_elektromeru midlet, ManagePhotos caller,String name) { 
    super(true);
    this.midlet = midlet;
    this.caller = caller;
    this.name = name;
    this.setFullScreenMode(true);

    try {
        player = Manager.createPlayer("capture://devcam0");
        player.realize();
      //  player.prefetch();
        if (videoControl2 != null) 
                videoControl2.setVisible(false);
        videoControl1 = (VideoControl) player.getControl("VideoControl");
        videoControl1.initDisplayMode(VideoControl.USE_DIRECT_VIDEO,this);
        videoControl1.setDisplayLocation(0, 0);
        videoControl1.setDisplaySize(360,500);
        }catch (MediaException me2) {
            try {
                videoControl1.setDisplayFullScreen(true);
            } catch (Exception e) {}
             }
    catch (Exception e) {}
    finally {
               try {
              player.start();
               } catch (Exception e) {}
              videoControl1.setVisible(true); 

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:58:45.463

尝试使用

```
 mCamera = Manager.createPlayer("capture://video");
 mCamera.realize();
 mCamera.prefetch(); 
```

或者您可以替换 mCamera = Manager.createPlayer("capture://video"); 经过

```
mCamera = Manager.createPlayer("capture://image"); 
```

# vbscript - ArcPad - VBscript - 自动填充属性

> ID：12167296
> 
> 赞同：0
> 
> 时间：2012-08-28T20:47:41.277
> 
> 标签：vbscript, arcgis

我正在使用以下脚本从一层中获取地块和地址信息，以填充新创建要素的属性表。

没有返回错误，但我遇到的问题是recordselect函数的内存中似乎有错误的信息。无论我在哪里放置一个点，它都会给出相同的包裹编号和地址。或者它实际上并没有正确执行 IF 功能。

```
Sub Address

Dim rsCurrentXY
Set rsCurrentXY = Map.Layers("Violations").records
rsCurrentXY.movelast
Dim objXYShape
Set objXYShape = rsCurrentXY.Fields.Shape
Dim pControls
Set pControls= Application.Map.selectionlayer.Forms("EDITFORM").Pages(“PAGE1”).Controls
Dim rsGrid
' Find corresponding map page to the valve point
Set rsGrid = Map.Layers("ACPA_parcels").records
rsGrid.movefirst

Do While Not rsGrid.eof
If rsGrid.fields.shape.Ispointin(objXYShape) Then
pControls("txtAddress").value = rsGrid.Fields("ADD1").Value

Exit Do
End If
rsGrid.Movenext
Loop

' Clean Up
Set rsCurrentXY = Nothing
Set objXYShape = Nothing
Set rsGrid = Nothing
End Sub 
```

（我有另一个名为“PIN”的子程序可以做同样的事情。）当检查员激活自定义表单中各自的编辑框时，我会调用它们。

感谢您的帮助，罗伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T05:58:34.810

通过 Application.Map.selectionlayer.Forms("EDITFORM") 访问 EDITFORM 会有问题。每当使用 EDITFORM 上的控件时，您都应该使用 ThisEvent.Object 来发现所有对象。例如，如果您的事件处理程序是 Page_OnLoad，那么 ThisEvent.Object 将引用您的当前页面。你应该有这样的代码：

```
Dim pPage1
Set pPage1 = ThisEvent.Object
Dim pControls
Set pControls = pPage1.Controls 
```

# css - jQuery UI 和 Bootstrap 主题冲突

> ID：12167297
> 
> 赞同：5
> 
> 时间：2012-08-28T20:47:55.693
> 
> 标签：css, jquery-ui, twitter-bootstrap

我有 jQuery UI 主题和链接到我的页面的 Bootstrap 2.1 css。在我使用 Bootstrap 样式的按钮的情况下，它们上不会显示任何文本。原来是 jQuery UI 主题中的这些行导致了问题：

`.ui-widget input, .ui-widget select, .ui-widget textarea, .ui-widget button { font-family: Verdana,Arial,sans-serif; font-size: 1em; }`

在调试工具中删除时，1em 不再将按钮文本转换为太小以至于不可见。我已经确保 Bootstrap.css 在样式表列表中稍后被链接，因此它具有更多价值，但 jQuery UI 的定义更具体。如何防止 jQuery UI css 数据影响我的引导按钮？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-29T18:19:34.827

尤其是按钮是个问题。jQuery UI 的按钮实现与 Bootstrap 的冲突。如果您想以标准形式使用它们，您可以在小部件初始化之前将以下行添加到您的页面中，以消除冲突：

```
var btn = $.fn.button.noConflict() // reverts $.fn.button to jqueryui btn
$.fn.btn = btn // assigns bootstrap button functionality to $.fn.btn 
```

我只在简单的情况下对此进行了测试，但我认为它通常可以工作。此处使用适当的参考链接描述了该方法：

[http://www.dullsharpness.com/2013/04/29/resolve-jqueryui-and-twitter-bootstrap-button-conflict/](http://www.dullsharpness.com/2013/04/29/resolve-jqueryui-and-twitter-bootstrap-button-conflict/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T03:21:27.373

您可以将两全其美与此主题相结合：http: [//addyosmani.github.com/jquery-ui-bootstrap](http://addyosmani.github.com/jquery-ui-bootstrap)

# function - MatLab 运算符重载

> ID：12167299
> 
> 赞同：0
> 
> 时间：2012-08-28T20:48:10.720
> 
> 标签：function, matlab, object, overloading

> **可能重复：**
> [属性如何在面向对象的 MATLAB 中工作？](https://stackoverflow.com/questions/209005/how-do-properties-work-in-object-oriented-matlab)

我使用 MatLab 已经有一段时间了，但最近才开始使用 OOP。

我有一个简单的链表类（它可以是任何东西）。在类中声明了一些方法。方法是否可以修改调用它们的实例？

`instance.plotData()`不能修改实例的任何属性。

我必须返回该函数的实例才能对实例本身产生实际影响：

```
instance = instance.plotData(); 
```

这看起来真的很麻烦。有没有更好的方法来完成任务？

添加：

```
classdef handleTest < handle

  properties
      number
  end

  methods
      function addNode(this)
          a = length(this);
          this(a+1) = handleTest;
      end
  end
end 
```

如果我打电话：

```
x = handleTest
x.addNode() 
```

然后`x`仍然只有一个节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:40:55.680

一种可能的解决方案是从`handle`类派生，即使用类似的东西

```
classdef YourClass < handle
    function plotData(obj)
        ... modify the obj here ...
    end
end 
```

但是，这也有影响，如果您复制实例，即如果您执行

```
a = YourClass(...);
b = a; 
```

then`b`是**别名**，`a`每当您更改时`a`，您也会修改`b`，反之亦然（这意味着数据仅在后台存储一次）。

有关于句柄类和值类的区别的[Matlab 文档。](http://www.mathworks.de/help/techdoc/matlab_oop/brfylwk-1.html)

# qt - QFileDialog 编码错误（Windows 7）

> ID：12167303
> 
> 赞同：2
> 
> 时间：2012-08-28T20:48:37.233
> 
> 标签：qt, encoding, qfiledialog

当我尝试使用标准文件选择器时：

```
QString fileName = QFileDialog::getOpenFileName(a.allWidgets().first(),
     "Open Image", "C:\\", "Image Files (*.png *.jpg *.bmp)"); 
```

出现错误。我看到这样的消息（对不起，它是俄语）：

![](../Images/7268934149775a5f608347acd29947fd.png)

第一行的翻译是“C:\Users\Василий\Desctop references an inaccessible location”。我认为，用户名“Василий”（俄语字母）中的问题，屏幕截图上没有清楚地写出来。我试图在谷歌中找到解决我的问题的方法，但不幸的是，我没有找到。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-08T14:44:19.767

最近我遇到了同样的问题。当您的主文件夹的名称包含非拉丁符号时，这似乎是 Qt 中的一些错误，导致此错误。

**值得注意的是，如果您在发布**模式下运行应用程序，它将正常工作。我希望这些信息对某人有用。

# javascript - 在jsTree中隐藏复选框

> ID：12167304
> 
> 赞同：2
> 
> 时间：2012-08-28T20:48:41.420
> 
> 标签：javascript, jquery, jstree

我正在使用带有复选框插件的 jsTree 来显示一棵树。我只是使用无序列表（UL，LI）来定义我的树，然后：

```
 $(function() {
        $("#treeId").jstree({
        "themes" : {
            "theme" : "default",
            "dots": true,
            "icons": false
         },
            "plugins": ["themes", "html_data", "checkbox",
                        "ui", "crrm", "hotkeys"]
        });
    }); 
```

我用它来生成树。我需要一些方法来隐藏某些节点上的复选框。理想情况下，我会向不需要复选框的节点添加一个类，然后使用 JavaScript 相应地隐藏它们，但我还没有找到一种方法来做到这一点。一些[解决方案](https://groups.google.com/forum/?fromgroups#!topic/jstree/wLokkEg3eCY%5B1-25%5DO)使用 JSON 属性来识别节点，但由于我没有使用 JSON，我不确定是否可以使用此方法。

我应该提到我的最终目标是隐藏所有非叶节点上的复选框，但基于类的通用解决方案会更有帮助。或者两种解决方案也都很棒:)

谢谢！

麦克风

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T18:04:41.237

如果您没有对功能进行更改，并且只想在视觉上隐藏某些节点的复选框，则应该使用 CSS。

例如，您的最终目标是隐藏所有非叶节点的复选框，这是实现该目标所需的 CSS。

```
// First hide all checkboxes
ins.jstree-checkbox {
    display:none;
}

// Then display only checkboxes on leaf nodes
li[class~="jstree-leaf"] > a > ins.jstree-checkbox {
    display: inline-block;
} 
```

顺便问一下，为什么你不能在工作中使用 Chrome？我在 Chrome 中使用了出色的开发人员工具来帮助我破译 jstree 样式以找出上面的 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:11:45.640

对 jsTree 不太了解，对我来说，您可以简单地查看 chrome 中的 DOM 来确定要隐藏哪些节点，这似乎是合乎逻辑的。或者为 DOM 中的复选框找到复选框插件创建的特定 id 或封装。然后，一旦您知道这一点，您就可以轻松地枚举它们并使用 jQuery 或纯 javascript 隐藏它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:40:51.313

终于得到了这个工作。我在我想隐藏复选框的所有节点上添加了一个 class="node"，然后在加载树后我执行了这段 javascript：

```
$(".node").children().hide(); 
```

希望这可以帮助任何有同样问题的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-29T08:00:17.737

只需添加**CSS**：

```
.jstree-leaf .jstree-checkbox {
    display: none;
} 
```

# jquery - 带有 jquery 的单选按钮

> ID：12167305
> 
> 赞同：1
> 
> 时间：2012-08-28T20:48:41.427
> 
> 标签：jquery

我有一堆div：

```
<div class='option'>
    <span>here is a label for one pair of radio buttons</span>
    <a href='#' rel='radio' class='on'>On</a>
    <a href='#' rel='radio' class='off'>Off</a>
</div> 
```

我正在尝试使用 jQuery 在这两个类（'off' 和 'on'）之间切换。

```
<script>; 
$(document).ready(function(){ 
   $("a[rel='radio']").click(function(){
      if($(this).attr('class')=='on'){
        //make $(this) have class 'off'
        //make the other a in *this* div have class 'on'

      } else {
        //make $(this) have class 'on'
        //make the other a in the div have class 'off'
      }

  });
});
</script> 
```

如何将注释的伪代码转换为真实的 jQuery？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T20:54:07.657

您描述的行为与标准单选按钮不同，但可以如下所示：http: [//jsfiddle.net/BJGKH/](http://jsfiddle.net/BJGKH/)。

```
$("a[rel='radio']").click(function(){
   // this and sibling - toggle both classes from each
   $(this).siblings("a[rel='radio']").addBack().toggleClass("on off");
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T20:55:26.333

尝试这个;

```
$("a[rel='radio']").click(function(){
   $(this).siblings('a').andSelf().toggleClass('on off')
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T20:51:44.913

像这样的东西：

```
$(document).ready(function(){ 
   $("a[rel='radio']").click(function(){
      if($(this).attr('class')=='on'){
        $(this).removeClass('on').addClass('off');
        $(this).siblings().removeClass('off').addClass('on');
      } else {
        $(this).removeClass('off').addClass('on');
        $(this).siblings().removeClass('on').addClass('off');
      }
  });
}); 
```

# xml-parsing - Python 3 的 SGML 解析器？

> ID：12167310
> 
> 赞同：5
> 
> 时间：2012-08-28T20:49:01.913
> 
> 标签：xml-parsing, python-3.x, sgml

我有一些使用 SGML 构建的文档，并且我有一个描述这种结构的 DTD 文件。

有人可以向我推荐一个 Python-3 兼容的库或模块来解析这些数据吗？对于 Python 2.x，我的 Google-fu 似乎出现了[SGMLParser](http://docs.python.org/library/sgmllib.html)，但现在当然不推荐使用（并且从 Py3k 中彻底删除）。

许多人似乎建议`lxml`，但由于依赖问题，这对我来说不是一个选择。

我知道`BeautifulSoup`这对于混乱的标记很有用，但是 A）最后我听说它不兼容 py3k，并且 B）这个内容结构良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T00:59:54.737

BeautifulSoup 已弃用。请改用与 Py3k 兼容的替换：

*   [美丽汤4](https://pypi.python.org/pypi/beautifulsoup4/)

# android - Android 中的会话 Cookie 未过期

> ID：12167311
> 
> 赞同：3
> 
> 时间：2012-08-28T20:49:03.540
> 
> 标签：android, session, cookies

我的网站有移动版和桌面版，我会自动将到达桌面版网站的移动用户重定向到移动版网站。

当移动用户在桌面站点上请求特定 URL 时，重定向将被绕过，因此他们可以在会话的剩余部分中转到该站点的桌面版本。为此，我们在桌面站点上设置了一个会话 cookie——如果该 cookie 存在，我们绕过重定向，如果没有，我们重定向到移动站点。

此方法适用于 iPhone 和桌面上的 Android 用户代理模拟器；但是，对于我们测试的 2 部 Android 手机，重定向绕过会在会话结束后继续，并且仅在我们专门删除 cookie 后才会停止。我们尝试强制退出浏览器，清除浏览器缓存，甚至完全关闭手机。

什么会结束 Android 中的会话？它是特定于浏览器/设备的吗？

Android 是否支持会话 cookie？

有什么方法可以查看 cookie 值和到期详细信息？

是否有另一种推荐的方法可以在所有设备上获得上述功能？

如果有人有任何描述预期行为和建议的良好文档，我将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:04:12.947

我在这个领域为自己发现了一些问题。

在 Xperia Ray 上，关闭浏览器应用程序并没有结束会话。在三星标签中它会。

为了测试，如果在移动设备上设置了 cookie，您应该使用类似于 'weinre' 的东西（我认为 Adob​​e Phonegap 也使用它）

# sql-server - SQL Server 2012 中的联接语法是否不同？

> ID：12167313
> 
> 赞同：1
> 
> 时间：2012-08-28T20:49:18.600
> 
> 标签：sql-server, join, sql-server-2012

我是 SQL Server 新手，我正在使用 SQL Server Managment Studio 2012。我正在尝试做一个非常基本的连接，我什至从 PluralSight 上的说明视频中复制了语法（使用 SQL Server 2008）。然而它并没有执行。

这是查询：

```
USE [TestDB];

SELECT * FROM  Cities JOIN Persons 
```

这是消息：

> 消息 102，级别 15，状态 1，第 3 行
> “人员”附近的语法不正确。

问题是当我使用“交叉连接”时，它似乎可以很好地达到预期的结果。我究竟做错了什么？如果我没有做错任何事，可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T20:50:59.807

连接（除了交叉连接）需要一个 on 子句。不了解您的架构或这两个表如何相关，也许您的意思是这样的：

```
SELECT * FROM dbo.Cities AS c 
INNER JOIN dbo.Persons AS p
ON c.CityID = p.CityID; 
```

# python - 如何实现 Django 查询过滤表达式 API 的 kwarg 语法（例如 `related_model__fieldname__condition`）？

> ID：12167316
> 
> 赞同：3
> 
> 时间：2012-08-28T20:49:32.700
> 
> 标签：python, sql, django, orm, django-models

我正在开发一个需要对指定模型字段执行操作的 Django 应用程序。

Django 已经有一种调用样式来引用具有查询约束的模型字段——多个术语被组合成带有双下划线的谓词并作为关键字参数传递。查询集过滤，使用`QuerySet.filter()`and `Q()`，使用这种语法，例如：

```
stuff = MyStuff.objects.filter(name__isnull=False)
thing = MyStuff.objects.filter(Q(name__icontains="yo") & Q(ptype__iendswith="dogg")).get() 
```

表达式使用相同的语法`F()`，用于在查询语句中构建动态谓词。大多数 Django 用户已经以某种形式看到（如果没有使用）这种语法。

我想创建一个类似的动态评估的、可组合的 Python 习惯用法——为了这个问题，我称之为它`G()`——它使用相同的语法，为延迟评估的字段查找实例提供类似的句柄，可以在逻辑上与其他此类实例重新组合。

应该如何处理这项任务？两者`Q()`和`F()`都是子类`django.utils.tree.Node`——至少它们在 Django 1.4 中（它们并不总是像现在这样实现，它们的接口可能是私有的，也可能不是私有的）。我相信，大部分 kwarg-filter-expression 动作都发生在`django.db.models.sql.Query`...... 这是一个巨大而令人生畏的类，与 ORM 的无数胆量有着难以辨认的耦合。

我有理由确定查询过滤器语法可以比我想象的更简单地完成。我应该从哪里开始？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T00:58:27.103

我不确定您要使用双下划线关键字做什么，但最简单的起点可能是这里：

```
>>> def G(**kwargs):
...     for key, value in kwargs.items():
...         print "{} = {}".format(key.split("__"), value)
...         
...     
... 
>>> G(some__key__here="val1", another__one__again="val2")
['some', 'key', 'here'] = val1
['another', 'one', 'again'] = val2 
```

从那里开始，我想这取决于您将如何处理这些信息。希望这可以帮助！

# mobile - 无法在移动设备上从 sharepoint 2010 下载 mp4，但非移动设备工作正常

> ID：12167318
> 
> 赞同：0
> 
> 时间：2012-08-28T20:49:36.970
> 
> 标签：mobile, sharepoint-2010, session-state

我们有一个 SharePoint 网站，其中包含一个专为 Web 和移动设备设计的自定义应用程序，我们正在尝试将其从 SP2007 升级到 SP2010。该站点包含 mp4 文件的播放列表。我们在站点上激活了 asp.net 会话状态，以便在自定义应用程序中使用。我们还将 URL 重写为 HTTPS。

这些文件存储在磁盘上并通过虚拟目录进行访问。

通过 SP2010 网站（非移动）访问文件时，mp4 文件播放得很好。

当从移动浏览器访问完全相同的 url 时，我们会收到以下消息：

```
Session state can only be used when enableSessionState is set to true, either in a
configuration file or in the Page directive. Please also make sure that
System.Web.SessionStateModule or a custom session state module is included in the
<configuration>\<system.web>\<httpModules> section in the application configuration. 
```

我们确实在 <configuration>\<system.webServer>\<modules> 中声明了 SessionStateModule，如下所示：

```
<add name="Session" type="System.Web.SessionState.SessionStateModule" preCondition="" /> 
```

我们也尝试过不使用 preCondition 并使用 preCondition="integratedMode"。

url 的示例是[https://example.com/Assets/Job63/8f9e85d5-d7f3-4536-a9b1-69537b7da9bf/Previews/0568145f-b314-4354-a081-d72019a42d11.mp4](https://example.com/Assets/Job63/8f9e85d5-d7f3-4536-a9b1-69537b7da9bf/Previews/0568145f-b314-4354-a081-d72019a42d11.mp4)（域已更改以保护清白的）。

虚拟目录是 /Assets，它指向 ac:\Assets 目录。

即使使用 FireFox 并将用户代理更改为模拟移动设备也会发生此行为，因此它似乎是拦截移动设备请求的东西。

该站点上的其他会话状态答案似乎都没有涵盖此问题。

我们还在网站的 IIS 模块列表中声明了 SessionStateModule。

什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:57:57.670

我们能够通过将包含以下内容的 web.config 文件放入 assets 文件夹来解决此问题。显然，SharePoint 在 SP2010 中所做的激进的移动重定向会导致问题，如以下网址所述 - [http://blog.mastykarz.nl/inconvenient-sharepoint-2010-mobile-redirect/](http://blog.mastykarz.nl/inconvenient-sharepoint-2010-mobile-redirect/) 。

web.config 内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.web>
    <browserCaps>
      <result type="System.Web.Mobile.MobileCapabilities, System.Web.Mobile, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
      <filter>isMobileDevice=false</filter>
    </browserCaps>
  </system.web>
</configuration> 
```

# lucene - 从 Lucene 中的查询中提取术语

> ID：12167322
> 
> 赞同：0
> 
> 时间：2012-08-28T20:49:40.317
> 
> 标签：lucene

我正在尝试使用 Lucene 3.0.3 从用户指定的查询中提取术语。我的代码如下所示：

```
protected Set<Term> getTerms(IndexSearcher searcher, Analyzer analyzer, String field, String queryString, boolean countOnly) {
    Set<Term> results = null;
    try {
        logger.trace( "Creating parser and analyzer" );
        QueryParser qp = new QueryParser(Version.LUCENE_30, field, analyzer );
        logger.trace( "Constructing query" );
        Query query = qp.parse(queryString);
        query.rewrite(searcher.getIndexReader());
        logger.trace( "Evaluating query: [" + query.toString() + "]");
        terms = new HashSet<Term>();
        query.extractTerms( terms );
    } catch(UnsupportedOperationException uoex) {
        logger.error("Error parsing query: " + e.getMessage() );
    } catch (ParseException e) {
        logger.error( "Error parsing query: " + e.getMessage() );
    } catch (IOException e) {
        logger.error( "IO Exception in processing query", e);
    }
    return terms;
} 
```

除非查询文本中有（例如）问号，否则这很好用。如果发生这种情况，该`query.extractTerms(terms);`行将抛出一个`UnsupportedOperationException`. 这是在我添加`query.rewrite()`应该防止此错误的调​​用之前发生的。不幸的是，错误仍然发生。有趣的是，查询被解析和执行（以不同的方法）就好了；这只是`extractTerms()`失败的呼叫。

接下来我应该尝试什么？

基因

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T01:20:49.853

你丢弃 query.rewrite 的结果

# testing - PHPUnit、代码覆盖率、xdebug 和 html 报告

> ID：12167323
> 
> 赞同：0
> 
> 时间：2012-08-28T20:49:47.580
> 
> 标签：testing, jenkins, phpunit, code-coverage, xdebug

好吧，我在尝试设置代码覆盖率报告时遇到了问题。我必须做的第一件事是安装 xdebug，我做到了，它工作了......好吧，实际上，它没有向我展示我的测试代码的覆盖范围，而是在 PHPUnit 模块的目录中显示了几个文件，以及其他一些文件来自框架系统目录的奇怪文件，例如：

C:/xampp/htdocs/.../src/modules/Unittest/classes/kohana/unittest/helpers.php
C:/xampp/htdocs/.../src/modules/Unittest/classes/unittest/helpers.php
C:/xampp/htdocs/.../src/system/classes/kohana/config.php

另一个问题是，应该是 html 报告的覆盖文件是由每个执行的“phpunit”命令创建的，它们总是保存到 C:// 目录中。我试图在 php.ini 的 xdebug 设置中更改它，但没有任何效果。

有谁知道可能是什么原因？
如果这是任何有用的信息，我正在使用 Jenkins。
如果您需要更多信息，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T07:58:32.507

```
 C:/xampp/htdocs/.../src/modules/Unittest/classes/kohana/unittest/helpers.php
 C:/xampp/htdocs/.../src/modules/Unittest/classes/unittest/helpers.php
 C:/xampp/htdocs/.../src/system/classes/kohana/config.php 
```

这些文件看起来像测试助手和配置。PHPUnit 将为不只包含单元测试的每个文件生成代码覆盖率。

如果您不希望这些文件显示使用[**`excludes in your phpunit.xml file`**](http://www.phpunit.de/manual/current/en/appendixes.configuration.html)

```
 <whitelist addUncoveredFilesFromWhitelist="true">
    <directory suffix=".php">src</directory>
    <exclude>
      <directory suffix=".php">tests</directory>
      <file>src/system/classes/kohana/config.php</file>
    </exclude>
  </whitelist> 
```

* * *

要回答第二个问题，我们需要了解您如何运行测试和您的 phpunit.xml。

稍后请考虑在您打开的每个“问题”中只放置一个可回答的问题。由于这不是一个论坛，每个问题都应该是一个已解决的问题，因此更容易为您的内容获得答案:)

# python - 如何广播到多索引

> ID：12167324
> 
> 赞同：6
> 
> 时间：2012-08-28T20:49:57.263
> 
> 标签：python, arrays, pandas, multi-index

我有两个由 groupby 操作产生的 pandas 数组 A 和 B。A 有一个由分位数和日期组成的 2 级多索引。B 只是有一个日期索引。

在它们两者之间，日期索引匹配（在 A 的每个分位数索引内）。

是否有标准的 Pandas 函数或习语来“广播”B，这样它的多索引就会有一个额外的级别来匹配 A 的第一个多索引级别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T03:27:07.927

如果您只想进行简单的算术运算，我认为`A.div(B, level='date')`应该可以。

或者，您可以执行`B.reindex(A.index, level='date')`手动匹配索引之类的操作。

# c# - 整数 windows phone 的第一个和最后两个数字

> ID：12167327
> 
> 赞同：-1
> 
> 时间：2012-08-28T20:50:04.917
> 
> 标签：c#, windows-phone-7, numbers, int

如何在c#中获取整数的前两个数字和后两个数字。

例如：

```
int complete = 1935; 
```

怎么做，

```
int firtTwo = 19; 
```

和

```
int secondTwo = 35; 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:53:53.137

它总是一个四位数的正值吗？如果是这样，我会去：

```
int hundreds = complete / 100;
int tensAndUnits = complete % 100; 
```

如果它是*任意*数字，那么您希望“935”为“93”和“35”，您不妨使用字符串操作：

```
string text = complete.ToString();
int first = int.Parse(text.Substring(0, 2));
int last = int.Parse(text.Substring(text.Length - 2, 2)); 
```

（请注意，这将导致个位数的值爆炸......）

如果你能说出这是什么意思，那将会有所*帮助*。

# c# - 允许 Web 用户在项目中创建新的 .Net 页面

> ID：12167328
> 
> 赞同：0
> 
> 时间：2012-08-28T20:50:05.797
> 
> 标签：c#, .net, visual-studio-2010, iis

我不确定这是否可行，但我想允许用户从 Web 界面创建一个新的 .aspx 页面。因此，例如，假设我正在构建一个 wiki 站点，并希望允许用户添加一篇关于 stackoverflow 有多大帮助的文章。是否可以从母版页创建新的 .aspx 页面，然后允许用户向其中添加内容？另外，是否可以允许用户从 VS 项目中删除页面？

谢谢，布伦特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:41:11.543

尝试内容管理系统，例如：

*   WordPress
*   Joomla
*   点网核弹

或其他。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:24:29.447

如果您安装 DotNetNuke (dnn)，则可能会有如下所示的页面：mydomain.com/wiki/mynewpage.aspx

但是您最好使用 DNN wiki 模块（或文章模块）来允许用户输入内容（基于他/她的用户权限）。这些模块专为手头的任务量身定制。

# parsing - Haskell Parsec - 使用自定义令牌时错误消息的帮助不大

> ID：12167329
> 
> 赞同：6
> 
> 时间：2012-08-28T20:50:08.527
> 
> 标签：parsing, haskell, lexical-analysis, parsec

我正在分离解析器的词法分析和解析阶段。经过一些测试，我意识到当我使用 Parsec 的 Char 令牌以外的其他令牌时，错误消息的帮助不大。

以下是 Parsec 在使用 Char 令牌时的一些错误消息示例：

```
ghci> P.parseTest (string "asdf" >> spaces >> string "ok") "asdf  wrong"
parse error at (line 1, column 7):
unexpected "w"
expecting space or "ok"

ghci> P.parseTest (choice [string "ok", string "nop"]) "wrong"
parse error at (line 1, column 1):
unexpected "w"
expecting "ok" or "nop" 
```

因此，字符串解析器会在发现意外字符串时显示预期的字符串，而选择解析器会显示备选字符串。

但是当我对我的标记使用相同的组合器时：

```
ghci> Parser.parseTest ((tok $ Ide "asdf") >> (tok $ Ide "ok")) "asdf  "
parse error at "test" (line 1, column 1):
unexpected end of input 
```

在这种情况下，它不会打印预期的内容。

```
ghci> Parser.parseTest (choice [tok $ Ide "ok", tok $ Ide "nop"]) "asdf  "
parse error at (line 1, column 1):
unexpected (Ide "asdf","test" (line 1, column 1)) 
```

当我使用时`choice`，它不会打印替代品。

我希望这种行为与组合函数有关，而不是与令牌有关，但似乎我错了。我怎样才能解决这个问题？

这是完整的词法分析器+解析器代码：

词法分析器：

```
module Lexer
    ( Token(..)
    , TokenPos(..)
    , tokenize
    ) where

import Text.ParserCombinators.Parsec hiding (token, tokens)
import Control.Applicative ((<*), (*>), (<$>), (<*>))

data Token = Ide String
           | Number String
           | Bool String
           | LBrack
           | RBrack
           | LBrace
           | RBrace
           | Keyword String
    deriving (Show, Eq)

type TokenPos = (Token, SourcePos)

ide :: Parser TokenPos
ide = do
    pos <- getPosition
    fc  <- oneOf firstChar
    r   <- optionMaybe (many $ oneOf rest)
    spaces
    return $ flip (,) pos $ case r of
                 Nothing -> Ide [fc]
                 Just s  -> Ide $ [fc] ++ s
  where firstChar = ['A'..'Z'] ++ ['a'..'z'] ++ "_"
        rest      = firstChar ++ ['0'..'9']

parsePos p = (,) <$> p <*> getPosition

lbrack = parsePos $ char '[' >> return LBrack
rbrack = parsePos $ char ']' >> return RBrack
lbrace = parsePos $ char '{' >> return LBrace
rbrace = parsePos $ char '}' >> return RBrace

token = choice
    [ ide
    , lbrack
    , rbrack
    , lbrace
    , rbrace
    ]

tokens = spaces *> many (token <* spaces)

tokenize :: SourceName -> String -> Either ParseError [TokenPos]
tokenize = runParser tokens () 
```

解析器：

```
module Parser where

import Text.Parsec as P
import Control.Monad.Identity
import Lexer

parseTest  :: Show a => Parsec [TokenPos] () a -> String -> IO ()
parseTest p s =
    case tokenize "test" s of
        Left e -> putStrLn $ show e
        Right ts' -> P.parseTest p ts'

tok :: Token -> ParsecT [TokenPos] () Identity Token
tok t = token show snd test
  where test (t', _) = case t == t' of
                           False -> Nothing
                           True  -> Just t 
```

解决方案：

好的，在 fp4me 的回答和更仔细地阅读 Parsec 的 Char 源之后，我得到了这个：

```
{-# LANGUAGE FlexibleContexts #-}
module Parser where

import Text.Parsec as P
import Control.Monad.Identity
import Lexer

parseTest  :: Show a => Parsec [TokenPos] () a -> String -> IO ()
parseTest p s =
    case tokenize "test" s of
        Left e    -> putStrLn $ show e
        Right ts' -> P.parseTest p ts'

type Parser a = Parsec [TokenPos] () a

advance :: SourcePos -> t -> [TokenPos] -> SourcePos
advance _ _ ((_, pos) : _) = pos
advance pos _ [] = pos

satisfy :: (TokenPos -> Bool) -> Parser Token
satisfy f = tokenPrim show
                      advance
                      (\c -> if f c then Just (fst c) else Nothing)

tok :: Token -> ParsecT [TokenPos] () Identity Token
tok t = (Parser.satisfy $ (== t) . fst) <?> show t 
```

现在我收到相同的错误消息：

> ghci> Parser.parseTest (choice [tok $ Ide "ok", tok $ Ide "nop"]) "asdf"
> 解析错误 (第 1 行，第 1 列):
> 意外 (Ide "asdf","test" (第 1 行, 列 3))
> 期待 Ide "ok" 或 Ide "nop"

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T23:47:50.473

解决方案的开始可以是在 Parser 中定义您的选择函数，使用特定的意外函数覆盖意外错误，最后使用`<?>`运算符覆盖预期消息：

```
mychoice [] = mzero
mychoice (x:[]) = (tok x <|> myUnexpected) <?> show x 
mychoice (x:xs) = ((tok x <|> mychoice xs) <|> myUnexpected)  <?> show (x:xs)

myUnexpected =  do 
             input <- getInput 
             unexpected $ (id $ first input )
           where 
            first [] = "eof"
            first (x:xs) = show $ fst x 
```

并像这样调用您的解析器：

```
ghci> Parser.parseTest (mychoice [Ide "ok", Ide "nop"]) "asdf  "
parse error at (line 1, column 1):
unexpected Ide "asdf"
expecting [Ide "ok",Ide "nop"] 
```

# css - 插件的样式元素

> ID：12167331
> 
> 赞同：0
> 
> 时间：2012-08-28T20:50:12.447
> 
> 标签：css

[现场直播。](http://parlourdc.com/wp/get-in-touch)

我正在尝试在“即将到来的事件”标题下设置当前为黑色的内容。`.vevent-item odd event-1 .description .event-time .event-label`我已经尝试了我认为可能无济于事的每一种组合。有任何想法吗？

它应该与我的其他`<p>`内容相匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:07:35.750

如果您正在寻找以下部分的样式：http: [//i.imgur.com/BW4NR.png](http://i.imgur.com/BW4NR.png)

为什么不向这些 div 添加一个新类？例如：

```
<div class="event-time foo">...</div>
<div class="foo">...</div> 
```

在您的 .css 文件中：

```
.foo {
  background-color: red;  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:01:45.140

对我来说，只需将以下代码添加到`<head>`样式标签中即可。

```
#main div.content div.event-item {
    color: #fff;
} 
```

# python - python中的Z3代码

> ID：12167333
> 
> 赞同：1
> 
> 时间：2012-08-28T20:50:19.027
> 
> 标签：python, z3

我已经安装了 python 和 Z3，并使用 Z3 python 目录的路径设置了 PYTHONPATH。

我通过运行这个来导入 Z3，从 z3 import *

但在此之后，我收到一个持久的长错误消息，其以下列方式结束：

```
File "C:\Program Files\Microsoft Research\Z3-4.1\python\z3core.py", line 34, in init
    _lib = ctypes.CDLL(PATH)
  File "C:\Python27\lib\ctypes\__init__.py", line 365, in __init__
    self._handle = _dlopen(self._name, mode)
WindowsError: [Error 126] The specified module could not be found 
```

有趣的是，在我重新安装 python 和 Z3 之前，一切正常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T01:04:19.810

您的 PATH 环境变量应设置为在 Z3 安装中包含 bin 或 x64 目录。如果您使用的是 64 位版本的 Python，则应包含 x64 目录。

例子：

> hello.py .... 文件“C:\Python27\lib\ctypes__init__.py”，第 365 行，在**init** self._handle = _dlopen(self._name, mode) WindowsError: [Error 126] The specified module could not be成立
> 
> 设置 PATH=%PATH%;C:\Program Files (x86)\Microsoft Research\Z3-4.1\bin
> 
> hello.py Traceback（最近一次调用最后）：....文件“C:\Python27\lib\ctypes__init__.py”，第 365 行，**init** self._handle = _dlopen(self._name, mode) WindowsError: [错误193] %1 不是有效的 Win32 应用程序
> 
> 设置 PATH=%PATH%;C:\Program Files (x86)\Microsoft Research\Z3-4.1\x64
> 
> 你好.py 你好 Z3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-03T12:47:17.973

当我遇到这个问题时，原来是因为我没有 libz3 所依赖的 dll。通过安装[Visual C++ Redistributable for Visual Studio 2015](https://www.microsoft.com/en-us/download/details.aspx?id=48145)解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-26T16:21:59.123

如果您使用 anaconda，使用以下命令就足以安装 z3。

```
pip install z3-solver 
```

# javascript - Jquery 使 2 组单选按钮相互镜像

> ID：12167336
> 
> 赞同：1
> 
> 时间：2012-08-28T20:50:48.433
> 
> 标签：javascript, jquery, radio-button

我正在尝试设置两组同时起作用的单选按钮。换句话说，每当在顶部检查男性时，我都希望雄性在底部自动检查。（反之亦然）如果用户向下滚动并单击女性，则应检查顶部的那个。无论用户单击哪个收音机，两个收音机都应始终检查相同的值。请提供最实用的方法来实现这一点。我的主要关注点是 Javascript 或 Jquery，但我花了几个小时试图想出一些无济于事的东西。请指教。谢谢！:)

```
<div class="top">
<input type="radio" name="sex" value="Male" /> Male<br />
<input type="radio" name="sex" value="Female" checked="checked" /> Female<br />
</div>

<div>Random Content</div>

<div class="bottom">
<input type="radio" name="sex2" value="Male" /> Male<br />
<input type="radio" name="sex2" value="Female" checked="checked" /> Female<br />
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T21:04:17.877

附加到`change`事件并选择所有其他具有相同开头的单选按钮 并且`name`相等`value`但不是当前单选按钮。

```
$("input[name^='sex']").change(function(){
    var $otherRadioButtons = $("input[name^='sex'][value='" + this.value + "']").not(this);
    $otherRadioButtons.prop('checked', $(this).prop('checked'));
}); 
```

以上没有使用您可以自己添加的选择器的任何巧妙缓存。

基本上，每当单选按钮更改它的检查值时，代码将选择所有**其他**具有相同`value`（男性/女性）的单选按钮，这些单选按钮也以相同`name`（性别????）开头，并将其选中属性设置为与当前一个。

我希望这是有道理的。请参阅下面的工作演示。

### [演示](http://jsfiddle.net/ZtEpz/)- 更改集合中的单选按钮。

**编辑**

> 我刚刚注意到..我正在使用 jquery 1.3.2，目前升级不是一个选项。你不会碰巧有 1.3.2 的替代品吗？

对于 jQuery 版本 1.3.2 使用`attr`方法而不是`prop`方法：

```
$("input[name^='sex']").change(function(){
    var $otherRadioButtons = $("input[name^='sex'][value='" + this.value + "']").not(this);
    $otherRadioButtons.attr('checked', $(this).attr('checked'));
}); 
```

### [DEMO](http://jsfiddle.net/ZtEpz/1/) - 使用 jQuery 1.3.2 更改集合中的单选按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:54:28.963

只需为这两个集合添加一个 onclick 侦听器。像这样：

```
document.getElementById("male1").onclick=clickMale;
document.getElementById("male2").onclick=clickMale;
document.getElementById("female1").onclick=clickFemale;
document.getElementById("female2").onclick=clickFemale;

function clickMale(){
  document.getElementById("male1").checked=true;
  document.getElementById("male2").checked=true;
}
function clickFemale(){
  document.getElementById("female1").checked=true;
  document.getElementById("female2").checked=true;
} 
```

并将 ID 添加到单选按钮（“male1”、“male2”、“female1”、“female2”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T21:05:42.110

为男性/女性输入共享一个类可能是有意义的，例如“js-male”或“js-female”）。这节省了一些代码。例如你可以这样做：

```
 $('.js-male').change(function() {
      $('.js-male').attr('checked', $(this).attr('checked'));
   });

   $('.js-female').change(function() {
     $('.js-female').attr('checked', $(this).attr('checked'));
   }); 
```

可能有更优雅的方式来处理整个情况。您是否真的希望输入具有不同的名称（'male'、'male2'），这意味着您的服务器接收两个不同的参数？如果您给两个单选按钮组赋予相同的名称，那么只有最后一个的值将被发送到服务器，无论如何，如果您仍然镜像单选按钮，这并不重要。

[演示](http://jsfiddle.net/VvT5f/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T21:03:57.293

既然你提到了它，那么如果你愿意的话，Zove 在 jQuery 中的回答会是这样的：

```
$("#male1").click(clickMale);
$("#male2").click(clickMale);
$("#female1").click(clickFemale);
$("#female2").click(clickFemale);

function clickMale(){
    $("#male1").attr('checked', true);
    $("#male1").attr('checked', true);
}

function clickFemale(){
    $("#female1").attr('checked', true);
    $("#female2").attr('checked', true);
} 
```

对于这么简单的事情，您不需要 jQuery，但如果您在其他地方使用它，最好保持一致。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T21:25:43.660

只需更改您的 jQuery 源代码的位置，这将开箱即用。

```
<html>
<head>
    <script src="jquery-1.7.1.js"></script>

    <script type="text/javascript">
        $(document).ready(function() {
            $("#male1, #male2").live("click", function(){
                $("#male1").attr("checked", $("#male2").attr("checked"));
                $("#male2").attr("checked", $("#male1").attr("checked"));
            });

            $("#female1, #female2").live("click", function(){
                $("#female1").attr("checked", $("#female2").attr("checked"));
                $("#female2").attr("checked", $("#female1").attr("checked"));
            });
        });
    </script>

</head>
<body>
    <div class="top">
        <input id="male1" type="radio" name="sex" value="Male" /> Male<br />
        <input id="female1" type="radio" name="sex" value="Female" checked="checked" /> Female<br />
    </div>

    <div>Random Content</div>

    <div class="bottom">
        <input id="male2" type="radio" name="sex2" value="Male" /> Male<br />
        <input id="female2" type="radio" name="sex2" value="Female" checked="checked" /> Female<br />
    </div>
</body>

</html> 
```

# r - 如何将这种格式的日期转换为 R 中的日期类？

> ID：12167341
> 
> 赞同：2
> 
> 时间：2012-08-28T20:51:03.650
> 
> 标签：r, date

我有一个充满数据的电子表格，其日期如下所示：

```
 Mon Jul 16 15:20:22 +0000 2012 
```

有没有办法在不使用正则表达式的情况下将这些转换为 R 日期（最好是 PST），还是没有其他方法？我很感激有关有效进行此转换的想法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T21:00:36.763

当然，只需用于`strptime()`从字符串中解析时间：

```
R> strptime("Mon Jul 16 15:20:22 +0000 2012", 
+           format="%a %b %d %H:%M:%S %z %Y")
[1] "2012-07-16 10:20:22 CDT"
R> 
```

它使用我的本地时区（CDT）。如果你的是太平洋，你可以明确地设置它

```
R> strptime("Mon Jul 16 15:20:22 +0000 2012", 
+           format="%a %b %d %H:%M:%S %z %Y", tz="America/Los_Angeles")
[1] "2012-07-16 08:20:22 PDT"
R> 
```

与 UTC 有 7 小时的增量看起来是正确的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-28T21:00:21.523

在“示例”部分几乎有一个逐字逐句的示例说明如何执行此操作`?strptime`：

```
 # ?strptime example:
 ## An RFC 822 header (Eastern Canada, during DST)
 strptime("Tue, 23 Mar 2010 14:36:38 -0400",  "%a, %d %b %Y %H:%M:%S %z")
 # your data...
 strptime("Mon Jul 16 15:20:22 +0000 2012", "%a %b %d %H:%M:%S %z %Y") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-09T00:31:03.427

这也可以通过`lubridate`package in来完成`tidyverse`

```
library(lubridate)
parse_date_time("Mon Jul 16 15:20:22 +0000 2012", orders = "amdHMSzY") 
```

这是我更喜欢的。

# java - 是否可以从 Java 启动交互式进程？

> ID：12167349
> 
> 赞同：0
> 
> 时间：2012-08-28T20:52:05.677
> 
> 标签：java, process, launch, interaction

通常，当我们从 Java 启动一个进程时，我们会失去对它的控制，Java 机器只是等待来自该进程的回答。我想知道是否可以启动一个进程并与之交互。具体来说，我需要在 AS400 上执行此操作，但任何工作方法都是有用的（无论在哪个操作系统上进行测试）。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T20:57:33.427

与子进程交互有多种方式。

最简单的方法之一是使用流程的输入和输出流。

*   使用[Process.getOutputStream()](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html#getOutputStream%28%29)写入子进程的输入流。
*   使用[Process.getInputStream()](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html#getOutputStream%28%29)从子进程的输出流中读取。

# android - AppInventor：将数据从 csv 文件导入列表

> ID：12167358
> 
> 赞同：2
> 
> 时间：2012-08-28T20:52:38.777
> 
> 标签：android, app-inventor

我正在开发一个android应用程序..我想将csv文件中的数据导入appinventor中的列表中..1方法是在线上传该csv文件，然后从中提取数据..有什么方法可以保留它sd卡中的csv文件并从中获取数据？如果我上传那个csv文件然后从中提取数据，那么最短和最简单的方法是什么？有什么例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:46:30.593

通常这对于 App Inventor 是不可能的，但有一个技巧可以从 SD 卡读取文本文件：您可以将 App Inventor 与嵌入式 HTML/JavaScript 一起使用，请参见此处的示例：http: [//puravidaapps.com/read。 php](http://puravidaapps.com/read.php)

同时，我准备了另一个示例，该示例在应用程序首次运行时导入作为资产存储在 App Inventor 中的多行 csv 文件，并将其存储为 TinyDB 中的列表列表。请在这里找到它：http: [//puravidaapps.com/importCSV.php](http://puravidaapps.com/importCSV.php)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-28T21:02:41.710

是的，您可以在 sdcard 中存储一个 csv 文件并编写一个小型解析器来解析 csv 文件以构建您的列表。如果文件在远程某处可用，我建议先下载文件，然后解析文件。

从这里回答->[在 android 中获取和解析 CSV 文件](https://stackoverflow.com/questions/5360628/get-and-parse-csv-file-in-android)

```
 //--- Suppose you have input stream `is` of your csv file then:

BufferedReader reader = new BufferedReader(new InputStreamReader(is));
try {
    String line;
    while ((line = reader.readLine()) != null) {
         String[] RowData = line.split(",");
         date = RowData[0];
         value = RowData[1];
        // do something with "data" and "value"
    }
}
catch (IOException ex) {
    // handle exception
}
finally {
    try {
        is.close();
    }
    catch (IOException e) {
        // handle exception
    }
} 
```

也可以看看这个，

[http://code.google.com/p/secrets-for-android/source/browse/trunk/src/au/com/bytecode/opencsv/CSVReader.java](http://code.google.com/p/secrets-for-android/source/browse/trunk/src/au/com/bytecode/opencsv/CSVReader.java)

# asp.net-mvc-3 - MVC3 音乐商店教程连接字符串问题

> ID：12167363
> 
> 赞同：1
> 
> 时间：2012-08-28T20:53:15.483
> 
> 标签：asp.net-mvc-3, entity-framework-4.1

我正在学习 MVC 音乐商店教程，当我尝试使用实体框架模型连接到数据库时遇到了问题。我已经尝试了许多这些演练，当我进入这部分时，我仍然会遇到问题。

我不想使用 SQL Compact Edition（尽管我尝试安装它只是为了让教程正常工作）。相反，我有 SQL Server Developer 2005 版以及 SQL2008 Express 的命名实例（同样，安装只是为了看看我是否可以让教程工作）。这是我的连接字符串：

```
<connectionStrings>
<add name="MusicStoreEntities"
     connectionString="server=2-BQZ5DP1\DELS2008EXPRESS;Integrated Security=SSPI;database=MvcMusicStore"/>
</connectionStrings> 
```

connectionStrings 元素的结束标记不会出现在代码片段中，所以假装它在那里。

我需要做些什么不同的事情？2-BQZ5DP1是我的盒子的名字，SQL Express实例是命名实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:46:00.820

当您使用除 Compact 以外的 SQL Server 版本时，通常需要 MultipleActiveResultSets=True 和实体框架。根据您看到的错误，这可能是您的问题。有关连接字符串选项的更多信息，请参阅此博客：

[http://blogs.msdn.com/b/aspnetue/archive/2012/08/14/sql-server-connection-strings-for-asp-net-web-applications.aspx](http://blogs.msdn.com/b/aspnetue/archive/2012/08/14/sql-server-connection-strings-for-asp-net-web-applications.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:11:40.020

怎么样

```
ConnectionString="Data Source=.\DELS2008EXPRESS; Initial Catalog=MvcMusicStore; Integrated Security=SSPI;" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T21:09:34.390

您的 conn 字符串中可能缺少用户名和密码？应用程序和超时是您可能需要的其他参数，具体取决于您的设置。查看[http://www.connectionstrings.com](http://www.connectionstrings.com)以获得有关 SQL 2005 的更多帮助。

此外，实体框架在连接字符串中需要更多参数。我还没有使用代码优先方法，但是如果您有想要映射的现有表，那么 EF 有一个向导，您可以使用它来识别您想要使用的数据库对象。要做到这一点，您必须向对话框提供有效的连接字符串。这样做时，VS 将使用格式正确且完全构造的 conn 字符串填充您的 web.config，以便与 EF 一起使用。

# php - 图像显示不正确

> ID：12167364
> 
> 赞同：0
> 
> 时间：2012-08-28T20:53:18.343
> 
> 标签：php, javascript, web

我在 suffusion-subscription.php 中添加了自定义代码，以在鼠标悬停在图像上时更改 Facebook 图标的图像。

在初始加载期间，没有图像显示。之后 mouseHover 和 mouseOut 事件会显示适当的图像，但不会在初始加载时显示。

下图显示了该问题：

![在此处输入图像描述](../Images/74656b313c4e33b370ec7b56ce50a425.png)

JavaScript：

```
//preload images:
fb1 = new Image(64,64);
fb1.src = "http://sohamshah.com/wordpress/wp-content/themes/suffusion/images/follow/Facebook-04.png";
fb2 = new Image(64,64);
fb2.src = "http://sohamshah.com/wordpress/wp-content/uploads/2011/11/fb-broken.png";

//image swapping function:
function hiLite(imgDocID, imgObjName, comment) {

document.images[imgDocID].src = eval(imgObjName + ".src");
window.status = comment; return true;
}

</script> 
```

HTML：

```
<div class='fix'>
    <a href="http://feeds.feedburner.com/sohamshah" class="follow-icon-and-tag" title="RSS">
        <img src="http://sohamshah.com/wordpress/wp-content/themes/suffusion/images/follow/RSS-13.png" alt="RSS" style='width: 64px; height: 64px;' />
    </a>
    <a href="http://www.facebook.com/soham100" onMouseOver="hiLite('fb','fb2','Follow Me on FaceBook')"  onMouseOut="hiLite('fb','fb1','')" class="follow-icon-and-tag" title="Facebook">
        <img name="fb" "src="http://sohamshah.com/wordpress/wp-content/themes/suffusion/images/follow/Facebook-04.png" alt="Facebook" style='width: 64px; height: 64px;' />
    </a>

  <a href="http://twitter.com/sohamshah" class="follow-icon-and-tag" title="Twitter">
            <img src="http://sohamshah.com/wordpress/wp-content/themes/suffusion/images/follow/Twitter-08.png" alt="RSS" style='width: 64px; height: 64px;' />
        </a>

   </div> 
```

对此问题的任何帮助将不胜感激。

索汉姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:01:00.720

图像标签中的 src 旁边有一个额外的双引号。

# arrays - 最快的算法顺序移动通过数组

> ID：12167371
> 
> 赞同：0
> 
> 时间：2012-08-28T20:53:54.843
> 
> 标签：arrays, algorithm

假设您有一个包含正整数和负整数的数组。如果你站在第 i 个位置，你可以移动到第 i+1 个或第 i+2 个位置。任务是找到路径，你应该如何移动，以获得所有收集值的最大总和。解决这个问题的最快算法是什么？谢谢。

例子：

0 1 8 -7 -10 -30 -1 -4 -5 0

0 1 8 -10 -1 -4 0 最大总和 -6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T21:12:01.563

这是动态规划的经典例子。

对于每个位置，您将计算到达该位置可达到的最大总和。位置*i*可以从位置*i-1*或*i-2*到达，所以：

```
maxsum[i] = max(maxsum[i-2], maxsum[i-1]) + val[i] 
```

您只需要使用起始值遍历数组：`maxsum[<0] = 0`.

复杂度：O(n)。

```
0 1 8 -7 -10 -30 -1 -4 -5 0

0 1 9 2  -1  -28 -2 -6 -7 -6 
```

# scipy - clapack.so：未定义符号：RHEL 上的 clapack_sgesv

> ID：12167377
> 
> 赞同：1
> 
> 时间：2012-08-28T20:54:31.263
> 
> 标签：scipy

导入 scipy.stats 时出现此错误：

```
import scipy.stats
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/usr/lib64/python2.6/site-packages/scipy/stats/__init__.py", line 322, in <module>
from stats import *
File "/usr/lib64/python2.6/site-packages/scipy/stats/stats.py", line 194, in <module>
import scipy.linalg as linalg
File "/usr/lib64/python2.6/site-packages/scipy/linalg/__init__.py", line 116, in <module>
from basic import *
File "/usr/lib64/python2.6/site-packages/scipy/linalg/basic.py", line 12, in <module>
from lapack import get_lapack_funcs
File "/usr/lib64/python2.6/site-packages/scipy/linalg/lapack.py", line 15, in <module>
from scipy.linalg import clapack
ImportError: /usr/lib64/python2.6/site-packages/scipy/linalg/clapack.so: undefined symbol: clapack_sgesv 
```

看起来 clapack.so 链接到 libatlas 的完整 ATLAS 版本：

```
ldd /usr/lib64/python2.6/site-packages/scipy/linalg/clapack.so
linux-vdso.so.1 =>  (0x00007fff232e6000)
liblapack.so.3 => /usr/lib64/liblapack.so.3 (0x00007f23b8ad7000)
libptf77blas.so.3 => /usr/lib64/atlas/libptf77blas.so.3 (0x00007f23b88b7000)
libptcblas.so.3 => /usr/lib64/atlas/libptcblas.so.3 (0x00007f23b8697000)
libatlas.so.3 => /usr/lib64/atlas/libatlas.so.3 (0x00007f23b8120000)
libpython2.6.so.1.0 => /usr/lib64/libpython2.6.so.1.0 (0x00007f23b7d65000)
libgfortran.so.3 => /usr/lib64/libgfortran.so.3 (0x00007f23b7a73000)
libm.so.6 => /lib64/libm.so.6 (0x00007f23b77da000)
libgcc_s.so.1 => /lib64/libgcc_s.so.1 (0x00007f23b75c3000)
libc.so.6 => /lib64/libc.so.6 (0x00007f23b7232000)
libblas.so.3 => /usr/lib64/libblas.so.3 (0x00007f23b6fdb000)
libpthread.so.0 => /lib64/libpthread.so.0 (0x00007f23b6dbd000)
libdl.so.2 => /lib64/libdl.so.2 (0x00007f23b6bb9000)
libutil.so.1 => /lib64/libutil.so.1 (0x00007f23b69b6000)
/lib64/ld-linux-x86-64.so.2 (0x00000032a2200000) 
```

有任何想法吗？

# php - 如何在没有 Content-Length 标头的情况下流式传输 HTTP 文件上传？

> ID：12167378
> 
> 赞同：10
> 
> 时间：2012-08-28T20:54:32.737
> 
> 标签：php, apache, http, http-streaming

是否可以在不包含内容长度标头的情况下将文件上传到 apache php 服务器？

我正在尝试将我正在动态创建的文件作为文件上传流式传输。当我不使用内容长度标头时，我得到了 apache“501 方法未实现”。

```
$sock = fsockopen($host,80,$errno, $error);
fwrite($sock, "POST $resource HTTP/1.1\r\n" .
                     "Host: $host\r\n\r\n");
fwrite($sock,fread($readHandle,filesize($file))); 
```

如果我包括内容长度它工作正常。

服务器正在从 php://input 读取

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-28T20:58:19.387

根据 HTTP 规范，您在技术上不需要指定 Content-Length 标头。从[RFC 2616 14.13](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.13)：

> 应用程序应该使用这个字段来指示消息体的传输长度，除非这被第 4.4 节中的规则禁止。

`Content-Length`但是，对于大多数服务器来说，这是一个非常标准的要求，如果标头丢失或指定不正确，它们通常会发回错误响应。出于所有意图和目的，在这种情况下*应该*等同于*MUST*。

问题是（尤其是在保持连接的情况下），服务器不知道您的请求消息何时在没有`Content-Length`标头的情况下实际结束。如果您正在流式传输请求实体主体，另一种选择是发送`Transfer-Encoding: chunked`标头并一次手动发送一个实体主体块。

因此，总而言之，如果您想在消息中发送实体主体但不想发送`Content-Length`标头，那么*您唯一真正的选择是发送分块的 HTTP 消息*。如果您想流式传输该实体主体并且不提前知道它的长度，这基本上是必需的。

## 如何对 HTTP 实体主体进行分块编码以进行流式传输...

`Transfer-Encoding: chunked`表示您正在根据[RFC2616 Sec3.6.1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.6.1)中规定的约束对 HTTP 消息的实体正文进行编码。这种编码格式可以应用于请求或响应（呃，它们都是 HTTP 消息）。这种格式非常有用，因为它允许您在知道实体主体的大小或什至确切地知道该实体主体将是什么之前立即开始发送 HTTP 消息。事实上，这正是 PHP 在`echo`没有发送长度标头（如`header('Content-Length: 42')`.

我不打算详细介绍分块编码——这就是 HTTP 规范的用途——但如果你想流式传输请求实体主体，你需要做这样的事情：

```
<?php

$sock = fsockopen($host,80,$errno, $error);
$readStream = fopen('/some/file/path.txt', 'r+');

fwrite($sock, "POST /somePath HTTP/1.1\r\n" .
              "Host: www.somehost.com\r\n" .
              "Transfer-Encoding: chunked\r\n\r\n");

while (!feof($readStream)) {
    $chunkData = fread($readStream, $chunkSize);
    $chunkLength = strlen($chunkData);
    $chunkData = dechex($chunkLength) . "\r\n$chunkData\r\n";

    fwrite($sock, $chunkData);
}

fwrite($sock, "0\r\n\r\n"); 
```

# asp.net-mvc - 与 SmtpClient.UseDefaultCredentials 属性混淆

> ID：12167381
> 
> 赞同：16
> 
> 时间：2012-08-28T20:54:43.990
> 
> 标签：asp.net-mvc, smtpclient

在我的 MVC4 应用程序中，我使用通过 Gmail 的SMTP 服务器`SmtpClient`发送电子邮件。`smtp.gmail.com`

我已经使用以下设置配置了我的 Web.Config 文件：

```
<system.net>
 <mailSettings>
  <smtp deliveryMethod="Network">
   <network enableSsl="true" 
   defaultCredentials="false" 
   host="smtp.gmail.com" 
   port="587" 
   userName="xxMyUserNamexx@gmail.com" 
   password="xxMyPasswordxx" />
  </smtp>
 </mailSettings>
</system.net> 
```

使用 SmtpClient 并发送电子邮件的方法如下所示：

```
public void SendMail(string fromDisplayName, string fromEmailAddress, string toEmailAddress, string subject, string body)
{
    MailAddress from = new MailAddress(fromEmailAddress, fromDisplayName);
    MailAddress to = new MailAddress(toEmailAddress);
    MailMessage mailMessage = new MailMessage(from, to);
    mailMessage.Body = body;
    mailMessage.Subject = subject;

    SmtpClient client = new SmtpClient();
    //client.UseDefaultCredentials = false;
    client.Send(mailMessage);
} 
```

上面的代码按预期工作并且很好。让我感到困惑的是注释行`client.UseDefaultCredentials = false;`- 如果我取消注释该行，我将收到一条异常消息，指出：

> SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应为：5.5.1 需要身份验证。

更重要的是，无论我将`UseDefaultCredentials`属性设置为`true`or `false`，我仍然会收到异常消息。我避免异常消息的唯一方法是完全删除该行。

这种行为正常吗？您能解释一下为什么我会收到异常消息吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-02T22:29:51.853

> 那么，为什么我要明确地将属性设置为 false 会引发异常呢？

这样做的原因是，如果您将其设置为 false，则 setter`UseDefaultCredentials`将`Credentials`属性设置为 null，或者`CredentialCache.DefaultNetworkCredentials`如果设置为 true，则将其设置为属性。该`DefaultNetworkCredentials`属性[由 MSDN 定义为](http://msdn.microsoft.com/en-us/library/system.net.credentialcache.defaultnetworkcredentials.aspx)：

> DefaultNetworkCredentials 返回的凭据表示应用程序正在运行的当前安全上下文的身份验证凭据。对于客户端应用程序，这些通常是运行应用程序的用户的 Windows 凭据（用户名、密码和域）。对于 ASP.NET 应用程序，默认网络凭据是登录用户或被模拟用户的用户凭据。

当您设置`UseDefaultCredentials`为 true 时，它​​正在使用您的 IIS 用户，并且我假设您的 IIS 用户没有与您使用的任何 SMTP 服务器的帐户相同的身份验证凭据。设置`UseDefaultCredentials`为 false null 会退出已设置的凭据。因此，无论哪种方式，您都会遇到该错误。

下面看一下`UseDefaultCredentials`使用[dotPeek](http://www.jetbrains.com/decompiler/)的设置器：

```
set
{
    if (this.InCall)
    {
        throw new InvalidOperationException(
            SR.GetString("SmtpInvalidOperationDuringSend"));
    }
    this.transport.Credentials = value 
        ? (ICredentialsByHost) CredentialCache.DefaultNetworkCredentials 
        : (ICredentialsByHost) null;
  } 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-01T17:10:04.053

我收到了同样的信息，这让我发疯了。阅读此线程后，我意识到顺序对设置我的凭据很重要。这有效：

```
client.UseDefaultCredentials = false;
client.Credentials = new NetworkCredential(smtpSettings.Username, smtpSettings.Password); 
```

虽然这产生了您描述的错误：

```
client.Credentials = new NetworkCredential(smtpSettings.Username, smtpSettings.Password);
client.UseDefaultCredentials = false; 
```

对于遇到同样问题的其他人，这只是一个仅供参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T21:55:27.557

此选项将设置客户端使用当前登录*用户的默认凭据*

如果您将其设置为 true，那么它将尝试使用用户的凭据。如果您将其设置为 false，那么它将使用为客户端的 Credentials 属性*显式*设置的值，如果未显式设置它们，那么它将尝试匿名连接，如您所见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-08T12:45:04.503

这就是我们可以使用或不使用 NetworkCredentials 创建 SMTP 客户端的方式。我正在使用此代码发送电子邮件。仅当我们不传递凭据并默认进行时，我们才应该使用 client.UseDefaultCredentials。

```
 private SmtpClient InitializeSMTPClient()
        {
            var client = new SmtpClient(_smtpServer, _smtpPort);

            client.UseDefaultCredentials = _useSMTPDefaultCredentials;

            if (_useSMTPDefaultCredentials)
                return client;

            var credentials = new NetworkCredential(_smtpUsername, _smtpPassword);
            client.Credentials = credentials;

            return client;
        }

        SMTPEmailResult SendSMTPEmail(List<string> to_email, List<string> ccEmails, string subject, string message)
        {
            try
            {
                using (var client = InitializeSMTPClient())
                {
                    var mail_message = GetMailMessage(to_email, ccEmails, subject, message);
                    log.Debug("Sending SMTP email.");
                    client.Send(mail_message);
                    log.Debug("SMTP email sent successfully.");
                    return SMTPEmailResult.SendSuccess;
                }
            }
            catch (Exception ex)
            {
                log.Error(ex.Message, ex);
                return SMTPEmailResult.SendFailed;
            }
        } 
```

# c# - 对于允许批量和特定删除的并发队列，我将使用什么数据结构或数据结构组合？

> ID：12167382
> 
> 赞同：9
> 
> 时间：2012-08-28T20:54:47.137
> 
> 标签：c#, algorithm, data-structures, language-agnostic, concurrency

这是我的问题，我需要一个行为类似于 a 的数据结构`queue`，但具有一些其他属性：

*   我应该能够轻松地删除给定的`tag`项目（此队列中的每个项目都有一个`tag`将它们分组）
*   我还需要能够删除一个给定的`key`项目（添加到集合中的所有项目都将具有这样的唯一键）。在这里，如果它简化了事情，我可以删除`tag`，`key`如果它会使其更快。
*   这个集合在并发环境中使用，所以使用尽可能少的锁定会很棒
*   它应该具有队列的通常 FIFO 属性。我不需要访问不在头脑中的项目，但我需要上面的**删除**行为才能工作。

我正在使用 C# 来构建这个解决方案，但我对算法和数据结构定义更感兴趣，因为我几乎不相信任何可用的集合都能满足我的需求。

论文、书籍、博客文章和任何其他类型的参考都非常受欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T22:28:04.707

听起来您可以为队列部分使用并发单链表。对于按键删除部分，您可以保留一个指向队列中节点的并发哈希表（条带锁很容易做到）。

如果该方法失败，请查看数据库系统如何做到这一点。他们*可以同时*做你想做的所有事情。它们在 b-tree 中维护数据的主要副本并维护辅助 b-tree 索引。对于锁定，他们使用并发哈希表。B 树具有很好的并发特性，因为即使在排他锁下更新叶子时，您也可以轻松地共享锁定它们的上部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T01:48:58.777

我认为您可以使用双重多链表和两个哈希表。

*   队列列表的一部分
*   按标签对节点进行分组的另一部分
*   一个用于通过键访问节点的哈希表
*   另一个通过标签访问节点的哈希表

Python 中的示例（对不起……）

**插入一个元素：**

```
 items_table['item_key'] = new_item

 my_queue.tail.next = new_item
 new_item.previous = my_queue.tail
 my_queue.tail = new_item

 new_item.next_by_tag = tags_table['item_tag'] #head of tag's list
 tags_table['item_tag'].previous_by_tag = new_item
 tags_table['item_tag'] = new_item 
```

**按键删除元素：**

```
item = key_table['node_key']

item.next.previous = item.previous
item.previous.next = item.next

item.next_by_tag.previous_by_tag = item.previous_by_tag
item.previous_by_tag.next_by_tag = item.next_by_tag

del item 
```

**按标签删除元素：**

```
def remove_elements_by_tag(tag_head):
    if tag_head == None:
        return
    else:
        remove_elements_by_tag(tag_head.next_by_tag)
        tag_head.next.previous = tag_head.previous
        tag_head.previous.next = tag_head.next 
```

类似的东西。希望能帮助到你。

# c# - 在.Net中共享内存中的对象

> ID：12167383
> 
> 赞同：0
> 
> 时间：2012-08-28T20:54:48.167
> 
> 标签：c#, .net, memory, object

是否可以跨 .NET 应用程序共享内存空间中的自定义对象模型，而无需在每个正常运行的应用程序的内存范围内复制工作内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:12:28.303

这并非不可能，但非常困难。

可以在 CLR 分析器的私有版本下运行您的程序。注入进程的分析器 DLL 随时知道对象的确切位置。然后不同的进程可以使用本机代码共享数据。

# javascript - 使用 Coffeescript 进行 Jquery 验证

> ID：12167386
> 
> 赞同：0
> 
> 时间：2012-08-28T20:55:02.037
> 
> 标签：javascript, jquery, jquery-validate, coffeescript

所以我可以使以下代码在javascript中工作

```
validateSearchForm:=>
    $(@el).find("#form").validate({
      rules:{
        startDateInputBox:{
          dateISO:true,
          endDateInputBox:{lessThan : "#licenseStart"}
        },
        endDateInputBox:{
          dateISO:true
        }
        searchPurposeBox:"required"

      }

      });

  $.validator.addMethod "lessThan",(value,element)-> 
    //do some stuff
  ,"some comment" 
```

但是 lessThan 函数在咖啡中一直未定义。很确定这是一些语法错误 - 任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:50:18.973

你的代码结构是这样的：

```
validateSearchForm: =>
    $(@el).find('#form').validate({ ... })
    $.validator.addMethod "lessThan", (value, element) -> 
        #...
    , "some comment" 
```

所以你在尝试验证表格`$.validator.addMethod` *后打电话。**您应该在尝试使用它们之前*添加所有额外的验证方法，并且您可能应该将它们添加到将验证表单的方法之外。更像这样的东西：

```
# Somewhere in your global application set up...
$.validator.addMethod "lessThan", (value, element) -> 
    #...
, "some comment"

# And then elsewhere...
class Whatever
    #...
    validateSearchForm: =>
        $(@el).find('#form').validate({ ... }) 
```

您必须非常注意 CoffeeScript 中的缩进，缩进提供了代码结构的一半，因此它必须是正确的并且应该是一致的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:24:51.383

我不确定它是否会解决您的问题，但请尝试在没有以下情况下定义您的对象`{}`：

```
rules:
    startDateInputBox:
        dateISO: true,
        endDateInputBox:
             lessThan: "#licenseStart"
    endDateInputBox:
         dateISO: true
    searchPurposeBox: "required" 
```

# javascript - 从任意字符串中的所有 URL 创建链接

> ID：12167391
> 
> 赞同：-3
> 
> 时间：2012-08-28T20:55:14.860
> 
> 标签：javascript, regex

> **可能重复：**
> [如何用链接替换纯 URL？](https://stackoverflow.com/questions/37684/how-to-replace-plain-urls-with-links)

我希望通过解析文本输入（通过 javascript）来查找所有 URL，然后链接它们（包装标签），以便用户可以单击它们，从而使用户的生活更轻松一些。Facebook 甚至 SO 都做了类似的事情，让您了解我在寻找什么。

```
function censorLinks(text) {
    return text.replace(
        new RegExp('(https?://[^\\s]+)', 'g'),
        '<a href="$1" target="_blank">$1</a>'
    );
} 
```

我不需要支持所有协议。我认为现在可以找到 http 和 https。我假设除了`http://`空格之外的所有内容都是一个 URL。这几乎可行，但有一个小问题：如果 URL 以句点结尾，[则句点将被包含](https://ux.stackexchange.com/q/15226/16400)。我想这是一个有效的 URL，但我认为在我的情况下不太可能。我怎样才能预防经期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:00:32.223

就像@Truth 说的那样，这可能是重复的帖子，但是......

我最近在做类似的事情，还没有测试过，但也许这会起作用......

```
 var email = /(\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,6})/gim;
    var url = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;

    function convert(input) {
        return input
            .replace(url,'<a href="$1" target="blank">$1</a>')
            .replace(email, '<a href="mailto:$1">$1</a>');
    } 
```

编辑：修正错字

# python - 如何向 wx.TextCtrl 添加额外数据？

> ID：12167396
> 
> 赞同：0
> 
> 时间：2012-08-28T20:55:48.853
> 
> 标签：python, user-interface, wxpython

如何向 wx.TextCtrl 小部件添加额外数据？

目前我正在使用 GetToolTipString() 方法来添加额外的数据，但这显然是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:07:13.887

如果您正在谈论使用[ComboBox 或 ListBox](http://www.blog.pythonlibrary.org/2010/12/16/wxpython-storing-object-in-combobox-or-listbox-widgets/)向其添加数据，那么您不能。这不是 TextCtrl 的一部分。但是，您可能可以继承 wx.TextCtrl 并添加该功能，或者只是创建某种数据结构，该结构以您添加到控件的数据为键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:58:33.890

嗯 `my_text_control.SetValue("some value to set")` ？

如果你澄清你的问题，我会澄清我的回答

# java - AspectJ 在 Eclipse 中不能正常工作

> ID：12167397
> 
> 赞同：2
> 
> 时间：2012-08-28T20:55:58.233
> 
> 标签：java, spring, aop, aspectj, spring-aop

我试图在java中创建一个简单的程序。

在我的程序中：

1) Person 类 - 带注释的方法

2）方面类。

现在我要做的是在设置人名之前，将一些数据打印到日志文件和控制台。

所以这就是我所做的：

**人员类**

```
package pack.bl;

import org.springframework.stereotype.Component;
import pack.aop.LogLevel;
import pack.aop.TestAnnotation;

@Component
public class Person {

private String name,dest;
public Person(String name,String dest)
{
    this.setName(name);
    this.setDest(dest);
}

public String getName() {
    return name;
}

@TestAnnotation(value=LogLevel.INFO)
public void setName(String name) {
    this.name = name;
    System.out.println("Im " + this.toString() + " My name was changed to " + name);
}

public String getDest() {
    return dest;
}

@TestAnnotation(value=LogLevel.INFO)
public void setDest(String dest) {
    this.dest = dest;
}

@Override
public String toString()
{
    return this.name + "\n";
}

public static void main(String[] args) {
    Person p = new Person("Person1","Kripton");
    p.setName("Person2");
} 
```

}

**方面类**

```
package pack.aop;

import java.util.Arrays;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.aspectj.lang.JoinPoint;
import org.aspectj.lang.Signature;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;
import org.springframework.test.context.ContextConfiguration;

@Aspect
@ContextConfiguration(locations = {
        "applicationContext.xml"})

public class BeforeAdvice {

private Log logger = LogFactory.getLog("Logger");

@Before("@annotation(testAnnotation)")
public void myBeforeLogger(JoinPoint joinPoint,TestAnnotation testAnnotation)
{
    System.out.println("Okay - we're in the before handler...");
    System.out.println("The test annotation value is: " + testAnnotation.value());
    Signature signature = joinPoint.getSignature();
    String methodName = signature.getName();
    String stuff = signature.toString();
    String arguments = Arrays.toString(joinPoint.getArgs());
    logger.info("Write something in the log... We are just about to call method: "
    + methodName + " with arguments " + arguments + "\nand the full toString: "
    + stuff);
} 
```

}

**ApplicationContext.xml 文件：**

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"    
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/aop 
            http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
    http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
    http://www.springframework.org/schema/context 
            http://www.springframework.org/schema/context/spring-context.xsd">

<aop:aspectj-autoproxy/>

<context:component-scan base-package="pack.bl.Person"/> 
```

****注意：*** *LogLevel**是**一个枚举。所以它需要像这样工作，当我运行程序并设置人名时，首先需要转到 Aspect 类中的 'BeforeAdvice'（因为 setName，用**@testAnnotation**注释）方法，然后执行这个方法..之后需要回到setName方法并设置人名。**

还有一件事，testAnnotation 是我创建的 Annotation

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T09:46:45.363

你没有提到任何关于你如何编织你的问题的事情。从我所见，看起来您将作业委托给了 Spring 容器。但是你使用的是 Spring AOP 而不是 AspectJ。尽管您也可以将 AspectJ 注释与 Spring AOP 一起使用。

我的建议是你把它分成两种情况。首先确保编织 AspectJ 方面并使用仅使用的简单建议方法`System.out.println(..)`，然后确保 Spring 配置与您的方面和日志枚举集成。

**使用 AJDT Eclipse 插件**

要启用 AspectJ 编织，最简单的替代方法是使用[AspectJ 插件](http://eclipse.org/ajdt/)并使用编译时编织。在您右键单击您的项目并启用 AspectJ 特性后，您将在代码中看到橙色箭头，其中包含了建议。请参见下图以获取示例。

我不确定你的切入点是否有效。如果您的建议没有在任何地方编织，您应该尝试这个切入点：

```
@Pointcut("execution(@pack.aop.TestAnnotation * *(..)) ")
public void logMethod() {} 
```

并建议这样：

```
@Before("logMethod()")
public void beforeLogMethod(JoinPoint joinPoint) {
    System.out.println("Logging..");
} 
```

**将方面和枚举与 Spring 容器集成**

其次，由于切面是在 Spring 容器之前创建的，因此您必须从 Aspect 的工厂方法中检索切面，`Aspects.aspectOf(pack.aop.BeforeAdvice.class)`或者在 Spring 配置中使用工厂方法。

从 Spring XML 配置中，您可以像这样检索方面（对象）：

```
<bean id="beforeAdvice" class="apack.aop.BeforeAdvice"
    factory-method="aspectOf" /> 
```

您还必须使用工厂方法来检索在 Spring 容器之外创建的记录器。

我写了一篇相关的[博客文章](http://blog.espenberntsen.net/2010/03/18/aspectj-examples-with-pointcuts-based-on-annotations/)，用一个例子解释了你的大部分问题，并用图片说明了 AJDT Eclipse 插件的工作方式。

![在此处输入图像描述](../Images/15a9848675ac140298632b3a4ae25d9c.png)

该图显示了两个箭头，说明了后建议，最后一个箭头说明了周围建议。

# batik - Javascript 不会使用 PNGEncoder 执行

> ID：12167398
> 
> 赞同：1
> 
> 时间：2012-08-28T20:56:07.397
> 
> 标签：batik

我正在尝试使用 batik 中的 PNGEncoder 类将 svg 文件转换为 png 格式。我的代码几乎来自 apache 网站上给出的示例。

```
public void writePng(String pngPath) throws Exception{
        String parentPath=FileUtils.getParentPath(pngPath);
        FileUtils.mkdirs(parentPath);
    PNGTranscoder t = new PNGTranscoder();
    t.addTranscodingHint(PNGTranscoder.KEY_EXECUTE_ONLOAD,new Boolean(true));

    FileInputStream iStream=new FileInputStream(svgPath);
    TranscoderInput input = new TranscoderInput(iStream);

    OutputStream ostream = new FileOutputStream(pngPath);
    TranscoderOutput output = new TranscoderOutput(ostream);

    t.transcode(input, output);

    ostream.flush();
    ostream.close();        
    } 
```

下面是带有嵌入 javascript 的输入 svg 的片段

```
<?xml version="1.0" encoding="UTF-8"?>
<svg contentScriptType="text/ecmascript" height="600" version="1.2" width="800" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs/>
    <script type="text/ecmascript" xlink:href="file:/D:/dev/svn/deathstar/xfltoalsxml/src/js/helper_functions.js"/>
    <script type="text/ecmascript" xlink:href="file:/D:/dev/svn/deathstar/xfltoalsxml/src/js/textFlow.js"/>
            <text id="defid_text_1" transform="matrix(1 0 0 1 269.9 57)"/>
            <script type="text/ecmascript"><![CDATA[var textNode = document.getElementById('defid_text_1');
textNode.setAttributeNS(null,'x',0);
textNode.setAttributeNS(null,'y',0);
textNode.setAttributeNS(null,'font-size',18);
textNode.setAttributeNS(null,'font-family','ArialMT');
document.documentElement.appendChild(textNode);
 textFlow('testdata abcd ',textNode,514.1,0,20,false);
]]></script>
</svg> 
```

每当我尝试运行 writePng 函数时，都会出现异常

```
ava.lang.Exception: Unknown language: text/ecmascript
    at org.apache.batik.bridge.BridgeContext.getInterpreter(BridgeContext.java:575)
    at org.apache.batik.bridge.BaseScriptingEnvironment.getInterpreter(BaseScriptingEnvironment.java:289)
    at org.apache.batik.bridge.BaseScriptingEnvironment.loadScripts(BaseScriptingEnvironment.java:404)
    at org.apache.batik.transcoder.SVGAbstractTranscoder.transcode(SVGAbstractTranscoder.java:214)
    at org.apache.batik.transcoder.image.ImageTranscoder.transcode(ImageTranscoder.java:92)
    at org.apache.batik.transcoder.XMLAbstractTranscoder.transcode(XMLAbstractTranscoder.java:142)
    at org.apache.batik.transcoder.SVGAbstractTranscoder.transcode(SVGAbstractTranscoder.java:156)
    at com.amered.xfltojs.app.FrameToSvg.writePng(FrameToSvg.java:156)
    at com.amered.xfltojs.app.DocData.generateImageData(DocData.java:172) 
```

使用 squiggle 时文件正确显示。

我已经检查了我能想到的所有地方，但找不到任何解释为什么会发生这种情况。希望有人有一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T17:00:44.293

我正在与同样的例外作斗争。出于某种原因，这对我有用：

代替

```
TranscoderInput input = new TranscoderInput(new FileReader("myfile.svg")); 
```

我用

```
String file = new File("myfile.svg").toURI().toString();
TranscoderInput input = new TranscoderInput(file); 
```

# jquery - 当密码匹配时，我需要启用提交按钮。(jQuery)

> ID：12167399
> 
> 赞同：3
> 
> 时间：2012-08-28T20:56:08.243
> 
> 标签：jquery, html, validation

我有一个脚本可以自动告诉人们他们的新密码何时匹配（帐户激活），但我需要找到一种方法来让它启用提交按钮。

这是我的代码：

JS：

```
function checkPasswordMatch() {
    var password = $("#new_password").val();
    var confirmPassword = $("#new_password2").val();

    if (password != confirmPassword) $("#divCheckPasswordMatch").html("<font color=\"red\"><b>Check Passwords</b></font>");
    else $("#divCheckPasswordMatch").html("<font color=\"green\"><b>Passwords Match</b></font>");
}

$(document).ready(function() {
    $("#txtConfirmPassword").keyup(checkPasswordMatch);
});​ 
```

HTML

```
<table>
    <form action="activate_account.php" method="post">
        <tr>
            <td align="right">
                <label for="new_password">Password (6-12 chars):</label>
            </td>
            <td>
                <input type="password" name="new_password" id="new_password" />
            </td>
        </tr>
        <tr>
            <td align="right">
                <label for="new_password2">Again:</label>
            </td>
            <td>
                <input type="password" name="new_password2" id="new_password2" onkeyup="checkPasswordMatch();"
                />
            </td>
        </tr>
        <tr>
            <td>
                <td>
                    <div class="registrationFormAlert" id="divCheckPasswordMatch"></div>
                </td>
                <td>
                    <div id="submit">
                        <input type="submit" value="Activate Account" disabled="disabled" />
                    </div>
                </td>
        </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:07:21.420

你必须这样做：

```
$("#buttonActivate").prop("disabled", false);  // to enable the button 
```

之后不要忘记使用此代码，如果用户决定再次更改密码，那么您的按钮将再次变为非活动状态

```
 $("#buttonActivate").prop("disabled", true); // to disablethe button 
```

只需用这个替换您当前的代码，但*不要忘记更新 HTML*：

## jQuery

```
$(document).ready(function() {
function checkPasswordMatch() {
    var password = $("#new_password").val();
    var confirmPassword = $("#new_password2").val();

    if (password != confirmPassword) {
        $("#new_password").css("background", "red");
        $("#new_password2").css("background", "red");
        $("#buttonActivate").prop("disabled", true);
        return false;
    } else {
        $("#new_password").css("background", "green");
        $("#new_password2").css("background", "green");
        $("#buttonActivate").prop("disabled", false);
        return true;
    }
}
  $("input").keydown(function() {
    var password = $("#new_password").val();
    var confirmPassword = $("#new_password2").val();
    if (password.length >= 6 && confirmPassword.length >= 6) {  // let's check if the password is >= 6 otherwise there is nothing to check
        checkPasswordMatch();
    }
}); 
```

请参阅以下示例中更新的 HTML：

1.  为您的 ID 设置一个 ID `<form>`，比方说`id="accountActivation"`；
2.  `input`将您的按钮更改为`button`并为其设置一个 ID：
    `<button id="buttonActivate" type="submit" disabled="disabled">Activate Account</button>`

## [jsFiddle 工作示例](http://jsfiddle.net/965mG/)

[更新了 jsFiddle 以显示`Passwords mismatch`警告](http://jsfiddle.net/965mG/1/)

我相信它会为你工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:00:40.557

我认为您正在寻找更改属性

```
$("input[type=submit]").removeAttr("disabled"); 
```

请参阅 .removeAttr[此处](http://api.jquery.com/removeAttr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T21:07:11.237

要补充 PoX 的答案，如果您使用的是**jQuery 1.6**或更高版本，您应该使用`prop()`设置*启用*和*禁用*状态的方法：

```
$("input[type=submit]").prop("disabled", false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T21:03:44.013

给你的提交按钮一个 id：

```
<input id="activateAccountButton" type="submit" value="Activate Account" disabled="disabled" /> 
```

然后在您的检查密码功能中添加：

```
function checkPasswordMatch() {
    var password = $("#new_password").val();
    var confirmPassword = $("#new_password2").val();

    if (password != confirmPassword)
        $("#acivateAccountButton").attr("disabled","disabled");
        $("#divCheckPasswordMatch").html("<font color=\"red\"><b>Check Passwords</b></font>");
    else
        $("#acivateAccountButton").removeAttr("disabled"); 
        $("#divCheckPasswordMatch").html("<font color=\"green\"><b>Passwords Match</b></font>");

} 
```

还要确保您在服务器端进行了验证！！！

# asp.net - ASP.NET 和 ASP.NET MVC 有什么区别？

> ID：12167401
> 
> 赞同：19
> 
> 时间：2012-08-28T20:56:25.563
> 
> 标签：asp.net, asp.net-mvc

当谈到 ASP.NET 时，我是一个完整的初学者，但我想学习它以构建最终将与云托管 SQL 服务器通信的 Web 应用程序。但是，我找不到任何概述 ASP.NET Web 应用程序和 ASP.NET MVC2 Web 应用程序（在 Visual Studio 2010 中）之间区别的信息，所以我不知道从哪里开始。谁能给我一个简单的解释/大纲，以便我可以决定要遵循的教程？

谢谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-29T14:27:14.493

ASP.NET 是一个网络平台。它提供了一个位于 IIS（Web 服务器）之上的层，有助于创建 Web 应用程序和 Web 服务。ASP.NET MVC 是专门用于构建 Web 应用程序的框架。它位于 ASP.NET 之上并使用 ASP.NET 提供的 API。ASP.NET Web Forms 是另一个专门用于构建 Web 应用程序的框架，而新的 ASP.NET Web API 是一个用于构建 Web 服务的平台。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-28T21:44:14.167

ASP.NET 在最基本的层面上为您提供了一种方法，可以在事件驱动的编程模型中提供通用 HTML 标记以及服务器端“控件”，该模型可以与 VB、C# 等一起使用。您定义站点的页面，放入控件，并提供程序化管道以使其全部工作。

ASP.NET MVC 是一个基于*模型-视图-控制器*架构模式的应用程序框架。这可能被认为是实现网站的特定方式的“固定”框架，页面充当“控制器”并将请求分派到应用程序中的适当页面。这个想法是对应用程序的各种元素进行“分区”，例如业务规则、表示规则等。

将前者视为实施您或多或少从头开始设计的站点架构的“空白板”。MVC 提供了一种机制，用于围绕应用程序访问的预定“模式”设计站点，如果这有意义的话。可以肯定的是，它还有更多的技术细节，但就问题而言，这就是镍之旅。

祝你好运！

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-28T21:00:01.843

ASP.NET MVC2 Web 应用程序基于 MVC 模式以方便单元测试，无需模拟管道 asp.net，因为它非常困难。您没有代码背后的代码，以便将代码图形和代码功能分开。

使用 MVC，您的应用程序变得独立于视图。您可以轻松替换创建视图的技术。

阅读这篇文章很有趣：http: [//msdn.microsoft.com/en-us/magazine/dd942833.aspx](http://msdn.microsoft.com/en-us/magazine/dd942833.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-15T10:57:35.857

这里有一个很好的材料 [http://www.webdevelopmenthelp.net/2013/10/Difference-between-ASP.NET-WebForm-And-ASP.NET-MVC.html](http://www.webdevelopmenthelp.net/2013/10/Difference-between-ASP.NET-WebForm-And-ASP.NET-MVC.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T21:04:30.440

如果您有 VS10，请制作一个小型 ASP.NET (webforms) 应用程序和一个小型 ASP.NET MVC 2 应用程序，并检查它们之间的差异。这是一个很好的学习方式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-27T12:08:28.147

ASP.NET 是一个网络平台。它提供了一个位于 Web 服务器之上的层，有助于创建 Web 应用程序和 Web 服务。ASP.NET 是专门用于构建 Web 应用程序的框架。它位于 ASP.NET 并使用 ASP.NET 提供的 API。ASP.NET Web Forms 是另一个专门用于构建 Web 应用程序的框架，而新的 ASP.NET Web API 是一个用于构建 Web 服务的平台

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-24T07:37:55.480

与 ASP.Net Web 表单一样，ASP.Net MVC 是在 Microsoft .net 框架中构建 Web 应用程序的开发模型。它们之间的主要区别在于 ASP.net MVC 是基于 MVC 架构的。我们有 3 个独立的层——模型、视图控制器，它们相互交互以呈现 HTML 输出。

主要区别

1.  Web 表单主要是具有事件驱动的模型。我们有页面级事件（Page_load、预渲染、page_init 等）和控制级事件。这不是 MVC 的情况。请求生命周期相对复杂。（为什么复杂，因为请求必须经过所有事件才能呈现 HTML 输出）

2.  Web 表单基本上有一个包含 UI 控件和代码隐藏文件的 aspx 页面。所有的页面级事件和控制级事件都在这里处理。在 MVC 中，视图、模型、控制器可以独立存在（提供明确的关注点分离）

3.  SOC 使开发更容易，因为我们可以为 View（设计 html）和控制器（实现业务逻辑）拥有单独的开发人员

4.  由于这种紧密耦合的性质，Web 表单不适合单元测试。在 MVC 中，我们可以在控制器级别和操作方法级别编写单元测试。在这里，我们可以模拟要传递给视图的数据，并为它们的不同属性（如视图名称、模型属性、空检查等）断言操作方法的结果

5.  在 Web 表单中，我们有状态完整的行为。ASPX 页面中的服务器控件使用视图状态在请求响应周期内保持其状态。由于此视图状态存储为页面本身内部的隐藏控件，并且它们是在请求和响应周期中发送的，因此它们变得更加繁重。视图状态的缺失和 MVC 的无状态特性使其重量更轻。因此，它们在请求生命周期中要快得多。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-04-26T06:01:33.347

ASP.NET 是一个 2 层应用程序，其中没有单独的数据库部分，而 MVC 是一个 3 层应用程序，其中视图和逻辑是分开的。在 ASP.NET 中，为每个`.aspx`表单生成一个 URL，但在 MVC 中，URL 是基于控制器和路由器配置生成的。

# ruby - 如何使用 mongoid 查询具有非空数组的项目？

> ID：12167403
> 
> 赞同：6
> 
> 时间：2012-08-28T20:56:37.190
> 
> 标签：ruby, mongodb, mongoid

我有以下代码按预期工作：

```
Mongoid::Criteria.new(Question).where(:related_question_ids.size => 0) 
```

但是，我想执行查询以返回相关问题数组大于 0 的问题。例如，

```
Mongoid::Criteria.new(Question).where(:related_question_ids.size.gte => 0) 
```

有没有办法用 mongoid 或 mongodb 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-06-02T13:30:41.170

此查询搜索是否存在 related_question_ids[0] 字段中的任何对象

使用 js 外壳

`db.questions.find("related_question_ids.0": {exists => true} )`

使用 mongoid

`Mongoid::Criteria.new(Question).where(:"related_question_ids.0".exists => true)`

您可以搜索更大的任何尺寸

`Mongoid::Criteria.new(Question).where(:"related_question_ids.3".exists =>true)`

这解决了你的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T19:35:54.867

您可以使用[$size 运算符](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24size)按数组大小进行查询。考虑以下使用 JS shell 的示例：

```
> db.foo.drop()
> db.foo.insert({_id: 1, x:[1,2]});
> db.foo.insert({_id: 2, x:[]});
> db.foo.insert({_id: 3, x:3});

> db.foo.find({x: {$size: 0}})
{ "_id" : 2, "x" : [ ] }

> db.foo.find({x: {$size: 1}})

> db.foo.find({x: {$size: 2}})
{ "_id" : 1, "x" : [ 1, 2 ] }

> db.foo.find({x: {$not: {$size: 2}}})
{ "_id" : 2, "x" : [ ] }
{ "_id" : 3, "x" : 3 }

> db.foo.find({x: {$not: {$size: 0}}})
{ "_id" : 1, "x" : [ 1, 2 ] }
{ "_id" : 3, "x" : 3 } 
```

我不熟悉 Mongoid，但我`$size`在[本文档](http://mongoid.org/en/mongoid/docs/querying.html)中找到了一个使用示例。

需要注意的两个问题`$size`是它不能利用索引（查询的其他部分当然可以）并且不能在范围查询中使用。如果您不介意额外的簿记，一个可行的选择是将数组的大小存储在单独的字段中（可能已编入索引）并以您喜欢的任何方式查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-06T16:55:35.740

另一种方法是使用`.nin`查询的 (Not IN) 形式：

```
Mongoid::Criteria.new(Question).where(:related_question_ids.nin => [nil,[]]) 
```

这只会返回一个问题，其中 related_question_ids 不是 nil 并且不是空数组。

相反，您可以定义`:related_question_ids`一个默认值 ( `:default => []`)，然后只需要查询`.ne`(Not Equal)，如下所示：

```
Mongoid::Criteria.new(Question).where(:related_question_ids.ne => []) 
```

要么应该工作。

# c# - 访问数据库不更新

> ID：12167409
> 
> 赞同：1
> 
> 时间：2012-08-28T20:57:05.153
> 
> 标签：c#, database, ms-access

我正在尝试使用以下字符串连接来访问 2010 数据库。但是，它不会对数据库进行任何更改。

```
OleDbConnection conn = new OleDbConnection("Provider=Microsoft.ACE.Oledb.12.0;Data Source=C:\\Program Files\\LogEntry\\LogEntry.accdb; Persist Security Info = False;");

conn.Open();

String text2send = "INSERT INTO TLC(Name,Department,Position,VisitDate,InTime,OutTime,Purpose,HelpedBy,Campus,HelpCode) VALUES(" + name + "," + department + "," + position + "," + date + "," + hourIn + "," + hourOut + "," + purpose + "," + helpedBy + "," + campus + "," + helpcode + ");";

OleDbCommand cmd = new OleDbCommand(text2send,conn);
conn.Close(); 
```

编辑：这是我用于参数查询的编辑代码。

```
 String name = nameTextbox.Text;
 String department = departmentCBox.Text;
 String purpose = purposeTextbox.Text;
 String position = positionCBox.Text;
 String date = inDate.Value.ToString("MM/dd/yyyy");
 String helpCode = helpCodeCBox.Text;
 String hourOut = ""+OutHour.Text+":"+OutMin+" "+OutMeredian;
 String helpedBy= "";
 String campus= "";
 String helpcode= "";
 String hourIn = "" + DateTime.Now.ToString("hh") + ":" + 

 DateTime.Now.ToString("mm") + " " + DateTime.Now.ToString("tt");

 OleDbConnection conn = new OleDbConnection("Provider=Microsoft.ACE.Oledb.12.0;Data Source=C:\\Program Files\\LogEntry\\LogEntry.accdb; Persist Security Info = False;");
            conn.Open();

 String text2send = "Insert Into TLC([Name],[Department],[Position],[VisitDate],[InTime],[OutTime],[Purpose],[HelpedBy],[Campus],[HelpCode]) VALUE(?,?,?,?,?,?,?,?,?,?);";

 OleDbCommand cmd = new OleDbCommand(text2send,conn);
 cmd.Parameters.AddWithValue("Name", name);
 cmd.Parameters.AddWithValue("Department", department);
 cmd.Parameters.AddWithValue("Position", position);
 cmd.Parameters.AddWithValue("Purpose", purpose);
 cmd.Parameters.AddWithValue("HelpedBy", helpedBy);
 cmd.Parameters.AddWithValue("Campus", campus);
 cmd.Parameters.AddWithValue("HelpCode", helpcode);

 cmd.ExecuteNonQuery();
 conn.Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T20:59:57.900

`cmd.ExecuteNonQuery();`在创建命令之后关闭连接之前添加

# svn - 在 svn 中升级 OpenCart

> ID：12167418
> 
> 赞同：2
> 
> 时间：2012-08-28T20:57:42.837
> 
> 标签：svn, diff, upgrade, patch, opencart

我当前的 OpenCart 安装基于**v1.5.2.1**（我们称之为**Orig_V1**）。

然后我对其进行了大量修改并将其提交到我的 SVN 存储库中（我们称之为**Mod_V1**，SVN rev: r1）。

现在我想将它升级到**v1.5.4.1**（我们称之为**Orig_V2**）并保留我对**Mod_V1 所做**的修改（我们称之为**Mod_V2**）。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:06:50.487

您可以使用合并和比较软件将您的软件与新升级进行比较。周围有很多开源。在这里试试。

[http://www.noupe.com/tools/25-useful-document-and-file-comparison-tools.html](http://www.noupe.com/tools/25-useful-document-and-file-comparison-tools.html)

Winmerge是一个很好的。我使用带有比较插件的记事本++。我最终需要自己做同样的事情！

# parameters - 将参数传递给 dpkg -i?

> ID：12167420
> 
> 赞同：9
> 
> 时间：2012-08-28T20:57:45.143
> 
> 标签：parameters, installation, debian, dpkg

有什么方法可以将参数传递到 dpkg -i 中，然后可以由 preinst 和 postinst 使用？我对此进行了调查，想知道是否可以使用 $1 或 $2 来引用这些参数

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T13:59:37.840

不，您不能以这种方式传递参数。

您可以通过这种方式设置环境变量

```
$ VARIABLE=foo dpkg --install package.deb 
```

或者（更好）使用[debconf](http://www.debian.org/doc/packaging-manuals/debconf_specification.html)向用户提问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-03T07:57:29.950

您知道，应用程序的参数通过`debconf-get-selections`命令可见。IE`debconf-get-selections | grep myapp`

假设您的 deb 包有两个可用参数，因此您可以像这样执行非交互式安装：

```
echo myapp myapp/param1 string 8888 | debconf-set-selections
echo myapp myapp/param2 boolean true | debconf-set-selections
DEBIAN_FRONTEND=noninteractive dpkg -i blablabla.deb 
```

现在，您可以在 preinst 和 postinst中使用`param1`and 。`param2`

# android - 从 ViewPager 片段中隐藏 Android 应用程序中的软键盘

> ID：12167422
> 
> 赞同：9
> 
> 时间：2012-08-28T20:57:52.680
> 
> 标签：android, android-fragments, android-viewpager, android-softkeyboard

我有一个包含带有 2 个片段的 ViewPager 的 Android 应用程序。第一个片段包含一个 EditText 字段。当应用程序启动时，该字段立即成为焦点并启动软键盘（我希望发生这种情况）。第二个片段只包含一个列表（没有可编辑的文本字段）。当我从片段 1 滑动到片段 2 时，我希望键盘消失。我尝试过的任何方法似乎都不起作用。键盘不仅保留在视图中，还继续更新片段 1 的 EditText 字段。

我想我要么使用不正确的代码来隐藏键盘，要么将其放置在不正确的位置。如果有人可以发布正确实施的示例，将不胜感激！

我最近的尝试是将应该隐藏键盘的代码放在片段 1 的 onDetach() 方法中：

```
@Override
public void onDetach()
{
    super.onDetach();

    InputMethodManager imm = (InputMethodManager) this.context.getSystemService(Context.INPUT_METHOD_SERVICE);

    // I'VE TRIED ALL THREE BELOW, NONE OF THEM WORK...

        // imm.hideSoftInputFromWindow(this.messageView.getWindowToken(), 0);
        // imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0);
        // this.context.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-30T15:35:30.057

看到[这个答案。](https://stackoverflow.com/a/12422905/769501)基本上，您需要让 ViewPager`OnPageChangeListener`为您隐藏键盘。（如果您希望滑动动画保持流畅，请在`onPageScrollStateChanged`而不是.）中执行此操作`onPageSelected`。）

```
@Override
public void onPageScrollStateChanged(int state)
{
    if (state == ViewPager.SCROLL_STATE_IDLE)
    {
        if (mViewPager.getCurrentItem() == 0)
        {
            // Hide the keyboard.
            ((InputMethodManager)getSystemService(INPUT_METHOD_SERVICE))
                .hideSoftInputFromWindow(mViewPager.getWindowToken(), 0);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:04:18.050

在您的 AndroidManifest 中，您应该添加到 Activity 声明 android:windowSoftInputMode="stateHidden"：

```
<activity 
        android:name="YourActivity"            
        android:windowSoftInputMode="stateHidden">           
</activity> 
```

并在您的布局中从 EditText 的子 requestFocus 中删除：

```
<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="15dp"
    android:ems="10" >
    <requestFocus />
</EditText> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-29T09:55:17.280

```
 getActivity().getWindow().setSoftInputMode(
                  WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

# .net - 实体框架中的动态 LINQ 比较日期

> ID：12167424
> 
> 赞同：6
> 
> 时间：2012-08-28T20:58:08.137
> 
> 标签：.net, linq, entity-framework, linq-to-entities, dynamic-linq

我正在使用带有实体框架的动态 linq 库并想比较日期。我已经成功地根据下面的 SO 文章扩展了库[但是](https://stackoverflow.com/questions/2818044/linq-to-sql-dynamic-query-with-date-type-fields)我似乎无法让库只比较我的实体对象的 DateTime 属性的日期部分，就像我对普通 linq 表达式所做的那样。

我想要做的是让动态 linq 创建一个像这样的 lambda：

```
// Compare just dates
p => p.CreatedDate.Value.Date == '2012/08/01' 
```

而不是：

```
// Compares date + time
p => p.CreatedDate == '2012/08/01' 
```

对此的任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T21:26:33.473

Dynamic Linq 解析器支持该类型的所有公共成员`System.DateTime`，包括`Date`属性。所以你可以做类似的事情

```
DateTime comparisonDate = new DateTime(2012, 8, 1);
var query = items.Where("CreatedDate.Value.Date == @0", comparisonDate); 
```

**更新**：如果您使用的是实体框架，此示例将不起作用，因为它不支持将`DateTime.Date`属性转换为 SQL。通常您可以使用该`EntityFunctions.TruncateTime()`函数来实现相同的效果，但是如果不进行修改，Dynamic Linq 解析器将无法访问该函数。但是，您应该能够执行类似于以下的操作（尚未测试）：

```
var query = items.Where("CreatedDate.Value.Year == @0.Year && CreatedDate.Value.Month == @0.Month && CreatedDate.Value.Day== @0.Day", comparisonDate); 
```

# visual-studio-2010 - Visual Studio 中的 Lesscss

> ID：12167425
> 
> 赞同：2
> 
> 时间：2012-08-28T20:58:14.253
> 
> 标签：visual-studio-2010, visual-studio, less, visual-studio-2012

是否可以在 Visual Studio 中使用 lesscss 而不会出错并使用 IntelliSense 更好地编码？

*pm*我正在使用[这个](http://visualstudiogallery.msdn.microsoft.com/dd5635b0-3c70-484f-abcb-cbdcabaa9923)，但我仍然收到错误。

**更新1**

我试过[了，](http://www.mindscapehq.com/products/web-workbench)但 VS 仍然显示错误：

```
#t1 {
    .shadow;
    .transition;
    .radius;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T13:01:11.127

Web Essentials 2012 是另一个。它真的很好。

[http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)

我认为它是由开发 BlogEngine.Net 的同一个人创建的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T12:59:23.147

我只是通过谷歌搜索发现了这个网站，但我没有任何使用它的经验。

[http://www.mindscapehq.com/products/web-workbench](http://www.mindscapehq.com/products/web-workbench)

# javascript - 空变量的 Else 语句

> ID：12167430
> 
> 赞同：0
> 
> 时间：2012-08-28T20:59:00.287
> 
> 标签：javascript

我有我写的这个 javscript，我希望当 bgimage 不等于 7 时发生“else”事件。我已经研究了这个问题，但不清楚如何检查变量是否为 null 或未定义。目前，当 bgimage 不等于 7 时，Firebug 只会说“bgimage 未定义”。

感谢您提前教我如何做到这一点。

```
if (bgimage == 7)
{
document.writeln("\n<img src='/v/vspfiles/templates/donnell/images/Company/services_bg.jpg' id='bg' />");
}
else
{
showImage();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:01:07.137

检查变量的类型以确定它是否未定义：

```
if (typeof bgimage != 'undefined' && bgimage == 7) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:01:21.140

如果在当前或更高范围内`bgimage`未声明 with `var`（或未在没有 的情况下将值分配为全局变量`var`），则当您在语句中使用它时，`if`您将收到该错误。您可以按如下方式进行测试：

```
if (typeof bgimage === "undefined") {
    // hasn't been declared, or is set to undefined
    // do something
} else if (bgimage == 7) {
    // etc 
```

或者在一行中测试：

```
if (typeof bgimage != "undefined" && bgimage == 7) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T21:01:56.213

您可以使用 测试变量是否未定义`typeof`，然后将其与您的原始条件相结合：

```
if (typeof(bgimage) != "undefined" && bgimage == 7) 
```

因此`else`，如果 bgimage 未定义或已定义但不等于 7，则现在将使用您的代码部分。

# css - 如何使用由三倍 RGB 值定义的色带计算新的类似颜色渐变？

> ID：12167432
> 
> 赞同：4
> 
> 时间：2012-08-28T20:59:08.897
> 
> 标签：css, math, colors, gradient, background-color

给定一组 3 种颜色，保持相同的比例，但从一种新颜色开始，生成接下来的两种颜色。

例如，以下是令人愉悦的蓝色渐变：

`rgb(172, 228, 248)`- 开始

`rgb(108, 205, 243)`- 结束

`rgb(121, 181, 203)`- 边界

我需要从不同的颜色开始创建一系列 10 个相似的渐变。我希望渐变保持相同的明暗比。

那么，给定颜色：（`rgb(254, 218, 113)`黄色），我如何以与上述相同的比率计算结束颜色和边框颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:13:57.707

这是我的尝试：假设您最初的三种颜色是：

```
rgb(a1, b1, c1) --> Start
rgb(a2, b2, c2) --> Finish
rgb(a3, b3, c3) --> Border 
```

并假设您要计算类似图案的颜色是`rgb(x1, y1, z1)`。其他两个组件的计算方式如下：

```
x2 = (a2 / a1) * x1, y2 = (b2 / b1) * y1, z2 = (c2 / c1) * z1
x3 = (a3 / a2) * x2, y3 = (b3 / b2) * y2, z3 = (c3 / c2) * z2 
```

因此，您得到的颜色是`rgb(x2, y2, z2)`和`rgb(x3, y3, z3)`。

这是在示例颜色 ( ) 上应用上述方法的结果`rgb(254, 218, 113)`：

![在此处输入图像描述](../Images/a829a679985424535edf58aa596bf4b2.png)

产生的两种颜色是`rgb(159, 196, 110)`和`rgb(178, 173, 92)`（请注意，它们被四舍五入为整数/整数）。

我希望以任何方式有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:24:28.680

一个非算法解决方案（阅读：手册），以防您找不到更有趣的东西：

[http://colorschemedesigner.com/](http://colorschemedesigner.com/)

或[http://kuler.adobe.com](http://kuler.adobe.com)

您的颜色有一个优势：它们都在同一“行”中，因此与您可以使用单色或互补功能获得的自动值非常相似：

![在此处输入图像描述](../Images/3f7a4974df99dcf6240449c97320d9f7.png)

它们应该（理论上）是一种简单的计算方法，因为它们在一条线上并且将保持相同的距离，但是因为我不知道它是如何完成的，所以您可以手动进行（kuler 使用 RGB 以及HEX 和其他格式）。

# java - 如何将 JSON 字符串转换为字符串数组？

> ID：12167433
> 
> 赞同：0
> 
> 时间：2012-08-28T20:59:12.037
> 
> 标签：java, android

我制作了一组数据并放入一个`JSON`数组并将其转换为字符串，以便我可以将其存储到我的 sqlite 数据库中。当我把它拿出来时，它是 a`String`并且它具有`JSON`数组的形式：

```
String temp = ["0", "1", "2", "3",.....] 
```

有什么简单的方法可以让我把它变成一个字符串数组、JSON 数组或者我必须使用旧的时尚方法（子字符串、split.etc）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T21:03:52.500

`JSONArray`您可以通过构建一个新实例轻松地将其变回 a ：

```
String jsonString;  //The string data you pulled out of the DB
JSONArray array = new JSONArray(jsonString); 
```

如果您需要更进一步，您可以遍历数组并将其变成一个集合：

```
ArrayList<String> items = new ArrayList<String();
for(int i=0; i < array.length(); i++) {
    items.add(array.optString(i));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:03:43.503

尝试这样做：

```
JSONArray jArray = new JSONArray(jsonString); 
```

它只会将您的 json 字符串（由**[...]**标识）转换为`JSONArray`.

# c# - UrlHelper.GenerateContentUrl 是如何工作的？

> ID：12167435
> 
> 赞同：2
> 
> 时间：2012-08-28T20:59:17.900
> 
> 标签：c#, asp.net-mvc-3

我不明白，我有这个代码：

```
return JavaScript(string.Format(
   "window.location = '{0}'",
   UrlHelper.GenerateContentUrl("Index", this.HttpContext))); 
```

该代码位于两个可与 POST 一起使用的非常通用的“创建”方法中。这两种方法中的每一种都在不同的控制器类中。

现在对于使用 URL 调用的方法**A**`http://localhost:56688/Businessrule/Create`，当代码执行时，我被重定向到`http://localhost:56688/Index`。

但是对于从我调用的方法**B**`http://localhost:56688/FormulaField/Create` ，我被重定向到`http://localhost:56688/FormulaField/Index`.

...真的我不明白，微软文档并没有多大帮助[http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.generatecontenturl.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.generatecontenturl.aspx)（现在，恕我直言，这是一个非常糟糕的方法文档）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:11:43.563

听起来您缺少控制器名称。显然，您将被重定向到同一控制器中的 Index 操作。

这就是 MVC Route 引擎所做的，如果他没有找到控制器名称，他会分配一个默认值，在这种情况下，动作已经执行的控制器来自 wwitch。

尝试类似：

```
UrlHelper.GenerateContentUrl(@"~\ControllerName\Index", this.HttpContext) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:44:26.117

因此，正如**asawyer**所指出的，它的工作原理由代码本身回答：

[https://github.com/aspnet/AspNetWebStack/blob/master/src/System.Web.Mvc/UrlHelper.cs](https://github.com/aspnet/AspNetWebStack/blob/master/src/System.Web.Mvc/UrlHelper.cs)

事实证明，如果您传递的字符串以“~”开头，则该方法将调用 PathHelpers.GenerateClientUrl，但如果字符串不以“~”开头，则它只会返回不变的相同字符串。

但我仍然不明白为什么我会得到不同的结果。无论如何，我似乎必须更接近传递给浏览器的原始响应......

# php - PHP 在文件中写入俄语字母

> ID：12167437
> 
> 赞同：1
> 
> 时间：2012-08-28T20:59:23.220
> 
> 标签：php, encoding

```
 $fp = fopen("tmp/$filename",'wb');
 fwrite($fp, $description, strlen($description));
 fclose($fp); 
```

你好。变量 $description 包含俄语字符。写入文件后，将显示以下字符：

％u041A％u0430％u0436％u0435％u0442％u0441％u044F％u044F％u043F％u043E％u043D％u044F％u043B，％u043A％u0430％u043A％u0432％u0441％u0442％u0430％u0432％u043B％u044F％u0442％ u044C %u0438%u0437%u043E%u0431%u0440%u0430%

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:02:43.807

如果您只需要存储它们，则可以在将它们写入文件之前使用 base64 或任何其他编码对它们进行编码。

# java - 将 Web 服务与 Java 中的其他后端重计算服务分离

> ID：12167438
> 
> 赞同：2
> 
> 时间：2012-08-28T20:59:28.807
> 
> 标签：java, web-services, spring-mvc, scalability, tomcat7

### Web应用程序的背景：

我正在使用 java/spring-mvc/tomcat 来提供我的 Web 服务，并将我的 restful API 暴露给移动客户端。我现在对网络表面上的一切都很满意。问题是我的应用程序的核心有一个非常繁重的计算过程，它调用一个单独的 Java 程序来处理图像并将计算数据返回给 Web 服务。它有时会占用我的大量 EC2 实例内存，或者导致关闭我的 Tomcat7 服务器的异常。

### 问题：

现在一切都在同一个tomcat7容器下运行，我正在寻找一种解耦这两个的解决方案，以便我可以将它们安装在不同的服务器上，也许可以单独为计算程序找到一个高内存服务器。

有哪些选项可以让我将它们解耦并提高可扩展性和稳定性？

### 更新：

我可以以编程方式或从命令行调用计算引擎。

### 更新2：

我根据答案做了一些研究。当我在另一篇文章中阅读有关[Apache Camel 到底是什么？](https://stackoverflow.com/questions/8845186/what-exactly-is-apache-camel)，我觉得我可能应该多学习一些关于 EIP 模式的知识。希望这不是矫枉过正。

### 基于建议的解决方案

通读了EIP概念、camel in action、activemq，终于想出了一个解决方案。它可能不优雅，但它正在工作。建议和意见将不胜感激！我编写了一个基于 apache-camel 的队列路由器，连接到 activemq 代理并在一台服务器上作为独立程序运行。在独立容器中运行的计算引擎和路由器负责处理来自 web 服务器中我的 spring 容器的 jms 请求者。稍后，如果需要进一步的密集计算，我只需要从骆驼配置计算引擎的负载平衡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:13:19.030

现在指向的是添加更多硬件。你需要考虑一下这是否能解决你的问题。例如：如果您使用的是 32 位 JVM，那么您可以指定多少堆大小是有限制的。如果幸运地拥有 64 位 JVM，那么您将拥有更大的内存空间。但是总是有可能使用过多的 CPU 导致您的应用程序变得无响应。

我更喜欢将计算密集型任务分解为作业并在单独的 JVM 中解决它们。将您的作业保存在数据存储/JMS 中，以免它们丢失。如果您从这些作业中进行数据库更新，请小心以避免任何锁定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T01:56:27.827

如果我理解正确，您似乎需要一个负载平衡器。

1.  有一个负载均衡器来路由到您的 Web 服务/计算引擎的多个实例之一。您可以使用 esb、路由引擎、集群、主从、分布式缓存等实现这一点，其中大多数是相互关联的。您还可以根据负载在 EC2 上实时启动其他节点。

2.  否则，如果任务可以中断，则将其委托给多个节点/服务。您将需要一些编排机制。

有开源解决方案可以解决上述 1 和 2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T22:23:27.407

后端是否同步工作？我的意思是，当移动客户端请求某些东西时，他们是否必须等待后端进行大量处理？

如果是，您可以水平增长，放置更多工作节点（后端 Web 应用程序）和前端 Nginx 或任何平衡器。这是最快的方法。

你有可重用的数据吗？如果是，您可以使用 memcached 之类的东西。

希望它有所帮助，如果您向我们提供更多信息，我很确定我们会提供更好的建议。

# python - numpy.linalg.svd 不按降序返回 Sigma

> ID：12167439
> 
> 赞同：1
> 
> 时间：2012-08-28T20:59:38.207
> 
> 标签：python, sorting, numpy, svd

我目前使用 numpy.linalg 的 svd 函数在大矩阵（准确地说是图像）上计算 SVD。我发现的文档和示例似乎都表明返回的 Sigma 值按降序排序（暗示 U 和 V^T 的正确排序）。

但是，在我的测试中，sigma 值似乎是无序的。所以我的问题是，由于某种原因，我的 linalg 是否出了问题（我知道极不可能），或者它是否只是将 sigma 的返回无序？

后续问题是对 sigma 进行排序的最佳方法，以便 U 和 V^T 中的顺序也反映变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T13:41:34.910

由于`linalg.svd`只是 LAPACK`dgesdd`的一个接口，因此应该对奇异值进行排序。

```
>>> import numpy as np
>>> A = np.random.randn(2400,3600)
>>> U, s, V = np.linalg.svd(A, full_matrices=False)
>>> np.allclose(A, np.dot(U*s, V))
True
>>> (s[:-1] >= s[1:]).all()
True 
```

如果您得到无序的结果，请检查结果是否正确，如上例所示。如果不是，您可能有一个[lapack 错误](http://www.netlib.org/lapack/bug_list.html)或（不太可能）一个 numpy 错误。

# android - 上传带有 android 手机间隙的图片，但直到我按下提交才发送

> ID：12167440
> 
> 赞同：0
> 
> 时间：2012-08-28T20:59:46.197
> 
> 标签：android, cordova, camera, image-uploading

嗨，我是使用 Phonegap 开发的新手。

我想要做的是让用户填写表格并可以选择添加图片（来自相机或画廊）。拍完照片后，我希望用户手动提交包含所有字段和所选图片的整个表单。我的问题是使用 phonegap 选择后立即上传图片。我查看了 [zac vineyards 代码示例](http://zacvineyard.com/blog/2011/03/upload-a-file-to-a-remote-server-with-phonegap)，但无法确切知道如何推迟上传。

1.  如何推迟上传，直到用户提交表单？
2.  图片是否与特定的输入字段相关联？以及如何使用php在服务器端识别它我命令将它上传到服务器

这对你们中的一些人来说可能很明显，但我已经搜索并没有得到明确的答案。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T14:38:26.563

在这里你可以看到一些文件上传的例子[文件上传Phonegap](http://docs.phonegap.com/en/1.7.0/cordova_media_capture_capture.md.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T00:48:02.403

好吧，如果我们能看到您的一些代码，那么回答起来会容易得多。尽管您需要做的只是拥有一个在用户单击按钮之前不会执行的提交方法。在该方法中，您将创建 FileTransfer 对象并上传图像和数据。

# php - 用 Preg_replace 删除汉字？

> ID：12167441
> 
> 赞同：3
> 
> 时间：2012-08-28T20:59:57.013
> 
> 标签：php

我正在尝试从字符串中删除中文字符。试过这个，但不能让它工作。它说：

> **警告：** preg_replace() [function.preg-replace]：编译失败：\x{...} 序列中的字符值在偏移量 9 处太大

```
preg_replace('/[^\x{4e00}-\x{9fa5}]+/', '', $string) 
```

我怎样才能得到这个工作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T21:02:57.367

> 在 UTF-8 模式下，允许使用 "\x{...}"，其中大括号的内容是一串十六进制数字。

您似乎没有处于 UTF-8 模式。要启用此模式，请将`u`修饰符添加到正则表达式的末尾。

# ruby - 在 Ruby 中重用线程之间的连接/替换 Net::HTTP::Persistent

> ID：12167445
> 
> 赞同：2
> 
> 时间：2012-08-28T21:00:12.283
> 
> 标签：ruby, multithreading, thread-safety, net-http

我正在运行一个多线程守护程序，其中一个 ruby​​ Mechanize 实例（其中包含一个 Net::HTTP::Persistent 对象）可能由多个线程之一使用和运行。我遇到了很多问题，因为 Net::HTTP::Persistent*为每个运行它的线程*打开一个新连接，所以如果我有 50 个线程，我最终打开的连接比我需要的多 50 倍！我已经尝试对 Net::HTTP::Persistent 进行子类化和修补，以将其连接信息存储为其类的一部分而不是 Thread.current，但后来我不断得到

```
too many connection resets (due to Broken pipe - Errno::EPIPE) 
```

到处都是..有什么想法吗？任何人都知道我可以使用的 Net::HTTP::Persistant 的备用库，并希望可以轻松地修补 Mechanize 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:05:04.823

问题是，如果您`Net::HTTP::Persistent`从另一个线程访问一个对象，并且该对象处于某事的中间，那么该线程要么必须阻塞（停止执行并等待对象执行它需要的操作），要么创建一个新的反对和搞砸。使用线程，您可能处于 HTTP 请求的中间（请原谅我，我在这里做假设），突然之间，另一个线程想要使用相同的连接创建 HTTP 请求，这会破坏一切（可能是为什么您遇到了连接重置问题）。

如果您真的想要线程，您可以选择打开多少连接，或者等待打开的连接以便您可以使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T19:52:28.160

恢复到 Mechanize 1.0.0，这解决了问题。与 Mechanize 2+ 使用的 Net::HTTP::Persistent 不同，持久连接在 1.0 中以更可靠、多线程友好的方式处理。我的建议：坚持使用 Mechanize 1.0，它更可靠，错误更少，并且没有多线程代码的疯狂问题！！！嘘。

注意：与某些评论可能暗示的不同，Mechanize 1.0 确实实现了持久连接：查看源代码，或使用 Wireshark 进行验证。

# python - 将两个字符串连接成一个可调用字符串 'moduleA' + 'func1' 到 moduleA.func1()

> ID：12167452
> 
> 赞同：1
> 
> 时间：2012-08-28T21:00:42.300
> 
> 标签：python, string, function

我懂了：

`tu = ("func1", "func2", "func3")`

通过我正在寻找的操作，我会得到第一个字符串：

`moduleA.func1()`

我知道如何连接字符串，但是有没有办法加入一个可调用的字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T21:02:07.753

`getattr(moduleA, 'func1')()`==`moduleA.func1()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T21:02:33.207

您应该使用`getattr`内置函数。尝试：

```
getattr(moduleA, 'func1')() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T21:03:11.787

如果您的意思是获取类或模块上的函数或方法，则所有实体（包括类、模块、函数和方法）都是对象，因此您可以执行 a`func = getattr(thing 'func1')`来获取函数，然后`func()`调用它。

# uitableview - 如何在按钮单击时对单元格进行排序，在作为子视图添加到 uiviewcontroller 的 tableView 中？

> ID：12167459
> 
> 赞同：0
> 
> 时间：2012-08-28T21:01:06.403
> 
> 标签：uitableview, nssortdescriptor

所以首先我会提供一些背景信息，这样你就可以完全理解我的问题。我花了几个小时寻找解决方案，但似乎仍然无法正确解决。因此，我正在尝试创建一个将 tableView 作为子视图加载到 uiviewcontroller (SubviewPracticeMasterViewController) 的应用程序。表视图在另一个 uiviewcontroller(SubviewPracticeViewController) 上进行子类化，并作为 uiview 加载到 SubviewPracticeMasterViewController 上。

我还有一个名为 LeadsInformation 的 NSObject。LeadsInformation.h 看起来像这样

```
#import <Foundation/Foundation.h>

@interface LeadsInformation : NSObject

@property (nonatomic, copy)NSString *leadName;
@property (nonatomic, copy)NSString *lastName;
@property (nonatomic, copy)NSString *firstName;
@property (nonatomic, copy)NSString *areaCode;
@property (nonatomic, copy)NSString *phoneNumber;
@property (nonatomic, copy)NSString *status;
@property (nonatomic, copy)NSString *notes;

-(id)initWithName: (NSString *)leadName lastName: (NSString *)lastName firstName:      (NSString *)firstName
     areaCode: (NSString *)areaCode phoneNumber: (NSString *)phoneNumber status: (NSString *)status 
        notes: (NSString *)notes;

@end 
```

因此，在 SubviewPracticeViewController.m 上，我以编程方式将 4 个 LeadsInformation 对象添加到名为“dataArray”的数组中，并将特定字符串值加载到我的 cellForRowAtIndexPath 方法中的自定义单元格中。

现在这是我的问题发生的地方。我还从 xib 文件加载自定义标头。标题上有两个按钮：我希望第一个按钮根据第一列按字母顺序对单元格进行排序，我希望第二个按钮根据单元格的第二列按字母顺序对单元格进行排序。

表格视图完全按照我的意愿显示，自定义表格标题也是如此，并且正在单击按钮。但是，单元格没有得到排序。我已将用于按 IBAction 方法中的第一列排序的代码与标题上的按钮相关联。这是代码：

```
- (IBAction)sortLeadName:(id)sender {
    NSSortDescriptor *leadNameDescriptor = [[NSSortDescriptor alloc] initWithKey:    @"leadName" ascending:YES selector:@selector(localizedStandardCompare:)];
    NSArray *sortDescriptor = [NSArray arrayWithObject:leadNameDescriptor];
    NSArray *sortedArray = [self.dataArray sortedArrayUsingDescriptors:sortDescriptor];

    self.dataArray = [[NSMutableArray alloc] initWithArray:sortedArray];
    [[self tableView] reloadData];

} 
```

这是 cellForRowAtIndexPath 的代码，以防万一：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *cell = [_tableView dequeueReusableCellWithIdentifier:@"Identifier"];
    if (cell == nil) {

        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
        cell = [topLevelObjects objectAtIndex:0];
    }

    LeadsInformation *leadAtIndex = [self.dataArray objectAtIndex: indexPath.row];

    UILabel *label;
    label = (UILabel *)[cell viewWithTag:1];
    label.text = leadAtIndex.leadName;

    label = (UILabel *)[cell viewWithTag:2];
    label.text = leadAtIndex.status;

    return cell;
} 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T20:03:24.970

所以事实证明我做了一些让我失望的不必要的工作。我不需要对数组的副本进行排序，然后将我的 dataArray 重新加载为新的排序副本。我只需要使用 SortDescriptor 直接对数组进行排序，如下所示：

```
-(IBAction)sortLeadName:(id)sender {
    NSSortDescriptor *sortDescript = [[NSSortDescriptor alloc] initWithKey:@"status"  ascending: YES selector:@selector(localizedStandardCompare:)];

    [self.dataArray sortUsingDescriptors: [NSArray arrayWithObject: sortDescript]];
    [self.tableView reloadData];
} 
```

# ajax - Zend 框架：Ajax 发布数据

> ID：12167461
> 
> 赞同：1
> 
> 时间：2012-08-28T21:01:10.447
> 
> 标签：ajax, json, zend-framework

那是我的功能：

```
function deleteAutoAd(id, title) {
    alert(title);                                                                         
    $.ajax({
        dataType: 'json',
        url: '/ajax/deleteautoad',
        type: 'POST',
        data: {
            id : id,
            title : title
        },
        success: function(data) {
            alert(data);
        }
    });
} 
```

在此功能中，当我尝试警报（标题）并弹出“这是标题”（因为标题=“这是标题”）时。但在 ajax/deleteautoad 我试试这个：

```
public function deleteautoadAction() {
    if ($this->getRequest()->isPost()) {
        echo $param1 = $this->_request->getParam('id');
        echo $param2 = $this->_request->getParam('title');
    }
} 
```

Echo param1 显示 5，但 echo param2 什么也不显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T08:49:41.773

我认为你应该尝试：

```
function deleteAutoAd(id, title) {
    alert(title);                                                                         
    $.ajax({
        dataType: 'json',
        url: '/ajax/deleteautoad',
        type: 'POST',
        data: {
            'id' : id, // Note the quotes
            'title' : title // Note the quotes
        },
        success: function(data) {
            alert(data);
        }
    });
} 
```

问候

咪咪

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:26:47.753

我同意楼上的回答

另外，对于我的申请，我还必须发布完整的网址。所以你可能想试试

```
var root = location.protocol + '//' + location.host; 
```

然后在你的网址上

```
url: root+'/ajax/deleteautoad', 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T10:26:46.800

您应该从控制器返回带有`Success`状态的有效 JSON。

```
public function deleteautoadAction() {
    if ($this->getRequest()->isPost()) {
        $x->Status = 'Success';
        $x->Message = $this->_getParam('id') . $this->_getParam('title');
        $this->_helper->json($x);
    }
} 
```

你也应该改变你的`alert`陈述

```
function deleteAutoAd(id, title) {
    $.ajax({
        dataType: 'json',
        url: '/ajax/deleteautoad',
        type: 'POST',
        data: {
            id : id,
            title : title
        },
        success: function(data) {
            alert(data.Message);
        }
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T15:32:18.937

从 OP 问题转移到 CW 答案：

> 我通过删除解决了这个问题：`dataType: 'json'`。

# jfreechart - 我有一个 LegendItemEntity，如何获得 LegendItem？

> ID：12167465
> 
> 赞同：0
> 
> 时间：2012-08-28T21:01:36.617
> 
> 标签：jfreechart

单击 LegendItemEntity 时，我有隐藏/显示系列的代码。该代码有效，除了我使用系列的索引作为 LegendItemCollection 中的 LegendItem 的索引。问题是有时系列比 LegendItems 多，并且它们各自的索引不一样。鉴于我有 LegendItemEntity，我如何获得 LegendItem？

```
private final ChartMouseListener chartMouseListener = new ChartMouseListener() {

    public void chartMouseClicked(ChartMouseEvent cme) {
        ChartEntity entity = cme.getEntity();
        if (entity instanceof LegendItemEntity) {
            LegendItemEntity itemEntity = (LegendItemEntity) entity;
            int index = dataset.getSeriesIndex(itemEntity.getSeriesKey());
            XYPlot plot = (XYPlot) chart.getPlot();
            XYItemRenderer renderer = plot.getRenderer();
            renderer.setSeriesVisible(index, !renderer.isSeriesVisible(index));
            LegendItem legendItem = plot.getLegendItems().get(index);
            if (renderer.isSeriesVisible(index)) {
                legendItem.setLinePaint(renderer.getSeriesPaint(index));
            } else {
                legendItem.setLinePaint(Color.WHITE);
            }
        }
    }

    public void chartMouseMoved(ChartMouseEvent cme) {
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T01:07:43.477

您可以使用`renderer.getLegendItem()`. 结果将是`null`一个不可见的系列。给定 a `JFreeChart chart`，`chartMouseClicked()`实现可能如下所示：

```
@Override
public void chartMouseClicked(ChartMouseEvent e) {
    ChartEntity entity = e.getEntity();
    if (entity instanceof LegendItemEntity) {
        LegendItemEntity itemEntity = (LegendItemEntity) entity;
        Comparable key = itemEntity.getSeriesKey();
        XYDataset dataset = (XYDataset) itemEntity.getDataset();
        int seriesIndex = dataset.indexOf(key);
        XYPlot plot = (XYPlot) chart.getPlot();
        int datasetIndex = plot.indexOf(dataset);
        XYItemRenderer renderer = plot.getRenderer();
        LegendItem legendItem = renderer.getLegendItem(datasetIndex, seriesIndex);
        System.out.println(key + " " + datasetIndex + " " + seriesIndex);
        System.out.println(legendItem);
    }
} 
```

# c# - 数据表列不能是 oraclelob 类型

> ID：12167468
> 
> 赞同：0
> 
> 时间：2012-08-28T21:01:44.483
> 
> 标签：c#, .net, datatable, blob

我可以有一个 OracleLOB 类型的数据表列，就像我可以将一个列声明为字节数组类型一样吗？

**更新：**是否可以转换`byte[]`为 OracleLOB，因为 Oracle LOB 可以转换为`byte[]`方法`Read()`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:05:55.180

不，DataTable[`DataColumn`](http://msdn.microsoft.com/en-us/library/8a7cyy8d)支持以下 DataType：

1.  布尔值
2.  字节
3.  字符
4.  约会时间
5.  十进制
6.  双倍的
7.  16
8.  整数32
9.  整数64
10.  字节
11.  单身的
12.  细绳
13.  时间跨度
14.  UInt16
15.  UInt32
16.  UInt64
17.  字节[]

[http://msdn.microsoft.com/en-us/library/system.data.datacolumn.datatype.aspx](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.datatype.aspx)

# javascript - 如何使用 JavaScript 隐藏所有 div？

> ID：12167473
> 
> 赞同：5
> 
> 时间：2012-08-28T21:01:54.063
> 
> 标签：javascript, html

我想知道如何仅使用 JavaScript 隐藏页面上的所有 div，我不能使用 jQuery。有没有办法在不使用附带的数组的情况下做到这一点`document.getElementByTag`？或者如果没有，你能告诉我如何隐藏所有吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T21:03:57.683

用于[`getElementsByTagName()`](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName)获取所有`div`元素的列表，然后将其 CSS[`display`](https://developer.mozilla.org/en-US/docs/CSS/display)属性设置为`none`：

```
var divs = document.getElementsByTagName("div");
for (var i = 0; i < divs.length; i++) {
  divs[i].style.display = 'none';        
}
```

```
<div>sads</div>
<div>sads</div>
<span>not a div</span>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T21:04:54.997

您将需要使用`document.getElementsByTagName`，然后使用 for 循环来处理所有元素：

```
var divs = document.getElementsByTagName('div');
for(var i = 0; i < divs.length; i++) {
  divs[i].style.display = "none";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T06:09:56.213

只是在这里提出一个完全不同的解决方案。

你可以为你的身体设置一个 CSS 类，像这样

```
body.hideDivs DIV {
    display: none;
}

document.body.className = "hideDivs"; 
```

但这也会将所有内容隐藏在这些 div 中，这可能不是您想要的。

# spring - Jdbc模板问题

> ID：12167475
> 
> 赞同：0
> 
> 时间：2012-08-28T21:01:55.683
> 
> 标签：spring, jdbctemplate

下面的Java代码：

```
JdbcTemplate jdbcTemplate = getJdbcTemplate();
Boolean isEnabled = true;
String sql = "INSERT INTO user_table (username, is_enabled) VALUES(?, ?)";
jdbcTemplate.update(sql, new Object[]{"a_username", isEnabled} 
```

Oracle 数据库 user_table 中的 is_enabled 列是 Number 类型，值为 0 或 1。

我使用 java 布尔值而不是 int 做错了；但 jdbcTemplate 没有抱怨，它的工作原理。

任何人请解释JdbcTemplate发生了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T07:07:27.270

除了 PL/SQL 之外，Oracle 没有布尔类型（关于它们为什么不支持布尔值的问题可以在[这里](https://stackoverflow.com/questions/6518356/why-doesnt-oracle-support-boolean-datatype)找到）。

在您的情况下发生的事情是 Oracle JDBC 驱动程序实际上正在为您处理数据类型映射（因此从您给它的布尔值映射到 oracle 需要的数字类型）。可以在此处找到有关此内容的详细信息：http: [//docs.oracle.com/cd/B10501_01/java.920/a96654/basic.htm#1022590](http://docs.oracle.com/cd/B10501_01/java.920/a96654/basic.htm#1022590)

# odbc - 从旧版本迁移到新版本或 MySQL

> ID：12167477
> 
> 赞同：1
> 
> 时间：2012-08-28T21:02:02.927
> 
> 标签：odbc, sqlanywhere

我最近挖出了一个非常古老的 SQL Anywhere 数据库。我已经安装它并且它有点工作，它只是数据的分布式端，所以一切都通过 dbeng50 和 ODBC 运行。

我想将此数据迁移到 MySQL。有没有办法做到这一点？我尝试使用 ODBC 工具查看数据，但我不断收到错误消息，指出 ODBC 驱动程序不支持 ODBC 行为的版本。

我猜数据库太旧了（它是从 1997 年开始的）——那就是[SQL Anywhere 版本 5](http://en.wikipedia.org/wiki/SQL_Anywhere#History)。

也很难找到可以帮助我访问这些的旧 SQL 工具。

是否可以将 .db 文件与较新版本一起使用？

任何帮助或指导将不胜感激。

# ajax - 使用基于表单的身份验证时适当的未授权响应

> ID：12167480
> 
> 赞同：1
> 
> 时间：2012-08-28T21:02:11.053
> 
> 标签：ajax, http, authentication, http-headers, www-authenticate

我有一个使用基于表单的身份验证的网络应用程序。当 AJAX 请求由于会话超时而失败时，我需要发送适当的通知。看起来我可以发送：

*   [403 Forbidden](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.4)，但这意味着“授权无济于事”，这是错误的。
*   [401 Unauthorized](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.2)，但响应“必须包含 WWW-Authenticate 标头字段”，并且在使用基于表单的身份验证时有关该值的确切值的信息是有限的。

当 AJAX 请求由于用户未通过身份验证而失败时，什么是适当的响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:57:34.043

我倾向于将 403 解释为“HTTP 授权无济于事”，并在不使用 HTTP 身份验证时使用它而不是 401。

# ruby-on-rails - RoR 查询条件：不包含任何属性列表

> ID：12167491
> 
> 赞同：0
> 
> 时间：2012-08-28T21:03:01.970
> 
> 标签：ruby-on-rails, object

我觉得这个问题应该有一个简单的答案，但我无法管理。

我有 3 个模型：用户、课程和教科书。我的模型协会工作得很好，但如果有必要我会包括它们。在我的应用程序中，我想要一个视图来显示用户拥有教科书的课程以及用户不拥有教科书的所有其他课程。在伪代码中，它应该看起来像

```
@courses_with_books = current_user.textbooks
@courses_without_books = current_user.courses.where(:id != @courses_with_books.course_ids) 
```

我可以使用复杂的循环来完成第二行，但是这些过程看起来很愚蠢，所以我一直在研究一种通过单个查询来收集我需要的信息的方法，但还没有想出任何结果。先谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:17:47.017

一般来说，如果您想检查某个属性是否不在某个给定集合内，请尝试“NOT IN”：

```
current_user.courses.where("id NOT IN ?", @courses_with_books.course_ids) 
```

有关 Active Record 查询的更多信息，请查看[Active Record 查询接口指南](http://guides.rubyonrails.org/active_record_querying.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:21:22.923

rathrio 是在正确的道路上。我认为第一部分你可以做

`@courses_with_books = current_user.textbooks.collect(&:course)`

如果您要显示他们`title`的 s，请执行

```
<% @courses_with_books.each do |cwb| %>
  <%= cwb.title %>
<% end %> 
```

# python - 合并来自不同区域Python的列表中的项目

> ID：12167507
> 
> 赞同：-4
> 
> 时间：2012-08-28T21:04:10.923
> 
> 标签：python

这真让我抓狂。我有一个从 csv 中提取数据的脚本。对于每一行，它都会使其成为一个列表。原因是我想基于命令行参数合并两个项目。

以下是我的清单作为示例：

```
row = ['city', 'state', 'zip', 'zippostal', 'company'] 
```

好吧，我知道如果我在 row[0] 和 row[2] 上加入，我会得到

```
row = ['citystatezip', 'zippostal', 'company'] 
```

好吧，如果我想要这个怎么办......

```
row = ['companycityzip', 'state', 'zippostal'] 
```

我怎么能这样做？

编辑：

对不起，我不是故意的。我所拥有的是一个包含一堆数据的 csv 文件，有时城市状态和 zip 位于不同的字段中，但我需要通过 a 或 - 将它们合并，这取决于需要什么。所以我所做的就是将它们放入一个列表中，并根据命令行参数选择它们所在的列，我需要它们进行合并，所以 Ex.

a 栏 b 栏 c 栏 d 栏 ...... 城市 州 邮政编码

我需要通过“，”将a列合并到b中。很好，但有时 f 列将是城市，a 列将是州。那么如何将它们合并到一个列表中并让两个值都在列 a 中结束，但仍然返回该行的其余部分减去更新的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:12:33.837

也许是这样的？：

```
>>> row = ['city', 'state', 'zip', 'zippostal', 'company']
>>> joins = [[4, 0, 2], [1], [3]]
>>> [''.join(row[i] for i in indices) for indices in joins]
['companycityzip', 'state', 'zippostal'] 
```

作为一个函数：

```
def custom_join(row, *joins):
    return [''.join(row[i] for i in indices) for indices in joins] 
```

例子：

```
>>> row = ['city', 'state', 'zip', 'zippostal', 'company']
>>> custom_join(row, [0, 1, 2], [3], [4])
['citystatezip', 'zippostal', 'company']
>>> custom_join(row, [-1, 0, 2], [1], [-2])
['companycityzip', 'state', 'zippostal'] 
```

**编辑：**这是一个在执行连接后将返回列表剩余部分的版本：

```
def custom_join2(row, *joins):
    result = [''.join(row[i] for i in indices) for indices in joins]
    seen = set(i if i >= 0 else len(row)+i for indices in joins for i in indices)
    result.extend(v for i, v in enumerate(row) if i not in seen)
    return result

>>> custom_join2(row, [-1, 0, 2])
['companycityzip', 'state', 'zippostal'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:18:56.107

这是我对您的要求的最佳猜测：

```
row = ['city', 'state', 'zip', 'zippostal', 'company']
temp_list = []
temp_str = row[4]+row[0]+row[2]
temp_list.append(temp_str)
temp_list.append(row[1])
temp_list.append(row[3])
row = temp_list  # ['companycityzip', 'state', 'zippostal'] 
```

虽然我觉得你想要一些动态的东西，但这不是

# performance - CUDA 全局内存中 memcpy 的奇怪“银行冲突”类型行为

> ID：12167514
> 
> 赞同：2
> 
> 时间：2012-08-28T21:04:44.233
> 
> 标签：performance, memory, cuda, global

我将性能问题提炼为如下所示的代码。此代码采用一个包含 128,000 个 64 字节结构（“规则”）的数组，并将它们分散在另一个数组中。例如，如果 SCATTERSIZE 为 10，则代码将从“小”数组中复制（“分散”）128,000 个这些结构，它们在索引 0、1、2、...、127999 处连续存储，并将它们放置在“大”数组中的索引 0、10、20、30、...、1279990 处。

这是我无法弄清楚的：在计算能力为 1.3（特斯拉 C1060）的设备上，只要 SCATTERSIZE 是 16 的倍数，性能就会显着下降。而在计算能力为 2.0（特斯拉 C2075）的设备上，只要 SCATTERSIZE 性能就会受到很大影响是 24 的倍数。

我不认为这可能是共享内存库的事情，因为我没有使用共享内存。而且我认为它与合并无关。使用命令行分析器并检查“gputime”条目，我发现 1.3 设备上的运行时间增加了 300%，而 2.0 设备上的运行时间增加了 40%，因为 SCATTERSIZE 不好。我难住了。这是代码：

```
#include <stdio.h>
#include <cuda.h>
#include <stdint.h>

typedef struct{
  float a[4][4];
} Rule;

#ifndef SCATTERSIZE
#define SCATTERSIZE 96
#endif

__global__ void gokernel(Rule* b, Rule* s){
  int idx = blockIdx.x * blockDim.x + threadIdx.x;
  memcpy(&b[idx * SCATTERSIZE], &s[idx], sizeof(Rule));
}

int main(void){
  int blocksPerGrid = 1000;
  int threadsPerBlock = 128;
  int numThreads = blocksPerGrid * threadsPerBlock;
  printf("blocksPerGrid = %d, SCATTERSIZE = %d\n", blocksPerGrid, SCATTERSIZE);

  Rule* small;      
  Rule* big;        

  cudaError_t err = cudaMalloc(&big, numThreads * 128 * sizeof(Rule));
  printf("Malloc big: %s\n",cudaGetErrorString(err));

  err = cudaMalloc(&small, numThreads * sizeof(Rule));
  printf("Malloc small: %s\n",cudaGetErrorString(err));

  gokernel <<< blocksPerGrid, threadsPerBlock >>> (big, small);
  err = cudaThreadSynchronize();
  printf("Kernel launch: %s\n", cudaGetErrorString(err));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T06:05:24.803

因为 的实现`__device__` `memcpy`是隐藏的（它是内置的编译器），所以很难说到底是什么原因。一种预感（感谢 njuffa 对此）是所谓的分区驻留，其中来自许多线程的地址映射到一个或几个物理 DRAM 分区，而不是分布在它们之间。

在 SM 1_2/1_3 GPU 上，分区驻留可能会非常糟糕，具体取决于内存访问步幅，但从 SM_2_0 设备开始，这种情况已经得到改善，因此可以解释为什么效果不那么明显。

您通常可以通过在数组中添加一些填充以避免违反偏移量来解决此效果，但根据您的计算可能不值得。

# c# - asp.net c# 和 mongodb 模型

> ID：12167515
> 
> 赞同：4
> 
> 时间：2012-08-28T21:04:45.560
> 
> 标签：c#, sql-server, mongodb, database

我想知道我是否可以在我的项目（asp.net mvc 4 c#）中使用像模型（模型类）这样的 mongodb。

例如：

```
namespace Demo.Models
{

    public class Model1
    {
        public int ID { get; set; }
        public string Title { get; set; }
        public DateTime ReleaseDate { get; set; }
        public string Genre { get; set; }
        public decimal Price { get; set; }
    }

    public class MovieDBContext : DbContext
    {
        public DbSet<Model1> models { get; set; }
    }
} 
```

假设这是 mssql 数据库的标准模型。我可以创建这样的模型来使用 MongoDB 集合、文档吗？如果是，如何？（如果你能给我提供一些例子的链接）。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T21:14:59.820

是的，你不能忘记添加 BsonId 属性，因为每个对象都必须有自己的唯一 ID。

```
public class Model1
{
    [BsonId]
    public int ID { get; set; }
    public string Title { get; set; }
    public DateTime ReleaseDate { get; set; }
    public string Genre { get; set; }
    public decimal Price { get; set; }
} 
```

您可以在这里找到示例：

[http://www.joe-stevens.com/2011/10/02/a-mongodb-tutorial-using-c-and-asp-net-mvc/](http://www.joe-stevens.com/2011/10/02/a-mongodb-tutorial-using-c-and-asp-net-mvc/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-04T17:23:10.803

是的，您可以在项目中使用 mongodb 作为模型。您只需要定义一个模型类并获得所需的实体。但是在此您`BsonId`为任何对象提供了一个属性以生成唯一的 id。

这是我的代码中的一个示例，只需检查一下即可。

```
public class QuestionAttempt
{
    public ObjectId QId { get; set; }
    public long UserId { get; set; }
    [BsonElement("SN")]
    public string SkillName { get; set; }
    [BsonElement("IC")]
    public bool IsCorrect { get; set; }
} 
```

在我的代码中，我为一些对象指定了一个较小的名称，该`[BsonElement()]`属性具有较少的内存使用量。

# c++ - 如何在我的 Mac 上安装 boost？

> ID：12167519
> 
> 赞同：1
> 
> 时间：2012-08-28T21:04:58.540
> 
> 标签：c++, boost

> **可能重复：**
> [如何在 OSX 中安装 boost c++ 库](https://stackoverflow.com/questions/5797443/how-to-install-boost-c-libraries-in-osx)

我想使用 boost 来序列化我游戏中的一些对象，但是当我想使用 boost 时我卡住了。所以我已经下载了 boost 并将其解压缩到一个目录中。

怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T21:30:06.173

您可能会使用 macports 来显着简化 boost 的安装。

1.  [从http://www.macports.org/](http://www.macports.org/)下载 macports

2.  运行`sudo port install boost` 这将自动下载安装提升。并安装boost的所有依赖项。

3.  等到 boost 编译完成。在我的 macbook pro 上大约需要 0.5 小时。

4.  然后可以在以下位置找到您的 boost 库`/opt/local/include/boost`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:08:30.770

我想您应该尝试遵循[Boost Getting Started Guide](http://www.boost.org/more/getting_started/index.html)。

开始阅读[Unix 变体入门（例如 Linux、MacOS）](http://www.boost.org/doc/libs/1_51_0/more/getting_started/unix-variants.html)，它应该是一个温和而完整的介绍。

# node.js - Async.Map 的回调不起作用

> ID：12167523
> 
> 赞同：1
> 
> 时间：2012-08-28T21:05:12.347
> 
> 标签：node.js, asynchronous, callback

我对回调比较陌生，并且未能使以下代码正常工作。我已经使用 async.map 函数将来自每个 Web 调用的数据返回到其各自的页面。但是，即使在返回网页的 html之前，我`console.log(return)`也会返回。这是我的代码：`[ , undefined]``console.log(data)``callback(data)`

```
var http = require("http"),
    fs = require("fs"),
    page, chap, ot,
    async = require("async");

ot = fs.open('ot.txt', 'w');        
page = "test";
chap = 2;

function getData(url, callback) {
  var data = "";
  var options = {
    host: "rs.au.com",
    port: 80
  }
  options.path = url;
  console.log("request sent to: http://" + options.host + options.path);
  var req = http.request(options, function(res) { 
    console.log("Response received " + res.statusCode);
    res.on('data', function(chunk) {
        data += chunk;
    });
    res.on('end', function(e) {
        console.log(data);
        callback(e, data);
    });
  }).end();
}   

function main() {
  var pathArr = [];
  for ( var i = 1; i <= chap; i++ ) {
    pathArr[i] = "/".concat(page, "/", i, ".html");
  }
  async.map(pathArr, getData, function(err, result) {
    console.log("The result is :" + result);
  });
}

main(); 
```

谁能指出为什么我的代码不起作用以及如何纠正它？

非常感激！

**编辑：**在 Brandon Tilley 的回复之后，我将回调函数从 修改`callback(data)`为`callback(e, data)`，但是我现在没有从最后的`console.log`输出中得到任何回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T22:23:33.447

Async 库假定您的回调遵循标准的 Node.js 回调签名，即`callback(err, others...)`. 由于您`data`作为第一个参数传递，因此 Async 假定它是一个错误。您应该`callback(e, data)`改用（因为在没有错误的情况下）。`e``null`

**[更新]**

另一个问题是您的数组不正确。由于`i`从 1 开始并上升到`chap`,`pathArr[0]`是未定义的。改变：

```
pathArr[i] = "/".concat(page, "/", i, ".html"); 
```

到

```
pathArr[i-1] = "/".concat(page, "/", i, ".html"); 
```

# java - 当达到最大文件大小时，为什么在下面的代码中不调用 `MediaRecorder` 的 `onInfoListener`

> ID：12167525
> 
> 赞同：4
> 
> 时间：2012-08-28T21:05:17.943
> 
> 标签：java, android, mediarecorder, video-recording

我正在我的 Android 应用程序中录制视频。但想在达到最大文件大小时显示消息。我不明白为什么在达到最大文件大小时没有在下面的代码中调用`MediaRecorder`'s来保存文件？`onInfoListener`

```
final Context activity=this.getBaseContext();

mediaRecorder.setOnInfoListener(new MediaRecorder.OnInfoListener() {

    public void onInfo(MediaRecorder mr, int what, int extra) {
    // TODO Auto-generated method stub

    if(what==MediaRecorder.MEDIA_RECORDER_INFO_MAX_FILESIZE_REACHED)
         Toast.makeText(activity, "There is no more space available. Video recording is stopped now.",2000).show();

    }
});

// getBytesAvailable() returns bytes available on sdcard
mediaRecorder.setMaxFileSize(getBytesAvailable());

mediaRecorder.prepare();

mediaRecorder.start(); 
```

# sip - 允许使用 trixbox 进行远程扩展

> ID：12167526
> 
> 赞同：-1
> 
> 时间：2012-08-28T21:05:22.577
> 
> 标签：sip, voip, trixbox

我试图找到将远程扩展记录到 trixbox 服务器（在 NAT 之后）但没有结果的方法。

有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:51:29.097

您可以尝试使用 trixbox 提供的 Web UI。

# android - Android App 有多个启动器

> ID：12167528
> 
> 赞同：0
> 
> 时间：2012-08-28T21:05:37.260
> 
> 标签：android, android-activity

所以我有一个应用程序，有 2 个活动。出于某种原因，我得到了 2 个启动器图标，每个活动一个，但我只想要一个！

游戏活动有一个意图过滤器，我将其删除。我还卸载了该应用程序并从头开始重新安装它，但它仍然带有两个启动器:(

清单如下

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Game"
        android:label="@string/title_activity_game" >
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:48:51.260

您需要`label`从第二个`Activity`.

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Game" >
    </activity>
</application> 
```

# groovy - 是否可以在 groovy 中获取闭包的调用者对象？

> ID：12167537
> 
> 赞同：9
> 
> 时间：2012-08-28T21:06:07.027
> 
> 标签：groovy, closures

是否可以获得在执行上下文`Object`中调用 a的引用？`Closure``Closure`

例如：

```
public class Example {

    public Example(){
        def a = {return this};
        def b = [];

        b.metaClass.a = a;

        println b.a();
    }
} 
```

我希望此执行返回`b`而不是`Example`.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-28T21:26:32.997

调用闭包的对象可以引用为`delegate`. 例子：

```
def a = { return delegate }
def b = []

b.metaClass.a = a

assert b.a() == b 
```

# javascript - 以下颜色更改功能在 IE9 和 FF 中可以正常工作，但在早期的 IE 或 CHROME 中无法正常工作

> ID：12167539
> 
> 赞同：1
> 
> 时间：2012-08-28T21:06:09.480
> 
> 标签：javascript, css, javascript-events

//以下函数更改 CSS 渲染图像中的 JavaScript 代码颜色，它仅适用于 IE9 和[FF /c_y_b_arrowhead.php](http://www.cornholeny.com/c_y_b_arrowhead.php) 。//

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
        <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>

       <title>ARROWHEAD DESIGN</title>

        <link href="css/structure.css" rel="stylesheet" type="text/css" />
        <link href="css/design.css" rel="stylesheet" type="text/css" />

            <!--[if lte IE 7]>
        <link href="" rel="stylesheet" type="text/css" />
            <![endif]-->

        <?php
         include('includes/meta.php');
         ?>

        <style type="text/css">

            div#menu {
          width: 880px;
        height: 65px;
          float: top;
              margin:0px
            }

        div#main {
         margin-left: 0%;
         margin-right: 0%;
         margin-top: 1px;
         padding: 10px;
             }

        div#footer {
         padding: 15px;
         margin: 0px;
         border-bottom: thin solid #000000;
               }
        </style>

//these are the functions that are activated by select options//

    <script type="text/javascript">

function colorchange1()
{

document.getElementById("box-a").style.backgroundColor="grey";

document.getElementById("box-a2").style.backgroundColor="grey";
}

function colorchange2()
{

document.getElementById("box-a").style.backgroundColor="orange";

document.getElementById("box-a2").style.backgroundColor="orange";

}

function colorchange3()
{

document.getElementById("box-a").style.backgroundColor="yellow";

document.getElementById("box-a2").style.backgroundColor="yellow";
}

function colorchange4()
{

document.getElementById("box-a").style.backgroundColor="#6DE91B";

document.getElementById("box-a2").style.backgroundColor="#6DE91B";
}

function colorchange5()
{

document.getElementById("box-a").style.backgroundColor="blue";

document.getElementById("box-a2").style.backgroundColor="blue";
}

function colorchange6()
{

document.getElementById("box-a").style.backgroundColor="brown";

document.getElementById("box-a2").style.backgroundColor="brown";
}

function colorchange7()
{

document.getElementById("box-a").style.backgroundColor="red";

document.getElementById("box-a2").style.backgroundColor="red";
}

function colorchange8()
{

document.getElementById("box-a").style.backgroundColor="white";

document.getElementById("box-a2").style.backgroundColor="white";
}

function colorchange9()
{

document.getElementById("box-a").style.backgroundColor="black";

document.getElementById("box-a2").style.backgroundColor="black";
}

function colorchange10()
{

document.getElementById("box-a").style.backgroundColor="pink";

document.getElementById("box-a2").style.backgroundColor="pink";
}

function changearrow1()
{

document.getElementById("arrow").style.borderBottomColor="grey";

document.getElementById("arrow2").style.backgroundColor="grey";

document.getElementById("arrow-a").style.borderBottomColor="grey";

document.getElementById("arrow-a2").style.backgroundColor="grey";

}

function changearrow2()
{

document.getElementById("arrow").style.borderBottomColor="orange";

document.getElementById("arrow2").style.backgroundColor="orange";

document.getElementById("arrow-a").style.borderBottomColor="orange";

document.getElementById("arrow-a2").style.backgroundColor="orange";

}

function changearrow3()
{

document.getElementById("arrow").style.borderBottomColor="yellow";

document.getElementById("arrow2").style.backgroundColor="yellow";

document.getElementById("arrow-a").style.borderBottomColor="yellow";

document.getElementById("arrow-a2").style.backgroundColor="yellow";

}

function changearrow4()
{

document.getElementById("arrow").style.borderBottomColor="#6DE91B";

document.getElementById("arrow2").style.backgroundColor="#6DE91B";
document.getElementById("arrow-a").style.borderBottomColor="#6DE91B";

document.getElementById("arrow-a2").style.backgroundColor="#6DE91B";

}

function changearrow5()
{

document.getElementById("arrow").style.borderBottomColor="blue";

document.getElementById("arrow2").style.backgroundColor="blue";

document.getElementById("arrow-a").style.borderBottomColor="blue";

document.getElementById("arrow-a2").style.backgroundColor="blue";

}

function changearrow6()
{

document.getElementById("arrow").style.borderBottomColor="brown";

document.getElementById("arrow2").style.backgroundColor="brown";

document.getElementById("arrow-a").style.borderBottomColor="brown";

document.getElementById("arrow-a2").style.backgroundColor="brown";

}

function changearrow7()
{

document.getElementById("arrow").style.borderBottomColor="red";

document.getElementById("arrow2").style.backgroundColor="red";
document.getElementById("arrow-a").style.borderBottomColor="red";

document.getElementById("arrow-a2").style.backgroundColor="red";

}

function changearrow8()
{

document.getElementById("arrow").style.borderBottomColor="white";

document.getElementById("arrow2").style.backgroundColor="white";
document.getElementById("arrow-a").style.borderBottomColor="white";

document.getElementById("arrow-a2").style.backgroundColor="white";

}

function changearrow9()
{

document.getElementById("arrow").style.borderBottomColor="black";

document.getElementById("arrow2").style.backgroundColor="black";

document.getElementById("arrow-a").style.borderBottomColor="black";

document.getElementById("arrow-a2").style.backgroundColor="black";

}

function changearrow10()
{

document.getElementById("arrow").style.borderBottomColor="pink";

document.getElementById("arrow2").style.backgroundColor="pink";

document.getElementById("arrow-a").style.borderBottomColor="pink";

document.getElementById("arrow-a2").style.backgroundColor="pink";

}
        </script>

        <?php
         include('includes/header-menu.php');
         ?>

    </head>

    <body>

 //these are the css images//

        <style type="text/css">

#container { 
    width: 785px; 
    height: 450px;
    background-color: #D9F3CF;
    margin-left: auto;
    margin-right: auto;
    padding: 15px; 
    position: relative;

}

#boardleft { 
    width: 151px; 
    height: 301px; 
    position: relative;
    float:left; 
}

#boardright { 
    width: 151px; 
    height: 301px; 
    position: relative;
    float:right; 
}

#circle{
    border:none;
    background-color: #D9F3CF;
    width:45px;
    height:45px;
    border-radius:50%;
    top:30px;
    left:52.5px;
    position: absolute;
}

#box-a {

    width: 150px;
    height:300px;

    background-color: white;

        border: none;

    position: absolute;
}

#box-a2 {

    width: 150px;
    height:300px;

    background-color: white;

        border: none;

    position: relative
}

#arrow2 {
        width: 30px;
    height:150px;

    background-color: white;

    border: none;
    bottom: 0px; 
    left: 60px;
    position: absolute;
}

#arrow {
     width: 0; 
    height: 0;
    border-left: 35px solid transparent;
    border-right: 35px solid transparent;
    border-bottom: 75px solid white;
    bottom: 150px; 
    left: 40px;
    position: absolute;
}

#arrow-a2 {
        width: 30px;
    height:150px;

    background-color: white;

    border: none;
    bottom: 0px; 
    left: 60px;
    position: absolute;
}

#arrow-a {
     width: 0; 
    height: 0;
    border-left: 35px solid transparent;
    border-right: 35px solid transparent;
    border-bottom: 75px solid white;
    bottom: 150px; 
    left: 40px;
    position: absolute;
}

    p.numbers_black {
        color: black;
        text-align: center;
        font-size: 20pt;
        }

    p.numbers_white {
        color: white;
        text-align: center;
        font-size: 20pt;

    }

#colorchart { 
    width: 325px; 
    height: 130px;
    background-color: #D9F3CF;
    position: absolute;
    bottom: 8px;
    left: 245px;
}

#box-grey {

        width: 65px;
    height:65px;

    background-color: grey;

        border: none;

    position: relative;
    float: left;
}

#box-orange {

        width: 65px;
    height:65px;

    background-color: orange;

        border: none;

    position: relative;
    float: left;
}

#box-yellow {

        width: 65px;
    height:65px;

    background-color: yellow;

        border: none;

    position: relative;
    float: left;
}

#box-green {

        width: 65px;
    height:65px;

    background-color: #6DE91B;

        border: none;

    position: relative;
    float: left;
}

#box-blue {

        width: 65px;
    height:65px;

    background-color: blue;

        border: none;

    position: relative;
    float: left;
}

#box-brown {

        width: 65px;
    height:65px;

    background-color: brown;

        border: none;

    position: relative;
    float: left;
}

#box-red {

        width: 65px;
    height:65px;

    background-color: red;

        border: none;

    position: relative;
    float: left;
}

#box-white {

        width: 65px;
    height:65px;

    background-color: white;

        border: none;

    position: relative;
    float: left;
}

#box-black {

        width: 65px;
    height:65px;

    background-color: black;

        border: none;

    position: relative;
    float: left;
}

#box-pink {

        width: 65px;
    height:65px;

    background-color: pink;

        border: none;

    position: relative;
    float: left;
}
        </style>
    <h1>YOU HAVE CHOOSEN THE ARROWHEAD DESIGN</h1><br><br>

            If you are viewing this page using<br>
            Internet Explorer 8 or earlier,<br>
            please except or apologies.<br>
            We are aware that the painting function<br>
            is not working in these browsers and we<br>
            are working on the problem.<br>
                Thank You!<br><br><br>

        <h2><b>NOW CHOOSE YOUR TYPE OF BOARDS</b></h2> 

        <br>
    <br>

<form target="paypal" action="https://www.paypal.com/cgi-bin/webscr" method="post">

<input type="hidden" name="on0" value="BOARD TYPE">

<select name="os0">

    <option value="REGULATION SIZE">REGULATION SIZE ( Most common - also used for tournament play) $85.00 USD</option>

    <option value="TOURNAMENT STYLE">TOURNAMENT STYLE ( All four sides closed when set up ) $130.00 USD</option>
    <option value="MEDIUM SIZE">MEDIUM SIZE (1/2 scale 12&quot; x 24&quot; - comes with ten 3&quot; bags) $45.00 USD</option>

    <option value="MINI BOARDS">MINI BOARDS  ( 6&quot; x 12&quot; Table Top - with ten 1-1/2&quot; bags) $30.00 USD</option>

</select>
<input type="hidden" name="on1" value="BOARD DESIGN">

<input type="hidden" name="os1" value="ARROWHEAD">

        <br>
    <br>

        <h2>NOW, LET'S PAINT YOUR BOARDS</h2><br>
        <h1><font style="color: red">Please use the color chart below.</font></h1>

        <br>
    <br>

                <div id="container">

        <div id="boardleft">

                <div id="box-a">

    <span Id="arrow">

</span>

    <span Id="arrow2">

</span>

            <div Id="circle">

</div>
            </div>

</div>

    <span id="boardleft">

    <b><u><h3>FIELD 1 COLOR</h3></u></b><br><br>

        <input type="hidden" name="on2" value="FIELD 1 COLOR">      

<h3>
<select name="os2">

<option name="os2" value="">
<option name="os2" value="GREY" onclick="colorchange1()"> 1</option>

<option name="os2" value="ORANGE" onclick="colorchange2()"> 2</option>

<option name="os2" value="YELLOW" onclick="colorchange3()"> 3</option>

<option name="os2" value="GREEN" onclick="colorchange4()"> 4</option>

<option name="os2" value="BLUE" onclick="colorchange5()"> 5</option>

<option name="os2" value="BROWN" onclick="colorchange6()"> 6</option>

<option name="os2" value="RED" onclick="colorchange7()"> 7</option>

<option name="os2" value="WHITE" onclick="colorchange8()"> 8</option>

<option name="os2" value="BLACK" onclick="colorchange9()"> 9</option>

<option name="os2" value="PINK" onclick="colorchange10()">10</option>

</select>
</h3>

    </span>

        <div id="boardright">

                <div id="box-a2">

    <span Id="arrow-a">

</span>

    <span Id="arrow-a2">

</span>

            <div Id="circle">

</div>
            </div>

</div>

    <span id="boardright">

    <b><u><h3>FIELD 2 COLOR</h3></u></b><br><br>

        <input type="hidden" name="on3" value="FIELD 2 COLOR">

<h3>
<select name="os3">

<option name="os3" value="">
<option name="os3" value="GREY"  onclick="changearrow1()"> 1</option>

<option name="os3" value="ORANGE"  onclick="changearrow2()"> 2</option>

<option name="os3" value="YELLOW"  onclick="changearrow3()"> 3</option>

<option name="os3" value="GREEN"  onclick="changearrow4()"> 4</option>

<option name="os3" value="BLUE"  onclick="changearrow5()"> 5</option>

<option name="os3" value="BROWN"  onclick="changearrow6()"> 6</option>

<option name="os3" value="RED"  onclick="changearrow7()"> 7</option>

<option name="os3" value="WHITE"  onclick="changearrow8()"> 8</option>

<option name="os3" value="BLACK"  onclick="changearrow9()"> 9</option>

<option name="os3" value="PINK"  onclick="changearrow10()">10</option>

</select>
</h3>
    </span>

        <span id="colorchart">

            <div id="box-grey"><p class="numbers_black">1</p></div>
            <div id="box-orange"><p class="numbers_black">2</p></div>
            <div id="box-yellow"><p class="numbers_black">3</p></div>
            <div id="box-green"><p class="numbers_black">4</p></div>
            <div id="box-blue"><p class="numbers_white">5</p></div>
            <div id="box-brown"><p class="numbers_white">6</p></div>
            <div id="box-red"><p class="numbers_black">7</p></div>
            <div id="box-white"><p class="numbers_black">8</p></div>
            <div id="box-black"><p class="numbers_white">9</p></font></div>
            <div id="box-pink"><p class="numbers_black">10</p></div>

          </span>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T02:52:31.610

*这可能不是一个完整的答案，因为如前所述，这个问题并没有缩小问题的范围。尽管如此...*

至少部分问题是您希望将`onchange`事件用于您的元素`SELECT`，而不是`onclick`在. `OPTION``SELECT`

这是**[jsfiddle 演示](http://jsfiddle.net/afSh3/)**的链接：

*   Set 1 将在 Chrome 和 Firefox 中显示一个消息框
*   Set 2 只会在 Firefox 中显示一个消息框（至少在我使用的版本中）

（抱歉，没有测试IE）

**更新**：如果你愿意使用和学习 jQuery，这里是另一个**[jsfiddle 演示](http://jsfiddle.net/fEbmT/1/)**，它可以按照我认为你想要的方式进行颜色选择。

# html - Internet Explorer 7 上的背景图像位置

> ID：12167543
> 
> 赞同：1
> 
> 时间：2012-08-28T21:06:50.253
> 
> 标签：html, background, internet-explorer-7, background-position

这是我的“简洁”HTML

```
<html>
<head>
    <style type="text/css">
        body.custom.one_sidebar {
            background:#f5f5f5 url('img/bg/bg-content.png') no-repeat 50% 36.1em;
            overflow-x:hidden;
        }
    </style>
</head>
<body class="custom one_sidebar">
    <div class="header_area"></div>
    <div class="content_area"></div>
</body>
</html> 
```

问题是背景图像位置在 IE7 中不起作用。它适用于 IE8 和几乎所有其他浏览器。在找出原因方面需要一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:41:35.163

那是因为你在这个位置上混淆了百分比和 em。对于 IE7，您必须使用 2 倍相同的百分比/像素或 em：

```
body.custom.one_sidebar {
 background:#f5f5f5 url('img/bg/bg-content.png') no-repeat 50% value%;
 overflow-x:hidden;
} 
```

或者

```
body.custom.one_sidebar {
 background:#f5f5f5 url('img/bg/bg-content.png') no-repeat value_em 36.1em;
 overflow-x:hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:20:38.900

首先，确保您选择了一个 Doctype，因为没有一个，它将触发 Quirks 模式，并且 IE 将无法正确（或根本）呈现一些速记背景属性。

尝试`display: block`在侧边栏 CSS 中添加 , 和适当的宽度和高度。当元素没有被严格定义为块元素时，IE 已经知道渲染某些属性的问题。

# android - 仅在应用程序运行时收到警报

> ID：12167546
> 
> 赞同：1
> 
> 时间：2012-08-28T21:07:05.867
> 
> 标签：android, service, alarmmanager

我有一个 Android 应用程序，允许用户添加将记录其位置的警报。例如，每天早上 8 点我都想记录我在哪里。当收到警报时，它会启动一个服务来获取用户的位置并将其保存到数据库中。该功能在应用程序运行时（在后台或前台）运行良好。

问题是，如果我进入任务管理器并强制关闭应用程序，警报似乎不会响起。这很重要，因为用户可以重新启动手机并终止应用程序。

这是设置警报的方法：

```
private void setNewAlarm(int hour, int minute, int id) {
    Intent alarmIntent = new Intent(AutoLoggerActivity.this, AlarmReciever.class);
    alarmIntent.putExtra(Constants.ALARMID_FIELD_NAME, id);
    PendingIntent sender = PendingIntent.getBroadcast(AutoLoggerActivity.this, id, alarmIntent, 0);

    Calendar alarmCal = Calendar.getInstance();
    alarmCal.set(Calendar.HOUR_OF_DAY, hour); // set user selection
    alarmCal.set(Calendar.MINUTE, minute); // set user selection
    alarmCal.set(Calendar.SECOND, 0);

    AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, alarmCal.getTimeInMillis(), 120000, sender);
} 
```

这是广播接收器：

```
public class AlarmReciever extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        Bundle bundle = intent.getExtras();     
        int alarmId = bundle.getInt(Constants.ALARMID_FIELD_NAME);
        Toast.makeText(context, "Alarm Running: ID = " + alarmId, Toast.LENGTH_LONG).show();
        Log.d(TAG, "AlarmReceiver: onRecieve. ID = " + alarmId);

        Intent serviceIntent = new Intent(context, LocationRecordingService.class);
        serviceIntent.putExtra(Constants.ALARMID_FIELD_NAME, alarmId);
        context.startService(serviceIntent);
    }
} 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T21:11:57.937

这其实是安卓操作系统的设计特点，不是你能规避的。处于“停止”状态的应用程序无法接收任何广播。只有在两种情况下才处于这种状态：

1.  当应用程序在启动之前首次安装时
2.  当用户主动进入设置并强制关闭时

> 问题是，如果我进入任务管理器并强制关闭应用程序，警报似乎不会响起。这很重要，因为用户可以重新启动手机并终止应用程序。

这并不完全正确，因为如果重新启动设备，则不会认为应用程序处于这种“停止”状态。但是，警报不会持续重启，因此您的应用程序需要`ACTION_BOOT_COMPLETED`在设备启动时侦听系统广播，以便您可以重新安排任何待处理的警报。

如果用户主动终止您的应用程序，您必须尊重他们的选择。

# fortran - 使用 ifort 进行数组复制的程序崩溃

> ID：12167549
> 
> 赞同：6
> 
> 时间：2012-08-28T21:07:13.707
> 
> 标签：fortran, intel-fortran, fortran95

该程序`Illegal instruction: 4`在 MacOSX Lion 和 ifort (IFORT) 12.1.0 20111011 上崩溃

```
program foo
      real, pointer :: a(:,:), b(:,:)
      allocate(a(5400, 5400))
      allocate(b(5400, 3600))
      a=1.0
      b(:, 1:3600) = a(:, 1:3600)

      print *, a
      print *, b

      deallocate(a)
      deallocate(b)

end program 
```

相同的程序适用于 gfortran。我看不出有什么问题。有任何想法吗 ？展开副本并在列上执行显式循环在两个编译器中都有效。

请注意，使用可分配而不是指针我没有问题。

如果语句在模块内或不在模块内，行为是相同的。我在 ifort (IFORT) 12.1.3 20120130 上确认了相同的行为。

显然，Linux 和 ifort 12.1.5 没有问题

我尝试使用以下链接选项增加堆栈大小

`ifort -Wl,-stack_size,0x40000000,-stack_addr,0xf0000000 test.f90`

但我仍然得到同样的错误。增加 ulimit -s 来解决同样的问题。

编辑2：我做了更多的调试，显然问题发生在数组拼接操作时

```
 b(:, 1:3600) = a(:, 1:3600) 
```

涉及可疑接近 16 M 数据的值。

我正在比较生成的操作码，但如果有一种方法可以查看更具交流性的中间代码形式，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T01:39:04.483

您的程序是正确的（尽管如果您不需要能够重新指向它，我更愿意分配给指针）。问题是 ifort 默认情况下将所有临时数组放在堆栈上，无论它们有多大。您在这里执行的复制操作似乎需要一个临时数组。要解决 ifort 愚蠢的默认行为，请在编译时*始终*使用 -heap-arrays 标志。IE

```
ifort -o test test.f90 -heap-arrays 1600 
```

-heap-arrays 后面的数字是它应该开始使用堆的阈值。对于低于此的大小，使用堆栈。我在这里选择了一个相当低的数字——你可能可以安全地使用更高的数字。理论上堆栈数组更快，但差异通常完全可以忽略不计。我希望英特尔能解决这种行为。每个其他编译器对此设置都有合理的默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T23:50:29.697

使用“可分配”而不是“指针”。

真实的，可分配的 :: a(:,:), b(:,:)

将浮点数分配给指针对我来说看起来很可疑。

# symfony - symfony 如何监听_switch_user？

> ID：12167550
> 
> 赞同：6
> 
> 时间：2012-08-28T21:07:18.207
> 
> 标签：symfony

我有一个应用程序，其中我有一个超级管理员角色和具有不同权限的各种用户角色。我希望能够使用[http://symfony.com/doc/current/book/security.html#impersonating-a-user](http://symfony.com/doc/current/book/security.html#impersonating-a-user)`_switch_user`上所示的查询冒充任何这些用户

但是，当我将查询添加到我的网址末尾时，它似乎没有做任何事情。我已经玩了很长时间了，似乎找不到解决方案。我知道我登录的用户 has `ROLE_ALLOWED_TO_SWITCH`，但我似乎不太明白 symfony 是如何做到的。

我正在使用自定义身份验证提供程序，所以我认为它与此有关，但我不确定我需要查看什么。我可以发布任何需要的代码，但我真的不确定现在要发布什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T19:15:31.977

所以我又挖了一些，发现`Listener`我的自定义身份验证提供程序的类没有正确编写。它的编写方式`Token`是在每次页面加载时创建一个新的。

结果需要做两件事。

首先是将身份验证侦听器更改为类似于[Symfony 防火墙侦听器](https://github.com/symfony/symfony/tree/master/src/Symfony/Component/Security/Http/Firewall)中的侦听器，其一般结构如下所示。

```
if (null !== $token = $this->securityContext->getToken()) {
    if ($token instanceof UsernamePasswordToken && $token->isAuthenticated() &&
        $token->getUsername() === $username) {
            return;
    }
} 
```

如果某些条件成立，这些侦听器基本上允许在不创建新令牌的情况下继续进行身份验证。这些条件是令牌是正确令牌的实例，它已经过身份验证，并且用户名与登录用户的用户名匹配。

其次，如果他尝试切换用户，则必须修改此代码以检查基于原始用户的身份验证。[这个问题](https://github.com/symfony/symfony/issues/2172)详细说明了其他人遇到的类似问题。解决方法是循环访问角色以查找`SwitchUserRole`并使用该数据进行身份验证。我已经复制了下面的补丁，它将在`if`上面的初始声明之后。

```
foreach ($token->getRoles() as $role) {
    if ($role instanceof SwitchUserRole) {
        $token = $role->getSource();
            break;
    }
} 
```

一起，身份验证侦听器将仅在未通过某些条件时创建一个新令牌，并且冒充另一个用户的凭据将用于测试身份验证，而不是他们尝试冒充的用户的凭据。

# javascript - IE8/Javascript 冲突？IE8 在开发中跨站点冻结 - 包括 Javascript 列表

> ID：12167552
> 
> 赞同：1
> 
> 时间：2012-08-28T21:07:20.757
> 
> 标签：javascript, performance, internet-explorer, optimization, freeze

我们目前正在通过重新设计更新我们的网站。但是，该站点在 Windows XP / IE 8 中冻结，但我们的开发团队不确定原因。IE8 的版本是 8.0.6001.18702。

这是标头中跨站点使用的 JavaScript。是否存在可能冻结 IE8 的已知冲突？

```
<script type="text/javascript" src="/sites/all/modules/jquery_update/replace/jquery.min.js?D"></script>
<script type="text/javascript" src="/misc/drupal.js?D"></script>
<script type="text/javascript" defer="defer" src="/sites/all/modules/admin_menu/admin_menu.js?D"></script>
<script type="text/javascript" src="/sites/all/libraries/colorbox/colorbox/jquery.colorbox-min.js?D"></script>

<script type="text/javascript" src="/sites/all/modules/colorbox/js/colorbox.js?D"></script>
<script type="text/javascript" src="/sites/all/modules/colorbox/styles/default/colorbox_default_style.js?D"></script>
<script type="text/javascript" src="/sites/all/modules/nice_menus/superfish/js/superfish.js?D"></script>
<script type="text/javascript" src="/sites/all/modules/nice_menus/superfish/js/jquery.bgiframe.min.js?D"></script>
<script type="text/javascript" src="/sites/all/modules/nice_menus/nice_menus.js?D"></script>
<script type="text/javascript" src="/sites/all/libraries/qtip//jquery.qtip-1.0.0-rc3.min.js?D"></script>
<script type="text/javascript" src="/sites/all/modules/qtip/js/qtip.js?D"></script>
<script type="text/javascript" src="/sites/all/modules/spamspan/spamspan.compressed.js?D"></script>
<script type="text/javascript" src="/sites/all/modules/thickbox/thickbox.js?D"></script>

<script type="text/javascript" src="/sites/all/modules/views_slideshow/js/views_slideshow.js?D"></script>
<script type="text/javascript" src="/sites/all/modules/custom/rra_helper/js/rra_helper.js?D"></script>
<script type="text/javascript" src="/sites/all/modules/nodequeue/nodequeue.js?D"></script>
<script type="text/javascript" src="/sites/all/modules/ctools/js/ajax-responder.js?D"></script>
<script type="text/javascript" src="/sites/all/modules/boxes/boxes.js?D"></script>
<script type="text/javascript" src="/sites/all/modules/views/js/base.js?D"></script>
<script type="text/javascript" src="/sites/all/modules/views/js/ajax_view.js?D"></script>
<script type="text/javascript" src="/sites/all/modules/jquery_update/replace/jquery.form.js?D"></script>
<script type="text/javascript" src="/sites/all/themes/chi/js/jquery.selectbox/jquery.selectBox.min.js?D"></script>

<script type="text/javascript" src="/sites/all/themes/chi/scripts.js?D"></script>
<script type="text/javascript" src="/sites/all/themes/chi/jquery.dataTables.js?D"></script>
<script type="text/javascript" src="/sites/all/themes/chi/js/menutodropdown.js?D"></script>
<script type="text/javascript" src="/sites/all/themes/chi/js/jquery.tipsy.js?D"></script>
<script type="text/javascript" src="/sites/all/modules/text_resize/jquery.cookie.js?D"></script>
<script type="text/javascript" src="/sites/all/modules/text_resize/text_resize.js?D"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, { "basePath": "/", "admin_menu": { "margin_top": 1, "tweak_tabs": 1 }, "colorbox": { "transition": "elastic", "speed": 350, "opacity": "0.85", "slideshow": false, "slideshowAuto": false, "slideshowSpeed": 2500, "slideshowStart": "", "slideshowStop": "", "current": "{current} of {total}", "previous": "« Prev", "next": "Next »", "close": "Close", "overlayClose": true, "maxWidth": "100%", "maxHeight": "100%" }, "nice_menus_options": { "delay": "100", "speed": "fast" }, "qtip": { "target_position": "topRight", "tooltip_position": "bottomLeft", "show_speech_bubble_tip": true, "show_speech_bubble_tip_side": false, "color": "blue", "border_radius": "3", "border_width": "3", "show_event_type": "mouseover", "hide_event_type": "mouseout", "show_solo": true }, "spamspan": { "m": "spamspan", "u": "u", "d": "d", "h": "h", "t": "t" }, "thickbox": { "close": "Close", "next": "Next \x3e", "prev": "\x3c Prev", "esc_key": "or Esc Key", "next_close": "Next / Close on last", "image_count": "Image !current of !total" }, "getQ": "node/3", "views": { "ajax_path": "/views/ajax", "ajaxViews": { "views_dom_id:4b8e8b3a493bcb7f11628f340513d203": { "view_name": "related_publications", "view_display_id": "block_1", "view_args": "3", "view_path": "node/3", "view_base_path": "case-studies-all", "view_dom_id": "4b8e8b3a493bcb7f11628f340513d203", "pager_element": 0 } } } });
//--><!]]>
</script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
var text_resize_scope = "content";
    var text_resize_minimum = "10";
    var text_resize_maximum = "25";
    var text_resize_line_height_allow = 0;
    var text_resize_line_height_min = "16";
    var text_resize_line_height_max = "36";
//--><!]]>
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:21:48.837

首先，@MyStream 是正确的——您应该考虑使用 JS 库管理器。我建议你使用 Require.JS 或类似的东西。

其次，当浏览器像您描述的那样冻结时，通常是因为无限循环或脚本中某处发生的过度循环。

要开始解决您的问题，我建议您不要在这里和那里加载一些文件，以尝试准确确定是哪个文件导致减速。一旦找到罪魁祸首，请检查并确定问题所在的代码，然后修复它。

# javascript - 将 Web 服务调用的结果绑定到 Javascript 中的调用函数

> ID：12167556
> 
> 赞同：0
> 
> 时间：2012-08-28T21:07:57.077
> 
> 标签：javascript, jquery, json, web-services

我可能遗漏了一些简单的东西，但鉴于此 JS 代码：

```
var WS = {
    whoami: function () {
        var toReturn;
        $.getJSON("/SecurityData/GetCurrentUser", function (data) {
            toReturn = data.Email;
        });

        return toReturn;
    }
} 
```

当我调用它时，如果我在 上放置一个断点`toReturn = data.Email`，则预期的数据就在那里，但如果没有`WS.whoami`则未定义。

我认为这是因为`$.getJSON`调用是异步的，但是我怎样才能获得想要的效果呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:11:06.083

Ajax 是异步的并返回一个promise 对象。相反，返回 Promise 对象并为其添加回调。

```
var WS = {
    whoami: function () {
        return $.getJSON("/SecurityData/GetCurrentUser");
    }
};

WS.whoami().done(function(data){
    alert(data.Email);
}); 
```

唯一的其他选择是将其设为同步请求，但我不推荐它，因为它会对您的用户体验产生影响。你将不得不使用`$.ajax`和`async:false`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:26:32.777

更好的解决方案是使用回调调用您的函数。这样，您的代码将保持异步，并在 json 调用完成后继续。

```
var WS = {
    whoami: function (callback) {
        $.getJSON("/SecurityData/GetCurrentUser", callback);
    }
}

WS.whoami(function(data) {
    // code that uses var data 
}); 
```

# ios - 如何加载表中的特定行，然后根据按钮按下查看控制器

> ID：12167557
> 
> 赞同：0
> 
> 时间：2012-08-28T21:07:57.607
> 
> 标签：ios

我发誓我在文档中看到了一些关于此的内容，但找不到（因为我不确定要查找什么）。

基本上在我的应用程序中，第一个 VC 包含一个地图，用户可以在其中选择注释和每个注释按钮。否则，用户还可以选择一个按钮，该按钮将在地图上打开可搜索的建筑物表格并加载显示详细信息的视图控制器（基本上是主从设置）。

我想要做的是让标注加载该特定建筑物的指定路径。因此，如果我点击建筑物 A 上的标注，它会打开详细视图控制器以显示信息。

我该怎么做，或者哪​​些文档会有所帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T23:19:00.483

通过阅读本文，听起来地图视图和表格视图属于同一个视图控制器。如果是这样，那么视图控制器就是要集中事物的地方。再次假设模型是一个数据对象数组，在控制器中有一个方法来完成协调不同视图的所有工作。

```
- (void)selectModelAtIndex:(NSUInteger)index sender:(id)sender
{
    if (self.isSelectingModel)
        return;
    self.isSelectingModel = YES; // Stops recursive calls to -selectModelAtIndex:

    NSIndexPath *indexPath = [self indexPathForModelAtIndex:index];
    [self.tableView selectRowAtIndexPath:indexPath animated:NO scrollPosition:UITableViewScrollPositionNone;
    [self.tableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionNon animate:NO];

    MKAnnotation *annotation = [self annotationForModelAtIndex:index];
    [self.mapView selectAnnotation:av.annotation animated:NO];

    [self performSegueWithIdentifier:@"Identifier Of Detail View" sender:sender];

    self.isSelectingModel = NO;
} 
```

这是一个单一的方法，它在进入细节视图控制器之前保持 tableView 和 mapView 同步。您需要有一个`isSelectingModel`属性`-indexPathForModelAtIndex:`, 和`-annotationForModelAtIndex:`。

此方法由表视图调用，并且地图视图确实选择了回调。

# php - PDF 输出因浏览器而异

> ID：12167561
> 
> 赞同：0
> 
> 时间：2012-08-28T21:08:07.210
> 
> 标签：php, apache, pdf, gzip, tcpdf

我正在使用 TCPDF（最新版本）输出 PDF，并且遇到了一些用户获取的 PDF 似乎已损坏的问题。总是同一个人，所以我假设这与他们的浏览器有关，而且他们在各种浏览器（包括 Firefox 和 Chrome）上都遇到了这个问题。我已经在 HTTPD.CONF 文件中禁用了 GZIP，当我在浏览器（FireFox 或 Chrome）上检查响应标头时，传输是二进制编码并且具有正确的内容类型。

有什么想法吗？它是否可能由于某种原因仍在被压缩？

++ 破碎是指文件的文本已关闭。它不使用指定的字体（看起来像 Arial 并且比正常大得多），并且它在整个文档中随机进入空白页。该文件通常只有 2 页，其中大部分弹出 6 到 7 页。我开始怀疑这是否是字体问题，但是当他们通过电子邮件将文件发送给我时，它在我的机器上似乎也损坏了。

+++ 另外，我能够从其中一位遇到问题的人那里获得响应标头，并且这一切似乎都在正确传输。正确使用二进制传输和内容类型设置。

++++连接是SSL，所以Wireshark对我什么都没做，在输出文件之前没有散列，有没有一种方法可以检查传输是否有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:58:23.437

o_0 问题与 SugarCRM 中设置的字体大小有关，并且特定于用户配置文件。不知道为什么更改字体 3pts 会导致 5 个额外页面，但这解决了问题。

# ruby-on-rails - JQuery UI Dialog - 加载外部页面阻止对话框重新打开

> ID：12167563
> 
> 赞同：0
> 
> 时间：2012-08-28T21:08:08.397
> 
> 标签：ruby-on-rails, jquery-ui

如果我在不加载外部内容的情况下加载 JQuery UI 对话框，则可以使用“关闭”按钮关闭该对话框，并且可以多次重新打开该对话框。如果我加载内容，这两个功能都不起作用。代码如下。有什么提示吗？？提前致谢！！

```
 $(document).ready(function() {
           $('#viewdonationsdialog').dialog({
             autoOpen:false,
             modal:'true',
             width:600,
             height:400,
             buttons: {
                Close: function() {
                    $( this ).dialog( "close" );
                }
             }
          });
         $('#viewdonationslink').click(openDonationsDialog);            
        });

        var openDonationsDialog = function(){
/* Including the next line causes failure.  
Removing it results in success (except, of course, that my page content isn't loaded!! */

            $('#viewdonationsdialog').load('/donationsdata');       

/* And then there's the rest... */

            $('#viewdonationsdialog').dialog('open');
            return false;
        }; 
```

# xaml - 为什么这个 ScrollViewer 不产生水平滚动条？

> ID：12167564
> 
> 赞同：0
> 
> 时间：2012-08-28T21:08:28.697
> 
> 标签：xaml, microsoft-metro, windows-runtime

我在 WinRT / Metro 中创建了以下页面，并希望从 ScrollViewer 获得水平和垂直滚动条，因为内容区域在两个维度上都大于屏幕和 ScrollViewer。任何人都可以在这里发现任何错误吗？

```
<Page
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:Test"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"  
x:Class="ScrollViewerTestPage"
mc:Ignorable="d">     

<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <ScrollViewer>
        <ItemsControl ItemsSource="{Binding}" Width="2500" >
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <TextBox Width="100" Margin="5" Height="1200" Text="{Binding}"/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </ScrollViewer>     
</Grid>
</Page> 
```

数据在构造函数中初始化，如下所示：

```
var model = new List<string>();
for (int i = 1; i <= 20; i++) model.Add("" + i);
DataContext = model; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T04:36:07.503

水平滚动条有一个 scrollview 属性：http: [//msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.scrollviewer.horizo ​​ntalscrollbarvisibility](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.scrollviewer.horizontalscrollbarvisibility)

# javascript - 在图像上显示菜单

> ID：12167568
> 
> 赞同：0
> 
> 时间：2012-08-28T21:08:53.543
> 
> 标签：javascript, jquery, css

我有一个应该显示在图像上的滑动菜单，实际上是一个徽标。但是，当它这样做时，它会被移动，好像菜单的文本想要避免接触图像。

看 ：

[图片中的问题 http://fruityhotchocolate.com/m.png](http://fruityhotchocolate.com/m.png)

（注：网站为法文）

我处理事件如下：

```
$("nav>#menu>ul>li").hover(function(e) {
    $("ul",this).css("display","block");
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:17:13.677

你不需要javascript，你可以用CSS来做：

添加以下代码：

```
#menu>ul>li>ul {
    display: none;
    list-style: none;
}
#menu>ul>li:hover>ul {
    display: block;
} 
```

此外，您应该使用子选择器 ( `>`) 而不是后代选择器：

```
#menu>ul
#menu>ul>li>ul
#menu>ul>li>ul>li
#menu>ul>li>ul>li>a
#menu>ul>li>a, #menu>ul>li>a:hover, #menu>ul>li>a:visited 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:18:41.567

基本上，发生的情况是`li`扩展到与 相同的宽度，`ul`因为它没有固定的宽度。尝试：

```
$(document).ready(function() {
    $('#menu ul').children('li').each(function () {
        $(this).css('width', $(this).css('width'));
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T21:21:33.967

用 CSS 试试：

```
<div class="content">
    <img src="https://www.google.com.br/images/srpr/logo3w.png​​​​​​​​​​" />
    <ul class="menu">
        <li>Item 1</li>
    </ul>
</div> 
```

​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ ​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​CSS：

```
.content {
    position: relative;
}

.content:hover .menu {
    display: block;
}

.menu {
    position: absolute;
    display: none;
} 
```

演示：http: [//jsfiddle.net/nfKc4/](http://jsfiddle.net/nfKc4/)

# c - 从由 ' 分隔的字符串中添加数字。'

> ID：12167572
> 
> 赞同：2
> 
> 时间：2012-08-28T21:09:13.440
> 
> 标签：c, string

我想编写一个 C 程序，它将像字符串一样从用户那里获取一个 IP 地址，`"112.234.456.789"`并在字符串中的每个块之外提供格式化输出，例如，`"04.09.15.24"`对于上述 IP 地址。这是我到目前为止所拥有的：

```
#include<stdio.h>
#include<string.h>
#include<conio.h>

main()
{
    char s[15],d[11];
    int i=0,c = 0, sum[4] = {0};

    d[i]=sum[c]/10;
    printf("Enter ip address:");
    gets(s);
    printf("\n \n %s",s);
    i=0;
    for(c=0;c<15;c++)
    {
        if(s[c]!='.'||s[c]!='\0')
            sum[i]=(s[c]-48)+sum[i];
        else
            i++;
    }

    for(i=0,c=0;c<4;c++,i+=3)
    {
        d[i]=(sum[c]/10)+48;
        d[i+1]=sum[c]%10+48;
        d[i+2]='.';
    }
    printf("\n \n %s",d);
    getch();
} 
```

输入应该是 IP 地址，例如`"112.234.546.234"`，输出应该是每个块中添加数字的结果，`"04.09.15.06"`。输入和输出应该是字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:51:06.307

您的代码的问题是，它将为输入中的*任何*`s[c]!='.'||s[c]!='\0'`字符评估 true - 甚至. 这意味着永远不会增加，并且不仅每个数字都与 相加，而且 也是。*`'.'``i``sum[0]``'.' - 48`*

 *你的意思是`s[c] != '.' && s[c] != '\0'`。

[我在这里](http://ideone.com/mXYNa)写了你想要的功能。

```
#include <stdio.h>
#include <ctype.h>

void convert(const char *in, char *out) {
  unsigned int sum = 0;
  char ch;
  do {
    ch = *in++;
    if (isdigit(ch)) {
      sum += ch - '0';
    } else {
      *out++ = sum / 10 + '0';
      *out++ = sum % 10 + '0';
      if (ch == '.') {
        *out++ = '.';
        sum = 0;
      }
    }
  } while (ch);
} 
```

顺便说一句，[IPv4 地址的每个“块”都是一个*octet*](http://en.wikipedia.org/wiki/IPv4#Address_representations)，而您正在做的是将每个“块”替换为其[*数字 sum*](http://en.wikipedia.org/wiki/Digit_sum)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T21:26:01.833

它看起来像家庭作业（如果是这种情况，请将其标记为`homework`），所以我将给出一些指示：

*   用于[`fgets`](http://pubs.opengroup.org/onlinepubs/007904875/functions/fgets.html)读取用户的输入。将输入读入字符串。
*   用于[`sscanf`](http://pubs.opengroup.org/onlinepubs/007904875/functions/sscanf.html)解析字符串。由于您知道将有四个正整数，因此请`"%u.%u.%u.%u"`用作格式字符串。
*   对于四个整数中的每一个，计算数字的总和（使用除以 10 和余数除以 10，就像你刚才所做的那样）。
*   `printf`使用（或[`snprintf`](http://pubs.opengroup.org/onlinepubs/007904875/functions/snprintf.html)打印到字符串）打印格式化的输出。如果您希望将每个总和格式化为两位整数，前导 0，请`"%02u"`用作格式说明符。

PS小心`snprintf`，它可能会咬人。

**其他提示**

一次专注于一个步骤。*分而治之*。编写一个`digit_sum`函数，将整数作为参数，计算其数字的总和：

```
unsigned int digit_sum(unsigned int n)
{
    unsigned int sum = 0;

    while (n > 0) {
        sum += n % 10;
        n /= 10;
    }

    return sum;
} 
```

一旦您的`digit_sum`功能运行良好，请继续执行主要任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T22:16:57.430

我只是为您编写了一个如何“丢弃”不需要的字符的简单示例。

```
#include <studio.h>

    main ()
    {
        int add1, add2, add3, add4;

        printf("enter an ip in the form xxx.xxx.xxx.xxx: )";
        scanf("%d%*c%d%*c%d%*c%d", &add1, &add2, &add3, &add4);
        printf("add1 = %d add2 = %d add3 = %d add4 = %d\n\n", add1, add2, add3, add4);

        return 0;
    } 
```

控制台输出：

输入 xxx.xxx.xxx.xxx 形式的 ip：123.321.456.654
add1 = 123 add2 = 321 add3 = 456 add4 = 654

编辑：您只需要使用“add#”变量来完成您的数学运算。*

# c# - updatepanel 和 updateprogress 清除 PDF 响应

> ID：12167575
> 
> 赞同：0
> 
> 时间：2012-08-28T21:09:20.830
> 
> 标签：c#, asp.net, updatepanel

我正在尝试使用 UpdatePanel 和 Updateprogress 在创建和刷新 PDF 时显示等待消息。查看代码

```
<asp:UpdateProgress ID="UpdateProgress1" runat="server" AssociatedUpdatePanelID="UpdatePanel1">
  <ProgressTemplate>
    Loading.......
  </ProgressTemplate>
</asp:UpdateProgress> 

<asp:UpdatePanel ID="UpdatePanel1" runat="server">
  <Triggers>
    <asp:AsyncPostBackTrigger ControlID="BT_Create" />
  </Triggers>
  <ContentTemplate>   
    <asp:LinkButton ID="BT_Create" runat="server" OnClick="BT_Create_Click">Download</asp:LinkButton>
  </ContentTemplate>
</asp:UpdatePanel>

protected void BT_Create_Click(object sender, EventArgs e)
{
    byte[] downloadBytes = pdfConverter.GetPdfBytesFromHtmlString(htmlCodeToConvert, baseUrl);
    System.Web.HttpResponse response = System.Web.HttpContext.Current.Response;
    response.Clear();
    response.AddHeader("Content-Type", "binary/octet-stream");
    response.AddHeader("Content-Disposition", "attachment; filename="test.pdf; size=" + downloadBytes.Length.ToString());
    response.Flush();
    response.BinaryWrite(downloadBytes);
    response.Flush();
    response.End();
} 
```

问题是我可以让等待消息出现，但没有返回 PDF：S。在这件事上有什么帮助吗？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:18:09.653

这是因为您正在尝试`Response.BinaryWrite`更新面板，这是无法完成的。您只能将 html 发送回更新面板。

请查看此[链接](http://mohyuddin.blogspot.com/2008/07/responsewritreresponsebinarywritre-and.html)，该链接解释了问题并提供了简单的解决方案。

# c - 为什么不同的节点运行我的可执行文件的不同编译？(MPI)

> ID：12167576
> 
> 赞同：1
> 
> 时间：2012-08-28T21:09:25.810
> 
> 标签：c, linux, mpi, gentoo

在我重新编译我的 (C) 程序后，一些节点正在运行旧的编译（调试信息仍在其中），一些节点正在运行新的副本。服务器运行的是 Gentoo Linux，所有节点都从同一个存储中获取文件。我被告知文件系统是 NFS。我使用的 MPI 是 MPICH 版本 1.2.7。*为什么有些节点不使用新编译的副本？*

更多详细信息（以防您无法入睡）：

我正在尝试创建我的第一个 MPI 程序（我也是 C 和 Linux 的新手）。我的代码中有以下内容：

```
#if DEBUG
  {
    int i=9;
    pid_t PID;
    char hostname[256];
    gethostname(hostname, sizeof(hostname));
    printf("PID %d on %s ready for attach.\n", PID=getpid(), hostname);
    fflush(stdout);
    while (i>0) {
      printf("PID %d on %s will wait  for `gdb` to attach for %d more iterations.\n", PID, hostname, i);
      fflush(stdout);
      sleep(5);
      i--;
    }
  }
#endif 
```

然后我重新编译（没有 -DDEBUG=1 选项，所以上面的代码被排除在外）

```
$ mpicc -Wall -I<directories...> -c myprogram.c
$ mpicc -o myprogram myprogram.o -Wall <some other options...> 
```

程序编译没有问题。然后我像这样执行它：

```
$ mpirun -np 3 myprogram 
```

有时（而且越来越频繁），可执行文件的不同副本在集群的不同节点上运行？在某些节点上，调试代码会执行（并打印），而在某些节点上则不会。

*请注意，集群当前正在经历一些“时钟偏差”（或类似的东西），这可能是原因。*那是问题吗？

另请注意，我实际上只是通过在 Makefile 中注释/取消注释行来更改编译选项，因为我还没有时间实施[这些建议](https://stackoverflow.com/questions/12139376/how-to-pass-a-value-to-make-which-gets-passed-to-c-code)。

**编辑**：当问题发生时，在问题出现`md5sum myprogram`的节点上返回不同的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-10T05:45:01.237

您的不同节点保留了文件的副本，并且在您运行二进制文件时使用该文件而不是最新的。这与 Gentoo 几乎没有关系，因为它是 Linux（内核）缓存和/或 NFS 实现的产物。

换句话说，你的二进制文件被缓存了。阅读这个答案：

## [NFS 缓存清理命令？](https://stackoverflow.com/questions/8311710/nfs-cache-cleaning-command)

## [调整一些设置](http://www.tldp.org/HOWTO/NFS-HOWTO/performance.html#SYNC-ASYNC)也可能有所帮助。

* * *

我碰巧在这里有一个同步和刷新的命令：

```
$ cat /home/jaroslav/bin/flush_cache 
sudo sync
sudo sh -c 'echo 3 > /proc/sys/vm/drop_caches' 
```

# c++ - 未经身份验证的 SMTP 服务器到服务器通信？

> ID：12167579
> 
> 赞同：1
> 
> 时间：2012-08-28T21:09:38.940
> 
> 标签：c++, networking, smtp

我正在尝试将 SMTP 与我用 C++ 编写的应用程序之一集成。我的目标是能够直接向与电子邮件地址关联的 SMTP 服务器发送电子邮件，而无需进行身份验证。换句话说，我希望我的应用程序充当 SMTP 服务器并与其他 SMTP 服务器通信。例如，从 yahoo.com 发送到 gmail.com 的电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T00:33:17.320

要回答您的问题，您需要对收件人电子邮件地址的域部分（即“user@gmail.com”的“gmail.com”）执行 DNS 查找，询问其 MX 记录。这将为您提供该域的 SMTP 主机列表。然后，您可以按优先级顺序遍历该列表，尝试连接到每个主机，直到成功，然后您可以进行正常的[SMTP 对话](https://www.rfc-editor.org/rfc/rfc5321)并向其发送`HELO`/ `EHLO`、`MAIL FROM`、等命令`RCPT TO`，并`DATA`传递电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:13:43.337

你所说的是设置一个开放的邮件中继 smtp 服务器。虽然这些曾经是互联网上的规范，但由于大量垃圾邮件发送者滥用它们，它们通常不受欢迎。

如果您在私有子网内设置开放中继，并且只有子网内的人可以通过它发送电子邮件，那么这仍然是一种可接受的做法。但是，如果您允许从外部访问，这是进入互联网电子邮件黑名单的好方法。

欲了解更多信息：[http ://en.wikipedia.org/wiki/Open_mail_relay](http://en.wikipedia.org/wiki/Open_mail_relay)

# jsf-2 - 用于在 Tomahawk 中显示对象的 ArrayList 映射的数据表

> ID：12167580
> 
> 赞同：1
> 
> 时间：2012-08-28T21:09:58.680
> 
> 标签：jsf-2, datatable, tomahawk

我想`Map<Integer, ArrayList<ObjectBO>>`在 Tomahawk 的数据表中显示一个。我尝试了一些可能的解决方案，但似乎没有任何效果。

```
<h:panelGrid style="font-family:verdana;font-size:12pt;color:white" columns="1">
    <h:outputText value="Choice 1"></h:outputText>
    <t:dataTable newspaperColumns="1" value="#{startupBean.choiceKeys}" newspaperOrientation="horizontal" var="key">
        <t:column>    
            <h:outputText style="font-family:verdana;font-size:10pt;color:white" value="#{choiceMap[key].ObjectBO.displayName}"/>
        </t:column>
        <t:column>     
            <h:graphicImage width="50" height="50" id="choice" alt="jsf-sun" url="#{choiceMap[Key].ObjectBO.color_url}" value="#{choiceMap[Key].ObjectBO.color_url}"> 
            </h:graphicImage>  
        </t:column> 
    </t:dataTable>
</h:panelGrid> 
```

它的支撑豆部分是

```
public List<Integer> getChoiceKeys() {
    System.out.println("in keys");
    List<Integer> keys = new ArrayList<Integer>();
    keys.addAll(choiceMap.keySet());
    System.out.println("keys " + keys.size());
    return keys;
} 
```

请让我知道如何通过数据表遍历地图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:29:40.393

数字在 EL 中被视为`Long`。在您的代码中，`key`in`#{choiceMap[key]}`被视为`Long`，因此映射键永远不会匹配，因为`Integer`它不是`Long`. 如果您使用`Long`而不是`Integer`作为映射键，则此方法将起作用。

# sql - 面向产品构建器的 SQL DB 设计

> ID：12167581
> 
> 赞同：0
> 
> 时间：2012-08-28T21:10:03.233
> 
> 标签：sql, database-design

我们正在添加功能以允许产品构建。

例如，用户可以配置不同的属性，这些属性可以是普通值（高度、颜色等）或现有产品（可以为一件家具选择旋钮）。

我现在正在构建数据库设计，我正在寻找建议。我想出的是以下内容。

**产品**- 现有产品表*例如：ProductA*

**ParentProducts** - idParentProduct*例如：ProductB*

**ParentProduct_Attributes** - idParentProduct、idAttribute、类型（产品/值）*例如：高度、旋钮*

**ParentProduct_Attribute_Values** - idAttribute、idValue、值*例如：10"*

**ParentProduct_Attribute_ChildProducts** - idAttribute、idChildProduct、类型（注册产品/子产品）*例如：ChildProductA、ProductA*

**ChildProducts** - idChildProduct

这似乎是获取实际属性值的很多步骤。

例如，我有一件家具 ProductB。ProductB 有高​​度和旋钮。高度选项为 10"、12"（值），旋钮选项为 ChildProductA、ProductA（产品）——每个选项来自不同的表。ChildProductA 是子产品，而 ProductA 是常规产品，所以还是两个单独的表。

对此有任何意见吗？不同的想法？

希望我很清楚。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:16:05.967

```
ParentProduct_Attributes - idParentProduct, idAttribute, Type (Product/Value) Ex: Height, Knob

ParentProduct_Attribute_Values - idAttribute, idValue, Value Ex: 10" 
```

而不是为值（ParentProduct_Attribute_Values）创建一个单独的表，它应该在一个表中。非规范化有助于在某些情况下加快查询。因为每个查询 Select values table 都会减少一个连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:08:44.803

我建议采用以下结构：

```
Products - idProduct, type (Regular / Parent / Child)
Product_Attributes - idAttribute, idProduct
Product_Attributes_Values - idValue, idAttribute, value, idProduct 
```

这样你就只剩下3张桌子了。该`Product_Attributes_Values`表具有字段`value`，`idProduct`并且都可以`NULL`。如果`value`设置了，那么它是一个简单的值。如果`idProduct`设置，那么它是一个产品，它应该是一个外键`Products`。

常规产品、父产品和子产品之间的类型区分是通过 中的`type`字段进行的`Products`。如果需要，您可以在数据库之外的应用程序中进行额外的检查和/或验证。

# php - 分页时出错

> ID：12167588
> 
> 赞同：0
> 
> 时间：2012-08-28T21:11:06.200
> 
> 标签：php, mysql

在使用 php 进行查询后，我收到例如 26 个结果。我想对这些结果进行分页，每页显示 5 个。

问题是，为了发送查询，我必须使用我填写的表格信息来做一个 http 帖子。

前 5 个结果显示，但接下来的页面会给我一些关于未定义变量的错误 - 来自原始请求的变量。

这是表单代码：

```
<form name="formulario" action="resultados.php" method="POST"> 
            <input name="titulo" type="text" id="cajatitulo" class="cuadrobusqueda" placeholder="T&iacute;tulo de la publicaci&oacute;n (Ej: La fotos&iacute;ntesis y sus procesos)"> 
            <input name="anio" type="text" id="cajaanio" class="cuadrobusqueda" placeholder="A&ntilde;o">
            <br><br>
            <input name="autor" type="text" id="cajaautor" class="cuadrobusqueda" placeholder="Apellido del autor (Ej: Rojas, J; Rojas; J)"> 
            <input name="issn" type="text" id="cajaissn" class="cuadrobusqueda" placeholder="ISSN">
            <br><br>
            <input type="radio" name="tipo_busqueda" value="1" checked>
            <span onmouseover="title='Busca todos los parámetros seleccionados en un artículo.'">B&Uacute;SQUEDA EXACTA</span>
            <input type="radio" name="tipo_busqueda" value="2"> 
            <span onmouseover="title='Busca cualquiera de los parámetros seleccionados en un artículo.'">B&Uacute;SQUEDA FLEXIBLE</span>            
            </br></br>
            <input type="submit" name="boton" id="botonenviar" value="Procesar">
</form> 
```

该数据被发送到`results.php`，在此处提取帖子并使用以下代码进行分页：

```
extract($_POST);

include("conectar.php");

$conexion= conectarse();

$consulta="";
$tipo="";

if($tipo_busqueda=="1")
    $tipo="AND";
else
    $tipo="OR";

if($titulo && $consulta == "" )
    $consulta=" web.titulo_paper_web LIKE '%$titulo%'";

$consulta = '
    SELECT 
        * 
    FROM 
        acw_papers_web web 
    WHERE 
        '.$consulta.'
    ORDER BY 
        web.probabilidad DESC';
$resultado= mysql_query($consulta, $conexion);

if (!isset($paginanum)) 
    $paginanum = 1; 
$mostrar_resultados = 5;            
$filas = mysql_num_rows($resultado);    
$ultima = ceil($filas/$mostrar_resultados);         
if ($paginanum < 1)
    $paginanum = 1; 
elseif ($paginanum > $ultima)
    $paginanum = $ultima;

$max = 'LIMIT '.(paginanum - 1) * $mostrar_resultados .',' .$mostrar_resultados; 
$consulta = $consulta . " $max";
$resultado= mysql_query($consulta, $conexion); 
```

在该代码下方，我生成将我链接到下一页的数据：

```
 if ($paginanum != 1) {
    echo "<a class='navegar' href='{$_SERVER['PHP_SELF']}?paginanum=1'> <b><<</b> Primera</a> ";
    echo " ";
    $anterior = $paginanum-1;
    echo " <a class='navegar' href='{$_SERVER['PHP_SELF']}?paginanum=$anterior'> <b><</b> Anterior</a> ";
} 
if ($paginanum != $ultima) {
    $siguiente = $paginanum+1;
    echo " <a class='navegar' href='{$_SERVER['PHP_SELF']}?paginanum=$siguiente'>Siguiente <b>></b> </a> ";
    echo " <span>  </span>";
    echo " <a class='navegar' href='{$_SERVER['PHP_SELF']}?paginanum=$ultima'>&Uacute;ltima <b>>></b> </a> ";
}
echo "</br>"; 
```

该代码有效，但后续页面无效。我尝试在 url 上传递该数据：

```
&titulo=$titulo&issn=$issn&autor=$autor&anio= 
```

但它没有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:13:13.900

您应该将已发布的数据设置为会话变量，以便在将来的页面加载时使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:15:07.863

提交您的表单，`get`然后创建一个基于以下内容的查询字符串`$_GET`：

```
$querystring = "";
foreach ($_GET as $key => $val) {
    if ($key != 'paginanum') {
        $querystring .= ($querystring == "" ? "" : "&") . "$key=$val";
    }
} 
```

然后将查询字符串附加到您的链接 URL。

它不是很安全，但它可以工作。

**更新：**

Sam Dufel 刚刚让我想起了 PHP 的`http_build_query()`函数，比较好：

```
$vals = $_GET;
unset($vals['paginanum']);
$querystring = http_build_query($vals); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T21:49:11.377

另一种方法是向查询传递 LIMIT 参数。这是一个偏移量，也是一个记录数。像这样：

```
SELECT * FROM table WHERE 1=1 LIMIT 0,10 --for the first 10 records
SELECT * FROM table WHERE 1=1 LIMIT 10,10 --for the next 10 records 
```

这使您的查询只返回您想要的内容，并且代码更简洁。然后你用下一组十个循环遍历每个分页链接。

# opengl - 强制内置到他们的 GL 等价物

> ID：12167589
> 
> 赞同：3
> 
> 时间：2012-08-28T21:11:16.850
> 
> 标签：opengl, haskell, types, casting, functional-programming

我刚刚在 Haskell 中快速写了一个 Conway 的生命游戏进行练习，我认为我现在应该为它制作动画。

我想使用 GLUT + OpenGL 和几秒钟后的谷歌搜索，我有一个示例并准备启动。该示例的不同之处在于它定义了一个返回一些点的函数，`myPoints :: [(GLfloat,GLfloat,GLfloat)]`而我将`Coord`其定义为`data Coord = Coord {x :: Int, y :: Int} deriving (Show, Eq)`。这一切都很好，很整洁，游戏似乎以简单的形式运行，但是当我尝试绘制它时会出现问题。即我应该将点传递给渲染器的部分： 如果包含类型值但抱怨，`renderPrimitive Points $ mapM_ (\(x, y, z)->vertex$Vertex3 x y z) myPoints` 那很好：`myPoints``GLfloat``renderPrimitive Points $ mapM_ (\(Coord x y)->vertex$Vertex2 x y) myCoords`

```
No instance for (VertexComponent Int)
  arising from a use of `vertex'
Possible fix: add an instance declaration for (VertexComponent Int) 
```

我尝试了诸如`fromIntegral x`添加类型签名之类的方法，`:: GLfloat`或者`GLint`但它似乎总是抱怨它不能接受类型或者它不能进入​​ Int -> GLfloat/GLint。

我的问题是，如何让我的 Coord 类型与 OpenGL 类型一起使用？我在网上找不到任何提示，我宁愿不这样做`Coord = Coord {x :: GLfloat, y :: GLfloat}`，原因很简单，因为所有其他代码都不能很好地与 GLfloats 一起使用，因为它是所有预期的`Num`或`Int`诸如此类的东西。

下面是说明问题并且我希望能够编译的最小场景：

```
module Main
where

import Graphics.Rendering.OpenGL
import Graphics.UI.GLUT

data Coord = Coord {x :: Int, y :: Int} deriving (Show, Eq)

someCoords = [Coord 1 1, Coord 1 2, Coord 42 7]

main = do
  (progName, _) <- getArgsAndInitialize
  createWindow "Please compile."
  displayCallback $= display
  mainLoop

display = do
  clear [ColorBuffer]
  renderPrimitive Points $ mapM_ (\(Coord x y) -> vertex $ Vertex2 x y) someCoords 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T22:21:43.357

在和我家的另一个程序员一起寻找更长的时间后，我们找到了一段代码，可以让我们从 int 生成 GLfloat，即`fromIntegral x :: GLfloat`会产生所需的结果。同样，`fromRational`可用于`Float -> GLfloat`.

# google-app-engine - 如何在一个查询中读取所有命名空间

> ID：12167590
> 
> 赞同：1
> 
> 时间：2012-08-28T21:11:19.117
> 
> 标签：google-app-engine, google-cloud-datastore, app-engine-ndb

不像，[我如何在谷歌应用引擎上获取命名空间列表？](https://stackoverflow.com/questions/3603276/how-do-i-get-a-list-of-namespaces-on-google-app-engine)，这个问题询问，无论是否知道所有命名空间名称，是否可以通过一个查询访问所有命名空间中的数据。

* * *

我阅读了有关命名空间的文档，它们非常适合隔离数据，但我想分析来自所有不同命名空间的一些数据。是否可以在我的应用程序中运行一个包含所有 1000 个命名空间的**查询？**一个独立于命名空间的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:47:09.113

您无法在“正常”查询中一次获取所有命名空间的数据。您需要分别为每个命名空间执行此操作。

但我相信你可以通过 mapreduce 工作来做到这一点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T21:13:39.267

[在这里](https://stackoverflow.com/questions/3603276/how-do-i-get-a-list-of-namespaces-on-google-app-engine)回答（“如何在谷歌应用引擎上获取命名空间列表？”）。

# javascript - 如何从 Url 客户端获取 Id？

> ID：12167592
> 
> 赞同：1
> 
> 时间：2012-08-28T21:11:27.207
> 
> 标签：javascript, jquery, asp.net-web-api

如果我有一个像这样的 URL，那么从 URL 客户端`"/api/User/Details/2c021192-25cb-43e1-9bba-3bd5604a0a3d"`获取 ID 的最佳方法是什么？`"2c02ds92-25cb-43e1-9bba-3bd5604a0a3d"`

我需要能够`$.getJSON`使用 ID 构建请求，并且我正在寻找使用 JavaScript、jQuery 等最简洁的方法。谢谢

```
$.getJSON('/api/User/2c021192-25cb-43e1-9bba-3bd5604a0a3d')... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:13:44.110

使用[正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)并从 URL 中提取适当的部分（似乎是 UUID）。

另一种方法是仅拆分字符串`/`并获取最后一个元素。

**编辑**：关于如何从 URI 中检索 UUID 的示例：

```
var url = '/api/User/2c021192-25cb-43e1-9bba-3bd5604a0a3d';

var pattern = /[\da-f]{8}\-[\da-f]{4}\-[\da-f]{4}\-[\da-f]{4}\-[\da-f]{12}/;
var match = url.match(pattern)[0]; 
```

`url.match(pattern)`返回匹配数组，因此假设至少有一个匹配，并且只有一个匹配，您应该选择它（使用`[0]`，如示例中所示）。

证明：http: [//jsfiddle.net/p6zud/2/](http://jsfiddle.net/p6zud/2/)

**编辑 2**：缩短了用于匹配的模式（参见修订历史进行比较）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T21:16:52.273

如果 id 始终是 URI 的最后一部分，您可以执行类似的操作

```
var url_array = document.location.split('/');
var id = url_array[url_array.length - 1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T21:16:56.310

使用`split`，将 url 转换为参数数组。然后，您的案例中的最后一个数组项将是您的 ID。

有非常复杂的用于 javascript 的 URL 解析器，也许您应该在 google 上四处寻找适合您需求的解析器​​。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T21:18:09.273

试试这个

```
alert("/api/User/Details/2c021192-25cb-43e1-9bba-3bd5604a0a3d".split('/').slice(-1)[0]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T21:19:17.590

最简单的：

```
var id = '/api/User/2c021192-25cb-43e1-9bba-3bd5604a0a3d'.split('/User/')[1]; 
```

给你`2c021192-25cb-43e1-9bba-3bd5604a0a3d`；

# asp.net-mvc-3 - 如何使用 MVC3 和 Razor 创建动态图像源？

> ID：12167597
> 
> 赞同：0
> 
> 时间：2012-08-28T21:11:46.910
> 
> 标签：asp.net-mvc-3, razor

我有一个视图试图从传入的模型中构建一个表。我想生成一个图像，其源会根据循环的迭代而改变，但似乎无法让它工作。我可以在 JQuery 中做到这一点，但我想用 razor 做到这一点。我有以下表格主体：

```
<tbody>
@{for (var ix = 0; ix <= Model.Value.Count - 1; ix++)
{
    <tr>  
    <td style="width: 10%"><img src="http://gmap.com/marker" + @ix + 1 + ".png" /></td>
    <td style="width: 75%">@Model("fullname")</td>
    </tr>
}
<tbody> 
```

第一个 TD 是问题区域。我尝试过，但是...感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:15:18.213

由于它是剃须刀，因此您无需将呈现的输出添加到您的 url。尝试这个：

```
@{for (var ix = 0; ix <= Model.Value.Count - 1; ix++)
{
    <tr>  
    <td style="width: 10%"><img src="http://gmap.com/marker@(ix + 1).png" /></td>
    <td style="width: 75%">@Model("fullname")</td>
    </tr>
} 
```

我还没有测试过，但我相信它会解决你的问题。

# c# - 判断程序是否崩溃

> ID：12167601
> 
> 赞同：2
> 
> 时间：2012-08-28T21:12:00.323
> 
> 标签：c#, c++, crash, window, messagebox

> **可能重复：**
> [在 .NET 中检测进程崩溃](https://stackoverflow.com/questions/2309836/detecting-process-crash-in-net)

我正在编写 ac# 程序，它必须确定另一个 C++ 游戏程序（我们称之为 Foobar）是否崩溃。当 FooBar 程序崩溃时，它会使用 MessageBox 通知用户崩溃，如果您确定程序关闭窗口。所以我想我可以确定如果该消息框打开/激活，程序是否崩溃。问题我不知道该怎么做。或者，如果您想到其他更好的解决方案，请与我分享。

编辑：我无法编辑 C++ 程序，而且它总是有可能崩溃。我只需要知道它是否确实如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:38:48.600

[.NET 中检测进程崩溃的](https://stackoverflow.com/questions/2309836/detecting-process-crash-in-net)重复。

心跳可能是要走的路，但还有另一种方法。

当进程崩溃时，Windows 首先检查您的系统上是否配置了即时调试器。如果是这样，您可以让该调试器在它崩溃之前将其自身附加到进程。通常，您会使用此功能在进程崩溃时生成内存转储。无论您附加什么调试器，都可以知道崩溃进程的 PID 和名称。您可以利用现有调试工具（例如 ADPlus）的功能，也可以编写自己的程序并告诉 Windows 这是您的即时调试器，应该在进程崩溃时运行。我相信您可以专门为任何进程名称设置 JIT 调试器。

请参阅[http://msdn.microsoft.com/en-us/library/5hs4b7a6(v=VS.80).aspx](http://msdn.microsoft.com/en-us/library/5hs4b7a6(v=VS.80).aspx)

我认为，如果您将 HKLM\Software\Microsoft\Windows NT\Current Version\AeDebug\Debugger 注册表项设置为 '"DirectoryOfYourProgram\YourProgram.exe" -p %ld' 其中 YourProgram.exe 需要通过 - p 标志，当进程崩溃时，您的程序将被调用并传递正确的 PID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T21:19:52.533

如果您可以访问这两个应用程序的代码，则可以设置从 c++ 应用程序到 c# 应用程序的心跳消息，并在心跳停止时执行任何操作。对于通讯，您需要命名管道或类似的东西。或者，您的 c++ 可以使用文件监视定期写入文件，您的 c# 可以检测到更新。

# ruby-on-rails - Rails Activerecord 多表包括

> ID：12167606
> 
> 赞同：5
> 
> 时间：2012-08-28T21:12:24.723
> 
> 标签：ruby-on-rails, activerecord

我有四张桌子：

**带字段的**参数****

 ***   ID

**评论**与

*   ID
*   comment_id
*   argument_id
*   用户身份

**用户**

*   ID

**昵称**_

*   ID
*   提案编号
*   用户身份
*   姓名

每个论点都有很多评论，

每条评论都属于一个用户，

每个用户在参数中都有一个特定的昵称。

当我从 DB 获取论点评论时，我还想包括每个作者的昵称。

答案是关于**我不知道如何编写的 ActiveRecord 查询**。

我试过了

```
@argument.comments.includes(:user => :nicknames) 
```

但它似乎不起作用，当我通过昵称 = @argument.nicknames.find_by_user_id(comment.user.id) 获得昵称时，它会执行查询......

```
[1m[36mNickname Load (0.6ms)[0m  [1mSELECT "nicknames".* FROM "nicknames" WHERE "nicknames"."argument_id" = 59 AND "nicknames"."user_id" = 9 LIMIT 1[0m 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:50:47.143

您可以判断关联是否加载了`loaded?`.

如果我理解您的问题，这里发生的事情是您正试图在 ActiveRecord::Relation 上运行查找器。快速浏览[代码](https://github.com/rails/rails/blob/c9f27e3a479e17cd94248c007e4f528026bc18f6/activerecord/lib/active_record/relation/finder_methods.rb#L95)，它似乎不会在发出查询之前尝试查看是否加载了集合。但是，它确实采用了一个可以避免多个查询的块。例如（模型名称已更改，因为我正在使用为另一个问题创建的示例项目）：

```
c = Canteen.first
Canteen Load (0.2ms)  SELECT "canteens".* FROM "canteens" LIMIT 1
=> #<Canteen id: 1, name: "Really good place", created_at: "2012-12-13 00:04:11", updated_at: "2012-12-13 00:04:11">

c.meals.loaded?
=> false

c.meals.find {|m| m.id == 3}
  Meal Load (0.2ms)  SELECT "meals".* FROM "meals" WHERE "meals"."canteen_id" = 1
=> #<Meal id: 3, canteen_id: 1, name: "Banana Pie", price: #<BigDecimal:7fcb6784fa78,'0.499E1',18(45)>, created_at: "2012-12-13 00:37:41", updated_at: "2012-12-13 00:37:41"> 
```

您在最后一个示例中看到 ActiveRecord 发出查询以加载关联的记录。这是因为 ActiveRecord 正在调用`to_a`关联，强制加载整个集合，然后根据块条件进行过滤。显然，这并不理想。

让我们再试一次，急切地加载关联。

```
c = Canteen.includes(:meals).first
  Canteen Load (0.2ms)  SELECT "canteens".* FROM "canteens" LIMIT 1
  Meal Load (0.2ms)  SELECT "meals".* FROM "meals" WHERE "meals"."canteen_id" IN (1)
=> #<Canteen id: 1, name: "Really good place", created_at: "2012-12-13 00:04:11", updated_at: "2012-12-13 00:04:11">

c.meals.loaded?
=> true

c.meals.find {|m| m.id == 3}
=> #<Meal id: 3, canteen_id: 1, name: "Banana Pie", price: #<BigDecimal:7fcb68b596f0,'0.499E1',18(45)>, created_at: "2012-12-13 00:37:41", updated_at: "2012-12-13 00:37:41"> 
```

在此处的最后一个示例中，您会看到该集合没有再次加载。相反，该块用于过滤已加载的记录。

如下所示，即使记录已加载，ActiveRecord 也会发出查询以获取关联的记录：

```
c.meals.loaded?
=> true

c.meals.find(1)
  Meal Load (0.1ms)  SELECT "meals".* FROM "meals" WHERE "meals"."canteen_id" = 1 AND "meals"."id" = ? LIMIT 1  [["id", 1]]
=> #<Meal id: 1, canteen_id: 1, name: "Enchiladas", price: #<BigDecimal:7fcb6584ce88,'0.699E1',18(45)>, created_at: "2012-12-13 00:04:40", updated_at: "2012-12-13 00:04:40">

SELECT "meals".* FROM "meals" WHERE "meals"."canteen_id" = 1 AND "meals"."id" = 3
=> [#<Meal id: 3, canteen_id: 1, name: "Banana Pie", price: #<BigDecimal:7fcb68b808e0,'0.499E1',18(45)>, created_at: "2012-12-13 00:37:41", updated_at: "2012-12-13 00:37:41">] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:13:11.123

也许是这样的：

```
@argument.includes(:comments => [{ :user => :nicknames }]) 
```

不过没试过。。。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-06T06:25:44.787

您可以尝试这样的方法来包含多个表格

```
 User.find(:all, :include => Room.find(:all,:include => :review)) 
```**

# ruby - 将字符串解析为复杂布尔值的递归逻辑？

> ID：12167613
> 
> 赞同：0
> 
> 时间：2012-08-28T21:13:06.323
> 
> 标签：ruby, parsing, filtering, boolean-logic, sequel

我确定这已经完成了，我只是找不到它。

我需要将“（（A OR B）AND C）OR D”之类的内容转换为属性的数据库查询。具体来说，我正在使用 Ruby Sequel。任何人都可以指出一个例子或实用程序或一些可以阻止我重新发明轮子的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:16:25.300

[您可以使用ANTLR](http://www.antlr.org/)定义语法并为这些类型的字符串自动生成 Ruby 解析器。ANTLR 是一个解析器生成器，它允许您为一种语言（例如您描述的布尔语言）定义语法。

解析后，您可以指定需要采取哪些操作来构建所需的数据结构（在您的情况下是捕获查询结构的树数据结构）。

这并不是一个特别的 Ruby 问题，因为 ANTLR 也可以为其他语言生成解析器。在您的情况下，它将生成一个 Ruby 解析器，您可以将其集成到您的应用程序中以解析字符串并生成您需要的数据结构。

# google-maps-api-3 - 在谷歌地图 v3 侧边栏中排序对象

> ID：12167619
> 
> 赞同：0
> 
> 时间：2012-08-28T21:13:30.920
> 
> 标签：google-maps-api-3

我有一个可以在这里使用但没有按字母顺序排列的侧边栏：www.wrh.noaa.gov/mfr/rec/v2/ 我试图在这里按字母顺序排列：www.wrh.noaa.gov/mfr/rec/v2/index_sort。 php，但现在侧边栏文本链接没有链接到正确的地图。我理解这是为什么（已重新排序数组，但它不知道如何连接到原始的“批处理”数组），但我不知道如何在侧边栏上排序列表但保持链接之间的连接和地图。我知道我可以简单地按字母顺序订购转换为 xml 文档的电子表格，但我需要它保持它的顺序......不是按字母顺序排列的。所以我需要在看起来的脚本中进行这个排序。有什么建议么？看来我可以订购在侧边栏上显示名称的方式，而无需更改“

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:41:41.670

您只需要注意执行操作的顺序。您可以对数组进行排序，保留原始副本，并通过原始索引引用那里的标记：

[例子](http://www.geocodezip.com/wrh_noaa_gov_rec_v2_sort_0.html)

或者您可以对数组进行排序（更改所有索引），然后重新创建侧边栏以匹配：

[例子](http://www.geocodezip.com/wrh_noaa_gov_rec_v2_sort.html)

# jquery - XML\Jquery 根据用户选择创建列表

> ID：12167623
> 
> 赞同：0
> 
> 时间：2012-08-28T21:13:39.173
> 
> 标签：jquery, html, xml, ajax

好的，所以我需要尝试并完成的是拥有一个静态网页，该网页将显示从 XML 文档中提取的信息并将其呈现到屏幕上而无需刷新。我猜是基本的 AJAX 东西。

诀窍是，当我试图通过思考这个问题时，我在精神上不断地遇到“逻辑”障碍。

目标：

- 有一个图表，显示棒球队的名字、胜负、平局。在我的 XML 文档中有一个“待定”状态，因此不应该显示未完成的游戏。**（这里需要帮助）**

- 有一个选择列表，允许您选择从 XML 文档填充的团队。（完毕）

- 从上述选择列表中选择特定球队后，页面应在单独的区域显示该球队的所有计划比赛。包括待定。基本上所有与该团队相关的比赛和日期（包含在 XML 文件中）。**（这里需要帮助）**

到目前为止我所拥有的：

HTML\JS

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" href="batty.css" type="text/css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Little Batty League</title>
<script type="text/javascript" src="library.js"></script>
<script type="text/javascript" src="jquery.js"></script>

<script  type="text/javascript">
   var IE = window.ActiveXObject ? true: false;
   var MOZ = document.implementation.createDocument ? true: false;

   $(document).ready(function(){
            $.ajax({
            type: "GET",
            url: "schedule.xml",
            dataType: "xml",
            success: function(xml) {
            var select = $('#mySelect');
            $(xml).find('Teams').each(function(){
            var title = $(this).find('Team').text();
        select.append("<option/><option class='ddheader'>"+title+"</option>");
                    });
                    select.children(":first").text("please make a selection").attr("selected",true);
                }
            });
        });
     </script>
   </script>
</head>
<body onLoad="init()">
    <!-- container start -->
<div id="container">

        <!-- banner start -->
        <div id="banner">
            <img src="images/mascot.jpg" width="324" height="112" alt="Mascot" />

           <!-- buttons start --> 
            <table width="900" border="0" cellpadding="0" cellspacing="0">
              <tr>
                <td><div class="menuButton"><a href="index.html">Home</a></div></td>
                <td><div class="menuButton"><a href="schedule.html">Schedule</a></div></td>
                <td><div class="menuButton"><a href="contact.html">Contact</a></div></td>
                <td><div class="menuButton"><a href="about.html">About</a></div></td>
              </tr>
            </table>
           <!-- buttons end -->

        </div>
        <!-- banner end -->

        <!-- content start -->
        <div id="content">
            <br />
            <form>
                <select id="mySelect">
                    <option>please make a selection</option>
                </select>
            </form>
        </div>
        <!-- content end -->

        <!-- footer start -->
        <div id="footer">
            &copy; 2012 Batty League
        </div>
        <!-- footer end -->

    </div>
    <!-- container end -->
</body>
</html> 
```

XML是：

```
<?xml version="1.0" encoding="utf-8"?>
    <Schedule season="1">
        <Teams>
            <Team>Bluejays</Team>
        </Teams>

        <Teams>
            <Team>Chickens</Team>
        </Teams>

        <Teams>
            <Team>Lions</Team>
        </Teams>

        <Teams>
            <Team>Pixies</Team>
        </Teams>

        <Teams>
            <Team>Zombies</Team>
        </Teams>

        <Teams>
            <Team>Wombats</Team>
        </Teams>

        <Game status="Played"> 
            <Home_Team>Chickens</Home_Team>
            <Away_Team>Bluejays</Away_Team>
            <Date>2012-01-10T09:00:00</Date>
        </Game>

        <Game status="Pending"> 
            <Home_Team>Bluejays </Home_Team>
            <Away_Team>Chickens</Away_Team>
            <Date>2012-01-11T09:00:00</Date>
        </Game>

        <Game status="Played"> 
            <Home_Team>Bluejays</Home_Team>
            <Away_Team>Lions</Away_Team>
            <Date>2012-01-18T09:00:00</Date>
        </Game>

        <Game status="Played"> 
            <Home_Team>Lions</Home_Team>
            <Away_Team>Bluejays</Away_Team>
            <Date>2012-01-19T09:00:00</Date>
        </Game>

        <Game status="Played"> 
            <Home_Team>Bluejays</Home_Team>
            <Away_Team>Pixies</Away_Team>
            <Date>2012-01-21T09:00:00</Date>
        </Game>

        <Game status="Played"> 
            <Home_Team>Pixies</Home_Team>
            <Away_Team>Bluejays</Away_Team>
            <Date>2012-01-23T09:00:00</Date>
        </Game>

        <Game status="Played"> 
            <Home_Team>Bluejays</Home_Team>
            <Away_Team>Zombies</Away_Team>
            <Date>2012-01-25T09:00:00</Date>
        </Game>

        <Game status="Pending"> 
            <Home_Team>Zombies</Home_Team>
            <Away_Team>Bluejays</Away_Team>
            <Date>2012-01-27T09:00:00</Date>
        </Game>

        <Game status="Pending"> 
            <Home_Team>Bluejays</Home_Team>
            <Away_Team>Wombats</Away_Team>
            <Date>2012-01-28T09:00:00</Date>
        </Game>

        <Game status="Played"> 
            <Home_Team>Wombats</Home_Team>
            <Away_Team>Bluejays</Away_Team>
            <Date>2012-01-30T09:00:00</Date>
        </Game>

        <Game status="Played"> 
            <Home_Team>Chickens</Home_Team>
            <Away_Team>Lions</Away_Team>
            <Date>2012-01-31T09:00:00</Date>
        </Game>

        <Game status="Played"> 
            <Home_Team>Lions</Home_Team>
            <Away_Team>Chickens</Away_Team>
            <Date>2012-02-04T09:00:00</Date>
        </Game>

        <Game status="Played"> 
            <Home_Team>Chickens</Home_Team>
            <Away_Team>Pixies</Away_Team>
            <Date>2012-02-05T09:00:00</Date>
        </Game>

        <Game status="Played"> 
            <Home_Team>Pixies</Home_Team>
            <Away_Team>Chickens</Away_Team>
            <Date>2012-02-07T09:00:00</Date>
        </Game>

        <Game status="Played"> 
            <Home_Team>Chickens</Home_Team>
            <Away_Team>Zombies</Away_Team>
            <Date>2012-02-08T09:00:00</Date>
        </Game>

        <Game status="Played"> 
            <Home_Team>Zombies</Home_Team>
            <Away_Team>Chickens</Away_Team>
            <Date>2012-02-10T09:00:00</Date>
        </Game>

        <Game status="Played"> 
            <Home_Team>Lions</Home_Team>
            <Away_Team>Pixies</Away_Team>
            <Date>2012-02-12T09:00:00</Date>
        </Game>

                <Game status="Played"> 
            <Home_Team>Pixies </Home_Team>
            <Away_Team>Lions</Away_Team>
            <Date>2012-02-14T09:00:00</Date>
        </Game>

        <Game status="Played"> 
            <Home_Team>Lions</Home_Team>
            <Away_Team>Zombies</Away_Team>
            <Date>2012-02-15T09:00:00</Date>
        </Game>

        <Game status="Played"> 
            <Home_Team>Zombies</Home_Team>
            <Away_Team>Lions</Away_Team>
            <Date>2012-02-16T09:00:00</Date>
        </Game>

        <Game status="Played"> 
            <Home_Team>Lions</Home_Team>
            <Away_Team>Wombats</Away_Team>
            <Date>2012-01-23T09:00:00</Date>
        </Game>

        <Game status="Played"> 
            <Home_Team>Wombats</Home_Team>
            <Away_Team>Lions</Away_Team>
            <Date>2012-02-24T09:00:00</Date>
        </Game>

        <Game status="Pending"> 
            <Home_Team>Pixies</Home_Team>
            <Away_Team>Zombies</Away_Team>
            <Date>2012-02-25T09:00:00</Date>
        </Game>

        <Game status="Pending"> 
            <Home_Team>Zombies</Home_Team>
            <Away_Team>Pixies</Away_Team>
            <Date>2012-02-26T09:00:00</Date>
        </Game>

        <Game status="Played"> 
            <Home_Team>Pixies</Home_Team>
            <Away_Team>Wombats</Away_Team>
            <Date>2012-02-27T09:00:00</Date>
        </Game>

        <Game status="Played"> 
            <Home_Team>Wombats</Home_Team>
            <Away_Team>Pixies</Away_Team>
            <Date>2012-02-28T09:00:00</Date>
        </Game>

        <Game status="Played"> 
            <Home_Team>Zombies</Home_Team>
            <Away_Team>Wombats</Away_Team>
            <Date>2012-02-04T09:00:00</Date>
        </Game>

        <Game status="Played"> 
            <Home_Team>Wombats</Home_Team>
            <Away_Team>Zombies</Away_Team>
            <Date>2012-02-05T09:00:00</Date>
        </Game>

        <Game status="Played"> 
            <Home_Team>Wombats</Home_Team>
            <Away_Team>Chickens</Away_Team>
            <Date>2012-02-07T09:00:00</Date>
        </Game>

        <Game status="Played"> 
            <Home_Team>Chickens</Home_Team>
            <Away_Team>Wombats</Away_Team>
            <Date>2012-02-08T09:00:00</Date>
        </Game>
    </Schedule> 
```

编辑：更简洁：

如何使用 JS 从 XML 文件中提取信息并以类似图表的格式显示在页面上？

我将如何为选择列表编写 if 语句，一旦选择了特定团队，它将填充一个不同的框（与上一段不同），其中包含与该团队有关的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:33:58.303

你应该继续使用 jQuery 选择器：

例如：选择某个团队的所有游戏

```
var teamName = "Bluejays";
$(xml).find('Game > Home_Team:contains(' + teamName + '), Game > Away_Team:contains(' + teamName + )').each(function(){
  var date = $(this).siblings('Date').text();
  var status = $(this).parent().attr('status');
  }); 
```

有很多方法可以遍历你的xml，随心所欲，

针对xml解析问题：

```
 $.ajax({
    type: "GET",
    url: "../xml/sdf.xml",
    dataType: ($.browser.msie) ? "text" : "xml",
    success: parseXml
  });
  function  parseXml(xml)
    {
          if ($.browser.msie) {
            var xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
            xmlDoc.loadXML(xml);
            xml = xmlDoc;
          } ... 
```

# mysql - MYSQL查询某些列的总和

> ID：12167626
> 
> 赞同：0
> 
> 时间：2012-08-28T21:13:46.777
> 
> 标签：mysql, sql, group-by

假设我有这样的 MYSQL 登录表：

```
id---name---location---login_date
----------------------------------
1----mike----usa-----21.08.2012
2----tony----uk------22.08.2012
3----tony----uk------23.08.2012
4----david--france---24.08.2012
5----mike----usa-----25.08.2012
6----tony----uk------26.08.2012
7----ash--france----27.08.2012 
```

我需要这个输出。结果将按名称分组，按登录时间排序。
这种情况下最快的查询是什么？

```
login_times---name
3-------------tony
2-------------mike
1-------------david
1-------------ash 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T21:18:05.263

```
SELECT COUNT(*) AS 'login_times', name 
FROM logins 
GROUP BY name 
ORDER BY login_times DESC 
```

[http://sqlfiddle.com/#!2/6e176/9](http://sqlfiddle.com/#!2/6e176/9)

但是[whathaveyououtried.com](http://whathaveyoutried.com)？

# java - 重命名主活动后出错

> ID：12167629
> 
> 赞同：1
> 
> 时间：2012-08-28T21:14:07.713
> 
> 标签：java, android, xml, android-manifest

将我的主类重命名为“Main”并将主 xml 重命名为“main”后，我可以启动我的应用程序。我不断得到这个logcat：

```
08-28 21:46:27.563: D/AndroidRuntime(264): Shutting down VM
08-28 21:46:27.563: W/dalvikvm(264): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
08-28 21:46:27.563: E/AndroidRuntime(264): Uncaught handler: thread main exiting due to uncaught exception
08-28 21:46:27.623: E/AndroidRuntime(264): java.lang.RuntimeException: Unable to start activity ComponentInfo{noc.support/noc.support.Main}: java.lang.NullPointerException
08-28 21:46:27.623: E/AndroidRuntime(264):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
08-28 21:46:27.623: E/AndroidRuntime(264):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
08-28 21:46:27.623: E/AndroidRuntime(264):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
08-28 21:46:27.623: E/AndroidRuntime(264):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
08-28 21:46:27.623: E/AndroidRuntime(264):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-28 21:46:27.623: E/AndroidRuntime(264):  at android.os.Looper.loop(Looper.java:123)
08-28 21:46:27.623: E/AndroidRuntime(264):  at android.app.ActivityThread.main(ActivityThread.java:4363)
08-28 21:46:27.623: E/AndroidRuntime(264):  at java.lang.reflect.Method.invokeNative(Native Method)
08-28 21:46:27.623: E/AndroidRuntime(264):  at java.lang.reflect.Method.invoke(Method.java:521)
08-28 21:46:27.623: E/AndroidRuntime(264):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
08-28 21:46:27.623: E/AndroidRuntime(264):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
08-28 21:46:27.623: E/AndroidRuntime(264):  at dalvik.system.NativeStart.main(Native Method)
08-28 21:46:27.623: E/AndroidRuntime(264): Caused by: java.lang.NullPointerException
08-28 21:46:27.623: E/AndroidRuntime(264):  at noc.support.Main.onCreate(Main.java:116)
08-28 21:46:27.623: E/AndroidRuntime(264):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-28 21:46:27.623: E/AndroidRuntime(264):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
08-28 21:46:27.623: E/AndroidRuntime(264):  ... 11 more
08-28 21:46:27.653: I/dalvikvm(264): threadid=7: reacting to signal 3
08-28 21:46:27.663: I/dalvikvm(264): Wrote stack trace to '/data/anr/traces.txt'
08-28 21:47:07.853: I/Process(264): Sending signal. PID: 264 SIG: 9 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="noc.support"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
    <uses-permission android:name="android.permission.INTERNET" /> 
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" android:debuggable="true">

        <service android:name=".BootListnerService" android:label="Boot Service">
            <intent-filter>
                <action android:name="noc.support.BootListnerService" />
            </intent-filter>
        </service>

        <receiver
            android:name=".BootListnerServiceReceiver"
            android:enabled="true"
            android:exported="true"
            android:label="BootListnerServiceReceiver">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver>

        <activity
            android:name=".Main"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name=".Register" android:label="Register"></activity>

        <activity android:name=".Settings" android:label="Settings"></activity>

        <activity android:name=".ServersStatus" android:label="Servers Status"></activity>

    </application>

</manifest> 
```

这是main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/emailLable"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1"
        android:layout_marginTop="40dp"
        android:text="Email:"
        android:textAppearance="?android:attr/textAppearanceMedium" android:layout_marginLeft="5dp"/>

    <EditText
        android:id="@+id/emailField"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:ems="10" android:layout_marginLeft="5dp" android:layout_marginRight="5dp"
        android:inputType="textEmailAddress" />

    <TextView
        android:id="@+id/passwordLable"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/editText1"
        android:layout_marginTop="36dp"
        android:text="Password:"
        android:textAppearance="?android:attr/textAppearanceMedium" android:layout_marginLeft="5dp"/>

    <EditText
        android:id="@+id/passwordField"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:ems="10" 
        android:inputType="textPassword" 
        android:layout_marginLeft="5dp" android:layout_marginRight="5dp"/>

    <CheckBox
        android:id="@+id/rememberEmailPasswordCheckBox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Remember my email &amp; password" />

    <CheckBox
        android:id="@+id/loginAutomaticallyCheckBox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Login automatically" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:paddingLeft="5dp" android:paddingRight="5dp" android:layout_marginTop="40dp">

        <Button
            android:id="@+id/addButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.05"
            android:text="Add" />

        <Button
            android:id="@+id/refreshButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.86"
            android:text="Refresh" />

    </LinearLayout>

</LinearLayout> 
```

我究竟做错了什么？

有没有人有任何想法。

我用谷歌搜索了它，但我找不到修复程序。

当我更改“setContentView（R.layout.main）；” 对于任何其他布局，它都可以正常工作，但我需要这个类以 main.xml 开头

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:21:35.513

它似乎仍在尝试启动活动“ComponentInfo”。如果您更改了所有文件，但没有更改软件包名称，那么您可能正在将新应用程序安装在旧应用程序之上，并且旧启动器指向不再存在的旧活动。

**简而言之：**尝试删除旧应用程序并重新安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:00:14.123

Main.java （您的活动）的第 116 行有一个`NullPointerException`。应该很容易找到自己，或者在这里发布 Main.java 的代码。

```
08-28 21:46:27.623: E/AndroidRuntime(264): Caused by: java.lang.NullPointerException
08-28 21:46:27.623: E/AndroidRuntime(264):  at noc.support.Main.onCreate(Main.java:116) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T14:56:58.280

我通过创建一个新项目来修复它并将我的所有文件复制到该项目中，但我没有替换主类或布局，而是复制并粘贴了这两个类的内部代码，但保留了类名。这样类名是正确的。

# algorithm - 在 n log n 时间内洗牌链表的算法

> ID：12167630
> 
> 赞同：25
> 
> 时间：2012-08-28T21:14:16.457
> 
> 标签：algorithm, linked-list, shuffle, divide-and-conquer

我正在尝试使用分治算法对链表进行洗牌，该算法在线性（n log n）时间和对数（log n）额外空间中随机洗牌链表。

我知道我可以做一个类似于可以在一个简单的值数组中使用的 Knuth shuffle，但我不确定如何通过分而治之的方式做到这一点。我的意思是，我实际上在划分什么？我是否只是划分到列表中的每个单独节点，然后使用一些随机值将列表随机组合在一起？

还是我给每个节点一个随机数，然后根据随机数对节点进行合并排序？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-28T22:03:43.433

下面的呢？执行与归并排序相同的过程。合并时，不是按排序顺序从两个列表中选择一个元素（一个接一个），而是掷硬币。根据掷硬币的结果，选择是从第一个列表还是从第二个列表中选择一个元素。

* * *

[编辑（2022-01-12）：正如 GA1 在下面的答案中](https://stackoverflow.com/a/28765191/44738)指出的那样，该算法不会随机均匀地产生排列。

* * *

**算法。**

```
shuffle(list):
    if list contains a single element
        return list

    list1,list2 = [],[]
    while list not empty:
        move front element from list to list1
        if list not empty: move front element from list to list2

    shuffle(list1)
    shuffle(list2)

    if length(list2) < length(list1):
        i = pick a number uniformly at random in [0..length(list2)]             
        insert a dummy node into list2 at location i 

    # merge
    while list1 and list2 are not empty:
        if coin flip is Heads:
            move front element from list1 to list
        else:
            move front element from list2 to list

    if list1 not empty: append list1 to list
    if list2 not empty: append list2 to list

    remove the dummy node from list 
```

空间的关键点在于，将列表一分为二不需要任何额外的空间。我们需要的唯一额外空间是在递归期间在堆栈上维护 log n 个元素。

虚拟节点的要点是实现插入和删除虚拟元素保持元素分布均匀。

* * *

编辑（2022-01-12）：正如莱利在评论中指出的那样，**下面的分析是有缺陷的**。

* * *

**分析。** 为什么分布均匀？在最终合并之后，`P_i(n)`任何给定数字最终出现在该位置的概率`i`如下。要么是：

*   在`i`自己的列表中排在第-th位，并且该列表第一次掷硬币获胜`i`，这个概率是`1/2^i`；
*   在自己的列表中的-st位置，并且该列表赢得了*包括最后一个在内的*`i-1`掷硬币`i-1`次数和输一次，这个概率是次数；*`(i-1) choose 1``1/2^i`*
**   在自己的列表中排在第-nd位，并且该列表赢得了*包括最后一个在内的*`i-2`掷硬币`i-2`次数，并且输了两次，这个概率是次数；*`(i-1) choose 2``1/2^i`***   等等。**

 **所以概率

```
P_i(n) = \sum_{j=0}^{i-1} (i-1 choose j) * 1/2^i * P_j(n/2). 
```

归纳地，你可以证明`P_i(n) = 1/n`。我让您验证基本情况并假设`P_j(n/2) = 2/n`. 该术语`\sum_{j=0}^{i-1} (i-1 choose j)`正是`i-1`位二进制数的数量，即`2^{i-1}`。所以我们得到

```
P_i(n) = \sum_{j=0}^{i-1} (i-1 choose j) * 1/2^i * 2/n
       = 2/n * 1/2^i * \sum_{j=0}^{i-1} (i-1 choose j)
       = 1/n * 1/2^{i-1} * 2^{i-1}
       = 1/n 
```

我希望这是有道理的。我们需要的唯一假设`n`是偶数，并且这两个列表是统一打乱的。这是通过添加（然后删除）虚拟节点来实现的。

PS我最初的直觉远非严格，但我将其列出以防万一。想象一下，我们将 1 到 n 之间的数字随机分配给列表的元素。现在我们对这些数字进行归并排序。在合并的任何给定步骤中，它需要确定两个列表的哪个头部较小。但是一个大于另一个的概率应该正好是 1/2，所以我们可以通过掷硬币来模拟这一点。

PPS 有没有办法在这里嵌入 LaTeX？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-05T18:56:30.057

## 代码

**上洗牌方法**

这个（lua）版本是从 foxcub 的回答中改进的，以消除对虚拟节点的需要。

为了稍微简化此答案中的代码，此版本假设您的列表知道它们的大小。如果他们不这样做，你总是可以及时找到它`O(n)`，但更好的是：可以在代码中进行一些简单的调整，而不需要事先计算它（比如将一分为二而不是前半部分和后半部分） .

```
function listUpShuffle (l)
    local lsz = #l
    if lsz <= 1 then return l end

    local lsz2 = math.floor(lsz/2)
    local l1, l2 = {}, {}
    for k = 1, lsz2     do l1[#l1+1] = l[k] end
    for k = lsz2+1, lsz do l2[#l2+1] = l[k] end

    l1 = listUpShuffle(l1)
    l2 = listUpShuffle(l2)

    local res = {}
    local i, j = 1, 1
    while i <= #l1 or j <= #l2 do
        local rem1, rem2 = #l1-i+1, #l2-j+1
        if math.random() < rem1/(rem1+rem2) then
            res[#res+1] = l1[i]
            i = i+1
        else
            res[#res+1] = l2[j]
            j = j+1
        end
    end
    return res
end 
```

为了避免使用虚拟节点，您必须通过改变在每个列表中选择的概率来补偿两个中间列表可以具有不同长度的事实。这是通过测试 [0,1] 统一随机数与从第一个列表中弹出的节点与弹出的节点总数（在两个列表中）的比率来完成的。

**下洗牌方法**

您还可以在递归细分时随机播放，这在我的简陋测试中显示出稍微（但始终如一）更好的性能。它可能来自较少的指令，或者另一方面它可能是由于 luajit 中的缓存预热而出现的，因此您必须针对您的用例进行分析。

```
function listDownShuffle (l)
    local lsz = #l
    if lsz <= 1 then return l end

    local lsz2 = math.floor(lsz/2)
    local l1, l2 = {}, {}
    for i = 1, lsz do
        local rem1, rem2 = lsz2-#l1, lsz-lsz2-#l2
        if math.random() < rem1/(rem1+rem2) then
            l1[#l1+1] = l[i]
        else
            l2[#l2+1] = l[i]
        end
    end

    l1 = listDownShuffle(l1)
    l2 = listDownShuffle(l2)

    local res = {}
    for i = 1, #l1 do res[#res+1] = l1[i] end
    for i = 1, #l2 do res[#res+1] = l2[i] end
    return res
end 
```

## 测试

完整的源代码在[我的 listShuffle.lua Gist](https://gist.github.com/Aszarsha/9373522)中。

它包含的代码在执行时打印一个矩阵，该矩阵表示输入列表的每个元素在指定的运行次数后它出现在输出列表的每个位置的次数。一个相当均匀的矩阵“显示”字符分布的均匀性，因此洗牌的均匀性。

这是一个使用（非 2 的幂）3 元素列表运行 1000000 次迭代的示例：

```
>> luajit listShuffle.lua 1000000 3
Up shuffle bias matrix:
333331 332782 333887
333377 333655 332968
333292 333563 333145
Down shuffle bias matrix:
333120 333521 333359
333435 333088 333477
333445 333391 333164 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-02-27T12:31:09.830

我会说，那个狐狸的答案是错误的。为了证明我将为一个完美的混洗列表引入一个有用的定义（称它为数组或序列或任何你想要的）。

*定义：假设我们有一个 List`L`包含元素`a1, a2 ... an`和索引`1, 2, 3..... n`。如果我们将 暴露`L`给一个 shuffle 操作（我们无法访问其内部结构）`L`当且仅当通过知道一些 k ( `k< n`) 元素的索引我们不能推断出剩余`n-k`元素的索引时，它才会被完美地洗牌。也就是说，其余`n-k`元素同样有可能在任何剩余`n-k`索引处显示。*

示例：如果我们有一个四元素列表`[a, b, c, d]`，并且在对其进行洗牌后，我们知道它的第一个元素是`a`( )，而不是任何元素出现在`[a, .., .., ..]`的概率，比如说，第三个单元格等于。`b, c, d``1/3`

现在，算法不满足定义的最小列表具有三个元素。但是算法无论如何都会将其转换为 4 元素列表，因此我们将尝试显示它对于 4 元素列表的不正确性。

考虑一个输入`L = [a, b, c, d]`在算法的第一次运行之后，L 将被划分为`l1 = [a, c]`和`l2 = [b, d]`。在对这两个子列表进行混洗之后（但在合并到四元素结果之前），我们可以得到四个同样可能的 2 元素列表：

```
l1shuffled = [a , c]     l2shuffled = [b , d]
l1shuffled = [a , c]     l2shuffled = [d , b]
l1shuffled = [c , a]     l2shuffled = [b , d]
l1shuffled = [c , a]     l2shuffled = [d , b] 
```

现在试着回答两个问题。
**1\. 合并成最终结果后`a`成为列表第一个元素的概率是多少？**
很简单，我们可以看到上面四对中只有两对（同样，同样可能）可以给出这样的结果（`p1 = 1/2`）。对于这些对中的每一个，必须在合并例程 ( )`heads`中的第一次翻转期间绘制。因此，作为 的第一个元素的`p2 = 1/2`概率是，这是正确的。`a``Lshuffled``p = p1*p2 = 1/4`

**2\. 知道`a`在 的第一个位置`Lshuffled``c``b``d``Lshuffled`**
，根据上述完美混洗列表的定义，在 Now的第二个位置有**（我们也可以选择****或****不失一般性）****的概率是多少**，答案应该是`1/3`，因为列表中剩余的三个单元格中有三个数字
让我们看看算法是否能保证这一点。
在选择`1`作为 的第一个元素之后，`Lshuffled`我们现在将有：
`l1shuffled = [c] l2shuffled = [b, d]`
或： 在两种情况下
`l1shuffled = [c] l2shuffled = [d, b]`
选择`3`的概率等于翻转`heads`( `p3 = 1/2`) 的概率，因此具有`3`作为第二个元素的概率`Lshuffled`，当知道的第一个元素元素`Lshuffled`等于。这结束了**算法不正确性的证明。**`1``1/2``1/2 != 1/3`

 **有趣的是，该算法满足了完美洗牌的必要（但不充分）条件，即：

*给定一个`n`元素列表，对于每个索引`k`( `<n`)，对于每个元素`ak`：在对列表时间进行洗牌之后`m`，如果我们计算`ak`了索引上出现的次数`k`，这个计数将趋向于`m/n`概率，`m`趋向于无穷大。*

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-12-23T16:18:29.510

你实际上可以做得更好：最好的列表洗牌算法是**O(n log n) 时间**和**O(1) 空间**。（你也可以在**O(n) 时间**和**O(n) 空间**中洗牌，方法是为列表构造一个指针数组，使用 Knuth 将其洗牌并相应地重新排列列表。）

**复杂性证明**

要了解为什么 O(n log n) 时间对于 O(1) 空间是最小的，请注意：

*   使用 O(1) 空间，更新任意列表元素的后继元素必然需要 O(n) 时间。
*   Wlog，您可以假设每当您更新一个元素时，您也会更新所有其他元素（如果您愿意，可以保持它们不变），因为这也只需要 O(n) 时间。
*   对于 O(1) 空间，最多有 O(1) 个元素可供选择作为您要更新的任何元素的后继元素（这些元素是哪些特定元素显然取决于算法）。
*   因此，所有元素的单个 O(n) 时间更新可能会导致最多 c^n 个不同的列表排列。
*   既然有n！= O(n^n) = O(c^(n log n)) 可能的列表排列，您至少需要 O(log n) 更新。

**链表数据结构（因为 Python）**

```
import collections

class Cons(collections.Sequence):
    def __init__(self, head, tail=None):
        self.head = head
        self.tail = tail

    def __getitem__(self, index):
        current, n = self, index
        while n > 0:
            if isinstance(current, Cons):
                current, n = current.tail, n - 1
            else:
                raise ValueError("Out of bounds index [{0}]".format(index))
        return current

    def __len__(self):
        current, length = self, 0
        while isinstance(current, Cons):
            current, length = current.tail, length + 1
        return length

    def __repr__(self):
        current, rep = self, []
        while isinstance(current, Cons):
            rep.extend((str(current.head), "::"))
            current = current.tail
        rep.append(str(current))
        return "".join(rep) 
```

**合并式算法**

这是一个基于迭代归并排序的 O(n log n) 时间和 O(1) 空间算法。基本思想很简单：将左半边洗牌，然后将右半边洗牌，然后通过从两个列表中随机选择来合并它们。有两点值得注意：

1.  通过使算法迭代而不是递归，并在每个合并步骤结束时返回指向新最后一个元素的指针，我们将空间需求减少到 O(1)，同时保持时间成本最小。
2.  为确保所有输入大小的所有可能性均等，我们在合并时使用来自 Gilbert–Shannon–Reeds 模型的 riffle shuffle 的概率（参见[http://en.wikipedia.org/wiki/Gilbert%E2%80%93Shannon %E2%80%93Reeds_model](http://en.wikipedia.org/wiki/Gilbert%E2%80%93Shannon%E2%80%93Reeds_model)）。

```
import random

def riffle_lists(head, list1, len1, list2, len2):
    """Riffle shuffle two sublists in place. Returns the new last element."""
    for _ in range(len1 + len2):
        if random.random() < (len1 / (len1 + len2)):
            next, list1, len1 = list1, list1.tail, len1 - 1
        else:
            next, list2, len2 = list2, list2.tail, len2 - 1
        head.tail, head = next, next
    head.tail = list2
    return head

def shuffle_list(list):
    """Shuffle a list in place using an iterative merge-style algorithm."""
    dummy = Cons(None, list)
    i, n = 1, len(list)
    while (i < n):
        head, nleft = dummy, n
        while (nleft > i):
            head = riffle_lists(head, head[1], i, head[i + 1], min(i, nleft - i))
            nleft -= 2 * i
        i *= 2
    return dummy[1] 
```

**另一种算法**

另一种有趣的 O(n log n) 算法会产生不完全均匀的随机播放，只需简单地将列表随机播放 3/2 log_2(n) 次。如[http://en.wikipedia.org/wiki/Gilbert%E2%80%93Shannon%E2%80%93Reeds_model](http://en.wikipedia.org/wiki/Gilbert%E2%80%93Shannon%E2%80%93Reeds_model)中所述，这仅留下恒定数量的信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-26T01:26:10.800

这是一种可能的解决方案：

```
#include <stdlib.h>

typedef struct node_s {
   struct node_s * next;
   int data;
} node_s, *node_p;

void shuffle_helper( node_p first, node_p last ) {
   static const int half = RAND_MAX / 2;
   while( (first != last) && (first->next != last) ) {
      node_p firsts[2] = {0, 0};
      node_p *lasts[2] = {0, 0};
      int counts[2] = {0, 0}, lesser;
      while( first != last ) {
         int choice = (rand() <= half);
         node_p next = first->next;
         first->next = firsts[choice];
         if( !lasts[choice] ) lasts[choice] = &(first->next);
         ++counts[choice];
         first = next;
      }

      lesser = (counts[0] < counts[1]);

      if( !counts[lesser] ) {
         first = firsts[!lesser];
         *(lasts[!lesser]) = last;
         continue;
      }

      *(lasts[0]) = firsts[1];
      *(lasts[1]) = last;

      shuffle_helper( firsts[lesser], firsts[!lesser] );

      first = firsts[!lesser];
      last = *(lasts[!lesser]);
   }
}

void shuffle_list( node_p thelist ) { shuffle_helper( thelist, NULL ); } 
```

这基本上是快速排序，但没有枢轴，并且具有随机分区。

外部`while`循环替换了递归调用。

内部`while`循环将每个元素随机移动到两个子列表之一中。

在内`while`循环之后，我们将子列表相互连接起来。

然后，我们在较小的子列表上递归，并在较大的子列表上循环。

由于较小的子列表永远不会超过初始列表大小的一半，因此最坏情况下的递归深度是元素数量的以二为底的对数。所需的内存量是递归深度的 O(1) 倍。

平均运行时间和调用次数`rand()`为 O(N log N)。

更精确的运行时分析需要理解“几乎肯定”这个短语。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-07T05:13:40.523

自下而上的合并排序没有比较。合并时不做任何比较只是交换元素。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-25T04:05:59.977

您可以遍历列表，在每个节点随机生成 0 或 1。

如果为 1，则删除该节点并将其作为列表的第一个节点。如果为 0，则什么也不做。

循环这个直到你到达列表的末尾。****

# python - 数据清理 python 数据框

> ID：12167634
> 
> 赞同：1
> 
> 时间：2012-08-28T21:14:58.540
> 
> 标签：python, dataframe, pandas

我有一个包含 1408 行数据的 Python 数据框。我的目标是将一周中与给定工作日相关的最大数字和最小数字与前一周最大/最小发生的一周中同一天的下一周数字进行比较。从本质上讲，我想看看五分位数（因为一个工作日有 5 天）排名 1 和 5，看看它们每周如何变化。构建与每个工作日相关的数字的 cdf。

1.  为了清理数据，我总共需要删除 18 周。也就是说，与假期相关的数据框中的每个星期加上假期发生后的下一周的整个星期。

2.  在此之后，我认为我应该在数据框中插入一列，将我的所有数据标记为周一到周五——对于文件中的所有日期（有 6 年的数据）。标记 MF 的原因是我可以按升序对与星期几相关的每个数字进行排序。并查询星期几。

非常感谢关于 1\. 或 2\. 或两者的方法建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T21:46:57.380

#2 似乎最好通过组合`df.groupby()`和`apply()`在结果 Groupby 对象上来解决。也许一个例子是最好的解释方式。

给定一个数据框：

```
In [53]: df
Out[53]: 
            Value
2012-08-01     61
2012-08-02     52
2012-08-03     89
2012-08-06     44
2012-08-07     35
2012-08-08     98
2012-08-09     64
2012-08-10     48
2012-08-13    100
2012-08-14     95
2012-08-15     14
2012-08-16     55
2012-08-17     58
2012-08-20     11
2012-08-21     28
2012-08-22     95
2012-08-23     18
2012-08-24     81
2012-08-27     27
2012-08-28     81
2012-08-29     28
2012-08-30     16
2012-08-31     50

In [54]: def rankdays(df):
  .....:    if len(df) != 5:
  .....:        return pandas.Series()
  .....:    return pandas.Series(df.Value.rank(), index=df.index.weekday)
  .....: 

In [52]: df.groupby(lambda x: x.week).apply(rankdays).unstack()
Out[52]: 
    0  1  2  3  4
32  2  1  5  4  3
33  5  4  1  2  3
34  1  3  5  2  4
35  2  5  3  1  4 
```

# visual-studio-2010 - Visual Studio 中的不透明 WSDL 架构错误

> ID：12167636
> 
> 赞同：0
> 
> 时间：2012-08-28T21:15:01.020
> 
> 标签：visual-studio-2010, soap, wsdl, visual-studio-2012, peoplesoft

当我尝试将 PeopleSoft WSDL 作为服务参考导入时，Visual Studio 2010 和 2012 都会出现不透明错误。

我右键单击**Service References**，选择**Add Service Reference**，将 URL 粘贴到**Address**下，点击**Go**，然后点击**OK**。

我得到这个不透明的错误：

![来自 Visual Studio 的不透明错误消息](../Images/4556a5103867e929ddbbbe463492fde5.png)

[http://xmlns.oracle.com/Enterprise/Tools/schemas](http://xmlns.oracle.com/Enterprise/Tools/schemas)似乎没有解决任何问题，但我几乎可以肯定这没关系。

我还在与 Visual Studio 相同的 PC 上的[soapUI中对此进行了测试，并且一切正常。](http://smartbear.com/products/open-source-tools/soapui)我可以访问 SOAP 服务并获得预期的响应。

错误消息的不透明性令人困惑，这在soapUI中有效，所以WSDL假定是好的？我已经搜索了这个错误，到目前为止还没有找到任何东西。

这是 WSDL（经过清理以隐藏 URL 和服务详细信息）：

```
<?xml version="1.0"?>
<wsdl:definitions name="A_PROGRAM_SERVICE.1" targetNamespace="http://xmlns.oracle.com/Enterprise/HCM/schemas/A_PROGRAM_SERVICE.1" xmlns:A_PROGRAM_REQUEST_MSG.VERSION_1="http://xmlns.oracle.com/Enterprise/Tools/schemas" xmlns:A_PROGRAM_RESPONSE_MSG.VERSION_1="http://xmlns.oracle.com/Enterprise/Tools/schemas" xmlns:plnk="http://schemas.xmlsoap.org/ws/2003/05/partner-link/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://xmlns.oracle.com/Enterprise/HCM/schemas/A_PROGRAM_SERVICE.1" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wsp="http://schemas.xmlsoap.org/ws/2002/12/policy">
  <wsp:UsagePolicy wsdl:Required="true"/>
  <plnk:partnerLinkType name="A_PROGRAM_SERVICE_PartnerLinkType">
    <plnk:role name="A_PROGRAM_SERVICE_Provider">
      <plnk:portType name="tns:A_PROGRAM_SERVICE_PortType"/>
    </plnk:role>
  </plnk:partnerLinkType>
  <wsdl:types>
    <xsd:schema elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
      <xsd:import namespace="http://xmlns.oracle.com/Enterprise/Tools/schemas" schemaLocation="A_PROGRAM_REQUEST_MSG.VERSION_1.xsd"/>
      <xsd:import namespace="http://xmlns.oracle.com/Enterprise/Tools/schemas" schemaLocation="A_PROGRAM_RESPONSE_MSG.VERSION_1.xsd"/>
    </xsd:schema>
  </wsdl:types>
  <wsdl:message name="A_PROGRAM_REQUEST_MSG.VERSION_1">
    <wsdl:documentation>A Data Repository</wsdl:documentation>
    <wsdl:part element="A_PROGRAM_REQUEST_MSG.VERSION_1:InputParameters" name="parameter"/>
  </wsdl:message>
  <wsdl:message name="A_PROGRAM_RESPONSE_MSG.VERSION_1">
    <wsdl:documentation>A Data Repository</wsdl:documentation>
    <wsdl:part element="A_PROGRAM_RESPONSE_MSG.VERSION_1:root" name="parameter"/>
  </wsdl:message>
  <wsdl:portType name="A_PROGRAM_SERVICE_PortType">
    <wsdl:operation name="A_PROGRAM_OP">
      <wsdl:documentation>A Data Repository</wsdl:documentation>
      <wsdl:input message="tns:A_PROGRAM_REQUEST_MSG.VERSION_1" name="A_PROGRAM_REQUEST_MSG.VERSION_1"/>
      <wsdl:output message="tns:A_PROGRAM_RESPONSE_MSG.VERSION_1" name="A_PROGRAM_RESPONSE_MSG.VERSION_1"/>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="A_PROGRAM_SERVICE_Binding" type="tns:A_PROGRAM_SERVICE_PortType">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="A_PROGRAM_OP">
      <soap:operation soapAction="A_PROGRAM_OP.v1" style="document"/>
      <wsp:Policy wsu:Id="UsernameTokenSecurityPolicyPasswordOptional" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
        <wsp:ExactlyOne>
          <wsp:All>
            <wsse:SecurityToken wsp:Usage="wsp:Required" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
              <wsse:TokenType>wsse:UserNameToken</wsse:TokenType>
              <Claims>
                <SubjectName MatchType="wsse:Exact"/>
                <UsePassword wsp:Usage="wsp:Optional"/>
              </Claims>
            </wsse:SecurityToken>
          </wsp:All>
        </wsp:ExactlyOne>
      </wsp:Policy>
      <wsdl:input name="A_PROGRAM_REQUEST_MSG.VERSION_1">
        <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" use="literal"/>
      </wsdl:input>
      <wsdl:output name="A_PROGRAM_RESPONSE_MSG.VERSION_1">
        <soap:body encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="A_PROGRAM_SERVICE">
    <wsdl:documentation>A Data Repository</wsdl:documentation>
    <wsdl:port binding="tns:A_PROGRAM_SERVICE_Binding" name="A_PROGRAM_SERVICE_Port">
      <soap:address location="http://some_url_here/PSIGW/PeopleSoftServiceListeningConnector/SYSTEMNAME"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:12:27.190

通过更深入的分析，我想通了。导入的 XSD`maxOccurs="unbounded"` 之一在根元素中。这是没有意义的，因为根元素在 XML 文档中只能出现一次。

Visual Studio 肯定可以使用更清晰的错误消息！

感谢@JohnSaunders 帮助我考虑检查进口。

# c++ - OpenGL - 截锥体不剔除远平面以外的多边形

> ID：12167637
> 
> 赞同：4
> 
> 时间：2012-08-28T21:15:03.587
> 
> 标签：c++, opengl, frustum

我已经实现了平截头体剔除，并正在检查边界框是否与平截头体平面相交。我添加了暂停平截头体更新的功能，这让我可以查看平截头体剔除是否正常工作。当我在暂停后转身时，在我身后和左右两侧都没有渲染，它们会像你预期的那样逐渐变细。超出剪辑距离（远平面），它们仍然呈现，我不确定这是否是我的平截头体更新或边界框检查代码的问题，或者我使用了错误的矩阵或什么。当我将投影矩阵中的距离设置为 3000.0f 时，它仍然说边界框远远超过了仍然在截锥体中，但事实并非如此。

这是我创建模型视图矩阵的地方：

```
projectionMatrix = glm::perspective(newFOV, 4.0f / 3.0f, 0.1f, 3000.0f);

viewMatrix = glm::mat4(1.0);
viewMatrix = glm::scale(viewMatrix, glm::vec3(1.0, 1.0, -1.0));
viewMatrix = glm::rotate(viewMatrix, anglePitch, glm::vec3(1.0, 0.0, 0.0));
viewMatrix = glm::rotate(viewMatrix, angleYaw, glm::vec3(0.0, 1.0, 0.0));
viewMatrix = glm::translate(viewMatrix, glm::vec3(-x, -y, -z));

modelViewProjectiomMatrix = projectionMatrix * viewMatrix; 
```

我在 Z 方向将其缩放 -1 的原因是因为关卡被设计为使用 DirectX 渲染，所以我反转了 Z 方向。

这是我更新我的截锥体的地方：

```
void CFrustum::calculateFrustum()
{
    glm::mat4 mat = camera.getModelViewProjectionMatrix();

    // Calculate the LEFT side
    m_Frustum[LEFT][A] = (mat[0][3]) + (mat[0][0]);
    m_Frustum[LEFT][B] = (mat[1][3]) + (mat[1][0]);
    m_Frustum[LEFT][C] = (mat[2][3]) + (mat[2][0]);
    m_Frustum[LEFT][D] = (mat[3][3]) + (mat[3][0]);

    // Calculate the RIGHT side
    m_Frustum[RIGHT][A] = (mat[0][3]) - (mat[0][0]);
    m_Frustum[RIGHT][B] = (mat[1][3]) - (mat[1][0]);
    m_Frustum[RIGHT][C] = (mat[2][3]) - (mat[2][0]);
    m_Frustum[RIGHT][D] = (mat[3][3]) - (mat[3][0]);

    // Calculate the TOP side
    m_Frustum[TOP][A] = (mat[0][3]) - (mat[0][1]);
    m_Frustum[TOP][B] = (mat[1][3]) - (mat[1][1]);
    m_Frustum[TOP][C] = (mat[2][3]) - (mat[2][1]);
    m_Frustum[TOP][D] = (mat[3][3]) - (mat[3][1]);

    // Calculate the BOTTOM side
    m_Frustum[BOTTOM][A] = (mat[0][3]) + (mat[0][1]);
    m_Frustum[BOTTOM][B] = (mat[1][3]) + (mat[1][1]);
    m_Frustum[BOTTOM][C] = (mat[2][3]) + (mat[2][1]);
    m_Frustum[BOTTOM][D] = (mat[3][3]) + (mat[3][1]);

    // Calculate the FRONT side
    m_Frustum[FRONT][A] = (mat[0][3]) + (mat[0][2]);
    m_Frustum[FRONT][B] = (mat[1][3]) + (mat[1][2]);
    m_Frustum[FRONT][C] = (mat[2][3]) + (mat[2][2]);
    m_Frustum[FRONT][D] = (mat[3][3]) + (mat[3][2]);

    // Calculate the BACK side
    m_Frustum[BACK][A] = (mat[0][3]) - (mat[0][2]);
    m_Frustum[BACK][B] = (mat[1][3]) - (mat[1][2]);
    m_Frustum[BACK][C] = (mat[2][3]) - (mat[2][2]);
    m_Frustum[BACK][D] = (mat[3][3]) - (mat[3][2]);

    // Normalize all the sides
    NormalizePlane(m_Frustum, LEFT);
    NormalizePlane(m_Frustum, RIGHT);
    NormalizePlane(m_Frustum, TOP);
    NormalizePlane(m_Frustum, BOTTOM);
    NormalizePlane(m_Frustum, FRONT);
    NormalizePlane(m_Frustum, BACK);
} 
```

最后，我检查边界框：

```
bool CFrustum::BoxInFrustum( float x, float y, float z, float x2, float y2, float z2)
{
    // Go through all of the corners of the box and check then again each plane
    // in the frustum.  If all of them are behind one of the planes, then it most
    // like is not in the frustum.
    for(int i = 0; i < 6; i++ )
    {
        if(m_Frustum[i][A] * x  + m_Frustum[i][B] * y  + m_Frustum[i][C] * z  + m_Frustum[i][D] > 0)  continue;
        if(m_Frustum[i][A] * x2 + m_Frustum[i][B] * y  + m_Frustum[i][C] * z  + m_Frustum[i][D] > 0)  continue;
        if(m_Frustum[i][A] * x  + m_Frustum[i][B] * y2 + m_Frustum[i][C] * z  + m_Frustum[i][D] > 0)  continue;
        if(m_Frustum[i][A] * x2 + m_Frustum[i][B] * y2 + m_Frustum[i][C] * z  + m_Frustum[i][D] > 0)  continue;
        if(m_Frustum[i][A] * x  + m_Frustum[i][B] * y  + m_Frustum[i][C] * z2 + m_Frustum[i][D] > 0)  continue;
        if(m_Frustum[i][A] * x2 + m_Frustum[i][B] * y  + m_Frustum[i][C] * z2 + m_Frustum[i][D] > 0)  continue;
        if(m_Frustum[i][A] * x  + m_Frustum[i][B] * y2 + m_Frustum[i][C] * z2 + m_Frustum[i][D] > 0)  continue;
        if(m_Frustum[i][A] * x2 + m_Frustum[i][B] * y2 + m_Frustum[i][C] * z2 + m_Frustum[i][D] > 0)  continue;

        // If we get here, it isn't in the frustum
        return false;
    }

    // Return a true for the box being inside of the frustum
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T08:21:32.580

我注意到了一些事情，特别是您如何设置投影矩阵。对于初学者，gluProject 不会返回值，除非您使用某种包装器或奇怪的 api。gluLookAt 更常用。

接下来，假设缩放、旋转和平移函数旨在更改模型视图矩阵，您需要颠倒它们的顺序。OpenGL 实际上并不移动对象。相反，它有效地移动原点，并使用 <0,0,0> 的新定义渲染每个对象。因此，您“移动”到要渲染的位置，然后根据需要旋转轴，然后拉伸网格。

至于裁剪问题，您可能需要仔细查看[glClipPlane()](http://pyopengl.sourceforge.net/documentation/manual/glClipPlane.3G.xml)。如果其他一切*大部分都*有效，但似乎存在一些舍入误差，请尝试将您的 perspective(,,,) 函数中的近剪裁平面从 0.1 更改为 1.0（较小的值往往会弄乱 z 缓冲区）。

我看到很多不熟悉的语法，所以我认为您正在使用某种包装器；但这里有一些（Qt）代码片段来自我自己使用的 GL 项目。可能有帮助，不知道：

```
//This gets called during resize, as well as once during initialization
void GLWidget::resizeGL(int width, int height) {
  int side = qMin(width, height);
  padX = (width-side)/2.0;
  padY = (height-side)/2.0;
  glViewport(padX, padY, side, side);

  glMatrixMode(GL_PROJECTION);
  glLoadIdentity();
  gluPerspective(60.0, 1.0, 1.0, 2400.0);

  glMatrixMode(GL_MODELVIEW);
  glLoadIdentity();
}

//This fragment gets called at the top of every paint event:
  glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

  glPushMatrix();

  glLightfv(GL_LIGHT0, GL_POSITION, FV0001);

  camMain.stepVars();

  gluLookAt(camMain.Pos[0],camMain.Pos[1],camMain.Pos[2],
            camMain.Aim[0],camMain.Aim[1],camMain.Aim[2],   
            0.0,1.0,0.0);

  glPolygonMode(GL_FRONT_AND_BACK, drawMode);

//And this fragment represents a typical draw event
void GLWidget::drawFleet(tFleet* tIn) {
  if (tIn->firstShip != 0){
    glPushMatrix();

    glTranslatef(tIn->Pos[0], tIn->Pos[1], tIn->Pos[2]);
    glRotatef(tIn->Yaw, 0.0, 1.0, 0.0);
    glRotatef(tIn->Pitch,0,0,1);

    drawShip(tIn->firstShip);

    glPopMatrix();
  }
} 
```

我假设您对 GL 很陌生，所以如果我表现得有点迂腐，我深表歉意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-27T21:14:15.320

我有同样的问题。

鉴于 Vinny Rose 的回答，我检查了创建归一化平面的函数，发现了一个错误。

这是更正的版本，不正确的计算被注释掉了：

```
plane plane_normalized(float A, float B, float C, float D) {
    // Wrong, this is not a 4D vector
    // float nf = 1.0f / sqrtf(A * A + B * B + C * C + D * D);

    // Correct
    float nf = 1.0f / sqrtf(A * A + B * B + C * C);

    return (plane) {{
        nf * A,
        nf * B,
        nf * C,
        nf * D
    }};
} 
```

我的猜测是你的`NormalizePlane`函数做了类似的事情。

归一化的重点是有一个[Hessian 范式](http://mathworld.wolfram.com/HessianNormalForm.html)的平面，以便我们可以进行简单的半空间测试。如果像对四维向量一样对平面进行归一化，法线方向 [A, B, C] 仍然正确，但偏移量 D 不正确。

我认为在针对顶部、底部、左侧和右侧平面测试点时，您会得到正确的结果，因为它们通过原点，而近平面可能足够近而不会注意到。（边界球测试会失败。）

当我恢复正确的标准化时，截锥体剔除对我来说按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T14:35:24.207

这就是我认为正在发生的事情：远平面的定义正确，但在我的测试中，该平面的 D 值太小了。所以物体被接受为在远平面的正确一侧，因为数学迫使远平面实际上比你想要的远得多。

尝试不同的方法：（http://www.lighthouse3d.com/tutorials/view-frustum-culling/geometric-approach-extracting-the-planes/）

```
float tang = tanf(fov * PI / 360.0f);
float nh = near * tang; // near height
float nw = nh * aspect; // near width
float fh = far * tang; // far height
float fw = fh * aspect; // far width

glm::vec3 p,nc,fc,X,Y,Z,Xnw,Ynh;

//camera position
p = glm::vec3(viewMatrix[3][0],viewMatrix[3][1],viewMatrix[3][2]);

// the left vector
glm::vec3 X = glm::vec3(viewMatrix[0][0], viewMatrix[1][0], viewMatrix[2][0]);
// the up vector
glm::vec3 Y = glm::vec3(viewMatrix[0][1], viewMatrix[1][1], viewMatrix[2][1]);
// the look vector
glm::vec3 Z = glm::vec3(viewMatrix[0][2], viewMatrix[1][2], viewMatrix[2][2]);

nc = p - Z * near; // center of the near plane
fc = p - Z * far; // center of the far plane

// the distance to get to the left or right edge of the near plane from nc
Xnw = X * nw;
// the distance to get to top or bottom of the near plane from nc
Ynh = Y * nh;
// the distance to get to the left or right edge of the far plane from fc
Xfw = X * fw;
// the distance to get to top or bottom of the far plane from fc
Yfh = Y * fh;

ntl = nc + Ynh - Xnw; // "near top left"
ntr = nc + Ynh + Xnw; // "near top right" and so on
nbl = nc - Ynh - Xnw;
nbr = nc - Ynh + Xnw;

ftl = fc + Yfh - Xfw;
ftr = fc + Yfh + Xfw;
fbl = fc - Yfh - Xfw;
fbr = fc - Yfh + Xfw;

m_Frustum[TOP] = planeWithPoints(ntr,ntl,ftl);
m_Frustum[BOTTOM] = planeWithPoints(nbl,nbr,fbr);
m_Frustum[LEFT] = planeWithPoints(ntl,nbl,fbl);
m_Frustum[RIGHT] = planeWithPoints(nbr,ntr,fbr);
m_Frustum[FRONT] = planeWithPoints(ntl,ntr,nbr);
m_Frustum[BACK] = planeWithPoints(ftr,ftl,fbl);

// Normalize all the sides
NormalizePlane(m_Frustum, LEFT);
NormalizePlane(m_Frustum, RIGHT);
NormalizePlane(m_Frustum, TOP);
NormalizePlane(m_Frustum, BOTTOM);
NormalizePlane(m_Frustum, FRONT);
NormalizePlane(m_Frustum, BACK); 
```

然后 planeWithPoints 会是这样的：

```
planeWithPoints(glm::vec3 a, glm::vec3 b, glm::vec3 c){
    double A = a.y * (b.z - c.z) + b.y * (c.z - a.z) + c.y * (a.z - b.z);
    double B = a.z * (b.x - c.x) + b.z * (c.x - a.x) + c.z * (a.x - b.x);
    double C = a.x * (b.y - c.y) + b.x * (c.y - a.y) + c.x * (a.y - b.y);
    double D = -(a.x * (b.y * c.z - c.y * b.z) + b.x * (c.y * a.z - a.y * c.z) + c.x * (a.y * b.z - b.y * a.z));
    return glm::vec4(A,B,C,D);
} 
```

我没有测试以上任何一个。但如果您需要，原始参考资料就在那里。

上一个答案： ~~当矩阵由二维数组表示时，OpenGL 和 GLSL 矩阵以列优先顺序存储和访问。GLM 也是如此，因为它们遵循 GLSL 标准。~~

您需要将您的平截头体创建更改为以下内容。

```
// Calculate the LEFT side (column1 + column4)
m_Frustum[LEFT][A] = (mat[3][0]) + (mat[0][0]);
m_Frustum[LEFT][B] = (mat[3][1]) + (mat[0][1]);
m_Frustum[LEFT][C] = (mat[3][2]) + (mat[0][2]);
m_Frustum[LEFT][D] = (mat[3][3]) + (mat[0][3]);

// Calculate the RIGHT side (-column1 + column4)
m_Frustum[RIGHT][A] = (mat[3][0]) - (mat[0][0]);
m_Frustum[RIGHT][B] = (mat[3][1]) - (mat[0][1]);
m_Frustum[RIGHT][C] = (mat[3][2]) - (mat[0][2]);
m_Frustum[RIGHT][D] = (mat[3][3]) - (mat[0][3]);

// Calculate the TOP side (-column2 + column4)
m_Frustum[TOP][A] = (mat[3][0]) - (mat[1][0]);
m_Frustum[TOP][B] = (mat[3][1]) - (mat[1][1]);
m_Frustum[TOP][C] = (mat[3][2]) - (mat[1][2]);
m_Frustum[TOP][D] = (mat[3][3]) - (mat[1][3]);

// Calculate the BOTTOM side (column2 + column4)
m_Frustum[BOTTOM][A] = (mat[3][0]) + (mat[1][0]);
m_Frustum[BOTTOM][B] = (mat[3][1]) + (mat[1][1]);
m_Frustum[BOTTOM][C] = (mat[3][2]) + (mat[1][2]);
m_Frustum[BOTTOM][D] = (mat[3][3]) + (mat[1][3]);

// Calculate the FRONT side (column3 + column4)
m_Frustum[FRONT][A] = (mat[3][0]) + (mat[2][0]);
m_Frustum[FRONT][B] = (mat[3][1]) + (mat[2][1]);
m_Frustum[FRONT][C] = (mat[3][2]) + (mat[2][2]);
m_Frustum[FRONT][D] = (mat[3][3]) + (mat[2][3]);

// Calculate the BACK side (-column3 + column4)
m_Frustum[BACK][A] = (mat[3][0]) - (mat[2][0]);
m_Frustum[BACK][B] = (mat[3][1]) - (mat[2][1]);
m_Frustum[BACK][C] = (mat[3][2]) - (mat[2][2]);
m_Frustum[BACK][D] = (mat[3][3]) - (mat[2][3]); 
```

# vba - 升级到 64 位 excel VBA 有什么好处？

> ID：12167642
> 
> 赞同：-2
> 
> 时间：2012-08-28T21:15:28.947
> 
> 标签：vba, 64-bit

目前我正在使用 32 位 windows 7 和 32 位 excel 2007，因为我在 VBA 中编写了一些程序。我正在运行一些内存程序，因为我的程序变得非常大，如果我能通过 32 位系统的 4GB 内存限制，我会受益。但是，如果我升级到 64 位版本，我会担心兼容性和支持。我在 VBA 上找到的大多数代码仍然是 32 位的，我不确定如果我升级到 64 位 excel 2010 在速度和内存方面是否有任何真正的优势。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:32:22.833

我还没有看到来自 MS 的任何信息表明您的 VBA 代码将能够在 64 位版本中访问更多内存；他们确实承诺您可以在 Excel 中创建更大的电子表格。

如果您现有的 32 位代码不调用 Windows API 并且不使用 ActiveX 控件（除了那些随 64 位版本的 Office 提供的控件）或不调用第三方 32 位 DLL，它应该是完全兼容的. WinAPI 代码需要修改（Remou 的链接解释了所有这些）。

# google-cloud-messaging - Google Cloud Messaging 3rd 方服务器在发送消息时收到“缺少注册”错误

> ID：12167647
> 
> 赞同：0
> 
> 时间：2012-08-28T21:15:40.233
> 
> 标签：google-cloud-messaging

我正在尝试从第 3 方服务器发送消息。当我在 shell 上使用 curl 命令发送 http 请求时，它可以工作，但是当我使用 Ruby 脚本做同样的事情时，我不断收到“缺少注册”错误。更具体地说，当我输入

```
curl --header "Authorization: key=MY_KEY" --header Content-Type:"application/json" https://android.googleapis.com/gcm/send  -d "{\"registration_ids\":[\"MY_REGISTRATION_KEY\"], \"data\":{\"data1\":\"data1val\"}}" 
```

我得到以下回复

{"multicast_id":5609541310450656515,"success":1,"failure":0,"canonical_ids":0,"results":[{"message_id":"0:1346184864739450%3083a1e3f9fd7ecd"}]} ，消息是Android 设备正确接收。

但是，如果我使用以下脚本，来自 GCM 服务器的响应会发送错误消息，例如“Error=MissingRegistration”。（使用 ruby​​ 版本 1.9.3）

```
require "net/https"                                                                                                                                                           
require "uri"

uri = URI.parse("https://android.googleapis.com/gcm/send")
https = Net::HTTP.new(uri.host, 443)
https.use_ssl = true
https.verify_mode = OpenSSL::SSL::VERIFY_NONE

https.start{|https|
  request = Net::HTTP::Post.new(uri.path)
  request["Authorization"] = "key=MY_KEY"
  request["Content-Type"] = "application/json"
  request.set_form_data({:registration_ids => ["MY_REGISTRATION_KEY"],
                     :data => {data1:"data1_val"}
                    })
  response = https.request(request)
  p response.body
  p response.header
} 
```

我觉得字符编码存在一些问题。我在内容类型标题中定义了字符集并尝试了，但结果是一样的。谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T18:04:01.830

这是关于编码的。您必须将请求的编码设置为 UTF8。

# python - 用 numpy 计算 k 个最大特征值和相应特征向量的最快方法

> ID：12167654
> 
> 赞同：22
> 
> 时间：2012-08-28T21:16:18.980
> 
> 标签：python, numpy, scipy, linear-algebra

我有一个大的 NxN 密集对称矩阵，并且想要对应于 k 个最大特征值的特征向量。找到它们的最佳方法是什么（最好使用 numpy，但如果这是唯一的方法，通常可能使用 blas/atlas/lapack）？一般来说，N 比 k 大得多（比如 N > 5000，k < 10）。

如果我的起始矩阵是稀疏的，Numpy 似乎只有找到 k 个最大特征值的函数。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-28T22:51:22.940

在 SciPy 中，您可以使用带有参数的[linalg.eigh](http://docs.scipy.org/doc/scipy/reference/generated/scipy.linalg.eigh.html)函数。`eigvals`

> eigvals : tuple (lo, hi) 要返回的最小和最大（按升序）特征值和相应特征向量的索引：0 <= lo < hi <= M-1。如果省略，则返回所有特征值和特征向量。

在你的情况下应该设置为`(N-k,N-1)`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-28T23:19:21.913

实际上，稀疏例程也适用于密集的 numpy 数组，我认为它们使用某种 Krylov 子空间迭代，因此他们需要计算几个矩阵向量乘积，这意味着如果您的 k << N，稀疏例程可能是（勉强？ ） 快点。

查看文档 [http://docs.scipy.org/doc/scipy/reference/tutorial/arpack.html](http://docs.scipy.org/doc/scipy/reference/tutorial/arpack.html)

和下面的代码（去和朋友喝杯好咖啡直到结束）

```
import numpy as np
from time import clock
from scipy.linalg import eigh as largest_eigh
from scipy.sparse.linalg.eigen.arpack import eigsh as largest_eigsh

np.set_printoptions(suppress=True)
np.random.seed(0)
N=5000
k=10
X = np.random.random((N,N)) - 0.5
X = np.dot(X, X.T) #create a symmetric matrix

# Benchmark the dense routine
start = clock()
evals_large, evecs_large = largest_eigh(X, eigvals=(N-k,N-1))
elapsed = (clock() - start)
print "eigh elapsed time: ", elapsed

# Benchmark the sparse routine
start = clock()
evals_large_sparse, evecs_large_sparse = largest_eigsh(X, k, which='LM')
elapsed = (clock() - start)
print "eigsh elapsed time: ", elapsed 
```

# symfony - Symfony2 如何检测从哪里加载模板？

> ID：12167656
> 
> 赞同：0
> 
> 时间：2012-08-28T21:16:23.470
> 
> 标签：symfony, twig

Symfony2 检测从哪里加载模板： from`app/Resourses/views/`还是 from `Bundle/Resourses/views/`？

在查看`app/Resourses/views/`.

我发现：`Symfony\Bundle\FrameworkBundle\CacheWarmer\TemplateFinder`

现在我只需要覆盖它。如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T07:17:22.437

Symfony2 使用这个工作流程

1.  访问路由，将控制权传递给控制器​​，渲染视图（模板）
2.  如果视图没有被覆盖 ( `app/..../`) 则渲染包模板
3.  如果有覆盖，那就拿走它

所以问题是：如何覆盖模板？

在 symfony2 中覆盖模板有两种不同的方式

*   在目录中定义一个**同名**的模板`app/resources`。一起“同名”你必须重现捆绑的相同结构。因此，如果您的模板在其中，即`myFooBundle/views/mainTemplate.html.twig`您必须通过在其中创建一个新模板`app/resources/myFooBundle/views`并调用它来覆盖它`mainTemplate.html.twig`
*   您必须从头开始创建一个新的包并覆盖`getParent()`方法，该方法必须返回一个包含您要覆盖的包名称的字符串（`myfooBundle`）。现在，如果您在原始模板**的相同位置**创建一个新模板，您已经覆盖了它。不建议使用此方法，因为您还必须覆盖控制器。

# javascript - 从 youtube 返回特定值

> ID：12167657
> 
> 赞同：2
> 
> 时间：2012-08-28T21:16:23.600
> 
> 标签：javascript, forms, function, youtube, youtube-api

我正在尝试编写一个小型 javascript 函数，该函数将允许用户提交特定的 youtube 频道 url，然后返回该频道上的观看次数。有人知道吗？

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>

<p id="demo">Click the button to get the value of the attribute with the specified   namespaceURI and name</p>

<button onclick="myFunction()">Try it</button>

<script>
function myFunction()
{
var http;
if (window.XMLHttpRequest)  {xhttp=new XMLHttpRequest();}
else  {xhttp=new ActiveXObject("Microsoft.XMLHTTP");}

xhttp.open("GET","booksns.xml",false);
xhttp.send();
var xmlDoc=xhttp.responseXML;
var price=xmlDoc.getElementsByTagName("price")[0];
var x=document.getElementById("demo");
x.innerHTML=price.getAttributeNS("http://www.w3schools.com/NS","currency");
};
</script>
</body>
</html> 
```

# python - 如何在python中进行求和

> ID：12167660
> 
> 赞同：5
> 
> 时间：2012-08-28T21:16:32.837
> 
> 标签：python, function, sum

[我想知道如何在没有像这里](http://docs.scipy.org/doc/scipy/reference/tutorial/optimize.html)这样的循环的情况下在 python 中表示一个总和

我们有：

```
def rosen(x):
    """The Rosenbrock function"""
    return sum(100.0*(x[1:]-x[:-1]**2.0)**2.0 + (1-x[:-1])**2.0) 
```

我的功能如下：`V(theta) = Sum(i=1->N)[a0*(cos(i*theta)]`

预先感谢您的帮助 ：）：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T21:19:26.937

你的公式是：

> V(theta) = Sum(i=1->N)[a0*(cos(i*theta)]

这意味着：对范围内`a0*(cos(i*theta)`的给定值的所有值求和，包括。`theta``1``N`

这在 Python 中变成了这样：

```
def V(theta, N):
    return sum(a0*(cos(i*theta)) for i in range(1, N + 1)) 
```

请注意，您必须将`theta`and传递`N`给该函数。另请注意，我们`N + 1`用于确保`N`包含（因为`range`迭代值直到但不包括最后一个值）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T21:19:35.407

就像是：

```
def V(theta,N):
    return sum(a0*(cos(i*theta) for i in range(1,N+1))
print V(theta,N) 
```

或者您可以使用`lambda`：

```
V =lambda theta,N : sum(a0*(cos(i*theta) for i in range(1,N+1))   
print V(theta,N) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T21:48:18.770

您显示的示例不使用数学函数，仅使用基本的算术运算。这就是它如图所示工作的原因，但 math.cos 不支持列表，因此不会以这种方式工作。
如果你真的想在没有任何 for 的情况下四处走动，你应该使用 numpy。Numpy 的数学函数支持列表（实际上是数组）。
这样，您可以编写如下内容：

```
from numpy import *
def fun(theta):
    return a0*sum(cos(arange(1,N+1)*theta)) 
```

如果您要进行大量此类计算，最好使用 numpy。

# asp.net - 我想将 mailmessage.from 属性设置为简单文本

> ID：12167667
> 
> 赞同：1
> 
> 时间：2012-08-28T21:17:11.020
> 
> 标签：asp.net, sendmail, smtpclient

我想将 mailmessage.from 属性设置为简单的文本而不是电子邮件地址。这是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:18:36.167

```
MailAddress from = new MailAddress("ben@contoso.com", "Ben Miller"); 
```

假设您希望 From***显示***“Ben Miller”。

在幕后，“ben@contoso.com”仍将存在于“发件人”中。一个有效的电子邮件地址是必需的，你不能做任何事情来改变它。

# java - Java玩路由传递复杂对象【玩转框架2.0】

> ID：12167673
> 
> 赞同：1
> 
> 时间：2012-08-28T21:17:29.647
> 
> 标签：java, playframework-2.0

我已经用 Java Play Framework 2.0 试验了几个星期，但我现在正在努力解决以下问题：

如何将 Java 对象从一个 Play 模板传递到另一个？

我可以传递简单的对象没有问题：

```
GET /Login/:email   controllers.Application.login(email:String) 
```

在我的控制器中使用以下代码：

```
public static Result login(String email) {

    //Do some stuff

    return ok("");
} 
```

但我需要能够做到的是这样的：

```
GET /Test/:user   controllers.Application.test(user:User) 
```

在我的控制器中使用以下代码：

```
public static Result test(User user) {

    //Do some stuff

    return ok("");
} 
```

当我尝试编译时，我收到以下错误：

> 未找到：键入用户

有谁知道我需要做什么才能让这个工作？甚至可能吗？感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:42:00.700

使用基本（不想写“普通”）类型`routes params`是干净的方法，不会引起头痛。对于一个示例，而不是尝试发送整个对象，最好发送它`id`- 很可能是某种数字类型或唯一`String`的示例，如果您的用户模型具有`id`类型`Long`，您可以简单地做到这一点：

```
GET /Test/:userId   controllers.Application.test(userId: Long) 
```

控制器

```
public static Result test(Long userId) {
    User user = User.find.byId(userId);
    return ok("Now you're watching user: " + user.name);
} 
```

其他有用的示例是布尔值，它传递它只是更容易使用的`0/1` `Int/int` 类型（默认值设置为`false`）：

```
GET /set-admin/:userId    controllers.App.setAdmin(userId: Long, setTo: Int ?= 0) 
```

或者`true`

```
GET /set-admin/:userId    controllers.App.setAdmin(userId: Long, setTo: Int ?= 1) 
```

控制器

```
public static Result setAdmin(Long userId, int setTo) {
    User user = User.find.byId(userId);
    user.isAdmin = (setTo == 1); // of course isAdmin field of User model is type of Boolean
    user.update(id);
    return ok("User " + user.name + " is " + user.isAdmin);
} 
```

所以在模板中你可以做一个链接：

```
<a href='@routes.App.setAdmin(user.id, 1)'>Set as admin</a>
<a href='@routes.App.setAdmin(user.id, 0)'>Set as common user</a> 
```

# android - 半透明搜索栏

> ID：12167675
> 
> 赞同：0
> 
> 时间：2012-08-28T21:17:44.503
> 
> 标签：android, transparency, seekbar

我更喜欢我的应用程序中的搜索栏看起来是半透明的，这可能吗？

```
<SeekBar
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/seekBar1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/topBar"
            android:layout_marginTop="26dip"
            android:paddingLeft="10dip"
            android:paddingRight="10dip"
            android:paddingTop="10dip"
            android:max="100"
            android:background="@drawable/roundedcorner" >
        </SeekBar> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T21:53:47.970

将`android:progressDrawable`属性设置为`layer-list`具有半透明组件的自定义可绘制对象。您也可以设置`android:thumb`属性。

[这是来自HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)的示例可绘制 xml ，您也可以参考该项目以获取示例图像资产：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@android:id/background"
          android:drawable="@drawable/progress_bg_holo_dark" />

    <item android:id="@android:id/secondaryProgress">
        <scale android:scaleWidth="100%"
               android:drawable="@drawable/progress_secondary_holo_dark" />
    </item>

    <item android:id="@android:id/progress">
        <scale android:scaleWidth="100%"
               android:drawable="@drawable/progress_primary_holo_dark" />
    </item>

</layer-list> 
```

还有 - 相关问题：

[ProgressBar/ProgressDialog 的自定义 Drawable](https://stackoverflow.com/questions/2819778/custom-drawable-for-progressbar-progressdialog)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:35:08.197

在您的 XML 中，添加此属性：

```
android:alpha = "floatValue" 
```

或者，在 java 代码中使用

```
setAlpha(floatValue) 
```

它使您能够更改视图的**alpha 属性**。

0 = 完全透明

1 = 完全不透明

因此，对于半透明，您可以根据所需的透明度设置为 0.5 或任何值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-16T08:31:04.703

您可以使用十六进制颜色设置不透明度值。您只需要添加正确的前缀。我使用以下代码隐藏了 seekBar：

```
android:progressBackgroundTint="#00555555"
android:progressTint="#00555555" 
```

其中前两个密码（即“00”）设置不透明度（alpha 百分比），其他六个（即“555555”）设置颜色。

查看这篇文章以获取更多信息和十六进制不透明度值列表： [了解 Android 上的颜色（六个字符）](https://stackoverflow.com/questions/5445085/understanding-colors-in-android-6-characters/11019879#11019879)

# bash - 给定一个主函数和一个清理函数，我如何（规范地）在 Bash/Linux 中返回退出状态？

> ID：12167676
> 
> 赞同：2
> 
> 时间：2012-08-28T21:17:45.357
> 
> 标签：bash, return, return-value, conventions, canonical-form

**语境：**

我有一个 bash 脚本（实际上是其他脚本的包装器），它执行以下伪代码：

```
do a main function
if the main function returns:
    $returncode = $? #most recent return code
if the main function runs longer than a timeout:
    kill the main function
    $returncode = 140 #the semi-canonical "exceeded allowed wall clock time" status

run a cleanup function
if the cleanup function returns an error: #nonzero return code
    exit $? #exit the program with the status returned from the cleanup function
else #cleanup was successful
    .... 
```

**问题：**

最后一行之后应该发生什么？

如果清理函数成功，但主函数不成功，我的程序应该返回 0（用于成功清理），还是`$returncode`包含主函数的（可能非零且不成功）返回码？

对于特定的应用程序，答案很简单：“这取决于您需要脚本做什么。”

但是，这更像是一个一般/规范的问题（如果这是错误的地方，请用火杀死它）：在 Bash（或一般的 Linux）编程中，您通常是否希望返回“意味着”的状态某些东西（即`$returncode`）还是您忽略这些主观性并简单地返回最新功能的代码？

这不是 Bash 特定的：如果我有任何类型的独立可执行文件，它在这些情况下应该如何表现*？*显然，这有点值得商榷。即使有这些东西的系统，我相信很多人都会忽略它。都一样，我想知道。

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T21:32:02.523

从 main 返回退出代码。作为脚本的用户，我想知道它是否完成了它的工作，而不是它在失败后是否被清理。事实上，我*希望*程序/脚本在失败时能够正确清理，因此返回 0 会产生误导。

懒惰编写的脚本只是返回最后一个命令碰巧有的退出代码。编写良好的确保返回有意义的退出代码。

* * *

顺便说一句，我最喜欢的确保正确清理的方法是在`trap EXIT`.

```
WORKING_DIR=$(mktemp -d)

cleanUp() {
    rm -rf "$WORKING_DIR"
}

# Run cleanUp() when the script exits, whether that's from a SIGTERM/SIGINT or
# just exiting normally.
trap cleanUp EXIT 
```

# php - Joomla，JForm：日期和时间没有被保存

> ID：12167678
> 
> 赞同：0
> 
> 时间：2012-08-28T21:17:53.033
> 
> 标签：php, joomla, joomla2.5, joomla1.7, joomla1.6

Joomla 开发人员的新手，编写了一个简单的后端组件，其中我有两个日期字段。一个是用户可以从日历弹出窗口中选择的日期（下面的第一个），第二个是用户无法更改但需要查看最后一个时间戳的日期/时间戳。在编辑表单中，第一个（日期已通过）正在工作并获取今天的日期。第二个（时间戳）仅在创建记录并且根本不保存时间时才有效。我需要它来始终获取当前时间和日期。

从 XML 文件：

```
 <field name="datepassed"
    type="calendar"
    label="Date Completed"
    default="NOW"           
  /> 

  <field name="timestamp"
    type="calendar"
    label="Last Modified"
    default="NOW"
    readonly="true" 
    class="readonly"
  /> 
```

在 edit.php 视图中：

```
 foreach ($this->form->getFieldset('fields_logged') as $field): 
    echo '<li>';
        echo $field->label;
        echo $field->input; 
     echo '</li>';
  endforeach; 
```

发现[这个链接](https://stackoverflow.com/questions/11648167/joomla-2-5-calendar-field-type-in-custom-form-date-and-time-selection)有一个类似的问题，而[这个来自 Joomla 文档](http://docs.joomla.org/Calendar_form_field_type)……虽然在时间上没有太大帮助。

任何想法为什么该时间戳不起作用，或者有更好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T05:35:23.093

有一种更简单的方法来做你想做的事，不需要为模型编写覆盖，我们它的另一个属性是 joomla 中的日历类型字段，请参阅 [http://docs.joomla.org/Calendar_form_field_type](http://docs.joomla.org/Calendar_form_field_type)

你可以在你的代码中使用，比如，

```
 <field name="datepassed"
type="calendar"
label="Date Completed"
default="NOW"    
 format="%d-%m-%Y H:i:s"
 /> 

<field name="timestamp"
type="calendar"
label="Last Modified"
default="NOW"
readonly="true" 
class="readonly"
format="%d-%m-%Y H:i:s"
 /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T05:20:59.480

好的，从您更新的问题来看，似乎存在两个简单的误解。

该`default`值仅在字段值设置时才设置，`null`因此它将在第一次保存时起作用，但随后由于有一个值，它不会被当前时间戳替换。

当您使用一种类型时，`Calendar`它只会返回日期而不是时间组件。如果你看一下`/libraries/joomla/html/parameter/element/calendar.php`你会发现它在要求`'%Y-%m-%d'`

要更新时间戳，您需要修改模型，以便在获取项目时`timestamp`使用当前日期和时间更新字段，例如`$item->timestamp = JFactory::getDate()`

或者，`store()`如果您需要精确到分钟和秒，则可以更新它，因为可以想象该项目可以打开并且不会保存几分钟。这可能是更好的方法，因为您希望您的用户能够看到上次保存项目的时间。

# php - 如何在 php curl 中写这个

> ID：12167684
> 
> 赞同：0
> 
> 时间：2012-08-28T21:18:20.773
> 
> 标签：php, curl, picasa

我想使用 curl 将图片上传到 Google picasa，我发现这行代码使用 curl 将图片上传到 Google picasa 但我不知道如何将其转换为 php 和 curl 才能使用它。

```
curl --silent --request POST --data-binary "@sweeping_the_rock.png" --header "Slug: Sweeping the rock" --header "Content-Type: image/png" --header "Authorization: GoogleLogin auth=ABCDEFG" "http://picasaweb.google.com/data/feed/api/user/brad.gushue/albumid/5113621341847124417" | tidy -xml -indent -quiet

$file = "C:/Users/Michael/Desktop/182178_271150652992340_118089494_n.jpg";
$postimg = "https://picasaweb.google.com/data/feed/api/user/userId/albumid/albumId";
$header = array("Content-Type: image/jpeg",
         "Content-Length: ".filesize($file),
         "Authorization: GoogleLogin auth=$token",
         "Slug: 182178_271150652992340_118089494_n.jpg"
);
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $postimg);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
curl_setopt($ch, CURLOPT_POSTFIELDS, file_get_contents($file));
$hasil = curl_exec($ch);
curl_close($ch); 
```

来源：[https ://developers.google.com/gdata/articles/using_cURL#media-support](https://developers.google.com/gdata/articles/using_cURL#media-support)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:13:43.060

也许您没有正确发送文件。您需要为文件上传添加 CURL_OPT，以便对其进行 mime 编码和正确传输（发布文件上传是一种完全不同的表单编码，然后发送简单的发布数据）

[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

> CURLOPT_INFILE 上传时应读取传输的文件。
> 
> CURLOPT_INFILESIZE 将文件上传到远程站点时文件的预期大小（以字节为单位）。请注意，使用此选项不会阻止 libcurl 发送更多数据，因为发送的确切内容取决于 CURLOPT_READFUNCTION。

# sql - 将主键更改为复合键（主键已存在）

> ID：12167689
> 
> 赞同：14
> 
> 时间：2012-08-28T21:18:49.073
> 
> 标签：sql, sql-server, primary-key, composite-primary-key

我正在尝试将我的 SQL 数据库中表的主键从现有键更改为不包括现有列的复合键。由于以下错误消息，以下代码不起作用：

**删除主键：**

> PRIMARY 附近的语法不正确。需要 COLUMN、CONSTRAINT、ID 或 QUOTED_ID

**添加主键：**

> *PRIMARY 附近的语法不正确。期待身份证*

T-SQL 代码：

```
ALTER TABLE AgentIdentification 
DROP PRIMARY KEY Number, 
ADD PRIMARY KEY (AgentId, IdIndicator) 
```

编辑

我能够通过使用以下两个查询语句来完成此操作

```
ALTER TABLE AgentIdentification 
DROP CONSTRAINT [PK_AgentId_Id]
GO

ALTER TABLE AgentIdentification
ADD CONSTRAINT pk_PersonID PRIMARY KEY (AgentId, IdIndicator) 
```

而不是请求 SQL “DROP PRIMARY KEY”，我需要告诉它“DROP CONSTRAINT”，将这两个操作分成两个查询也有帮助。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-28T21:31:52.820

```
 /* For SQL Server/Oracle/MS ACCESS */
    ALTER TABLE  AgentIdentification 
    DROP CONSTRAINT PK_Table1_Col1

    /* For MySql */
    ALTER TABLE  AgentIdentification 
    DROP PRIMARY KEY 
```

添加主键：

```
MySQL / SQL Server / Oracle / MS Access:

ALTER TABLE Table1
ADD CONSTRAINT pk_PersonID PRIMARY KEY (AgentId, IdIndicator) 
```

# python - Python：使用 Selenium 上传

> ID：12167690
> 
> 赞同：0
> 
> 时间：2012-08-28T21:18:51.243
> 
> 标签：python, google-chrome, selenium

我在 localhost 中有以下 HTML：

```
<html><body><h1>test</h1>
<input type="file" id="file" />
</body></html> 
```

此代码适用于 Firefox webdriver，但不使用 Chrome 之一：

```
dr = webdriver.Chrome()
dr.get('http://localhost')
input = dr.find_element_by_id("file")
input.send_keys("/tmp/var/test.zip") 
```

我正在使用硒 2.25

# nsstring - 基本数学以及如何显示答案

> ID：12167694
> 
> 赞同：-1
> 
> 时间：2012-08-28T21:19:13.313
> 
> 标签：nsstring, ibaction

你们中的一个大师可以看看这个字符串并帮我一把.. 我想要 label1.text = 显示 g 的答案 label2.text = 显示 h 的答案 label3.text = 显示 i 的答案

所有输入和输出的数字都将是小数点后 4 位...即 1.2345

```
 (IBAction)calculate1 {
        float a = ([textField1.text doubleValue]);
        float b = ([textField2.text doubleValue]);
        float c = ([textField3.text doubleValue]);
        float d = ([textField4.text doubleValue]);
        float e = ([textField5.text doubleValue]);
        float f = ([textField6.text doubleValue]);
        float g = ([textField1.text doubleValue]+[textField2.text doubleValue]+[textField3.text doubleValue]);
        float h = ([textField4.text doubleValue]+[textField5.text doubleValue]+[textField6.text doubleValue]);
        float i = ((309.5)/([textField7.text doubleValue]+234.5));

        label1.text = [[NSString alloc] initWithFormat:@"%2.f", g];
        label2.text = [[NSString alloc] initWithFormat:@"%2.f", h];
        label3.text = [[NSString alloc] initWithFormat:@"%2.f", i]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T07:19:36.537

您可以在 initWithFormat 方法中使用格式说明符，例如**@"%.4f" 。**另外，我猜你的 a, b, c, d, (...) 变量必须是**double**。

# objective-c - 接收添加子视图的通知

> ID：12167695
> 
> 赞同：1
> 
> 时间：2012-08-28T21:19:14.690
> 
> 标签：objective-c, ios, uiview, nsnotificationcenter, nsnotifications

你好，
例如，我有一个视图，在那个视图上有一个滚动视图。是否有可能知道，何时在该滚动视图上添加了任何子视图，而无需子类化 UIScrollView 并覆盖该方法`didAddSubview:`？
基本上，是否可以在子视图数量发生更改时收到通知？
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T07:08:05.263

您也可以使用类别来重新定义`didAddSubview:`

# java - NetBeans：在 Web 模块的 EJB 模块中使用 EJB

> ID：12167697
> 
> 赞同：0
> 
> 时间：2012-08-28T21:19:18.960
> 
> 标签：java, netbeans, ejb, java-ee-6

我在 NetBeans 中创建了一个带有 EJB 模块和 Web 模块的 Java EE 应用程序。业务逻辑驻留在 EJB 模块内的 EJB 中。Web 模块的托管 bean 是否可以访问 EJB 模块内的 EJB？如何？

（JDK 1.7、Java EE 6、Glassfish 3.1.2.2、NetBeans IDE 7.2）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:28:29.273

您通常使用注入从托管 bean 访问 EJB。

下面的示例显示了一个名为*ExampleManagedBean*的托管 bean ，它使用[EJB 注释](http://docs.oracle.com/javaee/6/api/javax/ejb/EJB.html)来注入一个实现名为*CustomerBeanLocal*的接口的无状态会话 bean 。

```
class ExampleManagedBean {

    @EJB
    CustomerBeanLocal customerBean;

    public String testStuff() {
        int custCount = customerBean.getCustomerCount();
        System.out.println("Number of customers: " + custCount);
        return null;
    }

} 
```

# android - 数据库副本不起作用

> ID：12167699
> 
> 赞同：0
> 
> 时间：2012-08-28T21:19:25.937
> 
> 标签：android, sqlite

我想要做的是复制我通过我的应用程序中的 SQLite 管理器创建的数据库。

我已经检查过数据库确实被创建了，但数据库只有 3 KB（我的数据库没有被复制）。setupdb 的代码[来自这里](http://mfarhan133.wordpress.com/2010/10/14/list-view-tutorial-for-android/)

安装数据库.java

```
public class Setupdb extends SQLiteOpenHelper {

  private static String DB_PATH = "";
    private static final String DB_NAME = "fergi.sqlite";
    private SQLiteDatabase myDataBase;
    private final Context myContext;

    private static Setupdb mDBConnection;

public Setupdb(Context context) {
    super(context, DB_NAME, null, 1);
    this.myContext=context;
    DB_PATH="/data/data/"
          + context.getApplicationContext().getPackageName()
          + "/databases/";
    Log.e(DB_NAME, DB_PATH);
}
public static synchronized Setupdb getDBAdapterInstance(Context context) {
  if (mDBConnection == null) {
      mDBConnection = new Setupdb(context);
  }
     return mDBConnection;
}

    public void createDataBase() throws IOException {
        boolean dbExist = checkDataBase();
        if (dbExist) {
            Log.e("db","exist");
            // do nothing - database already exist
        } else {
            // By calling following method
            // 1) an empty database will be created into the default system path of your application
            // 2) than we overwrite that database with our database.
            this.getReadableDatabase();
            try {
                Log.e("calling", "copy");
                copyDataBase();
            } catch (IOException e) {
                throw new Error("Error copying database");
            }
        }

}
    private boolean checkDataBase() {
        SQLiteDatabase checkDB = null;
        try {
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null,
                    SQLiteDatabase.OPEN_READONLY);

        } catch (SQLiteException e) {
            // database does't exist yet.
        }
        if (checkDB != null) {
            checkDB.close();
        }
        return checkDB != null ? true : false;
    }

    private void copyDataBase() throws IOException {
        Log.e("copy", "coppying db");
      // Open your local db as the input stream
  InputStream myInput = myContext.getAssets().open(DB_NAME);
      // Path to the just created empty db
  String outFileName = DB_PATH + DB_NAME;
      // Open the empty db as the output stream
  OutputStream myOutput = new FileOutputStream(outFileName);
      // transfer bytes from the inputfile to the outputfile
  byte[] buffer = new byte[1024];
  int length;
  while ((length = myInput.read(buffer)) > 0) {
      myOutput.write(buffer, 0, length);
  }
      // Close the streams
  myOutput.flush();
  myOutput.close();
  myInput.close();
  } 

    public void openDataBase() throws SQLException {
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);
       }
    public synchronized void close() {
        if (myDataBase != null)
            myDataBase.close();
        super.close();
    }

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}
 } 
```

MainActivity.java

```
public class MainActivity extends Activity {
String CNAME=" ques",TABLE_NAME=" JAVAQ";
Context context;
Setupdb  myDbHelper;

/* public MainActivity(Context someContext){
     context=someContext;
     startSQL();
 }  */

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    context=this;
    startSQL();

}

 private void startSQL() {
        myDbHelper = new Setupdb(context);
        try {

            myDbHelper.createDataBase();

        } catch (IOException ioe) {

            throw new Error(ioe);

        }

        open();
    }
    public void open()throws SQLException{
        myDbHelper.openDataBase();
    }

   /* 

    Setupdb dbobj=new Setupdb(this); 

    SQLiteDatabase sqobj=dbobj.getWritableDatabase();

    try {
        dbobj.createDataBase();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace(); 
    }  
   try{
   String query = "SELECT " + CNAME + " FROM " + TABLE_NAME+ " WHERE"+" _id=1";
   Log.e("ghgh", query);
            Cursor c2 = sqobj.rawQuery(query, null);

            while (c2.moveToNext()) {

            String name =
            c2.getString(c2.getColumnIndex(CNAME));
            Log.i("LOG_TAG", " HAS NAME " + name);
            }}
            catch(Exception e){

                Log.e("err", e.toString());
            }
}

*/

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:26:51.350

这是我的启动sql的代码，我们拥有的数据库类是一样的。

```
public YOURCLASS(Context someContext){
        context=someContext;
        startSQL();
    }    
private void startSQL() {
        myDbHelper = new DataBaseHelper(context);
        try {

            myDbHelper.createDataBase();

        } catch (IOException ioe) {

            throw new Error(ioe);

        }

        open();
    }
    public void open()throws SQLException{
        myDbHelper.openDataBase();
    } 
```

# python - python gdata“来自服务器的重定向太多：302”

> ID：12167701
> 
> 赞同：1
> 
> 时间：2012-08-28T21:19:33.297
> 
> 标签：python, redirect, google-calendar-api, gdata-api, http-status-code-302

我有这个代码...

```
while (True):

    try:
        feed_entry = cal_client.GetCalendarEventFeed(process_steps_dev_cal_link).entry
        feed_entry2 = cal_client.GetCalendarEventFeed(backup_steps_dev_cal_link).entry
        break
    except gdata.client.RedirectError, e:
        print e 
```

我正在从我的 cal_client 登录中获取两个日历链接。但是， RedirectError 一直像这样显示...

```
Too many redirects from server: 302, <HTML>
<HEAD>
<TITLE>Moved Temporarily</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>Moved Temporarily</H1>
The document has moved <A HREF="https://www.google.com/calendar/feeds/"myemail"/private/full?gsessionid=2jV2trFEab1MHFHbjnGU4Q">here</A>.
</BODY>
</HTML> 
```

这是什么原因？直到今天一切正常。此外，它不会每次都这样做。有时有效，有时无效。但大多不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:56:28.100

这里有问题：

```
<A HREF="https://www.google.com/calendar/feeds/"myemail"/private/full?gsessionid=2jV2trFEab1MHFHbjnGU4Q"> 
```

链接本身有一个指向的 HREF，`https://www.google.com/calendar/feeds/`因为`"myemail"`它是链接的一部分，这可能会导致重定向。检查您传递到的链接`cal_client.GetCalendarEventFeed()`并确保它们的格式正确。

# java - 流在 WorkbookFactory.create(stream) Apache POI 中关闭

> ID：12167703
> 
> 赞同：0
> 
> 时间：2012-08-28T21:19:35.703
> 
> 标签：java, inputstream, apache-poi

我创建了一个扩展 BufferedInputStream 的“ResetOnCloseInputStream”，因为我将它传递给 WorkbookFactory.create(InputStream) 并在阅读工作簿后关闭流，而我需要再次使用流。ResetOnInputStream 看起来像这样 -

```
public class ResetOnCloseInputStream extends BufferedInputStream {

private final InputStream decorated;

public ResetOnCloseInputStream(InputStream anInputStream) {
    super(anInputStream);
    if (!anInputStream.markSupported()) {
        throw new IllegalArgumentException("marking not supported");
    }

    anInputStream.mark( 1 << 24); // magic constant: BEWARE
    decorated = anInputStream;
}

@Override
public void close() throws IOException {
    decorated.reset();
}
public void realClose() throws IOException {
    decorated.close();
}

@Override
public int read() throws IOException {
    return decorated.read();
}
} 
```

但是当它传递给

```
workbook = WorkbookFactory.create(stream); 
```

我得到这个错误-

```
Caused by: java.io.IOException: Stream closed
at java.io.BufferedInputStream.getBufIfOpen(BufferedInputStream.java:145)
at java.io.BufferedInputStream.read(BufferedInputStream.java:308) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-29T17:42:43.067

我没有得到你给定课程的例外情况`ResetOnCloseInputStream`

```
 File inputFile = new File("C:/Test/Test.xls");
    FileInputStream fileInput;
    try {
        fileInput = new FileInputStream(inputFile);
        BufferedInputStream bufferInput = new ResetOnCloseInputStream(new BufferedInputStream(fileInput));
        Workbook workbook = WorkbookFactory.create(bufferInput);
        Sheet s1 = workbook.getSheetAt(0);
        System.out.println(s1.getSheetName()); //Sheet1
    } catch (IOException | EncryptedDocumentException | InvalidFormatException e) {
        e.printStackTrace();
    } 
```

我猜问题可能出在`stream`您创建的 InputStream 上，它可能在传递给`WorkbookFactory.create(bufferInput)`.

# coordinates - 有人认识这种坐标符号格式吗？以及如何转换为纬度/经度？

> ID：12167706
> 
> 赞同：0
> 
> 时间：2012-08-28T21:20:14.000
> 
> 标签：coordinates, latitude-longitude, coordinate-systems, geo

最近我收到了一个包含出租车服务及其服务区域的 CSV 文件。它有 4 列，出租车服务，坐标 1，坐标 2，从该坐标开始的服务半径。

示例数据：

阿尔塔克斯埃因霍温;514.792.547;565.700.960.000.004;50

A1 豪华轿车服务;556.375;126.416.667;50

所以我的问题是像 514.792.547, 565.700.960.000.004 这样的坐标

坐标的符号格式对我来说并不熟悉（我只知道 -180 到 180 的符号）。我什至从未见过每个坐标有多个点的符号格式。

所以也许有人认出了它并可以帮助我提供它的名称或关于它的维基百科页面，或者更好的是如何将其转换为纬度/经度？

提前致谢。

文斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:46:50.097

我在这里猜测，但我认为这是针对荷兰的，在这种情况下，这些坐标可能在荷兰 RD 坐标系中：[http](http://en.wikipedia.org/wiki/Geography_of_the_Netherlands) ://en.wikipedia.org/wiki/Geography_of_the_Netherlands （参见统计部分）

尽管多个小数位看起来确实有点奇怪。可能是 WGRS（参见：[http](http://www.pdana.com/PHDWWW_files/WGRS.pdf) ://www.pdana.com/PHDWWW_files/WGRS.pdf ）。

# css - html select下拉菜单可以根据初始选定值仅用css设置不同的样式吗？

> ID：12167707
> 
> 赞同：0
> 
> 时间：2012-08-28T21:20:22.380
> 
> 标签：css, drop-down-menu, styling

我正在尝试将数据与 CSS 演示文稿分开以获取下拉列表。我发现困难的一件事是突出显示预先填充了当前选择的用户的选择下拉列表。我可以根据需要设置下拉*选项*的文本颜色样式，但无法更改静态选择框的文本（至少在 Firefox 中）

[http://jsfiddle.net/tchalvakspam/YmmvU/](http://jsfiddle.net/tchalvakspam/YmmvU/)

是一个 jsfiddle 显示我的意思。

我想做的是：

更改下拉菜单的颜色，当它们开始时选择了“”（空字符串默认选项）以外的选项值。使它们变红以突出显示

纯css可以做到这一点，还是我被迫使用js？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:38:18.333

你的代码

```
#smart-search-form option[selected=selected]{
    color: #ff0000 !important;
} 
```

不起作用，因为当您选择一个选项时，您更改了它的 property `selected`，而不是它的 attribute `selected`。所以选择器`[selected=selected]`只匹配默认选项。

看来您需要类似的东西`option:selected`，但那不存在。

（请参阅[通过 CSS 设置选定选项？](https://stackoverflow.com/questions/1122036/set-selected-option-via-css)）

# ant - Ant unzip/unwar 与文件名同目录名

> ID：12167711
> 
> 赞同：4
> 
> 时间：2012-08-28T21:20:39.243
> 
> 标签：ant

我需要使用 ANT 构建脚本在 tomcat/webapps 目录中解压缩一个 war 文件。战争文件名不固定。如何将其解压缩到名称与war文件名相同的目录中。我知道如何解压缩文件，但问题是它解压缩了指定目标目录中的内容。如果我不知道目录名称怎么办？

构建之前：

```
tomcat/webapps/
   myApp-0.1.war 
```

构建后：

```
tomcat/webapps
   myApp-0.1/
   myApp-0.1.war 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T00:52:12.473

因此，在了解了一些 Ant 任务之后，我想到了：

```
<!-- Get the path of the war file. I know the file name pattern in this case -->
<path id="warFilePath">
    <fileset dir="./tomcat/webapps/">
        <include name="myApp-*.war"/>
    </fileset>
</path>

<property name="warFile" refid="warFilePath" />

<!-- Get file name without extension -->
<basename property="warFilename" file="${warFile}" suffix=".war" />

<!-- Create directory with the same name as the war file name -->
<mkdir dir="./tomcat/webapps/${warFilename}" />

<!-- unzip war file -->
<unwar dest="./tomcat/webapps/${warFilename}">
    <fileset dir="./tomcat/webapps/">
        <include name="${warFilename}.war"/>    
    </fileset>
</unwar> 
```

让我知道是否有更好的方法来做到这一点。我还使用 ant-contrib 找到[了关于 stackoverflow 的解决方案](https://stackoverflow.com/a/4434065/957081)，但这不是我想要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T03:23:07.760

干得好[蓝科技](https://stackoverflow.com/users/957081/bluetech)。您的解决方案也可以表示如下：

```
<target name="unwar-test">
  <property name="webapps.dir" value="tomcat/webapps" />

  <fileset id="war.file.id" dir="${basedir}"
      includes="${webapps.dir}/myApp-*.war" />
  <property name="war.file" refid="war.file.id" />

  <basename property="war.basename" file="${war.file}" suffix=".war" />
  <property name="unwar.dir" location="${webapps.dir}/${war.basename}" />
  <mkdir dir="${unwar.dir}" />
  <unwar dest="${unwar.dir}" src="${war.file}" />
</target> 
```

# drm - 带有 Zen Cart 的 Adob e 内容服务器

> ID：12167713
> 
> 赞同：1
> 
> 时间：2012-08-28T21:20:57.400
> 
> 标签：drm, zen-cart

是否有人（或是否有人）对将 Adob​​e Content Server (DRM) 与 Zen Cart 集成为工作解决方案有任何见解？

我正在寻找通过 Zen Cart 店面交付 DRM 文档的解决方案，并欢迎任何步行者对此的任何见解。

我们现在安装了 Adob​​e Content Server，并且示例商店代码正在交付 ePub 文件。

我熟悉 BOOKS.XML 文件，其中包含经销商的书籍目录。难题是将 Zen Cart 配置为能够在处理订单（收到付款等）后放置 .acms 文件的链接，并将信息存储在客户帐户中以供将来访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:29:53.353

当您部署内容服务器并添加分销商（例如您的 zen cart 书店）时，它会为您的商店发布 store config.xml 和 catalog.xml。

catalog.xml 包含内容服务器管理员允许进入您的商店的文件数据。

我在此处发布 xml 字段时遇到问题。

您需要做的就是解析 Catalog.xml。它具有以下所有值：

*   标题
*   作者
*   出版商
*   下载链接
*   封面图片链接

还有更多信息，如权限、分辨率、类型等。

如果您去评估内容服务器，他们会为您提供内置在 php 中的示例存储，其中他们将已解析的示例 catalog.xml 显示到一个完整的工作存储中。

所有你

# ruby - 即使它在列表中，Ruby 也无法在其中找到 gem

> ID：12167726
> 
> 赞同：4
> 
> 时间：2012-08-28T21:22:38.573
> 
> 标签：ruby, rubygems, vagrant

我有一个奇怪的问题，当我尝试运行`vagrant up`系统时突然找不到 json gem。当我运行 vagrant up 时，我收到以下消息：

```
/usr/lib/ruby/vendor_ruby/1.8/rubygems/dependency.rb:247:in `to_specs': Could not find  json (~> 1.5.1) amongst [Platform-0.4.0, archive-tar-minitar-0.5.2, builder-3.0.0,  bundler-1.1.5, childprocess-0.3.5, cucumber-1.2.1, diff-lcs-1.1.3, erubis-2.7.0, ffi-1.1.5, gemcutter-0.7.1, gherkin-2.11.2, git-1.2.5, hiera-0.3.0, hiera-json-0.3.0, hiera-puppet-0.3.0, highline-1.6.13, i18n-0.6.0, json-1.7.5, log4r-1.1.10, metaclass-0.0.1, mocha-0.12.3, net-scp-1.0.4, net-ssh-2.5.2, open4-1.3.0, popen4-0.1.2, progressbar-0.11.0, puppet-module-0.3.4, puppetlabs_spec_helper-0.3.0, rake-0.9.2.2, rspec-2.11.0, rspec-core-2.11.1, rspec-expectations-2.11.2, rspec-mocks-2.11.2, rspec-puppet-0.1.4, thor-0.16.0, vagrant-1.0.3, veewee-0.2.3, virtualbox-0.9.2] (Gem::LoadError)
        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/specification.rb:771:in `activate_dependencies'
        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/specification.rb:760:in `each'
        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/specification.rb:760:in `activate_dependencies'
        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/specification.rb:744:in `activate'
        from /usr/lib/ruby/vendor_ruby/1.8/rubygems.rb:1209:in `gem'
        from /usr/local/bin/vagrant:18 
```

正如您从上面的错误中看到的，json gem 显然在列表中，但它不会识别它。我已经搜索过这个问题并发现了很多事件，但大多数时候 gem 不在列表中。我没有多次安装 ruby​​ 并且设置了 gem 路径。

宝石环境

RubyGems 环境：

*   红宝石版本：1.8.15
*   红宝石版本：1.8.7（2011-06-30 补丁级别 352）[x86_64-linux]
*   安装目录：/var/lib/gems/1.8
*   红宝石可执行文件：/usr/bin/ruby1.8
*   可执行目录：/usr/local/bin
*   红宝石平台：
    *   红宝石
    *   x86_64-linux
*   宝石路径：
    *   /var/lib/gems/1.8
    *   /home/adrian/.gem/ruby/1.8
*   宝石配置：
    *   :update_sources => 真
    *   :详细 => 真
    *   :基准 => 假
    *   ：回溯 => 假
    *   :bulk_threshold => 1000
*   远程资源：
    *   [http://rubygems.org/](http://rubygems.org/)

安装目录在 Ubuntu 12.04 上是默认的。

宝石清单

***当地宝石***

```
archive-tar-minitar (0.5.2)
builder (3.0.0)
bundler (1.1.5)
childprocess (0.3.5)
cucumber (1.2.1)
diff-lcs (1.1.3)
erubis (2.7.0)
ffi (1.1.5)
gemcutter (0.7.1)
gherkin (2.11.2)
git (1.2.5)
hiera (0.3.0)
hiera-json (0.3.0)
hiera-puppet (0.3.0)
highline (1.6.13)
i18n (0.6.0)
json (1.7.5)
log4r (1.1.10)
metaclass (0.0.1)
mocha (0.12.3)
net-scp (1.0.4)
net-ssh (2.5.2)
open4 (1.3.0)
Platform (0.4.0)
popen4 (0.1.2)
progressbar (0.11.0)
puppet-module (0.3.4)
puppetlabs_spec_helper (0.3.0)
rake (0.9.2.2)
rspec (2.11.0)
rspec-core (2.11.1)
rspec-expectations (2.11.2)
rspec-mocks (2.11.2)
rspec-puppet (0.1.4)
thor (0.16.0)
vagrant (1.0.3)
veewee (0.2.3)
virtualbox (0.9.2) 
```

如您所见，gem 位于此处的已安装列表中。环境变量`$GEM_HOME`和`$GEM_PATH`未设置。

我一直试图弄清楚这一点，但目前不知所措。Ruby 和/或 Vagrant 专家的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T21:38:43.280

正如您在此处指出的那样，您已经安装了 json gem version `1.7.5`。但是您收到的错误消息是 states `Could not find json (~> 1.5.1)`。`~>`语法意味着只有`1.5.x`版本是可以接受的！因此，您需要安装其中之一以满足依赖关系。

# javascript - Javascript - 在一行上评估多个正则表达式

> ID：12167727
> 
> 赞同：3
> 
> 时间：2012-08-28T21:22:39.227
> 
> 标签：javascript, regex

我对 Javascript 中的正则表达式相当陌生，我正在尝试做一些看似简单的事情，但没有成功。基本上，我需要评估一个字符串是否满足 2 个正则表达式条件中的 1 个。基本上，输入字符串可以有两种形式中的一种，其中任何一种都是有效的，其他任何一种都是无效的。

所以说我有 2 个正则表达式：`a= ^[0-9]\d{3}$`并且`b= ^1-\d{5}`想在继续之前查看输入字符串是否匹配。我想做的是这样的：

```
If((!a.test(input)) || (!b.test(input)))
{
   alert("Invalid ID");
} 
```

我还尝试了使用“|”的变体 操作员：

```
if((!a|!b.test(input))) 
```

但到目前为止，没有任何效果。通常我会得到验证 1 个或一个都不验证的声明，但绝不会同时验证两者。我不确定我在这里做错了什么。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T21:24:41.907

我认为你的布尔逻辑是错误的。要在继续之前匹配一个或另一个，失败的情况是它不匹配两个测试，如下所示：

```
if(!a.test(input) && !b.test(input))
{
   alert("Invalid ID");
} 
```

此外，您`If`应该`if`使用小写字母`i`，并且我删除了不必要的括号以使其更易于阅读。

您还可以将两个正则表达式合并为一个并立即对其进行测试：

```
var re = /^[0-9]\d{3}$|^1-\d{5}/;

if (!re.test(input)) {
    alert("Invalid ID");
} 
```

* * *

此外，您没有显示真正的代码，但没有声明正则表达式在您的问题中是如何使用它们的。也许这就是您将它们复制到问题中的方式，但它们使用的`/regex here/`语法如下：

```
var a = /^[0-9]\d{3}$/;
var b = /^1-\d{5}/; 
```

注意：在您的第二个正则表达式中，您是否打算让它`$`像第一个一样在末尾有一个？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:29:11.403

我会这样做：

```
if (!input.match(/^(\d{4}|1-\d{5})$/)) {
    alert('Invalid ID');
} 
```

请注意，我使用的是`\d`代替`[0-9]`，这是相同的。

# javascript - 在 Google 地球企业客户端中以编程方式打开气球

> ID：12167728
> 
> 赞同：2
> 
> 时间：2012-08-28T21:22:41.050
> 
> 标签：javascript, kml, google-earth

我已经用谷歌地球插件做了相当多的工作，它很容易使用 api 和 javascript 打开一个气球。但是，我似乎无法弄清楚如何在 Google 地球企业客户端中使用 KML 和 javascript 以编程方式打开另一个地标的气球。

我在带有两个链接的 Balloon KML 的 CDATA 中使用 html 渲染地标的气球。目标是这两个链接将关闭当前气球并相应地打开另一个地标的气球。

这是气球正在渲染的 html（只是一个表格）：

```
<BalloonStyle>
    <bgColor>ffdfdfdf</bgColor>
    <text>
      <![CDATA[
         <html><head></head><body>
          <b><font size="+1.5"><a id='prevMonth' href="#">Last Month</a><center>$[Month]        </center><a id='nextMonth' href="#">Next Month</a></font></b>
          <div id="content" align = "center">
          <table border = "0" width="450"><tr bgcolor = "#005497"><th colspan="2"><em><b><font color="#D9D9DB">Details</b></em></th></tr>
            <tr bgcolor = "#ffffff"><td width="150"><b>County</b></td><td width="300">$[Details]</td></tr>
            <tr bgcolor = "#ffffff"><td width="150"><b>Segment</b></td><td width="300">$[Segment]</td></tr>
            ....
          </table>
         </div>
         </body>
        </html>
       ]]>
   </text>
</BalloonStyle> 
```

我尝试将标签设置`href`为`<a>`另一个地标的 id：

```
<a id='prevMonth' href='#differentPlacemarkID'>Last Month</a> 
```

也试过这个

```
<script> 
     function openUp(){ 
        window.open('kmzFile.kmz#differentPlacemarkID');
     }
</script>
<a onclick='openUp();'>Last Month</a> 
```

并且以正确的地标为中心，但不会打开气球。

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T22:17:27.817

尝试

```
<a id='prevMonth' href='#differentPlacemarkID;balloonFlyto'>Last Month</a> 
```

或者

```
<a id='prevMonth' href='#differentPlacemarkID;flyto'>Last Month</a> 
```

# c# - 我应该如何处理两个类之间的异常？

> ID：12167731
> 
> 赞同：0
> 
> 时间：2012-08-28T21:22:49.113
> 
> 标签：c#, exception, error-handling

请参阅代码注释中的问题。

我有两节课。

这是主要课程（第 1 课）：

```
//this class contains controls on the form.
Class MyApp
{
    private void btnProcessImages_Click(object sender, EventArgs e)
    {
        /* if an error occurs in the method below, I want to: 
               1\. Show the error message, and
               2\. Based on fail or success do different actions.
        */
        Calculate.DevideNumbers(2, 0);
    }

    /* 
       if the above is successful, I want to do 1 thing, 
       if not, i want to do something else (with controls on THIS form).
    */ 

} 
```

这是第二类：

```
Class Calculate
{
     public double void DivideNumbers(int num1, int num2)
     {
           double result = 0.00;

           try
           {
                result = num1/num2;
                return result;
           }
           catch (Exception)
           {
                throw;
           }  
     }
} 
```

我的问题是： DivideNumbers() 向调用方法报告错误的最佳方式是什么？

调用者需要知道是否有错误以及错误消息是什么。我将如何发送这两条信息的调用方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T21:26:11.880

删除 try catch`DivideNumbers`并让异常冒泡。

然后将调用包装`Calculate.DevideNumbers(2, 0);`在 try catch 块中。

```
//this class contains controls on the form.
Class MyApp
{
    private void btnProcessImages_Click(object sender, EventArgs e)
    {
      try
      {
          Calculate.DevideNumbers(2, 0);
      }
      catch (Exception e)
      {
           DoStuff();
           Return();
      }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T21:27:58.417

你可以做：

```
class MyApp : Form
{
    //...

    bool erroroccurs = false;
    private void btnProcessImages_Click(object sender, EventArgs e)
    {
          try
          {
              Calculate.DevideNumbers(2, 0);
          }
          catch(Exception ex)
          {
              MessageBox.Show(ex.Message);
              erroroccurs = true;
          }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T21:29:48.140

删除您的 DevideNumbers 方法中的 try catch，我在那里没有用，因为您对 catch 中的任何内容都没有任何作用。最好将您的 try catch 放置在 btnProcessImages_Click 方法中，您可以在其中添加错误处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T21:38:39.413

这是我的建议。请注意我更改的一些不是非常明显的事情。

*   DivideNumbers 返回一个`double`（你让它返回一个值，但该方法被标记为`void`.
*   我投了一个到`int`一个`double`。`DivideNumbers`一个`int`除以一个`int`总是一个`int`。这可能会产生意想不到的结果，除非您想要/期望隐式舍入。
*   异常处理在不同的类中完成，因为这似乎是您想要*处理*它的地方。IE 如果您的唯一意图是重新抛出异常，那么捕获异常有什么意义？就让它冒泡吧。

...

```
Class MyApp
{
    private void btnProcessImages_Click(object sender, EventArgs e)
    {
        try 
        {
            double result = Calculate.DevideNumbers(2, 0);
            HandleSuccess(result);
        }
        catch (Exception ex)
        {
            HandleError(ex.Message);
        }
    }

    private void HandleSuccess(double result)
    {
        // Do whatever you do when no errors occur
    }

    private void HandleError(string errorMessage)
    {
        // Do whatever you do when an error occurs... log the exception, etc.
    }
} 
```

...

```
Class Calculate
{
    public static double DivideNumbers(int num1, int num2)
    {
        result = (double)num1/num2;
        return result;

        // There's no need to catch an exception here if you're ONLY going to re-throw it.
    }        
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T21:30:15.040

首先，您不应该添加一个`try catch`块，`DevideNumbers`因为根据您提供的代码，您对异常没有做任何事情。您只需要捕获异常以防您打算对其进行处理（例如记录错误）

无论如何，异常都会冒泡，所以你不需要那个`try catch`块

在调用者方法上，您可以在调用时捕获任何异常`DevideNumbers`并发挥您的作用。

# css - 通过 CSS 媒体查询进行字体检测（TTF 或 WOFF）

> ID：12167740
> 
> 赞同：0
> 
> 时间：2012-08-28T21:24:11.587
> 
> 标签：css, fonts, font-face, media-queries

我想知道是否可以使用 CSS 媒体查询来检测设备是否可以加载特定的字体格式（TTF 或 WOFF，而不仅仅是任何@Font-Face）。我不想检查屏幕大小，然后根据屏幕大小加载特定字体。感谢您提供任何帮助、建议以及更好的表达方式以继续我的搜索。

更新：有人告诉我这不是一个选项：{font: 60px/68px 'ArnoProBoldTTF', 'ArnoProBoldWoff';letter-spacing: 0;}

它尝试加载第一个字体，如果不能，则转到第二个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T09:04:44.870

[这对于媒体查询](http://www.w3.org/TR/css3-mediaqueries/)是不可能的。您必须使用 javascript 解决方法来确定字体是否可用（并已加载）。

只是好奇，你为什么需要这个？可能有更好的方法来实现您的目标，而无需这种类型的检测。
如果您只想在所有设备和浏览器上加载特定的嵌入字体，有一个简单的解决方案。如有必要，我会更新我的答案。

# javascript - 在 dojo 中将数据从一个选项卡绑定到另一个选项卡（在选项卡打开时？）

> ID：12167742
> 
> 赞同：0
> 
> 时间：2012-08-28T21:24:17.903
> 
> 标签：javascript, dojo

我一直在使用 dojo 1.7 并且有两个选项卡。我在一个选项卡的字段中设置了一个值，该值需要进入另一个选项卡上的另一个字段。我似乎记得有一种方法可以在 1.7+ 中打开选项卡时执行 javascript 例程，但在我的一生中，我无法找到执行此操作的参数。我计划执行 javascript 以通过 dojo.byId 读取值，然后将值填充到另一个选项卡中。除非有人知道将一个选项卡中的值绑定到另一个选项卡中的另一个字段的更简单方法。那将是甜蜜的！
像往常一样，感谢您的建议。珍妮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T08:27:36.577

对于单个 ad hoc 同步，我建议使用每个 dijit 小部件（更准确地说是子类的每个类）都可用的 mixin`watch`方法。它允许监视更改的值，而不是在函数调用上挂钩事件。`dojo/Stateful``dijit/_WidgetBase`

```
var spinner1 = registry.byId("spinner1")
, spinner2 = registry.byId("spinner2")
;

spinner1.watch("value", function(prop, oldValue, newValue) {
    spinner2.set("value", newValue);
}); 
```

在 jsFiddle 上查看它的实际效果：http: [//jsfiddle.net/phusick/YyNCk/](http://jsfiddle.net/phusick/YyNCk/)

[对于更复杂的情况，请参阅我对Synchronize interdependent Dojo widgets/values](https://stackoverflow.com/questions/10709426/synchronize-interdependent-dojo-widgets-values/10718753#10718753)的回答并查看一个工作示例：http: [//jsfiddle.net/phusick/HCx3w/](http://jsfiddle.net/phusick/HCx3w/)

**编辑：**你原来的问题的答案是`dojo/aspect`选项卡的`ContentPane`方法`_onShow`：

```
aspect.after(registry.byId("tab2"), "_onShow", function() {
    console.log("#tab2 is now visible");
}); 
```

我将此添加到上述[jsFiddle](http://jsfiddle.net/phusick/YyNCk/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T08:54:01.257

为了完整起见，您可以像这样轻松使用 phusick 的答案：

```
require(
   ["dojo/_base/declare", "dijit/form/NumberSpinner"], 
   function (declare, Spinner ) 
   {
        declare("my.spinner", [dijit.form.NumberSpinner], {
            linkedInputs: [],
            startup: function() {
                var self = this;
                if(this.linkedInputs) {
                     self.watch("value", dojo.hitch(self, self.setOther));
                }

                return this.inherited(arguments);
            },
            setOther: function() {
                var links = this.linkedInputs, newVal= self.get("value")
                dojo.ready(function() {
                  dojo.forEach(links, function(input) {
                      /*assert if string*/ dijit.byId(input).set("value", newVal);
                  });
                });
            }
        });
}); 
```

请注意，如果您需要一个双向的“linkedInput” - 您需要在 watch 函数中创建一个互斥锁。否则，一个输入设置另一个。Watch on other sets the one，同时观察一个输入中的值再次设置另一个，依此类推。

# windows-8 - 如何将文件拖入在 Windows 8 上以管理员身份运行的 Visual Studio

> ID：12167743
> 
> 赞同：8
> 
> 时间：2012-08-28T21:24:20.367
> 
> 标签：windows-8, microsoft-metro, uac, visual-studio-2012

作为一名 Web 开发人员，我发现自己一直在将调试器连接到 IIS 进程。在 Visual Studio 2012 中，这意味着您必须拥有提升的权限。一般来说，这不是问题，只需将 VS2012 设置为以管理员身份运行即可。

但是，这样做会导致无法从 Windows 资源管理器中将文件拖到 VS2012 中。由于懒得使用打开文件对话框，我更喜欢将文件拖到那里。

UAC 会阻止您这样做，因此在 Windows 7 中，我们只需关闭 UAC 并完成它。在 Windows 8 中，这不起作用。

互联网上有很多关于如何在 Windows 8 中禁用 UAC 的指南。大多数只是说您应该将滑块移动到按钮上。但是，这实际上并没有禁用 UAC，在尝试此操作后，您仍然无法将文件拖放到 Visual Studio 2012 中。

其他指南谈到通过更改注册表设置来禁用 UAC。这会关闭 UAC 并允许您将文件拖放到 VS2012 中，但这样做的副作用是 Metro 应用程序无法再运行。明明这也太坑爹了……

有没有人对如何能够有任何想法

*   以管理员身份运行 VS2012，以便我们可以调试 iis
*   能够将文件拖放到VS2012中
*   能够运行 Metro 应用程序

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T13:35:03.707

Visual Studio 2012 的最新版本 VSCommands 扩展允许您以中等完整性级别运行 Visual Studio，这基本上允许从其他窗口拖放。您可以[在此处阅读更多信息并从](http://vscommands.squaredinfinity.com/blog)[http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8](http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8)下载扩展

# extjs - Ext JS 选项卡面板检测选项卡破坏

> ID：12167744
> 
> 赞同：0
> 
> 时间：2012-08-28T21:24:23.067
> 
> 标签：extjs, extjs4.1, extjs-mvc, tabpanel

如何检测选项卡面板中的选项卡何时被破坏？似乎没有事件（仅用于选项卡和标题更改）

我知道我可以监听我用作选项卡的组件的“销毁”事件，这很有效，但我需要从 MVC 控制器执行此操作。我在想一个正确的控制查询可能会做到这一点，但我不确定......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T00:38:03.350

父选项卡面板应该触发`beforeremove`您可以在控制器中捕获的事件。

# python - 在 Python 中运行已更改（切换）用户的命令行脚本

> ID：12167748
> 
> 赞同：1
> 
> 时间：2012-08-28T21:24:49.333
> 
> 标签：python, subprocess

我想将文本添加到只能从某个帐户 ID“appid”和 passwd“passx”访问的文件中，我尝试了以下代码，但它不起作用。

```
import os, subprocess
text=str('23.33%')
cmd = ['su', 'appid', '-c echo text >> /tofhisfile.txt']
proc = subprocess.Popen(cmd, shell=True, stdin=subprocess.PIPE, stdout=subprocess.PIPE,     stderr=subprocess.PIPE)
proc.communicate('passx') 
```

这也行不通

```
os.system('su appid -c echo text >> /tothisfile.txt') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:00:09.520

`su`您只能在交互模式下使用实用程序（或将`expect`实用程序与身份验证一起使用）来使用 target_user 的密码`su`。如果您想使用`sudo`实用程序将一个用户验证为另一个用户 - 您应该以 root 身份在文件中编写适当的规则`/etc/sudoers`（因此根本不会要求您的 source_user 输入密码）。另请注意，当您使用 sudo use`sudo -u root /bin/sh -c 'echo "root cat write anywhere" > /etc/anywhere'`时，以防`sudo -u root echo "root can write anywhere" > /etc/anywhere`您收到权限被拒绝错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:35:48.450

您正在使用列表以及`shell=True`. 您不想执行后者，但即使您这样做了，shell 也会使用字符串，因此您需要与第二个示例相同类型的字符串。

无论如何，您可能只想在脚本之外执行所有这些操作。所以假设你已经被`setuid`正确地 'ed 了（尽管如果你在你的脚本中做这将是你会使用的 - `os.setuid`）并且只是写入文件，然后使用`su whoever -c python mything.py`.

# javascript - 用任意 html 替换 ExtJS 组件的内容

> ID：12167750
> 
> 赞同：1
> 
> 时间：2012-08-28T21:25:03.120
> 
> 标签：javascript, extjs, extjs4.1

我有一个使用 ExtJS 4.1 的网络应用程序。javascript都是MVC。我有一个商店，它对服务器进行 JSON 调用以获取包含 html 标记的单个记录，我想用它替换我的一个组件的内容。我可以验证我的商店是否正常工作，我的控制器是否正常工作，但我认为我正在使用的功能`setInnerHtml`无法正常工作。

这是我的控制器代码：

```
Ext.define(appName + '.controller.Header', {
    extend: 'Ext.app.Controller',

    stores: [ 'Header' ],
    models: [ 'Header' ],
    views: [ 'main.Header' ],
    refs: [{ ref: 'headerView', selector: 'header' }],

    init: function () {
        var headerStore = this.getHeaderStore();
        headerStore.addListener('load', this.onHeaderStoreLoad, this);
    },

    onLaunch: function () {
    },

    onHeaderStoreLoad: function (store, records, successful) {
        if (successful) {
            var headerContent = store.first().data.html;
            var headerView = this.getHeaderView();
            headerView.setInnerHtml(headerContent);
        }
    }
}); 
```

这是我的视图代码：

```
Ext.define(appName + '.view.main.Header', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.header',

    height: 30,
    layout: 'border',
    border: false,

    items: [
        { html: 'header', region: 'center' } // this is just a temporary placeholder and I'd like to replace this item with different html
    ],

    setInnerHtml: function (html) {
        this.update(html); // doesn't work
    }
}); 
```

我需要如何更改我的`setInnerHtml`功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:58:49.167

你不应该混合 items/html，至少不能同时混合，所以你要么需要：

1) 调用表头第一个孩子的更新

```
this.items.first().update(html); 
```

2）完全删除子项

第二种更可取，因为有一个额外的子组件没有任何用处，也没有具有单个中心子区域的边框布局。

# java - 使用 boxlayout，我如何让组件填充所有可用的水平宽度？

> ID：12167754
> 
> 赞同：6
> 
> 时间：2012-08-28T21:25:32.983
> 
> 标签：java, swing

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.HeadlessException;
import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
/**
 * @author dah01
 */
public class Main {
    private static int panelNumber = 1;
    public static final String fillerText = ""
            + "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec "
            + "placerat aliquam magna, in faucibus ante pharetra porta. "
            + "Vestibulum ante ipsum primis in faucibus orci luctus et ultrices "
            + "posuere cubilia Curae; Quisque eu dui ligula. Donec consequat "
            + "fringilla enim eu tempus. Ut pharetra velit id sapien vehicula "
            + "scelerisque. Proin sit amet tellus enim, et gravida dui. Ut "
            + "laoreet tristique tincidunt. Integer pharetra pulvinar neque id "
            + "dignissim. Praesent gravida dapibus ornare. Aenean facilisis "
            + "consectetur tincidunt. Donec ante tellus, vehicula vitae "
            + "ultrices eget, scelerisque cursus turpis. Quisque volutpat odio "
            + "sed risus posuere adipiscing. In pharetra elit id risus ornare "
            + "ut bibendum orci luctus. In sollicitudin gravida neque quis "
            + "lobortis. Morbi id justo enim. Aliquam eget orci lorem.";
    public static void main(String[] args) {
        JPanel innerPanelOne = getPanel();

        //SECOND PANEL
        JPanel innerPanelTwo = getPanel();

        //MIDDLE PANEL
        JPanel middlePanel = new JPanel();
        middlePanel.setBackground(Color.RED);
        middlePanel.setLayout(new BoxLayout(middlePanel, BoxLayout.PAGE_AXIS));
        middlePanel.add(innerPanelOne);
        middlePanel.add(innerPanelTwo);

        //OUTER PANEL
        JPanel outerPanel = new JPanel();
        outerPanel.setBackground(Color.BLUE);
        outerPanel.add(middlePanel);

        createAndShowGUI(outerPanel);
    }

    private static void createAndShowGUI(JPanel outerPanel) throws HeadlessException {
        //FRAME
        JFrame frame = new JFrame();
        frame.setContentPane(outerPanel);
        frame.setSize(500, 500);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    private static JPanel getPanel() {
        //TEXT AREA
        JTextArea t = new JTextArea(fillerText);
        t.setWrapStyleWord(true);
        t.setLineWrap(true);

        //Scroll
        JScrollPane scrollOne = new JScrollPane();
        scrollOne.setViewportView(t);

        //Label
        JLabel l = new JLabel("LABEL " +panelNumber++);
        //FIRST PANEL
        JPanel p = new JPanel();
        p.setLayout(new BorderLayout());
        p.setBackground(Color.GREEN);
        p.add(l,BorderLayout.NORTH);
        p.add(scrollOne,BorderLayout.SOUTH);

        t.setMaximumSize(new Dimension(1920,1080));
        p.setMaximumSize(new Dimension(1920,1080));
        l.setMaximumSize(new Dimension(1920,1080));
        return p;
    }
} 
```

编辑：

```
package com.protocase.notes.views;

import com.protocase.notes.controller.NotesController;
import com.protocase.notes.model.Note;
import com.protocase.notes.model.User;
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.util.Date;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.border.BevelBorder;

/**
 * @author dah01
 */
public class NotesPanel extends JPanel {

    public static void main(String[] args) {
        JFrame f = new JFrame();
        f.setSize(500, 500);
        Note note = new Note();
        User u = new User();
        note.setCreator(u);
        note.setLastEdited(u);
        note.setDateCreated(new Date());
        JPanel panel = new JPanel();
        panel.add(new NotesPanel(note, null));
        panel.add(new NotesPanel(note, null));
        panel.setBackground(Color.red);

        panel.setMaximumSize(new Dimension(Short.MAX_VALUE, Short.MAX_VALUE));
        f.setContentPane(panel);
        f.setVisible(true);
    }
    // <editor-fold defaultstate="collapsed" desc="Attributes">
    private Note note;
    private NotesController controller;
    //</editor-fold>
    // <editor-fold defaultstate="collapsed" desc="Getters N' Setters">

    public NotesController getController() {
        return controller;
    }

    public void setController(NotesController controller) {
        this.controller = controller;
    }

    public Note getNote() {
        return note;
    }

    public void setNote(Note note) {
        this.note = note;
    }
    //</editor-fold>
    // <editor-fold defaultstate="collapsed" desc="Constructor">

    /**
     * Sets up a note panel that shows everything about the note.
     * @param note 
     */
    public NotesPanel(Note note, NotesController controller) {
        // -- Setup the layout manager.
        this.setBackground(new Color(199, 187, 192));
        this.setLayout(new GridBagLayout());
        this.setBorder(new BevelBorder(BevelBorder.RAISED));
        GridBagConstraints c = new GridBagConstraints();

        // -- Setup the creator section.
        JLabel creatorLabel = new JLabel("Note by " + note.getCreator() + " @ " + note.getDateCreated());
        creatorLabel.setAlignmentX(JLabel.LEFT_ALIGNMENT);
        c.fill = GridBagConstraints.HORIZONTAL;

        c.gridy = 0;
        c.weightx = 1;
        c.weighty = 0.3;
        this.add(creatorLabel, c);

        // -- Setup the notes area.
        JTextArea notesContentsArea = new JTextArea(note.getContents());
        notesContentsArea.setEditable(false);
        notesContentsArea.setLineWrap(true);
        notesContentsArea.setWrapStyleWord(true);

        JScrollPane scrollPane = new JScrollPane(notesContentsArea);
        scrollPane.setAlignmentX(JScrollPane.LEFT_ALIGNMENT);

        c.gridy = 1;

        this.add(scrollPane, c);

        // -- Setup the edited by label.
        JLabel editorLabel = new JLabel(" -- Last edited by " + note.getLastEdited() + " at " + note.getDateModified());
        editorLabel.setAlignmentX(Component.LEFT_ALIGNMENT);

        c.gridy = 2;

        this.add(editorLabel, c);

        // -- Add everything to the view.

        this.setBackground(Color.yellow);
        //this.add(creatorLabel);
        //this.add(scrollPane);
        //this.add(editorLabel);
    }
    //</editor-fold>

    @Override
    public Dimension getPreferredSize() {
        Dimension d = super.getPreferredSize();
        d.width = this.getParent().getSize().width;
        return d;
    }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-29T09:13:43.867

**如果容器想要强制它的组件都匹配它的宽度**，有很多替代方法可以做得更好，除非你*需要*使用`BoxLayout`. 一是标准`GridBagLayout`。给定一个容器`panel`和三个组件和`a`，代码将是：`b``c`

```
panel.setLayout(new GridBagLayout());
GridBagConstraints cons = new GridBagConstraints();
cons.fill = GridBagConstraints.HORIZONTAL;
cons.weightx = 1;
cons.gridx = 0;

panel.add(a, cons);
panel.add(b, cons);
panel.add(c, cons); 
```

**如果组件想要匹配其容器的宽度**——这通常不是一个好主意，我会改为编写组件的构造函数来接收对容器的引用并覆盖`getPreferredSize`以基于传入的组件进行计算。但布局几乎总是由父级决定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T21:35:06.860

由于 BoxLayout 由组件*首选大小*引导，您可以使用：

```
JPanel middlePanel = new JPanel() {
   public Dimension getPreferredSize() {
       return outerPanel.getSize();
   };
}; 
```

取父母的尺寸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-25T10:33:32.530

对我来说一个好的解决方法是使用[SpringLayout](https://docs.oracle.com/javase/tutorial/uiswing/layout/spring.html)。

只需使用[Oracle 的模板](https://docs.oracle.com/javase/tutorial/uiswing/examples/layout/SpringGridProject/src/layout/SpringUtilities.java)来帮助您使用此布局

之后，你只需要添加你的组件（没有约束），然后调用它：

```
SpringUtilities.makeCompactGrid(yourPanel, x, 1, 0, 0, 0, 0);
// x stands for rowCount. Zeros are margins. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-25T19:12:43.453

[如何使用 BoxLayout](https://docs.oracle.com/javase/tutorial/uiswing/layout/box.html)文档说：

> 如果所有组件都具有相同的 X 对齐方式，则所有组件都与它们的容器一样宽。

因此，当使用 BoxLayout 时，为所有组件设置相同的 X 对齐就足够了：

```
 c1.setAlignmentX(Component.CENTER_ALIGNMENT)
        c2.setAlignmentX(Component.CENTER_ALIGNMENT)
        ... 
```

# maven - 第谷 - 进口包上的“不满足的约束”

> ID：12167774
> 
> 赞同：6
> 
> 时间：2012-08-28T21:27:47.317
> 
> 标签：maven, osgi, tycho

我刚刚开始使用第谷，而且我在早期阶段被难住了。也许我误解了一些东西，所以以防万一，这就是我所期待的：我以 OSGi 风格（即在`MANIFEST.MF`via中`Import-Package`）定义我的捆绑包的需求，并且 Tycho 以某种方式即时使用该信息而不是我需要重新定义它以 Maven 风格（即我不必将依赖项放在 pom.xml 中）。

所以，我做了一个简单的 Maven 项目，在 Eclipse 中使用 m2eclipse 插件、m2eclipse-tycho 插件和 PDE 插件，并将以下 Tycho 的东西放在 pom 中：

```
<properties>
    <tycho-version>0.15.0</tycho-version>
</properties>

<build>
    <plugins>
        <plugin>
            <groupId>org.eclipse.tycho</groupId>
            <artifactId>tycho-maven-plugin</artifactId>
            <version>${tycho-version}</version>
            <extensions>true</extensions>
        </plugin>
    </plugins>
</build> 
```

挣扎通过一些古怪的配置错误，最后得到了一个基本上空的项目（即没有源代码），在 Eclipse 中没有给出任何错误或警告。然后我从另一个项目中复制了我的源代码，并且（如预期的那样）由于缺少依赖项而出现了一堆编译器错误。第一个是来自 org.jboss.netty.channel 的 AbstractChannel。我使用 Netty 的 3.5.1.Final 版本，所以我编辑了我的 MANIFEST.MF 以包括：

```
Import-Package: org.jboss.netty.channel;version="[3.5.1,4)" 
```

然后我期待 Tycho 能神奇地发现我需要 Netty，因此就好像我在我的 Maven pom.xml 中插入了以下内容：

```
<dependency>
    <groupId>org.jboss.netty</groupId>
    <artifactId>netty</artifactId>
    <version>3.5.1.Final</version>
</dependency> 
```

取而代之的是，我在 Eclipse 中遇到了一个额外的错误，说：

```
Unsatisfied constraint: 'Import-Package: org.jboss.netty.channel;version="[3.5.1,4.0.0)" 
```

我不知道从这里去哪里。我对第谷应该做什么有一些基本的误解吗？还是我必须设置其他东西才能使其能够将条目“神奇”转换`Import-Package`为`MANIFEST.MF`pom.xml`<dependency>`条目？或者是其他东西？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T22:35:45.887

是的，还有一些障碍要克服。

简而言之，您需要为 Tycho 提供一个可以从中检索依赖项的存储库。

更详细一点：

*   您需要设置目标平台，并将其传递给 Tycho。我猜您已经以某种方式设置了目标平台，否则 Eclipse 也会抱怨找不到 Netty。
*   确保您在工作区中共享您的目标平台，以便 Tycho 也可以访问它。
*   [告诉 Tycho 像这样](http://wiki.eclipse.org/Tycho/Target_Platform#Target_files)使用目标平台
*   Tycho 兼容的目标平台*仅*支持 p2 布局，因此不支持普通目录。我不确定制作这样的 p2 repo 的最佳方法是什么，正如我不久前问过的[那样](https://stackoverflow.com/questions/10191659/what-is-the-way-to-add-a-bundle-jar-to-a-p2-based-eclipse-target-platform)。没有任何答案，但我确实在那里解释了什么（某种）对我有用。

希望它有帮助，弗兰克

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T10:04:09.000

您的理解已经很好，但是缺少一个小而重要的部分：与 Maven 不同，Tycho 中**没有规范的默认存储库**（如“中央”）。您需要配置 Tycho 搜索解决 OSGi 依赖项的位置。

这个搜索范围在 Tycho中称为“[目标平台”。](http://wiki.eclipse.org/Tycho/Glossary#Target_Platform)有[不同的方法，因此在目标平台中包含工件](http://wiki.eclipse.org/Tycho/Target_Platform)；最简单的方法是在 POM 中使用附加`<layout>p2</layout>`属性配置包含依赖项的 p2 存储库（假设您知道包含依赖项的 p2 存储库。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T10:41:44.580

也可以通过额外的依赖配置将丢失的包直接添加到失败的包中：

```
<plugin>
<groupId>org.eclipse.tycho</groupId>
<artifactId>target-platform-configuration</artifactId>
<version>${tycho.version}</version>
<configuration>
  <dependency-resolution>
   <extraRequirements>
    <requirement>
     <type>eclipse-plugin</type>
     <id>org.eclipse.jface.text</id>
     <versionRange>0.0.0</versionRange>
   </requirement>
  </extraRequirements>
 </dependency-resolution>
</configuration>
</plugin> 
```

# jasper-reports - ireports 段落与字段中的数据合并

> ID：12167775
> 
> 赞同：1
> 
> 时间：2012-08-28T21:27:49.880
> 
> 标签：jasper-reports, ireport

我应该使用什么报表元素来插入一段在段落的某些部分具有数据字段的文本段落？我需要从 JasperReports 的 iReport 中完成一封邮件合并样式的信函。我尝试了 Text Field 元素，但出现以下错误：

```
"Dear "+$F{fname}+",

Thanks for your business.  We have applied your recent payment of "+$F{pmt}+" to your account.

Sincerely,
Customer Service" 
```

错误：

启动失败：calculator_PD30Letter_1346189028106_871925：171：除了''\ n''之外期待任何东西；无论如何都知道@第 171 行，第 75 列。1 个错误

另外，如果可以的话，我在哪里可以找到引用的这一行和列，以便我在将来更多地使用 Jasper 时可以自助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T03:59:23.573

你几乎拥有它。问题是文本字段似乎不喜欢 /n（返回/输入）。为了解决这个问题，我将字段的标记更改为 html 并使用 br 代替在 、 第一行和 . 并且，最后

# ruby-on-rails - 如何使方法出现在所有控制器操作之前

> ID：12167777
> 
> 赞同：3
> 
> 时间：2012-08-28T21:27:58.590
> 
> 标签：ruby-on-rails, controller, helpers

我的 Rails 应用程序中有几个控制器（UserController、PostController、SessionController 等...）

在所有每个动作之前，我想使用[gon gem 传递一个 json 对象。](https://github.com/gazay/gon)

我已将这行代码添加到我的应用程序助手中：

```
module ApplicationHelper

   ...

  def adding_gon
      gon.signed_in = signed_in?      
  end
end 
```

我还添加了可供所有控制器使用的 ApplicationHelper：

```
class ApplicationController < ActionController::Base
  include ApplicationHelper
end 
```

**问题是现在我需要去每个控制器并编写这行代码：**

```
before_filter :adding_gon 
```

将这行代码写入每个控制器是相当重复的。

**有没有办法让这个方法在所有动作之前执行？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T21:32:31.760

由于控制器通常继承自`ApplicationController`，因此您不必将 添加`before_filter`到每个控制器。只需在您`ApplicationController`的类定义中添加该行，过滤器就会在您所有子控制器的操作之前执行，除非您是从其他控制器继承的。

# r - 如何获得 R 中特定中断的强度？

> ID：12167778
> 
> 赞同：0
> 
> 时间：2012-08-28T21:28:00.893
> 
> 标签：r

我有以下代码：

```
myHist <- hist(myData) 
```

有了这个我可以运行：

```
myHist$breaks
myHist$intensities 
```

查看我所有的休息时间和强度，但我想知道是否有办法查看特定休息时间的强度？例如，上面的输出如下：

```
[1] 0 1 2 
```

和

```
[1] 0.258 0.068 0.114 
```

我怎么能得到2的强度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:32:06.173

使用`[`运算符对结果进行子集化。说明使用`iris`：

```
x <- hist(iris$Sepal.Length)

str(x)
List of 7
 $ breaks     : num [1:9] 4 4.5 5 5.5 6 6.5 7 7.5 8
 $ counts     : int [1:8] 5 27 27 30 31 18 6 6
 $ intensities: num [1:8] 0.0667 0.36 0.36 0.4 0.4133 ...
 $ density    : num [1:8] 0.0667 0.36 0.36 0.4 0.4133 ...
 $ mids       : num [1:8] 4.25 4.75 5.25 5.75 6.25 6.75 7.25 7.75
 $ xname      : chr "iris$Sepal.Length"
 $ equidist   : logi TRUE
 - attr(*, "class")= chr "histogram" 
```

现在提取第二个 bin 的数据：

```
x$breaks[2:3]
[1] 4.5 5.0

x$intensities[2]
[1] 0.36 
```

或者等效地，要选择与特定休息相对应的强度，您可以这样做：

```
x$intensities[x$breaks == 4.5]
[1] 0.36 
```

* * *

请注意，总是比 bin 多一个中断，即中断指示每个 bin 周围的范围。

# facebook-like - 面孔不会出现

> ID：12167779
> 
> 赞同：0
> 
> 时间：2012-08-28T21:28:05.960
> 
> 标签：facebook-like, facebook-likebox

当我访问以下页面 [http://developers.facebook.com/docs/reference/plugins/like-box/](http://developers.facebook.com/docs/reference/plugins/like-box/)

并输入[http://www.facebook.com/tommckinneyvocalstudios](http://www.facebook.com/tommckinneyvocalstudios)作为 facebook 页面 URL，没有显示喜欢该页面的用户的个人资料面孔。当我登录我的帐户时，它们确实出现了。

但是，当我输入以下 facebook 页面 URL /burtsbees 作为示例时，无需我登录或注销，个人资料面孔就可以正常显示。什么可能导致此问题？为什么这适用于一个 URL 而不是另一个？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:28:55.610

这似乎是一个错误。我会向错误跟踪器提交一张票 - [https://developers.facebook.com/bugs](https://developers.facebook.com/bugs)

# html - CSS 浮动问题，在 IE 中有效，在 Chrome/FF 中无效。我可能做错了什么

> ID：12167780
> 
> 赞同：4
> 
> 时间：2012-08-28T21:28:12.630
> 
> 标签：html, css

我对 CSS 不是很精通……而且还不知道所有主要的怪癖。也许有人可以帮助我。我已经设置了一个显示我的代码的图像、我的 DIV 图表以及它在 IE 与 Chrome/FF 中的外观示例

![图表](../Images/59168e32d5d1ed443ec6aaf10f37d2b7.png)

有人可以指导我采取正确的方法吗？

**小提琴**：http: [//jsfiddle.net/PhilippeVay/BuuuW/2/](http://jsfiddle.net/PhilippeVay/BuuuW/2/)

它在 IE 中运行良好，但在 Chrome 和 FF 中，其中一个图像正在转义其容器，并且我称之为“内容块”的“内容块”位于它应该在旁边的图像下方。尽管我的图表说没有 css，但每个组件都有一个 css 类。目前这些组件只有一些基本样式（填充、文本缩进等）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:34:41.393

使用[clearfix](http://www.webtoolkit.info/css-clearfix.html) hack `.cbContent`（包括 clearfix css 和 add class `.clearfix`）使框展开以适合左侧的图像。

编辑：另外，请确保您没有给相同的 div 一个固定的宽度（即 500 像素）和填充。这可能会使不同的浏览器由于它们解释盒子模型的方式而表现不同。有关这方面的更多信息以及很好的解决方案，请在此处阅读 Paul Irish 的博客文章：http: [//paulirish.com/2012/box-sizing-border-box-ftw/](http://paulirish.com/2012/box-sizing-border-box-ftw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T21:36:18.757

添加`overflow: hidden`到容器将避免左侧部分继续在右侧图像下方：

```
.cb {
    overflow: hidden;
} 
```

这将创建一个新的块格式化上下文，我不会向你解释，因为其他人比我做得更好:) [http://colinaarts.com/articles/the-magic-of-overflow-hidden/](http://colinaarts.com/articles/the-magic-of-overflow-hidden/)

编辑：没有看到 person.jpg 不在左侧的父级：请参阅 clearfix 方法的其他答案 :)

# jquery - 高图。浏览器兼容性问题

> ID：12167782
> 
> 赞同：1
> 
> 时间：2012-08-28T21:28:22.043
> 
> 标签：jquery, highcharts

我目前正在开发一个使用 Highcharts 来显示一些数据的网站。我一直在测试不同的选项，从服务器检索数据等，一切都很完美，但仅限于 chrome。

在 Firefox 上测试它时，我可以看到图表应该在哪里。我可以看到边框、标题、打印/导出按钮（所有这些都是由插件本身生成的），但看不到数据。我使用 firebug 检查它是否从服务器正确检索数据，一切似乎都很好。

在 IE6 上变得更糟，因为我什至看不到边框、标题等。

我在某处读到 Highcharts 在折线图和 jquery 1.7 方面存在问题，但我尝试使用不同类型的图表并将 jquery 版本更改为 1.8。它始终适用于 chrome，但不适用于 firefox/IE6

我没有粘贴任何代码，因为老实说我不知道​​问题出在哪里，我希望我只是一个我可以轻松解决的错误..提前致谢

编辑：

我检查了 jsFiddle 但我不知道如何在没有服务器端的情况下让它工作而不改变一些东西。这是一些代码。希望对您有所帮助：

```
HTML

<html class="gecko  win" xmlns="http://www.w3.org/1999/xhtml" dir="ltr" xml:lang="en" lang="en-US">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">
    <title>Portal de Conciliacion SMS Prepago</title>
    <script type="text/javascript" src="Plantilla/script.js"></script>
    <script type="text/javascript" src="scripts/jquery-1.8.0.min.js"></script>  
    <script src="Highcharts/js/highcharts.js"></script>
    <script src="Highcharts/js/modules/exporting.js"></script>
    <style type="text/css" title="currentStyle">@import "DataTables/media/css/demo_table.css";</style>
    <script type="text/javascript" language="javascript" src="DataTables/media/js/jquery.dataTables.js"></script>
    <link rel="stylesheet" href="Plantilla/style.css" type="text/css" media="screen">
    <!--[if IE 6]><link rel="stylesheet" href="Plantilla/style.ie6.css" type="text/css" media="screen" /><![endif]-->
    <!--[if IE 7]><link rel="stylesheet" href="Plantilla/style.ie7.css" type="text/css" media="screen" /><![endif]-->   
</head>
    <body>
        <div style="overflow: hidden">  
            <div id="diferencia" style="width: 48%; height: 200px; margin: 0 auto"></div>
            <br>
            <br>        
            <div id="ttdm" style="float: left; width: 48%; height: 200px; margin: 0 auto"></div>        
            <div id="rtbs" style="float: right; width: 48%; height: 200px; margin: 0 auto"></div>   
        </div>
    </body>
</html> 
```

（我还使用数据表插件来显示页面中的数据。我留下了那部分代码，但保留了包含以防它可能需要做的事情）

```
JS

function getUrlVars() {
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = value;
    });
    return vars;
}

$(function () {

    var fecha = getUrlVars()["fecha"];
    if (fecha) {
        console.log(fecha);
    }
    else {
        fecha = "";
        console.log("NO!!!");
    }

    var chart_diferencia;
    var chart_ttdm;
    var chart_rtbs;

    $(document).ready(function() {

        var options_diff = {

            chart: {
                renderTo: 'diferencia',
                borderColor: '#000000',
                borderWidth: 2,
                margin: [30, 30, 30, 30],
                type: 'area'
            },

            title: {
                text: 'Diferencia (TTDM vs RTBS)'
            },

            xAxis: {
                type: 'datetime',
                tickInterval: 3 * 24 * 3600 * 1000,
                tickWidth: 5,
                gridLineWidth: 1,
                labels: {
                    align: 'center',
                    formatter: function() {
                        return Highcharts.dateFormat('%e/%m', this.value);
                    }
                }           
            },

            yAxis: [{
                title: {
                    text: null
                },
                labels: {
                    align: 'center',
                    x: -12,
                    formatter: function() {
                        return Highcharts.numberFormat(this.value/1000, 0) + 'K';
                    }
                },
                showFirstLabel: false,
            }],

            legend: {
                enabled: false,
            },

            tooltip: {
                shared: true,
                crosshairs: true,               
            },

            series: [{
                name: 'Diferencia',
                color: '#FF8C00',
                lineWidth: 2,
                marker: {
                    radius: 3
                }
            }]
        };

        var options_ttdm = {

            chart: {
                renderTo: 'ttdm',
                borderColor: '#000000',
                borderWidth: 2,
                margin: [30, 30, 30, 30],
                type: 'area'
            },

            title: {
                text: 'TTDM (cursado)'
            },

            xAxis: {
                type: 'datetime',
                tickInterval: 3 * 24 * 3600 * 1000,
                tickWidth: 5,
                gridLineWidth: 1,
                labels: {
                    align: 'center',
                    formatter: function() {
                        return Highcharts.dateFormat('%e/%m', this.value);
                    }
                }           
            },

            yAxis: [{
                title: {
                    text: null
                },
                labels: {
                    align: 'center',
                    x: -12,
                    formatter: function() {
                        return Highcharts.numberFormat(this.value/1000000, 0) + 'M';
                    }
                },
                showFirstLabel: false,
            }],

            legend: {
                enabled: false,
            },

            tooltip: {
                shared: true,
                crosshairs: true,               
            },

            series: [{
                name: 'TTDM',
                lineWidth: 2,
                marker: {
                    radius: 3
                }
            }]
        };

        var options_rtbs = {

            chart: {
                renderTo: 'rtbs',
                borderColor: '#000000',
                borderWidth: 2,
                margin: [30, 30, 30, 30],
                type: 'area'
            },

            title: {
                text: 'RTBS (facturado)'
            },

            xAxis: {
                type: 'datetime',
                tickInterval: 3 * 24 * 3600 * 1000,
                tickWidth: 5,
                gridLineWidth: 1,
                labels: {
                    align: 'center',
                    formatter: function() {
                        return Highcharts.dateFormat('%e/%m', this.value);
                    }
                }           
            },

            yAxis: [{
                title: {
                    text: null
                },
                labels: {
                    align: 'center',
                    x: -12,
                    formatter: function() {
                        return Highcharts.numberFormat(this.value/1000000, 0) + 'M';
                    }
                },
                showFirstLabel: false,
            }],

            legend: {
                enabled: false,
            },

            tooltip: {
                shared: true,
                crosshairs: true,               
            },

            series: [{
                name: 'RTBS',
                color: '#8B0000',
                lineWidth: 2,
                marker: {
                    radius: 3
                }
            }]
        };

        // Load data asynchronously using jQuery. On success, add the data
        // to the options and initiate the chart.
        // This data is obtained by exporting a GA custom report to TSV.
        // http://api.jquery.com/jQuery.get/
        jQuery.get('Solicitudes/concil_TTDMvsRTBS.php', null, function(tsv, state, xhr) {
            var lines = [],
                listen = false,
                date,

                // set up the two data series
                diferencia = [],
                ttdm = [],
                rtbs = [];

            // inconsistency
            if (typeof tsv !== 'string') {
                tsv = xhr.responseText;
            }

            // split the data return into lines and parse them
            tsv = tsv.split(/\n/g);
            jQuery.each(tsv, function(i, line) {

                listen = true;
                //console.log(line);

                // all data lines start with a double quote
                if (line != "") {

                    line = line.split(',');

                    //console.log(line);

                    date = Date.parse(line[0] +' UTC');

                    diferencia.push([
                        date,
                        parseInt(line[1].replace(',', ''), 10)
                    ]);
                    ttdm.push([
                        date,
                        parseInt(line[2].replace(',', ''), 10)
                    ]);
                    rtbs.push([
                        date,
                        parseInt(line[3].replace(',', ''), 10)
                    ]);
                }
            });

            //console.log(allVisits);
            diferencia.reverse();
            ttdm.reverse();
            rtbs.reverse();

            options_diff.series[0].data = diferencia;
            options_ttdm.series[0].data = ttdm;
            options_rtbs.series[0].data = rtbs;
            //options.series[1].data = newVisitors;

            //console.log(allVisits);
            //console.log(newVisitors);

            Highcharts.setOptions({ 
                lang: { 
                    weekdays: ['Domingo', 'Lunes', 'Martes', 'Miercoles', 'Jueves', 'Viernes', 'Sabado']
                } 
            }); 
            Highcharts.setOptions({ 
                lang: { 
                    months: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre']
                } 
            }); 
            chart_diferencia = new Highcharts.Chart(options_diff);
            chart_ttdm = new Highcharts.Chart(options_ttdm);
            chart_rtbs = new Highcharts.Chart(options_rtbs);

            console.log("LISTO!");
        });

        $('#example').dataTable( {
            "sScrollY": "200px",
            "bPaginate": false,
            "bInfo": false,
            "bFilter": false,
            "bAutoWidth": true
        });
    });

}); 
```

这有点长，因为我为三个不同的图形设置了选项。获取部分有点混乱，因为我是通过修改插件附带的示例到达那里的，但是我已经检查了两个调试控制台（firebug 和 chrome），并且数据在两者上接收到的数据完全相同。

我在 highcharts 支持论坛上读到，图表选项中的逗号可能是它在 IE6 上不起作用的原因，明天在工作中检查。但正如我之前提到的，在 Firefox 上我可以看到背景、标题、打印/导出按钮，但没有任何数据..

highchart 版本是 2.2.5。我下载了2.3，但还没有尝试过。明天早上第一件事。

谢谢你的帮助！

# haskell - Haskell 中的“show”是如何实现的？

> ID：12167786
> 
> 赞同：2
> 
> 时间：2012-08-28T21:28:56.380
> 
> 标签：haskell, show, typeclass

我试图了解类型系统在 Haskell 中是如何工作的。

```
class (Show a) => MyShow a where 
    myShow :: a -> String

instance MyShow Integer where 
    myShow = show 

myshow :: (Show a) => a -> String
myshow = show

main  = do 
    putStrLn $ myshow 1
    putStrLn $ myShow (2 :: Integer) -- why do I need '::Integer' here? 
```

为什么“myshow 1”在没有类型的情况下工作，而“myshow 2”在没有明确类型的情况下会导致错误：

```
Ambiguous type variable `a0' in the constraints:
  (MyShow a0) arising from a use of `myShow'
              at nooverinst.hs:12:16-21
  (Num a0) arising from the literal `2' at nooverinst.hs:12:23
Probable fix: add a type signature that fixes these type variable(s)
In the second argument of `($)', namely `myShow 2'
In the expression: putStrLn $ myShow 2
In the expression:
  do { putStrLn $ myshow 1;
       putStrLn $ myShow 2 } 
```

同样奇怪的是，使用GHCI的时候没有报错：

```
*Main> myShow 2
"2" 
```

那么，在这种情况下，“myshow”和“myShow”有什么区别？它们都被定义为与“show”相同。我错过了什么？

更新：

答案摘要：此行为与违约有关。'show 1' 和 'myshow 1' 工作的事实是一个特例（参见[Haskell 报告中关于 defaulting](http://www.haskell.org/onlinereport/decls.html#sect4.3.4)的部分）。在源代码之上添加“default ()”会关闭默认设置并导致“myshow 1”处的代码中断，因为不再通过默认设置来解决类型歧义。所以，事实上，两个 putStrLn 行的末尾都应该有类型签名。

感谢所有回答的人！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T21:50:46.923

这与默认（Haskell 标准的较暗角落之一）有关，如[http://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-790004.3.4所述](http://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-790004.3.4)

简而言之，Haskell 以一种特殊的方式处理数值类，并且默认数值类会自动产生歧义，但前提*是*所涉及的其他约束是基类。从这个意义上说，`Show`也是特别的，`MyShow`你定义自己的方式不同。

在 GHCi 中，扩展的默认规则开始生效，略微放宽了限制。这些在[http://www.haskell.org/ghc/docs/latest/html/users_guide/interactive-evaluation.html#extended-default-rules中有描述](http://www.haskell.org/ghc/docs/latest/html/users_guide/interactive-evaluation.html#extended-default-rules)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T21:53:45.573

由于 1 可以具有任何 Num 类型，因此编译器必须使用某种方法来选择某种类型。这是由默认值处理的。但是默认只发生在 Prelude 类而不是你的类。查看 Haskell 报告中有关违约的部分，所有内容都已详细说明。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T21:38:59.930

有几种数字类型（ 的实例`Num`），当您编写 时，Haskell 不知道您指的是哪一种`2`。通常你可以摆脱它，因为 ghc/ghci 被编程为选择像 Integer 这样的默认类型来表达`2+2`. `myshow`因为 Haskell 正在使用与它自动选择的实例`Show`相关联的`Num`实例，而不是在`myShow`.

您自己的 typeclass`MyShow`与 没有任何关系`Num`，因此 Haskell 无法使用默认规则为您选择。[对不起，我以前的版本弄错了。]

这对于像等这样的数字文字来说只是一个奇怪的地方`3`，`6.7`因为它们被重载（可以表示不止一种类型的数据），所以你不会遇到像`Char`etc这样的其他类型的这个问题。

# c# - 覆盖c#中的泛型方法

> ID：12167789
> 
> 赞同：3
> 
> 时间：2012-08-28T21:29:16.543
> 
> 标签：c#, generics

我以为我不能覆盖派生类的泛型方法。

[http://my.safaribooksonline.com/book/programming/csharp/9780071741163/generics/ch18lev1sec13](http://my.safaribooksonline.com/book/programming/csharp/9780071741163/generics/ch18lev1sec13)

此链接中的代码运行良好。尽管实例类型为

使用基类而不是派生类型的实例。

现在我很困惑，因为我以前的问题[类型参数声明必须是标识符而不是类型](https://stackoverflow.com/questions/12157401/type-parameter-declaration-must-be-identifier-not-a-type)

是关于使用不起作用的基类型实例调用覆盖泛型方法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:01:27.977

问题是对方法签名和声明的简单混淆。链接的代码覆盖了返回 T 的方法签名，没有返回 T 的参数，没有参数。这很好，因为方法签名是相同的。

链接的问题尝试覆盖`Document<T, U>`with的返回`Document<type1, type2>`，由于泛型括号中不允许使用类型，该返回本身无效，但也无效，因为覆盖更改了方法签名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:36:30.020

*声明*方法时，需要使用类型参数。当您*调用*一个方法时，您使用类型参数或类型，这取决于您是否在进行通用编程。

有效声明：

```
void DoSomething<T>(T input)
{
 ...
} 
```

**无效**声明：

```
void DoSomething<int>(T input)
{
 ...
} 
```

有效调用：

```
DoSomething<int>(input); 
```

有效调用（如果`S`是先前在此范围内定义的类型参数）：

```
DoSomething<S>(input); 
```

有效调用（因为`T`可以从参数中推断出类型参数`input`）：

```
DoSomething(input); 
```

# c# - 文件夹关联或归属

> ID：12167791
> 
> 赞同：2
> 
> 时间：2012-08-28T21:29:24.097
> 
> 标签：c#, c++, file, associations, directory

当我在 Firefox 中保存网页时，我选择完全保存。保存的 html 文件与包含图像等的文件夹相关联。

当我去重命名 HTML 文件时，它告诉我这样做意味着该文件将不再“属于”包含图形的文件夹。

如果我删除包含图形的文件夹，HTML 文件也会被删除。（修改html文件目录也是一样）

有两种方法可以摧毁我发现的这个“属于”。1.重命名HTML文件并同意在弹出对话框时失去关联或2.删除文件并从回收站中仅取回文件（或仅文件夹）。

这个“属于”的协会是如何产生的？我可以在 c# 或 c++ 上使用我的代码手动完成吗？或者有没有这个图书馆？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T22:08:22.913

这称为“连接文件”。

[http://msdn.microsoft.com/en-us/library/bb776887%28VS.85%29.aspx#connected](http://msdn.microsoft.com/en-us/library/bb776887%28VS.85%29.aspx#connected)

如果您遵循正确的命名约定来创建文件和文件夹，它会自动发生。

[http://xona.com/2004/07/16.html](http://xona.com/2004/07/16.html)

它似乎是特定于 HTML 的，因此如果您尝试将此功能用于其他任何用途，您可能会运气不佳或需要将您自己的版本组合在一起。

# javascript - jquery .click IE8 中的类元素

> ID：12167792
> 
> 赞同：0
> 
> 时间：2012-08-28T21:29:26.760
> 
> 标签：javascript, jquery, internet-explorer-8

我在我的网站中添加 phpGrid 表。我希望网格默认关闭，但查阅文档我找不到任何参数来在初始化时设置它。

通过单击具有“ui-jqgrid-titlebar-close”类的标签手动关闭网格。使用页面底部的以下代码，我能够关闭所有网格。

```
$(function() {
    // set the data-grids to appear closed by default
    $('.ui-jqgrid-titlebar-close').trigger('click');
    ...
} ); 
```

这适用于 Chrome、Firefox 和 IE9。不幸的是，这个网站是为内部访问而设计的，IE9 回退到 Intranet 网站的“IE8 标准模式”。在 IE8 中，点击事件无效。

任何想法如何在 IE8 中关闭我的 phpGrids？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T16:27:30.833

马特，

在 IE 默认为任何 Intranet 站点的兼容模式之前，我也遇到过类似的问题，这令人沮丧。但是，您有几个选择。

如果您有权访问 Web 服务器，则可以在站点属性上设置元标记，我是在 IIS 上完成的，不确定其他 Web 服务器。但基本上您需要添加一个自定义 HTTP 标头，其中名称为 X-UA-Compatible 且值为 IE=9（或 edge，如果您愿意）

另一种选择是包含一个 IE [shim（或 shiv）](http://code.google.com/p/ie7-js/)

所以使用条件注释你可以做到这一点

```
<!--[if lt IE 9]>
    <script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script>
<![endif]--> 
```

此脚本增强了您的浏览器功能，使其表现得像 IE9

# javascript - toLocaleString() 是什么？

> ID：12167796
> 
> 赞同：5
> 
> 时间：2012-08-28T21:29:43.073
> 
> 标签：javascript, google-chrome

根据[这个 MDN page](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toLocaleString)，`toLocaleString`是关于转换日期。但是，Chrome 不仅仅在字符串上公开了该功能。例如：

```
a = function () {};
a.toLocaleString();  // "function () {}" 
```

是什么`toLocaleString`？为什么它会暴露在例如空函数上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T21:32:48.590

它也[可以](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/toLocaleString)在 上使用`Object.prototype`，因此几乎可以间接使用。

对于 Chrome，您可以查看[V8 的 implementation](http://code.google.com/p/v8/source/browse/trunk/src/v8natives.js#233)，它并没有做任何花哨的事情：

```
function ObjectToLocaleString() {
  if (IS_NULL_OR_UNDEFINED(this) && !IS_UNDETECTABLE(this)) {
    throw MakeTypeError("called_on_null_or_undefined",
                        ["Object.prototype.toLocaleString"]);
  }
  return this.toString();  // <-- just calls toString
} 
```

# javascript - 使用 eval() 设置全局变量

> ID：12167800
> 
> 赞同：5
> 
> 时间：2012-08-28T21:30:04.817
> 
> 标签：javascript, ajax, eval

我使用设置全局变量的代码`eval`不起作用。就好像根本没有调用分配，但没有发生脚本错误。

```
<script type="text/javascript">

    $(function() {

        setTimeout(function() {
            eval('var x = 1;');
            alert(x);
        }, 0);
    });
</script>

<div onclick="alert(x);">Click to see 'x'</div> 
```

当页面加载时，警报会显示我的期望；它确认 x = 1。但在那之后，我单击 div 并得到一个`x`未定义的 javascript 错误。如何`eval`正确添加此变量？

背景：上面的代码是我正在处理的一个项目的最小复制示例，我们必须在 AJAX 响应期间执行 javascript 代码。`eval`大部分时间都可以正常工作，但这会导致问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T00:46:01.400

您可以使用从全局范围`window.eval()`运行。`eval()`这将分配`var`为 的变量`window`，这就是全局变量：附加到 的变量`window`。

......但你真的不应该。`eval()`被沙盒化是有原因的。

除非你真的知道你在做什么，并且相信你所接受的一切，否则那是不可能的`XMLHttpRequest`。这是鸡/蛋的事情之一：如果您足够信任代码来执行它，那么它应该被编程得足够好，以便在全局变量`window.`开头加上前缀；因此，您不需要使用`window.eval()`.

Besides, unless you are just trying to avoid async headaches by using the more-manageable `XMLHttpRequest` (there's a first time for everything...), you really should just create a script tag, assign it's source, and append it as a child to the head or body tag. Dynamically appending script tags is even faster than using XHR, especially for big scripts.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T21:32:34.063

Eval 在本地运行，您正在设置一个局部变量。

要设置全局变量，请删除`var`;

```
<script type="text/javascript">

    $(function() {

        setTimeout(function() {
            eval('x = 1;');
            alert(x);
        }, 0);
    });
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T21:32:47.413

我不建议设置全局变量，但如果你*必须*这样做，请使用该`window`对象：

```
window['x'] = 1; 
```

# xml - Eclipse XML 格式化程序损坏

> ID：12167806
> 
> 赞同：1
> 
> 时间：2012-08-28T21:30:33.977
> 
> 标签：xml, eclipse, formatting

当我想格式化我的 pom.xml 时，会发生以下情况：

从

```
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.10</version>
    <scope>test</scope>
</dependency> 
```

到

```
 <dependency>

            <groupId>
junit
            </groupId>

            <artifactId>
junit
            </artifactId>

            <version>
4.10
            </version>

            <scope>
test
            </scope>
        </dependency> 
```

在涉及 Eclipse 的 XML 编辑器的任何地方，我都尝试恢复默认设置，尽管我没有故意更改任何内容。知道在哪里直截了当吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T18:12:38.927

转到*Window > Preferences*然后从左侧导航中选择*General > Editors > File Association*，选择文件类型*.xml*并在下面的窗口中选择 XML 编辑器并单击*Default*。

![文件关联首选项屏幕截图](../Images/83141508325f372b25d1dddb24985b49.png)

# .net-4.0 - MS Build 将行写入文件

> ID：12167807
> 
> 赞同：0
> 
> 时间：2012-08-28T21:30:53.033
> 
> 标签：.net-4.0, msbuild, msbuild-task, msbuild-4.0

什么是 MS Build 中的 Write Lines to File 任务。我正在尝试为我继承的网站设置部署。我对 MS Build 内部结构不是很熟悉。我什至不确定这是否是所有项目的共同点，或者是否为该项目专门启用了某些东西。它是什么？

[包] CallTarget (2s)
[17:10:43][CallTarget] PackageUsingManifest (2s)
[17:10:45][PackageUsingManifest] CallTarget
[17:10:45][CallTarget] GenerateSampleDeployScript
[17:10:45] [GenerateSampleDeployScript] WriteLinesToFile
[17:10:45][WriteLinesToFile] C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(3025, 23)：错误 MSB4064 ：“WriteLinesToFile”任务不支持“Encoding”参数。验证该参数是否存在于任务中，并且它是一个可设置的公共实例属性。
[17:10:45][WriteLinesToFile] C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(3023, 5)：错误 MSB4063：“WriteLinesToFile " 无法使用其输入参数初始化任务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T07:25:34.363

看起来您正在为 .Net 2.0 或至少使用 2.0 版本的 buildtools 构建。您的脚本取决于 4.0 msbuild 工具版本。

只有 4.0 版本的[WriteLinesToFile](http://msdn.microsoft.com/en-us/library/ms164305%28v=vs.100%29)具有编码属性。

在 Visual Studio 中转到项目属性（菜单项目 > 项目名称属性..），在应用程序选项卡上检查 targetFramework 为 4.0

如果您从命令行[构建，请](http://msdn.microsoft.com/en-us/library/bb383985.aspx)添加 /tv:4.0 设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-16T16:30:05.140

Rene 的回答很好——它今天救了我的命 :)

在项目标题中强制工具版本也有效：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003"
  ToolsVersion="12.0"> 
```

请参阅：[https ://msdn.microsoft.com/en-us/library/bb383985.aspx](https://msdn.microsoft.com/en-us/library/bb383985.aspx)

# mysql - 返回 SQL 中具有“MAX”值的所有行？

> ID：12167809
> 
> 赞同：17
> 
> 时间：2012-08-28T21:31:14.763
> 
> 标签：mysql, max

我有下表：

表：分数 我有什么：

```
+----+-------+
| 身份证 | 价值 |
+----+-------+
| 1 | 300 |
| 2 | 300 |
| 3 | 300 |
| 4 | 100 |
| 5 | 200 |
+----+-------+

```

我需要的：

```
+----+-------+
| 身份证 | 价值 |
+----+-------+
| 1 | 300 |
| 2 | 300 |
| 3 | 300 |
--------------

```

我将如何在 SQL 中获取“所有”最高分 id 1、2、3。我开始使用 MAX（在 mysql 中），但只返回一行。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-28T21:33:50.160

```
SELECT Id, value
    FROM Scores
    WHERE value = (SELECT MAX(value) FROM Scores); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-28T21:38:49.333

使用快速变量：

```
SELECT @max := max(value) from scores;
SELECT id, value FROM scores WHERE value = @max; 
```

否则：（我通常坚决反对子查询，但这个是不费吹灰之力的。

```
SELECT id, value FROM
scores
INNER JOIN (Select max(value) as value from scores) as max USING(value) 
```

请注意，这些都比更基本的 `WHERE value = ( *subquery* ) 更可取，因为对于它们中的每一个，查找 MAX 值的查询只执行一次（这绝对保证是我更喜欢基于变量的解决方案的原因） . 使用子查询版本（在 WHERE 中，而不是在 JOIN 中），该查询可能*每行*执行一次。

我用 做了一些查询分析`EXPLAIN EXTENDED`，INNER JOIN 方法可能是所有建议中最简洁和最优的（假设你在使用 MySQL 变量的环境太麻烦；我仍然认为它是最干净的）。

# 表现：

由于发生了一些有趣的讨论，我决定真正深入研究并评估这些事情（我知道有点矫枉过正，但在更大的问题上有趣且有用的知识）。检测全表扫描有一些分析技巧；添加`WHERE (@foo := @foo + 1)`到有问题的子查询中，然后将 @foo 设置为 0，运行查询并查看 @foo 是什么。这不是最终的全部查询收费指标，但它可以提供有关您要求 MySQL 评估每一行的频率的信息。以下是您的样本数据的“分数”（越低越好）：

*   @ctrahey（两者）：5（扫描一次以找到 MAX）
*   @Joe Stefanelli：25（*每行*扫描一次（5 * 5））
*   @Jocelyn：17（我无法解释这个，但我很想知道为什么:-)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-28T21:35:05.513

在 MySQL 中，您需要使用连接或子查询来执行此操作：

```
select *
from t
where value = (select max(value) from t) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-28T21:33:09.803

使用此查询：

```
SELECT id, value
FROM Scores
WHERE value>=ALL(SELECT value FROM Scores) 
```

文档：[带有 ALL 的子查询](http://dev.mysql.com/doc/refman/5.5/en/all-subqueries.html)

[优化子查询](http://dev.mysql.com/doc/refman/5.1/en/optimizing-subqueries.html)：

> MySQL 使用涉及 MIN() 或 MAX() 的表达式来增强以下形式的表达式，除非涉及 NULL 值或空集：
> 
> ```
> value {ALL|ANY|SOME} {> | < | >= | <=} (uncorrelated subquery) 
> ```
> 
> 例如，这个 WHERE 子句：
> 
> ```
> WHERE 5 > ALL (SELECT x FROM t) 
> ```
> 
> 优化器可能会这样处理：
> 
> ```
> WHERE 5 > (SELECT MAX(x) FROM t) 
> ```

# mysql - 使用 PDO 将变量绑定到 LIMIT

> ID：12167810
> 
> 赞同：2
> 
> 时间：2012-08-28T21:31:16.793
> 
> 标签：mysql, pdo

我试图让我的 LIMIT 接受变量 $limit，但它不喜欢我的绑定。这是因为其他 $params 是数组（字符串）而不是整数吗？有没有办法将 $limit 指定为整数？

```
public function getPhotos($limit, $status, $type, $session, $name, $inc_suite = NULL) {
        $params = array();
        $sql = 'SELECT * FROM images WHERE 1=1';

        /**
         * Filter by status
         */
        if (!is_null($status) and $status != 'all') {
            $sql .=' AND status = :status';
            $params[':status']= $status;
        }

        /**
         * Filter by type
         */
        if ($type !="null") {
            $sql .=' AND type = :type';
            $params[':type'] = $type;
        }

        /**
         * Filter by session
         */
        if ($session !="null") {
            $sql .=' AND session = :session';
            $params[':session'] = $session;
        }

        /**
         * Filter by handle
         */
        if ($name !="") {
            $sql .=' AND handle = :name';
            $params[':name'] = $name;
        }

        /**
         * Block Suite photos
         */
        if($inc_suite != 1) {
            $sql .= " AND type != 'suite'";
        }

        /**
         * Set order and limit the number of photos
         */
        $sql .=' ORDER BY created DESC LIMIT :limit';
        $params[':limit'] = (int)$limit;

        try {
            /**
             * Prepare the query
             */
            $stmt = $this->pdo->prepare($sql);

            /**
             * Fire the lasers
             */
            $stmt->execute($params);

            /**
             * Grab results
             */
            $result = $stmt->fetchAll();
            return $result;

        } catch(PDOException $e) {
            $errors['database'] = $e->getMessage();
            return FALSE;
        }

    } 
```

# image - 数据如何存储在图像文件中

> ID：12167813
> 
> 赞同：16
> 
> 时间：2012-08-28T21:31:44.450
> 
> 标签：image

我对图像数据的存储方式感兴趣。例如，可以在 Windows 中提取图像并获取有关图像的信息（使用的相机、日期等）。

在一般层面上（我确定 png、jpeg 等不同）图像是否具有某种类型的标题部分，其中定义了属性，并且可能有一个通过多维数组指定特定像素颜色的正文部分？

如果您可以查看类似于网页的源，图像源会是什么样子？如果我在计算机上打开 JPEG，前几行看起来像 XML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-16T11:02:40.260

您看到的 XML 是[可交换图像文件格式（或 Exif）](https://www.media.mit.edu/pia/Research/deepview/exif.html)的一部分。如果您在 Hex 编辑器中查看该文件，您应该会看到如下标记：

> 每个 JPEG 文件都从二进制值“0xFFD8”开始，以二进制值“0xFFD9”结束。JPEG数据中有几个二进制的0xFFXX数据，称为“Marker”，表示JPEG信息数据的周期。0xFFD8 表示 SOI（图像开始），0xFFD9 表示 EOI（图像结束）。

PNG 文件总是以[这八个字节](http://www.libpng.org/pub/png/spec/1.1/PNG-Rationale.html#R.PNG-file-signature)开头：`0x89 0x50 0x4E 0x47 0x0D 0x0A 0x1A 0x0A`. 然后，它具有与 JPEG 类似的机制，即使用字节标记来指示数据部分。[在此处](https://www.w3.org/TR/PNG/)阅读完整的规范。

# iphone - TabBarImage 未正确调整大小

> ID：12167817
> 
> 赞同：1
> 
> 时间：2012-08-28T21:32:00.083
> 
> 标签：iphone, objective-c, ios, ipad, uitabbaritem

我正在尝试将 60x60 像素的图像分配给`tabBarItem.image`：

```
self.tabBarItem.image = [UIImage imageNamed:@"tab_settings@2x.png"]; 
```

我在 HIG 中读到，我应该为 Retina 显示屏放置 60x60 像素的图像。但我得到的是尺寸不正确的图像：

![在此处输入图像描述](../Images/34d4f6306f82e333e4ab73c960e13d90.png)

如果我把它设为 30x30px，它看起来也很糟糕（不像 Retina）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T21:40:57.617

您无需指定使用该`@2x.png`图像。对于您的项目，只需在 Xcode 中添加这两个图像：

> tab_settings@2x.png (60x60 像素)
> 
> tab_settings.png（30x30 像素）

然后在你的代码中使用这个：

```
self.tabBarItem.image = [UIImage imageNamed:@"tab_settings"]; 
```

iOS 将为您确定是使用 30x30 还是 60x60 的图像。这是Apple的一个非常好的设计。

# objective-c - NSDateFormatter 拼图！这是新的山狮虫吗？

> ID：12167829
> 
> 赞同：6
> 
> 时间：2012-08-28T21:32:58.017
> 
> 标签：objective-c, macos, cocoa, nsdateformatter

我相信我可能在 中发现了一个错误`NSDateFormatter`，我不确定这是否已本地化为在系统偏好设置中指定了巴西时区。

一个完整的项目在这里：[http ://www.idanfe.com/dl/nsDateFormatterPuzzle.zip](http://www.idanfe.com/dl/nsDateFormatterPuzzle.zip)

代码的相关摘录如下所示：

```
NSArray *unformattedDatesArray = [[NSArray alloc] initWithObjects:@"2011-09-18",
     @"2011-10-16",@"2011-11-13",@"2011-12-11",@"2012-01-08",@"2012-02-05", nil];

NSString *resultedString = @"";
int ii = 0;
NSUInteger items = [unformattedDatesArray count];
for (ii=0; ii<items; ii++) {
    NSLog(@"original item # %d = %@",ii,[unformattedDatesArray objectAtIndex:ii]);
    resultedString = [resultedString stringByAppendingString:@"original item # "];
    resultedString = [resultedString stringByAppendingString:[NSString stringWithFormat: @"%d = ",ii]];
    resultedString = [resultedString stringByAppendingString:[unformattedDatesArray objectAtIndex:ii]];
    resultedString = [resultedString stringByAppendingString:[NSString stringWithFormat:@"\n"]];
}
NSDateFormatter *originalFormat = [[NSDateFormatter alloc] init];
[originalFormat setDateFormat:@"yyyy-MM-dd"]; // hh:mm:ss
NSDateFormatter *newFormat = [[NSDateFormatter alloc] init];
[newFormat setDateFormat:@"dd/MM/yyyy"]; // hh:mm:ss
NSString *formattedDate;
for (ii=0; ii<items; ii++) {
    formattedDate = [newFormat stringFromDate:[originalFormat
                                               dateFromString:[unformattedDatesArray objectAtIndex:ii]]];
    NSLog(@"formatted item # %d = %@",ii,formattedDate);
    resultedString = [resultedString stringByAppendingString:@"formatted item # "];
    resultedString = [resultedString stringByAppendingString:[NSString stringWithFormat: @"%d = ",ii]];
    resultedString = [resultedString stringByAppendingString:(formattedDate == nil ? @"ERROR" : formattedDate)];
    resultedString = [resultedString stringByAppendingString:[NSString stringWithFormat:@"\n"]];
}
[resultingStringTextView insertText:resultedString]; 
```

基本上，我从`NSString`代表日期的 5 s 数组开始。我正在创建 2 `NSDateFormatter`s:`originalFormat`用于将日期的原始字符串表示形式转换为实际的`NSDate`；`newFormat`用于创建使用日期格式化程序`NSDate`生成的新的所需字符串表示形式。`originalFormat`

这是我的结果日志：

```
2012-08-26 nsDateFormatterPuzzle[3261:303] original item # 0 = 2011-09-18
2012-08-26 nsDateFormatterPuzzle[3261:303] original item # 1 = 2011-10-16
2012-08-26 nsDateFormatterPuzzle[3261:303] original item # 2 = 2011-11-13
2012-08-26 nsDateFormatterPuzzle[3261:303] original item # 3 = 2011-12-11
2012-08-26 nsDateFormatterPuzzle[3261:303] original item # 4 = 2012-01-08
2012-08-26 nsDateFormatterPuzzle[3261:303] original item # 5 = 2012-02-05
2012-08-26 nsDateFormatterPuzzle[3261:303] formatted item # 0 = 18/09/2011
2012-08-26 nsDateFormatterPuzzle[3261:303] formatted item # 1 = (null)
2012-08-26 nsDateFormatterPuzzle[3261:303] formatted item # 2 = 13/11/2011
2012-08-26 nsDateFormatterPuzzle[3261:303] formatted item # 3 = 11/12/2011
2012-08-26 nsDateFormatterPuzzle[3261:303] formatted item # 4 = 08/01/2012
2012-08-26 nsDateFormatterPuzzle[3261:303] formatted item # 5 = 05/02/2012 
```

请注意，如果您转到系统偏好设置 --> 日期和时间 --> 时区

并将您的时区更改为里约热内卢，您将获得相同的结果。

================================= 尝试解决方法=============== =====================

我正在尝试解决这个错误，同时 Apple 没有修复它。

我有两个问题，一个是从这个日期开始渲染一个 PDF 文件，我想我已经通过以下方式解决了这个问题：

```
 if (formated_issue_date == NULL) {
            formated_issue_date = [BHDateFormatter bhDateFormat:data_emissao];

} 
```

使用此处理程序：

```
+(NSString*)bhDateFormat:(NSString *)inputedDate{

    NSString *formattedDate = @"";

    NSRange range82 = NSMakeRange (8, 2);
    NSRange range52 = NSMakeRange (5, 2);
    NSRange range04 = NSMakeRange (0, 4);

    NSString *firstBlock = [inputedDate substringWithRange:range82];
    NSString *secondBlock = [inputedDate substringWithRange:range52];
    NSString *thirdBlock = [inputedDate substringWithRange:range04];

    formattedDate = [formattedDate stringByAppendingString:firstBlock];
    formattedDate = [formattedDate stringByAppendingString:@"/"];
    formattedDate = [formattedDate stringByAppendingString:secondBlock];
    formattedDate = [formattedDate stringByAppendingString:@"/"];
    formattedDate = [formattedDate stringByAppendingString:thirdBlock];

    return formattedDate;
} 
```

第二个问题是发票日期被加载到包含日期格式化程序的表格视图中，并且更改它会导致表格的排序丢失。

使用与我的处理程序相同的原理，并坚持传递 16/10/2011 日期会导致表格视图出现错误，例如：-[__NSCFString timeIntervalSinceReferenceDate]: unrecognized selector sent to instance 0x40265f3a0

这是迄今为止我发现的最好的代码：

```
if (formatterDate == NULL) {
                        NSLog (@"outprintString '%@' = NULL", dateString);
                        NSString *newDate = [BHDateFormatter bhDateFormat:dateString];
                        if ([newDate isEqualToString:@"16/10/2011"]) {
                            formatterDate = [inputFormatter dateFromString:@"2011-10-17"];
                            NSLog(@"formatterDate = %@", formatterDate);
                            NSAlert *alert = [[[NSAlert alloc]init] autorelease];
                            [alert setMessageText:[NSString stringWithFormat:NSLocalizedString(@"Mountain Lion Bug: I have found a date \"16/10/2011\" in your invoice # %@ issued by %@, I must rename the date in your table view to \"17/10/2011\", the date on the rendered invoice file will be display correctly. I apologize for this, but it is an operating system level bug that has to be fixed by Apple.","A comment here"),invoiceNumber, emitente]];
                            [alert runModal];
                        }
                    } 
```

你能评论一下吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T22:30:41.583

我相信你是对的——这是一个错误，你应该报告它。有趣的是，如果您将时区设置为与 Rio 位于同一时区的 Nuuk-Greenland，则它可以正常工作。此外，“2011-10-15”和“2011-10-17”在里约时区可以正常工作，但“2011-10-16”不能正常工作，这真的很奇怪。

这是我用来测试的简化代码：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {

    NSArray *unformattedDatesArray = [[NSArray alloc] initWithObjects:@"2011-09-18",@"2011-10-16",@"2011-11-13",@"2011-12-11",@"2012-01-08",@"2012-02-05", nil];

    NSDateFormatter *originalFormat = [[NSDateFormatter alloc] init];
    [originalFormat setDateFormat:@"yyyy-MM-dd"]; // hh:mm:ss
    NSDateFormatter *newFormat = [[NSDateFormatter alloc] init];
    [newFormat setDateFormat:@"dd/MM/yyyy"]; // hh:mm:ss

    for (NSString * aString in unformattedDatesArray) {
        NSString *formattedDate = [newFormat stringFromDate:[originalFormat dateFromString:aString]];
        NSLog(@"Original date string is: %@  formatted date as string is: %@",aString, formattedDate);
    }
} 
```

补充资料：

为了找到这个问题的根源，我使用以下代码遍历了 2011 年的所有日期：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {

    NSDateFormatter *originalFormat = [[NSDateFormatter alloc] init];
    [originalFormat setDateFormat:@"yyyy-MM-dd"]; // hh:mm:ss
    NSDateFormatter *newFormat = [[NSDateFormatter alloc] init];
    [newFormat setDateFormat:@"dd/MM/yyyy"]; // hh:mm:ss

    NSDate *start = [originalFormat dateFromString:@"2011-01-01"];
    NSDate *newDate;
    for (int i=0; i<365; i++) {
        newDate = [start dateByAddingTimeInterval:86400 * i];
        NSString *formattedDate = [newFormat stringFromDate:newDate];
        NSLog(@"formatted date as string is: %@",formattedDate);
    }
} 
```

当您查看日期字符串时，您会发现有 2 个 2 月 19 日而没有 10 月 16 日，这就是该日期为 null 的原因（尽管如果您自己记录日期对象，则可以正确获取所有日期）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-24T00:21:34.203

这不是一个错误。10 月 16 日是当年巴西进入南半球夏令时的那一天，您建议的时间（假设为午夜，因为您没有给出明确的时间）是在缺失的一小时内。这是一个不存在的时间。

# javascript - 从主干集合中过滤模型，然后为这些模型设置属性

> ID：12167831
> 
> 赞同：0
> 
> 时间：2012-08-28T21:33:02.000
> 
> 标签：javascript, backbone.js, coffeescript, underscore.js

`this.model.collection.where({selected: true})`返回一个模型数组

然后我想将`selected`返回的模型的属性设置为 false。

我怎样才能做到这一点？

`@model.collection.where({selected: true})`（咖啡稿）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:39:17.210

你可以这样做`.each`

```
_.each(this.model.collection.where({selected: true}), function(m){
    m.set('selected', false);
}); 
```

由于[`where`返回匹配对象的数组](http://documentcloud.github.com/backbone/#Collection-where)，因此您必须将该数组传递给下划线的第一个参数`each`。

你也可以这样做`map`：

```
this.model.collection.map(function(m){if(m.get('selected'){m.set('selected', false);}}); 
```

由于`map`获取集合（或数组）中的每个元素并将方法应用于它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T22:02:58.537

一个简单的循环有什么问题？

```
m.set('selected', false) for m in @model.collection.where(selected: true) 
```

甚至：

```
for m in @model.collection.where(selected: true)
    m.set('selected', false) 
```

下划线很好，但这并不意味着你必须在所有事情上都使用它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-28T21:40:39.257

```
this.model.collection.where({selected: true}).each(function(model){
    model.set({selected:false});
} 
```

# iphone - 如何在没有内存泄漏的情况下在 ARC 中的 UIView 之间切换？

> ID：12167832
> 
> 赞同：-1
> 
> 时间：2012-08-28T21:33:08.993
> 
> 标签：iphone, ios, ipad, uiview

我使用带有 ARC 的 xcode 4.4。我在 ViewController.m 中动态创建了 UIView：

```
UIView* myviews[10]; 
```

然后在 - (void)viewDidLoad 函数中，我用我需要的图片填充每一个

```
myviews[viewIndex] = [[UIView alloc]initWithFrame:myrec];
UIImage *testImg;
UIImageView * testImgView = [[UIImageView alloc]init];
testImg = [UIImage imageNamed:[NSString stringWithFormat:@"imgarray%d.png", viewIndex];
[testImgView setImage:testImg];
[myviews[viewIndex] addsubView:testImgView];
viewindex++; 
```

所以一切似乎都很好，当我想从一个视图跳到另一个视图时，我接下来使用两个按钮：

```
[self.view addSubview:views[viewIndex]];
CATransition *animation = [CATransition animation];
[animation setDelegate:self];
[animation setDuration:1.0f];
[animation setType:@"rippleEffect"];
[animation setSubtype:kCATransitionFromTop];
//[animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
[self.view.layer addAnimation:animation forKey:@"transitionViewAnimation"]; 
```

似乎没什么不好，但是当我在视图之间切换时，内存消耗会以巨大的速度增长。然后我会收到内存不足的警告，或者有时应用程序会崩溃。

我尝试使用 UIViewController 数组并在控制器之间切换：没有任何变化，内存不足警告是我最终得到的。

也许我需要以某种方式清理内存？但是怎么做？ARC不允许使用release等..

最后我在添加新子视图之前尝试过（对不起，也许不是很专业）是这个

```
NSArray *viewsToRemove = [self.view subviews];
                    for (UIView *views in viewsToRemove) {
                        [views removeFromSuperview];
                    } 
```

但这也无济于事。

编辑：我需要澄清一件事：在应用程序执行期间我需要每个 UIView，这意味着我不能在应用程序退出之前释放它。

EDIT2：代码经过编辑，看起来更像真实的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:41:45.930

为什么不使用 NSMutableArray 来存储视图？它更容易，我敢说，更安全。

而且，当您从超级视图中删除它们时，也将它们从数组中删除

作为一般规则，请记住将其存储到数组中会保留它，删除它会释放它，因此如果将其存储到数组中，然后将其添加为子视图，它将具有保留计数 +2。然后，您将其从 superview 中删除（保留计数 -1），但它仍然是正数，因为它仍在您的数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:34:16.343

一些想法：

首先，复制的代码中有问题，因为您从未创建 testImgView。代替

```
testImgView.image = testImg; 
```

你需要

```
testImgView = [UIImageView viewWithImage:image]; 
```

其次，您不需要进入图层动画。 [请参阅此代码...](http://www.cocoaintheshell.com/2010/11/ripple-effect-ios/)

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:1.0];
[UIView setAnimationTransition: 110 forView:view cache:NO];  //110 for ripple effect
[UIView commitAnimations]; 
```

第三，您可以尝试将所有视图添加到带有标签的 viewDidLoad 中，然后设置为可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T01:16:39.667

如果每次发生过渡时情况都变得更糟，您可以尝试在从超级视图中删除时从图层中删除动画。

```
NSArray *viewsToRemove = [self.view subviews];
                    for (UIView *views in viewsToRemove) {
                        [views removeFromSuperview];
                        [views.layer removeAllAnimations];
                    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-28T21:51:32.763

当您使用这样的数组结构（我假设为 ivar）时，ARC 并不真正知道当包含对象的结构消失时它必须释放您的视图。当你清理时，比如在你的`-dealloc`方法中，你只需要遍历数组并将每个元素设置为 nil，然后 ARC 就会知道释放该视图是可以的。另一种选择是使用`Foundation`集合类型，例如 an`NSMutableArray`来保存您的视图，这将使您不必记住清理它们。

例如：

```
- (void)dealloc
{
  for( int i = 0; i < 10; i++ )
    myviews[i] = nil;
} 
```

如果在应用程序的生命周期中，您将新视图分配到此数组中，没关系，ARC 会做正确的事情。只要确保您将它们排除在外`-dealloc`。如果您知道以相同的方式完成了它们，也可以提前释放它们，即遍历数组并将 nil 分配给每个元素。

# c# - 通过数据绑定和值转换器实现两个控件的可见性

> ID：12167834
> 
> 赞同：0
> 
> 时间：2012-08-28T21:33:16.760
> 
> 标签：c#, wpf, data-binding, visibility, ivalueconverter

我在数据模板中包含两个控件。控件#1 是称为“TXTBLOCK”的文本块。控件 #2 是一个名为“TXTBOX”的文本框：

TXTBLOCK 使用转换器将 Visibility 设置为 TextBox Visibility 以提供相反的值。

例子：

```
<TextBlock Name="TXTBLOCK" Visibility="{Binding ElementName=**TXTBOX**, Path=Visibility, Converter={StaticResource toggleVisConverter}}" />

<TextBox Name="TXTBOX" Visibility="{Binding ElementName=**TXTBLOCK**, Path=Visibility, Converter={StaticResource toggleVisConverter}}" /> 
```

转换器是：

```
 if (targetType == typeof(Visibility))
        {
            Visibility vis = (Visibility)value;
            if (vis == Visibility.Collapsed)
            {
                return Visibility.Visible;
            }
            else
            {
                return Visibility.Collapsed;
            }
            //var vis == Visibility.Collapsed ? Visibility.Visible : Visibility.Collapsed;
        }

        //return vis;
        throw new InvalidOperationException("Value must be of type 'Visibility'."); 
```

现在......对我来说这应该很简单。更改一个的可见性会将另一个的可见性设置为 false。

不是这样的...

第一次工作，然后转换器停止被调用。

即使我在后面的代码中明确声明：“TXTBOX.Visibility = Visibility.Hidden”，转换器也永远不会被调用。

是什么赋予了？我错过了什么？

**这是我在 SO 上的第一篇文章......如果我错过了什么或需要提供更多信息，请原谅我。我很乐意这样做**

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:09:53.890

似乎 WPF 有检测和避免数据绑定中堆栈溢出的方法。 [我知道一个](https://stackoverflow.com/a/5797150/)，看来你找到了另一个。

当您更改其中一个控件的可见性时，会发生以下情况（至少在理论上）：

*   您更改 TextBlock 的可见性（例如），
*   这会导致 TextBox 的可见性发生变化，
*   这会导致 TextBlock 的可见性发生另一个变化，
*   这会导致 TextBlock 的可见性再次发生变化，再次使用第一个绑定，
*   ...

如果不是 WPF 自动检测此类情况，这将永远持续下去，很可能会导致堆栈溢出。在这种情况下，一旦它检测到它可能会导致堆栈溢出，它似乎就会停止侦听您创建的绑定。

我没有运行你的代码，但我怀疑 WPF 也没有通知你。我猜没有异常、警告，甚至没有写入输出窗口的调试行。

看来这对绑定是这里的问题。我建议你做的是：

*   `ConvertBack`通过实现该方法，使您的 ValueConverter 成为双向转换器。（如果您的转换器所做的只是在 and 之间进行交换`Collapsed`，`Visible`则`ConvertBack`可能只需调用`Convert`。）
*   通过添加 将其中一个绑定（无论哪个都无所谓）双向创建`Mode=TwoWay`，然后删除另一个绑定。`TwoWay`绑定足以在两个控件之间进行双向通信。

**编辑**：我的评论`ConvertBack`是您可以按如下方式实现它：

```
public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
{
    return Convert(value, targetType, parameter, culture);
} 
```

这是因为您的转换器所做的只是在 and 之间进行交换`Visible`，`Collapsed`并且转换一种方式与转换回来相同。这个评论基本上是旁白。您当然可以根据`ConvertBack`需要实现，但`ConvertBack`如果您在`TwoWay`绑定中使用转换器，则需要实现。

# java - 在方法中使用位运算符是否值得？

> ID：12167836
> 
> 赞同：6
> 
> 时间：2012-08-28T21:33:52.020
> 
> 标签：java, optimization, bitwise-operators

我对 Java 非常陌生（一般来说，我以前的经验是使用 ActionScript 2.0 和一些简单的 JavaScript），我正在慢慢地、有条不紊地学习 Java：Herbert Schildt 的初学者指南。这是一本不可思议的书。

一方面，我终于或多或少地了解了位运算符（我在 ActionScript 2.0 中第一次遇到）的作用，并且对于某些总和，它们比其他方法更有效。

我的问题是，在一个有很多计算的大型程序中（在这种情况下，一个庞大的RPG），还是简单地使用标准数学运算更有效，因为编译器会为您优化它？

或者，我是否完全问错了问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-28T21:38:38.037

您完全是在问错误的问题。你应该问的问题是“我应该保持我的代码简单易读，还是使用我认为可以提高其性能的技巧，即使我没有测量它的性能。” 答案应该是显而易见的。

位运算符有它们的位置，尤其是当您处理需要将大量数据打包到小空间中的二进制文件格式时。知道如何屏蔽字节的高位是绝对关键的，这样你就不会意外地进行符号扩展（打印出这两个变量以了解我的意思）：

```
byte b = (byte)0xDC;
int  i = b & 0xFF; 
```

但是不要去寻找使用这些运算符的地方，尤其是替换除以 2 之类的简单任务。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T21:37:28.603

像这样的优化只有在你有真正需要的情况下才应该做。如果您只是认为代码会运行得更快，那可能不值得。

很多时候编译器可能比你想象的更聪明，并且会为你做优化，其他时候可能会有一些警告，只会让你陷入更深的麻烦。最重要的是（可能是反对这样做的最大原因），如果它使您的代码难以被未来的开发人员（或您自己）阅读/理解，那么您可能只会在将来尝试工作时添加更多的反优化围绕原始代码。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-28T21:38:01.770

通常编译器会做很多优化。此外，您还需要在优化它之前调查您的瓶颈到底是什么。优化不是瓶颈的东西只会导致更多线程更快地达到真正的瓶颈。查找约束理论。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-28T21:37:58.630

出于学习目的，您可以跳过这种方式优化您的代码。它需要一些经验，否则您可能会在调试代码时遇到问题（我的主要意思是“这东西到底在做什么？”综合症）现在的编译器足够聪明，可以优化输出代码并以正确的方式处理已知模式。除非您真的需要节省每个毫秒或 cpu 周期，否则请专注于保持代码清洁。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-28T21:37:58.537

后者。也就是说，首先以最清晰的方式编写代码，这很可能需要标准的数学运算。让编译器处理剩下的事情。

Java，因为它运行在虚拟机上，所以有其他有趣的内置优化特性：例如，当你的程序运行时，虚拟机可以看到哪些代码分支被最频繁地执行，并使这些分支更有效率。

编写程序后，请使用分析工具来衡量哪些特定方法较慢。一旦你知道了这一点，那么你就会知道要优化什么样的代码。例如，您可能会发现从文件中读取配置是您做的最慢的事情，您可以寻找方法来加快速度。我的直觉是，通过使用位运算符而不是普通算术，您根本不可能发现任何性能优势。

祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T21:43:02.540

> 一方面，我终于或多或少地了解了位运算符（我在 ActionScript 2.0 中第一次遇到）的作用，并且对于某些总和，它们比其他方法更有效。

不，这是错误的。位运算有更多的应用程序来执行您询问的除法或乘法。
您可以有效地将位掩码用作标志、打包值、以紧凑的方式模拟访问权限、在密码学等中。
请参阅此[线程。](https://stackoverflow.com/questions/6559657/are-bitwise-operations-still-practical/6559712#6559712) 您应该搜索更多的应用程序，而不仅仅是阅读关于移位如何相似并且（可能）比除法更快的章节（不一定因为编译器无论如何都会转换为移位）

# c++ - 解包/解密/提取/应用程序 .bin 文件

> ID：12167839
> 
> 赞同：0
> 
> 时间：2012-08-28T21:34:11.563
> 
> 标签：c++, file, extract, unpack, bin

所以我的电脑上有一本旧字典，很旧，我找不到它的开发者或网站的任何踪迹（我猜它甚至还没有作为官方软件发布）。我有一个个人项目，我可能需要翻译其中的一些词（大约 200-300），我看到包含数据库/文件列表的数据文件夹内，但我无法提取或读取这些文件。有什么方法可以将这些 .bin 文件提取或转换为文本格式或可读的格式。

所以我在想这种类型的 .bin 文件可能不像你可以挂载和读取的 .bin 或 .iso cd 文件，而这些 .BIN 文件只能在应用程序中使用。

请帮忙。这个项目对我来说真的很重要

十分感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:40:58.627

您可以使用十六进制编辑器手动查看文件（这是一个很好的免费编辑器：http: [//mh-nexus.de/en/hxd/](http://mh-nexus.de/en/hxd/)），这可能会给您提供有关数据外观的线索。您还可以使用 linux 实用程序，该实用程序`strings`将向您显示内部是否有人类可读的字符串。

否则，你基本上不走运。没有 .bin 文件格式，它只是软件开发人员选择的任何专有数据格式。因此，您将无法使用一些标准的现成转换器。您可以尝试进行逆向工程，但这可能会很困难，并且需要您编写自己的实用程序。

# login - 为什么 SAP 在 Lion OS 上使用 Safari 登录失败 - 新 Macbook Pro？

> ID：12167840
> 
> 赞同：1
> 
> 时间：2012-08-28T21:34:34.483
> 
> 标签：login, safari, osx-lion, sap

我正在我的新公司发行的带有 Lion 的 Macbook Pro 上安装我的开发环境。当我尝试使用 Safari 浏览器登录 SAP 时，就好像 javascript 无法执行一样。我打开了错误控制台，它抱怨 header.js 出现 404 错误。

当然，在使用错误控制台之前，我怀疑是“用户错误”。以下登录均有效：

*   Windows7/联想/IE8.0
*   iOS-5 / iPad-1 / Safari
*   Macbook / Lion / Chrome

唯一失败的是：

*   Macbook / Lion / Safari

我没有在网络上或 SAP 或 Apple 支持中找到任何其他报告。

还有其他人遇到这个问题吗？有没有其他人找到解决方案？

另请注意，我在我的 Macbook 上进行了软件更新，唯一的更新是使用 iTunes。

# ios5 - 用于监控 HP NonStop 服务器的 iPhone 应用程序

> ID：12167842
> 
> 赞同：0
> 
> 时间：2012-08-28T21:34:37.057
> 
> 标签：ios5, hp-nonstop

我们计划创建一个 iPhone 应用程序，用于监控 HP NonStop 平台上的某些实体。我们已经在 NonStop 平台上运行了自定义主机 Web 服务器组件，处理 http(s) 请求并发送回 XML 响应（到基于浏览器和桌面的应用程序）。作为 iOS 领域的新手，在阅读了 Apple 严格的应用程序批准指南之后，我想知道 iOS 上是否允许这样的 http(s) 通信，因为这里使用的 Web 服务器是我们自己的，而不是更知名/可接受的（例如 Apache）。在最简单的形式中，应用程序将向 NonStop 主机组件发送一个 URL 请求，然后读取并解析响应中返回的 XML。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:45:07.850

“我想知道 iOS 上是否允许这样的 http(s) 通信，因为这里使用的网络服务器是我们自己的，而不是更知名/可接受的服务器之一（例如 Apache）。”

是的，它允许 https 到所需的主机。我认为你的主机上有什么对苹果来说并不重要。

为了优化通信速度/开销，我将使用 JSON 而不是 xml

# html - Bootstrap - 将图例添加到井中

> ID：12167848
> 
> 赞同：19
> 
> 时间：2012-08-28T21:35:04.643
> 
> 标签：html, css, twitter-bootstrap

我目前正在使用 twitter bootstrap，它运行良好，但我想为表单中使用的“井”元素添加一个图例（这样我就可以有多个井，表示表单上的子部分）。

我的表单现在的一个示例是：

![在此处输入图像描述](../Images/a20ac679d4f081df65abf244acf0e265.png)

例如，我想添加一个图例，以便在“详细信息”标题下方有两个单独的部分，但能够表示它们的用途。传奇似乎是做到这一点的最佳方式。

html 的相关部分如下所示：

```
<form>
   <div class="row">
        <div class="span6">
        <div class="nonboxy-widget">
            <div class="widget-head">
                <h5>Details</h5>
            </div>
            <div class="widget-content">
                 <div class="widget-box">
                    <div class = 'form-horizontal well'>
                        <fieldset>
                            <div class="control-group">
                                <label class="control-label">Sale Type</label>
                                <div class="controls"> 
```

当我尝试将图例标记添加到字段集或`div`with 类`form-horizontal well`时，它呈现为框内的标题，而不是普通的 html 图例。它呈现如下：

![在此处输入图像描述](../Images/33766e5dc7a7951792dad2328950da93.png)

用代码

```
<div class = 'form-horizontal well'>
  <fieldset>
    <legend>Details</legend>
    <div class="control-group"> 
```

任何人都可以推荐一种方法来让它像普通图例一样呈现在盒子的边框上吗？

编辑：感谢辛比尔斯克的代码，我现在有：

![在此处输入图像描述](../Images/33fa5081cd8b382b0e32960b82ea25ca.png)

这非常接近，但我想要的是让图例看起来像一个字段集上的普通 html 图例（即它位于边框中），所以我将 CSS 更改为：

```
legend {
padding: 0;
margin-left: 10px;
margin-bottom: -9px;
border: 0;
color: #999999;
background-color: #333333;
} 
```

但这导致了这个：

![在此处输入图像描述](../Images/739fc30db3bb1d5fa8cc5abb5e174a62.png)

如何确保井上的边框像普通的字段集图例一样“中断”（不显示在文本后面）？

编辑2：在对第一个答案进行编辑之后，我将代码应用于我的css并最终得到：

![在此处输入图像描述](../Images/47c846b0dd6dff39ddf30122666b8fbc.png)

你会注意到这不是我想要的——我试图在井 div 的边界上获取图例，而不是在字段集本身上（因为这是一个嵌套形式，一个井中可能有多个字段集，所以我不能把边框放在字段集本身上）。

我似乎已经用上面的代码实现了这一点，唯一的问题是在图例所在的边界处打断 - 这可以通过对图例文本的背景进行某种不透明度和一些填充来完成吗？

有什么进一步的建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-29T07:03:35.443

放上`.well`并`fieldset`覆盖 Bootstrap 的`legend`和`fieldset`样式。
HTML

```
<form>
    <fieldset class="well the-fieldset">
        <legend class="the-legend">Your legend</legend>
        ... your inputs ...
    </fieldset>
</form> 
```

CSS

```
.the-legend {
    border-style: none;
    border-width: 0;
    font-size: 14px;
    line-height: 20px;
    margin-bottom: 0;
}
.the-fieldset {
    border: 2px groove threedface #444;
    -webkit-box-shadow:  0px 0px 0px 0px #000;
            box-shadow:  0px 0px 0px 0px #000;
} 
```

注意：我省略了 Bootstrap 类，如行、跨度、控件等。使用它们来适应您的布局。
编辑：更改代码以包含`fieldset`样式“重置”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-16T16:32:21.403

这对我有用，因为我试图在 Bootstrap 中作为一个 groupbox 实现。

```
fieldset {
  min-width: 0;
  padding: 0;
  margin: 0;
  border: 0;
}
.well {
  min-height: 20px;
  padding: 19px;
  margin-bottom: 20px;
  background-color: #f5f5f5;
  border: 1px solid #e3e3e3;
  border-radius: 4px;
  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .05);
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, .05);
}
.well-legend {
  display: block;
  font-size: 14px;
  width: auto;
  padding: 2px 7px 2px 5px;
  margin-bottom: 20px;
  line-height: inherit;
  color: #333;
  background: #fff;
  border: 1px solid #e3e3e3;
  border-radius: 4px;
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, .05);
  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .05);
}
```

```
<form>
  <fieldset class="well">
    <legend class="well-legend">Group Box Legend</legend>
    ... your inputs ...
  </fieldset>
</form>
```

# ruby-on-rails - 使用脚手架的 Ruby on Rails 演示应用程序语法错误

> ID：12167856
> 
> 赞同：0
> 
> 时间：2012-08-28T21:35:55.510
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, railstutorial.org

我对 Ruby on Rails 非常陌生，我正在按照 Railstutorial 使用 Scaffold 制作演示应用程序。

首先，当我使用脚手架添加用户模型时，它运行良好。然后，当我添加 micropost 模型时，我不断收到以下错误：

```
/demo_app/app/models/micropost.rb:4: syntax error, unexpected ':', expecting keyword_end
  belongs_to: user 
```

我注意到脚手架生成的代码与教程中显示的代码不同。这是 User 和 Microposts 模型：

```
class User < ActiveRecord::Base
  attr_accessible :email, :name
  has_many :microposts
end

class Micropost < ActiveRecord::Base
  attr_accessible :content, :user_id

  belongs_to: user

  validates :content, :length => { :maximum => 140 }
end 
```

`attr_accessible`教程中没有该行。这到底是什么，这是问题所在吗？我已经运行了 Rake 程序以及提到的所有其他内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:39:58.667

应该是`belongs_to :user`。你最好使用一些带有高亮显示的文本编辑器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T21:38:55.403

错误消息说明了您需要知道的任何内容。

*   查看 micropost.rb 的第 4 行
*   搜索“：”

它应该`belongs_to :user`代替`belongs_to: user`

# python - 带有随机数的大数组与python

> ID：12167863
> 
> 赞同：12
> 
> 时间：2012-08-28T21:36:46.327
> 
> 标签：python, arrays, random

我需要生成一个带有随机数（10⁵ 数字）的大数组（或列表）。我是这样尝试的：

```
vet = random.sample(range(10),100000) 
```

但是当我尝试运行时：

```
vet = random.sample(range(10),10000) 
```

文件“/usr/lib/python2.7/random.py”，第 320 行，在示例中引发 ValueError（“样本大于总体”） ValueError：样本大于总体

有什么解决办法吗？

tkns

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-28T21:41:22.307

你想要的是

```
[random.random() for _ in xrange(100000)] 
```

从[随机模块文档](http://docs.python.org/library/random.html "随机模块文档")：

> random.sample(population, k) 返回从总体序列中选择的唯一元素的 ak 长度列表。用于无放回的随机抽样。

所以当你打电话时`random.sample(range(10), 100000)`，你试图在长度为 10 的序列中提取 100000 个唯一元素，这显然是行不通的。

注意

*   `random.random()`返回 [0 之间的浮点值；1)
*   `random.randrange([start], stop[, step])`从序列中返回一个随机元素`range([start], stop[, step])`
*   `random.randint(a, b)`在 [a 中返回一个整数值；乙]
*   使用时`random.sample`，等式`len(population) >= k`必须成立

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-28T21:39:26.240

我想你在追求这样的事情：

```
vet = [random.randint(1,10) for _ in range(100000)] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-24T15:49:55.540

您可以使用 numpy 函数并创建一个 N 空间填充随机数的数组

```
import numpy as np

vector_size = 10000

one_dimensional_array  = np.random.rand(vector_size)
two_dimensional_array  = np.random.rand(vector_size, 2)
tree_dimensional_array = np.random.rand(vector_size, 3)
#and so on 
```

[numpy.random.rand](https://docs.scipy.org/doc/numpy/reference/generated/numpy.random.rand.html)

您可以使用下面的函数和数组创建随机数矩阵。

# c# - asp.net C# windows 身份验证 iss 配置

> ID：12167865
> 
> 赞同：1
> 
> 时间：2012-08-28T21:36:59.677
> 
> 标签：c#, asp.net, iis, windows-authentication

我正在开发一个网页，需要知道用户的 Windows 身份验证值，更准确地说是名称。

其他开发已经通过这种身份验证完成，但对我来说遗憾的是，他们的创建者早已不在，我没有联系或文档。

我正在使用 Visual Studio 2008，并且正在访问远程服务器中的 Web 服务。该服务器是 windows server 2008 r2 标准，使用 ISS 版本 7.5。

因为我有其他开发的源代码，所以我所做的就是复制粘贴，并且在我调用我的机器（本地主机）中的 web 服务时工作正常。代码如下：

```
//1st way
WindowsPrincipal wp = new WindowsPrincipal(WindowsIdentity.GetCurrent());
string strUser = wp.Identity.Name;//ALWAYS GET NT AUTHORITY\NETWORK SERVICE
//2nd way
WindowsIdentity winId = WindowsIdentity.GetCurrent();
WindowsPrincipal winPrincipal = new WindowsPrincipal(winId);
string user = winPrincipal.Identity.Name;//ALWAYS GET NT AUTHORITY\NETWORK SERVICE
//3rd way
IIdentity WinId = HttpContext.Current.User.Identity;
WindowsIdentity wi = (WindowsIdentity)WinId;
string userstr = wi.Name; //ALWAYS GET string empty 

btn_select.Text = userstr;
btn_cancelar.Text = strUser;
btn_gravar.Text = user; 
```

如您所见，我在这里有 3 种方法可以得到相同的结果，并且以可悲的方式显示我的用户名。至于我的 web.config 我有：

```
<authentication mode="Windows"/>
<identity impersonate="true" /> 
```

在 IIS 管理器中，我尝试了很多在匿名身份验证、ASP.NET 模拟、基本身份验证、表单身份验证和 Windows 身份验证之间启用和禁用的组合。

可以请人帮助我吗？

注意：我从每次尝试中获得的相应值都在代码中

# wix - 如何在 WiX 安装程序中检查 GAC 中的二进制文件？

> ID：12167866
> 
> 赞同：0
> 
> 时间：2012-08-28T21:37:00.273
> 
> 标签：wix

我有一个依赖于 Team Foundation Server“对象模型”的应用程序，并在 GAC 中查找此类二进制文件。这意味着应用程序的客户端需要安装 Visual Studio 或[独立的 TFS 对象模型](http://visualstudiogallery.msdn.microsoft.com/a37e19fb-3052-4fc9-bef7-4a4682069a75)才能使用该应用程序。

我希望安装程序检测到未安装 TFS 位，如果未安装，则无法正确安装。

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:31:38.407

您可以使用 registrySearch 来满足此需求。

```
<Property Id="TFS_OBJECT_MODEL_VERSION">
      <RegistrySearch Id="TFSSearch" Root="HKLM" Key="SOFTWARE\Classes\Installer\Products\5CDE7BA1198D5C43F91FEBA658CA4CB4" Name="ProductName" Type="raw" Win64="yes" />
</Property>
<Condition Message='TFS Object Model is required to install this product'>Installed OR TFS_OBJECT_MODEL_VERSION</Condition> 
```

如果需要获取安装位置，可以使用其他注册表路径来获取TFS组件的位置，不过我想我提供的代码已经足够满足你的需要了。

# java - 通过来自 Jboss 服务器的 HTML 请求检索 Json

> ID：12167868
> 
> 赞同：0
> 
> 时间：2012-08-28T21:37:09.503
> 
> 标签：java, json, jboss, httpurlconnection, socketexception

`java.net.SocketException: Unexpected end of file`当我尝试从我的 JBoss 服务器查询一些 JSON 时，我遇到了来自服务器的问题。我希望有人能发现我哪里出错了。或者有人对从我的 Jboss 服务器中提取此 JSON 的更好方法有任何建议吗？

```
try{
        URL u = new URL("http://localhost:9990/management/subsystem/datasources/data-source/MySQLDS/statistics?read-resource&include-runtime=true&recursive=true");
        HttpURLConnection c = (HttpURLConnection) u.openConnection();
        String encoded = Base64.encode(("username"+":"+"password").getBytes());
        c.setRequestMethod("POST");
        c.setRequestProperty("Authorization", "Basic "+encoded);
        c.setRequestProperty("Content-Type","application/json");
        c.setUseCaches(false);
        c.setAllowUserInteraction(false);
        c.setConnectTimeout(5000);
        c.setReadTimeout(5000);
        c.connect();

        int status = c.getResponseCode();  // throws the exception here

        switch (status) {
            case 200:
            case 201:
                BufferedReader br = new BufferedReader(new InputStreamReader(c.getInputStream()));
                StringBuilder sb = new StringBuilder();
                String line;
                while ((line = br.readLine()) != null) {
                    sb.append(line+"\n");
                }
                br.close();
                System.out.println(sb.toString());
                break;
            default:
                System.out.println(status);
                break;
        }

    }  catch (Exception e)
    {
        e.printStackTrace();
    } 
```

# mysql - mysql：我可以在慢查询日志中看到空间不足的中止查询吗

> ID：12167872
> 
> 赞同：0
> 
> 时间：2012-08-28T21:37:26.663
> 
> 标签：mysql

慢查询是否记录那些由于等待超时而在中间中止的查询？

如果没有，我还能在哪里看到由于等待超时而中止的查询或由于空间不足而失败的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:03:38.617

慢查询必须完成才能变慢。否则它们是错误并相应地记录。

# wsdl - 更新 Web 服务时对 SoapUI Pro 的关注

> ID：12167874
> 
> 赞同：0
> 
> 时间：2012-08-28T21:37:29.380
> 
> 标签：wsdl, soapui, regression

不幸的是，这可能是一个非常开放的问题，但我的一位同事对使用 SoapUI Pro 作为我们的自动化回归测试工具表示担忧，主要是因为看似微不足道的 WSDL 更改可能会给 QA 人员带来麻烦。我的同事特别担心，如果我们更新 WSDL，即使更改了名称，我们也需要触及并更新使用该字段的每个现有测试。

据我了解，SoapUI Pro 提供了一个重构工具来为您处理这个问题。

您对 SoapUI Pro 和更新 Web 服务有何体验？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:55:18.690

我也有类似的担忧，这可能是一个小问题；然而。

1.  即使它确实发生了，生产力的好处也超过了重量的下降。
2.  您可以使用 Groovy 脚本来重构项目本身。
3.  应用良好的编程实践来隔离共性。
4.  对项目进行分层，创建极其简单的 API 原语。
5.  为使用这些基元的场景创建单独的测试套件，而不是自己进行调用
6.  使用 Groovy 和 TestRunner，链接外部 Java 实用程序和帮助代码
7.  不要克隆，而是打电话。
8.  使用外部工具，我还使用 XmlPad 和 Notepad++ 重构我的 SOAPUI 项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T12:04:36.373

您可以更新项目中的 wsdl 定义，还可以重新创建更新的请求并备份旧请求。

这是执行此操作的代码。

```
import static com.eviware.soapui.impl.wsdl.actions.iface.UpdateInterfaceAction.recreateRequests
import static com.eviware.soapui.impl.wsdl.actions.iface.UpdateInterfaceAction.recreateTestRequests

project = testRunner.testCase.testSuite.project; //get the project reference
def ifaceList = project.getInterfaceList(); //get all the interfaces present in the project in a list

//start a loop for number of interfaces
for(int i = 0; i < project.getInterfaceCount() ; i++)
{

def iface = project.getInterfaceAt(i);
def url = iface.definition;
iface.updateDefinition( url, true); //updateDefinition(String url , Boolean createRequests)

//The above part updates the definition
//The part below recreates the requests based on updated wsdl definition

//syntax - 
//recreateRequests( WsdlInterface iface, boolean buildOptional, boolean createBackups, boolean keepExisting, boolean keepHeaders )

recreateRequests(iface,true,true,true,true);
recreateTestRequests(iface,true,true,true,true);
}
//End of Script// 
```

# javascript - JavaScript 模块模式 - 如何在使用对象/函数之前触发构造函数/初始化函数？

> ID：12167876
> 
> 赞同：1
> 
> 时间：2012-08-28T21:37:44.080
> 
> 标签：javascript

我一直在查找 JavaScript 模式以开始学习。我知道的 JavaScript 足够危险，但不足以成为一名优秀的架构师。

我首先使用模块模式创建一个“模型”来管理一些兴趣数据。使用下面的代码，我怎样才能获得一个“构造函数”方法（或某种启动方法）来在使用数据时对其进行初始化。这些数据将在所有实例中使用，所以我猜我会使用原型？

```
var InterestDataModel = (function () {

    // Private
    var interestModels = [];

    return {
        getInterestModels: function () {
            return interestModels;
        },

        resetInterestModels: function () {
            interestModels.length = 0;
        }
    }; // end return
})();

// Calling code
// When this call is made, I want some initialization to be done already!
InterestDataModel.getInterestModels(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:06:59.847

由于您正在自行执行“InterestDataModel”函数，因此该函数内的任何内容都将是初始化并在您调用 getInterestModels 方法之前运行。请参阅此 jsfiddle 示例：http: [//jsfiddle.net/rjrqb/1/](http://jsfiddle.net/rjrqb/1/)

# api - 使用子域对 REST API 进行版本控制

> ID：12167877
> 
> 赞同：3
> 
> 时间：2012-08-28T21:37:51.593
> 
> 标签：api, .htaccess, versioning

刚刚为我们的企业应用程序完成了第一个版本的 REST API 并进入下一个版本。我有兴趣了解使用子域对 API 进行版本控制的好处/漏洞。

让我们假设这个结构：

源文件夹：

```
 /var/www/html/domain/api/ (A) 
```

这是目前唯一的版本。可以说，从现在起 2 周后，我们将发布 API 的第二版。要将文件从上述文件夹复制到 v1.0。所以新的版本化文件夹将是；

源文件夹：

```
 /var/www/html/domain/apiv1-0/ (B) 
```

文件夹`B`将保持不变。所有新的开发将被推送到“A”中的主文件夹。为了处理指向正确的文件夹，在`.htaccess`文件中，我们编写如下内容：

```
 - Check the subdomain
  - Match it with the folder
  - Server files from that folder. 
```

例子：

```
 api.domain.com ==> Always serves the latest version.
  apiv1-0.domain.com ==> Version 1 API will be served.
  apiv2-0.domain.com ==> Version 2 API will be served. 
```

我想知道这是否是一个好习惯。有什么注意事项吗？以及如何设置“.htaccess”来处理上述问题？

我不想在 URI 中使用版本号。这可能是一种标准做法，但我不喜欢它。

**编辑：** 如您所见，虽然它的子域不同，但我不必担心每次发布新版本时的`Apache`配置甚至配置。`.htaccess`

**编辑：** 基本文件夹：

```
/var/www/html/domain/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:23:13.427

> 我想知道这是否是一个好习惯。有什么注意事项吗？

如果您的意思是一种版本控制和部署 REST API 的方式，我认为这很好。至于为此使用 htaccess 路由，有一些警告可能会通过其他域访问不同的 API，尽管这将取决于您的服务器配置而不是规则。例如，如果设置了默认虚拟主机，则有人可能能够通过`http://123.45.67.89/apiv1-0/`.

> 如何设置“.htaccess”来处理上述问题？

你要这个：

```
RewriteEngine On
# ensure trailing slashes for /api otherwise mod_dir will expose the underlying layout
RewriteCond %{HTTP_HOST} ^(www\.)?domain.com$ [NC]
RewriteCond %{DOCUMENT_ROOT}/api%{REQUEST_URI} -d
RewriteRule ^(.*[^/])$ /$1/ [L,R=301]

# for /api
RewriteCond %{HTTP_HOST} ^(www\.)?domain.com$ [NC]
RewriteCond %{DOCUMENT_ROOT}/api%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/api%{REQUEST_URI} -d
RewriteRule ^(.*)$ /api/$1 [L]

# ensure trailing slashes for /apivXXX otherwise mod_dir will expose the underlying layout
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{HTTP_HOST} ^(.+)\.domain.com$ [NC]
RewriteCond %{DOCUMENT_ROOT}/%1%{REQUEST_URI} -d
RewriteRule ^(.*[^/])$ /$1/ [L,R=301]

# for everything else
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{HTTP_HOST} ^(.+)\.domain.com$ [NC]
RewriteCond %{DOCUMENT_ROOT}/%1%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/%1%{REQUEST_URI} -d
RewriteRule ^(.*)$ /%1/$1 [L] 
```

前 2 条规则与第 2 条规则几乎重复，但第 2 条规则将**www***（或没有）映射到`/api/`，而第 2 条规则处理映射到目录的子域（**apiv1-0 .domain.com**映射到`/apiv1-0/`.

mod_dir 检查是因为当您尝试请求目录时，`DirectorySlash`如果缺少尾部斜杠，mod_dir 将重定向请求。发生这种情况时，您的布局会暴露出来，它将无法工作。例如，如果您在`test`下有一个目录`/api/`，并且您请求`http://domain.com/test`，它将被重写，`/api/test`并且 mod_dir 将看到“test”是一个目录但没有尾部斜杠，因此 mod_dir 将（错误地）将浏览器重定向到`http://domain.com/api/test/`，带有尾部斜线但暴露`/api/`.

# html - CSS3 PIE 在 IE7 中将粘滞页脚推离屏幕

> ID：12167878
> 
> 赞同：0
> 
> 时间：2012-08-28T21:37:53.190
> 
> 标签：html, css, sticky-footer, css3pie

我将[这种粘性页脚布局](http://www.cssstickyfooter.com/html-code.html)与[CSS3 Pie](http://css3pie.com/forum/viewtopic.php?f=3&t=1287)一起使用，在 IE 兼容模式下，它会导致页脚拆分，我的页脚内容显示在屏幕下方，并且 CSS3 Pie 样式/背景/等位于正确的位置粘页脚去。

如何让他们一起玩得很好？

在 IE 中打开这个 jsfiddle，然后点击顶部的兼容性按钮（IE9 中重新加载按钮的左侧）。如果按钮不可见，只需转到菜单中的以下内容：“工具-->兼容性视图”。 [http://jsfiddle.net/johntrepreneur/srwtC/2/](http://jsfiddle.net/johntrepreneur/srwtC/2/)

**更新：** 请改用这个小提琴示例，因为上面的示例不是问题的准确表示：

[http://jsfiddle.net/johntrepreneur/8rZWu/embedded/result/](http://jsfiddle.net/johntrepreneur/8rZWu/embedded/result/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:35:57.773

更改页脚的位置似乎对我有用：

```
#footer
{
    position: absolute; /* This is the important bit */
    margin-top: -81px; /* negative value of footer height */
    margin-left: 10%;
    margin-right: 10%;
    height: 80px;
    width: 75%;
    clear:both;
    text-align: center;
    font-size: 48pt;
    font-weight: bold;

    background: url(bg-image.png) no-repeat #EBEBEB; /*non-CSS3 browsers will use this*/
    background: url(bg-image.png) no-repeat, -webkit-gradient(linear, 0 0, 0 100%, from(#EEFF99) to(#66EE33)); /*old webkit*/
    background: url(bg-image.png) no-repeat, -webkit-linear-gradient(#EEFF99, #66EE33); /*new webkit*/
    background: url(bg-image.png) no-repeat, -moz-linear-gradient(#EEFF99, #66EE33); /*gecko*/
    background: url(bg-image.png) no-repeat, -ms-linear-gradient(#EEFF99, #66EE33); /*IE10 preview*/
    background: url(bg-image.png) no-repeat, -o-linear-gradient(#EEFF99, #66EE33); /*opera 11.10+*/
    background: url(bg-image.png) no-repeat, linear-gradient(#EEFF99, #66EE33); /*future CSS3 browsers*/
    -pie-background: url(bg-image.png) no-repeat, linear-gradient(#EEFF99, #66EE33); /*PIE*/

    border-left: 1px solid black;
    border-right: 1px solid black;
    border-bottom: 0;
    border-top: 1px solid black;

    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px 10px 0px 0px;

    behavior: url('/js/lib/PIE-1.0.0/PIE.htc');

} 
```

看这里：

[http://fiddle.jshell.net/srwtC/3/show/](http://fiddle.jshell.net/srwtC/3/show/)

**更新**

```
#footer {
    max-width: 1200px;
    min-width: 700px;
    position: absolute;
    z-index: 2;
    height: 50px;
    left: 0; /*IMPORTANT*/
    right: 0; /*IMPORTANT*/
    margin: -51px auto 0;
    border: 1px solid black;
    border-bottom: 0;
    background: #E1DAC6;
    background: url(bg-image.png) no-repeat #EBEBEB;
    -pie-background: url(bg-image.png) no-repeat, linear-gradient(#EEFF99, #66EE33);
    border-left: 1px solid black;
    border-right: 1px solid black;
    border-top: 1px solid black;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px 10px 0px 0px;
    behavior: url('/js/lib/PIE-1.0.0/PIE.htc');
} 
```

# pdf - 如何使动态 PDF 表单在 LiveCycle 中的 2 个页面上流动？

> ID：12167886
> 
> 赞同：0
> 
> 时间：2012-08-28T21:38:31.567
> 
> 标签：pdf, livecycle, livecycle-designer

我有一个动态 PDF 表单，可以在每一页上流动，但不能同时在这两个页面上流动。我的意思是，如果有可用空间，第二页上的字段不会移动到第一页。我怎样才能使整个文档变得流畅？我正在使用 Adob​​e LiveCycle ES2 Designer 创建表单。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:00:03.643

除非您想要单独的页面，否则我通常坚持使用一页并插入单独的子表单。使页面和子表单流动（根据内容使用从上到下或西方文本）。

如果需要，使用此方法允许您从子表单创建片段，但也意味着将保持页面流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-27T04:32:36.793

选择您正在使用的子表单。然后，在对象面板中，选择内容作为流动而不是定位。
对“页面”也重复这些步骤。

# java - 从不同线程检查时，ConcurrentLinkedQueue 大小返回零

> ID：12167889
> 
> 赞同：0
> 
> 时间：2012-08-28T21:38:39.350
> 
> 标签：java, multithreading

我有以下代码：

```
Queue<Message> localMsgQueue;
//inside the constructor
localMsgQueue = new ConcurrentLinkedQueue<Message>();

public void AddMsg(Message m)
{
    localMsgQueue.offer(m);     
    System.out.println("^^"+localMsgQueue.size());

}
public void GetMsg() {
    System.out.println("+++" + localMsgQueue.size());       
} 
```

在这里，在初始化队列的主线程中调用 AddMsg。GetMsg 不时从不同的线程调用。

我的问题是 AddMsg 中的大小检查返回队列中正确数量的元素，而 GetMsg 总是返回零大小，尽管队列包含元素。

有人可以指出这里的问题吗？这是我第一次使用 Java 并发队列，所以不知道发生了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T21:40:53.590

您可能正在构建两个不同的`ConcurrentLinkedQueue<Message>`对象。

在类的构造函数中放置一个断点，看看它被击中了多少次。

```
// put a breakpoint here
localMsgQueue = new ConcurrentLinkedQueue<Message>(); 
```

# php - PHP - 输出正在添加“ ”... Braindead

> ID：12167895
> 
> 赞同：0
> 
> 时间：2012-08-28T21:38:51.260
> 
> 标签：php, line, line-breaks

所以我对此表示反对......到目前为止，我对 PHP 还不太熟悉，有人让我编辑一个 WP 插件。

**PHP的**

```
foreach ($options['forms'][$form_id]['inputs'] as $id => $input) {
        if (!$input['show'])
            continue;
        $val    = '';
        if (isset($_POST[$id])){
            $val    = esc_attr(strip_tags(stripslashes($_POST[$id])));
        }else{
            if( isset($input['value']) ) $val   = esc_attr(strip_tags(stripslashes($input['value'])));
        }

        $error  = ' ';
        if (isset($input['error']) && $input['error']) 
            $error  = ' error ';
        if($input['type'] != 'hidden')
            $content .= "\t".'<div class="sf_input_container_byben"><label class="w2llabel'.$error.$input['type'].'" for="sf_'.$id.'">'.esc_html(stripslashes($input['label'])).':';

        if ($input['required'] && $input['type'] != 'hidden')
            $content .= ' *';

        if($input['type'] != 'hidden')
            $content .= '</label>';

        if ($input['type'] == 'text') {         
            $content .= '<input value="'.$val.'" id="sf_'.$id.'" class="w2linput text" name="'.$id.'" type="text"/></div>';
        } else if ($input['type'] == 'textarea') {
            $content .= '<textarea id="sf_'.$id.'" class="w2linput textarea" name="'.$id.'">'.$val.'</textarea></div>';
        } else if ($input['type'] == 'hidden') {
            $content .= '<input type="hidden" id="sf_'.$id.'" class="w2linput hidden" name="'.$id.'" value="'.$val.'"></div>';
        }
    } 
```

显然这是片面的。

一切都按预期输出，*除了*我`<br />`在每个`</label>`（结束标记）之后得到一个。nl2br 未在 php 文件中的任何位置使用。

我错过了什么？如果需要更多信息，我可以直接链接到文件。

**HTML 被输出为：**

```
<div class="sf_input_container_byben">
    <label class="w2llabel text" for="sf_first_name">First name: *</label><br />
    <input value="" id="sf_first_name" class="w2linput text" name="first_name" type="text"/>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:43:47.257

通常你可以通过这样做在 CSS 中解决这个问题：

```
label{display: inline;} 
```

看起来标签就像一个块元素，因此将其更改为内联或内联块，它应该停止在末尾添加额外的行。请注意，您可能已经有导致标签显示为块的代码，因此请先在 css 文件中搜索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:59:25.650

不是最佳修复，但我的时间不多了，所以我只是`display: none;`在我的 CSS 中使用来隐藏`<br>`表单中的元素。

支持 Paul 将我链接到一个论坛主题，该主题涵盖了一个单独的问题，但提供了该解决方案。

# jquery - Ajax 请求 - 超时错误/警告

> ID：12167900
> 
> 赞同：1
> 
> 时间：2012-08-28T21:39:15.357
> 
> 标签：jquery, ajax, timeout

我有这个功能，它在大多数情况下都可以正常工作，但是如果发生不规则的事情，客户端将不知道为什么加载 gif 总是显示。

我想知道我是否可以定义 20 秒超时，如果 ajax 请求不成功，加载 gif 会消失并显示类似“连接丢失”或类似错误：

```
function ajaxrequest(){
                var params = [];
                for (var i=0; i < submit.length; i++) {
                    var ele = submit[i];
                    params[i] = ele + '=' + $('#' + ele).attr('value');
                }
                params = params.join('&');
                $(".agendarleft").html("<center><img src='skins/{VAL_SKIN}/styleImages/iloading.gif'></center>");
                $.ajax({
                type: "GET",
                url: "ajaxload/como.php",
                data: params,
                success: function() {
                $(".agendarleft").html("<center><div style='height:50px'><h2>Enviado! Seremos breves na resposta.</h2></div></center><br/><img src='../skins/Sandbox_Light/styleImages/after1.jpg'/></center>");
                }
                });
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:41:14.557

请在此处检查超时参数

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

演示：http: [//jsfiddle.net/u3f9C/183/](http://jsfiddle.net/u3f9C/183/)

如果您将超时更改为 1000，您将看到错误。现在它应该显示超时，因为超时值非常低，甚至在它尝试连接到 url 之前它就超时了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:42:28.063

您可以设置错误回调，如下所示：

```
$.ajax({}).error(function(){ // remove spinner or do something else }); 
```

见：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

或者按照您上述要求的风格：

```
$.ajax({error: function() {}, success: function() {} }); 
```

# xpath - XPath 查询以获取包含字符串前缀的节点

> ID：12167908
> 
> 赞同：0
> 
> 时间：2012-08-28T21:39:54.983
> 
> 标签：xpath

您如何获取包含作为您正在搜索的字符串前缀的节点的记录？

XML 看起来像这样：

```
<records>
  <record>
    <name>foo</name>
    <prefix>abc</prefix>
  </record>
  <record>
    <name>bar</name>
    <prefix>def</prefix>
  </record>
  <record>
    <name>bar</name>
    <prefix>abc.123</prefix>
  </record>
</records> 
```

所以如果我有字符串“abc.123.xyz”，我会获取第一条和第三条记录。

大致翻译为“/records/record[prefix[is-contained-in?('abc.123.xyz')]]”

我看到的任何 XPath 函数都以相反的方式工作（开始于，包含），您指定子字符串而不是包含子字符串的节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:57:43.800

这与您的示例中的记录节点匹配：

```
 <xsl:template match="/">
      <xsl:apply-templates select="/records/record[starts-with(./prefix, substring-before('abc.123.xyz','.'))]"/>
 </xsl:template> 
```

[子串之前](http://zvon.org/xxl/XSLTreference/Output/function_substring-before.html)

# mysql - 一年间隔mysql条件

> ID：12167910
> 
> 赞同：1
> 
> 时间：2012-08-28T21:40:12.810
> 
> 标签：mysql

您好，我正在尝试编写一个间隔为 1 年的案例陈述，在这种情况下，年份从 4 月开始，到次年 3 月结束，但是如果输入例如今年 3 月，那么它将是去年年底由于这一事实，这一年将从去年四月开始

看看[这里的 sqlfiddle](http://sqlfiddle.com/#!2/ad042/1)

这是我到目前为止的代码，请注意

```
sum(case 
        when Month(py.pay_date) = 4 interval())1 year
        then amount end) yearly_amount 
```

这是我遇到的主要问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T21:53:40.813

您可以使用它来`yearly_amount`计算当年（从 4 月开始，到次年 3 月底结束）：

```
sum(case 
        when py.pay_date >= STR_TO_DATE(CONCAT(YEAR(NOW()), '-04-01'), '%Y-%m-%d') and
             py.pay_date <  STR_TO_DATE(CONCAT(YEAR(NOW()), '-04-01'), '%Y-%m-%d') + interval 1 year
             then amount
        end) yearly_amount 
```

[*SQLFiddle 演示*](http://sqlfiddle.com/#!2/16e6b/19)

# sockets - python Socket发送ascii命令并接收响应

> ID：12167911
> 
> 赞同：1
> 
> 时间：2012-08-28T21:40:22.577
> 
> 标签：sockets, python-3.x

我正在尝试通过 python 中的套接字通信使用 Lantronix EDS2100 模块通过网络建立与 ADAM-4017+ I/O 模块的连接。对于我的一生，我无法让它发挥作用。

EDS 有一个 IP 地址和一个与亚当单元相连的端口 (10001)。我正在尝试向 adam 查询 ch 1 的值（ascii 命令为 #000）

非常感谢任何帮助：

```
import socket
edsIP = "192.168.1.135"
edsPORT = 10001
MESSAGE="#000\r"

srvsock = socket.socket( socket.AF_INET, socket.SOCK_STREAM)
srvsock.bind( ('',23000))
srvsock.listen(1)
newsock, (remhost, remport) = srvsock.accept()
srvsock.send((MESSAGE),(edsIP, EdsPORT) )

 while 1:

    data, addr = srvsock.recv(4096) 
    print ("received message:", data,addr)
    srvsock.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:48:47.173

我对此设备一无所知，但是根据您的描述，您说它期望端口 10001 上的连接。但是您在代码中所做的是打开自己的套接字并侦听端口 23000 上的连接，然后等待用于连接。如果您不期望某些东西与您联系，那么您将无缘无故地等待。

如果您的设备只需要连接并发送消息，那么我认为可以这样做：

```
import socket

edsIP = "192.168.1.135"
edsPORT = 10001
MESSAGE="#000\r"

srvsock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
srvsock.settimeout(3) # 3 second timeout on commands
srvsock.connect((edsIP, edsPORT)))
srvsock.sendall(MESSAGE)

data = srvsock.recv(4096) 
print "received message:", data

srvsock.close() 
```

**更新**

您的评论表明您可能正在使用 python3。如果是这样，您可能需要像这样调整代码：

```
MESSAGE=b'#000\r' 
```

当你收到你的`bytes`回复时，如果你想把它变成一个字符串：

```
print data.decode("UTF-8") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:43:39.987

我可以直接看到的唯一问题是您将 while 语句缩进了一个空格，但这可能只是在这里剪切和粘贴。

经过一些测试很明显，当您尝试在服务器套接字上接受时，它会阻塞，因此您永远不会向您的设备发送任何内容。

# c# - Windows 服务需要监控错误日志吗？想法？

> ID：12167913
> 
> 赞同：0
> 
> 时间：2012-08-28T21:40:34.250
> 
> 标签：c#, logging, windows-services

我有一个在我们的一台服务器上运行 24/7 的 Windows 服务。

它连接到一家外部公司，因为最近该公司一直在倒闭。

我需要设置一些东西，以便在最后一分钟在此服务的错误日志中监控我们何时出现 25 个错误。

我猜我将不得不创建一个表并将这些错误插入到表中，因为它们正在被记录，然后设置一些东西，通过 tsql 查询检查最后一分钟是否发生了 25？（然后发送电子邮件或更新仪表板监控页面以获得支持）

真的，我的问题是有人有比这更好的主意吗？过去一定有人做过比这更好的事情。我想我从来没有尝试直接从日志中读取。也许那会是一条更好的路线。

任何想法方向都非常感谢这一点。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:47:01.123

我的 Windows 服务定期调用的外部 Web API 也有类似的问题。

我的解决方案是仅使用 NLog 将错误写入文本日志文件，并在服务本身中保留一个计数器，以记录未成功的失败次数。如果计数器超过了可配置的阈值，我将向 NLog 写入关键条目而不是错误条目，并将 NLog 配置为通过电子邮件发送一个别名，当出现关键事件时，操作团队中的几个人会收到该别名。

如果您需要严格实现“最后一分钟出现 25 个错误”语义，您可以将错误写入内存受限（最多 25 个项目）队列。如果队列长度达到 25，请检查队列中的第一项是否在最后一分钟内。如果是这样，请将严重错误写入日志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T21:49:34.417

记录很有趣。：/

您的选择基本上是：

1.  登录到数据库服务器 - 优点：易于从其他位置读取。缺点：需要数据库服务器。如果项目还没有包含一个，可能会很痛苦。此外，如果网络连接出现问题，则日志记录会失败。

2.  记录到事件日志 - 优点：本地写入速度快。可以远程读取..具有正确的用户权限。缺点：你会经常查询这个，而事件日志并不是为此而构建的。

3.  记录到文件 - 优点：写入速度极快。缺点：需要大量权限设置才能访问远程代码。可能已损坏/丢失/删除等。

4.  使用其他软件，例如 System Center Operations Manager。优势：这正是为之构建的类型。缺点：成本/设置。

* * *

这些是我的优先顺序。

# java - Vaadin：应用程序内部链接

> ID：12167919
> 
> 赞同：2
> 
> 时间：2012-08-28T21:41:00.537
> 
> 标签：java, vaadin

我想支持到我的网络应用程序的内部链接（例如，用户可能会收到一封确认电子邮件，其中包含指向他的购买/预订/应用程序内的任何内容的链接）。我正在使用 Vaadin 框架来构建我的 Web 应用程序 GUI。我知道 Vaadin 7 将支持此功能，但尚未发布；因此，我使用 Vaadin 6。

从文档中，我看到了两种方法：

1) UriHandler 文档：[https](https://vaadin.com/book/-/page/advanced.resources.html) ://vaadin.com/book/-/page/advanced.resources.html URL 示例：www.app.com/reservation/123

2) UriFragmentUtility 文档：[https](https://vaadin.com/book/-/page/advanced.urifu.html) ://vaadin.com/book/-/page/advanced.urifu.html URL 示例：www.app.com#reservation123

我已经用第二种方法构建了一个示例并且它有效。看来我可以用 UriHandler 实现类似的结果，对吗？如果是这样，每种方法的优缺点是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T07:25:03.693

导航到同一 URL 中的 URI 片段 - 本质上是使用 HTML 锚 - 不会强制浏览器重新加载整个页面。一个不同的 URL 将。

如果您的应用程序具有页眉/内容/页脚设计，那么使用 UriHandler 将使浏览器在每个导航上重新布局页眉和页脚。这对用户来说是显而易见的。URIFragmentHandler 不需要这样做。

除了 URL 本身的美感之外，我不知道 UriHandler 相对于 UriFragmentUtility 的任何优势。我们在一个大型应用程序（数百个屏幕）中成功地使用了 UriFragment 方法，效果很好。

# vb.net - GetOccurrence 总是抛出异常

> ID：12167921
> 
> 赞同：9
> 
> 时间：2012-08-28T21:41:04.607
> 
> 标签：vb.net, outlook, office-interop

我一直在尝试通过 Outlook 互操作类从 Outlook 中获取约会。特别是那些重复约会的人。我曾尝试使用互操作库的 v12 和 v14 并获得相同的结果。以下代码对我来说总是导致相同的异常。

代码：

```
Dim pattern As Outlook.RecurrencePattern = appt.GetRecurrencePattern()
Dim recur As Microsoft.Office.Interop.Outlook.AppointmentItem = Nothing
recur = rp.GetOccurrence(Now()) 
```

例外：

> 您更改了此项目的重复周期之一，此实例不再存在。关闭所有打开的项目，然后重试。

注意：我为 GetOccurrence 的参数使用了不同的值，我只使用“now()”来简化代码/问题。所以我认为问题不在于使用 Now()。我尝试了 DateTime.Parse("8/28/2012") 或 DateTime.Parse("8/28/2012 5:00pm") 并抛出了名称异常。

我从这里查看了示例：[Question 1](https://stackoverflow.com/questions/90899/net-get-all-outlook-calendar-items/92184 "问题 1")，[Question 2](https://stackoverflow.com/questions/8043633/outlook-filter-items-get-all-recurring-appointments-in-a-week-range)。两者似乎都没有同样的问题。我已经尝试了关闭对象、释放它们以及将它们归零（无）的每一种排列方式。（例如[Microsoft Office 互操作 - 技巧和陷阱](http://jynxeddevelopment.blogspot.com/)）。我直接从 MSDN（例如：[MDSN](http://msdn.microsoft.com/en-us/library/office/ff184586.aspx)）复制并粘贴了示例，结果相同。我完全没有想法！

我在 Windows Server 2008 R2 64 位操作系统上运行，使用 Visual Studio 2010、.NET 4.0 和 Outlook 2007。

这是一个更完整的代码示例，它总是为我抛出异常：

```
 Public Sub TestOutlook()
    Dim oApp As Outlook.Application = Nothing
    Dim mapiNamespace As Outlook.[NameSpace] = Nothing
    Dim calFolder As Outlook.MAPIFolder = Nothing
    Dim calItems As Outlook.Items = Nothing

    oApp = New Outlook.Application()
    mapiNamespace = oApp.GetNamespace("MAPI")
    calFolder = mapiNamespace.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderCalendar)
    calItems = calFolder.Items
    calItems.IncludeRecurrences = True

    For itemIndex As Integer = 1 To calItems.Count

        Dim item As Outlook.AppointmentItem = Nothing
        item = calFolder.Items.Item(itemIndex)

        If item.IsRecurring Then
            Dim rp As Outlook.RecurrencePattern = Nothing
            rp = item.GetRecurrencePattern()
            item.Close(Outlook.OlInspectorClose.olDiscard)
            CleanUpComObject(item)
            item = Nothing
            GC.Collect()

            Try
                rp.GetOccurrence(Now)
            Catch ex As System.Exception
                Debug.WriteLine("Ex with GetOccurrence: " & ex.Message)
            End Try

        End If
        If item IsNot Nothing Then item.Close(Outlook.OlInspectorClose.olDiscard)
        CleanUpComObject(item)
        item = Nothing
        GC.Collect()
    Next

    CleanUpComObject(calItems)
    CleanUpComObject(calFolder)
    CleanUpComObject(mapiNamespace)
    oApp.Quit()
    CleanUpComObject(oApp)
    GC.Collect()
End Sub

Private Sub CleanUpComObject(obj As Object)
    Try
        If obj IsNot Nothing AndAlso System.Runtime.InteropServices.Marshal.IsComObject(obj) Then
            System.Runtime.InteropServices.Marshal.FinalReleaseComObject(obj)
            obj = Nothing
        End If
    Catch ex As System.Exception
        Debug.WriteLine("Exception in Clean up: " & ex.Message)
    End Try
End Sub 
```

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T14:17:09.720

在过去的几个小时里，我一直在努力解决完全相同的问题，最后我找到了解决方案。似乎 GetOccurrence() 总是抛出该错误，除非传递的 DateTime 值与重复约会的实例相匹配 - 而让我感到震惊的是 DateTime 值必须在日期**和**时间上都匹配。

这是您的代码的一个版本，它从 RecurrencePattern 中获取时间并将其添加到传递给 GetOccurence() 的 DateTime 值中，然后它应该正确地找到落在所选日期的约会的任何实例。

```
Dim item As Outlook.AppointmentItem = Nothing 
item = calFolder.Items.Item(itemIndex) 

If item.IsRecurring Then 
    Dim rp As Outlook.RecurrencePattern = Nothing 
    rp = item.GetRecurrencePattern() 

    Dim dt2 as DateTime = DateTime.Parse("8/28/2012")
    dt2 = dt2.AddHours(item.Start.Hour)
    dt2 = dt2.AddMinutes(item.Start.Minute)
    dt2 = dt2.AddSeconds(item.Start.Second)

    item.Close(Outlook.OlInspectorClose.olDiscard) 
    CleanUpComObject(item) 
    item = Nothing 
    GC.Collect()  

    Try 
        rp.GetOccurrence(dt2)

    Catch ex1 As System.Runtime.InteropServices.COMException

// Do Nothing, let this error go.  No instance of the appointment falls on this date.

    Catch ex As System.Exception
        Debug.WriteLine("Ex with GetOccurrence: " & ex.Message) 
    End Try 

End If 
```

请注意，我是 C# 开发人员，因此上面可能存在语法错误，因为它是 OP 代码和我从 C# 转换的代码的合并，并且尚未通过编译器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-05T15:18:09.683

对于 Excel 的 VBA，这很愚蠢但很简单：使用 .getOc​​currence(x)，x 必须是 Date，而不是 Double（并且必须完全匹配某个事件）。dim x as Double obj.getOc​​currence(x) 不起作用 obj.getOc​​currence(CDate(x)) 工作正常

# c# - 如何将对象数组作为单个参数传递给方法？

> ID：12167924
> 
> 赞同：1
> 
> 时间：2012-08-28T21:41:13.860
> 
> 标签：c#, .net, parameters, delegates, dynamic-invoke

我有以下代码：

```
public class MyClass
{
    private Delegate m_action;
    public object[] m_args;

    public MyClass()
    {

    }

    public MyClass(Delegate action, params object[] args)
    {
        m_args = args;
        m_action = action;
    }

    public void Execute()
    {
        m_action.DynamicInvoke(m_args);
    }
} 
```

这种方法的问题在于 m_args 本身就是一个对象，并且它的内容没有被展平到单独的参数条目中。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T21:47:29.233

我认为你错了。`params`似乎按预期工作。这是一个更简单的示例，表明它有效：

```
static void f(params object[] x)
{
    Console.WriteLine(x.Length);
}

public static void Main()
{
    object[] x = { 1, 2 };
    f(x);
} 
```

结果：

```
2 
```

在线查看它：[ideone](http://ideone.com/SGbG5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:41:14.913

这就像你想象的那样工作。

```
public class MyClass
{
  private Delegate m_action;
  public object[] m_args;

  public MyClass()
  {
  }

  public MyClass( Delegate action , params object[] args )
  {
    m_args = args;
    m_action = action;
  }

  public void Execute()
  {
    m_action.DynamicInvoke( m_args );
  }
}

class Program
{
  static void Main( string[] args )
  {
    Type       tSelf          = typeof(Program) ;
    MethodInfo mi             = tSelf.GetMethod( "FooBar" ) ;
    Delegate   methodDelegate = Delegate.CreateDelegate( typeof(Action<int,int,int>) , mi ) ;
    MyClass    instance      = new MyClass( methodDelegate , 101 , 102 , 103 ) ;

    instance.Execute() ;

    return;
  }

  public static void FooBar( int x , int y , int z )
  {
    Console.WriteLine( "x:{0}, y:{1}, z:{2}" , x , y , z ) ;
    return ;
  }

} 
```

# java - 如何使用 Jenkins 将 Selenium 测试重定向到远程机器

> ID：12167925
> 
> 赞同：3
> 
> 时间：2012-08-28T21:41:17.197
> 
> 标签：java, maven, selenium, jenkins, selenium-webdriver

我在 Linux 上使用来自 Jenkins 的 Maven 运行 WebDriver 测试。我的 selenium 自动化测试失败了，因为没有打开浏览器。我正在考虑重定向我的测试并在远程机器（Windows）上运行它们。怎么做到呢？如果你有更好的想法，请说出来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T08:08:20.433

从我的角度来看，[Selenium 2 Grid](http://code.google.com/p/selenium/wiki/Grid2)是要走的路

您可以通过批处理文件、JSON 或 ant 启动 Grid...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T09:56:15.143

您可以在必须创建集线器的地方使用 Selenium Grid，集线器是启动服务器然后创建节点的地方，节点是您要运行测试的地方。你可以从[这里](http://seleniumhq.org/docs/07_selenium_grid.html)学习。

# cuda - 强制 CUDA 将寄存器用于变量

> ID：12167926
> 
> 赞同：15
> 
> 时间：2012-08-28T21:41:18.437
> 
> 标签：cuda

我的内核中有许多未使用的寄存器。我想告诉 CUDA 使用一些寄存器来保存一些数据，而不是每次需要时都读取全局数据。（我无法使用共享内存。）

```
__global__ void simple(float *gData) {
float rData[1024];
for(int i=0; i<1024; i++) {
  rData[i]=gData[i];
  }
// work on the data here
} 
```

编译 w/：nvcc -arch sm_20 --ptxas-options=-v simple.cu，我得到
0 字节堆栈帧，0 字节溢出存储，0 字节溢出加载
使用 2 个寄存器，40 字节 cmem[0]

```
__global__ void simple(float *gData) {
register float rData[1024];
for(int i=0; i<1024; i++) {
  rData[i]=gData[i];
  }
// work on the data here
} 
```

**注册**声明什么都不做。
0 字节堆栈帧，0 字节溢出存储，0 字节溢出加载
使用 2 个寄存器，40 字节 cmem[0]

```
__global__ void simple(float *gData) {
volatile float rData[1024];
for(int i=0; i<1024; i++) {
  rData[i]=gData[i];
  }
// work on the data here
} 
```

**volatile**声明创建堆栈存储：
4096 字节堆栈帧，0 字节溢出存储，0 字节溢出加载
使用 21 个电阻器，40 字节 cmem[0]

1) 有没有一种简单的方法可以告诉编译器为变量使用寄存器空间？
2）“堆栈框架”在哪里：寄存器，全局内存，本地内存，...？什么是栈帧？（GPU什么时候有栈了？虚拟栈？）
3）simple.ptx文件基本是空的：（nvcc -arch sm_20 -ptx simple.cu）

```
.loc 2 14 2
ret; 
```

知道在哪里可以找到真机/编译代码吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-29T01:04:01.587

*   动态索引数组不能存储在寄存器中，因为 GPU 寄存器文件不是动态可寻址的。
*   标量变量由编译器自动存储在寄存器中。
*   静态索引（即可以*在编译时*确定索引的位置），*小型*数组（例如，少于 16 个浮点数）*可以*由编译器存储在寄存器中。

SM 2.0 GPU (Fermi) 仅支持每个线程最多 63 个寄存器。如果超过此值，寄存器值将从本地（片外）内存溢出/填​​充，由缓存层次结构支持。SM 3.5 GPU 将其扩展到每个线程最多 255 个寄存器。

一般来说，正如 Jared 所提到的，每个线程使用过多的寄存器是不可取的，因为它会降低占用率，从而降低内核中的延迟隐藏能力。GPU 在并行性上蓬勃发展，并通过使用来自其他线程的工作来覆盖内存延迟来实现这一点。

因此，您可能不应该将数组优化为寄存器。相反，请确保跨线程对这些数组的内存访问尽可能接近顺序，以便最大化合并（即最小化内存事务）。

您给出的示例可能是共享内存的情况，*如果*：

1.  块中的许多线程使用相同的数据，或者
2.  每个线程的数组大小足够小，可以为多个线程块中的所有线程分配足够的空间（每个线程 1024 个浮点数非常多）。

正如 njuffa 提到的，你的内核只使用 2 个寄存器的原因是因为你没有对内核中的数据做任何有用的事情，并且死代码都被编译器消除了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-29T20:28:04.227

如前所述，寄存器（和 PTX“参数空间”）不能动态索引。为了做到这一点，编译器必须发出代码`switch...case`块来将动态索引转换为立即数。我不确定它是否会自动执行。您可以使用固定大小的元组结构和`switch...case`. C/C++ 元编程很可能是使此类代码易于管理的首选武器。

此外，对于 CUDA 4.0，使用命令行开关`-Xopencc=-O3`可以将除普通标量（例如数据结构）之外的任何内容映射到寄存器（参见[这篇文章](https://stackoverflow.com/questions/9938896/how-to-fix-slow-code-generated-by-cuda-4-1-compiler/12184946)）。对于 CUDA > 4.0，您必须禁用调试支持（没有`-G`命令行选项 - 只有在禁用调试时才会进行优化）。

PTX 级别允许比硬件更多的*虚拟寄存器。*这些在加载时映射到硬件寄存器。您指定的寄存器限制允许您设置生成的二进制文件使用的硬件资源的上限。当编译到 PTX 时，它可以作为编译器决定何时溢出（见下文）寄存器的启发式方法，以便可以满足某些并发需求（参见 CUDA 文档中的“启动边界”、“占用”和“并发内核执行” - 你可能也会喜欢[这个最有趣的演示](http://www.nvidia.com/content/gtc-2010/pdfs/2238_gtc2010.pdf)）。

对于 Fermi GPU，最多有 64 个硬件寄存器。第 64 个（或最后一个 - 当使用小于硬件的最大值时）被 ABI 用作堆栈指针，因此用于“寄存器溢出”（这意味着通过将寄存器的值临时存储在堆栈上来释放寄存器，并在更多寄存器时发生需要而不是可用）所以它是不可触及的。

# java - 在 play 2 框架中创建 scala.html 文件

> ID：12167929
> 
> 赞同：1
> 
> 时间：2012-08-28T21:41:30.190
> 
> 标签：java, html, playframework, playframework-2.0

希望现在能更好地解释我的问题，我正在使用带有 java 的 play 2 框架来开发带有 html5 画布的草图系统。

前端将由 3 个不同的视图（页面）组成。一种用于渲染 html5 画布，一种用于渲染提交表单和显示标签。第三页作为管理员页面。想要创建这些视图并能够从一个呈现的视图或页面导航到另一个。

对不起，如果这是一个基本问题，但玩框架有点新。

对我的任何建议。

我知道使用了@helper 标签，但似乎不知道如何去做。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T14:55:26.137

您不需要使用`@helper`或者`@tags`它们用于在其他模板中包含模板，只需使用普通渲染，首先创建文件：

*   应用程序/视图/canvas.scala.html
*   应用程序/视图/edit.scala.html
*   应用程序/视图/admin.scala.html

所以然后在你的`Appliaction`控制器中创建代表每个视图的三个动作

```
public static Result canvas(){
    return(views.html.canvas.render());    
}

public static Result canvas(){
    return(views.html.edit.render());    
}

public static Result canvas(){
    return(views.html.admin.render());    
} 
```

对于每个操作，您还需要创建一个`route`“`conf/routes`翻译”给定 URL 到正确操作（第一个是默认值）：

```
GET   /             controllers.Application.canvas()
GET   /edit         controllers.Application.edit()
GET   /admin        controllers.Application.admin() 
```

最后在每个视图中添加该块，以在每个页面上显示“主菜单”。注意：使用 reverseRouting 作为`href`链接以确保它们始终正确 - 即使您更改了路由中的某些内容（事实上，在这里您可以使用 @tags 将此块从一个文件包含到多个视图中，但是现在手动放置） ：

```
<div class="main-nav">
    <a href='@routes.Application.canvas()'>Canvas page</a>
    <a href='@routes.Application.edit()'>Edit form</a>
    <a href='@routes.Application.admin()'>Admin area</a>
</div> 
```

您现在拥有包含 3 个操作的基本应用程序示例，`view`每个操作都有单独的操作。

最后，不要生我的气，但你需要花更多的时间研究[官方文档](http://www.playframework.org/documentation/2.0.3/JavaHome)并包含Java示例。我向您展示了基本场景，它允许您在三个页面之间导航，仅此而已。很可能编写工作应用程序是不够的，但是描述它是没有意义的——因为它已经在文档中描述并在示例中演示。

# c - 如何在 C 中读取任意长的行？

> ID：12167946
> 
> 赞同：7
> 
> 时间：2012-08-28T21:43:08.727
> 
> 标签：c

我想`getline`在 C++ 中具有等效的（在 C 中）：

```
std::string s;
getline(std::cin,s); // reads an arbitrarily long line and
                     // inserts its contents on s 
```

有没有办法在 C 中做这样的事情？我正在寻找看起来像这样的东西：

```
char* s;
getline(stdin,s); // allocates the space necessary to fit the read
                  // line and make s point to it 
```

**编辑**：我决定在`getline`最后使用 POSIX 函数，因为我在 Linux 上（`man getline`如果你不知道我在说什么，请运行），但 Michael Burr 提供了一个`getline`在其他操作系统上工作`getline`的实现默认情况下不可用。即使他的实施不是可以想象的最有效的实施，它也可以按照我的意愿完成工作，因此我将其标记为我的问题的答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T23:54:14.267

如果您无权访问 POSIX`getline()`实现，这里有一个公共领域的实现，我一直在身边。

我添加了一个小`getline_simple()`函数，它只返回动态分配的缓冲区中的下一行。如果您对详细的错误处理不感兴趣，可以使用该函数逐行读取文件：

```
#define _CRT_SECURE_NO_WARNINGS 1

#include <assert.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stdio.h>
#include <errno.h>
#include <limits.h>
#include <sys/types.h>

#if !__GNUC__
#if _WIN64
typedef long long ssize_t;
#else
typedef long ssize_t;
#endif
#endif

#if !defined(SSIZE_MAX)
#define SSIZE_MAX ((ssize_t)(SIZE_MAX/2))
#endif

#if !defined(EOVERFLOW)
#define EOVERFLOW (ERANGE)      /* is there something better to use? */
#endif

/*
    nx_getdelim()

    a version of the POSIX getdelim() function that return error codes directly
    instead of messing with the global `errno` value.
*/
ssize_t nx_getdelim(char **lineptr, size_t *n, int delim, FILE *stream);

/*
    getdelim_calc_new_alloc()

    Helper function for getdelim() to figure out an appropriate new
    allocation size that's not too small or too big.

    These numbers seem to work pretty well for most text files.

    returns the input value if it decides that new allocation block
    would be just too big (the caller should handle this as 
    an error).
*/
static
size_t nx_getdelim_get_realloc_size( size_t current_size)
{
    enum {
        k_min_realloc_inc = 32,
        k_max_realloc_inc = 1024,
    };

    if (SSIZE_MAX < current_size) return current_size;

    if (current_size <= k_min_realloc_inc) return current_size + k_min_realloc_inc;

    if (current_size >= k_max_realloc_inc) return current_size + k_max_realloc_inc;

    return current_size * 2;
}

/*
    getdelim_append() 

    a helper function for getdelim() that adds a new character to 
    the outbuffer, reallocating as necessary to ensure the character
    and a following null terminator can fit

*/
static
int nx_getdelim_append( char** lineptr, size_t* bufsize, size_t count, char ch)
{
    char* tmp = NULL;
    size_t tmp_size = 0;

    // assert the contracts for this functions inputs
    assert( lineptr != NULL);
    assert( bufsize != NULL);

    if (count >= (((size_t) SSIZE_MAX) + 1)) {
        // writing more than SSIZE_MAX to the buffer isn't supported
        return -1;
    }

    tmp = *lineptr;
    tmp_size = tmp ? *bufsize : 0;

    // need room for the character plus the null terminator
    if ((count + 2) > tmp_size) {
        tmp_size = nx_getdelim_get_realloc_size( tmp_size);

        tmp = (char*) realloc( tmp, tmp_size);

        if (!tmp) {
            return -1;
        }
    }

    *lineptr = tmp;
    *bufsize = tmp_size;

    // remember, the reallocation size calculation might not have 
    // changed the block size, so we have to check again
    if (tmp && ((count+2) <= tmp_size)) {
        tmp[count++] = ch;
        tmp[count] = 0;
        return 1;
    }

    return -1;
}

/*
    nx_getdelim()

    A getdelim() function modeled on the Linux/POSIX/GNU 
    function of the same name.

    Read data into a dynamically resizable buffer until 
    EOF or until a delimiter character is found.  The returned
    data will be null terminated (unless there's an error allocating
    memory that prevents it).

    params:

        lineptr -   a pointer to a char* allocated by malloc() 
                    (actually any pointer that can legitimately be
                    passed to free()).  *lineptr will be updated 
                    by getdelim() if the memory block needs to be 
                    reallocated to accommodate the input data.

                    *lineptr can be NULL (though lineptr itself cannot),
                    in which case the function will allocate any necessary 
                    buffer.

        n -         a pointer to a size_t object that contains the size of 
                    the buffer pointed to by *lineptr (if non-NULL).

                    The size of whatever buff the resulting data is 
                    returned in will be passed back in *n

        delim -     the delimiter character.  The function will stop
                    reading one this character is read form the stream.

                    It will be included in the returned data, and a
                    null terminator character will follow it.

        stream -    A FILE* stream object to read data from.

    Returns:

        The number of characters placed in the returned buffer, including
        the delimiter character, but not including the terminating null.

        If no characters are read and EOF is set (or attempting to read 
        from the stream on the first attempt caused the eof indication 
        to be set), a null terminator will be written to the buffer and
        0 will be returned.

        If an error occurs while reading the stream, a 0 will be returned.
        A null terminator will not necessarily be at the end of the data 
        written.

        On the following error conditions, the negative value of the error 
        code will be returned:

            ENOMEM:     out of memory
            EOVERFLOW:  SSIZE_MAX character written to te buffer before 
                        reaching the delimiter
                        (on Windows, EOVERFLOW is mapped to ERANGE)

         The buffer will not necessarily be null terminated in these cases.

    Notes:

        The returned data might include embedded nulls (if they exist
        in the data stream) - in that case, the return value of the
        function is the only way to reliably determine how much data
        was placed in the buffer.

        If the function returns 0 use feof() and/or ferror() to determine
        which case caused the return.

        If EOF is returned after having written one or more characters
        to the buffer, a normal count will be returned (but there will 
        be no delimiter character in the buffer).  

        If 0 is returned and ferror() returns a non-zero value,
        the data buffer may not be null terminated.

        In other cases where a negative value is returned, the data
        buffer is not necessarily null terminated and there 
        is no reliable means to determining what data in the buffer is
        valid.

        The pointer returned in *lineptr and the buffer size
        returned in *n will be valid on error returns unless
        NULL pointers are passed in for one or more of these
        parameters (in which case the return value will be -EINVAL).

*/
ssize_t nx_getdelim(char **lineptr, size_t *n, int delim, FILE *stream)
{
    int retval = 0;

    ssize_t result = 0;    
    char* line = NULL;
    size_t size = 0;
    size_t count = 0;
    int err = 0;
    int ch = 0;

    if (!lineptr || !n) {
        return -EINVAL;
    }

    line = *lineptr;
    size = *n;

    for (;;) {
        ch = fgetc( stream);

        if (ch == EOF) {
            break;
        }

        result = nx_getdelim_append( &line, &size, count, ch);

        // check for error adding to the buffer (ie., out of memory)
        if (result < 0) {
            err = -ENOMEM;
            break;
        }

        ++count;

        // check if we're done because we've found the delimiter
        if ((unsigned char)ch == (unsigned char)delim) {
            break;
        }

        // check if we're passing the maximum supported buffer size
        if (count > SSIZE_MAX) {
            err = -EOVERFLOW;
            break;
        }
    }

    // update the caller's data
    *lineptr = line;
    *n = size;

    // check for various error returns
    if (err != 0) {
        return err;
    }

    if (ferror(stream)) {
        return 0;
    }

    if (feof(stream) && (count == 0)) {
        if (nx_getdelim_append( &line, &size, count, 0) < 0) {
            return -ENOMEM;
        }
    }

    return count;
}

ssize_t nx_getline(char **lineptr, size_t *n, FILE *stream)
{
    return nx_getdelim( lineptr, n, '\n', stream);
}

/*
    versions of getline() and getdelim() that attempt to follow
    POSIX semantics (ie. they set errno on error returns and
    return -1 when the stream error indicator or end-of-file
    indicator is set (ie., ferror() or feof() would return
    non-zero).
*/
ssize_t getdelim(char **lineptr, size_t *n, char delim, FILE *stream)
{
    ssize_t retval = nx_getdelim( lineptr, n, delim, stream);

    if (retval < 0) {
        errno = -retval;
        retval = -1;
    }

    if (retval == 0) {
        retval = -1;
    }

    return retval;
}

ssize_t getline(char **lineptr, size_t *n, FILE *stream)
{
    return getdelim( lineptr, n, '\n', stream);
}

/* 
    A simple function to return the next line of text in a dynamically 
    allocated buffer

    On error a NULL pointer is returned.  When the caller no longer needs the 
    returned data, the pointer returned should be passed to `free()`.

 */
char* getline_simple( FILE* stream)
{
    char* p = NULL;
    size_t size = 0;

    ssize_t result = getline( &p, &size, stream);

    if (result < 0) {
        free(p);
        p = NULL;
    }

    return p;
} 
```

免责声明 - 这段代码对我的目的来说已经足够好了，但我不保证你会这样。如果打算使用此代码，请进行尽职调查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T21:45:22.027

您需要在循环中逐步执行此操作，`fgets()`用于读取数据块，并`realloc()`在未捕获行尾时扩大内存缓冲区。

不过，可能有一些库函数可以为您执行此操作。

```
#define BLOCKSIZE 1024

char *readAllocLine(FILE *fp) {
    char    *line = NULL;
    size_t  maxlength = 0;
    assert(fp != NULL);
    for(;;) { // Read the line in BLOCKSIZE -blocks.
        char *crlf, *block;

        maxlength += BLOCKSIZE;
        // This exploits realloc behaviour upon hitting NULL
        if (NULL == (line = realloc(line, maxlength+1))) {
            break; // realloc error returns NULL.
        }
        block = line + maxlength - BLOCKSIZE;
        // BLOCKSIZE+1 to accommodate final zero
        if (NULL == fgets(block, BLOCKSIZE+1, fp)) {
            // TODO: rewind fp in case of error.
            if (block == line) {
                    // Error.
                    free(line); line = NULL;
            }
            break;
        }
        // This was the last block iff we find a CRLF inside.
        if (NULL != (crlf = strchr(block, '\n'))) {
            *crlf = 0x0;
            if (crlf != block) {
                if ('\r' == *(--crlf))
                    *crlf = 0x0;
            }
            break;
        } /* if */
    } /* for */
    return line;
} 
```

用这个主测试

```
int main(int argc, char **argv) {
    FILE *fp;
    if (argc !=2 ) {
            fprintf(stderr, "Syntax: %s testfile.txt\n", argv[0]);
            return -1;
    }
    fp = fopen(argv[1], "r");
    while(!feof(fp)) {
        char *s = readAllocLine(fp);
        if (NULL != s) {
            printf("\"%s\"\n", s);
            free(s);
        } else {
            printf("--- end of file ---\n");
            break;
        }
    }
    fclose(fp);
    return 0;
} 
```

这个脚本：

```
for i in $( seq 1020 1028 ); do
    # Didn't want to think over 
    yes x | tr -d "\n" | dd of=test bs=1 count=$i 2>/dev/null
    ./readline test | wc -c | tr "\n" ","
    echo "" >> test
    ./readline test | wc -c | tr "\n" ","
    echo "" >> test
    ./readline test | wc -c
done 
```

# url - Magento：如何从同一商店的另一个网站/商店指向主网站

> ID：12167954
> 
> 赞同：0
> 
> 时间：2012-08-28T21:43:39.190
> 
> 标签：url, magento

我试图弄清楚如何将徽标地址指向主网站，以及如何将一些链接指向正确的 url，而不是指向同一商店的 url。

对于徽标：

我知道在 header.phtml 中，我可以通过这样做将徽标的 url 指向我想要的任何地址。

改变

```
<a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" 
```

至

```
<a href="http://domainname.com" title="<?php echo $this->getLogoAlt() ?>" 
```

但我想知道是否有办法始终指向主页而不更改为实际 URL。问题是我在同一家商店中有多个网站/商店，如果用户访问另一个网站，徽标的 URL 将指向商店的地址，而不是主页。例如。

这就是它在主页上指向的内容。

域名.com/index.php/

这就是它从同一 magento 商店中的其他网站/商店指向的内容。

domainname.com/storename/index.php/

因此，一旦在另一个网站/商店上，它将永远不会指向基本 url，但就像我说的那样，我试图避免在 header.phtml 中使用域名。如果没有其他办法，我想应该怎么做。

谢谢，

**编辑：**经过一番阅读后，我发现我可以使用以下内容指向基地址。

```
<?php echo Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_WEB); ?> 
```

所以它会这样

```
<a href="<?php echo Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_WEB); ?>" title="<?php echo $this->getLogoAlt() ?>" 
```

这可行，但除此之外还有其他可能的方法吗？

好的，我也会在这里发布这个，因为它都是同一主题的一部分，我还不想打开另一个问题。

除此之外，我试图将静态块（megamenu）中的链接链接回主网站，以保持网站结构的清洁。

例如，我有这个：

```
<a class="drop" href="{{store direct_url='shoes.html'}}">Shoes</a> 
```

因此，如果我在主网站上，菜单上的链接会是这样的。

```
domainname.com/index.php/shoes.html/ 
```

但是如果我去同一个magento商店内的另一个网站/商店，让我们说“电子产品”，菜单上的链接会变成这个。

```
domainname.com/electronics/index.php/shoes.html/ 
```

但我想要的是菜单上的链接始终为 domainname.com/index.php/shoes.html/ 无论我在哪个网站/商店。原因是因为我有两个菜单，一个是全局的，一个是商店的- 特定菜单，我可以处理网站/商店特定菜单，因为它是仅对该商店可见的静态块，因此客户在切换到另一个网站/商店时将看不到该菜单，但全局菜单将始终可见并且此全局菜单中包含所有类别，而网站/商店特定菜单仅显示我想要的特定商店的类别。

uff，我希望我可以很容易理解=/

**编辑：**

我忘了提到 if 而不是使用

```
href="{{store direct_url='shoes.html'}}"
I use
href="domainname.com/shoes.html/" 
```

只有顶级类别会从我所在的 w/e 网站/商店链接到主网站，但子类别将显示为这样。

```
domainname.com/electronics/index.php/shoes.html/ 
```

所以这对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:53:15.753

我们`<a href="{{store url='blah.html'}}">blah</a>`在我们的主页上使用，它允许我们创建链接到每个商店内的产品的图块。

因此，在 中`English store`，代码将链接到`domain.com/us_en/blah.html`. 中`Spanish store`，代码想`domain.com/us_sp/blah.html`。

网站网址可能有类似的链接，但我们只有一个网站，所以我没有使用过。

# knockout.js - 可编辑的字符串 knockoutJS 自定义绑定

> ID：12167956
> 
> 赞同：0
> 
> 时间：2012-08-28T21:44:00.107
> 
> 标签：knockout.js, ko-custom-binding

我经常在需要更改的网页上显示文本数据。

目前，我编写了一个自定义 mouseEvent 处理程序来显示一个“编辑”按钮弹出一个`div`带有可观察边界`span`的鼠标悬停。如果用户单击它，我会隐藏一个`span`via `visible`knockoutJS 绑定并显示一个文本`input`以允许编辑。在选项卡上，我保存编辑更改并再次显示更新`span`。

是否有包含所有这些功能的自定义开源 KOJS 绑定。我不是要求为我写它，只是指出它，因为这个任务很常见，而且 KO 似乎有一个很好的基础来优雅地实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-13T20:25:48.103

实际上，有这样的东西，它甚至看起来很棒。

[https://github.com/brianchance/knockout-x-editable](https://github.com/brianchance/knockout-x-editable)

在这里查看它的实际效果：http: [//vitalets.github.io/x-editable/demo-bs3.html](http://vitalets.github.io/x-editable/demo-bs3.html)

希望有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T07:08:46.110

您的问题是如何使用字符串作为模板引擎的源代码？如果是这样，我已经为我的一个绑定做到了

[https://github.com/AndersMalmgren/Knockout.Bindings/blob/master/src/knockout.bindings.js](https://github.com/AndersMalmgren/Knockout.Bindings/blob/master/src/knockout.bindings.js)

我的仓库中的相关代码

```
var stringTemplateSource = function (template) {
    this.template = template;
};

stringTemplateSource.prototype.text = function () {
    return this.template;
};

var stringTemplateEngine = new ko.nativeTemplateEngine();
stringTemplateEngine.makeTemplateSource = function (template) {
    return new stringTemplateSource(template);
}; 
```

并使用它

```
ko.bindingHandlers.myCustomBinding = {
        init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
            ko.renderTemplate('<span data-bind="text: $data"></span>', bindingContext.createChildContext(valueAccessor()), { templateEngine: stringTemplateEngine }, element, "replaceChildren");

            return { controlsDescendantBindings: true };
        } 
```

# .net - 为什么VS2010没有水晶报表？

> ID：12167959
> 
> 赞同：0
> 
> 时间：2012-08-28T21:44:18.127
> 
> 标签：.net, visual-studio-2010, oracle, reporting

我从 VS2008 开始就一直在使用 CrystalReports。为什么在 VS2010 中缺少它？MS不再需要它有什么具体原因吗？如果不是 CrystalReports，VS2010（作为默认插件）主要使用哪种报表工具？我对SSRS不太了解。它是独立于数据库的吗？

SSRS 是 CR 的替代品吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T22:16:10.360

您可以免费获得 Crystal Reports for VS2010，但您必须单独下载和安装。从[这里获取](http://www.businessobjects.com/jump/xi/crvs2010/us2_default.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T23:28:34.187

从 SSRS 2008 R1 开始，SSRS 几乎可以做任何 Crystal Reports 可以做的事情。此外，SSRS 中的图表和映射比 Crystal Report 更好。Crystal Reports 相对于 SSRS 仍有一些优势，例如性能、准确的分页和更好的报表设计可用性，但这些优势正在变得微弱，许多公司正在将他们的 Crystal Reports 迁移到 SSRS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T21:48:42.663

Microsoft 非常倾向于使用 SQL Server Reporting Services (SSRS) 来报告使用其工具编写的应用程序。作为在 Crystal/Business Objects 环境中具有相当大的条纹的人，它是一个受欢迎的替代方案。鉴于它的名字，我认为它可能很明显与 SQL Server 密切相关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T21:49:52.467

我相信 Reporting Services 是 Microsoft 首选的报告工具。虽然 Reporting Services 肯定倾向于与 SQL Server 一起使用。可以通过 ODBC 将其他数据库与它一起使用（我们很久以前就将它与一些 Informix 报告一起使用）。VS2010 中的 Webforms 和 Winforms 的客户端组件运行良好。

# javascript - 谷歌如何保护其 JavaScript 免受机器人执行？

> ID：12167963
> 
> 赞同：0
> 
> 时间：2012-08-28T21:44:29.577
> 
> 标签：javascript, bots

我想让我的网站的某些区域仅供浏览器用户访问，而自动化多线程机器人无法访问。我这样做是为了保护我的数据，这是我计划使用的措施之一。

我想要求所有请求都包含一对数字，必须用 javascript 计算，这将被混淆和模糊。但是，在那之后，没有什么可以阻止机器人编写者抓住像 htmlunit 这样的 javascrpt 机器人引擎并执行 javascripts。

谷歌似乎以某种方式解决了这个问题。我记得大多数时候我在启用了 adwords 的页面上运行 HtmlUnit，脚本引擎崩溃了。然而，在真正的浏览器中，页面工作得很好。

一定有诀窍。谁能指出我如何在我的页面上执行此操作的好信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T00:58:38.927

根据您的要求，我将实施某种类型的身份验证。当然，关于您的用户群的规模和知名度。一些选项是：

1.  **从 javascript 文件或 ajax 调用中包含数据。** 大多数机器人不会从网页上抓取包含 javascript 的文本。也许加载一个空白页面，给一个短暂的延迟（2-3 秒），然后加载内容。这样，大多数（？）机器人只会检测到空白页。
2.  **HTTP 身份验证**需要用户输入用户名和密码，但管理起来非常简单。
3.  **验证码**
4.  **可能使用 php 的**用户帐户。**不过，这可能比您想要的开销更大。**

 *** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-07-02T11:01:40.063

在可用性和安全性之间找到平衡总是很困难的。大多数（高级）机器人都可以解析 javascript，甚至像 Facebook 或 Google 这样的大公司在打击垃圾邮件和其他有害机器人方面也遇到了麻烦。

上面的大多数答案都可以帮助您使机器人更难。对可用性影响最小的一些可能的解决方案是：

**facebook登录**
用户无需重新注册，可以使用自己的facebook账号登录。

网址：[https ://developers.facebook.com/docs/facebook-login/v2.0](https://developers.facebook.com/docs/facebook-login/v2.0)

**谷歌**
验证码 谷歌 的验证码引擎非常好，易于实现。
该引擎还没有被机器人破坏。

网址：[https ://www.google.com/recaptcha/intro/index.html](https://www.google.com/recaptcha/intro/index.html)**

# django - 在嵌套的 for 循环中设置计数器

> ID：12167964
> 
> 赞同：0
> 
> 时间：2012-08-28T21:44:47.197
> 
> 标签：django, for-loop, counter

我正在使用 django 构建一个电子商务网站，并且正在处理列出所有订单的页面。我想设置一个计数器，将订单从 1 编号到任何值。但是，如果我设置了一个 for 循环来执行此操作，那么每次我跳回原始 forloop 时，数字不会被重置吗？

现在我使用主键对所有订单进行编号，但我想将其更改为从 1 开始。 ![在此处输入图像描述](../Images/9f499c36279141d65254ed9bb5e70e37.png)

```
<!DOCTYPE html>
<html>
<body>

Order page

{% for location, orders in orderlocations.items %}
    <table>
        <tr>
            <td>#</td>
            <td>Time</td>
            <td>Location</td>
            <td>Name</td>
            <td>Email</td>
            <td>Phone</td>
            <td>Order</td>
            <td>Order Quantity</td>
            <td>Delivered</td>

        </tr>

        {% for ord in orders %}
            {% for food in ord.orderitem_set.all %}

            <tr>
                {% if forloop.counter == 1 %}
                    <td>{{ord.pk}}</td>
                    <td>{{ord.time}}</td>
                    <td>{{ord.location}}</td>
                    <td>{{ord.user.first_name}}</td>
                    <td>{{ord.user.email}}</td>
                    <td>{{ord.user.get_profile.phone}}</td>

                {% else %}
                    <td colspan="4"></td>
                {% endif %}

                    <td>{{food.name}}</td>
                    <td>{{food.quantity}}</td>

                <td>
                    {% if forloop.counter == 1 %} 
                        <form action="" method="POST">
                            <input type="hidden" name="order-id" value="{{ ord.pk }}"/>
                            <input type="hidden" name="action=" value="toggledelivery"/>
                            <button type="button">{% if not ord.delivered %}Not {% endif %}Delivered</button>
                        </form>
                    {% endif %}        
                </td>
            </tr>
            {% endfor %}
        {% endfor %}

    </table>  

{% endfor %}

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T22:01:51.843

而不是`<td>{{ord.pk}}</td>`使用`<td>{{ forloop.counter }}</td>`.

每个 for 循环都有自己的范围。如果你想要外循环的计数器，你会使用`forloop.parentloop.counter`

[Django For 循环](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#for)

# ruby-on-rails-3 - 应用程序布局中的 Rails 路由 current_page 问题

> ID：12167965
> 
> 赞同：0
> 
> 时间：2012-08-28T21:44:46.890
> 
> 标签：ruby-on-rails-3, navbar, current-page

我觉得这应该很简单，但由于某种原因我无法弄清楚。当用户在显示页面上时，我只想将编辑和删除操作添加到导航栏。

我收到一个路由错误，说主页或新页面上不存在编辑操作，这是我的代码：

```
layouts/application.html.haml

.nav-collapse
   %ul.nav.pull-right
      %li= link_to "All Articles", root_path
      %li= link_to "New Article", new_article_path
      - if current_page?(@article)
        %li= link_to 'Edit', edit_article_path
        %li= link_to 'Delete', { :action => :destroy, :id => @article.id }, :method => :delete, :confirm => 'Are you sure?' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:51:00.417

指向页面的链接`edit`应该具有`id`您要编辑的对象的（或相关的）。所以，链接助手应该写成：

`link_to 'Edit', edit_article_path(@article) # or explicitly (@article.id)`

# java - Timer Task 中的 Android run() 方法未执行

> ID：12167968
> 
> 赞同：0
> 
> 时间：2012-08-28T21:45:17.177
> 
> 标签：java, android

`onCreate()`代码开始`TimerTask`：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
Log.e(LOG_TAG, "Start Repeat Timer");
    TimerTask task = new RepeatingTask();
    Timer timer = new Timer();
    timer.scheduleAtFixedRate(task, 0, 3000);
    Log.e(LOG_TAG, "Started Repeat Timer");
} 
```

定时器任务代码：

```
public class RepeatingTask extends TimerTask {
     //private int len = 0; 
     //private byte[] input = new byte[len];

     public RepeatingTask() {
            Log.e(LOG_TAG, "In RepeatingTask()");
            Log.e(LOG_TAG, "Before inputJSON String");

            String hello = "hello world";
            //String inputJSON = getStringFromBuffer(new InputStreamReader(socket.getInputStream()));
            try {
                    inputJSON = ConvertByteArrayToString(readBytes(inputStr));
                    sendBytes(ConvertStringToByteArray(inputJSON), 0, ConvertStringToByteArray(inputJSON).length);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            //Convert 
            Log.e(LOG_TAG, "After inputJSON String:" + inputJSON); 

         //LOOK HERE FIRST  
         //inputJSON is what is received back from the server - Take the inputJSON 
         //String and use regular expressions HERE to remove all the other characters in the 
         //string except the payload JSON.
         //refreshViewModels(inputJSON);
     }

     @Override
     public void run() { 
          /*try {
              Log.e(LOG_TAG, "IN REPEATINGTHREAD-INPUTJSON");
              //outputstrwr.write(outputJSONserv);  //UNCOMMENT IF NEED TO SEND DATA TO GET JSON BACK
              //inputJSON = ConvertByteArrayToString(getBytesFromInputStream(inputStr));
              inputJSON = ConvertByteArrayToString(getFileBytes(inputStr));
          } catch (IOException e) {
              // TODO Auto-generated catch block
              e.printStackTrace();
          }

          Log.e(LOG_TAG, "IN REPEATINGTHREAD-INPUTJSON2:" + inputJSON);
          refreshViewModels(inputJSON);*/

      try {
          Log.e(LOG_TAG, "IN REPEATINGTHREAD-INPUTJSON");
          //outputstrwr.write(outputJSONserv);  //UNCOMMENT IF NEED TO SEND DATA TO GET JSON BACK
          //byte[] = myByteArray = readBytes(inputStr);
          sendBytes(ConvertStringToByteArray(outputJSONserv), 0, ConvertStringToByteArray(outputJSONserv).length);
          //sendBytes(myByteArray, 0, myByteArray.length);
          Log.e(LOG_TAG, "AFTER SENDING DATA");
          //inputJSON = ConvertByteArrayToString(getBytesFromInputStream(inputStr));
                  inputJSON = ConvertByteArrayToString(readBytes(inputStr));
                  Log.e(LOG_TAG, "IN REPEATINGTHREAD-INPUTJSON2:" + inputJSON);
          } 
      catch (IOException e) {
                  // TODO Auto-generated catch block
                  e.printStackTrace();
          }

      Log.e(LOG_TAG, "IN REPEATINGTHREAD-INPUTJSON3:" + inputJSON);
      refreshViewModels(inputJSON); 
     }
} 
```

inputStr`InputStream`用于读取字节并将它们转换为字符串。

`ConvertByteArrayToString()`只需将字节数组转换为`String`&`ConvertStringToByteArray()`将 a 转换`String`为 a`Byte[]`以便可以使用 . 发送数据`sendBytes(byte[], int, int)`。

我试图弄清楚为什么我的代码卡在这个 try/catch 语句中而没有抛出任何异常：

```
try {
                    inputJSON = ConvertByteArrayToString(readBytes(inputStr));
                    sendBytes(ConvertStringToByteArray(inputJSON), 0, ConvertStringToByteArray(inputJSON).length);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
```

这是我的`sendBytes()`方法：

```
 public void sendBytes(byte[] myByteArray, int start, int len) throws IOException {
        if (len < 0)
            throw new IllegalArgumentException("Negative length not allowed");
        if (start < 0 || start >= myByteArray.length)
            throw new IndexOutOfBoundsException("Out of bounds: " + start);
        // Other checks if needed.

        // May be better to save the streams in the support class;
        // just like the socket variable.
        OutputStream out = socket.getOutputStream(); 
        DataOutputStream dos = new DataOutputStream(out);

        dos.writeInt(len);
        if (len > 0) {
            dos.write(myByteArray, start, len);
        }
    } 
```

这是`getPayloadStr()`方法：

```
 public String getPayloadStr(String profileString) {
        Log.e("LOG_TAG", "Profile Str:"+profileString);
        Pattern pattern = Pattern.compile(".*?payload\":(.*)\\}");

        Log.e("LOG_TAG", "I got here 1");
        Matcher matcher = pattern.matcher(profileString);
        Log.e("LOG_TAG", "I got here 12");
        //Matcher m = responseCodePattern.matcher(firstHeader);
        matcher.matches();
        matcher.groupCount();
        //matcher.group(0);
        Log.e("LOG_TAG", "I got here 2"+matcher.group(1));
        return matcher.group(1);
    } 
```

这是我的`readBytes()`方法：

```
 public byte[] readBytes(InputStream in) throws IOException {
        // Again, probably better to store these objects references in the support class
        in = socket.getInputStream();
        DataInputStream dis = new DataInputStream(in);

        int len = dis.readInt();
        byte[] data = new byte[len];
        if (len > 0) {
            dis.readFully(data);
        }
        return data;
    } 
```

任何正确方向的帮助或指示将不胜感激。通过聊天提供的任何帮助也将不胜感激。如果需要，可以在聊天会话中发布或查看整个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:00:32.533

我的想法是：

*   将其留空并设置断点以 run() -希望已命中，否则您将在日志中看到 IN REPEATINGTHREAD-INPUTJSON 消息。如果不是，那么我不知道问题出在哪里，因为代码似乎没问题。
*   如果您看到，则问题出在构造函数中（问题1已隔离）

我认为这是问题所在：

int len = dis.readInt();

读取它是一种阻塞方法，因此您在 Even dispatcher 线程或 Main 线程或 Ui 线程中的代码 - 忘记了该平台上的名称是什么 - 可能正在等待，直到他可以读取 4 个字节。

根据此处的评论和代码请求，它是：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Log.e(LOG_TAG, "Start Repeat Timer");

        Thread thInitializer = new Thread() {
            @Override
            public void run() {
                TimerTask task = new RepeatingTask(); // here will block until is readed from socket, but will not block the UI

                //after read is done you can set  breakpoint to next statement, but it will repet the run method of the RepeatingTask in each 3 sec
                Timer timer = new Timer();
                timer.scheduleAtFixedRate(task, 0, 3000);
                Log.e(LOG_TAG, "Started Repeat Timer");
            }
        };
        thInitializer.start();
        // UI initialization is done, background thread is running an trying to initialize the network stuff        
    } 
```

# php - 使用 file_put_contents() 创建的 PHP 图像文件已损坏

> ID：12167970
> 
> 赞同：0
> 
> 时间：2012-08-28T21:45:25.413
> 
> 标签：php, apache, permissions, file-get-contents, gentoo

我正在使用`file_put_contents()`. 这是写作部分[PHP]：

```
$data = base64_decode( $datastring );
$res = file_put_contents( $path, $data );
$resultf = array();
$resultf["request"] = "setpic";
$resultf["result"] = strval($res);
$this->sendResponse(200, json_encode($resultf)); 
```

阅读部分遵循[PHP]：

```
$datastring = file_get_contents( $path );
$data = base64_encode( $datastring );
$resultf["request"] = "getpic";
$result0 = array();
$result0["path"] = $path;
$result0["data"] = $data;
$resultf["result"] = $result0;
$this->sendResponse(200, json_encode($resultf)); 
```

两者`$path`都是正确的。

尽管如此，尽管**文件是“正确”创建的**（我可以看到它们`ssh`的大小约为 9kB），但如果我`scp`认为图像文件的宽度和高度为 0，即我认为是**损坏的图像文件。**如果我尝试在我的 iOS 应用程序中使用 XCode 加载它们，我会收到以下错误：

```
ImageIO: <ERROR>  JPEG Corrupt JPEG data: 75 extraneous bytes before marker 0xdb 
```

请注意，包含文件夹具有 777 权限，与从父文件夹访问它们的 php web 服务相同的用户/组。**这种方法一直有效，直到我不幸地更改了根文件夹的所有者。**

非常感谢你的帮助。

# jquery - jQuery神秘问题

> ID：12167971
> 
> 赞同：0
> 
> 时间：2012-08-28T21:45:31.107
> 
> 标签：jquery, validation

我尝试使用通用验证函数，但我认为长度验证有问题：该函数在第二个输入上工作，但在第一个输入上不起作用，你可以在 jsFiddle 上看到：

[======> http://jsfiddle.net/RochesterFox/N2HyE/1/](http://jsfiddle.net/RochesterFox/N2HyE/1/)

的HTML：

```
 <input type="text" name="number" class="verify" conditions="requierd numeric"/>
    <input type="text" name="number2" class="verify" conditions="requierd lenght:5 numeric"/> 
```

的JavaScript：

```
function getVal(field, array){
            arr = jQuery.grep(array, function (value) {
                search = field;
                if(value.match(search)) return true;
                return false;
            });
            var vals = arr[0].split(':');
            return vals[1];
        }
        $('.verify').blur(function(){
            var conditions = $(this).attr('conditions').split(' ');
            var state = [];
            if ($.inArray('requierd', conditions) > -1){
                if($(this).val() === '') state.push('invalid');
                else state.push('valid');
            }
            else $(this).removeClass('invalid').addClass('valid');
            if ($.inArray('numeric', conditions) > -1){
                if($.isNumeric($(this).val()) === false) state.push('invalid');
                else state.push('valid');
            }
            if(getVal('lenght', conditions) != ''){
                if($(this).val().length < getVal('lenght', conditions)) state.push('invalid');
                else state.push('valid');
            }
            if(($.inArray('invalid', state) > -1) === false){
                $(this).removeClass('invalid').addClass('valid');
                verif();
            }
            else{
                $(this).removeClass('valid').addClass('invalid');
            }
        });

        function verif(){
            var state = 'none';
            $('.verify').each(function(){
                if($(this).hasClass('invalid')) state = 'invalid';
            });
            if(state != 'invalid'){
                //VALID !
                $('body').append('VALIDATED');
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:01:11.127

除了我上面的评论之外，我还用一个非常快速的修复方法将你分叉为 jsfiddle。

[http://jsfiddle.net/mNUfG/](http://jsfiddle.net/mNUfG/)

如果你真的不想使用一些现有的客户端验证库，你应该进一步清理你的代码，如果你不想更频繁地遇到这样的问题。

此外，您可能希望在 jsfiddle 中使用“JsLint”按钮来查找代码中的错误。

# jquery - 带有隐藏的jQuery水平滚动，可能只有css？

> ID：12167972
> 
> 赞同：1
> 
> 时间：2012-08-28T21:45:34.850
> 
> 标签：jquery, css, menu, scroll

我有一个很长的导航菜单，包含 10 个链接。

我需要做的是让链接穿过页面，然后当您接近导航结束时，您会看到一个选项滚动到查看菜单中的其他隐藏链接，然后是一个选项向后滚动。

我在这里找到了类似的东西，但需要水平放置。 [http://jsfiddle.net/CxbYf/2/](http://jsfiddle.net/CxbYf/2/)

如果可能的话，这只能用 CSS 来完成吗？溢出隐藏和滚动？

任何帮助都会很棒，

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T22:33:37.003

可以

## *[这个演示](http://jsbin.com/opufow/47/edit)*

和*这个 JQUERY 位*：

```
$('.prv, .nxt').click(function(e){
  $(this).siblings('.slider').stop().animate({
    scrollLeft: (this.className.match('nxt')?'+=':'-=')+200
  },1000); 
}); 
```

解决你的问题？

# zend-framework - 为什么带有 ViewHelper 的复选框总是只发布零

> ID：12167973
> 
> 赞同：0
> 
> 时间：2012-08-28T21:45:38.340
> 
> 标签：zend-framework, post, checkbox, zend-form, decorator

当我定义时，复选框值始终是`0`（无论选中还是未选中）

`$cbxElement->setDecorators(array('ViewHelper'));`

但是，在删除相同的复选框后，复选框值会很好地发布（`1`选中和`0`未选中）

我的问题是为什么复选框会表现出这种行为并且

`setDecorators(array('ViewHelper'))`对复选框元素实际做了什么？

`Zend_View_Helper_FormCheckbox`另外，只要没有表单，为什么会在复选框之前自动添加隐藏字段`name[]`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:02:00.520

`setDecorators(array('ViewHelper'))`删除`dt`和`dd`标签，隐藏字段不是问题。如果您希望您的复选框值 = 1，请尝试以下操作：

```
$yourCheckBox->setValue(1); 
```

# matlab - 如何在 MATLAB 中填充两条线之间的区域和一条不直的曲线（该区域不是多边形）

> ID：12167974
> 
> 赞同：2
> 
> 时间：2012-08-28T21:45:38.143
> 
> 标签：matlab, graphics, plot, matlab-figure, figures

使用 matlab 的 FILL 函数创建一个由具有直边的多边形限制的填充区域：

![在此处输入图像描述](../Images/cce802a0b8ea0e4c3488c6659d215761.png)

不幸的是，这在上图中留下了一个小的白色区域，因为我要填充的区域的边界不是直边多边形，而是在左侧有一个弯曲的边界。我有一条曲线（几乎是抛物线，但不完全是），我想填充两条水平线和曲线本身之间的区域。我还研究了 MATLAB 函数 IMFILL，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T01:06:26.470

您需要做的是制作一个具有更多角的多边形，以便它更平滑地拟合曲线：

```
%# create a parabola and two straight lines
x = -3:0.1:3;
y = x.^2/4;
plot(x,y)
hold on, plot([-3 3],[1 1],'r',[-3 3],[2 2],'r')

%# create a polygon that hugs the parabola
%# note that we need to interpolate separately
%# for positive and negative x
x1 = interp1(y(x<0),x(x<0),1:0.1:2);
%# interpolate in reverse so that the corners are properly ordered
x2 = interp1(y(x>0),x(x>0),2:-0.1:1);

%# fill the area bounded by the three lines
fill([x1,x2],[1:0.1:2,2:-0.1:1],'g') 
```

![在此处输入图像描述](../Images/487bd46c0e0d7c10dcda8996c1375f27.png)

# xslt - 使用 XSL 呈现 RDF。更新

> ID：12167975
> 
> 赞同：4
> 
> 时间：2012-08-28T21:45:42.000
> 
> 标签：xslt, rdf, rdfs

我编写了 RDF 文件，并被要求使用 XSL 呈现它。

RDF 代码（已更改）

```
 <?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="XSLTFile1.xslt"?>
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
xmlns:clinic="http://www.computing-services.co.il"
xml:base="http://www.computing-services.co.il">
<rdfs:Class rdf:ID="Patient">
<rdfs:comment>
the class of patient
</rdfs:comment>
</rdfs:Class>
<rdf:Property rdf:ID="ID">
<rdfs:comment>
Patient's ID
</rdfs:comment>
<rdfs:domain rdf:resource="#Patient"/>
<rdfs:range rdf:resource="http://www.w3.org/2000/01/rdf-schema#Literal"/>
</rdf:Property>
<rdf:Property rdf:ID="Name">
<rdfs:comment>
Patient's Name
</rdfs:comment>
<rdfs:domain rdf:resource="#Patient"/>
<rdfs:range rdf:resource="http://www.w3.org/2000/01/rdf-schema#Literal"/>
</rdf:Property>
  <rdf:Property rdf:ID="Age">
    <rdfs:comment>
      Patient's Age
    </rdfs:comment>
    <rdfs:domain rdf:resource="#Patient"/>
    <rdfs:range rdf:resource="http://www.w3.org/2000/01/rdf-schema#Literal"/>
  </rdf:Property>
  <rdf:Property rdf:ID="Sex">
    <rdfs:comment>
      Patient's Sex
    </rdfs:comment>
    <rdfs:domain rdf:resource="#Patient"/>
    <rdfs:range rdf:resource="http://www.w3.org/2000/01/rdf-schema#Literal"/>
  </rdf:Property>
<rdfs:Class rdf:ID="Disease">
<rdfs:comment>
the class of diseases
</rdfs:comment>
</rdfs:Class>
  <rdfs:Class rdf:ID="CancDiseases">
    <rdfs:comment>
      the class of cancerous diseases
    </rdfs:comment>
    <rdfs:subClassOf rdf:resource="#Disease"/>
  </rdfs:Class>
  <rdfs:Class rdf:ID="CntDiseases">
    <rdfs:comment>
      the class of contagious diseases
    </rdfs:comment>
    <rdfs:subClassOf rdf:resource="#Disease"/>
  </rdfs:Class>
  <rdfs:Class rdf:ID="Traumas">
    <rdfs:comment>
      the class of traumas
    </rdfs:comment>
    <rdfs:subClassOf rdf:resource="#Disease"/>
  </rdfs:Class>
  <rdfs:Class rdf:ID="IntDiseases">
    <rdfs:comment>
      the class of Internal diseases
    </rdfs:comment>
    <rdfs:subClassOf rdf:resource="#Disease"/>
  </rdfs:Class>
  <rdfs:Class rdf:ID="EmIntDiseases">
    <rdfs:comment>
      the class of Emerging diseases
    </rdfs:comment>
    <rdfs:subClassOf rdf:resource="#IntDiseases"/>
  </rdfs:Class>
  <rdfs:Class rdf:ID="ChIntDiseases">
    <rdfs:comment>
      the class of Chronic diseases
    </rdfs:comment>
    <rdfs:subClassOf rdf:resource="#IntDiseases"/>
  </rdfs:Class>
  <rdfs:Class rdf:ID="Treatment">
    <rdfs:comment>
      the class of treatment
    </rdfs:comment>
  </rdfs:Class>
  <rdfs:Class rdf:ID="Medication">
    <rdfs:comment>
      the class of medications
    </rdfs:comment>
    <rdfs:subClassOf rdf:resource="#Treatment"/>
  </rdfs:Class>
  <rdfs:Class rdf:ID="Procedure">
    <rdfs:comment>
      the class of procedures
    </rdfs:comment>
    <rdfs:subClassOf rdf:resource="#Treatment"/>
  </rdfs:Class>

<rdf:Property rdf:ID="isSick">
<rdfs:domain rdf:resource="#Patient"/>
<rdfs:range rdf:resource="#Disease"/>
</rdf:Property>
  <rdf:Property rdf:ID="gets">
    <rdfs:domain rdf:resource="#Patient"/>
    <rdfs:range rdf:resource="#Treatment"/>
  </rdf:Property>
  <rdf:Property rdf:ID="helpsFrom">
    <rdfs:domain rdf:resource="#Treatment"/>
    <rdfs:range rdf:resource="#Disease"/>
  </rdf:Property>

          <clinic:ChIntDiseases rdf:ID="chrone"/>
          <clinic:ChIntDiseases rdf:ID="diabetes"/>
          <clinic:Traumas rdf:ID="BrokenLeg"/>
          <clinic:EmIntDiseases rdf:ID="Appendicite"/>
          <clinic:CancDiseases rdf:ID="BreastCancer"/>
          <clinic:CancDiseases rdf:ID="LungCancer"/>

  <clinic:Medication rdf:ID="Insuline">
    <clinic:helpsFrom rdf:resource="#diabetes"/>
  </clinic:Medication>
  <clinic:Medication rdf:ID="Pentassa">
    <clinic:helpsFrom rdf:resource="#chrone"/>
  </clinic:Medication>
  <clinic:Medication rdf:ID="Raffasal">
    <clinic:helpsFrom rdf:resource="#chrone"/>
  </clinic:Medication>
  <clinic:Medication rdf:ID="Advil">
    <clinic:helpsFrom rdf:resource="#BrokenLeg"/>
    <clinic:helpsFrom rdf:resource="#Appendicite"/>
  </clinic:Medication>
  <clinic:Procedure rdf:ID="Sigmoscopia">
    <clinic:helpsFrom rdf:resource="#chrone"/>
  </clinic:Procedure>
  <clinic:Procedure rdf:ID="Chemo">
    <clinic:helpsFrom rdf:resource="#BreastCancer"/>
    <clinic:helpsFrom rdf:resource="#LungCancer"/>
  </clinic:Procedure>

          <clinic:Patient rdf:ID="p23456">
            <clinic:Name>Linda Jones</clinic:Name>
            <clinic:Sex>Female</clinic:Sex>
            <clinic:Age>56</clinic:Age>
            <clinic:isSic>
              <rdf:Bag>
                <rdf:li rdf:resource="#chrone"/>
                <rdf:li rdf:resource="#diabetes"/>
              </rdf:Bag>
            </clinic:isSic>
            <clinic:gets>
              <rdf:Bag>
                <rdf:li rdf:resource="#Pentassa"/>
                <rdf:li rdf:resource="#Insuline"/>
              </rdf:Bag>
            </clinic:gets>
          </clinic:Patient>
  <clinic:Patient rdf:ID="p12345">
    <clinic:Name>Moshe Koen</clinic:Name>
    <clinic:Sex>Male</clinic:Sex>
    <clinic:Age>70</clinic:Age>
    <clinic:isSic>
      <rdf:Bag>
        <rdf:li rdf:resource="#diabetes"/>
      </rdf:Bag>
    </clinic:isSic>
    <clinic:gets>
      <rdf:Bag>
        <rdf:li rdf:resource="#Insuline"/>
      </rdf:Bag>
    </clinic:gets>
  </clinic:Patient>
  <clinic:Patient rdf:ID="p34567">
    <clinic:Name>Ofer Meleh</clinic:Name>
    <clinic:Sex>Male</clinic:Sex>
    <clinic:Age>25</clinic:Age>
    <clinic:isSic>
      <rdf:Bag>
        <rdf:li rdf:resource="#BrokenLeg"/>
      </rdf:Bag>
    </clinic:isSic>
    <clinic:gets>
      <rdf:Bag>
        <rdf:li rdf:resource="#Advil"/>
      </rdf:Bag>
    </clinic:gets>
  </clinic:Patient>
  <clinic:Patient rdf:ID="p45678">
    <clinic:Name>Itzhak Rabinovich</clinic:Name>
    <clinic:Sex>Male</clinic:Sex>
    <clinic:Age>38</clinic:Age>
    <clinic:isSic>
      <rdf:Bag>
        <rdf:li rdf:resource="#LungCancer"/>
      </rdf:Bag>
    </clinic:isSic>
    <clinic:gets>
      <rdf:Bag>
        <rdf:li rdf:resource="#Chemo"/>
      </rdf:Bag>
    </clinic:gets>
  </clinic:Patient>
  <clinic:Patient rdf:ID="p56789">
    <clinic:Name>Golda Zilber</clinic:Name>
    <clinic:Sex>Female</clinic:Sex>
    <clinic:Age>45</clinic:Age>
    <clinic:isSic>
      <rdf:Bag>
        <rdf:li rdf:resource="#BreastCancer"/>
        <rdf:li rdf:resource="#Appendicite"/>
      </rdf:Bag>
    </clinic:isSic>
    <clinic:gets>
      <rdf:Bag>
        <rdf:li rdf:resource="#Chemo"/>
        <rdf:li rdf:resource="#Advil"/>
      </rdf:Bag>
    </clinic:gets>
  </clinic:Patient>

</rdf:RDF> 
```

`

有患者、他们的疾病和治疗（我更改了之前的 RDFS 部分）我需要制作有序的患者列表（以及他们的个人数据）并为每个患者 - 他的疾病和治疗表。

它应该是这样的：

![](../Images/99c28f7b321e98339b7d5a577fbddaee.png)

那是我写 xsl 的新尝试

```
 <?xml version="1.0"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
    xmlns:clinic="http://www.infomed.co.il">
  <xsl:output method="html" indent="yes"/>

  <xsl:template match="/rdf:RDF/clinic:Patient">
    <html>
      <body>
        <ol>
          <xsl:apply-templates select="/rdf:RDF/clinic:Patient" />
        </ol>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="clinic:Patient">
    <li>
      Name <xsl:value-of select="clinic:Name"/>
      Age <xsl:value-of select="clinic:Age"/>
      Sex <xsl:value-of select="clinic:Sex"/>
      <table>
        <tr>
          <th>Disease</th>
          <xsl:apply-templates select="clinic:isSic" />
          <th>Treatment</th>
          <xsl:apply-templates select="clinic:gets" />
        </tr>

      </table>
    </li>
  </xsl:template>

  <xsl:template match="clinic:isSic">
    <xsl:variable name="resource" select="@rdf:resource"/>
      <td>
        <xsl:value-of select="translate(@rdf:resource,'#','')"/>
      </td>  
  </xsl:template>
  <xsl:template match="clinic:gets">
    <xsl:variable name="resource" select="@rdf:resource"/>
    <td>
      <xsl:value-of select="translate(@rdf:resource,'#','')"/>
    </td>
  </xsl:template>

</xsl:stylesheet> 
```

它仍然不起作用，但至少我现在看到了患者数据。它看起来像这样：

患者类别 患者 ID 患者姓名 患者年龄 患者性别 疾病类别 癌症疾病类别 传染病类别 外伤类别 内科疾病类别 新发疾病类别 慢性疾病类别 治疗类别药物类别 程序类别 Linda Jones 女 56 Moshe Koen 男 70 Ofer Meleh 男 25 Itzhak Rabinovich 男 38 Golda Zilber 女 45

我将不胜感激任何帮助使它像这样：

![](../Images/99c28f7b321e98339b7d5a577fbddaee.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T02:14:43.840

更新答案以反映问题的变化：

您更新的样式表仍然有几个问题：

*   在 XSLT 中使用不正确的命名空间`clinic`uri 声明了 的命名空间。它需要被映射到`http://www.computing-services.co.il`才能使您的 XPath 语句匹配。
*   我将匹配的模板更改为`/rdf:RDF/clinic:Patient`在根节点上匹配，`/`以确保控制样式表的处理方式。否则，默认模板将在元素和文本节点（发出文本和空格）上匹配，直到它命中`clinic:Patent`元素并执行模板。
*   如果您想要疾病和治疗的单独行，那么您需要关闭`tr`并在之前开始一个新的`<tr>Treatment</tr>`。
*   在 and 的模板中`clinic:isSic`，`clinic:gets`您不需要*资源*变量和@rdf:Resource `is`rdf:Bag/rdf:li/@rdf:resource` 的路径。

我对您的样式表进行了这些调整：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
  xmlns:clinic="http://www.computing-services.co.il">
  <xsl:output method="html" indent="yes"/>

  <xsl:template match="/">
    <html>
      <body>
        <ol>
          <xsl:apply-templates select="/rdf:RDF/clinic:Patient" />
        </ol>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="clinic:Patient">
    <li>
      Name <xsl:value-of select="clinic:Name"/>
      Age <xsl:value-of select="clinic:Age"/>
      Sex <xsl:value-of select="clinic:Sex"/>
      <table border="1">
        <tr>
          <th>Disease</th>
          <xsl:apply-templates select="clinic:isSic" />
        </tr>
        <tr>
          <th>Treatment</th>
          <xsl:apply-templates select="clinic:gets" />
        </tr>
      </table>
    </li>
  </xsl:template>

  <xsl:template match="clinic:isSic">
      <xsl:apply-templates select="rdf:Bag/rdf:li/@rdf:resource"/>
  </xsl:template>

  <xsl:template match="clinic:gets"> 
      <xsl:apply-templates select="rdf:Bag/rdf:li/@rdf:resource"/>
  </xsl:template>

  <xsl:template match="rdf:Bag/rdf:li/@rdf:resource">
    <td>
      <xsl:value-of select="translate(.,'#','')"/>
    </td>
  </xsl:template>
</xsl:stylesheet> 
```

顺便说一句，当前的逻辑似乎假设疾病和治疗之间存在一对一的映射。如果有多种治疗方法，您将如何区分或知道哪些治疗方法对应于哪种疾病？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T23:14:56.600

如果您尝试将 RDF 显示为 HTML，我认为您应该使用[RDFa](http://www.w3.org/TR/xhtml-rdfa-primer/)。您可以很容易地生成带有 RDFa 标记的 HTML，它还有一个额外的好处，即任何使用 RDFa 感知插件或代理查看页面的人都可以获取并使用 RDF。如果您只是使用 XSL 将其转换为 HTML，那么您将“丢失”RDF。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:34:55.737

**不得**使用 XML 技术解析RDF ！

# .htaccess - mod_rewrite 使得第一级子目录是一个 GET 变量

> ID：12167977
> 
> 赞同：1
> 
> 时间：2012-08-28T21:45:56.833
> 
> 标签：.htaccess, codeigniter, mod-rewrite, url-rewriting

好吧，标题真的很草率。

这是我的问题：我有一个新闻站点，当您转到主页 ( ) 时，它会在确定您的地理位置后将您`domain.com`重定向到。`domain.com/news/top?geography=San_Francisco`

我如何使用 .htaccess 使其从`domain.com/news/top?geography=San_Francisco domain.com/San_Francisco/news/top` ?

有一些类似的问题，但我没有找到一个足够相似的问题，因为您正在将 URL 编辑为更靠后的子目录。

还应该注意的是，我正在使用 PHP 的 Code Igniter 框架，它通常有它，`domain.com/index.php/news/top?geography=San_Francisco`但我已经做了一个 mod_rewrite 来摆脱`index.php`. 代码如下：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

我试过的代码：

```
RewriteRule ^([^/]+)/news/top$ /news/top?geography=$1 [L,QSA]
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:26:37.907

在您拥有的 index.php 规则之前，尝试添加以下内容：

```
RewriteRule ^([^/]+)/news/top$ /news/top?geography=$1 [L,QSA] 
```

您需要确保生成的链接是`domain.com/San_Francisco/news/top`虽然形式的。

* * *

但是要处理仍然看起来像旧方式的野外链接，您必须匹配实际请求：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /news/top\?geography=([^&]+)
RewriteRule ^news/top$ /%1/news/top? [L,R=301] 
```

如果有人访问链接`domain.com/news/top?geography=San_Francisco`并使其成为 301 浏览器，这将重定向浏览器，因此浏览器的地址栏显示：`domain.com/San_Francisco/news/top`. 此时浏览器将发送另一个对第二个 URL 的请求，然后您使用上面的规则将其更改回带有查询字符串的那个。

# javascript - 为什么我在以编程方式打开窗口时遇到问题？

> ID：12167978
> 
> 赞同：1
> 
> 时间：2012-08-28T21:45:58.347
> 
> 标签：javascript

我有一个应用程序，我想要一个按钮在单独的窗口中打开三个不同的日历。该按钮有一个引用他以下 JS 函数的操作：

```
 function all_calendars() {
    var target = "www.calendar_a.com";
    var title = "Calendar A";
    window.open(target, title, '_new');

    var target = "www.calendar_b.com";
    var title = "Calendar B";
    window.open(target, title, '_new');

    var target = "www.calendar_c.com";
    var title = "Calendar C";
    window.open(target, title, '_new');

} 
```

只有第三个日历在新选项卡中打开。我更喜欢三个窗口，虽然我认为这是一个浏览器设置，但为什么只有一个打开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:50:03.193

MDC 在[其](https://developer.mozilla.org/en-US/docs/DOM/window.open)关于 open 方法的文档中声明

> 名称不应包含任何空格

因此，您将在同一个“日历”窗口中打开所有内容。

# ruby-on-rails - 可以使用 Capybara 访问 Rspec 中的会话变量

> ID：12167981
> 
> 赞同：2
> 
> 时间：2012-08-28T21:46:19.140
> 
> 标签：ruby-on-rails, rspec, capybara

是否可以使用 Capybara 和 Selenium 驱动器访问 Rspec 中的会话变量？

我将如何做这样的事情（我正在使用omniauth-facebook）？

```
require 'spec_helper'

describe 'Api' do
  def login_with_oauth
    visit "/auth/facebook"
  end

  it 'get location count for specific user' do
    login_with_oauth
    @user=User.find(session[:user_id])
    #puts "here is response body: #{response.body}" 
```

我看到 [如何使用 Capybara 和 RSpec 检查会话哈希？](https://stackoverflow.com/questions/12083296/how-to-inspect-the-session-hash-with-capybara-and-rspec)但没有得到我真正想要的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T16:38:14.520

我想想想你实际上不需要会话。如果我错了，我很抱歉。

这就是[您可以测试](https://github.com/intridea/omniauth/wiki/Integration-Testing)omniauth的方式。

```
# spec/spec_helper.rb
OmniAuth.config.test_mode = true
OmniAuth.config.mock_auth[:facebook] = OmniAuth::AuthHash.new
OmniAuth.config.add_mock(:facebook, {
  provider: "facebook",
  uid: "123456",
  info: {
    email: "bruce.wayne@batman.com",
    first_name: "Bruce",
    last_name: "Wayne"
  }
})

# spec/request/api_spec.rb
let!(:user) { create :user, email: "bruce.wayne@batman.com" }

before do
  visit "/auth/facebook"
end

it 'get location count for specific user' do
  user.id # contains your user id
end 
```

# computer-vision - 用于 3D 深度感知的硬件

> ID：12167982
> 
> 赞同：5
> 
> 时间：2012-08-28T21:46:23.200
> 
> 标签：computer-vision, kinect, sensors, robotics, depth

我计划通过集成 3D 深度传感器（如 Kinect 或 Asus Xtion Pro）来为预构建的机器人提供 3D 视觉。这是我能找到的仅有的两个，但我想还有更多正在建造或已经存在。

有没有人对我可以使用的硬件有任何建议，或者这两者中哪一个更适合与 ROS（机器人操作系统）集成的开源项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T03:52:44.977

我会根据硬件（Kinect 具有更好的范围）投票支持 Windows 版 Kinect，而不是 Asus Xtion Pro，但根据您的项目，两者都有可能不适合您。我不熟悉机器人操作系统，但 Kinect 只能在 Windows 7、Windows 8 和据称是 Windows Server 2008 上运行。华硕 Xtion Pro 似乎有可用于 Linux 发行版的 SDK，所以如果你的机器人是运行类似的东西*可能会*起作用。

根据您需要能够做什么，您可能想要使用更简单的深度传感器。例如，购买少量[这些](http://www.trossenrobotics.com/sharp-ir-distance-sensor-gp2y0a02yk.aspx)，你仍然会比购买 Kinect 少得多。它们也可能更容易与您的机器人集成；将它们连接到微控制器，通过 USB 将微控制器插入机器人，生活应该很轻松。或者直接将它们插入您的机器人。我不知道这些事情是如何运作的。

**编辑**：我花了太多时间使用 Kinect SDK，我忘了有可用的第三方 SDK 可能能够在您使用的任何操作系统上运行。不过，这真的取决于。Kinect 的最小深度更好，这对我来说似乎很重要，但 FOV 比 Xtion 差。如果您只需要基础知识（我面前是否有一堵墙？）一定要使用迷你 IR 传感器，这些传感器在整个网络上都可以买到，可能在您附近的商店也可以买到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:25:19.253

Kinect + Linux + ROS + PCL (http://pointclouds.org/) 是一个非常强大（而且相对便宜）的组合。我不确定你想用这个系统做什么，但是这个组合有足够的库可以做很多事情。您的硬件将受到您可以安装 linux 以及运行某些点云处理的速度的限制。尽管有用于像 gumstix 这样的嵌入式设备的 linux 和 ROS 端口，但我会选择更接近标准 PC 的东西，比如 mini-ITX。从长远来看，您的头痛将会减少。

# c - 线程参数传递 c

> ID：12167990
> 
> 赞同：0
> 
> 时间：2012-08-28T21:47:15.353
> 
> 标签：c, multithreading, parameter-passing

我的问题是关于传递给线程的参数。

我有一个函数 Foo 对数组进行操作，比如 arrayA。为了加快速度，Foo 被编码为在数组的两个方向上操作。因此， Foo 将 arrayA 和一个整数 X 作为参数。根据 X 的值，它可以正向或反向运行。

我希望避免全局使用“arrayA”和“X”。所以，我将“arrayA”和“X”作为参数传递给 Foo，并创建两个线程来运行 Foo——每个方向一个。这是我所做的：

```
typedef struct {int* arrayA[MSIZE]; int X; } TP; //arrayPack=TP 

void Foo (void *tP) {

    TP *tp = (TP*)tP;  // cast the parameter tP back to what it is and assign to pointer *tp

    int x;
    printf("\nX: %d", tp->X);
    printf("\n  arrayA: "); for (x=0; x<tp->arrayA.size(); printf("%d ", aP->arrayA[x]), x++);  
} // end Foo

void callingRouting ()  {   
    int* arrayA[MSIZE] = {3,5,7,9}; 
    TP tp; tp.arrayA=arrayA; 
    tp.X=0;   _beginthread(Foo, 0, (void*)&tp); // process -- forward 
    tp.X=1;   _beginthread(Foo, 0, (void*)&tp); // process -- reverse   
} 
```

值没有传递——我的数组打印为空，我没有正确打印 X 的值。我错过了什么？

我也很感激关于这方面的一些阅读的建议——将参数传递给线程——尤其是在传递线程共享的资源方面。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:55:14.673

您将堆栈变量的地址传递给您的线程函数，一旦`callingRouting`退出该`TP`结构不再存在。它们需要是全局变量或在堆上分配。

但是`TP`，每个线程都需要两个副本，因为更改`tp.X=1`可能对两个线程都是可见的。

那里存在问题，但您如何看待它们取决于操作系统如何决定在每次执行时安排线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T22:00:55.980

首先要记住的是，您有一个线程正在启​​动另外两个线程。由于您无法控制处理器时间片及其分配方式，因此您无法确定其他两个线程何时启动，甚至可能不是它们启动的顺序。

由于您在函数返回后立即使用函数本地的堆栈上的数组，因此`callingRouting ()`分配的局部变量基本上超出范围并且不再依赖。

所以有几种方法可以做到这一点。

第一种是对传递给线程的这些数据项使用全局或静态内存变量。

另一种是启动两个线程，然后等待两者都完成后再继续。

由于您不知道线程何时启动或启动的顺序，因此您确实应该使用两个不同的 TP 类型变量，每个线程一个。否则，您将面临时间片分配的风险，即两个线程将具有相同的 TP 数据。

# perl - 如何保留 perl 变量的尾随空格？

> ID：12167991
> 
> 赞同：3
> 
> 时间：2012-08-28T21:47:22.213
> 
> 标签：perl, file, unpack, fixed-width

[脚本（最初从这里](http://forjournalists.com/cookbook/index.php?title=Processing_fixed-width_files&printable=yes&printable=yes)复制）将一个固定宽度的文本文件作为输入，重新排列列的顺序，并且应该输出一个固定宽度的文本文件。但是尾随空格被从变量中截断，这意味着输出不是固定宽度的。

```
open(INPUT, "</home/ecom/tmp/citiBIG/GROUP.txt");
open(OUTPUT, ">/home/ecom/tmp/citiBIG/GROUP2.txt");

my $LINEFORMAT = "A2 A7 A14 A4 A2 A2 A4 A12 A25 A30 A26 A40 A40 A40 A25 A4 A12 A14 A2 A8 A12 A70 A8"; # Adjust to your
 field widths

while(<INPUT>) {
    chomp;
    my($Null0, $EmpNum, $CcNumber, $Null1, $CcExpYy, $CcExpMm, $Null2, $Title, $LastName, $FirstName, $HolderName, $Ad
dress1, $Address2, $Address3, $Suburb, $State, $PostCode, $Null3, $AreaCode, $WorkPhone, $Null4, $Email, $GroupName) =
 unpack($LINEFORMAT, $_);

    print OUTPUT $EmpNum . "               " . "~" . $LastName . "~" . $FirstName . "~" . $Title . "        " . "~" .
$Address1 . "~" . $Address2 . "~" . $Address3 . "~" . $Suburb . "~" . $PostCode . "~" . $State . "~" . $AreaCode . "~"
 . $WorkPhone . "~" . $CcNumber . "~" . $CcExpMm . "~" . $CcExpYy . "~" . $HolderName . "~" . $Email . "~" . $GroupNam
e . "                      " . "~" . "\n";
}

close INPUT;
close OUTPUT; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T22:01:27.710

`perldoc -f pack`建议：

```
 o   The "a", "A", and "Z" types gobble just one value, but pack
               it as a string of length count, padding with nulls or
               spaces as needed.  When unpacking, "A" strips trailing
               whitespace and nulls, "Z" strips everything after the first
               null, and "a" returns data without any sort of trimming. 
```

也许您可以在格式字符串中尝试“a”而不是“A”？或者，您可以使用`printf`将输出字段填充到所需的宽度。

# ruby-on-rails - 加载 javascript 并在特定控制器和 rails 中的特定操作上运行它

> ID：12167997
> 
> 赞同：1
> 
> 时间：2012-08-28T21:48:16.600
> 
> 标签：ruby-on-rails, ruby

我有标准的 Rails 应用程序格式。

我有这些控制器：

```
class StaticPagesController < ApplicationController

  def help
  end

  def about
  end

end 
```

我有文件`app/assets/javascripts/static_page.js.coffee`

**我想要两件事：**

1.  **仅**当我运行 static_pages 的页面之一时才加载此 javascript

2.  能够根据控制器内部的特定操作进行不同的 js 调用：

javascript 文件应如下所示：

```
//general javascript code
if (isThisHelpPage) {
   //Run some help page code
}

if (isThisAboutPage) {
   //Run some about page code
} 
```

我认为第一个问题应该`app/assets/javascripts/application.js`通过添加一些规则以某种方式解决文件，例如：

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require_tree .

//= (isItStaticController? render static_page.js.coffee) 
```

但我想知道我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:03:30.483

不幸的是，您无法向应用程序 js 文件添加条件，因为它是在部署应用程序时预编译的。我可以在这里看到两种可能的方法对您有用：

1）像上面一样将所有的javascript放在一个文件中，然后在代码中设置页面，如下所示：

```
<script> page = "Help" </script> or <script> page = "About" </script> 
```

你的脚本可能会变成：

```
if(page === "Help") .... else if(page === "About") .... 
```

2) 另一种选择是为每个页面创建单独的 js 文件，然后通过 yield :head 块将它们合并到您的布局中。在您的帮助文件中，它看起来像这样：

```
<% content_for :head %>
  <%= javascript_include_tag 'help' %>
<% end %> 
```

我个人喜欢在我的应用程序中使用第二种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:04:27.460

我将解释我如何处理这个问题。在我`ApplicationController`的身上，我有一个方法可以`before_filter`在每个请求上运行。

```
def prepare_common_variables
  controller_name = self.class.name.gsub(/Controller$/, '')
  if !controller_name.index('::').nil?
    namespace, controller_name = controller_name.split('::')
  end

  @default_body_classes = ["#{controller_name.underscore}_#{action_name} ".downcase.strip]
  @default_body_classes = ["#{namespace.underscore}_#{@default_body_classes.join}".strip] if !namespace.nil?
end 
```

在`app/views/layouts/application.html.erb`我有以下

```
<body class="<%= yield :body_classes %> <%= @default_body_classes.join(' ') %>"> 
```

对于您的`StaticPagesController`，当`help`操作运行时，这将生成以下`<body>`标记：

```
<body class="static_pages_help"> 
```

接下来，我有一个这样的方法`app/assets/javascripts/application.js.erb`

```
Array.prototype.diff = function(a) {
  return this.filter(function(i) {return !(a.indexOf(i) > -1);});
};

var DEEFOUR = (function (deefour) {
  deefour.Utility = (function (utility) {
    utility.hasBodyClass = function() {
      var args = Array.prototype.slice.call(arguments);
      if (args.length === 0 || $('body').get(0).attr('class') == "") return false;

      return args.diff($('body').get(0).attr('class').split(/\s/)).length == 0;
    };

    return utility;
  }(deefour.Utility || {}));

  return deefour;
}(DEEFOUR || {})); 
```

最后，在我相当于你的情况下，`app/assets/javascripts/static_page.js.coffee`我会有这样的东西

```
$(function(){
  if (!DEEFOUR.Utility.hasBodyClass('static_pages_help')) return;

  // code for your help page
});

$(function(){
  if (!DEEFOUR.Utility.hasBodyClass('static_pages_about')) return;

  // code for your about page
}); 
```

这很好，因为在你看来

```
<% content_for :body_classes, :some_custom_class %> 
```

或在特定动作中

```
@default_body_classes << "some_other_custom_class" 
```

您可以有条件地添加特定的类以在您的 Javascript 中进行匹配。

```
// *both* 'static_pages_help' and 'some_other_class' are required
if (!DEEFOUR.Utility.hasBodyClass('static_pages_help') || !DEEFOUR.Utility.hasBodyClass('some_other_class')) return; 
```

`hasBodyClass(...)`接受任意数量的参数；把它们列出来。这对于当表单提交失败时您希望运行相同的 Javascript 之`new`类的事情很有用。`create`

```
if (!DEEFOUR.Utility.hasBodyClass('some_controller_new', 'some_controller_create')) return; 
```

应该注意的是，`prepare_common_variables`需要进行一些调整，因为它只允许单个命名空间 like`SomeNamespace::TheController`而不是更多 like `SomeNamespace::AnotherNamespace::TheController`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T22:22:54.347

这里的最佳实践是使用 content_for 辅助方法。有点像@Adam 所描述的，但你可能想`<%= yield :script_files %>`在布局文件的底部放一个，然后调用

```
<% content_for :script_files do %>
  <%= javascript_include_tag 'your_js_file' %>
<% end %> 
```

从你想要的动作中。您可以通过遵循 Ryan Bates 在早期 Railscast 中提到的类似方法来做到这一点甚至更干净：

```
module ApplicationHelper
  def javascripts(paths)
    content_for :script_files do
      javascript_include_tag(paths.is_a?(Array) ? paths.join(',') : paths)
    end
  end
end 
```

然后，您可以从您的操作视图中调用`<% javascripts 'your_js_file' %>`并包含该文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T22:24:19.823

> 仅当我运行 static_pages 的页面之一时才加载此 javascript

首先，资产管道编译并创建静态资产文件`offline`，这意味着您不能在服务用户请求期间（在生产中）根据控制器名称动态创建捆绑包。

但是，您可以在相应的布局文件（StaticPages 控制器）中使用单独的`<%= javascript_include_tag "static_page_manifest.js" %>`语句而不是（包括`application.js`）来为特定视图定义某些 javascript。例如，您可以有一个`app/assets/javascripts/static_page_manifest.js`：

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require_tree .

//= static_page 
```

或者，如果您想要动态 javascript 模块包含，您可以使用`requirejs`( `requirejs-rails`) 等。

> 能够根据控制器内部的特定操作进行不同的js调用

这可以通过检查`id`带有取决于控制器和动作名称的值的主体标签来实现！例如：

```
<body id="static_pages_<%= controller.action_name %>">
... 
```

然后您可以在 javascript 包中检查此 id 值以执行某些代码片段。